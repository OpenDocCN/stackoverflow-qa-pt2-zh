# StackOverflow 问答 14375000-14375999

# php - 如何水平获取垂直数据

> ID：14375001
> 
> 赞同：-1
> 
> 时间：2013-01-17T08:36:20.383
> 
> 标签：php, mysql

我如何从数据库中水平获取垂直数据（学生的科目和分数）？

我在谷歌浪费了一整天，但没有结果。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:53:33.917

你可以利用`group_concat`函数，

例如 ：

```
SELECT group_concat(subject,':',marks) FROM students; 
```

您的输出将如下所示：

```
english:93,maths:87,science:91 ...,etc 
```

# php - Yii Dropdownlist - showing the column values from a table

> ID：14375006
> 
> 赞同：0
> 
> 时间：2013-01-17T08:36:56.217
> 
> 标签：php, yii

I want to add a dropdown list in my page which should show the values from a table column, How can I do this using Yii framework?

I have a table(table name is program) with columns id, program_name, is_active

I have created a new controller and a view associated with it, I need to show a dropdown list in that view with the values populated from program_name

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:44:07.717

I would solve this at model level. e.g.

In Machine model, I would define a getter :

```
 public function getCompleteMachineName ()
 {
  return $this->merk->name.' '.$this->name;
 } 
```

And, in your listData :

```
 Chtml::listData(Machine::model()->with('merk')->findAll(...), 
  'machine_id', 'completeMachineName') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:10:58.693

All you need to do is use [`CHtml::dropDownList`](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail"), possibly with [`CHtml::listData`](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail") to ease the process of creating a `value=>display` array for the [`<options>` tag](https://developer.mozilla.org/en-US/docs/HTML/Element/option "https://developer.mozilla.org/en-US/docs/HTML/Element/option").

Example (see comments in code):

```
echo CHtml::dropDownList(
     'somename',// for "name" attribute of <select> html tag,
                // this also becomes the "id" attribute, incase you don't specify
                // it explicitly in the htmlOptions array
     '', // the option element that is to be selected by default
     CHtml::listData( // listData helps in generating the data for <option> tags
        Program::model()->findAll(), // a list of model objects. This parameter
              // can also be an array of associative arrays
              // (e.g. results of CDbCommand::queryAll).
        'id', // the "value" attribute of the <option> tags, 
              // here will be populated with id column values from program table 
        'program_name' // the display text of the <option> tag,
              // here will be populated with program_name column values from table
     ),
     array('id'=>'someid'), // the htmlOptions array, whose values will be
              // generated as html attributes of <select> and <option> tags
); 
```

**Edit** Incase you don't have a `CActiveRecord` model for *program* table, you could use [direct sql](http://www.yiiframework.com/doc/api/1.1/CDbCommand "http://www.yiiframework.com/doc/api/1.1/CDbCommand"), replace `Program::model()->findAll()` in the above sample with:

```
Yii::app()->db->createCommand()->select('id, program_name')->from('program')->queryAll() 
```

Also if you want to use *program_name* column values as the `value` attribute for the `option` tag, then you can use:

```
CHtml::listData($data,'program_name','program_name') // replaced the 'id' with 'program_name' 
```

# visual-studio-2010 - 如何在工具 VS2010 中重新绑定用于导航的箭头键

> ID：14375009
> 
> 赞同：0
> 
> 时间：2013-01-17T08:37:03.760
> 
> 标签：visual-studio-2010, keyboard-shortcuts

我已更改文本编辑器中光标的导航，如此问题中所述[重新绑定 VS2010 中的箭头键](https://stackoverflow.com/questions/5912974/rebinding-the-arrow-keys-in-vs2010/5939483#5939483)

我找不到其他窗口的相同快捷方式。例如在解决方案资源管理器中向上/向下导航。

有谁知道是否可以更改这些快捷方式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T09:00:57.217

这是一篇[文章](http://lifehacker.com/5277383/use-caps-lock-for-hand+friendly-text-navigation)，介绍了如何通过更改 Caps Lock 键的行为为主键盘上的所有程序全局激活箭头键（加上 home 键和 end 键）。

# objective-c - Cocos2D 2.0 CGRectIntersectsRect 透明度

> ID：14375012
> 
> 赞同：1
> 
> 时间：2013-01-17T08:37:07.727
> 
> 标签：objective-c, cocos2d-iphone, transparency

我正在使用加速度计制作游戏，基本上我的角色在屏幕底部，他需要避免物体从屏幕顶部掉落。我`CGRectIntersectsRect`用来查看我的角色精灵是否与我的敌人精灵相交，但是这样做的问题是`CGRectIntersectsRect`检测到我的角色精灵的透明部分。

有没有办法让它忽略精灵的透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:56:56.153

一种方法是使用 Box2d。即使您不想要物理模拟，您也可以设置用于碰撞检测的身体形状。

或者，如果您不想使用 C++，那么 Chipmunk 也有带有碰撞检测的形状。这篇文章概述了一些细节：[Chipmunk 碰撞检测](https://stackoverflow.com/questions/2025035/chipmunk-collision-detection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:03:09.153

如果您不想使用物理模拟器，您可以将您的精灵视为多个矩形，因此您可以测试所有部分而不是整个边界框的命中。如果精灵形状很简单，这可能会更容易并给你一个很好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:46:29.280

除了具有手动设计形状的物理引擎（推荐以获得最佳性能）之外，如果您需要非常精确的碰撞检测，您还可以使用[像素完美的碰撞检测。](http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/)

# php - 如何检测客户端机器上的打印机？

> ID：14375013
> 
> 赞同：4
> 
> 时间：2013-01-17T08:37:08.177
> 
> 标签：php, printing

我看了一下，它给出的第一个链接是 [http://php.net/manual/en/function.printer-list.php](http://php.net/manual/en/function.printer-list.php)

但是它确实声明它适用于连接到服务器的打印机。如果我想获得客户机器上的打印机型号怎么办？这可以用PHP吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:41:05.340

PHP 不可能，Javascript 也不可能。我想象的唯一方法是嵌入您网站的 Java 小程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:40:58.347

PHP 在服务器端运行，因此无法访问连接到客户端计算机的设备。你可能会在 Javascript 中找到一些东西（虽然我不认为它可以做到这一点......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:43:14.853

正如其他人所说，不可能。但是，为什么不让访问者在打印时选择打印机呢？

# java - varArgs 计算数字总和的示例（调用与输入参数数量无关的相同方法）

> ID：14375016
> 
> 赞同：-3
> 
> 时间：2013-01-17T08:37:45.633
> 
> 标签：java

> **可能重复：**
> [java：我如何创建一个支持任意数量参数的函数？](https://stackoverflow.com/questions/4215698/java-how-can-i-create-a-function-that-supports-any-number-of-parameters)

无论输入参数如何，有没有办法从其他函数调用通用函数？如果我的输入数据类型都相同（仅 int 或仅 String）

```
public class sumOfNo {

public static void main(String[] arg) {

    /**
     * Normal way of calling function to calculate sum.
     */
     int result = sum(1, 2);
     int result1 = sum(1, 2, 3); 
```

}

```
/**
 * A normal function overloading method of calculating sum
 * @return
 */

 private static int sum(int i, int i0) {
     int c = i + i0;
     System.out.println("c:" + c);
     return c;
 }

 private static int sum(int i, int i0, int i1) {
     int c = i + i0 + i1;
     System.out.println("c:" + c);
     return c;
 }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:41:58.237

尝试像这样

```
public int sum(int... args) {  
  int sum = 0;  
  for (int i : args)  
    sum += i;  
  return sum;  
} 
```

然后你可以打电话

```
sum(3);
sum(3, 4, 5);
sum(3, 4, 5, 6, 7); 
```

erit：阿米特快了 5 秒 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:55:22.693

尝试这个 ：

```
public class Main
{
    public static void main(String[] argv)
    {
        int result1 = sum(1, 2);
        int result2 = sum(1, 2, 3);
        int result3 = sum(1, 2, 4, 5, 6, 1000);

        System.out.println(result1 + "\n" + result2 + "\n" + result3);
    }

    private static int sum(int... args)
    {
        int ret = 0;

        if (args != null)
        {
            for (int val : args)
            {
                ret += val;
            }
        }
        return ret;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:12:17.177

## 快速方法

这可能是一个解决方案（注意：***始终***使用有意义的变量名！）：

```
private static int sum(int i, int... others) {
    int sum = i;

    if(others!=null)
        for(int other : others) {
            sum+=other;
        }
    }
    System.out.println("sum:" + sum);
    return sum;
} 
```

注意论点。由于对 1 个数字求和不是很有意义，因此此构造确保至少有 1 个 int 进入。并且此构造还检查 vararg 中的空值。

## 满满的情绪...

执行此操作时，快速方法会发生什么：

```
int veryBigNumber = sum(Integer.MAX_VALUE, 1); 
```

`veryBigNumber`实际上会`==Integer.MIN_VALUE`...

这可能是个问题。由于发生溢出时 Java 不会抛出异常，因此您最终可能会得到不正确的结果。您可以检查溢出：

```
private static int aLittleBitSaferSum(int i, int... others) throws ArithmeticException {
    int sum = i;
    if(others!=null)
        for(int other : others) {
            if(Integer.MAX_VALUE-other<sum) {
                throw new ArithmeticException("Sum would be too large to fit in int");
            }         
            if(Integer.MIN_VALUE+other>sum) {
                throw new ArithmeticException("Sum would be too small to fit in int");
            }         
            sum+=other;
        }
    }
    System.out.println("sum: " + sum);
    return sum;
} 
```

当然，这只是一个愚蠢的检查......结果可能非常适合`int`，例如：

```
sum(Integer.MAX_VALUE, 1, -1); 
```

这应该会导致`Integer.MAX_VALUE`- 它会在没有检查的情况下发生。

## 扩展视野

不要害怕！上述问题也可以解决。例如，通过提供一种巧妙的算法对操作数进行排序，以使部分结果始终适合`int`范围，但我认为这是一个需要解决的问题......并且会花费*大量*计算能力。

但是，通过扩展函数处理的值的范围，它可以做得更好：

```
private static int aLittleBitSaferSum(int i, int... others) throws ArithmeticException {
    long sum = i;
    if(others!=null)
        for(int other : others) {
            if(Long.MAX_VALUE-other<sum) {
                throw new ArithmeticException("Sum would be too large for this algorithm to deal with");
            }         
            if(Long.MIN_VALUE+other>sum) {
                throw new ArithmeticException("Sum would be too small for this algorithm to deal with");
            }         
            sum+=other;
        }
    }

    if(Integer.MAX_VALUE<sum) {
        throw new ArithmeticException("Sum would be too large to fit in int");
    }         
    if(Integer.MIN_VALUE>sum) {
        throw new ArithmeticException("Sum would be too small to fit in int");
    }       

    System.out.println("sum: " + sum);
    return (int)sum;
} 
```

这仍然有局限性，同样`long`如此，但由于`long`是整数大小的两倍，它引起问题的可能性要小得多。然而，由于涉及额外的工作，这有点慢，而且由于检查，可读性也降低了很多。

## 我全都要

……我现在就想要。范围仍然可能是一个问题，这是一个解决方案：

```
private static int aSafeButSlowerSum(int i, int... others) throws ArithmeticException {
    BigInteger sum = BigInteger.valueOf(i);
    BigInteger intMax = BigInteger.valueOf(Integer.MAX_VALUE); //should be a private static final class variable
    BigInteger intMin = BigInteger.valueOf(Integer.MIN_VALUE); //should be a private static final class variable

    if(others!=null)
        for(int other : others) {
            sum=sum.add(BigInteger.valueOf(i));
        }
    }

    if(intMax.compareTo(sum)<0) {
        throw new ArithmeticException("Sum would be too large to fit in int");
    }         
    if(intMin.compareTo(sum)>0) {
        throw new ArithmeticException("Sum would be too small to fit in int");
    }       

    System.out.println("sum: " + sum.toString());
    return sum.intValue;
} 
```

由于所有 BigInteger 的东西，这甚至更慢，但显示上述功能没有问题。（因此与其他选项一样，“现在”会少一些，但要为额外的东西付出代价..）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-17T08:39:23.497

```
public static void main(String[] arg) {
    int result2 = sumVarArgs(1, 2);
    System.out.println(result2);
    int result3 = sumVarArgs(1, 2, 3);
    System.out.println(result3);
    int result4 = sumVarArgs(1, 2, 3, 4);
    System.out.println(result4);
    int result5 = sumVarArgs(1, 2, 3, 4, 5);
    System.out.println(result5);

}

    /**
     * Aoccepts an all int variables and conciders them as an array and adds
     * them
     *
     * @param argsAry multiple number of input parameters having data type
     * <i>int</i>
     * @return sum of all passed int variables in int format
     */
public static int sumVarArgs(int... argsAry) {
     int c = 0;
     for (int i = 0; i < argsAry.length; i++) {
         c += argsAry[i];
     }
     return c;
} 
```

# .net - 如何让应用程序在 win xp 和 win 7-x86 中运行？

> ID：14375028
> 
> 赞同：0
> 
> 时间：2013-01-17T08:38:33.873
> 
> 标签：.net, winforms, visual-studio-2010, c#-4.0

我有一个可以在任何一个操作系统（win7（x86）或win xp）中运行的应用程序。

我的项目是在 Visual Studio 2010 中设计的，我使用的是 .Net 4.0。

早些时候，项目在属性中的“工作目录”是为 win 7 指定的，但是当我构建我的项目时，它说无法找到工作目录（`C:\Program Files(x86)\app`）

我现在将工作目录更改为`C:\Program Files\app`. 我的应用程序充当 MS excel 2003 的插件。现在我可以运行它了。

那么如何让我的应用程序在 win xp 和 win 7 中运行呢？

我正在使用 WinForms .net 4.0 c#。

```
 private void MyMenuItem_Click(object sender, EventArgs e)
    {
        MyMenuItem.Enabled = false;   
        string installPath;
        string helpFileName;
        string appName;

installPath =   Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);
        appName = "\\MyApp\\";   

        if (System.IO.File.Exists(installPath + appName+ helpFileName))
        {

System.Windows.Forms.Help.ShowHelp(new System.Windows.Forms.Control()                              installPath + appName + helpFileName, 
                   System.Windows.Forms.HelpNavigator.TableOfContents);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:46:41.517

看看 Environment.SpecialFolder 枚举

在 System.IO 中有一个名为 Path 的静态类，上面有一些非常好的东西

有点挣扎，因为我看不到您从哪里获得 helpFileName ...

```
private void MyMenuItem_Click(object sender, EventArgs e)
{
   MyMenuItem.Enabled = false;   
   String helpFileName = "IDoNotKnow.ext";
   string fileName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles),Path.Combine("MyApp",helpfileName));
   if (System.IO.File.Exists(fileName))
   {
      System.Windows.Forms.Help.ShowHelp(new System.Windows.Forms.Control(),fileName,System.Windows.Forms.HelpNavigator.TableOfContents);
   }
} 
```

Path.Combine 为您做的一件事是您不必担心反斜杠。如果参数中有一个尾随，它会使用它，如果没有，它会弹出它。有时会隐藏很多混乱。

# python - 如何使用 python 信号在独立进程之间发送消息？

> ID：14375034
> 
> 赞同：2
> 
> 时间：2013-01-17T08:38:53.217
> 
> 标签：python, ipc

我有两种类型的过程。

我希望 process`B`等待来自 process 的消息`A`。一旦`A`发送消息，进程`B`应该处理消息并再次等待。

此外，我将有多个 process`A`和 process实例`B`。因此，所有`B`进程都应该将消息发送给所有`A`进程。

我在看类似的东西`signals`，但附有一根绳子。

做这个的最好方式是什么？

我知道我可以创建 a`pipe`并继续阅读`pipe`in a `while`，但这似乎无能为力。另外，它不会从`pipe`一次阅读中删除吗？

注意：所有进程都不是彼此的子进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:10:21.860

***这就是我最后做的...***

将生产者进程制作成a`module`并将其导入消费者。因此，两个进程可以共享变量。

生产者线程将继续生产，消费者线程将继续消费。我`condition`用来同步数据，`threading.Condition()`.

每个生产者线程：

*   获得`condition`
*   将数据写入全局变量
*   称呼`notifyAll()`
*   释放`condition`

每个消费者线程：

*   获得`condition`
*   等待`condition`
*   读取和处理全局变量中的数据
*   等待`condition`...

这只是一个高级视图。在我的例子中，我有不同类型的生产者线程，每个线程都产生不同的数据，并针对特定的消费者群体。所以，我有一个`list of condition`.

[条件参考](http://docs.python.org/2/library/threading.html#condition-objects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:03:11.020

我建议将 python 绑定到 ZeroMQ：[http](http://www.zeromq.org/) ://www.zeromq.org/ 。pyzmq，也许：[https ://github.com/zeromq/pyzmq](https://github.com/zeromq/pyzmq)

# javascript - 使用 azax 和 php 获取数据

> ID：14375041
> 
> 赞同：-7
> 
> 时间：2013-01-17T08:39:36.400
> 
> 标签：javascript, php, ajax

当我从组合框中选择一个名称时，我正在这样做，然后应该使用 ajax 从 mysql 表中显示与所选名称相关的数据。但它无法做到。

```
<html>
<head>
<script>
function showUser (str)
{
    if(str=="")
    {
        document.getElementById("txtHint").innerHTML=="";
        return;
    }
    if(window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmltttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;

        }
    }
    xmlhttp.open("GET","getuser.php?q="+str,true);
    xmlhttp.send();
}
</script>
</head>
<body>
<form>
<select name="users" onchange="""showUser(thiis.value)">
<option value="">Select a person</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br>
<div id="txtHint">Person List is Here</div>
</body>
</html> 
```

它显示一个通知

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:52:55.227

那是因为您没有读取 CSV 文件，您显示的数据的字节模式表明包含 BIFF 数据的 OLE 包装器......即。它可能是一个真正的 Excel .xls 文件。尝试在 MS Excel（必要时重命名为 .xls）或 Gnumeric 或 Open/Libre Office Calc 中打开文件。

要在 PHP 中处理文件，您需要一个能够读取 Excel xls 文件的 PHP 库：除了[PHPExcel 之外，您还可以](http://phpexcel.codeplex.com)[在此处](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)找到其他库的列表。

# c# - 通过 Internet 连接到其他用户的 Outlook

> ID：14375042
> 
> 赞同：1
> 
> 时间：2013-01-17T08:39:41.110
> 
> 标签：c#, winforms, outlook

我正在开发一个使用 c# 显示 Outlook 发送和收件箱统计信息的程序。

为了访问 Outlook，我将 Microsoft.Office.Interop.Outlook 引用放在了我的 c# 应用程序中。

我的问题是如何与其他用户联系。我能够与我的桌面应用程序用户连接。我使用的代码粘贴在下面：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Microsoft.Office.Interop.Outlook.Application app = null;
        Microsoft.Office.Interop.Outlook._NameSpace ns = null;
        Microsoft.Office.Interop.Outlook.MailItem item = null;
        Microsoft.Office.Interop.Outlook.MAPIFolder sentFolder = null;
        Microsoft.Office.Interop.Outlook.MAPIFolder inbox = null;
        MAPIFolder inboxChild = null;
        Microsoft.Office.Interop.Outlook.MAPIFolder inboxChildChild = null;

        app = new Microsoft.Office.Interop.Outlook.Application();
        ns = app.GetNamespace("MAPI");
        ns.Logon("xxxxx","xxxxx", false, false); 
    } 
```

İn ns.Logon("xxxxx","xxxxx", false, false); 我与另一个用户连接，但应用程序始终与桌面用户连接。

我如何与其他用户联系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:50:19.570

您是指在另一台机器上运行的 Outlook.exe 实例吗？还是其他域用户拥有的 Exchange 邮箱？在后一种情况下，您可以在 Outlook 对象模型中使用 Namespace.GetSharedDefaultFolder。如果可以选择使用 Redemption，您还可以[使用 RDOSession](http://www.dimastr.com/redemption/rdosession.htm) .GetSharedMailbox 或 GetSharedDefaultFolder。[RDOSession](http://www.dimastr.com/redemption/rdosession.htm) .LogonExchangeMailbox 是另一种选择。

# sockets - 我想阅读 FTP 命令

> ID：14375047
> 
> 赞同：0
> 
> 时间：2013-01-17T08:39:52.590
> 
> 标签：sockets, ftp

我已经编写了从客户那里读取简单文本的程序。该程序在 telnet 发送消息时运行良好，但在 ftp 发送消息时就不行了。此外，程序误解（？）套接字连接良好。（见图。）事实上，ftp 客户端试图连接我的服务器，随着时间的推移，ftp 客户端 fali 连接。我想使用我的服务器程序阅读 ftp 消息。我该怎么办？？

服务器程序 -

```
#include <pthread.h>
#include <sys/types.h>
#include <sys/socket.h>

#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>

#include <stdlib.h>
#include <unistd.h>
#include <string.h>

#define MAXLINE 1024
#define PORTNUM 3600

void * thread_func(void *data)
{
    int sockfd = *((int *)data);
    int readn;
    socklen_t addrlen;
    char buf[MAXLINE];
    struct sockaddr_in client_addr;
    memset(buf, 0x00, MAXLINE);
    addrlen = sizeof(client_addr);
    getpeername(sockfd, (struct sockaddr *)&client_addr, &addrlen);

    while((readn = read(sockfd, buf, MAXLINE)) > 0)
    {
        printf("Read Data %s(%d) : %s", inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port), buf);
        memset(buf, 0x00, MAXLINE);
    }
    close(sockfd);
    printf("worker thread end\n");
    return 0;
}

int main(int argc, char** argv)
{
    int listen_fd, client_fd;
    socklen_t addrlen;
    int readn;
    char buf[MAXLINE];
    pthread_t thread_id;

    struct sockaddr_in server_addr, client_addr;

    if( (listen_fd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        return 1;

    memset((void*)&server_addr, 0x00, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    server_addr.sin_port = htons(PORTNUM);

    if(bind(listen_fd, (struct sockaddr *)&server_addr, sizeof(server_addr)) == -1)
    {
        perror("bind error");
        return 1;
    }
    if(listen(listen_fd, 5) == -1)
    {
        perror("listen error");
        return 1;
    }

    while(1)
    {
        addrlen = sizeof(client_addr);
        client_fd = accept(listen_fd, (struct sockaddr *)&client_addr, &addrlen);
        if(client_fd == -1)
        {
            printf("accept error\n");
            // return -1;
        }
        else
        {
            printf("someone comes in.\n");
            fflush(stdout);
            pthread_create(&thread_id, NULL, thread_func, (void *)&client_fd);
            pthread_detach(thread_id);
        }
    }
    return 0;
} 
```

这是数字。 [https://docs.google.com/document/d/1sKmk0NfTA9dL2svOPsAtaXt_bSpcT4s62yjHuKZCpIk/edit](https://docs.google.com/document/d/1sKmk0NfTA9dL2svOPsAtaXt_bSpcT4s62yjHuKZCpIk/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:06:16.673

FTP 协议有点复杂……您不能只等待客户端数据，而是必须处理协议的多种情况。

为了赶上第一阶段，您必须向客户端发送一个`220 command`（FTP 横幅，告诉我们的 FTP 服务器是什么，并声明我们已准备好取回用户名）。

因此，尝试通过连接的套接字发送字符串`"220-#\r\nMy FTP SERVER\r\n"`并查看发生了什么。

添加，就在`read()`调用这些行之前。

```
sprintf(buf, "220\r\nMy FTP SERVER\r\n\r\n");
write(connected_fd, (void *) buf, strlen(buf)); 
```

# ruby - 生成具有给定最大长度的所有可能的字符排列

> ID：14375055
> 
> 赞同：0
> 
> 时间：2013-01-17T08:40:24.207
> 
> 标签：ruby

我想要`["a", "b", "c"].all_possibilities(4)`产生类似的东西：`abc acb bac bca cab cba abca abcb abcc acba acbb acbc ...`直到最后可能的~~组合~~排列，最多`4`使用`abc`.

我尝试了排列，但我认为情况并非如此：`%w[a b c].permutation.map &:join`只是排列，所以长度不大于三。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:51:32.757

关于什么 ？

```
class Array
  def all_possibilities(range)
    return permutation(range).to_a if range < size

    (size..range).flat_map do |i|
      permutation(range - i).flat_map do |e|
        (self + e).permutation.to_a
      end
    end
  end
end 
```

这将返回一个字符串数组的数组。

```
%w(a c).all_possibilities(3)
# => [["a", "c", "a"], ["a", "a", "c"], ["c", "a", "a"],
#     ["c", "a", "a"], ["a", "a", "c"], ["a", "c", "a"],
#     ["a", "c", "c"], ["a", "c", "c"], ["c", "a", "c"],
#     ["c", "c", "a"], ["c", "a", "c"], ["c", "c", "a"],
#     ["a", "c"], ["c", "a"]] 
```

要打印它，你可以这样做`result.map(&:join).join(', ')`。

*ps：您可以避免使用重复项`uniq`。发生这种情况是因为您可以在像`%w(a c a)`.*

# c# - 如何“阅读”一条 SWIFT 报文？

> ID：14375056
> 
> 赞同：7
> 
> 时间：2013-01-17T08:40:26.827
> 
> 标签：c#, banking, swift-mt

“SWIFT”意[为环球银行金融电信协会](http://en.wikipedia.org/wiki/ISO_9362)

我需要读取一些文件并使用 C#.NET 将数据插入到 SQL Server 数据库表中。这些文件是从银行软件 (ABN Amro) 下载的，它们包含帐户上的（借记和贷记）动向。

它包含很多`:61:`和`:86:`“标签”，看起来几乎是人类可读的，但事实并非如此，尤其是当他们谈论数量时，如果你没有正确的规格，就不可能过滤掉它们。

我正在疯狂搜索，但找不到足够的信息，我的意思是解释如何解释这些消息/文件的文档？甚至在 swiftcommunity.net 上也没有……或者我没有找对地方。

那存在吗，在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T09:06:57.103

Swift mt940 文件格式有一个标题行、一个页脚行、一些带有信息的强制性行，然后是一堆表示交易的行。这些行以一个`:XX:`代码开头，以指示它是什么类型的行。

如果你用谷歌搜索，你可以很容易地从许多银行找到规范。例如：

*   [http://martin.hinner.info/bankconvert/swift_mt940_942.pdf](http://martin.hinner.info/bankconvert/swift_mt940_942.pdf)
*   [http://www.bankmillennium.pl/static-content/EN/File_format_description_of_MT940_v20071205_1664350_588699.pdf](http://www.bankmillennium.pl/static-content/EN/File_format_description_of_MT940_v20071205_1664350_588699.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T07:06:10.377

也许我为时已晚，但我实际上为此构建了一个开源库（[http://raptorious.com/sharpmt940lib/](http://raptorious.com/sharpmt940lib/)）。也许它可以帮助你？

# iphone - iPhone 应用程序在应用商店版本上存在错误，但没有临时分发

> ID：14375059
> 
> 赞同：2
> 
> 时间：2013-01-17T08:40:34.867
> 
> 标签：iphone, ios, app-store, adhoc

我的 iOS 应用程序的 AppStore 版本有一些我无法在 Ad Hoc 和调试模式下重现的错误，即使我对两者使用相同的存档也是如此。

根据 [Bug Appears in Distribution (App Store) Version of iPhone App](https://stackoverflow.com/questions/5054949/bug-appears-in-distribution-app-store-version-of-iphone-app)接受的答案，我将优化级别更改为**最快，最小**但仍然无法重现该错误。

任何人都知道在这种情况下 AdHoc 和 AppStore 分发之间的真正区别是什么？

**更新**：我设法用调试模式在模拟器上重现了这个问题，这个错误与这行代码有关：

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"article" ofType:@"html"]]]]; 
```

如果将该行替换为以下内容，则该错误已在模拟器上修复：

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"article" ofType:@"html"]]]]; 
```

但是，修复模拟器上的错误并不能确保在真实设备上没有问题。问题仍然存在，如何首先使用 Ad-hoc 分发和调试模式重现错误？

# .net - 考虑开发人员时间的单元测试 GetHashCode

> ID：14375061
> 
> 赞同：4
> 
> 时间：2013-01-17T08:40:38.707
> 
> 标签：.net, unit-testing, iequalitycomparer

在我目前的项目中，我有几个 IEqualitycomparers。
它们采用对象的几个属性并比较它们。
属性可以是相等的，不同的，这既适用于值，也适用于空值。

我想对这些进行单元测试，但所有不同的可能性都是疯狂的。我怎样才能有效地测试这些？

**更新**
目前它们通过属性而不是构造函数获取它们的值，因为它们填充了 entlib 的数据块。

示例（在 vb.net 中，但我也讲 C#）：

```
Public Class GuarantyEqualityComparer
    Implements IEqualityComparer(Of Guaranty)

    Public Overloads Function Equals(x As Guaranty, y As Guaranty) As Boolean Implements IEqualityComparer(Of Guaranty).Equals
        Return x.ClientCode = y.ClientCode AndAlso x.LocationCode = y.LocationCode AndAlso x.CategoryCode = y.CategoryCode AndAlso x.GuarantyCode = y.GuarantyCode
    End Function

    Public Overloads Function GetHashCode(obj As Guaranty) As Integer Implements IEqualityComparer(Of Guaranty).GetHashCode
        Const format As String = "{0}{1}{2}{3}"
        Return String.Format(CultureInfo.InvariantCulture, format, obj.ClientCode, obj.LocationCode, obj.CategoryCode, obj.GuarantyCode).GetHashCode()
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:39:25.870

好的，考虑到有构造函数的可能性，我会尝试编写一个实用程序类，它允许您为每个构造函数参数指定示例值：

```
var comparer = new GuarantyEqualityComparer();
var tester = EqualityTester<Guaranty>.CreateBuilder(comparer)
                 .AddValue("ClientCode", "Sample1", "Sample2", null)
                 .AddValue("LocationCode", 1, 3, 0)
                 .Builder();
tester.Test(); 
```

测试人员会检查每一个可能的排列，并且*至少*检查：

*   `x.Equals(y)`何时`x`和`y`使用相同的值构建
*   `x.GetHashCode() == y.GetHashCode()`何时`x`和`y`使用相同的值构建
*   `!x.Equals(y)`何时`x`以及`y`使用不同的值构建

它还*可以*检查`x.GetHashCode() != y.GetHashCode()`何时使用不同的值构建`x`和构建。`y`这*不是*的合同所要求的`GetHashCode`，即使是一个好的哈希码也总是会出现失败的情况（对于任何具有超过 2 ^(32 个)可能值的类型），但它仍然是一个合理的完整性检查 - 你通常会有当代码正确时选择失败的样本值是非常不幸的。

* * *

在哈希码生成方面，我总是使用以下内容：

```
int hash = 19;
hash = hash * 31 + HashOfField1;
hash = hash * 31 + HashOfField2;
...
return hash; 
```

对于 Noda Time，我们在一个[帮助类](https://code.google.com/p/noda-time/source/browse/src/NodaTime/Utility/HashCodeHelper.cs)中得到了一些这样的方法，它允许这样的方法：

```
public override int GetHashCode()
{
    int hash = HashCodeHelper.Initialize();
    hash = HashCodeHelper.Hash(hash, LocalInstant);
    hash = HashCodeHelper.Hash(hash, Offset);
    hash = HashCodeHelper.Hash(hash, Zone);
    return hash;
} 
```

助手为您处理无效性。所有这些都比每次需要计算哈希码时通过格式化创建字符串要好得多*。*

# jquery - jQuery UI 对话框关闭时如何重新加载父页面？

> ID：14375063
> 
> 赞同：2
> 
> 时间：2013-01-17T08:40:43.140
> 
> 标签：jquery, jquery-ui-dialog, page-refresh

我在 stackoverflow 中搜索了这个问题并看到了类似的问题（但不完全是我正在寻找的问题），但该解决方案似乎不起作用。我只是 jQuery 的新手，我需要你的帮助才能完成这项工作。（交叉手指）

所以我有一个带有按钮的网页（例如 parentPage.html）。单击按钮时（执行 openItemPopup 函数），它会使用 jQuery UI 打开一个模式对话框。模态对话框“#contentWindow”的内容是不同的页面（例如modalDialog.html）。

* * *

```
function resetContent() {
$('#contentFrame').attr('src', '/images/ajax-loader.gif');
}

function closeContent() {
$('.ui-dialog-titlebar-close').click();
}

function openItemPopup(){

$('#contentWindow').dialog({width:980, modal: true,
        close: function(ev, ui) { resetContent(); }
});
} 
```

* * *

在modalDialog.html中，当一个锚点被点击时，它会执行一些逻辑，它需要动态关闭模态对话框。有人告诉我使用它，这已经奏效了：

* * *

```
 // refresh parent page before closing
              // doesn't work
              location.reload(true);

              // close the modal dialog
              window.top.closeContent();
              return false;
              window.location='javascript:void();'; 
```

* * *

**我的问题是：我需要在关闭模式对话框之前刷新 parentPage.html。您在上面看到我尝试使用 location.reload(true);，但它重新加载模式对话框而不是 parentPage.html。我无法发布图片，但它显示 * *"Invalid Web application session"****。**

我也试过 window.top.location.reload(); 它似乎工作。它重新加载 parentPage.html 并关闭模式对话框。

```
 // refresh parent page before closing
              // seems working but has error
              window.top.location.reload();

              // close the modal dialog
              window.top.closeContent();
              return false;
              window.location='javascript:void();'; 
```

但是，它显示**“无效的 Web 应用程序会话”。**-- 就像使用 location.reload(true); 时一样。我不知道为什么会发生这种情况以及如何解决它。我什至不确定 window.top.location.reload 是否是正确的方法。

***仅供参考：我正在尝试刷新 parentPage.html 以便能够从模式对话框中获取数据。之前，modalDialog.html 用作简单的 html 页面。列表和字段等数据从 modalDialog.html 正确返回到 parentPage.html。他们想将其转换为模式对话框以防止大量页面刷新。有人告诉我可以使用 AJAX，但工作量很大。此外，我不是它的主人。如果您有更好的建议，请随时告诉我！***

我希望你能帮助我解决这个问题。提前致谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-13T12:26:28.920

在您的对话框中使用`close: function (ev, ui) { window.location.reload() }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:03:59.470

试试这个：在你的 parentPage.html 添加一个新函数：

```
function reloadContent() {
    location.reload();
} 
```

在您的 modalDialog.html 通过以下方式调用该函数：

```
parent.reloadContent(); 
```

# postgresql - apache solr 响应不返回结果

> ID：14375069
> 
> 赞同：1
> 
> 时间：2013-01-17T08:41:12.800
> 
> 标签：postgresql, solr

我用我的 postgresql 数据库连接了 apache solr 我尝试使用这个 url 检索结果集

```
 http://localhost:8055/solr/dataimport?command=full-import 
```

这是 db-data-config.xml

```
<dataConfig>
    <dataSource driver="org.postgresql.Driver" url="jdbc:postgresql://myhost:myport/addressbook" user="username"  password="password"/>
      <document>
        <entity name="addressbook" 
            query="select firstname from addressbook where firstname like '%A%'">
             <field name="id" column="id" />
        </entity>
      </document>
</dataConfig> 
```

我得到这样的回应。但我在这里看不到结果行。

```
 <?xml version="1.0" encoding="UTF-8" ?> 
- <response>
- <lst name="responseHeader">
  <int name="status">0</int> 
  <int name="QTime">0</int> 
  </lst>
- <lst name="initArgs">
- <lst name="defaults">
  <str name="config">db-data-config.xml</str> 
  </lst>
  </lst>
  <str name="command">full-import</str> 
  <str name="status">idle</str> 
  <str name="importResponse" /> 
- <lst name="statusMessages">
  <str name="Total Requests made to DataSource">1</str> 
  <str name="Total Rows Fetched">11</str> 
  <str name="Total Documents Skipped">0</str> 
  <str name="Full Dump Started">2013-01-17 00:29:26</str> 
  <str name="">Indexing completed. Added/Updated: 0 documents. Deleted 0 documents.</str> 
  <str name="Committed">2013-01-17 00:29:27</str> 
  <str name="Total Documents Processed">0</str> 
  <str name="Time taken">0:0:1.343</str> 
  </lst>
  <str name="WARNING">This response format is experimental. It is likely to change in the future.</str> 
```

我应该在 db-data-config.xml 中进行哪些更改才能在此处获取结果行。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:13:35.403

我认为您的查询应该是：

*   select * **[STAR]** from addressbook where firstname like '%A%'

或者至少

*   从地址簿中选择**id ，其中名字如 '%A%'**

目前，您似乎在选择**firstname**但随后尝试映射**id**。那里没有重叠，所以你得到空条目。

# r - 如何在 R 中重现 predict.svm？

> ID：14375072
> 
> 赞同：3
> 
> 时间：2013-01-17T08:41:33.813
> 
> 标签：r, svm, predict

我想在 R 中训练一个 SVM 分类器，并能够通过导出相关参数在其他软件中使用它。为此，我首先希望能够重现`predict.svm()`R 中的行为（使用`e1071`包）。

我根据虹膜数据训练了模型。

```
data(iris)

# simplify the data by removing the third label
ir <- iris[1:100,]
ir$Species <- as.factor(as.integer(ir$Species))

# train the model
m <- svm(Species ~ ., data=ir, cost=8)

# the model internally uses a scaled version of the data, example:
m$x.scale
# # # # # 
# $`scaled:center`
# Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#        5.471        3.099        2.861        0.786 
#
# $`scaled:scale`
# Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#    0.6416983    0.4787389    1.4495485    0.5651531 
# # # # #

# because the model uses scaled data, make a scaled data frame
irs<-ir;
sc<-data.frame(m$x.scale);
for(col in row.names(sc)){
      irs[[col]]<-(ir[[col]]-sc[[col,1]])/sc[[col,2]]
}

# a radial kernel function
k<-function(x,x1,gamma){
    return(exp(-gamma*sum((x-x1)^2)))
} 
```

根据 Hastie, Tibshirani, Friedman (2001) 等式 12.24，x 的预测函数可以写为系数的支持向量乘以 SV 和 x 的核函数之和，对应于矩阵乘积，加上拦截。

$\hat{f}(x)= \sum^N_{i=1} \hat{\alpha}_i y_i K(x,x_i)+\hat{\beta}_0 $，其中已经包含$y_i$在`m$coefs`.

```
# m$coefs contains the coefficients of the support vectors, m$SV 
# the support vectors, and m$rho the *negative* intercept
f<-function(x,m){
    return(t(m$coefs) %*% as.matrix(apply(m$SV,1,k,x,m$gamma)) - m$rho)
}

# a prediction function based on the sign of the prediction function
my.predict<-function(m,x){
    apply(x,1,function(y) sign(f(y,m)))
}

# applying my prediction function to the scaled data frame should
# yield the same result as applying predict.svm() to the original data
# example, thus the table should show one-to-one correspondence:
table(my.predict(m,irs[,1:4]),predict(m,ir[,1:4]))

# the unexpected result:    
# # # # #
#      1  2
#  -1  4 24
#  1  46 26
# # # # # 
```

谁能解释这是哪里出错了？

**编辑：**我的代码中有一个小错误，现在它给出了以下预期结果：

```
 1  2
  -1  0 50
  1  50  0 
```

我希望对遇到同样问题的人有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:43:49.707

我的一项功能出现了小错误。编辑后的版本有效。

# java - Java 中的 addBatch() 执行

> ID：14375075
> 
> 赞同：0
> 
> 时间：2013-01-17T08:41:41.403
> 
> 标签：java, jdbc

下面代码的问题是，假设如果查询 [] 数组中的特定查询包含错误，则语句查询将执行，并且将引发有错误的查询的异常，我希望两个查询都执行查询没有错误，否则不应该执行任何查询，我应该如何处理下面的代码以获得所需的结果？请帮忙。

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        int rw = jTable1.getRowCount();
        int col = jTable1.getColumnCount();
        System.out.println("RC" + rw);
        System.out.println("Col" + col);
        String queries[] = new String[rw];
        Object o[][] = new Object[rw][col];
        String poid = jComboBox10.getSelectedItem().toString();
        java.sql.Date xdate = null;
        Connection con=null;
        Statement st=null;
       String cc = ims.MainWindow.cc;
        try {
            for (int i = 0; i < rw; i++) {
                for (int j = 0; j < col; j++) {
                    o[i][j] = jTable1.getValueAt(i, j);
                    System.out.println("imj" + i + "," + j + "=" + o[i][j]);
                }
                if (String.valueOf(o[i][5]) == "") {
                    xdate=null;
                }
                else {
                                        xdate = new java.sql.Date(df.parse(String.valueOf(o[i][5])).getTime());

                }
                queries[i] = "insert into po_items values('" + poid + "','" + cc + "','" + o[i][1] + "'," + o[i][2] + "," + o[i][4] + ",'" + xdate + "','" + o[i][7] + "'," + o[i][8] + ")";
            }

            for (int k = 0; k < rw; k++) {
                System.out.println(queries[k]);
            }
            String query = "insert into tablex values('xx','yy')";
            con=CPool.getConnection();
            st=con.createStatement();
                con.setAutoCommit(false);
                for(int l=0;l<rw;l++)
                {
                    st.addBatch(queries[l]);
                }
                st.addBatch(query);
                st.executeBatch();
                con.commit();
            System.out.println(query);
        } catch (Exception x) {
            System.out.println(x.getMessage());
        }
        finally {
              CPool.closeConnection(con);
              CPool.closeStatement(st);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:20:08.377

如果发生异常，您既不执行`rollback`也不`commit`在关闭连接之前执行，这会导致未指定的行为。`rollback`每当`try`块未正常完成时，您都必须这样做。

在单独的说明中，使用 JDBC 批处理 API 仅当您将它与`PreparedStatement`仅在同一语句的参数中不同的批处理条目结合使用时才会为您带来性能。正如其他地方所建议`PreparedStatement`的那样，无论您是否想免受 SQL 注入攻击，这是一条可行的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:55:01.947

除非您执行/触发查询，否则您不会知道查询是否会出错。

但是，您可以做的是将查询分组到数据库事务中，如果一切正常则执行提交，如果任何查询失败则回滚。您可以使用 try catch 块来实现此目的（对异常进行回滚；否则提交）。

# ms-word - 将按钮添加到 Citrix 的 Word 功能区

> ID：14375076
> 
> 赞同：0
> 
> 时间：2013-01-17T08:41:50.903
> 
> 标签：ms-word, ribbon, citrix

如果用户通过 Citrix 启动 word，并且无论您进行什么更改，word 将始终与您重新启动会话后的外观相同，可以将 word 配置为保持 - 说一个宏和一个触发该宏的功能区按钮而不是默认为其原始布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:11:31.393

您可以执行以下操作来保存/恢复本地配置文件中的 Word 设置：

[http://www.peppercrew.nl/index.php/2011/08/unable-to-use-the-office-2010-ribbon-toolbar-for-excel-and-word-with-roaming-profiles-on-终端服务器-windows-2003/](http://www.peppercrew.nl/index.php/2011/08/unable-to-use-the-office-2010-ribbon-toolbar-for-excel-and-word-with-roaming-profiles-on-terminal-server-windows-2003/)

# c++ - 在多个线程上调用函数的问题

> ID：14375077
> 
> 赞同：2
> 
> 时间：2013-01-17T08:41:54.913
> 
> 标签：c++, multithreading

自从我的上一个问题关闭以来重新发布此内容..这次我试图更好地解释它...如果您需要进一步澄清，请告诉我：

我有一个带有函数 doSomething(int count) 的类 A 在 A 类中，我想打开 100 个线程，每个线程调用函数 doSomething() 并在每个线程中传入 1-100 的计数。

这意味着......当第一个线程调用这个函数时，它应该调用 doSomething(1)，第二个线程应该调用 doSomething(2) 等等......

这就是我的代码的样子：

```
struct input {
  A* in;
  int count;
};

myFunc(void* data)
{
  input* tP = (input*) data;
  A* obj = tP->in;
  int ct = tP->count;
  obj->doSomething(ct);
}

class A {
  doSomething(int count);
  Thread2doSomething();
}

doSomething(int count)
{
  cout<<"Print value is"<<count;
}

Thread2doSomething()
{
   for (i = 1 to 100)
   {
      input myIN;
      myIN.in = this;
      myIN.count = i;
      beginthreadex(myFunc, &myIN);
   }
 } 
```

我希望上面的代码会在这里产生 100 个线程..当它调用 doSomething(); 时，每个线程都会有一个新的计数值 1,2,3...100;

在新线程上每次调用 doSomething 都应该有一个不同的 count 值传递给它 - 1,2,3,...到 100。

但这不会发生。传递给它的计数值是非常随机的......通常它多次获得相同的值......并且根本没有得到一些值。有时传递给 doSomething 的计数值在所有线程中都是相同的......

调用看起来更像这样：doSOthing(4)、doSomething(4)、doSomething(7)、doSomething(10)、doSomething(10) 等等。

希望我已经澄清了事情......请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:51:40.493

您的代码有**两个**问题。

第**一个**问题出在`Thread2doSomething()`函数中：您将**临时**地址传递给`beginthreadex()`. 当函数退出时临时超出范围，并且线程正在访问一个不再存在的对象。

您有两种解决此问题的可能性：要么在退出之前等待所有线程完成`Thread2DoSomething()`，以便在线程完成工作之前不会破坏堆栈分配的对象，要么在堆（但如果您使用原始指针，请不要忘记释放它们）。

第二**个**问题是您将*相同*的输入传递给所有线程并**在它们访问它时**（在`for`循环内）对其进行修改，这引入了**数据竞争**。因此，您的程序具有*Undefined Behavior*。

要解决此问题，您必须为每个线程创建一个新实例`input`，这样您就不会在线程尝试访问它时覆盖同一个对象。

最后，请记住，不能保证线程**的执行顺序。**即使您按特定顺序*启动*它们，您仍然可能会看到打印出的数字排列而不是有序序列 1..100。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:50:33.873

您正在为所有线程重新使用**一个实例。**`input`当然，他们会从中获取随机数据。由于您无法更改的签名`myFunc()`（我认为它是由线程创建功能强制要求的），因此您必须使用动态分配：

```
Thread2doSomething()
{
   input *myIN;
   for (i = 1 to 100) {
     myIN = new input;
     myIN->in = this;
     myIN->count = i;
     beginthreadex(myFunc, myIN);
   }
}

myFunc(void* data)
{
  std::unique_ptr<input> tP(reinterpret_cast<input*>(data));
  A* obj = tP->in;
  int ct = tP->count;
  obj->doSomething(ct);
} 
```

使用`unique_ptr`in将确保对象在终止`myFunc()`时被释放。`myFunc()`

# javascript - 使用 HTML 和 .NET 创建使用 RSS 提要的小部件

> ID：14375082
> 
> 赞同：1
> 
> 时间：2013-01-17T08:42:14.030
> 
> 标签：javascript, .net, html, ajax, widget

我需要创建一个新闻小部件，它从实时 RSS 提要中获取数据并将它们显示在启用 ajax 的 .NET 网站上。有什么建议么？

我正在考虑在 .NET 代码中使用 IFrame，并以某种方式在其中调用 RSS 提要。但是，从我查阅的资料中，我了解到您可能需要在其中嵌入 JavaScript。会不会太复杂了？肯定有比从头开始做这一切更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T11:06:41.650

我建议[http://feed.mikle.com/](http://feed.mikle.com/)

FeedWind 是一个 RSS 提要小部件。只需复制并粘贴代码片段即可嵌入到您的网页中。它是免费的，无需注册即可使用！

# java - 使用 sax 获取内部 xml

> ID：14375084
> 
> 赞同：3
> 
> 时间：2013-01-17T08:42:20.067
> 
> 标签：java, xml, xml-parsing, sax

我有一个这样的xml：

```
<Message xmlns="uri_of_message">
  <VendorId>1234</VendorId>
  <SequenceNumber>1</SequenceNumber>
  ...other important headers...
  <Data>
    <Functions xmlns="uri_of_functions_subxml">
      <Function1 attr="sth">
        <Info>Some_Info</Info>
      </Function1>
      <Function2>
        <Info>Some_Info</Info>
      </Function2>
      ...Functions n...
    </Functions>
  </Data>
</Message> 
```

我需要提取内部 xml

```
<Functions xmlns="uri_of_functions_subxml">
  <Function1 attr="sth">
    <Info>Some_Info</Info>
  </Function1>
  <Function2>
    <Info>Some_Info</Info>
  </Function2>
  ...Functions n...
</Functions> 
```

我首先尝试使用字符方法获取内部 xml：

```
 public void startElement(String uri, String localName, String tagName, Attributes attributes) throws SAXException {
if (tagName.equalsIgnoreCase("Data")){
  buffer = new StringBuffer();}
}
public void characters(char[] ch, int start, int length) throws SAXException {
  if (buffer != null) {
     buffer.append(new String(ch, start, length).trim());
  }
}
public void endElement(String uri, String localName, String tagName) throws SAXException {
if (tagName.equalsIgnoreCase("Data")){
innerXML = buffer.toString().trim();
} 
```

但是后来我意识到characters方法没有正确收集xml，它可能拒绝了“<”，“>”等特殊字符。

下面的链接包含相同的问题，但答案不适用于我，因为外部 xml 必须作为握手信号处理，内部 xml 必须以完全不同的方式处理。

[Java XML 解析：使用 SAX 获取内部 XML](https://stackoverflow.com/questions/5028613/java-xml-parsing-taking-inner-xml-using-sax)

我唯一需要的是正确收集内部 xml。但是，怎么做呢？提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:24:45.847

SAX 似乎不是该工作的最佳选择，无论如何尝试

```
 SAXParser p = SAXParserFactory.newInstance().newSAXParser();
    XMLReader filter = new XMLFilterImpl(p.getXMLReader()) {
        private boolean inFunctions;

        @Override
        public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {
            if (!inFunctions && qName.equals("Functions")) {
                inFunctions = true;
            }
            if (inFunctions) {
                super.startElement(uri, localName, qName, atts);
            } else {
                qName.equals("Functions");
            }
        }

        @Override
        public void endElement(String uri, String localName, String qName) throws SAXException {
            if (inFunctions) {
                super.endElement(uri, localName, qName);
                if (qName.equals("Functions")) {
                    inFunctions = false;
                }
            }
        }

        @Override
        public void characters(char[] ch, int start, int length) throws SAXException {
            if (inFunctions) {
                super.characters(ch, start, length);
            }
        }
    };
    Transformer t = TransformerFactory.newInstance().newTransformer();
    Source source = new SAXSource(filter, new InputSource(new FileInputStream("1.xml")));
    Result result = new StreamResult(System.out);
    t.transform(source, result);
} 
```

输出

```
<?xml version="1.0" encoding="UTF-8"?><Functions xmlns="uri_of_functions_subxml">
      <Function1 attr="sth">
        <Info>Some_Info</Info>
      </Function1>
      <Function2>
        <Info>Some_Info</Info>
      </Function2>
    </Functions> 
```

[官方教程](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)

# java - Spring MVC - 没有绑定对象的表单提交

> ID：14375085
> 
> 赞同：2
> 
> 时间：2013-01-17T08:42:20.793
> 
> 标签：java, spring, spring-mvc

我是 Spring MVC 的新手，并试图实现一些看起来非常简单的东西。但是我无法让它工作或找到任何相关的例子。

使用带有注释的 Spring MCV 3.1。我有一个表格，里面只有一个选择列表。提交此表单时，我希望能够将选择值的 id 提交给我的控制器。就是这样！

我不想将此值包装在 Binding 对象中，我只想将其发送到控制器，最好是这样： [http ://www.mydomain.com/admin/products?marketId=id](http://www.mydomain.com/admin/products?marketId=id)

我的控制器看起来像这样：

```
@RequestMapping(value = "/admin/products", method = RequestMethod.GET)
public ModelAndView getProducts(@RequestParam("marketId") String marketId) {

    ModelMap model = new ModelMap();

    // Logic to find products by marketId is not shown
    // ...

    model.addAttribute("products", products);

    return new ModelAndView("products", model);
} 
```

我还不能创建一个可以编译的jsp，但这是我最新的jsp片段：

```
<form:form method="GET" action="/admin/products.htms" methodParam="marketId" >
    <form:select path="marketId" items="${marketList}" onchange="this.form.submit();"/>
</form:form> 
```

如果有人可以帮助或指出一些相关的例子，我将非常感激！我已经查看了很多使用绑定对象来包装表单数据的示例，但是正如您所看到的，我正在寻找更简单的东西。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:56:01.587

如果您不需要对象绑定和错误报告等功能，您可以使用纯 HTML 表单来代替`<form:form>`：

```
<form method="GET" action="/admin/products.htms">
    <select name="marketId" onchange="this.form.submit();">
        <c:forEach var = "item" items="${marketList}">
            <option value = "${item}">${item}</option>
        </c:forEach>
    </select>
</form> 
```

# jsf - JSF 1.1：如何在验证消息中显示组件标签而不是 clientId？

> ID：14375091
> 
> 赞同：1
> 
> 时间：2013-01-17T08:42:46.983
> 
> 标签：jsf

我正在编写一个自定义组件来在弹出窗口中显示验证消息，它运行良好，但我仍然有一个问题：我想在验证消息中显示组件标签而不是 cliendIds。

我已经看过这个问题和类似的东西：

[在 JSF 中使用消息包时从验证消息中删除组件 ID](https://stackoverflow.com/questions/10961284/removing-the-component-id-from-validation-message-when-using-message-bundle-in-j/10961309#10961309)

但我使用的是 jsf 1.1，如果我尝试为属性`label`或`requiredMessage`. 因此，我尝试使用以下方法为组件分配标签`<outputLabel />`：

```
<h:outputLabel for="phone" value="Phone number" />
<h:inputText id="phone" required="true" value="#{backingBean.phoneNumber}" /> 
```

没有效果。

jsf 1.1 中是否有一种简单的方法可以使标签出现在验证消息中而不是客户端 ID 中？如果没有，给定一个组件，我如何检索其相关的标签组件以在 Java 代码中完成工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:10:32.960

我找到了一个不需要修改现有 JSF 代码的解决方案。

1.  让我的组件渲染器扩展 Tomahawk's `HtmlMessagesRenderer`，它能够使用组件标签而不是它的 id
2.  用于`HtmlMessagesRenderer#findInputId`通过消息检索组件的 Id
3.  用于`HtmlMessagesRenderer#findInputLabel`检索带有消息的组件的标签
4.  将消息中的组件 ID 替换为组件标签。

下面是我的组件 Render 方法的代码摘录`encodeBegin`，其中我制作了两个单独的循环，第一个用于组件消息，另一个用于全局消息。

请注意，`FacesContext#getClientIdsWithMessages`还返回`null`，它被认为是全局消息的 clientId。

请注意，因为组件本身设法检索和使用组件标签（如果存在）；这个解决方案只需要`<myCustomMessages />`在 JSF 页面代码中放置一个标签。

```
public void encodeBegin(FacesContext context, UIComponent component) throws IOException {
// ....

// replace id with label in messages for components
        Iterator<String> clientIdsWithMessages=context.getClientIdsWithMessages();
        while(clientIdsWithMessages.hasNext()){
            String clientIdWithMessages=clientIdsWithMessages.next();
            if(clientIdWithMessages!=null){
                Iterator<FacesMessage> componentMessages=context.getMessages(clientIdWithMessages);
                while(componentMessages.hasNext()){
                    String stringMessage=componentMessages.next().getDetail();
                    try{
                        String inputId =findInputId(context, clientIdWithMessages);
                        String inputLabel = findInputLabel(context, clientIdWithMessages);
                        if(inputId!=null && inputLabel!=null)
                            stringMessage=stringMessage.replace(inputId, inputLabel);
                    } catch(Exception e){
                        // do nothing in this catch, just let the message be rendered with the componentId instead of a label                       }
                    msgBuilder.append(stringMessage);
                    msgBuilder.append("<br />");
                }
            }
        }

        // process global messages
        Iterator<FacesMessage> globalMessages=context.getMessages(null);
        while(globalMessages.hasNext()){
            FacesMessage message=globalMessages.next();
            msgBuilder.append(message.getDetail());
            msgBuilder.append("<br />");
        }
// ... 
```

这是对[`HtmlMessagesRenderer#findInputLabel`](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.myfaces.tomahawk/tomahawk/1.1.6/org/apache/myfaces/renderkit/html/ext/HtmlMessageRenderer.java#HtmlMessageRenderer.findInputLabel%28javax.faces.context.FacesContext,java.lang.String%29)源代码的参考，以了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T19:33:34.907

我想到了一种解决方案。您可以添加新`PhaseListener`的，它将在 beforePhase 方法中查找`PhaseEvent`并`PhaseId = RENDER_RESPONSE`在其内部编写如下内容：

```
public class MyPhaseListener implements PhaseListener {

  private void findKeyValuePairInTree(UIComponent root, 
                                      Map<String, String> map) {
    if (root instanceof HtmlOutputLabel) {
      map.put(((HtmlOutputLabel) root).getFor(), 
                       ((HtmlOutputLabel) root).getValue());
    }
    if (root.getChilder() != null && !root.getChildren().isEmpty()) {
      for (UIComponent child : root.getChilder()) {
        findKeyValuePairInTree(child, map);
      }
    }

  private HashMap<String, String> idToLabelMap= new HashMap<String,String>();

  public void beforePhase(PhaseEvent event) {
    if (event.getPhaseId().equals(PhaseId.RENDER_RESPONSE) {

      findKeyValuePairInTree(FacesContext.getCurrentInstance().getViewRoot(),
                             idToLabelMap);
      // after above function finished execution in idToLabelMap will be all 
      // pairs of component ID used in standard FacesMessage as key
      // and HtmlOutputLabel value attr used as value

      Set<String> keySet = idToLabelMap.keySet();
      for(String key : keySet) {
        Iterator messages = FacesContext.getCurrentInstance().getMessages(key);
        while (iterator.hasNext) {
          FacesMessage msg = (FacesMessage) iterator.next();

          // now replace all occurences of clientId with label value from map

          msg.setSummary(msg.getSummary().replaceAll(key, idToLabelMap.get(key)));
          msg.setDetails(msg.getDetails().replaceAll(key, idToLabelMap.get(key)));
        }
      }
      FacesContext.getCurrentInstance().getMessages();
    } 
  }

...

} 
```

现在在此方法之后的渲染阶段，所有消息`FacesContext.getCurrentInstance().getMessages()`都将`clientId`随着标签值的变化而变化，并且因为验证阶段在渲染阶段之前，所有验证都将通过或失败 - 不再有来自验证的消息。

唯一的问题是，当您在实例的`for`属性中使用`HtmlOutputLabel`相同的 id 两次或更多时，因为在不同的形式中可以使用相同的 id 用于组件。然后你可以在`for`attr 里面`<h:outputLabel>`使用更复杂的 id，例如用表单 id 或类似的东西来提示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:47:59.787

1.  绑定你的输出标签。
2.  绑定你的错误信息。
3.  现在从java设置你的输出标签的值。
4.  如果验证失败，请检查验证获取您的输出标签值并将其设置为您的错误消息变量。

# jquery - 将jQuery中的CSS边距更改为负百分比

> ID：14375098
> 
> 赞同：0
> 
> 时间：2013-01-17T08:43:17.607
> 
> 标签：jquery

我在 CSS 中有这个：

```
.inner{ margin-left: -100% }; 
```

我将如何在 jquery 中分配它？

```
$('.inner').css("margin-left", -100%); 
```

不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:44:29.550

在值周围包含引号或双引号。

```
$('.inner').css("margin-left", "-100%"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:44:33.123

试试这个 ：

```
$('.inner').css("margin-left", "-100%"); 
```

# mysql - SELECT 查询从每组返回 1 行

> ID：14375099
> 
> 赞同：10
> 
> 时间：2013-01-17T08:43:17.787
> 
> 标签：mysql, sql, select, greatest-n-per-group

这是一个产品表，有几百万条记录。

![在此处输入图像描述](../Images/2da4ebef0a21ce91d238548e2d8b2a3b.png)

我想列出如下记录：
通常我使用：

```
SELECT id, 
       product_name, 
       store_id 
FROM product
GROUP BY store_id 
ORDER BY id. 
```

当前存在 SQL 性能问题。我需要 SQL 查询来输出这样的结果。

![在此处输入图像描述](../Images/2d7aadd581198a6bcbda54adfa596a57.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-17T08:45:01.720

有很多替代方法可以解决这个问题，我推荐的一种方法是加入一个子查询，该子查询分别获取每个的最新`ID`（*假设该列是`AUTO_INCREMENT`ed*）`store_ID`。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  store_ID, MAX(ID) max_ID
            FROM    tableName
            GROUP BY store_ID
        ) b ON a.store_ID = b.store_ID AND
                a.ID = b.max_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ba920/1)

为了获得更好的性能，请确保在这些列上有一个索引：`ID`和`store_id`.

**更新 1**

如果您想对每条记录进行限制，请在下面使用，

```
SELECT ID, product_Name, store_ID
FROM   tableName a
WHERE
  (
     SELECT COUNT(*) 
     FROM   tableName b
     WHERE  b.store_ID = a.store_ID AND b.ID >= a.ID
  ) <= 2; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ba920/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T08:54:00.420

```
SELECT store_id,id,product_name FROM table_name
WHERE id IN (SELECT MAX(id) FROM table_name GROUP BY store_id)
ORDER BY id 
```

这应该可以工作，您可以根据您的要求通过 store_id 或 id 进行订购。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:47:50.080

请试试这个：

```
SELECT * FROM YOURTABLE B
JOIN (SELECT MAX(ID) MX FROM YOURTABLE GROUP BY STORE_ID) A
ON  A.STORE_ID = B.STORE_ID
AND B.ID = A.MX
GROUP BY B.STORE_ID
; 
```

# java - 在 Java 中隐藏数学公式/算法以防止反编译

> ID：14375100
> 
> 赞同：0
> 
> 时间：2013-01-17T08:43:32.367
> 
> 标签：java, math, encryption, formula, decompiling

我正在编写一个桌面 java 应用程序。该程序从客户的服务器接收 XML 文件。几个标签中的数据是整数类型，并使用一些数学公式“加密”。当我的程序解析 XML 文件时，我需要解密这些标签。解密公式如下：
`int decrypted = (int) Math.ceil(Math.pow ((idProduct + 1) / 3, 1.5));`
解密后的数据然后保存到 H2 数据库，该数据库使用 AES-128 加密。

我需要的是以某种方式隐藏这些公式以防止反编译。

我的尝试：
1\. 为了隐藏我尝试使用混淆器的公式，但我没有发现任何与公式有关的东西。这是一段被 ProGuard 4.8 混淆并被 JAD 反编译的代码：

```
private String d(String paramString) {
   long l = Long.valueOf(paramString).longValue();
   int i = (int)Math.ceil(Math.pow((l + 1L) / 3L, 1.5D));
   String str = String.valueOf(i);

   return str;
} 
```

正如你所看到的，ProGuard 没有对公式做任何事情。我们不能使用像 Zelix KlassMaster 这样的商业混淆器。
2\. 我想试试 JET Excelsior（但似乎还不支持 java 7 应用程序）。此外，我认为我的老板不会欣赏它。
3.我也想过用一些像launch4j这样的包装器，但不知道提取.jar是否难。
4.然后我想用C写一个外部lib并使用JNI。但似乎竞争对手只能使用该库。
5\. IMO 的好解决方案是在 ASM 中编写解密函数并将其直接粘贴到 java 代码中，就像我们可以这样做是 C。不幸的是，这是不可能的。
6.类的加密[没用](http://www.javaworld.com/javaworld/javaqa/2003-05/01-qa-0509-jcrypt.html?page=1).
我知道一切都可以反编译/反汇编，我只是想让它比只运行 JAD 并立即获取它更难一点。

请给我提意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:10:24.607

当您考虑在 asm/c/c++ 中编写公式然后通过 JNI 访问它时，这意味着在不同的指令集中表示公式。您可以发明自己的指令集，而不是使用硬件指令集，并将解释器嵌入到您的代码中。这有性能较差的缺点，但有使用不常见指令集的优势，因此竞争对手应该首先从解释器的字节码重构您的自制指令集。您可以将指令集设计为比 x86 更难理解。

然后，您可以递归地应用这个想法：在另一个解释指令集中编写解释器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:48:15.117

您无法向决心找到它的人隐藏公式。

混淆 Java 代码没有任何作用，因为 .class 文件可以被反编译并且算法相对容易提取。

您可以做的最好的事情是在 C/C++ 中实现公式并通过 JNI 链接它。但即使采用这种方法，也有人可以反编译 C++ 并通过一些努力对过程进行逆向工程。

如果您的应用程序具有提供这样做的机会的结构，您可以通过将其分散在几个必须在处理期间都调用的不相关方法中来隐藏它。

# eclipse-rcp - 将透视重置为默认值

> ID：14375102
> 
> 赞同：1
> 
> 时间：2013-01-17T08:43:35.590
> 
> 标签：eclipse-rcp, talend

我正在使用`Talend Data Integration`v.5.2.1r95165（这是最新版本），但我找不到将`Integration`（或任何其他）透视重置为其默认值的方法。

Window 菜单下什么都没有，Preferences 菜单下的reset 按钮被禁用。

有什么线索吗？也许有一种方法可以手动删除或更新某些`.properties`文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:02:05.963

从透视工具栏中选择透视。右键单击选定的透视图，然后重置。

# javascript - jQuery UI Dialog多次打开MVC4

> ID：14375103
> 
> 赞同：0
> 
> 时间：2013-01-17T08:43:38.153
> 
> 标签：javascript, asp.net-mvc-4

我有一个奇怪的问题，然后我尝试打开一个 Jquery UI 对话框，第二个对话框放在顶部，但我不明白为什么。这是它的样子![双 jQuery UI 对话框](../Images/a34e7cd15962db22e1ad4f8c8407d21d.png)

剧本：

```
 $.ajaxSetup({ cache: false });
  $(document).ready(function () {

    $(".EditorDialog").live("click", function (e) {
      e.preventDefault();
      var d = '@MvcHtmlString.Create(Json.Encode(Model))';
        $.post(this.href, d, function (data) {
          $(data)
              .dialog({
                title: $(this).attr("data-dialog-title"),
                close: function () { $(this).remove() },
                modal: true,
                position: ['center', 40],
                minWidth: 690,
                resizable: false
              })
        }); 
      });      
  }); 
```

对话框视图：

```
<div id="emailDialog" class="dialog2">
  <div>
    <textarea name="content" cols="40" rows="25" id="tinymce"> 
    @Model.Content
        </textarea>
    <input class="Editorclose" name="submit" type="submit" value="Tilføj" style="float: right" onclick="get_editor_content()" />
  </div>
  @*<input class="close" name="submit" type="submit" value="Kontakt Oline" style="float: right" onclick="get_editor_content()"/>*@
  <script type="text/javascript">
    tinyMCE.init({
      // General options
      mode: "exact",
      elements: 'tinymce',
      theme: "advanced",
      plugins: "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
      height: "480",
      width: "660",
      // Theme options
      theme_advanced_buttons1: "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
      theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
      theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
      theme_advanced_buttons4: "insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage",
      theme_advanced_toolbar_location: "top",
      theme_advanced_toolbar_align: "left",
      theme_advanced_statusbar_location: "bottom",
      theme_advanced_resizing: false,

      // Skin options
      skin: "o2k7",
      skin_variant: "silver",

      // Example content CSS (should be your site CSS)

      // Drop lists for link/image/media/template dialogs
      template_external_list_url: "js/template_list.js",
      external_link_list_url: "js/link_list.js",
      external_image_list_url: "js/image_list.js",
      media_external_list_url: "js/media_list.js",

      // Replace values for the template plugin

    });

  </script>
</div> 
```

然后我在 Chrome 中调试，我可以看到两个标签。但是在代码中我看不到为什么要添加第二个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:03:10.483

我发现了问题。原因是在 partialView 中也有一个 Javascript，通过将其移动到调用局部视图的视图解决了问题。

# bash - 试图通过 npm 永久安装...不工作

> ID：14375105
> 
> 赞同：2
> 
> 时间：2013-01-17T08:44:00.627
> 
> 标签：bash, node.js, npm, forever

我正在尝试通过 shell 命令行使用 npm 永久安装：

```
npm install forever 
```

这是我得到的回应：

```
npm ERR! Failed to parse json
npm ERR! Unexpected end of input
npm ERR! File: /home/MYUSER/package.json
npm ERR! Failed to parse package.json data.
npm ERR! package.json must be actual JSON, not just JavaScript.
npm ERR!
npm ERR! This is not a bug in npm.
npm ERR! Tell the package author to fix their package.json file. JSON.parse
npm ERR! System Linux 3.1.9-vs2.3.2.5
npm ERR! command "/home/MYUSER/.nvm/v0.8.17/bin/node" "/home/MYUSER/.nvm/v0.8.17/bin/npm" "install" "forever"
npm ERR! cwd /home/MYUSER
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! file /home/MYUSER/package.json
npm ERR! code EJSONPARSE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     /home/MYUSER/npm-debug.log
npm ERR! not ok code 0 
```

我通过 npm 安装其他任何东西都没有任何问题。为什么这个？

* * *

实际上，我需要在 npm 目录中！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:47:46.990

尝试从中删除下载的模块`node_modules/forever`并重新安装：`[sudo] npm install forever -g`，永远应该安装`-g`（全局）

# php - php内爆国际化

> ID：14375106
> 
> 赞同：3
> 
> 时间：2013-01-17T08:44:01.653
> 
> 标签：php, internationalization, implode

我正在尝试内爆一个包含在 i18n 函数中的值数组，如下所示：

```
<?php echo implode( ', ', __($joblanguages, 'my-text-domain') ); ?> 
```

我收到以下错误消息：

> 警告：isset 中的非法偏移类型或第 72 行 /Applications/XAMPP/xamppfiles/htdocs/vemas-2012/wp-includes/pomo/translations.php 中为空

有没有办法解决这个问题并获得所选语言的值？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:42:48.693

我认为您需要的功能是[`array_map()`](http://php.net/manual/en/function.array-map.php).

您的问题是 WP 的`__()`函数想要翻译单个字符串，而您想要一次翻译一大堆字符串。`array_map()`会为你做这件事。这样的事情应该可以解决问题：

```
implode(array_map(function($e) {return __($e,'my-text-domain');},$joblanguages); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:33:00.157

您的 $joblanguages 是一个数组 - 一开始没有得到它。所以我之前提到的任何事情都不会起作用。

```
$translated=array();

foreach($joblanguages as $jl){
    $translated[]=__($jl, 'my-text-domain');
}

echo implode( ', ', $translated); 
```

试试这个。

# java - 来自sql的JTable工具提示？

> ID：14375110
> 
> 赞同：0
> 
> 时间：2013-01-17T08:44:29.207
> 
> 标签：java, swing, jtable, jtooltip

我已经为此烦恼了 2 天。我有一个`JTable`从两个表中使用 SQL 生成的。

问题是我现在需要获得一个`Mouseover`工具提示，其中包含来自其中一个表的特定信息。它不工作。

```
public class Ausgabe extends JPanel {

    public JPanel panel1;
    private Point hintCell;

    Main j;

    MA ali = new MA();

    public Ausgabe(Main j) {
        this.j = j;

    }

    public void createDefault (){
        panel1 = new JPanel();
        panel1.setLayout( null );

        JLabel lblDieseMitarbeiterSind = new JLabel("Diese Mitarbeiter sind Heute abwesend.");
        lblDieseMitarbeiterSind.setBounds(10, 11, 239, 14);
        panel1.add(lblDieseMitarbeiterSind);

        panel1.add(getHeute());
    }
    public JTable getHeute(){

            DBconnect verbinden = new DBconnect();
            verbinden.erstelleVerbindung();

            JTable Habwesend=new JTable();
            Habwesend.setBounds(10, 30, 200, 400);
            Habwesend.setEnabled(false);
            DefaultTableModel dm=new DefaultTableModel();

            try {
            ResultSet rs= verbinden.sqlStatement.executeQuery("select Vor, Nach from MA_Tabelle where MA_ID in (select distinct MA_ID from AB_Spanne where(Date() >= Start and Date() <= Ende)) ");
            ResultSetMetaData rsmd=rs.getMetaData();
            //Coding to get columns-
            int cols=rsmd.getColumnCount();
            String c[]=new String[cols];
            for(int i=0;i<cols;i++){
                c[i]=rsmd.getColumnName(i+1);
                for (int k = 0; k < c.length; k++) {
                    dm.addColumn(c[k]);
                }

            }
            Object row[]=new Object[cols];
            while(rs.next()){
                for(int i=0;i<cols;i++){
                        row[i]=rs.getString(i+1);
                    }
                dm.addRow(row);

            }

            Habwesend.setModel(dm);
            Habwesend.setToolTipText(getToolTipText((MouseEvent) verbinden.sqlStatement.executeQuery("select Start, Ende from AB_Spanne where MA_ID = "+rs)));
            verbinden.schliesseVerbindung();

            }catch(SQLException e){
                System.out.println("this failed");
                System.out.print(e);
            }
            return Habwesend;
        }

    public String result() {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

希望可以有人帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:16:55.480

尊重渲染器上设置的`JTable`工具提示文本。无需覆盖`getToolTipText`.`JTable`

使用您指定工具提示的渲染器。然而，我强烈建议您在渲染器中运行 SQL 查询，因为这会降低您的应用程序的速度。通常，数据库查询是在后台线程上完成的，结果会被输入到您的模型中，此时您会更新视图。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:52:43.150

在您的代码中，您为整个表格设置了单个工具提示文本，以便所有单元格都相同。

而是使用从该方法派生的自定义表类`JTable`并覆盖该方法

```
@Override
public String getToolTipText(MouseEvent e) {
    Point where = e.getPoint();
    int column = columnAtPoint(where);
    int row = rowAtPoint(where);

    // now run your SQL to get the tooltip text
    ...
    return tooltip;
} 
```

# java - 从活动 B 打开活动 A 的特定片段

> ID：14375114
> 
> 赞同：4
> 
> 时间：2013-01-17T08:44:32.967
> 
> 标签：java, android-intent, android-fragments, android-activity

又是在这里！

情况是这样的，我有：

实现 viewPager 并可视化 3 个可能的片段的活动 A。要访问每个片段，我使用以下代码：

```
 @Override
    public Fragment getItem(int page) {
        switch (page) {
            case 0: return new MyFirstFragment();
            case 1: return new MySecondFragment();
            case 2: return new MyThirdFragment();
        }
        return null;
    }

    @Override
    public int getCount() {
        return [the count of total fragments];
    } 
```

片段 3 包含用户列表。当我单击用户时，活动 B 启动。使用意图：

```
// Create new Intent Object, and specify class
Intent intent = new Intent();
intent.setClass(Fragment3.this, ActivityB.class);
//Use startActivity to start Activity B
startActivity(intent); 
```

在活动 B 中有一个按钮将我重定向到片段 2。所以问题是：我怎样才能返回看到片段号 2？我正在考虑重新开始活动 A 并使用 putExtra 来指定应该可视化哪个片段。

例如，我将传递一个数字，在这种情况下为 2，并想调用函数 Fragment getItem(2) 来可视化片段。但是，Fragment getItem 包含在 pageadapter 类中，所以我不清楚如何进行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T10:35:58.617

最后我自己找到了解决方案:)

我使用 intent.putExtra() 来传递我想要显示的片段的位置，然后在被调用的活动中我使用 ViewPager 的方法 setCurrentItem(position) 并显示想要的片段。

希望这可以帮助其他遇到我同样问题的人！

# android - 多个项目的 GridView 项目列表选择器在 Android 中不起作用

> ID：14375118
> 
> 赞同：14
> 
> 时间：2013-01-17T08:44:55.010
> 
> 标签：android, android-layout, android-gridview, android-selector

我想在长按上绘制选择器，如图所示。当我长按一个项目时，CAB 菜单被激活。但是列表选择器指示器在单击后会熄灭一次。我希望列表选择器处于活动状态，直到 CAB 菜单处于活动状态以允许多项选择。如果我双击，颜色应该会切换。当我单击它时，此代码会闪烁。有人遇到过类似的事情吗？有没有办法带来这个功能？

具有多项选择的Gridview：

![在此处输入图像描述](../Images/b7b9e2561607b9431cf3cecfc4d17dcc.png)

我的 OnCreate 中的 GridView 设置：

```
gridView.setChoiceMode(GridView.CHOICE_MODE_MULTIPLE_MODAL);
gridView.setMultiChoiceModeListener(new MultiChoiceModeListener()); 
```

这工作正常：

```
gridView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {

    ImageView iv = (ImageView) v
                        .findViewById(R.id.imageview2);
                ViewGroup gridChild = (ViewGroup) gridView
                        .getChildAt(position);
                ViewGroup gridGrandChild = (ViewGroup) gridChild
                        .getChildAt(0);
                ViewGroup gridGreatGrandChild = (ViewGroup) gridGrandChild
                        .getChildAt(0);
                int childSize = gridGreatGrandChild.getChildCount();
                if (iv.getId() == gridGreatGrandChild.getChildAt(1)
                        .getId()) {
                    if (iv.getVisibility() == 4)
                        iv.setVisibility(View.VISIBLE);
                    else
                        iv.setVisibility(View.INVISIBLE);
                }
}}); 
```

在激活 CAB 菜单后，我试图在 MultiChoiceModeListener() 类中实现相同的代码。在里面复制了相同的代码

```
public void onItemCheckedStateChanged(ActionMode mode, int position,
            long id, boolean checked) {
} 
```

方法。但我无法访问视图组内的元素。但我可以整体访问 GridView。但不是网格内的单个孩子。

这是我的gridview布局：

```
 <GridView
            android:id="@+id/grid_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:columnWidth="190dp"
            android:drawSelectorOnTop="true"
            android:choiceMode="multipleChoice"
            android:horizontalSpacing="3dp"
            android:listSelector="@drawable/list_selector"
            android:numColumns="auto_fit"
            android:paddingRight="4dp"
            android:stretchMode="spacingWidthUniform"
            android:verticalSpacing="3dp" >
        </GridView> 
```

GridView 中的每个项目都使用以下布局构造：

```
<FrameLayout
    android:id="@+id/frameLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:id="@+id/relativelayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/imageview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </ImageView>

        <ImageView
            android:id="@+id/imageview2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageview"
            android:layout_alignLeft="@+id/imageview"
            android:layout_alignRight="@+id/imageview"
            android:layout_alignTop="@+id/imageview"   
            android:visibility="invisible"
             android:background="#76f9a49c"            
             >
        </ImageView>
    </RelativeLayout>

    <ImageView
        android:id="@+id/tagimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top|right"
        android:layout_marginRight="-4dp"
        android:src="@drawable/tag"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/countimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|right"
        android:layout_marginBottom="8dp"
        android:layout_marginRight="5dp"
        android:src="@drawable/dealcount_overlay"
        android:visibility="invisible" />

    <TextView
        android:id="@+id/count"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|right"
        android:layout_marginBottom="11dp"
        android:layout_marginRight="24dp"
        android:text="100"
        android:textColor="#fff"
        android:visibility="invisible" >
    </TextView>

    <ProgressBar
        android:id="@+id/progressbar"
        style="@android:style/Widget.ProgressBar.Small"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_gravity="center"
        android:visibility="visible" />
</FrameLayout>

<TextView
    android:id="@+id/textView_nodata"
    android:layout_width="wrap_content"
    android:layout_height="150dp"
    android:layout_below="@+id/frameLayout1"
    android:layout_centerHorizontal="true"
    android:text="No data available. Try different query!"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:visibility="gone" />

</RelativeLayout> 
```

这是我的 list_selector.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@color/gridviewlistselector" android:state_focused="true" android:state_pressed="false"/>
<item android:state_focused="true"><shape>
        <solid android:color="#66000000" />
    </shape></item>
<item android:state_selected="true"><shape>
        <solid android:color="#66000000" />
    </shape></item>
<item android:state_pressed="true"><shape>
        <solid android:color="#66000000" />
    </shape></item>
<item android:state_enabled="false" android:state_focused="true"><shape>
        <solid android:color="#66000000" />
    </shape></item>

</selector> 
```

如何实现该功能？我陷入了困境。我在选择器上尝试了各种组合。但似乎没有什么对我有用。我需要提供任何其他细节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:02:36.477

我不确定这是*正确*的解决方案，但我为`android:background`我的列表项设置了这个：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
        android:exitFadeDuration="@android:integer/config_mediumAnimTime" >

    <!-- I never see this one - the grid items are not focusable -->
    <item android:state_pressed="false" android:state_focused="true" android:drawable="@drawable/list_focused" />

    <!-- while pressed -->
    <item android:state_pressed="true" android:drawable="@drawable/pressed_background" />

    <!-- while selected in actionmode -->
    <item android:state_activated="true" android:drawable="@color/pressed" />

    <item android:drawable="@android:color/transparent" />
</selector> 
```

我没有`android:listSelector`在网格视图上设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:18:27.180

在您的网格项目中提供填充。为网格适配器中的每个对象维护 bean 类以跟踪对象被选中或取消选中。基于此值，您可以根据状态更新您的网格项目背景颜色选择/未选择。更新 onitemclieck 列表器中的对象值并查看背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T07:44:56.440

这可以通过跟踪所选项目并更改其在适配器内的背景来实现。

我想你不会从[这篇文章中得到什么帮助](https://stackoverflow.com/a/11328006/1099156)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T23:09:30.237

为此，您需要在单击/长按时更改 Grid View Item、BackgroundColor。

以下是相同的参考代码：

```
GridView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        mAdapter.setSelected(position,true);                                          
        view.setBackgroundColor(Color.XYZ);
    }
} 
```

希望这可以帮助。谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T04:30:38.187

我建议根据您的要求实现自定义可绘制对象。在长按侦听器中，您可以在需要的任何状态下应用它。这是从头开始编写代码的一种方式。

[https://github.com/rameshkec85/Example-Android-CustomDrawableStates](https://github.com/rameshkec85/Example-Android-CustomDrawableStates)

# java - 尝试从访问数据库获取连接时挂在应用程序上

> ID：14375119
> 
> 赞同：0
> 
> 时间：2013-01-17T08:44:58.850
> 
> 标签：java, ms-access, jdbc

我要为这个问题疯狂两天。我有一个应用程序，它有一个客户端项目（UI）、一个应用程序服务器、一个客户端项目（使用另一个程序进行一些计算）。客户端和服务器使用 jms 相互通信。我正在尝试从计算客户端连接访问数据库，应用程序在执行 DriverManager 类的以下语句时挂起

```
di.driver.connect(url, info); 
```

我可以从服务器连接，也可以使用相同的代码连接 UI 客户端。我的系统不是分布式的。所有项目都驻留在我的本地环境中。所以它们的运行环境相同。他们使用相同的 jdk。请告诉我可能是什么问题

我在获得连接之前调用了以下函数。它创建了 odbc 数据源。

```
public static void createODBCSource(String dbPath) {

    // ODBC parameters
    String[] argsXP = { "ODBCCONF", "CONFIGDSN",
            "Microsoft Access Driver (*.mdb)",
            "DSN=datasource-db;Server=localhost;Port=3306;DBQ=" + dbPath };
    String[] argsVistaSeven = { "C:\\Windows\\SysWOW64\\odbcconf.exe",
            "CONFIGDSN", "Microsoft Access Driver (*.mdb)",
            "DSN=psa-db;Server=localhost;Port=3306;DBQ=" + dbPath };

    // creating a process for the ODBC
    ProcessBuilder pb = null;
    String version = System.getProperty("os.name");

    if (version.equals("Windows XP")) {
        pb = new ProcessBuilder(argsXP);
    } else if (version.equals("Windows 7")
            || version.equals("Windows Vista")) {
        pb = new ProcessBuilder(argsVistaSeven);
    }

    // starting the process
    pb.directory(new File("."));
    try {
        Process p = pb.start();
        p.getInputStream().close();
        p.getOutputStream().close();
        p.getErrorStream().close();
        try {
            p.waitFor();
        } catch (InterruptedException ex) {
            ex.printStackTrace();
            return;
        }
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

然后我调用以下函数来获取连接

私有静态最终字符串 URL_MS_ACCESS = "jdbc:odbc: **datasource-db** ";

```
public static Connection connect(String user, String pass, int db) throws SQLException {
    Connection conn = null;
    if (db == MYSQL) {
        try {
            Class.forName(DRIVER_MYSQL);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(DatabaseConnector.class.getName()).log(Level.SEVERE, null, ex);
        }
        conn = DriverManager.getConnection(URL_MYSQL, user, pass);
    } else if(db == ACCESS) {
        try {
            Class.forName(DRIVER_MS_ACCESS);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(DatabaseConnector.class.getName()).log(Level.SEVERE, null, ex);
        }
        conn = DriverManager.getConnection(URL_MS_ACCESS, "", "");
    }
    return conn;
} 
```

**编辑**

计算客户端通过侦听 jms 消息（实现 MessageListener）来工作。它在从服务器接收到 jms 消息（onMessage 方法）时执行工作。在此之后获取访问连接不起作用。我不知道它是如何逻辑的。我认为这是与线程相关的。

我将 DriverManager 的日志写入器设置为调试。这是写的日志。它挂起 SQLAllocConnect。请教我一个处理方法。

```
 JdbcOdbcDriver class loaded
registerDriver: driver[className=com.mysql.jdbc.Driver,com.mysql.jdbc.Driver@1e88b35]
DriverManager.initialize: jdbc.drivers = null
JDBC DriverManager initialized
registerDriver: driver[className=sun.jdbc.odbc.JdbcOdbcDriver,sun.jdbc.odbc.JdbcOdbcDriver@b655a]
DriverManager.getConnection("jdbc:odbc:romania-db")
    trying driver[className=com.mysql.jdbc.Driver,com.mysql.jdbc.Driver@1e88b35]
    trying driver[className=sun.jdbc.odbc.JdbcOdbcDriver,sun.jdbc.odbc.JdbcOdbcDriver@b655a]
*Driver.connect (jdbc:odbc:datasource-db)
JDBC to ODBC Bridge: Checking security
No SecurityManager present, assuming trusted application/applet
JDBC to ODBC Bridge 2.0001
Current Date/Time: Fri Jan 18 17:25:53 EET 2013
Loading JdbcOdbc library
Allocating Environment handle (SQLAllocEnv)
hEnv=404691320
Allocating Connection handle (SQLAllocConnect)
hDbc=404691488
Connecting (SQLDriverConnect), hDbc=404691488, szConnStrIn=DSN=datasource-db 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:50:08.973

我认为 Joop 建议首先尝试使用手动创建的 DSN 很好。当您使用 JDBC-ODBC 桥时，您可以通过跟踪功能监控 ODBC 调用，而不是从 ODBC 管理器中启用。`sql.log`当我使用以下方式从 Jython 连接到 Access 时，这是我跟踪的一部分`jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=c:\\Nwind.mdb`：

```
*" org.python.u 83c-928 ENTER SQLAllocEnv 
        HENV *              00A6F3F0

*" org.python.u 83c-928 EXIT  SQLAllocEnv  with return code 0 (SQL_SUCCESS)
        HENV *              0x00A6F3F0 ( 0x044a1c18)

*" org.python.u 83c-928 ENTER SQLAllocConnect 
        HENV                044A1C18
        HDBC *              00A6F350

*" org.python.u 83c-928 EXIT  SQLAllocConnect  with return code 0 (SQL_SUCCESS)
        HENV                044A1C18
        HDBC *              0x00A6F350 ( 0x044a1cc0)

*" org.python.u 83c-928 ENTER SQLDriverConnectW 
        HDBC                044A1CC0
        HWND                00000000
        WCHAR *             0x74609110 [      -3] "******\ 0"
        SWORD                       -3 
        WCHAR *             0x74609110 
        SWORD                        2 
        SWORD *             0x00000000
        UWORD                        0 <SQL_DRIVER_NOPROMPT>

*" org.python.u 83c-928 EXIT  SQLDriverConnectW  with return code 0 (SQL_SUCCESS)
        HDBC                044A1CC0
        HWND                00000000
        WCHAR *             0x74609110 [      -3] "******\ 0"
        SWORD                       -3 
        WCHAR *             0x74609110 
        SWORD                        2 
        SWORD *             0x00000000
        UWORD                        0 <SQL_DRIVER_NOPROMPT>
... 
```

如您所见`ENTER`，`EXIT`每个 API 调用都有一对，因此很容易看到哪个 API 函数挂起。

# wix - 如何在 MSI 中包含 Web 应用程序文件夹

> ID：14375120
> 
> 赞同：0
> 
> 时间：2013-01-17T08:45:00.367
> 
> 标签：wix, installation, setup-project, web-setup-project

我正在尝试使用 VS2010 和 WIX 进行 Web 应用程序设置，它工作正常，但我唯一要改进的是当您构建安装项目时，它将 Web 应用程序输出放在 bin 文件夹内的单独文件夹中，所以如果我想在服务器中安装该 Web，我需要复制 msi 文件 + Web 应用程序文件夹。

有什么方法可以构建安装项目以将该文件夹包含在 msi 包中？

这是我的 .wixproj 文件：

```
 <?xml version="1.0" encoding="utf-8"?>

<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
      <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
      <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
      <ProductVersion>3.7</ProductVersion>
      <ProjectGuid>{7bc848bd-4069-429e-847e-4f964a148362}</ProjectGuid>
      <SchemaVersion>2.0</SchemaVersion>
      <OutputName>Tgw.WebClient.Goodyear.Setup</OutputName>
      <OutputType>Package</OutputType>
      <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
      <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
      <SccProjectName>SAK</SccProjectName>
      <SccProvider>SAK</SccProvider>
      <SccAuxPath>SAK</SccAuxPath>
      <SccLocalPath>SAK</SccLocalPath>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
      <OutputPath>bin\$(Configuration)\</OutputPath>
      <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
      <DefineConstants>Debug</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
      <OutputPath>bin\$(Configuration)\</OutputPath>
      <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
    </PropertyGroup>
    <ItemGroup>
      <Compile Include="MainConfiguration.wxs" />
      <Compile Include="Tgw.WebClient.Standalone.Web.wxs" />
      <Compile Include="WIXUI_Screens.wxs" />
    </ItemGroup>
    <ItemGroup>
      <EmbeddedResource Include="Resources\Strings.wxl" />
    </ItemGroup>
    <ItemGroup>
      <ProjectReference Include="..\..\Standalone\Source\Tgw.WebClient.Standalone.Web\Tgw.WebClient.Standalone.Web.csproj">
        <Name>Tgw.WebClient.Standalone.Web</Name>
        <Project>{f50a4ff0-6878-4a27-bce7-4956d1ae27db}</Project>
        <Private>True</Private>
        <DoNotHarvest>True</DoNotHarvest>
        <RefProjectOutputGroups>
        </RefProjectOutputGroups>
        <RefTargetDir>TARGETINSTALLDIRECTORY</RefTargetDir>
        <WebProject>True</WebProject>
      </ProjectReference>
    </ItemGroup>
    <ItemGroup>
      <WixExtension Include="WixNetFxExtension">
        <HintPath>$(WixExtDir)\WixNetFxExtension.dll</HintPath>
        <Name>WixNetFxExtension</Name>
      </WixExtension>
      <WixExtension Include="WixIIsExtension">
        <HintPath>$(WixExtDir)\WixIIsExtension.dll</HintPath>
        <Name>WixIIsExtension</Name>
      </WixExtension>
      <WixExtension Include="WixUtilExtension">
        <HintPath>$(WixExtDir)\WixUtilExtension.dll</HintPath>
        <Name>WixUtilExtension</Name>
      </WixExtension>
      <WixExtension Include="WixUIExtension">
        <HintPath>$(WixExtDir)\WixUIExtension.dll</HintPath>
        <Name>WixUIExtension</Name>
      </WixExtension>
    </ItemGroup>
    <ItemGroup>
      <Content Include="Configuration\Conditions.wxi" />
      <Content Include="Configuration\Settings.wxi" />
      <Content Include="Resources\CommanderApp_32.ico" />
      <Content Include="Scripts\CreateWebApplicationConfigFiles.ps1" />
    </ItemGroup>
    <ItemGroup>
      <Folder Include="Configuration" />
      <Folder Include="Scripts" />
      <Folder Include="Resources" />
    </ItemGroup>
    <Import Project="$(WixTargetsPath)" />
    <!--
      To modify your build process, add your task inside one of the targets below and uncomment it.
      Other similar extension points exist, see Wix.targets.-->
    <Import Project="$(WixTargetsPath)" />
    <Target Name="BeforeBuild">
      <MSBuild Projects="%(ProjectReference.FullPath)" Targets="Package" Properties="Configuration=$(Configuration);Platform=AnyCPU" Condition="'%(ProjectReference.WebProject)'=='True'" />
      <PropertyGroup>
        <LinkerBaseInputPaths>%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\</LinkerBaseInputPaths>
        <DefineConstants>BasePath=%(ProjectReference.RootDir)%(ProjectReference.Directory);</DefineConstants>
      </PropertyGroup>
      <HeatDirectory OutputFile="%(ProjectReference.Filename).wxs" Directory="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\" DirectoryRefId="TARGETINSTALLDIRECTORY" ComponentGroupName="%(ProjectReference.Filename)_Project" AutogenerateGuids="true" SuppressCom="true" SuppressFragments="true" SuppressRegistry="true" SuppressRootDirectory="true" ToolPath="$(WixToolPath)" Condition="'%(ProjectReference.WebProject)'=='True'" PreprocessorVariable="var.BasePath" />
    </Target>
  </Project> 
```

这是我的 .wsx 自动生成的一部分：

```
 <?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="TARGETINSTALLDIRECTORY">
            <Component Id="cmp975763C4E1B3C939E4CD1957234F6BAC" Guid="*">
                <File Id="filAB034261C737C6286CB0722DB3566B4F" KeyPath="yes" Source="$(var.BasePath)\About.aspx" />
            </Component>
            <Component Id="cmp0ADE3CAB02CA0E4E0C08810D00C09DEB" Guid="*">
                <File Id="fil2CF0D37E848154468D37906E1D0B2FB8" KeyPath="yes" Source="$(var.BasePath)\AspWebStart.aspx" />
            </Component>            
            </Directory>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="Tgw.WebClient.Standalone.Web_Project">
            <ComponentRef Id="cmp975763C4E1B3C939E4CD1957234F6BAC" />
            <ComponentRef Id="cmp0ADE3CAB02CA0E4E0C08810D00C09DEB" />               
        </ComponentGroup>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:39:24.947

在没有看到 Tgw.WebClient.Standalone.Web.wxs 文件的内容的情况下，我不能肯定地说，但这是您问题的最有可能的答案！:)

如果您指的是 Web 应用程序的内容文件，例如 html、cshtml、aspx、jpg 等，您有几个选择。

手动将 .wxs 文件中的所有文件作为组件包含：

```
<Component>
    <File Id="ContentFile1"
          Name="index.html"
          Source="$(var.Tgw.WebClient.Standalone.Web.ProjectDir)\index.html" />
</Component> 
```

显然，如果您有一个大型网站，这将非常耗时。

使用命令行工具[heat](http://wix.sourceforge.net/manual-wix3/heat.htm)来收集您的所有内容文件并为您创建 .wxs，然后您可以将其静态包含。这样做的好处是您可以快速生成上述组件，但可以轻松调整。

最后，您可以编辑您的 wixproj 文件并包含[HeatDirectory](http://wix.sourceforge.net/manual-wix3/msbuild_task_reference_heatdirectory.htm)元素。然后，这将在每个构建中收集您的内容，以便自动包含任何新文件。如果需要，您还可以使用 xslt 修改此输出。

# mysql - 将关联数组插入mysql

> ID：14375125
> 
> 赞同：-1
> 
> 时间：2013-01-17T08:45:24.213
> 
> 标签：mysql, arrays

我在数组中有以下数据，我想将每个数组索引的内容存储到 mysql 表 myforum 中：

```
 Array ( 
            [0] => zero, those players that are trialing for hib team, (hpb's) most of them are like 300 -400 pingers? umm..mager lagg and even worse when they play on uk server's i bet/ 
            [1] => 1998-04-25T213200Z 
            [2] => http//boards.ie/vbulletin/showpost.php?p=67075 
          ) 
```

mysql表列是：内容，日期，帖子

```
[0] index value should store in content column,
[1] should store in date column and
[2] should store in post column 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:29:13.257

除了转义您留下的值外，我在您的代码中没有发现任何错误，这可能是由于您无法将数据插入表中。你可以试试下面的代码。

```
$con = mysql_connect("localhost","sufi","1234"); 
 if (!$con) 
     { 
     die('Could not connect: ' . mysql_error()); 

     } 
 mysql_select_db("test", $con); 
 $xml = simplexml_load_file("boards.xml"); 
 $products[0] = (string)current($xml->xpath("/sioctBoardPost/sioccontent")); 
 $products[1] = (string)current($xml->xpath("/sioctBoardPost/dctermscreated")); 
 extract($products); 
 mysql_query("INSERT INTO forum (txt_content,txt_date,txt_about) 
 VALUES ('".mysql_escape_string($products[0])."','".mysql_escape_string($products[1])."','".mysql_escape_string($products[2])."')"); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:22:19.670

***试试下面的例子：***

```
<?php
$input_array = array('zero, those players that are trialing for hib team, (hpb\'s) most of them are like 300 -400 pingers? umm..mager lagg and even worse when they play on uk server\'s i bet','1998-04-25T213200Z','http//boards.ie/vbulletin/showpost.php?p=67075');
$input_array_count= count($input_array);
$coumn_array = array('content','date','post');
$input_array_implode="'".implode("','",$input_array)."'";
$coumn_array_implode="'".implode("','",$coumn_array)."'";
$insert_query=mysql_query("insert into tablename (".$coumn_array_implode.") values (".$input_array_implode.")") or die(mysql_error());
?> 
```

我认为这可以帮助您解决问题。

# unit-testing - 同一个单元测试中的状态和行为验证——它干净吗？

> ID：14375126
> 
> 赞同：0
> 
> 时间：2013-01-17T08:45:27.503
> 
> 标签：unit-testing, junit

在每一本书中，单元测试都应该在断言/验证部分只检查一件事。同时有一个像下面这样的例子

```
 @Test
  public void shouldReturnSomethingAndExecuteExternalComponent(){

    // Given
    ExternalComponent externalComponent = EasyMock.createStrictMock(ExternalComponent.class);
    configureMock(externalComponent);

    // When
    Result result = objectUnderTest.foo();

    //Then
    Result expectedResult = ...
    Assert.assertEquals(expectedResult, result);
    externalComponent.verify(); 

  } 
```

在这种情况下，检查行为（执行 externalComponent - **externalComponent.verify()**）和测试后对象的状态（“ **assertEquals(expectedResult, result)** ”）。在一个测试中混合两个验证是否干净？你怎么看？或者它应该分成两个测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:18:08.423

测试应该分成两个测试

*   应该ReturnSomething()
*   应该执行某事（）

如果您使用[Mockito](http://code.google.com/p/mockito/)而不是 EasyMock，那么 shouldExecuteSomething 看起来会更好，因为您不必在执行测试之前定义外部组件的已验证行为。

```
@Test
public void shouldExecuteSomething(){
  // Given
  ExternalComponent externalComponent = mock(ExternalComponent.class);
  objectUnderTest.use(externalComonent)

  // When
  objectUnderTest.foo();

  //Then
  verify(externalComponent).someMethod(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:18:23.507

看到这一点我不会感到非常沮丧，因为这不是在一次测试中检查太多的极端情况，但我倾向于将其拆分：

```
 @Test
  public void shouldReturnSomething(){

    // Given
    ExternalComponent externalComponent = EasyMock.createStrictMock(ExternalComponent.class);
    configureMock(externalComponent);

    // When
    Result result = objectUnderTest.foo();

    //Then
    Result expectedResult = ...
    Assert.assertEquals(expectedResult, result);

  }

  @Test
  public void shouldExecuteExternalComponent(){

    // Given
    ExternalComponent externalComponent = EasyMock.createStrictMock(ExternalComponent.class);
    configureMock(externalComponent);

    // When
    Result result = objectUnderTest.foo();

    //Then
    externalComponent.verify(); 

  } 
```

# php - 从 mysql 5.0 检索数据并推入 php 的快速方法

> ID：14375127
> 
> 赞同：0
> 
> 时间：2013-01-17T08:45:35.303
> 
> 标签：php, mysql

我正在使用 MYSQL 5.0 和 PHP 。在我的数据库中，我有 100 万个用户条目。现在我正在使用以下查询。

**`SELECT ID FROM USERS;`**

在 PHP 数组中获取这些值以供进一步使用，如下所示。

```
$Userid = array();
for($i=0;$<sizeof($IDArray);$i++)
{
$Userid[$i] = $IDArray[$i];
} 
```

这种方法对我来说太昂贵了，花费了大量时间并破坏了我的进一步操作。Mysql INDEX 方法我无法在这里使用。建议我可以在这里使用的任何方法。

我正在尝试从用户表中收集所有 ID（主键）。使用所有用户 ID，我将计算用户对特定文章帖子的评论、浏览量。

例如。ID = 1

在 ID 1 上，一位用户注册了例如 Smith Joseph。史密斯有 10 篇文章。
我想编写一个程序来查找具有最大浏览量和评论数的文章帖子。

我希望这个想法现在很清楚！

# opengl - 关于使用 OpenGL 模型视图矩阵和矩阵变换的说明

> ID：14375129
> 
> 赞同：4
> 
> 时间：2013-01-17T08:45:43.570
> 
> 标签：opengl, translate, glulookat

我已经能够使用模型视图矩阵和函数`glTranslatef()`来`gluLookAt()`转换对象或整个场景的透视图，但是当我尝试同时执行这两种操作时，我遇到了问题。

似乎不管我使用的参数如何，`gluLookAt()`我绘制的对象都是从相同的角度显示的。我已经尝试在其他不同用途中调用函数，`glPushMatrix()`并且`glPopMatrix`基于我在其他线程中读到的内容，但没有运气。这就是我现在所拥有的。物体应该移动，但我只能让它们从一个角度出现。

例如，由于它们应该在 xy 平面上移动，并且逆时针旋转，我认为更改`z_0`为`-30`会使它们看起来是顺时针移动，但似乎没有任何区别。在它之前有一长串常量，我将省略。最终目标是为我们的太阳系制作一个简单的模型。

```
 GLfloat time = 0.0;
GLfloat inc = 0.01;

// viewing parameters
GLint winWidth = 600, winHeight = 600;
GLfloat x_0 = 0.0, y_0 = 0.0, z_0 = 30.0;
GLfloat xref = 0.0, yref = 0.0, zref = 0.0;
GLfloat Vx = 0.0, Vy= 1.0, Vz = 0.0;
GLfloat xwMin = -50.0, ywMin = -50.0, xwMax = 50.0, ywMax = 50.0;
GLfloat dnear = .3, dfar = 10.0;

void view(void) {
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(xwMin, xwMax, ywMin, ywMax, dnear, dfar);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(x_0, y_0, z_0, xref, yref, zref, Vx, Vy, Vz);
}

void init(void) {
    view();
    glEnable(GL_DEPTH_TEST);
}

void drawPlanet(GLfloat maj, GLfloat min, GLfloat x0, GLfloat theta,
        GLfloat size) {
    GLfloat x = maj * cosf(theta) + x0;
    GLfloat y = min * sinf(theta);
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    glLoadIdentity();
    glTranslatef(x, y, 0);
    glutSolidSphere(size, 25, 25);
    glPopMatrix();
}

void display(void) {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glColor3f(1.0, 1.0, 1.0);

    drawPlanet(MERCURY_MAJOR, MERCURY_MINOR, MERCURY_CENTER,
        time / MERCURY_YEAR, MERCURY_SIZE);

    drawPlanet(MARS_MAJOR, MARS_MINOR, MARS_CENTER,
        time / MARS_YEAR, MARS_SIZE);

    drawPlanet(URANUS_MAJOR, URANUS_MINOR, URANUS_CENTER,
        time / URANUS_YEAR, URANUS_SIZE);

    glFlush();
}

void idle(void) {
    time += inc;
    display();
    glutSwapBuffers();
}

int main (int argc, char **argv) {
    glutInit(&argc, argv);
    glutInitWindowSize(500,500);
    glutInitWindowPosition(0,0);
    glutInitDisplayMode(GLUT_RGB | GLUT_DEPTH);
    glutCreateWindow("");

    init();

    glutDisplayFunc(display);
    glutIdleFunc(idle);

    glutMainLoop();
} 
```

如果有人看到我遗漏的东西，我真的很感激对一些额外阅读的解释或指导，这将有助于我解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:14:06.363

您犯了典型的 OpenGL 新手错误，并将矩阵操作分散在各处。您永远不会*初始化*OpenGL 矩阵状态。进入显示功能时，请务必重新设置。这使得事情更容易被发现。

此外，您可能会将 OpenGL 误认为是具有 glPush/PopMatrix 的场景图，“神奇地”建立了转换层次结构。

`glPushMatrix`——你可能知道——复制当前栈顶矩阵并将其压入栈中。这个想法是制作临时副本，可以将进一步的转换成倍增加。

现在让我们以稍微不同的形式查看您的代码：

```
void display(void) {
    glViewport(…);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(xwMin, xwMax, ywMin, ywMax, dnear, dfar);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(x_0, y_0, z_0, xref, yref, zref, Vx, Vy, Vz);

    glColor3f(1.0, 1.0, 1.0);

    {
        GLfloat x = maj * cosf(theta) + x0;
        GLfloat y = min * sinf(theta);
        glMatrixMode(GL_MODELVIEW);
        glPushMatrix();
        glLoadIdentity(); // <<<<<<<<<

        glTranslatef(x, y, 0);
        glutSolidSphere(size, 25, 25);
        glPopMatrix();
    } 
```

你看到这里发生了什么吗？您正在将您的模型视图矩阵重置为身份，然后将其翻译。您之前创建的查看矩阵被完全丢弃，并且对球体绘制没有影响。

删除`glLoadIdentity()`我标记的内容，事情应该可以正常工作。

# javascript - 点击时停止/开始动画循环？jQuery

> ID：14375133
> 
> 赞同：0
> 
> 时间：2013-01-17T08:45:59.047
> 
> 标签：javascript, jquery, loops

我正在制作一个连续循环播放 5 张图像等的幻灯片。我让它循环正常，但循环不会开始和停止。我正在使用 pause = true/false 变量并在整个代码中添加 if 语句 - 不是很好看或效率不高（从一个例子中取出）。如果循环在语句等之后暂停，它会破坏动画并且图像会丢失。

有没有像这样控制循环的标准方法？

```
function setupSlideShow(){
    // Setup SlideShow stuff here then start the loop
    slideBoxTransition()
}

var page = 1;
function slideBoxTransition(){
    switch (settings['transition']['effect']){
        case "slide" :
            next.css({left:settings['width']+"px",top:0,display:"block"});
            current.animate({left: "-="+width+"px"}, {duration : speed, easing : easing, queue : false});
            next.animate({left: "-="+width+"px"}, {duration : speed, easing : easing, queue : false, complete : function(){
                current.css("display","none")
                slideBoxGetImage();
            }});
            break;
    }
}

function slideBoxGetImage(){
    current = $self.eq($self.index(next))
    page += 1;
    if(page < $self.length){
        next = $self.eq( $self.index(current) + 1 );
    }else{
        page = 0;
        next = $self.first();
    }
    slideBoxTimeout();
}

function slideBoxTimeout(){
    setTimeout(function(){
        slideBoxTransition();
    }, delay);
} 
```

任何事情都会非常感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:43:24.197

```
var interval;
function slideBoxTimeout(){
    var interval = setInterval(function(){
        slideBoxTransition();
    }, delay);
}

$(".play").click(function() {
    slideBoxTimeout();
});
$(".pause").click(function() {
    clearInterval(interval);
}); 
```

取自：[jQuery 播放/暂停 jQuery 函数](https://stackoverflow.com/questions/9856084/jquery-play-pause-jquery-function)

# java - Java中的可扩展枚举，不使用扩展

> ID：14375136
> 
> 赞同：1
> 
> 时间：2013-01-17T08:46:30.050
> 
> 标签：java, enums, extends

> **可能重复：**
> [是否可以扩展 Java 枚举？](https://stackoverflow.com/questions/2642281/is-it-possible-to-extend-java-enums)

我有一个小问题，我有一个具有一定数量值的枚举。此枚举用于系统的多个部分，在某些情况下需要包含更多值。

由于Java中不允许扩展枚举，我试图想出一些替代方案，到目前为止我的解决方案是创建一个接口，其中包含一个枚举，该枚举的值对系统的所有部分都是通用的，然后创建一个空类来实现这个界面。

所以`enum A implements I`我可以使用`A.COMMON_ENUM.ENUM_VALUE`

`enum B`现在我可以在系统的某个子部分创建一个新的，其中包含一个枚举`ADDITIONAL_ENUM`并实现`I`. 所以现在我可以使用这个：

```
B.COMMON_ENUM.ENUM_VALUE 
```

或者

```
B.ADDITIONAL_ENUM.ADDED_ENUM_VALUE 
```

这是一个丑陋的解决方案吗？- 我的意思是，它有效，但似乎是*错误*的......

- - - 更新： - - -

通用枚举位于系统的“核心”部分（可以有多个前端），并且每个前端的附加枚举各不相同。所以打个比方：假设一个 VEHICLE 枚举有 ENGINE、DOORS，然后在我的 CAR 前端我需要添加“轮子”，在我的 BOAT 前端我需要添加“PROPELLER”

代码示例：

```
public interface EnumType {           // I
    public enum Core {
    VALUE1,
    VALUE2,
    VALUE3
    }
}

public enum CommonEnum implements EnumType {     // A

}

public enum AdditionalEnumType implements EnumType {     // B
    public enum Additional {
    VALUEX,
    VALUEY
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:41:30.343

我会使用类似的模式，但我不明白为什么你的所有嵌套都在你的。我的看起来像这样：

```
interface SomeType {
  String name();
}

public enum CoreEnum implements SomeType {
  VALUE1,
  VALUE2;
}

public enum AdditionalEnum implements SomeType {
  VALUE3,
  VALUE4;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:56:21.540

为此，您可能会阅读有关[类型安全枚举模式](http://www.javacamp.org/designPattern/enum.html)的信息。介绍界面没问题。因此，您应该只依赖 API 中的该接口。如果该接口的实现是由枚举或类完成的，您的 API 用户应该不关心。

我看不出有什么不好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:42:54.743

您可以通过设计创建自己的类似于 enum 的类

```
public class A {
    A() {}  
    public static final A A1 = new A();
    public static final A A2 = new A();
    @Override
    public String toString() {
        return getClass().getSimpleName();
    }
}

public class B extends A {
    B() {}
    public static final A A3 = new A();
} 
```

# jquery - Access-Control-Allow-Origin 不允许 Origin null 用于 json

> ID：14375138
> 
> 赞同：0
> 
> 时间：2013-01-17T08:46:43.323
> 
> 标签：jquery, json

我正在使用此 ajax 调用 json 文件，但不知何故我一直收到此错误消息：“Access-Control-Allow-Origin 不允许使用 Origin null。”

这是我从学校 Intranet URL 调用的代码。

```
$.ajax({
type:"get",
url:"http://172.20.192.218:8080/DC_Local/rest/datacorrelation?type=/soccer/football_team&limit=20",
dataType: json,
success: function(data){
var pts = [];
$.each(json.data, function(i,v){
    pts.push([v.topic, v.audience.length]);
});
},

error: function (){
alert("Error"); 
}
}); 
```

这是我的 json 结构：

```
"data": [
                     {
                         "id": "/en/chelsea_fc",
                         "topic": "Chelsea F.C.",
                         "audience": [
                             {
                                 "userid": "100003914111287",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             },
                             {
                                 "userid": "100003914111287",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             }
                         ],
                         "type": "/soccer/football_team"
                     },
                     {
                         "id": "/en/manchester_united_fc",
                         "topic": "Manchester United F.C.",
                         "audience": [
                             {
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Ryan Giggs"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Manchester United"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Manchester United"
                                     }
                                 ],
                                 "userid": "100003921730958"
                             }
                         ],
                         "type": "/soccer/football_team"
                     }
                 ]
             } 
```

# java - 数组，字符串，数据结构来实现cesar算法？

> ID：14375140
> 
> 赞同：1
> 
> 时间：2013-01-17T08:46:47.663
> 
> 标签：java, algorithm

我可以用来实现[凯撒密码](http://en.wikipedia.org/wiki/Caesar_cipher)的最佳数据结构（DS）/类是什么？这是我到目前为止所想到的：

1.  所有字母的字符串 (abc...zABCD...Z) ？
2.  带有字母和环绕的数组？
3.  DS 存储一个键值对？

为什么我认为我需要 3 - 我必须在我的“编号字母列表”中找到字符（要编码）。然后我使用该索引，并将其移动一个数字。我认为如果我使用键值对而不是搜索字符串或数组的每个索引会更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:54:55.113

```
public String applyCaesar(String text, int shift)
{
    char[] chars = text.toCharArray();
    for (int i=0; i < text.length(); i++)
    {
        char c = chars[i];
        if (c >= 32 && c <= 127)
        {
            // Change base to make life easier, and use an
            // int explicitly to avoid worrying... cast later
            int x = c - 32;
            x = (x + shift) % 96;
            if (x < 0) 
              x += 96; //java modulo can lead to negative values!
            chars[i] = (char) (x + 32);
        }
    }
    return new String(chars);
} 
```

# android - 应用程序错误：此版本的应用程序未针对 Google Play 配置

> ID：14375143
> 
> 赞同：0
> 
> 时间：2013-01-17T08:47:01.763
> 
> 标签：android, google-play, in-app-billing, apk

我在开始购买流程时使用 android IAB v3 测试我的应用内计费时收到此错误消息。进入谷歌游戏商店后，我看到了这条消息。

我已经阅读了此处发布的有关此错误的所有其他帖子。

所有建议的答案都类似于使我设备中的测试 apk 和谷歌开发者控制台中的上传 apk 之间的 ve​​rsionCode 相同。并将标志 APK 上传到 google play。

我已经完成了所有这些并且已经等了半天。但我现在仍然收到此错误。我不知道我能做些什么来修复它。

请给我一些建议。非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:05:32.567

如果您正在测试直接从 eclipse 安装的应用程序，并且您没有设置为使用另一个密钥库自动签名，而不是处于调试模式。如果您的应用程序已在市场上发布，并且您正在使用真实的应用程序内产品测试您的应用程序，那么您的应用程序将无法运行，直到您使用上传到 Google Play 商店时使用的相同密钥库进行注册。在调试模式下，您可以使用 android 测试产品测试您的应用内实现。

# javascript - jQuery - 防止默认，然后继续默认

> ID：14375144
> 
> 赞同：119
> 
> 时间：2013-01-17T08:47:02.217
> 
> 标签：javascript, jquery

我有一个表单，提交后，我需要在提交表单之前进行一些额外的处理。我可以阻止默认的表单提交行为，然后进行额外的处理（它基本上是调用 Google Maps API 并向表单添加一些隐藏字段）——然后我需要提交表单。

有没有办法“防止默认”，然后某个时候“继续默认”？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2017-01-03T10:04:54.693

利用`jQuery.one()`

> 将处理程序附加到元素的事件。每个事件类型的每个元素最多执行一次处理程序

```
$('form').one('submit', function(e) {
    e.preventDefault();
    // do your things ...

    // and when you done:
    $(this).submit();
}); 
```

使用`one`防止也是无限循环，因为此自定义`submit`事件在第一次提交后被分离。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-01-17T08:57:20.327

当您将`.submit()`事件绑定到表单，并在返回之前执行您想做的事情时（true），这些事情发生在实际提交之前。

例如：

```
$('form').submit(function(){
    alert('I do something before the actual submission');
    return true;
}); 
```

[简单的例子](http://jsfiddle.net/38vy0jd8/)

jquery.com 上的另一个示例：http: [//api.jquery.com/submit/#entry-examples](http://api.jquery.com/submit/#entry-examples)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-01-17T08:49:18.187

我会这样做：

```
 $('#submiteButtonID').click(function(e){
     e.preventDefault();
     //do your stuff.
     $('#formId').submit();
 }); 
```

先调用 `preventDefault`后使用`submit()`函数，如果只需要提交表单

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-02-09T18:10:16.457

使用这种方式，您将在您的 JS 上执行无限循环。要做得更好，您可以使用以下方法

```
var on_submit_function = function(evt){
    evt.preventDefault(); //The form wouln't be submitted Yet.
    (...yourcode...)

    $(this).off('submit', on_submit_function); //It will remove this handle and will submit the form again if it's all ok.
    $(this).submit();
}

$('form').on('submit', on_submit_function); //Registering on submit. 
```

我希望它有帮助！谢谢！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-07-25T09:27:27.087

```
 $('#myform').on('submit',function(event){
        // block form submit event
        event.preventDefault();

        // Do some stuff here
        ...

        // Continue the form submit
        event.currentTarget.submit();
  }); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-05-10T07:50:15.940

恕我直言，这是最通用和最强大的解决方案（如果您的操作是用户触发的，例如“用户点击按钮”）：

*   第一次调用处理程序时检查谁触发了它：
    *   如果用户触发它 - 做你的事情，然后再次触发它（如果你愿意） - 以编程方式
    *   否则 - 什么都不做（=“继续默认”）

例如，请注意这个添加“您确定吗？”的优雅解决方案。只需用属性装饰按钮即可弹出任何按钮。如果用户不选择退出，我们将有条件地继续默认行为。

1\. 让我们在每个按钮上添加一个“你确定”弹出警告文本：

```
<button class="btn btn-success-outline float-right" type="submit"  ays_text="You will lose any unsaved changes... Do you want to continue?"                >Do something dangerous</button> 
```

2\. 将处理程序附加到所有此类按钮：

```
$('button[ays_text]').click(function (e, from) {
    if (from == null) {  // user clicked it!
        var btn = $(this);
        e.preventDefault();
        if (confirm() == true) {
            btn.trigger('click', ['your-app-name-here-or-anything-that-is-not-null']);
        }
    }
    // otherwise - do nothing, ie continue default
}); 
```

而已。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-29T09:04:27.420

# 上面有`jQuery`@Joepreludian 的答案的一个小变化：

### 要记住的要点：

*   `.one(...)`而不是`.on(...) or .submit(...)`
*   `named`函数而不是`anonymous function`因为我们将在`callback`.

* * *

```
$('form#my-form').one('submit', function myFormSubmitCallback(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    var $this = $(this);
    if (allIsWell) {
        $this.submit(); // submit the form and it will not re-enter the callback because we have worked with .one(...)
    } else {
        $this.one('submit', myFormSubmitCallback); // lets get into the callback 'one' more time...
    }
}); 
```

## 您可以`allIsWell`将以下代码段中的变量值更改为`true`或`false`测试功能：

```
$('form#my-form').one('submit', function myFormSubmitCallback(evt){
  evt.stopPropagation();
  evt.preventDefault();
  var $this = $(this);
  var allIsWell = $('#allIsWell').get(0).checked;
  if(allIsWell) {
    $this.submit();
  } else {
    $this.one('submit', myFormSubmitCallback);
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form action="/" id="my-form">
  <input name="./fname" value="John" />
  <input name="./lname" value="Smith" />
  <input type="submit" value="Lets Do This!" />
  <br>
  <label>
    <input type="checkbox" value="true" id="allIsWell" />
    All Is Well
  </label>
</form>
```

祝你好运...

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-28T16:07:05.040

**“没有提交循环的验证注入”：**

我只是想在 HTML5 验证之前检查 reCaptcha 和其他一些东西，所以我做了类似的事情（验证函数返回 true 或 false）：

```
$(document).ready(function(){
   var application_form = $('form#application-form');

   application_form.on('submit',function(e){

        if(application_form_extra_validation()===true){
           return true;
        }

        e.preventDefault();

   });
}); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-26T18:28:35.590

以纯Javascript的方式，您可以在防止默认后提交表单。

这是因为`HTMLFormElement.submit()` [从不](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit)`onSubmit()`调用. 因此，我们依靠该规范来提交表单，就好像它在这里没有自定义的 onsubmit 处理程序一样。

```
var submitHandler = (event) => {
  event.preventDefault()
  console.log('You should only see this once')
  document.getElementById('formId').submit()
} 
```

看到[这个小提琴](http://jsfiddle.net/orqoLb4r/)同步请求。

* * *

等待异步请求完成同样简单：

```
var submitHandler = (event) => {
  event.preventDefault()
  console.log('before')
  setTimeout(function() {
    console.log('done')
    document.getElementById('formId').submit()
  }, 1400);
  console.log('after')
} 
```

您可以查看我的小提琴以获取异步请求的[示例](http://jsfiddle.net/33wLs160/148/)。

* * *

如果你对承诺感到失望：

```
var submitHandler = (event) => {
  event.preventDefault()
  console.log('Before')
    new Promise((res, rej) => {
      setTimeout(function() {
        console.log('done')
        res()
      }, 1400);
    }).then(() => {
      document.getElementById('bob').submit()
    })
  console.log('After')
} 
```

这就是[*那个*请求](http://jsfiddle.net/33wLs160/150/)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-17T08:49:27.300

您可以使用`e.preventDefault()`which 将停止当前操作。

比你能做的`$("#form").submit();`

```
 $('#form').submit(function (e)
{
    return !!e.submit;
});
if(blabla...)
{...
}
else
{
    $('#form').submit(
    {
        submit: true
    });
} 
```

# openerp - 如何在表单界面设置 OpenERP v7 的默认值

> ID：14375152
> 
> 赞同：4
> 
> 时间：2013-01-17T08:47:46.303
> 
> 标签：openerp

刚刚开始深入研究 OpenERP v7。在 v6.1 之前，可以在每个表单的右侧轻松定义特定表单的默认值。例如，产品类型我需要将其默认设置为“Stockable Product”而不是“Consumable”，如何在 v7 中实现这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T09:50:30.703

您需要在激活“开发人员模式”中使用 Web，然后在调试菜单中使用。使用以下步骤：

*   转到用户上下文菜单（右上角）并单击**About OpenEEP**，
*   在这里，您将找到一个选项**激活开发人员模式**单击该 URL，这将重新加载 Web，现在您将激活调试模式。
*   转到产品列表视图，在产品的看板视图顶部，您会找到`Debug View#`选项。
*   然后单击创建新产品并在**产品类型**中选择 Stockble 产品，现在转到**调试视图#**，您将找到**设置默认值**选项并选择您的默认值并保存。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:35:46.543

请注意，如果它是一个标记为翻译的字段，我在合作伙伴表和翻译表中不同的字段中的值遇到了非常糟糕的问题（我认为这是一个应该尽快修复的严重错误）

# c++ - 如何在 C++ 中将 RGB 颜色值转换为十六进制值？

> ID：14375156
> 
> 赞同：9
> 
> 时间：2013-01-17T08:47:52.930
> 
> 标签：c++, hex, rgb

在我的 C++ 应用程序中，我有一个 png 图像的红色、绿色、蓝色值。我将这些值存储在三个整数中。

如何将 RGB 值转换为等效的十六进制值？

像这种格式的例子 0x1906

编辑：我将格式保存为 GLuint。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-17T08:56:51.400

将每种颜色的相应位存储到至少 24 位的无符号整数中（如 a `long`）：

```
unsigned long createRGB(int r, int g, int b)
{   
    return ((r & 0xff) << 16) + ((g & 0xff) << 8) + (b & 0xff);
} 
```

现在代替：

```
unsigned long rgb = 0xFA09CA; 
```

你可以做：

```
unsigned long rgb = createRGB(0xFA, 0x09, 0xCA); 
```

请注意，上面不会处理 alpha 通道。如果您还需要编码 alpha (RGBA)，那么您需要这个：

```
unsigned long createRGBA(int r, int g, int b, int a)
{   
    return ((r & 0xff) << 24) + ((g & 0xff) << 16) + ((b & 0xff) << 8)
           + (a & 0xff);
} 
```

如果这是您需要的，请替换`unsigned long`为。`GLuint`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T08:55:09.220

如果你想构建一个字符串，你可以使用`snprintf()`：

```
const unsigned red = 0, green = 0x19, blue = 0x06;
char hexcol[16];

snprintf(hexcol, sizeof hexcol, "%02x%02x%02x", red, green, blue); 
```

这将构建字符串`001906" in`hexcol`，这就是我选择解释您的示例颜色的方式（当它应该是六位时只有四位数字）。

`GL_ALPHA`您似乎对预处理器符号被定义`0x1906`在 OpenGL 的头文件中这一事实感到困惑。这不是颜色，它是用于处理像素的 OpenGL API 调用的*格式说明符，因此他们知道预期的格式。*

如果您在内存中有一个 PNG 图像，则`GL_ALPHA`格式将*仅*对应于图像中的 alpha 值（如果存在），上述内容完全不同，因为它构建了一个字符串。OpenGL 不需要字符串，它需要一个内存缓冲区来保存所需格式的数据。

`[glTexImage2D()](http://www.opengl.org/sdk/docs/man/xhtml/glTexImage2D.xml)`有关其工作原理的讨论，请参见手册页。

# php - 从apache / php访问iis上的soap

> ID：14375160
> 
> 赞同：1
> 
> 时间：2013-01-17T08:48:11.530
> 
> 标签：php, apache, soap, windows-server-2008

我必须在 PHP 中为托管在 Windows / IIS 上的 Web 服务创建一个 SoapClient。当我从本地 IIS + PHP 运行脚本时，它可以工作。当我从 Apache 网络服务器的本地 XAMP 运行相同的脚本时，我总是得到相同的错误：

> 致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“https://online.wings.eu:8080/wsdl/IWingsWeb”加载

```
<?php
$url = 'https://online.wings.eu:8080/wsdl/IWingsWeb';

$options["connection_timeout"] = 25;
$options["location"] = $url;
$options['trace'] = 1;

$client = new SoapClient($url,$options);
print_r($client->__getFunctions());
?> 
```

在 Apache 上启用了 SOAP 和 openssl。我还可以访问托管在非 Windows 服务器上的其他服务。

这是我的 Apache 的问题还是托管 SOAP 服务器的 Windows 服务器的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:29:19.007

Apache 和 IIS 服务器之间的连接可能无法建立。您应该检查以下内容：

*   是否有任何防火墙、反恶意软件程序等可能会阻止 Apache 服务器的 8080（传出，而不是传入）端口？
*   是否有连接到服务器所需的任何 SSL 证书或密码（或两者）。如果是，您应该告诉 PHP 设置适当的标头。
*   您可能希望将默认 SoapClient 替换为直接使用 curl 的内容。在那里你可以设置一些 curl 参数，并检查是否关于实际错误。

像这样：

```
class SoapCurlWrapper extends SoapClient {
  protected function callCurl($url, $data, $action) {
     $handle   = curl_init();
     curl_setopt($handle, CURLOPT_URL, $url);
     curl_setopt($handle, CURLOPT_HTTPHEADER, Array("Content-Type: text/xml", 'SOAPAction: "' . $action . '"'));
     curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
     curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
     curl_setopt($handle, CURLOPT_SSLVERSION, 3);
     $response = curl_exec($handle);
     if (empty($response)) {
       throw new SoapFault('CURL error: '.curl_error($handle),curl_errno($handle));
     }
     curl_close($handle);
     return $response;
   }

   public function __doRequest($request,$location,$action,$version,$one_way = 0) {
       return $this->callCurl($location, $request, $action);
   }
 } 
```

请注意，PHP 的 SOAP 实现不会使用上面的包装器来下载 WSDL 文件（您必须手动完成），但您可以将它用于实际的 WS 调用，并且实际上可能会找出它失败的原因。

您可以像 any 一样使用上述类`SoapClient`，例如：

```
$oWS = new SoapCurlWrapper($location_of_wsdl_file,$parameters); 
```

# wso2 - WSO2 开发人员工作室 - CEP 存储桶

> ID：14375162
> 
> 赞同：0
> 
> 时间：2013-01-17T08:48:17.247
> 
> 标签：wso2, complex-event-processing, wso2developerstudio

有没有办法在使用 WSO2 Developer Studio 创建存储桶时为编写 EPL 查询提供一些语法或上下文帮助？WSO2 堆栈之外是否存在任何 EPL 查询编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:18:39.400

目前没有这样的工具可用于在 WSO2 堆栈之外编写 WSO2 CEP EPL 查询，但我们将在 WSO2 开发人员 Studio IDE 的未来版本中提供在 CEP 编辑器源视图中编写 EPL 查询的支持。

在此之前，您需要使用 CEP 编辑器设计视图并手动输入 EPL 查询。

/哈莎娜

# tomcat - 什么是 Javafx-Rich-Client-Applications 持续集成的最佳方式

> ID：14375163
> 
> 赞同：2
> 
> 时间：2013-01-17T08:48:18.537
> 
> 标签：tomcat, build, continuous-integration, hudson, javafx

嗯……我想知道

因此，假设我们有一个 Appache Tomcat 7，并且一个 Hudson 服务器已经启动并运行。Hudson 服务器已经在构建和部署目标应用程序的中间件和共享项目（它们是纯 maven 项目）。现在我唯一想要的是让 Hudson 部署已经构建的（由 Netbeans）JavaFX 富客户端，甚至更好（当然更难）构建、压缩、打包、签名并将富客户端部署到服务器。

我见过一些 beta maven 插件，它们承诺会做所有这些神奇的事情，但从未设法让它们运行起来。

所以欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:03:26.420

根据[JavaFX 部署指南](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)创建一个 ant 脚本。这将完成构建、压缩、打包、签名步骤。

我相信 NetBeans 在使用 JavaFX ant 任务的 ant 构建脚本上运行 - 因此您可以使用 NetBeans UI 为您的应用程序设置构建脚本，并且仍然从 Hudson 而不是在 NetBeans 内部执行生成的脚本。

JavaFX ant 脚本可以从 Hudson 触发 - 这里是[设置和过程的分步描述](http://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_98/jdtut_11r2_98_3.html)。

使用[Hudson scp 插件](http://wiki.hudson-ci.org/display/HUDSON/SCP+plugin)执行到服务器的部署。

如果您更喜欢使用 Maven 来定义您的构建，那么您可以尝试[JavaFX 的 zenjava maven 插件](http://www.zenjava.com/2012/11/24/from-zero-to-javafx-in-5-minutes/)。（我没有使用过那个插件，所以不能保证它的适用性）。如果你走那条路，Hudson 网站上有大量关于集成 Hudson 和 Maven 的文档。

我更喜欢[Jenkins](http://jenkins-ci.org/)而不是 Hudson，但你使用的可能没什么区别。

# javascript - // @sourceurl 在 firefox 的脚本标签上

> ID：14375164
> 
> 赞同：1
> 
> 时间：2013-01-17T08:48:19.373
> 
> 标签：javascript, node.js, eval

在 firefox 19 和 firebug 1.XI 尝试时遇到了一个奇怪的 bug `//@sourceurl`。

基本上我通过 dom 操作动态添加脚本标签，如下面的示例所示。这不起作用。

也许这是 ff 的一个限制，但我觉得奇怪的是它在 chrome 中工作而不是在 ff 中。
您能否**确认**这一点，您是否有任何**绕过**此错误的方法？

*Ps：我不想使用全局`eval()`，因为它在使用时会崩溃`document.write`*

```
<html>
    <head>

    <script type="text/javascript">
    var count=0;
    function addNewScriptToHead()
    {
            var newScriptElem;
            var newScriptText;

            newScriptElem = document.createElement('script');
            newScriptElem.setAttribute('type', 'text/javascript');
            newScriptElem.setAttribute('id', '' + count);
            newScriptElem.text= 'console.log("Yay !");//@ sourceURL=root/test'+count++ +'.js';

            document.body.appendChild(newScriptElem);
    };
    </script>
    </head>

    <body>
            <button onclick="addNewScriptToHead()">add script</button><br><br>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T05:59:02.970

实验使我相信以下几点：

1.  从 20.0 版本开始，FF 仍然不`//@ sourceURL`直接在其内置的 Web 控制台中提供支持。

2.  `//@ sourceURL`确实可以与 FF 中的 Firebug 插件一起使用，但并不完全符合预期/希望。

    A. 它*仅*适用于`eval`. 对于原始问题中的附加脚本节点，它根本不起作用。

    B. 错误会有一个行号和URL，你可以点击
    错误查看代码行。但是，`console.log`似乎没有
    受到影响，并且没有显示行号或 URL。

3.  不建议在 FF 的 Web 控制台中测试此功能。至少在某些时候，我得到的结果与直接在 HTML 中测试不同。

# python - 使用子进程模块的字符串参数

> ID：14375165
> 
> 赞同：1
> 
> 时间：2013-01-17T08:48:27.067
> 
> 标签：python, python-3.x

我正在使用 Python 来简化[Maven](http://maven.apache.org/)中的一些命令。我有这个`mvn test`以调试模式调用的脚本。

```
from subprocess import call
commands = []
commands.append("mvn")
commands.append("test")
commands.append("-Dmaven.surefire.debug=\"-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000 -Xnoagent -Djava.compiler=NONE\"")
call(commands) 
```

问题在于`-Dmaven.surefire.debug`接受必须在配额中的参数的行，我不知道如何正确地做到这一点。当我打印这个列表时它看起来很好，但是当我运行我得到的脚本时`Error translating CommandLine`，调试行永远不会执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:01:12.383

只有执行命令的 shell 才需要配额。

如果您直接从外壳进行上述调用，您可能会这样做

```
mvn test -Dmaven.surefire.debug="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000 -Xnoagent -Djava.compiler=NONE" 
```

通过这些`"`标志，您（简单地说）告诉外壳忽略其中的空格。

使用参数调用程序

```
mvn
test
-Dmaven.surefire.debug=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000 -Xnoagent -Djava.compiler=NONE 
```

所以

```
from subprocess import call
commands = []
commands.append("mvn")
commands.append("test")
commands.append("-Dmaven.surefire.debug=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000 -Xnoagent -Djava.compiler=NONE")
call(commands) 
```

应该是要走的路。

# webstorm - 如何在 webstorm 中进行查找和导航？

> ID：14375166
> 
> 赞同：0
> 
> 时间：2013-01-17T08:48:28.760
> 
> 标签：webstorm

Webstorm IDE中查找和导航的快捷键是什么？我发现它在这个视频中被使用（[http://youtu.be/IfUyUeYHffk?t=51s](http://youtu.be/IfUyUeYHffk?t=51s)）。 ![在此处输入图像描述](../Images/e69156750abf2b49b5fa857df093ae4a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:28:05.907

It's a custom plugin: **AceJump**

[http://plugins.intellij.net/plugin?pr=webide&pluginId=7086](http://plugins.intellij.net/plugin?pr=webide&pluginId=7086)

Install from **Settings | Plugins**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:53:40.157

还有另一种实现：

[http://plugins.jetbrains.com/plugin/?idea_ce&pluginId=7163](http://plugins.jetbrains.com/plugin/?idea_ce&pluginId=7163)

![跳转到字符](../Images/b92fb3dcc1a934e43768da5b8edd3e0e.png) ![跳切](../Images/18e3082f8e8c5b6e1e4e9ab9760bb57a.png)

# liferay - 获取用户特定的网络内容

> ID：14375169
> 
> 赞同：2
> 
> 时间：2013-01-17T08:48:43.560
> 
> 标签：liferay, webcontent

我想问一下 liferay 中是否有任何 Java API 调用返回由特定用户上传的 Web 内容。

例如，我有一个用户上传了一些内容，我想在 portlet 中显示这些内容，我该如何通过 java 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:36:36.357

如果您专门讨论在 portlet 中显示的 Web 内容，`Web-content Display`那么您可以使用API 来根据用户获取内容。 在 Liferay 6.0 之前，Web 内容被称为，因此 API 名称没有改变。`JournalArticleService``JournalArticleLocalService`
[`JournalArticle`](https://github.com/liferay/liferay-portal/blob/master/portal-impl/src/com/liferay/portlet/journal/model/impl/JournalArticleModelImpl.java#L73)

例如：

可以使用`DynamicQuery`API​​，如下：

```
long userId = 10987L; // ofcourse you need to find this

DynamicQuery dynamicQuery = JournalArticleLocalServiceUtil.dynamicQuery();

dynamicQuery.add(RestrictionsFactoryUtil.eq("userId", userId));

int startOfList = 0;
int endOfList = 1000;
// if you want all the JournalArticle retrieved then use:
// int endOfList = QueryUtil.ALL_POS;

// this will retrieve the list of webcontents
List<JournalArticle> articles = (List<JournalArticle>) JournalArticleLocalServiceUtil.dynamicQuery(dynamicQuery, startOfList, endOfList); 
```

上面的代码将检索所有`JournalArticle`s，因此您将获得单个 Web 内容的所有版本，因为所有这些版本都存储在同一个`JournalArticle`表中。因此，为此您可以为, , , ,等`dynamicQuery`字段添加条件。`version``id``resourcePrimKey``articleId``groupId``companyId`

或者，如果您有更复杂的需求，您可以在 liferay 中创建一个[custom-sql-finder](http://kamalkantrajput.blogspot.in/2009/07/how-to-use-custom-sql-in-liferay.html)来从 Liferay DB 表的任意组合中获取所需的数据。

* * *

如果您谈论的是博客、Wiki、文件、Web 内容等中的内容，则可以使用它们各自的内容`*LocalServiceUtil`，也可以使用它们`AssetEntryLocalServiceUtil`来获取特定用户的资产。

因此，`AssetEntryLocalServiceUtil`您也可以使用`DynamicQuery`如上所示的 API。代码可能不一样，但会遵循相同的行。

* * *

`DynamicQuery`您可以从此[博客](http://www.liferay.com/web/minhchau.dang/blog/-/blogs/using-the-dynamic-query-api)了解更多关于API 的信息。

# php - 如何在 HybridAuth 中配置 LinkedIn 的应用程序？

> ID：14375171
> 
> 赞同：2
> 
> 时间：2013-01-17T08:48:56.900
> 
> 标签：php, oauth-2.0, linkedin, hybridauth, hybridauthprovider

我声明我已经使用 LinkedIn 创建了一个应用程序，并且我拥有该应用程序的密钥和密钥。

在 HybridAuth (config.php) 的配置文件中插入密钥并尝试使用我的 LinkedIn 帐户登录后，HybridAuth 向我返回以下错误：

*“错误！身份验证失败。用户已取消身份验证或提供商拒绝连接。*

原始错误消息：身份验证失败！LinkedIn 返回了一个无效的令牌。”

可能是什么问题呢？

这是与 LinkedIn 有关的配置：

```
 "LinkedIn" => array ( 
            "enabled" => true,
            "keys"    => array ( "key" => "************", "secret" => "****************" ) 
        ), 
```

# iphone - AFHTTPRequestOperation 在待机模式后不起作用

> ID：14375173
> 
> 赞同：2
> 
> 时间：2013-01-17T08:49:04.760
> 
> 标签：iphone, objective-c, afnetworking

我正在开发一个上传多个文件的应用程序。对于上传，我使用`AFHTTPRequestOperation`. 它成功工作，但如果我锁定并解锁屏幕后，它会停止上传文件。

我的上传文件代码在这里

```
NSUserDefaults *defaultUser = [NSUserDefaults standardUserDefaults];
NSString *userId = [defaultUser stringForKey:@"UserId"];

AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",UploadURL,userId]]];
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:nil];
NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:nil parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData: data name:@"f" fileName:[NSString stringWithFormat:@"%d_image.jpeg",rand()] mimeType:@"image/jpeg"];
    }];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"error: %@", [operation error]);
        if(error.code == -1001){
        UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"Error!"
                                                          message:@"The request timed out." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [myAlert show];
        }
    }];

[operation start]; 
```

谁能给我处理这种情况的建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T18:58:40.657

(1) 添加此代码：

```
[operation setShouldExecuteAsBackgroundTaskWithExpirationHandler:^{
    // Handle iOS shutting you down (possibly make a note of where you
    // stopped so you can resume later)
}]; 
```

(2) 改变这一行：

```
[operation start]; 
```

至

```
[client enqueueHTTPRequestOperation:operation]; 
```

(3) 保持对您的 AFHTTPClient 的强引用（这通常是为具有单例模式的 AFHTTPClient 完成的），这样您的操作就不会被释放

# javascript - 如何使用脚本打开文件对话框或浏览文件窗口？

> ID：14375174
> 
> 赞同：1
> 
> 时间：2013-01-17T08:49:14.087
> 
> 标签：javascript, html, file, input, file-browser

我喜欢显示图像或 html 的任何元素并为其初始化高度。当我在像这样的图像后面的 html 中使用文件类型的输入时：

```
<img src="image.png">
<input type="file" name="image" id="booksimage" style="opacity: 0"> 
```

所以输入元素消失了，当我点击图像文件打开对话框打开但它在正常输入元素的高度上工作。当我将输入元素的高度设置为 100px 时，它的工作量不会超过。

当我看到 html 的问题时，我决定使用 Javascript 或 Jquery 来解决问题，我搜索并找到了一些类似的问题，例如：

[如何使用 javascript 打开文件/浏览对话框？](https://stackoverflow.com/questions/6463439/how-to-open-a-file-browse-dialog-using-javascript)

但解决方案是针对特殊浏览器的，firefox 不支持。有没有其他方法可以通过单击图像打开文件浏览器对话框？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:57:04.743

```
$('img').click(function() {
    $('input[type="file"]').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:54:37.783

不幸的是，浏览器不允许打开浏览文件对话框，除非点击带有*type="file"的**输入*标签触发特定事件。有一些方法可以解决这个问题，但它不一定适用于你的每个浏览器有。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T19:45:12.597

这可能晚了几年，但这是一种无需任何 Javascript 的方式，它也与任何浏览器兼容。

```
<label>
  Open file dialog
  <input type="file" style="display: none">
</label> 
```

如果您发现问题，您可能需要使用指向输入的`for`属性。`label``id`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:26:56.057

```
<style type="text/css">
#file-image {
    position: relative;
    width: 40px;
    height: 40px;
    overflow: hidden;
}

#file-image input {
    height: 100%;
    position: absolute;
    top: 0;
    right: 0;
    -moz-opacity: 0;
    filter: alpha(opacity: 0);
    opacity: 0;
}

</style>
<div id="file-image">
    <input type="file">
    <img src="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" width="40" height="40" />
</div> 
```*

# android - 代表 iOS 和 Android 视频的最佳选择

> ID：14375175
> 
> 赞同：4
> 
> 时间：2013-01-17T08:49:14.850
> 
> 标签：android, c++, opengl-es, java-native-interface

我正在为 iOS 和 Android 开发一个应用程序，以便在两台设备之间进行视频通话。这个想法是为两个平台开发一个 c++ 库，并以相同的方式集成通信和显示部分。出于兼容性原因，我使用 OpenGL 来表示视频，并使用 FFMPEG 来编码通信，但在其他一些问题（如[这里](https://stackoverflow.com/questions/5666513/what-is-the-best-method-to-render-video-frames)）中，我已经读到它不是 Android 的最佳选择。虽然，我已经意识到在 iOS 上，opengl 方法比我测试过的本机方法更快。那么问题来了：对于Android，它是OpenGL的替代品，但使用JNI？有没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T13:57:38.960

您可以使用 OpenGL ES，这是一种用于嵌入式设备的 OpenGL 规范。此版本还针对移动设备进行了优化。OpenGL ES 适用于 Android 和 iOS。

*   [http://developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)
*   [https://developer.apple.com/opengl-es/](https://developer.apple.com/opengl-es/)

在实施此问题时，以下 SO 问题可以使您朝着正确的方向前进：

*   [使用 NDK、OpenGL ES 和 FFmpeg 的 Android 视频播放器](https://stackoverflow.com/questions/4676178/android-video-player-using-ndk-opengl-es-and-ffmpeg)
*   [安卓。如何在 Surface（OpenGL）上播放视频](https://stackoverflow.com/questions/9375598/android-how-play-video-on-surfaceopengl)
*   [Android中的OpenGL用于视频显示](https://stackoverflow.com/questions/3315966/opengl-in-android-for-video-display)
*   [使用opengles，android播放视频](https://stackoverflow.com/questions/2006094/play-video-using-opengles-android)
*   [opengl es(iphone) 从文件渲染](https://stackoverflow.com/questions/13738110/opengl-esiphone-render-from-file)
*   [https://discussions.apple.com/message/7661759#7661759](https://discussions.apple.com/message/7661759#7661759)

# image - MediaWiki 升级破坏了文件前缀，但旧图像有效

> ID：14375177
> 
> 赞同：2
> 
> 时间：2013-01-17T08:49:22.150
> 
> 标签：image, mediawiki

[是否按照简单的更新说明](http://www.mediawiki.org/wiki/Manual%3aUpgrading#Can_my_wiki_stay_online_while_it_is_upgrading.3F)将 MediaWiki 从 1.15.1 升级到 1.20.2 （基本上是新安装，复制旧的 LocalSettings.php，更新脚本并复制图像）。现在奇怪的是所有 File: 前缀都不起作用。相反，图像的内部链接是“文件：图像名称”URL，而不是“http://mediawiki 地址/index.php/文件：图像名称”。

其他人得到这个。假设旧的 LocalSettings.php 有问题。

在未修复问题的情况下运行 refreshLinks 和 refreshImageMetadata 维护脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:52:03.833

在评论中，您写道您已`file:`添加到[`$wgUrlProtocols`](http://www.mediawiki.org/wiki/Manual%3a%24wgUrlProtocols). 这很可能是引发问题的原因。

MW 1.15 和 1.20 之间的解析器似乎发生了一些变化，因此它现在被解析`file:whatever`为外部链接（因为它与`file:`您在 中定义的前缀匹配`$wgUrlProtocols`），即使它位于方括号内。

显而易见的解决方法是将`$wgUrlProtocols`条目从更改`file:`为，`file://`以便它仅在斜杠存在时才匹配（根据标准文件：URL 语法，它们应该是）。由于您的 wiki 文件名可能不太可能以双斜杠开头，因此它们不应匹配这个更具体的前缀。

也就是说，这仍然可以被认为是 MediaWiki 中的一个错误。如果还没有，您可能需要[提交一份关于它的错误报告](https://bugzilla.wikimedia.org/)。（编辑：看起来[Mark A. Hershberger 已经提交了一份。](https://bugzilla.wikimedia.org/show_bug.cgi?id=44011)）

# amazon-web-services - 带有 Composer 的 AWS PHP 开发工具包 - 缺少 sdk.class.php

> ID：14375180
> 
> 赞同：3
> 
> 时间：2013-01-17T08:49:28.233
> 
> 标签：amazon-web-services, composer-php

环境：MAC - Mountain Lion 我正在尝试将 AWS PHP SDK 用于项目。我遵循了亚马逊网站的 SDK 安装说明（通过 composer）——使用以下[链接到 AWS](http://docs.aws.amazon.com/awssdkdocsphp2/latest/gettingstartedguide/sdk-php2-installing-the-sdk.html#sdk-php2-installing-via-composer)

我创建了文件 compser.json。内容：

```
{
  "require": {
      "aws/aws-sdk-php": "2.*"
  }
} 
```

从命令行，我输入：

```
curl -s "http://getcomposer.org/installer" | php 
```

然后

```
php composer.phar install 
```

出现了一个新目录“供应商”，其中自动安装了 AWS SDK 2。

问题是我期待（根据我试图遵循的代码示例），我期待看到以下文件：

```
vendor/aws/aws-sdk-for-php/sdk.class.php 
```

但它不存在。这可能是引用旧版本的 SDK 吗？

由“php composer.phar install”命令自动生成的：vendor/autoload.php 如下所示：

```
<?php
// autoload.php generated by Composer
require_once __DIR__ . '/composer' . '/autoload_real.php';
return ComposerAutoloaderInit25a7292f83dd9a43a459f6c2e51befba::getLoader(); 
```

文件：sdk.class.php 是否可能对 SDK 的版本 1 有效，但对版本 2 无效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:57:18.407

完全正确。`sdk.class.php`是 SDK 1.x 中存在的文件，但 2.x 中不存在。

正确的说明在[SDK2 README](https://github.com/aws/aws-sdk-php/blob/master/README.md#installing-the-sdk)中。

# certificate - How to create a certificate into a PKCS12 keystore with keytool?

> ID：14375185
> 
> 赞同：25
> 
> 时间：2013-01-17T08:49:48.393
> 
> 标签：certificate, ssl-certificate, keytool, pkcs#12

I wanted to create a certificate into a PKCS12 keystore format with keytool program.

The keystore has extension `.pfx`.

How do I achieve this?

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-17T08:57:45.380

If the keystore is PKCS12 type (`.pfx`) you have to specify it with `-storetype PKCS12` (line breaks added for readability):

```
keytool -genkey -alias <desired certificate alias> 
    -keystore <path to keystore.pfx>
    -storetype PKCS12 
    -keyalg RSA 
    -storepass <password> 
    -validity 730 
    -keysize 2048 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-25T06:45:52.167

Additional answer to the *key of the question*.

With JDK 8 (*1.8.0_121-b13*) you don't get an exception if you remove `-storetype pkcs12` but the `keytool` creates a `JKS` keystore instead, and the `.pfx` extension is ignored.

It also asks for a `-keypass mykeypassword` which the `keytool` doesn't support for PKCS12\.

```
%JAVA_HOME%/bin/keytool -genkeypair -alias mykey -keyalg EC -dname "cn=CN, ou=OU, o=O, c=C" -validity 365 -keystore keystore.pfx -keypass mykeypassword -storepass mystorepassword -v

(translated)
Generating keypair (Type EC, 256 Bit) and self-signed certificate (SHA256withECDSA) with a validity of 365 days
    for: CN=CN, OU=OU, O=O, C=C
[keystore.pfx saved] 
```

List the contents:

```
%JAVA_HOME%/bin/keytool -list -keystore keystore.pfx -storepass mystorepassword 

(translated)
Keystore-Type: JKS
Keystore-Provider: SUN

Keystore contains 1 entry.

mykey, 25.04.2017, PrivateKeyEntry,
Certificate-Fingerprint (SHA1): A1:6C:5F:8F:43:37:1A:B6:43:69:08:DE:6B:B9:4D:DB:05:C9:D5:84 
```

You see it's a Java keystore.

The next problem is, that even if you specify `-storetype pkcs12` when you `-list` the keystore, the keytool will still display the store as a JKS keystore!

Let's try that:

```
%JAVA_HOME%/bin/keytool -genkeypair -alias mykey -keyalg EC -dname "cn=CN, ou=OU, o=O, c=C" -validity 365 -storetype pkcs12 -keystore keystore.pkx -keypass mykeypassword -storepass mystorepassword -v

(translated)
Warning: No support for different keystore and key password for PKCS12 keystores. The value of -keypass will be ignored.
Generating keypair (Type EC, 256 Bit) and self signed certificate (SHA256withECDSA) with a validity of 365 Days
        für: CN=CN, OU=OU, O=O, C=C
[keystore.pkx saved] 
```

Now list the contents:

```
%JAVA_HOME%/bin/keytool -list -keystore keystore.pkx -storepass mystorepassword

(translated)
Keystore-Type: JKS // ??
Keystore-Provider: SUN

Keystore contains 1 entry

mykey, 25.04.2017, PrivateKeyEntry,
Certificate Fingerprint (SHA1): EA:C2:36:C6:55:69:CB:32:22:C7:14:83:67:47:D2:7E:06:8E:13:14 
```

# entity-framework - 实体框架 - 删除 N:N 关系

> ID：14375186
> 
> 赞同：1
> 
> 时间：2013-01-17T08:49:48.530
> 
> 标签：entity-framework, entity-framework-4

我有以下课程

```
public class ObjectA{
   private List<ObjectB> list;    
} 
```

`ObjectA`并且`ObjectB`处于 N:N 关系。

我只想删除关系并使用

```
 while (objectA.list.Any())
        objectA.list.Remove(objectA.list.First()); 
```

*   列表是关系表 -

    ```
    List<ObjectAobjectB> 
    ```

我得到

> *操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新的关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。*

**编辑：**更新模型定义
我的模型中有三个表：
* ClassA - SchemaA，
* ClassAClassB - SchemaA，
* ClassB - SchemaB，

在我的上下文（和 edmx）中，我只有模式 A（ClassA 和 ClassAClassB）
，因为它与关系表是 1:N。

这是从 edmx 生成的代码。

```
public partial class ClassA:DomainEntity
{
    ....
    public virtual ICollection<ClassB>  ClassAClassB { get; set; }
} 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:58:44.967

如果您与不可为空的 FK 具有一对多关系，您还必须删除 ObjectB，因为从导航属性中删除它只会删除关系（使 FK 为空），但不会删除 ObjectB 本身。尝试这个：

```
 while (objectA.list.Any()) {
     var b = b;
     objectA.list.Remove(b);
     entities.DeleteObject(b);    
 } 
```

# php - 一张一张上传图片

> ID：14375190
> 
> 赞同：0
> 
> 时间：2013-01-17T08:49:57.047
> 
> 标签：php, jquery, html, css

大家好，我这里有代码，可让您选择图像并立即预览。但是我在逐个选择图像时遇到问题，因为当我转到下一页时，我只会得到我选择的最后一张图像。如何将所有一个一个选择的图像保存在一个数组中并将其传递到下一页。当您一次选择多个图像但随后一张一张地选择最后一张图像时，它会起作用。

```
 <div id='upload' style="margin-left:5px;border-radius:5pt;background:#fff;width:710px;height:230px;color:white;font-size:11pt;font-weight:bolder"> 
    <div id="list" style="float:left;width:700px;height:auto"></div>
    </div>
    <div style='margin-top:15px;margin-left:20px;float:left;width:700px;'>
        <form method="post" action="index.php?pg=preview" enctype="multipart/form-data">
            <input type="file" id="files" name="files[]" multiple />
    <input id="but" type="submit" name="cancel" value="Cancel" onclick="history.go(-1)"style="margin-left:225px" ></input>
            <input id="but" type="submit" name="next" value="Next"></input>
            </form>
        </div>
    </div>  
<script>
function check()
{
    $("#show").show();
    $("#show").load('check_image.php');
}
    var x = 0;
    var y = 0;

    function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

    var name = files.item(0).name;
    //alert(name);
    if(x > 9)
    {
        alert('Total of 10 Images are acceptable');
    }

    else
    {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<div id="image"><img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/></div>'].join('');
          document.getElementById('list').insertBefore(span, null); 

        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);

    }
    }

    y = i + x;
    x = 0 + y;
    i = 0;

}   
  document.getElementById('files').addEventListener('change', handleFileSelect, true);
</script>
<?php
$photo[] = '';
for($i=0; $i<count($_FILES['files']['name']); $i++)
{

if(isset($_FILES["files"]["name"]))
{
    if ((($_FILES["files"]["type"][$i] == "image/gif")||
    ($_FILES["files"]["type"][$i] == "image/jpeg")||
    ($_FILES["files"]["type"][$i] == "image/jpg")||
    ($_FILES["files"]["type"][$i] == "image/png")||
    ($_FILES["files"]["type"][$i] == "image/pjpeg"))&&($_FILES["files"]["size"][$i] < 10000000))
    {
        if ($_FILES["files"]["error"][$i] > $i)
        {
            echo "Error: ".$_FILES["files"]["error"][$i]."<br />";
        }
        else
        {
            move_uploaded_file($_FILES["files"]["tmp_name"][$i],"pics/".$_FILES["files"]["name"][$i]);
            $photo[$i] = "pics/".$_FILES["files"]["name"][$i];

        }
    }
    else
    {

        $photo[$i]="";
    }
}

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:24:48.083

您可以像这样修改您的代码：

```
<form method="post" action="index.php?pg=preview" enctype="multipart/form-data">
$picture_count = 10;
for($i = 0; $i<10;++$i){?>
<input type="file" id="files" name="files[]" 0) echo 'style="display:none;"'?>/> 
```

```
<input id="but" type="submit" name="cancel" value="Cancel" onclick="history.go(-1)"style="margin-left:225px" ></input>
<input id="but" type="submit" name="next" value="Next"></input>
</form> 
```

```
<script>
function check() {
$("#show").show();
$("#show").load('check_image.php');
}
var x = 0;
var y = 0;
var j = 0; 
```

```
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object 
```

```
// Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) { </p>

var name = files.item(0).name;
    //alert(name);
    if(x > <?php echo $picture_count-1;?>)
{
        alert('Total of 10 Images are acceptable');
    } </p>

else
{ 
```

```
// Only process image files.
      if (!f.type.match('image.*')) { 
        continue;
  } 
```

```
var reader = new FileReader(); 
```

```
// Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['&lt;div id="image"&gt;&lt;img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>&lt;/div&gt;'].join('');
          document.getElementById('list').insertBefore(span, null); 
          document.getElementById('files'+j).style.display = 'none';
          document.getElementById('files'+(++j)).style.display = 'block';
        };
      })(f); </p>

// Read in the image file as a data URL.
      reader.readAsDataURL(f);</p>

 } 
    } 
```

```
y = i + x;
    x = 0 + y;
    i = 0; 
```

}

```
document.getElementById('files').addEventListener('change', handleFileSelect, true);
</script> 
```

此代码会将所有允许的文件上传到服务器。

$picture_count - 上传图片的最大数量。

但是，我建议您使用 jquery.uploadify 之类的脚本，它更方便，并且适用于许多浏览器

# java - 到 localhost 的 HTTP 连接失败

> ID：14375191
> 
> 赞同：2
> 
> 时间：2013-01-17T08:49:59.690
> 
> 标签：java, rest, jersey, jetty, ipv6

我有一个向 Jetty 服务器发出 REST 请求的 Java 应用程序。

如果我使用真实的 DNS 名称连接到服务器，它可以工作，但是当我想向 localhost 上的本地测试实例发出请求时出现以下异常：

```
Caused by: com.sun.jersey.api.client.ClientHandlerException: java.io.IOException: Stream closed
    at com.sun.jersey.api.client.ClientResponse.hasEntity(ClientResponse.java:480) ~[jersey-client-1.14.jar:1.14]
    at com.sun.jersey.client.apache.ApacheHttpClientHandler.handle(ApacheHttpClientHandler.java:182) ~[jersey-apache-client-1.14.jar:1.14]
    ... 12 common frames omitted
Caused by: java.io.IOException: Stream closed
    at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:162) ~[na:1.7.0_05]
    at java.io.BufferedInputStream.reset(BufferedInputStream.java:435) ~[na:1.7.0_05]
    at java.io.FilterInputStream.reset(FilterInputStream.java:226) ~[na:1.7.0_05]
    at java.io.FilterInputStream.reset(FilterInputStream.java:226) ~[na:1.7.0_05]
    at com.sun.jersey.api.client.ClientResponse.hasEntity(ClientResponse.java:464) ~[jersey-client-1.14.jar:1.14]
    ... 13 common frames omitted 
```

浏览器中的请求和我的 REST 工具工作。

当我使用 localhost 的 IPv6 地址时，我让它工作了：`https://[0:0:0:0:0:0:0:1]/`

它总是适用于本地主机。是否有可能某些 Java 或 Windows 7 更新更改了默认设置，因此改为使用 IPv6？

我该怎么做才能使 localhost 再次工作，我是否需要担心当其他 PC 想要连接到我们的真实服务器时这可能会导致问题？

我想兼容 IPv4 和 IPv6。

编辑：这是我的主机文件（未编辑）

```
# Copyright (c) 1993-2009 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
#   127.0.0.1       localhost
#   ::1             localhost 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:06:02.433

所以我终于找到了问题所在。显然 Skype 使用端口 80 和 443 作为替代端口。一旦我退出 Skype，一切正常。

[WebApp 可通过 localhost 访问，但不能通过 127.0.0.1](https://stackoverflow.com/questions/9365431/webapp-accessible-via-localhost-but-not-127-0-0-1)

它可能与 IPv6 localhost 地址一起使用，因为 Skype 没有绑定到该地址。

# php - 如何获取选定行的列值

> ID：14375197
> 
> 赞同：0
> 
> 时间：2013-01-17T08:50:39.707
> 
> 标签：php, mysql

这是我的代码的摘录。我已删除`<table>`,`<tr>`语句和尖括号，因为该网站似乎对其进行了解释，而不是按字面意思显示它们。

```
while ($row = mysql_fetch_row($result)) {    
    foreach($row AS $column) {   
           echo $column; 
    }

    echo '<a href=\"form.php\"> UPDATE </a>';
    echo '<a href=\"delete.php\"> DELETE </a>';
} 
```

现在，当用户单击更新时，所选行的第一列的值应作为查询字符串传递。

那么，我应该在 href 语句中添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:53:13.480

尝试这个

```
while ($row = mysql_fetch_row($result)) {    
    $i = 0;
    $querystring = "";
    foreach($row AS $column) {   
          echo $column; 
          if($i == 0){
              $querystring = $column;             
           }
          $i++;
    }
    $querystring = "?q=".$querystring;  
    echo '<a href=\"form.php$querystring\" > UPDATE </a>';
    echo '<a href=\"delete.php$querystring\"> DELETE </a>';
} 
```

我希望它对你有帮助。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:55:52.227

Reema，下面的代码足以获取第一列

```
 while($row=mysql_fetch_row($result))
{
$first_column = $row[0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:53:42.197

```
while($row=mysql_fetch_row($result))  
{    
  echo "<a href=\"form.php?id=.$row['id'].\"> UPDATE </a>";
  echo "<a href=\"delete.php?id=.$row['id'].\"> DELETE </a>";
} 
```

这里id是数据库字段id的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:57:46.337

[mysql_fetch_row()](http://php.net/manual/en/function.mysql-fetch-row.php)返回一行作为数字索引数组

```
$row=mysql_fetch_row($result);

echo "<a href=\"form.php?param=$row[0]\"> UPDATE </a>"; 
```

不要使用`mysql_`扩展，尝试更新的替代品，如[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T08:59:06.593

既然你使用`mysql_fetch_row`了，你可以直接使用那个函数返回的索引数组

```
while($row=mysql_fetch_row($result))  
{    
    $firstColumn = $row[0];
    echo "<a href='form.php?firstColumn=$firstColumn'> UPDATE </a>";
}
echo "<a href='delete.php'> DELETE </a>"; 
```

假设 DELETE 不需要第一列，因此也不需要重复。

# xcode - iOS模拟器不显示情节提要中的标签

> ID：14375199
> 
> 赞同：0
> 
> 时间：2013-01-17T08:50:48.193
> 
> 标签：xcode, ios-simulator

iPhone 模拟器没有正确显示某些标签。有没有其他人经历过这个？有谁知道如何修理它？我还注意到，如果我拖得太快，xcode 会随机崩溃......

谢谢

![iOS模拟器截图](../Images/76a763a22de815752ec3dda6c7f0f89d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T16:29:03.500

我最近遇到了这个问题，这是一个奇怪的错误。无论出于何种原因，我在 Storyboard 中看到的 x/y 轴都偏离了。所以我的`UILabel`和`UITextfield`我都被显示在我的 NavigaionBar 后面。我在 Xcode 右侧窗格的大小检查器中调整了 x/y 值，它运行良好。这些值应该是故事板对象位置的准确表示。

不确定快速拖动，听起来像是一个现在可以修复的 Xcode 问题。

# mobile - 基于事件的移动服务器交互 - 同步/冲突解决

> ID：14375200
> 
> 赞同：0
> 
> 时间：2013-01-17T08:50:48.263
> 
> 标签：mobile, synchronization, identity, uniqueidentifier

正如标题所述，我计划使用对项目（添加/删除/更新）进行的用户操作的事件（这是必需的）。现在这是我试图回答的一些问题，我感觉有人已经偶然发现了相同的问题集：

1）**对象ID生成服务器与客户端？**如果移动客户端离线 - 他需要为新创建的对象生成一些 ID - 以便对该对象的后续操作可以对其进行一些参考。最好的方法是什么？生成一些本地 ID，然后分配在服务器上生成的全局 ID（一旦对象被推送到服务器）。我们的架构团队认为这是正确的方法，但我个人看不到它的好处。特别是如果用户将登录其他移动设备并下载所有事件 - 他应该收到什么 ID - 全局或全局 + 本地。这种方法比仅在客户端生成类似于 UUID（时间 + 硬件 ID + 用户 ID + 递增 ID/随机 ID）的内容更好吗？

2）**处理多个移动/网络客户端的正确方法是什么**（用户可以登录单个或多个客户端）。这里的第一个问题是**冲突解决**- 这里我们的对象有版本 - 以支持乐观锁定 - 所以第一个成功提交的人就是赢家。这似乎很清楚。另一个问题是**同步**. 理想情况下，最好只将更新信息下载到客户端。这样我们就需要向客户发送他不知道的事件。为此，显然我们需要信息——哪个事件来自哪个设备。这是将每个事件的 sourceId 发送到服务器的另一点。但是我们如何处理 2 个或更多的网络会话呢？我是 WEB 编程的菜鸟，但我们希望是无状态的，这是否意味着浏览器上的某些脚本应该生成某种 sessionID，它将用作 web 客户端上生成的所有事件的 sourceID 并立即发送到服务器?

有没有人有类似的任务？您使用了哪些解决方案/遇到了哪些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:42:01.760

你没有提到你使用的是什么类型的后端。如果您使用的是 Oracle 后端，则应该查看 Database Mobile Server (DMS)：

[http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html](http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html)

它为您处理数据同步，包括冲突解决。您的移动应用程序将从本地数据库读取和写入，DMS 处理其余部分。它还处理支持的客户端平台上的设备/应用程序管理。

至于1）中描述的问题，您似乎在询问是否应该在客户端或服务器端创建唯一标识符。如果对您的架构没有更完整的了解，我看不到任何一种明显的优势。在任何情况下，无论您决定采用哪种方式，DMS 都可以将唯一标识符从一侧传播到另一侧。

希望对您有所帮助，祝您项目顺利。

-- Eric Jensen，甲骨文产品经理

# iphone - 内存管理问题

> ID：14375201
> 
> 赞同：0
> 
> 时间：2013-01-17T08:50:56.317
> 
> 标签：iphone, ios, objective-c

我的项目中有这个类的标题：

```
 @interface VideoItem : NSObject <NSCoding> {
        NSString *idStr;
        NSString *name;
        NSString *link;
    }

    -(id)initWithVideoItem:(VideoItem*)video;

    @property (nonatomic, retain) NSString *name;
    @property (nonatomic, retain) NSString *link;
    @property (nonatomic, retain) NSString *idStr;

    @end 
```

这是工具：

```
@implementation VideoItem
@synthesize name,link,idStr;

-(id)initWithVideoItem:(VideoItem*)video{
    if (self = [super init]) {
        self.name = video.name;
        self.link = video.link;
        self.idStr = video.idStr;
    }
    return self;
}

#pragma mark 
#pragma mark NSCoder

- (void)encodeWithCoder:(NSCoder *)encoder{
    [encoder encodeObject:self.name forKey:@"video_name"];
    [encoder encodeObject:self.link forKey:@"video_link"];  
    [encoder encodeObject:self.idStr forKey:@"video_id"];   
    [encoder encodeObject:self.imgUrl forKey:@"video_img"];
    [encoder encodeObject:self.viewCount forKey:@"video_views"];
    [encoder encodeObject:self.artist forKey:@"video_artist"];
    [encoder encodeObject:self.timeStr forKey:@"video_timestr"];    
    [encoder encodeInt:self.seconds forKey:@"video_secondes"];
    [encoder encodeInt:self.rating forKey:@"video_rating"];
    [encoder encodeObject:self.pubDate forKey:@"pubDate"];

}

- (id)initWithCoder:(NSCoder *)decoder {
    if(self = [super init]){
        self.name = [decoder decodeObjectForKey:@"video_name"];
        self.link = [decoder decodeObjectForKey:@"video_link"]; 
        self.idStr = [decoder decodeObjectForKey:@"video_id"];
    }
    return self;
}

@end 
```

我想知道在这种情况下我是否需要添加`dealloc`方法并释放字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:53:39.203

使用 ARC 并忘记与内存管理相关的任何问题。甚至苹果也鼓励尽可能使用 ARC。如果您将此作为一项新开发，我建议您使用 ARC。

如果您不想使用 ARC，则需要实现 dealloc 并释放您的成员变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:54:12.370

是的，您应该释放字符串，因为在使用保留对象的属性时。

```
- (void)dealloc {
   [idStr release];
   [name release];
   [link release];
   [super dealloc];
} 
```

通常你会在 init 中复制对象，这是一种更好的方法，因为原始对象可以被保存地编辑或释放。

```
-(id)initWithVideoItem:(VideoItem*)video{
    if ((self = [super init])) {
        name = [video.name copy];
        link = [video.link copy];
        idStr = [video.idStr copy];
    }
    return self;
} 
```

由于该`copy`方法返回一个保留对象，因此您希望跳过该属性，因为这会增加保留计数。

另一方面：私有ivar的objective-c约定应该以an开头，`_`以使其更明显地表明它们不是属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:02:48.107

您必须编写 - (void)dealloc 方法，因为您要保留变量。并在此方法中释放这些变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:55:26.557

使用它，释放所有分配的变量，最后调用 super dealloc ：

```
- (void)dealloc{
   [idStr release];
   [name release];
   [link release];
   [super dealloc];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T08:53:46.417

您正在保留您的字符串属性。所以释放它是你的任务。

所以添加一个`dealloc`方法并释放它们。

```
- (void)dealloc
{
   [idStr release];
   [name release];
   [link release];
   [super dealloc];
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-17T10:31:49.500

事实上，你不需要调用 ivars 上的发布。而是使用属性 self.ivar = nil。这会释放您的内存并将指针设置为 nil，因为没有悬空指针。

如果你使用 [ivar release]，ivar 会被释放，但它是一个悬空指针，所以大多数时候 ivar = nil; 在释放 ivar 后完成。

```
- (void)dealloc
{
   self.idStr = nil;
   self.name = nil;
   self.link = nil;

   [super dealloc];
} 
```

# php - 向也在 php 中输入他/她的详细信息的用户发送电子邮件

> ID：14375204
> 
> 赞同：-2
> 
> 时间：2013-01-17T08:51:17.643
> 
> 标签：php, email

我可以向 $to 字段发送电子邮件，但我还必须向用户发送电子邮件，说明他的提交已收到。我必须发送电子邮件到 $_POST["email"]

这是代码

```
<?php

 $ToEmail = 'abc@gmail.com,def@gmail.com';
 $EmailSubject = 'Successfull Contact Form Submission';
 $mailheader = "From: ".$_POST["email"]."\r\n";
 $mailheader .= "Reply-To: ".$_POST["email"]."\r\n";
 $mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n";
 $MESSAGE_BODY = "Name: ".$_POST["fname"]."\r\n";
 $MESSAGE_BODY .= "Email: ".$_POST["email"]."\r\n";
 $MESSAGE_BODY .= "Company: ".$_POST["company"]."\r\n";
 $MESSAGE_BODY .= "Address: ".$_POST["address"]."\r\n";
 $MESSAGE_BODY .= "City: ".$_POST["city"]."\r\n";
 $MESSAGE_BODY .= "State: ".$_POST["state"]."\r\n";
 $MESSAGE_BODY .= "Zip: ".$_POST["zip"]."\r\n";
 $MESSAGE_BODY .= "Phone: ".$_POST["phone"]."\r\n";
 $MESSAGE_BODY .= "Fax: ".$_POST["fax"]."\r\n";
 $MESSAGE_BODY .= "Comment: ".nl2br($_POST["message"])."\r\n";
 mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure");
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:07:48.883

1.  错误的骆驼包。您只能在课程中使用首字母驼峰式。

> ```
> $toEmails[] = 'abc@gmail.com,def@gmail.com';
> $toEmails[] = $_POST['email'];
> 
> (...)
> 
> foreach ($toEmails as $email) {
>      mail($email, $EmailSubject, $MESSAGE_BODY, $mailheader) or die('Failure');    
> } 
> ```

但是 die() on error 是错误的方式。更好地将错误捕获到异常并使用正确的电子邮件继续运行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:56:00.280

您可以使用 th Cc 标头甚至 Bcc：

```
$mailheader = "Cc: ".$_POST["email"]."\r\n"; 
```

或者

```
$mailheader = "Bcc: ".$_POST["email"]."\r\n"; 
```

# javascript - 在 HTML 中为不同设备分辨率更改字体大小的最佳方法

> ID：14375214
> 
> 赞同：0
> 
> 时间：2013-01-17T08:51:41.230
> 
> 标签：javascript, html, css, cordova, font-size

我正在为 Android 开发一个 phonegap 应用程序，并且我使用 jquery mobile 设计了 ​​UI。我想知道使用 css 或 javascript 动态更改不同设备的文本字体大小的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:56:19.610

媒体查询是您的朋友！

在您的 CSS 文档中，使用类似于以下的代码（示例适用于 iphone 3-4 + Retina）：

```
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) and (max-device-height: 480px) and (orientation:portrait) {
    p {
        font-size: 12px;
    }
} 
```

您需要提供一些这样的查询来定位大多数设备（ipad、iphone 等），但这应该可以帮助您入门！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:53:30.347

看看[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。例如，这里的嵌套 CSS 规则仅适用于至少 500 像素宽的设备：

```
@media (min-width:500px) {
    #main {
        font-size: 15pt;
    }
} 
```

# symfony - 嵌入式控制器仅限于模板渲染

> ID：14375216
> 
> 赞同：2
> 
> 时间：2013-01-17T08:51:49.160
> 
> 标签：symfony, symfony-2.1

在[Symfony 2 模板文档](http://symfony.com/doc/current/book/templating.html#embedding-controllers)中，它建议通过该方法在模板中嵌入控制器，`render url`并提供以下示例：

```
<div id="sidebar">
    {% render url('latest_articles', { 'max': 3 }) %}
</div> 
```

这很好，但是是否有可能使此路由只能由模板访问以防止用户直接访问 url，如果是这样 - 推荐的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:38:50.893

您可以将所有渲染的控制器路由模式定义为“/_render/unique_name”或在它们前面加上“_render”，并使用 access_control 来保护来自外部世界的路由：

```
# app/config/security.yml
security:
    access_control:
        - { path: ^/_render, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
        - { path: ^/_render, roles: ROLE_NO_ACCESS } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:19:45.147

您可以通过不为此方法定义路由来做到这一点。

```
class TestController extends Controller
{
    /**
     * @Route("/", name="index")
     * @Template
     */
    public function indexAction()
    {

        return array();
    }

    /**
     * @Template
     */
    public function testAction()
    {
        return array(
            'text' => 'This text is being included'
        );
    }
} 
```

然后在模板中

```
{% extends "::base.html.twig" %}

{% block body %}
    <h1>{{ hello }}</h1>

    {% render "TestBundle:Test:test" %}

{% endblock %} 
```

# java - 采用数组并将其压缩的方法

> ID：14375219
> 
> 赞同：1
> 
> 时间：2013-01-17T08:52:10.007
> 
> 标签：java, arrays

给定的任务是，编写一个程序，从文件中读取数字，从这些数字构造一个数组，并将所有零移动到数组的末尾。

例如。

之前：0、9、7、0、0、23、4、0

之后：9、7、23、4、0、0、0、0

在玩了大约 2 个小时后，我想出了这个。

```
import java.io.*;
import java.util.Scanner;

public class Compactor{

Scanner in;
private int numNum = 0;

public void calcNumNum(){
    try{
        in = new Scanner(new File("compact.txt"));
        while(in.hasNext()){
            int dumpVal = in.nextInt();
            numNum++;
        }
        makeArray(numNum);
    }catch(IOException i){
        System.out.println("Error: " + i.getMessage());
    }
}

private void makeArray(int x){
    int i = 0;
    int[] arrayName = new int[x];
    try{
        in = new Scanner(new File("compact.txt"));
        while(i < x){
            arrayName[i] = in.nextInt();
            i++;
        }
        compact(arrayName);
    }catch(IOException e){
        System.out.println("Error: " + e.getMessage());
    }
}

private void compact(int[] x){
    int counter = 0;
    int bCounter = (x.length - 1);
    for(int j = 0; j < x.length; j++){
        if(x[j]!=0){
            x[counter] = x[j];
            counter++;
        }else{
            x[bCounter] = x[j];
            bCounter--;
        }
    }
    printArray(x);
}

private void printArray(int[] m){
    int count = 0;
    while(count < m.length){
        System.out.print(m[count] + "  ");
        count++;
    }
} 
```

}

给我们的文件是：0, 6, 13, 0, 0, 75, 33, 0, 0, 0, 4, 2,9 21, 0, 86, 0, 32, 66, 0, 0。

我得到的是：6、13、75、33、4、29、21、0、0、0、0、0、0、0、0、0、0、0、0、0。（没有逗号当然，我只是把它们放进去方便阅读。）

谁能告诉我如何解决这个问题，或者我应该用不同的方法重新开始我的代码，整体，

```
if(x[j]!=0){
    x[counter] = x[j];
    counter++;
 }else{
    x[bCounter] = x[j];
    bCounter--;
 } 
```

我只是在飞行中编造它，认为它会正常工作，显然它在超过最后一个值后继续运行，并不断设置越来越多的值向后计数为零，但不知道如何使它工作，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:08:18.883

你几乎在那里`compact()`：

```
private void compact(int[] x) {
    int counter = 0;
    for (int j = 0; j < x.length; j++) {
        if (x[j] != 0) {
            x[counter++] = x[j];
        }
    }
    while (counter < x.length) {
        x[counter++] = 0;
    }
    printArray(x);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:02:47.663

解决此问题的另一种方法是创建一个相同大小的辅助数组，然后执行以下操作：

遍历第一个数组。如果数字非零，则将其放入第二个数组，为第二个数组保留一个计数器，从 0 开始，每当您向其中添加元素时增加 1。

由于 int 数组初始化为 0，因此在您遍历初始数组一次之后，您就完成了。第二个数组将保存答案。

```
// create your initial array x the same way as before

int[] y = new int[x.length];
int counter = 0;

for(int i = 0; i < x.length; i++) {

   if(x[i] != 0) {

      y[counter] = x[i];
      counter++;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:06:23.677

这部分看起来很合理

```
for(int j = 0; j < x.length; j++){
    if(x[j]!=0){
        x[counter] = x[j];
        counter++;
    }

} 
```

它将所有非零元素放入数组的开头。问题是 else 部分，它覆盖了数组末尾的元素。由于您已经知道只有零属于数组的末尾，所以只需用零填充数组，从`counter`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:24:46.163

您也可以通过以下简单方式进行操作：（它由数组更改的逻辑组成。从文件中读取并存储在数组中对您来说非常清楚。）

```
package SO;

public class ZeroAtEnd {
    public static void main(String[] args) {
    int[] arr = new int[] { 0, 6, 13, 0, 0, 75, 33, 0, 0, 0, 4, 2, 9, 21, 0, 86, 0, 32, 66, 0, 0 };
    arr = makeZeroAtEnd(arr);
}

    private static int[] makeZeroAtEnd(int[] arr) {
    int l = arr.length;
    int leftCounter = 0;
    int rightCounter = l - 1;
    int[] finalArr = new int[l];
    for (int i = 0; i < l; i++) {
        if (arr[i] == 0) {
        // put at end
        finalArr[rightCounter] = arr[i];
        rightCounter--;
        } else {
        // put at beginning.
        finalArr[leftCounter] = arr[i];
        leftCounter++;
        }
    }
    for (int i : finalArr)
        System.out.println(i);
    return finalArr;
    }
} 
```

**输出**

```
6
13
75
33
4
2
9
21
86
32
66
0
0
0
0
0
0
0
0
0
0 
```

# android - 将 Edittext 动态添加到现有 editText 下的相对布局中

> ID：14375220
> 
> 赞同：0
> 
> 时间：2013-01-17T08:52:10.403
> 
> 标签：android, android-layout, android-edittext

我正在尝试将`editText`动态添加到相对布局中。布局已经包含一个`editText`。我需要`editText`在现有的下方添加新的。

```
EditText designation1 = new EditText(context);
designation1.setHint("designation");
designation1.setSingleLine(true); 
```

我的布局是

```
layoutExp = 
    (RelativeLayout) childView.findViewById(R.id.relative_layout_edit_exp); 
```

我现有的编辑文本是

```
designation = (EditText)childView.findViewById(R.id.editTextDesignatn); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:04:02.660

您需要使用`RelativeLayout.LayoutParams`并指定相对位置`addRule(RelativeLayout.BELOW, ...)`（这是`android:below`XML 属性的编程等效项）：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.BELOW, R.id.editTextDesignatn);
layoutExp.addView(designation1, params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:02:51.873

例如，如果您在现有的 EditText 下设置了一个 LinearLayout，这将是可能的。给这个 LinearLayout 一个 ID，然后你可以把你的动态 EditText 放到这个 LinearLayout 中，比如

```
 YourLinearLayout.addView(YourDynamicEditText); 
```

# php - 我需要在 xupload yii 扩展中复制上传文件

> ID：14375221
> 
> 赞同：1
> 
> 时间：2013-01-17T08:52:10.493
> 
> 标签：php, yii, yii-extensions, yii-xupload

我有这个 xupload 文件扩展名：

```
<?php
        $this->widget( 'xupload.XUpload', array(
            'url' => Yii::app( )->createUrl( "/controller/upload"),
            'model' => $model,
            'htmlOptions' => array('id'=>'somemodel-form'),
            'attribute' => 'file1',
            'multiple' => true,
            'formView' => 'application.views.somemodel.form1',
            'uploadView' => 'application.views.somemodel.upload1',
            'downloadView' => 'application.views.somemodel.download1',
            'options' => array(//Additional javascript options
                //This is the submit callback that will gather
                //the additional data  corresponding to the current file
                'submit' => "js:function (e, data) {
                    var inputs = data.context.find(':input');
                    data.formData = inputs.serializeArray();
                    return true;
                }"
            ),
            )    
        );
        ?> 
```

我需要添加另一个上传文件字段，但是当我复制这样的代码时：

```
<?php
        $this->widget( 'xupload.XUpload', array(
            'url' => Yii::app( )->createUrl( "/controller/upload"),
            'model' => $model,
            'htmlOptions' => array('id'=>'somemodel-form'),
            'attribute' => 'file2',
            'multiple' => true,
            'formView' => 'application.views.somemodel.form2',
            'uploadView' => 'application.views.somemodel.upload2',
            'downloadView' => 'application.views.somemodel.download2',
            'options' => array(//Additional javascript options
                //This is the submit callback that will gather
                //the additional data  corresponding to the current file
                'submit' => "js:function (e, data) {
                    var inputs = data.context.find(':input');
                    data.formData = inputs.serializeArray();
                    return true;
                }"
            ),
            )    
        );
        ?> 
```

问题是当我为两个上传文件上传图片时，它适用于相同的上传模板，我尝试添加 uploadTemplate、downloadTemplate 选项但它不起作用，请告诉我如何使用 uploadTemplate、downloadTemplate 以及如何渲染为 renderPartial 以及我在哪个文件中渲染它，我应该在这一行更改 id < script id="template-upload" type="text/x-tmpl"> 和 < script id="template-download" type="text/x-tmpl"> upload.php 和 download.php 模板文件，请告诉我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:53:32.483

我从来没有在同一页面中使用 XUpload 和超过 1 个小部件，但试试这个：

为您的每个表单模板 (`application.views.somemodel.form1`和`application.views.somemodel.form2`) 添加一个类，即。'上传文件'：

```
//application.views.somemodel.form1
<form class="fileupload" action="server/php/" method="POST" enctype="multipart/form-data">
    <!-- ... -->
</form>

//application.views.somemodel.form2
<form class="fileupload" action="server/php/" method="POST" enctype="multipart/form-data">
    <!-- ... -->
</form> 
```

`uploadView`为每个和创建不同的 id ，`downloadView`即：

```
//application.views.somemodel.upload1
< script id="template-upload1" type="text/x-tmpl">
//application.views.somemodel.download1
< script id="template-download1" type="text/x-tmpl">

//application.views.somemodel.upload2
< script id="template-upload2" type="text/x-tmpl">
//application.views.somemodel.download2
< script id="template-download2" type="text/x-tmpl"> 
```

并按如下方式配置您的小部件：

```
<?php
        $this->widget( 'xupload.XUpload', array(
            'url' => Yii::app( )->createUrl( "/controller/upload"),
            'model' => $model,
            'htmlOptions' => array('id'=>'somemodel-form'),
            'attribute' => 'file1',
            'multiple' => true,
            'formView' => 'application.views.somemodel.form1',
            'uploadView' => 'application.views.somemodel.upload1',
            'downloadView' => 'application.views.somemodel.download1',
            'uploadTemplate' => '#template-upload1', // IMPORTANT!
            'downloadTemplate' => '#template-download1',// IMPORTANT!
            'options' => array(//Additional javascript options
                //This is the submit callback that will gather
                //the additional data  corresponding to the current file
                'submit' => "js:function (e, data) {
                    var inputs = data.context.find(':input');
                    data.formData = inputs.serializeArray();
                    return true;
                }"
            ),
            )    
        );
        ?>

<?php
        $this->widget( 'xupload.XUpload', array(
            'url' => Yii::app( )->createUrl( "/controller/upload"),
            'model' => $model,
            'htmlOptions' => array('id'=>'somemodel-form'),
            'attribute' => 'file2',
            'multiple' => true,
            'formView' => 'application.views.somemodel.form2',
            'uploadView' => 'application.views.somemodel.upload2',
            'downloadView' => 'application.views.somemodel.download2',
            'uploadTemplate' => '#template-upload2', // IMPORTANT!
            'downloadTemplate' => '#template-download2',// IMPORTANT!
            'options' => array(//Additional javascript options
                //This is the submit callback that will gather
                //the additional data  corresponding to the current file
                'submit' => "js:function (e, data) {
                    var inputs = data.context.find(':input');
                    data.formData = inputs.serializeArray();
                    return true;
                }"
            ),
            )    
        );
        ?> 
```

# python - 从 python 中查找 python 头文件路径？

> ID：14375222
> 
> 赞同：8
> 
> 时间：2013-01-17T08:52:14.933
> 
> 标签：python, numpy, header-files

相当于什么

```
numpy.get_include() 
```

在[这里](http://docs.scipy.org/doc/numpy-1.6.0/user/c-info.python-as-glue.html?highlight=get_include#instant)用于 Python，给我 Python 头文件所在目录的路径？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T09:06:44.730

头文件位于包含目录中。

您可以使用 distutils.sysconfig 模块找到包含目录

```
from distutils.sysconfig import get_python_inc
get_python_inc() #this gives the include dir 
```

你可以[在这里阅读](http://docs.python.org/2/distutils/setupscript.html#preprocessor-options)

# javascript - 将更改事件绑定到 jquery 中的输入字段组

> ID：14375226
> 
> 赞同：5
> 
> 时间：2013-01-17T08:52:32.270
> 
> 标签：javascript, jquery

我有以下三个输入字段：

```
 <input type="text" name="address" id="address"/>
 <input type="text" name="city" id="city"/>
 <input type="text" name="country" id="country"/> 
```

如何一次将 onChange 事件添加到所有这些字段，如下所示：

```
$("select the elements with id address,city,country").bind("change", function() {
            //do something
        }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T08:56:58.917

`,`正如@Rory 所说，在 id 选择器中使用

或者

为所有这些添加一个类并调用更改功能

```
<input type="text" name="address" id="address" class="className"/>
<input type="text" name="city" id="city" class="className"/>
<input type="text" name="country" id="country" class="className"/>

$('.className').bind("change", function(){
  //your stuff
}); 
```

**然而**

因为它是一个输入字段.. 我建议您使用.. [keyup()](http://api.jquery.com/keyup/)，使用`change`您必须单击文本框才能使其触发。

```
$('.className').keyup(function(){
  //your stuff
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T08:53:00.833

您可以`,`像在 CSS 中一样使用来组合选择器。试试这个：

```
$("#address, #city, #country").bind("change", function() {
    //do something
}); 
```

或者，您可以将 a 添加`class`到每个元素并选择它。

# c# - 从 string[] 构建字符串而不使用任何循环

> ID：14375233
> 
> 赞同：1
> 
> 时间：2013-01-17T08:53:03.587
> 
> 标签：c#, .net, string

我有一个字符串数组。它是动态的，可以是任意长度（**也可以是 0**）。如何从数组中创建一个字符串，由任何分隔符分隔，如`;`或`|`？？

```
string str = string.empty;
string[] arrOptions = strOptions.Split(new string[]{"\n"}, StringSplitOptions.RemoveEmptyEntries); 
```

现在，必须制作字符串`arrOptions`并将其放入`str`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:54:28.983

使用`string.Join`：

```
string result = string.Join("\n", arrOptions); 
```

或者简单地连接它们，如果您不再需要分隔符：

```
string result = string.Concat(arrOptions); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T08:54:57.647

使用`String.Join(separator, objects)`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T08:54:37.797

```
str = string.Join( ';', arrOptions ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T08:54:42.293

您可以尝试两种方式：

```
 string[] strArr = { "Abc", "DEF", "GHI" };

    //    int i = 0;
    //    string final=string.Empty;
    //IterationStart:
    //    if (i < strArr.Length)
    //    {
    //        final += strArr[i] + ",";
    //        i++;
    //        goto IterationStart;
    //    }
    //Console.WriteLine(final);

     string str = string.Join(",", strArr);
     Console.WriteLine(str); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T08:56:53.543

尝试 ：`string.Join(seperator, arrOptions);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T09:04:41.983

您可能正在寻找以下解决方案。

```
string str = string.empty;
string[] arrOptions = strOptions.Split(new string[]{"\n"}, StringSplitOptions.RemoveEmptyEntries);
str = string.Concat(arrOptions); 
```

谢谢，

普拉文

# certificate - 如何使用 keytool 列出存储在 PKCS12 密钥库中的证书？

> ID：14375235
> 
> 赞同：108
> 
> 时间：2013-01-17T08:53:18.593
> 
> 标签：certificate, ssl-certificate, keystore, pkcs#12

我想列出存储在 PKCS12 密钥库中的证书。

密钥库具有扩展名`.pfx`

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-01-17T08:56:16.893

如果密钥库是 PKCS12 类型 ( `.pfx`)，您必须指定它`-storetype PKCS12`（添加换行符以提高可读性）：

```
keytool -list -v -keystore <path to keystore.pfx> \
    -storepass <password> \
    -storetype PKCS12 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2018-02-10T05:42:47.893

你也可以[`openssl`](https://www.openssl.org/)用来完成同样的事情：

```
$ openssl pkcs12 -nokeys -info \
    -in </path/to/file.pfx> \
    -passin pass:<pfx's password>

MAC Iteration 2048
MAC verified OK
PKCS7 Encrypted data: pbeWithSHA1And40BitRC2-CBC, Iteration 2048
Certificate bag
Bag Attributes
    localKeyID: XX XX XX XX XX XX XX XX XX XX XX XX XX 48 54 A0 47 88 1D 90
    friendlyName: jedis-server
subject=/C=US/ST=NC/L=Raleigh/O=XXX Security/OU=XXX/CN=something1
issuer=/C=US/ST=NC/L=Raleigh/O=XXX Security/OU=XXXX/CN=something1
-----BEGIN CERTIFICATE-----
...
...
...
-----END CERTIFICATE-----
PKCS7 Data
Shrouded Keybag: pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 2048 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-07-11T12:04:52.813

您可以使用 keytool 列出条目（证书详细信息），甚至不需要提及商店类型。此外，`.p12`and`.pfx`都是`PKCS#12`文件。假设您有密钥库文件`cert.pfx`，或者`cert.p12`您可以使用以下命令列出内容。

```
keytool -list -v -keystore cert.pfx -storepass <password> 
```

**或者**

```
keytool -list -v -keystore cert.p12 -storepass <password>

 Keystore type: PKCS12
 Keystore provider: SunJSSE

 Your keystore contains 1 entry
 Alias name: 1
 Creation date: Jul 11, 2020
 Entry type: PrivateKeyEntry
 Certificate chain length: 2 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-06-18T08:15:07.867

```
openssl pkcs12 -info -in keystore_file 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-07T09:46:08.330

问题和所有答案中缺少的是您可能需要密码来从 PKCS#12 (.pfx) 密钥库中读取公共数据。是否需要密码取决于 PKCS#12 文件的创建方式。如果 PKCS#7 数据（例如 OID 前缀 1.2.840.113549.1.7）被列为“加密”或使用密码规范，或者如果 asn1 树中数据的位置低于加密节点，则在不知道密码短语的情况下将无法读取它。这意味着您的“openssl pkcs12”命令将失败并出现错误（输出取决于版本）。对于那些想知道为什么您可能对 PKCS#12 的证书感兴趣而不知道密码短语的人。想象一下，您有许多密钥库和许多短语，而您在保持它们的组织方面确实很糟糕，并且您不想测试所有组合，文件中的证书可以帮助您找出它可能是哪个密码。或者您正在开发用于迁移/更新密钥库的软件，您需要根据包含的证书提前决定启动哪个过程，而无需用户交互。因此，后面的示例在没有密码短语的情况下工作，具体取决于 PKCS#12 结构。或者您正在开发用于迁移/更新密钥库的软件，您需要根据包含的证书提前决定启动哪个过程，而无需用户交互。因此，后面的示例在没有密码短语的情况下工作，具体取决于 PKCS#12 结构。或者您正在开发用于迁移/更新密钥库的软件，您需要根据包含的证书提前决定启动哪个过程，而无需用户交互。因此，后面的示例在没有密码短语的情况下工作，具体取决于 PKCS#12 结构。

只是想补充一下，因为我自己没有找到答案，花了很多时间弄清楚。

# sql - 如何将一张表复制到另一张表

> ID：14375236
> 
> 赞同：0
> 
> 时间：2013-01-17T08:53:23.330
> 
> 标签：sql, oracle

我想将table1的内容复制到table2中，但这不是直接复制，因为table2包含的列比table 1多。结构类似于这样：

表 1 { 列 2 列 4 列 6 }

表 2 { 列 1 列 2 列 3 列 4 列 5 列 6 }

我想要做的是将 table1 中的每一行添加到 table2，并为缺少的列设置默认值。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:55:54.813

你可以做一个

```
INSERT INTO xxx
SELECT yyy 
```

并在 select 子句中放置默认值。

```
INSERT INTO Table2(column1, column2, column3, column4, column5, column6)
SELECT 'horse', column2, 2, column4, 'what ever I want', column6 
FROM Table1 
```

因此 int Table2，所有 column1 都将具有“马”值。所有 column3 将有 2。等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:20:24.187

请试试

```
INSERT INTO 
    Table2  (
    column1,
    column2,
    column3,
    column4,
    column5,
    column6,
        )
SELECT 
    'StaticValue1',
    column2,
    'StaticValue2'
    column4,
    'StaticValue3'
    column6,
FROM 
    Table1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:56:05.760

使用`INSERT..INTO SELECT`声明

```
INSERT INTO table2 (column2, column4, column6)
SELECT column2, column4, column6
FROM table1 
```

所以在这种情况下， columns: `column1`, `column2`,`column3`将有空值。或您设置的任何默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-20T14:46:27.057

要将完整表复制到新表中：

```
SELECT * INTO table2 FROM table1; 
```

[http://www.w3schools.com/sql/sql_select_into.asp](http://www.w3schools.com/sql/sql_select_into.asp)

要将表复制到现有表中：

```
INSERT INTO table2
SELECT * FROM table1; 
```

[http://www.w3schools.com/sql/sql_insert_into_select.asp](http://www.w3schools.com/sql/sql_insert_into_select.asp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T08:58:41.660

不擅长 SQL 但类似这样：

```
INSERT INTO [Table1] (column2, column4, column6) SELECT (column1, column2, column3) FROM [Table2] 
```

希望这可以帮助。可能有用的链接，[http://www.blackwasp.co.uk/SQLSelectInsert.aspx](http://www.blackwasp.co.uk/SQLSelectInsert.aspx)

*投票给我我需要积分*：P

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-20T15:17:30.537

```
insert into TABLE2
select null colum1, column2,null colum3,column4,null colum5,column6
from((
Select  TABLE1.column2, TABLE1.column4, TABLE1.column6
from TABLE1, TABLE2
where TABLE1.primarykey=TABLE2.primarykey)) 
```

# android - ACRA 异常 requestCode 只能使用低 16 位

> ID：14375239
> 
> 赞同：9
> 
> 时间：2013-01-17T08:53:37.570
> 
> 标签：android, android-activity, acra

我的应用程序使用 ACRA 进行错误报告，并且我的设备收到了一些错误报告：Can only use lower 16 bits for requestCode.. Google 显示使用 startActivityForResult 时发生此错误，但我搜索了我的代码几次，我不会在任何地方打电话。

我很困惑，想知道这对用户有何影响（有趣的是，崩溃报告测试版根本没有显示任何错误）。

还有其他人遇到这个吗？

```
java.lang.RuntimeException: Unable to resume activity {com.myapp/com.myapp.MyActivity}:
java.lang.IllegalArgumentException: Can only use lower 16 bits for requestCode
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2120)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:957)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalArgumentException: Can only use lower 16 bits for requestCode
at android.support.v4.app.g.startActivityForResult(SourceFile:690) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T14:05:45.443

RequestCodes 的最大值只能为`0xffff`(65535)。因此，您可能正在调用`startActivityForResult(intent, REQUEST_CODE);`并且`REQUEST_CODE`大于 65535。

解决方案：

*   使请求代码更小
*   覆盖`startActivityForResult`以处理您较大的请求代码（这主要归结为截断或其他一些操作以将您的请求代码推送到边界内）在[链接的答案](https://stackoverflow.com/questions/14378002/exception-with-android-when-using-acra)（从上面）中有代码`startActivityForResult`是您的问题被 Raghav Sood 再次撞上。

# iphone - 如何在 iPhone 的 UIWebview 上显示 html 字符串？

> ID：14375241
> 
> 赞同：3
> 
> 时间：2013-01-17T08:53:41.003
> 
> 标签：iphone, html, ios, objective-c, uiwebview

我正在制作一个应用程序，我在其中从 Web 服务获取 HTML 字符串。现在，当我在 Web 视图上显示这些数据时，遇到一些问题来显示这些数据，例如 - 我得到的来自 Web 服务的 HTML 字符串是

```
<span style=\"color:#F00\">&lt;div align=\"left\"&gt;Highlights of latest deal&lt;br&gt;&lt;/div&gt;</span> 
```

当我在网络视图上显示这些数据时，输出是

```
<div align="left"> Highlights of latest deal<br></div> 
```

是红色的。但我想要红色的“最新交易亮点”等输出。那么您能否建议如何使用这些 html 标签以正确的格式显示数据。

编辑 ：-

当前代码：-

```
[my_webview loadHTMLString:my_string baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:13:57.457

您需要先格式化字符串，然后再将其加载为-

如果不是，请先使 my_string 可变。

```
[my_string replaceOccurrencesOfString:@"&gt;" withString:@">" options:NSLiteralSearch range:NSMakeRange(0, [self length])];
[my_string replaceOccurrencesOfString:@"&lt;" withString:@"<" options:NSLiteralSearch range:NSMakeRange(0, [self length])]; 
```

并使用以下代码加载它

```
[my_webview loadHTMLString:my_string baseURL:nil]; 
```

# azure - Window Phone 8 SDK 的 Twilio

> ID：14375243
> 
> 赞同：0
> 
> 时间：2013-01-17T08:53:41.477
> 
> 标签：azure, windows-phone-8, twilio

最新版本的 Twilio REST API (3.5.6) 不支持 Window Phone 8.0 SDK。

可以通过 Windows Azure 使用 Twillio 服务吗？谁能给我样品，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:05:03.127

与 Windows Azure 一起工作时，可以以多种方式使用 Twilio。您可以在虚拟机、云服务、网站甚至移动服务中使用它。

由于您正在构建 WP8 应用程序，请考虑使用移动服务：http: [//blogs.msdn.com/b/windowsazure/archive/2012/10/17/announcing-the-windows-azure-mobile-services-october-update .aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/10/17/announcing-the-windows-azure-mobile-services-october-update.aspx)

# tridion - 为什么此代码不在我的 Tridion Content Delivery 服务器上写入日志输出？

> ID：14375249
> 
> 赞同：4
> 
> 时间：2013-01-17T08:54:00.637
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我有一个来自自定义（非 Tridion）数据库的用户控件呈现内容。此自定义数据库的连接字符串不正确，因此当代码尝试连接时出现 SqlException。

我的代码目前是：

```
var logger = 
    Tridion.ContentDelivery.Web.Utilities
        .LoggerFactory.GetLogger(this.GetType().ToString());
try
{
    /* make a database connection - failing with SqlException */ 
}
catch (SqlException e)
{
    logger.Error("Could not connect to database: " + e.ToString());
} 
```

我的 \bin\config\logback.xml 文件包含：

```
<property name="log.pattern" value="%date %-5level %logger{0} - %message%n"/>
<property name="log.history" value="7"/>
<property name="log.folder" value="c:/tridion/log"/>
<property name="log.level" value="DEBUG"/>
...
<appender name="rollingCoreLog" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>${log.folder}/cd_core.%d{yyyy-MM-dd}.log</fileNamePattern>
        <maxHistory>${log.history}</maxHistory>
    </rollingPolicy>
    <encoder>
        <pattern>${log.pattern}</pattern>
    </encoder>
    <prudent>true</prudent>
</appender>
...
<root level="warn">
    <appender-ref ref="rollingCoreLog"/>
</root> 
```

C:\Tridion\log 中有一堆日志，但最近更改的一个是 20 分钟前修改的，并且不包含我的日志消息文本（我只是在记事本中搜索了“数据库”）。

为什么我的日志输出没有发送到日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:29:22.270

您有 2 个选项：

*   您将根日志记录定义为“DEBUG”，但这有一个缺点，即允许从 Tridion 使用的所有第三方库进行大量日志记录。这是片段：`<root level="DEBUG"> <appender-ref ref="rollingCoreLog"/> </root>`

*   您定义了一个特殊的附加程序以包括 Tridion .NET 日志记录：`<logger name="Tridion.ContentDelivery" level="${log.level}"><appender-ref ref="rollingCoreLog"/></logger>`

请注意，在第二种情况下，您需要将记录器绑定到 Tridion.ContentDelivery 下的命名空间。这是一个例子：

> var logger = Tridion.ContentDelivery.Web.Utilities.LoggerFactory.GetLogger("Tridion.ContentDelivery.MyNamespace.MyClass");

希望这可以帮助。

PS：回答您的问题：因为您没有附加程序，并且根日志记录设置为 WARN。默认情况下，logback.xml 仅包含“com.tridion”的附加程序，但我猜想的输出`this.getType().ToString()`不是以该字符串开头的。

# oracle - Oracle 首选列长度

> ID：14375250
> 
> 赞同：7
> 
> 时间：2013-01-17T08:54:01.200
> 
> 标签：oracle, database-design, database-performance

列长度​​的乘数是否会以某种方式影响数据库性能？

换句话说，以下两个表的性能有什么区别：

```
TBL1:
  - CLMN1 VARCHAR2(63)
  - CLMN2 VARCHAR2(129)
  - CLMN3 VARCHAR2(250) 
```

和

```
TBL2:
  - CLMN1 VARCHAR2(64)
  - CLMN2 VARCHAR2(128)
  - CLMN3 VARCHAR2(256) 
```

我们应该总是尝试使列的长度达到一定的幂`2`还是只有最大大小才重要？

一些开发人员声称，数据库中列长度的倍增因子之间存在某种联系，因为它影响 Oracle 如何在磁盘上分配和保存数据以及共享其在内存中的缓存。有人可以证明或反驳这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T08:58:58.060

性能上没有区别。由于 2 的幂，没有进行任何隐藏的优化。

唯一对事物的存储方式产生影响的是*实际*数据。存储在`VARCHAR2(2000)`列中的 100 个字符的存储方式与存储在列中的 100 个字符完全相同`VARCHAR2(500)`。

将长度视为*业务约束*，而不是数据类型的一部分。唯一应该驱动您决定长度的是关于放入其中的数据的业务限制。

**编辑：长度***确实*有所不同的唯一情况是当您需要该列的索引时。较旧的 Oracle 版本 (< 10) 确实对密钥长度有限制，并且在创建索引时会检查该限制。

尽管在 Oracle 11 中是可能的，但对具有 4000 个字符的值进行索引可能不是最明智的选择。

**编辑 2**：

所以我很好奇并设置了一个简单的测试：

```
create table narrow (id varchar(40));
create table wide (id varchar(4000)); 
```

然后用由 40 个“X”组成的字符串填充两个表。如果存储之间确实存在（实质性）差异，那么在检索数据时应该会以某种方式显示出来，对吧？

两个表都有 1048576 行。

```
连接到：
Oracle Database 11g 企业版 11.2.0.3.0 - 64 位生产
具有分区、OLAP、数据挖掘和实际应用程序测试选项

SQL> 设置自动跟踪 traceonly 统计信息
SQL> select count(*) from wide;

统计数据
-------------------------------------------------- --------
          0 次递归调用
          1 db 块获取
       6833 一致获得
          0 次物理读取
          0 重做大小
        通过 SQL*Net 向客户端发送 349 个字节
        通过 SQL*Net 从客户端收到 472 个字节
          2 次 SQL*Net 往返客户端
          0 种（内存）
          0 种（磁盘）
          已处理 1 行

SQL> 从窄中选择计数（*）；

统计数据
-------------------------------------------------- --------
          0 次递归调用
          1 db 块获取
       6833 一致获得
          0 次物理读取
          0 重做大小
        通过 SQL*Net 向客户端发送 349 个字节
        通过 SQL*Net 从客户端收到 472 个字节
          2 次 SQL*Net 往返客户端
          0 种（内存）
          0 种（磁盘）
          已处理 1 行

SQL>

```

因此，两个表的全表扫描完全相同。那么当我们实际选择数据时会发生什么？

```
SQL> 从宽中选择 *；

选择了 1048576 行。

统计数据
-------------------------------------------------- --------
          4个递归调用
          2 db 块获取
      76497 一致获取
          0 次物理读取
          0 重做大小
   54386472 字节通过 SQL*Net 发送到客户端
     通过 SQL*Net 从客户端收到 769427 个字节
      69907 SQL*Net 往返客户端
          0 种（内存）
          0 种（磁盘）
    处理了 1048576 行

SQL> 从窄中选择 *；

选择了 1048576 行。

统计数据
-------------------------------------------------- --------
          4个递归调用
          2 db 块获取
      76485 一致获取
          0 次物理读取
          0 重做大小
   54386472 字节通过 SQL*Net 发送到客户端
     通过 SQL*Net 从客户端收到 769427 个字节
      69907 SQL*Net 往返客户端
          0 种（内存）
          0 种（磁盘）
    处理了 1048576 行

SQL>

```

一致的获取略有不同，但这可能是由于缓存。

# c - 反调试技术的优势

> ID：14375255
> 
> 赞同：-1
> 
> 时间：2013-01-17T08:54:27.507
> 
> 标签：c, linux, debugging, process, ptrace

曾经使用 gdb 等工具进行调试，但我对它们的实现知之甚少。我正在尝试在我的程序中实现一种反调试技术，但对调试知之甚少，我需要一些帮助。我从[http://www.julioauto.com/rants/anti_ptrace.htm发现了以下代码](http://www.julioauto.com/rants/anti_ptrace.htm)

```
void anti_ptrace(void)
{
    pid_t child;

    if(getenv("LD_PRELOAD"))
        while(1);

    child = fork();
    if (child)
        wait(NULL);
    else 
    {
        pid_t parent = getppid();

        if (ptrace(PTRACE_ATTACH, parent, 0, 0) < 0)
            while(1);

        sleep(1);
        ptrace(PTRACE_DETACH, parent, 0, 0);
        exit(0);
    }
} 
```

我想听听各位大师的专家意见，关于上述代码的成功程度以及优缺点是什么？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:24:27.707

您实际上可以保护您的算法免于调试或反编译的唯一方法是限制对其二进制文件的访问——通过在远程机器上运行它们并通过 TCP/IP 访问。**任何** *本地*解决方案最终都会在坚定的破解者手中失败。

# android - 如何从 XML Pull Parser 获取 URL

> ID：14375270
> 
> 赞同：0
> 
> 时间：2013-01-17T08:55:13.653
> 
> 标签：android, xml, http, url, xml-parsing

我无法从我收到的数据中提取 url。

数据是

```
<ASX VERSION="3.0"><TITLE>iROCK109 - Classic Rock And More!</TITLE><MOREINFO HREF="http://www.irock109.com/" /><COPYRIGHT>� iROCK109 - 2009</COPYRIGHT><ABSTRACT>Classic Rock n More!</ABSTRACT><ENTRY><TITLE>[128k] www.irock109.com</TITLE><REF HREF="http://cp6.digistream.info:20366/" /><AUTHOR>iROCK 109 - Classic Rock And More!</AUTHOR><ABSTRACT>DJ Hosted Classic Rock 60s through today, and requests 24/7</ABSTRACT> 
```

我正在使用的代码是从 REF 读取数据和提取 HREF 是

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        try {
            executeHttpGet();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
        //Method for http request

        public void executeHttpGet() throws Exception {

            BufferedReader in = null;

            try {

                System.out.println("ndkjsdak");
                HttpClient client = new DefaultHttpClient();
                HttpGet request = new HttpGet();

                HttpProtocolParams.setUseExpectContinue(client.getParams(), false);

                request.setURI(new URI("http://www.irock109.com/streams/irock109-128mp3.asx"));

                //HttpResponse response = client.execute(request);

                HttpResponse response = null;

                boolean RetryConnection = true;
                int retrycount = 0;

                //retry request 5 times
                while(RetryConnection == true && retrycount < 5)
                {
                    try
                    {
                         response = client.execute(request);
                         RetryConnection = false;
                    }
                    catch(IOException e)
                    {
                        System.out.println("caught");
                        retrycount += 1;
                    }
                }

                in = new BufferedReader
                (new InputStreamReader(response.getEntity().getContent()));

                StringBuffer sb = new StringBuffer("");
                String line = "";
                String NL = System.getProperty("line.separator");

                while ((line = in.readLine()) != null)
                {
                    sb.append(line +NL);
                }
                in.close();
                String page=sb.toString();
                System.out.println("xml data "+page);

                XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                 factory.setNamespaceAware(true);
                 XmlPullParser xpp = factory.newPullParser();

                 xpp.setInput( new StringReader (page) );
                 int eventType = xpp.getEventType();
                 while (eventType != XmlPullParser.END_DOCUMENT)
                 {
                  if(eventType == XmlPullParser.START_DOCUMENT)
                  {
                      System.out.println("Start document");
                  }
                  else if(eventType == XmlPullParser.START_TAG)
                  {
                      System.out.println("Start tag "+xpp.getName());
                  }
                   else if(eventType == XmlPullParser.END_TAG)
                  {
                      System.out.println("End tag "+xpp.getName());
                  }
                  else if(eventType == XmlPullParser.TEXT) 
                  {
                      System.out.println("Text "+xpp.getText());
                  }
                  eventType = xpp.next();
                 }
                 System.out.println("End document");
            }
            finally 
            {
                if (in != null) 
                {
                    try
                    {
                        in.close();
                    } 
                    catch (IOException e)
                        {
                        e.printStackTrace();
                    }
                }
            }
    }
} 
```

我怎样才能得到`href`from `ref`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:23:03.090

试试这个

```
try {
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            XmlPullParser xpp = factory.newPullParser();

            xpp.setInput(new StringReader(xmlData));
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_DOCUMENT) {
                    System.out.println("Start document");
                } else if (eventType == XmlPullParser.START_TAG) {
                    if(xpp.getName().equalsIgnoreCase("REF"))
                    {
                        System.out.println("REF Text = " + xpp.getAttributeValue(0));
                    }
                    System.out.println("Start tag " + xpp.getName());
                } else if (eventType == XmlPullParser.END_TAG) {
                    System.out.println("End tag " + xpp.getName());
                } else if (eventType == XmlPullParser.TEXT) {
                    System.out.println("Text  = " + xpp.getText());

                }
                eventType = xpp.next();
            }
            System.out.println("End document");
        } catch (Exception e) {
        } 
```

# javascript - 如何解除绑定keydown事件一段时间，然后在Jquery中再次绑定？

> ID：14375271
> 
> 赞同：0
> 
> 时间：2013-01-17T08:55:14.817
> 
> 标签：javascript, jquery, ajax, keydown

我正在为表格使用箭头键导航。根据当前选定的行，我必须在 div 中加载一些细节。选择一行后，它将使 Ajax 调用服务器以获取更多详细信息并将该详细信息加载到 div 中。这可能需要一些时间来进行 Ajax 调用和更新 div。在这段时间内，我想禁用按键事件。

```
 $('#tbl tbody').on('keydown', function (event) {

        var keyCode = event.keyCode;

        if (keyCode >= 37 && keyCode <= 40) {
            event.preventDefault();
            ChangeTarget(keyCode)
        }
    }); 
```

我只想解除绑定或暂停 keydown 事件一段时间。

我试图使用超时，但这并没有像我想要的那样帮助我。

```
$('#tbl tbody').on('keydown', function (event) {
            var keyCode = event.keyCode;

            if (keyCode >= 37 && keyCode <= 40) {
                event.preventDefault();
                ChangeTarget(keyCode);
                setTimeout(function () {
                }, 10000);
            }
        }); 
```

在 Ajax 完成工作之前，我不想记录任何关键事件！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:58:55.887

您可以使用布尔标志而不是取消绑定。

这是一个例子：

```
var keyNavigationDisabled = false;

$('#tbl tbody').on('keydown', function (event) {
    if (keyNavigationDisabled) return;
    var keyCode = event.keyCode;
    if (keyCode >= 37 && keyCode <= 40) {
        event.preventDefault();
        ChangeTarget(keyCode)
    }
});

function getRemoteData() {
    keyNavigationDisabled = true;
    $.ajax({
        url: 'http://example.com',
        complete: function () {
           keyNavigationDisabled = false;
        }
    });
} 
```

# ruby-on-rails - 如何测试 Rails 应用程序在生产环境中是否正常工作

> ID：14375274
> 
> 赞同：2
> 
> 时间：2013-01-17T08:55:18.267
> 
> 标签：ruby-on-rails, testing, production-environment

我正在通过 TDD 编写一个 rails 应用程序，所以，我想知道，我如何测试生产应用程序，例如拥有与开发安全令牌不同的安全令牌，如何确保所有配置在生产中都是正确的，例如邮件配置等.

我们不应该永远不要在生产模式下运行测试，因为它会擦除数据库。

那么，应该如何在生产环境中测试 Rails 应用程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T17:10:39.457

许多开发人员使用的方法是创建另一个称为阶段的环境。您可以使您的配置与生产相同，并在生产前部署到此，以确保一切正常。如果您愿意，您可以针对 staging 运行集成测试/性能测试。

您可以将生产配置 (config/environments/production.rb) 复制到名为 stage.rb 的新文件中，然后记住使用 stage 数据库的新连接详细信息填充您的 database.yml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:23:02.737

当您运行测试时，您始终处于测试环境中，因为`RAILS_ENV`在`test_helper.rb`. 设置`RAILS_ENV=production`意味着模式将从生产数据库而不是开发数据库克隆。我当然可以在生产服务器上建立一个开发数据库，​​但这似乎没有意义。

考虑到我的开发和生产服务器之间存在的所有差异——操作系统、Web 服务器、数据库、gem 等——除非我首先运行我的测试套件，不仅在开发中而且在生产。感谢 Capistrano 漂亮而强大的 API，这是在公园里散步来完成的：

这里是它似乎是如何完成的例子 -

```
desc "Run the full tests on the deployed app." 
task :run_tests do
 run "cd #{release_path} && RAILS_ENV=production rake && cat /dev/null > log/test.log" 
end

desc "Copy in server specific configuration files"
task :copy_shared do
  run <<-CMD
    cp #{shared_path}/system/voxway.rb #{release_path}/config &&
    cp #{shared_path}/system/database.yml #{release_path}/config
  CMD
end

desc "Run pre-symlink tasks" 
task :before_symlink, :roles => :web do
  copy_shared
  run_tests
end 
```

# c# - 动态添加指向 sharepoint webpart 的链接

> ID：14375276
> 
> 赞同：0
> 
> 时间：2013-01-17T08:55:24.363
> 
> 标签：c#, sharepoint

嗨 Stackoverflow 社区！我正在使用 Visual Studio 2012 和 Windows Server 2012 开发 Sharepoint 2013 服务器。因此，我必须构建一个 Webpart，它应该通过文本框将链接添加到 GUI。此外，还应该可以添加另一个链接。添加新链接后，整个链接集合应显示在列表中。现在的问题是：添加链接后，网站会重新加载。因此，存储链接的数组只包含最新的链接。所有以前的链接都已消失/删除。

这是我的方法：

```
 protected void Page_Load(object sender, EventArgs e) {
        if (Page.IsPostBack) {
            Events = new List<String>();
        }
    }

    protected void btnAddLink_click(object sender, EventArgs e) {
        AddToList();
        List<String> links = Events;
        foreach (String s in links) {
            HyperLink link = new HyperLink();
            link.NavigateUrl = s;
            link.Text = s;
            lnkPanel.Controls.Add(link);
        }
        foreach (String l in links) {
            tbDescription.Text += l + "\n";
        } 
    }

    public List<String> Events {
        get { return (List<String>)ViewState["HyperLinkList"]; }
        set { ViewState["HyperLinkList"] = value; }
    }

    public void AddToList() {
        List<String> events = Events; // Get it out of the viewstate
        String l = tbLinks.Text; // tb = textbox (user input)
        HyperLink link = new HyperLink();
        link.NavigateUrl = tbLinks.Text;
        link.Text = tbLinks.Text;
        if (!events.Contains(link.NavigateUrl.ToString())) {
            events.Add(l);
        }
        Events = events; // Add the updated list back into the viewstate

    } 
```

我希望有人可以帮助我解决我的（也许是nooby）问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:05:19.177

啊，你需要这个：

```
protected void Page_Load(object sender, EventArgs e) {
    if (!Page.IsPostBack) {
        Events = new List<String>();
    }
} 
```

每次加载页面时，您都会在视图状态中擦除列表的内容。您需要添加`!`以确保它不是回发。

# python - 转到特定行并在 Python 中阅读接下来的几行

> ID：14375282
> 
> 赞同：0
> 
> 时间：2013-01-17T08:55:42.523
> 
> 标签：python, file, memory, line, fastq

我有这个巨大的 (61GB) [FASTQ](http://en.wikipedia.org/wiki/FASTQ_format)文件，我想为其创建一个随机子集，但我无法将其加载到内存中。FASTQs 的问题是每四行都属于一起，否则我只会创建一个随机整数列表，并且只将这些整数的行写入我的子集文件。

到目前为止，我有这个：

```
import random
num = []    
while len(num) < 50000000:
    ran = random.randint(0,27000000)
    if (ran%4 == 0) and (ran not in num):
        num.append(ran)
num = sorted(num)

fastq = open("all.fastq", "r", 4)
subset = open("sub.fastq", "w")
for i,line in enumerate(fastq):
    for ran in num:
        if ran == i:
            subset.append(line) 
```

在转到下一个随机整数之前，我不知道如何到达文件中的下三行。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:03:48.647

1.  [以四行为一组迭代文件。](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)
2.  [从该迭代器中随机抽取一个样本。](https://stackoverflow.com/questions/12581437/python-random-sample-with-a-generator)

这个想法是，您可以通过遍历它并依次选择（或不选择）每个元素来从生成器中采样而无需随机访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:05:08.317

你可以试试这个：

```
import random
num = sorted([random.randint(0,27000000/4)*4 for i in range(50000000/4)])

lines_to_write = 0
with open("all.fastq", "r") as fastq:
    with open("sub.fastq", "w") as subset:
        for i,line in enumerate(fastq):
            if len(num)==0:
                break
            if i == num[0]:
                num.pop(0)
                lines_to_write = 4
            if lines_to_write>0:
                lines_to_write -= 1
                subset.write(line) 
```

# php - WAMP 服务器 - 要求下载 index.php

> ID：14375285
> 
> 赞同：1
> 
> 时间：2013-01-17T08:55:49.213
> 
> 标签：php, html, wamp

> **可能重复：**
> [站点保存 index.php 文件而不是将其打开到本地服务器 WAMP](https://stackoverflow.com/questions/6975639/site-saves-index-php-file-rather-than-opening-it-into-localserver-wamp)

我刚刚在我的电脑上安装了 WAMP。我将一个网站移到 www 目录中。当我访问`index.php`我的网站时，会出现一个窗口，要求我下载`index.php`.

目录是：`c:/wamp/www/my website/index.php`

谁能告诉我如何解决这个问题，以便我可以查看该网站而不是下载它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:58:25.870

您必须`index.php`通过域`http://127.0.0.1`或输入文件`http://localhost`，而不是通过文件补丁（如`c:\file.php`.

当您在`xx`端口上运行 WAMP 服务器时，`http://127.0.0.1:xx`将链接到 WAMP 的 www 文件夹，例如`c:/wamp/www/`. 默认情况下，WAMP 使用 80 端口，因此您可以只访问`http://127.0.0.1`或`http://localhost`

如果您通过域访问您的网站并且它仍然开始下载，请检查您的`httpd.conf`文件是否为`AddType application/x-httpd-php-source .php`.

* * *

还有一个建议，在将您的网站文件夹命名为时不要使用空格

> Web 服务器有不同的方式来处理（编码）空格字符。当其他人链接到您的网站时，这可能会导致问题。他们可能会错误地对空格字符进行编码，从而导致链接断开。

# mysql - 如何找出mysql中索引的大小（包括主键）

> ID：14375289
> 
> 赞同：2
> 
> 时间：2013-01-17T08:55:55.697
> 
> 标签：mysql, innodb, indexing

2 个常见的答案是使用 [show_table_status](https://stackoverflow.com/questions/781873/how-to-figure-out-size-of-indexes-in-mysql)和[INFORMATION_SCHEMA.TABLES](https://stackoverflow.com/questions/4052641/how-do-i-determine-the-size-of-an-index-in-mysql-5-1)

但似乎，它们都没有计算主键的大小。

我有数百万条记录的表，这些记录带有主键，没有其他索引，上面提到的两种方法都`Index_length: 0`适用于该表。表是 INNODB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:33:53.130

您的主键是您的表。在 InnoDB 中，主键包含实际数据，因此如果主键包含数据，它就是表。

想一想。您在 InnoDB 表聚集索引和二级索引上获得两种不同类型的索引。不同之处在于聚集索引包含数据，二级索引包含索引列和指向数据的指针。因此，二级索引不包含数据，而是包含数据在 CLUSTERED 索引中的位置。

通常主键是聚集索引。存储包含所有值的表和包含所有值的聚集索引的效率非常低。这将有效地使表格的大小翻倍。

因此，当您在 InnoDB 上有一个主键时，表大小就是主键的大小。在某些数据库系统中，您可以将二级索引作为主键，将单独的索引作为聚集键，但是 InnoDB 不允许这样做。

请阅读以下链接以获取更多详细信息：

[http://dev.mysql.com/doc/refman/5.0/en/innodb-table-and-index.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-table-and-index.html)

[http://dev.mysql.com/doc/refman/5.0/en/innodb-index-types.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-index-types.html)

在这些链接中，他们更详细地解释了我上面所说的一切。简单地说，你已经有了主键索引的大小，因为它就是你的表的大小。

希望有帮助。

# javascript - 如果焦点不在表单元素上，则在 iPad ( safari ) 上未检测到关键事件

> ID：14375291
> 
> 赞同：0
> 
> 时间：2013-01-17T08:56:00.280
> 
> 标签：javascript, html, ipad, safari

我想检测我网页上的 keyDown 事件。除了 iPad ( safari ) 外，其他地方一切都很好。如果焦点在任何文本元素或下拉列表等上，它就会被检测到。

我尝试使用 tabindex 但不知道它的工作原理（我看不到焦点是否正在改变。）

如何使这项工作。

谢谢

# tomcat7 - 在 tomcat 7.0.30 中部署 guvnor.war 时面临的问题

> ID：14375304
> 
> 赞同：6
> 
> 时间：2013-01-17T08:56:23.833
> 
> 标签：tomcat7, drools-guvnor

如何在 Tomcat 7.0.30 服务器中部署 guvnor.war（版本 5.4.0.Final）？它给了我以下错误：

> **类型**：异常报告
> 
> **信息**
> 
> **说明**：服务器遇到内部错误，导致无法完成此请求。
> 
> **例外**
> 
> ```
> java.lang.NullPointerException
>   org.jboss.seam.transaction.TransactionServletListener.requestInitialized(TransactionServletListener.java:106)
>   org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
>   org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
>   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
>   org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
>   org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
>   org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
>   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
>   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
>   java.lang.Thread.run(Thread.java:722) 
> ```
> 
> 注意 Apache Tomcat/7.0.30 日志中提供了根本原因的完整堆栈跟踪。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T12:41:12.560

以下为我解决了上述问题。我已经`TomCat 7.0.34`安装了`5.4.0 Final of Guvnor`.

`<context-param>`您可以通过将适当的添加到`web.xml`您应该在其中找到的文件中来禁用接缝事务侦听器

```
[tomcat-dir]\webapps\[nameOfGuvnorJar]\WEB-INF\ 
```

安装位置`[tomcat-dir]`的顶级目录路径在哪里`Tomcat`。并且`[nameOfGuvnorJar]`是您为已部署的 guvnor 应用程序指定的名称`Tomcat`。

所需的行是

```
<context-param>
   <param-name>org.jboss.seam.transaction.disableListener</param-name>
   <param-value>true</param-value>
</context-param> 
```

它需要添加到`<web-app>`元素内部

您可能需要重新启动网络服务器才能获取更改。

# cakephp - 配置路由器 cakephp 以制作无限/可选参数

> ID：14375305
> 
> 赞同：2
> 
> 时间：2013-01-17T08:56:38.640
> 
> 标签：cakephp, parameters, routing

我有一个系统允许访问者通过列出、排序和过滤来浏览产品。

当访问者通过选择“品牌”、“操作系统类型”、“cpu”等进行过滤时，我希望我的 url 看起来像这样`"/category/smartphones/samsung/android/.../"`，所以他们过滤的每一件事，url 都会改变如下：

```
filter by brand : /category/smartphones/samsung/
by os type : /category/smartphones/android/
by brand and os type : /category/smartphones/samsung/android/
... 
```

此外，访问者可以在筛选时进行排序，也可以在排序时进行筛选。所以网址可以更像`"/category/smartphones/samsung/android/sort:created/direction:desc/"`

我不知道 cakephp 能不能做这样的事情，因为我是这个框架的初学者。或任何类似的解决方案？

我刚刚完成了路由器中的排序配置。但我不知道如何从这样的事情开始（过滤器是无限参数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T04:57:25.243

这实际上很简单，如果您对 Cake 的默认路由方法感到满意，您甚至不需要在路由文件中添加条目。:-)

这就是我所做的...

```
class PagesController extends AppController {
    function test() {
        debug($this->params['named']);
        debug($this->params['pass']);
    }
} 
```

然后我打电话...`http://localhost/pages/test/x/y/z/something:x/else:y/1/2/3`

它输出这个...

```
array(
    'something' => 'x',
    'else' => 'y'
)

array(
    (int) 0 => 'x',
    (int) 1 => 'y',
    (int) 2 => 'z',
    (int) 3 => '1',
    (int) 4 => '2',
    (int) 5 => '3'
) 
```

因此，您只需使用`$this->params['named']`and`$this->params['pass']`即可获得所需的条款。希望有帮助！

# matlab - MATLAB 配置的修订控制

> ID：14375306
> 
> 赞同：3
> 
> 时间：2013-01-17T08:56:40.327
> 
> 标签：matlab, version-control

MATLAB 安装的哪些文件或文件夹应受修订控制？

我指的不是我的代码、模型等，而是 MATLAB 配置文件、应用程序数据等。确保我的所有团队都具有相同设置所需的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:23:21.763

管理此问题的最佳方法是使用初始化脚本。把它放在顶层项目文件夹中，并给它取个好听的名字：

```
%% initMyProject.m

% RestoreDefault
restoredefaultpath();
set(0,'userdata',[]);
clear classes;
javaclasspath({});  

% Matlab
addpath(fullfile(pwd,'lib','subdirA'))
addpath(fullfile(pwd,'lib','subdirB')) % ..etc

% Java
addpath(fullfile(pwd,'java','myJarA.jar') 
addpath(fullfile(pwd,'java','myJarB.jar') % ..etc

% Rendering
opengl('hardware');

% Solver
setparam(...)

disp('Initialization complete.') 
```

然后，用户将编辑 a `startup.m`（如此[处所述](http://www.mathworks.com/help/matlab/matlab_env/startup-options.html)），以调用 init 脚本。这个文件应该放在 Linux 用户的主目录，或者*C:/Users//Documents/Matlab*目录（Windows）：

```
% startup.m
cd('C:\workspace\myProjectCheckout')
initMyProject() 
```

这种方法有很多好处：

*   *执行svn update*或*git pull*时设置*保持同步*
***   很好地扩展到多个项目、多个结帐*   不需要管理员权限，无需用户复制文件*   跨 Linux、Mac 和 PC 以及跨 Matlab 版本兼容（比尝试直接管理配置设置文件稳定得多）**

 **restoreDefault方法有点笨拙，但它们确实保证了干净的环境，因此请根据需要使用*。***

# process - pThreads 和 POSIX 进程之间的睡眠/唤醒机制；

> ID：14375307
> 
> 赞同：1
> 
> 时间：2013-01-17T08:56:41.723
> 
> 标签：process, synchronization, pthreads, sleep, wakeup

我有一个创建多个 pThread 的 C 进程。要休眠并唤醒线程，我正在使用 pThread 条件。但是，我想以 pThreads 可以唤醒它的方式休眠 POSIX 进程。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:09:11.967

如果您只是指多线程进程中的初始线程（从 开始`main()`的线程），那么它与其他线程非常相似，并且可以使用普通的 pthreads 同步原语。

# c# - Visual Studio 正则表达式查找和替换功能

> ID：14375315
> 
> 赞同：1
> 
> 时间：2013-01-17T08:57:27.237
> 
> 标签：c#, regex, visual-studio, visual-studio-2012

我正在尝试找到所有`var.AppendLine("...");`并将它们替换为`Append("...\n");`

一直在玩正则表达式，但似乎一无所获。有人对在这里使用什么正则表达式有建议吗？

`var`可以是变量名，我需要选择`...`替换为`Append("$1\n");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:06:05.170

我认为您的意思是“搜索和替换 VS 窗口中的正则表达式？然后类似

```
<{[a-zA_Z]+\.}{AppendLine\("}{[^"]+}{"\)} 
```

替换为

```
\1Append("\3\\n") 
```

（如果您想删除“var。”部分，请删除 \1，在您的问题中不清楚）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:09:21.000

我假设您实际上不想摆脱`var`：

搜索：`<{[a-zA-Z0-9]+}.AppendLine\("{[^"]+}"\)`

用。。。来代替：`\1.Append("\2\\n")`

# xml - 在具有 apply-templates 的元素之后添加属性与 xalan-c 和 xsltproc 的行为不同。什么是正确的？

> ID：14375316
> 
> 赞同：0
> 
> 时间：2013-01-17T08:57:33.453
> 
> 标签：xml, xslt, xalan

我注意到 xalan-c 和 xsltproc 之间的以下区别。其中哪一项是正确的？规范对此有何评论？

源xml：-

```
<a attr="val1">
  <b d="5">
  </b>
  <b d="10">
  </b>
</a> 
```

样式表：-

```
<xsl:template match="@* | text() | comment() | processing-instruction()">
  <xsl:copy/>
</xsl:template>

<xsl:template match="*">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="a">
  <a>
    <c>
      <xsl:call-template name="gcd">
        <xsl:with-param name="nums" select="./b/@d"/>
      </xsl:call-template>
    </c>
    <xsl:apply-templates select="./@*"/>
  <a>
</xsl:template> 
```

xsltproc 给了我：-

```
<a attr="val1">
  <c>5</c>
</a> 
```

虽然 xalan-c 给了我：-

```
<a>
  <c>5</c>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:18:23.763

我认为问题可能出在这条线上

```
<xsl:apply-templates select="./@*"/> 
```

特别是它的位置，即在模板中创建**c元素之后。**属性应该在任何子元素之前添加到元素上。事实上，我很惊讶您没有收到“必须在元素的任何子节点之前添加属性节点”这样的错误。

假设您确实希望将属性添加到**a**元素，请尝试以下操作

```
<xsl:template match="a">
  <a>
    <xsl:apply-templates select="@*"/>
    <c>
      <xsl:call-template name="gcd">
        <xsl:with-param name="nums" select="./b/@d"/>
      </xsl:call-template>
    </c>
  <a>
</xsl:template> 
```

这应该会给出一致的结果。

如果您不想要这些属性，只需删除**应用模板**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:22:18.013

xsltproc 行为对我来说似乎不正确。正如 Tim C 所说，规范提供了两种选择：忽略属性或发出错误信号。它不允许将属性实际添加到元素的适当位置的选项。但是，对于规范定义“可恢复错误”的这些情况，为错误执行错误的恢复操作并不是非常严重的不合格，尤其是当恢复操作是为了执行用户可能想要的操作时。事实上，样式表是错误的，应该修复。

# android - Android 上 TextView 的限制

> ID：14375317
> 
> 赞同：2
> 
> 时间：2013-01-17T08:57:36.250
> 
> 标签：android, textview

我想设置 TextView max line 2 并在中间显示“...”。
我的布局xml如下：

```
<TextView
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="abcdefghijklmnopqrstuvwxyz"
    android:ellipsize="middle"
    android:maxLines="2"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

但它显示如下：

```
abcdefgh
ijklmnop 
```

它显示 2 行，但在中间或末尾不显示任何“...”。
我该如何修改它？　

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:00:39.777

`android:ellipsize`仅当没有足够的空间来显示`TextView`. 在您的情况下，您已设置`android:layout_width`为`fill_parent`并且文本不够长，因此没有使用椭圆大小。将其更改`android:layout_width`为少量，`dip`您会看到差异。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:06:03.287

根据需要在 TextView 上设置[android:ellipsize 属性](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aellipsize)（可能设置为“结束”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:01:02.487

尝试设置`android:ellipsize="end"`。

> ```
> <TextView
> android:id="@+id/text"
> android:layout_width="fill_parent"
> android:layout_height="wrap_content"
> android:gravity="center"
> android:text="abcdefghijklmnopqrstuvwxyz"
> android:ellipsize="end" <-----change it to end
> android:maxLines="2"
> android:textAppearance="?android:attr/textAppearanceLarge" /> 
> ```

# asp.net - 根据 RoleID 和层次结构向下钻取到最低级别的 Sql 查询

> ID：14375318
> 
> 赞同：0
> 
> 时间：2013-01-17T08:57:38.380
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我们有一个应用程序，用户正在输入他们的时间努力。我们有两个表，`Production`用于输入所有生产任务的表和`NonProduction`用于在应用程序中输入所有非生产相关任务的表。我们还有一个`UserInfo`存储所有用户信息的表，例如他的 eCode、Name、Designation、RoleID、ImmediateSupervisor ECode，用户正在向其报告等。我们正在尝试以这种方式进行 sql 查询，以便任何角色 ID 大于 1 的用户都可以向下钻取并提取在他下报告的用户的生产和非生产信息，但条件是提取的报告仅具有 RoleID 1。例如，A Manager RoleID 是 4，所以他首先向下钻取并找到所有向他报告的用户（此信息在 UserInfo 表的 ImmediateSupervisor 列中）即 RoleID 3 或 RoleID 4，然后我们再次向下钻取这些用户并提取向他们报告的信息并一直持续到我们向下钻取到 ROleID 1 并且一旦我们向下钻取到该级别，

下面是Create Table格式的表结构查询；

**生产台**

```
CREATE TABLE [dbo].[Production]
(
    [ProductionTimeEntryID]  [int] IDENTITY(100, 1) NOT NULL,
    [CalendarDate]           [datetime] NOT NULL,
    [UserID]                 [int] NOT NULL,
    [NatureOfWorkID]         [int] NOT NULL,
    [RegionProjectID]        [int] NOT NULL,
    [CountyID]               [int] NOT NULL,
    [WorkTypeID]             [int] NOT NULL,
    [TaskID]                 [int] NOT NULL,
    [VolumeProcessed]        [int] NOT NULL,
    [NosOfError]             [int] NULL,
    [NosOfVolumeAudited]     [int] NULL,
    [TimeSpent]              [varchar](25) NULL,
    [Comment]                [varchar](250) NULL,
    [IsTaskCompleted]        [int] NOT NULL,
    [isCurrentDayTask]       [bit] NOT NULL,
    [SupervisorECode]        [nvarchar](50) NULL,
    CONSTRAINT [PK_Production] PRIMARY KEY CLUSTERED([ProductionTimeEntryID] ASC)
    WITH (
        PAD_INDEX = OFF,
        STATISTICS_NORECOMPUTE = OFF,
        IGNORE_DUP_KEY = OFF,
        ALLOW_ROW_LOCKS = ON,
        ALLOW_PAGE_LOCKS = ON
    ) ON [PRIMARY]
) ON [PRIMARY]
    GO

SET ANSI_PADDING OFF
    GO

    ALTER TABLE [dbo].[Production]  WITH NOCHECK ADD  CONSTRAINT 
[FK_Production_County] FOREIGN KEY([CountyID])
    REFERENCES [dbo].[County] ([CountyID])
    GO

    ALTER TABLE [dbo].[Production] CHECK CONSTRAINT [FK_Production_County]
    GO

    ALTER TABLE [dbo].[Production]  WITH NOCHECK ADD  CONSTRAINT 
[FK_Production_NatureOfWork] FOREIGN KEY([NatureOfWorkID])
    REFERENCES [dbo].[NatureOfWork] ([NatureOfWorkID])
    ON 
UPDATE CASCADE
       ON

DELETE CASCADE
    GO

    ALTER TABLE [dbo].[Production] CHECK CONSTRAINT [FK_Production_NatureOfWork]
    GO

    ALTER TABLE [dbo].[Production]  WITH NOCHECK ADD  CONSTRAINT 
[FK_Production_RegionAndProjectInfo] FOREIGN KEY([RegionProjectID])
    REFERENCES [dbo].[RegionAndProjectInfo] ([RegionProjectID])
    GO

    ALTER TABLE [dbo].[Production] CHECK CONSTRAINT 
[FK_Production_RegionAndProjectInfo]
    GO

    ALTER TABLE [dbo].[Production]  WITH CHECK ADD  CONSTRAINT 
[FK_Production_Task] FOREIGN KEY([TaskID])
    REFERENCES [dbo].[Task] ([TaskID])
    GO

    ALTER TABLE [dbo].[Production] CHECK CONSTRAINT [FK_Production_Task]
    GO

    ALTER TABLE [dbo].[Production]  WITH CHECK ADD  CONSTRAINT 
[FK_Production_USERINFO] FOREIGN KEY([UserID])
    REFERENCES [dbo].[USERINFO] ([UserID])
    ON 
UPDATE CASCADE
       ON

DELETE CASCADE
    GO

    ALTER TABLE [dbo].[Production] CHECK CONSTRAINT [FK_Production_USERINFO]
    GO

    ALTER TABLE [dbo].[Production]  WITH CHECK ADD  CONSTRAINT 
[FK_Production_WorkType] FOREIGN KEY([WorkTypeID])
    REFERENCES [dbo].[WorkType] ([WorkTypeID])
    ON 
UPDATE CASCADE
       ON

DELETE CASCADE
    GO

    ALTER TABLE [dbo].[Production] CHECK CONSTRAINT [FK_Production_WorkType]
    GO

    ALTER TABLE [dbo].[Production] ADD  DEFAULT((0)) FOR [IsTaskCompleted]
    GO

    ALTER TABLE [dbo].[Production] ADD  DEFAULT((0)) FOR [isCurrentDayTask]
    GO 
```

**用户信息表：**

```
CREATE TABLE [dbo].[USERINFO](
[UserID] [int] IDENTITY(1,1) NOT NULL,
[UserECode] [nvarchar](50) NOT NULL,
[UserName] [nvarchar](250) NOT NULL,
[CCCode] [nvarchar](50) NULL,
[CCName] [nvarchar](50) NULL,
[Password] [varchar](50) NULL,
[IsFlagEnabled] [bit] NULL,
[IsFirstTimeUserLoggedIn] [bit] NULL,
[EmailAddress] [nvarchar](250) NULL,
[Designation] [varchar](50) NULL,
[ShiftStartTime] [varchar](8) NULL,
[ShiftEndTime] [varchar](8) NULL,
[WeekendShiftStartTime] [varchar](8) NULL,
[WeekendShiftEndTime] [varchar](8) NULL,
[RoleID] [int] NULL,
[ShiftEndFlagStatus] [int] NOT NULL,
[ShiftStartTimeWithTimeStamp] [datetime] NULL,
[ShiftEndTimeWithTimeStamp] [datetime] NULL,
[LoggedInDateTime] [datetime] NULL,
[FirstLoggedInOnthedayflag] [int] NOT NULL,
[ImmediateSupervisor] [nvarchar](50) NULL,
 CONSTRAINT [PK_USER] PRIMARY KEY CLUSTERED 
(
    [UserID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
ALTER TABLE [dbo].[USERINFO] ADD  DEFAULT ((1)) FOR [RoleID]
GO
ALTER TABLE [dbo].[USERINFO] ADD  DEFAULT ((1)) FOR [ShiftEndFlagStatus]
GO
ALTER TABLE [dbo].[USERINFO] ADD  DEFAULT ((1)) FOR [FirstLoggedInOnthedayflag]
GO 
```

如何进行此类查询或查询类型以将其合并到我的应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:27:06.830

您有一个具有树结构的表，提取它的标准方法是使用递归 cte，如下所示：

```
;with UserTree as
(
    select UserECode, UserID
      from USERINFO
     where UserID = <the managers user-id>
    union all
    select UserECode, UserID
      from UserTree parent
           inner join USERINFO child
                   on child.ImmediateSupervisor = parent.UserECode
)
select * --change this to the specific columns that you need
  from UserTree ut
       inner join Production p
               on p.UserID = ut.UserID
 where RoleId = 1 
```

请注意，我还没有设法测试此代码，但我相信您可以自己解决任何小问题。

[有关递归 cte:s 的更多信息。](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

我也忍不住注意到您的树数据结构存在一些潜在问题： ImmediateSupervisor 似乎引用了 UserECode，我可以在您发布的表结构中看到两个问题：

1.  从 ImmediateSupervisor 到 UserECode 没有外键。这可能会导致用户的主管不存在。
2.  UserECode 不是唯一的。这可能导致多个用户使用相同的代码，这意味着每个用户有多个主管，这将真正搞砸递归 cte 查询。

我在这里没有全貌，但我会更改 ImmediateSupervisor 列以引用 PK UserId。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T09:12:21.757

```
with
ProductionCTE(CalendarDate,RoleID,UserID,UserECode,UserName,ImmediateSupervisor,NatureOfWorkName,RegionProjectName,CountyName,WorkTypeName,TaskName,VolumneProcessed,TimeSpent,Comment)
as
(
select P.CalendarDate,U.RoleID,U.UserID,U.UserECode,U.UserName,U.ImmediateSupervisor,N.NatureofWorkName,
R.RegionProjectName,C.Countyname,W.WorktypeName,T.TaskName,P.VolumeProcessed,P.Timespent,P.Comment
from production P inner join NatureOfWork N
on N.NatureofWorkID=P.natureofworkid
inner join dbo.RegionAndProjectInfo R
on R.RegionProjectID=P.RegionProjectID
inner join county C
on C.countyid=P.countyid
inner join worktype W
on W.Worktypeid=P.worktypeID
inner join task T
on T.taskid=P.TaskID
inner join UserInfo U
on U.Userid=P.userid
where P.userid=952

    union all

        select P.CalendarDate,U.RoleID,U.UserID,U.UserECode,U.UserName,U.ImmediateSupervisor,N.NatureofWorkName,
        R.RegionProjectName,C.Countyname,W.WorktypeName,T.TaskName,P.VolumeProcessed,P.Timespent,P.Comment
        from production P inner join NatureOfWork N
        on N.NatureofWorkID=P.natureofworkid
        inner join dbo.RegionAndProjectInfo R
        on R.RegionProjectID=P.RegionProjectID
        inner join county C
        on C.countyid=P.countyid
        inner join worktype W
        on W.Worktypeid=P.worktypeID
        inner join task T
        on T.taskid=P.TaskID
        inner join UserInfo U
        on U.Userid=P.userid
        inner join ProductionCTE
        on U.ImmediateSupervisor=ProductionCTE.UserECode
)
select distinct CalendarDate,RoleID,UserID,UserECode,UserName,ImmediateSupervisor,NatureOfWorkName,RegionProjectName,CountyName,WorkTypeName,TaskName,VolumneProcessed,TimeSpent,Comment from ProductionCTE order by UserECode 
```

实施递归 CTE 解决了这个问题，现在我能够根据层次结构提取记录。

# r - 是否可以在 R 中创建没有连续数据的 3d 等高线图？

> ID：14375320
> 
> 赞同：6
> 
> 时间：2013-01-17T08:57:40.470
> 
> 标签：r, plot, ggplot2, gis, contour

我想用 x,y,z 数据创建变量 z 的轮廓。但是，似乎我们需要按递增顺序提供数据。

我尝试使用一些代码，但它给了我错误。

我尝试了以下代码：试用1：

```
age2100 <- read.table("temp.csv",header=TRUE,sep=",")

x <- age2100$x
y <- age2100$y
z <- age2100$z

contour(x,y,z,add=TRUE,col="black") 
```

我收到以下错误

```
Error in contour.default(x, y, z, add = TRUE, col = "black") : increasing 'x' and 'y' values expected 
```

然后我尝试使用 ggplot2 创建轮廓。我使用了以下代码：

```
library("ggplot2")
library("MASS")
library("rgdal")
library("gpclib")
library("maptools")
age2100 <- read.table("temp.csv",header=TRUE,sep=",")
v <- ggplot(age2100, aes(age2100$x, age2100$y,z=age2100$z))+geom_contour()
v 
```

我收到以下错误：

警告信息：

```
Not possible to generate contour data 
```

请在以下位置找到数据[https://www.dropbox.com/s/mg2bo4rcr6n3dks/temp.csv](https://www.dropbox.com/s/mg2bo4rcr6n3dks/temp.csv)

谁能告诉我如何从 temp.csv 的第三个变量 (z) 创建轮廓数据？我需要做很多次，所以我试图在 R 而不是 Arcgis 上做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T10:01:27.007

这是一个如何使用包进行插值的`interp`示例`akima`：

```
age2100 <- read.table("temp.csv",header=TRUE,sep=",")

x <- age2100$x
y <- age2100$y
z <- age2100$z

require(akima)

fld <- interp(x,y,z)

par(mar=c(5,5,1,1))
filled.contour(fld) 
```

![在此处输入图像描述](../Images/125de18a3098f64da216eec2a18189b5.png)

这是使用该`image`函数的替代图（这允许在添加较低级别的绘图函数时具有一定的灵活性（需要该`image.scale`函数，可在[此处](http://menugget.blogspot.de/2011/08/adding-scale-to-image-plot.html)找到）：

```
source("image.scale.R") # http://menugget.blogspot.de/2011/08/adding-scale-to-image-plot.html

x11(width=5, height=6)
layout(matrix(c(1,2), nrow=1, ncol=2), widths=c(4,1), height=6, respect=TRUE)
layout.show(2)

par(mar=c(4,4,1,1))
image(fld)
contour(fld, add=TRUE)
points(age2100$x,age2100$y, pch=".", cex=2)

par(mar=c(4,0,1,4))
image.scale(fld$z, xlab="", ylab="", xaxt="n", yaxt="n", horiz=FALSE)
box()
axis(4)
mtext("text", side=4, line=2.5) 
```

![在此处输入图像描述](../Images/4fce46fcfe08366cbe0e1a091148afd2.png)

# blackberry - BlackBerry® Device Simulators v5.0.0.713 (9550) 未启动

> ID：14375325
> 
> 赞同：1
> 
> 时间：2013-01-17T08:58:15.840
> 
> 标签：blackberry, blackberry-simulator

我不断收到此错误：

> 灾难性的断言失败

当我尝试启动模拟器（BlackBerry® Device Simulators v5.0.0.713 (9550)）时，我使用的是 BlackBerry Theme Studio 6.0。我能做些什么？

# plugins - Jekyll tag_gen 插件不工作

> ID：14375331
> 
> 赞同：1
> 
> 时间：2013-01-17T08:58:30.330
> 
> 标签：plugins, tags, jekyll

我正在尝试`tag_gen.rb`在我的 Jekyll 上安装插件。我在[这里](http://charliepark.org/tags-in-jekyll/)找到了这个解决方案。我把它复制到文件夹中：

```
 ~/_plugins/tag_gen.rb 
```

创建的布局：

```
 ~/_layouts/tag_index.html 
```

在我的帖子中指定了一些标签：

```
---
tags: [tag1, tag2, tag3]
--- 
```

我设置`safe: false`在`_config.yml`. 我通过这样的命令运行 Jekyll 服务器：

```
source ~/.rvm/scripts/rvm
jekyll --server 
```

Jekyll 版本是：

```
jekyll -v
Jekyll 0.12.0 
```

在我安装它之后，没有任何反应。我希望`tags`文件夹中有新页面，但它是空的。此外，在执行 Jekyll 时，我在控制台上看不到任何错误。

我做错了什么？如何发现错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:10:45.977

我发现了一个问题。我所有的标签都有 url `~/tags/tag_name`，但 jekyll 在文件夹中生成它们`~/_site/tag`。因此，我将其内容形式复制`~/_site/tag`到`~/tags/`并且一切正常。

# java - 无法在 jar 文件中播放嵌入的声音

> ID：14375338
> 
> 赞同：0
> 
> 时间：2013-01-17T08:58:44.783
> 
> 标签：java, nullpointerexception, embedded-resource, javasound

我正在创建一个名为 BatteryBeeper 的个人使用软件。当充电是我设置的提醒时，它会提醒我给笔记本电脑充电。

当电荷达到设定的阈值时，它应该会播放声音。

我看了答案：[声音没有在 jar 中播放](https://stackoverflow.com/questions/4923907/sound-not-playing-in-jar)，我`AudioInputStream`的构造类似于 Jigar Joshi 提到的。

但是我得到一个空异常：

```
java.lang.NullPointerException
    at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)
    at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
    at demo.BatteryBeeper.setupSoundPlayback(BatteryBeeper.java:169)
    at demo.BatteryBeeper.<init>(BatteryBeeper.java:41)
    at demo.BatteryBeeper.main(BatteryBeeper.java:35) 
```

这是我加载声音的代码：

```
public void setupSoundPlayback(){
        try{
            buzzer = AudioSystem.getClip();
            in = AudioSystem.getAudioInputStream(BatteryBeeper.class.
                    getResourceAsStream("sound/buzzer3_x.wav"));
            buzzer.open(in);
        }catch(Exception e){
            e.printStackTrace();
        }

    } 
```

这是播放它的代码：

```
public void playSound(){
        buzzer.start();
    } 
```

**是什么导致了问题？**

## 杂项

这是一个常见的 Eclipse 项目。有一个`sound`文件夹下`src`有wave文件

## 编辑

在AlexR的回答之后，我改变了路径并得到了一个新的异常：

```
javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input stream
    at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
    at demo.BatteryBeeper.setupSoundPlayback(BatteryBeeper.java:169)
    at demo.BatteryBeeper.<init>(BatteryBeeper.java:41)
    at demo.BatteryBeeper.main(BatteryBeeper.java:35) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:05:06.557

你的问题不在于播放声音。您的问题在于访问嵌入式资源。当您使用时，`BatteryBeeper.class.getResourceAsStream("sound/buzzer3_x.wav")`您尝试检索位于类所在的同一包中的资源`BatteryBeeper`。这意味着您的文件位于`/demo/sound/buzzer3_x.wav`. 看来这是错误的。如果您的文件确实在`sound/buzzer3_x.wav`使用中`getResourceAsStream("/sound/buzzer3_x.wav")`（注意路径中的前导斜杠）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:07:42.647

如果您仍然收到消息“无法从 InputStream 获取 AudioInputStream”，则问题很可能是 InputStream 阶段没有引发信息错误。

如果您查看 AudioSystem.getAudioInputStream(InputStream) 的规范，您会看到输入流可能由于不支持标记/重置操作而失败，但由于某种原因，它选择抛出其他错误消息！

[http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.io.InputStream%29](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.io.InputStream%29)

更好的是，使用 AudioSystem.getAudioInputStream(URL) 格式，音频文件的可标记性不是问题，因为中间 InputStream 永远不会创建 afaik。

[http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.net.URL%29](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.net.URL%29)

URL 表单的另一个好处是可以很好地处理嵌入在 Jar 中的文件。当然，您仍然必须提供正确的地址。

# sql - 计算具有特定值的记录数

> ID：14375339
> 
> 赞同：1
> 
> 时间：2013-01-17T08:58:47.420
> 
> 标签：sql, count, case

我有一张桌子：

桌队

```
Id_team         member_1         member_2         member_3
1                Alice            Ben
2                Ben
3                Charles          Alice            Ben
4                Ben              Alice 
```

我需要知道 Alice 是多少个不同团队的成员（不计算她是第一个成员、第二个还是第三个成员）。在我的示例中，正确答案是 2（Ben 在 Id_team 1 和 4 中，Ben 和 Charles 在 Id_team = 3）。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:06:56.493

您必须分别计算每列中的“爱丽丝”以确保不同的列

您似乎要检查的是“

```
SELECT
   COUNT(DISTINCT CASE WHEN member_1 = 'Alice' THEN member_1 END) +
   COUNT(DISTINCT CASE WHEN member_2 = 'Alice' THEN member_2 END) +
   COUNT(DISTINCT CASE WHEN member_3 = 'Alice' THEN member_3 END)
FROM tablename
WHERE 'Alice' IN(member_1, member_2, member_3); 
```

更新：固定 COUNT

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:01:35.933

好的，因此您希望将具有不同职位的相同团队（例如 Alice&Ben、Ben&Alice）算作一个。

为此，请按升序对每个位置的 alice 成员进行排序，并对结果进行计数（这将 2 返回到您的示例）：

```
SELECT COUNT(*) FROM
(
    SELECT
        least( member_2, member_3) AS l,
        greatest(member_2, member_3) AS g
    FROM teams 
    WHERE 
      member_1 = 'Alice' 
UNION
    SELECT
        least( member_1, member_3) AS l,
        greatest(member_1, member_3) AS g
    FROM teams 
    WHERE 
      member_2 = 'Alice' 
UNION
    SELECT
        least( member_1, member_2) AS l,
        greatest(member_1, member_2) AS g
    FROM teams 
    WHERE 
      member_3 = 'Alice' 
) q
; 
```

请注意，这只能对 3 个成员团队的特殊情况进行，因为最小和最大可以选择其他两个成员 - 对于 4 和更大的成员数，需要更复杂的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T09:57:18.077

您可以尝试连接字段（按字母顺序排序）以将它们转换为字符串列表。然后`distinct`在这个列表上运行一个（所以它会列出所有*单独的*团队）然后搜索包含多少个字符串`Alice`

从这里最难的是“按字母顺序连接”，因为我真的找不到任何好的功能来做到这一点，但是`GROUP_CONCAT`用单独`SELECT`的 s 和`UNION`s 将字段转换为行应该可以做到：

```
SELECT COUNT(*)
  FROM (
   SELECT DISTINCT team_as_string
     FROM (
       SELECT id tid, GROUP_CONCAT(q ORDER BY q ASC SEPARATOR ',') team_as_string
       FROM (
                 SELECT id, member_1 q FROM teams
           UNION SELECT id, member_2 q FROM teams
           UNION SELECT id, member_3 q FROM teams
           /* add more fields if needed */
       ) c
       GROUP BY tid
     ) b
  ) a  
  WHERE team_as_string LIKE '%Alice%' 
```

~~我还没有检查它的语法错误，但它在逻辑上应该没问题。~~测试并给出正确答案 (2)

如果需要，可以为更多成员增强此功能。

当然，如果成员在单独的连接表中，那么整个 group_concat 部分可以简化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T09:03:51.533

> 我需要知道 Alice 是多少个不同团队的成员

尝试这个：

```
SELECT 'Alice', COUNT(id_team)
FROM tablename
WHERE 'Alice' IN(member_1, member_2, member_3); 
```

结果：

```
| ALICE | THECOUNT |
--------------------
| Alice |        3 | 
```

[小提琴演示。](http://www.sqlfiddle.com/#!2/69c62/3)

如果`id_team`不是唯一的，请使用`COUNT(DISTINCT id_team)`.

# c++ - 我的程序被 Avast Antivirus 阻止

> ID：14375340
> 
> 赞同：41
> 
> 时间：2013-01-17T08:58:53.380
> 
> 标签：c++, c, virus

我是一名业余程序员，因为一个大问题而感到绝望和疯狂：我的大多数程序都被[Avast Antivirus](https://en.wikipedia.org/wiki/Avast_Antivirus)阻止，而有些则没有，我不明白为什么。我尝试调查的越多，我就越不了解问题可能是什么。

我请求您帮助找到解决方案，以便我的程序不再被阻止，或者作为默认设置，至少有一些强有力的线索可以解释为什么会出现这种情况。

网上已经有很多关于这个的话题。然而，他们中的大多数只给出了肤浅的答案：他们只是解释了防病毒软件如何与签名和检测启发式一起工作，或者说您只需将有问题的应用程序添加到白名单中，而无需询问任何其他问题。虽然这肯定是正确的，但在我看来，这不是可接受的答案，因为我仍然有自己的程序拒绝工作，没有任何具体的想法开始调查。

首先，唯一阻止我的程序的防病毒软件是 Avast 7.x。没有其他防病毒软件看到运行我的软件有任何不便。其次，我自己还没有安装 Avast；它安装在朋友的机器上。

我有[Windows 7](https://en.wikipedia.org/wiki/Windows_7)，他有[Windows XP](https://en.wikipedia.org/wiki/Windows_XP)。我完全确定问题只是avast：当它被暂时禁用时，或者如果程序被添加到它的白名单中，一切都按预期运行。

三个不同的程序遇到了麻烦：

*   一个文本编辑器，旨在取代 Windows[记事本](https://en.wikipedia.org/wiki/Notepad_%28software%29)，同时保持简单、高效和可定制
*   一个非常简单易用的小型业余音频播放器
*   某网络游戏平台的客户端程序，目前拥有1000多个用户

第一个是开源的，如果需要，我可以提供可执行文件和源代码的链接。另外两个是封闭源代码但可以免费使用，我只能给出当前版本的可执行文件的链接。

这三个程序之间唯一明显的共同点是作为开发人员的我，编译它们的 Windows 7 机器，MinGW/GCC 编译器系列，它们都是没有任何框架的[Win32](https://en.wikipedia.org/wiki/Windows_API) GUI 应用程序（没有[MFC](https://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library)，没有[WPF](https://en.wikipedia.org/wiki/Windows_Presentation_Foundation)，没有[Qt](https://en.wikipedia.org/wiki/Qt_%28software%29)、[wxWidgets](https://en.wikipedia.org/wiki/WxWidgets)或其他；只是纯 Win32/C GUI 应用程序）。

以下是我目前的观察和想法：

*   我的文本编辑器的 1.1、1.2.1 和 1.3 版本被阻止。它们是 C 语言，而不是 C++ 语言，已使用 GCC 3.4.5 以 Unicode 模式编译，并以可移植 ZIP 文件的形式分发（通过可移植，我的意思是无需安装程序，也无需安装）
*   同一文本编辑器的 1.4.1 版本未被阻止。它已经用 GCC 4.7.2 编译，仍然是 C 而不是 C++，仍然是 Unicode 模式，并且仍然是一个可移植的 zip 文件
*   我的音频播放器的所有版本都被阻止；它们是启用了 0x 功能的 C++ 语言，已由 GCC 4.7.2 以 ANSI 模式编译，以可移植 zip 文件的形式分发
*   我的游戏的当前版本 1.7.2 未被阻止。它是 C 语言，在 ANSI 模式下使用 GCC 3.4.5 编译，并作为[Inno Setup](https://en.wikipedia.org/wiki/Inno_Setup) 5 安装程序分发。
*   我的游戏新版本2.0.0，目前是私测版，被封了。它是启用了 0x 功能的 C++ 语言，已在 Unicode 模式下使用 GCC 4.7.2 进行编译。我与我的私人 beta 测试团队共享它作为私人[Dropbox](https://en.wikipedia.org/wiki/Dropbox_%28service%29)文件夹中的 zip 文件

该问题是由 Avast 7.x 自动沙盒引起的。当尝试启动 avast 不喜欢的程序时会发生以下情况：

1.  用户在可执行文件上双击或回车
2.  程序启动，却几乎瞬间被Avast强行崩溃
3.  出现一个弹出窗口并显示如下内容：Avast 已将此程序放入其沙箱，因为它的声誉很低
4.  如果单击弹出窗口的继续按钮，则程序的执行将重新启动并正常工作
5.  如果不点击继续按钮，[Windows 资源管理器](https://en.wikipedia.org/wiki/File_Explorer)会冻结，可执行文件保留在[任务管理器](https://en.wikipedia.org/wiki/Task_Manager_(Windows))中，并且总是使用 76 KB 的 RAM，而无法杀死；终于在大约 5 分钟后，Windows 资源管理器解冻，程序重新启动并正常运行

这是无法接受的。我的程序，尤其是游戏的新手用户，不知道杀毒软件是如何工作的；不知道怎么加入白名单，为什么会解封；不知道如何更改他们的杀毒软件的设置；如果他们看到弹出窗口，将无法理解，最终会感到害怕或失望，因为他们无法在不知道为什么的情况下玩；如果他们没有看到弹出窗口，我不能指望他们在半冻结的计算机上等待 5 分钟。每次他们想玩。

从那里，我做了以下推论：

*   我的机器本身没有被感染，我分发的可执行文件中也没有注入病毒；否则，所有最近的程序都将被阻止；我有两个是（我的播放器和我的游戏的新版本），而一个不是（我的文本编辑器的最新版本）。游戏的1.7.2是2012年3月编译的，文本编辑器的1.4.1是2012年10月的。
*   出于同样的原因，最新版本的 GCC 4.7.2 不是原因；ANSI 与 Unicode 编译相同。
*   MinGW C++ 运行时，作为自动链接的 DLL 分发，在使用 GCC 4.7.2 编译的所有 C++ 应用程序中都是必需的，这可能不是原因，因为许多知名程序都使用它；并且我的文本编辑器被阻止并且在 C 中，因此不要使用它。
*   我的音频播放器和我的游戏有共同的音频库；这不是后来的原因，因为我的游戏版本 1.7.2 可以正常工作，而最新的私人测试版不行。当然，该音频库还用于许多其他已知或鲜为人知的未被阻止的应用程序。
*   玩家和游戏都使用[Winsock](https://en.wikipedia.org/wiki/Winsock)访问网络；所以同样的道理，这也不是原因
*   *如果*真的是Avast的名气，为什么我的文本编辑器1.4.1版本没有被屏蔽，只下载了70次左右，而被屏蔽的1.3版本却下载了300多次？看起来完全不合逻辑。70 个用户是否足以声称有关声誉的东西？300 个用户会更多吗？我真的不这么认为......可能需要数十万用户的临界质量。

除此之外，我还认为我将程序作为可移植 ZIP 文件分发的事实可能是 Avast 阻止的原因，相反，程序已很好地安装在程序文件中的事实可能是信任它的原因更多的。

于是我做了一个简单的体验：我为我的游戏的 beta 2.0.0 和我的文本编辑器的 1.3 版本编译了一个新的 Inno Setup 5 安装程序，发现安装程序本身被阻止了！

我和我的朋友做了另一个经验，在那里我试图找到程序崩溃的确切位置，基于使用 MessageBeep（MessageBox 也被阻止！）。我没有注意到任何问题。当在登录对话框中第一次调用 SetDlgItemText 时，游戏被阻止，但如果我删除所有 SetDlgItemText，它会被进一步阻止。在文本编辑器中，它在填充菜单栏时被阻止...

我的结论是，Avast 不喜欢我的新游戏版本、旧版本的文本编辑器和音频播放器中的某些内容。我的文本编辑器的最新版本中没有的东西。会是什么呢？你有什么线索吗？您是否只有一个想法，我如何才能继续找到它，以便我希望修复它？是否只有一种方法可以分析这样的问题，还是整个世界都被 Avast 搞砸了？

请注意，我是一个人而不是公司，所有这些程序都是免费使用的，我没有支付任何 IDE 来开发它们，并且用户使用它们时也没有向我付费，所以我假设一个证书可能根本买不起。此外，我不知道这是否是一个真正的解决方案，如何签署使用 GCC 编译的应用程序，我真的不想切换到像[Microsoft Visual C++](https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B) (MSVC) 这样的“usine à gaz”。如果有任何其他解决方案，即使是非常肮脏的解决方案，我宁愿强烈忘记该选项。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T09:10:58.113

增加所有防病毒软件信心的一个好方法是对您的代码进行数字签名。Thawte 拥有最便宜的公认证书，起价低于 100 欧元/年。

不能选择代码签名的另一种方法是：我用 PHP 为 Joomla 编写开源代码。在我收到 Avast 将我的文件标记为（假）阳性的第一个迹象后，我联系了他们，他们在几小时内将我的文件列入了白名单。

为了让我的生活更轻松，我正在创建一个具有所谓“危险”功能的单独文件，以便将来对程序的更改不需要重新提交以将其列入白名单。

阅读简短的 PHP 文件比逆向工程编译的代码更快，这可能有助于提高他们的响应速度；尽管如此，他们还是善良、快速和有效的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T09:03:07.397

防病毒程序通过分析文件中已知的“不良行为”模式来工作。

如果您的程序正在取消引用指针，将 200 字节写入 100 字节缓冲区或类似内容，那么您很可能会生成类似于已知攻击签名的代码（因为大多数攻击都利用这些类型的编程错误）。

您应该调试您的代码（如果在 Linux 上，请尝试[Valgrind](https://en.wikipedia.org/wiki/Valgrind)或[Electric Fence](https://en.wikipedia.org/wiki/Electric_Fence)）并确保正确处理内存。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T09:12:12.883

您可以对文章*[The Case of Evil WinMain](http://www.codeproject.com/Articles/71128/The-Case-of-Evil-WinMain)*感兴趣。

它说明了防病毒软件在处理链接一个简单的 C 运行时库的小程序时如何真正发疯。

您唯一能做的就是向防病毒制造商发出问题信号，并希望他们采取公平的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-24T20:41:11.513

好吧，我想通了。转到您的 Avast Antivirus 设置，您可以在其中添加例外的区域，*设置*→*防病毒*。然后向下滚动该菜单，出现一个名为*Exclusions*的区域，您可以在其中浏览到 Visual Studio 路径，即*C:* → *john* → *Documents* → *VisualStudio2010* → *projects*。

选择您的项目路径，它会将其添加到扫描异常列表中，您应该能够测试运行您的文件......它对我来说效果很好。由于另一位成员的建议，我还在同一菜单中禁用了深度扫描。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-19T03:32:29.997

Avast 具有称为网络捕获/深度扫描的功能。

这就是造成你麻烦的原因。

它甚至不打扰启发式方法。

如果没有任何[Authenticode](https://msdn.microsoft.com/en-us/library/ms537359(v=vs.85).aspx)签名，它*会*认为它可疑，并将其发送到 Avast Antivirus 以供他们扫描，直到他们声明没问题，您将无法运行它。一旦他们宣布它没问题，那么如果它与他们的版本匹配，那么所有其他使用 Avast Antivirus 的人都可以安全地运行它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-12T17:07:11.780

以下是使用 PowerShell 将应用程序排除在[Windows Defender](https://en.wikipedia.org/wiki/Windows_Defender)和 Microsoft 实时保护之外的方法：

```
// Create Windows Defender exclusion
string cmd = "powershell -Command \"Add-MpPreference -ExclusionPath '" + GetAppPath() + "'";
Process.Start(new ProcessStartInfo() { FileName = "cmd.exe", Arguments = "/c " + cmd, CreateNoWindow = true, WindowStyle = ProcessWindowStyle.Hidden }).WaitForExit();

// Create controlled folder exclusion
cmd = "powershell -Command \"Add-MpPreference -ControlledFolderAccessAllowedApplications '" + GetAppPath() + "\\MyApp.exe" + "'";
Process.Start(new ProcessStartInfo() { FileName = "cmd.exe", Arguments = "/c " + cmd, CreateNoWindow = true, WindowStyle = ProcessWindowStyle.Hidden }).WaitForExit(); 
```

我还没有弄清楚如何为[Norton AntiVirus](https://en.wikipedia.org/wiki/Norton_AntiVirus)和其他软件执行此操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-19T07:01:08.780

大多数防病毒程序都提供了启用例外的选项。

转到防病毒设置并将您的 C 或 C++ 文件文件夹添加到 *Exceptions*。

[![在此处输入图像描述](../Images/c9560f50ccbab8007ec3fb8a080b06b1.png)](https://i.stack.imgur.com/VlQ1t.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-23T05:13:17.480

我最近遇到了一些应用程序无法运行的问题。它们将显示为进程（在 Windows 下），但从不在任务管理器的应用程序选项卡下。这些进程通常有大约 120 KB 的内存大小，有时会有多个进程。

罪魁祸首是 Avast DeepScreen。来自 Avast：

> DeepScreen 技术允许 Avast 在执行未知文件时做出实时决策。

就我而言，[MATLAB](https://en.wikipedia.org/wiki/MATLAB)和其他一些应用程序一样被阻止。

Avast 没有任何迹象表明它正在阻止应用程序，从而发出“删除 Avast！”。上面的评论很合适。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-08-14T17:20:52.263

转到 Avast Antivirus*的“文件系统防护”*并单击“专家设置”按钮。

然后从左侧菜单中找到并单击“排除”选项。在文件排除列表中添加您的项目文件夹。这是安全的，除非危险病毒在您不知情的情况下爬入您的项目文件夹：P

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-03-25T21:52:37.100

您需要转到您的防病毒软件帐户→*设置*→*排除或类似的东西，然后输入其他人提到的文件路径。

我用 Avast Antivirus 做到了。第一次没有成功，所以我卸载并安装了。然后我去了排除，它现在可以工作了。

# java - 在应用引擎中使用 java 下载 blob

> ID：14375344
> 
> 赞同：0
> 
> 时间：2013-01-17T08:59:02.740
> 
> 标签：java, google-app-engine, blob

如何从应用程序引擎下载 blob？我想搜索一个特定的 blob，然后提供一个下载链接。我尝试的是：

```
<input type="text" name="search"> 
<input type="submit" value="SEARCH" > 
<a href="/mygaeproject1">download link</a> 
```

其中 mygaeprojectServlet 文件的 url 模式为 mygaeproject1....，文件内容为：

```
public class ProjectServlet extends HttpServlet {

  private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService(); 

  public void doGet(HttpServletRequest req, HttpServletResponse resp) 
     throws IOException 
  {
    BlobKey blobKey = new BlobKey(req.getParameter("blob-key"));      
    blobstoreService.serve(blobKey, resp);
    BlobInfoFactory blobInfoFactory = new BlobInfoFactory();
    BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(blobKey);
    resp.setContentLength(new Long(blobInfo.getSize()).intValue()); 
    resp.setHeader("content-type", blobInfo.getContentType()); 
    resp.setHeader("content-disposition", "attachment; filename=" + 
            blobInfo.getFilename()); 
    blobstoreService.serve(blobKey, resp); 
  }
} 
```

# ruby - 在 Warbler 中，如何通过 Ruby 代码访问已编译的二进制文件？

> ID：14375345
> 
> 赞同：0
> 
> 时间：2013-01-17T08:59:04.517
> 
> 标签：ruby, jar, jruby, warbler

我有一段 Ruby 代码，它依赖于从 C 构建的二进制文件。我通常通过反引号调用二进制文件。但是现在当我使用 Warbler 将 Ruby 代码打包到一个 jar 中时，我不确定如何访问二进制文件。

我的代码结构如下所示：

```
root/  
  |--bin/
       |--exec.rb   #This is the executable when I call java -jar example.jar
  |--lib/
       |--Module1.rb #This dir contains all the ruby modules my code requires
  |--ext/
       |--a.out     #A binary compiled with gcc
  |--.gemspec       #A file to guide warbler into building this structure into a jar 
```

我曾经`warble`将整个结构构建成一个罐子。在 Ruby 中，我可以`a.out`通过 exec.rb 中的以下语句访问我的。

```
exec = "#{File.expand_path(File.join(File.dirname(File.dirname(__FILE__)), 'ext'))}/a.out}"; 
`exec` 
```

但是，当我尝试将此代码打包为 jar 时，我收到以下错误：

```
/bin/sh: file:/path/to/my/jar/example.jar!/root/ext/a.out: not found 
```

那么，如何访问打包在 jar 中的可执行文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:53:51.257

放入文件夹中`jar`。`lib`

在代码中要求它

```
require 'java'
Dir["#{File.expand_path(File.join(Rails.root, 'lib'))}/\*.jar"].each { |jar| require jar } 
# A war is treated as a directory.  If that is not successful add the lib folder to the CLASSPATH environment variable 
```

然后它应该可以使用。

**编辑：**

也许这就是您正在寻找的[https://stackoverflow.com/a/600198/643500](https://stackoverflow.com/a/600198/643500)您可以使用 JRuby 实现它。

# scala - 从 Scala 中的 List[Option] 中获取所有具有值的条目

> ID：14375347
> 
> 赞同：20
> 
> 时间：2013-01-17T08:59:18.900
> 
> 标签：scala, collections, functional-programming

是否可以获得`List[Option[T]]`具有值的所有条目？

例子：

```
val list = List(None, Some(1), None, Some(2))
list.filter(_.isDefined).map(_.get) 
```

结果：

```
 List[Int] = List(1, 2) 
```

有没有一种方法可以一步完成？这是一个常见的情况，不是吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-17T09:24:43.453

注意

```
 list.flatten 
```

也会这样做。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T09:01:39.777

是的，您可以使用`collect`：

```
list.collect { case Some(x) => x } 
```

`collect`接受 a`PartialFunction[A,B]`并将此函数应用于定义它的所有元素并丢弃其余元素。

**编辑**：

正如 gpampara 正确提到的那样，对于这种情况`flatten`就足够了。`collect`如果有额外的限制和/或转换，将是正确的工具。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T09:13:16.913

您还可以使用：

```
list.flatMap( x => x)

scala> val a = List(None, Some(1), None, Some(2))
a: List[Option[Int]] = List(None, Some(1), None, Some(2))

scala> a.flatMap(x => x)
res0: List[Int] = List(1, 2) 
```

有关如何/为什么这样做的解释，您可以查看这篇文章：[http ://www.brunton-spall.co.uk/post/2011/12/02/map-map-and-flatmap-in-scala/](http://www.brunton-spall.co.uk/post/2011/12/02/map-map-and-flatmap-in-scala/)

# sml - 我怎么做 | 登录 SML？

> ID：14375350
> 
> 赞同：0
> 
> 时间：2013-01-17T08:59:24.747
> 
> 标签：sml

我想写类似的东西

```
fun factorial 0 = 1
  | factorial n = n * factorial(n-1); 
```

但我没有得到“|” 当我想开始新行时签名。我得到类似的东西：

```
fun factorial 0 = 1
=   factorial n = n * factorial(n-1); 
```

当我开始第二行代码时。如果我按住 shift 和 "\" 我没有得到竖线，我会得到别的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:22:20.273

既然您说第二行以等号 (=) 开头，那么您似乎正在将代码直接写入解释器？

无论如何，您必须自己编写管道。管道是 SML 语法的一部分，用于“指示”不同的函数子句，而分号在这里具有双重含义。双重作为 SML 语法的一部分（尽管这里并不严格需要）和作为解释器的特殊指示符（如下所述）。

大多数解释器会一直从标准输入读取数据，直到它读取一个分号，然后它首先会开始解释你所写的内容。在 SML/NJ 解释器的情况下，第一行以“-”开头，任何后续行都以“=”开头。请注意，“-”和“=”符号不会被解释为最终程序的一部分。这方面的一个例子可以在下面看到

```
- fun foo 0 y = 0
=   | foo 1 y = y
=   | foo x y = x*y;
val foo = fn : int -> int -> int 
```

这里的最后一行是解释器读取分号时的输出。然而我们也可以在写分号之前声明两个函数

```
- fun foo 0 y = 0
=   | foo 1 y = y
=   | foo x y = x * y
= fun fact 0 = 1
=   | fact n = n * fact (n-1);
val foo = fn : int -> int -> int
val fact = fn : int -> int 
```

关于管道，这取决于您的键盘布局，您是否可以通过键入 shift+"\" 来获得它。但是，由于您的帖子包含多个管道，我想您已经知道如何编写一个。

# javascript - 单击任意位置以关闭 div 内部和外部

> ID：14375352
> 
> 赞同：0
> 
> 时间：2013-01-17T08:59:35.577
> 
> 标签：javascript

这是一个 jscript，用于在有人单击 Div 以外的任何位置关闭窗口时关闭窗口。我的问题是当有人通过执行操作单击此窗口时关闭此窗口。

```
<div id="box"
style="height: 3em; position:absolute; top: 20%; left: 15%; border: 3px double">
<p>Click anywhere outside this box to close it.
</div>
<script>
document.onclick = function (e) {
e = e || event
var target = e.target || e.srcElement
var box = document.getElementById("box")
do {
      if (box == target) {
           // Click occured inside the box, do nothing.
           return
      }
      target = target.parentNode
 } while (target)
 // Click was outside the box, hide it.
 box.style.display = "none"
}
</script> 
```

如何在 DIV 内发生单击时关闭 Div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:07:29.057

对于这里讨论的具体内容，我没有对其进行测试，但我认为将循环更改为以下代码可以做到。

```
do {
    if (box != target) {
       // Click occured outside the box, do nothing.
       return
    }
    target = target.parentNode
 } while (target) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:07:42.057

在您的 HTML 代码中，

```
<div id='box' style='height:10px; width:10px' onclick='CloseMe(this)'>...</div> 
```

实现 CloseMe 功能

```
function CloseMe( obj )
{

    obj.style.display = 'none';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:13:59.833

如果您使用 JQuery，您可以为您的 div使用`event.stopPropagation();`on函数`click`

```
$(function(){
  $('html').click(function() {
    $('#box').hide();
  });

  $('#box').click(function(event){
      event.stopPropagation();
  });
}); 
```

[http://jsfiddle.net/nCqwy/1/](http://jsfiddle.net/nCqwy/1/)

# jquery - jQuery移动电子书开发

> ID：14375354
> 
> 赞同：7
> 
> 时间：2013-01-17T08:59:46.320
> 
> 标签：jquery, cordova, jquery-mobile

我正在为各种移动设备开发电子书。这本电子书将涉及数学，旨在通过平板电脑和智能手机为初中的孩子提供服务。我的目标是使用 JQuery mobile 来执行此操作，然后使用 Phone-gap 将其移植到可通过各种平台（如 android、iPhone 等）访问的各种本机应用程序。我想知道是否有任何教程或帮助可以得到。如果有人可以指出我可以建立的类似的东西，那将非常有用。请注意，我想从头开始使用 Jquery。

您在这方面的帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:28:04.053

有很多可用的教程。

其中最好的可以直接在 Phonegap/Cordova 网页上找到：

**Phonegap/Cordova 安装配置：**

*   MacOS Cordova + Android：[http ://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

*   MacOS Cordova + iOS：[http ://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

*   Windows/MacOS Cordova + Android：[http ://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html)

    和

    [http://iphonedevlog.wordpress.com/2012/11/20/building-a-phonegap-android-app-on-windows-cordova-2-2-0-with-eclipse/](http://iphonedevlog.wordpress.com/2012/11/20/building-a-phonegap-android-app-on-windows-cordova-2-2-0-with-eclipse/)

*   很多phonegap的例子：[http ://www.mobiledevelopersolutions.com/home/start/twominutetutorials](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials)

**Jquery + Phonegap/Cordova**

*   应用示例：[http ://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/](http://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/)

*   没什么复杂但可用： http: [//pieterderycke.wordpress.com/2012/03/26/developing-mobile-applications-with-phonegap-and-jquery-mobile/](http://pieterderycke.wordpress.com/2012/03/26/developing-mobile-applications-with-phonegap-and-jquery-mobile/)

*   官方 jQuery Mobile + Phonegap 知道如何：http: [//jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)

*   这里可能是最好的教程之一：http: [//mobile.tutsplus.com/tutorials/mobile-web-apps/jquery_android/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/jquery_android/)

**休息：**

*   我关于混合/原生应用程序的文章：[https ://stackoverflow.com/a/14069937/1848600](https://stackoverflow.com/a/14069937/1848600)

*   我关于 Phonegap 性能问题的文章：[https ://stackoverflow.com/a/13572977/1848600](https://stackoverflow.com/a/13572977/1848600)

**电子书：**

*   这是 phonegap 的电子书阅读器插件：[http ://code.google.com/p/phonegap-ebookreader-plugin/](http://code.google.com/p/phonegap-ebookreader-plugin/)

## 有用的链接：

[**JQUERY 文档就绪 VS JQUERY 移动页面事件**](http://www.gajotres.net/document-onpageinit-vs-document-ready/)

**[JQUERY MOBILE 以及如何增强动态添加内容的标记](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**

**[JQUERY 移动页面处理如何影响 JAVASCRIPT 执行](http://www.gajotres.net/how-jquery-mobile-page-handling-affects-javascript-executions/)**

[**一个好的 JQUERY 移动页面架构的秘密**](http://www.gajotres.net/secrets-of-a-good-jquery-mobile-page-architecture/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:10:24.717

您应该查看 Cordova 的[入门](http://docs.phonegap.com/en/2.3.0/guide_getting-started_index.md.html#Getting%20Started%20Guides)指南，因为它会告诉您如何使用每个平台。

我还阅读了 PhoneGap Essentials，发现它是加快平台速度的好方法。

预先完全披露我是产品团队的一员，但 Red Gate 制作的产品允许您从 Visual Studio 中开发 Cordova 应用程序，因此如果这是您熟悉的环境，那么您应该检查一下，它被称为[Visual Studio 的游牧民族](http://vsnomad.com)

# python - 使用正则表达式检测一行中的货币值

> ID：14375356
> 
> 赞同：-2
> 
> 时间：2013-01-17T09:00:04.557
> 
> 标签：python, regex

在以下几行中，如何编写正则表达式来查找一行是以货币开头还是以货币结尾

```
line = ["$20 is your bill",
        "this is your bill",
        "bill amount is $30",
        "$40 or $50"]

for l in line:
    matchObj = re.search( r'\$[\d.]+', l, re.M|re.I) 
```

如何检查一行是否以货币开头或结尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:04:16.660

```
^\$\d+.*|.*\$\d+$ 
```

似乎为我工作。

但是，如果货币不是整数值，这将不起作用。

# java - 无效操作：结果集已关闭。错误代码=-4470，SQLSTATE=null

> ID：14375357
> 
> 赞同：3
> 
> 时间：2013-01-17T09:00:07.953
> 
> 标签：java, hibernate, db2, websphere

我正在使用键从表中检索某些数据。我正在使用休眠查询来检索数据。

我能够检索特定键的数据。但对于其他一些键，我收到错误或异常。我得到的例外是

```
[1/17/13 14:07:41:819 IST] 0000004c LongType I **org.hibernate.type.NullableType nullSafeGet 无法从结果集中读取列值：BRAND1_23_2_；[jcc][t4][10120][10898][3.58.81] 无效操作：结果集已关闭。错误代码=-4470，SQLSTATE=null**
[1/17/13 14:07:41:822 IST] 0000004c JDBCException W org.hibernate.util.JDBCExceptionReporter logExceptions SQL 错误：-4470，SQLState：null
[1/17/13 14:07:41:823 IST] 0000004c JDBCException E org.hibernate.util.JDBCExceptionReporter logExceptions [jcc][t4][10120][10898][3.58.81] 无效操作：结果集已关闭. 错误代码=-4470，SQLSTATE=null
[1/17/13 14:07:41:826 IST] 0000004c DefaultLoadEv I org.hibernate.event.def.DefaultLoadEventListener onLoad 执行加载命令时出错
                                 org.hibernate.exception.GenericJDBCException：无法加载实体：[com.travelport.soa.gds.airline.brandfares.entity.FareCollection#490]
    在 org.hibernate.exception.SQLStateConverter.handledNonSpecificException（SQLStateConverter.java:126）
    在 org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:114)
    在 org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:12:03.760

您获取了一个实体，该实体在 Java 中表示为延迟加载的一对多关系，`Collection`并且您在关闭获取该对象的 Hibernate 会话后尝试迭代该集合。您必须急切地获取集合或扩大会话边界以包含您的迭代代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:14:30.560

在数据源自定义属性中使用 kodo 设置`resultSetHoldability`为*1时*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T20:54:13.367

DB2 中 SQL 代码 -4470 的最终原因有很多。这是一个简短的列表：

1.  程序错误（就像在这种情况下），在游标被完全读取之前关闭它。
2.  已安装的 JDBC 驱动程序中的错误： [https ://issues.jboss.org/browse/JBPAPP-2408](https://issues.jboss.org/browse/JBPAPP-2408)
3.  由于文档不正确导致驱动程序使用不当： [http ://www-01.ibm.com/support/docview.wss?uid=swg1IV45140](http://www-01.ibm.com/support/docview.wss?uid=swg1IV45140)
4.  DB2 服务器中的错误： [https ://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.5.0/com.ibm.db2.luw.admin.trb.doc/doc/c0020806.html](https://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.5.0/com.ibm.db2.luw.admin.trb.doc/doc/c0020806.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:16:05.240

如果惰性/急切获取策略是一个问题，您可能想要使用`@OneToMany(fetch=FetchType.EAGER)`并阅读[Hibernate One To Many Eager Not Pulling in all Data](https://stackoverflow.com/questions/5055961/hibernate-one-to-many-eager-not-pulling-in-all-data)、[如何获取 @OneToMany 和 @ManyToMany 实体](https://stackoverflow.com/questions/5507077/how-to-fetch-onetomany-and-manytomany-entities)和[A Short Primer On Fetching Strategies](https://community.jboss.org/wiki/AShortPrimerOnFetchingStrategies)。

我建议发布一些关于如何获取数据库和受影响记录的片段。您可能想使用[https://gist.github.com/](https://gist.github.com/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-22T18:54:33.820

我得到相同错误的原因是因为我关闭了 db2 连接，然后尝试读取结果集。请强调在读取结果集时 db2 必须保持连接。

# c# - 上传后在服务器端执行批处理文件：C#

> ID：14375360
> 
> 赞同：0
> 
> 时间：2013-01-17T09:00:18.700
> 
> 标签：c#, ftp, batch-file

我使用 C# (FtpWebRequest) 中的 FTP 将批处理文件传输（上传）到服务器。批处理文件有一些命令。我的要求是将批处理文件传输到服务器（我能够做到）并执行该批处理文件。

如何从客户端执行服务器上批处理文件中的命令？我可以使用 Process.Start() 方法或 rsh 吗？哪种方法更好，并且将不胜感激提供示例的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:10:52.297

上次我需要远程复制和运行批处理文件时，我使用[了 PSExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)。但是，这需要远程计算机上的管理员权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:22:27.763

您可以*尝试*使用 SITE FTP 命令来运行该文件，但这是特定于服务器和操作系统的（即您不能在 Unix 上启动 .BAT 文件或在 Windows 服务器上启动 .sh 文件，而且并非所有服务器都支持执行通过站点命令的外部命令）。

如果这没有帮助，您必须在远程端设置一些服务器（例如 SSH 服务器），并在通过 FTP 上传后使用 SSH 协议连接到该 SSH 服务器（但如果您使用 SSH，则不需要FTP - 您可以改用基于 SSH 的 SFTP）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T07:58:48.257

Nayan Soni 用于执行 Bath 文件`System.Diagnostics.Process.Start(FileName, Parameters);` 和套接字参考： http: [//www.codeproject.com/Articles/10649/An-Introduction-to-Socket-Programming-in-NET-](http://www.codeproject.com/Articles/10649/An-Introduction-to-Socket-Programming-in-NET-using)使用 此示例[http://diaryanakku.files。 wordpress.com/2013/01/socket.jpeg](http://diaryanakku.files.wordpress.com/2013/01/socket.jpeg)（将文件 .jpeg 更改为 .7z）并提取。抱歉限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:11:42.703

您可以运行运行批处理文件的计划任务（比如每五分钟）。您可能必须执行一些清理任务，例如在运行批处理文件后删除它（因此它不会无意中再次运行）。

（如果您的批处理文件每次都有不同的名称......可能需要重新考虑一下。）

这样做的好处是它非常简单，它使用非常可靠的 Windows 调度程序，并且不需要 3rd 方应用程序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-17T09:20:18.110

另一种选择你可以使用套接字编程，当浴文件传输完成后，发送命令到服务器执行浴文件。我认为这是第二选择。

# linux - Ubuntu 上的 DTrace，操作方法？

> ID：14375364
> 
> 赞同：32
> 
> 时间：2013-01-17T09:00:29.540
> 
> 标签：linux, ubuntu, dtrace

我想在 Ubuntu 上使用 DTrace。

[https://github.com/dtrace4linux/linux](https://github.com/dtrace4linux/linux)

上面有一个用于 Linux 的，github。

*   我想知道 linux 的 dtrace 是否与其他操作系统（Solaris、FreeBSD、OSX）的 dtrace 相同。
*   我想找到一个使用这个（dtraceforlinux）的教程。
*   我想知道下面的 dtrace for solaris 教程是否适合我。

[http://www.oracle.com/technetwork/server-storage/solaris/dtrace-tutorial-142317.html](http://www.oracle.com/technetwork/server-storage/solaris/dtrace-tutorial-142317.html)

先感谢您。旅者

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-17T22:34:48.747

作为 dtrace4linux 的作者，让我来回答一下。

本质上，Linux/MacOS/FreeBSD/Solaris 上的 dtrace 是相同的——我们都基于相同的源代码和相同的目标。因为没有中央维护者，代码实际上是分叉的，Solaris 被认为是主控。主要的源代码差异是每个平台的粘合剂。

DTrace 是多种事物的组合：

*   内核驱动程序
*   用户空间“dtrace”命令
*   探测功能机制（例如 syscall、fbt）
*   脚本语言

看看系统调用跟踪它非常简单：

```
$ dtrace -n syscall::open:
..... 
```

这会捕获每个打开的系统调用，无论是谁执行的。如果您了解 Unix，您就会知道系统调用大约是：

```
open(char *filename, int flags, [int perms]) 
```

因此，arg0 是字符串“文件名”。但这就是不同的地方。C lib 函数如上，但它映射到系统调用，类似于：

```
open(int someflags, char *filename, int userflags, int perms) 
```

所以文件名不在 arg0 中，而是在 arg1 中。（如果以上有错误，我深表歉意——我认为`open()`内核和用户空间是一样的，但事实并非如此，例如对于`stat()`函数族）。

这就是 DTrace 的一些“可移植性”问题出现的地方——如果您使用 dtrace 的 Solaris 指南，并尝试运行一些脚本或示例，您可能会发现它们的工作方式不同。理论上，这是 Linux（我）的错，应该修改 dtrace4linux 来隐藏这个。

这一切都适用于系统调用。

现在让我们看看 fbt。Fbt 只是函数跟踪——任何函数——带有任何参数。您可以跟踪实现`open()`系统调用的 linux 函数（它被称为`sys_open`[可能]）。如果您捕获此功能：

```
$ dtrace -n fbt::sys_open: 
```

那么你必须查看内核源代码，看看arg0、arg1、arg2等是什么。几乎可以肯定它与 Solaris 或 MacOS 不同——其 Linux 的实现细节。

但是您可能想要访问一些参数，例如获取一些内部内核数据结构（TCP、磁盘驱动程序、USB 驱动程序等）。Solaris 提供了“提供者”，它们是访问数据结构的更高级别的方法，而不是知道“arg3 是'struct foo *'”。如果没有这些提供程序，脚本将完全依赖于 opsys，并且没有可移植性。大多数人并不关心“tcp”结构是什么样子，而是希望访问诸如 pktin、pktout、rcvbytes、sndbytes 之类的关键字段。

总之`dtrace4linux`，Solaris`dtrace`提供了一个可移植层来允许访问这些功能或结构，但 dtrace4linux 或 Solaris 都没有尝试完成一项完整的工作来提供跨每个内核中数千个结构的可移植性。

通常，您可以使用 solaris 教程脚本并使用它们来尝试了解哪些不起作用，但是如果您不知道要查找什么，则尝试“按原样”使用它们会使您感到沮丧。

我认为 dtrace4linux 是“不错”和“不够好”来隐藏这些差异。（dtrace4linux 与 MacOS 差不多——如果您使用 Solaris 教程，有些教程可能无法在 Mac 或 FreeBSD 上运行）。

# powershell - 将参数 PostContent 所需的 html system.object 转换为 system.string

> ID：14375365
> 
> 赞同：1
> 
> 时间：2013-01-17T09:00:38.730
> 
> 标签：powershell

我正在尝试执行一系列步骤并创建一个 HTML 文件。下面是代码：

```
$bkpstat = @()

$a = Get-Date
$b = $a.AddDays(-1)
$b = $b.ToShortDateString();
$StartTime = "10:00:00 PM"
$EndTime = "11:00:00 PM"
$before = $b + " " + $StartTime
$after = $b + " " + $EndTime
$before = [datetime]$before
$after = [datetime]$after

$sms_svc = "SMS Agent Host","SMS_EXECUTIVE","SMS_SITE_COMPONENT_MANAGER","SMS_SITE_VSS_WRITER","SMS_REPORTING_POINT","SMS_SERVER_LOCATOR_POINT"
$smsdb_svc = "SMS Agent Host","SMS_SITE_SQL_BACKUP_WDSMS01"

$style = "<style>$(get-content C:\Temp\Rajiv\style.css)</style>"

$bkpsys = New-Object PSObject
$bkpsys | Add-Member -type NoteProperty -name SiteCode -value 000
$bkpstat += $bkpsys

if(Test-Connection WDSMS01 -Count 3 -BufferSize 3 -Quiet)
{
    Write-Host "SMS01 is available. Checking service status"

    $cmsvc_000 = Get-Service $sms_svc -ComputerName SMS01 | Convertto-HTML -Property Name, Status -PreContent "<h2>Service Status for SMS01 </h2>" | Out-String

    Write-Host "Checking Site Server backup for 000"

    $smsbkp_000 = Get-EventLog -ComputerName SMS01 -LogName Application -After $after -Before $before -Source "SMS Server" | ?{$_.EventID -eq 6833} | Select MachineName, Message
    if ($smsbkp_000)
    {
        $bkpsys | Add-Member -type NoteProperty -Name SiteServer -Value "Success"
    }
    else
    {
        $bkpsys | Add-Member -type NoteProperty -Name SiteServer -Value "Failed"
    }

}
else
{
    Write-Host "Server SMS01 is not reachable"
    $bkpsys | Add-Member -type NoteProperty -name SiteServer -value "Not Reachable"
}

if(Test-Connection SCCMSQL01 -Count 3 -BufferSize 3 -Quiet)
{
    Write-Host "SCCMSQL01 is available. Checking service status"

    $cmdbsvc_000 = Get-Service $smsdb_svc -ComputerName SCCMSQL01 | Convertto-HTML -Property Name, Status -PreContent "<h2>Service Status for SCCMSQL01 </h2>" | Out-String

    Write-Host "Checking Database backup for SMS_000"
    $sqlbkp_000 = Get-EventLog -ComputerName SCCMSQL01 -LogName Application -After $after -Before $before -Source "MSSQLSERVER" | ?{$_.EventID -eq 18264} | Select MachineName, Message
    if ($sqlbkp_000)
    {
        $bkpsys | Add-Member -type NoteProperty -name Database -value "Success"
    }
    else
    {
        $bkpsys | Add-Member -type NoteProperty -Name Database -Value "Failed"
    }

}
else
{
    Write-Host "Server SCCMSQL01 is not reachable"
    $bkpsys | Add-Member -type NoteProperty -name Database -value "Not Reachable"
}
$bkpstat
$params = @{'Head'="<title>Report for ConfigMgr Site 000</title>$style";
    'PreContent'="<h1>Daily Check</h1>";
    'PostContent'=$cmsvc_000, $cmdbsvc_000, $bkpstat} 

 Convertto-HTML @params | Out-File C:\Temp\Rajiv\Site_000.html 
```

我得到的错误消息是：

ConvertTo-Html：无法将“System.Object[]”转换为参数“PostContent”所需的类型“System.String”。不支持指定的方法。在 C:\temp\rajiv\DailyCheck_000.ps1:88 char:16 + Convertto-HTML <<<< @params | Out-File C:\Temp\Rajiv\Site_000.html + CategoryInfo : InvalidArgument: (:) [ConvertTo-Html], ParameterBindingException + FullyQualifiedErrorId : CannotConvertArgument,Microsoft.PowerShell.Commands.ConvertToHtmlCommand

我曾尝试使用 Out-String，无论是否使用 Convertto-HTML for $bkp，但都是徒劳的。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:13:51.550

当您定义`$bkpstat`as时，问题就开始了`@()`，这使它成为 type `Object[]`。这意味着当您设置`'PostContent'`为`$cmsvc_000, $cmdbsvc_000, $bkpstat`（类型为`String`、`String`和`Object[]`）时，形成的数组必须是类型，`Object[]`而不是`String[]`您期望的类型。

您需要首先转换`$bkpstat`为字符串以生成 cmdlet 期望的数组类型。

# svn - TortoiseSVN 1.7 客户端无法打开 1.6-server

> ID：14375367
> 
> 赞同：0
> 
> 时间：2013-01-17T09:00:42.390
> 
> 标签：svn, intellij-idea, eclipse-plugin, tortoisesvn

我的 TortoiseSVN 版本是`1.7.11.23600`，

我的服务器是：`Powered by Subversion version 1.6.3 (r38063).`

当我尝试打开回购浏览器时，它会说：

```
unable to connect to a repository at URL xxx,
Access to xxx forbidden. 
```

使用idea-ide的插件也会出现同样的问题，但在我使用ie、cmd-line或eclipse的插件时没有出现。我能做些什么 ？回滚到 1.6？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:52:31.940

好吧，可能这个问题太简单了，没人想回答。但这是一个问题。

svnkit 1.3 运行良好，1.7 会崩溃。回滚到 1.3。

# php - 由于 array_count_values() 显示警告消息

> ID：14375369
> 
> 赞同：3
> 
> 时间：2013-01-17T09:00:50.120
> 
> 标签：php, arrays, codeigniter, keyword

我正在使用 PHP 的 Codeigniter 框架并尝试从页面中提取关键字。完整的参考代码可以在[这里](http://nadeausoftware.com/articles/2008/04/php_tip_how_extract_keywords_web_page#StripHTMLtagsscriptsandstyles)看到。虽然它不是现成的。

问题是由于以下行中的数组函数：

```
$keywordCounts = array_count_values( $words ); 
```

显示的错误信息如下：

```
A PHP Error was encountered

Severity: Warning

Message: array_count_values() [function.array-count-values]: Can only count STRING and INTEGER values! 
```

**已编辑：**可在[此处](http://pastebin.com/bdg3MCfn)找到数组 $words 供**参考。**

据我所知，$words 数组中没有特殊符号或无效字符。该函数不读取连字符和句点，还是有其他问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T11:21:02.983

你的数组中有`null`值。您必须在使用以下方法之前替换它们`array_count_values`：

```
$x = array('s'=>'ss', 'a',4 , 'sss' => null);

$ar = array_replace($x,array_fill_keys(array_keys($x, null),''));

$v = array_count_values($ar);

var_dump($v); 
```

这将导致：

```
array (size=4)
  'ss' => int 1
  'a' => int 1
  4 => int 1
  '' => int 1 
```

# android - Android 2D 图形，比较对象，OOP

> ID：14375370
> 
> 赞同：0
> 
> 时间：2013-01-17T09:00:50.540
> 
> 标签：android, oop, graphics, drawing

我想开发一个 Android 2D 游戏，游戏场上充满了矩形和圆形。矩形和圆形将显示由数字组成的对象，这些对象必须在某个点进行比较。

此外，所有对象（矩形和圆形）都需要可拖动。我想将一个对象拖动到另一个位置，然后将周围的对象值与拖动对象中的值进行比较。

到目前为止，我拥有的是一个抽象基类和两个子类，它们代表矩形和圆形中显示的对象。

此外，基类扩展了 View，因此我可以覆盖两个子类中的每一个的 onDraw 方法。现在我为一个对象绘制一个矩形，为另一个对象绘制一个圆形，此外我绘制包含每个对象编号的文本。

我的问题是，关于开发这样的应用程序，我是否走在正确的道路上，还是有更好的方法？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:20:25.213

关于你的阶级层次，我会说你走在正确的道路上。那是假设基类已经实现了拖动机制。此外，您的基类应该定义比较两个对象的方法，以便子类也有它。对象比较的实际逻辑位置取决于算法。您可以让父类比较对象，但这仅在您只需要基类成员和实际对象类型进行比较时才有效。如果您需要特定于不同子类的任何内容，则需要覆盖每个子类中的比较方法。

您还需要一种查找相邻对象的机制。这可以通过对所有游戏对象的列表进行简单的坐标检查（如果您可以自由拖动）来完成，或者使用包含对所有相邻对象的引用的基类来完成，每当拖动一块时（如果它更像是一个拼图游戏）。

但是，我强烈建议将 OpenGL 用于任何复杂的游戏。不幸的是，我只有一个很好的德语教程，但我相信也有很多英文教程可用。

如果您有任何更详细的问题，请告诉我。

# ios - 带有图像的 UIBarButtonItem

> ID：14375372
> 
> 赞同：0
> 
> 时间：2013-01-17T09:00:53.743
> 
> 标签：ios

我想创建一个`UIBarButtonItem`看起来完全像这样的：

[![](../Images/10ce411b72c8648e54d3550dc58cee25.png)](https://i.stack.imgur.com/mBxsN.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:13:16.837

```
UIImage *button30 = [[UIImage imageNamed:@"button_textured_30"]
    resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
[[UIBarButtonItem appearance] setBackgroundImage:button30 forState:UIControlStateNormal
    barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:53:51.057

使用它作为一种实用方法来为您的任何视图添加左栏按钮。进行明显的更改以获得右栏按钮。

```
+(void)setMenuButton:(UIViewController *)viewController
{
UIImage *listIcon= [UIImage imageNamed:@"YourImageName"];
UIButton *rightBarButton = [UIButton buttonWithType: UIButtonTypeCustom];
[rightBarButton setBackgroundImage: listIcon forState:UIControlStateNormal];
[rightBarButton addTarget: viewController.navigationController.parentViewController action:@selector(barButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
rightBarButton.frame = CGRectMake(0, 0, 40, 30);
rightBarButton.tag = BAR_BUTTON_TAG;
viewController.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView: rightBarButton];
} 
```

希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:06:28.597

创建一个自定义按钮并使用它，即；`[self.navController.leftBarButtonItem = customButton];`

# javascript - 查找附加事件的元素

> ID：14375373
> 
> 赞同：3
> 
> 时间：2013-01-17T09:00:55.327
> 
> 标签：javascript, jquery, javascript-events, event-handling

我正在寻找一种方法来查找容器内的所有元素，这些元素通过选择器附加了事件处理程序。这需要包括委托/现场活动。

在以下示例中，选择器应找到所有 3 个按钮，包括具有委托事件的“操作”按钮。

```
<div id='container'>
    <button id='test_btn'>Test</button>
    <button id='live_btn_id1'>Action</button>
    <button id='live_btn_id2'>Action</button>
</div> 
```

```
$("#test_btn").on("click", function() {
    $("#container").find("*").off();
});

$("#container").on('click', 'button[id^=live_btn]', function(event) { 
    alert("hello");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:15:09.910

遍历与您的选择器链接的所有事件

```
$.each($('#container button').data('events'), function(i, event){
    $.each(event, function(i, handler){
        //Do what you want : condition on 'click' event for example
        console.log( handler.toString() );
    });
}); 
```

# wpf - 图像的异步数据绑定，导致跨线程异常

> ID：14375374
> 
> 赞同：3
> 
> 时间：2013-01-17T09:00:55.217
> 
> 标签：wpf, data-binding, asynchronous, datagridview, bitmapsource

我的 WPF 应用程序有问题。我正在尝试使用我的视图模型中的图像属性在我的网格视图中对图像字段进行数据绑定。

```
<DataGridTemplateColumn Header="Image" IsReadOnly="True">
    <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <Image Source="{Binding Path=Image, IsAsync=True}" />
    </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

这没问题，如果我不使用 IsAsync。但是，我想异步执行，因为要加载很多图像，并且需要从 Web 服务加载它们。

Image 属性的代码是这样的，它只调用一个处理程序 dll，它调用一个 web 服务。

```
 public BitmapSource Image
    {
        get { return image ?? (image = ImageHandler.GetDefaultImages(new[] {ItemNumber},160,160)[0].BitmapSource()); }
    } 
```

但是，一旦我添加了 IsAsync=true，一旦加载了表单，我就会得到以下异常：

`The calling thread cannot access this object because a different thread owns it.`

我对 WPF 很陌生，我有点假设，当 async 设置为 true 时，它​​自己处理线程。我是否需要在数据绑定中以某种方式调用？如果是这样，我到底该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T09:37:31.823

`IsAsync`意味着绑定属性将从另一个线程访问，因此请确保您创建的任何内容都可以以跨线程方式使用。绑定的最后一步总是发生在主线程上。

WPF 中的几乎所有类都继承自`DispatcherObject`，它基本上在创建对象时将对象“链接”到当前线程。您的`BitmapSource`代码中的 是在另一个线程上创建的，然后不能在主 UI 线程上使用。

但是，`BitmapSource`继承自`Freezable`: 只需在返回之前调用[`Freeze`](http://msdn.microsoft.com/en-us/library/ms557735.aspx)您的方法`BitmapSource`，以使其不可变且可从任何线程使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:46:37.173

如果您在单独的线程上访问图像并且不使用 IsAsync 怎么样。就像是

```
public BitmapSource Image
    {
        get 
        { 
            return image ?? (Task.Factory.StartNew(() => image = ImageHandler.GetDefaultImages(new[] { ItemNumber }, 160, 160)[0].BitmapSource());) 
        }
    } 
```

# c# - 扩展（不更改）搜索类以获取新行为？

> ID：14375378
> 
> 赞同：1
> 
> 时间：2013-01-17T09:01:19.453
> 
> 标签：c#, oop, interface

我正在对提供数据的 API 进行更改（这是对我[原来的问题](https://stackoverflow.com/questions/14373531/how-to-extend-class)的更新）。一些搜索需要有关作者的数据并获取`IAuthor`对象。API 有一个`IAuthor`接口和一个具体的实现类，`IAuthor`称为`Author`.

`Search.GetBooksByAuthor`当作者被标记为小说家时，我需要更改该方法的行为以提供不同的语义。我听说过[开放/封闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)，似乎更改`IAuthor`和/或`Author`和/或`Search`类会违反这一点（`Book`不过，类肯定保持不变）。那么如何进行这个简单的改变呢？

例如，我最初在想这样的事情，但我的想法可能很不稳定，因为它涉及更改`Search`类：

```
//Before
class Search 
{
   public Books[] GetBooks(IAuthor author){
       // Call data access GetBooks...
    }
}

//After
class Search
{
   public Books[] GetBooks(IAuthor author){
       // To maintain pre-existing behaviour
       // call data access GetBooks method with SQL param @AsNovelist = false...
       // (or don't pass anything because the SQL param defaults to false)
    }

   public Books[] GetBooksAsNovelist(IAuthor author){
       // To get new behaviour
       // call data access GetBooks method with SQL param @AsNovelist = true
       // so that their non-fiction books are omitted from results
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:12:42.727

使用谓词进行过滤怎么样？

```
class Search
{
   public Books[] GetBooks(IAuthor author, Func<IAuthor, bool> filter){
       // ...
    }
}

search.GetBooks(author, a => a.IsNovelist) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:16:42.953

很明显，为了知道您的作者是否是 a `Novelist`，必须进行一些更改，您可以通过以下两种方式之一进行操作。理论上你不需要改变任何东西，但是你需要一个新的类。

```
public class Novelist : Author, IAuthor { } 
```

然后，您可以将小说家传递给您的方法，然后确定您的作者类型。

```
class Search 
{
   public Books[] GetBooks(IAuthor author){
       if(author is Novelist)
         //Do some stuff or set a flag/bool value
    }
} 
```

或者如前所述，为您的 Author 接口实现一个布尔成员并检查它。但是，上述内容会阻止您更改班级结构。

这意味着您的小说家实际上仍然是作家，只是有自己的类型。您的方法签名保持不变，您的类结构保持不变，您只是有一个“不同类型的作者”的类型，理论上应该没问题。调用如下测试。

```
GetBooks(new Novelist()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:19:26.567

为了扩展类，C# .NET 在 .NET 3.5 中引入了[扩展方法](http://msdn.microsoft.com/en-gb/library/vstudio/bb383977.aspx)，其主要目的正是在不修改现有代码的情况下扩展类：

```
public static class SearchExtensions
{
  public static Books[] GetBooksAsNovelist(this Search search, IAuthor author)
  {
     // Perform novelist search
  }
} 
```

然后，您可以正常调用 Search 类：

```
Search.GetBooksAsNovelist(author); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T09:20:25.397

您可以使用 C# 语言的扩展功能。

请参阅[http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

扩展能够通过保持类的完整性来向类添加功能。

在你的情况下，你可以写成：

```
public static class SearchExtensions
    {
        public static Books[] GetBooks(this Search search, IAuthor author)
        {
            //new logic
        }
    } 
```

您可以通过 Search 对象访问此新方法，并且 Search 类也保持不变。

如果您觉得这有帮助，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T10:04:09.170

您可以使您的类部分能够添加功能性而无需扩展、继承或控制反转：

```
// file: Search.cs

partial class Search
{
    public Books[] GetBooks(IAuthor author) { ... }
}

// file: Search.Advanced.cs

partial class Search
{
    public Books[] GetBooksAsNovelist(IAuthor author) { ... }
} 
```

结果：

[http://i.snag.gy/VowNv.jpg](http://i.snag.gy/VowNv.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T09:13:59.157

将搜索类方法保持为虚拟，因此任何人都可以覆盖它们以创建新行为？

# iphone - 此时无法安装 iPhone 应用程序

> ID：14375387
> 
> 赞同：59
> 
> 时间：2013-01-17T09:01:57.570
> 
> 标签：iphone, testflight

我试图从 testflight 安装我的 iphone 应用程序。它可以完美地安装在少数设备上，但在某些设备上安装了大约 80% 后会出现错误“无法下载 aaplication，此时无法安装”我能够找出原因，为什么会这样？这是屏幕截图：

![此时无法安装](../Images/48a88b01c208ac134fce82913fbf5983.png)

有人会帮助我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-17T09:43:28.367

清除 Safari 中的缓存和 cookie，确保您的设备处于配置文件中，并且设备上已安装配置文件。

如果上面提到的一切都没有帮助，请尝试创建具有更高版本号的新版本并尝试再次分发您的应用程序

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-06T22:17:02.657

导致这种情况的最常见问题是（[来自 testflight 的网站](http://help.testflightapp.com/customer/portal/articles/829652-received-an-unable-to-download-application-message-what-does-this-mean-)）：

*   设备存储已满
*   配置文件是开发人员配置文件
*   ad hoc 分发配置文件已损坏，设备出现问题。
*   该设备已从备份中恢复，并导致无线分发冲突
*   网络超时
*   构建和设备的架构设置不兼容（有时会发生 - 当构建时“仅构建活动架构”打开时）。
*   不使用移动 Safari。

对我来说，原来我客户的 ipad 运行的是 iOS 4.2.2，而我的项目支持 5.0+。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-17T10:44:29.797

最近默认的 Xcode 项目设置将 ONLY_ACTIVE_ARCH (Build Active Architecture Only) 设置为 yes 用于调试配置。
因此，您的构建不能安装在与您用于开发的硬件不同的硬件上。
更改此设置，安装应该正常。
![在此处输入图像描述](../Images/f184a8dec8ffd8254fe94af311202c3c.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-28T07:55:07.553

至于 Xcode 5.1，问题出`arm64`在`VALID_ARCHS`. 在本地构建 5.0 设备的发布配置会出现以下错误：

> Xcode 无法在运行 iOS 6.0 之前版本的设备上安装或启动支持 64 位架构的应用程序。此配置支持通过 iOS App Store 分发，但不能在使用 Xcode 开发期间使用。要继续，请编辑运行方案操作并选择不包含 64 位体系结构的构建配置。

删除解决了这个问题`arm64`。`VALID_ARCHS`就我而言，我必须创建一个单独的分支来在 iOS 5 设备上进行测试。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-16T07:06:24.680

您可以尝试通过更改构建版本来发布应用程序。我也遇到了同样的问题，并通过更改 tIt 来尝试同样的问题，这也可能对您有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-06-19T15:31:41.643

对我来说，将 Build Active Architecture 设置为 NO... 工作并成功安装

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-05T12:56:11.387

通过 Xcode Organizer 观察控制台是否有安装失败的设备。

您会从系统中收到一条有用的消息，告诉您出了什么问题。有很多潜在的失败原因，所以除非你检查消息，否则你只是在猜测......

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-01T15:03:46.540

这对我有用：

1.  清除缓存和 Cookie ( `Settings`> `Safari`)。
2.  `Settings`删除链接到“Test Flight App”( > `General`> )的现有配置文件（如果有`Profiles`）。
3.  打开 Safari 并转到[https://testflightapp.com/](https://testflightapp.com/)。登录并按照步骤重新开始。

PS我以前有一个Test Flight App，但它看起来像崩溃了，图标变成了全白。重新启动我的 iPhone 使它重新出现正确。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-18T12:41:54.300

当我尝试在 iOS 6 设备上安装 Ad-Hoc iPad 应用程序时，我也遇到了这个问题。

为我解决的问题是单击 XCode 中的项目，并将“ **iOS 部署目标**”设置从 5.1 更改为 6.0。

愚蠢的我认为 iOS 5.1 应用程序可以在 iOS 6.0 设备上运行。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-16T14:22:36.530

我刚刚看到这是由于不稳定网络上的网络错误/超时造成的。在我有了重试的好主意后，我可以看到进度条在增加。还看到下载服务器上的 HTTP Range 请求具有不断增加的几兆字节的偏移量（整个应用程序大约 44MB）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-10-19T16:59:48.600

我遇到了这个问题，但我通过确保我的代码签名身份与我在试飞中使用的身份相同来解决这个问题。

之后，一切正常

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-11-16T07:10:17.137

如果您禁用“App Store”的蜂窝数据（例如，在度假时）并且忘记重新打开它，也会发生这种情况。这里的解决方案是简单地在“设置”->“蜂窝”中重新启用它。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-02-01T20:18:29.877

在我的情况下，应用程序想要使用 iCloud 服务，但在 distr. 配置文件未设置启用 iCloud。打开它并刷新配置文件。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-10-20T09:50:28.960

在摆弄证书（啊）之后，我遇到了同样的问题。

当我遵循@Duraiamuthan.H 的评论时，问题变得很明显，我安装在设备上。设备报告 0xe8008016（权利）请参见[此处](https://stackoverflow.com/questions/5240801/the-entitlements-specified-profile-0xe8008016-error-ios-4-2)

最初的原因是，testflight 目标使用了 App Store 分发证书，而不是 Team 证书。我修复了这个问题，应用程序通过 Xcode 安装在设备上，然后它也可以与 testflight 一起使用。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-10-29T10:35:45.103

我有类似的问题。但是，当我将 iPad 计时更新为当前计时时，我能够修复它。刚刚查看了设备日志，发现日志中的时间显示的是2年前。

希望将设备时间更新到当前时间可以解决问题。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-03-09T10:19:03.347

缺少图标可能是个问题。我的清单文件指向一个不存在的图像，并且安装过程失败。在相应的路径上放置一个图标为我解决了这个问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-07-16T00:30:06.563

我最终创建了新的配置文件，不确定是不是因为：

“临时分发配置文件已损坏，设备出现问题。”

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-10-18T16:27:13.103

我和@mohitum007 有同样的问题。就我而言，此应用程序的开发人员在其中包含了***到期日期***。

作为解决方法，我将日期向后设置为过去的日期（例如上个月）。然后我可以安装它并使用它。

此外，当我将日期设置为正常时，已经安装的应用程序不再启动。我联系了该应用程序的公司，向我发送了更新版本。

**旁注：**我发现其他应用程序的用户也有同样的问题，但相反：它不会在某个日期之前安装或启动。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-03-28T05:24:39.507

对我来说，只需卸载 Testflight 并重新启动我的 iphone。之后，安装TestFlight，它工作正常！

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2014-04-24T19:57:22.257

检查项目设置的 General 部分中的部署目标是否大于您设备的 iOS 版本。

如果是，那么您需要将设备的版本至少更新到部署目标版本。以便您能够在您的设备上安装该应用程序。

# javascript - 计算相对旋转

> ID：14375389
> 
> 赞同：1
> 
> 时间：2013-01-17T09:02:07.617
> 
> 标签：javascript, math

我正在开发一个简单的“停车类型”游戏，用户在汽车中四处行驶，并且必须将其停放在指定的位置。

虽然它实际上正在工作，但唯一的问题是我需要找出汽车停在哪个方向。我不希望用户随意停放汽车，但汽车应该朝上或朝下。

我尝试使用此检查来查看汽车的旋转情况，但这似乎有点太复杂了

```
var relativeRot = this.rotation % 360;
if((this._speed <= 0.02 && this._speed >= -0.02) && ((relativeRot <= 5 && relativeRot >= 355) || (relativeRot >= 175 && relativeRot <= 185) || (relativeRot <= -175 && relativeRot >= -185) || (relativeRot <= -5 && relativeRot >= -355))) { 
```

有没有更简单的方法来检查这个？应该有 5 度的小余量，因为它不一定是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:24:27.027

您可以通过取模 90 度来简化它：

```
var relativeRot = this.rotation % 360;
if (Math.abs(this._speed) <= 0.02) {
    var cornerRot = (relativeRot + 360) % 90; // should be positive
    if (Math.abs(cornerRot - 45) >= 40) {
        // consider car parked...
    }
} 
```

# url - 如何将弹出窗口的 url 存储到字符串中？

> ID：14375390
> 
> 赞同：2
> 
> 时间：2013-01-17T09:02:17.480
> 
> 标签：url, google-chrome-extension

我目前正在开发 Chrome 扩展程序，我想将弹出窗口的 url 存储到字符串变量中。我可以通过 "`document.createElement`和`variable.appendChild`方法获取 url，但我不能将它存储在字符串中。

这有效：

```
 function getLinks(){
  var url = document.createElement("p");

  chrome.tabs.query({windowType:"popup"}, function (tab){
    for(x in tab){
       var adresse= document.createTextNode(tab[x].url);
       url.appendChild(adresse);
    }  
  });
  document.body.appendChild(url);
} 
```

这不起作用：

```
function getLinksbis(){
  var url = "1 - ";

  chrome.tabs.query({windowType:"popup"}, function (tab){
    for(x in tab){
       var adresse= tab[x].url;
       url = url + adresse;
    }  
  });
  document.write(url);
} 
```

你能帮助我吗 ？有可能做我想做的事吗？我想要它在一个字符串中，因为我想向这个 url 添加参数，然后将其返回给用户。

请原谅我的英语，我是法国人。;-)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:33:57.220

你的代码确实有效，只要确保你有

```
{
  ..
  "permissions":["tabs"]
  ..
} 
```

清单文件中的选项卡权限。

# 测试后的输出

![在此处输入图像描述](../Images/26ddf9ed9400e5c1eee8cfbed1b0b2df.png)

# 编辑 1

```
function getLinksbis() {
    var url = "1 - ";

    chrome.tabs.query({
        windowType: "popup"
    }, function (tab) {
        for (x in tab) {
            var adresse = tab[x].url;
            url = url + adresse;
        }
        document.write(url);
    });

} 
```

将您的`document.write(url);`内部异步回调移回，它是一个异步函数，回调成功后应进行最终调用。

# java - 卡片组洗牌和显示小程序

> ID：14375391
> 
> 赞同：0
> 
> 时间：2013-01-17T09:02:18.233
> 
> 标签：java, random, applet, shuffle

我已经编写了一些代码来创建我下载的卡片的 ArrayList，现在我正在尝试将它们洗牌，然后使用 paint 方法显示它们。如何使用 g.drawImage 显示十张卡片？

```
 import java.awt.Image;
import java.applet.Applet;
import java.util.*;

public class DeckofCards1 extends Applet {

public void init ( ) {
    String[] suits = {"c", "s", "h", "d"};
    String[] values = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "j", "q", "k"};

    ArrayList<Image> images = new ArrayList<Image>( );
    for(String suit : suits){
            for(String value : values){
                 Image img = getImage ( getDocumentBase ( ), "images/" + suit +              value + ".gif" );
      images.add(img);
                     }
    }
    Collections.shuffle ( images ); //get ten cards randomly?
    }

    public void paint ( Graphics g ) { //display ten cards here?

        g.drawImage ( img, 10, 10, this );
        g.drawImage ( img, 10, 10, this );
        g.drawImage ( img, 10, 10, this );      
        g.drawImage ( img, 10, 10, this );
        g.drawImage ( img, 10, 10, this );
        g.drawImage ( img, 10, 30, this ); //what goes in place of img (which I know isn't right, simply a placeholder for now
        g.drawImage ( img, 10, 30, this );
        g.drawImage ( img, 10, 30, this );
        g.drawImage ( img, 10, 30, this );
        g.drawImage ( img, 10, 30, this );

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:14:56.647

我快速浏览了一下，您似乎可以使用这段代码来获取 img：

```
BufferedImage img = ImageIO.read(imageSrc); 
```

来源：[http ://docs.oracle.com/javase/tutorial/2d/images/drawimage.html](http://docs.oracle.com/javase/tutorial/2d/images/drawimage.html)

此外，根据您要绘制这些图像的位置，您可以将其放入循环并使用循环变量控制坐标。

在你的类中使图像成为一个变量（这样你就可以在绘制函数中使用它）。

```
public class DeckofCards1 extends Applet {

    private ArrayList<Image> images;
    .... 
```

在您的 init 函数中，将图像创建行从

```
Image img = getImage ( getDocumentBase ( ), "images/" + suit + value + ".gif"); 
```

至

```
BufferedImage img = ImageIO.read(new File("images/" + suit + value + ".gif")); 
```

在您的绘画功能中，对其进行更改，使其循环遍历图像数组，并为每个数组使用此方法绘制它

```
for(int i = 0; i < images.size(); i++) {

    g.drawImage(images.get(i), i*10, i*10, null);
} 
```

如果您有图像，请查看此 pastebin 以获取应编译的代码的更新版本：http: [//pastebin.com/43t7zhYL](http://pastebin.com/43t7zhYL)

使用不同的图像读取方法更新了 pastebin：http: [//pastebin.com/15tigYFd](http://pastebin.com/15tigYFd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:38:14.887

关于洗牌，`Collections.shuffle ( images );`将`images`随机排列 的元素。但我建议添加这一行：

```
private final Random random = new Random(4454776669L); 
```

并`Collections.shuffle ( images, random);`改为使用。这里的数字 4454776669L 是伪随机数生成器的种子，当您使用相同的种子时，您会重现相同的随机数序列，如果您想重现相同的游戏或仅出于调试目的，这可能很有用。

# c++ - 在 Linux 上编译 Python 2.7.3 以嵌入到 C++ 应用程序中

> ID：14375397
> 
> 赞同：0
> 
> 时间：2013-01-17T09:02:53.413
> 
> 标签：c++, python, gcc, g++, redhat

我有一个来自 Windows 的 C++ 应用程序，我希望将其移植到 Red Hat Linux 系统上运行。这个应用程序嵌入了一个稍微修改过的 Python 2.7.3 版本（我添加了 Py_SetPath 命令，因为它对我的用例来说是必不可少的）所以我肯定需要编译 Python 源代码。

我的问题是，尽管看起来，我实际上找不到任何指导，说明如何让 Python 发出正确的文件供我链接，以及如何让 g++ 以我不这样做的方式链接我的 C++ 代码不需要在我将其分发到的每个系统上都安装 Python 副本。

所以我的问题是：

*   如何编译 Python 以便它可以嵌入到 Linux 上的 C++ 应用程序中？
*   我在链接什么以使 C++ 应用程序正常工作？

很抱歉这些基本问题，但在说服我的雇主让我尝试将我们的系统迁移到 Linux 之后，我渴望让它尽可能顺利地运行，我担心没有取得太大进展！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:10:08.973

你想链接到 python 静态库，它应该被默认创建并被调用`libpython2.7.a`

如果我没记错的话，只要您不使用它构建 Python`--enable-shared`就不会安装动态库，因此您只会获得静态库，因此只需将您的 C++ 应用程序`-lpython2.7 -L/path/where/you/installed/python/lib`链接到静态库即可。

# php - 我如何将数组传递给php中的函数

> ID：14375400
> 
> 赞同：-5
> 
> 时间：2013-01-17T09:03:05.913
> 
> 标签：php, arrays, function

我正在考虑是否可以将数组传递给php中的函数，我的意思是作为参数。我知道如何传递一个变量，`function try($try) { }`但是如果要传递的变量是一个数组变量，我怎么能完成，

```
$arrTry = array("name"=>"Keydi", "lname"=>"Paul"); 
```

然后，

```
function try($arrTry) { } 
```

但问题是我不知道如何在函数内部获取传递的数组的值。我的目的是我将创建一个函数来获取表字段名，然后将结果传递给一个将生成 sql 的函数声明对我来说，..，有什么出路吗？或做很长的路，..，.，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:04:50.623

```
function search($arrTry)
{ 
  echo $arrTry["name"];
  echo '<br>';
  echo $arrTry["lname"];
}

  $arrTry = array("name"=>"Keydi", "lname"=>"Paul"); 

// To call this function
     search($arrTry); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:08:22.000

```
function myfunc($arr)
{
foreach($arr as $k=>$v) {
//make your sql statements
}
}

//call this function like this
$arr = array("id"=>"1", "name"=>"Keydi","class"=>"web development");
myfunc($arr); 
```

# regex - 正则表达式：如何匹配没有任何字符重复 3 次的字符串？

> ID：14375402
> 
> 赞同：3
> 
> 时间：2013-01-17T09:03:08.097
> 
> 标签：regex, pcre, backreference

我正在尝试制作一个可以验证输入字符串的模式。验证规则不允许任何字符连续重复超过 3 次。

例如：

`Aabcddee`- 已验证。

`Aabcddde`-**无效**，因为 3 **d**字符。

目标是提供可以匹配上述示例之一的 RegExp 模式，但不能同时匹配两者。我知道我可以使用反向引用，`([a-z])\1{1,2}`但这只匹配连续字符。我的问题是我无法弄清楚如何为此制作单一模式。我试过这个，但我不太明白为什么它不起作用：

`^(([a-z])\1{1,2})+$`

在这里，我尝试匹配内部组中重复 1 或 2 次的任何字符，然后如果重复多次，则匹配该内部组。但它不是那样工作的。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T09:39:23.837

要检查字符串是否没有连续重复 3 次或更多次的字符（任何类型，甚至是新行）：

```
/^(?!.*(.)\1{2})/s 
```

您还可以检查输入字符串是否与此正则表达式不匹配。在这种情况下，您也可以知道连续重复 3 次或更多次的字符。请注意，这与上面完全相同，只是将负前瞻内的正则表达式`(?!pattern)`取出。

```
/^.*(.)\1{2}/s 
```

如果要添加验证字符串仅包含来自 的字符`[a-z]`，并且您认为`aaA`无效：

```
/^(?!.*(.)\1{2})[a-z]+$/i 
```

如您所见，`i`标志（不区分大小写）会影响捕获的文本与当前输入的比较方式。

如果要允许空字符串通过，请更改`+`为。`*`

如果要考虑`aaA`有效，并且要允许大写和小写：

```
/^(?!.*(.)\1{2})[A-Za-z]+$/ 
```

乍一看，可能和上一个一样，但是由于没有`i`标志，所以捕获的文本不会进行不区分大小写的匹配。

**以下是失败的答案，您可以忽略它，但您可以阅读它以获得乐趣。**

* * *

您可以使用此正则表达式来检查字符串是否没有 3 个重复字符（任何类型，甚至是新行）。

```
/^(?!.*(.)(?:.*\1){2})/s 
```

您还可以检查输入字符串是否与此正则表达式不匹配。在这种情况下，您也可以知道字符被重复超过或等于 3 次。请注意，这与上面完全相同，只是将负前瞻内的正则表达式`(?!pattern)`取出。

```
/^.*(.)(?:.*\1){2}/s 
```

如果要添加验证字符串仅包含来自 的字符`[a-z]`，并且您认为`aaA`无效：

```
/^(?!.*(.)(?:.*\1){2})[a-z]+$/i 
```

如您所见，`i`标志（不区分大小写）会影响捕获的文本与当前输入的比较方式。

如果要考虑`aaA`有效，并且要允许大写和小写：

```
/^(?!.*(.)(?:.*\1){2})[A-Za-z]+$/ 
```

乍一看，可能和上一个一样，但是由于没有`i`标志，所以捕获的文本不会进行不区分大小写的匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:17:00.140

从你的问题我知道你想匹配

*   `[A-Za-z]`仅由AND中的字符组成的字符串
*   仅包含不包含长度为 3 或更多的相同字符序列的字符串

那么这个正则表达式应该可以工作：

```
^(?:([A-Za-z])(?:(?!\1)|\1(?!\1)))+$ 
```

（[perl 中的示例](http://ideone.com/1uCkDV)）

# android - 强制 Android 中的相机提供 30 FPS

> ID：14375404
> 
> 赞同：1
> 
> 时间：2013-01-17T09:03:13.040
> 
> 标签：android, camera, android-camera

我正在尝试将相机用于需要 30 FPS 左右的高恒定帧速率的视频处理。

我正在使用 Camera 类和 setPreviewCallbackWithBuffer 来接收视频帧。我注意到大多数相机不支持 30000 - 30000 的 FPS 范围。但是，在录制电影时，我假设这些设备上的相机仍然提供大约 30 的帧速率。有没有其他方法可以实现比使用更高的帧速率我现在的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T14:18:34.693

请注意，具有廉价摄像头的非顶级设备，尤其是前置摄像头，不支持您要求的可靠 fps。如果您请求 30，设备可以回复 ok（将开始捕获，不会崩溃等），但实际上它会根据光照条件提供具有 fps 范围的帧... [4-30]（更少的光线需要更长的曝光时间) 也可能是别的东西。此类摄像头的示例是 Galaxy S3 mini 上的前置摄像头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:05:18.780

**如果您不想对所有设备使用静态 fps 速率**，您可以使用[getSupportedPreviewFpsRange ()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewFpsRange%28%29)方法来确定该`fps`特定设备的可用范围。此方法将返回支持的**最小**和**最大**`fps`速率。

现在在获得最大支持`fps`速率后，您可以使用当前方法设置 fps 速率。

希望这会给您一些关于将 fps 设置为最大值的提示。

# html - 如何使用 CSS 水平对齐图像旁边的文本

> ID：14375410
> 
> 赞同：0
> 
> 时间：2013-01-17T09:03:23.740
> 
> 标签：html, css

![在此处输入图像描述](../Images/cc9c4fc6b16ef02da5c54bf886c95497.png)

如何使用 CSS（如附加的截图）垂直对齐图像旁边的文本。

例如：我在这篇文章中附上了截图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:04:37.470

将图像向左浮动并放在`overflow:hidden`文本上以防止它进入图像下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:09:28.647

为图像使用此 CSS 样式

```
clear:both 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:10:16.960

一个简单的浮点数通常可以解决问题：

```
img {
    float: left;
}

p {
    float: left;
} 
```

这使文本适应图像。如果文本比图像的高度长，它将在它下面换行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:16:34.217

```
<p><img src="https://www.google.com/images/srpr/logo3w.png" style="float:left;padding-right:12px" width="280" />Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p>
<br style="clear:both" />
<p>It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p> 
```

测试这个。

# ruby-on-rails - 如何从 csv 在 rails 中的 db 中存储更多的记录？

> ID：14375425
> 
> 赞同：0
> 
> 时间：2013-01-17T09:04:14.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我想在heroku db中存储更多的记录，并且我正在将数据从csv文件导入到表中，并且在运行时它开始生成

```
Error R14 (Memory quota exceeded) 
```

那么我怎样才能避免这种情况并将所有记录存储在heroku的表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:50:24.977

[https://devcenter.heroku.com/articles/error-codes#r14-memory-quota-exceeded](https://devcenter.heroku.com/articles/error-codes#r14-memory-quota-exceeded)添加更多 RAM 或减少当前使用量。

# google-docs - 我可以在不登录 Google 帐户的情况下在 Google Docs 中打开本地 .doc 文件吗？

> ID：14375431
> 
> 赞同：1
> 
> 时间：2013-01-17T09:04:49.843
> 
> 标签：google-docs, google-drive-api, doc

我的硬盘上有 .doc 文件。我想在 Google Docs 中打开这个文档。但是如果没有谷歌账号，我可以处理吗？是否有任何解决方案可以在没有 MS Office 的情况下打开 .doc 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:10:45.760

您需要一个 google 帐户来上传 .doc 文件，以便可以查看（或转换为 Google 文档并进行编辑）。查看它的其他方法可能是使用不同的文字处理器，如[AbiWord](http://www.abisource.com/)（开源并且可以处理 .doc 文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:12:12.927

1）我不确定您是否可以在不使用您的帐户登录的情况下打开文档文件。仅供参考 - Google Docs 已被 Google Drive 取代。

2）有很多支持文档的文件浏览器。一种流行的选择是 Libre Office（早期的开放式办公室）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T17:38:03.343

使用无需登录 Google 帐户的[Google Drive 查看器](https://docs.google.com/viewer)，您可以在线快速查看多种文件类型，包括 PDF、Microsoft Office 文件和多种图像文件类型。

[关于 Google Drive 查看器的](http://support.google.com/drive/bin/answer.py?hl=en&p=docs_viewer&answer=2423485)参考资料

# php - 如何使用codeigniter将一堆会话变量加载到另一个控制器函数并将它们插入数据库

> ID：14375433
> 
> 赞同：0
> 
> 时间：2013-01-17T09:04:50.307
> 
> 标签：php, mysql, codeigniter

我试图编写一个代码，当按下提交按钮时，表单会将其所有值存储在会话变量中，然后转到下一个页面，那里还有另一个表单等待填写。当按下第 2 页中表单的提交按钮时，变量将存储在会话中，然后会话变量/数组的内容将插入数据库中。我似乎有问题

概括：

1.  第 1 页 - 用户填写表格，提交时变量将存储在会话数组中

2.  第 2 页 - 用户填写另一个表单，提交时变量将存储在会话数组中

3.  第 1 页和第 2 页中的会话变量将插入到数据库中

这是我的代码：

控制器（site.php）

```
 public function m1()
        {
            if(isset($_POST['m1']))
            {
                $suffix = $this->input->post("suffix");
                $fn = $this->input->post("fn");
                $mn = $this->input->post("mn");
                $ln = $this->input->post("ln");
                $nickname = $this->input->post("nickname");
                $sex = $this->input->post("sex");
                $bday = $this->input->post("bday");
                $street = $this->input->post("street");
                $city = $this->input->post("city");
                $province = $this->input->post("province");
                $region = $this->input->post("region");
                $landline = $this->input->post("landline");
                $cellphone = $this->input->post("cellphone");
                $email = $this->input->post("email");
                $edu_level = $this->input->post("edu_level");
                $course = $this->input->post("course");
                $school_name = $this->input->post("school_name");
                $school_address = $this->input->post("school_address");
                $school_province = $this->input->post("school_province");
                $school_city = $this->input->post("school_city");
                $school_region = $this->input->post("school_region");

                $newdata = array('suffix'=>$suffix,
                                'fn'=>$fn,
                                'mn'=>$mn,
                                'ln'=>$ln,
                                'nickname'=>$nickname,
                                'sex'=>$sex,
                                'bday'=>$bday,
                                'street'=>$street,
                                'city'=>$city,
                                'province'=>$province,
                                'region'=>$region,
                                'landline'=>$landline,
                                'cellphone'=>$cellphone,
                                'email'=>$email,
                                'edu_level'=>$edu_level,
                                'course'=>$course,
                                'school_name'=>$school_name,
                                'school_address'=>$school_address,
                                'school_province'=>$school_province,
                                'school_city'=>$school_city,
                                'school_region'=>$school_region,
                                );

                $this->session->set_userdata($newdata);

                redirect(base_url() . "site/cmain/m/2");    
            }

        }

        public function m2()
        {
            if(isset($_POST['m2']))
            {
                $nature_complaint = $this->input->post("nature_complaint");
                $newdata = array('nature_complaint'=>$nature_complaint);
                $this->session->set_userdata($newdata);
                $this->db->insert('myself', $newdata); 
                redirect(base_url() . "site/cmain/m/3");    
            }
        } 
```

我的代码的问题是第 2 页的会话变量（公共函数 m2（））是唯一插入数据库的变量。有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:13:45.357

您的 $newData 变量在您的第二个函数中被重置。您已经将 $newData 数组存储到会话中。在第二个函数会话中重置值后仅包含来自第二个函数的数据。您需要在 $newData 中添加数据而不是重置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:56:44.897

## 在第一个函数 (M1)

以这种方式设置你的新数据

```
$this->session->set_userdata('newdata', $newdata); 
```

## 在第二个功能（M2）

```
 public function m2()
    {
        if(isset($_POST['m2']))
        {
            $nature_complaint = $this->input->post("nature_complaint");

            $newdata = array();
            $newdata = $this->session->userdata('newdata');
            $newdata['nature_complaint'] = $nature_complaint;

            $this->session->set_userdata('newdata', $newdata);

            $this->db->insert('myself', $newdata); 
            redirect(base_url() . "site/cmain/m/3");    
        }
    } 
```

# php - 在 FreeBSD 上来自 PHP 的 MSSQL 连接

> ID：14375441
> 
> 赞同：4
> 
> 时间：2013-01-17T09:05:27.777
> 
> 标签：php, sql-server, pdo, windows-server-2003, freebsd

作为我的问题的延伸：[从 PHP/FreeBSD 远程连接到 SQL Server 标准版](https://stackoverflow.com/questions/8381787/remote-connect-to-sql-server-standard-edition-from-php-freebsd)

我试图让我们的 FreeBSD/Apache/PHP 服务器能够查询我们的 WinServer2003/SQL-Server-2000 框。请注意，这不适用于公共系统，仅适用于内部报告功能 - 因此性能不是此时的关键。最初的问题帮助我准备 MSSQL 服务器进行连接，现在正在从它那里得到某种响应。但是我还没有成功连接到它。

我已经尝试过 PDO_dblib、mssql (FreeTDS) - 还没有尝试过 ODBC。如果我能让 PDO 工作，我更愿意，所以这就是我在这里的目标——这也是我尝试过的两个中最成功的一个。

**我使用 PDO:dblib 的 PHP 脚本**

```
<?php 

ini_set('display_errors', 1); 
ini_set('log_errors', 1); 
ini_set('error_log', dirname(__FILE__) . '/error_log.txt'); 
error_reporting(E_ALL);

$servername = '192.168.1.51';
$port = '1433';
$serverdsn = $servername.':'.$port;
$username = 'webserver';
$password = '123456';
$dbname = 'oneServer_staging';

$sqlstatement = 'SELECT * FROM ordersp';

try 
        {
            $pdo = new PDO ("dblib:host=".$serverdsn.";dbname=".$dbname,$username,$password);
        } 
        catch (PDOException $e)
        {
            echo "Failed to get DB handle: " . $e->getMessage() . "\n";
            exit;
        }
exit; 
```

***此 PDO:dblib 脚本在浏览器中运行时的结果：***

```
Failed to get DB handle: SQLSTATE[28000] Login incorrect. (severity 9) 
```

***在 MSSQL 服务器的应用程序日志中，我发现了这个：***

![在此处输入图像描述](../Images/4c2014b40b00296c0754b3fc70e6b7d7.png)

**在对 FreeTDS 发表评论后进行编辑**

**我使用 mssql_connect() / FreeTDS 的 PHP 脚本**

```
<?php 

ini_set('display_errors', 1); 
ini_set('log_errors', 1); 
ini_set('error_log', dirname(__FILE__) . '/error_log.txt'); 
error_reporting(E_ALL);

$username = 'webserver';
$password = '123456';
$dbname = 'oneServer_staging';

$sqlstatement = 'SELECT * FROM ordersp';

$link = mssql_connect('MYMSDN', $username, $password);

if (!$link) {
    die('Something went wrong while connecting to MSSQL');
} 
```

***此 mssql/FreeTDS 脚本在浏览器中运行时的结果：***

```
Warning: mssql_connect(): Unable to connect to server: MYMSDN in
/home/www/[..]/httpdocs/public/default/philip/oneserver-db-test.php
on line 17 Something went wrong while connecting to MSSQL 
```

***/usr/local/etc/freetds.conf***

```
[global]
        # TDS protocol version
        tds version = 4.2

        initial block size = 512

        # uses some fixes required for some bugged MSSQL 7.0 server tha
        # return invalid data to big endian clients
        # NOTE TDS version 7.0 or 8.0 should be used instead
;       swap broken dates = no
;       swap broken money = no

        # Whether to write a TDSDUMP file for diagnostic purposes
        # (setting this to /tmp is insecure on a multi-user system)
        dump file = /tmp/freetds.log
;       debug flags = 0xffff

        # Command and connection timeouts
;       timeout = 10
;       connect timeout = 10

        # If you get out of memory errors, it may mean that your client
        # is trying to allocate a huge buffer for a TEXT field.
        # (Microsoft servers sometimes pretend TEXT columns are
        # 4 GB wide!)   If you have this problem, try setting
        # 'text size' to a more reasonable limit
        text size = 64512

# A typical Microsoft SQL Server 2000 configuration
[MYMSDN]
        host = 192.168.1.51
        port = 1433
        tds version = 8.0
        client charset = UTF-8 
```

该文件`/tmp/freetds.log`在执行脚本时不显示任何内容，但是如果我使用`# tsql -C`命令，它会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:11:09.290

以下代码行是否有效？

```
ini_set('display_errors', 1); 
ini_set('log_errors', 1); 
ini_set('error_log', dirname(__FILE__) . '/error_log.txt'); 
error_reporting(E_ALL);

$username = 'webserver';
$password = '123456';
$dbname = 'oneServer_staging';
$servername = '192.168.1.51';

if (!$link = mssql_connect($servername, $username, $password)) {
   exit('Error: Could not make a database connection using ' . $username . '@' . $servername);
}

if (!mssql_select_db($dbname, $link)) {
   exit('Error: Could not connect to database ' . $dbname);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:15:23.990

你的 freetds.conf 文件中需要这一行吗？你确定双方都使用UTF-8吗？

```
client charset = UTF-8 
```

这是我用来将 PHP 连接到 MSSQL 从 Ubuntu 机器到 Windows SQL Server 的代码，我不知道它是否对你有帮助，但这段代码现在已经成功运行，所以我知道它可以在我们的环境中工作。 .

PHP：

```
<?php
try{
   $con = new PDO("dblib:dbname=$dbname;host=$servername", $username, $password);
}catch(PDOException $e){
   echo 'Failed to connect to database: ' . $e->getMessage() . "\n";
   exit;
}
?> 
```

/etc/odbc.ini

```
# Define a connection to the MSSQL server.
# The Description can be whatever we want it to be.
# The Driver value must match what we have defined in /etc/odbcinst.ini
# The Database name must be the name of the database this connection will connect to.
# The ServerName is the name we defined in /etc/freetds/freetds.conf
# The TDS_Version should match what we defined in /etc/freetds/freetds.conf
[mssqldb]
Description             = MSSQL Server
Driver                  = freetds
Database                = MyDB
ServerName              = mssqldb
TDS_Version             = 8.0 
```

/etc/odbcinst.ini

```
# Define where to find the driver for the Free TDS connections.
[freetds]
Description     = MS SQL database access with Free TDS
Driver          = /usr/lib/i386-linux-gnu/odbc/libtdsodbc.so
Setup           = /usr/lib/i386-linux-gnu/odbc/libtdsS.so
UsageCount      = 1 
```

/etc/freetds/freetds.conf

```
[global]
        # If you get out-of-memory errors, it may mean that your client
        # is trying to allocate a huge buffer for a TEXT field.  
        # Try setting 'text size' to a more reasonable limit 
        text size = 64512

# Define a connection to the MSSQL server.
[mssqldb]
        host = mssqldb
        port = 1433
        tds version = 8.0 
```

# sql-server-2008 - 在 Select 语句中使用变量名而不是表名

> ID：14375449
> 
> 赞同：0
> 
> 时间：2013-01-17T09:06:21.927
> 
> 标签：sql-server-2008, cursor

我正在使用 SQL Server 从一个数据库中获取数据并与另一个数据库进行比较。我们拥有的数据库有大约 400 个表。我必须编写一个查询来根据数据库名称获取所有表名，并且只有一个列名，我必须从所有表中获取数据。

现在，我已经编写了一个查询来获取主键值并获取具有该主键值的表名。我的计划是在第一个游标中调用主键详细信息，并在其中创建另一个游标并获取表名和列名的详细信息。

根据检索到的值，我必须编写一个查询来获取数据，例如“select * from @cursor_variable_tablename where primarykeyval = @cursor_variable_primarykeyval”。

是否可以通过调用变量而不是给出表名来像这样工作。？

请帮我解决一下这个。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:46:07.803

不确定您要在这里实现什么，但您可以使用动态 sql 执行以表名作为变量的查询。

# android - Android 使用 Api 8 在 DatePicker 上设置 Mindate

> ID：14375451
> 
> 赞同：2
> 
> 时间：2013-01-17T09:06:25.577
> 
> 标签：android, datepicker

所以我正在开发 Android 应用程序，我也还是很新。在我的应用程序中，我有一个 DatePicker，我需要将最小日期设置为当天。目前我正在使用 setMinDate 方法，该方法效果很好，但不幸的是我需要将我的 api 级别降低到 8。我一直在使用 datepicker.init() 方法在线查看这个问题，但我不能让它太有效，所以我已经没有想法了。

任何帮助都会很棒。

# grails - 如何打印可用的表和数据库？

> ID：14375454
> 
> 赞同：0
> 
> 时间：2013-01-17T09:06:30.087
> 
> 标签：grails, groovy

有没有什么好的方法（或任何方法）用 Grails 列出所有可用的表和数据库？想象一个项目，其中数据库是可选的，由用户选择要使用的数据库/表。

我想要一种列出当前用户可用的数据库和表的方法。出于明显的原因，我最好希望使用 GORM 完成此操作，但我在文档中找不到任何内容。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:29:13.600

关于如何列出表格。

如果您已经有这些表的域类，您可以像[这里](https://stackoverflow.com/questions/2707796/list-of-all-domain-classes-in-grails)一样列出它们，然后[获取相关的表名](https://stackoverflow.com/questions/7664845/how-to-get-the-name-of-the-table-gorm-object-is-mapped-to)。

否则，您将需要一个本机 sql 查询，我想这将是特定于数据库供应商的。

# android - 使用 Robotium 处理随机对话框

> ID：14375456
> 
> 赞同：0
> 
> 时间：2013-01-17T09:06:36.250
> 
> 标签：android, robotium

我正在尝试使用 Robotium 测试登录场景。我的困惑是，我该如何测试以下内容：

案例1：如果Web服务调用过程中出现错误，随机显示一个对话框，我该如何处理。因为我不确定这个对话框是否会出现。

案例2：如果这件事处理了，测试是失败还是通过？因为要成功登录，用户应该导航到下一个屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:30:30.300

您知道该对话框何时何地发生，因此可以将其放入代码中来处理该对话框。例如：

假设你有一些这样的代码

```
solo.clickOnView(view1);

solo.clickOnView(view2); 
```

并且您知道对话框可能会出现在测试的这两个步骤之间，您可以将其放入类似以下的代码中：

```
if(solo.waitForView(dialogView, 1000, false)){
    solo.clickOnView(dialogDismissButton);
    solo.clickOnView(view2) //retry the step above
} 
```

如果错误可能再次发生，那么将这些调用放入函数中并递归/循环通过在测试失败之前尝试此循环一段时间是有意义的。

至于案例 2。这取决于您的成功标准，理想情况下，如果我是您，我会尝试删除任何导致上述错误的外部依赖项，因此它永远不会发生，但如果您坚持认为它是片状的。那么用户是否认为这是一个错误？我可能会说，如果您的生产应用程序经常无法登录，那么该应用程序有问题，我会失败该步骤并且不实施上述几点，但这是我的解释，请与业务分析师/客户/最终用户交谈并了解他们的观点。

# phantomjs - 使用 CasperJS/PhantomJs 进行抓取

> ID：14375465
> 
> 赞同：0
> 
> 时间：2013-01-17T09:07:05.047
> 
> 标签：phantomjs, casperjs

我想用 CasperJS 从一个受欢迎的网站上抓取一些数据。我已经使用代理池成功地抓取了一些数据。现在我担心 HTTP REQUEST 标头与我的 HTTP 请求一起出现。我知道有很多关于我和我的服务器的信息——所以是否存在一些删除或修改传出 HTTP 标头的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:44:41.820

您可以使用 headers 属性将自定义标头添加到 casperjs。您应该能够更改您关心的标题。

示例：[http ://casperjs.org/api.html#casper](http://casperjs.org/api.html#casper)

```
casper.open('http://some.testserver.com/post.php', {
    method: 'post',
    data:   {
       'title': 'Plop',
        'body':  'Wow.'
    },
    headers: {
       'Accept-Language': 'fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3'
    }
}); 
```

# android - 是否也可以使用 C 来挂钩 android gsm 调制解调器

> ID：14375473
> 
> 赞同：0
> 
> 时间：2013-01-17T09:07:28.443
> 
> 标签：android, c, linux

我们想为 android 制作一个自定义拨号器。是否可以通过直接将 At 命令发送到调制解调器来做到这一点，在我的情况下，调制解调器位于 dev/smd0 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:37:37.150

这似乎在大多数手机上都是可能的。我没有用它在手机内拨打电话（作为音频测试项目的一部分，我通过 USB 打了很多电话）。

# sql - 从查询的子集中获取最新记录

> ID：14375479
> 
> 赞同：2
> 
> 时间：2013-01-17T09:07:37.793
> 
> 标签：sql, sql-server, sql-server-2005

我有两个相关的表。

```
Table 1:
recordid | OrderNumber | MobileNumber
       1 | 1234        | 9999999999
       2 | 1234        | 9888888888
       3 | 1234        | 9777777777
       4 | 5433        | 9666666666
       5 | 1444        | 9555555555
       6 | 1444        | 9444444444
       7 | 1544        | 9333333333
       8 | 1632        | 9222222222

Table 2
recordid | modifiedon
       1 | 15/1/2013
       2 | 17/1/2013 
       3 | 13/1/2013
       4 | 10/1/2013
       5 | 16/1/2013
       6 | 01/1/2013 
       7 | 09/1/2013
       8 | 08/1/2013 
```

我想要做的是获得一组独特的`OrderNumber`及其对应的`MobileNumbers`. 如果 1 有多个记录`OrderNumber`，则查询应获取最新修改记录的`OrderNumber`和`MobileNumber`。

所以基本上我应该得到以下结果。

```
OrderNumber | MobileNumber
1234        | 9888888888
5433        | 9666666666
1444        | 9555555555
1544        | 9333333333
1632        | 9222222222 
```

我试过了

```
select OrderNumber, MobileNumber from Table1 
where OrderNumber in 
(
   Select Distinct table1\. rderNumber, table2.ModifiedOn 
   from Table1, Table2 
   group by table2.ModifiedOn desc
) 
```

这很紧急，如果能得到快速回复，我将非常高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:10:16.630

`CTE`使用and更容易`ROW_NUMBER`：

```
WITH cte AS 
(SELECT t1.ordernumber, 
        t1.mobilenumber, 
        RN = Row_number() 
               OVER ( 
                 partition BY t1.ordernumber 
                 ORDER BY t2, modifiedon DESC) 
         FROM   table1 t1 
                INNER JOIN table2 t2 
                        ON t1.recordid = t2.recordid) 
SELECT ordernumber, 
       mobilenumber
FROM   cte 
WHERE  rn = 1 
```

除此之外，您还有 `DESC`一个`GROUP BY`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:18:29.690

```
select * 
from 
(
select t1.*, 
       row_number() 
       over (PARTITION BY t1.OrderNumber 
             ORDER BY t2.modifiedon DESC ) as rn
from t1
left join t2 on (t1.recordid=t2.recordid)
)
where RN=1 
```

# c# - 提取 [ text1 ] [text2] 标签之间的所有字符串

> ID：14375483
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:07:41.830
> 
> 标签：c#, asp.net, regex

我有一个 sql 文本，其中包括

```
"Select * from Table Where [PARAM1] = [PARAM2] ..." 
```

我想在要列出的`"[" "]"`标签之间获取列表。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:14:07.950

您可以使用 LINQ

```
string str = "Select * from Table Where [PARAM1] = [PARAM2] ...";
string[] Array = str.Split().Where(r=> r.StartsWith("[") && r.EndsWith("]"))
                    .Select(r=> r.Trim('[',']'))
                    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:12:12.690

您可以尝试使用正则表达式和一些 LINQ：

```
Regex t = new Regex(@"\[([^]]*)\]");
List<String> parameters = t.Matches(input_string).Cast<Match>().Select(a => a.Groups[1].ToString()).ToList(); 
```

这将导致一个包含两个匹配项的列表`PARAM1`和`PARAM2`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T09:15:24.063

使用这个片段

```
string strRegex = @"\[(.*?)\]";
RegexOptions myRegexOptions = RegexOptions.IgnoreCase;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"Select * from Table Where [PARAM1] = [PARAM2] ...";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
   // myMatch.Groups[0] - your string
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T09:19:49.177

你也可以做

```
List<string> matches=Regex.Matches(@"(?<=\[)[^\[\]]*(?=\])")
                          .Cast<Match>()
                          .Select(x=>x.Value)
                          .ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T09:20:41.287

这是您需要的：

```
Regex t = new Regex(@"\[(.*?)\]");

string str = @"Select * from Table Where [PARAM1] = [PARAM2] ...";

foreach (Match myMatch in myRegex.Matches(str))
{
   // myMatch.Groups[0] and so on....
} 
```

## [现场演示](http://regexr.com?33eel)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T09:14:41.220

要将 MatchCollection 转换为 List 使用：

```
List<Match> myMatches = Regex.Matches("bla", @"\[[^]]*)\]").Cast<Match>.toList(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T09:15:14.727

您可以尝试使用这个正则表达式：

```
Regex regex = new Regex(@"\[.*?\]");
var parameters = regex.Matches(sqlQueryString); 
```

# forms - 更改发送到 Aweber 的“添加 URL”

> ID：14375487
> 
> 赞同：0
> 
> 时间：2013-01-17T09:07:49.680
> 
> 标签：forms, email, submit, aweber

我正在寻找如何更改发送给 aweber 的“添加 URL”。我们正在使用 API 第三方提供商，它在那里提交注册页面的页面 url。

所以我想知道我们如何将在 aweber 中看到的 URL 更改为“添加 URL”。

有 javascript 或其他东西可以做到这一点吗？

是否会将其从实际页面更改为我们的页面... [http://www.domain.com](http://www.domain.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:56:58.490

“添加 URL”字段为 AWeber Web 表单保留，API 不可写入。您的第三方集成商很可能使用 API 来简单地显示 HTML Web 表单，而不是通过 API 实际将订阅者提交到您的列表。

为了验证这一点，您可以在您的 AWeber 帐户中查看订阅者记录，添加方法将被列为“API”或“Web 表单”。

虽然我并不完全确定在可能已经准确的情况下更改添加 URL 的用例，但有一些解决方法可以解决该字段缺乏写访问权限的问题。

在这种情况下，您始终可以使用广告跟踪字段或自定义字段。您仍然可以对这些字段中的任何一个进行分段，并且它们可以通过 API 完全写入。

如果您在使用 API 方面需要任何帮助，或者想要比公共论坛提供的更具体的帮助，请务必联系 AWeber 客户解决方案 - help@aweber.com

# sql - 需要 PostgreSQL 到 OracleSQL 查询转换帮助

> ID：14375489
> 
> 赞同：0
> 
> 时间：2013-01-17T09:08:00.257
> 
> 标签：sql, postgresql, oracle-sqldeveloper

我在这里有一个 PostgreSQL 查询，它计算“单词”表列中的大写字符：

```
sum(length(substring(word from '^[A-Z]*'))) as capitalized_sum; 
```

我需要将其转换为 Oracle SQL 查询。

我试过：

```
sum(length(regexp_like('^[A-Z]*'))) from word as capitalized_sum; 
```

但这给了我“SQL 命令未正确结束”的消息。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:34:19.363

我想我找到了我需要的东西。这是 OracleSQL 查询：

```
select sum(length(REGEXP_SUBSTR(word, '^[A-Z]*'))) as capitalized_sum from mytable; 
```

# java - 如何在 servlet 中处理上传的图像？

> ID：14375493
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:08:19.033
> 
> 标签：java, database, jsp, servlets

在 jsp 页面中，我上传了一个图像文件，并将该 Jsp 页面转发到一个 Servlet，我想在 Servlet 中检索该图像并将该图像添加到数据库中......。任何人都可以解释如何在 servlet 中检索图像和将该图像添加到数据库？例如：我们可以使用 request.getParameter("string"); 检索字符串；同样，是否有任何预定义的方法来检索图像？例如：prepareStatement.setInt(colomnindex); 同样，是否有任何预定义的方法可以将图像添加到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:56:03.150

首先，使用 JSP 选择要上传的文件，您至少需要一个 HTML 元素来显示文件浏览字段。

```
<form action="upload" method="post" enctype="multipart/form-data">
   <input type="file" name="file">
   <input type="submit">
</form> 
```

在 servlet 中检索上传的文件，

```
List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
for (FileItem item : items) {
   if (!item.isFormField()) {
    // <input type="file">
    System.out.println("Field name: " + item.getFieldName());
    System.out.println("File name: " + item.getName());
    System.out.println("File size: " + item.getSize());
    System.out.println("File type: " + item.getContentType());
  } else {
    // <input type="text|submit|hidden|password|button">, <select>, <textarea>,<button>
    System.out.println("Field name: " + item.getFieldName());
    System.out.println("Field value: " + item.getString());
  }              
 } 
```

您只需要从 FileItem 对象中获取 InputStream 并将其写入任何 OutputStream。

```
 InputStream content = item.getInputStream();
                     OR
   item.write(new File("/uploads/filename.ext")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:13:58.490

像这样的东西

**HTML / JSP**

< 输入类型="文件" 名称="照片" />

**塞尔维特**

```
String fotoURL = req.getParameter("foto");
        System.out.println(fotoURL);
        URL urlFoto = null;
        urlFoto = getClass().getClassLoader().getResource(fotoURL); 

        System.out.println(urlFoto);
        BufferedImage foto = ImageIO.read(urlFoto); 
```

# android - 使用钛在 Android 4.0 中取消日期选择器对话框的问题

> ID：14375497
> 
> 赞同：0
> 
> 时间：2013-01-17T09:08:22.200
> 
> 标签：android, appcelerator-mobile

这是显示日期选择器对话框的代码。

```
 var tempDate = new Date();
        // This picker only supports android platform
        var picker = Ti.UI.createPicker({
            type : Ti.UI.PICKER_TYPE_DATE,
            minDate : new Date((tempDate.getFullYear() - 10), 0, 1),
            maxDate : new Date((tempDate.getFullYear() + 10), 11, 31),
        });

        picker.showDatePickerDialog({
            value : new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate()),
            callback : function(e) {
                if (e.cancel) { // User clicks on cancel button
                    Ti.API.info('User canceled dialog');
                    alert("User canceled date");
                } else { // User selects set or done button.
                    Ti.API.info('User selected date: ' + e.value.getFullYear());
                    alert("user selected date:"+e.value.getFullYear());
                }

            }
        }); 
```

一切运行良好，直到 android v2.3.6。高达 2.3.6 的日期选择器对话框同时显示设置和取消按钮。所以当用户点击设置按钮时

```
 alert("user selected date:"+e.value.getFullYear()); 
```

此警报对话框正在执行。如果用户点击取消按钮

```
 alert("User canceled date"); 
```

此警报正在执行。

但问题来自Android v4.0。日期选择器对话框仅显示完成按钮。如果用户点击完成按钮然后

```
 alert("user selected date:"+e.value.getFullYear()); 
```

警报正在完美执行。

如果用户想取消对话框，那么他需要按后退按钮或单击日期选择器视图的外侧。这意味着即使用户取消对话框

```
 alert("user selected date:"+e.value.getFullYear()); 
```

正在执行相同的选定警报框。如何解决这个问题呢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:42:17.247

您可以修改您的代码，如

```
 picker.showDatePickerDialog({
                    value : new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate()),
                    callback : function(e) {
                        if (e.cancel) { // User clicks on cancel button
                            Ti.API.info('User canceled dialog');
                            alert("User canceled date");
                        } else { // User selects set or done button.
                            if(e.value){
                                Ti.API.info('User selected date: ' + e.value.getFullYear());
                                alert("user selected date:"+e.value.getFullYear());
                            }
                        }

                    }
                }); 
```

那会成功的

# iphone - 图像地图上的可点击区域

> ID：14375498
> 
> 赞同：1
> 
> 时间：2013-01-17T09:08:24.933
> 
> 标签：iphone, ios, objective-c, uiimageview

我正在为一个节日构建一个应用程序。事情是我展示了一个可滚动的图像（节日区域），我必须能够放大和缩小并滚动它。您可以在下面看到示例图像。

![在此处输入图像描述](../Images/e13a81bac87b8082fe2b3ab9bdf61bbc.png)

就像你在这里看到的那样，有三个阶段：（Wablief?!、Marquee、The庇护所）。现在我应该可以点击这些阶段了。当我点击一个舞台时，一个 tableview 应该作为 modalView 弹出，其中包含艺术家。

现在我的问题是：我怎样才能做到这一点？请记住，此图像应该是可滚动和可缩放的。因此`UIButtons`，我认为与合作不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:20:02.637

在背景中有一个带有大型可滚动图像的滚动视图。

为您需要的所有可点击对象创建 UIImageViews。

将它们作为适当位置的子视图添加到滚动视图中。

将轻击手势添加到所有此类图像视图。

我希望这对你的情况有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T17:21:25.833

我知道这是旧的，但我刚刚经历过。我添加了一系列透明的 UIButton。每个按钮都有一个标签，因此可以在一个方法中识别所有按钮。然后，您可以根据 sender.tag 采取行动。我有 100 个按钮。这很费力，但它有效。

# c - 服务器不接收来自客户端的数据

> ID：14375499
> 
> 赞同：0
> 
> 时间：2013-01-17T09:08:34.493
> 
> 标签：c, windows, udp, client-server, ipv6

我的服务器没有收到来自客户端的任何数据，但没有错误，所以我真的不知道出了什么问题。在客户端的 while 循环中，我尝试发送消息。服务器停留在 recvfrom 函数中，似乎没有得到数据。cmd 中的 netstat 显示服务器侦听端口 50000。我将 IPv6 地址 ::1 和控制台参数提供给客户端。

这是服务器的代码：

```
#include <WinSock2.h>
#include <ws2ipdef.h>
#include <stdio.h>

#define PORT 50000

#define BUFFERSIZE 64

void error(char *err)
{
    fprintf(stderr,"%s: %d\n", err, WSAGetLastError());
    getchar();
    exit(EXIT_FAILURE);
}

int main(int argc, char *argv[])
{
struct sockaddr_in6 server, client;
SOCKET sock;
char buffer[BUFFERSIZE];
LPTSTR recvBuff[1024];
DWORD recvBuffLen = 1024UL;
int len = sizeof(client);

WORD wVersionRequested;
WSADATA wsaData;
wVersionRequested = MAKEWORD(1,1);
WSAStartup(wVersionRequested, &wsaData);

sock = socket(AF_INET6, SOCK_DGRAM, 0);
if (sock < 0)
    error("Fehler beim Anlegen des Sockets");

memset( &server, 0, sizeof (server));
memset( &client, 0, sizeof (client));

server.sin6_family = AF_INET6;
server.sin6_port = htons(PORT);
server.sin6_addr = in6addr_any;

if (bind(sock, (struct sockaddr *) &server, sizeof(server)) == -1)
    error("Fehler beim binden des Sockets");

while (1)
{
    if (recvfrom(sock, buffer, BUFFERSIZE, 0, (struct sockaddr *)&client, &len) == -1)
        error("Fehler beim erhalten von Daten");
    printf("...");
    printf("Pakete erhalten von: %s:%d\nDaten: %s\n\n", WSAAddressToString((struct sockaddr *)&client.sin6_addr, len, NULL, *recvBuff, &recvBuffLen), PORT, buffer);
}

closesocket(sock);
return 0;
} 
```

这里是我的客户的代码：

```
#include <WinSock2.h>
#include <ws2ipdef.h>
#include <stdio.h>

#define PORT 50000

#define BUFFERSIZE 64

void error(char *err)
{
fprintf(stderr,"%s: %d\n", err, WSAGetLastError());
getchar();
exit(EXIT_FAILURE);
}

int main(int argc, char *argv[])
{
struct sockaddr_in6 server;
SOCKET sock;
char buffer[BUFFERSIZE];
int len = sizeof(server);

WORD wVersionRequested;
WSADATA wsaData;
wVersionRequested = MAKEWORD(1,1);
WSAStartup(wVersionRequested, &wsaData);

if (argc != 2) {
    printf("Usage: %s <Server-IP>\n", argv[0]);
    getchar();
    exit(0);
}

sock = socket(AF_INET6, SOCK_DGRAM, 0);
if (sock == -1)
    error("Socket Fehler");

memset( &server, 0, sizeof (server));

server.sin6_family = AF_INET6;
server.sin6_port = htons(PORT);
if ((WSAStringToAddressA(argv[1], AF_INET6, NULL, (SOCKADDR *)&server, &len)) < 0)
    error("String konnte nicht aufgelößt werden");

while (1)
{
    printf("\nDaten eingeben: (Enter für Text bestätigen, 'q' eingeben um zu beenden)");
    scanf("%[^\n]", buffer);
    getchar();
    if (strcmp(buffer, "q") == 0)
        exit(0);

    if (sendto(sock, buffer, BUFFERSIZE, 0, (struct sockaddr *)&server, len) == -1)
        error("Fehler bei Übertragung");
}

closesocket(sock);
return 0;
} 
```

我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:57:05.317

只是一个猜测：问题可能是`stdout`缓冲 - 尝试禁用它

```
setbuf(stdout, NULL); 
```

`stdout`或者只是在你之后冲洗`printf()`：

```
printf("...");
printf("Pakete erhalten von: %s:%d\nDaten: %s\n\n", WSAAddressToString((struct sockaddr *)&client.sin6_addr, len, NULL, *recvBuff, &recvBuffLen), PORT, buffer);
fflush(stdout); 
```

# c++ - 使用 boost lambda 设置结构的成员

> ID：14375503
> 
> 赞同：1
> 
> 时间：2013-01-17T09:08:59.610
> 
> 标签：c++, boost, c++03, boost-lambda

我正在尝试使用`vector<Wrap>`与中相同的值进行创建`v`。我尝试了以下组合，没有奏效！

```
using namespace std;

struct Wrap
{
  int data;
  //Other members
};

int main()
{
  int a[10] = {2345,6345,3,243,24,234};
  vector<int> v(&a[0],&a[10]);
  Wrap w;
  //Populate other members of w
  vector<Wrap> vw;
  using namespace boost::lambda;
  //transform(v.begin(),v.end(), back_inserter(vw), (bind(&Wrap::data,&w,_1), boost::lambda::constant(w)));
  //transform(v.begin(),v.end(), back_inserter(vw), bind(&Wrap::data,&w,_1), boost::lambda::constant(w));
  //transform(v.begin(),v.end(), back_inserter(vw), ((w.data = _1), boost::lambda::constant(w)));
  //transform(v.begin(),v.end(), back_inserter(vw), ((w.data = _1), w));
  cout << vw.size() << endl;
  BOOST_FOREACH(Wrap w, vw)
  {
    cout << w.data << endl;
  }
} 
```

*注意：*还不能使用 C++11

**更新**任何适用于 C++03 的干净解决方案都可以。不需要使用 boost lambda

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:01:12.040

你应该定义一个构造函数`Wrap`：

```
struct Wrap
{
  Wrap(int data): data(data) {}
  int data;
}; 
```

然后你可以简单地这样做：

```
transform(v.begin(),v.end(), back_inserter(vw), constructor<Wrap>()); 
```

`constructor`来自`boost/lambda/construct.hpp`，并将构造函数包装为函数对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:24:12.210

使用`std::transform()`并指定二元运算函数。例如：

```
#include <iostream>
#include <vector>
#include <algorithm>

struct Wrap
{
    int data;
};

Wrap set_data(int a_new_data, Wrap a_wrap)
{
    a_wrap.data = a_new_data;
    return a_wrap;
}

int main()
{
    int a[10] = { 2345, 6345, 3, 243, 24, 234 };
    const size_t A_SIZE = sizeof(a) / sizeof(a[0]);
    std::vector<Wrap> vw(A_SIZE);

    std::transform(a, a + A_SIZE, vw.begin(), vw.begin(), set_data);

    std::cout << vw[0].data << ','
              << vw[1].data << ','
              << vw[5].data << ','
              << vw[9].data << '\n';
    return 0;
} 
```

[请参阅http://ideone.com/DHAXWs](http://ideone.com/DHAXWs)上的演示。

# javascript - 带有 Spring 的 CORS 不起作用

> ID：14375505
> 
> 赞同：0
> 
> 时间：2013-01-17T09:09:01.840
> 
> 标签：javascript, spring, mongodb, cross-domain, cors

我的 Spring 应用程序中存在**Access-Control-Allow-Origin**这个众所周知的问题。我使用跨域请求从内置的**MongoDB**数据库 REST 接口中读取数据（例如： http:\localhost:28017\db_name\collection_name ）。

我的 javascript 客户端（JSONP 不起作用：（）与此网页上的这个非常相似：http: [//2rdscreenretargeting.blogspot.com/2012/06/enable-cors-for-jersey.html](http://2rdscreenretargeting.blogspot.com/2012/06/enable-cors-for-jersey.html)。我也使用来自的 CORS 过滤器这个网站： http: [//software.dzhuvinov.com/cors-filter.html](http://software.dzhuvinov.com/cors-filter.html)。

我的 Spring 应用程序的每个响应在其标头中都有这个 Access-Control-Allow-Origin 属性，来自 mongodb 的响应除外。我还可以做些什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:13:26.487

我对 MongoDB 的请求如下所示：

**Accept: */* Origin:localhost:8080 Referer:localhost:8080/SpringHighcharts/chartmongo User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17**

我还发现**mongod**有参数 --json**允许通过 HTTP 接口访问 JSONP。在启用此选项之前考虑允许此活动的安全隐患**，但即使启用此选项也不会改变我认为的任何内容；/

# javascript - 浮点图 - 如何在指定时间的折线图上标记点

> ID：14375506
> 
> 赞同：1
> 
> 时间：2013-01-17T09:09:01.877
> 
> 标签：javascript, canvas, charts, flot

我用两个轴（x 和 y）制作了图表，轴 x 处于时间模式。是否可以在指定时间的线上标记点？像这样的东西：http: [//i.stack.imgur.com/46wj0.png](http://i.stack.imgur.com/46wj0.png)

# php - 检查数组中字符串的一部分

> ID：14375507
> 
> 赞同：2
> 
> 时间：2013-01-17T09:09:09.570
> 
> 标签：php, arrays, string, search

我想检查字符串的一部分（不是完整的字符串，因为它将是可变的）是否存在于数组中。

```
$test = array(
  0 => 'my searcg',
  1 => 'set-cookie: shdugdd',
  2 => 'viable: dunno'
); 
```

我想要的是检查任何一个键是否具有字符串“set-cookie”，如果是，则返回该键。我无法检查完整的字符串，因为`set-cookie`每次的值都会不同。它可能也不存在，因此也需要检查。

我知道我可以遍历数组并检查相同的结果并获得结果，但我正在寻找更简洁/有效的答案。难以获得解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T09:12:29.810

```
foreach($test as $key=> $value)
{
  if (strpos($value,'set-cookie') !== false) 
 {
  echo $key; // print key containing searched string
  }
} 
```

这是另一种选择。（[工作示例](http://codepad.org/57nJNGLl)）

```
 $matches = preg_grep('/set-cookie/', $test); 
    $keys    = array_keys($matches); 

    print_r($matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:14:07.623

嘿，你可以使用php的array_walk函数

这是详细的解释。

[http://php.net/manual/en/function.array-walk.php](http://php.net/manual/en/function.array-walk.php)

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:13:53.640

```
function returnkey($arr) {
    foreach($arr as $key => $val) {
        if(strpos($val, 'set-cookie') !== false) {
            return $key;
        }
    } 
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:31:25.443

匹配数组中 $str 的函数。

用例：`$key = strInArray ( 'set-cookie', $array );`

```
function strInArray ( $str, $array ) {

    if ( array_walk ( $array, function ( $val, $key ) use ( &$data, $str ) {
        if ( strpos ( $val, $str ) !== false ) {
            $data = $key;
        }
    }));

    return $data;
} 
```

# xml - 如何更改 XML 以使用空元素标签？

> ID：14375508
> 
> 赞同：5
> 
> 时间：2013-01-17T09:09:12.437
> 
> 标签：xml, perl, tags, xml-twig

我是[XML::Twig](http://search.cpan.org/perldoc?XML%3a%3aTwig)的新手。如何更改所有空元素以使用空元素标签 ( `<foo/>`) 而不是开始标签和结束标签组合 ( `<foo></foo>`)？

输入：

```
<book>
    <given-names>Maurice<xref ref-type="fn" rid="fnI_1"></xref></given-names>
    <colspec colname="col1" colnum="1"></colspec>
    <entry align="left"><p></p></entry>
</book> 
```

我需要输出为：

```
<book>
    <given-names>Maurice<xref ref-type="fn" rid="fnI_1"/></given-names>
    <colspec colname="col1" colnum="1"/>
    <entry align="left"><p/></entry>
</book> 
```

我试过：

```
 use XML::Twig;
       my $xml = XML::Twig->new(twig_handlers => {
                                  'xref' => sub {$_->set_tag('#EMPTY'),},
                                },
                                pretty_print => 'indented',                                        
                               );
       $xml->parse('sample.xml');
       $xml->print;
} 
```

但我无法处理它。如何在没有内容标签的情况下全局更改为空标签？我该如何改变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:41:25.643

XML::LibXML 将自动输出较短的版本。

```
use XML::LibXML qw( );
print XML::LibXML->new()->parse_file($ARGV[0])->toString(); 
```

* * *

至于 XML::Twig，它也默认使用较短的形式 ( `empty_tags => 'normal'`)。但是，它只考虑那些从创建的空元素`<foo/>`。（对我来说似乎很愚蠢！）我做了一些挖掘，发现它确实允许你改变它是否认为一个元素是空的。这是使用`set_empty`和完成的`set_not_empty`。

```
use XML::Twig qw( );
my $twig = XML::Twig->new(
   twig_handlers => {
      '*' => sub {
         $_->set_empty() if !$_->first_child();
      },
   },
);
$twig->parsefile($ARGV[0]);
$twig->print(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:55:42.750

如果你想坚持使用 Twig，你可以这样做：

```
#!usr/bin/perl
use strict;
use warnings;
use XML::Twig;

my $xml = XML::Twig->new(twig_handlers => {
             'p' => sub { 
                 if (!$_->first_child()) { $_->set_content('#EMPTY') } 
              },
           },
           pretty_print => 'indented',
           empty_tags => 'normal'                                 
);

$xml->parsefile('file.xml');
$xml->print; 
```

基本上你必须手动检查元素是否包含任何内容，然后将其设置为空元素。

# visual-c++ - 如何停止为 CAxWindow -> IWebBrowser2->Navigate 运行无响应的脚本

> ID：14375510
> 
> 赞同：1
> 
> 时间：2013-01-17T09:09:18.430
> 
> 标签：visual-c++, atl, iwebbrowser2

我在 ATL exe 中使用`CAxWindow::CreateControl()`. 然后我查询`IWebBrowser2`界面并导航到一个 URL。打电话后`IWebBrowser2->Navigate`，我会检查

1.  `IWebBrowser2->get_ReadyState (&result)`和
2.  `IWebBrowser2->get_Busy(&bBusyStatus);`

并基于上述价值观，我称之为`IWebBrowser2->Stop();`

但是，如果 URL 有一些无限循环，则脚本运行不会停止，过了一会儿我收到以下消息： `"Stop running this script? A script on this page is causing your web browser to run slowly....."`

我想禁止显示此消息框，监视超时，显示我自己的自定义消息并停止运行脚本。但不知道如何实现这一点。对此或任何替代想法的任何帮助将不胜感激。

注意：Even`IWebBrowser2->Quit()`无助于中止脚本。

我正在使用 VC++，ATL。

# jquery - uploadify - 如果在溢出 div 中不可见，按钮将失败

> ID：14375511
> 
> 赞同：0
> 
> 时间：2013-01-17T09:09:19.803
> 
> 标签：jquery, uploadify

已经发现，如果我的上传按钮位于带有垂直滚动的 div 中并且不可见（它们更向下），那么上传按钮不起作用其他人会遇到这个吗？难道我做错了什么？谢谢 MG

```
<script type="text/javascript">
    $(document).ready( function() {
    $("#file_upload_1").uploadify({
        height        : 30,
        swf           : 'uploadify3/uploadify.swf',
        uploader      : 'uploadify3/upload.asp',
        width         : 120
    });
    });
</script>
</head>
<body style="background-color:#FFFFFF; overflow:hidden">
    <div style="height:500px; width:200px; overflow-y:scroll">
        <div style="width:200px; height:1000px;"></div>
        <div><input type="file" name="file_upload" id="file_upload_1" /></div>
    </div>
</body> 
```

# database - 为大型安全项目选择 noSQL - 大量或写入，部分读取

> ID：14375516
> 
> 赞同：1
> 
> 时间：2013-01-17T09:09:35.333
> 
> 标签：database, nosql, bigdata

我需要一些帮助来为收集大量数据的安全项目选择 noSQL。假设要向 noSQL 写入来自许多用户的大量数据，我们需要对其进行聚合，并且我们需要能够获取具有排序功能的数据（例如：获取前 50 名用户的一些报告......） .

这意味着我们有很多数据插入（没有更新）并且有时会被读取。

我看到了很多 noSQL，但我找不到一个答案。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:03:43.210

**Mongodb**是当今最流行的 noSQL DB。这意味着伟大的工具，更容易找到熟练的建议。它支持我认为您需要的所有功能（分片、Map/Reduce、noSQL）：

> 收集大量数据的项目

最终，您需要在不同的机器之间分发数据，而 mongo 对此进行了分片。

> 我们需要聚合它

您将从 map/reduce 中获益良多

> 我们需要能够获取具有排序功能的数据

noSQL 负责这个

# iphone - iPhone AppStore iOS 6 详细视图中的标签（详细信息、评论、相关）

> ID：14375517
> 
> 赞同：2
> 
> 时间：2013-01-17T09:09:36.083
> 
> 标签：iphone, ios, xcode, tabs, app-store

您是否知道任何教程/项目以 Apple 在 AppStore -> 应用程序详细信息页面中的方式实现选项卡？这就是我的意思：

![AppStore 信息视图选项卡](../Images/7b6560b9c8fd7728d6db636614db43c4.png)

我当然可以自己写，但我想知道以前是否没有这样的想法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:11:57.747

你应该看看： http: [//www.cocoacontrols.com/platforms/ios/controls/sdwellsegmentedcontrol](http://www.cocoacontrols.com/platforms/ios/controls/sdwellsegmentedcontrol)，非常有用！

洛里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:25:57.320

在您的情况下，您需要创建`UIView`or `UIImageView`with frame **(0, 35, self.view.bounds.size.width, 36)**并添加 Three `UIButton`。`UIButton`并为**Both** `forState:UIControlStateNormal`和设置背景图像`forState:UIControlStateHighlighted`。为了更好地理解，我还为 You 编写了以下代码。

```
 UIImageView *imgHeading = [[UIImageView alloc] initWithFrame:CGRectMake(0, 35, self.view.bounds.size.width, 36)] ;
    [imgHeading setImage: [UIImage imageNamed:@"NameOfImage"]];
    [self.view addSubview: imgHeading];

    UIButton *btnHome = [UIButton buttonWithType:UIButtonTypeCustom];
    [btnHome addTarget:self action:@selector(goBack:) forControlEvents:UIControlEventTouchUpInside];
    btnHome.frame = CGRectMake(as you need);
    [btnHome setBackgroundImage:[UIImage imageNamed:@"NameOfImage"] forState:UIControlStateNormal];
    [btnHome setBackgroundImage:[UIImage imageNamed:@"NameOfImage"] forState:UIControlStateHighlighted];
    [self.view addSubview:btnHome];

UIButton *btnHome1 = [UIButton buttonWithType:UIButtonTypeCustom];
    [btnHome1 addTarget:self action:@selector(goBack:) forControlEvents:UIControlEventTouchUpInside];
    btnHome1.frame = CGRectMake(as you need);
    [btnHome1 setBackgroundImage:[UIImage imageNamed:@"NameOfImage"] forState:UIControlStateNormal];
    [btnHome1 setBackgroundImage:[UIImage imageNamed:@"NameOfImage"] forState:UIControlStateHighlighted];
    [self.view addSubview:btnHome1];

UIButton *btnHome2 = [UIButton buttonWithType:UIButtonTypeCustom];
    [btnHome2 addTarget:self action:@selector(goBack:) forControlEvents:UIControlEventTouchUpInside];
    btnHome2.frame = CGRectMake(as you need);
    [btnHome2 setBackgroundImage:[UIImage imageNamed:@"NameOfImage"] forState:UIControlStateNormal];
    [btnHome2 setBackgroundImage:[UIImage imageNamed:@"NameOfImage"] forState:UIControlStateHighlighted];
    [self.view addSubview:btnHome2]; 
```

**谢谢，可能对你有帮助:)**

# android - 如何将猫头鹰类导入eclipse

> ID：14375518
> 
> 赞同：1
> 
> 时间：2013-01-17T09:09:43.977
> 
> 标签：android, eclipse, class, owl

我想将语义网络（owl）文件的类导入并列出到 Eclipse 中。我确实在我的 eclipse 程序中导入了颗粒和 protege 库，但我仍然看到强制关闭我的 android 项目。没有红线或错误代码，因为我在网豆中使用了相同的代码。我的代码在下面..

```
public static final IRI localLocation_IRI = IRI.create("file:c:///rdfex.owl");
public static final IRI Ont_Base_IRI = IRI.create("http://www.emkarhafriyat.com/owlex.owl");
    OWLOntologyManager m = OWLManager.createOWLOntologyManager();
    OWLDataFactory f = OWLManager.getOWLDataFactory();
    OWLOntology o = null;
    public void testAddAxioms() {
        try {
            o = m.loadOntologyFromOntologyDocument(Ont_Base_IRI);
            OWLClass clsA = f.getOWLClass(IRI.create(Ont_Base_IRI + "#ClassA"));
            OWLClass clsB = f.getOWLClass(IRI.create(Ont_Base_IRI + "#ClassB"));
            // Now create the axiom
            OWLAxiom ax1 = f.getOWLSubClassOfAxiom(clsA, clsB);
            // add the axiom to the ontology.
            AddAxiom addAxiom1 = new AddAxiom(o, ax1);
            // We now use the manager to apply the change
            m.applyChange(addAxiom1);
            // print all classes
            for (OWLClass cls : o.getClassesInSignature()) {
               EditText edit = (EditText) findViewById(R.id.editText1);
               edit.setText((CharSequence) cls);
            }
            m.removeOntology(o);
        } catch (Exception e) {
            EditText edit = (EditText) findViewById(R.id.editText1);
            edit.setText("Not successfull");
        }
    } 
```

我弄错了这个代码段

```
public static final IRI localLocation_IRI = IRI.create("file:c:///rdfex.owl");
public static final IRI Ont_Base_IRI = IRI.create("http://www.emkarhafriyat.com/owlex.owl"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:03:45.790

[URL http://www.emkarhafriyat.com/owlex.owl](http://www.emkarhafriyat.com/owlex.owl) (404)中没有本体，因此无法加载任何内容`m.loadOntologyFromOntologyDocument(Ont_Base_IRI);`，您会收到错误消息。

要修复它，您应该在指定的 URL 处公开您的 OWL 文件，或者从本地加载 OWL 文件。你可以这样做：

```
//Create the file object
File file = new File("/your/local/path/example.owl");
// Now load the local copy of the ontology     
OWLOntology yourOntology = manager.loadOntologyFromOntologyDocument(file); 
```

# cmake - 如何编写一个通过引用传递变量的好函数？

> ID：14375519
> 
> 赞同：26
> 
> 时间：2013-01-17T09:09:51.440
> 
> 标签：cmake

如标题中所述，我想在 cmake 中编写一个“不错的”函数，该函数能够修改作为参数传递给该函数的变量。

我能想到的唯一方法是丑陋的：

*函数定义*

```
function(twice varValue varName)
set(${varName} ${varValue}${varValue} PARENT_SCOPE)
endfunction(twice) 
```

*用法*

```
set(arg foo)
twice(${arg} arg)
message("arg = "${arg}) 
```

*结果*

```
arg = foofoo 
```

在我看来，根本就没有可以传递的变量的真正概念？！我觉得 cmake 有一些基本的东西我还没有接受。

那么，有没有更好的方法来做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-17T09:24:12.020

您不需要传递变量的值和名称。名称就足够了，因为您可以通过名称访问值：

```
function(twice varName)
  SET(${varName} ${${varName}}${${varName}} PARENT_SCOPE)
endfunction()

SET(arg "foo")
twice(arg)
MESSAGE(STATUS ${arg}) 
```

输出“foofoo”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-22T10:46:24.463

我使用这两个宏进行调试：

```
macro(debug msg)
    message(STATUS "DEBUG ${msg}")
endmacro()

macro(debugValue variableName)
    debug("${variableName}=\${${variableName}}")
endmacro() 
```

用法：

```
set(MyFoo "MyFoo's value")
debugValue(MyFoo) 
```

输出：

```
MyFoo=MyFoo's value 
```

# python - python 2和python 3在同一台服务器上的WSGI应用程序？

> ID：14375520
> 
> 赞同：5
> 
> 时间：2013-01-17T09:09:53.307
> 
> 标签：python, apache, wsgi

我已经有一个用 Python 2 编写的 Web 应用程序，它在 WSGI（特别是 OpenERP Web 服务器）上运行。

我想编写一个新的 Web 应用程序，它将在同一台服务器（Ubuntu 上的 Apache 2）上运行，但使用 WSGI 和 Python 3。这两个应用程序将在不同的端口上。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-04T16:22:16.240

不，mod_wsgi 不可能（请参阅此处：[https](https://github.com/GrahamDumpleton/mod_wsgi/issues/21) ://github.com/GrahamDumpleton/mod_wsgi/issues/21和此处：[https ://serverfault.com/questions/599859/multiple-python-versions-under- apachemod-wsgi](https://serverfault.com/questions/599859/multiple-python-versions-under-apachemod-wsgi) )

这篇文章还提供了一个替代方案：使用 nginx。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T09:29:35.543

它很有可能。这就是 virtualenv 的全部意义所在。使用 python3 在 vi​​rtualenv 中设置第二个应用程序。

您可以将其添加到 apache 的虚拟主机配置中。

# cakephp - 如何在多个 Cakephp 应用程序之间最好地共享资源？

> ID：14375521
> 
> 赞同：1
> 
> 时间：2013-01-17T09:10:00.270
> 
> 标签：cakephp, cakephp-2.0

2 个其他独立的 Cakephp 应用程序将共享一些主要与演示相关的资源，例如

*   CSS 文件
*   Javascript 文件
*   自定义助手
*   元素
*   布局

对于助手来说，创建一个可以在两个应用程序中使用的插件就足够了。但是我不知道是否有办法共享应用程序范围的布局和 css 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:27:51.473

如果它对帮助者来说已经足够了，为什么不制作一个名为“Presentations”的插件并将与演示代码相关的所有内容都放入其中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:06:08.847

主题：

```
CSS
Javascript
Elements
Layouts 
```

插入：

```
Helpers 
```

如果您已经在使用主题，则可以使用资产制作插件并像使用它一样使用它

```
echo $this->Html->css('AssetPlugin.something'); 
```

您可以将其捆绑为独立插件，并使用 git 子模块将其包含在各种项目中。

# php - MySQL Select 语句中的 PHP 变量

> ID：14375527
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:10:36.203
> 
> 标签：php, mysql

昨天我有一个问题，只是这个没有答案。

我有一个 php 登录和注册脚本。当用户注册时，他们在数据库中自动分配一个 ID（自动增量）。

此 ID 将在另一个表中链接到虚拟机（请参阅帐户 ID：http: [//i47.tinypic.com/2gtr8g1.png](http://i47.tinypic.com/2gtr8g1.png)）。

现在我想在一个 HTML 表单的数据中显示那个虚拟机。这应该通过选择 account_ID 由帐户完成。

有人可以向我解释该怎么做吗？

据我说： SELECT * FROM .. 然后我就不知道了。ID 不是固定值，因为每个用户的 ID 不同。

在这里您可以看到帐户表：http: [//i50.tinypic.com/2cgg75g.png](http://i50.tinypic.com/2cgg75g.png)

我拥有的表格是：Account（这里是具有自动递增 ID（account_id）的注册用户）VM_Instance（这里保留虚拟机详细信息等。这些我将显示在一个按 account_id 排序的 HTML 表单中）

我没有代码，我不知道如何使用它。我想要一个填充了我选择的表格数据的 HTML 表单。但是每个帐户的数据不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:15:58.727

希望这是您遇到问题的地方。

```
$id = 1;
$name = 'admin';

$query = "SELECT * FROM `table_name` WHERE id = {$id} "; // for numbers
$query = "SELECT * FROM `table_name` WHERE account_name = '{$name}' "; // for strings

$query = "SELECT * FROM `table_name` WHERE id = '".$name."'; // this is another way of doing it by concatenating strings.

mysqli_query($conn, $query); // and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:15:51.223

如果您已将“登录”列定义为唯一的，那么您可以像这样检索您的 id：

```
select id from users where login='blabla'; 
```

您还可以使用[mysql_insert_id](http://php.net/manual/en/function.mysql-insert-id.php)函数，它为您提供最后生成的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:18:23.480

嗯...据我了解，当用户登录时，您需要获取他的 ID

```
SELECT id FROM account WHERE account_name = "<account name of user>" 
```

这将为您提供 id，接下来您需要来自 vm 表的信息（正如我从您的问题中理解的那样）。所以使用你刚刚做的 id

```
SELECT * FROM vm_instance WHERE account_id = <id from previous query> 
```

# android - requestRouteToHost 问题在 4.0.3 和 4.0.4 下但不是其他

> ID：14375537
> 
> 赞同：2
> 
> 时间：2013-01-17T09:11:19.907
> 
> 标签：android, device, android-version

对于个人项目，我必须检查用于 MMS 的设备 LAN ip 是否可达。我已经使用提供的 APN 找到了 IP。现在我需要使用该`requestRouteToHost`方法来检查找到的代理是否有效。

该代码在运行 android 2.3 到 4.0 以及从 4.1 到更高版本的设备上完美运行。但它在 4.0.3 和 4.0.4 下给我一个错误。我已经在多台设备上对其进行了测试，这不是设备问题，而是版本问题。

```
if (!connMgr.requestRouteToHost(2, inetAddr)) {
     Log.e(TAG, "unable to request route to host");
     throw new IOException("Cannot establish route to proxy " + inetAddr);
} else {
     Log.e(TAG, "route to host requested");
} 
```

第一个条件始终为真，这是一个真正的问题。

上面的代码包含在我这样制作的 AsynTask 中：

```
private class AsyncRoute extends AsyncTask<String, Void, Void>
{
    @Override
    protected Void doInBackground(String... proxyAddr)
    {
        try
        {
            ensureRouteToHost(proxyAddr[0]);
            Log.e(TAG, "OK ACK");
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        mInetAck = true;
        return null;
    }
} 
```

找到的 InetAddress`-938825536`相当于`192.168.010.200`.

要启动此 AsyncTask，我使用以下代码：

```
new AsyncRoute().execute(MMSProxy);
while (!mInetAck); 
```

基本上，它在执行几个请求之前等待确认。

那么，有人知道是否有绕过这个问题的技巧吗？我的意思是有没有办法做同样的事情`connMgr.requestRouteToHost(2, inetAddr)`，可以在每台设备上工作？

谢谢。

Ps：在Desire S 2.3、Desire S 4.0.3、Xperia lt30p 4.0.4、Nexus S 4.0.3等上测试。

编辑：在引发异常的设备上，路由 IP 上的 ping 命令有效：

```
> adb shell ping 192.168.10.200
PING 192.168.10.200 (192.168.10.200) 56(84) bytes of data.
64 bytes from 192.168.10.200: icmp_seq=1 ttl=251 time=4023 ms
64 bytes from 192.168.10.200: icmp_seq=5 ttl=251 time=81.3 ms 
```

但是路由请求失败了：s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:40:03.793

问题解决了。启用 wifi 时找不到到 IP 的路由。最简单的方法是禁用wifi，做你的事情，然后启用wifi。

这是我使用的代码：

```
// Disable wifi if it's active
WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
if (wifiManager.isWifiEnabled())
{
      mWasWifiActive = true;
      wifiManager.setWifiEnabled(false);
      Log.e(TAG, "Wifi was enabled, now Off.");
}

// Do stuff here

// Re-enable wifi if it was active before routing
if (mWasWifiActive)
{
       WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
       wifiManager.setWifiEnabled(true);
       Log.e(TAG, "Wifi is back online.");
} 
```

# c# - ASP.NET MVC - 反序列化来自 SOAP Web 服务的响应

> ID：14375544
> 
> 赞同：0
> 
> 时间：2013-01-17T09:11:53.713
> 
> 标签：c#, asp.net-mvc, serialization, soap, xml-serialization

这是我在 MVC 中的代码：

```
 string url = "https://api....";
    HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
    httpWebRequest.Method = "POST";
    httpWebRequest.ContentType = "application/x-www-form-urlencoded";

    string postData = "<?xml version=\"1.0\"?>" +
                        "<request>" +
                            "<login>" + Login + "</login>" +
                            "<password>" + Password + "</password>" +
                            "<limit>" +
                                "<offset>10</offset>" +
                                "<limit>10</limit>" +
                            "</limit>" +
                        "</request>";

    try
    {
        using (StreamWriter requestWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
        {
            requestWriter.Write(postData);
        }
    }
    catch (System.Net.WebException ex)
    {
        return null;
    }

    HttpWebResponse httpWebResponse = (HttpWebResponse)httpWebRequest.GetResponse();
    Stream responseStream = httpWebResponse.GetResponseStream();
    StreamReader streamReader = new StreamReader(responseStream);
    var serializer = new System.Xml.Serialization.XmlSerializer(typeof(Class.hotels));
    Class.hotels hotel = (Class.hotels)serializer.Deserialize(streamReader);
    streamReader.Close();
    responseStream.Close();
    httpWebResponse.Close(); 
```

我在我的 Windows Phone 7 项目中获得了相同的功能（异步调用的小变化）并且它正在工作。我已将 WP7 项目中的类添加到 MVC，我现在正在 MVC 中尝试。一切正常，但最终我得到了 0 件物品的酒店（但在 WP 中我得到了物品）。我试图读取`streamReader`字符串，我得到了正确的答案，所以问题一定是反序列化。

那么可能是什么问题？如果类是错误的，我会从 XmlSerializer 收到错误消息，对吗（在 WP 中它也不起作用）？但我不知道还有哪里可能是问题所在。感谢帮助

**编辑：** 酒店类的一部分：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17929")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
public partial class hotels : object
{
    private int countfield;
    private ObservableCollection<hotel> hotelfield;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public int count
    {
        get
        {
            return this.countfield;
        }
        set
        {
            this.countfield = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public ObservableCollection<hotel> hotel
    {
        get
        {
            return this.hotelfield;
        }
        set
        {
            this.hotelfield = value;
        }
    }

}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17929")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
public partial class hotel : object, System.ComponentModel.INotifyPropertyChanged
{

    private int hotIdField;

    private int hoyIdField;
    ...
    many properties
    ...

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public int hotId
    {
        get
        {
            return this.hotIdField;
        }
        set
        {
            this.hotIdField = value;
            this.RaisePropertyChanged("hotId");
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public int hoyId
    {
        get
        {
            return this.hoyIdField;
        }
        set
        {
            this.hoyIdField = value;
            this.RaisePropertyChanged("hoyId");
        }
    }
    ...
    many getters, setters
    ... 
```

和响应内容（字符串中的xml）：

```
"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<hotels>\n    <foundHotels>4655</foundHotels>\n    <hotel>\n        <hotId>12</hotId>\n        <hoyId>1</hoyId>\n        <bookOnline>0</bookOnline>\n        <name>OÁZA Říčany</name>\n        <address>\n            <couId>1</couId>\n            <regId>3</regId>\n            <cotId>51</cotId>\n            <towId>121</towId>\n            <zipId>12093</zipId>\n            <name>OÁZA Říčany</name>\n            <street>V Chobotě 2112</street>\n            <city>Říčany</city>\n            <zip>25101</zip>\n            <country>Česká republika</country>\n            <phone>\n                <number>+420 323 601 170</number>\n                <number>+420 736 679 097</number>\n                <number>724 165 420</number>\n            </phone>\n   ... many properties ...     </hotel>\n    <hotel>\n        <hotId>13</hotId>\n        <hoyId>1</hoyId>\n        <bookOnline>0</bookOnline>\n        <name>Hotel Maxov</name>\n        <address>\n            <couId>1</couId>\n            <regId>14</regId>\n            <cotId>20</cotId>\n            <towId>1317</towId>\n            <zipId>2492</zipId>\n            <name>Hotel Maxov</name>\n            <street>Dolní Maxov 710</street>\n            <city>Josefův Důl</city>\n            <zip>46844</zip>\n            <country>Česká republika</country>\n            <phone>\n                <number>483381085,483381100</number>\n            </phone>\n     ... many properties of another hotel ...        </hotel>\n</hotels>\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:34:10.470

尝试像这样重新定义你的类：

```
public partial class hotels : object
{
    private int countfield;
    private ObservableCollection<hotel> hotelfield;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0, ElementName="foundHotels")]
    public int count
    {
        get
        {
            return this.countfield;
        }
        set
        {
            this.countfield = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElement(Order = 1,ElementName="hotel")]
    public ObservableCollection<hotel> hotel
    {
        get
        {
            return this.hotelfield;
        }
        set
        {
            this.hotelfield = value;
        }
    }
    // other fields
}

public partial class hotel : object, System.ComponentModel.INotifyPropertyChanged
{
    private int hotIdField;
    private int hoyIdField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public int hotId
    {
        get
        {
            return this.hotIdField;
        }
        set
        {
            this.hotIdField = value;
            this.RaisePropertyChanged("hotId");
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public int hoyId
    {
        get
        {
            return this.hoyIdField;
        }
        set
        {
            this.hoyIdField = value;
            this.RaisePropertyChanged("hoyId");
        }
    }

    // other properties
} 
```

# iphone - SenTesting OCUnit 和 GHUnit 测试之间的区别

> ID：14375547
> 
> 赞同：0
> 
> 时间：2013-01-17T09:12:08.347
> 
> 标签：iphone, testing

谁能告诉我 senTesting、OCUnit 和 GHUnit 测试的区别。

SenTesting 和 OCUnit 是否相同？

如果您有任何相关文件，请标记

@提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:52:05.513

OCUnit 包括 SenTestingKit。OCUnit 随 Xcode 一起提供。

GHUnit 是一种替代测试套件。由于 SenTestingKit 的某些限制（例如无法在测试类中设置断点），它过去常常优先使用 SenTestingKit。但是，这些限制已在 SenTestingKit 的最新版本中删除。

总而言之，SenTestingKit 现在是一个不错的选择。

这篇博文很好地描述了这种情况：

[http://longweekendmobile.com/2011/04/15/unit-testing-in-xcode-4-use-ocunit-and-sentest-instead-of-ghunit/](http://longweekendmobile.com/2011/04/15/unit-testing-in-xcode-4-use-ocunit-and-sentest-instead-of-ghunit/)

# objective-c - Interface Builder 不断重置我的自定义 UITableViewCell 的宽度

> ID：14375552
> 
> 赞同：18
> 
> 时间：2013-01-17T09:12:17.400
> 
> 标签：objective-c, xcode, ipad, interface-builder

我正在使用 Interface Builder**为 iPad 应用程序**设计自定义 UITableViewCell 。

我有一个专用的 XIB 文件，它有一个 UITableViewCell 作为它的根视图。我可以将 UITableViewCell 的宽度更改为 1024（在 XCode 右侧属性窗格的大小检查器中），这会临时调整画布上单元格的大小。

但是，如果之后我尝试在 UITableViewCell 中移动/调整某些项目的大小或关闭并重新打开 XIB，XCode 决定将 UITableViewCell 的宽度重置回 320（iPhone 特定宽度）。

然后，画布上的单元格会遮盖单元格内的项目，除非我再次调整单元格的大小，否则无法设计单元格。一旦你绕过这个循环几次，它就会变得相当烦人。

任何人都知道我可以如何设置宽度使其永久或一些如何指定 UITableViewCell 是 iPad 特定的？

* * *

要重新创建...

*   文件 > 新建 > 文件...
*   用户界面 > 空
*   设备系列 == iPad

*   将一个新的 UITableViewCell 拖到画布上（尽管之前选择了 iPad，但它创建的宽度为 320）

*   将 UITableViewCell 的宽度调整为 1024（到目前为止一切正常）
*   将一个 UILabel 拖放到 UITableViewCell 的左侧（还是不错的）
*   通过拖动角以任何方式调整 UILabel 的大小（不要使用属性检查器） *- 并且... UITableViewCell 的大小重置回 320*

* * *

编辑：

我刚刚收到 Apple 对我多年前创建的 Radar 票证的以下回复......

你好奥利弗，

> 这是关于 Bug ID# 13222753 的后续行动。
> 
> 为了进一步调查此问题，工程部要求提供以下信息：
> 
> 我们相信这个问题已经在最新的 Xcode 5.1 Seed 中得到解决。
> 
> 这是适用于 Mac、iPhone 和 iPad 的 Xcode 开发人员工具集的预发布版本。它包括 Xcode IDE、iOS 模拟器以及构建 OS X 和 iOS 应用程序所需的所有工具和框架。请使用此版本进行测试，并使用结果更新您的错误报告。
> 
> Xcode 5.1 Seed - Build 5B71f 发布日期：2013 年 12 月 13 日

我也刚刚尝试在 Xcode 5.0.2 中重新创建该问题，并且看起来它也已通过该构建修复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T03:53:41.177

我不知道您是否认为这是一个有效的答案，但是当我在 IB中使用**自动布局时，问题似乎只发生在我身上。**如果我关闭它，Xcode 调整 UITableViewCell 大小的问题就会消失。

要关闭**自动布局**，只需选择 UITableViewCell，然后在“文件检查器”的右侧，有一个用于自动布局的复选框**将**其关闭。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T04:50:57.677

解决方法是不要将表格视图单元格添加到您的笔尖。相反，使用常规视图来包含您的子视图。

创建一个自定义 UITableViewCell 类，该类加载 nib 并将顶级 nib 视图设置为单元格内容视图的子视图：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self) {
        UINib *nib = [UINib nibWithNibName:@"YourNibName" bundle:nil];
        UIView* containerView = [[nib instantiateWithOwner:self options:nil] objectAtIndex:0];
        containerView.translatesAutoresizingMaskIntoConstraints = NO
        [self.contentView addSubview:containerView];

        NSDictionary *views = NSDictionaryOfVariableBindings(containerView);
        [self.contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[containerView]|" options:0 metrics:nil views:views]];
        [self.contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[containerView]|" options:0 metrics:nil views:views]];
    }

    return self;
} 
```

使用表格视图注册您的课程：

```
[tableView registerClass:YourCellClass forCellReuseIdentifier:@"YourCellID"]` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T21:34:40.527

我刚刚做了一个测试，调整单元格大小没有问题。如果 Xib 是使用“for iPhone”或“for iPad”选项创建的，这并没有什么区别。因此，这按预期工作。

**诀窍是，不要拖动大小，而是使用 Inspector 更改宽度 - 这使单元格的大小为 1024。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T14:02:41.767

我确认[Edward Huynh 的回答](https://stackoverflow.com/a/15353006/260665)是正确的。同时，我无法关闭自动布局、更改高度、再次将自动布局转回来。这将要求我为内容视图的每个子视图重做所有自动布局设置。

我只是在试验，发现在 TextEdit 中打开 xib 文件并更改 tableViewCell 和 tableViewCellContentView 的宽度和高度实际上会保留所有自动布局并且单元格的大小会更新。现在很少有约束的常量值会过时，可以通过对此类约束使用“更新约束”轻松修复。

[![在此处输入图像描述](../Images/623d588f5c09dbc3e873960c77eac670.png)](https://i.stack.imgur.com/lV80w.png)

# c++ - 根据模板参数选择联合成员

> ID：14375558
> 
> 赞同：7
> 
> 时间：2013-01-17T09:12:43.180
> 
> 标签：c++, templates, member, unions

我正在处理 C++ 中的联合，我想要一个函数模板，它可以根据模板参数访问活动的联合成员。

代码类似于（doSomething 只是一个示例）：

```
union Union {
  int16_t i16;
  int32_t i32;
};

enum class ActiveMember {
    I16 
  , I32
}

template <ActiveMember M>
void doSomething(Union a, const Union b) {
  selectMemeber(a, M) = selectMember(b, M);
  // this would be exactly (not equivalent) the same
  // that a.X = b.X depending on T.
} 
```

为了做到这一点，我只发现了一些不好的技巧，比如专业化，或者一种不均匀的访问和分配方式。

我错过了一些东西，这样的事情应该用其他方法来做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T09:39:37.677

**可能性 1**

您可以使用简单的结构来选择成员，而不是使用枚举：

```
typedef short int16_t;
typedef long int32_t;

union Union {
    int16_t i16;
    int32_t i32;
};

struct ActiveMemberI16 {};
struct ActiveMemberI32 {};

template <typename M>
void doSomething(Union& a, Union b) {
    selectMember(a, M()) = selectMember(b, M());

    // this would be exactly (not equivalent) the same
    // that a.X = b.X depending on T.
}

int16_t& selectMember(Union& u, ActiveMemberI16)
{
    return u.i16;
}

int32_t& selectMember(Union& u, ActiveMemberI32)
{
    return u.i32;
}

int main(int argc, char* argv[])
{
    Union a,b;
    a.i16 = 0;
    b.i16 = 1;
    doSomething<ActiveMemberI16>(a,b);
    std::cout << a.i16 << std::endl;

    b.i32 = 3;
    doSomething<ActiveMemberI32>(a,b);
    std::cout << a.i32 << std::endl;
    return 0;
} 
```

这需要为联合中的每个成员定义一个结构和一个 selectMember 方法，但至少您可以在许多其他函数中使用 selectMember。

请注意，我将参数转换为引用，如果不合适，您可以调整它。

**可能性 2**

通过将联合指针转换为所需的类型指针，您可以使用单个 selectMember 函数。

```
typedef short int16_t;
typedef long int32_t;

union Union {
    int16_t i16;
    int32_t i32;
};
template <typename T>
T& selectMember(Union& u)
{
    return *((T*)&u);
}

template <typename M>
void doSomething(Union& a, Union b) {
    selectMember<M>(a) = selectMember<M>(b);

    // this would be exactly (not equivalent) the same
    // that a.X = b.X depending on T.
}

int _tmain(int argc, _TCHAR* argv[])
{
    Union a,b;
    a.i16 = 0;
    b.i16 = 1;

    doSomething<int16_t>(a,b);
    std::cout << a.i16 << std::endl;

    b.i32 = 100000;
    doSomething<int32_t>(a,b);
    std::cout << a.i32 << std::endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:22:03.943

我不确定为什么您认为模板专业化是“糟糕的 hack”，但 C++ 中没有“静态 if”之类的东西，所以如果您希望编译器根据评估的表达式的结果来区分生成的代码在*编译时*，您需要定义模板的不同的专用版本。

以下是您将如何定义它：

```
#include <iostream>

using namespace std;

union Union {
  int16_t int16;
  int32_t int32;
};

enum class ActiveMember {
    INT16
  , INT32
};

// Declare primary template
template <ActiveMember M>
void doSomething(Union a, const Union b);

// First specialization
template <>
void doSomething<ActiveMember::INT16>(Union a, const Union b)
{
    a.int16 = b.int16;

    // Do what you want here...
    cout << "int16" << endl;
}

// Second specialization
template <>
void doSomething<ActiveMember::INT32>(Union a, const Union b)
{
    a.int32 = b.int32;

    // Do what you want here...
    cout << "int32" << endl;
} 
```

这就是你将如何使用它。

```
int main()
{
    Union u1, u2;
    u1.int32 = 0;
    u2.int32 = 0;

    doSomething<ActiveMember::INT16>(u1, u2);
    doSomething<ActiveMember::INT32>(u1, u2);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:52:00.983

我能想到的唯一解决方案是将运算符添加到联合中：

```
union Union
{
    char c;
    short s;
    int i;
    float f;
    double d;

    operator char() const { return c; }
    operator short() const { return s; }
    operator int() const { return i; }
    operator float() const { return f; }
    operator double() const { return d; }
    template <typename T> operator T() const { /* invalid conversion */ T t; return t; }

    Union &operator =(char ac) { c = ac; return *this; }
    Union &operator =(short as) { s = as; return *this; }
    Union &operator =(int ai) { i = ai; return *this; }
    Union &operator =(float af) { f = af; return *this; }
    Union &operator =(double ad) { d = ad; return *this; }
    template <typename T> Union &operator =(T at) { /* invalid asignement */ return *this; }
}; 
```

当它作为[某种类型](http://ideone.com/JBK1nx)工作时，它允许您控制联合的行为：

```
template <typename T>
void doSomething(Union a, const Union b)
{
    // call the 'b' conversion operator and the 'a' asignment operator.
    a = static_cast<T>(b);
}

int main(int argc, char **argv)
{
    Union a, b;

    doSomething<int>(a, b);  // calls a.i = b.i
    doSomething<char>(a, b); // calls a.c = b.c

    return 0;
} 
```

运算符的模板版本与无效转换匹配。

# iphone - Facebook在应用程序中授权对话框而不是在Safari中

> ID：14375561
> 
> 赞同：0
> 
> 时间：2013-01-17T09:12:55.710
> 
> 标签：iphone, ios, objective-c, facebook, facebook-ios-sdk

我希望用户在我的应用程序中使用他的 facebook 登录，但我不希望应用程序进入 Safari，然后返回应用程序。

`[self authorizeWithFBAppAuth:NO safariAuth:NO];`我发现有些人通过在 facebook.m 中调用此方法来回答这个问题

我的问题是我没有 facebook.m 文件，也没有实现此功能。

我正在使用最新的 facebook SDK 3.1 我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T08:56:08.637

这是我在对话框中打开登录所做的工作。但它有双重缺点，因为如果用户在设置中有帐户，那么登录不会要求他访问他的帐户。此方法将始终使用 WebView（登录对话框）登录。

```
FBSession *session = [[FBSession alloc] initWithAppID:@"283938491920393" // here use your app id
                                          permissions:@[@"read_stream"] // you can change this parameter
                                      defaultAudience:FBSessionDefaultAudienceFriends 
                                      urlSchemeSuffix:@"fb"
                                   tokenCacheStrategy:nil];
        // Set the active session
[FBSession setActiveSession:session];

    // Open the session
[session openWithBehavior:FBSessionLoginBehaviorForcingWebView
                completionHandler:^(FBSession *session,
                                    FBSessionState status,
                                    NSError *error) {
                    // Respond to session state changes,
                    // ex: updating the view
                    if(!error && session.isOpen)
                    {
                        // user has logged in
                    }
                    else
                    {
                        if(error)
                        {
                           // error
                        }
                        else
                        {
                            // handle the session state change
                            [self session:session
                          hasChangedState:status
                                withError:error];
                        }
                    }
                }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:05:09.223

你看过这个方法吗？

```
- (void)openWithBehavior:(FBSessionLoginBehavior)behavior
   completionHandler:(FBSessionStateHandler)handler; 
```

这些是可用的行为：

```
typedef enum {
/*! Attempt Facebook Login, ask user for credentials if necessary */
FBSessionLoginBehaviorWithFallbackToWebView      = 0,
/*! Attempt Facebook Login, no direct request for credentials will be made */
FBSessionLoginBehaviorWithNoFallbackToWebView    = 1,
/*! Only attempt WebView Login; ask user for credentials */
FBSessionLoginBehaviorForcingWebView             = 2,
/*! Attempt Facebook Login, prefering system account and falling back to fast app switch         if necessary */
FBSessionLoginBehaviorUseSystemAccountIfPresent  = 3,
} FBSessionLoginBehavior; 
```

您也可以只在 API 之外管理整个 Web / 身份验证，然后在通过身份验证后设置活动会话令牌。

# jsf-2 - jsf2 commandButton，commandLink 不触发动作

> ID：14375562
> 
> 赞同：0
> 
> 时间：2013-01-17T09:13:05.647
> 
> 标签：jsf-2, commandbutton

在此页面中，要么`h:commandButton`不会触发托管 bean 中的操作方法，但是当我单击按钮时，它会重新加载当前页面。我不知道为什么请帮忙。

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >
  <h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Bootstrap 101 Template</title>
    <!-- Bootstrap -->
    <h:outputStylesheet library ="css" name="bootstrap.css"/>
    <h:outputStylesheet library ="css" name="bootstrap-responsive.css"/>
    <h:outputScript library="js" name="bootstrap.js"/>
    <h:outputScript library="js" name="bootstrap-responsive.js"/>
  </h:head>
  <h:body>
      <h:form>           
                              <label><h3>Search</h3></label>

                              <h:selectOneMenu id="searchtype" value="#{searchView.searchType}" style="width: 230px">
                                  <f:selectItems value="#{searchView.searchType}"/>

                              </h:selectOneMenu>
                              <br/>
                              <h:inputText id="searchvalue" value="#{searchView.searchvalue}" required="true" style="height: 30px; width: 230px">
                                  <p:watermark value="Search type" for="searchvalue"/>
                              </h:inputText>
                              <br/>

                              <h:commandButton id="searchbtn" value="Search" action="#{searchView.prepareSearchResultView()}" styleClass="btn"/>

      </h:form>
  </h:body>
</html> 
```

我的 searchView 托管 bean 是会话范围的，这里是托管 bean 中的 prepareSearchResultView() 方法；

```
 public String prepareSearchResultView(){

    this.searchResultList = searchCustomer();
    if(!this.searchResultList.isEmpty()){
        this.citizenSearchResultList = getCitizenSearchList();
        this.orgSearchResultList = getOrganizationSearchList();
        if(getCitizenSearchList().getRowCount() >0){
            return "citizensearchlist";
        }else if(getOrganizationSearchList().getRowCount()>0){
            return "orgsearchlist";
        }

    }else
        return "nosearchresult";
    //FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "no such result", "no such result"));
    return null;
} 
```

和 getSearchType() 方法

```
 public Map<String, Object> getSearchType(){
    Map<String, Object> returnMap = new LinkedHashMap<String, Object>();
    if(loginview.isAbleToGetCitizenInfo() || loginview.isUserAdmin()){
        returnMap.put("searchtype1", "searchcitizenbyregno");
        returnMap.put("searchtype2", "searchcitizenbyname");
    }
    if(loginview.isAbleToGetOrgInfo() || loginview.isUserAdmin()){
        returnMap.put("searchtype3", "searchorgbyregno");
        returnMap.put("searchtype4", "searchgorgbyname");
        returnMap.put("searchtype5", "searchorgbystateregno");
    }
    return returnMap;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:23:12.243

您`<h:selectOneMenu>`以错误的方式使用。您在 selectMenu 中的值是一个地图，如果不使用转换器，您无法从选择菜单中设置一种地图类型的值。在选择项中，您应该将 value 属性绑定到托管 bean 中的某个字符串。然后在您的 actionMethod 中，您可以使用此选定类型从地图中检索选定的值。

```
<h:selectOneMenu id="searchtype" value="#{searchView.selectedType}" style="width: 230px">
    <f:selectItems value="{searchView.searchType}"/>
</h:selectOneMenu> 
```

请查看以下帖子以更好地理解该概念：[Primefaces selectOneMenu listener not called with Objects other than Strings](https://stackoverflow.com/questions/10601710/primefaces-selectonemenu-listener-not-called-with-objects-other-than-strings)

此外，通过执行业务逻辑的 getter 检索`f:selectItems`值也不是一个好习惯。您应该在托管 bean 中创建一个属性，该属性在构造函数中初始化该映射。与其使用地图，不如使用列表并将您的键和值封装在自定义对象中。

```
<h:selectOneMenu id="searchtype" value="#{searchView.selectedType}" style="width: 230px">
    <f:selectItems value="{searchView.searchType}" 
                   var="searchType" 
                   itemLabel=#{searchType.key} 
                   itemValue=#{searchType.value}/>
</h:selectOneMenu>

List<RowItems> searchType = Lists.newArrayList(); // guave constructor

@PostConstruct
public void initBean(){
    if(loginview.isAbleToGetCitizenInfo() || loginview.isUserAdmin()){
        searchType.add(new RowItems("searchType1", "searchcitizenbyregno"));
        searchType.add(new RowItems("searchtype2", "searchcitizenbyname"));
    }
    if(loginview.isAbleToGetOrgInfo() || loginview.isUserAdmin()){
        searchType.add(new RowItems("searchtype3", "searchorgbyregno"));
        searchType.add(new RowItems("searchtype4", "searchgorgbyname"));
        searchType.add(new RowItems("searchtype5", "searchorgbystateregno"));
    }
}

public List<RowItems> getSearchType(){
    return searchType
} 
```

最后，您的`prepareSearchList`函数的最后一条语句`return null`不是必需的，应该删除，因为根据您发布的内容，它是无法访问的代码。

# jquery - jQuery 效果不起作用

> ID：14375565
> 
> 赞同：0
> 
> 时间：2013-01-17T09:13:14.967
> 
> 标签：jquery, jquery-selectors

我想为列表中的图像添加淡入和淡出效果。每次我的鼠标在当前**标签 div****图像**下方的标签 div 上时， 2 个按钮应该淡入，当我离开时它们应该淡出。我写了第一个**标签 div**的 JQuery 效果。如何使它适用于所有图像？我使用 php 5.5 和 heidsql。

 ****```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php
session_start(); 
if(!isset($_SESSION['name']))
{
    die("To access this page, you need to <a href='index.php'>LOGIN</a>"); 
} 
 else  
    {  
    include('../conect.php');

                    error_reporting (E_ALL ^ E_NOTICE);
                    $allowedExts = array("jpg", "jpeg", "gif", "png");
                    $parts = explode('.', $_FILES["file"]["name"]);
                    $extension = end($parts);   
                    if ((($_FILES["file"]["type"] == "image/gif")|| ($_FILES["file"]["type"] == "image/jpeg")|| ($_FILES["file"]["type"] == "image/png")|| ($_FILES["file"]["type"] == "image/pjpeg"))&& ($_FILES["file"]["size"] < 1000000)&& in_array($extension, $allowedExts)){

                                if ($_FILES["file"]["error"] > 0){
                                    $mesaj= "Return Code: " . $_FILES["file"]["error"] . "<br />";
                                }

                                $nume= $_FILES["file"]["name"];

                                if (file_exists("../admin/upload/" . $_FILES["file"]["name"])){
                                    $mesaj= $_FILES["file"]["name"] . " already exists. ";

                                }

                                else{ 
                                      move_uploaded_file($_FILES["file"]["tmp_name"],
                                      "../admin/upload/" . $_FILES["file"]["name"]);
                                      $mesaj= "Stored in: " . "admin/upload/" . $_FILES["file"]["name"];

                                      mysql_query("INSERT INTO imagini (nume) VALUES ('$nume')"); 

                                    } 

                        } 

    }

 ?>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Lista imagini</title>
<meta name="viewport" content="width=device-width">
<link rel="shortcut icon" type="image/ico" href="images/favicon.gif" /> 
<link rel="stylesheet" href="/css/lightbox.css" type="text/css" media="screen" />
<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Economica&subset=latin,latin-ext'type='text/css'>
<link rel="stylesheet" href="/css/megamenu.css"type="text/css" />
<link rel="stylesheet" href="/css/admin_tools.css" type="text/css" />

<script type="text/javascript" src="/javascript/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/javascript/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="/javascript/jquery.smooth-scroll.min.js"></script>
<script type="text/javascript" src="/javascript/lightbox.js"></script>
<script type="text/javascript" src="/javascript/megamenu.js"> </script>
<script type="text/javascript" >

//initializare megamenu
    ddmegamenu.docinit({
        menuid:'solidmenu',
        dur:200 
    })
//initializare lightbox
jQuery(document).ready(function($) {
      $('a').smoothScroll({
        speed: 1000,
        easing: 'easeInOutCubic'
      });

      $('.showOlderChanges').on('click', function(e){
        $('.changelog .old').slideDown('slow');
        $(this).fadeOut();
        e.preventDefault();
      })

      $("#tag1").mouseenter(function(){  //add the fadein effect for the buttons of the first picture
            $("#Btag1").fadeIn();

        });
     $("#tag1").mouseleave(function(){  //add the fadeOut effect for the buttons of the first picture
            $("#Btag1").fadeOut();  
        });

  });

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2196019-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 

</script>
 </head>
 <body id="lista_imagini">
 <?php include('menu_admin_panel.php') ?>
<div id="lista_imagini_content">

        <div id="imagine">
            <form action="<?php $_PHP_SELF ?>" method="post" enctype="multipart/form-data">
            <label for="file">Poza</label><input type="file" name="file" /> 
            <input type="submit" value="Adauga imagine" class="buton_imagine" onchange="call" />
            </form>
        </div>      

        <div id="mesaj_eroare">
                <span>Lista Imagini</span>
        </div>

        <div class="imageRow">
            <div class="set">

                 <?php 
                    $result=mysql_query("SELECT * FROM imagini");
                    $result2=mysql_num_rows($result);
                    $i=1;
                    while($data=mysql_fetch_row($result)){ ?>
                                    <div id=<?php echo'"tag'.$i.'" '; ?> style="z-index:500;background-color:green;">
                                            <div class="single">

                                                    <a href="../admin/upload/<?php echo $data[1];?>"  rel="lightbox[plants]">  <img src= "../admin/upload/<?php echo $data[1];?>"   /></a>

                                                        <div id=<?php echo'"Btag'.$i.'" ';$i++; ?> style="display:none;">
                                                            <div id="buton_slide" >
                                                                <a href="delete.php?id_imagini=<?php echo $data[0];?>&nume_imagini=<?php echo $data[1]?>" class="buton">Sterge</a></td>
                                                            </div>

                                                            <div id="buton_slide2" >
                                                                <a href="imagine_noua.php?id_imagini=<?php echo $data[0];?>" class="buton">Editare</a></td>
                                                            </div>                              

                                                        </div>
                                            </div>      

                                    </div>

            <?php   } ?>          

            </div>
        </div>
</div>

 <?php mysql_close($con);?>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:40:19.217

尝试使用类而不是 ID。下面的示例代码。

```
$(".tagDiv").mouseenter(function(){  //add the fadein effect for the buttons of the first picture
            $(this).find(".BtagBtns").fadeIn();

        });

<div class="imageRow">
    <div class="set">

         <?php 
            $result=mysql_query("SELECT * FROM imagini");
            $result2=mysql_num_rows($result);
            $i=1;
            while($data=mysql_fetch_row($result)){ ?>
                            <div class="tagDiv" id=<?php echo'"tag'.$i.'" '; ?> style="z-index:500;background-color:green;">
                                    <div class="single">

                                            <a href="../admin/upload/<?php echo $data[1];?>"  rel="lightbox[plants]">  <img src= "../admin/upload/<?php echo $data[1];?>"   /></a>

                                                <div class="BtagBtns" id=<?php echo'"Btag'.$i.'" ';$i++; ?> style="display:none;">
                                                    <div id="buton_slide" >
                                                        <a href="delete.php?id_imagini=<?php echo $data[0];?>&nume_imagini=<?php echo $data[1]?>" class="buton">Sterge</a></td>
                                                    </div>

                                                    <div id="buton_slide2" >
                                                        <a href="imagine_noua.php?id_imagini=<?php echo $data[0];?>" class="buton">Editare</a></td>
                                                    </div>                              

                                                </div>
                                    </div>      

                            </div>

    <?php   } ?>          

    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:32:21.707

我没有检查你的整个代码，只是复制了 js 并做了一个非常简单的例子，它运行良好。你可以在这里看到它：http: [//jsfiddle.net/RqKkz/](http://jsfiddle.net/RqKkz/)

```
$(document).ready(function(){

  $("#hoverme").mouseenter(function(){  //add the fadein effect for the buttons of the first picture
    $(".button").fadeIn();
  });
  $("#hoverme").mouseleave(function(){  //add the fadeOut effect for the buttons of the first picture
    $(".button").fadeOut();  
  });
}); 
```

工作得很好。如果你想做类似的事情，你可以给图像一个类而不是一个 ID，让它适用于所有人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-17T11:01:32.087

我遇到了同样的问题，但是当我改变时得到了解决

```
$(function() {}) 
```

到

```
jQuery(document).ready(function($) {}) 
```****

# javascript - 获取使用评估代码的源映射

> ID：14375567
> 
> 赞同：5
> 
> 时间：2013-01-17T09:13:18.147
> 
> 标签：javascript, source-maps

我有一个构建脚本，它通过 uglifyjs 运行我的所有代码，做一堆花哨的缓存东西，并最终`eval( code )`在一些 JavaScript 文件上运行。

我正在尝试使用[source maps](https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?hl=en_US)启动并运行整个过程，但只要我使用`eval`. 如果我直接使用它链接到文件，`<script src="...">`它工作正常。

在我的`eval`代码中，我有：

```
code, blah blah blah
//@ sourceMappingURL=/cache/618a67795c7460184bd9b99020cbb9fd.map 
```

然后在那个`.map`文件中，我有：

```
{
      "version"  : 3
    , "file"     : "618a67795c7460184bd9b99020cbb9fd.map"
    , "sources"  : ["/js/Parallax-JS/js/parallax-2.js"]
    , "names"    : [
          "a"
        , "bunch"
        , "of"
        , "variable"
        , "names"
    ]
    , "mappings" : "... LONG MAP ..."
} 
```

我试过把它放在`//@ sourceURL=`最后，这至少给了我正确的文件名，但仍然没有可读的来源。

有任何想法吗？在 Chrome 25 (dev) 和 26 (canary) 中进行测试

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-12T12:35:51.727

我遇到了类似的问题，解决方案似乎是使用内联的 SourceMaps（SourceMap 的 DataURL）。

这是一个例子：

`eval("blah blah\n//@ sourceMappingURL=data:application/json;base64,...");`

似乎您无法从评估中引用外部资源。

我认为您还需要使用`sourcesContent`将源代码插入SourceMap。

使用 Chrome 32 测试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-24T22:08:21.433

这是使用 Grunt 将 javascript 编译为单个文件的设置，使用 uglify 和源映射

包.json

```
"src": {
    "js": "src/js"
},
"dest": {
    "js": "bin/js"
} 
```

Gruntfile.js

```
grunt.initConfig({
    /**
     * Loading in the package file to read source and destination directories
     */
    pkg: grunt.file.readJSON('package.json'),
    uglify: {
    options: {
        banner: '/* all.min.js <%= grunt.template.today("dd-mm-yyyy") %> */\n',
        sourceMap: '<%= pkg.dest.js %>/all.min.js.map',
        sourceMappingURL: 'all.min.js.map',
        sourceMapRoot: '../../',
        mangle: false
        /*mangle: {
            except: ['jQuery']
        }*/
    },
    js: {
        src: [
            '<%= pkg.src.js %>/**/*.js'
        ],
        dest: '<%= pkg.dest.js %>/all.min.js'
    }
    }
};

grunt.loadNpmTasks('grunt-contrib-uglify');
grunt.registerTask('min', ['uglify']); 
```

这将创建以下文件：

all.min.js

```
/* all.min.js 04-10-2013 */
angular.module("App",[])
//# sourceMappingURL=all.min.js.map 
```

all.min.js.map

```
{"version":3,"file":"bin/js/all.min.js","sources":["src/js/App.js"],"names":["angular","module"],"mappings":"AAeAA,QAAQC","sourceRoot":"../../"} 
```

# linq - 无法弄清楚如何在 Lightswitch 中计算计算域

> ID：14375568
> 
> 赞同：0
> 
> 时间：2013-01-17T09:13:18.633
> 
> 标签：linq, entity-framework, visual-studio-lightswitch, computed-field

我有以下问题 - 我想根据一个简单的查询和除法计算我的数据库中的一个字段。首先是关于我的数据库结构的一些信息：

`|WorkingUnits|-1---------n-|Materials|` ei WU 和材料之间的一对多关系。

这是两个表以及它们之间的关系。在 WorkingUnits 表中，我有一个名为 WUAmount 的计算字段。此外，每个工作单元都有一个“价格”。材料也是如此——它们每个都有一个“价格”。最后，我想要实现的是总结分配给特定工作单元的所有材料的所有价格，然后除以工作单元本身的价格。

到目前为止，我正在尝试做的事情如下：

```
 partial void WUAmount_Compute(ref decimal result)
    {
        //decimal amount = 0;
        IDataServiceQueryable<WorkingUnit> query;
        query = from WorkingUnit in this.DataWorkspace.ApplicationData.WorkingUnits
                where WorkingUnit.Materials != null
                select WorkingUnit;

        foreach (WorkingUnit detail in query)
        {
            result = this.WUPrice / (result + detail.Materials.Sum(s => s.Price).Value);
        }
} 
```

但我得到一个内部异常：

```
Cannot compare elements of type 'System.Data.Objects.DataClasses.EntityCollection`1'.
Only primitive types, enumeration types and entity types are supported. 
```

我对 Lightswitch 和 LINQ 还很陌生，还无法弄清楚这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:23:11.357

如果我对您的理解正确，您只需要：

```
partial void WUAmount_Compute(ref decimal result)
{
   result = (this.Materials.Sum(x => x.Price) / this.WUPrice);
} 
```

# java - sqlparametersource刷新数据

> ID：14375572
> 
> 赞同：0
> 
> 时间：2013-01-17T09:13:36.197
> 
> 标签：java, spring, spring-integration

我正在使用 spring-integration-jdbc 数据库监听器

它将永远查询数据库，配置如下

```
<int-jdbc:inbound-channel-adapter id="listener"
    channel="target" 
    data-source="dataSource"
    query="select * from view1 where type='ABCD' and date=:newDate"
    selec-sql-paramater-source="parameterList"
    auto-startup="true">

        <integration:poller>
            <integration:interval-trigger interval="100000"/>
        </integration:poller>

    </int-jdbc:inbound-channel-adapter>

<integration:splitter input-channel="chone" output-channel="chtwo"/>
<integration:service-activator input-channel="chone" ref="myclass" method="mymethod"/>

<integration:channel id="chone"/>
<integration:channel id="chtwo"/>

<bean id="parameterList" class="com.my.package.mySqlParamenterSource">
<property name="newDate"  value="${date}"/>
</bean> 
```

我希望查询中的 newDate 参数每天自动刷新..无需重新启动应用程序..如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:04:21.930

鉴于您已经有一个自定义参数源，只要调用 getValue("newDate") 就让它返回适当的日期。

或者，您可以通过使用运行时 SpEL 表达式变得更复杂。

# magento - 在 Magento 1.12 中更改单个类别的排序方向

> ID：14375579
> 
> 赞同：0
> 
> 时间：2013-01-17T09:13:55.190
> 
> 标签：magento, sorting

我有一个包含很多类别的 Magento 1.12 安装。通过更改 Toolbar.php 中的以下行，所有类别都按降序排序：

```
public $_direction = 'desc'; 
```

问题是我的客户想要将单个类别的方向更改为升序。有谁知道如何做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:41:30.017

在模板中调用了`app/code/core/Mage/Catalog/Block/Product/List/Toolbar.php`一个函数。我们可以这样重写、扩展和改变这个函数：`getCurrentDirection()``toolbar.phtml``Toolbar.php`

```
/**
 * Retrieve current direction
 *
 * @return string
 */
public function getCurrentDirection()
{
    $dir = $this->_getData('_current_grid_direction');
    if ($dir) {
        return $dir;
    }

    $directions = array('asc', 'desc');
    $dir = strtolower($this->getRequest()->getParam($this->getDirectionVarName()));
    if ($dir && in_array($dir, $directions)) {
        if ($dir == $this->_direction) {
            Mage::getSingleton('catalog/session')->unsSortDirection();
        } else {
            $this->_memorizeParam('sort_direction', $dir);
        }
    } else {
        $dir = Mage::getSingleton('catalog/session')->getSortDirection();
    }
    // validate direction
    if (!$dir || !in_array($dir, $directions)) {
        // Addition: get current category for custom direction
        $_category = Mage::registry('current_category');
        if ($_category && $_category->getId() == 10) {
            $dir = 'asc';
        } else {
            $dir = $this->_direction;
        }
    }
    $this->setData('_current_grid_direction', $dir);
    return $dir;
} 
```

请注意添加了获取当前类别和测试类别 ID。（将“10”替换为您使用的任何类别 ID。）

# java - 如何使用 java sql INSERT 查询插入日期/时间 ms 访问字段

> ID：14375586
> 
> 赞同：-3
> 
> 时间：2013-01-17T09:14:02.777
> 
> 标签：java, sql, ms-access

我想在 MS Access 中添加一些日期和时间，但我的日期和时间变量是一个字符串。IE

```
String dt="12/2/2014 9:00 PM"; //this is selected from a calender component and a ComboBox 
```

而 MS Access 字段的类型是（日期/时间）。如何将我的字符串转换为日期/时间类型，以便将其插入到字段中？你能用几行代码说明一下吗？因为我不是java专家。像我想要的东西：

step1：将字符串转换为日期时间字段

step2：statement.executeUpdate（插入表（日期时间）值（？？？？？？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:27:42.917

**步骤：1 将字符串转换为日期时间字段：**

```
SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy hh:mm a");
String stringDate = "12/2/2014 9:00 PM";
java.util.Date date = df.parse(stringDate); 
```

这将为您提供字符串中的日期。有关 SimpleDateFormat 的更多详细信息，[请参阅 API 文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

**第2步：**

```
String query = "Insert into table MyTable(dateColumn) Values(?)";
PreparedStatement ps  = connection.prepareStatement(query);
ps.setTimestamp(1,new java.sql.Timestamp(date.getTime()));
ps.executeUpdate(); 
```

[以下是有关使用准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)的更多详细信息

# javascript - 按钮上的 onclick 用法

> ID：14375590
> 
> 赞同：0
> 
> 时间：2013-01-17T09:14:12.420
> 
> 标签：javascript, html, jsp

我有一个带有 3 个按钮的**HTML表单：**

```
<html:form modelAttribute="registration" id="registration-form" formUrl="/registrationForm">
<input type="hidden" name="id"/>
<html:field name="voucherID" labelCode="label.voucherID" type="text"/>
<html:field name="programID" labelCode="label.programID" type="text"/>
<html:field name="quantity" labelCode="label.quantity" type="text"/>
<html:field name="active" labelCode="label.active" type="checkBox"/>

<div class="form-actions">
    <button type="submit" class="btn btn-primary"><spring:message code="button.add"/></button>
    <button type="reset" class="btn"><spring:message code="button.cancel"/></button>
    <button type="button" class="btn" onclick="remove()"><spring:message code="button.delete"/></button>
</div>
</html:form> 
```

**Javascript**：

```
<head>
<%@ include file="header.jsp"%>
<title><spring:message code="title.registration"/></title>
<script type="text/javascript">
function remove(){
    alert('test');
    var form = document.forms[0];
    form.action = "deleteRegistration";
    form.submit();
}
</script>
</head> 
```

我想要做的是，每当用户按下删除按钮时，它应该将 action 的值更改为`deleteRegistration`. 但是我无法使这段代码工作，甚至根本不会触发警报功能。我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:26:13.020

有趣的小事，该`remove()`方法将在`this`对象上运行，将方法重命名为 _remove 或其他任何东西，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:23:09.430

尝试改变这个：

`<button type="button" class="btn" onclick="javascript: remove();"><spring:message code="button.delete"/></button>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:30:49.913

```
<html>
<head>
<title></title>
<script type="text/javascript">
function remove(){
    alert('test');
    var form = document.forms[0];
    form.action = "deleteRegistration";
    form.submit();
}
</script>
</head>
<body>
        <form id="registration-form" action="">
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">submit</button>
                <button type="button" class="btn">something</button>
                <button type="button" class="btn" onclick="remove()">remove</button>
            </div>
        </form>
</body>
</html> 
```

# html - 如何使用 telerik.pdf 命名空间将 HTML 导出为 PDF

> ID：14375594
> 
> 赞同：1
> 
> 时间：2013-01-17T09:14:32.117
> 
> 标签：html, pdf, telerik, pdf-generation, pdf-writer

我有一个要求，在*单击*按钮时，我想将多个列表上的内容写入 PDF 文档例如，我有列表，我想将 Employee 类中存在的所有详细信息写入我想要实现的*pdf*文档使用导出为 pdf 功能，`telerik.pdf`因为这是我的项目中唯一允许的第三方程序集。

# asp.net-mvc-4 - MVC4 中的 DotNetOpenAuth Twitter API 版本 1.1 调用

> ID：14375598
> 
> 赞同：4
> 
> 时间：2013-01-17T09:14:55.507
> 
> 标签：asp.net-mvc-4, twitter-oauth, dotnetopenauth

我正在编写一个必须查询 Twitter 版本 1.1 API 的 MVC4 Web 应用程序。内置在 MVC4 中，当我在 AuthConfig.cs 中激活 OAuthWebSecurity.RegisterTwitterClient 时，我可以使用“使用 Twitter**登录**”**功能**。然后验证 Twitter 登录，但我想做的是授权用户，以便我可以代表用户进行 API v1.1 调用。

 **我在 Stack Overflow 上找到[了这篇文章](https://stackoverflow.com/questions/13034084/mvc4s-dotnetopenauth-twitterclient-sample-does-not-respect-prior-login)，它使用自定义类来解决不同的问题（force_login 参数问题），但我已经使用了这些类并将**UserAuthorizationEndpoint**更改为指向**oauth/authorize**。我更改了这行代码：

```
UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/authenticate", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest), 
```

对此：

```
UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/authorize", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest), 
```

它适用于授权，这意味着现在我的应用程序授权了 Twitter 用户。但是，当我调用 API v1.1 时，我收到“(401) Unauthorized”错误。这是我用于调用的代码：

```
var var1 = WebWorker.PrepareAuthorizedRequest(new MessageReceivingEndpoint("https://api.twitter.com/1.1/followers/ids.json?cursor=-1&screen_name=sitestreams", HttpDeliveryMethods.GetRequest), accessToken);
var var2 = var1.GetResponse(); 
```

我想我还需要**oauth_token_secret**来授权调用。DotNetOpenAuth 可以给我**oauth_token_secret**吗？然后我可以使用 **WebWorker.PrepareAuthorizedRequest**来发送**oauth_token_secret**吗？

我还在 Stack Overflow 上找到[了这篇文章](https://stackoverflow.com/questions/12198734/getting-twitter-access-secret-using-dotnetopenauth-in-mvc4)，上面说我不能为此使用 DotNetOpenAuth。但是，从那以后 DotNetOpenAuth 代码已经更新，我想知道它现在是否适合我想做的事情，这本质上是一件非常简单的事情：允许用户使用 Twitter 登录我的 Web 应用程序，然后允许我的网络应用程序来查看用户的关注者。

所以归结为：我可以在 MVC4 中使用**DotNetOpenAuth**来授权用户，然后代表用户调用 Twitter API v1.1，例如*GET Followers/ids*。如果可能，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:56:44.167

是的，DotNetOpenAuth 绝对可以用于此。您可以下载[DotNetOpenAuth 示例](http://sf.net/projects/dnoa)，其中包括一个 OAuthConsumer 项目和一个 Twitter.aspx 页面，该页面显示了如何执行此操作。是的，它是 Web 表单而不是 MVC，但翻译起来并不难。

您遇到问题的原因是您试图在`DotNetOpenAuth.AspNet`命名空间中使用 Microsoft 提供的类，这些类严格设计用于身份验证而不是授权。使用示例中的`WebConsumer`/`TwitterConsumer`类将允许您执行所需的操作。**

# fonts - Internet Explorer 选项卡标题太小

> ID：14375601
> 
> 赞同：0
> 
> 时间：2013-01-17T09:14:58.800
> 
> 标签：fonts, size

我错误地调整了 Windows 7 上的系统字体大小。通过一些操作，我恢复了字体大小，除了 Internet Explorer Tab 标题的字体大小，如图所示。我怎样才能使字体大小更大？

![Internet Explorer 选项卡字体太小](../Images/1646264bd652315bc44a03287fdd6b49.png)

# javascript - 如何从 mongodb 读取值？

> ID：14375603
> 
> 赞同：-5
> 
> 时间：2013-01-17T09:15:12.083
> 
> 标签：javascript

我使用流星作为我的项目的前端，我使用 node.js 和 mongodb 作为后端。我不知道在流星中读取值。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:19:25.380

试试这个代码：

```
Pages = new Meteor.Collection("pages");
Meteor.startup(function () {
        if(Pages.find().count() === 0){
            var pages = JSON.parse(MY_JSON_LIST);
            for (page in pages) {
                    Pages.insert(pages[page]);
            }
        }
}); 
```

# continuous-integration - 为什么为正在进行的项目设置 CI 系统需要几天、几周和几个月的时间

> ID：14375604
> 
> 赞同：0
> 
> 时间：2013-01-17T09:15:12.233
> 
> 标签：continuous-integration

我是 CI 系统的新手。我不是在问任何技术或编程问题。我在一本书中读到

1) 对于一个已经在进行中的项目，建立一个 CI 系统需要几天、几周和几个月的时间。

2）对于一个新项目，建立一个CI系统只需要几个小时。

我发现这两个陈述非常有趣，但缺乏适当的解释，也没有理由。有谁知道一个正确的答案，为什么在一个正在进行的项目而不是一个新项目上建立一个 CI 系统需要很多时间。

正确的答案将不胜感激。

问候，

克里希纳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:25:23.720

想一想，答案就很明显了。

如果您没有架构和零代码行，那么 CI 将作为一项学术练习开始。

如果您有 80k 行代码跨多个服务器和数据库运行，则需要大量工作来识别控制点和必要的检查，构建持续测试所需的工具和流程，然后以一种方式实现它们不会对现场系统造成任何风险。

严格地说只涉及几个小时并不正确，因为 CI 计划和实施将分布在项目的整个生命周期中，但是，从一开始就构建 CI 肯定比追溯实施要容易得多它。

# c# - 如何从形状中学习形状的 ID

> ID：14375606
> 
> 赞同：0
> 
> 时间：2013-01-17T09:15:15.087
> 
> 标签：c#, powerpoint

我有一个 C# 编写的 COM 组件，它插入到 PowerPoint 幻灯片上的形状中。问题：如何从 COM 组件中获取 shape 的 ID？

PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:10:09.080

假设您手动放置控件并且现在只需要 ID 用于其他目的，请确保选择了形状，按 ALT+F11 打开 VBA IDE，按 Ctrl+G 打开即时窗口并在其中键入：

```
? ActiveWindow.Selection.ShapeRange(1).Id 
```

形状的 id 将打印在下一行

# java - 将 HandlerInterceptor 绑定到 HttpInvokerServiceExporter

> ID：14375611
> 
> 赞同：1
> 
> 时间：2013-01-17T09:15:40.580
> 
> 标签：java, spring, spring-mvc

在春天，有没有办法`HandlerInterceptor`通过`HttpInvokerServiceExporter`配置绑定`XML`？

我在其他地方（[http://permalink.gmane.org/gmane.comp.java.springframework.user/4730](http://permalink.gmane.org/gmane.comp.java.springframework.user/4730)）看到过关于这个主题的讨论，这听起来不是问题。但是，由于我无法实现，有人可以提供样本吗？

假设这是我当前的 spring 配置 XML 示例：（我应该如何绑定这 2 个？）

```
<bean id="MyHandlerInterceptor"
    class="sample.MyHandlerInterceptor">
</bean>

<bean name="/MyExposedPOJO"
    class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter">
    <property name="service" ref="MyExposedPOJO" />
    <property name="serviceInterface"
        value="sample.MyExposedInterface" />
</bean> 
```

谢谢。

# sql - SQL Server 一个或多个表中的大量数据

> ID：14375618
> 
> 赞同：1
> 
> 时间：2013-01-17T09:15:54.717
> 
> 标签：sql, sql-server

我想知道什么会更有效，将大量数据存储在一个或多个表中。假设我们想存储不同地形模型的所有顶点。

**第一个解决方案**- 以传统方式，我们可以创建两个表：Table Terrain (id, name, description) 和 Table Vertex (terrainId, x, y, z)。

然后将所有地形的顶点存储在一个表中（顶点表）——这个表可能非常大（数亿个顶点）。

**第二种解决方案**- 每组顶点创建一个表。Table Vertex-For-Terrein1(x, y, z), Table Vertex-For-Terrein2(x, y, z), ..., Table Vertex-For-Terreinn(x, y, z)。

在第二种方式中，顶点表不存储有关地形的信息（此信息在表名中处理，例如 Table Vertex-For- **Terrein1**）。

什么会更有效率或性能更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:30:03.307

我会使用第一个解决方案，您可能希望通过地形 id 的功能将您的表格划分为每个可管理的单独地形，但具有标准化设计的灵活性......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:24:14.710

第一个解决方案。索引`Vertex`表`terrainId`。

第二种解决方案是非规范化，这将使数据难以维护。如果您的要求足够有限，以至于第二种解决方案更适合您，那么您可能不需要 RDBMS 系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:58:55.720

这取决于您将如何查询这些数据。可能每个顶点只能作为 varchar(max) 存储在 Vertext 表中的一行中。

# json - 将复杂的 JSON 字符串映射到 POJO 类

> ID：14375620
> 
> 赞同：2
> 
> 时间：2013-01-17T09:16:07.957
> 
> 标签：json, rest, jax-rs

我想自动将以下 JSON 结构映射到 POJO**类**：

```
{
    "fieldClass": 
    {
        "a": 1,
        "b": "b",
        "c": "c",
        "d": "d",
        "e": "e"
    }
} 
```

我添加了将 JSON 映射到 POJO 类到 web.xml 的参数。我还尝试定义两个类，一个用于包装类，一个用于内部类。但是当我尝试使用某种方法时会引发以下异常：

> 严重：servlet [Jersey REST Service] 在路径 [/projectName] 的上下文中的 Servlet.service() 引发异常 [org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "fieldClass" (Class className)，未标记为[来源：org.apache.catalina.connector.CoyoteInputStream@4d5d6704；行：1，列：10]（通过引用链：className["fieldClass"])] 有根本原因

我可以**自动**将其映射到 Java 类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:26:29.357

看看这个部分：[JSON.org Java 部分](http://www.json.org/java/)

还有杰克逊[快速入门指南](http://wiki.fasterxml.com/JacksonInFiveMinutes)

# javascript - 保持先前 jquery 全局变量的值不变，即使在 onload 之后

> ID：14375621
> 
> 赞同：0
> 
> 时间：2013-01-17T09:16:12.013
> 
> 标签：javascript, jquery

> **可能重复：**
> [导航到另一个页面（也使用相同的 js 文件）时，Javascript 全局变量不会持续存在](https://stackoverflow.com/questions/14139351/javascript-global-variable-does-not-persist-when-navigate-to-another-page-which)

我有一个脚本

```
<script>

var pn=0;

function set()
{
pn=parseInt(pn)+1;
}
</script> 
```

在第一次执行后`set`，`pn`将是 1。

页面重新加载后，`pn`保留其值`1`so ，下次执行`set`时将递增到`2`。

如何在页面重新加载时保留全局变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:21:27.907

您可以通过[jquery cookie](https://github.com/carhartl/jquery-cookie)将 pn 的值保存到 cookie中。设置cookie：

```
$.cookie("pn", pn); 
```

从 cookie 中获取价值：

```
$.cookie("pn"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:20:35.560

简而言之，你不能。无法在页面重新加载时保留客户端变量。

我建议使用

[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)(cookies)

或者如果您的浏览器支持 HTML5：

[HTML5 网络存储](http://caniuse.com/#search=namevalue-storage)（本地/会话存储）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:21:56.167

您应该使用 cookie，这是一个如何实现它的示例：

```
var pn = 0;

function increment() {
  pn = parseInt(pn, 10) + 1;
  setCookie('pn', pn, 200);
  console.log(pn);
}

function setCookie(c_name,value,exdays) {
  var exdate=new Date();
  exdate.setDate(exdate.getDate() + exdays);
  var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
  document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name) {
  var i,x,y,ARRcookies=document.cookie.split(";");
  for (i=0;i<ARRcookies.length;i++) {
    x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
    y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
    x=x.replace(/^\s+|\s+$/g,"");
    if (x==c_name) {
      return unescape(y);
    }
  }
}

(function () {
  pn = getCookie('pn') || 0;
}()); 
```

这是一个例子：http: [//jsbin.com/ucitul/3](http://jsbin.com/ucitul/3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:20:57.833

您应该将值存储在 cookie、查询字符串或哈希片段中，然后在页面加载时获取值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T09:21:02.857

我建议使用[jquery cookie 插件](https://github.com/carhartl/jquery-cookie)。这很简单，将解决您的问题

# regex - 正则表达式：只有数字、字母或空格，但不仅仅是数字

> ID：14375624
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:16:15.540
> 
> 标签：regex

我有这个文字

```
ford fiesta 2010,60500,2.54
ford fiesta review,5400,1.81
ford,5400,1.81 
```

我想得到

```
ford fiesta 2010
ford fiesta review
ford 
```

我使用这个正则表达式

```
(?:[a-zA-Z0-9]+[ ])+[a-zA-Z0-9]+ 
```

但它不能匹配`ford`，因为它没有任何空格。有什么建议么？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:20:24.677

如果你使用的是 PHP，你可以这样做：

```
$input = 'ford fiesta 2010,60500,2.54';
list($output) = explode(',', $input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:22:13.837

在你的情况下不需要`regex`，试试`String.Split`（C#）

```
var result = inputString.Split(new[]{','})[0]; 
```

或使用此正则表达式：

```
^([^,]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:37:47.030

将此正则表达式与`multiline`选项一起使用

```
^\w+(?=,) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:49:41.780

匹配可选以下单词的正确方法，用空格分隔是

```
^[a-zA-Z0-9]+(?:[ ]+[a-zA-Z0-9]+)* 
```

[在 Regexr 上](http://regexr.com?33eer)查看。

`^`匹配字符串的开头

`[a-zA-Z0-9]+`然后匹配第一个单词

`(?:[ ]+[a-zA-Z0-9]+)*`匹配由一个或多个前导逗号分隔的可选单词。

# objective-c - 空格或制表符，则不应将其视为字符

> ID：14375625
> 
> 赞同：1
> 
> 时间：2013-01-17T09:16:15.867
> 
> 标签：objective-c

我的应用程序中有文本视图。我需要验证文本视图的输入。规则如下

*   文本输入的开头不能接受制表符/空格
*   文本输入的中间和结尾可以接受 Tab/Space
*   接受的最大字符数可以是 256

我如何开发这个，第一个字符过滤逻辑？

* * *

我已经在我的应用程序中编写了以下代码，但它仍然没有给我正确的输出......谁能告诉我错误在哪里？？？

-(void)textViewDidBeginEditing:(UITextView *)textView { NSString *rawString = [textView text];

```
 NSCharacterSet *whitespace = [NSCharacterSet whitespaceAndNewlineCharacterSet];

        NSString *trimmed = [rawString stringByTrimmingCharactersInSet:whitespace];

        if ([trimmed length] == 0) 
            {

                 // Text was empty or only whitespace.

            }

        NSLog(@"length = %d",[trimmed length]);
        [self.scrollView adjustOffsetToIdealIfNeeded]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:34:14.010

尝试这个

```
NSString *string = [txtview text];;
NSString *trimmedString = [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
NSLog(@"%d",trimmedString.length); 
```

# php - 以数组中的创建日期获取目录中的所有文件

> ID：14375629
> 
> 赞同：1
> 
> 时间：2013-01-17T09:16:34.463
> 
> 标签：php, file, date, directory

> **可能重复：**
> [文件创建时间](https://stackoverflow.com/questions/2084986/file-creation-time)

我想获取目录中的所有文件及其在数组中的创建日期。

我看到了这个`scandir`函数，但它甚至返回了我不想要的目录。我还发现该`filemtime($filename)`函数可以返回文件创建日期。只是不能把它放在一起。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T12:34:16.527

在 PHP > 5 的这些日子里，您应该使用[提供的类](http://www.php.net/spl)来处理这类事情。对于这个特定任务，您应该使用[FilesystemIterator](http://www.php.net/filesystemiterator)例如：-

```
$iterator = new FilesystemIterator('D:/dev/');
foreach($iterator as $fileInfo){
    if($fileInfo->isFile()){
        $cTime = new DateTime();
        $cTime->setTimestamp($fileInfo->getCTime());
        echo $fileInfo->getFileName() . " file Created " . $cTime->format('Y-m-d h:i:s') .  "<br/>\n";
    }
    if($fileInfo->isDir()){
        $cTime = new DateTime();
        $cTime->setTimestamp($fileInfo->getMTime());
        echo $fileInfo->getFileName() . " dir Modified " . $cTime->format('Y-m-d h:i:s') . "<br/>\n";
    }
} 
```

这`$fileInfo`是一个[SplFileInfo](http://www.php.net/splfileinfo)的实例，它可以为您提供有关您可能想要的文件或目录的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:24:56.760

```
if ($handle = opendir('/path/to/files')) {

    while (false !== ($file = readdir($handle))) { 
        echo filemtime($file)."&nbsp;&nbsp;".$file;
     }

    closedir($handle); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:21:11.680

使用[scandir](http://php.net/manual/en/function.scandir.php)获取主目录的所有文件和子目录

然后使用php 的[is_file](http://php.net/manual/en/function.is-file.php)函数。

如果你想访问特定的扩展文件，请使用php 的[glob函数](http://php.net/manual/en/function.glob.php)

这是示例：

[如何在 PHP 中使用 scandir 仅获取图像？](https://stackoverflow.com/questions/3226519/use-php-scandirdir-and-get-only-images)

我希望这有帮助。

# php - 为什么不能通过 foreach 或 get_object_vars 访问 PHP mysqli_stmt 属性？

> ID：14375637
> 
> 赞同：0
> 
> 时间：2013-01-17T09:17:08.423
> 
> 标签：php, mysqli

我有以下代码：

```
//preparing statement, executing and so on is omitted...
//$this->cur_query_stmt is object returned by prepare() function
var_dump($this->cur_query_stmt);
foreach($this->cur_query_stmt as $k=>$v){
  var_dump($k);
  var_dump($v);
  } 
```

此代码的输出：

```
object(mysqli_stmt)#6 (9) {
  ["affected_rows"]=>
  int(1)
  ["insert_id"]=>
  int(7)
  ["num_rows"]=>
  int(0)
  ["param_count"]=>
  int(1)
  ["field_count"]=>
  int(0)
  ["errno"]=>
  int(0)
  ["error"]=>
  string(0) ""
  ["sqlstate"]=>
  string(5) "00000"
  ["id"]=>
  int(2)
}
string(13) "affected_rows"
NULL
string(9) "insert_id"
NULL
string(8) "num_rows"
NULL
string(11) "param_count"
NULL
string(11) "field_count"
NULL
string(5) "errno"
NULL
string(5) "error"
NULL
string(8) "sqlstate"
NULL
string(2) "id"
NULL 
```

**谁能解释为什么所有值都返回为NULL？**

我可以通过调用 $this->cur_query_stmt->$this->affected_rows 来获取它们，但是当尝试在 foreach 或 get_object_vars 函数中获取它们时，我得到的是 NULL。我很困惑，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:50:47.287

mysqli_stmt 没有 _constructor() 来生成其属性值。要获得“affected_rows”，您必须改为调用 $this->cur_query_stmt->$this->affected_rows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-01T21:20:16.463

迟到的答案，但我认为这是你想要做的：

```
 array_result=array();
   foreach ($stmt as $key => $value) {
       $array_result[$key]=$stmt->$key;
    } 
```

# c++ - 通过“动态”创建的对象的引用传递

> ID：14375640
> 
> 赞同：2
> 
> 时间：2013-01-17T09:17:18.677
> 
> 标签：c++, reference

如果这个问题已经得到回答，我深表歉意——我已经搜索过了，但由于通过引用传递的更一般的问题数量众多，因此很难找到这个搜索词。

我遇到的问题是，当我编译这种东西时，我收到了 4 级警告：

```
class MyClass
{
public:
    MyClass() {};
};

void DoSomethingToMyClass(MyClass& my_class_reference);

void MyRoutine()
{
    DoSomethingToMyClass(MyClass());
}; 
```

警告 (C4239) 基本上是说从实例到引用的转换很狡猾。我从仔细检查中学会了不要注销 4 级警告，因为其中许多已经识别出我（和其他人）代码中的错误，例如将 -1 作为 size_t 返回（知道什么 size_t(-1) 的奖励积分）实际上是）。

谁能向我解释上面的代码实际上会做什么？我最偏执的理论是：

*   MyClass() 的实例是即时创建的，但没有给出正确的句柄。
*   然后对 my_class_reference 引用执行的操作会误触发。

另一个极端是C4239总是可以忽略的……

*[类似的情况是有人默认引用：

```
void DoSomethingToMyClass(MyClass& my_class_reference=MyClass()); 
```

这会产生相同的警告，但在另一个主题中有部分内容。]*

**编辑：**

谢谢你们的快速反应，伙计们。抱歉：应该在 Visual Studio 中提到它是 VC++。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:19:18.157

您会收到警告，因为这不是标准 C++，而是允许您将临时对象绑定到非`const`引用的 MS 扩展。

只是不要。要么有参数`const`引用：

```
void DoSomethingToMyClass(const MyClass& my_class_reference); 
```

这可能不适用于这里，因为顾名思义，该方法会改变类，或预先创建对象：

```
MyClass x;
DoSomethingToMyClass(x); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:18:56.257

您正在创建一个临时无名对象，`MyClass()`并且根据 C++ 标准临时对象不能绑定到非常量引用。因此发出警告。
一些编译器确实允许将其作为语言扩展。

所以要么：
您需要更改您的界面以获取 const 引用以绑定到临时。

```
void DoSomethingToMyClass(const MyClass& my_class_reference)
                          ^^^^^^^ 
```

或者不传递临时无名对象传递命名对象。

```
void DoSomethingToMyClass(MyClass& my_class_reference);

Myclass obj;
DoSomethingToMyClass(obj); 
```

# php - 我应该使用主键来标识要从表中删除的记录吗？

> ID：14375641
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:17:19.830
> 
> 标签：php, mysql

我有一个 Questions 表，该表的主键是“id”，具有自动增量。现在我正在创建一个用于管理问题的控制面板。控制面板中的一项功能是删除问题。现在我的问题：我想将 Questions 表的主键作为 HTML 标签的标识符发送给客户端，以便当用户单击 HTML 标签删除问题时，问题的主键发送到服务器以删除问题。在安全方面是否有危险？你有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:40:51.360

每个请求都必须经过验证，无论它以带有 id 的 HTTP GET、POST 或 Web 服务调用的形式出现。

正确制作的网站需要防止依赖于 IP 地址跟踪和请求频率分析的僵尸程序；隐藏 id 可能会阻止某些人编写 shell 脚本来获取一系列对象，但是还有其他方法可以通过使用某种蛮力攻击来利用网站。

ICQ id 很有价值，但这仅仅是因为它们与用户相关并且是用户的主要识别手段；这是一种独一无二的用户身份验证方法，没有被任何其他服务、程序或网站使用。

结论 是的，你需要担心爬虫和 DDOS 攻击和数据保护以及一大堆其他东西，但是隐藏 id 并不能正确解决任何这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:43:38.187

如果您的问题与使用主键与任何其他唯一列集来识别要删除的记录有关，那么数据库级别的安全性没有区别。

例如，如果您有一个包含以下列的表：

```
id - primary key
subject -
serial_number -
...
other fields 
```

`subject + serial_number`每行的位置或唯一性，无论您是否这样做，在安全性方面都没有区别

```
delete from table where id = '&id' 
```

相对

```
delete from table where serial_number = '&1' and subject = '&2' 
```

使用主键删除可能会更快。

但是，由于此删除是从 html 页面触发的，您肯定需要查看如何保护页面并防止意外删除，但这与使用主键而不是任何其他字段来删除记录的决定无关.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:23:56.030

好像你要使用

```
<a href="YOUR_URL_TO_DELETE/ID_TO_DELETE">YOUR_ANCHOR</a> 
```

我遇到这种方法的主要问题是每个可以跟随链接的脚本都可以删除表中的记录。考虑使用带有 POST 方法的表单，并在执行请求之前向用户显示确认对话框。

# sql-server - SQL 查询行为

> ID：14375647
> 
> 赞同：0
> 
> 时间：2013-01-17T09:17:46.253
> 
> 标签：sql-server

我在表 CLIENTDET 中有一个名为“CLIENTDATA”的列，并且有一个类似于“last-ST - Tranactions - Challan Details - Int”的数据。计算。- 兴趣报告 - N'。

**情况1：**

当我写一个查询

```
SELECT CLIENTDATA,
       LEN(CLIENTDATA)
FROM   CLIENTDET 
```

在这种情况下，我得到正确的数据和长度为“75”。

**案例二：**

当我写一个查询

```
SELECT CAST(
           CASE 
                WHEN CLIENTDATA IS NULL THEN ''
                ELSE CLIENTDATA
           END AS 
           VARCHAR
       ),
       LEN(
           CAST(
               CASE 
                    WHEN CLIENTDATA IS NULL THEN ''
                    ELSE CLIENTDATA
               END 
               AS VARCHAR
           )
       )
FROM CLIENTDET

In this case i am not getting correct data as in Case 1, here length is '30'. 
```

有什么我在这里遗漏或不理解的吗？.... 附上图片

![在此处输入图像描述](../Images/9dff75e6143abbe5812a8b35f47b9ad7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:30:12.527

在不指定长度的情况下将文字转换为字符类型时，
默认为 30。因此在使用字符数据类型时需要指定足够的列长度。 [参考。](http://sqlblogcasts.com/blogs/madhivanan/archive/2007/12/04/column-length-and-data-length.aspx)
这里[是msdn参考](http://msdn.microsoft.com/en-us/library/ms176089.aspx)

例如

```
Declare @a varchar(100)
Select @a='123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890'

Select LEN(CAST(@a as Varchar)),LEN(@a) 
```

作为附加信息

当声明一个 VARCHAR 变量而不定义长度时，它将默认为 1。

```
DECLARE @a VARCHAR
SET @a = 'ABCDE'
SELECT @a 
```

返回：“1”

# c++ - 类不访问全局对象

> ID：14375651
> 
> 赞同：0
> 
> 时间：2013-01-17T09:17:56.073
> 
> 标签：c++, oop, inheritance

这真的让我很困惑。出于某种原因，我得到了一个

> “c1 未在此范围内声明”

来自编译器的错误。我正在使用带有 Code::Blocks 的 Mingw。我会假设全局变量对程序来说是全局的？我错了吗？TYIA-罗兰

```
 // main.h
    #include <iostream>

    #include "classone.cpp"
    #include "classtwo.cpp"

    extern AnotherClass c2;
    extern TheClass c1;

----------

    // main.cpp
    #include "main.h"

    AnotherClass c2;
    TheClass c1;

    int main()
    {

        c1.function5();
        c2.function2();

        return 0;
    }

----------

    //classone.h

    #include "main.h"
    class AnotherClass  {
    `
          public:
        void function2();

    void function3();

      private:
    int varone;
    int vartwo;
};

----------

// classone.cpp

#include "classone.h"

void AnotherClass::function2()  {

    std::cout << "Function 2 Check\n";
}

void AnotherClass::function3()  {

    std::cout << "Function 3 Check";
}

----------

// classtwo.h

#include "main.h"
class TheClass  {

      public:
    void function4();
    void function5();
};

----------

// classtwo.cpp
#include "classtwo.h"

void TheClass::function4()  {

    c1.function2();
    std::cout << "Function 2 Check\n";
}

void TheClass::function5()  {

    std::cout << "Function 3 Check";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:22:02.173

包含这样的 .cpp 文件非常愚蠢 - 仅包含标题。

无论如何，将 main.h 更改为：

```
#include <iostream>
extern AnotherClass c2;
extern TheClass c1; 
```

将此添加到 main.cpp：

```
AnotherClass c2;
TheClass c1; 
```

然后包含`main.h`在每个需要它的文件中，如下所示：

```
// classtwo.cpp
#include "classtwo.h"
#include "main.h"

void TheClass::function4()  {

    c1.function2();
    std::cout << "Function 2 Check\n";
}

void TheClass::function5()  {

    std::cout << "Function 3 Check";
} 
```

此外，如果您还没有警卫，则需要包括警卫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:21:53.987

如果要将所有代码编译到单个文件中，则需要在 .cpp 文件中包含类声明。在 classtwo.cpp 中插入 #include "classtwo.h" 并对两个文件顶部的 classone 执行相同操作。

标准做法是将类代码与客户端代码分开，因此您应该将类​​编译到库中并将其链接到主程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:23:18.167

您`main .h`需要包含`.h`2 个类的文件才能使其正常工作。您不需要（也不应该）包含这些`.cpp`文件。

# php - 如何插入，更新多个复选框到mysql？

> ID：14375653
> 
> 赞同：0
> 
> 时间：2013-01-17T09:18:05.027
> 
> 标签：php, mysql, checkbox

我有一个包含 80 个复选框的表单。它是汽车的选项表单。例如

**颜色：** `black , red , white , yellow` 等等。我应该如何为许多选项设计我的数据库？

我应该在表中创建 80 列吗？或使用 implode() 并保存在一列或多行中？但是当我需要时，我应该更新它...

```
Car_id |  black | red | white | yellow  |..... | option80 |
1            true     true 
```

我应该怎么做 ？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:23:39.337

检查归一化。这可能会有所帮助。

无论如何，为了帮助您上路，这里有一个基本设置。

```
+-----TABLE CAR------+
ID
NAME

+-----TABLE COLOR------+
ID
COLOR

+-----TABLE CAR_COLOR------+
CAR_ID
COLOR_ID 
```

这确保您在 CAR 和 COLOR 之间有一个链接表

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:14:43.713

如果您打算将来按颜色选择项目，那么最好创建相关表：

```
table of cars (car_id, car_name)

table of colors (color_id, color_name)

table of relation colors and cars (car_id, color_id)

(sql - join) 
```

而如果你打算只用作汽车的一个特性，那么一个单元格与所有的花朵分隔“|” 当您在数据库中创建插入时使用 implode()，并从数据库中选择 explode()

# c# - 我应该在哪个代码文件中以及在文件中的哪个位置将事件处理程序分配给控件？

> ID：14375654
> 
> 赞同：0
> 
> 时间：2013-01-17T09:18:07.157
> 
> 标签：c#, winforms

我必须在哪里写这段代码？

```
button1.MouseHover += Common_MouseHover; 
```

问题是我想声明一个事件处理程序并将每个按钮指向它。这是常见的处理程序：

```
private void Common_MouseHover(object sender, EventArgs e)
{
     Button btn = sender as Button;
     if (btn != null)
         btn.Image = pic
} 
```

但我不知道我必须在哪里写：

```
button1.MouseHover += Common_MouseHover;
utton2.MouseHover += Common_MouseHover;
.. etc 
```

在设计师？具体在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:21:56.990

在表单的设计器或构造器中，或者如果您在创建时创建动态按钮。

```
public Form1()
{
    InitializeComponent();

    button1.MouseHover += new EventHandler(Common_MouseHover);
    button2.MouseHover += new EventHandler(Common_MouseHover);

} 
```

如果在属性编辑器中。

![在此处输入图像描述](../Images/005d1a8c6f14cb77876b01586b5d7565.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:32:22.913

从技术上讲，这取决于您何时要分配它。例如，您可能不希望在满足某些条件之前由该方法处理事件：然后在条件为真时分配事件处理程序。

请记住，如果您不小心，分配事件处理程序可能会导致内存泄漏。例如，您可能有一个计时器，它不断地为事件分配相同的事件处理程序。您需要检查事件是否已经具有事件处理程序，或者它是否为空，或者您需要防止重复的任何内容。您可能还想使用 -= 运算符动态删除事件处理程序。

对于给出的示例，表单的构造函数似乎是正确的，并且是手动分配事件处理程序的最常见位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:34:02.730

`Constructor` ***在您的表单中*** 调用以下函数`InitializeComponent();`-

```
 private void init()
    {
        foreach (Control ctrl in this.Controls)
        {
            if (ctrl is Button)
            {
                (ctrl as Button).MouseHover += new EventHandler(Common_MouseHover);
            }
        }
    } 
```

像这样称呼它——

```
 // Form Constructor
    public Form3()
    {
        InitializeComponent();
        Init();
    } 
```

# c# - 记录在 DbContext 上执行的所有 linq 查询 - C#

> ID：14375655
> 
> 赞同：4
> 
> 时间：2013-01-17T09:18:10.173
> 
> 标签：c#, linq, entity-framework, dbcontext

有没有一种简单的方法来记录应用程序中执行的所有 linq 查询？

我目前使用的是代码优先实体框架，`DbContext`而不是旧的`DataBaseContext`。我知道这个`DataBaseContext`类有一个`Log`属性，但我不知道是否有类似 .log 属性的东西`DbContext`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:00:13.103

您可以`.ToString()`在[`IQueryable`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)您将创建的查询上使用。它将返回将在 DB 上执行的 SQL 语句。
然后，如果您使用[`Repository`](http://www.codeproject.com/Articles/489326/Complex-Queries-With-Repository-Pattern-and-the-En)模式，您可以在不使用任何第三方库的情况下实现您的日志记录逻辑。

# android - Android Webview HTML Fixed Element overflow-x:hidden Not Working

> ID：14375659
> 
> 赞同：3
> 
> 时间：2013-01-17T09:18:27.303
> 
> 标签：android, html, css, android-webview, css-position

我有一个`position:fixed`元素 A，其中包含比 A 更宽甚至有时更高的元素 B。我将元素 A 设置为`overflow-x:hidden`以防止在水平方向上滚动，但它不起作用。iOS 的 UIWebview 中不会出现此问题。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T13:15:39.410

在移动浏览器中固定用户位置并不是一个好主意。

此功能在手机中存在很多问题，目前不支持 android 版本 3（[http://caniuse.com/#search=fixed](http://caniuse.com/#search=fixed)）之前的版本。

我建议你用绝对+相对定位的组合来改变你的设计

# java - 文本搜索中的 Lucene 4.0

> ID：14375661
> 
> 赞同：0
> 
> 时间：2013-01-17T09:18:32.217
> 
> 标签：java, lucene

我在 java 中使用 lucene 4.0。我正在尝试在字符串中搜索字符串。如果我们查看 lucene hello world 示例，我希望在短语“inLuceneAction”中找到文本“lucene”。在这种情况下，我希望它为我找到两个匹配项，而不是一个。

关于如何做的任何想法？

谢谢

```
public class HelloLucene {
 public static void main(String[] args) throws IOException, ParseException {
// 0\. Specify the analyzer for tokenizing text.
//    The same analyzer should be used for indexing and searching
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);

// 1\. create the index
Directory index = new RAMDirectory();

IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40, analyzer);

IndexWriter w = new IndexWriter(index, config);
addDoc(w, "inLuceneAction", "193398817");
addDoc(w, "Lucene for Dummies", "55320055Z");
addDoc(w, "Managing Gigabytes", "55063554A");
addDoc(w, "The Art of Computer Science", "9900333X");
w.close();

// 2\. query
String querystr = args.length > 0 ? args[0] : "lucene";

// the "title" arg specifies the default field to use
// when no field is explicitly specified in the query.
Query q = new QueryParser(Version.LUCENE_40, "title", analyzer).parse(querystr);

// 3\. search
int hitsPerPage = 10;
IndexReader reader = DirectoryReader.open(index);
IndexSearcher searcher = new IndexSearcher(reader);
TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);
searcher.search(q, collector);
ScoreDoc[] hits = collector.topDocs().scoreDocs;

// 4\. display results
System.out.println("Found " + hits.length + " hits.");
for(int i=0;i<hits.length;++i) {
  int docId = hits[i].doc;
  Document d = searcher.doc(docId);
  System.out.println((i + 1) + ". " + d.get("isbn") + "\t" + d.get("title"));
}
// reader can only be closed when there
// is no need to access the documents any more.
reader.close(); 
}
private static void addDoc(IndexWriter w, String title, String isbn) throws IOException {
Document doc = new Document();
doc.add(new TextField("title", title, Field.Store.YES));

// use a string field for isbn because we don't want it tokenized
doc.add(new StringField("isbn", isbn, Field.Store.YES));
w.addDocument(doc);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:47:30.207

如果您以默认方式索引术语，意思`inLuceneAction`是一个术语，Lucene 将无法对`seek`给定的这个术语进行索引，`Lucene`因为它具有不同的前缀。分析这个字符串，使它产生三个索引词：`in` `Lucene` `Action`然后你就会得到它。您要么为此找到现成的分析器，要么必须编写自己的分析器。编写自己的分析器有点超出单个 StackOverflow 答案的范围，但是一个很好的起点是[org.apache.lucene.analysis](http://lucene.apache.org/core/3_6_0/api/all/index.html)包 Javadoc 页面底部的包信息。

# java - .class 文件中的 $ 符号

> ID：14375663
> 
> 赞同：3
> 
> 时间：2013-01-17T09:18:48.577
> 
> 标签：java, class

我有一个名为`MyProgram.java`. 我想从将在另一台机器上运行的不同目录运行它。所以我创建了一个目录并复制`MyProgram.class`了文件并创建了一个`.bat`运行它的文件（`Run.bat`），其中包括命令：`@java MyProgram`.

这不起作用，我必须复制`SPVerification$1.class`生成`Eclipse`的内容才能使其正常工作。

这是什么`XXX$1.class`文件，为什么我需要在`XXX.class`文件旁边使用它们才能运行应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T09:19:55.810

如果您的 .java 文件具有内部/嵌套类，则编译后这些类将由 java 编译器生成为 Yourclass$xxx.class 文件。

> 内部类定义产生额外的类文件。这些类文件的名称结合了内部和外部类名称，例如 MyClass$MyInnerClass.class。-[**来源**](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)

**示例** （*编辑*）

考虑以下`Class`定义

```
// MyClass class
public class MyClass{

    // Inner class Test1
    class Inner1 {
    }

    // Inner class Test2
    class Inner2{
    }

    public static void main(String [] args) {

        // Anonymous inner class 1
        new Object() {
        };

        // Anonymous inner class 2
        new Object() {
        };

        System.out.println("Bunch of $ files :)");
    }
} 
```

将生成以下这些文件

```
MyClass.class
MyClass$Inner1.class
MyClass$Inner2.class
MyClass$1.class
MyClass$2.class 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T09:21:26.550

它们是匿名的内部类。换句话说，当你有一个像

```
class OuterClass {
    // ...
    void method() {
        Thread t = new Thread(new Runnable() { 
            // ... code implementing Runnable interface ... 
        });
        // ... code to use t or whatever
    }
} 
```

这会生成匿名内部类，在这种情况下实现`Runnable`接口，并且该类的编译代码进入`OuterClass$<number>.class`文件。您可以拥有多个这样的类，并且 .class 文件名中的数量会越来越多。

请注意，即使您使用匿名内部类扩展类而不是实现接口，语法也完全相同。这与创建命名类略有不同，您需要在哪里使用`implements`并`extends`酌情使用。

# php - 如何将 Apple 推送通知服务 (apns) 与 php 一起使用？

> ID：14375664
> 
> 赞同：3
> 
> 时间：2013-01-17T09:18:51.860
> 
> 标签：php, ssl, apple-push-notifications

我正在尝试使用 php 连接到 Apples Push Notification Service (apns)。如果我使用命令

```
openssl s_client -connect gateway.push.apple.com:2195 -cert AppCert.pem -key AppKeyNoPass.pem -CAfile ca.pem 
```

在控制台上，我在最后一行收到一条带有“验证返回码：0（ok）”的长消息。如果我使用以下 PHP 代码，我会收到一些警告。

```
$uuid = '11111111-22222222-33333333-44444444-55555555-66666666-77777777-88888888';
$url = 'ssl://gateway.push.apple.com:2195';

$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', 'App.pem');
stream_context_set_option($streamContext, 'ssl', 'cafile', 'ca.pem');

$socketClient = stream_socket_client($url, $error, $errorString, 60, STREAM_CLIENT_CONNECT, $streamContext); 
```

这是 stream_socket_client() 的 PHP 警告

```
Warning: stream_socket_client() [function.stream-socket-client]: SSL operation failed with code 1\. OpenSSL Error messages: error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown
Warning: stream_socket_client() [function.stream-socket-client]: Failed to enable crypto
Warning: stream_socket_client() [function.stream-socket-client]: unable to connect to ssl://gateway.push.apple.com:2195 (Unknown error) 
```

你有什么主意吗？我的证书格式有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:15:07.170

我使用[了本教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)，一切对我来说都很好。有关于关键文件的所有详细信息，还有一个[php 推送示例文件](http://d1xzuxjlafny7l.cloudfront.net/downloads/SimplePush.zip)供下载。希望有帮助。

# python - SQLAlchemy：防止自动关闭

> ID：14375666
> 
> 赞同：9
> 
> 时间：2013-01-17T09:18:54.307
> 
> 标签：python, sql, sqlalchemy, bulkinsert

我需要通过 SQLAlchemy 插入/更新批量行。并获得插入的行。

我试着用 session.execute 来做：

```
 >>> posts = db.session.execute(Post.__table__.insert(), [{'title': 'dfghdfg', 'content': 'sdfgsdf', 'topic': topic}]*2)
 >>> posts.fetchall()

 ResourceClosedError                       Traceback (most recent call last) 
```

和引擎：

```
In [17]: conn = db.engine.connect()  

In [18]: result = conn.execute(Post.__table__.insert(), [{'title': 'title', 'content':  'content', 'topic': topic}]*2)

In [19]: print result.fetchall()
ResourceClosedError: This result object does not return rows. It has been closed automatically. 
```

同样的响应是对象已自动关闭。如何预防？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T21:20:20.327

**第一个答案-关于“防止自动关闭”。**

SQLAlchemy 使用 insert 运行 DBAPI execute() 或 executemany() 并且不执行任何选择查询。所以你得到的例外是预期的行为。执行插入查询后返回的 ResultProxy 对象包装了不允许对其进行操作的 DB-API 游标`.fetchall()`。一旦 `.fetchall()`失败，ResultProxy 会向用户返回您看到的异常。

插入/更新/删除操作后您可以获得的唯一信息是受影响的行数或自动递增后的主键值（取决于数据库和数据库驱动程序）。

如果您的目标是接收此类信息，请考虑检查[ResultProxy 方法和属性，](http://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.ResultProxy)例如：

*   .inserted_primary_key
*   .last_inserted_pa​​rams()
*   .lastrowid
*   ETC

**第二个答案 - 关于“如何进行批量插入/更新并获取结果行”。**

使用 DBAPI 进行单次插入查询时，无法加载插入的行。您用于进行批量插入/更新的 SQLAlchemy SQL 表达式 API 也不提供此类功能。SQLAlchemy 运行 DBAPI executemany() 调用并依赖于驱动程序实现。有关详细信息，请参阅[文档的此部分](http://docs.sqlalchemy.org/en/rel_0_8/core/tutorial.html#executing-multiple-statements)。

解决方案是设计您的表，使每条记录都具有识别记录的自然键（以唯一方式识别记录的列值的组合）。因此插入/更新/选择查询将能够针对一条记录。完成后，可以先进行批量插入/更新，然后按自然键进行选择查询。因此，您不需要知道自动递增的主键值。

另一种选择：可能您可以使用[SQLAlchemy 对象关系 API](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#adding-new-objects)来创建对象 - 然后 SQLAlchemy 可能会尝试优化插入，以便为您执行一个查询。它在使用 Oracle DB 时对我有用。开箱即用的更新不会有任何优化。检查[这个 SO question](https://stackoverflow.com/questions/270879/efficiently-updating-database-using-sqlalchemy-orm)以获得有效的批量更新想法

# html - Kendo UI Mobile - 带有 HTML5 输入标签响应速度非常慢的相机功能

> ID：14375671
> 
> 赞同：0
> 
> 时间：2013-01-17T09:19:25.437
> 
> 标签：html, kendo-ui

使用 HTML5 输入标签实现了相机功能。在打开相机之前至少需要点击 5 到 6 次。在 iOS 6 Safari 浏览器和 Android 上的 Goggle chrome 浏览器上尝试过。参考下面的js文件： 1\. jquery-1.8.3.js
2\. kendo.mobile.min.js 我们是否需要包含任何js文件

代码 ：

```
 <div data-role="view" id="tabstrip-camera" data-title="camera" data-layout="mobile-tabstrip" id="Camera">
         <!--Camera Code-->
         <input data-click="alert('clciked');" type="file" name="image" accept="image/*" capture>
    </div> 
```

即使尝试使用简单的 HTML5 按钮标记，响应也很慢，并且使用了相同的观察结果。

请问有人可以帮忙吗？我们是否需要包含任何 js 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:48:13.403

您是打算将实际的移动应用程序部署到手机或平板设备上，还是只是想在桌面网络浏览器中使用 Kendo Mobile 小部件？

如果您要部署到设备上，那么您应该构建在 PhoneGap / Cordova 之上，并且可以使用 PhoneGap 的图像捕获功能：

[http://docs.phonegap.com/en/1.2.0/phonegap_camera_camera.md.html](http://docs.phonegap.com/en/1.2.0/phonegap_camera_camera.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:46:07.873

尝试升级到本周发布的 Kendo UI Q3 服务包，看看是否能解决问题。

最初的 Kendo UI Q3 版本在触摸/鼠标事件方面存在一些问题，因为我们在事件处理方面进行了重大更改，以支持同时具有鼠标和触摸功能的系统（Windows 8 上的 Chrome/FF）。

# logging - 如何修复 JSP 编译器警告：一个 JAR 已扫描 TLD 但不包含 TLD？

> ID：14375673
> 
> 赞同：60
> 
> 时间：2013-01-17T09:19:27.207
> 
> 标签：logging, jar, compilation, tomcat7, tld

启动应用程序或通过 ant 编译 JSP 时，Tomcat 7 Jasper 抱怨 JAR 文件多余或放错位置。我收到以下消息

```
**compile-jsp:**
   [jasper] Jul 31, 2012 7:15:15 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar
   [jasper] INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time. 
```

如何在扫描期间跳过不需要的 JAR 可以提高 tomcat 中的启动时间和 JSP 编译时间？

如何启用更好的输出？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2016-09-06T21:55:43.363

**雄猫 8.5**。在 catalina.properties 中，位于 /conf 目录集中：

```
tomcat.util.scan.StandardJarScanFilter.jarsToSkip=\*.jar 
```

或者进入位于 Tomcat 的 /conf 目录中的 context.xml 并添加：

```
<JarScanner scanClassPath="false"/> 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-02-27T15:29:19.503

对于**Tomcat 8**，我必须添加以下行以`tomcat/conf/logging.properties`使 Tomcat 扫描的 jar 显示在日志中：

```
org.apache.jasper.servlet.TldScanner.level = FINE 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-09-24T17:29:18.503

上述解决方案对我不起作用。相反，我只是从 logging.properties 文件的最后一行中删除了 hash(#) 以使其正常工作。

```
# To see debug messages in TldLocationsCache, uncomment the following line:
org.apache.jasper.compiler.TldLocationsCache.level = FINE 
```

下一步是在 catalina.properties 文件中添加 Tomcat 7 正在寻找的 jar，就在以下行之后

```
org.apache.catalina.startup.TldConfig.jarsToSkip= 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-05-10T23:42:07.497

如果它对任何人有帮助，我只是将以下输出文件的内容附加到现有`org.apache.catalina.startup.TldConfig.jarsToSkip=`条目中。

请注意，这`/var/log/tomcat7/catalina.out`是您的 Tomcat 日志的位置。

```
egrep "No TLD files were found in \[file:[^\]+\]" /var/log/tomcat7/catalina.out -o | egrep "[^]/]+.jar" -o | sort | uniq | sed -e 's/.jar/.jar,\\/g' > skips.txt 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-08-18T08:12:26.027

出现警告是因为 Tomcat 扫描所有 Jar 以查找 TLD（标记库定义）。

**第1 步**：要查看哪些 JAR 抛出此警告，请将以下行插入到 tomcat/conf/logging.properties

```
org.apache.jasper.servlet.TldScanner.level = FINE 
```

现在您应该能够看到警告，其中包含导致初始警告的 JAR 的详细信息

**Step2**由于在扫描期间跳过不需要的 JAR 可以提高启动时间和 JSP 编译时间，因此我们将跳过文件中不需要的 JARS `catalina.properties`。你有两个选择 -

1.  列出`tomcat.util.scan.StandardJarScanFilter.jarsToSkip`. 但是如果你有很多罐子或者罐子不断变化，这会变得很麻烦。
2.  **或者，**插入`tomcat.util.scan.StandardJarScanFilter.jarsToSkip=*`以跳过所有罐子

您现在应该看不到上述警告，并且如果您有一个相当大的应用程序，它应该可以为您节省大量部署应用程序的时间。

**注意：在Tomcat8中测试**

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-29T13:23:33.277

取消注释此行（在`/conf/logging.properties`）

```
org.apache.jasper.compiler.TldLocationsCache.level = FINE 
```

**在tomcat 7.0.53**中为我工作！

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-26T11:03:37.080

对于 Tomcat 8，我必须将以下行添加到 catalina.properties 以防止 Tomcat 扫描 jar：

```
tomcat.util.scan.StandardJarScanFilter.jarsToSkip=jsp-api.jar,servlet-api.jar 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-20T10:14:30.300

以上都不适用于我（tomcat 7.0.62）...正如 Sensei_Shoh 所指出的，请参阅消息上方的类并将其添加到 logging.properties。我的日志是：

```
Jan 18, 2016 8:44:21 PM org.apache.catalina.startup.TldConfig execute
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time. 
```

所以我加了

```
org.apache.catalina.startup.TldConfig.level = FINE 
```

在 conf/logging.properties

在那之后，我得到了这么多“有问题”的文件，我懒得跳过它们（并且也恢复到正常的日志记录......）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-06T21:49:39.437

错误消息说明它正在使用哪个记录器，因此设置该记录器`.level`：

```
[jasper] Jul 31, 2012 7:15:15 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar 
```

所以记录器是`org.apache.jasper.compiler.TldLocationsCache`. 在您的`logging.properties`文件中，添加以下行：

```
org.apache.jasper.compiler.TldLocationsCache.level = FINE 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-27T18:32:07.107

如果日志中的额外条目打扰了您，但额外的启动时间却没有，只需将其添加到您的`logging.properties`并忘记它：

```
org.apache.jasper.servlet.TldScanner.level = WARNING 
```

# python - 读取带有不完整标题的 CSV 文件

> ID：14375674
> 
> 赞同：2
> 
> 时间：2013-01-17T09:19:30.047
> 
> 标签：python, parsing, csv, dialect

我以前没有使用过`csv module`in `python`，但它似乎是一个很好的工具，可以满足我的需求。

我面临的问题是我`csv-file`看起来有点奇怪。（一开始很难注意到）

请参阅下面的示例了解我的意思：

```
A|B|C|D|x|F|G|x|H
1||2||3|4||5|6
1||2||3|4||5|6
1||2||3|4||5|6
1||2||3|4||5|6 
```

上面有一些索引（例如**column-x**）应读取为**Dx**和**Gx**。**D 列**和G**列**则为空列。

所以我需要的是，当 csv 处理标题时，它应该创建像**Dx**和**Gx**这样的标题并忽略**D**和**G**列，而是从**x 列**中获取值。

（我尝试先使用以下代码按原样读取文件并对其进行后处理，但这是不可能的，因为列名**x**始终相同，并且`csv.DictReader`似乎丢弃了重复的列名）

```
with open('myCSV.log') as csvFile:
    reader = csv.DictReader(csvFile, dialect='pipes')
    for row in reader:
        print row 
```

这可以通过 a`dialect`或其他一些奇特的配置方式来实现，`csv-module`还是我必须自己解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:28:03.977

使用[熊猫](http://pandas.pydata.org/)：

```
import pandas as pd
print pd.read_csv('test.csv',sep='|') 
```

出去：

```
 A   B  C   D  x  F   G  x.1  H
0  1 NaN  2 NaN  3  4 NaN    5  6
1  1 NaN  2 NaN  3  4 NaN    5  6
2  1 NaN  2 NaN  3  4 NaN    5  6
3  1 NaN  2 NaN  3  4 NaN    5  6 
```

如果需要，可以使用`to_dict()`以下方法将其转换为 dict：

```
{'A': {0: 1, 1: 1, 2: 1, 3: 1},
 'B': {0: nan, 1: nan, 2: nan, 3: nan},
 'C': {0: 2, 1: 2, 2: 2, 3: 2},
 'D': {0: nan, 1: nan, 2: nan, 3: nan},
 'F': {0: 4, 1: 4, 2: 4, 3: 4},
 'G': {0: nan, 1: nan, 2: nan, 3: nan},
 'H': {0: 6, 1: 6, 2: 6, 3: 6},
 'x': {0: 3, 1: 3, 2: 3, 3: 3},
 'x.1': {0: 5, 1: 5, 2: 5, 3: 5}} 
```

编辑：如果您需要某些列名称，您可以这样做：

```
import pandas as pd
df = pd.read_csv('test.csv',sep='|')
df.columns = [df.columns[index-1]+'x' if 'x' in name 
              else name for index,name in enumerate(df.columns)]
print df

   A   B  C   D  Dx  F   G  Gx  H
0  1 NaN  2 NaN   3  4 NaN   5  6
1  1 NaN  2 NaN   3  4 NaN   5  6
2  1 NaN  2 NaN   3  4 NaN   5  6
3  1 NaN  2 NaN   3  4 NaN   5  6 
```

如果您想丢失空列：

```
print df.dropna(axis=1,how='all')

   A  C  Dx  F  Gx  H
0  1  2   3  4   5  6
1  1  2   3  4   5  6
2  1  2   3  4   5  6
3  1  2   3  4   5  6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:27:00.510

我认为阅读文件并对其进行后处理确实是要走的路。只是不要使用`DictReader`：

```
with open('myCSV.log') as csvFile:
    for row in csv.reader(csvFile, delimiter='|'):
        print row

['A', 'B', 'C', 'D', 'x', 'F', 'G', 'x', 'H']
['1', '', '2', '', '3', '4', '', '5', '6']
['1', '', '2', '', '3', '4', '', '5', '6']
['1', '', '2', '', '3', '4', '', '5', '6']
['1', '', '2', '', '3', '4', '', '5', '6'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:36:52.867

您有九个标题和九个列，除了加倍的列标题之外，我并没有真正看到 .csv 的问题。您可以覆盖 DictReader 中的字段名，以重命名它们。此外，如果要将列“D”重命名为“Dx”，可以使用此参数完成。.

```
import csv
from pprint import pprint
with open('testfile.csv') as csvFile:
reader = csv.DictReader(csvFile, fieldnames = ['A','B','C','meh','Dx','F','moe','Gx','H'], delimiter = '|'  )
for row in reader:
        pprint(row) 
```

在这里使用方言似乎没有必要在这里！这是我的测试输出，第一行现在是标题。

```
{'A': 'A',
 'B': 'B',
 'C': 'C',
 'Dx': 'x',
 'F': 'F',
 'Gx': 'x',
 'H': 'H',
 'meh': 'D',
 'moe': 'G'}
{'A': '1',
 'B': '',
 'C': '2',
 'Dx': '3',
 'F': '4',
 'Gx': '5',
 'H': '6',
 'meh': '',
 'moe': ''}
 .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:38:34.907

```
from StringIO import StringIO
import csv

with open('test.csv') as f:
    lines = f.read().split('\n')
    line_0 = lines[0].split('|')
    lines[0] = '|'.join(line_0[i-1] if 'x' in n else n for i,n in 
                                               enumerate(line_0))

    reader = csv.DictReader(StringIO('\n'.join(lines)),delimiter = '|' )
    for row in reader:
        print row 
```

出去：

```
{'A': '1', 'C': '2', 'B': '', 'D': '3', 'G': '5', 'F': '4', 'H': '6'}
{'A': '1', 'C': '2', 'B': '', 'D': '3', 'G': '5', 'F': '4', 'H': '6'}
{'A': '1', 'C': '2', 'B': '', 'D': '3', 'G': '5', 'F': '4', 'H': '6'}
{'A': '1', 'C': '2', 'B': '', 'D': '3', 'G': '5', 'F': '4', 'H': '6'} 
```

# c# - 当文件路径具有 unicode 字符时，Cabarc exe 不解压缩

> ID：14375677
> 
> 赞同：0
> 
> 时间：2013-01-17T09:19:42.090
> 
> 标签：c#, unicode, unzip

我正在尝试使用 Cabarc.exe 实用程序从名称为 Unicode（中文）的源文件夹中解压缩文件。

但是该实用程序并没有解压缩相同的内容。

如果我将文件夹重命名为英文，那么它可以工作。

这是一个已知的问题？有什么解决办法吗？

代码：`Cabarc.exe -p X "C:\测试\sourcefile.zip" "C:\ProgramData\destination"\`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:18:41.703

听起来像是一个典型的非 Unicode ('ANSI') 编译的应用程序 - 在这种情况下，没有太多的修复可能，在命令行中使用的任何在您的语言环境代码页中不可用的字符都必然会失败。

将您的 Windows 语言环境设置为代码页 936（“非 Unicode 应用程序的语言”-> 中文）将允许您使用中文字符，但不能使用该代码页中不可用的任何其他非中文字符。

`chcp 65001`为特定会话将代码页设置为 UTF-8的命令理论上允许您使用所有 Unicode 字符。不幸的是，在代码页 65001 的实现中存在许多导致广泛破坏的错误......我不知道 cabarc 是否能幸免于难。

# wpf - wpf中的比例大小

> ID：14375681
> 
> 赞同：4
> 
> 时间：2013-01-17T09:19:51.180
> 
> 标签：wpf, visual-studio-2010, grid

我有`Grid`两列。一列的宽度是另一列的两倍。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1*" />
        <ColumnDefinition Width="2*" />
    </Grid.ColumnDefinitions>      
    <TextBox Grid.Column="0" Text="12"/>
    <TextBox Grid.Column="1" Text="" />
</Grid> 
```

但是在运行时，当我输入第二个文本框时，宽度会发生变化，而不会保持 1:2 的比例。
我不想保持固定宽度。宽度将在运行时根据用户输入进行更改。
即使宽度在运行时发生变化，我也希望宽度保持 1:2 的比例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:39:29.103

这可以这样做：

**主窗口.xaml**

```
<Grid>
    <Grid Width="{Binding Path=GridWidth}"
          Margin="0,60,0,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>
        <TextBox Grid.Column="0" Text="Single 33%"/>
        <TextBox Grid.Column="1" Text="Double 67%" />
    </Grid>
    <Button Content="Increase" Height="34" HorizontalAlignment="Left" Margin="19,12,0,0" Name="button1" VerticalAlignment="Top" Width="90" Click="button_Click" />
    <Button Content="Decrease" Height="34" HorizontalAlignment="Left" Margin="120,12,0,0" Name="button2" VerticalAlignment="Top" Width="90" Click="button_Click" />
</Grid> 
```

为了说明，我有两个按钮可以增加或减少总网格宽度。

**MainWindows.cs**

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public static readonly DependencyProperty GridWidthProperty = DependencyProperty.Register("GridWidth", typeof(Double), typeof(MainWindow), new UIPropertyMetadata(300d));
    public Double GridWidth
    {
        get { return (Double)GetValue(GridWidthProperty); }
        set
        {
            SetValue(GridWidthProperty, value);
            NotifyPropertyChanged("GridWidth");
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = this;
    }

    private void button_Click(object sender, RoutedEventArgs e)
    {
        if (sender == button1)
            this.GridWidth += 50;
        else if (sender == button2)
            this.GridWidth -= 50;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(String PropertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:10:39.353

这是另一个替代答案，您可以根据需要进行修改。

在此示例中，您可以在第一列的文本框中输入网格的宽度。或者您可以使用按钮扩大或缩小宽度。只是为了说明。您可能必须根据您的目的更改此设置。

**主窗口.cs**

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public static readonly DependencyProperty GridWidthProperty = DependencyProperty.Register("GridWidth", typeof(Double), typeof(MainWindow), new UIPropertyMetadata(300d, OnGridWidthPropertyChanged));
    public Double GridWidth
    {
        get { return (Double)GetValue(GridWidthProperty); }
        set
        {
            SetValue(GridWidthProperty, value);
            NotifyPropertyChanged("GridWidth");
        }
    }

    public static readonly DependencyProperty ColumnWidthProperty = DependencyProperty.Register("ColumnWidth", typeof(String), typeof(MainWindow), new UIPropertyMetadata("100", OnColumnWidthPropertyChanged));
    public String ColumnWidth
    {
        get { return (String)GetValue(ColumnWidthProperty); }
        set
        {
            SetValue(ColumnWidthProperty, value);
            NotifyPropertyChanged("ColumnWidth");
        }
    }

    private static void OnGridWidthPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        MainWindow ctl = sender as MainWindow;

        ctl.doGridWidthChanged();
        ctl = null;
    }

    private static void OnColumnWidthPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        MainWindow ctl = sender as MainWindow;

        ctl.doColumnWidthChanged();
        ctl = null;
    }

    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = this;
    }

    private void button_Click(object sender, RoutedEventArgs e)
    {
        if (sender == button1)
            this.GridWidth += 50;
        else if (sender == button2)
            this.GridWidth -= 50;
    }

    private void doGridWidthChanged()
    {
        if (Double.IsNaN(this.GridWidth))
            return;

        this.ColumnWidth = Math.Round((this.GridWidth / 3), 2).ToString();
    }

    private void doColumnWidthChanged()
    {
        Double columnwidthval = Double.NaN;

        if (!String.IsNullOrEmpty(this.ColumnWidth) && Double.TryParse(this.ColumnWidth, out columnwidthval))
            this.GridWidth = columnwidthval * 3;
        else
            this.ColumnWidth = Math.Round((this.GridWidth / 3), 2).ToString();
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(String PropertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
    }
} 
```

这是我的 XAML 代码。

**主窗口.xaml**

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication3"
        Title="MainWindow" Height="600" Width="800">
    <Grid>
        <Grid Margin="0,60,0,0"
              Width="{Binding Path=GridWidth}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>
            <Border Grid.Column="0" Background="GhostWhite" />
            <Border Grid.Column="1" Background="AliceBlue" />
            <Border Grid.ColumnSpan="2" BorderBrush="DimGray" BorderThickness="1" />
            <StackPanel Grid.Column="0" Orientation="Vertical" Margin="3">
                <TextBlock Text="Single" />
                <TextBox Text="{Binding Path=ColumnWidth, Mode=TwoWay}" />
            </StackPanel>
            <StackPanel Grid.Column="1" Orientation="Vertical" Margin="3">
                <TextBlock Text="Double" />
            </StackPanel>
        </Grid>
        <Button Content="Increase" Height="34" HorizontalAlignment="Left" Margin="19,12,0,0" Name="button1" VerticalAlignment="Top" Width="90" Click="button_Click" />
        <Button Content="Decrease" Height="34" HorizontalAlignment="Left" Margin="120,12,0,0" Name="button2" VerticalAlignment="Top" Width="90" Click="button_Click" />
    </Grid>
</Window> 
```

希望有帮助！

# jsf - 两次动态创建组件

> ID：14375682
> 
> 赞同：0
> 
> 时间：2013-01-17T09:19:51.247
> 
> 标签：jsf, dynamic, jsf-2, components

我正在尝试通过程序代码创建一个 HtmlSelectOneMenu。这不是问题。我是这样意识到的：

```
final UISelectItem select = (UISelectItem) app.createComponent(UISelectItem.COMPONENT_TYPE);

//Items für DropDownMenü erstellen
List<SelectItem> items = new ArrayList<SelectItem>();
for (int k = 0; k < Gender2.values().length; k++){
    items.add(new SelectItem(Gender2.values()[k]));                
}

//Items dem DropDown Menü zuordnen
UISelectItems selectItems = new UISelectItems();
selectItems.setValue(items);
selectOneRadio = (HtmlSelectOneMenu) app.createComponent(HtmlSelectOneMenu.COMPONENT_TYPE);
selectOneRadio.getChildren().add(selectItems);
testgrid.getChildren().add(selectOneRadio); 
```

当我再次调用该方法时，出现以下错误：异常报告

信息

描述服务器遇到一个内部错误 () 阻止它完成这个请求。

异常 javax.servlet.ServletException: Komponenten-ID j_idt3:j_id5 已被发现

想我可以针对这个错误做些什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T09:23:35.843

您应该为使用`setId()`方法创建的组件分配一个唯一的 ID。

您可以自行生成 id，或使用：

```
FacesContext.getCurrentInstance().getViewRoot().createUniqueId() 
```

生成它们。

# php - 我应该在哪里编辑我的可编辑网格 js 以匹配我的表与主键 custID 而不是 id

> ID：14375696
> 
> 赞同：0
> 
> 时间：2013-01-17T09:20:26.830
> 
> 标签：php, json

我正在使用来自 www.editablegrid.net 的可编辑网格，并注意到我的网格工作得很好，只要我的表有列 id 是主键。当我在另一个以 custID 作为键的表上使用它时，它无法更新。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:39:33.437

如果您不向我们展示您的代码片段，我们将无能为力。但让我做一个疯狂的猜测。editablegrid 默认使用 ID 列。因此，如果没有名为 ID 的列，则必须定义它

该插件有一些默认设置属性，你已经玩过这些了吗？由于插件没有任何文档，脚本中也没有任何关于将列定义为主 ID 的内容，我建议您转移到更好的文档数据网格，例如[http://www.datatables.net/](http://www.datatables.net/)

```
var props = {
        name: "",
        label: "",
        editable: true,
        renderable: true,
        datatype: "string",
        unit: null,
        precision: -1, // means that all decimals are displayed
        nansymbol: '',
        decimal_point: ',',
        thousands_separator: '.',
        unit_before_number: false,
        bar: true, // is the column to be displayed in a bar chart ? relevant only for numerical columns 
        headerRenderer: null,
        headerEditor: null,
        cellRenderer: null,
        cellEditor: null,
        cellValidators: [],
        enumProvider: null,
        optionValues: null,
        columnIndex: -1
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-08T13:08:04.990

你应该在很多地方改变它

对于 loaddata.php 中的删除操作

```
$grid->addColumn('action', 'Action', 'html', NULL, false, 'id'); 
```

将此更改为

```
$grid->addColumn('action', 'Action', 'html', NULL, false, 'yourprimarykey'); 
```

在 update.php 中（第 39 行）

```
if ( $stmt = $mysqli->prepare("UPDATE ".$tablename." SET ".$colname." = ? WHERE id = ?")) { 
```

将此更改为

```
if ( $stmt = $mysqli->prepare("UPDATE ".$tablename." SET ".$colname." = ? WHERE yourprimarykey = ?")) { 
```

在删除.php

```
if ( $stmt = $mysqli->prepare("DELETE FROM ".$tablename."  WHERE id = ?")) { 
```

将此更改为

```
if ( $stmt = $mysqli->prepare("DELETE FROM ".$tablename."  WHERE yourprimarykey = ?")) { 
```

# youtube - Youtube：自定义嵌入

> ID：14375700
> 
> 赞同：0
> 
> 时间：2013-01-17T09:20:36.253
> 
> 标签：youtube, youtube-api

我想添加 youtube 视频列表，但不添加视频播放器。所以我需要的是

*   视频标题
*   视频缩略图
*   视频时长

不知何故，我设法通过使用它来获取图像缩略图，`http://img.youtube.com/vi/4wew2uWoARw/hqdefault.jpg`但我找不到如何添加标题和持续时间。

谁能帮我弄到这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:26:36.440

您可以使用 Data API v2: 检索关于给定视频 ID 的 JSON 元数据：`https://gdata.youtube.com/feeds/api/videos/VIDEO_ID?v=2&alt=jsonc`例如

[https://gdata.youtube.com/feeds/api/videos/4wew2uWoARw?v=2&alt=jsonc](https://gdata.youtube.com/feeds/api/videos/4wew2uWoARw?v=2&alt=jsonc)

# jquery - 我应该使用内置类还是规则来实现我的验证？

> ID：14375707
> 
> 赞同：0
> 
> 时间：2013-01-17T09:21:02.600
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件来验证我的表单。正如我所看到的（我很难从文档中弄清楚事情），对于如何应用内置验证规则，我有 2 个基本选择：

1.  **在 HTML 中应用类**

    `<input name="myNum" id="myNum" type="text" class="number" />`

2.  **调用 validate 方法时通过输入 id 指定规则**

    ```
    $('#sales').validate({
        rules: {
            myNum: {number: true}
        }
    }); 
    ```

哪个被认为是“最佳实践”？我正在尝试确定将所有规则编码在 validate 方法中的一个位置是否更清晰，以便我可以在一个集中位置查看所有验证，或者将 HTML 中的简单规则编码为是否有意义类，并且只将自定义验证放在 validate 方法中。什么是更被接受的验证编码方式？什么时候应该确定我使用哪种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:42:24.023

除了个人选择之外，您需要考虑的唯一因素是，如果您希望作为规则应用的方法是带有附加参数的方法，那么您不能将方法名称用作类名。例如这些方法

*   最小长度，
*   最长长度
*   范围长度
*   分钟
*   最大限度
*   范围
*   等于

都带一个参数 - 即它们的定义是

```
function(value, element, param) 
```

而不是

```
function(value, element) 
```

所以这个标记不起作用

```
<!-- doesn't work --> 
<input name="email2" class="minlength"/> 
```

不带额外参数的方法是 'required'、'email'、'url'、'date' 等。

*因此，即使对于您自己的自定义方法，您也可以通过类名将它们应用于表单字段，只要它们具有签名**函数（值，元素）***

文档不是最新的——有多种方法可以将方法应用于标记中的输入字段，包括文档中根本没有提到的**数据属性。**例如，这些都是有效的：

```
<input name="email1" required />
<input name="email2" class="required"/>
<input name="email3" type="required"/>
<input name="email4" data-rule-required="true" />
<input name="email5" data-rule-required="true" data-rule-minlength="5" />
<input name="email6" data-rule-required="true" data-rule-range="[1,5]"/> 
```

注意。对于数据样式，您需要插件的最新版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:45:24.990

您可以使用内置`rules()`方法添加规则。 [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

这就像两种方法中最好的。您可以避免定义所有规则，`.validate()`同时仍然可以**无限灵活地定义自定义规则集**。然后这些“规则集”可以由自定义`class`, `name`,`id`等分配。

注意：**必须在调用***后*调用该方法`.validate()`，并且必须与`.each()`.

当您向表单动态添加字段时，此方法也非常有用。

（请注意，与在 中添加规则时定义的自定义消息相比，格式略有不同`.validate()`）

[jsFiddle 演示](http://jsfiddle.net/6mXha/)

HTML：

```
 <input type="text" class="myclass" name="field1" />
 <input type="text" class="myclass" name="field2" />
 <input type="text" class="myclass" name="field3" /> 
```

jQuery：

```
$('form').validate({
    // your other options
});

// the following method must come AFTER .validate()
$('form').find('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        digits: true,
        range: [1,5],
        messages: {
            required: "Required input",
            digits: "Only digits please",
            range: "Please only enter between {0} and {1}"
        }
    });
}); 
```

* * *

或者，您可以按字段`name`而不是`class`...

[jsFiddle 演示](http://jsfiddle.net/CQkSZ/)

HTML：

```
 <input type="text" class="myclass" name="field1" />
 <input type="text" class="myclass" name="field2" />
 <input type="text" class="myclass" name="field3" /> 
```

jQuery：

```
$('#form').validate({
    // your other options
});

// the following method must come AFTER .validate()
$("input[name^='field']").each(function() {
    $(this).rules('add', {
        required: true,
        digits: true
    });
}); 
```

# python - 一个 Web 请求中的并行性

> ID：14375714
> 
> 赞同：0
> 
> 时间：2013-01-17T09:21:36.047
> 
> 标签：python, django, parallel-processing

我们的服务器有很多 CPU，如果请求处理程序进行一些并行处理，一些 Web 请求可能会更快。

示例：需要对N（大约1-20）张图片进行一些工作，以处理一个Web请求。

在请求到来之前缓存或做这些事情是不可能的。

使用硬件的多个 CPU 可以做什么：

*   主题：我不喜欢它们
*   多处理：每个请求都需要启动 N 个进程。启动新进程和导入库将丢失许多 CPU 周期。
*   特殊（手工）服务，有 N 个进程准备好处理
*   cellery（rabbitMQ）：我不知道通信开销有多大......
*   其他解决方案？

平台：Django (Python)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:09:18.063

关于您的第二种和第三种选择：您不需要为每个请求启动一个新流程。这就是[进程池](http://docs.python.org/dev/library/multiprocessing.html)的用途。当您的应用程序启动时会创建新进程。当您向池提交请求时，它会自动排队，直到有工作人员可用。缺点是请求被阻塞 - 如果此时没有可用的工作人员，您的用户将坐下来等待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:08:56.977

您可以使用[标准库模块***asyncore***](http://docs.python.org/2/library/asyncore.html)。

> 该模块为编写异步套接字服务客户端和服务器提供了基本的基础设施。

有一个关于[**如何创建基本 HTML 客户端**](http://docs.python.org/2/library/asyncore.html#asyncore-example-basic-http-client)的示例。

* * *

然后是[***Twisted***](http://twistedmatrix.com)，它可以做很多很多事情，这就是为什么它有点令人生畏。这是一个[**使用其 HTTP 客户端的示例**](http://twistedmatrix.com/documents/current/web/howto/client.html)。

* * *

Twisted “*说 HTTP* ”，asyncore 不说，*你*必须这样做。

* * *

其他库：

*   [**Tornado 的 httpclient**](http://www.tornadoweb.org/documentation/httpclient.html)
*   [**异步http**](http://asynchttp.sourceforge.net/)

# android - Android销毁活动，杀死进程

> ID：14375720
> 
> 赞同：126
> 
> 时间：2013-01-17T09:21:49.670
> 
> 标签：android, android-activity

嗨，我想知道 Android 是如何管理内存的，但我在任何地方都找不到准确的答案。假设我有一个应用程序，当前活动堆栈上有 5 个活动（4 个停止，1 个恢复），没有连接服务。我按下 HOME 按钮，我的所有活动都停止了。我启动了其他一些消耗内存的应用程序，并且整体设备内存开始变低。问题是

... 我的申请会怎样？

1.  系统可以只破坏我的一个或一些活动来恢复内存吗？
2.  系统会杀死我的应用程序的整个过程吗？所有活动都会被很好地破坏吗？
3.  当我完全杀死我的应用程序时，会发生什么？它会从开始（如第一次开始）开始，还是会尝试将活动恢复到先前的状态/如果是 - 它只是堆栈顶部的一个还是全部？

**更新：**

在问这个问题之前，我已经看过几次 Activity 生命周期，但它没有回答我的问题。我做了一些测试，我有一些答案。DDMS 中的“停止进程”是测试的线索。

**我没有测试问题 1 的答案，但正如指南所说：**

> 如果一个活动被暂停或停止，系统可以通过要求它完成或简单地终止其进程来从内存中删除该活动。

似乎可以轻轻地销毁一个或多个活动（使用 onDestroy 方法）而不杀死进程。回到它们时，您将简单地得到 (onCreate + bundle) 。

**问题2答案：**

是的。通常系统会杀死整个过程，这意味着包括活动和静态字段在内的所有数据都被破坏。这做得不好 - 你不会为任何暂停/停止的活动获得 onDestroy 或 finalize() 。这就是为什么在 onPause 方法之前调用 saveInstanceState() 的原因。onPause 基本上是您应该保存某些内容的最后一种方法，因为在此方法之后您将永远看不到 onStop 或 onDestroy。系统可以杀死销毁所有对象的进程，无论它们持有什么以及它们正在做什么。

**问题 3 答案：**

当你回到一个被杀死的应用程序时会发生什么？

*   在 Android 2.2 之前 - 应用程序将从一开始就启动，并带有启动器活动。
*   从 2.2 开始 - 系统将恢复以前的应用程序状态。这是什么意思？这意味着将重新创建最后一个可见活动（onCreate + bundle）。活动堆栈会发生什么？堆栈很好，但上面的所有活动都死了。当您使用后退按钮返回时，它们中的每一个都将被重新创建（onCreate + bundle）。还有一件事：

> 通常，当用户从主屏幕重新选择该任务时，系统会在某些情况下清除任务（从根活动上方的堆栈中删除所有活动）。通常，如果用户在一定时间内（例如 30 分钟）没有访问任务，则会执行此操作。

**结论？**

1.  不要以为处理activity轮换问题可以通过android:configChanges="orientation"来解决。当你这样做时，你会遇到许多其他你甚至没有意识到的问题。
2.  使用 DDMS 测试您的应用程序 - 停止进程按钮。[看到这个](https://stackoverflow.com/questions/11365301/how-to-simulate-android-killing-my-process/)
3.  使用静态变量时要小心。不要以为当您在活动 1 中初始化它们时 - 您将在活动 2 中初始化它们。初始化全局静态的唯一安全位置是 Application 类。
4.  请记住，您可能永远不会看到 onStop 或 onDestroy。关闭文件/数据库，在 onPause 中停止下载器。当您希望应用程序在 BG 中执行某些操作时 - 使用前台服务。

就是这样......希望我帮助我的essey :)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-17T10:25:51.057

首先请看一下这个：

![图像1](../Images/16c3ca2ea1d686a88cda91816868ac5c.png)

> **onPause()** 当系统即将开始恢复之前的活动时调用。这通常用于提交对持久数据的未保存更改、停止动画和其他可能消耗 CPU 的事情等。此方法的实现必须非常快速，因为在此方法返回之前不会恢复下一个活动。如果活动返回到前面，则跟随 onResume()，如果对用户不可见，则跟随 onStop()。
> 
> **onStop()**当活动不再对用户可见时调用，因为另一个活动已经恢复并覆盖了这个活动。这可能是因为正在启动一项新活动，正在将现有活动带到这个活动之前，或者这个活动正在被破坏。如果此活动返回与用户交互，则为 onRestart()，如果此活动即将消失，则为 onDestroy()。

`onPause()`因此，当您按下设备上的“HOME”按钮时，您当前的前台活动将被放置`onStop()`，其他 4 个应该保留`onStop()`

根据谷歌的文件：

> *   如果某个活动在屏幕的前台（在堆栈的顶部），则它处于活动状态或正在运行。
> *   如果一个活动失去焦点但仍然可见（也就是说，一个新的非全尺寸或透明活动的焦点位于您的活动之上），它会被暂停。暂停的活动是完全活动的（它维护所有状态和成员信息并保持连接到窗口管理器），但可以在内存极低的情况下被系统杀死。
> *   如果一个活动被另一个活动完全遮挡，它就会停止。它仍然保留所有状态和成员信息，但是，它不再对用户可见，因此它的窗口是隐藏的，并且当其他地方需要内存时，它通常会被系统杀死。
> *   如果一个活动被暂停或停止，系统可以通过要求它完成或简单地终止其进程来从内存中删除该活动。当它再次显示给用户时，它必须完全重新启动并恢复到之前的状态。

并且，对于流程生命周期：

> **进程生命周期**3\. 后台活动（对用户不可见且已暂停的活动）不再重要，因此系统可以安全地终止其进程以回收其他前台或可见进程的内存。如果它的进程需要被杀死，当用户导航回活动（使其再次在屏幕上可见）时，将使用它之前在 onSaveInstanceState(Bundle) 中提供的 savedInstanceState 调用它的 onCreate(Bundle) 方法，以便它可以在与用户上次离开时​​相同的状态下重新启动。

以上所有引用均来自：[Android开发者参考：Activity](http://developer.android.com/reference/android/app/Activity.html)

经证实，当您启动一些消耗内存的应用程序时，系统可以销毁非活动活动并回收内存。您可以像这样实现：`isFinishing()`在您的活动中，然后使用 DDMS 中的“杀死”按钮来检测您的哪些活动正在被系统删除。但我猜系统会先销毁最旧的。但是，当“启动活动”被回收时，保留其他活动是没有意义的。

**更新**

以下是我从[这里](http://answers.oreilly.com/topic/2692-android-programming-understanding-the-activity-life-cycle/)找到的一些意见：

> 停止状态
> 
> 当一个活动不可见但仍在内存中时，我们说它处于停止状态。停止的活动可以重新回到前面，再次成为跑步活动。或者，它可以被销毁并从内存中删除。
> 
> 系统将活动保持在停止状态，因为用户很可能仍希望很快回到这些活动，并且重新启动已停止的活动比从头开始活动便宜得多。那是因为我们已经将所有对象加载到内存中，只需将它们全部放到前台即可。
> 
> 可以随时从内存中删除已停止的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:58:28.837

> 系统可以只破坏我的一个或一些活动来恢复内存吗？

是的。当需要内存时，Android 会终止在后台运行的活动。杀死一个或全部可能取决于某些条件。对于一个实例暂停或停止可以使android杀死一个活动或一个进程本身。**在活动生命周期**下，您可以获得以下几点[。](http://developer.android.com/reference/android/app/Activity.html)我建议您完全浏览该页面。绝对能解开你的疑惑。

 **> 如果一个活动失去焦点但仍然可见（也就是说，一个新的非全尺寸或透明活动的焦点位于您的活动之上），它会被暂停。暂停的活动是完全活动的（它维护所有状态和成员信息并保持连接到窗口管理器），但可以在内存极低的情况下被系统杀死。
> 
> 如果一个活动被另一个活动完全遮挡，它就会停止。它仍然保留所有状态和成员信息，但是，它不再对用户可见，因此它的窗口是隐藏的，并且当其他地方需要内存时，它通常会被系统杀死。
> 
> 如果一个活动被暂停或停止，系统可以通过要求它完成或简单地终止其进程来从内存中删除该活动。当它再次显示给用户时，它必须完全重新启动并恢复到之前的状态。

* * *

> 系统会杀死我的应用程序的整个过程吗？所有活动都会被很好地破坏吗？

活动与个人有关，而过程与活动组有关。再次查看上面的第三点，它会杀死前面提到的进程。

* * *

> 当我完全杀死我的应用程序时，会发生什么？

它类似于重新启动。同样，第三点会给你一些答案，比如`When it is displayed again to the user, it must be completely restarted and restored to its previous state`

[在此处](http://mobworld.wordpress.com/2010/07/05/memory-management-in-android/)获取有关内存相关内容的更多信息。

编辑：
应用程序中的所有活动都在单个进程中运行。因此，当一个进程被杀死时，所有活动，无论是 5 还是 10 都将被杀死，即重新启动。重新启动将导致您的应用程序从没有保存状态的开头开始。**

# java - 如何为具有不同输入数据的两个常见元素设计 xsd 架构？

> ID：14375723
> 
> 赞同：1
> 
> 时间：2013-01-17T09:21:54.190
> 
> 标签：java, xml, xsd

我需要建议如何设计**xsd 模式**来表示对象。

我有这样的界面

```
public interface Validator{
     boolean validate(Q query);   
} 
```

我有一些实现 -

```
public class SimpleValidator implements Validator{

     private R param;

     public boolean validate(Q Query){
          //some logic with using param   
     }

     public void setParam(R param){
         this.param = param;
     }
}

public class AnotherValidator implements Validator{

     private Data data1;
     private Data data1;

     public boolean validate(Q Query){
          //some logic with using data1 and data2   
     }

     public void setData1(Data data1){
         this.data1 = data1;
     }

     public void setData2(Data data2){
         this.data2 = data2;
     }
} 
```

我有这样的决定——

我创建根元素 -`<xsd:element name="validator" type="validatorType"/>`

而这样的元素——

```
<xsd:element name="simpleValidator" type="simpleValidatorType"  substitutionGroup="validator"/>

<xsd:element name="anotherValidator" type="anotherValidatorType"  substitutionGroup="validator"/> 
```

`simpleValidator`现在我可以在需要的`anotherValidator`地方使用标签了`validator`。例子 -

```
<anotherValidator>
     <data1 value="value1"/>
     <data2 value="value2"/>
</anotherValidator> 
```

问题是，我只想使用 tag `validator`。例如，我想要这样的东西 -

```
<validator type="simpleValidator>
     //simpleValidator data
</validator>

<validator type="anotherValidator>
     //anotherValidator data
</validator> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:46:59.613

我认为这可以[通过 xsi:type 和 Abstract Types 使用运行时多态性](http://msdn.microsoft.com/en-us/library/aa468563.aspx#xmlschmachng_topic04)来完成 我还发现了一个[相关问题](https://stackoverflow.com/questions/188389/xml-schema-for-elements-with-same-name-but-different-sub-structure-depending-on)：可能会有所帮助。

在我的一个项目中，我使用了不同类型的地址，即 shippingAddress、billingAddress ..我们使用这种技术来解决我们的问题。

# actionscript-3 - 拖动东西，Actionscript 2.0 到 3.0

> ID：14375724
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:21:52.023
> 
> 标签：actionscript-3, actionscript, actionscript-2

我已经使用 Actionscipt2.0 完成了拖动和匹配 Flash 的内容，但现在我需要将其更改为 3.0。改了之后，flash就不能再拖东西了，有没有人看一下代码，看我是哪部分转换错了。谢谢。

**动作脚本 2.0 版本：**

```
stop();
var randomPositionFrame = int(Math.random()*9)+1;
content_mc.gotoAndStop(randomPositionFrame);
for(var i=1; i<=5; i++){
eval("content_mc.matching_term_"+i)._alpha = 0;
eval("content_mc.matching_term_"+i).onPress = function(){
    if(this._currentframe == 1){
        this.startDrag();
    }
}
eval("content_mc.matching_term_"+i).onRelease = onMouseUp = function(){
    this.stopDrag();
}

eval("content_mc.matching_desc_"+i)._alpha = 0;
eval("content_mc.matching_desc_"+i).onPress = function(){
    if(this._currentframe == 1){
        this.startDrag();
    }
}
eval("content_mc.matching_desc_"+i).onRelease = onMouseUp = function(){
    this.stopDrag();
}
} 
```

**动作脚本 3.0 版本：**

```
stop();
var randomPositionFrame = int(Math.random()*9)+1;
content_mc.gotoAndStop(randomPositionFrame);
for(var i=1; i<=5; i++){
this["content_mc.matching_term_"+i]._alpha = 0;
 this["content_mc.matching_term_"+i].addEventListener(MouseEvent.MOUSE_DOWN,function():void     {
if(this._currentframe == 1){
        this.startDrag();
    }
}
);

    this["content_mc.matching_term_"+i].addEventListener(MouseEvent.MOUSE_UP,function():void {
stage.addEventListener(MouseEvent.MOUSE_UP, doMouseUp, false, 0, true);

function doMouseUp($evt:MouseEvent):void
{
this.stopDrag();
}
}
);

this["content_mc.matching_desc_"+i]._alpha = 0;
    this["content_mc.matching_term_"+i].addEventListener(MouseEvent.MOUSE_DOWN,function():void     {
    if(this._currentframe == 1){
        this.startDrag();
    }
}
);

this["content_mc.matching_desc_"+i].addEventListener(MouseEvent.MOUSE_UP,function():void {
this.stopDrag();
}
);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:46:34.820

在您的鼠标侦听器中，您必须从事件中获取目标/对象。表示您将侦听器应用到的目标。

创建两个侦听器函数并将它们应用于您的 addEventListener 调用：

```
function mouseDownHandler(e:MouseEvent):void
{
    var object = e.target;
    object.startDrag();
}

function mouseUpHandler(e:MouseEvent):void
{
    var obj = e.target;
    obj.stopDrag();
} 
```

像这样使用 addEventListener：

```
yourObj.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
yourObj.addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:04:50.820

这行不通

```
 this["content_mc.matching_term_"+i] 
```

您需要分别与每个对象交谈。所以先`this`然后`content_mc`。

```
 this.content_mc["matching_term_"+i] 
```

可能有点帮助。

# angularjs - 如何将 Google 图表集成为 AngularJs 指令？

> ID：14375728
> 
> 赞同：21
> 
> 时间：2013-01-17T09:21:59.950
> 
> 标签：angularjs, google-visualization

有一些将 Google 图表集成为 AngularJs 指令的示例。

喜欢这个：[http ://plnkr.co/edit/YzwjuU?p=preview](http://plnkr.co/edit/YzwjuU?p=preview)

**更新**：我想避免在引导整个应用程序之前等待谷歌图表准备好（如上面的示例所示）：

```
 google.setOnLoadCallback(function() {
        angular.bootstrap(document.body, ['myApp']);
    }); 
```

有没有办法在单个模块中而不是在整个应用程序中执行此操作？

**更新 2：**我创建了我的 plunker，它无需等待回调即可工作，但我不确定它是否适用于所有情况。

[http://plnkr.co/edit/7UUfcq4dD7nd4MylB4ni](http://plnkr.co/edit/7UUfcq4dD7nd4MylB4ni)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-03T13:07:26.570

**[这是AngularJs Google Chart Tools 指令](http://jessemon.blogspot.com/2013/09/angular-google-chart-example.html)**的一个很好的例子。

*   [示例 plunker](http://plnkr.co/edit/3RJ2HS?p=info)。

## 指示

这些相同的指令在 plunker 本身中。

1.  [从 github 下载 ng-google-chart.js](https://raw.githubusercontent.com/angular-google-chart/angular-google-chart/master/ng-google-chart.js)并将脚本标记添加到您的 html。
2.  创建一个像这样的div：

    `<div google-chart chart="chart" style="{{chart.cssStyle}}"> </div>`

3.  像这样将“googlechart”添加到您的模块中：

    `angular.module('myApp',[ 'googlechart', ...`

4.  填充`$scope.chart`这样的：

```
{
  "type": "ColumnChart",
  "cssStyle": "height:200px; width:300px;",
  "data": {
    "cols": [
      {
        "id": "month",
        "label": "Month",
        "type": "string",
        "p": {}
      },
      {
        "id": "laptop-id",
        "label": "Laptop",
        "type": "number",
        "p": {}
      },
      {
        "id": "desktop-id",
        "label": "Desktop",
        "type": "number",
        "p": {}
      },
      {
        "id": "server-id",
        "label": "Server",
        "type": "number",
        "p": {}
      },
      {
        "id": "cost-id",
        "label": "Shipping",
        "type": "number"
      }
    ],
    "rows": [
      {
        "c": [
          {
            "v": "January"
          },
          {
            "v": 19,
            "f": "42 items"
          },
          {
            "v": 12,
            "f": "Ony 12 items"
          },
          {
            "v": 7,
            "f": "7 servers"
          },
          {
            "v": 4
          }
        ]
      },
      {
        "c": [
          {
            "v": "February"
          },
          {
            "v": 13
          },
          {
            "v": 1,
            "f": "1 unit (Out of stock this month)"
          },
          {
            "v": 12
          },
          {
            "v": 2
          }
        ]
      },
      {
        "c": [
          {
            "v": "March"
          },
          {
            "v": 24
          },
          {
            "v": 0
          },
          {
            "v": 11
          },
          {
            "v": 6
          }
        ]
      }
    ]
  },
  "options": {
    "title": "Sales per month",
    "isStacked": "true",
    "fill": 20,
    "displayExactValues": true,
    "vAxis": {
      "title": "Sales unit",
      "gridlines": {
        "count": 6
      }
    },
    "hAxis": {
      "title": "Date"
    }
  },
  "formatters": {},
  "displayed": true
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-19T23:09:52.413

正如您已经知道的那样，您可以在 html 或 body 标记中初始化 Angular，而无需等待谷歌图表。

为确保您在 google 图表 JavaScript 代码准备好之前不会尝试渲染图表，我将在 google.setOnLoadCallback 的回调函数中设置指令 $watch 一个新的控制器 $scope 属性/标志。在 $watch 回调中，检查以确保设置了标志，然后进行初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-03T01:41:01.100

有一个将 Google Charts 包装到 AngularJS 指令中的 Github 项目

[https://github.com/angular-google-chart/angular-google-chart](https://github.com/angular-google-chart/angular-google-chart)

[http://angular-google-chart.github.io/angular-google-chart/](http://angular-google-chart.github.io/angular-google-chart/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-05T18:50:19.010

我在 Angular 中遇到了周期性问题，谷歌图表 API 没有按时加载以从 $http 获取中接收数据。数据有时（并非总是）**首先**出现，然后在回调中使用它会失败，并显示“google.visualization.DataTable 不是函数”

在回调返回数据内部：

```
var dataTable = new google.visualization.DataTable(data); 
```

为了解决这个问题，我在 ng-google-chart.js 中发现有一个名为“googleChartApiPromise”的承诺，所以我注入了它，并将刷新调用包装在其中：

```
googleChartApiPromise.then(function() {
    refreshCharts();
}); 
```

这似乎可以解决问题。

# java - 而真正的 try catch 嵌套

> ID：14375732
> 
> 赞同：0
> 
> 时间：2013-01-17T09:22:05.530
> 
> 标签：java, while-loop, try-catch, numberformatexception

我是 Java 新手。我希望代码在用户输入类型错误的地方重复，而不是从头开始。在“输入 b:”或“输入 c:”时，它会回到开头的“输入 a:”。我希望它只重复，其中用户输入是 a、b、c。提前致谢。

```
public static void main(String[] args)
{
Scanner sc = new Scanner(System.in);
boolean itsANumber = true;
while (itsANumber)
{
    System.out.print("Enter a: ");

    try
    {
    a = Double.parseDouble(sc.nextLine());

    System.out.print("Enter b: ");
    try
    {
        b = Double.parseDouble(sc.nextLine());

        System.out.print("Enter c: ");
        try
        {
        c = Double.parseDouble(sc.nextLine());
        if (a == 0)
        {
            aZero();
        } else

        {
            aNotZero();
        }

        } catch (NumberFormatException nfe) 
        {
        System.out
            .println("That's not a number, please try again!");
        }

    } catch (NumberFormatException nfe) 
    {
        System.out
            .println("That's not a number, please try again!");
    }

    } catch (NumberFormatException nfe) 
    {
    System.out.println("That's not a number, please try again!");
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:24:04.263

引入一个要求输入数字的方法并调用它 3 次。在方法内部，您将`while`使用`try-catch`.

```
public static void main(String... args) {
   Scanner sc = new Scanner(System.in);
   double
     a = askForDouble(sc, "a"),
     b = askForDouble(sc, "b"),
     c = askForDouble(sc, "c");
}
static double askForDouble(Scanner sc, String varName) {
   for (;/*ever*/;) {
     System.out.format("Enter %s: ", varName);
     System.out.flush();
     try {
       return Double.parseDouble(sc.nextLine());
     } catch (NumberFormatExcetpion() {
       System.out.println("That's not a number, please try again!");
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:02:05.477

如果需要，您可以通过简单的空检查来尝试如下，这是原始代码，可能需要更改

```
Double a = null;
Double b = null;
Double c = null;
Scanner sc = new Scanner(System.in);
while(true){

    if(a != null){              
        System.out.println("Enter a :");
        a = readFromInStream(sc, "a");
            if(a == null) continue;
    }
    if(b != null){              
        System.out.println("Enter b :");
        b = readFromInStream(sc, "b");
            if(b == null) continue;
    }
    if(c != null){              
        System.out.println("Enter c :");
        c = readFromInStream(sc, "c");
            if(c == null) continue;
    }
    if(a != null && b != null && c != null){
        break;
    }
}

private Double readFromInStream(Scanner sc, String varStr){
    Double temp = null;
    try
    {
        temp = Double.parseDouble(sc.nextLine());
    }catch(NumberFormatException e){
        System.out.println("Invalid value for :"+varStr);
    }
    return temp;
} 
```

# asp.net-mvc-4 - MVC 4 Bundle - 无法在 MVC 项目内容文件夹之外捆绑内容，例如 css/javascript

> ID：14375735
> 
> 赞同：2
> 
> 时间：2013-01-17T09:22:07.650
> 
> 标签：asp.net-mvc-4, bundle

对于 MVC 4 项目，我需要包含/捆绑驻留在 MVC 项目之外的内容文件，例如 CDN 中的某处。

这有效：

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/Css/site.css")); 
```

这不起作用：

```
bundles.Add(newStyleBundle("~/Content/css").Include("D:/Media/Styles/Css/site.css")); 
```

我得到的错误是：

> URL 'D:/Media/Styles/Css/site.css' 无效。仅允许应用程序相对 URL (~/url)。参数名称：virtualPaths

简而言之，是否有可能将资产文件驻留在项目的 Content 文件夹之外，例如在使用 CDN 时？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:28:29.423

您只能使用相对路径和 CDN。资源可以位于 Content 文件夹之外，因此您可以将它们放在站点内的不同文件夹中。

[您也可以像这样使用 CDN](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)：

```
public static void RegisterBundles(BundleCollection bundles)
{

    bundles.UseCdn = true;   //enable CDN support

    //add link to jquery on the CDN
    var jqueryCdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js";

    bundles.Add(new ScriptBundle("~/bundles/jquery",
                jqueryCdnPath).Include(
                "~/Scripts/jquery-{version}.js"));

    // Code removed for clarity.
} 
```

# jquery - 获取范围外图像的宽度/高度

> ID：14375737
> 
> 赞同：1
> 
> 时间：2013-01-17T09:22:11.600
> 
> 标签：jquery, jquery-animate

我有一个鼠标悬停效果，可以增强图像，并在鼠标移出时将图像缩放回其原始大小。

```
$("div.elby_product_thumb img").mouseover(function() {
    var originalHeight = $(this).width();
    var originalWidth = $(this).height();

    $(this).css('border','2px solid #f2f2f2');
    $(this).css('z-index','500');
    $(this).stop().animate({
        "top": "-50px",
        "left": "-50px",
        "width": "200px",
        "height": "200px"
    }, 200);
}).mouseout(function(){
    $(this).css('border','none');
    $(this).css('z-index','1');
    $(this).stop().animate({
        "top": "0px",
        "left": "0px",
        "width": originalWidth + "px",
        "height": originalHeight + "px"
    }, 200);
}); 
```

虽然这导致`Uncaught ReferenceError: originalWidth is not defined`因为`originalWidth/Height`不在 mouseout 处理函数的范围内。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:23:21.503

在外部声明变量`mouseover`并`mouseout`使其成为全局变量并在内部赋值`mouseover`

```
var originalHeight;
var originalWidth;   

$("div.elby_product_thumb img").mouseover(function(){
      originalHeight = $(this).width();
      originalWidth = $(this).height();
     $(this).css('border','2px solid #f2f2f2');
        $(this).css('z-index','500');
        $(this).stop().animate({
            "top": "-50px",
            "left": "-50px",
            "width": "200px",
            "height": "200px"
            }, 200);
}).mouseout(function(){
        $(this).css('border','none');
        $(this).css('z-index','1');
        $(this).stop().animate({
            "top": "0px",
            "left": "0px",
            "width": originalWidth + "px",
            "height": originalHeight + "px"
        }, 200);
}); 
```

**编辑：**如果您不需要在窗口范围内声明变量以使其完全全局化，您可以按照@roasted 的建议为这两个事件制作外壳。

```
(function(){
   var originalHeight;
   var originalWidth;   

   $("div.elby_product_thumb img").mouseover(function(){
    //your code
   }).mouseout(function(){
    //your code
   });
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:27:18.597

首先，您可以使用`data`参数来存储原始大小。其次，您可以缓存选择器并减少对它的调用次数，如下所示：

```
$("div.elby_product_thumb img").mouseover(function() {
    var $el = $(this);
    $el
        .data('originalHeight', $el.height())
        .data('originalWidth', $el.width())
        .css({
            'border': '2px solid #f2f2f2',
            'z-index': '500'
        })
        .stop().animate({
            "top": "-50px",
            "left": "-50px",
            "width": "200px",
            "height": "200px"
        }, 200);
}).mouseout(function() {
    var $el = $(this);
    $el
        .css({
            'border': 'none',
            'z-index': '1'
        })
        .stop().animate({
            "top": "0px",
            "left": "0px",
            "width": $(el).data('originalWidth') + "px",
            "height": $(el).data('originalHeight') + "px"
        }, 200);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:28:02.197

我认为您可以在 mouseover 函数之外简单地定义这两个变量“originalHeight”、“originalWidth”。然后你可以简单地在“mouseover”和“mouseout”中使用它，作为这两个事件的全局。

# ruby - sh via Ruby：在同一行中运行 ulimit 和程序

> ID：14375742
> 
> 赞同：0
> 
> 时间：2013-01-17T09:22:36.940
> 
> 标签：ruby, sh, ulimit

我正在尝试通过以下命令从 Ruby 运行一些计算密集型程序：

```
%x(heavy_program) 
```

但是，我有时想限制程序的运行时间。所以我试着做

```
%x(ulimit -St #{max_time} & heavy_program) 
```

但它似乎失败了；即使我在 Ruby 外部运行的 sh shell 中尝试，“&”技巧也不起作用。

我敢肯定有更好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:31:24.383

使用`&&`或`;`：

```
%x(ulimit -St #{max_time} && heavy_program)

%x(ulimit -St #{max_time}; heavy_program) 
```

但是使用`ulimit`可能不是您真正需要的，请考虑以下代码：

```
require 'timeout'
Timeout(max_time){ %x'heavy_program' } 
```

`ulimit`限制**CPU 时间**，并`timeout`限制总运行时间，因为我们人类通常会计算它。

因此，例如，如果您`sleep 999999`使用 - 运行 shell 命令，`ulimit -St 5`它不会运行 5 秒，而是运行所有 999999，因为`sleep`使用的**CPU 时间可以忽略不计**

# python-sphinx - 狮身人面像休息错误枚举列表对齐

> ID：14375743
> 
> 赞同：0
> 
> 时间：2013-01-17T09:22:56.757
> 
> 标签：python-sphinx

我使用 sphinx-ReST 为 TP 编写了文档。我很难正确对齐枚举列表。正如您在下面的页面中看到的，如果我`code-block`在枚举列表中添加指令，则对齐是错误的。

[http://gvallver.perso.univ-pau.fr/vasptp/part_3_NiO.html](http://gvallver.perso.univ-pau.fr/vasptp/part_3_NiO.html)

有关页面的完整源代码，请参见左侧的源代码。以下是一个简短的示例：

```
normal text .... bla bla

    1\. question 1

        1.a sub question 1

        1.b sub question 2

.. code-block:: console

    mkdir toto

..

        1.c sub question 3 
```

如果您使用上述代码，则问题 1.c 与问题 1.a 和 1.b 不一致，请参见下文。

![在此处输入图像描述](../Images/22f9aa35c07719e7346f9bb7a6919d50.png)

# c# - 在 .NET Framework 4.0 的 AppDomain 中运行 codeCom 代码

> ID：14375744
> 
> 赞同：0
> 
> 时间：2013-01-17T09:22:59.710
> 
> 标签：c#, appdomain, vbcodeprovider

如何在 NET Framework 4.0 中运行当前 AppDomain 中的编译代码？下面的代码可以在 NET Framework 3.5 中运行，但是 objCompilerParameters.Evidence 在 NET Framework 4.0 中已经过时了，那么如何解决呢？

```
 protected void Button1_Click(object sender, EventArgs e)
{       
    VBCodeProvider objVBCodeProvider = new VBCodeProvider();
    CompilerParameters objCompilerParameters = new CompilerParameters();
    objCompilerParameters.ReferencedAssemblies.Add("System.dll");
    objCompilerParameters.Evidence = AppDomain.CurrentDomain.Evidence;
    objCompilerParameters.CompilerOptions = string.Empty;
    objCompilerParameters.GenerateExecutable = false;
    objCompilerParameters.GenerateInMemory = false;
    objCompilerParameters.IncludeDebugInformation = false;
    objCompilerParameters.TreatWarningsAsErrors = false;
    objCompilerParameters.WarningLevel = 0;
  objCompilerParameters.ReferencedAssemblies.Add(this.GetType().Assembly.Location);    

    // source contains the code, is of type string
    CompilerResults cr = objVBCodeProvider.CompileAssemblyFromSource(objCompilerParameters,source);
    if (cr.Errors.HasErrors)
    { Console.WriteLine("Error");
        foreach (CompilerError err in cr.Errors)
        { Console.WriteLine(err.ErrorText); } }
    else
    {
        // Some things...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:49:38.087

安全策略不再应用于应用程序（请注意，.NET Framework 配置工具已在 Framework 4 中消失）。在桌面上运行的应用程序以完全信任的方式执行。但是，您可以沙箱应用程序并以部分信任的方式运行它们。

您将必须`CompilerParameters.Evidence`完全删除对的引用。

如果您不希望所有代码都被视为安全关键，则可以使用[SecurityRulesAttribute](http://msdn.microsoft.com/en-us/library/system.security.securityrulesattribute.aspx)和[SecurityTranparentAttribute 。](http://msdn.microsoft.com/en-us/library/system.security.securitytransparentattribute.aspx)

阅读有关[安全透明度的](http://msdn.microsoft.com/en-us/library/ee191569%28v=vs.110%29.aspx)信息。在框架 4 中添加了[第二个级别](http://msdn.microsoft.com/en-us/library/dd233102.aspx)。

摘自二级透明文章：

> 如果您不指定任何属性，则运行时会将所有代码解释为安全关键代码，除非安全关键代码违反了继承规则（例如，在覆盖或实现透明虚拟或接口方法时）。在这些情况下，这些方法是安全关键的。不指定任何属性会导致公共语言运行时为您确定透明度规则。

ChrisWue 建议的是另一种选择。沙箱您的应用程序。有关如何在沙盒中执行程序集的快速介绍，请查看[SecurityManager.GetStandardSandbox](http://msdn.microsoft.com/en-us/library/system.security.securitymanager.getstandardsandbox%28v=vs.100%29.aspx)上的示例。

PS：据我了解，他们对 CAS 进行这些更改的原因是因为正确使用它非常复杂。`RequestMinimum`我仍然对,`RequestOptional`和`RequestRefuse`安全操作感到困惑。

# javascript - 解析对象点表示法以检索对象的值

> ID：14375753
> 
> 赞同：0
> 
> 时间：2013-01-17T09:23:11.203
> 
> 标签：javascript

我发现自己正在为一个小问题而苦苦挣扎。假设我有一个对象：

```
var foo = {
    bar: {
        baz: true
    }
}; 
```

现在我也有一个 String `'foo.bar.baz'`。我现在想使用字符串从对象中检索值。

请注意：这只是一个示例，解决方案需要是动态的。

**更新：**

我还需要变量名是动态的并从字符串中解析出来。我也不能确定我的变量是窗口的属性。

我已经使用 构建了一个解决方案`eval`，但我认为这很难看：http: [//jsfiddle.net/vvzyX/](http://jsfiddle.net/vvzyX/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:27:25.570

例如，

```
function get(obj, path) {
    return path.split('.').reduce(function(obj, p) {
        return obj[p]
    }, obj);
} 
```

演示：

```
tree = {
    foo: {
        bar: 1,
        baz: { quux: 3 },
    },
    spam: 1
}

console.log(get(tree, 'foo.baz.quux')) // 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:27:11.867

您可以这样做：

```
function getValue(namespace, parent) {
    var parts = namespace.split('.'),
        current = parent || window;
    for (var i = 0; i < parts.length; i += 1) {
        if (current[parts[i]]) {
            current = current[parts[i]];
        } else {
          if (i >= parts.length - 1)
            return undefined;
        }
    }
    return current;
}
var foo = {
    bar: {
        baz: true
    }
};
console.log(getValue('foo.bar.baz')); //true 
```

函数的第一个参数是命名空间（点分隔值），第二个参数是`parent`对象，如果没有提供 parent，则`window`使用。

使用 parent 参数的另一个示例：

```
var str = 'foo.bar.baz';
    foo = {
       bar: {
          baz: true
       }
    };

result = getValue(str, foo);
console.log(result); 
```

这是[jsfiddle](http://jsfiddle.net/vvzyX/2/)中的一个示例。

YUI 中使用了类似的方法。他们的方法被称为命名空间模式。主要好处是模拟包/命名空间。这个脚本和命名空间模式的唯一区别是命名空间函数创建嵌套结构而不是只返回值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T09:27:30.017

试试这个：

```
var name = [window].concat('foo.bar.baz'.split('.')).reduce(function(prev, curr) {
    return prev[curr];
});

console.log(name);

// -> 'true' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:26:58.673

我能想到的是首先使用字符串拆分将该字符串拆分为一个数组，然后通过`[]`循环访问该对象的属性来访问该对象

# cakephp - 如何优化 CakePHP v2 中的视图

> ID：14375756
> 
> 赞同：0
> 
> 时间：2013-01-17T09:23:27.667
> 
> 标签：cakephp

我有很多视图，例如商店、类别、产品、浇头……并且经常使用硬编码的模型名称。有时单数或复数。就像在*`Shop's index.ctp`*

```
<ul class="nav nav-tabs">
    <li><?php echo $this->Html->link(__('New Shop'), array( 'action' => 'add'));?></li>
</ul>

<div class="page-header">
    <h1><?php echo __('Shops'); ?></h1>
</div> 
```

和

```
<td><?php echo $shop['Shop']['id']; ?>
<td><?php echo $shop['Shop']['name']; ?>
<td><?php echo $shop['Shop']['street']; ?>
... 
```

有没有更好的方法来动态使用模型名称？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:27:03.820

好吧，您可以`$myshop = $shop['Shop'];`在代码顶部添加以便使用`$myshop['id']`，但仅此而已。在需要的地方使用变量并不奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:03:37.337

如果你真的想要你可以做与控制器相同的事情， $this->modelClass 属性包含模型名称。

在控制器中

```
$this->set('modelClass', $this->modelClass); 
```

在视图中：

```
echo $shop[$modelClass]['field']; 
```

# vim - 将变量传递给 tabnew

> ID：14375757
> 
> 赞同：1
> 
> 时间：2013-01-17T09:23:28.190
> 
> 标签：vim

我有一个像这样的变量集：

```
let filename="/tmp/" . system('date +"%Y%m%d"') . ".txt" 
```

如何使用该变量作为文件名打开一个新缓冲区，例如`tabnew /tmp/20130117.txt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:09:43.430

不需要系统调用，尽管 vim 的文档确实提到 strftime 并非在所有系统上都可用（我假设只有一些深奥的系统）：

```
if exists('*strftime')
  let fn = strftime('/tmp/%Y%m%d')
  exe "tabnew" fn
endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:32:12.553

从[Vim 中得到启发：How do I chdir to path in a variable](https://stackoverflow.com/questions/13518771/vim-how-do-i-chdir-to-path-in-a-variable?rq=1)，我做了：

```
let $FILENAME="/tmp/" . system('date +"%Y%m%d"')
tabnew $FILENAME 
```

我只需要弄清楚如何删除系统函数的字符串输出末尾的“@”字符。

# asp.net - UltraWebGrid Infragistics asp.net 上的 InvalidCastException

> ID：14375760
> 
> 赞同：0
> 
> 时间：2013-01-17T09:23:33.603
> 
> 标签：asp.net, infragistics

我得到一个

```
 InvalidCastException was unhandled by user: 
   Conversion from String "ORDERDATE" to type "Integer" is not valid. 
```

当它到达带有`band.SortedColumns`. 知道为什么我会收到此错误吗？

我有相同的代码`infragistics UltraWinGrid` `vb.net`，但我没有收到该错误。

```
 UltraWebGrid1.DataSource = Nothing
        myDataName = Generic.getPrevOrder(dt, username)
        UltraWebGrid1.DataSource = dt

        Dim band As Infragistics.WebUI.UltraWebGrid.UltraGridBand = UltraWebGrid1.DisplayLayout.Bands(0)
        UltraWebGrid1.DisplayLayout.ViewType = Infragistics.WebUI.UltraWebGrid.ViewType.OutlookGroupBy

        band.SortedColumns.Add(band.Columns("ORDERDATE"), True)
        band.SortedColumns.Add(band.Columns("ORDERID"), False) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:35:09.693

这可能没什么，但出于好奇，如果你交换这些会发生什么：

```
band.SortedColumns.Add(band.Columns("ORDERDATE"), True)
band.SortedColumns.Add(band.Columns("ORDERID"), False) 
```

到

```
band.SortedColumns.Add(band.Columns("ORDERID"), False)
band.SortedColumns.Add(band.Columns("ORDERDATE"), True) 
```

可能是布局 ( `UltraWebGrid1.DisplayLayout.Bands(0)`) 的架构与预期的不同？我不明白为什么它应该有所作为，但值得排除它。

# django-authentication - django md5 auth ajax

> ID：14375763
> 
> 赞同：0
> 
> 时间：2013-01-17T09:23:50.187
> 
> 标签：django-authentication

我想将 javascript 加密密码发送到服务器 URL (/account/login) 并以这种方式获得身份验证状态：

```
var headers = {"X-CSRFToken": geo.helpers.readCookie('csrftoken')};
yajax.send({
    "method": "POST",
    "url": "/account/login/",
    "data": {"login": "foo", "password": md5('533')},
    "header": headers,
    "success": function(response) { alert(response) }
}) 
```

有没有办法使用标准机制验证不是普通密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:31:01.660

而不是。您可能必须基于 django User 模型实现自己的登录方法。

# javascript - 在 HTML 页面上嵌入 VLC 插件

> ID：14375767
> 
> 赞同：4
> 
> 时间：2013-01-17T09:23:52.143
> 
> 标签：javascript, html, plugins, vlc

我有一个 html 文件 ( `getStream.html`)，它从某个 url 获取流并显示它。代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Vids</title>
    <link href="main.css" rel="stylesheet" type="text/css" />
</head>

<body onload='player("http://mystreamaddress:8080");'>

<div id="player">
    <object type="application/x-vlc-plugin" 
      id="vlcplayer" 
      width="864px"
      height="540px" 
      classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921">  
      <param name="Volume" value="100" />
      <param name="AutoPlay" value="true" />
      <param name="AutoLoop" value="false" />
    </object>
</div>

<div id="controls">
  <input type="button" onclick="play();" value="Play" />
  <input type="button" onclick="pause();" value="Pause" />
  <input type="button" onclick="stop();" value="Stop" />
  <input type="button" onclick="mute();" value="Mute" />
</div>

<script type="text/javascript" language="javascript">
    var vlc = document.getElementById("vlcplayer");
    function player(vid) {
    try {
        var options = new Array(":aspect-ratio=16:10", "--rtsp-tcp", ":no-video-title-show");
      var id = vlc.playlist.add(vid,'Video',options);
      vlc.playlist.playItem(id);
      vlc.video.fullscreen = true;
      //vlc.video.toggleFullscreen();
    }
    catch (ex) {
      alert(ex);
    }
    }       
    function mute(){
    vlc.audio.toggleMute();
  }

    function play(){
    vlc.playlist.play();
  }

    function stop(){
    vlc.playlist.stop();
  }

    function pause(){ 
    vlc.playlist.togglePause();
  } 

  function fullscreen(){
    vlc.video.toggleFullscreen();
  }

</script>

</body>

</html> 
```

如果我的电脑上有这个页面并尝试打开它（使用 IE 7/8/9），一切正常，但是如果把这个页面放在我的服务器上，然后我从这样的 url 访问它：`http://myserver/direcortyOfMyhtmlFile/getStream.html`

打开页面并加载按钮，但我收到以下错误：

在 IE8 和 IE9 中： ![IE9、IE8错误](../Images/298e755a31d7ef095571bbea8c1c9993.png)

英文应该是这样的：“不可能获得属性'add'的值：对象为空或未定义”

在 IE7 中： ![在此处输入图像描述](../Images/e8945fd9ec3c185d34e3ee4df70d82e1.png)

这些错误似乎指的是我的 html 中的对象，但这对我来说很奇怪，因为同一个页面在本地工作没有问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-18T08:05:32.407

`test.html`这将有助于如何使用 VLC WebAPI。

`test.html`位于安装 VLC 的目录中。

**例如** `C:\Program Files (x86)\VideoLAN\VLC\sdk\activex\test.html`

以下代码是来自`test.html`.

**HTML：**

```
<object classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" width="640" height="360" id="vlc" events="True">
  <param name="MRL" value="" />
  <param name="ShowDisplay" value="True" />
  <param name="AutoLoop" value="False" />
  <param name="AutoPlay" value="False" />
  <param name="Volume" value="50" />
  <param name="toolbar" value="true" />
  <param name="StartTime" value="0" />
  <EMBED pluginspage="http://www.videolan.org"
    type="application/x-vlc-plugin"
    version="VideoLAN.VLCPlugin.2"
    width="640"
    height="360"
    toolbar="true"
    loop="false"
    text="Waiting for video"
    name="vlc">
  </EMBED>
</object> 
```

**JavaScript：**

您可以从中获取 vlc 对象`getVLC()`。
它适用于 IE 10 和 Chrome。

```
function getVLC(name)
{
    if (window.document[name])
    {
        return window.document[name];
    }
    if (navigator.appName.indexOf("Microsoft Internet")==-1)
    {
        if (document.embeds && document.embeds[name])
            return document.embeds[name];
    }
    else // if (navigator.appName.indexOf("Microsoft Internet")!=-1)
    {
        return document.getElementById(name);
    }
}

var vlc = getVLC("vlc");

// do something.
// e.g. vlc.playlist.play(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T10:24:15.427

我找到了这个：

```
<embed type="application/x-vlc-plugin"
pluginspage="http://www.videolan.org"version="VideoLAN.VLCPlugin.2"  width="100%"        
height="100%" id="vlc" loop="yes"autoplay="yes" target="http://10.1.2.201:8000/"></embed> 
```

我在您的代码中看不到任何地方...。我认为这就是您所需要的，目标就是您的视频的位置...

这里是关于 vlc 插件的更多信息：
[http ://wiki.videolan.org/Documentation%3aWebPlugin#Input_object](http://wiki.videolan.org/Documentation%3aWebPlugin#Input_object)

另一件要检查的是视频文件的地址是否正确......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T12:35:49.870

我在网络的某个地方找到了这段代码。也许它对你有帮助，我给你一个更新到目前为止我为同样的目的提供了它......也许我不......谁知道......这里有所有的nogodders和dobedders：-/

```
function runVLC(target, stream)
{
var support=true
var addr='rtsp://' + window.location.hostname + stream
if ($.browser.msie){
$(target).html('<object type = "application/x-vlc-plugin"' + 'version =  
"VideoLAN.VLCPlugin.2"' + 'classid = "clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"' + 
'events = "true"' + 'id = "vlc"></object>')
}
else if ($.browser.mozilla || $.browser.webkit){
$(target).html('<embed type = "application/x-vlc-plugin"' + 'class="vlc_plugin"' + 
'pluginspage="http://www.videolan.org"' + 'version="VideoLAN.VLCPlugin.2" ' + 
'width="660" height="372"' + 
'id="vlc"' + 'autoplay="true"' + 'allowfullscreen="false"' + 'windowless="true"' + 
'mute="false"' + 'loop="true"' + '<toolbar="false"' + 'bgcolor="#111111"' + 
'branding="false"' + 'controls="false"' + 'aspectRatio="16:9"' + 
'target="whatever.mp4"></embed>')
}
else{
support=false
$(target).empty().html('<div id = "dialog_error">Error: browser not supported!</div>')
}
if (support){
var vlc = document.getElementById('vlc')
if (vlc){
var opt = new Array(':network-caching=300')
try{
var id = vlc.playlist.add(addr, '', opt)
vlc.playlist.playItem(id)
}
catch (e){
$(target).empty().html('<div id = "dialog_error">Error: ' + e + '<br>URL: ' + addr + 
'</div>')
}
}
}
}
/* $(target + ' object').css({'width': '100%', 'height': '100%'}) */ 
```

问候

哎呀

我现在将整个废话简化为：

```
function runvlc(){
var target=$('body')
var error=$('#dialog_error')
var support=true
var addr='rtsp://../html/media/video/TESTCARD.MP4'
if (navigator.userAgent.toLowerCase().indexOf("msie")!=-1){
target.append('<object type = "application/x-vlc-plugin"' + 'version = "
VideoLAN.VLCPlugin.2"' + 'classid = "clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"' + 
'events = "true"' + 'id = "vlc"></object>')
}
else if (navigator.userAgent.toLowerCase().indexOf("msie")==-1){
target.append('<embed type = "application/x-vlc-plugin"' + 'class="vlc_plugin"' + 
'pluginspage="http://www.videolan.org"' + 'version="VideoLAN.VLCPlugin.2" ' + 
'width="660" height="372"' + 
'id="vlc"' + 'autoplay="true"' + 'allowfullscreen="false"' + 'windowless="true"' + 
'mute="false"' + 'loop="true"' + '<toolbar="false"' + 'bgcolor="#111111"' + 
'branding="false"' + 
'controls="false"' + 'aspectRatio="16:9"' + 'target="whatever.mp4">
</embed>')
}
else{
support=false
error.empty().html('Error: browser not supported!')
error.show()
if (support){
var vlc=document.getElementById('vlc')
if (vlc){
var options=new Array(':network-caching=300') /* set additional vlc--options */
try{ /* error handling */
var id = vlc.playlist.add(addr,'',options)
vlc.playlist.playItem(id)
}
catch (e){
error.empty().html('Error: ' + e + '<br>URL: ' + addr + '')
error.show()
}
}
}
}
}; 
```

没有让它在ie中工作...... 2b继续......

问候

哎呀

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T06:34:46.277

不幸的是，IE 和 VLC 现在并不能真正工作......我在 vlc 论坛上找到了这个：

```
VLC included activex support up until version 0.8.6, I believe. At that time, you could
access a cab on the videolan and therefore 'automatic' installation into IE and Firefox
family browsers was fine. Thereafter support for activex seemed to stop; no cab, no
activex component.

VLC 1.0.* once again contains activex support, and that's brilliant. A good decision in
my opinion. What's lacking is a cab installer for the latest version. 
```

这基本上意味着，即使您找到了使其工作的方法，任何试图在 IE 中查看您网站上的视频的人都必须下载并安装整个 VLC 播放器程序才能使其在 IE 中工作，而用户可能不会想要这样做。我无法让您的代码在我男朋友计算机上的 Firefox 或 IE8 中运行，尽管我可能没有正确输入视频地址......我收到一些关于没有视频输出的消息......

我会猜测并说它可能在本地对您有用，因为您安装了 VLC，但您的服务器没有。不幸的是，你可能不得不使用 Windows 媒体播放器或类似的东西（微软很擅长强迫人们使用他们的东西！）

如果您想知道，似乎没有 cab 文件的原因是因为签署了 active-x 控件的成本。

如果对您有用的话，让您的页面对 firefox 和 chrome 用户使用 VLC 以及对 IE 用户使用 Windows Media Player 是相当简单的。

# jquery - 如何在数据表中显示空数据消息

> ID：14375771
> 
> 赞同：76
> 
> 时间：2013-01-17T09:24:06.973
> 
> 标签：jquery, json, asp.net-mvc, datatables

假设我有时从服务器获取空数据，我想在 DataTables 中显示 No Data found 消息？这怎么可能？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-17T10:45:23.300

如果要自定义显示在空表上的消息，请使用：

```
$('#example').dataTable( {
    "oLanguage": {
        "sEmptyTable":     "My Custom Message On Empty Table"
    }
} ); 
```

从 Datatable 1.10 开始，您可以执行以下操作：

```
$('#example').DataTable( {
    "language": {
        "emptyTable":     "My Custom Message On Empty Table"
    }
} ); 
```

* * *

有关该表的**完整**可用数据表自定义消息，请查看以下链接[参考/选项/语言](https://datatables.net/reference/option/language)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-07-31T08:45:23.003

更高版本`dataTables`具有以下`language`设置（取自[此处](https://datatables.net/examples/basic_init/language.html)）：

*   `"infoEmpty"`- 表中没有记录时显示
*   `"zeroRecords"`- 没有符合过滤条件的记录时显示

例如

```
$('#example').DataTable( {
    "language": {
        "infoEmpty": "No records available - Got it?",
    }
}); 
```

注意：由于属性名称不包含任何特殊字符，您可以删除引号：

```
$('#example').DataTable( {
    language: {
        infoEmpty: "No records available - Got it?",
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-19T18:57:17.793

游戏迟到了，但您也可以使用[本地化文件](https://datatables.net/plug-ins/i18n/)

DataTable 提供了一个`.json`本地化文件，其中包含密钥`sEmptyTable`和相应的本地化消息。

例如，只需在上面的[链接](https://datatables.net/plug-ins/i18n/#Translations)下载本地化的 json 文件，然后像这样初始化你`Datatable`：

```
$('#example').dataTable( {
    "language": {
        "url": "path/to/your/json/file.json"
    }
}); 
```

恕我直言，这更干净，因为您的本地化内容位于外部文件中。

此语法适用于*DataTables 1.10.16*，我没有在以前的版本上进行测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-24T07:34:35.000

我发现相同，但最后我找到了答案。我希望这个答案对你有很大帮助。

当您的数组为空时，您可以发送空数组，就像

```
if(!empty($result))
        {
            echo json_encode($result);
        }
        else
        {
            echo json_encode(array('data'=>''));
        } 
```

谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-19T19:52:54.777

值得注意的是，如果您要返回服务器端数据 - 即使没有，您也必须提供 Data 属性。它不读取`recordsTotal`或`recordsFiltered`但依赖于数据对象的计数

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-12T05:25:05.613

这只是一个好主意。也就是说，您可以在正文中添加类，并在表中**没有数据时隐藏/显示表**。这对我来说很完美。可以设计自定义的**NO Record Found错误信息**，当表中没有记录时，可以添加类“no-record”，当有1条或多条记录时，可以删除类并显示数据表

这是jQuery代码。

```
$('#default_table').DataTable({

    // your stuff here

    "fnFooterCallback": function (nRow, aaData, iStart, iEnd, aiDisplay) {
        if (aiDisplay.length > 0) {
            $('body').removeClass('no-record');
        }
        else {
            $('body').addClass('no-record');
        }
    }
}); 
```

这是CSS

```
.no-record #default_table{display:none;} 
```

这[是官方链接](https://datatables.net/forums/discussion/35602/how-to-add-a-class-in-if-no-record-found)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T10:16:57.963

默认情况下，网格视图会处理，只需传递空数据集。

# c++ - sqlite 更新查询在 C++ 中不起作用

> ID：14375774
> 
> 赞同：1
> 
> 时间：2013-01-17T09:24:20.767
> 
> 标签：c++, sqlite

我编写了一个函数来更新`fsize`数据库表中调用的字段，但我的函数不起作用。我不知道为什么。我调试了sqlite的错误代码，`0`所以我不知道出了什么问题。

```
void update_fsize(int asizex, char path[], int sizex) {
    char *q;
    q="UPDATE search SET ustat=0,fsize=? WHERE fpath=?";
    if (sqlite3_prepare_v2(db, q, strlen(q), &pointer, 0) == SQLITE_OK) {
        sqlite3_bind_int(pointer, 1, asizex);   
        sqlite3_bind_text(pointer, 2, path, strlen(path), 0); // file path
        sqlite3_step(pointer);   // prepare statemnt Ready
        sqlite3_finalize(pointer);   
    }
    int ecode = sqlite3_errcode(db);
    cout << "\n error code is " << ecode;
    cout << "\n\n\n Path: " << path << "\n actual size: " << asizex << "\n Recored size: " << sizex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:15:06.057

非常感谢大家特别帮助我@WhozCraig :)

我会发布解决方案，也许其他人会发现它有用的伪代码：

```
function 1(){
// getting data from database 
data if == to this 
then 
sqlite3_reset(pointer);  // reset pointer 
call db_updater();

db_updater(){
updating database using update query 
} 
```

所以在跳转到另一个函数之前重置指针

# jquery - jquery - 在表格中我如何将列移动到我想要的位置

> ID：14375778
> 
> 赞同：1
> 
> 时间：2013-01-17T09:24:29.907
> 
> 标签：jquery, dom

我确实有一个表格，可以操作，但我在这里给出一个示例.. 我的表格是否包含 th 和 td，我想使用 th 的标题找到一个列，我需要将该列移动到我想要的位置。

就我而言，我做了一项工作，并试图在晚上之后附加到早间专栏，但我得到了错误的结果，有人纠正我吗？

HTML：

```
<table>
    <tbody>
        <tr>
            <th>Morning</th>
            <th>Afternoon</th>
            <th>Evening</th>
        </tr>
<tbody>
<tbody>
        <tr>
            <td>go to School</td>
            <td>go to Lunch</td>
            <td>go to Sleep</td>
        </tr>
    </tbody>
</table> 
```

jQuery代码：

```
var morningIndex = $('tr th:contains(Morning)').index();
var Evening = $('tr th:contains(Evening)');

$.each($('tr'), function(n,v){
    morningCol = $(v).children().get(morningIndex);
    $(Evening).after(morningCol);
}) 
```

[jsfiddle](http://jsfiddle.net/UFLDK/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:48:13.057

这对我有用：

```
var morningIndex = $('tr th:contains(Morning)').index();
var Evening =  $('tr th:contains(Evening)').index();

        $.each($("table tr"), function() { 
            $(this).children(":eq("+Evening+")").after($(this).children(":eq("+morningIndex+")"));
        }); 
```

谢谢大家。

# firefox-addon - Firefox 插件设置自定义 http 标头

> ID：14375783
> 
> 赞同：2
> 
> 时间：2013-01-17T09:24:47.083
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在构建一个 firefox 插件并想设置一个自定义 HTTP 标头。我已经做了一些谷歌搜索，发现[从 Firefox 扩展设置 HTTP 标头](https://stackoverflow.com/questions/1766183/setting-http-headers-form-a-firefox-extension) 但是我无法让它工作。

我尝试将它放在我的 main.js 中，但当它在我的一个内容脚本中不起作用时。

在 main.js 中，整个插件停止工作，但无法从中得到明确的错误。在内容脚本中时，该脚本停止工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:33:10.140

对于 addon-sdk，您需要稍微更改该示例，使其看起来像这样：

```
var chrome = require("chrome");

chrome.Cc["@mozilla.org/observer-service;1"].getService( chrome.Ci.nsIObserverService ).addObserver({
    observe : function(subject, topic, data) {
            var channel = subject.QueryInterface( chrome.Ci.nsIHttpChannel );
            if ( /mysite/.test( channel.originalURI.host ) ) {
                channel.setRequestHeader("x-mysite-extended", "true", false);
            }
    }
},"http-on-modify-request",false); 
```

请注意`mysite`，您需要将其替换为您的主机站点，并将标题替换为您的标题。

# objective-c - 将 NSImage(s) 初始化为静态对象

> ID：14375784
> 
> 赞同：0
> 
> 时间：2013-01-17T09:24:49.507
> 
> 标签：objective-c, cocoa, design-patterns

我在 OSX 中有一个带有绘图例程的自定义控件。此控件的每个实例都使用相同的图像。

我想知道将这些图像实例化为可用于类创建的所有实例的静态对象是否是个好主意。

如果这是个好主意，我怎样才能以切割器的方式实现图像加载器？我想在我的课堂上添加类似的东西

```
static NSImage *imageone; 
static NSImage *imagetwo;
static NSImage *imagethree; 
```

但我不确定初始化图像的更好方法......也许像这样的单例函数？

```
 + (void)setupSharedImages {
       static dispatch_once_t onceToken;

       dispatch_once(&onceToken, ^{
          imageone = [NSimage imageNamed:@"...."];
          imagetwo = [NSimage imageNamed:@"...."];
          image three = [NSimage imageNamed:@"...."];
       });   
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:29:09.027

您可以在`+ (void)initialize`方法中设置图像。此方法在加载类时调用一次，它还处理同步。

作为一种选择，您可能会考虑将图像封装到“存储”单例类中。

```
@interface ImageStorage : NSObject
+ (ImageStorage *)sharedStorage;
- (NSImage *)imageForKey:(NSString *)key;
@end

@implementation ImageStorage {
    NSDictionary *_images;
}

+ (ImageStorage *)sharedStorage
{
    static dispatch_once_t onceToken;
    static ImageStorage *sharedStorage;

    dispatch_once(&onceToken, ^{
       sharedStorage = [[ImageStorage alloc] init];
       _images = [[NSDictionary dictionaryWithObjectsAndKeys:image1, key1, image2, key2, nil] retain];
   });

   return sharedStorage;
}

- (NSImage *)imageForKey:(NSString *)key
{
    return [_images objectForKey:key];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:15:31.883

你总是可以懒加载它们。

```
- (NSImage *)imageOne {
    static NSImage *imageone;
    if(imageone == nil)
        imageone = [NSImage imageNamed:@"..."];
    return imageone;
} 
```

编辑：只是想澄清一下，为您需要的每个图像执行此操作，然后在您的绘图方法调用中

`[self imageOne]`ETC...

# ios - 在 MKMapView 中覆盖城市、地区等

> ID：14375786
> 
> 赞同：0
> 
> 时间：2013-01-17T09:25:03.027
> 
> 标签：ios, objective-c, mkmapview, clgeocoder, clregion

如何在城市内特定城市或地区的 MKMapView 上叠加几何图形？

我在看`CLGeocoder`,`MKOverlayView`和`CLRegion`，但我有点困惑。

如何获取创建 MKPolygon / 叠加层的坐标？

在 Apple 的示例中，他们已经为科罗拉多州获得了 4 分。我是否必须自己从某种数据库中手动填充这些点？或者像 CLGeocoder 这样的东西可以访问给定地区/城市/州的几何形状吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:32:32.967

您必须自己获取数据。地理编码通常会给你一个纬度/经度，有时是一个范围或边界框，但不是实际的城市/地区边界。

# ruby-on-rails - 使用基本身份验证密钥设置 http 标头

> ID：14375788
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:25:05.153
> 
> 标签：ruby-on-rails, ruby

我有一个使用 http 基本身份验证保护的站点。

我希望编写一个 ruby​​ 代码片段，它允许我通过 http 基本身份验证并读取网页的内容。

我在 java 中使用了一种方法来发送在 HTTP 标头中设置的密钥和其他详细信息，从而读取网页的内容。但无法在红宝石中找到相同的东西。

# 编辑：

我使用的代码在这里：

```
 def express
    http_basic_authenticate_with :name => "dhh", :password => "secret"
   end 
```

这给了我错误：

```
undefined method `http_basic_authenticate_with' for #<ServiceController:0x7f9bd73e5448> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:48:40.627

**Devise**确实内置了，`HTTP Basic Authentication`但您确实需要在您的应用程序中添加两个小东西才能使其正常工作：

`:database_authenticatable``config.http_authenticatable = true`设计初始化程序中的用户/帐户模型中的策略

设计依赖`Warden`，这是一个用于身份验证的机架框架。就其本身而言，`Warden`尝试通过名为 failure_app 的东西（一个有效的机架应用程序）为所有未经身份验证的请求提供自定义响应。

一个执行http认证的简单代码如下：

```
def http_authenticate
  authenticate_or_request_with_http_digest do |user_name, password|
    user_name == "foo" && password == "bar"
  end
  warden.custom_failure! if performed?
end 
```

还有一个很好的帖子。[在这里](http://mechanize.rubyforge.org)检查。

另一种解决方案（替代方案）是使用[Mechanize 库](http://mechanize.rubyforge.org)

```
 require 'rubygems'
    require 'mechanize'
    require 'logger'

    agent = WWW::Mechanize.new { |a| a.log = Logger.new("mech.log") }
    agent.user_agent_alias = 'Windows Mozilla'
    agent.auth('username', 'password')
    agent.get('http://example.com') do |page|
      puts page.title
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:34:30.080

我认为[这是](http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html)您正在寻找的：

```
 class SecretController < ApplicationController
   http_basic_authenticate_with :name => "frodo", :password => "thering"
   def index
     ...
   end
 end 
```

您还可以为任何特定传递异常`action`：

```
 http_basic_authenticate_with :name => "dhh", :password => "secret", :except => :index 
```

还有一个关于它的[RailsCasts](http://railscasts.com/episodes/270-authentication-in-rails-3-1)。

**编辑 - 如果您的 rails 版本早于 3.1，您可以创建自己的方法：**

```
class ApplicationController < ActionController::Base
USER, PASSWORD = 'dhh', 'secret'

before_filter :authentication_check, :except => :index

...

 private
  def authentication_check
   authenticate_or_request_with_http_basic do |user, password|
    user == USER && password == PASSWORD
   end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:38:10.627

使用诸如[httparty 之](https://github.com/jnunemaker/httparty)类的 gem ：

```
opt = {basic_auth: {username: "user123", password: "pass"}}
response = HTTParty.get("your_site", opt) 
```

# jquery - jquery ui portlet（可排序）调整大小和最小化

> ID：14375794
> 
> 赞同：1
> 
> 时间：2013-01-17T09:25:25.593
> 
> 标签：jquery, jquery-ui, jquery-resizable

根据 Sortable Portlets 的 JQuery 示例代码，最小化功能已经存在。我添加了可排序的功能，它确实有效，但不如预期。在我调整 portlet 的大小后，最小化按钮只会隐藏文本并且不会切换 portlet 的边框。

这是我的代码：

**HTML**

> ```
> <div class="column">
>   <div class="portlet">
>     <div class="portlet-header">Calls</div>
>     <div class="portlet-content">test Calls content</div>
>   </div>
>   <div class="portlet">
>      <div class="portlet-header">Phone</div>
>      <div class="portlet-content">test Phone content</div>
>   </div>
>   <div class="portlet">
>       <div class="portlet-header">Contacts</div>
>       <div class="portlet-content">test Contacts content</div>
>    </div>
>  </div> 
> ```

**查询**

> $( ".column" ).sortable({ connectWith: ".column", delay: 150,placeholder: "ui-state-highlight" });
> 
> $(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all") .find(".portlet-header") .addClass("ui-widget-header ui-corner-all") .prepend('') .end() .find(".portlet-content");
> 
> ```
>  $(".portlet-header .ui-icon").click(function()   
>   {                                
>      $(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");      
>      $(this).parents(".portlet:first").find(".portlet-content").toggle();
>   });
> 
>   $(".column").disableSelection();
>   $(".portlet").resizable(); 
> ```

有任何想法吗？正如我在调整大小后所说的，最小化按钮只是隐藏了内容，并没有切换相应 portlet 的边框。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T15:33:49.800

以防万一其他人偶然发现这个问题（我之前遇到过这个问题，谷歌并没有太多帮助来阻止这个孤独的未回答的帖子），诀窍是重新调整父 .portlet 面板 css 的大小。我已经解决了这个问题，但我确信有一个更优雅的解决方案：

```
$(".portlet-header .ui-icon-minusthick").click(function () {
    if($(this).hasClass("ui-icon-minusthick") == true)
    {
        $(this).removeClass("ui-icon-minusthick");
        $(this).addClass("ui-icon-plusthick");
        $(this).parents(".portlet:first").find(".portlet-content").slideToggle();
        $(this).parents(".portlet:first").animate({height: "40px"}, 500);
    }
    else
    {
        $(this).removeClass("ui-icon-plusthick");
        $(this).addClass("ui-icon-minusthick");
        $(this).parents(".portlet:first").animate({height: "300px"}, 500);
        $(this).parents(".portlet:first").find(".portlet-content").slideToggle();
    }
}); 
```

希望这对仍在谷歌搜索的人有所帮助！

# qt - 使用 qt 将自定义类写入文件的最佳方法

> ID：14375795
> 
> 赞同：3
> 
> 时间：2013-01-17T09:25:25.303
> 
> 标签：qt, serialization, qfile, qiodevice

大家好（外面:)。
哪种方式最适合在 Qt 中将自定义类写入文件？
先感谢您。
马蒂亚斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:52:15.143

编辑：问题已经被问到了。[使用 Qt 进行序列化](https://stackoverflow.com/questions/2570679/serialization-with-qt)

最好的方法是使用[QDataStream](http://doc.qt.digia.com/qt/qdatastream.html#details)进行序列化。对于给定的类`MyClass`，您需要定义新的流操作符

```
QDataStream &operator<<(QDataStream &, const MyClass &);
QDataStream &operator>>(QDataStream &, MyClass &); 
```

`QDataStream`已经能够编写几个 Qt 类，主要是集合和其他方便的类，例如`QImage`，等等。请注意，您不能序列化`QObject`. 有原因:)，但仅限于解释`QObject`本身既不提供复制构造函数也不提供上述输入/输出流函数的解释。

注意，如果你的自定义类派生了一个已经提供序列化的类，你需要为这个超类调用流操作符（与构造子类时调用超类的构造函数的原理相同）。

# c# - 在 C# .Net 2.0 中编写图像元数据

> ID：14375802
> 
> 赞同：2
> 
> 时间：2013-01-17T09:25:49.307
> 
> 标签：c#, .net, image, metadata

有人知道是否可以将元数据写入 C# 中的 BitMap 类？约束是只有 . **NET 2.0**可以使用。

我阅读了 C# 中的 PropertyItem 类，但没有解释如何设置属性；它只显示了如何获得财产。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:24:51.233

是的，这是可能的。这是VB中的一个例子。

```
 Dim prop As PropertyItem
  prop = img.PropertyItems(0) ' no constructor   
  prop.Id = tagNo
  prop.Len = nBytes
  prop.Type = dataType
  prop.Value = bs   
  img.SetPropertyItem(prop) 
```

（`img`是一个`Image`.`bs`是一个数组`byte`。）您必须将图像保存到一个新文件中，因为 .net 显然是从旧文件中读取 exif 数据而不是将其保存在内存中。

# testing - 用于#的未定义方法“生成器” 我已经rspec2安装了spork，guard当运行guard命令时，我得到这个错误： undefined method `generators' for # <rspec::core::configuration:0x007fb39 1="" 828="" 问问题="" 2013-01-17t09:26:05.360="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我已经rspec2安装了spork，guard当运行guard命令时，我得到这个错误：="" undefined="" method="" `generators'="" for="" #<rspec::core::configuration:0x007fb3944b23b0="">(NoMethodError) /Users/amiterandole/Desktop/current/rails/depot/spec/spec_helper.rb:64:in `block (2 levels) in <top (required)="">' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core.rb:108:in `configure' /Users/amiterandole/Desktop/current/rails/depot/spec/spec_helper.rb:18:in `block in <top (required)="">' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork.rb:24:in `prefork' /Users/amiterandole/Desktop/current/rails/depot/spec/spec_helper.rb:6:in `<top (required)="">' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:138:in `load' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:138:in `block (2 levels) in preload' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/app_framework.rb:49:in `preload' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:134:in `block in preload' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork.rb:62:in `exec_prefork' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:120:in `preload' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/run_strategy/forking.rb:25:in `preload' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/runner.rb:74:in `run' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/runner.rb:10:in `run' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/bin/spork:10:in `<top (required)="">' /usr/local/rvm/gems/ruby-1.9.3-p194/bin/spork:19:in `load' /usr/local/rvm/gems/ruby-1.9.3-p194/bin/spork:19:in `

<main>' /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval' /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `

<main>' /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:35:in `block in shellsplit': Unmatched double quote: "--format RSpec::Instafail' > .rspec" (ArgumentError) from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `scan' from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `shellsplit' from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:128:in `shellsplit' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `block in args_from_options_file' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `map' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `args_from_options_file' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:109:in `options_from' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:101:in `project_options' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:81:in `file_options' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:77:in `all_configs' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:34:in `parse_options' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:69:in `run' from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' 14:48:19 - ERROR - Could not start Spork server for RSpec after 30 seconds. I will continue waiting for a further 60 seconds. 14:49:19 - ERROR - Could not start Spork server for RSpec. Make sure you can use it manually first. 14:49:19 - INFO - Guard::RSpec is running 14:49:19 - INFO - Running all specs 14:49:19 - ERROR - Guard::RSpec failed to achieve its <start>, exception was: > [#CFA8FD5ABE83] ArgumentError: Unmatched double quote: "--format RSpec::Instafail' > .rspec" > [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:35:in `block in shellsplit' > [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `scan' > [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `shellsplit' > [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:128:in `shellsplit' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `block in args_from_options_file' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `map' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `args_from_options_file' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:109:in `options_from' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:101:in `project_options' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:81:in `file_options' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:77:in `all_configs' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:34:in `parse_options' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:59:in `parsed_or_default_formatter' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:79:in `rspec_arguments' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:119:in `run_via_drb' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:36:in `run' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec.rb:35:in `run_all' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec.rb:31:in `start' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:99:in `block in run_supervised_task' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:97:in `catch' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:97:in `run_supervised_task' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:54:in `block (2 levels) in run' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:175:in `block (3 levels) in scoped_guards' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:174:in `each' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:174:in `block (2 levels) in scoped_guards' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:173:in `catch' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:173:in `block in scoped_guards' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:172:in `each' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:172:in `scoped_guards' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:53:in `block in run' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/lumberjack-1.0.2/lib/lumberjack.rb:27:in `unit_of_work' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:52:in `run' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:187:in `block in start' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:363:in `block in within_preserved_state' > [#CFA8FD5ABE83] <internal:prelude>:10:in `synchronize' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:360:in `within_preserved_state' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:185:in `start' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/cli.rb:110:in `start' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/task.rb:27:in `run' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/base.rb:425:in `start' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/bin/guard:6:in `<top (required)="">' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/guard:19:in `load' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/guard:19:in `

<main>' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval' > [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `

<main>' 14:49:19 - INFO - Guard::RSpec has just been fired 14:49:21 - INFO - Bundle already up-to-date 14:49:21 - INFO - Guard is now watching at '/Users/amiterandole/Desktop/current/rails/depot' 如果我取出生成器配置，事情似乎工作得很好。我正在使用rails 3.2.11和ruby-1.9.3-p194 这是我的 gemfile 的样子： group :development, :test do gem 'meta_request', '0.2.1' gem "rspec-rails", "~> 2.0" gem "factory_girl_rails", ">= 3.3.0" gem "guard-rspec" gem "capybara", ">= 1.1.2" gem "database_cleaner" gem "launchy", ">= 2.1.0" gem 'rb-fsevent', '~> 0.9.1' gem 'spork', '~> 1.0rc' gem 'guard-spork', '~> 1.0rc' gem "guard-bundler" gem "guard-migrate" end 这是我的保护文件： guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do watch('config/application.rb') watch('config/environment.rb') watch('config/environments/test.rb') watch(%r{^config/initializers/.+\.rb$}) watch('Gemfile') watch('Gemfile.lock') watch('spec/spec_helper.rb') { :rspec } watch('test/test_helper.rb') { :test_unit } watch(%r{features/support/}) { :cucumber } watch(%r{^spec/support/.+\.rb$}) end guard 'rspec', :cli => "--drb" do watch(%r{^spec/.+_spec\.rb$}) watch(%r{^lib/(.+)\.rb$}) { |m| "spec/lib/#{m[1]}_spec.rb" } watch('spec/spec_helper.rb') { "spec" } # Rails example watch(%r{^app/(.+)\.rb$}) { |m| "spec/#{m[1]}_spec.rb" } watch(%r{^app/(.*)(\.erb|\.haml)$}) { |m| "spec/#{m[1]}#{m[2]}_spec.rb" } watch(%r{^app/controllers/(.+)_(controller)\.rb$}) { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] } watch(%r{^spec/support/(.+)\.rb$}) { "spec" } watch('config/routes.rb') { "spec/routing" } watch('app/controllers/application_controller.rb') { "spec/controllers" } # Capybara features specs watch(%r{^app/views/(.+)/.*\.(erb|haml)$}) { |m| "spec/features/#{m[1]}_spec.rb" } # Turnip features and steps watch(%r{^spec/acceptance/(.+)\.feature$}) watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$}) { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' } end 这是我的spec_helper.rb： require 'rubygems' require 'spork' #uncomment the following line to use spork with the debugger #require 'spork/ext/ruby-debug' Spork.prefork do # This file is copied to spec/ when you run 'rails generate rspec:install' ENV["RAILS_ENV"] ||= 'test' require File.expand_path("../../config/environment", __FILE__) require 'rspec/rails' require 'rspec/autorun' require 'database_cleaner' # Requires supporting ruby files with custom matchers and macros, etc, # in spec/support/ and its subdirectories. Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f} RSpec.configure do |config| # ## Mock Framework # # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line: # # config.mock_with :mocha # config.mock_with :flexmock # config.mock_with :rr # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures # config.fixture_path = "#{::Rails.root}/spec/fixtures" # If you're not using ActiveRecord, or you'd prefer not to run each of your # examples within a transaction, remove the following line or assign false # instead of true. config.use_transactional_fixtures = true # If true, the base class of anonymous controllers will be inferred # automatically. This will be the default behavior in future versions of # rspec-rails. config.infer_base_class_for_anonymous_controllers = false # Run specs in random order to surface order dependencies. If you find an # order dependency and want to debug it, you can fix the order by providing # the seed, which is printed after each run. # --seed 1234 config.order = "random" config.before(:suite) do DatabaseCleaner.strategy = :truncation end config.before(:each) do DatabaseCleaner.start end config.after(:each) do DatabaseCleaner.clean end config.include FactoryGirl::Syntax::Methods config.treat_symbols_as_metadata_keys_with_true_values = true config.filter_run :focus => true config.run_all_when_everything_filtered = true config.generators do |g| g.view_specs false g.helper_specs false g.test_framework :rspec, :fixture => true g.fixture_replacement :factory_girl, :dir => 'spec/factories' end end Spork.each_run do # This code will be run each time you run your specs. FactoryGirl.reload end end 我该如何解决？ 无权访问服务器上的新图片 我正在为网站开发一些新功能（使用 joomla 并不是我认为它与问题相关）。我的问题是我无法访问我放在服务器上的新图片。假设在图像目录上我有 a.png（旧）和 b.png（新），如果我输入链接，我可以在浏览器上看到 a.png，但 b.png 会给我： You don't have permission to access /images/face.jpg on this server. Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 使用cPanel，我检查了权限（644），甚至给了他们完全的权限，但没有。我还应该检查什么？ testingruby-on-rails-3.2rspec2guardspork 4 1 回答 1 This answer is useful 2 我发现了错误。显然config.generators块进入内部application.rb： config.generators do |g| g.view_specs false g.helper_specs false g.test_framework :rspec, :fixture => true g.fixture_replacement :factory_girl, :dir => 'spec/factories' end 于 2013-01-17T09:37:55.543 回答 Related 2 javascript - HTML/Javascript - 提交表单并在 shadowbox 中显示结果 1 ruby-on-rails-3 - 显示操作时出现 ActiveAdmin STI 错误但未编辑 2 java - 从仪器测试用例绑定到服务 1 mongodb - No Implicit View Available 1 c# - How to catch all of the inner exceptions in the root method? 1 ios - What UI Component to make multiple and separated box like this? 0 d3.js - 拖动一组元素并放大 D3 2 java - 在我的课堂上实现 Thread Android？ 1 java - NumberFormatException given an input String holding a small integer 2 ios - 如何在 Objective-C 中测试代理对象上的选择器？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</main>

</main></top></internal:prelude></start> </main>

</main></top></top></top></top></rspec::core::configuration:0x007fb39> 

> ID：14375805
> 
> 赞同：1
> 
> 时间：
> 
> 标签：testing, ruby-on-rails-3.2, rspec2, guard, spork

我已经`rspec2`安装了`spork`，`guard`当运行`guard`命令时，我得到这个错误：

```
undefined method `generators' for #<RSpec::Core::Configuration:0x007fb3944b23b0> (NoMethodError)
/Users/amiterandole/Desktop/current/rails/depot/spec/spec_helper.rb:64:in `block (2 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core.rb:108:in `configure'
/Users/amiterandole/Desktop/current/rails/depot/spec/spec_helper.rb:18:in `block in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork.rb:24:in `prefork'
/Users/amiterandole/Desktop/current/rails/depot/spec/spec_helper.rb:6:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:138:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:138:in `block (2 levels) in preload'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/app_framework.rb:49:in `preload'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:134:in `block in preload'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork.rb:62:in `exec_prefork'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/test_framework.rb:120:in `preload'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/run_strategy/forking.rb:25:in `preload'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/runner.rb:74:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/lib/spork/runner.rb:10:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/spork-1.0.0rc3/bin/spork:10:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/spork:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/spork:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:35:in `block in shellsplit': Unmatched double quote: "--format RSpec::Instafail' > .rspec" (ArgumentError)
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `scan'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `shellsplit'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:128:in `shellsplit'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `block in args_from_options_file'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `map'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `args_from_options_file'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:109:in `options_from'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:101:in `project_options'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:81:in `file_options'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:77:in `all_configs'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:34:in `parse_options'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:69:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun'
14:48:19 - ERROR - Could not start Spork server for RSpec after 30 seconds. I will continue waiting for a further 60 seconds.

14:49:19 - ERROR - Could not start Spork server for RSpec. Make sure you can use it manually first.

14:49:19 - INFO - Guard::RSpec is running
14:49:19 - INFO - Running all specs
14:49:19 - ERROR - Guard::RSpec failed to achieve its <start>, exception was:
> [#CFA8FD5ABE83] ArgumentError: Unmatched double quote: "--format RSpec::Instafail' > .rspec"
> [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:35:in `block in shellsplit'
> [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `scan'
> [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:33:in `shellsplit'
> [#CFA8FD5ABE83] /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/shellwords.rb:128:in `shellsplit'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `block in args_from_options_file'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `map'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:115:in `args_from_options_file'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:109:in `options_from'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:101:in `project_options'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:81:in `file_options'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:77:in `all_configs'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:34:in `parse_options'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:59:in `parsed_or_default_formatter'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:79:in `rspec_arguments'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:119:in `run_via_drb'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec/runner.rb:36:in `run'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec.rb:35:in `run_all'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-2.3.3/lib/guard/rspec.rb:31:in `start'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:99:in `block in run_supervised_task'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:97:in `catch'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:97:in `run_supervised_task'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:54:in `block (2 levels) in run'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:175:in `block (3 levels) in scoped_guards'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:174:in `each'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:174:in `block (2 levels) in scoped_guards'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:173:in `catch'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:173:in `block in scoped_guards'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:172:in `each'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:172:in `scoped_guards'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:53:in `block in run'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/lumberjack-1.0.2/lib/lumberjack.rb:27:in `unit_of_work'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/runner.rb:52:in `run'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:187:in `block in start'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:363:in `block in within_preserved_state'
> [#CFA8FD5ABE83] <internal:prelude>:10:in `synchronize'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:360:in `within_preserved_state'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard.rb:185:in `start'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/lib/guard/cli.rb:110:in `start'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.0/bin/guard:6:in `<top (required)>'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/guard:19:in `load'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/guard:19:in `<main>'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
> [#CFA8FD5ABE83] /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
14:49:19 - INFO - Guard::RSpec has just been fired
14:49:21 - INFO - Bundle already up-to-date

14:49:21 - INFO - Guard is now watching at '/Users/amiterandole/Desktop/current/rails/depot' 
```

如果我取出生成器配置，事情似乎工作得很好。我正在使用`rails 3.2.11`和`ruby-1.9.3-p194`

这是我的 gemfile 的样子：

```
group :development, :test do
  gem 'meta_request', '0.2.1'
  gem "rspec-rails", "~> 2.0"
    gem "factory_girl_rails", ">= 3.3.0"
    gem "guard-rspec"
    gem "capybara", ">= 1.1.2"
    gem "database_cleaner"
    gem "launchy", ">= 2.1.0"
    gem 'rb-fsevent', '~> 0.9.1'
    gem 'spork', '~> 1.0rc'
    gem 'guard-spork', '~> 1.0rc'
    gem "guard-bundler"
    gem "guard-migrate"
end 
```

这是我的保护文件：

```
guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch('config/environments/test.rb')
  watch(%r{^config/initializers/.+\.rb$})
  watch('Gemfile')
  watch('Gemfile.lock')
  watch('spec/spec_helper.rb') { :rspec }
  watch('test/test_helper.rb') { :test_unit }
  watch(%r{features/support/}) { :cucumber }
  watch(%r{^spec/support/.+\.rb$})
end

guard 'rspec', :cli => "--drb" do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Capybara features specs
  watch(%r{^app/views/(.+)/.*\.(erb|haml)$})          { |m| "spec/features/#{m[1]}_spec.rb" }

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }
end 
```

这是我的`spec_helper.rb`：

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
# This file is copied to spec/ when you run 'rails generate rspec:install'
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'database_cleaner'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    # ## Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    # config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

    # Run specs in random order to surface order dependencies. If you find an
    # order dependency and want to debug it, you can fix the order by providing
    # the seed, which is printed after each run.
    #     --seed 1234
    config.order = "random"

    config.before(:suite) do
      DatabaseCleaner.strategy = :truncation
    end

    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end

    config.include FactoryGirl::Syntax::Methods

    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.filter_run :focus => true
    config.run_all_when_everything_filtered = true

    config.generators do |g|
      g.view_specs false
      g.helper_specs false
      g.test_framework :rspec, :fixture => true
      g.fixture_replacement :factory_girl, :dir => 'spec/factories'
    end

end

Spork.each_run do
  # This code will be run each time you run your specs.
  FactoryGirl.reload
end

end 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:37:55.543

我发现了错误。显然`config.generators`块进入内部`application.rb`：

```
config.generators do |g|
  g.view_specs false
  g.helper_specs false
  g.test_framework :rspec, :fixture => true
  g.fixture_replacement :factory_girl, :dir => 'spec/factories'
end 
```

# php - 无权访问服务器上的新图片

> ID：14375808
> 
> 赞同：0
> 
> 时间：2013-01-17T09:26:24.323
> 
> 标签：php, joomla, file-permissions, cpanel

我正在为网站开发一些新功能（使用 joomla 并不是我认为它与问题相关）。我的问题是我无法访问我放在服务器上的新图片。假设在图像目录上我有 a.png（旧）和 b.png（新），如果我输入链接，我可以在浏览器上看到 a.png，但 b.png 会给我：

```
You don't have permission to access /images/face.jpg on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

使用cPanel，我检查了权限（644），甚至给了他们完全的权限，但没有。我还应该检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:35:07.853

毕竟这是一个与 joomla 相关的问题，因为该站点是 1.5 版本，所以我也应该将图像放在故事文件夹中。从 1.6 版开始，此文件夹不再存在。所以我把他们的图像和它固定。

# java - Eclipse，Java：如何以 zip 格式导入库？

> ID：14375810
> 
> 赞同：0
> 
> 时间：2013-01-17T09:26:30.563
> 
> 标签：java, eclipse, zipfile, buildpath

好的，这是基本的，但似乎正常的方法对我不起作用。

我正在尝试导入 jSSC 库，用于与串行端口等通信。最新的库是 jSSC-0.9.0-Release

所以，我尝试了以下方法：

*   将 zip 文件放在工作区中，并将其作为“外部 jar”添加到项目属性 -> java 构建路径 -> 库中。

然后我尝试从库中包含一些东西：

```
import jssc.SerialPortList; 
```

错误：无法解析导入 jssc

*   然后我将 zip 文件放在项目根目录中名为 /libs 的文件夹中，并将其添加为“jar”（不是外部的）。

结果：同样的错误。

对于这个导入库的简单操作，我在这里缺少什么基本信息/操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:29:05.580

您确定应该直接包含 zip 吗？在大多数版本中，zip 包含一个 jar + 自述文件 + 一些文档。我认为您应该查看此 zip 文件的内容，也许将其解压缩并仅将 jar 包含在您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:33:22.097

我相信您的 zip 文件包含很多文件，包括包含您需要的所有类的 jar 文件、文档等。因此，提取 zip 文件，找到您必须添加到 eclipse 项目中的 jar 并执行此操作。

zip 可能包含自述文件说明。阅读它们。这可能会帮助您安装和使用该库。

# javascript - 销毁返回按钮事件 - android

> ID：14375811
> 
> 赞同：-3
> 
> 时间：2013-01-17T09:26:35.913
> 
> 标签：javascript, android, html, cordova, event-listener

`PhoneGap`我为 Android 的后退按钮（ 2.2.0）创建了以下事件：

```
document.addEventListener("backbutton", function (e) {
    //Do Something
}, false); 
```

我有以下链接，可将我从应用程序带到外部站点

我的链接

我覆盖了后退按钮事件，一旦我在应用程序内部传递到另一个链接，该事件就不会被取消..并且由于另一个链接不知道科尔多瓦，他甚至无法访问这个事件。

所以我必须完全取消它！

我是怎么做到的……？

当我按下后退按钮时，我在日志中收到以下错误消息：

```
Uncaught ReferenceError: cordova is not defined at :1 
```

什么都没有发生..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:12:14.573

```
function onBackKey() {
    console.log("I've caught a back key");

    // We are going back to home so remove the event listener
    // so the default back key behaviour will take over
    document.removeEventListener("backbutton", onBackKey, false);

    // Hide the current dive and show home
    document.getElementById(cur).style.display = 'none';
    document.getElementById('home').style.display = 'block';    
    cur = 'home';
}

function goToDiv(id) {
    // We are moving to a new div so over ride the back button
    // so when a users presses back it will show the home div
    document.addEventListener("backbutton", onBackKey, false);

    // Hide home and show the new div
    document.getElementById('home').style.display = 'none';
    document.getElementById(id).style.display = 'block';
    cur = id;
} 
```

放置html标签

```
 <div id="home">Back Button Home<br/><a href="javascript:goToDiv('div1')">Div One</a><br/><a href="javascript:goToDiv('div2')">Div Two</a></div> 
```

请在下面的链接中找到详细答案

[https://gist.github.com/955496](https://gist.github.com/955496)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:33:05.693

你可以实现它

```
boolean toRun = true;

document.addEventListener("backbutton", function (e) {
    if (toRun)    
    {
        //Do Something
        toRun = false;
    }
}); 
```

根据您的需要设置布尔值。并检查，如果它是第一次，执行代码。否则什么都不做。

希望能帮助到你。

# objective-c - obj c 在方法之间向 uint8_t 数组添加字节？

> ID：14375815
> 
> 赞同：3
> 
> 时间：2013-01-17T09:26:45.053
> 
> 标签：objective-c, bytearray, byte

我对 obj c 添加一个额外的字节到 uint8_t 数组有一个奇怪的问题。

以下是涉及的两种方法：

**视图控制器.m**

```
- (void)viewDidLoad {
    // hexData = NSData object
    const uint8_t *hexBytes = [hexData bytes];

    // header is first 3 bytes
    uint8_t headerBytes[] = {hexBytes[0],hexBytes[1],hexBytes[2]};

    // output the size
    NSLog(@"View did load header size: %lu", sizeof(headerBytes));

    // create a MessageHeader object
    MessageHeader *messageHeader = [[MessageHeader alloc] initWithBytes:headerBytes];
} 
```

**消息头.h**

```
- (id)initWithBytes:(uint8_t *)bytes {
    self = [super init];
    if(self != nil){
        NSLog(@"Message header init bytes size: %lu", sizeof(bytes));
        NSData *data = [NSData dataWithBytes:bytes length:sizeof(bytes)];
        self.bytes = bytes;
    }
    return self;
} 
```

**控制台输出**

> 查看确实加载了标题大小：3
> 
> 消息头初始字节大小：4

这很奇怪！将字节输出到屏幕显示了一个额外的字节被附加到数据中，没有明显的原因。如果`eef231`是输入，那么`eef23150`是 init 方法中的输出。那个额外的字节似乎是随机的。

我想知道它是否可能是方法之间`uint8_t headerBytes[]`和方法`uint8_t *bytes`中的演员`init`。

如果有人对此有更多信息，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:34:02.320

`sizeof`是一个编译时运算符，不会做你认为它做的事情。

uint8_t[] 上的 sizeof 为您提供该数组的大小，即 1 字节 * 3 个元素 = 3 字节。它可以这样做，因为数组声明附加了隐式大小信息。

uint8_t* 上的 sizeof 为您提供指针的大小，在 32 位系统上为 4 个字节。

有关它的作用，请参阅[wikipedia 文章](http://en.wikipedia.org/wiki/Sizeof#Using_sizeof_with_arrays)。`sizeof`

如果要传递数组的长度，一般的约定是传递一个额外的长度参数。由于您在目标 c 中工作，因此您应该传递一个 NSData，它可以包含数据数组及其大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:30:00.983

`bytes`被声明为`uint8_t *`in `initWithBytes`，即指向 的指针`uint_t`。

就您的硬件而言，*指针*的大小为4 个字节。它与数组大小无关，这在该方法中是未知的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:32:18.303

问题在于`initWithBytes:`：`sizeof(bytes)`为您提供指针变量的大小，在 32 位架构上为 4 个字节。

无法在被调用函数中获取原始 C 数组的大小（在运行时 C 数组不携带大小信息）。您需要将大小作为附加参数传递。

# iphone - 表格视图中自定义单元格的删除样式

> ID：14375820
> 
> 赞同：0
> 
> 时间：2013-01-17T09:27:03.120
> 
> 标签：iphone, ios, uitableview

我以这种方式实现了我的自定义单元格：

```
@implementation StandardCellWithImage: UITableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Base-List"]];

    _checkbox = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 24, 24)];
    _checkbox.userInteractionEnabled = YES;
    [self addSubview:_checkbox];

    /*textField with image/file name*/
    _nameLabel = [[UITextField alloc] initWithFrame:CGRectMake(50, 10, 180, 44)];
    [_nameLabel setBackgroundColor:[UIColor clearColor]];
    [_nameLabel setFont:[UIFont fontWithName:@"HelveticaNeueCE-Bold" size:18.0f]];
    [_nameLabel setUserInteractionEnabled:NO];
    _nameLabel.keyboardType = UIKeyboardTypeAlphabet;
    _nameLabel.returnKeyType = UIReturnKeyDone;
    [self addSubview:_nameLabel];
}
return self;
} 
```

我在 tableView 中使用它。问题是当我交换单元格以删除时，左侧只出现红色减号，但单元格不会向右移动。如下图所示：

![在此处输入图像描述](../Images/d2c49125a29e648f95b8d192fca3f541.png)

如何解决此问题以将我的自定义单元格向右移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:34:59.437

你只需要在你的代码中做些小改动

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Base-List"]];

    _checkbox = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 24, 24)];
    _checkbox.userInteractionEnabled = YES;

    [self.contentView addSubview:_checkbox]];//also change here 

  //  [self addSubview:_checkbox];

    /*textField with image/file name*/
    _nameLabel = [[UITextField alloc] initWithFrame:CGRectMake(50, 10, 180, 44)];
    [_nameLabel setBackgroundColor:[UIColor clearColor]];
    [_nameLabel setFont:[UIFont fontWithName:@"HelveticaNeueCE-Bold" size:18.0f]];
    [_nameLabel setUserInteractionEnabled:NO];
    _nameLabel.keyboardType = UIKeyboardTypeAlphabet;
    _nameLabel.returnKeyType = UIReturnKeyDone;
  //  [self addSubview:_nameLabel];

//  i just did change at one line now test your code
    [self.contentView addSubview:_nameLabel];

}
return self;
} 
```

我确实使用 `[self.contentView addSubview:_nameLabel];`和工作正常，例如：-

我的 UITableIVew：-

![在此处输入图像描述](../Images/b3bae2330788b604ea94edf673cb34db.png)

编辑时：-

![在此处输入图像描述](../Images/e6595e3f81439a540214e3733ae0a173.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:44:53.463

将`autoresizingMask`属性设置为您的`UITableViewCell Label`. 像

```
_nameLabel.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin; 
```

# android - android，libgdx 将导航栏固定在动态窗格的顶部

> ID：14375827
> 
> 赞同：1
> 
> 时间：2013-01-17T09:27:23.153
> 
> 标签：android, android-layout, libgdx

我是 android/libgdx 的新手，我正在尝试创建一个具有地图编辑器的 android 游戏。我希望屏幕顶部有一个固定导航栏，位于窗格上方，我可以在其中查看地图并与地图交互。我希望能够在不影响导航栏的情况下放大和滚动地图。做这个的最好方式是什么？

例子：

```
|------------------------------------------|
| 按钮在这里 |
-------------------------------------------
| 地图编辑器窗格 |
| |
| |
-------------------------------------------

```

谢谢，

铝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:58:09.983

[Scene2d UI](http://code.google.com/p/libgdx/wiki/scene2dui)将是一个很好的起点。它提供了一种在 libgdx 中创建 GUI 的非常灵活的方法。

整个屏幕可以是一个[Table](http://code.google.com/p/libgdx/wiki/scene2dui#Table)，其中一行包含[按钮](http://code.google.com/p/libgdx/wiki/scene2dui#Button)，另一行（较高的）包含地图编辑器的[ScrollPane](http://code.google.com/p/libgdx/wiki/scene2dui#ScrollPane)。

# c# - Process.Start("name.exe") - 'name.exe' 是如何找到的？

> ID：14375830
> 
> 赞同：3
> 
> 时间：2013-01-17T09:27:30.727
> 
> 标签：c#, windows, process, environment-variables

使用`C#`代码：

```
Process.Start("name.exe"); 
```

我想知道在哪里`Process`寻找`name.exe`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T09:29:17.467

它将搜索当前工作目录、正在执行的 exe 的路径或`%path%`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:30:30.207

从[`MSDN`](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx);

> 通过指定文件名来启动进程类似于在 Windows 开始菜单的运行对话框中键入信息。

它应该搜索当前工作目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:36:54.287

正如另一个答案所引用的：

> 通过指定文件名来启动进程类似于在 Windows 开始菜单的运行对话框中键入信息。

但我碰巧知道“运行”对话框除了搜索`%path%`和/或工作目录和/或可执行目录之外至少做了一件事：

注册表项`HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\App Paths`提供从在“运行”对话框中键入的文件名到应用程序的完整路径名的映射。安装程序通常会在此处添加子项，以便使用“运行”启动程序，即使它位于`...\Program Files\...`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:29:43.900

它将查看您的 Application Exe 文件夹。通常它在`bin\Debug`或`bin\Release`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T09:46:09.250

DLL 是根据这种[搜索模式](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx)定位的：

1.  当前进程的可执行模块所在的目录。
2.  当前目录。
3.  Windows 系统目录。
4.  Windows 目录。
5.  PATH 环境变量中列出的目录。

最有可能的 EXE 遵循相同的模式。

# cuda - 如何在 CUDA 中捕获重置机器的错误

> ID：14375831
> 
> 赞同：0
> 
> 时间：2013-01-17T09:27:33.490
> 
> 标签：cuda, nvidia, nvcc

我已经实现了一个计算向量之间距离的内核。程序按预期运行，结果与 CPU 相同。程序释放设备中使用的资源（`cudaFree`）并正常退出。另外，在退出之前我使用了`cudaDeviceReset()`.

所有 CUDA API 调用都被包装以检查 Eclipse Nsight API 示例中的错误。程序执行过程中不报告错误。

内核在对全局内存执行读或写访问之前检查内存位置索引，即`if ( idx < N ) ...`

在 CPU 中，循环是在调用内核之前`p`执行 a`cudaMalloc`和 a的执行次数，以及在下一次迭代之前执行 a 的次数。A放置在内核之后和 cudaFree 调用之前以等待 GPU 启动的工作完成。`cudaMemcpy(HtoD)``cudaFree()``cudaDeviceSynchronize()`

在`cuda-memcheck`Release 和 Debug 模式下分析程序时不会报告任何错误。

但是，有时计算机在运行程序时会重新启动，而我没有找到任何重复模式来跟踪错误。所以，我的问题是：我怎么能捕获这个错误？

我在运行 X 系统的 Ubuntu x86_64 GNU/Linux 中使用 CUDA 版本 5.0、V0.2.1221。设备为GTX480，安装的驱动版本为304.54。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:51:23.343

这是与设备温度有关的问题。

根据@Robert Crovella 的评论，我在 x86_64 GNU/Linux 专用服务器（没有运行 X 系统）中执行内核，同样使用 CUDA 5，但使用 GTX680。该程序始终成功运行。

我使用命令跟踪了使用的 GPU 内存和温度`nvidia-smi`，发现我的计算机在温度超过 70 度时会重置。

因此，问题与任何内存泄漏或内存访问冲突无关，而是与设备的密集使用有关。

# html - 不同颜色的 HTML5 画布线

> ID：14375834
> 
> 赞同：0
> 
> 时间：2013-01-17T09:27:41.537
> 
> 标签：html, html5-canvas

我正在创建一个折线图，如链接[http://www.worldwidewhat.net/2011/06/draw-a-line-graph-using-html5-canvas/](http://www.worldwidewhat.net/2011/06/draw-a-line-graph-using-html5-canvas/)

在这里我想用不同的颜色画线，我试图在画线之间使用 beignPath() 。这是我使用的一段代码

```
c.strokeStyle = '#f00';
c.beginPath();
c.moveTo(getXPixel(0), getYPixel(data.values[0].Y));

for(var i = 1; i < data.values.length; i ++) {
    if(i > 2){
        c.strokeStyle = 'green';
        c.beginPath();
    }
    c.lineTo(getXPixel(i), getYPixel(data.values[i].Y));
    c.stroke();
} 
```

实际上我得到了一个差异线颜色，但它缺少带有“绿色”颜色的起始线描边。请帮我解决这个问题

任何帮助将不胜感激。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-23T04:34:05.933

```
<?php
$r=100;

$a1=90;
$a1=180-$a1;

$ry=60;
$yb=60;

$a2=180-(90+$ry);
$a3=180-(90+$ry+$yb);

//subtract only x coordinate from x2;
$x=150;
$y=150;

$x1=150-cos(deg2rad($a1))*$r;
$y1=150-sin(deg2rad($a1))*$r;

$x2=150-cos(deg2rad($a2))*$r;
$y2=150-sin(deg2rad($a2))*$r;
$x2e=$x2-tan(deg2rad($a2));
$y2e=((($x2e-$x2)*($y2-$y))/($x2-$x))+$y2;

$x3=150-cos(deg2rad($a3))*$r;
$y3=150-sin(deg2rad($a3))*$r;

echo"
<!DOCTYPE html>
<html><head><style>
#i01{
    background color:red;
    width=350;
    height=350;

}

</style></head>
<body>

<canvas id='myCanvas' width='300' height='300' style='border:1px solid #d3d3d3;'  >
Your browser does not support the HTML5 canvas tag.</canvas>

<script>

var c = document.getElementById('myCanvas');
var ctx = c.getContext('2d');

ctx.beginPath();
ctx.arc(150, 150, $r, 0, 2 * Math.PI);
ctx.stroke();

//ctx.moveTo(150,150);
//ctx.lineTo(200,150);

ctx.beginPath();
ctx.moveTo($x,$y);
ctx.lineTo($x1,$y1);
ctx.font = '20px Arial';
ctx.fillText('R',$x1,$y1);
ctx.strokeStyle = 'red';
ctx.stroke();

ctx.beginPath();
ctx.moveTo($x,$y);
ctx.lineTo($x2,$y2);
ctx.strokeStyle = 'yellow';
ctx.font = '20px Arial';
ctx.fillText('Y',$x2,$y2);
ctx.stroke();

ctx.beginPath();
ctx.moveTo($x,$y);
ctx.lineTo($x3,$y3);
ctx.font = '20px Arial';
ctx.fillText('B',$x3,$y3);
ctx.strokeStyle = 'blue';
ctx.stroke();

</script>

</body>
</html>";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:01:17.697

我能够自己解决这个问题..如果将来有人需要，我会发布修复程序..我将 c.moveTo 设置为以前的 X、Y 值..并且 pblm 已修复..

# android - 如何在android的可扩展列表视图上创建智利行的圆形

> ID：14375847
> 
> 赞同：2
> 
> 时间：2013-01-17T09:28:22.910
> 
> 标签：android, expandablelistview, rounded-corners

我已经创建了可扩展列表视图。我想创建圆形子行。我已经将最后一个子行创建为圆形。但是当我们展开和折叠可扩展列表视图时，圆形子行已经改变位置。如何处理这个问题.请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:38:40.790

首先为圆形矩形背景定义一个drawable，

**round_rect_layout.xml**

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 
     <stroke android:width="1dp" android:color="#FF6363ff" />

<solid android:color="#10FFFF64" />
    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

然后你可以把这个drawable设置为你的子行的背景，

**child_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/round_rect_layout"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvPlayerName"
            android:layout_width="match_parent"
            android:layout_height="30dip"
            android:gravity="center_vertical"
            android:paddingLeft="50dp" >
        </TextView>
    </LinearLayout>

</LinearLayout> 
```

# iphone - 如何避免在Objective C中循环调用？

> ID：14375848
> 
> 赞同：0
> 
> 时间：2013-01-17T09:28:27.447
> 
> 标签：iphone, ios, objective-c, cocoa-touch, cyclic-reference

我猜标题本身就足以解决我的问题。但是我将在这里进一步解释，考虑我有两个视图控制器 A 和 B。A 是基础并且它正在推动 B，在一种情况下，我希望在视图 (B) 中单击一个按钮时从 B 提示 A。如果我有那个实例，目标 C 允许直接调用 A 视图。我认为这样做不是一个好习惯。这种情况应该怎么处理。。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:35:47.513

如果'A从B暗示'你的意思是你想调用最初负责推动B的A，你只需使用'返回'按钮或在代码中返回A：

```
[self.navigationController popViewController animated:YES]; 
```

B 不需要指向 A 的指针，导航控制器有，而 B 有指向导航控制器的指针，因为导航控制器`navigationController`在创建 B 时设置了 B 的属性。

如果您需要基于 B 中的某些操作在 A 中设置属性，则应使用委托来执行此操作。

在 B 中，您创建了一个名为 的属性`delegate`。

在 A 中，当您创建 B 时，将它的委托设置为 A：

```
ViewControllerB* vcB = [[ViewControllerB alloc] init];
vcB.delegate = self;
[self.navigationController pushViewController:vcB]; 
```

然后在 B 中，您可以在弹出之前通过委托回调 A：

```
[self.delegate sendMessageWithValue:someValue];
[self.navigationController popViewController animated:YES]; 
```

如果您想格外小心，可以将消息传递附上：

```
if ([self.delegate respondsToSelector:@selector(sendMessageWithValue:)]) { ... } 
```

为了在 B 不知道任何关于 A 的情况下完成这项工作，除了它是委托之外，B 应该在标头中声明一个委托协议（上图`@interface`）

```
@protocol BDelegateProtocol
- (void) sendMessageWithValue:(int)someValue;
@end 
```

当您`delegate`在 B's 中声明该属性时`@interface`，请指定它应遵循的协议：

```
@property (nonatomic, weak) id <BDelegateProtocol> delegate; 
```

在 A 的 @interface 标头中，宣传您遵循该协议：

```
#import BViewController;

@interface AViewController:UIViewController <BDelegateProtocol> 
```

这就是您所追求的松散耦合。B 不必导入 A 的标头。除了符合 B 的协议规范之外，它不需要知道关于 A 的任何信息。

B 确实持有指向 A 的指针，但它是一个*弱*指针。这个非常重要。如果委托属性是*strong*，则 B 会将其委托的保留计数增加 1。如果委托*还*持有指向 B 的强指针，则它们都不会被释放。当 A 存在时，B 的保留计数始终至少为 1，同样，当 B 存在时，A 的保留计数始终为 1：两者都不能被销毁。

在这种可能不会发生的特殊情况下 - A 不需要像 Nav Controller 那样保留 B - 但这种情况经常出现，因为委托通常是创建和拥有委托人的对象。[*请参阅 Apple实用内存管理*](https://developer.apple.com/library/mac/#DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)中的“使用弱引用来避免保留周期”[](https://developer.apple.com/library/mac/#DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)

# android - 带有标签的 Viewpager android

> ID：14375850
> 
> 赞同：1
> 
> 时间：2013-01-17T09:28:28.933
> 
> 标签：android, android-viewpager, android-tabhost, android-tabs

我想提供带有滑动功能的标签导航。为此，我已经尝试过[这个](https://github.com/JakeWharton/Android-ViewPagerIndicator)。

显示带有 viewpager 的选项卡的链接。类 TestFragment.java 正在添加静态视图，可以在此链接中找到类：[Here](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/TestFragment.java)
But i want to add dynamic views.Is it possible?
请建议如何实施？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:04:37.663

我做了类似的事情，我创建了基本的片段布局，然后在片段中调用了一个函数`FragmentActivity`，然后更新了视图。

最简单的方法是在 Fragment 中有一个诸如`updateFragment(data)`或类似的公共方法，并从 parent 调用它`FragmentActivity`。然后片段可以访问它自己的布局使用`this.getView()`

**编辑：** 因此您的代码的示例结构可能是：

```
Class FragmentActivity {

    method updateFragments() {
        Fragment myFrag = fragmentPagerAdapter.getItem(position);
        myFrag.updateView("This is my new example string to display on the page");
    }
}

Class Fragment {
    public method updateView(String newData) {
        ((TextView) this.getView().findViewById(R.id.text1)).setText(newData);
    }
} 
```

# java - 电话簿编程 - TreeSet 或 HashSet

> ID：14375853
> 
> 赞同：1
> 
> 时间：2013-01-17T09:28:38.170
> 
> 标签：java, equals, treeset

我有一个很好的问题 -**创建一个电话簿**- 包含联系人列表。就像电话簿一样，

1.  联系人将始终排序。（按名称）
2.  可以星号标记某些联系人，所以他们必须高于所有其他人。（*联系人按联系人创建时间排序）

    ```
    class PhoneBook{
    //require an always sorted d.s
    TreeSet<Contact> contacts = new TreeSet<Contact>();

    @Override
    public String toString() {
        return "PhoneBook [contacts=" + contacts + "]";
    }

    public boolean addContact(Contact contact){
        //validate before adding the contact.
        return contacts.add(contact);
    } 
    ```

    }

    ```
    class Contact implements Comparable<Contact>{
    String name;
    int phoneNo;
    Date timeAdded;
    boolean starContact;

    public Contact(String name, int phoneNo, Date timeAdded, boolean starContact) {
        super();
        this.name = name;
        this.phoneNo = phoneNo;
        this.timeAdded = timeAdded;
        this.starContact = starContact;
    }

    @Override
    public int compareTo(Contact otherContact) {
        if(this.starContact && otherContact.starContact){
            return this.timeAdded.before(otherContact.timeAdded)?-1:1; //impossible to add 2 contacts at the same time
        }else if(this.starContact){
            return -1;
        }else if(otherContact.starContact){
            return 1;
        }else{
            //simple Contacts
            return this.name.compareTo(otherContact.name);
        }
    }

    @Override
    public String toString() {
        return "\nContact [name=" + name + ", timeAdded=" + timeAdded
                + ", starContact=" + starContact + "]";
    }

    } 
    ```

**测试代码**

```
 public class MobilePhoneBookDemo {

/**
 * @param args
 */
public static void main(String[] args) {

    PhoneBook phoneBook = new PhoneBook();

    Contact frnd1 = new Contact("Z",56,new Date(),false);
    phoneBook.addContact(frnd1);
    Contact frnd2 = new Contact("A",3,new Date(),false);
    phoneBook.addContact(frnd2);
    Contact frnd3 = new Contact("C",30,new Date(),false);
    phoneBook.addContact(frnd3);
    try {
        TimeUnit.SECONDS.sleep(1);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Contact ta = new Contact("Ta", 5, new Date(), true);
    phoneBook.addContact(ta);
    Contact ma = new Contact("Ma", 31, new Date(), true);
    phoneBook.addContact(ma);
    Contact baba = new Contact("Baba", 300, new Date(), true);
    phoneBook.addContact(baba);

    //change the priority later for one of my friends.
    System.out.println(phoneBook);
    frnd1.starContact = true;
    System.out.println(phoneBook.contacts.contains(frnd1));

    if(phoneBook.contacts.remove(frnd1)){
        System.out.println("removed");
        phoneBook.contacts.add(frnd1);
    }

    System.out.println(phoneBook);
} 
```

}

面临的问题：

1.  包含不再找到条目，有什么问题？我确实尝试在 Contact 上放置一个等号和一个哈希码，显然，如果存在 Comparator/Comparable，则仅调用 compare*。
2.  在这里使用 TreeSet 是否公平，还是应该使用任何其他数据结构？例如。HashSet然后转换成TreeSet？
3.  contains() 甚至不比较地图中的所有条目，它只是与 C、Ma 和 Ta 条目进行比较。那是为什么？

题目按顺序排列。我感谢所有的答案，但这确实是一个完整的测试用例，所以请在提供答案之前尝试运行一次电话簿。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:36:20.030

这一行：

`return this.timeAdded.before(otherContact.timeAdded)?-1:1;`

如果您将联系人与其自身进行比较，则永远不会返回 0。因此，集合将无法找到对象`contains()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:32:59.170

你让我在

> 联系人将始终排序。（按名称）

如果顺序很重要，请使用 TreeSet。元素存储在各种二叉搜索树中，这意味着它们是默认排序的。

另一方面，HashSet 不保证任何顺序、排序甚至插入顺序。

* * *

编辑 - 尝试以这种方式编写您的条件，更易读且更健壮。条件的顺序是比较的优先顺序。

```
if(a != b){
    return a<b;
}

if(c != d) {
    return c<d;
}

//and so on.

return 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:07:41.877

解决方案很简单，先删除，然后更改值并重新添加。我先评论修改，我也加入了修改后的 compareTo()，因为它周围有很多混乱。

```
//frnd1.starContact = true;
    System.out.println("Entry present>"+phoneBook.contacts.contains(frnd1));

    if(phoneBook.contacts.remove(frnd1)){
        System.out.println("removed");
        frnd1.starContact = true;
        phoneBook.contacts.add(frnd1);
    }

@Override
public int compareTo(Contact otherContact) {
    if(otherContact.phoneNo == this.phoneNo){
        return 0;
    }
    if(this.starContact && otherContact.starContact){
        return this.timeAdded.before(otherContact.timeAdded)?-1:1; //impossible to add 2 contacts at the same time
    }else if(this.starContact){
        return -1;
    }else if(otherContact.starContact){
        return 1;
    }else{
        //simple Contacts
        return this.name.compareTo(otherContact.name);
    }
} 
```

# java - JMockit 和 Fest UI 测试

> ID：14375854
> 
> 赞同：2
> 
> 时间：2013-01-17T09:28:40.887
> 
> 标签：java, tdd, jmockit, fest

我一直在从事一个包含许多 UI 组件的项目。由于所有组件都基于 MVC 模式，因此它们被构造为一个组件——公共接口和工厂，封装受保护的模型/视图/控制器。

“手动”测试它们 - 使用模拟技术太困难且耗时。

所以我加入了 Fest 框架 - [http://fest.easytesting.org/](http://fest.easytesting.org/)。这很简单，很好并且可以完成工作。

当我尝试同时使用 JMockit - [http://code.google.com/p/jmockit/](http://code.google.com/p/jmockit/)和 Fest 时出现问题。我注意到 Fest 使用了一些可能与 JMockit 冲突的库——反射和断言。

当我运行测试时，JMockit 不会模拟所需的类。我以前使用过 JMockit，所以我很确定这是库之间的某种冲突。模拟类上没有生成 $Proxy$，当然，该类行为不端。

**需要模拟，因为我必须测试完整的组件交互！**

版本：

JMockit：0.999.8

巨星：

Fest-swing 1.2.1 Fest-assert 1.4 Fest-util 1.1.6 Fest-reflect 1.2

我无意通过查看两个库来寻找冲突，所以任何帮助都会很感激。

谢谢。

**更新：**

测试/示例代码在这里：

```
public interface SimpleControllable {
    void init();

    JPanel getPanel();
}

public class SimpleController implements SimpleControllable {

    private final SimpleForm simpleForm;
    private final SimpleModel simpleModel;

    public SimpleController(
            final SimpleForm simpleForm,
            final SimpleModel simpleModel
    ) {
        this.simpleForm = simpleForm;
        this.simpleModel = simpleModel;
    }

    @Override
    public void init() {
        simpleForm.init();

        //This works!
        /*simpleForm.getTestButton().addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                simpleForm.getTestButton().setText(simpleModel.getSimpleValue());
            }
        });*/

        //This doesn't!
        simpleForm.getTestButton().setText(simpleModel.getSimpleValue());
    }

    @Override
    public JPanel getPanel() {
        return simpleForm.getTestPanel();
    }
}

public class SimpleModel {

    private final SimpleServable simpleServable;

    public SimpleModel(final SimpleServable simpleServable) {
        this.simpleServable = simpleServable;
    }

    public String getSimpleValue() {
        return simpleServable.getValue();
    }
}

public interface SimpleServable {
    String getValue();
}

public class SimpleService implements SimpleServable {

    private String value;

    @Override
    public String getValue() {
        return value;
    }
}

public class SimpleForm {
    private JButton testButton;
    private JPanel testPanel;

    public void init() {
        testPanel.setName("testPanel");
        testButton.setName("testButton");
    }

    public JButton getTestButton() {
        return testButton;
    }

    public JPanel getTestPanel() {
        return testPanel;
    }
}

public class SimpleTest extends FestSwingJUnitTestCase {

    @Mocked
    private SimpleService simpleServable;

    private FrameFixture window;

    @Override
    protected void onSetUp() {
        FailOnThreadViolationRepaintManager.install();

        JFrame frameUi = GuiActionRunner.execute(new GuiQuery<JFrame>() {
            protected JFrame executeInEDT() {

                SimpleControllable simpleControllable = getSimpleControllable();

                JFrame frame = new JFrame("TEST");

                frame.add(simpleControllable.getPanel());
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.pack();

                return frame;
            }
        });

        robot().settings().delayBetweenEvents(1000);

        // IMPORTANT: note the call to 'robot()'
        // we must use the Robot from FestSwingTestngTestCase

        window = new FrameFixture(robot(), frameUi);
        window.show(); // shows the frameU
    }

    //Should use factory, but not neccesary for test purposes...
    private SimpleControllable getSimpleControllable() {
        SimpleForm simpleForm = new SimpleForm();

        //SimpleServable simpleServable = new SimpleService();
        SimpleModel simpleModel = new SimpleModel(simpleServable);

        SimpleControllable simpleControllable = new SimpleController(
                simpleForm,
                simpleModel
        );

        //Initialize the component, therein lies the problem...
        simpleControllable.init();

        return simpleControllable;
    }

    @Test
    public void test() throws Exception {
        //Before
        new Expectations() {
            {
                simpleServable.getValue();
                result = "TEST";
            }
        };

        //When

        //This works!
//        window.panel("testPanel").button("testButton").click().requireText("TEST");

        //This doesn't!
        window.panel("testPanel").button("testButton").requireText("TEST");

        //Then
    }
} 
```

看来我太早归咎于框架了。但我仍然不明白为什么它不起作用的细节。类*Service*被嘲笑，它应该仍然可以使用，即使在延迟了期望之后。我了解时间问题（组件的初始化），但不知道如何“解决”这个问题。

谢谢。

**更新2：**

谢谢，罗杰里奥。您可以使用 FEST 测试组件，但它并没有真正利用 JMockit，而且有些类有很多方法（是的，我知道 - SRP，但让我们尝试继续走这条路）并且会受益匪浅来自模拟框架，例如 JMockit。我在这里发布问题之前使用了它，因此您可以自己使用它，并了解这不是我想要的方式：

```
public class SimpleTest extends FestSwingJUnitTestCase {

    //This works, and I used this mechanism before, but this is without the help of JMockit.
    //If you have a lot of methods you want to mock this test turns into chaos.
    public static class MockSimpleServable implements SimpleServable{

        @Override
        public String getValue() {
            return "TEST";
        }
    }

//    @Mocked
//    private SimpleServable simpleServable;

    private FrameFixture window;

    @Override
    protected void onSetUp() {
        FailOnThreadViolationRepaintManager.install();

        JFrame frameUi = GuiActionRunner.execute(new GuiQuery<JFrame>() {
            protected JFrame executeInEDT() {

                SimpleControllable simpleControllable = getSimpleControllable();

                JFrame frame = new JFrame("TEST");

                frame.add(simpleControllable.getPanel());
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.pack();

                return frame;
            }
        });

        robot().settings().delayBetweenEvents(1000);

        // IMPORTANT: note the call to 'robot()'
        // we must use the Robot from FestSwingTestngTestCase

        window = new FrameFixture(robot(), frameUi);
        window.show(); // shows the frameU
    }

    //Should use factory, but not neccesary for test purposes...
    private SimpleControllable getSimpleControllable() {
        SimpleForm simpleForm = new SimpleForm();

        //SimpleServable simpleServable = new SimpleService();
        SimpleServable simpleServable = new MockSimpleServable();
        SimpleModel simpleModel = new SimpleModel(simpleServable);

        SimpleControllable simpleControllable = new SimpleController(
                simpleForm,
                simpleModel
        );

        //Initialize the component, therein lies the problem...
        simpleControllable.init();

        return simpleControllable;
    }

    @Test
    public void test() throws Exception {
        //This works!
//        window.panel("testPanel").button("testButton").click().requireText("TEST");

        //This doesn't!
        window.panel("testPanel").button("testButton").requireText("TEST");
    }
} 
```

**问题仍然存在 - 有没有人知道我可以用 JMockit 测试它，不要忘记 EDT 违规。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:59:11.480

问题出在测试代码中，它恰好`SimpleServable#getValue()`在窗口构建期间调用，*然后*在测试中记录对该方法调用的期望。

要解决此问题，只需将`new Expectation() {{ ... }}`块移至`onSetUp()`方法，将其放在对`GuiActionRunner.execute(GuiQuery)`.

以下代码的简化版本演示了它：

```
public final class SimpleForm
{
    final JPanel testPanel;
    final JButton testButton;

    public SimpleForm()
    {
        testPanel = new JPanel();
        testPanel.setName("testPanel");
        testButton = new JButton();
        testButton.setName("testButton");
        testPanel.add(testButton);
    }
}

public final class SimpleService {
    public String getValue() { return null; }
}

public final class SimpleController
{
   private final SimpleForm form;

   public SimpleController()
   {
      form = new SimpleForm();
      SimpleService service = new SimpleService();
      form.testButton.setText(service.getValue());
   }

   public JPanel getPanel() { return form.testPanel; }
}

public final class SimpleTest extends FestSwingJUnitTestCase
{
   FrameFixture window;
   @NonStrict SimpleService service;

   @Override
   protected void onSetUp()
   {
      FailOnThreadViolationRepaintManager.install();

      // Record expectations *before* they are replayed:
      new Expectations() {{ service.getValue(); result = "TEST"; }};

      JFrame frameUi = GuiActionRunner.execute(new GuiQuery<JFrame>() {
         @Override
         protected JFrame executeInEDT()
         {
            SimpleController controller = new SimpleController();

            JFrame frame = new JFrame("TEST");
            frame.add(controller.getPanel());
            frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
            frame.pack();
            return frame;
         }
      });

      robot().settings().delayBetweenEvents(1000);

      window = new FrameFixture(robot(), frameUi);
      window.show();
   }

   @Test
   public void test()
   {
      // This works provided "service.getValue()" gets called *after* 
      // expectations are recorded. With the call happening during the
      // creation of the window, it must be recorded at the beginning
      // of the "onSetUp" method.
      window.panel("testPanel").button("testButton").requireText("TEST");
   }
} 
```

# php - 将查询从传统 MySQL 切换到 PDO 格式

> ID：14375859
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:29:14.350
> 
> 标签：php, mysql, pdo

我正在将 PHP 中与 mysql 相关的所有内容转换为 PDO 格式。话虽如此，我需要问一个问题。

我有一个看起来像这样的查询：

```
$query = "SELECT COUNT(*) FROM table WHERE home_team = '".$team."' AND home_score > away_score"; 
```

使用 PDO，我尝试过：

```
$query = "SELECT COUNT(*) FROM table WHERE home_team=:team AND home_score>:away_score";
$stmt = $db->prepare($query);
$stmt->bindValue(':team', $team, PDO::PARAM_STR);
$count = $stmt->fetchColumn(); 
```

然而，当 $count 被回显时，什么也没有出现。我有一种强烈的感觉，这是因为错误与查询有关。但是，我对 PDO 还很陌生，不能以 mysql_query() 或 die(mysql_error()); 的方式显示错误消息。将。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:35:34.560

您在通话中缺少错误处理核心。检查 PDO 错误：

一个。将 PDO 错误模式更改为异常：

```
$connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

在此之后，一个 PDO 错误将导致一个 PDOException 的实例，您可以捕获/检查它。

或者

湾。在查询执行/PDO 调用后使用[errorInfo](http://php.net/manual/en/pdo.errorinfo.php)函数检查错误。

```
$stmt = $dbh->prepare('bogus sql');
if (!$stmt) {
    echo "\nPDO::errorInfo():\n";
    print_r($dbh->errorInfo());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:35:41.223

```
$query = "SELECT COUNT(*) FROM table WHERE home_team=:team AND home_score>:away_score";
$stmt = $db->prepare($query);
$stmt->execute(array(':team' => $team, ':away_score' => $away_score)); //- you are missing this line
$count = $stmt->fetchColumn(); 
```

[此处](http://php.net/manual/en/pdostatement.fetchcolumn.php)的示例 1显示应该先准备查询，然后再执行。之后，您将能够使用 fetchColumn 获得结果。此外，您似乎缺少 away_score 值。我已经在执行函数中传递了它

如果离开分数是一列，请不要将其标记为占位符（`:`设置在其名称之前）：

```
$query = "SELECT COUNT(*) FROM table WHERE home_team=:team AND home_score > away_score"; 
```

而不是执行：

```
$stmt->execute(array(':team' => $team)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:36:39.340

在 mysql 中，我们知道有 mysql_fetch_row()、mysql_fetch_array() 和 mysql_fetch_assoc()。

对于 PDO，有很多类型的 fetch

```
<?php
// configuration
$dbtype= "mysql";
$dbhost= "localhost";
$dbname= "test";
$dbuser= "root";
$dbpass= "admin";

// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
// query
$sql = "SELECT title FROM books ORDER BY title";
$q   = $conn->query($sql);
// fetch
while($r = $q->fetch()){
  print_r($r);
}
// result
//Array ( [title] => book_title [0] => book_title ) 
?> 
```

这是你不必*准备声明的*时候，如果你必须这样做，你应该按照这个步骤

```
<?php
// configuration
$dbtype= "mysql";
$dbhost= "localhost";
$dbname= "test";
$dbuser= "root";
$dbpass= "admin";

// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
$title = 'PHP AJAX is Awesome';
// query
$sql = "SELECT * FROM books WHERE title = ?";
$q = $conn->prepare($sql);
$q->execute(array($title));
$q->setFetchMode(PDO::FETCH_BOTH);
// fetch
while($r = $q->fetch()){
  print_r($r);
}
?> 
```

如果您使用通配符会更好*吗？*对于属性（因为它类似于 ORM 系统）

例如，在您的情况下，您应该这样做

```
$query = "SELECT COUNT(*) FROM table WHERE home_team=? AND home_score > ?";
$stmt = $db->prepare($query);
$stmt->execute(array($team,$HScore));
$stmt->setFetchMode(PDO::FETCH_BOTH);
$numbers = $stmt->fetch(); 
```

# objective-c - 我怎样才能得到数组的每第四个元素？

> ID：14375863
> 
> 赞同：-2
> 
> 时间：2013-01-17T09:29:19.387
> 
> 标签：objective-c, nsmutablearray, nsarray

我的问题是，如果数组计数大于 4，我有一个`NSMutableArray`名称包含对象。`latLongArray`

我想在另一个名为 elementArray 的数组中添加每 4 个对象，如果少于 4 个想在 elementArray 中添加所有对象，然后打印 NSLog 中的所有数据

任何人都可以帮助我吗？我是 iPhone 开发的新手。这是我的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *cellText = selectedCell.textLabel.text;
    placeDC *placedc;
    placedc  = [dataArray objectAtIndex:[indexPath row]];
    if ([txtFrom isFirstResponder]) {

        txtFrom.text=cellText;

        NSLog(@"%@",cellText);
        originlat=placedc.latitude;
        originlng=placedc.longitude;
        NSLog(@"%@",placedc.countryFullName);
    }
    else
{
    txtTo.text=cellText;
    destinationLat=placedc.latitude;
    DestinationLng=placedc.longitude;
    DBHandler *db=[[DBHandler alloc]init];
    NSLog(@"%@",placedc.countryFullName);
    latLongArray=[db googlePlaces:originlat :originlng :destinationLat :DestinationLng];
    if ([latLongArray count]>4) {
        for (int i =0; i<=[latLongArray count]; i=i+4) {

        }
        NSLog(@"%d",[elentArray count]);
           }
   }

    myTableView.hidden=YES;
    [self.view endEditing:YES];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:33:25.053

只是改变 ：

```
NSMutableArray *newArrayOfFourthElement = [[NSMutableArray alloc] init];
elementArray = [[NSMutableArray alloc] init];
int j = 3;
if ([latLongArray count]>4) 
{
   for (int i =0; i <= [latLongArray count]; i=i+4)
   {
      if (j < [latLongArray count])
      {
            [newArrayOfFourthElement addObject:[latLongArray objectAtIndex:j]]; // This line will add all the forth element(i.e. 4,8,12....) from your latLongArray to newArrayOfFourthElement array.
      }
      j = j + 4;
   }
}
else
{
   elementArray = [[NSMutableArray alloc]initWithArray:latLongArray];
}

NSLog("New array is %@",newArrayOfFourthElement);
NSLog("elementArray is %@",elementArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:38:55.547

```
-(void) arrayExample{
    NSMutableArray *newArray = [[NSMutableArray alloc] init];

    if (_longArray.count > 4) {
        int lastObjectIndex = _longArray.count -1;
        int nextIndexToAd = 3;
        while (nextIndexToAd <= lastObjectIndex) {
            [newArray addObject:[_longArray objectAtIndex:nextIndexToAd]];
            nextIndexToAd += 4;
        }
    }
    else{
        newArray = [_longArray mutableCopy];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:45:16.867

如果你想添加第四个元素

```
NSMutableArray *elementArray = [[NSMutableArray alloc] init];

if ([latLongArray count]>4)
{
    //add 4th element mean object at index 3
    [elementArray addObject:[latLongArray objectAtIndex:3]];
}
else{
    elementArray=[latLongArray mutableCopy];
}
NSLog(@"elentArray array >> %@  and count = %d",elentArray,[elentArray count]); 
```

如果你想添加每四个元素

```
NSMutableArray *latLongArray = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9", nil];
    NSMutableArray *elementArray = [[NSMutableArray alloc] init];

    if ([latLongArray count]<4)
    {
        elementArray=[latLongArray mutableCopy];
    }
    else{
        do {
            [elementArray addObject:[latLongArray objectAtIndex:3]];
            [latLongArray removeObjectsInRange:(NSRange){0, 4}];
        } while ([latLongArray count]>4);

    }

    NSLog(@"%@",elementArray); 
```

# r - 计算R中的函数周期

> ID：14375866
> 
> 赞同：3
> 
> 时间：2013-01-17T09:29:21.260
> 
> 标签：r, function, period

某些函数的计算周期是否有任何 R 包？我正在寻找这样的 r 函数：

```
x <- seq(0, 50, by = 0.05)
y <- sin(x)
p <- calcPeriod(x, y) # result = 2pi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:20:53.427

我认为您正在寻找类似于快速傅立叶变换的东西。我不是专家，但我认为您可以按照以下方式做一些事情：

```
x <- seq(0, 50, by = 0.05)
y <- sin(x)

calcPeriod <- function(x, y){
    incr <- x[2] - x[1]
    tmp <- spectrum(y, plot=FALSE)
    p <- (1/tmp$freq*incr)[which.max(tmp$spec)] # max of spectrum
    p
}

calcPeriod(x,y) # equals 6.4 
```

该函数`spectrum`实际上是`spec.pgram`和的包装函数`spec.ar`。请谨慎使用，因为该`calcPeriod`功能实际上仅识别最大周期。对于不均匀采样的系列，最小二乘谱分析也可以识别主要的周期性（[示例链接](http://menugget.blogspot.de/2013/01/lomb-scargle-periodogram-for-unevenly.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:39:56.160

Paul H. 的回答提醒我，如果您不想处理傅立叶分析，您可以随时运行`nls(y~sin(k*x))` 或其增强版本。这确实假设您事先知道数据中只有一个频率。

我会把我常用的插件放在这里`Eureqa`，很容易通过谷歌在 Cornell.edu 上找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:03:54.133

我自己不知道这样的函数，但您可以使用它`optim`来优化以周期为参数的成本函数。`optim`然后会调整周期，直到获得最佳拟合。这不是很难做到，你可以`calcPeriod`自己把它包装成一个函数。

# javascript - 高度属性在 chrome 中不起作用

> ID：14375868
> 
> 赞同：2
> 
> 时间：2013-01-17T09:29:23.067
> 
> 标签：javascript, css, height

我的 Web 应用程序中有一个工作表。它使用 javascript 函数在该工作表的底部添加一个空行。该javascript函数如下所示。

```
ui.app.spreadsheet.FooterDataPadding.prototype.adjustPaddingToFooter = function () {
    this.getDomElement().style.height = this.getApplicationControl().getFooter().getDomElement().offsetHeight;
} 
```

运行该函数后，html 部分如下所示。

```
div class="ui_app_spreadsheet_FooterPadding-layout " id="util_Document-uid185" style="height: 21px;" 
```

在 Firefox 和 IE 中，这工作得很好。它将那个`21px`高空行添加到工作表的底部。但是在 Chrome 中，即使它包含在源代码中，它也不会显示在 UI 中。我努力寻找解决方案。但不能。如果有人能找到解决方案，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:48:56.053

Empty Div 有时会在不同的浏览器中显示突然的行为。

尝试将浏览器的 innerHTML 设置为空或空格：

```
document.getElementById('your_elem').innerHTML = '&nbsp'; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:07:52.003

可以尝试以下：

```
var domElement = this.getDomElement();
domElement.style.height = this.getApplicationControl().getFooter().getDomElement().offsetHeight;
domElement.innerHtml = "&nbsp;" 
```

或者在您的高度声明中可能是 concate + "px"。

或者

```
domElement.innerHTML="<div style='height:" + height + "px;'></div>"; 
```

# php - 如何在 ZF2 中渲染带有布局的邮件模板？

> ID：14375869
> 
> 赞同：10
> 
> 时间：2013-01-17T09:29:29.537
> 
> 标签：php, email, templates, layout, zend-framework2

在 ZF1 中，我使用以下代码呈现邮件正文：

```
// View erstellen
$view = new Zend_View();
// Layout erstellen
$layout = new Zend_Layout();

// HelperPath muss hier nochmals übergeben werden da es ein neues View Objekt ist.
$view->addHelperPath('Own/View/Helper', "Own_View_Helper_");

// ViewScript
$view->setScriptPath(APPLICATION_PATH . '/views/scripts/emails/');

// LayoutPath
$layout->setLayoutPath(APPLICATION_PATH . '/layouts/scripts/');

$layout->setLayout('layoutMail');
$layout->setView($view);

foreach ($assigns as $key => $value) {
    $view->assign($key,$value);
}

$layout->content = $view->render($templateName);
return $layout->render(); 
```

我尝试了很多，但我无法在 ZF2 中实现此功能。我的实际代码是这样的。但它使用标准布局，我无法在字符串中获取它。

```
public function mailAction()
{
    $viewModel = new ViewModel();
    $viewModel->setTemplate("zhorty/test");
    $viewModel->setVariable('test', 'some value');
    return $viewModel;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T09:17:43.783

谢谢！你的回答帮助了我！

我扩展了代码。所以我也可以使用布局模板。

```
$view = new \Zend\View\Renderer\PhpRenderer();
$resolver = new \Zend\View\Resolver\TemplateMapResolver();
$resolver->setMap(array(
            'mailLayout' => __DIR__ . '/../../../../Application/view/layout/layout-mail.phtml',
            'mailTemplate' => __DIR__ . '/../../../view/zhorty/test.phtml'
    ));
$view->setResolver($resolver);

$viewModel = new \Zend\View\Model\ViewModel();
$viewModel->setTemplate('mailTemplate')
    ->setVariables(array(
    'test' => 'AlloVince'
));     

$content = $view->render($viewModel);

$viewLayout = new \Zend\View\Model\ViewModel();
$viewLayout->setTemplate('mailLayout')
     ->setVariables(array(
            'content' => $content
));

echo $view->render($viewLayout); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-22T15:17:57.073

我的回答基于 user1986560 的回答和[How to Render a custom view with plugins in Zend Framework 2](https://stackoverflow.com/questions/15073871/how-to-render-a-custom-view-with-plugins-in-zend-framework-2)。我正在添加它，因为我认为它使事情更容易实现。

我有一个电子邮件布局和不同的内容文件。布局可以重复使用并添加不同的内容文件。

**查看/电子邮件/layout.phtml**

```
<table>
    <tr><td><img src="header.png" /></td></tr>
    <tr><td><?= $this->content; ?></td></tr>
    <tr><td><img src="footer.png" /></td></tr>
</table> 
```

**查看/电子邮件/contact.phtml**

```
<h1>Contact us email</h1>
</ br>
Name: <?= $this->name;?></ br>
Email: <?= $this->email;?></ br>
Message:<?= $this->message;?></ br> 
```

在您的模块配置文件中，添加布局和不同的内容文件。通过这样做，您可以使用视图助手。

**模块.config.php**

```
'view_manager' => array(
    'template_map' => array(
        'email/layout'  => __DIR__ . '/../view/email/layout.phtml',
        'email/contact' => __DIR__ . '/../view/email/contact.phtml',
    ), 
```

在您的**控制器/操作中**：

```
// View renderer
$renderer = $this->getServiceLocator()->get('Zend\View\Renderer\RendererInterface');

// Email content
$viewContent = new \Zend\View\Model\ViewModel(
    array(
        'name'    => $name,
        'email'   => $email,
        'message' => $message,
));
$viewContent->setTemplate('email/contact'); // set in module.config.php
$content = $renderer->render($viewContent);

// Email layout
$viewLayout = new \Zend\View\Model\ViewModel(array('content' => $content));
$viewLayout->setTemplate('email/layout'); // set in module.config.php

// Email
$html = new MimePart($renderer->render($viewLayout));
$html->type = 'text/html';
$body = new MimeMessage();
$body->setParts(array($html));
$message = new \Zend\Mail\Message();
$message->setBody($body); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-18T03:49:48.227

希望我的一篇博文对您有所帮助，它是关于[如何在 Zend\Mail 中使用 Zend\View 作为模板并在 ZF2 中添加附件](http://avnpc.com/pages/zf2-mail-advanced-usage-for-template-multi-attachment)

是中文写的，不过我觉得只要看代码就够清楚了。你也可以[在谷歌翻译的帮助下阅读它](http://translate.google.com/translate?hl=zh-CN&ie=UTF8&prev=_t&sl=zh-CN&tl=en&twu=1&u=http://avnpc.com/pages/zf2-mail-advanced-usage-for-template-multi-attachment)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T12:49:54.460

对于 sendig 电子邮件，我推荐以下模块：[https ://github.com/WasabiLib/Mail](https://github.com/WasabiLib/Mail)

该模块基于 ZF2 消息，并被配置为服务。所以你只需要调用servicemanager。

body 方法能够处理 ZF2 视图模型。请参见下面的示例：

```
$mail = $this->getServiceLocator()->get("Mail");
$viewModel = new ViewModel(array('$yourVariable1' => 'yourContent1', $yourVariable2=>'yourContent2',...));
$viewModel->setTemplate("responsive");
$mail->setTo('recipient@domain.com');
$mail->setBody($viewModel);
$mail->send(); 
```

它与您可以自定义的响应式电子邮件模板捆绑在一起。您只需将模块添加到 application.config.php 即可。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-15T07:49:26.523

@user1986560 答案不完整，因为您必须需要一些基本的帮助程序，例如带有路由器的“url”，有时还需要“basePath”。

这是完整的代码 -

```
$myApp=Zend\Mvc\Application::init(require 'config/application.config.php');
$sm=$myApp->getServiceManager();

$view=new \Zend\View\Renderer\PhpRenderer();
$view->getHelperPluginManager()->setServiceLocator($sm);
$basePathX='/your-folder-from-where-you-want-to-run';
$request=$myApp->getRequest();
if($request instanceof \Zend\Http\PhpEnvironment\Request){
    #die($request->getBasePath());
    $basePathX=$request->getBasePath();
}
$basePath1=explode('/', $basePathX);
/* please fix this path as your requirement */
array_pop($basePath1);
$bsPath=implode('/', $basePath1).'/';
/* following line will fix your router path, it is important */
$myApp->getMvcEvent()->getRouter()->setBaseUrl($bsPath);
$basePath=new \Zend\View\Helper\BasePath();
$basePath->setBasePath($bsPath);
$view->getHelperPluginManager()->setService('basePath', $basePath);
$urlHlpr=new \Zend\View\Helper\Url();
$urlHlpr->setRouter($myApp->getMvcEvent()->getRouter());
$view->getHelperPluginManager()->setService('url', $urlHlpr);

$resolver=new \Zend\View\Resolver\TemplateMapResolver();
$resolver->setMap(array(
        'wmsLayout' => APP_ROOT_PATH . 'module'.DS.'YourModule'.DS.'view'.DS.'layout'.DS.'layout1.phtml',
        'layout/left-menu' => APP_ROOT_PATH . 'module'.DS.'YourModule'.DS.'view'.DS.'layout'.DS.'left-menu.phtml',
));
$view->setResolver($resolver);

$viewModel = new \Zend\View\Model\ViewModel();
$tmpltFileToLoad=__DIR__ . DS.'your-file-to-render.phtml';
$tmpltIdx='_'.md5($tmpltFileToLoad);
$resolver->add($tmpltIdx, $tmpltFileToLoad);
$viewModel->setTemplate($tmpltIdx)->setVariables(array(
        'test' => 'shahadat hossain khan'
));
$content=$view->render($viewModel);

$viewLayout = new \Zend\View\Model\ViewModel();
$viewLayout->setTemplate('wmsLayout')->setVariables(array(
        'content' => $content,
        'anyOtherVariableForLayout'=>'layout variable value',
    ));
echo $view->render($viewLayout); 
```

希望它对我有所帮助。

# magento - Magento：在成功页面上获取购物车信息

> ID：14375873
> 
> 赞同：2
> 
> 时间：2013-01-17T09:29:52.657
> 
> 标签：magento

我需要你的帮助来解决我的 magento 问题。我有一个用于跟踪订单的成功页面的跟踪代码。这是我的跟踪代码：

```
<script language="javascript" type="text/javascript">
(function(){
var properties = {};
properties.billing_orderid      = 'PLEASE ADD A UNIQUE ORDER ID'; // this id must be unique otherwise we will count the conversion only once
properties.billing_address      = 'NULL'; // if needed
properties.billing_customerid   = 'NULL'; // if needed
properties.billing_sum          = 'ADD BASKET VALUE HERE, ONLY . SIGN ALLOWED';

// each line represents a product, please add neccassary line for each product and put the right values into it
properties.ec_Event=[
 // Syntax: Action, ProductID, Name, Price, Category, Number of Items, NULL, NULL, NULL
 // please avoid any ' sign in each value especially in the product name or make the right javascript quoting by using \' instead of single '
 ['buy' /* stay fix */ 'YOUR PRODUCT ID', 'PRODUCT NAME', 'PRICE', 'CATEGORY', NUMER OF ITEMS, 'NULL' /* stay fix */, 'NULL' /* stay fix */, 'NULL' /* stay fix */],
 ['buy', 'ABC123', 'Nike shoe ', '50.00', 'shoes/nike', 2,'NULL', 'NULL', 'NULL']];
A3320.trackEvent(properties);
})();
</script> 
```

我知道如何获得总价：

```
$total = sprintf("%1\$.2f",$grandTotal); 
```

但我不知道如何获取产品列表。你们有没有人给我小费？

非常感谢！

来自德国的问候，Raisis

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:31:54.380

在成功页面中，您可以访问 order-id：`$this->getOrderId();`

然后加载您的订单并遍历订单项目以获取产品：

```
$_order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
foreach ($_order->getAllItems() as $item) {
// do stuff with the item or optionally load them to get full product.
} 
```

PS：您可以按 SKU 或按 ID 加载：`$product = Mage::getModel('catalog/product')->loadByAttribute`或`$product = Mage::getModel('catalog/product')->load(<productID>)`

# dojo - dojo 1.8：选择时的值指示符

> ID：14375877
> 
> 赞同：0
> 
> 时间：2013-01-17T09:30:06.590
> 
> 标签：dojo

嗨，我已经设置了 dijit/select，但问题是我不确定在选择时要捕获并指示值。我见过 dijit/form select、dojo.query 和 dojo/on。但我仍然无法想出解决方案。你能建议吗？谢谢

```
var select_Card = new Select
(
 {name:'select_PCBA',
  options:
       [
  {label:"<span id='NotinUse'><b>&nbsp&nbsp&nbsp. . .</b></span>", value:"", selected:true},
 {label:"<span id='NotinUse'><b>&nbsp&nbspA Card</b></span>", value:"a" },
 {label:"<span id='inUse'><b>&nbsp&nbspB Card</b></span>", value:"b"},
 {label:"<span id='NotinUse'><b>&nbsp&nbspC Card</b></span>", value:"c"},
 {label:"<span id='NotinUse'><b>&nbsp&nbspD Card</b></span>", value:"d"},
 {label:"<span id='NotinUse'><b>&nbsp&nbspE Card</b></span>", value:"e"},
       ], style:{width:'150px'}
},"select_Card");

    var card = dom.byId('inUse');   
on(card,'click', function(evt)
{
     alert('Item selected is'+ card.value);
    }); 
```

克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:47:37.947

小部件的`onChange`事件是您想要的。

```
on(select_Card, 'change', function(newValue){
    alert(newValue);
}); 
```

[http://jsfiddle.net/cswing/udJuv/](http://jsfiddle.net/cswing/udJuv/)

# spring - 如何在 Maven 测试中加载 Spring 应用程序上下文

> ID：14375883
> 
> 赞同：1
> 
> 时间：2013-01-17T09:30:48.590
> 
> 标签：spring, maven, junit, junit4

我有一个**Maven Web 项目**，我想在其中执行一些 JUnit 集成测试。为此，我想加载*applicationContext.xml*文件以获取 Spring 注入的 bean。我的应用程序上下文文件也位于 中`src/main/resources/app_context`，但是在执行 Maven 的生命周期时，它会将它们定位到`WEB-INF/classes/application_context`中，因此我可以通过类路径访问它们。

```
<resource>
    <directory>src/main/resources/appcontext</directory>
    <targetPath>${basedir}/src/main/webapp/WEB-INF/classes/application_context</targetPath>
    <filtering>true</filtering>
    <includes>
        <include>*/**</include>
    </includes>
</resource> 
```

我试图以某种方式访问​​该上下文，但没有成功。我也以这种方式将它们放入 Maven 的目标测试目录中：

```
<testResources>
    <testResource>
        <directory>
                src/main/resources/appcontext
            </directory>
        <targetPath>${basedir}/src/main/webapp/WEB-INF/classes/application_context</targetPath>
    </testResource>
</testResources> 
```

这是我的一部分测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:**/applicationContext.xml" })
@Transactional
public class SystemTest {

    @Autowired
    ApplicationContext applicationContext;

    @Test
    public void initializeSystemTest() {
            //Test code 
```

这就是我如何从我的主要文件访问其余应用程序上下文文件的方式：

```
<?xml version="1.0" encoding="ISO-8859-15"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:cxf="http://cxf.apache.org/core" xmlns:jaxws="http://cxf.apache.org/jaxws"
xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <import resource="classpath:application_context/ApplicationContext*.xml" />
    <context:annotation-config />
    <!--========== Spring Data Source ========== -->
    <!--Bean stuff--> 
```

基本上，我只想存储每个 applicationContext 文件的副本，`src/main/resources`并让 Maven 复制它们以用于测试和执行范围。但是我的测试类无法找到并加载它们。我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:36:47.387

假设你`applicationContext.xml`是 in ，默认情况下`src/main/resources/appcontext`Maven 会重新分配它。`WEB-INF/classes/appcontext`不必为该资源分配新路径。

您应该能够在测试中找到上下文文件：

```
@ContextConfiguration(locations={"/appcontext/applicationContext.xml"}) 
```

您不应该为此需要额外的 Maven 设置。

# php - 如何仅使用电子邮件 ID 知道 Facebook 用户 ID？

> ID：14375885
> 
> 赞同：2
> 
> 时间：2013-01-17T09:30:50.477
> 
> 标签：php, facebook, facebook-graph-api

我有 facebook 用户的电子邮件地址，
我想知道使用电子邮件 ID 的用户名/用户 ID，
这怎么可能？，
实际上我需要使用电子邮件 ID 显示 Facebook 个人资料图片
，提前谢谢。
****过程：（a）通过电子邮件发送->（b）用户ID->（c）个人资料图像****
*过程（b）->（c）由我完成，它正在成功运行。我在 (a)->(b) 过程中需要帮助*

提前致谢。

谁能知道 speako.com 是如何工作的
，它可以使用电子邮件 ID 获取 facebook 个人资料图片
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:34:52.460

您的应用程序不可能通过他的电子邮件搜索用户。您可以找到某个用户的电子邮件（如果您有他的 uid 和访问电子邮件的权限），但反之则不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:38:48.113

有可能，您需要使用 Graph API 执行搜索

`https://graph.facebook.com/search?q=EMAIL&type=user&access_token=YOUR_ACCESS_TOKEN`

您可以在[Graph API Explorer 工具中对其进行测试](http://developers.facebook.com/tools/explorer)

但是：请注意，这可能不适用于具有高隐私级别的人

# ios - iOS UIWebView 缓存问题

> ID：14375891
> 
> 赞同：0
> 
> 时间：2013-01-17T09:30:58.830
> 
> 标签：ios, xcode, caching, web-applications, uiwebview

我的目标是在 iOS 上使用 UIWebView 构建一个 Web 应用程序，基本上就像 BlackBerry 为 Webworks 所做的那样。

阅读后，我不确定缓存是如何工作的，所以我尝试了以下测试：

开始使用“Hello World”创建简单的 Web 应用程序。

构建并运行应用程序 - 工作正常

然后更改了 login.html（这就是我的 hello world 的名称） 我所做的更改是我用指向另一个页面的超链接重新创建了 hello world。

当我再次构建并运行时，旧页面仍然显示。

所以我假设某处有缓存？

有没有做以下/最好的事情？

*   禁用缓存，因为速度并不重要我们所有的文件都在磁盘上？
*   每次启动应用程序时清除缓存？

有没有人遇到过这个？

谢谢

我试过了： [如何从 UIWebview 或 dealloc UIWebview 中删除缓存](https://stackoverflow.com/questions/3683576/how-to-delete-the-cache-from-uiwebview-or-dealloc-uiwebview)

另一个更新------

尝试了另一个简单的测试，我删除了我的 HTML 文件夹，其中包含所有 html、css、js 文件，所以它现在在垃圾箱中。再次运行应用程序并从项目中删除 html 引用，它仍然可以完美地加载它们。所以整个东西都缓存在某个地方。

作为另一次尝试，我还添加了：

```
-(void)dealloc{
    self.webView.delegate = nil;
    self.webView = nil;
    [webView release];
    [super dealloc];
} 
```

在 NativeViewController.m 这没有帮助。

我的应用程序代码：`

```
#import "NativeViewController.h"

@implementation NativeViewController

@synthesize webView;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
[super viewDidLoad];

NSString *filePath = [[NSBundle mainBundle] pathForResource:@"login" ofType:@"html"];  
NSData *htmlData = [NSData dataWithContentsOfFile:filePath];  
if (htmlData) {  
    NSBundle *bundle = [NSBundle mainBundle]; 
    NSString *path = [bundle bundlePath];
    NSString *fullPath = [NSBundle pathForResource:@"login" ofType:@"html" inDirectory:path];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:fullPath]]];

}
}

- (void)didReceiveMemoryWarning {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
[self.webView removeFromSuperview];
self.webView.delegate = nil;
self.webView = nil;
}

 -(void)webViewDidFinishLoad{
[[NSURLCache sharedURLCahce] removeAllCachedResponses];
}
- (void)dealloc {
[webView release];
[super dealloc];
}
@end 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:05:26.590

```
Yes..I encountered the same problem..      
I solved it by adding the below statement  in didFinishLaunchingWithOptions method of AppDelegate class

  [[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:12:36.390

试试这个

```
if ([htmlData length]==0) {
//no data
} 
```

如果数据的长度为 0，这将不会加载数据。在其他情况下，即使您从项目中删除 html 文件，它也会在模拟器中存在，除非您不重置它。

希望能帮助到你。

# c# - 如何在c#中实现没有更多实例的登录表单和主表单

> ID：14375892
> 
> 赞同：1
> 
> 时间：2013-01-17T09:30:59.077
> 
> 标签：c#, winforms, login

我正在为单击登录按钮的主表单创建一个实例，并在单击注销按钮时再次为登录表单创建实例。我的代码是

```
 if ((txtUsrNm.Text == "Admin") && (txtPswd.Text == "Admin"))
        {
            mainForm mainFm = new mainForm();
            mainFm.userNam = txtUsrNm.Text;
            mainFm.pasWrd = txtPswd.Text;
            mainFm.Show();
            this.Hide();
        }
         else
        {
            MessageBox.Show("Invalid Username or Password.");
        } 
```

并再次在注销按钮

```
 this.Hide();
        loginFrm lgn = new loginFrm();
        lgn.Show(); 
```

如果我尝试关闭而不是隐藏，则整个应用程序正在关闭。通过这样做，Application.OpenForms 计数在每次登录和注销操作时都会增加。如何在windows应用程序中实现登录和注销操作。是否有任何其他想法来实现此操作。感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:32:16.060

您需要在调用 Application.Run() 之前将登录部分放在 Program.cs 中，例如：

```
 if (new frmLogin().ShowDialog() == DialogResult.OK)
 {
     Application.Run(new frmMain());
 } 
```

然后在登录表单中输入登录代码。用户登录后，表单登录将被关闭并设置 this.dialogresualt = dialogresult.ok; 例如：

```
if (txtUserName.Text == "blah"
      && txtPassword.Text == "blah")
   {
     txtPassword.BackColor = Color.YellowGreen;
     txtUserName.BackColor = Color.YellowGreen;
     this.DialogResult = DialogResult.OK;
   }
   else
   {
     txtPassword.BackColor = Color.Salmon;
     txtUserName.BackColor = Color.Salmon;
    } 
```

# javascript - Clearbox 是否已弃用？

> ID：14375894
> 
> 赞同：2
> 
> 时间：2013-01-17T09:31:07.607
> 
> 标签：javascript, html, deprecated

我想将 javascript 库 clearbox 用于新站点，但我找不到官方网站。原始网址 ( [http://www.clearbox.hu/index_en.html](http://www.clearbox.hu/index_en.html) ) 不再有效。开发商怎么了？我可以在同一个画廊 fonctionnalites 中使用什么？

编辑：新网站： http: [//kreaturamedia.com/clearbox/index_en.html](http://kreaturamedia.com/clearbox/index_en.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:36:20.640

你可以看看[colorbox](http://www.jacklmoore.com/colorbox)

我认为非常好的解决方案。易于使用，效果很好。

如果谈论灯箱，我会用[它](http://visuallightbox.com/)一次。这也很好。

# node.js - AWS S3 node.js SDK 上传文件和文件夹权限

> ID：14375895
> 
> 赞同：77
> 
> 时间：2013-01-17T09:31:08.577
> 
> 标签：node.js, amazon-web-services, amazon-s3

我正在使用 aws-sdk 包将文件上传到 S3：

```
fs.readFile(sourceFile, function (err, data) {
    if (err) { throw err; }

    s3.client.putObject({
        Bucket: bucketName,
        Key: 'Folder/image.jpg',
        Body: data
    }, function (res) {
            console.log('Successfully uploaded file.');
        })

}); 
```

II 需要使上传的文件可以通过云端下载，如果我猜对了，我需要设置文件的权限：Everyone Open/Download，Folder2 应该公开（通过菜单 Make Public）。所以2个问题：

1) 如何设置\修改上传文件\文件夹的权限？

2) 如何使用适用于 node.js 的 AWS 开发工具包公开文件夹。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-01-17T10:12:39.303

找到它 [http://docs.aws.amazon.com/AmazonS3/latest/dev/ACLOverview.html#CannedACL](http://docs.aws.amazon.com/AmazonS3/latest/dev/ACLOverview.html#CannedACL)

需要在`putObject`or中添加选项`upload`：

```
ACL:'public-read' 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2019-12-26T08:51:18.620

以下工作就像一个魅力。（**注意 params 中的 ACL 键**）

```
const params = {
  Bucket: bucketName + path,
  Key: key,
  Body: buffer,
  ContentEncoding: 'base64',
  ContentType: 'image/jpeg',
  ACL:'public-read'
};
await s3.putObject(params).promise();
```

**注意**：IAM 权限“ **s3:PutObjectACL** ”必须包含在适当的策略中，否则您将收到**拒绝访问**错误。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-10-24T22:43:01.760

这是一个工作代码片段，它将本地文件 (test-file.gif) 上传到 S3 存储桶并打印出一个 URL 供所有人下载。

```
const fs = require('fs');
const AWS = require('aws-sdk');
AWS.config.update({ region: 'us-west-1' });

// Fill in your bucket name and local file name:
const BUCKET_NAME = 'test-bucket-name-goes-here'
const FILE_NAME_LOCAL = './test-file.gif'
const FILE_NAME_S3 = 'this-will-be-the-file-name-on-s3.gif'
const FILE_PERMISSION = 'public-read'

// Create S3 service object
s3 = new AWS.S3({ apiVersion: '2006-03-01' });

// Get file stream
const fileStream = fs.createReadStream(FILE_NAME_LOCAL);

// Upload the file to a specified bucket
const uploadParams = {
    Bucket: BUCKET_NAME,
    Key: FILE_NAME_S3,
    Body: fileStream,
    ACL: FILE_PERMISSION
};

s3.upload(uploadParams, function (err, data) {
    if (err) {
        console.log("Error", err);
    } if (data) {
        console.log("Upload Success", data.Location);
    }
}); 
```

# php - 如何在 yii 中为特定的控制器操作或视图设置布局？

> ID：14375902
> 
> 赞同：1
> 
> 时间：2013-01-17T09:31:28.570
> 
> 标签：php, yii

嗯，这部分非常重要。我正在与 YII 合作一个项目。我遇到了一个问题，例如，我试图在控制器中设置一个带有布局的操作。首先，这个动作甚至没有采用提到的默认布局，另一个动作`actionIndex()`在同一个控制器上工作正常。然后我`$this->layout='//layouts/new'`在控制器中尝试了，甚至在视图渲染到控制器时尝试了它。那甚至行不通。我检查了它是否返回任何`$content`布局`new.php`。但它甚至没有出现在 new.php 中。`die()`即使我把它放在布局的第一行也不起作用。我需要这方面的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:55:43.217

```
 public function actionTest() {
        $this->layout = 'new';
        $this->render('test');

    } 
```

在视图/布局文件夹中创建新布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T20:14:32.020

在我看来，您的操作甚至没有到达需要渲染视图的位置。操作代码中可能存在某种错误，阻止它进行到最后。为了进行测试，请清除操作中除以下内容之外的所有代码，并在此处发布您的错误。

```
$this->layout = '//layouts/new';
$this->render('view',array(
    'model'=>$model,
)); 
```

这假设您已经定义了以下布局和视图：

```
protected/views/layouts/new.php
protected/views/<controllername>/view.php 
```

new.php 是您将回显 $content 的位置，view.php 是您将显示 $model 信息的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T15:01:15.857

把它放在你的控制器中（yii 1.1）

```
public function beforeAction($action) {
    $this->layout = '//layouts/newlayout';
    return true;
} 
```

# c# - 当允许 null 为真时，为什么默认值不在列中插入？

> ID：14375904
> 
> 赞同：3
> 
> 时间：2013-01-17T09:31:32.520
> 
> 标签：c#, sql-server-2008, dataset

我有一个表地址，其中有一个名为“faxno”的列，它允许 null 并且默认值为 0。当我们使用数据集以编程方式插入一条记录时，我们将 faxno 值设为“Null”而不是“0”。

我不明白为什么会这样？

是否有可能插入默认值而不是 Null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:40:08.877

在您的插入语句中，**排除**该列`faxno`。

> 在可空列的情况下，**当发生插入并且从语句中排除列名时，将使用默认值。** 要插入空值，该列必须包含在列表中，并且空值必须显式插入。

[参考](http://www.blackwasp.co.uk/SQLDefaultColumns.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:47:37.160

当且仅当未明确指定值时才会插入默认值。

如果我有一个列`Articles (ID int not null, Title nvarchar(50) null)`的默认值为“Untitled”的表`Title`，我会这样做：

```
Insert into Articles (ID) values (1) 
```

它将插入行`(1, 'Untitled')`。但如果我这样做

```
Insert into Articles (ID, Title) values (2, null) 
```

它将插入行`(2, null)`，因为我明确要求在列中插入一个空值（根据列定义有效）`Title`。

当您将 DataSet 与 DataTable 一起使用时，无论默认设置如何，都必须用某些内容填充行的所有字段，然后在保存 DataTable 时保存所有字段。如果该字段的值具有 C# 空对象 ( `null`) 的值，则 DataSet 将该字段视为未初始化，并且不在生成的插入/更新语句中设置该字段（这意味着将应用您的默认值）。

但是，如果该字段的值为`Convert.DBNull`（SQL 空值），则将显式`null`值发送到数据库并将其插入数据库中，忽略默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:37:50.300

向 a 添加行时`DataTable`，取决于您如何指定值。如果您指定`null`，它会将其解释为“应用默认值”。如果您指定`DBNull.Value`，它会将其解释为“this is explicit null”。所以：通过`null`：

```
DataTable dt = new DataTable();
dt.Columns.Add("foo", typeof(int)).DefaultValue = 0;
Console.WriteLine(dt.Rows.Add(new object[]{null})["foo"]);
Console.WriteLine(dt.Rows.Add(new object[]{DBNull.Value})["foo"]); 
```

第一行显示“0” - 它已应用默认值。第二行是空的 - 它是明确的*null*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T16:56:44.817

如果您使用数据集执行此操作，您可能执行了“从表中选择 *...”，然后在插入时可能使用默认的 GetInsertCommand 语句，在这种情况下，它会选择每个字段。如果您没有向数据行中的该字段提交任何值，则插入命令会将其保存为 NULL，而不是使用默认值。（您可以检查 Command.CommandText 属性以了解将在 GetInsertCommand 之后执行的 SQL 命令，并且您应该会看到该字段）。

一种选择是您定义自己的插入命令而不使用该字段。为此，当您选择创建新数据行时，您应该选择除具有默认值的字段之外的每个字段，并且在执行 GetInsertCommand 时，它将不包括在内，然后它将插入默认值而不是 NULL。

如果您需要有时插入该字段（因为有时您可能需要插入该值），您可能需要创建自定义语句，因为有时您需要该字段，有时不使用默认值。您可以在创建自定义选择行时执行此操作，该行的逻辑为数据行中的每一列，如果列中有数据，则添加它，否则不要添加，您最终将得到一个仅包含具有的列的语句值和其他所有将使用表默认值。

# php - Zend Framework 2 - Where 子句

> ID：14375905
> 
> 赞同：3
> 
> 时间：2013-01-17T09:31:40.203
> 
> 标签：php, zend-framework2

我想用这个方法添加一个 where 子句。

```
public function fetchAll()
{
    $resultSet = $this->select();
    return $resultSet;
} 
```

我已经添加了这样的。

```
public function fetchAll()
{
    $resultSet = $this->select();
    $resultSet->where("status = ?", 1);
    return $resultSet;
} 
```

但是，它显示了以下错误。

> 致命错误：调用未定义的方法 Zend\Db\ResultSet\ResultSet::where()

您能帮我用上述方法添加 WHERE、OR WHERE、GROUP 和 ORDER。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:45:05.353

你也可以做`$sql->select()->where(array('status' => 1))`or `$table->select(array('status' => 1))`（烦人，希望他们使用相同的语法）。

您将关联数组与映射传递到 where `column => value`（因为它是一个数组，您可以给它多个子句）。Diemuzi 的方式适用于复杂的标识符，但这是一种更易读的简单比较方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:53:17.247

希望这会帮助你：

```
 public function Profile($accountid)
    {
        $result = $this->select(function (Select $select) use ($accountid) {
            $select
                ->columns(array(
                    'datefrom',
                    'available',
                    'used',
                    'details'
                ))
                ->where($this->adapter->getPlatform()->quoteIdentifier('accountid') . ' = ' . $this->adapter->getPlatform()->quoteValue($accountid));
        });

        $row = $result->current();

        if (!$row) {
            throw new \Exception('could_not_find_row');
        }

        return $row;
    } 
```

# c# - 实体上的 SaveChanges() 不更新记录，不抛出异常

> ID：14375907
> 
> 赞同：0
> 
> 时间：2013-01-17T09:32:07.323
> 
> 标签：c#, database, entity-framework

代码如下：

```
Mailinglists_Details _addMail_Details = new Mailinglists_Details();
_addMail_Details.listname = mailingData[counter].listname;
_addMail_Details.usage = mailingData[counter].usage;
_addMail_Details.responsible = mailingData[counter].responsible;

db.AddToMailinglists_Details(_addMail_Details);
db.SaveChanges(); 
```

正如您自己从代码中看到的那样：`Entities db = new Entities()`

`AddToMailinglists_Details(obj)`是`AddObject("Mailinglists_Details", obj)` 澄清的快捷方式：

```
[global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
public void AddToMailinglists_Details(Mailinglists_Details mailinglists_Details)
{
this.AddObject("Mailinglists_Details", mailinglists_Details);
} 
```

现在奇怪的是，当使用完全相同的语法创建一些虚拟记录时。与虚拟记录的唯一区别是，实体是显式声明的，而不是在 using 语句中，这会导致问题吗？（请注意，相同的使用程序集内部的比较有效！！）

编辑：为了进一步澄清，我正在访问的表是完全独立的，在这里你得到了一些关于如何生成虚拟数据的代码：

```
 Mailinglists_Details _addDetails_Mail = new Mailinglists_Details();
    _addDetails_Mail.listname = "apprentices@domain.com";
    _addDetails_Mail.usage = "Contact all apprentices @enterprise";
    _addDetails_Mail.responsible = "default responsible: some ppl";

    ent_mail.AddToMailinglists_Details(_addDetails_Mail);
    ent_mail.SaveChanges(); 
```

我也试过`mailingData[counter].listname.ToString();`

EDIT2：mailingData 是`List<customClass>`，自定义类扩展了 4 个属性：listname(string)、usage(string)、response(string)、recipients(string[])

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:05:18.590

如果 Mailinglists_Details 依赖于另一个实体，您需要使用其导航属性来填充它，例如：考虑到您有 MailingList 1->* MailingListDetails 关系。在这种情况下，你必须把 `MailingListDetails.MailingList = mailingListObject;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:46:12.980

尝试`db.MalingLists.Add(_addMail_Details);`代替调用`db.AddToMailinglists_Details`- 您创建的方法可能存在问题。

# android - 尽管我的网络服务在其自己的线程中声明，但发生 NetworkOnMainThreadException？

> ID：14375909
> 
> 赞同：1
> 
> 时间：2013-01-17T09:32:15.820
> 
> 标签：android, android-networking

我的服务在后台上传了一些文件，并在我的清单中这样声明

```
<service
        android:name="uploader.services.AttachService"
        android:icon="@drawable/loading_icon"
        android:label="@string/attachServiceName"
        android:process=":attachServiceBackground" /> 
```

在 Android 4.1.1 上它会发生`NetworkOnMainThreadException`但我不知道为什么。我知道由于蜂窝不允许在主线程上进行联网，这就是服务将在自己的线程中运行的原因。

实际上我正在像这样开始服务我的活动

```
 startService(new Intent(MainActivity.this, AttachService.class)); 
```

是否有必要在 AsyncTask 中启动服务，尽管它声明在自己的线程中运行？这是我的服务的一种方法，它不起作用

```
public static String attach(File attRequestFile, File metaDataFile, Job j) {

    String retVal = "";
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(j.getTarget().getServiceEndpoint() + ATTACH_PATH);

    MultipartEntity mp = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    mp.addPart("metadata", new FileBody(metaDataFile));
    mp.addPart("request", new FileBody(attRequestFile));

    File img = new File(j.getAtach().getAttUri());

    if (img != null){
        mp.addPart("data", new FileBody(img));      
    }

    post.setEntity(mp);

    HttpResponse response;
    try {
        response = client.execute(post);
        if (response.getEntity() == null){

            retVal = "";                
        }
        else{
            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer();
            String line = "";
            while ((line = rd.readLine()) != null) {
                sb.append(line);
            }               
            retVal = sb.toString();             
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return retVal;

} 
```

使用设置视图中的按钮，用户可以启动服务，如下所示

public void startSendDataAction(View view) { startService( new Intent( this, AttachService.class ) ); }

任何建议可能是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:39:11.610

您可以使用以下代码禁用线程执行的严格模式：

```
if (android.os.Build.VERSION.SDK_INT > 9) {
StrictMode.ThreadPolicy policy = 
        new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);
} 
```

再次不建议这样做。使用需要使用 AsyncTask 接口以获得更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:36:27.387

文档[中](http://developer.android.com/reference/android/app/Service.html)说

> 与其他应用程序对象一样，服务在其托管进程的主线程中运行

所以我想如果你想在你的服务中做一些网络工作，你最好在后台线程中做（无论它运行在什么进程中）。

# c# - 移除栈顶值 并弹出其余的

> ID：14375916
> 
> 赞同：0
> 
> 时间：2013-01-17T09:32:25.810
> 
> 标签：c#, winforms, stack

我有一个堆栈，其中推送了某些字符串数组。当我想弹出堆栈时，我需要删除最顶层的元素（最后一个元素）并弹出其余的元素......

```
if (simpleStack.Count > 0)
{
    simpleStack.Peek().Remove(0);
    string open = simpleStack.Pop();

    PopulateListView(open);
    complicatedStack.Push(open);
} 
```

我试图偷看元素并删除，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:35:14.720

不确定问题是什么 - 弹出第一个项目。这会将其从堆栈中删除。

然后你可以弹出剩余的项目。

```
if (simpleStack.Count > 0)
{
    simpleStack.Pop(); // remove top item, discarding it
    string open = simpleStack.Pop(); // Fails if stack has only 1 element

    PopulateListView(open);
    complicatedStack.Push(open);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:56:35.730

```
if (simpleStack.Count > 0)
{
    simpleStack.Pop(); // remove top item, discarding it
    string open = simpleStack.Peek(); //removing one element from array and peeking the rest...

    PopulateListView(open);
    complicatedStack.Push(open);
} 
```

# javascript - 在coffeescript中加载图像？

> ID：14375918
> 
> 赞同：2
> 
> 时间：2013-01-17T09:32:28.377
> 
> 标签：javascript, jquery, coffeescript

我使用类似的东西

```
 #need to load an image
        newImage = new Image()
        newImage.onload ->
            console.log("image loaded")
        newImage.src = "https://www.google.com/images/srpr/logo3w.png" 
```

编译为

```
 newImage.onload(function() {
      return console.log("image loaded");
    }); 
```

这不是我需要的，我如何在加载时调用函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:44:42.320

尝试这个：

```
newImage.onload = ->
     console.log("image loaded") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T15:28:13.527

这应该有效：

```
newImage.on('load', console.log("image loaded")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T00:40:49.803

为了增加一点复杂性以允许在 onload 中执行更复杂的功能，您可以使用 this 来引用对象

```
newImage.onload= doThisNow 

doThisNow=->
image=this
console.log 'image ' + image.id + ' loaded' 
```

# java - Java AddressBook 将数据输入到 JTable

> ID：14375920
> 
> 赞同：-3
> 
> 时间：2013-01-17T09:32:34.490
> 
> 标签：java, swing, jtable

我需要一些帮助来完成我已经设置的项目。我正在用 java 创建一个小型地址簿程序。我已经对用户界面进行了排序，现在我正在努力从 inputDialog 将信息添加到 JTable 中。

这是我的通讯录用户界面。

```
 import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import javax.swing.JPanel;

public class AddressBookGUI {

    private static final int FRAME_WIDTH = 400;
    private static final int FRAME_HEIGHT = 100;
    private static JTable table;

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        final JFrame addPersonFrame = new JFrame();
        frame.setSize(768, 300);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //
        JButton addButton = new JButton("Add");
        addButton.setBounds(10, 228, 89, 23);
        addButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {

                JOptionPane.showInputDialog("First Name: ");
                JOptionPane.showInputDialog("Last Name: ");
                JOptionPane.showInputDialog("Address: ");
                JOptionPane.showInputDialog("Town: ");
                JOptionPane.showInputDialog("County: ");
                JOptionPane.showInputDialog("Post Code: ");
                JOptionPane.showInputDialog("Phone Number: ");

            }
        });
        frame.getContentPane().setLayout(null);
        frame.getContentPane().add(addButton);

        JButton editButton = new JButton("Edit");
        editButton.setBounds(109, 228, 89, 23);
        frame.getContentPane().add(editButton);

        JButton delButton = new JButton("Delete");
        delButton.setBounds(208, 228, 89, 23);
        frame.getContentPane().add(delButton);
        // Declare new menuBar and menuItems
        JMenuBar mainMenuBar = new JMenuBar();
        JMenu fileMenuBar = new javax.swing.JMenu();
        JMenuItem newFileMenuBar = new JMenuItem();
        JMenuItem openFileMenuBar = new JMenuItem();
        JMenuItem saveFileMenuBar = new JMenuItem();
        JMenuItem printFileMenuBar = new JMenuItem();
        JMenuItem quitFileMenuBar = new JMenuItem();
        JMenuItem editMenuBar = new JMenu();
        JMenuItem editPersonsEditMenuBar = new JMenuItem();
        JMenuItem sortNameEditMenuBar = new JMenuItem();
        JMenuItem sortPostcodeEditMenuBar = new JMenuItem();
        JMenuItem helpMenuBar = new JMenu();
        JMenuItem aboutHelpMenuBar = new JMenuItem();

        JMenuBar menuBar = new JMenuBar();
        menuBar.setBounds(0, 0, 742, 21);
        frame.getContentPane().add(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);
        // Declares and adds items to the menu
        JMenuItem menuItemNew = new JMenuItem("New");
        mnFile.add(menuItemNew);

        JMenuItem menuItemOpen = new JMenuItem("Open");
        mnFile.add(menuItemOpen);

        JMenuItem menuItemSave = new JMenuItem("Save");
        mnFile.add(menuItemSave);

        JMenuItem menuItemSaveAs = new JMenuItem("Save As..");
        mnFile.add(menuItemSaveAs);

        JMenuItem menuItemPrint = new JMenuItem("Print");
        mnFile.add(menuItemPrint);

        JMenuItem menuItemQuit = new JMenuItem("Quit");
        menuItemQuit.addActionListener(new exitApp());
        mnFile.add(menuItemQuit);

        JMenu menuEdit = new JMenu("Edit");
        menuBar.add(menuEdit);

        JMenuItem menuItemEditSelectedPerson = new JMenuItem(
                "Edit Selected Person");
        menuEdit.add(menuItemEditSelectedPerson);

        JMenuItem menuItemSortByName = new JMenuItem("Sort By Name");
        menuEdit.add(menuItemSortByName);

        JMenuItem menuItemSortPostCode = new JMenuItem("Sort By Post Code");
        menuEdit.add(menuItemSortPostCode);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(10, 32, 732, 151);
        frame.getContentPane().add(scrollPane);

        table = new JTable();
        table.setModel(new DefaultTableModel(new Object[][] {
                { "", null, "", "", "", null, null },
                { null, null, null, null, null, null, null },
                { null, null, null, null, null, null, null },
                { null, null, null, null, null, null, null },
                { null, null, null, null, null, null, null },
                { null, null, null, null, null, null, null }, }, new String[] {
                "First Name", "Last Name", "Addesss", "Town", "County",
                "Post Code", "Phone Number" }));
        scrollPane.setViewportView(table);

        frame.setVisible(true);

    }

    static class exitApp implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent event) {
            // closes the application
            System.exit(0);

        }

    }

} 
```

如果有人可以帮助我，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:50:18.223

您应该创建一些变量来保存您输入的信息。

然后使用

```
table.getModel().table.getModel().setValueAt("ddd", 2, 2); 
```

将其传递到 Jtable 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:18:57.670

如果您需要将输入的数据从 传递`JOptionPane`到 ，`JTable`那么首先获取数据和 UI 并将其添加到 JTable 中。

如果您将每一行存储为一个对象，则使用该[方法](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)，

```
model.addRow(..); 
```

如果您要单独存储每个值，请使用该[方法](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html#setValueAt%28java.lang.Object,%20int,%20int%29)，

```
// value here is your input.
setValueAt(value, rowIndex, columnIndex); 
```

# android - Android 在异步任务中创建 Http 连接的正确方法

> ID：14375922
> 
> 赞同：0
> 
> 时间：2013-01-17T09:32:49.397
> 
> 标签：android, android-asynctask

我在 Async 任务中运行一个函数以从我的服务器上的 url 获取提要，它可以工作，但是当没有 Internet 连接时，它会通过给出错误消息来停止我的应用程序。

我不知道如何处理这个，反正这里是我的代码

获取提要的功能

```
 public void getContent(){
    // Initializing instance variables
    headlines = new ArrayList<String>();
    links = new ArrayList<String>();
    server_images = new ArrayList<String>();

    try {
        URL url = new URL("http://www.uglobal.org/androidServer/courses_list.xml");

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(false);
        XmlPullParser xpp = factory.newPullParser();

            // We will get the XML from an input stream
        xpp.setInput(getInputStream(url), "UTF_8");

            /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
             * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
             * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
             * so we should skip the "<title>" tag which is a child of "<channel>" tag,
             * and take in consideration only "<title>" tag which is a child of "<item>"
             *
             * In order to achieve this, we will make use of a boolean variable.
             */
        boolean insideItem = false;

            // Returns the type of current event: START_TAG, END_TAG, etc..
        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG) {

                if (xpp.getName().equalsIgnoreCase("item")) {
                    insideItem = true;
                } else if (xpp.getName().equalsIgnoreCase("title")) {
                    if (insideItem)
                        headlines.add(xpp.nextText()); //extract the headline
                } else if (xpp.getName().equalsIgnoreCase("link")) {
                    if (insideItem)
                        links.add(xpp.nextText()); //extract the link of article
                } else if (xpp.getName().equalsIgnoreCase("image")) {
                    if (insideItem)
                        server_images.add(xpp.nextText()); //extract the link of article
                }
            }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                insideItem=false;
            }

            eventType = xpp.next(); //move to next element
        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public InputStream getInputStream(URL url) {
   try {
       return url.openConnection().getInputStream();
   } catch (IOException e) {
       return null;
     }
} 
```

比我在异步任务中运行这个函数

异步任务

```
 private class PostTask extends AsyncTask<String, Integer, String>{
    @Override

    protected void onPreExecute() {
        // TODO Auto-generated method stub
        progressDialog = ProgressDialog.show(ListViewImagesActivity.this, "Loading","Getting Feed ", true);
    }
    protected String doInBackground(String... arg0) {
        getContent();
        return null;
    }
    } 
```

现在，如果我有 Internet 连接，它可以正常工作，但是当我失去连接时，它会杀死我的应用程序并显示错误“应用程序无响应”

为什么我不想依赖连接管理器

Connectivity Manager 只是寻找 Internet 连接，如果我在代理后面运行并且我需要登录到我的代理服务器才能访问 Internet，该怎么办？

有什么办法至少可以防止我的应用程序被杀死。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:48:03.093

# 快速回答

当然，处理 try/catch 块上的异常：即使 IDE 不会告诉您函数抛出异常，它们也可以被引发，事实上这似乎是您现在的情况。

尝试在完全脱机的情况下运行您的应用程序，并将引发异常的每一行包装在一个 try/catch 块中（当然，只要您捕获所有异常，整个“违规”代码的单个 try/catch 就足够了）。

* * *

# 技巧和窍门

至于*不想*依赖ConnectivityManager？这是个坏主意。ConnectivityManager 可能无法像大学代理等那样处理边缘情况，但它仍然是一个保护层。您不想浪费宝贵的计算时间来启动您可以提前知道的连接**总是**会失败，特别是在手机上。

*专业提示*：在将下载的字符串提供给 XML 解析器之前，您可能想检查自己代码中是否存在代理，只需检查第一行。如果该 Web 服务输出正确的 XML，它很可能包含类似的内容

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

所以如果第一行不是以类似的东西开头，你可以确定它*不是*XML。

相反，您可以通过检查请求的第一行是否类似

```
<!DOCTYPE.... 
```

或者

```
<html.... 
```

这非常简单，它是 http 代理的经典行为。

检查此[链接](http://www.vogella.com/articles/AndroidJSON/article.html#androidjson_twitter)（特别注意 readTwitterFeed() 方法）。即使它不是用于 XML，它也会帮助您了解如何在 Android 上完成标准 RESTful WebService 调用（至少是一种方式）。同样，只需将该 RESTful 调用的输出插入我上面描述的过滤器，然后插入您最喜欢的 XML 解析器（假设输出确实通过了这些卫生检查）。

底线是：不要让自己的工作变得更加困难。不要重新发明轮子并以聪明的方式使用你可用的东西。

干杯。

# linux - GAMS，如何将标准输出保存到 linux shell 中的文件中？

> ID：14375926
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:33:05.087
> 
> 标签：linux, save, gams-math

我想知道如何将 GAMS 运行进程的标准输出保存在文件中？.lst 文件很大，我只需要求解过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:50:16.567

您可以使用 retroves 或 magrit 软件拆分 .lst。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T14:13:03.963

我也有同样的问题。GAMS 以无法使用`>`或重定向的方式将输出写入屏幕`2>&1`。但在 unix 中，您可以使用以下命令将输出保存到文件中：

```
$ gams file.gams LogOption=2 
```

你可以在这里阅读更多：

[https://www.gams.com/help/index.jsp?topic=%2Fgams.doc%2Fuserguides%2Fmccarl%2Flogoption_lo.htm](https://www.gams.com/help/index.jsp?topic=%2Fgams.doc%2Fuserguides%2Fmccarl%2Flogoption_lo.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T09:37:43.113

您应该`> filename`在命令行末尾添加一个。

就像是

```
#> ./my-process > filename.res 
```

这只会重定向标准输出。标准错误仍将显示在终端窗口中。

# android - Facebook android SDK重新打开会话

> ID：14375933
> 
> 赞同：0
> 
> 时间：2013-01-17T09:33:35.057
> 
> 标签：android, facebook

我正在开发一个 facebook 集成的应用程序，我遇到了一个非常奇怪的问题。

我正常登录，但是当我即将注销时，SDK 会强制再次登录...

```
package com.machinarius.facebook;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import com.facebook.Request;
import com.facebook.Request.GraphUserCallback;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.Session.NewPermissionsRequest;
import com.facebook.Session.StatusCallback;
import com.facebook.SessionState;
import com.facebook.model.GraphUser;

public class MainActivity extends Activity implements StatusCallback, GraphUserCallback {
    private TextView statusText;
    private Button loginButton;
    private Boolean loggedIn;
    private Session actualSession;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        loggedIn = false;
        statusText = (TextView)findViewById(R.id.statusText);
        loginButton = (Button)findViewById(R.id.loginButton);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    public void toggleFacebookLogin(View source) {
        if(!loggedIn) {
            actualSession = Session.openActiveSession(this, true, this);
        }
        else 
            if(actualSession == null)
                return;
            else {
                actualSession.close();
                statusText.setText("Please login");
                loggedIn = false;
            }
    }

    @Override
    public void call(Session session, SessionState state, Exception exception) {
        if(state.equals(SessionState.OPENED)) {
            loggedIn = true;
            List<String> permissions = getNewPermissions(actualSession.getPermissions(), 
                    new LinkedList<String>(Arrays.asList("user_about_me", "user_birthday", "user_hometown", "user_relationships", "user_location", "user_relationships", "email")));
            Session.NewPermissionsRequest permissionsRequest = new NewPermissionsRequest(this, permissions);
            actualSession.requestNewReadPermissions(permissionsRequest);
            populateInterface();
        } else {
            loggedIn = false;
        }
    }

    private void populateInterface() {
        Request.executeMeRequestAsync(Session.getActiveSession(), this);
    }

    @Override
    public void onCompleted(GraphUser user, Response response) {
        if(response.getError() != null) {
            statusText.setText("There was an error fetching your info");
            Log.e(getClass().getName(), response.getError().toString());
            return;
        }
        if(user != null) {
            statusText.setText("Hello " + user.getName() + "\n"
                    + "Your user ID is " + user.getId() + "\n"
                    + "Your birthday is " + user.getBirthday());
            loginButton.setText("Log out");
        } else {
            statusText.setText("There was an error fetching your info");
        }
    }

    private List<String> getNewPermissions(List<String> actualPermissions, List<String> desiredPermissions) {
        ArrayList<String> permissionsGranted = new ArrayList<String>();
        for(String nPermission : desiredPermissions)
            for(String aPermission : actualPermissions)
                if(nPermission.equals(aPermission))
                    permissionsGranted.add(nPermission);
        for(String gPermission : permissionsGranted)
            desiredPermissions.remove(gPermission);
        return desiredPermissions;
    }
} 
```

toggleFacebookLogin 由 loginButton 上的 XML onClick 处理程序调用。

还有一个问题，我如何将权限请求集成到 session.open 调用中，这样我就不必让用户看到两次 Facebook 对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:51:47.613

这里的问题是你只检查

```
state.equals(SessionState.OPENED) 
```

在你的`call`方法中，而不是

```
state.isOpened() 
```

因此，当您请求额外权限时，状态实际上会转换为 OPENED_TOKEN_UPDATED，现在您的已登录状态为 false（即使它应该为 true）。因此，当您单击该按钮时，您将再次调用 openActiveSession，因为您的已登录状态不正确。如果您切换到检查`state.isOpened()`，它应该可以解决您的问题。

要回答您的第二个问题，由于您只请求读取权限，因此您可以在打开会话时一次性请求它们（而如果您还想请求发布权限 - 例如 publish_stream，那么您需要分开请求）。要一次完成所有操作，您需要将您的替换`Session.openActiveSession(this, true, this)`为：

```
Session actualSession = new Session(this);
Session.setActiveSession(actualSession);
actualSession.openForRead(new Session.OpenRequest(this).setPermissions(Arrays.asList("some", "read", "permissions")).setCallback(this)); 
```

注意：我把上面的内容写在脑海中，所以可能存在语法错误。

# git - Git 格式补丁 vs git log -p

> ID：14375938
> 
> 赞同：3
> 
> 时间：2013-01-17T09:33:54.753
> 
> 标签：git, patch, git-log, git-patch

我想检索一个提交列表作为补丁，然后尝试将它们应用到另一个存储库中，在该存储库中我存储了一个与我想要检索补丁的项目非常接近的项目：我如何在一个命令中检索所有补丁? git format-patch 和 git log -p 之间最好的方法（和区别）是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:17:17.350

`git log -p`以逆时间顺序向您显示更改（最近的在前）。这通常不利于生成补丁，因为您希望从最早的更改而不是最近的更改开始打补丁。

`git format-patch`以正确的方向生成补丁（补丁`0001`将是最早的更改），并将补丁保存为每个文件一个提交，并将它们格式化为适合`git am`在接收方使用的电子邮件消息。

`git format-patch`因此，对于您想要的，在一个存储库上运行然后`git am`在目标存储库上运行可能最有意义：

```
cat *.patch | git am 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:30:21.487

我相信您也可以尝试使用`git bundle`命令来创建二进制存档，然后将其应用于存储库的另一个副本。

但是，我想说这种方法不如使用`git format-patch`and灵活`git am`，但如果您不想手动查看每个补丁，可能会更快。

`git bundle create file.name revision..list`— 将`file.name`在当前文件夹中创建文件，并将指定的修订内容放入其中。

`git bundle unbundle file.name`在不同的地方恢复修订。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-16T15:11:31.970

如果您格式化由 git log 生成的哈希，在路径编号前加上“-”符号，那么所有补丁都可以在不同的文件中一次生成。例子：

```
git format-patch $(git log --reverse 073dd505f..fff28ff65 --pretty="%H" -- the/needed/path | awk '{print -NR, " ", $0}') 
```

这将涵盖您可以从 git log 应用的所有过滤器。它们并不总是连续的提交。例如获取与给定用户对应的补丁：

```
git format-patch $(git log --reverse --author="John Doe" --pretty="%H" -- the/needed/path | awk '{print -NR, " ", $0}') 
```

需要 --reverse 选项才能按时间顺序为您提供补丁，因为 git log 首先给出最新的。

# c# - 使用 StorageFile 的 DeleteAsync 函数删除本地文件夹中的文件

> ID：14375942
> 
> 赞同：2
> 
> 时间：2013-01-17T09:33:59.293
> 
> 标签：c#, .net, windows-8, microsoft-metro

我正在查看我的数据文件夹中的所有文件，但没有一个文件被删除。我不确定，但我认为我做错了什么，但我不知道它是什么：

```
private async void pageRoot_Unloaded(object sender, RoutedEventArgs e)
{
    IReadOnlyList<StorageFile> thefiles;

    var localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
    thefiles = await localFolder.GetFilesAsync();

    for(int i = 1; i < thefiles.Count; i++)
    {
        await thefiles[i].DeleteAsync(StorageDeleteOption.Default);
    }
} 
```

我这样做对吗？任何想法为什么这不起作用？我没有收到任何编译时或运行时错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:03:55.600

你有一个不同的问题，因为断点永远不会被击中，但我只是想提一下......

您的第一个文件将永远不会被删除，因为您将 i 初始化为 1。而是将其初始化为 0。

```
for(int i = 0; i < thefiles.Count; i++)
{
    await thefiles[i].DeleteAsync(StorageDeleteOption.Default);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:34:37.287

如果您在 for 查找上放置断点并逐步执行各个任务.. 看看 await 是否真的在等待。还放 try / catch 看看是否有任何异常被抛出。

# google-apps-script - 如何仅在 GMailApp.search() 中限制搜索数据范围内的消息

> ID：14375944
> 
> 赞同：1
> 
> 时间：2013-01-17T09:34:01.197
> 
> 标签：google-apps-script

我正在使用 Google App Script 搜索介于 dateOld 到 datNew 之间的某些邮件

但是，即使一封邮件符合上述日期条件，GmailApp 也会返回带有邮件的威胁（线程中的所有邮件）

如何过滤掉仅属于我提供的 dateRange 的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:06:07.053

你不能，除非自己在搜索后检查消息。GmailApp 使用与 Gmail 相同的搜索，这就是它处理日期的方式。

# android - Android 版本是否有最小堆大小？

> ID：14375947
> 
> 赞同：7
> 
> 时间：2013-01-17T09:34:02.920
> 
> 标签：android, memory-management, heap-size

许多帖子都谈到了 Android 堆大小，到目前为止，我发现最大堆大小的唯一共同点是它至少为 16MB，但这是自 API 3 以来的限制。为了使用更多内存，人们会建议使用 NDK 或任何超出“正常”Android 开发的东西。

是否有任何 Android 版本要求设备具有更大的堆大小，以便我可以开始假设更大的堆大小并停止在内存上如此便宜？

清单中是否还有关于大堆标志（来自 API 11 - 蜂窝）的要求，还是设备甚至可能忽略它的模糊请求？

只是 Android 硬件这些年来改进了很多，但即使设备现在有超过 1GB 的内存，我们仍然需要如此便宜的内存。奇怪的是，我们不能要求操作系统为我们提供特定数量的堆大小并承诺我们不会再使用这些。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-21T07:42:51.343

好的，我终于找到了答案（感谢[这篇文章](https://stackoverflow.com/a/16111924/878126)）：

所有 android 版本（包括 5 个）的最低限度是 16MB。

每个 android 版本的要求可以在这里阅读：

[http://source.android.com/compatibility/downloads.html](http://source.android.com/compatibility/downloads.html)

您可以通过打开 CDD 文件并搜索“运行时兼容性”（或旧版本的“虚拟机兼容性”）来了解它们。此外，您可以通过搜索“内存和存储”找到最低 RAM 要求，但我认为这只是系统本身的要求。

因此，例如，在 4.0.3 - 5 上，最小堆大小为：

*   16MB：使用 ldpi/mdpi 的小/正常，或使用 ldpi 的大
*   32MB：使用 tvhdpi/hdpi 的小/正常，或使用 mdpi 的大
*   64MB：使用 xhdpi 的小/正常，或使用 tvdpi/hdpi 的大，或使用 mdpi 的 xlarge。
*   96MB：400dpi 的小/正常，或 tvhdpi/hdpi 的 xlarge
*   128MB：使用 xxhdpi 的小/正常，或使用 xhdpi 的大
*   192MB：560dpi 的小/正常，400dpi 的大，或 xhdpi 的 xlarge。
*   256MB：使用 xxxhdpi 的小/正常，或使用 xxhdpi 的大
*   288MB：400dpi 的 xlarge
*   384MB：560dpi 的大，或 xxhdpi 的 xlarge
*   512MB：大，带有 xxxhdpi
*   576MB：560dpi 的 xlarge
*   768MB：带有 xxxhdpi 的 xlarge

我找不到版本 3.x 的最小堆大小，但它可能与 4.0.3 相同。

对于 2.1 - 2.3 ，最小堆大小为：

> 屏幕分类为中密度或低密度的设备实现必须配置 Dalvik 为每个应用程序分配至少 16MB 的内存。屏幕分类为高密度或超高密度的设备实现必须配置 Dalvik 为每个应用程序分配至少 24MB 的内存。请注意，设备实现可能分配比这些数字更多的内存。

意义：

*   中等屏幕或 ldpi - 16MB
*   hdpi 或 xhdpi - 24MB

我找不到版本 1.6 的最小堆大小，但它可能与 2.1 相同。

另外，我不知道大堆标志应该为每个 android 版本（自 3.0 起）做什么。

# mysql - 比较列表中的唯一值

> ID：14375948
> 
> 赞同：0
> 
> 时间：2013-01-17T09:34:07.677
> 
> 标签：mysql

这个问题是一种扩展： [如何使用 MySQL 比较两个逗号分隔的字符串列表](https://stackoverflow.com/questions/11935750/how-to-compare-two-comma-separated-string-lists-using-mysql)

我有一个`TASKS_DONE`有 2 列`user_id`和`task_id`(INT) 的表。这些代码用于表示用户执行的任务。

单独的表`TASKS`，`USERS`用于维护任务和用户的详细信息。

我的要求是检查用户是否完成了一组任务（例如`2, 3, 5`）。目前，我有这个查询：

```
select * from USERS u
where
  (
    select SUM( IF(task_id in (2, 3, 5), 1, 0) )
    from TASKS_DONE td
    where td.user_id=u.user_id
    group by td.user_id
  ) = 3 
```

计数（`3`在这种情况下）将动态地提供给查询。这种方法的问题是，如果用户两次执行相同的任务，计数将包括任务的两个实例。但我只需要考虑不同的集合`task_id`

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:09:06.763

我想他们有一个地方，但是关联的子查询看起来很恶心......

```
SELECT u.* 
  FROM users u
  JOIN tasks_done td
    ON td.user_id = u.user_id
   AND td.task_id IN (2,3,5)
 GROUP
    BY u.user_id
HAVING COUNT(DISTINCT td.task_id) = 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:44:16.263

尝试这个：

```
SELECT user_id
FROM users
JOIN (
    SELECT task_id, user_id
    FROM tasks
    WHERE task_id IN (2, 3, 5)
    GROUP BY task_id, user_id
) AS unique_tasks USING (user_id)
GROUP BY user_id
HAVING COUNT(user_id) = 3 
```

然后再次加入此结果集`users`以检索更多信息：

```
SELECT users.*
FROM users
JOIN (
    SELECT user_id
    FROM users
    JOIN (
        SELECT task_id, user_id
        FROM tasks
        WHERE task_id IN (2, 3, 5)
        GROUP BY task_id, user_id
    ) AS unique_tasks USING (user_id)
    GROUP BY user_id
    HAVING COUNT(user_id) = 3
) AS selected_users USING (user_id) 
```

# java - Liquibase 与 Tapestry 和 Hibernate 集成：初始模式创建步骤

> ID：14375949
> 
> 赞同：1
> 
> 时间：2013-01-17T09:34:10.400
> 
> 标签：java, hibernate, tapestry, liquibase

我有基于`Tapestry`框架的项目。它`Hibernate`用作 ORM 库。

我的类使用`annotations`.

我想集成`Liquibase`到我的项目中，以便能够维护数据库状态，进行版本更新。

到目前为止，我所做的是以下步骤：

1）我创建了服务对：`LiquibaseService`-> `LiquibaseServiceImpl`。

`LiquibaseSerivce`has 方法`public void update()`，它独立`DataSource`于`hibernate.cfg.xml`配置创建并最终执行`liquibase.update("production");`

2) 我在以下位置添加了对此服务的绑定`AppModule`：

`binder.bind(LiquibaseService.class, LiquibaseServiceImpl.class).eagerLoad();`

3）我添加了开始更新的`initMyApplication`方法：`AppModule``Liquibase`

```
@Startup
public static void initMyApplication(Logger logger, LiquibaseService liquibaseService) {
    logger.info("Updating database by liquibase service...");
    liquibaseService.update();
    logger.info("update-db done.");
} 
```

* * *

所有这些在生产环境中都可以正常工作，其中已经创建了初始方案：我可以轻松地删除表、列等。

`Liquibase`但问题是，在将应用程序部署到新服务器时，我无法从零（使用）创建新方案：`Hibernate`独立启动并抱怨，方案中没有映射到我的类的任何表。

**我怎样才能放慢开始直到完成工作的`Hibernate`那一刻？`Liquibase`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:07:08.460

而不是使用 @Startup 你可以做这样的事情

```
 public static void contributeRegistryStartup(
     final Logger logger, final LiquibaseService liquibaseService,
     OrderedConfiguration<Runnable> configuration)
    {
        configuration.add("Liquibase", new Runnable()
        {
            public void run()
            {
                logger.info("Updating database by liquibase service...");
                liquibaseService.update();
                logger.info("update-db done.");
            }
        }, "after:HibernateStartup");
    } 
```

# playn - 无法让 disableClassMetadata 生效

> ID：14375954
> 
> 赞同：1
> 
> 时间：2013-01-17T09:34:28.453
> 
> 标签：playn

我正在编写基于使用 TriplePlay UI 的“Hello”PlayN 演示的基本游戏。运行 HTML 版本时，出现运行时异常“不得使用 -XdisableClassMetadata 编译您的 PlayN 应用程序。它会破坏 TriplePlay 样式表。”。在 Google Group 上看到[这篇文章后](https://groups.google.com/d/topic/playn/5BSCxuULujQ/discussion)，我知道我将目录更改`pom.xml`为`html`：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <configuration>
        <disableClassMetadata>false</disableClassMetadata>
    </configuration>
    <executions>
      ... 
```

这对我来说很有意义。然而，问题是异常并没有消失！我试过`mvn clean`跟着`mvn -Phtml integration-test`. 我正在使用 PlayN 和 TriplePlay 版本 1.5.1。

谁能解释为什么会发生这种情况，或者如果没有，我如何能够弄清楚为什么设置没有生效？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:30:42.493

您可能已经想通了，但是“mvn clean”并没有启用“html”Maven 配置文件，因此它实际上并没有清理您的 html 构建。您需要执行以下任一操作：

```
mvn clean -Phtml
mvn integration-test -Phtml 
```

要不就：

```
mvn clean integration-test -Phtml 
```

# java - 如何通过 Java 在 Selenium WebDriver 中使用不同版本的 IE（IE6、7、8、9 和 10）

> ID：14375956
> 
> 赞同：4
> 
> 时间：2013-01-17T09:34:30.090
> 
> 标签：java, eclipse, internet-explorer, selenium-webdriver

我从以下 URL 下载了“IEDriverServer_Win32_2.28.0.zip”： [http ://code.google.com/p/selenium/downloads/detail?name=IEDriverServer_Win32_2.28.0.zip&can=2&q=](http://code.google.com/p/selenium/downloads/detail?name=IEDriverServer_Win32_2.28.0.zip&can=2&q=)

在文件夹中提取 zip 文件后，我在 WebDriver Java 代码中使用了该路径，如下所示：

```
File file = new File("E:\\Global Blue\\globalblue-selenium-test\\gb-selenium-test\\lib\\IEDriverServer_Win32_2.28.0\\IEDriverServer.exe");
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
driver = new InternetExplorerDriver(); 
```

测试在 Internet Explorer 中运行良好。如何在我的 Selenium WebDriver 测试中使用不同版本的 IE（IE6、7、8、9 和 10）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:01:00.953

IE 驱动程序将使用机器上安装的任何版本的 IE。没有支持在同一操作系统安装上运行多个版本的 IE 的方法。虽然有一些解决方案声称可以这样做，但它们都缺乏某种方式。即使使用不同的文档模式也不是完美的，IE驱动程序中也没有办法以编程方式设置文档模式。

使用 IE 驱动程序运行不同版本的 IE 的方法是为要运行的每个版本的 IE 使用不同的 Windows 安装。虚拟机是解决此问题的绝佳方法。

# javascript - 如果用户没有在输入中输入所有数据，则不会显示对话框模式

> ID：14375957
> 
> 赞同：0
> 
> 时间：2013-01-17T09:34:33.337
> 
> 标签：javascript, jquery, twitter-bootstrap

```
<form id="form_save_account" action="." method="post">
   <div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="618376f08ab0b6f255442d9519ec656a" /></div>
   <div class="container" />
   <div class="row" />
   <div class="span5" />

<div class="id_account_owner-control-group control-group required">
      <label class="control-label" for="id_account_owner"> account owner </label>
      <div class="controls">
         <input id="id_account_owner" type="text" name="account_owner" maxlength="250" />
      </div>
   </div>

<div class="id_account_number-control-group control-group required">
      <label class="control-label" for="id_account_number"> account number </label>
      <div class="controls">
         <input id="id_account_number" type="text" name="account_number" maxlength="34" />
      </div>
   </div>

<div class="span1 offset10">
      <a type="submit" name"save-continue-to-review" data-toggle="modal" data-target="#dialog" href="" class="btn primary btn-primary" title="Go">Go
      </a>
   </div>
</form

<script>

...

</script> 
```

如何创建这样的东西：

如果用户没有在对话框模式的输入中输入所有数据：

```
 <a type="submit" name"save-continue-to-review" data-toggle="modal" data-target="#dialog" href="" class="btn primary btn-primary" title="Go">Go
  </a> 
```

不会显示？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:45:34.523

我认为您需要对提交时的所有输入字段进行客户端验证。在提交时
添加**onclick事件。**例如：

```
<a type="submit" onclick="javascript:yourFunctionName();" name"save-continue-to-review" data-toggle="modal" data-target="#dialog" href="" class="btn primary btn-primary" title="Go">Go 
```

并在 JS 文件中将函数定义为：

```
function yourFunctionName(){
    var account_owner = document.getElementById(id_account_owner).value;
    var account_no    = document.getElementById(id_account_number).value;
    if(account_no == '' || account_owner == ''){
        return false;
    }
} 
```

[在这里](http://www.w3schools.com/js/js_form_validation.asp)查看更多信息。

我想它会对你有所帮助。

# selenium - 第 n 个类型的 CSS 选择器

> ID：14375960
> 
> 赞同：3
> 
> 时间：2013-01-17T09:34:43.657
> 
> 标签：selenium, webdriver, css-selectors, selenium-webdriver

下面是我的 HTML 页面的片段：

```
<td id="Platinum" align="center" width="16%">
    <div></div> 
    <a>link1</a>
</td>
<td></td>
<td id="Platinum" align="center" width="16%">
    <div></div>
    <a>link2</a>
</td>
<td id="Platinum" align="center" width="16%">
    <div></div>
    <a>link3</a>
</td> 
```

在这里，我想选择 id='platinum' 的第三个 td 元素

我尝试的是`driver.findElement(By.cssSelector("#platinum:nth-of-type(3)"));`。

和

`driver.findElement(By.cssSelector("td[id='platinum']:nth-of-type(3)"));`

两者都没有关于如何选择第三个 td 的任何想法`id='platinum'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:51:39.617

有一个`td`没有ID的空，干扰`:nth-of-type()`计数。选择器的意思是“nth `td`element”，而不是“nth `td`element with `id='platinum'`”。因此，具有该 ID的第三个`td`实际上是`td`整行中的第四个。

无法`td`使用 CSS 选择器选择具有特定 ID 的第三个元素。您应该改用 XPath：

```
driver.findElement(By.xpath("//td[@id='Platinum'][3]")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:48:52.603

好吧，首先。你不能有多个同名的ID。你应该使用类。然后您可以使用相同的方法再次尝试，但使用类。代码将如下所示：

```
<td class="Platinum" align="center" width="16%"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T11:33:18.947

补充一下，如果你在 JQuery 中尝试过这个，你可能会得到相同的结果。“#id”可能是使用 document.getElementByID() 函数的快捷方式，该函数只会返回带有 ID 的第一个元素，因为 ID 在给定文档中是唯一的。

# c++ - 你能有一个指向工会成员的“成员指针”吗？

> ID：14375965
> 
> 赞同：4
> 
> 时间：2013-01-17T09:35:09.667
> 
> 标签：c++

我能找到的所有描述都在类的上下文中谈论“指向成员的指针”。工会与结构非常相似，特别是也有成员。你也能指点那些成员吗？

例如

```
union x {
    int a;
    float b;
};
int x::*p = &x::a; 
```

我不是在谈论指向整个联合的指针，作为联合成员的指针等。`p`在上面的示例中，它确实是一个偏移量，显然大小为 0。我需要这个构造来回答[这个问题](https://stackoverflow.com/questions/14375558/select-an-union-member-depending-on-a-template-parameter)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:43:03.977

§3.9.2/1：复合类型可以通过以下方式构造：……指向非静态 50 个类成员的指针，它们标识给定类的对象中给定类型的成员，

§8.3.3/1：在声明 TD 中，其中 D 具有形式……并且*嵌套名称说明符*表示一个类，……</p>

§5.3.1/3：一元运算符的结果`&`是指向其操作数的指针。操作数应该是一个左值或一个*qualified-id*。如果操作数是一个*限定id，*`m`命名某个类的非静态成员，`C`类型为`T`，则结果类型为“指向T 类C 成员的指针”，并且是一个prvalue 指定`C::m`。

当然还有第 9.5/5 节：*联合*是使用类键定义的类`union`……</p>

（§3.9.2/1 还提到：*unions*，它们是类……）

没有提到类不能是联合，所以是的，你可以形成这样的 PTM 类型和值。

# java - 使用java在应用引擎中刷新blob的内容

> ID：14375968
> 
> 赞同：0
> 
> 时间：2013-01-17T09:35:15.180
> 
> 标签：java, google-app-engine, blob

是否可以每 X 秒刷新一次特定 blob 的内容？就像每秒用相同的 blob 键刷新图像......这可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:53:56.727

不，一旦 blob 最终确定，它就会变得不可变。[请参阅此示例](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileService)中的注释。

# php - php中的语句是什么？

> ID：14375970
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:35:19.547
> 
> 标签：php, static, with-statement

我刚刚在我刚刚安装的 laravel 包中找到了它，并且真的不知道是什么`with()`......因为它没有在任何地方声明

```
public static function of($query)
{
    $ins = with(new static); // What is with(new static) ?
    $ins->save_query($query);
    return $ins;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:39:27.540

`with()`不是语句，而是 Laravel 框架中的用户定义函数。

来自[laravel 文档](http://laravel.com/api/function-with.html)：

```
490: /**
491:  * Short-cut for constructor method chaining.
492:  *
493:  * @param  mixed  $object
494:  * @return mixed
495:  */
496: function with($object)
497: {
498:     return $object;
499: } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T09:39:47.680

首先，回答标题：

> 在计算机编程中，语句是命令式编程语言中最小的独立元素。用这种语言编写的程序由一系列的一个或多个语句组成。语句将具有内部组件（例如，表达式）。[来源](http://en.wikipedia.org/wiki/Statement_%28computer_science%29)

其次，[`with()`](http://laravel.com/api/function-with.html)是 Laravel 框架中的**用户定义函数** 。

# jquery - 查找 div 中的行数

> ID：14375971
> 
> 赞同：15
> 
> 时间：2013-01-17T09:35:20.030
> 
> 标签：jquery, html, logic

我想显示“查看全部”类型的链接，只有当 div 中的行达到 4 行时。

**HTML**

```
<div>
    3PAS-Pub-IO-doubleclick.net-LI, ATOM_DFP_Pub_LI, AUG12_Zynga.com_MafiaWars2_0.10$_CPM,
    ATOM_Macro_Jivox Testing,   Sep 11 Head and Shoulder Innovation - Do Not Bill, 123Greetings - IN Do Not Pay_Second, 
    July 11_Affinity.com_Fiat Linea_CPL 55, 3PAS-Pub-IO-atdmt.com-LI, 2_Affinity_RealEstate_CPC_2.8_INR_2nd,
    AUG12_Zynga.com_treasureIsle_0.10$_CPM, AUG12_Zynga.com_theville_0.10$_CPM, 123Greetings - IN Do Not Pay_NonIndia,
    AUG12_Zynga.com_RubyBlast_0.10$_CPM, 12_Affinity_Education_CPC_2.8_INR_1st, 728x90_Original, 300x250_TagModified,
    Dec11_ WhyteFort_CPL_INR 45, AUG12_Zynga.com_PetsVille_0.10$_CPM, 123Greetings - IN Do Not Pay_First,
    AUG12_Zynga.com_FishVille_0.10$_CPM, 3PAS-Pub-IO-adfac.net-LI,
    3PAS-Pub-IO-bs.serving-sys.com-LI1, 3PAS-test-pub-IO-li, 160x600_Noscr...
</div> 
```

尝试使用 jquery 子字符串概念，但没有运气，

我试过了

1.  找到 div 高度

2.  找到行高

3.  div 高度 / 行高 = 行数

这是代码：

```
var divheight = $("#startegy-sections-targeting-exclude").height();
var lineheight = $("#startegy-sections-targeting-exclude").css('line-height');
console.log(Math.round(divheight/parseInt(lineheight))); 
```

但是没有成功，你们能帮帮我吗

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T10:00:37.670

您的代码的问题是，如果您不指定行高，则`line-height`默认值为`normal`.

```
$(function() {
  var divheight = $("#startegy-sections-targeting-exclude").height();
  var lineheight = parseInt($("#startegy-sections-targeting-exclude").css('line-height'), 10);
  console.log("Number of lines:", Math.round(divheight / lineheight));
});
```

```
#startegy-sections-targeting-exclude {
  line-height: 20px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="startegy-sections-targeting-exclude">
  3PAS-Pub-IO-doubleclick.net-LI, ATOM_DFP_Pub_LI, AUG12_Zynga.com_MafiaWars2_0.10$_CPM, ATOM_Macro_Jivox Testing, Sep 11 Head and Shoulder Innovation - Do Not Bill, 123Greetings - IN Do Not Pay_Second, July 11_Affinity.com_Fiat Linea_CPL 55, 3PAS-Pub-IO-atdmt.com-LI,
  2_Affinity_RealEstate_CPC_2.8_INR_2nd, AUG12_Zynga.com_treasureIsle_0.10$_CPM, AUG12_Zynga.com_theville_0.10$_CPM, 123Greetings - IN Do Not Pay_NonIndia, AUG12_Zynga.com_RubyBlast_0.10$_CPM, 12_Affinity_Education_CPC_2.8_INR_1st, 728x90_Original, 300x250_TagModified,
  Dec11_ WhyteFort_CPL_INR 45, AUG12_Zynga.com_PetsVille_0.10$_CPM, 123Greetings - IN Do Not Pay_First, AUG12_Zynga.com_FishVille_0.10$_CPM, 3PAS-Pub-IO-adfac.net-LI, 3PAS-Pub-IO-bs.serving-sys.com-LI1, 3PAS-test-pub-IO-li, 160x600_Noscr...
</div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T09:56:24.917

您可以使用 jQuery 的 ThreeDots 插件：http: [//tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)

调用`ThreeDots()`您的`<div>`时，设置`max_rows`为`4`。只需查看该页面上的示例，您还可以设置自定义“阅读更多”链接。但请注意，您必须将文本包装成额外的`<span>`，如下所示：

```
<div class="text_here">
    <span class="ellipsis_text">
        your text
    </span>
</div> 
```

... jQuery 代码行将是：

```
$('.text_here').ThreeDots({ max_rows:4 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-22T18:44:26.087

`$("#startegy-sections-targeting-exclude").css('line-height');`如果您没有指定行高，则不应使用。在javascript中你可以使用这个：

```
var element = document.getElementById('startegy-sections-targeting-exclude');
var lineheight = document.defaultView.getComputedStyle(element, null).getPropertyValue("lineHeight"); 
```

# css - CSS | 伪元素悬停

> ID：14375972
> 
> 赞同：-2
> 
> 时间：2013-01-17T09:35:25.990
> 
> 标签：css, hover, pseudo-element

我在`Pseudo-element`悬停时遇到问题。我尝试了一堆东西来使它工作，但无济于事。我不知道如何让它工作，有人吗？

**HTML**

```
 <div>
        <header id="header2">
            <ul id="midlist">
                <li class="twitter"><a href="www.twitter.com">Twitter</a>
                </li>
                <li class="facebook"><a href="www.twitter.com">Facebook</a>
                </li>
                <li class="youtube"><a href="www.twitter.com">Youtube</a>
                </li>
            </ul>
        </header>
    </div> 
```

CSS

```
/* -------------------------------------------------*/
/* ----------------hover-------------------------- */

.facebook:before {
content: url(http://nobodyfilm.org/images/Mr.-Nobody-Facebook.jpg);
padding-right: 10px;
position: relative;
bottom: -.4em;
}

.facebook a:hover:before {
content: url(http://nobodyfilm.org/images/Mr.Nobody-Facebook-Hover.jpg);
padding-right: 10px;
position: relative;
bottom: -.4em;
  ;}

.facebook a:hover {color:red;}

/* ----------------hover----------------------------*/
/* ----------------------------------------------- */

.twitter:before{
 content: url(http://nobodyfilm.org/images/Mr.-Nobody-Twitter.jpg);
padding-right: 10px;
position: relative;
bottom: -.4em;
}

.youtube:before {
 content: url(http://nobodyfilm.org/images/Mr.-Nobody-Youtube.jpg);
 padding-right: 10px;
position: relative;
bottom: -.4em;
}

#midlist {
  width:708px;
  list-style-type: none;
  margin:0 auto;
    }

#midlist li {
  float:left;
  width:112px;
  height:10px;
  line-height:0px;
  }

#header2 {
  margin-top:2px;
  margin-bottom:5px;
  background-color: #191919;
  padding:21px;
  padding-bottom: 51px;
} 
```

[http://jsfiddle.net/VrY4j/4/](http://jsfiddle.net/VrY4j/4/)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:52:19.813

改变这个

```
.facebook a:hover:before { 
```

对此

```
.facebook:hover:before { 
```

因为您指的是另一个对象的伪元素。

小提琴：http: [//jsfiddle.net/VrY4j/12/](http://jsfiddle.net/VrY4j/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:50:23.333

您需要将 :before 应用于 a，而不是 li，因为您希望整个 li 具有悬停状态。在小提琴中，我只修复了 facebook 一个。

[http://jsfiddle.net/VrY4j/11/](http://jsfiddle.net/VrY4j/11/)

```
.facebook a:before {
content: url(http://nobodyfilm.org/images/Mr.-Nobody-Facebook.jpg);
padding-right: 10px;
position: relative;
bottom: -.4em;
}

.facebook:hover a:before {
content: url(http://nobodyfilm.org/images/Mr.Nobody-Facebook-Hover.jpg);
padding-right: 10px;
position: relative;
bottom: -.4em;
  ;} 
```

# voip - 使用 Asterisk GSM 网关呼叫短代码（支持服务）

> ID：14375974
> 
> 赞同：0
> 
> 时间：2013-01-17T09:35:32.523
> 
> 标签：voip, asterisk, gsm, gateway

在我们公司，我们已经使用 Astersik 配置了 VOIP GSM 网关。我们可以使用此网关拨打任何号码，但我们面临的唯一问题是当我们拨打一些支持服务时。当支持服务说请按 1 获取此服务，请按 2 获取此服务...目前我们无法按下这些数字！任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:57:03.357

那是一个DTMF​​问题。你的网关是如何连接到 Asterisk 的？通过 SIP？我认为您应该看两件事： 1\. 在您的 GSM 设备配置菜单中，查看 DTMF 选项并检查是否有问题。2\. 检查你的 Asterisk PBX 你有什么 dtmf 偏好。请看以下内容：

```
dtmfmode = inband|info|rfc2833 (global setting). Default rfc2833.
relaxdtmf = yes|no: Default no. 
```

重要的是您的 Gatweay 设置与您的 sip.conf 设置相匹配

# dll - 动态链接库（.dll、.so 等）是否有入口点？

> ID：14375977
> 
> 赞同：5
> 
> 时间：2013-01-17T09:35:41.540
> 
> 标签：dll, shared-libraries, dynamic-linking, entry-point

今天我在一个涉及库没有入口点的讨论中。通常可执行文件加载库，入口点是可执行文件本身的主要点。

**是否存在库本身可以有入口点的例外情况？**

**更新：**

@sgr91 解释说 DllMain 是 Windows 的入口点！linux 呢？或者它只是 Windows 的一个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-05T03:38:06.253

是的，动态库确实有入口点。[根据编译器](https://wiki.apache.org/stdcxx/C++0xCompilerSupport)和操作系统，它可能会以不同的方式命名（可能会或可能不会公开以供使用） 。

**对于 Linux：**

> void**属性**((constructor)) my_init(void);
> 
> void**属性**((destructor)) my_fini(void);

和部分现在已过时`_init`。`_fini`

阅读[更多](http://www.faqs.org/docs/Linux-HOWTO/Program-Library-HOWTO.html#INIT-AND-CLEANUP)

# java - HTTP 基本身份验证 Java

> ID：14375980
> 
> 赞同：1
> 
> 时间：2013-01-17T09:35:49.667
> 
> 标签：java, basic-authentication

我正在尝试从需要身份验证的网站 Socialcast 获取内容。（首先我使用基本身份验证进行 HTTP Post，然后尝试 HTTP GET）。我尝试了几个代码，我收到“结果”：

emily@socialcast.com:demo Base64 编码的身份验证字符串：ZW1pbHlAc29jaWFsY2FzdC5jb206ZGVtbw== *** BEGIN** **您正在被[重定向](https://demo.socialcast.com/)。* ****结尾 ******

 ***这是 HTTP 基本身份验证的代码：

```
try {
        String webPage = "http://demo.socialcast.com";
        String name = "emily@socialcast.com";
        String password = "demo";

        String authString = name + ":" + password;
        System.out.println("auth string: " + authString);
        byte[] authEncBytes = Base64.encodeBase64(authString.getBytes());
        String authStringEnc = new String(authEncBytes);
        System.out.println("Base64 encoded auth string: " + authStringEnc);

        URL url = new URL(webPage);
        URLConnection urlConnection = url.openConnection();
        urlConnection.setRequestProperty("Authorization", "Basic " + authStringEnc);
        InputStream is = urlConnection.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);

        int numCharsRead;
        char[] charArray = new char[1024];
        StringBuffer sb = new StringBuffer();
        while ((numCharsRead = isr.read(charArray)) > 0) {
            sb.append(charArray, 0, numCharsRead);
        }
        String result = sb.toString();

        System.out.println("*** BEGIN ***");
        System.out.println(result);
        System.out.println("*** END ***");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

但是，当我之后尝试执行 GET 时，它说未经授权。凭据是 emily@socialcast.com/demo - 目前由 Socialcast Dev 提供，因为我也无法访问我自己的 Socialcast 实例。
这段代码错了吗？我怎样才能正确地做到这一点？顺便说一句，我正在使用 HttpClient 4.x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:43:54.427

您是否在每个请求中发送凭据？我认为这是需要的，否则服务器没有任何其他信息可以证明您仍然有权查看其他页面...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:56:39.480

当您的示例代码不使用它时，我不确定为什么用[apache-httpclient-4.x标记这个问题。](/questions/tagged/apache-httpclient-4.x "显示标记为“apache-httpclient-4.x”的问题")事实上，如果您确实使用了 httpclient，那么您可以很容易地让它为您处理身份验证，[请参阅此处的优秀教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)。***

# java - SpringIntegration 从队列中删除消息而不进行处理

> ID：14375981
> 
> 赞同：2
> 
> 时间：2013-01-17T09:35:51.133
> 
> 标签：java, spring, queue, jms, spring-integration

我们的应用程序中有一个**JMS**关闭队列，需要在特定事件上使用 Spring 上下文关闭正在运行的节点。

为了正确关闭正在运行的**ApplicationContext**而无需在启动时再次处理此“关闭”消息，我们需要有一个单独的终止**Thread**，以确保在我们终止**ApplicationContext**之前已处理该消息。

有没有办法避免额外杀死**Thread**？

**例如：**配置**SpringIntegration**流以标记消息已读，在从**Queue**读取消息后立即忽略它可能的处理失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:06:25.270

如果您将 kill 消息路由到`ExecutorChannel`(or `QueueChannel`)，则消息将被移交给另一个线程，并且事务将立即提交。

# ruby-on-rails - 用于解析序列化 PHP 数组的 ruby gem？

> ID：14375983
> 
> 赞同：4
> 
> 时间：2013-01-17T09:35:59.900
> 
> 标签：ruby-on-rails, ruby

我正在使用 savon v2 的 SOAP Web 服务，并在响应中获取我需要解析的序列化 PHP 数组。

是否有提供此功能的 ruby​​ 或 rails gem？

php 数组字符串如下所示：

```
"a:5:{s:4:\"link\";s:88:\"https://www.12345.de/kundenmeinung.php?kunde=a2ca9498f6f7695aa518d6d6ed9fec7b&shop=12345\";s:4:\"hash\";s:32:\"a2ca9498f6f7695aa518d6d6ed9fec7b\";s:11:\"known_since\";s:0:\"\";s:4:\"done\";i:1;s:7:\"done_at\";i:1358413353;}" 
```

问候

卡斯滕

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:39:12.637

```
# gem search -r php|grep serial

php-serial (0.9.5)
php-serialization (0.5.3)
php-serialize (1.1.0)
php-serialize4ruby (0.0.0)
php-serialize_ryan (1.1.1)
php_serialize (1.2)
viva-php_serialize (1.1.3) 
```

所以至少有7个。

# image - 如何限制图像缩放、随屏拖动？

> ID：14375986
> 
> 赞同：1
> 
> 时间：2013-01-17T09:36:03.577
> 
> 标签：image, windows-phone-7, windows-phone-7.1

我已经制作了一个显示图像的应用程序，并且我已经实现了捏缩放，使用`Silverlight for Windows Phone Toolkit, GestureService`它进行翻译非常完美。但是当我缩放图像或拖动图像时，它不是图像边框/边界。:(

如何在屏幕上限制图像。我想要与原生 Windows 手机照片查看器或网络浏览器相同的外观和感觉（我们只能在网络浏览器的限制范围内拖动内容）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:26:20.753

我已经在我的博客上发布了代码.. 看看这里 [http://invokeit.wordpress.com/2013/01/17/photoviewer-with-pinch-zoom-pan-and-flick-support/](http://invokeit.wordpress.com/2013/01/17/photoviewer-with-pinch-zoom-pan-and-flick-support/)

我对我的应用程序的照片查看器使用相同的

# cuda - cuda-code 不进入内核

> ID：14375990
> 
> 赞同：1
> 
> 时间：2013-01-17T09:36:20.887
> 
> 标签：cuda

我正在努力学习 cuda。我正在尝试运行一个简单的代码

```
#include <stdlib.h>
#include <stdio.h>

__global__ void kernel(int *array)
{
 int index = blockIdx.x * blockDim.x + threadIdx.x;

  array[index] = 7;
}

int main(void)
{
  int num_elements = 256;

  int num_bytes = num_elements * sizeof(int);

  // pointers to host & device arrays
  int *device_array = 0;
  int *host_array = 0;

  // malloc a host array
  host_array = (int*)malloc(num_bytes);

  // cudaMalloc a device array
  cudaMalloc((void**)&device_array, num_bytes);

  int block_size = 128;
  int grid_size = num_elements / block_size;

  kernel<<<grid_size,block_size>>>(device_array);

  // download and inspect the result on the host:
  cudaMemcpy(host_array, device_array, num_bytes, cudaMemcpyDeviceToHost);

  // print out the result element by element
  for(int i=0; i < num_elements; ++i)
  {
    printf("%d ", host_array[i]);
  }

  // deallocate memory
  free(host_array);
  cudaFree(device_array);
} 
```

它应该打印 7 但它打印 0 这个语句似乎没有被执行 "kernel<<>>(device_array);" 它也没有给出任何编译错误。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:12:49.053

该代码在我的机器上运行良好，但请确保`cudaDeviceSynchronize`在内核调用之后添加和错误检查。

更改代码如下检查错误：

```
kernel<<<grid_size,block_size>>>(device_array);
// wait until tasks are completed
cudaDeviceSynchronize();

// check for errors
cudaError_t error = cudaGetLastError();
if (error != cudaSuccess) {
  fprintf(stderr, "ERROR: %s \n", cudaGetErrorString(error));
} 
```

# android - 相当于移动设备的 Mousdown

> ID：14375991
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:36:22.850
> 
> 标签：android, iphone, html5-audio

我正在尝试让音频声音在触摸时播放，但无法使其始终如一地工作，它在 android 上有库存和 dolphin，但在 ipad 上根本不工作。我试过mousedown，onclick，touchstart，on touchstart。他们都没有工作

```
<canvas id="scratcher1" class="scratchMe" width="99px" height="89px" onmousedown="alert(down)" onclick="alert(click)" touchstart="alert(touch)" ontouchstart="alert(ontouch)"></canvas>
<canvas id="scratcher2" class="scratchMe" width="99px" height="89px" onmousedown="scratch.play()"></canvas> 
```

这就是它现在的情况，切换到警报，所以我可以尝试找出哪个有效，正如我所说的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:50:08.163

您可以使用 javascript 初始化代码将事件编程添加到画布：

```
document.getElementById("scratcher1").addEventListener("mousedown", alert, false); 
```

它应该工作。[在](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/HTML-canvas-guide/AddingMouseandTouchControlstoCanvas/AddingMouseandTouchControlstoCanvas.html)“响应画布上的鼠标和触摸事件”下了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:08:34.110

所有触摸动作都提供以下触摸动作序列：

ontouchstart ontouchmove ontouchend onclick

只有 ontouchmove 可以避免，其余的都是为触摸动作生成的。

请检查这些。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:36:35.097

设法通过这个论坛找到答案。

[http://www.dynamicdrive.com/forums/showthread.php?65787-How-to-combine-eventhandlers-for-mouse-and-touchscreen-](http://www.dynamicdrive.com/forums/showthread.php?65787-How-to-combine-eventhandlers-for-mouse-and-touchscreen-(e-g-iPad) （例如-iPad ）

iPad也有类似的情况。

```
<script type="text/javascript"> 
```

(function(){ var first = document.getElementById('scratcher1'), second = document.getElementById('scratcher2'); 第三 = document.getElementById('scratcher3'); 第四 = document.getElementById('scratcher4');第五 = document.getElementById('scratcher5'); 第六 = document.getElementById('scratcher6'); 第七 = document.getElementById('scratcher7'); 第八 = document.getElementById('scratcher8');

```
first.ontouchstart = second.ontouchstart = third.ontouchstart = fourth.ontouchstart = fifth.ontouchstart = sixth.ontouchstart = seventh.ontouchstart = eighth.ontouchstart = function () {
    scratch.play()
}; 
```

})();

是什么终于让它工作了。

# asp.net - ASP.NET 中成员资格提供程序中的角色分组

> ID：14375993
> 
> 赞同：1
> 
> 时间：2013-01-17T09:36:27.993
> 
> 标签：asp.net, asp.net-membership, asp.net-roles

[我之前](https://stackoverflow.com/questions/14070254/manage-user-access-to-pages-in-asp-net)已经问过类似的问题

我有基本的用户角色：

```
-Admin
-Super User
-User 
```

对于这个角色，我管理站点权限。比如添加新用户或更改他们的个人资料。

我的应用程序中还有很多页面，比如

```
-Evaluation.aspx 
-Action.aspx 
-Properties.aspx 
```

等等。我希望能够为每个用户单独授予对每个页面的访问权限。

我考虑角色。我添加`User`到`Evaluation`角色，他可以浏览`Evaluation.aspx`。

这种方法中的每个页面都有自己的基于角色的访问模型。所以我将在我的会员提供者中扮演更多角色。

```
-Evaluation
-Action
-Properties 
```

然后我可以轻松地在`web.config`.

```
<location path="Users.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin, Super User"/>
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

问题是`aspnet_Roles`in`Membership provider`变得杂乱无章。每当我处理角色时，我都必须过滤角色。

例如，我有`List<string>`用户类型角色：

```
private readonly List<string>  UserTypeRoles = new List<string> {"Users", "Super User", "Admin"}; 
```

当我想绑定`CheckBoxList`控件时，`PagePermissionRoles`我必须这样做：

```
private IEnumerable<string> UserSectionRolesGet(string userName)
{
    return Roles.GetRolesForUser(userName).Except(UserTypeRoles);
} 
```

有没有办法创建两种类型的角色：`UserTypeRoles`并`PagePermissionRole`提供单独的存储和处理。

我真的不想覆盖现有的内置 asp.net 会员提供程序。

# matlab - Matlab中的字符（非ASCII）

> ID：14375994
> 
> 赞同：8
> 
> 时间：2013-01-17T09:36:32.477
> 
> 标签：matlab, non-ascii-characters

我有三个字符（大于 127），我需要将其写入二进制文件。
出于某种原因，MATLAB 和 PHP/Python 倾向于编写不同的字符。
对于 Python，我有：

```
s = chr(143)+chr(136);
f = open('pythonOut.txt', 'wb');
f.write(s);
f.close(); 
```

对于 MATLAB，我有：

```
s = strcat(char(143),char(136));
fid = fopen('matlabOut.txt');
fwrite(fid, s, 'char');
fclose(fid); 
```

当我比较这两个文件时，它们是不同的。（使用 diff 和/或 cmp 命令）。
更重要的是，当我这样做时

```
disp(char(hex2dec('88'))) //MATLAB prints 
print chr(0x88) //PYTHON prints ˆ 
```

两种输出不同。我想让我的 MATLAB 代码与 Python 相同。MATLAB 代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:05:32.473

您正在尝试显示扩展 ASCII 字符，*即*ASCII 编号大于 128 的符号。MATLAB 内部不使用扩展 ASCII，而是使用 16 位 Unicode。

如果要编写与 Python 脚本中相同的值，请使用[`native2unicode`](http://www.mathworks.com/help/matlab/ref/native2unicode.html)获取所需的字符。例如，`native2unicode(136)`返回`^`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T10:08:26.573

这两个文件不同的事实似乎很明显。`chr(134)`显然不同于`char(136)`:)

在[Matlab](http://www.mathworks.nl/help/matlab/ref/char.html)中，只有前 127 个字符对应（非扩展）ASCII；之后的任何东西都是Unicode16。

在[Python](http://docs.python.org/2/library/functions.html#chr)中，前 255 个字符对应于（扩展的）ASCII（`unichr()`用于 Unicode）。

但是，[unicode](http://www.tamasoft.co.jp/en/general-info/unicode.html) 0x88 与[扩展的 ASCII](http://www.ascii-code.com/) 0x88 相同（与其他大多数一样）。Matlab 无法正确显示它的原因是，默认情况下，Matlab 命令窗口不能很好地处理 Unicode，而 Python（我认为在终端中运行）通常做得更好。

尝试在 Matlab 的命令窗口中更改字体，或者在终端中启动 Matlab 并打印 0x88 字符；它应该是一样的。

无论如何，输出到文件的字符不应该有任何差异；这只是一个*显示*问题。

# java - 在 Ivy 中添加解析器

> ID：14375997
> 
> 赞同：0
> 
> 时间：2013-01-17T09:36:42.267
> 
> 标签：java, dependencies, ivy, dependency-management

[我是 Ivy 的新手](http://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html)，我只是想在我的`ivysettings.xml`：

```
<?xml version="1.0"?>
<ivysettings>
<settings defaultResolver="maven" />
<resolvers>
    <chain name="maven" returnFirst="true">
        <ibiblio name="restlet" m2compatible="true"
            root="http://maven.restlet.org/" />
    </chain>
</resolvers>
</ivysettings> 
```

问题是，一旦我这样做了，我就无法在新添加的存储库中解决其他任何地方的依赖关系。

我想**保留**默认解析器并**添加**新的解析器？

我如何告诉 Ivy 继续查看它的默认存储库？

从[我可以阅读的文档中](http://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html)：

> Ivy 带有一组内置的依赖解析器，可以处理最常见的需求。

很好，但是我在哪里可以得到那些内置解析器的列表！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:42:10.867

您可以使用链式解析器拥有多个解析器

[参考](http://ant.apache.org/ivy/history/latest-milestone/tutorial/multiple.html)

# mobile - 需要用于 Ios 4 -5、android 和 blackberry 的具有弹性缓动的移动/平板电脑触摸滑块

> ID：14375998
> 
> 赞同：0
> 
> 时间：2013-01-17T09:36:43.517
> 
> 标签：mobile, touch, zepto

目前，我们正面临一个使用 Zepto 框架开发的项目的问题。

需要与带有下一个按钮和触摸幻灯片选项的轮播相同的内容滑块。

客户端拒绝使用任何 jQuery。我们看到的所有插件都没有在所有浏览器中提供流畅的缓动。

有人可以帮忙吗？任何具有平滑效果的滑块的人都可以使用 Zepto 轻松实现，请提供给我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:31:26.513

您尝试过[S6](http://www.idangero.us/sliders/s6/)或[Swipe](http://swipejs.com/)吗？

此外，来自 Zurb 基金会 4 的[Orbit](http://foundation.zurb.com/docs/components/orbit.html)与 Zepto 合作

*如果没有关于“我们见过的所有插件*”的更多细节（所以我们不推荐您已经尝试过的插件）以及“*所有浏览器*”（移动设备？移动设备）的意思，有点难以知道如何提供帮助和桌面？什么版本？你要支持什么？）