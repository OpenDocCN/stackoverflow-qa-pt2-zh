# StackOverflow 问答 15271000-15271999

# rubymine - 无法将测试报告器附加到测试框架或测试框架意外退出

> ID：15271002
> 
> 赞同：2
> 
> 时间：2013-03-07T12:14:58.003
> 
> 标签：rubymine

2天来，我一直在与这个问题作斗争。并且无法获得指向我的项目文件的解决方案链接：

[https://github.com/gitamsinghkaystha/streamingtestframework.git](https://github.com/gitamsinghkaystha/streamingtestframework.git)

红宝石版本：1.8 ruby​​mine 4

# c# - EF Code First 似乎正在崩溃工作进程

> ID：15271004
> 
> 赞同：1
> 
> 时间：2013-03-07T12:15:02.030
> 
> 标签：c#, ef-code-first

在开发阶段，我使用 EF Code First 最初创建了我的数据库。当我将项目移动到服务器上的暂存环境时，我包含了一个小技巧，以避免在特定阶段更改或删除数据库。（因此它将连接到现有数据库）。我现在制作了该项目的一个简单副本，并尝试将其托管在服务器上的另一个位置，以便同时运行暂存版本和实时版本，但使用两个不同的数据库，我认为这两个数据库可以在 web.config 中设置。当我从一个位置运行它时它可以工作但在另一个位置我的应用程序池失败

```
A process serving application pool 'XYZ' suffered a fatal communication error with the Windows Process Activation Service. The process id was '1234'. The data field contains the error number.

Faulting application name: w3wp.exe, version: 7.5.7601.17514, time stamp: 0x4ce7a5f8
Faulting module name: ntdll.dll, version: 6.1.7601.17725, time stamp: 0x4ec49b8f
Exception code: 0xc00000fd
Fault offset: 0x0002e04e
Faulting process id: 0x1d98
Faulting application start time: 0x01ce1b29dcf57530
Faulting application path: C:\Windows\SysWOW64\inetsrv\w3wp.exe
Faulting module path: C:\Windows\SysWOW64\ntdll.dll
Report Id: 1fd4a0b0-871d-11e2-a272-be31a5415ec8 
```

有什么想法或建议吗？

有关代码的详细信息：

**Global.asax** - Application_Start

```
if (DAL.General.Helpers.Phase == "Live") {
    Database.SetInitializer<MyContext>(new MyContextProductionInitialiser());
} else {
    Database.SetInitializer(new MyContextInitialiser());
} 
```

**MyContextProductionInitialer**

```
public class MyContextProductionInitialiser : IDatabaseInitializer<MyContext>
{
    public void InitializeDatabase(MyContext context)
    {
        if (!context.Database.Exists())
        {
            throw new System.Configuration.ConfigurationErrorsException("Database does not exist");
        }
    }
} 
```

**MyContextInitialer**

```
public class MyContextInitialiser : DropCreateDatabaseIfModelChanges<MyContext> {...} 
```

**我的上下文**

```
public MyContext() : base("name=MyContextConnectionString") {
    Database.Initialize(false);
} 
```

** Web.config **

```
<connectionStrings>
    <add name="MyContextConnectionString" connectionString="Server=.;Database=database_staging;User Id=sa;Password=password;" providerName="System.Data.SqlClient " />
</connectionStrings> 
```

数据库：我正在为暂存和实时数据库使用共享 SQL 登录用户。

应用程序池：在 IIS 7.5 中运行着两个独立但相同的应用程序池。它们都是 v4.0 集成的。

**编辑** 如果我将数据库名称更新为与原始数据库名称完全相同，那么它可以工作。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:35:43.383

由于堆栈溢出，工作进程正在崩溃。我仍在调查，但在写入数据库时​​，抛出以下异常：`Cannot insert the value NULL into column 'ID', table 'XYZ'; column does not allow nulls. INSERT fails.\r\nThe statement has been terminated.`新数据库的 IDENTITY 字段的配置必须以某种方式不正确。出现错误时，我会写入错误表，从而导致 SO 和工作进程崩溃。

由于 SQL 配置方式的某种原因，我无法对数据库进行简单的还原，因此我只是删除了数据库并通过编写对象脚本并重新配置了必要的表来重新创建它。

经验教训：如果工作进程崩溃，这是有充分理由的，在这种情况下，StackOverflow 非常有意义！

# android - 在启动时禁用我的应用程序并通常加载 android

> ID：15271005
> 
> 赞同：0
> 
> 时间：2013-03-07T12:15:04.530
> 
> 标签：android

我创建了应用程序，它也是一个启动器。此应用程序将在启动时默认加载应用程序。我想给用户一个选项来取消选中启动时不运行应用程序。

要在启动时加载应用程序，我在清单中使用引导接收器并调用所需的 java 文件来加载应用程序。

现在如果未选中选项，我如何覆盖启动 - 而不是加载我的应用程序，它应该加载主屏幕？

试过这个：

```
 public class BootUpReceiver extends BroadcastReceiver 
  {
 String nostartup= "2";
 @Override
  public void onReceive(Context context, Intent intent) 
   {
    if (nostartup.equalsIgnoreCase("1"))
    {

    Intent i = new Intent(context, main.class);  
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);  
    }
    else
    {

    }   
  }
  } 
```

当我重新启动我的平板电脑时，我得到了完整的操作，提示使用 home laucher 发出其他启动器程序

我该如何选择家用发射器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:21:51.187

在接收器中，您应该检查该选项。

如果启用，请启动您的应用程序/活动。如果没有，就什么也不做。它应该进入主屏幕。

# wordpress - WordPress中图像尺寸为960 * 250时如何使特色图像显示

> ID：15271006
> 
> 赞同：0
> 
> 时间：2013-03-07T12:15:05.897
> 
> 标签：wordpress

我正在定制一个 WordPress 主题，并面临一些特色图像的问题。

如果帖子或页面上有特色图片 - 并且 - 该特色图片为 960x250，则特色图片显示为该帖子或页面上的标题。

如果特色图片不是 960x250 则该特色图片应显示在主要内容区域中，水平填充空间（就像现在在帖子中一样）当且仅当特色图片为 960x250 时，它仅显示为标题，不在内容中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:13:16.027

正确的写作方式是

```
if ( has_post_thumbnail() ) {
  $headerImg = get_the_post_thumbnail($post->ID, array(960,250) );
} 
```

`has_post_thumbnail()`只接受可选的 id

**已编辑**

```
$headerImg = wp_get_attachment_image_src($post->ID, array(960,250));

if (has_post_thumbnail() && $headerImg[1] == 960 && $headerImg[2] == 250) {
 // if it is output is 960x250 in size
 $headerImg = the_post_thumbnail(array(960,250));
} else {
 // if it isn't then show the medium or some other size image
 $contentImg = the_post_thumbnail('medium');
} 
```

**进一步编辑**

```
$headerImg = get_the_post_thumbnail($post->ID, array(960,250) );
if (has_post_thumbnail() && !empty($headerImg) ){
 #This checks to see if the post has the thumbnail and the image is 960x250.
 #Therefore you can now add it to the header.
 $headerImg = get_the_post_thumbnail($post->ID, array(960,250) );
} elseif (has_post_thumbnail() && empty($headerImg) {
   #This checks to see if thumbnail exists and works if 960x250 is empty
} else {
 #Place code here if the featured image doesnt exist
} 
```

# javascript - 忽略 JavaScript 中的函数？

> ID：15271007
> 
> 赞同：5
> 
> 时间：2013-03-07T12:15:09.720
> 
> 标签：javascript, html

当我单击 mainDiv 时，将调用该函数，当我单击 subDiv 时，`mainDiv()`将调用两个函数。`mainDiv()``subDiv()`

`subDiv()`当我单击 subDiv 时，我只想调用该函数。我怎样才能做到这一点？

**代码：**

```
<div onclick="mainDiv()">
  show main div
  <div onclick="subDiv()">
    show sub div
  </div>
</div>
<script type="text/javascript">
  function  mainDiv(){
    alert("main div is clicked");
  }
  function  subDiv(){
    alert("sub div is clicked");
  }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:16:52.547

您可以在除 IE8 之外的所有浏览器中使用[stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)（以及来自同一公司的旧浏览器）。但是如果你想兼容，你应该使用[quirksmode 中描述](http://www.quirksmode.org/js/events_order.html)的解决方案：

```
 <div onclick="subDiv(event)">

   function  subDiv(e){
     e.cancelBubble = true;
     if (e.stopPropagation) e.stopPropagation();
     alert("sub div is clicked");
   } 
```

**[示范](http://jsbin.com/ijidok/1/edit)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:18:24.137

采用`e.stopPropogation()`

**HTML**

```
<div onclick="subDiv(event)">  //<--- pass event parameter 
```

**脚本**

```
function  subDiv(e){    

   if(e.stopPropagation){  // check stoppropogation is avilable
      e.stopPropagation();  //use stopPropogation
   }else{
      e.cancelBubble = true;  // for ie8 and below
   }
   alert("sub div is clicked");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:23:00.753

```
<script type="text/javascript">
function mainDiv() {
    alert("main div is clicked");
}
function subDiv(e) {
    if (!e)
        e = window.event;

    //IE9 & Other Browsers
    if (e.stopPropagation) {
        e.stopPropagation();
    }
    //IE8 and Lower
    else {
        e.cancelBubble = true;
    }
    alert("sub div is clicked");

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:20:27.830

试试这个

```
 <div onclick="mainDiv()">
      show main div
      <div onclick="subDiv(event);">
        show sub div
      </div>
    </div>
    <script type="text/javascript">
      function  mainDiv(){
        alert("main div is clicked");
      }
      function  subDiv(arg){
        arg.stopPropagation();
        alert("sub div is clicked" + arg);

      }
</script> 
```

要支持 IE 8 及更低版本，请使用 arg.cancelBubble

# windows - CopyFile 是否对源文件加锁？

> ID：15271010
> 
> 赞同：1
> 
> 时间：2013-03-07T12:15:15.210
> 
> 标签：windows, winapi, createfile, file-locking, file-copying

当我使用 复制文件时[`CopyFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363851%28v=vs.85%29.aspx)，源文件会以任何方式锁定吗？说-如果复制操作开始，然后有人想打开*源*文件，它会成功吗？如果“某人”请求对文件的独占访问权，他的 Win32 API 调用（可能是 a [`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)）会失败，还是会等待（或其他）直到复制操作完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:05:56.757

如果有人请求独占访问已打开的文件，该请求将失败。Windows 没有包含“如果其他人正在使用该文件，请将他关闭”的文件打开模式。

我记得，`CopyFile`打开源文件以便其他人可以读取，但不能写入。

# jquery - 使用 IE9 和 jQuery 处理动态图像错误

> ID：15271011
> 
> 赞同：0
> 
> 时间：2013-03-07T12:15:18.507
> 
> 标签：jquery, asp.net, error-handling

我有一些动态加载图像控件的 asp.net 代码。它的工作原理是将图像放入隐藏变量中，然后通过 jquery 设置 url。它工作正常，除了在 IE9 中总是发生错误，但我无法确定错误是什么。我应该查看“err”的什么属性来获取错误，有没有更好的方法来做到这一点？

```
<div id="DivFS" class="thumbnailDiv">
    <asp:Image ID="thumbFS" runat="server" CssClass="thumbImage" />
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#thumbFS').error(function (err) {
        });
     $('#thumbFS').attr("src", $('#DocumentFS').val());
    });
</script>

<asp:HiddenField ID="DocumentFS" runat="server" />

protected void Page_Load(object sender, EventArgs e)
    {
        this.DocumentFS.Value = this.GetUrl(......, UrlType.Thumbnail);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:48:06.490

我通过将图像默认设置为不可见并在加载时打开它们的可见性来解决这个问题，而不是相反（使它们可见，然后在发生错误时将它们变为不可见）。错误事件在 IE9 中被证明是不可靠的，尤其是在按下 CTRL-F5 时。

# android - 将 Google Play 服务导入 Eclipse 时挂起

> ID：15271014
> 
> 赞同：2
> 
> 时间：2013-03-07T12:15:28.070
> 
> 标签：android, eclipse, google-play-services

我刚刚发现地图服务需要这个。因此我升级到最新的 SDK / Google Play 服务。

然后我将它导入到 Eclipse 中......但是当我点击“完成没有任何反应？

![单击完成时导入没有任何反应](../Images/62ad7d527a8cf67565c7e29fdc3b803a.png)

上面的截图有什么问题吗？我很确定我已按照说明进行操作，但我一定遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:27:57.960

如果您想使用 google-play-services，您必须将 lib 添加到您的项目中。

```
1\. Create ur own android project
2\. Project right click -> Properties
3\. under java build -> library u can add the lib of google-play-services .
4\. use services 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:43:56.500

选择这样的路径

> /extras/google/google_play_services/libproject/google-play-services_lib

并注意这一点。

> 要使用 Google Play 服务 API 进行开发，您必须下载 Google Play 服务 SDK

.可能是您的文件夹中没有lib项目，请检查。

> [http://developer.android.com/google/play-services/index.html](http://developer.android.com/google/play-services/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:53:00.920

**小心，请按照以下步骤操作并节省您的时间**

1.  右键单击您的项目资源管理器。

2.  从现有代码中选择新建-> 项目-> Android 应用程序项目

3.  仅浏览此路径 - “C:\Users**your path**\Local\Android\android-sdk\extras\google\google_play_services”

4.  **小心只浏览 - google_play_services 而不是 google_play_services_lib**

5.  这样您就可以导入 google play 服务库。

如果您对此有任何疑问，请告诉我。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T12:22:50.593

标记“将项目复制到工作区”。也许您需要将您的项目设置为将此 Google 项目用作库。

# dll - 依赖项中的“crtdll.dll”

> ID：15271015
> 
> 赞同：1
> 
> 时间：2013-03-07T12:15:31.580
> 
> 标签：dll, linker, crt, visual-studio-2010

我使用 VC10 构建的 DLL 静态链接 CRT（以及其他一些库）。突然，我发现最新版本的 DLL 依赖于“crtdll.dll”（而以前的版本没有），我试图了解这种依赖关系的来源。链接器`/VERBOSE:LIB`开关没有帮助：唯一包含单词“crt”的导入库是`rpcrt4.lib`.

那么，我怎样才能找出我的 DLL 突然开始依赖的原因`crtdll.dll`？

# spring - @Component @Scope("singleton") 公共类 BootStrapper 实现 ApplicationListener {

> ID：15271019
> 
> 赞同：9
> 
> 时间：2013-03-07T12:15:43.870
> 
> 标签：spring, web-applications

我正在尝试对我的 webapp 进行一次初始化。我需要 ApplicationListener 类的单例，所以我将范围设置为单例，但它正在创建多个实例。此 BootStrapper 未在任何其他 xml 配置文件中定义。我知道默认范围是单例，但必须添加 @Scope("singleton") 因为它不是单例。即使有这个注释，它仍然会创建多个实例。这是我的应用程序监听器。

```
@Component
@Scope("singleton")
public class BootStrapper implements ApplicationListener<ContextRefreshedEvent> { 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:24:31.810

要在 bean 初始化后调用回调，请使用[`@PostConstruct`](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html).

```
@Component
public class BootStrapper() {

     @PostConstruct
     public void doSomething() {
          System.out.println("I am initalized!");
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T19:40:38.280

试试这样：

```
@Configuration
public class TestService
{
  private Properties properties;

  @Bean
  @Scope(value = ConfigurableBeanFactory.SCOPE_SINGLETON)
  public Properties getAppProperties()
  {
    try
    {
        if (properties == null)
        {
          properties = ServiceUtils.loadProperties();
        }
     return properties;
    }
    catch (Exception e)
    {
      LOGGER.logCaughtException("Exception Occured while loading App Properties.", e);
    }
  }
} 
```

# csv - 使用 CSV 数据的 Beanshell 脚本

> ID：15271020
> 
> 赞同：2
> 
> 时间：2013-03-07T12:15:44.110
> 
> 标签：csv, jmeter, beanshell

我使用正则表达式提取器和 beanshell 脚本（如下所示）动态创建了参数。我正在使用创建参数`Name = "pass_" + i`。
现在我需要从 CSV 文件中填充这些参数字段的值。我已经加载了一个 CSV 文件，并且登录变量包含第一行的值。以下代码仅填充 CSV 文件中的第一个值。我需要代码来遍历 CSV 文件并使用第一列中存在的下一个值填充参数字段。

```
int count = Integer.parseInt(vars.get("pass_matchNr"));
for(int i=1;i<=count;i++) { //regex counts are 1 based
sampler.addArgument(vars.get("pass_" + i),vars.get("login"));} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:06:00.477

尝试使用[CSV 数据配置对象](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)。您指向 CSV 的路径，然后可以轻松引用 Jmeter 变量中的每个 CSV 列。在每次迭代中，您的 Jmeter 变量将保存 CSV 中下一行的值。从这里你可以使用 vars.get("yourVar"); 将此 Jmeter 变量输入到您的 BeanShell 脚本中。

或者，如果您需要一次完成来自 CSV 的填充，则可以选择使用 CSV 数据配置对象并将您的第一列和第一行设置为 CSV 中找到的所有值的串联，例如'值A、值B、值C'。然后，您可以将此变量输入到您的 Jmeter 脚本中，并通过在 (',') 上进行拆分在 BeanShell 中对其进行解析。这将为您留下 CSV 中找到的所有值。

如果这 2 个选项不合适，最后一个选项是创建您自己的 Java 自定义方法，然后您可以将其输入到您的 BeanShell 脚本中。例如，您可以创建一个类来读取您的 CSV 文件并以您想要的格式返回一个字符串。有关在 Jmeter 中设置自定义函数的详细分步指南，请参阅[本文。](https://www.capacitas.co.uk/blog/custom-java-beanshell-classes-and-methods-in-jmeter)

# api - 是否有与 DataType.mapToString(Map m) 在猪 API 中？

> ID：15271026
> 
> 赞同：0
> 
> 时间：2013-03-07T12:16:01.907
> 
> 标签：api, apache-pig

我需要将猪格式的地图字符串表示（例如“['k1'#'v1','k2'#'v2']”）转换为地图对象。我更喜欢使用 pig 实现而不是自己实现它。我找到了一种相反的转换方法：DataType.mapToString(Map m)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:25:30.170

如果你真的坚持Pig，你可能会想出以下几点：

```
...
import org.apache.pig.builtin.Utf8StorageConverter;
...
public class Test {

    public static void main(String[] args) throws IOException {

        String mapStr = "[k1#v1,k2#v2]";

        Utf8StorageConverter converter = new Utf8StorageConverter();
        Map<String, Object> map = converter.bytesToMap(mapStr.getBytes());

        for (Map.Entry<String, Object> entry : map.entrySet()) {
            System.out.println(entry.getKey() + " :: " + entry.getValue());
        }
    }
} 
```

我假设你有 Pig v0.10.0

# ios - ScrollView 滚动到顶部动画 YES 不动画

> ID：15271030
> 
> 赞同：0
> 
> 时间：2013-03-07T12:16:14.243
> 
> 标签：ios, xcode, animation

这是我的第一篇文章，因为我通常会找到堆栈溢出的所有答案，但这次不是！

我有一个小问题。

我正在使用以下方法：

```
 -(void)scrollToTop;
{
    [_scrollView setContentOffset:CGPointZero animated:YES];
} 
```

有时它动画有时没有！

这个有效：

```
-(void)newPage:(NSString*)href
{

    if(!(_pageNumber == href.integerValue))
    {
        __weak id weakSelf = self;

        [(PageViewController*)_preLoadPages[href] setPageMinHeight:_actualPage.height];

        NSMutableArray *viewControllers = [[NSMutableArray alloc] init];
        viewControllers[0] = _preLoadPages[href];
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished){

            [weakSelf afterLinkClicked:href];

        }];

        _pageNumber = href.integerValue;
    }
}
- (void)afterLinkClicked:(NSString*)href
{
    _pageNumber = href.integerValue;

    [_preLoadPages[href] setPageMinHeight:0];
    _actualPage = _preLoadPages[href];
    [_preLoadPages removeAllObjects];
    [self updateScrollView];
    [self scrollToTop];

    [self parsePage];
} 
```

而这个没有：

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{

    CGPoint test = [gestureRecognizer locationInView:gestureRecognizer.view];
    if(test.x>=742)
    {
        if(_preLoadPages[@"next"]!=nil)
        {
            __weak id weakSelf = self;

            [(PageViewController*)_preLoadPages[@"next"] setPageMinHeight:_actualPage.height];

            NSMutableArray *viewControllers = [[NSMutableArray alloc] init];
            viewControllers[0] = _preLoadPages[@"next"];
            [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished){

                [weakSelf afterAnimationCompleted];

            }];
        }
    }

    return YES;
}
- (void)afterAnimationCompleted
{
    _pageNumber++;
    [_preLoadPages[@"next"] setPageMinHeight:0];
    _actualPage = _preLoadPages[@"next"];
    [_preLoadPages removeAllObjects];
    [self updateScrollView];
    [self scrollToTop];

    [self parsePage];
} 
```

这两个电话之间几乎没有区别！我曾尝试使用 performSelector: withObject: withDelay:0 但它也不起作用！

# iphone - iOS 键盘显示 SAVE

> ID：15271032
> 
> 赞同：1
> 
> 时间：2013-03-07T12:16:20.967
> 
> 标签：iphone, ios, objective-c, uitextfield, uikeyboard

我有一个`UITextField`，我想有一个`UIkeyBoard`显示“保存”的。

如何让键盘显示“保存”按钮？我知道可以配置的选项，例如 Default、GO、DONE、NEXT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:27:57.320

您不能`UIKeyBoard`手动更改 ' 按钮的文本。

这是[您可以使用的所有返回键](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/doc/c_ref/UIReturnKeyType)的链接，Apple 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:26:39.343

不，您不能将键盘更改按钮更改为`SAVE`。

[您可以将“返回”更改为苹果文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)中允许的任何一种

# stanford-nlp - 了解斯坦福 CoreNLP 共指集符号

> ID：15271037
> 
> 赞同：2
> 
> 时间：2013-03-07T12:16:29.880
> 
> 标签：stanford-nlp

我正在使用斯坦福 corenlp。为了更清楚地了解共指集，我需要帮助。对于句子

“Kosgi Santosh 向斯坦福大学发送了一封电子邮件。他没有得到回复”我得到了共指集 (2,1,[1,2)) -> (1,2,[1,3))，即：“他”->“科斯吉·桑托什”</p>

到目前为止，我理解“（2,1，”是第二句第一个词和“（1,2，”是第一句第二个词的含义。但无法理解[1,2）和[1,3 ）。

你能解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:57:51.200

我的研究也需要这些信息。

经过一番挖掘，我发现得到的是，按顺序：

*   提及的句子
*   提及的中心词在句子中的位置（即 He 和 Santosh）
*   遵循集合的数学符号的区间`[#first_word_for_mention, #end)`，即`[`必须包括表示左侧边界的括号，以及`)`表示排除右侧边界的括号。换句话说，第一个数字是提及的起始词，第二个数字是属于提及的最后一个词之后的词（无论它是否存在）。

来源[http://nlp.stanford.edu/software/corenlp_output2.html](http://nlp.stanford.edu/software/corenlp_output2.html)

# r - 在 Windows XP 上从 R 访问 PostGIS

> ID：15271043
> 
> 赞同：3
> 
> 时间：2013-03-07T12:16:58.343
> 
> 标签：r, windows-xp, postgis

有没有什么简单的方法可以在 Windows XP 上访问 R 中的 PostGis 数据？

我想我可以尝试`rgdal`，但没有简单的方法来添加 PG 驱动程序（请参阅`file.show(system.file("README.windows", package="rgdal"))`。因此，这段简单的代码不起作用：

```
library(rgdal)
mylayer <-readOGR(dsn="PG:host=localhost user=MyUser dbname=MyDb password=Secret port=5432", layer = "MyLayer", verbose = TRUE) 
```

然后我找到了名为[manageR的](http://www.ftools.ca/manageR/)[qGIS](http://www.qgis.org/en/site/)插件。不幸的是，对 rpy2 插件的依赖关系不再可用。

我使用 shapefile 没有问题，但我的目的是将 postgis 数据与当前数据仓库集成，然后使用 R 进行分析。

是否有任何已知的简单方法如何使用 PostGIS 和 R，或者我必须更改操作系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:11:48.847

这个问题之前已经在 r-sig-geo 邮件列表中处理过。

在 rseek.org 上搜索“postgis rgdal windows”可以找到以前的讨论。

简而言之 - 不是积极的，因为 windows rgdal 是使用最少的驱动程序编译的 - 因为为许多其他人编译 - 所有这些都有不同的版本 - 只会将问题转换为错误版本或缺少 postgis （在这个案子）。

通过 FWtools 可能是一种选择。

# java - Selenium 在浏览到外部 URL 时尝试连接到 localhost

> ID：15271046
> 
> 赞同：0
> 
> 时间：2013-03-07T12:17:06.173
> 
> 标签：java, selenium

我正在使用 Selenium v​​2.30.0 和 Firefox 19.0。当我执行以下代码时：

```
public class First_Example {

    public static void main(String[] args) {
        // Create a new instance of the Firefox driver
        // Notice that the remainder of the code relies on the interface, 
        // not the implementation.
        WebDriver driver = new FirefoxDriver();

        // And now use this to visit Google
        driver.get("http://www.google.com");

        // Alternatively the same thing can be done like this
        // driver.navigate().to("http://www.google.com");

        // Find the text input element by its name
        WebElement element = driver.findElement(By.name("q"));

        // Enter something to search for
        element.sendKeys("Cheese!");

        // Now submit the form. WebDriver will find the form for us from the element
        element.submit();

        // Check the title of the page
        System.out.println("Page title is: " + driver.getTitle());

        // Google's search is rendered dynamically with JavaScript.
        // Wait for the page to load, timeout after 10 seconds
        (new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                return d.getTitle().toLowerCase().startsWith("cheese!");
            }
        });

        // Should see: "cheese! - Google Search"
        System.out.println("Page title is: " + driver.getTitle());

        //Close the browser
        driver.quit();
    }
} 
```

我收到一条错误消息：

> “在 45000 毫秒后无法连接到端口 7055 上的主机 localhost”

我到处寻找没有成功的答案。所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:22:33.560

等待响应时似乎有些问题

试试这个代码：

```
public static void main(String[] args) 
{
    WebDriver driver = new FirefoxDriver();
    driver.get("http://www.google.com/");
    WebElement query = driver.findElement(By.name("q"));
    query.sendKeys("Cheers!");

    // Sleep until the div we want is visible or 5 seconds is over
    long end = System.currentTimeMillis() + 5000;
    while (System.currentTimeMillis() < end) {
        WebElement resultsDiv = driver.findElement(By.className("gssb_e"));

        // If results have been returned, the results are displayed in a drop down.
        if (resultsDiv.isDisplayed()) {
          break;
        }
    }

    // And now list the suggestions
    List<WebElement> allSuggestions = driver.findElements(By.xpath("//td[@class='gssb_a gbqfsf']"));

    for (WebElement suggestion : allSuggestions) {
        System.out.println(suggestion.getText());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:57:56.873

您需要将 Selenium 更新到 v2.31。更低版本不支持 Firefox 19。

[https://code.google.com/p/selenium/downloads/list](https://code.google.com/p/selenium/downloads/list)

# timestamp - 将时间戳添加到 mp4 容器

> ID：15271048
> 
> 赞同：1
> 
> 时间：2013-03-07T12:17:21.123
> 
> 标签：timestamp, h.264, mp4

假设我收到 H264 视频包，每个包都有时间戳。有没有办法将这些时间戳存储在 mp4 容器中？还是其他容器类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:29:16.413

在`MP4`容器中，对于每个样本计数，都有一个相应的时间戳存储为`stts`盒子的一部分。对于给定的样本，您需要`stco`块偏移、`stsc`样本到块、样本`stsz`大小、`stss`关键帧指示和`stts`解码。

# hadoop - 是否可以在不复制数据的情况下将数据导入 Hive 表

> ID：15271061
> 
> 赞同：11
> 
> 时间：2013-03-07T12:18:00.453
> 
> 标签：hadoop, hive, hdfs

我将日志文件作为文本存储在 HDFS 中。当我将日志文件加载到 Hive 表中时，所有文件都被复制。

我可以避免将所有文本数据存储两次吗？

编辑：我通过以下命令加载它

```
LOAD DATA INPATH '/user/logs/mylogfile' INTO TABLE `sandbox.test` PARTITION (day='20130221') 
```

然后，我可以在以下位置找到完全相同的文件：

```
/user/hive/warehouse/sandbox.db/test/day=20130220 
```

我以为是抄的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T22:48:59.143

使用外部表：

```
CREATE EXTERNAL TABLE sandbox.test(id BIGINT, name STRING) ROW FORMAT
              DELIMITED FIELDS TERMINATED BY ','
              LINES TERMINATED BY '\n' 
              STORED AS TEXTFILE
              LOCATION '/user/logs/'; 
```

如果您想对外部表使用分区，您将负责管理分区目录。指定的位置必须是 hdfs 目录..

如果您删除外部表配置单元将不会删除源数据。如果*要*管理原始文件，请使用外部表。如果你想让 hive 这样做，让 hive 存储在它的仓库路径内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T13:34:10.090

我可以说，不是通过您的 java 应用程序将数据直接复制到 HDFS，而是将这些文件放在本地文件系统中，然后使用以下命令通过 hive 将它们导入 HDFS。

```
LOAD DATA LOCAL INPATH '/your/local/filesystem/file.csv' INTO TABLE `sandbox.test` PARTITION (day='20130221') 
```

注意`LOCAL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T11:16:54.507

您可以使用alter table partition 语句来避免数据重复。

```
create External table if not exists TestTable (testcol string) PARTITIONED BY (year INT,month INT,day INT) row format delimited fields terminated by ',';

ALTER table TestTable partition (year='2014',month='2',day='17') location 'hdfs://localhost:8020/data/2014/2/17/'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T12:43:08.927

Hive（至少在真正的集群模式下运行时）不能引用本地文件系统中的外部文件。Hive 可以在创建表或加载操作期间自动导入文件。这背后的原因可能是 Hive 在内部运行 MapReduce 作业以提取数据。MapReduce 从 HDFS 读取以及写回 HDFS，甚至在分布式模式下运行。因此，如果文件存储在本地文件系统中，分布式基础设施将无法使用它。

# c# - 删除查询不起作用

> ID：15271064
> 
> 赞同：0
> 
> 时间：2013-03-07T12:18:18.753
> 
> 标签：c#, .net, linq

我正在使用 linq 从数据库中删除数据。我google了一下，查询了一下。我正在使用以下查询。

当我将调试器放在上面时，它没有显示任何错误。它进展顺利。但是当我检查我的数据库时，记录不会被删除。

同时做insert操作：

```
 splitTradeDataContext db = new splitTradeDataContext();
                    tradeFile tlbTradeFile = new tradeFile();

 tlbTradeFile.TradeNo = TradeNo + "_A";
               tlbTradeFile.Status = Status;
               tlbTradeFile.Scrip_Code = Scrip_Code;
               tlbTradeFile.Inst_Type = Inst_Type;
               tlbTradeFile.Expirydate = Expirydate;
               tlbTradeFile.Strike_price = Strike_price;
               tlbTradeFile.Option_type = Option_type;
               tlbTradeFile.Sec_Name = Sec_Name;
               tlbTradeFile.BookType = BookType;
               tlbTradeFile.BookTypeName = BookTypeName;
               tlbTradeFile.TerminalId = TerminalId;
               tlbTradeFile.Branch_Id = Branch_Id;
               tlbTradeFile.Buy_Sell = Buy_Sell;
               tlbTradeFile.Trade_Qty = Trade_Qty;
               tlbTradeFile.Market_Rate = Market_Rate;
               tlbTradeFile.Pro_cli = Pro_cli;
               tlbTradeFile.Party_Code = Party_Code + "_A";
               tlbTradeFile.ParticipantCode = ParticipantCode;
               tlbTradeFile.O_C_Flag = O_C_Flag;
               tlbTradeFile.Sauda_Date = Sauda_Date;
               tlbTradeFile.TradeModified = TradeModified;
               tlbTradeFile.OrderNo = OrderNo;
               tlbTradeFile.Opp_Broker_Id = Opp_Broker_Id;
               tlbTradeFile.OrderTime = OrderTime;
               tlbTradeFile.UnknowkNum = UnknowkNum;

 var remove = from aremove in db.tradeFiles
              where aremove.ID==int.Parse(gvTradeFile.SelectedRows[0].Cells[0].Value.ToString())
              select aremove;
 if(remove!=null)
    db.tradeFiles.DeleteAllOnSubmit(remove); 
```

有什么问题？我使用了错误的查询吗？或者我还剩下什么东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:19:20.597

您没有`SubmitChanges`在代码中的任何地方调用您需要做的事情：

```
db.SubmitChanges(); //if its LINQ to SQL 
```

# ruby-on-rails - 如何从rails 1.2.5中的字符串中删除html标记

> ID：15271069
> 
> 赞同：0
> 
> 时间：2013-03-07T12:18:24.417
> 
> 标签：ruby-on-rails

我需要在 rails 1.2.5 应用程序中清理一个字符串并从中删除每个 html 标记。

我想我需要类似 html_safe 的东西，但我不知道那个 rails 版本中是否有类似的东西。

任何的想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:42:27.470

使用 strip_tags 从字符串中删除 html 标签

```
>> strip_tags('<p>hello</p>') # 'hello' 
```

# jquery - Ajax 调用在 onbeforeunload 事件中不起作用

> ID：15271070
> 
> 赞同：0
> 
> 时间：2013-03-07T12:18:26.443
> 
> 标签：jquery, ajax, onbeforeunload

我有一个功能，我需要在使用浏览器的“X”按钮关闭浏览器之前进行 ajax 调用以更新数据库值。我在关联文件的标题中使用了以下代码：

```
$(document).ready(function() {
     window.onbeforeunload = function(){
        $.ajax('<?php echo base_url();?>index.php/ajax/myfunction?a=4');
     }
}); 
```

关闭浏览器时，该功能有效，但未执行 ajax 调用..

解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T04:26:08.593

根据我的经验，也许不是最漂亮的代码，但在超时线程中产生 ajax 调用可以很好地跨浏览器

```
$(window).bind("beforeunload", function (e) {
    setTimeout(function(){
        $.ajax({
            type: 'GET',
            async: false,
            url: "[YOUR API CALL]"
        });
    }, 0);
}); 
```

请注意，我上次使用它是在使用 Jquery 1.7 的项目中

# java - 找到树的最大深度

> ID：15271072
> 
> 赞同：4
> 
> 时间：2013-03-07T12:18:32.590
> 
> 标签：java, tree

我知道如何找到二叉树的深度。但我不能将它概括为适用于任何树。

有人可以概述一个用于查找树深度的伪代码（不一定是二叉树）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T12:22:37.280

```
int findDepthOfTree(tree):
    int deepest = 0;
    for (child of root node)
       deepest = max(deepest, findDepthOfTree(child))
    return deepest + 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-14T18:26:27.370

查找k-ary树深度的Java实现：

```
static int findDepth(Node root) {
    int deepest = 0;
    if (root.children != null) {
        for (Node child : root.children) {
            deepest = Math.max(deepest, findDepth(child));
        }
    }
    return deepest+1;
} 
```

这假设实现以下 Node 类以具有数据元素以及对表示其子节点的节点列表的引用。会是这样的：

```
class Node {
    int data;
    List<Node> children;

    public Node (int data, List<Node> children) {
        this.data = data;
        this.children = children;
    }
    public Node (int data) {
        this.data = data;
        this.children = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-31T20:02:35.510

```
 public static int GetMaxDepth(MyTree node)
    {
        List<int> result = new List<int>();
        foreach (var childNode in node.Items)
        {
            result.Add(GetMaxDepth(childNode));
        }
        return (result.Any() ? result.Max(n => n) : 0) + 1;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-08T11:54:51.117

递归 StreamAPI 解决方案：`O(n)`

```
 int calculateMaxDepth(Node node) {
        if (node == null)
            return 0;

        var localDepth = node.children
           .stream()
           .map(NodeService::calculateMaxDepth)
           .max(Comparator.naturalOrder())
           .orElse(0); // if root has no children -> return 0
        return ++localDepth;
    } 
```

迭代队列解决方案：`O(n)`

```
 int calculateMaxDepth(Node rootNode) {
        if (rootNode == null) return 0;

        int height = 0;

        // level representing queue
        Queue<Node> nodesQueue = new LinkedList<>();
        nodesQueue.add(rootNode);

        while (true) {
            // amount of nodes on level
            int nodesCount = nodesQueue.size();
            if (nodesCount == 0) return height;

            ++height;

            // deque all nodes of current level and
            // enqueue all nodes of next level
            while (nodesCount > 0) {
                var currentLevelNode = nodesQueue.remove();
                var validChildrenNodes = currentLevelNode.children
                    .parallelStream()
                    .filter(Objects::nonNull)
                    .collect(Collectors.toList());
                nodesQueue.addAll(validChildrenNodes);
                --nodesCount;
            }
        }
    } 
```

有关其他信息，您可以访问：

1.  [https://www.geeksforgeeks.org/write-ac-program-to-find-the-maximum-depth-or-height-of-a-tree/](https://www.geeksforgeeks.org/write-a-c-program-to-find-the-maximum-depth-or-height-of-a-tree/)
2.  [https://www.geeksforgeeks.org/iterative-method-to-find-height-of-binary-tree/](https://www.geeksforgeeks.org/iterative-method-to-find-height-of-binary-tree/)

# c# - Datetime.Parse() 可交换格式？

> ID：15271075
> 
> 赞同：2
> 
> 时间：2013-03-07T12:18:39.017
> 
> 标签：c#, .net, datetime

看格式： `"MMM d yyyy"`

这是有效的

```
var t="Mar 2013 7";
DateTime dt=DateTime.Parse(t); 
```

但

```
also this :"Mar 7 2013"
and  this :"7  Mar 2013" 
```

正在工作中

看着 ：

```
new DateTimeFormatInfo()
               .GetAllDateTimePatterns()
               .Select((i,n)=>n+"    "+i)
               .ToList()
               .ForEach(f=>Console.WriteLine(f)); 
```

> 这是可以格式化日期和时间值的所有标准模式。

结果是：

```
0    MM/dd/yyyy
1    yyyy-MM-dd
2    dddd, dd MMMM yyyy
3    dddd, dd MMMM yyyy HH:mm
4    dddd, dd MMMM yyyy hh:mm tt
5    dddd, dd MMMM yyyy H:mm
6    dddd, dd MMMM yyyy h:mm tt
7    dddd, dd MMMM yyyy HH:mm:ss
8    MM/dd/yyyy HH:mm
9    MM/dd/yyyy hh:mm tt
10    MM/dd/yyyy H:mm
11    MM/dd/yyyy h:mm tt
12    yyyy-MM-dd HH:mm
13    yyyy-MM-dd hh:mm tt
14    yyyy-MM-dd H:mm
15    yyyy-MM-dd h:mm tt
16    MM/dd/yyyy HH:mm:ss
17    yyyy-MM-dd HH:mm:ss
18    MMMM dd
19    MMMM dd
20    yyyy'-'MM'-'dd'T'HH':'mm':'ss.fffffffK
21    yyyy'-'MM'-'dd'T'HH':'mm':'ss.fffffffK
22    ddd, dd MMM yyyy HH':'mm':'ss 'GMT'
23    ddd, dd MMM yyyy HH':'mm':'ss 'GMT'
24    yyyy'-'MM'-'dd'T'HH':'mm':'ss
25    HH:mm
26    hh:mm tt
27    H:mm
28    h:mm tt
29    HH:mm:ss
30    yyyy'-'MM'-'dd HH':'mm':'ss'Z'
31    dddd, dd MMMM yyyy HH:mm:ss
32    yyyy MMMM
33    yyyy MMMM 
```

**问题 ：**

*   我在列表中没有看到`MMM d yyyy`格式。那么它是如何做到的呢？它会尝试所有组合吗？

*   添加时间来格式化`MMM d yyyy`怎么样？`[Mar 3 2007 13:13:13]`它也有效，但没有特定的格式。那么它是如何做到的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:42:59.637

我用反射器来看看这个。几百行解析代码真的很复杂！

然而，最终它结束了对输入字符串进行标记并尝试将标记分类为日期名称、月份名称、年份、日期编号等。

特别是一个被调用的函数`internal TokenHashValue[] CreateTokenHashTable()`有这样的事情：

```
for (int i = 1; i <= 12; i++)
{
    this.InsertHash(dtfiTokenHash, this.GetAbbreviatedMonthName(i), TokenType.MonthToken, i);
} 
```

它使用它（如您所见具有所有缩写的月份名称）来确定标记是否是月份名称。日期名称有类似的代码。

解析代码还检查其中一个数字的长度是否大于 2 位。如果是，它假定它是一年。这意味着（并且您可以验证它）您可以有一个 3 位数的年份，并且它仍然可以解析它。但它变得更加复杂！它还检查数字是否大于 12，如果是，则假定它是一年。

如果你输入两个小于或等于 12 的数字，它*仍然*有效，但它假设第一个是一天，第二个是一个月（对于英国文化 - 我敢打赌它对于其他文化是不同的）。

这当然允许它在没有警告的情况下解析模棱两可的日期。

结果是：**永远不要解析这样的日期**

总是`ParseExact()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:24:34.860

我猜它使用的是格式说明符而不是它们的排列。

从文字“2013 年 3 月 7 日”的书写方式来看，我怀疑它们的解析可能有任何歧义。

*   Mar 完全匹配 MMM
*   2003 完全匹配 yyyy
*   7 完全匹配 d

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:38:11.047

我在这里找到了 DateTime.Parse 源代码的链接：http: [//typedescriptor.net/name/members/5B57671F27DBC0AEA0EB9825243834CF-System.DateTime.Parse(String,IFormatProvider,DateTimeStyles)](http://typedescriptor.net/name/members/5B57671F27DBC0AEA0EB9825243834CF-System.DateTime.Parse(String,IFormatProvider,DateTimeStyles))

您可以单击链接以深入了解私有方法，但这会变得复杂。但它看起来就像编译器一样进行词法分析和解析。该字符串被分解为多个部分（令牌），并尝试识别每个部分是一年、一个月还是什么。

当然可能会有一些歧义，例如，也许您的意思是 dd-MM-yyyy 但它被解析为 MM-dd-yyyy。但这就是您可以指定特定于文化的 IFormatProvider 的原因。

# java - 在android中将书面文本发送到屏幕

> ID：15271080
> 
> 赞同：0
> 
> 时间：2013-03-07T12:18:48.847
> 
> 标签：java, android

我只是 android 的初学者，我创建了一个文本框，用户输入一些文本并按下发送按钮，我希望将此文本发送到屏幕，如短信或 whatsapp。我创建了一个文本框和一个按钮，然后将名为 sendAnswer 的 onClick 方法添加到按钮，如下所示：

```
 public void sendAnswer()
    {
        EditText editText = (EditText)findViewById(R.id.answer);
        String editTextStr = editText.getText().toString();

        Log.d(editTextStr, editTextStr);
     } 
```

其中“answer”是 editText 框的 id。但这不起作用。我怎样才能做到这一点？

另外，我将尝试在下一步中执行以下操作：当用户输入文本并发送时，手机会自动将消息输出到屏幕，就像与手机聊天一样。无论用户发送什么，都将在屏幕右侧看到，而无论电话说什么，都将在屏幕左侧看到。你能给我一些想法如何做这些吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:34:24.160

如果您已经安装了 android 示例。请看如何使用`ListView`以及如何动态添加项目。

你需要一个`ListView`你想做的事。

看一下

```
android-sdks/samples/android-8/BluetoothChat 
```

它可能会帮助你。

检查此示例 [动态管理项目](http://www.survivingwithandroid.com/2012/10/android-listviewarrayadapter-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:26:41.317

这就像一种单向交通。您仅从 EditText 获取文本以在 Screen 上显示文本，您需要具备两件事：-

1.  有一个视图，即 TextView、EditText 或屏幕中的任何内容以显示 EditText 以外的文本（答案）
2.  使用 setText() 将该视图设置`editTextStr`为该视图。

所以你的功能应该是这样的，

```
 public void sendAnswer()
    {
        EditText editText = (EditText)findViewById(R.id.answer);
        String editTextStr = null;

        if(editText!=null){  //Its good to check the return value of findViewById
           editTextStr = editText.getText().toString();
        }else{
             editTextStr = "Answer EditText doesnot exists";
        }
        TextView textView = (TextView)findViewById(R.id.output); //replace output with the ID of your new output view

        if(textView!=null){
         textView.setText(editTextStr);
        }
        Log.d(editTextStr, editTextStr);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:36:11.270

```
 String editTextStr;

public void sendAnswer()
    {
        EditText editText = (EditText)findViewById(R.id.answer);
        editTextStr = editText.getText().toString();

        Log.d(editTextStr, editTextStr);
calltextview();
     }

public void calltextview()
{

  TextView textView = (TextView)findViewById(R.id.chat);
  textView.setText(editTextStr);
} 
```

像您想要的设计一样更改布局。试试吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:40:17.183

当您要将字符串发送到下一个屏幕时，请使用 Intents

并以我对您的问题的理解观点。

您可以使用 PutExtra(...)

你也必须检查这个，

[点击这里](http://developer.android.com/training/basics/firstapp/building-ui.html)

在下一步中，您可以更改第二个活动中字符串的位置以符合您的要求。

这肯定会帮助你...

# angularjs - 在angularjs中同步范围

> ID：15271083
> 
> 赞同：0
> 
> 时间：2013-03-07T12:18:52.527
> 
> 标签：angularjs

我们正在构建一个大型的 Angular 应用程序。我们已经大量使用指令、服务，并且拥有多达 14 个控制器。

我们的问题是在控制器之间共享数据。我们希望能够在相距较远的控制器（不是兄弟）之间共享数据，并且不会破坏双向绑定。

我建议使用专门用于传输数据的服务。

```
var MyApp = angular.module('MyApp', []);

MyApp.factory('dataContainer', function(){ return {} });
function FirstCtrl($scope, dataContainer) {
    $scope.data = dataContainer;

}

function SecondCtrl($scope, dataContainer) {
    $scope.data = dataContainer;
} 
```

您可以在小提琴[http://jsfiddle.net/didier_/R2Bgs/2/](http://jsfiddle.net/didier_/R2Bgs/2/)中尝试一下。

这是好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:47:54.917

为此使用服务绝对是一个好主意。您不必考虑诸如服务之类的对象，这只是 Angular 项目中的默认命名。一旦您的应用程序增长，您可能最终会得到不同类型对象的工厂（如您的示例中的状态对象、资源对象、帮助对象等），并且“服务”这个名称变得有点含糊不清。

不过，我会对像这样传递原始状态对象持谨慎态度。您可能应该在方法/getter 和 setter 中包装对它的访问，以避免让应用程序的不同部分在不应该覆盖彼此的状态时覆盖彼此的状态，这可能有点难以调试。

# jquery - 屏蔽 JPEG 图像的白色区域

> ID：15271088
> 
> 赞同：1
> 
> 时间：2013-03-07T12:19:08.643
> 
> 标签：jquery, html5-canvas, alpha-transparency, image-masking

我想屏蔽 JPEG 图像中的全部白色 (R:255,G:255,B:255) 区域，所以当在浏览器中查看时，在全部白色区域中我会看到下面的内容（这些区域将是透明的） . 我不介意使用 JQuery、CSS 3 或 Canvas 来实现这一点。谢谢

好的，代码：

```
<body style="background-color:red;">
  <canvas id="myCanvas" width="228" height="454"></canvas>
    <script>
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        var x = 0;
        var y = 0;
        var width = 228;
        var height = 454;
        var imageObj = new Image();

        imageObj.onload = function () 
        {
            context.drawImage(imageObj, x, y, width, height);

            var canvas = document.getElementById('myCanvas');
            var ctx = canvas.getContext('2d');

            var imgData = ctx.getImageData(0, 0, width, height);
            var pixels = imgData.data; // get pixel data

            for (var i = 0; i < pixels.length; i +=4)
            {
                var r = pixels[i ];
                var g = pixels[i + 1]
                var b = pixels[i  + 2];

                if (r === 255 && g === 255 && b === 255) {
                    pixels[i + 3] = 1;
                }   
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.putImageData(imgData, 0, 0);
        };
        imageObj.src = 'img/test_image.jpg';
    </script>
  </body> 
```

这段代码似乎可以完成这项工作，但我在全白区域得到了一些分散的白点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:59:21.323

**您的代码看起来相当正确，但我建议进行以下更改：**

您将画布大小设置为 228x454，但如果您的图像大小*略有*不同，您可能会在将源图像绘制到画布时*意外缩放它。*因此，将画布缩放到与图像大小完全相同的大小：

```
imageObj.onload=function(){
canvas.width=imageObj.width;   // be sure canvas is *exactly* image sized to prevent 
canvas.height=imageObj.height; // accidental scaling which might skew pixel colors 
```

当您应该将它们设置为 0 以获得完全透明时，您将“透明”像素设置为 1：

```
pixels[i+3]=0;      // 0 instead of 1 for pure transparency 
```

您只是在掩盖纯白色--rgb(255,255,255)。图像中的某些像素可能“接近”白色，因此您也可以尝试屏蔽一些接近白色的像素。

```
var nearWhite=250;  // try experimenting with different “near white” values
if(r>nearWhite && g>nearWhite && b>nearWhite) 
```

**[编辑：提供完整代码]**

这是代码（适用于我的计算机）。

确保您的图像源在您的本地域中，否则您将遇到**安全违规**并且图像将被绘制，但白色像素不会变得透明。所以没有[http://otherDomain.com/picture.jpg](http://otherDomain.com/picture.jpg)！

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){
    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var imageObj = new Image();
    imageObj.onload = function () {

        canvas.width=imageObj.width;
        canvas.height=imageObj.height;
        ctx.drawImage(imageObj, 0,0);

        var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        var pixels = imgData.data; // get pixel data
        for (var i = 0; i < pixels.length; i +=4)
        {
            var r = pixels[i ];
            var g = pixels[i + 1]
            var b = pixels[i  + 2];

            if (r>250 && g>250 && b>250) {
                pixels[i + 3] = 0;
                count++;
            }   
        }
        ctx.putImageData(imgData, 0, 0);
    }
    imageObj.src="car.jpg";

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:24:06.507

也许创建一个画布并用图像中对应的像素值填充像素值。如果一个像素是白色`rgb(255,255,255)`的，则将 alpha 设置为 1。不确定这是否可能，只是一个想法。

[像素操作教程](http://beej.us/blog/data/html5s-canvas-2-pixel/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-09T07:27:52.887

有一种解决方案可以将 alpha 通道添加到现有的 JPEG 图像并在浏览器中呈现：[https](https://jim.studt.net/jpeg-alpha/) ://jim.studt.net/jpeg-alpha/ 。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-07T12:21:50.900

据了解，JPEG 没有透明度选项。你需要使用PNG或者你必须从下面填充虚拟透明内容

# ruby - 用于条件表达式的 Ruby 正则表达式

> ID：15271089
> 
> 赞同：1
> 
> 时间：2013-03-07T12:19:17.087
> 
> 标签：ruby, regex, conditional-statements

我需要为表达式行编写一个正则表达式，例如：

```
constraint :name, 'name != nil'
constraint :name, 'name =~/^[A-Z]/'
constraint :age, 'age >= 0' 
```

一行总是包含单词“constraint :”，任何单词都可以出现在“:”之后，然后是“，”。

然后，条件表达式将出现在“”中。

我写了一个这样的正则表达式：

```
/^constraint :(\w*),'(.*)'$/ 
```

而且不匹配。我是 Ruby 和正则表达式的新手。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:20:51.683

您忘记了逗号后的空格。尝试`/^constraint :(\w*), '(.*)'$/`

虽然更笼统，但我会这样做：`/^constraint :([^,]+),\s*'(.*)'$/`.

# ms-access - 将工作日添加到开始日期以创建结束日期（包括银行假日）

> ID：15271090
> 
> 赞同：1
> 
> 时间：2013-03-07T12:19:20.267
> 
> 标签：ms-access, vba

我已经修改了这个访问功能，所以我可以根据工作日的数量计算出结束日期。

但是，我还需要考虑**英国的银行假期**。

有人知道我该怎么做吗？

```
Public Function CountDays(startDate As Date, NoOfDays As Integer) As Date
' Function to count no of working days
Dim tmpNo As Integer
Dim tmpDate As Date
Dim tmpStartDate As Date
Dim i As Integer

tmpNo = NoOfDays

tmpStartDate = startDate

tmpDate = startDate

i = 0

Do Until i = NoOfDays

If Weekday(tmpDate) = 1 Or Weekday(tmpDate) = 7 Then
tmpNo = tmpNo + 1
Else
i = i + 1
End If
tmpDate = tmpDate + 1
Loop

CountDays = DateAdd("d", tmpNo, tmpStartDate)
End Function 
```

干杯

罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:38:46.487

无需每天循环。稍微计算一下就可以得到工作日的数量，然后在表格中查找该时间范围内的假期数量。所以：

```
TotalDays = DateDiff("d", startDate, endDate) + 1

TotalWeekends = (DateDiff("ww", startDate, endDate) * 2) + _ 
((DatePart("w", startDate) = vbSunday) *-1) + _ 
((DatePart("w", endDate) = vbSaturday) *-1)

TotalHolidays = DCount("*","tblHolidays","Holiday Between #" & startdate & "# And #" & enddate & "#")

TotalWorkingDays = TotalDays - TotalWeekends - TotalHolidays 
```

顺便说一句，如果您在日期前后使用 #，Access 会假定它是美国格式。您可以改用引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:54:58.253

由于英国的银行假日每年都不同，因此您需要创建一个表来存储这些日期，然后在代码中检查此表并增加 tmpNo 值（如果日期存在）。

通过添加额外的“Else If”子句来更改代码，如下所示：

```
Do Until i = NoOfDays
    If Weekday(tmpDate) = 1 Or Weekday(tmpDate) = 7 Then
        tmpNo = tmpNo + 1
    Else If DCount("*","tblExceptionDates","dtmDate = #" & tmpDate & "#") > 0 Then
        tmpNo = tmpNo + 1
    Else
        i = i + 1
    End If
    tmpDate = tmpDate + 1
Loop 
```

# javascript - javascript 添加月份日期

> ID：15271094
> 
> 赞同：0
> 
> 时间：2013-03-07T12:19:22.623
> 
> 标签：javascript

我想将 1 个月或 6 个月添加到给定的日期。但是，如果我添加一个月，则年份不会增加。如果我将 6 个月添加到 6 月，我会返回 00 月份，但年份会增加。你能帮帮我吗？

```
function addToBis(monthToAdd){
        var tmp = $("#terminbis").val().split('.');

        var day = tmp[0];
        var month = tmp[1];
        var year = tmp[2];

        var terminDate = new Date(parseInt(year),parseInt(month), parseInt(day));
        terminDate.setMonth(terminDate.getMonth()+monthToAdd);

        day = "";
        month = "";
        year = "";

        if(terminDate.getDate() < 10){
            day = "0"+terminDate.getDate();
        } else{
            day = terminDate.getDate();
        }

        if(terminDate.getMonth() < 10){
            month = "0"+terminDate.getMonth();
        } else{
            month = terminDate.getMonth();
        }

        year = terminDate.getFullYear();

        $("#terminbis").val(day+"."+month+"."+year);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:34:21.223

getMonth 返回一个从 0 到 11 的数字，这意味着 0 代表一月，1 代表二月 ...等

所以像这样修改

```
var terminDate = new Date(parseInt(year),parseInt(month - 1), parseInt(day));
    terminDate.setMonth(terminDate.getMonth()+monthToAdd); 
```

和

```
month = terminDate.getMonth() + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:23:45.473

您应该使用 javascript Date 对象的本机方法来更新它。例如，查看此问题已接受的答案，这是解决问题的正确方法。

[Javascript函数将X个月添加到日期](https://stackoverflow.com/questions/2706125/javascript-function-to-add-x-months-to-a-date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:12:17.013

该函数可以更简洁地编写为：

```
function addToBis(monthToAdd){

    function z(n) {return (n<10? '0':'') + n}

    var tmp = $("#terminbis").val().split('.');
    var d = new Date(tmp[2], --tmp[1], tmp[0]);

    d.setMonth(d.getMonth() + monthToAdd);

    $("#terminbis").val(z(d.getDate()) + '.' + z(d.getMonth() + 1)
                       + '.' + d.getFullYear();
} 
```

`terminbis`和的值`monthToAdd`应在使用前进行验证，从该值生成的日期也应验证。

# php - Zend Paginator+表格网关：错误

> ID：15271096
> 
> 赞同：1
> 
> 时间：2013-03-07T12:19:27.380
> 
> 标签：php, pagination, zend-framework2, zend-paginator, tablegateway

错误：分页器的元素是对象（不是数组）。`var_dump($records)`：

```
object(Records\Model\Records)#240 (11) { ["id"]=> NULL ["name"]=> string(9) "5453gdfgd" ["email"]=> string(16) "igor@bk.ru" ["homepage"]=> string(0) "" ["text"]=> string(5) "ghjkj" ["image"]=> string(5) "Array" ["file"]=> string(0) "" ["ip"]=> NULL ["browser"]=> NULL ["date"]=> string(19) "2013-03-05 23:24:49" ["inputFilter":protected]=> NULL }  
object(Records\Model\Records)#241 (11) { ["id"]=> NULL ["name"]=> string(9) "5453gdfgd" ["email"]=> string(16) "igor@bk.ru" ["homepage"]=> string(0) "" ["text"]=> string(5) "ghjkj" ["image"]=> string(5) "Array" ["file"]=> string(0) "" ["ip"]=> NULL ["browser"]=> NULL ["date"]=> string(19) "2013-03-05 23:23:37" ["inputFilter":protected]=> NULL } 
```

控制器：

```
 protected $recordsTable;
        public function indexAction()
        {
            $field = (string) $this->params()->fromRoute('field', 'date');
            $order = (string) $this->params()->fromRoute('order', 'desc');
            $array = $this->getRecordsTable()->fetchAll($field, $order);

            $paginator = new Paginator\Paginator(new Paginator\Adapter\Iterator($array));
            $paginator->setCurrentPageNumber($this->params()->fromRoute('page', 1));
            $paginator->setItemCountPerPage(2);
            //print_r($paginator);
            $vm = new ViewModel(array('records' => $paginator));
            return $vm;
        }

    public function getRecordsTable()
        {
            if (!$this->recordsTable) {
                $sm = $this->getServiceLocator();
                $this->recordsTable = $sm->get('Records\Model\RecordsTable');
            }
            return $this->recordsTable;
        } 
```

记录表：

```
 protected $tableGateway;

        public function __construct(TableGateway $tableGateway)
        {
            $this->tableGateway = $tableGateway;
        }

        public function fetchAll($field, $order)
        {
            $this->field = $field;
            $this->order = $order;
            $resultSet = $this->tableGateway->select(function (Select $select) {
            $select->columns(array('date', 'name', 'email', 'homepage', 'text', 'image', 'file'));
            $select->order($this->field.' '.$this->order);        
            });
            $resultSet->buffer();
            $resultSet->next();

            return $resultSet;
        } 
```

在视图中：

```
 foreach($records as $record) : ?>
     <?php var_dump($record); ?> <br />
 <?php endforeach; ?> 
```

我究竟做错了什么？我怎样才能做成`$records`一个数组？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:32:43.943

要么使用它的方法从结果集中返回一个数组`toArray`......

```
public function fetchAll($field, $order)
{
     // ...
     return $resultSet->toArray();
} 
```

或者在您看来，使用`toArray`foreach 中的方法

```
<?php foreach($records->toArray() as $record) : ?>
    <?php var_dump($record); ?> <br />
<?php endforeach; 
```

# wpf - 为什么是 XAML 命名空间 URI，它们的用途是什么？

> ID：15271097
> 
> 赞同：4
> 
> 时间：2013-03-07T12:19:29.330
> 
> 标签：wpf, xaml, xml-namespaces, wpf-4.0

我对 XML 命名空间持怀疑态度。我不知道为什么我们在所有 XAML 应用程序中都需要这些命名空间。

```
xmlns=http://schemas.microsoft.com/winfx/2006/xaml/presentation
xmlns:x=http://schemas.microsoft.com/winfx/2006/xaml 
```

我理解命名空间的概念，如 System.Text、System.LINQ 等。我们在类中使用它，因为我们有位于同一台计算机上的类库。

问题：

1.  它代表一些URI。所以 WPF 是独立的应用程序。如果应用程序的用户没有连接到互联网，它的意义是什么？首先我们为什么需要这个？

2.  第一行和第二行有什么区别？代表什么`xmlns:x`？

3.  此外，我在尝试访问该 URI 时看到此错误

    > 处理您的请求时发生错误

    这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:26:08.580

命名空间定义中提到的 URL 与实际的互联网连接或真实存在的 URL 无关；这只是使用的约定，因此可以正确区分名称空间。

XAML 命名空间就像 C++ 或 C#/VB.NET 中的命名空间一样，它用于对类和其他项进行逻辑分组。

在 WPF/XAML 中，您有一个命名空间`xmlns=http://...`，它是 WPF 默认为您提供的控件的命名空间。`xmlns:x`是一个命名空间，提供一些特殊的值，比如`x:Null`表示一个`null`-value。
您也可以定义自己的控件并`TextBox`为其命名，但您应该为这些控件创建自己的命名空间，以免干扰全局命名空间。

[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/ms747086.aspx)上有一篇关于这个主题的好文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:29:51.203

这是命名这些名称空间的方式。就这样。您不应该将它们视为 uri。至于 xmlns 与 xmlns:x - 第一个是默认命名空间，其中包含 wpf 控件，第二个是命名空间，其中包含一些附加声明（x:Type、x:Name 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T10:58:20.187

我认为接受的[答案](https://stackoverflow.com/a/15271211/3195477)中提供的信息并不完全正确。您看到的 url 不是命名空间，而是组合成一个命名空间的集合。以下是 .net 中的一些命名空间，这些命名空间由默认命名空间 (url) 映射

System.Windows、System.Windows.Automation、System.Windows.Controls、System.Windows.Controls.Primitives、System.Windows.Data、System.Windows.Documents

# eclipse - 如何从 POM 设置 eclipse 使用的 java.library.path？

> ID：15271100
> 
> 赞同：6
> 
> 时间：2013-03-07T12:19:34.400
> 
> 标签：eclipse, maven, pom.xml, java.library.path

我正在使用 Maven 来定义我的项目。我的依赖项之一在运行时需要本机 DLL，因此在测试和调试中需要它。本机 DLL 在已知位置可用。我想要一个解决方案，我可以签入一次，并且无需每个开发人员手动设置即可为所有开发人员工作。

我知道我可以在“运行配置”中手动设置 java.libary.path，这将允许它找到本机 DLL，但这需要每个开发人员手动设置。

我知道我也可以为给定的项目依赖项设置 java.library.path，但这对于特定的开发人员来说也是本地的。

最后我知道我可以设置surefire插件来指定java.library.path，但这仅对通过maven触发的测试有用 - 所以它对我们的构建服务器非常有用，但不能帮助开发人员在eclipse中使用JUnit runner，或者想直接从 Eclipse 调试或运行代码。

有出路吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:59:21.863

我发现与[maven-nativedependencies-plugin](http://code.google.com/p/mavennatives/)一起使用的 eclipse m2e 连接器似乎可以解决这个问题。

根据 mavennatives 文档：

> 由于 maven-nativedependencies-plugin 的 0.0.7 版，如果您安装了 m2eclipse 并且配置了本地解包的 nativedependencies 插件将自动运行，您不需要 eclipse 插件来解包它们。但是，为了在 eclipse 中设置 java.library.path 环境变量，您必须手动或使用 eclipse 插件自动进行设置。
> 
> 这个 Eclipse 插件是 m2eclipse 的一个扩展，它会检测你是否配置了 maven 插件，如果你这样做了，它会执行本地人的解包，并配置本地库位置。
> 
> 如果您导入一个配置了 mavennatives 插件的 maven 项目，并且您有 m2eclipse 集成插件，则在导入时将提取本地人，同样在从 eclipse 执行清理时，将提取本地人。
> 
> 因此，如果您同时使用这两种工具，则使用原生依赖项不需要手动配置，除了 pom 中的内容，只需运行您的应用程序即可。

如果我安装了连接器，并将 mavennatives 添加到我的 POM，然后重新加载 pom（右键单击包资源管理器中的项目> maven > 更新项目），项目的“本机库位置”将自动填充（查看此，右键单击项目>属性> java构建路径>库>本机库位置）

![在此处输入图像描述](../Images/74bda700c323daebe72c96919ebd4f70.png)

这似乎适用于调试、JUnit 运行器等。

它确实要求每个开发人员都安装插件，这是手动的（就像安装 eclipse 一样手动）；但是，至少一旦安装一次，它将适用于通过 POM 为 mavennatives 配置的任何/所有本机依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:41:57.073

[Properties Maven 插件](http://www.mojohaus.org/properties-maven-plugin/)可以帮助您通过使用[properties:set-system-properties](http://www.mojohaus.org/properties-maven-plugin/set-system-properties-mojo.html)来设置系统属性来传递系统属性。

该示例应如下所示： -

```
<properties>
    <java.library.path>some/path</java.library.path>
</properties> 
```

我希望这可能会有所帮助。

# android - NDK xlocale.h 异常

> ID：15271102
> 
> 赞同：-1
> 
> 时间：2013-03-07T12:19:53.747
> 
> 标签：android, android-ndk, live555

尝试加载 live555 库但在执行 ndk-build 时出现以下错误

```
Compile++ thumb  : live555 <= Locale.cpp
In file included from jni/live555/Locale.cpp:22:0:
/Volumes/Projects/Ayaz_Projects/streamer/./jni/live555/include/Locale.hh:47:123: fatal error: xlocale.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs/live555/Locale.o] Error 1 
```

xlocale.h 不在 live555 代码中

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:23:37.143

包含文件有以下内容：

```
#ifndef LOCALE_NOT_USED
#include <locale.h>
#ifndef XLOCALE_NOT_USED
#include <xlocale.h> // because, on some systems, <locale.h> doesn't include <xlocale.h>; this makes sure that we get both
#endif
#endif 
```

所以你应该能够添加`-DXLOCALE_NOT_USED`到你的`Android.mk`以避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T07:44:10.023

我来到这里寻找`xlocale.h not found`（与android开发无关）。我的解决方案是[https://serverfault.com/a/791822/394721](https://serverfault.com/a/791822/394721)

# r - 如何修改此相关矩阵图？

> ID：15271103
> 
> 赞同：7
> 
> 时间：2013-03-07T12:19:54.133
> 
> 标签：r, plot, correlation

我有以下代码来显示相关矩阵，

```
panel.cor <- function(x, y, digits=2, prefix="", cex.cor)
{
    usr <- par("usr"); on.exit(par(usr))
    par(usr = c(0, 1, 0, 1))
    r <- abs(cor(x, y))
    txt <- format(c(r, 0.123456789), digits=digits)[1]
    txt <- paste(prefix, txt, sep="")
    if(missing(cex.cor)) cex <- 0.8/strwidth(txt)

    test <- cor.test(x,y)
    # borrowed from printCoefmat
    Signif <- symnum(test$p.value, corr = FALSE, na = FALSE,
                  cutpoints = c(0, 0.001, 0.01, 0.05, 0.1, 1),
                  symbols = c("***", "**", "*", ".", " "))

    text(0.5, 0.5, txt, cex = cex * r)
    text(.8, .8, Signif, cex=cex, col=2)
}
pairs(USJudgeRatings[,c(2:3,6,1,7)],
  lower.panel=panel.smooth, upper.panel=panel.cor) 
```

我想修改情节，如：

1.  有较小的蓝点作为

    ```
    pairs(USJudgeRatings[,c(2:3,6,1,7)],
          main="xxx",
          pch=18,
          col="blue",
          cex=0.8) 
    ```

2.  在对角线上包含条目的直方图（如在[此处输入链接描述](http://gettinggeneticsdone.blogspot.co.uk/2012/08/more-on-exploring-correlations-in-r.html)中所示）

3.  将相关性和 p 值显示为

    ```
    r=0.9;
    p=0.001; 
    ```

价值观不是明星。

配对数据的散点图显示了一条拟合线。拟合的方法是什么？哪一行被定义为如上所示的代码？以及如何改变拟合方法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-07T12:46:24.783

该功能的帮助页面为`pairs()`您提供了如何定义要绘制的面板的示例。

对于您的特定情况：

更改`panel.cor()`功能以显示文本行 - p 值和相关系数。

```
panel.cor <- function(x, y, digits=2, cex.cor)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(0, 1, 0, 1))
  r <- abs(cor(x, y))
  txt <- format(c(r, 0.123456789), digits=digits)[1]
  test <- cor.test(x,y)
  Signif <- ifelse(round(test$p.value,3)<0.001,"p<0.001",paste("p=",round(test$p.value,3)))  
  text(0.5, 0.25, paste("r=",txt))
  text(.5, .75, Signif)
} 
```

对于`panel.smooth()`定义的函数`cex=`和`col=`参数`pch=`。

```
panel.smooth<-function (x, y, col = "blue", bg = NA, pch = 18, 
                        cex = 0.8, col.smooth = "red", span = 2/3, iter = 3, ...) 
{
  points(x, y, pch = pch, col = col, bg = bg, cex = cex)
  ok <- is.finite(x) & is.finite(y)
  if (any(ok)) 
    lines(stats::lowess(x[ok], y[ok], f = span, iter = iter), 
          col = col.smooth, ...)
} 
```

要添加直方图，`panel.hist()`应定义函数（取自帮助文件`pairs()`）

```
panel.hist <- function(x, ...)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(usr[1:2], 0, 1.5) )
  h <- hist(x, plot = FALSE)
  breaks <- h$breaks; nB <- length(breaks)
  y <- h$counts; y <- y/max(y)
  rect(breaks[-nB], 0, breaks[-1], y, col="cyan", ...)
} 
```

最终情节：

```
pairs(USJudgeRatings[,c(2:3,6,1,7)],
          lower.panel=panel.smooth, upper.panel=panel.cor,diag.panel=panel.hist) 
```

![在此处输入图像描述](../Images/1823bbc8bc8fd734ed86ad5beba2e62c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-07T11:28:52.723

修改的散点图矩阵

1.  %% 直方图的修改函数；

    ```
    panel.hist <- function(x, ...)
    {
    usr <- par("usr"); on.exit(par(usr))
    par(usr = c(usr[1:2], 0, 1.5) )
    par(cex.axis=2, family="Times New Roman", face="bold", size=12, cex.lab=1, cex.main=1, cex.sub=1)
    h <- hist(x, plot = FALSE)
    breaks <- h$breaks; nB <- length(breaks)
    y <- h$counts; y <- y/max(y)
    rect(breaks[-nB], 0, breaks[-1], y, col="cyan", ...)

    } 
    ```

2.  %% 修正回归函数`panel.smooth`;

    ```
    panel.smooth<-function (x, y, col = "black", bg = NA, pch = 16, 
                    cex = 2, col.smooth = "red", span = 2/3, iter = 3, ...) 
    {
    points(x, y, pch = pch, col = col, bg = bg, cex = cex)
    ok <- is.finite(x) & is.finite(y)
    if (any(ok)) 
    lines(stats::lowess(x[ok], y[ok], f = span, iter = iter), 
          col = col.smooth, ...)
    } 
    ```

3.  %% 修正相关函数`panel.cor`;

    ```
    panel.cor <- function(x, y, digits=2, cex.cor)
    {
    usr <- par("usr"); on.exit(par(usr))
    par(usr = c(0, 1, 0, 1))
    r <- abs(cor(x, y))
    txt <- format(c(r, 0.123456789), digits=digits)[1]
    test <- cor.test(x,y)
    Signif <- ifelse(round(test$p.value,3)<0.001,"p < 0.001",paste("p = ",round(test$p.value,3)))  
    text(0.5, 0.25, paste("r = ",txt), cex = 2.5, family="Times New Roman", face="bold", size=12)
    text(.5, .75, Signif, cex = 2.5, family="Times New Roman", face="bold", size=12)
    } 
    ```

为了能够绘制散点图矩阵，您还需要安装“Times New Roman”字体。为此，请按照以下步骤操作；

4.  %% 将所有字体安装到 RStudio。这对提高剧情质量很重要！

    ```
    install.packages("extrafont") # Install fonts
    library(extrafont)            # Install library
    font_import()                 # Import all fonts  
    loadfonts(device="win")       # Register fonts for Windows bitmap output
    fonts()                       # Finish the process 
    ```

5.  %% 最后，用`pairs`函数绘制你的图形；

    ```
     pairs(qq1, lower.panel=panel.smooth, upper.panel=panel.cor ,diag.panel=panel.hist, cex = 2, cex.labels = 2, cex.main = 2) 
    ```

6.  %% 检查最终产品； [在此处输入图像描述](https://i.stack.imgur.com/6cH0M.png)

# php - cURL - 发送多个不需要的请求的脚本

> ID：15271106
> 
> 赞同：0
> 
> 时间：2013-03-07T12:20:02.770
> 
> 标签：php, curl

我有一个 PHP 脚本，它使用 cURL 将 XML 有效负载发送到 SMS 服务提供商。问题是用户抱怨他们收到多条短信（有时全天有 50 条），我不知道这是我的代码问题还是短信服务提供商的问题。只有不会多次按提交的人才能访问提交此表单的表单。

这是我的代码，如果有人可以快速查看它以查看我是否遗漏了一个重要选项，我将不胜感激，如果遗漏，将发送多个请求：

```
<?php
// the following code is only executed if there is no sms timestamp in the db for the user.  sms timestamp is added to the db when $error != true;
$error = false;

define('XML_PAYLOAD', '<xml data...>');
define('XML_POST_URL', 'https://URLOFSERVICEPROVIDER');

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, XML_POST_URL);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5); 
curl_setopt($ch, CURLOPT_TIMEOUT,        5); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);  
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); 
curl_setopt($ch, CURLOPT_POST,           true ); 
curl_setopt($ch, CURLOPT_POSTFIELDS, XML_PAYLOAD);
curl_setopt($ch, CURLOPT_HTTPHEADER,     array('Content-Type: text/xml; charset=utf-8', 'Content-Length: '.strlen(XML_PAYLOAD) ));
$result = curl_exec($ch);

if ( curl_errno($ch) ) {
    $error = true;
} else {
    $returnCode = (int)curl_getinfo($ch, CURLINFO_HTTP_CODE);
    switch($returnCode){
        case 200:
            break;
        default:
            $error = true;
            break;
    }
}
curl_close($ch);
if($error == false){
    // store that SMS was sent successfully
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:26:49.020

据我所知，没有代码会请求两次。

只有一个问题 - 我在你的代码中没有看到 curl_exec ，可以吗？

发送两次怎么样 - 尝试在此处添加日志

```
if ( curl_errno($ch) ) {
    $error = true;
} 
```

和这里

```
if($error == false){
    // store that SMS was sent successfully
} 
```

这将包括当前时间，它将帮助您查看我们进入这部分脚本的次数。

# c# - ServiceStack 多路由路径

> ID：15271108
> 
> 赞同：3
> 
> 时间：2013-03-07T12:20:10.670
> 
> 标签：c#, servicestack

我已经完成了这个简短的测试代码。但是，它会忽略所有其他路由，只命中第一条路由：

`http://localhost:55109/api/customers`工作正常

`http://localhost:55109/api/customers/page/1`行不通

`http://localhost:55109/api/customers/page/1/size/20`行不通

当我用 page & size 参数调用路由时，它说：`"Handler for Request not found".`

我无法弄清楚我做错了什么？请给我一个提示？

```
[Route("/api/customers", "GET")]  //works okay
[Route("/api/customers/page/{Page}", "GET")] //doesn't work
[Route("/api/customers/page/{Page}/size/{PageSize}", "GET")] //doesn't work
public class Customers {
    public Customers() { Page = 1; PageSize = 20; } //by default 1st page 20 records
    public int Page { get; set; }
    public int PageSize { get; set; }
}
//----------------------------------------------------
public class CustomersService : Service {
    public ICustomersManager CustomersManager { get; set; }
    public dynamic Get(Customers req) {
            return new { Customers = CustomersManager.GetCustomers(req) };
    }
}
//----------------------------------------------------
public interface ICustomersManager : IBaseManager {
    IList<Customer> GetCustomers(Customers req);
}
public class CustomersManager : BaseManager, ICustomersManager {
    public IList<Customer> GetCustomers(Customers req) {
        if (req.Page < 1) ThrowHttpError(HttpStatusCode.BadRequest, "Bad page number");
        if (req.PageSize < 1) ThrowHttpError(HttpStatusCode.BadRequest, "Bad page size number");
        var customers = Db.Select<Customer>().Skip((req.Page - 1) * req.PageSize).Take(req.PageSize).ToList();
        if (customers.Count <= 0) ThrowHttpError(HttpStatusCode.NotFound, "Data not found");
        return customers;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:12:49.620

您不应该为所有路由添加前缀`/api`，这看起来应该是[ServiceStack 应该安装在的自定义路径](http://www.servicestack.net/ServiceStack.Hello/#custompath)，而不是单个服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:10:57.000

不确定我可以提供解决方案，但也许是一个提示。我在您的路由路径中看不到任何不正确的地方（我同意@mythz 关于删除`/api`和使用自定义路径的说法），并且我能够使类似的路由路径结构正常工作。在您的`CustomersService`课程中，我删除了一些代码以获得更简单的调试示例。我还在返回时添加了一个属性，只是为了查看在您看不到的情况下或在您的请求`Paths`中注册了哪些路径。希望这可以帮助。`/api/customers/page/{Page}``/api/customers/page/{Page}/size/{PageSize}``/api/customers`

```
[Route("/api/customers", "GET")]  //works okay
[Route("/api/customers/page/{Page}", "GET")] //doesn't work
[Route("/api/customers/page/{Page}/size/{PageSize}", "GET")] //doesn't work
public class Customers
{
    public Customers() { Page = 1; PageSize = 20; } //by default 1st page 20 records
    public int Page { get; set; }
    public int PageSize { get; set; }
}
//----------------------------------------------------
public class CustomersService : Service
{
    public dynamic Get(Customers req)
    {
        var paths = ((ServiceController) base.GetAppHost().Config.ServiceController).RestPathMap.Values.SelectMany(x => x.Select(y => y.Path)); //find all route paths
        var list = String.Join(", ", paths);
        return new { Page = req.Page, PageSize = req.PageSize, Paths = list };
    }
} 
```

# jquery-ui - 允许将 jquery ui 滑块设置为高于最大值或低于最小值

> ID：15271111
> 
> 赞同：3
> 
> 时间：2013-03-07T12:20:18.003
> 
> 标签：jquery-ui, knockout.js, slider

我有一个链接到数字文本框的 jquery ui 滑块。滑块有最大值和最小值。

请参阅[带有文本框输入的 ui 滑块](https://stackoverflow.com/questions/7523864/ui-slider-with-text-box-input)或 [使用带有 jquery ui 滑块](https://stackoverflow.com/questions/12856112/using-knockout-js-with-jquery-ui-sliders)的敲除 js 来实现敲除 js。

我的问题是：是否可以将滑块的值设置为高于最大值或低于最小值？

如果`value`超出范围，则设置为范围的最大值或最小值：

```
$(element).slider("value", value); 
```

例如，假设滑块代表您的月薪在 50 到 100 之间的百分比。月薪设置为 10000。如果您滑动滑块，它将在 5000 到 10000 之间变化，但我仍然希望用户能够输入值范围之外。因此，如果用户输入 12000，滑块将滑到最大值，如果用户输入 2000，滑块将滑到最小值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:45:20.200

改编自[Using knockout js with jquery ui sliders中的答案](https://stackoverflow.com/questions/12856112/using-knockout-js-with-jquery-ui-sliders)

```
<h2>Slider Demo</h2>
Savings:
<input data-bind="value: savings, valueUpdate: 'afterkeydown'"
/>
<div style="margin: 10px" data-bind="slider: savings, sliderOptions: {min: 0, max: 100, range: 'min', step: 1}"></div> 
```

这是自定义绑定：

```
ko.bindingHandlers.slider = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var options = allBindingsAccessor().sliderOptions || {};
        $(element).slider(options);
        ko.utils.registerEventHandler(element, "slidechange", function (event, ui) {
            var value = valueAccessor();
            if(!(value < $(element).slider('option', 'min')   || value > $(element).slider('option', 'max')))
            {
            valueAccessor(ui.value);
            }
        });
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).slider("destroy");
        });
        ko.utils.registerEventHandler(element, "slide", function (event, ui) {
            var observable = valueAccessor();
            observable(ui.value);
        });
    },
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (isNaN(value)) value = 0;
        if (value < $(element).slider('option', 'min')) {
            value = $(element).slider("option", "min");
        } else if (value > $(element).slider('option', 'max')) {
            value = $(element).slider("option", "max");
        }
        $(element).slider("value", value);

    }
};

var ViewModel = function () {
    var self = this;

    self.savings = ko.observable(10);
    self.spent = ko.observable(5);
    self.net = ko.computed(function () {
        return self.savings() - self.spent();
    });
};

ko.applyBindings(new ViewModel()); 
```

我也从那个答案改编了[jsFiddle 。](http://jsfiddle.net/manzanotti/2ZSdU/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:25:36.730

您可以通过覆盖`_trimAlignValue`我在评论中提到的函数来完成此操作：

```
$.ui.slider.prototype._trimAlignValue = function (val) {
    var step = (this.options.step > 0) ? this.options.step : 1,
        valModStep = val % step,
        alignValue = val - valModStep;

    if (Math.abs(valModStep) * 2 >= step) {
        alignValue += (valModStep > 0) ? step : (-step);
    }
    return parseFloat(alignValue.toFixed(5));
}; 
```

这将影响页面上的每个滑块——如果这不是您想要的效果，您应该将此功能包装在您自己的插件中（如果需要，我也可以提供一个示例）。

这与您现有的 KnockoutJS 自定义绑定相结合似乎运作良好。

**示例：http:** [//jsfiddle.net/Aa5nK/7/](http://jsfiddle.net/Aa5nK/7/)

# gruntjs - 如何根据相应文件的父文件夹名称使用 Grunt 重命名文件？

> ID：15271121
> 
> 赞同：52
> 
> 时间：2013-03-07T12:20:51.840
> 
> 标签：gruntjs, parent-child, rename, build-automation

我有以下结构：

```
src/
    modules/
        module1/
            js/
                main.js
            scss/
                main.scss
            index.html
        module2/
            js/
                main.js
            scss/
                main.scss
            index.html 
```

我想运行一个 grunt 任务将它们复制到以下结构中：

```
dev/
    js/
        module1.js
        module2.js
    css/
        module1.css
        module2.css
    module1.html
    module2.html 
```

有没有办法用现有的 grunt 插件来做到这一点？如果没有，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-20T06:23:44.747

这可以使用[grunt-contrib-copy](https://github.com/gruntjs/grunt-contrib-copy)插件来完成。

需要注意的主要事项是，您可以使用重命名函数（它接收每个文件的目标和源）以编程方式更改目标。

这是一个（有点脆弱的）示例`Gruntfile.js`，应该复制到您想要的结构：

```
module.exports = function(grunt) {
  // Project configuration.
  grunt.initConfig({
    copy: {
      main: {
        files: [
          {
            expand: true, 
            cwd: 'src/modules/', 
            src: ['**/*.js'], 
            dest: 'dev/js/', 
            rename: function(dest, src) {
              // use the source directory to create the file
              // example with your directory structure
              //   dest = 'dev/js/'
              //   src = 'module1/js/main.js'
              return dest + src.substring(0, src.indexOf('/')) + '.js';
            }
          },
          {
            expand: true, 
            cwd: 'src/modules/', 
            src: ['**/*.scss'], 
            dest: 'dev/css/', 
            rename: function(dest, src) {
              return dest + src.substring(0, src.indexOf('/')) + '.css';
            }
          },
          {
            expand: true, 
            cwd: 'src/modules/', 
            src: ['**/*.html'], 
            dest: 'dev/', 
            rename: function(dest, src) {
              return dest + src.substring(0, src.indexOf('/')) + '.html';
            }
          }
        ]
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-copy');

  // Default task(s).
  grunt.registerTask('default', ['copy']);
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-18T15:04:42.787

不再需要为此使用`grunt-contrib-copy`，您现在可以利用`grunt.file.expandMapping`其中的选项来更改文件扩展名，或定义返回输出文件名的函数。

这是将 .jade 模板编译为 .html 文件`files`的任务中的对象示例：`jade`

```
files: [{
    expand: true, 
    src: "**/*.jade", 
    dest: "<%= distDir %>", 
    cwd: "<%= assetsDir %>/jade", 
    rename: function(dest, matchedSrcPath, options) {
        // return the destination path and filename:
        return (dest + matchedSrcPath).replace('.jade', '.html');
    }
}] 
```

`ext: '.html'`在这种情况下，使用该选项而不是该选项会更容易`rename`，但我在`rename`这里使用它是为了让您了解它是如何工作的。

[有关grunt.file 文档](http://gruntjs.com/api/grunt.file#grunt.file.expandmapping)`ext`中的和`rename`（和其他）选项的更多信息。[这里](http://blog.frankmtaylor.com/2014/09/05/grunt-js-minify-rename-and-put-it-in-another-folder/)和[这里](https://stackoverflow.com/questions/14089921/how-to-copy-compiled-jade-files-to-a-destination-folder-using-grunt)还有一些例子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-15T09:58:32.067

您可以简单地使用选项：expand : true, flatten: true

无需自定义重命名回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-30T04:10:10.667

**不完全是您问题的答案，**但我在这里寻找**带有 grunt 的相对 dest 文件夹，**所以...这是我解决它的方法

```
...
base: {
  files:
  [
    {
      expand: true,
      cwd: 'app/design/frontend/',
      src: ['**/Magento_Sales/email-src/*.html'],
      dest: '../../Magento_Sales/email/',
      rename: function(dest, src, expand) {
        src = path.parse(src)
        return path.join(expand.cwd, src.dir, dest, src.base);
      }
    },
  ],
}
... 
```

这一点`path.join(expand.cwd, src.dir, dest, src.base);`只是创建我需要的路径。

`expand.cwd = app/design/frontend/`

`src.dir = <DYNAMIC_FOLDERS>/Magento_Sales/email-src/`

`dest = ../../Magento_Sales/email/`

`src.base = <FILE>.html`

和所有一起=`app/design/frontend/<COMPANY>/<MAIN-THEME>/Magento_Sales/email/<FILE>.html`

在我的情况下，它现在将在相对目标文件夹中编译我的 html 电子邮件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-22T11:55:36.553

如果您想将 .coffee 文件重命名为 .js 或类似文件，则只需对其进行调整；）

sudo npm install grunt-contrib-copy

```
copy: {
  rename: {
    files: [{
     expand: true,
     dot: true,
     cwd: './app/scripts',
     dest: './app/scripts/',
     src: [
       '**/*.coffee'
     ],
     rename: function(dest, src) {
       console.log(dest + src);
       return dest + src.replace('.coffee','.js');
     }
   }]
  }
}, 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-20T06:22:13.420

我想将文件保存在我们找到该文件的根目录下创建的 min 文件夹中，以便将插件文件夹移动到另一个项目中更容易：

```
-- Plugins/    
     -- bootstrap/                
            -- bootstrap.js
            -- bootstrap.css
            -- min/
                 -- bootstrap.min.js
                 -- bootstrap.min.css 
```

由于此页面，我发布了我找到的解决方案，也许它可以帮助其他人：

```
uglify: {
    options: {
        mangle: true
    },
    dynamic_mappings: {
        // Grunt will search for "**/*.js" under "Plugins/" when the "uglify" task
        // runs and build the appropriate src-dest file mappings then, so you
        // don't need to update the Gruntfile when files are added or removed.
        files: [
            {
                expand: true,     // Enable dynamic expansion.
                cwd: 'Plugins/',  // Src matches are relative to this path.
                src: ['**/*.js', '!**/*.min.js'], // Pattern to match (ignore .min files)
                dest: '/min/',     // Destination path prefix.
                ext: '.min.js',   // Dest filepaths will have this extension.
                extDot: 'last',   // Extensions in filenames begin after the first dot
                rename: function( dest, matchedPath, options ) {

                    Pathname = matchedPath.substring( 0, matchedPath.indexOf('/') );
                    Filename = matchedPath.replace( Pathname, '' );

                    //Return "Plugins / plugin_folder / min / file_name.min.js"
                    return options.cwd + Pathname + dest + Filename;
                }
            },
        ],
    },
} 
```

# jquery - 防止 href=# 使用 jquery 跳转到顶部

> ID：15271124
> 
> 赞同：0
> 
> 时间：2013-03-07T12:21:08.067
> 
> 标签：jquery, javascript-events

对不起..我遇到了几十个这样的问题，但似乎没有一个对我有帮助:(

我正在使用切换脚本，但每次我点击脚本链接时它都会切换，但它也会跳转到页面顶部！有任何想法吗？这是代码：

```
<a href="" id="button2">Read More…&lt;a>
<div id="hidden_content2" style="display:none;">
<p>bla bla</p>
</style>
</div>
<script>
$(document).ready(function() {
   $("#button2").toggle(
      function() {
         $(this).text('Hide Content…');
      },
      function() {
         $(this).text('Read More…');
      }
   ).click(
      function() {
         $("#hidden_content2").slideToggle("slow"…
      }
   );
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:25:29.280

`return false`从您的点击处理程序函数。这可以防止链接的默认行为。

* * *

您的点击处理程序中还有一个错字：

```
$("#hidden_content2").slideToggle("slow"… 
```

应该：

```
$("#hidden_content2").slideToggle("slow"); 
```

这将破坏您的处理程序（包括`return false`）直到修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:25:15.827

阻止事件的默认操作。请注意，`toggle`不推荐使用事件方法，您可以改用`text`方法的回调函数。

```
$(document).ready(function () {
    $("#button2").click(function (event) {
        event.preventDefault();
        $(this).text(function (i, text) {
            return text == 'Hide Content…' ? 'Read More…' : 'Hide Content…'
        });
        $("#hidden_content2").stop().slideToggle("slow");
    });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:26:28.407

您可以在点击中使用 event.preventDefault() 。

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

我认为现在应该用 jQuery 中的 on 替换 click 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:27:50.607

您可以使用 preventDefault，例如：

```
.click(function(e){
    e.preventDefault();
    $("#hidden_content2").slideToggle("slow"…
}); 
```

或者，您可以只使用 span 或 div 代替锚标记并为其分配一个`click()`事件，因为您似乎实际上不需要使用锚标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T12:28:03.787

首先，为什么要使用锚链接。它没有链接到任何东西，所以它应该是一个链接吗？您不能只使用普通的 div 并使用 CSS 将光标设置为指针吗？如果这样做，则无需阻止单击空链接的默认行为。

如果你保留链接，你有两个选择。

```
$('#button2').toggle(function(event) {
   event.preventDefault(); 
}); 
```

或者

```
$('#button2').toggle(function() {
    return false;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T12:30:27.793

使用它：
*只需在您的代码中进行一点更新*

```
<a href="#" id="button2">Read More…&lt;a>

<div id="hidden_content2" style="display:none;">
    <p>bla bla</p>
</div>

<script type="text/javascript">
$(document).ready(function() {

    $("#button2").toggle(function() {

        $(this).text('Hide Content…');

        }, function() {

            $(this).text('Read More…');

    }).click(function(){

        $("#hidden_content2").slideToggle("slow");
        return false;

    });

});
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T12:22:52.323

利用 ：`JavaScript:void(0); in href`

```
<a href="jJavaScript:void(0);" id="button2">Read More…&lt;a>
<div id="hidden_content2" style="display:none;">
<p>bla bla</p>
</style>
</div>
<script>
$(document).ready(function() {
$("#button2").toggle(function() {
$(this).text('Hide Content…');
}, function() {
$(this).text('Read More…');
}).click(function(){
$("#hidden_content2").slideToggle("slow"…
});
}); 
```

# android - 如何解决 Android SQLite 舍入错误

> ID：15271125
> 
> 赞同：2
> 
> 时间：2013-03-07T12:21:10.230
> 
> 标签：android, sqlite, rounding, rounding-error

我们的 Android 应用程序存在四舍五入的问题。在用 Java 进行的计算中，我们使用 BigDecimal，这很有帮助，但是我们在使用 SQLite 时遇到了问题，例如。

```
SELECT ROUND(150.075 * 100) / 100 (= 150.07, not 150.08!) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:35:34.630

你对这个（不优雅的）解决方案的看法：

```
SELECT ROUND(150.075 + 0.00000000000009, 2) (= 150.08) 
```

我们检查了超过 5 000 个不正确的值，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:44:10.683

那是因为由于浮点数不准确，`150.075 * 100`与`15007.5`. `150.075`双精度浮点数的十进制表示是`150.07499999999999999722444243843711`.

要获得您想要的行为，请使用`ROUND()`允许您指定小数位数的两个参数版本：

```
sqlite> SELECT ROUND(150.075, 2);
150.08 
```

# android - Android 向服务器发送 HTTP POST 请求

> ID：15271126
> 
> 赞同：2
> 
> 时间：2013-03-07T12:21:14.937
> 
> 标签：android, web-services, interface, httpclient

我正在创建一个连接到 cakePHP 网站的应用程序我创建了一个默认的 HTTP 客户端并向服务器发送一个 HTTP POST 请求。数据以 json 格式来自服务器，在客户端我从 json 数组中获取值，这是我的项目结构。下面我展示了一些我用来连接服务器的代码

```
 try{
             HttpClient httpclient = new DefaultHttpClient();
             HttpPost httppost = new HttpPost("http://10.0.2.2/XXXX/logins/login1");

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
        response = httpclient.execute(httppost);
        StringBuilder builder = new StringBuilder();
               BufferedReader   reader = new BufferedReader

            (new     InputStreamReader(response.getEntity().getContent(), "UTF-8"));

              for (String line = null; (line = reader.readLine()) != null;) 

                    {
                    builder.append(line).append("\n");
                    }

              JSONTokener   tokener = new JSONTokener(builder.toString());
              JSONArray  finalResult = new JSONArray(tokener);
              System.out.println("finalresulttttttt"+finalResult.toString());
              System.out.println("finalresul length"+finalResult.length());
                Object type = new Object();

              if (finalResult.length() == 0 && type.equals("both")) 
            {
        System.out.println("null value in the json array");

                }
    else {

           JSONObject   json_data = new JSONObject();

            for (int i = 0; i < finalResult.length(); i++) 
               {
                   json_data = finalResult.getJSONObject(i);

                   JSONObject menuObject = json_data.getJSONObject("Userprofile");

                   group_id= menuObject.getString("group_id");
                   id = menuObject.getString("id");
                   name = menuObject.getString("name");
                }
                    }
                        }

                  catch (Exception e) {
               Toast.makeText(FirstMain.this,"exceptionnnnn",Toast.LENGTH_LONG).show();
                 e.printStackTrace();
                    } 
```

我的问题是

1.  我需要将每个页面与服务器连接，因为我需要在我的所有活动中每次都编写代码，有没有其他方法可以连接到服务器并从每个活动发送请求？接口的概念类似于......
2.  android 库是否提供任何用于连接服务器的类？
3.  是否需要检查所有验证，例如客户端的 SSL 证书？

4.  从 android 连接到服务器是否需要任何其他要求？

5.  实现 SOAP REST 之类的服务以与服务器交互需要什么

我是这个领域的新手..请回答我的疑问..并请支持我...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:47:51.800

这将帮助您：

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) throws Exception {

    // Making HTTP request
    try {

        // check for request method
        if (method == "POST") {
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            // new
            HttpParams httpParameters = httpPost.getParams();
            // Set the timeout in milliseconds until a connection is
            // established.
            int timeoutConnection = 10000;
            HttpConnectionParams.setConnectionTimeout(httpParameters,
                    timeoutConnection);
            // Set the default socket timeout (SO_TIMEOUT)
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 10000;
            HttpConnectionParams
                    .setSoTimeout(httpParameters, timeoutSocket);
            // new
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } else if (method == "GET") {
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);
            // new
            HttpParams httpParameters = httpGet.getParams();
            // Set the timeout in milliseconds until a connection is
            // established.
            int timeoutConnection = 10000;
            HttpConnectionParams.setConnectionTimeout(httpParameters,
                    timeoutConnection);
            // Set the default socket timeout (SO_TIMEOUT)
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 10000;
            HttpConnectionParams
                    .setSoTimeout(httpParameters, timeoutSocket);
            // new
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }

    } catch (UnsupportedEncodingException e) {
        throw new Exception("Unsupported encoding error.");
    } catch (ClientProtocolException e) {
        throw new Exception("Client protocol error.");
    } catch (SocketTimeoutException e) {
        throw new Exception("Sorry, socket timeout.");
    } catch (ConnectTimeoutException e) {
        throw new Exception("Sorry, connection timeout.");
    } catch (IOException e) {
        throw new Exception("I/O error(May be server down).");
    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        throw new Exception(e.getMessage());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        throw new Exception(e.getMessage());
    }

    // return JSON String
    return jObj;

}
 } 
```

您可以像这样使用上面的类：例如：

```
public class GetName extends AsyncTask<String, String, String> {
String imei = "abc";
JSONParser jsonParser = new JSONParser();

@Override
protected void onPreExecute() {
    super.onPreExecute();
}

protected String doInBackground(String... args) {
    String name = null;
    String URL = "http://192.168.2.5:8000/mobile/";
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("username", mUsername));
    params.add(new BasicNameValuePair("password", mPassword));
    JSONObject json;
    try {
        json = jsonParser.makeHttpRequest(URL, "POST", params);
        try {
            int success = json.getInt(Settings.SUCCESS);
            if (success == 1) {
                name = json.getString("name");
            } else {
                name = null;
            }
        } catch (JSONException e) {
            name = null;
        }
    } catch (Exception e1) {
    }
    return name;
}

protected void onPostExecute(String name) {
    Toast.makeText(mcontext, name, Toast.LENGTH_SHORT).show();
 }
 } 
```

如何使用它：
只需通过复制有关类代码来创建新的 JSONParse 类。然后您可以在应用程序中的任何位置调用它，如第二个代码所示（自定义第二个代码）。
您需要给予清单许可：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

无需检查 SSL 证书。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:34:40.097

1 您可以编写一个实用程序类 HTTPPoster 并包装到 HTTPAsyncCall 中。在每个活动中使用该类并传递参数

2 URLConnection，但在 Android 上最好使用 AsyncTask，尤其是对于 Android +4

3你可以设置信任Android端的每个人......不是那么安全......

4 没有，但是在android manifest需要添加权限，比如internet

5 有 2 种方法可以手动或自动使用 libraryesmarshaling、unmarshaling。JSON 的开销更少。

我希望它有帮助！

# visual-studio-2008 - ffmpeg 最新的视觉工作室构建或与 (.a) 库链接

> ID：15271127
> 
> 赞同：2
> 
> 时间：2013-03-07T12:21:18.170
> 
> 标签：visual-studio-2008, gcc, ffmpeg, static-linking, solution

这儿存在一个问题。我需要将 ffmpeg（尤其是 libavcodec）静态链接到 Visual Studio 2008 项目中。

我在互联网上找到了一些视觉工作室解决方案，但它们很旧（大约 0.6 版本），我需要最新版本，所以这种方式不适合我。

接下来，我使用 MinGW/msys 进行静态构建（使用 --enable-satic --disable-shared 标志）并在输出中获得 (*.a) 库。在 Visual Studio 中，我转到链接器属性并添加到 Additional Dependencies(Linker->Input) libvacodec.a 和 libgcc.a。然后我写了一个简单的应用程序：

```
#include <stdio.h>
#include <stdlib.h>
extern "C"
{
   #ifdef  __STDC_CONSTANT_MACROS
      #define __STDC_CONSTANT_MACROS
   #endif
      #include "libavcodec/avcodec.h"    
 }

#include "libavformat/avformat.h"

      int main()
   {
    av_register_all();
    return 0;
   } 
```

此代码编译成功，但链接失败。得到一个错误：

```
error  LNK2019: unresolved external symbol "void __cdecl av_register(void)" (?av_register_all@@YAXXZ) referenced in function _main. 
```

所以，有两个问题：

1.  如何将 Visual Studio 应用程序与 libavcodec.a 链接？

2.  如果可能的话，我在哪里可以获得包含 ffmpeg 最新版本的 Visual Studio 解决方案？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T21:37:38.030

1.  就像您使用 .lib 文件一样。.a 是同一事物，但名称不同。如果对您来说更容易，请将 libavcodec.a 重命名为 libavcodec.lib。

2.  无处。

# ios - 我应该将 XML 文件放在 iPhone 模拟器的文件系统中的什么位置。XCode 4.2

> ID：15271131
> 
> 赞同：1
> 
> 时间：2013-03-07T12:21:25.790
> 
> 标签：ios, filesystems, ios-simulator

一个有点尴尬的问题，但我可以找到一个适用于我的情况的答案......我需要放置一些 xml 文件（settings.xml）以便在应用程序运行时从中读取一些数据。

根据这里的一些答案，而不仅仅是这里，我把它放在这里： **~/Library/Application Support/iPhone Simulator/5.0/[AppUUID]/Documents**

我正在尝试按如下方式使用它：

```
// Loading data from external XML File
    NSURL *url = [[NSBundle mainBundle]
                    URLForResource: @"settings" withExtension:@"xml"];
    NSError *err;
    if ([url checkResourceIsReachableAndReturnError:&err] == NO){
        NSLog(@"FILE NOT FOUND");
    } 
```

结果：“未找到文件”。

我尝试将文件放在 **~/Library/Application Support/iPhone Simulator/5.0/[AppUUID]/**中的任何可能目录下，效果 仍然相同。

我正在使用 XCode 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:47:47.310

如果要将文件放入`.../Documents`文件夹，则需要使用以下代码来访问它（您在 App Bundle 中查找它，这完全是一个不同的位置）：

```
NSString *docFolder = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *filename = [docFolder stringByAppendingPathComponent:@"settings.xml"];

if ([[NSFileManager defaultManager] fileExistsAtPath:filename])
{
    // Read file
}
else
{
    NSLog(@"settings.xml file not found!");
} 
```

# php - 如何根据 symfony2 DQL 中的日期时间列过滤查询结果

> ID：15271133
> 
> 赞同：2
> 
> 时间：2013-03-07T12:21:36.023
> 
> 标签：php, datetime, symfony, doctrine-orm, dql

我有一个类似的查询：

```
$em->createQuery(
    'SELECT t FROM myTestBundle:User t WHERE t.userId = :username AND
    t.tokenCreatedtime > (NOW() - INTERVAL 800 MINUTE)'
); 
```

`(NOW() - INTERVAL 800 MINUTE)`不在 DQL 中工作。还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:28:15.273

我建议您创建一个占位符并传递`DateTime`对象

```
$q = $em->createQuery(
    'SELECT t FROM myTestBundle:User t WHERE t.userId = :username AND
    t.tokenCreatedtime > :createdTime '
);
$q->setParameter(':createdTime',new \DateTime("-800 minute") 
```

此外，您可能希望将`\DateTime`对象创建为`new \DateTime("-800 minute")`

# ios - phonegap 插件barcodescanner 在iOS 上不起作用

> ID：15271134
> 
> 赞同：2
> 
> 时间：2013-03-07T12:21:36.893
> 
> 标签：ios, cordova, plugins, barcode-scanner

我们正在为 phonegap (2.4.0) - iOS (6) 和 Android 平台开发应用程序。我们的应用程序正在使用 BarcodeScanner 插件。插件在 Android 上运行没有任何问题，但我们在 iOS 上检测到一些问题。

起初在文件 CDVBarcodeScanner.mm CDVPlugin.h 中没有找到，所以我们评论了 if/else check around this line:`#import <CORDOVA/CDVPlugin.h>`并且在 config.xml 文件中我们添加了这一行：`<plugin name="org.apache.cordova.barcodeScanner" value="CDVBarcodeScanner" />` Then was build successfull without any errors, but after click on扫描按钮什么也没发生，也没有写入输出。

然后我们对比了Android和iOS的barcodescanner.js，发现在Android js文件末尾添加日志后：

```
if(!window.plugins) {
    console.log("something 1");
    window.plugins = {};
}
if (!window.plugins.barcodeScanner) {
    window.plugins.barcodeScanner = new BarcodeScanner();
    console.log("something 2");
} 
```

输出是在应用程序启动后写入的。对于 iOS，我们还在类似部分添加了一些控制台日志：

```
(function() {
   if (!window.plugins) window.plugins = {}
   console.log("something 1");
   if (!window.plugins.barcodeScanner) {
        window.plugins.barcodeScanner = new BarcodeScanner();
        console.log("something 2");
   }
   else {
        console.log("Not installing barcodeScanner: window.plugins.barcodeScanner already exists")
   }
}) 
```

但没有人写。

感谢您的每一个建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:28:26.300

我们已经尝试了这些更改和插件工作：

1.  我们降级到phonegap 2.3
2.  我们将 -O0 编译标志设置为 zxing-all-in-one.cpp
3.  检查所有添加的库

# scala - 修复 Scala 的 export_code 中丑陋的字符串导出

> ID：15271136
> 
> 赞同：1
> 
> 时间：2013-03-07T12:21:46.627
> 
> 标签：scala, isabelle

我有一个`foo`适用于该`string`类型的函数。当我`export_code foo in Scala file -`得到一个非常丑陋的 Scala 代码时。

一个很长的列表，看起来像这样被创建

```
abstract sealed class nibble
final case class Nibble0() extends nibble
final case class Nibble1() extends nibble
final case class Nibble2() extends nibble
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:31:01.580

您需要导入`Code_Char`理论以告诉代码生成使用目标语言中现有的 char/string 实现，而不是将 Isabelle 定义翻译为数据类型。

添加`"~~/src/HOL/Library/Code_Char"`到您的理论的导入子句中，一切都应该正常工作。

另外，有人告诉我——但到目前为止还无法验证——这应该总是在你的 import 子句的末尾，否则，代码生成器会发生有趣的事情。

干杯，曼努埃尔

# sql - 在 SQL Compact 中重新设定标识列

> ID：15271143
> 
> 赞同：8
> 
> 时间：2013-03-07T12:22:19.157
> 
> 标签：sql, sql-server-ce

是否可以在紧凑型数据库中重置标识列？我找到了很多关于标准 SQL Server 的答案，但没有关于是否可以使用 SQL CE 的明确答案。

在我的场景中，删除并重新创建表并不理想！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T12:59:31.340

```
ALTER TABLE [MyTable] ALTER COLUMN [Id] IDENTITY (1,1) 
```

# django - django 上的 email__iexact 在 postgresql 上不起作用？

> ID：15271144
> 
> 赞同：2
> 
> 时间：2013-03-07T12:22:19.653
> 
> 标签：django, postgresql

调用`UserModel.objects.filter(email__iexact=email)`结果如下查询

```
SELECT * FROM "accounts_person" WHERE "accounts_person"."email" = UPPER('my-email@mail.com') 
```

这没有找到任何东西，因为它`EMAIL@MAIL.COM`在数据库中没有，只有`email@mail.com`. 查询不应该被翻译成 `WHERE UPPER("accounts_person"."email") = UPPER('my-email@mail.com')`?

概括：

```
UserModel.objects.filter(email=email) # works
UserModel.objects.filter(email__exact=email) # works
UserModel.objects.filter(email__iexact=email) # doesn't work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:39:44.537

与您发生冲突，这我也面临与 postgres sql 相同的情况。

如果你通过[这张票](https://code.djangoproject.com/ticket/3575)

你会有一些想法。

也许可以将一个选项传递给 EmailField 以说明您是否希望它降低所有大小写。它将不必在表单验证中做一些事情。

```
def clean_email(self):
    return self.cleaned_data['email'].lower() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:04:58.093

我的错。我已经修补`lookup_cast`以能够在 postgresql 上使用 unaccent 模块，但`lookup_cast`后来没有调用原始模块。生成的查询现在看起来像这样`WHERE UPPER("accounts_person"."email"::text) = UPPER('my-email@mail.com')`。这是 django 的默认行为。

# iphone - UIControl 不接收触摸

> ID：15271154
> 
> 赞同：1
> 
> 时间：2013-03-07T12:22:44.410
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我从 .xib 文件加载视图。在 .xib 中，我有这样的结构：UIControl 类型的主视图，其中包含 UITable 和 UIView。问题是 UIControl 没有接收到触摸，并且事件触摸的方法从不调用。我该如何解决这个问题？

在 .h 文件中，我声明了方法

`- (IBAction)backgroundTap:(id)sender;` 在 .m 中我实现了这个方法：

```
- (IBAction)backgroundTap:(id)sender
{
    [passwordTextField resignFirstResponder];
    [usernameTextField resignFirstResponder];
} 
```

还将来自 File 所有者的 backgroundTap 事件与来自主视图的 UIControl 的 touch dowm 事件绑定

**更新**

实际上原因是我点击我总是点击 UiTable 元素，所以我的事件没有到达。我该如何解决这个问题，也许我可以将触摸事件从表发送到 UIControl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:35:24.157

检查您的方法控制，我认为它没有在里面修饰，所以让它在里面修饰并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:24:29.767

你可以试试这个：

```
yourControl.userInteractionEnabled = TRUE; 
```

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:59:50.733

根据您的描述，听起来您的 xib 根视图是 UIControl？IB 不允许通过 UI，您是否从初始 UIView 手动更改了类？同样，IB 不允许您将子视图添加到 UIControl 对象。因此，在不明确知道您的 xib 结构的情况下，听起来您应该从 UIView 根目录开始，然后在 UIView 中添加 UITableView 和 UIControl 对象，而不是在 UIControl 中添加 UITableView。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:07:52.343

子类化覆盖所有屏幕的控件。

`touchesBegan:withEvent:`将触摸重定向到您的控件的覆盖方法。

# facebook - 将内容发布到 Facebook 业务页面 - 来自外部网站的时间线？

> ID：15271157
> 
> 赞同：0
> 
> 时间：2013-03-07T12:22:54.057
> 
> 标签：facebook, sdk, extranet

有人可以提供有关如何执行以下操作的详细分步示例吗？

我需要能够以所有者/管理员的身份将新内容从我们的网站直接发布到我们的 Facebook 业务页面 - 时间线或通过我们的 Facebook 应用程序。

我们有一个支持多个站点/域的外联网，但只要我们自己的站点有内容，我们希望这些不同站点的内容自动发布到我们的中央 Facebook 业务页面。

我们的页面上有喜欢按钮，允许用户喜欢并发布到他们自己的墙上，但我们想发布到我们自己的业务墙上。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:33:57.027

1.  创建一个 RSS 提要，其中包含您想在 Facebook 页面上分享的帖子。
2.  转到您的 Facebook 页面并使用顶部搜索框搜索“RSS 涂鸦”。
3.  按照屏幕上的步骤操作即可。

# sql - 关系代数中的 LIKE 运算符

> ID：15271159
> 
> 赞同：2
> 
> 时间：2013-03-07T12:23:01.110
> 
> 标签：sql, notation, relational-algebra

有没有办法在关系代数中显示 sql LIKE 运算符？

现在我已经这样做了：

> σ [firstname LIKE ('B%')]人

但我不确定这是否是正确的方法。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:27:04.340

这是本网站前面提到的关于如何在关系代数中使用 LIKE的[类似问题。](https://stackoverflow.com/questions/9875319/relational-algebra-check-for-error)在那种情况下，教授表示可以像在 SQL 中一样使用 LIKE。

# mapping - 有没有办法使用java在windows中以编程方式创建ARP缓存条目？

> ID：15271161
> 
> 赞同：0
> 
> 时间：2013-03-07T12:23:10.940
> 
> 标签：mapping, arp

我想使用编程语言（最好是 java）将 arp ip 添加到 mac 映射到 arp 缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T15:28:14.817

您可以简单地运行命令 ARP -s inet_addr eth_adr 其中 inet_addr 是 IP 地址，eth_adr 是硬件地址。
在 Java 中：

```
 Process child = Runtime.getRuntime().exec("arp -s 220.0.0.161 00-50-04-62-F7-23"); 
```

在 C# 中：

```
 Process process = new Process();
 process.StartInfo.FileName = "arp -s 220.0.0.161 00-50-04-62-F7-23";
 process.StartInfo.CreateNoWindow = true; //Don't show window
 process.Start(); 
```

# php - 根据购物车中选择的项目添加选中的复选框

> ID：15271162
> 
> 赞同：2
> 
> 时间：2013-03-07T12:23:15.100
> 
> 标签：php, checkbox, shopping-cart, checkout

我有一个购物车，人们可以在其中添加不同页面上的商品。

通过所有页面，您可以通过单击产品页面上的按钮将商品添加到购物车。

当人们进入“结帐”页面时，所有项目都会有复选框，购物车中选择的项目应该被“选中”。这样他们可以给我发邮件，我知道他们选择了哪些。

我唯一能做的就是所有选择的项目都显示一个选中的复选框。但我想要所有项目的复选框，并且只选中那些被选中的项目，以便人们可以在结帐页面添加项目。

我希望有人可以帮助我，我不是要求完整的脚本，但是实现它的最佳方法是什么？

当难以理解时，这可以更好地解释它：我想要的是每个项目的复选框，并且已经检查了购物车中的那些。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:29:48.953

尝试这样的事情：（这可能不是您需要的确切代码。）

```
<?php
foreach($products as $product){
$pid  = $product['pid'];
?>
<input type="checkbox" value="<?php echo $pid; ?>" <?php if(in_array($pid,$_SESSION['cart'])){ ?> checked="checked" <?php }?> /> Product name
<?php } ?> 
```

它检查是否`$pid`存在`SESSION`，如果存在检查复选框

# asp.net-mvc-3 - 使用 Razor 替换 {mySection} 类型标签的好方法是什么？

> ID：15271163
> 
> 赞同：1
> 
> 时间：2013-03-07T12:23:16.130
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我正在使用 MVC3、C# 和 Razor。

我有模板段落，它们在数据库中存储和编辑，比如

"销售数据可以如下所示：{SalesTable1}"

我希望将 {SalesTable1} 位替换为迭代“Sales”类的一些代码（很可能是剃刀）的结果，即

```
<table>
@foreach var item in Sales
{
 <tr>
 <td>@item.Product</td>
 <td>@item.Sales</td>
 </tr>
}
</table> 
```

上面的代码可能不太正确，但它显示了这个想法。

在 XSLT 中，人们会调用一个名称为“SalesTable1”的“模板”。

在 Razor 中解决这个问题的好方法是什么？顺便说一句，我正在使用 ViewModel，我可以在其中放置我的模板数据和我的真实数据以供我的 View 处理。

谢谢。

编辑：如果有更好的方法，我不需要模板中的 {MySection} 类型标签（特别是）。然而，重要的是“管理员”可以在应用程序中编辑这些标签周围的文本。

EDIT2：我有一个主视图，它根据不同的主题类型调用不同的部分视图。在每个局部视图中，我希望用运行时@section 模板替换 {tags}，这些模板也在局部视图中指定。这似乎不起作用。我猜是因为“RenderSection”命令应该出现在布局或父视图中。

EDIT3：我认为我最好从我的部分视图中使用另一个 RenderPartial。但是我不确定如何用@{Html.RenderPartial("myTable");} 替换 {myTable} 标记。

```
<text>This is a test sentence. {myTable} After table </text> 
```

生产：

```
 <text>This is a test sentence. @{Html.RenderPartial("myTable");} After table </text> 
```

最后，我确实对这种方法有一个问题，如果“myTable”部分不存在，或者 {myTable} 拼写错误，即 {MyTablee}，那么应用程序将崩溃。我希望它在不运行局部视图的情况下继续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:27:10.147

您可以使用 MVC3 部分......它们的定义如下......

```
@section SideBar {
 // Side bar code...
} 
```

然后当你需要渲染它们时，你只需调用

```
@RenderSection("SideBar"); 
```

GU在这里有一篇很棒的帖子...

[http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:27:52.407

我现在通过替换部分视图的标签对此进行了排序。

非常感谢。

# mongodb - 将 .js 文件传递 给 mongo db.eval()

> ID：15271176
> 
> 赞同：1
> 
> 时间：2013-03-07T12:24:21.840
> 
> 标签：mongodb

我正在尝试使用[各种](https://github.com/variety/variety)而`db.eval()`不是 commandline `--eval`。这是因为我在身份验证方面遇到了一些问题。

正常使用是从命令行：

```
$ mongo test --eval "var collection = 'users', maxDepth = 3" /path/to/variety.js 
```

我想做的是：

```
$ mongo
>> use admin
>> db.auth("foo", "bar")
>> use anotherColl
>> db.eval("/path/to/variety.js", "var collection = 'users', maxDepth = 3")
>> Thu Mar  7 13:19:10 uncaught exception: {
    "errmsg" : "compile failed: JS Error: SyntaxError: invalid flag after regular expression nofile_a:0",
    "ok" : 0
} 
```

有没有办法`db.eval()`吃一个 javascript 文件而不是一个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:14:12.107

根据@Sammaye 和我的直觉，您不能将 .js 文件放入`db.eval()`. [然而，对于多样性，这里](https://github.com/variety/variety/pull/17)描述了一个解决方案。

```
mongo -u USER-p PASS admin --eval "var collection = 'COL', db_name='DB_NAME'" variety.js 
```

现在是[身份验证问题](https://stackoverflow.com/questions/15272521/command-line-authentication-of-mongo-fails):(

# json - POST 使用uploadstring 方法调用Web 服务并传递一个json 数组

> ID：15271181
> 
> 赞同：0
> 
> 时间：2013-03-07T12:24:32.067
> 
> 标签：json, post, webclient, uploadstring

我正在尝试对 Web 服务进行 POST。我正在使用 WebClient 类并调用 uploadstring 方法。这工作正常，直到我调用的 Web 服务需要一些数据，尤其是 json 数组。我试图找出数据需要采用什么格式，以便 Web 服务能够正确接受和使用它。例子：

```
WebClient myWebClient = new WebClient();
string resp = myWebClient.UploadString("www.myUrl.com", "POST", "someDataToSend"); 
```

这里的任何帮助将不胜感激！

被调用的 Web 服务 (vb.net) 采用键值对：

```
<OperationContract(), WebInvoke(BodyStyle:=WebMessageBodyStyle.WrappedRequest, Method:="POST", RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Json)> _
Public Function DoSomething(ByVal myKeyValuePair() As KeyValuePair(Of String, String)) As String 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:25:03.997

我找到了解决方案。数据必须是 json 格式：

"{"Type":[{"key":"cType","value":"Age"}]}"

我创建了一个对其进行序列化的类，然后将方括号放入其中。

```
Public Class cType
    Private _key As String
    Public Property Key() As String
        Get
            Return _key
        End Get
        Set(ByVal value As String)
            value = "cType"
            _key = value
        End Set
    End Property
    Public value As String
End Class 

Dim objType As cType = New cType
objType.value = "Age"
Dim myData As String = deserializer.Serialize(New With {.cType = objType})
myData = myData.Insert(12, "[")
myData = myData.Insert(myData.Length - 1, "]") 
```

# linux - ubuntu中的postgres连接被拒绝

> ID：15271182
> 
> 赞同：1
> 
> 时间：2013-03-07T12:24:32.230
> 
> 标签：linux, networking, ubuntu, service, database-connection

远程连接时出现错误，错误内容类似于

无法连接到服务器：连接超时 (0x0000274C/10060) 服务器是否在主机 x 上运行并接受端口 5432 上的 TCP/IP 连接？

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:37:23.773

打开你的终端并写

```
service postgresql status 
```

如果它说它没有运行而不是写

```
service postgresql start 
```

如果该服务已经在运行，则通过以下方式检查您的 postgresql 服务的侦听端口

```
netstat -an | grep postgresql 
```

结果将显示它正在侦听的端口。然后您可以使用命令连接数据库

```
psql -h localhost -p port_you_found -U postgres 
```

# php - 无数据库无限滚动

> ID：15271184
> 
> 赞同：-6
> 
> 时间：2013-03-07T12:24:32.557
> 
> 标签：php, html, parsing, pagination, infinite-scroll

我想知道是否可以在没有数据库的情况下进行无限滚动。

我有很多从不同网站解析的数据，所以它基本上是一个新闻文章链接列表。当它们被插入到其他站点时，它们正在我的页面上进行更新。我想这样做的一种方法是每分钟、5 分钟运行一次 cron 作业，然后将它们插入到我的数据库中，然后将其输出到我的页面上。然后我可以制作无限卷轴。但我想知道是否可以不使用数据库。

也许是这样的，在页面加载时计算有多少文章链接并且只显示一定数量？我还没有找到任何好的例子。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:29:27.240

你有两个选择：

*   保存数据（在文件中，在 mysql 中......）
*   每次用户加载页面时获取数据（检查每个页面的新闻）

当然，最好以某种方式保存数据，但也可以在没有数据库或类似的情况下进行。

您必须意识到每次加载页面时 PHP 都是从头开始的，因此您需要一些东西来存储信息，这样您的 PHP 文件就不必重复很多工作。

# c# - 如何以编程方式获取 MS CRM 业务部门中具有特定角色的用户

> ID：15271187
> 
> 赞同：4
> 
> 时间：2013-03-07T12:24:40.613
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm

我正在尝试通过 C# 插件从 MS CRM 2011 业务部门检索具有特定角色的用户，但是我坚持为此编写正确的查询。角色通过`N:N`关系链接到用户，我正在努力寻找这种情况下的示例查询。

现在我想出了以下内容：

```
var entity = organizationService.Retrieve(entityName, entityId, new ColumnSet(new string[] { "new_unit" }));

if (entity.Attributes.Keys.Contains("new_unit"))
{
    QueryExpression query = new QueryExpression("systemuser");

    query.ColumnSet = new ColumnSet(new string[] { "systemuserid" });
    query.Distinct = true;
    query.Criteria = new FilterExpression();
    query.Criteria.AddCondition("businessunitid", ConditionOperator.Equal, ((EntityReference)entity.Attributes["new_unit"]).Id);
} 
```

我不确定我需要链接到哪个实体`systemuser`以及如何实现目标检索具有特定角色和业务单位的用户。

我可以很容易地获得角色的名称或它的名称`Guid`，但是接下来我应该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:33:58.903

您必须使用这些`AddLink`方法来执行连接。

这应该是您需要的：

```
QueryExpression query = new QueryExpression("systemuser");

query.ColumnSet = new ColumnSet(new string[] { "systemuserid" });
query.Distinct = true;
query.Criteria = new FilterExpression();
query.Criteria.AddCondition("businessunitid", ConditionOperator.Equal, ((EntityReference)entity.Attributes["new_unit"]).Id);
query.AddLink("systemuserroles", "systemuserid", "systemuserid").
    AddLink("role","roleid", "roleid").
        LinkCriteria.AddCondition("name", ConditionOperator.Equal, "MyRoleName");

var users = organizationService.RetrieveMultiple(query); 
```

如果您可以轻松获取 RoleId，您可以跳过角色实体的添加链接，只需将您的 LinkCriteria 条件添加到 SystemUserRoles 实体：

```
QueryExpression query = new QueryExpression("systemuser");

query.ColumnSet = new ColumnSet(new string[] { "systemuserid" });
query.Distinct = true;
query.Criteria = new FilterExpression();
query.Criteria.AddCondition("businessunitid", ConditionOperator.Equal, ((EntityReference)entity.Attributes["new_unit"]).Id);
query.AddLink("systemuserroles", "systemuserid", "systemuserid").
    LinkCriteria.AddCondition("roleid", ConditionOperator.Equal, roleIdGuid);

var users = organizationService.RetrieveMultiple(query); 
```

# oracle - Oracle 通过字符串键从 :new, :old 动态获取值

> ID：15271188
> 
> 赞同：0
> 
> 时间：2013-03-07T12:24:41.733
> 
> 标签：oracle, plsql

如何从特殊`:new`或`:old`“字符串键”中获取值？

例如在 PHP 中：

```
$key = 'bar';
$foo[$key]; //get foo value 
```

如何在甲骨文？

```
:new.bar --get :new 'bar' value 
```

和

```
key = 'bar';
:new[key] --How to? 
```

可能吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:37:28.210

这不可能。

> 在行级别触发的触发器可以使用相关名称访问正在处理的行中的数据。默认的相关名称是 OLD、NEW 和 PARENT。
> 
> ...
> 
> OLD、NEW 和 PARENT 也称为伪记录，因为它们具有记录结构，但允许在比记录更少的上下文中使用。伪记录的结构是 table_name%ROWTYPE，其中 table_name 是创建触发器的表的名称（对于 OLD 和 NEW）或父表的名称（对于 PARENT）。

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#autoId4](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#autoId4)

所以，这些关联名基本上都是记录。记录不是键值存储，因此您不能通过字符串键引用它。

以下是您可以使用它们执行的操作：

[http://docs.oracle.com/cd/E11882_01/appdev.112/e10472/composites.htm#CIHFCFCJ](http://docs.oracle.com/cd/E11882_01/appdev.112/e10472/composites.htm#CIHFCFCJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:29:04.197

据此[_](http://www.adp-gmbh.ch/ora/sql/trigger/new_old.html)

第一种方法在语法上很好，它应该像这样使用：

```
create trigger trg_before_insert before insert on trigger_tbl
  for each row
begin
  insert into trigger_log (txt) values ('[I] :old.a=' || :old.a || ', :new.a='||:new.a);
end;
/ 
```

但是，如果您想动态访问该字段，我能想到的一件丑陋的事情似乎正在起作用（最终根本不是动态的......）：对每列使用 CASE WHEN... 语句您希望能够动态使用...

这些方面的内容（更新 :new 记录）：

```
key='bar';
value = 'newValue';
CASE key
    WHEN 'bar' THEN :new.bar = value;
    WHEN 'foo' THEN :new.foo = value;
    WHEN 'baz' THEN :new.baz = value;
END; 
```

要从“动态列”中读取值：

```
key='bar';
value =  CASE key
        WHEN 'bar' THEN :new.bar;
        WHEN 'foo' THEN :new.foo;
        WHEN 'baz' THEN :new.baz;
    END; 
```

然后根据需要使用 value 变量...

**但是要当心**，正如@beherenow 指出的那样：

> *   `value`您的阅读示例中变量的数据类型是什么？
> *   你怎么能确定你不会遇到类型不匹配？

这些问题需要执行方做出决定。例如，通过斜视，这个东西可以用来动态地使用来自共享相同类型的列的值。

不过我必须强调，我没有看到我提出的这种奇怪的装置会被使用的情况，我也不支持使用它。在@beherenow 给出完整而明确的答案之后，我将其保留在这里的原因是让每个找到此页面的人都可以看到 - 尽管可能有办法，但不应该使用它......

对我来说，这件事似乎：

*   丑陋的
*   脆
*   严重缩放
*   骇人听闻
*   难以维护
*   ...aaand 可怕的丑陋...

我绝对建议重新考虑您需要它的用例。我自己会对写这种代码的人大喊大叫，除非这绝对是唯一的方法，如果不这样做，整个宇宙就会崩溃......（虽然这不太可能）

[抱歉，如果我误解了您的问题，我并不完全清楚]

# ios - IOS self->isa 已弃用，但 Object_setClass 也给出警告

> ID：15271190
> 
> 赞同：3
> 
> 时间：2013-03-07T12:24:47.060
> 
> 标签：ios, objective-c

我正忙于一个大学图书馆。在他的代码中，他设置了几次 isa。这仍然有效，但已正式弃用。替代方案应该是 object_setClass 函数。但是当我替换它时，我收到一个警告：*函数“object_setClass”的隐式声明在 C99 中无效。* 也许我错过了进口或什么？任何人的想法？谢谢。

```
if(nodePtr->type == XML_ELEMENT_NODE)
{
    self->isa = [DDXMLElement class];
    //object_setClass(self, [DDXMLElement class]);
}
else if(nodePtr->type == XML_DOCUMENT_NODE)
{
    self->isa = [DDXMLDocument class];
    //object_setClass(self, [DDXMLDocument class]);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T12:27:46.797

它被声明在`#include <objc/runtime.h>`——你是否包含了那个标题？

# php - 如何在 CakePHP 中组织共享函数？

> ID：15271192
> 
> 赞同：1
> 
> 时间：2013-03-07T12:24:52.150
> 
> 标签：php, cakephp

我需要创建很多功能，供 6 个以上的控制器使用。所以...**共享功能**：

此功能**需要**：

*   模型访问
*   数据库访问
*   库访问
*   供应商访问
*   插件访问
*   查看重定向
*   返回参数（回调）

**最好**的方法是什么？

*   库
*   零件
*   行为
*   小贩

我的网站**配置**：

*   CakePHP 2.3
*   MySQL 5.5
*   PHP 5.3.9
*   阿帕奇 2.2

* * *

对不起我的英语不好。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:42:12.417

```
Helpers are for (multiple) views
Behaviors are for (multiple) models
Tasks are for (multiple) shells
Components are for (multiple) controllers 
```

所以 - 如果你在控制器之间共享这些功能，合乎逻辑的答案是使用组件。

您提供的所有其他“选项”至少由于一个原因而失败。

但请记住，您仍然必须将模型内容保持在模型层附近，并且只能通过控制器/组件中的模型方法使用它。不要使这些组件成为强大的模型或其他东西。它们旨在在控制器之间共享“逻辑”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:46:55.590

只需在 Appcontroller 文件中编写这些函数，就可以全局访问它们。

# javascript - 为网络解决方案电子商务网站启用 gzip 压缩

> ID：15271193
> 
> 赞同：0
> 
> 时间：2013-03-07T12:24:58.237
> 
> 标签：javascript, asp.net, html

您好，我正在使用网络解决方案电子商务包我的网站是[http://www.shahji.com/](http://www.shahji.com/) 我只是想加快我的网站速度，也想让我的图片过期，但我不知道你怎么能帮我细节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:35:04.420

您可以使用 .htaccess 文件启用 GZIP。请参阅 HTML5 样板文件的示例。[https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)这是实现这一目标的完美方法。

但是，如果您在网络服务器设置中启用这些服务器设置会更好，而不仅仅是通过 .htaccess 在您的网站目录中。这可以防止在下载您的网站时再次发出 HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T18:43:05.617

为了提高您网站的速度，最好对您的网站进行 gzip 压缩，因为当网站使用 gzip 响应浏览器时，它会将压缩格式的网站数据发送到浏览器，例如如果您的网站大小为 200kb，压缩后将发送 10kb到浏览器，这肯定会提高您的网站速度性能，然后浏览器将其解压缩并将其显示给访问者。

# c# - Web 服务正在返回 Axis 故障... Server.userException

> ID：15271194
> 
> 赞同：0
> 
> 时间：2013-03-07T12:24:59.733
> 
> 标签：c#, java, web-services, soap, axis

我在使用 Web 服务时遇到问题。

我正在使用一种用 C# 编写的 Web 服务（通常的 Web 服务，而不是 WCF）。此外，我正在使用一个用 Java (Axis) 编写的 Web 服务，但我没有代码（已购买）。

该 java 服务正在调用我的 C# Web 服务并期望通过类 SendResponse 的返回值，其定义如下：

```
public class SendResponse
{
    public long MessageId { get; set; }
    public ResponseStatus Status { get; set; }
}

 AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode: 
 faultString: org.xml.sax.SAXException: Invalid element in org.litesphere.www.webservices.Local.SendResponse - MessageId
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}stackTrace:org.xml.sax.SAXException: Invalid element in org.litesphere.www.webservices.Local.SendResponse - MessageId
    at org.apache.axis.encoding.ser.BeanDeserializer.onStartChild(BeanDeserializer.java:258)
    at org.apache.axis.encoding.DeserializationContext.startElement(DeserializationContext.java:1035)
    at org.apache.axis.message.SAX2EventRecorder.replay(SAX2EventRecorder.java:165)
    at org.apache.axis.message.MessageElement.publishToHandler(MessageElement.java:1141)
    at org.apache.axis.message.RPCElement.deserialize(RPCElement.java:236)
    at org.apache.axis.message.RPCElement.getParams(RPCElement.java:384)
    at org.apache.axis.client.Call.invoke(Call.java:2467) 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:41:09.977

这个问题真的很愚蠢。解决方案在 SendResponse 类中。我拼错了 MessageId 属性（正确的属性应该是 MessageID），因此 Java 无法解析响应。

# c# - 在城堡温莎拦截器方法中获取方法调用者（控制器名称和动作名称）

> ID：15271196
> 
> 赞同：2
> 
> 时间：2013-03-07T12:25:06.040
> 
> 标签：c#, asp.net-mvc-4, castle-windsor, system.reflection

我想在动态代理拦截器方法中找到控制器和操作名称我检查堆栈跟踪方法不是好方法，因为它不会在堆栈中最后出现这是我的代码

**全球阿萨克斯城堡配置**

```
IWindsorContainer ioc = new WindsorContainer();
ioc.Register(
Component.For<IMyService>().DependsOn()
.ImplementedBy<MyService>()
.Interceptors<MyInterceptor>()
.LifeStyle.PerWebRequest);

ControllerBuilder.Current.SetControllerFactory(new WindsorControllerFactory(ioc));
ioc.Register(
Component.For<IInterceptor>()
.ImplementedBy<MyInterceptor>()); 
```

**控制器类**

```
private IMyService _service;
public HomeController(IMyService service)
{
    _service = service;
}
public ActionResult Index()
{
    _service.HelloWorld();

    return View();
} 
```

**服务等级**

```
public class MyService : IMyService
{
    public void HelloWorld()
    {
        throw new Exception("error");
    }
}
public interface IMyService
{
    void HelloWorld();
} 
```

**拦截器类**

```
//i want to find Controller name  

public class MyInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        //?? controller name ?? method Name  
        invocation.Proceed();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:46:47.043

DynamicProxy 不公开调用者信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-03T19:08:35.687

我能够在我的 loggingInterceptor 中获取类名和方法名

使用*调用.TargetType.Name*

```
public class LoggingInterceptor : IInterceptor
{ 
    ...

    public void Intercept(IInvocation invocation)
    {
        try
        {
            this.Logger.InfoFormat(
                "{0} | Entering method [{1}] with paramters: {2}",
                invocation.TargetType.Name,
                invocation.Method.Name,
                this.GetInvocationDetails(invocation));

            invocation.Proceed();
        }
        catch (Exception e)
        {
            this.Logger.ErrorFormat(
                "{0} | ...Logging an exception has occurred: {1}", invocation.TargetType.Name, e);
            throw;
        }
        finally
        {
            this.Logger.InfoFormat(
                "{0} | Leaving method [{1}] with return value {2}",
                invocation.TargetType.Name,
                invocation.Method.Name,
                invocation.ReturnValue);
        }
    } 

} 
```

# yii - Yii 模型 - MANY_MANY 关系 - 我还需要一个 HAS_MANY 吗？

> ID：15271197
> 
> 赞同：0
> 
> 时间：2013-03-07T12:25:09.627
> 
> 标签：yii

我通过以下方式通过三个表/活动记录模型定义两个对象（此示例中为 ModelA 和 ModelB）之间的多对多关系：

模型A--<模型A_B>--模型B

其中 ModelA_B 包含 ModelA 和 ModelB 的外键字段。因此，在 ModelA 的代码中，我已添加到**关系（）**函数中：

```
'modelbs' => array(self::MANY_MANY, 'ModelB', 'tbl_modelb(modela_id,modelb_id)'), 
```

我的问题是我是否仍然需要 Gii 生成的 HAS_MANY 关系来表示与链接表 ModelA_B 的关系，或者这是由上面的 MANY_MANY 隐式声明的？

```
'modelabs' => array(self::HAS_MANY, 'ModelA_B', 'ModelA_Id'), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:39:52.067

如果使用`MANY_MANY`关系，则不需要`HAS_MANY`为表定义另一个关系`ModelA_B`。

但是你也可以使用这个特性，它会在某个时候`through`替换关系（如果我没记错的话，可能在 Yii 2.0 中）。`MANY_MANY`在这种情况下，您将定义 2 个关系：

```
'mobelabs' => array(self::HAS_MANY, 'ModelA_B', 'ModelA_Id'),
'modelbs' => array(self::HAS_MANY, 'Model_B', 'ModelB_Id', 'through'=>'modelabs'), 
```

现在您可以访问两个相关记录：`ModelA_B`via`$modelA->modelabs`和`ModelB`via `$modelA->modelbs`。

# javascript - 加载更多内容的 Facebook 时间轴滚动事件

> ID：15271199
> 
> 赞同：3
> 
> 时间：2013-03-07T12:25:27.907
> 
> 标签：javascript, facebook, dom-events, infinite-scroll

我试图隔离加载更多内容时触发的 Facebook JS/Ajax 事件。这是-当您在页面上停留了一定时间并且出现了新帖子时。或者当您滚动到页面底部并加载更多帖子时。

我已经尝试过浏览 Chrome 开发人员工具的各个方面来查明该事件，但我没有得到任何结果。Facebook 在命名所有内容的方式上非常棘手，因此它对人类不友好。

我得到的最接近的是在一个名为 PBlKb9_thnY.js 的文件的第 20 行找到一个事件侦听器（它可能是动态命名的，因此对其他人不同），但我无法得到任何进一步的信息。

基本上我想识别加载更多内容的函数，然后通过扩展将我自己的 Javascript 代码附加到它的末尾。

# mysql - MySQL LOAD DATA INFILE 与 ON DUPLICATE KEY UPDATE

> ID：15271202
> 
> 赞同：54
> 
> 时间：2013-03-07T12:25:45.543
> 
> 标签：mysql, load-data-infile, on-duplicate-key

对于将大量数据加载到 MySQL 中，[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)是迄今为止最快的选择。不幸的是，虽然这可以以 INSERT IGNORE 或 REPLACE 的方式使用，但目前不支持 ON DUPLICATE KEY UPDATE。

但是，`ON DUPLICATE KEY UPDATE`比`REPLACE`. 后者在存在重复项时执行删除和插入。这为密钥管理带来了开销。此外，自动增量 ID 在替换时不会保持不变。

`ON DUPLICATE KEY UPDATE`使用 LOAD DATA INFILE 时如何模拟？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-07T12:25:45.543

这些步骤可用于模拟此功能：

1.  创建一个新的临时表。

    ```
    CREATE TEMPORARY TABLE temporary_table LIKE target_table; 
    ```

2.  或者，从临时表中删除所有索引以加快速度。

    ```
    SHOW INDEX FROM temporary_table;
    DROP INDEX `PRIMARY` ON temporary_table;
    DROP INDEX `some_other_index` ON temporary_table; 
    ```

3.  将 CSV 加载到临时表中

    ```
    LOAD DATA INFILE 'your_file.csv'
    INTO TABLE temporary_table
    FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
    (field1, field2); 
    ```

4.  使用 ON DUPLICATE KEY UPDATE 复制数据

    ```
    SHOW COLUMNS FROM target_table;
    INSERT INTO target_table
    SELECT * FROM temporary_table
    ON DUPLICATE KEY UPDATE field1 = VALUES(field1), field2 = VALUES(field2); 
    ```

5.  删除临时表

    ```
    DROP TEMPORARY TABLE temporary_table; 
    ```

对于任何给定的表，使用`SHOW INDEX FROM`并且`SHOW COLUMNS FROM`此过程可以自动化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-06T10:33:27.293

[我们可以在Jan 共享的答案](https://stackoverflow.com/a/15271204/117259)中用下面的单个查询替换第一个（两个步骤）。

对于步骤 1 和 2，我们可以创建具有相同引用结构且没有任何索引的新表。

```
CREATE TEMPORARY TABLE temporary_table SELECT * FROM target_table WHERE 1=0; 
```

代替。

1.  创建一个新的临时表。

    ```
    CREATE TEMPORARY TABLE temporary_table LIKE target_table; 
    ```

2.  或者，从临时表中删除所有索引以加快速度。

    ```
    SHOW INDEX FROM temporary_table;
    DROP INDEX `PRIMARY` ON temporary_table;
    DROP INDEX `some_other_index` ON temporary_table; 
    ```

# php - Magento 类别静态块仅不起作用

> ID：15271203
> 
> 赞同：2
> 
> 时间：2013-03-07T12:25:46.113
> 
> 标签：php, magento, categories, static-block

如果我将类别设置为仅产品，则它仅显示产品。

如果我将其设置为静态块和产品，它会显示静态块和产品。

如果我只将它设置为静态块，它会显示静态块和产品。

最后一个对我来说似乎不合适。知道如何让它只显示静态块吗？或者为什么它坚持展示产品，而后端下拉仅在静态块上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:12:39.777

答案是：重新索引一切。

我愚蠢地假设类别数据将被称为“类别平面数据”的索引所涵盖。但是，直到我重新索引“产品平面数据”，该类别才正确显示。

我不喜欢回答我自己的问题，所以如果有人能告诉我为什么我需要重新索引产品数据以使类别正确显示，你会得到闪亮的绿色复选标记......

# jquery - jquery asp.net 无法解析 json 对象

> ID：15271208
> 
> 赞同：0
> 
> 时间：2013-03-07T12:26:00.250
> 
> 标签：jquery, asp.net, json

我正在从 jquery 调用 webmethod 并获取 json 对象，但我无法解析和读取 json 对象。请帮我找出我做错了什么。我有 3 个 alert() 并且我在他们旁边放了评论他们显示的内容......

我的jQuery代码是这个

```
$('#btn_second').click(function () {
            //$('#txt_isim_4').val('test arif');
            $.ajax({
                type: "POST",
                url: "Registration.aspx/get_selected_professional",
                data: "{'id':'2'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert('1:' + data); // display [object Object]
                    alert('2:' + data.d.firstname); // display undefined
                    alert('3:' + data.d);  // display [{"id":"2","firstname":"arif"}]
                }
            });
        }); 
```

但我只想显示“Arif”。我的 json 对象错了吗？我应该使用单引号吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:27:26.453

您有数组，使用索引并在数据中使用大括号来制作对象。

**[现场演示](http://jsfiddle.net/ucCbY/2/)**

将json字符串更改为

```
[{"id":"2","firstname":"arif"}] 
```

使用数组索引索引器访问其元素

```
data.d[0].id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:44:44.727

假设你`webmethod`是这样的：

```
public string get_selected_professional(string id)
{
   List<MyClass> requiredData= GetRequiredData(id);
   //your required logic

   //string requiredData= "[{\"id\":\"2\",\"firstname\":\"arif\"}]";
   //return requiredData;

   //or

   return new JavascriptSerializer().Serialize(requiredData);
} 
```

`MyClass`在哪里

```
public class MyClass
{
   public int id {get;set;}
   public string firstname{get;set;}
} 
```

那么您应该`:success`在客户端的 ajax 中执行此操作：

```
success: function (data) {
                    var jsonData =$.parseJSON(data);
                    alert('1:' + jsonData); // display [object Object]
                    alert('2:' + jsonData.d.firstname); // display undefined
                    alert('3:' + jsonData.d);             
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:43:25.767

你只需要解析你的数据：

```
var result = jQuery.parseJSON(data.d);
alert(result[0].Id); 
```

# php - Zend Framework 2 ViewModel 在某些模块中返回空输出

> ID：15271209
> 
> 赞同：0
> 
> 时间：2013-03-07T12:26:02.477
> 
> 标签：php, viewmodel, zend-framework2

有不同的模块，它们都在操作中返回 ViewModel。但不知何故，ViewModel 在其中一个模块中表现得有些奇怪。

我在说;

```
$view = new ViewModel(array('data' => $someContent));
$view->setTemplate('a valid path to template');

return $view; 
```

并得到一个空白页面。

如果我在相关模板的末尾放置一个 exit() 语句，例如

```
<!DOCTYPE html>
<html>
    ...
</html>
<?php exit(); ?> 
```

我可以获得预期的输出，因为脚本在那里结束，但否则我会丢失输出。

如果我说 *var_dump($view)*，我可以看到 $view 是*Zend\View\Model\ViewModel*的一个实例。

没有错误，只是一个空输出，甚至可以看到通知警告。因此，它不会抛出任何异常、错误、警告、通知等。

再次提醒一下，它只发生在特定模块中，但该模块实际上与其他模块没有什么不同。

我不是 ZF 专家，我正在研究其他人的代码，所以请给我一个能够找到该问题的起点。

提前致谢。

编辑：我有一个额外的信息；

如果我使用 JsonModel 而不是 ViewModel，它会起作用，并且您可能知道，JsonModel 扩展了 ViewModel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:07:49.497

由于您没有正确发布您的控制器操作，这就是我可以对您的问题做些什么的猜测。

在 Zend 框架 2 中有各种类型的控制器，您可以从这些控制器中扩展您的模块中的控制器。

例如，如果您从 AbstractActionController 扩展您的控制器，您的视图将被正确返回。

所以这里的问题是你的其他模块有扩展 AbstractActionController 的控制器。这个没有正确返回视图的模块可能没有扩展它。相反，它可能会扩展其他控制器，例如 restfulcontrollers

您还应该检查模块的 module.php 文件，以检查您是否有任何策略，例如从 module.config.php 为该模块的引导程序应用 json 策略。

例如。

```
return array(
    'view_manager' => array(
        'strategies' => array(
           'ViewJsonStrategy',
        ),
    ),
) 
```

此外，您还检查了您的 module.config.php 文件，您的 viewmanager 是否对您的模板有适当的规范。

例如。

```
'view_manager' => array(
        'template_path_stack' => array(
            'album' => __DIR__ . '/../view',
        ),
    ), 
```

希望这可以帮助 。

# regex - 预匹配返回错误的值？

> ID：15271213
> 
> 赞同：2
> 
> 时间：2013-03-07T12:26:13.417
> 
> 标签：regex, preg-match

我是正则表达式的新手。我认为这段代码应该返回一个 0？但它返回一个 1。

**echo preg_match("/[ac]{2}/","abc");**

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:35:10.620

如果您希望正则表达式匹配*整个*字符串，则需要使用[anchors](http://www.regular-expressions.info/anchors.html)：

```
echo preg_match( "/^[a-c]{2}$/","abc"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:29:17.733

您在提供的字符串中匹配“ab”。

```
php > echo preg_match( "/[a-c]{2}/","ab");                                                                                                                                                                                                                                                                                                                                  
1 
```

[ac]{3} 将匹配所有三个，因为您基本上要求 preg_match在提供的范围内*准确*返回3 个字符。

要完全匹配指定范围内的三个字符：

```
php > echo preg_match( "/[a-c]{3}/","abc"); 
1 
```

要匹配行的开始位置，在范围内包含三个字符，然后结束：

```
php > echo preg_match( "/^[a-c]{3}$/","abc");
1 
```

# ios - 带有图案图像的自定义 UISwitch 拇指颜色导致应用程序崩溃 (ARC)

> ID：15271215
> 
> 赞同：2
> 
> 时间：2013-03-07T12:26:15.167
> 
> 标签：ios, automatic-ref-counting, customization, uiswitch

我想通过将图像设置为他的方法“setThumbTintColor”来自定义我的 UISwitch Thumb，但这会导致应用程序崩溃。如果我只是这样设置颜色：

```
[switch setThumbTintColor:[UIColor blackColor]]; 
```

没有问题。

但是，如果我想添加这样的图像：

```
 @property (nonatomic,strong) UIImage *imageThumb;
    @property (nonatomic,strong) UIColor *colorImageThumb;
    ...
    imageThumb = [UIImage imageNamed:@"myThumbImage.png"];
    colorImageThumb = [UIColor colorWithPatternImage:imageThumb];
    [switch setThumbTintColor:colorImageThumb]; 
```

一旦 UISwitch 被释放，应用程序就会崩溃（我正在使用 ARC，但这是错误消息）。

该线程似乎以无弧的方式解决了该问题。[将 UIColor 作为参数传递时崩溃](https://stackoverflow.com/questions/3095730/crashing-while-passing-uicolor-as-argument)

任何想法？

* * *

[编辑]

图像名称是 thumb_wood.png。

错误消息是“EXC_BAD_ACCESS”错误消息。

mainThread 树中的最后一个方法是：

0 objc_msgSend

4 - [UISwitch 解除分配]

5 - [MyUIViewController .cxx_destruct]

等等...破坏链

# linux - 在标题之后打印文件中的第二个字段。

> ID：15271218
> 
> 赞同：0
> 
> 时间：2013-03-07T12:26:20.927
> 
> 标签：linux, bash, shell, awk

我有一个文件具有以下结构的场景：

```
This is the list of all the employees and their desk numbers
Please dont exchange the chairs or drawers
Handle the furniture around with care
Name    Desk No
----    -------
Joe     445
May     560
Sue     669 
```

我只需要获取桌号。我正在考虑`----`用作过滤器并在后面的文本之后打印第二列。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:39:05.607

另一种方法：

```
$ awk 'p{print $2}$1=="----"{p=1}' file
445
560
669 
```

这使用变量`p`作为打印标志（默认值为零）。只有当我们设置为非零值`print $2`时，才会执行该块。`p`我们`p`在看到第一个字段所在的行之后进行设置`----`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:35:37.963

如果文件始终具有相同的标题（至少相同的行数），您可以从特定行开始打印：

```
awk 'NR>=6 {print $2}' file_name 
```

将从第 6 行打印到最后。然后我们只打印第二条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:41:26.707

这是 sed 的实现：

```
sed -n '/^----/,${/----/!s/[^ ]* *//p}' file.txt 
```

说明：从 ---- 开始的第一行到文件结尾，删除第一个字段，打印该行的所有其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:49:11.960

简单的怎么样`grep`？

```
$ grep -o "[0-9]\+" input
445
560
669 
```

# ios - 当应用程序进入后台时运行 MPMoviePlayer

> ID：15271220
> 
> 赞同：1
> 
> 时间：2013-03-07T12:26:22.970
> 
> 标签：ios, ios6, mpmovieplayercontroller, mpmovieplayer

我正在制作一个应用程序，我正在运行一个正在流式传输广播 url 的应用程序。但是当应用程序进入后台时，它会停止运行。我想在应用程序进入后台时运行它。谁能帮我这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:46:18.340

正如 PJ 所建议的，您的应用应该注册背景音频播放。

**根据[苹果文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28)**

*   当`UIBackgroundModes`key 包含音频值时，系统的媒体框架会自动阻止相应的应用程序在移动到后台时被挂起。只要它正在播放音频或视频内容，应用程序就会继续在后台运行。但是，如果应用程序停止播放音频或视频，系统将暂停它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:29:46.053

这很简单。您需要通过在其 Info.plist 文件中包含 UIBackgroundModes 键（带有值音频）来注册为背景音频应用程序。

注意：包含此键的应用程序必须在后台向用户播放有声内容。

## 编辑

对于 Xcode 4.6，请转到 plist-> 所需的背景模式-> 应用播放音频

# opengl-es - GL ES 2.0 中的简单通道偏移着色器

> ID：15271223
> 
> 赞同：1
> 
> 时间：2013-03-07T12:26:32.673
> 
> 标签：opengl-es, shader, fragment-shader

有人能指出我正确的方向来创建[类似于](http://blog.jahfer.com/2012/04/02/experimenting-shaders-openframeworks/)在 GL ES 2.0 上运行的效果吗？

.vert

```
uniform vec2 uAberrationOffset; 

void main() {
    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = gl_ProjectionMatrix * gl_ModelViewMatrix * gl_Vertex;
} 
```

.frag

```
uniform sampler2DRect baseTex; 
uniform vec2 uAberrationOffset; 

void main() {

vec4 coords = gl_TexCoord[0];

// baseTex is FBO of screen (1280x800 -> non-square)
// offset red
vec4 fbo1 = texture2DRect(baseTex, coords.xy - uAberrationOffset);  
// keep green where it is
vec4 fbo2 = texture2DRect(baseTex, coords.xy);  
// offset blue
vec4 fbo3 = texture2DRect(baseTex, coords.xy + uAberrationOffset);  

// FBO channels mixed (incl. offsets)
vec4 colFinal = vec4(fbo1.r, fbo2.g, fbo3.b, 1.);

// Output final pixel color
gl_FragColor = colFinal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:49:10.950

以下小步骤将允许您将这些着色器移植到 ES 2.0。

*   不要使用老式校服：`gl_ProjectionMatrix`和`gl_ModelViewMatrix`。将这些替换为用户定义的制服。

*   `sampler2DRect`并且`texture2DRect`在 ES 中不受支持，但您可以使用正常`sampler`并`texture2D`调用此效果。

*   `gl_MultiTexCoord0`并且`gl_Vertex`是老派的属性。您需要用用户定义的顶点属性替换它们。

# c# - 如何知道表和视图之间对应的列

> ID：15271231
> 
> 赞同：1
> 
> 时间：2013-03-07T12:26:57.750
> 
> 标签：c#, .net, sql, sql-server, database

我在 SQL Server 中有一个视图，并希望通过我的 C# 应用程序将此视图与其他表连接起来。为此，我需要在基础表中找出各个视图的字段对应的列。例如，我可以有这样的视图：

```
CREATE VIEW [View A]     
AS   
   SELECT Children.Child_ID, Social_Workers.Social_ID 
   FROM Children 
   INNER JOIN Social_Workers 
     ON Children.Social_ID = Social_Workers.Social_ID 
```

我可能想在上面的视图中加入一个表。为此，我的 C# 应用程序必须以某种方式知道关系中所需的外键和主键字段，从而生成如下 SQL 代码：

```
SELECT [View A].Child_ID, 
       Sponsors.User_ID 
FROM  [View A]  
INNER JOIN Sponsors 
 ON [View A].Child_ID = Sponsors.Child_ID 
```

我[找到了一种](http://www.mssqltips.com/sqlservertip/1638/using-sql-server-meta-data-to-list-tables-that-make-up-views/)在视图中检索基础表的方法，但是我不确定如何解决其余问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:58:09.563

如果我正确理解您的要求，您可以尝试使用[Find the real column name of an alias used in a view? 中的查询？](https://stackoverflow.com/questions/10048056/find-the-real-column-name-of-an-alias-used-in-a-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:38:17.300

我认为以下内容可能会有所帮助，特别是 referenced_entity_name 和 referenced_minor_name 列。

```
select * from sys.dm_sql_referenced_entities( 'dbo.ViewA', 'object' ) ; 
```

此 DMV 是在 SQL Server 2008 中添加的，所以如果您有早期版本，我很抱歉没有帮助。

# jquery - 获取另一个值为真的值

> ID：15271233
> 
> 赞同：-1
> 
> 时间：2013-03-07T12:27:01.940
> 
> 标签：jquery, json

我正在尝试从 JSON 响应中获取一个值，其中响应中的另一个值是真的......听起来很乱，我是新手，抱歉。也许这会有所帮助，这是我的 JSON 响应的一部分：

```
({"findlocationresult":{
"from":{
"location":[{
  "@x":"1460658",
  "@y":"6247996",
  "displayname":"Stockholm (Ronneby kn)",
  "type":"S",
  "locationid":7432356},

  {
  "@x":"1628182",
  "@y":"6580960",
  "bestmatch":"true",
  "displayname":"Stockholm Centralstation",
  "type":"S",
  "locationid":7400001} 
```

我正在尝试将`displayname`where`bestmatch`设置为 true。此外，`bestmatch`仅存在于响应中的一项（？）。

希望你能得到我想要做的！非常感谢帮助！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:30:23.643

您可以通过在 jquery 中迭代 json 对象的所有元素来获得。

试试这个

```
$.each(data.findlocationresult.from.location, function(i, item) {
    if(data[i].bestmatch == "true")
    alert(data[i].displayname);
  ...............
   });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:31:53.053

试试这个

说你的对象是数据

```
 $.each(data.findlocationresult.from.location,function(i,v){
     if(v.bestmatch !== undefined and v.bestmatch == true){
       alert(v.displayname);
     }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:32:47.297

你可以尝试这样做

```
var str = \\your json string
var json = JSON.stringify(eval("(" + str + ")"));
var fromJson =  json.findlocationresult.from.location;
var size = fromJson.length;
var displayname=""
for(i=0;i<size;i++){
  if(fromJson[i].bestmatch=="true"){
    displayname = fromJson[i].displayname;
    break;
  }
} 
```

警报（显示名称）；

# javascript - 匹配多个数组值，值顺序正确

> ID：15271237
> 
> 赞同：1
> 
> 时间：2013-03-07T12:27:10.740
> 
> 标签：javascript

假设我有

```
 // the idea of the array below are ['from', 'to']
 var runA = [2,6]
 var runB = [4,1]

 var input = [1,4,2,6,2] 
```

如何将 store 匹配到`runA`，以便`2,6`的顺序正确？它应该返回 true。

但是对于`runB`，它应该返回 false，即使它同时包含值 1 和 4，但不匹配正确的 'from'、'to' 顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:29:40.363

这是一种可能的方法：

```
if ( new RegExp("\\b" + runA + "\\b").test(input) ) {
    // 'runA' exists in 'input'
} 
```

# android - AsyncTask 不在 onCreate() 中执行

> ID：15271245
> 
> 赞同：1
> 
> 时间：2013-03-07T12:27:52.213
> 
> 标签：android, android-asynctask, android-imageview

我想要如果我的应用程序第一次启动它应该从网络下载图像并将该图像存储在 中`Device/Emulator`，`Device/Emulator`应该显示在`ImageView`. 我试过这样：

```
ImageView myImgView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     

    myImgView = (ImageView) findViewById(R.id.imageView1);      

    new MyAsnyc();
     Log.d(MY_TAGT, "AsyncTask Executed.....");

}
private class MyAsnyc extends AsyncTask<Void, Void,Void>{
    public File file ;
    InputStream is;
    private Bitmap bitmap;
    protected void doInBackground() throws IOException{

        File path = Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_PICTURES);
        file = new File(path, "DemoPicture.jpg");
        try{
            // Make sure the Pictures directory exists.
            path.mkdirs();

            URL url = new      URL(BASE_URL);
            /* Open a connection to that URL. */
            URLConnection ucon = url.openConnection();

            /*
             * Define InputStreams to read from the URLConnection.
             */
            is = ucon.getInputStream();

            OutputStream os = new FileOutputStream(file);
            byte[] data = new byte[is.available()];
            is.read(data);
            Log.i(MY_TAGT, "Picture is readable........");
            os.write(data);
            Log.i(MY_TAGT, "Picture is Saved........");
            is.close();
            os.close();

        }
        catch (IOException e) {
            Log.d("ImageManager", "Error: " + e);
        }
    }
    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        try {
            doInBackground();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
    protected void onPostExecute(){

        try{
            // Tell the media scanner about the new file so that it is
            // immediately available to the user.

            MediaScannerConnection.scanFile(null,
                    new String[] { file.toString() }, null,
                    new MediaScannerConnection.OnScanCompletedListener() {
                public void onScanCompleted(String path, Uri uri) {
                    Log.i("ExternalStorage", "Scanned " + path + ":");
                    Log.i("ExternalStorage", "-> uri=" + uri);
                }
            });
        }
        catch (Exception e) {
            // TODO: handle exception

        }

        /*Here I want to set this image in ImageView*/

        bitmap = BitmapFactory.decodeFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).toString()+"/DemoPicture.jpg");
        myImgView.setImageBitmap(bitmap);
    }
} 
```

但是以这种方式`MyAsync`不执行类，请告诉如何做到这一点。

`EDIT`这是我的日志

![在此处输入图像描述](../Images/426c2c2ccbaf644d1ca9d55bb6f96a06.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T12:29:05.553

使用执行来调用它。

```
new MyAsnyc().execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:29:25.667

采用

```
new MyAsnyc().execute(); 
```

代替

```
new MyAsnyc(); 
```

因为[AsyncTask.execute(Params...params)](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)方法用于执行 AsyncTask

**编辑 ：**

使用 While 或 for 循环将数据写入文件中：

```
OutputStream os = new FileOutputStream(file);
            byte[] data = new byte[is.available()];

            Log.i(MY_TAGT, "Picture is readable........");
            int count;
            while ( (count = is.read(data)) >= 0 ) {
              os.write(data,0,count)
             }

            Log.i(MY_TAGT, "Picture is Saved........");
            is.close();
            os.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:30:31.373

您忘记执行 AsyncTask：

```
(new MyAsnyc()).execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:31:51.533

在 Log.d(MY_TAGT, "AsyncTask Executed....."); 行之前 你只是构造了新的 AsyncTask 对象，但你没有用 execute() 方法调用它的执行..

编辑：第二个问题是，实际上你想在那个 ImageView 中显示哪张图片并不是很清楚。因为 bitmap = BitmapFactory.decodeFile(..blahblahblah..) 在此之后可能会为空。在我看来，你给文件夹名称，并且您想将该“文件”解码为位图..制作一些有关此解码和位图值的日志并向我们展示..

编辑2：

文件路径 = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES); 文件文件 = 新文件（路径，“DemoPicture.jpg”）；位图 = BitmapFactory.decodeFile(file);

应该工作得更好一点..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T08:32:51.957

你必须试试这个：

```
public class DownloadImage {    
public static File getImage(String imageUrl, String fileName){
File file = null;
try {
    //set the download URL, a url that points to a file on the internet
    //this is the file to be downloaded         
    URL url = new URL(imageUrl);
    Log.d("INFORMATION..", "FILE FOUNDED....");
    //create the new connection
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

    //set up some things on the connection
    urlConnection.setRequestMethod("GET");
    urlConnection.setDoOutput(true);

    //and connect!
    urlConnection.connect();
    Log.d("INFORMATION..", "FILE CONECTED....");
    //set the path where we want to save the file
    //in this case, going to save it on the root directory of the
    //sd card.
    File SDCardRoot = Environment.getExternalStorageDirectory();
    //create a new file, specifying the path, and the filename
    //which we want to save the file as.
    file = new File(SDCardRoot, fileName);

    //this will be used to write the downloaded data into the file we created
    FileOutputStream fileOutput = new FileOutputStream(file);
    Log.d("INFORMATION..", "WRINTING TO FILE DOWNLOADED...." + file);
    //this will be used in reading the data from the internet
    InputStream inputStream = urlConnection.getInputStream();

    //this is the total size of the file
    int totalSize = urlConnection.getContentLength();
    //variable to store total downloaded bytes
    int downloadedSize = 0;

    //create a buffer...
    byte[] buffer = new byte[1024];
    int bufferLength = 0; //used to store a temporary size of the buffer

    //now, read through the input buffer and write the contents to the file
    while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
        //add the data in the buffer to the file in the file output stream (the file on the sd card
        fileOutput.write(buffer, 0, bufferLength);
        //add up the size so we know how much is downloaded
        downloadedSize += bufferLength;
        Log.d("INFORMATION..", "FILE DOWNLOADED....");
        //this is where you would do something to report the prgress, like this maybe
        //updateProgress(downloadedSize, totalSize);

    }
    //close the output stream when done
    fileOutput.close();
    Log.d("INFORMATION..", "FILE DOWNLOADING COMPLETED....");
    //catch some possible errors...
} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
return file;

 }
} 
```

`DownloadImage.getImage(String imageUrl, String fileName)`像这样调用`MainActivity.java`它：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

ImageView imageView = (ImageView) findViewById(R.id.imageView1);

String url = "http://4.bp.blogspot.com/-8v_k_fOcfP8/UQIL4ufghBI/AAAAAAAAEDo/9ffRRTM9AnA/s1600/android-robog-alone.png"; 

String file = DownloadImage.getImage(url, "My Image.jpg").toString();

// Get file path on device and set it to imageView
Bitmap bitmap = BitmapFactory.decodeFile(file);
imageView.setImageBitmap(bitmap);
}
} 
```

我想这就是你要找的！希望对你有帮助

# error-handling - 如何记录 ZF2 控制器异常

> ID：15271250
> 
> 赞同：5
> 
> 时间：2013-03-07T12:28:02.367
> 
> 标签：error-handling, zend-framework2

我正在为异常注册一个 Zend\Log 实例，最后我需要通过电子邮件发送所有系统错误，现在它只是转到一个文件。但是，它在控制器中不起作用，异常会显示在视图中（或不显示，取决于`display_exceptions`）。我发现了这个[错误](https://github.com/zendframework/zf2/issues/3551)，似乎没有人关心它。所以我需要一个解决方法。有没有办法让控制器不吃我的异常？

```
'service_manager' => array(
    'factories' => array(
        'Logger' => function ($sm) use ($sRootDir)
            {
            $log = new Zend\Log\Logger();
            $writer = new Zend\Log\Writer\Stream($sRootDir . '/temp/license.log');
            $log->addWriter($writer);
            Zend\Log\Logger::registerErrorHandler($log);
            Zend\Log\Logger::registerExceptionHandler($log);
            return $log;
            },
    ), 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T13:05:14.800

您可以附加到调度错误事件：

**`Module.php`**

```
public function onBootstrap(MvcEvent $e)
{
    $eventManager = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);
    /**
     * Log any Uncaught Errors
     */
    $sharedManager = $e->getApplication()->getEventManager()->getSharedManager();
    $sm = $e->getApplication()->getServiceManager();
    $sharedManager->attach('Zend\Mvc\Application', 'dispatch.error',
         function($e) use ($sm) {
            if ($e->getParam('exception')){
                $sm->get('Logger')->crit($e->getParam('exception'));
            }
         }
    );
} 
```

一个简单记录器的示例服务配置

```
'factories' => array(
    'Logger' => function($sm){
        $logger = new \Zend\Log\Logger;
        $writer = new \Zend\Log\Writer\Stream('./data/log/'.date('Y-m-d').'-error.log');
        $logger->addWriter($writer);
        return $logger;
    },
    // ...
); 
```

您还可以记录堆栈中的所有异常，以更好地了解发生了什么问题，而不是只显示最后一个异常，这可能不包含太多信息。

```
public function onBootstrap(MvcEvent $e)
{
    $eventManager = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);
    /**
     * Log any Uncaught Exceptions, including all Exceptions in the stack
     */
    $sharedManager = $e->getApplication()->getEventManager()->getSharedManager();
    $sm = $e->getApplication()->getServiceManager();
    $sharedManager->attach('Zend\Mvc\Application', 'dispatch.error',
        function($e) use ($sm) {
            if ($e->getParam('exception')){
                $ex = $e->getParam('exception');
                do {
                    $sm->get('Logger')->crit(
                        sprintf(
                           "%s:%d %s (%d) [%s]\n", 
                            $ex->getFile(), 
                            $ex->getLine(), 
                            $ex->getMessage(), 
                            $ex->getCode(), 
                            get_class($ex)
                        )
                    );
                }
                while($ex = $ex->getPrevious());
            }
        }
    );
} 
```

# bash - Bash 脚本复制文件

> ID：15271254
> 
> 赞同：0
> 
> 时间：2013-03-07T12:28:14.140
> 
> 标签：bash

我有两个文件夹：一个包含 .dwg 文件，另一个包含 .pdf 文件。我文件夹中的树是不同的。

如何在具有相同名称的 DXF 附近复制 PDF？例如，我必须将文件复制`/1/2/3/1.pdf`到`/6/4/5/5/`找到文件的位置`1.dxf`

我试过这个：

```
for DIR in $source
do
        for LISTE in `find $DIR  -type f -name '*.PDF' -or -name '*.pdf' `
        do
                find $dest -type f -name {} -exec ****** {} \;
        done
done 
```

我的问题是我不知道如何从`find $dest -type f`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:47:22.000

*“我的问题是我不知道如何从 find $dest -type f 中获取名称。”*

使用以下`-printf`选项`find`：

```
find ${dest} -type f -printf "%f\n" 
```

见[`man find`](http://linux.die.net/man/1/find)：

> ```
> -printf format
>        True;  print  format  on  the standard output, 
>        interpreting `\' escapes and `%' directives. 
> ```
> 
> ...
> 
> ```
>  %f     File's name with any leading directories removed (only the last element). 
> ```

# logging - 如何在 Enterprise Library Logging 的输出中包含 TraceOutputOptions

> ID：15271257
> 
> 赞同：1
> 
> 时间：2013-03-07T12:28:22.063
> 
> 标签：logging, enterprise-library, callstack, enterprise-library-5

这让我很头疼，而且这个库的文档似乎不存在。我有一个滚动平面文件侦听器...我想将调用堆栈包含在写入侦听器的任何消息中。

```
 <add name="RollingFileLog"
           fileName="C:\Rainmaker\Logs\SampleArchitectureService.Log"
           ... snipped for brevity
           traceOutputOptions="Callstack" /> 
```

我需要在我的格式化程序中包含什么才能显示调用堆栈/跟踪信息。格式化程序如下

```
<add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, ..."
           name="TextFormatter"
           template="{timestamp(local)}: [{category}/{severity}] - {message} - ****WHATGOES HERE***" /> 
```

我已经尝试了一切，查看扩展属性字典，使用 {property()} 和 {keyvalue()} 标记，也没有文档。

有人可以向我解释这个`traceOutputOptions`属性的用途吗，如果是我的想法，我到底如何访问这些属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T17:26:43.047

MSDN 页面中的跟踪输出选项

TraceOutputOptions 属性确定跟踪输出的可选内容。该属性可以在配置文件中设置，也可以在执行期间以编程方式设置，以包含专门用于一段代码的附加数据。例如，您可以将控制台跟踪侦听器的 TraceOutputOptions 属性设置为 TraceOptions.Callstack 以将调用堆栈信息添加到跟踪输出。

另请记住，并非所有跟踪侦听器都支持它 [http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.traceoutputoptions.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.traceoutputoptions.aspx)

我看到将 CallStack 信息放入文件的唯一方法是通过文本格式化程序中的扩展属性字典。

```
template="Extended Properties: {dictionary({key} - {value}{newline})}" 
```

找到一篇有趣的文章，这应该对你有所帮助。“如何输出 TraceOutputOptions 值” [http://entlib.codeplex.com/discussions/344343](http://entlib.codeplex.com/discussions/344343)

# c# - 反序列化可为空的 TimeSpan 属性引发 ArgumentNullException

> ID：15271258
> 
> 赞同：1
> 
> 时间：2013-03-07T12:28:23.483
> 
> 标签：c#, json, serialization, deserialization

当我尝试反序列化可为空的 TimeSpan 属性时出现 Argumentnull 异常。

```
public class SimpleClass
{
    private TimeSpan? m_WorkStartHr;

    public TimeSpan? WorkStartHr
    {
        get { return m_WorkStartHr; }
        set { m_WorkStartHr = value; }
    }
}

public class Program
{
    static void Main(string[] args)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();

        TimeSpan? dt = new TimeSpan(288000000000);
        SimpleClass instance = new SimpleClass();
        instance.WorkStartHr = dt;

        string jsonStr = serializer.Serialize(instance);

        //This code throws the exception
        SimpleClass newInstance = serializer.Deserialize<SimpleClass>(jsonStr);
    }
} 
```

注意：如果我们使 WorkStartHr 不可为空，它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:47:17.047

不幸的是，这是 JavaScriptSerializer 的一个已知问题。

[这里有一个解决方法](http://juristr.com/blog/2012/02/aspnet-mvc3-doesnt-deserialize-nullable/)，但并不理想。

# winapi - Winapi :: 获取可用句柄数

> ID：15271263
> 
> 赞同：3
> 
> 时间：2013-03-07T12:28:36.977
> 
> 标签：winapi, handle

我想创建一个可以长时间运行我的程序的测试，并不时输出可用句柄的数量。我怎样才能用一些 WINAPI 函数做到这一点？

这是一篇关于如何调试处理泄漏的好文章 [http://blogs.technet.com/b/yongrhee/archive/2011/12/19/how-to-troubleshoot-a-handle-leak.aspx](http://blogs.technet.com/b/yongrhee/archive/2011/12/19/how-to-troubleshoot-a-handle-leak.aspx) 但它没有t 适合我的情况。我不知道如何在我的测试中自动化调试器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T13:16:01.623

这不是它的工作原理。您可以使用的句柄数受配额限制，默认为 10,000 个句柄。共有三种类型的句柄，每一种都由自己的配额管理：

*   内核句柄，由 kernel32.dll 导出的函数返回。文件、管道、套接字、同步对象等。识别它们的最佳方法是通过释放它们的方式，内核句柄总是需要 CloseHandle()。超出配额的内核句柄数量没有硬性上限，当内核内存池空间不足时会发生故障

*   user32 句柄、窗口和菜单对象。除了配额之外，一个桌面会话中可以分配的句柄数量存在硬性上限。同一个桌面上运行的所有进程的所有user32句柄的总和不能超过一个上限，认为是65535句柄

*   gdi 句柄、设备上下文和绘图对象，如位图和画笔等。超出配额，它受与 user32 句柄相同的硬上限。

当程序消耗三个配额限制之一时，它总是会失败。但如果其他进程消耗大量 user32 或 gdi 对象或内核内存池处于压力之下，则可能会提前失败。

明智的做法是不记录仍然可用的句柄数量，您无法找出，而是记录您已经消耗了多少句柄。您可以调用 GetGuiResources() 来跟踪使用的 user32 和 gdi 句柄的数量。GetProcessHandleCount() 返回您的进程正在使用的内核句柄数。

但是，到目前为止，最简单的方法是使用任务管理器的进程选项卡，而不是编写代码。使用查看 + 选择列，在 Windows 8 上右键单击列标题，然后勾选句柄、用户对象和 GDI 对象。您将在程序执行时获得三组句柄类型的句柄计数的实时更新，并在调试代码时获得即时反馈。

# actionscript-3 - 多个计时器有帮助！闪存 as3

> ID：15271265
> 
> 赞同：0
> 
> 时间：2013-03-07T12:28:40.493
> 
> 标签：actionscript-3, flash, timer

我正在做一个问答游戏，涉及 5 个问题。我为第一个问题设置了一个计时器，所以当用户在 10 秒内没有回答问题时，他们将转到问题 2（另一个框架）。问题 1 计时器工作正常，我如何让问题 2 与问题 1 完全相同？我尝试将相同的代码添加到问题 2 中，但它给了我一个错误。
谢谢

我的代码：

```
stop();

var count:Number = 10;
var myTimer:Timer=new Timer(1000,2);
myTimer.addEventListener(TimerEvent.TIMER, countdown);
myTimer.start();

function countdown(event:TimerEvent):void {
count00.text=String((count)-myTimer.currentCount); 

if(count00.text == "0"){
gotoAndStop(85);
}
}

myTimer.stop();
myTimer.removeEventListener(TimerEvent.TIMER, countdown); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:37:20.180

首先，您不应该在多帧上执行此操作。但那是一个不同的讨论。

您应该停止计时器，移除侦听器并移至 onComplete 事件中的下一帧。

```
stop();

var count:Number = 10;
var myTimer:Timer=new Timer(1000,count);// this should be the total count
myTimer.addEventListener(TimerEvent.TIMER, countdown);
myTimer.addEventListener(TimeEvent.TIMER_COMPLETE, timerDone);
myTimer.start();

function countdown(event:TimerEvent):void {
    count00.text=String((count)-event.currentTarget.currentCount);//get currentCount from event 
}

function timerDone(e:TimerEvent):void{
    trace("Timer finishing!");
    myTimer.stop();
    myTimer.removeEventListener(TimerEvent.TIMER, countdown);
    gotoAndStop(85);
} 
```

顺便提一句。您将计时器的 repeatCount 设置为 2，`new Timer(1000,2);`这会给您 2 秒倒计时，没有太多时间提问；）应该是`count`

还必须有一个动态文本字段，其实例名称`count00`与代码在同一帧（不是图层）中！

请始终在问题中包含相关的错误消息！

# soa - 使用 Fabric3 执行服务拦截

> ID：15271266
> 
> 赞同：0
> 
> 时间：2013-03-07T12:28:43.147
> 
> 标签：soa, sca, apache-tuscany

我正在使用 Fabric3（*服务组件架构框架*）进行 POC，并且想知道是否有一些本地方法可以在我的服务中进行拦截？类似于`@Interceptors`EJB 或 Web 环境的过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:28:42.373

根据您的要求，有几种方法可以做到这一点。一种是通过绑定处理程序，另一种是通过编写自定义拦截器。

我们很乐意为您提供进一步的帮助并引导您完成此过程。您能否将您的要求的简要描述发布到用户列表中？这样做的说明可以在我们的支持页面上找到：http: [//fabric3.org/support.html](http://fabric3.org/support.html)

谢谢，吉姆

# binding - monotouch中的绑定和ios库，重复符号错误

> ID：15271268
> 
> 赞同：0
> 
> 时间：2013-03-07T12:28:50.330
> 
> 标签：binding, xamarin, xamarin.ios

我正在尝试在我的 monotouch 应用程序中绑定本机 iOS 库，但我不断收到此错误：

```
duplicate symbol _timeoutReached3 in:
/var/folders/3j/zf4d4nbd5v33y_7pqtfm25mh0000gn/T/tmp168daf95.tmp/VCMF.a(VFIPrinter.o)
/var/folders/3j/zf4d4nbd5v33y_7pqtfm25mh0000gn/T/tmp168daf95.tmp/VCMF.a(VFIBTBridge.o)
ld: 1 duplicate symbol for architecture i386 
```

我完全没有想法，所以任何人都经历过类似的事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:58:01.280

由于它在您的 .a （VFIPrinter 和 VFIBTBridge）中引用不同的文件，我猜您确实编译了重复的符号。这是您编写的库吗？这两个文件包含的标头中是否有 timeoutReached3 ？将其切换为 extern 并将其粘贴到 c 文件之一。

# android - Android：将AsyncTask回调到片段（不是活动）

> ID：15271271
> 
> 赞同：8
> 
> 时间：2013-03-07T12:28:58.617
> 
> 标签：android, callback, android-asynctask

我正在尝试在 AsyncTask 和 Fragment 之间实现回调，但找不到正确的信息。问题是所有回调实现都在活动和异步任务之间，但我需要在片段和异步任务之间。有人可以给我一个小的工作示例，如何在没有活动的情况下实现它。我的动作结构：片段调用 DialogFragment -> 选择一些东西并将服务器请求发送到异步任务 -> 异步任务处理所有内容并更新视图和一些变量。我的主要问题是我在 onCreate 中只调用了一次 prepareData() ，当我在其他片段之间行走并返回时，我看到了旧数据。也就是说只更新asynctask的onPost中的view是不够的。最好有回调来更新整个变量。

```
public class TermsAndConditionsFragment extends SherlockFragment implements OnClickListener, OnTouchListener, OnItemClickListener, onTaskListener {
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    fm = getSherlockActivity().getSupportFragmentManager();

    prepareData();
}

public void prepareData() {
     termsAndConditionsM = new TermsAndConditionsManager(getSherlockActivity());
    termsAndConditions = termsAndConditionsM.getTermsAndConditions();

    if (termsAndConditions != null) {
                 int totalPayments = Integer.valueOf(termsAndConditions.get(ServerAPI.NO_OF_PAYMENTS));
        if (totalPayments > 0) {
            paymentsData = termsAndConditionsM.getpayments();

            if (paymentsData != null) {

                payments = new ArrayList<Payment>();

                for (int i = 1; i <= totalPayments; i++) {
                    paymentValues = new Payment();
                    paymentValues.setPaymentID(Integer.valueOf(paymentsData.get(ServerAPI.PAYMENT_NO + "_" + i)));
                    paymentValues.setPaymentDate(paymentsData.get(ServerAPI.PAYMENT_DATE + "_" + i));
                    paymentValues.setPaymentTotalAmount(paymentsData.get(ServerAPI.PAYMENT_TOTAL + "_" + i));
                    payments.add(paymentValues);
                }
            }
        }
    }
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    rootView = init(inflater, container);

    if (payments != null || termsAndConditions != null)
        updateTermsAndConditionsView();

    return rootView;
}

private View init(LayoutInflater inflater, ViewGroup container) {
    rootView = inflater.inflate(R.layout.fragment_terms_and_conditions, container, false);

    ...
    return rootView;
}

public void updateTermsAndConditionsView() {
    etHowMuch.setText("£" + termsAndConditions.get(ServerAPI.AMOUNT_OF_CREDIT));
    etForHowLong.setText(Helpers.ConvertDays2Date(Integer.valueOf(termsAndConditions.get(ServerAPI.TERM_OF_AGREEMENT_IN_DAYS))));

    PaymentAdapter adapter = new PaymentAdapter(getSherlockActivity(), R.layout.custom_loan_item, payments);
    lvPayments.setAdapter(adapter);

    tvNoOfPayments.setText(termsAndConditions.get(ServerAPI.NO_OF_PAYMENTS));
    tvFirstPayment.setText(termsAndConditions.get(ServerAPI.FIRST_PAYMENT_DATE));
    tvTotalRepayable.setText("£" + termsAndConditions.get(ServerAPI.TOTAL_REPAYABLE));
}

@Override
public void onClick(View v) {
    ft = fm.beginTransaction();

    howMuch = etHowMuch.getText().toString();
    forHowLong = etForHowLong.getText().toString();

    switch (v.getId()) {
        case R.id.etHowMuch:
            f = new NumberPaymentsPickerFragment();
            args = new Bundle();
            args.putInt(Const.HOW_MUCH, Integer.valueOf(howMuch.replace("£", "")));
            args.putDouble(ServerAPI.PAYMENT_STEP, Const.PAYMENT_STEP);
            args.putString(Const.STATE, ServerAPI.TERMS_AND_CONDITIONS);
            f.setArguments(args);
            f.setTargetFragment(this, DIALOG_FRAGMENT);
            f.show(getActivity().getSupportFragmentManager(), Const.HOW_MUCH);
            break;
        case R.id.etForHowLong:
            f = new NumberPaymentsPickerFragment();
            args = new Bundle();
            args.putInt(Const.FOR_HOW_LONG, Integer.valueOf(Helpers.ConvertDate2Days(forHowLong)));
            args.putDouble(ServerAPI.PAYMENT_STEP, Const.PAYMENT_STEP);
            args.putString(Const.STATE, ServerAPI.TERMS_AND_CONDITIONS);
            f.setArguments(args);
            f.setTargetFragment(this, DIALOG_FRAGMENT);
            f.show(getActivity().getSupportFragmentManager(), Const.FOR_HOW_LONG);
            break;
        case R.id.tvPersonalDetails:
            sfm.saveCurFragment(ServerAPI.PERSONAL_DETAILS, 0);
            ft.replace(android.R.id.content, new PersonalDetailsFragment(), ServerAPI.PERSONAL_DETAILS).addToBackStack(null).commit();
            break;
        case R.id.tvAgreementDetails:
            sfm.saveCurFragment(ServerAPI.AGREEMENT_DETAILS, 0);
            ft.replace(android.R.id.content, new AgreementDetailsFragment(), ServerAPI.AGREEMENT_DETAILS).addToBackStack(null).commit();
            break;
        case R.id.bApply:

            break;
    }

@Override
public void onUpdateData() {
    Log.d(TAG, "Update data");

}

} 
```

对话片段：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle args = getArguments();

    ...
}

public Dialog onCreateDialog(Bundle savedInstanceState) {

    ...

        return createDialog(v, R.string.for_how_long, etHowMuch, etForHowLong, etPromotionCode);
    }
    return null;
}
private Dialog createDialog(View view, int titleResID, final EditText howMuchField, final EditText forHowLongField, final EditText promotionCodeField) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle(titleResID);
    builder.setView(view);
    builder.setPositiveButton(R.string.set, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {

            doShowProgress();

        }

        private void doShowProgress() {

            ExecuteServerTaskBackground task = new
                    ExecuteServerTaskBackground(getActivity());
                task.action = ServerAPI.GET_TERMS_AND_CONDITIONS;
                onTaskListener listener = new onTaskListener() {

                @Override
                public void onUpdateData() {
                    Log.d(TAG, "Updaaate");

                }
            };
            task.setListener(listener);
            task.args = args;
            task.execute();
        }

    }).setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
        }
    });
    return builder.create();
} 
```

异步任务：

```
 onTaskListener mListener;

public interface onTaskListener {
    void onUpdateData();
}

public void setListener(onTaskListener listener){
  mListener = listener;
}
public ExecuteServerTaskBackground(Activity activity) {
    this.mActivity = activity;
    this.mContext = activity.getApplicationContext();
}

@Override
protected void onPreExecute() {
    pb = (ProgressBar) mActivity.findViewById(R.id.progressBar1);
    pb.setVisibility(View.VISIBLE);
}

@Override
protected Void doInBackground(Void... params) {
    ServerAPI server = new ServerAPI(mContext);
    if (!args.isEmpty())
        server.serverRequest(action, args);
    else
        server.serverRequest(action, null);
    return null;
}

@Override
protected void onPostExecute(Void result) {
 mListener.onUpdateData();

//There is I just update view but how to update whole variables throughtout callback?        
//                tvNoOfPayments = (TextView) mActivity.findViewById(R.id.tvNoOfPaymentsValue);
//                tvFirstPayment = (TextView) mActivity.findViewById(R.id.tvFirstPaymentValue);
//                tvTotalRepayable = (TextView) mActivity.findViewById(R.id.tvTotalRepayableValue);
//
//                lvPayments = (ListView) mActivity.findViewById(R.id.lvData);
//
//                termsConditionsM = new TermsAndConditionsManager(mContext);
//
//                termsAndConditions = termsConditionsM.getTermsAndConditions();
//
//                int totalPayments = Integer.valueOf(termsAndConditions.get(ServerAPI.NO_OF_PAYMENTS));
//
//                if (totalPayments > 0) {
//                    if (termsAndConditions != null) {
//                        tvNoOfPayments.setText(termsAndConditions.get(ServerAPI.NO_OF_PAYMENTS));
//                        tvFirstPayment.setText(termsAndConditions.get(ServerAPI.FIRST_PAYMENT_DATE));
//                        tvTotalRepayable.setText("£" + termsAndConditions.get(ServerAPI.TOTAL_REPAYABLE));
//                    }
//
//                    paymentsData = termsConditionsM.getpayments();
//
//                    if (paymentsData != null) {
//                        Log.d(TAG, paymentsData.toString());
//
//                        payments = new ArrayList<Payment>();
//
//                        for (int i = 1; i <= totalPayments; i++) {
//                            paymentValues = new Payment();
//                            paymentValues.setPaymentID(Integer.valueOf(paymentsData.get(ServerAPI.PAYMENT_NO + "_" + i)));
//                            paymentValues.setPaymentDate(paymentsData.get(ServerAPI.PAYMENT_DATE + "_" + i));
//                            paymentValues.setPaymentTotalAmount(paymentsData.get(ServerAPI.PAYMENT_TOTAL + "_" + i));
//                            payments.add(paymentValues);
//                        }
//
//                        PaymentAdapter adapter = new PaymentAdapter(mContext, R.layout.custom_loan_item, payments);
//                        lvPayments.setAdapter(adapter);
//                    }
    //             

   }

    pb.setVisibility(View.GONE);
    super.onPostExecute(result);
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-07T13:23:44.870

在不考虑您的代码的情况下，我将发布最重要的功能回调。

* * *

**测试片段：**

```
public class TestFragment extends Fragment {

    /* Skipping most code and I will only show you the most essential. */    
    private void methodThatStartsTheAsyncTask() {
        TestAsyncTask testAsyncTask = new TestAsyncTask(new FragmentCallback() {

            @Override
            public void onTaskDone() {
                methodThatDoesSomethingWhenTaskIsDone();
            }
        });

        testAsyncTask.execute();
    }

    private void methodThatDoesSomethingWhenTaskIsDone() {
        /* Magic! */
    }

    public interface FragmentCallback {
        public void onTaskDone();
    }
} 
```

* * *

**测试异步任务：**

```
public class TestAsyncTask extends AsyncTask<Void, Void, Void> {
    private FragmentCallback mFragmentCallback;

    public TestAsyncTask(FragmentCallback fragmentCallback) {
        mFragmentCallback = fragmentCallback;
    }

    @Override
    protected Void doInBackground(Void... params) {
        /* Do your thing. */
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        mFragmentCallback.onTaskDone();
    }
} 
```

# pthreads - 如何将同步阻塞共享内存模型代码转换为在线程池上运行的异步协程？

> ID：15271278
> 
> 赞同：0
> 
> 时间：2013-03-07T12:29:20.473
> 
> 标签：pthreads, threadpool, green-threads

虽然有很多解决方案部分匹配我的问题，但我想知道是否存在完全匹配。由于这些部分占据了搜索结果，因此很难找到完整的解决方案。当语言不支持协程时，这应该是一个运行时框架和（可选）源语言代码所需的转换。

有像 lthread 这样的库具有 lthread_cond_wait() API，但每个 lthread 都由单个 pthread 限制。我希望轻量级线程能够在多个 pthread 中运行。它们应该由线程池任意选择。单线程调度程序或全局锁调度程序不匹配。我认为我们可以做得更好。

lthreads 也不是一个选项，因为它既不涉及源代码转换，也不像 protothreads 那样避免它。

几个绿色线程运行时（Erlang、Limbo）不匹配，因为它们仅限于 CSP（通信顺序进程）模型，但我也希望共享内存模型同步原语：互斥锁、条件变量、rwlocks。

转型包括：

1.  将堆栈上下文转换为堆中的对象
2.  将互斥调用转换为在线程池和发布-订阅上操作禁用和激活作业
3.  条件变量也应该转换为发布-订阅关系
4.  有艾达式的约会会很好

由于发布-订阅机制中的潜在死锁而没有使用全局锁或单个调度程序线程，我未能进行直接的运行时实现，但我仍然认为这是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:54:06.983

免责声明：lthread作者。

您可以启动多个 pthread 并在每个 pthread 中运行一个 lthread 调度程序（这是通过在 pthread 函数中调用 lthread_run() 自动完成的）。这样每个 pthread 将运行一堆 lthread。

# ruby-on-rails - Ruby => 如何匹配包含#和数字示例的字符串 #56

> ID：15271291
> 
> 赞同：0
> 
> 时间：2013-03-07T12:29:51.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Ruby => 如何匹配包含#和数字示例的字符串 #56

例如，我有一个字符串“我的卷号是 #256767”

我应该匹配字符串是否有 # 符号和旁边的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:32:48.930

使用 Ruby 的[`match`](http://www.ruby-doc.org/core-2.0/Regexp.html#method-i-match)

```
!"my roll number is #256767".match(/#\d+/).nil? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:31:29.977

使用类似的东西：

```
m = s.match(/^.*(#\d+).*$/)
unless m.nil?
  puts m[1]
end 
```

# jquery - 如何在附加该子元素时将现有元素属性添加到子元素？

> ID：15271292
> 
> 赞同：0
> 
> 时间：2013-03-07T12:29:57.837
> 
> 标签：jquery

这里是要附加到此 div 的 HTML 跨度

```
<div class="new">
    <a value="03" id="a1"></a>
    <span></span>
</div> 
```

ul 包含要显示的元素

```
<ul id="ad1" class="drpdwn">
    <li value="1">
        <input type="checkbox" value="2" id="ck1" name="Drop Shadows"/>
        <span id="sp1"> Drop Shadows</span>
    <li>
        <input type="checkbox" value="2" id="ck2" name="Reflections">
        <span id="sp2">Reflections</span>
    </li>
    <li><a id="ck3" name="General Spotting" alt="1"/>General Spotting</a></li>
    <li><a id="ck4" name="Gene Spotting" alt="1"/> Spotting</a></li>
</ul> 
```

这里是 jQuery 代码

```
$('#ck2').click(function () {
    option = $('#sp2').text(); 
```

这里 id ck2 th attrbute 设置为 var ot

```
ot=$('#ck2').attr("value");
    alert(ot); 
```

在这里，我将 id ck2'th attr 设置为附加的 span。帮帮我。！

```
 $('.new span').append('<span id="span1"></span>').attr(ot);

  $('#span1').html(option);
  oc=$('#span1').attr("name" ,"value");
  alert(oc);
  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:51:45.697

不知道你要什么......但假设这是你想要的

```
$('.new span').append('<span id="span1" value="'+ot +'"></span>'); 
```

这将附加属性 id 为 span1 和 value 为 2 的 span .. 就像你可以为 name 做的那样。

# python - 在 iter 上并行化循环

> ID：15271293
> 
> 赞同：4
> 
> 时间：2013-03-07T12:30:00.890
> 
> 标签：python, multithreading, numpy, multiprocessing, itertools

我的代码存在性能问题。步骤`# IIII`消耗数小时的时间。我以前曾经实现过 itertools.prodct，但多亏了一个用户，我不再这样做 `pro_data = product(array_b,array_a)`了。这帮助我解决了内存问题，但仍然非常耗时。我想用多线程或多进程并行化它，无论你能提出什么建议，我都很感激。

解释。我有两个数组，其中包含粒子的 x 和 y 值。对于每个粒子（由两个坐标定义），我想用另一个计算一个函数。对于组合，我使用 itertools.product 方法并循环遍历每个粒子。我总共运行了 50000 多个粒子，所以我有 N*N/2 个组合要计算。

提前致谢

```
import numpy as np
import matplotlib.pyplot as plt
from itertools import product,combinations_with_replacement

def func(ar1,ar2,ar3,ar4): #example func that takes four arguments
  return (ar1*ar2**22+np.sin(ar3)+ar4)

def newdist(a):
  return func(a[0][0],a[0][1],a[1][0],a[1][1])    

x_edges = np.logspace(-3,1, num=25) #prepare x-axis for histogram 

x_mean = 10**((np.log10(x_edges[:-1])+np.log10(x_edges[1:]))/2)
x_width=x_edges[1:]-x_edges[:-1]

hist_data=np.zeros([len(x_edges)-1])

array1=np.random.uniform(0.,10.,100)
array2=np.random.uniform(0.,10.,100)

array_a = np.dstack((array1,array1))[0]
array_b = np.dstack((array2,array2))[0]
# IIII
for i in product(array_a,array_b):
  (result,bins) = np.histogram(newdist(i),bins=x_edges)
  hist_data+=result

hist_data = np.array(map(float, hist_data))
plt.bar(x_mean,hist_data,width=x_width,color='r')
plt.show() 
```

-----编辑----- 我现在使用了这段代码：

```
def mp_dist(array_a,array_b, d, bins): #d chunks AND processes
  def worker(array_ab, out_q):
      """ push result in queue """
      outdict = {}
      outdict = vec_chunk(array_ab, bins)
      out_q.put(outdict)
  out_q = mp.Queue()
  a = np.swapaxes(array_a, 0 ,1)
  b = np.swapaxes(array_b, 0 ,1)
  array_size_a=len(array_a)-(len(array_a)%d)
  array_size_b=len(array_b)-(len(array_b)%d)
  a_chunk = array_size_a / d
  b_chunk = array_size_b / d
  procs = []
  #prepare arrays for mp
  array_ab = np.empty((4, a_chunk, b_chunk))
  for j in xrange(d):
    for k in xrange(d):
      array_ab[[0, 1]] = a[:, a_chunk * j:a_chunk * (j + 1), None]
      array_ab[[2, 3]] = b[:, None, b_chunk * k:b_chunk * (k + 1)]
      p = mp.Process(target=worker, args=(array_ab, out_q))
      procs.append(p)
      p.start()
  resultarray = np.empty(len(bins)-1)
  for i in range(d):
      resultarray+=out_q.get() 
  # Wait for all worker processes to finish
  for pro in procs:
      pro.join()
  print resultarray
  return resultarray 
```

这里的问题是我无法控制进程的数量。我怎样才能使用 a`mp.Pool()`代替？比

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:07:09.103

首先，让我们看一下问题的直接矢量化。我有一种感觉，您希望您的`array_a`和`array_b`完全相同，即粒子的坐标，但我在这里将它们分开。

我已将您的代码转换为函数，以使计时更容易：

```
def IIII(array_a, array_b, bins) :
    hist_data=np.zeros([len(bins)-1])
    for i in product(array_a,array_b):
        (result,bins) = np.histogram(newdist(i), bins=bins)
        hist_data+=result
    hist_data = np.array(map(float, hist_data))
    return hist_data 
```

顺便说一句，您可以以不那么复杂的方式生成样本数据，如下所示：

```
n = 100
array_a = np.random.uniform(0, 10, size=(n, 2))
array_b = np.random.uniform(0, 10, size=(n, 2)) 
```

所以首先我们需要对你的`func`. 我已经这样做了，所以它可以采取任何`array`形状`(4, ...)`。为了节省内存，它在原地进行计算，并返回第一个平面，即`array[0]`.

```
def func_vectorized(a) :
    a[1] **= 22
    np.sin(a[2], out=a[2])
    a[0] *= a[1]
    a[0] += a[2]
    a[0] += a[3]
    return a[0] 
```

有了这个函数，我们可以编写一个向量化的版本`IIII`：

```
def IIII_vec(array_a, array_b, bins) :
    array_ab = np.empty((4, len(array_a), len(array_b)))
    a = np.swapaxes(array_a, 0 ,1)
    b = np.swapaxes(array_b, 0 ,1)
    array_ab[[0, 1]] = a[:, :, None]
    array_ab[[2, 3]] = b[:, None, :]
    newdist = func_vectorized(array_ab)
    hist, _ = np.histogram(newdist, bins=bins)
    return hist 
```

有了`n = 100`积分，它们都返回相同的结果：

```
In [2]: h1 = IIII(array_a, array_b, x_edges)

In [3]: h2 = IIII_bis(array_a, array_b, x_edges)

In [4]: np.testing.assert_almost_equal(h1, h2) 
```

但时间差异已经非常相关：

```
In [5]: %timeit IIII(array_a, array_b, x_edges)
1 loops, best of 3: 654 ms per loop

In [6]: %timeit IIII_vec(array_a, array_b, x_edges)
100 loops, best of 3: 2.08 ms per loop 
```

300 倍加速！如果你用更长的样本数据再试一次`n = 1000`，你会发现它们的缩放比例都一样差，因为`n**2`300x 保持在那里：

```
In [10]: %timeit IIII(array_a, array_b, x_edges)
1 loops, best of 3: 68.2 s per loop

In [11]: %timeit IIII_bis(array_a, array_b, x_edges)
1 loops, best of 3: 229 ms per loop 
```

所以你仍然在寻找一个好的 10 分钟。处理时间，与您当前的解决方案所需的 2 天以上相比，这并不算多。

当然，为了让事情变得如此美好，您需要将一`(4, 50000, 50000)`组浮点数放入内存中，这是我的系统无法处理的。但是您仍然可以通过分块处理来保持相对较快的速度。以下版本`IIII_vec`将每个数组分成`d`块。如所写，数组的长度应能被 整除`d`。克服这个限制并不难，但它会混淆真正的目的：

```
def IIII_vec_bis(array_a, array_b, bins, d=1) :
    a = np.swapaxes(array_a, 0 ,1)
    b = np.swapaxes(array_b, 0 ,1)
    a_chunk = len(array_a) // d
    b_chunk = len(array_b) // d
    array_ab = np.empty((4, a_chunk, b_chunk))
    hist_data = np.zeros((len(bins) - 1,))
    for j in xrange(d) :
        for k in xrange(d) :
            array_ab[[0, 1]] = a[:, a_chunk * j:a_chunk * (j + 1), None]
            array_ab[[2, 3]] = b[:, None, b_chunk * k:b_chunk * (k + 1)]
            newdist = func_vectorized(array_ab)
            hist, _ = np.histogram(newdist, bins=bins)
            hist_data += hist
    return hist_data 
```

首先，让我们检查它是否真的有效：

```
In [4]: h1 = IIII_vec(array_a, array_b, x_edges)

In [5]: h2 = IIII_vec_bis(array_a, array_b, x_edges, d=10)

In [6]: np.testing.assert_almost_equal(h1, h2) 
```

现在有些时间。与`n = 100`：

```
In [7]: %timeit IIII_vec(array_a, array_b, x_edges)
100 loops, best of 3: 2.02 ms per loop

In [8]: %timeit IIII_vec_bis(array_a, array_b, x_edges, d=10)
100 loops, best of 3: 12 ms per loop 
```

但是当你开始不得不在内存中拥有一个越来越大的数组时，分块执行它开始得到回报。与`n = 1000`：

```
In [12]: %timeit IIII_vec(array_a, array_b, x_edges)
1 loops, best of 3: 223 ms per loop

In [13]: %timeit IIII_vec_bis(array_a, array_b, x_edges, d=10)
1 loops, best of 3: 208 ms per loop 
```

随着`n = 10000`我不能再调用`IIII_vec`没有*数组是太大*的错误，但矮胖的版本仍在运行：

```
In [18]: %timeit IIII_vec_bis(array_a, array_b, x_edges, d=10)
1 loops, best of 3: 21.8 s per loop 
```

只是为了表明它可以完成，我已经运行过一次`n = 50000`：

```
In [23]: %timeit -n1 -r1 IIII_vec_bis(array_a, array_b, x_edges, d=50)
1 loops, best of 1: 543 s per loop 
```

所以一个很好的 9 分钟的数字运算，考虑到它已经计算了 25 亿次交互，这并不是那么糟糕。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T14:25:02.690

使用向量化的 numpy 操作。通过使用创建参数，将 for 循环替换为`product()`单个调用。`newdist()`[`meshgrid()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html)

为了将问题计算`newdist()`在 的切片上并行化`array_a`，`array_b`这些切片对应于 的子块`meshgrid()`。[这是一个使用 slices 和 multiprocessing 的示例](https://stackoverflow.com/a/7908612/4279)。

这是演示步骤的另一个示例：python循环->矢量化numpy版本->并行：

```
#!/usr/bin/env python
from __future__ import division
import math
import multiprocessing as mp
import numpy as np

try:
    from itertools import izip as zip
except ImportError:
    zip = zip # Python 3

def pi_loop(x, y, npoints):
    """Compute pi using Monte-Carlo method."""
    #  note: the method converges to pi very slowly.
    return 4 * sum(1 for xx, yy in zip(x, y) if (xx**2 + yy**2) < 1) / npoints

def pi_vectorized(x, y, npoints):
    return 4 * ((x**2 + y**2) < 1).sum() / npoints # or just .mean()

def mp_init(x_shared, y_shared):
    global mp_x, mp_y
    mp_x, mp_y = map(np.frombuffer, [x_shared, y_shared]) # no copy

def mp_pi(args):
    # perform computations on slices of mp_x, mp_y
    start, end = args
    x = mp_x[start:end] # no copy
    y = mp_y[start:end]
    return ((x**2 + y**2) < 1).sum()

def pi_parallel(x, y, npoints):
    # compute pi using multiple processes
    pool = mp.Pool(initializer=mp_init, initargs=[x, y])
    step = 100000
    slices = ((start, start + step) for start in range(0, npoints, step))
    return 4 * sum(pool.imap_unordered(mp_pi, slices)) / npoints

def main():
    npoints = 1000000

    # create shared arrays
    x_sh, y_sh = [mp.RawArray('d', npoints) for _ in range(2)]

    # initialize arrays
    x, y = map(np.frombuffer, [x_sh, y_sh])
    x[:] = np.random.uniform(size=npoints)
    y[:] = np.random.uniform(size=npoints)

    for f, a, b in [(pi_loop, x, y), 
                    (pi_vectorized, x, y), 
                    (pi_parallel, x_sh, y_sh)]:
        pi = f(a, b, npoints)
        precision = int(math.floor(math.log10(npoints)) / 2 - 1 + 0.5)
        print("%.*f %.1e" % (precision + 1, pi, abs(pi - math.pi)))

if __name__=="__main__":
    main() 
```

时间表现`npoints = 10_000_000`：

```
pi_loop pi_vectorized pi_parallel 
   32.6         0.159       0.069 # seconds 
```

它表明主要的性能优势在于将 python 循环转换为其矢量化的 numpy 模拟。

# c# - SMTP 电子邮件不起作用，5.7.1 客户端无权作为此发件人发送

> ID：15271297
> 
> 赞同：-2
> 
> 时间：2013-03-07T12:30:11.603
> 
> 标签：c#, email, smtp, gmail, exchange-server

早上，我不明白为什么这段代码不起作用！谢谢，等待遮阳篷:)

```
protected void Enviar_Click(object sender, EventArgs e)
    {

        var pass = new NetworkCredential();
        pass.UserName = "myuser@gmail.com";
        pass.Password = "password";

        var smtpClient = new SmtpClient();

        smtpClient.Port = 587;
        smtpClient.Host = "smtp.gmail.com";
        smtpClient.Credentials = pass;
        smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
        smtpClient.EnableSsl = true;
        smtpClient.UseDefaultCredentials = false;

        var email = new MailMessage(pass.UserName, "myname@mywork.com.br", txtsubject.Text,
                                    "name   :  " + txtname.Text + "menssage  : " + txtMessage.Text);

        SMTP.Enviar(email);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:35:43.690

看起来您需要在您的 gmail 帐户中启用 pop3 - 查看 Gmail 的关于 Gmail 的 POP 访问的帮助部分，了解有关使用您的电子邮件程序进行设置的具体说明。如果您只想使用 SMTP 服务器，请跳过 POP 位，只设置 SMTP 以使用您现有的电子邮件帐户。

# web-applications - HTML5 应用程序缓存更新问题（来自浏览器缓存的更新）

> ID：15271298
> 
> 赞同：1
> 
> 时间：2013-03-07T12:30:23.217
> 
> 标签：web-applications, http-headers, html5-appcache

在这个问题上，我一直在安静地凝视一段时间，但没有任何运气，希望有人能提供帮助。

在开发具有应用程序缓存的 Web 应用程序时，这些问题涉及应用程序缓存、浏览器缓存和代理。

**关于网络应用程序：**

该网络应用程序显示高分辨率图像并允许用户在它们之间导航。为了使交互流畅，所有的图像都使用 ajax 预加载（加载是半智能的，所以它会在加载时显示图像，然后在后台继续加载其余的图像）。除此之外，整个网络应用程序都缓存在应用程序缓存中（使用清单文件），以便在 iPad 上离线访问。此外，这将提高其他浏览器的一般性能。

**问题：**

当清单文件更新时，浏览器（主要在 OSX 上的 Chrome 和 Firefox 中测试）从浏览器缓存中加载文件，而不是从服务器请求它们。有时，浏览器缓存已过期，请求将转到实际服务器或代理。通常这会导致网络应用程序没有更新。

我们试图在一个缓存控制头：

no-cache, must-revalidate（在 Firefox 中运行需要无缓存）。

这非常适合支持应用程序缓存的浏览器，强制它们在请求中包含这两个标头：

*   如果无匹配
*   If-Modified-Since

当从清单文件请求新资产时。但是，在不支持应用程序缓存的浏览器或被告知不要通过清单文件缓存任何内容的浏览器中，没有文件会缓存在常规浏览器缓存中。然后，这些浏览器将在显示图像时再次请求图像（不使用已通过 ajax 调用下载的缓存图像）。服务器会以 304 响应，所以问题还不错，但不是最佳解决方案。

**我想要什么：**

我希望在应用程序缓存中缓存文件的浏览器包含两个标头：

*   如果无匹配
*   If-Modified-Since

当他们看到清单文件已更新时。对于不使用应用程序缓存的浏览器，我希望它像往常一样缓存文件，而不是在同一个会话中向服务器发送多个请求。

这是可能的，还是有其他解决方案？

谢谢你的帮助。

# javascript - 如何获得类型骨干模型？

> ID：15271304
> 
> 赞同：6
> 
> 时间：2013-03-07T12:30:41.307
> 
> 标签：javascript, backbone.js

我现在正在学习**骨干**。我有一个这样的问题：我能得到`type` `backbone model`. Backbone 具有类似**javascript**或**java**`typeof`的功能。像那样：**`instanceof`**

 ****```
getModelTypeot: function(model) {
    // return model type 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:58:22.940

在 JavaScript 中，每个对象都有一个对其构造函数（用于创建对象的函数）的引用。它可以作为[`obj.constructor`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/constructor).

如果你有一个 Backbone.js 模型，它以这种方式从 Backbone.Model 扩展而来： ，你可以使用:`var YourModel = Backbone.Model.extend({});`创建一个对象。`new``var yourModel = new YourModel();`

然后，您可以使用`yourModel.constructor`：

```
yourModel.constructor === YourModel // true 
```

或者[`instanceof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)：

```
yourModel instanceof YourModel // true
yourModel instanceof Backbone.Model // true 
```****

# cucumber - ChildProcess::TimeoutError：运行黄瓜功能时，进程在 90 秒后仍处于活动状态

> ID：15271305
> 
> 赞同：2
> 
> 时间：2013-03-07T12:30:42.613
> 
> 标签：cucumber, selenium-webdriver

当我尝试在我的 ci-server 上运行 Cucumber 功能时。它失败并出现以下错误

```
ChildProcess::TimeoutError: process still alive after 90 seconds 
```

它在我的本地机器上运行良好。

关于 gems 和浏览器，我使用 selenium-webdriver(2.30.0)、capybara(2.0.2) 和 cucumber(1.2.2) 和 Firefox 19.0

请帮我。谢谢

# java - 在java中将String转换为整数数组

> ID：15271306
> 
> 赞同：-2
> 
> 时间：2013-03-07T12:30:44.287
> 
> 标签：java, arrays, string

概述 Java 程序如何将诸如“1,2,3,4,5”之类的字符串转换为数组 ({1, 2, 3, 4,5})

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:39:20.257

来自 zvzdhk：

```
String[] array = "1,2,3,4,5".split(","); 
```

然后，解析你的整数：

```
int[] ints = new int[array.length];
for(int i=0; i<array.length; i++)
{
    try {
        ints[i] = Integer.parseInt(array[i]);           
    } catch (NumberFormatException nfe) {
        //Not an integer 
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:32:30.197

试试这个：

```
String[] array = "1,2,3,4,5".split(",");
int[] result = new result[array.length];
for (int i = 0; i < array.length; i++) {
    try {
         result[i] = Integer.parseInt(array[i]);
    } catch (NumberFormatException nfe) {};
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:32:30.540

使用 StringTokenizer 它将用逗号分割字符串，然后将这些值/标记放入整数数组中。

```
public static int[] getIntegers(String numbers) {
    StringTokenizer st = new StringTokenizer(numbers, ",");
    int[] intArr = new int[st.countTokens()];
    int i = 0;
    while (st.hasMoreElements()) {
        intArr[i] = Integer.parseInt((String) st.nextElement());
        i++;
    }
    return intArr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:39:33.153

```
String [] str = "1,2,3,4,5".split(",");
int arrayInt[] = new int[str.length];
for (int i = 0; i < str.length; i++) 
    arrayInt[i]=Integer.valueOf(str[i]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T21:40:13.870

使用 Guava，您可以在一行中做到这一点：

```
int[] array = Ints.toArray(Lists.newArrayList(Ints.stringConverter().convertAll(Splitter.on(",").split("1,2,3,4,5")))); 
```

左右（如果你不需要数组）：

```
Iterable<Integer> ints = Ints.stringConverter().convertAll(Splitter.on(",").split("1,2,3,4,5")); 
```

# sql - SQL 父/子 CTE 排序

> ID：15271308
> 
> 赞同：2
> 
> 时间：2013-03-07T12:30:48.157
> 
> 标签：sql, common-table-expression

我正在尝试创建一个论坛设置，您可以在其中评论特定帖子并让回复按日期顺序立即显示在父级下方。在父级之下只会有一个子级。这是示例数据集：

```
ID.ParentID.Datestamp
12.NULL.2013-03-01 1:00pm
13.NULL.2013-03-01 2:00pm
14.12.2013-03-01 2:20pm
15.12.2013-03-01 2:30pm
16.NULL.2013-03-01 3:30pm 
```

这就是我想要得到的结果：

```
12.NULL.2013-03-01 1:00pm
14.12.2013-03-01 2:20pm
15.12.2013-03-01 2:30pm
13.NULL.2013-03-01 2:00pm
16.NULL.2013-03-01 3:30pm 
```

我知道我需要某种 CTE，但这不会在适当的父级下对孩子进行排序（显然，因为没有 ORDER BY 子句）；我无法弄清楚正确的顺序。谁能提供一些见解？

```
; WITH Messages
AS 
(
    SELECT ID, ParentID, Datestamp
    FROM ForumMessages
    WHERE ParentID IS NULL

    -- Recursive
    UNION ALL 
    SELECT
        t2.ID, t2.ParentID, t2.Datestamp
    FROM
        ForumMessages AS t2
        JOIN Messages AS m ON t2.ParentID = m.ID
)

SELECT ID, ParentID, Datestamp
FROM Messages 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:02:21.703

对于单级深度，您不需要使用递归 - 尝试：

```
SELECT ID, ParentID, Datestamp
FROM ForumMessages
order by coalesce(ParentID,ID), Datestamp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:08:54.770

没有 CTE 的非常简单的方法（ISNULL 是 MSSQL 中的函数，但您不提供 RDBMS）：

```
SELECT ID, ParentID, Datestamp

FROM ForumMessages

ORDER BY ISNULL(ParentID,ID), DateStamp 
```

**[小提琴](http://www.sqlfiddle.com/#!3/24b51/1/0)**

# php - Codeigniter -db -> join() 双结果合并

> ID：15271309
> 
> 赞同：0
> 
> 时间：2013-03-07T12:30:55.920
> 
> 标签：php, sql, codeigniter

我正在构建一个 NOTE 系统。

我有多个表（注释、标签、...），并且我正在使用 $this -> db -> join(); 将标签加入到我的主要注释中。把所有东西都放在一个物体上。

当一个笔记有 2 个或更多标签时，我会得到两行或更多行只有不同的标签。其余的都是一样的。我需要将其合并为只有一个注释条目。

```
$this -> db -> where ('user', USER_ID);
$this -> db -> join ('tags', 'tags.note_id = note.id', 'inner');
$query = $this->db->get('notes'); 
```

可能还有其他与 TAGS 具有相同字符的表，例如地点。笔记可能不止一个地方。

我如何从现在开始？我想要一个带有参数的对象 NOTE，例如 note_id、note_text，并将 TAGS 加入其中，如果有多个标签，则 OBJECT PARAMETER = ARRAY 包含所有 NOTES。

1.  如何做到这一点？
2.  将它放在一个对象中真的是进一步发展的好主意吗？或者我应该去 foreach 并列出每一行的所有标签？
3.  当有人根据标签进行过滤时，我应该在哪里以及如何存储一个过滤？到目前为止，我正在使用 $this -> session;

谢谢你，雅库布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:26:08.400

您可能想使用 MySQL 的`GROUP_CONCAT()`

```
$this->db->select('n.*, GROUP_CONCAT(t.name)', false)
         ->from('notes n')->join('tags t', 't.note_id = n.id', 'inner')
         ->where('n.user', USER_ID)->get(); 
```

我用过`t.name`，但不管它是什么字段名，你明白了。

# asp.net-mvc - ViewBag 幕后花絮

> ID：15271316
> 
> 赞同：3
> 
> 时间：2013-03-07T12:31:14.867
> 
> 标签：asp.net-mvc, drop-down-menu, viewbag

这是来自 Contoso 大学在线示例的代码：

控制器：

```
 [HttpGet]
    public ActionResult Edit(int id)
    {
        Department department = departmentService.GetById(id);
        PopulateAdministratorDropDownList(department.PersonID);
        return View(department);
    }

     // POST: /Department/Edit/5
     [HttpPost]
     public ActionResult Edit(Department department)
     {
       try
        {
            if (ModelState.IsValid)
            {
             departmentService.Update(department); 
             return RedirectToAction("Index");
            }
        }
        catch (DataException)
        {
           //Log the error (add a variable name after DataException)
           ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem 
               persists, see your system administrator.");
        }
        PopulateAdministratorDropDownList(department.PersonID);
        return View(department);
     }

     private void PopulateAdministratorDropDownList(object selectedAdministrator = null)
     {
         var administrators = instructorService.GetAll().OrderBy(i => i.LastName);
         ViewBag.PersonID = new SelectList(administrators, "PersonID", "FullName",    
             selectedAdministrator);
     } 
```

看法：

```
<div class="editor-field">
        @Html.DropDownList("PersonID", String.Empty)
        @Html.ValidationMessageFor(model => model.PersonID)
</div> 
```

我的问题是：如果在视图中我们没有访问 ViewBag.PersonID（我们只是创建一个 DropDownList，它会生成一个带有 ID="PersonID" 的 html 选择列表，没有任何默认选择值），那么 ViewBag 到底是怎么回事。 PersonID 属性绑定到那个 DropDownList？幕后发生了什么？这看起来像魔术！

第二个问题是在发布数据时，我认为控制器在视图中搜索其 ID 与模型中的属性匹配的任何 html 表单字段，这就是我们在回发时获取所选 Department.PersonID 的方式，即使视图代码不不要引用模型（类似于模型 => model.PersonID）对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:58:15.737

幕后花絮：

视图正在调用`Html.DropdownList(this HtmlHelper htmlHelper, string name, string optionLabel)`，最终会调用`SelectExtensions.SelectInternal(htmlHelper, metadata, optionLabel, expression, selectList, allowMultiple, htmlAttributes1)` This 检查是否`selectList1`为 null，如果是，它会调用`SelectExtensions.GetSelectData(htmlHelper, name)`which 执行检查视图数据以查找与您传入的名称匹配的键的神奇部分。

发布：

您在这里的假设非常正确，但是除了表单字段之外，框架还将检查查询字符串和路由数据以及插入管道的任何其他 IValueProvider。

# javascript - 创建脚本以将 Google Closure 用于多个 javascript 文件

> ID：15271317
> 
> 赞同：3
> 
> 时间：2013-03-07T12:31:18.370
> 
> 标签：javascript, minify, google-closure

我需要使用 Google Closure compiler.jar 来缩小我正在从事的大型项目。我有多个 js 文件，我想将它们编译成一个 game.min.js 文件。我知道我可以使用以下内容：

```
java -jar compiler.jar --js file1.js --js file2.js --js etc, etc --js_output_file game.min.js 
```

...但是我有很多文件，据我了解，Closure 不支持添加目录并查找驻留在该目录下的所有 *.js 文件。我笨拙的谷歌搜索没有给我任何我可以用于工作的工具（或者无论如何都没有任何工作）。

有没有人发现/使用/编写了一个循环遍历目录并将所有 .js 文件吐出到单个缩小文件中的脚本？我对 php、python 等感到绝望，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:33:48.763

您可以[使用 ant 来自动使用闭包 compile](http://code.google.com/p/closure-compiler/wiki/BuildingWithAnt) r。

我分两个单独的步骤进行操作，连接然后编译：

```
<concat destfile="src/somepath/app.concat.js">
    <filelist dir="src/somepath">
        <file name="a.js" />
        <file name="b.js" />
        <file name="c.js" />
        <file name="d.js" />
    </filelist>
</concat>

<jscomp compilationLevel="simple" warning="quiet" debug="false" output="src/app.min.js">
    <sources dir="src/somepath">
        <file name="app.concat.js" />
    </sources>
</jscomp> 
```

请注意文件的顺序很重要。这就是为什么您不能简单地将文件集传递给`jscomp`任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T20:52:06.337

指定文件时也可以使用通配符。您可以将示例更改为：

```
java -jar compiler.jar --js *.js --js_output_file game.min.js 
```

这应该将当前工作目录中的所有 .js 文件合并到您指定的输出文件中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T12:47:37.950

在应用 Google Closure 编译器之前，您应该连接所有源文件。

对于所有相关任务，您可以使用 Ant 构建工具。另外，还有一个很棒的[Grunt.js](http://gruntjs.com/)项目，对 JS 来说更方便。Grunt.js有`grunt-contrib-concat`和`grunt-shell`npm 模块，第一个用于连接，另一个用于运行控制台命令。

您的 Gruntfile.js 可能如下所示：

```
module.exports = function(grunt) {
    // Project configuration.
    grunt.initConfig({
        concat: {
            js: {
                src: ['src/js/*.js'],
                dest: 'dist/pre-build.js'
            }
        },

        shell: {
            optimize: {
                command: 'google closure compiler command here',
                stdout: true
            }
        }
    });

    grunt.loadNpmTasks('grunt-shell');
    grunt.loadNpmTasks('grunt-contrib-concat');

    // Default task.
    grunt.registerTask('default', ['concat', 'shell:optimize']);
}; 
```

# php - 在 ajax 调用上填写的文本字段

> ID：15271322
> 
> 赞同：0
> 
> 时间：2013-03-07T12:31:32.777
> 
> 标签：php, ajax

我希望在我的 ajax 调用中填写 State 和 Zip_code 值。而不是将它放在 txtzip 中。我想用 txtzip 中的值填充 State 和 Zip_Code 字段

到目前为止，这是我的尝试：

```
<input type="text" name="State" id="State" placeholder="NY" value="" size="5"/>
<input type="text" name="Zip_Code" placeholder="zip code" value="" size="10" />
<div id="txtZip"><b>Person info will be listed here.</b></div> 
```

**阿贾克斯代码**

```
function showZip(str)
{
if (str=="")
  {
  document.getElementById("txtZip").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtZip").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","Getzip.php?q="+str,true);
xmlhttp.send();
} 
```

**PHP 代码**

```
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', 'root');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("Leadbook", $con);

$sql="SELECT * FROM Zip WHERE City = '".$q."'";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
  {

  $State = $row['State'];
  $Zip_Code = $row['Zip Code'];

  $info[] = array( 'State' => $State, 'Zip Code' => $Zip_Code );
  }
echo json_encode($info);

mysql_close($con);
?> 
```

**问题：**我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:32:58.237

您只需`Zip_code`在这两行中更改选择器：

```
document.getElementById("Zip_code").innerHTML="";

document.getElementById("Zip_code").innerHTML=xmlhttp.responseText; 
```

导致：

```
function showZip(str)
{
if (str=="")
  {
  document.getElementById("Zip_code").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("Zip_code").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","Getzip.php?q="+str,true);
xmlhttp.send();
} 
```

# java - 我无法在 JAR 文件中加载图像文件

> ID：15271323
> 
> 赞同：0
> 
> 时间：2013-03-07T12:31:43.640
> 
> 标签：java, embedded-resource, bufferedimage

那里可能有重复，但我似乎找不到一个来解决我的问题。

我的问题是我的 3 个图像文件中的 1 个不会从已编译的 JAR 文件中加载。我可以让它加载的唯一方法是图像就在 .jar 文件之外。

我的 3 个图像文件名：

```
Tiles.png <---One that only loads outside
Sheet.png
Level.png 
```

SpriteSheet.java <---- 抓取精灵并给出图块大小

```
public class SpriteSheet {
private BufferedImage image = null;
private BufferedImage[][] tiles = null;

public int tileSize = 0;

public SpriteSheet(String file, int tileSize) {
    this.tileSize = tileSize;
    try {
        InputStream url = SpriteSheet.class.getResourceAsStream(file);
        image = ImageIO.read(url);
    } catch (IOException e) {
        e.printStackTrace();
    }
    split();
} 
```

Level.java <---- 加载关卡并绘制地图。加载它的图像就好了。

```
public class Level {
private Map map = null;
private ArrayList<Entity> entities = new ArrayList<Entity>();
private Player player = null;
private BufferedImage sourceImage = null;
private SpriteSheet sprites = null;

public Level(String file, Player player) {
    this.player = player;

    try {
        URL url = SpriteSheet.class.getResource(file);
        sourceImage = ImageIO.read(url);
    } catch (IOException e) {
        e.printStackTrace();
    }

    map = new Map(sourceImage, this.player);
    sprites = new SpriteSheet("/sheet.png", 8);
    entities.add(this.player);
} 
```

Map.java <---- 这是主要问题所在。Tile.png 不在 JAR 中而是在外部寻找。

```
public class Map {
private BufferedImage source = null;
private SpriteSheet sheet = null;
private Level level;

private Tile[][] tiles = null;
private int width = 0;
private int height = 0;

private Camera cam = null;
public int xOffset;
public int yOffset;

public Map(BufferedImage source, Entity cameraTarget) {
    cam = new Camera();
    cam.attach(cameraTarget);

    this.source = source;

    String is = ("/Tiles.png");     
    sheet = new SpriteSheet(is, 8);

    System.out.print(source +"");
    load();
} 
```

和 Gamescene.java <---加载它的图像就好了。

```
 public class GameScene extends Scene {
private Level level = null;
private Player player = null;

public GameScene() {
    player = new Player();
    level = new Level("/level.png", player);
} 
```

如果需要，我可以给你更多代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:53:32.563

*猜测。*您首先使用大写首字母，然后在您的代码中使用小写字母。所以也许这就是问题所在，因为 Java 在内部是区分大小写的，但 Windows 不是（Linux 又是）。看案例的搭配。

# java - 查询有效时，Java Apache Jena SparQL 查询返回词法错误

> ID：15271328
> 
> 赞同：1
> 
> 时间：2013-03-07T12:32:03.103
> 
> 标签：java, sparql, jena, lexical

我有以下 SparQL 查询：

```
SELECT ?b ?c WHERE {
ont:http\:\/\/test.com\/test\#com.test.test.test.2.3.4 ?b ?c} 
```

成功返回**OpenRDF Workbench 2.6.5**中的正确结果。但是，在我使用以下代码运行查询时使用**Jena 2.6.4**的 Java 中

```
private static ResultSet getQueryResults(String stringQuery, String service) {
    Query query = QueryFactory.create(stringQuery);
    QueryExecution qexec = QueryExecutionFactory.sparqlService(
            service, query);
    ResultSet results = qexec.execSelect(); 
    //ResultSetFormatter.out(System.out, results, query);
    return results;
}

public static ResultSet getDetails(String ID) {
    //we define our sparql query
    String sanatizedID = "ont:" +  sanitizeString(ID);
    String stringQuery = " SELECT ?b ?c WHERE" +
            " { " + sanatizedID + 
            //"{?a"+
            " ?b" +
            " ?c}";
    System.out.println(stringQuery);
    //we define our service
    String service = "http://test.test.com:8181/test-sesame/repositories/test";

    //We write the results of our query into a results set
    ResultSet results = getQueryResults(stringQuery, service);
    return results;
}

private static String sanitizeString(String s) {
    s = s.replace("/", "\\/");
    s = s.replace("#", "\\#");
    s = s.replace(":", "\\:");
    s = s.replace("\"", "\\\"");

    return s;
} 
```

我收到以下错误

```
Exception in thread "main" com.hp.hpl.jena.query.QueryParseException: Lexical error at line 1, column 871\.  Encountered: ":" (58), after : "\\" 
```

在线查询查询 = QueryFactory.create(stringQuery);

我已经尝试更改 Jena 版本但没有运气，无法理解为什么查询在 OpenRDF Workbench 2.6.5 中有效，而不是在我的 Java 查询中有效（我认为它可能会自行清理）：/

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:42:33.163

`"ont:" + sanitizeString(ID);`

您需要`ont:`在查询中使用前缀声明或使用完整形式 and `<...>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:15:57.210

您正在使用支持稍旧版本的 SPARQL 1.1 规范的 Sesame 版本，您的前缀名称实际上无效：

```
ont:http\:\/\/test.com\/test\#com.test.test.test.2.3.4 
```

使用最新版本的 SPARQL 规范，现在允许`:`在前缀名称中直接使用附加字符，无需使用`\`. 因此，要使此查询与 Jena 一起使用，您只需`\`在第二个之前删除`:`

我不确定 Sesame 与最新 SPARQL 1.1 规范的一致性在哪里，但如果您在较新版本的 Sesame 上尝试此查询，您可能会看到与 Jena 一致的行为。

# php - jQuery .html() 在 IE8 中不起作用

> ID：15271330
> 
> 赞同：3
> 
> 时间：2013-03-07T12:32:16.953
> 
> 标签：php, jquery, html, web

我有一个 AJAX 响应，它使用返回信息`$_GET`，然后将其设置为`HTML`容器的。这适用于 Chrome、Safari、FireFox、Opera，但不适用于 IE8。

```
$(function() {
  $('#content .entry-content a.mais-menos').click(
    function(){
      $('#content .entry-content a.mais-menos').css('background-position','bottom left');
      if($(this).siblings('.descricao-campanha').css('display')=='block'){
        $(this).css('background-position','bottom left');
        $(this).siblings('.descricao-campanha').slideUp(1000);

      }else{
        $('#content .entry-content .descricao-campanha').slideUp(1000);
        $(this).css('background-position','top left');
        $(this).siblings('.descricao-campanha').slideDown(1000);

        var mae = $(this).siblings('.descricao-campanha');
        var codigo = $(this).siblings('.cdPost').attr('value');

        if (mae.children('.carregando').is(":visible")){
          $.get('<?= get_bloginfo("url") ?>/get_associado.php', {cd:codigo}, function(retorno) {
            // mae.children('.carregando').hide();
            mae.html(retorno);
            // alert(retorno);
          });
        }
      }
      return false;
    }
  );
}); 
```

如果我发出警报`retorno`，我可以看到数据已返回，但是当我将其附加到 时`div`，它在 IE8 中失败。

有人可以帮我理解为什么会失败以及如何解决吗？

检查此页面中的错误[http://www.superredems.com.br/associados/](http://www.superredems.com.br/associados/)

如果没有图像，这就是 Retorno 返回的内容。

```
<div class="clear"></div>
  <div class="descricao-mercado">
    Fone: 67 3245 3330<br />
    Praça Das Nações, 330
    Bairro Centro
    <a target='_blank' href='http://pt.wikipedia.org/wiki/Anast%C3%A1cio_%28Mato_Grosso_do_Sul%29' title='ANASTACIO - MS'>ANASTACIO - MS</a>
  </div>
  <div class="clear"></div>
  <p></p>
  <div class="clear"></div>
  <div class="imagens-destaque-associado">
    <div class="clear"></div>
  </div>
  <div class="clear"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:52:11.870

@PeteUh 完全正确。这是您尝试设置时尝试设置的 html：

```
<div class="clear"></div>
<div class="descricao-mercado">
    Fone: 67 3239 1810<br />
    Av João Garcia De Souza, 46
    Bairro Jardim Nova Água Clara
    <a target='_blank' href='http://pt.wikipedia.org/wiki/%C3%81gua_Clara' title='ÁGUA CLARA - MS'>ÁGUA CLARA - MS</a>
</div>

<div class="clear"></div>
<p></p>
<div class="clear"></div>
<div class="imagens-destaque-associado">
    <div class="clear"></div>
</div>
<div class="clear"></div>
</div>

<script>
     $('img').parent('a').colorbox();
</script> 
```

如您所见，您有 1 个太多的结束 div 标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:54:01.030

响应中有一个额外的 div 结束标记。删除它，它会正常工作

```
<div class="clear"></div>
<div class="descricao-mercado">
    Fone: 67 3239 1810<br />
    Av João Garcia De Souza, 46
    Bairro Jardim Nova Água Clara
    <a target='_blank' href='http://pt.wikipedia.org/wiki/%C3%81gua_Clara' title='ÁGUA CLARA - MS'>ÁGUA CLARA - MS</a>
</div>

<div class="clear"></div>
<p></p>
<div class="clear"></div>
<div class="imagens-destaque-associado">

<div class="clear"></div>
</div>

<div class="clear"></div>
</div> **<-- this is extra**

<script>
    $('img').parent('a').colorbox();
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T12:44:14.380

在 IE8 中附加标记时，您需要确保它有效，此错误已在[此处](http://bugs.jquery.com/ticket/12581)记录，通常是由未关闭的标记引起的。

# ninject - 通过 TaskScheduler 使用 Log4Net 扩展的 Ninject 没有日志输出，也没有错误

> ID：15271337
> 
> 赞同：1
> 
> 时间：2013-03-07T12:32:43.537
> 
> 标签：ninject, log4net, ninject-extensions

我有一个使用 Ninject 和 Log4Net 的控制台应用程序项目。

当我在我的机器上运行应用程序时，日志记录工作正常。当我在生产服务器上运行该应用程序时，日志记录工作正常。当我通过正在设置的 TaskScheduler 任务运行程序时，该任务正在由其他用户运行，我没有得到任何附加程序的日志输出。我正在使用 RollingFileAppender、SmtpAppender 和 AdoNetAppender。奇怪的是，程序运行良好，只是没有记录任何内容。

我认为如果我在本地运行该应用程序正在运行，那么 log4net 配置就可以了。

我在程序的主要方法中解析记录器，然后在需要时通过构造函数参数注入它。这就是我在应用程序的主要方法中获取记录器的方式：

```
XmlConfigurator.ConfigureAndWatch(new FileInfo("log4net.config"));

var kernel = new StandardKernel();
var loggerFactory = kernel.Get<Log4NetLoggerFactory>();
ILogger logger = loggerFactory.GetCurrentClassLogger();

logger.Info(" Test "); 
```

任何提示，指针或任何东西....因为我不知道还有什么可以尝试的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:07:45.493

扩展名通常是这样使用的：

```
public class MyClass
{
    private readonly ILogger log;

    public MyClass(ILogger log)
    {
        this.log = log;
        log.Info("Created MyClass");
    }
}

XmlConfigurator.ConfigureAndWatch(new FileInfo("log4net.config"));
using (IKernel kernel = new StandardKernel())
{
    kernel.Bind<MyClass>().ToSelf();
    kernel.Get<MyClass>(); // will cause the log message to print
} 
```

只需让 Ninject 担心将其`ILogger`注入您的班级即可。你不能在你声明内核的同一个地方请求一个`ILogger`，`IKernel`因为你没有上下文。

你可以这样做：

```
ILogger log = new Log4NetLoggerFactory().GetCurrentClassLogger();
log.Info("Test"); 
```

# json - 在 JSON 字符串中时，Url.Action 变为 null

> ID：15271339
> 
> 赞同：2
> 
> 时间：2013-03-07T12:32:44.787
> 
> 标签：json, asp.net-mvc-4, moq, json.net, url.action

有点测试的菜鸟，所以请多多包涵，

我有一个控制器，它返回一个 JsonResult ，其中包含一个由 Url.Action 计算的字符串，如下所示：

```
 public ActionResult GetResult(SomeModel model)
 {
     if (ModelState.IsValid)
     {
         return Json(new { redirectTo = Url.Action("Index", "Profile") });
     }
 } 
```

当我使用 jQuery 使用该结果时，应用程序工作得很好。

然而，在我的单元测试期间，我遇到了问题，因为当我测试 Json 字符串的内容时，redirectTo 值似乎为“null”，即使它在应用程序本身中不为 null。

我的测试方法看起来有点像这样：

```
 [Test]
 public void GetResult_Success()
 {
     var result = controller.GetResult(new SomeModel());

     Assert.IsNotNull(result);
     Assert.IsInstanceOf<JsonResult>(result);

     var jsonResult = result as JsonResult;
     var jsonObject = JsonConvert.DeserializeAnonymousType(new JavaScriptSerializer().Serialize(jsonResult.Data), new
     {
         redirectTo = string.Empty
     });

     Assert.AreEqual("Profile/Index", jsonObject.redirectTo);
 } 
```

这失败了，因为 jsonObject.redirectTo 为空。如果在我的控制器中我将 Url.Action 更改为“配置文件/索引”，则测试通过。但是 Url.Action("Index", "Profile") 失败，因为它仅在单元测试中变为 null。

如果我尝试在上下文设置中为测试设置路由值，则会抱怨它们已经注册。我正在使用起订量。知道我需要设置什么吗？提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:20:39.297

答案可以在[这个链接中找到](http://codeswordsman.wordpress.com/2011/07/22/unit-testing-controllers-that-call-url-action-and-verify-correct-url/)

复制代码以获得更多持久性：

```
public static void SetupWithHttpContextAndUrlHelper(this Controller controller)
{
    var routes = new RouteCollection();
    MvcApplication.RegisterRoutes(routes);

    //setup request
    var requestContextMock = new Mock<HttpRequestBase>();
    requestContextMock.Setup(r => r.AppRelativeCurrentExecutionFilePath).Returns("/");
    requestContextMock.Setup(r => r.ApplicationPath).Returns("/");

    //setup response
    var responseMock = new Mock<HttpResponseBase>();
    responseMock.Setup(s => s.ApplyAppPathModifier(It.IsAny<string>())).Returns<string>(s => s);

    //setup context with request and response
    var httpContextMock = new Mock<HttpContextBase>();
    httpContextMock.Setup(h => h.Request).Returns(requestContextMock.Object);
    httpContextMock.Setup(h => h.Response).Returns(responseMock.Object);

    controller.ControllerContext = new ControllerContext(httpContextMock.Object, new RouteData(), controller);
    controller.Url = new UrlHelper(new RequestContext(httpContextMock.Object, new RouteData()), routes);
} 
```

# php - PHP/MySQL - 如果没有可用的某种类型的行，加载一个占位符

> ID：15271340
> 
> 赞同：0
> 
> 时间：2013-03-07T12:32:45.063
> 
> 标签：php, mysql

所以我有这个查询：

```
SELECT * FROM cars {$statement} AND deleted = 'no' AND carID NOT IN (SELECT carID FROM reservations WHERE startDate = '".$sqlcoldate."') GROUP BY model 
```

它基本上检查预订表，然后如果有预订，它会获取这些汽车 ID 并将它们排除在循环之外。

这很酷，因为可能有 3 条道奇毒蛇，而 2 条被预订了，所以它只会显示最后一条，而且每次只显示一条，因为我按模型对结果进行分组。

一切都很好，但是当条目用完时，所有汽车都被预订了，汽车不会出现在汽车列表中。（正如我从查询中清除的那样）。

我想用一种方法来说明结果中是否没有某个汽车型号的行，以显示一个占位符，上面写着“不可用”。

这可能吗？它主要是为了让用户可以看到公司拥有那辆车，但知道它在那个日期不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:37:53.747

~~您可能应该在 PHP 中处理这个问题，检查返回的行数并将 0 替换为“UNAVAILABLE”。~~

根据 TO 评论：

在这种情况下，您要查看

[http://dev.mysql.com/doc/refman/5.1/en/case.html](http://dev.mysql.com/doc/refman/5.1/en/case.html)

这需要进入 SELECT 列表，例如

```
SELECT
CASE car_count WHEN 0 THEN 'UNAVAILABLE'
WHERE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:47:29.230

如果没有看到你的一些数据，很难给你一个查询，但是如果你将你的子查询移动到你的 select 表达式，你可以返回可用的计数（当它们都被保留时，这将是 0）。然后，当您显示数据时，您可以检查计数是否为 0，并显示您的不可用消息。

**编辑：**

鉴于桌车：

```
+----+----------+
| id | model    |
+----+----------+
|  1 | viper    |
|  2 | explorer |
|  3 | viper    |
|  4 | explorer |
+----+----------+ 
```

和餐桌预订：

```
+-------+------------+
| carid | date       |
+-------+------------+
|     1 | 2013-03-07 |
|     3 | 2013-03-07 |
+-------+------------+ 
```

类似于您上面的查询将返回：

```
+----+----------+
| id | model    |
+----+----------+
|  2 | explorer |
+----+----------+ 
```

如果您将其更改为：

```
SELECT
    `outer`.`model`,
    (
        SELECT COUNT(*)
        FROM
            `cars` AS `inner`
        WHERE
            `inner`.`model` = `outer`.`model` AND
            `inner`.`id` NOT IN(
                SELECT `carid`
                FROM `reservations`
                WHERE `date` = '2013-03-07'
            )
        GROUP BY `inner`.`model`
    ) AS `count`
FROM cars AS `outer`
GROUP BY `outer`.`model`; 
```

那么你会得到如下结果：

```
+----------+-------+
| model    | count |
+----------+-------+
| explorer |     2 |
| viper    |  NULL |
+----------+-------+ 
```

如果您随后需要将 NULL 值返回为 0，您可以使用 COALESCE，如 Liv 之前提到的。

它*不*漂亮，我相信它可以用一种*更*清洁的方式完成，但它确实有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T12:51:02.767

这里有[一个类似的问题](https://stackoverflow.com/questions/12406647/mysql-query-how-to-return-placeholder-value-instead-of-null-if-no-entry-found)，可能会让你朝着正确的方向前进。查看[`COALESCE()`](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_coalesce)功能。

内置函数`COALESCE()`在其参数中返回第一个非空值。这使您可以像这样构造查询`SELECT COALSECE(foo, 'bar') [...]`，如果它不为空，则结果将是列 'foo' 中的值，如果是，则结果将是值 'bar'。

# .net - Azure：所有 WebRole 实例是否共享 HttpContext.Current.Session 对象？

> ID：15271344
> 
> 赞同：1
> 
> 时间：2013-03-07T12:32:48.837
> 
> 标签：.net, asp.net-mvc, azure

我正在Windows Azure 中测试具有**多个实例的****WebRole**以测试负载平衡器。我必须对用户进行身份验证的代码如下：

 **```
 protected void Application_AcquireRequestState(Object sender, EventArgs e)
    {
        HttpCookie authCookie = 
            HttpContext.Current.Request.Cookies
               [FormsAuthentication.FormsCookieName];

        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket = 
                FormsAuthentication.Decrypt(authCookie.Value);

            SetUserCredentials(authTicket.Name, authTicket.UserData);
        }
    }

    private void SetUserCredentials(string userName, string securityConfig)
    {
        Credentials auth = GetSessionCredentials();

        if (auth == null && HttpContext.Current.Session != null)
        {
            log.DebugFormat("Credentials not available in session variable. Building credentials to __SessionSID.");

            SID sid = 
               AuthenticationHelper.Get().
                  GetAuthenticatedSIDFromName(userName, securityConfig);

            if (sid == null)
            {
                FormsAuthentication.SignOut();
                FormsAuthentication.RedirectToLoginPage();
                return;
            }

            auth = new Credentials(sid);

            if (HttpContext.Current.Session != null)
            {
                log.DebugFormat("Saving credentials in a session variable");
                HttpContext.Current.Session.Add("__SessionSID", auth);
            }
        }

        log.DebugFormat("Time setting user credentials for user: {0} {1}ms", userName, Environment.TickCount - ini);
    }

    private Credentials GetSessionCredentials()
    {
        if (HttpContext.Current == null)
            return null;
        if (HttpContext.Current.Session == null)
            return null;

        return HttpContext.Current.Session["__SessionSID"] as Credentials;
    } 
```

这是我的问题。我在 Azure 中使用两个实例测试了 WebRole：

*   假设我登录并且 WebRole 实例 A 执行身份验证。
*   当我发出新请求，并且请求转到 WebRole 实例 B 时，其中的 authTicket`Current.Request.Cookies`和 `HttpContext.Current.Session["__SessionSID"]`都正常。

有人可以解释一下吗？我在所有 WebRole 实例之间共享会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:44:14.477

这一切都归结为`Session State Provider`配置。

通常，您必须实现自定义提供程序（通常是 Windows Azure 缓存或 SQL Azure）以允许跨多个实例的持久会话数据。

[http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx)

登录后（无论在哪个实例上），您都会收到一个带有 SessionID 的 cookie。

对任何实例的进一步请求将导致应用程序从配置的提供程序请求您的会话数据。**

# sql-server - 分析服务创建递归层次结构

> ID：15271347
> 
> 赞同：3
> 
> 时间：2013-03-07T12:32:53.630
> 
> 标签：sql-server, ssas, analysis, business-intelligence

我有下表：

```
CatId    CatName    parent     CatId

1        Category   1           NULL
2        Category   2           NULL
3        SubCat     1           1
4        SubSubCat  1           3
5        SSSubCat   1           4 
```

在分析服务中，我想在维度上创建层次结构，以便我可以向下钻取到 N 级。目前我只能做到 2 级。类别和子类别。但我想一直到 N 级如果至少在 4-5 级之前不可能达到 N 级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:56:22.137

您似乎正在尝试的层次结构类型称为父子维度。SSAS 将使用递归连接将数据“分解”成树形。

但是您描述的表格有点令人困惑。所以我提供了一个解决方案，需要你重新考虑一下你的桌子。层次结构中的每个节点（记录）都有一个经典的父子节点：

*   节点的密钥 (ID)
*   节点的文字（名称）
*   称为父级的外键

在您的示例中，标记为“父”的列似乎是多余的。您示例中的最后一列（称为“CatID”）是维度的父级通常的样子。如果您认为表中的每条记录都是“子”，则子的父项充当指向拥有或包含该记录的某个记录的指针。在层次结构的最高级别，记录将没有 Parent，因此 Parent 列设置为 NULL。

将第二个“CatID”重命名为“parent”并删除或重命名名为“Parent”的原始列（您不需要它）。如果您按照我的建议调整表格，则应通过运行以下查询来检查最高级别是否正确：

```
SELECT CatID, CatName, parent FROM mytable WHERE (parent IS NULL) 
```

然后要进入下一个级别，请运行以下查询：

```
SELECT HighestLevel.CatID, HighestLevel.CatName, HighestLevel.parent, Level2.CatID AS Level2ID, Level2.CatName AS Level2Name
FROM mytable AS HighestLevel
INNER JOIN mytable AS Level2 ON HighestLevel.CatID = Level2.parent
WHERE (HighestLevel.parent IS NULL) 
```

注意递归的 INNER JOIN。至少再运行一个查询以查看另一个级别，以验证键是否以您期望的方式“扩展”：

```
SELECT HighestLevel.CatID, HighestLevel.CatName, HighestLevel.parent, Level2.CatID AS Level2ID, Level2.CatName AS Level2Name, Level3.CatID AS Level3ID, Level3.CatName AS Level3Name
FROM mytable AS HighestLevel
INNER JOIN mytable AS Level2 ON HighestLevel.CatID = Level2.parent
INNER JOIN mytable AS Level3 ON Level2.CatID = Level3.parent
WHERE (HighestLevel.parent IS NULL) 
```

您可以根据需要继续添加级别，以说服自己数据是正确的。这本质上就是 SSAS 在构建父子层次结构时所做的事情。

最后，您将此表添加到 DSV 并创建父子维度。这有点复杂，这看起来像是[一篇很棒的入门文章](http://jpedroalmeida.wordpress.com/category/analysis-services/dimensions/dimension-relationships/parent-child/)。SSAS 将根据需要不断添加级别，直到数据用完。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T23:18:41.390

在 AdventureWorks 中，Employee 维度有一个例子。假设您的类别在您的事实表上：

*   将您的 ParentCatID 设置为 DSV 中 CatID 的 FK
*   将您的父属性引用为维度层次结构管理器中的父属性类型
*   将属性添加到您的层次结构中

嵌套级别应该能够在您的类别层次结构中浏览。

# java - Java Enum：封装和运行时初始化

> ID：15271349
> 
> 赞同：-1
> 
> 时间：2013-03-07T12:32:55.590
> 
> 标签：java, enums

我在回家的路上有个有趣的问题

我有一个枚举

```
public enum Gender{

    Yes(Constants.male()), female(Constants.female());

    private final String value;

    private Gender(String option){
          value = option;
    }
} 
```

..我应该封装价值还是将其声明为公开？

运行时初始化值有缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:37:48.343

在您的情况下，应该没有太大区别，`String`该类是不可变的。但是，建议使用封装，因为封装是一种很好的做法。

至于“运行时”初始化，我不确定你的意思。Enum 本质上是单例的，所以它会在类加载时被初始化。这是在运行时，是的，但没有缺点；特别是如果您不想对值进行硬编码。

**编辑**

正如@GyroGearless 指出的那样，该字段应声明为`final`，这是最佳实践，即使它不是`public`构造函数中的常量集。

# php - 如何在 JavaScript 中关闭颜色框

> ID：15271355
> 
> 赞同：0
> 
> 时间：2013-03-07T12:33:03.863
> 
> 标签：php, javascript, ajax

我正在使用彩盒。我想在关闭颜色框后打开 css-lightbox。所以我的 css-lightbox 已经准备好并且工作正常。但是当我关闭颜色框时，我在控制台中有错误。

JavaScript 代码是：

```
 $(".login_message").click(function(){
     $(".login_alert").hide();
     $(".emailNot").hide();
     $(".login_ok").hide();

     openforgotpw(); // open css-lightbox

     jQuery.fn.colorbox.close();   /* close the colorbox */

 }); 
```

错误是：

```
Uncaught TypeError: Cannot call method 'close' of undefined 
```

请帮助关闭颜色框。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:40:30.373

通常，当错误的形式为无法调用未定义的方法“X”时，这意味着您尝试从中调用 X 的任何对象都不存在。

在您的情况下，似乎“关闭”是未定义的。解决此问题的最简单方法包括：

确保在浏览器准备好之前，您的代码都不会执行。最好的方法是将所有代码包装在 .onReady() 调用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:50:50.397

试试这个

```
parent.jQuery.fn.colorbox.close(); 
```

或者你也可以这样尝试

```
$(window).colorbox.close(); 
```

# visual-studio-2010 - MSI 安装程序 PostBuild 事件

> ID：15271361
> 
> 赞同：0
> 
> 时间：2013-03-07T12:33:21.237
> 
> 标签：visual-studio-2010, msbuild

在 Visual Studio 2010 下，我正在尝试为两个项目创建 msi 安装程序，并使用以下构建：

> 错误 5“PostBuildEvent”失败，错误代码“1”“未指定错误”

但是，当我进入日志时，我看到：

> 打包文件“adxloader.dll”...
> 
> 打包文件“Extensibility.dll”...
> 
> 开始构建后事件...
> 
> 该系统找不到指定的路径。

但是，我的设置文件已正确创建。看起来在创建它们之后，Visual Studio 正试图将它们复制到其他地方。我怎么解决这个问题？

# c# - 调试 WCF 服务：多启动项目

> ID：15271363
> 
> 赞同：2
> 
> 时间：2013-03-07T12:33:30.257
> 
> 标签：c#, asp.net, wcf

我的解决方案包括 -

1.  WCF 服务托管在 Visual Studio 开发服务器上。（端口 8001）
2.  Web 应用程序消费服务。（端口 8002）

`multiple projects in debug mode`我在 Visual Studio 解决方案中使用 start 。

从 WebApp 调试开始，我在 WCF 服务代码中设置了几个断点。

**问题：**

未命中 WCF 服务断点。尽管代码执行良好并将响应返回给 UI（WebApp）

当使用两种不同的解决方案启动 WebApp 和 Wcf 服务时，这些工作正常。

有什么建议么 ？

# android - 使用 Gmail 凭据登录

> ID：15271370
> 
> 赞同：2
> 
> 时间：2013-03-07T12:33:50.617
> 
> 标签：android, gmail, google-plus

有没有办法可以使用 Google 凭据来获取基本用户信息，例如

> 电子邮件、姓名、性别

并在我的应用程序中使用它们？就像允许用户使用 Gmail 登录我的应用程序一样。

[我在这里](https://stackoverflow.com/questions/15105751/enable-gmail-login-in-my-application)问了同样的问题。

但答案是：

> 您不应使用 Gmail 进行使用 Google 帐户的用户身份验证。您可以改用适用于 Android 的 Google + 登录。这将允许您在使用 OAuth 获得所需权限后访问用户的个人资料信息。在此处查看指南：

我遵循了，一切正常。

**但是，如果 Gmail 帐户没有 GooglePlus 个人资料，我的应用程序会要求创建一个 GooglePlus 帐户。这让我觉得我实现了 GooglePlus 登录而不是 Gmail 登录。**

**我的另一个问题的答案对吗？这意味着如果没有 GooglePlus 个人资料，您就无法在 Android 中登录 Gmail？**

如果不是，我如何在我的应用程序中使用 Google 登录？

[这里](https://stackoverflow.com/questions/11309093/login-in-android-app-with-gmail-credentials)有一个类似的问题，没有回复。

请帮忙。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:10:23.753

试试这个 Url 上的文章：http: [//nilvec.com/implementing-smtp-or-imap-xoauth-authentication-in-java.html](http://nilvec.com/implementing-smtp-or-imap-xoauth-authentication-in-java.html)。

我想这会对你有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:40:48.230

[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)提供了使用 Google 的 OAuth2 对用户进行身份验证的文档。但是，正如页面所述，如果您和您的用户使用 Google+ 帐户和 Google+ 登录，他们将获得额外的功能，但这不是必需的。

所需的范围是

*   `https://www.googleapis.com/auth/userinfo.profile`姓名和性别
*   `https://www.googleapis.com/auth/userinfo.email`对于用户的电子邮件地址

**更新**：我应该修改这些范围现在已弃用，并计划删除。有关详细信息，请参阅上面的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:45:09.957

我不会将“gmail”帐户和“Google+”帐户混淆为不同的东西。您真正想要的是用户使用他们的“Google 帐户”进行身份验证，该帐户跨越许多服务。

在 Android 上，使用 Google 帐户构建[身份验证的最简单方法是使用 Google Play Services SDK](http://developer.android.com/google/play-services/auth.html)，其中包括 Google 登录等服务。

Google+ 记录了使用 Google Play 服务 SDK 的端到端方法，该方法涵盖了您通过以下方式询问的问题`PlusClient`：

1.  [设置客户端](https://developers.google.com/+/mobile/android/getting-started)
2.  使用`PlusClient.getAccountName()`REST 方法或 REST 方法[获取用户的电子邮件地址。](https://developers.google.com/+/mobile/android/people#retrieve_an_authenticated_users_email_address)
3.  [使用](https://developers.google.com/+/mobile/android/people#retrieve_profile_information)_`PlusClient.loadPerson()`

# wordpress - 用于响应式设计的 Superfish 菜单内联

> ID：15271372
> 
> 赞同：0
> 
> 时间：2013-03-07T12:33:54.837
> 
> 标签：wordpress, drop-down-menu, menu, responsive-design, superfish

我遇到了与“响应式设计”内联显示的超级鱼菜单的问题我希望内联显示所有超级鱼菜单链接，但我遇到的问题是子菜单的超级鱼会覆盖我尝试过的所有样式并始终显示下拉菜单。

任何人都知道如何在使用小于 700 像素的设备浏览时禁用鼠标悬停时的超级鱼动画下拉菜单并显示超级鱼菜单元素、子菜单和子菜单元素的所有元素内联块。

来自网站的当前代码太乱了，所以我在这里上传了它[http://pastebin.com/mwPjVEPX](http://pastebin.com/mwPjVEPX) 这直接来自网站。

对于第一个 ul li 元素，我添加了 display:inline-block 并且它可以工作，但是在子菜单元素中，来自 superfish 的第一个 javascript 添加元素样式 display:none 和 visibility:hidden，当我尝试添加 display:inline-block 以覆盖它时第一次悬停它返回显示无。

这是超级鱼菜单的CSS [http://pastebin.com/vmYkGVx4](http://pastebin.com/vmYkGVx4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:18:19.427

尽管有你的 CSS，Superfish JavaScript 仍然可以在小屏幕上运行。JavaScript 通过附加内联`style`属性来改变 CSS 属性来隐藏和揭示事物`display`。`!important`除非您像这样添加关键字，否则内联样式将始终胜过任何其他来源的 CSS `display: inline-block !important`：. 这将是值得尝试的。但是，由于 JavaScript 仍会尝试对元素进行操作，您*可能*仍会发现其他奇怪的行为。请让我们知道您的进展情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:48:32.523

首先，您没有在这里特别提及您的代码或任何链接。但正如我猜测的那样，您为父元素指定的所有属性都会自动附加到其子元素。所以，如果你给它，`display: inline;`那么它的所有孩子都会得到它并且表现得好像他们是内联的。所以还是去吧`display: inline-block;`。在这种情况下，该元素将表现为一个内联元素，但它本身显示为一个块级元素。而且 child 永远不会 inline 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:34:17.043

好吧，最后我最终使用了 mobilemenu 。这是在选定宽度上隐藏超级鱼菜单并显示下拉选择框的 javascript 代码。从所有搜索来看，使用它是最合理的。superfish 菜单有一些支持触摸设备的开发，但它仍然不支持“响应式设计”，尽管各种博客上都有帖子说下一步是让它响应式，直到我使用这个插件[https://github。 com/mattkersley/响应式菜单](https://github.com/mattkersley/Responsive-Menu)

# iphone - 如何从 UIWebview 中删除选择？

> ID：15271375
> 
> 赞同：0
> 
> 时间：2013-03-07T12:34:04.347
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

在我的 iPhone 应用程序中，我在视图控制器中使用 Web 视图。当我按住屏幕时，webview 上会出现一些选择，有时会出现一个带有“复制”和“取消”按钮的操作表

如何删除这个？

![在此处输入图像描述](../Images/1faad1ea06342330a2b1943abdbff83e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:36:31.313

您可以使用此代码禁用选择

```
[webView stringByEvaluatingJavaScriptFromString:@"document.body.style.webkitTouchCallout='none'; document.body.style.KhtmlUserSelect='none'"]; 
```

如果您在网页中使用 Jscript，那么这可以解决问题

```
[webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().removeAllRanges();"]; 
```

如果您想禁用复制粘贴，那么这可以解决问题

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender 
{    
    if (action == @selector(copy:) ||
        action == @selector(select:)||
        action == @selector(paste:)||
        action == @selector(cut:)) 
    {
        return NO;
    }
    return [super canPerformAction:action withSender:sender];
} 
```

或者

```
 webView.userInteractionEnabled=NO; // in case you need to disable whole UIWebView 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:56:37.023

如果您使用的是 .css，则可以将这些添加到适当的样式中

```
 *.noselect {
            -webkit-user-select:none;
            -webkit-touch-callout:none;
    } 
```

# powershell - 从 CSV 的员工 ID powershell 中获取 sAMAccountNames

> ID：15271378
> 
> 赞同：1
> 
> 时间：2013-03-07T12:34:11.883
> 
> 标签：powershell, csv, foreach

我不知道为什么我不能让它工作，但我有一个员工 ID 的 .csv，我想将它们添加到 AD 组，但我不能让它工作

```
Function Sync-ADGroup {
$userIDs = Import-CSV $CSV
foreach($ID in $IDs){
    Get-ADUser -Filter "EmployeeID -eq '$ID'" -Properties SAMAccountName
    }
} 
```

然后我会将它们添加到组中，但我不能返回 ADUserObject。不知道我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:09:42.677

您需要引用 csv 文件中显示的用户的属性名称（列）。例如，如果文件中的值位于 EmployeeID 标头下：

```
foreach($userID in $userIDs)
{ 
    Get-ADUser -Filter "EmployeeID -eq $($userID.EmployeeID)" -Properties SAMAccountName 
} 
```

要使上述内容正常工作，您的 csv 文件需要如下所示：

```
EmployeeID 
1234 
2345 
3456 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:53:06.600

foreach 循环中使用了未声明的集合变量。

```
$userIDs = Import-CSV $CSV # Load stuff to "userIDs"
foreach($ID in $IDs){ # Enumerate "IDs", oops, should be "userIDs" 
```

由于`$IDs`是空变量，循环并没有做太多事情。

为了避免这种错误，请使用严格模式：`Set-PSDebug -Strict`. 这将导致使用未声明变量的错误。（咆哮：严格模式应该是 Powershell 中的默认模式。我在我的个人资料和我编写的所有脚本中都设置了它。）

# google-maps - 使用 api 调用/请求将 KML 文件导入 Google 地图

> ID：15271386
> 
> 赞同：0
> 
> 时间：2013-03-07T12:34:32.157
> 
> 标签：google-maps, google-maps-api-3

我有由一组点（形成线的纬度和经度）表示的地理数据，数据在 json 中。我想用这些数据在我的网站上创建一个谷歌地图，但用户也应该可以编辑地图，这样他就可以移动线条、添加标记等。

1.  我可以使用[Google Maps API](https://developers.google.com/maps/documentation/javascript/)创建它——用它我可以绘制折线、添加标记，但一切都必须由我的 javascript 完成，这增加了很多工作。

2.  [谷歌地图](https://maps.google.com/)为普通用户提供了一个非常好的地图编辑器。要使用它创建地图，用户必须单击界面或导入 KML 文件。

我在想的是混合方法 1\. 和 2\. 像这样：
a) 将我的数据导出到 KML 文件
b) 将 KML 文件导入到用户的谷歌地图帐户
c) 用户可以使用很棒的谷歌编辑地图地图编辑器
d) 使用嵌入代码将地图重新​​嵌入我的网站

问题在于 b) 点 -**是否可以使用一些请求/api 调用将 KML 文件导入 Google 地图？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:01:48.650

如果您的意思是在 android 上，是的，您可以将 googlemaps 应用程序作为应用程序的意图调用，并提供一个 kml 文件供其显示。

```
String kmlWebAddress = "http://www.afischer-online.de/sos/AFTrack/tracks/e1/01.24.Soltau2Wietzendorf.kml";
String uri = String.format(Locale.ENGLISH, "geo:0,0?q=%s",kmlWebAddress);
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
startActivity(intent); 
```

如果您的意思是在线，那么您可以通过调用 googlemaps 并附加`"?q=http://www.yourdomain.com/yourfile.kml"`.

像这样：

[www.googlemaps.com?q=http://www.afischer-online.de/sos/AFTrack/tracks/e1/01.24.Soltau2Wietzendorf.kml](http://www.googlemaps.com?q=http://www.afischer-online.de/sos/AFTrack/tracks/e1/01.24.Soltau2Wietzendorf.kml)

# r - R中的灵敏度/特异性与截止点图？

> ID：15271387
> 
> 赞同：0
> 
> 时间：2013-03-07T12:34:32.397
> 
> 标签：r, plot, statistics, classification

是否有用于在 R 中制作灵敏度/特异性与截止点图的软件包？将 glm 对象作为参数的首选？

我正在寻找这样的东西：

![在此处输入图像描述](../Images/4544addd02234beddbab0eab2ef46e12.png)

PS：这个剧情有名字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:23:53.060

相反，您可以使用 ROC 曲线来绘制灵敏度与 1-特异性的关系。

```
library(Epi)
x <- rnorm( 100 )
z <- rnorm( 100 )
w <- rnorm( 100 )
tigol <- function( x ) 1 - ( 1 + exp( x ) )^(-1)
y <- rbinom( 100, 1, tigol( 0.3 + 3*x + 5*z + 7*w ) )
ROC( form = y ~ x + z , plot="sp" ) 
```

`ROCR` 和包产生类似的`epicalc`情节。后者应该接受 glm 对象 [。](http://rss.acs.unt.edu/Rdoc/library/epicalc/html/roc.html)

![在此处输入图像描述](../Images/de571c11bdede1e4e9be378c7335fa01.png)

# python - 处理从相关数据库导出的那些数据框 obj 的缺失数据时更好的解决方案

> ID：15271389
> 
> 赞同：1
> 
> 时间：2013-03-07T12:34:37.913
> 
> 标签：python, pandas

几天前，我发布了一个关于[“如何使 pandas HDFStore 'put' 操作更快”](https://stackoverflow.com/questions/14355151/how-to-make-pandas-hdfstore-put-operation-faster/14474667)的问题，感谢 Jeff 的回答，我找到了一种更有效的方法来从 db 中提取数据并将它们存储到 hdf5 文件中。

但是通过这种方式，我必须根据它们的类型为每一列填充缺失的数据，并在每一个表上做这些工作（在大多数情况下，这项工作是重复的）。否则，当我将数据帧放入 hdf5 文件时，数据帧中的 None 对象会导致性能问题。

有没有更好的方法来完成这项工作？

我刚刚阅读[了这个问题“ENH：sql to provide NaN/NaT conversions”](https://github.com/pydata/pandas/issues/2754)

*   NaT 可以与其他类型一起使用吗？（datetime64 除外）
*   在将数据帧存储到 hdf5 文件时，我可以使用它替换数据帧中的所有 None 对象而不用担心性能问题吗？

## 更新1

*   PD。**版本**：0.10.1
*   我现在正在使用 np.nan 来填充缺失的数据。但是我遇到了两个问题。
    *   同时具有 np.nan 和 datetime.datetime objs 的列不能转换为 'datetime64[ns]' 类型，并且在将它们放入 hdfstore 时会引发异常。

```
    在 [155] 中：len(df_bugs.lastdiffed[df_bugs.lastdiffed.isnull()])
    输出[155]：150

    在 [156] 中：len(df_bugs.lastdiffed)
    出[156]：1003387

    在 [158] 中：df_bugs.lastdiffed.astype(df_bugs.creation_ts.dtype)

    -------------------------------------------------- -------------------------
    ValueError Traceback（最近一次调用最后一次）
     在 （）
    ----> 1 df_bugs.lastdiffed.astype(df_bugs.creation_ts.dtype)

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/core/series.pyc in astype(self, dtype)
        第777章
        第778章
    --> 779 铸造 = com._astype_nansafe(self.values, dtype)
        第780章
        781

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/core/common.pyc in _astype_nansafe(arr, dtype)
       第1047章
       1048 # 解决 NumPy 损坏问题，#1987
    -> 1049 返回 lib.astype_intsafe(arr.ravel(), dtype).reshape(arr.shape)
       1050
       第1051章

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/lib.so 在 pandas.lib.astype_intsafe (pandas/lib.c:11886 )()

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/lib.so in util.set_value_at (pandas/lib.c:44436)( )

    ValueError：必须是 datetime.date 或 datetime.datetime 对象

        # df_bugs_sample1 = df_bugs.ix[:10000]
    在 [147] 中：%prun store.put('df_bugs_sample1', df_bugs_sample1, table=True)

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in put(self, key, value, table, append , **kwargs)
        456表
        第457章
    --> 458 self._write_to_group(key, value, table=table, append=append, **kwargs)
        459
        460 def删除（自我，键，其中=无，开始=无，停止=无）：

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in _write_to_group(self, key, value, index, table , 附加, complib, **kwargs)
        786 raise ValueError（'非表不支持压缩'）
        787
    --> 788 s.write(obj = value, append=append, complib=complib, **kwargs)
        789 如果 s.is_table 和索引：
        790 s.create_index（列=索引）

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in write(self, obj, axes, append, complib , complevel, fletcher32, min_itemsize, chunksize, expectedrows, **kwargs)
       第2489章
       第2490章
    -> 2491 min_itemsize=min_itemsize, **kwargs)
       2492
       2493 如果不是 self.is_exists：

    /usr/local/lib/python2.6/dist-packages/pandas-0.10.1-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes（self，axes，obj，validate，nan_rep , data_columns, min_itemsize, **kwargs)
       第2252章
       2253 除外（例外），详细信息：
    -> 2254 raise Exception("找不到正确的原子类型 -> [dtype->%s,items->%s] %s" % (b.dtype.name, b.items, str(detail)))
       2255 j += 1
       2256

    例外：找不到正确的原子类型 -> [dtype->object,items->Index([bug_file_loc, bug_severity, bug_status, cf_branch, cf_bug_source, cf_eta, cf_public_severity, cf_public_summary, cf_regression, cf_reported_by, cf_type, guest_op_sys, host_op_sys, 关键字, lastdiffed, priority, rep_platform, resolution, short_desc, status_whiteboard, target_milestone], dtype=object)] 'datetime.datetime' 类型的对象没有 len()

```

*   而另一个 df 似乎不能***完全***放入数据框中，如下例所示，条目数为***13742515***，但在我将数据框放入 hdfstore 并取出后，条目数变为***1041998***。这很奇怪~

```
    在 [123]:df_bugs_activity
    出[123]：

    Int64Index：13742515 个条目，0 到 13742514
    数据列：
    添加了 13111366 个非空值
    attach_id 1041998 非空值
    bug_id 13742515 非空值
    bug_when 13742515 非空值
    fieldid 13742515 非空值
    id 13742515 非空值
    删除了 13612258 个非空值
    谁 13742515 个非空值
    数据类型：datetime64[ns](1)、float64(1)、int64(4)、object(2)

    在 [121] 中：%time store.put('df_bugs_activity2', df_bugs_activity, table=True)

    CPU 时间：用户 35.31 秒，系统：4.23 秒，总计：39.54 秒
    挂壁时间：39.65 秒

    在 [122] 中：%time store.get('df_bugs_activity2')

    CPU 时间：用户 7.56 秒，系统：0.26 秒，总计：7.82 秒
    挂壁时间：7.84 秒
    输出[122]：

    Int64Index：1041998 个条目，2012 到 13354656
    数据列：
    添加了 1041981 个非空值
    attach_id 1041998 非空值
    bug_id 1041998 非空值
    bug_when 1041998 非空值
    fieldid 1041998 非空值
    id 1041998 非空值
    删除了 1041991 个非空值
    谁 1041998 个非空值
    数据类型：datetime64[ns](1)、float64(1)、int64(4)、object(2)

```

## 更新 2

*   创建数据框的代码：

```
    def grab_data(table_name, size_of_page=20000):
        '''
        从 db 表中获取数据

        size_of_page：sql的limit子类的第二个参数
        '''
        cur.execute('select count(*) from %s' % table_name)
        records_number = cur.fetchone()[0]
        loop_number = records_number / size_of_page + 1
        print '****\nStart Grab %s\n****\nrecords_number: %s\nloop_number: %s' % (table_name, records_number, loop_number)

        开始位置 = 0
        df = DataFrame() # 警告：这个数据框对象将包含一个表的所有记录，所以要小心内存使用！

        对于我在范围内（0，loop_number）：
            sql_export = 'select * from %s limit %s, %s' % (table_name, start_position, size_of_page)
            df = df.append(psql.read_frame(sql_export, conn), verify_integrity=False, ignore_index=True)

            start_position += size_of_page
            打印 'start_position: %s' % start_position

        返回df

    df_bugs = grab_data('错误')
    df_bugs = df_bugs.fillna(np.nan)
    df_bugs = df_bugs.convert_objects()

```

*   df_bugs 的结构：

```
Int64Index：1003387 个条目，0 到 1003386
数据列：
别名 0 非空值
assign_to 1003387 个非空值
bug_file_loc 498160 非空值
bug_id 1003387 非空值
bug_severity 1003387 非空值
bug_status 1003387 非空值
category_id 1003387 非空值
cclist_accessible 1003387 非空值
cf_attempted 102160 个非空值
cf_branch 691834 非空值
cf_bug_source 1003387 非空值
cf_build 357920 非空值
cf_change 324933 非空值
cf_doc_impact 1003387 非空值
cf_eta 7223 非空值
cf_failed 102123 非空值
cf_i18n_impact 1003387 非空值
cf_on_hold 1003387 非空值
cf_public_severity 1003387 非空值
cf_public_summary 587944 非空值
cf_regression 1003387 非空值
cf_reported_by 1003387 非空值
cf_reviewer 1003387 非空值
cf_security 1003387 非空值
cf_test_id 13475 个非空值
cf_type 1003387 非空值
cf_viss 1423 个非空值
component_id 1003387 非空值
creation_ts 1003387 非空值
截止日期 0 非空值
delta_ts 1003387 个非空值
估计时间 1003387 个非空值
everconfirmed 1003387 个非空值
found_in_phase_id 1003387 非空值
found_in_product_id 1003387 非空值
found_in_version_id 1003387 非空值
guest_op_sys 1003387 非空值
host_op_sys 1003387 非空值
关键字 1003387 个非空值
lastdiffed 1003237 个非空值
优先级 1003387 非空值
product_id 1003387 非空值
qa_contact 1003387 非空值
剩余时间 1003387 个非空值
rep_platform 1003387 非空值
记者 1003387 非空值
report_accessible 1003387 非空值
分辨率 1003387 非空值
short_desc 1003387 非空值
status_whiteboard 1003387 非空值
target_milestone 1003387 非空值
投票 1003387 个非空值
数据类型：datetime64[ns](2)、float64(10)、int64(19)、object(21)

```

## 更新 3

*   写入 csv 并从 csv 读取：

```
    在 [184] 中：df_bugs.to_csv('df_bugs.sv')
    在 [185] 中：df_bugs_from_scv = pd.read_csv('df_bugs.sv')
    在 [186] 中：df_bugs_from_scv
    出[186]：

    Int64Index：1003387 个条目，0 到 1003386
    数据列：
    未命名：0 1003387 个非空值
    别名 0 非空值
    assign_to 1003387 个非空值
    bug_file_loc 0 个非空值
    bug_id 1003387 非空值
    bug_severity 1003387 非空值
    bug_status 1003387 非空值
    category_id 1003387 非空值
    cclist_accessible 1003387 非空值
    cf_attempted 102160 个非空值
    cf_branch 345133 非空值
    cf_bug_source 1003387 非空值
    cf_build 357920 非空值
    cf_change 324933 非空值
    cf_doc_impact 1003387 非空值
    cf_eta 7223 非空值
    cf_failed 102123 非空值
    cf_i18n_impact 1003387 非空值
    cf_on_hold 1003387 非空值
    cf_public_severity 1003387 非空值
    cf_public_summary 588 个非空值
    cf_regression 1003387 非空值
    cf_reported_by 1003387 非空值
    cf_reviewer 1003387 非空值
    cf_security 1003387 非空值
    cf_test_id 13475 个非空值
    cf_type 1003387 非空值
    cf_viss 1423 个非空值
    component_id 1003387 非空值
    creation_ts 1003387 非空值
    截止日期 0 非空值
    delta_ts 1003387 个非空值
    估计时间 1003387 个非空值
    everconfirmed 1003387 个非空值
    found_in_phase_id 1003387 非空值
    found_in_product_id 1003387 非空值
    found_in_version_id 1003387 非空值
    guest_op_sys 805088 非空值
    host_op_sys 806344 非空值
    关键字 532941 个非空值
    lastdiffed 1003237 个非空值
    优先级 1003387 非空值
    product_id 1003387 非空值
    qa_contact 1003387 非空值
    剩余时间 1003387 个非空值
    rep_platform 424213 非空值
    记者 1003387 非空值
    report_accessible 1003387 非空值
    分辨率 922282 非空值
    short_desc 1003287 非空值
    status_whiteboard 0 个非空值
    target_milestone 423276 个非空值
    投票 1003387 个非空值
    数据类型：float64(12)、int64(20)、object(21)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:40:26.520

我会回答自己，并感谢杰夫的帮助。

首先，更新 1 中的第二个问题（“一个 df 似乎无法**完全**放入数据帧”）已得到[修复](https://github.com/pydata/pandas/issues/3012)。

而且，我遇到的最大问题是处理同时包含 python 的**datetime** obj 和**None** obj 的列。幸运的是，自 0.11-dev 以来，pandas 提供了更[便捷的方式](http://pandas.pydata.org/pandas-docs/dev/io.html#datatypes)。我在我的项目中使用了下面的代码，并为某些行添加了注释，希望它可以帮助其他人:)

```
cur.execute('select * from table_name')
result = cur.fetchall()

# For details: http://www.python.org/dev/peps/pep-0249/#description
db_description = cur.description
columns = [col_desc[0] for col_desc in db_description]

# As the pandas' doc said, `coerce_float`: Attempt to convert values to non-string, non-numeric objects (like decimal.Decimal) to floating point
df = DataFrame(result, columns=columns, coerce_float=True)

# dealing the missing data
for column_name in df.columns:
    # Currently, calling function `fillna(np.nan) on a `datetime64[ns]` column will cause an exception
    if df[column_name].dtype.str != '<M8[ns]':
        df[column_name].fillna(np.nan)

# convert the type of columns which both have np.nan and datetime obj from 'object' to 'datetime64[ns]'(short as'<M8[ns]')
# find the table columns whose type is Date or Datetime
column_name_type_tuple = [column[:2] for column in db_description if column[1] in (10, 12)]
# check whose type is 'object'
columns_need_conv = [column_name for column_name, column_type in column_name_type_tuple if str(df[column_name].dtype) == 'object']

# do the type converting
for column_name in columns_need_conv:
    df[column_name] = Series(df[column_name].values, dtype='M8[ns]')

df = df.convert_objects() 
```

在此之后，df 应该适合存储在 h5 文件中，不再需要“pickle”。

ps：

一些配置文件：
complib：'lzo'，complevel：1
table1，7,810,561 条记录，带有 2 个 int cols 和 1 个 datetime col，放置操作成本为**49s**

table2，1,008,794 条记录，4 个 datetime cols，4 个 float64 cols，19 个 int cols，24 个 object(string) cols，放置操作花费**170s**

# mysql - mysql总和最低价格

> ID：15271392
> 
> 赞同：0
> 
> 时间：2013-03-07T12:34:43.707
> 
> 标签：mysql, sum, min

我有一个公寓日历表，用于向用户显示每天的价格。在这张桌子上，一些公寓包括房间（id_room）出租：

表列/记录示例：

```
id_apart | id_room | date       | price | promo_price
1        |    1    | 03-03-2013 | 20.00 | 0
1        |    1    | 04-03-2013 | 20.00 | 0
1        |    2    | 03-03-2013 | 50.00 | 45.00
1        |    2    | 04-03-2013 | 50.00 | 45.00 
```

结果，我想得到一个字符串，该字符串将“price”和“promo_price”与两个日期之间为公寓/房间找到的最低价格的总和连接起来。

这个查询是对公寓的所有房间价格求和，我不知道如何在这个上使用 MIN，只求最便宜房间的价格：

```
select 
    concat(sum(if(promo_price>0,promo_price,price)), 
    "---",
    sum(price)) 
from 
    apart 
where 
    id_apart=215 
    and date>= "2013-03-03" 
    and date<"2013-03-05" 
```

此查询的结果是：90---140

图注：第一个字符串数字是 'promo_price' 的总和；“价格”的第二个数字总和

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:52:13.183

```
select concat(promo_price, "--", price) from apart 
where id_apart=215 and date >= "2013-03-03" and date < "2013-03-05" 
and (promo_price + price)) = (select min(promo_price + price) from apart); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:59:59.403

请试试这个

```
select concat(if(promo_price>0, 'true', sum(promo_price)),'---', sum(price)) 
from aprt where id_apart = 215 and date between "2013-03-03" and "2013- 03-05"
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:02:12.353

我想这就是你要找的

```
 select if(promo_price = 0,concat(sum(price),"---", sum(price)) ,sum(price)) as pri
  from apart  
   where id_apart=1 and `date`>= "03-03-2013" and `date` < "05-03-2013"
   and promo_price = 0 
```

输出。

```
 PRIS 
```

> **40---40**

**obs**请注意，我从您上面的示例中制作了 id_apart=1 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:10:10.287

这是你在寻找的答案吗？

```
select 
concat(sum(if(promo_price>0,promo_price,price)), 
"---",
sum(price)) from apart group by id_room 
having sum(price) + sum(promo_price) = 
(select min(sum(price) + sum(promo_price)) from apart where id_apart =1 
group by id_room); 
```

输出：40 --- 40

# android - 使用 Calendar 对象读取和写入当前日期到 SharedPreferences

> ID：15271393
> 
> 赞同：0
> 
> 时间：2013-03-07T12:34:48.883
> 
> 标签：android, date, calendar, sharedpreferences

我想在应用程序中写入偏好更新数据的最后日期。所以我确实喜欢这个

```
Calendar cal = Calendar.getInstance();
SharedPreferences settings = getSharedPreferences("OrderOnline", 0);
Long updDate = settings.getLong("lastupdate", 0);
Long currdate= cal.getTimeInMillis();
if (!(updDate == currdate)) {
Log.d("AMainActivity", "updDate = " + updDate + "; currdate = " + currdate);
...
Editor ed = settings.edit();
        ed.putLong("lastupdate", currdate);
        ed.commit();
} 
```

但这不是我想要的。如何在 SharedPreferences 中读取和写入当前日期？我不想使用任何*已弃用*的对象。谢谢你。

PS我确实想要首选项中的当前日期，而不是秒。现在 (!(updDate == currdate)) 将永远为真。

UPD 我加了这个

```
Calendar cal = Calendar.getInstance();
SharedPreferences settings = getSharedPreferences("OrderOnline", 0);
Long updDate = settings.getLong("lastupdate", 0)/ MILLIS_PER_DAY;
Long currdate= cal.getTimeInMillis()/ MILLIS_PER_DAY;
if (!(updDate == currdate)) {
  Log.d("AMainActivity", "updDate = " + updDate + "; currdate = " + currdate);

...
  Editor ed = settings.edit();
        ed.putLong("lastupdate", currdate);
        ed.commit();
} 
```

进入 {} 这是结果

```
03-07 13:10:15.031: D/AMainActivity(9291): updDate = 15771; currdate = 15771 
```

有些东西不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:53:11.810

使用它来比较天而不是毫秒：

```
long MILLIS_PER_DAY = 1000 * 60 * 60 * 24;
long updDate = settings.getLong("lastupdate", 0) / MILLIS_PER_DAY;
long currdate= System.currentTimeMillis() / MILLIS_PER_DAY;

if (!(upDate == currDate)) ... 
```

一个简短的单元测试来证明事情：这写“现在这就是我的想法”和“看，它有效”。

```
public void test() throws InterruptedException {
    long MILLIS_PER_DAY = 1000 * 60 * 60 * 24;
    long updDate = 0 / MILLIS_PER_DAY;
    long currDate = System.currentTimeMillis() / MILLIS_PER_DAY;

    if (!(updDate == currDate)) {
        System.out.println("now that's what I thought");
    }

    updDate = System.currentTimeMillis() / MILLIS_PER_DAY;
    Thread.sleep(5000);
    currDate = System.currentTimeMillis() / MILLIS_PER_DAY;

    if (!(updDate == currDate)) {
        System.out.println("now that's STRANGE");
    } else {
        System.out.println("see, it works");
    }
} 
```

# php - 如何在codeigniter中使用usercake？

> ID：15271398
> 
> 赞同：2
> 
> 时间：2013-03-07T12:35:08.913
> 
> 标签：php, codeigniter, usercake

我需要[`Usercake`](http://usercake.com/)在 Codeigniter 中嵌入/使用这个想法吗？我该怎么做呢？

我正在尝试在 CI 中使用 UserCake 的`userlogin`、`session`等类，但运气不佳。

任何人都可以帮我做到这一点吗？我曾尝试在 usercake 官方网站中搜索解决方案，并遇到了[这个帖子](http://usercake.com/thread.php?id=71)，但我仍然无法得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:49:27.390

您似乎正在尝试使用两种不同的框架。我的建议是使用可用的 CodeIgniter 库之一来管理您的用户。请参阅[如何为 CodeIgniter 选择身份验证库？](https://stackoverflow.com/questions/346980/how-should-i-choose-an-authentication-library-for-codeigniter)了解更多信息。

# regex - preg_match_all 查找所有 URL 但不包括电子邮件

> ID：15271401
> 
> 赞同：2
> 
> 时间：2013-03-07T12:35:20.253
> 
> 标签：regex, preg-match-all

我搜索了许多 Stackoverflow 正则表达式帖子，但找不到我的答案。我正在使用以下内容查找给定`$text`字符串中的所有 URL：

```
$pattern = "#((http|https|ftp|ftps)://)?([a-zA-Z0-9\-]*\.)+[a-zA-Z0-9]{2,4}(/[a-zA-Z0-9=.?&-]*)?#"; 
```

（同意可能更精确/更有效/......但这不是问题......但是）。

现在使用此文本输入：

```
$text = "Website: www.example.com, ";
$text .= "Contact us: http://www.example.com/cu?t=contactus#anchor, ";
$text .= "Email: contact@example.com"; 
```

然后一个

```
preg_match_all($pattern, $text, $matches); 
```

将返回这些：

```
www.example.com
http://www.example.com/cu?t=contactus
example.com 
```

最后一个`example.com`来自电子邮件，我希望能够排除它。
我尝试了很多组合`[^@]`，`(?!@)`...无济于事，我仍然收到电子邮件结果。

我能做的最好的事情是`@`在开头包含一个可选的，这样它就会返回`@example.com`，然后我循环我的结果以排除以`@`.

有没有更好的解决方案？一个不包含电子邮件子字符串的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:18:04.783

不使用断言等太高级功能的示例解决方案：

```
<?php

$text = 'ftp://web.com, ';
$text .= "Website: www.example.com, ";
$text .= "Contact us: http://www.example.com/cu?t=contactus#anchor, ";
$text .= "Email: contact@example.com";

$base = "((http|https|ftp|ftps)://)?([a-zA-Z0-9\-]*\.)+[a-zA-Z0-9]{2,4}(/[a-zA-Z0-9=.?&-]*)?";

$matches = array(); preg_match_all("#$base#", $text, $matches); var_dump($matches[0]);
$matches = array(); preg_match_all("#\s($base)#", " $text", $matches); var_dump($matches[1]);

?> 
```

输出：

```
array(4) {
  [0]=>
  string(13) "ftp://web.com"
  [1]=>
  string(15) "www.example.com"
  [2]=>
  string(37) "http://www.example.com/cu?t=contactus"
  [3]=>
  string(11) "example.com"
}
array(3) {
  [0]=>
  string(13) "ftp://web.com"
  [1]=>
  string(15) "www.example.com"
  [2]=>
  string(37) "http://www.example.com/cu?t=contactus"
} 
```

只需检查 URL 之前的空格，但不要将其包含在子模式中。使用`[^@]`将不起作用，因为正则表达式只会匹配匹配的`e`其余部分 - 它们稍后将合并为单个匹配。`[^@]``xample.com`

# python - Crispy 表单自我用户

> ID：15271402
> 
> 赞同：1
> 
> 时间：2013-03-07T12:35:23.750
> 
> 标签：python, django, django-crispy-forms

我正在使用 Django 1.4 和酥脆的表格。这有一些问题。我正在查看示例，但仍然无法弄清楚。我有一个带有“pk”参数的示例，您可以在其中编辑请求的用户。但现在我需要进行自我编辑。编辑我自己的数据。

我得到了像 -

```
Failed lookup for key [form] in u .... 
```

有很长很长的输出。我的表单已经构建，因为我将该表单放到其他视图中并且它工作正常。

这是我的看法

```
class ManagerProfileEditView(LoginRequiredMixin, TemplateView):
model = User
template_name = 'profile/edit.html'
form_class = ProfileEditForm

def get_success_url(self):
    messages.success(self.request, _('Profile was edited'))
    return reverse('manager:profile_edit') 
```

在这里形成

```
class ProfileEditForm(forms.ModelForm):
class Meta:
    model = User
    field = ('email', 'first_name', 'last_name')

helper = FormHelper()
def __init__(self, *args, **kwargs):
    super(ProfileEditForm, self).__init__(*args, **kwargs)

    self.helper.form_class = 'form-horizontal'
    self.helper.layout = Layout(
        Field('email', 'first_name', 'last_name',
            FormActions(
                Submit('save_changes', _('Save changes'), css_class="btn btn-primary"),
                Submit('cancel', _('Cancel')),
            )
        )
    ) 
```

据我了解 prolly 应该放置我要“管理”的用户（就像“self.user”）

我希望你能理解我的问题

ps 模板中的输出为

```
{% crispy form %} 
```

# c# - C# 中的无限数

> ID：15271405
> 
> 赞同：3
> 
> 时间：2013-03-07T12:35:28.293
> 
> 标签：c#

短片有 16 位。

一个整数 32。

长64。

有没有办法在 C# 中表示无限整数？无限是指任意大的东西，并且会受到您所拥有的内存的限制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T12:36:11.693

您可以使用[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:47:53.247

尝试[IntX](https://github.com/devoyster/IntXLib)。

> IntX 是一个用纯 C# 2.0 编写的任意精度整数库，具有快速 - 大约 O(N * log N) - 乘法/除法算法实现。它提供了所有关于整数的基本算术运算、比较、按位移位等。它还允许解析不同基数的数字并将它们转换为字符串，也可以是任何基数。这个库的优点是快速乘法、除法和从基数到基数的转换算法——所有快速版本的算法都是基于使用快速哈特利变换的大整数的快速乘法，运行时间为 O(N * log N * log log N) 时间而不是经典的 O(N^2)。

# r - 如何使用 knitr 比较不同版本 R 的性能？

> ID：15271406
> 
> 赞同：8
> 
> 时间：2013-03-07T12:35:31.440
> 
> 标签：r, knitr

我想评估一些代码在不同版本的 R 中的性能。原则上这很容易：

*   启动 R
*   用于`system.time()`衡量运行一段代码所需的时间
*   终止 R
*   冲洗并以不同的版本重复

现在，我想用`knitr`创建一个报告来做到这一点。所以，在我看来，我需要一种机制来在每个块中启动一个新会话。

我该怎么做呢？

* * *

一些示例`knitr` 降价代码用作演示。此代码使用 绘制图形`ggplot`，但显然两个版本都返回相同的时间，因为我不知道如何为每个块启动新版本的 R。

```
Comparison of R performance
========================================================

# Do analysis in R version 2.14

```{r fig.width=6, fig.height=3}
library(ggplot2)
data(diamonds)

system.time({
  p <- ggplot(diamonds, aes(carat, price/carat, colour=clarity)) + geom_point()
  print(p)
})
```

# Repeat same analysis in R 2.15

```{r fig.width=6, fig.height=3}
library(ggplot2)
data(diamonds)

system.time({
  p <- ggplot(diamonds, aes(carat, price/carat, colour=clarity)) + geom_point()
  print(p)
})
``` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T03:51:49.197

添加`Rscript`引擎`knitr` [很容易](https://github.com/yihui/knitr/commit/a373964ce06a87cecd0008853bb097ed9c3290ac)，但我被[一个 R 错误](https://stat.ethz.ch/pipermail/r-devel/2013-March/066066.html)阻止了。不管怎样，这个引擎从[1.1.5 版](https://github.com/yihui/knitr)开始可用，并将作为 1.2 版在 CRAN 上使用。

现在您可以指定块选项`engine='Rscript'`和`engine.path='path/to/the/desired/Rscript'`.

对于大规模的性能比较，我认为 Ari B. Friedman 在上面的评论中建议是一个更好的方法。如果您有许多代码块进行比较，那么键入引擎路径将非常乏味。

# android - 使用 OpenCV4Android (java API) 保存 ORB 特征向量

> ID：15271411
> 
> 赞同：8
> 
> 时间：2013-03-07T12:35:55.837
> 
> 标签：android, opencv, vector, storage, feature-detection

我有一个训练图像集，我已经[检测](http://docs.opencv.org/java/org/opencv/features2d/FeatureDetector.html#detect%28org.opencv.core.Mat,%20org.opencv.core.MatOfKeyPoint%29)并[计算](http://docs.opencv.org/java/org/opencv/features2d/DescriptorExtractor.html#compute%28java.util.List,%20java.util.List,%20java.util.List%29)了每个图像的特征向量（使用 ORB 特征描述符和提取器。**问题是**：因为我需要保存这些特征以重新利用它们与测试图像匹配（使用SVM 分类器）；**在 Android 设备上本地存储特征向量的最佳方式是什么？**

每个图像要保存的特征向量的大小是可变的，因此那些具有非最大大小的特征向量用零填充以统一所有向量的大小。当前最大尺寸为 500 行 x 32 列；因此有 16k 个特征。

这是我到目前为止可以达到的选项；

*   我听说过 OpenCV 的[FileStorage](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html?highlight=filestorage#FileStorage)，但是在浏览 java 文档时，我注意到了`save`一种用于[HOG 功能](http://docs.opencv.org/java/org/opencv/objdetect/HOGDescriptor.html#save%28java.lang.String%29)（不是 ORB）的方法。此外，鉴于 xml 文件太大而无法加载，我不确定使用 OpenCV 的文件存储选项保存功能是否是 Android 手机的最佳内存方式。
*   我目前的选择是选择一个 sqlLite 数据库，它有一个包含两个列的表；id 和 feature（经常在网上建议）；将 sqlLite 中的所有 16k 功能制成表格。这似乎是手机存储密集型的，但这是我能找到的最合理的解决方案。

有没有一种通用的方法来处理 Android 手机上的特征向量？是否包含上述任何一种方法；如果不能，您能否就如何实施这种存储解决方案提供一些指导？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-21T00:39:37.393

在我看来，最通用的存储关键点的方法是首先将它们转换为像 JSON 这样的数据交换格式。

在您能够进行该转换后，您可以灵活地存储它。JSON 很容易转换为字符串和/或通过网络连接发送。

使用 OpenCV C++ [，您可以将数据存储为 YAML](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#void%20FileStorage%3a%3arelease%28%29)，但这不适用于 Android。

要在 Java 中解析 JSON，您可以使用这个易于使用的[库 Google GSON](https://code.google.com/p/google-gson/)。

这是我第一次尝试这样做：

```
 public static String keypointsToJson(MatOfKeyPoint mat){
    if(mat!=null && !mat.empty()){          
        Gson gson = new Gson();

        JsonArray jsonArr = new JsonArray();            

        KeyPoint[] array = mat.toArray();
        for(int i=0; i<array.length; i++){
            KeyPoint kp = array[i];

            JsonObject obj = new JsonObject();

            obj.addProperty("class_id", kp.class_id); 
            obj.addProperty("x",        kp.pt.x);
            obj.addProperty("y",        kp.pt.y);
            obj.addProperty("size",     kp.size);
            obj.addProperty("angle",    kp.angle);                          
            obj.addProperty("octave",   kp.octave);
            obj.addProperty("response", kp.response);

            jsonArr.add(obj);               
        }

        String json = gson.toJson(jsonArr);         

        return json;
    }
    return "{}";
}

public static MatOfKeyPoint keypointsFromJson(String json){
    MatOfKeyPoint result = new MatOfKeyPoint();

    JsonParser parser = new JsonParser();
    JsonArray jsonArr = parser.parse(json).getAsJsonArray();        

    int size = jsonArr.size();

    KeyPoint[] kpArray = new KeyPoint[size];

    for(int i=0; i<size; i++){
        KeyPoint kp = new KeyPoint(); 

        JsonObject obj = (JsonObject) jsonArr.get(i);

        Point point = new Point( 
                obj.get("x").getAsDouble(), 
                obj.get("y").getAsDouble() 
        );          

        kp.pt       = point;
        kp.class_id = obj.get("class_id").getAsInt();
        kp.size     =     obj.get("size").getAsFloat();
        kp.angle    =    obj.get("angle").getAsFloat();
        kp.octave   =   obj.get("octave").getAsInt();
        kp.response = obj.get("response").getAsFloat();

        kpArray[i] = kp;
    }

    result.fromArray(kpArray);

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T12:43:14.873

我建议将特征向量存储为图像，以获得简单而紧凑的表示。您甚至可以使用非破坏性压缩（例如 png）来最小化文件大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T14:38:19.593

我看到您已经考虑使用 Android SQLite 数据库：

> 我目前的选择是选择一个 sqlLite 数据库，它有一个包含两个列的表；id 和 feature（经常在网上建议）；将 sqlLite 中的所有 16k 功能制成表格。这似乎是手机存储密集型的，但这是我能找到的最合理的解决方案。

有**一种**`MatOfKeyPoint`方法可以以合理的效率 保存和检索到 SQLite 数据库。

使用数据库的优点是不需要向用户请求写入外部存储权限（尽管您的某些其他应用程序功能可能需要该权限）。

有一个完整的 Android 解决方案，Java 代码可以在[这个 StackOverflow Answer](https://stackoverflow.com/a/44089416/897007)中找到。

*以下是对该答案的代码中发生的事情的描述......*

### MatOfKeyPoint 到 byte[] 和一些属性

要保存到数据库，您需要保存到`byte[]`对象。使用该`MatOfKeyPoint.get()`方法，您可以获得填充的`float[]`. 然后使用`ByteBuffer.putFloat()`，您可以遍历所有的浮点数，最后`byte[]`使用`ByteBuffer.array()`.

您还需要将一些属性`MatOfKeyPoint.rows()`、`MatOfKeyPoint.cols()`和`MatOfKeyPoint.type()`与 的 一起保存到您的数据库`blob`中`byte[]`。

### 数据库 blob (byte[]) 到 MatOfKeyPoint

要从数据库中重构`MatOfKeyPoint`对象，首先要从`float[]`blob 中创建一个。使用`ByteBuffer.wrap(blob)`，然后运行`ByteBuffer.asFloatBuffer()`，最后`FloatBuffer.get()`使用大小合适的新`float[]`.

现在你已经`yourFloatArray`运行了`MatOfKeyPoint.create(rows, cols, type)`，这三件事来自数据库记录。最后你跑了`MatOfKeyPoint.put(0, 0, yourFloatArray)`。

# dynamics-crm - 无法使用 CSV 文件执行导入，CRM 动态权限问题

> ID：15271423
> 
> 赞同：0
> 
> 时间：2013-03-07T12:36:16.930
> 
> 标签：dynamics-crm, dynamics-crm-4

我创建了一个数据地图-“Ipad App Geveva Event”，用于使用 CRM 上导入功能的 csv 文件导入潜在客户记录。然后我设置了用户拥有的角色的权限。但是当我在最后点击导入选项时，它会失败，说“您没有足够的权限来访问 Microsoft CRM Dynamics 对象。

1.  修改角色以授予导入 csv 文件的权限

![在此处输入图像描述](../Images/f17a0a1e5a24cc7384d8d637d0f60acc.png)

从系统-> 数据管理-> 导入导入 csv 文件

![在此处输入图像描述](../Images/15f5191d77723a3e9230da2d18c02b1d.png)

点击下一步按钮继续下一步

![在此处输入图像描述](../Images/cad16779621eea84ea5a45e089a2d25b.png)

再次单击下一步按钮继续进行

![在此处输入图像描述](../Images/4301c94f8ff2ea855fa5808b52295a94.png)

最后，当我单击导入按钮时，它会失败。不知道我在角色上缺少什么权限。请协助解决以下错误

![在此处输入图像描述](../Images/68f93c9e877c5abdbfdc980cb2b58c17.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:00:01.067

我只是缺少第一个图像中角色的“附加到”权限 - 已修复，现在为所有分配有此角色的用户工作。现在这个噩梦已经过去了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:06:54.470

您需要找到更具体的错误消息。您应该能够找到类似于“prvCreateContact”的内容，它通常描述了用户缺少的确切权限。

*   [如何在 Microsoft Dynamics CRM 中启用跟踪](http://support.microsoft.com/kb/907490)。
*   [如何在 Microsoft CRM 2011（又名 Titan 或 5.0）中打开开发人员错误。](http://rostacik.net/2011/07/07/how-to-turn-on-developer-errors-in-microsoft-crm-2011-aka-titan-or-5-0/).

然后将缺少的权限与 MSDN 上的表进行比较，这应该可以帮助您确定添加用户所需的权限。

[安全角色 UI 到权限映射](http://msdn.microsoft.com/en-gb/library/hh547441.aspx)（这是 2011 版本，但应该非常相似）。

# c++ - 如何使用外部库中的函数？

> ID：15271426
> 
> 赞同：0
> 
> 时间：2013-03-07T12:36:27.090
> 
> 标签：c++, c, cmake, execute

我正在通过 glc-capture 启动一个 OpenGL 应用程序。glc 是一个 c 库，它挂接在 OpenGL 缓冲区和 x11 服务器上。glc 需要 OpenGL 显示中的一个键命令来开始记录 OpenGL 输出。

但是我的软件应该开始以编程方式记录输出，而不是通过按键。glc 文件太复杂了，我的基本知识无法完全理解它们。但基本上结构似乎如下：

[glc-capture](https://github.com/nullkey/glc/blob/master/scripts/capture.sh)是一个 shell 脚本，它进行一些设置并执行`LD_PRELOAD=libglc-capture.so "${@}"`. [x11.c](https://github.com/nullkey/glc/blob/master/src/hook/x11.c)包含监听关键事件的 x11 钩子。正在进行一些初始化。在特殊键事件上，该函数`start_capture()`由[x11.c](https://github.com/nullkey/glc/blob/master/src/hook/x11.c)执行。 `start_capture()`在文件[lib.h](https://github.com/nullkey/glc/blob/master/src/hook/lib.h)中定义并在[main.c](https://github.com/nullkey/glc/blob/master/src/hook/main.c)文件中实现。

**我的问题：如何在我自己的 c++ 应用程序上执行 start_capture() 函数？** 我尝试通过链接库（钩子和捕获）`CMakeList.txt`并包含头文件，但这总是让我处于“未定义的引用：start_capture（）”。

这是链接库的 CMakeList.txt 中的行：

```
target_link_libraries(${PROJECT_NAME} ${QT_LIBRARIES} libglc-hook.so libglc-capture.so libglc-core.so libglc-export.so) 
```

EDIT2：这是我在运行时遇到的错误：

> /opt/ros/fuerte/stacks/visualization/rviz/bin/rviz：符号查找错误：/home/jrick/fuerte_workspace/sandbox/Bag2Film/lib/libBag2Film.so：未定义符号：start_capture

nm的输出：

> jrick@robot2:~/fuerte_workspace/sandbox/Bag2Film/lib$ nm libBag2Film.so | grep 捕获
> 
> 0000000000003a30 t start_capture
> 
> 0000000000003790 t stop_capture

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:47:29.403

我不知道glc-capture，但从你所说的应该可以将你的应用程序直接链接到libglc-capture（尝试`-lglc-capture`作为链接器标志传递）。如果这不起作用，请查阅库文档。

此外，您必须包含一个包含`start_capture`. 同样，请查阅库文档以了解要使用的文件。如果没有标头，您仍然可以自己声明它（听起来像一个 C 库，所以沿线的东西`extern "C" { void start_capture(); }`可能会这样做。

`start_capture()`如果您的项目在这些更改后仍然可以编译和链接，请在您需要的地方添加调用。

如果没有帮助，请回到这里。

# android - 带有自定义 baseadapter 的微调器

> ID：15271429
> 
> 赞同：0
> 
> 时间：2013-03-07T12:36:31.263
> 
> 标签：android, android-spinner, baseadapter

我有一个自定义组件充当表格（标题+正文）。在我的标题中，我试图根据表格每一列中填充的数据类型添加“filterViews”。所以我有一个布尔类型的列，表示为不可点击的复选框。

我正在尝试在具有三个可能选择的标题单元格中创建一个微调器：

*   清除过滤器（字符串）
*   选中的复选框
*   未选中的复选框

我正在努力使此代码正确。这是我的 BaseAdapter 代码：

```
public class BooleanAdapter extends BaseAdapter
{
    private List<Object> values = new LinkedList<Object>();

    public BooleanAdapter(Context context)
    {   
        TextView txt = new TextView(context);
        txt.setText("Clear filter");
        values.add(txt);

        CheckBox cb1 = new CheckBox(context);
        cb1.setClickable(false);
        cb1.setChecked(true);
        values.add(cb1);

        CheckBox cb2 = new CheckBox(context);
        cb2.setClickable(false);
        cb2.setChecked(false);
        values.add(cb2);
    }

    @Override
    public int getCount()
    {
        return values.size();
    }

    @Override
    public Object getItem(int position)
    {
        return values.get(position);
    }

    @Override
    public long getItemId(int position)
    {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        return (View) values.get(position);
    }
} 
```

我在代码中创建微调器：

```
Spinner spinner = new Spinner(getActivity());
BooleanAdapter adapter = new BooleanAdapter(getActivity());
spinner.setAdapter(adapter); 
```

我收到此错误：

```
java.lang.ClassCastException: android.view.ViewGroup$LayoutParams cannot be cast to android.widget.AbsListView$LayoutParams
at android.widget.ListView.measureScrapChild(ListView.java:1181)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1264)
at android.widget.ListView.onMeasure(ListView.java:1173)
at android.view.View.measure(View.java:10853)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4353)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1284)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:613)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:519)
at android.view.View.measure(View.java:10853) 
```

我很感激任何帮助。我还是 android 的新手（3 周），所以我可能缺少一些基本的东西。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:45:41.247

必须为适配器中的每个项目设置 LayoutParameters。

```
public BooleanAdapter(Context context)
{   
    AbsListView.LayoutParams lp = new AbsListView.LayoutParams(AbsListView.LayoutParams.WRAP_CONTENT, AbsListView.LayoutParams.WRAP_CONTENT);
    TextView txt = new TextView(context);
    txt.setText("Clear filter");
    txt.setLayoutParams(lp);
    values.add(txt);

    CheckBox cb1 = new CheckBox(context);
    cb1.setClickable(false);
    cb1.setChecked(true);
    cb1.setLayoutParams(lp);
    values.add(cb1);

    CheckBox cb2 = new CheckBox(context);
    cb2.setClickable(false);
    cb2.setChecked(false);
    cb2.setLayoutParams(lp);
    values.add(cb2);
} 
```

# ssis - SSIS - 将值从 For 循环项枚举器传递给 Executesqltask

> ID：15271431
> 
> 赞同：1
> 
> 时间：2013-03-07T12:36:32.363
> 
> 标签：ssis

如何将变量从 For Loop Item Enumerator 传递给 Executesqltask

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:49:55.900

假设您知道如何使用 for 循环，您应该转到“变量映射”选项卡并将循环的结果映射到包变量。因此，如果您在一个文件夹上循环以获取其中的所有文件，您可以将索引 0（右列）映射到一个名为 @fileName（左列）的变量，因此在每次迭代时，循环将读取一个文件名并存储在@fileName 变量

# git - 列出所有更改的文件以及 Git 提交之间的更改状态（添加、修改、删除）

> ID：15271435
> 
> 赞同：34
> 
> 时间：2013-03-07T12:36:44.623
> 
> 标签：git, git-diff

我经常使用以下命令列出两次提交之间更改的文件：

```
git diff --name-only SHA1 SHA2 
```

它给出了一个文件列表，有点像这样：

```
/src/example/file1
/src/example/file2
/src/example/file3

```

这几乎没有尽头。

**我真的希望能够在每个文件旁边显示对更改状态的简要引用，指示文件是否被添加、修改或删除。**

这是一个演示该概念的示例：

```
git diff --name-only --and-how-me-the-change-status SHA1 SHA2 
```

```
/src/example/file1
M /src/example/file2
D /src/example/file3

```

更改状态 (A, M, D) 仅作为示例显示，我不介意这是什么，只要它是明确的。

我知道我可以使用该`--diff-filter`选项仅列出添加的文件、仅列出已修改的文件或仅列出已删除的文件。使用这个选项意味着我必须运行三个命令来获取三个文件名列表。这很好，但可能会更好。

**我可以运行一个命令来给我上面的示例输出吗？**

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-07T14:38:08.953

使用, 与plus 更改文件的状态`--name-status`相同：`--name-only`

```
git diff --name-status SHA1 SHA2 
```

# css - 如何在css中访问这个类

> ID：15271436
> 
> 赞同：0
> 
> 时间：2013-03-07T12:36:46.493
> 
> 标签：css

```
<form name="fc">
         <div class="input-text">
         <input type="text" id="postquestion" name="postquestion" style="font-size:12px;"class="ps" value="" placeholder="What's Your Question..?" data-mini="true" />
         <a href="#dialog" class="dig" value="" data-role="button" data-icon="plus" data-inline="true" data-rel="dialog" data-iconpos="notext"></a>
         <input type="submit" value="Ask" class="ask" data-inline="true" data-mini="true"data-theme="b"/>
      </div>
</form> 
```

此代码不起作用

```
.ask
{
margin-top:-10px;
} 
```

我是css的新手，请帮助我。[http://jsfiddle.net/shreeramns/4dRuP/](http://jsfiddle.net/shreeramns/4dRuP/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:39:53.923

`input`是一个内联元素，因此它不能应用任何边距。您需要使其成为块级元素：

```
.ask
{
    display: inline-block;
    margin-top:-10px;
} 
```

此外，如果可能，您不应该使用负边距，而是使用定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:59:43.773

您可能必须同时使用`float:left`按钮和文本框

```
 .ask{
        margin-top:-10px;
        display:inline;
        position:relative;
        float:left;
    }
    .ps{
        float:left;
        display:inline;
    } 
```

预览 >> [http://jsfiddle.net/vmyc8/](http://jsfiddle.net/vmyc8/)

# jsf-2 - 导出primefaces：树到pdf

> ID：15271437
> 
> 赞同：0
> 
> 时间：2013-03-07T12:36:47.943
> 
> 标签：jsf-2, primefaces, tree

我的网页上显示了一个树结构。节点是根据从数据库检索的数据动态创建的。我希望将整个树（展开视图）导出为 pdf 文件。如何使用 java 库来实现这一点？我正在使用带有 primefaces 3.5 的 JSF2.1。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T19:39:48.723

我有类似的问题，我发现了这个“插件”，检查一下：[https ://github.com/rdicroce/jsfexporter](https://github.com/rdicroce/jsfexporter)

# java - 在java中读取.xlsx文件

> ID：15271439
> 
> 赞同：1
> 
> 时间：2013-03-07T12:36:59.707
> 
> 标签：java, struts2

我正在尝试上传 Excel 2007 ( `.xlsx`) 文件，然后使用 Struts 2 使用以下代码读取其数据：

```
InputStream inp = new FileInputStream(upload);
Workbook wb_xssf;
Sheet sheet = null; 
wb_xssf = new XSSFWorkbook(inp);// ERROR Line 4
sheet = wb_xssf.getSheetAt(0); 
```

但是，它在第​​ 4 行抛出错误（如上所示）。任何人都可以帮助解决这个问题吗？

我正在使用以下 JAR：

*   dom4j 1.1
*   xmlbean 2.3.0
*   poi 3.9 罐

struts.xml 中文件上传的拦截器

```
<interceptor-ref name="fileUpload">
    <param name="allowedTypes"> 
        application/vnd.ms-excel,application/x-msexcel,application/ms-      excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
    </param>
    <param name="maximumSize">
        1073741824
    </param>
</interceptor-ref> 
```

这是异常的堆栈跟踪：

```
 java.lang.reflect.InvocationTargetException
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        java.lang.reflect.Method.invoke(Method.java:616)
        com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
        com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
        com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
        org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:306)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
        org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
        org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
        org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
        org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
    root cause

    java.lang.NoClassDefFoundError: org/dom4j/DocumentException
        org.apache.poi.openxml4j.opc.OPCPackage.init(OPCPackage.java:154)
        org.apache.poi.openxml4j.opc.OPCPackage.<init>(OPCPackage.java:141)
        org.apache.poi.openxml4j.opc.Package.<init>(Package.java:54)
        org.apache.poi.openxml4j.opc.ZipPackage.<init>(ZipPackage.java:82)
        org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:267)
        org.apache.poi.util.PackageHelper.open(PackageHelper.java:39)
        org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:204)
        com.livic.RateAnalysis.biz.SteelAction.saveUploadExcel(SteelAction.java:544)
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        java.lang.reflect.Method.invoke(Method.java:616)
        com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
        com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
        com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
        org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:306)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
        org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
        org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
        org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
        org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
    root cause

    java.lang.ClassNotFoundException: org.dom4j.DocumentException
        org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
        org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        org.apache.poi.openxml4j.opc.OPCPackage.init(OPCPackage.java:154)
        org.apache.poi.openxml4j.opc.OPCPackage.<init>(OPCPackage.java:141)
        org.apache.poi.openxml4j.opc.Package.<init>(Package.java:54)
        org.apache.poi.openxml4j.opc.ZipPackage.<init>(ZipPackage.java:82)
        org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:267)
        org.apache.poi.util.PackageHelper.open(PackageHelper.java:39)
        org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:204)
        com.livic.RateAnalysis.biz.SteelAction.saveUploadExcel(SteelAction.java:544)
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        java.lang.reflect.Method.invoke(Method.java:616)
        com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
        com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
        com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
        org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:306)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
        com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
        com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
        org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
        org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
        org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
        org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
        org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:47:37.053

您的异常的实际（**根本原因**）在这一行。

```
java.lang.ClassNotFoundException: org.dom4j.DocumentException 
```

下载 DOM4J 并将库放入您的类路径并编译/构建您的代码。

# matlab - Matlab中的lcg编程

> ID：15271440
> 
> 赞同：0
> 
> 时间：2013-03-07T12:37:02.160
> 
> 标签：matlab, random

我正在尝试使用线性同余生成器在 Matlab 中解决以下问题。我的函数代码行如下所示。`m`基本上是您可以预期的值范围的最大值，因此取决于问题。初始种子`x`首先由时钟确定，然后每个随机数被反馈到函数中以产生一个新的。此处给出了选择 lcg 值的规则[http://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)。我需要的是在指定时期内的良好`a`价值观`c`。

我的lcg代码

```
random_number = mod((a*x + c),m); 
```

*   Q1 需要 1 到 52 之间的随机数（扑克手的概率）
*   Q2 需要 1 到 366 之间的随机数（生日悖论）
*   Q3 需要 1 到 3 之间的随机数（蒙蒂霍尔问题）
*   Q4 需要 1 到 1000 之间的数字

我知道这看起来很简单，但是用小范围实现这一点往往会产生一个小周期的模式，即连续重复 4 位数字。

此外，也可以使用不同的`m`值并过滤掉我所需范围之外的任何值，但老实说，我认为这没有必要。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:01:27.133

我会以不同的方式处理这个问题：

*   取一些*已知*值（维基百科有一个表格）
*   如果你接受它们，你可以*假设** 它们分布均匀
*   将结果缩放到您的范围，例如`rnd()*52 / m + 1`并将其作为输出

    *请记住，“当您假设时，您会从你和我中脱颖而出”；）

# django - Django：我可以为表单提供参数以将其用于不同的情况吗？

> ID：15271449
> 
> 赞同：0
> 
> 时间：2013-03-07T12:37:44.887
> 
> 标签：django, django-forms, django-views

我是 Django 新手，我对用户帐户（用户名、密码）使用一种表单两次。第一个用户是必需的，第二个用户是可选的。

问题是，复选框也由 required 显示。我可以为视图提供一个参数以避免第一个用户的复选框并将其显示给第二个用户吗？我想做一个案例

那可能吗？我不想仅仅因为一个不同的字段而编写两个具有相同字段的不同类。

我的代码：

视图.py

```
if request.method == "POST":
    admin_form = MysqlDatabaseForm_user(request.POST or None, given_argument='admin')
    user_form = MysqlDatabaseForm_user(request.POST or None, given_argument='extra_user')

    if admin_form.is_valid():
            #do something
    if user_form.is_valid():
            #do something

else:
    admin_form = MysqlDatabaseForm_user()
    user_form = MysqlDatabaseForm_user()

return TemplateResponse(request, "services/database/add_service_database.html", {'admin_form': admin_form,
                                                                                 'user_form': user_form},) 
```

表格.py

```
class MysqlDatabaseForm_user(forms.ModelForm):
class Meta:
    model = MysqlUser

def __init__(self, *args, **kwargs):
    given_argument = kwargs.pop('given_argument', None)
    super(MysqlDatabaseForm_user, self).__init__(*args, **kwargs)

    if given_argument == 'extra_user':
        self.fields['extra_user'] = forms.BooleanField(required=False)
    else:
        self.fields[given_argument] = forms.BooleanField(required=False) 
```

else-case 用于筛选，“given_argument”中的内容。它似乎是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:54:20.903

```
#forms.py
class UserForm(forms.ModelForm):
    username = forms.CharField(max_length=255)

    def __init__(self, *args, **kwargs):
        given_argument = kwargs.pop('given_argument', None)
        super(UserForm, self).__init__(*args, **kwargs)

        if given_argument:
            if given_argument == 'extra_user':
                key = 'extra_user'
            else:
                key = given_argument.lower()
            self.fields[key] = forms.BooleanField(required=False)

#views.py
def your_view(request):
    user_form = UserForm(request.POST or None, given_argument='extra_user',
        prefix='user')
    admin_form = UserForm(request.POST, given_argument='admin', prefix='admin')
    ...

#template.html
<form action="." method="post" enctype="[the enctype you need]">
    <ol>
        <li>User Form</li>
        {{ user_form.as_ul }}
    </ol>

    <ol>
        <li>Admin Form</li>
        {{ admin_form.as_ul }}
    </ol>

    <input type="submit" value="Submit" />
</form> 
```

只需覆盖，然后在调用类之前`__init__`从 中弹出额外的参数。这将允许您传入参数，将其从表单类通常期望的参数中删除，然后传递剩余的.`**kwargs``super()``**kwargs``**kwargs`

如果要从传入的参数中分配字段的键，则需要注意传入的值。没有特殊字符、空格等。

如果它是 GET 请求，则不需要单独的条件来实例化表单 - 这就是`request.POST or None`当它传递给表单类构造函数时完成的。

您也不需要两个单独的模型表单类。您将 key 参数传递给字段构造函数，因此您可以使用相同的表单类，并且只需传入您的可选参数。您会注意到我已将`prefix`参数添加到表单中以防止字段之间的命名冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:28:32.530

```
class MysqlDatabaseForm_user(forms.ModelForm):
    class Meta:
        model = MysqlUser

    def __init__(self, given_argument, *args, **kwargs):
        super(MysqlDatabaseForm_user, self).__init__(*args, **kwargs)

        if given_argument == 'extra_user':
            self.fields['extra_user'] = forms.BooleanField(required=False)

def view(request):
    if request.method == 'POST':
        admin_form = MysqlDatabaseForm_user(request.POST, given_argument='admin') 
        user_form = MysqlDatabaseForm_user(request.POST, given_argument='extra_user')
        ...........
    else:
        admin_form = MysqlDatabaseForm_user(given_argument='admin') 
        user_form = MysqlDatabaseForm_user(given_argument='extra_user')

    return render(request, 'page.html', {
        'admin_form': admin_form,
        'user_form': user_form,
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:32:35.663

通过使用 modelform_factory，让您的代码角色拥有自己的形式。（通过这样一个简单的示例，您也可以手动编码。请参阅下面的 Catherine 示例，了解手动编码的一个很好的示例。）

怎么样：

```
from django.forms.models import modelform_factory
form_fields = ['extra_user'] if given_argument == 'extra_user' else []
user_form = modelform_factory(Model, form=MysqlDatabaseForm_user, fields=form_fields) 
```

`user_form.is_valid()`应该工作，因为该`extra_user`领域是`required=False`

Django 允许您从 Model 及其对应的 ModelForm 派生自定义表单。您甚至可以创建不立即验证的表单，但您可以使用它来创建模型对象，以便在进一步活动后保存。具体来说，你可以...

```
if request.Post:
  form = user_form(request.POST)
  model_object = form.save(commit=False) # now you have an model instance, and no longer need the form
  model_object = process_object(model_object)
  model_object.save() 
```

这两个工具，`modelform_factory`和 的能力`form.save(commit=False)`通常可以让您避免重新定义标准方法，例如`__init__`和`save`。当我认为我需要修改这些方法时，我通常会发现，我缺少一些自然内置在 Django 中的功能。

# iphone - 将 NSString 转换为 NSArray

> ID：15271450
> 
> 赞同：2
> 
> 时间：2013-03-07T12:37:47.637
> 
> 标签：iphone, nsstring, nsmutablearray

我有一个字符串如下：

```
NSString *str = @"abcd,efgh"; 
```

现在我想将此字符串转换为 NSMutableArray 之类的

```
NSMutableArray *arr = {abcd,efgh}; 
```

那我该怎么做呢？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T12:40:09.407

```
NSArray *arr = [@"abcd,efgh" componentsSeparatedByString:@","]; 
```

应该做的工作。

# ruby - 这个角色是什么？â\u0080\u0099

> ID：15271453
> 
> 赞同：4
> 
> 时间：2013-03-07T12:37:56.663
> 
> 标签：ruby, character-encoding

这个字符是什么：â\u0080\u0099？

这应该是撇号或单引号。

如何将它（使用 Ruby）转换为简单的单引号 ' 或在网页中正确显示为单引号？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:28:42.627

这是一个印刷上正确的撇号，更准确地说是 RIGHT SINGLE QUOTATION MARK' (U+2019) (')，经过一些不正确的字符代码转换或解释。它似乎是该字符的 UTF-8 编码形式（三个字节，0xE2 0x80 0x99）被错误地解释为 ISO-8859-1 编码数据。

# mysql - mysql与正则表达式多词匹配

> ID：15271454
> 
> 赞同：0
> 
> 时间：2013-03-07T12:37:58.583
> 
> 标签：mysql, sql

我想用几个词机词或子词在 mysql 数据库中进行研究

例如，如果我搜索“ata”，我想获得“data”和“database”，如果我搜索“ata”和“get”，我想获得“database is getting”

目前我使用 2 次 LIKE 函数：

```
SELECT col FROM mytable WHERE col LIKE "%ata%" 
```

进而

```
SELECT col FROM mytable WHERE col LIKE "%get%" 
```

如果工作，但我认为有一种更有效的方法。

我试过：

```
SELECT col FROM mytable WHERE MATCH (col) AGAINST (concat('%','ata get','%') IN BOOLEAN MODE) 
```

但它不起作用。

如果有使用 MACH AGAINST 的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:07:40.420

为什么不在`and`原始查询中使用？

```
SELECT col
FROM mytable
WHERE col LIKE "%ata%" and col like col LIKE "%get%" 
```

或者，如果您关心匹配的顺序，可以将它们组合成一个表达式：

```
select col
from mytable
where col like '%ata%get%' 
```

# magento - Magento - 查找过去一小时内创建的产品

> ID：15271455
> 
> 赞同：4
> 
> 时间：2013-03-07T12:38:07.307
> 
> 标签：magento, product, datecreated

我正在尝试查找过去一小时内创建的产品。

我可以像这样按创建日期对产品进行排序：

```
$collection = Mage::getModel('catalog/product')
    ->getCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToSort('created_at', 'desc'); 
```

但我想按 created_at 过滤。我尝试用 替换上面块的最后一行`addAttributeToFilter('created_at', array('gteq' =>$time));`，我认为这一定是正确的，但我找不到正确的格式`$time`。

我在这里是否走在正确的轨道上，如果是这样，我应该采用什么格式`$time`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:50:30.463

您应该使用 MySQL 时间戳格式。以下代码对我有用：

```
$time = "2013-02-06 09:32:23"; // 'yyyy-mm-dd hh:mm:ss'

$collection = Mage::getModel('catalog/product')
->getCollection()
->addAttributeToSelect('*')
->addAttributeToSort('created_at', 'desc')
->addAttributeToFilter('created_at', array('gteq' =>$time)); 
```

您可以很容易地找到给定属性的格式，只需将其回显到屏幕上即可。例如：

```
$collection = Mage::getModel('catalog/product')
->getCollection()
->addAttributeToSelect('*')
->addAttributeToSort('created_at', 'desc');

exit($collection->getFirstItem()->getData('created_at'); 
```

输出是*2013-02-06 09:32:23*（在我的环境中）

# android - 更改图像视图时的线程异常

> ID：15271459
> 
> 赞同：0
> 
> 时间：2013-03-07T12:38:17.937
> 
> 标签：android, multithreading, android-layout, android-imageview

每当我尝试使用线程暂停活动一段时间并使用函数更改线程内的图像视图资源时，它会给我一个异常，说只有原始线程可以更改它。现在我知道这是因为视图是在原始活动中声明的，而不是在我的线程中。是否有其他方法可以暂停活动并在活动暂停时执行此操作，是否有任何方法可以更改声明线程中的这些参数。两者的解决方案将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:46:10.523

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)执行后台任务，并更新您的 UI 视图。如果 AsyncTask 限制太多，我建议阅读 Google 自己的有关[线程和 Android](http://developer.android.com/guide/components/processes-and-threads.html)的文档。它们提供了更新 UI 线程的最佳实践示例。

根据您的解释，一种可能的解决方案可能是您的后台线程在应该更改 imageView 时向主线程发送一条消息（Runnable）。当 UI 线程收到此消息时，它可能会在内容更改时使某些 UI 元素无效。

# asp.net-mvc - MVC ASP.NET 网站在设置显示之前注销

> ID：15271465
> 
> 赞同：2
> 
> 时间：2013-03-07T12:38:40.990
> 
> 标签：asp.net-mvc, session

我有以下配置，试图让会话保留大约 239 分钟，但是会话在不到一个小时内丢失。

```
<system.web>
<sessionState mode="InProc" timeout="240" />
<compilation debug="true" targetFramework="4.0">
  <assemblies>
       ...
  </assemblies>
</compilation>
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="239" />
</authentication>
<pages>
  <namespaces>
       ...
  </namespaces>
</pages> 
```

我不相信有任何 C# 代码覆盖这些设置。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:46:45.890

您在应用程序池进程上还有一个*空闲超时*设置，默认设置为 20 分钟，例如每 20 分钟（如果没有活动）应用程序池被重置，这也会丢弃任何活动的进程内会话。

![在此处输入图像描述](../Images/6278dda7ded9df253b65936870d6403f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:57:10.887

会话超时和表单身份验证超时的工作方式完全不同。

*   [表单认证超时和会话超时的区别](https://stackoverflow.com/questions/2178176/differences-in-forms-auth-timeout-and-session-timeout)
*   [表单身份验证超时与会话超时](https://stackoverflow.com/questions/1470777/forms-authentication-timeout-vs-session-timeout)
*   [http://completedevelopment.blogspot.com/2009/12/caution-with-using-sessiontimeout-and.html](http://completedevelopment.blogspot.com/2009/12/caution-with-using-sessiontimeout-and.html)

# ios - 从 URL 播放视频并同时通过摄像头录制视频 - Objective C

> ID：15271466
> 
> 赞同：0
> 
> 时间：2013-03-07T12:38:42.173
> 
> 标签：ios, objective-c

我正在尝试构建一个可以从 URL 播放视频并同时使用前置摄像头录制视频的应用程序。我试过了，但是当相机开始拍摄时视频停止播放，反之亦然。请帮帮我。提前致谢！！这是我的代码，我正在使用 DIYCam（使用 AVFoundation）框架，它可以完美录制并使用 AVPlayer 进行播放

```
- (IBAction)startRecording:(id)sender {
self.cam = [[DIYCam alloc] initWithFrame:CGRectMake(0, 0, 320, 300)];
self.cam.layer.anchorPoint = CGPointMake(0.f, 0.f);
self.cam.frame = CGRectMake(0, 0, 320, 300);
self.cam.delegate       = self;
[self.cam setupWithOptions:nil];
[self.cam setCamMode:DIYAVModeVideo];
self.cam.backgroundColor = [UIColor greenColor];
[self.cam captureVideoStart]; 
```

}

-（无效）播放视频{

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"responcevideo"
                                     withExtension:@"mp4"
                                      subdirectory:nil];
AVPlayer *_avPlayer;
_avPlayer = [AVPlayer playerWithURL:url] ; 
```

AVPlayerLayer *_avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:_avPlayer];

```
_avPlayerLayer.frame = self.view.layer.bounds;
[self.view.layer addSublayer:_avPlayerLayer];

[_avPlayer play]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-19T01:22:00.177

尝试在不同的线程上运行录制和播放视频。

# sql - SQL Server 2012 FileTable 映射到已安装的 S3 虚拟目录

> ID：15271468
> 
> 赞同：2
> 
> 时间：2013-03-07T12:38:48.553
> 
> 标签：sql, sql-server, amazon-s3, filestream, filetable

是否可以在处理 Sql Server 2012 数据库的计算机上挂载 Amazon S3 虚拟目录，以便将该虚拟目录映射到 Sql server 中的文件表？我希望是利用 S3，但使用 sql server 2012 的文件流功能的易用性来管理用户上传的文件。

我把这个想法作为这个网站的衍生网站[http://cloudcomputing.sys-con.com/node/1645639](http://cloudcomputing.sys-con.com/node/1645639)我看到你可以在 Windows 中挂载一个 S3 目录。但是，我的意图是不将我的 sql server 数据库备份到这样一个已安装的文件夹中，而是在文件流表中引用该文件夹，并能够稍后在亚马逊的 cdn 中引用保存在该表中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:53:52.170

阅读这篇文章后[FILESTREAM/FILETABLE Clarifications for Implementation](https://stackoverflow.com/questions/11644623/filestream-filetable-clarifications-for-implementation?rq=1)

我认为指向 S3 的虚拟目录足以欺骗 SQL Server 的文件表功能。

# java - 如何解决“来自关联的输入流的空清单”警告

> ID：15271473
> 
> 赞同：5
> 
> 时间：2013-03-07T12:38:59.430
> 
> 标签：java

我试图停止警告：

```
JarClassLoader: Warning: Null manifest from input stream associated with: <path to lib / jar file> 
```

每次我运行我的 java 应用程序时都会显示它。我意识到它并没有停止它的工作，但我认为警告是有原因的，我想了解原因和方式。

作为参考，jar 文件是使用 one-jar 创建的。我看过这个[stackoverflow问题/答案](https://stackoverflow.com/questions/3662659/one-jar-remove-verbose-warning-information-on-application-load)，但这似乎更多是关于抑制消息而不是解决它们。

[这里](http://sourceforge.net/tracker/index.php?func=detail&aid=3139182&group_id=111153&atid=658458)也有人问过，但我又找不到答案。

# entity-framework - 将必填字段映射到数据库中的可为空

> ID：15271474
> 
> 赞同：2
> 
> 时间：2013-03-07T12:39:00.737
> 
> 标签：entity-framework, ef-code-first

我有一个实体框架代码优先模型，其中供应商必须始终有一个供应商组：

```
 public virtual SupplierGroup SupplierGroup { get; set; }
    public int SupplierGroupId { get; set; } 
```

但是底层数据库必须将 SupplierGroupId 设为可为空（由于另一个系统使用它，在该系统中，Supplier 可以在没有 SupplierGroup 的情况下存在）。

有没有办法让实体框架生成/映射到一个可以为空的数据库字段，但否则继续根据需要处理模型中的字段？

我尝试了一个流畅的映射：

```
modelBuilder.Entity<Supplier>()
     .Property(s => s.SupplierGroupId)
     .IsOptional(); 
```

但是当代码先生成数据库时，该字段仍然不能为空。

（如果曾经请求过没有 SupplierGroup 的供应商，这应该抛出异常，因为它永远不会发生）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:58:50.387

使用带有默认数据库初始化程序的 Entity Framework 创建数据库是不可能的，因为`int`属性会导致可以为空的列。据我所知，您的选择是：

1.  编写一个自定义数据库初始化程序，该初始化程序执行一个 SQL 脚本，将列从不可为空的列更改为可空的列

2.  不要使用实体框架创建数据库，而是手动创建数据库（`null`例如，通过将数据库初始化程序设置为），具有可为空的列和不可为空的属性

3.  将您的需求视为未反映在数据库中的*应用程序特定*业务逻辑（并且不能是因为访问数据库的其他应用程序需要允许`NULL`），即`int?`在您的应用程序中创建属性并确保`null`从未使用过

对于选项 1 和 2，您的模型与数据库“不同步”，这意味着当您`Supplier`从数据库加载 a 时会出现`SupplierGroupId`异常`NULL`（可能类似于*“...无法在非可为空的属性...”*）。

我会选择选项3。

# azure - Azure PaaS 和持续集成

> ID：15271476
> 
> 赞同：2
> 
> 时间：2013-03-07T12:39:03.140
> 
> 标签：azure

我计划使用 Microsoft Azure 云服务来托管我的应用程序，使用 Azure 可以很好地处理暂存/生产实例。

但是，通常我们需要运行 git 和 CI 服务（Jenkins 或 CruizeControl.Net）来创建自动化构建。这适合 Azure 云服务，如果我选择将我的应用程序托管在 VM 上，我会将它们放在那里，但是由于我决定走云服务之路，所以我没有可以用作构建服务器的服务器，我有什么选择？

PS 我们没有运行 TFS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:46:27.217

Windows Azure 网站具有 git/tfs 集成（本地 git、github、bitbucket、tfs）。

但是...由于您的目标是云服务：您需要在基于 Windows 的机器上创建构建。然后，您不仅可以自动化构建，还可以自动打包 cspkg 文件（您可以调用命令行工具[cspack](http://msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx)为 Azure 打包构建，使用[csupload](http://msdn.microsoft.com/en-us/library/windowsazure/gg466228.aspx)上传，然后使用 PowerShell 或跨平台用于进行部署升级的[命令行工具](http://www.windowsazure.com/en-us/downloads/)（选择登台或生产）。

我喜欢上传部署包、唯一命名每个包并保留各种构建部署（和匹配的配置文件）的历史库的想法。如果我需要回滚到先前的实例，这很有效（当然，staging 可以让你这样做，但你可以选择不运行 staging 24/7）。

希望这可以帮助...

# php - 需要用户级别的用户体验数据库帮助

> ID：15271485
> 
> 赞同：0
> 
> 时间：2013-03-07T12:39:26.257
> 
> 标签：php, mysql, codeigniter

我不是完全新手，但也不是 php&mysql 的大师，现在我正在为我的网站使用 Codeigniter。

当您向网站添加问题时，我为网站的某些活动安排了一些用户 xp 积分，您将获得 10 分，如果您写下答案，您将获得 20 分。ETC..

所以我的 user_xp 表有这些列：

* * *

```
user_id    xp_points    level 
```

* * *

所以我只是很好奇在不同点之间为我的用户制作 40 个不同的级别，所以我不想再按 if 案例再次计算 40 次，所以如果有人知道它会对我有很大帮助。（如果每个级别都相同点会很容易，但更高级别应该更难不是吗？）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:58:53.963

您可以使用一些[几何](http://en.wikipedia.org/wiki/Geometric_progression)级数来根据用户的 XP 计算级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:54:54.213

if 或 switch case, no way out =) ，你需要将它封装在一个地方，比如 helper，并制作类似 function getUserLevel($xp_points) { .... return $level; }

# orchardcms - 使用查看计数器对查询进行排序

> ID：15271489
> 
> 赞同：0
> 
> 时间：2013-03-07T12:39:39.957
> 
> 标签：orchardcms, orchardcms-1.6

我想做一个投影，根据用户查看次数对一些页面进行排序。所以我安装了投票模块，然后安装了内容视图计数器模块。我启用了后者，并且我设法在每个页面中显示视图计数器。但是当我尝试进行基于数量排序的查询时视图计数查询列表中没有这样的参数。那么如何根据查看次数对查询进行排序？有什么方法可以使查看次数可排序？

PS我的第一个想法是使用视图计数器的值向我的页面添加一个新字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:08:13.740

在查询下，单击绑定选项卡，然后为投票计数器添加绑定。完成后，您应该能够将计数器添加为排序标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:42:16.287

为了能够按 TotalViews 对查询进行排序，我们必须修改内容视图计数器模块中的一些代码部分。

1）修改模型

```
public class UserViewRecord : ContentPartRecord
{
    public virtual int TotalViews { get; set; }
}

public class UserViewPart : ContentPart<UserViewRecord>
{
    [Required]
    public int TotalViews
    {
        get { return Record.TotalViews; }
        set { Record.TotalViews = value; }
    }
} 
```

实际上，当我们可以存储总视图时，我们会创建一个表。所以我们必须再执行 2 个步骤

2）在migration.cs中添加一些代码

```
public int UpdateFrom2() {

        SchemaBuilder.CreateTable("UserViewRecord", table => table
          .ContentPartRecord()
          .Column("TotalViews", DbType.Int32)
      );

        ContentDefinitionManager.AlterPartDefinition(
            typeof(UserViewPart).Name, cfg => cfg.Attachable());

        return 3;
    } 
```

3) 修改我们的处理程序类以指定应使用 UserViewRecord 的 IRepository 作为该部分的存储。

```
 public UserViewPartHandler(IVotingService votingService,
        IOrchardServices orchardServices, IRepository<UserViewRecord> repository)
    {
        _votingService = votingService;
        _orchardServices = orchardServices;
        Filters.Add(StorageFilter.For(repository)); 
        //more code
        //more code

     } 
```

毕竟，正如 Bertrand Le Roy 所说，我们可以为 TotalViews 属性添加一个绑定，并使用 TotalViews 作为排序标准。

# flash - SWF 未显示在网页上

> ID：15271496
> 
> 赞同：0
> 
> 时间：2013-03-07T12:39:58.290
> 
> 标签：flash, video, embed

我在 Flash CS6 中导入了一个 .flv 视频，然后导出为 .swf，一切正常。但我需要循环播放视频，所以在 Flash CS6 中的动作中我写了“

```
var myLis:Object = new Object;
myLis.complete = function(){
 flvPlayer.play();
}
flvPlayer.addEventListener("complete", myLis); 
```

...再次导出到 swf，当我使用 Flash Player 11 在 PC 上打开文件时，它正在播放，但嵌入到网页时，它仅在字段中显示。

嵌入代码：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"  codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="498" height="380" id="test1"> 
 <param name="movie" value="banner1.swf" />
 <embed src="banner1.swf" width="498" height="380" name="test1" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" />
</object> 
```

如果没有循环脚本，则此代码有效，但在我添加脚本以循环视频后无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:59:04.343

我刚刚发现 .SWF 默认链接到硬盘上的 .flv，但该链接包含驱动器号、父目录等。因此在 Flash CS6 中单击视频并将源链接更改为相对链接 - 来自“ C:/文件夹/example.flv”到“example.flv”。两个都上传到服务器，没问题。

# android - 如何更改警报对话框标题分隔线颜色android

> ID：15271500
> 
> 赞同：11
> 
> 时间：2013-03-07T12:40:03.810
> 
> 标签：android, colors, dialog, styles, android-alertdialog

我想在警报对话框中设置样式或更改标题标题的分隔线颜色。我搜索了这个问题，我认为很多人都在搜索这个问题。但我仍然无法找到正确的解决方案。我想更改以下内容。 ![蓝色标题分隔线](../Images/53a13edd50601ab7f0dddda49ad9c385.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-28T09:08:44.797

您实际上可以通过一个非常简单的 hack 来更改 AlertDialog 标题的颜色：

```
public static void brandAlertDialog(AlertDialog dialog) {
    try {
        Resources resources = dialog.getContext().getResources();
        int color = resources.getColor(...); // your color here

        int alertTitleId = resources.getIdentifier("alertTitle", "id", "android");
        TextView alertTitle = (TextView) dialog.getWindow().getDecorView().findViewById(alertTitleId);
        alertTitle.setTextColor(color); // change title text color

        int titleDividerId = resources.getIdentifier("titleDivider", "id", "android");
        View titleDivider = dialog.getWindow().getDecorView().findViewById(titleDividerId);
        titleDivider.setBackgroundColor(color); // change divider color
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-12T04:14:40.540

分隔线颜色：-

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
builder.setTitle(R.string.dialog)
   .setIcon(R.drawable.ic)
   .setMessage(R.string.dialog_msg);
Dialog d = builder.show();
int dividerId = d.getContext().getResources().getIdentifier("android:id/titleDivider", null, null);
View divider = d.findViewById(dividerId);
divider.setBackgroundColor(getResources().getColor(R.color.my_color)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T22:41:56.667

从来源来看，这种颜色似乎是硬编码的。我会认为这是一个错误，它应该是风格的恕我直言。

不过有一个简单的解决方法：使用`setStyle(DialogFragment.STYLE_NO_TITLE, R.style.myStyle);`, 并编写一个简单的线性布局，其中第一项是您的标题。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-12-13T00:20:39.997

```
QustomDialogBuilder qustomDialogBuilder = new QustomDialogBuilder(context).
        setTitle("Set IP Address").
        setTitleColor("#FF00FF").
        setDividerColor("#FF00FF").
        setMessage("You are now entering the 10th dimension.").
qustomDialogBuilder.show(); 
```

# c# - 如何在我的 Windows 应用程序中以编程方式生成 Visual Studio 项目？

> ID：15271502
> 
> 赞同：1
> 
> 时间：2013-03-07T12:40:08.573
> 
> 标签：c#, visual-studio-2010, code-generation

我正在开发一些生成器应用程序，我需要生成具有一些配置的 Visual Studio 项目（如 MVC 3 项目），有没有办法这样做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:50:32.337

`Visual Studio`项目文件只是一个 XML 文档。因此，只要您获得正确的语法和结构，您就可以随意生成它。

您还可以使用`Visual Studio Automation Object Model (DTE)`. 这里有一个很好的入门指南：http: [//msdn.microsoft.com/en-us/library/ms228767 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms228767(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:43:21.300

您可能想看看[CMAKE](http://www.cmake.org)以了解他们是如何做到这一点的——他们确实在许多其他项目中生成了 Visual Studio 项目并且有可用的源代码。所以是的，这应该是可能的。

# android - 如何加密资产

> ID：15271504
> 
> 赞同：2
> 
> 时间：2013-03-07T12:40:09.427
> 
> 标签：android, security, encryption, assets

我即将发布一个在 Assets/ 文件夹中包含大量 JavaScript 的应用程序。我已将所有内容（JS）缩小并合并到一个大约 500kb 的大文件中。我正在寻找对其进行加密并将其隐藏在资产文件夹中的方法。

您认为最好的方法是什么？

1.  在 Java 类中存储为纯字符串，并且（我不知道它是否可能）告诉 proguard 专门加密它。--> 我会`WebView`通过`onintercepturlloading`

2.  作为加密文件存储在 Assets 中，使用任何第三方或 Java 加密例程进行热解密 - 我想听听。

3.  无论你想要什么

理想情况下，该解决方案应作为构建过程的一部分包含在内，但如果没有其他解决方案，我将手动生成加密数据。

编辑：DexGuard 似乎是专业的方式，但它是 350 欧元，还有免费的替代品吗？

请不要问我为什么要加密它。我需要这样做，就像有一天你需要去看牙医一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:47:01.923

我建议您不要依赖第三方工具，因为您可能会被供应商锁定，这意味着如果他们停止开发软件等等。我会将 Javascript 的内容放在一个大的最终静态中`String`，然后正如你所说的那样告诉 Proguard 去做这件事很神奇。

取自 Proguard 的[文档](http://proguard.sourceforge.net/index.html#FAQ.html)。

> **ProGuard 是否加密字符串常量？**
> 
> 不。程序代码中的字符串加密必须根据定义完全可逆，因此它只会提高混淆级别。它增加了代码的占用空间。然而，根据大众的需求，ProGuard 的 Android 闭源兄弟 DexGuard 确实支持字符串加密，以及类加密和隐藏对敏感 API 的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:48:39.973

绝对没有什么可以被认为是*安全*的。因此，*混淆*几乎是浪费精力和获得安全性之间的最佳折衷方案（使黑客攻击更加困难，但难度很小）。

保护加密方案需要密钥。而且你没有地方可以隐藏你的钥匙。您可以将它放在您的 APK 中，也可以让 APK 从某个服务器下载它。使用正确的工具很容易发现两者。

如果您只是想减慢黑客的速度，那就选择简单的方法。将 javascript 部分分布在不同的位置，并使用一些简单快速的编码（如`base64`. 然后在飞行中组合它们。一个专业的人会像任何加密方案一样破解它，但你不会浪费很多时间来实施它。有更多时间编写您的实际应用程序。

[DexGuard](http://www.saikoa.com/dexguard "敏捷卫士")与我上面描述的差不多（字符串混淆），但对于独立开发者来说，我觉得它相当昂贵（最便宜的许可证是 350 美元）。

# netsuite - NetSuite Oauth 实施

> ID：15271508
> 
> 赞同：8
> 
> 时间：2013-03-07T12:40:17.597
> 
> 标签：netsuite

我正在寻找 Netsuite 中的 oauth 实现。Netsuite 支持 oauth 吗？我在 NetSuite 中搜索了 oath 实现，但没有一个结果。

有没有官方文件说netsuite不支持oauth？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-10T20:44:05.467

NetSuite 的 SuiteTalk API 确实支持 oAuth，尽管它的实现方式与其他服务（google、stripe 等）非常不同。获取 oauth 凭据需要用户运行一个非显而易见的过程并复制/粘贴四个单独的密钥。我编写了一份[指南，详细说明了如何使用 oAuth 设置 NetSuite SuiteTalk API](http://mikebian.co/using-netsuites-token-based-authentication-with-suitetalk/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-01T22:49:20.390

在 15.1 中，NetSuite 支持使用 OAuth 1.0 令牌的入站 RESTlet 调用（请注意，它不是完整的 OAuth 1.0 协议，尽管它使用其令牌和标头格式）。在 NetSuite 中，您可以通过两种方式获取访问令牌 - 调用令牌端点，或者从 UI 手动获取。好消息是，如果您打算从 node.js 或 SuiteScript（例如 Suitelets）调用 RESTlets，您仍然可以使用 OAuth 1.0 开源库，例如 Java 或 oauth-1.0a.js 的 scribe

PS 只需为 RESTlet 寻找基于令牌的身份验证

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-28T14:07:49.933

**Netsuite 支持 OAuth**，您可以使用 OAuth 从外部应用程序调用 Restlet。有很多东西需要配置才能让它工作，它非常复杂，所以我写了这个分步指南。 [查看分步说明](https://medium.com/@morrisdev/netsuite-token-based-authentication-tba-342c7df56386)。

> **配置签名和标头的基本代码**

```
var NETSUITE_ACCOUNT_ID = '1234567890_SB'
var BASE_URL = 'https://1234567890_SB.restlets.api.netsuite.com/app/site/hosting/restlet.nl'
var HTTP_METHOD = 'POST'
var SCRIPT_ID = '613'
var OAUTH_VERSION = '1.0';
var SCRIPT_DEPLOYMENT_ID = '1'
var TOKEN_ID = "1234567890abcdefghijklmnopqrstuvwxyz0987654321"
var TOKEN_SECRET = "1234567890abcdefghijklmnopqrstuvwxyz0987654321"
var CONSUMER_KEY = "1234567890abcdefghijklmnopqrstuvwxyz0987654321"
var CONSUMER_SECRET = "1234567890abcdefghijklmnopqrstuvwxyz0987654321"
var text = "";
var length = 32;
var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
for (var i = 0; i < length; i++) {
text += possible.charAt(Math.floor(Math.random() * possible.length));
}
var OAUTH_NONCE = text;
var TIME_STAMP = Math.round(+new Date() / 1000);
var data = '';
data = data + 'deploy=' + SCRIPT_DEPLOYMENT_ID + '&';
data = data + 'oauth_consumer_key=' + CONSUMER_KEY + '&';
data = data + 'oauth_nonce=' + OAUTH_NONCE + '&';
data = data + 'oauth_signature_method=' + 'HMAC-SHA1' + '&';
data = data + 'oauth_timestamp=' + TIME_STAMP + '&';
data = data + 'oauth_token=' + TOKEN_ID + '&';
data = data + 'oauth_version=' + OAUTH_VERSION + '&';
data = data + 'script=' + SCRIPT_ID;
var encodedData = encodeURIComponent(data);
var completeData = HTTP_METHOD + '&' + encodeURIComponent(BASE_URL) + '&' + encodedData;
var hmacsha1Data = CryptoJS.HmacSHA1(completeData, CONSUMER_SECRET + '&' + TOKEN_SECRET);
var base64EncodedData = Base64.stringify(hmacsha1Data);
var oauth_signature = encodeURIComponent(base64EncodedData);
var OAuth = 'OAuth oauth_signature="' + oauth_signature + '",';
OAuth = OAuth + 'oauth_version="1.0",';
OAuth = OAuth + 'oauth_nonce="' + OAUTH_NONCE + '",';
OAuth = OAuth + 'oauth_signature_method="HMAC-SHA1",';
OAuth = OAuth + 'oauth_consumer_key="' + CONSUMER_KEY + '",';
OAuth = OAuth + 'oauth_token="' + TOKEN_ID + '",';
OAuth = OAuth + 'oauth_timestamp="' + TIME_STAMP + '",';
OAuth = OAuth + 'realm="' + NETSUITE_ACCOUNT_ID + '"';
var request = https.post({
url: BASE_URL + '?script=' + SCRIPT_ID + '&deploy=' + SCRIPT_DEPLOYMENT_ID,
headers: { "Content-Type": "application/json", "Authorization": OAuth },
body: JSON.stringify({ hello: "world" })
})
var response = JSON.parse(request.body)
log.debug('response', response) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-04T18:45:47.723

入站单点登录可能是您想要查看的？

[https://system.netsuite.com/help/helpcenter/en_US/Output/Help/SuiteCloudCustomizationScriptingWebServices/SingleSignon/SingleSignonOverview-ch.html](https://system.netsuite.com/help/helpcenter/en_US/Output/Help/SuiteCloudCustomizationScriptingWebServices/SingleSignon/SingleSignonOverview-ch.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T14:17:18.630

现在没有 oauth 选项（如果您正在谈论生成密钥的应用程序等）

Netsuite 只有 webservices SOAP、RESTlet 用于集成选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T19:25:03.510

需要明确的是，当用户离开去另一个应用程序（第 3 方应用程序）时，NetSuite 实际上确实提供了 Oauth。

它不支持从第三方进入 NetSuite。为此，您将需要使用 SAML，它现在在我们现在发布的版本 (2013.1) 之前的版本 (2012.3) 中支持它，并且据报道它可以工作。我们在内部针对 Microsoft AD FS 部署 SAML，但只完成了一半，但我们会得到它，我们会使用它，并且喜欢它。

您需要登录到 NetSuite，然后点击支持，然后在 SAML 上搜索以查看这些文档。

让我知道这是否回答了您的问题。

# wpf - 绑定到实体框架时 WPF DataGrid 上的数据布局

> ID：15271509
> 
> 赞同：1
> 
> 时间：2013-03-07T12:40:21.617
> 
> 标签：wpf, entity-framework, datagrid

我通过实体框架将 WPF DataGrid 绑定到实体。我没有找到以我想要的方式在 DataGrid 上呈现数据的方法，而且我不能/不想接触源数据库数据或实体。

生成的实体模型只有一个表（“Table1”），具有以下属性：

```
ID (Int64)
Date (DateTime)
Item1 (Decimal)
Item2 (Decimal)
Item3 (Decimal) 
```

在 XAML 中我有：

```
<Window.Resources>
    <CollectionViewSource x:Key="listOfItems" Source="{Binding}" />
</Window.Resources> 
```

和：

```
<DataGrid Name="grid" ItemsSource="{Binding Source={StaticResource listOfItems}}">
</DataGrid> 
```

我在代码中设置了 CollectionViewSource 的源：

```
CType(Me.FindResource("listOfItems"), CollectionViewSource).Source = context.Table1.ToList() 
```

（上下文已在前面声明，此处未显示）

这样我可以正确填充 DataGrid，但我想在 UI 上以不同的方式显示数据。这是它现在在 DataGrid 上的显示方式（顶行是 DataGrid 上的标题）：

```
ID    Date      Item1    Item2    Item3
1     1.1.2000  100      200      300
2     2.1.2000  101      201      301
3     3.1.2000  102      202      302
4     4.1.2000  103      203      303
5     5.1.2000  104      204      304 
```

但我需要将其显示为：

```
 1.1.2000  2.1.2000  3.1.2000  4.1.2000  5.1.2000
Item1  100       101       102       103       104
Item2  200       201       202       203       204   
Item3  300       301       302       303       304 
```

我怎样才能做到这一点？试图探索 CollectionViewSource 选项没有运气。或者我是否需要为此生成一个全新的对象/实体列表（希望没有）？DataGrid 上的数据可由用户编辑，并且必须最终通过 EF 持久化回数据库，因此我认为在数据库中创建视图（=只读）是不可能的。

# php - 使用 empty() 函数检查对象是否为空是否正确？

> ID：15271514
> 
> 赞同：4
> 
> 时间：2013-03-07T12:40:37.500
> 
> 标签：php

说，

```
$obj = $this->someFunc(); // this returns an object

if(empty($obj)){ 
    // suppose $obj is null, it does works correctly
} 
```

在[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)中，`empty()`仅用于变量和数组。

但是，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T12:42:36.163

php具有`is_null()`判断对象是否为空的功能：http: [//php.net/manual/en/function.is-null.php](http://php.net/manual/en/function.is-null.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:42:19.217

`null`将导致`empty()`返回true。但是，如果您要检查该值是否实际上为空，[`is_null()`](http://us3.php.net/manual/en/function.is-null.php)则更适合这项工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T12:42:39.620

```
if (is_object($obj)) {
   // It is an object
} 
```

不好意思，回复的很快。只需检查：

```
if ($obj === null) {
   // Object is null
} else {
   // Object isn't null
} 
```

这也可能与：

```
if (is_null($obj)) {
    // Object is null
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:43:03.780

用于`is_null`检查对象是否为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T12:43:47.853

你可以用`is_null()`这个

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T12:45:51.947

从 PHP 5 开始，一个没有属性的对象不再为空，我经常使用 isset 来检查它是否有一个值并且该值不是 NULL

# interface - 劳动自动化数据交换的最新技术是什么？

> ID：15271517
> 
> 赞同：4
> 
> 时间：2013-03-07T12:40:57.300
> 
> 标签：interface, standards, serial-communication

我刚刚遇到 ASTM E1394-97“在临床仪器和计算机系统之间传输信息”，因为供应商提供了支持该标准的系统。它看起来相当早 DOS 时代。我想知道，劳动力自动化是否生活在忽略 XML、JSON 等的石器时代。

此外，ASTM E1394-97 似乎已被取消，我想知道我们是否应该将其用于新的实施。

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-22T23:33:46.847

在深入研究了劳动自动化和 LIS 接口之后，我发现基于 ASTM E1394 的协议仍在使用中。ASTM E1381/1394 被 LIS2-A1 / LIS01-A2 取代 更现代的方法似乎是 HL7，但它似乎没有被广泛使用。

我发现这些链接对于实现我的 LIS 连接器很有用：

*   [http://www.hendricksongroup.com/code_003.aspx](http://www.hendricksongroup.com/code_003.aspx) - 校验和计算
*   [http://www.afinion.net/sites/default/files/adcc%20datasheet.pdf](http://www.afinion.net/sites/default/files/adcc%20datasheet.pdf) - 只是另一个描述**编辑：坏了**
*   [http://code.google.com/p/python-astm/](http://code.google.com/p/python-astm/) - python 中的 ASTM 实现
*   [http://www.linkedin.com/groups/ASTM-E-1394-97-standard-2069898.S.160152562](http://www.linkedin.com/groups/ASTM-E-1394-97-standard-2069898.S.160152562) - LinkedIn 组

**编辑**

我已经为一台新机器和一个中间件实现了一个 ASTM 客户端，作为一些使用原始标准、第三个链接（pythin astm）和一些来自 Abbott 的参考文档的旧机器的代理。第一次的一个很好的帮助是来自 Roche 的一个非常古老但有效的工具。比我编写自己的工具并使用它。一些工作可以在这里找到，但它们处于相当不成熟的状态。最后，我无法同时维护公共和客户的工具，并放弃了公共工具。

*   [https://github.com/vheinitz/ASTMViewer](https://github.com/vheinitz/ASTMViewer)
*   [https://github.com/vheinitz/GoodnightAstm](https://github.com/vheinitz/GoodnightAstm)
*   [https://github.com/vheinitz/culist](https://github.com/vheinitz/culist)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-12T15:01:59.130

IHE（整合医疗保健企业）和 IICC（IVD 行业连接联盟）正在制定一项新标准，计划取代 LIS01-A2 和 LIS02-A2。消息基于 HL7 v2.5.1，它使用 MLLP 作为传输。

[http://www.ihe.net/uploadedFiles/Documents/Laboratory/IHE_LAB_Suppl_LAW.pdf](http://www.ihe.net/uploadedFiles/Documents/Laboratory/IHE_LAB_Suppl_LAW.pdf) - IHE LAW Profile 的当前版本

[http://www.ihe.net/technical_frameworks/#laboratory](http://www.ihe.net/technical_frameworks/#laboratory) - IHE 实验室技术框架

[http://wiki.ihe.net/index.php?title=Laboratory_Analytical_Workflow](http://wiki.ihe.net/index.php?title=Laboratory_Analytical_Workflow) - 开发标准的工作组的 Wiki

# internet-explorer - X-UA-Compatible 标签为 IE7-IE9 使用最新版本的浏览器引擎，但 IE10 使用 IE9

> ID：15271519
> 
> 赞同：0
> 
> 时间：2013-03-07T12:41:04.633
> 
> 标签：internet-explorer, internet-explorer-9, compatibility, internet-explorer-10

我有一个尚未在 IE10 中测试的网站。因此，我希望 IE10 在 IE9 模式下运行它，该模式与 X-UI-Compatible 标签一起使用：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

唯一的问题：IE8 和 IE7 无法解释此值并显示“兼容性按钮”。

我想要实现的是 IE10 以 IE9 模式呈现我的网站，IE7 应该将网站作为 IE7 运行，IE8 应该将其作为 IE8 运行，IE9 应该将其作为 IE9 运行，并且“兼容性按钮”不应该是可见的。

有谁知道实现这一目标的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:55:41.227

根据用户代理呈现元标记。这需要服务器处理 -> 无法在客户端上实现。

# javascript - 使用 ajax 的光滑网格示例

> ID：15271520
> 
> 赞同：2
> 
> 时间：2013-03-07T12:41:04.803
> 
> 标签：javascript, ajax, gridview, slickgrid

我正在寻找一个关于如何在尝试通过 jQuery.Ajax 将数据检索为 JSon 时使用 SlickGrid 的简单示例。我也找不到 SlickGrid 插件的任何文档，并且想知道我是否只是在错误的地方寻找。任何让我开始使用 SlickGrid 的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:51:11.450

我一直在写一个ajax slick-grid。它进展顺利，所以它绝对是一个值得追求的想法。

我使用skip-take模型批量拉取大量数据。`Grid`我还为 slick-grid 设置和操作编写了一个包装类，因此它更易于重用。

下面是一些我希望可以帮助您入门的代码。我已将其缩减为特定于您的 AJAX 加载问题。真正的网格使用列过滤器和复选框选择器，这两者都非常值得研究，但会混淆回复。

语法是 CoffeeScript，但我相信你能明白。

**SlickGrid 包装器**

```
class Grid
    grid = null
    dataView = null
    options = {
        enableCellNavigation: true,
        explicitInitialization: true
    }

    constructor:(@gridId, @pagerId, @columns, loadData)->
        @setupDataView()
        @setupGrid()
        @setupPager()
        grid.init()
        loadData()

    setupDataView:() ->
        dataView = new Slick.Data.DataView()
        dataView.onRowCountChanged.subscribe(->
            grid.updateRowCount()
            grid.render()
        )
        dataView.onRowsChanged.subscribe((e, args)->
            grid.invalidateRows(args.rows)
            grid.render()
        )

    setupGrid:()->
        grid = new Slick.Grid(@gridId, dataView, @columns, options)
        grid.setSelectionModel(new Slick.RowSelectionModel())

    setupPager:() ->
        dataView.setPagingOptions({ pageSize: 25 });
        pager = new Slick.Controls.Pager(dataView, grid, $(@pagerId));

    addRows:(rows)->
        dataView.beginUpdate()
        dataView.addItem row for row in rows 
        dataView.endUpdate() 
```

**为用户网格实现包装器**

```
viewdata = $('#viewdata').data('viewdata')
take = 800
grid = null
loadingGlyph = '<img class="loading" style="float:right;margin-top:5px" src="/Content/img/ajax-loader.gif" alt="loading" width="16" height="16"/>'

columns = [
    { id: 'last name', name: 'Last Name', field: 'LastName', sortable:true },
    { id: 'first name', name: 'First Name', field: 'FirstName', sortable:true },
    { id: 'email', name: 'Email', field: 'Email', sortable:true }
]

loadData=() =>
    $('.slick-pager-status').after(loadingGlyph)
    for skip in [0..viewdata.count] by take
        url = '/' + viewdata.id + '/users/' + skip + '/' + take
        $.getJSON(url, (users) ->
            grid.addRows(users)
            $('.loading').hide() if users.length < take
        )

$ -> 
    grid = new Grid('#user-grid', '#user-pager', columns, loadData) 
```

**的HTML**

```
<div style="margin: 10px;">
    <div id="user-grid" style="width: 100%; height: 700px;"></div>
    <div id="user-pager" style="width: 100%; height: 20px;"></div>
</div> 
```

**一些SQL给你的想法**

```
select * from 
(
    select Id, FirstName, LastName, Email, ROW_NUMBER() over (order by UserName) rownum
    from [.. your stuff]
    where [... your stuff]
) seq
where seq.rownum between @skip and @count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T06:59:42.477

对于其他想要这样做的人，请查看这个 slickgrid 的分支。[https://github.com/harbulot/SlickGrid](https://github.com/harbulot/SlickGrid)

它添加了一个不错的小型本地 Python 服务器来提供 AJAX 后端

```
git clone git@github.com:harbulot/SlickGrid.git
cd SlickGrid/
python localajaxserver.py 
```

然后`http://127.0.0.1:8000/examples/example6b-ajax-localserver.html`使用浏览器访问。

查看拉取请求以了解更改的内容[https://github.com/harbulot/SlickGrid/compare/mleibman:master...url_builder](https://github.com/harbulot/SlickGrid/compare/mleibman:master...url_builder)

# php - 返回一对值的 xpath（使用 php）

> ID：15271522
> 
> 赞同：0
> 
> 时间：2013-03-07T12:41:12.027
> 
> 标签：php, xpath

我`paragraph`在 XML 中有很多很多元素，在这些段落中通常有子元素，例如`name`. 我想运行一个 xpath，它将返回子元素的值和`xml:id`父段落的值。理想的结果是某种数组，其中键是`paragraph`元素`xml:id`，值是子`name`元素的文本节点。有什么想法可以通过单个 xpath 完成吗？

目前，我正在尝试涉及两个 xpath 并尝试将两者放在一起的类似操作，但这变得非常混乱并且无法正常工作。

```
 $result_array = array();
    $xmldoc = simplexml_load_file("$fullfilename");
    $xmldoc->registerXPathNamespace("tei", "http://www.tei-c.org/ns/1.0");
    $names = $xmldoc->xpath("//name");
foreach ($names as $name)  
{
    $pids = $xmldoc->xpath("//tei:p[tei:name='$name']/@xml:id")
    $result_array[$name] = $pids[0]
} 
```

我在这里收到一个错误，说`[$name]`是非法偏移。我也只是不认为这会给出我想要的，因为我相信它总是会返回具有与输入匹配的子元素的`xml:id`第一段。`name`但我想要的是段落 xml:id 找到该实例的段落的值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:42:37.857

> SimpleXMLElement::xpath 返回 SimpleXMLElement 对象的数组，如果出错则返回 FALSE。

这意味着您使用 SimpleXMLElement 对象作为数组键，因此会出现非法偏移错误。

为了获得将其用作键的实际值，请将其转换为字符串，如下所示：

```
$result_array[(string) $name] = $pids[0]; 
```

# ruby-on-rails - rails 4中需要的重要rails 3.2概念

> ID：15271525
> 
> 赞同：3
> 
> 时间：2013-03-07T12:41:16.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Ruby on Rails：当我开始使用 Rails 4（发布 beta 版）时，Rails 3 中存在哪些将更改或需要完全删除的概念？

也了解了 ActiveRecord 观察者的用法，它已经被提取到一个 gem 中。新 gem 将位于 github.com,rails-observers。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:00:07.197

根据发行说明（[http://edgeguides.rubyonrails.org/4_0_release_notes.html](http://edgeguides.rubyonrails.org/4_0_release_notes.html)）：

## 强调

**Ruby 2.0 优先；需要 1.9.3+**

这是不言自明的。

**强参数**

**允许您从控制器**指定批量分配的允许属性。

在此处阅读更多信息：http: [//blog.remarkablelabs.com/2012/12/strong-parameters-rails-4-countdown-to-2013](http://blog.remarkablelabs.com/2012/12/strong-parameters-rails-4-countdown-to-2013)

**涡轮链接**

“不是让浏览器在每个页面更改之间重新编译 JavaScript 和 CSS，而是保持当前页面实例处于活动状态，并且只替换头部的正文和标题。”

查看 github 页面：[https ://github.com/rails/turbolinks](https://github.com/rails/turbolinks)

**俄罗斯娃娃缓存**

这是一种缓存技术，您可以在此处阅读更多信息：http: [//blog.remarkablelabs.com/2012/12/russian-doll-caching-cache-digests-rails-4-countdown-to-2013](http://blog.remarkablelabs.com/2012/12/russian-doll-caching-cache-digests-rails-4-countdown-to-2013)

## 主要更改和弃用

提取到宝石中的特征：

*   [基于哈希和动态查找器方法](https://github.com/rails/activerecord-deprecated_finders)
*   [Active Record 模型中的批量分配保护](https://github.com/rails/protected_attributes)
*   [ActiveRecord::SessionStore](https://github.com/rails/activerecord-session_store)
*   [活动记录观察者](https://github.com/rails/rails-observers)
*   [活动资​​源](https://github.com/rails/activeresource)
*   [动作缓存](https://github.com/rails/actionpack-action_caching)
*   [页面缓存](https://github.com/rails/actionpack-page_caching)
*   [链轮](https://github.com/rails/sprockets-rails)
*   [性能测试](https://github.com/rails/rails-perftest)

如果使用 Rails 默认测试框架，目录有如下变化：

*   测试/单元 -> 测试/模型
*   测试/单元/助手 -> 测试/助手
*   测试/功能 -> 测试/控制器
*   测试/功能 -> 测试/邮件
*   测试/集成 -> 测试/验收

**供应商插件**

已弃用。您在供应商/插件中可能拥有的任何插件都必须作为 g​​em 安装。

**活动记录**

以下方法已弃用，需要重写如下：

*   `find_all_by_...`可以使用重写`where(...)`。
*   `find_last_by_...`可以使用重写`where(...).last`。
*   `scoped_by_...`可以使用重写`where(...)`。
*   `find_or_initialize_by_...`可以使用重写`where(...).first_or_initialize`。
*   `find_or_create_by_...`可以使用`find_or_create_by(...)`或重写`where(...).first_or_create`。
*   `find_or_create_by_...!`可以使用`find_or_create_by!(...)`或重写`where(...).first_or_create!`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:12:50.470

Ryan 在这里对 Rails 4 中的新功能有一个很好的概要：[http ://railscasts.com/episodes/400-what-s-new-in-rails-4](http://railscasts.com/episodes/400-what-s-new-in-rails-4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:35:12.613

我最喜欢看到差异（并知道如何升级）的资源是 Andi Lindemann [Upgrading to Rails 4](http://www.upgradingtorails4.com/)的书和网站。他讨论了一些变化，并解释了如何进行迁移。

他的书的一部分是以下摘要（复制为纯文本，书中当然包括细节）：

*   升级到 Ruby 1.9.3 或 2.0.0
*   升级捆绑器
*   使用 rails4_upgrade 检查 gem 的不兼容性
*   升级 Rails 本身
*   添加从 Rails 3 中提取功能的 gem
*   将插件升级到 gems 或将代码移动到 lib/
*   调整任何使用 match 的路由而不使用 :via => :verb
*   审核 Relation#order 的任何链式使用，因为现在添加新订单而不是附加
*   确定远程表单的优雅降级对您的应用程序是否重要，如果是，则启用在表单中嵌入真实性令牌的选项
*   将 lib/ 或 vendor/ 中的任何图像资产添加到预编译列表

早期版本的 Rails 中的某些功能已被弃用：虽然您的应用程序可能会继续正常运行，但您会看到警告。在您解决了第一个清单中的问题后，请考虑解决已弃用的功能：

*   现代化 Rails 2 finder 语法
*   使动态查找器现代化
*   更改渴望评估的范围以使用 lambdas
*   审计关系的任何使用#all
*   使用连接表上的条件解决 Relation#includes 的任何使用
*   从所有环境配置文件中删除 whiny_nils 设置
*   从所有环境配置文件中删除 auto_explain_threshold_in_seconds 设置
*   添加新的线程安全配置选项

# shell - 将第一个文件每一行的第一个单词复制到第二个文件

> ID：15271530
> 
> 赞同：0
> 
> 时间：2013-03-07T12:41:41.540
> 
> 标签：shell, copy, vi

我有两个行数相等的文件。我必须将第一个文件中每一行的第一个单词放在第二个文件中每一行的开头。我想知道如何使用 vi 编辑器或任何其他脚本语言来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:05:52.453

一种方法是使用`paste`：

```
$ cat file1
one file 1
two file 1
three file 1
four file 1
five file 1

$ cat file2
1 file 2
2 file 2
3 file 2
4 file 2
5 file 2

$ paste -d' ' <(awk '{print $1}' file1) file2
one 1 file 2
two 2 file 2
three 3 file 2
four 4 file 2

# Store changes back to file2
$ paste -d' ' <(awk '{print $1}' file1) file2 > tmp && mv tmp file2 
```

如果您有`bash`不支持[进程替换](http://tldp.org/LDP/abs/html/process-sub.html)的旧版本，那么您可以执行以下操作：

```
$ awk '{print $1}' file1 | paste -d' ' - file2
one 1 file 2
two 2 file 2
three 3 file 2
four 4 file 2
five 5 file 2 
```

您可以使用`cut -d' ' -f1 file1`而不是`awk '{print $1}' file1`.

# python - AWS 与烧瓶（端口通道）

> ID：15271532
> 
> 赞同：3
> 
> 时间：2013-03-07T12:41:49.667
> 
> 标签：python, amazon-web-services, flask

我有一个 AWS 实例正在运行。通过 SimpleHTTPServer 提供服务是可行的。

```
[ec2-user@ip-XXXXX ~]$ python -m SimpleHTTPServer 8080
Serving HTTP on 0.0.0.0 port 8080 ...
p54A5C877.dip0.t-XXX.org - - [07/Mar/2013 12:36:45] "GET / HTTP/1.1" 200 - 
```

但是随后使用烧瓶，请求不会以某种方式通过。

```
>>> from flask import Flask
>>> 
>>> app = Flask(__name__)
>>> 
>>> @app.route('/')
... def hello_world():
...     return 'Hello World!'
... 
>>> if __name__ == '__main__':    
...     app.run(port=8080)
... 
 * Running on http://127.0.0.1:8080/ => no request catched 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:45:15.277

在对此感到困惑一段时间后，我偶然在发布后 1 分钟找到了解决方案。主机必须是 0.0.0.0

```
app.run(port=8080,host='0.0.0.0') 
```

# ios - 自动调整 UILabel 的高度

> ID：15271534
> 
> 赞同：3
> 
> 时间：2013-03-07T12:42:01.903
> 
> 标签：ios, objective-c, nsstring, uilabel, objective-c-category

我正在使用以下两种方法（一种是 的类别，`NSString`另一种是 的类别`UILabel`）根据其中的文本自动调整标签的高度。它在大多数情况下运行良好，但会产生一些不可预测的结果。我不太确定问题可能出在哪里，我希望你们中的一些人能提供帮助。首先，这是有问题的方法：

**NSString 类别：**

```
- (CGFloat) fontSizeWithFont: (UIFont *) font constrainedToSize: (CGSize) size minimumFontSize: (CGFloat) minimumFontSize
{
    CGFloat fontSize = [font pointSize];
    CGFloat height = [self sizeWithFont: font constrainedToSize: CGSizeMake(size.width, FLT_MAX) lineBreakMode: NSLineBreakByWordWrapping].height;
    UIFont *newFont = font;

    // Reduce font size while too large, break if no height (empty string)
    while (height > size.height && height != 0 && fontSize > minimumFontSize) {
        fontSize--;
        newFont = [UIFont fontWithName: font.fontName size: fontSize];
        height = [self sizeWithFont: newFont constrainedToSize: CGSizeMake(size.width, FLT_MAX) lineBreakMode: NSLineBreakByWordWrapping].height;
    };

    // Loop through words in string and resize to fit
    for (NSString *word in [self componentsSeparatedByCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]]) {
        CGFloat width = [word sizeWithFont: newFont].width;
        while (width > size.width && width != 0 && fontSize > minimumFontSize) {
            fontSize--;
            newFont = [UIFont fontWithName: font.fontName size: fontSize];
            width = [word sizeWithFont: newFont].width;
        }
    }
    return fontSize;
} 
```

**UIL标签类别：**

```
- (void) sizeToFitMultipleLines
{
    if (self.adjustsFontSizeToFitWidth) {
        CGFloat adjustedFontSize = [self.text fontSizeWithFont: self.font constrainedToSize: self.frame.size minimumFontSize: self.minimumScaleFactor];
        self.font = [self.font fontWithSize: adjustedFontSize];
    }
    [self sizeToFit];
} 
```

发生的问题是标签的高度在其顶部和底部都有空白空间，并且其中的字符串越长，空白空间越大。在标签的框架内，单行标签可能在其上方和下方有 10 个像素，但六行字符串可能有近 100 个像素。在上述方法中，我无法追踪这些额外空间的来源。

其次，标签的宽度有时会在我只想改变高度的地方进行调整。我猜这`[self sizeToFit]`就是导致这个特定问题的原因，但我不完全确定，因为如果我移除它，高度仍然没有调整。**编辑：**我已经通过在调整大小以适应标签后手动重新定位标签来解决此宽度问题（它的 X 坐标现在是屏幕宽度减去标签宽度，除以 2）。

有什么想法吗？如果您需要其他信息或代码，请询问。我总是在调用相关`[sizeToFitMultipleLines]`标签上的方法之前设置字体，所以这不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:12:21.553

我已经尝试过了，它对我有用。希望这可以帮助你一点。

```
-(void) getDynamicHeightWithString:(NSString*)labelText forWidth:(CGFloat)lblWidth forPoint:(CGPoint)point
{
    //Create Label
    UILabel *label = [[UILabel alloc] init];
    label.text = labelText;
    label.numberOfLines = 0;
    label.lineBreakMode = NSLineBreakByWordWrapping;

    //Set frame according to string
    CGSize size = [label.text sizeWithFont:label.font
                         constrainedToSize:CGSizeMake(lblWidth, MAXFLOAT)
                             lineBreakMode:UILineBreakModeWordWrap];
    [label setFrame:CGRectMake(point.x , point.y , size.width , size.height)];

    //Add Label in current view
    [self.view addSubview:label];    

} 
```

**利用**

```
NSString *labelText = @"We are what our thoughts have made us; so take care about what you think. Words are secondary. Thoughts live; they travel far.The issue that's occurring is that the height of the label has empty space at its top and bottom, and that the longer the string inside it is, the larger that empty space is. A single line label might have perhaps 10 pixels above and below it inside the label's frame, but a six-line string may have almost 100 pixels. I'm not able to track down where this extra space is coming from in the methods above.";

[self getDynamicHeightWithString:labelText forWidth:200 forPoint:CGPointMake(15, 15)]; 
```

# ruby-on-rails - 如何在使用瘦的同时增加 Faye 中的最大连接数

> ID：15271536
> 
> 赞同：3
> 
> 时间：2013-03-07T12:42:07.113
> 
> 标签：ruby-on-rails, ruby, thin, faye

当我使用瘦服务器启动 Faye 时，它​​说

> > 瘦 Web 服务器（v1.3.1 代号 Chromeo）
> > 
> > 最大连接数设置为 1024
> > 
> > 监听 0.0.0.0:9292，CTRL+C 停止

我可以知道如何增加最大连接数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-12T04:11:31.770

使用瘦命令启动服务器，如下所示：[https](https://github.com/faye/faye-websocket-ruby#running-the-app-with-thin) ://github.com/faye/faye-websocket-ruby#running-the-app-with-thin 。

您可以使用该选项设置配置文件`-C`，并定义您想要的所有内容，请查看[https://github.com/macournoyer/thin/#configuration-files](https://github.com/macournoyer/thin/#configuration-files)

# extjs - 如何在 sencha 中解析嵌套数组 json 响应值

> ID：15271537
> 
> 赞同：0
> 
> 时间：2013-03-07T12:42:11.963
> 
> 标签：extjs, sencha-touch-2, extjs4.1, sencha-architect

我正在尝试解析下面响应中的 childId 值。我无法解析该值。我是协会的新手，有很多概念。我在 app.js 中给出了一个警报 childId 值，但它没有显示。谁能告诉我我的映射是否正确？谁能告诉我问题是什么以及如何解决？

**示例.Json**

```
{
        "parents":{
         "parent1":{
           "parent":[
             {
                 "children":{
                     "child":[
                      {
                          "childId":1,
                          "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test",
                      "childAge": "19"
                    },
                    {
                      "childName": "Test1",
                      "childAge": "20"
                    }
                  ]
                }

                  },
                      {
                          "childId":2,
                           "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test2",
                      "childAge": "25"
                    },
                    {
                      "childName": "Test3",
                      "childAge": "24"
                    }
                  ]
                } 

                      }
                   ]
                }
             },
             {
            "children":{
                   "child":[
                      {
                         "childId":3,
                         "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test4",
                      "childAge": "25"
                    },
                    {
                      "childName": "test5",
                      "childAge": "21"
                    }
                  ]
                }

                      },
                      {
                         "childId":4,
                          "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test6",
                      "childAge": "26"
                    },
                    {
                      "childName": "test7",
                      "childAge": "27"
                    }
                  ]
                }
                     }

                   ]
                },

               "parentName":"firstName",
               "parentAge":"28"

             },

             {
                 "children":{
                     "child":[
                      {
                          "childId":5,
                          "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test8",
                      "childAge": "24"
                    },
                    {
                      "childName": "Test9",
                      "childAges": "27"
                    }
                  ]
                }

                      },
                      {
                          "childId":6,
                           "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test10",
                      "childAge": "25"
                    },
                    {
                      "childName": "Test11",
                      "childAge": "24"
                    }
                  ]
                } 

                      }
                   ]
                }
             },
             {
                "children":{
                   "child":[
                      {
                         "childId":7,
                         "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test12",
                      "childAge": "25"
                    },
                    {
                      "childName": "Test13",
                      "childAge": "21"
                    }
                  ]
                }

                      },
                      {
                         "childId":8,
                          "childdetails": {
                  "childrendetails": [
                    {
                      "childName": "Test14",
                      "childAge": "26"
                    },
                    {
                      "childName": "Test15",
                      "childAge": "27"
                    }
                  ]
                }
                     }

                ]
                },

               "parentName":"secondname",
               "parentAge":"35"

             }

            ]

       }

    }

    } 
```

**ParentModel.js**

```
Ext.define("extcityview.model.ParentModel", {
    extend: 'Ext.data.Model',
     fields: [
        'parentName', 'parentAge'
    ],
    hasMany: {model: 'extcityview.model.ChildrenModel', name: 'children'},

});

Ext.define("extcityview.model.ChildrenModel", {
    extend: 'Ext.data.Model',
    hasMany  : {model:'extcityview.model.ChildModel', name:'child', associationKey: 'childItems'},
    belongsTo: 'extcityview.model.ParentModel'
});

Ext.define("extcityview.model.ChildModel", {
    extend: 'Ext.data.Model',
    fields: [
         'childId'
    ],
     belongsTo: 'extcityview.model.ChildrenModel'
}); 
```

ChildStore.js

```
Ext.define('extcityview.store.ChildStore', {
    extend : 'Ext.data.Store',
    storeId : 'samplestore',
    model : 'extcityview.model.ParentModel',
    autoLoad : 'true',
    proxy : {
        type : 'ajax',
        url : 'sample.json',
        reader : {
            type  : 'json',
            root  :'parents.parent1.parent'     
        }
    }

}); 
```

应用程序.js

```
var store = Ext.create('extcityview.store.ChildStore', {

                               model: "extcityview.model.ParentModel",

});

store.load({
            callback: function() 
            {
              console.log("i am in callback");
                var parent = store.first();
                alert("parent"+parent);
                console.log("parent"+parent);
                parent.children().each(function(children){
                 children.child().each(function(child)  {
                 alert("sub region anme"+child.get('childId'));
                 console.log("sub region name"+child.get('childId'));

                 });

                }); 
            }
        }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:29:02.753

The first thing I notice is your JSON seems to be over nested. I would change that first... the structure you have is going to make life harder than it needs to be.

**JSON**

```
{
    "parents": [
        {
            "children": [
                {
                    "childId": 7,
                    "childdetails": [
                        {
                            "childName": "Test12",
                            "childAge": "25"
                        },
                        {
                            "childName": "Test13",
                            "childAge": "21"
                        }
                    ]
                },
                {
                    "childId": 8,
                    "childdetails": [
                        {
                            "childName": "Test14",
                            "childAge": "26"
                        },
                        {
                            "childName": "Test15",
                            "childAge": "27"
                        }
                    ]
                }
            ],
            "parentName": "secondname",
            "parentAge": "35"
        }
    ]
} 
```

You should be able to get rid of your `ChildrenModel` and have the `ChildModel` belong to the `ParentModel`. Also, you could add a `hasMany` to the `ChildModel` for it's "childdetails" referencing a `ChildDetails` model.

I always find it helpful to refresh my memory with this guys [ExtJs hasMany relationship rules](http://extjs-tutorials.blogspot.com/2012/05/extjs-hasmany-relationships-rules.html).

# c# - 如何从列表框中选择

> ID：15271540
> 
> 赞同：0
> 
> 时间：2013-03-07T12:42:20.623
> 
> 标签：c#, javascript, asp.net, listbox, selectedindex

我在 asp.net 中创建一个网站，我有 2 个列表框：

```
lbxPlayer1 and lbxPlayer2

lbxPlayer1.Items.Add("bob");
lbxPlayer1.Items.Add("jack");
lbxPlayer1.Items.Add("sam");

lbxPlayer2.Items.Add("fred");
lbxPlayer2.Items.Add("brian");
lbxPlayer2.Items.Add("dave"); 
```

它们都填充了相同数量的值，我希望这样当单击其中一个列表时，另一个列表将选择相同的索引。

我该怎么做呢？我假设代码将在 lbxPlayer1_SelectedIndexChanged 事件中？

所以当我点击“jack”时，我希望“Brian”也被选中。

我现在意识到这不是想要在服务器端而是在客户端完成的事情，所以我想要一些使用 javascript 来做到这一点的帮助；到目前为止，我一直在 lbxPlayer1_SelectedIndexChanged 事件中测试这段代码

```
lbxPlayer1.Attributes["onchange"] =  "function{alert('Hello');}"; 
```

上面的代码只是一个测试器，但我什至无法让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:52:09.130

试用

```
lbxPlayer1.Attributes["onchange"] =  "changeindex(this) "; 
```

在这样的 html javascript 中

```
function changeindex (obj) {
    var index = obj.selectedIndex;
    var select= document.getElementById('listbox2');
    select.selectedIndex = index;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:13:58.633

Yu 应该知道使用 javascript 的 jQuery 框架。这是一个框架

使用典型的 javascript DOM 元素

```
lbxPlayer1.Attributes["onchange"] =  "lbxPlayer1SelectedChange(this) "; //declaration of event
function lblPlayer1SelectedChange(element){
     document.getElementById("lbxPlayer2").selectedIndex = element.selectedIndex;
} 
```

使用 jQuery。声明事件和函数

```
$('.lbxPlayer1').change(function() {
    $('.lbxPlayer2 option')[this.selectedIndex].attr('selected','selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:31:14.793

好的，感谢您的回复，但是我无法让您的代码与我的项目一起使用（没有错误，只是没有发生任何事情）。但是您的代码给了我想法和解决方案：

我添加了这 2 个 javascript 函数

```
<script>
    function ChangePlayer2Lbx() 
    {
        var player1 = document.getElementById("lbxPlayer1");
        var player1index = player1.selectedIndex;
        var player2 = document.getElementById("lbxPlayer2");
        player2.selectedIndex = player1.selectedIndex;
    }
    function ChangePlayer1Lbx() 
    {
        var player2 = document.getElementById("lbxPlayer2");
        var player2index = player2.selectedIndex;
        var player1 = document.getElementById("lbxPlayer1");
        player1.selectedIndex = player2.selectedIndex;
    }
</script> 
```

我只是将它添加到每个列表框的 html 属性中。

```
onClick="ChangePlayer2Lbx()" 
```

感谢您的所有快速响应及其工作方式我现在想要的方式:)

# gwt - 如何在 CellTree GWT 中进行搜索

> ID：15271541
> 
> 赞同：0
> 
> 时间：2013-03-07T12:42:21.153
> 
> 标签：gwt, tree, cell

我已经实现了`CellTree`，我使用的是 GWT 版本 2.5.1-rc1，它运行良好，服务器响应是异步的。但是我需要在这个`CellTree`和何时找到节点并打开它时实现搜索。知道我是如何实现的`CellTree`吗？

我的查看代码：

```
VerticalPanel vPanel = new VerticalPanel();

CustomTreeModel model = new CustomTreeModel();

CellTree.Resources res = GWT.create(CellTree.BasicResources.class);

CellTree tree = new CellTree(model, null, res);

vPanel.add(tree); 
```

我的`CustomTreeModel`代码：

```
public class CustomTreeModel implements TreeViewModel {

    private MyCell dataTreeCell;
    private SingleSelectionModel<TreeNode> selectionModel;

    public CustomTreeModel() {
        dataTreeCell = new MyCell();
        selectionModel = new SingleSelectionModel<TreeNode>();

    }

    /**
     * Get the {@link NodeInfo} that provides the children of the specified
     * value.
     */
    @Override
    public <T> TreeViewModel.NodeInfo<?> getNodeInfo(T value) {
        ListDataProvider<TreeNode> dataProvider = new ListDataProvider<TreeNode>();
        requestData(dataProvider, (TreeNode) value);

        return new DefaultNodeInfo<TreeNode>(dataProvider, dataTreeCell,
            selectionModel, null);//dataTreeCell
    }

    @Override
    public boolean isLeaf(Object value) {
        return (value instanceof ...);
    }

    private void requestData(final ListDataProvider<TreeNode> dataProvider,
        final TreeNode node) {

        try {
            RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, url);

            rb.setCallback(new RequestCallback() {
                @Override
                public void onError(Request request, Throwable exception) {
                    Window.alert("Error occurred" + exception.getMessage());
                }

                @Override
                public void onResponseReceived(Request request, Response response) {
                    if (200 == response.getStatusCode()) {

                        dataProvider.getList().addAll(response.branchesList());

                        dataProvider.refresh();

                    } else {
                        Window.alert("Error occurred" + response.getStatusCode());
                    }
                }
            });

            rb.send();
        } catch (RequestException e) {
            Window.alert("Error occurred" + e.getMessage());
        }
    }
} 
```

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T18:52:48.287

You can try to use operating on tree nodes like:

```
TreeNode node = cellTree.getRootTreeNode();
  int max = node.getChildCount();
for (int i = 0; i < max; i++) {
  if (!node.isChildOpen(i)) {
    node.setChildOpen(i, open, false);
  } 
```

And it's a magic. Your node on tree will be expanded :)

# java - Primefaces ManyCheckbox 到数组

> ID：15271544
> 
> 赞同：0
> 
> 时间：2013-03-07T12:42:35.110
> 
> 标签：java, arrays, jsf, xhtml, primefaces

我遇到了以下问题。我在数据表中得到了一个数据表示例：

```
<p:dataTable var="mainarea">
  ...
  <p:dataTable value="#{bean.subarea(mainarea)" selection="#{bean.selectedsubarea}">
    <p:colum selectionMode="multiple"/>
     ...
  </p:dataTable>
</p:dataTable> 
```

只要第一个表只生成 1 个结果，它就可以正常工作。

![](../Images/7cc156cb92b987439b5203c6780a6a8b.png)

但是一旦有 2 个表就会得到 NullPointerException。

![](../Images/afa26447fdbc4dcd9a80f160e663b1bd.png)

问题应该是我需要写入#{bean.selectedsubarea[x]}，所以每个分区列表都有自己的数组，但我不知道如何实现。

谢谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:51:20.173

如果我能清楚地理解您的问题，您可以使用[Primefaces 子表](http://www.primefaces.org/showcase/ui/datatableSubTable.jsf)

带有[可扩展数据表](http://www.primefaces.org/showcase/ui/datatableExpandableRows.jsf)

也许你会

# windows-phone-7 - Windows Phone AdRotator，位置感知

> ID：15271548
> 
> 赞同：1
> 
> 时间：2013-03-07T12:42:38.520
> 
> 标签：windows-phone-7, windows-phone, ads, adrotator, location-aware

我打算将[adrotator](http://wp7adrotator.codeplex.com/)与位置感知应用程序一起使用。

我要通过认证的应用程序需要有一个选项来禁用位置（和位置策略）的使用，但我找不到任何方法来关闭 adrotator 上的位置，我到处搜索答案却一无所获。

有谁知道如何解决这个问题？（除了使用两个辅助器，一个用于位置感知，另一个用于非位置感知）

# android - 如何使 ftrace function_graph 跟踪器可以使用 linux 内核函数？

> ID：15271551
> 
> 赞同：12
> 
> 时间：2013-03-07T12:42:51.340
> 
> 标签：android, linux, kernel, ftrace

我想在内核启动过程中使用 ftrace 跟踪一个函数`function_graph`以了解它的作用，但它在`available_filter_functions`.

我试图用 导出它`EXPORT_SYMBOL()`，猜测它会使它可用，但事实并非如此。

你有解决方案吗 ？

有关信息，我要跟踪的功能[`persistent_ram_init_ringbuffer`](http://androidxref.com/kernel_3.4/xref/drivers/staging/android/persistent_ram.c#438)在[`persistent_ram_early_init`](http://androidxref.com/kernel_3.4/xref/drivers/staging/android/persistent_ram.c#443)Android 内核 3.4 中。

我通读了文档，但对此一无所获，而 grep 并没有提供更多帮助...

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-08T03:11:01.697

问题是这些函数被 __init 和 __devinit 注释，它们被 ftrace 函数跟踪器列入黑名单。

为什么？因为作为模块初始化函数（或内核初始化函数），它们在初始化期间被加载并在初始化完成时被移除。ftrace 跟踪的每个函数都保存在一个特殊的紧凑表中。目前，没有办法告诉 ftrace 这些函数已被删除（释放）并且 ftrace 应该将它们从其表中删除。如果我们只是忽略这一点，那么当启用函数跟踪时，ftrace 将尝试修改不再存在的位置并可能导致各种问题（还记得 e1000e 错误吗？）。

如果您真的想跟踪它们，请删除这些注释。然后它们应该出现在要跟踪的函数列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:57:29.527

[http://lwn.net/Articles/370423/](http://lwn.net/Articles/370423/)

[http://www.mjmwired.net/kernel/Documentation/trace/ftrace.txt](http://www.mjmwired.net/kernel/Documentation/trace/ftrace.txt)

这些链接可能会有所帮助。首先是我通过谷歌搜索发现的东西。其次是 ftrace 文档

# android - 如何以编程方式添加放大缩小？

> ID：15271552
> 
> 赞同：4
> 
> 时间：2013-03-07T12:42:58.623
> 
> 标签：android

这是我的代码，下面以编程方式进行克里特布局。单击图像时如何以编程方式设置放大和缩小？我希望我的程序在用户单击图像放大全屏时做出反应，再次单击时恢复原始大小我该怎么办？

```
 final DatabaseConnector dbConnector = new DatabaseConnector(this);  
     dbConnector.open();
     Cursor cursor =  
    dbConnector.getStageRequirements(Long.valueOf(currentStageID).longValue());
     reqdata = new MyData1[cursor.getCount()];
     int j = cursor.getCount();
     cursor.moveToFirst();
     i = 0;
     while (cursor.isAfterLast() == false) 
     {
         reqdata[i] = new MyData1(cursor.getString(1), cursor.getString(0));
         cursor.moveToNext();
         i++;
     }
     dbConnector.close();
     cursor.close();

     ScrollView scroll = new ScrollView(MainActivity1.this);
     scroll.setLayoutParams(new  
  LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,  
   LayoutParams.WRAP_CONTENT));      

     btnLO = new LinearLayout(MainActivity1.this);  
     LinearLayout.LayoutParams paramsLO = new  
    LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
     // button margins
     paramsLO.setMargins(0, 0, 0, 0);

     LinearLayout.LayoutParams paramsLO2 = new  
  LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
     // button margins
     paramsLO2.setMargins(0, 20, 0, 0);
     // button height/width *pixels*

     btnLO.setOrientation(LinearLayout.VERTICAL);
     btnLO.setBackgroundColor(5); // not working correctly

     //buttons
     for (i =0;i <reqdata.length;i++)
         {
             LinearLayout li=new LinearLayout(this);
             li.setOrientation(LinearLayout.HORIZONTAL);
             final Button b1 = new Button(MainActivity1.this);
             final ImageView imageView = new ImageView(MainActivity1.this);
             int width = 60;
             int height = 150;
             LinearLayout.LayoutParams parms = new  
    LinearLayout.LayoutParams(width,height);
             parms.setMargins(0, 5, 0, 0);
             imageView.setLayoutParams(parms);

             li.addView(b1, paramsLO);        
             li.addView(imageView);
             btnLO.addView(li);

             b1.setText(reqdata[i].getSpinnerText());

             b1.setOnClickListener(new View.OnClickListener() 
                    {
                        public void onClick(View v) 
                        {               

                             imageView1 = imageView;
                             Intent pictureActionIntent = new  
  Intent(MediaStore.ACTION_IMAGE_CAPTURE); 

  pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new  
  File(SDCARD_ROOT_PATH + SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

 startActivityForResult(pictureActionIntent,CAMERA_PICTURE);
                             b1.setClickable(false);

                          } 

                    });    

         }

     final Button b2 = new Button(MainActivity1.this);

     b2.setText("Submit");
     b2.setWidth(150);
     b2.setHeight(50);
     b2.setOnClickListener(new View.OnClickListener() 
     {
         public void onClick(View v) 
         {                           

             long visitID = dbConnector.saveVisit();

             for (i =0;i <reqdata.length;i++)
             {
                 dbConnector.saveVisitDetail(listByte.get(i),visitID,Long.valueOf(reqdata[i].getValue()).longValue());
             }     
                Toast.makeText(getBaseContext(), "Sucessful",Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(MainActivity1.this, Main.class);     
                startActivity(intent);
                finish();
         }
     }); 
     btnLO.addView(b2, paramsLO2);
     btnLO.setGravity(Gravity.CENTER| Gravity.CENTER_HORIZONTAL);
     scroll.addView(btnLO);

     this.addContentView(scroll, new LayoutParams());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:55:39.747

就像[Lalit Poptani](https://stackoverflow.com/users/726863/lalit-poptani)在另一个答案中所说的那样，

> StackOverflow 上有一个很好的运行答案。请看看这个，[PinchZoom](https://stackoverflow.com/questions/2537238/how-can-i-get-zoom-functionality-for-images)

# iphone - 集成 UIKIT 和 COCCOS2d 时 -[EAGLView swapBuffers] 中的 OpenGL 错误 0x0501

> ID：15271558
> 
> 赞同：2
> 
> 时间：2013-03-07T12:43:05.177
> 
> 标签：iphone, cocos2d-iphone, uikit

我正在尝试将 UIView 集成到一个简单的 hello world Coccos2d 项目中。我实际上遵循以下教程 [http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit) ，但我得到了这个-[EAGLView swapBuffers] 中的错误 OpenGL 错误 0x0501。有人可以帮忙吗？

# c# - linq和数据表的困难

> ID：15271559
> 
> 赞同：2
> 
> 时间：2013-03-07T12:43:09.310
> 
> 标签：c#, asp.net, visual-studio-2010, linq, datatable

我正在尝试通过 Linq 在我的数据表上过滤记录，但不知何故，结果是在表的列中显示一个没有错误的表，但一行显示“行有错误”。我的代码如下：有什么建议吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Collections;

namespace linq_app
{
    public partial class admins : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["dbcon"].ToString());

            con.Open();

            SqlCommand sqlcmd = new SqlCommand();
            sqlcmd.CommandText = "select * from user_info";
            sqlcmd.CommandType = CommandType.Text;

            sqlcmd.Connection = con;
            SqlDataReader sqlreader = sqlcmd.ExecuteReader();

            DataTable dt = new DataTable();
            dt.Columns.Add("first_name", typeof(string));
            dt.Columns.Add("last_name", typeof(string));
            dt.Columns.Add("Email_ID", typeof(string));
            dt.Columns.Add("Contact", typeof(string));
            dt.Columns.Add("Address", typeof(string));
            dt.Columns.Add("Role", typeof(string));

            while (sqlreader.Read())
            {
                DataRow dr = dt.NewRow();
                dr["first_name"] = sqlreader["first_name"];
                dr["last_name"] = sqlreader["last_name"];
                dr["Email_ID"] = sqlreader["email"];
                dr["Contact"] = sqlreader["contact1"];
                dr["Address"] = sqlreader["address"];
                dr["Role"] = sqlreader["role"];
                dt.Rows.Add(dr);
            }

            var results = from myRow in dt.AsEnumerable()
                          where myRow.Field<string>("Role").ToString() == "admin".ToString()
                          select myRow;

            //dataGridView1.DataSource = dt;

            //DataClasses1DataContext dc = new DataClasses1DataContext();
            //var admin = from records in dc.GetTable<user_info>() 
            //              where records.role =="admin"
            //              select records;
            GridView1.DataSource = results;
            GridView1.DataBind();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:46:26.437

尝试删除`ToString`呼叫。`null`如果角色列中有，它将抛出异常。并从过滤的行创建新的数据表：

```
var results = from myRow in dt.AsEnumerable()
              where myRow.Field<string>("Role") == "admin"
              select myRow;

GridView1.DataSource = results.CopyToDataTable(); // create datatable
GridView1.DataBind(); 
```

顺便说一句，为什么不使用 Linq to Entities 呢？您将能够在数据库端进行过滤。

# jquery - 我应该使用这种方法吗？

> ID：15271564
> 
> 赞同：0
> 
> 时间：2013-03-07T12:43:32.403
> 
> 标签：jquery, asp.net, session

我想将会话保留在一个将成为列表的 javascript 变量中。在我获取数据之前，这个函数。

```
 var twitterData;
$(document).ready(function () {
    debugger;
        if(twitterData==undefined){

            loadTwitterData();

            if(twitterData==undefined)
            {
                alert('null');
            }
            else {
                alert('true');
            }
     }
});
function loadTwitterData() {

    var dataString = JSON.stringify({
        'a' : 'test',
    });
    $.ajax(
        {
            type: "POST",
            url: "./ManageData.aspx/GetSessionData",
            data: dataString,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (json) {
            debugger;
            twitterData=json;

            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
        });
} 
```

然后我将使用 twitterData 创建一个表。还有很多函数会使用这个变量进行分析或统计。“我的会话包含 Twitter 关注者列表。” 1-变量中的会话是合乎逻辑的？2-当我在就绪函数中调用**loadTwitterData()时，在它可以控制****twitterdata 之前未定义**，然后**loadTwitterData()**工作。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:21:15.043

Why do you want to store it via javascript, asp.net offers various ways for persisting data

For Example, the session - Lasts as long as the user is active, plus a timeout period (typically 20 minutes)

```
Session["NameOfYourObject"] = yourObject; 
```

Of if you have bigger data you can think about Cache["NameOfYourObject"]

[http://msdn.microsoft.com/en-us/magazine/cc300437.aspx](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

# java - 更新父对象时休眠不更新子对象

> ID：15271567
> 
> 赞同：3
> 
> 时间：2013-03-07T12:43:37.757
> 
> 标签：java, hibernate, jpa, orm, annotations

我有两张表，父母和孩子之间有@oneTomany 关系。以下是我的表结构。

**表结构**

```
CREATE TABLE `parent` (
  `id_parent` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id_parent`)
)

CREATE TABLE `child` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  `parent_id` int(3) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_parent_child` (`group_id`),
  CONSTRAINT `fk_parent_child` FOREIGN KEY (`parent_id`) REFERENCES `parent` (`id_parent`)
) 
```

我为此创建了实体类，如下所示

**父类。**

```
@Entity
@Table(name = "parent")
public class Parent {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id_parent")
    private int id;

    @Column(name = "name")
    private String name;

    @OneToMany(mappedBy = "defaultchild", fetch = FetchType.EAGER)
    @Cascade({ CascadeType.SAVE_UPDATE, CascadeType.MERGE })
    private Set<Child> childs;

    //setter and getters.
} 
```

**儿童班。**

```
@Entity
@Table (name = "child")
public class Report {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column (name = "id")
    private int id;
    @Column (name = "name")
    private String name;

    @ManyToOne
    @Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE,org.hibernate.annotations.CascadeType.MERGE})
    @JoinColumn(name="parent_id")
    private Parent defaultchild;    

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "group",joinColumns={@JoinColumn(name="fk_child_id")},inverseJoinColumns={@JoinColumn(name="fk_group_id")})
    private Set<XXX> groups = new HashSet<XXX>(0);
    //Setter and Getter methods
} 
```

**服务等级**

```
public UIGroup getParentByName(String name) {
    return DAO.getParentByName(name);
}

@Transactional(readOnly = false, propagation = Propagation.REQUIRED)
public boolean updateParent(Parent parent) {
    return DAO.updateParent(parent);
}

@Transactional(readOnly = false, propagation = Propagation.REQUIRED)
public boolean deleteParent(Parent parent) {
    return DAO.deleteParent(parent);
} 
```

**DAO 类。**

```
public UIGroup getParentByName(String name) {
    Query query;
    Parent parent = null;
    try {
        String queryString = " from Parent where name = :name";
        query = sessionFactory.getCurrentSession().createQuery(queryString);
        query.setParameter("name", name);
        uiGroup = (Parent) query.uniqueResult();
    } catch (Exception e) {
        logger.error(e);
    }
    return parent;
}

public boolean updateParent(Parent parent) {
    boolean result = true;
    Session session = null;
    Transaction tx = null;
    try {
        session = sessionFactory.getCurrentSession();
        tx = session.beginTransaction();
        session.merge(parent);
        tx.commit();
        session.flush();
    } catch (HibernateException e) {
        result = false;
        logger.error(e);
    }// end of try-catch block.
    return result;
}

public boolean deleteParent(Parent parent) {
    boolean result = true;
    Session session = null;
    try {
        session = sessionFactory.getCurrentSession();
        session.delete(parent);
    } catch (HibernateException e) {
        result = false;
        logger.error( + e);
    }
    return result;
} 
```

但是当我试图调用以下代码时

```
Parent otherParent = Service.getParentByName("Other");
Parent parent = Service.getParentByName("XYZ");
//here I am assigning childs assign to XYX parent to other Parent
Set<Child> childs = new TreeSet<Child>(Child.COMPARE_BY_ID);
childs.addAll(otherParent.getchildes());
childs.addAll(parent.getchilde());
otherParent.setChilds(childs);
Service.updateParent(otherParent);
Service.deleteParent(parent); 
```

我收到以下错误。

***错误***

```
java.sql.BatchUpdateException: Cannot delete or update a parent row: a foreign key constraint fails (`database`.`child`, CONSTRAINT `fk_parent_child` FOREIGN KEY (`parent_id`) REFERENCES `child` (`id_parent`)) 
```

这意味着我的更新代码无法正常工作以下是 Service.updateParent(otherParent) 语句的日志

```
SELECT parent0_.id_parent AS id1_135_1_, parent0_.name AS name135_1_, childs1_.parent_id AS parent4_3_, childs1_.id AS id3_, childs1_.id AS id143_0_, childs1_.child_name AS child2_143_0_, childs1_.is_sea_child AS is3_143_0_, childs1_.parent_id AS parent4_143_0_ 
FROM ui_parent parent0_ 
LEFT OUTER JOIN child childs1_ ON parent0_.id_ui_parent=childs1_.parent_id 
WHERE parent0_.id_parent=1 
```

请帮助我，我不知道这段代码出了什么问题，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:55:47.743

我可能只会写一个 DAO 方法 moveAllChildren(String srcName, String dstName)，如下所示：

```
public class ParentDAO {
    @PersistenceContext
    private EntityManager em;

    public Parent findParentByName(name) {
      TypedQuery<Parent> q = em.createQuery("select p from Parent where p.name = :name", Parent.class);
      return q.setParameter("name", name).getSingleResult();
    }

    public void moveAllChildren(String srcName, String dstName) {
      Parent src = findParentByName(srcName);
      Parent dst = findParentByName(dstName);
      Set<Child> children = new HashSet<Child>();
      for (Child c: src.getChildren()) {
        children.add(c);
      }
      src.getChildren().removeAll(children);
      dst.getChildren().addAll(children);
    }
} 
```

一般来说，在使用 Cascading 时，显式添加和删除子项是很好的做法，而不是说 dst.setChildren(allChildren)，以便让 JPA 有机会管理 Relation 的双方。如果您不这样做，您可能会冒着孩子仍然认为 src 是他们的父母的风险，然后您可能会从您的数据库中看到违反约束的情况。

此外，尝试让 JPA 管理尽可能多的实体内容是一个好主意。所以我宁愿不让应用程序调用服务调用DAO来检索父母只是为了移动他们的孩子，然后调用相同的服务调用相同的DAO将这些更改合并到数据库中。您最好将其实现为 DAO 级别的低级别操作，然后添加一个服务来调用它来处理 @Transaction。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:05:08.653

如果没有特定原因选择限制`@Cascade`类型，则可以选择切换到 ALL。

```
 @Cascade({ CascadeType.ALL}) 
```

甚至只是

```
 @OneToMany(cascade=CascadeType.ALL, mappedBy="defaultchild") 
```

编辑：你已经拼错了几次“父母”，修复它也不会有什么坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:14:32.890

您正在尝试删除`parent`，但它`childs`可能仍然存在。在删除之前尝试清空`childs`集合：

```
for(Child child : parent.getChilds()){
    child.setParent(null);
}
parent.getChilds().clear();
Service.deleteParent(parent); 
```

`parent`如果 a`Child`仍然有引用，则不能删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T07:33:43.330

最后我在wallenborn和以下链接的帮助下得到了解决方案

[JPA 未将外键保存到 @OneToMany 关系](https://stackoverflow.com/questions/814474/jpa-not-saving-foreign-key-to-onetomany-relation)

这是我在课堂上所做的更改。

**实体类。**

```
@Entity
@Table(name = "parent")
public class Parent {

    .....   

    @OneToMany(cascade = CascadeType.PERSIST,mappedBy = "defaultchild", fetch = FetchType.EAGER)
    private Set<Child> childs;

    //setter and getters.
}

@Entity
@Table (name = "child")
public class Child {

    ....

    @ManyToOne
    @JoinColumn(name="parent_id")
    private Child defaultchild; 

    //Setter and Getter methods
} 
```

我已将 wallenborn 建议的服务和 DAO 类更改如下

**服务类。**

```
@Transactional(readOnly = false, propagation = Propagation.REQUIRED)
public void moveAllChildren(String srcName, String dstName) {
    DAO.moveAllChildren(srcName, dstName);
} 
```

**DAO 类**

```
public Parent findParentByName(name) {
      TypedQuery<Parent> q = em.createQuery("select p from Parent where p.name = :name", Parent.class);
      return q.setParameter("name", name).getSingleResult();
    }

    public void moveAllChildren(String srcName, String dstName) {
      Parent src = findParentByName(srcName);
      Parent dst = findParentByName(dstName);
      Set<Child> children = new HashSet<Child>();
      for (Child c: src.getChildren()) {
        children.add(c);
    }
    src.getChildren().removeAll(children);
    dst.getChildren().addAll(children);
} 
```

# file-upload - ckeditor 文件上传设置

> ID：15271568
> 
> 赞同：0
> 
> 时间：2013-03-07T12:43:38.593
> 
> 标签：file-upload, ckeditor

我自己无法解决这个问题，所以也许有人已经在这里做过类似的工作。

问题是我可以上传文件。但它在图像字段之后附加在 IFRAME 中。

演示在这里： http: [//myprtf.com/test/codes/ckeditor_showtime/](http://myprtf.com/test/codes/ckeditor_showtime/)

我想让它像[这里的演示一样工作](http://ckeditor.com/demo)

如果有人可以帮助我，我认为本指南将帮助所有面临 ckeditor 设置的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:57:04.770

您需要在图像属性中的“对齐”下选择“右”（右键单击）。您也可以在添加图像时进行设置。

# sql-server - SQL 表连接唯一字段名称不同

> ID：15271569
> 
> 赞同：0
> 
> 时间：2013-03-07T12:43:39.657
> 
> 标签：sql-server, join

已经为此工作了几个小时，这让我发疯了。通常我只需要从一个表中执行简单的 MS SQL 操作，但现在我需要来自 2 的数据并且迷路了。

**数据库名称：**事件
**表名称：** FeedUpdate 和 Fixture

**Feed 更新字段：**
[EventId] ,[Description] ,[DataProviderId] ,[UpdateTimestamp]

**夹具字段：**
[FixtureId]、[Description]、[DataProviderId]、[StartTime]

**到目前为止我一直在尝试的查询：**

```
SELECT [FixtureId],[Description] ,[DataProviderId] ,[StartTime]
FROM [Event].[dbo].[Fixture]
WHERE [DataProviderId] = '6' AND StartTime >= '2013-03-05 00:00:00.0000000'
  AND StartTime <= '2013-03-05 00:30:00.0000000'

  UNION ALL

SELECT [EventId] ,[Description] ,[DataProviderId] ,[UpdateTimestamp]
FROM [Event].[dbo].[FeedUpdate]
WHERE [DataProviderId] = '6' AND UpdateTimestamp
  BETWEEN '2013-03-05 00:00:00.0000000' AND '2013-03-05 00:01:00.0000000' 
```

我希望将这些信息放在一个表视图中，按 FixtureId/EventId 分组，因为它们都是相同的，只是名称不同。我还想要每个 FixtureId/EventId 一行，因为“FeedUpdate”表有多个相同 EventId 的条目

任何指针都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:06:10.150

从您的问题中不清楚当您有多行具有相同 ID 时您想要什么结果，所以我猜测“最新”信息。此外，您使用两个不同的日期范围进行操作。我暂时忽略了这一点，但我认为它们可能应该是相同的范围。

可能的解决方案： 1) 像今天一样创建一个联合，但使用“as”来确保两个语句的输出具有相同的字段名称。

然后从该联合中为每个具有最大时间戳的“id”选择条目。

2）您可以通过使用几个公用表表达式来改进这一点，第一个列出每个更新的最新版本，第二个列出更新中尚未返回的条目，最后选择这两个的输出按事件 ID 或时间戳排序的 CTE。

3）或者，你可以用临时表和更新来解决这个问题。

像这样的东西：

```
DECLARE @events table (
    EventId int primary key,
    Description varchar(max),
    DataProviderId int,
    [timestamp] datetime
)
INSERT @events (EventId, Description, DataProviderId, [Timestamp])
  SELECT [FixtureId], [Description], [DataProviderId], [StartTime]
    FROM [Event].[dbo].[Fixture]
      WHERE [DataProviderId] = '6' AND StartTime >= '2013-03-05 00:00:00.0000000'
        AND StartTime <= '2013-03-05 00:30:00.0000000'

UPDATE @events
SET [Description]=u.[Description], 
    [DataProviderId]=u.[DataProviderId], [Timestamp]=u.[UpdateTimestamp]
  FROM @events e
    inner join [Event].[dbo].[FeedUpdate] u on e.EventId = u.EventId
      where u.[DataProviderId] = '6' AND u.UpdateTimestamp
      BETWEEN '2013-03-05 00:00:00.0000000' AND '2013-03-05 00:01:00.0000000' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:46:54.200

您的列名需要匹配 - 您有两个不同的，一个 EventId 和另一个 FixtureId。

使用 AS 分配相同的列名：

```
[FixtureId] AS [FieldId]
...
[EventId] AS [FieldId] 
```

此外，您的日期字段不匹配。

# java - 通过 RESTful CXF 使用 multipart/form-data

> ID：15271573
> 
> 赞同：8
> 
> 时间：2013-03-07T12:43:48.297
> 
> 标签：java, rest, cxf, jackson, multipartform-data

我一直在使用 Apache CXF 与 Jackson 一起使用和生成 JSON 文件的 web 服务工作。
但是，该服务的方法之一应该能够保存从移动应用程序上传的图像，该移动应用程序向我的网络服务发出多部分/表单数据 POST 请求，我不知道如何在我的语境。我们通常创建“请求”和“响应”对象来消费和生成 JSON，但是，恐怕这不适用于这种情况。

这是请求格式：

```
Content-type: multipart/form-data
"Description": text/plain
"Path": text/plain
"Image": image/jpeg 
```

如何正确消费这种请求并在服务器端保存图像？

* * *

**[编辑]**

我设法通过使用这个来使用 multipart/form-data：

```
public returnType savePicture(
                @Multipart(value = "mode", type = "text/plain") String mode,
                @Multipart(value = "type", type = "text/plain") String type,
                @Multipart(value = "path", type = "text/plain") String path
                @Multipart(value = "image", type = "image/jpeg") Attachment image
            ) 
    { 
```

但是，当尝试使用以下 POST 请求时：

```
Content-type: multipart/form-data, boundary=AaB03x

--AaB03x
content-disposition: form-data; name="mode"

T
--AaB03x
content-disposition: form-data; name="type"

M
--AaB03x
content-disposition: form-data; name="path"

c:/img/
--AaB03x
content-disposition: form-data; name="image"; filename="image.jpg"
Content-Type: image/jpeg
Content-Transfer-Encoding: binary

imgdata
--AaB03x-- 
```

我收到以下错误：

> javax.ws.rs.BadRequestException: org.apache.cxf.jaxrs.utils.multipart.MultipartReadException: 没有找到内容 id**类型**的多部分，请求内容类型：multipart/form-data;boundary=AaB03x

例如，当我只使用**mode**时，它​​工作正常。它只会中断 2 个或更多参数。知道为什么这是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T06:00:02.343

我曾经遇到过类似的问题。

以下代码为我做了诀窍

```
@POST
@Consumes("multipart/form-data")
public void yourMethod(<params>) throws Exception {
} 
```

简而言之，我认为`@Consumes`您缺少的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:18:07.917

看来我们发现了问题，和请求的格式有关。正确的格式应该是：

```
Content-type: multipart/form-data, boundary=AaB03x

--AaB03x
content-disposition: form-data; name="mode"

T--AaB03x

content-disposition: form-data; name="type"

M--AaB03x

content-disposition: form-data; name="path"

c:/img/--AaB03x

content-disposition: form-data; name="image"; filename="image.jpg"
Content-Type: image/jpeg
Content-Transfer-Encoding: binary

imgdata--AaB03x-- 
```

更改为这种格式允许我使用其他参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T04:48:17.737

用于使用多部分表单数据。使用@consumes 标签并提供“multipart/form-data”以及值参数，例如

@Consumes(value = "multipart/form-data")

参考 [https://jnorthr.wordpress.com/2012/07/10/http-header-content-type-and-encodings/](https://jnorthr.wordpress.com/2012/07/10/http-header-content-type-and-encodings/)

# iphone - 后台核心数据

> ID：15271575
> 
> 赞同：0
> 
> 时间：2013-03-07T12:43:55.367
> 
> 标签：iphone, nsthread

[后台更新核心数据的更新](https://stackoverflow.com/questions/15269768/core-data-update-in-background/15270248?noredirect=1#15270248)版本。

在与 CoreData链接[Grand Central Dispatch (GCD)](https://stackoverflow.com/questions/4264540/grand-central-dispatch-gcd-with-coredata/12039308#12039308)的帮助下，创建了一个后台 managedObjectContext 但从核心数据获取时出现错误

```
-(void) startTimerThread
{
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Add code here to do background processing
        NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
        self.backgroundManagedObjectContext = context;
        [self.backgroundManagedObjectContext setPersistentStoreCoordinator:self.managedObjectContext.persistentStoreCoordinator];
        self.managedObjectContext = self.backgroundManagedObjectContext;
        [self getDataFromFile];

    dispatch_async( dispatch_get_main_queue(), ^{
        // Add code here to update the UI/send notifications based on the
        // results of the background processing

        [[NSNotificationCenter defaultCenter] postNotificationName:@"ReloadAppDelegateTable" object:nil];
        [context release];
        self.managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    });
}); 
```

}

在`getDataFromFile`我尝试从中获取时出现错误`managedObjectContext`

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setPredicate:[NSPredicate predicateWithFormat:@"date == max(date)"]];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"LogDetails" inManagedObjectContext:self.managedObjectContext]; 
```

同样的错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name LogDetails 
```

谁能告诉我为什么我得到这个错误。以前我试图创建一个子 managedObjectContext ，它给出了同样的错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:16:57.270

我不太确定为什么要创建上下文并将其设置为 self.backgroundManagedObjectContext，然后将其设置为 self.managedObjectContext。我的建议是允许您的 getDataFromFile 方法接受上下文，以便您可以从任何线程调用它。

你将会拥有

```
- (void)getDataFromFileOnContext:(NSManagedObjectContext *)context
{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setPredicate:[NSPredicate predicateWithFormat:@"date == max(date)"]];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"LogDetails" inManagedObjectContext:context];
} 
```

然后你可以这样做

```
-(void) startTimerThread
{
    self.managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];

    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Add code here to do background processing
        NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        [context setParentContext:self.managedObjectContext];
        [self getDataFromFileOnContext:context];

    dispatch_async( dispatch_get_main_queue(), ^{
        // Add code here to update the UI/send notifications based on the
        // results of the background processing

    [[NSNotificationCenter defaultCenter] postNotificationName:@"ReloadAppDelegateTable" object:nil];        
    });
}); 
```

如果您需要更多帮助，请告诉我。

# neo4j - 我应该如何开始使用 neo4j？

> ID：15271576
> 
> 赞同：0
> 
> 时间：2013-03-07T12:43:55.890
> 
> 标签：neo4j, graph-databases

我正在使用图形数据库，我想从 neo4j 开始。但我不知道如何开始。我应该使用哪个编辑器？（例如网豆）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:08:03.760

我认为你应该从这个 URL 开始：[Neo4j learn](http://www.neo4j.org/learn)。选择您喜欢的任何 IDE：eclipse、netbeans、intellij、...

# iphone - 两个数组在一个第一个数组中检索两个值

> ID：15271577
> 
> 赞同：1
> 
> 时间：2013-03-07T12:43:55.970
> 
> 标签：iphone, ios, nsmutablearray

`First_mutableArray`是`1,2,3,4,5,6`
`Second_MutableArray`是`2,4,6,8,0,12`

如何获得这样的输出

`First_mutableArray`是`1,2,3,4,5,6,8,0,12`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T13:02:23.920

订购版本：

```
 NSMutableOrderedSet *first = [NSMutableOrderedSet orderedSetWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",nil];
    NSOrderedSet *second = [NSOrderedSet orderedSetWithObjects:@"2",@"4",@"6",@"8",@"0",@"12",nil];
    [first unionOrderedSet:second]; 
```

变量**first**将包含结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:51:31.953

尝试 ：

```
NSMutableArray *first=[NSMutableArray arrayWithArray:@[@"1",@"2",@"3",@"4",@"5",@"6"]];
NSMutableArray *second=[NSMutableArray arrayWithArray:@[@"2",@"4",@"6",@"8",@"0",@"12"]];

for (id obj in second) {
    if (![first containsObject:obj]) {
        [first addObject:obj];
    }
}
NSLog(@"%@",first); 
```

* * *

编辑：

```
NSMutableArray *first=[NSMutableArray arrayWithArray:@[@"1",@"2",@"3",@"4",@"5",@"6"]];
NSMutableArray *second=[NSMutableArray arrayWithArray:@[@"2",@"4",@"6",@"8",@"0",@"12"]];

NSMutableOrderedSet *firstSet=[NSMutableOrderedSet orderedSetWithArray:first];
NSOrderedSet *secondSet=[NSOrderedSet orderedSetWithArray:second];

[firstSet unionOrderedSet:secondSet];
first=[[firstSet array] mutableCopy];

NSLog(@"%@",first); 
```

**归功于 Mark Kryzhanouski*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:52:23.013

组合这两个数组并在组合数组上使用下面的代码两个删除重复项。

```
NSMutableArray* combinedArray = [NSMutableArray arrayWithArray:firstArray];
[combinedArray addObjectsFromArray: secondArray];
NSMutableArray *myUniqueArray = [NSMutableArray array];

for (id obj in combinedArray) {
    if (![myUniqueArray containsObject:obj]) {
        [myUniqueArray addObject:obj];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:52:25.283

使用此代码

```
NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6", nil];
     NSMutableArray *array1 = [[NSMutableArray alloc]initWithObjects:@"2",@"4",@"6",@"8",@"0",@"12", nil];
    for(int i = 0;i<array1.count;i++)
    {
        NSString *str = [array1 objectAtIndex:i];
        if (![array containsObject:str])
        {
            [array addObject: str]; 
        }else
        {
            NSLog(@"contins");
        }
    }
    NSLog(@"%@",array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T13:00:48.467

你可以使用**[NSMutableSet](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableSet_Class/Reference/NSMutableSet.html)**来做这些事情：

```
NSMutableSet *firstSet  = [NSMutableSet setWithArray:First_mutableArray];
NSMutableSet *secondSet = [NSMutableSet setWithArray:Second_MutableArray];
[firstSet unionSet:secondSet];
NSArray *uniqueArray    = [firstSet allObjects]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T13:05:32.340

给你。与遍历每个数组并添加不匹配的对象相比，使用 NSSet 将为您提供更好的性能。

```
NSArray *arr1 = @[@1,@2,@3,@4,@5,@6];
NSArray *arr2 = @[@2,@4,@6,@8,@0,@12];

NSMutableSet *set = [[NSMutableSet alloc] initWithArray:arr1];
[set addObjectsFromArray:arr2];

// Unsorted
NSLog(@"set = %@", [set description]);

// Sorted
NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"self" ascending:YES];
NSArray *sortedArray = [set sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]];
NSLog(@"sortedArray = %@", [sortedArray description]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T13:06:54.617

试试下面的一个：

```
NSMutableArray *first=[NSMutableArray arrayWithArray:@[@"1",@"2",@"3",@"4",@"5",@"6"]];
NSMutableArray *second=[NSMutableArray arrayWithArray:@[@"2",@"4",@"6",@"8",@"0",@"12"]];

NSMutableSet *firstSet  = [NSMutableSet setWithArray:first];
NSMutableSet *secondSet = [NSMutableSet setWithArray:second];
[firstSet unionSet:secondSet];
NSArray *uniqueArray    = [firstSet allObjects]; 
```

# android - 如何在android中显示进度

> ID：15271587
> 
> 赞同：0
> 
> 时间：2013-03-07T12:44:15.153
> 
> 标签：android, android-layout, android-intent

我是 android 新手，我想在 android 中从一个活动移动到另一个活动时显示进度。这里是代码。异常是“活动 com.example.mytest.ReadContactsActivity 已泄漏窗口 com.android.internal.policy.impl。 PhoneWindow$DecorView{40ce4900 VE.... R....I. 0,0-295,62} 最初添加在这里”

```
class MyTask extends AsyncTask<Void, Integer, Void> {

Dialog dialog;
ProgressBar progressBar;
TextView tvLoading,tvPer;

@Override
protected void onPreExecute() {
    super.onPreExecute();
    dialog = new Dialog(ReadContactsActivity.this);
    dialog.setCancelable(false);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.progressdialog);

    progressBar = (ProgressBar) dialog.findViewById(R.id.progressBar1);
    tvLoading = (TextView) dialog.findViewById(R.id.tv1);
    dialog.show();
}

@Override
protected Void doInBackground(Void... params) {

 textViewDisplay = (TextView) findViewById(R.id.textViewDisplay);
 ContentResolver cr = getContentResolver();
 Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
        null, null, null, null);

 if (cur.getCount() > 0) {
    while (cur.moveToNext()) {
        String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
        String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            System.out.println("name : " + name + ", ID : " + id);
            textViewDisplay.append("Name: ");
            textViewDisplay.append(name);

            // get the phone number
            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                   ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                   new String[]{id}, null);
            while (pCur.moveToNext()) {
                  String phone = pCur.getString(
                         pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                  textViewDisplay.append(",Number: "+ phone);
                  textViewDisplay.append("\n");      
            }
            pCur.close();
            }
        }
    }
return null;
}

@Override
protected void onProgressUpdate(Integer... values) {
    super.onProgressUpdate(values);
    progressBar.setProgress(values[0]);
    tvLoading.setText("Loading...  " + values[0] + " %");
    tvPer.setText(values[0]+" %");
}

@SuppressWarnings("deprecation")
@Override
protected void onPostExecute(Void result) {
    super.onPostExecute(result);

    dialog.dismiss();

    AlertDialog alert = new AlertDialog.Builder(ReadContactsActivity.this)
            .create();

    alert.setTitle("Completed!!!");
    alert.setMessage("Your Task is Completed SuccessFully!!!");
    alert.setButton("Dismiss", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();

        }
    });
    alert.show();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:03:03.770

doInBackground 不在 UI 线程中运行，但您正在尝试从 doInBackground 获取视图

```
textViewDisplay = (TextView) findViewById(R.id.textViewDisplay); //wrong 
```

删除它并将其放在 PreExecute 方法上

而且你真的可以在非 UI 线程上做 UI 操作，所以不要对 doinBackGround 中的 textViewDisplay 做任何操作。

最后将您的数据附加到字符串并在 doInBackground 中返回，您将在 onPostExecute 中获得该值作为参数使用它来设置 Textvalue 类似这样

```
public String doInBackGround()
{
--
return result;
}
public void onPostExecute(String result)
{
textViewDisplay.setText(result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:52:58.567

我在您的代码上看不到任何问题，但 progressdialog 可能为 null 等。

我已经编写了显示和隐藏功能并使用它们。我在执行 asynctask（在活动中 - 实际上它们在我的基本活动中）和 onPostExecute 中的 hideLoading() 之前调用 showLoading() 函数。

请试一试。希望能帮助到你。

问候。

```
protected void showLoading() {
    if (dialog == null) {
        dialog = ProgressDialog.show(this, "", this.getResources()
                .getString(R.string.loading));
        dialog.setMessage(this.getResources().getString(R.string.loading));
        dialog.setCancelable(true);
        dialog.setCanceledOnTouchOutside(false);
        dialog.setOnCancelListener(new OnCancelListener() {

            public void onCancel(DialogInterface arg0) {
                 if(dialog.isShowing())
                     dialog.dismiss();
                 finish();
            }
        });
        dialog.show();
    }
}

protected void hideLoading() {
    if (dialog != null && dialog.isShowing()) {
        dialog.dismiss();
        dialog = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:08:59.330

这里有几件事是错误的。我不能确定导致泄漏的原因，但在你追究之前，请解决以下问题：

*   你真的不应该`textViewDisplay`在后台线程中搞乱。如果您需要/想要在 UI 工作时更新它，请使用`publishProgress()`它。

*   我现在根本看不到你打电话的任何地方`publishProgress()`。这意味着您的`onProgressUpdate()`方法可能永远不会被调用。

# plone - 如何使用 TALES 表达式在 PloneFormGen 中生成注册号？

> ID：15271588
> 
> 赞同：3
> 
> 时间：2013-03-07T12:44:15.970
> 
> 标签：plone, ploneformgen

我正在尝试使用 PloneFormGen 为会议设置注册表，我想使用 TALES 表达式来计算现有记录的数量，添加“1”，然后将其显示在“谢谢”页面上作为注册人的注册号码。这可能吗？

我过去曾使用以下内容生成一个随机的 6 位数字来为支持请求创建案例编号 ID，其中除了跟踪请求之外，该数字无关紧要，然后一旦案例关闭，它将被删除.

```
python:random.randint(100000, 999999) 
```

我是在正确的轨道上，还是我完全错误的方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:12:10.307

我过去使用以下技巧做到了这一点：

1.  在 ZMI 中，我在表单上创建了一个名为“reg_count”的整数属性，其中包含起始编号（导航到表单文件夹并将 /manage_propertiesForm 附加到 URL）；

2.  在表单中添加一个隐藏字段。我使用了 ID“regno”；

3.  使用自定义脚本适配器来获取 reg_count 属性，将其递增，并将其放入请求的表单字典中：

    ```
    reg_count = context.getProperty('reg_count', 0) + 1
    context.manage_changeProperties(reg_count=reg_count)
    request.form['regno'] = str(reg_count) 
    ```

4.  自定义感谢页面以显示它。

# linux - ASLR 受 Linux 上可用熵的影响？

> ID：15271589
> 
> 赞同：2
> 
> 时间：2013-03-07T12:44:20.543
> 
> 标签：linux, entropy, aslr

在内核源代码中提到[`random.c`](http://lxr.linux.no/linux+%2a/drivers/char/random.c#L1471)它`get_random_int`“类似于 urandom，但目标是最小化熵池耗尽”。但是，在哪里（以及如何）`get_random_int`与熵池交互？

现在，`urandom`实际上调用`extract_entropy_user`了，但我在`get_random_int`. 似乎`get_random_int`使用了自己的熵源（与键盘、鼠标和磁盘活动无关）：

```
hash[0] += current->pid + jiffies + get_cycles(); 
```

并且不关心（也不更新）一般系统可用的熵状态？

如何`get_random_int`耗尽熵池？这是在哪里更新的？我知道我遗漏了一些东西或错误地阅读了源代码，因为当我执行一个程序时，我可以通过在 entropy_avail 上执行 cat 来查看它是如何耗尽熵池的。

我浏览了[http://xorl.wordpress.com/2011/01/16/linux-kernel-aslr-implementation/](http://xorl.wordpress.com/2011/01/16/linux-kernel-aslr-implementation/)但似乎没有提到这是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:37:05.577

据我所知，它不会*直接*耗尽熵池。它只是返回一个低质量的随机数。它取决于 ISN seq 生成使用的秘密哈希（定期刷新）、它自己的 per-cpu 状态和 pid/time/cycles。

它与 urandom 的主要相似之处在于它在熵低时不会阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T04:02:32.453

`hash[0]`还与一个名为的散列混合在一起，该散列仅`random_int_secret`在启动时由函数生成一次`random_int_secret_init()`。它是使用 生成的`get_random_bytes()`，它确实耗尽了熵估计。

从 drivers/char/random.c 中定义了一个函数，该函数将生成这个一次性哈希，每次请求随机 int 时都会重新使用该哈希：

```
static u32 random_int_secret[MD5_MESSAGE_BYTES / 4];
int random_int_secret_init(void)
{
    get_random_bytes(random_int_secret, sizeof(random_int_secret)); /* XXX */
    return 0;
} 
```

在函数`get_random_int()`中 ,`random_int_secret`与`hash`, before混合`hash[0]`作为被请求的随机整数返回。

```
static DEFINE_PER_CPU(__u32 [MD5_DIGEST_WORDS], get_random_int_hash);
unsigned int get_random_int(void)
{
    __u32 *hash;
    unsigned int ret;

    if (arch_get_random_int(&ret))
        return ret;

    hash = get_cpu_var(get_random_int_hash);

    hash[0] += current->pid + jiffies + random_get_entropy();
    md5_transform(hash, random_int_secret); /* XXX */
    ret = hash[0];
    put_cpu_var(get_random_int_hash);

    return ret;
}
EXPORT_SYMBOL(get_random_int); 
```

在启动过程开始时，在 init/main.c 中，会生成此种子：

```
static void __init do_basic_setup(void)
{
    cpuset_init_smp();
    shmem_init();
    driver_init();
    init_irq_proc();
    do_ctors();
    usermodehelper_enable();
    do_initcalls();
    random_int_secret_init(); /* XXX */
} 
```

关于猫耗尽游泳池，我曾经记得它为什么这样做，但我现在不记得了。但是我很确定它不是 ASLR，因为在带有 RDRAND 的系统上，`get_random_int()`只从指令中给出整数，而没有别的。我的系统有 RDRAND，我还看到生成进程时熵计数下降。

# javascript - 在网页上接收 JavaScript 错误

> ID：15271591
> 
> 赞同：-2
> 
> 时间：2013-03-07T12:44:22.527
> 
> 标签：javascript, jquery

错误是：

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；CMNTDF； .NET4.0C)

时间戳：2013 年 3 月 7 日星期四 12:39:19 UTC

消息：预期函数行：1 字符：36223 代码：0

网址：[http ://www.amleo.com/Javascript/jqueryplugins.js](http://www.amleo.com/Javascript/jqueryplugins.js)

关于它的含义/我如何解决的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:53:25.930

有一个电话`Function`应该`function`只是 crtl-f 它。下次不要发布缩小版。几乎没有人会想要筛选你的 js 的缩小版本，我们也不应该...

# javascript - 如何在悬停时显示数据？

> ID：15271592
> 
> 赞同：1
> 
> 时间：2013-03-07T12:44:23.913
> 
> 标签：javascript, jquery

我想在鼠标悬停时显示数据，但是，我不擅长 jQuery，我不知道如何在悬停时通过它获取数据。到目前为止，这是我的功能：

```
function test_contact_group($id){
    $results = $this
        ->Contact
        ->ContactsContactGroup
        ->find('all', array('conditions'=> array('ContactsContactGroup.contact_id'=>$id,)));
    $this->set('results',$results); 
} 
```

而我的观点是：

```
 <div class="firsttable">
    <table width="100%" border="0" cellspacing="0" cellpadding="2">
        <thead>
            <tr class="heading">
                <td><?php echo __l('Group Name');?></td>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($results as $results){?>
            <tr>
                <td>
                    <?php echo $results['ContactGroup']['name']?>
                </td>
            </tr>
            <?php }?>
        </tbody>
    </table>    
</div> 
```

并且将获取数据的链接是

```
 <?php echo $this->Manager->link($records['ContactGroup']['name'],array('action'=> 'test_contact_group', $records['Contact']['contact_id']));?> 
```

链接的 HTML 是

```
 <a href="/contacts/test_contact_group/78">default</a> 
```

我想在悬停时通过此链接显示数据，我该怎么做，请帮我这样做，任何机构都可以帮助它，在此先感谢

我在链接上传递的参数是

```
 $records['Contact']['contact_id']) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:08:40.193

由于您的问题没有定义细节，我将为您提供可以引导您解决问题的 jQuery 库

有几种解决方案，一种是将数据已经放入 html 但用 CSS 隐藏。悬停时，您可以切换该元素的可见性。为此，请查看[Jquery 效果](http://api.jquery.com/category/effects/)，其中包括：显示、隐藏、切换、淡入、淡出、淡出切换等。

如果您不是在寻找静态加载的内容并且喜欢在悬停时检索信息，那么您应该查看任何[Jquery ajax](http://api.jquery.com/category/ajax/)功能，例如：获取、发布或加载

# c# - WCF - web.config：独立服务引用 [用于自托管和 IIS 托管]

> ID：15271594
> 
> 赞同：0
> 
> 时间：2013-03-07T12:44:27.760
> 
> 标签：c#, .net, wcf

**问题：**如何修改 web.config 以支持包含不同地址的 WCF-ServiceApplication 服务引用。在自托管和 IIS 模式下，地址不同。如何做到这一点，而无需为每个部署过程更改每个 WCF-ServiceApplication 中的 web.config。我可以动态请求/更新服务引用吗？

**背景：**为了支持内部不同的协议，我想在IIS中托管进行外部通信和自托管进行内部通信。当然，由于安全问题。我有 ~7 WCF-ServiceApplications web.configs 要修改。

**问题** WCF-ServiceApplication 依赖于附加的 WCF-ServiceApplications 作为服务引用。根据托管方法，地址会发生变化。

自托管

```
 <endpoint address="http://localhost:50108/ABService.svc"
            binding="basicHttpBinding" 
            bindingConfiguration="BasicHttpBinding_IABService"
            contract="ABServiceReference.IABService" 
            name="BasicHttpBinding_IAndonBoardService" /> 
```

IIS

```
 <endpoint address="http://localhost:20200/AB/ABervice.svc"
            binding="basicHttpBinding" 
            bindingConfiguration="BasicHttpBinding_IABService"
            contract="ABServiceReference.IABService" 
            name="BasicHttpBinding_IABService" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:27:32.543

这可以帮助： [在代码中配置 WCF 服务](http://msdn.microsoft.com/en-us/library/hh205277.aspx)和[创建 ServiceHostFactory](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx)

# jquery - 从内部jquery这个元素if

> ID：15271598
> 
> 赞同：0
> 
> 时间：2013-03-07T12:44:49.373
> 
> 标签：jquery, jquery-ui, animation

我要做的是简单的 jquery 向导，我有 4 个步骤，按钮上一个和下一个。根据你在哪一步，当你点击下一步时，线应该用金色填充，圆圈应该在那之后也填充。所以如果你在第 2 步，点击下一步，你会从第 2 圈到第 2 圈填充线3\. 以此类推……我设法用 5 个函数来完成，每个元素一个，但我确信它可以用一个更简单的函数来完成。这是代码：

```
$(document).ready(function () {
    $('.next').click(function () {
        if ($('.sirina').parent().prev('.krug').hasClass('stiglo')) {
            console.log(this);
            $('.sirina').animate({
                width: '150px'
            }, 1000, function () {
                $(this).parent().next('.krug').animate({
                    borderTopColor: '#E3B009',
                    borderBottomColor: '#E3B009',
                    borderLeftColor: '#E3B009',
                    borderRightColor: '#E3B009'
                }, 1000).addClass('stiglo');
            });
        }
    });
}); 
```

[http://jsfiddle.net/Frenki/LbssU/3/](http://jsfiddle.net/Frenki/LbssU/3/)

现在，问题就在console.log 之后，我是所有'.sirina' 类的动画，而不是之前的div 具有'stiglo' 类的那个，它是函数'if' 内的元素。但是，如果我使用“this”，那么它指的是“下一个”类，而不是 if 函数中的那个。

我希望所有这些都有意义:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:51:52.063

此回调中的范围是指`animate()`执行的元素：

```
 $('.sirina').animate({
            width: '150px'
        }, 1000, function () {
            // $(this) is $('.sirina') element the callback is executed on
            $(this).parent().next('.krug').animate({
                borderTopColor: '#E3B009',
                borderBottomColor: '#E3B009',
                borderLeftColor: '#E3B009',
                borderRightColor: '#E3B009'
            }, 1000).addClass('stiglo');
        }); 
```

在单击处理程序内部，范围是`click()`附加到的元素，在本例中为`$('.next')`。您可以使用闭包在`animate()`回调中使用此上下文。

```
$(document).ready(function () {
    $('.next').click(function () {
        var self = this;
        if ($('.sirina').parent().prev('.krug').hasClass('stiglo')) {
            console.log(this);
            $('.sirina').animate({
                width: '150px'
            }, 1000, function () {
                // self is $('.next')[0]
                $(self).parent().next('.krug').animate({
                    borderTopColor: '#E3B009',
                    borderBottomColor: '#E3B009',
                    borderLeftColor: '#E3B009',
                    borderRightColor: '#E3B009'
                }, 1000).addClass('stiglo');
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:11:30.167

你的问题是你`.sirina`用来动画。这将触发所有元素进行动画处理。在这里，您的 if 条件没有任何意义，因为您正在使用`.sirina`动画。现在我的回答

```
$(document).ready(function () {
    $('.next').click(function () {
        $('.stiglo').nextAll('.prvi:first').find('.sirina').animate({
                width: '150px'
            }, 1000, function () {

                 $(this).parent().prev('.krug').removeClass('stiglo');

                $(this).parent().next('.krug').animate({
                    borderTopColor: '#E3B009',
                    borderBottomColor: '#E3B009',
                    borderLeftColor: '#E3B009',
                    borderRightColor: '#E3B009'
                }, 1000).addClass('stiglo');
            }); 
```

[JSFIDDLE](http://jsfiddle.net/arjuncc/LbssU/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T12:57:16.333

设置元素的当前索引，看

[演示视图](http://jsfiddle.net/LbssU/5/)

```
 var current=0;

   $(document).ready(function () {
    $('.next').click(function () {
        if ($('.sirina').parent().prev('.krug').hasClass('stiglo')) {
            console.log(this);
            $('.sirina').eq(current).animate({
                width: '150px'
            }, 1000, function () {
                current++;
                $('.krug').eq(current).animate({
                    borderTopColor: '#E3B009',
                    borderBottomColor: '#E3B009',
                    borderLeftColor: '#E3B009',
                    borderRightColor: '#E3B009'
                }, 1000).addClass('stiglo');
            });
        }
    });
}); 
```

# python - 使用运算符减少列表作为对 mpi4py 中的每个元素求和

> ID：15271599
> 
> 赞同：4
> 
> 时间：2013-03-07T12:44:50.443
> 
> 标签：python, python-2.7, parallel-processing, mpi, reduce

我正在编写一个 mpi python 代码。例如，四个 proc 的数据如下：

```
data on procs0: [1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0]
data on procs1: [0, 0, 0, 4, 5, 6, 0, 0, 0, 0, 0, 0]
data on procs2: [0, 0, 0, 0, 0, 0, 7, 8, 9, 0, 0, 0]
data on procs3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 11, 12] 
```

我想在 mpi4py 库中使用 reduce 函数来减少 procs0 上的数据，结果：

```
result on procs0: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12] 
```

如何使用 mpi4py lib 函数实现它？

编辑：上面是一个简单的特殊情况，set不能用，看下面的另一种情况：

```
data on procs0: [1,0,0,0,0,0]
data on procs1: [0,2,0,0,0,0]
data on procs2: [0,0,0,3,0,0]
data on procs3: [0,0,0,0,4,5] 
```

理想的结果必须是：

```
result on procs0: [1,2,0,3,4,5] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-20T18:57:51.843

如果您想要数据的总和或最大值，我不确定您的问题。我使用 mpi`Reduce`函数编写了一个简单的示例，该函数计算总和。

```
#!/usr/bin/env python
import numpy as np
from mpi4py import MPI
comm = MPI.COMM_WORLD

comm.Barrier()
t_start = MPI.Wtime()

# this array lives on each processor
data = np.zeros(5)
for i in xrange(comm.rank, len(data), comm.size):
    # set data in each array that is different for each processor
    data[i] = i

# print out the data arrays for each processor
print '[%i]'%comm.rank, data
comm.Barrier()

# the 'totals' array will hold the sum of each 'data' array
if comm.rank==0:
    # only processor 0 will actually get the data
    totals = np.zeros_like(data)
else:
    totals = None

# use MPI to get the totals 
comm.Reduce(
    [data, MPI.DOUBLE],
    [totals, MPI.DOUBLE],
    op = MPI.SUM,
    root = 0
)

# print out the 'totals'
# only processor 0 actually has the data
print '[%i]'%comm.rank, totals

comm.Barrier()
t_diff = MPI.Wtime() - t_start
if comm.rank==0: print t_diff 
```

将此代码保存在文件中`reduce_test.py`并使用命令运行它会`mpirun -np 3 ./reduce_test.py`在我的机器上给出以下输出：

```
[0] [ 0\.  0\.  0\.  3\.  0.]
[1] [ 0\.  1\.  0\.  0\.  4.]
[2] [ 0\.  0\.  2\.  0\.  0.]
[1] None
[2] None
[0] [ 0\.  1\.  2\.  3\.  4.]
0.00260496139526 
```

请注意，将`op = MPI.SUM`调用中的参数更改`comm.Reduce`为`op = MPI.MAX`将计算最大值而不是总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:53:09.683

将列表推导与 zip 一起使用，存储每列的最大值

```
In [1]: procs0=[1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0]    
In [2]: procs1=[0, 0, 0, 4, 5, 6, 0, 0, 0, 0, 0, 0]
In [3]: procs2=[0, 0, 0, 0, 0, 0, 7, 8, 9, 0, 0, 0]
In [4]: procs3=[0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 11, 12]

In [5]: [max(i) for i in zip(procs0, procs1, procs2, procs3)]
Out[5]: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12] 
```

# javascript - 使用javascript打字时如何避免光标向后移动

> ID：15271600
> 
> 赞同：1
> 
> 时间：2013-03-07T12:44:59.120
> 
> 标签：javascript

在文本框中输入值时，当我在输入值之间输入值时，光标会自动移动到值的末尾。

```
<!DOCTYPE html>
<html>
    <body>
        <script>
        function truncate(x) {
            if(x.value.length > 0) 
            {               
                x.value = x.value.replace(/^\s+/, '');
            }
        }
        </script>

        <input id="otherText" onkeyup="javascript:truncate(this);" maxlength="12" type="text"/>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:03:51.770

尝试这个

[http://jsfiddle.net/DDQSU/2/](http://jsfiddle.net/DDQSU/2/)

```
$(function() {

    function setCaretPosition(elemId, caretPos) {
        var elem = elemId
        if(elem != null) {
        if(elem.createTextRange) {
           var range = elem.createTextRange();
           range.move('character', caretPos);
           range.select();
        }
        else {
           if(elem.selectionStart) {
              elem.focus();
              elem.setSelectionRange(caretPos, caretPos);
           }
           else
              elem.focus();
        }
    }
}

$("#otherText").on("keyup", function(event){
                            var x = this,sel=x.selectionStart;
                            if(x.value.length > 0) 
                            {               
                                x.value = x.value.replace(/^\s+/g, '');
                            }
                            setCaretPosition(x,sel);
                        })
                 }) 
```

解决方案已经存在 [于 html 文本框中的 Set keyboard caret position](https://stackoverflow.com/questions/512528/set-cursor-position-in-html-textbox)

此问题与[Javascript 重复，请避免光标在文本框末尾移动](https://stackoverflow.com/questions/5662608/javascript-avoid-cursor-moving-at-textbox-end)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:00:42.173

```
<!DOCTYPE html>
<html>
<body>

<script>
function truncate(x){
var val = document.getElementById("otherText");

var inputTextValue = val.value;
if(inputTextValue.length>0) 
    { 

    val.value = '';

}
}
</script>
<input id="otherText" onkeyup="javascript:truncate(this);"   maxlength="12" type="text"/> </body>
</html> 
```

请注意我不知道如何用特定的正则表达式替换字符串。但是上面的代码只是用一个空字符串替换。您可以根据您的要求进行修改。

# sql - 我是否必须使用动态 SQL 才能在 where 子句中添加一个部分，因为我们需要 SQLParameter-s

> ID：15271601
> 
> 赞同：0
> 
> 时间：2013-03-07T12:45:00.247
> 
> 标签：sql, sql-server, database

我的应用程序用于构建稍后使用的查询。DBCommand 和 SQLParameter-s 用于安全原因和转义。我想在 where 子句的开头添加一个部分（作为文本框输入），所以最后该部分看起来像：

```
WHERE @SECTION1 AND COLUMN1 = @PARAMETER1 AND COLUMN2 = @PARAMETER2 AND ... 
```

当我运行该应用程序时，它失败并出现以下异常：在预期条件的上下文中指定的非布尔类型的表达式，靠近“AND”。当然，在我添加 @SECTION1 之前，它一直都在工作。

我在论坛上发现我必须使用动态 SQL 才能做到这一点，但我显然不能，因为出于安全目的我们需要 SQLParameters。有没有其他方法可以实现这一目标？谢谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:48:01.503

查看此链接[http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)了解如何使用动态 sql。

但是，如果您运行代码并执行 sql，我建议在您的 c# 应用程序中构建 sql 语句。

# c# - 如何解决跨线程操作在 windows 窗体中无效？

> ID：15271602
> 
> 赞同：-2
> 
> 时间：2013-03-07T12:45:10.133
> 
> 标签：c#, asp.net, .net, ado.net, tcpclient

我一直被困在这里.....我正在创建一个聊天服务器 Windows 应用程序，它将托管并且所有客户端都将注册

让我解释一下我的场景，当我启动聊天服务器时.....我使用了 TextBox 名称 ChatTextBox，我尝试在其中获取所有注册的客户端 IP 地址

但是当我尝试在服务器上注册客户端时，它显示跨线程操作无效，如何解决？？？？？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Windows.Forms;
using System.Threading;

namespace Myservercheck
{
public partial class Form2 : Form
{
    TcpListener myli;
    TcpClient clientSocket = default(TcpClient);
    string s=string.Empty;

    public Form2(TcpListener tc)
    {
        myli = tc;
        InitializeComponent();

    }

    private void Form2_Load(object sender, EventArgs e)
    {
        IPlistBox.Items.Add(myli.LocalEndpoint.ToString());
        chattextBox.Text= "Chat server started on selected IP & Port Number:\n"+myli.LocalEndpoint.ToString();
        chattextBox.AppendText("\n");
        chattextBox.AppendText("Waiting for connections............\n");
        myli.Start();
       Thread thread1 = new Thread(listern);
       thread1.Start();
        chattextBox.AppendText("\n");

    }

    public void listern()
    {
        while (true)
        {

            clientSocket = myli.AcceptTcpClient();
            IPAddress tempAddress = ((IPEndPoint)(clientSocket.Client.RemoteEndPoint)).Address;
            chattextBox.Text = tempAddress.ToString();
            chattextBox.AppendText("Connection accepted from:" + s);
        }
        }
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:54:26.330

您需要调用表单控件上的方法来委托给表单的线程。您只能从创建表单的同一线程访问表单控件。

```
public void listern() {
    while (true) {
        clientSocket = myli.AcceptTcpClient;
        IPAddress tempAddress = ((IPEndPoint)(clientSocket.Client.RemoteEndPoint)).Address;
        UpdateChattextBox(tempAddress.ToString, "Connection accepted from:" + s);     
    }
}

public void UpdateChattextBox(string address, string message) {
    if ((chattextBox.InvokeRequired == true)) {
        this.invoke(UpdateCattextBox, address, message);
    }
    else {
        chattextBox.Text = tempAddress.ToString;
        chattextBox.AppendText(("Connection accepted from:" + s));
    }
} 
```

# python - 在文件处理期间如何尝试和除外在python中工作？

> ID：15271603
> 
> 赞同：1
> 
> 时间：2013-03-07T12:45:14.413
> 
> 标签：python, try-catch, file-handling

我很好奇这个**Try** and **except**在遇到这个错误后如何在 python 中工作：

```
def for_file(data):
    open_file = file('data.txt', 'w')
    try:
        open_file.write(data)
    except:
           print 'This is an error!'
    open_file.close() 
```

**输出**：这是一个错误！

```
def for_file(data):
    try:
        open_file = file('data.txt', 'w')
        open_file.write(data)
        print 'Successful!'
    except:
           print 'This is an error!'
    open_file.close() 
```

**输出**：成功！

这怎么可能？

**错误**：“ascii”编解码器无法对位置 15-16 中的字符进行编码：序数不在范围内（128）

我正在接收 unicode 格式的数据。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:45:06.923

要将 unicode 数据写入文件，请[`codecs.open()`](http://docs.python.org/2/library/codecs.html#codecs.open)改用：

```
import codecs

with codecs.open('data.txt', 'w', 'utf-8') as f:
    f.write(data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:58:49.937

你得到一个 TypeError。当您写入文件时，“数据”需要是字符串或缓冲区。如果您不向其传递字符串或缓冲区，您的第二个函数也将不起作用（我尝试将它们都传递给它们一个 2，但都不起作用）。下面的代码有效。

```
 def for_file(data):
    open_file = file('data.txt', 'w')
    try:
        open_file.write(str(data))
        print "Success!"
    except:
        import traceback; traceback.print_exc() #I used this to find the error thrown.
        print 'This is an error!'
    open_file.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:11:18.167

您可能需要打印错误消息以找出问题所在：

```
def for_file(data):
    open_file = file('data.txt', 'w')
    try:
        open_file.write(data)
    except Exception as e:
        print 'This is an error!'
        print e
    open_file.close() 
```

# mobile - sencha touch 中的点击事件被阻止 那么我现在如何触发该事件呢？

> ID：15271606
> 
> 赞同：1
> 
> 时间：2013-03-07T12:45:19.210
> 
> 标签：mobile, extjs, click, touch, tap

sencha touch 中的点击事件被阻止 那么我现在如何触发该事件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:52:32.463

如果你想在标签上有一个 Tap 事件，你可以这样做：

```
label.element.on({
    tap : function(e, t) { ... }
}); 
```

希望这可以帮助。

# android - 从 BaseAdapter 的 getView 中刷新 ImageButton.onClick 中的 ListView

> ID：15271608
> 
> 赞同：1
> 
> 时间：2013-03-07T12:45:24.070
> 
> 标签：android, listview, imagebutton, listviewitem, baseadapter

我有一个由自定义 BaseAdapter 生成的活动，如下所示：

![在此处输入图像描述](../Images/047823cb1ecd9e2e1da0d426143750a0.png)

这是`getView`关闭自定义 BaseAdapter：

```
 @Override
public View getView(int position, View view, ViewGroup parent) {
    final Visita visita = getItem(position);

    view = mInflater.inflate(R.layout.visita_item, null); //The ListView Item

    ImageButton btnUp, btnDown;
    btnUp = (ImageButton)view.findViewById(R.id.visita_btn_move_up);
    btnDown = (ImageButton)view.findViewById(R.id.visita_btn_move_down);

    btnUp = (ImageButton) view.findViewById(R.id.visita_btn_move_up);
    if (position != 0) {// First item can't have the button up
        btnUp.setBackgroundResource(R.drawable.ic_arrow_up);
    }

    btnDown = (ImageButton) view.findViewById(R.id.visita_btn_move_down);
    if (position != visitas.size() - 1) {// Last item can't have the button down
        btnDown.setBackgroundResource(R.drawable.ic_arrow_down);
    }

    final DatabaseAdapter adapter = new DatabaseAdapter(context);

    btnUp.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.d(TAG, "Moving UP");

            ContentValues values = new ContentValues();
            valores.put(DatabaseHelper.VISITA_COLS[5], visita.order - 1);
            String where = "ordem=?";
            String[] whereArgs = {String.valueOf(visita.order)};
            Log.d(TAG, "ID: " + adapter.atualizar(valores, where, whereArgs, DatabaseHelper.TB_VISITA));

                  // I should refresh the ListView now
        }
    });

    btnDown.setOnClickListener(new OnClickListener( ) {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.d(TAG, "Movind DOWN");

             //Here i should need the same, update the order in database and after refresh the ListView
        }
    });

    return view;
} 
```

基本上，`onClick`关闭`btnUp`和`btnDown`是不言自明的。订单也需要保存在数据库中，因为它会在之后发送。数据库中的更新工作正常，我的问题是：如何刷新他自己的 BaseAdapter 中的 ListView？

我检查了[这个](https://stackoverflow.com/questions/12685418/how-to-refresh-listview-using-getview-of-baseadapter-on-image-clickevent)问题，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:42:07.477

我曾经像[这样](https://stackoverflow.com/questions/15114050/refresh-listview-with-broadcastreceiver)`BroadcastReceiver`刷新过`ListView`

# ssrs-2008 - 自定义代码函数可以返回两个值吗？

> ID：15271614
> 
> 赞同：0
> 
> 时间：2013-03-07T12:45:43.290
> 
> 标签：ssrs-2008, reporting-services

我的报告中有以下代码：

```
Dim suma As Decimal = New Decimal()

Public Function SumLookup(ByVal items As Object()) As Decimal
    If items Is Nothing Then
        Return Nothing
    End If

    Dim ct as Integer = New Integer()
    suma = 0
    ct = 0

    For Each item As Object In items
        suma += Convert.ToDecimal(item)
        ct += 1
    Next

    If (ct = 0) Then return 0 else return suma 
End Function

Public Function GetMyVal() as Decimal
    GetMyVal = suma 
End Function 
```

上面的函数返回`suma`，我通过以下方式调用该函数：

```
code.SumLookup(LookupSet(Fields!Claim_Currency.Value,Fields!Claim_Currency.Value,Fields!Total_Paid_Loss___LAE.Value, "dataSet")) 
```

我想在我的报告`suma`中使用这两个变量。`ct`

如何调整函数以使其返回两个变量，然后如何从报告中调用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:09:12.437

如果您将 ct 声明为公共变量，那么您可以在代码中以 Code.Variable 的形式访问它。

```
Public ct As Integer

tb1=code.SumLookup(LookupSet(Fields!Claim_Currency.Value,Fields!Claim_Currency.Value,Fields!Total_Paid_Loss___LAE.Value, "dataSet"))

tb2=code.ct 
```

# c# - 如何将 GridView 列绑定到列表？

> ID：15271616
> 
> 赞同：0
> 
> 时间：2013-03-07T12:45:47.330
> 
> 标签：c#, asp.net, sql, gridview

我有一个名为 dayList 的列表，其中包含 12 个日期。我正在尝试将此列表绑定到 GridView 列。

```
 GridView2.DataSource = dayList;

        GridView2.DataBind();

        for (int i = 0; i < dayList.Count; i++)
        { 
            Label lbldate = (Label)GridView2.Rows[i].FindControl("lblgriddate");
            lbldate.Text = Convert.ToString(dayList[i]);
        }
    } 
```

我在以下位置收到未将对象引用设置为对象错误的实例：

`lbldate.Text = Convert.ToString(dayList[i]);`

是因为 GridView 中没有行吗？但是 GridView 不应该像我们将 GridView Column 与 DataTable 绑定时一样自动添加行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:06:29.527

正如@manish-mishra 所说，你为什么还要这样做？只要有以下就足够了：

```
GridView2.DataSource = dayList;
GridView2.DataBind(); 
```

如果要设置`lblgriddate`控件的文本，则应将其设置为绑定到行`DataItem`模板的。

```
 var dayList = new List<DateTime>() { 
            DateTime.Today, 
            DateTime.Today.AddDays(-1), 
            DateTime.Today.AddDays(-2) 
        };
        GridView2.DataSource = dayList;
        GridView2.DataBind(); 
```

对于 HTML：

```
 <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:TemplateField HeaderText="Date">
                <ItemTemplate>
                    <asp:Label ID="lblgriddate" Text="<%# Container.DataItem %>" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

然后我在调用后添加了以下代码`DataBind()`，这也有效。但这并没有改变任何东西。因为标签本身已经数据绑定到该值，所以您不必在代码中显式绑定它。

```
 for (int i = 0; i < dayList.Count; i++)
        {
            Label lbldate = (Label)GridView2.Rows[i].FindControl("lblgriddate");
            lbldate.Text = Convert.ToString(dayList[i]);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:51:32.517

您正在尝试访问那些甚至不存在的 GridView 行。

你为什么要绑定gridView的单列？

您应该执行以下两项中的任何一项：

1.  直接绑定你`gridView`的`dayList`ie

    ```
     GridView2.AutoGenerateColumns=true;
     GridView2.DataSource = dayList;
     GridView2.DataBind(); 
    ```

2.  将您的 GridView 绑定到具有至少 12 行的备用数据源，以便您的 GridView 确实有行，然后使用您的 DayList 中的值更新它的列之一`RowDataBound`（您的网格），即`dataBinding`

    ```
    for (int i = 0; i < dayList.Count; i++)
    { 
        Label lbldate = (Label)GridView2.Rows[i].FindControl("lblgriddate");
        lbldate.Text = Convert.ToString(dayList[i]);
    } 
    ```

在 RowDataBound 内

```
 protected void Review_grid_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Cells[2].Text = DayList[e.Row.RowIndex];

        }
    } 
```

它应该给你一个想法：

您也可以将您的`DayList`收藏转换为`GridViewRow` 收藏并将其添加`Controls`到`GridView`. 见[参考](https://stackoverflow.com/questions/8700432/asp-net-dynamically-add-gridviewrow)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:24:01.533

创建一个新的 DataGridViewRow 对象 abd，然后将您的项目从列表添加到行。完成此操作后，将此行添加到您的 gridview。这将做你正在尝试做的事情

# c# - 如何在 ObjectListView 列中显示/放置按钮？

> ID：15271621
> 
> 赞同：5
> 
> 时间：2013-03-07T12:46:09.513
> 
> 标签：c#, objectlistview

我学习在 C# 中使用[ObjectListView](http://objectlistview.sourceforge.net/cs/index.html)来显示我的 MySQL 数据，并尝试在列内绘制/放置一个删除按钮，以便当我单击它时，它将删除该行。

我知道如何在列内绘制图像或进度条，但问题是我不知道如何在其中放置按钮。当我搜索谷歌时，我发现有人说必须使用自定义渲染器来绘制一个按钮，但我不知道如何。

如何将按钮放在列内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:12:09.653

[此答案](https://stackoverflow.com/a/13191759/1790864)解释了如何在单击该行的特定列时使用 CellEditStarting 事件删除该行。

~~如果您想显示某种删除符号，您只需向该解决方案添加自定义渲染器~~。

您不必实现自定义渲染器来显示该行的某种按钮图像。您可以使用 ImageGetter。我改进[了我已经提到的答案](https://stackoverflow.com/a/13191759/1790864)。它现在包含一个示例。

提炼：

```
// assign an ImageList containing at least one image to SmallImageList
objectListView1.SmallImageList = imageList1;

// always display image from index 0 as default image for deleteColumn
deleteColumn.ImageGetter = delegate {
    return 0;
}; 
```

# c++ - 颜色处理

> ID：15271623
> 
> 赞同：0
> 
> 时间：2013-03-07T12:46:15.083
> 
> 标签：c++, opencv

我有这个任务来交换图像中的颜色。

将红色更改为蓝色 将蓝色更改为绿色并将绿色更改为红色

用户将输入图像，输出将显示带有互换颜色的图像。

我得到了将 RGB 转换为 HSI 的提示。但仍然......我不知道该怎么做。我应该采取哪些步骤才能使这项任务成为可能？以下是将RGB转换为HSI的公式谢谢。:)

将 RGB 值转换为 HSI 值的方程式 假设 R、G 和 B 是一种颜色的红色、绿色和蓝色值。恒指强度由等式给出

```
I = (R + G + B)/3. 
```

现在让 m 为 R、G 和 B 中的最小值。颜色的 HSI 饱和度值由下式给出

```
S = 1 - m/I    if I > 0, or
S = 0            if I = 0. 
```

要将颜色的整体色调 H 转换为角度度量，请使用以下等式：

```
H = cos-1[ (R - ½G - ½B)/√R² + G² + B² - RG - RB - GB ]            if G ≥ B, or
H = 360 - cos-1[ (R - ½G - ½B)/√R² + G² + B² - RG - RB - GB ]    if B > G, 
```

其中反余弦输出以度为单位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:52:38.353

由于颜色是度数和圆形，因此您应该在色调上添加 120 度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:06:31.047

你可以试试 hsv 颜色 rappresentation ：

[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

您可以在“色相和色度”下找到如何转换

最大 G 表示值介于 1 和 3 之间，最大蓝色值介于 3 和 5 之间，最大 R 值介于 5 和 6 或 0 和 1 之间！最后你乘以 60，你得到一个类似值的度数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:58:16.863

将最大色调值的 1/3 添加到每个像素的 H 通道。如果使用 8U 深度，则加 255/3，如果使用 32F 深度，则加 0.333（但如果溢出超过 1，则减 1）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:56:12.603

你措辞的方式让我觉得你应该做基础计算，但既然你提到了 opencv 作为标签，我会说你可以用一个将图像转换为 HSV（我相信与 HSI 相同）使用opencv的行：

```
cvCvtColor( src, hsvDestination, CV_BGR2HSV ); 
```

您可以在此处找到更多信息：http: [//docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T15:53:03.420

以下是我编写的函数（以及一些描述一对夫妇的评论），它们用于将“浅色”（在白纸上很难看到）颜色映射到黑色。我要求`CheckSwapWhite`打印每种颜色，但可以为每个像素调用它。我没有创建灰度图像的公式，但我敢打赌，您可以通过创造性的 Google 搜索找到它。

```
//----------------------------------------------------------------------------
/*
   Colour Brightness Formula

   The following is the formula suggested by the World Wide Web
   Consortium (W3C) to determine the brightness of a colour.

   ((Red value X 299) + (Green value X 587) + (Blue value X 114)) / 1000

   The difference between the background brightness, and the
   foreground brightness should be greater than 125.
 */
//----------------------------------------------------------------------------

int ColorBrightness( COLORREF cr )
{
   return ((GetRValue(cr) * 299) +
           (GetGValue(cr) * 587) +
           (GetBValue(cr) * 114)) / 1000;
}

//----------------------------------------------------------------------------
/*
   Colour Difference Formula

   The following is the formula suggested by the W3C to determine
   the difference between two colours.

     (maximum (Red   value 1, Red   value 2) - minimum (Red   value 1, Red   value 2))
   + (maximum (Green value 1, Green value 2) - minimum (Green value 1, Green value 2))
   + (maximum (Blue  value 1, Blue  value 2) - minimum (Blue  value 1, Blue  value 2))

   The difference between the background colour and the foreground
   colour should be greater than 500.
 */
//----------------------------------------------------------------------------

int ColorDifference( COLORREF c1, COLORREF c2 )
{
   return (max(GetRValue(c1), GetRValue(c2)) - min(GetRValue(c1), GetRValue(c2)))
        + (max(GetGValue(c1), GetGValue(c2)) - min(GetGValue(c1), GetGValue(c2)))
        + (max(GetBValue(c1), GetBValue(c2)) - min(GetBValue(c1), GetBValue(c2)));
}

//----------------------------------------------------------------------------

COLOREF CheckSwapWhite( COLORREF cr )
{
   int      cdiff;
   int      bdiff;

   bdiff = 255 - ColorBrightness( cr ); // 255 = ColorBrightness(WHITE)
   cdiff = ColorDifference( cr, RGB(0xFF,0xFF,0xFF) );

   if( (cdiff < gnDiffColorThreshold) ||  // (500 by default)
       (bdiff < gnDiffBrightThreshold) )  // (125 by default)
   {
      return RGB(0x00,0x00,0x00); // black
   }
   return cr;
} 
```

这两个阈值变量是具有给定默认值的可配置设置。

# extjs - 是否可以在 sencha Ext.js 中绘制非连续折线图（折线图）？

> ID：15271626
> 
> 赞同：0
> 
> 时间：2013-03-07T12:46:24.100
> 
> 标签：extjs, extjs4, extjs4.1, sencha-charts

我要在 sencha Ext.js 中设计折线图。谁能告诉我，是否可以在 sencha Ext.js 中绘制非连续折线图（折线图）？供参考，我附上了图片。谢谢![蓝色和红色颜色线](../Images/43deac5787b838e81d558d5efb66b7d5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:23:46.587

嗨，我从 sencha 论坛得到了答案，我们不能做断线图。[http://www.sencha.com/forum/showthread.php?258157-Is-it-possible-to-draw-non-continuous-line-chart-(Line-break-chart)-in-sencha-Ext. &p=945869#post945869](http://www.sencha.com/forum/showthread.php?258157-Is-it-possible-to-draw-non-continuous-line-chart-(Line-breaking-chart)-in-sencha-Ext.&p=945869#post945869)

# java - 添加错误并将请求发送回请求页面 servlet 过滤器

> ID：15271634
> 
> 赞同：0
> 
> 时间：2013-03-07T12:46:35.330
> 
> 标签：java, servlets, servlet-filters

我正在编写一个 servlet 过滤器。我想添加错误并将响应发送回请求来自的页面。

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
        throws IOException, ServletException {

        final HttpServletRequest servletRequest = (HttpServletRequest)request;
       final HttpServletResponse servletResponse = (HttpServletResponse) response;
       //add error and redirect the request to previous page
       chain.doFilter(request, response);

} 
```

我知道我们可以将响应重定向为

```
servletResponse.sendRedirect("/WebContent/Error.jsp"); 
```

请让我知道如何添加错误消息并将请求发回。

我想添加一些自定义错误消息。`"Validation failed. Please try again".`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:52:16.993

servlet 响应。[发送错误](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendError%28int,%20java.lang.String%29)（）？？

# c# - DataTable 作为声明性数据源？

> ID：15271644
> 
> 赞同：3
> 
> 时间：2013-03-07T12:47:03.320
> 
> 标签：c#, asp.net, datatable, telerik

我正在使用 Telerik 的 Grid，如果它与声明性数据源有关，它会揭示其潜力。但是我不需要创建数据库表，只是想使用标准`DataTable`作为我的数据存储。

我要使用的组件项确实需要`DataSource`绑定。（`GridDropDownColumn`在 Telerik RadGrid 中）。

有没有办法制作一个使用简单存储的数据源（适合声明性绑定到组件）`DataTable`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:49:22.333

就在这里。

只需使用`ObjectDataSource`. 在其 selectMethod 中，将其指向代码隐藏（或其他任何地方）中返回您的`DataTable`.

# java - Android后退键什么都不做？

> ID：15271646
> 
> 赞同：5
> 
> 时间：2013-03-07T12:47:05.767
> 
> 标签：java, android

我的应用由一项活动组成。当我按下后没有任何反应，这是为什么呢？我认为它会杀死应用程序。如果我按 home 键，应用程序会根据需要在后台继续运行。只是后退按钮什么都不做。我能做些什么来影响这一点？

我已在文档中阅读：

```
public void onBackPressed () 
```

当活动**检测到用户按下后退键**时调用。默认实现只是完成**当前活动**，但您可以覆盖它来做任何您想做的事情。

我没有覆盖这个。

这是已经提到的，覆盖键的东西：

```
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event == null || event.getAction() == KeyEvent.ACTION_UP) {

        return false;
    }
   if(event.getKeyCode() == KeyEvent.KEYCODE_DEL){

    mEntry.setOnFocusChangeListener(new OnFocusChangeListener(){
        @Override
        public void onFocusChange(View v,boolean hasFocus){
              /* When focus is lost check that the text field
               * has valid values.
               */
              if (!hasFocus && !mEntry.getText().toString().trim().equals("")) {

                    mSession.appendToEmulator(cmdLeft, 0, cmdLeft.length);
                    mSession.appendToEmulator(cmdErase, 0, cmdErase.length);

                    Log.d(TAG, "in inner delete");
              }
              else {mEntry.setText(" ");
              }
        }          
    });

    Log.d(TAG, "in delete in delete in delete in delete");
    try {
        sendOverSerial("\b".getBytes("UTF-8"));
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
}

    return super.dispatchKeyEvent(event);
}; 
```

另一个片段，来自 onCreate：

```
mEntry = (EditText) findViewById(R.id.term_entry);

        mEntry.setOnEditorActionListener(new TextView.OnEditorActionListener() {

            @Override
            public boolean onEditorAction(TextView v, int actionId,
                    KeyEvent event) {

                /* Ignore enter-key-up events. */
                if (event != null && event.getAction() == KeyEvent.ACTION_UP) {

                    return false;
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:11:26.857

没有您的实际代码很难说，但我会大胆猜测并说您在某处`Activity`已被覆盖`onKeyDown`或在`onKeyUp`那里`KeyEvent.KEYCODE_BACK`处理。我在自己的应用程序中遇到了这样的行为，如果`onKeyDown`处理 back-key 并返回`true`，`onBackPressed()`甚至永远不会被调用。

# jquery - JQuery Mobile Form data-ajax="false" 使用计时器自动提交

> ID：15271656
> 
> 赞同：2
> 
> 时间：2013-03-07T12:47:42.413
> 
> 标签：jquery, mobile

我有一个表格，几分钟后会自动发送。我使用 JQuery Mobile，但想像普通页面一样发送表单，而不是使用 JQuery Mobile Ajax 系统。使用“data-ajax=false”，我可以阻止 JQuery 这样做。但是当我禁用 JQuery Mobile 功能时，我发送表单的自定义 JS 脚本不起作用

$('form#question_form').submit();

当表单的“data-ajax”设置为 false 时，这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:00:00.543

data-ajax 不是这里的问题。您可能对脚本有一些问题。或者您可以为提交操作返回 false。 [数据-ajax Jquery 移动](http://jquerymobile.com/demos/1.0b3/docs/forms/forms-sample.html)

> 表单也像锚一样接受转换的属性，例如 data-transition="pop" 和 data-direction="reverse"。要提交没有 Ajax 的表单，您可以全局禁用 Ajax 表单处理，或者通过 data-ajax="false" 属性执行表单。target 属性（如 target="_blank" ）在表单上也受到尊重，并且在表单提交时默认由浏览器处理该目标。请注意，与锚点不同的是，表单上不允许使用 rel 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:49:44.313

就在您发送它之前，您可以删除属性 data-ajax 或将其设置为 true 并提交。

```
$('form#question_form').attr('data-ajax','true');
$('form#question_form').submit(); 
```

# c++ - wmi代码泄露

> ID：15271658
> 
> 赞同：0
> 
> 时间：2013-03-07T12:47:48.993
> 
> 标签：c++

我从[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390424%28v=vs.85%29.aspx)复制并修改了一段代码。

它泄漏的内存。请帮忙。

```
#include "querysink.h"

int main(int argc, char **argv)
{
HRESULT hres;
hres =  CoInitializeEx(0, COINIT_MULTITHREADED); 
if (FAILED(hres))
{
    cout << "Failed to initialize COM library. Error code = 0x" 
        << hex << hres << endl;
    return 1;                  // Program has failed.
}

hres =  CoInitializeSecurity(
    NULL, 
    -1,                          // COM authentication
    NULL,                        // Authentication services
    NULL,                        // Reserved
    RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication 
    RPC_C_IMP_LEVEL_IMPERSONATE, // Default Impersonation  
    NULL,                        // Authentication info
    EOAC_NONE,                   // Additional capabilities 
    NULL                         // Reserved
    );

if (FAILED(hres))
{
    cout << "Failed to initialize security. Error code = 0x" 
        << hex << hres << endl;
    CoUninitialize();
    return 1;                    // Program has failed.
}

IWbemLocator *pLoc = NULL;

hres = CoCreateInstance(
    CLSID_WbemLocator,             
    0, 
    CLSCTX_INPROC_SERVER, 
    IID_IWbemLocator, (LPVOID *) &pLoc);

if (FAILED(hres))
{
    cout << "Failed to create IWbemLocator object."
        << " Err code = 0x"
        << hex << hres << endl;
    CoUninitialize();
    return 1;                 // Program has failed.
}

IWbemServices *pSvc = NULL;

hres = pLoc->ConnectServer(
    _bstr_t(L"ROOT\\CIMV2"), 
    NULL,
    NULL,
    0,
    NULL,
    0,
    0, 
    &pSvc
    );

if (FAILED(hres))
{
    cout << "Could not connect. Error code = 0x" 
         << hex << hres << endl;
    pLoc->Release();     
    CoUninitialize();
    return 1;                // Program has failed.
}

cout << "Connected to ROOT\\CIMV2 WMI namespace" << endl;

hres = CoSetProxyBlanket(
   pSvc,                        // Indicates the proxy to set
   RPC_C_AUTHN_WINNT,           // RPC_C_AUTHN_xxx
   RPC_C_AUTHZ_NONE,            // RPC_C_AUTHZ_xxx
   NULL,                        // Server principal name 
   RPC_C_AUTHN_LEVEL_CALL,      // RPC_C_AUTHN_LEVEL_xxx 
   RPC_C_IMP_LEVEL_IMPERSONATE, // RPC_C_IMP_LEVEL_xxx
   NULL,                        // client identity
   EOAC_NONE                    // proxy capabilities 
);

if (FAILED(hres))
{
    cout << "Could not set proxy blanket. Error code = 0x" 
        << hex << hres << endl;
    pSvc->Release();
    pLoc->Release();     
    CoUninitialize();
    return 1;
}

QuerySink* pResponseSink = new QuerySink();
hres = pSvc->ExecQueryAsync(
    bstr_t("WQL"), 
    bstr_t("SELECT * FROM Win32_NTLogEvent"),
    WBEM_FLAG_BIDIRECTIONAL, 
    NULL,
    pResponseSink);

if (FAILED(hres))
{
    cout << "Query for log collection failed."
        << " Error code = 0x" 
        << hex << hres << endl;
    pSvc->Release();
    pLoc->Release();
    pResponseSink->Release();
    CoUninitialize();
    return 1;
}

while(pResponseSink->IsDone()==false){
        Sleep(100);
        }

pSvc->Release();
pLoc->Release();
CoUninitialize();
while(1)
{
 //do other job here
}

return 0;   // Program successfully completed.

}//end of file 
```

//querysink.cpp

```
#include "querysink.h"

ULONG QuerySink::AddRef()
{
return InterlockedIncrement(&m_lRef);
}

ULONG QuerySink::Release()
{
LONG lRef = InterlockedDecrement(&m_lRef);
if(lRef == 0)
    delete this;
return lRef;
}

HRESULT QuerySink::QueryInterface(REFIID riid, void** ppv)
{
if (riid == IID_IUnknown || riid == IID_IWbemObjectSink)
{
    *ppv = (IWbemObjectSink *) this;
    AddRef();
    return WBEM_S_NO_ERROR;
}
else return E_NOINTERFACE;
}

HRESULT QuerySink::Indicate(long lObjectCount,
IWbemClassObject **apObjArray)
{
HRESULT hres = S_OK;
VARIANT writtenTime,genTime,logFile,eventCode,eventId,eventType,category;

for (int i = 0; i < lObjectCount; i++)
{
            hres = apObjArray[i]->Get(L"TimeWritten", 0, &writtenTime, 0, 0);
            hres = apObjArray[i]->Get(L"TimeGenerated", 0, &genTime, 0, 0);
            hres = apObjArray[i]->Get(L"Logfile", 0, &logFile, 0, 0);
            hres = apObjArray[i]->Get(L"Category", 0, &category, 0, 0);
            hres = apObjArray[i]->Get(L"EventCode", 0, &eventCode, 0, 0);
            hres = apObjArray[i]->Get(L"EventIdentifier", 0, &eventId, 0, 0);
            hres = apObjArray[i]->Get(L"EventType", 0, &eventType, 0, 0); 
```

//如果我删除了 7 行以上，那么内存消耗就可以了。

```
 if (FAILED(hres))
    {
        cout << "Failed to get the data from the query"
            << " Error code = 0x"
            << hex << hres << endl;
        return WBEM_E_FAILED;       // Program has failed.
    }

}
VariantClear(&writtenTime);
VariantClear(&genTime);
VariantClear(&category);
VariantClear(&eventCode);
VariantClear(&eventId);
VariantClear(&eventType);
VariantClear(&logFile);

return WBEM_S_NO_ERROR;
}

HRESULT QuerySink::SetStatus(
        /* [in] */ LONG lFlags,
        /* [in] */ HRESULT hResult,
        /* [in] */ BSTR strParam,
        /* [in] */ IWbemClassObject __RPC_FAR *pObjParam
    )
{
if(lFlags == WBEM_STATUS_COMPLETE)
{
    printf("Call complete.\n");

    EnterCriticalSection(&threadLock);
    bDone = true;
    LeaveCriticalSection(&threadLock);
}
else if(lFlags == WBEM_STATUS_PROGRESS)
{
    printf("Call in progress.\n");
}

return WBEM_S_NO_ERROR;
}

bool QuerySink::IsDone()
{
bool done = true;

//  EnterCriticalSection(&threadLock);
done = bDone;
//  LeaveCriticalSection(&threadLock);

return done;
}    // end of querysink.cpp 
```

//querysink.h

```
#ifndef QUERYSINK_H
#define QUERYSINK_H

#define _WIN32_DCOM
#include <iostream>
using namespace std;
#include <comdef.h>
#include <Wbemidl.h>

# pragma comment(lib, "wbemuuid.lib")

class QuerySink : public IWbemObjectSink
{
LONG m_lRef;
bool bDone;
CRITICAL_SECTION threadLock; // for thread safety

public:
QuerySink() { m_lRef = 0; bDone = false; 
    InitializeCriticalSection(&threadLock); }
~QuerySink() { bDone = true;
    DeleteCriticalSection(&threadLock); }

virtual ULONG STDMETHODCALLTYPE AddRef();
virtual ULONG STDMETHODCALLTYPE Release();        
virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID riid,
    void** ppv);

virtual HRESULT STDMETHODCALLTYPE Indicate( 
        LONG lObjectCount,
        IWbemClassObject __RPC_FAR *__RPC_FAR *apObjArray
        );

virtual HRESULT STDMETHODCALLTYPE SetStatus( 
        /* [in] */ LONG lFlags,
        /* [in] */ HRESULT hResult,
        /* [in] */ BSTR strParam,
        /* [in] */ IWbemClassObject __RPC_FAR *pObjParam
        );

bool IsDone();
};

#endif    // end of querysink.h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:38:59.590

检查[IWebmServices::Get](http://msdn.microsoft.com/en-us/library/windows/desktop/aa391442%28v=vs.85%29.aspx)的文档，你的变体清除也是错误的，你基本上是在滥用它的用法，考虑在 for 循环中移动你的变体并释放你的变体。您正在通过引用获取变体，在完成每个变体之后，您应该在获取下一个对象的属性之前清除它，`apObjArray`因为您将获得不同的对象。您的代码所做的只是释放每个变体的最后一个引用。此外，由于您`HRESULT`对所有调用都使用相同的对象，`Get`这意味着如果任何调用失败，您将不会释放属性，这会导致泄漏。

考虑用以下代码替换您的代码：

```
for (int i = 0; i < lObjectCount; i++)
{

         VARIANT writtenTime,genTime,logFile,eventCode,eventId,eventType,category;  
         BSTR strTimeWrittenProp = SysAllocString(L"TimeWritten");   
         hres = apObjArray[i]->Get(strTimeWrittenProp, 0, &writtenTime, 0, 0);   
         SysFreeString(strTimeWrittenProp); 

         //... Get other properties

         VariantClear( &writtenTime );
         //..clear variants before moving to next object in array
    enter code here
    if (FAILED(hres))
    {
        cout << "Failed to get the data from the query"
            << " Error code = 0x"
            << hex << hres << endl;
        return WBEM_E_FAILED;       // Program has failed.
    }

} 
```

考虑用这个替换你所有的 get 调用

# dynamics-crm-2011 - 如何控制 CRM 2011 中的删除功能

> ID：15271661
> 
> 赞同：-1
> 
> 时间：2013-03-07T12:47:54.293
> 
> 标签：dynamics-crm-2011, dynamics-crm, microsoft-dynamics

**问题：** CRM 2011 中是否可以使用插件来控制删除功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:39:29.567

如果问题是如何阻止用户删除特定实体，请删除他们的删除权限。

如果问题是当用户尝试根据一些额外的业务规则删除记录时，我如何不删除某些时间，那么是的，自定义插件是完美的。为预验证阶段的删除步骤注册它并且验证失败。

这是一个很好的入门博客： http: [//mscrmtools.blogspot.com/2011/01/crm-2011-plugins-welcome-to.html](http://mscrmtools.blogspot.com/2011/01/crm-2011-plugins-welcome-to.html)

# iphone - 查看拖动segue

> ID：15271662
> 
> 赞同：1
> 
> 时间：2013-03-07T12:47:54.453
> 
> 标签：iphone, storyboard, drag, segue

我想创建一个应用程序，它显示一个可拖动的窗口（购物车）。购物车必须从屏幕底部拖动​​，并且必须覆盖所有打开的视图。拖动必须跟随您的手指。

是否可以使用 segues 来实现这一点？我的想法是用这样的触摸事件执行segue：

```
[self performSegueWithIdentifier:@"Show Cart" sender:self]; 
```

然后，segue 实现将打开购物车，将其放在屏幕外，然后定位它以反映用户手指的移动，直到用户释放它。然后它将动画返回或全屏。

它不是为此而设计的，那么我该如何实现呢？

编辑：我明白了，我必须更具体:) 如果我很好地理解了文档，我可以通过三种方式呈现一个视图：

1.  把它推到一个导航控制器：我不想要这个，因为购物车存在于我的导航链“上方”，所以把它推到那里会混淆用户。

2.  以模态方式呈现它：您不能拖动视图，因为它后面的对象没有显示（它们只是黑色）。

3.  将视图添加到其他视图，例如我的应用程序的根导航控制器：尝试了这个，但是当我单击购物车上的某个按钮时，应用程序崩溃了。我相信，那是因为我没有很好地初始化或存储控制器。

所以，假设我可以模态地呈现视图。但是我该如何解决，呈现的触摸也会导致窗口移动？这个视图理想地放置在哪个对象上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:07:45.060

来自苹果文档：

“创建自定义 Segue

Interface Builder 为从一个视图控制器转换到另一个视图控制器的所有标准方法提供了 segues..."

因此，如果您想通过手指移动来移动视图（不是视图控制器），则不适合您..

为了通过手指的移动来移动视图，您应该这样做：

将平移手势识别器添加到您的视图（我们将其称为 theView）：

```
 UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(viewPanned:)];
    [theView addGestureRecognizer:panGestureRecognizer]; 
```

然后实现 viewPanned: 方法

```
- (void)viewPanned:(UIPanGestureRecognizer *)recognizer{
    if (recognizer.state == UIGestureRecognizerStateChanged)
        theView.center = [recognizer locationInView:self.view];
 } 
```

请注意，此代码假定 theView 直接添加到 viewControllers.view（其中 self 指的是 viewController）

# c# - c#中的用户控件验证

> ID：15271663
> 
> 赞同：1
> 
> 时间：2013-03-07T12:47:54.970
> 
> 标签：c#, winforms, user-controls, overriding, errorprovider

在我的用户控件中，我有一个不是从 TextBox 继承的 TextBox，我正在做一个

数字验证（仅允许数字）

```
public delegate void usercontrolError(string message);
    public event usercontrolError onerror;

 Private void txtLocl_KeyPress(object sender, KeyPressEventArgs e)
{
    if(e.KeyChar != '\b')
    {
        if(!char.IsDigit(e.KeyChar))
        {
        e.Handled=true;
        }
        else
       {
         onerror.Invoke("Enter Digits Only");
       }
    }
} 
```

在表格中我写了以下代码

```
 public Form1()
 {
     txtLocl.onerror += new ciscontrols.mtbDtTmPk.usercontrolError(mtbDtTmPk1_onerror);
 }

    void mtbDtTmPk1_onerror(string message)
    {
        epfrm2.SetError(mtbDtTmPk1, message);
        //throw new NotImplementedException();
    } 
```

我在表单中编写代码。现在我不想在表单中编写任何代码。但 errorProvider 仅在 Form1 中。我怎么知道。用户不能在 Form1 中编写任何代码。但 Form ErrorProvider 将起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:22:44.573

**你可以触发一个事件：**

```
public delegate void CustomTextBoxError(string message);
public event CustomTextBoxError onError;

private void txtLocl_KeyPress(object sender, KeyPressEventArgs e)
{
    if(e.KeyChar != '\b')
    {
        if(char.IsDigit(e.KeyChar))
        {
            e.Handled=true;
        }
        else
        {
             if (onError != null)
               onError.Invoke("Enter digits only");
        }
    }
} 
```

**并以您的形式：**

```
private void MyForm_Load(object sender, EventArgs e)
{
   myUserControl.onError += new CustomTextBoxError(MyForm_onError);
}

void MyForm_onError(string message)
{
    //do anything you want in your form...
} 
```

# objective-c - 从包含块的方法返回值

> ID：15271666
> 
> 赞同：1
> 
> 时间：2013-03-07T12:47:59.843
> 
> 标签：objective-c, objective-c-blocks

我有一个返回值的方法（一个 NSArray），并且该方法的实现包含调用一个具有完成块的方法。我想做的是返回一个从完成块中获得的 NSArray 。

有什么方法可以延迟从这个方法返回一个值，直到完成块完成执行？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:25:41.247

所以，你的意思是你想要这样的东西：

```
- (NSArray*)someMethod {
    [self someMethodWithACompletionBlock:^(NSArray *array) {
        return array;
    }];
} 
```

好吧，不幸的是，它不会那样发生（因为块是一个函数，在它内部返回会使编译器认为你正在尝试从块返回一个值而不是封闭方法），但是你可以数组是一个输出参数并使用阻塞函数返回一个正确变异的数组：

```
- (NSArray*)someMethod {
   NSArray *retVal = nil;
    [self someMethodWithAnOutParameter:&retVal];
    return retVal;
} 
```

# ajax - CaptchaMvc 与 ajax

> ID：15271671
> 
> 赞同：1
> 
> 时间：2013-03-07T12:48:09.323
> 
> 标签：ajax, asp.net-mvc-4, captcha

我正在使用 mvc4 c# 并使用 CaptchaMvc 中的表单查看。

我通过 ajax 发送表单数据：

```
$.ajax({
            url: $('#registerForm').attr("action"),
            type: 'POST',
            contentType: 'application/json',
            dataType: 'json',
            data: JSON.stringify($('#registerForm').serialize()),
            beforeSend: function () {

            },
            success: function (result) {
                //debugger;

            },
            error: function (event, request, settings) {
                //debugger;

            }
        }); 
```

我可以在萤火虫上看到“CaptchaInputText”发送到服务器，但我仍然收到错误

> [NullReferenceException：对象引用未设置为对象的实例。]
> CaptchaMvc.Infrastructure.DefaultCaptchaManager.ValidateCaptcha(ControllerBase 控制器，IParameterContainer parameterContainer) in g:\CodePlex\Captcha\CaptchaMvc(Mvc 3)\Infrastructure\DefaultCaptchaManager.cs:435

如果我有这条线，它就会发生：

```
[CaptchaMvc.Attributes.CaptchaVerify("Captcha is not valid")] 
```

在控制器操作上，如果没有，则没有错误，但验证码未得到验证。该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:45:03.553

尝试像这样更改您的请求：

```
$.post($('#registerForm').attr("action"), $('#registerForm').serialize(),
        function(data) {

        }
    ); 
```

我已经更新了示例并添加了一个带有 ajax 请求的示例，您可以[在此处](http://captchamvc.codeplex.com/releases/view/103389)下载。

# css - IE7 特定样式表和 IE 其他特定样式表相互覆盖

> ID：15271674
> 
> 赞同：0
> 
> 时间：2013-03-07T12:48:23.567
> 
> 标签：css, internet-explorer

再会

我正在使用条件样式表来定位 IE7 和更低版本，以及 IE8 和 IE9。

现在的问题是它们相互覆盖：

场景：我将样式应用于 IE 8 和 9。在 IE7 中，该样式不正确，因此我在仅 IE7 样式表中应用了新样式来修复它。它不会在 IE7 样式表中选择新样式，除非我使用 !important。但是当我在 IE-7 样式表中使用 !important 时，它会再次覆盖 IE8 和 9 样式...

为什么？？

谢谢

MY 包含的代码应用了示例样式：

HTML：

```
<head>...

 <!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="../ie7-only.css" />
    <![endif]-->

    <!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="../ie8-only.css" />
    <![endif]-->

    <!--[if IE 9]>
    <link rel="stylesheet" type="text/css" href="../ie9-only.css" />
    <![endif]-->
</head> 
```

CSS：

```
in IE 8 and 9:

#menuNav ul li#login{                
                float: right;
                margin: 0px;
            }

In IE7:

#menuNav ul li#login{                
                float: none;
                margin: 0px;
            } 
```

每当我对任何使用 !important 时，它都会相互覆盖...

为什么 IE9 和 8 采用 IE7 风格？反之亦然...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:51:20.370

将您的评论替换为：

```
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="../ie7-only.css" />
<![endif]-->

<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="../ie8-only.css" />
<![endif]-->

<!--[if IE 9]>
<link rel="stylesheet" type="text/css" href="../ie9-only.css" />
<![endif]--> 
```

# php - 为下拉菜单调用 php 文件时出错

> ID：15271675
> 
> 赞同：1
> 
> 时间：2013-03-07T12:48:27.200
> 
> 标签：php, mysql

我正在尝试创建一个下拉菜单来查询 mysql 数据库中的信息。我已经完成了这项工作，现在在@jeroen 的帮助下，我想我现在可以将选定的对象传递给namesearch16.php。该网页位于此处： [http ://swapabook.hostei.com/search16.php](http://swapabook.hostei.com/search16.php)

没有错误，但我希望它输出与查询匹配的数据库中的行。

我返回字符串：array(1) { ["select1"]=> &string(4) "book" }

我有一种感觉，问题是我的 while 声明我返回了错误的东西。顺便说一句，我的表有 5 个字段，我想返回其中的 4 个字段，例如选择书籍、作者、流派、书籍中的电子邮件

初始文件的代码如下：

```
<form action="namesearch16.php" method="post">
Name of Book
<?php
mysql_connect("mysql1x.000webhost.com","a4425533_swapabo","xxxxx") or      die("Connection Failed");
mysql_select_db('a4425533_swapabo')or die("Connection Failed");
$query = "SELECT * FROM book";
$result = mysql_query($query);
?>
<select name="select1">
<?php
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
?>
<option value="<?php echo $line['book'];?>"> <?php echo $line['book'];?> </option> 
<?php
}
?>
</select>
<input type="submit">
</form> 
```

根据@jeroen 的输入，将第二个文件更改为以下文件：

```
<?php
      $con=mysqli_connect('mysql1x.000webhost.com','a4425533_swapabo','xxxx','a4425533_swapabo');
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
$namequery="SELECT * FROM book WHERE book = ?";
$namestmt = mysqli_prepare($con, $namequery);

mysqli_stmt_bind_param($namestmt, "s", $_POST['select1']);
var_dump($_POST);

mysqli_stmt_execute($namestmt);

if ($result = mysqli_query($con, $namequery)) {
while($row = mysqli_fetch_array($result))
  {
  echo $row['book'];
  echo "<br>";
  echo "got as far as the while loop";
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:04:27.287

`$_POST`似乎没有`book`元素，因此您需要更改：

```
$result = mysqli_query($con,"SELECT * FROM book WHERE book = '$_POST[book]'"); 
```

至：

```
$result = mysqli_query($con,"SELECT * FROM book WHERE book = '$_POST[select1]'"); 
```

**但是**，您需要确保没有 sql 注入问题，因此您的查询应该看起来像：

```
SELECT * FROM book WHERE book = ? 
```

然后准备查询并将`$_POST['select1']`值绑定到它，例如参见[手册中的本节](http://www.php.net/manual/en/mysqli-stmt.execute.php)。

**编辑：**您的编辑有一些问题（除了错别字......）：只需按照手册中的步骤[操作](http://www.php.net/manual/en/mysqli-stmt.fetch.php)：

*   不要引用你的`$_POST`变量：`mysqli_stmt_bind_param($namestmt, "s", $_POST['select1']);`
*   执行查询；
*   绑定结果；
*   获取结果集。

而且您需要摆脱这一行，因为这意味着对数据库进行另一个查询：

```
$result = mysqli_query($con,$namequery); 
```

# android - 单击另一个片段中的按钮，在一个片段中使用 AChartEngine 绘制动态图表？

> ID：15271676
> 
> 赞同：0
> 
> 时间：2013-03-07T12:48:32.313
> 
> 标签：android, android-fragments, achartengine

我正在开发一个 Android 应用程序，它记录来自麦克风的数据并进行实时音高检测并将音高值绘制为图形。到目前为止，我已经完成了实时的音高检测。现在我想将这些值动态地绘制为图表。所以我的应用程序的屏幕应该有 2 个片段。一个有记录和停止按钮，我想在另一个片段中显示我的图表。我已经了解如何使用 AChartEngine 实时绘制 graoh。我还了解了使用片段的基础知识。所以我的问题是，我如何将所有这些连接在一起？即，我想运行我的音高检测活动，并在单击“记录”按钮时动态显示图形，并在单击“停止”按钮时停止整个事情。是否有任何示例代码显示通过单击一个片段中的按钮在另一个片段上绘制图形？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:00:13.270

使用 ScrollView 喜欢：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/ScrollViewChartContainer" android:layout_width="fill_parent" android:layout_height="fill_parent">
    <LinearLayout android:id="@+id/main" android:layout_width="fill_parent" android:layout_height="match_parent">
       <LinearLayout android:id="@+id/chart1" android:layout_width="fill_parent" android:layout_height="match_parent" android:background="@android:color/transparent" android:orientation="horizontal" /> 
       <LinearLayout android:id="@+id/chart2" android:layout_width="fill_parent" android:layout_height="match_parent" android:background="@android:color/transparent" android:orientation="horizontal" /> 
    </LinearLayout>
</ScrollView> 
```

我没有测试过这样的布局，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:55:11.983

这只是我的想法。您可以做的是，设置两个片段，创建一些用于显示和提供数据给片段的方法（如果`fragment.setArgs()`不足以满足您的需要）

想象一下，你有你`SecondFragment`喜欢的方法，当你点击 Stop 时调用它，你从后面的堆栈中取出第二个片段：

```
public void showRecordedData(SomeDataModel data){
     this.mFragmentData = data;
     ///show the  data on the chart view of the second fragment
} 
```

确保`SecondFragment`不为空且可见。

希望这是有道理的。

# image-processing - JPEG图像压缩

> ID：15271677
> 
> 赞同：5
> 
> 时间：2013-03-07T12:48:35.460
> 
> 标签：image-processing, compression, png, jpeg, libpng

我正在研究将*多个 JPEG*图像作为一个更大的图像存储在一起时减少存储空间的问题。基本直觉是图像往往具有一些相似性（例如在相同位置或大约相同时间点拍摄的图像），我们可以利用这种相似性来节省空间吗？

整体流程是：输入`JPG`图像 -> 将每个图像转换为`RGB`图像块 -> 将相似`RGB`的块重新组织在一起 -> 再次转换为`JPG`格式。自然，在检索图像时，我们需要*反转*该过程。

使用 Y 分量的 DC 系数作为平铺重组的相似性度量，我为 10 幅图像节省了约 8% 的空间。当我为 100 张图像执行此操作时，节省的费用减少到 ~3%。

*   如何在拼贴重组后节省成本 - 即 JPEG 编码过程的哪一部分利用了这种图像拼贴重组？

*   除了 Y 分量的 DC 系数，还有其他一些您能想到的指标可以更好地被 JPEG 编码利用吗

* * *

修改：

在聚合多个图像时，除了 JPG 之外，还有*其他*图像格式可以更好地利用这种*相似性吗？*例如像PNG？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:27:38.887

您很可能正在使用 JFIF 进行编码。

我不确定您希望这种方法如何工作。如果我理解正确，您将图像拆分为图块，将它们聚合成一个巨型图像，“相似”图块彼此靠近排列。

AFAIK，JPEG 实现对图像中的每个 8x8 瓦片执行单独的 DCT，称为*宏块*。换句话说，JPEG 不能利用相邻宏块之间的一致性（这似乎是您的压缩技术的基本假设）。

如果您自己的图块大于宏块，则除了节省图像标题空间之外，您不会看到任何改进。

例如：将 10 个 JPG 图像标题替换为 1 将为您节省 90% 的空间，但**仅在 header 中**。当您查看整个文件时，标题只是整个文件的一小部分，因此您节省的空间是微不足道的。将 100 个图像标题替换为 1 时，您可以节省 99%，但同样**只是在标题上**。在这两种情况下，所有宏块仍然像以前一样被编码和存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:06:56.267

您将在两个方面看到好处：

**首先**，当您将相似区域彼此相邻放置时（特别是如果图像的边缘完美匹配且没有不连续性 - 尽管这种情况非常罕见），jpeg 算法的 DCT（频率空间）部分通过逐步逼近大-ish 区域（不确定最大的大小是多少），然后查看大区域和多个较小区域的近似之间的误差，并产生更多的定位校正。

我怀疑这种影响很小，除非您的图像*非常*相似或非常小（因此它们的边缘与它们的面积成比例）。

**其次**，jpeg 压缩的[Huffman 编码](http://www.impulseadventure.com/photo/jpeg-huffman-coding.html)部分将受益，因为相同的位模式会出现在多个子图像中，并使用相同的（短）令牌进行压缩）。

这方面不会取决于您压缩图像的排列方式 - 只要它们在同一个图像中。

# jquery - JQuery - 通过单击更改复选框的值

> ID：15271681
> 
> 赞同：1
> 
> 时间：2013-03-07T12:48:52.220
> 
> 标签：jquery

我正在使用 jquery 开发一个小计算器。到目前为止它工作正常，但不适用于复选框。该复选框有一个默认值 =“200”，但它应该只在复选框被选中时求和。

希望你能正确理解我！这是我的代码：

```
<div>
<label for="horse">Horse</label>
<select id="horse" class="" name="horse" title="" size="1">
<option value="0 ">choose</option>
<option value="100">Horse 1 (+100 EUR)</option>
<option value="200">Horse 2 (+200 EUR)</option>
</select>
</div>
<div>
<label for="saddle">Saddle</label>
<select id="saddle" class="" name="sattel" title="" size="1">
<option value="0 ">choose</option>
<option value="400.20">Saddle 1 (+400,20 EUR )</option>
<option value="500.57">Saddle 2 (+500,57 EUR)</option>
</select>
</div>
<div>
<input type="hidden" alt="ghost" value="" name="pet">
<input id="pet" class="label_left" type="checkbox" name="haustier" title="" value="200">
<label for="pet">Pet?</label>
</div>
<div class="total"></div> 
```

和我的jQuery：

```
$(function() {
$('#horse').change(endergebnis);
$('#saddle').change(endergebnis);
$("#pet").change(function () {
    if ($('#pet:checked').val('') ) {
        $('#pet').val();
    } else {
        $('#pet').val('0');
    }

});
});
function endergebnis(){
var horse = $('#horse').val();
var saddle = $('#saddle').val();
var pet = $('#pet').val();

var total =
    Number(horse) + 
    Number(saddle) +
    Number(pet)

$('.total').html(total + " EUR");
}; 
```

我的jsfiddle：http: [//jsfiddle.net/tobisagt/g2fsQ/372/](http://jsfiddle.net/tobisagt/g2fsQ/372/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:56:54.070

你要：

```
$(function() {
    $('#horse').change(endergebnis);
    $('#saddle').change(endergebnis);

    $("#pet").data('val', '0');

    $("#pet").change(function () {
        if ($(this).is(':checked')) {
            $(this).data('val', $(this).val());
        } else {
            $(this).data('val', '0');
        }
        endergebnis();
    });
});
function endergebnis(){
    var horse = $('#horse').val();
    var saddle = $('#saddle').val();
    var pet = $("#pet").data('val');

    var total =
        Number(horse) + 
        Number(saddle) +
        Number(pet)

    $('.total').html(total + " EUR");
}; 
```

我将值移动到数据对象，这样您就不必手动将“200”写入 javascript..

更新小提琴：http: [//jsfiddle.net/4LsA8/3/](http://jsfiddle.net/4LsA8/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:05:24.100

而不是使用复选框的值，我只是将 clicked 属性用作布尔值并将其设置为 200（如果已选中），如果需要，当然可以将其提取到变量中。

```
$(function () {
    $('#horse').change(endergebnis);
    $('#saddle').change(endergebnis);
    $("#pet").change(endergebnis);
});

function endergebnis() {
    var horse = +$('#horse').val();
    var saddle = +$('#saddle').val();
    var pet = ($('#pet').attr('checked')) ? 200 : false;
    if (pet) {
        var total = (horse + saddle + pet).toFixed(2);
        $('.total').html(total + " EUR");
    } else {
        $('.total').html("");
    }
} 
```

还请注意，`Number(var)`我使用的是在元素选择前加上`+`.

这是一个[JSFiddle](http://jsfiddle.net/g2fsQ/377/)

编辑 - 似乎我稍微误解了 OP，请参阅更新的小提琴[here](http://jsfiddle.net/g2fsQ/380/)，其中检查宠物复选框将 200 添加到值，取消选中它会从值中删除 200，新代码是：

```
function endergebnis() {
    var horse = +$('#horse').val();
    var saddle = +$('#saddle').val();
    var pet = ($('#pet').attr('checked')) ? +$('#pet').val() : 0;
    var total = (horse + saddle + pet).toFixed(2);
    $('#total').html(total + " EUR");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:00:20.247

试试这个

```
$(function() {
        $('#horse').change(endergebnis);
        $('#saddle').change(endergebnis);
        //$("#pet").click(function () {
        $('#pet').mousedown(function() {
            if($('#pet').is(":checked")){
                $('#pet').val('0');
            } else {
                $('#pet').val('200');
            }
            endergebnis();
        });
    });
    function endergebnis(){
        var horse = $('#horse').val();
        var saddle = $('#saddle').val();
        var pet = $('#pet').val();

        var total =
            Number(horse) + 
            Number(saddle) +
            Number(pet)

        $('.total').html(total + " EUR");
    }; 
```

[在这里](http://jsfiddle.net/g2fsQ/375/)生活小提琴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:03:24.520

试试这个：（我已经移动了计算中复选框的检查。如果没有选中，我将值设置为0！）

```
function endergebnis(){
  var horse = $('#horse').val();
  var saddle = $('#saddle').val();
  var pet = $('#pet').val();
 if (!$('#edit-checkbox-id').is(':checked')) {
    pet = 0;
 };

  var total = Number(horse) + Number(saddle) + Number(pet);

  $('.total').html(total + " EUR");
}; 
```

# c# - 如何从 C# 解锁 excel 文件中受保护的 vbaproject？

> ID：15271684
> 
> 赞同：1
> 
> 时间：2013-03-07T12:48:58.373
> 
> 标签：c#, excel, vba

有人可以告诉我如何解锁受保护的 excel 文件的 vba 项目吗？

我尝试使用以下 C# 代码：

```
Exc.wbook = (Excel._Workbook)Exc.Workbooks.Open(FilePath, 0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true);
Exc.VBE.ActiveVBProject = Exc.wbook.VBProject;
Exc.Visible = true;
SendKeys.SendWait("%{F11}^r{TAB}~" + sPrd + "~~%{F11}"); 
```

这并没有解锁 vbaproject。

我也尝试过使用此 C# 代码....没有用。

```
Exc.wbook = (Excel._Workbook)Exc.Workbooks.Open(FilePath, 0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true);
Exc.VBE.ActiveVBProject = Exc.wbook.VBProject;
Exc.Visible = true;
Exc.Unprotect(sPrd ); 
```

我放了假代码来遵循我的比较规则。
请查看它并告诉我我的代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:05:08.427

不幸的是，VBA 没有在其对象模型中公开 VBProject 密码。因此，实现您想要的唯一方法是通过解决方法。

通常的方法是使用 SendKeys 来模拟用于输入项目密码的击键。但是，您应该知道，这种方法并不是特别可靠，我当然不想冒险将其用于我正在分发或销售的产品中，或者在任何可能影响金钱或声誉的地方投入生产！

这是我在[Ozgrid 论坛](http://www.ozgrid.com/forum/showthread.php?t=13006&p=65776#post65776)上找到的代码示例（最初由 Bill Manville 编写）：

VB：

```
'need reference To VBA Extensibility 
'need To make sure that the target project Is the active project 
Sub test() 
    UnprotectVBProject Workbooks("ABook.xls"), "password" 
End Sub 

Sub UnprotectVBProject(WB As Workbook, ByVal Password As String) 
' 
' Bill Manville, 29-Jan-2000 
' 
Dim VBP As VBProject, oWin As VBIDE.Window 
Dim wbActive As Workbook 
Dim i As Integer 

Set VBP = WB.VBProject 
Set wbActive = ActiveWorkbook 

If VBP.Protection <> vbext_pp_locked Then Exit Sub 

Application.ScreenUpdating = False 

' Close any code windows To ensure we hit the right project 
For Each oWin In VBP.VBE.Windows 
    If InStr(oWin.Caption, "(") > 0 Then oWin.Close 
Next oWin 

WB.Activate 
' now use lovely SendKeys To unprotect 
Application.OnKey "%{F11}" 
SendKeys "%{F11}%TE" & Password & "~~%{F11}", True 

If VBP.Protection = vbext_pp_locked Then 
    ' failed - maybe wrong password 
    SendKeys "%{F11}%TE", True 
End If 

' leave no evidence of the password 
Password = "" 
' go back To the previously active workbook 
wbActive.Activate 

End Sub 

'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' 
Sub ProtectVBProject(WB As Workbook, ByVal Password As String) 

Dim VBP As VBProject, oWin As VBIDE.Window 
Dim wbActive As Workbook 
Dim i As Integer 

Set VBP = WB.VBProject 
Set wbActive = ActiveWorkbook 

' Close any code windows To ensure we hit the right project 
For Each oWin In VBP.VBE.Windows 
    If InStr(oWin.Caption, "(") > 0 Then oWin.Close 
Next oWin 

WB.Activate 
' now use lovely SendKeys To unprotect 
    Application.OnKey "%{F11}" 
    SendKeys "+{TAB}{RIGHT}%V{+}{TAB}" & Password & "{TAB}" & Password & "~" 
    Application.VBE.CommandBars(1).FindControl(Id:=2578, recursive:=True).Execute 
    WB.Save 
End Sub 
```

需要您自担风险使用它！

高温高压

# android-layout - Android 9patch 不透明边角

> ID：15271694
> 
> 赞同：0
> 
> 时间：2013-03-07T12:49:21.173
> 
> 标签：android-layout, android-notifications, nine-patch

我使用 android 9patch 图像显示通知：

![在此处输入图像描述](../Images/adfe5362221a2065eced3b2d089d5520.png)

我尝试使用白色和透明的背景，但它仍然是不透明的。是的，文件名以`.9.png`

这是通知的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_gravity="center_horizontal">

        <TextView
                android:id="@android:id/message"
                android:layout_width="300dip"
                android:layout_height="wrap_content"
                android:layout_margin="@dimen/common_whitespace"
                android:textColor="@color/screen_game_dialog_text_color"
                android:textSize="14dip"
                android:gravity="center"
                android:background="@drawable/notification_popup_default"
                android:contentDescription="@null"/>

</LinearLayout> 
```

这是 9patch 图像（不是我的，所以我添加了一种水印）：

![在此处输入图像描述](../Images/272ac041077dbafc68b814d3b0610722.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:08:47.840

角落的背景是白色的，alpha 值不是 0。背景必须是完全透明的。

# ruby-on-rails - 跳过和限制功能在 rails rake 文件中不起作用

> ID：15271695
> 
> 赞同：0
> 
> 时间：2013-03-07T12:49:21.270
> 
> 标签：ruby-on-rails, mongodb, cursor, mongoose

嗨，我是 rails 和 mongodb 的学习者。我正在使用 mongodb 作为后端在 Rails 上进行应用程序。我有大量的数据内容要在单个请求上检索，当时我有错误是“光标错误”，因为我使用的一个技巧是将所有数据分区为小内容。在这个概念上有一个错误，我的代码是分开的

```
 competitionsAry = NFL_Competition.where(sdi_sport_id: teamSdi_Sport_id)

 puts "Total competitions:" + competitionsAry.count.to_s // it has 2330 count on this step  

      execCount = competitionsAry.count / 100

      if competitionsAry.count % 100 != 0

          execCount += 1

      end      

      execCount.times do |ctr|

        skipValue = ctr + 100

        competitions = competitionsAry.skip(skipValue).limit(100)

 puts "Now the competition length is: " + competitions.length.to_s // here also same amount of 2330 data 
```

我知道“competitions = CompetitionsAry.skip(skipValue).limit(100)”这就​​是问题所在。跳过和限制功能不起作用。即使我尝试了“competitions = NFL_Competition.skip(skipValue).limit(100)”，也没有结果是什么异常，任何人都可以帮助解决这个问题以及如何在轨道上使用跳过和限制功能。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:39:23.407

是的，我明白了，我在此使用了 ruby​​ 数组切片概念。

```
competitions = competitionsAry[skipValue,100] 
```

# ios - 如何以编程方式杀死iOS中的进程

> ID：15271698
> 
> 赞同：-1
> 
> 时间：2013-03-07T12:49:30.810
> 
> 标签：ios, objective-c, c, process

如何通过 PID 或名称杀死/关闭应用程序/进程？

我尝试使用 C 函数，但它不起作用。（例如，尝试终止 LinkedIn 应用程序/进程）。

```
pid_t pid = 3696; //GetProcessPIDForLinkedIn();
kill(pid, SIGQUIT); 
```

我不打算在 App Store 上部署它，但它应该适用于非越狱设备

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:33:00.760

除非您是 root 并且在越狱设备上，否则您无法以编程方式杀死其他应用程序。应用程序存在于沙盒中，无法影响其他应用程序或其文档或数据。唯一的例外是启动应用程序并将数据传递给它。如果所有这些应用程序都是您自己的，那么您可以通过向它们传递一些数据来使用它。否则，没有。

# javascript - 为剑道数字文本框设置 tabindex

> ID：15271701
> 
> 赞同：2
> 
> 时间：2013-03-07T12:49:43.077
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid, kendo-combobox

如何为数字文本框设置选项卡索引.. 我的代码是..

```
$("#max_award_amount").kendoNumericTextBox({

    min:0,
    max: 99999999.99,

}).attr("tabindex","4"); 
```

但它没有按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:03:12.197

我们使用以下内容：

```
.HtmlAttributes(new { id = "EligibleDate", tabindex = 2 }) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:57:05.080

知道究竟是什么不起作用会更有帮助，但无论如何我都会努力回答。

我想您的代码不起作用的原因是因为您在 Kendo 初始化发生*后在输入控件上设置了 tabindex。*Kendo 实际上隐藏了原始输入并创建了自己的输入以用作控件的一部分，并且在此过程中它复制了一些属性，包括 tabindex。

当您`attr`按上述方式调用时，您正在针对原始的、现在隐藏的输入控件设置 tabindex。尝试在 html 元素本身上设置 tabindex。然后，Kendo 应该在包装输入控件时复制该值。

```
<input id="box1" tabIndex="0" />

<script type="text/javascript">
   $(function() {
       $("#box1").kendoNumericTextBox();
   });
</script> 
```

**编辑**

我对此进行了更多研究，但似乎无法获得一组 Kendo 数字文本框来尊重我指定的 tabindex。

似乎 Kendo 在构建文本框时确实将 tabindex 从原始输入复制到新输入，但它也明确地将原始输入的 tabindex 设置回零（我查看了源代码）。我想这不是什么大问题，只是当您单击文本框时，生成的输入被隐藏并显示原始输入！所以我现在不太确定剑道试图通过创建一个新输入来实现什么，然后只是隐藏它并在您单击框时显示旧输入。

我试图向 Kendo 报告这个错误，但可惜，他们的论坛现在是“仅限高级版”。除非您付款，否则似乎无法报告错误。表演不佳。

我通过在初始化后将 tabindex 设置回原始元素来完成这项工作。

```
 <input id="box1" tabindex="10" />
 <input id="box2" tabindex="12" />
 <input id="box3" tabindex="11" />
 <input id="box4" tabindex="13" />  

 $(function() {
   $("#box1").kendoNumericTextBox()[0].tabIndex = 10;
   $("#box2").kendoNumericTextBox()[0].tabIndex = 12;
   $("#box3").kendoNumericTextBox()[0].tabIndex = 11;
   $("#box4").kendoNumericTextBox()[0].tabIndex = 13;
 }); 
```

完整的演示[在这里](http://jsbin.com/ejeqed/2/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-19T06:19:03.450

为 kendoDropdownList 设置 tabindex：

```
$("#max_award_amount").data("kendoDropdownList").wrapper.attr("tabindex",4); 
```

# javascript - 如何在新窗口中打开链接，在地址栏上显示不同的网址

> ID：15271703
> 
> 赞同：1
> 
> 时间：2013-03-07T12:49:45.440
> 
> 标签：javascript, url

```
window.open(url,"_blank_"); 
```

我在 url 中有一个敏感参数（密码），是否可以在打开的窗口/选项卡中更改地址栏上显示的 url？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:59:28.653

```
<form method="POST" action="url" target="_blank">
    <input type="password" name="password" />
</form> 
```

编辑：

同样，用javascript完成：

```
function navigate(url, data, method){
    var form = document.createElement('form');
    form.setAttribute('method', method);
    form.setAttribute('action', url);

    for(var name in data){
        var hidden = document.createElement('input');
        hidden.setAttribute('type', 'hidden');
        hidden.setAttribute('name', name);
        hidden.setAttribute('value', data[name]);
        form.appendChild(hidden);
    }
    document.body.appendChild(form); // Does not need this line in chrome
    form.submit();
} 
```

用法：

```
navigate('url', { password: 'mypassword' }, 'POST'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:00:55.443

使用此语法

```
window.open(URL,name,specs,replace) 
```

有关更多信息，请参阅本文档[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# java - 有效获取对象的属性或强制声明类属性

> ID：15271707
> 
> 赞同：3
> 
> 时间：2013-03-07T12:50:02.843
> 
> 标签：java, android, static, key-value-coding, kvc

**背景设置**

我正在尝试创建一个用于在 Android 中访问和缓存 Web 服务数据的库，但偶然发现了一个问题。

我的库管理的所有对象都继承自一个基`Entity`类。任何派生类都`Entity`可以声明其他*字段**或*属性**。

基类负责返回`Entity`要从缓存（SQLite 或文件）或 Web 服务（REST 或 SOAP）读取的属性。在我当前的实现中，`Entity`该类使用反射执行此操作：它读取所有标有`@Attribute`注释的类字段名称。

**问题**

我在实现中遇到的问题如下：每次我`Entity`使用类似的函数请求所有属性`static Set<String> getAttributes()`时，该函数必须创建一个`Set`实现（目前`HashSet`用于快速查找）。

我想避免在`Set<String>`每次请求所有属性时分配和初始化 a 。

从我的角度来看，属性集特定于整个`Entity`类，而不是`Entity`对象。即：拥有`class Customer extends Entity`，所有`Customer`实例都具有完全相同的属性——每个实例都有名称、地址等。

我目前的尝试是`static Set<String> attributes`在每个类中声明一个扩展`Entity`并初始化它的类，`Set`使用类块中的反射，`static`如下所示：

```
class Customer extends Entity 
{
   private static final Set<String> attributes = new HashSet<String>();

   static
   {
       Entity.populateAttributes(Customer.class);
   }
} 
```

给定要初始化的类，该类可以在该类及其基类`Entity`中查找所有标有注释的字段（例如，并将使用为该类声明的属性和从该类继承的属性填充集合）。`@Attribute``Customer extends Person``Person extends Entity``Customer.attributes``Customer``Person`

我遇到的问题是，`attributes`可能没有为扩展的类定义一个集合`Entity`，我想在编译时强制执行。

我已经看到 Eclipse 中的接口是这样做的`Serializable`：当创建一个实现的类时`Serializable`，如果你的类没有声明一个`[private] static final long serialVersionUID`.

**问题**

如果一个类没有声明一个字段，有什么方法可以`Serializable`为我的类强制执行该行为`Entity`并显示警告或（更好）错误？

是否有不同的方法来返回`Entity`派生类的属性名称？

**脚注**

**我使用了`field`不应由库管理的`attribute`对象属性的术语和应由库管理的对象属性的术语（从 Web 服务或 SQLite/文件缓存中读取并保存在 Web 服务或 SQLite 中） /文件缓存）*

**编辑 1**

基本上，我想要实现的是以一种有效的`Entity`方式获得一组 a 的属性*（见上面的脚注）。帮助类使用此列表将对象值存储在数据库中（`CREATE TABLE`查询可以从属性名称和类型推导出来）或发送到 Web 服务。

该库用于缓存来自 Web 服务的值，并用于将本地数据库（可能包含额外的用户输入值并且可能缺少对象的服务器更新值）与可通过 Web 服务访问的数据同步。它并不打算用通用访问器/修改器替换应用程序中每个字段访问器/修改器的使用。

这个概念被称为键值编码，被许多框架和库使用。例如，我通过 Google 搜索找到的使用 KVC 的前两个库示例是 Cocoa 和 Sproutcore。参考：[Apple 开发人员文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Overview.html#//apple_ref/doc/uid/20001838-SW1)和[Sproutcore wiki](http://wiki.sproutcore.com/w/page/12412967/Runtime-Key%20Value%20Coding)。

KVC 也用于 Android 开发。`Bundle`，`SQLiteCursor`并`ContentValues`大量使用KVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:16:39.330

由于我可能无法在派生类的定义中强制声明静态字段，因此我将在上述类的定义中存储属性集和类描述的映射，`Entity`并确保属性集对于派生类，在`Entity`构造函数中初始化。

举个例子：

```
public class Entity
{
   private final static Map<Class<? extends Entity>, Set<String>> attributes = new HashMap<Class<? extends Entity>, Set<String>>();

   public static void populateAttributes(Class<? extends Entity> derivedClass)
   {
      //initialize the set of attributes for the derived class and 
      //add it to attributes map with "derivedClass" as key
   }

   static
   {
      populateAttributes(Entity.class);
   }

   public Entity()
   {
      //calling this.getClass() returns the object's actual (derived) class(*)
      if(!attributes.containsKey(this.getClass())
         populateAttributes(this.getClass());
   }

   //rest of class definition (including getAttributes method)
}

public class Customer extends Entity 
{
   @Attribute
   String someAttribute; //will be processed automatically
} 
```

获取`Entity`s 属性的成本从解析所有类属性并创建一个新集合以将它们保存到对 a 的检查和检索操作减少，`Map`这在使用 a 时应该非常小`HashMap`。

对属性进行检查（fast on s）`Entity`会增加创建实例的成本。为给定类初始化集合的成本可以忽略不计，因为每个派生类类型只执行一次。`Map``HashMap``attributes`

考虑到在 90% 或更多的情况下，每个类实例至少请求一次属性，这应该比问题中描述的初始解决方案提供更好的整体性能。

(*)calling `this.getClass()` in a base class instance method will return the object's actual class. If the object has been initialized as a derived class instance, the derived class' description (`Class` object) will be returned. A question about this has already been asked and answered here: [Which class does getClass() report inside a constructor of a base class](https://stackoverflow.com/questions/12638504/safe-to-use-getclass-inside-a-constructor).

# jquery - jquery 什么是正确的 json 对象来解析

> ID：15271708
> 
> 赞同：1
> 
> 时间：2013-03-07T12:50:05.483
> 
> 标签：jquery, asp.net, json

请帮我修复这个 json 对象。我被困在这里，无法弄清楚。

我得到一个 json 对象（但我不确定它是否正确）。我正在尝试 4 种方法来显示 json 的结果，但没有任何效果。请帮我找出我做错了什么

这是在 webmethod c# 中创建的 json 对象

```
return_str += "{'id':'" + p_id + "','firstname':'" + firstname + "','lastname':'" + lastname + "','prefix':'" + prefix + "','gender':'" + gender + "','mobilephone':'" + mobilephone + "','email':'" + email + "','diplomano':'" + diplomano + "'}"; 
```

这是尝试获取 json 并显示结果的 jquery 代码

```
 $('#btn_second').click(function () {
            //$('#txt_isim_4').val('test arif');
            $.ajax({
                type: "POST",
                url: "Registration.aspx/get_selected_professional",
                data: "{'id':'2'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert('1:' + data);  // shows "[object Object]"
                    alert('2:' + data.id);  // shows "undefined"
                    alert('3:' + data.d);  // shows json string
                    var json = $.parseJSON(data); 
                    alert('4:' + json.id);  // doesnt show the alert box, I think It throws and error
                }
            }); 
```

如何显示名字？});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:23:43.447

当您使用网络服务时，您将不得不去`data.d`

```
$('#btn_second').click(function () {
        //$('#txt_isim_4').val('test arif');
        $.ajax({
            type: "POST",
            url: "Registration.aspx/get_selected_professional",
            data: "{'id':'2'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                alert(data.d.id);

            }
        }); 
```

正确的方法是这样

```
 $('#btn_second').click(function () {
        //$('#txt_isim_4').val('test arif');
        $.ajax({
            type: "POST",
            url: "Registration.aspx/get_selected_professional",
            data: "{'id':'2'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
               data=$.parseJSON(data.d);
                alert(data.id);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T12:53:23.667

`'`在 JSON 中无效，请使用`"`改用 +#

这应该有效：

```
return_str += "{\"id\":\"" + p_id + "\",\"firstname\":\"" + firstname + "\",\"lastname\":\"" + lastname + "\",\"prefix\":\"" + prefix + "\",\"gender\":\"" + gender + "\",\"mobilephone\":\"" + mobilephone + "\",\"email\":\"" + email + "\",\"diplomano\":\"" + diplomano + "\"}"; 
```

来自 json.org：

> 值可以是**双引号**中的字符串、数字、true 或 false 或 null、对象或数组。这些结构可以嵌套。

# android - Android VideoView 和 NavigationBar

> ID：15271709
> 
> 赞同：1
> 
> 时间：2013-03-07T12:50:06.753
> 
> 标签：android, android-videoview, navigationbar

我的应用程序中有**全屏活动和视频视图**。

`NavigationBar` **当我不触摸屏幕时，会**在 5 秒内自动隐藏。****

 **我已经尝试添加`onSystemUiVisibilityChangeListener`到`videoview`，并尝试过`setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE)`，但我没有积极的结果。

我需要做些什么来防止隐藏`navigationbar`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T13:15:50.907

您可以像这样简单地添加。

```
public class mediaController extends MediaController {
    @Override
    public void hide() {
    }
} 
```**

# regex - 捕获某个子字符串的最佳方法？

> ID：15271714
> 
> 赞同：2
> 
> 时间：2013-03-07T12:50:19.000
> 
> 标签：regex, vb.net, text

*我有一个文件，内容如下：*

```
garbage
garbage
printfile ps = "Elopak Zufriedenheit After Sales.ps";
garbage
garbage 
```

我想捕获`""` （双引号）之间的部分 - 但该部分的值不断变化。我已经写了一个 **正则表达式**来找到`printfile ps`- 但是从那里开始的最佳方法是什么？

新代码：

```
Dim PFileRegex As New Regex("printfile ps *\t*= *\t*""[\w\s]*.ps\s*""") 
Dim PFilematch As Match = PFileRegex.Match(parttext)

                    If PFilematch.Success = True Then
                        Dim Quote As Char = """"c
                        Dim FirstQuote = PFilematch.Value.IndexOf(Quote)
                        Dim LastQuote = PFilematch.Value.LastIndexOf(Quote)

                        Dim PSFile = PFilematch.Value.Substring(FirstQuote + 1, (LastQuote - FirstQuote) - 1)
                        Debug.Print(PSFile)
                    Else
                        'error handlung
                    End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:02:48.133

你真的需要一个正则表达式吗？`String.Substring`效率更高。

```
Dim quote As Char = """"c
Dim first = printfilePs.IndexOf(quote)
Dim last = printfilePs.LastIndexOf(quote)
Dim partBetweenQuotes = ""
If first <> -1 AndAlso last > first Then
     Dim start = first + 1
     Dim length = printfilePs.Length - start - (printfilePs.Length - last)
     partBetweenQuotes = printfilePs.Substring(start, length)
End If 
```

[**演示**](http://ideone.com/fbSfC2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:35:58.153

以下是使用`Regex`该类的方法：

```
Dim PFileRegex As New Regex("^printfile ps\s*=\s*""(?<data>.*\.ps\s*)"";.*$", RegexOptions.Multiline)
Dim PFilematch As Match = PFileRegex.Match(parttext)
If PFilematch.Success Then
    Debug.Print(PFilematch.Result("${data}"))
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:05:54.237

如果您只想获取“prinfile ps =”之后的值：

```
printfile ps *= *"([^"]+)"; 
```

如果要获取所有键值对：

```
^([^= ]+) *= *"([^"]+)";$ 
```

# yii - 如何在 Yii Web 应用程序中保存多选字段

> ID：15271715
> 
> 赞同：-2
> 
> 时间：2013-03-07T12:50:24.123
> 
> 标签：yii, yii-extensions, yii-events

我是 Yii 的新手，我已经以这种形式创建了一个应用程序，我已经创建了一个字段作为多选选项，如下所示......任何人都可以帮助我如何将数据保存到我的 mysql 表中以进行哪些更改我必须做以及我必须改变的地方..我想保存选择的每个部门都必须保存为行

```
 <?php 
     $data = array('101' => 'CSE', '102' => 'IT', '103' => 'EEE', '104' => 'ECE');
$selected   = array(
  '102' => array('selected' => 'selected'),
  '103' => array('selected' => 'selected'),
);
$htmlOptions = array('size' => '5', 'prompt'=>'Use CTRL to Select Multiple Staff', 'multiple' => 'true', 'options' => $selected);
    echo $form->listBox($model, 'department',$data, $htmlOptions, array('rows' => 6, 'cols' => 50, 'class' => 'text_area')); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:01:39.987

您可以通过在控制器中定义一个动作轻松地做到这一点

```
public function actionCreate(){
$model = new modelName;
if(isset($_POST['attribute']))
    {
      $model->attributes = $_POST['attributes'];
        if($model->validate()) 
           { 
             $model->save();
           }else{ "Exception Statement"}
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:44:09.017

我想将单个选项保存为表中的一行我将值作为数组获取我必须更改代码以将值保存在多个选择中......下面代码的输出是部门是“数组"

```
public function actionCreate()
{
    $model = new Emp;
    $model2=new Emprole;
    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Emprole']))
    {
        $model2->attributes=$_POST['Emprole'];
        $model2->save();
        $contact_id = Yii::app()->db->getLastInsertId();            

    }

    if($contact_id!='')
    {

    if(isset($_POST['Emp']))
    {
        $model->beforeSave();
        $model->attributes=$_POST['Emp'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->empcode));
    } 
```

# magento - 通过搜索查询和/或产品属性将产品包含在 Magento 类别中

> ID：15271720
> 
> 赞同：0
> 
> 时间：2013-03-07T12:50:33.087
> 
> 标签：magento, magento-1.5

我正在建立一个新的 Magento 商店，并希望通过查询创建产品类别，而无需手动将每个产品添加到类别中。例如，我想创建一个名为“小号衬衫”的类别，它会自动显示我所有具有“小号”属性的产品。或者创建另一个名为“Red Shirts”的类别，其中显示标题中包含“red”一词的所有产品。有没有办法自动化这个，这样我就不需要手动将每个产品添加到类别中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:11:48.293

做这样的事情

```
 $products = array();
 $collection = Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter('size','small')->getAllIds();
 foreach ($collection as $c){
      $products[$c]='0'; // 0 is the position, you can change this here if you want.
 }
 $category = Mage::getModel('catalog/category')->load(YOURID);
 $category->setPostedProducts($products)->save(); 
```

当然，如果您的脚本应该在用产品填充它们之前创建类别，您可以组合并创建您的类别而不是加载它。

# php - solr PHP 客户端有什么区别？

> ID：15271727
> 
> 赞同：2
> 
> 时间：2013-03-07T12:50:56.610
> 
> 标签：php, solr, client

我找到了 Solarium 和那个[http://code.google.com/p/solr-php-client/](http://code.google.com/p/solr-php-client/)。

但我真的不知道两者之间有什么区别，他们使用什么 PHP 框架以及哪个是最佳选择。

我真的很感激任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:50:11.757

客户端是客户端，主要做同样的事情 - 允许您与 Solr 服务器交互。不同的客户端可能会以不同的方式执行此操作，提供更好或更差的 API 或有不同类型的问题。

Solr 协议非常简单，因此理论上您不需要任何客户端。您可以使用 CURL 并进行直接调用。

我会推荐使用 PHP 扩展`http://pecl.php.net/package/solr`。它更快，因为它内置在 PHP 中（显然它不会使服务器更快地工作）。

如果你打算使用 Solr4（你应该），pecl 上的当前版本的扩展将不起作用;-)。您可以使用我的补丁[https://github.com/lukaszkujawa/php-pecl-solr](https://github.com/lukaszkujawa/php-pecl-solr)，它将在未来进入稳定版本。不同之处在于您在客户端构造函数中有一个额外的开关：

```
$client = new SolrClient($options, "4.0"); 
```

那应该注意 3.x 和 4.x 之间的差异

# iphone - hiding iOS HTTPS calls from fiddler

> ID：15271728
> 
> 赞同：2
> 
> 时间：2013-03-07T12:50:57.437
> 
> 标签：iphone, ios, objective-c, https

i'm using HTTPS in my iPhone app to communicate with my own API.

I've noticed that when i try to do packet sniffing on an HTTPS it won't show any critical information. but when i tried Fiddler2 and installed a trusted certificate on my iPhone (which was issued by Fiddler2) I've been able to see all my HTTPS calls!!! which can cause a serious security problem.

I've tried this with other applications and some of them won't show even anything in Fiddler as if they were protecting themselves somehow!

how can i protect my application?

Thanks

* * *

**--- Extra information to the selected solution ----**

if you are using AFNetworking, starting from version 1.1 you can do the following to solve the issue:

add the following to your PROJECT-Prefix.pch

```
#define _AFNETWORKING_PIN_SSL_CERTIFICATES_ =1 
```

make sure you have added the security framework then import it in the **AFURLConnectionOperation.m** file

```
#import <CommonCrypto/CommonDigest.h> 
```

add this extra function to the file

```
-(NSString*) sha256:(NSString*)input
{
    const char *cstr = [input cStringUsingEncoding:NSUTF8StringEncoding];
    NSData *data = [NSData dataWithBytes:cstr length:input.length];

    uint8_t digest[CC_SHA256_DIGEST_LENGTH];

    CC_SHA256(data.bytes, data.length, digest);

    NSMutableString* output = [NSMutableString stringWithCapacity:CC_SHA256_DIGEST_LENGTH * 2];

    for(int i = 0; i < CC_SHA256_DIGEST_LENGTH; i++)
        [output appendFormat:@"%02x", digest[i]];

    return output;
} 
```

replace this line

```
if ([[[self class] pinnedCertificates] containsObject:certificateData]) 
```

with this one

```
if ([[self sha256:[certificateData description]] isEqualToString:SSL_CERTIFICATE_SHA256]) 
```

make sure you've calculated the SHA256 of the server's certificate and define the value in your prefix file

```
#define SSL_CERTIFICATE_SHA256 @"<certificate SHA256 value>" 
```

done!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:17:23.513

So you are using Fiddler2 as a proxy for your iPhone. All requests will then pass through fiddler. Fiddler will act like it's the end point and will return the certificate that was trusted by you. Then it will forward the request to the actual url using a new request. Therefore it's able to read the response. Then it will return the data in the original request. If you want to prevent this in your app, then you have to add your own certificate validation. You could check the certificate on binary level or parse the certificate and validate the fields (like issuer)

I found this tutorial with information about testing certificates [http://www.inmite.eu/en/blog/20120314-how-to-validate-ssl-certificates-iOS-client](http://www.inmite.eu/en/blog/20120314-how-to-validate-ssl-certificates-iOS-client) Maybe this could also help: [http://www.cocoanetics.com/2013/02/rfc-dtcertificateviewer/](http://www.cocoanetics.com/2013/02/rfc-dtcertificateviewer/)

You could also add an extra level of security by adding your own encription layer. The server needs to respond with encripted data and you will then decrypt that response.

# jquery - 尝试通过控制器导轨加载视图时出现 500 错误

> ID：15271730
> 
> 赞同：0
> 
> 时间：2013-03-07T12:50:58.367
> 
> 标签：jquery, ruby-on-rails, ajax, error-handling

我试图通过 ajax 调用来加载 Rails 视图。我收到此错误：

```
Started POST "/schools/municipalities" for 127.0.0.1 at 2013-03-07 13:40:11 +0100
Processing by SchoolsController#municipalities as HTML
  Parameters: {"Hallands län"=>nil}
  School Load (1.9ms)  SELECT "schools".* FROM "schools" WHERE "schools"."region" IS NULL
  Rendered schools/municipalities.html.erb (0.7ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (undefined method `map' for nil:NilClass):
    1:
    2: <%= form_tag 'schools' do %>
    3: <p><%= select_tag(:municipalities, options_from_collection_for_select(@municipalities, :municipality, :municipality )) %>
    4: </p><p>
    5: <%= submit_tag 'Nästa', :class=> 'btn btn-primary' %>
    6:  </p>
  app/views/schools/municipalities.html.erb:3:in `block in _app_views_schools_municipalities_html_erb___826836004410337613_70142825095080'
  app/views/schools/municipalities.html.erb:2:in `_app_views_schools_municipalities_html_erb___826836004410337613_70142825095080'
  app/controllers/schools_controller.rb:10:in `municipalities'

  Rendered /Users/gjores/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/gjores/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/gjores/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (12.8ms) 
```

我可以确定我的参数都错了。我一直在努力弄清楚这应该是怎样的。

**学校.js**

```
$(document).ready(function() {
    $('#region').change(function(){
        region = $(this).val();
        $.ajax({
            url:  "municipalities",
            cashe: false,
            data: region,
            dataType: "HTML",
            type: 'POST',

            success: function(html){
          $("#append").append(html);}

        });
    });
}); 
```

**school.rb 控制器**

```
class SchoolsController < ApplicationController
  def region
    @regions = School.select(:region).uniq.order(:region)

  end

  def municipalities
    region = params[:region]
    @municipalities = School.where(:region => params[:region]).uniq!{|e| e[:municipality]} 
    render :layout => false

  end

  def schools
    @user = current_user
    @schools = School.where(:municipality => params[:municipalities])
    render :layout => false
  end
end 
```

**区域视图**

```
<%= form_tag 'municipalities' do %>
<p><%= select_tag(:region, options_from_collection_for_select(@regions, 'region', 'region')) %>
</p>
    <div id="append">

    </div>
<p>
<%= submit_tag 'Nästa', :class=> 'btn btn-primary' %>
    </p>
<% end %> 
```

**市政当局视图**

```
<%= form_tag 'schools' do %>
<p><%= select_tag(:municipalities, options_from_collection_for_select(@municipalities, :municipality, :municipality )) %>
</p><p>
<%= submit_tag 'Nästa', :class=> 'btn btn-primary' %>
    </p>
<% end %> 
```

# asp.net-mvc-4 - MVC 代码优先：为什么 pages_Membership 和 UserProfile 表之间不存在关系？

> ID：15271734
> 
> 赞同：0
> 
> 时间：2013-03-07T12:51:08.197
> 
> 标签：asp.net-mvc-4, simplemembership

我在 MVC 中使用具有代码优先设计的 SimpleMembership 提供程序。我看到 EF 创建了 5 个表：UserProfile、webpages_Membership、webpages_OAuthMembership、webpages_UsersinRoles 和 pages_Roles。

UserProfile 有一个 UserID 的 PK，webpages_Membership 也是如此。pages_OAuthMembership 具有 UserId 的 FX。然而，这些表之间并没有实际的关系。换句话说，没有创建实际的索引。我知道如果您在模型中包含导航属性，EF 将自动创建这些关系。我的问题是，我怎么知道 pages_Membership 和 pages_OAuthMembership 的类的名称是什么，以便我可以将它们作为强类型导航属性包含在我的 UserProfile 类中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:01:11.493

您可能希望将 pages_* 表视为与您的 UserProfile 表完全分开。

SimpleMembership 提供程序允许身份与核心应用程序分开提供，因此您可以允许用户使用他们的 Google 或 Microsoft 帐户，而不是要求他们仅为您的站点创建另一个帐户。

从用户的角度来看，最直接的例子是 Stackoverflow，您可以在其中使用 Google、Facebook 等登录。

如果内置的身份提供者与 UserProfile 紧密耦合，那么这将更难实现。

# magento - 将新的客户操作添加到 Magento 客户网格

> ID：15271738
> 
> 赞同：1
> 
> 时间：2013-03-07T12:51:21.343
> 
> 标签：magento, magento-1.7

我正在尝试向 Magento 的客户网格页面添加自定义操作。

我有两个模块：一个称为经理，它是一个客户服务呼叫日志，其中列出了客户呼叫的原因，即“一般信息”、“订单查询”、“恶作剧呼叫”。所有原因都存储在数据库中。“经理”模块类似于将客户分配到组的工作方式。

第二个模块称为 Customergrid，它扩展了 Mage_Adminhtml_Block_Customer_Grid

在这里，我在下拉菜单中添加了一个名为“添加到通话记录”的选项。我希望这与将客户添加到“组”的工作方式类似。如果我从网格列表中选择一个客户并选择“添加到通话记录”，那么我需要从另一个下拉列表（就像添加到客户组）中选择一个“原因”并单击保存。

问题：

我需要找到一种在下拉列表中显示原因列表的方法。

这是来自 customergrid 模块的 Grid.php 代码：

```
<?php
class Module_Customergrid_Block_Adminhtml_Customer_Grid extends Mage_Adminhtml_Block_Customer_Grid
{

 public function __construct()
    {
        parent::__construct();
        $this->setId('customerGrid');
        $this->setUseAjax(true);
        $this->setDefaultSort('entity_id');
        $this->setSaveParametersInSession(true);
    }

    protected function _prepareCollection()
    {
        $collection = Mage::getResourceModel('customer/customer_collection')
            ->addNameToSelect()
            ->addAttributeToSelect('email')
            ->addAttributeToSelect('created_at')
            ->addAttributeToSelect('group_id')
            ->joinAttribute('billing_postcode', 'customer_address/postcode', 'default_billing', null, 'left')
            ->joinAttribute('billing_city', 'customer_address/city', 'default_billing', null, 'left')
            ->joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')
            ->joinAttribute('billing_region', 'customer_address/region', 'default_billing', null, 'left')
            ->joinAttribute('billing_country_id', 'customer_address/country_id', 'default_billing', null, 'left');

        $this->setCollection($collection);

        return parent::_prepareCollection();
    }

    protected function _prepareColumns()
    {
        $this->addColumn('entity_id', array(
            'header'    => Mage::helper('customer')->__('ID'),
            'width'     => '50px',
            'index'     => 'entity_id',
            'type'  => 'number',
        ));
        /*$this->addColumn('firstname', array(
            'header'    => Mage::helper('customer')->__('First Name'),
            'index'     => 'firstname'
        ));
        $this->addColumn('lastname', array(
            'header'    => Mage::helper('customer')->__('Last Name'),
            'index'     => 'lastname'
        ));*/
        $this->addColumn('name', array(
            'header'    => Mage::helper('customer')->__('Name'),
            'index'     => 'name'
        ));
        $this->addColumn('email', array(
            'header'    => Mage::helper('customer')->__('Email'),
            'width'     => '150',
            'index'     => 'email'
        ));

        $groups = Mage::getResourceModel('customer/group_collection')
            ->addFieldToFilter('customer_group_id', array('gt'=> 0))
            ->load()
            ->toOptionHash();

        $this->addColumn('group', array(
            'header'    =>  Mage::helper('customer')->__('Group'),
            'width'     =>  '100',
            'index'     =>  'group_id',
            'type'      =>  'options',
            'options'   =>  $groups,
        ));

        $this->addColumn('Telephone', array(
            'header'    => Mage::helper('customer')->__('Telephone'),
            'width'     => '100',
            'index'     => 'billing_telephone'
        ));

        $this->addColumn('billing_postcode', array(
            'header'    => Mage::helper('customer')->__('ZIP'),
            'width'     => '90',
            'index'     => 'billing_postcode',
        ));

        $this->addColumn('billing_country_id', array(
            'header'    => Mage::helper('customer')->__('Country'),
            'width'     => '100',
            'type'      => 'country',
            'index'     => 'billing_country_id',
        ));

       $this->addColumn('billing_region', array(
            'header'    => Mage::helper('customer')->__('State/Province'),
            'width'     => '100',
            'index'     => 'billing_region',
        ));

        $this->addColumn('customer_since', array(
            'header'    => Mage::helper('customer')->__('Customer Since'),
            'type'      => 'datetime',
            'align'     => 'center',
            'index'     => 'created_at',
            'gmtoffset' => true
        ));

        if (!Mage::app()->isSingleStoreMode()) {
            $this->addColumn('website_id', array(
                'header'    => Mage::helper('customer')->__('Website'),
                'align'     => 'center',
                'width'     => '80px',
                'type'      => 'options',
                'options'   => Mage::getSingleton('adminhtml/system_store')->getWebsiteOptionHash(true),
                'index'     => 'website_id',
            ));
        }

        $this->addColumn('action',
            array(
                'header'    =>  Mage::helper('customer')->__('Action'),
                'width'     => '100',
                'type'      => 'action',
                'getter'    => 'getId',
                'actions'   => array(
                    array(
                        'caption'   => Mage::helper('customer')->__('Edit'),
                        'url'       => array('base'=> '*/*/edit'),
                        'field'     => 'id'
                    )
                ),
                'filter'    => false,
                'sortable'  => false,
                'index'     => 'stores',
                'is_system' => true,
        ));

        $this->addExportType('*/*/exportCsv', Mage::helper('customer')->__('CSV'));
        $this->addExportType('*/*/exportXml', Mage::helper('customer')->__('Excel XML'));
        return parent::_prepareColumns();
    }

    protected function _prepareMassaction()
    {
        $this->setMassactionIdField('entity_id');
        $this->getMassactionBlock()->setFormFieldName('customer');

        $this->getMassactionBlock()->addItem('delete', array(
             'label'    => Mage::helper('customer')->__('Delete'),
             'url'      => $this->getUrl('*/*/massDelete'),
             'confirm'  => Mage::helper('customer')->__('Are you sure?')
        ));

        $this->getMassactionBlock()->addItem('newsletter_subscribe', array(
             'label'    => Mage::helper('customer')->__('Subscribe to Newsletter'),
             'url'      => $this->getUrl('*/*/massSubscribe')
        ));

        $this->getMassactionBlock()->addItem('newsletter_unsubscribe', array(
             'label'    => Mage::helper('customer')->__('Unsubscribe from Newsletter'),
             'url'      => $this->getUrl('*/*/massUnsubscribe')
        ));

        $this->getMassactionBlock()->addItem('manager_grid', array(
             'label'        => Mage::helper('manager')->__('Add to call log'),
             'url'          => $this->getUrl('*/*/massAssignGroup'),
             'additional'   => array(
                'visibility'    => array(
                     'name'     => 'reason',
                     'type'     => 'select',
                     'class'    => 'required-entry',
                     'label'    => Mage::helper('manager')->__('Reason'),
                     'values'   => $data
                 )
            )
        ));        

        $groups = $this->helper('customer')->getGroups()->toOptionArray();
        array_unshift($groups, array('label'=> '', 'value'=> ''));
        $this->getMassactionBlock()->addItem('assign_group', array(
             'label'        => Mage::helper('customer')->__('Assign a Customer Group'),
             'url'          => $this->getUrl('*/*/massAssignGroup'),
             'additional'   => array(
                'visibility'    => array(
                     'name'     => 'group',
                     'type'     => 'select',
                     'class'    => 'required-entry',
                     'label'    => Mage::helper('customer')->__('Group'),
                     'values'   => $groups
                 )
            )
        ));

        return $this;
    }

    public function getGridUrl()
    {
        return $this->getUrl('*/*/grid', array('_current'=> true));
    }

    public function getRowUrl($row)
    {
        return $this->getUrl('*/*/edit', array('id'=>$row->getId()));
    }

} 
```

谁能告诉我我是否以正确的方式处理此问题，因为我无法在第二个下拉字段中显示“原因”列表。我是自定义 Magento 管理员的新手，所以请原谅我缺乏知识。

如果我尝试向数组添加选项，我会得到一个空屏幕：

```
$collection = $this->helper('manager')->getCollection()->toOptionArray();
array_unshift($manager, array('label'=> '','value'=>''));
$this->getMassactionBlock()->addItem('manager', array(
     'label'        => Mage::helper('manager')->__('Add to call log'),
     'url'          => $this->getUrl('*/*/massAssignManager'),
     'additional'   => array(
        'visibility'    => array(
             'name'     => 'manager',
             'type'     => 'select',
             'class'    => 'required-entry',
             'label'    => Mage::helper('manager')->__('Reason'),
             'values'   => $manager
         )
    )
)); 
```

我不知道为什么！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:07:36.627

您正在做一些好事，只是附加下拉列表的一件事：'values' => $data. 数据未定义。

查看组以了解如何序列化选项以启用第二个下拉菜单

```
$groups = $this->helper('customer')->getGroups()->toOptionArray();
    array_unshift($groups, array('label'=> '', 'value'=> '')); 
```

您需要类似的东西才能在此处的数组中获取选项。

# css - 条件继承字体、大小和颜色

> ID：15271739
> 
> 赞同：0
> 
> 时间：2013-03-07T12:51:22.883
> 
> 标签：css

当链接位于 h1 和 span 标签内时，我在制作继承颜色和大小的样式时遇到问题。如果它们在 td 内部，它们的行为方式应该相同。我已将所需的输出放在链接名称中。

**JS小提琴：**

[http://jsfiddle.net/lasseedsvik/ym7M7/9/](http://jsfiddle.net/lasseedsvik/ym7M7/9/)

**风格**

```
* {
    color: #000;    
    font-family: Times;
    font-size: 14px;
}

a {
    color: red;
}

h1
{
    font-family: arial, helvetica;
    font-size: 27px;
    color: green;
} 
```

**html**

```
<div id="container">
    Default text color
    <br />
    <br />
    <a href="#">Red link . default font</a>
    <br />
    <h1><a href="#">Green link - Arial 27px</a></h1>
    <br />
    <span style="font-size: 18px"><a href="#">Red link - 18px default font</a></span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:53:42.170

尝试

```
h1 a, span a{
    font-size:inherit;
    font-family:inherit;
    color:inherit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:54:02.947

使用 CSS`inherit`关键字：

```
h1 a, 
span a {
    color: inherit;
    font: inherit;
} 
```

[演示在这里](http://jsfiddle.net/barney/7LPm6/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:22:35.980

您可以使用`inherit`关键字来请求继承，但 IE 7 不支持。通过明确声明您想要的内容，您可以获得更好的浏览器覆盖率，例如

```
h1, h1 a
{
    font-family: arial, helvetica;
    font-size: 27px;
    color: green;
} 
```

在 .的直接内容和.中包含的`h1`任何`a`元素上设置属性`h1`

# ruby - grep 且不等于 if 条件

> ID：15271742
> 
> 赞同：0
> 
> 时间：2013-03-07T12:51:31.647
> 
> 标签：ruby

我想检查`check`变量中是否存在“Listen 8581”。如果*不是*，我想添加“Listen 8581”。

我有这个代码：

```
if (found = check.grep(/Listen 8581/)).empty?
  run "#{try_sudo} sed -i '$ a\Listen 8581\n' #{ports_file}"
  puts "OOOps".red
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:59:40.713

```
unless /Listen 8581/.match check
  # run your code here
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:24:29.377

作为一种风格上的事情，在条件中分配给一个变量是一个坏主意，因为它很容易解决错误和维护问题。调试大型程序时，很容易错过逻辑或丢失`==`. 先分配，然后检查清晰度：

```
found = check.grep(/Listen 8581/)
如果找到.empty？
  运行“#{try_sudo} sed -i '$ a\Listen 8581\n' #{ports_file}”
  放“OOOps”.red
结尾

```

我知道避免在堆栈上添加一个变量很诱人，但是如果您的代码嵌入在一个方法中，那么额外的变量将超出范围，这将是一个没有实际意义的问题。

在某些语言（例如 Perl 和 C）中，以这种方式编写是惯用的，但在我的职业生涯中，我曾多次看到这种情况会导致问题，因此我会避免这种情况。

# django - 姜戈 1.5。'url' 需要一个非空的第一个参数。Django 1.5 中的语法改变

> ID：15271747
> 
> 赞同：5
> 
> 时间：2013-03-07T12:51:47.453
> 
> 标签：django

如果我尝试：

```
href="{% url post_content product_id=p.id %}" 
```

我有这个错误：

> 'url' 需要一个非空的第一个参数。Django 1.5 中的语法发生了变化，请参阅文档。

如何改变它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T12:55:25.477

> 在 Django 1.5 中更改：第一个参数以前没有被引用，这与其他模板标签不一致。从 Django 1.5 开始，它根据通常的规则进行评估：它可以是带引号的字符串或将在上下文中查找的变量。

所以：`"{% url 'post_content' product_id=p.id %}"`。

# jsf - 接缝意外的 createInstance 调用

> ID：15271749
> 
> 赞同：0
> 
> 时间：2013-03-07T12:51:55.440
> 
> 标签：jsf, jsf-2, primefaces, seam, seam2

我有一个 xhtml 页面，我试图在其中打开一个对话框并设置/更改一些值。页面通常由 MemberInformationService 支持，在此页面的 page.xml 中，我调用了一个线函数来将一些值设置到 MemberLogHome 的实例中。一切都很完美。当我按下命令按钮打开对话框时，我可以看到 MemberLogHome 的实例设置正确，（我可以看到我在对话框上设置的值）但同时，有一个意外的 createInstance 调用，后来继续使用 setInstance使 MemberLogHome 的实例值为 null。因此，当我提交我的对话框时，我得到了错误。我找不到是什么导致了意外的来电。每当我打开对话框时，也会执行此调用。我正在使用 Seam 2.3 和 primefaces 3.5

课程很大，我只写我认为相关的部分

Xhtml 内部：

```
<p:menuitem value="#{messages.overallChange}"
                                onclick="dlg2.show()" />

<p:dialog header="#{messages.overallChange}" widgetVar="dlg2"
        modal="true" resizable="true" appendToBody="true">
<h:form>
<p:panelGrid columns="1">
                        <s:decorate template="layout/edit.xhtml">
                            <ui:define name="label">#{messages.memberId}</ui:define>
                            <p:inputText
                                value="#{memberLogHome.instance.memberByNewMemberId.id}" />
                        </s:decorate>
....
<h:commandButton value="#{messages.submit}"
                action="#{memberInformationService.saveOverallChange}"
                oncomplete="dlg2.hide();" />
</h:form>
</p:dialog> 
```

MemberInformationService 内部

```
@Name("memberInformationService")
@Scope(ScopeType.PAGE)
public class MemberInformationService {
@In(create = true)
MemberLogHome memberLogHome;
    ...
public void wire() {
...
fillMemberLog();
}
public void fillMemberLog(){

memberLogHome.clearInstance();
memberLogHome.setInstance(new MemberLog());

memberLogHome.getInstance().setBranchByNewBranchId(trustMemberHome.getInstance().getBranch());
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:17:05.160

如果您在 page.xml 中`public void wire()`使用`<action />`标签调用，请确保其`on-postback`属性设置为`false`，否则将在任何回发时再次调用，包括表单提交、执行前两行`fillMemberLog()`并清除实例中的值。

# php - 重构数组以供 Highcharts 使用

> ID：15271750
> 
> 赞同：3
> 
> 时间：2013-03-07T12:51:58.170
> 
> 标签：php, highcharts, highstock

我有多个遵循以下示例格式的数组，我想知道如何以编程方式重组数组以用于 Highcharts（特别是 Highstock）。我希望能够比较每个数组的数据，如[本演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/compare/)中所示。[Date] 应该是 X 轴，[Close] 应该是给定数据点的 Y 轴。

数组示例：

```
Array
(
    [0] => Array
        (
            [Date] => 2013-03-06
            [Open] => 3.79
            [High] => 3.64
            [Low] => 3.48
            [Close] => 3.52
            [Volume] => 22184500
            [Adj Close] => 3.72
        )

    [1] => Array
        (
            [Date] => 2013-03-05
            [Open] => 3.63
            [High] => 3.05
            [Low] => 3.28
            [Close] => 3.54
            [Volume] => 32987900
            [Adj Close] => 3.14
        )

    [2] => Array
        (
            [Date] => 2013-03-04
            [Open] => 3.50
            [High] => 3.67
            [Low] => 3.50
            [Close] => 3.64
            [Volume] => 47933200
            [Adj Close] => 3.84
        )
) 
```

如果您需要更多信息或有任何问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:34:28.043

如果你做这样的事情：

```
 $i = 0;
    foreach($your_array as $val){
       $res[$i][]   = strtotime($val['Date']) * 1000; //sets the date as a javascript timestamp
       $res[$i][]   = (float)$val['Close']; //make sure it is formatted as a number not a string
       $i++;
    }
    json_encode($res); 
```

您应该有 json 可以作为图表中的数据对象传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:21:48.557

我不确定你到底在寻找什么，

试试这个 ：

```
$res              = array();
foreach($your_array as $key=>$val){
   $res[$key]['Date']   = $val['Date'];
   $res[$key]['Close']  = $val['Close'];
}

echo "<pre>";
print_r($res); 
```

# jquery - Jquery 没有在 ruby on rails 中执行

> ID：15271756
> 
> 赞同：1
> 
> 时间：2013-03-07T12:52:15.010
> 
> 标签：jquery, ruby-on-rails, ruby, selenium

我是 ruby​​ on rails 和 jquery 的新手。我正在尝试用 ruby​​ 编写一个执行 jquery 版本的应用程序

我有 jquery - rails (2.2.1) gem 和 rails (3.2.12) 。我使用了一个 jquery 函数来取消绑定提交

以下是我的代码片段：

```
js_element=driver.find_element(:id=>"<id of my form")
driver.execute_script("('#createAccountForm').unbind('submit')" , js_element) 
```

这是错误消息 /var/lib/jenkins/.rvm/gems/ruby-1.9.3-p362/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok': TypeError: "#createAccountForm".unbind 不是函数（Selenium::WebDriver::Error::JavascriptError）

我可能在这里错过了什么.??!! 请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:55:53.280

您缺少 scriot 中的 jQuery 函数字符：

```
driver.execute_script("$('#createAccountForm').unbind('submit')" , js_element); 
```

# python - Python 桌面应用程序数据库

> ID：15271764
> 
> 赞同：5
> 
> 时间：2013-03-07T12:52:37.033
> 
> 标签：python, database, python-2.7

Python 支持多个数据库

但我想要一个用于桌面应用程序的数据库，它可以包含在 python py2exe 的设置中

当应用程序包被移动时，它的数据库也想移动

例如它可能与文本文件，但我想要一个以表格格式存储数据的数据库。

建议想法，数据库相关性...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:25:29.040

正如 Martijn 评论的那样，python 中有包含电池的[sqlite3](http://docs.python.org/2/library/sqlite3.html)模块，您可以使用它来创建和处理基于文件的 sqlite 数据库。

或者，您可以使用第三方产品，例如[firebird](http://www.firebirdsql.org)，您也可以将其嵌入到您的应用程序中。

如果您只想存储少量信息，您可以使用例如 python 的[pickle模块或使用](http://docs.python.org/2.7/library/pickle.html)[ConfigParser](http://docs.python.org/2.7/library/configparser.html)编写/读取简单的 ini 文件。

# relational-database - 图数据库与关系数据库的时间和空间复杂性

> ID：15271767
> 
> 赞同：0
> 
> 时间：2013-03-07T12:52:47.917
> 
> 标签：relational-database, graph-databases

图和关系数据库的横向时间复杂度是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:07:55.867

计算机或代数哪个更快？

关系模型是一种*思考*数据的方式，一种向*用户**表示*数据的方式。它*没有*说明实施。询问关系数据库的时间复杂度就像询问. **`f(x)`**

 **我没有使用过使用元组线性数组来存储数据的 SQL DBMS。他们都使用某种树：B-tree、B+tree。树是图。因此，图形数据库声称的*物理*优势是基于，好吧，如果你问我的话。

SQL DBMS 在过去几年增加了对所谓的递归查询的支持。这些查询的有效执行不存在理论上的问题，而且我已经看到它完成了。但是查询优化器必须支持它才能正常工作，如果开源项目在该领域有一些工作要做，我不会感到惊讶。

在选择你的武器时，不要询问“关系数据库”，而是询问在特定实现中对递归查询处理的支持，

不过要小心错误的对称性。“图形数据库”中缺少相当长的列表。例如，关系模型基于代数，这是 SQL 所基于的（主要是松散的）。图论缺乏这样的代数，因此缺乏良好的操作语言。约束执行和交易也有类似的故事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T15:45:06.153

图数据库的一个（也许是）关键点是不必为遍历做任何连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T18:26:18.547

两者都有 O(N)？

图形数据库的核心是一个表（[https://stackoverflow.com/a/2968931/623735](https://stackoverflow.com/a/2968931/623735)）。RDB 已经发展到在处理表方面非常有效。因此，大多数具有持久存储的大型 GDB 都使用 RDB 来存储节点表。GDB 只是将所有常规数据表行的 id 堆叠到一个“节点”表中（为高效索引而分组和排序）。GDB 的魔力在于用于遍历/探索图形的高效算法。

所以我不认为 GDB 真的像 RDBMS 对相同类型的数据进行相同类型的查询那样对两个表进行连接（遍历）。GDB 只是以链表的方式从一个节点（节点表中的行）走到另一个节点。一旦找到您查询的节点，然后对节点属性表进行一次“遍历”以检索您查询的信息（名称、等级、序列号；）。**

# python - 如何分解字符串并按顺序附加其字符？

> ID：15271769
> 
> 赞同：2
> 
> 时间：2013-03-07T12:52:58.100
> 
> 标签：python, string

我有这个：

```
word = 'abcd' 
```

我想要这个：

```
do_something(word)

>>['a', 'ab', 'abc', 'abcd'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:56:20.390

```
word = 'abcd'

def do_something(word):
    return [word[:x + 1] for x in xrange(len(word))]

print do_something(word) 
```

结果：

```
['a', 'ab', 'abc', 'abcd'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:57:13.197

简单的：

```
[word[:i] for i in xrange(len(word))] 
```

# c - 动态分配一个向量 C

> ID：15271770
> 
> 赞同：0
> 
> 时间：2013-03-07T12:52:58.180
> 
> 标签：c

我试图理解在 C 中动态分配“结构”的概念，我也对通用动态分配感兴趣，你能给我一些关于这个主题的帮助或信息吗？

我已经设法理解了指针的概念，并且我设法理解了某种代码，但我不确定它是否正确，或者它是否按应有的方式工作......

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    typedef struct {
        int id;
        char nume[20];
    } pers;

    pers *i = malloc(sizeof(pers)*100);

    i->id=22;
    i++;
    i->id=33;
} 
```

我的问题是，我是否正确声明了该数组，如何打印该数组的元素，如何引用 eq 的特定元素。`i[9]`，还有另一种方法可以做同样的事情吗？我听说过通用动态分配内存，有人可以给我一个 eq. 那个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:56:41.243

当您这样做时，`i++`您会松开原始指针。相反，您可以使用普通的数组索引：

```
i[0].id = 22;
i[1].id = 33; 
```

当您稍后想要释放分配的内存时，您需要原始指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:55:34.647

以下都是同义词：

`*(i + 9)`

`*(9 + i)`

`i[9]`

`9[i]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T12:57:15.470

引用动态分配数组中的元素的方式与引用自动数组中的元素相同。

使用`pers[i]`将引用第 i 个元素。要访问`id`您将使用的字段`pers[i].id`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T13:00:35.873

通常你会做`typedef struct`之前（外面）的功能，但它的工作原理。

你的分配是正确的。

但`i++`在这里没有任何意义。您应该保留指针`i`，以便您仍然知道分配的内存从哪里开始。您可能想要的是另一个指向数组的指针，并增加它：

```
pers* it = i;
it->id=22;
printf("%d", it->id);
it++;
it->id=33;
printf("%d", it->id); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T13:03:50.670

您不应该更改 malloc 返回给您的指针。将其视为常量以避免造成*内存泄漏*（分配和丢失指向已分配内存的指针）。与其修改`i`，不如使用一个新的索引变量进行迭代，我们称之为`j`：清除/初始化所有数组元素：

```
#include <string.h> /* for memset(). */
int j;
for (j=0; j<100; ++j) {
  i[j].id = 0;
  memset (i[j].nume, 0, 20); /* Or sizeof(i[0].nume) instead of 20\. */
} 
```

打印所有数组元素：

```
for (j=0; j<100; ++j) {
  printf ("id[%d] = %d\n", j, i[j].id);
  printf ("nume[%d] = '%s'\n", j, i[j].nume);
} 
```

我还建议重命名`i`为`person`; 这使代码更具可读性。

# java - “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本对应的手册……”

> ID：15271773
> 
> 赞同：-1
> 
> 时间：2013-03-07T12:53:04.853
> 
> 标签：java, mysql, netbeans, jframe

这是我得到的错误：

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，了解在 'Name='Sanchez',Middle Name='Stark',First Name='Ned',Birthday= 附近使用的正确语法'1993-11' 在第 1 行"

```
 private void UpdateButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                              
        // TODO add your handling code here:
      try {
        String WorkID = WorkIDField3A.getText();
        String LastName = LastNameField3.getText();
        String MiddleName = MidNameField3.getText();
        String FirstName = FirstNameField3.getText();
        String Birthday = BDayField3.getText();
        String Age = AgeField3.getText();
        String Gender = (String) GendCombo3.getSelectedItem();
        String CStatus = (String) CStatCombo3.getSelectedItem();
        String Dept = (String) DeptCombo3.getSelectedItem();
        String Pos = PosField3.getText();
        String WorkHrs3A = WorkHoursField3A.getText();
        String WorkHrs3B = WorkHoursField3B.getText();
        String WorkDaysFrom = (String) WorkDaysFromCombo.getSelectedItem();
        String WorkDaysTo = (String) WorkDaysToCombo.getSelectedItem();
        String HireDate = HireDateField3.getText();

        String SQL = "UPDATE employees SET Last Name =?, Middle Name =?, First Name =?, Birthday =?, Age=?, Gender =?, Civil Status =?, Department =?, Position =?, Work Hours From(AM) =?, Work Hours To(PM) =?, Work Days From =?, Work Days To =?, Hire Date =? WHERE WorkID=?";

        stmt = conn.prepareStatement(SQL);

        stmt.setString(1, LastName);
        stmt.setString(2, MiddleName);
        stmt.setString(3, FirstName);
        stmt.setString(4, Birthday);
        stmt.setString(5, Age);
        stmt.setString(6, Gender);
        stmt.setString(7, CStatus);
        stmt.setString(8, Dept);
        stmt.setString(9, Pos);
        stmt.setString(10, WorkHrs3A);
        stmt.setString(11, WorkHrs3B);
        stmt.setString(12, WorkDaysFrom);
        stmt.setString(13, WorkDaysTo);       
        stmt.setString(14, HireDate);
        stmt.setString(15, WorkID);
        //Execute the SQL statement and update the table
        stmt.executeUpdate();
        JOptionPaneUpdate.showMessageDialog(this, "Update Succesful!");
  }catch(Exception e)
  {
      JOptionPaneUpdateFail.showMessageDialog(this, e.getMessage());
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:55:02.873

你的栏目是“ `LAST_NAME`”还是“ `Last Name`”？？？

这是你的错误。**不要在列名中使用空格。**

如果你**真的**需要，你可以使用以下方法转义列名：`'Last Name'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:55:59.887

转义这些带有空格的名称。像这样

```
UPDATE employees 
SET `Last Name` =?, 
    `Middle Name` =?,
    `First Name` =?, 
     Birthday =?, 
     Age=?, 
     Gender =?, 
     `Civil Status` =?, 
      ...
WHERE WorkID=? 
```

请尽量避免使用这些名称。

# delphi - 如何在 Delphi 7 中检测 IPV6 地址更改？

> ID：15271775
> 
> 赞同：5
> 
> 时间：2013-03-07T12:53:06.913
> 
> 标签：delphi, delphi-7, winsock

我正在寻找一种在 Windows XP 及更高版本上使用 delphi 7 检测 IPV6 地址更改的方法。对于 vista ，我知道有一个 Windows API。我遇到了声称在 XP 上也能做到这一点的代码。这是下面的代码：

```
uses  WinSock2 ; //

procedure TForm1.Button1Click(Sender: TObject);
var
  s: TSocket;
  wsaD: TWSADATA;
  BytesReturned: u_long;
  PtrA: Pointer;
  Buffer: array[0..20] of INTERFACE_INFO;
  ret: Integer;
begin
  try
    FillChar(wsaD, SizeOf(wsaD), #0);
    FillChar(Buffer, SizeOf(Buffer), #0);
    WSAStartup($0101, wsaD);                      // Start WinSock,You should normally check for errors here

    {Create a WSA Socket}
    // s := WSASocketA(AF_INET6,SOCK_STREAM, IPPROTO_TCP, nil, 0, 0);

    s := Socket(AF_INET6, SOCK_STREAM, IPPROTO_IP);         // Open a socket
    if (s = INVALID_SOCKET) then
      Exit;

    PtrA := @bytesReturned;
    //   Ret :=  WSAIoCtl(s, SIO_ADDRESS_LIST_CHANGE, @Buffer,1024, @Buffer, 1024, PtrA, nil, nil);
    Ret :=  WSAIoCtl(s, SIO_ADDRESS_LIST_QUERY, nil,0, @Buffer, SizeOf(Buffer), PtrA, nil, nil);
    DebugLog('Ret Value = ' + SysErrorMessage(WSAGetLastError),0);
    if ret = 0 then
    begin
      // DebugLog('IP Address changed !',0);
      //Showmessage('Operation succeeded !')
    end
    else
    begin
      //DebugLog('No change found in IP Address',0);
      // showmessage(SysErrorMessage(WSAGetLastError));
    end;

    WSAcleanUp;
  except

  end;
end; 
```

我得到的错误代码为

> “提供了一个无效的参数。”

当我将控制代码更改为 SIO_ADDRESS_LIST_QUERY 时，代码工作正常。

有人可以指导我吗？

# python - Python xlsx 单元格保护（锁）

> ID：15271779
> 
> 赞同：2
> 
> 时间：2013-03-07T12:53:18.627
> 
> 标签：python, excel

我需要导出一个列表以 Excel 与一些单元格或列保护（只读）。

问题是我使用 openpyxl python 模块写入 xlsx，但我认为只有 xlwt 具有单元保护功能。而且 xlwt 似乎不支持 xlsx。

有人找到解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:56:25.190

Python 模块[XlsxWriter](https://xlsxwriter.readthedocs.io/index.html)允许您编写 XLSX 文件并添加工作表单元格保护（除其他外）：

```
from xlsxwriter.workbook import Workbook

workbook = Workbook('protection.xlsx')
worksheet = workbook.add_worksheet()

# Create a cell format with protection properties.
unlocked = workbook.add_format({'locked': False})

# Format the columns to make the text clearer.
worksheet.set_column('A:A', 40)

# Turn worksheet protection on.
worksheet.protect()

# Write a locked and unlocked cell.
worksheet.write('A1', 'Cell B1 is locked. It cannot be edited.')
worksheet.write('A2', 'Cell B2 is unlocked. It can be edited.')

worksheet.write_formula('B1', '=1+2')  # Locked by default.
worksheet.write_formula('B2', '=1+2', unlocked)

workbook.close() 
```

有关完整详细信息，请参阅文档的[保护（）](https://xlsxwriter.readthedocs.io/worksheet.html#worksheet-protect)部分。

![单元保护示例](../Images/1d54ee5264531ed6bcd9f9068b1cbe25.png)

# c# - 从 sql server 调用方法名称和主体

> ID：15271785
> 
> 赞同：2
> 
> 时间：2013-03-07T12:53:35.583
> 
> 标签：c#

我想使用 System.Reflection 的 MethodInfo 和 MethodBody 类调用一个方法，并且该方法的名称和主体在 sql server 中我该怎么做，请帮忙

```
 SqlConnection con = new SqlConnection(GlobalData.GetConnectionString());
            SqlCommand cmd = new SqlCommand("select CodeSnippet from SubMenu where Role_ID='"+GlobalData.RoleID+"' and ChildMenu='"+sender.ToString()+"'", con);
            if (con.State == ConnectionState.Closed)
            {
                con.Open();
            }
            SqlDataReader reader = cmd.ExecuteReader();
            if (reader.Read())
            {
                string codeSnippet = reader["CodeSnippet"].ToString();
                Type type = typeof(Helper);
                MethodInfo method = type.GetMethod(codeSnippet);

                Helper c = new Helper();
                method.Invoke(c, null);
            }
            if (con.State == ConnectionState.Open)
            {
                con.Close();
            } 
```

我已经完成了，现在我想要来自 microsoft sql server 的方法体

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:09:19.980

我强烈建议不要允许在生产服务器上执行任意代码片段；错误或恶意代码做坏事的风险很大。如果可以的话，我会说将代码保留在*您的项目*中，并通过某种键（可以是名称，但任何唯一标识符就足够了）引用它 - 即运行“LanuchTheMissiles”操作，其中“LaunchTheMissles”在枚举中或在明确设计为此类操作的接收者的类中定义。

如果您**真的**想使用代码片段，那么 C# 可能不是最方便的代码片段语言 - 尽管可以通过[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromsource.aspx)完成。但是，有些工具*设计*用于脚本语言 - IronPython 等。如果您乐于使用不同的语言，您可以[很容易地嵌入 IronPython 。](http://www.secretgeek.net/host_ironpython.asp)然而，这仍然存在与执行任意代码相关的大部分风险。

如果代码片段将由您的开发人员提供，我会说：只需将代码放在主项目中即可。

如果您的用户将提供这些片段，我会说：不要；只是不要。

另外：您的 SQL 要求注入。

# php - 尝试下载文件时Apache冻结？

> ID：15271790
> 
> 赞同：0
> 
> 时间：2013-03-07T12:53:49.647
> 
> 标签：php, apache, file, download

当我尝试从[http://timmytheterror.com/home/music_detail/233下载音乐文件时](http://timmytheterror.com/home/music_detail/233)

使用用户名登录：amar 密码：123456 开始下载，但 apache 停止处理其他请求。在下载完成之前，我无法访问其他页面。我要下载的编码是

$path = base64_decode($path); $id = base64_decode($id);

```
 $file_path= "http://timmy-the-terror.s3.amazonaws.com/".$path;

        header('Content-Type: application/octet-stream');
        header("Content-Transfer-Encoding: Binary"); 
        header("Content-disposition: attachment; filename=\"".$path."\""); 
    header("Cache-Control: public");
    header("Location: $file_path");
    readfile($file_path); 
```

我在单独的窗口中打开它，但父窗口仍然停止响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:58:03.943

尝试添加 session_write_close(); 到下载脚本。它将停止进一步写入您的会话并允许使用该会话的其他脚本/页面继续。

```
session_write_close();
$file_path= "http://timmy-the-terror.s3.amazonaws.com/".$path;

header('Content-Type: application/octet-stream');
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=\"".$path."\""); 
header("Cache-Control: public");
header("Location: $file_path");
readfile($file_path); 
```

# sql - 将数据从 oledb 数据库获取到 VB.Net 中的数据网格视图

> ID：15271792
> 
> 赞同：0
> 
> 时间：2013-03-07T12:53:54.177
> 
> 标签：sql, vb.net

尝试从数据库中提取数据并将其显示在数据网格视图的表中。正在创建带有标题的表，但它不会填充值。一些代码被注释掉，因为我试图先处理 2 个表。非常感谢任何帮助，Visual Basic 的基本知识！

公共类 DriverOption

```
Public Sub btnStaff_Click(sender As System.Object, e As System.EventArgs) Handles btnStaff.Click

    Dim objconnection As New OleDb.OleDbConnection("Provider=msdaora;Data Source=orabis;User Id=112221800;Password=112221800;")

    Dim objinvoicesDA As New OleDb.OleDbDataAdapter("select * from CUSORDER, CUSORDER ", objconnection)

    Dim objinvoicesCB As New OleDb.OleDbCommandBuilder(objinvoicesDA)

    Dim objdataset As New DataSet()

    Dim objordersdA As New OleDb.OleDbDataAdapter("select CUSORDER.ORDERID, CUSORDER.ORDERDATE, CUSORDER.STAFFID, CUSTOMER.CUSTOMERID,  CUSTOMER.CUSTOMERADD_1 FROM CUSORDER,CUSTOMER WHERE CUSORDER.CUSTOMERID = CUSTOMER.CUSTOMERID", objconnection)  'orderdetails.unitprice from orders , orderdetails where orders.orderid = orderdetails.orderid", objconnection)

    Dim objordersCB As New OleDb.OleDbCommandBuilder(objordersdA)

    'Dim objcustomersDA As New OleDb.OleDbDataAdapter("select * from CUSTOMER", objconnection)

    'Dim objcustomersCB As New OleDb.OleDbCommandBuilder(objcustomersDA)

    'Dim objproductsDA As New OleDb.OleDbDataAdapter("select * from Products", objconnection)

    'Dim objproductsCB As New OleDb.OleDbCommandBuilder(objproductsDA)

    'Public Sub retrieve()
    'objdataset.Clear()

    'objproductsDA.FillSchema(objdataset, SchemaType.Source, "Products")

    'objproductsDA.Fill(objdataset, "Products")

    'objcustomersDA.FillSchema(objdataset, SchemaType.Source, "CUSTOMER")

    'objcustomersDA.Fill(objdataset, "CUSTOMER")
    objordersdA.FillSchema(objdataset, SchemaType.Source, "CUSTOMER")

    objordersdA.Fill(objdataset, "CUSTOMER")

    objordersdA.FillSchema(objdataset, SchemaType.Source, "CUSORDER")

    objordersdA.Fill(objdataset, "CUSORDER")

    'objinvoicesDA.FillSchema(objdataset, SchemaType.Source, "invoices")

    'objinvoicesDA.Fill(objdataset, "invoices")

    ViewDeliverys.DataGridView1.DataSource = objdataset.Tables("CUSORDER") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:28:05.753

有什么错误吗？
您是否尝试过调试代码并查看是否填充了数据集以及问题出在哪里？
我不明白这个查询 Dim objinvoicesDA ...("select * from CUSORDER, CUSORDER ", objconnection) : this "CUSORDER, CUSORDER" 这种查询存在吗？

# c# - 如何在C#中检测目标服务器中安装了哪个版本的exchange？

> ID：15271795
> 
> 赞同：3
> 
> 时间：2013-03-07T12:54:08.097
> 
> 标签：c#, exchange-server

有没有办法通过 c# 检测正在运行的 Exchange Server 版本（2003 或 2007 或 2010）？

我经历过 [这里](https://stackoverflow.com/questions/4197440/determining-version-of-exchange-server-on-the-system-using-c-sharp) 。但在 power shell 1.0 中不支持使用“\ROOT\MicrosoftExchangeV2”运行 WMI 查询。

因为我有场景来获取在特定服务器中找到的所有用户和组邮箱列表并转换为 csv 文件。

以下是我们计划在 C# 中实现的方式

```
if(ExchangeVersion == "2003")
   GetExchange2003UserList();
else if(ExchangeVersion == "2007")
   GetExchange2007UserList();
else if(ExchangeVersion == "2010")
   GetExchange2010serList(); 
```

请提供建议并参考链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:47:32.543

我可以在 CN=Configuration,DC=domain,DC=local 命名上下文中使用 Active Directory LDAP 查询来完成。我在这里分享代码：

```
 public static string getExchangeServerVersion()
        {
            try
            {
                string domain =Domain.GetCurrentDomain().ToString();
                DirectoryEntry rootDSE = new DirectoryEntry(string.Format("LDAP://{0}/rootDSE",  domain));
                DirectoryEntry objDirectoryEntry = new DirectoryEntry(string.Format("LDAP://{0}/{1}",domain,rootDSE.Properties["configurationNamingContext"].Value.ToString()));
                DirectorySearcher searcher = new DirectorySearcher(objDirectoryEntry, "(&(objectClass=msExchExchangeServer))");
                SearchResultCollection col = searcher.FindAll();
                string version = string.Empty;
                foreach (SearchResult result in col)
                {
                    DirectoryEntry user = result.GetDirectoryEntry();
                    if (String.Equals(user.Properties["name"].Value.ToString(),Dns.GetHostName(),StringComparison.InvariantCultureIgnoreCase))
                    {
                        version = user.Properties["serialNumber"].Value.ToString();
                        break;
                    }
                }
                return version;

            }
            catch (Exception ex)
            {
                Console.WriteLine("\nError : " + ex.Message);
                return "";
            }
        } 
```

主功能 ：

```
static void main()
{

     string exchangeServerVersion = string.Empty;
     exchangeServerVersion =getExchangeServerVersion();
     if (exchangeServerVersion.Contains("Version 6"))
            {
                users.GetExchange2003UserList();
                GetADGroupList();
            }
            else if (exchangeServerVersion.Contains("Version 8"))
            {
                users.GetExchange2007UserList();
                GetADGroupList();
            }
            else if (exchangeServerVersion.Contains("Version 14"))
            {
                users.GetExchange2010UserList();
                GetADGroupList();
            }
} 
```

由于所有版本都支持 ldap。希望它适用于每个人。

如果还有其他方法可以从 C# 获取交换版本，请分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-08T09:27:09.783

另一种方法是使用 powershell 命令获取它

获取-ExchangeServer | 格式列表名称、版本、AdminDisplayVersion

# ember.js - 用于加载数据和零结果的不同模板

> ID：15271797
> 
> 赞同：1
> 
> 时间：2013-03-07T12:54:15.633
> 
> 标签：ember.js, handlebars.js

我想在检索数据时显示加载器文本，并在检索数据但结果为零时显示另一个文本。

这是我当前的模板：

```
<h3>Items</h3>
<ul>
  {{#each item in controllers.items}}
    <li>{{ title }}</li>
  {{else}}
    <li>No items found</li>
  {{/each}}
</ul> 
```

但是现在 text:`No items found`在检索数据时也会显示。

Emberjs 是否可以使用类似于以下模板的内容？

```
<h3>Items</h3>
<ul>
  {{#each item in controllers.items}}
    <li>{{ title }}</li>
  {{else if loading}}
    <li>Loading....</li>
  {{else}}
    <li>No items found</li>
  {{/each}}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:39:45.253

不可能完全按照您的方式，但我这样做，我正在向我的控制器添加一个加载标志，以便我可以在模板中访问它：

```
<h3>Items</h3>
<ul>
  {{#if loading}} 
     I am loading your items!
  {{else}}
    {{#each item in controllers.items}}
      <li>{{ title }}</li>
    {{else}}
      <li>No items found</li>
    {{/each}}
  {{/if}}
</ul> 
```

所以你的控制器可能看起来像这样使用超时方法来重置加载标志：

```
App.YourController = Ember.ArrayController({
  loading : false, // set this property, when you are loading new content into the controller
  resetLoadingObserver : function(){
     // this gets triggered on each modification to the array
     // we want to reset the loading property, once all new items have been added
     var that = this;
     $.doTimeout("resetLoadingFlag", 100, function(){
       that.set("loading", false)
     });
  }.observes("content.@each")
}); 
```

# c - SSE/AVX + OpenMP：数组的快速求和

> ID：15271800
> 
> 赞同：2
> 
> 时间：2013-03-07T12:54:25.880
> 
> 标签：c, openmp, sse

我将两个数组相加并输出第三个数组（不是减少）。像这样：

```
void add_scalar(float* result, const float* a, const float* b, const int N) {   
    for(int i = 0; i<N; i++) {
        result[i] = a[i] + b[i];
    }
} 
```

我想以最大的吞吐量做到这一点。使用 SSE 和四个内核，我天真地期望加速 16 倍（SSE 四个，四个内核四个）。我已经用 SSE（和 AVX）实现了代码。Visual Studio 2012 具有自动矢量化功能，但我通过“展开循环”获得了更好的结果。我为具有四种大小的数组（32 字节对齐）运行我的代码：小于 32KB、小于 256KB、小于 8MB 和大于 8MB 的内核对应于 L1、L2、L3 缓存和主内存。对于 L1，我使用展开的 SSE 代码（使用 AVX 的 5-6）看到了大约 4 倍的加速。这和我预期的一样多。之后每个缓存级别的效率都会下降。然后我使用 OpenMP 在每个内核上运行。我在数组的主循环之前放置了“#pragma omp parallel for”。但是，我得到的最佳加速是 SSE + OpenMP 的 5-6 倍。有谁知道为什么我没有看到 16 倍的加速？也许是由于阵列从系统内存到缓存的一些“上传”时间？我意识到我应该对代码进行概要分析，但这本身就是我必须学习的另一种冒险。

```
#define ROUND_DOWN(x, s) ((x) & ~((s)-1))  
void add_vector(float* result, const float* a, const float* b, const int N) {
    __m128 a4;
    __m128 b4;
    __m128 sum;
    int i = 0;
    for(; i < ROUND_DOWN(N, 8); i+=8) {
        a4 = _mm_load_ps(a + i);
        b4 = _mm_load_ps(b + i);
        sum = _mm_add_ps(a4, b4);
        _mm_store_ps(result + i, sum);
        a4 = _mm_load_ps(a + i + 4);
        b4 = _mm_load_ps(b + i + 4);
        sum = _mm_add_ps(a4, b4);
        _mm_store_ps(result + i + 4, sum);
    }
    for(; i < N; i++) {
        result[i] = a[i] + b[i];
    }
    return 0;
} 
```

我的错误主循环具有这样的竞争条件：

```
float *a = (float*)_aligned_malloc(N*sizeof(float), 32);
float *b = (float*)_aligned_malloc(N*sizeof(float), 32);
float *c = (float*)_aligned_malloc(N*sizeof(float), 32);
#pragma omp parallel for
for(int n=0; n<M; n++) {  //M is an integer of the number of times to run over the array
    add_vector(c, a, b, N);
} 
```

我根据灰熊的建议更正了主循环：

```
for(int i=0; i<4; i++) {
    results[i] = (float*)_aligned_malloc(N*sizeof(float), 32);
}
#pragma omp parallel for num_threads(4)
for(int t=0; t<4; t++) {
    for(int n=0; n<M/4; n++) { //M is an integer of the number of times to run over the array
        add_vector(results[t], a, b, N);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:56:29.287

免责声明：和你一样，我没有分析代码，所以我不能绝对肯定地回答。

您的问题很可能与内存带宽或并行化开销有关。

您的循环计算量非常轻，因为它为 3 次内存操作添加 1 次，使您自然受到内存带宽的限制（考虑到 ALU 吞吐量比现代架构中的内存带宽好得多）。因此，您的大部分时间都花在传输数据上。

如果数据足够小以适合缓存，您可以（理论上）将 openmp 线程绑定到特定内核并确保向量的正确部分位于特定内核的 L1/L2 缓存中，但这并没有真正的帮助，除非您可以并行化初始化（传输数据时并不重要，如果您必须这样做）。因此，将数据从一个核心缓存传输到另一个核心缓存会受到打击。

如果数据不适合处理器缓存，您最终会受到主内存带宽的限制。由于预取一个核心可能几乎可以最大限度地利用这种简单访问模式的带宽，给您的增长空间很小。

要记住的第二点是，创建`omp parallel`构造和分发循环有一定的开销。对于小型数据集（适合 L1/L2/L3 的数据集可能符合条件），此开销很容易与计算时间本身一样高，几乎没有加速。

# ruby-on-rails - Rails - 在新用户创建时创建其他类的新实例

> ID：15271802
> 
> 赞同：0
> 
> 时间：2013-03-07T12:54:28.040
> 
> 标签：ruby-on-rails, forms, controller

我试图拥有它，以便在应用程序中创建新用户时，一切都已经为他们设置好了。例如，他们有一个文件夹，他们将笔记保存到其中。因此，在他们保存任何笔记之前，不必单击指向新文件夹的链接，然后单击提交按钮来创建它，是否可以在创建用户帐户时自动为他们设置一个？

例如

users_controller.rb：

```
def create
    @user.password = params[:password]
    respond_to do |format|
      if @user.save
         @folder = @user.folder.new(params[:folder]) # this is the line that I'm unsure how to implement

        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

解决方案：

当我使用设计时，我添加到用户控制器的路由被覆盖了，所以解决方案（可能有更好的方法来做到这一点！）是将代码添加到注册控制器中的 after_user_sign_up_path，然后它执行得很好.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:43:55.430

在您的操作中，您同时使用参数 for`@user`和`@user.folder`.

我建议使用[nested_attributes](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。

```
class User
  has_one :folder
  accepts_nested_attributes_for :folder
end 
```

然后你可以这样写你的动作：

```
def create
  @user.update_attributes(params[:user])
  respond_to do |format|
    if @user.save
      # Here the folder is already saved!

      format.html { redirect_to @user, notice: 'User was successfully created.' }
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

应该有很多优点（虽然我还没有全部检查过），其中包括：

*   不要冒险在`@user`没有文件夹的情况下保存（如果文件夹保存失败，用户保存失败）
*   @user.errors 应该包含 和 的验证`@user`错误`@user.folder`

但要做到这一点，你的参数应该有一个不同的结构（这很容易用[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)实现）：

```
user:
  password: "Any password"
  folder_attributes:
    any_attribute: "Any value" 
```

# android - 如何准确设置 clientIds 和受众以对 Android 应用程序的 Google Cloud Endpoints 进行身份验证

> ID：15271805
> 
> 赞同：4
> 
> 时间：2013-03-07T12:54:44.540
> 
> 标签：android, google-cloud-endpoints

在端点 App Engine 后端，我该如何设置

```
@Api(name=...
     clientIds = {what-goes-here-exactly-1},
     audiences = {what-goes-here-exactly-2}
) 
```

在Android客户端中，我究竟该如何设置

```
credential = GoogleAccountCredential.usingAudience(this,
           what-goes-here-exactly-3); 
```

这里有冲突/混淆/不清楚的说明[http://devthots.blogspot.com/](http://devthots.blogspot.com/) 和这里[https://developers.google.com/appengine/docs/java/endpoints/consume_android#making-authenticated-calls](https://developers.google.com/appengine/docs/java/endpoints/consume_android#making-authenticated-calls)

我在我的 API 控制台的 API 访问中生成了很多密钥，但不确定如何使用它们并附加/前置它们以在上述语句中使用。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:13:52.903

在您的后端，您将包括：

```
@Api(
  name = "myapi",
  version = "v1",
  clientIds = {Ids.WEB_CLIENT_ID, Ids.ANDROID_CLIENT_ID},
  audiences = {Ids.ANDROID_AUDIENCE}
) 
```

这些常量被定义为：

```
public class Ids {
  public static final String WEB_CLIENT_ID = "12345.apps.googleusercontent.com";
  public static final String ANDROID_CLIENT_ID = "12345-abc.apps.googleusercontent.com";
  public static final String ANDROID_AUDIENCE = WEB_CLIENT_ID;
} 
```

使用上述值，您将在 Android 代码中使用的代码是：

```
credential = GoogleAccountCredential.usingAudience(this,
    "server:client_id:" + Ids.ANDROID_AUDIENCE); 
```

# c# - 正则表达式在电子邮件主题行中查找 ID 代码

> ID：15271808
> 
> 赞同：1
> 
> 时间：2013-03-07T12:54:51.140
> 
> 标签：c#, .net, regex

我们正在我们的 Web 应用程序中实现一项功能，该功能可以读取电子邮件主题并检查主题中是否存在包含 ID 的特定字符串，以便我们可以将传入的电子邮件与应用程序中的项目进行匹配。

主题可能如下所示：备用船舶要求 07.03.2013 [FIX:1012]

我需要识别方括号中的字符串并从中提取数字：'1012'

到目前为止，我想出了这个：

```
\[[a-z]{5}:[0-9]{4}\]\Z 
```

但这仅匹配整个字符串：[FIX:1012]

我从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:08:52.630

**使用后视和前瞻：**

```
(?<=\[[a-z]{5}:)[0-9]{4}(?=\]\Z) 
```

`?<=`是后视和`?=`前瞻。

**使用组：**

只需将其放在括号中即可将其放入第一组：

```
\[[a-z]{5}:([0-9]{4})\]\Z 
```

使用组将类似于（未经测试）：

```
Match match = regex.Match(input);
if (match.Success)
{
    string v = match.Groups[1].Value;
    Console.WriteLine("{0}", v);
} 
```

[参考](http://www.dotnetperls.com/regex-groups)。

**还：**

我不太确定`[a-z]{5}`你的字符串是如何工作的（这只是 5 个小写字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:16:17.977

这是您的正则表达式代码：

```
 [0-9]+(?:\.[0-9]*)?+(:*?]) 
```

这将为您提供介于“：”“]”之间的 1012 数字

# winforms - C# 文件位置

> ID：15271811
> 
> 赞同：0
> 
> 时间：2013-03-07T12:54:54.233
> 
> 标签：winforms, visual-studio-2008, c#-3.0

在 C# 2008 windows 应用程序中，我计划使用以下代码查找需要查找的文件：

```
 var RFiles = from path in Directory.EnumerateFiles(filesaveLocation, "*.*", 
     SearchOption.AllDirectories) 
     let extension = Path.GetExtension(path) 
      where extension == ".pdf" || extension == ".xlsx" || extension == ".xls" 
      select path; 
```

但是，一旦找到每个选定的文件，我就需要知道每个指定文件所在的确切位置。我需要能够将确切的目录结构位置存储在 sql server 2008 r2 数据库中。

基本上，代码语句将类似于告诉我每个选定文件的确切位置。

因此，您能用代码和/或向我解释如何实现我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:59:00.217

`Directory.EnumerateFiles`返回完整的文件路径，位置 + 文件名。只需打印它或在调试模式下检查。

# css - 按钮中的 css 属性不会在 :checked 中被覆盖？(Qt qss)

> ID：15271812
> 
> 赞同：0
> 
> 时间：2013-03-07T12:54:54.990
> 
> 标签：css, qt, stylesheet, qpushbutton, qtstylesheets

我在 Qt 4 中使用它。

两者的代码：

```
QPushButton#groupBoxTitleExpand
{
    min-height: 25px;
    max-height: 25px;
    border-style: solid; 
    border-width: 0px 17px 0px 3px;
    border-image: url(:/image.png) 0 17 0 3 fill repeat;
} 

QPushButton#groupBoxTitleExpand:checked 
{ 
    min-height: 31px;
    max-height: 31px;
    border-width: 0px 17px 6px 3px;
    border-image: url(:/resources/images/widgets/image.png) 0 17 6 3 repeat;
} 
```

CHECKED 时的按钮永远不会改变。

图像在按钮中有一部分（6像素），当未选中按钮时，该部分被删除并且不显示。然后，当我检查该部分出现的按钮时。但发生的情况是它仍然具有 25 大小，并在底部显示 6 个像素。

很明显，发生的事情是 31px 不起作用。事实上，我尝试了 200px 并保持不变......

这是图像。如您所见，底部有一个阴影，我想在未选中时隐藏它。

![我使用的图像](../Images/123772ae691a31e75f7d39650bd49477.png)

这里会发生什么。第一个工作正常。第二个问题。应该是完美的！作为原始图像。我用这个网站[http://border-image.com/](http://border-image.com/) 来检查它，并且工作正常。

![结果](../Images/2d8f8df8962dedce25cceb42400e7f8e.png)

# wordpress - 跨多个域跟踪附属公司

> ID：15271813
> 
> 赞同：0
> 
> 时间：2013-03-07T12:54:59.643
> 
> 标签：wordpress, nopcommerce, affiliate, affiliates

我有一个用于营销和产品详细信息的网站，该网站设置在不同域的 Wordpress 上。商店托管在另一个域上，该域接受订单、处理付款和所有其他电子商务订单处理。这是在 nopCommerce 网站上。

我想开始联属网络营销并建立一个联属网络，该网络本质上将链接到基于 wordpress 构建的产品网站。但是，由于订单由 nopCommerce 处理，我不确定它将如何跟踪转换为买家的附属公司？

我需要一些可以轻松跟踪两个站点的关联公司的东西。我对你的建议持开放态度。

谢谢

# jsf - 未提交 JSF2 只读值

> ID：15271817
> 
> 赞同：1
> 
> 时间：2013-03-07T12:55:12.530
> 
> 标签：jsf, jsf-2, richfaces, jboss7.x

我有一个 JSF2 表单，其中一些字段定义为只读，尽管用户无法访问，但必须提交。我面临的问题是，当我提交表单时，只读字段评估为空。我阅读了 <h:inputText readonly="true"> 中的线程[数据在单击命令按钮时消失](https://stackoverflow.com/questions/10384032/data-in-hinputtext-readonly-true-disappears-when-command-button-is-clicked)了一些建议，但要么我不明白它们是如何工作的，要么我的表单有问题。

这是我的表格中的内容：

```
<h:inputTextarea  id="attLFld" value="#{cc.attrs.inc.attL}" rows="8" cols="40" 
         onblur="lookupL(this.value)" >
    <rich:validator/>
</h:inputTextarea>

<h:inputText  id="attLIFld" value="#{cc.attrs.inc.attLI}"   size="14"  readonly="true" />

<a4j:jsFunction name="lookupL" execute="attLFld"
        render="attLFld,attLIFld" 
        action="#{incController.lookupL}">        
</a4j:jsFunction> 
```

这是我的控制器方法

```
public void lookupL()
{
   newInc.setAttLI("1234");
} 
```

我尝试按照上面线程中的建议将带有只读标签的 inputText 字段设置为

```
<h:inputText  id="attLIFld" value="#{cc.attrs.inc.attLI}"   size="14"  readonly="#{facesContext.renderResponse}" /> 
```

但这对我不起作用。

* * *

不幸的是，这个建议对我不起作用。我认为我的表格有问题，但我看不出是什么。任何帮助都会非常受欢迎。

这是 xhtml 提取（我使用 Richfaces 4，顺便说一句）

```
<composite:implementation>
<h:panelGrid columns="3"   border="0">
<h:panelGrid columns="1" border="0">   
    <rich:panel id="rpA"> 
        <f:facet name="header">
            <h:outputText value="Field Group A"/>
        </f:facet>  
        <h:panelGrid columns="2" columnClasses="titleCell"   border="0">    
            <h:outputLabel for="fldA1" value="Field A1:" />
            <h:inputTextarea  id="fldA1" value="#{cc.attrs.mybean.fldA1}" rows="8" cols="40" immedite="true" onblur="lookup(this.value)" >
                <rich:validator/>
            </h:inputTextarea>              

            <h:outputLabel for="fldA2" value="Field A2:" />
            <h:inputText  id="fldA2" value="#{cc.attrs.mybean.fldA2}"   size="14"  readonly="true" />                       

            <h:outputLabel for="fldA3" value="Field A3:"/>
            <h:inputText  id="fldA3" value="#{cc.attrs.mybean.fldA3}"  readonly="#{facesContext.renderResponse}" size="14"/>            

        </h:panelGrid>           
    </rich:panel>    
</h:panelGrid>
<h:panelGrid id="pgButtons" columns="1" border="0">
    <a4j:commandButton type="button"  value=">>>>"  action="#{myBeanController.copyFields}"  immediate="true"
    execute="fldA1,fldA2,fldA2H,fldA3,fldA3H" 
    render="fldB1,fldB2,fldB3"/> 

 </h:panelGrid>

<rich:panel id="rpB"> 
        <f:facet name="header">
            <h:outputText value="Field Group B"/>
        </f:facet>  
        <h:panelGrid columns="2" columnClasses="titleCell"   border="0">    
            <h:outputLabel for="fldB1" value="Field B1:" />
            <h:inputTextarea  id="fldB1" value="#{cc.attrs.mybean.fldB1}" rows="8" cols="40" immediateue="true"  >
                <rich:validator/>
            </h:inputTextarea>              

            <h:outputLabel for="fldB2" value="Field B2:" />
            <h:inputText  id="fldB2" value="#{cc.attrs.mybean.fldB2}"   size="14"  readonly="true" />      

            <h:outputLabel for="fldB3" value="Field B3:"/>
            <h:inputText  id="fldB3" value="#{cc.attrs.mybean.fldB3}"  readonly="#{facesContext.renderResponse}" size="14"/>

        </h:panelGrid>           
    </rich:panel>    
</h:panelGrid>      

<div id="hiddenFields">

     <h:inputHidden value="#{cc.attrs.mybean.fldA2H}" id="fldA2H" />
     <h:inputHidden value="#{cc.attrs.mybean.fldA3H}" id="fldA3H"/>  
</div>

<a4j:jsFunction name="lookup" execute="fldA1"
    render="fldA1,fldA2,fldA3,,fldA2H,fldA3H" 
    action="#{myBeanController.lookup}">
  <a4j:param name="loc" assignTo="#{cc.attrs.mybean.fldA1}" />
</a4j:jsFunction>

</composite:implementation> 
```

我在这里要做的是在字段 A1 中输入一些内容，然后填充 A2 和 A3 字段，然后单击按钮将所有这些 Ax 字段复制到 Bx 字段中。我可以做第一部分，但是当我单击按钮时，在控制器方法 copyFields 中，可见（但只读）和隐藏字段都评估为 null

```
@Model
public class MyBeanController {
  private MyBean newMBean;
   private MyBean mBean;

   @Produces
   @Named
   public MyBean getNewMBean()  {
      return newMBean;
   }

    @Produces
    @Named
    public MyBean getMBean() {
        return mBean;
    }

    public void setNewMBean(MyBean mBean) {
        this.mBean = mBean;
    }

    @PostConstruct
    public void initNewMBean() {
        newMBean = new MyBean();        
    }

    public void lookup()    {
        newMBean.setFldA2("boo");
        newMBean.setFldA2H("boo");
        newMBean.setFldA3("hoo");
        newMBean.setFldA3H("hoo");
    }

    public String copyFields()  {
        newMBean.setFldB1(newMBean.getFldA1());
        newMBean.setFldB2(newMBean.getFldA2H());
        newMBean.setFldB3(newMBean.getFldA3H());
        return null;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T08:19:45.027

尝试像这样禁用组件：

```
<h:inputText  id="fldA3" value="#{cc.attrs.mybean.fldA3}"  disabled="#{facesContext.renderResponse}" size="14"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T06:51:27.917

我多次遇到这个问题，JSF 不会提交禁用或只读输入字段，如果您需要对已开发的界面进行快速且看似简单的更改，这可能会很痛苦。此只读字段也未经过验证。将隐藏的输入字段与现有字段并行添加还有其他问题，使其使用不便，因此我决定将输入保留在正常的默认条件下，但用具有更高 z-index 的附加元素覆盖它们，以便该字段处于活动状态并由JSF 通常，但对于用户它显示为只读字段。只需在输入顶部放置一个带有“位置：绝对”的 div，它的行为就像只读或禁用，具体取决于应用的 CSS。

此类 div 的 css 示例：

```
div.input-blocker {
position: absolute;
left: 0;
top: 0;
z-index: 10004;
width: 100%;
height: 80px;
background-color: rgba(0,0,0,0.05); 
```

}

# java - 未为 ScreenSlideActivity.ScreenSlidePagerAdapter 类型定义方法 create(int)

> ID：15271818
> 
> 赞同：2
> 
> 时间：2013-03-07T12:55:15.447
> 
> 标签：java, android, sdk, adt, android-library

我也在尝试实施[这个项目](http://developer.android.com/training/animation/screen-slide.html)，但我收到了 ^Title^ 错误。

我知道这个错误已被重新发布。请参见此处：[错误：构造函数 MainActivity.ScreenSlidePagerAdapter(FragmentManager) 未定义](https://stackoverflow.com/questions/14950833/error-the-constructor-mainactivity-screenslidepageradapterfragmentmanager-is)，此处： [尽管我有 android-support-v13 库，但 Eclipse 无法识别 android.support.v13.app.FragmentActivity](https://stackoverflow.com/questions/14114745/eclipse-doesnt-recognize-android-support-v13-app-fragmentactivity-although-i-hav)

但没有一个答案解决了我的问题。也许图书馆有问题还是？

这是我的代码。

```
package kn.screenslide;

import android.app.Fragment;
import android.app.FragmentManager;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuItem;

public class ScreenSlideActivity extends FragmentActivity {
     //The number of pages (wizard steps) to show in this demo.
    private static final int NUM_PAGES = 5;

//The pager widget, which handles animation and allows swiping horizontally to access previous and next wizard steps.

    private ViewPager mPager;

     //The pager adapter, which provides the pages to the view pager widget.
    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_screen_slide);

        // Instantiate a ViewPager and a PagerAdapter.
        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
        mPager.setAdapter(mPagerAdapter);
        mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                // When changing pages, reset the action bar actions since they are dependent
                // on which page is currently active. An alternative approach is to have each
                // fragment expose actions itself (rather than the activity exposing actions),
                // but for simplicity, the activity provides the actions in this sample.
                invalidateOptionsMenu();
            }
        });
    }

        //A simple pager adapter that represents 5 {@link ScreenSlidePageFragment} objects, in sequence.

    private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
        public ScreenSlidePagerAdapter(android.support.v4.app.FragmentManager fm) {
            super(fm);
        }

        //This is where fragments are created
        @Override
        public android.support.v4.app.Fragment getItem(int position) {
            return ScreenSlidePageAdapter.create(position);
        }

        @Override
        public int getCount() {
            return NUM_PAGES;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:27:11.577

问题在`ScreenSlidePageAdapter.getItem()`. 适配器没有 create() 方法。

```
//This is where fragments are created
@Override
public android.support.v4.app.Fragment getItem(int position) {
    return ScreenSlidePageAdapter.create(position);
} 
```

您必须在此处返回 Fragment，而不是适配器。

# jquery - jquery自定义选择框 - 宽度和高度问题

> ID：15271819
> 
> 赞同：0
> 
> 时间：2013-03-07T12:55:16.477
> 
> 标签：jquery, jquery-selectbox

我正在使用来自该站点的脚本 jQuery 自定义选择框（当前版本：0.6.1）：

[http://info.wsisiz.edu.pl/~suszynsk/jQuery/demos/jquery-selectbox/](http://info.wsisiz.edu.pl/~suszynsk/jQuery/demos/jquery-selectbox/)

我的问题是，“jquery-selectbox-list jquery-custom-selectboxes-replaced-list”类的宽度和高度是由内联样式分配设置的。

我的原始代码如下所示：

```
<span class="anrede">
Anrede<br />
<select name="anrede" id="anrede" value="[[!+fi.anrede]]" >
<option value="select"></option>
<option value="Frau">Frau</option>
<option value="Herr">Herr</option>
</select>
</span> 
```

如果我在 Firebug 中查看该站点的源代码，代码会更改如下：

```
<span class="anrede">
Anrede
<br>
<div class="jquery-selectbox jquery-custom-selectboxes-replaced" style="width: 125px;">
<div class="jquery-selectbox-moreButton"></div>
<div class="jquery-selectbox-list jquery-custom-selectboxes-replaced-list" style="width: 120px; height: 3em; display: none;">
<span class="jquery-selectbox-item value-select item-0"></span>
<span class="jquery-selectbox-item value-Frau item-1">Frau</span>
<span class="jquery-selectbox-item value-Herr item-2">Herr</span>
</div>
<span class="jquery-selectbox-currentItem"></span>
<select id="anrede" value="" name="anrede" style="display: none;">
<option value="select"></option>
<option value="Frau">Frau</option>
<option value="Herr">Herr</option>
</select>
</div>
</span> 
```

我的问题是第三个 div 类：

```
<div class="jquery-selectbox-list jquery-custom-selectboxes-replaced-list" style="width: 120px; height: 3em; display: none;"> 
```

如您所见，这是一个内联样式分配，这导致了我的布局问题。有谁知道如何解决这个问题？

提前干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:13:10.977

只需将 !important 添加到您的 CSS 规则中，如下所示：

```
.jquery-selectbox-list.jquery-custom-selectboxes-replaced-list {
    width: yourvaluepx !important;
    height: yourvaluepx !important;
} 
```

# jquery - TypeScript、RequireJS、jQuery 插件

> ID：15271836
> 
> 赞同：2
> 
> 时间：2013-03-07T12:56:17.240
> 
> 标签：jquery, jquery-plugins, requirejs, typescript

我正在学习 TypeScript，我怕我咬的比我能嚼的还多。我找到了教程和示例

*   在模块中有一个带有[字符串常量](http://www.codebelt.com/typescript/object-oriented-programming-with-typescript/)的文件，然后从每个 ts 文件中使用它
*   配置编译器以创建[可与 RequireJS 一起](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/)使用的模块，并在 TypeScript 中使用 import 和 module 关键字
*   [在 TypeScript 中扩展 jQuery 接口](http://typescript.codeplex.com/discussions/398401)，然后在 TS 中编写插件代码

但我就是不能**一下子**让它全部工作。

我有 3 个文件，都包含单独的 jQuery 插件，但共享一些常量。我有使用这些的所有页面的单独 ts 文件。我想在我的 cshtml 中引用这些每页的 TS 文件`<script data-main="app/this-page" type="text/javascript" src="lib/require.js"></script>`，并让这个页面说“导入我的插件，然后`$("#someId").runMyPlugin(someSettings);`”

谁能推荐我一种方法？应该说什么出口？我应该导入什么？一节课有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-13T12:19:36.537

在按照 blorkfish 的回答配置 require 后，问题是说服 typescript 将依赖项编译为 jquery 插件作为 AMD 依赖项。这可以使用晦涩的 /// <amd-dependency path="..."> 指令来完成。

以 jquery.cookie 为例，您可以将其添加到您的 typecipt 模块中：

```
/// <amd-dependency path="jquery.cookie">
import $ = require("jquery");
import ko = require("knockout");
export = yourmodule;

module yourmodule {
    ...
} 
```

这将编译成：

```
define(["require", "exports", "jquery", "knockout", "jquery.cookie"],
        function (require, exports, $, ko) {
    var yourmodule;
    ...
} 
```

所以现在你可以在你的 typescript 模块中使用这个插件了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:38:25.657

如果您的常量是在一个类中定义的，即 Constants.ts

```
export class Constants {
   constant1: string = "firstConstant";
   constant2: string = "secondConstant";
} 
```

然后导出这个类，并在需要的地方导入。
IE

```
import ref_Constants = module("./Constants");  
var firstConstant = ref_Constants.Constants.constant1; 
```

然后，使用 AMD 模块将在需要时自动加载 Constants.js。

**更新** 好的，所以要使用 JQuery 的 require.js 导出插件，您需要导出到 $ 符号：
这只能通过 require.config 和 shim 属性来完成。您将需要以下内容：

```
require.config({
    baseUrl: '../',
    paths: {
        'jquery': 'lib/jquery-1.7.2',
        'myjqueryextension': 'lib/myjqueryextension' // note this is the .js file
    }, 
    shim: {
        jquery: {
            exports: '$'
        },
        myjqueryextension: {
            exports: '$'
        }
    }
});

require(['jquery','myjqueryextension'], 
    ($, myjqueryextension) => {
        // note that your extension will be attached to $ here, because of the shim
        $('#test').myExtensionFunction('foo', 'bar');
    }); 
```

这里的重要部分是 shim 中的 export: '$' 行。这会将您的扩展附加到 $。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T23:30:13.150

我在设置和 AMD/RequireJS Typescript 工作流程时遇到了类似的问题。我刚刚在 Github 上发布了一个项目示例。

我结合了 Gulp、RequireJS 和 Typescript，而不需要 shim 文件。它还包括获取 Require 和任何供应商文件的任务，将它们与应用程序文件捆绑在一起，并生成一个缩小的 JS 文件，该文件将运行整个应用程序。希望这可以帮助人们。

[https://github.com/abogartz/typescript-amd-gulp-example](https://github.com/abogartz/typescript-amd-gulp-example)

# asp.net - asp.net mvc 树视图助手

> ID：15271839
> 
> 赞同：0
> 
> 时间：2013-03-07T12:56:26.550
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, treeview

我正在使用 asp.net MVC (Razor)。我想在我的网页中使用树视图。Razor 中是否有任何树视图助手？或者如果没有，那么如何使用/集成 asp.net 控件到 asp.net MVC(Razor) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:10:18.310

无法在 Razor 视图中使用经典的 ASP.NET 控件，但是有许多等效的 ASP.NET MVC 可用树视图扩展。

例如：[Telerik Extensions for ASP.NET MVC](http://www.telerik.com/community/promos/freestuff.aspx)

# playframework - 如何在 tomcat 类路径上存储 playframework 数据库配置？

> ID：15271841
> 
> 赞同：1
> 
> 时间：2013-03-07T12:56:31.637
> 
> 标签：playframework, tomcat7, playframework-2.1

我正在使用 playframework 2.10 并使用 play2war 插件将其部署到 tomcat。

我不喜欢 play 框架在 application.conf 中存储数据库配置属性的方式。将应用程序移动到另一台机器或以不同的模式更改数据库配置似乎并不容易。

我正在寻找一种将数据库配置存储在 tomcat 属性类路径中的方法，例如 catalina.properties。

# function - Erlang：将记录传递给函数？

> ID：15271842
> 
> 赞同：1
> 
> 时间：2013-03-07T12:56:31.603
> 
> 标签：function, erlang, record, argument-passing

以下代码确实在编译时带有警告：

```
23> c(passing_records).                                              
passing_records.erl:8: Warning: wrong number of arguments in format call
{ok,passing_records} 
```

但是当我尝试运行它时，尝试将变量传递给名为的记录时出现此错误`pass`：

```
22> passing_records:record_passing([#pass{arg1=2,name="x",to_go=5}]).
* 1: record pass undefined 
```

继承人的代码：

```
-module(passing_records).
-export([record_passing/1]).
-record(pass, {arg1 ,
                name="",
                to_go=0}).  

record_passing( #pass{arg1 = ARG1, name = NAME, to_go = TO_GO}) ->
        io:format("~p ~p~n", [ARG1,NAME,TO_GO]). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:19:01.817

报错的原因`record pass undefined`是需要用`rr`命令在shell中加载记录才能直接使用。有关更多信息，请参阅[此问题](https://stackoverflow.com/q/1386211/113848)。

当我这样做时，我遇到了编译器警告的问题：

```
Eshell V5.9  (abort with ^G)
1> c("/tmp/passing_records", [{outdir, "/tmp/"}]).
c("/tmp/passing_records", [{outdir, "/tmp/"}]).
/tmp/passing_records.erl:8: Warning: wrong number of arguments in format call
{ok,passing_records}
2> rr(passing_records).
[pass]
3> passing_records:record_passing([#pass{arg1=2,name="x",to_go=5}]).
** exception error: no function clause matching 
                    passing_records:record_passing([#pass{
                                                     arg1 = 2,name = "x",
                                                     to_go = 5}]) (/tmp/passing_records.erl, line 7)
4> passing_records:record_passing(#pass{arg1=2,name="x",to_go=5}).
** exception error: bad argument
     in function  io:format/3
        called as io:format(<0.24.0>,"~p ~p~n",[2,"x",5]) 
```

（您还在列表中传递记录，而函数只需要一条记录；因此第 3 行的错误。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:11:26.250

正如警告消息所说，问题出在第 8 行：

```
 io:format("~p ~p~n", [ARG1,NAME,TO_GO]) 
```

您将三个参数的列表传递给格式字符串：ARG1、NAME、TO_GO，但格式字符串只使用其中两个（只有两个 ~p）。它与记录无关。

# php - symfony2 实体、存储库、服务混乱

> ID：15271843
> 
> 赞同：1
> 
> 时间：2013-03-07T12:56:32.070
> 
> 标签：php, symfony, architecture

我对服务、实体和存储库以及我应该在哪里放置我正在从事的项目的内容感到有些困惑。我想我错过了一些东西，我担心我会以错误的方式去做。我不认为原则映射表名称非常适合报告，因为有很多列，并且这些列通常是其他 groupby 在日期、月份、年份等上的结果。

项目的简要简化概述是基于 Web 的报告的集合（作为捆绑包）。

为了创建报告，我必须使用销售日志包预先构建数据。销售日志从事务数据库中获取数据并将其放入准备好由各种其他报告（即具有自定义索引等的报告）运行的表中。数据聚合是一种更好的解释方式。数据源有数以百万计的预订数据可以追溯到几年前，因此直接基于源的报告效率不高，这就是销售日志的来源。

```
SalesJournalBundle      - fetches data from source and puts it into a table ready for other reports
WeeklyConversionReportBundle  - exports sales journal into weekly conversion report table has functions for totals for the week, totals for month, etc
OtherReportBundle             - etc 
```

**销售杂志**

类来运行销售日记帐并从大表导出到另一个表。

```
createQuery($parameters);
runQuery($exportTableName); 
```

**每周转换包**

```
// runs the sales journal and saves to the report.  Entity? Or Service or Repoistory?
runSalesJournalQuery();  

// generates conversion figures and saves the to the table? Entity Or Service or Repoistory?
generateConversions();   

getWeekTotals();         // used when displaying the report..
getMonthTotals($month)   // used when displaying the report..
getTotals()              // used when displaying the report..
etc. 
```

* * *

所以当我开始这个项目时，我假设所有的函数都属于实体类。但是我不确定它们是严格的模型，因为它们需要数据库访问和对其他类的访问？困惑在哪里放置类/方法。任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:31:51.640

1.  假设您在这里使用 Doctrine。

2.  实体中不应该有查询。它们保存数据，也许还有一些业务逻辑。所以把它们从你的名单上划掉。

3.  通常，存储库是放置查询的地方。所以从 runSalesJournalQuery 开始

4.  generateConversions 可能属于服务。我猜它必须在坚持它的结果之前做一堆处理。

5.  获取的东西可以放在存储库或服务中。如果它主要是一个查询，那么从存储库中开始。如果它主要处理查询的结果，那么服务可能会更好。

另请记住，您实际上只能拥有一个存储库。跨多个服务分发内容可能会使您的代码更易于管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:40:13.627

当您谈论*运行销售日志并将其从一个大表导出到另一个表*时，我认为您的意思是让不同`Services`的人做一些小事并共同完成这项大任务。

假设您需要这样的结构：

*   `ExportSalesJournalService`- 这需要依赖于`Repository`可以访问数据库的类。可以`SalesJournalRepository`使用一些自定义方法来运行自定义查询。

*   `ImportSalesJournalService`- 这也需要与另一个相同的依赖项。

*   `RunSalesJournalService`- 不管你是什么意思`running the sales journal`。如果它需要数据库，请通过依赖`Repository`. 如果没有，只是一个纯粹的老式 PHP 类来完成一些任务。

请记住尽可能多地尝试解耦事物，这样您就可以拥有独立的对象。这对可维护性、可测试性和其他方面也有好处。

另一件要考虑的事情是你真的不需要遵循默认的 Symfony 标准应用程序结构，就像我在[这篇文章](http://danielribeiro.org/yes-you-can-have-low-coupling-in-a-symfony-standard-edition-application/)中提到的那样。这将为您提供更低耦合的架构。

`Entities`也是代表某些东西的纯 PHP 类。在大多数情况下，它们应该是愚蠢的对象。永远不要，永远不要将业务特定代码或数据库访问权限放入其中。

对于*转换生成*，自定义`Service`可能也是要走的路。有名字的东西`ConversionGenerationService`或与之相近的东西。

Remeber to provide the **intent** of the object in its class name. This is really important.

Concerning the reports, I would probably create a `Service` to generate them, based on specific `Repositories`. Remember to resolve the dependencies explicity, through the constructor or setters.

# ios - 关闭 UIScrollView 的滚动，但保持缩放功能

> ID：15271856
> 
> 赞同：0
> 
> 时间：2013-03-07T12:57:08.613
> 
> 标签：ios, cocoa-touch, uiscrollview

我有一个`UIScrollView`，我想关闭滚动，但我也想保留缩放功能。

当我 make`scrollView.scrollEnabled = NO`时，它​​会关闭滚动，但缩放也消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:00:08.563

文档说：

> 禁用滚动时，滚动视图不接受触摸事件；它将它们转发到响应者链上。

您可以尝试将`UIScrollView`'s设置`contentSize`为`bounds`有效禁用滚动？

# git - Git 从另一个分支中选择更改

> ID：15271866
> 
> 赞同：2
> 
> 时间：2013-03-07T12:57:46.313
> 
> 标签：git

我有 3 个分支：master、featureA、featureB。我想将一些更改（不一定在单独的提交中）从分支 A 导入到分支 B，我该怎么做？我想我应该在交互模式下使用一些命令，但我还没有弄清楚该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T12:58:55.427

你会想要使用`git cherry-pick`.

您可以通过在命令行上指定要合并的提交哈希以声明方式执行此操作。

如果更改不一定是完整提交，`git cherry-pick --no-commit`则进行一些编辑，并且 a `git commit`(or `git commit --amend`) 是您所追求的。

# python - gtk 允许后台进程

> ID：15271870
> 
> 赞同：0
> 
> 时间：2013-03-07T12:58:08.403
> 
> 标签：python, gtk

我正在用 python 创建一个程序，并使用 GTK 作为其中的一部分。每当 GTK 打开时，它会导致整个程序停止响应，并且不会继续进行下一个进程。理想情况下，我希望 gtk 窗口独立于程序的其余部分打开，因为 GTK 窗口只是显示信息，并且功能是基于文本的

GTK窗口打开后，有什么方法可以继续执行python程序。我在 pygtk 手册中找不到任何内容

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:18:02.450

如果您的程序有 Gtk UI，那么该程序应该由 GTK 主循环驱动。您可能能够在辅助线程中运行 gtk 主循环，但它不是真正受支持的配置，您可能会遇到更多问题

# php - 在这种情况下如何转义单引号？

> ID：15271874
> 
> 赞同：4
> 
> 时间：2013-03-07T12:58:19.027
> 
> 标签：php, jquery, mysql, sql, regex

我有一个页面，它对 api 进行 jquery 调用以接收多个维基百科 url。然后我从 url 中提取文章名称（即`science`从`http://en.wikipedia.org/science`等中获取），为每个添加单引号 (')，将它们串在一起，最后将它们发送到一个 php 页面，该页面进行 mysql`select * from MyTable where title in('name1','name2','name3','name4')`调用。当文章名称中已经有一个单引号（即“希克定律”）时，就会出现问题，因为它破坏了`where in`单引号。这是我正在使用的代码：

```
$.getJSON('http://ajax.googleapis.com/ajax/services/search/web?q=keyword site:en.wikipedia.org&rsz=8&v=1.0&callback=?',
                function (r) {
                var urls1="";
                $.each(r.responseData.results, function(i, item) {
                var thisurl = (i==0) ? "'" +  item.url.substring(item.url.lastIndexOf('/') + 1) + "'" : ",'" + item.url.substring(item.url.lastIndexOf('/') + 1) + "'";
                urls1 += thisurl.replace(/_/g,'%20');

});});
$('#quotes').html($('<div>').load('pr.php?s='+urls1 +' #quotes', function() {} 
```

我在文章名称中添加了单引号，因此字符串应该已经准备好用于 mysql `where in`。

回顾一下，步骤如下：

1.  进行 api 调用并获取多个 Wikipedia url，
2.  从每个 url 获取文章名称，
3.  将它们添加到`urls1`字符串中，同时用空格替换下划线
4.  通过 ajax将`urls1`字符串发送到 pr.php 页面。
5.  在 pr.php 我执行以下操作：`"SELECT * FROM MyTable WHERE title in".$_GET['s']`

我试过做`mysql_real_escape_string($_GET['s'])`，但没有奏效。

我现在正试图转义文章名称中的任何单引号，这样`where in`它就不会中断，但它不起作用。我尝试将以上内容更改为

```
var thisurl=(i==0) ? "'"+item.url.substring(item.url.lastIndexOf('/') + 1).replace(/'/g, "\'")+"'":",'"+item.url.substring(item.url.lastIndexOf('/') + 1).replace(/'/g, "\'")+"'"; 
```

但它没有用。有任何想法吗？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:10:05.560

您不应该在客户端清理 SQL 查询，而应在服务器端清理。

如果您的服务器收到的请求是由您的 javascript 代码生成的，则它们可能会被正确转义，但是您无法控制（并且永远不会控制）如何从客户端发送请求。

例如：我可以在浏览器地址栏中显式键入一个 url，其中包含我认为合适的引号。

在 php 方面，您可以使用 mysql_escape_string ：

```
<?
    $sanitized = array();
    foreach( $wikiPages as $page ){
        $sanitized[] = mysql_escape_string($page);
    }
    $values = "'".implode("','", $sanitized)."'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:03:06.850

因为它的 HTML 内容你应该能够替换`'`with的实例`&quot;`。然后它会在浏览器中正确显示，但在对需要执行相同替换的内容执行搜索时，您必须保持清醒（例如，“希克定律”作为搜索词将在`WHERE`子句语句中变为“希克定律” ）。

PHP 可能具有用于转义 HTML 的内置功能，因此我建议您在自己处理之前先查找它。

# c++ - Dijkstra算法中如何实现优先级队列

> ID：15271875
> 
> 赞同：1
> 
> 时间：2013-03-07T12:58:20.043
> 
> 标签：c++, queue, priority-queue, dijkstra

Dijkstra 的算法使用优先级队列，该队列按距起点的距离排序，但是在算法过程中顶点的距离会发生变化。我不确定优先级队列何时重新排序，但如果我有以下比较器：

```
struct compareByDistance
{
bool operator()(Vertex const &a, Vertex const &b)
    {
        return( getDistance(a) < getDistance(b) );
    }  
}; 
```

在算法过程中，我们只从队列中删除值，所以我无法想象它会完全重新排序。因此，如果距离值发生变化，则队列不会按距离顺序排列。

您如何与此类似地实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:16:40.383

Google min-max（通常为默认）堆，它将作为优先级队列工作。你总是在顶部弹出元素。这将是距离最小的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T05:56:57.413

一种可能的解决方案是拥有一个访问过的数组，该数组跟踪已找到距离最小的所有节点（即它们已从队列中弹出一次）。每次从队列中弹出一个项目时，检查访问的数组以查看是否找到了节点的最短距离。如果是，则忽略该元素。代码看起来像： -

```
while(!queue.empty())
{
node n1= queue.top();
queue.pop();
if(visited[n1]) continue;

////
//Rest of the code here
////
} 
```

**注意：**这可能不是最佳解决方案。

# dylib - 在 Xamarin.Mac 绑定 dll 中嵌入 dylib

> ID：15271877
> 
> 赞同：8
> 
> 时间：2013-03-07T12:58:22.870
> 
> 标签：dylib, monomac, xamarin.mac

我正在为`Xamarin.Mac`/创建绑定`MonoMac`。我想将它嵌入`dylib`到生成的属性中。`dll``Xamarin.iOS``[LinkWith]`

有可能这样做吗？如果是这样怎么办？`dylib`或者我应该从消费应用程序加载？再次在这种情况下，如何？

我试过： - 将`dylib`放在**Native References**文件夹中（不起作用） - 添加`[assembly: MonoMac.RequiredFramework]`属性（找不到`dylib`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:13:40.613

我通过执行以下操作设法`.dylib`从消费应用程序加载：

*   添加`.dylib`到您的项目作为**内容**
*   添加`RequiredFrameworkAttribute`：

```
 [assembly: MonoMac.RequiredFramework("mylib.dylib")] 
```

*   从`AppDelegate`构造函数注册程序集：

```
 public partial class AppDelegate : NSApplicationDelegate
    {
        public AppDelegate ()
        {
            Type t = typeof(ATypeFromTheAssembly);
            MonoMac.ObjCRuntime.Runtime.RegisterAssembly (t.Assembly);
        }
    } 
```

这仍然没有嵌入`.dylib`绑定程序集中，但它有资格作为进步

# resharper - 删除标题摘要 - StyleCop

> ID：15271881
> 
> 赞同：5
> 
> 时间：2013-03-07T12:58:41.370
> 
> 标签：resharper, stylecop

我们在项目中使用 StyleCop 来获得代码的通用格式。我们大多数人还使用 Resharper，StyleCop 与它很好地集成在一起。

我们希望在标题中强制要求版权信息，但我们不想强制要求提供摘要。所以规则**SA1633**被选中，而规则**SA1639 未被**选中。

当我们使用 Resharper（或者更准确地说，我认为是 StyleCop 的 Resharper 插件）插入文件头时，我们会同时获得版权信息和摘要元素。今天的标准程序是删除摘要元素，除非我们真的想在那里写点什么。

如何阻止自动添加摘要元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T10:10:33.157

我不知道 R# 的解决方案，但是，如果您使用其他实用程序（例如[License Header Manager](http://visualstudiogallery.msdn.microsoft.com/5647a099-77c9-4a49-91c3-94001828e99e) ）添加版权信息，则不会遇到该问题。在 R# 添加此功能之前，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T18:52:02.640

这必须通过 ReSharper 的选项进行配置。从 ReSharper 8.2 开始，您可以通过以下步骤导航到该设置：

在 Visual Studio 中：
Resharper -> 选项...

然后在 Resharper 选项对话框的左窗格中：
代码编辑 -> 代码清理

选择或添加配置文件，然后向下滚动到 StyleCop 部分：
StyleCop -> Documentation -> 1604

然后，取消选中规则 1604。

这是一个屏幕截图：

![在此处输入图像描述](../Images/285908a82d293a93f1d71ff2c586a288.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T23:37:46.313

您的标题模板是否包含硬编码的摘要标签？如果是这样，则该复选框的内容无关紧要。

检查这里，并确保标签没有硬编码： ![在此处输入图像描述](../Images/de50f2f5666dc3bceea1509a0b62db9f.png)

# asp.net - 从模型类生成数据库

> ID：15271887
> 
> 赞同：0
> 
> 时间：2013-03-07T12:59:01.327
> 
> 标签：asp.net, webforms, ef-code-first

我正在用 c# 作为语言和 ms sql server express 在 asp.net 中做一个项目。到目前为止，我有四个模型类：

第一的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace WerIstWo.Models
{
    public class Benutzer
    {
        //Eigenschaften
        private int benutzerid, gruppenid, urlaubstageinsgesamt, urlaubstagegenommen, urlaubstagerest;
        private string titel, bezeichnung, vorname, nachname, geburtsdatum, geburtsort,
            nationalitaet, strasse, hausnummer, plz, ort, land, mobil, fax, festnetz, email,
            homepage, benutzerart, status, benutzername, passwort;      
        List<Gruppe> gruppen;

        //Properties
        public int BenutzerID
        {
            get { return this.benutzerid; }
            set { this.benutzerid = value; }
        }
        public int GruppenID
        {
            get { return this.gruppenid; }
            set { this.gruppenid = value; }
        }
        public int UrlaubstageInsgesamt
        {
            get { return this.urlaubstageinsgesamt; }
            set { this.urlaubstageinsgesamt = value; } 
        }
        public int UrlaubstageGenommen 
        {
            get { return this.urlaubstagegenommen; }
            set { this.urlaubstagegenommen = value; } 
        }
        public int UrlaubstageRest 
        {
            get { return this.urlaubstagerest; }
            set { this.urlaubstagerest = value; } 
        }
        public string Titel 
        {
            get { return this.titel; }
            set { this.titel = value; } 
        }
        public string Bezeichnung 
        {
            get { return this.bezeichnung; }
            set { this.bezeichnung = value; } 
        }
        public string Vorname 
        {
            get { return this.vorname; }
            set { this.vorname = value; } 
        }
        public string Nachname 
        {
            get { return this.nachname; }
            set { this.nachname = value; } 
        }
        public string Geburtsdatum 
        {
            get { return this.geburtsdatum; }
            set { this.geburtsdatum = value; } 
        }
        public string Geburtsort 
        {
            get { return this.geburtsort; }
            set { this.geburtsort = value; } 
        }
        public string Nationalitaet 
        {
            get { return this.nationalitaet; }
            set { this.nationalitaet = value; } 
        }
        public string Strasse 
        {
            get { return this.strasse; }
            set { this.strasse = value; } 
        }
        public string Hausnummer 
        {
            get { return this.hausnummer; }
            set { this.hausnummer = value; } 
        }
        public string PLZ 
        {
            get { return this.plz; }
            set { this.plz = value; } 
        }
        public string Ort 
        {
            get { return this.ort; }
            set { this.ort = value; } 
        }
        public string Land 
        {
            get { return this.land; }
            set { this.land = value; } 
        }
        public string Mobil 
        {
            get { return this.mobil; }
            set { this.mobil = value; } 
        }
        public string Fax 
        {
            get { return this.fax; }
            set { this.fax = value; } 
        }
        public string Festnetz 
        {
            get { return this.festnetz; }
            set { this.festnetz = value; } 
        }
        public string Email 
        {
            get { return this.email; }
            set { this.email = value; } 
        }
        public string HomePage 
        {
            get { return this.homepage; }
            set { this.homepage = value; } 
        }
        public string Benutzerart 
        {
            get { return this.benutzerart; }
            set { this.benutzerart = value; } 
        }
        public string Status 
        {
            get { return this.status; }
            set { this.status = value; } 
        }
        public string Benutzername 
        {
            get { return this.benutzername; }
            set { this.benutzername = value; } 
        }
        public string Passwort 
        {
            get { return this.passwort; }
            set { this.passwort = value; } 
        }

        //Konstruktor
        public Benutzer()
        { 

        }
    }
} 
```

第二：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace WerIstWo.Models
{
    public class Gruppe
    {
        //Eigenschaften
        private int gruppenid;
        private string bezeichnung;
        private int anzahlmitglieder;

        //Properties
        public int GruppenID 
        {
            get { return this.gruppenid; }
            set { this.gruppenid = value; } 
        }
        public string Bezeichnung
        {
            get { return this.bezeichnung; }
            set { this.bezeichnung = value; } 
        }
        public int AnzahlMitglieder 
        {
            get { return this.anzahlmitglieder; }
            set { this.anzahlmitglieder = value; } 
        }

        //Konstruktor
        public Gruppe()
        {

        }
    }
} 
```

第三：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace WerIstWo.Models
{
    public class Kalender
    {
        //Eigenschaften
        private int kalenderid;
        private int gruppenid;
        private int benutzerid;
        private string art;

        //Properties
        public int KalenderID 
        {
            get { return this.kalenderid; }
            set { this.kalenderid = value; } 
        }
        public int GruppenID 
        {
            get { return this.gruppenid; }
            set { this.kalenderid = value; } 
        }
        public int BenutzerID 
        {
            get { return this.benutzerid; }
            set { this.benutzerid = value; } 
        }
        public string Art 
        {
            get { return this.art; }
            set { this.art = value; } 
        }

        //Konstruktor
        public Kalender()
        {

        }
    }
} 
```

第四：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace WerIstWo.Models
{
    public class KalenderEintrag
    {
        //Eigenschaften
        private int kalendereintragid;
        private int kalenderid;
        private string art;
        private string datum;
        private string status;
        private string kommentar;

        //Properties
        public int KalendereintragID 
        {
            get { return this.kalendereintragid; }
            set { this.kalendereintragid = value; } 
        }
        public int KalenderID 
        {
            get { return this.kalenderid; }
            set { this.kalenderid = value; } 
        }
        public string Art 
        {
            get { return this.art; }
            set { this.art = value; } 
        }
        public string Datum 
        {
            get { return this.datum; }
            set { this.datum = value; } 
        }
        public string Status 
        {
            get { return this.status; }
            set { this.status = value; } 
        }
        public string Kommentar 
        {
            get { return this.kommentar; }
            set { this.kommentar = value; } 
        }

        //Konstruktor
        public KalenderEintrag()
        { 

        }
    }
} 
```

我阅读了这些教程以实现这一目标：

[http://webproject.scottgu.com/csharp/Data/Data.aspx](http://webproject.scottgu.com/csharp/Data/Data.aspx)
[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework -data-model-for-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

据我了解，我需要 4 个步骤来从模型类生成数据库：

创建模型
创建上下文类
创建初始化
程序运行应用程序->生成数据库

但是是否可以在没有初始化程序甚至没有上下文类的情况下做到这一点？我的想法是让 vs 仅基于我的四个模型类生成数据库？还是需要上下文和初始化类？

谢谢！

![在此处输入图像描述](../Images/7f1ba11f87b2551512f86aa9b5a35b8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:08:14.900

如果您使用脚手架，那么只要您没有任何多对多关系，就会生成所有内容。您可以查看此网站以阅读脚手架[http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)

# asp.net - 如何在 wcf 中使用 DataContractSerializer 反序列化嵌套的 xml？

> ID：15271889
> 
> 赞同：0
> 
> 时间：2013-03-07T12:59:07.983
> 
> 标签：asp.net, wcf, xml-deserialization

如何在 wcf 中使用 DataContractSerializer 反序列化嵌套的 xml？示例 xml 是；

```
<smsPaidPhoneBookSearchResponse xmlns="http://callturksvc.alfion.com.tr">
    <webServiceResponseType>SUCCESS</webServiceResponseType>
    <clientQueryId>112628650000001078</clientQueryId>
    <phoneBookList>
        <phoneBook>
            <cityName>İstanbul</cityName>
            <districtName>Beşiktaş</districtName>
            <firstName>Şuayp</firstName>
            <lastModifiedDateTime>2013-03-06T16:05:59.508+02:00</lastModifiedDateTime>
            <lastName>Çiçek</lastName>
            <phoneBookTypeEnumValue>TURKCELL</phoneBookTypeEnumValue>
            <phoneNumberText>535357****</phoneNumberText>
        </phoneBook>
        <phoneBook>
            <cityName>İstanbul</cityName>
            <districtName>Beşiktaş</districtName>
            <firstName>Şuayp</firstName>
            <lastModifiedDateTime>2013-03-06T16:05:59.510+02:00</lastModifiedDateTime>
            <lastName>Çiçek</lastName>
            <phoneBookTypeEnumValue>TURKCELL</phoneBookTypeEnumValue>
            <phoneNumberText>535957****</phoneNumberText>
        </phoneBook>
    </phoneBookList>
</smsPaidPhoneBookSearchResponse> 
```

我成功地获得了这些值（webServiceResponseType，clientQueryId），但我无法将 phoneBookList 作为 phoneBook 类的通用列表。例如：`List<phoneBook>`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:47:05.780

一个简单的查找方法是在 C# 中创建一个类似的结构，然后将其序列化。这样你就会知道 xml 中有什么问题。根据我的经验，您是否在合同中将 phoneBookList 标记为 Array，然后使用正确的名称将 PhoneBook 标记为 Array Element？

# actionscript-3 - TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 naj_fla::MainTimeline/runMan()

> ID：15271891
> 
> 赞同：-1
> 
> 时间：2013-03-07T12:59:15.657
> 
> 标签：actionscript-3, typeerror, movieclip, flash-cs6, timeline

我知道很多人都问过同样的问题，但我想尽一切办法解决它，我不知道还能做什么。我了解当对象在时间轴中不再可用时调用对象时会出现此错误。我尝试将 AS3 代码放在单独的层中，并且由于该对象仅在帧 (1) 中可用，我只将动作脚本代码放在帧 (1) 中，但它在到达帧 (2) 时仍然显示相同的错误消息.

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 naj_fla::MainTimeline/runMan()

```
stop();
addEventListener(Event.ENTER_FRAME, runMan);

function runMan(e:Event):void {
    if (Loading_mc.currentFrame==Loading_mc.totalFrames) {
        gotoAndPlay(2);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:09:48.983

转到第二帧后，您的侦听器仍在触发，因此请先尝试将其删除：

```
stop();
addEventListener(Event.ENTER_FRAME, runMan);

function runMan(e:Event):void {
    if (Loading_mc.currentFrame==Loading_mc.totalFrames) {
        removeEventListener(Event.ENTER_FRAME, runMan);
        gotoAndPlay(2);
    }
} 
```

# asp.net - ASP 创建对象时没有此类接口支持错误

> ID：15271899
> 
> 赞同：9
> 
> 时间：2013-03-07T12:59:59.543
> 
> 标签：asp.net, vb.net, iis, dll, ocx

我有一个具有第三方 ocx 控件的 Windows 窗体应用程序。以下命令用于在运行时创建对象。

```
myObject = myApplication.CreateObject("ML.MFinder", True) 
```

这工作正常，progID 也是正确的。问题是在 asp 项目中执行相同操作时出现以下错误：

> ```
> System.Runtime.InteropServices.COMException: No such interface supported 
> ```
> 
> 在 ML.MApplicationClass.CreateObject（字符串 ProgID，布尔分配）

奇怪，因为其他 ocx 对象也可以在 asp 项目上正常工作。我正在使用 IIS 5.1、Windows XP Pro SP3 和框架 3.5。我也手动注册了ocx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:18:14.017

在 IIS 下，您没有相同的规则来访问外部文件或 dll。我认为使用 OCX 文件，IIS 可能会更加严格。

我不认为问题是参考或类似的东西。如您所说，您已经注册了OCX，但是这个OCX是否也有一些依赖？他们也需要正确注册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:59:49.853

这个 ocx 控件是否需要对文件系统进行任何特定的读写访问？如果是这样，那么您需要在文件系统级别授予权限：IUSR_XXXXX = READ + EXECUTE。

您还应该使用 Dependency Walker 工具检查是否缺少任何依赖项。

您是否在异常中获得任何类 ID？如果是这样，请检查该 classid 是否存在于注册表中。

# javascript - 如何在淘汰赛js中访问'foreach：'绑定的大小>

> ID：15271906
> 
> 赞同：8
> 
> 时间：2013-03-07T13:00:20.743
> 
> 标签：javascript, jquery, knockout.js

在此文档中：http: [//knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)迭代是使用“foreach”绑定实现的：

```
<tbody data-bind="foreach: people"> 
```

是否可以通过 javascript/jquery 访问此绑定的大小？

就像是 ：`alert('People size is '+people.size);`

我需要访问大小才能进行简单的验证检查。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T13:41:14.050

你的意思是在 foreach 本身内？您可以在循环中调用父级，然后再次访问可观察数组：

```
$parent.people().length 
```

或者在您绑定视图模型的任何地方，您都可以调用：

```
people().length 
```

或者，您可以将计算的 observable 添加到您的视图模型。在您的视图模型代码中，将其分配给名为 self 的 var，然后：

```
var peopleCount = ko.computed(function()
{
    return self.people().length;
} 
```

# python - Python mySQL 更新，工作但不更新表

> ID：15271907
> 
> 赞同：39
> 
> 时间：2013-03-07T13:00:22.477
> 
> 标签：python, mysql, sql-update, mysql-connector-python

我有一个需要更新 mysql 数据库的 python 脚本，到目前为止：

```
dbb = MySQLdb.connect(host="localhost", 
       user="user", 
       passwd="pass", 
       db="database") 
try:
   curb = dbb.cursor()
   curb.execute ("UPDATE RadioGroups SET CurrentState=1 WHERE RadioID=11")
   print "Row(s) were updated :" +  str(curb.rowcount)
   curb.close()
except MySQLdb.Error, e:
   print "query failed<br/>"
   print e 
```

该脚本`Row(s) were updated :`以正确的行数打印，其中 a`RadioID`为 11。如果我将 更改为`RadioID`表中不存在的另一个数字，它将显示`Row(s) were updated :0`。但是数据库实际上并没有更新。`CurrentState`字段保持不变。如果我将 SQL 语句复制并粘贴到 PHPMyAdmin 中，它可以正常工作。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-07T13:03:34.047

采用

```
dbb.commit() 
```

后

`curb.execute ("UPDATE RadioGroups SET CurrentState=1 WHERE RadioID=11")`

将您“加载”到 mysql 服务器的所有更改提交

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-06-14T04:48:10.107

正如@Lazykiddy 指出的那样，您必须在将更改加载到 mysql 后提交更改。

您也可以在 MySQL 连接初始化之后使用这种方法来启用自动提交设置：

```
dbb.autocommit(True) 
```

然后，它将自动提交您在代码执行期间所做的更改。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-12-26T09:29:06.240

两个答案都是正确的。但是，您也可以这样做：

```
dbb = MySQLdb.connect(host="localhost", 
   user="user", 
   passwd="pass", 
   db="database",
   autocommit=True) 
```

添加**自动提交=真**

# ios - iOS 初始化细节视图控制器

> ID：15271908
> 
> 赞同：0
> 
> 时间：2013-03-07T13:00:24.897
> 
> 标签：ios, initialization, viewcontroller

设置“详细”视图控制器的最佳方法是什么？假设我有一个带有 UILabel 的非常简单的 DetailViewController。它有一个 API（这是演示这个概念的伪代码）：

```
UpdateLabel(string text)
{
  this.label.text=text;
} 
```

所以在父 ViewController 中，我有：

```
PrepareForSegue(UIStoryboardSegue segue, NSObject sender)
{
  base.PrepareForSegue(segue, sender);
  DetaiViewController.UpdateLabel("Hello");
} 
```

但是，由于 ViewDidLoad 尚未被调用，因此在详细视图控制器中“标签”为空，因此崩溃。我知道这可以通过在 UpdateLabel 中添加一些类似的东西来解决

```
UpdateLabel(string text)
{
  this.View.Hidden=this.View.Hidden; // To force view to load
  this.label.text=text;
} 
```

但这似乎很hacky。

或者，我可以将 UpdateLabel 更改为仅存储字符串：

```
UpdateLabel(string text)
{
   this.textString.text=text;
} 
```

然后在 ViewDidLoad 中初始化标签：

```
public override void ViewDidLoad() 
{
   base.ViewDidLoad();
   this.label.text=this.textString;
} 
```

但是如果我希望父控制器稍后修改标签怎么办？调用 UpdateLabel 只会更新 textString 变量并且不会更改标签。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:03:19.200

1.  你传递文本，存储它，`init`然后更新.`UIViewController``viewDidLoad``UILabel`
2.  然后，您可以`UILabel`通过将其公开给其他类（例如作为属性）来更新 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T18:30:53.660

您可以让详细视图控制器在即将显示时更新其视图。

如果详细视图不是由 segue 的结果显示的，例如当您使用选项卡栏时，并且未调用 viewDidLoad，则可以使父控制器成为详细视图控制器的委托，并在 viewWillAppear 上调用更新详细视图控制器的委托方法。之后，详细视图控制器更新其视图/子视图。

这样，您就有机会让父控制器进行更改。

不知道这对你来说是不是最好的选择......

# c# - 枚举 Active Directory 组成员（嵌套），包括域用户（主组）

> ID：15271909
> 
> 赞同：3
> 
> 时间：2013-03-07T13:00:28.017
> 
> 标签：c#, .net, active-directory

目前，我使用 groupprincipal-class (.NET 3.5) 的 GetMembers 方法（使用**true**）来枚举组的所有成员（包括嵌套组）。

如果在子组中主域组（域用户）是成员，我无法正确枚举所有成员。提到的方法没有枚举 Domain-Users 组。

有什么想法可以避免这个问题吗？我需要一个快速的算法。因此，单独枚举每个组/子组并不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T20:08:03.500

我正在使用 System.DirectoryServices 发送 LDAP 查询。

它很快；我用它来查询 ~100k 用户，它需要 ~20-30 秒。（虽然在外部域上，如果我在本地域上会更快）

这是我的做法：

```
DirectoryEntry DE = new DirectoryEntry("LDAP://OU=ou_to_search_recursively", user, password);
using (DirectorySearcher DSE = new DirectorySearcher(DE))
{
    DSE.PageSize = 1000;
    //get only users
    DSE.Filter = "(&(objectClass=user)(objectCategory=person))";
    //search recursively
    DSE.SearchScope = SearchScope.Subtree;
    //load the properties that you want
    DSE.PropertiesToLoad.Clear();
    DSE.PropertiesToLoad.Add("distinguishedName");
    DSE.PropertiesToLoad.Add("cn");
    DSE.PropertiesToLoad.Add("other_attribute_you_might_want");

    foreach (SearchResult u in DSE.FindAll())
    {
        //check if property exists
        if (u.Properties.Contains("distinguishedName")) {
            // access property: 
            string dn = u.Properties["distinguishedName"][0].ToString();
        }
        //...
    }
} 
```

我希望它有所帮助。

# javascript - JavaScript 中 prompt() 的替代方法

> ID：15271911
> 
> 赞同：1
> 
> 时间：2013-03-07T13:00:34.660
> 
> 标签：javascript, jquery, html, input

这是场景。我有一些可以即时生成的 JavaScript 代码。所以，我没有使用`prompt()`打开一个输入框来读取用户输入，而是制作了一个自定义元素。因为我可以设置自定义输入框的样式，而不是使用普通输入框。

因此，显示自定义输入框的功能类似于，`show_input()`

并且这个动态生成的代码在最后使用`eval()`. 所以在代码中，在调用该`show_input()`函数之后，程序应该等到用户输入值并按下按钮（我定制的输入表单中的按钮）。并且在生成的代码中会多次调用这个函数。

我不确定如何找到解决方案。也就是说，让它的行为就像`prompt()`停止整个代码的执行一样。

我尝试过的是，在我们的自定义输入框中使用一个布尔标志，当用户输入值并按下按钮时会设置该标志。因此，当`show_input()`调用 my 时，它会显示自定义输入框，然后进入一个无限循环，该循环仅在设置此布尔标志时才会停止。但这会冻结网页，使其没有响应。所以，这不是一个很好的解决方案。

有什么方法可以模仿该功能的`prompt()`工作原理。我的意思是，暂停整个页面，直到用户按下按钮？

`setTimeout()`在我的情况下，函数不是一个好的选择。因为原因是，我生成的代码看起来像这样：

```
statement1;
statement2;

show_input(); //call the function to show my custom inputbox

statement3;

show_input();

statement4;
statement5;
// etc... 
```

因此，在 之后`statement2`，函数调用用于显示自定义输入框，要求用户输入值并按下按钮。只有在按下此按钮后，它才应该转到`statement3`。到那时，它应该等待用户按下我的自定义输入框中的按钮。

我正在使用 jQuery，并且该按钮添加了一个单击事件。

以上代码在运行时生成，使用`eval()`

任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:15:03.677

javascript 的执行模型不允许您尝试实现的目标，因为无法“阻止”执行等待来自 DOM 的输入的脚本。就像您在循环尝试中指出的那样，页面被冻结，直到脚本结束运行，然后才恢复正常的事件处理。

因此，请创建一个回调函数，其中包含您希望在用户输入后执行的语句，并让您的输入系统调用它。例子：

```
// statement 1 and 2 here

var callback = function(value) {
    // statement 3 here
}

show_input(callback); 
```

然后在 show_input 内部将用户确认绑定到一个检索该值的函数，然后使用该值调用给它的回调函数。示例（为简洁起见，使用 jquery 语法，但这并不是绝对必要的）：

```
function show_input(callback) {
   // create the input form
   $(confirm_button).click(function() {
      callback($(input).value());
   }); 
```

这当然可以根据需要嵌套到任何级别。嵌套时，如果重用现有的小部件（而不是创建新的小部件），则必须注意在绑定新的之前未绑定先前的回调事件 - 如果需要，您还可以保留对事件处理程序的引用以将其删除明确地，但在大多数情况下，取消绑定所有事件就足够了。

看一个例子小提琴：http: [//jsfiddle.net/YTcy8/](http://jsfiddle.net/YTcy8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:05:14.230

我发现您的场景难以遵循，但假设您面临的困难是将用户交互绑定到生成的代码。为了尝试更清楚地了解您面临的问题，以下方法会起作用吗？如果不是，为什么不呢？

```
$('#thebutton').on('click', statement3); 
```

[这是对整个事物的抽象的一个小技巧](http://jsfiddle.net/barney/HkARv/)——如果您想扩展或更正它，请使用 fork 按钮创建您自己的修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:07:02.850

您需要检测输入框按钮上的点击事件。您可以使用`onclick`触发一个功能来检测用户是否填写了输入，如果输入已填写，那么您继续执行您想要的操作。您还可以使用[覆盖框](http://jquerytools.org/demos/overlay/index.html)来放置输入和按钮

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:16:14.370

我们有类似的情况，我们不得不停止执行用户输入的脚本，在搜索了将近 2 3 个月后我们找不到任何解决方案。在那之后我们放弃了这个想法，因为它不可能做到这一点。

但是我们采取的方法如下

```
statement 1
statement 2
showInput(function() { 
    statement3;
    showInput( function() {
               statement4;
               statement5;
             })   
       }) 
```

除了这个，我没有任何解决你的问题的方法。如果您找到除此之外的解决方案，请提供相同的解决方案。我发现很多人在相同的情况下被阻止

# c - 在液晶显示器上显示时，例如：在 36.7 之后，下一个数字是 37。我不知道为什么 36.8 和 36.9 被四舍五入

> ID：15271917
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:00:49.527
> 
> 标签：c, embedded, lcd

代码说明：将浮点数转换为 ascii 以显示在触摸屏上的代码。

它在 0.7 之后四舍五入，即它不显示 0.8 和 0.9 。我已经尝试了很多调试但我无法解决这个问题。我认为问题出在开关盒上。我该如何调试？

编码：

```
void ftoa(float Value, char* Buffer) //begin
 { 

 union 
  { 
     float f; 

     struct 
     { 
         unsigned int    mantissa_lo : 16; //initialise
         unsigned int    mantissa_hi : 7;     
         unsigned int     exponent : 8; 
         unsigned int     sign : 1; 
     }; 
  } helper; 

  unsigned long mantissa; 
  signed char exponent; 
  unsigned int int_part; 
  char frac_part[3]; 
  int i, count = 0; 
 int rz;

 rz=16;

   helper.f = Value; 

  mantissa = helper.mantissa_lo; //mantissa is LS 23 bits 
mantissa = helper.f;
  mantissa += ((unsigned long) helper.mantissa_hi << 16); 

  mantissa += 0x00800000; //add the 24th bit to get 1.mmmm^eeee format 
  //exponent is biased by 127 
  exponent = (signed char) helper.exponent - 127; 
  exponent = 3;

  if (exponent > 18) //too big to shove into 8 chars 
  { 
     Buffer[0] = 'I'; 
     Buffer[1] = 'n'; 
     Buffer[2] = 'f'; 
     Buffer[3] = '\0'; 
     return; 
  } 

  if (exponent < -3) //too small to resolve (resolution of 1/8) 
  { 
     Buffer[0] = '0'; 
     Buffer[1] = '\0'; 
     return; 
  } 

  count = 0; 

   //add negative sign (if applicable) 
//  if (helper.sign) 
//    { 
//        Buffer[0] = '-'; 
//      count++; 
// } 

 //get the integer part 
 int_part = mantissa >> (23 - exponent);     
 //convert to string 
 itoa(int_part,rz, &Buffer[count]); 

 //find the end of the integer 
 for (i = 0; i < 7; i++) 
     if (Buffer[i] == '\0') 
     { 
         count = i; 
         break; 
     } 

 if (count > 6) //not enough room in the buffer for the frac part 
     return; 

 //add the decimal point     
  Buffer[count++] = '.'; 

  //use switch to resolve the fractional part 
  switch (0x00000007 & (mantissa  >> (20 - exponent))) //for the fractional part.
  { 
     case 0: 
         frac_part[0] = '0'; 
   //      frac_part[1] = '0'; 
   //      frac_part[2] = '0'; 
         break; 
     case 1: 
         frac_part[0] = '1'; 
        // frac_part[1] = '2'; 
        // frac_part[2] = '5';             
         break; 
     case 2: 
         frac_part[0] = '2'; 
        // frac_part[1] = '5'; 
        // frac_part[2] = '0';             
         break; 
     case 3: 
         frac_part[0] = '3'; 
        // frac_part[1] = '7'; 
        // frac_part[2] = '5';             
         break; 
     case 4: 
         frac_part[0] = '4'; 
        // frac_part[1] = '0'; 
        // frac_part[2] = '0';             
         break; 
     case 5: 
         frac_part[0] = '5'; 
        // frac_part[1] = '2'; 
        // frac_part[2] = '5';             
         break; 
     case 6: 
         frac_part[0] = '6'; 
        // frac_part[1] = '5'; 
         //frac_part[2] = '0';             
         break; 
     case 7: 
         frac_part[0] = '7'; 
       //  frac_part[1] = '7'; 
       //  frac_part[2] = '5';                     
         break; 

     case 8: 
         frac_part[0] = '8';   //switch case
       //  frac_part[1] = '7'; 
       //  frac_part[2] = '5';                     
         break; 
     case 9: 
         frac_part[0] = '9'; 
       //  frac_part[1] = '7'; 
       //  frac_part[2] = '5';                     
         break;
    default :
          frac_part[0] = '8';
          break;

  } 

  //add the fractional part to the output string 
  for (i = 0; i < 3; i++) 
     if (count < 7) 
         Buffer[count++] = frac_part[i]; 

  //make sure the output is terminated 
  Buffer[count] = '\0'; 

 for ( i=0; i < 19; i++ )
 {
     cArr[i] = Buffer[i];
 }   

    }

         //It rounds of decimals after 0.7 , i.e. it does not display 0.8 and 0.9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:20:29.117

This looks a bit over complicated, but one obvious thing is:

```
switch (0x00000007 & ... 
```

That's never going to give you any switch cases of 8 or above.

And I don't know how you expect to extract a base-10 fraction, using shifts and masks. You probably want a multiply by 10 in there somewhere.

# jquery - jQuery Cycle 2 的可变幻灯片超时

> ID：15271918
> 
> 赞同：5
> 
> 时间：2013-03-07T13:00:51.930
> 
> 标签：jquery, jquery-cycle

我正在尝试设置幻灯片以使用数据属性来设置每张幻灯片的超时。这适用于 jQuery Cycle，但不适用于**[jQuery Cycle 2](http://www.malsup.com/jquery/cycle2/)**。我想我可能使用了错误的功能，但在 Cycle 2 文档中没有找到类似的东西？

HTML：

```
<div id="slides">
    <img src="img1.jpg" data-duration="1000" />
    <img src="img2.jpg" data-duration="2000" />
    <img src="img3.jpg" data-duration="3000" />
</div> 
```

JS：

```
$('#slides').cycle({
    fx: 'fadeout',
    speed: 250,
    timeoutFn: function(currElement, nextElement, opts, isForward) { 
        return parseInt($(currElement).attr('data-duration'), 10);
    }
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T16:36:27.983

Cycle2 直接支持这一点。在幻灯片上使用`data-cycle-timeout`属性而不是`data-duration`.

# windows-phone-8 - 如何获取录制视频的缩略图 - windows phone 8？

> ID：15271922
> 
> 赞同：1
> 
> 时间：2013-03-07T13:00:59.233
> 
> 标签：windows-phone-8, thumbnails, video-capture

我曾经`CaptureSource()`在此主题[中录制视频，如如何在 Windows Phone 的相机应用程序中录制视频](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394041%28v=vs.105%29.aspx)，但我无法获得录制视频的缩略图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T00:25:49.817

这是解决方案：

[...]

```
// Add eventhandlers for captureSource.
captureSource.CaptureFailed += new EventHandler<ExceptionRoutedEventArgs>(OnCaptureFailed);
captureSource.CaptureImageCompleted += captureSource_CaptureImageCompleted; 
```

[...]

```
captureSource.Start();
captureSource.CaptureImageAsync(); 
```

[...]

```
void captureSource_CaptureImageCompleted(object sender, CaptureImageCompletedEventArgs e)
{
 using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
  {
    System.Windows.Media.Imaging.WriteableBitmap wb = e.Result;

     string fileName = "CameraMovie.jpg";
     if (isoStore.FileExists(fileName))
         isoStore.DeleteFile(fileName); 

     IsolatedStorageFileStream file = isoStore.CreateFile(fileName);

     System.Windows.Media.Imaging.Extensions.SaveJpeg(wb, file, wb.PixelWidth, wb.PixelHeight, 0, 85);

     file.Close();
 }
} 
```

**更新：让用户可以在需要时获取缩略图**

将 Tap 事件添加到`viewfinderRectangle`

```
<Rectangle 
    x:Name="viewfinderRectangle"
    [...]
    Tap="viewfinderRectangle_Tap" /> 
```

调用`captureSource.CaptureImageAsync();`该 Tap 事件

```
private void viewfinderRectangle_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
 captureSource.CaptureImageAsync();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T05:05:48.593

你可以试试这个。如果您使用的是 AudioVideoCaptureDevice api。在每帧捕获后调用以下事件。您可以选择任何您需要的框架。作为第一个。

```
private AudioVideoCaptureDevice VideoRecordingDevice;
VideoRecordingDevice.PreviewFrameAvailable += previewThumbnail;
bool DisablePreviewFrame = false;

private void previewThumbnail(ICameraCaptureDevice a, object b)
{
    if (!DisablePreviewFrame)
    {
        DisablePreviewFrame = true;
        int frameWidth = (int)VideoRecordingDevice.PreviewResolution.Width;
        int frameHeight = (int)VideoRecordingDevice.PreviewResolution.Height;
    }
    int[] buf = new int[frameWidth * frameHeight];
    VideoRecordingDevice.GetPreviewBufferArgb(buf);
    using (IsolatedStorageFile isoStoreFile = IsolatedStorageFile.GetUserStoreForApplication())
    {
        var fileName = "temp.jpg";

        if (isoStoreFile.FileExists(fileName))
            isoStoreFile.DeleteFile(fileName);
        using (IsolatedStorageFileStream isostream = isoStoreFile.CreateFile(fileName))
        {
            WriteableBitmap wb = new WriteableBitmap(frameWidth, frameWidth);
            Array.Copy(buf, wb.Pixels, buf.Length);
            wb.SaveJpeg(isostream, 120, 120, 0, 60);
            isostream.Close();
        }
    }
} 
```

# jsp - 渲染字节数组图像列表

> ID：15271924
> 
> 赞同：1
> 
> 时间：2013-03-07T13:01:12.803
> 
> 标签：jsp, servlets

我有字节数组图像列表列表，我在 servlet 的一个请求中检索了这些列表，现在我的问题是我想在我的 jsp 页面中一一呈现它，我想知道该怎么做，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:28:58.770

如果您的图像很小，您可以使用库对每个图像使用 base64 编码。[Apache Commons Base64](http://commons.apache.org/proper/commons-codec//apidocs/org/apache/commons/codec/binary/Base64.html)。对每个图像进行编码后，您可以只返回所有编码字符串的列表，并在 JSP 中显示。

# c# - Linq 通过选择查询获取变量中的值

> ID：15271925
> 
> 赞同：0
> 
> 时间：2013-03-07T13:01:16.390
> 
> 标签：c#, .net, linq, sql-server-2005

通过谷歌搜索，我进行了以下选择查询以获取列 ID 的最大值。

```
 var result = (from rs in db.tradeFiles

                             select (rs.ID)).Max(); 
```

请让我知道这是为获取列 ID 的最大值而编写的查询。

为了从变量中取出数据，我以以下方式使用了 foreach 循环，这也不起作用。

```
foreach(var item in result)
           {

           } 
```

请让我知道什么是错误以及从选择查询中提取数据的正确方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:02:43.010

结果是值本身，只需使用它，无需对其进行迭代。例如，如果`rs.ID`列是`int`，那么结果将是`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:03:39.937

`Enumerable.Max`无法枚举，它返回您要查找的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:15:15.327

结果，您将获得一个 int 值。因为您正在获取该列的最大值。它会给出一个结果。如果你想获取一些特定的 id 值，你只需设置一个 where 条件并选择那个值。比如

```
(from rs in db.tradeFiles
where rs.id==1
select (rs.Name)); something like this.. 
```

# codeigniter - Codeigniter - Uploadify：显示 HTTP 错误

> ID：15271927
> 
> 赞同：0
> 
> 时间：2013-03-07T13:01:24.357
> 
> 标签：codeigniter, uploadify

我正在使用 Codeigniter 并想使用“Uploadify”上传 CSV 文件。实际上它以前可以工作，但现在显示“HTTP 错误”。下面我给出我的代码：

看法：

```
<input id="upload_csv" name="upload_csv" type="file" />
<a href="javascript:$('#upload_csv').uploadifyUpload();" class="btn large primary">Upload</a> 
```

uploadify.php 代码如下：

```
function filemanipulation_csv($extension, $filename) {
        if ($this->is_image($extension)) {
            $config['image_library'] = 'gd2';
            $config['source_image'] = base_url() . 'csv/' . $filename;
            $config['create_thumb'] = TRUE;
            $config['maintain_ratio'] = TRUE;
            $config['thumb_marker'] = '';
            $config['width'] = 100;
            $config['height'] = 100;
            $this->load->library('image_lib', $config);
            $this->image_lib->resize();
            echo 'image';
            exit;
        }
        else
            echo 'file';
    } 
```

我的 vortex.js 包含：

```
var base_url = $('#hiddenBaseUrl_photo_audio').val();
    var uploadfolder = $('#csv_upload_folder').val();  
    $('#upload_csv').uploadify({     
        'uploader'  : base_url + 'asset/flash/uploadify/uploadify.swf',
        'script'    : base_url + 'index.php/uploadify/uploadifyUploader/',
        'cancelImg' : base_url + 'asset/images/cancel.png',
        'folder'    : uploadfolder,
        'fileExt'     : '*.mp3;',
        'data' :  base_url +'fileObj.name',
        'auto'      : false,
        'multi'     : false,
        'onComplete'  : function(event, ID, fileObj, response, data) {
         var validExtensions = ['mp3']; //array of valid extensions
            var fileName = $("#csvfile").val();
            var fileNameExt = fileName.substr(fileName.lastIndexOf('.') + 1);    
            if ($.inArray(fileNameExt, validExtensions) == -1){
                alert("Invalid file type. Please upload only mp3 files.");
                $("#yourElem").uploadifyCancel(q);
                return false;
            }
            else{
                $.ajax({
                    url : base_url + 'index.php/uploadify/filemanipulation_csv/' + fileObj.type +'/' + fileObj.name,
                    success : function(response){
                        if(response == 'image')
                        { 
                            var images = $('<img src="'+base_url + 'csv/' +fileObj.name+'" alt=""/>');
                            $(images).hide().insertBefore('#displayFiles_pdf').slideDown('slow')
                        }
                        else 
                        {
                            var images = $('<img class="uploaded_images pull-left" src="'+base_url + 'uploads/' +fileObj.name+'" alt=""/>');
                            $(images).hide().insertBefore('#displayFiles_pdf').slideDown('slow')
                        }
                    }
                }); 
            }
            var counter = 0;
            if($("#uploaded_files_names_photo_audio").val().length == 0) {
                images_name=fileObj.name;
                $('#uploaded_files_names_photo_audio').val(images_name);
            }
            else {
                images_name=$("#uploaded_files_names_photo_audio").val()+''+","+fileObj.name;
            }
            $("#uploaded_files_names_photo_audio").val(images_name);
            images_name= '';

        }
    }); 
```

我尝试在 vortex.js 中提醒一些随机文本，并在 uploadify.php 中回显。但是，它显示“HTTP”错误。请让我知道我应该尝试什么，哪个会起作用？提前致谢...

# jquery - Jquery当FadeIn（）它闪烁的对象时，Ipad safari

> ID：15271930
> 
> 赞同：2
> 
> 时间：2013-03-07T13:01:37.280
> 
> 标签：jquery, css, ipad

我正在做一个网站介绍，滑动照片和文本等。除了在 Ipad Safari 浏览器上，一切都运行良好，每个 FadeIn() 都像对象闪烁一样，它首先完全可见，然后闪烁，然后淡入这是我的演示[http://benseno.com.tr/demo/viz/](http://benseno.com.tr/demo/viz/)

我的CSS是：

```
.slide_p {
    -webkit-backface-visibility: hidden;
    display:none;
    left: 50%;
    top: 50%;
    position: absolute;
    background-size: 100% 100%;
    background-position: 0px 0px;
    background-repeat: no-repeat;
} 
```

和 div 之一：

```
<div id="slide3" class="slide_p"
            style="width: 1100px; height: 763px; background-image: url('images/s_03.png'); margin-left: -550px; margin-top: -381px;">
        </div> 
```

并且 JQuery 是安静的基本和直截了当的东西，如下所示：

```
$("#slide3").fadeIn(2000); 
```

这开始让我发疯，有什么解决这个问题的建议吗？顺便说一句，不要尝试 Ipad 模拟器，它只在我真正的 Ipad 上这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T13:34:16.770

使用`fadeTo(2000,1);`而`fadeIn(2000);`不是解决了我的问题。

# http - 暴露 mule http 入站端点

> ID：15271933
> 
> 赞同：0
> 
> 时间：2013-03-07T13:01:43.780
> 
> 标签：http, mule

我无法在 CentOS 服务器上公开 http 端点/地址。最令人困惑的部分是我们能够将其他端点公开为 ajax 等，这些端点位于 mule 安装示例包中。我也无法公开这个简单的回声流。我什至尝试了另一种方法，即为端点显式定义一个 http 连接器以引用.. 仍然无法正常工作。我真的无法理解出了什么问题......在我成功将应用程序部署到 mule 服务器后，这个帖子 9002 甚至没有出现在 netstat 中......

这是代码：

```
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:http="http://www.mulesoft.org/schema/mule/http"
xsi:schemalocation="
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.2/mule.xsd
    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/3.2/mule-http.xsd"> 

<description>
    Sample Flows
</description>

<flow name="echo-flow">
    <http:inbound-endpoint address="http://0.0.0.0:9002/echo" />
    <echo-component />
</flow> 
```

并且在 pom.xml 下方使用，尽管此示例应用程序不需要其中的所有传输和模块，但在我的原始应用程序中使用它们，因此与此使用相同。

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>mule.user</groupId>
  <artifactId>valexIntegration-esb</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>mule</packaging>

  <name>Self-Contained Standalone Mule Hello World</name>
  <description>The sources for this application were copied from Mule distributable</description>

  <properties>
    <mule.version>3.3.0</mule.version>
  </properties>

  <build>
  <plugins>
            <plugin>
                <groupId>org.mule.tools</groupId>
                <artifactId>maven-mule-plugin</artifactId>
                <version>1.7</version>
                <extensions>true</extensions>
            </plugin>
  </plugins>
    <resources>
      <resource>
        <directory>src/main/app</directory>
      </resource>
      <resource>
        <directory>src/main/resources</directory>
      </resource>
    </resources>
  </build>

  <dependencies>
    <dependency>
      <groupId>org.codehaus.groovy</groupId>
      <artifactId>groovy-all</artifactId>
      <version>1.8.1</version>
    </dependency>

    <dependency>
      <groupId>org.mule</groupId>
      <artifactId>mule-core</artifactId>
      <version>${mule.version}</version>
    </dependency>

    <dependency>
      <groupId>org.mule</groupId>
      <artifactId>mule-core</artifactId>
      <version>${mule.version}</version>
      <scope>test</scope>
      <type>test-jar</type>
    </dependency>

    <dependency>
      <groupId>org.mule.modules</groupId>
      <artifactId>mule-module-builders</artifactId>
      <version>${mule.version}</version>
    </dependency>

    <dependency>
      <groupId>org.mule.modules</groupId>
      <artifactId>mule-module-scripting</artifactId>
      <version>${mule.version}</version>
    </dependency>

    <dependency>
      <groupId>org.mule.transports</groupId>
      <artifactId>mule-transport-vm</artifactId>
      <version>${mule.version}</version>
    </dependency>

    <dependency>
      <groupId>org.mule.transports</groupId>
      <artifactId>mule-transport-http</artifactId>
      <version>${mule.version}</version>
    </dependency>

    <dependency>
      <groupId>org.mule.transports</groupId>
      <artifactId>mule-transport-servlet</artifactId>
      <version>${mule.version}</version>
    </dependency>

    <dependency>
      <groupId>org.mule.transports</groupId>
      <artifactId>mule-transport-stdio</artifactId>
      <version>${mule.version}</version>
    </dependency>

    <dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.9</version>
    </dependency>
  </dependencies>

  <repositories>
    <repository>
      <id>mule-deps</id>
      <name>Mule Dependencies</name>
      <url>http://dist.codehaus.org/mule/dependencies/maven2</url>
    </repository>
  </repositories>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:40:15.967

似乎问题不在于流程配置，甚至不在于 mule 本身。我建议您在操作系统领域寻找线索，例如：

1.  端口 9002 在服务器的所有网络接口中都可用吗？由于您尝试将其绑定到 0.0.0.0 地址，因此它将尝试将它们绑定到所有接口。

2.  mule启动日志中是否有错误？还是开始正常？

3.  如果没有错误，您可以从服务器内部访问该地址吗？不仅是 127.0.0.1:9002，还有所有其他可能的网络接口（以及它们各自的 IP 地址）。

4.  如果您可以从机器内部访问，但不能从外部访问（或者即使您无法从内部访问），您是否检查过此服务器中是否有某些防火墙规则或某些端口阻塞或其他一些安全措施? 不仅要考虑内核和内部规则，还要考虑路由器或防火墙中的网络规则。

请向我们提供 mule 启动日志，以便我们了解更多可能发生的事情的线索。

# javascript - dojo 增强网格未正确显示

> ID：15271934
> 
> 赞同：0
> 
> 时间：2013-03-07T13:01:46.953
> 
> 标签：javascript, grid, dojo

// dojo 网格未完全显示.... // 仅显示页眉和页脚，但不显示内容.... // 我无法发布图像 // 这是代码 */ //请帮助我尽快

```
<html>
<head>
<link href="DC_OrderReceipts.css" rel="stylesheet" type="text/css" />
    <style type="text/css">@import "../js/dojo/resources/dojo.css";
@import "../js/dijit/themes/claro/claro.css";
@import "../js/dojox/grid/enhanced/resources/claro/EnhancedGrid.css";
@import "../js/dojox/grid/enhanced/resources/EnhancedGrid_rtl.css";

/*Grid need a explicit width/height by default*/
#grid {
    width: 76em;
    height: 20em;
}</style>
<script src='../js/dojo/dojo.js'></script>

<script type="text/javascript">
$('a.orderReceiptsHead').click(function(e) {
    e.preventDefault();
    var href = $(this).attr('href');
      $(".tab_container #Dashboard").hide("");
    $(".tab_container #OrderHeader").load(href);
    //$(".orderHead").fadeIn("fast"); 
    //$('.orderHead a:hover').css('text-decoration','none');
});
</script>
<script type="text/javascript">
var prevRow = null;
function toggle(it) {

  if (it.className.substring(0, 3) == "sel")
    {it.className = it.className.substring(3, 6);
     prevRow = null;}
  else
    {it.className = "sel" + it.className;
     if (prevRow != null)
       {prevRow.className = prevRow.className.substring(3, 6);}
     prevRow = it;}
}
</script>
<script>
dojo.require("dojox.grid.EnhancedGrid");
dojo.require("dojox.grid.enhanced.plugins.Pagination");
dojo.require("dojo.data.ItemFileWriteStore");

dojo.ready(function(){
    /*set up data store*/
    var subData = {
      identifier: 'id',
      items: []
    };
    var sub_data_list = [
      { col1: "normal", col2: '20', col3: '98*154-303', col4: '98*154-303', col5: '20-11-2012', col6: '10', col7: '20',col8: '10',col9: 'ST2890GT'},
      { col1: "normal", col2: '20', col3: '98*154-303', col4: '98*154-303', col5: '20-11-2012', col6: '10', col7: '20',col8: '10',col9: 'DHY33OOP'},
      { col1: "normal", col2: '20', col3: '98*154-303', col4: '98*154-303', col5: '20-11-2012', col6: '10', col7: '20',col8: '10',col9: 'ST2880GT'}
    ];
    var rows = 100;
    for(var i=0, l=sub_data_list.length; i<rows; i++){
      subData.items.push(dojo.mixin({ id: i+1 }, sub_data_list[i%l]));
    }
    var subStore = new dojo.data.ItemFileWriteStore({data: subData});

    /*set up layout*/
    var subLayout = [[
      {name: 'Line Number', field: 'id'},
      {name: 'Status', field: 'col2'},
      {name: 'Product Received', field: 'col3',width: "14%"},
      {name: 'Customer Product Received', field: 'col4'},
      {name: 'Date Received', field: 'col5'},
      {name: 'Quantity Expected', field: 'col6'},
      {name: 'Discrepent', field: 'col7'},
      {name: 'Credited', field: 'col8'},
      {name: 'Model Number', field: 'col9'}
    ]];

    /*create a new grid:*/
    var grid2 = new dojox.grid.EnhancedGrid({
        id: 'grid2',    
        query : {}, 
        store: subStore,
        structure: subLayout,
        rowSelector: '20px',
        plugins: {
          pagination: {
              pageSizes: ["25", "50", "100", "All"],
              description: true,
              sizeSwitch: true,
              pageStepper: true,
              gotoButton: true,
                      /*page step to be displayed*/
              maxPageStep: 4,
                      /*position of the pagination bar*/
              position: "bottom"
          }
        }
    }, document.createElement('div'));

    /*append the new grid to the div*/

    dojo.byId("gridDiv").appendChild(grid2.domNode);

    /*Call startup() to render the grid*/
    grid2.startup();
});

</script>
</head>
<body class="claro">

<div id="gridDiv"></div>

</body>        
</html> 
```

// 如果我更改了 id:'grid' 它工作正常！[在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:15:53.223

嘿，我得到了解决方案，

错误就在那里，

```
#grid {
    width: 76em;
    height: 20em;
} 
```

如果我更改 id:'grid2'，我忘记在上面的行中更改.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:26:53.727

尝试这个：

```
/*create a new grid:*/
var grid2 = new dojox.grid.EnhancedGrid({    
    query : {}, 
    store: subStore,
    structure: subLayout,
    rowSelector: '20px',
    plugins: {
      pagination: {
          pageSizes: ["25", "50", "100", "All"],
          description: true,
          sizeSwitch: true,
          pageStepper: true,
          gotoButton: true,
                  /*page step to be displayed*/
          maxPageStep: 4,
                  /*position of the pagination bar*/
          position: "bottom"
      }
    }
}, "gridDiv"); //give div id here

/*Call startup() to render the grid*/
grid2.startup(); 
```

# android - 读取条形码时应用程序偶尔会崩溃

> ID：15271936
> 
> 赞同：2
> 
> 时间：2013-03-07T13:01:54.997
> 
> 标签：android, cordova, barcode-scanner

我刚刚开始使用 PhoneGap（2.5 版），并且正在开发一个能够读取 QR 码（以及最终 NFC 标签）的 Android 应用程序。我正在使用[这个](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner)插件来读取二维码。我已经设置了一个简单的测试应用程序，其中包含一个启动扫描仪的按钮和一个用于显示 QR 码内容的 p-tag。这是启动扫描仪的代码

```
scan: function() {
    try {
        window.plugins.barcodeScanner.scan( function(args) {
            console.log("Scanner result: \n" +
                "text: " + args.text + "\n" +
                "format: " + args.format + "\n" +
                "cancelled: " + args.cancelled + "\n");
            document.getElementById("info").innerHTML = args.text;
            console.log(args);
        });
    } catch(ex) {
        console.log(ex.message);
    }
} 
```

该代码在大多数情况下都有效，但偶尔会在读取代码后崩溃（扫描仪捕获标签并报告 URL/纯文本/已找到的任何内容，但在尝试返回我的应用程序时会崩溃） . 我没有发现崩溃的特定模式，有时可以扫描相同的代码，有时它会崩溃。这是来自 LogCat 的错误消息。

```
03-07 13:46:57.478: E/AndroidRuntime(28325): FATAL EXCEPTION: main
03-07 13:46:57.478: E/AndroidRuntime(28325): java.lang.RuntimeException: Unable to resume activity {com.package.hellophonegap/com.package.hellophonegap.HelloPhonegap}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=195543262, result=-1, data=Intent { act=com.phonegap.plugins.barcodescanner.SCAN flg=0x80000 (has extras) }} to activity {com.package.hellophonegap/com.package.hellophonegap.HelloPhonegap}: java.lang.NullPointerException
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3692)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.access$700(ActivityThread.java:141)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1240)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.os.Looper.loop(Looper.java:137)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at java.lang.reflect.Method.invoke(Method.java:511)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at dalvik.system.NativeStart.main(Native Method)
03-07 13:46:57.478: E/AndroidRuntime(28325): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=195543262, result=-1, data=Intent { act=com.phonegap.plugins.barcodescanner.SCAN flg=0x80000 (has extras) }} to activity {com.package.hellophonegap/com.package.hellophonegap.HelloPhonegap}: java.lang.NullPointerException
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3319)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2729)
03-07 13:46:57.478: E/AndroidRuntime(28325):    ... 13 more
03-07 13:46:57.478: E/AndroidRuntime(28325): Caused by: java.lang.NullPointerException
03-07 13:46:57.478: E/AndroidRuntime(28325):    at org.apache.cordova.DroidGap.onActivityResult(DroidGap.java:849)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.Activity.dispatchActivityResult(Activity.java:5293)
03-07 13:46:57.478: E/AndroidRuntime(28325):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3315)
03-07 13:46:57.478: E/AndroidRuntime(28325):    ... 14 more 
```

问题是我不知道如何解释错误消息或如何调试应用程序。任何有关如何进一步解决该错误的指示都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:06:29.743

尝试将手机操作系统恢复出厂设置。我发现一旦我这样做了，问题就不再发生了。

我不知道为什么它不能在手机上工作以及实际上是什么导致了错误。如果我明白问题所在，我会更新这篇文章。我几乎可以肯定的唯一一件事是问题是由我手机上的操作系统问题引起的（HTC Desire）。

我应该注意，我安装的 Android 版本是 Cyanogen 端口，因为由于内存限制，Android 4.2 通常无法在 HTC Desires 上运行。

如上所述，我在运行 Android 4.2 的 HTC One X 上没有遇到这些错误。

# visual-studio-2010 - Mstest 没有正确设置错误级别

> ID：15271938
> 
> 赞同：0
> 
> 时间：2013-03-07T13:01:55.377
> 
> 标签：visual-studio-2010, mstest, errorlevel

我有一个构建良好的测试项目。我正在尝试使用 mstest 运行测试。这是我正在执行的命令：

命令：

```
echo mstest.exe /testcontainer:SecurityLogging.Tests\Logging.Tests.dll /resultsfile:%TEST_LOG_ROOT%\Execute_%TestListNode%_1.trx /detail:Owner /detail:Description /nologo /testsettings:Logging.Tests\Local.testsettings /category:"^!E2E&^!Stress&^!Perf" 
```

我的测试失败了。如果我再检查错误级别。它仍然是 0。我做了：

```
if %errorlevel%==0 (
   continue;
) 
```

它总是在继续。

我正在使用 Visual Studio 2010。我开始挖掘，我发现了这个：

[http://www.mail-archive.com/ccnet-user@googlegroups.com/msg03027.html](http://www.mail-archive.com/ccnet-user@googlegroups.com/msg03027.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:29:44.340

`MSTest`没有失败。它可以很好地执行测试。您的测试失败，它们的错误由`MStest`. 所以，我认为你不会得到任何 %errorlevel%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-06T00:52:42.107

我刚刚确认 Visual Studio 2010 的 mstest.exe 在运行测试并且其中一些失败时确实以错误级别 1 退出。当所有测试通过时，它返回错误级别 0。

运行 mstest 后，您可以使用批处理文件中的以下行来验证这一点：

```
echo %errorlevel%
pause 
```

如果您的批处理文件正在被另一个批处理文件调用，并且您想将错误级别传回，那么您可以使用`if not %errorlevel% == 0 exit 1`快捷方式来创建批处理文件。

否则，正如@Magoo 所指出的，您可能`echo`在调用 mstest.exe 的前面有一个不必要的内容。

# php - PHP 扩展未在 phpinfo 中加载

> ID：15271943
> 
> 赞同：7
> 
> 时间：2013-03-07T13:02:09.683
> 
> 标签：php, imagick, php-extension, gmagick

所以我在 Mountain Lion 上运行 MAMP 并且我已经使用 pecl 安装了 gmagick 和 imagick，两者都是候选版本（主要是因为 gmagick 没有稳定的版本并且 imagick 3.0.0 没有安装，它给出了一个 make 错误）。当我在终端中运行 php -i 而不是在 phpinfo() 中运行时，模块会出现，我检查了 php.ini 两者都是相同的，所以这不是问题。但是我已经安装了 bitset（这是一个稳定的版本) 并且它出现在 phpinfo() 和 php -i 中。所以我的问题是 PHP 是否有任何配置选项不加载不稳定的扩展？顺便说一句，我确实在更改 ini 文件后重新启动了我的服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:31:32.707

您现在可能在您的机器上安装了两个 php。Mountain Lion 附带预装的 php 版本。尝试`locate php.ini`在终端中找出安装了多少个 php.inis。

在您的 phpinfo() 页面中，还注明了正在使用的 php.ini。您可能想要打开用于 phpinfo() 的确切 php.ini 并确保已加载扩展。应该有两行像 `extension=/path/to/gemagicext/gmagic.so extension=/path/to/imagick/imagick.so`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-11T05:09:01.263

我在 php-fpm 和 nginx 服务器上遇到了类似的问题。问题是由于更新的 php 配置没有反映在当前活动的 php-fpm 工作进程中。我必须手动**终止**fpm​​ 进程并再次重新启动它以获取更新的扩展信息。

对我有用的步骤：

1) 寻找活跃的 php-fpm 进程

```
 ps ax | grep "fpm" 
```

大多数情况下，这将列出多个进程

2）手动杀死进程

```
kill -9 [pid_got_from_previous_command] 
```

3）重启php-fpm进程

```
sudo service php5-fpm start 
```

**注意：**由于旧的子进程保留了旧的配置，因此尝试类似`sudo service php-fpm reload`或`sudo service php-fpm restart`不起作用的方法。杀死活动进程并重新启动 php fpm 为我更新了 phpinfo。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-14T14:27:00.270

我有同样的问题 CentOS 6.6 x64, php 5.5.27 我按照 [http://php.net/manual/en/imagick.installation.php中的步骤操作](http://php.net/manual/en/imagick.installation.php)

首先从这里下载 ImageMagick 安装的 tar 映像：sourceforge.net/projects/imagemagick/files/

解压它，然后从终端发出以下命令：

```
1\.  "cd ImageMagick-6.9.1-10" - go where you placed the folder
2\.  ./configure
3\.  make
4\.  make install
5\. make check
6\. install imagick extension from pecl.php.net/package/imagick/download 3.1.2
7\. cd imagick-3.1.2
8\. phpize
9\. ./configure --with-imagick=/opt/local
10\. make
11\. make install
12\. Copy imagick.so in your PHP extensions folder and add extension=imagick.so in php.ini 
```

重启apache：service httpd restart

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T07:40:00.000

我确信这个问题与您的扩展和 PHP 服务器兼容性有关。我在创建自己的扩展时遇到了这样的问题。你的扩展应该在三个主要属性上与你的 PHP 服务器兼容：

1- PHP 服务器配置的 Zend API 编号（在 phpinfo() 中可以找到此编号），此编号应与构建时的扩展头文件相同。

2- PHP 服务器上的编译器版本和扩展必须相同。

3- PHP 服务器中的线程安全很重要。如果您使用线程安全服务器，那么您的扩展必须使用 php 线程安全库构建，如果您使用非线程安全服务器，您应该使用 PHP-nts 库构建您的扩展。

# entity-framework - 实体框架中的循环引用（如论坛线程中的 LastPostId）

> ID：15271947
> 
> 赞同：0
> 
> 时间：2013-03-07T13:02:14.013
> 
> 标签：entity-framework, code-first, circular-dependency

假设您有一个与“Post”具有一对多关系的“Thread”对象。此外，您还记录了一个“LastPostId”（以便更快地创建显示最后一篇帖子的线程列表）。

我们正在使用分配的 Guid，因此我们提前知道“发布”ID。

在不使用两阶段 SaveChanges() 的情况下，在实体框架（代码优先）中处理这种循环引用的最佳方法是什么？

# .htaccess - 仅将部分页面从 http 重定向到 https

> ID：15271950
> 
> 赞同：0
> 
> 时间：2013-03-07T13:02:24.640
> 
> 标签：.htaccess

我发现了很多这样的问题并尝试了几乎所有但失败了。我最新的代码是：

```
RewriteCond %{HTTPS} !^on$
RewriteCond %{REQUEST_URI} (/page_1|/page_2|/page_3|/page_3)$
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L] 
```

我只想将这些页面的 http 重定向到 https (page_1 - page_4)

最初它似乎是有效的，但是一旦我使用**https**到达 page_1 并单击不应该是**https**的任何其他（比如说**page_my_http_1** ）链接，它也会重定向到该页面的 https （**page_my_http_1**）。

 ****我也试过：

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (auth|register|secure)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301]

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(auth|register|secure)
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301] 
```

或者如果 SSL 证书未在浏览器上激活，有什么方法可以向用户显示自定义消息？

实际上，当浏览器显示默认警告消息时，许多非技术用户都会感到震惊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:38:57.077

我只是稍微改变了你的例子，但基本上它只是工作

```
RewriteEngine on

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/(?:auth|register|secure)$
RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R]

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !^/(?:auth|register|secure)$
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI} [R] 
```

我添加了`^`,`$`和`/`, 因为否则类似`nosecure`or的请求`authority`也会被重定向到 HTTPS。

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。****

# matlab - 如何只导入一些数据文件而忽略其他文件？

> ID：15271957
> 
> 赞同：0
> 
> 时间：2013-03-07T13:02:47.823
> 
> 标签：matlab, import

我有 48 个 1000x28 数据文件（没有标题、字符串或特殊字符），我想分 4 批导入，每批 12 个。在第一批中，这些文件具有名称：

**spread_YAB_4ACH_caretype_??_model_1** *`where ??=1:6`*

第二批

**spread_YAB_4ACH_caretype_??_MC_model_1**我*`??=1:6`* 不知道在哪里放置通配符 *

```
D = dir('spread_YAB_4ACH_caretype_*_model_1.txt');
 dummy=zeros(1000,length(D));

for k=1:length(D)
   file = num2str(D(k).name);
 fid=fopen(file);
   myCell = textscan (fid, '%f');
   dummydummy=reshape(cell2mat(myCell(:,end)),1000,28); %#cell makes one column vector, why?
   dummy(:,k)=dummydummy(:,end);                        %# Only want last column
 fclose(fid);
end 
```

这个脚本看起来一团糟，你肯定不需要这么多的bumpf来导入一组简单的数据文件。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:11:56.310

```
d=dir(foldername); %#That is where your files are
for i=3:1:length(d) %#ignore the . and ..
    if strfind(d(i,1).name,'MC_model')
         %#some code to do with the file of the second batch#%
    else
        %some code to do with the file of the first batch#%
    end
end 
```

# php - PHP：子目录中无法访问的会话变量

> ID：15271959
> 
> 赞同：1
> 
> 时间：2013-03-07T13:02:48.193
> 
> 标签：php, session-variables, subdirectory

我遇到了一个奇怪的问题。我有一个受密码保护的站点，我的大部分文件都在主目录中。所有文件在登录前都无法访问，但在设置会话变量后变得可访问。我也使用其他会话变量，这些文件都可以访问所有这些变量。

但是，为了方便起见，我将一堆与一个主题相关的文件转储到一个子目录中。但是，我发现此子目录中的文件似乎无法访问会话变量。

php

```
login.php
$_SESSION['username'] = "Bob"; //sets session variable.

subdir/file.php
echo $_SESSION['username']; //echoes nothing.
$username = $_SESSION['username'];
if (!isset($username)) {
echo "var not set"; //echoes out
} 
```

有没有人遇到过这个问题？会是什么呢？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:04:23.297

您是否在这些页面中开始了会话：`session_start();`

您必须在页面中启动会话，如果您将值分配给会话以及在您使用 seesion 值的页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:07:21.913

您应该在调用会话变量之前添加 session_start() ，这样您的 $_SESSION['username'] 就不会未定义或为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:06:31.330

首先你需要用这个开始会话

```
session_start(); 
```

然后直到会话结束，您可以获得存储在会话中的那些变量，可以在您的所有目录和子目录中使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:20:40.760

类型

```
 Session_start(); 
```

在页面的开头...并回显变量..

```
echo $<variable_name>; 
```

你可以看到价值

# ios - 调用 Salesforce Web 服务时出现 ApexRest JSON 解析器错误，说通过 iOS 使用意外参数

> ID：15271968
> 
> 赞同：0
> 
> 时间：2013-03-07T13:03:12.857
> 
> 标签：ios, web-services, salesforce, apex-code

在调用 apexrest webservice 以通过调用方法将附件上传到特定记录。所以为此我对 Json 进行了硬编码。

```
-(void)uploadToSalesforce
{   
    NSData *imagedata = UIImageJPEGRepresentation(imagePreview.image, 1.0);
    int datalength = [imagedata length];

    NSString *filename = [NSString stringWithFormat:@"Supload_iPhone_%d.jpg",datalength];

    NSString *req = [NSString stringWithFormat:@"{\n\"name\":\"%@\",\n\"Body\": \"%@\"\n,\"ParenId\":%@\"\n}",filename,imagedata,receivedrecordid];
    const char *utfString = [req UTF8String];
    NSData *postData = [NSData dataWithBytes:utfString length:strlen(utfString)];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];  
    NSMutableURLRequest *requestUrl = [[NSMutableURLRequest alloc] init ];
    [requestUrl setURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@/services/apexrest/Account/",receivedinstanceurl]]];
    [requestUrl setHTTPMethod:@"POST"];
    [requestUrl setValue:postLength forHTTPHeaderField:@"Content-length"];
    [requestUrl setValue:[NSString stringWithFormat:@"Bearer %@",receivedaccesstoken] forHTTPHeaderField:@"Authorization"];
    [requestUrl setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [requestUrl setHTTPBody:postData];

    NSURLResponse *response;
    NSError *err;
    NSData *reponseData = [NSURLConnection sendSynchronousRequest:requestUrl returningResponse:&response  error:&err];
    NSString *res = [[NSString alloc] initWithData:reponseData encoding:NSASCIIStringEncoding];
} 
```

作为回应，它说有

```
[{"message":"Unexpected parameter encountered during deserialization: Name at [line:2, column:9]","errorCode":"JSON_PARSER_ERROR"}] 
```

在控制台 JSON 似乎正确但无法解析参数“名称”。我认为这不是 IOS 代码。还是有一些不同的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T05:49:27.980

在行

```
NSString *req = [NSString stringWithFormat:@"{\n\"name\":\"%@\",\n\"Body\": \"%@\"\n,\"ParenId\":%@\"\n}",filename,imagedata,receivedrecordid]; 
```

JSON 缺少键值`"`字符。`ParentId`它应该是：

```
NSString *req = [NSString stringWithFormat:@"{\n\"name\":\"%@\",\n\"Body\": \"%@\"\n,\"ParenId\":\"%@\"\n}",filename,imagedata,receivedrecordid]; 
```

因此 Salesforce webservice 反序列化抛出异常。

# html - 在一封电子邮件中发送 HTML 和 TXT 格式的时事通讯

> ID：15271976
> 
> 赞同：0
> 
> 时间：2013-03-07T13:03:29.203
> 
> 标签：html, newsletter, spam-prevention

我正在测试我的时事通讯是否能被垃圾邮件过滤器识别。我看到一些错误。其中之一是**BODY: Message only has text/html MIME parts**。我读到这是因为我只有 HTML 格式，所以我准备了这样的东西：

```
<html>
    <title>Newsletter 03/2013</title>
    <body>
    <p>Newsletter content for this month</p>
    </body>
<html>
Newsletter content for this month 
```

但这并没有解决我的问题。也许你可以建议我如何避免这个错误？我还发现了其他“垃圾邮件”错误。

正文：PL_DISCOUNT 正文
：PL_DISCOUNT
1.0 正文：PL_NEW_OFFER
0.5 URI：URI 主机名有长的非元音序列
1.1 正文：消息只有文本/html MIME 部分
2.2 HTML_TITLE_SUBJ_DIFF

有什么建议吗？

电子邮件是通过网络平台发送的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:00:48.987

包含文本和 HTML 版本的电子邮件实际上利用了[多部分/替代](http://en.wikipedia.org/wiki/MIME#Alternative)MIME 子类型。这是您通常不必处理的原始电子邮件数据结构的一部分。定义文本和 HTML 部分的内容将是电子邮件发送库或应用程序的一项功能，如果您愿意，这实际上可以完全不同。

# php - PHP 设置表单值

> ID：15271981
> 
> 赞同：0
> 
> 时间：2013-03-07T13:03:59.783
> 
> 标签：php, javascript, forms

我是 PHP 的菜鸟，但我正在尝试开发一个带有一些表格和值编辑选项的后台。

到目前为止，我有这样的表：

![在此处输入图像描述](../Images/eae0a13ab565faa405209c0f0b6a353c.png)

但我对这个问题有点困扰：

更改按钮的实现方式如下：

```
for ($i = 0; $i < count($a); $i++) {
            ?>
            <tr>
            <td><i onclick="
            document.form1.deviceFeatValID.value = <?php echo $a[$i][DEVICE_FEATURE_VALUE_ID] ?>;
            document.form1.deviceID.value = <?php echo $a[$i][DEVICE_ID] ?>;
            document.form1.deviceClassFeatID.value = <?php echo $a[$i][DEVICE_CLASS_FEATURE_ID] ?>;
            document.form1.deviceFeatureVal.value = <?php echo $a[$i][DEVICE_FEATURE_VALUE] ?>;
            document.form1.submit();" class="icon-refresh" ></td>
            <td><?php echo $a[$i]['DEVICE_FEATURE_VALUE_ID']; ?><td><?php echo $a[$i]['DEVICE_ID']; ?><td><?php echo $a[$i]['DEVICE_CLASS_FEATURE_ID']; ?><td><?php echo $a[$i]['DEVICE_FEATURE_VALUE']; ?>
            </tr>
            <?php
            }
            ?> 
```

也就是说，通过 Javascript，我在同一个 .php 中设置了这个表单的输入值：

```
<form name="form1" method="post" action="deviceFeatureValueFRM.php">
            <input type="hidden" name="deviceFeatValID"/>
            <input type="hidden" name="deviceID"/>
            <input type="hidden" name="deviceClassFeatID"/>
            <input type="hidden" name="deviceFeatureVal"/>
            <input type="hidden" name="hiddenTypeField"/>
        </form> 
```

但是……你认为这是一个好习惯吗？有没有别的解决办法？！

此代码的目标是检测将要编辑哪一行。

亲切的问候，

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:09:47.230

为什么用 javascript 做这个？只需给输入字段一个值，如下所示：

```
<input type="hidden" name="deviceFeatValID" value="<?php echo $a; ?>"/> 
```

哪里`$a`可以是您想要的任何变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:14:48.880

好吧，我建议您将所有文件分开。因此，假设您有一个 PHP 文件。一个文件用于 Javascript，一个文件用于 HTML。因此，如果您想使用 php 函数或任何只需要通过 AJAX 调用它们的东西。

这样，您将拥有更清晰的代码和更安全的代码。

# wordpress - 更新循环内的 WordPress 帖子

> ID：15271983
> 
> 赞同：0
> 
> 时间：2013-03-07T13:04:01.430
> 
> 标签：wordpress, loops

我的 WordPress 循环中有一些处理，我想“缓存”结果，以便下次显示帖子时我可以使用预处理的信息。存储结果的明显位置是发布元数据。

因此，我将一些 Update_post_meta 调用合并到我的代码中，如下所示：

```
update_post_meta($imagePostID, "imageMeta", $imageMeta); 
```

在此 $imagePostID 的值只是数字 Post ID，我已经用它来检索其他元数据，所以没关系。我还确认代码在正确的位置被调用。

但是，这些值没有被保存，并且看起来由于某种原因更新只是被忽略了。

有谁明白这是为什么，如果有什么方法可以得到我想要的行为？

谢谢，安德鲁

# php - 在 Yii 框架中实现 Facebook PHP SDK 的最佳方式

> ID：15271985
> 
> 赞同：8
> 
> 时间：2013-03-07T13:04:06.313
> 
> 标签：php, yii, facebook-php-sdk, facebook-login

我已将 Facebook SDK 文件放入`protected/helpers`目录中，从中为我的 Yii 应用程序自动加载类和第 3 方帮助程序。

当我的一个项目涉及 Facebook 登录时，我想出了这个简单快捷的解决方案，使用`Yii::app()->params`来实现整个应用程序中对象属性的继承。

```
// don't mind this $facebook variable, it's just a shortcut in this method
Yii::app()->params['facebook'] = $facebook = new Facebook(array(
    'appId' => '148966221932337',
    'secret' => 'a52ce7b4a0cd5d517c6ada53fc77cde7',
    'cookie' => true,
));

$user = $facebook->getUser(); 
```

因此，我在`Yii::app()->params['facebook']`整个应用程序中都可以使用设置或取消设置，这样我就可以在我的应用程序中的任何位置访问 Facebook API SDK，但是我相信这不是一个好的解决方案。

**有没有更好的解决方案将 Facebook API SDK 实现到 Yii 框架应用程序中？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-29T04:49:42.887

是的。下载 Facebook SDK 文件并将其保存在 protected/components/Facebook 然后编辑您的 config/main.php

```
'import'=>array(         //autoloading model and component classes 
    'application.models.*',
    'application.components.*',
    'application.components.Facebook.*',
), 
```

并在您的参数中添加 appid 和密钥

```
'params'=>array(
    'Facebook'=>array(  
        'appId' => '148966221932337',
        'secret' => 'a52ce7b4a0cd5d517c6ada53fc77cde7',
        'cookie' => true,
    ),
); 
```

从您的页面，您可以像这样调用您的 Facebook SDK

```
$facebook = new Facebook(Yii::app()->params['Facebook']);
$user_id = $facebook->getUser(); 
```

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:30:25.420

我总是尝试将配置变量存储在数据库中。特别是如果它们涉及密钥。我会使用 Yii 的 crypt 功能并将其存储在数据库中。然后我会围绕检索这样的配置变量创建模型。

其次，就实际连接工作和你有什么而言，我会将其作为扩展 CApplicationComponent 的组件，并将文件放在扩展目录或组件目录中。如果你想让它成为一个真正的对象。我认为 helpers 的想法只是一组松散的函数，我主要使用 helpers 进行数组和字符串工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T19:52:48.500

有点晚了，但我最终用 Composer 下载了 Facebook SDK 文件，自动加载这些文件，并创建了一个 FacebookService 扩展 CApplicationComponent 来包装 SDK。

所以主要配置就像

```
'facebookService'=>array(
            'class' => 'FacebookService',
            'appId' =>'xxxxxxxxxxx',
            'appSecret' => 'xxxxxxxxxx',
            'extendedAccessToken' => "xxxxxxxxxx",
        ), 
```

你可以像这样使用它

```
Yii::app()->facebookService->[method_I_defined] 
```

# asp.net-mvc - ASP.NET MVC 应用程序中的确认弹出消息

> ID：15271988
> 
> 赞同：-3
> 
> 时间：2013-03-07T13:04:17.347
> 
> 标签：asp.net-mvc

我想在成功的插入命令后向用户显示一个 Success 弹出窗口，当用户单击 Ok 时，他应该被重定向到不同的视图。任何人都可以建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:13:37.257

如果您在谈论浏览器中的弹出窗口，则 Javascript 是

```
alert("Success!"); 
```

直到用户单击确定，下一行代码才会执行​​。所以你可以添加任何你想要重定向到不同视图的代码，但是有很多方法可以做到这一点。

# objective-c - 使用 drawRect 和 setNeedsDisplayInRect 绘制最小

> ID：15271994
> 
> 赞同：0
> 
> 时间：2013-03-07T13:04:33.213
> 
> 标签：objective-c, xcode, drawrect, setneedsdisplay

他，我刚刚意识到 [self setNeedsDisplayInRect:(dRect)] 绘制所有内容（不仅是必要的），然后在“dRect”中更新屏幕。所以我开始像这样编辑drawRect方法：

```
- (void)drawRect:(NSRect)dirtyRect{
    if (gUs==1){
        imagePos = NSMakePoint(0, 0);
        [_bz_BG dissolveToPoint:imagePos fraction:1.0];
        [self drawBPM];
        [self writeSeq1steps];
        [self writeSeq2steps];
        [self drawSeq1Patterns];
        [self drawSeq2Patterns];
        [self drawSeq1];
        [self drawSeq2];
        [self drawSampleNameSeq1];
        [self drawSampleNameSeq2];
        [self drawBattCharge];
        [self drawCPUload];}
    if (gUs==2){
        [self drawCPUload];}
    if (gUs==3){
        [self drawBattCharge];}
    if (gUs==4){
        [self drawBPM];}
} 
```

然后让需要显示的方法改变“gUs”。这很好用，因为我有很多控件，所以极大地减少了 cpu 工作。

但后来我看到，在重负载或经常显示更新的情况下，有时另一种方法会在处理上一次调用的 needDisplay 之前更改“gUs”，从而导致错误的绘图。

我怎样才能避免这种情况？

# svg - 你能右对齐一个 SVG 矩形吗？

> ID：15271995
> 
> 赞同：0
> 
> 时间：2013-03-07T13:04:39.580
> 
> 标签：svg, raphael

我正在使用 Raphael 绘制矩形。哇哦！

有没有办法右对齐 SVG 文件的内容？不只是文字，还有形状？

我可以进行数学运算并获得计算`x`值，但我正在寻找惰性简单的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:53:44.527

没有。与调整窗口大小并让内容流入其中的普通网页不同，当调整 Raphael 论文的大小时，没有任何流动，因此对齐是无关紧要的。您只需将右边缘设置为与设置纸张宽度相同的位置，而不是设置 align=right。如果放大纸张，只需一次操作即可缩放内容。一旦你设置了右边缘的位置，你就基本上设置了对齐位置。当纸张改变尺寸时，您不需要重新设置所有边缘值，您只需使用一个命令缩放所有内容。希望有帮助

# iphone - 用 CoreText 模拟 UITextView 文本渲染？

> ID：15271996
> 
> 赞同：0
> 
> 时间：2013-03-07T13:04:47.093
> 
> 标签：iphone, ios, ipad, uitextview, core-text

我正在尝试创建一个能够突出显示各种单词的 TextView。我不想在 iOS 6 中使用属性文本属性，因为我想支持 iOS 5 和其他问题（参见此处，例如：[UITextView 属性文本和语法高亮](https://stackoverflow.com/questions/12543468/uitextview-attributedtext-and-syntax-highlighting)）。

所以我唯一的选择是使用 CoreText。我找到了这个项目：[https](https://github.com/KayK/RegexHighlightView) ://github.com/KayK/RegexHighlightView 。它基本上所做的就是覆盖 UITextView 的 drawRect 方法并使用 CoreText 绘制内容。问题是核心文本渲染与 UITextView 渲染不同 - 这导致光标位于错误的位置（随着文本变长变得更糟）。

有没有希望解决这个问题？也许其他一些聪明的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:14:16.277

试试这个： [https](https://github.com/mattt/TTTAttributedLabel) ://github.com/mattt/TTTAttributedLabel TTTAttributedLabel 支持 iOS 4.0 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:26:34.540

试试 EGOTextView。或者你可以做 webView 的方式。（UITextView 实际上主要是在后台执行此操作）