# StackOverflow 问答 16160000-16160999

# php - SQL 插入由于某种原因不起作用

> ID：16160006
> 
> 赞同：0
> 
> 时间：2013-04-23T02:42:54.860
> 
> 标签：php, mysql, sql

当我删除 '$user' 并由此完美运行

```
$query = $db -> query("INSERT INTO posts (title, body, tags, published, date, by) VALUES       
('$title', '$body', '$tags', '$published', '$date', '$user')"); 
```

用户是 varchar(11)

当我 print_r $user 我得到我想要的值

我不确定发生了什么，`by`在桌子的最后。

对不起，如果这个问题很愚蠢。

和平

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T02:44:21.283

因为`BY`是保留关键字，恰好是列的名称。为了避免语法错误，您需要使用反引号将其转义，

```
INSERT INTO posts (title, body, tags, published, date, `by`) VALUES (...) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

我宁愿更改列名以避免再次出现问题`:D`

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:11:43.430

此外，您还可以在“日期”列上加上反引号，因为它也是保留字..

```
INSERT INTO posts (title, body, tags, published, `date`, `by`) VALUES (...) 
```

好吧，就我而言，我真的不喜欢使用反引号，但它确实有助于避免语法错误..

# haskell - 函数调用后 Parsec 意外字符

> ID：16160012
> 
> 赞同：3
> 
> 时间：2013-04-23T02:43:43.510
> 
> 标签：haskell, parsec

到目前为止，这是我的代码：http: [//hpaste.org/86353](http://hpaste.org/86353)。我正在 Windows 上使用 GHC 构建。

上面的代码在我的测试文件中产生以下输出：

```
parse error at (line 3, column 5):
unexpected " "
expecting "{", "if" or identifier 
```

这是我的测试输入：

```
{ if 9 < 3      then
{
a(); b() c()
d()
}else if 2 < 1{if 3 > 2 { }}} 
```

我一直无法弄清楚为什么表达式后面的空格让 parsec 如此沮丧。如果我在 a() 或 b() 之后删除分号，则 parsec 将抱怨下一个调用的第一个字母（即：b 或 c）。如果我重新添加分号，则 parsec 会抱怨空格。任何调用之间没有空格，a() 和 b() 之后的分号但 c() 之后没有分号会导致程序正确解析。相同的测试，除了 c() 后的分号会导致“意外 \n”。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:41:07.153

主要问题是您希望换行符很重要，但您的词法分析器将它们视为空格。这意味着所有换行符在每个令牌之后都会被静默消耗掉。不幸的是，没有简单的方法解决这个问题：[在 Parsec 中，有没有办法防止词素消耗换行符？](https://stackoverflow.com/questions/5672142/in-parsec-is-there-a-way-to-prevent-lexeme-from-consuming-newlines).

这对于图书馆来说肯定是糟糕的设计。这有点奇怪，因为总的来说，Parsec 是我用过的设计最好的库之一。

另一个小问题是您的分隔符 ( `oneOf ";\n"`) 后面不允许有任何空格。如果将其更改为`oneOf ";\n" >> skipMany (oneOf " \t"))`，您将能够正确解析类似 "{ a(); b(); c(); }` 之类的内容。不幸的是，这无助于早期的重要换行问题。

最终，编写自己的词法分析例程来去除拖尾空白可能是您最好的选择。这也将是学习更多关于 Parsec 的一个很好的练习:)。

# php - 在 MongoDB 中查找字段不为空的字段（在 PHP 中）

> ID：16160016
> 
> 赞同：5
> 
> 时间：2013-04-23T02:44:00.227
> 
> 标签：php, mongodb

这可能是一件很容易做到的事情，但我对 MongoDB 还是很陌生，并且无法正确使用这个词。

我正在从数据库中提取线索，我只希望它提取电子邮件字段不为空的记录。如果记录不为空，我尝试放入语句以跳过记录，但是有许多字段不为空，但其中也没有任何字符。这是我的 MongoDB 查询：

`$records = $dbh->find('email' => array('$ne' => null))->limit(2000);`

我也尝试过`'email' => array('$ne' => ''))`，但这也没有奏效。

有没有一种简单的方法可以做到这一点？我知道在 MySQL 中这很简单`where email != ""`，但我仍在学习 Mongo 的方法:) 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T02:47:12.890

试试这个，你不正确地包含在数组中

```
 $records =      $dbh->find(array("email" => array('$ne' => null)))->limit(2000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:55:16.283

好的，我只是想出了一个不错的方法，并将它发布给像我这样有同样问题的任何其他“菜鸟”:)

我将 '$nin' 与数组一起使用，它解决了问题。这是我现在的查询：

`$records = $dbh->find(array("email" => array('$nin' => array(' ','',null))))->limit(2000);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T21:47:53.927

经过 3 个小时的失败后，我设法以一种棘手的方式做到了：

find('field' => array('$regex' => '.*'))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-28T06:41:33.227

你也可以这样做

```
$records = $dbh->find(array('$where' => 'this.email && this.email.length'))->limit(2000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-14T18:16:37.523

```
$records = $dbh->find('$or'=>array(
    array('email'=>array('$exists' => false)),
    array('email'=>array('$ne' => null)),
    array('email'=>array('$ne' => ''))
)); 
```

# oracle - 与事务相关的 Oracle（以及一般的 DB）中的用户是什么？

> ID：16160017
> 
> 赞同：0
> 
> 时间：2013-04-23T02:44:03.787
> 
> 标签：oracle, jdbc, rdbms

我通常会看到对用户持有的锁的引用。这是否意味着单个连接，所有通过用户帐户登录的连接等等......？

这通常如何适用于 Oracle 和 DB？

如果它适用于多个连接，人们在修改数据时不会看到数据吗？

这如何适用于 JDBC？

```
You can see any changes you have made during the transaction by querying the modified tables, but other users cannot see the changes. After you commit the transaction, the changes are visible to other users' statements that execute after the commit. 
```

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4010.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4010.htm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:48:41.823

这意味着特定的用户会话。如果您查看该`DBA_LOCKS`表，您将看到一`session_id`列，它与`v$session`单个用户会话（即连接）相关并代表一个用户 ID，而不是所有会话。[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm#i5338)中解释了锁定机制。你是对的，如果不是这种情况，那么用户的其他会话/连接将看到未提交的更改，这是永远不允许的（无论如何，在 Oracle 中，但据我所知，适用于所有 RDBMS）。

对于 JDBC，同样适用，每个锁由单个连接持有。如果您的连接池具有针对同一用户帐户的多个打开的连接，则使用池中的一个连接所做的更改在提交之前对其他连接不可见。因此，如果您正在执行多个语句作为逻辑事务的一部分（在这种情况下，希望您没有启用自动提交），您需要继续为所有语句重用相同的连接，而不是从每次池，因为这可能会或可能不会与挂起的更改相同。

# ruby-on-rails - 提交按钮运行 Create 方法，而不是 Logon

> ID：16160018
> 
> 赞同：0
> 
> 时间：2013-04-23T02:44:10.760
> 
> 标签：ruby-on-rails, ruby, model-view-controller, haml

我们为我们的 Ruby on Rails 项目实现了一个简单的登录方法，我们在页面上有一个按钮来提交用户将输入的登录信息，但是提交按钮不是指向我们的登录方法，而是运行我们的创建方法并尝试创建另一个用户。

```
def login
  username = params[:username]
  password = params[:password]
  if(username == NIL || password == NIL)
    loginfailed
  else
    comparisonUser = User.where("username = ?", username)
    if(comparisonUser == NIL)
      loginfailed
    else
      comparisonPassword = comparisonUser.password
      if(comparisonPassword == password)
       flash[:notice] = "Login Successful"
         @user = comparisonUser
      else 
        loginfailed
      end
    end
  end
end 
```

这是创建方法：

```
def create
  @user = User.create!(params[:user])
  flash[:notice] = "User,  #{@user.username} was successfully created."
  redirect_to questions_path
end 
```

以及网页上登录按钮的代码：

```
 =  form_tag users_path do
              =  label :userlogin, :username, 'Username'
              =  text_field :userlogin, :username
              %br/
              =  label :userlogin, :password, 'Password'
              =  text_field :userlogin, :password
              %br/
              = submit_tag 'Login', :id => 'Login' 
```

我可能需要向 submit_tag 添加更多信息，但我不确定该怎么做。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:46:38.090

您正在发布到 users_path，这通常是创建操作（除非您修改了路线）。

而不是`form_tag users_path`您需要参考适当的路线。

# php - 删除确认窗口不会出现在 php 中

> ID：16160021
> 
> 赞同：1
> 
> 时间：2013-04-23T02:44:42.033
> 
> 标签：php, javascript

请告诉我哪里错了，以便我纠正？它没有给出错误它应该在删除记录之前显示确认窗口，但它直接删除记录

```
<script type="text/javascript">
var elems = document.getElementsByClassName('confirmation');
    var confirmIt = function (e) {
        if (!confirm('Are you sure?')) e.preventDefault();
    };
    for (var i = 0, l = elems.length; i < l; i++) {
        elems[i].addEventListener('click', confirmIt, false);
    }
</script> 
```

删除链接：

```
<a href='".$_SERVER['PHP_SELF']."?action=delete&id=$id' class='confirmation'> Delete</a> 
```

删除功能：

```
if(isset($_GET['action']) && trim($_GET['action'])=="delete")
{
$del="delete from contacts where id='".$_GET['id']."'";

mysql_query($del) or die(mysql_error());
header("Location: mainpage.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:15:31.437

如果您不想在单击链接时激活链接，则 onclick 必须返回 false。

# c# - ASP.NET 路由，其中 两个控制器操作具有相同数量的参数

> ID：16160022
> 
> 赞同：2
> 
> 时间：2013-04-23T02:44:45.363
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我们有一个这样的路由配置：

```
 public static void RegisterRoutes(RouteCollection routes) {
     routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

     routes.MapRoute(
         name: "About",
         url: "{controller}/{action}/{aboutId}",
         defaults: new { controller = "Home", action = "About" }
     );

     routes.MapRoute(
         name: "Contact",
         url: "{controller}/{action}/{contactId}",
         defaults: new { controller = "Home", action = "Contact" }
     );

     routes.MapRoute(
         name: "Default",
         url: "{controller}/{action}/{id}",
         defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
     );
  } 
```

您会注意到有两条路线具有一个强制性的额外参数。路线`About`和`Contact`.

在我们的应用程序中，我们有两个 url

`www.myapp.com/Home/About/2`效果很好。但是当我们浏览浏览器时，`www.myapp.com/Home/Contact/5`我们得到了可怕的路由异常：

```
The parameters dictionary contains a null entry for parameter 'contactId' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult Contact(Int32)' in 'RoutingTest.Controllers.HomeController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. 
```

如果我们改变路由的顺序，使它看起来像这样：

```
 public static void RegisterRoutes(RouteCollection routes) {
     routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

     routes.MapRoute(
         name: "Contact",
         url: "{controller}/{action}/{contactId}",
         defaults: new { controller = "Home", action = "Contact" }
     );

     routes.MapRoute(
         name: "About",
         url: "{controller}/{action}/{aboutId}",
         defaults: new { controller = "Home", action = "About" }
     );

     routes.MapRoute(
         name: "Default",
         url: "{controller}/{action}/{id}",
         defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
     );
  } 
```

然后`Contact`网址有效，但`About`网址无效。

HomeController 看起来像这样：

```
 public class HomeController : Controller {
      public ActionResult Index() {
         ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

         return View();
      }

      public ActionResult About(int aboutId) {
         ViewBag.Message = "Your app description page.";

         return View();
      }

      public ActionResult Contact(int contactId) {
         ViewBag.Message = "Your contact page.";

         return View();
      }
   } 
```

这似乎意味着无论控制器动作的名称如何，两个路由不能具有相同数量的参数。如果两个控制器动作有一个同名的参数，那么一切正常。我知道我可以开始做一些非常棘手的事情来解决这个问题，例如调用所有参数相同的名称或为操作提供无意义的参数来更改参数的数量，但我实际上想知道幕后发生了什么。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T02:56:54.187

您的问题的根源（不是双关语）不是路由不能具有相同数量的参数。他们能。问题是路由引擎将选择与传入请求匹配的第一个路由。您的路线仅在默认情况下有所不同，并且在模式匹配方面它们完全相同。因此，在每种情况下，您都应该走上正轨`Contact`。

看起来您正在尝试根据操作设置不同的路线。我实际上看不出你为什么需要。

您可以使用以下内容来实现该效果。

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Contact",
        url: "Home/Contact/{contactId}"
    );

    routes.MapRoute(
        name: "About",
        url: "Home/About/{aboutId}"
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
 } 
```

然而。我强烈建议不要使用这种方法，因为您的“默认”路由将是 Contact 路由。这意味着（在 Razor 下）`@Html.ActionLink()`和相关的方法将......错误。

老实说，如果您实际上只是使用...

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:51:54.480

在路由中明确指定控制器和/或操作以允许路由选择正确的路由：

```
 routes.MapRoute(
     name: "About",
     url: "{controller}/About/{aboutId}",
     defaults: new { controller = "Home", action = "About" }
 ); 
```

您还可以向参数添加约束以区分路由，但在您的情况下，这两个操作看起来都具有相同的整数参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T04:57:02.227

难道你不能删除你的自定义路由并重用 {id} 参数（在你的操作代码中将 {contactId} 和 {aboutId} 变成“id”）吗？

```
public class HomeController : Controller {
  public ActionResult Index() {
     ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

     return View();
  }

  public ActionResult About(int id) {

     int aboutId = id;

     ViewBag.Message = "Your app description page.";

     return View();
  }

  public ActionResult Contact(int id) {

     int contactId = id;

     ViewBag.Message = "Your contact page.";

     return View();
  } 
```

}

# javascript - 在另一个属性的函数中使用时，对象文字根属性未定义

> ID：16160025
> 
> 赞同：3
> 
> 时间：2013-04-23T02:45:18.677
> 
> 标签：javascript, jquery, object-literal

我已经阅读了几个小时，似乎找不到适合我需要的答案。由于代码的大小，我现在不想更改结构。如果可能的话，我正在尝试在我已经建立的结构内找到一个可行的解决方案。

**首先，这是我的对象字面量结构的一个非常简化的模型：**

```
NS = 
{
    x: undefined,

    button: undefined,

    fn: 
    {
        root: undefined,

        doSomething: function () 
        {
            var root = this.root,
                x = root.x;       // exception occurs here

            // do something with x
        }
    },

    init: function () 
    {
        var self = this,
            x = self.x,
            button = self.button,
            fn = self.fn,
            fn.root = self;

        x = $("#x");
        button = $("#button");    

        button.on("click", fn.doSomething);
    }
}; 
```

我知道看起来下面的声明`init()`并不是真正需要的，但是命名空间可能会变得相当长，所以我喜欢这样缩短它们。在我遇到这个障碍之前，这几乎在所有情况下都对我很有效。我知道我可以完全限定所有内容并且它应该可以工作，但由于前面提到的长命名空间，我真的不想这样做。

我的问题是，当从另一个属性的函数中访问它时，我的根属性`x`在函数中设置后没有保留其值。`init()`你可以`console.log(this.x)`从`init()`函数内部，它就在那里。但是，当您单击按钮并且 onClick 函数尝试声明`x = root.x`它时会抛出：

> *未捕获的类型错误：无法读取未定义的属性“x”*

* * *

**更新：**

即使在调用处理程序之前添加未定义的`console.log()`节目：`fn.root.x`

```
init: function () 
{
    var self = this,
        x = self.x,
        button = self.button,
        fn = self.fn,
        fn.root = self;

    x = $("#x");

    console.log(x); // this shows the object
    console.log(fn.root.x); // this throws the undefined exception

    button = $("#button");    
    button.on("click", fn.doSomething);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:56:05.067

当 doSomething 作为事件处理程序调用时，`this`将是函数内部的事件目标。所以`this.root`将是未定义的，并且未定义没有任何属性，因此`root.x`会引发错误。

一种解决方案是固定`this`with的值[`$.proxy`](http://api.jquery.com/jQuery.proxy/)：

```
button.on("click", $.proxy(fn.doSomething, self)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T19:29:22.970

实际上，JS 对象和数组是通过引用传递的。在您的示例中，如果 x 是一个对象而不是`undefined`：

```
NS = {
    x: {},
    button: undefined,
    // etc
}; 
```

然后在你的`init`方法中你可以做这样的事情，它会起作用：

```
init: function(){
    var self = this,
        x = self.x;

    x.foo = 'foo!';
    console.log(self.x.foo);  // Logs 'foo!'
} 
```

但是，在您的示例中，当您分配时，您`x = $('#x')`实际上只是将此本地 x 变量的引用更改为新创建的 jQuery 对象。为了使您的示例正常工作，您需要做的是使两个变量都引用同一个对象：

```
init: function(){
    var self = this,
        x = self.x = $('#x');

    x.on('click', function(){
        console.log('foo!');
    });

    self.x.trigger('click');  // Logs 'foo!'
} 
```

# python - Queryset 只为每个外键获取一个（任何）记录

> ID：16160028
> 
> 赞同：0
> 
> 时间：2013-04-23T02:45:32.217
> 
> 标签：python, django, django-1.4

假设我有以下型号：

```
class Manufacturer(Model):
    name = models.CharField(max_length=255)
    origin = models.CharField(max_length=255)

class Car(Model):
    model = models.CharField(max_length=255)
    manf = models.ForeignKey(Manufacturer, related_name="cars") 
```

然后我想运行以下查询：

```
usa_manfs = Manufacturer.objects.filter(origin='USA')
usa_manf_cars = Car.objects.filter(manf__in=usa_manfs) 
```

但是，我只想在 QuerySet 中为每个制造商提供 1 辆汽车。

我知道我可以走另一条路并做类似的事情，`usa_manfs.cars[0]`但这是否意味着我需要为每个制造商查询以获取所有相关汽车？

澄清一下，我不需要对与每个制造商相关的 Car 实例进行任何控制。我只需要最后列出制造商唯一的汽车列表。

*现在的解决方案*

经过深思熟虑，我决定采用 Python 解决方案并防止循环中的重复。

我正在使用的数据可能在 ForeignKey 字段中的重复项相对较少（我的示例可能不支持），并且由于我无法获得将其保留在 Django ORM 中的解决方案，因此我'将简单地跟踪 ForeignKey 并在循环中排除重复。因为无论如何我都在循环它们，所以我认为我总体上不会创造更多的工作。

例如：

```
cars = list(Car.objects.all())
final_list = []
used_before = []

for car in cars:
    if not car.manf_id in used_before:
        used_before.append(car.manf_id)
        doStuff(car)
        final_list.append(car) 
```

如果出现更好的解决方案，我会接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:40:57.287

> 我只需要得到一个唯一`Cars`的 列表。`Manufacturer`

如何使用[`distinct`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct)：

```
cars = Car.objects.order_by('manf').distinct('manf') 
```

由于上述仅在 PostgreSQL 上受支持，因此您必须解决它：

```
m = Manufacturer.objects.all()

cars = []
for i in m:
    if Car.objects.filter(manf=i).exists():
       cars.append(Car.objects.filter(manf=i).order_by('?')[1]) 
```

这将为每个制造商提供一辆随机汽车。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:35:39.690

我不确定我们如何使用 orm 做到这一点。可以告诉我们如何通过直接sql来实现它：

```
from django.db import connection
cursor = connection.cursor()

cursor.execute("select c.model from myapp_car c, myapp_manufacturer m where m.origin='USA' and m.id=c.manf_id group by m.id") 
```

# python - 在python中使矩阵运算更快的最佳方法是什么

> ID：16160029
> 
> 赞同：0
> 
> 时间：2013-04-23T02:45:32.410
> 
> 标签：python, optimization

当我在我的代码中评估执行时间时，我发现以下三行代码占用了几乎 99% 的运行时间，所以我的目标是优化这三行代码。

以下代码的细节是：R，P，Q都是稀疏矩阵，我使用scipy.sparse.lil_matrix，数据类型是np.float64，而alpha，beta只是float常量。

```
eij = R[i, j] - np.dot(P[i, :], Q[:, j])                             (~9s)
    for k in range(K):                                               (~11s)
         P[i, k] += alpha * (2 * eij * Q[k, j] - beta * P[i, k])
         Q[k, j] += alpha * (2 * eij * P[i, k] - beta * Q[k, j]) 
```

我怎样才能让他们跑得更快！！！？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:40:04.983

原来numpy已经优化了矩阵类型的操作，所以将代码改写为：

```
eij = rating_train[i, j] - np.dot(P[i, :], Q[:, j])
P[i, :] += alpha * (2 * eij * Q[:, j] - beta * P[i, :])
Q[:, j] += alpha * (2 * eij * P[i, :] - beta * Q[:, j]) 
```

这比原始代码快约 1 倍。但是我还是不满意。。

# java - 为什么 Runtime.freeMemory() 只有在我创建一个大对象时才会改变？

> ID：16160034
> 
> 赞同：1
> 
> 时间：2013-04-23T02:46:01.960
> 
> 标签：java

为什么当我为新字节 [1000 * 1000] 创建新字节 [1000] 和 1000016 时，此程序打印 0？

```
 long m0 = Runtime.getRuntime().freeMemory();
    Object obj = new byte[1000];
    long m1 = Runtime.getRuntime().freeMemory();
    System.out.println(m0 - m1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:03:05.940

OpenJDK/Oracle HotSpot JVM 使用 TLAB（线程本地分配缓冲区）来支持并发对象分配。这意味着每个线程都会获取大量内存供其使用。如果关闭此功能，您将看到准确的内存记帐。

运行`-XX:-UseTLAB`

```
long m0 = Runtime.getRuntime().freeMemory();
Object obj = new Object();
long m1 = Runtime.getRuntime().freeMemory();
if (m1 == m0)
    throw new AssertionError("Please disable the TLAB with -XX:-UseTLAB");
System.out.println(m0 - m1); 
```

印刷

```
16 
```

# javascript - 具有淘汰赛的可重用属性验证

> ID：16160037
> 
> 赞同：1
> 
> 时间：2013-04-23T02:46:14.357
> 
> 标签：javascript, knockout.js, coffeescript, knockout-validation

我有以下类验证名称并且不允许用户输入空名称。有了它，我可以获得有效值并在输入无效时通知用户（保留最后一个好的值）。

```
class @Person
  constructor: (name) ->
    @name = ko.observable name
    @nameLastInvalid = ko.observable false
    @nameAttempt = ko.computed
      read: @name
      write: (value) =>
        if value.length > 0
          @name value
          @nameLastInvalid false
        else
          @nameLastInvalid true
      owner: @ 
```

我想让相同的功能更可重用。有没有办法扩展 ko.observable 对象以添加“lastInvalid”和“attempt”方法？

就像是：

```
class @Person
  constructor: (name) ->
    @name = ko.observable(name).extend({ required: true }) 
```

然后能够做到：

```
person.name()
person.name().lastInvalid()
person.name().attempt() 
```

AFAIK[淘汰赛验证](https://github.com/Knockout-Contrib/Knockout-Validation)不能以这种方式工作。它允许您输入无效值，然后告诉您它是否有效。

**更新：**

我添加了以下扩展程序，但它似乎没有做任何事情（我得到 name.attempt 是未定义的）

```
ko.extenders.required = (target, option) ->
  target.lastInvalid = ko.observable false
  target.attempt = ko.computed ->
    read: target
    write: (value) ->
      if value.length > 0
        target value
        target.lastInvalid false
      else
        target.lastInvalid true
  target 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:44:39.327

`->`你的扩展器是偏心不工作，因为你在`attempt`定义中有一个额外 的。因为当你想为计算提供读、写函数时，你需要提供一个对象字面量而不是一个函数：

```
target.attempt = ko.computed
    read: target
    write: (value) ->
      if value.length > 0
        target value
        target.lastInvalid false
      else
        target.lastInvalid true
  target 
```

并且您尝试从基础值而不是可观察对象本身访问附加属性。所以你需要写：

```
person.name()
person.name.lastInvalid()
person.name.attempt() 
```

演示[JSFiddle](http://jsfiddle.net/HZYqj/)。

# python - python中的if else命令：是否可以逐个字符检查导致一个输出？

> ID：16160039
> 
> 赞同：0
> 
> 时间：2013-04-23T02:46:31.960
> 
> 标签：python, if-statement, python-2.7

```
g = raw_input("What gender would you prefer Male or Female? (Please press m or f): ")
p = raw_input("Please enter your 10 digit Phone Number: ")
reasons = raw_input("Please enter your reason by pressing 1-4: ")
r = reasons
valid_mp3 = g+p+r
print valid_mp3
f12312312345 
```

输出形式为：gender (f) phone# (1231231234) Reason (5) 有没有办法说明：

```
if getFirstCharacter(valid_mp3) == 'f':
    # miscellaneous command
if getSecondCharacter(valid_mp3) == '1'
    # miscellaneous command 
```

如何实施`getFirstCharacter`，`getSecondCharacter`例如？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:29:26.307

只对 g 和 p 工作，除非有某些原因你不能。

```
if g == 'f':
    # do something for females
else if g == 'm':
    # do something for males
else:
    # invalid input 
```

与 p 的第一个字符相同：

```
if p[0] == '1':
    # do something for first character of '1' 
```

如果您已经拥有拆分版本，那么尝试对连接版本进行任何复杂的操作是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:50:25.217

您可能可以像这样使用字符串索引：

```
if valid_mp3[0] == 'f':
    miscellaneous command
if valid_mp3[1] == '1':
    some other command 
```

# php - 在页面之间来回发送 PHP 变量

> ID：16160044
> 
> 赞同：7
> 
> 时间：2013-04-23T02:47:00.643
> 
> 标签：php, forms, variables, post

我创建了一个注册表单，它成功地将其变量从注册页面 (go-gold.php) 传递到摘要/验证页面 (go-gold-summary.php)。数据正确显示在第二页上。

但是，我希望能够使用图像按钮返回到注册页面，以防用户输入错误。回过头来，现在应该用第一次输入的数据填充原始表单。

问题是我无法从第二页重新发送/返回数据，回到第一页。我的文本字段显示为空白。**我不想使用会话变量。**

代码从整个页面中截断。

注册页面（go-gold.php）：

```
<?php
$customer_name = $_POST['customer_name'];
?>

<form action="go-gold-summary.php" method="post">

Name: <input type="text" name="customer_name" id="customer_name" value= "<?php echo $customer_name ?>" />
<input name="<?php echo $customer_name ?>" type="hidden" id="<?php echo $customer_name ?>">

</form> 
```

摘要页面 (go-gold-summary.php)

```
<?php
$customer_name = $_POST['customer_name'];
?>

<form action="go-gold.php" method="post">

Name: <?php echo $customer_name ?> <input type="hidden" id="<?php echo $customer_name ?>" name="<?php echo $customer_name ?>">

<INPUT TYPE="image" src="images/arrow_back.png" id="arrow" alt="Back to Registration"> (Button to go back to Registration Page)

</form> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:53:52.220

**go-gold-summary.php**应该像这样更改。

```
<?php
$customer_name = $_POST['customer_name'];
?>

<form action="go-gold.php" method="post">

Name: <?php echo $customer_name ?> <input type="hidden" value="<?php echo $customer_name ?>" name="customer_name">

<INPUT TYPE="submit" src="images/arrow_back.png" id="arrow" alt="Back to Registration"> (Button to go back to Registration Page)

</form> 
```

注意我是如何改变这条线的

```
<input type="hidden" id="<?php echo $customer_name ?>" name="<?php echo $customer_name ?>"> 
```

进入这个

```
<input type="hidden" value="<?php echo $customer_name ?>" name="customer_name"> 
```

$_POST 是一个关联数组，当您提交表单时，它将像这样填充：

```
$_POST["index"] = value; 
```

其中`"index"`是文本字段“名称”，`value`是文本字段值。

您在代码中错过了那个。只需用我的代码更新它就可以了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:01:41.800

为什么你不想使用 php 会话？请给出不使用它的任何理由。我这样问是因为我的声誉不允许我评论问题或回答我自己的问题或答案。请不要为此-1。

另一种方法可能是使用 cookie 临时存储数据，但是与会话相比，在 post 请求中来回发布数据确实不安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:52:35.840

跨页面维护变量的方法很少。另一种方法是在第二页上使用包含 $_POST 数据的隐藏文本字段的单独表单，并且提交按钮调用上一页。不幸的是，无法绕过浏览器上的“后退按钮”。

***我错过了关于会话变量的粗体文本 - 如果这不适用，请忽略：***

在服务器端跨页面维护变量的一种方法是使用 $_SESSION

首先在您的 PHP 页面顶部包含以下内容以保持会话处于活动状态：

```
session_start(); 
```

提交 for 并移至第 2 页后，添加以下内容：

```
$_SESSION['customer_name'] = $_POST['customer_name']; 
```

同样，在第一页上，您可以这样更改表单元素：

```
<input type="text" name="customer_name" value="<?PHP if isset($_SESSION['customer_name'] || !empty($_SESSION['customer_name'])) { echo $_SESSION['customer_name']; } ?>"> 
```

这将保留填写的数据并在用户返回页面时显示它，如果他们输入不同的内容，它将在他们再次点击第 2 页时更新。

# rest - Azure REST WebClient PUT Blob

> ID：16160045
> 
> 赞同：3
> 
> 时间：2013-04-23T02:47:01.557
> 
> 标签：rest, azure, webclient, azure-storage, azure-blob-storage

我正在尝试使用 WebClient 将新的 blob 简单地上传到 Azure 存储计数器，如下所示：

```
var sas = "[a new generated sas with Read, Write, List & Delete permissions]";
var sData = "This is a test!";
var sEndPoint = "http://myaccount.blob.core.windows.net/mycontainer/MyTest.txt" + sas;

var clt = new WebClient();
var res = await clt.UploadStringTaskAsync(sEndPoint, "PUT", sData); 
```

这给了我一个“（400）错误请求”。错误。我在这里做错什么了吗？

谢谢

（顺便说一句，我需要使用 REST 而不是 Client API，因为我在 Silverlight 项目中）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T03:18:07.043

您需要`x-ms-blob-type`为 blob 类型定义请求标头 ( ) 并将其值设置为`BlockBlob`. 同样对于`Put`请求，您还需要定义`Content-Length`请求标头。我写了一篇关于共享访问签名的博客文章并使用它（使用 REST API 和存储客户端库）执行一些 blob 操作，您可以在此处阅读：http: [//gauravmantri.com/2013/02/13/revisiting-windows-天蓝色共享访问签名/](http://gauravmantri.com/2013/02/13/revisiting-windows-azure-shared-access-signature/)。

这是上传 blob 的帖子中的代码。它使用 HttpWebRequest/HttpWebResponse 而不是 WebClient：

```
static void UploadBlobWithRestAPISasPermissionOnBlobContainer(string blobContainerSasUri)
{
    string blobName = "sample.txt";
    string sampleContent = "This is sample text.";
    int contentLength = Encoding.UTF8.GetByteCount(sampleContent);
    string queryString = (new Uri(blobContainerSasUri)).Query;
    string blobContainerUri = blobContainerSasUri.Substring(0, blobContainerSasUri.Length - queryString.Length);
    string requestUri = string.Format(CultureInfo.InvariantCulture, "{0}/{1}{2}", blobContainerUri, blobName, queryString);
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(requestUri);
    request.Method = "PUT";
    request.Headers.Add("x-ms-blob-type", "BlockBlob");
    request.ContentLength = contentLength;
    using (Stream requestStream = request.GetRequestStream())
    {
        requestStream.Write(Encoding.UTF8.GetBytes(sampleContent), 0, contentLength);
    }
    using (HttpWebResponse resp = (HttpWebResponse)request.GetResponse())
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T00:32:53.650

在针对 blob 模拟器进行测试时，这是我需要让它工作的代码：

```
 var connection = ConfigurationManager.AppSettings["AzureStorageConnectionString"];
        var storageAccount = CloudStorageAccount.Parse(connection);

        var client = new WebClient();
        client.Headers.Add("x-ms-blob-type", "BlockBlob");
        client.Headers.Add("x-ms-version", "2012-02-12");
        client.UploadData(string.Format(@"{0}/$root/{1}{2}", storageAccount.BlobEndpoint, myFileName, sharedAccessSignature), "PUT", _content); 
```

# ruby-on-rails - 如何使用 I18n 正确格式化 created_at 输出？

> ID：16160046
> 
> 赞同：0
> 
> 时间：2013-04-23T02:47:02.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, rails-i18n

我正在使用[这个 I18n 文件](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml)。

在我看来，我这样称呼它：

```
<td class="center"><%= l o.created_at %></td> 
```

这是这样输出的：

```
Mon, 22 May 2013 04:04:43 +0000 
```

对于初学者，为什么它显示`May 22, 2013`而不是`April 22`？

当我在控制台中执行此操作时，我得到了这个：

```
> o.created_at
 => Mon, 22 Apr 2013 04:04:43 UTC +00:00 
```

我不希望它显示时间，或者宁愿只说：

```
Monday, April 22, 2013 @ 4:04am 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:07:13.620

您可以将自定义日期/时间格式添加到翻译文件中。要查看可能的基于时间的替换，请参阅[strfime的参考](http://php.net/manual/en/function.strftime.php)

```
formats:
  default: ! '%Y-%m-%d'
  long: ! '%B %d, %Y'
  short: ! '%b %d'
  custom: ! '%A, %M %B, %Y @ %l:%M%P' 
```

在您看来，您可以按如下方式使用：

```
<%= l o.created_at, :format => :custom %> 
```

您可能需要删除 en.yml 文件中的空白条目以更正翻译错误。

# android - android - strings.xml 与静态常量

> ID：16160047
> 
> 赞同：22
> 
> 时间：2013-04-23T02:47:03.200
> 
> 标签：android, string, performance, constants

这就是我的想法：

strings.xml 上的字符串应该用于要使用的布局 (xml)。静态常量供代码（.java）使用。

当谈到最佳实践时，我想知道应该使用哪个。

如果你有很多字符串，它会有性能影响吗？

```
getString(...) vs MyConstants.THIS_IS_A_CONSTANT 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-23T04:29:16.257

在这两种情况下，都有一些优点和缺点（我应该说优点和较少的优点）。

正如您对问题的评论一样，他们都说了。我只是想补充一些小点。

**本土化：**

对于本地化问题，字符串资源绝对是最好的，因为您可以为不同的语言环境使用不同的语言文件。

**记忆：**

由于字符串资源保存在 xml 文件中，所以有一些额外的开销（虽然不是主要的）

**表现：**

从内存读取总是比从文件读取快。尽管在这种情况下，性能差异并不显着

**维护：**

这只是个人意见。对我来说，维护 res 文件比在课堂上维护字符串更容易。string.xml 对我来说更具可读性。

**最后：**

所以我的建议是

> 将字符串资源用于将显示给用户的文本。

和

> 将静态常量用于程序的内部用途，例如数据库名称、内部变量、意图过滤器名称等。

# c++ - 请求从“布尔”转换为非标量类型“ManetAddress”

> ID：16160051
> 
> 赞同：0
> 
> 时间：2013-04-23T02:47:30.100
> 
> 标签：c++

我有这个错误“请求从'bool'转换为非标量类型'ManetAddress'”我只知道它与.H文件有关，但我不知道错误是什么。有人介意帮忙吗？多谢。

```
Class file:    

bool ManetRoutingBase::omnet_exist_rte(struct in_addr dst)
{
    //ManetAddress add = omnet_exist_rte(dst.s_addr);
    ManetAddress add = omnet_exist_rte(dst);
    if (add.isUnspecified()) return false;
    else if (add.getIPv4() == IPv4Address::ALLONES_ADDRESS) return false;
    else return true;
}

RoutingBase.H file

    virtual ManetAddress omnet_exist_rte(ManetAddress dst);     //FIXME revise return values

    virtual bool omnet_exist_rte (in_addr dst);   //FIXME remove it, use the another version 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:50:20.143

因为在这个声明中：

```
ManetAddress add = omnet_exist_rte(dst); 
```

在这里，您递归地调用该函数并将布尔结果分配给其他东西。

* * *

您有两个函数重载`omnet_exist_rte`。编译器通过查看您使用的参数知道要调用哪一个。如果您使用`struct in_addr`它将调用带有`struct in_addr`参数（并返回`bool`）的函数。

要调用返回 a 的函数`ManetAddress`，您必须使用type的*参数*`ManetAddress`调用它。

正如您现在所拥有的，由于您使用相同的参数类型，它将递归调用相同的函数（一遍又一遍，导致堆栈溢出）。但是，由于您尝试将`bool`返回值分配给 a`ManetAddress`编译器会给出错误（因为`ManetAddress`和`bool`不兼容）。

您必须做的是创建一个 type 的变量`ManetAddress`，并使用该变量来调用函数：

```
ManetAddress new_dst;
// TODO: Convert from `struct in_addr` to `ManetAddress`...

ManetAddress add = omnet_exist_rte(new_dst); 
```

# winapi - win32api 使用 SHFileStruct 从回收站恢复文件

> ID：16160052
> 
> 赞同：3
> 
> 时间：2013-04-23T02:47:39.840
> 
> 标签：winapi, restore, undo, delete-file, recycle-bin

我正在使用 win 32 api 构建探索是同一个窗口。我可以删除文件到回收站。现在，我想撤消被删除到回收站的文件。我现在在做什么？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:03:23.310

您必须`IContextMenu`在回收站文件夹中检索所需文件的接口，然后您可以使用该`IContextMenu::InvokeCommand()`方法调用文件上的动词。有关详细信息，请参阅 MSDN：

[对回收站中的项目调用命令](http://blogs.msdn.com/b/oldnewthing/archive/2011/09/01/10204404.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:03:26.817

CodeProject 上的这篇[文章](http://www.codeproject.com/Articles/2783/How-to-programmatically-use-the-Recycle-Bin)似乎正是您要找的。

# java - 如何启动泛型类型

> ID：16160053
> 
> 赞同：0
> 
> 时间：2013-04-23T02:47:41.140
> 
> 标签：java, generics

```
public interface myInterface<T> {

    public List<T> doWork();

}

public abstract class baseClass<T> implements myInterface<T>{

    protected T obj;
    protected List<T> list;

    public baseClass<T>(){
         //how do I initiate obj?
         //how do I initiate list?
    }   
}

public class myClassA extends baseClass<T> {

 public List<T> doWork()
} 
```

我有这段代码，我想知道如何动态启动 obj 和类型 T 的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:01:03.103

您不必初始化任何东西，`BaseClass`因为它是抽象的。但是，你当然可以做到。并且，用大写命名类，用大写命名`B`接口`M`，因为这是标准。您不需要做的是将 放入`<T>`构造函数中。这是一种可能性：

```
public BaseClass(T obj, List<T> list){
    this.obj = obj;
    this.list = list; // Or copy it for safety. 
} 
```

如果您希望由类本身创建列表，请在其声明处对其进行初始化：

```
protected List<T> list = new ArrayList<>();  // Java 7
public BaseClass(T obj){
    this.obj = obj;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:03:32.183

通常，使用泛型，您将传入要在构造泛型对象时使用的类型化对象（或者可能是知道如何创建它们的工厂）。

其他任何东西都是一种 hack，它需要比编译器更多的类型知识，比如使用“反射”来创建一个对象，假设它有一个 0 参数的构造函数（你不应该这样做，或者至少直到你*真的确定*你知道发生了什么——在这种情况下，你不太可能想要这样做）。

# drupal - Drupal 发布的内容未显示在指定节点中

> ID：16160054
> 
> 赞同：1
> 
> 时间：2013-04-23T02:47:44.203
> 
> 标签：drupal, view

我已经发布了内容，`/news/content-title-here`并且当直接链接被点击时它是可用的，但是它没有显示在页面的**新闻**部分，据我所知应该显示这个内容并且来自其他出版商。

我检查了多个类似内容的博客和文章，但似乎无法弄清楚发生了什么。

我已经尝试从现有的发布者帐户以及我的管理员帐户发布，但都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:45:54.790

我创建了一个新视图并从头开始查看哪里出了问题。

原来我的新闻视图有一个把事情搞砸的标准。

```
Filter Criteria > Content: Date - start date (field_event_date) 
```

删除它，瞧 - 一切都出现了。

# forms - 使用jquery mobile提交后表单保持不变

> ID：16160056
> 
> 赞同：0
> 
> 时间：2013-04-23T02:48:12.863
> 
> 标签：forms, caching, jquery-mobile, browser-history

在我使用 jquery mobile 提交表单后，但在提交后，返回表单，所有字段都不再是默认值。他们显示之前提交的数据。

（如果我按 f5，表单将重置并且仅在另一轮中正常工作）我猜浏览器缓存中还有一些东西。

任何想法？

```
<!DOCTYPE html>
<html>
    <head>       
        <script src="scripts/jquery-1.9.1.min.js"></script>
        <script src="./scripts/jquery.mobile-1.3.0.js"></script>        
        <link rel="stylesheet" href="./style/jquery.mobile-1.3.0.min.css" />
      </head>

<body>
<?php if(!(isset($_GET["submit"]))){ ?>    

    <form action="thisPage.PHP?submit=yes" method="get" >
       <input type="text" value="0" />   
       <input type="submit" value="Submit" />
     </form>                        

<?php   }else{   ?>
        <a href="thisPage.PHP" > FINISHED</a>
<?php  }  ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T01:30:24.660

最后我找到了简单易行的答案：将以下行添加到表单标记中：

**数据-ajax="假"**

所以应该是这样的：

```
<form action="thisPage.PHP?submit=yes" method="get" data-ajax="false" > 
```

# uiimage - CIFilter HueAdjust

> ID：16160059
> 
> 赞同：0
> 
> 时间：2013-04-23T02:48:20.593
> 
> 标签：uiimage, cifilter

[如何以编程方式更改 UIImage 的色调？](https://stackoverflow.com/questions/11555071/how-to-programmatically-change-the-hue-of-uiimage)

我正在使用上面页面的建议，用于核心图像过滤器 CIFilter。我遇到的唯一问题是当我旋转到黄色时，它是深芥末黄色，我无法获得最亮的鲜艳黄色，即 R:255 G:255 B:0。我的图层上的图像由简单的颜色 R:255 G:0 B:0 组成，我只想旋转，以获得基本颜色和橙色。橙色效果很好。

我只是不知道为什么当我从 R:255 旋转到尝试得到 R:255 G:255 Yellow 时，它是深黄色。

我在 deltaHueRadians 使用 1.04719755 作为黄色浮点数

我不知道这很奇怪，这是第三次尝试，但我一直得到一个肮脏的黄色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:52:20.087

我意识到了这个问题。

在 Photoshop 中，当我用于照片编辑时，我做了很多 Colorize 操作，我把它们与 Hue Rotation 混淆了。

基本上，当您在 Photoshop 中着色时，它会“着色”图像而不仅仅是色相旋转值。

两者之间的区别是一条非常细的线，具体取决于您使用的图像。我真的不想进行完整的解释，但是...

假设您在图层上有一个灰色立方体，并且您为图像着色，立方体将在您使用滑块时旋转颜色。如果您旋转色相，它将保持灰色。

但是，如果您使用红色立方体并旋转色调，那么色调旋转将带您通过颜色，不一定所有颜色都像着色一样。

我相信这个问题与所有那些好的 ole HSV RGB 矩阵疯狂数学问题有关。我现在没有这样做。保持简单。

我决定只做一个着色方法：

CGContextSetBlendMode(context, kCGBlendModeMultiply);

使用灰色物体，这正是我想要的。

从谷歌搜索我发现了这个：

[http://coffeeshopped.com/2010/09/iphone-how-to-dynamically-color-a-uiimage](http://coffeeshopped.com/2010/09/iphone-how-to-dynamically-color-a-uiimage)

# jquery - Facebook Like Box - 编辑 iFrame CSS

> ID：16160063
> 
> 赞同：1
> 
> 时间：2013-04-23T02:48:58.133
> 
> 标签：jquery, facebook, iframe, widget

我能够使用以下指令将 css 编辑到我的 iframed twitter 小部件： [iframe CSS Override for New Twitter Widget](https://stackoverflow.com/questions/13361823/iframe-css-override-for-new-twitter-widget)

但是，我似乎无法在 facebook 上找到类似的东西，比如 box 小部件。有谁知道类似的东西是否适用于facebook？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:10:03.780

[取自我的博客，你可以在这里](http://heera.it/)看到 Facebook 的likebox ，只是为了改变 Facebook 的外观`iframe`，不能改变`css`，AFAIK

**CSS**

```
.sidebar-box {
    width:260px;
    margin-bottom: 30px;
    padding: 20px;
    border: 1px solid #E3E3E3;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -moz-box-shadow: 0px 0px 8px #ddd;
    -webkit-box-shadow: 0px 0px 8px #DDD;
    box-shadow: 0px 0px 8px #DDD;
} 
```

**HTML**

```
<div class="sidebar-box">
    <iframe src="..." scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:258px;margin-left:-17px;" allowtransparency="true"></iframe>
</div> 
```

[**演示 1**](http://jsfiddle.net/heera/TdfYD/1/)和[**演示**](http://jsfiddle.net/heera/TdfYD/3/)2 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:04:39.520

不幸的是，Facebook 似乎已经删除了所有自定义点赞框的方法。看：

*   [http://pixabay.com/en/blog/posts/how-to-style-a-facebook-like-box-with-css-30/](http://pixabay.com/en/blog/posts/how-to-style-a-facebook-like-box-with-css-30/)（`update`盒子）
*   [使用 CSS 停止工作自定义 Facebook Like Box](https://stackoverflow.com/questions/14610874/customize-facebook-like-box-with-css-stopped-working)
*   [https://developers.facebook.com/bugs/134065666769816](https://developers.facebook.com/bugs/134065666769816)
*   [http://developers.facebook.com/bugs/551565398209379](http://developers.facebook.com/bugs/551565398209379)
*   [https://developers.facebook.com/bugs/252607348205681/](https://developers.facebook.com/bugs/252607348205681/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T05:04:06.560

通过 chrome 或 FF 中的开发者工具查看您的likebox 的源代码。复制 iframe 代码并将从 facebook 获取的 likebox 插件代码替换为 iframe 代码。然后，您可以更改 iframe 的宽度和高度等。

# android - 使用异步任务

> ID：16160064
> 
> 赞同：0
> 
> 时间：2013-04-23T02:49:04.427
> 
> 标签：android, multithreading, android-asynctask, httpwebrequest

我是 android 的新手，我试图从服务器获取一些数据并将其打印到我的设备中。我意识到使用 android 4.x 我们无法做到这一点，因为 UI 线程被阻塞了。我进行了研究，发现了 AsyncTask。有人可以对我的代码提供一些帮助吗？有什么遗漏吗？谢谢

这是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new Thread().execute();        
    openDialog(getCurrentFocus());

} 
```

异步任务类：

```
 private class Thread extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {

               //Here i make a HTTP request.

         return null;
    }
   } 
```

日志猫：

```
04-22 22:43:10.808: E/Trace(12987): error opening trace file: No such file or directory (2)
04-22 22:43:11.098: E/AndroidRuntime(12987): FATAL EXCEPTION: AsyncTask #1

04-22 22:43:11.098: E/AndroidRuntime(12987): java.lang.RuntimeException: An error occured while executing doInBackground()
04-22 22:43:11.098: E/AndroidRuntime(12987):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at java.lang.Thread.run(Thread.java:856)
04-22 22:43:11.098: E/AndroidRuntime(12987): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-22 22:43:11.098: E/AndroidRuntime(12987):    at android.os.Handler.<init>(Handler.java:197)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at android.os.Handler.<init>(Handler.java:111)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at android.widget.Toast$TN.<init>(Toast.java:324)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at android.widget.Toast.<init>(Toast.java:91)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at android.widget.Toast.makeText(Toast.java:238)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at com.application.uprm_map.MainActivity.startApplication(MainActivity.java:72)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at com.application.uprm_map.MainActivity.access$0(MainActivity.java:67)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at com.application.uprm_map.MainActivity$Thread.doInBackground(MainActivity.java:439)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at com.application.uprm_map.MainActivity$Thread.doInBackground(MainActivity.java:1)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-22 22:43:11.098: E/AndroidRuntime(12987):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-22 22:43:11.098: E/AndroidRuntime(12987):    ... 3 more
04-22 22:43:11.413: E/WindowManager(12987): Activity com.application.uprm_map.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{421b4b58 V.E..... R.....I. 0,0-720,412} that was originally added here
04-22 22:43:11.413: E/WindowManager(12987): android.view.WindowLeaked: Activity com.application.uprm_map.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{421b4b58 V.E..... R.....I. 0,0-720,412} that was originally added here
04-22 22:43:11.413: E/WindowManager(12987):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
04-22 22:43:11.413: E/WindowManager(12987):     at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T03:07:33.497

我附上了一个使用 AsyncTask 将参数发布到网页的示例（简化，它应该处理`isCancelled`一个）它应该不会太难适应您的需求。

**AsyncTask 使用**

AsyncTask 必须子类化才能使用。子类将覆盖至少一种方法（[doInBackground(Params...)](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29 "doInBackground（参数...）")），并且通常会覆盖第二种方法（[onPostExecute(Result)](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29 "onPostExecute（结果）")。）

**AsyncTask 的泛型类型**

异步任务使用的三种类型如下：

`Params`, 执行时发送给任务的参数类型。

`Progress`，在后台计算期间发布的进度单元的类型。

`Result`, 后台计算结果的类型。

并非所有类型都始终由异步任务使用。要将类型标记为未使用，只需使用类型 Void：

```
private class MyTask extends AsyncTask<Void, Void, Void> { ... } 
```

**4个步骤**

当一个异步任务被执行时，任务会经过 4 个步骤：

1.  [onPreExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29%20%22onPreExecute%28%29)，在任务执行之前在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。
2.  [doInBackground(Params...) ，在](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29 "doInBackground（参数...）")[onPreExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29%20%22onPreExecute%28%29)完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用[publishProgress(Progress...)](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29 "发布进度（进度...）")来发布一个或多个进度单位。这些值在 UI 线程上的[onProgressUpdate(Progress...)](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29 "onProgressUpdate(进度...)")步骤中发布。
3.  [onProgressUpdate(Progress...)](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29 "onProgressUpdate(进度...)")，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。
4.  [onPostExecute(Result)](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29 "onPostExecute（结果）")，在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。

[在http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)阅读有关 AsyncTask 的更多信息（以上文档取自以下链接）

## POST 到网页的示例

```
// (declaration in main class)
private MyNetworkTask mMyNetworkTask = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    String mURL = "http://www.mydomain.com/mycode.php";
    runMyTask(this, mURL);
}

private class MyNetworkTask extends AsyncTask<String, Void, HttpResponse> { // <doInBackground, onProgressUpdate, onPostExecute>

    private ProgressDialog dialog;
    private Context context;

    public MyNetworkTask(Context ctx) {
        context = ctx;
        dialog = new ProgressDialog(context);
    }

    @Override
    protected void onPreExecute() {
        dialog.setMessage("Working ...");
        dialog.show();
    }
    @Override
    protected HttpResponse doInBackground(final String... params) {
        String mURL = params[0];
        HttpParams httpparams = new BasicHttpParams();
        HttpProtocolParams.setContentCharset(httpparams, "UTF-8");

        HttpClient httpclient = new DefaultHttpClient(httpparams);
        HttpPost httppost = new HttpPost(mURL);
        httppost.setHeader("User-Agent", "MyUserAgent/1.0");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("param1", "value1"));
        nameValuePairs.add(new BasicNameValuePair("param2", "value2"));
        try {
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            return httpclient.execute(httppost);
        } catch (ClientProtocolException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }
    @Override
    protected void onPostExecute(final HttpResponse result) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
        if (result != null) {
            int responseCode = result.getStatusLine().getStatusCode();
            String responseBody="";
            switch(responseCode) {
            case 200:
                HttpEntity entity = result.getEntity();
                if(entity != null) {
                    try {
                        responseBody = EntityUtils.toString(entity);
                    } catch (ParseException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                break;
            }
            Log.v(TAG, "Response Code => " + responseCode);
            Log.i(TAG, "Response Body => " + responseBody);
        }
    }

    @Override
    protected void onCancelled() {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
    }
} // AsyncTask

private void runMyTask(Context ctx, String url) {
    if (mMyNetworkTask != null) {
            return;
        }
        mMyNetworkTask = new NetworkTask(this);
        mMyNetworkTask .execute(url);
} 
```

# java - JComboBox 类型不是通用的

> ID：16160066
> 
> 赞同：0
> 
> 时间：2013-04-23T02:49:08.580
> 
> 标签：java, swing, generics, jcombobox, java-7

我有个问题。我正在调试程序。当我复制程序并导入到我的 Eclipse 中时，出现了一些错误。错误之一是我无法使用 < String > 设置 JComboBox 的参数。但它在我朋友的 Eclipse 中没有显示错误。我们都使用相同的jre1.7。

```
private JComboBox<String> pathComboBox = null;

private JComboBox<String> bodyComboBox = null;

//Error: The type JComboBox is not generic; It cannot be parameterized with argument <String>. 
//So I believe this is not the JRE problem. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:52:50.913

当我将 Swing 项目导入到较旧的 Java 版本环境时，我遇到了同样的问题。检查您的 Eclipse 是否正确配置为使用 java7 SDK。

您应该检查您的项目方面。

正如您在这里看到的：http: [//docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)

# c++ - 运行时错误问题

> ID：16160067
> 
> 赞同：0
> 
> 时间：2013-04-23T02:49:12.200
> 
> 标签：c++, arrays, templates, runtime-error

这里有一些代码，这给了我一个似乎无法修复的运行时错误。函数 Length() 计算点数组中所有点之间的累积距离。它使用了一个之前定义的函数 Distance()，我知道它可以完美地工作。任何指针？

这是我的函数源代码：

```
template<typename Point>                //Length function
double PointArray<Point>::Length() const
{
    double total_length = 0;
    for (int i=0; i<Size(); i++)
    {
        total_length += (GetElement(i)).Distance(GetElement(i+1));
    }
    return total_length;
} 
```

这是我的实现：

```
cout<<"The Length of the Point Array is: "<<(*ptArray1).Length()<<endl; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:50:45.517

您正在读取超出数组末尾的元素。

```
for (int i=0; i<Size(); i++)
{
    total_length += (GetElement(i)).Distance(GetElement(i+1));
                                                      //^^^
} 
```

一个你到达`for`循环的末尾，你读取最后一个元素，然后计算与下一个元素的距离——它在数组的边界之外。你的`for`循环应该是这样的：

```
for (int i=0; i<Size() - 1; i++)
{
    total_length += (GetElement(i)).Distance(GetElement(i+1));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:52:04.947

试试这个：

```
template<typename Point>                //Length function
double PointArray<Point>::Length() const
{
    double total_length = 0;
    for (int i=0; i<Size()-1; i++)
    {               //^^^ otherwise, i+1 will be out of range
        total_length += (GetElement(i)).Distance(GetElement(i+1));
    }
    return total_length;
} 
```

# c++ - 在我的输出的第二行添加了一个空格。不知道怎么去掉

> ID：16160068
> 
> 赞同：1
> 
> 时间：2013-04-23T02:49:17.037
> 
> 标签：c++, space

当我在输出的第二行输出代码时，会添加一个空格，我无法弄清楚如何删除。我已经在这个网站和谷歌上搜索了答案。抱歉，这是一个简单的修复。会张贴图片，但没有足够的声誉。

```
#include<iostream>
#include<iomanip>
#include<fstream>

using namespace std;

// global constant variables
const int YEARS = 8;
const int MONTHS = 12;
const int SPACER =5;

// function prototypes

// function to read in values
void getData(double[][MONTHS], int[]);
// function to display values in table format
void printData(double[][MONTHS], int[]);

// function to print data to screen in table format using arrays

int main()
{
    double rain [YEARS][MONTHS];
    int years[YEARS];
    /*cout << " ";*/
    getData(rain, years);
    printData(rain, years);

return 0;
}

// function definitions 

void getData (double rainArray[][MONTHS], int yearArray[])
{
    ifstream fin;

    fin.open("rainfall.txt");

    if (!fin)
    {
        cout << "Error opening file, shutting down now.\n" ;
        exit(EXIT_FAILURE);
    }
    else
    {
        for( int i = 0; i < YEARS; i++)
        {

            fin >> yearArray[i];

            for (int j = 0; j < MONTHS; j++)
            {
                cout << fixed << setprecision(1);
                fin >> rainArray[i][j];

            }
        }
    }
    fin.close();
}   

void printData (double rainArray[][MONTHS], int yearArray[])
{

    for ( int i = 0; i < YEARS; i++){
        cout << yearArray[i] << setw(SPACER);
        for ( int j = 0; j < MONTHS; j ++)
            {cout << rainArray[i][j] << setw(SPACER);
            if (j == 11)
                cout << endl;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:59:52.857

`setw()`调用（与所有流操纵器一样）需要位于要影响其打印的项目*之前。*

```
cout << setw(SPACER) << yearArray[i]; 
```

您将它们放在项目之后，因此它们对除第一行之外的所有行都生效（给出问题中描述的结果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:59:56.200

你需要在它适用的领域`setw()` *之前写，而不是之后。*

```
void printData (double rainArray[][MONTHS], int yearArray[])
{

    cout << fixed << setprecision(1);    
    for ( int i = 0; i < YEARS; i++){
        cout << setw(SPACER) << yearArray[i];
        for ( int j = 0; j < MONTHS; j ++)
            {cout << setw(SPACER) << rainArray[i][j];
        }
        count << endl;
    }

} 
```

# ruby-on-rails - 录像带之间的 VCR 共享请求？

> ID：16160072
> 
> 赞同：0
> 
> 时间：2013-04-23T02:49:46.963
> 
> 标签：ruby-on-rails, ruby, capybara, vcr, poltergeist

我的录像机配置是：

```
VCR.configure do |c|
  c.configure_rspec_metadata!
  c.cassette_library_dir = 'spec/cassettes'
  c.hook_into :webmock
  c.ignore_localhost = true
end 
```

一个测试示例是：

```
it "creates a build", :vcr => {:cassette_name => "build/feature/create"} do
  visit new_build_path(build)

  fill_in("build_name", :with => "Test Build")
  click_button("Create Build")

  build = Build.first

  page.should have_content("Build was successfully created.")

  current_path.should == build_path(hub)
end 
```

运行此测试时，它会调用几个第 3 方 API，这些 API 会通过 VCR 记录这些请求。我遇到的问题是，VCR 在运行时似乎正在使用来自其他磁带的请求，这导致某些测试出现间歇性故障。我检查了磁带，有时（取决于顺序是如何显示的）所有请求都会被完美地记录和播放。值得注意的是，当整个套件运行时，它们总是在自己运行时工作。我不会在失败的规范之间共享卡带，唯一共享的是对 API 的一些常见请求，我强制对卡带命名以确保它使用正确的卡带。我希望这是有道理的...

我的主要问题是什么可能导致这个问题？使用测试时也可以正常工作，但使用模式`record => :new_episodes`时却不行。`record => :once`考虑到这种情况，这可能没问题，但我想确保我没有创建不必要的请求，并且根据我的理解`record => :once`应该可以工作，因为每个规范的请求都应该被隔离。

我知道如果没有更多信息，这可能很难回答，所以请告诉我是否有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:26:51.453

正如你所说，从你提供的一点点信息中很难回答。不过，我可以提供一些帮助解决问题的建议。

*   您提到您正在使用 capybara JS 驱动程序。Capybara 的 JS 驱动程序是异步的，这意味着您的测试线程可能会在您的应用程序处理特定请求之前继续运行 - 因此，如果测试脚本继续运行并弹出或插入新的 VCR 磁带，然后您的应用程序会发出 HTTP 请求 - - 它可能导致竞争条件。
*   VCR 有一个[debug_logger](https://relishapp.com/vcr/vcr/v/2-4-0/docs/configuration/debug-logging!)选项，可以让您深入了解 VCR 正在做什么。它可能会回答你的问题。

祝你好运！

# c++ - 通过 GPU 读取多个 .dat 文件

> ID：16160073
> 
> 赞同：2
> 
> 时间：2013-04-23T02:49:50.597
> 
> 标签：c++, gpu, gpgpu, c++-amp

我知道通过 GPU 读取文件是低效的任务，因为它面临着系统中最慢的部分，即 IO。但是，我想出了另一种方法，即使用 CPU 读取文件并让 GPU 处理处理负担。我用 C++ 编写了以下代码，但我被困在集成点上，即如何让 GPU 在 CPU 读取这些文件后处理这些文件。换句话说，C++-amp 与代码添加和集成的出发点是什么？还是我应该从头开始重写整个代码？

```
{/* this code to read multiple .dat files from the directory that contains the implementation (from my account of stackoverflow) */

#include <Windows.h>
#include <ctime>
#include <stdint.h>
#include <iostream>
using std::cout;
using std::endl;
#include <fstream>
using std::ifstream;

#include <cstring>

/* Returns the amount of milliseconds elapsed since the UNIX epoch. Works on both
 * windows and linux. */

uint64_t GetTimeMs64()
{

 FILETIME ft;
 LARGE_INTEGER li;

 /* Get the amount of 100 nano seconds intervals elapsed since January 1, 1601 (UTC) and copy it
  * to a LARGE_INTEGER structure. */
 GetSystemTimeAsFileTime(&ft);
 li.LowPart = ft.dwLowDateTime;
 li.HighPart = ft.dwHighDateTime;

 uint64_t ret;
 ret = li.QuadPart;
 ret -= 116444736000000000LL; /* Convert from file time to UNIX epoch time. */
 ret /= 10000; /* From 100 nano seconds (10^-7) to 1 millisecond (10^-3) intervals */

 return ret;

}

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = "|";

int main()
{
  // create a file-reading object
  uint64_t a = GetTimeMs64();
  cout << a << endl;
  HANDLE h;
WIN32_FIND_DATA find_data;
h = FindFirstFile( "*.dat", & find_data );
if( h == INVALID_HANDLE_VALUE ) {
    cout<<"error"<<endl;

}
do {
    char * s = find_data.cFileName;

    ifstream fin;
  fin.open(s); // open a file
  if (!fin.good()) 
    return 1; // exit if file not found

  // read each line of the file
  while (!fin.eof())
  {
    // read an entire line into memory
    char buf[MAX_CHARS_PER_LINE];
    fin.getline(buf, MAX_CHARS_PER_LINE);

    // parse the line into blank-delimited tokens
    int n = 0; // a for-loop index

    // array to store memory addresses of the tokens in buf
    const char* token[MAX_TOKENS_PER_LINE] = {}; // initialize to 0

    // parse the line
    token[0] = strtok(buf, DELIMITER); // first token
    if (token[0]) // zero if line is blank
    {
      for (n = 1; n < MAX_TOKENS_PER_LINE; n++)
      {
    token[n] = strtok(0, DELIMITER); // subsequent tokens
        if (!token[n]) break; // no more tokens
  }
}

    // process (print) the tokens
    for (int i = 0; i < n; i++) // n = #of tokens
      cout << "Token[" << i << "] = " << token[i] << endl;
    cout << endl;
  }
            // Your code here
} while( FindNextFile( h, & find_data ) );
FindClose( h );

  uint64_t b = GetTimeMs64();
  cout << a << endl;
  cout << b << endl;
  uint64_t c = b - a;
  cout << c << endl;

  system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:57:38.857

没有办法处理 GPU 的文件。正如您假设的 CPU 处理 IO。因此，您需要将读取的信息存储在内存中，将其发送到 GPU，在那里进行计算等等。

处理文件的一种好方法是存档（使用 GPU）您的信息。

所以你用 CPU 读取文件，用 GPU 提取 > 计算 > 存档，然后用 CPU 存储它。

UPD。

```
(CPU IO READ from file (should be already archived information))  to -> main memory
(CPU SEND) to -> GPU global memory from main memory

(GPU EXTRACT (if archived))
(GPU COMPUTE (your work here))
(GPU ARCHIVE)

(CPU RETRIEVE) to -> main memory from GPU global memory
(CPU IO WRITE to file) 
```

# sharepoint - 如何使 sharepoint CAML 查询更有效地工作

> ID：16160085
> 
> 赞同：2
> 
> 时间：2013-04-23T02:50:26.950
> 
> 标签：sharepoint, caml

我现在正在处理 sharepoint CAML 查询。从一个充满图像、文档、视频等的巨大资源库中按给定名称提取项目。

我不知道 sharepoint 是否索引 Name 列。我正在考虑使用嵌套查询来使这个查询更快。

我的问题是：sharepoint 查询如何工作？先执行外层，还是从内层开始？

我想先过滤 ResourceType(Image,Document..) 。然后过滤类别，最后取出与名称匹配的项目。下面的查询是否像我需要的那样工作？

```
 <Where>
        <And>
            <Eq><FieldRef Name='IR_ResourcesType' />
                <Value Type='Text'>Image</Value></Eq>
                <And>
                <Eq><FieldRef Name='IR_Category' />
                   <Value Type='Text'>All</Value>
                </Eq>
                <Eq>
                   <FieldRef Name='FileLeafRef' />
                   <Value Type='File'>aaa</Value>
                </Eq>
             </And>
          </And>
       </Where> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:27:41.713

如果可以，请尝试索引列表中的唯一列之一，以便稍后在 where 子句中使用它进行查询。

作为最佳实践，我们还应该只获取我们将使用的列，以免出现数据自助餐。您可以使用 viewFields 来限制将要显示的列。

这是一个[链接](http://avinashkt.blogspot.com/2008/11/caml-tricks.html)，它显示了 CAML 与 SPServices 结合使用的一些提示和技巧，我认为您可能会发现它们很有用。

# java - 使用 OpenNLP 查找位置名称

> ID：16160090
> 
> 赞同：4
> 
> 时间：2013-04-23T02:51:07.410
> 
> 标签：java, location, opennlp

我是 OpenNLP 的新手。我使用 OpenNLP 从句子中查找位置的名称。我的输入字符串是“意大利在 CIA 案中赦免美国上校”。我在结果集中找不到“意大利”字样。我怎么解决这个问题。提前致谢！

```
try {
   InputStream modelIn = new FileInputStream("en-token.bin");
   TokenizerModel tokenModel = new TokenizerModel(modelIn);
   modelIn.close();
   Tokenizer tokenizer = new TokenizerME(tokenModel);
   NameFinderME nameFinder =
      new NameFinderME(
         new TokenNameFinderModel(new FileInputStream("en-ner-location.bin")));
   String tokens[] = tokenizer.tokenize(documentStr);
   Span nameSpans[] = nameFinder.find(tokens);
   for( int i = 0; i<nameSpans.length; i++) {
      System.out.println("Span: "+nameSpans[i].toString());
   }
}
catch(Exception e) {
   System.out.println(e.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T16:50:06.137

opennlp 结果取决于创建模型的数据。sourceforge 上的 en-ner-location.bin 文件可能不包含对您的数据有意义的样本。此外，使用分块器或词性标注器提取名词或名词短语 (NNP) 将不会仅局限于位置。因此，您的问题的答案是：该模型并未考虑数据中的所有情况，这就是您没有对这个特定句子感兴趣的原因。顺便说一句，NER 从来都不是完美的，并且总是会返回一定程度的误报和漏报。

# javascript - 带有选择菜单的 jQuery UI 自动完成和 HTML 表单

> ID：16160091
> 
> 赞同：1
> 
> 时间：2013-04-23T02:51:16.010
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我有一个 HTML 表单，我正在使用 jQuery UI Auto Complete 插件，它运行良好。它允许用户开始输入并从预定义的活动列表中进行选择。

我进一步扩展了它，以便它还填充与使用选择菜单的下一个字段中的活动相关联的匹配“风险类型”。你可以在这里看到一个例子：

[http://jsfiddle.net/fmdataweb/pCZYd/](http://jsfiddle.net/fmdataweb/pCZYd/)

如果您键入“足球”并选择其中一个选项，然后按 TAB 键，它将在选择菜单所在的下一个字段中插入低、中或高。

这是处理此问题的 Javascript：

```
$(function() {

        $( "#lastYearSelect1" )
            .autocomplete({
                source: availableTags })
            .blur(setDropDown);
    });

if(!Array.prototype.indexOf) {
      Array.prototype.indexOf = function(needle) {
          var i;
          for(i = 0; i < this.length; i++) {
              if(this[i] === needle) {
                  return i;
              }
          }
          return -1;
      };
    }

    var risks = [{
    name: 'low',
    activities: ['10 pin bowling', 'active play', 'activities and games', 'aerobics', 'aquaerobics', 'archery', 'athletics', 'backyard play', 'badminton', 'ball games', 'ball play', 'ballet', 'ballet dancing', 'ballroom dancing', 'beach', 'body surfing', 'bodysurfing', 'boogie boarding', 'bowling', 'bushwalk', 'bushwalking', 'canoeing', 'circuit training', 'contemporary dancing', 'croquet', 'cross country running', 'cross country training', 'dance', 'dance practice', 'dance training', 'dancing', 'dancing lesson', 'discus', 'discus throwing', 'fishing', 'folk dancing', 'frisbee', 'golf', 'golf driving range', 'gym', 'gym - cardio', 'gym - weights and cardio', 'gym - weights/aerobics', 'gym session', 'gym workout', 'gym/weights', 'handball', 'hiking', 'hip hop dancing', 'hip-hop', 'indoor bowling', 'irish dancing', 'javelin', 'jazz', 'jogging', 'kayaking', 'kicking football', 'lawn bowling', 'lifesaving', 'light play ', 'little athletics', 'mini putt putt golf', 'modern dancing', 'nippers', 'pilates', 'ping pong', 'play computer games', 'play wii games', 'play with balls', 'playing', 'playing around', 'playing golf', 'playing pool', 'playing snooker', 'playing with friends', 'playing with toys', 'playstation', 'playstation games', 'pool', 'power walking', 'putt putt golf', 'rowing', 'running', 'scuba diving', 'shot put', 'skipping', 'snooker', 'snorkelling', 'sprinting', 'squad swimming', 'swim training', 'swimming', 'swimming laps', 'swimming lesson', 'swimming training', 'table tennis', 'tai chi', 'tap dancing', 'ten pin bowling', 'throwing', 'throwing javelin', 'throwing shot put', 'tramping', 'treadmill', 'treadmill running', 'walking', 'walking dog', 'weights', 'wii active games', 'wii games', 'wii sport', 'yoga']},
    {
    name: 'moderate',
    activities: ['20/20 cricket', 'abseiling', 'acrobatic gymnastics', 'acrobatics', 'acrobatics class', 'artistic gymnastics', 'austag', 'backyard cricket', 'baseball', 'basketball', 'basketball practice', 'basketball training', 'beach volleyball', 'bicycle', 'bicycling', 'bike ', 'bike ride', 'bike riding', 'bikeriding', 'BMX', 'BMX bike', 'board surfing', 'boarding', 'chasings', 'cheerleading', 'chopping wood', 'climbing', 'climbing equipment', 'climbing trees', 'continuous cricket', 'cricket', 'cricket training', 'cross country skiing', 'cycling', 'diving', 'european handball', 'fencing', 'field hockey', 'football', 'football training', 'football umpiring', 'futsal', 'gymnastics', 'gymnastics class', 'high jump', 'hockey', 'horseback riding', 'horseriding', 'hurdles', 'indoor cricket', 'indoor soccer', 'jet skiing', 'jumping on trampoline', 'long jump', 'motor bike riding', 'motorbike', 'motorcycling', 'mountain biking', 'netball', 'netball practice', 'netball training', 'outdoor cricket', 'oztag', 'physical culture', 'playground activities', 'playing in playground', 'playing on equipment', 'racquetball', 'rhythmic gymnastics', 'riding bike', 'riding scooter', 'rockclimbing', 'rockclimbing gym', 'rollerblading', 'rollerskating', 'sailboarding', 'sailing', 'scooter', 'scootering', 'skim boarding', 'soccer', 'soccer refereeing', 'soccer training', 'softball', 'softball training', 'squash', 'surf lifesaving', 'surfing', 'T-ball', 'tennis', 'tennis match', 'tennis training', 'tip ', 'tip football', 'touch football', 'track cycling', 'trampoline', 'trampolining', 'triathlon', 'ultimate frisbee', 'volleyball', 'water polo', 'waterskiing', 'waterslide', 'weightlifting', 'white water rafting', 'windsurfing']},
    {
    name: 'high',
    activities: ['AFL', 'american football', 'aussie rules', 'australian rules football', 'BMX racing', 'boxercise', 'boxing', 'boxing classes', 'gaelic football', 'gridiron', 'ice hockey', 'ice skating', 'ice-skating', 'inline skating', 'judo', 'karate', 'kickboxing', 'kung fu', 'lacrosse', 'martial arts', 'martial arts training', 'mixed martial arts', 'moguls skiing', 'motocross', 'motor cross racing', 'riding rip stick', 'riding skateboard', 'rip stick', 'ripstick', 'rip-stick', 'rodeo', 'rough play', 'rugby', 'rugby football', 'rugby league', 'rugby league training', 'rugby training', 'skate park', 'skateboard', 'ski lessons', 'skiing', 'skiing downhill', 'snowboarding', 'tae kwon do', 'taekwondo', 'TKD', 'toboganning', 'wrestling']}];

 function setDropDown() {
    var $this = $(this);
    var activity = $this.val();
    var i;
    for (i = 0; i < risks .length; i++) {
        if (risks [i].activities.indexOf(activity) > -1) {
            var j;
            var NextddlRisk= $(this).parents("tr").find("[id^='lastYearRisk']")[0]; //find the parent tr, then find the risk dropdown
            for(j = 0; j < NextddlRisk.options.length; j++){
                if (NextddlRisk.options[j].innerHTML == risks [i].name){
                    NextddlRisk.selectedIndex = j;
                    break;
                }                    
            }
        break;
        }
    }

}; 
```

我的问题：是否有可能不必按 TAB 键来发生这种情况，并且一旦用户从列表中选择了活动，这种情况就会发生？对于用户来说，在这个阶段已经预先填充了风险并不明显，因为它直到他们退出该字段才会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:26:37.297

我想我对你在找什么有一个疯狂的猜测。您是否希望在不让用户从自动完成中选择一个选项并导航离开（或按 Tab 键）的情况下用实际值填充下拉列表？如果是这样，您可以订阅自动完成`[select](http://api.jqueryui.com/autocomplete/#event-select)` 事件，这会在您从自动完成下拉列表中选择一个选项时发生，请在`setDropDown`此处调用您的方法。

您的代码太长并且有一些错误，但这里是`[fiddle](http://jsfiddle.net/hsGmA/)`

```
 $("#lastYearSelect1")
        .autocomplete({
        source: availableTags,
        select: function (e, ui) {

           $(e.target).val(ui.item.value);
            setDropDown.call($(e.target));
        }
    })

cloned.find("[id^=lastYearSelect]")
            .autocomplete({
            source: availableTags,
                 select: function (e, ui) {

                 $(e.target).val(ui.item.value);
                setDropDown.call($(e.target));
            }
        }) 
```

# ruby-on-rails - Rails 仅在测试时生成错误的 SQL

> ID：16160094
> 
> 赞同：1
> 
> 时间：2013-04-23T02:51:25.473
> 
> 标签：ruby-on-rails, unit-testing, activerecord

我有这堂课：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation

  attr_accessor :password
  before_save :encrypt_password

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :email
  validates_uniqueness_of :email

  def encrypt_password
    if password.present?
        self.password_salt = BCrypt::Engine.generate_salt
        self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end

  def self.authenticate(email, password)
    user = find_by_email(email)
    if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
      user
    else
      nil
    end
  end
end 
```

它映射到此表：

```
 create_table "users", :force => true do |t|
    t.string   "email"
    t.string   "password_hash"
    t.string   "password_salt"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
  end 
```

我写了这个测试：

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  test "primary case" do
    my_user = User.new(users(:matching_password))
    assert my_user.save, "Didn't save valid user"
  end
end 
```

我的输出是这样的：

```
 1) Error:
test_primary_case(UserTest):
ActiveRecord::StatementInvalid: SQLite3::SQLException: table users has no column
 named password: INSERT INTO "users" ("email", "password", "password_confirmatio
n", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString'
, '2013-04-23 02:39:43', '2013-04-23 02:39:43', 781772301)
    c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.7-x86-mingw
32/lib/sqlite3/database.rb:91:in `initialize'
    c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.7-x86-mingw
32/lib/sqlite3/database.rb:91:in `new'
    c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.7-x86-mingw
32/lib/sqlite3/database.rb:91:in `prepare'
    c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.7-x86-mingw
32/lib/sqlite3/database.rb:134:in `execute'
. . . 
```

我在现场使用这段代码时没有问题，那为什么现在的 SQL 不正确呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:36:44.087

你的`users.yml`文件里有什么？该`users(:matching_password)`调用可能试图在`password`属性中保存某些内容。

# php - PHP重写url但保留锚标签

> ID：16160095
> 
> 赞同：0
> 
> 时间：2013-04-23T02:51:40.193
> 
> 标签：php, url-rewriting

是否可以重写包含 #anchor 标记的 URL - 并将该 #anchor 标记附加到新 url？

在我的新闻 php 脚本中，我检查以确保 request_uri 与我存储在 MySQL 数据库中的数据相匹配。如果不是，我将 301 标头和标头位置发送到正确的 URL。

```
$uri = $_SERVER['REQUEST_URI'];

// Grab the $sid and $url stored in the MySQL table and set it as $realurl
$realurl = "/$sid/$url/";

if ($uri != $realurl)
{
    Header( "HTTP/1.1 301 Moved Permanently" );
    Header( "Location: $realurl" );
    exit;
} 
```

这对我来说效果很好，但问题是我最近在我的新闻页面中添加了一个评论 php 脚本。根据正在执行的操作，它可以将 #comments 或 #comment_form 附加到 url。

有没有办法修改上面的代码，所以如果 $url 和 $realurl 不匹配 - $realurl 的标头位置 + 保留任何可能存在的 #anchor 标记？

* * *

**问题已解决**- 不知道它是如何工作或为什么工作，但我最终所做的只是改变：

```
if ($uri != $realurl) 
```

至

```
if (stristr($uri, $realurl) === false) 
```

如果 $uri 不包含我的 $realurl，则 url 将被重写并且 #anchor 标记仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:49:06.810

您是否尝试将锚标记连接到 URL 的末尾？

```
$uri = $_SERVER['REQUEST_URI'];

// Grab the $sid and $url stored in the MySQL table and set it as $realurl
$realurl = "/$sid/$url/";

if ($uri != $realurl)
{
    Header( "HTTP/1.1 301 Moved Permanently" );
    Header( "Location: $realurl".#someanchortag);
    exit;
} 
```

# html - HTML5 - 在上传时接受/限制文件类型不起作用 - 替代方案？

> ID：16160096
> 
> 赞同：0
> 
> 时间：2013-04-23T02:51:44.360
> 
> 标签：html, upload

```
<form action="" method="post" enctype="multipart/form-data">
<input name="file" type="file" id="fileA" accept="image/jpeg" accept="text/obj"     onchange="fileChange();"/>
<input name="upload" value="Upload" type="button" onclick="uploadFile();" />
<input name="abort" value="Abbrechen" type="button" onclick="uploadAbort();" /> 
```

接受不同意的作品，我可以上传任何东西。我需要一个过滤器解决方案来限制不安全的文件类型。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-21T14:38:39.650

你应该像这样使用它：

```
<input name="file" type="file" id="fileA" accept="image/jpeg,text/obj"     onchange="fileChange();"/> 
```

# codemirror - 下拉列表在文本之前不起作用

> ID：16160102
> 
> 赞同：0
> 
> 时间：2013-04-23T02:52:26.380
> 
> 标签：codemirror

我已将我的 textarea 转换为 codemirror 编辑器。

当我点击 ctrl-space 时，我在当前光标位置打开一个 html 选择元素，以允许用户从选择元素中选择项目并插入到编辑器中。这一切都很好。但是这个选择元素只能在光标之后访问。我的意思是，如果我在编辑器中输入 10 行数据，那么 select 元素只有在第 10 行之后才能正常工作。在第 10 行之前，选择元素打开，但它被禁用或不可访问。

有针对这个的解决方法吗？

以下是示例代码。

```
var placeCodeMirror = function (textareaEle) {
    editor = CodeMirror.fromTextArea(textareaEle, {
        lineNumbers: true,
        lineWrapping: true,
    });
    return editor;
}
$('#textareaEle').keydown(function (e) {
    if (e.ctrlKey && (e.keyCode == 13)) {
        $('#selectElementId').show();
    }
} 
```

# ios - 更改 UITextView 上的属性而不重置属性文本属性

> ID：16160106
> 
> 赞同：6
> 
> 时间：2013-04-23T02:52:53.117
> 
> 标签：ios, uikit, core-text

我有一个`UITextView`被解析的，并且在输入某些字符时它的属性发生了变化。文本没有改变，只有描述文本格式的属性。

如果我解析每个字符条目，我实际上是在抓取`text`，创建具有正确格式的属性字符串，并将`attributedText`textview 的属性设置为我的新属性字符串。这完全破坏了自动更正、双空格快捷方式和拼写检查。

如果我只在输入某些特殊字符时进行解析，这会更好一些，但我会遇到奇怪的错误，比如每个句子的第二个单词都是大写的。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    if (text.length == 0) {
        return YES;
    }
    unichar firstCharacterInText = [text characterAtIndex:0];
    if (/* special character */) {
        [self processTextView];
    }
}

- (void) processTextView {
    NSString *text = self.text;

    NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:text];

    [attributedString addAttribute:NSFontAttributeName value:[UIFont fontWithName:kFontRegular size:12.0f] range:NSMakeRange(0, text.length)];
    [attributedString addAttribute:NSForegroundColorAttributeName value:[UIColor textColor] range:NSMakeRange(0, text.length)];
    // set other properties 
} 
```

我的问题是：有没有办法改变我的文本视图的文本属性而不重置文本视图的`attributedText`属性并破坏所有这些方便的功能`UITextView`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-12-16T18:00:26.893

详细说明`fatuhoku`上面的评论。你可以打电话

```
func setAttributes(_ attrs: [NSAttributedString.Key: Any]?, range: NSRange) 
```

在文本视图的`.textStorage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T11:31:08.990

我遇到了同样的问题，结果发现UITextView 的*属性属性设置触发了**textViewDidChange:*方法。因此，从*textViewDidChange:方法内部设置**属性*文本属性创建了一个无限循环。

 *我做了一个快速修复，每隔一次调用该方法时，我会立即从*textViewDidChange:方法返回。*它似乎工作正常，但我仍然需要检查更多。*

# c# - 如果文本框有名称属性但没有 ID，如何在 C# 中自动填充文本框

> ID：16160109
> 
> 赞同：0
> 
> 时间：2013-04-23T02:53:27.037
> 
> 标签：c#

如果我有一个带有 Web 浏览器控件的应用程序 [c#]，并且我想用单击按钮的信息填充第一个文本区域。我该怎么做？

如果有，我将如何使用 Web 浏览器自动填充 C# 中的 textArea

```
 <textarea class="profile" name="message"></textarea><br /> 
```

但是没有设置 ID 字段？

[C＃]

```
private void messageToolStripMenuItem_Click(object sender, EventArgs e)
    {
        webBrowser1.Document
           .GetElementsByTagName("textarea")
           .GetElementsByName("message")[0]
           .SetAttribute("value", "Something");
      //  HtmlDocument doc = this.webBrowser1.Document;
     //   doc.GetElementsByTagName("textarea")[0].SetAttribute("Value", "a");
    }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        MessageBox.Show("LoadedLux");
        webBrowser1.Document
            .GetElementsByTagName("input")
            .GetElementsByName("q")[0]
            .SetAttribute("value", "Something");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:20:27.440

你试过这个吗？：

```
webBrowser1.Document.GetElementsByTagName("textarea").GetElementsByName("message")[0].SetAttribute("Value", "ThisNewBox"); 
```

**更新**

我刚刚在 Google.com 上尝试了以下操作，效果很好：

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            webBrowser1.Document
                .GetElementsByTagName("input")
                .GetElementsByName("q")[0]
                .SetAttribute("value", "Something");
        } 
```

# java - 登录页面的数据库检索错误

> ID：16160110
> 
> 赞同：0
> 
> 时间：2013-04-23T02:53:45.407
> 
> 标签：java, database, login

我一直在连接到 mySQL 数据库的登录页面上工作，它一直在触发“不正确的用户名或密码警报”。

我打印了它获得的所有值，但无法找出我错在哪里。

我的表的设置方式是 bcsapril 是表中的第一个条目，它打印出来自文本字段的用户名不等于从数据库中检索到的值。我试图将 if(rs2.next()) 更改为 while(rs2.next())

下一帧出现了，但我收到“不正确”消息的次数与数据库中的条目数相同。

我唯一的问题是为什么“bcsapril”总是我的代码正在检索的用户名。任何帮助都会很棒。

```
if(evt.getKeyCode() == KeyEvent.VK_ENTER){
  String user = userTx.getText();
  String pwd = new String (passTx.getPassword());
  String sql = "SELECT * FROM accounts";
  boolean loggedIn = false;

  try{
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost/dardb","root","1234");
            PreparedStatement stmt = con.prepareStatement(sql);
            ResultSet rs2 = stmt.executeQuery(sql);
        while(rs2.next()) {
            String uname = rs2.getString("username");
            String password = rs2.getString("password");
                if((user.equals(uname)) && (pwd.equals(password))){
                    loggedIn = true;
                }
        }

        if(loggedIn){
             DarDBMainFrame x = new DarDBMainFrame();
                    x.setVisible(true); 
                    java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
                    setBounds(0,0,screenSize.width, screenSize.height);
                    setVisible(true);
                    x.setUsername(user);
                    pack();      
                    setUser(user);
                    dispose();
        }else{
                    JOptionPane.showMessageDialog(this, "Incorrect Username or Password!", "Login Error", JOptionPane.ERROR_MESSAGE);
                    System.out.println(user);
                    System.out.println(pwd);
             } 
    }catch (ClassNotFoundException | SQLException | HeadlessException e){
        JOptionPane.showMessageDialog(this, e.getMessage());
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:03:46.147

如果不运行代码，我怀疑问题是因为您没有向`where`SQL 提供子句以将结果限制为提供的用户名。

相反，您从表中选择所有结果，并且只检索第一个结果（通过`rs2.next()`）。

更常见的方法是：

1.  创建一个准备好的表单语句：

    `SELECT * FROM accounts WHERE username = ? and password = ?`

2.  将prepared statement中的第一个参数设置为用户输入的用户名，第二个参数设置为用户的密码

3.  确定返回多少行——如果有一个结果，那么你可以认为认证成功

准备好的语句的示例（未经测试）代码提取可能是：

```
String sql = "SELECT * FROM accounts WHERE username=? AND password=?";  
Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost/dardb","root","1234");
PreparedStatement statement = con.prepareStatement(sql);

statement.setString(1, uname);
statement.setString(2, password);

ResultSet resultSet = statement.executeQuery(); 
```

旁注一旦你得到这个工作 - 你真的不应该在数据库中存储纯文本密码 - 至少尝试使用类似 SHA-1 的值。

请注意，我建议使用准备好的语句，而不是将用户名和密码直接放入 SQL 以防止 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:11:24.090

`while(rs2.next)`这不应该是`if(rs2.next)`因为您要从*Accounts*表中检索所有记录。

如果您在 SQL 语句中提供**where子句，那么****If**条件就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:29:50.713

继@Ravi 的回答之后，如果您必须循环，我会建议以下内容（为清楚起见，删除了无关代码）：

```
boolean loggedIn = false;

while(rs2.next()) {
    if((user.equals(uname)) && (pwd.equals(password))){
        loggedIn = true;
        break;
    }
}

if (!loggedIn) {
    JOptionPane.showMessageDialog(this, "Incorrect Username or Password!", "Login Error", JOptionPane.ERROR_MESSAGE);
} 
```

# ruby-on-rails - Rails 对象值不会显示在视图页面上。没有错误

> ID：16160112
> 
> 赞同：0
> 
> 时间：2013-04-23T02:54:01.107
> 
> 标签：ruby-on-rails

我目前有一个应用程序，允许用户对名为“作品”的博客文章发表评论。以下是模型关系：

```
class User < ActiveRecord::Base
  has_many :works  
  has_many :comments

class Work < ActiveRecord::Base
  belongs_to :user
  has_many :comments

class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :post
  belongs_to :work 
```

Works 展示页面上有一个表单，允许用户发表评论：

```
<%= form_for([@work, @comment]) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Post feedback or contribute content
    to this work!" %>
  </div>
  <%= f.submit "Post", class: "btn btn-small btn-primary" %>
<% end %> 
```

由于评论表单位于 Works 页面上，因此 Works 控制器具有以下用于评论的构建逻辑：

```
def show 
  @work = Work.find(params[:id])
  @comment = @work.comments.build
  @comment.user = current_user
  @activities = PublicActivity::Activity.order("created_at DESC").where(trackable_type: "Work", trackable_id: @work).all
  @comments = @work.comments.order("created_at DESC").where(work_id: @work).all 
    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @work }
    end
  end 
```

评论控制器然后创建评论：

```
def create
    @work = Work.find(params[:work_id])
    @comment = @work.comments.build(params[:comment])
    @comment.user = current_user
    if @comment.save
      #flash[:success] = "Post created!"
      redirect_to @work
    else
      render 'home#index'
     end
  end 
```

**我的问题是作品展示页面将显示提交评论的用户名，但由于某种原因，即使数据库中有内容值，它也不会显示“内容”字段的值！**我没有收到任何错误消息。我只是得到一个空框，内容文本应该在哪里。

这是显示内容的作品展示页面（减去 html 格式）：

```
<% @comments.each do |comment| %>
<%= image_tag @comment.user.photo.url(:avatar) %> <%= link_to @comment.user.full_name, @comment.user if @comment.user %>
<%= @comment.content %>
<% end %> 
```

如果我将@comment.content 替换为@comment.work_id 之类的内容，我将在网页上显示数字“1”。正如我之前提到的，数据库中存储的内容确实存在有效值。为什么不显示？为什么没有错误？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:02:21.613

在您的视图代码中，您正在迭代`@comments`并将每一个存储为`comment`（注意缺少`@`）-然后在您所指的循环中，`@comment`这可能完全是另一回事。

更改`@comment`为`comment`.

# vhdl - “变量”类型与“变量”类型不兼容

> ID：16160114
> 
> 赞同：0
> 
> 时间：2013-04-23T02:54:45.160
> 
> 标签：vhdl

我收到以下错误：来自我的 VHDL 项目：

> 错误：HDLParsers:800 -“C:/Users/Theo/Desktop/Dropbox/ECE 120/Robotic Arm/top.vhd”第 90 行。in_tilt 的类型与倾斜类型不兼容。
> 
> 错误：HDLParsers:800 -“C:/Users/Theo/Desktop/Dropbox/ECE 120/Robotic Arm/top.vhd”第 91 行。in_pan 的类型与 pan 的类型不兼容。
> 
> 错误：HDLParsers:800 - “C:/Users/Theo/Desktop/Dropbox/ECE 120/Robotic Arm/top.vhd” 第 92 行。pwm_tilt 的类型与 pwm_tilt 的类型不兼容。
> 
> 错误：HDLParsers:800 - “C:/Users/Theo/Desktop/Dropbox/ECE 120/Robotic Arm/top.vhd” 第 93 行。pwm_pan 的类型与 pwm_pan 的类型不兼容。

这是适用的代码。我有一个带有以下代码的顶级 VHDL 模块：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.std_logic_unsigned.all; 

entity top is
port (
  clk_in : in std_logic;
  pause : in std_logic;
  reset : in std_logic;
  switch : in std_logic_vector(3 downto 0);-----------------------------------------
  deb_in : in std_logic; ---from another switch
  deb_out : out std_logic; ---to test the debouncer
  pwm_pan : out std_logic_vector(7 downto 0);
  pwm_tilt : out std_logic_vector(7 downto 0)
);
end top; 
```

PWM 的组件声明：

```
COMPONENT PWM
PORT(
     clk_100 : in  std_logic;
     reset : IN  std_logic;
        in_tilt : in std_logic;
        in_pan : in std_logic;
     pwm_pan : OUT  std_logic;
        pwm_tilt : out std_logic
    );
END COMPONENT; 
```

还有适当的信号：

```
signal tilt : std_logic_vector (7 downto 0);
signal pan : std_logic_vector (7 downto 0); 
```

然后是这段代码：（这是我的错误出现的地方。）

```
 u1: PWM PORT MAP (
     clk_100 => clk_100,
     reset => reset,
--Line 90    in_tilt => tilt,
--Line 91   in_pan => pan,          
--Line 92    pwm_tilt => pwm_tilt,
--Line 93    pwm_pan => pwm_pan
); 
```

这是 PWM VHDL 模块中的代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.std_logic_unsigned.all; 

entity PWM is
Port ( clk_100 : in  STD_LOGIC;
       reset : in  STD_LOGIC;
          in_tilt : in std_logic_vector( 7 downto 0);
          in_pan : in std_logic_vector( 7 downto 0);
          pwm_tilt : out std_logic_vector (7 downto 0);
          pwm_pan : out std_logic_vector (7 downto 0)
          );
end PWM; 
```

知道是什么导致了这个错误吗？我希望我已经包含了所有相关的代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:52:52.520

在组件声明中，您将 in_tilt、in_pan、pwm_tilt 和 pwm_pan 声明为 std_logic。您稍后附加的信号（倾斜、平移、pwm_tilt、pwm_pan）都是 std_logic_vectors！因此这些类型真的不兼容;-)

要解决这个问题，请调整您的组件声明并在声明中使用 std_logic_vector ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:52:26.203

`tilt`是类型`std_logic`。

`in_tilt`是类型`std_logic_vector`。

`pan`和相同`in_pan`。类型`std_logic`和`std_logic_vector`通常不兼容（除非您的 slv 宽度为 1）。

# java - 使用 Java 小程序的 Phidg ets

> ID：16160116
> 
> 赞同：0
> 
> 时间：2013-04-23T02:55:03.393
> 
> 标签：java, security, applet, accesscontrolexception

我正在尝试将一个 phidget 接口工具包附加到我的小程序，它给了我这个错误：

```
java.lang.ExceptionInInitializerError
    at AppletTest.init(AppletTest.java:15)
    at sun.applet.AppletPanel.run(AppletPanel.java:434)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "loadLibrary.phidget21")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.SecurityManager.checkLink(SecurityManager.java:835)
    at java.lang.Runtime.loadLibrary0(Runtime.java:839)
    at java.lang.System.loadLibrary(System.java:1084)
    at com.phidgets.Phidget.<clinit>(Phidget.java:26)
    ... 3 more 
```

我在phidget论坛上问过，没有回答。有没有人对 phidgets 有任何经验并知道发生了什么？

网址：[http ://www.phidgets.com/](http://www.phidgets.com/)

我的代码：

```
import java.applet.Applet;
import com.phidgets.*;
import com.phidgets.event.*;
import java.awt.*;

public class AppletTest extends Applet implements Runnable
{
  private InterfaceKitPhidget ik;

  public void init()
  {

     try
     {
        ik = new InterfaceKitPhidget();
        ik.openAny();
        System.out.println("Waiting for interface kit attachement..");
        ik.waitForAttachment();
     }
        catch (PhidgetException e)
        {
           System.out.println("Phidget Exception");
        } 

  }

  public void start()
  {
  }

  public void stop()
  {
  }

  public void destroy()
  {
  }

  public void paint(Graphics g)
  {
  }

  public void run()
  {
  }
} 
```

# laravel - 关于 Laravel 4 中的路由

> ID：16160118
> 
> 赞同：1
> 
> 时间：2013-04-23T02:55:20.973
> 
> 标签：laravel, laravel-4

我可以说 Laravel 4 中的所有控制器默认都是 RESTful 控制器吗？如何制作非 RESTful 控制器？RESTful 控制器和资源控制器有什么区别？

```
// routes.php
Route::get('/', 'HomeController'); 
```

我可以说 HomeController 是一个 RESTful 控制器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:39:04.210

在 RESTful 控制器中，方法名称以它们应该响应的 HTTP 动词为前缀，因此，如果您将 TaskController 分配给 URI 任务，如下所示：

```
Route::controller('tasks', 'TaskController'); 
```

并做一个 GET 请求`/tasks/info`将调用该`TaskController@getInfo`方法。有关详细信息，请参阅[http://four.laravel.com/docs/controllers#restful-controllers 。](http://four.laravel.com/docs/controllers#restful-controllers)

在资源丰富的控制器中，有可用的预定义方法与创建的自动路由相匹配。您可以将资源丰富的控制器分配给这样的路由：

```
Route::resource('lists', 'ListController'); 
```

然后，这允许您执行 GET 请求`/lists/1`，例如，它应该显示 ID 为 1 的列表并调用该`ListController@show`方法。此处提供完整列表：http: [//four.laravel.com/docs/controllers#resource-controllers](http://four.laravel.com/docs/controllers#resource-controllers)。

要回答第一个问题，除非您使用`Route::controller()`. 通过手动将路由分配给控制器方法来使用普通控制器，如下所示：

```
Route::get('about', 'HomeController@about'); 
```

或命名路线：

```
Route::get('about', array(
'as' => 'about',
'uses' => 'HomeController@about'
)); 
```

# c++ - 解析 avconv/ffmpeg rawvideo 输出？

> ID：16160119
> 
> 赞同：3
> 
> 时间：2013-04-23T02:55:28.117
> 
> 标签：c++, stream, ffmpeg

我即将开始一个项目，该项目将涉及以 rgb32 格式逐像素处理 avconv/ffmpeg 的输出。我打算使用原始字节流，例如来自`pipe`协议的。基本指针算法 (C/C++) 将用于迭代这些像素，并以任意方式实时修改它们。

我使用 rawvideo 格式和编解码器创建了一个非常小的文件，并在十六进制编辑器中打开它。正如预期的那样，它只是一系列像素，从右到左，从上到下阅读。不区分行 - 没问题，如果您事先知道视频的宽度。不区分帧 - 没问题，如果你也知道视频有多高。没有帧速率的文件头，甚至没有编码（rgb32、rgb24、yuv 等）是什么——同样，只要你已经知道，它就可以使用。

当 - 由于某种原因 - 缺少某些字节时，就会出现问题。也许从一开始就没有检查流，这可能是我的项目中的情况，或者可能只是丢失了一些东西。世界上所有预先存在的知识（除了可能错过的字节数，不会发生）不会阻止它愉快地前进，线条和框架的偏移不正确。

所以，我正在寻找的是 rawvideo 的一个选项，或者可能是其他一些格式/编解码器，这将允许我在像素级别以 RGB 处理生成的流，但仍然有一个新的明确定义帧开始，即使它恰好在帧中间开始“寻找”。（宽度、高度和帧率确实是已知的。）

# matlab - Matlab中的颜色条定位

> ID：16160128
> 
> 赞同：0
> 
> 时间：2013-04-23T02:56:30.463
> 
> 标签：matlab, matlab-figure

我正在使用下面的代码来显示 3 个数字的一​​个条形。我在问是否有人可以帮助我使酒吧水平而不是垂直？因此，条形图在右端垂直，我希望它在底部水平，从第一个图到最后一个图。

这是我正在使用的代码：

```
ax(1)=subplot(1,3,1);
ax(2)=subplot(1,3,2);
ax(3)=subplot(1,3,3);
h=colorbar;
set(h, 'Position', [.9 .11 .05 .8150]);
for i=1:3
pos=get(ax(i), 'Position');
set(ax(i), 'Position', [pos(1) pos(2) 0.8*pos(3) pos(4)]);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:07:21.190

我能够使用以下方法解决它：

```
h=colorbar('SouthOutside');
set(h, 'Position', [.1 .05 .8150 .05]);
for i=1:3
pos=get(ax(i), 'Position');
set(ax(i), 'Position', [pos(1) 0.1+pos(2) pos(3) 0.8*pos(4)]);
end; 
```

# ruby-on-rails - 如何从我的 Ruby on Rails 模型类中删除依赖项？

> ID：16160129
> 
> 赞同：0
> 
> 时间：2013-04-23T02:56:32.413
> 
> 标签：ruby-on-rails, coding-style, ruby-on-rails-3.2

我有这堂课：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation

  attr_accessor :password
  before_save :encrypt_password

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :email
  validates_uniqueness_of :email

  def encrypt_password
    if password.present?
        self.password_salt = BCrypt::Engine.generate_salt
        self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end

  def self.authenticate(email, password)
    user = find_by_email(email)
    if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
      user
    else
      nil
    end
  end
end 
```

我是一名 C# 开发人员，并且知道这个类与 ActiveRecord 和 BCrypt 紧密耦合。如果我使用 C#，我会将 BCrypt 的使用提取到另一个类中，并通过依赖注入传递新类。至于 ActiveRecord 的使用，我会定义一个接受这个类作为参数的类来持久化。

我应该尝试对 Ruby 采取相同的路线，还是有更好的方法来消除对 ActiveRecord 和 BCrypt 的依赖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:44:12.927

我知道您的问题更针对编码风格，但我想回答可能使这一切变得更容易的问题 - 并建议您查看Rails 3.1 中引入的[has_secure_password方法。](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html#method-i-has_secure_password)这将抽象出`encrypt_password`and`authenticate`方法。

现在 - 关于你原来的问题 - 你可以使用 Ruby 中的模块来分离功能。对于您的特定用例，`include`和的组合`extend`是必要的，我用一个`included`钩子来结束。

```
module PasswordEncryption
  def self.included(base)
    base.extend(ClassMethods)
  end

  module ClassMethods
    def authenticate(email, password)
      user = find_by_email(email)
      if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
        user
      else
        nil
      end
    end
  end

  def encrypt_password
    if password.present?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end
end

class User < ActiveRecord::Base
  include PasswordEncryption
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:46:27.217

要打破 BCrypt 的耦合，然后尝试创建一个模块并将其混合到您的模型类中。如果您需要，网上有很多关于 Ruby mixins 的信息。

恐怕脱离 ActiveRecord 可能会更加困难。您可能会考虑在这里使用相同的方法，通过使用您的业务逻辑创建一个模块，然后将其混合到 AR 类中。

您可以向您的模块添加回调，这些模块在包含或扩展时被调用，这是您获得依赖项注入的地方。请参阅[http://ruby-doc.org/core-1.9.3/Module.html#method-i-included](http://ruby-doc.org/core-1.9.3/Module.html#method-i-included)

## 回应有关测试的评论

Ruby 使仅存根方法或包含另一个模块变得容易，该模块将在测试期间覆盖加密模块中的方法。这似乎有点“脏”。

假设您已将加密逻辑分离到一个名为`Encryption::BCrypt`. 您希望包含该模块，除非在测试环境中运行。一个干净的方法是创建一个初始化程序，例如 config/initializers/encryption.rb，它有这样一行

`User.send(:include, Encryption::BCrypt) unless Rails.env.test?`

然后在您的测试代码中，您可能希望删除适当的方法或将测试加密模块包含到您的 User 类中。

# javascript - JSON CSS 解析器

> ID：16160134
> 
> 赞同：1
> 
> 时间：2013-04-23T02:57:08.087
> 
> 标签：javascript, css, json, parsing, recursion

我的递归函数正在中断，我不知道为什么。我正在尝试使用准系统 javascript 为 json 编写一个解析器到 css 并且似乎无法理解为什么我的函数不起作用。谁能帮我一把？

在 css 中，您将获得属于您正在处理的特定元素的子元素，如下所示

```
#nav li{
  some style here
} 
```

试图在 javascript 中操作相同的东西是行不通的。到目前为止，我的代码适用于简单的选择器。

```
var json = {
    "body" : {
        "background": "#303030",
        "color": "#FFFFFF",
        "font-family": "Arial, Helvetica, sans-serif"
    },
    "#nav": {
        "li": {
            "display": "inline-block",
            "list-styles": "none",
            "margin-right": "10px",
            "padding": "10px, 10px"
        }
    }
}
// How to use:
// json is an obj
// body is a selector
// background is a property belong to a selector
// #303030 is a value for the property

//apply css changes to document without writing any css
//by default the first values are
//               selector = background
//               parent   = document
//               object   = json
function styleApply(selector, parent, object){
    var element, onSelector, signal;

    //checks the first character of the selector and grabs element from page depending on what type of element it is
    switch(selector[0]){
        case ".":
            element= parent.getElementsByClassName(selector.substring(1));
            newParent = element[0]; //checks to see what is in the first index of the obtained element
            break;
        case "#":
            element= parent.getElementById(selector.substring(1));
            newParent = element;
            break;
        default:
            element= parent.getElementsByTagName(selector);
            newParent = element[0];
            break;
    }

    //only works if there is actually an element in the page corresponding with the selector
    if(newParent != null){ 
        //loops through all elements with the same selector or in the case of id just does one loop
        for(var i=0; i<element.length; i++){ 

            //loops through all properties in the selector
            for (var property in object[selector]){
                //grabs the associated value with the selector could be string or object
                var value= object[selector][property];

                //if it is a string it is a style, if it is an object, it is targeting the elements inside the current selector only
                if(typeof(value) === "string"){
                    element[i].style.setProperty(property, value);
                }else{

/*I am breaking my code right here*/

                    //reusing the same function, this time selector is equal to property for the case of nav, it is the element 'li'
                    //newParent is the element who is a parent of the current element (e.g 'nav' is parent of 'li')
                    //value is the new object that is replacing json, 
                    styleApply(property, newParent, value); //since value is an object it did not pass the string test and now the new object is value
/*Problem ends here */

                }
            }
        }
    } 
}

my code for looping over all the values in json
for (var selector in json){
    styleApply(selector, document, json);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T18:19:29.377

我只是碰巧研究了 json 来编写一个比直接将字符串和数字连接在一起更干净的 css。我没有将样式直接应用于每个元素，而是将它们放入一个`<style>`元素中，这样可以更轻松地在页面的整个生命周期中进行更改。它还能够定位伪元素，例如我使用的 :before。

无论如何，这是功能：

```
// convert json to css
function jsonToCss(obj) {
    var x, finalStr=''
    for (x in obj) {
        var y, decStr=''
        for (y in obj[x]) {
            decStr+= y + ':' + obj[x][y] + ';'
        }
        finalStr+= x + '{' + decStr + '}'
    }
    return finalStr
} 
```

由于该函数仅通过两个级别递归（一个用于选择器，一个用于声明），因此您的 json 需要进行如下修改：

```
var json = {
    "body" : {
        "background": "#303030",
        "color": "#FFFFFF",
        "font-family": "Arial, Helvetica, sans-serif"
    },
    "#nav li": {
        "display": "inline-block",
        "list-styles": "none",
        "margin-right": "10px",
        "padding": "10px, 10px"
    }
} 
```

将其输入函数，您将获得以下字符串：

```
body{background:#303030;color:#FFFFFF;font-family:Arial, Helvetica, sans-serif;}#nav li{display:inline-block;list-styles:none;margin-right:10px;padding:10px, 10px;} 
```

然后您可以将其放入样式元素中。我还没有验证该函数生成的字符串以查看它是否格式正确，但它对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T23:53:30.557

> 这是我读到的关于将 json 解析为 css 的简短代码，我想尝试一下
> 
> -- 选择器指的是你用 json 写的 css 选择器
> 
> -- parent 开始引用文档，就像在 javascript 中的 Document 对象模型中一样
> 
> --object是传入的json对象
> 
> 如果我滥用任何行话，请再次纠正我

```
function styleApply(selector, parent, object){
    var element, onSelector, signal;

    switch(selector[0]){
        case ".":
            element= parent.getElementsByClassName(selector.substring(1));
            break;
        case "#":
            element= [parent.getElementById(selector.substring(1))];
            break;
        default:
            element= parent.getElementsByTagName(selector);
            break;
    }

    if(element[0] != null){
        for(var i=0; i<element.length; i++){ 
            for (var property in object[selector]){

                var value= object[selector][property];

                if(typeof(value) === "string"){
                    element[i].style.setProperty(property, value);
                }else{
                    styleApply(property, element[i], object[selector]);
                }
            }
        }
    } 
} 
```

# php - 从一列中显示多列的等效值

> ID：16160136
> 
> 赞同：1
> 
> 时间：2013-04-23T02:57:27.563
> 
> 标签：php, mysql, sql, pdo

## 结构

我有 3 张桌子：

第一个是 [设备] 表：

```
+----------+----------+-----------+-------------+----------+---------+
| equip_id | chara_id | weapon_id | headgear_id | armor_id | ring_id |
+----------+----------+-----------+-------------+----------+---------+
|        3 |        1 |         3 |           3 |        5 |       6 |
|        4 |        2 |         1 |           2 |        3 |       4 |
+----------+----------+-----------+-------------+----------+---------+ 
```

第二个是 [item] 表：

```
+---------+--------------+-----------+----------+----------+----------+-------------------------------+-----------+------------+
| item_id | item_name    | item_type | item_atk | item_def | item_atr | item_img                      | item_desc | item_price |
+---------+--------------+-----------+----------+----------+----------+-------------------------------+-----------+------------+
|       0 | Halberd      |         1 |      220 |       20 |        0 | pics/weapons/halberd.png      |           |        400 |
|       1 | Axe          |         1 |      220 |      -10 |        0 | pics/weapons/axe.png          |           |        200 |
|       2 | Wooden Sword |         1 |       70 |        0 |        0 | pics/weapons/wooden-sword.png |           |        225 |
|       3 | Dagger       |         1 |       60 |        5 |        0 | pics/weapons/dagger.png       |           |         55 |
|       4 | Bow          |         1 |      120 |        1 |        0 | pics/weapons/bow.png          |           |          0 |
|       5 | Helmet       |         4 |        0 |       20 |        0 | pics/headgear/helmet.png      |           |        155 |
|       6 | Tunic        |         2 |        0 |       10 |        0 | pics/armors/tunic.png         |           |         50 |
|       7 | Armour       |         2 |        0 |       45 |        0 | pics/armors/armour.png        |           |          0 |
|       8 | Necklace     |         3 |       15 |        5 |        0 | pics/accessories/necklace.png |           |        199 |
+---------+--------------+-----------+----------+----------+----------+-------------------------------+-----------+------------+ 
```

最后一个是 [chara] 表：

```
+----------+------------+----------------+------------+
| chara_id | chara_name | chara_class_id | chara_gold |
+----------+------------+----------------+------------+
|        1 | Lawrence   |              1 |          0 |
|        2 | Testo      |              0 |          0 |
|        3 | Viscocent  |              2 |          0 |
|        4 | Piatos     |              1 |          0 |
|        5 | Hello      |              4 |          0 |
+----------+------------+----------------+------------+ 
```

## 我的障碍：

我想从选定的字符中显示每个、和（都来自设备表）的等价物`item_name`（来自项目表） 。例如：`weapon_id``armor_id``headgear_id``ring_id`

武器 ID：1 => 物品表中的物品
名称 Armor_id：3 => 物品表中的物品名称等。

预期结果：当我查询一个角色的装备时，它返回武器名称而不是武器 ID。
---------------
chara_id：1
武器：匕首
头饰：匕首（字符数据是样本，只要它返回 item_name 就没有关系）
盔甲：头盔
戒指：束腰外衣

这可以通过 4 个查询简单地解决，但如果有更好的解决方案，我不想使用 4 个查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:23:52.033

尝试

```
SELECT e.chara_id,
       e.weapon_id, i1.item_name weapon_name,
       e.headgear_id, i2.item_name headgear_name,
       e.armor_id, i3.item_name armor_name,
       e.ring_id, i4.item_name ring_name
  FROM equipment e LEFT JOIN
       item i1 ON e.weapon_id = i1.item_id LEFT JOIN
       item i2 ON e.headgear_id = i2.item_id LEFT JOIN
       item i3 ON e.armor_id = i3.item_id LEFT JOIN
       item i4 ON e.ring_id = i4.item_id 
 WHERE e.chara_id = 1 
```

输出

```
| CHARA_ID | WEAPON_ID | WEAPON_NAME | HEADGEAR_ID | HEADGEAR_NAME | ARMOR_ID | ARMOR_NAME | RING_ID | RING_NAME |
------------------------------------------------------------------------------------------------------------------
|        1 |         3 |      Dagger |           3 |        Dagger |        5 |     Helmet |       6 |     Tunic | 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/a6379/5)**

*如果您根本不需要结果集中的 id，只需将它们从查询中删除*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:24:35.053

您可以使用连接

```
SELECT c.chara_name as name, i.item_name
FROM chara c
  LEFT JOIN equipment AS e ON c.chara_id = e.chara_id
  LEFT JOIN item AS i ON i.id = e.item_id
WHERE c.chara_id = 1 
```

你可能会得到多行来处理..但这将是一个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:25:43.133

我想你正在寻找这个：

```
SELECT e.equip_id, w.item_name AS weapon, a.item_name AS armor, 
    h.item_name AS headgear, r.item_name AS ring
FROM equipment e
INNER JOIN item AS w ON (w.item_id = e.weapon_id)
INNER JOIN item AS a ON (w.item_id = e.armor_id)
INNER JOIN item AS h ON (w.item_id = e.headgear_id)
INNER JOIN item AS r ON (w.item_id = e.ring_id) 
```

;-)

# android - adb 的 USB 驱动程序不适用于摩托罗拉 mc40

> ID：16160142
> 
> 赞同：6
> 
> 时间：2013-04-23T02:58:24.170
> 
> 标签：android, usb, drivers, motorola

1.  我正在运行 Windows 7 和 Eclipse。模拟器运行良好！
2.  我的摩托罗拉 MC40 选中了设置-应用程序->开发者->usb 调试框。
3.  我使用来自 [https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481的驱动程序](https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481)
4.  MC40 无法识别
5.  “abd devices”命令显示没有连接设备。
6.  /sdk/extras/google/usb_drivers 中的驱动程序不起作用。

我到处搜索，找不到答案。我真的很想将我的 Android 设备与 Eclipse 一起使用。有没有人有摩托罗拉MC类手持设备的经验？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T11:23:05.697

嗨，摩托罗拉解决方案的安卓开发人员（企业版设备）-

按照以下链接下载exe并安装，然后adt肯定会检测到企业版Android的摩托罗拉设备，例如ET1-Android平板电脑，MC 40和TC55。

您可以从[摩托罗拉解决方案支持网站](https://portal.motorolasolutions.com/Support/US-EN/Resolution?solutionId=95914)下载它并搜索**“Android USB 驱动程序”**。

目前最新版本是 1.1，涵盖 ET1、MC40 和 TC55。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-13T17:56:23.223

我找到了这个链接，安装了 Windows 驱动程序，它运行良好。

[https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481](https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481)

希望这对你们中的一些人有所帮助。

我找不到向您在上面发布链接的人提供信用的链接......但谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-15T14:42:43.207

这是驱动程序的工作链接。

[https://portal.motorolaso​​lutions.com/Support/US-EN/Resolution?solutionId=95914&productDetailGUID=f5563b1ca4151410VgnVCM10000001c7b00aRCRD&detailChannelGUID=a0bde8cea8151410VgnVCM10000001c7b00aRCRD](https://portal.motorolasolutions.com/Support/US-EN/Resolution?solutionId=95914&productDetailGUID=f5563b1ca4151410VgnVCM10000001c7b00aRCRD&detailChannelGUID=a0bde8cea8151410VgnVCM10000001c7b00aRCRD)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T22:41:05.933

我在网上找到的所有说明似乎都不起作用，但这就是我所做的。

1.  从 motorola 网站安装 USB 设备驱动程序。

2.  在设备管理器中，找到“MC40”设备，并更新它的驱动程序。

3.  选择浏览我的电脑

4.  然后“让我从设备列表中选择”

5.  选择 ADB Interfaces->Motorola->Motorola Composite ADB Interface

6.  必要时重新启动 USB 调试

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-02T21:08:36.997

好了朋友们！我找到了解决方案。您必须从 sdk 更改原始 google ini 和 inf 文件，然后重新安装设备。这是手册： [https ://docs.symbol.com/ReleaseNotes/MC40N0_ADB_Setup_Instruction.docx](https://docs.symbol.com/ReleaseNotes/MC40N0_ADB_Setup_Instruction.docx)

重要提示：我的 MC40 的供应商 ID 似乎有点不同，因此我必须将手册中的 GUID 更改为我在“设备管理器”中找到的那些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-08T23:55:34.140

不确定它是否对任何人有帮助，但我对扩展坞有疑问。我将micro USB直接插入设备，现在可以正常操作了。

我还从这个站点下载了驱动程序。

[https://portal.motorolaso​​lutions.com/Support/US-EN/Resolution?solutionId=92183&productDetailGUID=d476e3883f840410VgnVCM10000081c7b10aRCRD&detailChannelGUID=2202caf8fb16e310VgnVCM1000000389bd0aRCRD](https://portal.motorolasolutions.com/Support/US-EN/Resolution?solutionId=92183&productDetailGUID=d476e3883f840410VgnVCM10000081c7b10aRCRD&detailChannelGUID=2202caf8fb16e310VgnVCM1000000389bd0aRCRD)

# git - Git-TF 将所有更改推送到另一个 TFS 存储库

> ID：16160143
> 
> 赞同：6
> 
> 时间：2013-04-23T02:58:25.633
> 
> 标签：git, tfs, git-tf

`TFS`我将 repo克隆到我的本地`Git`，然后尝试`TFS`使用以下命令将远程更改为另一个存储库以将所有变更集传输到它：

```
git tf --force configure http://tfs2012:8080/tfs/DefaultCollection $/ProjectName

git tf checkin 
```

之后出现以下错误：

```
git-tf: TF14019: The changeset 31129 does not exist 
```

怎么了？

PS：老版本库有2010版本，新版本是2012。新版本库是空的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T03:58:06.597

如果我不提到 git-tf 并不是要替代适当的迁移和集成工具，那我就失职了。

也就是说，如果你想尝试，你不能简单地`git tf clone`一个存储库，然后`git tf checkin`到另一个服务器。 `git-tf`将提交映射到变更集以确保 git 和 TFS 存储库的一致性。因此，当您更改远程时，它会在新服务器中查找这些更改集。

如果您真的想将其推送到新服务器，则需要删除更改集以提交映射。

要做到这一点，最简单和最可靠的方法 - 不会弄乱配置数据 - 是简单地克隆 git 存储库并使用新服务器设置克隆的存储库。然后你可以`git tf checkin`对它：

```
$ git clone ~/path/to/repo ~/path/to/cloned_repo
Cloning into cloned_repo...
done.
$ cd ~/path/to/cloned_repo
$ git-tf configure https://youraccount.visualstudio.com/DefaultCollection $/YourProject
Configuring repository
$ git-tf checkin 
Connecting to TFS...
Checking in to $/YourProject: 100%, done. 
```

由于`git-tf`仅映射单个 TFS 存储库，因此这也允许您进行增量移动。如果在初始迁移之后，您想要迁移新的变更集，您可以将它们拉到克隆的 git 存储库，然后将它们推送到新的 TFS 服务器而无需重新配置。

```
$ cd ~/path/to/cloned_repo
$ git pull ~/path/to/repo
$ git-tf checkin
Connecting to TFS...
Checking in to $/YourProject: 100%, done. 
```

# facebook-graph-api - Facebook FQL 中的非法字符

> ID：16160145
> 
> 赞同：1
> 
> 时间：2013-04-23T02:58:31.103
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-fql, illegalstateexception

我的 FQL 返回 UID 的非法字符。这是我的 FQL。 `select uid,books from user where uid in (select uid2 from friend where uid1=me())`. 我正在使用 PHP SDK，我得到的 id 像`1.0000008018280E+14`（中间有 'E' 的东西。）。在我总共 600 个联系人中，大约有 400 个这样显示 UID。我尝试指向`facebook.com/1.0000008018280E+14`，它返回**304 page not found 错误**。我正在使用的代码是

```
 $fql_query_url = 'https://graph.facebook.com/'.'fql?q=select+uid,books+from+user+where+uid+in(select+uid2+from+friend+where+uid1=me())'.'&access_token='.$_GET['access'];
   $fql_query_result = file_get_contents($fql_query_url);
   $fql_query_obj = json_decode($fql_query_result, true)

  // display results of fql query
echo '<pre>';
print_r($fql_query_obj);
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:10:56.177

根据[How to get around or make PHP json_decode not alter my very large integer values？](https://stackoverflow.com/questions/8759314/how-to-get-around-or-make-php-json-decode-not-alter-my-very-large-integer-values)，你可以这样做：

```
<?php
$fql_query_url = 'https://graph.facebook.com/'.'fql?q=select+uid,books+from+user+where+uid+in(select+uid2+from+friend+where+uid1=me())'.'&access_token='.$_GET['access'];
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_result = preg_replace('/:\s*(\-?\d+(\.\d+)?([e|E][\-|\+]\d+)?)/', ': "$1"', $fql_query_result);
$fql_query_obj = json_decode($fql_query_result, true);

echo '<pre>';
print_r($fql_query_obj);
echo '</pre>'; 
?> 
```

或者，如[处理 PHP 中 FQL 返回的大用户 ID 中所述](https://stackoverflow.com/questions/2907806/handling-big-user-ids-returned-by-fql-in-php)

```
<?php
$fql_query_url = 'https://graph.facebook.com/'.'fql?q=select+uid,books+from+user+where+uid+in(select+uid2+from+friend+where+uid1=me())'.'&access_token='.$_GET['access'];
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode(preg_replace('/("\w+"):(\d+)/', '\\1:"\\2"', $fql_query_result), true);

echo '<pre>';
print_r($fql_query_obj);
echo '</pre>'; 
?> 
```

# android - main.xml 和 activity_main.xml 之间的区别？

> ID：16160146
> 
> 赞同：2
> 
> 时间：2013-04-23T02:58:33.817
> 
> 标签：android

我是Android的初学者。在各种教程中，我提到了位于 res.layout 文件夹中的 main.xml。我使用最新版本的eclipse。但我找不到 main.xml；相反，我找到了activity_main.xml。这两个（main.xml 和 activity_main.xml）是一样的吗？

我也找不到线性布局标签，因为教程说它应该是打开新项目时出现的默认标签。相反，我找到了相对布局。我认为正因为如此，我所有的元素（按钮）都是重叠的。请提出解决此问题的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T03:03:21.687

两个文件之间没有区别。它们只是名称不同。所以

```
If your file name is activity_main.xml use it like this in onCreate()
    setContentView(R.layout.activity_main); 
```

别的

```
If your file name is main.xml use it like this in onCreate()
    setContentView(R.layout.main); 
```

如果它不是衬垫布局，你可以像这样改变它，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 2" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 3" 
        android:layout_weight="1"/>

</LinearLayout> 
```

请按照此 tut 进行更多说明， [http: //www.mkyong.com/android/android-linearlayout-example/](http://www.mkyong.com/android/android-linearlayout-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:11:45.867

main.xml 只是一个布局文件，您的项目包含用于存储 xml 布局...如果您使用的是 ecipse，它将自动生成（并且 Eclipse 将修复其名称，如 activity_youractivityname.xml）

尝试逐步学习 1>首先创建 android 项目

```
File->New->android application project 
```

按照步骤操作，如果成功，将创建 android 项目。

2>创建项目后，您可以在`res/layout`项目资源管理器的文件夹中找到所有 .xml 文件

3>现在打开任何你想要的xml，你可以随意尝试它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:49:23.207

主要的.xml

这是一个用于制作用户界面的布局文件。

它始终是来自项目资源管理器的**res->layout结构。**

您可以使用名称转换标准创建您的名称，并将在您的 java 文件中进一步使用。

当您创建项目时，默认情况下会创建一个`java and xml`文件。所以不用担心。

# javascript - Javascript 会将 iframe 高度设置为手动给定的字符串，但不会设置为变量

> ID：16160153
> 
> 赞同：0
> 
> 时间：2013-04-23T02:59:36.870
> 
> 标签：javascript, iframe, height

我有一个无法工作的功能。我在stackoverflow上搜索了同样的问题，但没有找到任何解决方案......

所以这是我的 index.php 中的代码片段。我有一个带有 news/index.php 的 iframe。

```
<div id="hirek1">
    <iframe id="newsframe" src="news/index.php"></iframe>
</div>
<script type="text/javascript" src="mutato.js">milyenmagas();</script> 
```

这是news/index.php。它的内容是一个 php 代码，其输出高度根据其中新闻的长度动态变化：

```
<div id="hirekmagassag"><!--content--></div>
<script type="text/javascript" src="mutato.js">milyenmagas();</script> 
```

函数（mutato.js）：

```
function milyenmagas()
{
    if(document.getElementById('hirekmagassag') != null)
        var divmag = document.getElementById('hirekmagassag').offsetHeight;
        var framemag = (divmag + 10 + 'px');
    if(document.getElementById('hirek1') != null)
        var iframe = document.getElementById('hirek1').getElementsByTagName('iframe')[0];
    if(document.getElementById('hirek1') != null)
        iframe.height = framemag;
    if(document.getElementById('hirek1') != null)
        iframe.style.height = framemag;
setTimeout('milyenmagas();', 1000);
} 
```

因此，该函数的重点是将 iFrame 的高度设置为等于（+10 像素以避免滚动条）与其中内容的高度。正如您在上面看到的，该函数在两个 div 之后调用，并且由于它们被调用两次（在每个文件中一次），ifs 用于整理两个 php 文件之间的操作。

这对我现在不起作用。除非我将*iframe.height*和*iframe.style.height*的值从变量*framemag*更改为例如“500px”，否则它可以完美运行。我不明白我做错了什么。即使我调用*alert(framemag);* 它抛出了应该作为样式参数完美工作的正确字符串。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:10:42.790

尝试

```
function milyenmagas() {
    var hirekmagassag = document.getElementById('hirekmagassag');

    if (hirekmagassag != null) {
        var divmag = hirekmagassag.offsetHeight;

        var framemag = (divmag + 10) + 'px';

        var hirek1 = document.getElementById('hirek1');
        if (hirek1) {
            var iframe = hirek1.getElementsByTagName('iframe')[0];
            console.log(framemag)
            iframe.height = framemag;
            iframe.style.height = framemag;
        }

    }
    setTimeout('milyenmagas();', 1000);
} 
```

演示：[Plunker](http://plnkr.co/edit/JhbOn6RFMnP2kp8VQwUu?p=preview) - 调整消息 div 的大小以调整 iframe 的大小

# javascript - 嵌套列表视图

> ID：16160154
> 
> 赞同：0
> 
> 时间：2013-04-23T02:59:39.003
> 
> 标签：javascript, web-services, jquery, jquery-mobile

这是来自我的网络服务的 SOAP XML 响应。我想把（代码、名称、类别和产量）这个放到 jquery mobile 中的 listview 中，我使用 Icenium（html、css、js、jquery 移动框架）。并计算所有桌子，以便我可以输入徽章通知。谢谢！！我希望你能帮帮我

```
<DataSet xmlns="http://tempuri.org/">
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema"xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="Table">
<xs:complexType>
<xs:sequence>
<xs:element name="Code" type="xs:int" minOccurs="0"/>
<xs:element name="Name" type="xs:string" minOccurs="0"/>
<xs:element name="Keywords" type="xs:string" minOccurs="0"/>
<xs:element name="Category" type="xs:string" minOccurs="0"/>
<xs:element name="Yield" type="xs:double" minOccurs="0"/>
<xs:element name="YieldUnit" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">

<NewDataSet xmlns="">
<Table diffgr:id="Table1" msdata:rowOrder="0">
<Code>106377</Code>
<Name>Blackened red snapper</Name>
<Category>123</Category>
<Yield>4</Yield>
<YieldUnit/>
</Table>
<Table diffgr:id="Table2" msdata:rowOrder="1">
<Code>303570</Code>
<Name>Celery soup</Name>
<Category>123</Category>
<Yield>1</Yield>
<YieldUnit/>
</Table>
<Table diffgr:id="Table3" msdata:rowOrder="2">
<Code>303675</Code>
<Name>Challah French Toast</Name>
<Category>123</Category>
<Yield>6</Yield>
<YieldUnit/>
</Table>
<Table diffgr:id="Table4" msdata:rowOrder="3">
<Code>303681</Code>
<Name>Challah french toast</Name>
<Category>123</Category>
<Yield>4</Yield>
<YieldUnit/>
</Table>
<Table diffgr:id="Table5" msdata:rowOrder="4">
<Code>303744</Code>
<Name>Chana dhal (or dal)</Name>
<Category>123</Category>
<Yield>6</Yield>
<YieldUnit/>
</Table>
</NewDataSet>
</diffgr:diffgram>
</DataSet> 
```

我的 HTML 代码

```
 <div class="article">

                    <h1>List Of Recipes</h1>

                    <ul id="RecipeList" data-inset="true">
                        </ul>

            </div><!-- /article --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:33:21.293

您需要做几件事。首先，使用来自 jQuery 的 $.ajax() 调用从服务器获取 XML 响应。第二。解析 xml 响应并使用如下代码找到您需要的数据：

```
var xmlText = $(xml).find("soap\\:Envelope").find("soap\\:Body").find("getPurseBalanceResponse").find("getPurseBalanceResult").find("balance").text();
console.log(xmlText); 
```

接下来，一旦解析，可以使用 jquery append() 方法将获得的数据附加到您的列表视图中。

# c++ - 指向派生类型的基类指针

> ID：16160166
> 
> 赞同：0
> 
> 时间：2013-04-23T03:00:47.987
> 
> 标签：c++, pointers, polymorphism

所以我一直在努力解决演员阵容。在其他语言中，我见过类似的代码

```
Player player = (DifferentObject as Player) 
```

尤其是在多人游戏方面。我的问题是，如何在 C++ 中复制这种代码？如果我使用

```
A* a = new B(); 
```

每当我想调用 B 函数时，我都需要转换 a 。

```
struct A
{
    A() { }
    virtual ~A() { }

    void a_only_func() const
    {
        std::cout << "a only func." << std::endl;
    }

    virtual void a_virtual_func() const
    {
        std::cout << "a virtual func." << std::endl;
    }
};

struct B : public A
{
    B() { }
    ~B() { }

    void b_only_func() const
    {
        std::cout << "Hello." << std::endl;
    }

    void a_virtual_func() const
    {
        std::cout << "derived." << std::endl;
    }
};

int main()
{
    A* a = new B()
    ((B*)a)->b_only_func();              /* identical - prints Hello.
    (static_cast<B*>(a))->b_only_func();  * identical */
    a->a_only_func();                    // prints a only func.
    a->a_virtual_func();                 // prints derived.
    ((B*)a)->a_virtual_func();           // prints derived
    delete a;
    return 0;
} 
```

如您所见，一切都按预期进行。但并非没有明确的演员表。我在这里错过了一些微妙的东西吗？

**更新**

以下似乎代表了我正在寻找的成语。

```
void do_stuff(Player* player)
{
    DerivedPlayer localVar = dynamic_cast<DerivedPlayer*>(player);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:03:33.333

在调用成员函数时，您不需要使用这样的强制转换。当您实例化时，`B`您可以将其分配给类型的变量`B*`并仍然调用在“A”和“B”中声明的函数

```
B *b = new B();

b->b_only_func();     // identical - prints Hello.
b->b_only_func();     // identical
b->a_only_func();     // prints a only func.
b->a_virtual_func();  // prints derived.
b->a_virtual_func();  // prints derived 
```

如果您需要保留指向基类的指针，`A`您可以使用它`dynamic_cast`来检索指向派生类的指针。

```
A* a = new B();

B* b = dynamic_cast<B*>(a); 
```

如果变量`a`不是从类型派生`B`的，`dynamic_cast`则将返回`NULL`

```
if(b == NULL)
{
   // a is not derived from type 'B'
} 
```

这要求“A”是一种多态类型并且至少有一个虚成员函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T03:07:44.857

如果您需要一种行为，其中每个类都需要为方法提供自己的实现，那么您需要将这些函数放在基类中并将它们标记为`virtual`，每个派生类都应覆盖这些方法。这允许您根据具体情况调用适当的方法具体的对象类型而不是指针。

如果您需要通过基类指针调用特定于派生类的方法，那么是的，您确实需要显式转换。`dynamic_cast`如果类是多态的，最好使用 a 。但请注意，如果您需要经常这样做，那么您可能在设计中遗漏了一些东西，您必须重新审视设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T03:11:47.603

> 不是没有明确的演员表吗？

如果您使用基类指针调用虚函数，则不需要使用显式强制转换。它在运行时根据基类指针指向的对象类型来决定。

如果你调用的是非虚函数，那么如果你将派生类对象赋值给基类指针，如果你需要调用派生类的非虚函数，你需要强制转换。

以上应解释以下结果：

```
A* a = new B(); //don't miss ; 
//you use base class pointer to point to derived class object
((B*)a)->b_only_func();              
//identical - prints Hello. b_only_func is not virtual, 
//you need cast in order to really call B's function, 
//otherwise, you will get compile error since 
//b_only_func() is not a member of a
a->a_only_func();    // prints a only func.
a->a_virtual_func();   // prints derived. this is expected because of polymorphism
((B*)a)->a_virtual_func();           // prints derived, not needed in this case
delete a; 
```

# c# - Windows 服务 OnStop 问题

> ID：16160167
> 
> 赞同：0
> 
> 时间：2013-04-23T03:00:49.893
> 
> 标签：c#, .net, service, windows-services

我有一个 Windows 服务，它是我从许多博客和论坛中整合而来的，主要是我在这里提出并回答的问题。该服务工作正常。唯一的问题是当我停止服务时；当我停止它时，向下粘贴的是我在日志文件中看到的内容。

```
public partial class GBBInvService : ServiceBase
{
    private static readonly ILog log = LogManager.GetLogger(typeof(GBBInvService));
    System.Timers.Timer timer = new System.Timers.Timer();
    private volatile bool _requestStop=false;
    private ManualResetEventSlim resetEvent = new ManualResetEventSlim(false);

    public GBBInvService()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        _requestStop = false;
        timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
        timer.Interval = 18000;
        timer.Enabled = true;
        timer.Start();
        log.Info("GBBInvService Service Started");
    }

    protected override void OnStop()
    {
        log.Info("inside stop"); 
        if (!_requestStop)
        {
            log.Info("Stop not requested");
            timer.Start();
        }    
        else
        {
            log.Info("On Stop Called");
            WaitUntilProcessCompleted();
        }
    }

    private void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        log.Info("Timer elapsed at " + Convert.ToString(e.SignalTime)); 
        InvProcessing();
    }

    private void InvProcessing()
    {
        try
        {
            resetEvent.Reset();
           //*Processing here*
        }
        catch (Exception ex)
        {
            resetEvent.Set();
            log.Error(ex.Message); 
        }
    }

    private void WaitUntilProcessCompleted()
    {
        resetEvent.Wait();
    }
} 
```

该服务正常停止并再次正常启动，但我不知道我的代码是否错误，因为日志文件显示：

*2013-04-23 14:53:01,062 [6] INFO GBBInvService.GBBInventoryService [(null)] – 内部停止*

*2013-04-23 14:53:01,062 [6] 信息 GBBInvService.GBBInventoryService [(null)] – 未请求停止*

它进入内部`(!_requestStop)`而不是`else`. 我的代码错了吗？有人可以向我解释为什么它会进入`(!_requestStop)`而不是 else 语句。

任何建议都将不胜感激，因为我才刚刚开始亲身体验 Windows 服务和最近的日志记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-30T22:07:21.947

除非有什么改变 _requestStop，否则它总是假的。

ServiceBase 没有自动将_requestStop 设置为true 的代码，并且您的程序不会在任何地方更改它。

您的代码按预期运行。

当从 Windows 服务管理器请求停止时运行 OnStop()。[在http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstop.aspx](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstop.aspx)查看更多信息

你会设置

```
_requestStop = true 
```

在 OnStop() 的顶部向程序的其余部分发出信号以完成任何任务。

也就是说，我不知道你想让这个程序做什么。我可以就它应该做什么提供更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T16:44:43.743

根据您共享的代码，我认为发生了一些事情：

*   正如其他人指出的那样，没有`_requestStop = true;`地方，`!_requestStop`总是会评估为`true`。那么`else`in`OnStop()`就不可能执行了。`volatile`添加到'`_requestStop`声明后，也许您希望操作系统对其进行修改，但声明应该是`public`; 即便如此，操作系统也不会自动修改`_requestStop`. 所以，是的，关于`_requestStop`并期望`else`永远执行，您的代码似乎是错误的。
*   您的使用`_requestStop`似乎背叛了不信任，`OnStop()`只有在应该调用它时才会调用它（即，当请求停止时）。作为 Windows 服务的新手，我想我可以看到这一点，但这种不信任是没有根据的。
*   正如您所指出的那样，作为日志记录新手，您正在过度记录 IMO；有时少即是多。

除非您未共享使用`_requestStop`的代码，否则我会针对您提出的有关代码的特定问题和问题建议以下更改：

```
public partial class GBBInvService : ServiceBase
{
    private static readonly ILog log = LogManager.GetLogger(typeof(GBBInvService));
    System.Timers.Timer timer = new System.Timers.Timer();
    //private volatile bool _requestStop=false; // no _requestStop
    private ManualResetEventSlim resetEvent = new ManualResetEventSlim(false);

    public GBBInvService()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        //_requestStop = false;
        timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
        timer.Interval = 18000;
        timer.Enabled = true;
        timer.Start();
        log.Info("GBBInvService Service Started");
    }

    protected override void OnStop()
    {
        //log.Info("inside stop"); 
        //if (!_requestStop)
        //{
        //    log.Info("Stop not requested");
        //    timer.Start();
        //}    
        //else
        //{
        //    log.Info("On Stop Called");
        //    WaitUntilProcessCompleted();
        //}

        WaitUntilProcessingCompleted();
        log.Info("GBBInvService Service Stopped");
    }

    private void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        log.Info("Timer elapsed at " + Convert.ToString(e.SignalTime)); 
        InvProcessing();
    }

    private void InvProcessing()
    {
        try
        {
            resetEvent.Reset();
            //*Processing here*

        }
        catch (Exception ex)
        {
            log.Error(ex.Message); 
        }
        finally
        {
            resetEvent.Set();
        }
    }

    private void WaitUntilProcessCompleted()
    {
        resetEvent.Wait();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T03:05:28.050

我看不出有什么问题。你的逻辑永远不会改变_requestStop = true。它总是错误的。

!false 肯定会通过 if-true 块。

# css - 照片库页面加载速度极慢

> ID：16160170
> 
> 赞同：0
> 
> 时间：2013-04-23T03:01:04.430
> 
> 标签：css, html, web

我的照片库页面需要很长时间才能加载。有没有更简单的方法？我尝试将图像全部缩小以更快地加载，但它仍然非常慢并且有时会冻结。

这是大约60张照片。

CSS：

```
#center img
        {
        opacity:0.5;
        -webkit-transition: opacity 1s linear;
        }

#center img:hover
        {
        opacity:1.0;
        -webkit-transition: opacity 1s linear;
        }

#center {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px; width: 494px; border-radius:8px; 
        }
#center  a img {
    border: 2px solid black;
    height: 100px;
    margin-top: 4px;
    vertical-align: top;
    width: 145px;
} 
```

HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
<script language="JavaScript">
<!--hide

var password;
var pass1="maze";
password=prompt('Please enter your password to view this page!',' ');
if (password==pass1)
  alert('Password Correct! Click OK to enter page you mazers!');
else
   {
    window.location="http://fun256.com/photos/411.png";
   } 
//-->
</script>

<title>Predict the Result</title>
   <meta charset="utf-8">
   <link rel="stylesheet" href="april.css" />
 </head>
 <body>
    <div id="container" class="clearfix">
     <!-- Header --> <!-- Left Column -->
     <div id="center">
     <a href="IMG_0590.jpg" target="_blank"><img src="IMG_0590.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;
     <a href="IMG_0591.jpg" target="_blank"><img src="IMG_0591.jpg" height="228" width="304" alt="" /> </a>&nbsp;&nbsp;&nbsp;
     <a href="IMG_0592.jpg" target="_blank"><img src="IMG_0592.jpg" height="228" width="304" alt="" /> </a>
     <a href="IMG_0593.jpg" target="_blank"><img src="IMG_0593.jpg" height="228" width="304" alt="" /> </a>&nbsp;&nbsp;&nbsp;
     <a href="IMG_0594.jpg" target="_blank"><img src="IMG_0594.jpg" height="228" width="304" alt="" /> </a>&nbsp;&nbsp;&nbsp;
     <a href="IMG_0595.jpg" target="_blank"><img src="IMG_0595.jpg" height="228" width="304" alt="" /> </a><a href="IMG_0596.jpg" target="_blank"><img src="IMG_0596.jpg" height="228" width="304" alt="" />&nbsp;&nbsp;&nbsp;&nbsp; </a>
     <a href="IMG_0597.jpg" target="_blank"><img src="IMG_0597.jpg" height="228" width="304" alt="" /> </a>&nbsp;&nbsp;&nbsp; <a href="IMG_0598.jpg" target="_blank"><img src="IMG_0598.jpg" height="228" width="304" alt="" /> </a>
    <a href="IMG_0599.jpg" target="_blank"><img src="IMG_0599.jpg" height="228" width="304" alt="" /> </a>&nbsp;&nbsp;&nbsp; <a href="IMG_0600.jpg" target="_blank"><img src="IMG_0600.jpg" height="228" width="304" alt="" /> </a>&nbsp;&nbsp;&nbsp;
    <a href="IMG_0601.jpg" target="_blank"><img src="IMG_0601.jpg" height="228" width="304" alt="" /> </a> <a href="IMG_0602.jpg" target="_blank"><img src="IMG_0602.jpg" height="228" width="304" alt="" /> </a>&nbsp;&nbsp;&nbsp;
    <a href="IMG_0530big.jpg" target="_blank"><img src="IMG_0530.jpg" height="228" width="304" alt="" /> </a> &nbsp;&nbsp;&nbsp; <a href="IMG_6098.jpg" target="_blank"><img src="IMG_6098.jpg" height="228" width="304" alt="" /></a>
    <a href="IMG_0531.jpg" target="_blank"><img src="IMG_0531.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0532.jpg" target="_blank"><img src="IMG_0532.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0533.jpg" target="_blank"><img src="IMG_0533.jpg" height="228" width="304" alt="" /></a>
    <a href="IMG_0534.jpg" target="_blank"><img src="IMG_0534.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0535.jpg" target="_blank"><img src="IMG_0535.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0536.jpg" target="_blank"><img src="IMG_0536.jpg" height="228" width="304" alt="" /></a>
    <a href="IMG_0537.jpg" target="_blank"><img src="IMG_0537.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0538.jpg" target="_blank"><img src="IMG_0538.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0539.jpg" target="_blank"><img src="IMG_0539.jpg" height="228" width="304" alt="" /></a>
    <a href="IMG_0540.jpg" target="_blank"><img src="IMG_0540.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0541.jpg" target="_blank"><img src="IMG_0541.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; 
    <a href="IMG_0542.jpg" target="_blank"><img src="IMG_0542.jpg" height="228" width="304" alt="" /></a><a href="IMG_0543.jpg" target="_blank"><img src="IMG_0543.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; 
    <a href="IMG_0544.jpg" target="_blank"><img src="IMG_0544.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0545.jpg" target="_blank"><img src="IMG_0545.jpg" height="228" width="304" alt="" /></a>
    <a href="IMG_0546.jpg" target="_blank"><img src="IMG_0546.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0547.jpg" target="_blank"><img src="IMG_0587.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp;
     <a href="IMG_0548.jpg" target="_blank"><img src="IMG_0548.jpg" height="228" width="304" alt="" /></a><a href="IMG_0549.jpg" target="_blank"><img src="IMG_0549.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; 
    <a href="IMG_0550.jpg" target="_blank"><img src="IMG_0550.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0551.jpg" target="_blank"><img src="IMG_0551.jpg" height="228" width="304" alt="" /></a>
    <a href="IMG_0552.jpg" target="_blank"><img src="IMG_0552.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0553.jpg" target="_blank"><img src="IMG_0553.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp;
     <a href="IMG_0554.jpg" target="_blank"><img src="IMG_0554.jpg" height="228" width="304" alt="" /></a><a href="IMG_0555.jpg" target="_blank"><img src="IMG_0555.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp;
     <a href="IMG_0556.jpg" target="_blank"><img src="IMG_0556.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0557.jpg" target="_blank"><img src="IMG_0557.jpg" height="228" width="304" alt="" /></a>
   <a href="IMG_0558.jpg" target="_blank"><img src="IMG_0558.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="IMG_0559.jpg" target="_blank"><img src="IMG_0559.jpg" height="228" width="304" alt="" /></a>&nbsp;&nbsp;&nbsp;&nbsp; 
   <a href="IMG_0560.jpg" target="_blank"><img src="IMG_0560.jpg" height="228" width="304" alt="" /></a></div>
    </div>
    <div></div>
    <div>Copyright "Younani" Michael Younani 2012</div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:18:29.280

您似乎正在显示画廊的全尺寸图像，并使用 html 调整其大小。这不是最佳实践，因为它要求用户以全分辨率下载所有图像。其中 60 个实在是太多了，估计下载量可能超过 10mb。

此外，使用宽度和高度来调整图像大小对性能不利。

答案是**缩略图**。您必须为每个图像制作一个较小的副本，并在幻灯片的链接中使用它，而不是仅显示全尺寸图像的压缩版本。

您还可以使用某种形式的延迟加载，其中仅在需要时才显示图像。

看起来您是手动完成的，因此您可能会发现在 Picasa 中生成网络相册是一种快速且易于制作缩略图的方法。

我希望这有帮助。

# .mov - 批量减慢.mov速度

> ID：16160172
> 
> 赞同：0
> 
> 时间：2013-04-23T03:01:11.563
> 
> 标签：.mov, mediaplayback

所以我有一个简单的问题，需要大量的 .mov 文件并将它们减慢到一半的速度。对于我的生活，我似乎无法为我的简单问题找到一个简单的解决方案。我不需要重命名它们，更改帧速率或任何花哨的东西，只需将大量 .mov 文件减慢到一半速度即可。我已经研究过软件和 avisynth 可能会有所帮助，但似乎没有什么能满足我的需要。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-10T17:56:52.970

我遇到了同样的问题，并通过重新混合并将帧速率更改为一半来解决它。这可以使用具有命令行界面的[tsMuxer来完成。](http://www.videohelp.com/software/tsMuxeR)缺点是它不能以 MOV 格式输出，而是以 m2ts 或 ts 格式输出。我写了一个简单的python脚本来查找当前目录下的所有MOV文件，根据输入生成带有帧率的输入文件到tsMuxer并运行。可能存在更好的方式，但这是一种方式。

```
import os
import sys

allFilesAndFolders = os.listdir(".")
cwd = os.getcwd()
fps = sys.argv[1]
filename = "Slower.META"

for entry in allFilesAndFolders:
    if entry.endswith(".MOV"):

        if os.path.isfile(filename):
            os.remove(filename)

        with open(filename, "a+") as myFile:
            myFile.write("MUXOPT --no-pcr-on-video-pid --new-audio-pes --vbr  --vbv-len=500\n")
            myFile.write("V_MPEG4/ISO/AVC, \"" + cwd + "\\" + entry + "\", fps=" + fps + ", insertSEI, contSPS, ar=As source, track=1\n")

        os.system("\"C:\Program Files (x86)\\tsMuxeR_2.6.12\\tsMuxeR.exe\" " + filename + " " + entry.split(".")[0] + "_slow.m2ts") 
```

# jquery - 如何使用 jquery 打开不是覆盖的模式窗口

> ID：16160174
> 
> 赞同：0
> 
> 时间：2013-04-23T03:01:16.753
> 
> 标签：jquery, modal-dialog

我在页面上有标准链接，我可以轻松地在新窗口中使用目标属性打开这些链接......或使用 onclick 启动功能。我想要做的是，而不是使用目标属性，使用 jquery 打开具有可定义宽度/高度的模态窗口，并可能在等待模态关闭时在调用窗口上放置一个不透明的覆盖。

我所做的每一次搜索都有通过 ajax 加载内容或某些隐藏页面内容 (div) 的结果。这是一个跨域链接，所以它必须是一个新窗口。我在想应该有一些简单的 jquery 函数可以挂接到类中，该类将读取 href 值并执行打开。

# c - 如何用C、windows平台编写键盘按键映射程序？

> ID：16160177
> 
> 赞同：1
> 
> 时间：2013-04-23T03:01:40.777
> 
> 标签：c, windows, keyboard

我问了一个类似的问题，但因为我没有足够清楚地解释我的目标而受到批评。对此感到抱歉。

我要在程序中实现的是“从键盘重定向键输入”

比如我想用Q键代替V键，所以程序一旦启动，我用ctrl+Q的时候其实就是ctrl+V，而我在一个测试app里敲Q的时候，就会出现一个V。我不需要 GUI 实现，只需要一个控制台。我认为这应该很容易，但我不知道应该使用哪个系统 api 来接收键输入并阻止它，并使其成为另一个键输入并发送到系统。

非常感谢

# .net - 为什么尽管 timeBeginPeriod(1) 最小 Threading.Timer 间隔为 15ms

> ID：16160179
> 
> 赞同：3
> 
> 时间：2013-04-23T03:01:44.330
> 
> 标签：.net, timer, sleep

以下片段

```
 [DllImport("winmm.dll", EntryPoint = "timeBeginPeriod")]
    public static extern uint TimeBeginPeriod(uint uMilliseconds);

    static void Main(string[] args)
    {
        if (TimeBeginPeriod(1) != 0)
            Console.WriteLine("TimeBeginPeriod failed!");

        Console.WriteLine("Sleep");
        Stopwatch sw = Stopwatch.StartNew();
        for (int i = 0; i < 10; i++)
        {
            Thread.Sleep(1);
            Console.WriteLine(sw.ElapsedTicks * 1000d / Stopwatch.Frequency);
            sw.Restart();
        }

        Console.WriteLine("Threading.Timer");
        sw = null;
        System.Threading.Timer t = null;
        int n = 0;

        t = new Timer(state =>
        {
            if (sw == null)
                sw = Stopwatch.StartNew();
            else
            {
                Console.WriteLine(sw.ElapsedTicks * 1000d / Stopwatch.Frequency);
                n++;
                sw.Restart();
            }
            if (n == 10)
                t.Change(Timeout.Infinite, Timeout.Infinite);
        }, null, TimeSpan.FromMilliseconds(1), TimeSpan.FromMilliseconds(1));
        Console.ReadKey();
    } 
```

将产生例如这个输出：

```
Sleep
0.151834939915548
0.757358826331279
0.786901687225611
0.712520725399457
0.715593741662697
0.798704863327602
0.5724889615859
0.648825479215934
0.436927039609783
0.517873081634677
Threading.Timer
15.5841035662354
14.8620145856526
15.1098812837944
14.4202684978119
15.3883384620112
14.7210748852159
15.307462261265
15.7125416777831
14.5991320125882
15.6035194417168 
```

根据网络，例如[Hans Passant 的评论](https://stackoverflow.com/a/13521642/709537)，`timeBeginPeriod`会影响常规 (.net) 计时器。那么为什么我的计时器仍然有这种粗粒度呢？`Thread.Sleep`似乎做得很好。

可能相关：这在 VMWare 内部的 Windows 7、64 位、.net 4 上运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:40:21.760

评论是错误的。我的经验是多媒体计时器不会影响 .NET 计时器。也就是说，它不会改变它们支持的最小时间段，这似乎是大约 15 毫秒。这*可能会*提高他们的准确性。也就是说，如果您要求 16 毫秒，您实际上可能会得到 16 毫秒，而不是“介于 15 到 30 毫秒之间的某个地方”。

为什么 .NET 计时器限制为 15 毫秒我不清楚。

[在此处](https://stackoverflow.com/q/3744032/56778)接受的答案中有一些关于它的信息。

如果您正在为 .NET 寻找更高分辨率的计时器，您可能不应该使用多媒体计时器。这些在 Windows API 中已被弃用。使用定时器队列定时器。看我的文章：

*   [.NET 计时器分辨率](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=815)
*   [探索更好的计时器选项](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=816)
*   [使用 Windows 计时器队列 API](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=817)

另一种选择是使用[Waitable Timer](http://www.devsource.com/c/a/Languages/Waitable-Timers-in-NET-CSharp/)。完整的源代码可在[http://www.mischel.com/pubs/waitabletimer.zip获得](http://www.mischel.com/pubs/waitabletimer.zip)

# c - 无法在我的 pop 函数中释放/释放空间？

> ID：16160180
> 
> 赞同：0
> 
> 时间：2013-04-23T03:01:47.970
> 
> 标签：c, segmentation-fault, free

这是我的流行代码：

```
int pop (struct_of_ints *head_node){
int val;
if (head_node == NULL){
    fprintf(stderr, "Empty stack.\n");
    return -1;
}
else {
    struct_of_ints *curr;
    struct_of_ints *prev;
    curr = head_node;
    prev = NULL;

        while (curr->next != NULL) {
            prev = curr;
            curr = curr->next;
        }

        val = curr->value;

        if (prev == NULL) 
            head_node = NULL;
    else 
            prev->next = curr->next;
        free(curr)
        return val;

}

} 
```

但是，当我尝试释放（curr）时，出现分段错误，并且当我运行 valgrind 时，我收到类似“无效的释放（）/删除/删除 []”、“地址 0x51c1f60 在大小为 32 的块内的 16 个字节”之类的消息free'd”和“无效读取大小 8”...我不知道出了什么问题。如果有人可以提供帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:11:48.590

您在函数中传递指针 *head_node，它是按值传递的。要更新 *head_node，请尝试传递 **head_node，并将代码更改为：

```
int pop (struct_of_ints **head_node)
{
    int val;
    if (*head_node == NULL)
    {
        fprintf(stderr, "Empty stack.\n");
        return -1;
    }
    else 
    {
        struct_of_ints *curr;
        struct_of_ints *prev;
        curr = *head_node;
        prev = NULL;
        while (curr->next != NULL) 
        {
            prev = curr;
            curr = curr->next;
        }

        val = curr->value;

        if (prev == NULL) 
            *head_node = NULL;
        else 
            prev->next = curr->next;
        free(curr)
        return val;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T03:12:13.173

我的猜测是，这只有在你弹出所有节点之后才会发生，然后再尝试弹出一个。这是因为您对函数内部的分配`head_node`不会传播到调用该函数的代码。`head_node`是函数内部的局部变量，您需要将其作为引用传递（即作为指向指针的指针）。

弹出最后一个节点时会发生什么，函数是空闲的，但调用它的代码仍然有指针。因此，下一次调用将使用指向已释放内存的指针，这将在访问该指针时导致*未定义的行为*。未定义的行为通常会导致崩溃。

# mysql - Perl sql 全选

> ID：16160182
> 
> 赞同：0
> 
> 时间：2013-04-23T03:02:01.373
> 
> 标签：mysql, sql, perl

这是我的代码

```
my $results = $dbh->selectall_hashref('SELECT * FROM sample.teachers where term like "$searchterm%"', 'teacher');
my $searchedresults= "";
foreach my $e (keys %$results) {
    print "$e\n";
    print "searching\n";
    $searchedresults = $e;
    }
    print $searchresult."\n"; 
```

我正在尝试从 mysql 服务器中的表中搜索。但似乎它不起作用我使用硬编码的方式通过用普通字符串替换 $searchterm 来测试它并且有效。但是我需要使用 $searchterm 但我不知道为什么它不能工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:19:02.123

```
my $results = $dbh->selectall_hashref(
   'SELECT * FROM sample.teachers where term like '.$dbh->quote("$searchterm%"),
   'teacher'
); 
```

或者

```
my $results = $dbh->selectall_hashref(
   'SELECT * FROM sample.teachers where term like ?,
   'teacher',
   undef,
   "$searchterm%"
); 
```

# jquery - jQuery UI 在第一次加载时位置错误，在第二次重新加载时更正

> ID：16160187
> 
> 赞同：4
> 
> 时间：2013-04-23T03:02:29.917
> 
> 标签：jquery

我正在使用 jQuery 位置 UI 插件在网页上定位助手图标。这是我负责该职位的代码：

```
 if ( $(element_selector).length !== 0 && $(title_class_selector).length !== 0  ) {

    $(title_class_selector).position({
    my: "center",
    at: cornerPosition,
    offset:"<?php echo $x_coordinates_foradjustment;?> <?php echo $y_coordinates_foradjustment;?>",
    of: $(element_selector)

    });

    } 
```

其中cornerPosition 有以下可能的值：

```
left top
right top
left bottom
right bottom 
```

它工作得很好，直到我遇到我想附加图标的特定 div 的问题。在第一次加载时，位置是错误的（不是左下而是左上），另一个不是右上，而是右下。

这些是受影响的 element_selector 及其正确和错误的位置：

```
#wpv-featured-news-slider .span4:first-child .thumbnail
Correct position: Left bottom
Actual position on first loading of webpage: Left top

#wpv-featured-news-slider
Correct position: Right top
Actual position on first loading of webpage: Right bottom 
```

奇怪的是，当我刷新页面（重新加载页面）时，它现在回到了正确的位置！这是缓存或选择器有问题吗？有没有办法对此添加一些检查？我不喜欢更改 element_selectors 来纠正这个问题。

该定位系统已在我们的不同网站中广泛实施，这是我看到此问题的唯一场合（其余都可以正常工作）。这可能是一个高度孤立的案例。我搜索任何相关问题，但找不到。任何提示和建议都会非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:49:41.357

您是否考虑过图像的任何问题？有时没有指定高度/宽度的非缓存图像可能会导致位置问题。试试[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)看看这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T15:55:31.067

jQuery UI 使用[碰撞检测](http://api.jqueryui.com/position/)，在发现碰撞的地方，它会将定位的项目放置在不同的位置。未指定的默认值（如您的情况）是翻转，因此它将元素翻转到目标的另一侧（如您所述）。

尝试将碰撞更改为“无”。

我遇到了同样的问题，奇怪的是只在初始加载时影响页面，但在后续加载时正常。

# php - 为什么空（0）不返回假？

> ID：16160189
> 
> 赞同：-3
> 
> 时间：2013-04-23T03:02:38.727
> 
> 标签：php

```
<?php
class Stack{
private $_data = array();
private $_end = null;
public function push($data){
    if($this->_end === null){
        $this->_end = 0;
    }else{
        $this->_end = $this->_end + 1;
    }
    $this->_data[$this->_end] = $data;
}

public function pop(){
    if(empty($this->_data)){
        return false;
    }

    $ret = $this->_data[$this->_end];

    array_splice($this->_data, $this->_end);
    $this->_end--;

    return $ret;
}

public function getData(){
    return $this->_data;
}
}

// test
$stack = new Stack();
$stack->push(0);
$pop_data = $stack->pop();
var_dump($pop_data, $stack->getData()); 
```

为什么不`empty(0)`回来`false`？我推`0`到`pop_data`. `empty($this->_data)`应该返回`false`，但测试的结果是`int(0)`. 我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:11:18.223

您的代码中的 $this->_data 是一个数组。

用这个替换你的行（以评估传递的零值）：

```
$this->_data[$this->_end]; 
```

# regex - 查找 C 样式块注释的正则表达式

> ID：16160190
> 
> 赞同：24
> 
> 时间：2013-04-23T03:02:52.680
> 
> 标签：regex

如何使用正则表达式找到这种模式？

C 样式块注释

`/* xxxxxxxxxxxx */`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-23T09:21:18.997

尝试使用

```
\/\*(\*(?!\/)|[^*])*\*\/ 
```

捕获单行和多行块注释。它搜索`/*`后跟任意数量的：

*   an`*`后面没有 a`/`
*   任何字符*，除了* `*`

然后`*/`再次关闭。

# ruby - 如何在 ruby 哈希选择中使用不同的条件

> ID：16160191
> 
> 赞同：0
> 
> 时间：2013-04-23T03:02:55.977
> 
> 标签：ruby

我正在尝试选择哈希的子集。假设我有一个方法可以做到这一点，例如，

```
def create_html (entities, low, high)
  entities
    .select{|k,v| v[:entity_count] < low and v[:community] == true}
    .sort_by{| k,v| v[:count]}.each do | k,v |
..... 
```

我想处理各种情况：假设下限（低）和上限（高）

1.  计数 < 低
2.  计数 > 低和计数 < 高
3.  计数 > 高

我也想使用 lte 和 gte。有没有一种简单的方法来处理我的选择语句中的所有组合？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:53:00.480

我不确定我是否理解您要执行的操作。但是您可以只使用一个块来提取条件。

```
def create_html (entities)
  entities
    .select{|k,v| yield(v[:entity_count], v[:community]) }
    .sort_by{| k,v| v[:count]}.each do | k,v |
..... 
```

然后您可以根据该字段获得所有条件。

```
create_html(entities) { |count| count < low }
create_html(entities) { |count| count > low && count < high }
create_html(entities) { |count| count < low }

# Also with community == true
create_html(entities) { |count, community| count < low && community } 
```

# xml - 如何将多个 XSL 组合成单个 XSLT 转换？

> ID：16160198
> 
> 赞同：0
> 
> 时间：2013-04-23T03:03:33.403
> 
> 标签：xml, xslt

我有一个输入 xml，我必须在其中对元素进行分组、转换货币格式并删除命名空间以添加新的命名空间。我为提到的每个操作创建了 3 个 XSLT 程序，如果通过将第一个到第二个 XSLT 的输出一个接一个地单独执行，最终结果很好。但是，我想将所有 XSLT 模板合并到单个 XSLT 转换文档中。组合时，我没有得到所需的输出 xml，而是每个节点都添加了命名空间，并且分组在没有格式化货币格式的情况下失控。示例 XML 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:Root_Users xmlns:ns1="http://test.com/Users">
   <Users>
      <Id>111</Id>
      <Name>aaa</Name>
      <Division>HR</Division>
      <Salary>1000</Salary>
   </Users>
   <Users>
      <Id>222</Id>
      <Name>bbb</Name>
      <Division>FD</Division>
      <Salary>2000</Salary>
   </Users>
   <Users>
      <Id>333</Id>
      <Name>ccc</Name>
      <Division>HR</Division>
      <Salary>3000</Salary>
   </Users>
   <Users>
      <Id>444</Id>
      <Name>ddd</Name>
      <Division>FD</Division>
      <Salary>4000</Salary>
   </Users>
   <Users>
      <Id>555</Id>
      <Name>eee</Name>
      <Division>IT</Division>
      <Salary>5000</Salary>
   </Users>
</ns1:Root_Users> 
```

我使用了以下 XSLT 转换来实现输出。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" method="xml" indent="yes"/>

  <!-- Grouping the Users for each Division -->
  <xsl:key name="GroupKey" match="Users" use="Division"/>
  <xsl:template match="/*">
        <Root_Users>
            <xsl:apply-templates/>
        </Root_Users>
  </xsl:template>
  <xsl:template match="Users[generate-id()=generate-id(key('GroupKey',Division)[1])]">
        <Department name="{Division}">
            <xsl:copy-of select="key('GroupKey',Division)"/>
        </Department>
  </xsl:template>
  <xsl:template match="Users[not(generate-id()=generate-id(key('GroupKey',Division)[1]))]"/>

  <!-- Converting Salary to Denmark Currency Format -->
  <xsl:decimal-format name="DenmarkCurrencyFormat" grouping-separator="." decimal-separator=","/>
  <xsl:template match="/*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
  </xsl:template>
  <xsl:template match="//Salary">
        <xsl:copy>
            <xsl:value-of select="format-number(., 'kr ###.###.###,00', 'DenmarkCurrencyFormat')"/>
        </xsl:copy>
  </xsl:template>

  <!-- Removing and Adding new Namespace to Root -->  
  <xsl:template match="/*">
    <xsl:element name="{local-name()}" namespace="http://test.com/Department">
            <xsl:apply-templates select="@* | node()" />
        </xsl:element>
  </xsl:template>
  <xsl:template match="@*">
        <xsl:attribute name="{local-name()}">
            <xsl:value-of select="." />
        </xsl:attribute>
  </xsl:template>
  <xsl:template match="text() | comment() | processing-instruction()">
        <xsl:copy />
  </xsl:template>

</xsl:stylesheet> 
```

当应用于输入 xml 时，我得到以下输出 xml：

```
<Root_Users xmlns="http://test.com/Department">
    <Department xmlns="" name="HR">
        <Users xmlns:ns1="http://test.com/Users">
            <Id>111</Id>
            <Name>aaa</Name>
            <Division>HR</Division>
            <Salary>1000</Salary>
        </Users>
        <Users xmlns:ns1="http://test.com/Users">
            <Id>333</Id>
            <Name>ccc</Name>
            <Division>HR</Division>
            <Salary>3000</Salary>
        </Users>
    </Department>
    <Department xmlns="" name="FD">
        <Users xmlns:ns1="http://test.com/Users">
            <Id>222</Id>
            <Name>bbb</Name>
            <Division>FD</Division>
            <Salary>2000</Salary>
        </Users>
        <Users xmlns:ns1="http://test.com/Users">
            <Id>444</Id>
            <Name>ddd</Name>
            <Division>FD</Division>
            <Salary>4000</Salary>
        </Users>
    </Department>
    <Department xmlns="" name="IT">
        <Users xmlns:ns1="http://test.com/Users">
            <Id>555</Id>
            <Name>eee</Name>
            <Division>IT</Division>
            <Salary>5000</Salary>
        </Users>
    </Department>
</Root_Users> 
```

但所需的输出如下所述。

```
<Root_Users xmlns="http://test.com/Department">
    <Department name="HR">
        <Users>
            <Id>111</Id>
            <Name>aaa</Name>
            <Division>HR</Division>
            <Salary>kr 1.000,00</Salary>
        </Users>
        <Users>
            <Id>333</Id>
            <Name>ccc</Name>
            <Division>HR</Division>
            <Salary>kr 3.000,00</Salary>
        </Users>
    </Department>
    <Department name="FD">
        <Users>
            <Id>222</Id>
            <Name>bbb</Name>
            <Division>FD</Division>
            <Salary>kr 2.000,00</Salary>
        </Users>
        <Users>
            <Id>444</Id>
            <Name>ddd</Name>
            <Division>FD</Division>
            <Salary>kr 4.000,00</Salary>
        </Users>
    </Department>
    <Department name="IT">
        <Users>
            <Id>555</Id>
            <Name>eee</Name>
            <Division>IT</Division>
            <Salary>kr 5.000,00</Salary>
        </Users>
    </Department>
</Root_Users> 
```

请帮助我获得所需的 xml。我非常接近，但无法找到导致问题的确切原因。非常感谢您的指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:28:12.537

您的解决方案在正确的轨道上 - 我注意到两件主要的事情：

1.  我在下面的解决方案中通过倒数第二个模板解决了无关名称空间的问题；还有其他方法可以做到这一点，但这就是今晚我想到的。:)
2.  请注意，该`<xsl:decimal-format>`指令需要位于顶层。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="http://test.com/Department" 
  version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:decimal-format
    name="DenmarkCurrencyFormat"
    grouping-separator="."
    decimal-separator=","/>

  <xsl:key
    name="kUserByDivision"
    match="Users"
    use="Division"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <Root_Users>
      <xsl:apply-templates
        select="*[generate-id() = 
                  generate-id(key('kUserByDivision', Division)[1])]"/>
    </Root_Users>
  </xsl:template>

  <xsl:template match="Users">
    <Department name="{Division}">
      <xsl:for-each select="key('kUserByDivision', Division)">
        <Users>
          <xsl:apply-templates/>
        </Users>
      </xsl:for-each>
    </Department>
  </xsl:template>

  <xsl:template match="Users/*">
    <xsl:element name="{name()}">
      <xsl:apply-templates/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="Salary/text()">
    <xsl:value-of
      select="concat('kr ',
                     format-number(.,
                                   '###.###,00',
                                   'DenmarkCurrencyFormat'))"/>
  </xsl:template>
</xsl:stylesheet> 
```

**...针对提供的 XML 应用：**

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:Root_Users xmlns:ns1="http://test.com/Users">
  <Users>
    <Id>111</Id>
    <Name>aaa</Name>
    <Division>HR</Division>
    <Salary>1000</Salary>
  </Users>
  <Users>
    <Id>222</Id>
    <Name>bbb</Name>
    <Division>FD</Division>
    <Salary>2000</Salary>
  </Users>
  <Users>
    <Id>333</Id>
    <Name>ccc</Name>
    <Division>HR</Division>
    <Salary>3000</Salary>
  </Users>
  <Users>
    <Id>444</Id>
    <Name>ddd</Name>
    <Division>FD</Division>
    <Salary>4000</Salary>
  </Users>
  <Users>
    <Id>555</Id>
    <Name>eee</Name>
    <Division>IT</Division>
    <Salary>5000</Salary>
  </Users>
</ns1:Root_Users> 
```

**...产生了想要的结果：**

```
<Root_Users xmlns="http://test.com/Department">
  <Department name="HR">
    <Users>
      <Id>111</Id>
      <Name>aaa</Name>
      <Division>HR</Division>
      <Salary>kr 1.000,00</Salary>
    </Users>
    <Users>
      <Id>333</Id>
      <Name>ccc</Name>
      <Division>HR</Division>
      <Salary>kr 3.000,00</Salary>
    </Users>
  </Department>
  <Department name="FD">
    <Users>
      <Id>222</Id>
      <Name>bbb</Name>
      <Division>FD</Division>
      <Salary>kr 2.000,00</Salary>
    </Users>
    <Users>
      <Id>444</Id>
      <Name>ddd</Name>
      <Division>FD</Division>
      <Salary>kr 4.000,00</Salary>
    </Users>
  </Department>
  <Department name="IT">
    <Users>
      <Id>555</Id>
      <Name>eee</Name>
      <Division>IT</Division>
      <Salary>kr 5.000,00</Salary>
    </Users>
  </Department>
</Root_Users> 
```

# git - 如何快速撤消 git 中的暂存和未暂存的更改？

> ID：16160199
> 
> 赞同：33
> 
> 时间：2013-04-23T03:03:39.517
> 
> 标签：git

在 Git 中撤消更改（暂存和未暂存）的最快方法是什么？

两个文件都未暂存。

```
$ git status -s
 M file1.txt # unstaged
?? oops.txt # unstaged 
```

一个文件暂存，一个文件未暂存。

```
$ git status -s
M  file1.txt # staged
?? oops.txt # unstaged 
```

我可以`add`全部索引然后`stash` `save`和`drop`。

```
$ git add .
$ git stash save
$ git stash drop
$ git status
nothing to commit, working directory clean 
```

有更快的方法吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-01-28T04:14:56.213

```
git reset HEAD
git checkout . 
```

`git reset HEAD`将取消暂存所有更改并`git checkout .`丢弃所有更改。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-23T06:57:32.240

您需要使用两个命令：`git reset --hard`和`git clean -fd`. `git reset --hard`将撤消所有暂存的更改和`git clean -fd`未暂存的更改（文件和目录）。您可以创建一个别名来执行这两个命令。为此，只需在您的`.gitconfig`:

```
[alias]
  undo = '!git reset --hard && git clean -fd' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-23T03:08:38.470

你可以使用[git clean](//kernel.org/pub/software/scm/git/docs/git-clean.html)

```
$ git状态-s
?? 哎呀.txt

$ 混帐清理 -f
删除 oops.txt

$ git状态-s

```

更多信息：

> 从当前目录开始，通过递归删除不受版本控制的文件来清理工作树。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-02-03T17:36:38.103

要取消**暂存所有暂存文件，请**使用命令：

```
git reset HEAD 
```

要取消**暂存单个文件暂存文件**（例如：app.js），请使用命令：

```
git reset HEAD app.js 
```

在**Git**版本**2.23.0**中引入了一个新命令`git restore`。

要取消**暂存文件，请**使用：

```
git restore --staged app.js 
```

此命令将从暂存区域中删除文件并将其移回工作目录，并且更改完好无损。

要**撤消文件中的更改**并将其恢复到其原始内容，请使用：

```
git restore app.js 
```

**注意：**您将丢失自上次提交以来对其文件所做的所有更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-10T09:47:38.830

`git rm --cached -r .`

// 将取消 git 中所有暂存/跟踪的文件

# cucumber - 用 Cucumber 截图

> ID：16160200
> 
> 赞同：2
> 
> 时间：2013-04-23T03:03:42.017
> 
> 标签：cucumber, cucumber-jvm, cucumber-junit, cucumber-cpp

我只是学习如何使用黄瓜。你能告诉我如何完成这段代码吗？

您可以使用以下代码片段为未定义的步骤实现步骤定义：

```
Then /^I take a screenshot$/ do
    pending # express the regexp above with the code you wish you had
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-27T15:02:35.870

屏幕截图通常是在发生意外情况时拍摄的。当测试用例失败时，您可能还希望捕获屏幕截图以报告。在这种特殊情况下，您应该在[@After](http://cukes.info/api/cucumber/jvm/javadoc/cucumber/api/java/After.html)方法中包含屏幕截图捕获逻辑，该方法将为每个场景执行。Java，硒版本，

```
@After("@browser")
public void tearDown(Scenario scenario) {
    if (scenario.isFailed()) {
            final byte[] screenshot = ((TakesScreenshot) driver)
                        .getScreenshotAs(OutputType.BYTES);
            scenario.embed(screenshot, "image/png"); //stick it in the report
    }
    driver.close();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-25T08:52:43.223

1.  您可以使用预设步骤（预定义）来截取屏幕截图。

    ```
    Then take picture 
    ```

不需要任何步骤定义。Cucumber 还带有许多其他预定义的步骤。查看其他[固定步骤](https://github.com/calabash/calabash-ios/wiki/02-Predefined-steps)

2.  如果您仍然需要编写步骤定义。

    ```
    Then /^I take a screenshot$/ do
      page.save_screenshot('image_name.png')
    end 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-20T09:56:00.177

我提供了在场景失败时拍摄快照的代码，希望您可以根据自己的用途进行修改，如果您不能这样做，请在此处评论。此代码在 Ubuntu 系统中使用 ruby

```
#Create a directory for storing snapshot
dir_path = "/home/vchouhan/vijay_work/snapshot"
unless Dir.exist?(dir_path)
    Dir.mkdir(dir_path,0777)
    puts "=========Directory is created at #{dir_path}"
else
    puts "=========Directory is exist at #{dir_path}"
end

#Run after each scenario
After do |scenario|
  #Check, scenario is failed?
  if(scenario.failed?)
         time = Time.now.strftime('%Y_%m_%d_%Y_%H_%M_%S_')
         name_of_scenario = time + scenario.name.gsub(/\s+/, "_").gsub("/","_")
         puts "Name of snapshot is #{name_of_scenario}"
         file_path = File.expand_path(dir_path)+'/'+name_of_scenario +'.png'
         page.driver.browser.save_screenshot file_path
         puts "Snapshot is taken"
    puts "#===========================================================#"
    puts "Scenario:: #{scenario.name}"
    puts "#===========================================================#"
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T15:24:47.197

在 Java 中，您可以像这样实现此步骤，

```
@Then("^I take a screenshot$")
public void i_take_a_screenshot()
{
  // Your code goes here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T14:31:11.357

如果您使用 watir-webdriver 进行测试，您可以在浏览器对象上调用 screenshot 方法并保存它。[http://watirwebdriver.com/screenshots/](http://watirwebdriver.com/screenshots/)

如果您正在做 Windows 控件，您可以使用 win32/screenshot gem 来实现这一点。[https://github.com/jarmo/win32screenshot](https://github.com/jarmo/win32screenshot)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-08T09:16:41.860

上一个答案的改进版本。这有错误处理，在故障点写出 URL。认为它可能有用。

```
@After("@UI" )
public void embedScreenshotOnFail(Scenario s) {
    if (s.isFailed()) {
        try {
            byte[] screenshot = ((TakesScreenshot) getDefaultDriver()).getScreenshotAs(OutputType.BYTES);
            s.embed(screenshot, "image/png" );
            s.write("URL at failure: " + getDefaultDriver().getCurrentUrl());
        } catch (WebDriverException wde) {
            s.write("Embed Failed " + wde.getMessage());
        } catch (ClassCastException cce) {
            cce.printStackTrace();
        }
    }
} 
```

# objective-c - 如何访问在另一个类中实例化的类的变量？

> ID：16160203
> 
> 赞同：1
> 
> 时间：2013-04-23T03:03:52.513
> 
> 标签：objective-c, uiviewcontroller, nsstring, integer

我有两个类：（`DashboardViewController`有一个整数变量 'userid'）和`LoginViewController`. 我实例化 a`DashboardViewController`并设置`userid`from的值`LoginViewController`，但是当我打印 in 的值时`userid`，`DashboardViewController`它会打印`0`。有人可以帮我吗？

这就是我实例化`DashboardViewController`的`LoginViewController`方式 ('serverOutput' 是一个包含单个整数值的字符串：

```
DashboardViewController *newView = [[DashboardViewController alloc] init];
[self presentViewController:newView animated:YES completion:nil];
newView.userid = [serverOutput intValue]; 
```

然后我去`DashboardViewController`放：

```
NSLog([NSString stringWithFormat:@"%d",userid]); 
```

这会打印 0 而不是它应该打印的整数值。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:15:38.227

只需替换您的代码：

```
DashboardViewController *newView = [[DashboardViewController alloc] init];
[self presentViewController:newView animated:YES completion:nil];
newView.userid = [serverOutput intValue]; 
```

通过此代码：

```
DashboardViewController *newView = [[DashboardViewController alloc] init];
newView.userid = [serverOutput intValue];
[self presentViewController:newView animated:YES completion:nil]; 
```

如果您仍然没有得到答案，那么还有另一种方法......

有一种简单的方法可以解决您的问题。只需在`Appdelegate`类中创建一个全局变量。我的意思是，制作一个`NSString`属性`AppDelegate.h`并合成它。

在`AppDelegate.h:`

```
@property(nonatomic,retain)NSString *GlobalStr; 
```

并将其合成在`AppDelegate.m`.

现在制作`AppDelegate`in 的对象`LoginViewController`：

```
AppDelegate *obj = (AppDelegate*)[[UIApplication sharedApplication]delegate];
DashboardViewController *newView = [[DashboardViewController alloc] init];
obj.GlobalStr = [serverOutput intValue];
[self presentViewController:newView animated:YES completion:nil]; 
```

然后去`DashboardViewController`放：

```
AppDelegate *obj = (AppDelegate*)[[UIApplication sharedApplication]delegate];
userid = [obj.GlobalStr intValue];
NSLog([NSString stringWithFormat:@"%d",userid]); 
```

# git - Git不断显示要提交的文件

> ID：16160205
> 
> 赞同：1
> 
> 时间：2013-04-23T03:04:11.060
> 
> 标签：git

Git 一直告诉我需要提交一个文件：

```
D:\ecs [master +0 ~1 -0]> git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   core/src/main/resources/templates/html/core/ContentStoreView.ftl
# 
```

我没有看到对该文件的更改：

```
D:\ecs [master +0 ~1 -0]> git diff core/src/main/resources/templates/html/core/ContentStoreView.ftl 
```

我尝试提交：

```
git commit -m "commiting you" . 
```

我明白了

```
# On branch master
nothing to commit, working directory clean 
```

以及检查：

```
D:\ecs [master +0 ~1 -0]> git checkout core/src/main/resources/templates/html/core/ContentStoreView.ftl 
```

这个文件有什么问题，我该如何解决？（我`git version 1.8.0.msysgit.0`在 Windows 上使用）

更新：从 Netbeans IDE 提交后问题消失了。这当然不是一个通用的解决方案，也不能帮助我理解问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:51:15.360

`git diff --staged` (or `git diff --cached`) will show you the modifications that have been staged but not committed.

# xaml - 等效于网格行 xaml windows 8 应用程序上可见的溢出

> ID：16160210
> 
> 赞同：0
> 
> 时间：2013-04-23T03:05:03.133
> 
> 标签：xaml, windows-8, windows-applications

我有一个仅在您单击按钮时出现的列表框。问题是，列表框在底部被切断，因为它比它所在的网格行高。它需要在显示时从网格中弹出。

在 CSS 中，这可以通过在父网格行中添加“溢出：可见”来完成，但我整个早上都在搜索，找不到任何完全相同的东西！有没有人有办法解决吗？！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:24:49.723

设法通过在列表框周围添加一个标签来解决这个问题，将其拉出行。它也仍然正确定位，这是一个奖励！

```
<Popup IsOpen="True">
    <Listbox ... />
</Popup> 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:06:38.997

你应该看看 Callisto 控件库

[https://github.com/timheuer/callisto](https://github.com/timheuer/callisto)

有一个`Flyout`控件非常适合您的需求

# javascript - javascript中的闭包是否只限制变量的范围？

> ID：16160216
> 
> 赞同：0
> 
> 时间：2013-04-23T03:06:19.017
> 
> 标签：javascript

我在读一本书，遇到了“javascript中的闭包限制了函数中变量的范围”..这是否意味着，如果任何从函数对象继承的具有闭包的对象，都无法访问其属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:18:28.147

闭包是代码可以访问外部执行上下文中的变量的地方。在有用的闭包中，一个变量在包含它的函数完成执行后继续存在，例如

```
var x = (function() {
  var outerA = 'A';
  return function() {
    return outerA;
  }
}()); 
```

内部函数可以访问`outerA`，即`outerA`在其作用域链上。内部函数被分配给`x`，所以之后它仍然可以访问`outerA`：

```
alert(x()); // A 
```

所以闭包不会限制范围，它们是它的结果。

javascript 的这一特性可用于模拟基于类的语言所称的私有成员。它还可以用于继承，其中多个对象可以访问同一组值（对象、函数、原语等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:20:23.547

Javascript 本身没有继承。[我们只是通过各种方式](http://ejohn.org/blog/simple-javascript-inheritance/)模拟继承。

JS 中的闭包只是指函数在其范围内保留变量值的事实。所以是的，只要您谈论的是相同的对象和范围，该值就会被保留。

# maven - maven 嵌套属性 ${${}}

> ID：16160222
> 
> 赞同：3
> 
> 时间：2013-04-23T03:06:53.260
> 
> 标签：maven, nested-properties

maven 如何使用嵌套属性定义？

```
<groupId>org.sonatype.mavenbook.simple</groupId>
  <artifactId>simple</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>simple</name>
  <url>http://maven.apache.org</url>
  <properties>
  **<TEST-1.0-SNAPSHOT>hello world</TEST-1.0-SNAPSHOT>
  <test>${TEST-${project.version}}</test>**
  </properties> 
```

我定义了一个属性 TEST-1.0-SNAPSHOT，它使用 ${version} 作为属性名称的一部分，然后我想使用 ${TEST-${project.version}} 来引用属性内容。</p>

谁能帮我 ？不管怎么说，还是要谢谢你 ！

# sql - 如何确定员工的最新入职日期？

> ID：16160226
> 
> 赞同：-2
> 
> 时间：2013-04-23T03:07:15.363
> 
> 标签：sql, sql-server-2008, sql-server-2005

每个员工都有机会记录访问日期，最多 3 次访问。

如何确定员工最近的访问日期并将其添加 3 年？

我尝试了以下方法：

```
select top 1 dateOfVisit from table 
  where empid=123 
  Order by dateOfVisit DESC 
```

这不是给我最新的访问日期。

然后我需要增加3年。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:10:11.207

**这是一个[SQL Fiddle](http://www.sqlfiddle.com/#!3/6b15b/1/2)，显示了下面的所有三个查询。如果您需要讨论某些内容，请查看并编辑它。**

可以使用[DATEADD()添加 3 年](http://msdn.microsoft.com/en-us/library/ms186819%28v=sql.105%29.aspx)

```
 select top (1) DATEADD(year, 3, dateOfVisit) [DateOfVisitPlus3Years]
    from [table]
   where empid=123
order by dateOfVisit DESC; 
```

* * *

您在标题中使用了单数形式“员工”，并在文本中多次使用，并为单个员工提供了查询。但是在您实际上需要跨多个员工的远程可能性中，只需使用 MAX()

```
 select empid, DATEADD(year, 3, max(dateOfVisit)) [DateOfVisitPlus3Years]
    from [table]
group by empid; 
```

* * *

*下面的查询为您提供了从当前日期（即“今天*”）到每个员工的最后一个（最近的）dateOfVisit 之间经过的天数

```
 select empid,
         DATEDIFF(day, max(dateOfVisit), CURRENT_TIMESTAMP) [DaysSinceLastVisit]
    from [table]
group by empid; 
```

# php - $POST 值不更新数据库？错误的 MySQL 查询？

> ID：16160230
> 
> 赞同：-1
> 
> 时间：2013-04-23T03:07:42.417
> 
> 标签：php, html, mysql

我目前正在编写一个应用程序，其中有一个名为 devices.php 的页面，它查询 mysql 数据库中的所有记录并将它们显示在 html 表中。我在表格的每一行都有一个复选框，用户可以选中它，然后单击“编辑”或提交按钮来编辑该记录。单击提交按钮时，它会将您带到另一个页面 edit_device.php，然后您可以在其中编辑该设备.. i $_GET 单击的复选框的值，这是该记录的“主键”，我然后查询数据库以输入该查询的值作为另一个 html 表单的默认值。这里的目标是将该设备拉入一个表单，如果他们需要更改该记录的所有列值，他们可以，或者如果他们只需要编辑一列值，他们可以删除默认值，并输入新... ，然后从数据库中提取该记录并将它们输入到表单的字段中......我遇到的问题是，当您更改表单文本框/字段中的值之一时，它不会在数据库中更新。它仍然只是原始值。这是我的代码：它没有在数据库中更新。它仍然只是原始值。这是我的代码：它没有在数据库中更新。它仍然只是原始值。这是我的代码：

```
<!doctype html>
 <html>

    <?php
      include 'dbcon.config';

      $id=$GET_['check_box'];
      $result=mysql_query("SELECT * FROM device_entries WHERE Id=$id");
      $record=mysql_fetch_row($result);

      $ident    = $record[0];
      $suspend  = $record[1];
      $device   = $record[2];
      $ipadd    = $record[3];
      $dep      = $record[4];
      $emailadd= $record[5];
   ?>

    <body>
      <form method="get">
            ID:         <input type="text" value="<?php echo $ident; ?>" name="id">
            Suspended:  <input type="text" value="<?php echo $suspend; ?>" name="sus">
            Device :    <input type="text value="<?php echo $device; ?>" name="device">
            IP :        <input type="text" value="<?php echo $ipadd; ?>" name="ip">
            Dependency: <input type="text" value="<?php echo $dep; ?>" name="depend">
            Email:      <input type="text" value="<?php echo $emailadd; ?>" name="email">

            <input type="submit" value="update" name="submit1">
      </form> 
   </body>
 </html>

<?php
   if(isset($_GET['submit1'])) {
      $id=$_GET['id'];
      $sus=$_GET['sus'];
      $dev=$_GET['device'];
      $ip=$_GET['ip'];
      $depend=$_GET['depend'];
      $email=$_GET['email'];

      $update=mysql_query("UPDATE device_entries SET Suspended=$sus, Device=$dev, IP=$ip, Depend=$depend, Email=$email WHERE Id=$id")
   }
   mysql_close($con);
?> 
```

顶部似乎正在做我想要它做的事情......它似乎与 $update 查询有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:12:09.647

尝试将查询更改为：

```
"UPDATE `device_entries` SET `Suspended`='$sus', `Device`='$dev', `IP`='$ip', `Depend`='$depend', `Email`='$email' WHERE Id=$id" 
```

1.  `,`前面有一个逗号`WHERE`；
2.  您可能需要使用反引号/反引号来转义列名；
3.  您的字符串值应该用单引号括起来`'`。

***升级版：***

*1 > 我建议你检查你的变量：*

```
var_dump($id, $sus, $dev, $ip, $depend, $email); 
```

在查询执行之前。

*2 > 地点：*

```
if(mysql_errno())exit(mysql_error()); 
```

查询执行后自行确定问题。这是一个应该有帮助的***调试措施。***您可以在生产/部署版本中删除它们。

***PS：*** `php_mysql`已弃用。我建议您使用`php_pdo`or`php_mysqli`代替。是的，请注意**NullPointer**说的。您的代码容易受到[***SQL Injection***的影响。](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:10:08.743

您的查询我错了，您将逗号放在无效的 where 子句之前。改成这个

```
"UPDATE device_entries SET Suspended=$sus, Device=$dev, IP=$ip, Depend=$depend, Email=$email  WHERE Id='".$id."'"; 
```

其次，它没有执行，因为您试图将一个名为“sus”的非 html 现有字段分配给`$suspend`导致更新查询失败的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:14:21.650

更改为

```
$update=mysql_query("UPDATE device_entries SET Suspended='$sus', Device='$dev', IP='$ip', Depend='$depend', Email='$email' WHERE Id=$id"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T17:12:40.013

$update=mysql_query("UPDATE device_entries SET `Suspended`='$sus', `Device`='$dev', `IP`='$ip', `Depend`='$depend', `Email`='$email' WHERE Id=$id");

- 只是在列名解决它之前添加刻度..以及我自己尝试过的单引号，但没有运气

# java - getContentPane() 返回 null

> ID：16160233
> 
> 赞同：0
> 
> 时间：2013-04-23T03:07:44.657
> 
> 标签：java, swing, nullpointerexception

我有一个扩展类`JFrame`。在其构造函数中，我调用`getContentPane()`并将其存储在`Container`. 但是，`getContentPane()`似乎返回 null，因为`System.out.println(container)`打印“null”并调用`container.setLayout(new BorderLayout)`会引发空指针异常。

一些示例代码：

```
public class Example extends JFrame implements ... {
    public Example(){
        Container container = getContentPane();
        System.out.println(container);    //prints "null"
        container.setLayout(new BorderLayout());    //throws nullpointerexception 
```

此外，调用类`setLayout`本身（即. 我正在使用 Eclipse，它没有指出任何警告或错误。该异常不是很有帮助，因为它只追溯两个级别（main()，类被实例化的地方，到调用）。`this.setLayout()``NullPointerException``contentPane``setLayout()`

如有必要，我可以发布我的整个代码，但我不想这样做，因为这是为了课堂作业，我不希望反作弊软件标记它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:18:54.320

发现了问题。当我在 Eclipse 中创建类时，它自动生成了一堆方法，其中一个是`getContentPane()`. 自动生成的方法只是返回 null，这导致了我的问题。我摆脱了所有自动生成的方法，它现在可以工作了。

# primefaces - 在 primesface 展示中将 outputText 更改为 inputText

> ID：16160234
> 
> 赞同：0
> 
> 时间：2013-04-23T03:08:13.487
> 
> 标签：primefaces, commandbutton

在展示中 [http://www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf)

当用户单击行上的编辑按钮时，我们调用

```
<f:setPropertyActionListener value="#{car}" target="#{tableBean.selectedCar}" /> 
```

设置 selectedCar 之后`update=":form:display"`将更新`h:outputText`对话框中的数据并显示。

但是当我将其更改为不再`<h:outputText>`起作用时，它会引发异常。这是代码和异常：datatableRowSelection.xhtml`<h:inputText>``<f:setPropertyActionListener>`

```
 <h:form id="form">  

        <p:growl id="msgs" showDetail="true" />  

        <p:dataTable id="cars" var="car" value="#{tableBean.carsSmall}">  

        <p:column headerText="Model" style="width:24%">  
            <h:outputText value="#{car.model}" />  
        </p:column>  

        <p:column headerText="Year" style="width:24%">  
            <h:outputText value="#{car.year}" />  
        </p:column>  

        <p:column headerText="Manufacturer" style="width:24%">  
            <h:outputText value="#{car.manufacturer}" />  
        </p:column>  

        <p:column headerText="Color" style="width:24%">  
            <h:outputText value="#{car.color}" />  
        </p:column>  

        <p:column style="width:4%">  
                <p:commandButton id="selectButton" update=":form:display" oncomplete="carDialog.show()" icon="ui-icon-search" title="View">  
                <f:setPropertyActionListener value="#{car}" target="#{tableBean.selectedCar}" />  
            </p:commandButton>  
        </p:column>  

    </p:dataTable>  

    <p:dialog header="Car Detail" widgetVar="carDialog" resizable="false" id="carDlg"  
                showEffect="fade" hideEffect="explode" modal="true">  

        <h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;">  

            <f:facet name="header">  
                <p:graphicImage value="/images/cars/#{tableBean.selectedCar.manufacturer}.jpg"/>  
            </f:facet>  

            <h:outputText value="Model:" />  
            <h:outputText value="#{tableBean.selectedCar.model}" style="font-weight:bold"/>  

            <h:outputText value="Year:" />  
            <h:outputText value="#{tableBean.selectedCar.year}" style="font-weight:bold"/>  

            <h:outputText value="Manufacturer:" />  
            <h:inputText value="#{tableBean.selectedCar.manufacturer}" style="font-weight:bold"/>  <!-- I changed outputText to inputText here -->

            <h:outputText value="Color:" />  
            <h:inputText value="#{tableBean.selectedCar.color}" style="font-weight:bold"/>  <!-- I changed outputText to inputText here -->

        </h:panelGrid>  

    </p:dialog>  

</h:form> 
```

TableBean.java

```
import java.io.Serializable;  
import java.util.ArrayList;  
import java.util.Date;  
import java.util.List;  
import java.util.UUID;  

import org.primefaces.examples.domain.Car;  

public class TableBean {  

    static {  
        colors = new String[10];  
        colors[0] = "Black";  
        colors[1] = "White";  
        colors[2] = "Green";  
        colors[3] = "Red";  
        colors[4] = "Blue";  
        colors[5] = "Orange";  
        colors[6] = "Silver";  
        colors[7] = "Yellow";  
        colors[8] = "Brown";  
        colors[9] = "Maroon";  

        manufacturers = new String[10];  
        manufacturers[0] = "Mercedes";  
        manufacturers[1] = "BMW";  
        manufacturers[2] = "Volvo";  
        manufacturers[3] = "Audi";  
        manufacturers[4] = "Renault";  
        manufacturers[5] = "Opel";  
        manufacturers[6] = "Volkswagen";  
        manufacturers[7] = "Chrysler";  
        manufacturers[8] = "Ferrari";  
        manufacturers[9] = "Ford";  
    }  

    private final static String[] colors;  

    private final static String[] manufacturers;  

    private List<Car> cars;  

    private Car selectedCar;  

    public TableBean() {  
        cars = new ArrayList<Car>();  

        populateRandomCars(cars, 50);  
    }  

    private void populateRandomCars(List<Car> list, int size) {  
        for(int i = 0 ; i < size ; i++)  
            list.add(new Car(getRandomModel(), getRandomYear(), getRandomManufacturer(), getRandomColor()));  
    }  

    public Car getSelectedCar() {  
        return selectedCar;  
    }  
    public void setSelectedCar(Car selectedCar) {  
        this.selectedCar = selectedCar;  
    }  

    public List<Car> getCars() {  
        return cars;  
    }  

    private int getRandomYear() {  
        return (int) (Math.random() * 50 + 1960);  
    }  

    private String getRandomColor() {  
        return colors[(int) (Math.random() * 10)];  
    }  

    private String getRandomManufacturer() {  
        return manufacturers[(int) (Math.random() * 10)];  
    }  

    private String getRandomModel() {  
        return UUID.randomUUID().toString().substring(0, 8);  
    }  
} 
```

例外是：

```
WARNING:     datatableRowSelection.xhtml value="#{tableBean.selectedCar.model}": Target Unreachable, 'selectedCar' returned null
javax.el.PropertyNotFoundException: datatableRowSelection.xhtml value="#{tableBean.selectedCar.model}": Target Unreachable, 'selectedCar' returned null
    at com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:100)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:95)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1034)
    at javax.faces.component.UIInput.validate(UIInput.java:964)
at javax.faces.component.UIInput.executeValidate(UIInput.java:1237)
    at javax.faces.component.UIInput.processValidators(UIInput.java:702)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1220)
    at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:506)
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1612)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIForm.visitTree(UIForm.java:371)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:378)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:253)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1162)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

你能告诉我为什么吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:00:44.987

我发现了问题，因为对话框与表格的形式相同。在我将其拆分为 2 种形式后，它运行良好。你能解释一下为什么吗？

# java - Java - 来自 Windows 命令行但不是 Eclipse 的 classNotFound 异常

> ID：16160235
> 
> 赞同：2
> 
> 时间：2013-04-23T03:08:17.070
> 
> 标签：java, command-line, javac

我的代码在 Eclipse 中运行良好，没有构建路径错误或任何东西，但是当我尝试从命令行运行我的 Java 程序时，我得到了`classNotFound Exception`一个内部类。我不仅不明白我是如何得到这个异常的，而且我什至不知道如何调试它，因为它在 IDE 环境中看起来和工作正常。任何帮助表示赞赏！

**编辑**

我正在为名为 J-- 的 Java 子集编写一个编译器，所以我真的不想深入了解它是如何工作的。但`javac HelloWorld.java`我不会打电话，而是打电话给等效的`j-- HelloWorld.java`. `javac`工作正常。您可能会说问题出在您的代码上，但它再次在 Eclipse 中编译并运行良好。因此，某处似乎存在脱节。如果有帮助，这里是 Windows bash 脚本：

```
set BASE_DIR=%~dp0
set j="%BASE_DIR%\..\"
set JAVA=java
set CPATH="%BASE_DIR%\..\lib\j--.jar;%BASE_DIR%\..\lib\spim.jar"
if "%CLASSPATH%" == "" goto runApp
set CPATH=%CPATH%;"%CLASSPATH%"

:runApp
%JAVA% -classpath %CPATH% jminusminus.Main "j--" %*

set JAVA=
set BASE_DIR=
set CPATH= 
```

**编辑**

感谢 Aubin，输出`.jar`文件并将其与 进行比较`class not found`是我能够解决此冲突的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:17:14.410

通常 Eclipse`src`从`bin`.

尝试：

```
java -cp bin a.b.c.d.MyClass 
```

要调用您的工具，`j-- <args>`您需要编写一个嵌入命令的 shell：

```
java -cp bin a.b.c.d.MyClass $* 
```

# vb.net - vb.net 未使用的局部变量

> ID：16160236
> 
> 赞同：0
> 
> 时间：2013-04-23T03:08:19.690
> 
> 标签：vb.net, system.drawing

更新以包含更多代码。

vb.net 2012 给我下面的代码三个警告，说未使用的变量。temp、filetype 和 inde 都被警告为未使用。

```
Private Sub Next_Image()
    ' TO Do -  is same, maybe make a function? Don't know if its worth it though
msgbox(My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension)
exit sub
    If changes = True Then
        If filesettings(2) = 0 Then
            If MessageBox.Show("Save Changes?", "Save Changes", MessageBoxButtons.YesNo, MessageBoxIcon.Question) = Windows.Forms.DialogResult.Yes Then
                Dim filetype As System.Drawing.Imaging.ImageFormat
                If My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension.ToLower = ".png" Then
                    filetype = System.Drawing.Imaging.ImageFormat.Png
                ElseIf My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension.ToLower = ".jpg" OrElse My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension.ToLower = ".jpeg" Then
                    filetype = System.Drawing.Imaging.ImageFormat.Jpeg
                ElseIf My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension.ToLower = ".bmp" Then
                    filetype = System.Drawing.Imaging.ImageFormat.Bmp
                ElseIf My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension.ToLower = ".gif" Then
                    filetype = System.Drawing.Imaging.ImageFormat.Gif
                ElseIf My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension.ToLower = ".tiff" Then
                    filetype = System.Drawing.Imaging.ImageFormat.Tiff
                End If
                img_picture = Nothing
                imageadjust.Save(filename, filetype)
            End If
        End If
    End If
    If Not img_picture.ImageLocation = Nothing Then
        Dim inde As Integer = files.IndexOf(filename)
        If inde = files.Count - 1 Then
            img_picture.ImageLocation = files(0)
        Else
            img_picture.ImageLocation = files(inde + 1)
        End If
        filename = img_picture.ImageLocation
        Me.Text = filename.Substring(filename.LastIndexOf("\") + 1) & " - Picture Viewer"

        If filesettings(0) = 1 Then
            img_picture.SizeMode = PictureBoxSizeMode.CenterImage
        ElseIf filesettings(0) = 2 Then
            img_picture.SizeMode = PictureBoxSizeMode.Zoom
        Else
            Dim temp As New Bitmap(filename)
            Me.img_picture.Refresh()
            If temp.Width > Me.img_picture.Width OrElse temp.Height > Me.img_picture.Height Then
                Me.img_picture.SizeMode = PictureBoxSizeMode.Zoom
            Else
                Me.img_picture.SizeMode = PictureBoxSizeMode.CenterImage
            End If
            temp.Dispose()
        End If
    End If
End Sub 
```

请原谅代码，我刚刚开始添加一些东西，所以有些可能是多余的。但是我不明白为什么 temp、inde 和 filetype 被声明为未使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:33:50.007

将文件类型设置为空（然后稍后对其进行测试）应该可以消除错误。

此外，使用 select case 语句应该稍微整理一下代码：

```
Dim filetype As System.Drawing.Imaging.ImageFormat
Select My.Computer.FileSystem.GetFileInfo(img_picture.ImageLocation).Extension.ToLower
    Case ".png"
        filetype = System.Drawing.Imaging.ImageFormat.Png
    Case ".jpg", ".jpeg"
        filetype = System.Drawing.Imaging.ImageFormat.Jpeg
    Case ".bmp"
        filetype = System.Drawing.Imaging.ImageFormat.Bmp
    Case ".gif"
        filetype = System.Drawing.Imaging.ImageFormat.Gif
    Case ".tif", ".tiff"
        filetype = System.Drawing.Imaging.ImageFormat.Tiff
    Case Else
        filetype = Nothing
End Select
If filetype IsNot Nothing Then
    img_picture = Nothing
    imageadjust.Save(filename, filetype)
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:46:40.813

```
img_picture = Nothing 
```

因此，您在此处将变量声明为 null，然后永远不要从您发布的内容中使用它。

你使用变量吗？就在 if 开关里面？无论哪种方式，这条线看起来都不需要。

此外，通过字符串值测试您的扩展只有两个问题......它可能无法正常工作，而且有点草率。如果您碰巧找到了一个不在您的情况下的文件/否则它将失败，并且还有其他可能性。

IMO，[这确实是测试/检查的更好方法。](https://stackoverflow.com/questions/1337750/get-imageformat-from-file-extension)尽管您必须针对 VB.Net 对其进行调整

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T05:07:09.243

添加所有代码后，您可以看到我的错误。我在检查 msgbox 中的值时添加了退出子命令并忘记将其删除。

感谢这两个答案提供更清晰的代码。

# search - Drupal 7 GeoField Proximity 使用搜索 API 索引

> ID：16160241
> 
> 赞同：4
> 
> 时间：2013-04-23T03:08:59.403
> 
> 标签：search, drupal, views, openlayers

我创建了一个利用搜索 API 集成并允许搜索节点字段的视图。我有与 ol_locator_location (Location) 相关的内容，它由 Address 和 GeoField 组成。我已经索引了 GeoField（所有可能的迭代，包括 WKT）。我想根据可用的 WKT 数据对索引节点执行接近（距离）搜索。问题是 GeoField:Proximity 似乎没有很好的关联。

我可以添加相关节点的 GeoField，并且可以在 OpenLayers 地图上看到它，但我没有提供任何邻近搜索选项。我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T17:16:05.987

您需要使用 search_api_location 模块。该模块为您的地理点过滤器添加了新功能，即能够指定一个点并根据半径搜索附近（接近）的地方。

或者，如果您喜欢编程，您可以自己查询 solr 搜索并使用 PHP 或 Javascript 创建您想要的视图。

[http://wiki.apache.org/solr/SpatialSearch](http://wiki.apache.org/solr/SpatialSearch)

[http://docs.lucidworks.com/display/solr/Spatial+Search](http://docs.lucidworks.com/display/solr/Spatial+Search)

# node.js - 我可以在一个连接中处理四个队列吗？

> ID：16160243
> 
> 赞同：0
> 
> 时间：2013-04-23T03:09:32.903
> 
> 标签：node.js, rabbitmq, amqp, node-amqp

我有 2 个发布队列和 2 个订阅队列，我可以在连接中处理四个队列吗？

```
 connection = amqp.createConnection();
 connection.on("ready", function () {
     subscribe(queue1,msg1);
     publishto(queue2,msg1);
     subscribe(queue3,msg2);
     publishto(queue4,msg2);
 } 
```

还是四个连接？

```
subscribe1(){
connection = amqp.createConnection();
connection.on("ready", function () {
    subscribeto(queue1,msg1);
    })

subscribe2(){
connection = amqp.createConnection();
connection.on("ready", function () {
    subscribeto(queue1,msg1);
    })
...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:12:32.877

AMQP 是一种多路复用协议，因此一个连接可以处理多个订阅。此外，与创建大量连接相比，使用通道占用的资源要少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:01:28.177

我不熟悉 node.js 设置，但在 Java 中有连接和通道。我会使用 1 个连接和 4 个通道，每个通道处理 1 个队列。

# css - 窗口大小更改时垂直列表脱节

> ID：16160245
> 
> 赞同：0
> 
> 时间：2013-04-23T03:09:54.387
> 
> 标签：css, list, html, unordered

我很难解释这个问题，所以让我给你网址。

访问[http://www.ucaftercruz.com](http://www.ucaftercruz.com)

如果您查看页脚，则有一个垂直对齐的无序列表。当您拖动浏览器并使其变小时，列表会从一行变为两行。无论窗口大小如何，如何使它保持在一行中并位于页脚的中心？

我怀疑这与我的div有关。

这是我的html代码：

```
<div style="clear:both;">
   <div id="footer">
    <div id="footer-pages">
        <ul>
            <li><a href="http://www.ucaftercruz.com/about/">About the blog</a></li><span>&#149;</span>
            <li><a href="http://www.ucaftercruz.com/blographies/">The Authors</a></li><span>&#149;</span>
            <li><a href="#">Archives</a></li><span>&#149;</span>
            <li><a href="http://www.ucaftercruz.com/credits/">Credits</a></li><span>&#149;</span>
            <li><a href="http://www.ucaftercruz.com/faq/">FAQ</a></li>
        </ul>
    </div> 
```

这是我的CSS：

```
#footer {
    height: 100px;
    background-color: #d0cabc;
    font-size: 12px;
}

#footer a {
    color: #606060;
}

#footer-pages {
    padding: 20px 0;
    border: 0px solid green;
    margin: 0 auto;
    width: 35%;
}

#footer li {
    display: inline-block;
    margin: 0 15px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:14:54.457

添加`#footer { white-space: nowrap }`到您的 CSS 作为页脚。您还可以添加`min-width:###px`### 足够大的位置。

在第一种情况下，您告诉渲染引擎避免使框小于包含文本所需的最小值。我实际上不确定这是否适用于这种列表。

在第二种情况下，我知道它有效，但不太优雅，它将强制引擎保持布局框不小于特定数量 - 如果您选择包含文本的数量，它可能会添加滚动条（您可以使用该`overflow`属性进行控制）但不会导致文本换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:18:23.230

为了使菜单可以动态添加，您应该将容器宽度（#footer-pages）设置为相当宽的 div，并将内容居中。我通过检查器使用了以下代码：

```
#footer-pages {
  width: 100%;
  text-align: center;
  min-width: 500px;
} 
```

# motorola - Razr i：将外部存储器用作 RAM

> ID：16160251
> 
> 赞同：0
> 
> 时间：2013-04-23T03:10:19.867
> 
> 标签：motorola, flash-memory

所以[我读过一些](http://tabletrepublic.com/forum/uhost2-u2/%5Bguide%5D-how-use-external-sd-card-internal-memory-3636.html)关于在 Android 上将外部存储器作为实际闪存的内容，但不确定在 Razr i 上这样做。我对黑客和技术不太熟悉，所以我需要你的帮助。我如何知道设备是否具有此功能？

我不会用它来存储数据。所以我正在考虑购买一个 32GB 的 microSD 来加快速度，同时使用更多的应用程序。这值得么？我可以将它用作 RAM 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T16:25:30.050

不，您不能将存储内存用作 RAM，优化内存使用的唯一方法是禁用和停止缓存中或在设备中运行的任何进程/服务

# iphone - AVFoundation - 如何使用 beginConfiguration 和 commitConfiguration 更改 AVCaptureMovieFileOutput 设置？

> ID：16160252
> 
> 赞同：1
> 
> 时间：2013-04-23T03:10:29.483
> 
> 标签：iphone, ios, avfoundation, avcapturesession, avcapturemoviefileoutput

`AVCaptureSession`'s的 Apple 文档`beginConfiguration`并`commitConfiguration`说

`After calling beginConfiguration, you can for example add or remove outputs, alter the sessionPreset, or configure individual capture input or output properties.`

我特别希望使用“配置输出属性”部分。特别是，我想使用原子配置更改来停止在一个 AVCaptureMovieFileOutput 上录制并开始在另一个上录制。不幸的是，这似乎不起作用。我具体尝试的是以下代码：

```
NSLog(@" = %d", [[self output] isRecording]);
NSLog(@" = %d", [[self output2] isRecording]);

[[self session] beginConfiguration];
[[self output] stopRecording];
[[self session] removeOutput:output];
[[self session] addOutput:output2];
outputFileURL = [self getMovieSaveURL];
[[self output2] startRecordingToOutputFileURL:outputFileURL recordingDelegate:self];
[[self session] commitConfiguration];

NSLog(@" = %d", [[self output] isRecording]);
NSLog(@" = %d", [[self output2] isRecording]); 
```

但是，从我放置在代码中的 NSLog 语句中，我看到第一个输出仍在记录中，而第二个输出在提交之后仍然没有。有什么想法可以让我完成这项工作吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:07:35.577

您可以使用 AVCaptureOutput 和 AVAssetWriter 将捕获和文件写入解耦。然后所有捕获数据到达您应用程序中的回调，然后您可以将其传递给资产编写器的正确实例。[在http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html](http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html)有一个示例显示了非常相似的内容

# ios - 当我验证应用程序时，Xcode 管理器无法列出我的所有应用程序

> ID：16160253
> 
> 赞同：0
> 
> 时间：2013-04-23T03:10:33.010
> 
> 标签：ios, xcode, app-store, itunes-store

我正在尝试验证我的应用程序，但它说我的应用程序包 ID 与我在 ituneconnect 中定义的不匹配。但我检查了成百上千次是一样的！！

唯一的问题是 xcode 只列出了我的一个应用程序，这不是我要上传的应用程序。像这儿 。它不是我要上传的应用程序的（不是 wowtag，我想上传等于）名称。任何提示？![在此处输入图像描述](https://i.stack.imgur.com/9ekB1.png)

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:56:44.963

在验证您的应用程序之前，它必须在 iTunes Connect 上准备好上传。当您在 iTunes Connect 上提交您的应用程序并在那里填写所有这些信息的表格时，人们经常忘记或没有注意到最后一步；我自己曾多次犯过这个错误。在您完成最后一步之前，您的应用程序的所有信息都在那里，但您尚未按下表示您已准备好上传二进制文件的按钮。完成此操作后，您将能够验证或上传二进制文件。

有关您必须在 iTunes Connect 上按下的按钮的图片，请参阅此答案：[https ://stackoverflow.com/a/13368431/341994](https://stackoverflow.com/a/13368431/341994)

# actionscript-3 - 在 AS3 中收到错误 1026，不知道为什么

> ID：16160254
> 
> 赞同：0
> 
> 时间：2013-04-23T03:10:40.017
> 
> 标签：actionscript-3, apache-flex, constructor, syntax-error

我收到错误 1026，即“构造函数必须是实例方法”，我不知道为什么。我正在创建一个媒体播放器类型的程序，但我的音乐部分有问题。在此之前我制作了一个功能音乐播放器并将代码复制到我的新项目中。现在唯一不同的是代码处于状态而不是 main.mxml 文件。这是我下面的代码，我收到错误消息，上面写着“public var music:Sound;” 我不明白为什么我会收到此错误，任何帮助将不胜感激！

```
<fx:Declarations>
    <fx:XML id="musicXML" source="data/musak.xml" />
    <s:XMLListCollection id="musicCollection" source="{musicXML.song}" />

</fx:Declarations>
<s:HGroup>
    <s:DataGrid id="musicGrid" dataProvider="{musicCollection}" click="onClick()" />
    <local:MusicPosition id="mProgress" width="319" height="83"/>

    <s:VGroup height="55">
        <s:Label text="Now playing: {musicGrid.selectedItem.@name}" />
        <s:Label id="txtPosition" width="91"/>
    </s:VGroup>

</s:HGroup>
<s:Button x="146" y="93" label="play" click="playMusic()"/>
<s:Button x="270" y="93" label="pause" click="pauseMusic()"/>
<fx:Script>

    <![CDATA[

        //set your variables
        public var music:Sound;
        [Bindable]public var musicChannel:SoundChannel;
        public var pausedTime:Number = 0;

        public function onClick():void {
            if(musicChannel) {
                musicChannel.stop();

                //clean up the variables
                music = null;
                musicChannel = null;

            }
            music = new Sound();
            music.load(new URLRequest(musicGrid.selectedItem.file.toString()));
            music.addEventListener(Event.COMPLETE, onMusicLoad);

        }

        public function onMusicLoad(e:Event):void {

            mProgress.update(0);
            //new channel
            musicChannel = music.play();

        }

        protected function onE(e:Event):void {
            if(musicChannel) {
                txtPosition.text = millisecondsToSeconds(musicChannel.position).toString() + "/" +
                    millisecondsToSeconds(music.length).toString();
                mProgress.update(musicChannel.position/music.length);

                mProgress.alpha = 1;
            } else 
                mProgress.alpha = 0;

        }

        protected function millisecondsToSeconds(milliseconds:Number):Number {
            return Math.round(milliseconds/1000);
        }

        public function pauseMusic():void {
            if(musicChannel) {
                pausedTime = musicChannel.position;
                musicChannel.stop();
            }
        }

        public function playMusic():void {
            if(musicChannel) {
                musicChannel = music.play(pausedTime);
            }
        }
    ]]>
</fx:Script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:23:46.623

命名事物时要非常小心。您不能在类中创建与类本身同名的变量或方法。

一个常见的——但不是必需的——命名约定是这样的：

*   使用 CamelCase 进行类。在这种情况下，您的类将被命名为 Music.mxml 或 music.as。根据您的代码，您的 MusicPosition 类似乎已经遵循此约定。
*   方法使用驼峰式，但首字母小写。在这种情况下，您的变量可以命名为音乐。或者，您可以创建一个名为 musicPosition 的变量。请记住，在 Flex 中，MXML 标记的 id 属性等同于变量名。
*   对于常量，使用全部大写。常量通常用作事件类型。

再一次，这些是通用约定 [在 Flex/ActionSCript 之外的编程语言中]，但 Flex SDK 不要求或强制执行。

# ruby-on-rails - Ruby on Rails 教程第 10 章清单 10.36 测试失败，因为由于练习 9.6.5 而不同

> ID：16160257
> 
> 赞同：0
> 
> 时间：2013-04-23T03:11:17.910
> 
> 标签：ruby-on-rails, ruby

更新：已解决，通过恢复到运动前条件并将用户规范更改为“确认”而不是“密码确认”

```
describe "with valid information" do
      before do
        fill_in "Name", with: "Example User"
        fill_in "Email", with: "user@example.com"
        fill_in "Password", with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end 
```

做过这些练习的人可以帮助我吗？

不幸的是，用户请求规范现在被破坏了，因为注册和编辑表单使用了旧版本的部分错误消息。为了修复它们，我们将使用更通用的版本更新它们，如代码清单 10.36 和代码清单 10.37 所示。（注意：如果您在第 9.6 节的练习中实现了清单 9.50 和清单 9.51，您的代码会有所不同。比照。）

```
Failures:

  1) User pages signup with valid information should create a user
     Failure/Error: fill_in "Name",         with: "Example User"
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:104:in `block (4 levels) in <top (required)>'

  2) User pages signup with valid information after saving the user
     Failure/Error: fill_in "Name",         with: "Example User"
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:104:in `block (4 levels) in <top (required)>'

  3) User pages signup with valid information after saving the user
     Failure/Error: fill_in "Name",         with: "Example User"
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:104:in `block (4 levels) in <top (required)>'

  4) User pages signup with valid information after saving the user
     Failure/Error: fill_in "Name",         with: "Example User"
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:104:in `block (4 levels) in <top (required)>'

  5) User pages edit with valid information
     Failure/Error: fill_in "Name",             with: new_name
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:150:in `block (4 levels) in <top (required)>'

  6) User pages edit with valid information
     Failure/Error: fill_in "Name",             with: new_name
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:150:in `block (4 levels) in <top (required)>'

  7) User pages edit with valid information
     Failure/Error: fill_in "Name",             with: new_name
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:150:in `block (4 levels) in <top (required)>'

  8) User pages edit with valid information
     Failure/Error: fill_in "Name",             with: new_name
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:150:in `block (4 levels) in <top (required)>'

  9) User pages edit with valid information
     Failure/Error: fill_in "Name",             with: new_name
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:150:in `block (4 levels) in <top (required)>'

Finished in 5.78 seconds
112 examples, 9 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:119 # User pages signup with valid information should create a user
rspec ./spec/requests/user_pages_spec.rb:116 # User pages signup with valid information after saving the user
rspec ./spec/requests/user_pages_spec.rb:115 # User pages signup with valid information after saving the user
rspec ./spec/requests/user_pages_spec.rb:114 # User pages signup with valid information after saving the user
rspec ./spec/requests/user_pages_spec.rb:158 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:159 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:157 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:160 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:161 # User pages edit with valid information 
```

这是清单中我当前的（错误）代码，因为练习已经改变了它们：

编辑.html.erb

```
<% provide(:title, 'Edit user') %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>
    <%= gravatar_for @user %>
    <a target="_blank" href="http://gravatar.com/emails">change</a>
  </div>
</div> 
```

新的.html.erb

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

清单 9.50。新和编辑表单字段的部分。

应用程序/视图/用户/_fields.html.erb

```
<%= render 'shared/error_messages' %>

<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.label :password %>
<%= f.password_field :password %>

<%= f.label :password_confirmation, "Confirm Password" %>
<%= f.password_field :password_confirmation %> 
```

清单 9.51。带有部分的新用户视图。

/users/new.html.erb

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'fields', f: f %>
      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div>
app/views 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:11:20.017

更新：已解决，通过恢复到运动前条件并将用户规范更改为“确认”而不是“密码确认”

```
describe "with valid information" do
      before do
        fill_in "Name", with: "Example User"
        fill_in "Email", with: "user@example.com"
        fill_in "Password", with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end 
```

# three.js - 如何获取从 OBJLoader 加载的 obj 文件上的鼠标单击位置？

> ID：16160263
> 
> 赞同：7
> 
> 时间：2013-04-23T03:11:45.670
> 
> 标签：three.js, webgl

我使用 OBJLoader 加载了模型，这里是加载 obj 文件的代码：

```
 var loader = new THREE.OBJLoader();
        loader.load('obj/teeth/teeth4_5.obj', function(object) {
            model = object;
            scene.add( model );
            objects.push( model );
        }); 
```

我正在尝试使用 raycaster 来找到交叉点。我在three.js 中实现了canvas_interactive_cubes 示例（[http://mrdoob.github.io/three.js/examples/canvas_interactive_cubes.html](http://mrdoob.github.io/three.js/examples/canvas_interactive_cubes.html)）中的代码。这是找到交点的代码：

```
 function onDocumentMouseDown( event ){
        event.preventDefault();
        var mouseX = (event.clientX / window.innerWidth)*2-1;
        var mouseY = -(event.clientY /window.innerHeight)*2+1;
        var vector = new THREE.Vector3( mouseX, mouseY, 0.5 );
        projector.unprojectVector( vector, camera );
        var raycaster = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );
        var intersects = raycaster.intersectObjects( scene.children );
        console.log( intersects[0].point);
    } 
```

不幸的是，我无法获得交叉点的 x、y、z 坐标，无论我在哪里点击，它总是显示“TypeError：intersects[0] is undefined”。

我被困在这里好几天了。有人能告诉我一种在加载的 obj 文件上获取交集的方法吗？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T03:32:27.943

尝试像这样添加递归标志：

```
var intersects = raycaster.intersectObjects( objects, true ); 
```

三.js r.58

# django - 如何避免 Django URLField 添加斜杠？

> ID：16160265
> 
> 赞同：1
> 
> 时间：2013-04-23T03:11:47.037
> 
> 标签：django, django-forms

[Django URLField](https://docs.djangoproject.com/en/1.5/ref/forms/fields/#urlfield)喜欢在用户输入的末尾添加一个斜杠（`/`），强制所有 URL 都用额外的字符存储，这是错误的。如何停止这种行为并保存用户提交的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:37:08.530

检查[https://github.com/django/django/blob/master/django/forms/fields.py](https://github.com/django/django/blob/master/django/forms/fields.py)。`to_python`_ `URLField`_

您可以看到它`url_fields[2] = '/'`几乎在方法末尾有一行`to_python`。它在 url 的末尾附加一个斜杠`/`。您可以在此行之前将执行此操作的逻辑视为注释。

如果给出了一些查询参数，这个斜杠是必要的。

如果您想避免这种行为，请编写您自己的字段，该字段从您的自定义类扩展`URLField`并覆盖`to_python`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:09:27.327

我也一直在为此苦苦挣扎，因为它会导致某些网址出现问题。例如，[http://www.nasa.gov/mission_pages/kepler/news/kepler-62-kepler-69.html/](http://www.nasa.gov/mission_pages/kepler/news/kepler-62-kepler-69.html/)失败，但它可以在没有斜杠的情况下工作。

为了扩展 akshar 的答案，[这里](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)解释了执行此操作的方法。例如，在我的 models.py 文件中定义它并设置`url = NoSlashURLField()`而不是`models.URLField()`在我的模型中删除斜线：

```
try:
    from urllib.parse import urlsplit, urlunsplit
except ImportError:     # Python 2
    from urlparse import urlsplit, urlunsplit

class NoSlashURLField(models.URLField):
    description = "Remove the goddamn slash"
    __metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwargs):
        super(NoSlashURLField, self).__init__(*args, **kwargs)

    def to_python(self, value):
        def split_url(url):
            """
            Returns a list of url parts via ``urlparse.urlsplit`` (or raises a
            ``ValidationError`` exception for certain).
            """
            try:
                return list(urlsplit(url))
            except ValueError:
                # urlparse.urlsplit can raise a ValueError with some
                # misformatted URLs.
                raise ValidationError(self.error_messages['invalid'])

        value = super(NoSlashURLField, self).to_python(value)
        if value:
            url_fields = split_url(value)
            if not url_fields[0]:
                # If no URL scheme given, assume http://
                url_fields[0] = 'http'
            if not url_fields[1]:
                # Assume that if no domain is provided, that the path segment
                # contains the domain.
                url_fields[1] = url_fields[2]
                url_fields[2] = ''
                # Rebuild the url_fields list, since the domain segment may now
                # contain the path too.
                url_fields = split_url(urlunsplit(url_fields))
#            if not url_fields[2]:
#                # the path portion may need to be added before query params
#                url_fields[2] = '/'
            value = urlunsplit(url_fields)
        return value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T20:55:09.267

对于那些在他们的站点上使用通常的 Django 管理表单，并且还使用 South 进行 DB 迁移的人，您可能希望使用以下方法而不是 Stonefury 的方法。他的方法改变了模型字段，这让 South 感到困惑，除非你添加一些特殊的代码。下面的方法只改变了*管理员*代码，让 South 完全不知道。

在您的应用程序中的某处定义此类：

```
class NoSlashURLFormField(forms.URLField):

    def to_python(self, value):
        def split_url(url):
            """
            Returns a list of url parts via ``urlparse.urlsplit`` (or raises a
            ``ValidationError`` exception for certain).
            """
            try:
                return list(urlsplit(url))
            except ValueError:
                # urlparse.urlsplit can raise a ValueError with some
                # misformatted URLs.
                raise ValidationError(self.error_messages['invalid'])

        if value:
            url_fields = split_url(value)
            if not url_fields[0]:
                # If no URL scheme given, assume http://
                url_fields[0] = 'http'
            if not url_fields[1]:
                # Assume that if no domain is provided, that the path segment
                # contains the domain.
                url_fields[1] = url_fields[2]
                url_fields[2] = ''
                # Rebuild the url_fields list, since the domain segment may now
                # contain the path too.
                url_fields = split_url(urlunsplit(url_fields))
            value = urlunsplit(url_fields)
        return value 
```

然后编辑您的 admin.py 文件，如下所示：

```
from your_app.path.to.noslash import NoSlashURLFormField 
from django.contrib.admin.widgets import AdminURLFieldWidget

class MyModelAdmin(admin.ModelAdmin):

    ...

    formfield_overrides = {
        models.URLField: {
            'form_class': NoSlashURLFormField,
            # Need to specify the AdminURLFieldWidget here because it would
            # otherwise get defaulted back to URLInput. 
            'widget': AdminURLFieldWidget,
        }
    } 
```

# entity-framework - 实体框架代码优先 - 共享一对多实体

> ID：16160269
> 
> 赞同：0
> 
> 时间：2013-04-23T03:12:09.357
> 
> 标签：entity-framework, ef-code-first, mapping

我已经在这个街区转了几次，所以我采取了一种新的方法。我想弄清楚是否有可能在多个 0 对多关系的多方上拥有一个实体。这就是我想要做的：

客户有 0 对多电话

```
public class Client
{
  [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int ClientId { get; set; }
  public string Name { get; set; }

  public virtual ICollection<Phone> Phones { get; set; }
} 
```

企业有 0 对多电话

```
public class Business
{
  [Key]
  [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int BusinessId { get; set; }
  public string Name { get; set; }

  public virtual ICollection<Phone> Phones { get; set; }
} 
```

这是电话：

```
public class Phone
{
  [Key]
  [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int PhoneId { get; set; }

  public string Number { get; set; }
} 
```

当然，Business/Client 中的 Phones 属性的问题在于，这会在 Phone 中为 Client 和 Business 创建 FK，这会使 Phone 变得混乱。

所以，我看到另一张海报尝试创建一个手动连接表，但它似乎是面向参与一个关系的多方：

```
public class ClientPhone
{
  public int ClientID { get; set; }
  public int PhoneID { get; set; }

  public virtual Client Client { get; set; } // One Client
  public virtual Phone Phone { get; set; } // One Phone
} 
```

我是否应该使用传统的 0 对多关系将 Phone 拆分为 ClientPhones 和 BusinessPhones“正常”实体。如果有人能给我一些关于最干净的建模方法的建议，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:21:55.427

我认为您可以使用按层次结构表的方法对此进行建模，

```
public class Client
{
  [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int ClientId { get; set; }
  public string Name { get; set; }

  public virtual ICollection<ClientPhone> Phones { get; set; }
}

public class Business
{
  [Key]
  [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int BusinessId { get; set; }
  public string Name { get; set; }

  public virtual ICollection<BusinesPhone> Phones { get; set; }
}

public class Phone
{
  [Key]
  [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int PhoneId { get; set; }

  public string Number { get; set; }
}

public class BusinesPhone:Phone
{

}

public class ClientPhone:Phone
{

} 
```

这将为客户端和商务电话创建一个带有鉴别器列的表。然后，您可以轻松地将客户电话和商务电话分开。

# java - 应用程序中有大量数据

> ID：16160271
> 
> 赞同：0
> 
> 时间：2013-04-23T03:12:12.250
> 
> 标签：java, android, database, sqlite

我计划在未来的某个时候创建​​一个 android 应用程序，我希望它在屏幕上显示很多常量数据。

我不确定执行此操作的最佳方法，但我看到两个选项：

1.  将数据存储在代码本身中，例如创建常量类。
2.  使用嵌入式数据库来保存数据。

我猜选项＃2是最好的方法？但是，如果我不打算对数据库进行任何更新，那么使用数据库似乎很奇怪，我只会选择。

我需要应用程序显示的数据总量可能是大约 400 行，由一个字符串和两个整数组成......

对于我不知道的这种情况，人们是否有不同的使用方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:25:03.810

> 但是，如果我不打算对数据库进行任何更新，那么使用数据库似乎很奇怪

我完全不同意你的看法。数据库不仅用于更新。它可以用作更好的存储，绝对是搜索的最佳方式。因此，如果您想保留数据，那么使用数据库绝对是明智的。

但是，如果您想处理不会持久的数据，即您将为不同的运行使用不同的数据，那么您可以使用临时类或其他数据结构来存储数据。

最后，如果您打算拥有便携性，那么文件存储是一个更简单的解决方案。

所以你可以看到，这完全取决于你想要什么。

# c - 随机数种子生成器：准时使用系统

> ID：16160273
> 
> 赞同：1
> 
> 时间：2013-04-23T03:12:14.073
> 
> 标签：c, security, encryption, random, rsa

我试图理解为什么这段代码是一个安全漏洞。根据我的理解，在程序打开时使用系统时间生成随机数种子是不安全的，但这怎么能猜到呢？我不确定我是否看到了可能的漏洞。

*由于 D. Wagner 的 DMCA 请求而删除了代码示例*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:26:25.190

首先，您的代码有一个错误，它根本不使用该值`time_in_sec`- 它会覆盖以下行中的值：

```
seed = time_micro_sec >> 7; 
```

此外，`time_micro_sec`只有 1000000 个可能的值，并且在右移 7 后减少到只有 7813 个可能的值。通过蛮力搜索这个空间是微不足道的。

即使您修复了这些错误，最终`srand()`/`rand()`随机数生成器也不是加密强的 PRNG。`srand()`接口最终受限于接受参数的事实，`unsigned int`在普通平台上，该参数将初始状态的熵限制为仅 32 位。这不足以防止对种子的暴力攻击。

不要将`srand()`/`rand()`用于安全关键随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:20:50.577

如果您可以预测运行程序时的系统时间（如果您是运行程序的人，这不是一个延伸），那么您可以预测输入种子的值，从而确定“随机”数字是多少生成器将生成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T03:28:48.537

忽略彻底的错误，我认为这不是故意的......

您不必预测这成为问题的确切时间 - 只是粗略的时间。对于任何给定的种子，生成的随机值是完全可预测的序列。因此，如果您反复执行操作，您可以尝试推断出哪个种子与您看到的模式匹配如果您可以将开始时间缩小到一分钟内，例如，只有 60,000 个种子需要搜索（假设毫秒，尽管您混合有关millis、名为micros 的变量和看起来都不是的值的评论），这可能很简单。一天只有 86,400,000 - 更大，但可行。

如果我有能力，例如使您的应用程序崩溃并强制重新启动，那么预测您的种子并进一步利用它会变得容易得多。如果没有，如果您具有本地访问权限，则查找开始时间很简单。如果是远程攻击，可能会更难，但是，例如在 MMO 上，服务器重启可能是可预测的，您的银行可能会在周日晚上 10 点到凌晨 4 点进行服务更新，等等 - 所有这些都泄漏开始时间。

基本上：如果您想要安全的东西，请首先使用旨在确保安全的东西。

# bash - Bash — 检查变量是否与许多选项中的任何一个不同

> ID：16160279
> 
> 赞同：0
> 
> 时间：2013-04-23T03:12:47.950
> 
> 标签：bash, if-statement

如果我有代码

```
if [[ this != that && this != another ]] 
```

有没有办法让它分类？就像是

```
if [[ this !=that && != another ]] 
```

这自然是行不通的，但是这样的事情，可以缩短条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T03:31:59.120

使用 bash，您可以在内部使用正则表达式`[[`：

```
if [[ ! this =~ ^(that|another|this\ one)$ ]]; then
   # do something
fi 
```

`!`如果您习惯于任何其他编程语言，则 (not) 运算符的优先级可能会令人困惑。另外，请注意：*不要将正则表达式放在引号中*。如果你这样做了，它就不再是一个正则表达式。

# r - 获取当前的ggplot对象

> ID：16160281
> 
> 赞同：2
> 
> 时间：2013-04-23T03:12:53.460
> 
> 标签：r, ggplot2

假设我绘制这样的图：

```
ggplot(iris, aes(x=Sepal.Length, y=Petal.Length)) + geom_point() 
```

然后我意识到我忘了存储结果（即 ggplot 对象）。

**如何检索与当前设备对应的 ggplot 对象？**

我可以输入一些`ggplot`函数`cur.dev()`来检索相关的绘图对象，还是它永远消失了？

（注意 - 在这种情况下我可以这样做`p <- .Last.value`，但假设我从那时起输入了一些命令，因此这是不可用的。

动机 - 添加一个钩子以`knitr`自动设置`fig.cap`为情节的标题（如果有的话））。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T03:15:39.147

你在追求[`last_plot`](http://docs.ggplot2.org/current/last_plot.html)

它检索要修改或创建的最后一个图，并由`ggsave`

请注意，它是最后*修改* **或** *创建的图*

`set_last_plot` 是相关代码（见[源码](https://github.com/search?q=set_last_plot+%40hadley%2Fggplot2&type=Code)）

重要的是，创建修改或渲染 ggplot 对象将设置最后一个绘图。

```
ggplot(iris, aes(x=Sepal.Length, y=Petal.Length)) + geom_point()
f <- last_plot()
# will return the iris plot
p <- ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point()
last_plot()
# will return p
f
last_plot() 
# is now f 
```

它也不会计算任何使用`grid`或的修改/操作`gridExtra`（例如`grid.arrange`/`grid.text`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:06:39.787

分配的最后一个对象（并且它不需要是绘图对象）可以通过以下方式恢复`.Last.value`

```
>require(ggplot2)
#Loading required package: ggplot2
 ggplot(iris, aes(x=Sepal.Length, y=Petal.Length)) + geom_point()
 gp <- .Last.value
 gp 
```

只要有分配，这应该返回已被网格函数修改的绘图对象。我不确定这对于通过`print`电话调解的操作是否正确。

# php - 获取字符串中特定字符串的数量

> ID：16160282
> 
> 赞同：0
> 
> 时间：2013-04-23T03:13:21.347
> 
> 标签：php

如果我有这样的字符串：

> ```
> $string = '01122028K,02122028M,03122028K,04122028M,05122028K,06122028P-2,07122028K,08122028P-'; 
> ```

如何获取字符串**$string 中“K”的数量。**在这种情况下，K 将为 4。我知道它可以通过帮助 strpos() 在将 $string 分解为数组后的循环中解决。是否有任何 php 函数可以直接执行此操作？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T03:15:51.163

```
echo "There are " . substr_count($string, 'K') . " K's in the string"; 
```

如果您不想计算`K-1`，可以是：

```
echo "There are " . substr_count($string, 'K')-substr_count($string, 'K-') . " K's in the string"; 
```

要解决评论中的新问题：

```
$string = '01122028K,02122028M,02122028K-1,02122028K-2,03122028K,04122028M,05122028K-1,04122028M,05122028K,06122028P-2,07122028K,08122028P-';
preg_match_all('/K(?:-\d+)?/', $string, $match);
$counts = array_count_values($match[0]);
print_r($counts);

Array
(
    [K] => 4
    [K-1] => 2
    [K-2] => 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:19:24.877

也试试这个解决方案：

```
$string = '01122028K,02122028M,03122028K,04122028M,05122028K,06122028P-2,07122028K,08122028P-';
$strlen = strlen($string);
$count = 0;
for( $i = 0; $i <= $strlen; $i++ ) {
    $char = substr( $string, $i, 1 );
    // $char contains the current character, so do your processing here
    if ($char == "K")
        $count++:
} 
```

然后...

```
echo $count; 
```

这不是一种“直截了当的方式”，但我发现它很有用，因为它非常灵活，您可以操作字符串上的所有类型的代码。

祝你好运！

# ruby-on-rails - Rails 自定义验证有错误但仍在保存？

> ID：16160283
> 
> 赞同：2
> 
> 时间：2013-04-23T03:13:30.330
> 
> 标签：ruby-on-rails, ruby

我正在创建一个 Rails 应用程序来管理事件，并且我想添加验证以检查一个事件是否与另一个事件重叠。

这是我用于检查重叠事件的自定义验证代码：

```
class Event < ActiveRecord::Base
  attr_accessible :full_date, :start_hour, :end_hour, :address

  validate :no_overlapping_events

  def no_overlapping_events
    overlap = false
    same_date = Event.where(:full_date => self.full_date).where("id != ?", self.id).where(:address => self.address)

    same_date.each do |t|
      if self.start_hour <= t.start_hour
        if self.end_hour >= t.start_hour
          overlap = true
          break
        end
      end 
    end

    if overlap == true
      errors.add(:base, "Can't have overlapping events!")
    end
  end
end 
```

我仍然可以创建重叠的事件并且它们仍然被保存。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:18:17.913

您的自定义验证方法“结束”得太快了。尝试：

```
class Event < ActiveRecord::Base
  attr_accessible :full_date, :start_hour, :end_hour, :address

  validate :no_overlapping_events

  def no_overlapping_events
    overlap = false
    same_date = Event.where(:full_date => self.full_date).where("id != ?", self.id).where(:address => self.address)

    same_date.each do |t|
      if self.start_hour <= t.start_hour
        if self.end_hour >= t.start_hour
          overlap = true
          break
        end
      end 
    end

    if overlap == true
      errors.add(:base, "Can't have overlapping events!")
    end
  end
end 
```

此外，作为一个逻辑错误，在以下情况下会发生什么情况：

```
self.start_hour > t.start_hour and self.start_hour < t.end_hour 
```

# c++ - 使用命名空间和文件夹来组织代码是不是有点矫枉过正？

> ID：16160286
> 
> 赞同：2
> 
> 时间：2013-04-23T03:13:43.183
> 
> 标签：c++, namespaces

使用命名空间和文件夹来组织代码是否过大？

例子：

```
Folder Structure:
Engine (Root)
--Audio
--Exceptions
--Game
--GFX
--Input
--Math
--Messages
--Physics
--Time
--[global headers] 
```

所有类都包含在`[root]::`命名空间中，以防止与`std::`第三方代码发生冲突。Math 文件夹包含命名空间中包含的一些辅助（免费）函数的标题，`[root]::Math::`并且音频在命名空间中具有更多辅助（免费）函数`[root]::AudioHandler::`。

我应该将每个文件夹中的类放入类似描述的命名空间中吗？（即 Physics 文件夹中的类也将在`[root]::Physics::`命名空间中。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:32:13.330

命名空间组织逻辑接口，目录“物理”文件。

单个命名空间中的代码越多，它的相对稳定和协调性就越重要；如果标识符不稳定且不协调，您可能会在合并更改时看到冲突。根据您对此类冲突的经验或感受，您可以选择您的命名空间。

`std::`是一个非常稳定且协调良好的命名空间的明显示例，这意味着可以成功地将很多东西捆绑到其中。如果您正在处理一个单人项目 - 从库一直到应用程序 - 您更有可能处理更少的命名空间。

另一方面，如果您有多个独立工作的全球团队 - 不断更改/添加标识符 - 那么最好将代码分隔到命名空间中。此外，如果您经常遇到在一个系统中使用的明显且理想的标识符已经在另一个系统中使用 - 这也暗示了名称空间。

# jquery - jQuery - 在悬停时显示一个重复 div 的实例

> ID：16160287
> 
> 赞同：3
> 
> 时间：2013-04-23T03:13:57.027
> 
> 标签：jquery, css, jquery-ui

我正在尝试获得与该网站类似的功能；[http://theadeleexperience.com/](http://theadeleexperience.com/)将鼠标悬停在缩略图上时，它会显示帖子的日期。我有所有的 PHP 和 HTML 代码，但是我需要一些关于我的 jQuery 代码的帮助才能让它工作。

下面的代码将（显然）在悬停时显示 .test div 的每个实例（具有讽刺意味的是，除了我悬停的那个）；但是我只希望它显示我悬停的 .test div - 而不是它的其他 3 个实例。

除了下面的代码之外，可能还有一种更简单的方法来实现它，或者甚至不使用 jQuery。

```
$(document).ready(function() {
$(".test").hide();
    $(".thumbnail").mouseenter(function() {
        $(".test").show();
    $(".thumbnail").mouseleave(function() {
    $(".test").hide();
    });
        });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:28:45.110

[这](http://jsfiddle.net/29E4j/3/)是我想出的解决方案。

`mouseenter`您提供的代码的主要问题是您没有在函数之后关闭括号。只获得您悬停的那个的关键是使用`this`. 您可以为 提供一个参数`this`，如下所示。`.overlay`, 是目标，但您使用`this`它来确保它只是被悬停的那个。最终代码应如下所示

```
$(".overlay").hide();
$("article").on("hover", function () {
  $(".overlay", this).slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:29:24.510

## HTML

```
<div class="thumbnail">
    <img alt="thumbnail here" src="http://distilleryimage1.s3.amazonaws.com/87fb9072abad11e2b60722000a9f09f0_7.jpg" />
    <div class="test">here is a test content</div>
</div> 
```

## JS

```
$(document).ready(function(){
    $('.test').hide();
    $('.thumbnail').mouseenter(function(){
        $(this).find('.test').each(function(e){
            $(this).show();
        });
    });
    $('.thumbnail').mouseout(function(){
        $(this).find('.test').each(function(e){
            $(this).hide();
        });
    });
}); 
```

## CSS

```
.thumbnail {
    width:200px;
}
.thumbnail img{
    width:100%;
}
.test{
    background: black;
    color: white;
    opacity:0.8;
    margin:10px;
    position:absolute;
    top:0;
    z-index:100;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:28:24.403

那这个呢？

```
$(document).ready(function() {
    $(".test").hide();
    $(".test").mouseenter(function() {
        $(".test").show();
    });
    $(".test").mouseleave(function() {
        $(".test").hide();
    });
}); 
```

您专注于测试而不是缩略图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T03:44:35.050

使用[.hover()](http://api.jquery.com/hover/)

```
$("article").hover(function() {
    $(".overlay", this).slideDown();
}, function() {
    $(".overlay", this).slideUp();
}); 
```

# http - 对于连接错误，我应该返回什么状态代码？

> ID：16160290
> 
> 赞同：28
> 
> 时间：2013-04-23T03:14:44.153
> 
> 标签：http, http-headers

我正在编写一个服务，该服务将有关另一个请求的数据返回给消费者（例如，从 bitly 或 t.co 地址检索未缩短的 URL）。在大多数情况下，我可以返回一个状态代码来反映我从服务器收到的代码，但是当我的服务无法连接到请求的 URL（例如，如果它不存在）时，什么状态代码最合适？我刚在想`400 Bad Request`or `408 Request Timeout`，但是这里有最佳实践吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-23T03:17:54.530

`503 Service Unavailable`似乎是一个合适的选择。这些`4xx`代码旨在表明客户做错了什么。在您指定的情况下，这是一个服务错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-12T06:44:20.597

`502 Bad Gateway`，因为您充当代理服务器。

> 超文本传输​​协议 (HTTP) 502 Bad Gateway 服务器错误响应代码表示服务器**在充当网关或代理**时，收到了来自上游服务器的无效响应。

[https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502)

# c++ - 从“void”转换为非标量类型“std::pair”

> ID：16160292
> 
> 赞同：7
> 
> 时间：2013-04-23T03:14:59.030
> 
> 标签：c++

我有一堆对`spreadsheet`我在obj

```
std::stack< std::pair<std::string, std::string> > undoStack; 
```

我正在尝试弹出堆栈并将其分配给另一对：

```
std::pair<std::string, std::string> change = spreadsheets.at(i).undoStack.pop(); 
```

我收到了这个错误：

```
error: conversion from ‘void’ to non-scalar type ‘std::pair<std::basic_string<char,   std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >’ requested 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T03:17:38.840

`stack::pop()`返回 void 但您正试图将其分配给变量。在将元素从堆栈中弹出之前，您需要调用`top()`以检索元素。

```
std::pair<std::string, std::string> change = spreadsheets.at(i).undoStack.top();
spreadsheets.at(i).undoStack.pop(); 
```

您应该查看文档[`std::stack`](http://en.cppreference.com/w/cpp/container/stack)以熟悉它的成员函数和使用。

[文档`std::stack`](http://en.cppreference.com/w/cpp/container/stack)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:18:18.057

您`pop()`的堆栈函数返回`void`. 你有类型不匹配。

你应该打电话`undoStack.top()`。

# java - 如何在休息控制器中抛出异常

> ID：16160293
> 
> 赞同：1
> 
> 时间：2013-04-23T03:15:02.050
> 
> 标签：java, rest, exception-handling

我想从控制器抛出一个异常。我怎样才能做到这一点？

```
@RequestMapping(value = "user", method = RequestMethod.POST, headers = "Accept=application/xml, application/json")
public @ResponseBody
AppUserDTO registerUser(@RequestBody AppUserDTO userDTO) {

        return userService.registerUser(userDTO);

} 
```

在此返回中，它将引发异常。有什么我可以使用的注释吗？异常将如何作为 JSON 传递给客户端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T03:49:53.857

您似乎正在使用 Spring-MVC。存在一些异常，默认情况下，它们映射到特定的 HTTP 错误代码。您可以在此处找到这些列表：

[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-rest-spring-mvc-exceptions](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-rest-spring-mvc-exceptions)

您抛出的任何其他未捕获的异常都将导致 HTTP 500 响应。

有关如何在 Spring 中使用异常的详细答案，我建议您详细阅读链接页面或谷歌“Spring MVC 异常”。

# file - 如何忽略 Meteor.js 中的文件？

> ID：16160295
> 
> 赞同：1
> 
> 时间：2013-04-23T03:15:10.820
> 
> 标签：file, meteor

需要包含这个文件（[http://trailers.apple.com/appletv/us/js/application.js](http://trailers.apple.com/appletv/us/js/application.js) ) 包含在 Meteor.js 项目中。

该文件不能在公共文件夹中，它必须在 PROJECT_ROOT/appletv/us/js/ 文件夹下。

但是每当我包含该文件时，它都会使 Meteor 崩溃。

关于如何忽略任意文件夹中的任意文件的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:19:38.843

只需添加

```
atv = {}; 
```

到这个application.js的第一行

**其他解决方案**

将你的 application.js 移动到 /lib，然后创建 /lib/lib/hack.js 所以你的项目将是：

```
<project>/lib/lib/hack.js
<project>/lib/application.js
<project>/*stuff* 
```

并放

```
atv = {}; 
```

作为 hack.js 的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:41:30.440

为什么进不去`/public`？`/public`部署时复制到服务器的根目录。跑步时`/public/appletv/us/js/application.js`也会如此。`app.com/appletv/us/js/application.js`

# android - 如何使用 Cocos2d Android 将精灵从顶部移动到底部？

> ID：16160297
> 
> 赞同：0
> 
> 时间：2013-04-23T03:15:19.950
> 
> 标签：android, cocos2d-android, 2d-games

我正在尝试将精灵从屏幕的顶部移动到底部，但此时我没有任何成功...我使用[以下示例](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)。

在这种情况下，精灵从左到右移动，在我的情况下，我想将它们从上到下移动。

谁能帮我解决这个问题？

我该如何继续进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T05:52:20.753

使用 CCMoveToAction 移动精灵。用于精灵从上到下的移动

```
 //to get total size of display
    CGSize winSize = CCDirector.sharedDirector().displaySize();
    CCMoveTo moveTo = CCMoveTo.action(1,
            CGPoint.ccp(width, )); 
```

# node.js - NodeJS Express 动态文件下载

> ID：16160302
> 
> 赞同：3
> 
> 时间：2013-04-23T03:15:46.057
> 
> 标签：node.js, express

我希望用户能够查询数据库并下载格式良好的 txt 文件及其结果。这样做的最佳方法是什么？现在我写入一个临时文件，让用户下载它，然后每周删除一次累积的文件。有没有这样做的 NodeJS 方式？

# scala - Scala 2.10.1 和 JaxB

> ID：16160303
> 
> 赞同：0
> 
> 时间：2013-04-23T03:15:47.317
> 
> 标签：scala, jaxb, glassfish

一直在将我们的 Glassfish 应用程序从 scala 2.9 升级到 2.10，我看到 JAXB 试图将私有 [this] 方法导出为 Web 服务的一部分。

例如，这是一个方法签名，它甚至没有注释。

```
 private[this] def createFreeSubscription(user: User, plan: Plan): Option[UpdateResponseDO] = {} 
```

2.10 中是否有更改让 JAXB 认为这不应该被隐藏？

这是错误。

```
[#|2013-04-22T20:46:39.186-0600|SEVERE|glassfish3.1.2|javax.enterprise.webservices.org.glassfish.webservices|_ThreadID=112;_ThreadName=Thread-7;|Cannot initialize endpoint  : error is : 
com.sun.xml.ws.spi.db.DatabindingException: java.lang.RuntimeException: This version of JAXB might not be supported: proxy object creation failed, probably due to failing constructor method
    at com.sun.xml.ws.db.glassfish.JAXBRIContextFactory.newContext(JAXBRIContextFactory.java:101)
    at com.sun.xml.ws.spi.db.BindingContextFactory.create(BindingContextFactory.java:182)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:213)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:186)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:186)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:111)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:318)
    at com.sun.xml.ws.db.DatabindingImpl.<init>(DatabindingImpl.java:99)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:74)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:58)
    at com.sun.xml.ws.db.DatabindingFactoryImpl.createRuntime(DatabindingFactoryImpl.java:130)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:433)
    at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:268)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:145)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:569)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:552)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:623)
    at org.glassfish.webservices.EjbRuntimeEndpointInfo.prepareInvocation(EjbRuntimeEndpointInfo.java:271)
    at org.glassfish.webservices.Ejb3MessageDispatcher.handlePost(Ejb3MessageDispatcher.java:116)
    at org.glassfish.webservices.Ejb3MessageDispatcher.invoke(Ejb3MessageDispatcher.java:91)
    at org.glassfish.webservices.EjbWebServiceServlet.dispatchToEjbEndpoint(EjbWebServiceServlet.java:200)
    at org.glassfish.webservices.EjbWebServiceServlet.service(EjbWebServiceServlet.java:131)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.doFilter(ServletAdapter.java:1059)
    at com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.invokeFilterChain(ServletAdapter.java:999)
    at com.sun.grizzly.http.servlet.ServletAdapter.doService(ServletAdapter.java:434)
    at com.sun.grizzly.http.servlet.ServletAdapter.service(ServletAdapter.java:384)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: This version of JAXB might not be supported: proxy object creation failed, probably due to failing constructor method
    at org.zeroturnaround.jrebel.jaxb.proxy.JaxbContextProxy.createProxy(JaxbContextProxy.java:55)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1163)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:188)
    at com.sun.xml.bind.api.JAXBRIContext.newInstance(JAXBRIContext.java:111)
    at com.sun.xml.ws.developer.JAXBContextFactory$1.createJAXBContext(JAXBContextFactory.java:113)
    at com.sun.xml.ws.db.glassfish.JAXBRIContextFactory.newContext(JAXBRIContextFactory.java:89)
    ... 45 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedConstructorAccessor120.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.zeroturnaround.jrebel.jaxb.proxy.JaxbContextFactory.buildContext(JaxbContextFactory.java:31)
    at org.zeroturnaround.jrebel.jaxb.proxy.JaxbContextProxyHandler.buildContext(JaxbContextProxyHandler.java:133)
    at org.zeroturnaround.jrebel.jaxb.proxy.JaxbContextProxyHandler.<init>(JaxbContextProxyHandler.java:103)
    at org.zeroturnaround.jrebel.jaxb.proxy.JaxbContextProxy.createProxy(JaxbContextProxy.java:46)
    ... 50 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 4 counts of IllegalAnnotationExceptions
scala.collection.Seq is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at scala.collection.Seq
        at public final scala.collection.Seq scala.util.matching.Regex.scala$util$matching$Regex$$groupNames
        at scala.util.matching.Regex
        at public scala.util.matching.Regex com.gaiam.gcsi.ws.jaxws.CouponRegexResponse._return
        at com.gaiam.gcsi.ws.jaxws.CouponRegexResponse
com.gaiam.gcsis.system.AuthorizationSystem$ServiceStatus is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at com.gaiam.gcsis.system.AuthorizationSystem$ServiceStatus
        at public com.gaiam.gcsis.system.AuthorizationSystem$ServiceStatus com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$statusToAuthCode.arg0
        at com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$statusToAuthCode
Two classes have the same XML type name "{http://gaiam.com/gcsi}option". Use @XmlType.name and @XmlType.namespace to assign different names to them.
    this problem is related to the following location:
        at scala.Option
        at public scala.Option com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$getPurchasingOptionsResponse._return
        at com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$getPurchasingOptionsResponse
    this problem is related to the following location:
        at fj.data.Option
        at public fj.data.Option com.gaiam.gcsi.entities.user.User.getEmail()
        at com.gaiam.gcsi.entities.user.User
        at public com.gaiam.gcsi.entities.user.User com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$createFreeSubscription.arg0
        at com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$createFreeSubscription
Two classes have the same XML type name "{http://gaiam.com/gcsi}state". Use @XmlType.name and @XmlType.namespace to assign different names to them.
    this problem is related to the following location:
        at com.gaiam.gcsi.entities.order.Order$State
        at public com.gaiam.gcsi.entities.order.Order$State com.gaiam.gcsis.ws.dto.OrderInfoDO.getOrderState()
        at com.gaiam.gcsis.ws.dto.OrderInfoDO
        at public com.gaiam.gcsis.ws.dto.OrderInfoDO com.gaiam.gcsi.ws.jaxws.GetOrderInfoResponse.orderInfo
        at com.gaiam.gcsi.ws.jaxws.GetOrderInfoResponse
    this problem is related to the following location:
        at com.gaiam.gcsi.entities.user.PaymentSource$State
        at public com.gaiam.gcsi.entities.user.PaymentSource$State com.gaiam.gcsi.entities.user.PaymentSource.getState()
        at com.gaiam.gcsi.entities.user.PaymentSource
        at com.gaiam.gcsi.entities.user.CreditCard
        at public com.gaiam.gcsi.entities.user.CreditCard com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$guessBillingAddress.arg0
        at com.gaiam.gcsi.ws.jaxws.Com$gaiam$gcsi$ws$ClubSiteGateway$$guessBillingAddress

    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:106)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:466)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:298)
    ... 57 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:12:41.673

用于`@XmlTransient`从映射中排除字段、方法或类。

# android - android 2.3设置preferenceActivity背景但滚动时刷新

> ID：16160304
> 
> 赞同：1
> 
> 时间：2013-04-23T03:15:48.403
> 
> 标签：android, android-preferences

我遇到了一个UI问题，我使用preferenceActivity来完成我的软件的设置功能。但是我将图像设置为preferenceActivity的listview背景或preferenceActivity的背景，然后滚动listview，背景图像将被刷新或消失，任何人都可以遇到这个之前的问题？我在android 4.0上测试过，这个问题不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:30:35.197

这很可能是 的`cacheColorHint`属性的问题，该属性`ListView`旨在帮助列表具有纯色背景时的滚动性能。可以通过将 设置`cacheColorHint`为透明来删除它。

您可以阅读这篇 Android 开发者博客文章了解更多信息：

[为什么我的名单是黑色的？](http://android-developers.blogspot.com/2009/01/why-is-my-list-black-android.html)

# android - 如何获取google play上的应用总数和下载总数

> ID：16160308
> 
> 赞同：0
> 
> 时间：2013-04-23T03:16:06.987
> 
> 标签：android

我只能从媒体上获得一些信息，而且它们已经过时了。有什么地方可以找到最新的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:22:36.717

看看 AppBrain。您可以在那里找到两个问题的答案。

[http://www.appbrain.com/stats/number-of-android-apps](http://www.appbrain.com/stats/number-of-android-apps)

# localdb - SQL Server VSS 编写器拒绝启动

> ID：16160310
> 
> 赞同：3
> 
> 时间：2013-04-23T03:16:28.003
> 
> 标签：localdb

我在 Windows 7 64 位机器上安装了 Visual Studio 2012。我正在尝试安装 SQL Server express LocalDB 并在安装程序尝试启动服务时出现错误。这是确切的错误消息：

> 服务“SQL Server VSS 编写器”无法启动。验证您有足够的权限来启动系统服务。

我以管理员身份登录到机器。我已经验证服务中的写入程序正在运行并且它设置为自动。

据我所知，我没有在这台机器上安装 SQL Server。

我难住了。有人有想法么？

此外，当我尝试在服务中启动 SQL Writer 时，我收到以下错误：

> Windows 无法在本地计算机上启动 SQL Server VSS Writer 服务。
> 
> 错误 1053：服务器没有及时响应启动或控制请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-06-29T14:56:55.973

感谢 Process Explorer，我们可以看到当服务尝试启动（并且失败）时缺少 MSVCP140.dll：

[![procmon 屏幕截图](https://i.stack.imgur.com/LUoBA.png)](https://i.stack.imgur.com/LUoBA.png)

解决方案是为 Visual Studio 2015 安装 Visual C++ Redistributable：

[https://www.microsoft.com/en-us/download/details.aspx?id=48145](https://www.microsoft.com/en-us/download/details.aspx?id=48145)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T06:01:23.000

您是否尝试过以下 URL，我们需要赋予用户特定的权限

[http://technet.microsoft.com/en-gb/library/cc794944(v=ws.10).aspx](http://technet.microsoft.com/en-gb/library/cc794944(v=ws.10).aspx)

# jquery - 查询多个每个语句保持变量在一个级别

> ID：16160312
> 
> 赞同：0
> 
> 时间：2013-04-23T03:16:46.710
> 
> 标签：jquery, push, each

我试图深入了解在 Jquery 中做某事的最佳方式。

HTML

```
<div class="questionblock" id="questionblock1" data-load="questionblock2">
                    <div class="row inline">
                        <div class="labelholder">
                            <strong>Q:</strong>
                            <label>Question 1</label>
                        </div>
                        <div class="inputholder">
                            <strong>A:</strong>
                            <select data-val="question1">
                                <option data-value="default">Please select</option>
                                <option>Answer 1</option>
                                <option>Answer 2</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="questionblock" id="questionblock2" data-load="questionblock3">
                    <div class="row inline">
                        <div class="labelholder">
                            <strong>Q:</strong>
                            <label>Question 2</label>
                        </div>
                        <div class="inputholder">
                            <strong>A:</strong>
                            <select data-val="question1">
                                <option data-value="default">Please select</option>
                                <option>Answer 1</option>
                                <option>Answer 2</option>
                            </select>
                        </div>
                    </div>
                    <div class="row inline">
                        <div class="labelholder">
                            <strong>Q:</strong>
                            <label>Question 3</label>
                        </div>
                        <div class="inputholder">
                            <strong>A:</strong>
                            <select data-val="question2">
                                <option data-value="default">Please select</option>
                                <option>Answer 1</option>
                                <option>Answer 2</option>
                            </select>
                        </div>
                    </div>
                </div> 
```

JS

```
<script type="text/javascript">
            $(function () {
                $('#content').removeClass('nojs');
                $('.questionblock').not('#questionblock1').hide();
                $('.questionblock').each(function () {
                    var myQuestions = [];
                    var block = $(this).attr('id');
                    var load = $(this).data('load');            
                    $(this).children().children().children('select').each(function () {
                        var questions = $(this).data('val');
                    });
                    console.log(block, questions);
                });
            });
        </script> 
```

我希望能够使用一个问题块类获取每个 div，读取 id，然后获取此 div 中的所有选择框，并输出它们的 data-val，以便我可以在一个级别上对其进行验证。

[http://jsfiddle.net/VEtx8/](http://jsfiddle.net/VEtx8/)

谢谢

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:19:45.547

```
 var questions;
        function getQuestions() {
            questions = [];
            $('.questionblock').each(function () {
                var block = $(this).attr('id');
                var load = $(this).data('load'); // Not used?       
                $(this).find('select').each(function () {
                   questions.push($(this).data('val'));
                });
                console.log(block, questions);
            });
         }
         $(function() {
             getQuestions();
             $(".questionblock select").change(getQuestions);
         }); 
```

# javascript - 我如何在javascript中使语句“for”等待

> ID：16160313
> 
> 赞同：0
> 
> 时间：2013-04-23T03:16:49.263
> 
> 标签：javascript, jquery, ios, cordova, jquery-mobile

我有 1 个应用程序使用为 ios 编写的 phone gap 2.5.0。我正在尝试将服务器中的文件下载到我的应用程序。我需要下载很多文件（84 个文件）；我使用 1 个循环来下载所有内容。

但是当我使用“for”语句时，它循环太快并且几乎同时下载所有文件，并且某些文件由于超时而无法下载完成。

所以我想要 1 个文件下载完成，然后下一个文件开始下载。

我怎样才能做到这一点？

请帮我！我是垃圾车...

这是我的代码：

```
var fileTransfer = new FileTransfer();

for (var i = 0; i < anhup.length; i++) {
    console.log("anhup[" + i + "]: " + anhup[i]);
    fileTransfer.download(
        "http://smartphone.thnt.vn/VietGames/GhepTranhTu/IOS/update/"
                + anhup[i], window.rootFS.fullPath + "/" + anhup[i],
        function(entry) {
            sa = entry.fullPath;
            console.log("download complete: " + entry.fullPath);

        }, function(error) {
            console.log("download error source " + error.source);
            console.log("download error target " + error.target);
            console.log("upload error code" + error.code);
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:22:41.033

尝试

```
function download() {
    var i = 0;

    var fileTransfer = new FileTransfer();

    function doDownload(i) {
        fileTransfer.download(
                "http://smartphone.thnt.vn/VietGames/GhepTranhTu/IOS/update/"
                        + anhup[i], window.rootFS.fullPath + "/" + anhup[i],
                function(entry) {
                    sa = entry.fullPath;
                    console.log("download complete: " + entry.fullPath);

                    if (i < anhup.length - 1) {
                        doDownload(i + 1);
                    }

                }, function(error) {
                    console.log("download error source " + error.source);
                    console.log("download error target " + error.target);
                    console.log("upload error code" + error.code);
                });
    }

    doDownload(0)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:25:21.773

创建一个函数并继续调用自身，直到对象为空，就像这样。

```
function loadFile() {
    // no more to load
    if(!anhup.length)
        return;

    var context = anhup.shift();

    fileTransfer.download(url, function(entry) {
        console.log("download complete: " + entry.fullPath);

        loadFile();
    }, function(error) {
        // ...
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:29:43.950

你不能用“for”循环来做到这一点，你需要在调用'success'回调函数时开始下载下一个文件；最简单的方法是制作'i'全局变量，然后像这样重写你的代码（未经测试！）：

```
var i = 0;
var downloadNext;

var onSuccess = function(entry) {
    sa = entry.fullPath;
    console.log("download complete: " + entry.fullPath);
    i = i + 1;
    if (i < anhup.length) {
       downloadNext();
    }
};

var onFail = function(error) {
        console.log("download error source " + error.source);
        console.log("download error target " + error.target);
        console.log("upload error code" + error.code);
};

downloadNext = function() {
    console.log("anhup[" + i + "]: " + anhup[i]);
    fileTransfer.download(
        "http://smartphone.thnt.vn/VietGames/GhepTranhTu/IOS/update/"
            + anhup[i], window.rootFS.fullPath + "/" + anhup[i], 
         onSuccess,
         onFail
    );
};

// start downloading the first one
downloadNext(); 
```

# java - 动态创建行时如何为行提供替代颜色？

> ID：16160316
> 
> 赞同：0
> 
> 时间：2013-04-23T03:17:33.003
> 
> 标签：java, html, jsp

我在 while 循环中动态创建行。

当从特定目录获取数据时，将创建所需的行。但我想给行提供备用斑马颜色。那我该怎么办？

以下代码在我的 jsp 页面上：

```
<% 

        while(rsemail.next())
        {
             user_email = rsemail.getString(2);
             file_name = rsemail.getString(3);
             file_size = rsemail.getFloat(4);
             file_type = rsemail.getString(5);

             for (int i = 0; i < listOfFiles.length; i++)
                {
                    if (listOfFiles[i].isFile())
                    {
                        if(listOfFiles[i].getName().equals(file_name))
                        {
                            row_counter = row_counter + 1;
                            %>

                                <tr height="28px"  id="table_row" bgcolor="#C6C6C6">
                                  <td width="7%"><div align="center"><%= id=id+1 %></div></td>
                                  <td width="39%"><%=listOfFiles[i].getName() %></td>
                                  <td width="12%"><%= file_type  %></td>
                                  <td width="14%"><%= file_size/1000 %> KB</td>
                                  <td width="14%"><div align="center">Delete</div></td>
                                  <td width="14%"><div align="center"><a href="Savefile?path=d:\Reports\&filename=<%=listOfFiles[i].getName()%>">Download</a> </div></td>
                                </tr>                             
                            <%
                        }
                    }
                }
        }
        %> 
```

表显示可以下载的目录数据以及它的名称和类型和大小也显示。显示我想以某种安排好的替代方式放置它。

> **所以任何人都可以帮助我？？？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:26:09.310

你有没有尝试过这样的事情

```
<%
 String StrBgEven = "#C6C6C6", strBgOdd = "#FFFFFF"; // outside loop
 if( i%2 == 0 ){
%>
 <tr height="28px"  id="table_row" bgcolor="<%=strBgEven%>">
<%  
}else{
%>
 <tr height="28px"  id="table_row" bgcolor="<%=strBgOdd%>">
<%
} 
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:25:15.963

1.  将两种颜色放入一个数组`colors`中。
2.  将一个整数初始化`i`为`0`。
3.  在循环体中迭代表的行
    1.  将颜色分配给`colors[i]`当前行
    2.  更新`i`为`1-i`

为了澄清这一点，`i`必须重命名上述算法中的，因为`i`已经使用了您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:23:57.890

在循环中使用行数并检查`if(rowcount%2==0)`是否为真，然后使用 css 更改背景颜色。

例子 ：-

**循环开始**

```
<tr style="<%if(cnt%2==0){ %>background-color:#ffffff;<%}else{%>background-color:#F9F9F9;<%} %>">

</tr> 
```

**循环结束**

在上面的示例中`<tr></tr>`，您可以将数据 ( `<td></td>`)。

希望它会帮助你。

# hibernate - 在相关实体上发生 ConstraintViolation 后 Hibernate 对象分离

> ID：16160328
> 
> 赞同：0
> 
> 时间：2013-04-23T03:18:37.683
> 
> 标签：hibernate, exception, jpa, detach

我使用 Spring/JPA/Hibernate。我有一个相当标准的 Dao 和 Service 层实现。

```
class GenericDao<T> {
   public save(T entity) {
       if (!entity.isIdSet()) {
           getEntityManager().persist(entity);
       }
       // other cases are update, 
       // so a transactional service method will suffice
       // we dont need to do anything
   }
}

class ParentEntity {
    // Nothing special here, just an entity with auto-generated PK, if that matters
}

class RelatedEntity {
    // Fairly standard many-to-one relation
    @Column(name = "parent_id",nullable = false,insertable = false,updatable = false)
    public Integer getParentId() {
         return parentId;
    }

    @NotNull
    @JoinColumn(name = "parent_id", nullable = false)
    @ManyToOne(cascade = {PERSIST, MERGE}, fetch = LAZY)
    public ParentEntity getParent() {
        return parent;
    }
}

class Repository<T> { // There is an implementation of this for both entities above
   @Transactional
   public void save(T entity) { getDao().save(entity); }
} 
```

现在的问题，我有 -

我正在读取一个包含相关实体数据的文件，在数据库中创建了几条记录。这样做时，我需要设置父引用。我不想每次插入子记录时都查找父实体。因此，我创建了所有父记录的列表并保留了父实体的映射（这个集合相当小，不到 10 个）。我遍历数据并在孩子中设置父引用并保存孩子。

```
public void getParentList {
    List parentList = parentRepository.find();
    // create a map with the list items for easy lookup on name
}
public void importData() {
  for (line : file) {
      RelatedEntity re = new RelatedEntity();
      re.setParent(map.get(line.parentName)); // The refered object is got once in getParentList
      // lookup the map for the parent
      // set all properties of re here
      childRepository.save(re);          
  }
} 
```

到目前为止，一切都很好。

我不想明确地验证传入的数据，而是想使用已经在实体上设置的 JPA 验证。所以我想处理 save() 周围的约束破坏异常并忽略不验证的记录。但想继续处理剩下的数据。

当我这样做时，我得到一个例外：

```
javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.myads.domain.ParentEntity

public void importData() {
  for (line : file) {
      RelatedEntity re = new RelatedEntity();
      // lookup the map for the parent
      // set all properties of re here
      try {
         childRepository.save(re);
     } catch (CVE cve) {
         // log the record that failed validation 
         /*************
         // Note: If I land here on line(x), I get PersistenceException on save for the
         // next iteration(x+1).
         **************/
     }
  }
} 
```

因此，当子实体引发持久性异常时，父实体似乎与会话分离。如果在孩子 perist 期间没有异常，一切正常。

那么问题是什么，解决方案是什么？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:56:22.753

> 我不想明确地验证传入的数据，而是想使用已经在实体上设置的 JPA 验证

这就是你的问题所在。[文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html_single/#transactions-demarcation-exceptions)明确地说：

> 如果 Session 抛出异常，包括任何 SQLException，立即回滚数据库事务，调用 Session.close() 并丢弃 Session 实例。Session 的某些方法不会使会话保持一致状态。Hibernate 抛出的任何异常都不能被视为可恢复的。通过在 finally 块中调用 close() 确保 Session 将被关闭。

# variables - 在其他脚本中定义的调用闭包

> ID：16160329
> 
> 赞同：0
> 
> 时间：2013-04-23T03:18:38.890
> 
> 标签：variables, binding, groovy

访问 Groovy 中另一个脚本中定义的闭包的正确和最简单的方法是什么。这可能不是最好的设计，但我在

SomeScript.groovy

```
bindingC = {
    ...
}

def localC = {
    ...
} 
```

其他脚本.groovy

```
SomeScript s = new SomeScript()
s.bindingC(...);
s.localC(...); 
```

注意：SomeScript.groovy 是程序逻辑，OtherScript.groovy 是单元测试逻辑。它们都在同一个包中，我已经能够访问 SomeScript 中的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:51:52.340

您可以使用两种方法（我知道）来实现您想要的；您可以实例化`SomeScript`并运行其内容，也可以`SomeScript`使用 groovy shell 进行评估。需要执行脚本，以便在绑定中创建变量：

SomeScript.groovy：

```
bindingC = {
    110.0
} 
```

OtherScript.groovy 解决方案1：

```
s = new GroovyShell().evaluate new File("SomeScript.groovy")
assert s.bindingC() == 110.0 
```

OtherScript.groovy 解决方案2：

```
s2 = new SomeScript() // SomeScript is also an instance of groovy.lang.Script
s2.run()
assert s2.bindingC() == 110.0 
```

# ocaml - OCaml 中的按位运算

> ID：16160332
> 
> 赞同：7
> 
> 时间：2013-04-23T03:19:13.947
> 
> 标签：ocaml, bit-manipulation

在 OCaml 中编写 bit-twiddling 代码最惯用的方法是什么？我知道非常酷的[Bitstring](https://code.google.com/p/bitstring/ "位串")库，但是虽然这将是在某些协议中解析二进制数据的好方法，但它不支持异或或移位等按位运算。

我相信该库使用的底层数据结构只是 OCaml 字符串，我知道它是可变的（并且相对紧凑？我想我读到某处的开销很小......）字节数组，但你不能方便地做由于异或，移位等对字符串的许多按位运算都没有在字符上定义，而仅在整数类型上定义，因此您必须在整数和字符之间来回转换......例如，逻辑左移定义在字符（字节）上：

```
let byte_lsl (x : char) (n : int) : char =
    Char.chr (255 land (Char.code x lsl n))

# byte_lsl '\x0f' 1 ;;
- : char = '\030' 
```

这是我们能做的最好的吗？

据推测，如果编译器还没有将字符打包成机器字，这实际上并不是低效的，并且与 Java 中的情况大致相同......但是 Haskell 和标准 ML 都提供了更小的无符号整数类型，从而产生更清晰的代码， 恕我直言。

[http://www.standardml.org/Basis/word.html#Word8:STR:SPEC](http://www.standardml.org/Basis/word.html#Word8:STR:SPEC)

[http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Word.html#t:Word8](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Word.html#t:Word8)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T03:39:43.853

如果您有很多想要有效打包的位，您可以考虑使用该[`Bigarray`](http://caml.inria.fr/pub/docs/manual-ocaml/manual043.html)库。

我也认为使用字符串会很好。额外的功能实际上`Char.code`并不`Char.chr`生成任何代码。它们只是导致数据被重新解释为一种新类型。字符串的唯一问题（我能想到的）是 32 位模型中字符串大小的限制相当小。我自己已经达到了这个极限几次。

# ruby - Rails 3.1 和 RSS 阅读器

> ID：16160334
> 
> 赞同：1
> 
> 时间：2013-04-23T03:19:29.623
> 
> 标签：ruby, ruby-on-rails-3, rss, feed

我想为阅读 Rss（Feed）创建一个 rails 3 应用程序。但我无法在 rails 3 中找到好方法。

此代码正在运行。但我想阅读 rss 的全部内容。不支持。

```
require 'rss/2.0'
require 'open-uri'

result = RSS::Parser.parse(response, false)
output += "Feed Title: #{result.channel.title}<br />" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:22:11.317

[FeedZirra](https://github.com/pauldix/feedzirra)是这类事情的好宝石。只需这样做：

```
require 'feedzirra'

feed = Feedzirra::Feed.fetch_and_parse("http://feeds.feedburner.com/PaulDixExplainsNothing")
puts feed.entries.first.title
puts feed.entries.first.content 
```

# asp.net - vb asp.net 会话变量不起作用？

> ID：16160335
> 
> 赞同：0
> 
> 时间：2013-04-23T03:19:37.457
> 
> 标签：asp.net, vb.net, dynamic, controls, session-variables

我只想控制用户单击了哪个按钮，所以我使用 Session Variable 来存储该数据，因为我必须在`Page_Load` *(以允许事件处理程序正常工作)*中创建所有动态控件。问题是这个会话变量在我第一次点击时不起作用，但只有第二次。

这是我的代码：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            If Not Page.IsPostBack Then
                'For the first time I want this session variable to be false because Image Button is not yet click
                Me.Session("ImageClick") = False
            End If
            If Me.Session("ImageClick") Then
                'Then after Button Image is clicked I try to add Dynamic control to a div
                AddPreviewTable(0)
                CreateButtomButton(Me.Session("totalPage"))
                Debug.WriteLine(Me.Session("totalPage"))
                Me.Session("ImageClick") = False
            End If
    End sub 
```

问题是我必须单击`ButtonImage`两次才能变为`Me.Session("ImageClick")`True。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:28:15.980

你的`if`块不正确。您需要将会话对象转换为`bool`：

```
If (Session("ImageClick") Is Not Nothing And CBool(Me.Session("ImageClick"))) Then
    'Do your stuff.
End If 
```

# javascript - 单击链接并更改该链接的标题 - javascript

> ID：16160337
> 
> 赞同：1
> 
> 时间：2013-04-23T03:19:45.797
> 
> 标签：javascript

**索引.html**

```
<!DOCTYPE html>
<html>
 <head>
   <script>
    function cha(title){
     document.getElementById("change").innerHTML=title;
    }
   </script>
 </head>
 <body>
   <ul>                                              //sample navigation bar
    <li><a href='index.html'>Home</a></li>           //sample navigation bar
    <li><a href='mission.html' onclick='cha("Mission")'>Mission</a></li> //sample navigation bar
   </ul>                                             //sample navigation bar
     THIS IS MY HOME PAGE
 </body>
</html> 
```

**任务.html**

```
<!DOCTYPE html>
<html>
 <head>

 </head>
 <body>
   <ul>                                              //sample navigation bar
    <li><a href='index.html'>Home</a></li>           //sample navigation bar
    <li><a href='mission.html'>Mission</a></li>      //sample navigation bar
   </ul>                                             //sample navigation bar
     <h1 id='change'>THIS IS MY Mission </h1>
 </body>
</html> 
```

这 2 个网页的理想输出是当我单击 index.html 中的任务时，mission.html 中的标题`<h1>`将更改其内部内容，从 THIS IS MY Mission 它将变成仅如中所述的**任务**`cha("Mission");`，但我不知道这是错误的在我的代码中，我的理想输出没有显示。谢谢大家，对我的语法感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:42:40.050

可以使它成为一个单页解决方案，其中mission.html 仅包含任务数据，这样您就可以按原样将其直接加载到 index.html 中，而根本不必从页面导航。

如果您有能力使用 JQuery/AJAX，您可以加载 html，然后在“成功”时触发文本更改。您可以在页面某处添加一个“任务”div 以将mission.html 加载到其中。

***HTML 标头***

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script> 
```

***HTML 正文***

```
<div id="mission"></div> 
```

***Javascript***

```
function cha(title){
    $('#mission').load('mission.html', function(title) {
        document.getElementById("change").innerHTML=title;
    });
} 
```

如果它是一个可用的选项，我希望这会有所帮助

# ruby-on-rails - 生成一个 json 文件-我对语法感到困惑

> ID：16160339
> 
> 赞同：0
> 
> 时间：2013-04-23T03:19:57.083
> 
> 标签：ruby-on-rails, ruby, json

我有一个用 Nokogiri 创建的哈希，我正在尝试从中生成一个 JSON 文件。我发现

```
tempHash = {
  "key_a" => "val_a",
  "key_b" => "val_b"
}
File.open("public/temp.json","w") do |f|
  f.write(tempHash.to_json)
end 
```

问题是我不断收到错误

```
 test.rb:43:in `initialize': No such file or directory - public/temp.json (Errno::ENOENT) 
```

我的代码看起来像

```
def summary
  listing_data = @nodes
  listings = listing_data.css('div.unsponsored div.item.compact.listing') 

  listing_hashes = listings.map do |x| 
    type = "#{@type}"
    address = x.css('div.body h3 a').text
    unit = x.css('div.body h3 a').text.gsub!(/.*?(?=#)/im, "")
    url = x.css('div.item_inner div.body h3 a').text
    price = x.css('h3 span').text 

    {
      :type => type,
      :address => address,
      :unit => unit,
      :url => url,
      :price => price,
    }
  end

  File.open("public/temp.json","w") do |f|
    f.write(JSON.pretty_generate(listing_hashes))
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:34:08.170

您可能没有创建文件夹。`File.open`如果文件不存在，该选项`w`将创建一个文件，但它不能创建丢失的目录。

如果无法手动创建，可以使用此代码创建文件夹

```
Dir.mkdir('public') unless File.exists?('public')
File.open("public/temp.json","w") do |f|
 f.write(JSON.pretty_generate(listing_hashes))
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:30:19.093

该错误是不言自明的：`"No such file or directory - public/temp.json"`

在这种情况下，它可能是不存在的目录，因为您指定`'w'`了 mode 参数。如果文件不存在，指定`'w'`将创建文件，但不会创建目录。

尝试`public`自己创建目录，然后再次运行您的代码。

# c - C语言枚举声明中的十六进制表达式0x80000000是什么意思

> ID：16160342
> 
> 赞同：1
> 
> 时间：2013-04-23T03:20:10.303
> 
> 标签：c, xcode, objective-c-2.0

我正在阅读 iPhone 示例项目的代码（Xcode IDE，Apple LLVM 编译器 4.2）。在该 iPhone 示例项目的外部库（用 C 编写）的头文件中，在枚举类型中声明了一些事件：

```
typedef enum _Application_Events
{
    EVENT_EXIT = 0x80000000,
    EVENT_TOUCH,
    EVENT_DRAG,
    EVENT_RELEASE_TOUCH,
    EVENT_ROTATE_0,
    EVENT_ROTATE_90,
    EVENT_ROTATE_180,
    EVENT_ROTATE_270
} Application_Events; 
```

我不明白为这些事件分配了什么样的值。`0x80000000`应该是一个大的正整数 ( ) `2147483648`，还是负零，还是一个负整数 ( `-2147483648`)？

我在 Xcode 调试器中进行了检查，编译器是 Apple LLVM 编译器 4.2、`EVENT_EXIT`equals`(int) -2147483648`和`EVENT_RELEASE_TOUCH`equals`(int) -2147483645`等等。

显然，它们以[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示形式处理。可以在[此处](https://stackoverflow.com/questions/3952123/representation-of-negative-numbers-in-c/3952262#3952262)找到相关帖子。

但我现在不确定的是这些：

`0x80000000`(1) 在其他情况下总是存在`int`或其他东西的基础数据类型？这取决于编译器还是平台？

(2) 如果我为这样的有符号整数分配了一个十六进制值，它是否总是被解释为二进制补码表示？这取决于编译器还是平台？可以在[此处](https://stackoverflow.com/questions/12276957/are-there-any-non-twos-complement-implementations-of-c)找到相关帖子。另一个参考可以在[这里](http://www.fefe.de/intof.html)找到。

请分享一些想法。谢谢大家 :D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:25:13.837

像 C 语言中的许多东西一样，枚举只是一个整数。像这样设置第一个值将导致编译器从那里递增，保证所有枚举值都小于 0。（作为 2s 补码的有符号整数，设置的高位将指示负数）

很可能，程序员选择这个值是为了能够发送各种事件，并且不应该与其他事件发生冲突。

简而言之，不要担心实际价值；这只是一个数字。使用名称并理解这应该是使用或返回这些代码的调用的上下文中的含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T03:23:43.407

枚举的基本类型是实现定义的。在这种情况下，基类型应该是`unsigned int`，因为标准要求编译器选择一个足够宽以容纳所有枚举值的基类型。根据 C99 标准，第 6.7.2.2.4 节：

> 每个枚举类型应与**`char`**有符号整数类型或无符号整数类型兼容。类型的选择是实现定义的，^(108))但应该能够表示枚举的所有成员的值。枚举类型在**`}`**终止枚举器声明列表之前是不完整的。
> 
> 108) 实现可能会延迟选择哪种整数类型，直到看到所有枚举常量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T03:28:00.473

的基础类型`enum`取决于它需要持有的值。编译器对如何最终定义该类型有一定的自由度。在您的情况下，基础类型很可能`Application_Events`是`unsigned int`因为它大于`INT_MAX`，假设它`int`的大小是 32 位（`enum`通常是什么）。但是像：

```
enum foo_t {
   FOO_Start,
   FOO_Thing,
   FOO_Another_Thing,
   FOO_End
}; 
```

的类型`enum foo_t`可以是`int`或`unsigned int`。

但是，*枚举常量*（例如 ,`EVENT_EXIT`等`FOO_Start`）是 类型`int`。这就是您在调试器中看到的。如果你做类似的事情

```
Application_Events foo = EVENT_EXIT; 
```

的类型`foo`可能是`unsigned`。我认为这个问题发生了一些变化，所以：

1）对于 iPhone，常数`0x80000000`可能是`unsigned`（iPhone ARM 处理器有 32 位`int`）。它的值取决于平台和使用的 C 版本。

2) 对于实际情况，您可以假设您的处理器将支持二进制补码算法，因为大多数平台都使用它。然而，C 语言本身并**不能**保证这一点。允许使用其他算术方案（反码、有符号幅度）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T03:54:02.550

1.  枚举的类型是 int。
2.  0x80000000 只是一个数字，但以十六进制表示。它的值是您在调试器（或任何十六进制到十进制转换器）中确认的值。
3.  枚举的工作方式是从任何显式分配的值逐步分配值。因此，在这种情况下，枚举被分配为 EVENT_EXIT=0x80000000、EVENT_TOUCH=0x80000001、EVENT_DRAG=0x80000002 等等。

# jquery - CSS 未在 Firefox 或 IE 中加载

> ID：16160345
> 
> 赞同：0
> 
> 时间：2013-04-23T03:20:15.997
> 
> 标签：jquery, html, css

完成后，我的网站根据分辨率更改了 css，css 停止在 Firefox 和 IE 中加载。但是，即使在清除缓存并重新加载后，它似乎仍然可以在 chrome 上运行。我已清除所有浏览器中的缓存并尝试多次重新加载。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" media='screen and(min-width:721px)' href='css/master.css'/>
    <link rel='stylesheet' type="text/css" media='screen and(max-width:720px)' href='css/mobile.css'/>
    <script type="text/javascript" src="javascript/script.js"></script>
<title>The Resistance</title>
</head> 
```

此外 - 另一个页面上的一些 jquery 在实现多个样式表后停止在所有浏览器中工作。关于如何解决这个问题的任何建议？如果我可以为您提供任何其他信息，请继续询问。网站链接在这里-------------

-谢谢

-- 编辑添加了 w3c 验证器认为 XHTML 1.0 STRICT 上的一切都很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:00:13.157

恕我直言，布局 CSS 文件的最佳方式如下：

```
/* Theme style rules */
#wrapper {
    background-color:#444;
    color:white;
    font-family:Verdana, Arial, Times;
}

/* Static structure rules */
#wrapper {
    overflow:hidden;
    width:50em;
}

/* Responsive structure rules */
@media screen and (max-width:1220px) and (min-width:1151px) {
    #wrapper {
        font-size:15px;
    }
}
@media screen and (max-width:1150px) and (min-width:1081px) {
    #wrapper {
        font-size:14px;
    }
} 
```

基本上你想要做的是将你的代码分成几个部分。主题部分只处理不影响 DOM 中元素流动的事情。静态结构部分设置的规则不会改变，无论屏幕大小。响应部分是您放置媒体查询的地方。为您的媒体查询找到断点的最佳方法是“挤压它直到它中断方法”。意思是关闭浏览器，直到页面看起来像垃圾，然后添加媒体查询并重新排列页面。

顺便说一句，旧的 IE 不支持媒体查询，因此您需要使用 IE 的条件注释来添加一个名为[css3-mediaqueries.js 的 polyfill。](https://code.google.com/p/css3-mediaqueries-js/) 它只是一个 JS 文件，可以让媒体查询适用于所有浏览器。

**编辑：**另外，请点击此[链接](http://www.josscrowcroft.com/2011/code/window-size-bookmarklet/)并使用小书签来查看您当前的屏幕尺寸。它对于响应式设计非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:43:00.153

根据[http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)，内联媒体查询是 CSS3 功能。所以不支持 CSS3 的浏览器会跳过它。

您的选择是：

1) 将所有 CSS 移动到一个文件中，如下所示：

```
@screen and(min-width:721px) {
  #Your desktop CSS here
}

@screen and(max-width:720px) {
  #Your mobile CSS here
} 
```

2) 删除宽度标准并简单地依赖“屏幕”和“手持”而不是使用 HTML 中的整个查询：

```
<link href="css/master.css" media="screen" type="text/css" rel="stylesheet" />
<link href="css/mobile.css" media="handheld" type="text/css" rel="stylesheet" /> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:51:08.970

尝试更换你的

```
<link rel="stylesheet" type="text/css" media='screen and(min-width:721px)' href='css/master.css'/> 
```

至

```
<link rel="stylesheet" type="text/css" media="only screen and (min-width: 721px)" href="master.css" /> 
```

我没有在移动设备中尝试过您的问题，但是**如果**移动设备出现问题，请尝试也添加..并添加

```
<!DOCTYPE html> 
```

在代码的开头。希望这可以帮助..

# linux - 在运行 Linux 的 EC2 上启动 http、mysql、ftp 和 cronjobs？

> ID：16160346
> 
> 赞同：0
> 
> 时间：2013-04-23T03:20:17.467
> 
> 标签：linux, amazon-web-services, amazon-ec2, cron

是否有可以在启动时运行的脚本来启动所有这些？如果是这样，我应该把它放在哪里？

如果没有，有没有办法通过管理控制台来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:10:51.817

如果你从包中安装这些，这只是工作。将放置一个 init 脚本`/etc/init.d`，它们将在启动时启动。

例如安装 apache：

> `sudo apt-get install apache2`

将导致`/etc/init.d/apache2`安装文件并设置适当的链接以确保在系统启动和关闭时调用脚本。

您可以使用以下命令编辑 crontab：

> `crontab -e`

cron 守护程序在引导时自动启动，并将根据您指定的时间运行这些命令。

# c# - ASP .NET Gridview 编辑文本框在数据末尾添加空格

> ID：16160347
> 
> 赞同：0
> 
> 时间：2013-04-23T02:45:54.827
> 
> 标签：c#, visual-studio-2012, asp.net

我有一个 Gridview，它正在从本地数据库中获取数据。已经设置了gridview，以便您可以编辑该行中的数据。但是，当您尝试编辑数据时，文本中会添加尾随空格。

因此，当编辑说像“Tom”这样的名字时，文本框将显示“Tom.........”（假设点是空格），这也是后端将收到的内容。

我似乎无法弄清楚为什么。代码如下，任何帮助表示赞赏。

```
<asp:GridView ID="gvActiveStudents" runat="server" OnRowDeleting="gvActiveStudents_RowDeleting" OnRowCancelingEdit="gvActiveStudents_RowCancelingEdit"
                OnRowEditing="gvActiveStudents_RowEditing" OnRowUpdating="gvActiveStudents_RowUpdating" AutoGenerateEditButton="true" AutoGenerateColumns="false">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <asp:Button ID="btnDelete" runat="server" CommandName="Delete" Text="Inactive" />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField DataField="StudentID" HeaderText="Student ID" ReadOnly="true" />
                    <asp:BoundField DataField="FirstName" HeaderText="First Name" />
                    <asp:BoundField DataField="LastName" HeaderText="Last Name" />
                </Columns>
            </asp:GridView> 
```

C＃

```
 protected void gvActiveStudents_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        gvActiveStudents.EditIndex = -1;
        getStudents();
    }
    protected void gvActiveStudents_RowEditing(object sender, GridViewEditEventArgs e)
    {
        gvActiveStudents.EditIndex = e.NewEditIndex;
        getStudents();
    } 
```

解决方案：在 RowEditing 中修剪空格

```
string firstname = ((TextBox)gvActiveStudents.Rows[index].Cells[3].Controls[0]).Text.TrimEnd();
        ((TextBox)gvActiveStudents.Rows[index].Cells[3].Controls[0]).Text = firstname;
string lastname = ((TextBox)gvActiveStudents.Rows[index].Cells[4].Controls[0]).Text.TrimEnd();
        ((TextBox)gvActiveStudents.Rows[index].Cells[4].Controls[0]).Text = lastname; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:57:32.500

在保存到数据库之前，在编辑值上调用[OnRowUpdating](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdating.aspx)方法。`Trim()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-09T05:43:24.240

如果数据库中的数据类型是固定的字符串，例如 nchar，那么您应该在任何时候返回它时 RTRIM() 它，因为 SQL Server 将用空格填充字符串。

FirstName 在数据库中存储为 nchar(10)，值为 'Tom'

`select FirstName from people returns 'Tom '`

`select RTRIM(FirstName) from people returns 'Tom'`

此外，如果按名称绑定到任何内容，请记住为该列设置别名

`select RTRIM(FirstName) as FirstName from people`

# ios - 使用 UITableView registerNib 时如何分配文件的所有者：从 nib 加载自定义 UITableViewCell？

> ID：16160351
> 
> 赞同：9
> 
> 时间：2013-04-23T03:20:30.107
> 
> 标签：ios, objective-c, uitableview

所以我一直在研究使用`UITableView's` `registerNib:`并从. 以下是我的控制器的重要部分：`[dequeueReusableCellWithIdentifier: forIndexPath:]``UITableCellView``NIB`

```
- (void)viewDidLoad

[super viewDidLoad];
self.tableView.bounces = NO;
[self.tableView registerNib:[UINib nibWithNibName:@"ProgramListViewCell" bundle:nil] forCellReuseIdentifier:@"Cell"];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

TVProgramListTableViewCell *cell = (TVProgramListTableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

cell.frame = CGRectMake(0, 0, CELLWIDTH, OPENCELLHEIGHT);
cell.selectionStyle = UITableViewCellSelectionStyleNone;
cell.clipsToBounds = YES;

cell.titleLabel.text = [NSString stringWithFormat:@"herpa derp: %i", indexPath.row];

return cell; 
```

所以我正在注册`NIB`视图加载的时间，然后将其用于单元格出队。到目前为止，一切都像我期望的那样工作。我的自定义`TVProgramListTableViewCell`正在从 正确加载，`NIB`并且`IBOutlet`正在连接。

包含一个带有按钮的`NIB`视图，我想向控制器发送触发事件。我可以将 File's Owner 类型设置为我的 Table View Controller 类，但我不知道如何实际连接 File's Owner。

现在，如果我正在使用`loadNibNamed:`并加载`NIB`自己，连接文件所有者将很容易。有没有办法在使用时实现这一点`registerNib`？除了无法连接文件所有者之外，这似乎是在`UITableView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:41:23.550

据我所知，没有办法将文件的所有者设置为您的表视图控制器并将操作方法​​连接到 xib 文件中的按钮——我已经尝试过了，它使应用程序崩溃。通常这样做的方法是在 cellForRowAtIndexPath 方法中的按钮上调用 addTarget:action:forControlEvents:，并将 self 作为目标传递。

# google-apps - 由 Google Apps for Education 迁移接管的个人 .edu Google Apps 帐户会发生什么情况？

> ID：16160356
> 
> 赞同：0
> 
> 时间：2013-04-23T03:21:56.490
> 
> 标签：google-apps, google-apps-for-education

我目前使用我的@.edu 电子邮件地址作为 Google Apps 登录名，并且我有一个 Google Plus 帐户、Google Docs、一个 Youtube 帐户、Google Finance 以及与该@.edu 帐户配置文件相关联的许多其他 Google Apps 产品。

我的大学目前正计划将其整个 .edu 域和电子邮件系统迁移到 Google Apps for Education。这将如何影响我当前的个人 Google Apps 个人资料？我知道域所有者可以指定我可以登录哪些 Google Apps 产品。我的 Youtube 帐户及其所有内容会被销毁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T00:13:39.750

下次登录时，您可以选择：

*   删除您以前的帐户

或者

*   将“旧”帐户重命名为新的电子邮件地址（例如 sxflynn@gmail.com）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:16:36.293

我不确定一旦您的大学迁移到 Google Apps，您的个人应用程序帐户会发生什么。但这里有一个链接，至少可以在数据方面拯救你。

[http://www.dataliberation.org/](http://www.dataliberation.org/)

# apache - Apache 可以在没有足够权限的情况下写入文件

> ID：16160360
> 
> 赞同：0
> 
> 时间：2013-04-23T03:22:46.937
> 
> 标签：apache, ubuntu

我在 www-data 用户无权写入的文件上记录错误。这是错误日志文件的样子：

```
-rw-r--r-- 1 root      root      549050 Th04 23 10:01 access.log
-rw-r--r-- 1 root      root       35495 Th04 23 10:12 error.log 
```

但是我仍然看到，当服务器出现错误时，error.log 仍然被修改。

这是我的apache配置：

```
<VirtualHost *:80>
        ServerAdmin webmaster@magento.local.com
        ServerName magento.local.com
        DirectoryIndex index.php index.html
        DocumentRoot /var/www/magento.local.com/public
        LogLevel warn
        ErrorLog /var/www/magento.local.com/log/error.log
        CustomLog /var/www/magento.local.com/log/access.log combined
</VirtualHost> 
```

你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:32:10.927

你能复制并粘贴错误吗？Apache 可能无法写入 /var/www/magento.local.com/var 或 /var/www/magento.local.com/media 中的文件（或创建目录）。

试试下面的脚本。将其复制到 /var/www/magento.local.com 中名为 magento_perms.sh 的文件中，然后不带引号运行“sudo bash magento_perms.sh”。

```
#!/bin/bash

if [ ! -f ./app/etc/local.xml ]; then
    echo "-- ERROR"
    echo "-- This doesn't look like a Magento install.  Please make sure"
    echo "-- that you are running this from the Magento main doc root dir"
    exit
fi

if [ `id -u` != 0 ]; then
    echo "-- ERROR"
    echo "-- This script should be run as root so that file ownership"
    echo "-- changes can be set correctly"
    exit
fi

find . -type f \-exec chmod 644 {} \;
find . -type d \-exec chmod 755 {} \;
find ./var -type d \-exec chmod 777 {} \;
find ./var -type f \-exec chmod 666 {} \;
find ./media -type d \-exec chmod 777 {} \;
find ./media -type f \-exec chmod 666 {} \;
chmod 777 ./app/etc
chmod 644 ./app/etc/*.xml 
```

# arduino - 使用串口控制 LED

> ID：16160361
> 
> 赞同：0
> 
> 时间：2013-04-23T03:22:47.563
> 
> 标签：arduino

作为一个简单的自动化项目的一部分，我试图通过串行端口控制一些 LED。我无法使以下代码工作

```
int pin =0;
int state = 0;

void setup() {
    Serial.begin(9600);     // opens serial port, sets data rate to 9600 bps
}

void loop() {
    // send data only when you receive data:
    if (Serial.available() > 0) {
        // read the incoming byte:
        if(Serial.read() == 'S' && Serial.read() == 'S') {
            // Command to set the pin
            pin  = Serial.read() - 65;
            state = Serial.read() - '0';
            Serial.print("Set State Command received");
            // Set the Pin
            pinMode(pin, OUTPUT);          
            digitalWrite(pin, state == 0? LOW:HIGH);
        }
    }
} 
```

我正在将“SSN1”从我的 python 程序发送到 Arduino 串行端口进行测试，但没有任何反应（我在引脚 13 上连接了一个 LED）

```
SS -  Set State Command
N  - (pin no) + 'A'  - Pin number 13
1  - State ( 0 = LOW, 1= HIGH) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:56:17.623

您想等到**4 个**串行字节在串行缓冲区上累积。

```
void loop() {
    // polls the serial buffer
    while (Serial.available() < 4);
    if (Serial.read() == 'S' && Serial.read() == 'S') {
       char type = Serial.read();
       char pin = Serial.read() - 65;
       // do something with the results
    }
} 
```

请注意，您可能希望在输入之间实现某种填充（例如添加固定长度的空格），因为串行缓冲区可能会丢失一个字节或溢出，这可能会导致意外结果。此外，有些人会抱怨这个`while (Serial.available() < 4)`命令，因为计算机科学家受过训练，认为“轮询 = 糟糕！”，但对于 Arduino，它没有任何区别，因为它只运行一个任务。

顺便说一句，您也可以对串行数据使用中断，但这超出了此响应的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T06:49:57.373

实际上，我也一直在努力争取类似的权利。由于串行通信遇到的问题（有时消息很慢并且分段发送，ACII 代码很难记住），我选择了不同的解决方案。基本上，我在发送到串行的消息中添加了一个标题“>”和一个尾部“<”，并且我使用 Arduino 代码将 >< 之间的消息视为命令。然后我使用 ATOI 将字符串转换为整数。在下面的代码中，您将看到我使用以下数字来让 Arduino 更改 pin2 和 pin13 的状态。以下是与此代码相关的命令：

> 1000< 将引脚 13 设为高电平，2000< 将引脚 13 设为低电平，3000< 将引脚 2 设为高电平，4000< 将引脚 2 设为低电平

**因此，只需将 >< 之间的这些数字发送到序列号，它就可以工作了。** 我也使用上面的方法来设置 PWM 速度，只需操作与接收到的消息相关的字符串。我没有在这个示例中包含 PWM 命令，而只包含与引脚 13 和引脚 2 相关的命令。我认为使用数字和字符串标识符来打开和关闭消息会更简单和安全。加载草图，打开串行监视器并发送 >1000<，您应该看到引脚 13 上的内部 LED 亮起，依此类推。如果您需要任何其他帮助，请告诉我。

```
char inData[10];
int index;
boolean started = false;
boolean ended = false;
String message = "I am ready!, Send your command....";

void setup(){
    Serial.begin(9600);
    Serial.println(message);
    pinMode (13, OUTPUT);
    pinMode (2, OUTPUT);
}

void loop()
{
    while(Serial.available() > 0)
    {
        char aChar = Serial.read();
        if(aChar == '>')
        {
            started = true;
            index = 0;
            inData[index] = '\0';
        }
        else if(aChar == '<')
        {
            ended = true;
        }
        else if(started)
        {
            inData[index] = aChar;
            index++;
            inData[index] = '\0';
        }
    }

    if(started && ended)
    {
        int inInt = atoi(inData);

        // set  pin 13 HIGH
        if (inInt < 1000)
        { 
            digitalWrite(13, HIGH);
        }
        //set pin 13 LOW
        else if (inInt < 2000)
        { 
            digitalWrite(13, LOW); 
        }
        //set  pin 2 HIGH
        else if (inInt < 3000)
        { 
            digitalWrite(2, HIGH);
        }
        //set il pin 2 LOW
        else if (inInt < 4000)
        { 
            digitalWrite(2, LOW);
        }

        started = false;
        ended = false;
        index = 0;
        inData[index] = '\0';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:29:11.093

查看 Arduino[物理像素教程中的示例代码](http://arduino.cc/en/Tutorial/PhysicalPixel)

```
const int ledPin = 13; // the pin that the LED is attached to
int incomingByte;      // a variable to read incoming serial data into

void setup() {
  // initialize serial communication:
  Serial.begin(9600);
  // initialize the LED pin as an output:
  pinMode(ledPin, OUTPUT);
}

void loop() {
  // see if there's incoming serial data:
  if (Serial.available() > 0) {
    // read the oldest byte in the serial buffer:
    incomingByte = Serial.read();
    // if it's a capital H (ASCII 72), turn on the LED:
    if (incomingByte == 'H') {
      digitalWrite(ledPin, HIGH);
    } 
    // if it's an L (ASCII 76) turn off the LED:
    if (incomingByte == 'L') {
      digitalWrite(ledPin, LOW);
    }
  } 
```

验证您是否`SSN1`在串行监视器上看到通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T21:37:19.047

我改进了我的代码，因为它看起来像这样

```
int pin =0;
int state = 0;

void setup() {
        Serial.begin(9600);     // opens serial port, sets data rate to 9600 bps
}

void loop() {

        // send data only when you receive data:
        if (Serial.available() > 3) { // I am using chunk of 4 characters/bytes as a command 
                // read the incoming byte:
                if(Serial.read() == 'S' && Serial.read() == 'S') {
                  // Command to set the pin
                  pin  = Serial.read() - 65;
                  state = Serial.read() - '0';
                  Serial.print("Set State Command received");
                  // Set the Pin
                  pinMode(pin, OUTPUT);          
                  digitalWrite(pin, state == 0? LOW:HIGH);
                }
                delay(50); 
        }
} 
```

它非常适合我。由于循环的频率很高，Arduino 无法拾取字节进行连续读取。所以我们正在等待缓冲区中累积 4 个字节来读取那些（Arduino 的串行缓冲区是 64 个字节）。

# android - 应用程序不在模拟器中运行。eclipse显示以下错误

> ID：16160364
> 
> 赞同：0
> 
> 时间：2013-04-23T03:23:27.823
> 
> 标签：android, android-emulator

> [2013-04-23 08:43:47 - StartupActivity] Android 启动！[2013-04-23 08:43:47 - StartupActivity] adb 运行正常。[2013-04-23 08:43:47 - StartupActivity] 执行 com.eleybourn.bookcatalogue.StartupActivity 活动启动 [2013-04-23 08:43:48 - StartupActivity] 自动目标模式：启动具有兼容 AVD 'book 的新模拟器' [2013-04-23 08:43:48 - StartupActivity] 使用虚拟设备“book”启动新模拟器 [2013-04-23 08:43:48 - Emulator] 警告：数据分区已在使用中。变化不会持续！[2013-04-23 08:43:48 - Emulator] 警告：缓存分区已在使用中。变化不会持续！[2013-04-23 08:43:48 - 模拟器] 无法创建上下文 0x3005 [2013-04-23 08:43:48 - 模拟器] 无法获得 wglGetExtensionsStringARB [2013-04-23 08:43:48 - 模拟器] 模拟器：警告：无法使用软件渲染器初始化 OpenglES 仿真。[2013-04-23 08:43:48 - Emulator] 无法获得 wglGetExtensionsStringARB [2013-04-23 08:43:48 - Emulator] 无法获得 wglGetExtensionsStringARB [2013-04-23 08:43:48 - Emulator]无法获得 wglGetExtensionsStringARB [2013-04-23 08:43:48 - 模拟器] 无法获得 wglGetExtensionsStringARB [2013-04-23 08:43:48 - 模拟器] 无法获得 wglGetExtensionsStringARB [2013-04-23 08:43： 48 - Emulator] 无法获取 wglGetExtensionsStringARB [2013-04-23 08:43:48 - Emulator] 无法获取 wglGetExtensionsStringARB [2013-04-23 08:43:48 - Emulator] 模拟器：模拟器窗口不在视野范围内，并且是重新定位 [2013-04-23 08:43:48 - 模拟器]

帮我纠正错误。当我运行代码时，模拟器完美启动，但之后没有任何反应，并且在应用程序托盘中找不到应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:26:37.897

一种解决方案是删除您当前的 avd 并创建一个新的。

# jquery - 当您使用 jquery 知道文本时如何选择 td

> ID：16160366
> 
> 赞同：1
> 
> 时间：2013-04-23T03:23:36.993
> 
> 标签：jquery, html-table

我有一个表，其中包含恰好有一个 th 和一个 td 的行，如下所示：

```
<tr>
  <th>Phone Number</th>
  <td>555-555-1212</td>
</tr> 
```

我需要使用文本“电话号码”来选择 td 单元格（并替换 html）。我可以用

```
$('th:contains("Phone Number")') 
```

但我不知道如何选择相应的 td 单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:25:05.197

```
$('th:contains("Phone Number")').next('td'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:25:14.523

```
$('th:contains("Phone Number")').next("td") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:27:16.117

```
 var html = "some html";  
  $('th:contains("Phone Number")').next('td').html(html); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T03:29:34.963

$("th:contains('电话号码')").siblings("td");

如果你只有一个兄弟姐妹，你也可以使用它，否则 next() 是最好的。

# html - 如何让本地网页始终在 XP 的新窗口中打开？

> ID：16160384
> 
> 赞同：0
> 
> 时间：2013-04-23T03:25:37.463
> 
> 标签：html, url, windows-xp, local

我正在运行 Windows XP 2003 sp3。即是默认浏览器。如果我打开一个网页，然后打开一个本地网页，它将始终在现有窗口中打开它。我希望本地网页和 url 快捷方式始终在新窗口中打开。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T05:48:47.253

我不认为这是可以做到的。问题是 Windows XP 将倾向于使用映射到该文件类型的“默认程序”打开任何本地网页文件及其快捷方式。因此，在您的情况下，IE 是默认浏览器程序，它会在新选项卡中打开。如果没有任何 IE 实例已经在运行，相同的文件将在启动 IE 时打开。所以我认为满足您需求的简单方法是运行另一个 IE 实例，然后将您不想打开的文件拖放到 IE 窗口中，这将打开它。

PS：其他浏览器（如 chrome）允许将选项卡拖动到窗口外以在不同的窗口中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:33:16.150

不知何故，我认为您不是在寻求编程帮助，但我会在论坛上做出适当的回应。使用链接上的目标属性强制浏览器窗口/选项卡操作。有效的标准选项是：`_self`, `_blank`, `_top`, `_parent`. 根据您在 IE 中设置的默认行为，用于`_blank`强制链接在新选项卡/窗口中打开。

```
<a href="example.html" target="_blank">Example</a> 
```

# xml - 使用 xslt 摆脱旧的命名空间

> ID：16160385
> 
> 赞同：0
> 
> 时间：2013-04-23T03:25:40.143
> 
> 标签：xml, xslt

我是 xslt 的新手。我正在尝试将 XML 从一种模式转换为另一种模式。我想在转换后“摆脱”旧的命名空间。如果转换本身需要旧模式，如何在转换后擦除旧模式。本质上，我想`http://positionskillmanagementservice.webservices.com`离开并完全被替换`http://newschema`（在我重命名节点之后）。我可以通过 Dimitre Novatchev 的方法来做我想做的大部分事情：[使用 xslt 更改元素的命名空间](https://stackoverflow.com/questions/4106275/change-the-namespace-of-an-element-with-xslt)

这是 XML：

```
<ns:positionSkillResponse xmlns:ns="http://positionskillmanagementservice.webservices.com">
<ns:return>1</ns:return>
<ns:return>9</ns:return>
</ns:positionSkillResponse> 
```

这是 xslt：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ns="http://positionskillmanagementservice.webservices.com"
  version="1.0">

  <xsl:output method="xml" />

  <xsl:template match="ns:return">
    <parameter>
      <xsl:apply-templates select="@*|node()"/>
    </parameter>
  </xsl:template>

   <xsl:template match="ns:position">
    <parameter>
      <xsl:apply-templates select="@*|node()"/>
    </parameter>
  </xsl:template>

  <xsl:template match="ns:positionSkillResponse">
    <positionSkillRequest >
      <xsl:apply-templates select="@*|node()"/>
    </positionSkillRequest >
  </xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>    

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

我正在使用[这个工具](http://www.xslfiddle.net/)检查工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:43:50.083

Tomalak 向您展示了一种更好的方式来编写您的转换，但并没有真正回答您的直接问题。例如，当您在样式表中使用文字结果元素时`<a>...</a>`，它们将与样式表中该元素范围内的所有命名空间一起复制到输出中，但有少数例外。一个例外是，如果命名空间被列在 exclude-result-prefixes 元素中，则它们会被省略，该元素通常与命名空间声明一起放置在 xsl:stylesheet 元素上。因此，如果您没有按照 Tomalak 的建议重构样式表，则可以通过将 exclude-result-prefixes="ns" 添加到 xsl:stylesheet 元素来删除名称空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:50:30.580

你的尝试太具体了。试试这个更通用的：

```
<xsl:stylesheet 
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ns_old="http://positionskillmanagementservice.webservices.com"
>    
    <xsl:output method="xml" />

    <!-- matches any node not handled elsewhere -->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>    

    <!-- matches elements in the old namespace, re-creates them in the new -->
    <xsl:template match="ns_old:*">
        <xsl:element name="ns:{local-name()}" namespace="http://newschema">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

    <!-- if you don't have namespaced attributes you won't need this template -->
    <xsl:template match="@ns_old:*">
        <xsl:attribute name="ns:{local-name()}" namespace="http://newschema">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>
</xsl:stylesheet> 
```

它提供：

```
<ns:positionSkillResponse xmlns:ns="http://newschema">
    <ns:return>1</ns:return>
    <ns:return>9</ns:return>
</ns:positionSkillResponse> 
```

笔记

*   您不需要`xmlns:ns="http://newschema"`在 XSLT 中声明，因为您的输入文档中实际上并没有来自该名称空间的节点。
*   这也意味着您可以将旧命名空间声明为`xmlns:ns="http://positionskillmanagementservice.webservices.com"`并像`<xsl:template match="ns:*">`. 对于 XSL 处理器来说都是一样的，但如果使用不同的前缀 like，它可能不会让人类读者感到困惑`ns_old`。
*   您可以任意选择输出前缀 ( `<xsl:element name="ns:{local-name()}" ...`)。这与 XSLT 中声明的名称空间无关。完全不使用前缀会导致文档具有默认命名空间：

    ```
    <positionSkillResponse xmlns="http://newschema">
        <return>1</return>
        <return>9</return>
    </positionSkillResponse> 
    ```

# vba - 文件位置更改时更新形状中的超链接

> ID：16160399
> 
> 赞同：0
> 
> 时间：2013-04-23T03:28:22.147
> 
> 标签：vba, hyperlink, path, updates, shapes

我有一个流程图，它使用各种excel形状来直观地表示一个从开始到结束的数据生产过程，即从数据输入到分析环境到数据输出到提交文件。我已经使用 vba 将图表中的许多形状超链接到工作簿中的另一个工作表（使用 thisworkbook.fullname），其中包含每个形状文本中包含的缩写定义，例如 C1 列在一个形状中，超链接带你到定义选项卡单元格，其中 C1 被定义为控制点一。当 xlsm 工作簿位于我保存文件的家庭位置时，超链接有效，但如果我将文件保存到另一个位置（它们尝试打开我的原始工作簿），它们将不起作用。是否像更改此工作簿的超链接地址一样简单。文件名并删除路径以使其工作？我是否需要创建一个宏来自动查找旧的超链接地址，并将其替换为工作簿中包含超链接的每个形状的当前文件位置的新地址。路径将来可能会改变，所以希望它是相对的而不是固定的 - 例如，如果我将文件保存到共享点并且另一个用户将副本保存到他们的主目录，我仍然希望链接在任何一个中都适用于他们地点。例如，一些超链接指向“sheet1”，一些指向“sheet2”，但工作表 1 和 2 都位于同一个工作簿中。请帮忙！路径将来可能会改变，所以希望它是相对的而不是固定的 - 例如，如果我将文件保存到共享点并且另一个用户将副本保存到他们的主目录，我仍然希望链接在任何一个中都适用于他们地点。例如，一些超链接指向“sheet1”，一些指向“sheet2”，但工作表 1 和 2 都位于同一个工作簿中。请帮忙！路径将来可能会改变，所以希望它是相对的而不是固定的 - 例如，如果我将文件保存到共享点并且另一个用户将副本保存到他们的主目录，我仍然希望链接在任何一个中都适用于他们地点。例如，一些超链接指向“sheet1”，一些指向“sheet2”，但工作表 1 和 2 都位于同一个工作簿中。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:11:33.673

ActiveWorkbook.Name 解决了这个问题，用它替换 ThisWorkbook.FullName 并且超链接在其他目录中有效。

# java - Android防止按下主页按钮时清除返回堆栈

> ID：16160407
> 
> 赞同：0
> 
> 时间：2013-04-23T03:28:55.203
> 
> 标签：java, android

我的主页按钮正在清除后台堆栈。这样当用户重新进入应用程序并按下后退按钮（软或硬）时，它会退出应用程序，而不是返回到返回堆栈顶部的活动。

我总是将RetainTaskState 设置为true，并且没有其他任何内容被覆盖。为什么会这样？如何阻止它被清除！

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent intent;
        switch (item.getItemId()) {
        case android.R.id.home:
            activity.finish();
            return true;
        case R.id.menu_paymentLocs:
            intent = new Intent(activity, PaymentLocationsPage.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
            activity.startActivity(intent);
            return true;
        case R.id.menu_feedback:
            intent = new Intent(activity, FeedbackPage.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
            activity.startActivity(intent);
            return true;
        case R.id.menu_about:
            intent = new Intent(activity, AboutPage.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
            activity.startActivity(intent);
            return true;
        case R.id.menu_changeconsumer:
            new SelectConsumerDialogFragment().show(getFragmentManager(), "select_consumer");
            return true;
        case R.id.menu_logout:
            intent = new Intent(activity, SplashPage.class);
            myMeter.logout();
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
            activity.startActivity(intent);
            return true;
        }
        return true;
    } 
```

# javascript - 在ckeditor中显示html标签

> ID：16160408
> 
> 赞同：0
> 
> 时间：2013-04-23T03:28:56.017
> 
> 标签：javascript, html, css, ckeditor, google-code-prettify

我默认使用以下内容打开 ckeditor。

```
<textarea id="editor1" name="editor1" rows="30" cols="120"><p>We can use&nbsp;<strong>prettify&nbsp;</strong>to auto-format the Computer programming code at web page.</p>

<p><strong>How to use?</strong></p>

<p>Just add below line;</p>

<p><code class="prettyprint"><span style="line-height: 1.6em;">&lt;script src=&quot;https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js&quot;&gt;&lt;/script&gt;</span></code</p>

<p><span style="line-height: 1.6em;">Then, put the code line in below tab;</span></p>

<p><code class="prettyprint">&lt;code class=&quot;prettyprint&quot;&gt;...&lt;/code&gt;</code></p>

<p><span style="color: rgb(0, 0, 0); font-family: monospace; font-size: medium; line-height: normal;">or,</span></p>

<p>Download the complete code files&nbsp;from&nbsp;<a href="https://code.google.com/p/google-code-prettify/">https://code.google.com/p/google-code-prettify/</a>(even can learn more about prettify)&nbsp;&nbsp;to your server and change above script tag line like below;</p>

<p><code class="prettyprint">&lt;script src=&quot;path/to/directory/run_prettify.js&quot;&gt;&lt;/script&gt;</code><br />&nbsp;</p>
</textarea>
<script>CKEDITOR.replace( "editor1");</script> 
```

但是，在输出中缺少 HTML 标记代码。输出低于（下线）；

* * *

我们可以使用 prettify 自动格式化网页上的计算机编程代码。

如何使用？

只需添加以下行；

然后，将代码行放在下面的选项卡中；

...

或者，

[从https://code.google.com/p/google-code-prettify/](https://code.google.com/p/google-code-prettify/(even)下载完整的代码文件（甚至可以了解更多关于 prettify 的信息）到您的服务器并更改上面的脚本标记行，如下所示；

* * *

期望输出： ![预期产出](https://i.stack.imgur.com/SkRii.jpg) 请帮助，我想念的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:39:48.690

这看起来像这个问题中的另一个类似问题：[How to prevent CKEditor from stripping < and > (greater-than/less-than)](https://stackoverflow.com/questions/3581139/how-to-prevent-ckeditor-from-stripping-and-greater-than-less-than)

解决方法是使用 setData 设置值。下面是我在 4.1 样本中进行的测试。

```
<textarea id="editor1">
    <p>foo</p>
</textarea>
<script>
    var txt = '<p>We can use&nbsp;<strong>prettify&nbsp;</strong>to auto-format the Computer programming code at web page.</p><p><strong>How to use?</strong></p><p>Just add below line;</p><p><code class="prettyprint"><span style="line-height: 1.6em;">&lt;script src=&quot;https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js&quot;&gt;&lt;/script&gt;</span></code</p><p><span style="line-height: 1.6em;">Then, put the code line in below tab;</span></p><p><code class="prettyprint">&lt;code class=&quot;prettyprint&quot;&gt;...&lt;/code&gt;</code></p><p><span style="color: rgb(0, 0, 0); font-family: monospace; font-size: medium; line-height: normal;">or,</span></p><p>Download the complete code files&nbsp;from&nbsp;<a href="https://code.google.com/p/google-code-prettify/">https://code.google.com/p/google-code-prettify/</a>(even can learn more about prettify)&nbsp;&nbsp;to your server and change above script tag line like below;</p><p><code class="prettyprint">&lt;script src=&quot;path/to/directory/run_prettify.js&quot;&gt;&lt;/script&gt;</code><br />&nbsp;</p>'
    CKEDITOR.on('instanceReady', function(ev) {
        ev.editor.setData(txt);
    });
    CKEDITOR.replace( 'editor1', { allowedContent: 'p' } );
</script> 
```

# c - 使用将超过其类型最大值的索引/计数器循环

> ID：16160409
> 
> 赞同：0
> 
> 时间：2013-04-23T03:29:01.210
> 
> 标签：c, int, max, long-integer

所以，我正在尝试这段代码。它没有输出或任何警告消息。我想知道 gcc 编译器在下面做什么？

```
int k;
for(k=INT_MAX; k< LONG_MAX; k++){
    printf("%d\n",k);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:49:19.220

k 是“int”类型的变量。INT_MAX 是可以分配给有符号整数的最大正整数值。如果您正在使用“long”和“int”大小相同的编译器实现，则“k < LONG_MAX”将永远不会为真，并且代码将永远不会打印任何内容。但是，如果在您的编译器实现中“long”大于“int”，则递增 k 将溢出，调用未定义行为*。如果这不会导致陷阱或其他信号，则典型的效果是该值回绕为负数（将其值设为 0 - MAX_INT - 1）。因此，第一次循环时，代码将打印 INT_MAX 的值，k 将比较小于 LONG_MAX，k++ 将 k 的值设置为 0 - INT_MAX - 1。第二次通过，代码将打印,*比较小于 LONG_MAX，k++ 会将 k 的值设置为 0 - INT_MAX。以此类推，以此类推，无限循环。（当然，直到你按下 CTRL-C。）*

 **未定义的行为：不好。请参阅[https://www.securecoding.cert.org/confluence/display/seccode/INT32-C.+Ensure+that+operations+on+signed+integers+do+not+result+in+overflow](https://www.securecoding.cert.org/confluence/display/seccode/INT32-C.+Ensure+that+operations+on+signed+integers+do+not+result+in+overflow)（在许多其他地方) 了解为什么可能需要避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:34:19.110

LONG_MAX 会像整数一样溢出。显然，这个溢出值不会大于最大可能的 INT 值，因此初始检查将失败。因此，不会打印任何内容。

我认为 gcc 编译器在这种情况下不会做出任何特别有趣的改变。*

# html - 当我设置 div 宽度时，div 中的表格将改变高度

> ID：16160411
> 
> 赞同：0
> 
> 时间：2013-04-23T03:29:06.697
> 
> 标签：html, dojo, height

我的html：

一个 div 与`style="position: absolute; top: 3.80711%; left: 5.89354%; height: 20.0508%; width: 20.9125%; z-index: 545;"`

上面的 div 中有一个带有样式的表格： `cellspacing="0" cellpadding="0" style="height: 100%; width: 100%; visibility: visible;" tabindex="0"`

当我使用 更改 div 宽度`dojo.style(divNode, 'width', newvalue)`时，表格宽度将相应更改为正确的新值。

但桌子看起来更高，虽然高度值仍然是旧的。

有谁知道为什么？

# java - 将属性文件添加到类路径但获得 FileNotFoundException

> ID：16160414
> 
> 赞同：2
> 
> 时间：2013-04-23T03:29:11.483
> 
> 标签：java, spring, spring-mvc, classpath

我的弹簧上下文文件有这个：

```
<context:property-placeholder location="classpath:web.properties" /> 
```

我引用了以下键/值：

```
<property name="username" value="${dataSource.username}"/> 
```

我的文件布局是这样的：

```
>/www/site/app.war
>/www/site/configs/web.properties 
```

我使用以下方法运行我的应用程序：

```
>java -cp "/www/site/configs/*.*" -jar app.war 
```

但后来我得到了这个例外：

```
java.io.FileNotFoundException: class path resource [web.properties] cannot be opened because it does not exist
    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157)
    at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:181)
    at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:161)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:78)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:686)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:661)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133) 
```

即使我将文件添加到我的类路径中，它仍然找不到它，为什么？

**更新**

所以我的配置文件在这里：

```
/www/site/configs/web.properties
/www/site/configs/log4j.properties 
```

我试过这个：

```
>/www/site/java -cp ".:app.war:/www/site/configs/*.*" com.abc.server.MyServer 
```

和：

```
>/www/site/java -cp ".:app.war:/www/site/configs/web.properties:/www/site/configs/log4j.properties" com.abc.server.MyServer 
```

乃至：

> /www/site/java -cp ".:app.war" com.abc.server.MyServer

我犯了同样的错误：

```
2013-04-25 01:19:28.210:INFO:oejs.Server:jetty-7.x.y-SNAPSHOT
2013-04-25 01:19:28.294:INFO:oejw.WebInfConfiguration:Extract jar:file:/www/site/app.war!/ to /www/site/work/app
2013-04-25 01:19:32.814:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/www/site/app/},file:/www/site/app.war
log4j:WARN No appenders could be found for logger (org.springframework.web.context.support.StandardServletEnvironment).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
2013-04-25 01:19:33.585:INFO:/:Initializing Spring FrameworkServlet 'app'
2013-04-25 01:19:35.750:WARN:/:unavailable
org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in ServletContext resource [/WEB-INF/web-context.xml]: Could not resolve placeholder 'dataSource.url' in string value [${dataSource.url}]
    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:209) 
```

我的 web.properties 有：

```
dataSource.url=jdbc:mysql://localhost/appdb
dataSource.username=root
dataSource.password=123 
```

我的 web-context.xml 文件再次具有：

```
..
 <context:property-placeholder location="classpath*:/web.properties" />

    <bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="${dataSource.url}"/>
        <property name="username" value="${dataSource.username}"/>
        <property name="password" value="${dataSource.password}"/>
.. 
```

我还尝试了以下变体：

```
<context:property-placeholder location="classpath:web.properties" />
<context:property-placeholder location="classpath*:web.properties" />
<context:property-placeholder location="classpath*:/web.properties" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T04:06:19.160

我也遇到过类似的问题。我不能说为什么，但我发现 -cp 参数在与 -jar 一起使用时不正常。

您可以使用，

**编辑**

根据讨论并通过：[http ://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)

正确的语法应该是：

在窗口中：

```
java -cp "app.war;/www/site/configs/" <Main Class file name> 
```

在 Linux 中：

```
java -cp "app.war:/www/site/configs/" <Main Class file name> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T01:59:33.630

1.  通过 CLASSPATH 访问的项目根本不一定是文件。它们可能仍在 JAR 或 WAR 文件中。它们应该作为*资源访问，*通过 Class.getResource() 和朋友。

2.  CLASSPATH 中的条目也不是文件。CLASSPATH 是一个或多个目录或 JAR 文件，根据包结构，可以*在其中找到资源。*

# maven - 您可以将配置文件导入 maven pom.xml 吗？

> ID：16160415
> 
> 赞同：0
> 
> 时间：2013-04-23T03:29:13.993
> 
> 标签：maven, maven-2, maven-3

除了典型的部署环境和集成测试环境之外，我正在处理的一个 RESTful Web 服务项目需要部署到一个非常独特的环境（需要大量自定义配置）。

我已经为独特的环境创建了一个构建配置文件，但是定义真的很长，充满了 Ant 任务等，我想把它放在它自己的文件中并将它导入 pom.xml 只是为了保持干净.

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:30:51.960

目前最新版本的 Maven (3.0.5) 的唯一选择是将您的配置文件放入父 POM 并从子代继承。

有一天，当它完成时，[POM Mixins](http://jira.codehaus.org/browse/MNG-5102)会有所帮助，但这个功能还没有完成。

# java - java.util.Collections.reverse() 是如何工作的？

> ID：16160423
> 
> 赞同：0
> 
> 时间：2013-04-23T03:30:17.543
> 
> 标签：java, collections, methods, static

[请参阅java.util.Collections.reverse()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#reverse%28java.util.List%29)的文档。

我不明白 Java 方法如何只能按值传递，但允许以下内容：

```
public static void reverse(List<?> list) 
```

它如何改变通过参数传递的原始对象？特别是当所有通过参数传递的对象都是按值传递的时候？这不应该意味着只传递对象的一个​​副本，因此只能返回一个引用吗？既然我们返回的是 void，我们怎么能改变被传递的原始对象呢？

*   一个非常困惑的 Java Padawan

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T03:33:08.533

对列表的*引用*是按值传递的。

调用者和`reverse()`方法都引用了同一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T03:48:02.857

除了安迪的回答：

您将引用的值传递给列表，并且不能更改原始引用。这是为了证明：

```
public static void main(String[] args) throws Exception {
    List<Integer> list = Arrays.asList(1, 1, 1);
    test(list);
    System.out.println(list);
}

public static void test(List<?> list) {
    list = Arrays.asList(2,2,2);
} 
```

尽管我们在测试方法中将 [2, 2, 2] 分配给列表，但它仍然打印 [1, 1, 1]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:55:49.317

> 它如何改变通过参数传递的原始对象？

你传递一个引用，你不能传递一个对象。

> 特别是当所有通过参数传递的对象都是按值传递的时候？

引用是按值传递的，而不是对象。

> 这不应该意味着只传递对象的副本吗？

仅传递引用的副本。

> 因此只能返回一个引用？

引用是唯一没有返回的东西。

> 既然我们返回的是 void，我们怎么能改变被传递的原始对象呢？

您无法更改参考，但您可以更改参考指向的内容。

# php - MySQL 'OR' 语句 - 确定哪个部分返回行

> ID：16160425
> 
> 赞同：1
> 
> 时间：2013-04-23T03:30:21.147
> 
> 标签：php, mysql

我有以下 MySQL SELECT 语句（连同 PHP）：

```
SELECT *
FROM EVENTS
WHERE (
 time1
 BETWEEN "2013-04-22 19:30:00"
 AND "2013-04-22 19:50:00"
)
OR (
 time2
   BETWEEN "2013-04-22 19:30:00"
   AND "2013-04-22 19:50:00"
) 
```

上面的查询返回以下行：

```
 id   |        time1        |       time2        |
   -------------------------------------------------
    26     2013-04-22 19:45:00  2013-04-26 12:25:00 
```

所以，很明显，`time1`是什么返回了行。

**我的问题是：**当我使用上面的 SELECT 语句遍历行时，如何确定是 time1 还是 time2 '触发'（因为没有更好的术语）要返回的行？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T03:34:54.267

```
SELECT  *,
        IF(time1 BETWEEN "2013-04-22 19:30:00" AND "2013-04-22 19:50:00", 
          'Time1', 'Time2')  Result
FROM    EVENTS
WHERE   time1 BETWEEN "2013-04-22 19:30:00" AND "2013-04-22 19:50:00" OR
        time2 BETWEEN "2013-04-22 19:30:00" AND "2013-04-22 19:50:00" 
```

名为的附加列`Result`仅测试条件返回 true 的列。例如，如果两者都返回 true，则只会`time1`出现在`result`列上。

**更新 1**

```
SELECT  *,
        CASE
            WHEN time1 BETWEEN '2013-04-22 19:30:00' AND '2013-04-22 19:50:00' AND 
                 time2 BETWEEN '2013-04-22 19:30:00' AND '2013-04-22 19:50:00'
            THEN 'Time1 and Time2'
            WHEN time1 BETWEEN '2013-04-22 19:30:00' AND '2013-04-22 19:50:00' 
            THEN 'Time1'
            ELSE 'Time2'
        END Result
FROM    EVENTS
WHERE   time1 BETWEEN '2013-04-22 19:30:00' AND '2013-04-22 19:50:00' OR
        time2 BETWEEN '2013-04-22 19:30:00' AND '2013-04-22 19:50:00' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:40:22.290

JW 的答案是正确的，但是我会为两个“触发器”创建一个标志（因为它们都可以触发）：

```
SELECT
    *,
    IF(time1 BETWEEN "2013-04-22 19:30:00" AND "2013-04-22 19:50:00"), 'yes', 'no') AS in_time1,
    IF(time2 BETWEEN "2013-04-22 19:30:00" AND "2013-04-22 19:50:00"), 'yes', 'no') AS in_time2
FROM EVENTS
WHERE
    time1 BETWEEN "2013-04-22 19:30:00" AND "2013-04-22 19:50:00"
    OR time2 BETWEEN "2013-04-22 19:30:00" AND "2013-04-22 19:50:00" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:37:28.340

我没有测试过，但是像这样：

```
SELECT *,  IF(time1
 BETWEEN "2013-04-22 19:30:00"
 AND "2013-04-22 19:50:00",1,0) as fromtime1
FROM EVENTS
WHERE (
 time1
 BETWEEN "2013-04-22 19:30:00"
 AND "2013-04-22 19:50:00"
)
OR (
 time2
   BETWEEN "2013-04-22 19:30:00"
   AND "2013-04-22 19:50:00"
) 
```

[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)

# sql - SQL查询计数如果分组后datediff

> ID：16160426
> 
> 赞同：0
> 
> 时间：2013-04-23T03:30:21.750
> 
> 标签：sql, ms-access

我有一个表，前 3 个条目是这样的：

```
 name   | jobnum | startdate | enddate

 name1  | 1      | 15/2/1990 |  11/3/1990
 name2  | 2      | 12/2/1991 |  13/2/1991
 name1  | 3      | 15/1/1997 |  11/2/1998 
```

我需要将它们分组

它会显示

```
name | #jobs | # of times job ends before 30 days 
```

我知道如何显示前 2 列。但最后一个让我感到困惑。

```
SELECT Table1.name, Count(Table1.start) AS #jobs
FROM Table1
GROUP BY Table1.name 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:37:30.753

试试下面的，它是未经测试的，我相信你可以在 Access 中减去日期，虽然如果不使用相同的理论，但使用 datediff 函数....

```
SELECT Table1.name, Count(Table1.start) AS #jobs, 
    sum(IIF(Table1.enddate - Table1.Startdate < 30,1,0)) As LessThan30Days
FROM Table1
GROUP BY Table1.name 
```

# c# - 指数数组的边界之外。C＃

> ID：16160428
> 
> 赞同：0
> 
> 时间：2013-04-23T03:30:31.357
> 
> 标签：c#

我有遗传算法轮盘的代码。当我的迭代次数超过 1000 次时，我的程序显示错误，但当迭代次数少于 1000 次时，它的效果非常好。这是我的代码

```
private double[] roulleteWheel(double[] nilaiFitnessRil)
    {
        double[] resultRW = new double[nilaiFitnessRil.GetLength(0)];
        double[] probKromosom = new double[nilaiFitnessRil.GetLength(0)];
        double[] probKumulatif = new double[nilaiFitnessRil.GetLength(0)];
        double pilih=0;
        Random random = new Random();
        double rnd;
        double total = 0;
        double temp = 0;
        //count total fitness
        for (int i = 0; i < nilaiFitnessRil.Length; i++)
        {
            total += nilaiFitnessRil[i];

        }
        listBox1.Items.Add(string.Format("total fitness adalah {0}",total));
        //count probability for each chromosome
        listBox1.Items.Add("result of probabilty for each chromosome");
        for (int i = 0; i < nilaiFitnessRil.Length; i++)
        {
            probKromosom[i] = Math.Round(nilaiFitnessRil[i] / total, 4);
            listBox1.Items.Add(probKromosom[i].ToString());
        }
        //count cumulative probability
        listBox1.Items.Add("result of cumulative probabilty ");
        for (int i = 0; i < probKromosom.Length; i++)
        {
            temp += probKromosom[i];
            probKumulatif[i] = temp;
            listBox1.Items.Add(probKumulatif[i].ToString());
        }
        //selecting a chromosome by its cumulative probability with a random value

        listBox1.Items.Add(" roullete wheel");
        for (int n = 0; n < resultRil.Length; n++)
        {
            rnd = random.NextDouble() * 1.0 - 0.0;
            //listBox1.Items.Add(rnd.ToString());
            for (int i = 0; i < probKumulatif.Length; i++)
            {
           //this is where the Index was outside the bounds of the array appear 
                if (probKumulatif[i] <= rnd && probKumulatif[i + 1] > rnd ) 
                {
                    pilih = resultRil[i + 1];
                }
                else if ( rnd <= probKumulatif[0])
                {
                    pilih = resultRil[0];
                }

            }
            resultRil[n] = pilih;
            resultRW[n] = resultRil[n];
        }
        PrintArray(resultRW, listBox1);
            return resultRW;
    } 
```

这是程序因 Index 超出数组范围而终止的地方

```
 if (probKumulatif[i] <= rnd && probKumulatif[i + 1] > rnd ) 
                {
                    pilih = resultRil[i + 1];
                }
                else if ( rnd <= probKumulatif[0])
                {
                    pilih = resultRil[0];
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:38:41.137

你得到一个超出范围的索引，因为`i + 1`当你循环遍历每个项目时，你在循环中引用。因此，您将尝试访问的最后一次迭代`probKumulatif[probKumulatif.Length]`不存在。尝试循环到`probKumulatif.Length - 1`

```
// *** On this line ***
for (int i = 0; i < probKumulatif.Length - 1; i++)
{
    //this is where the Index was outside the bounds of the array appear 
    if (probKumulatif[i] <= rnd && probKumulatif[i + 1] > rnd ) 
    {
        pilih = resultRil[i + 1];
    }
    else if ( rnd <= probKumulatif[0])
    {
        pilih = resultRil[0];
    }
} 
```

您还指的是`resultRil`using`i`和 not `n`。如果您的意思是`n`，则可以在访问时应用与上述相同的方法`resultRil[i + 1]`

```
for (int n = 0; n < resultRil.Length - 1; n++)
{
    ...
} 
```

您可能需要参考在内部循环中`resultRil`使用`n`

```
pilih = resultRil[n + 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:39:04.470

```
for (int i = 0; i < probKumulatif.Length; i++)
{
    //this is where the Index was outside the bounds of the array appear 
    if (probKumulatif[i] <= rnd && probKumulatif[i + 1] > rnd ) 
```

这个循环的最后一次迭代会发生什么，什么时候`i == probKumulatif.Length - 1`？

如果`probKumulatif[i] <= rnd`为真，那么`probKumulatif[i + 1] > rnd`将被评估，并且因为`i == probKumulatif.Length - 1`，那么`i + 1 == probKumulatif.Length`- 所以你尝试访问`probKumulatif[probKumulatif.Length]`，这会导致你的异常！

请注意，由于`rnd`是*随机*的，这只会在某些时候发生，运行次数越多，概率越大！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:42:28.123

简单的。因为在循环的最后一次运行中， probKumulatif[i + 1] 试图达到不允许的 probKumulatif[probKumulatif.Length]。您可以达到的最大索引是 probKumulatif[probKumulatif.Length-1]。请在发布之前尝试调试您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T03:52:50.383

发生错误是因为您尝试访问超出其范围的索引处的数组。您可以简单地检查如下：

```
if (probKumulatif[i] <= rnd && (probKumulatif.Length >= i+1 && probKumulatif[i + 1] > rnd) ) 
{
    pilih = resultRil[i + 1];
 }
else if ( rnd <= probKumulatif[0])
{
    pilih = resultRil[0];
} 
```

但我建议改为使用 for 循环：

```
for (int i = 0; i < probKumulatif.Length-1; i++)
{
//Keep it the same.
} 
```

# resize - 有没有办法在不处理所有与设备相关的对象的情况下重置（slimdx，dx9）中的设备？

> ID：16160432
> 
> 赞同：1
> 
> 时间：2013-04-23T03:30:39.720
> 
> 标签：resize, directx-9, slimdx

我正在使用 SlimDX 渲染表单中的控件。由于该控件的大小可能会经常变化，并且有很多复杂的网格，因此传统的自由重置构造方法可能对我来说太慢了。有什么办法提升吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:59:55.957

create an additional SwapChain linked to your current window using IDirect3DDevice9::CreateAdditionalSwapChain Method,

then, get the back buffer of the new SwapChain, and, use IDirect3DDevice9::SetRenderTarget method to set the back buffer of the new SwapChain as the render target,

when you finished your drawings, call the present method of the new SwapChain instead of the IDirect3DDevice9::present,

when your window is resized, just release the additional SwapChain and re-create it with new back buffer sizes and do the render target setting thing again, now, you don`t have to do the device reset which is very slow.

if you have any more questions, email me : xux660@hotmail.com

I am a chinese so my english is not so good, forgive me.

# javascript - 使用 Javascript 的系统时钟定时器

> ID：16160437
> 
> 赞同：0
> 
> 时间：2013-04-23T03:31:06.800
> 
> 标签：javascript, animation, timer

我正在尝试使用系统时钟在 Javascript 中制作简单的动画。我想循环遍历一个数组，以便间隔`[0],[1],[2]...`调用。`500ms`使用上一个[Stack Overflow 答案](https://stackoverflow.com/a/11336046/258755)中的示例，我正在尝试使用此代码片段：

```
function timer(time,update,complete) {
    var start = new Date().getTime();
    var interval = setInterval(function() {
        var now = (time*1000)-(new Date().getTime()-start);
        if( now <= 0) {
            clearInterval(interval);
            complete();
        }
        else update(Math.floor(now/1000));
    },500); // the smaller this number, the more accurate the timer will be
} 
```

然后使用以下方法调用该函数：

```
timer(
    5, // seconds
    function(timeleft) { // called every step to update the visible countdown        
        console.log(3 - timeleft );
    },
    function() { // what to do after
        console.log("Timer complete!");
    }
); 
```

这产生，`0,1,2,3,"Timer Complete"`。但是，我无法弄清楚如何以 500 毫秒的间隔调用它。我试过调整数字，但我意识到我并不完全理解这个函数是如何工作的。是否可以对此进行调整，或者是否有一些硬编码的浏览器函数在 1s 间隔被调用？

我尝试将所有值更改为以下内容：

```
function timer(time,update,complete) {
    var start = new Date().getTime();
    var interval = setInterval(function() {
        var now = (time*500)-(new Date().getTime()-start);
        if( now <= 0) {
            clearInterval(interval);
            complete();
        }
        else update(Math.floor(now/500));
    },500); // the smaller this number, the more accurate the timer will be
}

timer(
    5, // seconds
    function(timeleft) { // called every step to update the visible countdown        
        console.log(5 - timeleft );
    },
    function() { // what to do after
        console.log("Timer complete!");
    }
); 
```

这现在产生：

```
2
3
4
5
Timer complete! 
```

我认为是 500 毫秒的间隔，但我不确定。更改`5`in的值`5 - timeleft`也会对它的运行速度造成奇怪的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:09:55.937

我相信你把这件事复杂化了。如果您只想每 500 毫秒显示一次数组中的每个项目，请使用常规计数器，而不是时间戳和舍入：

```
function timer(myArray) {
    var counter = 0;
    var interval = setInterval(function() {

        // There are still items we want to display
        if(counter < myArray.length) {
            console.log(myArray[counter]);

        // We have displayed all 
        } else {
            console.log('Finished');
            clearInterval(interval);
        }

        // Increment counter
        counter++;

    }, 500); // 500 here is the interval in msec
}

var arr = ['Item 0', 'Item 1', 'Item 2', 'Item 3'];
timer(arr); 
```

[http://jsfiddle.net/AE58p/](http://jsfiddle.net/AE58p/)

# xcode - xcode 4.6 applescript打开文本文件以供阅读

> ID：16160439
> 
> 赞同：0
> 
> 时间：2013-04-23T03:31:49.667
> 
> 标签：xcode, text, applescript

我正在尝试将我的 applescript 合并到 xcode 中。该脚本可以与 applescript 一起正常工作，但不能在 xcode 中运行。我正在尝试打开文件进行阅读。这是代码

```
set Location to "US"
set DriverFile to "/Volumes/MacPrintDrivers/" & Location & "DriverInstall.txt"
set DriverInstallFile to POSIX file DriverFile
open for access DriverInstallFile 
```

我已经确认文件存在并且我可以显示内容。我似乎无法在 Xcode 中以这种方式阅读。我得到的错误是

```
«script» doesn’t understand the «event rdwropen» message. (error -1708) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:42:05.603

ASOC (AppleScript Objective-C) 在脚本添加命令（例如 ）方面存在一些问题`open for access`。`tell current application to`有时你可以通过说，例如来解决这个问题`tell current application to open for access`。但有关更多详细信息，我建议您阅读 Shane Stanley 的书： http: [//www.macosxautomation.com/applescript/apps/](http://www.macosxautomation.com/applescript/apps/)他对此进行了深入探讨。

# ruby-on-rails - 在 Rails 中加载 .less 文件

> ID：16160443
> 
> 赞同：0
> 
> 时间：2013-04-23T03:32:09.623
> 
> 标签：ruby-on-rails, twitter-bootstrap

当我运行 rails 应用程序时，我收到一个错误，提示**无法加载此类文件 - 更少**。，

我有一个用来加载 html 文件的 rails 应用程序。这个 html 文件引用了 bootstrap_and_overrides.css。我当前的 rails 应用程序使用的是典型的 application.html.erb 文件。这是此文件的代码

```
<!DOCTYPE html>
<html>
<head>
    <title>MyHorders</title>
    <%= stylesheet_link_tag "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="container">
    <div class="masthead">
        <ul class="nav nav-pills pull-right">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
        <h3 class="muted">blog.me</h3>
    </div>

    <%= yield %>
</div>
</body>
</html> 
```

我的 css 和资产目录结构是：

![在此处输入图像描述](https://i.stack.imgur.com/HinRv.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/ErMPS.png)

最后是我的 GEM 环境，

![在此处输入图像描述](https://i.stack.imgur.com/lhtkQ.jpg)

寻找解决这个问题的输入。如果您需要更多信息，我可以将其添加到我的问题中。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T03:38:07.297

我认为你需要两颗宝石

```
gem "therubyracer"
gem "less-rails" 
```

将它们添加到您的 Gemfile 并运行“捆绑安装”，然后重新启动服务器并查看它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:42:24.717

我觉得你也可以试试

```
gem "execjs" 
```

如果您有任何问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T15:23:58.253

我只需要重新启动我的服务器。当我的本地服务器运行时，我在我的 Gemfile 中添加了几个相关的 gem（less-rails、therubyracer 和 twitter-bootstrap-rails），导致了上面看到的相同问题。因此，一旦我将其关闭并重新启动，一切都加载良好。

# c# - 带有 MVC4.0 辅助输出的剃须刀和方法调用

> ID：16160447
> 
> 赞同：4
> 
> 时间：2013-04-23T03:32:26.873
> 
> 标签：c#, .net, asp.net-mvc-4, razor-2

```
@helper GetString()
{
    @string.Format("string_{0}","foo");               
} 
```

上面的代码不会在带有 Razor 2.0 的 ASP.NET MVC 4.0 中编译。但是如果我之前删除 '@' `string.Format`，那么代码会编译，但字符串不会输出到生成的 HTML。这是为什么？在带有 Razor 1.x 的 MVC 3.0 中，上述代码按预期工作。我通过引入一个变量来用下面的代码解决这个问题

```
@helper GetString()
{
    var url = string.Format("string_{0}","foo");               
    @url
} 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:49:29.180

```
@helper GetString()
{
    @string.Format("string_{0}","foo");               
} 
```

> 上面的代码不会在带有 Razor 2.0 的 ASP.NET MVC 4.0 中编译。

那是因为剃刀引擎会看到你有一个构造（例如你的例子中的字符串）并且你正在使用`@`冗余。正如你所经历的那样，它不会编译。

> 但是如果我在 string.Format 之前删除'@'，那么代码会编译，但字符串不会输出到生成的 HTML。

什么都不会输出，因为你没有告诉剃须刀引擎要写什么。你只是做了一些代码。它类似于在 c# 中执行 a`string.Format`并且不将其分配给变量。

> 我通过引入一个变量来用下面的代码解决这个问题

与我之前提到的有关，在您引入变量并编写它的那一刻，您现在正在告诉 razor 引擎输出一些东西。这类似于 ac# 控制台应用程序，其中：

*   你做了一个`string.Format`：`string.Format("string_{0}","foo");`
*   将其输出分配给一个变量：`var url = string.Format("string_{0}","foo");`
*   打印变量：`@url`

您可以[阅读这篇博](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)文，以更好地了解 razor 引擎在`@`.

现在，对于您正在做的事情的替代方法，您可以这样做：

```
@helper GetString()
{        
    <text>@string.Format("string_{0}", "foo")</text>
} 
```

# matlab - 如何检查输入数字的字符串数？

> ID：16160450
> 
> 赞同：-1
> 
> 时间：2013-04-23T03:32:40.087
> 
> 标签：matlab

例如，我有一个输入 3.142，我可以使用什么命令来确定数字字符串的数量。在这种情况下，我希望得到像 5 这样的小数点。更多例如喜欢，

> 12.3 然后将得到 4 的输出
> 
> 12.345 将得到 6 的输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:34:23.790

您可以使用该`length`功能。

```
myNumberString = '12.3456';
disp(length(myNumberString)); 
```

在上面的代码中，您应该`7`在运行它时显示在命令窗口中。

# java - java中的二进制数据操作

> ID：16160453
> 
> 赞同：0
> 
> 时间：2013-04-23T03:33:13.157
> 
> 标签：java, binary-data

我花了一天的大部分时间追查二进制重建错误，并想了解原因：

特定的代码行如下所示（`dataBuffer`是一个字节数组）：

```
short data = (short) ((short)dataBuffer[curPos + 3] << 8 | ((short)dataBuffer[curPos + 2])); 
```

它偶尔会返回垃圾，直到我为低位词添加掩码：

```
short data = (short) ((short)dataBuffer[curPos + 3] << 8 | (((short)dataBuffer[curPos + 2])) & 0xff); 
```

所以，我的解释是，从`byte`to的类型转换`short`偶尔会在高位词中留下垃圾，在它被 or-ed 时引起问题......但这并没有多大意义。

这段代码取自 c++ 并在那里工作得很好......我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:36:17.707

是符号扩展。Java 中的所有`byte`值都是有符号的，因此任何大于 127 的字节值实际上都是负数。因此，例如 0x90（十进制 = 144）的字节值在它是 a 时实际上被视为 -112 `byte`。当它扩大到 a`short`时，它变为 0xff90（仍然是 -112）。您需要使用 0xff 屏蔽该值以恢复所需的`0x0090`.

顺便说一句，您可以从第二个表达式中消除几个强制转换：

```
short data = (short) ((dataBuffer[curPos + 3] << 8) | (dataBuffer[curPos + 2] & 0xff)); 
```

事实上，这些演员阵容毫无用处。在应用运算符之前，按位运算符的操作数始终提升为`int`值¹。

¹或者`long`，如果有的话`long`。

# php - 在按钮单击时使用 ajax 获取文本框文本

> ID：16160456
> 
> 赞同：1
> 
> 时间：2013-04-23T03:33:29.943
> 
> 标签：php, javascript, ajax

我想要一个在单击提交按钮时获取文本框值的代码。它一定是 Ajax。这是我到目前为止尝试过的代码。但我很高兴开始工作....

```
<form action="" method="post">
<p>Route No :
<input type="text" name="route_no" required="required" />
<input type="submit" value="Search" name="search" />
</form> 
```

阿贾克斯代码

```
<script type="text/javascript">
$(document).ready(function() {
$("#sub").click(function() {
var textboxvalue = $('name or id of textfield').val();
$.ajax({
    type: "POST",
    url: 'ajaxPage.php',
    data: {txt1: textboxvalue},
    success: function(result) {
        $("div").html(result);
    }
});
});
});​
</script> 
```

PHP 代码

```
$txt = null;
if((isset($_POST)) && (isset($_POST['txt1'])))
{
echo $txt = $_POST['txt1'];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T03:46:37.893

HTML：

```
<label for="route_no">Route No:</label><input type="text" id="route_no" name="route_no" required="required" />
<input type="button" value="Search" id="search" />
<div id="result"></div> 
```

JavaScript：

```
$(document).ready(function()
{
    $("#search").click(function()
    {
        var textboxvalue = $('input[name="route_no"]').val();

        $.ajax(
        {
            type: "POST",
            url: 'ajaxPage.php',
            data: {txt1: textboxvalue},
            success: function(result)
            {
                $("#result").html(result);
            }
        });
    });
});​ 
```

ajaxPage.php：

```
if(isset($_POST) && isset($_POST['txt1']))
{
    echo $_POST['txt1'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T03:34:47.797

你这里有问题

```
$("#sub").click(function() { 
```

您正在使用 id="sub" 作为提交按钮，但您没有为该按钮分配 id，因此将提交按钮的 id 指定为 id="sub"。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T03:35:42.980

要获取文本框的值，您可以使用：

```
$('#elementid').val() 
```

# php - php代码（获取json结果）

> ID：16160459
> 
> 赞同：2
> 
> 时间：2013-04-23T03:34:08.027
> 
> 标签：php, html, json

我对 python 的 php 完全陌生。在 python 中，我对从网页获取 json 结果相当熟悉。但是我似乎在 php 中所做的任何事情都不起作用。我使用的代码是。

```
 <?php 
$url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=hello&safe=off";
$data = json_decode(file_get_contents($url));
echo $data; 
?>` 
```

但这绝对没有任何作用。我在做什么有什么问题吗？我也通过 ideone.com 运行它并得到了这些错误。

```
`PHP Warning:    file_get_contents(): php_network_getaddresses: getaddrinfo failed: Name or service not known in /home/VQMKwy/prog.php on line 3

PHP Warning:file_get_contents(http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=hello&safe=off): failed to open stream: php_network_getaddresses: getaddrinfo failed: Name or service not known in /home/VQMKwy/prog.php on line 3` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:41:09.090

一旦您解决了上面发布的问题（这似乎与您的服务器配置有关，`file_get_contents`对我来说很好），您将遇到另一个错误。

`json_decode`将返回类 stdClass 的对象。你不能这么`echo`说。回显数组的最快方法是使用

```
var_dump($data); 
```

除此之外，代码在我的本地机器上运行良好。我刚刚替换`echo`为`var_dump`

* * *

[Rob 发布](https://stackoverflow.com/questions/16160459/php-code-getting-json-results/16160526#comment23094135_16160459)的提示应该可以解决问题，但如果没有，并且如果您在 Apache 上运行，请尝试运行以下命令：

```
sudo rc.d stop httpd; sudo rc.d start httpd 
```

这将迫使 Apache 停止并开始更新`/etc/resolv.conf`

# algorithm - 创建 B 树

> ID：16160470
> 
> 赞同：0
> 
> 时间：2013-04-23T03:35:26.700
> 
> 标签：algorithm, tree, b-tree

我明天要复习考试，但被困在一个问题上。我必须绘制一个有效的 B 树，其中 M = 4 和 L = 3 包含值 1-25。问题是我无法让我的树看起来像答案。答案树如下所示：

```
 9            14             22
            /       |             |        \
         4 7       12           17 20        24
        / | \     /  \         /  |  \      /  \
       1  4  7   9   12      14  17  20   22   24
       2  5  8   10  13      15  18  21   23   25
       3  6      11          16  19  21 
```

抱歉，如果这很难阅读。也许我把答案复制错了，但任何人都可以确认这是否是正确的答案？如果是这样，这个答案是如何得出的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:35:55.760

看起来您在谈论 B+ 树而不是 BTree，并且有一个小错字：您在叶子 [20,21,21] 中重复了键 21。正如你所说，订单是4。

答案是一棵有效的 B+ 树，但不是通过按顺序添加值 1-25 得到的树。问题是否给出了添加密钥的特定顺序，或者是尝试自己确定的问题？除了漫长的试错过程之外，我不确定您将如何确定序列，但您可以使用此处的演示页面进行尝试：

[http://goneill.co.nz/btree-demo.php](http://goneill.co.nz/btree-demo.php)

如果您想尝试各种插入序列，最好下载离线版本并编辑 Hardcoded() 函数：

[http://goneill.co.nz/btree.php](http://goneill.co.nz/btree.php)

这一切都在 JavaScript 中，但可能对您没有用处。

# python - GNOME 配置数据库类型推断

> ID：16160474
> 
> 赞同：0
> 
> 时间：2013-04-23T03:35:55.563
> 
> 标签：python, gnome, gconf

我的桌面是 GNOME，我正在通过 Python 以编程方式更改其设置。

数据库具有简单的值类型，例如字符串、整数、字符串列表、整数列表……

操作数据的简单 CLI 工具是 gconftool-2，它使用`--get`选项返回键的值。

考虑到在将其设置回某个值时我需要知道该值，我不知道从这些值中推断出类型。请注意，在我的模式中，“8”是一个字符串，8 是一个 int，但它们都被 gconftool-2 输出为 8。

你会怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:28:04.800

`gconf`尝试使用GNOME Python 绑定中包含的模块，而不是调用命令行工具：

```
>>> import gconf
>>> client = gconf.Client()
>>> # Get a value and introspect its type:
>>> value = client.get('/apps/gnome-terminal/profiles/Default/background_color')
>>> value.type
<enum GCONF_VALUE_STRING of type GConfValueType>
>>> value.get_string()
'#FFFFFFFFDDDD' 
```

对于列表，您可以自省列表值类型：

```
>>> value = client.get('/apps/compiz-1/general/screen0/options/active_plugins')
>>> value.type
<enum GCONF_VALUE_LIST of type GConfValueType>
>>> value.get_list_type()
<enum GCONF_VALUE_STRING of type GConfValueType>
>>> value.get_list()
(<GConfValue at 0x159aa80>, <GConfValue at 0x159aaa0>, ...) 
```

但总的来说，您应该知道您正在操作的键的类型并直接使用适当的类型特定访问方法（例如`Client.get_string`和`Client.set_string`）。

# python - 如何在 Cython 中初始化固定大小的整数 numpy 数组？

> ID：16160475
> 
> 赞同：14
> 
> 时间：2013-04-23T03:36:01.063
> 
> 标签：python, optimization, numpy, cython

如何`int`在 Cython 中制作空的 numpy 类型数组？以下适用于双数组或浮点数组：

```
# make array of size N of type float
cdef np.ndarray[float, ndim=1] myarr = np.empty(N)
# make array of size N of type int
cdef np.ndarray[int, ndim=1] myarr = np.empty(N) 
```

但是，如果我尝试对 int 做同样的事情，它会失败：

```
# this fails
cdef np.ndarray[np.int, ndim=1] myarr = np.empty(N)
# wanted to set first element to be an int
myarr[0] = 5 
```

它给出了错误：

ValueError：缓冲区 dtype 不匹配，预期为“int”，但得到“double”

因为显然`np.empty()`返回双倍。我试过了：

```
cdef np.ndarray[np.int, ndim=1] myarr = np.empty(N, dtype=int) 
```

但它给出了同样的错误。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T04:03:05.663

包括声明

```
cimport numpy as np 
```

并将数组声明为`np.int32_t`：

```
cdef np.ndarray[np.int32_t, ndim=1] myarr = np.empty(N, dtype=np.int32) 
```

`32`您可以从类型声明中删除，并使用

```
cdef np.ndarray[np.int_t, ndim=1] myarr = np.empty(N, dtype=np.int) 
```

但我更喜欢明确说明 numpy 数组中元素的大小。

请注意，我还将 dtype 添加到`empty`; 默认 dtype`empty`是`np.float64`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:15:17.580

奇怪！我尝试时遇到了同样的错误。但是，查看错误消息，我只是将数组创建的范围更改为一个函数，并且它可以编译！我不知道发生这种情况的原因，但是。

```
import numpy as np
cimport numpy as np

ctypedef np.int_t DTYPE_t
DTYPE=np.int

def new_array():
    cdef int length = 10
    cdef np.ndarray[DTYPE_t, ndim=1] x = np.zeros([length], dtype=np.int)
    return x

x = new_array() 
```

我认为[http://docs.cython.org/src/userguide/language_basics.html#python-functions-vs-c-functions](http://docs.cython.org/src/userguide/language_basics.html#python-functions-vs-c-functions)有一些与 python/c/mixed 变量范围相关的信息。

# android - 在 oncreate 方法之外生成一个随机数

> ID：16160477
> 
> 赞同：3
> 
> 时间：2013-04-23T03:36:21.080
> 
> 标签：android, methods, random, static

我正在尝试设置我的活动，以便我可以从我的 onCreate 方法之外的方法生成一组随机数。这是我的活动的设置方式...

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  this.optionOne();
  this.optionTwo();
  this.optionThree();
}

public void optionOne() {
  // generate a random number here
  int random = Math.random();

  // generate more random numbers and do more stuff here
} 
```

问题是，我在 onCreate 方法之外生成的任何随机数都被认为是“静态的”，并且数字始终为 0。如果我在 onCreate 方法中生成数字，它当然可以正常工作。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:43:53.803

```
private static Random ranGenerator=new Random(); 
```

将其声明为类的成员。
然后`ranGenerator.nextInt()`随时打电话来获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:43:06.343

要生成随机数使用，这将在特定范围之间创建随机数

```
public void optionOne() {
   var=(int)(Math.random() * (max - min) + min)    //math.random will return integer values 
  // use your var wisely
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:28:10.883

这将帮助您创建非重复随机数的数组列表

```
 ArrayList<Integer> indexArray = new ArrayList<Integer>();
    for (i = 0; i < 202; ++i) {
                number.add(i);
                // number.add(num);
            }
            Collections.shuffle(number); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T03:41:45.557

利用

```
Random rand = new Random(); 
int random = rand.nextInt(); 
```

或者

```
int random = rand.nextInt(range); 
```

根据[这里的文档](http://developer.android.com/reference/java/lang/Math.html#random%28%29)

```
Math.random() Returns a pseudo-random double n, where n >= 0.0 && n < 1.0. 
```

# r - 通过循环索引日期

> ID：16160478
> 
> 赞同：1
> 
> 时间：2013-04-23T03:36:32.147
> 
> 标签：r, loops, for-loop, indexing

我正在尝试使用以下代码确定日期在矩阵中的位置：

```
#portret is a list of daily returns for three different stocks from 1980-01-01 to 2010-12
#13.These dates are listed in the first column of the portret data frame
library(quantmod)
library(FRAPO)
getSymbols(c("F","AA","IBM"),from="1980-01-01", to="2010-12-31")
port=cbind(F$F.Adjusted,AA$AA.Adjusted,IBM$IBM.Adjusted)
portret=returnseries(port,"discrete",trim=TRUE)
portret=data.frame(index(portret),coredata=portret)
date.list=seq.Date(as.Date("1990-10-01"),as.Date("2010-10-01"),by="month")
length(date.list)
#this equals 241
date.index=matrix(0,241,2)
for(i in 1:241){
    date.index[i,]=which(portret[,1]==as.character(date.list[i]),arr.ind=TRUE)} 
```

我不断收到此错误：替换的长度为零

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:12:19.757

错误是因为条件语句评估为`FALSE`.

IE：

```
 x      <- 1:5
  x[[2]] <- which(FALSE) 
```

* * *

问题是并非所有日期`date.list`都在`portret[, 1]`.
相反，在你的`for`循环中试试这个：

```
w <- which(portret[,1]==as.character(date.list[i]),arr.ind=TRUE)
date.index[i,] <- ifelse(identical(w, integer(0)), c(NA, NA), w) 
```

但更好的是：

```
date.index <- 
  sapply(as.character(date.list), function(D) 
      {w <- which(portret[,1]==D, arr.ind=TRUE);
      ifelse(identical(w, integer(0)), c(NA, NA), w)}) 
```

# maven - 使用 Maven+Nexus+Jenkins 构建不稳定

> ID：16160479
> 
> 赞同：0
> 
> 时间：2013-04-23T03:36:43.443
> 
> 标签：maven, jenkins, nexus

我有一个带有 Maven3.0.4、Nexus 2.2 和 Jenkins 1.508 的构建环境。为了支持活跃和动态的开发环境，我的解决方案中的所有工件都使用快照版本，并且 maven 尝试在每个构建中获取最新的快照。

构建并不像预期的那么顺利。主要问题是有时由于无法解决的依赖关系导致构建失败，解决方案只是重新运行作业。

我怀疑它是由 Nexus 服务器在峰值负载中造成的瓶颈引起的，这导致 Maven 在构建期间无法检索 pom 文件。但我不知道如何诊断和解决问题。有人有好主意吗？

这个问题已经回答了。请参阅[Maven 是否为快照项目构建“线程安全”？](https://stackoverflow.com/questions/16584226/does-maven-build-thread-safe-for-snapshot-projects/16586186?noredirect=1#16586186).

BR

# proxy - 通过代理发送推送通知（APNs 和 GCM）

> ID：16160486
> 
> 赞同：0
> 
> 时间：2013-04-23T03:37:30.163
> 
> 标签：proxy, push-notification, apple-push-notifications, google-cloud-messaging

我已经构建了将接收推送通知的 ios 和 android 应用程序。问题不是来自设备端，而是来自服务器端。

因为我们公司的内部服务器必须通过Proxy连接到外部网络，当用户向移动设备发送通知时，处理发送通知请求的服务器必须向代理服务器发送请求，然后代理服务器将请求转发给APNs和GCM。

我不知道如何通过代理发送推送通知请求。我在这种情况下研究了几天，但没有找到解决方案。

我看到有些人说 APNs 不允许来自代理服务器的连接。只接受直接连接。真的吗？有没有官方文档提到它？

有没有人可以帮助我？我想知道如何通过代理发送推送通知为ios和android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T13:16:24.513

如果您使用的是 Java。您可以使用 javaApns[在此处](http://code.google.com/p/javapns/)为 ios 输入链接描述。我自己现在有问题让 GCM 通过我的本地服务器上的代理发送它可以工作。如果可以，您可以将应用程序服务器配置为通过代理发送。

# php - PHP Json Terraria 服务器状态

> ID：16160488
> 
> 赞同：0
> 
> 时间：2013-04-23T03:37:33.503
> 
> 标签：php, imagettftext

我真的在 google/stackoverflow 上搜索了很长时间，但没有找到我的答案。我正在尝试放置图像以查看我的泰拉瑞亚服务器是否在线，如果是，谁已连接等。：p 我真的是 php 的菜鸟，但我正在努力学习！我从 tshock.co 上的 geek85 获得了这个源代码。这是来源：

```
<?php
    error_reporting(E_ERROR);
    //variables
    $ip = 'XXX.XXX.XXX.XXX';
    $port = '7878'; //port of rest server, not terraria server
    $json = json_decode(file_get_contents('http://'.$ip.':'.$port.'/status/'), true);
    header('Content-Type: image/png');
    $im = @imagecreatefrompng('terraria_online.png');
    $font = 'visitor1.ttf';
    //$font2 = 'fonts/visitor2.ttf';
    $red = imagecolorallocate($im, 255, 24, 24);
    $blue = imagecolorallocate($im, 50,50,255);
    $black = imagecolorallocate($im, 10,10,10);
    $purple = imagecolorallocate($im, 127,0,127);
    $grey = imagecolorallocate($im, 50, 50, 50);
    $white = imagecolorallocate($im, 255, 255, 255);

    //server found and running
    if ($json['status'] == '200')
    {
        // text in the grey box
        $playerarray = explode(', ',$json['players']);
        imagettftext($im, 18, 0, 31, 16, $grey, $font, $json['name']);
        imagettftext($im, 18, 0, 30, 15, $red, $font, $json['name']);
        imagettftext($im, 14, 0, 31, 34, $grey, $font, 'IP: '.$ip);
        imagettftext($im, 14, 0, 30, 33, $black, $font, 'IP: '.$ip);
        imagettftext($im, 14, 0, 31, 49, $grey, $font, 'Port: '.$json['port']);
        imagettftext($im, 14, 0, 30, 48, $black, $font, 'Port: '.$json['port']);
        imagettftext($im, 14, 0, 9, 71, $grey, $font, 'Joueurs en ligne: '.$json['playercount']);
        imagettftext($im, 14, 0, 8, 70, $blue, $font, 'Joueurs en ligne: '.$json['playercount']);
        // show VIPs' avatar
        if ($json['playercount'] > 0)
        {
            //array of VIP players - (next step : a txt file with names and coordinates to parse...)
            $vip = array('QcSeb','Marlin','Twingo','Gaston');
            $num = count($vip);
            for ($i=0; $i<$num; $i++)
            {
                if (in_array($vip[$i], $playerarray))
                {
                    $player = @imagecreatefrompng('Images/'.strtolower($vip[$i]).'.png');//This line doesn't work for now
                    $long = imageSX($player);
                    $haut = imageSY($player);
                    switch ($vip[$i])
                    {
                        //here, it's a bit difficult: these are the coordinate where to place VIP players in the image.
                        case 'QcSeb':
                            $x = 350;
                            $y = 133;
                            break;
                        case 'Gaston':
                            $x = 300;
                            $y = 68;
                            break;
                        case 'Marlin':
                            $x = 261;
                            $y = 68;
                            break;
                        case 'Twingo':
                            $x = 307;
                            $y = 133;
                            break;
                    }
                    $ok = imagecopy($im,$player,$x,$y-$haut,0,0,$long,$haut);
                }
            }
            // name of players (VIP or not)
            $i = -1;
            $j = 0;
            // since my server only accept 8 players, I don't have any overflow control on the number of player's name to write but this code can do the work for any number of player (< to width of image / 75)
            foreach( $playerarray as $player )
            {
                if ($i++ >= 6)
                {
                    $i = 0;
                    $j++;
                }
                imagettftext($im, 11, 0, 11+($j*75), 101+($i*15), $grey, $font, $player);
                imagettftext($im, 11, 0, 10+($j*75), 100+($i*15), $purple, $font, $player);
            }
      }
    }
    // offline or not "statut == 200"
    else
    {
        $im = @imagecreatefrompng('terraria_offline.png');
        imagettftext($im, 18, 0, 11, 31, $purple, $font, 'IP:'.$ip.':'.$port);
        imagettftext($im, 18, 0, 10, 30, $grey, $font, 'IP:'.$ip.':'.$port);
        imagettftext($im, 42, 17, 16, 131, $purple, $font, 'offline');
        imagettftext($im, 42, 17, 15, 130, $black, $font, 'offline');
    }
    imagepng($im);
    imagedestroy($im);
    ?> 
```

我正在使用 000webhost ：sebserver.comuf.com (/ServerStatus1.php)。当我继续 [http://XXX.XXX.XXX.XXX:7878/status/](http://XXX.XXX.XXX.XXX:7878/status/)我得到：

```
{
  "status": "200",
  "name": "TShock Server",
  "port": "7777",
  "playercount": "1",
  "players": "QcSeb"
} 
```

因为实际上只有我在服务器上。

（XXX.XXX.XXX.XXX = 我的隐藏 IP：P）

这是我正在尝试做的一个例子：[http ://renagadez.square7.de/gen.php?ip=111.111.111.111&port=1111](http://renagadez.square7.de/gen.php?ip=111.111.111.111&port=1111)

提前感谢您的帮助！

# c# - 我想在数据库中插入一条记录，然后需要返回一行

> ID：16160490
> 
> 赞同：-5
> 
> 时间：2013-04-23T03:37:37.910
> 
> 标签：c#, sql, sql-server-2008, return, code-behind

我想在数据库中插入一条记录，然后需要返回一行。我创建了查询，但如何在 .cs 中使用它（C# 代码）

这是我的查询

```
 @ledgerId numeric(18,0) ,
 @voucherNo varchar(MAX) ,
 @invoiceNo varchar(MAX) ,
 @date datetime ,
 @month datetime ,
 @totalAmount decimal(18,5) ,
 @narration varchar(MAX) ,
-- @extraDate datetime ,
 @extra1 varchar(MAX) ,
 @extra2 varchar(MAX) ,
 @suffixPrefixId numeric(18,0) ,
 @voucherTypeId numeric(18,0) 
AS
DECLARE @UpdatedVoucherNo DECIMAL(18,0)

SET @UpdatedVoucherNo = (SELECT ISNULL( MAX(CAST (voucherNo AS NUMERIC(18,0))),0) + 1
 FROM tbl_SalaryVoucherMaster
 WHERE voucherTypeId=@voucherTypeId)

 IF (@UpdatedVoucherNo = @voucherNo )

 INSERT INTO tbl_SalaryVoucherMaster
 (
            /*salaryVoucherMasterId,*/
            ledgerId,
            voucherNo,
            invoiceNo,
            date,
            month,
            totalAmount,
            narration,
            extraDate,
            extra1,
            extra2,
            suffixPrefixId,
            voucherTypeId )
VALUES
 (
            /*@salaryVoucherMasterId, */
            @ledgerId, 
            @voucherNo, 
            @invoiceNo, 
            @date, 
            @month, 
            @totalAmount, 
            @narration, 
            getDate(), 
            @extra1, 
            @extra2,
            @suffixPrefixId,
            @voucherTypeId)

            SELECT SCOPE_IDENTITY() AS [Identity],0 AS [UpdatedVoucherNo] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T20:17:48.397

一种方法是修改`@voucherNo`为一个`OUTPUT`参数，然后在查询中添加一个新`OUTPUT`参数以返回`SCOPE_IDENTITY()`.

```
@voucherNo varchar(max)
@ScopeIdentity numeric(38,0) 
```

并修改最后一条`SELECT`语句以设置 @ScopeIdentity 参数的值。

```
SELECT @ScopeIdentity = SCOPE_IDENTITY() 
```

然后用于`SqlCommand.ExecuteNonQuery`执行查询，并在完成时从输出参数中读取值。

```
using (SqlCommand command = new SqlCommand(connection, commandText))
{
    int rowsAffected = command.ExecuteNonQuery();
    if (rowsAffected > 0)
    {
        var voucherNo = (string)command.Parameters["@voucherNo].Value;
        var identity = (decimal)command.Parameters["@ScopeIdentity"].Value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:51:58.183

`Command.ExecuteNonQuery();`是您所需要的，它返回`int`插入和更新数据时受影响的行数（），

这是一个使用它的例子，

```
 string connetionString = null;
            SqlConnection cnn ;
            SqlCommand cmd ;
            string sql = null;

            connetionString = "Data Source=ServerName;Initial Catalog=DatabaseName;User ID=UserName;Password=Password";
            sql = "Your SQL Statemnt Here";

            cnn = new SqlConnection(connetionString);

                cnn.Open();
                cmd = new SqlCommand(sql, cnn);
                int rowsAffected = cmd.ExecuteNonQuery();
                if (rowsAffected > 0)
                {
                    //do anything
                }
                cmd.Dispose();
                cnn.Close();
                MessageBox.Show (" ExecuteNonQuery in SqlCommand executed !!"); 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

# php - 一个 PHP 包含路径的解释

> ID：16160495
> 
> 赞同：0
> 
> 时间：2013-04-23T03:38:08.280
> 
> 标签：php

所以我对 PHP 并不完全陌生，但这让我很困惑。

我对 PHP 包含路径的理解是，当您设置路径时，无论是通过 ini、htaccess 还是 set_include_path，只要包含在这些路径之一中，PHP 就应该能够找到它。例子...

目录结构。

*   文件夹A
    *   文件A.php
*   文件夹B
    *   文件B.php

假设我将包含路径设置为 ... /folderA; /文件夹B

然后像这样在fileA中写一个包含

## ----- 文件A -----

```
<$php 
     include 'fileB.php'; 
```

PHP应该能够找到fileB。这个对吗？

让我重述一下。如果文件在包含路径中，则不需要相对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:47:17.430

或者，您可以：

1.  `/`指定根文件夹的路径（以开头`fileB.php`）：

    如果`$_SERVER['DOCUMENT_ROOT']`您不知道哪个文件夹是实际的根目录，请使用）

2.  指定当前目录的路径（例如`../folderB/fileB.php`）

您可能还想查看文档[here](http://www.php.net/manual/en/ini.core.php#ini.include-path)或[here](http://www.php.net/manual/en/function.include.php)关于包含路径如何实际工作的内容。

# java - Java - 自定义类 ArrayList 没有添加方法

> ID：16160496
> 
> 赞同：0
> 
> 时间：2013-04-23T03:38:15.983
> 
> 标签：java

自定义类的 ArrayList 没有 .add() 方法：

我可以定义一个对象的 ArrayList：

```
ArrayList<Object> thing = new ArrayList<Object>();

thing.add(otherThing); // works 
```

但是，当我定义自定义类事物的列表时：

```
ArrayList<Thing> thing = new ArrayList<Thing>();

thing.add(otherThing); // error

Canvas.java:33: cannot find symbol
symbol  : method add(java.lang.Object)
location: class java.util.ArrayList<Thing>
            thing.add(otherThing);
                   ^
1 error 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T03:39:36.910

您`otherThing`的类型必须是`Thing`. 目前它的 type `Object`，这就是为什么它适用于第一种情况，但在第二种情况下失败。

在您的第一种情况下，`ArrayList<Object>`需要 type 的元素`Object`。由于它`otherThing`也是类型`Object`，所以它可以工作。

在第二种情况下，`ArrayList<Thing>`接受 type 的元素`Thing`。因为，你`otherThing`仍然是 type `Object`，而它应该是 type `Thing`，你得到了那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:44:49.117

```
ArrayList<Thing> thing = new ArrayList<Thing>(); 
```

为此，您只能添加 Thing 的类型/实例，因为它违反了 Java Generic 准则，因此不允许添加。

```
ArrayList<Object> thing = new ArrayList<Object>(); 
```

因为在这里你正在指定 Object 并且因为 Object 是超类，所以它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:50:14.813

`otherThing`没有被声明为`Thing`但是一个`Object`.

# mysql - 从一张表中选择不同的值并限制它们

> ID：16160497
> 
> 赞同：-8
> 
> 时间：2013-04-23T03:38:20.777
> 
> 标签：mysql, sql, limit

我有一张桌子：

```
first_column | last_column
--------------------------
text         | text
text         | text
text         | NO text 
```

现在我想从这个表中选择 LIMIT 80`last_column`是“文本”，LIMIT 80`last_column`是“无文本”

我的问题是“无文本”只能有 79 行。

请对一个查询提供一些帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:48:21.693

由于您想为`text`和获得 80 行`NO text`，您可以使用`UNION ALL`. 您还可以根据您的要求订购数据：

```
(SELECT first_column, last_column
FROM MyTable
WHERE last_column = 'text'
ORDER BY first_column
LIMIT 80)
UNION ALL
(SELECT first_column, last_column
FROM MyTable
WHERE last_column = 'NO text'
ORDER BY first_column
LIMIT 80); 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!2/aee774/1)

# ruby-on-rails - 如何阻止rails在日期助手中包含当前日期和月份

> ID：16160498
> 
> 赞同：0
> 
> 时间：2013-04-23T03:38:39.670
> 
> 标签：ruby-on-rails, simple-form

我正在尝试使用带有表单的 Rails 日期助手。但是，我只想得到年份。我从 simple_form gem [https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)获得了下面的表单代码。`discard_day`并`discard_month`阻止显示月份和日期选择框。但是，当我提交表单时，我收到了这个多参数错误

```
2 error(s) on assignment of multiparameter attributes
"start(1i)"=>"2013",
 "start(2i)"=>"4",
 "start(3i)"=>"23",
 "end(1i)"=>"2011",
 "end(2i)"=>"4",
 "end(3i)"=>"23", 
```

看起来 Rails 只是替换了当前的日期和月份，因为表单中没有输入任何内容。

我想知道是否有办法阻止 Rails 包含当前日期和月份，或者我应该在控制器中处理它。现在，创建动作看起来像这样

```
 def create
    @employment = current_user.employments.build(params[:employment])
    if @employment.save
    .... 
```

如果我不能阻止 Rails 包含当前日期和月份，那么我会在控制器中做什么？

```
 <%= f.input :start, as: :date, start_year: Date.today.year - 90,  
                              end_year: Date.today.year, discard_day: true, discard_month: true %>

   <%= f.input :end, as: :date, end_year: Date.today.year - 90,
                              end_year: Date.today.year, discard_day: true, discard_month: true %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:56:41.807

开始列和结束列的数据类型是什么？如果您只是存储一年，则可以将它们设置为整数类型而不是日期，然后使用`<%= f.input :start, collection: (Date.today.year - 90)..(Date.today.year) %>`.

# php - PHP没有传输到mysql数据库

> ID：16160504
> 
> 赞同：0
> 
> 时间：2013-04-23T03:39:23.447
> 
> 标签：php, mysql, stock

好的，所以我是 PHP 新手，并尝试制作一个脚本，该脚本从我拥有的 mysql 数据库中获取所有股票价格数据，然后查看在盘后交易期间股票价格是否上涨（通过比较一个当天的收盘价与第二天的开盘价）。我已经设置了一些这样的脚本，但是由于某种原因，这个脚本没有将数据复制到我的 sql 数据库中，我完全不知道为什么它不会。当我在整个过程中设置 echo 语句时，我发现我的代码似乎到处都在执行，但数据没有传输。任何帮助是极大的赞赏。

```
<?php
include("../includes/connect.php");

function masterLoop(){
$mainTickerFile = fopen("../tickerMaster.txt","r");
while (!feof($mainTickerFile)){
    $companyTicker = fgets($mainTickerFile);
    $companyTicker = trim($companyTicker);

    $nextDayIncrease = 0;
    $nextDayDecrease = 0;
    $nextDayNoChange = 0;
    $total = 0;
    $overnight_change = 0;
    $overnight_change_pct = 0;

    $sumOfIncreases = 0;
    $sumOfDecreases = 0;

    $sql = "SELECT date, open, close, percent_change FROM $companyTicker";
    $result = mysql_query($sql);

    if($result){
        while($row = mysql_fetch_array($result)){
            $date = $row['date'];
            $percent_change = $row['percent_change'];
            $open = $row['open'];
            $close = $row['close'];
            $sql2 = "SELECT date, open, close, percent_change FROM $companyTicker WHERE date > '$date' ORDER BY date ASC LIMIT 1";
            $result2 = mysql_query($sql2);
            $numberOfRows = mysql_num_rows($result2);

            if($numberOfRows==1){
                $row2 = mysql_fetch_row($result2);
                $tom_date= $row2[0];
                $tom_open= $row2[1];
                $tom_close= $row2[2];
                $tom_percent_change= $row2[3];
                if ($close == 0){
                    $close = $tom_open;
                    }
                $overnight_change = $tom_open - $close;
                $overnight_change_pct = ($overnight_change/$close)*100;

                if($overnight_change_pct > 0){
                    $nextDayIncrease++;
                    $sumOfIncreases += $tom_percent_change;
                    $total++;

                }else if($overnight_change_pct < 0){
                    $nextDayDecrease++;
                    $sumOfDecreases += $tom_percent_change;
                    $total++;
                }else{
                    $nextDayNoChange++;
                    $total++;
                }

            }else if ($numberOfRows==0){
                $total = 1;
                $nextDayIncrease = 1;
                $nextDayDecrease = 1;
            }else{
                echo "You have an error in analysis_c3";
            }
        }
    }else{
        echo "unable to select $companyTicker <br />";
    }
    $nextDayIncreasePercent = ($nextDayIncrease/$total) * 100;
    $nextDayDecreasePercent = ($nextDayDecrease/$total) * 100;
    $averageIncreasePercentage = $sumOfIncreases/$nextDayIncrease;
    $averageDecreasePercentage = $sumOfDecreases/$nextDayDecrease;
    insertIntoResultTable($companyTicker, $nextDayIncrease, $nextDayIncreasePercent, $averageIncreasePercentage, $nextDayDecrease, $nextDayDecreasePercent, $averageDecreasePercentage);
}
}

function insertIntoResultTable($companyTicker, $nextDayIncrease, $nextDayIncreasePercent,     $averageIncreasePercentage, $nextDayDecrease, $nextDayDecreasePercent, $averageDecreasePercentage){

$buyValue = $nextDayIncreasePercent * $averageIncreasePercentage;
$sellValue = $nextDayDecreasePercent * $averageDecreasePercentage;
    $trueValue = $buyValue + $sellValue;

$query="SELECT * FROM analysisOvernightGain5 WHERE ticker='$companyTicker' ";
$result=mysql_query($query);
$numberOfRows = mysql_num_rows($result);

if($numberOfRows==1){
    $sql = "UPDATE analysisOvernightGain5 SET ticker='$companyTicker',daysInc='$nextDayIncrease',pctOfDaysInc='$nextDayIncreasePercent',avgIncPct='$averageIncreasePercentage',daysDec='$nextDayDecrease',pctOfDaysDec='$nextDayDecreasePercent',avgDecPct='$averageDecreasePercentage',buyValue='$buyValue',sellValue='$sellValue'trueValue='$trueValue' WHERE ticker='$companyTicker' ";
    mysql_query($sql);
}else{
    $sql="INSERT INTO analysisOvernightGain5 (ticker,daysInc,pctOfDaysInc,avgIncPct,daysDec,pctOfDaysDec,avgDecPct,buyValue,sellValue,trueValue) VALUES ('$companyTicker', '$nextDayIncrease', '$nextDayIncreasePercent', '$averageIncreasePercentage', '$nextDayDecrease', '$nextDayDecreasePercent', '$averageDecreasePercentage', '$buyValue', '$sellValue','$trueValue')";
    mysql_query($sql);
}
}

masterLoop();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:10:34.803

你错过`,`了`,sellValue='$sellValue'trueValue='$trueValue'` 它应该是`,sellValue='$sellValue',trueValue='$trueValue'`

# android - Google Maps Android v1 API 已弃用，获取 API 密钥以进行发布

> ID：16160505
> 
> 赞同：3
> 
> 时间：2013-04-23T03:39:29.913
> 
> 标签：android, google-maps, android-mapview, api-key

我开发了一个使用 mapView 的应用程序。我已经为 android v1 使用了谷歌地图。我完成了我的应用程序，现在准备发布，但不幸的是，谷歌从 2013 年 3 月 18 日起停止提供 API 密钥。现在我遇到了大麻烦。

那么有什么方法可以让我获得适用于 android v1 的 Google 地图的 API 密钥，或者

我可以在不更改代码的情况下将 Google 地图用于 android v2 密钥吗（例如地图上的 ItemizedOverlays、Overlays 和 Drawings）

请帮忙 ！！！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:43:08.240

**1.**您可以尝试联系 Google 并要求他们为您提供密钥，尽管我怀疑他们会同意这样做。

**2.**不，您不能使用您在 Google Map API v1 中使用的大部分对象。V2 不支持叠加，您应该使用多边形和折线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:49:51.370

此时您可以从当前版本 V1 迁移到 V2。V2 版本的详细解释在[这里](https://developers.google.com/maps/documentation/android/intro)。

按照教程中的分步说明进行操作。

# python - 烧瓶管理员不显示外键列

> ID：16160507
> 
> 赞同：11
> 
> 时间：2013-04-23T03:39:43.937
> 
> 标签：python, flask, flask-sqlalchemy, flask-admin, flask-extensions

```
class Parent(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String(120))

    def __repr_(self):
        return '<Parent %r>' % (self.name)

admin.add_view(ModelView(Parent, db.session))

class Child(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String(120))
    parent = db.Column(db.Integer, db.ForeignKey(Parent))

admin.add_view(ModelView(Child, db.session)) 
```

你好 -

上面的代码是我正在尝试创建的烧瓶管理页面的示例。目标是在孩子的创建页面上有一个名称文本框和一个下拉菜单以选择父母。

通过上述设置，只有名称字段。缺少父下拉框。

任何想法如何实现它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T13:29:47.013

如果您将`Child`课程更改为：

```
class Child(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String(120))
    parent_id = db.Column(db.Integer, db.ForeignKey('parent.id'))
    parent = db.relationship('Parent', backref=db.backref('children', lazy='dynamic')) 
```

我对此知之甚少，也不知道您是否需要反向引用，但此设置适用于 Flask-Admin。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-25T09:19:16.947

您可能需要通过子类为 flask-admin 指定一些额外的选项：

```
class ChildView(ModelView):
    column_display_pk = True # optional, but I like to see the IDs in the list
    column_hide_backrefs = False
    column_list = ('id', 'name', 'parent')

admin.add_view(ChildView(Parent, db.session)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-23T17:44:51.717

这是一个无需人工维护的全包解决方案。

```
from sqlalchemy import inspect

class ChildView(ModelView):
    column_display_pk = True # optional, but I like to see the IDs in the list
    column_hide_backrefs = False
    column_list = [c_attr.key for c_attr in inspect(Child).mapper.column_attrs]

admin.add_view(ChildView(Child, db.session)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-25T21:31:56.720

对于它的价值，这里列出的解决方案都不适合我。我遇到了外键没有出现在 Flask-Admin 中的问题。

这就是他们出现的原因：

```
class CustomModelViewName(ModelView):
    can_delete = True
    column_hide_backrefs = False
    column_list = ["column_name", "column_name", "etc", "etc", "etc"]
    column_searchable_list = ["column_name"] 
```

# eclipse - Eclipse Run As 不显示 Junit 或 testNG 选项

> ID：16160511
> 
> 赞同：1
> 
> 时间：2013-04-23T03:39:49.657
> 
> 标签：eclipse, testng, junit4

我正在尝试在 Eclipse（版本 3.7.0）中使用 Junit4 执行一个简单的测试用例

1）我单击运行图标（在调试图标旁边），然后单击运行方式选项，它只显示 Java 应用程序作为选项 2）当我单击运行配置选项时，在创建、管理和运行配置中窗口，我看到左侧窗格中列出了 Junit 和 TestNG

3）点击窗口>显示视图>我可以看到Junit和TestNG列为一个选项

请告诉我如何解决这个问题。谢谢！

**项目名称：webDriverMethods**

下面是我的代码

```
import org.junit.*; 
import static org.junit.Assert.*;
import java.util.*;
import org.testng.annotations.*;
import org.testng.annotations.Test; //added 5 imports for Junit and testNG

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class webDriverMethodsTest 
{
  @Test
  public static void main(String[] args)
  {
    WebDriver driver = new FirefoxDriver();
    driver.get("http://www.google.com");

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:53:25.263

您是否在当前项目中添加了 Testng 和 Junit .Jar 文件，如果您在项目中添加了 TestNG 和 Junit jar 文件，那么您可以使用 testng 和 Junit 运行您的项目

你检查[`here`](http://testng.org/doc/eclipse.html)如何在 Ecplise 中安装 Testng

[您可以在 ecplise 中下载导入 jar 文件后在此处](http://sourceforge.net/projects/junit/files/junit/3.8.1/junit3.8.1.zip/download?use_mirror=kaz&download=)下载 Junit 表单，然后检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:01:10.413

您需要有一个使用 @Test 注释的方法，以便插件将其识别为 TestNG 测试。添加 testng 测试注释的导入以查看 run as-> TestNG 作为选项或从 junit 导入 @Test 以查看 run as -> Junit, TestNG 作为选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:44:42.023

您不能添加`@Test`带有参数的静态方法，它将被忽略。如果您定义数据提供者，这可能与 TestNG 一起使用，但它很可能不是您想要的。测试方法是类上的常规方法，参见[http://testng.org](http://testng.org)示例。

# javascript - 角度js，选择更改时如何启用

> ID：16160512
> 
> 赞同：0
> 
> 时间：2013-04-23T03:39:53.937
> 
> 标签：javascript, angularjs

我在使用 angularjs 时遇到问题，因为我是新手。

这是我的 html 代码：

```
<select id="provinsiSelect" ui-select2 ng-model="params.id" style="width: 200px;">
    <option value=""></option>
    <option ng-repeat="v in prov" value="{{v.id}}" title="{{v.text}}"
    ng-selected="v.id == params.id">{{v.text}}</option>
</select>

<select id="kabupatenSelect" disabled ui-select2 ng-model="params2.id" style="width: 200px;">
    <option value=""></option>
    <option ng-repeat="y in kab" value="{{y.id}}" title="{{y.text}}"
    ng-selected="y.id == params.id">{{y.text}}</option>
</select> 
```

如您所见，有两个选择，请在第一次选择更改时帮助我，然后从禁用中选择启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:42:57.637

只需使用[`ng-disabled`](http://docs.angularjs.org/api/ng.directive%3angDisabled)：

```
<select id="provinsiSelect" ui-select2 ng-model="params.id" style="width: 200px;">
    <option value=""></option>
    <option ng-repeat="v in prov" value="{{v.id}}" title="{{v.text}}"
    ng-selected="v.id == params.id">{{v.text}}</option>
</select>

<select id="kabupatenSelect" ng-disabled="params.id" ui-select2 ng-model="params2.id" style="width: 200px;">
    <option value=""></option>
    <option ng-repeat="y in kab" value="{{y.id}}" title="{{y.text}}"
    ng-selected="y.id == params.id">{{y.text}}</option>
</select> 
```

假设您没有 0 的 id，`params.id`一旦选择了 id 就应该是真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T10:05:40.847

正如前面的评论所说，使用 ng-disabled 。您还应该在第一个选择变量上添加一个监视，并将 params.id 设置为您在更改时需要的值。

```
$scope.$watch('provinsiSelect', function (newVal) {
    $scope.params.id = true;
}); 
```

# winapi - 字体的几何形状

> ID：16160514
> 
> 赞同：1
> 
> 时间：2013-04-23T03:39:59.103
> 
> 标签：winapi, fonts, gdi+, gdi, font-size

如果我想在控件上绘制文本，我可以先获取“边界矩形”并将其放置在适当的位置（使用`GetTextExtentPoint32`函数）。

但我还需要知道一些基线在哪里，例如图片中的两条红线。（它们的位置是相对于边界矩形的顶部计算的。）

我没有找到获取这些信息的方法。请帮忙。

![在此处输入图像描述](https://i.stack.imgur.com/wfek8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T03:50:10.170

该功能`GetTextMetrics`将为您提供此功能。首先将您的字体选择到 DC 中，然后调用`GetTextMetrics`. 字段`tmAscent`和结构可能是您需要的`tmDescent`。`TEXTMETRIC`

# objective-c - UICollectionVIew、UITableView 还是自定义视图？

> ID：16160515
> 
> 赞同：2
> 
> 时间：2013-04-23T03:40:04.177
> 
> 标签：objective-c, uitableview, uicollectionview

有谁知道 Square Wallet 应用程序中的列表视图是 UICollectionView 还是自定义视图？想知道他们是如何实现列表视图的，但是当单击它时，视图会升高并扩展以覆盖整个屏幕。

![方形钱包列表视图](https://i.stack.imgur.com/7BU1J.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:03:00.723

不能肯定地说，但我会使用带有自定义 UITableViewCells 的 UITableView。单击表格单元格时，我将使用 Core Animation 为视图设置动画以填充整个屏幕。

不过，有多种方法可以实现这种效果。

# mysql - MySQL：您不能在 FROM 子句中指定要更新的目标表

> ID：16160517
> 
> 赞同：-2
> 
> 时间：2013-04-23T03:40:20.763
> 
> 标签：mysql, sql

当我尝试运行下面的查询时，我得到“您不能在 FROM 子句中指定目标表 'list' 进行更新”

我知道实际上还有很多其他关于类似问题的回复，但我对 SQL 的掌握并不强，无法从其他人的解决方案中重建它。

```
update list
set li = '6'
where li = '5
   and dn in ( SELECT dn FROM list GROUP BY dn HAVING COUNT(*) < 2000 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:45:32.437

你收到这个错误了吗？

> 您不能在 FROM 子句中指定目标表“列表”进行更新

这是因为如果您在另一个子选择语句中使用它，则无法直接更新该表。一种替代方法是将表与自身连接起来。

```
UPDATE  list a
        INNER JOIN
        (
            SELECT  dn 
            FROM    list 
            GROUP   BY dn 
            HAVING  COUNT(*) < 2000 
        ) b ON a.dn = b.dn
SET     a.li = '6'
WHERE   a.li = '5 
```

# c# - 我应该使用哪个 ASP.NET 控件？

> ID：16160520
> 
> 赞同：0
> 
> 时间：2013-04-23T03:40:31.917
> 
> 标签：c#, asp.net, user-interface, listbox, repeater

我不确定要使用哪个 asp.net 控件。我已经尝试/考虑过但无济于事。

```
Repeater / ListBox (doesn't allow for multiple lines)
Repeater / Div (No click unless I use JavaScript postback) 
```

我在代码隐藏中有一个消息列表，我想将其附加到一些可以显示它们的 UI 控件（每个项目跨越多行），并且具有良好的样式。

我需要在 ListBox 中更改所选项目的可点击功能。但我需要能够将每个 Line 项目隔开以跨越多行并可能包含图形。

***一个很好的视觉示例是 Microsoft Outlook 的收件箱视图。每条消息都包含电子邮件地址、时间戳等，这些信息相互隔开且样式精美。我如何用 asp.net 完成这个？:)***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:42:30.683

您可以将转发器放在另一个转发器中......这将帮助您每行嵌套多个元素

我通常将 KnockoutJS 用于这些类型的需求，因为它提供了出色的数据绑定模板

# c# - 在 RadFileExplorer 中加载 UNC 路径

> ID：16160523
> 
> 赞同：1
> 
> 时间：2013-04-23T03:40:48.340
> 
> 标签：c#, asp.net, telerik, unc

我有一个 RadFileExplorer，我想加载 UNC 路径下的文件夹以显示在我的资源管理器上。我的问题是，它有错误“无法映射路径 \...”。我在网上搜索但没有找到任何解决方案。

这是我的代码：

网络配置：

```
<appSettings>
     <add key="UNCPath" value="\\Sample\Operation\Documents"  />
</appSettings> 
```

* * *

aspx.cs：

```
RadFileExplorer1.Configuration.ViewPaths = new string[] { ConfigurationManager.AppSettings["UNCPath"] }; 
```

* * *

自定义提供者：

```
public override DirectoryItem ResolveRootDirectoryAsTree(string path)
{
   // Get all folders and filters folder to show

   DirectoryItem originalFolder = base.ResolveRootDirectoryAsTree(path); --->ERROR HERE "Failed to map the path \\Sample\Operation\Documents"
} 
```

如何访问 UNC 路径以将其加载到我的 RadExplorer？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T10:08:11.903

RadFileExplorer 不支持此功能。您需要创建自定义文件提供程序并添加文件处理程序。这个知识库有更多信息[http://www.telerik.com/support/kb/aspnet-ajax/fileexplorer/details/use-radfileexplorer-with-physical-and-shared-folder-s-paths](http://www.telerik.com/support/kb/aspnet-ajax/fileexplorer/details/use-radfileexplorer-with-physical-and-shared-folder-s-paths)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:17:42.403

如果您转义到 \\\\Sample\\Operation\\Documents\\ 的路径会发生什么

# html - Flask：无法接收 HTML 表单 POST 数据

> ID：16160528
> 
> 赞同：6
> 
> 时间：2013-04-23T03:41:34.660
> 
> 标签：html, forms, post, twitter-bootstrap, flask

这是我的 HTML

```
 <form class="form-horizontal" action="/" method="POST">
    <div class="control-group">
      <label class="control-label" for="email">Email</label>
      <div class="controls">
        <input type="text" id="email" placeholder="Email">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="password">Password</label>
      <div class="controls">
        <input type="password" id="password" placeholder="Password">
      </div>
    </div>
    <div class="control-group">
      <div class="controls">
        <button type="submit" class="btn">Sign In</button>
      </div>
    </div>
  </form> 
```

当我提交表单时，在服务器上我尝试打印它，我做

```
 def post(self):
        print 'data :', request.form 
```

我明白了

```
data : ImmutableMultiDict([]) 
```

我也试试

```
def post(self):
        print 'data :', request.json 
```

我明白了

```
data : None 
```

我到底在这里想念什么

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T14:11:01.110

您的输入都没有名称属性

因此，没有发送任何内容。

```
 <input type="password" id="password" placeholder="Password"> 
```

应该：

```
 <input type="password" id="password" name="password" placeholder="Password"> 
```

ID 仅用于 DOM

# gwt - 在 gwt 中，计算单元格表中的总行数的最简单代码是什么？

> ID：16160535
> 
> 赞同：0
> 
> 时间：2013-04-23T03:42:17.283
> 
> 标签：gwt, count, rows, celltable

鉴于：

```
CellTable<List<String>> table = new CellTable<List<String>>();
ListDataProvider<List<String>> dataProvider = new ListDataProvider<List<String>>();
dataProvider.addDataDisplay(table);
List<List<String>> list = dataProvider.getList(); 
```

计算单元格表中行总数的最简单代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:18:17.143

如果 getRowCount 不起作用，为什么不尝试获取您拥有的数组的大小，您必须在 celltable 中推送一些数组，为什么不只获取数组的大小..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:07:35.020

[**getRowCount() ??**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#getRowCount%28%29)

> 获取所有行的总数。

[**getVisibleItemCount()**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#getRowCount%28%29)

> 获取正在显示的可见项目的数量。请注意，如果没有足够的数据来填充页面，则此值可能小于页面大小。

并查看 `getVisibleRange()` 返回`range`oobject 的方法，然后您就可以通过`range.getLength()`

# c - 如何从文本文件中提取特定编号的行？（C）

> ID：16160546
> 
> 赞同：0
> 
> 时间：2013-04-23T03:43:04.623
> 
> 标签：c, string, file

我正在尝试编写一个函数，该函数根据给定的数字从文本文件中打印特定行。例如，假设文件包含以下内容：

```
1 hello1 one
2 hello2 two
3 hello3 three 
```

如果给定的数字是“3”，该函数将输出“hello3 3”。如果给定的数字是“1”，则函数输出将为“hello1 one”。

我对 C 很陌生，但到目前为止，这是我的逻辑。

我想第一件事是首先，我需要在文件中找到字符“数字”。然后呢？如何在不包括数字的情况下写出线路？我什至如何找到“数字”？我确信这很简单，但我不知道该怎么做。这是我到目前为止所拥有的：

```
void readNumberedLine(char *number)
{
    int size = 1024;
    char *buffer = malloc(size);
    char *line;
    FILE *fp;
    fp = fopen("xxxxx.txt", "r");
    while(fp != NULL && fgets(buffer, sizeof(buffer), fp) != NULL)
    {
      if(line = strstr(buffer, number))
      //here is where I am confused as to what to do.           
    }
    if (fp != NULL)
    {
            fclose(fp);
    }
} 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:02:43.700

根据您所说的，您正在寻找在行首标有数字的行。在这种情况下，您想要一些可以读取带有标签前缀的行的东西

```
bool readTaggedLine(char* filename, char* tag, char* result)
{
    FILE *f;
    f = fopen(filename, "r");
    if(f == NULL) return false;
    while(fgets(result, 1024, f))
    {
        if(strncmp(tag, result, strlen(tag))==0)
        {
            strcpy(result, result+strlen(tag)+1);
            return true;
        }
    }
    return false;
} 
```

然后像使用它

```
char result[3000];
if(readTaggedLine("blah.txt", "3", result))
{
    printf("%s\r\n", result);
}
else
{
    printf("Could not find the desired line\r\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:04:03.380

我会尝试以下。

方法一：

```
Read and throw away (n - 1) lines 
// Consider using readline(), see reference below
line = readline() // one more time
return line 
```

方法二：

```
Read block by block and count carriage-return characters (e.g. '\n'). 
Keep reading and throwing away for the first (n - 1) '\n's
Read characters till next '\n' and accumulate them into line
return line 
```

readline()：[在 C 中一次读取一行](https://stackoverflow.com/questions/2372813/reading-one-line-at-a-time-in-c)

PS 以下是一个shell 解决方案，它可以用来对C 程序进行单元测试。

```
// Display 42nd line of file foo
$ head --lines 42 foo | tail -1
// (head displays lines 1-42, and tail displays the last of them) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:58:17.893

您可以使用附加值来帮助您记录已阅读的行数。然后在`while`循环中将该值与您的输入值进行比较，如果它们相等，则输出`buffer`.

# c# - Windows Phone 8 模拟器无法连接到互联网

> ID：16160548
> 
> 赞同：1
> 
> 时间：2013-04-23T03:43:28.733
> 
> 标签：c#, windows-phone-8, emulation

我正在尝试将 Windows Phone 8 模拟器连接到互联网。我已经尝试了堆栈溢出或任何其他站点中给出的所有技巧和步骤，但我无法得到它。

我试过这个：

第 1 步 - 使用 Hyper-V 启动服务器，一旦启动，您可以在（网络共享）页面中看到添加的两个新网络适配器。

第 2 步 - 转到运行应用程序的 Visual Studio IDE，使用模拟器运行应用程序，一旦开始尝试打开 IE，它将无法连接到互联网。

第 3 步 - 现在再次返回网络共享页面，右键单击新创建的外部适配器选择属性，点击共享选项卡，现在检查两个选项是否有勾选标记，如果没有勾选这两个选项，然后单击确定。

第 4 步 - 新创建的内部适配器会将域名从未识别的网络更改为您的共享域名，一旦更改尝试在已经运行的模拟器中再次访问 IE。现在我希望互联网连接正常。

但是一旦完成它就会显示：

Windows Phone 模拟器无法连接到 Windows Phone 操作系统：

电话没有响应连接请求。

某些功能可能被禁用。

我在互联网上找到的解决方案是：

您所要做的就是转到“网络和 Internet --> 网络连接”，右键单击“vEthernet（内部以太网端口）Windows Phone Emulator”并启用它。

但它已经启用。所以我不知道如何让互联网工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T08:57:01.413

*主机上的*某些连接工具在与模拟器一起使用时可能会产生负面影响；我发现主机上安装了 cisco VPN 客户端阻止了模拟器找到互联网。其他 VPN 客户端可能有类似的副作用。我只是卸载了 cisco（内置的 windows VPN 可以满足我的需要），它运行良好。

我还看到主机暂停/恢复后无法找到互联网的问题。在*那种*情况下，它原来是糟糕的网络驱动程序。我安装了一个专用的 Intel NIC（而不是主板上的板载 NIC）——问题解决了。

基本上，Hyper-V 有点挑剔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T09:11:43.487

如果您使用任何需要凭据才能连接到 Internet 的代理服务器，它可能无法从模拟器连接。

这是因为它不支持代理身份验证。.Net 的手机版本中缺少用于身份验证的类

请看下面的帖子。

[无法从 WP7 模拟器连接到 Web 服务](https://stackoverflow.com/questions/4562887/not-able-to-connect-to-webservice-from-a-wp7-emulator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:59:16.687

1.检查您是否使用最新的Internet Explorer 10。如果没有更新并检查它。

2.如果还是不行，可能是你的显卡驱动有问题。您应该有 WDDM 2.0 驱动程序。显卡也很顺利。

# angularjs - 使用 ng-repeat 时，在删除列表项时未删除被嵌入的元素

> ID：16160549
> 
> 赞同：0
> 
> 时间：2013-04-23T03:43:29.777
> 
> 标签：angularjs, angularjs-directive, angularjs-ng-repeat

我有一个小部件，我正在使用`ng-repeat`. 初始创建工作正常，但之后它停止更新。以下是摘录`index.html`：

```
<div>
  <x-node ng-repeat="node in nodes"></x-node>
</div> 
```

部分/node.html：

```
<div>{{node.name}}</div> 
```

和指令：

```
angular.module('directive', []).directive('node', function() {
    return {
        restrict: 'E',
        scope: true,
        templateUrl: 'partials/node.html',
        replace: true,
        compile: function(tElement, tAttrs, transclude) {
            return {
                post: function(scope, iElement, iAttrs) {
                    scope.$on('$destroy', function(event) {
                        console.log('destroying');
                    });
                }
            };
        }
    };
}); 
```

如果我像这样修改控制台中的节点列表：

```
var e = angular.element($0);
var s = e.scope();
s.nodes.splice(1,1);
s.$apply() 
```

...然后`$destroy`回调运行，但呈现的元素不会改变。我的指令中有什么遗漏吗？

演示：[Plunker](http://plnkr.co/edit/U8UGQl6JMRGjz9DZcvtz?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T00:34:37.387

看来这确实是个 bug，在 AngularJS 1.2 系列中已经修复。这是使用 1.2[的更新演示。](http://plnkr.co/edit/QMsVKpYaJApmyJQq2C6F?p=preview)

索引.html：

```
<!DOCTYPE html>
<html ng-app="my-app">

  <head lang="en">
    <meta charset="utf-8">
    <title>Custom Plunker</title>

    <link rel="stylesheet" href="style.css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>

    <script src="app.js"></script>
  </head>

  <body ng-controller="AppController">

    <div id="ct">
      <x-node ng-repeat="node in nodes"></x-node>
    </div>

    <button id="test">Remove element [1]</button>
  </body>

</html> 
```

应用程序.js：

```
var app = angular.module('my-app', [], function () {

})

app.controller('AppController', function ($scope) {

        $scope.nodes = [{
          name: 'one'
        }, {
          name: 'two'
        }, {
          name: 'three'
        }];

})

app.directive('node', function() {
    return {
        restrict: 'E',
        scope: true,
        templateUrl: 'node.html',
        replace: true,
        compile: function(tElement, tAttrs, transclude) {
            return {
                post: function(scope, iElement, iAttrs) {
                    scope.$on('$destroy', function(event) {
                        console.log('destroying');
                    });
                }
            };
        }
    };
});

$(function(){
  $('#test').click(function(){
    var el = $('#ct').children().first();
    if(el.length){
      var e = angular.element(el[0]);
      var s = e.scope();
      s.nodes.splice(1,1);
      s.$apply()
    }
  })  
}); 
```

节点.html：

```
<div>{{node.name}}</div> 
```

# vb.net - Visual Basic UDPClient 服务器/客户端模型？

> ID：16160550
> 
> 赞同：3
> 
> 时间：2013-04-23T03:43:42.540
> 
> 标签：vb.net, client-server, chat, udpclient

因此，我正在尝试制作一个非常简单的系统来将消息从客户端发送到服务器（稍后也从服务器发送到客户端，但首先是婴儿步骤）。我不确定如何使用 UDPClient 发送和接收消息（尤其是接收消息），主要是因为我没有任何触发该`ReceiveMessage()`功能的东西，我不确定会发生什么。

源代码位于此链接，请转到文件>下载。如果您只想运行 exe，它已经构建好了。

所以我的问题基本上是：我怎样才能轻松使用`UDPClient`，我怎样才能让这个系统工作，以及执行这种连接的一些技巧是什么？我应该注意什么（线程、代码问题等）？

[来源](https://docs.google.com/file/d/0B2sn5IyNeCIENjluanJsRHo2b2c/edit?usp=sharing)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T11:49:39.320

您首先需要设置两个`UdpClient`s。一个客户端用于侦听，另一个用于发送数据。（您还需要选择一个*空闲/未使用*的端口号并知道您的目标的 IP 地址 - 您要将数据发送到的机器*。*）

要设置接收器，

1.  使用您之前选择的端口号实例化您的`UdpClient`变量，

2.  创建一个新线程以避免在接收数据时阻塞，

3.  只要您想接收数据，就在客户端的接收方法上循环（循环的执行应该在新线程内），

4.  当您收到大量数据（称为“数据包”）时，您可能需要将字节数组转换为更有意义的东西，

5.  当您想要完成接收数据时，创建一种退出循环的方法。

要设置发件人，

1.  使用您之前选择的端口号实例化您的`UdpClient`变量（您可能希望启用发送广播数据包的功能。这允许您向 LAN 上的所有侦听器发送数据），

2.  当需要传输数据时，将数据转换为字节数组，然后调用`Send()`.

^(我建议你快速浏览一下[这个](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)。)

这里有一些代码可以让你开始......

```
'''''''''''''''''''''''Set up variables''''''''''''''''''''
Private Const port As Integer = 9653                         'Port number to send/recieve data on
Private Const broadcastAddress As String = "255.255.255.255" 'Sends data to all LOCAL listening clients, to send data over WAN you'll need to enter a public (external) IP address of the other client
Private receivingClient As UdpClient                         'Client for handling incoming data
Private sendingClient As UdpClient                           'Client for sending data
Private receivingThread As Thread                            'Create a separate thread to listen for incoming data, helps to prevent the form from freezing up
Private closing As Boolean = False                           'Used to close clients if form is closing

''''''''''''''''''''Initialize listening & sending subs'''''''''''''''''

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.Load
    InitializeSender()          'Initializes startup of sender client
    InitializeReceiver()        'Starts listening for incoming data                                             
End Sub

''''''''''''''''''''Setup sender client'''''''''''''''''

Private Sub InitializeSender()
    sendingClient = New UdpClient(broadcastAddress, port)
    sendingClient.EnableBroadcast = True
End Sub

'''''''''''''''''''''Setup receiving client'''''''''''''

Private Sub InitializeReceiver()
    receivingClient = New UdpClient(port)
    Dim start As ThreadStart = New ThreadStart(AddressOf Receiver)
    receivingThread = New Thread(start)                            
    receivingThread.IsBackground = True                            
    receivingThread.Start()                                       
End Sub

'''''''''''''''''''Send data if send button is clicked'''''''''''''''''''

Private Sub sendBut_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles sendBut.Click
    Dim toSend As String = tbSend.Text                  'tbSend is a textbox, replace it with whatever you want to send as a string
    Dim data() As Byte = Encoding.ASCII.GetBytes(toSend)'Convert string to bytes
    sendingClient.Send(data, data.Length)               'Send bytes
End Sub

'''''''''''''''''''''Start receiving loop''''''''''''''''''''''' 

Private Sub Receiver()
    Dim endPoint As IPEndPoint = New IPEndPoint(IPAddress.Any, port) 'Listen for incoming data from any IP address on the specified port (I personally select 9653)
    While (True)                                                     'Setup an infinite loop
        Dim data() As Byte                                           'Buffer for storing incoming bytes
        data = receivingClient.Receive(endPoint)                     'Receive incoming bytes 
        Dim message As String = Encoding.ASCII.GetString(data)       'Convert bytes back to string
        If closing = True Then                                       'Exit sub if form is closing
            Exit Sub
        End If
    End While
End Sub

'''''''''''''''''''Close clients if form closes''''''''''''''''''

Private Sub Form1_FormClosing(sender As Object, e As FormClosingEventArgs) Handles Me.FormClosing
    closing = True          'Tells receiving loop to close
    receivingClient.Close()
    sendingClient.Close()
End Sub 
```

^(这里有一些其他的例子：[这里](http://www.codeproject.com/Articles/8877/UDP-Send-and-Receive-using-threads-in-VB-NET)、[这里](http://www.java2s.com/Tutorial/VB/0400__Socket-Network/0300__UdpClient.htm)、[这里](http://www.dreamincode.net/forums/topic/39722-making-udp-connection/)和[这里](http://www.codeproject.com/Articles/16935/A-Chat-Application-Using-Asynchronous-UDP-sockets)。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T13:20:11.883

```
Imports System.Threading

Shared client As UdpClient
Shared receivePoint As IPEndPoint

client = New UdpClient(2828) 'Port
receivePoint = New IPEndPoint(New IPAddress(0), 0)

Dim readThread As Thread = New Thread(New ThreadStart(AddressOf WaitForPackets))
readThread.Start()

Public Shared Sub WaitForPackets()
    While True
        Dim data As Byte() = client.Receive(receivePoint)
        Console.WriteLine("=" + System.Text.Encoding.ASCII.GetString(data))
    End While
End Sub 
```

# list - Prolog 列表谓词

> ID：16160552
> 
> 赞同：0
> 
> 时间：2013-04-23T03:43:44.283
> 
> 标签：list, prolog

我需要一些关于检查和操作列表的三个 prolog 谓词的帮助。我是 prolog 的新手，任何帮助将不胜感激。

三个谓词是：

*   `double_up(+List1, -List2)``List2`当每个元素为`List1`两次时为真。查询`double_up([a,b,c],X)`应该给出`X=[a,a,b,b,c,c]`. 输出列表中元素的顺序无关紧要。
*   `pivot(+List1, +Pivot, -Smaller, -GreaterEq)`当`Smaller`是`List1`小于的数字列表`Pivot`并且`GreaterEq`是`List1`大于或等于的数字列表时为真`Pivot`。
*   `fancy_replace(+List, +Takeout,+Putin, -NewList, -Count)``NewList`当与输入相同的列表时为真`List`，但列表中的每个`Takeout`元素都被替换为`Putin`元素。Count 应该是被替换的 Takeouts 的数量。例如，查询`fancy_replace([9,10,1,9,2],9,0, X, C)`应该给出`X = [0,10,1,0,2]`and `C = 2`。输出列表中元素的顺序无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:49:46.960

Prolog 中处理列表的更简单*模式*强加了一个带有 2 个参数的递归谓词，通常匹配输入和输出数据，以及一个基本情况，停止递归，匹配空列表。然后

```
double_up([X|Xs], [X,X|Ys]) :- double_up(Xs, Ys).
double_up([], []). 
```

这个谓词比所需的更*通用*`double_up(-List1, +List2)`，因为它也适用于 mode 。例如

```
?- double_up(L,[1,1,2,2]).
L = [1, 2]. 
```

为了根据需要限制其模式，我认为有必要无*用地*使代码复杂化，将干净的循环移动到服务谓词中，并让 double_up 仅用于测试参数：

```
double_up(I, O) :- is_list(I), var(O), double_up_(I, O).
double_up_([X|Xs], [X,X|Ys]) :- double_up_(Xs, Ys).
double_up_([], []). 
```

pivot/4 可以是 SWI-Prolog 中的“单线”：

```
pivot(List1, Pivot, Smaller, GreaterEq) :-
    partition(>(Pivot), List1, Smaller, GreaterEq). 
```

像 partition, foldl from library( [apply](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) ) 它是最后一个必需谓词的简单实现：

```
fancy_replace(List, Takeout, Putin, NewList, Count) :-
    foldl(swap_n_count(Takeout, Putin), List, NewList, 0, Count).
swap_n_count(Takeout, Putin, L, N, C0, C) :-
    (   L == Takeout
    ->  N = Putin, C is C0 + 1
    ;   N = L, C = C0
    ). 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T04:17:40.337

老实说，我讨厌prolog……尽管学习后它很有趣也很容易

我认为这是一个很好的参考，因为几周前我无法理解 prolog 的工作原理。 [以下序言代码有什么作用？](https://stackoverflow.com/questions/14994922/what-does-the-follow-prolog-codes-do)

无论如何..这是您第一个问题的答案；希望你能自己解决剩下的问题：D

```
double([]).
double([H|[]], [H,H|[]]).
double([H|T],[H,H|T1]):- double(T, T1). 
```

顺便说一句，这可能不是唯一的解决方案......但它有效

# batch-file - 通过outlook发送电子邮件的DOS批处理：需要添加新行

> ID：16160554
> 
> 赞同：3
> 
> 时间：2013-04-23T03:43:53.527
> 
> 标签：batch-file, outlook, dos, line-breaks, batch-processing

这是我的批次的一部分：

```
start "" "C:\Program Files (x86)\Microsoft Office\Office12\OUTLOOK.EXE" /c ipm.note /m "email address&cc=email address 2;email address 3&subject=Very Important Alert&body=Line 1 of alert\nLine 2 of alert" 
```

这只是将文字`\n`插入正文中。如何让它插入实际的换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:30:00.100

尝试这个：

```
"...&body=Line 1 of alert\r\nLine 2 of alert" 
```

或这个：

```
"...&body=Line 1 of alert%%0D%%0ALine 2 of alert" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T16:15:01.737

以下对我有用；但是，我必须单击`send`按钮才能完成该过程。

```
start "" "C:\Program Files (x86)\Microsoft Office\Office12\OUTLOOK.EXE" /c ipm.note /m "FromEmailAddress&cc=EmailAddress1;EmailAddress1&subject=Very Important Alert&body=Line 1 of alert%%0D%%0ALine 2 of alert" 
```

# java-ee-6 - 将war应用程序的路径（localhost）配置为root（Java EE）

> ID：16160565
> 
> 赞同：0
> 
> 时间：2013-04-23T03:44:43.747
> 
> 标签：java-ee-6, glassfish-3

我想在本地运行我的战争应用程序时更改路径......现在，它正在默认设置下运行......

```
http://localhost:8080/myproject-war/ 
```

我希望它成为根，例如：

```
http://myproject-war.local/ 
```

或者

```
http://myproject:8080/ 
```

我怎样才能做到这一点？？？

注意：我的应用程序是使用 Netbeans 7.3 的带有 Glashfish 的 Java EE 6 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T01:48:34.817

这篇文章帮助我解决了[如何将 EAR 中的 WAR 部署为 Glassfish 中的根 (/) 上下文？](https://stackoverflow.com/questions/127492/how-do-you-deploy-a-war-thats-inside-an-ear-as-the-root-context-in-glassfis).

*   首先，我向企业应用程序项目添加了一个标准部署描述符 ( **application.xml )。**
*   然后，将您的 Web 应用程序的上下文根的路径更改为`<context-root>/myproject-war</context-root>`：`<context-root>/</context-root>`或`<context-root />`
*   最后，（可选）删除或重命名 Glashfish 索引页面（或将其重定向到欢迎页面）。位于 Glashfish 默认文件夹中，例如`C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1\docroot`

现在页面 Web 应用程序将在以下位置可见：`http://localhost:8080/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:15:14.510

也许您在这里混淆了一些东西-您可以并且应该做的一件事是设置应用程序的上下文根。这是在服务器的部署描述符中完成的 - 在您的情况下`glassfish-web.xml`：

```
<context-root>/myproject</context-root> 
```

（有关更多详细信息，请参阅[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnadx.html)。）

您在示例 URL 中询问的是更改主机名，这与您的应用程序或应用程序服务器无关，而是与您的机器和操作系统设置有关。

您可以在 OS 主机文件（`/etc/hosts`在 Linux 上，`C:\Windows\System32\drivers\etc`在 Windows 上）中添加一些内容，但我认为这样做没有意义。您的应用程序在某个主机（可能是`localhost`或某些外部服务器）上运行，这就是您的 URL 的启动方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T04:01:55.503

您可以将条目放入主机文件中。它位于“C:\WINDOWS\system32\drivers\etc”中。

127.0.0.1 your_project_name

# python - 如何检索页面数据作为输入并向用户提供自定义的输出？

> ID：16160568
> 
> 赞同：2
> 
> 时间：2013-04-23T03:44:48.800
> 
> 标签：python, django

我创建了一个翻译器，它不是语言翻译器，它只会将字母的类型从右到左更改为从右到左的样式（如希伯来语或阿拉伯语到拉丁语的排版）。

所以现在我一直在尝试想象如何创建一个网络应用程序，该应用程序采用像谷歌翻译这样的 URL，并将链接与翻译后的内容一起返回给用户！

任何想法？方法？从哪里开始？我正在使用 Python + Django = 很多正则表达式的东西，所以请随意给我一些令人困惑的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:42:19.373

最小版本只是一个视图：

*   从自己的 URL 获取输入 URL 参数，
*   获取输入 URL，
*   应用转换，
*   将转换后的内容返回给客户端。

这在 Django 中应该很简单，例如：

```
import urllib2
from django.views.generic import View

class SimpleProxy(View):
    def get(self, request, source_url, *args, **kwargs):
        request = urllib2.Request(url)
        response = urllib2.urlopen(request)
        body = response.read()
        # Update body here
        return HttpResponse(body, status=response.getcode(),
            content_type=response.headers['content-type']) 
```

您可能想看看[Django HTTP 代理](http://httpproxy.yvandermeer.net/)或其他类似的解决方案，它们基本上做同样的事情，尽管使用不同的 URL 处理方案，因为它们使用固定的目标 URL。

然后根据您的需要，您可能想要开发更高级的功能，例如：

*   将请求标头从客户端复制到`urllib2`请求，以便源站点接收正确的标头。
*   在对客户端的响应中重写 URL，以便它们也指向您的服务（这对于`href`,`src`和`action`标签来说应该很容易，在 JavaScript 中就不那么容易了）。
*   支持 POST 请求。

# c# - Thread.Sleep 不适用于 Windows 8 下的 Silverlight 5

> ID：16160574
> 
> 赞同：0
> 
> 时间：2013-04-23T03:45:39.697
> 
> 标签：c#, silverlight, windows-8, thread-sleep

**背景：**车辆动力学有一个发展，作为增加现实行为的尝试，计算结果是实时进行的，与现实生活1：1比例，即现实生活中的1秒=计算结果中的1秒。

**问题：**在 Windows XP/Vista/7 甚至 MacOS 下，一切都按预期运行，但是在 Windows 8 中，应用程序的运行速度（看起来是这样）正好慢了 2 倍。

**详细信息：** 延迟由

```
System.Threading.Thread.Sleep((Int32)time_delta) 
```

为time_delta，根据需要计算以匹配1:1的时间比例。

在 Windows 8 下，现实生活中需要 1 秒的时间需要 2 秒，但是我可以使用 time_delta/2.0f 但这似乎是一个肮脏的把戏。

**问题：**有没有适当的方法来解决这个问题？

**参考资料：** 我搜索了一下，发现好像是报的问题： [Missing .NET features in Metro style application？](https://stackoverflow.com/questions/7450532/missing-net-features-in-metro-style-application)

这个链接说[http://msdn.microsoft.com/en-us/library/d00bd51t.aspx](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)在 Windows 8 下支持 Thread.Sleep。

提前致谢。

* * *

**更新：**我错了，Windows 8 的延迟并不完全慢 2 倍，Sleep() 的分辨率似乎发生了巨大变化并且（至少在我的测试下）变化很大，所以我最终使用实时调整每个我检测到偏移量的时间，有点 CPU 密集型，但现在正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:32:00.363

您是否尝试使用 TimeSpan（例如 TimeSpan.FromSeconds(time_delta)）而不是 Int32？

# jquery - 使用 JQuery 插件进行 JQgrid 验证

> ID：16160576
> 
> 赞同：1
> 
> 时间：2013-04-23T03:46:06.300
> 
> 标签：jquery, jquery-plugins, jqgrid

我正在做一个使用 JQgrid 的项目。目前我正在使用以下策略验证导航网格的添加和编辑：

```
.navGrid('#pager',{edit:true,add:true,del:true},
            {//EDITAR
                jqModal:false,
                reloadAfterSubmit:true,
                savekey: [true,13],
                drag: true,
                closeOnEscape:true,
                closeAfterAdd:true,
                closeAfterEdit:true,
                url:"http://localhost/ProyectoNetbeans/CodeIgniter_2.1.3/index.php/Profesiones_controller/editData",

                beforeSubmit: function(postdata, formid){//valida que no halla errores en la insercion de datos
                    if (postdata.descripcion=="")
                    {
                        return [false,'error message 1'];
                    }
                    else if (postdata.descripcion.length>200)
                    {
                        return [false,'error message 2'];
                    }
                    else if ((revisarSiRepetido(postdata.descripcion))==true)
                    {
                         return [false,'error message 3'];
                    }
                    else
                    {
                        return [true,'EXITO']; // no error
                    }

                }

            }, 
```

在这里，我在 beforeSubmit 函数中验证表单数据。我想知道是否可以使用 JQuery 验证插件来执行此验证，或者是否有另一种方法比这个更好，因为这样我必须在网格更大时进行大量验证，并且该代码更容易出错，因此，如果有人对此提出建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:25:01.387

您确实需要使用`form`jQuery 验证插件。我相信您可以找到其他验证工具，但问题是与使用 jqGrid 验证相比，开销是否值得。

# android - 相机在Android应用程序上冻结

> ID：16160582
> 
> 赞同：1
> 
> 时间：2013-04-23T03:46:45.000
> 
> 标签：android, android-intent, android-camera

我目前正在尝试将相机集成到我的 android 应用程序中并将图片保存在我的设备上；但是，当我拍照时，我无法继续（该应用程序可以运行，但相机镜头冻结意味着我可以再拍一张照片并返回，但无法确认）。我想知道你们是否可以帮忙。请尽可能简单地解释这一点，因为我对 android 编程非常陌生。感谢大家！

```
public class PhotoCapture extends Activity {
int TAKE_PHOTO_CODE = 0;
public static int count=0;
public static File newfile;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photocapture);

Button capture = (Button) findViewById(R.id.takepicture);
capture.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

        ContextWrapper cw = new ContextWrapper(getBaseContext());
         newfile = cw.getDir("test.jpg", Context.MODE_PRIVATE);

        try {
            newfile.createNewFile();
        } catch (IOException e) {}       

        Uri outputFileUri = Uri.fromFile(newfile);

        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

      startActivityForResult(cameraIntent, TAKE_PHOTO_CODE);
    }
});
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == TAKE_PHOTO_CODE && resultCode == RESULT_OK) {

         uri = data.getData().toString();
        Log.d("CameraDemo", "Pic saved");

        Intent myview = new Intent(this, Finalpiece.class);
        startActivity(myview);

     }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:53:33.913

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
 <uses-permission android:name="android.permission.CAMERA"/> 
```

使用此权限之前...

```
private static final int REQ_CAPTURE_CAPTURE__IMAGE = 0;
    private String imagePath;

/**
     * Start camera activity.
     */
    protected void startCameraActivity() {
        String imageDirectory = Environment.getExternalStorageDirectory()
        + File.separator + "surbeyImg";
        File imageDirectory = new File(imageDirectory);

        if (!(imageDirectory.exists())) {
            imageDirectory.mkdir();
        }

        String imagePath = imageDirectory + File.separator + imgName+".jpg");   

        File file = new File(imagePath);   
        Uri outputFileUri = Uri.fromFile(file);

        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        intent.putExtra("outputFormat", Bitmap.CompressFormat.PNG.toString());
        startActivityForResult(intent, REQ_CAPTURE_CAPTURE__IMAGE);
    }

    protected void onActivityResult(int requestCode, int resultCode,
            Intent imageReturnedIntent) {

        switch (requestCode) {

        case REQ_CAPTURE_CAPTURE__IMAGE:

            if (resultCode == RESULT_OK) {
                Intent intentImg = new Intent(CameraDemo.this, ShowImg.class);             
                intentImg.putExtra("imagePath",imagePath);         
                startActivity(intentImg); 

            }

            break;

        default:
            break;

        }
    } 
```

在此之后使用此代码...谢谢

# git - 我如何要求提交中的问题以进行 git 签入？

> ID：16160584
> 
> 赞同：0
> 
> 时间：2013-04-23T03:47:12.580
> 
> 标签：git, jenkins, issue-tracking

是否有一个与 git（不是 github）集成的问题跟踪器，它需要提交消息中的问题？或者是否有另一种推荐的方法来跟踪开发人员经理使用的故事速度？

最理想的情况是，我希望我的开发团队中的用户只签入附加到问题（希望属于他们）的代码，这样我就可以跟踪 sprint 的故事速度。

[编辑：为 JIRA ( https://github.com/joyjit/git-jira-hook](https://github.com/joyjit/git-jira-hook) )找到了合适的解决方案。我想要一个完整的开源产品，因此对于 bugzilla 或其他问题跟踪器的类似解决方案会很棒。

# c++ - 在发布模式下使用 QtMultimedia 部署 Qt 应用程序

> ID：16160586
> 
> 赞同：0
> 
> 时间：2013-04-23T03:47:21.060
> 
> 标签：c++, qt, deployment, qt5

我正在使用 mingw47 开发一个 Qt 5.0 桌面应用程序。我在这个应用程序中使用 QtMultimedia 来录制和播放音频。我已经对其进行了调试，并且可以正常工作。当我尝试构建它以发布并运行可执行文件时，我无法播放通常可以在调试模式下播放的音频文件。在运行可执行文件之前，我添加了以下 dll：

D3D_Compiler_43.dll、
icudt49.dll、
icuin49.dll、
icuuc49.dll、
libEGL.dll、
libgcc_s_sjlj-1.dll、
libGLESv2.dll、
liblibmpeg2_plugin.dll、
libstdc++-6.dll、
libwinpthread-1.dll、
Qt5Core.dll、
Qt5Gui.dll、
Qt5Multimedia.dll、
Qt5Network.dll、
Qt5Widgets.dll、
Qt5Xml.dll、
插件/平台/（所有 dll）、
插件/媒体服务/（所有 dll）、
插件/播放列表格式（所有 dll）

可能有什么问题？或者我还缺少哪些其他 dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:25:17.690

更新：使用`windeployqt.exe`！它真的很好用。

[http://doc.qt.io/qt-5/windows-deployment.html#the-windows-deployment-tool](http://doc.qt.io/qt-5/windows-deployment.html#the-windows-deployment-tool)

> 使用 windeployqt 的最简单方法是将 Qt 安装的 bin 目录（例如 ）添加到 PATH 变量中，然后运行：
> 
> ```
> windeployqt <path-to-app-binary> 
> ```

* * *

当您在发布模式下运行应用程序时（当它工作时，从 Qt Creator 内部运行），执行[depends.exe](http://www.dependencywalker.com/)并将其指向应用程序。

记下 Qt 文件夹中引用的所有 dll。

如果您想花更多时间使用它，另一种方法是：

您可以通过尝试删除文件来手动解决问题，因为 Windows 不允许您在使用文件夹或 dll 时删除它。所以你可以去备份你的 Qt 安装，然后运行你的应用程序，确保它已经连接到它要使用的所有 dll，然后尝试删除 Qt 安装中的文件夹和文件。Windows 不允许您删除您的版本正在使用的文件。

如果您想知道，这也是 Windows 如何解析 dll 的：

[http://msdn.microsoft.com/en-us/library/7d83bc18(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7d83bc18(v=vs.80).aspx)

编辑：另外，您不需要在 exe 目录中创建名为 plugins 的文件夹。它应该是这样的：

Qt 4.x：

```
./myexe.exe
./QtCore.dll
./imageformats/qjpegd4.dll  // Note: there isn't a "plugins" folder here 
```

Qt 5.x：（取自[这里](http://qt-project.org/doc/qt-5.0/qtdoc/deployment-windows.html)）

```
The executable                   ./plugandpaint.exe
The Basic Tools plugin           ./plugins/pnp_basictools.dll
The ExtraFilters plugin          ./plugins/pnp_extrafilters.dll
The Qt Windows platform plugin   ./platforms/qwindows.dll
The Qt Core module               ./Qt5Core.dll
The Qt GUI module                ./Qt5Gui.dll
The Qt Widgets module            ./Qt5Widgets.dll 
```

同时运行`qDebug() << QApplication::libraryPaths()`，并记下在您的计算机上搜索 dll的[路径。](http://qt-project.org/doc/qt-5.0/qtcore/qcoreapplication.html#libraryPaths)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:53:22.493

列表中所有将导入库链接到应用程序的 DLL 都将由操作系统自动加载。如果其中任何一个丢失，您将看到一个对话框，告诉您它未能加载哪个 DLL。唯一看起来可能由应用程序手动加载的是**插件**。确保您告诉 QT 多媒体系统加载它们。还要确保检查多媒体管理器返回**的错误代码。**

鉴于您最近评论音频在调试模式下播放但不是在发布模式下播放，这很好地表明您将插件 DLL 放在错误的位置。当您从资源管理器或命令行启动应用程序时，`plugins`目录需要与应用程序位于同一目录中。您的目录结构应如下所示

```
c:\stackoverflow\myprogram.exe
c:\stackoverflow\plugins\platforms\(all dlls)
c:\stackoverflow\plugins\mediaservice\(all dlls)
c:\stackoverflow\plugins\playlistformats\(all dlls)
c:\stackoverflow\D3D_Compiler_43.dll
c:\stackoverflow\icudt49.dll

... other dll's here...

c:\stackoverflow\Qt5Network.dll
c:\stackoverflow\Qt5Widgets.dll
c:\stackoverflow\Qt5Xml.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:42:00.050

我找到了答案。现在我的应用程序有效。它可以在运行可执行文件时播放音频文件。

虽然在depends.exe中没有列出，但我们在使用QMediaPlayer时应该添加以下dll：

Qt5MultimediaWidgets
Qt5OpenGL

这是参考：[https ://bugreports.qt-project.org/browse/QTBUG-30172](https://bugreports.qt-project.org/browse/QTBUG-30172)

# python - urllib2.urlopen 上的编码问题

> ID：16160588
> 
> 赞同：0
> 
> 时间：2013-04-23T03:47:31.093
> 
> 标签：python, character-encoding, urllib2

这是我想做的事情：

1.  使用 urllib2 从给定的 url 读取内容
2.  使用 re 解析内容并将它们存储在列表中
3.  将列表保存到数据库

我在这里遇到的问题是：

我尝试通过以下方式从给定的 url 中读取内容：

```
req = urllib2.urlopen(forum_url, None, timeout=10)
url_content  = req.read() 
```

然后使用 re 解析 url_content 类似：

```
def parse_post_title(cls, content):
    url_pattern = "<a href=\"read.php\?tid=.*\" id=\".*\" class=\"subject fl\">(.*)</a>"
    title = ''
    m = re.search(url_pattern, content)
    # ......
    return title 
```

然后保存到数据库：

```
def make_insert_sql(self, post_list):
    insert_list = []
    for post_data in post_list:
        insert_str = u'("%s", "%s", "%s", "%s", %d, %d, "%s", "%s", %d, %d)' % (post_data.forum_name,
                                                                                post_data.sub_forum, 
                                                                                post_data.post_name, 
                                                                                post_data.xxx, 
                                                                                post_data.xxx, 
                                                                                post_data.xxx, 
                                                                                post_data.xxx, 
                                                                                post_data.xxx, 
                                                                                post_data.xxx,
                                                                                post_data.xxx)
        insert_list.append(insert_str)
    return ','.join(insert_list) 
```

如果 url_content 都说“英语”，那么它工作得很好，那么一切正常。

如果内容中有一些“中文”内容，那么 make_insert_sql 会崩溃，但我可以通过以下方式修复它：

```
url_content  = req.read().decode('gbk') 
```

但这一次，如果内容全是英文，那么它会崩溃。

崩溃信息如：

```
'ascii' codec can't decode byte 0xd3 in position 0: ordinal not in range(128) 
```

所以就像：

```
all english -- req.read() OK -- req.read().decode('gbk') - Crash
english + chinese -- req.read() crash -- req.read().decode('gbk') - OK
all chinese -- req.read() crash -- req.read().decode('gbk') - OK 
```

所以我在这里想知道的是如何知道我是否需要在运行时添加“decode('gbk')”部分？

任何建议将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:58:14.537

看看[漂亮的汤模块](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)。之前在这个网站上 也发布了一个类似的[问题，可能会有所帮助。](https://stackoverflow.com/questions/4092606/python-beautifulsoup-html-parsing-handle-gbk-encoding-poorly-chinese-webscra)

# ios - GSSendEvent - 注入触摸事件 iOS

> ID：16160589
> 
> 赞同：8
> 
> 时间：2013-04-23T03:47:37.313
> 
> 标签：ios, api, touch, private, iphone-privateapi

我想在 iPhone 中注入触摸事件。我通过网络套接字获取触摸事件的坐标。GSSendEvent 似乎是不错的选择。但是，它需要 GSEventRecord 作为输入之一。

有谁知道如何准备 GSEventRecord？我根据一些示例准备了它，但是在 GSSendEvent 调用后应用程序崩溃了。

感谢任何帮助。

```
-(void) handleMouseEventAtPoint:(CGPoint) point
{
static mach_port_t port_;

// structure of touch GSEvent
struct GSTouchEvent {
    GSEventRecord record;
    GSHandInfo    handInfo;
} ;

struct GSTouchEvent *touchEvent = (struct GSTouchEvent *) malloc(sizeof(struct GSTouchEvent));

bzero(touchEvent, sizeof(touchEvent));

// set up GSEvent
touchEvent->record.type = kGSEventHand;
touchEvent->record.windowLocation = point;
touchEvent->record.timestamp = GSCurrentEventTimestamp();
touchEvent->record.infoSize = sizeof(GSHandInfo) + sizeof(GSPathInfo);
touchEvent->handInfo.type = getHandInfoType(0, 1);
touchEvent->handInfo.pathInfosCount = 1;
bzero(&touchEvent->handInfo.pathInfos[0], sizeof(GSPathInfo));
touchEvent->handInfo.pathInfos[0].pathIndex     = 1;
touchEvent->handInfo.pathInfos[0].pathIdentity  = 2;
touchEvent->handInfo.pathInfos[0].pathProximity = 1 ? 0x03 : 0x00;
touchEvent->handInfo.pathInfos[0].pathLocation  = point;

port_ = GSGetPurpleSystemEventPort();

GSSendEvent((GSEventRecord*)touchEvent ,port_);

}
static GSHandInfoType getHandInfoType(int touch_before, int touch_now){
if (!touch_before) {
    return (GSHandInfoType) kGSHandInfoType2TouchDown;
}
if (touch_now) {
    return (GSHandInfoType) kGSHandInfoType2TouchChange;
}
return (GSHandInfoType) kGSHandInfoType2TouchFinal;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T02:08:50.353

**仅在 iOS 6 上测试**

你实际上是在正确的轨道上。问题是您必须弄清楚应该为这些变量分配什么值。

首先，您需要导入 GraphicsServices.h。然后，您可以使用您可以从[如何找到 IOS 5 及更高版本中最前面的应用程序的紫色端口中获得的端口尝试以下代码？](https://stackoverflow.com/questions/16156831/how-to-find-the-purple-port-for-the-front-most-application-in-ios-5-and-above/16157532#16157532).

我不是 iOS 专家，Apple 没有提供任何文档，所以我无法解释这里发生了什么。（它碰巧对我来说很好用。）

无论如何，您可以使用 xcode 调试模式来使用它来查看引擎盖下会发生什么。

```
struct GSTouchEvent * touchEvent = (struct GSTouchEvent*) &gsTouchEvent;
bzero(touchEvent, sizeof(touchEvent));
touchEvent->record.type = kGSEventHand;
touchEvent->record.subtype = kGSEventSubTypeUnknown;
touchEvent->record.location = point;
touchEvent->record.windowLocation = point;
touchEvent->record.infoSize = sizeof(GSHandInfo) + sizeof(GSPathInfo);
touchEvent->record.timestamp = GSCurrentEventTimestamp();
touchEvent->record.window = winRef;
touchEvent->record.senderPID = 919;
bzero(&touchEvent->handInfo, sizeof(GSHandInfo));
bzero(&touchEvent->handInfo.pathInfos[0], sizeof(GSPathInfo));
GSHandInfo touchEventHandInfo;
touchEventHandInfo._0x5C = 0;
touchEventHandInfo.deltaX = 0;
touchEventHandInfo.deltaY = 0;
touchEventHandInfo.height = 0;
touchEventHandInfo.width = 0;
touchEvent->handInfo = touchEventHandInfo;
touchEvent->handInfo.type = handInfoType;
touchEvent->handInfo.deltaX = 1;
touchEvent->handInfo.deltaY = 1;
touchEvent->handInfo.pathInfosCount = 0;
touchEvent->handInfo.pathInfos[0].pathIndex = 1;
touchEvent->handInfo.pathInfos[0].pathIdentity = 2;
touchEvent->handInfo.pathInfos[0].pathProximity = (handInfoType == kGSHandInfoTypeTouchDown || handInfoType == kGSHandInfoTypeTouchDragged || handInfoType == kGSHandInfoTypeTouchMoved) ? 0x03: 0x00;
touchEvent->handInfo.x52 = 1;
touchEvent->handInfo.pathInfos[0].pathLocation = point;
touchEvent->handInfo.pathInfos[0].pathWindow = winRef;
GSEventRecord* record = (GSEventRecord*) touchEvent;
record->timestamp = GSCurrentEventTimestamp();
GSSendEvent(record, port); 
```

要使用此代码，您必须多次调用它。对于一键式，有触地、触拖和触上。

另请注意，当触摸向上时 pathProximity 为 0。

据我记得，winRef 无关紧要。

希望这可以帮助。

编辑：根据 Bugivore 的评论，问题是：

> 我通过 malloc 分配 touchEvent 的方式是错误的。应该按照 EntryLevelDev 显示的那样完成 - “static uint8_t handJob[sizeof(GSEventRecord) + sizeof(GSHandInfo) + sizeof(GSPathInfo)];”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T10:46:43.567

EntryLevelDev 的回答是正确的，但有些价值并不那么重要。我从其他地方得到了以下代码，并做了一些尝试和错误，这是我的代码（适用于最新的 ios6）。

现在有人在为 IOS7 做这个吗？我无法让它工作。在此处查看我的帖子：[在 IOS7 中不推荐使用 GraphicsServices 中的 GSCopyPurpleNamedPort(appId) 时，替代方法是什么？](https://stackoverflow.com/questions/17573572/gscopypurplenamedportappid-in-graphicsservices-is-deprecated-in-ios7)

```
static int prev_click = 0;

if (!click && !prev_click)
{
    //which should never enter
    NSLog(@"***error, postHandEvent cancel");
    return;
}

CGPoint location = CGPointMake(x, y);

struct GSTouchEvent {
    GSEventRecord record;
    GSHandInfo    handInfo;
} * event = (struct GSTouchEvent*) &touchEvent;
bzero(touchEvent, sizeof(touchEvent));

event->record.type = kGSEventHand;
event->record.windowLocation = location;
event->record.timestamp = GSCurrentEventTimestamp();
//NSLog(@"Timestamp GSCurrentEventTimestamp: %llu",GSCurrentEventTimestamp());
event->record.infoSize = sizeof(GSHandInfo) + sizeof(GSPathInfo);
event->handInfo.type = getHandInfoType(prev_click, click);

//must have the following line
event->handInfo.x52 = 1;

//below line is for ios4
//event->handInfo.pathInfosCount = 1;

bzero(&event->handInfo.pathInfos[0], sizeof(GSPathInfo));
event->handInfo.pathInfos[0].pathIndex     = 2;
//following 2 lines, they are by default
event->handInfo.pathInfos[0].pathMajorRadius = 1.0;
event->handInfo.pathInfos[0].pathPressure = 1.0;

//event->handInfo.pathInfos[0].pathIdentity  = 2;
event->handInfo.pathInfos[0].pathProximity = click ? 0x03 : 0x00;
//event->handInfo.pathInfos[0].pathProximity = action;
event->handInfo.pathInfos[0].pathLocation  = location;

// send GSEvent 
GSEventRecord *event1 = (GSEventRecord*) event;
sendGSEvent(event1); 
```

# class - 试图用标题链接两个 cpp 文件

> ID：16160590
> 
> 赞同：0
> 
> 时间：2013-04-23T03:47:40.313
> 
> 标签：class, visual-c++, header, linker-errors

我正在尝试从另一个 cpp 文件中的 cpp 文件（带有函数列表）调用函数，我正在使用头文件在两个 cpp 文件中设置函数原型，我的问题是我得到了这个LNK2019 错误。我不知道我做错了什么。我一直在几个变体之间来回走动，根据我读过的内容，当前的一个似乎是最正确的。我已经为此工作了几个小时，阅读了一堆线程，但似乎没有任何东西可以解释这个问题，我正在使用 microsoft visual studio 2012

这是头文件 Rectangle.h

```
#pragma once
class Rectangle
{
private:
    int width, height; 
    double gravWidth, gravHeight;
public:
    Rectangle();
    double getAreaBig();
    double getAreaSmall();
    int getPerimeter();
    void getLength(int b);
    void getWidth(int a);
    int setLength();
    int setWidth();

    ~Rectangle();
}; 
```

这是包含函数 Rectangle.cpp 的 cpp 文件

```
#include <iostream>
#include "Rectangle.h"

using namespace std;

Rectangle::Rectangle()
{
    width = 1;
    height = 1;
    gravWidth = .5;
    gravHeight = .5;
}
double Rectangle::getAreaBig ()
{
    return double ((width * height) - (gravWidth *  gravHeight));
}

double Rectangle::getAreaSmall()
{
    return ((gravWidth) * ( gravHeight));
}

int Rectangle::getPerimeter()
{
    return (2 * (width + height));
}

void Rectangle::getLength(int b)
{
    height = b;
    gravWidth = (1/2 * width);
}
void Rectangle::getWidth(int a)
{
    width = a;
    gravHeight = (1/2 * height);
}

int Rectangle::setLength()
{
    return height;
}
int Rectangle::setWidth()
{
    return width;
} 
```

接下来是app.cpp文件，这是我得到错误的地方，斜体是错误似乎也指向的地方

```
#include <iostream>
#include "Rectangle.h"
#include <fstream>
#include <iomanip>
#include <cstdlib>
#include <cmath>
#include <string>
#include <sstream>
#include <cstddef> 

using namespace std;

int main ()
{
    int const  WIDTH = 10;
    setprecision(2);

    int length = 0;
    int width = 0;

    cin >> width;
    cin >> length;

    Rectangle garden;
    Rectangle gravel;

    garden.getLength(length);
    garden.getWidth(width);

    cout << "Length of lawn: " << garden.setLength() << "Width of lawn: " << garden.setWidth();
    cout << "Cost of grass: " << garden.getAreaBig();
    cout << "Length of gravel: ";
    cout << "Width of gravel: ";
    cout << "Cost of gavel: ";
    system ("pause");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:23:12.987

我看到的第一件事是您没有实例化矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:24:10.443

怎么定义

> 〜矩形（）；

某处？如果你的析构函数不做任何事情，你可以在头文件中提供一个空的主体。

> 〜矩形（）{};

（以防万一，将其设为虚拟，这始终是一个好习惯。）

# java - JTable通过输入第一个单元格值加载行

> ID：16160594
> 
> 赞同：0
> 
> 时间：2013-04-23T03:48:03.783
> 
> 标签：java, swing, jtable, abstracttablemodel

如何通过输入第一个单元格值来加载行数据，例如 watchList JTable，第一列是股票代码，因此当我输入 F 符号时，我将获得与股票相关的详细信息，如名称、最后价格、出价和问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:17:00.820

您可以`TableModelListener`在`TableModel`. 当模型中的数据发生更改时，将触发一个事件。如果第 0 列中的数据发生更改，则加载该行的其余数据。

# android - Android：按下按钮以快速重置活动会使程序崩溃

> ID：16160595
> 
> 赞同：2
> 
> 时间：2013-04-23T03:48:18.627
> 
> 标签：android, button, android-activity, crash, onclicklistener

我设置了一个按钮来重置活动。当我按得太快太多次时，它不仅会使活动排队（就像我按回时，还有另一个活动实例）并且可能崩溃。我能做些什么来防止这些事情发生吗？

我在 onClick 方法中使用的代码：

```
Intent intent = getIntent();
overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
finish();
overridePendingTransition(0, 0);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T11:48:25.403

**尝试这个**

```
btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                                btn.setEnabled(false);
                Intent intent = getIntent();
                                startActivity(intent);
                                finish();

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T05:26:50.967

您可以使用**try/catch**来确保不会发生任何崩溃，也可以使用**recreate()**方法重新启动您的活动：

```
 try{
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
               button.setEnabled(false);

                recreate();

               button.setEnabled(true);
            }
        });
    }catch (Exception e ){
        Log.e("TAG",e.getMessage());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-23T05:14:30.000

或者只是简单地使用

```
btn.setOnClickListener(new OnClickListener()
{
    @Override
    public void onClick(View v) {
        btn.setEnabled(false);
        //your code here
        btn.setEnabled(true);
    }
} 
```

# graph - 如何从 jGraphT 的图中随机选择一个顶点或边

> ID：16160597
> 
> 赞同：0
> 
> 时间：2013-04-23T03:48:22.747
> 
> 标签：graph, data-mining, prediction, jgrapht

我创建了一个带有一组边的图形（4000K 边和 4K 节点）。现在我想从语料库中提取 10% 的边来创建训练和测试数据集。

我想随机选择一条边，验证这条边的顶点是否有一条带有随机顶点的边。如果是这样，我将在图中删除该边并将该边写入测试文件中。因此，稍后我将使用一些相似性函数来预测测试文件的边缘。

逻辑是我试图预测 A->C，给定 A->B 和 B->C。

现在的问题是，我无法在 JGraphT 中随机选择一条边并随机选择一个顶点。我的顶点名称是一些带有随机数的字符串。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:54:23.980

有一种可能。先看例子：

```
DirectedGraph<String, DefaultEdge> graph = new DefaultDirectedGraph<String, DefaultEdge>(DefaultEdge.class);
Object[] vertexSet = graph.vertexSet().toArray();
Object[] edgeSet = graph.edgeSet().toArray();
String someRndNode = (String) vertexSet [ getSomeRandomNumberBetween(0, vertexSet.length)];
DefaultEdge someRndEdge = (DefaultEdge) edgeSet [ getSomeRandomNumberBetween(0, edgeSet.length)]; 
```

您只需获取图形的一组边和节点。根据数组确定一个随机数。从中取出你需要的东西。

# prolog - 如何检查一个列表的值是否是序言中另一个列表的三倍？

> ID：16160598
> 
> 赞同：0
> 
> 时间：2013-04-23T03:48:28.987
> 
> 标签：prolog

我刚刚在考试中遇到了这个 Prolog 问题，我很确定我没有做对。

我必须定义三元组（List1，List2），例如三元组（[1,2,3]，[3,6,9]）和三元组（[2,4]，[6,12]）是真的。

我的尝试是这样，但我怀疑它不起作用......

```
triple([],[]).
triple([H1|T1],[H2|T2]) :-
    triple(T1,T2),
    H1 = H2 * 3. 
```

有人知道正确的解决方案吗？（注意，这不是作业，只是对考试问题感到好奇。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:03:52.540

*如果*我们可以限制为整数列表，我们可以使用库（[clpfd](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.7%27,swi%28%27/doc/Manual/clpfd.html%27%29%29)）：

```
?- [library(clpfd)].
?- [user].
|: triple(X, Y) :- maplist(tri, X, Y).
|: tri(X, Y) :- X * 3 #= Y.
|: % user://1 compiled 0,13 sec, 5 clauses
true.

?- triple([2,X,Y],[Z,9,12]).
X = 3,
Y = 4,
Z = 6. 
```

为了处理浮点表达式，有库（[clpr](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.8%27,swi%28%27/doc/Manual/clpqr.html%27%29%29)）：

```
?- [library(clpr)].
?- [user].
|: triplef(X, Y) :- maplist(mult(3), X, Y).
|: mult(F,X,Y) :- {X * F = Y}.
|: % user://3 compiled 0,27 sec, 79 clauses
true.

?- triplef([2,X,Y],[Z,9,12]).
X = 3.0,
Y = 4.0,
Z = 6.0 . 
```

*通过可重复使用*的mult/3 ，我对triplef/3 的编码比triple/3 好一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:26:23.853

当您想检查一个表达式的计算结果是否与另一个表达式的值（和类型）相同时，请使用`is/2`，而不是 unification `=/2`。

所以而不是

```
H1 = H2 * 3 
```

它应该是：

```
H2 is H1 * 3 
```

[您似乎也对在哪一边乘以 3 感到有些困惑。]

请注意，它[`is/2`](http://www.swi-prolog.org/pldoc/doc_for?object=%28is%29/2)被声明为`-Number is +Expr`，因此表达式`H1 * 3`必须在右侧。

请注意，`is/2`还将检查 的特定类型[`number`](http://www.swi-prolog.org/pldoc/doc_for?object=number/1)，可以是`integer`或`float`。因此，即使值相等，当一侧为`float`另一侧时，统一也会失败。`integer`

```
quad([],[]).
quad([H1|T1],[H2|T2]) :-
    triple(T1,T2),
    H2 is H1 * 4. 
```

`quad([0.25], [1])`将返回`false`。

如果要比较 的**值**，`number`无论是`integer`还是`float`，都使用[`=:=/2`](http://www.swi-prolog.org/pldoc/doc_for?object=%28%3D%3a%3D%29/2)运算符。

```
H2 =:= H1 * 3 
```

或者

```
H1 * 3 =:= H2 
```

由于`=:=/2`被声明为`+Expr1 =:= +Expr2`，它在运算符的两侧提供了更多的自由度（两侧都可以是表达式，而不是 中的只有一侧`is/2`）。但是，它还要求在评估时双方都实例化。

简而言之，该`is`版本将允许您`A`在`triple([1,2,3],A).`. 另一方面，`=:=`版本将返回`true`（`triple([1],[3.0]).`值比较），但仅限于检查。

# cuda - 如何在 cudaPitchedPtr 类型数据中使用数组

> ID：16160599
> 
> 赞同：0
> 
> 时间：2013-04-23T03:48:31.013
> 
> 标签：cuda, gpu

我在尝试使用数据类型 cudaPitchedptr 中的数组时遇到了问题。我将数据从主函数传输到全局函数并打印值。但是，当我在 cudaMemset3D 中将值设置为 12 时，打印的结果为 0.0000。附上我的代码。如果有人可以帮助我，我真的很感激。

```
 #include "cuda_runtime.h"
 #include "device_launch_parameters.h"
 #include "cuPrintf.cu"
 #include "stdio.h" 
 __global__ void printtest(double devptr[])
{

printf("%f\n",devptr[1]);
}

int main()
{

int width=191, height=192, depth=192;
cudaExtent extent= make_cudaExtent( width*sizeof(double),height,depth);
cudaPitchedPtr Ex;
cudaMalloc3D(&Ex,extent);

cudaMemset3D(Ex,12 ,extent);

printtest<<<1,1>>>( (double*) Ex.ptr);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:34:44.240

问题是[cudaMemset3D](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g35171e821992f71d3c50f17032e079dc)用于将范围内的每个*字节*设置为一个值。说明中注意：

> value- 为指定内存的每个字节设置的值

因此，您将分配区域中的每个字节设置为 12（十进制）。然后，您连续获取其中的 8 个字节，并尝试将其作为双精度浮点类型进行解释。你会得到不是你期望的结果。

如果你想看到一些有意义的东西，那么在你的之后`cudaMalloc3D`，而不是`cudaMemset3D`，插入这个代码：

```
 double myval = 1.3579f;  //or whatever value you want to see
  double *hostdata;
  hostdata = (double *)malloc(width*sizeof(double)* height*depth);
  if (hostdata == 0) {printf("malloc fail"); return 1;}
  hostdata[1] = myval;
  cudaMemcpy3DParms p = {0};
  p.srcPtr = make_cudaPitchedPtr(hostdata, width*sizeof(double), width, height);
  p.dstPtr = Ex;
  p.extent = extent;
  p.srcPos = make_cudaPos(0,0,0);
  p.dstPos = make_cudaPos(0,0,0);
  p.kind=cudaMemcpyHostToDevice;
  cudaMemcpy3D(&p); 
```

我还建议在代码中的每次 api 调用和内核启动后使用[cuda 错误检查。](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)

[您可能也对此](https://stackoverflow.com/questions/16119943/how-and-when-should-i-use-pitched-pointer-with-the-cuda-api)问题/答案感兴趣。

# html - 更改页面宽度颜色背景

> ID：16160600
> 
> 赞同：-1
> 
> 时间：2013-04-23T03:48:40.590
> 
> 标签：html, css

我出于非传统原因追求 HTML。我认为它在学术论文中提供了比 MS Word 或 LaTeX 更合适的画布，因为它为作者提供了更好的交流方式。我正在尝试编写一种可用于符合传统 APA 6 指南的学术论文的格式。

我想使用 index.html 文件或 style.css （我不知道哪个更合适）使页面看起来像 8.5 宽的纸（确切的尺寸并不重要），而不是全宽浅灰色背景。这是在 wordpress 22 主题中完成的，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/mPxbU.png)

如何通过更改 index.html 文件（如下所示）来复制这种感觉，或者我可能需要在 style.css 文件中添加一些内容？具体来说，我如何才能在顶部带有“页面”的彩色背景？

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
  </head>
  <body>
    Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.
  </body>
</html> 
```

我尝试从 22 处窃取但无法理解，因为文件是 php，而且我不知道 style.scc 文件中的内容在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:08:21.230

这是一个简单的例子......具体的规则很容易改变，但应该给你一个想法。`div.container`基本上，您在 body ( )的子元素上设置小于 100% 的宽度。然后，将`margin-left`和`margin-right`值设置为`auto`以使其水平居中。The `height:400px`and the `margin-top`and `margin-bottom`set to`1em`是任意值。您的页面内容只需要在`div.container`元素内构建......您的人造页面。

演示：http: [//jsfiddle.net/ZXdY8/](http://jsfiddle.net/ZXdY8/)

**CSS**

```
body {
    background: #efefef;
}
.container {
    width: 90%;
    height: 400px;
    margin: 1em auto;
    background: #FFF;
}
.container p {
    padding: 1em;
} 
```

**HTML**

```
<body>
   <div class="container">
      <p>Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.</p>
   </div>
</body> 
```

# jquery - 容器中三个可调整大小的列

> ID：16160601
> 
> 赞同：0
> 
> 时间：2013-04-23T03:48:40.857
> 
> 标签：jquery, html, css, resize

所以我有一个容器，里面有三列需要调整大小。容器本身最终也需要调整大小，但现在它可以是静态的，只要里面的列在拖动时可以灵活。

我认为我的想法是正确的，但它并不完全存在。调整大小时，某些部分会正确移动，但其他部分会跳到后面或正确调整部分大小，然后开始向后移动。你可以在这里看到我到目前为止，抓住中间手柄并尝试调整大小：

[http://jsbin.com/arulel/1/edit](http://jsbin.com/arulel/1/edit)

任何帮助将不胜感激，它只需要在 Firefox 中工作。如果可能的话，最好不要额外的插件。

这里也是代码：

```
 <div id="container">
    <div id="col1" class="col">
      <p>"Lorem ipsum.."</p>
    </div>
    <div class="resizer first"></div>
    <div id="col2" class="col">
      <p>"Lorem ipsum.."</p>
    </div>
    <div class="resizer second"></div>
    <div id="col3" class="col">
      <p>"Lorem ipsum..."</p>
    </div>
  </div> 
```

CSS：

```
#container {
  background: none no-repeat 0 0 scroll #aaa;
  height: 600px;
  border-radius: 0 0 6px 6px;
  width: 700px;
  position: relative;
}

.col {
  height: 100%;
  position: absolute;
  z-index: 8000;
  padding: 0 10px;
}

.first {
  width: 4px;
  height: 100%;
  position: absolute;
  left: 33.33%;
  background-color: white;
  z-index: 9000;
}

.second {
  width: 4px;
  height: 100%;
  position: absolute;
  right: 33.33%;
  background-color: white;
  z-index: 9000;
}

.resizer:hover {
  cursor: col-resize;
}

#col1 {
  background: none no-repeat 0 0 scroll #444;
  border-radius: 0 0 0 6px;
  left: 0;
  right: calc(66.66% - 4px);
}
#col2 {
  background: none no-repeat 0 0 scroll #111;
  left: calc(33.33% + 4px);
  right: calc(33.33% - 4px);
  color: white;
}
#col3 {
  background: none no-repeat 0 0 scroll #777;
  border-radius: 0 0 6px 0; 
  left: calc(66.66% - 4px);
  right: 0;
} 
```

Javascript/jQuery：

```
$(document).ready(function(){

  $(".first").on("mousedown", function(e){
    mousedownFirst = true;
  });
  $(".second").on("mousedown", function(e){
    mousedownSecond = true;
  });
  $("#container").on("mouseup", function(e){
    mousedownFirst = false;
    mousedownSecond = false;
  });
  $("#container").on("mousemove", function(e){

    parentOffset = $(this).offset();

    if(mousedownFirst){
      $(".first").css("left", e.pageX - parentOffset.left);
      $("#col1").css("right", e.pageX - parentOffset.left);
      $("#col2").css("left", e.pageX - parentOffset.left);      
    }
    if(mousedownSecond){
      $(".second").css("left", e.pageX - parentOffset.left);
      $("#col2").css("right", e.pageX - parentOffset.left);
      $("#col3").css("left", e.pageX - parentOffset.left);
    }

  });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:25:21.320

我知道你说过你不想使用插件，但我强烈*推荐*这个给你。

首先，创建一个简单的表格标记：

```
<table id='table1' class='resizable'>
<tr>
    <th width='10%' onclick='alert("Bow!!! Do not be afraid!");'>cell 11</th>
    <th width='20%'>cell 12</th>
    <th width='40%'>cell 13</th>
</tr>
<tr>
    <td>cell 21</td>
    <td>cell 22</td>
    <td>cell 23</td>
</tr>
<tr>
    <td>cell 31</td>
    <td>cell 32</td>
    <td>cell 33</td>
</tr>
</table> 
```

`<head>`然后，只需在标签中包含以下脚本：

```
http://bz.var.ru/comp/web/resizable-tables.js 
```

# 实时预览：

[**单击此处查看上述代码的实时预览**](http://bz.var.ru/comp/web/resizable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T21:19:31.227

如果您不想使用插件，则需要仔细查看您的 Javascript。您在同一个元素上左右混合，这似乎不起作用。我不会为你解决整个事情，因为那不是重点，但我可以为你指出正确的方向（反正我没有解决整个事情）。

这是我的编辑：http: [//jsbin.com/arulel/15/edit](http://jsbin.com/arulel/15/edit)

我所做的只是改变这个：

```
$("#col1").css("right", e.pageX - parentOffset.left); 
```

对此：

```
 $("#col1").css("width", e.pageX - parentOffset.left); 
```

结果似乎已经好很多了。这会将第一列的宽度调整为与到第二列开头的距离一样宽。为了让这个想法充分发挥作用，您需要花一些时间来计算宽度和一些数学来计算它。

如果您选择不走这条路，我建议您使用插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:27:04.833

您可以使用 jQuery UI resizabble

[请参阅此处](https://stackoverflow.com/questions/3628194/how-to-resize-only-horizontally-or-vertically-with-jquery-ui-resizable)的堆栈溢出问题以获取更多说明

[这里](http://jqueryui.com/resizable/)是 jQuery resizable 的示例和它的[API 文档](http://api.jqueryui.com/resizable/)

# c# - 将视频从 VB 代码隐藏动态加载到 Flowplayer

> ID：16160609
> 
> 赞同：1
> 
> 时间：2013-04-23T03:49:53.463
> 
> 标签：c#, asp.net, vb.net, flowplayer

我有页面加载（VB）request.querystring，并希望使用查询字符串结果加载 Flowplayer。我不知道如何从代码隐藏中的查询字符串中获取值到 flowplayer。有什么建议么？

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim videoName As String = Request.QueryString("FileName")
    Dim thumb As String = Request.QueryString("Thumb")
End Sub

<div data-swf="http://mywebsite.com/player/flowplayer.swf" class="flowplayer play-button"
  data-ratio="0.416" data-embed="false">
  <video poster="NEED QUERYSTRING 'THUMB' VALUE HERE">         
     <source type="video/mp4" src="NEED 'VIDEONAME' VALUE HERE"/>         
  </video>      
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:02:08.953

您应该能够通过使用获取表单中的查询字符串值`Page.Request.QueryString`

**例子**

```
<div data-swf="http://mywebsite.com/player/flowplayer.swf" class="flowplayer play-button"
  data-ratio="0.416" data-embed="false">
  <video poster="<% Page.Request.QueryString['Thumb'] %>">         
     <source type="video/mp4" src="<% Page.Request.QueryString['FileName'] %>"/>         
  </video>      
</div> 
```

# database-design - 如何存储画笔描边信息

> ID：16160616
> 
> 赞同：0
> 
> 时间：2013-04-23T03:50:35.097
> 
> 标签：database-design, data-structures, html5-canvas

我将开发一个模拟 MS Paint 但在网络上运行的演示应用程序 (HTML5)。目前我已经实现了画笔功能（与 MS Paint 完全一样），但我想将每个画笔描边存储在数据库中。但是我还没有找到存储笔触的数据结构。你们认为一系列连续点（x，y）可以保存笔触信息吗？

```
class point
{
    float x, y;
}

class brush 
{
   List<point> data;
} 
```

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:28:48.147

是的，保存积分是一个很好的方法。

请记住，每行的第一个点是 context.moveTo。然后，您可以使用 context.lineTo 轻松重播剩余的笔画。

我假设您也需要每个笔触的颜色和宽度信息。

这是一个起始模式：

```
table: Points
pointId int [primary key]
strokeID int, [key to table Strokes]
pointX int,
pointY int

table: Strokes
strokeId int, [primary key]
fillStyle varchar,
strokeStyle varchar,
lineWidth int 
```

# json - 如何正确地将 json 结果附加到选择选项

> ID：16160619
> 
> 赞同：3
> 
> 时间：2013-04-23T03:50:36.283
> 
> 标签：json, jquery

如何正确地将 json 结果附加到选择选项，

示例 json 数据

![在此处输入图像描述](https://i.stack.imgur.com/TYRQg.png)

阿贾克斯代码：

```
$.ajax({
        url: 'sessions.php',
        type: 'post',
        datatype: 'json',
        data: { from: $('#datepicker_from').val().trim(), to: $('#datepicker_to').val().trim() },
        sucess: function(data){
            var toAppend = '';
            //if(typeof data === 'object'){
                for(var i=0;i<data.length;i++){
                    toAppend += '<option>'+data[i]['id']+'</option>';
                }
            //}
            $('#sessions').append(toAppend);
        }
    }); 
```

html代码：

```
<p>Sessions: 
<select id="sessions"></select> 
```

我已经设置为我的 php 文件

```
header("Content-Type: application/json"); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T03:54:44.680

用于**`[$.each](http://api.jquery.com/jQuery.each/)`**遍历从 ajax 调用收到的 JSON 数组。

注意：- 的拼写`success`，你已经写了`sucess`。

```
 success: function(data){
            var toAppend = '';
           $.each(data,function(i,o){
           toAppend += '<option>'+o.id+'</option>';
          });

         $('#sessions').append(toAppend);
        } 
```

您可以直接在每个循环内附加到 DOM，但最好与字符串连接，然后稍后再添加到 DOM。***这是一个更便宜的操作，因为在这种情况下您只访问 DOM 一次***。不过，这在某些复杂的场景中可能不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-28T04:31:13.963

```
success: function(data) {
     var options = "";
     for (var i = 0; i < data.length; i++) {
         options += "<option>" + data[i].id + "</option>";
     }
     $("#sessions").html(options);
 } 
```

如果您的响应是多维数组，请尝试如下

```
success: function(data) {
    var options = '';
    for (var i = 0; i < data.length; i++) {
        for (var j = 0; j< data[i].length; j++){
            options += '<option value="' + data[i][j].product_id + '">' + data[i][j].name + '</option>';
        }
    }
    $("#products").html(options);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T03:56:04.693

我希望这会帮助你追加

```
for(i=0; i<data.length; i++) {
    $('#sessions').append("<option value="+data[i].id+"/option>");                      
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-28T06:20:58.343

让你在参数中接收json数据`data`

```
var obj = JSON.parse(data);
for(i=0; i<data.length; i++) {
    $('#sessions').append("<option value="+obj[i].id+">"+obj[i].name+"</option>");                      
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-19T12:43:50.067

请尝试以下代码，这可能会对您有所帮助。

我在 Spring Boot MVC 中使用的这些代码

JSON数据

```
[{"name":"Afghanistan","code":"af"},
{"name":"Albania","code":"al"},
{"name":"Algeria","code":"dz"}] 
```

jQuery 代码

```
var jsonData = '${restData}';
var obj = JSON.parse(jsonData);
for (i in obj) {
$('#selectList').append(new Option(obj[i].name, obj[i].code));
} 
```

# javascript - JS/jQuery: 帮助修改代码替换4张图片

> ID：16160622
> 
> 赞同：-2
> 
> 时间：2013-04-23T03:50:52.513
> 
> 标签：javascript, jquery, image

所以我有这段代码（如下）将替换**一张**图片。我需要对此进行修改，以便它将替换**四个单独的图像**，并在单击按钮（图像）后触发。

有人可以帮我做到这一点，也可以让它在点击按钮后触发（图片）。谢谢 x

这是我的代码：

```
<!DOCTYPE html>
 <html>
  <head>
        <meta charset="UTF-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript" charset="UTF-8"></script>

        <script type="text/javascript">

                $(document).ready(function() {

            function callback(imageLoader){

                $('#image').attr('src', imageLoader.nextImage());

            }

            function ImageLoader(images){
                this.images = images;
                this.current = 0;

                this.nextImage = function(){
                    this.current = (this.current+1) % this.images.length;
                    return this.images[this.current];;
                }
            }

            imageLoader = new ImageLoader(['img/wallpaper/2.png', 'img/wallpaper/3.png', 'img/wallpaper/6.png', 'img/wallpaper/10.png']);

            });
        </script>
    </head>

    <body>

        <img id="image" src="img/wallpaper/1.png">

    </body>
</html> 
```

如果有帮助，这是我的[设计](http://i.imgur.com/p3bS0TU.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:09:21.080

很难理解你在这里想要做什么，但它似乎是一种交换一些图像的复杂方法？也许更像这样的事情会更容易：

```
$(document).ready(function() {
    var images = ['img/wallpaper/2.png', 
                  'img/wallpaper/3.png', 
                  'img/wallpaper/6.png', 
                  'img/wallpaper/10.png'
                 ];

    $('#buttonID').on('click', function() {
        $('.image').attr('src', function(i, src) {
            return images[i];
        }); 
    });
}); 
```

示例 HTML：

```
<body>
    <img class="image" src="img/wallpaper/1.png" />
    <img class="image" src="img/wallpaper/4.png" />
    <img class="image" src="img/wallpaper/7.png" />
    <img class="image" src="img/wallpaper/9.png" />
    <input type="button" id="buttonID" value="Change images" />
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:10:37.517

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            var imageLoader;

            function ImageLoader(images)
            {
                this.images = images;
                this.current = 0;

                this.nextImage = function()
                {
                    this.current = (this.current+1) % this.images.length;
                    return this.images[this.current];
                }
             }

             $(document).ready(function()
             {
                 imageLoader = new ImageLoader(
                 [
                     'img/wallpaper/2.png',
                     'img/wallpaper/3.png',
                     'img/wallpaper/6.png',
                     'img/wallpaper/10.png'
                 ]);

                 $('#change').on('click', function()
                 {
                     $('#image').attr('src', imageLoader.nextImage());
                 });
            });
        </script>
    </head>
    <body>
        <img id="image" src="img/wallpaper/1.png">
        <input type="button" id="change" value="Change" />
    </body>
</html> 
```

# windows-phone-7 - 如何在导航 windows 手机后停止重新加载页面？

> ID：16160627
> 
> 赞同：0
> 
> 时间：2013-04-23T03:51:24.477
> 
> 标签：windows-phone-7

我对 Page1 的主页调用。我将 webbrowser 控件添加到 Page1。当网络浏览器加载数据完成后，我进入后台。然后，我返回我的第 1 页，网络浏览器重新加载数据。如何停止重新加载呢？

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {

        base.OnNavigatedTo(e);
        _mlink = NavigationContext.QueryString["link"];
        web.Navigate(new Uri(_mlink, UriKind.Absolute));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:10:24.523

您可以使用该[`NavigationEventArgs.NavigationMode`](http://msdn.microsoft.com/en-AU/library/system.windows.navigation.navigationeventargs.navigationmode%28v=vs.95%29.aspx)属性来确定导航来自哪个方向。

可以找到可用的选项[此处 (MSDN)](http://msdn.microsoft.com/en-AU/library/system.windows.navigation.navigationmode%28v=vs.95%29.aspx)找到可用的选项，但已列出，它们是：

*   新的
*   后退
*   向前
*   刷新

所以我的建议是确定您想要在哪个值上导航 Web 浏览器控件（我猜`New`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:36:45.393

NavigationEventArgs.NavigationMode 仅适用于 windows phone 8。所以像这样编辑代码。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {

        base.OnNavigatedTo(e);
        _mlink = NavigationContext.QueryString["link"];
        if(web.Source.AbsolutePath!=_mlink)
             web.Navigate(new Uri(_mlink, UriKind.Absolute));
    } 
```

# clojure - clojure.tools.logging EvalReader 使用？

> ID：16160633
> 
> 赞同：3
> 
> 时间：2013-04-23T03:52:11.490
> 
> 标签：clojure

我认为这是`clojure/tools.logging`. 我有以下`db.clj`文件。它做什么并不重要。重要的是，为了安全起见，我禁用了`*read-eval*`. 我调用`db/start`没有问题。但是，如果我取消注释`#_(log/info "Failed to bootstrap")`表单，则会引发`EvalReader not allowed`错误。`log/info`我已经为通话尝试了各种组合。如果它在`try`街区之外，那很好。在`try`块内的任何地方，无论是在正文中`catch`，还是在 中`finally`，都会引发此异常。但是，当我在其他地方环绕时`try`，`log/info`没关系。

是什么赋予了？

```
(ns extenium.db
  (:require [clojure.tools.logging :as log]
            [clojure.java.io :as io])
  (:import com.thinkaurelius.titan.core.TitanGraph
           com.thinkaurelius.titan.core.TitanFactory))

(def ^:private
  sentinel- (Object.))

(def ^:private
  db- (atom nil))

...

(defn start [^String path]
  (locking sentinel-
    (log/info "Starting database at path" path)
    (let [exists (.exists (io/file path))
          ^TitanGraph db_ (TitanFactory/open path)]
      (if exists
        (log/info "Path" path "exists")
        (log/info "Path" path "does not exist"))
      (log/info "Starting database engine")
      (swap! db- (constantly db_))
      (log/info "Started database engine")
      (if (not exists)
        (try
          (bootstrap-)
          (catch Throwable t
            #_(log/info "Failed to bootstrap")
            (stop)
            (.delete (io/file path))
            (throw t)))))
    (log/info "Started database")
    true)) 
```

编辑：根据@alex-taggart 修剪代码。未显示引导程序实现。我最初包含所有内容，因为这似乎是一个特定于上下文的错误，我觉得提供尽可能多的上下文更安全。

编辑：每个@chouser，添加了我如何禁用`*read-eval*`. 这是由 生成的模板`lein new app`。

```
(defn -main
  "The main entry point into Extenium."
  [& args]
  ;; Prevent arbitrary eval injection
  (alter-var-root #'*read-eval* (constantly false))
  ;; Initialize system settings from the command line and configuration file
  (init!- args)
  ;; Start the service
  (start!-)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-01T07:54:43.223

这不是一个错误，真的。该`clojure.tools.logging`库只是对其他 Java 日志记录工具的抽象。为了发现哪一个可用，它使用`eval`表达式。欢迎您自己检查：这是一个快速[搜索结果](https://github.com/clojure/tools.logging/search?q=eval&unscoped_q=eval)和一个使用它的[特定文件](https://github.com/clojure/tools.logging/blob/dec185405d01cf2172f95deef08f4fd0791899c0/src/main/clojure/clojure/tools/logging/impl.clj)。

就您而言，我认为没有必要关心全局`read-eval`. 这是一个内部特性，谁知道其他库依赖它。如果您验证用户输入并阻止对其进行评估，则可以将标志保持原样。我想说的是，SQL 注入和 XSS 是您首先应该担心的事情。

# ruby-on-rails - 如何在方法内循环？

> ID：16160635
> 
> 赞同：0
> 
> 时间：2013-04-23T03:52:22.537
> 
> 标签：ruby-on-rails, ruby

我正在尝试在 Rails 应用程序的方法中添加循环。它看起来像这样

```
Parent.do_something(
  attribute: "a string",
  parameter: "a string",
  child[0]: "child_url"
  ) 
```

有时父母不会有孩子。有时父母会有x个孩子。如何在将循环遍历所有这些子项的函数中创建一个循环。

我想要类似的东西

```
i=0
children=Child.all
Parent.do_something(
  attribute: "a string",
  parameter: "a string",
  for child in children
   child[i]: "child_url"
   i= i + 1
  end
  ) 
```

这将产生

```
Parent.do_something(
      attribute: "a string",
      parameter: "a string",
      child[0]: "child_0_url",
      child[1]: "child_1_url",
      child[2]: "child_2_url"
      ) 
```

如果我没有很清楚地解释这个问题，我会根据评论更新我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:07:54.083

您可能只想这样做：

```
children = Child.all
Parent.do_something(
  attribute: "a string",
  parameter: "a string",
  child: children.map { |child| child.url }
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:56:33.103

可能更容易将该部分提取到不同的方法中：

```
Parent.do_something(
  attribute: "a string",
  parameter: "a string",
  children: children_method
)

def children_method
  Parent.children.map do |child|
     # whatever needs to be done
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:10:25.203

正如其他人所建议的那样，重新设计您的方法以期望一组子对象而不是大量单个参数可能会更好：

```
Parent.do_something(
  attribute: "a string",
  parameter: "a string",
  children: ["child_0_url", "child_1_url", "child_2_url"]
  ) 
```

但是如果你*必须*按照你说的方式去做（例如，如果你受到别人糟糕的 API 的限制）：

```
children = Child.all
Parent.do_something(
  {attribute: "a string",
   parameter: "a string"}.merge Hash[*(children.each_with_index.map { |child, i| ["child[#{i}]", child.url] }.flatten)]
) 
```

丑陋吧？

俗话说; 如果这很难做到，那么你可能做错了。Ismael Abreu 的答案漂亮的平面地图要漂亮得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:57:24.893

如果您尝试将可变数量的参数传递给方法，您可能正在寻找[splat (*) 运算符](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T09:13:29.403

如果你想要你输入的网址，试试这个：

```
children = Child.all
Parent.do_something(
  attribute: "a string",
  parameter: "a string",
  child: something
)

def something
  child = []
  children.length.times { |index| child << "child_#{index}_url"}
  return child
end 
```

如果您不需要其他地方的孩子，您也可以用 Child.count 替换 children.length，但我假设您这样做。

编辑：我认为这可能是**您正在寻找的更多内容**：

```
children = Child.all
Parent.do_something(
  attribute: "a string",
  parameter: "a string",
  child: children.each_with_index.map { |child,i| "child_#{i}_#{child.url}"}
) 
```

这利用了如果没有给出块，each_with_index 返回一个 Enumerator 的事实。

# html - 列表标记在浮动时消失在 Chrome 和 Safari 中：左

> ID：16160638
> 
> 赞同：0
> 
> 时间：2013-04-23T03:52:56.140
> 
> 标签：html, css, google-chrome, safari

我正在尝试实现水平列表的效果，其中标记是正方形，每个颜色都不同。这适用于 Firefox/Opera：

HTML：

```
<ul id="legend">
    <li id="item1" class="legendMarker"><span class="legendText">Item1</span></li>
    <li id="item2" class="legendMarker"><span class="legendText">Item2</span></li>
    <li id="item3" class="legendMarker"><span class="legendText">Item3</span></li>
</ul> 
```

CSS：

```
#legend {
    list-style-type: square;
    padding-left: 20px;
}
.legendMarker{
    float: left;
    font-size: 1em;
}
#item1 {
    color: #65E17B;
}
#item2 {
    color: #66A1D2;
}
#item3 {
    color: #007F16;
}
.legendText {
    color: black;
    padding-right: 35px;
    font-size: 0.9em;
} 
```

但是在 Safari 和 Chrome 中，方形标记都消失了，我不知道为什么。我知道实现这种效果的最佳方法可能是使用背景图像而不是 HTML 标记，但我想知道为什么这不起作用。我应该注意，在 Chrome 和 Safari 中，如果我去掉`float: left`. 任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T06:05:57.080

如果您的页面没有 DOCTYPE 声明，则会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:25:17.877

使用以下样式，它应该适用于所有浏览器：

```
#legend {
    list-style-type: square;
}
.legendMarker{
    float: left;
    font-size: 1em;
    margin-left: 35px;
}
#item1 {
    color: #65E17B;
}
#item2 {
    color: #66A1D2;
}
#item3 {
    color: #007F16;
}
.legendText {
    color: black;
    font-size: 0.9em;
} 
```

您不需要为每个文本添加填充右侧，您只需要`li`项目之间的间距，因此添加 margin-left 到它。

# mysql - mysql使用日期指示器对字母数字事务代码进行排序

> ID：16160650
> 
> 赞同：0
> 
> 时间：2013-04-23T03:54:07.547
> 
> 标签：mysql, sql-order-by

我有一些数据

```
SMMP0220113042212
SMMP0220113042211
SMMP0220113042210
SMMP022011304231
SMMP022011304229
SMMP022011304228 
```

如果“SMMP02201”是商店代码，“130422”是日期（yymmdd），我必须如何创建查询，之后该代码是一天的增量交易

```
SMMP022011304231
SMMP0220113042212
SMMP0220113042211
SMMP0220113042210
SMMP022011304229
SMMP022011304228 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:27:50.220

```
SELECT code
FROM table
ORDER BY substr(code, 1, 9), SUBSTR(code, 10, 6) DESC, CAST(substr(code, 16) AS DECIMAL) DESC; 
```

[小提琴](http://www.sqlfiddle.com/#!2/1f362/1)

# nginx - 被请求文档的变量

> ID：16160654
> 
> 赞同：0
> 
> 时间：2013-04-23T03:54:31.447
> 
> 标签：nginx

如果我有一个看起来像这样的位置块

```
location ~^ /foo/ { ... } 
```

我收到一个对'/foo/bar'的请求，我怎么才能得到'bar'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:43:38.980

```
location ~ ^/foo/.*/?([^/]+)$
{
    set $doc $1;
    ...
} 
```

The above assumes you want the very last part if the request, below the foo path.

If you just want the second part:

```
location ~ ^/foo/(.*)$
{
    set $doc $1;
} 
```

# java - OS X 上的 Java 输入，没有重复键，但是有 glut 是

> ID：16160657
> 
> 赞同：0
> 
> 时间：2013-04-23T03:54:37.763
> 
> 标签：java, macos, opengl, glut, jogl

我已经在 OS X 上使用 C++ 中的 OpenGL 和 glut 玩了几个月。我现在正在尝试将 Java（使用 JOGL）与 OpenGL 一起使用，但我无法弄清楚这个问题。

对于 glut，如果我按下一个键并按住它，glut 将继续接收事件，我在输出中看到的是一系列被按下的字母。但是，使用 JOGL，我无法获得这种行为。相反，我只收到一封信。

我知道在 OS X 上，这实际上是防止密钥重复的系统问题，但是 glut 怎么会绕过它呢？有没有办法通过 JOGL 绕过这种方式？

我已经尝试使用以下代码来重复键，但是当我按下一个键时，我的终端上会出现一个键的打印，而不是像 glut 那样的一系列打印。

这是我到目前为止尝试过的

```
class keyTest implements KeyEventDispatcher {

    @Override
    public boolean dispatchKeyEvent(KeyEvent arg0) {
        // TODO Auto-generated method stub
        System.out.println("dada "+arg0.getKeyChar());
        return false;
    }
}

KeyboardFocusManager man = KeyboardFocusManager.getCurrentKeyboardFocusManager();
man.addKeyEventDispatcher(new keyTest()); 
```

我也试过

```
glcanvas.addKeyListener(new KeyListener() {

    @Override
    public void keyTyped(KeyEvent arg0) {
        // TODO Auto-generated method stub
    }
    @Override
    public void keyReleased(KeyEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void keyPressed(KeyEvent arg0) {
        // TODO Auto-generated method stub
        System.out.println("keypressed: "+arg0.getKeyChar());               
    }
}); 
```

具有相同的不良行为：仅打印一个键，而不是一系列键。

编辑：我在 OS X 的终端中看到了一些终端命令来禁用自动重复块，但这会破坏 java 提供的可移植性优势。

EDIT2：我尝试使用 lwjgl，并且我能够使用该库获得重复的键行为。不过逻辑不一样。使用 lwjgl，我测试`if (Keyboard.isKeyDown(Keyboard.getEventKey()))`然后为每个关键字符做了一个 switch case，这与我习惯使用 java 的事件监听和反应相反。我仍然想知道如何用 JOGL 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T11:06:01.477

AWT 输入取决于您的 JVM 供应商的 AWT 实现。任何使用 AWT 输入的键重复问题都必须提交给您的 JRE/JDK 供应商。

JogAmp JOGL 开发人员建议您使用 NEWT 输入和窗口工具包来处理 JOGL 应用程序的键输入，NEWT 还旨在让您的应用程序扩展到没有 AWT 的系统。由于 NEWT 直接处理输入允许您的应用程序输入系统跨系统工作。 [http://jogamp.org/jogl/doc/NEWT-Overview.html](http://jogamp.org/jogl/doc/NEWT-Overview.html)

您可以从使用 GLCanvas (AWT) 切换到直接使用 GLWindow (NEWT) 或 NewtCanvasAWT（AWT 应用程序中的 NEWT GLWindow），然后实现 NEWTKeyAdapter 以接收自动重复键事件。

使用 NEWT 实现的自动重复已使用 JogAmp JOGL TestNewtKeyEventAutoRepeatAWT 单元测试在 OSX 上进行验证。

如果您仍然遇到任何 NEWT 问题，请随时向 JogAmp 团队提交错误报告：http: [//jogamp.org/wiki/index.php/Jogl_FAQ#Bugreports_.26_Testing](http://jogamp.org/wiki/index.php/Jogl_FAQ#Bugreports_.26_Testing)

# optimization - 优化木材采购

> ID：16160659
> 
> 赞同：1
> 
> 时间：2013-04-23T03:54:45.850
> 
> 标签：optimization

**我想知道如何对以下优化问题进行分类。**

木材厂出售各种库存长度的 2x4 木材。例如，8 英尺可能是 3 美元，10 英尺可能是 4 美元，而 14 英尺可能是 5.50 美元。重要的是，长度与价格不是线性相关的，并非所有离散长度都可以作为库存购买。可以假设在这些离散长度中可用的库存单位是取之不尽的。

```
length    cost
7.7ft     $2.75
  8ft     $3.00
 10ft     $4.00
 14ft     $5.50 
```

我需要通过从上述库存中切割它们来创建一组具有给定长度的 2x4（说我需要 2 英尺、2.5 英尺、6 英尺的长度，一旦一切都说完了）。此外，每次“切割”都会产生 1/8" 的材料成本（即 0.0104 英尺）。问题的解决方案是将每个所需长度分配给一个库存，并使所有库存的总成本最小化。在这个例子中，最小化成本的最佳解决方案是以 5.50 美元购买 14 英尺的板。（亚军的解决方案是购买两块 8 英尺的板并分配为 {6ft} 和 {2ft, 0.0104ft, 2.5ft}，成本为 6 美元。）

**这似乎不是一个背包级问题。这似乎不是一个裁减库存问题（因为我想尽量减少成本而不是尽量减少浪费）。这是什么类型的问题，我该如何有效地解决它？**

（作为后记，这是一个非虚构的问题，我已经在 Haskell 中使用多集分区和迭代以明显、低效的方式解决了。运行时对于超过 23 个所需长度和 6 个可用库存大小的实际使用来说是禁止的。 )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:32:44.677

我相信这是一个库存问题，除了它是一个多目标或多标准的库存问题（您希望最大限度地减少货币成本和材料成本），请参阅本文的[示例](http://www.sbmac.org.br/eventos/cnmac/xxxiii_cnmac/pdf/140.pdf)。不幸的是，我发现的几乎所有关于这种削减库存问题的在线资源都在付费墙后面。另外，我已经好几年没有做过整数线性规划了，但是如果我没记错的话，多目标问题比单目标问题要困难得多。

一种选择是实施两遍算法。第一遍完全忽略了切割板的材料成本，在单目标问题中只使用了货币成本（代替标准切割库存问题中的浪费成本）。这可能会给您留下一个无效的解决方案，此时您执行[本地搜索](http://en.wikipedia.org/wiki/Local_search_%28optimization%29)，例如用一个 14 英尺的板和一个 8 英尺的吟游诗人替换两个 10 英尺的板，直到找到一个有效的解决方案。一旦找到有效的解决方案，您可以继续在本地搜索多次迭代，看看您是否可以改进解决方案。与一次性多目标解决方案相比，该算法可能不是最优的，但它应该更容易实现。

# postgresql - PostgreSQL 错误：“存在”处或附近的语法错误

> ID：16160660
> 
> 赞同：1
> 
> 时间：2013-04-23T03:54:47.443
> 
> 标签：postgresql, syntax-error

我有一个非常简单的查询：

```
DROP TYPE IF EXISTS abc; 
```

在我的本地机器上运行时，一切都很好。在我的生产机器上运行时，它返回：

```
ERROR:  syntax error at or near "EXISTS" at character 14 
```

我尝试手动输入而不是复制以确保某处没有隐藏字符，但我无法弄清楚这如何会在一个地方出现错误，而在另一个地方却没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:01:01.970

检查您正在使用的版本，包括本地版本和生产版本。

该`if exists`子句仅`drop type`在 8.2 中添加。

而且，在有人质疑它为什么抱怨`exists`而不是之前`if`，这是因为声明：

```
drop type if 
```

`if`到那时为止是完全有效的，作为删除类型的尝试。只有在`exists`那之后才会使语法变差。

# sql-server - 如何比较 SQL Server 中的两个字符串元素

> ID：16160661
> 
> 赞同：1
> 
> 时间：2013-04-23T03:55:05.070
> 
> 标签：sql-server

我在 SQL Server 中有两个字符串。

例如：

```
declare @str1 as varchar(max)
declare @str2 as varchar(max)

set @str1 ='10:00am,2:00pm'

set @str2 = '10:00am,12:00pm,2:00pm,4:00pm,6:00pm,8:00pm' 
```

我想比较这两个字符串，并想从中获取那些`@str2`不在`@str1`.

这意味着结果应该是：

```
@str3 = '12:00pm,4:00pm,6:00pm,8:00pm' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:05:24.420

尝试这个 ：-

```
declare @str1 as varchar(max)
declare @str2 as varchar(max)

set @str1 ='10:00am,2:00pm'
set @str2 = '10:00am,12:00pm,2:00pm,4:00pm,6:00pm,8:00pm'

--the below 2 CTE's are used for splitting the string into different rows
;with cteStr1(str1) as
(
 SELECT
 RIGHT(LEFT(@str1,Number-1),
 CHARINDEX(',',REVERSE(LEFT(','+@str1,Number-1)))) as str1
 FROM
 master..spt_values
 WHERE
 Type = 'P' AND Number BETWEEN 1 AND LEN(@str1)+1
 AND
(SUBSTRING(@str1,Number,1) = ',' OR SUBSTRING(@str1,Number,1)  = '') 
),cteStr2(str2) as
  (
   SELECT
   RIGHT(LEFT(@str2,Number-1),
   CHARINDEX(',',REVERSE(LEFT(','+@str2,Number-1)))) as str2
   FROM
   master..spt_values
   WHERE
   Type = 'P' AND Number BETWEEN 1 AND LEN(@str2)+1
   AND
  (SUBSTRING(@str2,Number,1) = ',' OR SUBSTRING(@str2,Number,1)  = '') 
  )
  Select str2 from cteStr2 
  except
  select str1 from cteStr1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:06:04.330

尝试这个

```
DECLARE @str1 VARCHAR(MAX)
DECLARE @str2 VARCHAR(MAX)

SET @str1 ='10:00am,2:00pm'
SET @str2 = '10:00am,12:00pm,2:00pm,4:00pm,6:00pm,8:00pm'

SET @str1 = ',' + @str1 + ','
SET @str2 = ',' + @str2 + ','

DECLARE @name NVARCHAR(255)
DECLARE @pos INT

WHILE CHARINDEX(',', @str1) > 0
BEGIN
    SELECT @pos  = CHARINDEX(',', @str1)  
    SELECT @name = SUBSTRING(@str1, 1, @pos-1)

    SELECT @str1 = SUBSTRING(@str1, @pos+1, LEN(@str1)-@pos)
    IF @name <> ''
    BEGIN
        SET @str2 =  REPLACE(@str2,','+@name,'')
    END
END

 SET @str2 =  REPLACE(@str2,','+@name,'')

SELECT SUBSTRING(@str2, 2, LEN(@str2)-2) AS Result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:40:03.700

试试这个——

```
DECLARE 
      @str1 VARCHAR(500)
    , @str2 VARCHAR(500)

SELECT 
      @str1 = '10:00am,2:00pm'
    , @str2 = '10:00am,12:00pm,2:00pm,4:00pm,6:00pm,8:00pm'

;WITH cte AS
(
    SELECT 
          id = p.value('(./n)[1]', 'INT')
        , tm = p.value('(./s)[1]', 'VARCHAR(500)')
    FROM (
        SELECT field = CAST('<r><s>' + REPLACE(SUBSTRING(t.string + ',', 1, LEN(t.string + ',')), ',', '</s><n>' + CAST(t.id AS VARCHAR(10)) + '</n></r><r><s>') + '</s></r>' AS XML) 
        FROM (
            SELECT string = @str1, id = 1
            UNION ALL
            SELECT @str2, 2
        ) t
    ) d
    CROSS APPLY field.nodes('/r') t(p)
    WHERE t.p.exist('n') = 1
)
SELECT tm FROM cte WHERE id = 2
EXCEPT
SELECT tm FROM cte WHERE id = 1 
```

或者试试这个 -

```
;WITH cte2 AS
(
SELECT 
      t.id
    , tm = 
        SUBSTRING(
              ',' + t.string + ','
            , number + 1
            , CHARINDEX(',', ',' + t.string + ',', number + 1) - number - 1)
FROM (
    SELECT string = @str1, id = 1
    UNION ALL
    SELECT @str2, 2
) t
CROSS JOIN [master].dbo.spt_values n
WHERE [type] = 'p'
    AND number <= LEN(',' + t.string + ',') - 1
    AND SUBSTRING(',' + t.string + ',', number, 1) = ','
)
SELECT tm FROM cte2 WHERE id = 2
EXCEPT
SELECT tm FROM cte2 WHERE id = 1 
```

# winapi - 如何捕获屏幕截图并分配给静态控件？维纳皮

> ID：16160664
> 
> 赞同：0
> 
> 时间：2013-04-23T03:55:25.323
> 
> 标签：winapi, static, controls, gdi, blit

我正在尝试捕获屏幕并将其分配给某种控件，以便我可以单击图片并检索单击图片的坐标。我该怎么做呢？我试图将位图分配给静态控件，当用户单击图像时，我检索鼠标坐标并减去偏移的边框。我使用静态控件，因为它具有 SS_Notify。

但是这里的图片甚至不能显示在框架上？我该怎么做才能修复此代码？

```
 static HDC handle_MemoryDC;
    static HDC handle_ScreenDC;
    //BITMAP bitmap;
    static HBITMAP handle_Bitmap;
    static int x, y;

    case WM_CREATE:{

    CreateWindowEx(NULL, "STATIC", "", SS_BITMAP|WS_VISIBLE|WS_CHILD, 500,300, 640 ,360 , hwnd, HMENU(IDCSTATIC_BITMAP), GetModuleHandle(NULL), NULL);

    handle_ScreenDC = GetDC(NULL);
    handle_MemoryDC = CreateCompatibleDC(handle_ScreenDC);

     x = GetDeviceCaps(handle_ScreenDC, HORZRES);
     y = GetDeviceCaps(handle_ScreenDC, VERTRES);

    handle_Bitmap = CreateCompatibleBitmap(handle_ScreenDC, 640, 360);

    SelectObject(handle_MemoryDC, handle_Bitmap);
    StretchBlt(handle_MemoryDC, 0, 0, 640, 360, handle_ScreenDC, 0, 0, x, y, SRCCOPY);

    SendDlgItemMessage(hwnd, IDCSTATIC_BITMAP, STM_SETIMAGE, IMAGE_BITMAP, (LPARAM)handle_Bitmap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:32:46.240

看起来您正在尝试将消息发送到菜单 (IDCSTATIC_BITMAP)，而不是静态控制。尝试使用

```
SendMessage(hwnd, STM_SETIMAGE, IMAGE_BITMAP, (LPARAM)handle_Bitmap); 
```

# ios - 控制电视输出宽屏 iPhone

> ID：16160667
> 
> 赞同：1
> 
> 时间：2013-04-23T03:55:28.990
> 
> 标签：ios, objective-c, nsnotifications

嗨，我正在制作一个使用外部屏幕镜像应用程序的应用程序。是否有用于检测手机是否为宽屏模式的 NSNOtification？

# php - 注销重定向到错误页面

> ID：16160668
> 
> 赞同：-1
> 
> 时间：2013-04-23T03:55:34.007
> 
> 标签：php, logout

当我单击注销时，为什么它将我重定向到错误的页面。我正在使用 locahost 来开发我的页面，但是当我单击注销时，它会将我重定向到 xampp 页面，它假设将我重定向到管理页面。

```
 case 'logout':
        log_activity('user logout', $curr_path);
        system_user_stopsession();
        header("Location: http://".$_SERVER["HTTP_HOST"].$web_path);
        break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:57:39.583

您在`/`主机和路径之间缺少一个：

```
header("Location: http://".$_SERVER["HTTP_HOST"]."/".$web_path); 
```

# sql-server - 删除表语句但不使用存储过程

> ID：16160673
> 
> 赞同：1
> 
> 时间：2013-04-23T03:55:48.980
> 
> 标签：sql-server, sql-server-2008

我正在尝试 DROP 表，但我不想在存储过程中使用，我可以知道它可以在查询中工作吗？

```
declare @cmd varchar(4000)

declare cmds cursor for 
    select 'drop table [' + name + ']'
    from sys.objects
    where DATEDIFF(day,create_date,GETDATE()) = 26 AND schema_id = 1 AND type ='U'

open cmds
begin
    fetch cmds into @cmd
    if @@fetch_status != 0 break
    exec(@cmd)
end

close cmds;
deallocate cmds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:07:40.040

您不必使用存储过程，甚至不必使用带有动态 SQL 的过程批处理。

只是一些手动步骤。运行此查询

```
select 'drop table [database].' + schema_name(schema_id) + '.' + quotename(name)
from [database].sys.objects 
```

将结果复制到查询窗口并再次运行。例如，如果您使用的是 .NET 应用程序，则可以从该查询中获取结果，并将其作为下一个的 CommandText 发送。

* * *

您的动态 sql 查询批处理最好在没有 CURSOR 的情况下编写，如下所示：

```
declare @cmd nvarchar(max) = '';
select @cmd = @cmd + 'drop table [database].' + schema_name(schema_id) + '.' + quotename(name) + ';'
from [database].sys.objects
where DATEDIFF(day,create_date,GETDATE()) = 26 AND schema_id = 1 AND type ='U';
exec (@cmd); 
```

* * *

**我觉得我说得不够清楚**

您正在寻找的语法，如果我要弥补的话：

```
DROP TABLES
WHERE object_id IN (
    select object_id
    from [database].sys.tables 
    where DATEDIFF(day,create_date,GETDATE()) = 26 AND schema_id = 1 AND type ='U') 
```

只是不存在。[删除表](http://msdn.microsoft.com/en-us/library/ms173790.aspx)语法：

> 删除表[数据库名称。[模式名称]。| 模式名称。]
> 表名 [ ,...n ] [ ; ]

没有任何动态能力的迹象。

# c# - ASP.NET Ajax AutoComplete 不绑定值？

> ID：16160674
> 
> 赞同：0
> 
> 时间：2013-04-23T03:56:03.553
> 
> 标签：c#, asp.net, .net, autocomplete

我正在使用 AJax：asp.net 中的自动完成

我在同一页面上使用 WebMethod，

该 webmethod 被调用，它的返回值也被调用..，但这些值没有绑定到 TextBox。

**这是我的 ASPX 代码：**

```
 <asp:ScriptManagerProxy ID="AjaxMgrPrxy" runat="server" ></asp:ScriptManagerProxy> 

     <asp:TextBox runat="server" ID="txtacService" AutoPostBack="true" ></asp:TextBox>

      <div id="divwidth"></div>

                 <ajax:AutoCompleteExtender ID="acService"  
                     TargetControlID="txtacService"  
                     runat="server" 
                     ServiceMethod="GetServiceNames" 
                     MinimumPrefixLength="1" 
                     EnableCaching="true" 
                     CompletionSetCount="1" 
                     CompletionInterval="200" 
                     CompletionListElementID="divwidth" 
                     ServicePath="PortOmission.aspx" 
                     FirstRowSelected="true"/> 
```

**代码背后：**

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static string[] GetServiceNames(string prefixText)
{
   // Code Here
   return List.ToArray();
} 
```

我想念这里的事情吗？？？几小时后我一直在研究这段代码..，我无法得到任何有用的结果。，

谁能帮我找出这个问题。，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:30:10.680

如果您的服务与您的文本框控件位于同一页面中，只需使用

ServiceMethod="GetServiceNames" ServicePath=""

# c# - 用c#.net逐行读取excel数据

> ID：16160676
> 
> 赞同：12
> 
> 时间：2013-04-23T03:56:17.467
> 
> 标签：c#, .net

有谁知道如何在 c# 中逐行读取 excel 文件。

我找到了这段代码，它将从 excel 中返​​回数据并在 c# 中显示一个grindview。但是，我只是在徘徊如何在服务器端逐行读取数据？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;    
using System.Data;
using System.Data.OleDb;
using System.IO;

namespace site
{
    public partial class pgTest : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnImport_Click(object sender, EventArgs e)
        {
            string connString = "";
            string strFileType = Path.GetExtension(fileuploadExcel.FileName).ToLower();
            string path = fileuploadExcel.PostedFile.FileName;
            //Connection String to Excel Workbook
            if (strFileType.Trim() == ".xls")
            {
                connString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=2\"";
            }
            else if (strFileType.Trim() == ".xlsx")
            {
                connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=2\"";
            }

            string query = "SELECT [username],[age],[phone] FROM [Sheet1$]";
            OleDbConnection conn = new OleDbConnection(connString);
            if (conn.State == ConnectionState.Closed)
                conn.Open();
            OleDbCommand cmd = new OleDbCommand(query, conn);
            OleDbDataAdapter da = new OleDbDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds);
            grvExcelData.DataSource = ds.Tables[0];
            grvExcelData.DataBind();
            da.Dispose();
            conn.Close();
            conn.Dispose();
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T04:07:08.710

由于 Excel 使用范围，因此您应该首先获取要读取的单元格范围。之后，您现在可以使用 for 循环浏览它们。您可以在下面看到一个示例：

```
 Excel.Application xlApp = new Excel.Application();
    Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"C:\myexcel.xlsx");
    Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
    Excel.Range xlRange = xlWorksheet.UsedRange;

    int rowCount = xlRange.Rows.Count;
    int colCount = xlRange.Columns.Count;

    for (int i = 1; i <= rowCount; i++)
    {
        for (int j = 1; j <= colCount; j++)
        {
            MessageBox.Show(xlRange.Cells[i, j].Value2.ToString());
        }
    } 
```

可以在[此处](http://dontbreakthebuild.com/2011/01/30/excel-and-c-interop-with-net-4-how-to-read-data-from-excel/)找到有关此代码块的更详细说明。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T04:07:35.837

你可以使用`OleDbDataReader`如下

```
using (OleDbConnection connection = new OleDbConnection(connectionString))
{
    OleDbCommand command = new OleDbCommand(queryString, connection);

    connection.Open();
    OleDbDataReader reader = command.ExecuteReader();

    while (reader.Read())
    {
        var val1= reader[0].ToString();
    }
    reader.Close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-21T08:21:43.357

你必须试试这个

```
 string connectionString = "";
        string strFileType = "Type";
        string path = @"C:\Users\UserName\Downloads\";
        string filename = "filename.xls";
        if (fielname.Contains(.xls))
        {
            connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + filename + ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=2\"";
        }
        else if (fielname.Contains(.xlsx)
        {
            connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + filename + ";Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=2\"";
        }

        string query = "SELECT * FROM [SheetName$]";
        using (OleDbConnection connection = new OleDbConnection(connectionString))
        {
            OleDbCommand command = new OleDbCommand(query, connection);

            connection.Open();
            OleDbDataReader reader = command.ExecuteReader();

            var lines = new List<string>();
            while (reader.Read())
            {
                var fieldCount = reader.FieldCount;

                var fieldIncrementor = 1;
                var fields = new List<string>();
                while (fieldCount >= fieldIncrementor)
                {
                    fields.Add(reader[fieldIncrementor - 1].ToString());
                    fieldIncrementor++;
                }

                lines.Add(string.Join("\t", fields));
            }
            reader.Close();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-04T08:52:17.030

我尝试了使用 OleDbConnection 的解决方案，但它不起作用，因为我没有安装任何东西。然后我在这里找到了这个解决方案，它就像一个魅力：

[https://www.codeproject.com/Tips/801032/Csharp-How-To-Read-xlsx-Excel-File-With-Lines-of](https://www.codeproject.com/Tips/801032/Csharp-How-To-Read-xlsx-Excel-File-With-Lines-of)

在那里您可以下载一个小文件 Excel.dll，将其添加到您的项目中，然后逐个单元格地浏览 Excel 文件。

# php - PHP比较两个日期但小时无法正常运行

> ID：16160678
> 
> 赞同：1
> 
> 时间：2013-04-23T03:56:27.093
> 
> 标签：php, date

我的代码没有显示正确的日期差异时遇到问题。Days Minutes 和 Seconds 都可以正常工作，但 Hours 似乎显示的是减去的数量，而不是剩余部分，如果这完全有意义的话。

例如，使用这些日期 2171167 = 2013-05-18 00:00:00 - 2013-04-22 20:53:53

我在 25 天 19:06:07 收到以下输出

```
$date_one = date('Y-m-d H:i:s');
$date_two = date('Y-m-d H:i:s', mktime(0, 0, 0, 5, 18, 2013));
$Difference = abs(strtotime($date_two) - strtotime($date_one));

$Days = date("d", $Difference);
//$Hours = date("H", $Difference); Why does this NOT WORK???
$Minutes = date("i", $Difference);
$Seconds = date("s", $Difference); 
```

如果您能告诉我为什么我注释掉的第二个“小时”变量不起作用，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:11:00.750

```
<?php
header('Content-Type: text/plain');

$date1 = DateTime::createFromFormat('Y-m-d H:i:s', '2013-05-18 00:00:00');
$date2 = DateTime::createFromFormat('Y-m-d H:i:s', '2013-04-22 20:53:53');

$result = $date1->diff($date2);

echo $result->format('%Y-%m-%d %H:%i:%s');
?> 
```

显示：

```
00-0-25 03:6:7 
```

* * *

拆分成变量：

```
list($year, $month, $day, $hour, $minute, $second) = explode('-', $result->format('%Y-%m-%d-%H-%i-%s'));

var_dump($year, $month, $day, $hour, $minute, $second); 
```

显示：

```
string(2) "00"
string(1) "0"
string(2) "25"
string(2) "03"
string(1) "6"
string(1) "7" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:14:54.263

只需更改小时语法。

```
<?php
    $date_one = date('Y-m-d H:i:s');
    $date_two = date('Y-m-d H:i:s', mktime(0, 0, 0, 5, 18, 2013));
    $Difference = round(strtotime($date_two) - strtotime($date_one));

    $Days = date("d", $Difference);
    $Hours = date("H", $Difference);
    echo $Hours = $Difference / 60;
    $Minutes = date("i", $Difference);
    $Seconds = date("s", $Difference);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:17:01.943

您使用错误的第一次约会使用下面的代码到您的实际答案

```
$date_one = "2013-04-22 20:53:53"; //date('Y-m-d H:i:s');
$date_two = date('Y-m-d H:i:s', mktime(0, 0, 0, 5, 18, 2013));
$Difference = abs(strtotime($date_two) - strtotime($date_one));

echo "<br> dif ->".date('d H:i:s',$Difference);

echo "<br> day -> ".$Days = date("d", $Difference);
echo "<br> Hours -> ".$Hours = date("H", $Difference); 
echo "<br> Minutes -> ".$Minutes = date("i", $Difference);
echo "<br> Seconds -> ".$Seconds = date("s", $Difference); 
```

**：输出：**

差异 -> 26 03:06:07

```
day -> 26
Hours -> 03
Minutes -> 06
Seconds -> 07 
```

# hadoop - 无法打开 SecondaryNameNode 的 Web UI 状态页面

> ID：16160686
> 
> 赞同：2
> 
> 时间：2013-04-23T03:57:25.533
> 
> 标签：hadoop

我已经建立了一个包含 3 台机器的小型 Hadoop 集群：

1.  机器（Hadoop1）同时运行 NameNode 和 Jobtracker
2.  机器（Hadoop2）正在运行 SecondaryNameNode
3.  机器（Hadoop3）正在运行 DataNode 和 TaskTracker

当我检查日志文件时，一切正常。但是，当我尝试通过在机器 Hadoop2 上键入 localhost:50090 来检查 SecondaryNameNode 的工作状态时，它显示：

```
Unable to connect ....can't establish a connection to the server at localhost:50090. 
```

有人遇到过这种问题吗？

**SNN 上 hdfs-site.xml 中的内容：**

```
<configuration>
<property>
<name>dfs.replication</name>
<value>2</value>
</property>

<property>
<name>dfs.http.address</name>
<value>Hadoop1:50070</value>
</property>

<property>
<name>dfs.secondary.http.address</name>
<value>Hadoop2:50090</value>
</property>
</configuration> 
```

**以下是来自 SNN 的运行日志的一部分：**

```
2013-04-23 19:47:00,820 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of transactions: 0 Total time for transactions(ms): 0Number of transactions batched in Syncs: 0 Number of syncs: 0 SyncTimes(ms): 0
2013-04-23 19:47:00,987 INFO org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode: Downloaded file fsimage size 654 bytes.
2013-04-23 19:47:00,989 INFO org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode: Downloaded file edits size 4 bytes.
2013-04-23 19:47:00,989 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 64-bit
2013-04-23 19:47:00,989 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 17.77875 MB
2013-04-23 19:47:00,989 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^21 = 2097152 entries
2013-04-23 19:47:00,989 INFO org.apache.hadoop.hdfs.util.GSet: recommended=2097152, actual=2097152
2013-04-23 19:47:00,998 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=hadoop
2013-04-23 19:47:00,998 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup
2013-04-23 19:47:00,998 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=true
2013-04-23 19:47:00,998 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100
2013-04-23 19:47:00,999 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
2013-04-23 19:47:00,999 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times
2013-04-23 19:47:00,999 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files = 7
2013-04-23 19:47:01,000 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files under construction = 0
2013-04-23 19:47:01,000 INFO org.apache.hadoop.hdfs.server.common.Storage: Edits file /app/hadoop/tmp/dfs/namesecondary/current/edits of size 4 edits # 0 loaded in 0 seconds.
2013-04-23 19:47:01,001 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of transactions: 0 Total time for transactions(ms): 0Number of transactions batched in Syncs: 0 Number of syncs: 0 SyncTimes(ms): 0
2013-04-23 19:47:01,049 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 654 saved in 0 seconds.
2013-04-23 19:47:01,334 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 654 saved in 0 seconds.
2013-04-23 19:47:01,570 INFO org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode: Posted URL Hadoop1:50070putimage=1&port=50090&machine=Hadoop3&token=-32:145975115:0:1366717621000:1366714020860
2013-04-23 19:47:01,771 INFO org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode: Checkpoint done. New Image Size: 654 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:32:47.237

尝试在您的 SNN 上为 hdfs-site.xml 中的 dfs.secondary.http.address 赋值。另外，我假设您的机器之间没有启用防火墙，对吗？如果您可以显示您的日志，这将有所帮助，我看到有时用户为 SNN 输入了错误的端口号，该端口号在他们的日志中有所不同，因此会出现连接错误。

# ruby-on-rails - rspec 中是否有内置的匹配器将实例的方法和值与字典匹配？

> ID：16160693
> 
> 赞同：0
> 
> 时间：2013-04-23T03:58:54.503
> 
> 标签：ruby-on-rails, rspec-rails

我是 ruby​​、rails 和 RSpec 的新手。我正在编写一个规范，用于验证`obj`作为参数发送给方法的实例 是否满足给定字典的条件，即字典`dict`中`obj.<key> == dict[key]`的所有键。这就是我在规范中的做法：

```
Foo::BarService.should_receive(:the_message) do |obj|
  @dict.keys.each do |key|
    obj.__send__(key).should be(@dict[key])
    end
end 
```

是否有内置的 rspec 匹配器？还是更好、更 ruby​​-ish 或 rspec/rails-ish 的方式？

# objective-c - 任何人都可以在一行中创建块和副本时解释这种异常情况吗？

> ID：16160698
> 
> 赞同：3
> 
> 时间：2013-04-23T04:00:11.637
> 
> 标签：objective-c, objective-c-blocks

```
void(^block)()  = ^() {double a=0;
}; //works

void(^block)()  = ^() {double a=0;
}.copy //won't works;

void(^block)()  = (^() {double a=0;
}).copy //this one surprisingly works actually

void(^block)()  = ^() {double a=0;
};
block=block.copy //works but 2 lines 
```

这个问题是出于简单的好奇

原来

```
void(^block)()  = (^() {double a=0;
}).copy works. 
```

奇怪的是

`block=block.copy`不工作，但`block=[block copy]`工作。我想知道为什么

我只是想定义一个块并立即复制它。就像是：

```
NSArray * array = [NSArray array].copy; 
```

看，那里不需要括号。

array=array.copy 也可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:30:00.667

我认为这种混淆确实源于在你不应该使用点符号的地方。

```
void(^block)() = ^ {double a=0;}.copy // does not work 
```

这不会编译，因为`.copy`被解释为访问该名称的结构字段。因此 Xcode 编译错误：“成员引用基类型……不是结构或联合”。（编辑代码片段间距以证明这一点。）

现在考虑您的括号替代方案：

```
void(^block)() = (^{double a=0;}).copy //this one surprisingly works actually 
```

当你认为编译器现在理解你的意图时，这并不奇怪——这要归功于括号。

# jquery - Radio Select上的Jquery图像边框

> ID：16160703
> 
> 赞同：0
> 
> 时间：2013-04-23T04:00:48.303
> 
> 标签：jquery, image, input, border, radio

当您选择一个单选框时，我正在尝试绑定一个边框图像。这是代码：

```
<table width="100%">
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" id="option_img"><br><input class="optionVent" type="radio" name="vent" value="1">vent</td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" id="option_img"><br><input class="optionVent" type="radio" name="vent" value="1">vent</td>
                    </tr></table> 
```

这是javascript：

```
$(".optionVent").click(function(){
    if($(this).is(':checked')){
        $("#option_img").css('border', "solid 1px orange"); 
    }  
}); 
```

As it stands now, when 1 box is selected, both images get borders. 我想不出一种将图像绑定到单选框的方法。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:03:42.380

```
$(".optionVent").on('change', function(){
    $('img').css('border', 'none'); //add a class to be more specific
    $(this).closest('td').find('img').css('border', 'solid 1px orange'); 
}); 
```

此外，ID 是唯一的，每个 ID 只能有一个，而不是多个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:22:54.403

我会在你的样式表中添加一个类，`.selected_img { border: solid 1px orange; }`然后编辑你的代码和标记，如下所示：

## HTML

```
<table width="100%">
  <tr>
    <td>
        <div class="img_box">
            <label for="vent1">
                <img src="img/option/collar.png" width="100px" id="option_img1" /><br>
                <input class="optionVent radio_img1" type="radio" name="vent" id="vent1" value="1" />
                vent one
            </label>
        </div>
    </td>
    <td></td>
    <td>
        <div class="img_box">
            <label for="vent2">
                <img src="img/option/collar.png" width="100px" id="option_img2" /><br>
                <input class="optionVent radio_img2" type="radio" name="vent" id="vent2" value="1" />
                vent two
            </label>
        </div>
    </td>
  </tr>
</table> 
```

## JS

```
$(".optionVent").change(function() {
    $('.img_box').removeClass('selected_img');
    $(this).closest('.img_box').addClass('selected_img');
}); 
```

## CSS

```
.img_box {
    display: inline-block;
    padding: 20px;
}
.selected_img {
    border: 1px solid orange;
} 
```

我喜欢添加类而不是在**javascript**中包含样式，以便您可以在**CSS**中编辑所有样式。

* * *

# 演示

点击查看[JSFiddle 演示](http://jsfiddle.net/fungku/57QRG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:33:03.203

最好的逻辑是使用 CSS 来实现边框，并简单地使用 jQuery 来添加/删除该类到选定的元素。这使 CSS 样式与 HTML 内容分开，这是它应该的样子。

```
$(".optionVent").click (function {
  // First, go up two levels and back down one to remove the classes
  $(this).parent().parent().children().removeclass("selected");

  // Secondly, add the class to the parent element
  $(this).parent().addclass("selected");
}); 
```

您的 CSS 将是：

```
.selected {
  border: solid 1px orange;
} 
```

您可以根据需要对其进行修改以获得所需的效果。

# javascript - casperJS 如何在从 web 收集数据时单击表中的多个链接 /.click() 不起作用？

> ID：16160707
> 
> 赞同：3
> 
> 时间：2013-04-23T04:01:24.000
> 
> 标签：javascript, click, screen-scraping, casperjs

我想使用 CasperJS 抓取一些网络数据。数据在一个表格中，每一行都有一个链接指向一个更详细的页面。在脚本中有一个循环遍历所有表行。我希望 Casper 单击链接，在子页面上收集数据，然后返回历史记录以处理下一个表格行。问题是 click() 不起作用，我不知道为什么。有没有什么办法解决这一问题 ？（注意：javascript 函数 viewContact 由 href 调用）

这是代码：

```
var employee = {
    last_name: "",
    first_name: "",
    position: "",
    department: "",
    location: "",
    email: "",
    phone: "",
    twitter: ""
};

var employees = [];
var result_number = 50;
var start_url = 'https://www.jigsaw.com/SearchContact.xhtml?companyId=489781&orderby=0&order=0&opCode=paging&mode=0&estimatedCount=126&dead=false&rpage=1&rowsPerPage=200';

var casper = require('casper').create({
    javascriptEnabled: true
});

casper.start(start_url, function() {
    var js = this.evaluate(function() {
    return document;
});

     for (var i = 1; i <= result_number; i++)
     {        
        // j stands for three neighbour td columns containing: 
        // position, name+link, location

        employee.position = this.getHTML('#sortableTable tr:nth-child(' + i + ') td:nth-child(3) span');

        // click link and get other data
        this.click('#sortableTable tr:nth-child(' + i + ') td:nth-child(4) span a');
            employee.first_name = this.getHTML('#sortableTable tr:nth-child(' + i + ') td:nth-child(4) span a');

        //collect data
        this.waitForSelector('#firstname', function() {
            employee.first_name = this.getHTML('#firstname');
        });

        this.waitForSelector('#lastname', function() {
            employee.last_name = this.getHTML('#lastname');
        });
        this.waitForSelector('#state', function() {
            employee.department = this.getHTML('#state');
        });
        this.waitForSelector('#email', function() {
            employee.email = this.getHTML('#email');
        });
        this.waitForSelector('#phone', function() {
            employee.phone = this.getHTML('#phone');
        });

        //get back to previous page
        this.back();

        employee.location = this.getHTML('#sortableTable tr:nth-child(' + i + ') td:nth-child(5) span');

        this.echo('\n\n Employee number: ' + i + " :\n");
        this.echo('first name : ' + employee.first_name);
        this.echo('last name  : ' + employee.last_name);
        this.echo('position   : ' + employee.position);
        this.echo('department : ' + employee.department);
        this.echo('location   : ' + employee.location);
        this.echo('email      : ' + employee.email);
        this.echo('phone      : ' + employee.phone);

}

});

casper.run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T21:31:19.277

我在这里看到两件事需要纠正。首先，代码中的 for 循环似乎不在任何 casperjs 方法的范围内。

这个：

```
for (var i = 1; i <= result_number; i++) 
```

它应该在`casper.then`方法内部。我注意到你有右括号，所以也许你已经通过以草率的方式复制粘贴来发布代码。

其次，也是最重要的一点，`tr:nth-child(' + i + ')`你想与之交互的对象不会以这种方式工作。我不知道为什么，但它似乎并没有直接起作用。我试图做同样的事情。我的解决方案是首先将 转换`i`为字符串而不是像这样的数字：

```
pageturn = pageturn + 1;
// Collect <td> contents on each page.
var pageturnString = pageturn.toString();
var linknum = 'a.SomeLinkClass:nth-child('+pageturnString+')'; 
```

在我的情况下，我使用它来单击以更改页面，无论哪种方式，您都必须将与所述 css 选择器的交互封装在`this.then()`第一个方法内的方法内，然后第二个子方法执行 for 循环的其余部分。

例子：

```
casper.each(pagecount, function() {
    this.then(function() {
        pageturn = pageturn + 1;
        // Collect <td> contents on each page.
        var pageturnString = pageturn.toString();
        var linknum = 'a.SomeLinkClass:nth-child('+pageturnString+')';
    });

    this.then(function() {
        //Now run for loop here. 
    });
 }); 
```

如果`this.then()`在下一个方法中使用之前没有将 css 选择器构造封装在方法中，它将无法工作。我不知道为什么，但这就是交易。在我的代码中，`pagecount`可能会用来代替你的 for 循环，但我会留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T01:45:07.407

我有一个页面，我在 Casper 中看到了这个：

`[debug] [phantom] Mouse event 'mousedown' on selector: tr:nth-child(2) a CasperError: Cannot dispatch mousedown event on nonexistent selector: tr:nth-child(2) a`

由于此错误是由依赖于 querySelectorAll 的失败存在引起的，因此我已经尝试过，发现以下将 x2 设置为空（尽管 x1 不为空）：

```
this.evaluate(function() {
    var x1 = document.querySelector('tr:nth-child(2) a');
    var x2 = document.querySelector('tr:nth-child(2) a');
    alert(x1 + ', ' + x2);
}); 
```

`<a>`正如您在标题行中找到的那样，它似乎取决于是否存在不包含 的行。这是一个测试页面：

[http://jsfiddle.net/GKb2g/4/](http://jsfiddle.net/GKb2g/4/)

一旦找到原因，我希望能在这里发帖，但与此同时，您最好使用 selectXPath 选择器。

# delphi - 以表格样式保存控件的组件？

> ID：16160708
> 
> 赞同：2
> 
> 时间：2013-04-23T04:01:42.047
> 
> 标签：delphi

我正在寻找一个可以容纳另一个组件（像按钮）并以表格样式显示它们的组件。`GridPanel`是一个这样的组件，但不显示那些网格运行时。

像这样的东西：

![样本](https://i.stack.imgur.com/FQ21M.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:24:04.523

您可以使用 TGridpanel 并通过覆盖 Paint 方法来实现您自己的绘画逻辑。
附加的图像显示了它的外观，为了达到您的预期结果，需要添加一些代码。![在此处输入图像描述](https://i.stack.imgur.com/pIhHl.png)

```
unit Unit6;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type

  TGridPanel = Class(ExtCtrls.TGridPanel)
  protected
    procedure Paint; override;
  end;

  TCellItem = Class(ExtCtrls.TCellItem)
    Property Size;  // make protected Size accessable
  End;

  TForm6 = class(TForm)
    GridPanel1: TGridPanel;
    Button6: TButton;
    Button7: TButton;
    Button8: TButton;
    Button10: TButton;
    Button11: TButton;
    Button12: TButton;
    Button14: TButton;
    Button15: TButton;
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form6: TForm6;

implementation

{$R *.dfm}

uses TypInfo, Rtti;

Function GetSize(B: TComponent): Integer;
var
  c: TRttiContext;
  t: TRttiInstanceType;
begin
  c := TRttiContext.Create;
  try
    t := c.GetType(B.ClassInfo) as TRttiInstanceType;
    Result := t.GetProperty('Width').GetValue(B).AsInteger;
  finally
    c.Free;
  end;
end;

procedure TGridPanel.Paint;
var
  I: Integer;
  LinePos, Size: Integer;
  ClientRect: TRect;
begin
  inherited;
  begin
    LinePos := 0;
    Canvas.Pen.Style := psSolid;
    Canvas.Pen.Color := clBlack;
    ClientRect := GetClientRect;
    Canvas.Rectangle(ClientRect);
    for I := 0 to ColumnCollection.Count - 2 do
    begin     // cast to "own" TCellItem to access size
      Size := TCellItem(ColumnCollection[I]).Size;

      if I = 0 then
        Canvas.MoveTo(LinePos + Size, ClientRect.Top)
      else   // "keep cells together"
        Canvas.MoveTo(LinePos + Size, ClientRect.Top + TCellItem(RowCollection[0]).Size);

      Canvas.LineTo(LinePos + Size, ClientRect.Bottom);
      Inc(LinePos, Size);
    end;

    Canvas.Font.Size := 12;
    Canvas.TextOut(TCellItem(ColumnCollection[0]).Size + 20,
      (TCellItem(RowCollection[0]).Size - Canvas.TextHeight('X')) div 2,
      'a longer caption text to be displayed');

    LinePos := 0;
    for I := 0 to RowCollection.Count - 2 do
    begin
      Size := TCellItem(RowCollection[I]).Size;
      Canvas.MoveTo(ClientRect.Left, LinePos + Size);
      Canvas.LineTo(ClientRect.Right, LinePos + Size);
      Inc(LinePos, Size);
    end;
  end;
end;

end. 
```

# extjs - 为什么我们需要 Web 服务器来运行 Extjs4 项目？

> ID：16160709
> 
> 赞同：1
> 
> 时间：2013-04-23T04:01:44.007
> 
> 标签：extjs, extjs4.2

由于**Extjs4**是用 .js 文件制作的，那么为什么我们需要**Web 服务器**来运行 extjs4 项目？我在 sencha 文档中读到......

“您必须需要：在您的计算机上本地运行的 Web 服务器，例如 XAMPP（推荐）”。

我们可以在不安装 Web 服务器（XAMPP/Apache）的情况下在本地机器上运行**extjs4项目吗？**如果是，请告诉我怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:09:00.343

Web服务器需要处理http-request（监听80端口），如：获取数据（JSON/XML），刷新部分页面等。

如果您在浏览器中打开 index.html（没有 Web 服务器），您需要使用打包程序（sencha 命令）或将整个框架 js 和所有项目文件包含到您的 index.html 中，可以是一堆脚本标签的形式，也可以是串联的到一个文件中。

否则，加载器正在使用只能通过 Web 服务器完成的 XHR 请求（安全问题 - 想象通过 Ajax 加载客户端的系统文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:27:22.400

仅当您使用需要动态数据的组件时才需要 Web 服务器，例如显示股票报价的网格面板。随着股票报价不断变化，您将需要一个服务器来发送数据。

如果您使用的是静态数据，则不需要网络服务器。有关详细信息，请参阅数据存储组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T19:22:04.953

Web 服务器不需要运行任何 extjs 代码，因为 javascript 在浏览器引擎中运行，而 extjs 是纯粹的 javascript 框架。但是当我们考虑开发一个应该是动态的应用程序时（大多数应用程序）部署在服务器上，以便可以处理服务器请求/响应。在大多数情况下，我们在服务器中编写业务逻辑，它返回一些可以通过 extjs 在 UI 中显示的动态数据。

# performance - Ada 如何实现“mod”和“range”类型？性能影响是什么？

> ID：16160717
> 
> 赞同：3
> 
> 时间：2013-04-23T04:03:00.600
> 
> 标签：performance, types, programming-languages, ada

在 Ada 中，您可以定义所谓的 ' [mod](http://en.wikibooks.org/wiki/Ada_Programming/Types/mod) ' 和 ' [range](http://en.wikibooks.org/wiki/Ada_Programming/Types/range) ' 类型：

```
type Unsigned_n is mod 2**n;
type Range_Type is range -5 .. 10; 
```

这些是如何在~~语言~~机器级别实现的？在对这些类型执行操作时，您会遇到什么样的性能损失？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T07:12:11.103

目前尚不清楚您所说的“在语言层面”是什么意思。在 Ada 级别，他们就是！在机器级别，它们按照您的期望实现。

对于模块化类型，如果您使用 2 的幂作为模数，则编译后的代码使用掩码；否则，会有测试。

```
type Modular is mod 42;
...
procedure T (M : in out Modular) is
begin
   M := M + 1;
end T; 
```

将 (x86_64, -O2) 转换为

```
_foo__t:
LFB2:
        leal    1(%rdi), %eax
        cmpb    $40, %dil
        leal    -41(%rdi), %edx
        cmovg   %edx, %eax
        ret 
```

我现在不写汇编程序，但这看起来还不错（而且，在不支持模块化类型的语言中，如果问题需要，你必须自己编写类似的东西）。

对于整数类型，实现再次如您所料，当然，除了为变量赋值涉及约束检查（除非编译器可以证明没有必要）。

但实际上，对于大多数用途，您不必自己编写这些增量操作。如果您需要遍历该类型的所有值，您可以说

```
for J in Modular loop 
```

或者，如果您已声明`Arr : array (Range_Type) of Foo;`，

```
for J in Arr'Range loop 
```

并且不需要检查 的有效性`J`，因此没有性能损失。

总是可以抑制约束检查（在 GNAT 中，`-gnatp`抑制所有检查）；但这有点像一离开车道就解安全带！

# asp.net-mvc - 模块化系统的迁移

> ID：16160721
> 
> 赞同：0
> 
> 时间：2013-04-23T04:03:19.650
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, module, migration

我想创建一个模块化系统。我的项目中存在关于迁移概念的问题。我需要一个关于创建模块和迁移的系列原则。例如，假设我正在创建一个 PersonService 模块并根据该模块的模型创建数据库，那么在该模块的下一个版本中我必须更改它的模型。我将向客户销售新模块，然后必须根据更新客户的数据库到新模型。这个过程必须自动进行。但我的问题是：

如何在客户系统中自动迁移我的数据库？

创建模块和数据库的重要原则是什么？

如果客户想安装旧版本的模块，客户可以更新数据库吗？

- - - - - - - - - - - - 编辑 - - - - - - - - - - - - - ------ 什么模型更好用？代码优先？数据库优先？还是....？

自动迁移是否会损坏客户的数据？

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:05:09.883

您可以使用 Automatic Database Migrations 将最新版本的应用程序部署给客户，并且在下次运行时，如果您在 Migrations 文件夹中的 configuration.cs 文件中启用了 Automatic Migrations，它将更新。如果您有任何依赖于这些字段或表的逻辑，但您需要确保在迁移期间填充数据或禁用该逻辑，直到以某种方式填充数据之后。

如果您希望它们在初始安装期间始终从基线数据库开始，则要添加此功能，您需要在将现有字段或表添加到模型以及数据库之前启用迁移。如果您更新模型并希望将安装日期回溯到以前的模型版本，除非您构建大量代码以恢复到您从未创建的以前的迁移，否则您将不走运。

# c++ - C++ 第一次使用函数

> ID：16160722
> 
> 赞同：0
> 
> 时间：2013-04-23T04:03:22.487
> 
> 标签：c++, function

正如标题所述，我是第一次使用 Functions，我很难将它们应用到刽子手游戏中。根据我有限的知识，我假设我的变量范围超出了函数调用的范围。鉴于我完全是在书本上工作，我觉得我碰壁了。我在想可能会使用全局变量，但话又说回来，我正在写的那一章也只给了我对它们的有限理解。我也遇到了 srand(time(0)); 的问题。出于某种原因。任何帮助将不胜感激，并提前致谢。

```
// HangMan Game
// With Functions

#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <ctime>
#include <cctype>

using namespace std;

char playerGuess();
char guessInWord();

int main()
{
    //setup
    const int MAX_WRONG = 8;//max wrong will be set at 8

    vector<string> words; //collection of possible words to guess
    words.push_back ("DAFTPUNK");
    words.push_back ("ELSALVADOR");
    words.push_back ("HIPHOP");

    srand(time(0));
    random_shuffle(words.begin(), words.end());
    const string THE_WORD = words[0];            //word to guess
    int wrong = 0;                               //number of incorrect guesses
    string soFar(THE_WORD.size(), '-');          //word guessed so far
    string used = "";                            //letters already guessed

    cout << "Welcome to Hangmam. Good luck!\n";

    //main loop
    while ((wrong < MAX_WRONG) && (soFar != THE_WORD))
    {
        cout << "\nYou have " << (MAX_WRONG - wrong) << " incorrect guesses left.\n";
        cout << "\nYou've used the following letters:\n" << used << endl;
        cout << "\nSo far, the word is:\n" << soFar << endl;

        char guess = playerGuess(); //call to function 1

        used += guess;

        guessInWord();              //call to function 2
    }

    //shut down
    if(wrong == MAX_WRONG)
        cout << "\nYou've been hanged!";
    else
        cout << "\nYou guessed it!";

    cout << "\nThe Word was " << THE_WORD << endl;

    return 0;
}

//function Definitions 1
char playerGuess()
{
    char letter;
    cout << "\n\nEnter your guess: ";
    cin >> letter;
    letter = toupper(letter); //makes uppercase of letter
    while (used.find(letter) != string::npos)
    {
        cout <<"\nYou've already guessed " << letter << endl;
        cout <<"Enter your guess: ";
        cin >> letter;
        letter = toupper(letter);
    }
    return letter;
}

//function Definitions 2
void guessInWord()
{
    if (THE_WORD.find(guess) != string::npos)
    {
        cout << "That's right! " << guess << " is in the word.\n";

        //update soFar to Include newly guessed letter
        for (int i = 0; i < THE_WORD.length(); ++i)
            if (THE_WORD[i] == guess)
                soFar[i] = guess;
    }
    else
    {
        cout << "Sorry, " << guess << " isn't in the word.\n";
        ++wrong;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:11:45.620

您的函数原型不应与其实现不同：

```
void guessInWord();  ------> char guessInWord();
^^^^                         ^^^^ 
```

将这些设为全局（我个人不喜欢设为全局），因为您在其他函数中使用它们：

```
vector<string> words;
string used;
string THE_WORD;
int wrong;
string soFar;
char guess; 
```

绝对会遇到运行时错误或逻辑问题。，继续...

```
char playerGuess();
char guessInWord();

vector<string> words;
string used = "";
string THE_WORD;
int wrong = 0;
string soFar(THE_WORD.size(), '-');
char guess;

int main()
{
    const int MAX_WRONG = 8;

    words.push_back("DAFTPUNK");
    words.push_back("ELSALVADOR");
    words.push_back("HIPHOP");

    THE_WORD = words[0];

    srand(time(0));
    random_shuffle(words.begin(), words.end());

    cout << "Welcome to Hangmam. Good luck!\n";

    while ((wrong < MAX_WRONG) && (soFar != THE_WORD))
    {
        cout << "\nYou have " << (MAX_WRONG - wrong) << " incorrect guesses left.\n";
        cout << "\nYou've used the following letters:\n" << used << endl;
        cout << "\nSo far, the word is:\n" << soFar << endl;

        guess = playerGuess();
        used += guess;
        guessInWord();
    }

    if (wrong == MAX_WRONG)
        cout << "\nYou've been hanged!";
    else
        cout << "\nYou guessed it!";

    cout << "\nThe Word was " << THE_WORD << endl;

    return 0;
}

char playerGuess()
{
    char letter;
    cout << "\n\nEnter your guess: ";
    cin >> letter;
    letter = toupper(letter); //makes uppercase of letter
    while (used.find(letter) != string::npos)
    {
        cout << "\nYou've already guessed " << letter << endl;
        cout << "Enter your guess: ";
        cin >> letter;
        letter = toupper(letter);
    }
    return letter;
}

char guessInWord()
{
    if (THE_WORD.find(guess) != string::npos)
    {
        cout << "That's right! " << guess << " is in the word.\n";

        for (int i = 0; i < THE_WORD.length(); ++i)
            if (THE_WORD[i] == guess)
                soFar[i] = guess;
    }
    else
    {
        cout << "Sorry, " << guess << " isn't in the word.\n";
        ++wrong;
    }
} 
```

# savefiledialog - SaveFileDialog 文件扩展名是默认的 Excel 版本

> ID：16160726
> 
> 赞同：0
> 
> 时间：2013-04-23T04:03:53.233
> 
> 标签：savefiledialog

我有以下代码将文件保存在给定用户机器上的默认 Excel 版本中。

```
xlWorkBook.SaveAs("c:\\AMORT_data", Excel.XlFileFormat.xlWorkbookDefault, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue); 
```

如何使用 SaveFiledialog（尤其是 .filter）格式使用此语法？我尝试了这样的事情，但我得到了旧的“无法同谋转换......”错误。只是将 Excel 默认值转换为字符串还是更复杂。

```
saveFileDialog1.Filter = Excel.XlFileFormat.xlWorkbookDefault; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:14:35.770

您是否尝试过以下操作：

```
saveFileDialog1.Filter = "Excel file|*.xls"; 
```

这应该限制文件在 saveFileDialog 中显示为 .xls 文件。从 saveFileDialog 打开和保存文件的整个示例可以在[这里](http://msdn.microsoft.com/en-us/library/sfezx97z.aspx)看到。

请注意，SaveFileDialog 本身不负责保存文件。它只是向您显示您将保存文件的位置。为确保您保存的文件是 excel 文件，您只需在保存前检查文件扩展名，以便告知用户要使用的正确格式。

# c# - 逐列循环数据表

> ID：16160730
> 
> 赞同：3
> 
> 时间：2013-04-23T04:04:06.793
> 
> 标签：c#, asp.net

我有一个数据表，其中包含以下格式的数据：让我们将此数据表命名为 dt1

```
ColumnA       ColumnB        ColumnC
-------------------------------------
President     Manager        President
                             Manager 
```

上述数据表中的数据作为网络表单上的清单供选择以供选择权威。当检查清单中的项目并单击按钮时，我将选中的项目插入另一个数据表，如下所示： 我们将此数据表命名为 dt2

```
 ----------
  Manager
  President
  Manager 
```

现在我需要从 dt2 中的数据项出现的 dt1（第一个数据表）获取列名。例如，在这种情况下，我需要的输出到另一个数据表（比如 dt3）将是

```
--------
ColumnB
ColumnC
ColumnC 
```

在这个数据表（dt3）中，“colummB”被包括在内，因为 dt2（它包含清单中的检查文本）具有数据项“管理器”，它出现在 dt1 中的“列 B”下；'ColumnC' 出现两次，因为 dt2 包含出现在 dt1 中的 'ColumnC' 下的 'President' 和 'Manager'。

我需要一个有效的循环（对于 dt1 最好是 coulmnwise），以便我可以比较 dt1 和 dt2 的值并将它们添加到 dt3。请注意，dt1 和 dt2 中的数据项不是固定的，因为 dt1 包含来自数据库的数据，而 dt2 已检查表单中的值。最后，dt3 的行数应该等于 dt2 的行数（或者）可以将新列添加到 dt2 而不是创建 dt3（仍然保持相同的行数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:18:12.153

可以循环遍历数据表的每一行和每一列。
然后遍历第二个数据表值
如果值匹配选择列名。

**下面只是和想法你可以做什么**

```
 DataTable dt1;
 DataTable dt2;
 DataTable dt3;
 string[] ar=new string....

 foreach (DataRow dr in dt1.Rows)
 {
      foreach (DataColumn clm in dt1.Columns)
      {
          //loop through each value of the other table
          foreach(DataRow drow in dt2.Rows)
          {
               string value = drow[0].ToString();
               if(value==clm)
               {
                    //add the column name into a array
                     DataRow row = dt3.NewRow();
                     row[0]=clm.ColumnName;
                     dt3.Rows.Add(row);
                     break;
               } 
          }
      }
 } 
```

# javascript - 引导工具提示不显示带有特殊字符的文本

> ID：16160734
> 
> 赞同：0
> 
> 时间：2013-04-23T04:04:31.787
> 
> 标签：javascript, html, twitter-bootstrap

如果 Bootstrap 工具提示包含特殊字符或标签，则无法正确显示文本。目前我有一个类似的文本，`<checkme>test</checkme>`但它只在工具提示中显示“测试”。尝试转义特殊字符但它不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:37:44.707

没有示例，很难知道您的具体问题是什么。[但是，我花了几秒钟的时间在这个小提琴](http://jsfiddle.net/jshado1/MDCeQ/)中拼凑了一个工作示例：

```
<div id="hexcode" title="&copy; Jacob">
  My tooltip reads an HTML character code.
</div>

<script type="text/javascript">
  $("#hexcode").tooltip({ trigger: 'hover' , placement: 'right' });
</script> 
```

此外，如果您希望在工具提示选项对象中指定您想要的文本，JavaScript 接受/解释 Unicode 序列，正如[O'Rielly 在此处](http://answers.oreilly.com/topic/1786-how-to-insert-special-characters-in-javascript/)解释的那样。

**编辑**以反映新信息：

```
<div id="hexcode" title="&lt;checkme&gt;test&lt;/checkme&gt;">
  My tooltip reads an HTML character code.
</div> 
```

[http://jsfiddle.net/jshado1/MDCeQ/6/](http://jsfiddle.net/jshado1/MDCeQ/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T18:38:00.307

在 MVC 中存在一个 HTML Helper 来解释一个 html 特殊字符。这是@Html.Raw（变量）

# internet-explorer-8 - Dart2JS 和 IE8

> ID：16160735
> 
> 赞同：5
> 
> 时间：2013-04-23T04:04:32.480
> 
> 标签：internet-explorer-8, dart

所以我正在研究新的框架，并且对我所读到的关于 Dart 的内容印象深刻。当然，我必须至少支持 IE8，而 Dart 似乎没有提供。我想知道为什么会这样。仅仅是因为它编译为 ES5 吗？一些简单的polyfills会解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T04:25:24.640

（感谢您查看 Dart，我们很高兴您喜欢您所看到的！）

Dart 来自未来，今天。看看任何趋势，有一点很清楚：移动、移动、移动。哦，还有自动更新的现代浏览器。

将任何时间花在旧版浏览器上，这些浏览器带有过时的 JavaScript 引擎和对 HTML5（如果有的话）的微弱支持，这意味着我们*不会*花时间在一个综合平台上为开发人员构建让用户惊叹的应用程序。我们相信用户期望很高，满足和超越它们的唯一方法是构建一个在现代 JavaScript 引擎上运行并可以利用各种 HTML5 功能的平台。您无法构建一个炫耀现代网络力量*并*支持旧版浏览器的奇妙体验。

为了快速解决问题，请鼓励使用旧版浏览器的用户安装 Chrome Frame。或者，更好的是，鼓励他们升级浏览器。

至于是*什么*阻止了 Dart 在旧版浏览器中使用：

*   缺乏测试。我们的[构建机器人](http://buildbot.dartlang.org)不会针对旧版浏览器进行测试。
*   缺少 ES5 JavaScript 引擎。
*   人手。我们的资源更好地用于构建现代网络浏览器。

我不确定我们是否探索了 ES5 垫片是否可以工作。不过，我们很乐意听取社区的意见，如果他们能做到这一点。

# java - Java：第二次使用套接字时挂起

> ID：16160738
> 
> 赞同：0
> 
> 时间：2013-04-23T04:04:47.227
> 
> 标签：java, sockets, stream

我有一个客户端类和一个服务器类。如果我在 jvm 会话期间多次尝试使用此方法，则有一个客户端方法用于调用服务器，并且我的代码会挂起。

客户端代码的主要方法：

```
methodA();
methodA();
ois.close(); //ObjectInputStream
oos.close(); //ObjrctOutputStream
is.close(); //InputStream
os.close(); //OutputStream
socket.close(); 
```

客户端代码`methodA()`如下所示：

```
os = socket.getOutputStream();
oos = new ObjectOutputStream(os);
oos.writeObject(obj);
is = socket.getInputStream();
ois = new ObjectInputStream(is);
Object o = ois.readObject(); 
```

服务器代码的主要方法如下所示：

```
while (true) {
    Socket socket = serverSocket.accept();
    is = socket.getInputStream();
    ois = new ObjectInputStream(is);
    Object o = ois.readObject();
    servermethod();
}
oos.close();
ois.close();
is.close();
os.close();
serverSocket.close(); 
```

服务器的`serverMethod()`样子：

```
os = socket.getOutputStream();
oos = new ObjectOutputStream(os);
Object ob = getObject() ; //this method is working fine
oos.writeObject(ob); 
```

我想做的是让客户端使用`methodA()`. 我可能没有正确处理流。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:16:15.043

这段代码肯定有一些问题：

*   您在相同的流之上重复创建 ObjectInputStream 和 ObjectOutputStream。这不是它们应该如何使用的方式。您应该做的是创建一次 ObjectXxxStream，然后在同一个 ObjectXxxStream 上多次调用 readObject 或 writeObject。如果您多次发送相同的对象，则需要`reset`在再次写入对象之前调用。

*   您没有冲洗流。如果您在写入后不刷新，则无法保证序列化的表示将被发送到另一端……那里正在等待字节到达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:00:39.417

您的服务器端代码的编写方式是只读取一个对象并将一个对象写入新创建的`Socket`. 因此，您尝试重用`Socket`第二次或第 n 次，它不会从服务器返回响应。有 2 种方法可以修复它。

1.  您可以在服务器端修复：这将是一个精心设计的更改，但更好地利用资源。在关闭之前，您不会停止读取流。

2.  您在客户端修复它：您创建内部而不是创建方法`Socket`外部。虽然简单而肮脏的解决方案。`main``Socket``MethodA()`

# javascript - 在 jquery 中使用 get 函数时脚本未运行

> ID：16160742
> 
> 赞同：1
> 
> 时间：2013-04-23T04:05:35.327
> 
> 标签：javascript, jquery, html

我正在使用该`$.get()`功能从我的网站中提取一些数据。一切都很好，但是在其中一个页面上，我需要提取的信息是动态创建的，然后插入到`<div>`标签中。

所以在`<script>`标签中，运行一个函数，然后将数据插入到`<div id="infoContainer"></div>`. 我需要从中获取信息`#infoContainer`，但是当我尝试在`$.get()`函数中这样做时，它只是说它是空的。我发现这是因为`<script>`标签没有运行。还有另一种方法可以做到这一点吗？

编辑：我正在使用 jQuery 为我的网站制作一个 PhoneGap 应用程序来移动内容，因此它对于手机来说更加精简。

这是我页面上的代码：

```
$(document).ready(function () {
    var embedTag = document.createElement("embed");
    var infoContainer = document.getElementById("infoContainer");

    if (infoContainer != null) {
        embedTag.setAttribute("height", "139");
        embedTag.setAttribute("width", "356");...other attributes

        infoContainer.appendChild(embedTag);
    });
}); 
```

如您所见，它将内容放入`#infoContainer`标签中。但是，当我尝试通过 get 函数从该标签中提取信息时，它显示为空。我已经做了同样的事情来提取标题并且效果很好。我只能收集到脚本标签没有触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:09:39.637

看起来您想使用 jQuery，但您的示例代码有 vanilla JavaScript。可以使用以下 jQuery ( [jsFiddle](http://jsfiddle.net/Cwalkdawg/whrr9/4/) ) 简化您的整个函数：

```
(function () {
    var embedTag = $(document.createElement("embed"));
    var infoContainer = $("#infoContainer");

    if (infoContainer.length) {
        embedTag.attr({"height": 139, "width": 356});
        infoContainer.append(embedTag);
    }

    console.log(infoContainer.html()); // This gets you the contents of #infoContainer
})(); 
```

[jQuery 的 .get()](http://api.jquery.com/jQuery.get/)方法用于向`GET`服务器端脚本发送请求。我不认为它做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:13:11.210

这应该为您提供元素的内容：

```
$('#infoContainer').html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:27:44.547

也许您的脚本在加载 DOM 之前正在执行。

因此，如果您正在操作 DOM 元素，您应该等到 DOM 加载后才能操作它。或者，您可以将脚本标记放在 HTML 文档的末尾。

```
// These three are equivalent, choose one:
document.addEventListener('DOMContentLoaded', initializeOrWhatever);
$( initializeOrWhatever );
$.ready( initializeOrWhatever );

function initializeOrWhatever(){
  // By the time this is called, the DOM is loaded and you can read/write to it
  $.getJSON('/foo/', { myData: $('#myInput').val() }, onResponse);
  function onResponse(res){  
    $(document).html('<h1>Hello '+res+'</h1>');
  };
}; 
```

否则...发布更多细节和代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:05:36.230

您没有可参考的 ID。在追加之前尝试设置一个

```
embedTag.setAttribute("id", "uniqueID"); 
```

# c++ - Visual Studio .exe 不会运行程序

> ID：16160744
> 
> 赞同：0
> 
> 时间：2013-04-23T04:05:53.290
> 
> 标签：c++, visual-studio-2012, runtime, exe

我在将 C++ 程序作为`.exe`文件运行时遇到了一些麻烦。它接受一个输入文件（在项目属性>调试器中指定`< input.txt`）并输出两个文件。

当我在 Visual Studio 本身中运行程序时，一切都完成得很好。正在写入的文件是正确的。但是，当我尝试运行该`.exe`文件时，它似乎没有做任何事情。

项目名称=`test`

我正在运行`.exe`from: `test\Debug\test.exe`。这是我在 VS 项目文件夹中看到`.exe`文件的唯一位置。我也已将预期移动`input.txt`到同一位置。谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:12:01.020

听起来您正在将 input.txt 作为参数传递给程序。在这种情况下，您必须像这样启动程序：

`test.exe < input.txt`

这就是 VS 在您调试程序时为您所做的。将文件放在程序旁边与传递参数不同。

# linq - 多对多 EF Code First 对象中带有 where 子句的 Linq

> ID：16160747
> 
> 赞同：5
> 
> 时间：2013-04-23T04:06:13.707
> 
> 标签：linq, entity-framework, asp.net-mvc-4, ef-code-first

在 MVC4 项目中，首先使用代码，我有以下内容：

```
public class Course 
{
   public string CourseId { get; set; }
   public string Name { get; set; }
   public bool IsActive { get; set; }

   public virtual Categories ICollection<Category> { get; set; }

   public Course()
   {
      Categories = new HashSet<Category>();
   }
}

public class Category
{
   public string CategoryId { get; set; }
   public string Name { get; set; }

   public virtual Courses ICollection<Course> { get; set; }

   public Category()
   {
      Courses = new HashSet<Course>();
   }
} 
```

Code First 然后正确地为这个关系创建一个额外的表，因为它是多对多的。

我的问题是当我需要一个包含活动课程（IsActive==true）的类别列表时。例如，这在这里是不可能的：

```
var categories = db.Categories.Where(x => x.Courses.Where(y => y.IsActive)).ToList(); 
```

任何输入如何获得仅包含活动课程的类别列表？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T04:13:03.333

此查询将返回至少有一个活动课程的所有类别：

```
var categories = db.Categories
    .Where(x => x.Courses.Any(y => y.IsActive))
    .ToList(); 
```

此查询将返回其课程全部处于活动状态的所有类别。例如，如果一个类别有两门课程并且其中一门课程处于非活动状态，则该类别将从查询中排除：

```
var categories = db.Categories
    .Where(x => x.Courses.All(y => y.IsActive))
    .ToList(); 
```

# ruby - 如何在 Rails 中为 update_attributes 赋值？

> ID：16160748
> 
> 赞同：0
> 
> 时间：2013-04-23T04:06:17.043
> 
> 标签：ruby, ruby-on-rails-3.2

我有一个关于使用 update_attributes 分配值的菜鸟问题。

在检查控制器中，保存新的检查记录，然后检索与某些新检查字段匹配的患者记录。这部分工作正常。

```
@exam.save

@patient = Patient.joins(:charts).where(:dob => @exam.patient_dob).where(:charts => { :provider_id => @exam.provider_id, :patient_mrn => @exam.patient_mrn }) 
```

然后我尝试使用@patient记录中的值更新新的@exam记录，使用以下崩溃和烧毁......

```
@exam.update_attributes(:patient_id, @patient.id) 
```

我怎么会误入歧途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:18:21.380

您在那里更新单个值，而不是多个值，因此`update_attribute`更合适。`update_attributes`需要一个值的散列来更新。

请参阅[http://apidock.com/rails/ActiveRecord/Base/update_attribute](http://apidock.com/rails/ActiveRecord/Base/update_attribute)和[http://apidock.com/rails/ActiveRecord/Persistence/update_attributes](http://apidock.com/rails/ActiveRecord/Persistence/update_attributes)

# java - 更改像素的 alpha 值

> ID：16160750
> 
> 赞同：0
> 
> 时间：2013-04-23T04:06:53.887
> 
> 标签：java, image, hex, pixel, transparent

我正在尝试更改像素的 alpha 值以使图像半透明。这是我的代码：

```
for(int x=0;x<image1.getWidth();x++) {
    for(int y=0;y<image1.getHeight();y++) {
        int rgb = image1.getRGB(x, y);

        rgb = rgb | 0x000000ff; // make the image blue.
        rgb = rgb & 0x33ffffff; // make the image transparent.
        System.out.println("before: " + Integer.toHexString(rgb));

        image1.setRGB(x, y, rgb);
        int now_rgb= image1.getRGB(x, y);
        System.out.println("after: " + Integer.toHexString(now_rgb));
    }
} 
```

输出是这样的：

```
before: 331b1aff
after: ff1b1aff
before: 331918ff
after: ff1918ff
before: 331e1bff
after: ff1e1bff
before: 332623ff
after: ff2623ff
before: 332e29ff
after: ff2e29ff 
```

如您所见，setRGB 似乎省略了 alpha 值并将其设置为“ff”。我该如何解决这个问题，为什么会首先发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:24:36.720

这可能是因为您`BufferedImage`的颜色模型不支持 alpha 或者可能只使用一个位作为 alpha。

你从哪里来`image`的？它的颜色模型也是 ARGB 吗？使用`image.getColorModel().`[hasAlpha()](http://docs.oracle.com/javase/7/docs/api/java/awt/image/ColorModel.html#hasAlpha%28%29)来检查。如果没有，请确保在创建图像时它具有适当的颜色模型，如果无法更改，请使用所需的颜色模型创建新图像并首先复制源图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:33:59.023

使用[AlphaComposite](http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html)：

```
BufferedImage img = //some code here
BufferedImage imgClone = //some clone of img, but let its type be BufferedImage.TYPE_INT_ARGB
Graphics2D imgCloneG = imgClone.createGraphics();
imgCloneG.setComposite(AlphaComposite.getInstance(AlphaComposite.DST_IN, 0.5f));
imgCloneG.drawImage(img, 0, 0, null);
//imgClone is now img at half alpha 
```

`imgClone`可以这样制作：

```
...
imgClone = new BufferedImage(img.getWidth(), img.getHeight(), 
                             BufferedImage.TYPE_INT_ARGB);
Graphics2D imgCloneG = imgClone.createGraphics();
imgCloneG.drawImage(img, 0, 0, null);
imgCloneG.setComposite(AlphaComposite.getInstance(AlphaComposite.DST_IN, 0.5f));
... 
```

# javascript - 使用带有 Zepto Undefined 的引导程序不是一个函数

> ID：16160755
> 
> 赞同：1
> 
> 时间：2013-04-23T04:07:32.083
> 
> 标签：javascript, jquery, twitter-bootstrap, zepto

在 html 中与玉

```
link(rel="stylesheet",href="/stylesheets/index/index.css")
script(src="/javascripts/assets/jquery_loader.js")
script(src="/javascripts/assets/bootstrap/bootstrap.js") 
```

如果IE是浏览器，我使用modernizr加载zepto或jquery

```
Modernizr.load(
{
    test: /(msie) ([\w.]+)/.test(navigator.userAgent),
    yep: '/javascripts/assets/jquery/jquery-1.9.1.min.js',
    nope: '/javascripts/assets/zepto/zepto.min.js',
    complete:function()
    {
        if(!window.jQuery)
        {
            Zepto.browser = {webkit: true}
            window.jQuery = Zepto
        }
    }
}); 
```

我收到此错误

```
Uncaught TypeError: undefined is not a function 
(anonymous function) bootstrap.js:60 
```

在线：60

```
}(window.jQuery); 
```

我尝试用modernizr加载引导程序

```
Modernizr.load(
{
    test: /(msie) ([\w.]+)/.test(navigator.userAgent),
    yep: ['/javascripts/assets/jquery/jquery-1.9.1.min.js','/javascripts/assets/bootstrap/bootstrap.js'],
    nope: ['/javascripts/assets/zepto/zepto.min.js','/javascripts/assets/bootstrap/bootstrap.js'],
    complete:function()
    {
        if(!window.jQuery)
        {
            Zepto.browser = {webkit: true}
            window.jQuery = Zepto
        }
    }
}); 
```

并且错误消失但引导程序不起作用所以我在控制台中测试

```
typeof $().modal == 'function' 
```

结果是“假”，这意味着引导程序不会从服务器下载

我该如何解决这个问题？tnx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:30:43.137

我用这个脚本解决了这个问题，tnx all！

```
Modernizr.load(
{
    test: /MSIE ([0-9]{1,}[\.0-9]{0,})/.test(navigator.userAgent),
    yep: '/javascripts/assets/jquery/jquery-1.9.1.min.js',
    nope: '/javascripts/assets/zepto/zepto.min.js',
    complete:function()
    {
        if(!window.jQuery)
        {
            Zepto.browser = {webkit: true}
            window.jQuery = Zepto
            console.log('Zepto')
        }
        Modernizr.load(
        {
            load:'/javascripts/assets/bootstrap/bootstrap.js',
            complete:function()
            {
                console.log('Loaded!')
            },
        })
    },
}); 
```

# hadoop-streaming - 作为 Amazon-EMR 的输入数据，唯一合法的格式是纯文本吗？

> ID：16160762
> 
> 赞同：0
> 
> 时间：2013-04-23T04:07:51.267
> 
> 标签：hadoop-streaming, amazon-emr

正如 Amazon EMR 的“开发人员指南”中所引用的，输入目录中的文件应格式化为纯文本。这是否意味着我无法上传一些二进制文件或 .png 文件并通过 python 脚本解析它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:21:46.860

可能不会。参见例如：[https ://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/AUUZ0DKiJGw](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/AUUZ0DKiJGw)

您可以做的是让输入数据成为文件名本身（在 S3 或 HDFS 中）。Hadoop 流脚本将获取文件名作为输入，它可以根据需要打开和处理。

# c++ - C++ 意外挂起时间

> ID：16160764
> 
> 赞同：0
> 
> 时间：2013-04-23T04:07:55.460
> 
> 标签：c++, for-loop, set, cout

我正在尝试在我的程序中编写一个函数，该函数加载一个包含 216,555 个单词的巨大文本文件并将它们作为字符串放入一个集合中。这可以正常工作，但正如预期的那样，它会在循环文件时挂起几微秒。但是我的循环发生了一些奇怪的事情，而且它的行为不正常。请花时间阅读，我确信这是有正当理由的，但我不知道要搜索什么。

顺便说一句，代码是这样的：

```
ifstream dictionary;
dictionary.open("Dictionary.txt");

if(dictionary.fail())
{
    cout<<"Could not find Dictionary.txt. Exiting."<<endl;
    exit(0);
}
int i = 0;
int progress = 216555/50;
cout<<"Loading dictionary..."<<endl;
cout<<"<                                                  >"<<endl;
cout<<"<";
for(string line; getline(dictionary, line);)
{
    usleep(1); //Explanation below (not the hangtime)
    i++;
    if(i%progress == 0)
        cout<<"=";
    words.insert(line);
} 
```

for 循环从文件中获取每个字符串，并将它们插入到映射中。这是一个控制台应用程序，我希望用户看到进度。这不是什么延迟，但我还是想这样做。如果您不理解代码，我将尝试解释。

当程序启动时，它首先打印出“Loading Dictionary...”，然后是由 50 个空格分隔的“<”和“>”。然后在下一行：“<”后跟一个“=”，表示它循环通过的每 433 个单词 (216555/50)。这样做的目的是让用户可以看到进度。循环中途所需的输出将如下所示：

```
Loading dictionary...
<                                                  >
<========================= 
```

**我的问题是：** 显示了正确的输出，但不是在预期的时间。它打印出完整的进度条，但只有在它挂起并完成循环之后。这怎么可能？显示了正确数量的“=”，但它们都同时弹出，在它挂起几微秒之后。我添加了 usleep(1) 以延长挂起时间，但同样的事情发生了。if 语句显然有效，或者“=”根本不会显示，但感觉就像我的程序在整个循环之后堆叠 cout 调用。

最奇怪的是，`cout<<"<";`for循环开始之前的最后一个，也与它的行的其余部分同时显示；循环结束后。为什么以及如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:10:24.293

您永远不会刷新流，因此输出只会进入缓冲区。

更改`cout<<"=";`为`cout<<"="<<std::flush;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T04:10:24.973

您需要刷新输出流。

```
cout << "=" << std::flush; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T04:14:54.923

该程序*是*“堆叠 cout-calls”。它被称为输出缓冲，每个主要操作系统都这样做。

当处于交互模式时（因为您的程序打算被使用），输出按行缓冲；也就是说，当看到换行符时，它将被强制到终端。您还可以有块缓冲（强制输出之间的固定字节数；在管道输出时使用）和无缓冲。

C++ 提供了`std::flush`流修饰符来在任何时候强制输出。它可以这样使用：

```
cout << "=" << std::flush; 
```

这会使您的程序变慢一点；缓冲的目的是为了提高效率。但是，由于您只会执行大约 51 次，因此减速应该可以忽略不计。

# mysql - 安全的 MySQL 根密码？

> ID：16160765
> 
> 赞同：0
> 
> 时间：2013-04-23T04:08:03.227
> 
> 标签：mysql, security, passwords

我访问 mysql 数据库的用户名和密码当前位于根级别的配置文件中。每当我需要访问时，我都会包含配置文件。对我来说似乎不安全。

如何保护用户名和密码？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T04:13:05.407

该密码必须存储在某个地方才能正常工作。即使您加密了该密码并且有人访问了您的配置文件，他们也可以使用该加密密码登录。您可以从以下 4 件事开始。

1.  不要在`root`创建新用户名时运行脚本并仅为其分配所需的数据库权限。不要将`root`密码保存在配置中
2.  只允许从 访问您的 MySQL `localhost`，不允许远程访问
3.  查看[http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html](http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html)
4.  不要将您的配置文件存储在您的 Web 可访问文件夹中。这样做会增加一些额外的安全性，除非您的服务器本身受到威胁，否则仅使用 HTTP 访问该文件并不容易。

但是，这些都不能保证万无一失的安全性，它们只会让某人更难到达那里

# xml - XSLT for 循环或替代节点复制

> ID：16160768
> 
> 赞同：2
> 
> 时间：2013-04-23T04:08:32.520
> 
> 标签：xml, for-loop, iteration, xslt-1.0

在我的阅读中，很明显，`for i .. m`XSLT 1.0 中循环的唯一明智的解决方法是使用递归模板。

除非有人可以另外解释，否则似乎进一步考虑到 XSLT 处理的限制，这种方法通常不能重用。

无论如何，给定一个输入片段（*在这种情况下为上下文节点*）：

```
<items count="3">
    <item>
        <name>Name</name>
        <description>Description</description>
    </item>
</items> 
```

是否有可重用的策略来`<item>`根据`count`属性复制孩子？这里的预期输出只是

```
<item>
    <name>Name</name>
    <description>Description</description>
</item>
<item>
    <name>Name</name>
    <description>Description</description>
</item>
<item>
    <name>Name</name>
    <description>Description</description>
</item> 
```

我打算对`<item>`节点进行进一步的转换，但我认为它们不相关。

可重用性对我来说是一个关注点，原因很简单，`count`属性在输入文档的元素中很常见，语义意图正如我上面的示例所描述的那样。

如果我要使用递归迭代器方法，我必须将它烘焙到每个模板中（*这将非常不干燥；更像是非常湿，就像在“为什么还要尝试”中一样；但我离题了*）

如果有*一种*创建通用`for`模板的策略，可以使用该模板执行任何转换操作，那将是非常壮观的。如果我可以在不使用任何递归迭代器的情况下摆脱困境，如果在 XSLT 1.0 中隐藏了一些用于此目的的函数的珍宝，那将同样壮观。

无论如何，我怎样才能做到这一点？我需要求助于 WET 方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:35:29.157

递归没有错。对于这种情况，使其足够通用应该很容易。

这是一个例子。除了输出与 相同编号的子元素外`count`，我还将`name`元素更改为`new_elem`（只是为了显示额外的转换）...

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@count]">
        <xsl:apply-templates select="*" mode="dupe">
            <xsl:with-param name="count" select="@count"/>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="*" mode="dupe">
        <xsl:param name="count"/>
        <xsl:apply-templates select="."/>
        <xsl:if test="$count > 1">
            <xsl:apply-templates mode="dupe" select=".">
                <xsl:with-param name="count" select="$count - 1"/>
            </xsl:apply-templates>
        </xsl:if>
    </xsl:template>

    <xsl:template match="name">
        <new_elem><xsl:value-of select="."/></new_elem>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**（使用问题的输入）

```
<item>
   <new_elem>Name</new_elem>
   <description>Description</description>
</item>
<item>
   <new_elem>Name</new_elem>
   <description>Description</description>
</item>
<item>
   <new_elem>Name</new_elem>
   <description>Description</description>
</item> 
```

如果您可以使用 XSLT 2.0，您可以像问题开头所说的那样进行迭代：

**XSLT 2.0**（产生与上面相同的输出。如果有多个子元素会略有不同`*[@count]`）

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@count]">
        <xsl:variable name="curr" select="."/>
        <xsl:for-each select="1 to @count">
            <xsl:apply-templates select="$curr/*"/>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="name">
        <new_elem><xsl:value-of select="."/></new_elem>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:44:10.730

> 如果有一种策略可以为模板创建一个通用的模板，使用它可以执行任何转换操作，那将是非常壮观的。如果我可以在不使用任何递归迭代器的情况下摆脱困境，如果在 XSLT 1.0 中隐藏了一些用于此目的的函数的瑰宝，那将同样壮观。
> 
> 无论如何，我怎样才能做到这一点？我需要求助于 WET 方法，还是有更好的方法？

**想要的 DRY-ness 是[FXSL](http://fxsl.sf.net)的模板/功能的一个微不足道的应用[`iter`](http://fxsl.cvs.sourceforge.net/viewvc/fxsl/fxsl-xslt2/f/iter.xsl?revision=1.3&view=markup)：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:f="http://fxsl.sf.net/" xmlns:myRepeat="f:myRepeat"
 exclude-result-prefixes="xsl f myRepeat">
 <xsl:import href="iter.xsl"/>

 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

  <myRepeat:myRepeat/>
  <xsl:variable name="vFunRepeat" select="document('')/*/myRepeat:*[1]"/>

  <xsl:variable name="vAdditive" select="/*/*[1]"/>

  <xsl:template match="/*">
        <xsl:call-template name="iter">
          <xsl:with-param name="pTimes" select="@count"/>
          <xsl:with-param name="pFun" select="$vFunRepeat"/>
          <xsl:with-param name="pX" select="/.."/>
        </xsl:call-template>
  </xsl:template>

  <xsl:template match="myRepeat:*" mode="f:FXSL">
    <xsl:param name="arg1"/>

    <xsl:copy-of select="$arg1 | $vAdditive"/>
  </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<items count="3">
    <item>
        <name>Name</name>
        <description>Description</description>
    </item>
</items> 
```

**产生了想要的正确结果：**

```
<item>
   <name>Name</name>
   <description>Description</description>
</item>
<item>
   <name>Name</name>
   <description>Description</description>
</item>
<item>
   <name>Name</name>
   <description>Description</description>
</item> 
```

**请注意**：

1.  您根本不必编写任何递归模板。

2.  与大多数其他 FXSL 的模板一样，该`iter`模板非常通用且功能强大，无需程序员一次又一次地编写和调试递归。

3.  FXSL 提供了所需的 DRY-ness 并激发了更抽象的思维——因此更强大的构造——函数、折叠、迭代等。

4.  碰巧这个问题在 XSLT 2.0 ( `<xsl:for-each select="1 to @count">`) 中有一个简单的解决方案，但是还有许多其他问题，在 XSLT 2.0 中的解决方案并不那么简单。FXSL 通过使用最通用和最强大的高阶函数（折叠、地图、扫描、拉链等）的通用和强大实现来帮助解决任何此类“困难”问题。

* * *

二、**使用[Piez 方法](http://www.dpawson.co.uk/xsl/sect2/muench.html#d9945e300)**（当 的值存在已知上限时`@count`）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vStyle" select="document('')"/>
 <xsl:variable name="vNodes" select=
   "$vStyle//node()|$vStyle//@* | $vStyle//namespace::*"/>

 <xsl:variable name="vAdditive" select="/*/*[1]"/>

 <xsl:template match="/*">
     <xsl:for-each select="$vNodes[not(position() > current()/@count)]">
       <xsl:copy-of select="$vAdditive"/>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<item>
   <name>Name</name>
   <description>Description</description>
</item>
<item>
   <name>Name</name>
   <description>Description</description>
</item>
<item>
   <name>Name</name>
   <description>Description</description>
</item> 
```

**请注意**：

当可以使用 Piez 方法时，可以完全避免递归。

**免责声明**：

我很高兴在 11 到 12 年前开发 FXSL，从那时起我已经提到过数千次，包括两篇会议论文，却不知道我应该提供免责声明：)

# installation - 尝试从谷歌安装 nacl（本机客户端）但出现语法错误

> ID：16160769
> 
> 赞同：0
> 
> 时间：2013-04-23T04:08:34.743
> 
> 标签：installation, google-nativeclient

```
C:\nacl_sdk>naclsdk list
  File "C:\nacl_sdk\sdk_tools\sdk_update_main.py", line 720
    print "Native Client SDK Updater, version r%s" % (REVISION,)
                                                 ^

SyntaxError: invalid syntax
  File "C:\nacl_sdk\sdk_tools\sdk_update_main.py", line 720
    print "Native Client SDK Updater, version r%s" % (REVISION,)
                                             ^

SyntaxError: invalid syntax

C:\nacl_sdk> 
```

这就是我在命令行上得到的。我没有对下载的解压缩文件夹进行任何操作，只是将其移动到`C:\ directory`. 任何建议、解决方案或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:44:47.173

You need to use Python 2 instead of Python 3.

# css - 导航栏周围不必要的“空白”空间

> ID：16160780
> 
> 赞同：2
> 
> 时间：2013-04-23T04:09:36.473
> 
> 标签：css, positioning, navbar

所以我对 css/HTML 很陌生（两个月左右），我正在研究一个由标题图像、Youtube 嵌入式播放器和导航栏组成的网站的主页。顺便说一句，第一次在这里发帖，我花了一段时间，但我终于设法居中/自动对齐我的网站，使用“包装器”，用于任何浏览器，或者如果你要放大和缩小浏览器，它将始终保持居中。现在我设法做到了，但我的问题是导航栏似乎有这个不必要的白色/空白空间附加到它的末尾，就像整个导航栏延伸得比实际导航链接更远，然后创建一个底部滚动条我不想。后面会有图片，但我可以判断的方式是当我在浏览器中突出显示它时。如果有人可以帮助我解决这个问题，那么我就不必有底部滚动条了' 非常感谢，谢谢！[![在这里你可以看到导航栏右侧的所有空白区域！

[单击此处查看问题图片，注意导航栏向右延伸太远](https://i.stack.imgur.com/JRQsX.png)] [1](https://i.stack.imgur.com/JRQsX.png)

**这是CSS**

```
<style>

*{  
margin:0;  
padding:0;  
}  

body{  
text-align:center; /*For IE6 Shenanigans*/  
}  

#wrapper{  
width:960px;  
margin:0 auto;  
text-align:left;  
}   

#navigation   {
    position:relative;
    left:100px;
    top:10px

}

#navigation li {
    list-style: none;
    display: block;
    float: left;
    margin: .5em;

<!--spacing between navbar-->
   padding-right: 20px;
   padding-left: 25px;

}

#navigation li a {   
    display: block;
    text-decoration: none;
    font-family: arial, sans-serif;
    color: #000000;
    font-size: 1.09em;
    margin: -.01em;
}

#navigation li a:hover {
color: #0000FF;
    text-decoration: underline;
}

#video1
{
    margin-left:83px;
    margin-top:40px;
    position:relative;
}

#mainlogo {
    position:relative;
    display: inline;
    left:300px;
    top:15px;
}

 /**
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
display: block;
}
body {
line-height: 1;
}
ol, ul {
list-style: none;
}
blockquote, q {
quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
content: '';
content: none;
}
table {
border-collapse: collapse;
border-spacing: 0;
}

</style> 
```

**这是 HTML**

```
</head>

<body>
<div id="wrapper">

<div id="mainlogo">
 <a href="http://s1287.photobucket.com/user/jakecan13/media/HeaderTest-
    1_zps78d21de6.png.html" target="_blank"><img 
   src="http://i1287.photobucket.com/albums/a628/jakecan13/HeaderTest-
1_zps78d21de6.png"  alt=404" height=55" width=370" photo HeaderTest-
1_zps78d21de6.png"/></a>

</div>

<ul id="navigation">
<li><a href="#Video">Video</a></li>
<li><a href="http://breakfastcircle.tumblr.com/">Photo</a></li>
<li><a href="#Contact">Contact</a></li>
<li><a href="#Store">Store</a></li>
</ul>

<div id="video1">
<iframe src="http://www.youtube.com/embed/GUEZCxBcM78?rel=0" width="800" height="500"
frameborder="0" allowfullscreen></iframe>

</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:16:47.920

问题是你用这条线把你的导航栏放在了*额外的*100 像素上：

```
#navigation{
left: 100px;
} 
```

如果你真的需要导航超过那么远，添加一个`float: left`属性到`#navigation`.

# sql - 如何在 SQL Server 2008 中的以下查询中保留临时表？

> ID：16160783
> 
> 赞同：4
> 
> 时间：2013-04-23T04:09:46.903
> 
> 标签：sql, sql-server-2008

```
select Executive, count([Cat A]) AS [1-3], count([Cat B]) AS [4-6],count([Cat C]) AS [7-10],count([Cat D]) AS [11-15],count([Cat E]) AS [16+]
      from (
            select 
                  Executive,
                case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 0 and DATEDIFF(d,[next follow up date],getdate()) < 4)
                              then 'A'
                  end as [Cat A],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 3 and DATEDIFF(d,[next follow up date],getdate()) < 7)
                              then 'B'
                  end as [Cat B],
                  case when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 6 and DATEDIFF(d,[next follow up date],getdate()) < 11)
                              then 'C'
                  end as [Cat C],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 10 and DATEDIFF(d,[next follow up date],getdate()) < 16)
                              then 'D'
                  end as [Cat D],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 15)
                              then 'E'
                  end as [Cat E]
                  from vw_FollowUps)
            as Table1
      group by Executive, [Cat A], [Cat B], [Cat C], [Cat D], [Cat E] 
```

* * *

**输出如下**

```
Executive  1-3  4-6  7-10  11-15  16+

Rani       0    0     0     0     0
Rani       0    1     0     2     0
Rani       0    0     1     0     0 
```

* * *

**但我需要像下面这样的输出**

```
Executive  1-3  4-6  7-10  11-15  16+

Rani        0    1     1     2     0 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:18:34.300

额外的 SELECT （其他两个答案）是**无关**的。

简单的 GROUP BY*只有*列`Executive`。

```
select Executive, count([Cat A]) AS [1-3], count([Cat B]) AS [4-6],count([Cat C]) AS [7-10],count([Cat D]) AS [11-15],count([Cat E]) AS [16+]
      from (
            select 
                  Executive,
                case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 0 and DATEDIFF(d,[next follow up date],getdate()) < 4)
                              then 'A'
                  end as [Cat A],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 3 and DATEDIFF(d,[next follow up date],getdate()) < 7)
                              then 'B'
                  end as [Cat B],
                  case when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 6 and DATEDIFF(d,[next follow up date],getdate()) < 11)
                              then 'C'
                  end as [Cat C],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 10 and DATEDIFF(d,[next follow up date],getdate()) < 16)
                              then 'D'
                  end as [Cat D],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 15)
                              then 'E'
                  end as [Cat E]
                  from vw_FollowUps)
            as Table1
      group by Executive; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:14:42.743

在整个事物周围添加一个选择：

```
SELECT Executive  SUM([1-3]), SUM([4-6]), SUM([7-10]), SUM([11-15]), SUM([16+])
FROM
(

   ....YOUR BIG SELECT....
)
GROUP BY Executive 
```

所以像这样：

```
SELECT Executive  SUM([1-3]), SUM([4-6]), SUM([7-10]), SUM([11-15]), SUM([16+])
FROM
(

    select Executive, count([Cat A]) AS [1-3], count([Cat B]) AS [4-6],count([Cat C]) AS [7-10],count([Cat D]) AS [11-15],count([Cat E]) AS [16+]
      from (
            select 
                  Executive,
                case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 0 and DATEDIFF(d,[next follow up date],getdate()) < 4)
                              then 'A'
                  end as [Cat A],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 3 and DATEDIFF(d,[next follow up date],getdate()) < 7)
                              then 'B'
                  end as [Cat B],
                  case when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 6 and DATEDIFF(d,[next follow up date],getdate()) < 11)
                              then 'C'
                  end as [Cat C],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 10 and DATEDIFF(d,[next follow up date],getdate()) < 16)
                              then 'D'
                  end as [Cat D],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 15)
                              then 'E'
                  end as [Cat E]
                  from vw_FollowUps)
            as Table1
      group by Executive, [Cat A], [Cat B], [Cat C], [Cat D], [Cat E]

)
GROUP BY Executive 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T04:21:04.003

您可以使用`Common Table Expression(CTE)`获得上述结果...您可以使用 CTE 进行新查询，如下所示：（未经测试，但实施方式是正确的）

```
WITH CTETABLE AS 
(
select Executive, count([Cat A]) AS [1-3], count([Cat B]) AS [4-6],count([Cat C]) AS [7-10],count([Cat D]) AS [11-15],count([Cat E]) AS [16+]
      from (
            select 
                  Executive,
                case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 0 and DATEDIFF(d,[next follow up date],getdate()) < 4)
                              then 'A'
                  end as [Cat A],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 3 and DATEDIFF(d,[next follow up date],getdate()) < 7)
                              then 'B'
                  end as [Cat B],
                  case when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 6 and DATEDIFF(d,[next follow up date],getdate()) < 11)
                              then 'C'
                  end as [Cat C],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 10 and DATEDIFF(d,[next follow up date],getdate()) < 16)
                              then 'D'
                  end as [Cat D],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 15)
                              then 'E'
                  end as [Cat E]
                  from vw_FollowUps)
            as Table1
      group by Executive, [Cat A], [Cat B], [Cat C], [Cat D], [Cat E]
)
SELECT Executive, MAX([1-3]),MAX([4-6]),MAX([7-10]),MAX([11-15],MAX([16+]) FROM CTETABLE GROUP BY Executive; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T04:16:05.840

```
select  Executive, SUM([1-3]), SUM([4-6]), SUM([7-10]), SUM([11-15]), SUM([16+]) FROM
(
select Executive, count([Cat A]) AS [1-3], count([Cat B]) AS [4-6],count([Cat C]) AS [7-10],count([Cat D]) AS [11-15],count([Cat E]) AS [16+]
      from (
            select 
                  Executive,
                case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 0 and DATEDIFF(d,[next follow up date],getdate()) < 4)
                              then 'A'
                  end as [Cat A],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 3 and DATEDIFF(d,[next follow up date],getdate()) < 7)
                              then 'B'
                  end as [Cat B],
                  case when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 6 and DATEDIFF(d,[next follow up date],getdate()) < 11)
                              then 'C'
                  end as [Cat C],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 10 and DATEDIFF(d,[next follow up date],getdate()) < 16)
                              then 'D'
                  end as [Cat D],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 15)
                              then 'E'
                  end as [Cat E]
                  from vw_FollowUps)
            as Table1
      group by Executive, [Cat A], [Cat B], [Cat C], [Cat D], [Cat E] ) AS T
group by Executive 
```

# vba - 如何在 excel 2007 中使用 vba 操作智能艺术？

> ID：16160789
> 
> 赞同：1
> 
> 时间：2013-04-23T04:10:27.607
> 
> 标签：vba, excel-2007

我正在尝试使用 excel 2007 vba 创建 smartart 组织结构图。我试图首先记录宏以查看涉及哪些对象，但没有运气。没有任何记录。在 excel 2010 中有一些智能艺术和 vba 的在线示例，但 excel 2007 没有。这是否意味着在 excel 2007 中使用 vba 无法访问智能艺术？可能有一些解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:28:04.387

这是可能的，但不是一项简单的任务。

阅读更多

[http://msdn.microsoft.com/en-us/library/office/gg583880(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/gg583880(v=office.14).aspx)

您需要操作文件的 XML 部分来创建 SmartArts 的新选项。

对我来说，非常大的工作，非常小的结果......

# fine-uploader - FineUploader onDeleteComplete

> ID：16160798
> 
> 赞同：1
> 
> 时间：2013-04-23T04:11:18.930
> 
> 标签：fine-uploader

如何实现 onDeleteComplete，我是放在 deletefile 里面：请求还是外面？

我之前使用过完整的方法，我尝试以相同的方式实现 onDeleteComplete 但我没有得到任何操作。以下是我尝试使用但失败的代码。

```
 $('#jquery-wrapped-fine-uploader').fineUploader({
                    request: {
                        endpoint: '/Test.aspx'
                    },
                    deleteFile: {
                        enabled: true,
                        endpoint: '/Test.aspx'
                    }
                }).on('onDeleteComplete', function (id, xhr, isError) {
                    alert('hi');
                }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:09:14.310

所以我终于得到了你的建议。

这是我的最终代码

```
 $('#jquery-wrapped-fine-uploader').fineUploader({
            request: {
                endpoint: '/Test.aspx'
            },
            deleteFile: {
                enabled: true,
                endpoint: '/Test.aspx'
            }
        }).on('deleteComplete', function (event, id, name, responseJSON) {
          alert('hi');
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:26:19.890

使用 jQuery 插件时回调的使用在fineuploader.com 上的示例/演示和文档中都有详细记录。文档中有两个不同的地方提到了我们的回调：[回调自述页面](http://docs.fineuploader.com/api/events.html)和[使用 jQuery 插件自述页面的回调部分](http://docs.fineuploader.com/integrating/modes/using-jquery-plugin.html#callbacks)。

代码中的“on”`"onDeleteComplete"`是多余的，应该改为`.on("deleteComplete", ...)`. 此外，jQuery 传递给所有事件处理程序的第一个参数是“event”。

请阅读文档，从[http://docs.fineuploader.com/](http://docs.fineuploader.com/)的第一页开始。阅读介绍性信息，然后按照您的用例概述的路径进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:55:03.940

现在怎么样？

```
$('#jquery-wrapped-fine-uploader').fineUploader({
            request: {
                endpoint: '/Test.aspx'
            },
            deleteFile: {
                enabled: true,
                endpoint: '/Test.aspx'
            }
        }).on('deleteComplete', function (id, xhr, isError) {
          alert('hi');
        }); 
```

# c - C中不兼容的指针类型

> ID：16160799
> 
> 赞同：3
> 
> 时间：2013-04-23T04:11:40.487
> 
> 标签：c

所以我试图将一个类型传递`double *`给一个接受`void **`作为参数之一的函数。这是我收到的警告。

```
incompatible pointer type passing 'double **' to parameter of type 'void **' 
```

这是我的代码片段。

```
int main( void )
{
    //  Local Declaration
    double *target;

   //   Statement
   success = dequeue(queueIn, &target);
} 
```

这是函数的原型声明。

```
int    dequeue     ( QUEUE *queue, void **dataOutPtr ); 
```

我认为如果我将目标作为两级指针传递它会起作用，但我想我错了。有人可以向我解释一下我为什么会收到这个警告吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:01:03.837

即使所有其他指针类型都可以在`void *`不丢失信息的情况下相互转换，但其他指针到指针类型并非如此`void **`；如果您取消引用一个`void **`指针，它需要指向一个真正的`void *`对象¹。

在这种情况下，假设`dequeue()`通过提供的指针存储它返回单个指针值，要正式正确，您需要执行以下操作：

```
int main( void )
{
    void *p;
    double *target;

    success = dequeue(queueIn, &p);
    target = p; 
```

当您这样编写它时，从`void *`to的转换`double *`是显式的，这允许编译器执行任何必要的魔法（即使在绝大多数情况下，根本没有魔法）。

* * *

^(1\. ...or a `char *`, `unsigned char *`or `signed char *`object，因为它们有一个特殊的规则。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:14:15.260

在您的原型声明中，您将第二个参数说为`void**`，因此您必须键入 cast `double**`to `void**`。而不是这一行`success = dequeue(queueIn, &target);`。

像这样打电话`success = dequeue(queueIn,(void**) &target);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T04:20:21.703

```
int main( void )
{
    //  Local Declaration
    double *target;

   //   Statement
   success = dequeue(queueIn, (void**)&target);
} 
```

像这样使用它。

# c# - 如何使用c#.net将xml转换为同名的excel表

> ID：16160804
> 
> 赞同：0
> 
> 时间：2013-04-23T04:12:29.183
> 
> 标签：c#, .net, excel, openxml

我使用以下代码及其工作。但每次它创建一个具有相同名称的 Excel 工作表。

谁能告诉我如何导出与 XML 表同名的 excel 表？？？？？？？

```
 private void button2_Click(object sender, EventArgs e)
    {
        MSDN.Sample.XMLToExcel.OpenXMLOffice objTest = new MSDN.Sample.XMLToExcel.OpenXMLOffice();
        objTest.XMLToExcel(textBox14.Text);
        MessageBox.Show("Umpire Report Extracted successfully.");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:53:39.250

您给定的示例用于[`DataSet.ReadXml`](http://msdn.microsoft.com/en-us/library/system.data.dataset.readxml.aspx)将 XML 文件转换为 DataSet，然后使用 DataSet 的名称 ( [`DataSet.DataSetName`](http://msdn.microsoft.com/en-us/library/system.data.dataset.datasetname.aspx)) 作为文件名，并使用表的名称 ( [`DataTable.TableName`](http://msdn.microsoft.com/en-us/library/system.data.datatable.tablename.aspx)) 作为工作表名称。[`ReadXml`](http://msdn.microsoft.com/en-us/library/system.data.dataset.readxml.aspx)根据 XML 文件的内容选择这些名称。如果你想改变这种行为，你有两个选择：

1.  创建一个根据需要创建 Excel 的方法：

    将此添加到`OpenXMLOffice`类：

    ```
    public void XMLToExcel(string strXMLPath, string outputFileName, string sheetName)
    {
        string strPath = Path.GetDirectoryName(strXMLPath);
        DataSet dsXML = new DataSet();
        dsXML.ReadXml(strXMLPath);
        strPath = strPath + "\\" + outputFileName + ".xlsx";
        DataTable tblXML = dsXML.Tables[0];
        tblXML.TableName = sheetName;
        DataTableToFilePath(tblXML, strPath);
    } 
    ```

    并这样称呼它：

    ```
    var objTest = new MSDN.Sample.XMLToExcel.OpenXMLOffice();
    objTest.XMLToExcel(textBox14.Text, "My Excel", "My Sheet"); 
    ```

2.  更改 XML 文件的内容：

    *   更改根节点以更改输出文件名。
    *   更改二级节点名称以更改工作表名称。

# css - 如何在 CSS 中执行算术运算？

> ID：16160806
> 
> 赞同：43
> 
> 时间：2013-04-23T04:12:40.343
> 
> 标签：css

我想知道如何在 CSS 中实现算术运算。

**例如**：我想并排对齐两个宽度为 50% 的 div，并且我想在这些 div 上设置边框。我想这样写我的规则。

```
#container {
    width: 50% - 1px; // I know this does not work.
} 
```

为什么浏览器不支持 CSS 中的此类算术运算？

而且，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-23T04:14:12.960

它已经[存在](http://www.w3.org/TR/css3-values/#calc-notation)；您可以使用 CSS3`calc()`表示法：

```
div {
    background: olive;
    height: 200px;
    width: 200px;
}

div > div {
    background: azure;
    height: calc(100% - 10px);
    width: 100px;
} 
```

[http://jsfiddle.net/NejMF/](http://jsfiddle.net/NejMF/)

^(注意：它仅在[现代浏览器](http://caniuse.com/calc)(IE9+) 中受支持，并且最近才被移动浏览器采用。)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-23T04:32:45.387

使用[`box-sizing: border-box;`](http://caniuse.com/#search=box-sizing)您`<div>`的边框使宽度计算的一部分。的默认值`box-sizing`是`content-box`，它不包括`width`属性中的填充或边框。

```
#container {
  border: 1px solid black;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  width: 50%;
} 
```

Paul Irish 评论`calc()`并[建议使用边框框](http://paulirish.com/2012/box-sizing-border-box-ftw/)，因为它更符合我们的“宽度”心理模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T15:20:29.417

可以使用 CSS 预编译器。`LESS`ans`Sass`很受欢迎。您可以按照上面示例中的方式编写它。

[http://www.lesscss.org/](http://www.lesscss.org/)

当您是设计师时，LESS 更容易处理。对于程序员和 Ruby (on Rails) 开发人员来说，Sass 可能是更好的选择。

# hibernate - 用于从表中获取数据的 HQL 查询

> ID：16160807
> 
> 赞同：0
> 
> 时间：2013-04-23T04:12:40.873
> 
> 标签：hibernate, hql

我想像这样写一个hql

```
Select * from tableName where columnName= null or columnName=0 
```

因为我是新手，请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:31:00.177

你可以简单地写

```
FROM PojoName pojo WHERE pojo.property is null or  pojo.property=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:04:34.247

你可以试试这样的。

```
select column1, column2,....
from tableName
where (columnName = null or columnName = 0) 
```

下面有一些有用的教程：

[http://www.tutorialspoint.com/hibernate/hibernate_query_language.htm](http://www.tutorialspoint.com/hibernate/hibernate_query_language.htm) [http://www.roseindia.net/hibernate/index.shtml](http://www.roseindia.net/hibernate/index.shtml) [http://dev.wavemaker.com/wiki/bin/Dev/HqlTutorial#HHQLWHEREClause](http://dev.wavemaker.com/wiki/bin/Dev/HqlTutorial#HHQLWHEREClause)

# regex - perl 可以用正则表达式替换多个子字符串吗？

> ID：16160808
> 
> 赞同：3
> 
> 时间：2013-04-23T04:12:44.207
> 
> 标签：regex, perl, substring

我`[ aa bb cc ]`在一行中有一些子字符串，比如`$line = "1 2 a b [ aa bb cc ] c d [ bb cc ] 3 4"`. 我想修剪这些子字符串中的所有空格。以下代码不起作用。

```
while($line =~ /\[(.*?)\]g/)
{
  $1 =~ s/\s+//g;
} 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T04:15:15.533

```
s{\[(.*?)\]}{
   my $s = $1;
   $s =~ s/\s+//g;
   $s
}eg; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T05:01:12.997

与您的尝试类似的另一种方式：

```
while($line =~ s/\[([^\]\s]*)\s+/[$1/g) {} 
```

而且您不必转义 r 方括号，但它有助于 vim。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:41:22.300

您的方法失败，因为匹配变量`$1`是只读的。您可以使用非破坏性替换（在 Perl 5.16 中引入）来避免该问题：

```
use warnings;
use strict;

my $line = "[foo bar] [   baz    ]  sproing";
while($line =~ /\[(.*?)\]/g)
{
    my $result = $1 =~ s/\s+//gr;
    print "|$result|\n";
} 
```

# windows-runtime - ProcessEvents 不在 WinRT 的主线程上

> ID：16160809
> 
> 赞同：0
> 
> 时间：2013-04-23T04:12:54.707
> 
> 标签：windows-runtime

我想设置一个计时器来模拟一个线程，每隔几毫秒调用一次 Dispatcher->ProcessEvents() 而在主运行循环中，我只是在渲染和呈现。

在这篇文章中， http: [//msdn.microsoft.com/en-us/library/windows/apps/hh994934.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh994934.aspx)在底部附近，它说：“如前所述，您也可以使用计时器对象来执行此操作您已与显示设备的刷新信号同步。” 我假设这是可以做到的，因为微软已经明确表示可以做到。

但是，当我尝试此方法时，如果我缓存调度程序并从周期性 ThreadPoolTimer 内部调用 dispatcher->ProcessEvents()，则不会处理事件。

有任何想法吗？

# javascript - AngularJs $routeProvider 不适用于 MVC

> ID：16160814
> 
> 赞同：0
> 
> 时间：2013-04-23T04:13:26.510
> 
> 标签：javascript, angularjs

当我`$routeProvider`与 MVC.Net 一起使用时，它不起作用。

我正在使用 MVC.Net 的 Write up Backend 示例。以下是我正在使用的路线

```
配置（功能（$routeProvider）{
    $路由提供者。
      当（'/'，{控制器：ListCtrl，templateUrl：'home/listitem'}）。
      当（'/home'，{控制器：ListCtrl，templateUrl：'home/listitem'}）。
      when('/edit/:projectId', { controller: EditCtrl, templateUrl: '/home/detail' }).
      当（'/new'，{控制器：CreateCtrl，templateUrl：'/home/detail'}）。
      否则（{redirectTo:'/'}）；
  });

```

但不幸的是，它没有调用**listitem**或**details**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-27T14:35:53.653

这工作正常。如下设置您的 RouteConfig.cs：

```
 // Will handle partial page view requests
        routes.MapRoute(
            name: "Partials",
            url: "partials/{controller}",
            defaults: new { controller="Home", action = "Index" }
        );

        // Will handle all other requests by sending it to the main controller
        routes.MapRoute(
            name: "Application",
            url: "{*url}",
            defaults: new { controller = "Main", action = "Index" }
        ); 
```

然后你的角度配置是这样的：

```
 .config(['$routeProvider', '$locationProvider',
        function($routeProvider, $locationProvider) {
            $routeProvider
                .when('/', {
                    templateUrl: '/partials/home',
                    controller: 'HomeController'
                })
                .when('/home', {
                    templateUrl: '/partials/home',
                    controller: 'HomeController'
                })
                .when('/gallery', {
                    templateUrl: '/partials/gallery',
                    controller: 'GalleryController'
                });
                .when('/services', {
                    templateUrl: '/Services',
                    controller: 'ServicesController'
                });

            // NOTE: This part is very important
            $locationProvider.html5Mode(true);
        }
    ]); 
```

还有你的 MVC 控制器：

```
public class MainController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
}

public class HomeController : Controller
{
    public ActionResult Index()
    {
        return PartialView("_Home");
    }
}

public class GalleryController : Controller
{
    public ActionResult Index()
    {
        return PartialView("_Gallery");
    }
} 
```

将您的部分视图放在共享文件夹中。

现在，在幕后，您可以像往常一样使用 MVC 控制器和视图执行所有操作，包括剃须刀等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-13T11:45:30.270

在我在配置文件中尝试这个解决方案之前，我也有这个问题。

配置文件

```
myapp.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {

// Specify the three simple routes ('/', '/About', and '/Contact')
$routeProvider.when('/', {
    templateUrl: '/Home/Home',
    controller: 'homeCtrl',
});
$routeProvider.when('/Login', {
    templateUrl: '/account/Index',
    controller: 'loginCtrl',
});
$routeProvider.when('/About', {
    templateUrl: '/Home/About',
    controller: 'aboutCtrl',
});
$routeProvider.when('/Contact', {
    templateUrl: '/Home/Contact',
    controller: 'contactCtrl'
});
$routeProvider.when('/First', {
    templateUrl: '/account/First',
    controller: 'firstCtrl'
});
$routeProvider.when('/Fullpage', {
    templateUrl: '/Home/Fullpage',
    controller: 'fullpageCtrl'
});
$routeProvider.otherwise({
    redirectTo: '/'
});

// Specify HTML5 mode (using the History APIs) or HashBang syntax.
//$locationProvider.html5Mode({ enabled: true, requireBase: false });
$locationProvider.html5Mode(false);}]); 
```

index.cshtml 文件

```
<a class="brand" href="#/">Simple Routing</a>
    <div class="nav-collapse collapse">
        <ul class="nav">
            <li class="active"><a href="#/">Home</a></li>
            <li><a href="/#/About">About</a></li>
            <li><a href="/#/Contact">Contact</a></li>
            <li><a href="/#/Login">Login</a></li>
            <li><a href="/#/First">first</a></li>
            <li><a href="/#/Fullpage">fullpage</a></li>
        </ul>
    </div><!--/.nav-collapse --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:27:37.483

正如@jpmorin 建议的那样，除非出于某种原因您需要以AngularJS 无法做到的方式动态生成视图，否则MVC 视图是多余的。您只需要提供静态文件，并为它们进行一些数据绑定。[将 BreezeJS](http://www.breezejs.com/)视为解决方案。

如果这不能满足您的要求，您需要提供您的 MVC 代码以获得更好的答案。我个人建议前一种解决方案。

# python - Python：xml.etree.ElementTree.tostring 错误

> ID：16160817
> 
> 赞同：2
> 
> 时间：2013-04-23T04:13:45.853
> 
> 标签：python, elementtree

我正在使用 xml.etree.ElementTree.tostring() 将 etree 元素转换为字符串。但有时我有问题：

```
xpath = "..."
htmlparser = etree.HTMLParser()
tree = etree.parse(response, htmlparser)
result = tree.xpath(xpath)
xml.etree.ElementTree.tostring(result[0], encoding='utf-8') 
```

错误是：

```
File "../abc.py", line 165, in abc
    results.append(xml.etree.ElementTree.tostring(result[0], encoding='utf-8'))
  File "C:\Python27\lib\xml\etree\ElementTree.py", line 1127, in tostring
    ElementTree(element).write(file, encoding, method=method)
  File "C:\Python27\lib\xml\etree\ElementTree.py", line 818, in write
    self._root, encoding, default_namespace
  File "C:\Python27\lib\xml\etree\ElementTree.py", line 887, in _namespaces
    _raise_serialization_error(tag)
  File "C:\Python27\lib\xml\etree\ElementTree.py", line 1053, in _raise_serialization_error
    "cannot serialize %r (type %s)" % (text, type(text).__name__)
TypeError: cannot serialize <built-in function Comment> (type builtin_function_or_method) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:21:30.237

看起来像是`result[0]`评论，您可能想跳过。这样的事情应该做：

```
etree.HTMLParser(remove_comments=True) 
```

从[文档](http://lxml.de/compatibility.html)：

> ElementTree 在解析 XML 时会忽略注释和处理指令，而 etree 会读入它们并将它们分别视为 Comment 或 ProcessingInstruction 元素。这在文本内容中发现注释时尤其明显，然后由 Comment 元素拆分。
> 
> 您可以通过将布尔型 remove_comments 和/或 remove_pis 关键字参数传递给您使用的解析器来禁用此行为。为了方便和支持可移植代码，您还可以使用 etree.ETCompatXMLParser 代替默认的 etree.XMLParser。它试图提供一个尽可能接近 ElementTree 解析器的默认设置。

# dynamics-crm-2011 - MSCRM 2011 - 在许多实体之间建立关系

> ID：16160822
> 
> 赞同：0
> 
> 时间：2013-04-23T04:14:29.600
> 
> 标签：dynamics-crm-2011

我想创建一个链接到联系人实体的自定义实体。

这个新实体的目的是存储联系人的竞争对手（它不像默认的 MCRM 竞争对手实体那样存储您自己的竞争对手）。

我尝试了很多方法来做到这一点，方法是创建一个具有单一竞争对手名称的实体和一个链接到联系人以存储竞争对手名称的实体，但之后，你会得到“添加新竞争对手”和“添加现有竞争对手”，它们指的是我创建的第二个实体：您会看到包括重复项在内的整个竞争对手列表（如果许多联系人具有相同的竞争对手，您会看到很多次相同的竞争对手名称）。

这是关系问题，还是我应该使用其他方式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:08:14.917

您是否创建了 1 -> Many 关系？例如，当两个联系人共享同一个竞争对手时，您创建了 2 个竞争对手记录。

尝试使用 Many -> Many 关系，这样两个联系人可以共享竞争对手记录，例如，您有 2 个联系人记录的 1 个竞争对手记录。

这应该减少重复。

# html - 创建论坛样式消息所需的 css/html

> ID：16160825
> 
> 赞同：2
> 
> 时间：2013-04-23T04:14:40.133
> 
> 标签：html, css

谁能告诉我创建类似于论坛消息部分的布局所需的 css/html 的任何指南/提示：

```
----------------------
[8] 用户 1
    一些味精
----------------------

[8] 用户 2
    另一条消息
----------------------

```

这是 1 个主 div 和几个子 div 还是更简单的东西，例如 css 样式的列表项或表格等？请让我知道在没有最新 css3/html5/beta 代码的情况下实现此布局的“正确”方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T04:25:25.857

一个例子：

```
<style>
    .message {margin-bottom: 15px; }
    .image {float:left; margin-right: 10px; }
    .user {float:left; font-weight:bold; color:#009; margin-bottom: 5px; }
    .content { margin-left: 30px;font-style:italic; color:#; }
</style>
<div>
    <div class="message">
        <div class="image"><img src="http://www.gravatar.com/avatar/df125f7b89730a39163bb17c1c18c1d9?s=18&d=identicon&r=PG" /></div>
        <div class="user">Silvertiger</div>
        <div style="clear:both;"></div>
        <div class="content">Does this work as expected?</div>
    </div>
    <div class="message">
        <div class="image"><img src="http://www.gravatar.com/avatar/98d247dcb9453a0d5adc70cd6b3acde9?s=18&d=identicon&r=PG" /></div>
        <div class="user">user2309722</div>
        <div style="clear:both;"></div>
        <div class="content">Indeed sir it appears to, Thank you</div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:21:31.773

像这样的东西会起作用：

```
<div id="thread">
  <div class="thread-post">
    Post #1 contents
  </div>
  <div class="thread-post">
    Post #2 contents
  </div>
  <div class="thread-post">
    Post #3 contents
  </div>
</div> 
```

对于 CSS，你会做类似的事情：

```
.thread-post {
  padding: 10px
  border-bottom: 1px solid #ddd
}
.thread-post:nth-child(even) {
  background-color: #eee /* For distinguishing every other post */
} 
```

根据需要进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:18:01.777

我会为每对作者信息 + 消息使用一个 div，然后，在每个内部它会是某种浮动左 div，用于包含作者信息（用户名、头像等）的框（正如通常在论坛上看到的那样，但是样式由您决定）以及另一个包含链接消息的 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:03:31.913

我是这样做的**：** [**DEMO**](http://jsfiddle.net/arshadabbas/AWrtd/2/)

```
<div class="box">
    <div class="list">AAAAAAAAAAAAAAA</div>
    <div class="list">BBBBBBBBBBBBBBB</div>
    <div class="list">CCCCCCCCCCCCCCC</div>
    <div class="list">DDDDDDDDDDDDDDD</div>
</div> 
```

使用 css 作为**：**

```
.box {
position: absolute;
border: 2px solid grey;
}

.list {
line-height: 30px;
}

.list:not(:last-child) {
border-bottom: 1px solid red;
} 
```

# java - 复制数组，允许它在构造函数的输入更改时保持不变

> ID：16160827
> 
> 赞同：0
> 
> 时间：2013-04-23T04:14:44.140
> 
> 标签：java, encapsulation

我的积分等级是不可变的。当我最初输入构造函数时，它应该被复制到 cloneList 对象中。如果通过构造函数更改数组中的几个索引，这将允许它保持以前的方式。我已经尝试了几乎所有可能的组合，但仍然遇到了麻烦。我希望 cloneList 是原始 Point[] points 数组的副本，因此如果 points 数组发生更改，则 cloneList 不会。

```
import java.util.Arrays;
import java.util.Iterator;
 import java.util.List;

public class  Polygon {

private double xSum = 0;
private double ySum = 0;
private Point[] points;
private Point[] cloneList;
private Point a;

public Polygon(Point[] points) {

    this.points = points;
    cloneList = new Point[points.length];
    for (int i = 0; i < cloneList.length; i++) {
        cloneList[i] = points[i];
    }

    for (int i = 0; i < cloneList.length; i++)
        System.out.println(cloneList[i]);

     for (int i = 0; i < points.length; i++){
    cloneList[i] = points[i];

    // System.out.print(cloneList[i].getX());
    // System.out.print(cloneList[i].getY());
    // System.out.println();
}

public Point getVertexAverage() {
    double xSum = 0;
    double ySum = 0;
    for (int index = 0; index < cloneList.length; index++) {
        xSum = xSum + cloneList[index].getX();
        ySum = ySum + cloneList[index].getY();
    }

    return new Point(xSum / getNumSides(), ySum / getNumSides());
}

public int getNumberSides() {
    return cloneList.length;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:19:38.373

您必须编写一个复制方法来将每个变量从一个对象复制到一个新对象中，并使用该新对象。除了复制之外，没有办法在 Java 中取消引用引用（即按值传递）。

就像是：

```
public Point copy(){
 Point temp = new Point();
 temp.setX(this.getX());
 ....Add in the rest of the assignments.
 return temp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:23:39.607

根据我对您帖子的评论，解决您的问题的一个选项是向您的数组添加**新** `Point`实例：`cloneList`

```
public PolygonImpl(Point[] points) {
    //some code here...
    for (int i = 0; i < cloneList.length; i++) {
        //create the new Point instance (the clone) here
        //this code is just an example since you haven't provided the Point constructor
        cloneList[i] = new Point(points[i].getX(), points[i].getY());
    }
    //some more code here...
} 
```

但是这个选项有点笨拙，因为当向接口（或类）`cloneList`的客户端提供属性时，它会修改数组（因为数组是可变的）并且原始的也会被修改。知道这一点，最好**不要有**as属性，而是在方法上创建这个列表：`Polygon``PolygonImpl``cloneList`**`cloneList`**

 **```
public Point[] getPoints() {
    Point[] cloneList = new PointList[X]; //where X is some size you know
    for (int i = 0; i < cloneList.length; i++) {
        //create the new Point instance (the clone) here
        //this code is just an example since you haven't provided the Point constructor
        cloneList[i] = new Point(points[i].getX(), points[i].getY());
    }
    return cloneList;
} 
```

我提倡这个选项，因为你的`Point`班级似乎没有多少数据。对于您的类将更复杂的现实世界应用程序（例如具有`List`包含更多对象实例的对象内部构成复杂树），您不应该创建这样的东西（因为它将是一个**活生生的地狱**），而是使用副本/克隆方法。为此，您可以使用此处提供的一些技术：[Java：深度克隆/复制实例的推荐解决方案](https://stackoverflow.com/q/2156120/1065197)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:25:30.037

您没有`Point`在代码中制作任何实际 s 的副本。请记住，Java 中的大多数值都是引用，因此虽然看起来您正在复制 . `Point`，但您只是在复制指针。

您可以做几件事。您可以使用不同的方法来克隆您的对象（例如，请参阅[深拷贝、浅拷贝、克隆](https://stackoverflow.com/questions/6182565/java-deep-copy-shallow-copy-clone)）。另一种方法是将您`Point`的 s 定义为不可变的（很像`String`类）：

```
public class Point {
    private final float x;
    private final float y;

    public Point(float x, float y) {
        this.x = x;
        this.y = y;
    }

    public float getX() {
        return this.x;
    }

    public float getY() {
        return this.y;
    }
} 
```

这将强制所有客户端代码将点视为不可变的。然后，您可以将点上的操作定义为返回新点。**

# php - 对齐表格列 PHP

> ID：16160834
> 
> 赞同：0
> 
> 时间：2013-04-23T04:15:24.213
> 
> 标签：php, html

我有这张桌子，由于某种原因，它没有像我想要的那样正确对齐。我有 3 列，1 行。但出于某种奇怪的原因，当我输入这些内容时，它并没有像预期的那样对齐。

```
<?php

        $grab = mysql_query("SELECT * FROM topsongs ORDER BY number limit 10 ");    

            if (mysql_num_rows($grab)==0) {
        echo "<div class='alert alert-note-x'>Sorry, it looks like their are no Top Songs Listed</div>";
    }

        while($row = mysql_fetch_array($grab)){

      ?>

<table style="border-spacing: 10px;width:100%;clear:both;overflow:hidden;border: 1px #EBEBEB solid;border-bottom: 2px #EBEBEB solid;padding:5px;margin-top:3px;margin-bottom:10px;" class="border-radius">
    <tr>
        <td><?php echo stripslashes($row['number']); ?></td>
        <td><img class="border-radius" width="70" height="70" src="<?php echo stripslashes($row['dpic']); ?>"></td>
        <td><?php echo stripslashes($row['songname']); ?></td>
    </tr>
</table>

         <?php } ?> 
```

你们碰巧知道它是什么，我做错了吗？图片在这里：[http ://screencloud.net/v/oN4l](http://screencloud.net/v/oN4l)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:22:47.033

您为每一行创建单独的表。因此，对于每一行，在不考虑其他行（在其他表中）的情况下计算列宽。

移动`<table>`到循环之前和循环`</table>`之后，这样您就只有一个包含所有行的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:33:17.617

这里是你想要的答案

```
<?php

        $grab = mysql_query("SELECT * FROM topsongs ORDER BY number limit 10 ");    

            if (mysql_num_rows($grab)==0) {
        echo "<div class='alert alert-note-x'>Sorry, it looks like their are no Top Songs Listed</div>";
    } 
?>

<table style="border-spacing: 10px;width:100%;clear:both;overflow:hidden;border: 1px #EBEBEB solid;border-bottom: 2px #EBEBEB solid;padding:5px;margin-top:3px;margin-bottom:10px;" class="border-radius">
<?php while($row = mysql_fetch_array($grab)){ ?>
    <tr>
        <td><?php echo stripslashes($row['number']); ?></td>
        <td><img class="border-radius" width="70" height="70" src="<?php echo stripslashes($row['dpic']); ?>"></td>
        <td><?php echo stripslashes($row['songname']); ?></td>
    </tr>
         <?php } ?> 
</table> 
```

替换您的代码并尝试此操作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T05:03:52.233

`<td>`在like中使用 align 属性`<td align="left">`

# c - 用于进程内线程通信的 posix 队列与自定义 0 复制队列

> ID：16160839
> 
> 赞同：0
> 
> 时间：2013-04-23T04:16:06.453
> 
> 标签：c, linux, queue, kernel, posix

这是一个设计问题。通常 Posix 队列比任何自定义队列都更受欢迎，因为它们经过了彻底的测试，并提供了高级功能，例如可能是开发关键的优先级队列。但是，如果我们从内部进程通信的角度分析它，如果它们仅用于同一进程共享数据的多个线程之间，它们会有多好。POSIX Queue 一旦识别出发送方和接收方共享相同的地址空间，是否会通过删除不必要的 copy_to_user 和 copy_from_user 来优化其消息传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:59:34.020

您的队列有两个角色：在线程之间交换数据和同步它们。

显然，您的替代方案是 posix 队列，或您自己的队列（具有 pthread 互斥锁和用于锁定和同步的条件变量）。

对于进程内通信，交换的数据量并不是一个真正的问题，因为您总是可以只传输数据的指针（并且约定发送线程正在`malloc`处理它，而接收线程`free`在消费后会处理它） .

我猜想（但你必须测量）Posix 队列可能会稍微慢一些，因为它们可能涉及每个操作的系统调用。相反，pthread 操作涉及系统调用（[futex(2)](http://man7.org/linux/man-pages/man2/futex.2.html)）仅用于争用（并且在非阻塞操作的常见情况下，互斥锁不执行系统调用）。

我不确定内核是否可以优化消息传递以避免这种情况，`copy_to_user`因为它可能不知道何时是一个仅用于一个进程的队列（它无法预测`mq_open`以后没有其他进程会出现相同的队列）。

您还可以使用`pipe`流程内部（`poll`在接收方）。

但是您确实必须进行基准测试。我不确定这是一个大问题。

# c# - excel interops 与带有“Office 2007 Compatability Pack”的 Excel 2003 兼容吗？

> ID：16160842
> 
> 赞同：0
> 
> 时间：2013-04-23T04:16:14.630
> 
> 标签：c#, asp.net, excel, office-interop

我正在维护一个当前引用 Interop.Excel.dll (v 1.5.0.0) 的网络应用程序。

Interop.Excel.dll 用于访问 Excel 2003 下的 .xls 文件，然后是 Excel 2010 下的 .xlsx/m 文件。一切正常。

该网络应用程序被移动到另一台机器上（安装了“Office 2007 兼容性包”的 Excel 2003），现在无法打开 .xlsx/m 文件（出现如下所示的错误堆栈跟踪）。

除了在打开文件时看到一小段兼容性包“转换”对话框之外，人工打开该机器上的 .xlsx/m 文件没有问题。

是否有一些已知的组合限制：Excel 2003；'Office 2007 压缩包'; 和 .xlsx/m 文件？

**堆栈跟踪**

```
2013-04-23 16:03:00.7192|Error|An error occurred in OpenCloseManager. Details Follow: 
Exception Type ---
System.Runtime.InteropServices.COMException
Message ---
The server threw an exception. (Exception from HRESULT: 0x80010105 (RPC_E_SERVERFAULT))
HelpLink ---

Source ---
Interop.Excel
StackTrace ---
   at Excel.Workbooks.Open(String Filename, Object UpdateLinks, Object ReadOnly, Object Format, Object Password, Object WriteResPassword, Object IgnoreReadOnlyRecommended, Object Origin, Object Delimiter, Object Editable, Object Notify, Object Converter, Object AddToMru, Object Local, Object CorruptLoad)
   at TCG.CRRExDBInterface.BO.SpreadSheetHelper.manageExcelOpen(Boolean blnUpdateLinks) in D:\foo\ExcelDBInterface-4.7.1.0\ExcelDBInterface-4.7.1.0\ExcelDBInterface\CRRExDBInterface\App_Code\BusinessObject\SpreadSheetHelper.cs:line 1920
TargetSite ---
Excel.Workbook Open(System.String, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Object)|MasterSubPage.parseSecurityInfoFromSpreadsheetAndSave => SpreadSheetHelper..ctor => SpreadSheetHelper.manageExcelOpen 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:28:58.030

勇敢的灵魂是将办公室互操作放入网络应用程序的人。如果您不建议在服务器上使用 COM API 检查文档，主要有两个原因：

*   它设计为在单线程单元（Main() 上的 [STAThread]）中工作，并且绝对不支持多线程。在失败的 API 调用周围放置一些日志记录并输出线程名称和应用程序域名 - 这些会因 Web 调用而异，如果您在一个线程上实例化 Excel 对象并在另一个线程上使用它，它将无法正常工作。
*   它依赖于 UI 结构，即使应用程序不可见 - 例如，如果您在隐藏应用程序时导致 Word（我也怀疑 Excel）显示弹出窗口，结果将就像办公室 API 调用挂起一样。检查您的服务器帐户并确保您的 Web 应用程序使用的帐户没有限制。

无论哪种情况，我都怀疑 Excel 的版本是您的问题所在。

如果我是你，我建议“管理”使用 OpenXmlSDK 升级应用程序。这不是一个简单的切换，但根据您的情况，这可能是值得的 - 您可以多线程，没有挂起隐藏实例等，它更快，您可以很好地控制正在发生的事情。缺点是学习曲线陡峭，缺乏复制/粘贴类型的功能 - 必须解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T01:57:29.943

好吧，这是值得的（并为这个问题提供了一些解决方案）我放弃了尝试使用旧机器并转移到安装了 Excel 2010 的机器上。根本不是一个真正的答案，但我希望，向其他人一些迹象表明，我必须提供的资源无法解决。

# asp.net - Asp.net 如何允许客户端在 localhost 中打开文件？

> ID：16160843
> 
> 赞同：0
> 
> 时间：2013-04-23T04:16:15.987
> 
> 标签：asp.net, file, windows-7, lan

我对asp.net 和网络都很陌生。可能这个问题对你来说听起来有点愚蠢。我有 asp.net 项目。这与互联网无关，仅在 LAN 中。我只想让客户端直接在服务器中打开一个文件。就像 Window 7 中的共享文件夹一样，我可以直接转到该共享文件夹并直接打开该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:55:06.520

您可以通过 IIS 7 目录浏览功能来完成。

看看 [http://technet.microsoft.com/en-us/library/cc731109(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc731109(v=ws.10).aspx)

# ios - NULLIFY 的正确方法是什么，即删除 FaceBook API 中的密钥

> ID：16160844
> 
> 赞同：0
> 
> 时间：2013-04-23T04:16:23.440
> 
> 标签：ios, iphone, facebook-graph-api

我有一个带有“end_time” facebook 键集的事件。我知道要删除活动的结束时间。什么是正确的语法？我试过展示的样品；

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:@"none", @"end_time", nil];
FBRequest *deleteEndDate = [FBRequest requestWithGraphPath:@"/<EVENT_ID>" parameters:params HTTPMethod:@"POST"];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:@"", @"end_time", nil];
FBRequest *deleteEndDate = [FBRequest requestWithGraphPath:@"/<EVENT_ID>" parameters:params HTTPMethod:@"POST"];

FBRequest *deleteEndDate = [FBRequest requestWithGraphPath:@"/<EVENT_ID>/end_time" parameters:Nil HTTPMethod:@"DELETE"];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:@"", @"end_time", nil];
FBRequest *deleteEndDate = [FBRequest requestWithGraphPath:@"/<EVENT_ID>" parameters:params HTTPMethod:@"DELETE"]; // Deletes the event !! 
```

非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:23:19.150

将其设置为 @"0" 会将其从 facebook 应用程序中的 facebook 事件显示中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:31:04.800

尝试传入 [NSNull null] 或使用“/EVENT_ID”发出请求并为参数传递 nil。

# c# - 你如何获得网站的根？

> ID：16160847
> 
> 赞同：2
> 
> 时间：2013-04-23T04:16:57.083
> 
> 标签：c#, asp.net, path, web-config, appsettings

嗨，我正在用 C# 编程并建立一个网站。我正在尝试在 Web 配置中使用 AppSettings 来设置图像文件夹的路径，以便我可以在站点中的任何位置使用这些 AppSettings 作为图像文件夹的快捷方式。我不知道如何获取网站的主根目录，以便我可以从任何文件夹中调用它并获得正确的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:19:49.027

你可以过 `HostingEnvironment.ApplicationPhysicalPath`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:21:53.783

这也返回根：

```
<img src="~/apps/thisapp/images/logo.gif" alt="" runat="server" /> 
```

或者

```
Server.MapPath("~") 
```

# c# - 不存在从对象类型 System.Data.DataRowView 到已知托管提供程序本机类型的映射

> ID：16160852
> 
> 赞同：1
> 
> 时间：2013-04-23T04:17:13.837
> 
> 标签：c#, winforms

我在 C# 中有一个 Windows 窗体，它有 3 个组合框。现在的问题是，当我通过插入的 sql 查询时，它给了我这个错误。请帮我解决错误。这是代码。

```
 namespace login
{
    public partial class samplerequisition : Form
    {
        SqlConnection con = new SqlConnection("Data Source=TH07L019;Initial Catalog=procurement1;Integrated Security=True");
        SqlCommand cmd = new SqlCommand();
        SqlDataReader rdr;
        DataSet dsreqname = new DataSet();
        DataSet dsprepname = new DataSet();
        DataSet dsauthorizedname = new DataSet();

        public samplerequisition()
        {
            InitializeComponent();
        }

        bool IsAllValid()
        {
            if (String.IsNullOrEmpty(txtreqno.Text))
            {
                return false;
            }

            else if (String.IsNullOrEmpty(txtexpectedate.Text))
            {
                return false;
            }
            else if (String.IsNullOrEmpty(txtcc.Text))
            {
                return false;
            }
            else if (String.IsNullOrEmpty(txtbrand.Text))
            {
                return false;
            }
            /*else if (String.IsNullOrEmpty(txtprepname.Text))
            {
                return false;
            }
            else if (String.IsNullOrEmpty(txtauthorizedname.Text))
            {
                return false;
            }*/
            else if (cmbrequisitionname.SelectedItem==null)
            {
                return false;
            }
            else if (cmbpreparedname.SelectedItem == null)
            {
                return false;
            }
            else if (cmbauthorizedname.SelectedItem == null)
            {
                return false;
            }
            else if (Convert.ToString(dtreqdate.Value) == "")
            {
                return false;
            }
            else if (Convert.ToString(dtprepdate.Value) == "")
            {
                return false;
            }
            else if (Convert.ToString(dtauthorizedate.Value) == "")
            {
                return false;
            }

            else
            {
                return true;
            }
        }
        private void samplerequisition_Load(object sender, EventArgs e)
        {

            SqlDataAdapter adp = new SqlDataAdapter(cmd);
            cmd.Connection = con;
            cmd.CommandText = "select * from employee";

            adp.Fill(dsreqname,"employee");
            cmbrequisitionname.DataSource = dsreqname.Tables["employee"];
            cmbrequisitionname.DisplayMember = "fname";
            cmbrequisitionname.SelectedIndex = -1;

            adp.Fill(dsprepname, "employees");
            cmbpreparedname.DataSource = dsprepname.Tables["employees"];
            cmbpreparedname.DisplayMember = "fname";
            cmbpreparedname.SelectedIndex = -1;

            adp.Fill(dsauthorizedname, "employees");
            cmbauthorizedname.DataSource = dsauthorizedname.Tables["employees"];
            cmbauthorizedname.DisplayMember = "fname";
            cmbauthorizedname.SelectedIndex = -1;
        }

        private void btnsave_Click(object sender, EventArgs e)
        {
            con.Open();
            if (IsAllValid())
            {

                cmd.CommandText = "insert into samplerequisition(req_no,reqemployee_id,charges,expected_date,reqdate,costcenter_id,specific_brand,preparedemployee_id,prepared_date,authorizedemployee_id,auhtorized_date) values(@req_no,@reqemployee_id,@expected_date,@reqdate,@charges,@costcenter_id,@specific_brand,@preparedemployee_id,@prepared_date,@authorizedemployee_id,@auhtorized_date)";
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.AddWithValue("@req_no",txtreqno.Text);
                cmd.Parameters.AddWithValue("@reqemployee_id",cmbrequisitionname.SelectedValue);
                cmd.Parameters.AddWithValue("@expected_date",txtexpectedate.Text );
                cmd.Parameters.AddWithValue("@reqdate", dtreqdate.Value);
                cmd.Parameters.AddWithValue("@costcenter_id",txtcc.Text);
                cmd.Parameters.AddWithValue("@specific_brand",txtbrand.Text);
                cmd.Parameters.AddWithValue("@preparedemployee_id",cmbpreparedname.SelectedValue);
                cmd.Parameters.AddWithValue("@prepared_date", dtprepdate.Value);
                cmd.Parameters.AddWithValue("@authorizedemployee_id",cmbauthorizedname.SelectedValue);
                cmd.Parameters.AddWithValue("@auhtorized_date", dtauthorizedate.Value);
                if (rdcapex.Checked)
                {
                    cmd.Parameters.AddWithValue("@charges", "Capex");

                }
                else
                {
                    cmd.Parameters.AddWithValue("@charges", "revenue");
                }
                cmd.ExecuteNonQuery();
                MessageBox.Show("record saved","requisition",MessageBoxButtons.OKCancel,MessageBoxIcon.Information);
            }
            else
            {
                MessageBox.Show("error","requisition",MessageBoxButtons.OKCancel,MessageBoxIcon.Error);
                con.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:39:11.323

您永远不会[为您的组合框设置什么“值”](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)。因此，默认情况下，`comboboxName.SelectedValue`返回整行而不是仅返回行的一列。如果您只想要行的一列（我假设`fname`像显示的值），那么只需将以下 3 行添加到您的代码中。

```
cmbrequisitionname.ValueMember = "fname";
cmbpreparedname.ValueMember = "fname";
cmbauthorizedname.ValueMember = fname"; 
```

# spring - Spring Framework：在列表中使用@CacheEvict

> ID：16160853
> 
> 赞同：0
> 
> 时间：2013-04-23T04:17:15.230
> 
> 标签：spring, caching, ehcache

我有以下方法签名：

```
@Cacheable(value="keyValueCache",key="#key")
public KeyValuePair getKeyValuePair(String key); 
```

我在 ehcache.xml 中定义了以下缓存：

```
 <cache name="keyValueCache" eternal="false"
    maxElementsInMemory="100" overflowToDisk="true" diskPersistent="false"
    timeToIdleSeconds="3600" timeToLiveSeconds="3600"
    memoryStoreEvictionPolicy="LRU" /> 
```

现在，我想在以下方法上使用 @CacheEvict：

```
 public KeyValuePair updateKeyValuePair(KeyValuePair keyValuePairs); 
```

在这里，KeyValuePair 有一个名为“key”的字段，所以我可以使用类似于以下内容的内容：

```
 @CacheEvict(value="keyValueCache", key="#keyValuePair.key") 
```

问题是如果我将 KeyValuePair 列表作为方法参数，我该如何使用 @CacheEvict：

```
 public KeyValuePair updateKeyValuePairs(List<KeyValuePair> keyValuePairs); 
```

# erlang - 重新连接到 erlang 节点

> ID：16160857
> 
> 赞同：1
> 
> 时间：2013-04-23T04:17:42.510
> 
> 标签：erlang, erlang-otp

A 有两个节点：A 和 B。A 监控 B，B 监控 A。当其中一个节点重新启动时，它会尝试连接到第二个节点。问题是如果两台计算机与节点之间的以太网连接失败然后恢复，如何重新连接到节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:51:20.230

我猜您正在寻找[net_kernel:connect_node/1](http://www.erlang.org/doc/man/net_kernel.html#connect_node-1)或[net_adm:ping/1](http://www.erlang.org/doc/man/net_adm.html#ping-1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:49:06.003

您可以使用[erlang:monitor_node](http://erlang.org/doc/man/erlang.html#monitor_node-2)监控节点，它仅检测已连接节点的 nodedown。而不是这个，您可以使用[net_kernel:monitor_nodes](http://erlang.org/doc/man/net_kernel.html#monitor_nodes-2)甚至跟踪节点状态更改。因此监控进程可以接收到可以处理的带有原因（连接关闭或实际节点关闭）的节点关闭消息。每当建立连接时都会收到 nodeup 消息。

# c# - 存储网络爬虫访问过的 URL 的合适数据结构是什么？

> ID：16160858
> 
> 赞同：1
> 
> 时间：2013-04-23T04:17:51.173
> 
> 标签：c#, data-structures, web-crawler

我正在用 C# 编写一个网络爬虫供我个人使用。它的主要目的是从它爬取的网页下载图像。除了下载的图像，它不会保存网页中的任何数据。

我有一些逻辑将爬虫访问的所有 URL 的文字字符串存储在列表中。这对于短时间的抓取会话来说已经足够了，但我想当抓取工具在一个包含数万个 URL 的列表中进行查找时，这将开始成为较长会话的瓶颈。我还在我的 URL 队列中进行查找，以便在等待抓取的 URL 队列中没有重复的 URL。

我的问题分为两部分：

1）目前我没有在爬行会话之间存储任何数据，这现在很好。当爬虫运行时，有没有比简单的字符串列表更好的方法来存储已经访问过的 URL？

2) 如果我要开始在磁盘上永久存储数据以供多个会话使用，在这种情况下，您建议如何存储访问过的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:01:15.733

这在很大程度上取决于您的爬虫爬行的速度。如果您有一个单线程爬虫，那么平均而言，您不会比每秒一页做得更好。因此，您可以使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)来存储您访问过的 URL。或者，如果您想保存有关您访问过的 URL 的信息，您可以使用`Dictionary<string, UrlInfo>`，`UrlInfo`您定义的类包含您要保留的有关每个访问过的 URL 的信息。

每天 86,400 秒，`HashSet`或`Dictionary`将存储相当多天的数据。

但您可能不想多次下载同一张图片。因此，使用我所说的“离线”或“爬行-过程-爬行”模型可能会更好。这是它的工作原理。

当您开始爬网时，您会访问（例如）您已识别的几千个页面。您下载页面，提取链接，然后将这些链接写入日志文件。如果您找到图像，则下载并保存这些图像。您访问的每个页面也会被写入文件。

访问完这些页面后，您将停止爬虫。您现在有两个保存在文件中的列表：您访问过的页面和您找到的链接。

对访问过的链接进行排序，并将它们与您之前访问过的页面列表合并。随着时间的推移，该文件可能会变得相当大。

对您提取的链接列表进行排序，并删除重复项。然后根据您已经访问过的页面列表检查这些链接。这是最简单的合并。如果该链接已被访问过，则丢弃它。否则，将其写入将在下一次抓取会话中使用的文件。

使用简单的数据库会更容易，但请注意数据库会变得非常大。使用数据库，您不必爬行过程爬行。相反，您可以根据数据库检查提取的每个链接，然后立即保存或丢弃它。

但是，请理解，您将很难访问数据库。我的爬虫经验是，平均而言，一个网页包含超过 100 个链接（即`<a href="...">`.这不包括图像。你将使用单线程爬虫每秒至少 100 次访问该数据库。

您会遇到的另一个问题是您无法访问找到的每个 URL。随着时间的推移，我发现在我从普通网页中提取的 100 个链接中，有 10 个是我以前从未见过的新链接。因此，对于我阅读的每一页，我都会发现还有 10 页我没有读过。最终，您将需要一些方法来过滤掉不太可能将您引导至图像的 URL。

跟踪您访问过的 URL 的另一种方法是使用[Bloom Filter](http://en.wikipedia.org/wiki/Bloom_filter)。我在我的网络爬虫中使用了这些效果。

# xml - 如何通过 json 模式表达这个 XML？

> ID：16160860
> 
> 赞同：1
> 
> 时间：2013-04-23T04:17:54.257
> 
> 标签：xml, jsonschema

如何通过 json 模式表达这个 XML？

```
<students>
    <student name="jack">
        <age>23</age>
        <address>
            <city>new town</city>
            <street>my home street 105.</street>
        </address>
    </student>
</students> 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:36:21.130

我认为这就是你想要的：

```
{
  "students": {
    "student": {
      "-name": "jack",
      "age": "23",
      "address": {
        "city": "new town",
        "street": "my home street 105."
      }
    }
  }
} 
```

另外，让我告诉你一个*[小秘密](http://www.utilities-online.info/xmltojson/#.UXYP8ysjqp0)*；）

现在，对于 json 模式：

```
"$schema": "http://json-schema.org/draft-03/schema", "id": "http://jsonschema.net", "required": false, "type": "object", "properties":{
  [-]"students":{
      "id": "http://jsonschema.net/students", "required": false, "type": "object", "properties":{
      [-]"student":{
          "id": "http://jsonschema.net/students/student", "required": false, "type": "object", "properties":{
          [-]"-name":{
          "id": "http://jsonschema.net/students/student/-name", "required": false, "default": "jack", "type":"string"}
          ,[-]"address":{
              "id": "http://jsonschema.net/students/student/address", "required": false, "type": "object", "properties":{
              [-]"city":{
              "id": "http://jsonschema.net/students/student/address/city", "required": false, "default": "new town", "type":"string"}
              ,[-]"street":{
              "id": "http://jsonschema.net/students/student/address/street", "required": false, "default": "my home street 105.", "type":"string"}
            }
            }
          ,[-]"age":{
          "id": "http://jsonschema.net/students/student/age", "required": false, "default": "23", "type":"string"}
        }
        }
    }
    }
}
} 
```

对不起，我在这里使用有限的工具。现在是*[秘密 #2](http://www.jsonschema.net/)*

# wordpress - paginate_links() 输出“paged=”链接而不是“page=”

> ID：16160865
> 
> 赞同：1
> 
> 时间：2013-04-23T04:18:16.450
> 
> 标签：wordpress, function, pagination, http-status-code-404

我一直有一个严重且完全无法解决的分页问题。

然而，我确实注意到了这个有趣的观点：

我搜索了一个关键词，比如可爱：

```
?s=cute&submit=Search&post_type=image&paged=2 
```

...是链接指向的地方。**"Paged="**在随机页面上给出 404。但是如果我修改 URL 说**page=**

```
?s=cute&submit=Search&post_type=image&page=2 
```

每个页面目标都有效，给我带来快乐，但分页选项卡列表始终停留在 0（不反映当前页面）。

我觉得我在玩一个带有代码和设置的“shell 游戏”，而 wordpress 让我迷惑不解。

**问题简化为：**

我怎样才能`&page=`在每种情况下都被输出？相反，如果`&paged=`应该是这样，我如何让它在没有 404 的情况下工作？！？！

这是我已经处理了将近3个月的问题。人们羞于回答。

* * *

**更新：**

为了处理`paged`URL 中破坏分页的变量，我创建了一个过滤器来简单地将其替换为`page`.

```
function symbiostock_pagination_mod( $args ){

    $args = str_replace('paged=', 'page=', $args);

    return $args;
    }

add_filter( 'paginate_links', 'symbiostock_pagination_mod', 1 ); 
```

看起来是个好主意！但是每次新的点击都会发生这种情况：

```
?s=cute&post_type=image&page=2&page=2

?s=cute&post_type=image&page=2&page=3 
```

那么这是在哪里修改的，为什么？

* * *

**更新：**

我不确定我是否是唯一一个遇到过这个问题的人，但我确实解决了它（至少对我自己来说），你可以在下面看到解决方案。也感谢给予的帮助。:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T02:23:44.607

所以这就是我想出的……我们不妨称它为**hack**或**变通**方法，因为它不知道这是否确实是我正在处理的错误（来自 wordpress 本身）或者只是我的一个完全隐藏的问题主题的代码。

下面的函数过滤了 ' `paginate_links()`' 函数并实现了这一点：

1.  我看到变量在*搜索*`paged`页面上随机生成 404 ，但在*存档*和*分类*页面上工作正常。所以，我们检查一下。，我们做我们的改变...***`if_search()`***

****   如果这是一次搜索，我们会使用正则表达式（或简单地将字符串替换`paged`为`page`，具体取决于永久链接结构）获得可能的页面 # 目标。我们使用`remove_query_var()`删除错误变量并`add_query_var()`放置工作变量。

    这样做是因为在这种奇怪的情况下，`page`总是会产生正确的结果。

    *   然后我们返回编辑后的目的地链接，生活是美好的。*** 

 ***功能如下：

```
add_filter( 'paginate_links', 'my_search_pagination_mod', 1 );

function my_search_pagination_mod( $link )
{

    if ( is_search() ) {

        $pattern = '/page\/([0-9]+)\//';

        if ( preg_match( $pattern, $link, $matches ) ) {
            $number = $matches[ 1 ];

            $link = remove_query_arg( 'paged' );

            $link = add_query_arg( 'page', $number );

        } else {

            $link = str_replace( 'paged', 'page', $link );

        }

    }

    return $link;
} 
```

* * *

还要感谢我在正则表达式方面得到的一些帮助：[PHP 正则表达式帮助：从“page/2/”中提取 2 的快速方法](https://stackoverflow.com/questions/16227524/php-regular-expression-help-a-quick-way-to-extract-the-2-from-page-2)***

# mongodb - 如何根据在 mongodb 中查找的条件更改文档的值

> ID：16160873
> 
> 赞同：-2
> 
> 时间：2013-04-23T04:19:37.317
> 
> 标签：mongodb

我有一个像

```
{
  "name":"A"
   .......
   .......
} 
```

如果名称包含“A”，那么我需要将名称显示为“它是电影”如何实现这个 mongo 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:37:38.273

查询 MongoDB 时不能更改结果集（MongoDB 中没有 'AS' aka Alias 请参阅：[Mongodb 在查询中创建别名](https://stackoverflow.com/questions/7093441/mongodb-creating-alias-in-a-query)）

你可以做的是在 shell 中运行一个函数来在你的文档中设置 strMessage 键。

# pointers - FlyCaptureImage 和 OpenCV Mat 之间的数据转换

> ID：16160874
> 
> 赞同：0
> 
> 时间：2013-04-23T04:19:37.390
> 
> 标签：pointers, opencv, mat

我正在使用 PointGrey 相机，它返回具有以下类型的图像：

```
typedef struct FlyCaptureImage
{
   // Rows, in pixels, of the image.
   int iRows;
   // Columns, in pixels, of the image.
   int iCols;
   // Row increment.  The number of bytes per row.
   int iRowInc;
   // Video mode that this image was captured with.  This member is only
   // populated when the image is returned from a grab call.
   FlyCaptureVideoMode videoMode;
   // Timestamp of this image.
   FlyCaptureTimestamp timeStamp;
   // Pointer to the actual image data.
   unsigned char* pData;
   //
   // If the returned image is Y8, Y16, RAW8 or RAW16, this flag indicates
   // whether it is a greyscale or stippled (bayer tiled) image.  In all
   // other modes, this flag has no meaning.
   //
   bool bStippled;
   // The pixel format of this image.
   FlyCapturePixelFormat pixelFormat;

   // This field is always 1 for single lens cameras.  This field is 
   // used to indicate the number of images contained in the structure 
   // when dealing with multi-imager systems such as the Bumblebee2 
   // or XB3?   int iNumImages;
   int iNumImages;

   // Reserved for future use.
   unsigned long  ulReserved[ 5 ];

} FlyCaptureImage; 
```

而我想在 OpenCV Mat 中处理图像，因此需要进行转换。我确实成功地尝试迭代图像中的每个元素以进行复制。但它很慢。所以，最好只复制指针。这是我使用 Mat 初始化的代码，就像：

```
MatImg = Mat::Mat(FCImg.iRows, FCImg.iCols, CV_8UC3, FCImg.pData); 
```

请给我一些建议。这是正确的做法吗？？我将此转换放在与接收返回的 Mat 图像的主程序不同的类中，例如 mycam.getframe(image)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:31:45.087

通常，每个像素*行*的末尾都包含额外的填充像素。*以字节*
为单位 的完整行大小有几个名称，包括*step*、*stepWidth*和*stride*。 在这称为*行增量*：。 ****`struct FlyCaptureImage`*`iRowInc`*****

 ***因此，在您的情况下，您应该指定步幅，如下所示：

```
cv::Mat pgImg(FCImg.iRows, FCImg.iCols, CV_8UC3, FCImg.pData, FCImg.iRowInc); 
```***

# perl - 如何检测 cronned 脚本是否卡住

> ID：16160877
> 
> 赞同：1
> 
> 时间：2013-04-23T04:19:46.093
> 
> 标签：perl, unix, cron

我在 Solaris SunOS 系统上有一些 Perl 脚本，它们基本上连接到网络上的其他节点并获取/处理命令日志。手动运行时，它们 99% 的时间都正确运行，但有时会卡住。在这种情况下，我只是中断它并再次运行。

现在，我打算 cron 它们，我想知道是否有办法检测脚本是否在执行过程中卡住（无论出于何种原因），最好在发生这种情况后立即退出，以便释放它可能占用的任何系统资源。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:50:26.947

TMTOWTDI，但有一种可能性：

1.  在脚本开始时，将进程 ID 写入临时文件。
2.  在脚本结束时，删除临时文件。
3.  在另一个脚本中，查看这些临时文件中是否有任何超过几分钟/几小时的文件。

# ios - 检索包含相同应用程序的附近设备的数据

> ID：16160881
> 
> 赞同：4
> 
> 时间：2013-04-23T04:20:07.577
> 
> 标签：ios, objective-c, uitableview, cllocationmanager

我正在开发一个聊天应用程序，一个要求是获取一定距离内用户的设备详细信息（即，100 英里内使用相同应用程序的设备）。我想获取详细信息，它们应该显示在`UITableView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:03:31.853

这涉及的部分太多，无法包含所有代码，但是我可以为您提供一个高级概述：

1.  您需要将设备的当前位置（用 找到`CLLocationManager`）和一个标识符发送到远程服务器`applicationDidBecomeActive:`，只要您确定用户移动了很长的距离。

2.  您的远程服务器将这些坐标、标识符和时间戳存储到数据库表中，并定期修剪旧条目。

3.  当您加载“附近的用户”屏幕时，您的设备会向服务器发出带有自己位置的请求，服务器会返回 100 英里内的用户列表。[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)是计算 GPS 坐标之间距离的正确方法。获得结果后，您可以将它们显示在`UITableView`.

4.  当用户选择附近的用户时，您可以使用它在步骤 1 中发送的标识符开始在他们之间建立连接。这部分高度依赖于您的特定聊天系统。

# java - SQLite 数据库加密的替代方案

> ID：16160885
> 
> 赞同：0
> 
> 时间：2013-04-23T04:20:19.733
> 
> 标签：java, sqlite

我的桌面 Java 应用程序使用了几个只读 SQLite 数据库，我希望人们无法打开和查看这些数据库。通常，这可能通过加密来完成，但我目前使用的是[sqlite4java](http://code.google.com/p/sqlite4java/)库，它不支持加密，也不容易允许使用其他 SQLite 加密库（例如 SEE）。

我想要做的是让“临时黑客”尽可能难以找到这些数据库文件中的一个并打开它们。例如，有人放弃了将它们粘贴在受密码保护的 ZIP 文件中的想法，然后使用[此处](https://stackoverflow.com/questions/166340/write-a-password-protected-zip-file-in-java)建议的库将其动态解密为 InputStream 或临时文件。

这是值得做的事情吗？

编辑：我意识到这不会是完全安全的，并且足够敬业的黑客可能仍然能够找到密钥并对其进行解密（这似乎是任何此类程序的漏洞）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:01:37.923

> “我想做的就是让它变得尽可能困难。”

*你可能只是让自己*尽可能地困难。

普通用户不会打开应用程序二进制文件。打开应用程序二进制文件的人有工具可以找到您的加密密钥。

如果你想通过默默无闻来从事安全，只需将数据库文件命名为“commons-io-3.2.1.jar”而不是“mydb.sqlite3”。对你来说不麻烦，仍然甩掉“休闲黑客”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:35:29.947

除了使用密码保护您的 SQLite DB，您可以选择不将其与应用程序 APK 一起提供，而是在首次运行时下载内容，这样您就不必加密和解密，并且您的 APK 更轻量级。

另请记住，您的数据库仍然可能被强烈的黑客入侵。

# php - 以相同的形式访问表单输入

> ID：16160887
> 
> 赞同：-1
> 
> 时间：2013-04-23T04:20:20.770
> 
> 标签：php

我正在以一种形式从用户那里获取输入。我可以获取该值（用户输入）来计算相同表单中的其他字段吗？

```
<input size="12" id="inputField" name="inputField"  autofocus="" type="date"     onblur="return dateValidate(this)"/> 
```

我可以稍后在表单中收集此表单输入并使用它来计算其他字段。我试图使用 to`$_POST`来检索值，但我不确定 thuis 是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:22:27.730

在提交表单之前，您不能在 PHP 中执行此操作。您可以在 JavaScript 中轻松地做到这一点。但是，当用户在框中输入内容时，您可以简单地添加一些 AJAX 代码将值发送到您的 PHP 脚本，并相应地解析响应。PHP 工作在服务器端，在没有任何服务器端请求的情况下不会与用户交互

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:26:56.273

你当然可以通过两种方式做到这一点......

第一种方式

```
<?php
$first_digit = '';
$second_digit = '';
$third_digit = '';

if(isset($_POST['calculate'])) {
   $first_digit = $_POST['first_digit'];
   $second_digit = $_POST['second_digit'];
   $third_digit = $first_digit + $second_digit;
}
?>

<form method="POST">
   <input type="text" name="first_digit" value="<?php if(isset($first_digit)) echo $first_digit; ?>" />

   <input type="text" name="second_digit" value="<?php if(isset($second_digit)) echo $second_digit; ?>" />

   <input type="text" name="third_digit" readonly value="<?php if(isset($third_digit)) echo $third_digit; ?>" />

   <input type="submit" name="calculate" value="Calculate" />
</form> 
```

第二种方式

汇总代码中的变量，而不是在文本框中显示结果输出，您可以计算并回显结果，或者您可以将其存储在数据库中。

注意：确保保留第三个`input[type=text]`，`readonly`因为它向您显示计算值，因此您可能不希望您的用户更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:24:51.613

是的，您可以从用户那里获取输入以计算相同表单中的其他字段，您应该使用类似的脚本`OnChange()`或`onClick()`拥有这个。

# mysql - 多个表未填充空值

> ID：16160892
> 
> 赞同：0
> 
> 时间：2013-04-23T04:20:56.823
> 
> 标签：mysql

我有 4 张桌子：

**表格1：** `batch_info with columns batch_id, brew_date, beer_style_name`

**表 2** `brew_fermentation with columns batch_id (FK of batch_info), fermentor_name (FK of fermentor),.`：。

**表3：** `fermentor with columns, fermentor_name, tank_volume`

**表 4：** `Produced_amount with columns batch_id(FK of batch_info), produced_amount, date_transferred`

酿造啤酒时，我们将其输入表 1 和表 2，当啤酒完成发酵后，我们将数据输入表 4 生产量。

我想创建一个看起来像这样的表

```
Fermentor # |  Batch_ID  |  Tank_Size  |  Date_Brewed  | Beer Style

F10.1           13001         10           2013-01-12      IPA

F20.2           NULL         20             NULL          EMPTY 
```

我有以下 SQL 语句。

但是，它不会仅显示发酵罐表中的所有发酵罐，而只会显示其中当前有东西的发酵罐。我想填充上面的表格。

```
SELECT brew_fermentation.fermentor_name AS "Fermentor #",
batch_info.batch_id AS "Batch Number", batch_info.beer_style_name AS
"Beer Style", batch_info.date_brewed AS "Date Brewed",
fermentor.tank_volume AS "BBLs"

FROM batch_info, fermentor, brew_fermentation

WHERE batch_info.batch_id = brew_fermentation.batch_id AND
brew_fermentation.fermentor_name=fermentor.fermentor_name AND

batch_info.batch_id NOT IN (SELECT produced_amount.batch_id FROM
produced_amount)

ORDER BY batch_info.date_brewed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:56:44.663

替换`NOT IN`为`NOT EXISTS`。

```
 ...
WHERE 
  batch_info.batch_id = brew_fermentation.batch_id 
  AND brew_fermentation.fermentor_name=fermentor.fermentor_name 
  AND NOT EXISTS (
    SELECT 1 FROM produced_amount WHERE batch_id = batch_info.batch_id
  ) 
```

# asp.net-mvc - RavenDB 复杂模型

> ID：16160894
> 
> 赞同：1
> 
> 时间：2013-04-23T04:21:00.073
> 
> 标签：asp.net-mvc, ravendb

我正在尝试通过在我已经从事过的项目中替换我的 RDBMS 来学习 RavenDB，以便在真实情况下使用它。我在尝试创建数据库时陷入停顿，我很想知道在文档数据库中建模的最佳方法。我提出的每一种可能性要么最终看起来像一个关系数据库，要么最终重复大量信息。重复数据库中的信息没什么大不了的，但是在发生更改时保持所有信息都是最新的。

我希望我被困在 SQL 模式中，我完全看不到一个明显的答案。

以下是我需要记录数据的基本对象： -Event
-Person -Organization -Cabin

简单的要求：
-**一个人**可以是多个**组织**的一部分。
- 一个**组织**可以有很多成员（**人**）。
-**一个人**可以参加多个**活动**。
- 一个**活动**有很多**人**参加。
-关于小屋的一些细节可能会根据活动（例如住宿）而改变。

复杂的要求：
-我需要能够为一个**活动预订****小屋**，这样一个小屋就不会同时被两个活动使用。（使用 RDBMS 我只会创建一个“EventCabins”表）。 -我需要能够记录哪些**人**正在参加**活动**。参加活动的人将拥有与他们相关的信息，这些信息不属于人员或活动的一部分。 -我需要能够记录哪些**组织**正在参加**活动**。参加的组织将拥有与他们相关的信息，这些信息不属于组织或活动的一部分。 -我需要能够记录哪些**人**被分配到哪个 **************特定事件中的**小屋。**
-我需要能够记录哪些**人作为****组织**的一部分参加特定活动（不需要作为组织的一部分参加）。即使一个人可以属于多个组织，他/她也只能作为其中一个组织的一部分参加特定活动。他/她可能会作为不同组织的一员参加另一个活动。-在程序中，用户一次只能查看一个事件。在这种情况下，用户可以查看按客舱分组或按组织分组的参加者。**************

 ****很明显，我需要单独的**Events**、**People**、**Organizations**和**Cabins**集合。满足上述复杂要求是我碰壁的地方。

我是否将参加者放入事件**集合****中**？如果是这样，那么我该如何处理客舱和组织？

我是否为参加者创建单独的集合？如果是这样，那么我将需要存储 4 个不同的相关集合，并在不同时间（组织、小屋、事件、人员）进行查询。这似乎与文档数据库方法相反。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T10:44:03.577

在我看来，您应该只为这个项目使用关系数据库。如果你想使用 RavenDB，我建议对所有这些对象使用完全分离的集合，但保留对其他文档的引用。然后您可以使用 .Include 功能查询数据库。最好的方法 - 为所有可能的情况创建 map/reduce indecies，例如为 Event 填充所有受邀人员的索引返回对象。****

# wpf - 使用 ObjectDataProvider 使用 Object 属性填充 ComboBox

> ID：16160898
> 
> 赞同：1
> 
> 时间：2013-04-23T04:21:19.850
> 
> 标签：wpf, combobox, objectdataprovider

我有一个*ObjectDataProvider*定义如下：

```
<ObjectDataProvider x:Key="employeeDataProvider" ObjectType="{x:Type cbb2:EmployeeAccess}" MethodName="getEmployees">            
</ObjectDataProvider> 
```

如您所见，调用*getEmployees方法返回**Employee*类型的列表。Employee类定义如下：

```
class Employee
{
    public string name { get; set; }
    public int id { get; set; }
} 
```

我的 XAML 页面有一个组合框，我想用员工姓名填充该组合框。这是我到目前为止所拥有的：

```
<ComboBox ... ItemsSource="{Binding Source={StaticResource employeeDataProvider}}"/> 
```

我遇到的问题是组合框填充了 Employee 对象，而不是 Employee 的 name 属性。

这是正在发生的事情的图片：

![组合框](https://i.stack.imgur.com/lQv2o.png)

我的问题是，如何让组合框仅填充员工的 name 属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:26:21.570

将此属性添加到组合框

```
DisplayMemberPath="name" 
```

例如：

```
<ComboBox DisplayMemberPath="name" ItemsSource="{Binding Source={StaticResource employeeDataProvider}}"/> 
```

# symfony - 一个表到多个表和记录的原则

> ID：16160908
> 
> 赞同：0
> 
> 时间：2013-04-23T04:22:40.330
> 
> 标签：symfony, doctrine

我想知道我们可以在一张表和许多表之间建立许多关系，这些表中有很多记录吗？

例如;

我有一个新闻表，该新闻可以同时与 Games、Developers、Platforms 映射，并具有多条记录。

样本 ：

# 新闻 : 孤岛危机 55 可预订

> 关系：{**游戏**：孤岛危机55；**开发商**：Crytek；**平台**：Ps3、Xbox360、PC、Wii；}

我真的无法想象如何进行 orm 设计。

一对多，多对多？

等待您的大力帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:15:02.303

多对多将最适合此。您可以创建 4 个表。每个表（新闻、游戏、开发人员、平台）一张。新闻将是您的主表，其中包含来自游戏、开发人员、平台的外键。

这可能会帮助您进行学说映射。 [http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)

# mysql - 如何在 MySQL 中将两个相同的表连接在一起

> ID：16160910
> 
> 赞同：1
> 
> 时间：2013-04-23T04:22:43.007
> 
> 标签：mysql, sql

这是我的数据库架构中的三个表：

```
-- Table where I store authors
SELECT author_id, first_name, last_name FROM author;
╔═══════════╦════════════╦═══════════╗
║ author_id ║ first_name ║ last_name ║
╠═══════════╬════════════╬═══════════╣
║         1 ║     Ernest ║ Hemingway ║
║         2 ║       Walt ║   Whitman ║
║         3 ║       Mark ║     Twain ║
║       ... ║        ... ║       ... ║
╚═══════════╩════════════╩═══════════╝

-- Junction-table to keep track of books and their respective authors
SELECT book_id, author_id FROM book_author;
╔═════════╦═══════════╗
║ book_id ║ author_id ║
╠═════════╬═══════════╣
║      37 ║         1 ║
║      37 ║         2 ║
║     ... ║       ... ║
╚═════════╩═══════════╝

-- Temporary table to store, once again, books and their respective authors
-- but only for updating book purposes. The table is identical in its structure
-- to the book_author table
SELECT book_id, author_id FROM temp_book_author;
╔═════════╦═══════════╗
║ book_id ║ author_id ║
╠═════════╬═══════════╣
║      37 ║         3 ║
║     ... ║       ... ║
╚═════════╩═══════════╝ 
```

现在，我可以使用下面的查询来获得以下结果：

```
SET    @BOOK_ID = 37;
SELECT @BOOK_ID AS book_id,
       a.last_name,
       a.first_name
FROM   book_author AS ba
       LEFT JOIN author AS a
              ON ba.author_id = a.author_id
WHERE  book_id = @BOOK_ID;
╔═════════╦════════════╦═══════════╗
║ book_id ║ first_name ║ last_name ║
╠═════════╬════════════╬═══════════╣
║      37 ║     Ernest ║ Hemingway ║
║      37 ║       Walt ║   Whitman ║
╚═════════╩════════════╩═══════════╝ 
```

这是我想要实现的目标：我需要将与从**temp_book_author**表中 ID 为 37 的书籍相关联的行（或行，如果有更多行）添加到上面的选择中，或者，如果你愿意, 有点制作两张表，**book_author**和**temp_book_author**，即一张表，就好像它们是一张表一样开始：

```
╔═════════╦════════════╦═══════════╗
║ book_id ║ first_name ║ last_name ║
╠═════════╬════════════╬═══════════╣
║      37 ║     Ernest ║ Hemingway ║
║      37 ║       Walt ║   Whitman ║
║      37 ║       Mark ║     Twain ║
╚═════════╩════════════╩═══════════╝ 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T04:45:21.340

使用联合：

```
SET    @BOOK_ID = 37;
SELECT @BOOK_ID AS book_id,
       a.last_name,
       a.first_name
FROM   (SELECT * FROM book_author
        UNION
        SELECT * FROM temp_book_author) AS ba
       LEFT JOIN author AS a
              ON ba.author_id = a.author_id
WHERE  book_id = @BOOK_ID; 
```

您还可以创建一个自动合并两个表的表：

```
CREATE TABLE union_book_author (book_id int, author_id int)
ENGINE = MERGE
UNION = (book_author, temp_book_author); 
```

然后，您可以`union_book_author`在查询中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:45:14.767

我同意 Scotch 的评论，理想情况下您应该将 temp_book_author 中的数据插入 book_author 中，然后从该表中进行选择，但如果您有不想这样做的原因，那么您需要使用 sql 命令' **union** '。

```
SET    @BOOK_ID = 37;
SELECT @BOOK_ID AS book_id, a.last_name, a.first_name
FROM   book_author AS ba 
LEFT JOIN author AS a ON ba.author_id = a.author_id
WHERE  book_id = @BOOK_ID
UNION
select t.book_id, a1.last_name, a1.firstname
from temp_book_author as t
left join author as a1 on t.author_id = a1.author_id
where t.book_id = @BOOK_ID 
```

# cocoa - 唯一标识 NSScreen

> ID：16160912
> 
> 赞同：3
> 
> 时间：2013-04-23T04:22:52.867
> 
> 标签：cocoa, unique, identifier

我正在开发一个为每个显示器设置设置的项目。我希望我的应用程序支持删除并稍后重新添加显示，可能在两者之间使用另一个显示，当再次看到显示时应用每个显示的原始设置。

据我所知，没有办法通过 NSScreen 在当前显示配置的上下文之外唯一标识一个。我不能只使用屏幕尺寸/属性，因为用户可以在不同位置有多个相同型号的显示器；据我所知，这个问题适用于屏幕的所有持久属性。

有没有一种好的、已知的方法来做到这一点？

谢谢你的时间。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T08:16:55.410

`-[NSScreen deviceDescription]`有关获取的`CGDirectDisplayID`文档和有关文档的文档说`CGDirectDisplayID`：

> 当连接显示器时，Quartz 会分配一个唯一的显示标识符 (ID)。显示 ID 可以跨进程和系统重新启动持续存在，并且只要某些显示参数不更改，通常保持不变。
> 
> 在分配显示 ID 时，Quartz 会考虑以下参数：
> 
> *   小贩
> *   模型
> *   序列号
> *   在 I/O Kit 注册表中的位置

这听起来非常接近您正在寻找的内容。

# javascript - 一个拖放文件上传的Javascript库

> ID：16160914
> 
> 赞同：0
> 
> 时间：2013-04-23T04:23:07.567
> 
> 标签：javascript, file-upload, drag-and-drop

我在这里寻找像 minus.com 这样的 JavaScript 拖放文件上传库

![在此处输入图像描述](https://i.stack.imgur.com/bPGaY.png)

拖放应立即触发上传。

我知道有一个不错的 jQuery 库[http://blueimp.github.io/jQuery-File-Upload/](http://blueimp.github.io/jQuery-File-Upload/)但我想要一个立即触发上传

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-03T05:03:53.763

以防万一有人碰到这个，这就是你要找的东西： [http ://www.dropzonejs.com/](http://www.dropzonejs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-07T11:00:30.307

也许这就是你要找的东西：[https ://niklr.github.io/angular-material-datatransfer/](https://niklr.github.io/angular-material-datatransfer/)

它使用 Angular Material 作为 UI 组件框架，并提供以下功能：

*   上传和下载多个同时文件
*   以小块上传以支持大文件
*   拖放
*   分页
*   可定制的外观
*   通过自动重试容错
*   将结果导出为 CSV 或 JSON

该应用程序专为支持高级 HTML5 文件 API 功能的现代浏览器而设计。

# python - CentOS 6.x 和 jansson 库问题

> ID：16160922
> 
> 赞同：0
> 
> 时间：2013-04-23T04:23:41.687
> 
> 标签：python, curl, centos, yum, shared-libraries

我的操作系统是 CentOS 6.4 x86_64bit。

我正在尝试使用 jansson lib，就像他们的教程显示的那样。

这是我的历史。

1.  我下载了 github_commits.c
2.  我下载了 curl 库。
3.  我遇到了 libjansson.so.4 的一些问题
4.  所以我放了'ldconfig'，看起来一切正常。
5.  出于某种原因，我需要进行 yum 更新。所以我命令'yum update'
6.  终端显示以下错误：

    导入运行 yum 所需的 Python 模块之一时出现问题。导致此问题的错误是：

    /usr/lib64/python2.6/site-packages/pycurl.so：未定义符号：CRYPTO_set_locking_callback

    请安装提供此模块的软件包，或验证模块是否安装正确。

    上述模块可能与当前版本的 Python 不匹配，即：2.6.6 (r266:84292, Feb 22 2013, 00:00:18) [GCC 4.4.7 20120313 (Red Hat 4.4.7- 3)]

    如果您无法自行解决此问题，请访问 yum 常见问题解答：http: [//yum.baseurl.org/wiki/Faq](http://yum.baseurl.org/wiki/Faq)

7.  在互联网上，我找到了说我必须删除 curl 的解决方案。这是链接： http: [//forums.fedoraforum.org/showthread.php?t=263887](http://forums.fedoraforum.org/showthread.php?t=263887)

8.  所以我在这里进退两难。由于 jansson，我必须使用 curl。同时，我也得用yum

这个问题有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:38:25.197

为什么不用 yum 安装 curl 和 curl-devel？

```
yum install curl

yum install curl-devel 
```

# ios - ios 从 NSUserdefaults 保存和检索 NSNumber

> ID：16160925
> 
> 赞同：0
> 
> 时间：2013-04-23T04:23:52.873
> 
> 标签：ios, objective-c, cocoa-touch, ios4

我已经搜索过，但我找不到一个很好的解释来解释为什么我仍然没有从我保存的整数中得到正确的值。

这就是我保存事件 ID 的方式。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setInteger:eventSelected.eventId forKey:@"currentEvent"]; 
```

这就是我试图检索它的方式。

```
NSLog(@"user dfault %@", [NSNumber numberWithUnsignedInt:[[[NSUserDefaults standardUserDefaults] objectForKey:@"currentEvent"] unsignedIntegerValue]]); 
```

我明白了。

> 用户默认123581200

另外，要注意，如果我做了**intValue**而不是**unsignedIntegerValue**，它仍然会给我一个随机的 ID 号。想知道我做错了什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T04:34:33.863

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
// Convert your value to IntegerValue and Save it
[prefs setInteger:[eventSelected.eventId integerValue] forKey:@"currentEvent"];
// Dont forget to synchronize UserDefaults
[prefs synchronize];

// To Access this value
NSLog(@"%d",[prefs integerForKey:@"currentEvent"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:28:25.473

而不是这段代码`NSLog(@"user dfault %@", [NSNumber numberWithUnsignedInt:[[[NSUserDefaults standardUserDefaults] objectForKey:@"currentEvent"] unsignedIntegerValue]]);`

用这个

```
NSLog(@"user dfault %@", [[NSUserDefaults standardUserDefaults]  integerForKey:@"currentEvent"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:29:11.113

要检索整数，您应该使用以下函数：

```
[[NSUserDefaults standardUserDefaults]  integerForKey:@"currentEvent"]; 
```

当您要求 objectForKey 时，它首先将其装箱，然后返回对象。发布 intValue 会将该对象的地址转换为整数。因此，每次您都会收到不同的号码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T04:30:33.010

`NSNumber`给出一个指针值，而不是整数值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-14T19:18:15.910

```
NSNumber *number; 
```

店铺：

```
[[NSUserDefaults standardUserDefaults] setValue:number forKey:@"Number"]; 
```

检索：

```
number = [NSNumber numberWithInteger:[[NSUserDefaults standardUserDefaults] integerForKey:@"Number"]]; 
```

# javascript - 未捕获的类型错误：对象# 没有方法“显示”

> ID：16160927
> 
> 赞同：0
> 
> 时间：2013-04-23T04:24:06.217
> 
> 标签：javascript, html, google-chrome, object, canvas

全部在一个文件中

它是 html5/javascript 画布游戏的开始

似乎每个人的独奏都在更好地链接库（这都是一个文件）或在创建对象时添加新的（我这样做了）

没有对象，代码可以正常工作：/

缩写代码

```
html codes
codes

var tempa = new asteroid(BASIC_L, 100, 300,300,0,0,2,2,0,0);

codes

function asteroid(type, hp, x, y, z, r, vx, vy, vz, vr)
            {
              this.type = type;
              this.hp = hp;
              this.x = x;
              this.y = y;
              this.z = z;
              this.r = r;
              this.vx = vx;
              this.vy = vy;
              this.vz = vz;
              this.vr = vr;

                function display(){
                  this.x += this.vx;
                  this.y += this.vy;

                  if(this.type == BASIC_L){
                debug(this.type);
                ctx.beginPath();
                ctx.strokeStyle="#00fff0";
                ctx.arc(this.x,this.y,100,0,2*Math.PI);
                ctx.stroke();
                  }
                }
            }

//codes 

function draw(){
   //codes
   tempa.display();
}

//codes
//html codes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:26:03.007

您创建`display`为闭包方法而不是成员函数。

```
function asteroid(type, hp, x, y, z, r, vx, vy, vz, vr) {
    this.type = type;
    this.hp = hp;
    this.x = x;
    this.y = y;
    this.z = z;
    this.r = r;
    this.vx = vx;
    this.vy = vy;
    this.vz = vz;
    this.vr = vr;

    this.display = function() {
        this.x += this.vx;
        this.y += this.vy;

        if (this.type == BASIC_L) {
            debug(this.type);
            ctx.beginPath();
            ctx.strokeStyle = "#00fff0";
            ctx.arc(this.x, this.y, 100, 0, 2 * Math.PI);
            ctx.stroke();
        }
    }
}

// codes

function draw() {
    // codes
    tempa.display();
} 
```

# android - Android 删除 Activity 的 TitleBar 会导致 ClassCastException。为什么？

> ID：16160933
> 
> 赞同：0
> 
> 时间：2013-04-23T04:24:47.913
> 
> 标签：android, classcastexception

我在以下行收到 ClassCastException：

```
content = ((LinearLayout) findViewById(android.R.id.content).getParent()); 
```

仅当我将 Activity/App 的主题设置为`android:Theme.NoTitleBar`

全屏也有同样的问题。

```
FATAL EXCEPTION: main
E/AndroidRuntime(648): java.lang.ClassCastException: com.android.internal.policy.impl.PhoneWindow$DecorView 
```

# c# - 如何将实际的 C# *.cs 源代码文件读入可查询的对象

> ID：16160935
> 
> 赞同：0
> 
> 时间：2013-04-23T04:24:59.143
> 
> 标签：c#

我需要编写一个读取实际 C# .cs 文件的 Windows 应用程序，然后尝试确定该源文件上的哪些过程没有名为“int userID”的参数（它是一种代码检查器）。

是否有一些东西已经将 C# 文件读入某种对象，这些对象具有一个名为“procedureName”的属性和另一个名为“parameterList”的属性......可以查询？

如果不是，那么实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:04:24.937

我建议使用 NRefactory 应该能够提供解决方案。以下是一个示例，它将在名称为 bob 的文件中查找所有方法。

```
CSharpParser parser = new CSharpParser();
SyntaxTree syntaxTree = parser.Parse(@"namespace Test
    {

        public class TestClass
        {
            public void Method(string bob)
            {
            }
        }
    }");

var result = syntaxTree.Descendants.OfType<MethodDeclaration>().Where(x => x.Descendants.OfType<ParameterDeclaration>().Any(y => y.NameToken.Name == "bob"));

if (result.Any())
{
    Console.WriteLine("We Win");
} 
```

# git - 文档根目录中的远程 Git 存储库

> ID：16160941
> 
> 赞同：3
> 
> 时间：2013-04-23T04:25:41.503
> 
> 标签：git, remote-server, git-push

我试图在我的网站上使用 git。该网站位于我们的网络服务器上。

```
mkdir /home/website/public_html
cd /home/website/public_html
git --bare init 
```

然后我转到本地机器并切换到我的文件所在的目录

```
git remote rm origin
git remote add origin git@server.com:/home/website/public_html
git push origin master
Enter passphrase for key '/c/Users/git/.ssh/id_rsa':
Counting objects: 6, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (6/6), 460 bytes, done.
Total 6 (delta 0), reused 0 (delta 0)
To git@server.com:/home/website/public_html
 * [new branch]      master -> master 
```

但是现在当我回到我的服务器时：

```
ls /home/website/public_html
branches  config  description  HEAD  hooks  info  objects  refs 
```

我推送到服务器的文件在哪里？我会以错误的方式解决这个问题吗？（我推送的本地文件夹中唯一的东西是自述文件）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:14:50.393

您已经在服务器上创建了一个裸存储库。裸存储库没有工作区。

我假设您正在尝试使用 Git 进行网站发布？请参阅[此链接](http://toroid.org/ams/git-website-howto)以获取一个选项。简而言之：

*   您在服务器上创建 2 个存储库。一个是裸存储库，就像您已经创建的一样，但它位于 public_html 目录之外
*   其他是 public_html 目录中的普通存储库
*   您创建一个 post-receive 挂钩，每当您推送到裸存储库时，它都会更新 public_html 目录中的存储库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:14:08.047

您必须克隆您使用 git --bare init 创建的存储库。请参阅[git clone](https://www.kernel.org/pub/software/scm/git/docs/git-clone.html)。例如 ：

1) 在服务器上的文件夹中使用 git --bare init 创建一个存储库

2）将该存储库克隆到您要使用的位置，例如 public_html

3）在克隆文件夹中添加新内容后，使用：

```
git add .
git commit -a -m" message for commit "
git push origin master 
```

要从您的存储库中获取代码，请使用：

```
git pull origin master 
```

这会将存储库中的代码与您的本地分支合并

# visual-studio-2010 - EmguCV 'Emgu.CV.CvInvoke' 异常

> ID：16160945
> 
> 赞同：5
> 
> 时间：2013-04-23T04:26:01.623
> 
> 标签：visual-studio-2010, exception, opencv, emgucv, typeinitializeexception

我已经安装了 EmguCV 2.4.2.1777。我有一个 32 位的 windows 7，所以我使用安装程序安装了它。现在我正在尝试编写一个简单的代码来在 C# 的窗口中捕获网络摄像头的视频。问题是在执行过程中出现以下著名错误：

```
A first chance exception of type 'System.DllNotFoundException' occurred in Emgu.CV.dll 
A first chance exception of type 'System.TypeInitializationException' occurred in Emgu.CV.dll
An unhandled exception of type 'System.TypeInitializationException' occurred in Emgu.CV.dll 
```

文件夹中存在 Emgu.CV.dll 文件。我不明白为什么它会给出这个错误。我尝试了其他 stackoverflow 用户建议的所有检查以及许多其他参考：

1) 安装 MSVCR：MSVCRT 10.0 SP1 x86

2) 将 OpenCV dll 复制到执行目录

3) 我也有一个 32 位操作系统。所以这也不应该是一个问题。

但是当我检查依赖项时，我遇到了一个问题：

我使用 DependecyWalker 打开 cvextern.dll 发现缺少以下依赖项：

```
NVCUDA.DLL
API-MS-WIN-CORE-COM-L1-1-0.DLL
API-MS-WIN-CORE-WINRT-ERROR-L1-1-0.DLL
API-MS-WIN-CORE-WINRT-L1-1-0.DLL
API-MS-WIN-CORE-WINRT-ROBUFFER-L1-1-0.DLL
API-MS-WIN-CORE-WINRT-STRING-L1-1-0.DLL
API-MS-WIN-SHCORE-SCALING-L1-1-0.DLL
DCOMP.DLL
IESHIMS.DLL 
```

它还给出了以下内容：

错误：未找到至少一个必需的隐式或转发依赖项。警告：至少没有找到一个延迟加载依赖模块。警告：由于延迟加载依赖模块中缺少导出功能，至少有一个模块存在未解析的导入。

请帮我解决这个例外。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-18T22:40:51.080

我将所有 dll 文件从 C:\Emgu\emgucv-windows-universal-gpu 2.4.9.1847\bin\x86 复制到我的项目中名为 include 的文件夹中，并将这些 DLL 的“复制到输出目录”选项更新为“复制总是”，它摆脱了这个问题。

# java - 从 ArrayList 中获取字符串

> ID：16160950
> 
> 赞同：-4
> 
> 时间：2013-04-23T04:26:28.510
> 
> 标签：java, arraylist

如果我的代码喜欢，如何从 ArrayList 获取字符串

```
 ArrayList<String> PItoList = new ArrayList();
    for (int i = 0; i < AllPunchList.size(); i++) {
        PItoList.add(AllPunchList.get(i).toString());
    } 
```

我想一一拆分 ArrayList 中的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:28:13.030

你可以做这样的事情： -

```
for(String eachString : PItoList){
    // eachString.split(regex); 
} 
```

遍历中的每个元素，`List`然后对每个元素做任何你想做的事情！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:32:56.647

尝试这个 ：-

```
ArrayList<String> PItoList = new ArrayList<String>();
for (int i = 0; i < AllPunchList.size(); i++) {
    PItoList.add((String)AllPunchList.get(i));
} 
```

在上面的示例中，我打印了 ArrayList 中的所有元素。通过这种方式，您可以获得所有元素。

那你为什么需要 split ？

希望它会帮助你。

# sqlite - 如何将 SQLite 命令应用于所有表

> ID：16160952
> 
> 赞同：3
> 
> 时间：2013-04-23T04:26:41.870
> 
> 标签：sqlite

假设我想运行以下 SQLite 命令来删除特定表中 Name 列为 NULL 的所有行：

```
DELETE FROM myTable WHERE Name IS NULL; 
```

现在假设我有 20 个表，它们没有以任何模式命名。我想从数据库中的每个表中删除 Name 列为 NULL 的所有行。有没有我可以一次性使用的语句？还是我必须运行一条语句来获取表名，然后获取输出并使用每个表名运行 20 条左右的命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:13:08.060

这是我从 sqlite3 控制台第一次破解它：

```
.output tmp

SELECT "DELETE FROM " || sqlite_master.name || 
" WHERE name is NULL;" FROM sqlite_master 
WHERE type = "table" AND sqlite_master.name NOT LIKE 'sqlite_%';

.read tmp 
```

这会为每个表生成删除语句，将其输出到文件，然后读取并运行该文件。

（我的评论是关于另一个答案中的语法，每个删除语句只能从一个表中删除。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:52:10.487

如果您在每个表中都有必填列“名称”，那么

```
 DELETE FROM myTable1, myTable2, myTable3 WHERE Name IS NULL; 
```

# dojo - 在汇总行中具有计算值的 Dojo TreeGrid

> ID：16160953
> 
> 赞同：0
> 
> 时间：2013-04-23T04:26:45.337
> 
> 标签：dojo

我正在开发一个树形网格，并将一个对象传递给格式化程序以生成 gfx 图形。

```
},{
                                    field:"projects", name:"Projects", children:[
                                        {field:"name", name:"Project Name", formatter: projectFormatter},
                                        {field:"actual_cost", name:"Cost", width:'220px', formatter: costFormatter},
                                        {field:"budget", name:"Budget"}
                                    ],
                                    aggregate: "cnt",
                                    itemAggregates: ["actual_cost"]

                                } 
```

现在格式化程序函数应该能够使用这些数据....但是在我的一生中，我无法让它计算格式化程序中的值

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:36:25.007

尝试将无名函数传递给格式化程序：

```
...,formatter: function(value){return getExtImg(value);},... 
```

在那里，您可以按名称调用您的自定义函数。不要忘记在格式化程序函数中返回一个值！

# asp.net - 通过单个文字控件生成页面

> ID：16160954
> 
> 赞同：0
> 
> 时间：2013-04-23T04:26:47.370
> 
> 标签：asp.net, vb.net

如果我使用一个文字控件并将其分配给它 - 一个字符串，在它的代码隐藏文件中为整个 html 页面动态构建怎么办？文字控件会以任何方式修改输出吗？例如添加额外的 html、编码等

例如 ASPX 文件将只包含这个

```
<%
@Page Language="VB"
Title="SamplePage"
CodeFile="SamplePageCodeBehind.aspx.vb"
Inherits="SamplePage"
%><asp:Literal Id="litContents" Runat="Server" /> 
```

在代码隐藏 (SamplePageCodeBehind.aspx.vb) 中：

```
Protected Sub Page_Load(
  ByVal sender As Object,
  ByVal e As System.EventArgs
) Handles Me.Load

  Dim sHtml As String = _
  "<html><head></head><body>hello world</body></html>"

  litContents.Text = sHtml

End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:50:56.050

您可以完全控制渲染，而不是使用文字控制

```
 Response.Clear()
 Response.Write("any html string")
 Response.Flush()
 Response.End() 
```

在您的 Page_Load 方法中。这样您就可以确保不会呈现不需要的标签。

# php - Foreach 循环显示一个条目

> ID：16160955
> 
> 赞同：0
> 
> 时间：2013-04-23T04:26:47.997
> 
> 标签：php, foreach

让我先展示我的代码：

**第1部分**

```
<?php foreach($entries['items'] as $entry) : ?>
    <audio preload="none" title="<?php echo $entry->title; ?>" data-date="<?php echo date("M d Y",strtotime($entry->pubDate)); ?>">
        <?php if ( $entry->url != "" ) { ?>
            <source src="<?php echo $entry->url; ?>" type="audio/mpeg" />
        <?php } else { ?>
            <source src="<?php echo $entry->guid; ?>" type="audio/mpeg" />
        <?php } ?>

            <!-- <source src="ogg_version.ogg" type="audio/ogg" /> -->
    </audio>
<?php endforeach; ?> 
```

**第2部分**

```
<?php
foreach($entries['items'] as $entry) {
    $output = '<audio preload="none" title="'.$entry->title.'" data-date="'.date("M d Y",strtotime($entry->pubDate)).'">';
    if ( $entry->url != "" ) {
    $output .= '<source src="'.$entry->url.'" type="audio/mpeg" />';
    } else { 
    $output .= '<source src="'.$entry->guid.'" type="audio/mpeg" />';
    }
    $output .= '</audio>';

    return $output;
} 
```

第 1 部分还可以，但第 2 部分只返回一个条目。我无法识别错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:28:25.970

改变

```
<?php
    foreach($entries['items'] as $entry) {
    $output = '<audio preload="none" title="'.$entry->title.'" data-date="'.date("M d Y",strtotime($entry->pubDate)).'">'; 
```

对此

```
<?php
$output = "";
foreach($entries['items'] as $entry) {

  $output.= '<audio preload="none" title="'.$entry->title.'" data-date="'.date("M d Y",strtotime($entry->pubDate)).'">'; 
```

每次循环时，您的 foreach 循环都会分配新值。您需要初始化 $output 变量，然后将其连接起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T04:29:15.383

这是一个逻辑错误。`return`指令在第一次迭代时退出循环。

您的代码的基本内容是：

```
foreach ($somethings as $something) {
  // first iteration has begun
  doSomethingWith($something); // done
  return $something; // done, quite the loop
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T04:29:27.757

```
$output = '<audio preload="none" title="'.$entry->title.'" data-date="'.date("M d Y",strtotime($entry->pubDate)).'">'; 
```

应该

```
$output. = '<audio preload="none" title="'.$entry->title.'" data-date="'.date("M d Y",strtotime($entry->pubDate)).'">'; 
```

并且`return`调用应该在循环之外

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T04:34:00.790

你已经从循环中返回了你的值。这将不允许循环第二次执行。

试试这个代码。

```
<?php
$output='';
foreach($entries['items'] as $entry) {
    $output .= '<audio preload="none" title="'.$entry->title.'" data-date="'.date("M d Y",strtotime($entry->pubDate)).'">';
    if ( $entry->url != "" ) {
    $output .= '<source src="'.$entry->url.'" type="audio/mpeg" />';
    } else { 
    $output .= '<source src="'.$entry->guid.'" type="audio/mpeg" />';
    }
    $output .= '</audio>';
}
return $output; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T04:28:29.440

试试这个代码

```
<?php
$output='';
foreach($entries['items'] as $entry) {
    $output .= '<audio preload="none" title="'.$entry->title.'" data-date="'.date("M d Y",strtotime($entry->pubDate)).'">';
    if ( $entry->url != "" ) {
    $output .= '<source src="'.$entry->url.'" type="audio/mpeg" />';
    } else { 
    $output .= '<source src="'.$entry->guid.'" type="audio/mpeg" />';
    }
    $output .= '</audio>';
}
 return $output; 
```

# installation - 确定字符频率的函数

> ID：16160958
> 
> 赞同：0
> 
> 时间：2013-04-23T04:27:19.873
> 
> 标签：installation, nsis

是否有现有的 NSIS 函数/宏可以告诉我一个字符（或字符串）在字符串中出现的次数？

例如：

```
${StrCount} "abba" "a" $0
# $0 will equal 2 (because the character 'a' occurs twice) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:17:43.013

您可以尝试这个同时支持计算单个字符或子字符串以及区分大小写或不区分大小写的函数：

```
Function StrCount 
    ;takes the following parameters by the stack:
    ; case sensitive ('s') or insensitive
    ; string to lookup
    ; string where to search

    Exch $2 ;Stack = ($2 test str)
    Exch    ;Stack = (test $2 str)
    Exch $1 ;Stack = ($1 $2 str)
    Exch    ;Stack = ($2 $1 str)
    Exch 2  ;Stack = (str $1 $2)
    Exch $0 ;Stack = ($0 $1 $2)
    Exch 2  ;Stack = ($2 $1 $0) just not to mess order
    Push $3
    Push $4
    Push $5 
    Push $6 ;Stack = ($6 $5 $4 $3 $2 $1 $0)

    StrLen $4 $1    
    StrCpy $5 0
    StrCpy $6 0

    ;now $0=str, $1=test, $2=s/i, $3=tmp str, $4=lookup len, $5=index, $6=count

    loop:
    StrCpy $3 $0 $4 $5
    StrCmp $3 "" end
    ${if} $2 == 's'
        StrCmpS $3 $1 count ignore
    ${else}
        StrCmp $3 $1 count ignore
    ${endif}
    count:
    IntOp $6 $6 + 1 ;count++
    ignore:
    IntOp $5 $5 + 1 ;index++
    goto loop
    end:

    Exch 6  ;Stack = ($0 $5 $4 $3 $2 $1 $6)
    Pop $0
    Pop $5
    Pop $4
    Pop $3
    Pop $2
    Pop $1  ;Stack = ($6)
    Exch $6 ;count is on top stack

FunctionEnd

!macro StrCount str look si
    Push ${str}
    Push ${look}
    Push ${si}
    Call StrCount
!macroend
!define StrCount "!insertmacro StrCount" 
```

像这样称呼它：

```
${StrCount} "AbABABa" "Ba" "i" #or 's' for case sensitive
Pop $0
DetailPrint "count=$0" 
```

# java - Java 编译 NoClassDefFoundError

> ID：16160960
> 
> 赞同：-1
> 
> 时间：2013-04-23T04:27:31.977
> 
> 标签：java

所以我试图在java中编译和运行一个问题，但我无法让它运行。我只是想用一个 HelloWorld 类和一个打印“hello world”的主函数来做一个基本的包。

```
package helloworld;

public class HelloWorld {

    public static void main(String args[]) {
        System.out.println("Hello world \n");
    }
} 
```

然后我调用 javac HelloWorld.java 来编译它。然后，当我尝试执行代码时，出现此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: HelloWorld (wrong name: helloworld/HelloWorld)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

编辑：我正在尝试使用命令“java HelloWorld”运行代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T04:31:54.363

让我们看看你是否明白我的所作所为

```
tmp$ mkdir helloworld
tmp$ vi helloworld/HelloWorld.java
#paste the content of the class *including* package definition
tmp$ cd helloworld/
helloworld$ javac HelloWorld.java 
helloworld$ java HelloWorld 
Exception in thread "main" java.lang.NoClassDefFoundError: HelloWorld (wrong name: helloworld/HelloWorld)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: HelloWorld.  Program will exit.
helloworld$ cd ..
tmp$ java helloworld.HelloWorld 
Hello world 
```

另外，请阅读：[http ://www.cs.usfca.edu/~parrt/course/601/lectures/java.tools.html](http://www.cs.usfca.edu/~parrt/course/601/lectures/java.tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:38:47.367

执行以下步骤 1\. 将 HelloWorld.java 文件复制到空目录 2\. javac -d 。HelloWorld.java 3\. java -classpath 。helloworld.HelloWorld

您的设置有 2 个问题。1.编译时需要使用-d选项。这将根据包结构生成 .class 文件。这对于运行 .class 文件很有用。之所以如此，是因为 java 需要包结构中的 .class 文件。2\. 将类路径指定为“.” 它代表运行程序的当前目录。

你也可以使用这个 1\. javac -dc:\temp HelloWorld.java 3\. java -classpath c:\temp helloworld.HelloWorld

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:57:02.623

只需将您的类名从 Helloworld 更改为任何其他（如 hl）并像这样运行（假设在 e 驱动器中） E:>cd helloworld

E:\helloworld>javac hl.java

E:\helloworld>cd ..

E:>java helloworld.hl 你好世界

# javascript - 如何在画布中显示组和非组形状的尺寸

> ID：16160967
> 
> 赞同：3
> 
> 时间：2013-04-23T04:27:51.437
> 
> 标签：javascript, canvas, html5-canvas, fabricjs

我正在使用fabric.js 做一个项目，我想在画布中显示形状尺寸，并且尺寸应该根据拖放和调整大小而变化。这是图像。编辑：我必须使用 onclick 侦听器显示非组形状和组形状的尺寸（高度、宽度和角度）。我需要帮助，任何帮助或提示都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:26:08.243

您可以监听 object:scaling 事件并相应地更新文本 objectc，使用@kangax 所说的函数获取宽度和高度。调整对象大小时，您还需要重新定位文本。
检查此链接： http: [//fabricjs.com/events/](http://fabricjs.com/events/)

# sql - 此 MySQL 排序子句的 SQL Server 等效项

> ID：16160971
> 
> 赞同：2
> 
> 时间：2013-04-23T04:28:12.500
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想根据两个 varchar 列`COL_A`和`COL_B`.

如果值为`COL_A`，`('val1', 'val2', 'val3')`我希望它出现在顶部，否则我希望它出现在底部。然后，我想对 COL_B 做一个简单的字典排序。在 MySQL 中，我会这样做：

```
ORDER BY IF(COL_A IN ('val1', 'val2', 'val3'), 0, 1), COL_B 
```

但这在 SQL Server 2008 中不起作用。有等效的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T04:31:51.700

在您尝试的查询中使用`case when`而不是 IF。

```
ORDER BY (Case When COL_A IN ('val1', 'val2', 'val3') Then 0 Else 1 End), COL_B 
```

把它代替你尝试过的查询。

**MSDN：**

[http://msdn.microsoft.com/en-IN/library/ms181765.aspx](http://msdn.microsoft.com/en-IN/library/ms181765.aspx)

**语法和示例：**

[http://blog.sqlauthority.com/2007/04/14/sql-server-case-statementexpression-examples-and-explanation/](http://blog.sqlauthority.com/2007/04/14/sql-server-case-statementexpression-examples-and-explanation/)

**教程可能有帮助：**

[http://www.tizag.com/sqlTutorial/sqlcase.php](http://www.tizag.com/sqlTutorial/sqlcase.php)

# wordpress - 在 localhost 中运行 wordpress

> ID：16160975
> 
> 赞同：0
> 
> 时间：2013-04-23T04:28:27.560
> 
> 标签：wordpress, localhost

当我在本地主机中运行 wordpress 文件夹时，（localhost/wordpress）我收到错误消息

> 警告：未知：无法打开流：第 0 行未知中的权限被拒绝
> 致命错误：未知：打开失败需要 'C:/xampp/htdocs/wordpress/index.php' (include_path='.;\xampp\php\PEAR ') 在第 0 行的未知中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T20:01:38.350

您是否安装了 Apache 或者您正在使用 EasyPHP 或 xampp 进行此安装？很可能是权限问题（文件夹上的 linux 中的 chmod 777 或在 Windows 中为 htdocs 或 www 文件夹读/写）

# google-apps-script - GmailApp.search/ 搜索多个单词的查询语法

> ID：16160983
> 
> 赞同：0
> 
> 时间：2013-04-23T04:29:11.483
> 
> 标签：google-apps-script

我正在尝试在 GmailApp 上使用搜索。文档说查询语法必须类似于我们在 gmail 收件箱中使用的语法。但是，行为似乎有所不同。我不太能够获得搜索多个单词的语法，例如，如果我搜索“vegas trip”，我会假设我应该得到所有包含“vegas trip”的邮件，或者如果没有，至少比里面有“vegas”和“trip”的。但是，我得到的似乎忽略了“vegas”，只对第二个关键字进行操作......是否有任何关于语法的正式文档以及支持什么/如何支持？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T06:13:09.450

我通常参考这个文档来为 Apps 脚本和 Gmail 搜索框构建 Gmail 搜索查询。根据文档，它运行良好。

[http://support.google.com/mail/answer/7190?hl=en](http://support.google.com/mail/answer/7190?hl=en)

# android - 如何检测编辑文本中的特殊字符并显示 Toast 作为响应（Android）？

> ID：16160989
> 
> 赞同：6
> 
> 时间：2013-04-23T04:29:38.380
> 
> 标签：android, android-edittext, contains

为我糟糕的英语道歉，我正在使用谷歌翻译。

我正在创建一个用户必须在其中创建新配置文件的活动。我限制编辑 15 个字符的文本，如果新的配置文件名称包含空格或特殊字符，我希望显示警告。作为在线视频游戏

以下代码可帮助我检测空格，但不能检测特殊字符。

我需要帮助来识别特殊字符并显示警告作为响应。

```
@Override
public void onClick(View v) {
    //Convertimos el contenido en la caja de texto en un String
    String nombre = nombreUsuario.getText().toString();

    //Si el tamaño del String es igual a 0, que es es lo mismo que dijeramos "Si esta vacio"
    if (nombre.length() == 0) {
        //Creamos el aviso
        Toast aviso = Toast.makeText(getApplicationContext(), "Por favor introduce un nombre de Usuario", Toast.LENGTH_LONG);
        aviso.show();

    } else if (nombre.contains(" ") | nombre.contains("\\W")) {
        Toast aviso = Toast.makeText(getApplicationContext(), "No son permitidos los espacios ni los caracteres especiales", Toast.LENGTH_LONG);
        aviso.show();
    } else {
        nombre = nombreUsuario.getText().toString();
        //Conectamos con la base de datos
        //Creamos un bojeto y lo iniciamos con new
        Plantilla entrada = new Plantilla(CrearUsuarioActivity.this);
        entrada.abrir();

        //creamos un metodo para escribir en la base de datos (crear entradas)
        entrada.crearEntrada(nombre);
        entrada.cerrar();
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-23T04:58:59.403

您可以使用：

```
string.matches("[a-zA-Z.? ]*") 
```

**如果字符串中的每个字符都是小写字母 az、大写字母 AZ、句点、问号或空格，则计算结果为 true。**

喜欢：

```
public void Click(View v) {
        if (v.getId() == R.id.button1) {
            String nombre = textMessage.getText().toString();
            if (nombre.length() == 0) {

                // Creamos el aviso
                Toast aviso = Toast.makeText(getApplicationContext(),
                        "Por favor introduce un nombre de Usuario",
                        Toast.LENGTH_LONG);
                aviso.show();

            } else if (!nombre.matches("[a-zA-Z.? ]*")) {
                Toast aviso = Toast
                        .makeText(
                                getApplicationContext(),
                                "No son permitidos los espacios ni los caracteres especiales",
                                Toast.LENGTH_LONG);
                aviso.show();

            } else {

                // Do what ever you want
            }

        }
    } 
```

## 允许 az、AZ、0-9 使用`"[a-zA-Z0-9.? ]*"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-04T11:34:45.767

在 xml 文件的 edittext 中使用以下行，以便它只输入字母和数字；

```
 android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789" 
```

如果您需要动态响应，请使用 textwatcher 作为您的编辑文本；

```
 yourEditText.addTextChangedListener(new TextWatcher() {

      public void afterTextChanged(Editable s) {

       // Here you need to check special character, if found then show error message

      if (s.toString().contains("%"))
      {
           // Display error message
      }

      public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

      public void onTextChanged(CharSequence s, int start, int before, int count) {}
   }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-28T14:11:56.103

如果您想获取特殊字符并支持的不仅仅是非常严格的英文字母投注和数字集：

```
String edit_text_name = YourEditTextName.getText().toString();

Pattern regex = Pattern.compile("[$&+,:;=\\\\?@#|/'<>.^*()%!-]");

if (regex.matcher(edit_text_name).find()) {
        Log.d(TAG, "SPECIAL CHARS FOUND");
        //handle your action here toast message/ snackbar or something else
        return;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T05:06:51.147

你应该选择[Android Saripaar](https://github.com/ragunathjawahar/android-saripaar)，这是一个非常轻量级和简单的 Android API。在您的情况下，您可以在 EditText 实例上执行以下操作...

```
@TextRule(order = 1, minLength = 15, message = "Enter atleast 15 characters.")
@Regex(order = 2, pattern = "[\\W+]", message = "Special characters are not allowed.")
private TextView yourEditText; 
```

使用此 api 将引导您以正确的方式对您的验证过程进行更多控制。您也可以使用`[^a-zA-Z0-9]`代替`[\\W+]`作为您的调节器表达式模式。

希望这可以帮助..：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-19T15:30:23.237

由于我无法对其他帖子发表评论，因此我将补充投票最多的答案，并提供更时尚视觉分辨率的提示。

首先，将 Edittext (etNombre) 数据传递给 String 变量。前任：`String nombre = etNombre.getText().toString();`

然后，使用 if 来验证：

```
if (!nombre.matches("[a-zA-Z.? ]*")) {

    etNombre.setError("Your message here");

} 
```

此解决方案将设置一个“！” Edittext 上的图标，它比 Toast 好得多，因为消息将用户指向错误。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-31T18:21:51.100

利用：

```
public void click (View view) {

    if (edittext.matcher(abcd).find ()) {
       Toast.maketext(this, "abcd Found", TOAST.LENGTH_LONG).show ();
    }

} 
```

# php - 防止部分数据库操作

> ID：16160991
> 
> 赞同：1
> 
> 时间：2013-04-23T04:29:49.037
> 
> 标签：php, mysql, database, database-design, mysqli

我在 PHP 中创建了一些函数，它们执行一些或其他数据库操作，如插入、删除、更新等，并且每次我想做一些操作时都会调用这些函数。

现在，可以说，我需要执行以下操作：

*   调用执行数据库操作的函数 1，然后等待返回消息
*   调用执行另一个数据库操作的函数 2，然后等待返回消息
*   调用执行其他数据库操作的函数 3，等待返回消息

如果 DB 操作在 function1 和 function2 中成功执行，但在 function3 中没有执行，则完整的操作是失败的，因为所有三个函数都必须成功。在这种情况下，我想回滚 function1 和 function2 所做的更改，因为操作不成功。

我想过将查询堆叠在一起并一次执行它们，但问题是我不知道何时必须执行查询堆栈。

例如。

```
if I call $obj->deletethread();
it calls $obj->deletemsg(); and $obj->deleteattachments(); and $obj->deletetags(); gets called 
```

但这可能并非一直如此，即

```
if I call $obj->deletemsg();
$obj->deleteattachments(); and $obj->deletetags(); gets called 
```

我想说的是这些函数可以由任何其他函数以任何顺序调用。有什么办法可以做到这一点？

**为什么我需要这个：**如果数据库操作在任何时候都不成功，部分数据会插入到数据库操作成功的表中，这是我不想要的，因为它会导致不正确的记录。

# python - 使用书中给出的文档字符串示例用法时出错

> ID：16160992
> 
> 赞同：0
> 
> 时间：2013-04-23T04:30:06.387
> 
> 标签：python

我正在通过书中给出的示例学习 python 这里是我在终端上输入的示例

```
user@ubuntu:~$ python
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> def square(x):
...     'Calculates the square of the number x'
...      return x*x 
```

按下回车后，上面的代码会出现以下错误

```
 File "<stdin>", line 3
    return x*x
    ^
IndentationError: unexpected indent 
```

我已经在终端上输入了这个我不确定还需要缩进什么，基本上书中给出的示例涉及在 python 中使用 doc 字符串，即解释函数的字符串，如果上面的方法可行的话我的下一步是验证是否可以按照书中给出的方式访问文档字符串

```
>>> square.__doc__
'Calculates the square of the number x.' 
```

或验证交互式解释器上帮助功能的使用

```
>>> help(square)
Help on function square in module __main__: 
```

我在交互式解释器（终端）中练习这个，让我知道我上面犯的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:37:19.050

`return`您在语句之前有一个额外的空间。

# git - 移动包含子模块的 git 工作副本

> ID：16160993
> 
> 赞同：8
> 
> 时间：2013-04-23T04:30:07.167
> 
> 标签：git, git-submodules

Git 最近的一次更改改变了`.git`使用子模块时处理目录的方式。现在不是`.git`每个子模块都有一个，而是所有内容都位于“根级”`.git`目录中（对应于包括子模块的工作副本的目录）。

然后，在每个子模块中，创建一个指向目录新位置的`.git`文件。

在[我的项目](https://github.com/roboptim/roboptim-core)中，我有以下`.gitmodules`文件：

```
[submodule "tests/shared-tests"]
        path = tests/shared-tests
        url = git://github.com/roboptim/roboptim-shared-tests.git
[submodule "cmake"]
        path = cmake
        url = git://github.com/jrl-umi3218/jrl-cmakemodules.git 
```

当我这样做时`git clone --recursive`，我会获得：

```
$ cat cmake/.git
gitdir: /home/moulard/profiles/default-x86_64-linux-ubuntu-12.04.1/src/unstable/roboptim/roboptim-core/.git/modules/cmake 
```

我目前正在使用 Git 1.8.1.5。

我的问题是：

1.  为什么这种行为会改变？我认为这种新策略没有任何明显的好处。
2.  我怎样才能安全地移动工作副本？（如果我移动我的工作副本，我会收到一条错误消息，告诉我损坏的 gitdir 的路径不再是 Git 存储库）

请注意，这与上一个问题[移动包含子模块的 git 存储库的父目录不同，](https://stackoverflow.com/questions/13252529/moving-the-parent-directory-of-a-git-repository-that-contains-submodules)因为我*确信*这不是与我的`.gitmodules`文件中存在绝对路径相关的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T05:53:43.763

该`.git/module`组织可以追溯到[git1.7.8（2011 年 12 月 2 日）](https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.8.txt#L109-L114)：

> `git submodule init`当使用“ ”填充新的子模块目录时，子模块的元信息目录在超级项目的目录中`$GIT_DIR`创建`$GIT_DIR/modules/<name>/`并通过 gitfile 机制引用。
> **这是为了可以在不重新克隆的情况下在树中具有和不具有子模块的超级项目中的提交之间进行切换**。

但是，最近的错误修复已包含在[1.8.2.1](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.1.txt#L51-L52)和[1.8.3](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.3.txt#L408-L409)（2013 年 4 月 22 日）中：

> “git submodule update”，当递归到子子模块时，没有累积前缀路径。

所以升级到最新的 git 版本可以解决这个问题。

* * *

[在这里， OP Thomas Moulard](https://stackoverflow.com/users/1442517/thomas-moulard)在[评论](https://stackoverflow.com/questions/16160993/moving-a-git-working-copy-containing-submodules/16161950?noredirect=1#comment23103265_16161950)中提到了一种可能的解决方案（使用最新的 git 1.8.3，2013 年 4 月 22 日）：

> `$ git submodule deinit -f .`正在工作中！
> 然后我可以跑步`git submodule init`，路径得到修复

如果（反）初始化步骤 ( `.git/modules`)

它不处理在文件`add`中记录子模块 url 的 ' ' 步骤`.gitmodules`：您仍然需要在该文件中手动删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T14:30:48.423

在将工作副本移至其他地方后，我成功地修复了我的工作副本，执行以下操作：

*   更新文件中的`gitdir:`路径`superproject/path/to/submodule/.git`
*   更新文件中的`worktree=`路径`superproject/.git/modules/path/to/submodule/config`

我不知道为什么 git 在那里使用绝对路径！

（在 git 2.0.1.563 上测试）

# javascript - 由于错误 800a025e 无法完成操作

> ID：16160996
> 
> 赞同：9
> 
> 时间：2013-04-23T04:30:32.997
> 
> 标签：javascript, internet-explorer, internet-explorer-10, internet-explorer-11, rangy

这个错误在 IE10/11 中是什么意思：

```
Error: Could not complete the operation due to error 800a025e. 
```

我将如何调试它？

它说它的这一行：

```
this.nativeSelection.removeAllRanges(); 
```

[https://code.google.com/p/rangy/source/browse/trunk/src/js/core/wrappedselection.js#416](https://code.google.com/p/rangy/source/browse/trunk/src/js/core/wrappedselection.js#416)

在这里查看它的实际效果：http: [//panmedia.github.io/raptor-editor/tests/cases/selection/selection-expand.html](http://panmedia.github.io/raptor-editor/tests/cases/selection/selection-expand.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-22T10:43:58.187

我最近出现了这个错误，我用以下检查修复了它：

```
var sel = window.document.getSelection();
if (sel.rangeCount > 0 && sel.getRangeAt(0).getClientRects().length > 0) {
    sel.removeAllRanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T05:43:57.867

尝试时出现此错误`window.getSelection().removeAllRanges();`并且没有选择。一种解决方法是先检查是否有选择：

```
if (window.getSelection().getRangeAt(0).getClientRects().length > 0) {
    window.getSelection().removeAllRanges();
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-06-09T19:30:45.557

所有错误 80020101 意味着在评估 JavaScript 时出现了某种错误。如果您通过 Ajax 加载该 JavaScript，则评估过程特别严格。

[由于错误 80020101 无法完成操作。IE](https://stackoverflow.com/questions/10903989/could-not-complete-the-operation-due-to-error-80020101-ie)

# java - 使用 webdriver selenium 处理子菜单项

> ID：16160997
> 
> 赞同：0
> 
> 时间：2013-04-23T04:30:38.840
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我想使用默认不可见的 selenium webdriver 单击子菜单项。它在 mousehover 上变得可见。我尝试了一些代码，它给出了如下所示的错误

`Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: Element is not currently visible and so may not be interacted with.`

这里的代码：

```
 Actions actions = new Actions(driver); 
    WebElement menuHoverLink = driver.findElement(By.linkText("RENT")); 
    //WebElement menuHoverLink = driver.findElement(By.className("current")); 
    actions.moveToElement(menuHoverLink); 
    WebElement subLink = driver.findElement(By.cssSelector("a[href='nemc.com/rentals/easy-rent']")); 
    actions.moveToElement(subLink); 
    actions.click(); 
    actions.perform(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:05:33.573

使用[Actions](https://code.google.com/p/selenium/wiki/AdvancedUserInteractions)类将鼠标悬停在您的菜单项上，然后单击子菜单选项。您可以参考 Actions 类来获得可用方法的概述，并在[此处](https://code.google.com/p/selenium/wiki/AdvancedUserInteractions)帮助您了解如何使用这些交互。

```
Actions actions = new Actions(driver); WebElement menuHoverLink = driver.findElement(By.linkText("RENT"));
actions.moveToElement(menuHoverLink).perform();
driver.findElement(By.cssSelector("a[href='nemc.com/rentals/easy-rent']")).click(); 
```

我希望你的 locatros 是正确的..你可能想使用 a[contains(@href,'nemc.com/rentals')'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T12:52:58.397

我最近偶然发现了一个类似的问题，使用[phantomJS](http://phantomjs.org/)和[ghostdriver](https://github.com/detro/ghostdriver)。就我而言，问题在于窗口大小 - HTML 元素位于可见区域之外，并且我的鼠标移动没有任何效果（默认大小为 400x300，相当小）。

您可以检查窗口大小

```
driver.manage().window().getSize() 
```

你可以改变它

```
driver.manage().window().setSize(new Dimension(width, height)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:19:47.520

在某些应用程序中，`Action`交互可能不起作用。我个人遇到了这个问题，然后我使用了以下解决方案。我从硒问题跟踪器页面中获取了这个解决方案。

```
 WebElement targetElement = driver.findElement(By.id("locator"));  
 JavascriptExecutor js = (JavascriptExecutor) driver;  
 String mouseOverScript = "if(document.createEvent){var evObj = document.createEvent('MouseEvents');evObj.initEvent('mouseover', true, false); arguments[0].dispatchEvent(evObj);} else if(document.createEventObject) { arguments[0].fireEvent('onmouseover');}";  
 js.executeScript(mouseOverScript, targetElement);  
 driver.findElement(By.id("Click locator")).click; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:16:25.523

尝试使用下面的代码。它应该可以工作。尝试将 perform() 添加到 moveToElement 语句，如下所示。

```
Actions actions = new Actions(driver);
WebElement menuHoverLink = driver.findElement(By.linkText("RENT"));

actions.moveToElement(menuHoverLink).perform();
WebElement subLink = driver.findElement(By.cssSelector("a[href='nemc.com/rentals/easy-rent']"));
sublink.click(); 
```

# python - 尝试使用 mod_wsgi 启动金字塔应用程序时没有名为 deploy 的模块

> ID：16160999
> 
> 赞同：4
> 
> 时间：2013-04-23T04:30:48.677
> 
> 标签：python, apache, mod-wsgi, pyramid, paster

第一次尝试在我的金字塔应用程序中使用 mod_wsgi，但是`ImportError: No module named deploy`当我尝试访问该站点时，我一直得到一个

在我的`/etc/apache2/sites-available/domain.com`

```
<VirtualHost *:80>  
    ServerName domain.com
    ServerAlias www.domain.com
    ServerAdmin admin@domain.com
    DocumentRoot /data/app
    ErrorLog /data/app/apache_error.log

    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    WSGIDaemonProcess pyramid user=www-data group=www-data \
        processes=2 threads=4 \
        python-path=/data/app/lib/python2.6/site-packages/
    WSGIScriptAlias / /data/app/pyramid.wsgi

    <Directory /data/app>
        WSGIProcessGroup pyramid
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

在`/data/app/pyramid.wsgi`

```
venv = '/data/app/bin/activate_this.py'
execfile(venv, dict(__file__=venv))

ALLDIRS = ['/data/app/lib/python2.6/site-packages']

import sys, site, os

site.addsitedir('/data/app/lib/python2.6/site-packages')

sys.path.append('/data/app/app')
os.environ['PYTHON_EGG_CACHE'] = '/data/app/python-eggs'

from pyramid.paster import get_app, setup_logging
ini_path = '/data/app/app/development.ini'
setup_logging(ini_path)
application = get_app(ini_path, 'main') 
```

当我尝试`domain.com`在浏览器中访问时，`The server encountered an internal error or misconfiguration and was unable to complete your request`出现错误。这是我的错误日志的打印结果

```
[Mon Apr 22 20:43:13 2013] [error] test
[Mon Apr 22 20:43:13 2013] [error] mod_wsgi (pid=6795): Target WSGI script '/data/app/pyramid.wsgi' cannot be loaded as Python module.
[Mon Apr 22 20:43:13 2013] [error] mod_wsgi (pid=6795): Exception occurred processing WSGI script '/data/app/pyramid.wsgi'.
[Mon Apr 22 20:43:13 2013] [error] Traceback (most recent call last):
[Mon Apr 22 20:43:13 2013] [error]   File "/data/app/pyramid.wsgi", line 30, in <module>
[Mon Apr 22 20:43:13 2013] [error]     from pyramid.paster import get_app, setup_logging
[Mon Apr 22 20:43:13 2013] [error]   File "/data/app/lib/python2.6/site-packages/pyramid-1.4-py2.6.egg/pyramid/paster.py", line 3, in <module>
[Mon Apr 22 20:43:13 2013] [error]     from paste.deploy import (
[Mon Apr 22 20:43:13 2013] [error] ImportError: No module named deploy 
```

请注意，`test`第一行的打印是我`print 'test'`在顶部手动添加的，`/data/app/lib/python2.6/site-packages/pyramid-1.4-py2.6.egg/pyramid/paster.py`以确保它是从我期望的文件中加载的...

现在如果我从 pserve 启动应用程序

```
$ /bin/pserve app/development.ini --reload 
```

应用启动成功，控制台日志如下

```
test
Starting subprocess with file monitor
test
Starting server in PID 9132.
serving on http://0.0.0.0:6543 
```

我也试过直接进入python导入paster.py，也没问题

```
$ cd /data/app/lib/python2.6/site-packages/pyramid-1.4-py2.6.egg/pyramid/
$ /data/app/bin/python
Python 2.6.5 (r265:79063, Oct  1 2012, 22:04:36)
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pyramid.paster as p
test
>>> print p.__file__
/data/app/lib/python2.6/site-packages/pyramid-1.4-py2.6.egg/pyramid/paster.pyc
>>> 
```

权限也应该没问题

```
$ ls /data/app -l
-rw-rw-r-- 1 root www-data 4148 2013-04-22 21:06 apache_error.log
drwxrwsr-x 4 root www-data 4096 2013-04-22 12:05 app
drwxrwsr-x 2 root www-data 4096 2013-04-22 12:04 bin
drwxrwsr-x 2 root www-data 4096 2013-04-22 11:58 include
drwxrwsr-x 3 root www-data 4096 2013-04-22 11:58 lib
-rwxrwxr-x 1 root www-data  893 2013-04-22 12:23 pyramid.wsgi
drwxrwsr-x 2 root www-data 4096 2013-04-22 12:07 python-eggs 
```

我错过了什么？谢谢！

***编辑*** `www-data`也是正确的用户

```
$ ps aux | grep apache2
root      2599  0.0  1.4 185200 14552 ?        Ss   10:00   0:02 /usr/sbin/apache2 -k start
www-data  9064  0.0  0.8 185664  8940 ?        Sl   21:06   0:00 /usr/sbin/apache2 -k start
www-data  9065  0.0  0.8 185664  8940 ?        Sl   21:06   0:00 /usr/sbin/apache2 -k start
www-data  9095  0.0  1.1 187292 11388 ?        S    21:06   0:00 /usr/sbin/apache2 -k start
www-data  9096  0.0  1.1 187292 11388 ?        S    21:06   0:00 /usr/sbin/apache2 -k start
www-data  9097  0.0  1.0 186768 10472 ?        S    21:06   0:00 /usr/sbin/apache2 -k start
www-data  9098  0.0  1.0 186768 10472 ?        S    21:06   0:00 /usr/sbin/apache2 -k start
www-data  9099  0.0  1.0 186768 10472 ?        S    21:06   0:00 /usr/sbin/apache2 -k start
root      9189  0.0  0.0   7624   912 pts/0    S+   21:42   0:00 grep apache2 
```

**根据格雷厄姆的建议进行**编辑**`print 'test'`，我用`paste.py`**

 **```
import paste as p
print p.__path__ 
```

通过 apache 访问站点时的打印输出是`/usr/local/lib/python2.6/dist-packages/paste`，而不是 virtualenv。我已经添加了所有我可以在线很好地指向我的 virtualenv`pyramid.wsgi`以及`pythonpath`apache 配置文件中的示例，但显然我仍然没有做对。我还能在哪里尝试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T12:58:36.727

终于解决了。从控制台日志很明显，我的主要 python 安装安装了`/usr/local/lib`一个未定义处理程序的`paste`模块`deploy`。

RedBaron 的评论设置`WSGIPythonHome`有效，但问题是我有多个应用程序，所以我不能只`WSGIPythonHome`全局指向特定应用程序的 virtualenv。

无论如何，我再次浏览`mod_wsgi`了 virtualenv 上的文档（[https://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Baseline_Environment](https://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Baseline_Environment)）并看到它`WSGIPythonHome`应该指向“处女环境”。字面上地

```
$ virtualenv --no-site-packages BASELINE 
```

然后指向`WSGIPythonHome`

```
WSGIPythonHome /usr/local/pythonenv/BASELINE 
```

并指向`WSGIDaemonProcess`我的应用程序的特定 virtualenv（我在一开始就已经这样做了）

**教训：**多注意文档...

* * *

最后，我的`pyramid.wsgi`可以大大简化为只有以下

```
import os
os.environ['PYTHON_EGG_CACHE'] = '/data/app/python-eggs'

from pyramid.paster import get_app, setup_logging
ini_path = '/data/app/app/development.ini'
setup_logging(ini_path)
application = get_app(ini_path, 'main') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T12:08:59.003

在我的情况下，在虚拟环境中重新安装 PasteDeploy 解决了这个问题，但不知道为什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T04:47:45.937

该错误表明没有安装 PasteDeploy 包。

*   [https://pypi.python.org/pypi/PasteDeploy](https://pypi.python.org/pypi/PasteDeploy)**