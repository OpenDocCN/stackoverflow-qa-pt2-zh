# StackOverflow 问答 13517000-13517999

# tsql - 使用连接的外键合并行

> ID：13517003
> 
> 赞同：0
> 
> 时间：2012-11-22T16:44:51.270
> 
> 标签：tsql, sql-server-2005, merge, foreign-keys

我在 SQL Server 2005 数据库中有一个表，它与其他表有很多连接。每隔一段时间，基表就会出现重复条目​​，我们编写了一个存储过程，它从所有连接的表中移动数据，然后删除重复的条目。

问题是，随着项目不断增长，连接表的数量开始变得难以管理，有时开发人员忘记更新存储过程，然后合并过程就会失败。

TSQL 中是否有更平滑的合并功能？我在想，因为所有表都与`foreign keys`需要更新/插入的表连接，很可能仅通过读取表连接来计算。

表结构看起来像这样：

```
Main table
------------------------
mainid (PK) | datacolumns...

Sub table 1:
------------------------
subid1 (PK) | mainid (FK) | datacolumns...

Sub table 2:
------------------------
subid2 (PK) | mainid (FK) | datacolumns...

Sub table 3:
------------------------
subid3 (PK) | datacolumns...

Connection table between "Main table" and "Sub table 3":
------------------------
mainid (FK) | subid3 (FK) 
```

现在我有两行，`Main table`其中可能有也可能没有`Sub table 1`和中的子条目`Connection table`。

`Sub table 1`应始终使用新的`mainid`. `Sub table 2`并且具有唯一的键限制，因此只有在条目尚不存在`Connection table`时才应使用新的来更新它们。`mainid`

这是一个严重的过度简化，因为我们正在谈论 20 多个表（并且还在增长），每个表对使条目唯一的原因都有自己的限制，并且如果它们不能存在于表中，则应该/不应该复制数据到唯一键。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:00:46.170

If I understood you correctly a `ON DELETE CASCADE` for necessary foreign keys will solve your problem. This way deleting an entry from the "main" table will delete entries from other tables connected through FK.

# javascript - 多文件主干.js 应用程序似乎不起作用

> ID：13517006
> 
> 赞同：1
> 
> 时间：2012-11-22T16:45:04.377
> 
> 标签：javascript, jquery, backbone.js

我在 .js 文件中有一个视图，除了 'index.html' 文件，它看起来像这样：

```
window.App = Backbone.View.extend({
        el: $('#article'),

        initialize: function() {
            _.bindAll(this, 'render');
            console.log('binding');
            console.log($('#article'));
            this.render();
        },

        render: function() {
            console.log('rendering');
            this.$el.html("rendered");
            return this;
        }
    }); 
```

我正在使用 JQuery 的就绪函数在“index.html”中分配这个视图：

```
<div id="article">
</div>

<script type="text/javascript">
    $(function(){
        console.log($('#article'));
        new window.App();
    });
</script> 
```

正如您可能猜到的那样，“渲染”不会出现在 DOM 上。问题是，当我将所有内容打包在一起（标签中的视图和分配）时，它可以工作。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:07:40.207

我认为你的问题是：

```
window.App = Backbone.View.extend({
    el: $('#article'), 
```

发生在此 HTML 之前：

```
<div id="article">
</div> 
```

被浏览器看到。这将`$('#article')`留空，您的`render`方法将无法访问 DOM 中的任何内容。打开你的控制台并运行这个演示，你会看到你所看到的：http: [//jsfiddle.net/ambiguous/7sGcZ/](http://jsfiddle.net/ambiguous/7sGcZ/)

最简单的解决方案是将选择器用作`el`：

```
window.App = Backbone.View.extend({
    el: '#article', 
```

让 Backbone 自己把它变成一个 DOM 元素。这样，`$('#article')`当 Backbone 需要创建视图的[`$el`](http://backbonejs.org/#View-%24el).

演示（有效）：http: [//jsfiddle.net/ambiguous/Vd6jP/](http://jsfiddle.net/ambiguous/Vd6jP/)

# r - 为 S4 引用类的实例定义默认字段值

> ID：13517007
> 
> 赞同：5
> 
> 时间：2012-11-22T16:45:08.423
> 
> 标签：r, prototype, default, s4, reference-class

如何定义**S4 引用类**实例的字段默认值？

对于常规 S4 课程，有以下`prototype`论点：

```
setClass("Test_1",
    representation(
        x.1="numeric", 
        x.2="logical", 
        x.3="matrix"
    ),
    prototype=list(
        x.1=10, 
        x.2=FALSE,
        x.3=matrix(0,0,0)
    )
)

> new("Test_1")
An object of class "Test_1"
Slot "x.1":
[1] 10

Slot "x.2":
[1] FALSE

Slot "x.3":
<0 x 0 matrix> 
```

据我了解的帮助页面，这也应该适用于通过参数`setRefClass`的 S4 参考类。`...`相应的部分说：

> > ...要传递给 setClass 的其他参数。

然而`prototype`似乎没有`setClass`正确发送到：

```
gen <- setRefClass("Test_2",
    fields=list(
        x.1="numeric", 
        x.2="logical", 
        x.3="matrix"
    ),
    prototype=list(
        x.1=10, 
        x.2=FALSE,
        x.3=matrix(0,0,0)
    )
)

> gen$new()
Reference class object of class "Test_2"
Field "x.1":
numeric(0)
Field "x.2":
logical(0)
Field "x.3":
<0 x 0 matrix> 
```

或者

```
> new("Test_2")
Reference class object of class "Test_2"
Field "x.1":
numeric(0)
Field "x.2":
logical(0)
Field "x.3":
<0 x 0 matrix> 
```

我没有在`setRefClass`.

这是一个错误还是我在这里遗漏了一些明显的东西？

* * *

## 编辑

我能找到的最接近的可以帮助我声明默认值的是`$initFields()`.

这就是`?setRefClass`不得不说的：

> > 从提供的参数初始化对象的字段。此方法通常仅从具有 $initialize() 方法的类调用。它对应于引用类的默认初始化。如果有插槽和非引用超类，这些也可以在 ... 参数中提供。
> > 
> > 通常，一个专门的 $initialize() 方法执行它自己的计算，然后调用 $initFields() 来执行标准初始化，如下面示例中的 matrixViewer 类所示。

到现在为止还挺好

```
gen <- setRefClass("Test_3",
    fields=list(
        x.1="numeric", 
        x.2="logical", 
        x.3="matrix"
    ),
    methods=list(
        initialize=function(
            ...
        ) {
            .self$initFields(x.1=10, x.2=TRUE, x.3=matrix(0,0,0), ...)
        }
    )
) 
```

适用于“默认初始化案例”：

```
> gen$new()
Reference class object of class "Test_3"
Field "x.1":
[1] 10
Field "x.2":
[1] TRUE
Field "x.3":
<0 x 0 matrix> 
```

但是，如果无法处理在初始化时明确指定（某些）字段值的情况：

```
> gen$new(x.1=100)
Reference class object of class "Test_3"
Field "x.1":
[1] 10
Field "x.2":
[1] TRUE
Field "x.3":
<0 x 0 matrix> 
```

## 解决方法

真的很脏，但它的工作原理

```
gen <- setRefClass("Test_4",
    fields=list(
        x.1="numeric", 
        x.2="logical", 
        x.3="matrix"
    ),
    methods=list(
        initialize=function(
            ...
        ) {
            defaults <- list(
                x.1=10,
                x.2=FALSE,
                x.3=matrix(0,0,0)
            )
            if (!missing(...)) {
                x.args      <- list(...)             
                specified   <- names(x.args)
                idx <- which(specified %in% names(defaults))
                if (length(idx)) {
                    for (ii in specified[idx]) {
                        defaults[[ii]] <- x.args[[ii]]
                    }
                }
            }    
            .self$initFields(x.1=defaults$x.1, x.2=defaults$x.2, 
                x.3=defaults$x.3, ...)
        }
    )
) 
```

初始化

```
> gen$new()
Reference class object of class "Test_4"
Field "x.1":
[1] 10
Field "x.2":
[1] FALSE
Field "x.3":
<0 x 0 matrix>

> gen$new(x.1=100)
Reference class object of class "Test_4"
Field "x.1":
[1] 100
Field "x.2":
[1] FALSE
Field "x.3":
<0 x 0 matrix>
> gen$new(x.1=100) 
```

这就是我正在寻找的东西，但我确定还有更多“内置”的东西？

* * *

## 编辑 2

整个事情有点通用。方法`ensureDefaultValues`可以是每个其他类继承自的类的方法。对于“继承路径更远”的类，可以简单地在方法内调用此`intialize`方法：

```
gen <- setRefClass("RootClass",
    methods=list(
        ensureDefaultValues=function(values, ...) {
            if (!missing(...)) {
                arguments   <- list(...)             
                specified   <- names(arguments)
                idx <- which(specified %in% names(values))
                if (length(idx)) {
                    for (ii in specified[idx]) {
                        values[[ii]] <- arguments[[ii]]
                    }
                }
            }    
            temp <- paste(paste0(names(values), "=values$", 
                names(values)), collapse=", ")
            eval(parse(text=paste0(".self$initFields(", temp, ", ...)")))
            return(TRUE)            
        }
    )
)

gen <- setRefClass("Test_5",
    contains="RootClass",
    fields=list(
        x.1="numeric", 
        x.2="logical", 
        x.3="matrix"
    ),
    methods=list(
        initialize=function(
            ...
        ) {
            .self$ensureDefaultValues(
                values=list(
                    x.1=10,
                    x.2=FALSE,
                    x.3=matrix(0,0,0)
                ),
                ...
            )
            return(.self)
        }
    )
)
> gen$new()
Reference class object of class "Test_5"
Field "x.1":
[1] 10
Field "x.2":
[1] FALSE
Field "x.3":
<0 x 0 matrix>

> gen$new(x.1=100)
Reference class object of class "Test_5"
Field "x.1":
[1] 100
Field "x.2":
[1] FALSE
Field "x.3":
<0 x 0 matrix> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T19:12:43.927

我不认为原型的概念是为参考类实现的。一种简单的方法是在 的参数中提供默认值`initialize`，如

```
Test_1 <- setRefClass("Test_1",
    field = list(x.1="numeric", x.2="logical", x.3="matrix"),
    method = list(initialize =
      function(..., x.1 = 10, x.2 = FALSE, x.3 = matrix(0, 0, 0))
    {
        callSuper(..., x.1 = x.1, x.2 = x.2, x.3 = x.3)
    })
) 
```

然后可以调用生成器函数（使用 R-devel 中可用的语法）返回

```
> Test_1()
Reference class object of class "Test_1"
Field "x.1":
[1] 10
Field "x.2":
[1] FALSE
Field "x.3":
<0 x 0 matrix> 
```

# php - 从网络服务器脚本 (PHP)、Cronjob 发送登录和表单信息？

> ID：13517008
> 
> 赞同：-1
> 
> 时间：2012-11-22T16:45:17.847
> 
> 标签：php, cron, bots

我有朋友在大学预订房间，但只能在其他学生都预订的第二天午夜之后预订。他们不想熬夜预订，想知道是否可以编写脚本来发送登录用户详细信息，在网络服务器上加密，以及他们通常的日期和时间。预订信息只是一个标准的 HTML 表单与相关输入。此数据可以从列表中自动生成。

这可以从网络服务器上完成吗，还是他们必须使用自己的家用机器并在 00:01 刷新？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:26:06.527

> 我是中层 OO C++ 开发人员

那么这对你来说应该很简单。学习*一种*语言后，您应该能够通过阅读一些基本文档来学习其他类似的语言。[*这是*](http://www.php.net/manual/en/tutorial.php)[官方文档](http://www.php.net/manual/en/tutorial.php)[的基本教程。](http://www.php.net/manual/en/tutorial.php)*基本上只需停止担心内存分配和静态类型，阅读[PHP 如何处理类](http://php.net/manual/en/language.oop5.php)，然后像 jeroen 提到的那样[深入研究 cURL 。](http://www.php.net/manual/en/book.curl.php)*

 *老实说，你很幸运，在我什至有机会发表简短的评论之前，这并没有因为“不是一个真正的问题”而被关闭。StackOverflow 非常“面向代码”，最受关注的问题是人们发布他们实际尝试运行的代码以及错误和/或错误信息的描述。

您的问题虽然比大多数人写得更好，但仍然表现为“我什么都没尝试/写过，请有人用勺子喂我一些代码”。所以去尝试一些代码，如果你碰到一些你无法通过的东西，把它贴出来，我可能听起来不像一个b-hole。*

# android - 从 ListView 中删除项目并刷新它

> ID：13517009
> 
> 赞同：-2
> 
> 时间：2012-11-22T16:45:18.463
> 
> 标签：android, listview, view

我有一个简单的问题。我想从 ListView 中删除一个项目而不重新启动活动。这可能吗？

我试过：

```
 adapter.remove(adapter.getItem(currentPosition)); // line 188 
```

但出现以下错误：

```
11-22 17:59:36.520: E/AndroidRuntime(8124): FATAL EXCEPTION: main
11-22 17:59:36.520: E/AndroidRuntime(8124): java.lang.UnsupportedOperationException
11-22 17:59:36.520: E/AndroidRuntime(8124):     at java.util.AbstractList.remove(AbstractList.java:645)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at java.util.AbstractList$SimpleListIterator.remove(AbstractList.java:77)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at java.util.AbstractCollection.remove(AbstractCollection.java:230)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at android.widget.ArrayAdapter.remove(ArrayAdapter.java:248)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at host.activity.ACT_MessaggiRicevuti$3.onClick(ACT_MessaggiRicevuti.java:188)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at android.view.View.performClick(View.java:3110)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at android.view.View$PerformClick.run(View.java:11934)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at android.os.Handler.handleCallback(Handler.java:587)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at android.os.Looper.loop(Looper.java:132)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at android.app.ActivityThread.main(ActivityThread.java:4123)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at java.lang.reflect.Method.invokeNative(Native Method)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at java.lang.reflect.Method.invoke(Method.java:491)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
11-22 17:59:36.520: E/AndroidRuntime(8124):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:47:45.900

这取决于您使用的适配器。

如果您使用的是 ArrayAdapter，只需将其删除，然后通知 ListView。根据 listView 的设置方式，您可能需要做一些更激烈的事情，正如在[这个问题](https://stackoverflow.com/a/3200631/544198)中所解释的那样。

```
ListView listview; //Somehow you get a handle for it
ArrayList <Integer> list=new ArrayList<Integer>([0 6 1 2 3]);
ArrayAdapter <Integer> mAdapter=new ArrayAdapter<Integer>(this,list);
listview.setListAdapter(mAdapter);
mAdapter.remove(2); //Removes the number 2
madapter.notifyDataSetChanged(); 
```

如果您使用的是其他类型的适配器，则可能需要创建一个已修改的新适配器，并将其设置为上述列表视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:53:43.293

您可能正在使用数组适配器将项目设置为列表视图。如果您正在这样做，请使用`arrayadapterObject.remove(the item you need to remove)`并调用 `arrayadapterObject.notifyDAtaSetChanged()`以刷新与您的 arrayadapter 相关的项目

例如，您需要从列表视图中删除项目 0 并刷新列表视图然后只需`arrayadapterObject.remove(0)`在此调用旁边使用和`arrayadapterObject.notifyDAtaSetChanged()`

# jquery - 在 iframe 中打开新页面时，如何让 jQuery 颜色框调整大小？

> ID：13517014
> 
> 赞同：2
> 
> 时间：2012-11-22T16:45:45.093
> 
> 标签：jquery, iframe, jquery-plugins, resize, colorbox

我已经成功地将[jQuery colorbox 插件](http://www.jacklmoore.com/colorbox)实现到 Web 应用程序中。但我仍然有以下问题：在 iframe 中打开新页面时，我无法让 jQuery colorbox 调整大小？

**场景：**

1.  用户访问主页。
2.  用户点击一个链接（在同一个域上），jQuery colorbox 在一个大页面上打开一个 iframe。
3.  用户点击一个链接（在同一个域上），iframe 导航到一个较小的页面。

当 iframe 导航到较小的页面时，我需要调整颜色框的大小，但是如何调整？

**到目前为止我已经尝试过：**

我认为在`<head>`较小页面的部分中，我可以放置一些代码来调整颜色框的大小。代码在函数内部执行`$(document).ready()`。

*   `$.colorbox.resize();`
*   `$.fn.colorbox.resize();`
*   `$(".iframe").colorbox.resize();`

但所有这些都没有奏效。`$.colorbox.resize();`但是，如果我在 iframe 中完全加载页面后在 Firebug 控制台中传递命令，resize 函数将成功执行。

**很高兴知道：**

我知道有很多关于如何调整颜色框大小的问题，但我没有发现任何涉及 iframe 的问题可以解决我的问题。如果您需要任何额外的代码或屏幕截图来帮助解决我的问题，请问。

感谢您让我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:02:21.207

我终于修复了它，因为需要在父窗口中制作我自己的调整大小功能的 iframe。

```
window.customResize = function(){ 
    $(".iframe").colorbox.resize({width:"960px", height:"675px"});
}; 
```

这说明在 iframe 中我可以调用以下命令：

```
window.parent.customResize(); 
```

然后它就起作用了。

# perl - 改进我的 Perl 算法以合并 postscript show 命令

> ID：13517016
> 
> 赞同：2
> 
> 时间：2012-11-22T16:45:50.073
> 
> 标签：perl, matlab, postscript

Matlab R2007b 的后记输出是有问题的。我发现文本字符串在 postscript 输出 (simprintdiag)中被拆分为许多“ [moveto ”和“show”命令。](http://www.tailrecursive.org/postscript/operators.html#moveto)这会在排版为 PDF 时导致问题，因为有时可以将额外的空白插入标签中（因此您无法双击它们，并且在搜索中找不到！）。

为了避免这个问题，我编写了一个 Perl 脚本来将这些拆分的“显示”命令重新组合在一起，但是，它有一些问题，我需要一些帮助。

1.  像“(0) s”这样的显示命令没有正确重复，并出现在下一个块中。
2.  输入 postscript 文件始终由脚本修改，即使不需要更改。
3.  一开始有一个技巧可以绕过连续的显示命令。
4.  它不是很快，并且鉴于某些项目有超过 2000 个 postscript 文件，欢迎任何速度改进。

下面我的代码中的 DATA 有四个在 mt 和 s 命令中拆分文本字符串的示例。我已经在最后包含了最终输出应该是什么样的。该脚本使用了这样一个事实，即我们的文本是从左到右书写的，或者在后记中，带有移动的 X 线和固定的 Y 线。因此，可以得出结论，具有相同 Y 线的连续 mt 命令是相同的文本字符串。

感激地收到任何帮助。

谢谢 ：）

我的 Perl 脚本：

```
use strict;
use warnings;

my $debug=1;

#
## Slurp the input file into a variable
my $ps_in;
while(<DATA>) {
   $ps_in .= $_;     # Take a copy of input file
}

#
## HACK
## The main PS fix algorithm only works with show commands on a single
## line!  Fix the input contents now by joining all show commands that 
## occur over multiple lines.  Examples of this are:
##  272   63 mt 
## (main is an externally linked function of the ACC feature ru\
## nning every ) s
##  991   63 mt
## (100) s
my $buf;
my $no_show_split;
open(my $fh_ps, "<", \$ps_in );
while(<$fh_ps>) {
   if( /^(.*)\\$/ ) {   # Match on all lines ending with backslash \
      $buf .= $1;
   }
   else {
      if( $buf ) {
         $no_show_split .= $buf;
         undef($buf);
      }
      $no_show_split .= $_;
   }
}
close $fh_ps;

#
## Reopen our ps input, now the show splits have been removed
open($fh_ps,"<",\$no_show_split );

my $moveto_line = qr/^\s*\d+\s+(\d+)\s+(mt|moveto)/;  # Example '2831  738 mt'
my $show_line   = qr/^\((.+)\)\s+(s|show)/;           # Example '(chris) s'
my $ycrd;      # Y-axis cords
my $pstxt;     # Text to display
my $mtl;       # Moveto line
my $print_text;
my $fixes=0;
my $ps_condensed;

while(<$fh_ps>) {

    if( $print_text ) {
        $ps_condensed .= "$mtl\n";
        $ps_condensed .= "($pstxt) s\n";
        print "($pstxt) s\n====================\n" if $debug;
        undef($ycrd);
        undef($pstxt);
        $print_text=0;
        ++$fixes;
    }

    if( /$moveto_line/ ) {
        chomp;

        if( !$ycrd ) {
            $mtl=$_;       # Store this line for print later
            $ycrd=$1;      # Match on y-axis value
            redo;          # Redo this iteration so we can read the show line in
        }
        elsif( $1 == $ycrd ) {
            <$fh_ps> =~ /$show_line/;  # Read in the show line
            $pstxt .= $1;              # Built up string we want
            print " $mtl -->$1<--\n" if $debug;
        }
        else {
            $print_text=1; # Dropped out matching on y-cord so force a print
            redo;          # Need to redo this line again
        }
    }
    else {
        if( $pstxt ) {     # Print if we have something in buffer
            $print_text=1;
            redo;
        }
        $ps_condensed .= $_;
    }

} # End While Loop
close $fh_ps;

print $ps_condensed;

__DATA__
%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 60 FMSR

11214 11653 mt 
(0) s
4.5 w
156 0 2204 19229 2 MP stroke
156 0 2204 19084 2 MP stroke

%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

8913 14971 mt 
(Function) s
9405 14971 mt 
(-) s
9441 14971 mt 
(Call) s
9009 15127 mt 
(Generator) s
6 w

%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

4962 4747 mt 
(trigger) s
5322 4747 mt 
(_) s
5394 4747 mt 
(scheduler) s
5934 4747 mt 
(_) s
6006 4747 mt 
(100) s
6222 4747 mt 
(ms) s
6378 4747 mt 
(_) s
6450 4747 mt 
(task) s
6654 4747 mt 
(_) s
6726 4747 mt 
(06) s
6 w
gr

24 10 10 24 0 4 -10 24 -24 10 5806 11736 14 MP stroke
%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

5454 11947 mt 
(Chris_\
did_this_example_) s
5874 11947 mt 
(to_test) s
5946 11947 mt 
(_out) s
6 w 
```

最终的“浓缩”后记应该是什么样子：

```
%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 60 FMSR

11214 11653 mt 
(0) s
4.5 w
156 0 2204 19229 2 MP stroke
156 0 2204 19084 2 MP stroke

%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

8913 14971 mt 
(Function-Call) s
9009 15127 mt 
(Generator) s
6 w

%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

4962 4747 mt 
(trigger_scheduler_100ms_task_06) s
6 w
gr

24 10 10 24 0 4 -10 24 -24 10 5806 11736 14 MP stroke
%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

5454 11947 mt 
(Chris_did_this_example_to_test_out) s
6 w 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:34:23.447

我认为以下内容对您有用。

笔记：

*   用成语啜饮所有数据：`do { local $/; <DATA> }`;
*   使用单个正则表达式修复行尾的反斜杠

* * *

```
use strict;
use warnings;

my $data = do { local $/; <DATA> };
$data =~ s,\\\n,,g;

my $out = "";
my $s = "";    
my $y;

for my $line (split("\n", $data)) {
  if (defined($y) && $line =~ m/^\((.*)\)\s+s\s*$/) {
    $s .= $1;
    next;
  } elsif ($line =~ m/^(\d+)\s+(\d+)\s+mt\s*$/) {
    if (defined($y) && $y == $2) {
      next;
    } else {
      $y = $2;
    }
  } else {
    $y = undef;
  }
  if (length($s)) {
    $out .= "($s) s\n";
    $s = "";
  }
  $out .= "$line\n";
}

print $out; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:09:21.763

我没有看到一个通用的方法。但一系列特殊情况似乎有效。这里的弱点是添加越来越多的特殊情况并不是一个可以很好扩展的模型。但是，如果这是完整的问题列表，那么这应该可行。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;

my %regex_for = (
    a => qr{
        \( ( \w+ ) \)     \s s  \s+  # (Function) s
        \d+ \s+ \d+       \s mt \s+  # 9405 14971 mt
        \( ( [-_]|ms ) \) \s s  \s+  # (-) s
        \d+ \s+ \d+       \s mt \s+  # 9441 14971 mt
        \( ( \w+ ) \)     \s s  \s+  # (Call) s
    }xmsi,
    b => qr{
        \( ( \w+ ) \\ \s* ( \w+ ) \)  # (Chris_\
    }xms,    #  did_this_example_)
    c => qr{
        \( ( \w+ _ ) \) \s s  \s+  # (Chris_did_this_example_) s
        \d+ \s+ \d+     \s mt \s+  # 5874 11947 mt
        \( ( \w+ ) \)   \s s  \s+  # (to_test) s
    }xms,
    d => qr{
        \( ( \w+ ) \)   \s s  \s+  # (to_test) s
        \d+ \s+ \d+     \s mt \s+  # 5946 11947 mt
        \( ( _ \w+ ) \) \s s  \s+  # (_out) s
    }xms,
);

my $ps = do { local $/; <DATA> };

REGSUB:
{
    my $a = $ps =~ s{ $regex_for{a} }{($1$2$3) s\n}xmsg;
    my $b = $ps =~ s{ $regex_for{b} }{($1$2)}xmsg;
    my $c = $ps =~ s{ $regex_for{c} }{($1$2) s\n}xmsg;
    my $d = $ps =~ s{ $regex_for{d} }{($1$2) s\n}xmsg;

    redo REGSUB
        if $a || $b || $c || $d;
}

print $ps;

__DATA__
%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 60 FMSR

11214 11653 mt
(0) s
4.5 w
156 0 2204 19229 2 MP stroke
156 0 2204 19084 2 MP stroke

%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

8913 14971 mt
(Function) s
9405 14971 mt
(-) s
9441 14971 mt
(Call) s
9009 15127 mt
(Generator) s
6 w

%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

4962 4747 mt
(trigger) s
5322 4747 mt
(_) s
5394 4747 mt
(scheduler) s
5934 4747 mt
(_) s
6006 4747 mt
(100) s
6222 4747 mt
(ms) s
6378 4747 mt
(_) s
6450 4747 mt
(task) s
6654 4747 mt
(_) s
6726 4747 mt
(06) s
6 w
gr

24 10 10 24 0 4 -10 24 -24 10 5806 11736 14 MP stroke
%%IncludeResource: font Helvetica
/Helvetica /WindowsLatin1Encoding 120 FMSR

5454 11947 mt
(Chris_\
did_this_example_) s
5874 11947 mt
(to_test) s
5946 11947 mt
(_out) s
6 w 
```

# windows - 批处理文件删除文件和文件夹

> ID：13517017
> 
> 赞同：2
> 
> 时间：2012-11-22T16:45:51.543
> 
> 标签：windows, batch-file, command-line

我正在寻找一种方法来删除包含在具有特定名称的文件夹中的文件，然后再删除该文件夹。

我知道有 forfiles 命令行可用于删除文件，我只是不知道如何将文件夹名称放入路径中。该文件夹是根据创建日期命名的，我想删除 7 天前的文件夹。该文件夹的格式为 yyyymmdd。

基本上我需要

```
forfiles /P "C:\backups\[DATE 7 DAYS AGO IN yyyymmdd format]" /S /M *.BAK /C "cmd /c del @path" 
```

然后我想删除文件夹之后

```
forfiles /P "C:\backups\[DATE 7 DAYS AGO IN yyyymmdd format]" /S /C "cmd /c IF @isDir == TRUE rd @path" 
```

我如何为这些填写 [DATE 7 DAYS AGO ...]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:15:23.320

第一 - 为什么您尝试先删除文件，然后再删除 tolfer？如果你先删除文件夹，你会在更短的时间内做同样的事情......

第二 -**我认为**你不能在 Batch 中做到这一点，不是没有错误，你需要提取（知道）至少“X”年你需要用于你的目的的日历日，并且 Batch 没有任何提取该信息的方法，或者成为一个数学天才，知道如何获取过去几年的日历日期。

因此，您需要一种可以访问 Microsoft.Time 和数据库并进行比较的现实脚本语言。（Ruby、Python、Perl，所有你想要的都少了 Batch）

顺便说一句，存在一些由 RobVanDeerWoud 编写的用于“玩”事物的超高级算法 batfile 代码，例如使用此脚本您可以将“X”天添加到日期，看看是否可以修改以扣除天数：

（代码作者：ROBVANDERWOUD）

```
DATEADD.BAT:

@ECHO OFF
ECHO.

:: Check the Windows version
IF NOT "%OS%"=="Windows_NT" GOTO Syntax
SETLOCAL

:: Initialize variable
SET Error=0

:: Check the command line arguments
IF     "%~1"=="" GOTO Syntax
IF NOT "%~3"=="" GOTO Syntax
IF "%~2"=="" (
    FOR %%A IN (%Date%) DO SET cDate=%%A
    SET cDays=%~1
) ELSE (
    SET cDate=%~1
    SET cDays=%~2
)

:: Read the Date format from the registry
CALL :ReadDateFormat

:: Check if a valid date was specified
(ECHO.%cDate%) | FINDSTR /R /B /C:"[0-9]*\%sDate%[0-9]*\%sDate%[0-9]*" >NUL
IF ERRORLEVEL 1 (
    ECHO Error: %cDate% is not a valid date
    ECHO.
    GOTO Syntax
)

:: Check if the second argument is a valid number
(ECHO.%cDays%) | FINDSTR /R /B /C:"-*[0-9]*" >NUL
IF ERRORLEVEL 1 (
    ECHO Error: %cDays% is not an integer
    ECHO.
    GOTO Syntax
)

:: Parse the date specified
CALL :ParseDate %cDate%

:: Check for errors
IF %Error% NEQ 0 GOTO Syntax

:: Convert the parsed Gregorian date to Julian
CALL :JDate %GYear% %GMonth% %GDay%

:: Display original input
ECHO Starting date   : %cDate%

:: Add or subtract the specified number of days
IF "%cDays:~0,1%"=="-" (
    SET /A NewJDate = %JDate% - %cDays:~1%
    ECHO Days subtracted : %cDays:~1%
) ELSE (
    SET /A NewJDate = %JDate% + %cDays%
    ECHO Days added      : %cDays%
)

:: Convert the new Julian date back to Gregorian again
CALL :GDate %NewJDate%

:: Reformat the date to local format
CALL :ReformatDate %GDate%

:: Display the result
ECHO Resulting date  : %LDate%

:: Return the result in a variable named after this batch file
ENDLOCAL & SET %~n0=%LDate%
GOTO:EOF

::===================================::
::                                   ::
::   -   S u b r o u t i n e s   -   ::
::                                   ::
::===================================::

:GDate
:: Convert Julian date back to "normal" Gregorian date
:: Argument : Julian date
:: Returns  : YYYY MM DD
::
:: Algorithm based on Fliegel-Van Flandern
:: algorithm from the Astronomical Almanac,
:: provided by Doctor Fenton on the Math Forum
:: (http://mathforum.org/library/drmath/view/51907.html),
:: and converted to batch code by Ron Bakowski.
::
SET /A P      = %1 + 68569
SET /A Q      = 4 * %P% / 146097
SET /A R      = %P% - ( 146097 * %Q% +3 ) / 4
SET /A S      = 4000 * ( %R% + 1 ) / 1461001
SET /A T      = %R% - 1461 * %S% / 4 + 31
SET /A U      = 80 * %T% / 2447
SET /A V      = %U% / 11
SET /A GYear  = 100 * ( %Q% - 49 ) + %S% + %V%
SET /A GMonth = %U% + 2 - 12 * %V%
SET /A GDay   = %T% - 2447 * %U% / 80
:: Clean up the mess
FOR %%A IN (P Q R S T U V) DO SET %%A=
:: Add leading zeroes
IF 1%GMonth% LSS 20 SET GMonth=0%GMonth%
IF 1%GDay%   LSS 20 SET GDay=0%GDay%
:: Return value
SET GDate=%GYear% %GMonth% %GDay%
GOTO:EOF

:JDate
:: Convert date to Julian
:: Arguments : YYYY MM DD
:: Returns   : Julian date
::
:: First strip leading zeroes
SET MM=%2
SET DD=%3
IF %MM:~0,1% EQU 0 SET MM=%MM:~1%
IF %DD:~0,1% EQU 0 SET DD=%DD:~1%
::
:: Algorithm based on Fliegel-Van Flandern
:: algorithm from the Astronomical Almanac,
:: provided by Doctor Fenton on the Math Forum
:: (http://mathforum.org/library/drmath/view/51907.html),
:: and converted to batch code by Ron Bakowski.
SET /A Month1 = ( %MM% - 14 ) / 12
SET /A Year1  = %1 + 4800
SET /A JDate  = 1461 * ( %Year1% + %Month1% ) / 4 + 367 * ( %MM% - 2 -12 * %Month1% ) / 12 - ( 3 * ( ( %Year1% + %Month1% + 100 ) / 100 ) ) / 4 + %DD% - 32075
FOR %%A IN (Month1 Year1) DO SET %%A=
GOTO:EOF 

:ParseDate
:: Parse (Gregorian) date depending on registry's date format settings
:: Argument : Gregorian date in local date format,
:: Requires : sDate (local date separator), iDate (local date format number)
:: Returns  : GYear (4-digit year), GMonth (2-digit month), GDay (2-digit day)
::
IF %iDate%==0 FOR /F "TOKENS=1-3 DELIMS=%sDate%" %%A IN ('ECHO.%1') DO (
    SET GYear=%%C
    SET GMonth=%%A
    SET GDay=%%B
)
IF %iDate%==1 FOR /F "TOKENS=1-3 DELIMS=%sDate%" %%A IN ('ECHO.%1') DO (
    SET GYear=%%C
    SET GMonth=%%B
    SET GDay=%%A
)
IF %iDate%==2 FOR /F "TOKENS=1-3 DELIMS=%sDate%" %%A IN ('ECHO.%1') DO (
    SET GYear=%%A
    SET GMonth=%%B
    SET GDay=%%C
)
IF %GDay%   GTR 31 SET Error=1
IF %GMonth% GTR 12 SET Error=1
GOTO:EOF

:ReadDateFormat
:: Read the Date format from the registry.
:: Arguments : none
:: Returns   : sDate (separator), iDate (date format number)
::
:: First, export registry settings to a temporary file:
START /W REGEDIT /E "%TEMP%.\_TEMP.REG" "HKEY_CURRENT_USER\Control Panel\International"
:: Now, read the exported data:
FOR /F "tokens=1* delims==" %%A IN ('TYPE "%TEMP%.\_TEMP.REG" ˆ| FIND /I "iDate"') DO SET iDate=%%B
FOR /F "tokens=1* delims==" %%A IN ('TYPE "%TEMP%.\_TEMP.REG" ˆ| FIND /I "sDate"') DO SET sDate=%%B
:: Remove the temporary file:
DEL "%TEMP%.\_TEMP.REG"
:: Remove quotes from the data read:
:: SET iDate=%iDate:"=%
FOR %%A IN (%iDate%) DO SET iDate=%%~A
:: SET sDate=%sDate:"=%
FOR %%A IN (%sDate%) DO SET sDate=%%~A
GOTO:EOF

:ReformatDate
:: Reformat the date back to the local format
:: Arguments : YYYY MM DD
:: Returns   : LDate (Gregorian date in local format)
::
IF %iDate%==0 SET LDate=%2%sDate%%3%sDate%%1
IF %iDate%==1 SET LDate=%3%sDate%%2%sDate%%1
IF %iDate%==2 SET LDate=%1%sDate%%2%sDate%%3
GOTO:EOF

:Syntax
ECHO DateAdd.bat,  Version 1.10 for Windows NT 4 / 2000 / XP / Server 2003 / Vista
ECHO Add (or subtract) the specified number of days to (or from) the specified date
ECHO.
ECHO Usage:  DATEADD  [ date ]  days
ECHO.
ECHO Where:  "date"   is a "normal" Gregorian date in the local computer's format
ECHO                  (default value if no date is specified: today's date)
ECHO         "days"   is the number of days to add or subtract
ECHO.
IF     "%OS%"=="Windows_NT" FOR %%A IN (%Date%) DO SET Today=%%A
IF     "%OS%"=="Windows_NT" ECHO E.g.    DATEADD %Today%  1 will return tomorrow's date  (as will DATEADD  1)
IF     "%OS%"=="Windows_NT" ECHO         DATEADD %Today% -1 will return yesterday's date (as will DATEADD -1)
IF     "%OS%"=="Windows_NT" ENDLOCAL
IF NOT "%OS%"=="Windows_NT" ECHO E.g.    DATEADD 01/25/2007  1 should return 01/26/2007
IF NOT "%OS%"=="Windows_NT" ECHO         DATEADD 01/25/2007 -1 should return 01/24/2007
ECHO.
ECHO Julian date conversion based on Fliegel-Van Flandern algorithms from
ECHO the Astronomical Almanac, provided by Doctor Fenton on the Math Forum
ECHO (http://mathforum.org/library/drmath/view/51907.html), and converted
ECHO to batch code by Ron Bakowski.
ECHO.
ECHO Written by Rob van der Woude
ECHO http://www.robvanderwoude.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:51:08.233

尝试使用`rmdir`（在命令提示符下输入`rmdir /?`帮助）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:39:11.303

好吧，所以我听从了 Elektro Hacker 的建议，最终通过 powershell 进行了此操作，如下所示：

```
$currentDate = get-date
$backupPath = "C:\backup\"
$logFilePath = ("$backupPath" + "ScriptAndQuery\Logs\")

$dailyLog = ("$logFilePath" + "daily_delete.txt")
$weeklyLog = ("$logFilePath" + "weekly_delete.txt")
$monthlyLog = ("$logFilePath" + "monthly_delete.txt")

$dailyBackup = ("$backupPath" + "Daily\")
$weeklyBackup = ("$backupPath" + "Weekly\")
$monthlyBackup = ("$backupPath" + "Monthly\")

$addDateToFile = "TRUE"

get-childitem $dailyBackup |? { $_.psiscontainer -and $_.lastwritetime -le ($currentDate).adddays(-7) } |% { 
    try {
        if($addDateToFile -eq "TRUE") {
            Add-Content "$dailyLog" "$currentDate`r`n"
            $addDateToFile = "FALSE"
        }

        $fullPath = $_.FullName
        remove-item $fullPath -Recurse -force

        if (test-path $fullPath) {
            Add-Content "$dailyLog" "FAILED TO DELETE $fullPath`n"
        } else {
            Add-Content "$dailyLog" "SUCCESSFULLY DELETED $fullPath`n"
        }
    }
    catch {
        Add-Content "$dailyLog" "Exception Occurred: $_.Exception`n"
    }
}

if ($addDateToFile -eq "FALSE") {
    Add-Content "$dailyLog" "`r`n"
    $addDateToFile = "TRUE"
}

get-childitem $weeklyBackup |? {$_.psiscontainer -and $_.lastwritetime -le ($currentDate).adddays(-28)} |% { 
    try {
        if ($addDateToFile -eq "TRUE") {
            Add-Content "$weeklyLog" "$currentDate`r`n"
            $addDateToFile = "FALSE"
        }

        $fullPath = $_.FullName
        remove-item $fullPath -Recurse -force

        if (test-path $fullPath) {
            Add-Content "$weeklyLog" "FAILED TO DELETE $fullPath`n"
        } else {
            Add-Content "$weeklyLog" "SUCCESSFULLY DELETED $fullPath`n"
        }
    }
    catch {
        Add-Content "$weeklyLog" "Exception Occurred: $_.Exception`n"
    }
}

if ($addDateToFile -eq "FALSE") {
    Add-Content "$weeklyLog" "`r`n"
    $addDateToFile = "TRUE"
}

get-childitem $monthlyBackup |? {$_.psiscontainer -and $_.lastwritetime -le ($currentDate).adddays(-365)} |% { 
    try {
        if($addDateToFile -eq "TRUE") {
            Add-Content "$monthlyLog" "$currentDate`r`n"
            $addDateToFile = "FALSE"
        }

        $fullPath = $_.FullName
        remove-item $fullPath -Recurse -force 

        if (test-path $fullPath) {
            Add-Content "$monthlyLog" "FAILED TO DELETE $fullPath`n"
        } else {
            Add-Content "$monthlyLog" "SUCCESSFULLY DELETED $fullPath`n"
        }
    }
    catch {
        Add-Content "$monthlyLog" "Exception Occurred: $_.Exception`n"
    }
} 

if ($addDateToFile -eq "FALSE") {
    Add-Content "$monthlyLog" "`r`n"
} 
```

在这我有 3 个不同的备份发生（每天、每周和每月）。所以基本上我从一周前的每日，一个月前的每周和一岁的每月删除所有文件。我还将每个删除的日期和文件夹打印到文件中，或者在文件夹仍然存在或发生异常的情况下打印失败消息。然后这个脚本每天运行，到目前为止运行良好。

谢谢， 曼

# jquery - 获取父母的孩子，jquery

> ID：13517019
> 
> 赞同：0
> 
> 时间：2012-11-22T16:45:57.837
> 
> 标签：jquery

我有这个代码：

```
<div class="Slideshow homeSlideshow">
    <div class="jshowoff jshowoff-1" style="position: relative;">
    <ul style="position: relative;">
        <li class="Slide" title="Trailer" style="left: auto; right: 0px; top: auto; bottom: auto; position: relative;">
            <a target="_blank" href="http://www.youtube.com/watch?v=123456" title="xxx"></a>
        </li>
    </ul>
    <p class="jshowoff-slidelinks jshowoff-1-slidelinks">
        <a class="jshowoff-slidelink-0 jshowoff-1-slidelink-0" title="undefined" href="#null" style="width: 30.3333%;">
            Trailer
        </a>
    </p>
    </div>
</div> 
```

我在 p 类 jshowoff-slidelinks 中。我需要的是，在单击此 p 内部的 a 时，我会转到 li 类幻灯片中的 href。

任何的想法？

就像，转到父母的孩子的href，类似的东西。

问题是，这是幻灯片代码的一部分，因此 li 会随着幻灯片的移动而不断变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:48:20.783

```
$("p a").click(function() {
  var div = $(this).parent().parent(),
    a = div.find("ul a"),
    href = a.attr("href");

  window.location = href;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:49:13.473

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/XdZDq/)**

```
$('.jshowoff-slidelinks.jshowoff-1-slidelinks').click(function(){

    alert($(this).closest('.jshowoff.jshowoff-1').find('li a').attr('href'));

});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T16:49:29.433

```
$('[class^=jshowoff-slidelink]').click(function(e){
    e.preventDefault();
    window.location = $(this).closest('.Slideshow').find('.Slide a').prop('href');
}); 
```

调用`.parent()`不使用`querySelectorAll`哪个具有性能影响。`.closest()`但是，将，并且具​​有更好的性能。

我已经使用`class^`或`class begins with`以防您有该链接的多个实例。window.location 将告诉浏览器加载后面提供的字符串`=`，在这种情况下，它是元素内的锚`.slide`元素。我们只是从这个锚点中获取了 href 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T16:49:54.980

我可能会选择[`closest`](http://api.jquery.com/closest)and [`find`](http://api.jquery.com/find)：

```
$("p.jshowoff-slidelinks").click(function() {
    var href = $(this).closest("div.Slideshow").find("li.Slide a").attr("href");
    if (href) {
        window.location = href;
    }
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T17:08:54.593

绑定单击事件并在事件中获取元素并检查父项并找到所需的锚标记

```
 var p = $("p.jshowoff-slidelinks");
 p.click(function(){
 window.location = $(this).parent().find("ul>li>a").attr("href");
 }); 
```

检查下面的jsfiddle

[http://jsfiddle.net/LSwvG/3/](http://jsfiddle.net/LSwvG/3/)

使用 Window.loaction 重定向

谢谢

# android - 运行 HelloGoogleMaps 时出错

> ID：13517020
> 
> 赞同：1
> 
> 时间：2012-11-22T16:45:58.190
> 
> 标签：android, google-maps

我尝试了 mapView 的教程，但是没有用，我按照教程的第一部分进行操作

代码有什么问题？

```
package tovar.hellogooglemaps;

import android.os.Bundle;
import android.view.Menu;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class HelloGoogleMaps extends MapActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;    
}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

当它在模拟器上运行时，应用程序崩溃

# vb.net - 对于每个循环字符串

> ID：13517027
> 
> 赞同：1
> 
> 时间：2012-11-22T16:46:46.883
> 
> 标签：vb.net, visual-studio-2010

我从我的网站获取文件内容：

```
 Dim client As WebClient = New WebClient()
    Dim text = client.DownloadString("http://myurl.com/raw.php") 
```

以下`text`是：

```
Line
Another Line
Test1
Test2 
```

现在，我怎样才能通过`text`变量运行一个循环，从每一行中获取一个文本？

我试过这个：

```
 Dim str As String() = text.Split(":::")
    For Each line As String In str
        MsgBox(line)
    Next 
```

我正在用 完成每一行`:::`，但这种方法看起来很难看，我希望有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T16:48:52.147

```
Dim lines As String() = text.Split(Environment.NewLine)
For Each line As String In lines
    MsgBox(line)
Next 
```

这可能不起作用，因为原始字符串中的*换行符*`Environment.Newline`与. 如果字符串来自基于 Unix 的源，则可能会发生这种情况。

另一种方法可能是：

```
Dim reader = new StringReader(text)
While True
    Dim line = reader.ReadLine()
    If line is Nothing
        Exit While
    Else
        MsgBox(line)
    End If
End While 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:09:58.990

如果使用 XML，vb.net 端的示例：

```
Dim doc As New System.Xml.XmlDocument
doc.Load("http://myurl.com/raw.php")

Dim list = doc.GetElementsByTagName("article")

For Each item As System.Xml.XmlElement In list
    MsgBox(item.InnerText)
Next 
```

编辑：

示例 XML 架构：

```
<?xml version='1.0'?>
<!-- File generated at 22/11/2012 17:22 -->
<articleList>
  <article>Hello</article>
  <article>World</article>
  <article>Fish</article>
</articleList> 
```

现在切换到 XML 的另一个优势将意味着将来添加更多细节会更容易（如文章标题、日期/时间、作者等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:05:40.910

正如另一个答案中所建议的那样，使用`text.Split(CChar(Environment.NewLine))`不是最佳选择：在 Windows 系统上`Environment.NewLine`返回两个字符序列。`CR LF`因此，`CChar(Environment.NewLine)`只返回`CR`字符串的第一个字符。如果数据源来自 Unix 系统，则很可能用`LF`s 分隔。

如果您不确定确切的行尾，可以使用以下命令：

```
Dim lines As String() = text.Split(new String() {vbCrLf, vbCr, vbLf}, 
                                   StringSplitOptions.None) 
```

这应该涵盖所有情况，因为它单独分裂，`CR`单独分裂`LF`和两者结合。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-26T12:02:47.513

很抱歉多年后提出这个问题......我刚刚找到了一种更简单的方法：

```
dim lin() as string
lin() = TextBox1.Text.Split(vbCrLf) 
```

# java - 在java中的模态对话框中显示div内容

> ID：13517028
> 
> 赞同：0
> 
> 时间：2012-11-22T16:46:49.173
> 
> 标签：java, javascript, jquery, html

我正在尝试在模态对话框中显示图像，但图像未显示。有人可以对此有任何想法吗？这是我完整的 html 布局。注意： div 内容中有 jquery。

```
html_content = "
    <strong>"+title+"</strong>
    <br>
    <br>
    <img src='"+single_image+"'width='300' height='211'>
    <br> "+content+"
    <br>"+str+"
    <div id='image'></div>
    <div id='dialog-modal' title='Basic modal dialog'>
    <div id='popup' style='display:none'>"+"
        <a id='popup-close' href='' class='button'>"+"Fermer"+"</a>
        <p><img id='image-placeholder' width='300px'; height='250px'  src=''>
        <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js'></script>
        <script type='text/javascript'>
            $(document).ready(function() {
                $('.popup-open').click( function(e){
                    $('#popup:visible').hide(); 
                    e.preventDefault();
                    $('#image-placeholder').attr('src', $(this).attr('href'));
                    $('#popup').fadeIn('fast');
                });
                $('#popup-close').click(function(e){
                    e.preventDefault();
                    $('#popup').fadeOut('fast');
                });
            });
        </script>
    ";

String mdialog = "
    <link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css\" />
    <script src=\"http://code.jquery.com/jquery-1.8.2.js\"></script>
    <script src=\"/resources/demos/external/jquery.bgiframe-2.1.2.js\"></script>
    <script src=\"http://code.jquery.com/ui/1.9.1/jquery-ui.js\"></script>
    <link rel=\"stylesheet\" href=\"/resources/demos/style.css\" />
    <script> 
        $(function() {
            $( '#dialog-modal' ).dialog({height: 140, modal: true});
        });
    </script>
    <meta http-equiv=\"Content-Type\" " +"content=\"text/html; charset=utf-8\">
    <style>
        #popup{border: 1px solid gray; background-color:black; border-radius: 5px 5px 5px 5px; margin-left:auto; margin-right:auto; position:fixed; top:50px; z-index: 9999;}
    </style>
    ";

String webData = "
    <!DOCTYPE html>
    <head> 
        "+mdialog+"
    </head>
        <body>
        "+html_content+"
                </tr>
            </table>
        </div>
        </body>
    </html>
    "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:29:17.867

我重新格式化了你的代码，但很明显你没有以正常的方式编码。您是否在使用 Web 开发应用程序（如 Frontpage、Expression Web、Sharepoint 等）？

如果您通过 PHP 注入 HTML，那么您应该提及您这样做的原因。此外，您应该尽量避免不必要的字符串连接。通过简单地连接所有各种字符串位并缩进一点，我将您的代码变成了可读的东西。这使我能够找到：
-`<p>`无需关闭`</p>`
- 关闭表格元素 ( `</tr></table>`) 但代码中没有其他表格元素
- 两个独立的 javascript 区域
- 两个 jQuery document.ready 函数

请告知我们您的开发环境。如果可以的话，我强烈建议您使用 Notepad++ 并手动编写所有代码——您将通过这种方式学到最多的东西（而且真的不再困难）。当然，除非你有充分的理由使用另一种方法——这就是我问的原因。

另外，我建议您访问 jQueryUI 网站并直接尝试[他们的对话框示例](http://jqueryui.com/dialog/)。只需剪切/粘贴到 Notepad++ 中并全部尝试。然后搜索其他对话框示例并尝试它们。

为什么记事本++？因为它有很好的语法高亮和（最好的）一个集成的 FTP 组件。这意味着当您保存正在处理的脚本文件时，它会立即上传到您的 Web 服务器，为您提供几乎即时的实时测试。这是梦幻般的。

您可能还想查看 phpacademy.org 上的优秀编码资源。绝对是网络上最好的 tuts。

祝你的项目好运。

最后，这是您的代码从 php 字符串中取出时的实际样子，脚本部分被合并，样式部分被格式化。注意额外的表格标签和孤立的段落标签。

```
<!DOCTYPE html>
<head> 
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script> 
        $(document).ready(function() {
            $( '#dialog-modal' ).dialog({height: 140, modal: true});
            $('.popup-open').click( function(e){
                $('#popup:visible').hide(); 
                e.preventDefault();
                $('#image-placeholder').attr('src', $(this).attr('href'));
                $('#popup').fadeIn('fast');
            });
            $('#popup-close').click(function(e){
                e.preventDefault();
                $('#popup').fadeOut('fast');
            });
        });
    </script>
    <meta http-equiv="Content-Type" " +"content="text/html; charset=utf-8">
    <style>
        #popup{
            border: 1px solid gray; 
            background-color:black; 
            border-radius: 5px 5px 5px 5px; 
            margin-left:auto; 
            margin-right:auto; 
            position:fixed; 
            top:50px; 
            z-index: 9999;
            }
    </style>
</head>
<body>
    <strong>This is my Title</strong>
    <br>
    <br>
    <img src='http://www.gravatar.com/avatar/783e6dfea0dcf458037183bdb333918d?s=32&d=identicon&r=PG'width='300' height='211'>
    <br> 
        Here is some content
    <br>
        Here is a string of text.
    <div id='image'></div>
    <div id='dialog-modal' title='Basic modal dialog'>
    <div id='popup' style='display:none'>
        <a id='popup-close' href='' class='button'>Fermer</a>
        <p><img id='image-placeholder' width='300px'; height='250px'  src=''>
        <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js'></script>
        <script type='text/javascript'>
        </script>
        </tr>
            </table>
        </div>
    </body>
</html> 
```

# python - 如何拆分文件

> ID：13517029
> 
> 赞同：0
> 
> 时间：2012-11-22T16:46:49.590
> 
> 标签：python, awk

我有这种格式的文本文件：

```
10900   PART1   3211034
10900   PART2   3400458
10900   PART4   3183857
10900   PART3   4152115
10900   PART5   3366650
10900   PART6   1548868
10920   PART3   4154075
10920   PART2   3404018
10920   PART1   3207571
10920   PART4   3178505
10920   PART6   1882924
10920   PART5   3363267
10940   PART6   2183534
10940   PART3   4153924
10940   PART4   3178554
10940   PART1   3207436
10940   PART5   3363585
10940   PART2   3404220 
```

我想拆分文件 - 首先，按第一列；第二，第 3 栏的总和不大于 10000000。

这是我根据第一列拆分文件的代码：

```
file1=open ('Normal_All_TracNum_mod')
data=[]

for line in file1.readlines():
line_split=line.split()
data.append(line_split)

RCV_check= data[0][0]
filewrite=open(RCV_check,"w")

for i in range(0,len(data)):
    if (data[i][0] == RCV_check):
        filewrite.write(data[i][0]+ "          "+data[i][1]+'\n')

    else:
        RCV_check=data[i][0]
        filewrite.close()
        filewrite=open(RCV_check,"w")
        filewrite.write(data[i][0]+ "          "+data[i][1]+'\n')   
filewrite.close() 
```

输出我想要的：

```
File 1
 10900  PART1   3211034
 10900  PART2   3400458
 10900  PART4   3183857
File 2
 10900  PART3   4152115
 10900  PART5   3366650
 10900  PART6   1548868
...etc 
```

我需要在每个文件中具有相同的第 1 列和第 3 列的总和（3211034 + 3400458 + 3183857）不大于 10000000 等其他文件......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:47:26.263

这是一种使用方法`awk`：

```
awk '{ s+=$3 } s>=10000000 || $1!=x { s=$3; c++ } { print > "File" c; x=$1 }' file 
```

这将创建 7 个文件。这是`grep . File*`显示每个文件内容的输出：

```
File1:10900   PART1   3211034
File1:10900   PART2   3400458
File1:10900   PART4   3183857
File2:10900   PART3   4152115
File2:10900   PART5   3366650
File2:10900   PART6   1548868
File3:10920   PART3   4154075
File3:10920   PART2   3404018
File4:10920   PART1   3207571
File4:10920   PART4   3178505
File4:10920   PART6   1882924
File5:10920   PART5   3363267
File6:10940   PART6   2183534
File6:10940   PART3   4153924
File6:10940   PART4   3178554
File7:10940   PART1   3207436
File7:10940   PART5   3363585
File7:10940   PART2   3404220 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:10:24.307

我不明白你想对第一列做什么。但是，这里有一些 python 尊重对第二列总和的约束

fileID = itertools.count(1) with open('path/to/file') as infile: sum = 0 threshold = 10000000 outfile = open("file%d"%fileID, 'w')

```
for line in infile:
    val = int(line.strip().split()[-1])
    if threshold-sum >= val:
        outfile.write(line)
    else:
        outfile.close()
        sum = 0
        outfile = open("file%d"%next(fileID), 'w')
        outfile.write(line)

    sum += val

outfile.close() 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:56:42.347

如果我正确地了解了您的规格，则波纹管可能对您有用。基本上它检查第二个字段是否大于 1000，如果是，则将其打印到`filec`（`c`是计数器）然后重置第二个字段的总和并增加文件计数器等。

```
awk 'BEGIN {c=1}
     $3>10000000 {print $0 > ("file" c) ; c++ ; sum=0 } 
     $3< 10000000 {print $0 > ("file" c) ; sum+=$3 ; if (sum> 10000000) {sum=0;c++}}' INPUTFILE 
```

如果要拆分第一列*和*第三列的总和：

```
awk 'NR==1 {f=$1; c=1 ; fname=f c ; s=$3 ; print $0 > (fname)}
     NR>1  {if ($1 != f) {f=$1 ; c=1 ; fname=f c; s=$3 } } 
     NR>1  {if (s<10000000) {print $0 > (fname); s+=$3} else {c++;fname=f c;s=$3; print $0 > (fname)} }' INPUTFILE 
```

是的，我知道这可以缩短...

# android - 拆分操作栏具有不同的透明度

> ID：13517032
> 
> 赞同：1
> 
> 时间：2012-11-22T16:46:54.177
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock，并且我有一个拆分操作栏。顶部操作栏具有我想要的透明度。问题是底部操作栏是完全透明的，我不知道如何让它们看起来一样。

这是我的样式xml：

```
<resources>    
    <style name="AppTheme" parent="android:Theme.Holo.Light" />

    <style name="Theme.MyTheme" parent="style/Theme.Sherlock">
        <item name="actionDropDownStyle">@style/customActionBarDropdown</item>
        <item name="android:actionDropDownStyle">@style/customActionBarDropdown</item>
        <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    </style>

    <style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
        <item name="android:background">#88000000</item>
        <item name="background">#88000000</item>
    </style>

    <style name="customActionBarDropdown" parent="Widget.Sherlock.Spinner.DropDown.ActionBar">
        <item name="android:gravity">right|center_vertical</item>
    </style>        
</resources> 
```

任何人都知道是否需要包含另一个参数以使底部操作栏具有相同的透明度？

谢谢

# wcf - 调用接收一长串对象的 Web 参考服务时出错

> ID：13517033
> 
> 赞同：3
> 
> 时间：2012-11-22T16:47:01.387
> 
> 标签：wcf, web-services

我在接收对象列表的 Web 引用上调用服务`List<T>`
它可以很好地列出最多大约 13000 个的列表，但是当列表的长度超过 13000 并且调用该服务时，它会引发以下错误：
***底层连接是关闭：接收时发生意外错误。***

我也有一个非常相似的错误（***底层连接已关闭：连接意外关闭。***）在接收字符串并返回一长串对象（如您[在此处](https://stackoverflow.com/questions/13498888/service-reference-return-value-size-issue)看到）的服务上，我已经解决了web.config，但它不能解决接收列表作为参数的服务的错误，它只能用于能够返回长的对象列表

我在绑定中有这个：

```
<binding name="customBasicHttp" closeTimeout="00:01:00" 
    openTimeout="00:01:00" receiveTimeout="00:10:00" 
    sendTimeout="00:01:00" allowCookies="false"
    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
    maxBufferSize="67108864" maxBufferPoolSize="67108864" 
    maxReceivedMessageSize="67108864" messageEncoding="Text" 
    textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
    <readerQuotas maxDepth="32" maxStringContentLength="67108864"
        maxArrayLength="67108864" maxBytesPerRead="5242880"
        maxNameTableCharCount="67108864" />
    <security mode="None" />
</binding> 
```

这在行为中：

```
<behavior name="EndpointBehaviour">
    <dataContractSerializer maxItemsInObjectGraph="2147483647" />
</behavior> 
```

我需要能够将一长串对象作为参数发送到 Web 参考中的服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:19:48.933

如果您将大型对象数组拆分为 3 或 4 个部分，并且每次都通过 Web 服务发送其中一个，该怎么办？

# .net - 在c#中将代码从一个文件复制到另一个文件

> ID：13517038
> 
> 赞同：-2
> 
> 时间：2012-11-22T16:47:24.770
> 
> 标签：.net, class, clipboard

使用下面的代码，我们可以将代码从一个文本框复制到另一个文本框。

```
 private void Copybtn_Click(object sender, EventArgs e)
        {
            Clipboard.SetText(txtSour.Text);
        }
        //paste the text
        private void Pastebtn_Click(object sender, EventArgs e)
        {
            txtDestinatio.Text = Clipboard.GetText();
        } 
```

我的要求是：使用 C# 将代码从一个文件复制到另一个文件？是否可以使用剪贴板？然后我需要将代码从一个文件复制到另一个文件？

请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:08:01.743

最后我找到了答案，成功执行..代码是`DataObject objData = new DataObject(); var copyFrom = File.ReadAllText("C:/Get.cs"); objData.SetText(copyFrom);
File.AppendAllText("C:/To.cs", objData.GetText());`

# delphi - 图像中的鼠标右键禁用图像外的第一次单击鼠标事件

> ID：13517040
> 
> 赞同：0
> 
> 时间：2012-11-22T16:47:38.473
> 
> 标签：delphi, delphi-2007, delphi-xe3, graphics32

我有一个带有 TImgView32 控件（Graphics32 的一部分）的 Delphi 应用程序。我正在处理鼠标移动和鼠标按下事件，这是有效的。问题是每当我在图像中使用鼠标右键时，当我松开鼠标右键（仍在我的图像内——我在松开之前没有离开图像之外）——鼠标左键不运行按钮、复选框、最小化或任何其他控件的事件。它在 TImgView32 中执行额外的鼠标按下事件，直到再次单击。当鼠标不再在我的图像中而不点击两次时，如何让鼠标点击进入正确的控制？我用XE3和2007都编译过，结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:08:03.877

作为一个快速而肮脏的修复，您可以在处理鼠标右键事件结束时模拟鼠标左键单击？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:09:57.750

这被证明是第三方组件中的错误，而不是 Delphi 或其 VCL 库中的错误。已提交错误报告。如果图层捕获鼠标事件，请确保图像或图像查看器重置“MouseCapture”，但如果只有图像需要事件而不需要图层，请将 Layers.MouseEvents 设置为 false 作为解决方法。

# java - 是否可以使用 Apache Tika 提取表信息？

> ID：13517045
> 
> 赞同：9
> 
> 时间：2012-11-22T16:48:06.950
> 
> 标签：java, apache-tika

我正在寻找 pdf 和 MS office 文档格式的解析器，以从文件中提取表格信息。当我看到 Apache Tika 时，我正在考虑编写单独的实现。我能够从任何这些文件格式中提取全文。但我的要求是提取表格数据，其中我期望键值格式的 2 列。我检查了网络中可用的大多数东西以寻找解决方案，但找不到任何解决方案。对此有任何指示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-02-01T13:36:37.850

Tika 不解析表信息。实际上令人困惑的部分是它将表格标签转换为`<p>`实际上意味着我们丢失了结构。在当前版本 1.14 之前都是这种情况。将来这可能会得到纠正，但到目前为止还没有计划朝着这个方向努力。

你可以参考[JIRA](https://issues.apache.org/jira/browse/TIKA-2249)，它在 Tika 中讨论了这个缺点。在 JIRA 之后，[wiki](https://wiki.apache.org/tika/PDFParser%20%28Apache%20PDFBox%29)也进行了更新以反映这种不足。[免责声明：我提出了 JIRA]

现在是解决方案部分：根据我的经验，[Aspose.Pdf for Java](http://www.aspose.com/docs/display/pdfjava/Home)在将 pdf 转换为 html 方面做得非常出色。但它的许可。您可以通过免费试用版检查质量。[代码和示例链接](https://stackoverflow.com/questions/41959801/aspose-converting-only-few-pages-of-pdf-to-html-not-all)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T13:53:16.097

好吧，我继续使用 apache poi 单独实现它，用于 MS 格式。我回到 Tika 获取 PDF。Tika 对文档所做的是将其输出为“基于 SAX 的 XHTML 事件” [1](http://manning.com/mattmann/)

所以基本上我们可以编写一个自定义的 SAX 实现来解析文件。

结构文本输出将采用以下形式（避免元细节）

```
<body><div class="page"><p/>
<p>Key1 Value1 </p>
<p>Key2 Value2 </p>
<p>Key3 Value3</p>
<p/>
</div>
</body> 
```

在我们的 SAX 实现中，我们可以将第一部分视为键（对于我的问题，我已经知道键并且我正在寻找值，所以它是一个子字符串）。

用逻辑覆盖 public void characters(char[] ch, int start, int length)

请注意，对于我的情况，内容的结构是固定的，并且我知道要输入的密钥，所以这样做很容易。这不是通用解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-29T05:25:36.493

我使用 tika (tika-app-1.19.jar) 和 aspose (aspose-pdf-18.9.1.jar) 的组合...

我首先使用 Aspose 修改 pdf，在表格列的末尾添加管道（'|'）......然后将其读入 Tika 并将其转换为文本......

```
InputStream is = part.getInputStream(); // input-stream of PDF or PDF part

// Aspose add pipes ("|")
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
Document pdfDocument   = new Document(is);   // load existing PDF file

PageCollection pageCollection = pdfDocument.getPages();
int iNumPages = pageCollection.size();

for(int i = 1; i <= iNumPages; i++)
{
    Page page = pageCollection.get_Item(i);
    TableAbsorber absorber = new TableAbsorber();// Create TableAbsorber object to find tables
    absorber.visit(page);// Visit first page with absorber

    IGenericList<AbsorbedTable> listTables = absorber.getTableList();

    for(AbsorbedTable absorbedTable : listTables)
    {
        IGenericList<AbsorbedRow> listRows = absorbedTable.getRowList();

        for(AbsorbedRow absorbedRow : listRows)
        {
            IGenericList<AbsorbedCell> listCells = absorbedRow.getCellList();

            for(AbsorbedCell absorbedCell : listCells)
            {
                TextFragmentCollection  collectionTextFrag = absorbedCell.getTextFragments();

                Rectangle rectangle = absorbedCell.getRectangle();

                // Add pipes ("|") to indicate table ends
                TextBuilder  textBuilder  = new TextBuilder(page);
                TextFragment textFragment = new TextFragment("|");
                double x = rectangle.getURX();
                double y = rectangle.getURY();
                textFragment.setPosition(new Position(x, y));
                textBuilder.appendText(textFragment);
            }
        }
    }
}
pdfDocument.save(outputStream);
is = new ByteArrayInputStream(outputStream.toByteArray()); // input-steam of modified PDF with pipes included ("|") 
```

现在可以将表格单元格末端带有管道（“|”）的上述 pdf 输入流拉入 Tika 并更改为文本...

```
BodyContentHandler handler   = new BodyContentHandler();
Metadata           metadata  = new Metadata();
ParseContext       context   = new ParseContext();
PDFParser          pdfParser = new PDFParser();

PDFParserConfig config = pdfParser.getPDFParserConfig();
config.setSortByPosition(true); // needed for text in correct order
pdfParser.setPDFParserConfig(config);

//InputStream stream = new ByteArrayInputStream(sIS.getBytes(StandardCharsets.UTF_8));
pdfParser.parse(is, handler, metadata, context);
String sPdfData = handler.toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-19T14:24:02.677

我在这里找到了一篇非常有用的博客文章，它使用`ContentHandlerDecorator`（使用 Groovy，但足够相似；）解析表： [https ://opensource.com/article/17/8/tika-groovy](https://opensource.com/article/17/8/tika-groovy)

我将其调整为仅将所有部分解析`<td>`为制表符分隔的行，并通过以下`<tr>`标签收集列表中的行，因为我需要表格行保持完整，但表格单元格内没有特殊逻辑。

您可以将装饰器传递给 BodyHandler，后者将其包装为委托，如下所示：

```
new AutoDetectParser().parse(inputStream,
    new BodyContentHandler(new MyContentHandlerDecorator()),
    new Metadata()); 
```

# ios - 如何仅将 UITableView 的第一个单元格设置为不同的颜色？

> ID：13517048
> 
> 赞同：1
> 
> 时间：2012-11-22T16:48:19.957
> 
> 标签：ios, xcode

我在这里使用 cellForRowAtIndexPath ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
        cell = [self getCellContentView:CellIdentifier];

    UILabel *lbl = (UILabel*)[cell.contentView viewWithTag:1];

    for (UITableViewCell *c in [tbl visibleCells])
    {
     //   UITableViewCell *cell2 = [tbl cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
        UILabel *lbl = (UILabel*)[c.contentView viewWithTag:1];
        lbl.textColor = [UIColor redColor];
    }

    if([tbl indexPathForCell:cell].section==0)
        lbl.textColor = [UIColor whiteColor];

    UILabel *lblTemp1 = (UILabel *)[cell viewWithTag:1];
    UILabel *lblTemp2 = (UILabel *)[cell viewWithTag:2];

    //First get the dictionary object

    lblTemp1.text =  @"test!";
    lblTemp2.text = @"testing more";

    NSLog(@"%@",[tbl indexPathForCell:cell]);

    return cell;

} 
```

但是仍然使我的一些细胞变成白色而不是灰色。

如何仅将行中的第一项更改为白色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T16:52:04.463

第一：抛弃

```
for (UITableViewCell *c in [tbl visibleCells])
{
    //UITableViewCell *cell2 = [tbl cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
    UILabel *lbl = (UILabel*)[c.contentView viewWithTag:1];
    lbl.textColor = [UIColor redColor];
} 
```

并将其更改为

```
UILabel *lbl = (UILabel*)[c.contentView viewWithTag:1];
lbl.textColor = [UIColor redColor]; 
```

无需遍历此处所有可见的单元格。

然后改变

```
if([tbl indexPathForCell:cell].section==0)
        lbl.textColor = [UIColor whiteColor]; 
```

到

```
if((indexPath.section==0)&&(indexPath.row==0))
        lbl.textColor = [UIColor whiteColor]; 
```

如果这个类/对象是几个 tableViews 的委托，你应该添加额外的检查

```
if ((tableView == correctTableView)&&... 
```

值得注意的是

```
[tbl indexPathForCell:cell] 
```

无关紧要。您的参考是参数`(NSIndexPath *)indexPath`。

如果问题仍然存在，您应该发布您的`getCellContentView:`方法的代码。

**编辑：**根据 rmaddy 的建议，因为`cellForRowAtIndexPath:`性能很重要，所以最好使用：

```
if((indexPath.section==0)&&(indexPath.row==0))
{
    lbl.textColor = [UIColor whiteColor];
}
else
{
    lbl.textColor = [UIColor redColor];
} 
```

这样，您在处理第一个单元格时可以避免不必要的双重更改。

# javascript - Dojo dgrid，将图标放在插件列树中的每个子行中（PDF、HTML、XSL）

> ID：13517052
> 
> 赞同：0
> 
> 时间：2012-11-22T16:48:26.893
> 
> 标签：javascript, dojo, tree, dgrid

我做了一个dojo dgrid，我有一个树字段（插件列）。我正在尝试在每个子行中放置图标（PDF、HTML 和 XLS）供用户下载。我尝试使用**formatter: function(item, rowIndex, cell)**创建图标，但它损坏了我的树列，只是停止工作。我没有在文档中找到任何我想做的事情。

下图显示了我的示例： ![图标子行](../Images/7f27ac947b2acb098c3073d8a4b5d8bc.png)

我也尝试过混合 HTML，但没有奏效，我不想这样做，将 HTML 与我的 javascript 混合。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:33:44.457

我不知道这是否是最好的解决方案，但我以这种方式解决了。

我创建了一个新列（插件列），并在 CSS 中取出列之间的垂直线（用于模拟 colspan）。但是你可以通过 dgrid 进行 colspan，但我更喜欢通过 CSS（更简单）。

我的插件专栏是这样的：

```
editor({label: ' ', field: 'idDOC', sortable: false, canEdit: function(obj){

                    if(obj.type == 'DOC'){

                        if(obj.format == 'xls'){
                            this.editorArgs.iconClass = 'dijitEditorIcon dijitEditorIconXls';
                        }

                        if(obj.format == 'html'){
                            this.editorArgs.iconClass = 'dijitEditorIcon dijitEditorIconHtml';
                        }

                        if(obj.format == 'pdf'){
                            this.editorArgs.iconClass = 'dijitEditorIcon dijitEditorIconPdf';
                        }

                        return true;
                    }

                    return false;

                }, editorArgs:{onClick: function(obj){

                    var node = that.memoryStore.get(that.designId);
                    var format;

                    for(var i=0; i<node.children.length; i++){

                        if(node.children[i].id == this._dgridLastValue){
                            format = node.children[i].format;
                        }

                    }

                    window.location.href = that.domain+'/'+that.designId+'/'+this._dgridLastValue+'/'+format;

                }, label:'View', showLabel:true}}, Button), 
```

谢谢

# php - 访问数组中的单个值并根据条件显示

> ID：13517053
> 
> 赞同：0
> 
> 时间：2012-11-22T16:48:27.487
> 
> 标签：php, codeigniter, codeigniter-2

我有2个数据数组。第一个数组包含销售经理的数据，第二个数组包含每个 scode 的总值。

下面的代码显示了销售经理的详细信息，它工作正常。

```
<?php  foreach ($allsales as $sales):?>
<?php if ($z != $sales['class']): ?>

  <tr>
  <td colspan = "6"><?php echo $sales['scode'];?><hr /> </td>
  </tr>

 <?php endif; ?>
 <tr>
  <td colspan = "2"><?php echo $sales['numb']?></td>
    <td><?php echo $sales['name']?></td>
    <td><?php echo $sales['scode']?></td>
    <td style="text-align: center"><?php echo $sales['months']?> Months</td>

    <?php
    $pending_unf =  $sales['amount'] * $sales['months']; 
    $pending = number_format((float)$pending_unf, 2, '.', '');
    ?>
    <td style="text-align: right"><?php echo $pending;?></td>

  </tr>
<tr>
  <td colspan = "6">Total Amount : XXXX</td>
  </tr>

  <?php $z = $sales['scode']; ?>
  <?php endforeach;?> 
```

下面是我的第二个数组数据

```
array(11) {
  [0]=>
  array(2) {
    ["scode"]=>
    string(3) "10A"
    ["amount"]=>
    string(5) "12600"
  }
  [1]=>
  array(2) {
    ["scode"]=>
    string(3) "10B"
    ["amount"]=>
    string(5) "51600"
  }
  [2]=>
  array(2) {
    ["scode"]=>
    string(3) "11A"
    ["amount"]=>
    string(5) "60000"
  }
  [3]=>
  array(2) {
    ["scode"]=>
    string(3) "9B"
    ["amount"]=>
    string(5) "30000"
  } 
```

我想做的是从第二个数组中获取金额并将其显示为总计，在每个 scode 组的末尾作为新行显示，如下所示

```
admission  name   months  scode
==================================
001        test1  3       10A
002        test2  5       10A
                Total    USD 1000

006        test3  7       15B
                Total    USD 1800

008        test4  1       15A
                Total    USD 800

011        test5  2       16C
                Total    USD 1600

051        test6  3       16A
012        test7  3       16A
                 Total    USD 2700 
```

我只是尝试使用 foreach，但它在每一行都不断重复。但我希望它只显示在每组的末尾。

那么我如何访问第二个数组中的单个值并在条件语句中使用它以显示在每个组中最后一个 scode 的末尾？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:06:36.397

我要做的是使用两个循环和一组“已读”代码。现在在第一个循环中，每次我碰巧在第一个数组上找到新的代码时，我都会把它放在“读取代码”的数组中并切换到内部循环，它从当前位置遍历所有数组并读取用户具有相同的代码。像这样（假设您具有在 secon 数组中查找“总值”的功能。

```
<?php
  $array1 = /*array of users*/;
  $array2 = /*array of total amouns of whatever*/;
  $read = array();  //theese scodes should be skipped next time
  for($i=0; $i<count($array1); $i++) {
    if(in_array($array1[$i]['scode'],$read))
      continue;  //If this user was already outputed, we skip him
                 //Othewise, we output all users with same SCODE
    $read[] = $array1[$i]['scode'];
    for($j=$i; $j<count($array1); $j++) {   //Note that I start from current position, all inputs before must be already read
      echo "User: {$array1[$j]['name']}\nScode: {$array1[$j]['scode']}\n\n";
    }
    echo "Total amount for theese users: ".get_total_amount($array1[$i]['scode'],$array2).PHP_EOL.PHP_EOL.PHP_EOL;  //finding amount for current scode.
  }

?> 
```

# java - 如何使光标可以进入 jtextfield 但给它一个文本的唯一方法是单击一个按钮？

> ID：13517057
> 
> 赞同：3
> 
> 时间：2012-11-22T16:48:56.630
> 
> 标签：java, swing, jtextfield

我有 jTextfield 和 jButton..

如何

*   用户可以点击 jTextfield（鼠标可以在 jtextfield 上进入/退出），但是如果用户输入一些内容，它不会做任何事情（除了将删除整个文本的退格键）
*   当用户单击按钮时，它将

> jTextfield.setText("某事");

所以给jtextfield文本的唯一方法是点击按钮

*   当那里有文本时（当光标在 jtextfield 内时）然后用户输入退格键，它将删除 jtextfield 上的整个文本。

这该怎么做？

原谅我的英语..非常感谢任何帮助..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T16:52:20.433

使用 a [`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)，只需将其添加到您的`JTextField`喜欢中：

```
 public class Test {

    public void initComponents() {

        //create frame

        //add DoucmentFilter to JTextField
        MyDocumentFilter myFilter = new MyDocumentFilter();
        JTextField myArea = new JTextField();
        ((AbstractDocument)myArea.getDocument()).setDocumentFilter(myFilter);

         //add components set frame visible
    }

 }

class MyDocumentFilter extends DocumentFilter {

    @Override
    public void replace(FilterBypass fb, int i, int i1, String string, AttributeSet as) throws BadLocationException {
        super.replace(fb, i, i1, string, as);
    }

    @Override
    public void remove(FilterBypass fb, int i, int i1) throws BadLocationException {
        super.remove(fb, i, i1);
    }

    @Override
    public void insertString(FilterBypass fb, int i, String string, AttributeSet as) throws BadLocationException {
        super.insertString(fb, i, string, as);
    }

} 
```

或者

您可能想要创建一个[自定义 JTextField](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html)，它已经具有`DocumentFilter`（为了可重用性）类似：

```
public class MyCustomField extends JTextField {

    public MyCustomField(int cols) {
        super(cols);
    }

    protected Document createDefaultModel() {
        return ((Document) new MyDocument());
    }

    static class MyDocument extends DocumentFilter {

        @Override
        public void insertString(FilterBypass fb, int i, String string, AttributeSet as) throws BadLocationException {
            super.insertString(fb, i, string, as);
        }

        @Override
        public void remove(FilterBypass fb, int i, int i1) throws BadLocationException {
            super.remove(fb, i, i1);
        }

        @Override
        public void replace(FilterBypass fb, int i, int i1, String string, AttributeSet as) throws BadLocationException {
            super.replace(fb, i, i1, string, as);
        }
    }
} 
```

* * *

**从气垫船编辑**
我更多地考虑这些方面

```
import java.awt.event.ActionEvent;
import javax.swing.*;
import javax.swing.text.*;

public class Test {

   public void initComponents() {

      JPanel panel = new JPanel();
      final MyDocumentFilter myFilter = new MyDocumentFilter();
      final JTextField myArea = new JTextField(20);
      ((AbstractDocument) myArea.getDocument()).setDocumentFilter(myFilter);

      panel.add(myArea);

      panel.add(new JButton(new AbstractAction("Set Text") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            myFilter.setFiltering(false);
            myArea.setText("Fe Fi Fo Fum");
            myFilter.setFiltering(true);
         }
      }));

      JOptionPane.showMessageDialog(null, panel);

      // add components set frame visible
   }

   public static void main(String[] args) {
      new Test().initComponents();
   }

}

class MyDocumentFilter extends DocumentFilter {
   private boolean filtering = true;

   @Override
   public void replace(FilterBypass fb, int i, int i1, String string,
         AttributeSet as) throws BadLocationException {
      if (!filtering) {
         super.replace(fb, i, i1, string, as);
      }
   }

   @Override
   public void remove(FilterBypass fb, int i, int i1)
         throws BadLocationException {
      int offset = 0;
      int length = fb.getDocument().getLength();
      super.remove(fb, offset, length);
   }

   @Override
   public void insertString(FilterBypass fb, int i, String string,
         AttributeSet as) throws BadLocationException {
      if (!filtering) {
         super.insertString(fb, i, string, as);         
      }
   }

   public void setFiltering(boolean filtering) {
      this.filtering = filtering;
   }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T16:52:11.043

在jTextfield的key listener中，在keyTyped事件中，检查e.getKeyChar()是否是退格，如果不是，做e.consume(); 它将取消活动

退格键的 keychar 是 8

这是一个例子：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class ConsumeExceptForBackSpace extends JFrame {

    private boolean canWrite = false;

    public ConsumeExceptForBackSpace() {
        super();

        JButton b = new JButton("Click");
        JTextField f = new JTextField("");
        this.setLayout(new BorderLayout());
        this.add(b, BorderLayout.CENTER);
        this.add(f, BorderLayout.SOUTH);

        b.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                canWrite = !canWrite;
            }
        });

        f.addKeyListener(new KeyListener() {

            @Override
            public void keyTyped(KeyEvent e) {
                if(e.getKeyChar() != KekEvent.VK_BACK_SPACE && !canWrite) e.consume();
            }

            @Override
            public void keyReleased(KeyEvent e) {

            }

            @Override
            public void keyPressed(KeyEvent e) {

            }
        });

        this.pack();
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setVisible(true);
    }

    public static void main(String[] args) {
        new ConsumeExceptForBackSpace();
    }
} 
```

# sql-server-2008 - CASE 语句添加前导零 0 SQL

> ID：13517058
> 
> 赞同：0
> 
> 时间：2012-11-22T16:49:03.270
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2

我有一个看起来像这样的案例陈述

```
SELECT
Location,
CASE WHEN id BETWEEN 1 AND 7 THEN '05' ELSE '01' END AS id
FROM Locations 
```

然而，这将返回 5 或 1，而没有前导零。

我已经尝试过`CAST('05' AS sql_variant)`，但我将使用这个 select 作为一个插入语句到一个表中，它是一个 nvarchar 字段，所以它不喜欢那样。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:57:14.680

我在 SQL 2008R2 上尝试了您的查询，它工作正常..

你总是可以这样做：

```
SELECT
 Location,
 right('0'+convert(varchar(2), CASE WHEN id BETWEEN 1 AND 7 THEN '5' ELSE '1' END), 2) AS id
FROM Locations 
```

您是在变量中绑定值还是直接在另一个表中插入？例如：INSERT INTO table2 SELECT ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:15:54.673

选择位置，当 id 介于 1 和 7 之间时的情况，然后转换（nvarchar，'05'）否则转换（nvarchar，'01'）作为 id 从位置结束

会做

# ruby-on-rails - Mongoid如何插入嵌入记录？

> ID：13517065
> 
> 赞同：4
> 
> 时间：2012-11-22T16:49:19.707
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有 2 个课程...文章和评论（嵌入在文章中）。

```
class Article
   include Mongoid::Document
   field :name, type: String
   field :content, type: String
   field :published_on, type: Date

   validates_presence_of :name

   embeds_many :comments
end 
```

还有一个

```
class Comment
  include Mongoid::Document
  field :name, type: String
  field :content, type: String

  embedded_in :article, :inverse_of => :comments
end 
```

此 mongodb 文档的 Json 表示形式为：

```
{
   _id:ObjectId("50ae35274b6b5eaa77000001"),
   author_id:ObjectId("50ae3b1e4b6b5e8162000001"),
   comments:[
      {
         _id:ObjectId("50ae380e4b6b5e0c34000001"),
         name:"fak",
         content:"i like this article
      }

   ],
   content:"article about nothing",
   name:"my sweet article",
} 
```

如何使用 mongoid on rails 在本文档中插入另一条评论？

谢谢法克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T18:03:25.450

我已经成功了...

在评论控制器：

```
def create
  @article = Article.find(params[:article_id])
  @comment = @article.comments.create!(params[:comment])
  redirect_to @article, :notice => "Comentario criado!"
end 
```

然后我找到我想添加评论的对象......并创建它

```
@photox=Photo.find_by(name: "foto xpto")
@photox.comments.create(:comment=>"NOVO COMENTARIO") 
```

多谢你们...

# c++ - 如何为不同系统配置 NetBeans/C++ 项目？

> ID：13517069
> 
> 赞同：1
> 
> 时间：2012-11-22T16:49:40.977
> 
> 标签：c++, linux, netbeans, configuration, porting

在 NetBeans/C++ 中，我有一个项目需要在两个不同版本的 Linux 上构建。他们每个人都有不同路径的库，不同版本的 GCC，不同版本的静态和共享库，......

我遇到的问题之一：程序链接到`libmysqlclient.so`，在它构建的一个系统上没有问题（链接到`libmysqlclient.so.16`），而在另一个系统上，我收到与缺少的库相关的运行时错误（虽然`libmysqlclient.so.15`和`libmysqlclient.so.18`都可用，并且路径是设置正确）。而且我没有指定lib版本号。

是否可以将项目配置为在多个系统上构建？我是否必须创建多个项目（共享其他所有内容，例如源代码）？有更快的方法吗？

谢谢你。

* * *

NetBeans IDE 7.2 (C++)
Linux OpenSuse 11.4 / 10.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:53:30.093

我个人每天都喜欢使用 CMake。我们有一个相对复杂的项目，其中子项目构建在不同的平台（Linux/Windows/Linux 嵌入式）上，并且不同的开发人员喜欢不同的 IDE。一切都适用于 CMake。因此，我确信您所描述的内容也很容易使用 CMake。

看看[cmake 和 netbeans 能玩得好吗？](https://stackoverflow.com/questions/6608569/can-cmake-and-netbeans-play-nice)了解更多信息。

# jquery - jquery 可调整大小的包含在表中

> ID：13517071
> 
> 赞同：1
> 
> 时间：2012-11-22T16:49:49.363
> 
> 标签：jquery, resizable, containment

我有一个表，其中包含一个我想调整大小的 Div。我需要知道如何为这个 div 设置容器元素。

我已经尝试通过在表格周围创建一个 div 来解决这个问题，作为一个容器，但是 resizable() 仍然不允许调整内容的大小。

有人可以告诉我如何制作一个工作容器吗？

我用我目前尝试过的一个例子创建了一个小提琴：http: [//jsfiddle.net/XTPZ8/](http://jsfiddle.net/XTPZ8/)

```
$(".resizable-div").resizable({
        handles:'e, w',
        containment:".containment-div"
    });

.containment-div {
    position: absolute;
    width: 303px;
    height: 200px;
    border: 1px solid red;
}

.resizable-div {
    position: absolute;
    width: 40px;
    height: 30px;
    border: 1px solid green;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:49:17.243

将句柄 e,w 更改为此

$(".resizable-div").resizable({ 句柄："n,s,ne,se,nw,sw", 遏制：".containment-div" });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:06:09.583

更改`containment`为`parent`

```
 $(".resizable-div").resizable({
        handles:'e, w',
        containment:"parent"
    }); 
```

演示 [http://jsfiddle.net/XTPZ8/1/](http://jsfiddle.net/XTPZ8/1/)

当您将其设置为表父级时，调整大小会溢出单元格，导致其扩展，不幸的是这是正常的表行为。

# sonarqube - 在一个多模块项目（一个在 C# 中，另一个在 JavaScript 中）上，Sonar runner 退出并出现空指针异常

> ID：13517073
> 
> 赞同：3
> 
> 时间：2012-11-22T16:50:02.963
> 
> 标签：sonarqube, sonar-runner

我正在尝试在声纳中配置一个多模块项目以覆盖我们应用程序的所有方面（主要是 C# 和 JavaScript 部分）

如果我单独在 C# 部分运行它（不使用多模块架构），它工作得很好。如果我运行不同的模块，它会中断。

我选择在不同模块之间拆分配置。（并将所有配置放在同一个文件中会产生相同的结果）

下面，3个配置。

主要的一个：

```
# Project identification
sonar.projectKey=XXXXX
sonar.projectVersion=XXXXX
sonar.projectName=XXXXXX

# Info required for Sonar 
sonar.sourceEncoding=UTF-8
sonar.sources=.
sonar.modules = csharp, javascript

# C#
csharp.sonar.projectBaseDir=path/to/slnFolder

# JS
javascript.sonar.projectBaseDir=path/to/js/files 
```

用于 C# 的那个

```
# C#
sonar.projectName=XXXX CS
sonar.language=cs

#Core C# Settings 
sonar.dotnet.visualstudio.solution.file=MyProject.sln
sonar.dotnet.excludeGeneratedCode=true
sonar.dotnet.version=3.5

#Gendarme
sonar.gendarme.mode=  
# Gallio 
sonar.gallio.mode= skip
# FXCop 
sonar.fxcop.mode=
#StyleCop 
sonar.stylecop.mode=
#NDeps
sonar.ndeps.mode=skip 
```

和 javascript 之一：

```
# JS
sonar.projectName=3DSaphi JS
sonar.language=js 
```

我最终遇到的异常（这似乎与 dotnet 模块有关）：

```
Exception in thread "main" org.sonar.runner.RunnerException: java.lang.NullPoint
erException
        at org.sonar.runner.Runner.delegateExecution(Runner.java:288)
        at org.sonar.runner.Runner.execute(Runner.java:151)
        at org.sonar.runner.Main.execute(Main.java:84)
        at org.sonar.runner.Main.main(Main.java:56)
Caused by: java.lang.NullPointerException
        at org.sonar.plugins.dotnet.api.sensor.AbstractRegularDotNetSensor.assem
bliesFound(AbstractRegularDotNetSensor.java:90)
        at org.sonar.plugins.dotnet.api.sensor.AbstractRegularDotNetSensor.shoul
dExecuteOnProject(AbstractRegularDotNetSensor.java:72)
        at org.sonar.plugins.dotnet.api.sensor.AbstractRuleBasedDotNetSensor.sho
uldExecuteOnProject(AbstractRuleBasedDotNetSensor.java:51)
        at org.sonar.api.batch.BatchExtensionDictionnary.shouldKeep(BatchExtensi
onDictionnary.java:109)
        at org.sonar.api.batch.BatchExtensionDictionnary.getFilteredExtensions(B
atchExtensionDictionnary.java:99)
        at org.sonar.api.batch.BatchExtensionDictionnary.select(BatchExtensionDi
ctionnary.java:57)
        at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:5
7)
        at org.sonar.batch.phases.Phases.execute(Phases.java:97)
        at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:12
8)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:114)
        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:109)
        at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:104)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.jav
a:121)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.Batch.execute(Batch.java:104)
        at org.sonar.runner.internal.batch.Launcher.executeBatch(Launcher.java:6
9)
        at org.sonar.runner.internal.batch.Launcher.execute(Launcher.java:61)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.sonar.runner.Runner.delegateExecution(Runner.java:285)
        ... 3 more 
```

所以我的问题是：

我想要做的甚至可能吗？如果是的话，知道我能做些什么来解决这个问题吗？

提前致谢。

# ios - iOS 上的谷歌语音识别

> ID：13517074
> 
> 赞同：4
> 
> 时间：2012-11-22T16:50:03.793
> 
> 标签：ios, speech-recognition

我想在我的 iOS 应用上使用 Google Voice Recognition / Speech API。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:00:06.260

我不认为你能做到这一点。但是您还有其他为 iOS 开发的语音识别 API，如下所示：

1.  [张开耳朵](http://www.politepix.com/openears/)
2.  [iSpeech](http://www.ispeech.org/)

# c# - ServiceStack IService<> 错误处理

> ID：13517075
> 
> 赞同：1
> 
> 时间：2012-11-22T16:50:04.450
> 
> 标签：c#, web-services, servicestack, nlog

我们已经成功实现了 ServiceStack IService<> 接口并让它与 iPhone 通信，但我们不确定实现异常处理和日志记录的最佳方式。

```
public class AddCarService : IService<AddCar> 
{

    public UnitOfWork UnitOfWork { get; set; }

    public object Execute(AddCar request)
    {
        try
        {
            PersonBo person;
            if (UnitOfWork.PersonService.ValidateSession(request.SessionGuid, out person))
            {
                var car = new CarBo
                {
                    PersonId = person.PersonId,
                    Name = request.Car.Name,
                    RegistrationNumber = request.Car.RegistrationNumber,
                    IsActive = true,
                    IsDeleted = false
                };
                UnitOfWork.CarService.Add(car);
                var cars = UnitOfWork.CarService.GetCarByPersonId(person.PersonId);
                var mobileCars = cars.Select(carBo => new Car { CarId = carBo.CarId, Name = carBo.Name, RegistrationNumber = carBo.RegistrationNumber }).ToList();
                return new GetCarResponse { Cars = mobileCars, Status = ResponseStatus.Ok };
            }
            return new GetCarResponse { Cars = null, Status = ResponseStatus.Unauthorised };
        }
        catch (Exception ex)
        {
            UnitOfWork.Logging.Error("AddCarService", ex);
            return new GetCarResponse { Cars = null, Status = ResponseStatus.Exception };
        }
    }
} 
```

添加 try/catch 会降低性能，因此我们想知道 ServiceStack 框架中是否内置了一个函数来支持我们试图实现的目标，并且仍然向 iPhone 返回格式良好的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:01:46.273

如果您从继承`ServiceBase<T>`而不是实现`IService<T>`，您将免费获得它（返回格式良好的响应），但是如果您查看[`ServiceBase<T>`class](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/ServiceBase.cs)，您会发现这是通过将代码包装在 try-catch 块中来完成的。

我不认为你会从 ServiceStack 中得到比这更多的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:56:38.647

如果您使用[ServiceStack 的 New API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)，您可以通过实现自己的 ServiceRunner 来处理异常。使用旧 API，您需要`HandleException()`在继承自`ServiceBase<T>`或的自定义基类中进行覆盖`RestServiceBase<T>`。

有关更多详细信息，请参阅此[先前的答案](https://stackoverflow.com/questions/13143502/catching-exceptions-with-servicestack)。

# jquery - jquery mobile select - 摆脱图标（1.2）

> ID：13517078
> 
> 赞同：0
> 
> 时间：2012-11-22T16:50:13.817
> 
> 标签：jquery, mobile

我无法摆脱 jquery mobile 选择菜单中的图标。我尝试使用前面问题中选择的 data-iconpos，但它似乎不起作用（参见 jsfiddle）。

```
<label for="select-choice-0" class="select">Shipping method:</label>
                <select name="select-choice-0" id="select-choice-0" data-iconpos="none">
                   <option value="standard">Standard: 7 day</option>
                   <option value="rush">Rush: 3 days</option>
                   <option value="express">Express: next day</option>
                   <option value="overnight">Overnight</option>
                </select>​ 
```

JS 小提琴：http: [//jsfiddle.net/ggSBu/](http://jsfiddle.net/ggSBu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:52:35.740

试试这个...

```
$(".ui-select .ui-icon").remove();​​​ 
```

这是您的小提琴的更新版本...

[http://jsfiddle.net/ggSBu/1/](http://jsfiddle.net/ggSBu/1/)

# python - 在python中求和一个csv列

> ID：13517080
> 
> 赞同：9
> 
> 时间：2012-11-22T16:50:18.570
> 
> 标签：python, csv, sum

我正在尝试对 csv 文件中的一列求和。该文件如下所示：

```
Date  Value
2012-11-20  12
2012-11-21  10
2012-11-22  3 
```

这可以在数百行的范围内。我需要将总价值（在本例中为 25）打印到终端上。到目前为止，我有一些代码，但它导致的数字比它应该总和要小得多。在对其进行故障排除时，我打印了总和，并意识到它实际上不是将 12 + 10 + 3 相加，而是将每列中的数字和总和为 1 + 2 + 1 + 0 + 3，这显然等于很多较小的总数。这是我的代码，如果有人可以提出建议会很棒！

```
with open("file.csv")) as fin:
  headerline = fin.next()
  total = 0
  for row in csv.reader(fin):
    print col # for troubleshooting
    for col in row[1]:
      total += int(col)
  print total 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T16:51:49.950

该`csv`模块会一一遍历您的行，然后无需遍历列。总和`int(row[1])`：

```
with open("file.csv") as fin:
    headerline = fin.next()
    total = 0
    for row in csv.reader(fin):
        total += int(row[1])
    print total 
```

您可以使用带有生成器表达式和`sum()`内置函数的快捷方式：

```
with open("file.csv") as fin:
    fin.next()
    total = sum(int(r[1]) for r in csv.reader(fin)) 
```

请注意，在 Python 中，字符串也是序列，因此当您这样做时，`for col in row[1]:`您将遍历 ; 的各个字符`row[1]`。所以对于你的第一行是`1`和`2`：

```
>>> for c in '123':
...     print repr(c)
...
'1'
'2'
'3' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-21T07:24:02.760

**您可以改用熊猫。**

```
import pandas as pd
df2=pd.read_csv('file.csv')
df2['Value'].sum() 
```

# assembly - 装配 leal 和 movl 的区别

> ID：13517083
> 
> 赞同：3
> 
> 时间：2012-11-22T16:50:37.493
> 
> 标签：assembly, x86, att

```
leal(%eax,%ecx,4), %edx 
```

正如我从我的计算机系统书籍中阅读的那样，如果假设 $eax 包含 x 值并且 %ecx 包含 y，那么上面的意思是，x+4y 放入 %edx。

那么如果是

```
movl(%eax,%ecx,4), %edx 
```

，那么上面的表情不就是同一个吗？

据我所知， leal 创建可以引用的地址，而不是像 movl 那样自己引用，但是

当我看到`leal(%eax,%ecx,4), %edx`将等于放入`x+4y`寄存器`edx`时，`t it mean that it 'referenced'`%eax `and`%ecx` 并提取值 x 和 y 用于计算？

*   不是“（）”表示“引用”吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T22:37:00.773

`LEA`将地址计算生成的有效地址加载到寄存器中。`MOV`将某些东西移动到某处，当使用 SIB 寻址作为源操作数时，它将地址计算生成的地址*处的任何内容移动到目标操作数中。*

所以：

```
leal (%eax,%ecx,4), %edx  ←  moves %eax+%ecx*4 into %edx
movl (%eax,%ecx,4), %edx  ←  moves whatever is at address %eax+%ecx*4 into %edx 
```

# ruby-on-rails - ruby on rails Heroku 迁移错误

> ID：13517084
> 
> 赞同：0
> 
> 时间：2012-11-22T16:50:39.373
> 
> 标签：ruby-on-rails, heroku

当我运行 $ heroku run rake db:migrate 时，我得到“多个迁移的名称为 CreateScreencasts”。

或者我得到：多次迁移的版本号为 20121121161626

有没有办法删除 Heroku 上的迁移？

（我的应用代码只有一个）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:21:49.020

如果您在 heroku 上迁移时遇到问题，请使用此

```
heroku run bash --app appname 
```

然后你在它自己的服务器上的终端中。你可以运行所有 rails rake 命令

例如，您可以这样做

```
rake db:migrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:39:48.753

这可能很有用，并且已经得到解答

[如何在heroku中清空数据库](https://stackoverflow.com/questions/4820549/how-to-empty-db-in-heroku)

基本上你会跑

要删除数据库，如果您使用的是 SHARED_DATABASE_URL：

```
heroku pg:reset DATABASE 
```

要重新创建没有任何内容的数据库：

```
heroku run rake db:migrate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:14:39.657

如果您的 git 存储库中只有一个迁移，那么您的 heroku 存储库中应该只有一个迁移。

这可能是因为您删除了仍然在 heroku 数据库中注册的旧迁移。你可以重置你的heroku数据库吗？

# objective-c - ARC 和后台调度队列的问题

> ID：13517086
> 
> 赞同：1
> 
> 时间：2012-11-22T16:51:03.807
> 
> 标签：objective-c, xcode4.5, observer-pattern, grand-central-dispatch, crash-dumps

自从我安装了最新的 10.8.2 操作系统并将 Xcode 升级到 4.5.2 之后，我开始遇到我编写的一个已经运行了很长时间的应用程序的问题。

该应用程序有一个类 (CalculateTimeFiles)，它有一个在后台队列上运行的方法，该队列构建一个 ivar NSMutableArray，它是一个字符串数组。该数组和状态计数器由第二个类 (RunResultWindow) 观察，该类从 NSMutableArray 中取出消息并将它们显示在窗口内的滚动文本视图框中。由于消息是由 CalculateTimeFiles 生成的，RunResultWindow 将它们拾取并放入文本视图中，以让用户了解 CalculateTimeFiles 目前正在做什么。

这个过程已经运行了很长时间，但我猜在这个新版本的 Xcode 中，ARC 现在可以用于调度队列（我认为这是一个新事物）。代码在 Xcode 中运行良好，但是当我将应用程序导出到 Xcode 之外并在那里运行时会崩溃。我发现在后台调度队列任务结束时发生了一些事情，导致整个事情发生了。我假设它在 Xcode 中工作，因为 Xcode 本身已经对 CalculateTimeFiles 中的 ivars 建立了一些可观察性，并防止某些东西消失。

我已经确定（我认为）ivar NSMutableArray 中的字符串没有在后台任务中定义，而是在我强制到主队列的单独方法中定义。

我能得到的任何帮助都会很棒。

以下是一些相关的代码片段：

这是来自主应用程序委托：

```
- (IBAction)runButtonPressed:(id)sender
{
......
......

 CalculateTimeFiles* tempCalculateTimeFiles = [[CalculateTimeFiles alloc] init];

RunResultWindowController = [[RunResultWindow alloc]       
           initWithWindowNibName:@"RunResultWindow"];
RunResultWindowController.localCalculateTimeFiles=tempCalculateTimeFiles;
[RunResultWindowController showWindow:self];

[self.outputfilestring1 becomeFirstResponder];

NSLog(@"before calculate time files");

[tempCalculateTimeFiles calculateOutputFiles:self];

NSLog(@"after calculate time files");

......
......
 } 
```

以下是 RunResultWindow 中正在使用的方法：

```
- (void)windowDidLoad
{
[super windowDidLoad];

NSWindow *wcWindow;
wcWindow = [self window];
[wcWindow makeKeyAndOrderFront:self];

NSString *teststring;
teststring = @"start output calculations";
[RunResultWindowTextView setString:teststring];
[RunResultWindowTextView display];

localCalculateTimeFiles.localRunResultWindow = self;

[localCalculateTimeFiles addObserver:self
       forKeyPath:@"arraystatuscounter"
          options:NSKeyValueObservingOptionNew
          context:NULL];

}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:
   (NSDictionary *)change context:(void *)context
{    

dispatch_queue_t mainQueue = dispatch_get_main_queue();
dispatch_async(mainQueue, ^{ 

NSInteger arrayCountFromDictionary;
NSString* localDisplayString;
NSString* localNewlinePlusDisplayString;
NSTextStorage *tempTextStorage;

tempTextStorage = [RunResultWindowTextView textStorage];

NSLog(@"in observeValueForKeyPath before display");

arrayCountFromDictionary = [[change objectForKey:NSKeyValueChangeNewKey] integerValue];

if (arrayCountFromDictionary != 0 ){
    arrayCountFromDictionary--;
    localDisplayString = [localCalculateTimeFiles.StatusStrings
        objectAtIndex:arrayCountFromDictionary];
    if (![localDisplayString compare: @"removeobservernow"]){
        NSLog(@"planned removeobserver logic");
        [localCalculateTimeFiles removeObserver:self forKeyPath:@"arraystatuscounter"];}
    if ([localDisplayString compare: @"removeobservernow"]){
        localNewlinePlusDisplayString = [@"\n" 
             stringByAppendingString:localDisplayString];
        [tempTextStorage beginEditing];
        [tempTextStorage replaceCharactersInRange:NSMakeRange([tempTextStorage length] -
              1, 0) withString:localNewlinePlusDisplayString];
        [tempTextStorage endEditing];
        NSLog(@"string before display %@",localDisplayString);
        [RunResultWindowTextView display];}};

NSLog(@"in observeValueForKeyPath after display");

});
} 
```

这是CalculateTimeFiles 的作用。请注意，我删除了 dispatch_release 方法调用，因为 ARC 现在涵盖了这一点：

```
@interface CalculateTimeFiles : NSObject {

NSMutableArray *StatusStrings;
NSInteger arraystatuscounter;
RunResultWindow *localRunResultWindow;

}

@property (nonatomic, retain) NSMutableArray *StatusStrings;
@property  NSInteger arraystatuscounter;
@property RunResultWindow *localRunResultWindow;

- (void) calculateOutputFiles:(id) parameterTimeGenieAppDelegate;
- (void) UpdateStatusTable:(NSString*) statusStringMessage;

@end

- (void) calculateOutputFiles:(TimeGenieAppDelegate*) parameterTimeGenieAppDelegate;
{

dispatch_queue_t backgroundQueue = dispatch_queue_create("Background Queue",NULL);
dispatch_async(backgroundQueue, ^{ 

.... does a bunch of stuff...

   [self UpdateStatusTable:@"stop here a long time"];
    [self UpdateStatusTable:@"new test string very first one"];
    [self UpdateStatusTable:@"===================="];
    [self UpdateStatusTable:@"new test string"];
    [self UpdateStatusTable:@"processing complete"];
    [self UpdateStatusTable:@"removeobservernow"];
    NSLog(@"just before dispatch release");

    // dispatch_release(backgroundQueue);

    [NSThread sleepForTimeInterval: 3.0];
    NSLog(@"just after dispatch release");
    });

NSLog(@"just after thread done");

}

- (void) UpdateStatusTable:(NSString*) statusStringMessage
{
dispatch_queue_t mainQueue = dispatch_get_main_queue();
dispatch_async(mainQueue, ^{

[StatusStrings addObject:[NSString stringWithString:statusStringMessage]];
[self setArraystatuscounter:[StatusStrings count]];

});

} 
```

我假设（这可能是一个坏主意）UpdateStatusTable 中的 addObject 将创建一个新字符串，该字符串在后台进程完成时不会消失。

我也有故障转储，但我真的不确定如何阅读它们，所以也许那里有一些有用的东西，但我不知道。对我来说唯一有意义的部分是：

```
Crashed Thread:  2  Dispatch queue: com.apple.root.default-overcommit-priority

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: EXC_I386_GPFLT

Thread 2 Crashed:: Dispatch queue: com.apple.root.default-overcommit-priority
0   libobjc.A.dylib                 0x00007fff8ea3bf5e objc_release + 14
1   libobjc.A.dylib                 0x00007fff8ea3b230 (anonymous
    namespace)::AutoreleasePoolPage::pop(void*) + 464
2   libdispatch.dylib               0x00007fff93eb2264 _dispatch_worker_thread2 + 410
3   libsystem_c.dylib               0x00007fff8e0b4cab _pthread_wqthread + 404
4   libsystem_c.dylib               0x00007fff8e09f171 start_wqthread + 13 
```

同样，我能得到的任何帮助都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:34:17.537

Arc 不会释放 GCD 对象，需要在块结束时自己释放。请参阅下面的我的编辑；

```
- (void) calculateOutputFiles:(TimeGenieAppDelegate*) parameterTimeGenieAppDelegate;
{

dispatch_queue_t backgroundQueue = dispatch_queue_create("Background Queue",NULL);
dispatch_async(backgroundQueue, ^{ 

.... does a bunch of stuff...

   [self UpdateStatusTable:@"stop here a long time"];
    [self UpdateStatusTable:@"new test string very first one"];
    [self UpdateStatusTable:@"===================="];
    [self UpdateStatusTable:@"new test string"];
    [self UpdateStatusTable:@"processing complete"];
    [self UpdateStatusTable:@"removeobservernow"];
    NSLog(@"just before dispatch release");
    [NSThread sleepForTimeInterval: 3.0];
    NSLog(@"just after dispatch release");
    });
dispatch_release(backgroundQueue); // dispatch_release should be here
NSLog(@"just after thread done");

} 
```

希望一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:54:31.813

下载了 Xcode 4.6 的测试版本并解决了问题。那是令人沮丧的 6 周。

问题实际上是方法中的一个临时对象，该方法用于临时旧 NSMutableArray 中对象的地址。该对象在该方法的“主”例程中声明，然后在循环中重复重用，该循环将对象数组中项目的地址洗牌到临时对象，以便可以使用它。当循环结束时，程序在 xcode 之外爆炸，因为（我认为）xcode 本身已经建立了对临时对象的可观察性，并在循环（具有自己的作用域范围）被释放时阻止它被释放。SOOOOOO ...如果您遇到仅在 Xcode 之外发生的奇怪释放问题，请考虑 4.5.2 可能是您的问题。

# javascript - 通过分析这些字符串中的日期详细信息对字符串数组进行排序

> ID：13517089
> 
> 赞同：0
> 
> 时间：2012-11-22T16:51:14.717
> 
> 标签：javascript, sorting

我对我现在正在从事的项目有一个要求，这对我来说有点棘手。

基本上我必须根据`Text`这些项目的属性对一组项目进行排序：

这是我的物品：

```
var answers = [],
    answer1 = { Id: 1, Text: '3-4 weeks ago' },
    answer2 = { Id: 2, Text: '1-2 weeks ago' },
    answer3 = { Id: 3, Text: '7-8 weeks ago' },
    answer4 = { Id: 4, Text: '5-6 weeks ago' },
    answer5 = { Id: 5, Text: '1-2 days ago' },
    answer6 = { Id: 6, Text: 'More than 1 month ago' };

answers.push(answer1);
answers.push(answer2);
answers.push(answer3);
answers.push(answer4);
answers.push(answer5);
answers.push(answer6); 
```

我需要分析`Text`每个项目的属性，以便在排序后，数组如下所示：

```
answers[0] = { Id: 6, Text: 'More than 1 month ago' }
answers[1] = { Id: 3, Text: '7-8 weeks ago' }
answers[2] = { Id: 4, Text: '5-6 weeks ago' }
answers[3] = { Id: 1, Text: '3-4 weeks ago' }
answers[4] = { Id: 2, Text: '1-2 weeks ago' }
answers[5] = { Id: 5, Text: '1-2 days ago' } 
```

逻辑是，日期越远，它的优先级越高，所以它应该出现在数组的最前面。因此，“1-2 天”的优先级低于“7-8 周”。

所以逻辑是，我需要提取数值，然后是单位（例如天、周），并根据这些细节以某种方式对数组进行排序。

老实说，我发现很难提出解决方案，我将不胜感激。

编辑：关于我正在使用的数据，它是从网络服务返回的，我没有能力更改文本。所以我必须按原样使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:00:11.717

您可以使用自定义排序函数来解析文本中的值并按[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)所述对它们进行数字比较。

```
var answers = [
    { Id: 1, Text: '3-4 weeks ago' },
    { Id: 2, Text: '1-2 weeks ago' },
    { Id: 3, Text: '7-8 weeks ago' },
    { Id: 4, Text: '5-6 weeks ago' },
    { Id: 5, Text: '1-2 days ago' },
    { Id: 6, Text: 'More than 1 month ago' }
];

answers.sort(function(a, b) {
    function getVal(item) {
        var val;
        // find first number
        var match = item.Text.match(/\d+/);
        if (match) {
            val = parseInt(match[0], 10);
        } else {
            val = 10000;   // set to very high number
        }
        if (item.Text.indexOf("More than") !== -1) {
            ++val;
        }
        if (item.Text.indexOf("week") !== -1) {
            val *= 7;
        } else if (item.Text.indexOf("month") !== -1) {
            val *= 30;
        }
        return(val);
    }
    return(getVal(b) - getVal(a));
}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/cf3D7/](http://jsfiddle.net/jfriend00/cf3D7/)

您显然可以微调该`getVal()`函数以支持您想要的任何解析逻辑。

如果您的数组很大，您可以通过预先计算排序索引并将其存储在每个对象中来使其性能更好，这样自定义排序函数只需直接比较两个数字，而不是每次都重新计算。但是，少于 100 个项目的数组可能无关紧要。

此外，还不清楚您要如何对“1 个月前”和“7-8 周”进行排序。我当前的算法将“超过 1 个月前”视为 1 个月，但如果您有特定的规则，您可以调整解析逻辑。一旦有了自定义排序功能，排序逻辑的关键就在于`getVal()`函数的实现，您可以对其进行调整以支持您想要支持的任何语法。

这是一个预先计算 sortKey 的版本，因此对大型数组执行得更好：

```
(function() {
    function getVal(item) {
        var val;
        // find first number
        var match = item.Text.match(/\d+/);
        if (match) {
            val = parseInt(match[0], 10);
        } else {
            val = 10000;   // set to very high number
        }
        if (item.Text.indexOf("More than") !== -1) {
            ++val;
        }
        if (item.Text.indexOf("week") !== -1) {
            val *= 7;
        } else if (item.Text.indexOf("month") !== -1) {
            val *= 30;
        }
        return(val);
    }

    for (var i = 0, len = answers.length; i < len; i++) {
        answers[i].sortKey = getVal(answers[i]);
    }
    answers.sort(function(a, b) {
        return(b.sortKey - a.sortKey);
    });
})() 
```

PS 请注意我在 jsFiddle 中使用的更有效的数组声明语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:12:42.067

在我看来，一个好方法，使用 indexOf() 方法并在数组中的每个元素中搜索单词，如月、日、周等。然后使用 indexOf 搜索数字。要提取文本，您可以使用子字符串。例如，对于字符串 '1-2 周前'，你会说 str.substring(0, indexOf '-') 所以这会得到从第一个字符到破折号的所有内容。所以你会提取他的第一个数字，即使它是 3 或 4 位数字。（您可能还抓住了“-”字符，所以它可能必须是 indexOf('-') - 1 .. 研究一下。）

一个很好的方法是在数组中搜索最大的时间单位。查找带有“年”的任何内容，如果没有找到，请搜索月份等。然后有一个临时数组并复制所有包含您当前正在寻找的时间单位。因此，对于您的示例，您将搜索年份，没有找到，搜索月份，找到 1 个包含单词 month(s) 的元素，然后将其移动到 temp 数组中。然后您将分析临时数组中的所有元素并找到具有最大数字的元素。所以在你的例子中你只有一个，但是说​​你的答案看起来像

```
answer1 = { Id: 1, Text: '3-4 weeks ago' },
answer2 = { Id: 2, Text: '1-2 weeks ago' },
answer3 = { Id: 3, Text: '7-8 weeks ago' },
answer4 = { Id: 4, Text: '6 months ago' },
answer5 = { Id: 5, Text: '5-6 weeks ago' },
answer6 = { Id: 6, Text: '1-2 days ago' },
answer7 = { Id: 7, Text: ' 1 month ago' };
answer8 = { Id: 8, Text: ' 3 months ago' }; 
```

那么您将拥有 3 个以月份为单位的元素，您将查看所有 3 个元素并根据数字对它们进行排序，因此 6 个月、3 个月、1 个月。然后，要么是排序的第三个和最后一个数组，要么只是重新排列主数组。我认为一个新的“排序”数组会更好。因此，您可以将这 3 个以月份为单位的元素放入新的排序数组中。

然后你会去几个星期，你会找到有周数的 4 个元素，将它们移动到临时数组，分析其中的数字，按大小对它们进行排序，然后将它们粘贴到排序数组中，然后移动到几天ETC..

无论如何，htp

# python - 如果 post_save 处理程序中发生异常，是否可以提交实例？

> ID：13517093
> 
> 赞同：4
> 
> 时间：2012-11-22T16:51:37.813
> 
> 标签：python, django, django-signals

我有一个`post_save`处理程序，它将附加记录插入到数据库中，引用刚刚创建或更新的实例。但是，插入附加记录时可能会发生错误（可能违反约束）。

如果处理程序中发生异常`post_save`，是否仍有可能提交初始实例？

答案可能取决于以下子问题：

*   Django 的自动提交模式是在`post_save`信号之前还是之后提交？
*   如果发生错误，Django 是否会尝试使用嵌套事务来回滚正在保存的实例`post_save`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:12:44.367

根据文档，如果您正在使用`autocommit`对初始实例的更改，则将`.save()`在任何`post_save`信号处理程序之前提交。中的异常`post_save`不会回滚对初始实例的更改。

您可以通过查看`save_base`in的来源来确认这一点`django/db/models/base.py`。自动提交将发生[在第 555 行](https://github.com/django/django/blob/1.4.2/django/db/models/base.py#L555)（在 1.4.2 中），但[直到第 564 行](https://github.com/django/django/blob/1.4.2/django/db/models/base.py#L564)`post_save`才发送信号。您还可以看到 Django 不会尝试在.`.save()`

如果您正在使用`django.middleware.transaction.TransactionMiddleware`并且没有使用`autocommit`装饰器覆盖其行为，则异常期间`post_save`将回滚整个事务，包括对初始实例的更改。

# objective-c - 如何以相反的方式将 int 存储到 nsdata？

> ID：13517094
> 
> 赞同：0
> 
> 时间：2012-11-22T16:51:39.360
> 
> 标签：objective-c, int, nsdata, hexdump

我创建随机文件：

```
-(NSData*)generateRandomNSDataWithNumberOfRecords:(int)length {

NSMutableData* theData = [[NSMutableData alloc] init];
int numberOfElements;

for (int i=0; i<length; i++) {
    numberOfElements = arc4random() % 15;
    if (numberOfElements == 0)
        numberOfElements = 1;

    NSData *tempData = [NSData dataWithBytes: &numberOfElements length: sizeof(numberOfElements)];
    [theData appendData:tempData];
    for(int j = 0 ; j < numberOfElements; j++)
    {

        int randomBits = arc4random()%255; // 0 to 255
        [theData appendData:[NSData dataWithBytes: &randomBits length: sizeof(randomBits)]];
    }

}
return theData; 
```

}

当 hexdumping 时，我可以看到：

hexdump -C Tape1

```
00000000  04 00 00 00 cd 00 00 00  14 00 00 00 65 00 00 00  |............e...|
00000010  16 00 00 00 0a 00 00 00  d2 00 00 00 c1 00 00 00  |................|
00000020  02 00 00 00 f6 00 00 00  e4 00 00 00 ce 00 00 00  |................| 
```

第一个应该是 4（通过调试器签出）。但它似乎以相反的方式写成。

是否有一个简单的解决方案来告诉 NSData “正确”存储数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:05:50.913

这是字节序问题。

我只需要：`randomBits = CFSwapInt32HostToBig(randomBits);`

# microsoft-translator - 必应翻译 API 集成

> ID：13517097
> 
> 赞同：5
> 
> 时间：2012-11-22T16:51:45.817
> 
> 标签：microsoft-translator

这是我实现的代码，这是我的 Bing 应用程序详细信息

```
client ID =  pacific__tycoon, 
client secret == qCtCnigQ1afu8qi705ldOQ3IGy0rabMgHvVL+GU5Xww=
Name == pacificty--coon 
```

我想要一个像[http://bunkerhill.com/](http://bunkerhill.com/)这样的翻译器，因为它也可以在我的网站上运行在 iphone 中。

还有其他解决方案吗？

```
 <script src="jquery-mobile/jquery.translator-1.1.0.min.js"></script>

    <script type="text/javascript" >
    jQuery(document).ready(function ($) {

     $.ajax(
                {
                  url: "Default.aspx/GetBingAppId",
                  type: 'post',
                  dataType: "json",
                  data: "{}",
                  contentType: "application/json; charset=utf-8",
                  success: function (bingid) {
                    return $("p,h1,h2,span,li,a,.xlatext,.clients").translator({ appID: bingid.d, languageListNode: $('#languages').get(0), callback: xlatDone });
                  },
                  error: function (x, err, desc) {
                    alert('madharchodError getting Bing ID: ' + err + ' - ' + desc);
                  }
                }
              );

    });
    function xlatDone(charsXlated) {
      if (charsXlated === 0) return;
      $.ajax(
        {
          type: 'POST',
          url: 'Default.aspx/SaveCharactersTranslated',
          contentType: "application/json; charset=utf-8",
          data: "{charsXlated:" + charsXlated + "}"
        }
      );
    }

    </script>

 <div id="languages" style="overflow:hidden; font-size:smaller;" title="Language Translation"></div> 
```

# ruby - ruby 中的 /\p{Alpha}/i 和 /\p{L}/i 有什么区别？

> ID：13517100
> 
> 赞同：8
> 
> 时间：2012-11-22T16:51:52.603
> 
> 标签：ruby, regex

我正在尝试在 ruby​​ 中构建一个正则表达式以匹配 UTF-8 中的 alpha 字符`ñíóúü`等。我知道`/\p{Alpha}/i`它也可以工作，`/\p{L}/i`但有什么区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T17:10:13.177

它们似乎是等价的。（**编辑：**有时，请参阅此答案的结尾）

似乎 Ruby `\p{Alpha}`从 1.9 版开始就支持了。在 POSIX`\p{Alpha}`中等于`\p{L&}`（对于支持 Unicode 的正则表达式；[请参见此处](http://www.regular-expressions.info/posixbrackets.html)）。这匹配具有大小写变体的所有字符（[请参见此处](http://www.regular-expressions.info/unicode.html)）。不匹配单写字母（而它们将匹配`\p{L}`.

这对 Ruby 来说似乎不是真的（我随机选择了一个阿拉伯字符，因为阿拉伯语有一个单写字母）：

*   [`\p{L}`（任何字母）匹配。](http://www.rubular.com/r/IGWHWnzhgX)
*   [区分大小写的类`\p{Lu}`, `\p{Ll}`,`\p{Lt}`不匹配。](http://www.rubular.com/r/Gr8HE07Y3p)正如预期的那样。
*   [`p{L&}`不匹配。](http://www.rubular.com/r/2slOJAxPKc)正如预期的那样。
*   [`\p{Alpha}`火柴。](http://www.rubular.com/r/fv6ucYm6l9)

这似乎是一个很好的迹象，`\p{Alpha}`它只是`\p{L}`Ruby 中的一个别名。在 Rubular 上，您还可以看到`\p{Alpha}`Ruby 1.8.7 中没有该功能。

请注意，`i`修饰符在任何情况下都无关紧要，因为两者都`\p{Alpha}`匹配`\p{L}`大写和小写字符。

**编辑：**

哈哈，有区别！我刚刚找到[了这个关于 Ruby 的新正则表达式引擎的 PDF](http://media.pragprog.com/titles/ruby3/ruby3_extract_regular_expressions.pdf)（如上所述，从 Ruby 1.9 开始使用）。无论编码如何都可用（如果没有 Unicode 支持，`\p{Alpha}`可能只会匹配），而具体是 Unicode 属性。这意味着，其行为与 POSIX 正则表达式完全相同，不同之处在于这里对应于，但在 POSIX 中它对应于。`[A-Za-z]``\p{L}``\p{Alpha}``\p{L}``\p{L&}`

# python - 使用 PIL 的模糊图像上的图像边缘无法正确模糊

> ID：13517101
> 
> 赞同：0
> 
> 时间：2012-11-22T16:51:55.130
> 
> 标签：python, django, python-imaging-library

使用 Image.filter(ImageFilter.BLUR) 方法模糊图像时出现问题。

我的代码：

```
#Open the image from the ImageField
fp_big = open(self.image_big.path, 'rb')
im_big = Image.open(StringIO(fp_big.read()))

#Resize the image
im_big.thumbnail(size_big, Image.ANTIALIAS)

#Blur the image
im_big = im_big.convert('RGB')
for i in range(10):
    im_big = im_big.filter(ImageFilter.BLUR)

#Save the images
temp_handle_big = StringIO()
im_big.save(temp_handle_big, PIL_TYPE)
temp_handle_big.seek(0)

#Save image to a SimpleUploadedFile which can be saved into ImageField
suf_big = SimpleUploadedFile('%s' % os.path.split(self.image_big.name)[-1], temp_handle_big.read(), content_type=IMG_TYPE)

#Delete old images and close fps
fp_big.close()
os.remove(original_path_big) 
```

虽然此代码工作正常，但结果部分错误：

![调整大小的图像](../Images/4989c1f9d0fdbe4bad03a201ef4db3cc.png) ![图像模糊](../Images/24b1ec29925d9274b35faebf7d46dacc.png)

如您所见，图像的边缘没有正确模糊。有谁知道为什么会这样？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:40:20.507

这似乎是过滤库中的一个错误。许多过滤器使用 NxN 矩阵，该矩阵基本上是“任何像素都是自身的组合加上周围像素的各种组合”

但是，当您到达图像的边缘时该怎么办？看起来 PIL 根本没有在那里应用过滤器，因为矩阵会与边缘重叠并给你无效的结果。如果您只进行了一次迭代，可能不会引人注意，但在 10 次迭代中......哇！

我的建议是通过复制相邻的像素颜色，应用滤镜，然后将它们裁剪回来，将那一侧的图像边缘扩展一两个像素。

或者，使缩略图比需要的大，过滤，然后裁剪。这样你会丢失一些数据，但它是一个更简单的解决方案。

# entity-framework - 在 EF5 中使用级联规则删除父实体

> ID：13517102
> 
> 赞同：1
> 
> 时间：2012-11-22T16:51:58.930
> 
> 标签：entity-framework

我正在创建一个代码，我想在其中使用级联删除父对象及其所有子对象，以减少正在执行的删除操作的数量。

所以我有两个这样的实体

```
public class Parent
{
    public long ParentId { get; set; }
    public string ParentName { get; set; }

    public virtual ICollection<Child> Children { get; set; }
} 
```

子实体看起来像

```
public class Child 
{
    public long ChildId { get; set; }
    public long? ParentId { get; set; }
    public string ChildName { get; set; }
} 
```

我创建了`TypeConfiguration`为了使用级联删除

```
public class ParentTypeConfiguration : EntityTypeConfiguration<Parent>
{
    public ParentTypeConfiguration()
    {
        this.ToTable("Parents");
        this.HasKey(c => c.ParentId);

        this.HasMany(c => c.Children)
            .WithOptional()
            .HasForeignKey(p => p.ParentId)
            .WillCascadeOnDelete(true);
    }
} 
```

然后我准备好了。到目前为止，一切都很好。

我创建了一个如下所示的测试，以查看我做的一切都很好......

```
[TestMethod]
public void RemoveParentEntity()
{
      var parent = new Parent() { ParentName = "name" };
      parent.Children = new Collection<Child>();
      parent.Children.Add(new Child() { ChildName = "child1" });
      parent.Children.Add(new Child() { ChildName = "child2" });

      var unitOfWork = new MyUnitOfWork();
      var repo = new ParentRepository(unitOfWork);            
      var count = repo.GetAll().Count();

      repo.Add(parent);
      repo.UnitOfWork.Commit();

      //unitOfWork = new MyUnitOfWork();
      //repo = new ParentRepository(unitOfWork);

      repo.Remove(cadenaAprobacion);
      repo.UnitOfWork.Commit();

      var result = repo.GetAll().Count();

      Assert.AreEqual(count, result);
} 
```

这个测试失败了，说：

> *操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。*

所以我用谷歌搜索/搜索了这个，我看到我应该让我的依赖属性成为可选的，因为子对象正在更新。所以我在实体中做到了，`TypeConfiguration`并且我得到了一个`DbUpdateException`典型的错误，我无法更新子对象等。

所以现在我很困惑。为了修复测试，我知道我可以做两件事：

1.  在移除父对象之前移除子对象。这将在数​​据库中进行多项操作，这不是我想要的。

2.  创建一个新的上下文，获取父实体并移除该实体。这将工作得很好，这些是之前在测试中注释的行。

我的问题是，当您在上下文中有子集合并且想要在 EF 中使用级联删除选项时，正确的做法是什么？如何在不对数据库进行操作的情况下从上下文中删除对象？

我确定我有一个概念问题，我希望有人指出它。所以我从错误中吸取教训:)

# debugging - pydev断点未命中

> ID：13517103
> 
> 赞同：3
> 
> 时间：2012-11-22T16:52:03.167
> 
> 标签：debugging, pydev, breakpoints

我有这样的场景，我的 python 应用程序在 linux 机器上托管的 winXP 虚拟机中运行。linux 机器使用 pydevd 运行 Eclipse。

linux机器上的路径是/home//project winXP机器上的路径是一个映射的F：驱动器指向/home//project

按照说明进行操作后，我可以远程调试、单步执行方法等。但是，当我设置断点时，我得到：

pydev 调试器：警告：尝试向不存在的文件添加断点：f:\home\\project\.py（将无效）

不知何故，似乎将 f: 驱动器附加到了 unix 路径？

# macos - 用于从视频文件中提取音频的 Mac shell 脚本

> ID：13517108
> 
> 赞同：2
> 
> 时间：2012-11-22T16:52:19.913
> 
> 标签：macos, shell

我正在尝试编写一个 shell 脚本，它将从文件夹中的所有电影文件中提取音频。

**音频提取器.sh**

```
for f in *; do
    if  [ "$f" != "audio_extracter.sh" ]; then
        /usr/bin/avconvert --source "$f" --output */Converted/"$f" --audioTrack -af aac
        echo "$f converted"
    else
        echo "problems"
        exit 1
    fi
done 
```

它在吐回来`avconvert is a command line application that will transcode a source or group of sources to create a destination file output...`

此外，如果可能的话，脚本应该找出视频中音频的格式并将其提取出来，而不是将其转换为其他不同的格式（目前我认为我正在强制它转换为 AAC）。

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:56:27.977

`-acodec copy`提取音频而不在 ffmpeg 中重新编码：

```
for f in *.mkv; do ffmpeg -i "$f" -acodec copy "${f%mkv}aac"; done 
```

您可以使用 . 查看音频流的格式`ffmpeg -i input.mkv`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:44:34.990

如果你可以使用 mencoder，那么试试这个。这个对我有用。（mkv、mp4、flv、rmvb 等视频格式都可以）

```
mencoder -oac mp3lame -ovc copy -of video_file -o audio_file.mp3 
```

# android - 当 onClick 已经在 XML 中时，单击长实现？

> ID：13517109
> 
> 赞同：0
> 
> 时间：2012-11-22T16:52:23.960
> 
> 标签：android, android-layout

我实际上已经阅读了几个答案，但它们与我实现点击响应的简单方式如此不同，我想知道是否有一种方法可以在我正在做的事情中添加一些简单的东西来创建 onLongClick 响应。

基本上，我所有的 XML 代码都是用这样的语句编写的：

```
android:onClick="onSync" 
```

然后我的Java有：

```
 public void onSync(View v) {
            ...
        Toast toast3=Toast.makeText(this, "Sync was pressed",Toast.LENGTH_SHORT);
        toast3.show();
    } 
```

我想做的是有一个不同的功能，当按钮被长按时调用。现在，长按会导致与短按相同的动作。

具体来说，我想知道如何与这样的例程交互：

```
 public void onSyncLong(View v) {
            ...
        Toast toast3=Toast.makeText(this, "Long Sync was pressed",Toast.LENGTH_SHORT);
        toast3.show();
    } 
```

我当然会感谢任何关于这个问题的帮助。如果回复告诉我在 XML 和 Jave 中做什么，那就太好了。非常感谢。

- - - - - - - - - - - - - - 更新 - - - - - - - - - - - ---

这是我的 onCreate 代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.start_meters);

    textLL = (TextView)findViewById(R.id.textLL);
    textTimer = (TextView)findViewById(R.id.textTimer);
    textTimeToLine = (TextView)findViewById(R.id.textTimeToLine);

    Button button = (Button) findViewById(R.id.button_sync);

    button.setOnLongClickListener(new OnLongClickListener() { 
            @Override
            public boolean onLongClick(View v) {

                // TODO Auto-generated method stub
                return true;
            }
        });

} 
```

这是按钮 XML 段

```
 <Button
    android:id="@+id/buttonSync"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Gun/Sync" 
    android:onClick="onSync"
    android:textSize="@dimen/font_small"
    android:background="@drawable/round_button"
    android:padding="3sp"
    android:longClickable="true"/> 
```

------------最终更新----------------

这是工作代码：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.start_meters);

    textLL = (TextView)findViewById(R.id.textLL);
    textTimer = (TextView)findViewById(R.id.textTimer);
    textTimeToLine = (TextView)findViewById(R.id.textTimeToLine);

    Button button = (Button) findViewById(R.id.buttonSync);

    button.setOnLongClickListener(new OnLongClickListener() { 
            @Override
            public boolean onLongClick(View v) {

                StartLine2.startTime = pTime + 1000*60*5;
                return true;
            }
        });

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T16:55:13.850

您不能通过 XML 做到这一点。相反，使用：

```
Button button = (Button) findViewById(R.id.<your_id>);

button.setOnLongClickListener(new OnLongClickListener() { 
        @Override
        public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            return true;
        }
    }); 
```

确保此代码在`setContentView()`被调用之后出现。

此外，请确保该`android:longClickable`属性设置为 true。

在您的 XML 中，ID 设置为`buttonSync`，而在您使用的 Java 代码中`button_sync`。这就是你的原因`NullPointerException`，因为你没有一个名为 的按钮`button_sync`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T07:21:19.607

```
public class GameScoreFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        Log.v("TTT", "GameScoreFragment.OnCreateView()");

        View viewScore = inflater.inflate(R.layout.gamescorelayout, container, false);

        // set onLongClick listeners for both buttons
        // when player long presses any of the two buttons, scores are reset

        Button tempButton = (Button) viewScore.findViewById(R.id.id_button_pone_score);
        tempButton.setOnLongClickListener( mLongListener );

        tempButton = (Button) viewScore.findViewById(R.id.id_button_ptwo_score);
        tempButton.setOnLongClickListener( mLongListener );

        return viewScore;
    }

    // define a variable mLongListener to hold the listener code
    // and then use mLongListener to set the listener
    // if we don't define the variable, then we will have to write the listener code at two places (once for each button)

    private View.OnLongClickListener mLongListener = new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View pView) {
            //reset player scores
            GameFragment tempGameFragment = (GameFragment) getFragmentManager().findFragmentById(R.id.id_gamefragment);
            if (tempGameFragment != null)
                tempGameFragment.resetPlayersScore(false);

            return true;
        }
    };
} 
```

# java - 在 url 上读取 http 文件

> ID：13517111
> 
> 赞同：1
> 
> 时间：2012-11-22T16:52:39.017
> 
> 标签：java, xml, http, url

我正在尝试读取 http url 上的 xml 文件。“来自服务器的文件意外结束”不断出现。该页面受密码保护，我想知道我是否正确提供了我的 url 身份验证详细信息。

我尝试使用不受保护的页面，并且可以正确阅读它们。这是我的代码：

```
URL url = new URL("http://username:pass@0.0.0.0:0000/test.xml");
URLConnection yc = url.openConnection();
BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
String inputLine;
while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);
in.close(); 
```

# haskell - 实现一个函数来计算列表中每个元素的频率

> ID：13517114
> 
> 赞同：11
> 
> 时间：2012-11-22T16:53:16.017
> 
> 标签：haskell, pointfree

我尝试编写一个程序来计算列表中每个元素的频率。

```
 In: "aabbcabb"
    Out: [("a",3),("b",4),("c",1)] 
```

您可以在以下链接中查看我的代码： http: [//codepad.org/nyIECIT2](http://codepad.org/nyIECIT2) 在此代码中，唯一函数的输出将是这样的

```
 In: "aabbcabb"
     Out: "abc" 
```

使用 unique 的输出，我们将计算目标列表的频率。您还可以在此处查看代码：

```
 frequencyOfElt xs=ans
       where ans=countElt(unique xs) xs
          unique []=[]
      unique xs=(head xs):(unique (filter((/=)(head xs))xs))
      countElt ref target=ans'
             where ans'=zip ref lengths
            lengths=map length $ zipWith($)(map[(=='a'),(==',b'),(==',c')](filter.(==))ref)(repeat target)

    Error:Syntax error in input (unexpected symbol "unique") 
```

但是在 ghci 6.13 中也出现了其他类型的错误

很少有人问我使用 [(=='a'),(==',b'),(==',c')] 的目的是什么。我的期望：如果 ref="abc" 和 target="aabbaacc" 那么

```
 zipWith($) (map filter ref)(repeat target) 
```

将显示 ["aaaa","bb","cc"] 然后我可以使用地图长度来获取频率这里根据我使用的参考过滤列表 [(=='a'),(==' ,b'),(==',c')]

我假设一些逻辑错误在于 [(=='a'),(==',b'),(==',c')] 这里..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T17:18:03.260

您没有说是否要自己编写它，或者是否可以从一些标准函数组合它。

```
import Data.List

g s = map (\x -> ([head x], length x)) . group . sort $ s

-- g = map (head &&& length) . group . sort     -- without the [...] 
```

是标准的快速n脏编码方式。

* * *

好的，所以您最初的想法是**编写无点样式**（[某些曲调](https://en.wikipedia.org/wiki/Gangnam_Style)在我脑海中播放...）：

```
frequencyOfElt :: (Eq a) => [a] -> [(a,Int)]
frequencyOfElt xs = countElt (unique xs) xs     -- change the result type
  where 
    unique [] = []
    unique (x:xs) = x : unique (filter (/= x) xs)  

    countElt ref target =   -- Code it Point-Free Style  (your original idea)
      zip 
        ref $               -- your original type would need (map (:[]) ref) here
        map length $
          zipWith ($)       -- ((filter . (==)) c) === (filter (== c))
            (zipWith ($) (repeat (filter . (==))) ref)  
            (repeat target) 
```

我已将此处的类型更改为更合理的`[a] -> [(a,Int)]`btw。注意

```
zipWith ($) fs (repeat z) === map ($ z) fs
zipWith ($) (repeat f) zs === map (f $) zs === map f zs 
```

因此代码简化为

```
 countElt ref target =  
      zip 
        ref $              
        map length $
          map ($ target)      
            (zipWith ($) (repeat (filter . (==))) ref) 
```

接着

```
 countElt ref target =  
      zip 
        ref $              
        map length $
          map ($ target) $
            map (filter . (==)) ref 
```

但是`map f $ map g xs === map (f.g) xs`，所以

```
 countElt ref target =  
      zip 
        ref $              
        map (length . ($ target) . filter . (==)) ref      -- (1) 
```

用列表理解写的更清晰（根据我的口味），

```
 countElt ref target =  
        [ (c, (length . ($ target) . filter . (==)) c) | c <- ref] 
     == [ (c,  length ( ($ target) ( filter (== c))))  | c <- ref]     
     == [ (c,  length $ filter (== c) target)          | c <- ref] 
```

这给了我们一个想法，将 (1) 进一步重写为

```
 countElt ref target =  
      zip <*> map (length . (`filter` target) . (==)) $ ref 
```

但是这种对无点代码的痴迷在这里变得毫无意义。

* * *

因此，回到*可读的*列表推导，使用`nub`等效于您的标准函数`unique`，您的想法变成

```
import Data.List

frequencyOfElt xs = [ (c, length $ filter (== c) xs) | c <- nub xs] 
```

这个算法实际上是二次的（`~ n^2`），所以它比上面的第一个版本更糟糕，`sort`即以线性（`~ n log(n)`）为主导。

* * *

这段代码虽然可以通过等效转换原则进一步操作：

```
 = [ (c, length . filter (== c) $ sort xs) | c <- nub xs] 
```

...因为在列表中搜索与在列表中搜索相同，已排序。在这里做更多的工作——它会得到回报吗？

```
 = [ (c, length . filter (== c) $ sort xs) | (c:_) <- group $ sort xs] 
```

... 正确的？但是现在，`group`已经将它们分组了`(==)`，所以不需要`filter`调用重复已经完成的工作`group`：

```
 = [ (c, length . get c . group $ sort xs) | (c:_) <- group $ sort xs]
            where get c gs = fromJust . find ((== c).head) $ gs

  = [ (c, length g) | g@(c:_) <- group $ sort xs]

  = [ (head g, length g) | g <- group (sort xs)]

  = (map (head &&& length) . group . sort) xs 
```

不是吗？在这里，与本文开头的线性算法相同，实际上是通过分解隐藏的常见计算从*您的代码中**派生*出来的，使它们可用于重用和代码简化。

 ** * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T21:19:09.517

使用[multiset-0.1](http://hackage.haskell.org/packages/archive/multiset/0.1/doc/html/Data-MultiSet.html#10)：

```
import Data.Multiset

freq = toOccurList . fromList 
```*

# c - 有一个值的#define 替换列表，如何将值解析为标识符的字符串？

> ID：13517118
> 
> 赞同：3
> 
> 时间：2012-11-22T16:53:39.650
> 
> 标签：c, c-preprocessor

在调整某些给定接口时，我遇到了扩展头文件使用的问题，其中包含大量`#defines`.

我所拥有的是这样的：

```
#define STATUS_OK      0x00
#define STATUS_FAIL    0x01
#define STATUS_WAIT    0x02
#define STATUS_ILLEGAL 0x03
#define STATUS_FULL    0x04
... 
```

有很多这样的定义，我很高兴，因为我不必把它们都写出来。

但是，虽然我可以很好地将它们用于`switch`,`if`和其他语句作为等的替代品`0x00`，但我现在想要相反的方向。

所以，有了`0x00`，我想打印出标识符“STATUS_OK”。

据我所知，这是不可能的，但是有什么好的解决方法可以使它成为可能？！是否可以设置这样的数组：

```
arrayNames[STATUS_OK] = _STATUS_OK_ 
```

`STATUS_OK`将在哪里解决`0x00`并将解决到“ STATUS_OK `_STATUS_OK_`”？

此外，我正在寻找一种解决方案，它使用尽可能少的内存来做到这一点。

这将是我希望能够做到的：

```
prinf("%s",resolve(0x00));
-> "STATUS_OK" 
```

我希望，我明确了我在寻找什么。

*编辑：*

感谢所有人，快速而有用的回复！我将使用 Larsmans 解决方案，并可能尝试将其与 qrdl 之一结合起来。可能需要一段时间，完成后我将替换此编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:36:44.833

您可以使用一点宏魔法和预处理器的*字符串化*操作符来完成它。看一看：

```
#include <stdio.h>
#define STATUS_OK 0x05
#define STATUS_BAD 0x09
#define LOOKUP_CASE(x) case x: return #x

const char *lookup_name(int val) {
    switch(val) {
        LOOKUP_CASE(STATUS_OK);
        LOOKUP_CASE(STATUS_BAD);
        default: return "<UNDEFINED>";
    }
    return NULL;
}

int main(void) {
    printf("%s\n", lookup_name(STATUS_OK));
    printf("%s\n", lookup_name(STATUS_BAD));
    return 0;
} 
```

该示例是不言自明的，但`LOOKUP_CASE`宏除外。它使用`#`运算符生成与其操作数对应的字符串常量，从而避免重复`#define`两次 -d 常量的名称。

这是[ideone](http://ideone.com/VyGxz1)与此工作示例的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:00:18.270

使用[X-Macros](http://www.drdobbs.com/cpp/the-x-macro/228700289)，尽管它需要更改您的原始头文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:30:48.050

如果不使用`switch`检查每个值或使用名称制作完整列表，我认为没有解决您的问题的方法：

```
char *s_names[] = {
    "STATUS_OK",
    "STATUS_FAIL",
    ...
} 
```

现在您可以通过索引（这是错误代码）简单地访问字符串：

```
printf("%s", s_names[0x00]);      // prints "STATUS_OK"
printf("%s", s_names[STATUS_OK]); // prints "STATUS_OK" too 
```

如果您有值（或宏），这将起作用，但如果您不想为整个列表浪费太多空间，则可以使用此宏：

```
#define MACRO_TO_STRING(x) #x 
```

现在您可以将宏转换为字符串，但不能将值转换为字符串：

```
printf("%s", MACRO_TO_STRING(STATUS_OK)); // prints "STATUS_OK"
printf("%s", MACRO_TO_STRING(0x00));      // but this doesn't work: prints "0x00" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T16:59:25.497

你可以这样做：

```
const char *status_str(int s)
{
    switch(s)
    {
        case STATUS_OK:
            return "STATUS_OK";
        /* And so on and so forth */
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T16:59:44.010

无法从其值中获取标识符的名称。因为在预处理之后标识符不再可用并且编译器不知道它们。

但是，您可以尝试将它们的名称存储在数组或其他类似的技巧中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T17:00:12.703

一种简单的解决方案是编写两个非常简单的代码生成器。如果您将标识符存储在具有简单格式的文本文件中

```
identifier value 
```

例如

```
STATUS_OK      0x00
STATUS_FAIL    0x01 
```

然后两个简单的 Awk 脚本可以生成一个带有 的标头`#defines`和一个带有来自该字符串的 C 模块。对于标题：

```
BEGIN {
   print("#ifndef _STATUSCODES_H");
   print("#define _STATUSCODES_H");
}

{ printf("#define %s %s\n", $1, $2) }

END { print("#endif"); } 
```

对于映射回字符串：

```
BEGIN {
    print("#include \"statuscodes.h\"");
    print("char const *status_string(int status)");
    print("{");
    print("    switch (status) {");
}

{ printf("      case %s: \"%s\"\n", $2, $1); }

END {
    print("    }");
    print("}");
} 
```

然后让您`Makefile`在标识符表更改时生成模块和标题。

# webkit - 在 Webkit 中未出现的 Sitefinity 3.7 中应用类项目，在其他任何地方都可以使用

> ID：13517122
> 
> 赞同：0
> 
> 时间：2012-11-22T16:53:44.003
> 
> 标签：webkit, telerik, sitefinity, radeditor, sitefinity-3x

我正在使用 sitefinity 3.7。我在 radeditor 的 Apply Class 下拉菜单中添加了一些自定义类。

问题是它们出现在 Firefox 中，下拉列表被填充，您可以将它们应用于元素。但是在 Chrome 和 Safari 中它们不会出现，实际上在查看源代码时，它们并不存在。好像sitefinity没有解析出来。

我注意到的一件事是，您必须在文件中添加文本的样式（因为它会出现在下拉列表中），`EditorCssFile.css`而它不会出现在列表中。CSS 是 100% 有效且超级基础的。

前任

```
.test {
    font-size: 14px;
    color: #000;
} 
```

其中 test 是我添加到类集合中的类

```
<classes>
    <class name="test" value=".test" />
</classes> 
```

我还确保它也在下拉工具栏中

```
 <tools name="DropdownToolbar" dockable="false">
    ...
    <tool name="ApplyClass" />
    ...
 </tools> 
```

有没有人遇到过这个？我似乎不知道为什么它会出现在 webkit 以外的所有东西中。

编辑：我只想指出用于显示列表中项目的 css 文件确实加载了，没有错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:40:47.847

所以我想通了。这是骆驼案。

`.headerImg`我有一些像我一样的课程`EditorCssFile.css`，它们似乎是问题所在，同样只在 webkit 浏览器中。

还是真的没有多大意义。但现在它是固定的。

# scala - 使用可变参数但使用命名参数调用函数的 Scala 语法是什么？

> ID：13517124
> 
> 赞同：6
> 
> 时间：2012-11-22T16:53:49.463
> 
> 标签：scala, variadic-functions, keyword-argument

说我有一个功能

```
def f(a:Int = 0, b:String = "", c:Float=0.0, foos: Foo*) { ... } 
```

注意某些参数使用默认参数。通常，要使用默认值，您可以调用带有命名参数的函数，如下所示：

```
val foo = Foo("Foo!")
f(foos = foo) 
```

此语法有效，因为**我只使用一个调用该方法`foo`**。但是，如果我有两个或更多

```
val foo1 = Foo("Foo!")
val foo2 = Foo("Bar!")
f(foos = ...) 
```

这里应该喂什么并不那么明显。`Seq(foo1,foo2)`并且`Seq(foo1,foo2):_*`不要键入检查。

**更何况没有** `foo`s怎么称呼呢？

```
// All out of foos!
f(foos = ...) 
```

对于这种情况，使用空括号 ( `f()`) 调用函数不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T17:57:12.477

对于默认参数，请参阅我对您的问题的评论。有关如何使用命名参数调用可变参数部分，请参见下文（scala 2.9.2）：

```
scala> case class Foo(a:Int)
defined class Foo

scala> def f(a:Int, foos: Foo*) = foos.length
f: (a: Int, foos: Foo*)Int

scala> f(a=2, foos=Foo(2))
res0: Int = 1

// I'm not sure if this is cheating...
// am I just naming the first of the two variadic arguments?
scala> f(a=2, foos=Foo(2),Foo(3))
res1: Int = 2

//anyway you can do ....
scala> f(a=2, foos=Seq(Foo(1), Foo(2)):_*)
res2: Int = 2

// with no foos...
scala> f(a=2, foos=Nil:_*)
res3: Int = 0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T09:34:51.440

鉴于 Paolo 提到的 Scala 2.9 限制，您仍然可以使用 currying 将参数划分为不同的部分，一个使用带有默认参数的命名参数，一个用于可变参数（如果您需要多个可变参数，则可以使用多个 curried 参数部分） . 关于可读性，结果几乎比仅使用命名参数更好：

```
f(b="something")()
f(c=3.14)(foo1, foo2) 
```

# java - Java 进程无法获取 ErrorStream 消息

> ID：13517127
> 
> 赞同：1
> 
> 时间：2012-11-22T16:54:00.650
> 
> 标签：java

大家，我有一个进程需要从子进程中获取标准输出和日志/错误/异常输出。标准输出很好，但我无法获得 ErrorStream，因此程序因此卡在那里。这是我的简单代码。没有什么神奇的，但为什么我不能在这里得到错误流？感谢您查看它。

```
 BufferedReader standard =
         new BufferedReader(new InputStreamReader(process.getInputStream()));

   BufferedReader error = 
   new BufferedReader(new InputStreamReader(process.getErrorStream()));

    String line = null;
    while ((line = standard.readLine()) != null) {            
        System.out.println(line);
    }
    while ((line = error.readLine()) != null) {           
        System.out.println(line);
    } 
```

现在，按照建议，我使用了两个线程来处理输出和错误流，但仍然遇到同样的问题，如下所示。有人可以给我一些见解吗？谢谢。

```
 ProcessBuilder pb = new ProcessBuilder(listArgs);
    pb.redirectErrorStream();
    Process process = pb.start();

    StreamThread output = new StreamThread(process.getInputStream());
    StreamThread error = new StreamThread(process.getErrorStream());

    output.start();
    error.start();
    while (true) {
        try {
            output.join();
            break;
        }
        catch (InterruptedException ie) {
            ie.printStackTrace();
        }
    } 
```

StreamThread的定义：

```
 public static class StreamThread extends Thread{
    private InputStream input = null;   
    public StreamThread(InputStream in){
        input = in;
    }       
    String line = null;
    public void start(){            
        BufferedReader reader = new BufferedReader(new InputStreamReader(input));           
        try{
            while( (line=reader.readLine()) != null ){
                System.out.println(line);
            }
            reader.close();
        }catch (IOException e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:56:36.037

看看你的循环：

```
while ((line = standard.readLine()) != null) {            
    System.out.println(line);
}
while ((line = error.readLine()) != null) {           
    System.out.println(line);
} 
```

您将继续从输出流中读取，直到它完成 - 这很可能是进程终止的时候。只有*这样*你才开始阅读错误流。

您可能应该将其中至少一个放到不同的线程中，这样您就可以同时从*两个*流中读取。

# java - Android：OnBootReceiver：导出的接收器不需要权限

> ID：13517128
> 
> 赞同：13
> 
> 时间：2012-11-22T16:54:05.190
> 
> 标签：java, android, broadcastreceiver, android-manifest, bootcompleted

我创建了一个`BroadcastReceiver`，它接收`BOOT_COMPLETED`.

在我的`AndroidManifest.xml`我添加它是这样的：

```
<receiver
    android:name=".OnBootReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" /> 
        <action android:name="android.intent.action.QUICKBOOT_POWERON" />
    </intent-filter>
</receiver> 
```

但是，我收到警告：**导出的接收器不需要许可。** 我已经在 SO 上阅读过它，但我并不完全理解它。

那么有人可以向这个初学者解释:)为什么我会收到这个警告，以及如何处理它（以及为什么）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-17T18:08:40.097

警告

> 导出的接收者不需要权限

意味着，您有一个带有一些操作的意图过滤器（这意味着默认情况下您已`android:exported="true"`设置并且它现在可以接收来自您应用程序之外的**任何**广播公司的广播）因为它可以接收来自您的应用程序之外的**任何**广播公司的广播，它会通过以下方式警告您说“嘿，你确定**任何**广播公司都可以调用你吗？在我看来，最好只允许那些广播公司调用你，这些广播公司拥有你通过**android:permission**为这个接收者设置的权限”

希望这很清楚！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T08:44:11.197

`android:exported="false"`您可以通过添加到接收器标签来删除此警告（请参阅此答案： [https](https://stackoverflow.com/a/11526028/757073) ://stackoverflow.com/a/11526028/757073 ）

# php - 选择值数组

> ID：13517132
> 
> 赞同：0
> 
> 时间：2012-11-22T16:54:10.190
> 
> 标签：php, html, arrays, drop-down-menu

所以基本上，我有一个模块数组，我想要一个下拉菜单，然后用户可以选择他们获得的成绩。这很好用，但是，我希望将结果存储在数组中，无论他们选择了多少值。例如：

如果有人在 Mod1 中选择了“40”，在 Mod2 中选择了“20”，那么数组将如下所示：

mod1=>40

mod2=>20

...

这是到目前为止的代码，它可能很愚蠢，我无法理解它。

```
<?php

$modules = array('Mod1', 'Mod2', 'Mod3');   

if(!isset($_POST['submitted']))
{
    echo '<form method="post">';

    echo 'Please enter the grades you got for each Module: <br />';
    foreach($modules as $module)
    {
        echo $module . ': <input type="text" name="grades[]" value=""> <br />';
    }
    echo '<br /><input type="submit" name="submit" value="Go!">';
    echo '<input type="hidden" name="submitted" value="TRUE">';

}else{

    $input = $_POST['score[]'];
    foreach($modules as $i => $module){
        $input[$module] = $input[$i];
        var_dump($input[$module] = $i);
        //unset($input[$i]);
    }
    //var_dump($input);

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:56:03.480

```
<select name="score[<?php echo $module; ?>]"> 
```

应该让你开始 :)
数组看起来就像你在介绍中缩小范围一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:56:11.773

只需将您的 name 属性更改为数组：

`echo '<select name="score[]">';`

$_POST 变量将在一个数组中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:00:09.347

`select`您可以使用将s的值分组`POST`到一个数组中的名称：

```
echo '<select name="score[]">'; 
```

然后你可以使用：

```
$input = $_POST['score[]'];
foreach($modules as $i=>$module){
    $input[$module] = $input[$i];
    unset($input[$i]);
}
var_dump($input); 
```

# android - 如何在滑动事件上更改 PagerView 外部的按钮

> ID：13517133
> 
> 赞同：0
> 
> 时间：2012-11-22T16:54:09.400
> 
> 标签：android, android-viewpager, fragmentpageradapter

我有一个 FragmentPagerAdapter( [this](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html) ) 的实现，我想在片段更改页面时更改寻呼机外部按钮的背景。

这是我的主要 xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_ll"
    android:orientation="vertical"
    android:gravity="center_horizontal"
    android:layout_width="match_parent" android:layout_height="match_parent">

<ImageView android:src="@drawable/banner"
    android:layout_height="wrap_content" android:layout_width="wrap_content"
    android:contentDescription="@string/banner_desc"/>

<android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="1">
</android.support.v4.view.ViewPager>

<LinearLayout android:orientation="horizontal"
        android:gravity="center" android:measureWithLargestChild="true"
        android:layout_width="match_parent" android:layout_height="70dip"
        android:layout_weight="0"
        android:paddingTop="10dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip"
        style="@style/BottomTabs">
    <Button android:id="@+id/btn_theaters"
        android:drawableTop="@drawable/bt_theaters_icon"            
        android:text="@string/label_theaters"
        style="@style/BtnTabs">
    </Button>
    <ImageView android:src="@drawable/tabs_separator"
        android:contentDescription="@string/tabs_separator_desc"
        android:layout_width="10dip" android:layout_height="63dip"
        />
    <Button android:id="@+id/btn_movies"
        android:drawableTop="@drawable/bt_movies_icon"            
        android:text="@string/label_movies"
        style="@style/BtnTabs">
    </Button>
    <ImageView android:src="@drawable/tabs_separator"
        android:contentDescription="@string/tabs_separator_desc"
        android:layout_width="10dip" android:layout_height="63dip"
        />
    <Button android:id="@+id/btn_premiers"
        android:drawableTop="@drawable/bt_premiers_icon"            
        android:text="@string/label_premiers"
        style="@style/BtnTabs">
    </Button>
    <ImageView android:src="@drawable/tabs_separator"
        android:contentDescription="@string/tabs_separator_desc"
        android:layout_width="10dip" android:layout_height="63dip"
        />
    <Button android:id="@+id/btn_soon"
        android:drawableTop="@drawable/bt_soon_icon"            
        android:text="@string/label_soon"
        style="@style/BtnTabs">
    </Button>
    <ImageView android:src="@drawable/tabs_separator"
        android:contentDescription="@string/tabs_separator_desc"
        android:layout_width="10dip" android:layout_height="63dip"
        />
    <Button android:id="@+id/btn_deals"
        android:drawableTop="@drawable/bt_deals_icon"            
        android:text="@string/label_deals"
        style="@style/BtnTabs">
    </Button>
</LinearLayout> 
```

我已经完全按照[此](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)链接进行操作，但如果您想查看活动代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:47:25.610

> i want to change the background of the buttons that are outside of the pager when the fragment change the page.

Use a [`ViewPager.OnPageChangedListener`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html) on the `ViewPager`:

```
((ViewPager)findViewById(R.id.pager)).setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int position) {      
            // the position parameter tells us at what page we moved to
            // you could use the other two methods to update the views as 
            // soon as the user starts the swipe
            // get a reference to the Buttons and change their backgrounds
        }

        @Override
        public void onPageScrolled(int position, float offset, int offsetPixel) {

        }

        @Override
        public void onPageScrollStateChanged(int state) {

        }
    }); 
```

# yii - yii如何生成静态页面

> ID：13517134
> 
> 赞同：2
> 
> 时间：2012-11-22T16:54:16.183
> 
> 标签：yii, static

在一个项目中，我们需要生成静态页面，而不是将内容存储在数据库中。我们正在使用 Yii 框架。有人知道可以在此任务中实施的方法吗？在 Yii 框架中如何生成静态页面？用户应该创建数以千计的静态页面，那么我该如何编辑它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:18:47.870

你可以做几件事。

1.  在不在“受保护”目录下的另一个文件夹中创建 HTML/PHP 文件。然后您可以访问它们： http: [//mysite.com/files/pagename.html](http://mysite.com/files/pagename.html)
2.  如果您想要与主页相同的模板，但只是内容不同，请将它们放在 protected/views/site/pages 文件夹中。然后您可以通过 index.php?r=site/page&view=pagename 访问它们
3.  您可以为加载视图的控制器中的每个页面手动创建一个路由，但这听起来不太可能，因为用户将创建内容。
4.  并且可能是最好的方法。将网页内容上传到数据库，存储。然后你可以使用 Yii/Gii Crud 工具来布置一些基本页面来编辑这些新页面。您只需要创建一种方法来根据需要呈现这些页面，去除不良标签等。

# spring - 是否可以留在循环负载均衡器后面的同一台服务器上？

> ID：13517137
> 
> 赞同：1
> 
> 时间：2012-11-22T16:54:27.460
> 
> 标签：spring, spring-security, load-balancing

我有一个带有 Spring Security 的 Web 应用程序，它位于循环负载均衡器后面，所以每当负载均衡器从服务器 A 跳转到服务器 B 时，会话就会丢失。

我们不想使用 Remember-Me cookie，也许是偏执狂，但数据太明智了。

而且我们不能将负载均衡器配置为具有粘性会话，（那是另一个部门，要求他们配置负载均衡器来做到这一点是我们的最后一个选择）

是否可以配置 Spring 的 xml，永远不会离开用户最初所在的服务器？

所以用户在服务器 A 中提出的所有请求总是由服务器 A 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:06:01.230

您可以为每个服务器设置不同的 URL：

*   服务器 A: www1.myapp.com
*   服务器 B：www2.myapp.com

然后，当用户访问应用程序时，他们会重定向到上述 URL 之一。这样，它们将固定在该服务器上以供将来请求。

但是，这意味着如果一台服务器出现故障，那么用户将不会被定向到另一台服务器，因此它不会是多余的。如果另一台服务器出现故障，您可以通过让仍在运行的服务器接管另一个 URL 来解决此问题。

这是流程：

*   用户点击 www.myapp.com
*   负载均衡器向服务器 A 发送流量
*   服务器 A 注意到 URL=www.myapp.com，因此它重定向到 www1.myapp.com
*   用户点击 www1.myapp.com
*   流量到达服务器 A（绕过负载均衡器）

如果您不想将服务器暴露给 wWW，那么您可以在 LB 上设置额外的池，如下所示：

*   www.myapp.com : 服务器 A，服务器 B
*   www1.myapp.com : 服务器 A
*   www2.myapp.com : 服务器 B

# twitter - 推特账户 ID 是否可以等于推文 ID？

> ID：13517140
> 
> 赞同：1
> 
> 时间：2012-11-22T16:54:34.533
> 
> 标签：twitter, twitter4j

还是我必须为自己建立一个唯一标识符？（我使用 twitter4j API 来检索我朋友的推文）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:42:13.020

是的他们可以。然而，推文的 ID 通常远大于用户 ID（大`long`数字与`ìnt`< 1,000,000,000）。它们对于非常古老的推文可能是相等的，但对于最近的推文绝对不是（例如，Twitter 还没有[271,674,757,445,996,545 名](https://twitter.com/MozillaZineFr/status/271674757445996545)用户造成混淆）。

# python - SQLAlchemy如何在多对多中按孩子过滤

> ID：13517141
> 
> 赞同：15
> 
> 时间：2012-11-22T16:54:36.063
> 
> 标签：python, orm, sqlalchemy, many-to-many, filtering

我在询问我在 SQLAlchemy 中遇到的问题，并在写作时找到了解决方案。无论如何我都会发布它以防万一它对某人有帮助:)

假设我有一个似乎有效的多对多关系（至少我可以获取孩子） 三个表：posts、tags 和 post_tags。

```
import sqlalchemy as alc

class Tag(Base):
    __tablename__ = 'tags'

    id = alc.Column(alc.Integer, primary_key=True)
    name = alc.Column(alc.String)
    accepted = alc.Column(alc.Integer)

    posts = relationship('Post', secondary=post_tags)

class Post(Base):

    __tablename__ = 'posts'

    id = alc.Column(alc.Integer, primary_key=True)
    text = alc.Column(alc.String)
    date_out = alc.Column(alc.Date)

    tags = relationship('Mistake_Code', secondary=post_tags)

# relational table
post_tags = alc.Table('check_point_mistakes',
                       Base.metadata,
                       alc.Column('post_id', alc.Integer,ForeignKey('posts.id')),
                       alc.Column('tag_id', alc.Integer, alc.ForeignKey('tags.id'))) 
```

现在我的问题是我想先在 Post 中按 date_out 过滤。我可以这样得到：

```
# assume start_date and end_date

query = (
            session.query(Post)
                   .filter(Post.date_out.between(start_date, end_date))
 ) 
```

但是如何同时按标签过滤呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-22T16:54:36.063

```
query = (
    session.query(Post)
           .join(Post.tags)     # It's necessary to join the "children" of Post
           .filter(Post.date_out.between(start_date, end_date))
           # here comes the magic: 
           # you can filter with Tag, even though it was not directly joined)
           .filter(Tag.accepted == 1)
) 
```

免责声明：这是我实际代码的一个非常简化的示例，我在简化时可能犯了一个错误。

我希望它可以帮助某人。

# java - 二维字符串数组b学生记录程序

> ID：13517143
> 
> 赞同：1
> 
> 时间：2012-11-22T16:54:43.210
> 
> 标签：java, multidimensional-array, netbeans6.5

我正在尝试使用二维数组创建一个程序来存储有关学生的信息，他们的名字和姓氏，然后是 4 个年级。

用户必须能够将所有这些输入到程序中并按下按钮来计算课程的平均值。他们还应该能够输入学生的名字和姓氏，并让它输出他们的平均成绩。该程序还应该能够列出存储在其中的所有信息。

我意识到使用数组列表可能会更容易，但这是一门课程，它指定我必须使用二维数组。

我们使用的开发环境是NetBeans 6.5（6.8是最后一个保留设计窗口的版本）。是的，我意识到这已经严重过时了，但这就是我们必须使用的。这个版本有一个设计窗口，所以我们不必担心任何 GUI 编码，我们只需拖入我们需要的标签和文本区域和按钮。它必须能够处理多达 15 名学生。随着代码的进行，我将尝试解释代码背后的想法和理论。

```
//Create and intialize array to have 15 rows and 6 columns.
String [][] records = new String [15][6];
int n = 1;
double clicked = 0;
private void addActionPerformed(java.awt.event.ActionEvent evt) {       
    //The basic idea behind the add method here is that we take the input from the user and assign it to the array by taking the number of times this method has been used as a reference for where it should go in the array. This method actually works fine, I just put in here for reference in case someone thinks it might be important.    
    String nameFirst,nameLast, grade1,grade2, grade3, grade4;
    nameFirst = firstName.getText();
    nameLast = lastName.getText();
    grade1 = class1Grade.getText();
    grade2 = class2Grade.getText();
    grade3 = class3Grade.getText();
    grade4 = class4Grade.getText();
    records[n-1][0] = nameFirst;
    records[n-1][1] = nameLast;
    records[n-1][2] = grade1;
    records[n-1][3] = grade2;
    records[n-1][4] = grade3;
    records[n-1][5] = grade4;
    output.append(records[n-1][0] + "\n");
    output.append(records[n-1][1] + "\n");
    output.append(records[n-1][2] + "\n");
    output.append(records[n-1][3] + "\n");
    output.append(records[n-1][4] + "\n");
    output.append(records[n-1][5] + "\n");
    n++;
    firstName.setText("");
    lastName.setText("");
    class1Grade.setText("");
    class2Grade.setText("");
    class3Grade.setText("");
    class4Grade.setText("");
    clicked++;
}              
private void listActionPerformed(java.awt.event.ActionEvent evt) {         
    //This is the code that we were shown to display all elements in the array but for whatever reason it doesn't want to go past row 0(first row) and I don't know why.                            
    for (int row = 0; row <= 16; row++) {
        output.append(row + "\n");
      for( int col=0; col <= 6; col++) {
           output.append(records[row][col] +"\n");
       }
 }
    //This is the code I added in to make sure that the add method was actually putting things where they belonged. It is but it did show that the above loop wasn't working.
    //output.append(records[0][0] + "\n");
    //output.append(records[0][1] + "\n");
    //output.append(records[0][2] + "\n");
    //output.append(records[0][3] + "\n");
    //output.append(records[0][4] + "\n");
    //output.append(records[0][5] + "\n");
    //output.append(records[1][0] + "\n");
    //output.append(records[1][1] + "\n");
    //output.append(records[1][2] + "\n");
    //output.append(records[1][3] + "\n");
    //output.append(records[1][4] + "\n");
    //output.append(records[1][5] + "\n");
}      
private void calculateCourseAverageActionPerformed(java.awt.event.ActionEvent evt) {                                                       
    double total1 = 0, total2 = 0, total3 = 0, total4 =0;
    double col2, col3, col4, col5;
    //col2 = Double.parseDouble(records[0][2]);
    //Here I try to add up all the stored values in a particular column. Originally it kept giving back a floating decimal error. It turned out the the value in the array was being multiplied by 64(4 from first loop, 16 from second, 16*4=64). Now its only being multiplied by 16, not much better but an improvement none the less. 
    for(int col = 2; col<=5; col++){
        for(int row = 0; row<=15; row++){
            if(col == 2){
                col2 = Double.parseDouble(records[0][2]);
                total1 = total1 + col2;
            }
            if(col == 3){
                col3 = Double.parseDouble(records[0][3]);
                total2 = total2 + col3;
            }
            if(col == 4){
                col4 = Double.parseDouble(records[0][4]);
                total3 = total3 + col4;
            }
            if(col == 5){
                col5 = Double.parseDouble(records[0][5]);
                total4 = total4 + col5;}
        }
    }
    output.append("The average for course 1 is " + total1/4);
    output.append("The average for course 2 is " + total2/4);
    output.append("The average for course 3 is " + total3/4);
    output.append("The average for course 4 is " + total4/4);
}
private void calculateStudentAverageActionPerformed(java.awt.event.ActionEvent evt) {                                                        
    String nameFirst, nameLast;
    double studentAverage, total = 0, grade, finalGrade;
    boolean continuation;
    int student = 0;
    //here we take the first name and last name(that the user should input). The method is supposed to check through the array for the first name and if it finds it it should check the last name then add up all the number is that particular row. Tests show that it seems to work fine until the Name1 Name2 area(*), it shows that the records[row][0] and records[row][1] are equal to null which negates the rest of my code here.
    nameFirst = firstName.getText();
    nameLast = lastName.getText();
    output.append("Name check " + nameFirst + nameLast + "\n");
    while(continuation = true){
        for(int row=0;row<=15;row++){
            for(int col=0;col<=0;col++){
                *
                output.append("Name1 " + records[row][0] + "\n");
                output.append("Name2 " + records[row][1] + "\n");
                *
                if(records[row][0].equals(nameFirst)){
                    if(records[row][1].equals(nameLast)){
                        continuation = false;
                        student = row;
                        String test = Integer.toString(student);
                        output.append("Student row # " + test + "\n");
                    }
                }
            }
        }
    }
    for(int col = 2; col<=5; col++){
        grade = Double.parseDouble(records[student][col]);
        output.append("Grade " + grade + "\n");
        total = total + grade;
        output.append("Total " + total + "\n");
    }
    finalGrade = total / 4;
    output.append(finalGrade + "\n");
    output.append("First Name " + records[student][0] + "\n");
    output.append("Last Name " + records[student][1] + "\n");
    output.append(records[student][0] + records[student][1] + "'s average is " + finalGrade);
    continuation = true;
} 
```

任何帮助或想法、想法等......将不胜感激。在过去的一个月里，我一直被困在这个和匹配的游戏任务上，我认为是时候征求别人的意见和建议了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:10:21.840

您必须将总数除以 15 而不是 4...

```
output.append("The average for course 1 is " + total1/15);
output.append("The average for course 2 is " + total2/15);
output.append("The average for course 3 is " + total3/15);
output.append("The average for course 4 is " + total4/15); 
```

以下行是相同的方法是 irerate 16 次而不是 15 次，这将在您的情况下引发空指针异常...更改

```
for(int row = 0; row<=15; row++){ 
```

至

```
for(int row = 0; row<15; row++){ 
```

以下代码对您来说非常好......

```
 double[] totals = new double[4];
        for(int row = 0; row<=15; row++){
            for(int col = 2; col<=5; col++){
                total[col - 2] = total[col - 2] + records[row][col]; 
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:11:03.380

```
for (int row = 0; row <= 16; row++) { 
```

所以什么时候`row = 16`会遇到这条线：

```
output.append(records[row][col] +"\n"); 
```

`NullPointerException`根据您的声明，可能会作为索引抛出`15`并且`16`不会出现（索引将从 0 到 14，因为您需要 15 行）。

这条线的情况也是如此`for (int col = 0; col <= 6; col++) {`

所以尝试将其更改为：

```
for (int row = 0; row < 15; row++) {
      output.append(row + "\n");
      for( int col=0; col < 6; col++) {
           output.append(records[row][col] +"\n");
       }
 } 
```

# sharepoint - 用于显示 SharePoint 2010 Web 部件的小部件容器

> ID：13517147
> 
> 赞同：1
> 
> 时间：2012-11-22T16:55:06.483
> 
> 标签：sharepoint, sharepoint-2010, widget

我需要构建一个小部件容器，该容器具有可扩展、可折叠、可配置的小部件标题和显示在小部件中的内容，可配置源为 SharePoint WebParts（OOB 和第三方 Web 部件）。

需要预定义页面布局以具有 3（行）* 2（列）矩阵的小部件，用户可以在其中将每个小部件配置为 SharePoint Web 部件（文档列表、图像翻转、第三方论坛 Web 部件等）并个性化他们的仪表板。

我不知道在 SharePoint 2010 中实现此要求的可能性，因为我是新手。

任何人都可以帮助我了解我们如何使用源作为 SharePoint Web 部件构建通用小部件组件的实施视角。

# c - Radix Tree，最多有几个孩子？

> ID：13517150
> 
> 赞同：0
> 
> 时间：2012-11-22T16:55:24.333
> 
> 标签：c, algorithm, tree, radix

[http://en.wikipedia.org/wiki/Radix_tree](http://en.wikipedia.org/wiki/Radix_tree) 所以我没有使用函数，而是使用整数值代替 isLeaf。但是一个边数组应该有多少个元素呢？每个节点最多有多少个子节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:12:57.573

这取决于你的基数。一个节点的最大子节点数是所选鉴别器的可能唯一值的数量；如果你使用一个字符作为鉴别器，那么最大的孩子数将是有效字符的数量。

您可以通过区分每个位来​​实现以 2 为基数的数据结构；在这种情况下，您的树会更深，但每个非叶节点将恰好有两个子节点，这可能会简化实现。

# r - 循环中无法识别粘贴的变量名称

> ID：13517152
> 
> 赞同：0
> 
> 时间：2012-11-22T16:55:35.057
> 
> 标签：r, loops, paste

对不起丑陋的代码，但我不确定到底出了什么问题

```
for (i in 1:1) 
    tab_sector[1:48,i] <- 
        tapply(get(paste("employee",1997-1+i, "[birth<=(1997-1+i)]",sep="")),
               ordered(sic2digit[birth<=(1997-1+i)],levels=tab_sector_list))

# Error in get(paste("employee", 1997 - 1 + i, 
# "[birth<=(1997-1+i))]",  : object 'employee97[birth<=(1997-1+i)]' not found 
```

但变量在那里：

```
head(employee97[birth<=(1997-1+i)])
# [1] 1 2 2 1 3 4 
```

一个更简单的版本，其中“员工”不受“出生”的影响

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:22:36.897

You can't `get` an indexed element, e.g. `get("x[i]")` fails: you need `get("x")[i]`.

Your code is almost too messy too see what's going on, but this is an attempt at a translation:

```
 for (i in 1:1){
        ind <- 1997-1+i
        v1 <- get(paste0("employee",ind))
        tab_sector[1:48,i] <- tapply(v1[birth<=ind],
             ordered(sic2digit[birth<=ind],levels=tab_sector_list))
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:23:50.983

It would help if you told us what you are trying to accomplish.

In your code the `get` function is looking for a variable whose name is "'employee97[birth<=(1997-1+i)]", the code that works is finding a variable whose name is "employee1997" then subsetting it, those are very different. The `get` function does not do subsetting.

Part of what you are trying to do is FAQ 7.21, the most important part of which is the end where it suggests storing your data in lists to make accessing easier.

# java - Java中的变量函数

> ID：13517153
> 
> 赞同：2
> 
> 时间：2012-11-22T16:55:37.913
> 
> 标签：java, function, variables, dynamic-function

是否可以通过某种方法将函数分配给 Java 中的变量，例如 PHP 或 JavaScript？

...或者当涉及到 Java 时，这个领域是否以不同的方式工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T16:58:10.577

在 Java 中，您`Method`可以[`MethodHandles`](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html)通过反射调用方法，但该语言尚不支持该方法。

在 Java 8 中，您将能够使用对方法的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T16:56:51.880

在今天的 Java 中，不，你不能。

最接近的是接口：您不存储函数，而是定义所需函数的接口的实现。

一个典型的例子是[Comparator 接口](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Comparator.html)的实现：

```
Comparator<ProductSearchResult> c = new Comparator<ProductSearchResult>() {
    public int compare(ProductSearchResult result1, ProductSearchResult result2) {
        return result1.product.getRsId().compareTo(result2.product.getRsId());
    }
};
Collections.sort(groupResults, c); // I pass a function, wrapped in my Comparator implementation 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:03:39.717

您拥有的最接近的是与接口相结合的内部类。这些不仅可以携带一个，而且可以携带许多功能（方法），如果愿意，可以将它们委托回主类方法。但是这个解决方案可能很容易过于重量级：

```
class Main {

   interface X { 
     void doX();
   }

   class Ref1 implements X {
     void doX() { doA(); };
   }

   class Ref2 implements X {
     void doX() { doB(); };
   }

   void doA() {  };
   void doB() {  };

   void demo() {
      X x = new Ref1();
      x.doX();
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T15:37:28.880

这模拟了类似于 Lambdas 的东西......（如果您使用字符串以外的任何东西，您将需要更多的转换，但我保持示例简短）......

```
public class MyTest {

    public static void main(String[] args) {

        Lambda l = new Lambda() { public Object func(Object x) 
                                    { return "Hello " + x; } 
                                };

        System.out.println(l.func("Bob"));

        System.out.println(nowTryFromMethod(l));

        System.out.println((new Lambda() { public Object func(Object x) 
                                             { return "Goodbye " + x; }
                                         }).func("Harry"));
    }

    private static Object nowTryFromMethod(Lambda l) {
            return l.func("Jerry");
    }
}

class Lambda {

    public Object func(Object x) { return null; }
} 
```

输出：

```
Hello Bob
Hello Jerry
Goodbye Harry 
```

**更新**

Java 支持对1.8 版中称为*Lambda*的函数的引用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T17:07:32.673

Java 不支持。

但是，您可以在 JVM 语言中非常轻松地做到这一点，例如在 Groovy 中。

或者你看看[command-pattern](http://en.wikipedia.org/wiki/Command_pattern)。

# mysql - 即使所有相关列都已编入索引，添加 ORDER BY 也会显着减慢 JOIN 查询。我怎样才能让它更快？

> ID：13517154
> 
> 赞同：1
> 
> 时间：2012-11-22T16:55:37.793
> 
> 标签：mysql, join, sql-order-by, query-optimization

我有以下 JOIN 查询：

```
SELECT
    table1.*, 
    table2.*
FROM 
    Table1 AS table1 
LEFT JOIN 
    Table2 AS table2 
USING 
    (col1)
LEFT JOIN 
    Table3 as table3 
USING 
    (col1) 
WHERE 
    3963.191 * 
    ACOS(
    (SIN(PI() * $usersLatitude / 180) * SIN(PI() * table3.latitude / 180)) 
    +
    (COS(PI() * $usersLatitude / 180) * COS(PI() * table3.latitude / 180) * COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180))
    ) <= 10 
AND 
    table1.col1 != '1' 
AND 
    table1.col2 LIKE 'A' 
AND 
    (table1.col3 LIKE 'X' OR table1.col3 LIKE 'X-Y') 
AND 
    (table2.col4 = 'Y' OR table2.col5 = 'Y') 
```

它在**0.15 秒内**执行。

但是，如果我简单地添加：

```
ORDER BY 
    table1.col6 DESC 
```

它执行超过**3 秒**。

**查询中的所有**列都被**索引**，包括`table1.col6`在`ORDER BY`.

我尝试[**了这个解决方案**](https://stackoverflow.com/questions/884661/slow-query-when-using-order-by)，但没有奏效。

如何使用`ORDER BY`.

* * *

**编辑：**

`EXPLAIN EXTENDED` **没有的** 结果`ORDER BY`：

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   SIMPLE  table1  ALL PRIMARY,col2,col3   NULL    NULL    NULL    140101  72.61   Using where
1   SIMPLE  table2  eq_ref  PRIMARY,col4,col5   PRIMARY 4   table1.col1 1   100 Using where
1   SIMPLE  table3  eq_ref  PRIMARY PRIMARY 4   table1.col1 1   100 Using where 
```

结果：`EXPLAIN EXTENDED` **_** `ORDER BY`

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   SIMPLE  table1  ALL PRIMARY,col2,col3   NULL    NULL    NULL    140101  72.61   Using where; Using filesort
1   SIMPLE  table2  eq_ref  PRIMARY,col4,col5   PRIMARY 4   table1.col1 1   100 Using where
1   SIMPLE  table3  eq_ref  PRIMARY PRIMARY 4   table1.col1 1   100 Using where 
```

* * *

**编辑2：**

查询中所有列的数据类型（根据要求）：

```
col1: int(11)
col2: char(1)
col3: varchar(3)
col4: char(1)
col5: char(1)
col6: int(11)
latitude: varchar(25)
longitude: varchar(25) 
```

所有 3 个表（table1、table2 和 table3）都是`MyISAM`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:05:57.193

我能想到的解决这个问题的唯一另一种方法是将表更改为默认顺序 - 然后`order by`从您的查询中一起删除。

[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:37:50.320

这不是一个解决方案，但它可能会有所帮助：避免使用“*”来指定您想要的列并明确指定它们。当您使用 * 指定所有列时，MySQL 在对数据进行排序时必须做更多的工作来分流数据，因此更有可能进行文件排序，这很慢。

此外，索引对 MySQL 排序数据的容易程度几乎没有影响，尽管您应该检查它是否使用 BTREE 索引，因为它们更有可能保持相对良好的排序。

最糟糕的是，如果您还没有这样做的话，您可能想阅读 MySQL 手册中关于[ORDER BY 优化的内容。](http://dev.mysql.com/doc/refman/5.1/en/order-by-optimization.html)我看不到任何适用的东西，但你可能会看到我遗漏的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:05:03.083

除了我提供的其他答案之外，将您现有的查询包装在一个选择中，然后对结果进行排序。这是查询的另一个选项...如果我的解释不正确，请纠正我。

由于 where 子句，您正在对表 2 执行 LEFT-JOIN，但需要 Col4 或 Col5 = 'Y' 从而指示 INNER JOIN（记录必须存在于 Table1 AND Table2 上）。

同样，在您的表 3 上连接到表 1，但限制距离 <= 10，因此 LEFT-JOIN 并不准确，因为它是 WHERE 的一部分，表示 REQUIRED。

因此，下面列出了我修改后的查询。我基本上已经将“WHERE”组件移到了相应的表 JOIN 命令中。如果您确实是想拥有 LEFT-JOIN 并且想要所有表 1 记录，而不管 Table2/Table3 记录，那么您可以简单地将这些更改为 LEFT JOIN。

```
SELECT STRAIGHT_JOIN
      T1.*, 
      T2.*
   FROM 
      Table1 AS T1
         JOIN Table2 AS T2
            ON T1.Col1 = T2.Col1
            AND ( T2.Col4 = 'Y' OR T2.Col5 = 'Y' )
         JOIN Table3 as T3
            ON T1.Col1 = T3.Col1
            AND 3963.191 
               * ACOS(  (SIN(PI() * $usersLatitude / 180) * SIN(PI() * T3.latitude / 180)) 
                                + (  COS(PI() * $usersLatitude / 180) * COS(PI() * T3.latitude / 180) 
                                   * COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180)
                        )   
                     ) <= 10 
   WHERE
          T1.Col2 LIKE 'A'
      AND ( T1.col3 LIKE 'X' OR T1.col3 LIKE 'X-Y') 
      AND T1.Col1 != '1'
   ORDER BY
      T1.Col6 
```

如果直接应用 order by 子句，则将第 6 列添加到表 1 的索引

```
On Table 1, I would have an index on ( Col2, Col3, Col1, Col6 )
On Table 2 on ( Col1, Col4, Col5 )
On Table 3 on ( Col1 )   <-- assume already had this. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T18:57:03.773

如果您的查询与您指示的一样快，我希望它返回一个相当小的数据集。如果是这样的话，我会按原样包装你的，然后把它放在外面，比如......

```
select
      PreQuery.*
   from
      ( Your Entire Query Without the order by clause ) as PreQuery
   order by
      PreQuery.Col6 Desc 
```

这样，外部查询与现有索引无关，只返回数据......然后该结果将根据原始结果应用顺序。

希望能为您解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T03:56:35.363

你为什么`LIKE`对非通配符值做 s ？这将使计划者更加悲观。但大多数情况下，您需要查看查询计划器显示的内容。

另外，你`ANALYZE`最近在桌子上做过吗？如果行统计信息关闭，则规划器将做出糟糕的选择。

# python - 通过 UWSGI / NGINX 将参数传递给 Python Flask

> ID：13517160
> 
> 赞同：5
> 
> 时间：2012-11-22T16:56:03.317
> 
> 标签：python, nginx, uwsgi, geoip

我正在尝试将 GeoIP 模块与我的 Nginx 和 Uwsgi 堆栈一起使用。所有的教程都与将它与 fastcgi 一起使用有关，但由于我不使用 fastcgi，它没有帮助。

我需要让 nginx 通过自定义 HTTP 标头将 GeoIP 数据传递到您的 CGI 应用程序，例如：

```
proxy_set_header X-GeoIP-Country $geoip_country_name;
proxy_set_header X-GeoIP-City    $geoip_city; 
```

我如何用 Uwsgi 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T17:06:53.330

uwsgi_param 键值；

前任。

uwsgi_param GEOIP_COUNTRY $geoip_country_name;

# bash - 使用 shell 脚本搜索和替换

> ID：13517161
> 
> 赞同：1
> 
> 时间：2012-11-22T16:56:04.923
> 
> 标签：bash, shell, sed, awk

我需要一个 shell 脚本来查找和替换如下文本：

```
For each line in a file
  find equation mark "="
  remove everything up to the equation mark on that line and replace it with the string cuts[Counter] where Counter counts how many times such substitutions have been made. 
```

任何人都可以帮助我开始使用这样的脚本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:00:49.187

假设你的意思是“直到第**一个**等式标记......”并且你想保留 =，这应该这样做：

```
awk '{c += sub(/[^=]+=/,"cuts["c+0"]=") }1' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:03:10.013

在纯 bash 中：

```
counts=0
while IFS= read -r line; do
    if [[ "$line" =~ "=" ]]; then
        echo "${counts}${line#*=}"
        counts=$((counts+1))
    fi
done <infile 
```

请注意，这将排除“=”。如有必要，您可以将其重新包含在 ehco 语句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:10:57.240

这是 perl one liner：

```
perl -plne 'if($.==1){$count=1}if(/=/){$_=~s/[^\=]*[=]/cut[$count]/g;$count++}' temp 
```

# mysql - 如何交叉检查两个表并将相关数据插入到MYSQL中的新表中？

> ID：13517180
> 
> 赞同：0
> 
> 时间：2012-11-22T16:57:49.030
> 
> 标签：mysql

我正在尝试使用 phpmyadmin 中的 MySQL 查询来交叉检查两个表中存在的行，然后，如果`userID`在两个表中都找到 a，则将它们的`userID`用户名和用户名插入另一个表中。这是我的代码：

```
INSERT INTO userswithoutmeetings
SELECT user.userID
IF('user.userID'='meeting.userID'); 
```

我一直被这个错误困扰：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds
 to your MySQL server version for the right syntax to use near    
'IF('user.userID'='meeting.userID')' at line 3 
```

我尝试过的其他语句有效，但没有将值存入表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:03:20.697

就像是

```
INSERT INTO userswithoutmeetings(userId,userName)
SELECT DISTINCT a.userId, a.userName
FROM table1 a 
INNER JOIN table2 b ON (a.userId = b.userId) 
```

# java - 什么是报告服务器？

> ID：13517188
> 
> 赞同：0
> 
> 时间：2012-11-22T16:58:16.597
> 
> 标签：java, jasper-reports, reporting, jasperserver

报告服务器需要什么？

不使用报告服务器而是使用报告库会错过什么？

像 Jasper 这样的报告库可以轻松生成报告，并且可以嵌入到任何地方，无论是 Servlet 还是桌面应用程序。那么为什么需要一个报告服务器呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:18:05.330

报告服务器最有用的功能是生成计划报告的能力，其次是在网络上查看报告的能力，除此之外，如果您不使用它也不会错过太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:01:53.967

报告服务器通常会离线生成报告或按需缓存。这意味着您需要的报告更有可能预先生成并可立即访问，而不是等待报告生成。它还可用于生成定期通过电子邮件发送的报告。

# php - 土耳其语字符显示不正确

> ID：13517189
> 
> 赞同：2
> 
> 时间：2012-11-22T16:58:18.007
> 
> 标签：php, html, mysql, encoding

MySql 数据库使用 utf-8 编码并且数据存储正确。我使用 set_name utf8 查询来确保调用的数据是 utf-8 编码的。只要标题字符集是 utf-8，数据库中的所有变量都可以正常工作，但是静态html 字符无法正常工作。当我将标头字符集设置为 ISO-8859-9 时，变量的显示方式不同，而 html 字符可以正常工作。有人可以帮我吗？Utf8 编码： [http](http://oi48.tinypic.com/289kje1.jpg) : //oi48.tinypic.com/289kje1.jpg html 标签显示值有问题。但是来自数据库的 php 数据（绿色的，例如 ağişler）是可以的。ISO 编码[http://oi50.tinypic.com /287n2ph.jpg](http://oi50.tinypic.com/287n2ph.jpg)这次 html 没问题，但是 php 数据显示错误。

```
<?php
    header('Content-Type: text/html; charset=ISO-8859-9');
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head><title>noname</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T16:59:50.873

您可以尝试在文件顶部显式添加内容类型，如下所示

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

并从您的代码中删除以下内容..

```
header('Content-Type: text/html; charset=ISO-8859-9'); 
```

**更新：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<?php echo "for example Ş and İ "; ?>   
</body>
</html> 
```

上面的代码给了我以下输出：

![在此处输入图像描述](../Images/159e695de79ef40131c5d45466d4970e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:05:44.830

因此，如果您告诉浏览器将其解释为 UTF-8，则来自数据库的数据有效，这意味着数据是 UTF-8 编码的。如果您告诉浏览器将其解释为 ISO-8859，则 HTML 代码有效，这意味着 HTML 以 ISO-8859 编码。

所以你有一个*混合编码*的文档。把这两个放在一起。将源代码文件保存为 UTF-8 并告诉浏览器将其解释为 UTF-8，或者从数据库中以 ISO-8859 获取数据并告诉浏览器这样解释。

# google-maps - Google Maps Javascript API v3，Jquery 选项卡

> ID：13517190
> 
> 赞同：1
> 
> 时间：2012-11-22T16:58:19.287
> 
> 标签：google-maps, google-maps-api-3

我已经尝试了所有可能的方法.. 未缩小所有 javascript，仍然无法在选项卡内正确加载地图。

尝试使用此自定义代码也没有成功

```
jQuery('.tabs-shortcode > ul').bind('tabsshow', function(e, ui) {
           if (ui && ui.panel) {
                          jQuery('.mapp-canvas', ui.panel).each(function() {
                                         var id = jQuery(this).attr('id');
                                         if (id) {
                                                        window[id].resize();
                                         }
                          });
           } 
```

});

网页： [http ://bit.ly/UTHskS](http://bit.ly/UTHskS)

在此先感谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:20:41.220

不过我没有尝试，这段代码可以解决问题。请尝试此代码。

```
jQuery('.tabs-shortcode > ul').bind('tabsshow', function(e, ui) {
  if (ui && ui.panel) {
    jQuery('.mapp-canvas', ui.panel).each(function() {
      var id = jQuery(this).attr('id');
      if (id) {
        window[id].resize();
      }
      setTimeout(function(){
        if (mapp0) {
          google.maps.event.trigger(mapp0.getMap(), "resize");
        }
      }, 1000);
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:09:17.213

我认为您可能需要在选项卡打开时触发地图的 Resize 事件。

```
google.maps.event.trigger(map, "resize"); 
```

# php - 快速检查一个对象是否会在 PHP 中成功实例化？

> ID：13517192
> 
> 赞同：4
> 
> 时间：2012-11-22T16:58:29.317
> 
> 标签：php, reflection, static-code-analysis

如何在不实际创建实例的情况下检查对象是否会使用给定参数成功实例化？

实际上我只是检查（没有测试此代码，但应该可以正常工作......）*所需*参数的数量，忽略类型：

```
// Filter definition and arguments as per configuration
$filter = $container->getDefinition($serviceId);
$args   = $activeFilters[$filterName];

// Check number of required arguments vs arguments in config
$constructor = $reflector->getConstructor();

$numRequired  = $constructor->getNumberOfRequiredParameters();
$numSpecified = is_array($args) ? count($args) : 1;

if($numRequired < $numSpecified) {
    throw new InvalidFilterDefinitionException(
        $serviceId,
        $numRequired,
        $numSpecified
    );
} 
```

**编辑**：`$constructor`可以`null`...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T18:23:56.397

简短的回答是，您根本无法确定一组参数是否允许构造函数的无错误实例化。正如评论者在上面提到的那样，没有办法确定一个类是否可以用给定的参数列表实例化，因为如果不实际尝试实例化，就无法知道运行时注意事项。

但是，*尝试*从构造函数参数列表中实例化一个类是有价值的。此类操作最明显的用例是可配置的依赖注入容器 (DIC)。不幸的是，这比 OP 建议的要复杂得多。

我们需要为提供的定义数组中的每个参数确定它是否与构造函数方法签名中指定的类型提示匹配（如果方法签名*实际上具有*类型提示）。此外，我们需要解决如何处理默认参数值。此外，为了使我们的代码真正有用，我们需要提前允许“定义”的规范来实例化一个类。对该问题的复杂处理还将涉及反射对象池（缓存），以最大限度地减少重复反射事物的性能影响。

另一个障碍是，如果不调用反射方法参数的`ReflectionParameter::getClass`方法并随后从返回的类名实例化反射类（如果`null`返回，则参数没有类型提示），就无法访​​问反射方法参数的类型提示。这就是缓存生成的反射对于任何现实世界的用例都变得特别重要的地方。

下面的代码是我自己的基于字符串的递归依赖注入容器的严重精简版本。它是伪代码和真实代码的混合体（如果您希望免费代码可以复制/粘贴，那您就太不走运了）。您将看到下面的代码将“定义”数组的关联数组键与构造函数签名中的参数名称相匹配。

真正的代码可以在相关的[github 项目页面上找到](https://github.com/rdlowrey/Auryn/wiki)。

```
class Provider {

    private $definitions;

    public function define($class, array $definition) {
        $class = strtolower($class);
        $this->definitions[$class] = $definition;
    }

    public function make($class, array $definition = null) {
        $class = strtolower($class);

        if (is_null($definition) && isset($this->definitions[$class])) {
            $definition = $this->definitions[$class];
        }

        $reflClass = new ReflectionClass($class);
        $instanceArgs = $this->buildNewInstanceArgs($reflClass);

        return $reflClass->newInstanceArgs($instanceArgs);
    }

    private function buildNewInstanceArgs(
        ReflectionClass $reflClass,
        array $definition
    ) {
        $instanceArgs = array();

        $reflCtor = $reflClass->getConstructor();

        // IF no constructor exists we're done and should just
        // return a new instance of $class:
        // return $this->make($reflClass->name);
        // otherwise ...

        $reflCtorParams = $reflCtor->getParameters();

        foreach ($reflCtorParams as $ctorParam) {
            if (isset($definition[$ctorParam->name])) {
                $instanceArgs[] = $this->make($definition[$ctorParam->name]);
                continue;
            }

            $typeHint = $this->getParameterTypeHint($ctorParam);

            if ($typeHint && $this->isInstantiable($typeHint)) {
                // The typehint is instantiable, go ahead and make a new
                // instance of it
                $instanceArgs[] = $this->make($typeHint);
            } elseif ($typeHint) {
                // The typehint is abstract or an interface. We can't
                // proceed because we already know we don't have a 
                // definition telling us which class to instantiate
                throw Exception;
            } elseif ($ctorParam->isDefaultValueAvailable()) {
                // No typehint, try to use the default parameter value
                $instanceArgs[] = $ctorParam->getDefaultValue();
            } else {
                // If all else fails, try passing in a NULL or something
                $instanceArgs[] = NULL;
            }
        }

        return $instanceArgs;
    }

    private function getParameterTypeHint(ReflectionParameter $param) {
        // ... see the note about retrieving parameter typehints
        // in the exposition ...
    }
    private function isInstantiable($class) {
        // determine if the class typehint is abstract/interface
        // RTM on reflection for how to do this
    }
} 
```

# computer-vision - 关于 vlfeat sift 的标准牛津格式

> ID：13517194
> 
> 赞同：1
> 
> 时间：2012-11-22T16:58:42.123
> 
> 标签：computer-vision, standards, sift, vlfeat

我的一个高年级同学给了我一个数据集，用于试验 vlfeat 的 SIFT，然而，她为框架部分提取的 SIFT 数据包含 5 个维度。下面给出一个例子：

```
192
9494
262.08 749.211 0.00295391 -0.00030945 0.00583025 0 0 0 45 84 107 86 8 10 49 31 21 32 37 46 50 11 23 49 60 29 30 24 17 4 15 67 25 28 47 13 11 27 9 0 40 117 99 27 3 117 117 39 19 11 18 16 32 8 27 50 117 102 20 23 18 2 10 36 45 47 84 37 16 36 31 9 50 112 52 12 9 117 36 6 4 3 15 54 117 9 3 2 31 94 101 92 23 0 20 47 36 38 14 1 0 34 19 39 52 27 0 0 31 6 14 18 29 24 13 11 11 12 10 3 1 4 25 29 5 0 5 6 3 12 29 35 2 93 73 61 50 123 118 100 109 58 44 79 122 120 108 103 87 92 61 28 33 55 107 123 123 37 73 60 32 93 123 123 89 118 118 77 66 118 118 63 96 118 94 60 27 41 74 108 118 107 81 107 118 118 43 73 64 118 118 118 56 45 38 27 58
432.424 57.2287 0.00285143 -0.00048992 0.00292525 10 12 19 26 88 43 14 10 3 4 44 50 125 74 0 1 2 4 47 34 17 3 0 0 3 3 8 6 1 0 0 1 11 12 14 17 43 37 10 6 35 36 125 77 47 10 5 13 2 7 125 125 125 29 0 2 1 3 11 15 33 5 1 0 36 14 7 8 102 64 37 27 41 8 2 2 55 53 103 125 4 2 2 5 125 125 41 28 1 3 4 7 32 11 3 1 46 29 6 7 125 57 3 3 49 11 0 1 90 34 19 31 10 3 3 6 122 33 10 9 0 2 11 10 7 2 2 1 35 64 129 129 129 93 48 44 24 55 129 117 129 71 41 19 44 65 76 58 129 129 129 89 42 48 57 96 129 129 90 55 133 118 58 42 58 42 133 133 133 62 24 17 18 12 133 133 133 133 133 125 78 33 17 29 133 133 82 45 23 11 13 44
... // the list keeps on going for all keypoints. 
```

该文件只是图像的描述符数据。我需要知道几件事：

*   前两个值“192”和“9494”是什么？
*   关键点的第 5 个值是多少？vlfeat 的筛选通常会为关键点的框架给出 4 个值。

所以我问她这个第 5 维是什么，她让我搜索“标准牛津格式”以获得 sift 功能。

问题是我试图搜索有关此标准牛津格式和筛选功能的信息，但我完全没有找到它。如果有人对此有所了解，请他指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:12:37.927

192 代表描述符长度，9494 代表文件中关键点的数量。另一行包括 [WORD_ID] [X] [Y] [A] [B] [C] X 和 Y 是特征质心，A、B、C 定义椭圆的参数，如下式 A*(xX )^2 + 2*B*( *xX) (yY) + C* (yY)^2 = 1

你可以在官方网站上查看 formate [Here](http://www.robots.ox.ac.uk/~vgg/research/affine/detectors.html) 如果你使用的是 VLfeat 包，你可以[在这里](http://www.vlfeat.org/sandbox/mdoc/vl_ubcread.html)阅读如何阅读 Oxford 格式的文件。如果你很好奇如何在 VLfeat vl_ubcread 函数中读取文件格式。[这](https://code.google.com/p/phd-workspace/source/browse/trunk/Class_Segmentation/vlfeat/toolbox/sift/vl_ubcread.m)是代码。

# c++ - Xerces 冲突 string.h

> ID：13517195
> 
> 赞同：2
> 
> 时间：2012-11-22T16:58:51.127
> 
> 标签：c++, xerces

编译我的程序我有这个错误：

```
/usr/include/xercesc/util/Compilers/GCCDefs.hpp:133:60: error: declaration of ‘int strcasecmp(const char*, const char*)’ has a different exception specifier
/usr/include/string.h:536:12: error: from previous declaration ‘int strcasecmp(const char*, const char*) throw ()’
make: *** [src/test/VFTImageMaterial.o] Error 1 
```

关于这个与 string.h 冲突的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:20:33.473

您需要定义 HAVE_STRCASECMP。这可能应该由 config.h 中的 ./configure 自动定义 - 你运行 ./configure 了吗？

# vim - Vim 中的 ls 命令显示了一个奇怪的结果

> ID：13517196
> 
> 赞同：12
> 
> 时间：2012-11-22T16:58:51.360
> 
> 标签：vim

尝试在 vim 中保存文件时，我使用 ls 命令查看要保存的文件夹。使用 ls 命令后得到以下输出：

![1 %a +](../Images/04083e520bd195475131a130fa7fba95.png)

显然这不是文件夹的内容。谁能告诉我为什么会这样以及如何解决它？谢谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T16:59:51.420

试试这两个命令

```
:help :ls
:!ls 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-23T22:52:00.893

`:!ls`是在 shell 中调用 ls 命令 == 工作目录中的文件列表。

`:ls` 是一个 Vim 内置命令，它显示缓冲区列表的内容 == 打开文件的列表。

# c# - Visual Studio 在配色方案中获取/设置“名称”

> ID：13517198
> 
> 赞同：1
> 
> 时间：2012-11-22T16:59:05.993
> 
> 标签：c#, visual-studio-2010

我正在尝试更改 Visual Studio 2010（w/ReSharper）中 C# 属性访问修饰符的颜色，但我一生都无法弄清楚它们在显示项目列表中的名称。有人知道吗？

需要明确的`get; set;`是，这个片段的一部分是我想要改变的：

```
public string Test { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:04:00.590

那是“ReSharper 方法标识符”，也用于方法声明的颜色。

# c++ - （C++）用其他数组的相应值替换字符串中找到的任何数组值？

> ID：13517199
> 
> 赞同：0
> 
> 时间：2012-11-22T16:59:09.473
> 
> 标签：c++, arrays, string, char

我尝试过各种各样的事情。不幸的是，我没有保留以前的代码记录，所以我只会向您展示我目前拥有的内容：

```
 string l2n(std::string input) {
    std::string original[26] = {"A","B","C","D","E", "F", "G", "H", "I", "J", "K," "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"};
    //std::string originalLower[26] = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"};
    std::string newval[26] = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26"};
    string neworig = (original[0], original[1], original[2], original[3], original[4], original[5], original[6], original[7], original[8], original[9], original[10], original[11], original[12], original[13], original[14], original[15], original[16], original[17], original[18], original[19], original[20], original[21], original[22], original[23], original[24], original[25]);
    string newnewval = (newval[0], newval[1], newval[2], newval[3], newval[4], newval[5], newval[6], newval[7], newval[8], newval[9], newval[10], newval[11], newval[12], newval[13], newval[14], newval[15], newval[16], newval[17], newval[18], newval[19], newval[20], newval[21], newval[22], newval[23], newval[24], newval[25]);
    size_t posit = input.find(neworig.c_str());
    string hash2345;
    hash2345 = input.replace(posit, std::string(neworig).length(), newnewval.c_str());
    return hash2345;
} 
```

编译得很好，但输出“26HELLO”和我的输入“HELLO”。它实际上只是将 26 附加到给定的任何输入的开头..我猜它与使用 input.replace 使用长度有关，但我不知道还能做什么，谷歌没有找到任何事物。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:16:11.057

我认为你误解了什么`string::replace`。它不会将一个字符串中的字符替换为另一个字符串中的等价字符。它用另一个字符串的全部替换一个字符串中的一个字符范围。

例如，

```
std::string test = "This is a test.";

// Replace 2 characters, starting at position 5 with "was"
test.replace(5, 2, "was");

std::cout << test;  // Outputs "This was a test." 
```

对于您正在做的事情，您将需要一个循环来对输入中的每个字符执行操作，例如

```
string hash2345;

// For each character in input
for (int i = 0; i < input.length(); ++i) {

  // Try to find the string equal to the i'th character of input in 
  // the "original" array.
  string* original_val_ptr = std::find(original, original + 26, 
                                       std::string(input[i]));

  // Make sure that it actually found something (this handles the case
  // where input has some other characters, like lowercase or punctuation).
  if (original_val_ptr != NULL) {

    // Find the position of this value in the original array.
    size_t pos = original_val_ptr - original;

    // Add the string in the equivalent position in the "newval" array
    // to the output.
    hash2345 += newval[pos];
  }
}

return hash2345; 
```

现在可以对您的代码进行一些额外的改进，我相信其他答案会建议它们，但鉴于您似乎是一个相对较新的程序员，我选择让这个答案尽可能简单可能并且只关注您显然试图实现的算法的正确性。

此外，这适用于一组字符到另一组字符的任何映射，即使它不是字母到数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:13:03.777

根据上面的评论，并假设您使用的是 ASCII，那么以下就是您想要的

```
string l2n(std::string input)
{
    ostringstream buf;
    for (string::const_iterator i = input.begin(); i != input.end() ++i)
    {
        buf << (*i - 'A') + 1;
    }
    return buf.str();
} 
```

# android - 在某些手机中拍摄时照片旋转 90 度

> ID：13517200
> 
> 赞同：4
> 
> 时间：2012-11-22T16:59:12.407
> 
> 标签：android, android-camera

照片旋转 90 度，同时从三星手机中的相机拍摄，其余其他手机工作正常。请帮助我。

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, IMAGE_CAPTURE); 

@Override 
protected void onActivityResult(int requestCode, int resultCode, Intent data) {     
    super.onActivityResult(requestCode, resultCode, data);    
    try
    {
         if (requestCode == IMAGE_CAPTURE) {
            if (resultCode == RESULT_OK){

                Uri contentUri = data.getData();
                if(contentUri!=null)
                {
                    String[] proj = { MediaStore.Images.Media.DATA };         
                    Cursor cursor = managedQuery(contentUri, proj, null, null, null);         
                    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);         
                    cursor.moveToFirst();         
                    imageUri = Uri.parse(cursor.getString(column_index));
                }

                tempBitmap = (Bitmap) data.getExtras().get("data"); 
                mainImageView.setImageBitmap(tempBitmap);
                isCaptureFromCamera = true;
            }
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T15:16:51.953

这恰好是早期版本的 Android 中的一个错误。

我解决了这个问题，只是获取了方向角并相应地旋转了位图。

```
public  Bitmap decodeFile(String path) {//you can provide file path here 
    int orientation;
    try {
        if (path == null) {
            return null;
        }
        // decode image size 
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 0;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
        scale++;
        }
        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        Bitmap bm = BitmapFactory.decodeFile(path, o2);
        Bitmap bitmap = bm;

        ExifInterface exif = new ExifInterface(path);

        orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

        Log.e("ExifInteface .........", "rotation ="+orientation);

        //exif.setAttribute(ExifInterface.ORIENTATION_ROTATE_90, 90);

        Log.e("orientation", "" + orientation);
        Matrix m = new Matrix();

        if ((orientation == ExifInterface.ORIENTATION_ROTATE_180)) {
            m.postRotate(180);
            //m.postScale((float) bm.getWidth(), (float) bm.getHeight());
            // if(m.preRotate(90)){
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),bm.getHeight(), m, true);
            return bitmap;
        } else if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
            m.postRotate(90); 
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),bm.getHeight(), m, true);
            return bitmap;
        }
        else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
            m.postRotate(270);
            Log.e("in orientation", "" + orientation);
            bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),bm.getHeight(), m, true);
            return bitmap;
        } 
        return bitmap;
    } catch (Exception e) {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:03:07.123

同时查询 MediaStore.Images.Media.ORIENTATION 值以获取旋转角度。然后您可以自己或其他任何方式旋转图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T08:47:12.530

我在做什么：首先使用其元数据信息检查相机拍摄的图像的方向，如果我们在纵向中找到它，那么我们必须将图像旋转 90 并显示，否则只显示。

为了获取有关图像方向的信息，我们可以使用 ExifInterface。就是这样！

# django - Django 使用nose、django-nose 和selenium 测试冻结

> ID：13517202
> 
> 赞同：3
> 
> 时间：2012-11-22T16:59:16.990
> 
> 标签：django, testing, selenium, nose, django-nose

我正在尝试测试我的 django 项目，我有一个具有非常经典布局的应用程序，如下所示：

```
project
├── __init__.py
└── app
    ├── __init__.py
    ├── models.py
    ├── tests
    │   ├── __init__.py
    │   ├── models.py
    │   └── views.py
    └── views.py 
```

在 manage.py 的父目录中使用 manage.py （根据 django 1.4 新布局）。

在 tests/__init__.py 我有类似的东西：

```
from project.app.tests.models import *
from project.app.tests.views import * 
```

在 tests/models.py 我有经典的 python 测试（工作得很好），在 tests/views.py 我有硒测试。

现在当我这样做时：

```
python manage.py test project/app/tests/views.py 
```

硒测试工作没有任何问题（他们现在失败了，但我正在努力）。但是当我这样做时：

```
python manage.py test project/app 
```

一些常规测试正常启动，但在某些时候，firefox 启动，一切都冻结了，没有更多测试启动，firefox 和终端都没有发生任何事情。

我要补充一点，我的常规测试来自 unittest.TestCase（不是 django.test.TestCase），我的 selenium 测试来自 django.test.LiveServerTestCase，并且我使用的是 django 1.4.0、nose 1.2.1、django -鼻子 1.1 和硒 2.26.0。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T09:28:02.983

我在某处读过（忘记了它的来源），您正在使用的组合需要 sqlite 的测试数据库别名（TEST_NAME）。并且不使用内存中的sqlite数据库。不确定您在测试时使用的是什么数据库，但也许这些信息有帮助？

我把它放在我的开发设置中：

```
DATABASES = {
    'default': {
        'NAME': os.path.join(BUILDOUT_DIR, 'var', 'sqlite', 'development.db'),
        # TEST_NAME is absolutely CRITICAL for getting django-nose-selenium
        # going with sqlite3\. The default in-memory breaks everything.
        'TEST_NAME': os.path.join(BUILDOUT_DIR, 'var', 'sqlite', 'unittest.db'),
        'ENGINE': 'django.db.backends.sqlite3', 
        'USER': '',
        'PASSWORD': '',
        'HOST': '',  # empty string for localhost.
        'PORT': '',  # empty string for default.
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:33:07.320

如果您使用 selenium 的[等待方法](http://seleniumhq.org/docs/04_webdriver_advanced.html)，则可能会阻止测试，直到满足特定条件。请参阅上面的 webdriver 文档。

# c++ - CGAL二次规划求解器，如何在目标函数中输入“x^4”？并在约束中？

> ID：13517203
> 
> 赞同：2
> 
> 时间：2012-11-22T16:59:17.600
> 
> 标签：c++, exponent, cgal, quadratic

我正在尝试最小化如下函数：

```
a*x^4+b*y 
```

和约束，如：

```
x^2 <= a 
```

在[CGAL::Quadratic_program](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/QP_solver/Chapter_main.html#Section_10.3)中。

要在目标函数中输入“x^2”，我可以执行以下操作：

```
qp.set_d(X, X, 2); 
```

但是“x^4”呢？

要添加像“x<=a”这样的约束：

```
hp.set_a(X, 0, 1);
hp.set_b(0, a); 
```

但是 "x^2 <= a" 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:20:24.783

解决这个问题的解决方案

![在此处输入图像描述](../Images/8a261063a127ab24965f27870e44bff1.png)

一类问题是修改目标函数和约束，在这种情况下通过设置 z^2 = z。

```
 //>=
        Program hp(CGAL::LARGER, false, 0, false, 0);
        //x+y >= -4
        hp.set_a(X, 0, 1); hp.set_a(Y, 0, 1);
        hp.set_b(0, -4);
        //4x+2y+z^2 >= -a*b
        //z^2 = z
        hp.set_a(X, 1, 4); hp.set_a(Y, 1, 2); hp.set_a(Z, 1, 1);
        hp.set_b(1, -a * b);
        //-x + y >= −1
        hp.set_a(X, 2, -1); hp.set_a(Y, 2, 1);
        hp.set_b(2, -1);
        //x <= 0
        hp.set_a(X,3,1);
        hp.set_b(3,0);
        hp.set_r(3,CGAL::SMALLER);
        //y <= 0
        hp.set_a(Y,4,1);
        hp.set_b(4,0);
        hp.set_r(4,CGAL::SMALLER);
        //objective function
        //min a*x^2 + b*y + z^4
        //z^2 = z
        //min a*x^2 + b*y + z^2
        hp.set_d(X, X, 2 * a); //2D
        hp.set_c(Y, b);
        hp.set_d(Z, Z, 2); //2D

        // solve the program
        Solution s = CGAL::solve_quadratic_program(hp, ET());
        assert(s.solves_quadratic_program(hp)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:25:22.507

从给定的链接：

> 这个包可以让你解决一般形式的凸*二次规划......*

为什么您决定可以使用*二次*求解器来求解您的四次幂多项式？Quadratic 不代表“quadra”为“四”，它代表正方形为“quadragon”，意思是二的幂。

简而言之：您无法使用此工具来解决您的问题。

# dojo - dojo FileUploader 与 express.js

> ID：13517206
> 
> 赞同：2
> 
> 时间：2012-11-22T16:59:25.617
> 
> 标签：dojo, express

我正在尝试在客户端使用 dojo FileUploader 和在服务器端使用 express.js 上传图像。图片上传完成后，我想预览上传的图片。这是我的代码：-

图片上传的 Ajax 请求：-

```
require(['dojo/dom','dojo/_base/array','dojo/dom-construct','dojo/query',"dojo/request",'dojo/on',"dojox/form/FileUploader","dojo/domReady!"],function(dom,array,domConstruct,query,xhr,on,FileUploader)
    {
       var upld = new FileUploader(
       {
        degradable:true,
        uploadUrl:'http://localhost:8005/testy',
        uploadOnChange:false,
        title:'uploader,
        isDebug:true,
        devMode:true
       },'test');

       on(upld,'change',function(data)
       {
        array.forEach(data,function(d)
        {
           dom.byId('filename').innerHTML = d.name;
            });
       });
       on(upld,'complete',function(data)
       {
        array.forEach(data, function(d)
        {
           dom.byId("rgtCol").innerHTML += '<img src="'+d.file+'" />';
        });
       });
       on(dom.byId('btn'),'click',function(evt)
       {
        upld.upload();
       });
    }); 
```

html代码：-

```
<div id='test'>Uploader</div>
<div id='filename'></div>
<div id='rgtCol'></div>
<input type='button'  id='btn' label='submit' /> 
```

服务器端代码：- 这是我的服务器端代码：-

```
 var express = require('express'),
    fs = require('fs');
    app = express.createServer();

    app.use(express.bodyParser())
    app.post('/testy', function(req, res)
    {
      var filename = req.body.Filename;
      var body = req.files.flashUploadFiles.path;  
      fs.createReadStream(body).pipe(fs.createWriteStream('tmp/' + filename));

      res.send('tmp/' + filename);
    });  

app.listen(8005); 
```

我的问题是图片已上传，但我无法在客户端预览上传的图片。我可以在服务器端使用 php 文件但不能在 express.js 中执行这些操作

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:11:32.487

在将二进制数据（如图像）推送给用户时，我碰巧使用[了 binaryJS](http://binaryjs.com/)。它建立在socketIO之上，您可以在上传完成后触发预览

```
server.on('connection', function(client){
  // Stream a flower as a hello!
  var file = fs.createReadStream(__dirname + '/flower.png');
  client.send(file); 
}); 
```

这样，您可以将图像作为预览发送给用户。如果需要，您可能想通过 ImageMagick 创建缩略图，但这是额外的。我向您展示的[示例是 binaryJS 的 hello world 示例](https://github.com/binaryjs/binaryjs/tree/master/examples/helloworld)。

# python - Python 如何使用 osgeo.ogr.Geometry 对象计算多边形周长

> ID：13517211
> 
> 赞同：4
> 
> 时间：2012-11-22T16:59:57.147
> 
> 标签：python, geometry, computational-geometry

首先，我很抱歉发布这个简单的问题。我需要计算一定数量的几何属性（面积、周长、圆度、长轴和短轴等）。我正在使用[GDAL/OGR](http://www.osgeo.org/gdal_ogr)读取我的多边形的 shapefile 格式。我想问的是：

1.  有没有使用 osgeo.ogr.Geometry 计算周长的方法？
2.  是否有用于计算多边形指标的模块？

提前致谢

```
 import osgeo.gdal, ogr
    poly="C:\\\myshape.shp"
    shp = osgeo.ogr.Open(poly)
    layer = shp.GetLayer()
    # For every polygon
    for index in xrange(len(allFID)):
        feature = layer.GetFeature(index)
        # get "FID" (Feature ID)
        FID = str(feature.GetFID())
        geometry = feature.GetGeometryRef()
        # get the area
        Area = geometry.GetArea() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:28:50.833

```
 ref_geometry = ref_feature.GetGeometryRef()
        pts = ref_geometry.GetGeometryRef(0)
        points = []
        for p in xrange(pts.GetPointCount()):
            points.append((pts.GetX(p), pts.GetY(p)))

def edges_index(points):
    """
    compute edges index for a given 2D point set

    1- The number of edges which form the polygon
    2- Perimeter
    3- The length of the longest edge in a polygon
    4- The length of the shortest edge in a polygon
    5- The average length of all of edges in a polygon
    6- The lengths of edges deviate from their mean value
    """
    Nedges = len(points)-1
    length = []
    for i in xrange(Nedges):
        ax, ay = points[i]
        bx, by = points[i+1]
        length.append(math.hypot(bx-ax, by-ay))
    edges_perimeter = numpy.sum(length)
    edges_max = numpy.amax(length)
    edges_min = numpy.amin(length)
    edges_average = numpy.average(length)
    edges_std = numpy.std(length)
    return (Nedges,edges_perimeter,edges_max,edges_min,edges_average,edges_std) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T16:15:09.963

我可能在这个问题上迟到了，但我正在寻找同一个问题的解决方案，而我碰巧遇到了这个问题。我通过简单地找到几何的边界然后找到边界的长度来解决这个问题。下面的示例 Python 代码：

```
perimeter = feat.GetGeometryRef().Boundary().Length() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T16:32:08.883

```
poly = [(0,10),(10,10),(10,0),(0,0)]

def segments(poly):
        """A sequence of (x,y) numeric coordinates pairs """
        return zip(poly, poly[1:] + [poly[0]])

def area(poly):
    """A sequence of (x,y) numeric coordinates pairs """
    return 0.5 * abs(sum(x0*y1 - x1*y0
        for ((x0, y0), (x1, y1)) in segments(poly)))

def perimeter(poly):
    """A sequence of (x,y) numeric coordinates pairs """
    return abs(sum(math.hypot(x0-x1,y0-y1) for ((x0, y0), (x1, y1)) in segments(poly))) 
```

# excel - 通过电子邮件搜索将 Excel 2003 中的数据行复制并粘贴到不同的工作表

> ID：13517213
> 
> 赞同：2
> 
> 时间：2012-11-22T17:00:06.980
> 
> 标签：excel, vba, search, copy-paste

在任何人说什么之前，我已经浏览了几个与这个类似想法相关的帖子（通过不同的搜索条件然后修改它），但我无法让宏工作。这可能是由于我缺乏编程知识！我要做的就是在**WORKSHEET 1中****搜索**一个电子邮件地址，如果找到它，将整行复制到**WORKSHEET 2**中的下一个空闲行。我正在使用 Excel 2003（是的，我是一个老顽固！）。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:43:38.330

其实我觉得你是个聪明人；我个人讨厌 2007/2010 的用户界面有很多原因。

要回答你的问题，看看这是否有意义。（它又快又脏，所以它不是防弹的。不过，它应该给你一个起点。）

```
Sub FindAndCopyEmailAddress()

Dim vnt_Input As Variant
Dim rng_Found As Excel.Range
Dim wks1 As Excel.Worksheet, wks2 As Excel.Worksheet
Dim rng_target As Excel.Range
Dim l_FreeRow As Long

'Check that the sheets are there, and get a reference to
'them. Change the sheet names if they're different in yours.
On Error Resume Next
Set wks1 = ThisWorkbook.Worksheets("Sheet1")
Set wks2 = ThisWorkbook.Worksheets("Sheet2")

'If a runtime error occurs, jump to the line marked 
'ErrorHandler to display the details before exiting the 
'procedure.
On Error GoTo ErrorHandler

'Creating a message to tell *which* one is missing is left as an exercise
'for the reader, if you wish to.
If wks1 Is Nothing Or wks2 Is Nothing Then
    Err.Raise vbObjectError + 20000, , "Cannot find sheet1 or 2"
End If

'Get the e-mail address that you want to find.
'You don't HAVE to use an InputBox; you could, for instance,
'pick it up from the contents of another cell; that's up
'to you.
vnt_Input = InputBox("Please enter the address that you're looking for", "Address Copier")

'If the user cancels the input box, exit the program.
'Do the same if there's no entry.
'Rather than exiting immediately we jump to the label
'ExitPoint so that all references are cleaned up.
'Perhaps unnecessary, but I prefer good housekeeping.
If vnt_Input = "" Then GoTo ExitPoint

'Find the range containing the e-mail address, if there is one.
'wks1.Cells essentially means "Look in all of the cells in the sheet
'that we assigned to the wks1 variable above". You don't have to be
'on that sheet to do this, you can be in any sheet of the workbook.
Set rng_Found = wks1.Cells.Find(What:=vnt_Input, After:=ActiveCell, _
 LookIn:=xlFormulas, LookAt:=xlPart, SearchOrder:=xlByRows, _
 SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

'The range will be Nothing if the address is not found. In that case, exit.
If rng_Found Is Nothing Then
    MsgBox "Cannot find that address."
    GoTo ExitPoint
End If

'Find the last free row in sheet2
'The .Row property tells us where the used range starts,
'the .Rows property tells us how many to add on to that to 
'find the first free one.
'The only slight problem is that if there are no cells at
'all used in sheet 2, this will return row 2 rather than row
'1, but in practice that may not matter.
'(I wouldn't be surprised if you want headings anyway.)
l_FreeRow = wks2.UsedRange.Row + wks2.UsedRange.Rows.Count

'Make sure that the row is not greater than the number
'of rows on the sheet.
If l_FreeRow > wks2.Rows.Count Then
    Err.Raise vbObjectError + 20000, , "No free rows on sheet " & wks2.Name
End If

'Set a range reference to the target.
'This will be the first free row, column 1 (column A).
Set rng_target = wks2.Cells(l_FreeRow, 1)

'Now copy the entire row that contains the e-mail address
'to the target that we identified above. Note that we DON'T need
'to select either the source range or the target range to do this; in fact
'doing so would just slow the code down.
rng_Found.EntireRow.Copy rng_target

'We always leave the procedure at this point so that we can clear
'all of the object variables (sheets, ranges, etc).
ExitPoint:

On Error Resume Next
Set rng_Found = Nothing
Set wks1 = Nothing
Set wks2 = Nothing
Set rng_target = Nothing
On Error GoTo 0

Exit Sub

ErrorHandler:

MsgBox "Error " & Err.Number & vbCrLf & Err.Description

Resume ExitPoint

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:14:17.127

我将以下代码放在一起，它将查看一系列单元格的内容并将包含某些字符串（在本例中为“@”）的单元格行复制到目标工作簿的新行。

```
Dim srcWorkbook As Workbook
Dim destWorkbook As Workbook
Dim srcWorksheet As Worksheet
Dim destWorksheet As Worksheet
Dim SearchRange As Range
Dim destPath As String
Dim destname As String
Dim destsheet As String
Set srcWorkbook = ActiveWorkbook
Set srcWorksheet = ActiveSheet

destPath = "C:\test\"
destname = "dest.xlsm"
destsheet = "Sheet1" 
```

'将此设置为您的目标工作簿路径/工作簿名称/工作表名称

```
On Error Resume Next
Set destWorkbook = Workbooks(destname)
If Err.Number <> 0 Then
    Err.Clear
    Set wbTarget = Workbooks.Open(destPath & destname)
    CloseIt = True
End If 
```

'如果目标工作簿关闭，这将打开它

```
For Each c In Range("A1:A100").Cells 
```

'将此范围设置为您要检查电子邮件的单元格

```
If InStr(c, "@") > 0 Then 
```

'在此处设置确定电子邮件地址的计算（目前它只检查@符号）

```
 c.EntireRow.Copy
    destWorkbook.Activate
    destWorkbook.Sheets(1).Range("A" & Rows.Count).End(xlUp).Offset(1).EntireRow.Select 
```

'这将查找并选择目标表上的下一个空行

```
Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:= _
        False, Transpose:=False
    srcWorkbook.Activate
End If
Next 
```

抱歉，如果我弄乱了代码标签，我是该网站的新手 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T01:35:46.413

这段代码对于在同一个工作簿上进行复制应该要简单得多，我把我的最后一个答案留在那里，以防你也需要它来跨工作簿工作:)

```
For Each c In Range("A1:A100").Cells
'SET THIS RANGE TO THE CELLS YOU WANT TO CHECK FOR EMAIL
If InStr(c, "@") > 0 Then
'SET THE CALCULATION FOR DETERMINING AN EMAIL ADDRESS HERE (Currently it just checks for an @ symbol)
c.EntireRow.Copy Destination:=ActiveWorkbook.Worksheets("Sheet2").Range("A" & Rows.Count).End(xlUp).Offset(1)
End If
Next 
```****

# database - 将日历控件连接到 LINQ 数据库 - Visual Studio

> ID：13517218
> 
> 赞同：1
> 
> 时间：2012-11-22T17:00:15.340
> 
> 标签：database, vb.net, linq, datetime, calendar

我有 2 个日历控件“cldStartDate”和“cldEndDate”，它们链接到 2 个文本框“txtStartDate”和“txtEndDate”。选择日期后，这些文本框将保存日期。我正在尝试让我的代码将日期添加到我的数据库中。它具有以下字段：

-ProjectName -Description -StartDate -EndDate

'StartDate' 和 'EndDate' 在我的数据库中都是 DateTime 类型。有人可以指出我的代码哪里出错了。我想我需要更改代码以将日期值作为 DateTime 传递。有没有人知道我可以如何做到这一点。代码如下。谢谢！

Protected Sub btnAddProject_Click(ByVal sender As Object, ByVal e As System.EventArgs) 处理 btnAddProject.Click

```
 Dim projectName As String
    Dim projectDescription As String
    Dim startdate As String
    Dim enddate As String

    projectName = txtProjectName.Text
    projectDescription = txtProjectName.Text
    startdate = txtStartDate.Text
    enddate = txtEndDate.Text

    ' check the validity of information entered
    Dim isValid As Boolean
    isValid = True

    If String.IsNullOrEmpty(projectName) Or String.IsNullOrEmpty(projectDescription)     Then
        isValid = False
    End If

    If isValid Then
        'add everything to the database
        Dim db As New AgileClassesDataContext()

        Dim startDate As String
        startDate = DateTime.Parse(startDate)

        Dim endDate As String
        endDate = DateTime.Parse(endDate)

        ' create a project to populate a row in the PROJECT table
        Dim project As New Project With _
        {.ProjectName = projectName, _
         .Description = projectDescription _
         .StartDate = startdate _
         .EndDate = enddate}

        ' add the new project to the PROJECT table
        db.Projects.InsertOnSubmit(project)

        ' submit the changes to the database
        Try
            db.SubmitChanges()
        Catch ex As Exception
            Console.WriteLine(ex)
            db.SubmitChanges()
        End Try' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:44:09.150

我*怀疑*直接的问题是您的对象初始化程序的语法。而不是这个：

```
Dim project As New Project With _
    {.ProjectName = projectName, _
     .Description = projectDescription _
     .StartDate = startdate _
     .EndDate = enddate} 
```

...每个属性后应该有一个逗号：

```
Dim project As New Project With { _
    .ProjectName = projectName, _
    .Description = projectDescription, _
    .StartDate = startdate, _
    .EndDate = enddate } 
```

# android - 自定义布局，使其内容的角落变得圆润

> ID：13517221
> 
> 赞同：18
> 
> 时间：2012-11-22T17:00:35.273
> 
> 标签：android, android-layout

我想创建一个通用的 ViewGroup，然后可以在 XML 布局中重用它，以绕过放入其中的任何内容的角落。

由于某种原因`canvas.clipPath()`似乎没有效果。我究竟做错了什么？

这是Java代码：

```
package rounded;

import static android.graphics.Path.Direction.CCW;
public class RoundedView extends FrameLayout {
    private float radius;
    private Path path = new Path();
    private RectF rect = new RectF();

    public RoundedView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.radius = attrs.getAttributeFloatValue(null, "corner_radius", 0f);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int savedState = canvas.save();
        float w = getWidth();
        float h = getHeight();
        path.reset();
        rect.set(0, 0, w, h);
        path.addRoundRect(rect, radius, radius, CCW);
        path.close();
        boolean debug = canvas.clipPath(path);
        super.onDraw(canvas);
        canvas.restoreToCount(savedState);
    }
} 
```

XML 中的用法：

```
<?xml version="1.0" encoding="utf-8"?>
<rounded.RoundedView   xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    corner_radius="40.0" >
    <RelativeLayout 
        android:id="@+id/RelativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        ...
    </RelativeLayout>
</rounded.RoundedView> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2015-09-24T15:36:31.597

创建`ViewGroup`子剪辑的正确方法是在`dispatchDraw(Canvas)`方法中进行。

这是一个关于如何`ViewGroup`用圆圈剪辑 a 的任何子项的示例：

```
private Path path = new Path();

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

    // compute the path
    float halfWidth = w / 2f;
    float halfHeight = h / 2f;
    float centerX = halfWidth;
    float centerY = halfHeight;
    path.reset();
    path.addCircle(centerX, centerY, Math.min(halfWidth, halfHeight), Path.Direction.CW);
    path.close();

}

@Override
protected void dispatchDraw(Canvas canvas) {
    int save = canvas.save();
    canvas.clipPath(circlePath);
    super.dispatchDraw(canvas);
    canvas.restoreToCount(save);
} 
```

该`dispatchDraw`方法是用来剪辑子项的方法。`setWillNotDraw(false)`如果您的布局只是剪辑其子级，则无需这样做。

这张图片是用上面的代码获得的，我只是扩展了 Facebook `ProfilePictureView`（这是一个包含facebook 个人资料图片`FrameLayout`的正方形）：`ImageView`

[![圆形剪裁](../Images/7e70716bca405bbfd4d6a2ae918765e1.png)](https://i.stack.imgur.com/WzRb5.png)

因此，要实现圆形边框，您可以执行以下操作：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

    // compute the path
    path.reset();
    rect.set(0, 0, w, h);
    path.addRoundRect(rect, radius, radius, Path.Direction.CW);
    path.close();

}

@Override
protected void dispatchDraw(Canvas canvas) {
    int save = canvas.save();
    canvas.clipPath(path);
    super.dispatchDraw(canvas);
    canvas.restoreToCount(save);
} 
```

[![圆形边框剪裁](../Images/f576e960eb2bb18d9375ad6c7461d1f1.png)](https://i.stack.imgur.com/1eWrl.png)

您实际上可以创建任何复杂的路径:)

请记住，您可以使用您喜欢的“Op”操作多次调用 clipPath，以便以您喜欢的方式与多个剪辑相交。

注意：我在 中创建了路径，`onSizeChanged`因为这样做`onDraw`不利于性能。

注意2：剪切路径是在没有抗锯齿的情况下完成的：/所以如果你想要平滑的边框，你需要以其他方式进行。我现在不知道有任何方法可以使剪辑使用抗锯齿。

**更新（大纲）**

由于 Android Lollipop (API 21) 高程和阴影可以应用于视图。引入了一个称为[大纲](https://developer.android.com/reference/android/graphics/Outline.html)的新概念。这是一条告诉框架用于[计算阴影](https://developer.android.com/training/material/shadows-clipping.html#Shadows)和其他东西（如*涟漪效应*）的视图形状的路径。

视图的默认值`Outline`是视图大小的矩形，但可以很容易地制作成椭圆形/圆形或圆角矩形。要定义自定义`Outline`，您必须在视图上使用该方法[`setOutlineProvider()`](https://developer.android.com/reference/android/view/View.html#setOutlineProvider(android.view.ViewOutlineProvider))，如果它是自定义视图，您可能希望在构造函数中将其设置为自`ViewOutlineProvider`定义视图的内部类。`Outline`您可以使用您选择的 a定义您自己的提供者`Path`，只要它是[凸路径](https://en.wikipedia.org/wiki/Convex_hull)（数学概念意味着没有凹槽和孔的封闭路径，例如星形和齿轮形状都不是凸形的）。

您也可以使用该方法[`setClipToOutline(true)`](https://developer.android.com/reference/android/view/View.html#setClipToOutline(boolean))使大纲也剪辑（我*认为*这也适用于抗锯齿，*有人可以在评论中确认/反驳吗？*），但这仅支持非`Path`大纲。

祝你好运

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-08-16T16:29:59.320

您可以覆盖该`draw(Canvas canvas)`方法：

```
 public class RoundedLinearLayout extends LinearLayout {
        Path mPath;
        float mCornerRadius;

        public RoundedLinearLayout(Context context) {
            super(context);
        }

        public RoundedLinearLayout(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        public RoundedLinearLayout(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
        }

        @Override
        public void draw(Canvas canvas) {
            canvas.save();
            canvas.clipPath(mPath);
            super.draw(canvas);
            canvas.restore();
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
            RectF r = new RectF(0, 0, w, h);
            mPath = new Path();
            mPath.addRoundRect(r, mCornerRadius, mCornerRadius, Direction.CW);
            mPath.close();
        }

        public void setCornerRadius(int radius) {
            mCornerRadius = radius;
            invalidate();
        }
      } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-23T09:13:06.053

**如果未设置 Ur **Layout 的背景，则不会****调用**FrameLayout 的**onDraw**；**

 ****你应该重写 dispatchDraw；

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-13T19:50:09.173

Don't forget to ask for onDraw to be called with setWillNotDraw(false); and set a value to mRadius then just do something like that :

```
@Override
protected void onDraw(Canvas canvas) {
    mPath.reset();
    mRect.set(0, 0, canvas.getWidth(), canvas.getHeight());
    mPath.addRoundRect(mRect, mRadius, mRadius, Direction.CCW);
    mPath.close();
    canvas.clipPath(mPath);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-22T18:44:25.997

`ViewGroup`（以及因此它的子类）设置一个标志，表明它默认不进行任何绘图。在源代码中，它看起来有点像这样：

```
// ViewGroup doesn't draw by default
if (!debugDraw()) {
    setFlags(WILL_NOT_DRAW, DRAW_MASK);
} 
```

所以你`onDraw(...)`现在可能根本不会受到打击。如果您想做任何手工绘图，请致电`setWillNotDraw(false)`.

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-13T05:15:39.910

你需要重写 drawChild() 方法来剪辑 childViews。

```
@Override
protected boolean drawChild(Canvas canvas, View child, long drawingTime) {
    int flag = canvas.save();
    canvas.clipPath(pathToClip);
    boolean result=super.drawChild(canvas, child, drawingTime);
    canvas.restoreToCount(flag);
    return result;
} 
```

如果您也想剪辑 ViewGroup 的背景，请改写 draw()。像这样

```
@Override
public void draw(Canvas canvas) {
    int flag = canvas.save();
    canvas.clipPath(pathToClip);
    super.draw(canvas);
    canvas.restoreToCount(flag);
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-11-22T17:10:59.230

为什么不将 ShapeDrawable 定义为布局的背景，并在运行时更改可绘制对象的圆角半径。****

# android - Facebook SDK for Android 对依赖项的重复支持库

> ID：13517222
> 
> 赞同：34
> 
> 时间：2012-11-22T17:00:37.410
> 
> 标签：android, facebook-android-sdk, android-support-library

我已经实现了新的 Facebook SDK 3.0 beta。该库项目包含 Android 支持库 v4。我自己的项目也有支持库（虽然是不同的版本）。当我将 Facebook SDK 添加为库时，控制台上出现下一个错误：

```
Jar mismatch! Fix your dependencies
Found 2 versions of android-support-v4.jar in the dependency list,
but not all the versions are identical (check is based on SHA-1 only at this time).
All versions of the libraries must be the same at this time. 
```

我试图排除`libs`构建路径上的文件夹，但错误仍然存​​在。

我必须在两个地方都放同一个 .jar。我在这里错过了什么吗？这个想法是使用我自己项目的支持库（以保持更新）。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-11-22T17:06:51.843

似乎不同的项目正在使用两个单独的支持库，因此校验和是不同的。

您必须对 Facebook SDK 项目和您正在构建的应用程序***重复此操作。***

当我收到此错误时，我会做的是：

1.  右键单击该项目。

2.  将鼠标悬停在 Android 工具上。

3.  单击“添加支持库...”

4.  接受库的下载。

这确保了两件事：您可以从 Google 来源获得最新版本的支持库，并且 b。您在所有项目中都有完全相同的库。

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T14:15:51.477

通过顶部答案中提到的菜单安装相同版本的支持库是一个很好的解决方案。

虽然这有时对我不起作用（我认为这与我的 Workspace 文件夹与 Dropbox 同步，所以 Eclipse 有时不会覆盖文件）所以我使用的方法是从中央链接支持库地方。

您的 SDK 文件夹中有这些 JAR 文件（例如 Windows 上的 C:\Program Files (x86)\Android\android-sdk\extras\android\），这些 JAR 文件会在您运行 SDK 管理器时进行更新，因此您可以参考Facebook（或任何其他库）和您的项目中的一个。因为最后，来自 JAR 文件的代码被打包到您的`classes.dex`. 您甚至不需要`libs`文件夹中的支持库。

另外：如果您使用[Gradle](https://en.wikipedia.org/wiki/Gradle)构建系统及其依赖管理甚至[Maven](http://en.wikipedia.org/wiki/Apache_Maven)，您将不会遇到此类问题，但它们需要更多时间和知识才能正确设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:07:38.663

只需删除项目中的那个，将其从类路径中删除，然后尝试重建您的项目。

# c++ - std::reference_wrapper 何时转换为 T&？

> ID：13517223
> 
> 赞同：5
> 
> 时间：2012-11-22T17:00:44.420
> 
> 标签：c++, c++11, reference-wrapper

考虑以下代码：

```
#include <iostream>
#include <functional>

using namespace std;

template<class T>
void fun(T t) 
{ 
    t+=8;
}

int main()
{
    int i = 0;
    fun(ref(i));
    cout << i << endl;
} 
```

此代码打印“8”。我假设 fun() 中的 t 会自动转换为 int&。

但是如果我用 替换`t+=8`，`t=8`程序将无法编译。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:13:35.197

`reference_wrapper<T>`有一个到 的隐式转换运算符`T &`，因此它将被转换到`T &`任何`T &`比 a 更好匹配的地方`reference_wrapper<T>`。

在扩充的赋值表达式中，唯一可行的运算符`int &operator+=(int &, int)`是`int &`提取的。

在赋值表达式中，`reference_wrapper<int>::operator=(const reference_wrapper<int> &)`也可以使用成员运算符，所以首选成员运算符；然后编译器尝试从常量构造一个引用包装器`8`，但失败了。赋值运算符具有重新绑定的效果，这对于希望`tie`按预期工作的设施是必要的。

这意味着引用包装器比 C++ 引用更接近 Python 等语言中的引用：

```
#include <functional>
#include <iostream>

int main() {
    int i = 1, j = 2;
    std::ref(i) = j;
    std::cout << i << '\n';                 // prints '1'
} 
```

# javascript - 如何刷新谷歌地图

> ID：13517228
> 
> 赞同：0
> 
> 时间：2012-11-22T17:01:13.820
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有个问题：

1.  我在地图上放置了标记
2.  我过滤数据并希望放置这些标记的一部分 => 我将 json 发送到服务器
3.  我得到响应，删除所有标记并尝试放置新标记，但我的 gmap 是灰色的并且什么都没有出现。这是一段代码：

    ```
    var pins;

    function processFilterResult(data) {

        pins = data;

        var myLatlng = new google.maps.LatLng(pins[0].gpsLocationN, pins[0].gpsLocationW);
        var myOptions = {
            zoom : 7,
            center : myLatlng,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        for(var i=0; i<pins.length; i++) {
            pins[i] = createMarkers(new google.maps.LatLng(pins[i].gpsLocationN,pins[i].gpsLocationW), pins[i]);
        }
    }

    function initializeGMap() {

        pins = convertToJSON($("#someId"));

        var myLatlng = new google.maps.LatLng(pins[0].gpsLocationN, pins[0].gpsLocationW);
        var myOptions = {
            zoom : 7,
            center : myLatlng,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        for(var i=0; i<pins.length; i++) {
            pins[i] = createMarkers(new google.maps.LatLng(pins[i].gpsLocationN,pins[i].gpsLocationW), pins[i]);
        }
        google.maps.event.addListener(map, 'click', function(event) {

        });} 
    ```

清除标记：

```
 function clearOverlays() {
          for (var i = 0; i < pins.length; i++ ) {
            pins[i].setMap(null);
          }
          pins = new Array();
    } 
```

过滤：

```
 $.post(
                            "/mediabook/owner/filterMaps.json",
                            a,
                            function(data) {
                                clearOverlays();
                                processFilterResult(data);
                            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:30:19.170

我不清楚你的整个代码，我认为你的代码应该是这样的：

```
var map;
function processFilterResult(data) 
{
    pins = data;
    var myLatLng = new google.maps.LatLng(pins[0].gpsLocationN, pins[0].gpsLocationW); 
    map.panTo(myLatLng);
    for(var i=0; i<pins.length; i++) 
    {
        pins[i] = createMarkers(new google.maps.LatLng(pins[i].gpsLocationN,pins[i].gpsLocationW), pins[i]);
    }
} 
```

# android - 我在 android 中解析 XML 时遇到异常

> ID：13517229
> 
> 赞同：1
> 
> 时间：2012-11-22T17:01:18.457
> 
> 标签：android, xml, xml-parsing

代码是

```
 ///  Element rootelement = doc.getDocumentElement();
    XPathFactory xpathfactory = XPathFactory.newInstance();
    XPath xpath = xpathfactory.newXPath();
    try {
         xpathexpression = xpath.compile("//@*[name()='diffgr:id']");
            result = xpathexpression.evaluate(doc,XPathConstants.NODESET);
           Log.v(result.toString(), "Value of result");
    } catch (XPathExpressionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
 NodeList nodelist =(NodeList) result;
 Node childlist = null;
  // org.w3c.dom.Element rootelement = doc.getDocumentElement();
  // NodeList nl = rootelement.getChildNodes();
   Log.v(new Integer(nodelist.getLength()).toString(), "Lenght of node list");

  for (int i =0; i< nodelist.getLength(); i++)
   {
      Node n = nodelist.item(i);
      System.out.println("message");
      childlist = n.getFirstChild();
      System.out.println("message2");
     String s = childlist.getNodeValue();  // THIS LINE GIVES EXCEPTION ELSE CODE IS              CORRECT 
```

提出的例外是休耕

```
11-22 21:50:58.166: E/AndroidRuntime(1123): FATAL EXCEPTION: main
11-22 21:50:58.166: E/AndroidRuntime(1123): java.lang.RuntimeException: Unable to    start activity ComponentInfo{com.example.axml/com.example.axml.MainActivity}:    java.lang.NullPointerException
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.os.Looper.loop(Looper.java:123)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at java.lang.reflect.Method.invokeNative(Native Method)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at java.lang.reflect.Method.invoke(Method.java:521)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at dalvik.system.NativeStart.main(Native Method)
11-22 21:50:58.166: E/AndroidRuntime(1123): Caused by: java.lang.NullPointerException
11-22 21:50:58.166: E/AndroidRuntime(1123):     at com.example.axml.MainActivity.onCreate(MainActivity.java:92)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-22 21:50:58.166: E/AndroidRuntime(1123):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2 627)
11-22 21:50:58.166: E/AndroidRuntime(1123):     ... 11 more
11-22 21:50:58.186: W/ActivityManager(58):   Force finishing activity                          com.example.axml/.MainActivity
11-22 21:50:58.697: W/ActivityManager(58): Activity pause timeout for HistoryRecord{44f68330 com.example.axml/.MainActivity}
11-22 21:51:05.305: D/dalvikvm(288): GC_EXPLICIT freed 29 objects / 1416 bytes in 131ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:56:31.183

如果以下行导致 NullPointerException，则 childlist 可能为 null。

```
String s = childlist.getNodeValue(); 
```

如果以下调用返回 null，则对象 childlist 为 null。

```
childlist = n.getFirstChild(); 
```

如果 n 指向的对应 xml 节点中没有子节点，则类 Node 的方法 getFirstChild() 会导致 null。比较[getFirstChild 的文档](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#getFirstChild%28%29)。因此，您应该检查 n 指向的 xml 节点以及该节点是否有子节点。为了获得更好的答案，您必须举一个我想您正在解析的 xml 文档的示例。

# php - 另一个类实例的参数中的一个类的实例

> ID：13517230
> 
> 赞同：0
> 
> 时间：2012-11-22T17:01:20.737
> 
> 标签：php, class

有人可以解释在另一个类实例的参数中拥有一个类实例意味着什么：

```
$controller = new controllerObject(new dependenciesObject()); 
```

我了解类和类实例的基础知识，但以前从未见过像上面这样的代码。这是什么意思？controllerObect 是一个类，那么在参数中传递一个对象实例意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:05:48.633

这意味着`controllerObject`构造函数接受类型为 的对象`dependenciesObject`。

您实例化 a`dependenciesObject`并将其用作实例化 a 的参数`controllerObject`，并将其分配给`$controller`。如果它有助于您理解，这相当于：

```
$dependency = new dependenciesObject();
$controller = new controllerObject($dependency);
unset($dependency); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:07:12.623

您正在做的是为 $controller 分配一个 controllerObject 的实例。

正如您所说，controllerObject 是一个具有构造函数的类，需要引用 :dependenciesObject 类型的对象。

```
 class controllerObject 
      {
           function __construct(dependanciesObject $dependancies)
            { 
                //etc
            }
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:07:56.900

它只是意味着`controllerObject`将另一个对象传递给它的构造函数。通过这样做 - 而不是`dependenciesObject`在单独的变量中实例化 a - 您将不会为传递的对象创建全局变量，从而将全局变量的数量保持在最低限度。

一个例子是将一个数据库对象传递给`controllerObject`if 如果`controllerObject`没有它就无法运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T17:08:34.733

与将任何其他参数传递给构造函数相同。`new controllerObject(5)`例如。

如果有助于理解，请使用临时变量：

```
$dependencies = new dependenciesObject();
$controller = new controllerObject($dependencies); 
```

# c++ - GCC __builtin_ 函数

> ID：13517232
> 
> 赞同：2
> 
> 时间：2012-11-22T17:01:26.380
> 
> 标签：c++, c, gcc

以下功能是否在单个时钟周期内执行？

```
__builtin_popcount
__builtin_ctz
__builtin_clz 
```

同样的ll（64位）版本的时钟周期数是多少。它们是便携式的吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T18:02:13.233

**这些功能是否在单个时钟周期内执行？**

不必要。在可以使用单个指令实现它们的架构上，它们通常是计算该函数的最快方法（但仍不一定是单个时钟周期）。在它们不能作为单个指令实现的架构上，它们的性能不太确定。

在我的处理器（Core 2 Duo）上，`__builtin_ctz`可以`__builtin_clz`用一条指令（位扫描正向和位扫描反向）来实现。但是，`__builtin_popcount`不能用我的处理器上的一条指令来实现。对于`__builtin_popcount`，gcc 4.7.2 调用一个库函数，而 clang 3.1 生成一个内联指令序列（实现这个[bit twiddling hack](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel)）。显然，这两种实现的性能是不一样的。

**它们是便携式的吗？**

它们不能跨编译器移植。它们起源于 GCC（据我所知），并且也在 Clang 等其他一些编译器中实现。

支持这些功能的编译器可能会为多种架构提供它们，但实现质量（性能）可能会有所不同。

`__builtin`像这样的函数用于以比使用内联汇编更容易的方式访问特定的机器指令。如果您需要实现最高性能并且愿意为此牺牲可移植性，或者为未提供这些功能的编译器或平台提供替代实现，那么使用它们是有意义的。如果最佳低级性能是您的目标，您还应该检查编译器的汇编输出，以确定它是否真的生成了您期望它使用的指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T17:56:07.737

`-O3 -march=native -S`通过将其编译成汇编代码，您可以初步了解编译器对它的作用。在那里你可以检查这是否只解析为一个汇编语句。如果是这样，这不能保证在一个周期内完成。要知道真正的成本，你必须衡量。

# javascript - html 属性以获取更多信息和转发使用

> ID：13517233
> 
> 赞同：2
> 
> 时间：2012-11-22T17:01:26.827
> 
> 标签：javascript, jquery, html

这个问题一定很琐碎，但我不知道如何正确表述。好的，我正在使用 PHP 和 jQuery，我也使用 ajax 来处理用户到服务器的请求。我正在寻找的是一种获取有关某些信息的简单方法 ohhhh 我会更好地展示我想要的示例。

我用数据库中的一些信息形成了页面。例如，我有一个带有颜色对象的表格，当页面加载时，我们有这个：

```
 <body>
 <span class="object_span">red</span><button>random color</button> 
 <span class="object_span">white</span><button>random color</button>
 </body> 
```

我简化了这一点，但你明白这是什么意思，想想。

下一步，我想使用 ajax 更改其中一个：

```
 $(document).ready(function(){
 $('#object_span').change(function(){

  $.post(
'ajax_handler.php',  
    {object_id: 'how to simply get this parameter???' },  //         <---- problem is here
    function(responseText){  
    console.log(responseText);  
    },  
    "html"  
  );  

  });
 }); 
```

可能有一些参数可以添加到跨度中，例如：'my_object_id:1232'？或者以这种方式我可以简单地在 js 或 jQuery 中使用，如下所示：

```
 $(document).ready(function(){
     $('#object_span').change(function(){
     var current_object_id = $('#object_span').attr('my_object_id');
     ...
     });
 }); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:04:39.753

使用一个`data`属性：

```
<body>
     <span class="object_span" data-my_object_id="1234">red</span><button>random color</button> 
     <span class="object_span" data-my_object_id="1235">white</span><button>random color</button>
</body> 
```

然后你可以这样做：

```
$(document).ready(function(){
    $('.object_span').change(function(){
     var current_object_id = $(this).data('my_object_id');
     ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:04:09.610

您可以将属性分配给 span 并在访问定义的属性时访问它们。

**[现场演示](http://jsfiddle.net/rajaadil/7sx7E/)**

html

```
<span class="object_span" my_object_id="I am added">red</span> 
```

Javascript

```
 $('#object_span').change(function(){
       var current_object_id = $(this).attr('my_object_id');
 }); 
```

您也可以使用数据属性名称。

**[现场演示](http://jsfiddle.net/rajaadil/dqKL8/)**

html

```
<span class="object_span" data-my_object_id="I am added">red</span> 
```

Javascript

```
$('#object_span').change(function(){
        var current_object_id = $(this).data('my_object_id');           
   }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:04:53.480

我建议你看看 HTML5 数据属性和 jQuery data() 方法

# sql-server - 创建批处理文件以将一个 SQL Server 数据库的内容复制到另一个

> ID：13517235
> 
> 赞同：1
> 
> 时间：2012-11-22T17:01:33.387
> 
> 标签：sql-server, batch-file

我需要创建一个批处理文件（脚本）来将一个 SQL Server 数据库的全部内容复制到另一个。源数据库是机器的本地数据库。我可以使用哪些命令行工具和命令？可以完全删除目标数据库。

此外，我还需要从批处理文件中运行一对 SQL 查询。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:28:44.997

您可以从此处阅读有关使用 sqlcmd 运行 Transact-SQL 脚本文件的信息：http: [//msdn.microsoft.com/en-us/library/ms170572.aspx](http://msdn.microsoft.com/en-us/library/ms170572.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:08:18.193

首先你需要创建你的 sql 查询然后你可以使用这个命令通过批处理文件运行它

```
sqlcmd -S %computername%\%SName% -U %UName% -P %Pwd%  -i SQL_DB.sql >> _Deploy.txt 2>&1 
```

此命令获取计算机名称和 sqlserver 实例名称以及用户名和密码，并在包含我们查询的批处理文件附近运行 SQL_DB.sql 文件，并将结果保存在名为 _deploy.txt 的文本文件中

# php - PHP：将数组元素传递给fpdf中的类函数

> ID：13517237
> 
> 赞同：0
> 
> 时间：2012-11-22T17:01:41.803
> 
> 标签：php, mysql, pdf

在一个项目上工作，需要使用 FPDF 生成产品详细信息的 pdf。产品详细信息被传递到一个数组中，我需要以下内容才能将数组“$prod_details”中的每个变量元素放入“PDF”类中的函数中，如下所示：

我如何尝试传递变量数组元素的示例：

```
 $this->Cell(30,8,$prod_data['prod_name'],0,0,'C');
    $this->Cell(30,10,$prod_data['company_name']);
    $this->Cell(20,8,$prod_data['prod_cost'],0,0,'C'); 
```

我尝试运行此脚本，但不断收到错误消息“无法访问空属性”...

找到下面的代码

```
<?php

@include_once("includes/db.php");
require('fpdf/fpdf.php');
@include_once("includes/class_product_info.php");

$obj = new allProducts();
$prod_data = array();
if(isset($_GET['c_id'])){
        $prod_data = $obj->getProdDetails($_GET['c_id']);

class PDF extends FPDF
{   

public $prod_data;

public function createData($input){
    $this->prod_data = $input;
}

function Header()
{
    // Logo
    $this->Image('big_logo.png',10,6,30);
    // Arial bold 15
    $this->SetFont('Arial','B',20);
    // Move to the right
    $this->Cell(40);    
    // Title
    $this->Cell(30,10,$this->prod_data['company_name']);
    // Draw an header line
    $this->Line(10,26,200,26);
    // Line break
    $this->Ln(20);
}

function Footer()
{
    // Position at 1.5 cm from bottom
    $this->SetY(-15);

    // Begin with regular font
    $this->SetFont('Arial','',9);
    // Then put a blue underlined link
    //$this->SetTextColor(0,0,255);
    $this->SetFont('','U');
    $this->Write(10,$this->prod_data['company_name'],'http://www.skills.com');
    // Arial italic 8
    $this->SetFont('Arial','I',9);
    // Page number
    $this->Cell(0,10,'Page '.$this->PageNo().' ',0,0,'R');
}

function prodDetailTop()
{
// Course title cell
$this->Cell('',10,'',0,0,'C');
$this->Ln();

/* Build cells for the first row */

$this->SetFont('Arial','',10);
$this->SetY(40);

// First Row
$this->Cell(35,8,'Product Name : ',0,0,'L');
$this->Cell(30,8,$this->prod_data['prod_name'],0,0,'C');
$this->SetX(150);
$this->Cell(25,8,'Product Cost : ',0,0,'L');
$this->Cell(20,8,$this->prod_data['prod_cost'],0,0,'C');
$this->Ln();

// Second Row
$this->Cell(35,8,'Discount : ',0,0,'L');
$this->Cell(30,8,$this->prod_data['disc_amt'],0,0,'L');
$this->SetX(150);
$this->Cell(25,8,'No Purchased : ',0,0,'L');
$this->Cell(20,8,$this->prod_data['items_count'].' product(s)',0,0,'L');
$this->Ln();
}

function prodDetailBtm()
{

$this->SetY(80);

$this->Write(10,$this->prod_data['prod_desc']);

}

function generatePageData()
{
    $this->AddPage();
    $this->prodDetailTop();
    $this->prodDetailBtm();
}
}

$pdf = new PDF();
$pdf->createData($prod_data);
//$pdf->Header();

$pdf->generatePageData();
$pdf->Output();

}
else {

?>
    <script language="javascript">
    window.location = "prod_invoice_err.php";
    </script>
<?php
}
?> 
```

希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:22:21.750

Your question is a little vague. It would be helpful it you asked specifically what you're trying to accomplish.

But the first thing I see is that your subclass of the fpdf class, you don't need to write functions to do each and everything you want to do with the pdf. You only need to extend the parts of the class you are overriding (or extending), like header and footer.

So extend it, manipulate header and footer, then close the class. Create your $pdf instance of your new fpdf class, then manipulate that object with your data. You don't need to 'pass in' that data at all.

for instance:

```
$pdf->Ln(10);
$pdf->Cell($w,9,$title,1,1,'C',true); //from fpdf tutorial 
```

Or, if that doesn't accomplish what you want (although I can't see why it wouldn't, I've done this lots of times), you can always override the constructor. Pass in an array (or event a custom object that you create), and store that in a private variable.

# python - GeoDjango GEOS API Abort Trap GEOS 函数错误

> ID：13517239
> 
> 赞同：3
> 
> 时间：2012-11-22T17:01:46.130
> 
> 标签：python, django, geodjango, geos

我在我的 geodjango 应用程序中遇到了一些重复的问题，这些问题似乎源于 GEOS。我收到不包含堆栈跟踪信息的错误，因此我不确定如何调试它们。我已经能够将问题隔离到使用 GEOS 的特定命令上。

**更新：**下面是一个更简单的测试用例，它给了我一个错误。我怀疑这会给你一个错误，我强烈怀疑这与我的机器、我的环境或我的 GEOS 构建有关。非常感谢有关如何解决此问题的任何提示。

```
>>> from django.contrib.gis.geos import Polygon, MultiPolygon
>>> p1 = Polygon( ((0, 0), (0, 1), (1, 1), (0, 0)) )
GEOS_ERROR: Shell is not a LinearRing
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Users/benjamin/projects/artgeese/lib/python2.7/site-packages/django/contrib/gis/geos/polygon.py", line 42, in __init__
    polygon = self._create_polygon(n_holes + 1, (ext_ring,) + init_holes)
  File "/Users/benjamin/projects/artgeese/lib/python2.7/site-packages/django/contrib/gis/geos/polygon.py", line 85, in _create_polygon
    return capi.create_polygon(shell, holes_param, c_uint(n_holes))
  File "/Users/benjamin/projects/artgeese/lib/python2.7/site-packages/django/contrib/gis/geos/prototypes/threadsafe.py", line 49, in __call__
    return self.cfunc(self.thread_context.handle.ptr, *args)
  File "/Users/benjamin/projects/artgeese/lib/python2.7/site-packages/django/contrib/gis/geos/prototypes/errcheck.py", line 43, in check_geom
    raise GEOSException('Error encountered checking Geometry returned from GEOS C function "%s".' % func.__name__)
GEOSException: Error encountered checking Geometry returned from GEOS C function "GEOSGeom_createPolygon_r". 
```

这是我遇到的各种错误的细分

```
>>> basins = GroundWater.objects.all()
>>> geoms = [b.geom() for b in basins]
>>> geom = geoms[3]
>>> print type( geom )
<class 'django.contrib.gis.geos.collections.MultiPolygon'>

>>> polygon = geom.cascading_union # this is ok
>>> print type( polygon )
<class 'django.contrib.gis.geos.polygon.Polygon'>

>>> print polygon
# this receives the following error and shuts down the dev server
Assertion failed: (0), function appendGeometryTaggedText, file WKTWriter.cpp,
line 228.
Abort trap

>>> print polygon.num_interior_rings 
# causes an error, does not stop the server
GEOS_ERROR: Argument is not a Polygon
and
Error encountered in GEOS C function "GEOSGetNumInteriorRings_r".

>>> print polygon.coords
# causes an error, does not stop the server
GEOS_ERROR: Argument is not a Polygon
and
Error encountered in GEOS C function "GEOSGetNumInteriorRings_r".

>>> print polygon.valid
GEOS_ERROR: UnsupportedOperationException: 
Error encountered on GEOS C predicate function "GEOSisValid_r". 
```

关于如何解决或调试这种情况的任何想法？谢谢！

请注意，该问题并非特定于该多边形。如果我选择任何其他功能，我会收到相同的错误。

以下是环境统计数据：

```
Mac OS X==10.6.8
Python==2.7.1
Django==1.4.2
psycopg2==2.4.5

                                         postgis_full_version                                          
---------------------------------------------------------------------------------
 POSTGIS="1.5.1" GEOS="3.2.2-CAPI-1.6.2" PROJ="Rel. 4.7.1, 23 September 2009" LIBXML="2.7.3" 
```

我已经使用 KyngChaos 二进制文件安装了 GEOS 和 GDAL，并将它们放在我的系统路径上

```
export PATH=/Library/Frameworks/GDAL.framework/Versions/1.9/Python/site-packages:$PATH
export PATH=/Library/Frameworks/UnixImageIO.framework/Programs:$PATH
export PATH=/Library/Frameworks/PROJ.framework/Programs:$PATH
export PATH=/Library/Frameworks/GEOS.framework/Programs:$PATH
export PATH=/Library/Frameworks/SQLite3.framework/Programs:$PATH
export PATH=/Library/Frameworks/GDAL.framework/Programs:$PATH
export PATH=/usr/local/pgsql/bin:$PATH 
```

[**编辑：**根据要求，[直接从数据库中获取几何图形作为 WKT](https://gist.github.com/4436552) ]

# c - 符号常量的“类型”？

> ID：13517244
> 
> 赞同：6
> 
> 时间：2012-11-22T17:02:21.157
> 
> 标签：c

1.  什么时候适合在符号常量/宏中包含类型转换，如下所示：

    ```
    #define MIN_BUF_SIZE ((size_t) 256) 
    ```

    通过类型检查使其行为更像真实变量是一种好方法吗？

2.  什么时候适合使用`L`or `U`(or `LL`) 后缀：

    ```
    #define NBULLETS 8U
    #define SEEK_TO 150L 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:04:24.823

您需要在默认类型不合适的任何时候执行此操作。而已。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T17:52:47.500

在不应用自动转换的地方键入常量可能很重要，特别是具有可变参数列表的函数

```
printf("my size is %zu\n", MIN_BUF_SIZE); 
```

`int`当和的宽度`size_t`不同并且您不会进行演员表时，很容易崩溃。

但是你的宏还有改进的余地。我会这样做

```
#define MIN_BUF_SIZE ((size_t)+256U) 
```

（看到那个小`+`标志了吗？）

当这样给出时，宏仍然可以在预处理器表达式中使用（with `#if`）。这是因为在预处理器中，`(size_t)`计算`0`结果也是无符号的`256`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:23:52.620

Explicitly indicating the types in a constant was more relevant in Kernighan and Richie C (before ANSI/Standard C and its function prototypes came along).

Function prototypes like `double fabs(double value);` now allow the compiler to generate proper type conversions when needed.

You still want to explicitly indicate the constant sizes in some cases. The examples that come to my mind right now are bit masks:

*   `#define VALUE_1 ((short) -1)` might be 16 bits long while `#define VALUE_2 ((char) -1)` might be 8\. Therefore, given a `long x`, `x & VALUE_1` and `x & VALUE_2`would give very different results.

    *   This would also be the case for the L or LL suffixes: the constants would use different numbers of bits.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T17:12:04.167

`#define`只是令牌粘贴预处理器。

无论您在其中写入什么内容，`#define`都将在编译之前替换为替换文本。

所以无论哪种方式都是正确的

```
#define A a

int main
{
 int A; // A will be replaced by a
} 
```

[可变参数宏](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)或多[行宏](http://www.gnu.org/software/emacs/manual/html_node/ccmode/Multiline-Macro-Symbols.html)有很多`#define`变化

但主要目的`#define`是上面解释的唯一一个。

# sql-server - 为什么将 XML 中的数据存储在 SQL Server 中的各个列上？

> ID：13517245
> 
> 赞同：3
> 
> 时间：2012-11-22T17:02:25.630
> 
> 标签：sql-server, xml

只是关于在 SQL Server 数据库中使用 XML 的简短问题......

我有一个新表，它存储了从另一个表中获取的一些数据，并且被告知我必须将这些数据以 XML 格式存储到一个列中，而不仅仅是将值存储在它们自己的列中。

对于我的生活，我可以弄清楚为什么这会更好，并且我已经问过其他几个也看不到好处的人。在任何时候都不会在代码中的任何地方将 XML 用作 XML，只会使用从中分离出来的数据。

想知道是否有人有任何意见，支持或反对，以帮助我更好地理解。

非常感谢你的想法，P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:33:44.453

使用 XML 数据类型会消耗性能。索引很棘手。与 SQL 更新相比，更新文档的一部分确实很困难。成本不应被低估。

也许“告诉你的人”听说过“NoSql/Xml 数据库更好”。当然，答案是它确实取决于上下文。有人可能会争辩说，与 XML 列一起使用的 SqlServer 不是 NoSql。

也许你应该问这些问题：

*   你只需要存储层次结构吗？（一个 nvarchar(max) 列就足够了）
*   您还需要查询层次结构吗？（然后是 XML 或关系，取决于模式复杂性）
*   用关系模式对层次结构进行建模是否困难？
*   层次结构会随着时间而改变吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:21:37.670

解决方案已重新设计，我们将在列中而不是 XML 中存储值。对合作的要求不明确，对各方过去/将需要什么缺乏完整的认识！

谢谢大家的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:11:18.583

通常，当数据结构为 volatile 时，使用 XML 类型。尽管您可以使用 xml 模式验证 XML 列中的数据，但大部分工作都是在应用程序端完成的。例如，如果您从第三方服务接收数据，则很难保证它始终遵循相同的格式并具有相同的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T09:25:26.160

如果您不了解委托该项目并为其付款的人给您的要求，我们怎么能？

您没有告诉我们要求的原因可能是因为您不知道。

而且有可能没有。

这个论坛上的任何人都无法知道。

# python - Python 套接字 - 以 10 个字节的块发送字符串

> ID：13517246
> 
> 赞同：1
> 
> 时间：2012-11-22T17:02:29.567
> 
> 标签：python, sockets

我有简单的 tcp 套接字程序，我想以 10 个字节的块发送字符串。服务器将加入块。但是我不确定如何将字符串拆分为二进制文件以及如何发送二进制文件块。而不是一次发送 512 个字节，我想多次发送 10 个字节。

我找到了一个模块 Pickle，它可以将数据序列化为字节串（？），但我该如何应用 socket.send() 呢？

服务器：

```
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind(("", my_port))
server_socket.listen(5)
client_socket, address = server_socket.accept()
data = client_socket.recv(512) 
```

客户：

```
message = "some string I want to send in chunks"
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect((host, my_port))
client_socket.send(message)
client_socket.close() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T23:30:09.540

首先，您的代码实际上并不是一次*发送*512 个字节，而是一次*接收*512 个字节。

现在，我认为您实际上是在问两个问题。

1.  如何通过 TCP 连接一次发送 10 个字节（您正在使用`socket.SOCK_STREAM`）
2.  如何使用 Python 套接字发送原始字节。

让我们回答 2。首先：如果您在字节字符串上调用[socket.send](http://docs.python.org/2/library/socket.html#socket.socket.send)，它应该作为 TCP 有效负载以二进制形式发送出去。

对于 1.，最简单的方法是将数据拆分为块（现在您知道您正在对字符串进行操作，您可以使用切片操作简单地做到这一点（请参阅[关于字符串的 Python 教程](http://docs.python.org/2/tutorial/introduction.html#strings)- 例如`s[0:10]`，`s[10:20]`等）。接下来，您需要确保这些切片是单独发送的。这可以通过调用来完成`socket.send`，但问题是，即使您不希望，您的 TCP/IP 堆栈也可能将它们分组为数据包 - 毕竟您已经问过了为您提供*流*套接字，`socket.SOCK_STREAM`. 如果您正在写入文件，在这种情况下您要做的是刷新文件，但这对于 Python 套接字似乎并不容易（请参阅[此问题](https://stackoverflow.com/questions/1655560/how-do-you-flush-python-sockets)）。

现在，我认为这个问题的答案，说这是不可能的，并不完全正确。看起来[Scapy](http://www.secdev.org/projects/scapy/)会让你发送 10 字节的 TCP 块（我从[这里](https://github.com/BruceJillis/TCP-RESET-Injection/blob/master/tcprst.py)得到了 chunks() 函数）。我在wireshark中检查了它并多次尝试了一致的结果，但我没有检查实现以确保这一定会发生。

您可能应该问自己为什么要以 10 个字节的块发送数据，而不是让 TCP 处理它的设计目的，并考虑使用分隔符。

无论如何，这是使用 Scapy 的代码（有趣的事实：看起来运行它不需要 root 权限）：

客户：

```
from scapy.all import *

import socket
host = '192.168.0.x' #replace with your IP
my_port = 3002
message = "some string I want to send in chunks"

def chunks(lst, n):
    "Yield successive n-sized chunks from lst"
    for i in xrange(0, len(lst), n):
        yield lst[i:i+n]

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect((host, my_port))
ss=StreamSocket(client_socket,Raw)
for chunk in chunks(message, 10):
    print "sending: " + chunk
    ss.send(Raw(chunk) )

client_socket.close() 
```

服务器：

```
import socket
my_port=3002
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind(("", my_port))
server_socket.listen(5)
client_socket, address = server_socket.accept()
while (True):
    data = client_socket.recv(512)
    if (data):
        print data
    else:
        break 
```

# rest - JIRA 5.2 RPC SOAP 服务包装为 RESTFul——将数据插入自定义数据库字段

> ID：13517248
> 
> 赞同：0
> 
> 时间：2012-11-22T17:02:38.253
> 
> 标签：rest, soap, jira, custom-fields

Jira 5.2 SOAP API 通过使用来自 SOAP API 的方法包装在 WCF RESTFul 服务中，如下所示。

```
 public Message GetCustomFields()
            {
            try
            {
            token = this.
            Login(ConfigurationManager.AppSettings.Get("JiraUser"),
            ConfigurationManager.AppSettings.Get("JiraPassword"));

            RemoteField[] remoteCompoment = jiraSoapService.getCustomFields(token);
            return WebOperationContext.Current.CreateJsonResponse<RemoteField[]>  
           (remoteCompoment);
        }
        catch (Exception e)
        {
            throw e;
        }
    } 
```

所有方法都按预期工作。

查询：- 自定义数据库表用于使用 Kepler 在 Jira 中填充自定义字段。

表单构建器 Frevvo 用于调用 Jira RESTFul 服务来创建 Jira 问题。非常感谢帮助创建自定义字段的问题。

最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:34:28.257

Jira SOAP api 提供 RemoteCustomFieldValue 部分类来使用自定义字段创建问题。

```
 //custom fields
        remoteCustomFields = new List<RemoteCustomFieldValue>();
        XmlNodeList customFieldList = doc.SelectNodes("//customFieldValues");
        foreach (XmlNode customField in customFieldList)
        {

            XmlNodeList customFieldValueList = doc.SelectNodes("//customFieldValues/Values");
            remoteCustomFields.Add(
                new RemoteCustomFieldValue
                    {

                        customfieldId = customField.SelectSingleNode("customFieldId").InnerText,
                        values = customFieldValueList.Cast<XmlNode>().Select(n=> n.InnerText).ToArray()

                    });
        } 
```

有用的资源：[https ://svn.atlassian.com/svn/public/contrib/jira/jira-rpc-samples/src/java/com/atlassian/jira_soapclient/SOAPClient.java](https://svn.atlassian.com/svn/public/contrib/jira/jira-rpc-samples/src/java/com/atlassian/jira_soapclient/SOAPClient.java)

# cuda - 使用 CUDA 5 更改推力后端系统时编译错误

> ID：13517249
> 
> 赞同：0
> 
> 时间：2012-11-22T17:02:47.437
> 
> 标签：cuda, thrust

我最近安装了 CUDA 5，发现无法编译基于 Thrust 的现有代码。仅当我切换到 OMP 或 TBB 时才会发生该错误。

所以我使用 Thrust 示例中的 monte_carlo.cpp 做了一个实验。

当我使用 CUDA 5.0 的包含路径时，出现此错误：

> g++ -O2 -o monte_carlo monte_carlo.cpp -DTHRUST_DEVICE_SYSTEM=THRUST_DEVICE_SYSTEM_OMP -fopenmp -I /usr/local/cuda-5.0/include/
> 
> /tmp/ccFsJtAs.o：在函数`main': monte_carlo.cpp:(.text+0xa0): undefined reference to`浮动推力：：细节：：后端：：cuda：：reduce_n，浮动，推力：：使用默认>，长，浮动，推力：：加
> 
> > （推力：：transform_iterator，浮动，推力：：use_default>，长，浮动，推力：：加）'

但是如果我改用 CUDA 4.1

> g++ -O2 -o monte_carlo monte_carlo.cpp -DTHRUST_DEVICE_SYSTEM=THRUST_DEVICE_SYSTEM_OMP -fopenmp -I /usr/local/cuda-4.1/include/

没有错误。

我的平台是带有 g++ 4.4.3 的 Ubuntu 10.04。

希望有人能帮助我，谢谢！

**编辑** OMP 问题通过更改`-fopenmp`@Robert 指出的顺序来解决，但我无法使用 TBB 进行编译

> g++ -O2 -o monte_carlo monte_carlo.cpp -DTHRUST_DEVICE_SYSTEM=THRUST_DEVICE_SYSTEM_TBB -ltbb -I /usr/local/cuda/include/ /tmp/ccxSmcnJ.o: 在函数`main': monte_carlo.cpp:(.text+0xa0): undefined reference to`浮动推力::detail::backend::cuda::reduce_n,浮动, 推力::use_default>, 长, 浮动, 推力::plus >(推力::transform_iterator, 浮动, 推力::use_default>, 长, 浮动, 推力::plus)' collect2: ld 返回 1 退出状态

但是如果我使用编译成功

> g++ -O2 -o monte_carlo monte_carlo.cpp -DTHRUST_DEVICE_SYSTEM=THRUST_DEVICE_SYSTEM_TBB -ltbb -I /usr/local/cuda-4.1/include/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-16T11:05:46.580

OpenMP 编译似乎是由错误指定的编译参数引起的。编译使用

```
g++ -O2 -o monte_carlo monte_carlo.cpp -fopenmp -DTHRUST_DEVICE_BACKEND=THRUST_DEVICE_BACKEND_OMP -lgomp -I\usr\local\cuda\include 
```

（即在任何预处理器指令之前指定 OpenMP 代码生成）允许使用 OpenMP 支持的推力进行正确编译。

报告的 TBB 后端编译错误似乎是由于尝试在不支持 TBB 的推力 1.5.3 上使用 TBB 后端引起的。

[这个答案是从问题编辑和评论中收集的，以便将问题从 CUDA 标签的未回答列表中删除]

# c# - Visual Studio 显示无休止的消息“属性 'valueMember' 的代码生成失败。”

> ID：13517252
> 
> 赞同：22
> 
> 时间：2012-11-22T17:02:48.250
> 
> 标签：c#, visual-studio, designer

在使用 Visual Studio 2008 愉快地破解这个 C# 应用程序几天后，我被一连串的错误对话框震惊了：

> *属性“ valueMember* ”的代码生成失败。
> 错误是：“*对象引用未设置为对象的实例*。”

现在，当我在设计器中进行微小更改时，通常会发生这种情况，例如将控件移动几个像素，然后尝试保存。每秒会出现几个这样的错误对话框，让我忙着通过敲击 Enter 键来取消所有这些对话框，同时尝试让 alt-F4 关闭 VS。

最终我确实让 VS 关闭并保存我所做的更改。重新启动 VS 后，我对整个项目进行“清理”，然后“构建”，一切正常，应用程序运行正常，没有问题。

直到我在表单设计器中再做一个小改动。

我不知道`valueMember`我的应用程序中的任何属性。

这让我发疯，这对我的项目来说是一个真正的展示。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-18T09:30:19.090

尝试关闭并重新打开 Visual Studio。也许它看起来很傻，但它有效！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-22T19:17:42.007

您可以使用另一个视觉工作室调试设计器并附加到进程。如果您遇到异常，应该很容易找到它。通常，当打开设计器时，构造函数当然还有 initializeComponent 正在运行。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-22T17:15:33.760

由于这是在设计时发生的，因此您可能有一个自定义控件，它需要一个没有默认值的参数或其他值。

在 Visual Studio 的设计视图中时；创建了一个控件实例以在可视化编辑器上呈现它，但如果控件需要在呈现之前设置属性，则会导致错误。

您能否检查所有自定义控件是否具有默认值，并且构造函数中引用的任何不能具有默认值的内容都由`DesignMode`属性包装 - 请参阅[http://msdn.microsoft.com/en-us/library/system.componentmodel.component。设计模式.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.designmode.aspx)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-27T15:56:09.207

类似于@Chanipoz 的回答（关闭/重新打开），在我关闭主表单设计器窗口后，我的组件丰富/用户控件无处不在的表单应用程序开始愉快地编译。

我已经使用这个代码栈多年了，直到今天才看到这个错误。不确定它来自哪里。但是，今天在设计器中打开表单的事情让一切都不愉快。只需将其从屏幕上关闭即可使一切顺利进行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-19T19:03:07.097

使用 Visual Studio 的另一个实例附加到 Visual Studio 的第一个实例。

转到调试-> 附加到进程并查找 devenv.exe 进程。由于您将运行两个 devenv.exe 进程，因此您可能希望选择 ID 较低的进程，这通常是运行的第一个 Visual Studio 实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-17T18:03:39.660

我不得不面对这个问题。由于我还没有找到解决方案（很多继承），我可以说： `.SuspendLayout()`并且`.ResumeLayout()`可能在代码或其中之一中丢失。和`.BeginInit()`也是如此`.EndInit()`。他们之间预计会有`= new ...`一些属性设置。也许面临这个问题的人会通过这些信息找到解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-14T06:26:46.790

问题是缺少控件上公共属性的初始化代码。这将在您将控件添加到设计器时为您添加，但如果您将控件替换为派生控件，或者更新组件，那么设计器将不知道如何处理。

如果您有一个具有公共属性 PropertyA 的控件 (wincontrol)，并将其添加到表单 (myForm)，那么设计器会将属性的所有必要初始化添加到 myForm.Designer.cs。就像是;

```
Wincontrol1.PropertyA = new List<widget>(); 
```

需要稍微修改控件的情况并不少见，假设我们有一个新控件 MyWinControl

```
public partial class MyWinControl : WinControl
{
    public List<wodget> PropertyDer1;
    protected List<wodget> PropertyDer2;
} 
```

如果您在 myForm.Designer.cs 中将这个新控件替换为旧控件，那么您很可能会遇到这个问题。原因是 PropertyDer1 在 winforms 设计器中没有初始化。PropertyDer2 不会引起任何问题，因为它受到保护。同样，如果您有一个自定义组件，并且在将组件添加到表单后添加了一个新的公共属性。

但是，如果您删除了窗体上的 WinControl 实例，而是将 MyWinControl 的一个实例拖到窗体上，则会发生正确的初始化并且您不会看到错误。设计师将像这样创建新控件

```
Wincontrol1.PropertyA = new List<widget>();
Wincontrol1.PropertyDer1= new List<wodget>(); 
```

有两种简单的解决方案不需要对设计者隐藏属性。1.如果属性不需要公开，给它正确的修饰符 2.如果属性确实需要公开，那么只需像上面的代码一样编辑myForm.Designer.cs中的代码，添加缺少的初始化器

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-10T11:41:33.567

如果有帮助的话，我刚刚检测到一个带有相同错误消息的案例，无法删除：我正在开发一个法语应用程序，我必须创建一个 ToolStripMenuItem，其中包含一个重音词，例如“annulées”。系统生成了一个类似“annuléesToolStripMenuItem”的菜单项，而重音是罪魁祸首。足以删除该项目，用英语再次创建它，只需更改菜单项的 Text 属性。希望它会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-24T12:15:24.273

我不得不面对这个问题。正如我在下面找到的解决方案一样，我在自定义控件中遇到了这个问题。

我们需要像这样实现

```
[Browsable(false)]
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public MyCustomclass _Prperty { get; set; } 
```

# networking - 用于登录多台机器的 Powershell 脚本

> ID：13517261
> 
> 赞同：1
> 
> 时间：2012-11-22T17:03:22.907
> 
> 标签：networking, powershell, multiple-monitors

我刚升职为我部门的首席技术员。在任何给定时间，我都负责 400 多台计算机。最近发现每台机器都需要更新一个程序比较麻烦。我对脚本很陌生，但我想知道是否有办法通过 powershell 登录所有机器？一个接一个地在机器上四处走动登录太费时又累人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:36:43.477

您应该使用组策略或登录脚本，而不是在办公室里走来走去。[参加诸如使用组策略管理 Windows 环境](http://www.microsoft.com/learning/en/us/course.aspx?id=50255b "商务部")之类的课程，或者学习一些有关 Windows 网络管理的基本书籍。

# php - MySQL，SubSelect，这可能吗？

> ID：13517264
> 
> 赞同：1
> 
> 时间：2012-11-22T17:03:48.420
> 
> 标签：php, mysql

所以，我有一个捐赠表。它存储了一个 $ 值和一个列框，他们可以在其中选择货币或实物捐赠。实物捐赠可以有美元，但通常没有。实物捐赠是指有人捐赠了实物，例如割草机、桌子、椅子等。然后我有捐助者。最后，我有一个领导力捐赠小组。根据一定的金额，捐赠者会被放入其中一个领导力捐赠小组。因此，100 美元的捐赠者被放在其他捐赠者组中，1000 美元的捐赠者被放在下一个捐赠者组中，依此类推。我需要汇总所有捐赠，但排除所有实物捐赠，因为这些（即使它们具有货币价值）不计入将捐赠者置于领导小组中的哪个位置。

表格：我无法执行 SHOW CREATE，因为它有一个需要更改的服务器值，我无法控制。我希望这对每个人都好。我只是想显示 3 个表及其所有当前字段。很抱歉给您带来不便。

好的，所以对于表格，我不记得所有的语法，但应该很容易看到外键和主键以及所有字段。我只是有点匆忙，因为这是感恩节，我的家人因为我在电脑上而生气。

```
CREATE TABLE donor (
DonorID INT NOT NULL AUTO_INCREMENT Primary Key,
FirstName VARCHAR(100),
LastName VARCHAR(100),
Street Address VARCHAR(100),
City VARCHAR(100),
State VARCHAR(2),
Zip VARCHAR(5),
Email VARCHAR(100), ); 
```

限制是他们通过下拉框选择的两个条目之一。受限（然后由捐助者为特定项目指定或非受限意味着捐助者不关心资金的使用方式。DonationType 的工作方式相同，但它是实物或货币。我只想总结一下货币价值

```
CREATE TABLE donation (
DonationID INT NOT NULL AUTO_INCREMENT Primary Key,
Restriction VARCHAR(10) NOT NULL,
Amount VARCHAR(100) NOT NULL,
Description VARCHAR(2000),
DonationType VARCHAR(100) NOT NULL,
DonorID INT NOT NULL Foreign Key,
DateReceived DATE NOT NULL, 
```

领导小组表：我吃完再补充，对不起，我的家人要杀了我。

LeaderGrp 不是 AI，它是每个领导小组的名称：Other Donor、Founder's Club、Friend's Circle 等等。这将永远是独一无二的，所以我把它做成了 PK，但如果出于某种原因和 AI 领域我可以做到这一点。

如果这样会更容易，我可以发布我的代码，但我觉得它会变成人们的巨大文本墙。然而，这是一个网站，我在这个项目中使用的其他编程语言是 js 和 php，所以如果它可以在 php 中使用也是一个选项。我也可以给你网站的链接，让你查看信息，因为目前都是编造的，如果有帮助的话，显然不能分享真实的数据。只是要求它，因为当有些人可能只是进入并开始向我的表中添加数据时，我真的不想发布它。

代码：

```
<?php require_once('header.php') ?>
<!--dont modify above this line-->

<?php 
//on ANY page you need to use the database, you need to include the line below ONCE (before doing any db operations)
require_once('connect.php');

function checkAmount($amount, $min, $max)
{
if ($amount >= $min && $amount <= $max)
return true;
else
return false;

} 

//array types of users
$founders_club = array();
$headmasters_circle = array();
$dragons_circle = array();
$green_and_white_society = array();
$seventies_society = array();
$millennium_society = array();
$dome_society = array();
$tunnel_society = array();
$friends_circle = array();
$others = array();

// fiscal year
$currentyear = date("Y");
$selectedyear = $_POST["selectedYear"];
if($selectedyear == "")
$selectedyear = $currentyear;
$startdate = $selectedyear . "-07-01";
$enddate = $selectedyear + 1 . "-06-30";

//we need to put all donors inside the dropdown box, this is how to do it
//the actual query
$result = mysql_query("SELECT * FROM donor;") or die (mysql_error());
echo "<h2>Publication List</h>";
echo "<div>Choose Fiscal Year:";
//this will iterate through every record in the resultset and create an option box
echo "<form id=\"fiscal\" action=\"q1.php\" method=\"POST\">
<select name=\"selectedYear\" onchange=\"document.getElementById('fiscal').submit();\">";
for($i=$currentyear; $i >= 2011; $i--)
{
    if ($i == $selectedyear)
    echo "<option value='".$i."' selected=\"selected\">".$i."</option>";
    else
    echo "<option value='".$i."'>".$i."</option>";
}
echo "</select></form>";
echo "</div><br>";
//this will iterate through every record in the resultset and create an option box
while($row = mysql_fetch_array($result))
{

$result2 = mysql_query("SELECT SUM(DonationAmount) FROM donations Where DonorID = ".$row['DonorID'] . " and donations.Date_Received BETWEEN '" . $startdate . "' and '" . $enddate . "'" ) or die (mysql_error());
    while($row2 = mysql_fetch_array($result2))
        {
        $amount = $row2['SUM(DonationAmount)'];         

        if (checkAmount($amount, 50000, 999999))    
        array_push($founders_club, $row['DisplayName']);

        if (checkAmount($amount, 25000, 49999))
        array_push($headmasters_circle, $row['DisplayName']);

        if (checkAmount($amount, 10000, 24999))
        array_push($dragons_circle, $row['DisplayName']);

        if (checkAmount($amount, 5000, 9999))
        array_push($green_and_white_society, $row['DisplayName']);

        if (checkAmount($amount, 2500, 4999))
        array_push($seventies_society, $row['DisplayName']);

        if (checkAmount($amount, 1000, 2499))
        array_push($millennium_society, $row['DisplayName']);

        if (checkAmount($amount, 500, 999))
        array_push($dome_society, $row['DisplayName']);

        if (checkAmount($amount, 250, 499))
        array_push($tunnel_society, $row['DisplayName']);

        if (checkAmount($amount, 100, 249))
        array_push($friends_circle, $row['DisplayName']);

        if (checkAmount($amount, -1, 99))
        array_push($others, $row['DisplayName']);

        }

}

        //display results
    if(count($founders_club) > 0)   
    {
    echo "<h2>Founder's Club</h2>";
    for ($i = 0; $i < count($founders_club); $i++) 
    echo $founders_club[$i] . "<br>";
    }

    if(count($headmasters_circle) > 0)  
    {
    echo "<h2>Headmaster's Circle</h2>";
    for ($i = 0; $i < count($headmasters_circle); $i++) 
    echo $headmasters_circle[$i] . "<br>";
    }

    if(count($dragons_circle) > 0)  
    {
    echo "<h2>Dragon's Circle</h2>";
    for ($i = 0; $i < count($dragons_circle); $i++) 
    echo $dragons_circle[$i] . "<br>";
    }

    if(count($green_and_white_society) > 0) 
    {
    echo "<h2>Green and White Society</h2>";
    for ($i = 0; $i < count($green_and_white_society); $i++) 
    echo $green_and_white_society[$i] . "<br>";
    }

    if(count($seventies_society) > 0)   
    {
    echo "<h2>1970's Society</h2>";
    for ($i = 0; $i < count($seventies_society); $i++) 
    echo $seventies_society[$i] . "<br>";
    }

    if(count($millennium_society) > 0)  
    {
    echo "<h2>Millennium Society</h2>";
    for ($i = 0; $i < count($millennium_society); $i++) 
    echo $millennium_society[$i] . "<br>";
    }

    if(count($dome_society) > 0)    
    {
    echo "<h2>Dome Society</h2>";
    for ($i = 0; $i < count($dome_society); $i++) 
    echo $dome_society[$i] . "<br>";
    }

    if(count($tunnel_society) > 0)  
    {
    echo "<h2>Tunnel Society</h2>";
    for ($i = 0; $i < count($tunnel_society); $i++) 
    echo $tunnel_society[$i] . "<br>";
    }

    if(count($friends_circle) > 0)  
    {
    echo "<h2>Friends' Circle</h2>";
    for ($i = 0; $i < count($friends_circle); $i++) 
    echo $friends_circle[$i] . "<br>";
    }

    if(count($others) > 0)  
    {
    echo "<h2>Other Donors</h2>";
    for ($i = 0; $i < count($others); $i++) 
    echo $others[$i] . "<br>";      
    }

?>

<!--dont modify below this line-->
<?php require_once('footer.php') ?> 
```

顺便说一句，我昨天问了一个问题，在这个漂亮的小盒子里给了我回复，这个小盒子显示了一个表名和所有表列标题。有没有办法可以在问题中做到这一点，以便我可以更好地说明并使我的问题更清楚？

谢谢大家，

乔尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:27:22.337

这应该可以满足您的需求。

```
mysql> select * from donation;
+------------+--------------+----------------+---------+
| DonationID | DonationType | DonationAmount | DonorID |
+------------+--------------+----------------+---------+
|          1 | monetary     |             50 |       6 |
|          2 | monetary     |            100 |       5 |
|          3 | monetary     |             25 |       5 |
|          4 | monetary     |             75 |       7 |
|          5 | monetary     |            250 |       8 |
|          6 | inkind       |             13 |       1 |
|          7 | inkind       |             19 |      15 |
|          8 | inkind       |              0 |       1 |
|          9 | inkind       |              0 |      23 |
|         10 | inkind       |              0 |       1 |
|         11 | inkind       |           4000 |       3 |
+------------+--------------+----------------+---------+
11 rows in set (0.00 sec)

mysql> select DonorID,sum(DonationAmount) as Total from donation where DonationType='monetary' group by DonorID order by Total Desc;
+---------+-------+
| DonorID | Total |
+---------+-------+
|       8 |   250 |
|       5 |   125 |
|       7 |    75 |
|       6 |    50 |
+---------+-------+
4 rows in set (0.00 sec)

mysql> 
```

然后，您可以更进一步，将您的捐赠表与您的捐赠者表连接起来，以在同一查询中获取捐赠者姓名。

```
mysql> select * from donors;
+---------+-------+
| DonorID | Name  |
+---------+-------+
|       6 | bob   |
|       5 | jack  |
|       7 | tim   |
|       8 | jane  |
|       1 | sara  |
|      15 | randy |
|       3 | hamed |
|      23 | jesse |
+---------+-------+
8 rows in set (0.00 sec)

mysql> select donation.DonorID,name,sum(DonationAmount) as Total from donation join donors on donation.DonorID=donors.DonorID where DonationType='monetary' group by DonorID order by Total Desc;
+---------+------+-------+
| DonorID | name | Total |
+---------+------+-------+
|       8 | jane |   250 |
|       5 | jack |   125 |
|       7 | tim  |    75 |
|       6 | bob  |    50 |
+---------+------+-------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:46:40.290

如果我理解得很好，问题是：将每个用户的所有“非实物”捐赠相加，以确定他们应该添加到哪个组中。

如果是这样，您的 DB 模型缺少一些外键，以便将捐赠者与他们的捐赠和 LGG 联系起来。

这是您可以使用的示例 MCD：

```
Donor ((PK)DonorId, Address, Phone, (FK -> LGG) LggId)
Donation((PK)DonationId, (FK -> Donor)DonorId, DonationType, DonationAmount, Description, Date_Received)
LGG ((PK)LggId, LeaderGrp, LGDescrip, MinAmount) 
```

其中 MinAmount 是属于该组所需的最低金额。

从那里，您所要做的就是：

```
select d.donorid, sum(do.donationamount)
from donor d,
donation do
where d.donorid=do.donorid
and do.donationtype!='in-kind'
group by d.donorid 
```

你最终会得到每个捐赠者的真金白银金额。

# facebook - 测试内部网络中的点赞按钮

> ID：13517266
> 
> 赞同：2
> 
> 时间：2012-11-22T17:04:03.787
> 
> 标签：facebook, api

我正在开发一个在页面上有赞和发送按钮的 web 应用程序。当我单击 Like 时，我会看到添加评论的对话框，并且在对话框关闭后，Like 计数会增加一，但是，Facebook 用户的墙/时间线没有显示 Like 发生了。发送按钮只显示一个弹出窗口“无法访问*MyServerURL的页面。”。*

我在公司防火墙后面的内部专用网络中执行此操作。在面向 Internet 的测试服务器（即可从 Internet 访问）上执行相同的操作可以正常工作。

所以我的问题是，为了让点赞出现在用户的时间线上并且“发送”按钮起作用，Facebook 是否需要能够直接连接到我的服务器？

其他人编写了代码，所以我不确定这是否有帮助。机密文本已被删除。

* * *

```
<iframe id="f3712ac8730a7ce" class="fb_ltr" scrolling="no" name="f83eb0490c4d7e" style="border: medium none; overflow: hidden; height: 20px; width: 126px;" title="Like this content on Facebook." src="http://www.facebook.com/plugins/like.php?api_key=336898076326008&locale=en_US&sdk=joey&ref=%2B11604%2B%2B&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D17%23cb%3Df1506af703597fe%26origin%3Dhttp%253A%252F%252FserverURL%252Ff19ab39215d694e%26domain%3DserverURL%26relation%3Dparent.parent&href=http%3A%2F%2FserverURL&node_type=link&width=150&layout=button_count&colorscheme=light&action=like&show_faces=false&send=true&extended_social_context=false">

<form id="u5mamr22" onsubmit="return window.Event && Event.__inlineSubmit && Event.__inlineSubmit(this,event)" action="/plugins/like/connect" method="post" ajaxify="/plugins/like/connect" rel="async">
<input type="hidden" autocomplete="off" value="AQAUDubM" name="fb_dtsg">
<input type="hidden" value="http://serverURL" name="href" autocomplete="off">
<input type="hidden" value="like" name="action" autocomplete="off">
<input type="hidden" name="nobootload" autocomplete="off">
<input type="hidden" value="http://serverURL" name="iframe_referer" autocomplete="off">
<input type="hidden" value="+11604++" name="ref" autocomplete="off">
<div class="pluginConnectButton">
<div class="pluginButton pluginButtonSmall pluginButtonInline pluginConnectButtonDisconnected" title="">
<div>
<button type="submit">
<i class="pluginButtonIcon img sp_like-send sx_like-send_fav"></i>
Like
</button>
</div>
</div>
<div class="pluginButton pluginButtonSmall pluginButtonPressed pluginButtonInline pluginButtonX pluginConnectButtonConnected hidden_elem" title="">
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:08:35.700

点赞按钮仅在要点赞的链接是公开的情况下才有效，因此您不能只点赞内部网络上的内容。Facebook 必须可以访问它。

# perl - 错误：“strict subs”时不允许使用裸词“params”

> ID：13517270
> 
> 赞同：4
> 
> 时间：2012-11-22T17:04:11.187
> 
> 标签：perl, mod-perl

单击提交按钮后，我收到错误消息：

```
Bareword "params" not allowed while "strict subs" in use at /var/www/path/get.pl line 71 
```

第 71 行：

```
my @names = params; 
```

我确实`use strict;`几乎在顶部。

怎么修？

注意：它在旧服务器上工作，我正在将所有文件移动到新服务器。不知道哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:28:55.570

`params`很可能是应该从另一个模块导入的子例程的名称（基于样式，*可能*是在 Perl 中也被实现为子例程的常量）。

在旧服务器上搜索其余代码`sub params`并简单地搜索正则`my.*params`表达式，并确保在新服务器上存在声明它们的任何文件。

# c# - 保存列表

> ID：13517275
> 
> 赞同：0
> 
> 时间：2012-11-22T17:04:50.557
> 
> 标签：c#, entity-framework

我有这个实体：

```
public class User
{
     public int Id {get;set;}
     public List<int> Permissions {get;set;}
} 
```

作为一对多的relashionship，我应该为这项工作做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:13:57.777

创建一个`Permission`类型：

```
public class User
{
     public int Id { get; set; }
     public ICollection<Permission> Permissions { get; set; }
}

public class Permission
{
   public int Id { get; set; }
   public int Value { get; set; }
} 
```

# javascript - 将json数组从函数返回到变量

> ID：13517278
> 
> 赞同：0
> 
> 时间：2012-11-22T17:05:04.710
> 
> 标签：javascript, google-maps

我正在开发一个脚本来通过地址从谷歌地图中获取 latlng。

如果我 `alert(jsonarr.lat);` 在函数内部放一个，`map_address()`我会得到正确的值，但是如果我将结果分配给这样的变量：

```
var coord = map_address('address');

alert(coord.lat); 
```

我得到错误`coord is undefined`

```
function map_address(addr)
    {

        var input_address = addr;
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode( { address: input_address }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var lat = results[0].geometry.location.lat();
                var lng = results[0].geometry.location.lng();

                      jsonarr={'lat':lat,'lng':lng}
                      alert(jsonarr.lat);
                      return jsonarr;           
            } else {
                alert("Nessuna coordinata trovata da questo indirizzo!");
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:10:59.370

该`geocoder.geocode(..);`函数是异步的，因为它在内部包装了另一个函数，稍后将在地理编码操作完成时调用该函数。

因为这个`map_address(...)`总会回来`undefined`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:13:11.823

试试这样：

```
function map_address(addr, callback) {

    var input_address = addr;
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { address: input_address }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var lat = results[0].geometry.location.lat();
            var lng = results[0].geometry.location.lng();

                               jsonarr={'lat':lat,'lng':lng}
                               alert(jsonarr.lat);
                               callback(jsonarr) ;

                            }
        else {
            alert("Nessuna coordinata trovata da questo indirizzo!");
            }
        });
}
map_address("hogehoge", function(result){
  alert(result)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:04:23.583

谢谢大家的回答，我把我所有的代码都放在了回调中，一切正常，这是最终的代码。

```
 function map_address(addr,callback)
        {

            var input_address = addr;
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode( { address: input_address }, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) 
                {
                    var lat = results[0].geometry.location.lat();
                    var lng = results[0].geometry.location.lng();

                    jsonarr={'lat':lat,'lng':lng}                       
                    return callback(jsonarr);                        
                }
                else {
                    alert("No coord find");
                }
            });
        }

$(document).ready(function(){ 
   $(window).load(function(){ 

map_address('address string',function(coord){

  var center=new google.maps.LatLng(coord.lat,coord.lng);

  var settings = {
          zoom: 16,
          center: center,
          mapTypeControl: false,
          mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
          navigationControl: true,
          navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
          mapTypeId: google.maps.MapTypeId.ROADMAP
      }; 

  var map=new google.maps.Map(document.getElementById("map"), settings);

var marker = new google.maps.Marker({
position: new google.maps.LatLng(coord.lat,coord.lng),
map: map
});

});
});

}); 
```

# python - python将元组列表制作成确定大小的间隔

> ID：13517281
> 
> 赞同：2
> 
> 时间：2012-11-22T17:05:18.017
> 
> 标签：python, tuples, pandas, intervals

我在一个文件中有 x 值和相应的计数。我将其读为以下形式的元组列表

```
dat = [(0.02, 1), 
(0.0211, 1), 
(0.021, 1), 
(0.023, 1), 
(0.0251, 1), 
(0.12, 2), 
(0.141, 1), 
(0.14, 3), 
(0.171, 1), 
(0.462, 9),
(0.467, 10),
(0.478, 15), 
(0.804, 20), 
(0.815, 31), 
(0.815, 24),
(2.72, 164), 
(2.78, 147), 
(2.8, 128),
(5.78, 6), 
(5.83, 1), 
(5.8603, 1),
(5.94, 17), 
(8.63, 3), 
(8.87, 5),  
(18.601, 1), 
(19.0, 7), 
(21.0, 2), 
(22.0, 4)] 
```

如何将这些转换为相等的间隔计数。例如，增量为 0.2 的间隔。

```
x    count
0    0
0.5  12
1.0  75
1.5  0
2.0  0
2.5  0
3.0  439
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:27:04.330

熊猫的一种方法：

```
In [74]: df = pd.DataFrame.from_records(dat).set_index(0)

In [75]: counts = df.groupby(lambda x: floor(x / 0.5) * 0.5).count()

In [76]: counts
Out[76]: 
       1
0.0   12
0.5    3
2.5    3
5.5    4
8.5    2
18.5   1
19.0   1
21.0   1
22.0   1 
```

您可以用零计数填充间隔：

```
In [77]: counts.reindex(np.arange(0, 22, 0.5)).fillna(0)
Out[73]: 
       1
0.0   12
0.5    3
1.0    0
1.5    0
2.0    0
2.5    3
3.0    0
3.5    0
4.0    0

etc ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:18:39.767

这是一个合理的解决方案，bin 上限存储在`bins`.

```
import numpy as np
min_bin_upper=0
max_bin_upper=100
bin_step=0.5

bins = np.arange(min_bin_upper,max_bin_upper,bin_step)
counts = np.zeros(len(bins))
i=0
for e in data:
    if e[0]>= bins[i]: i+=1
    if i>=len(bins): break
    counts[i]+=e[1]

print counts 
```

我已经用它测试过

```
data = [(0.1, 3), (0.2, 1),(0.3, 10)]
min_bin_upper = 0
max_bin_upper = 1
bin_step = 0.2 
```

它回来了

```
[  0\.   3\.  11\.   0\.   0.] 
```

我希望这是你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:27:07.093

这是一种使用 Python 标准库的方法：

```
import math

step_size = 0.5
result = {}
i = 0

for intval in [x * step_size for x in range(int(math.ceil(max(dat)[0]*2)+1))]:
    result[intval] = 0
    for n, count in dat[i:]:
        if n > intval:
            break
        result[intval] += count
        i += 1

print sorted(result.items(), key=lambda x:x[0])

[(0.0, 0), (0.5, 46), (1.0, 75), (1.5, 0), (2.0, 0), (2.5, 0), (3.0, 439), (3.5, 0)
, (4.0, 0), (4.5, 0), (5.0, 0), (5.5, 0), (6.0, 25), (6.5, 0), (7.0, 0), (7.5, 0),
(8.0, 0), (8.5, 0), (9.0, 8), (9.5, 0), (10.0, 0), (10.5, 0), (11.0, 0), (11.5, 0),
 (12.0, 0), (12.5, 0), (13.0, 0), (13.5, 0), (14.0, 0), (14.5, 0), (15.0, 0), (15.5
, 0), (16.0, 0), (16.5, 0), (17.0, 0), (17.5, 0), (18.0, 0), (18.5, 0), (19.0, 8),
(19.5, 0), (20.0, 0), (20.5, 0), (21.0, 2), (21.5, 0), (22.0, 4)] 
```

# gstreamer - 使用 gstreamer 将 mp4 从 x264enc 转换为 rgb 24 位

> ID：13517282
> 
> 赞同：1
> 
> 时间：2012-11-22T17:05:18.337
> 
> 标签：gstreamer

我已经使用以下命令行使用 gstreamer 成功生成了一个 .mp4 文件：

```
gst-launch -v filesrc location=Tears.avi ! decodebin2 ! ffmpegcolorspace! x264enc ! qtmux ! filesink location=result.mp4 
```

没有音频。

现在，我想将 result.mp4 转换为基于 video/x-raw-rgb 的 avi 文件。

我还不熟悉 gstreamer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:55:34.077

```
gst-launch filesrc location=result.mp4 ! decodebin2 ! ffmpegcolorspace ! video/x-raw-rgb ! avimux ! filesink location=result-rgb.avi 
```

尽管被警告，原始视频将是巨大的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:25:08.250

谢谢您的回答。

gst-inspect avimux 给出： SINK 模板：'video_%d' 可用性：根据请求具有 request_new_pad() 功能：gst_avi_mux_request_new_pad 功能：video/x-raw-yuv bla bla ...

我没有看到 avimux sink 与 video/x-raw-rgb 兼容。

我已经测试了您的解决方案，目前它不起作用。

我有一个将 h264 文件转换为 yuv 文件的解决方案： gst-launch -t -v filesrc location=result.mp4 ！qtdemux ！ffdec_h264 ！视频/x-raw-yuv ！！文件接收器位置=结果-yuv.avi

问题是我需要一个 rgb avi 输出文件...

不知道...？

谢谢你的帮助，

蒂埃里

# web-services - 我如何在 Windows 服务中初始化 StructureMap

> ID：13517284
> 
> 赞同：0
> 
> 时间：2012-11-22T17:05:24.773
> 
> 标签：web-services, service, windows-services, inversion-of-control, structuremap

我想问我如何在 Windows 服务中初始化 StructureMap？

我得到的错误是：提供的服务类型无法作为服务加载，因为它没有默认（无参数）构造函数。要解决此问题，请将默认构造函数添加到类型，或将类型的实例传递给主机。

我已经使用 Visual Studio 2008 创建了一个 Windows 窗体应用程序。在这个应用程序中，我添加了这些文件：

1.  服务.cs
2.  MyPrivateServiceService.cs
3.  AppRegistry.cs

代码：公共类 MyPrivateServiceService

```
{
    private readonly IAdapter adapter;
    public MyPrivateServiceService(IAdapter adapter)
    {
        this.adapter = adapter;
    }
    [OperationBehavior]
    public void DoSomthing()
    {
        var res = adapter.GetById(1);
    }
}
partial class Service : WcfServiceBase
{
    static Service()
    {
        GlobalContext.Properties["PROGRNAAM"] = ServiceNaamKort;
        log = LogManager.GetLogger(typeof(Service));
        InitializeIoc();
    }
    private static void InitializeIoc()
    {
        ObjectFactory.Configure(x =>
        {
            x.AddRegistry<AppRegistry>();
        });
    }
    protected override void OnStart(string[] args)
    {
        try
        {
            base.OnStart(args);
            host = new ServiceHost(typeof(MyPrivateServiceService));
            host.Open();

        }
        catch (Exception ex)
        {
            log.Fatal("....", ex);
            DisposeHost();
            throw;
        }
    }
}
public class AppRegistry : Registry
{
    public AppRegistry()
    {
        Scan(s =>
        {
            s.WithDefaultConventions();
        });
    }
} 
```

谢谢

奥里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:48:57.127

我找到了这个链接： http: [//lostechies.com/jimmybogard/2008/07/30/integrating-structuremap-with-wcf/](http://lostechies.com/jimmybogard/2008/07/30/integrating-structuremap-with-wcf/)

当我添加像这样的新构造函数时它会起作用：

```
public CustomerSearchService()
: this(ObjectFactory.GetInstance<ICustomerRepository>(), 
    ObjectFactory.GetInstance<ICustomerSummaryMapper>()) 
```

{ }

我试图实现 StructureMapServiceHostFactory，但我使用的是 Windows 服务，知道如何用 service.cs 初始化 StructureMapServiceHostFactory 吗？

谢谢你

奥里

# git - Homebrew：不会在 Mountain Lion 上链接 git

> ID：13517286
> 
> 赞同：2
> 
> 时间：2012-11-22T17:05:33.347
> 
> 标签：git, osx-mountain-lion, homebrew

已安装 Homebrew 并已下载 git，但它不会链接。得到这个错误信息：

```
Consider amending your PATH so that /usr/local/bin
occurs before /usr/bin in your PATH.
Warning: You have a non-Homebrew 'pkg-config' in your PATH:
  /opt/sm/pkg/active/bin/pkg-config

`./configure` may have problems finding brew-installed packages using
this other pkg-config.
unknown7cd1c3e98b07:~ pdenlinger$ brew install git
Error: git-1.8.0 already installed, it's just not linked
unknown7cd1c3e98b07:~ pdenlinger$ brew link git
Linking /usr/local/Cellar/git/1.8.0... Warning: Could not link git. Unlinking...

Error: Could not symlink file: /usr/local/Cellar/git/1.8.0/bin/gitk
Target /usr/local/bin/gitk already exists. You may need to delete it.
To force the link and delete this file, do:
  brew link --overwrite formula_name

To list all files that would be deleted:
  brew link --overwrite --dry-run formula_name
unknown7cd1c3e98b07:~ pdenlinger$ brew link git 
```

我能做些什么来解决这个问题？

vi 命令的响应：

```
sudo vi /etc/paths     /usr/local/bin  /usr/local/sbin   /usr/bin   /bin   /usr/sbin   /sbin
7 files to edit

E325: ATTENTION
Found a swap file by the name "/etc/.paths.swp"
          owned by: root   dated: Thu Nov 22 09:10:09 2012
         file name: /private/etc/paths
          modified: no
         user name: root   host name: unknown7cd1c3e98b07.att.net
        process ID: 98069 (still running)
While opening file "/etc/paths"
             dated: Tue Aug 21 15:44:10 2012

(1) Another program may be editing the same file.
    If this is the case, be careful not to end up with two
    different instances of the same file when making changes.
    Quit, or continue with caution.

(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r /etc/paths"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file "/etc/.paths.swp"
    to avoid this message.

Swap file "/etc/.paths.swp" already exists!
[O]pen Read-Only, (E)dit anyway, (R)ecover, (Q)uit, (A)bort: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:07:19.910

[这个问题的可能重复](https://stackoverflow.com/questions/10343834/homebrew-wants-me-to-amend-my-path-no-clue-how)......这个问题的解决方案是

打开您的 /etc/paths 文件，将 /usr/local/bin 放在 /usr/bin 的顶部

```
$ sudo vi /etc/paths
/usr/local/bin
/usr/local/sbin
/usr/bin
/bin
/usr/sbin
/sbin 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T21:45:38.113

我收到“权限被拒绝”错误，所以我编辑了 /etc/paths 文件使用

```
$ sudo nano /etc/paths 
```

# dart - 在 DART 应用程序中找不到发布包引用

> ID：13517294
> 
> 赞同：1
> 
> 时间：2012-11-22T17:06:03.857
> 
> 标签：dart, dart-pub

我已按照[为 DART 设置 web_components 的说明进行操作](http://www.dartlang.org/articles/dart-web-components/tools.html#editor-background-compilation)。页面中的此代码段给我带来了问题：

```
import 'package:web_components/component_build.dart';
import 'dart:io';

void main() {
  build(new Options().arguments, ['web/app.html']);
} 
```

当我尝试运行时，这是我收到的错误：

> dart --enable-checked-mode --package-root=C:\Users\John Jelinek\dart\ build.dart
> 
> 无法打开文件：C:\Users\John Jelinek\dart\web_components/component_build.dart'file:///C:/Users/John Jelinek/Documents/dart/webComponents/build.dart'：错误：第 1 行 pos 1：库处理程序导入'package：web_components/component_build.dart'失败；^

我不知道为什么它试图在`C:\Users\John Jelinek\dart`项目存在时找到参考`C:\Users\John Jelinek\Documents\dart`。顺便说一句，我使用的是 Windows 7 Home Premium 64 位。确保我的 pub 包引用适当位置的最佳方法是什么？

注意：我发现[其他人有类似](https://stackoverflow.com/questions/13161155/cannot-find-referenced-source-packages)的问题，但这些答案都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:23:04.407

查看这些说明，看看它们是否能解决您的问题：

[http://blog.sethladd.com/2012/11/your-first-web-component-with-dart.html](http://blog.sethladd.com/2012/11/your-first-web-component-with-dart.html)

# knockout.js - 剔除多选 selectedOptions 未在加载时选择

> ID：13517296
> 
> 赞同：6
> 
> 时间：2012-11-22T17:06:12.307
> 
> 标签：knockout.js

我正在为用户创建一个编辑表单，默认情况下不会在多选中选择用户的角色。

有 2 个应用程序角色：“管理员”和“主持人”。示例用户有 1 个角色“管理员”。默认情况下不选择此项。

[http://jsfiddle.net/jgT8s/4/](http://jsfiddle.net/jgT8s/4/)

html:

```
<form data-bind="with: user">
    <select id="selectRoles"
        data-bind="options: $root.allRoles, selectedOptions: Roles, optionsText: 'Name', optionsValue: 'Id'"
        multiple="true"
        size="5">
    </select>
</form> 
```

js：

```
var User = function () {
    var self = this;

    self.Id = ko.observable(1337);
    self.Username = ko.observable('pietpaulusma');
    self.Roles = ko.observableArray([{ Id: 1, Name: 'Administrator' }]);
};

function UserViewModel() {
    var self = this;

    self.user = ko.observable(new User());
    self.allRoles = ko.observableArray([{ Id: 1, Name: 'Administrator' }, { Id: 2, Name: 'Moderator' }]);
}

ko.applyBindings(new UserViewModel()); 
```

**UPDATE** 创建了一个dependentObservable 并将其映射到 selectedOptions

```
self.RoleIds = ko.dependentObservable(function () {
        return ko.utils.arrayMap(self.Roles(), function (role) {
            return role.Id;
        });
    }); 
```

工作版本：http: [//jsfiddle.net/jgT8s/5/](http://jsfiddle.net/jgT8s/5/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:18:39.047

问题是`Roles`包含“完整”对象，而它应该只包含值部分：

```
self.Roles = ko.observableArray([1]); 
```

看看这里：http: [//jsfiddle.net/Vkda5/](http://jsfiddle.net/Vkda5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T17:13:59.873

Knockout 需要按值比较选定的选项，`Id`在这种情况下是：`optionsValue: 'Id'`. 你正在传递一个`Role`对象数组。您需要改为传递数组`Id`：

```
var User = function () {
    ...
    self.Roles = ko.observableArray([1]);
}; 
```

# uml - UML 参与者的角色是什么？

> ID：13517298
> 
> 赞同：0
> 
> 时间：2012-11-22T17:06:20.953
> 
> 标签：uml, actor

在 UML 中，演员做什么？演员是只能启动用例的角色（即人）吗？或者参与者是与用例交互的任何人或系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:10:00.660

Actor 可以是参与我们使用用例构建的场景的人。它也可以是参与某些活动的组织，也可以是在用例中发挥作用的外部系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:31:55.500

Actor既可以是人也可以是系统，这里的关键点是在系统边界之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:13:20.357

统一建模语言 (UML) 中的参与者“指定用户或与主题交互的任何其他系统所扮演的角色。”[1]

“Actor 对与主体交互（例如，通过交换信号和数据）但在主体外部的实体所扮演的角色类型进行建模。”[1]

“参与者可能代表人类用户、外部硬件或其他主体所扮演的角色。请注意，参与者不一定代表特定的物理实体，而只是与规范相关的某个实体的特定方面（即“角色”）其相关用例。因此，单个物理实例可能扮演多个不同角色的角色，相反，给定角色可能由多个不同实例扮演。”[1]

UML 2 不允许 Actor 之间的关联。[1][2] 在参与者之间使用泛化/专业化关系有助于建模参与者之间的重叠行为，并且不会违反此约束，因为泛化关系不是一种关联。 [3]

参与者与用例交互。

来自[http://en.wikipedia.org/wiki/Actor_%28UML%29](http://en.wikipedia.org/wiki/Actor_%28UML%29)

# python - 遍历python中的嵌套列表

> ID：13517300
> 
> 赞同：2
> 
> 时间：2012-11-22T17:06:34.977
> 
> 标签：python, list, nested, loops

我正在尝试遍历一个列表，并根据几个条件在子列表中重新排列列表中的项目，所有这些都在原始列表中。因此使用 Python 中的以下代码，而 list1 通过分组 0s、1s 和 2s 正确打印：

```
new list 1 = [['A0', 'B0', 'C0'], ['A1', 'B1', 'C1'], ['A2', 'B2', 'C2']] 
```

一切都在第二个列表中混在一起，试图通过以下方式在进一步的子列表 As Bs Cs 中重新分组：

```
new list 2 = [[['A0', 'A1', 'A2'], ['B0', 'B1', 'B2'], ['C0', 'C1', 'C2']]] 
```

同时期望得到：

```
new list 1 = [[['A0'], ['B0'], ['C0']], [['A1'], ['B1'], ['C1']], [['A2'], ['B2'], ['C2']]] 
```

下面是我使用的代码（对不起长度，我敢肯定有一个非常简化的版本）。

```
def Main():

    array = ['A0', 'A1', 'A2', 'B0', 'B1', 'B2', 'C1', 'C0', 'C2']

    list1 = NewList1(array)
    print 'new list 1 = ' + str(list1)

    list2 = NewList2(list1)
    print 'new list 2 = ' + str(list2)

def NewList1(thelist):
    sublist1=[]
    sublist2=[]
    sublist3=[]
    sublist4=[]
    newlist=[]
    for item in thelist:
        if hasattr(item,"__iter__"):
            for subitem in item:
                sublist1.append(subitem)
        elif "0" in item:
                sublist2.append(item)
        elif "1" in item:
                sublist3.append(item)
        elif "2" in item:
                sublist4.append(item)
        else:
            newlist.append(item)
    if sublist2: newlist.append(sublist2)
    if sublist3: newlist.append(sublist3)
    if sublist4: newlist.append(sublist4)

    if sublist1: newlist.append(NewList1(sublist1))

    return newlist

def NewList2(thelist):
    sublist1=[]
    sublist2=[]
    sublist3=[]
    sublist4=[]
    newlist=[]
    for item in thelist:
        if hasattr(item,"__iter__"):
            for subitem in item:
                sublist1.append(subitem)
        elif "A" in item:
                sublist2.append(item)
        elif "B" in item:
                sublist3.append(item)
        elif "C" in item:
                sublist4.append(item)
        else:
            newlist.append(item)
    if sublist2: newlist.append(sublist2)
    if sublist3: newlist.append(sublist3)
    if sublist4: newlist.append(sublist4)

    if sublist1: newlist.append(NewList2(sublist1))

    return newlist

Main(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:15:16.817

按您的分组标准排序，然后使用[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

key = lambda el: el[1]
list2 = [[[el] for el in grouped] for group, grouped in groupby(sorted(input, key=key), key)] 
```

示范：

```
>>> from itertools import groupby
>>> input = ['A0', 'A1', 'A2', 'B0', 'B1', 'B2', 'C1', 'C0', 'C2']
>>> key = lambda el: el[1]
>>> [[[el] for el in grouped] for group, grouped in groupby(sorted(input, key=key), key)]
[[['A0'], ['B0'], ['C0']], [['A1'], ['B1'], ['C1']], [['A2'], ['B2'], ['C2']]] 
```

您的输出要求有点复杂；如果返回分组元素的列表就足够了，那么调用`list()`就`grouped`足够了：

```
>>> [list(grouped) for group, grouped in groupby(sorted(input, key=key), key)]
[['A0', 'B0', 'C0'], ['A1', 'B1', 'C1'], ['A2', 'B2', 'C2']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:26:44.110

```
 python 3.2

     [[[i] for i in v] for v in list1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-03T03:08:47.610

考虑一下[`more_itertools.chunked`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.chunked)，它接受一个可迭代的和一个块大小`n`：

```
import more_itertools as mit

data = ['A0', 'A1', 'A2', 'B0', 'B1', 'B2', 'C1', 'C0', 'C2']

list(mit.chunked(data, 3))
# [['A0', 'A1', 'A2'], ['B0', 'B1', 'B2'], ['C1', 'C0', 'C2']]

list(mit.chunked(list(mit.chunked(data, 1)), 3))
# [[['A0'], ['A1'], ['A2']], [['B0'], ['B1'], ['B2']], [['C1'], ['C0'], ['C2']]] 
```

# ruby-on-rails - Rails 关系

> ID：13517302
> 
> 赞同：0
> 
> 时间：2012-11-22T17:06:42.473
> 
> 标签：ruby-on-rails, activerecord, database-relations

我有 3 张桌子：

```
profiles, users, payment_details 
```

现在，在`models/user.rb`我有以下内容：

```
has_one :profile, :dependent => :destroy
has_one :payment_detail, :dependent => :destroy 
```

在`models/profile.rb`我有：

```
has_one :payment_detail, :through => :user 
```

在`models/payment_details.rb`我有：

```
has_one :profile, :through => :user 
```

然后我有一个`:profile`带有`:payment_details`嵌套表单的表单。

由于某种原因，使用from而不是from`:payment_details`获取`:user_id`更新`:id``:profiles``:user_id``:profiles`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:06:06.187

根据文档，关联的行为`accepts_nested_attributes_for`似乎没有明确定义`:through`。这种关系通常被认为是直接的亲子关系，因此您会看到这样的奇怪行为也就不足为奇了。

您应该通过`User`模型处理表单，接受模型的属性`PaymentDetail`，或者以某种方式组合您的模型。我很少发现使用关联很有用`has_one`，因为维护它们的成本往往超过收益，但这始终取决于您的用例。如果你没有太多的列，你可能想结合`User`，`Profile`也许与`PaymentDetail`来简化你的代码。

# c++ - 将“零”值设置为成员变量

> ID：13517307
> 
> 赞同：1
> 
> 时间：2012-11-22T17:06:53.550
> 
> 标签：c++, oop, class, constructor, member-variables

我无法理解一些 C++ 概念。

什么时候使用成员指针和成员变量比较合适？

假设我有一个树结构，因此有一个`Node`类。我的直觉是为其`Data`and使用一个变量`Edge`（因为`Node`“拥有” the `Data`）和一个指向 parent 的指针`Node`。它是否正确？

```
class Node {
public:
    Data data;
    Edge edge;
    Node *parent;
} 
```

当我为类实现自定义创建者方法时`Node`，我还必须初始化成员变量（但不是指针？）。对于根`Node`，我可以将父指针设置为`NULL`.

但是我该怎么处理这个`Edge`变量？根`Node`没有父级，也没有`Edge`从其父级指向它。我可以以某种方式将其设置为“零”值吗？如果重要的话，`Edge`该类没有默认构造函数，而是像这样：`Edge(int length, int width)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:24:25.290

有关成员指针与成员变量的适当使用，请参阅[此讨论](https://stackoverflow.com/questions/1175646/c-when-should-i-use-a-pointer-member-in-a-class)。

现在，`Edge`对于“零”值，您可以对类执行以下操作：

将构造函数更改为`Edge`：

```
Edge(int length=0, int width=0) 
```

这样，当使用（或隐式使用）`Edge`默认构造时，将匹配该构造函数并使用指定的默认值。`Edge e1``Node n1`

我会说长度为 0 和宽度为 0 的边缘作为“零”边缘非常有意义。

我只列出了一种为构造函数定义默认值的方法。这里有[关于这个主题的额外讨论](https://stackoverflow.com/questions/187640/default-parameters-with-c-constructors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:36:24.180

当类的“自定义创建者”方法（正确地称为“构造函数”）`Node`运行时，其任何成员`Node`本身都是对象（即不是整数、浮点数、字符和指针等基本类型）将运行它们自己的构造函数。

所以`edge`对象的初始值将由`Edge`类的构造函数决定。如果`Edge`类构造函数需要参数，则`Node`构造函数必须提供它们。

例如，假设`Edge`构造函数需要一个名为 的整数`weight`，例如：

```
class Edge {
  public:
    Edge(int w)
      : weight(w) {
    }

  private:
    int weight;
}; 
```

然后有两个选项可以给这个边缘一个默认的权重。您可以为边缘构造函数提供此参数的默认值：

```
class Edge {
  public:
    Edge(int w = 0)
      : weight(w) {
    }

  private:
    int weight;
}; 
```

在这种情况下，`Node`类不需要做任何特别的事情。或者，您可以让`Node`类提供参数，例如：

```
class Node {
  public:
    Node()
      : edge(0),
        parent(NULL) {
    }

    Data data;
    Edge edge;
    Node *parent;
}; 
```

# c++ - Boost Asio - 如何知道处理程序队列何时为空？

> ID：13517313
> 
> 赞同：3
> 
> 时间：2012-11-22T17:07:14.420
> 
> 标签：c++, multithreading, boost, boost-asio

我目前正在将处理程序发布到我的 io_service 并在线程池中执行它们。

```
io_serv.post( boost::bind(&Class::bar, p1, p2) ); 
```

我的工人运行这个功能：

```
m_mutex.lock();
std::cout << "[" << boost::this_thread::get_id()
        << "] Thread Start" << std::endl;
m_mutex.unlock();

size_t tasks = m_serv.run();

m_mutex.lock();
std::cout << "[" << boost::this_thread::get_id() << "] accomplished "
          << tasks << " tasks" << std::endl;
m_mutex.unlock(); 
```

到目前为止一切顺利，但现在**我想在处理程序队列为空时触发一个事件，而不会杀死我的活动（但正在等待）线程。**

有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:42:39.333

我第一次看到使用**asio**作为队列调度程序。我认为不错的技术。

好吧，我建议您运行**io_service::run**来为处理程序提供服务。如[文档](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/reference/io_service/run/overload2.html)所述，**run**将阻塞，直到 io_service 停止或所有工作完成。**所以你可以在io_service::run**之后运行你的“空队列事件” ：

```
while( !finished ) {
    io_serv.run();
    io_serv.reset();
    io_serv.post( boost::bind(&Class::fill_queue, instance) );
} 
```

如果您在此 io_service 上没有其他 asio 活动并且您没有使用 io_service::work。

正如评论中提到的，您使用**io_service::work**所以计划 A 失败（它不会工作，因为此类阻止退出空队列）。好吧，您可以`io_serv.post()`在每束`io_serv.post()`-s 之后执行线程作业。处理程序可以在其他线程完成工作时使用**boost::condition**包含等待。正如您`post()`在实际工作之后为此所做的那样，我认为 asio 会在调度所有工作后调用它，但它的主题有待调查。无论如何，`post()`如果条件尚未准备好，该处理程序可以重新释放当前线程。

但我认为最简单的方法是将**io_service::work**替换为 equialent **while**构造。

# r - 用新值替换矩阵的值

> ID：13517314
> 
> 赞同：1
> 
> 时间：2012-11-22T17:07:15.543
> 
> 标签：r

我有一个如下所示的数字数据矩阵：（矩阵）

```
 Sample1     Sample2       Sample3         Sample4

BD.1809   0.4275       -1.034         0.857757         -1.43362
BD.911    0.4455       -1.456         -0.472828        -0.643979
BP.12     0.03642      -0.9054        1.03334          -0.02428
BS.114    -0.3262      4.677          -0.92514         -0.2435
BS.130    -0.2335      -0.8661        -1.21435         -0.9759
BS.376    0.1937       -1.043         -0.320004        -0.691325 
```

我用以下代码计算了平均值 `Mean<-mean(Matrix)`

如何用平均值替换矩阵中的每个值？

任何人都可以给我如何做到这一点的提示吗？行名和列名是未知的，值本身和矩阵的大小也是未知的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:09:57.057

```
m <- matrix(1:10,nrow=2)
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    5    7    9
[2,]    2    4    6    8   10

> mean(m)
[1] 5.5
> m[,] <- mean(m)
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]  5.5  5.5  5.5  5.5  5.5
[2,]  5.5  5.5  5.5  5.5  5.5 
```

# php - 带有生成附件的 mail() 未在客户端邮件上格式化

> ID：13517319
> 
> 赞同：0
> 
> 时间：2012-11-22T17:07:34.777
> 
> 标签：php

我对带有生成附件并由 mail() 发送的邮件有疑问。[我从这里](http://webcheatsheet.com/php/send_email_text_html_attachment.php)使用示例 3 。

它工作正常。但是当我添加一些 php 定义（如：$somthing = $_POST['sth']）时，收到的电子邮件没有格式化，看起来像源代码。

```
<?php
    //session_start();
    include('funkcje.php');
    //$db=polaczMy();
    $nazwa = uzupelnij($_POST['nazwa']);
    $vorname= uzupelnij($_POST['vorname']);
    $strasse = uzupelnij($_POST['strasse']);
    $kod = uzupelnij($_POST['kod']);
    $tel = uzupelnij($_POST['tel']);
    $mail = uzupelnij($_POST['mail']);
    $datum_od  = uzupelnij($_POST['datum_od']);
    $datum_to  = uzupelnij($_POST['datum_to']); 
    $ort = uzupelnij($_POST['ort']);
    $zeit = uzupelnij($_POST['zeit']);
    $mietteilung = uzupelnij($_POST['mietteilung']);
    $service = uzupelnij($_POST['service']);

    function uzupelnij($przesyl){
        if(empty($przesyl)){ 
            $przesyl = "";
            return $przesyl;
        }
    }

        $to = '***@***.net'; 
        $subject = 'Anfrage';  
        $random_hash = md5(date('r', time())); 
        $headers = "From: ***@***.de\r\n"; 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
        $attachment = "BEGIN:VCARD\nVERSION:3.0\nN:".$vorname.";;;;\nFN:".$vorname."\nORG:".$nazwa."\nADR;TYPE=work:;;".$strasse.";".$ort.";;;\nEMAIL;type=INTERNET;type=WORK;type=internet:".$mail."\nTEL;type=WORK;type=pref:".$tel."\nEND:VCARD"; 
        ob_start();
        ?>
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>" 
--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit
Hello World!!! 
This is simple text email message. 
--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit
<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p> 
--PHP-alt-<?php echo $random_hash; ?>-- 
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: text/vcard; name="attachment.vcf"  
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment  
<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>-- 
<?php 
        //copy current buffer contents into $message variable and delete current output buffer 
        $message = ob_get_clean(); 
        //send the email 
        $mail_sent = @mail( $to, $subject, $message, $headers ); 
        //if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
        echo $mail_sent ? "<span style=\"margin-top: 20px; font-size: 18px; font-weight: bold;\">Vielen Dank! Ihre Anfrage wurde versendet. Wir werden bald mit Ihnen Kontakt aufnehmen. </span>" : "Mail failed"; 
        //session_destroy();
// }
?> 
```

并在邮件中：

```
 Content-Type: multipart/mixed; boundary="PHP-mixed-26680626f5767c87be4bc162d5e80e8e"

--PHP-mixed-26680626f5767c87be4bc162d5e80e8e  
Content-Type: multipart/alternative; boundary="PHP-alt-26680626f5767c87be4bc162d5e80e8e" 
--PHP-alt-26680626f5767c87be4bc162d5e80e8e  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit
Hello World!!! 
This is simple text email message. 
--PHP-alt-26680626f5767c87be4bc162d5e80e8e  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit
<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p> 
--PHP-alt-26680626f5767c87be4bc162d5e80e8e-- 
--PHP-mixed-26680626f5767c87be4bc162d5e80e8e  
Content-Type: text/vcard; name="attachment.vcf"  
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment  
BEGIN:VCARD
VERSION:3.0
N:dgsdg;;;;
FN:dgsdg
ORG:bgdfg
ADR;TYPE=work:;;dgsdg;gdsg;;;
EMAIL;type=INTERNET;type=WORK;type=internet:gsdgdf
TEL;type=WORK;type=pref:gfgs
END:VCARD 
--PHP-mixed-26680626f5767c87be4bc162d5e80e8e-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:36:00.137

```
$headers = "From: ***@***.de\r\n"; 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
```

这将导致您的标题中出现空行，因此标题将在`From`字段上结束，`Content-type`将被视为消息的正文。

您还缺少每个边界标记之前的空行。

更重要的是：

```
function uzupelnij($przesyl){
    if(empty($przesyl)){ 
        $przesyl = "";
        return $przesyl;
    }
} 
```

你认为它有什么作用？它返回 null 或空字符串，因此您从 POST 数据分配的每个变量都是空的。

# c# - Exchange Web 服务 API 和 401 未经授权的异常

> ID：13517323
> 
> 赞同：26
> 
> 时间：2012-11-22T17:07:55.107
> 
> 标签：c#, exchangewebservices, http-status-code-401, exchange-server-2007, unauthorized

当我尝试使用 EWS API 发送电子邮件时，我收到以下错误：（在`message.Send();`）

> 请求失败。远程服务器返回错误：(401) Unauthorized。

我的代码如下：

```
ExchangeService exchangeService = new ExchangeService(ExchangeVersion.Exchange2007_SP1);

//WebService Uri
try
{
    exchangeService.Url = new Uri("https://exchangeserver/ews/exchange.asmx");
}
catch (Exception ex)
{
    throw new Exception(string.Format("WebService Uri:" + ex));
}

//Credentials
try
{
    exchangeService.Credentials = new WebCredentials("user@domain", "pwd", "domain");
}
catch (Exception ex)
{
    throw new Exception(string.Format("Credentials:" +  ex));
}

//Send a mail
try
{
    EmailMessage message = new EmailMessage(exchangeService);
    message.Subject = "Test";
    message.Body = "Test";
    message.ToRecipients.Add("destination@domain");
    message.Save();
    message.Send();
}
catch (Exception ex)
{
    throw ex;
} 
```

我阅读了该网站上有关此问题的其他帖子，但他们无法解决我的问题。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-22T17:22:49.787

尝试改变这个：

```
 exchangeService.Credentials = new WebCredentials("user@domain", "pwd", "domain"); 
```

进入这个：

```
 exchangeService.Credentials = new WebCredentials("user", "pwd", "domain"); 
```

有时登录凭据取决于 Exchange/Active Directory 的配置方式。它可以是 user@domain 或 domain\user

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T17:30:43.247

就我而言，我需要在 IIS 站点下的 EWS 虚拟目录中添加允许的 URL 列表。

1.  转到 IIS 管理，单击默认网站下的 EWS 节点，然后双击请求过滤。

2.  转到 URL 选项卡，然后在右侧单击允许 URL。

3.  输入您将用来调用服务的 URL，例如 example.com/ews/ 或 server.example.com/ews/

此外，与类似问题相关，我需要将所有主机（*）添加到 winrm 受信任主机（默认情况下它只列出本地 IP）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T07:47:06.313

此问题可能导致 Microsoft Office 365 提供的双向身份验证。最好创建应用程序密码并传递该密码，而不是 Outlook 密码。

```
exchangeService.Credentials = new WebCredentials("email", "app-pwd"); 
```

# javafx-2 - JavaFX 中的 Line3D

> ID：13517325
> 
> 赞同：2
> 
> 时间：2012-11-22T17:08:00.983
> 
> 标签：javafx-2, javafx-3d

我想在 3D 中画一条线，因为我想在 3D 点之间画线。

我对找到 Point3D 类但没有 Line3D 或 Plane3D 感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-23T13:36:19.470

虽然 Jewelsea 的答案会起作用，但它既不方便也不高效。这个答案有点晚了，但我认为对于未来的读者来说，重要的是要注意，现在使用免费的开源 F(X)yz 库可以更轻松地拥有像“Line3D”这样的东西：

[http://fxyz3d.org](http://fxyz3d.org)

您将需要使用 PolyLine3D 类，它允许您简单地指定 Point3D 列表，它会为您连接它们：

/src/org/fxyz/shapes/composites/PolyLine3D.java

您可以在测试目录中查看有关如何使用它的示例代码：

/src/org/fxyz/tests/PolyLine3DTest.java

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:37:28.980

JavaFX 2.2 3D 支持相当初级。您可以创建 2D 形状，然后对其应用变换以使它们进入 3D 空间，但您不是直接在 3D 坐标中定义形状。因此，要获得 3D 线，您可以定义 2D 线，然后围绕 x 和 y 轴旋转它并在节点上设置 az 坐标。

未来的 JavaFX 版本将提供[3D 特定形状和网格](https://wiki.openjdk.java.net/display/OpenJFX/3D+Features)，以便更自然地使用 3D 功能。例如，您可以使用细圆柱体来表示 3D 线。

# ios5 - iCloud 使用 Magical Record 说“在尝试响应基线滚动时遇到错误”

> ID：13517326
> 
> 赞同：3
> 
> 时间：2012-11-22T17:08:10.923
> 
> 标签：ios5, icloud, magicalrecord

我正在设置我的 iOS 应用程序以使用 Magical Record 和 iCloud。Magical Record 似乎正在启动并连续初始化 iCloud 容器。然后它在尝试保存“baseline.zip”时报告错误任何关于出现问题的建议将不胜感激。下面是堆栈跟踪。

非常感谢，乔尔

```
2012-11-22 16:51:07:918 ThatsIt[1803:907] -> Created <NSManagedObjectContext (0x21055f20): *** UNNAMED ***> on *** MAIN THREAD ***
2012-11-22 16:51:07:919 ThatsIt[1803:907] Set Root Saving Context:    <NSManagedObjectContext: 0x21055f20>
2012-11-22 16:51:07:919 ThatsIt[1803:907] Created Main Queue Context: <NSManagedObjectContext: 0x21056a30>
2012-11-22 16:51:07:920 ThatsIt[1803:907] Set Default Context: <NSManagedObjectContext: 0x21056a30>
2012-11-22 16:51:07:943 ThatsIt[1803:907] DDlog is running okay
2012-11-22 16:51:09.764 ThatsIt[1803:3a0b] -[_PFUbiquityRecordsImporter rollResponseOperation:encounteredAnError:whileTryingToAdoptBaseline:](1509): CoreData: Ubiquity:  <PFUbiquityBaselineRollResponseOperation: 0x2105eb20> localPeerID:  mobile.EF865F29-F719-5648-8C0F-0F9CE63C520F, storeName: com.mirthfullife.ThatsIt,  modelVersionHash: 47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=
ubiquityRootLocation: <PFUbiquityLocation: 0x21063cc0>:   /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt

Encountered an error while trying to respond to the roll of baseline: <PFUbiquityBaseline: 0x1fd956a0>(0)
permanentLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile  Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip
safeLocation: <PFUbiquityLocation: 0x1fd94110>: /private/var/mobile/Library/Mobile  Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj 8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/mobile.EF865F29-F719-5648-8C0F-0F9CE63C520F
currentLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip

storeName: com.mirthfullife.ThatsIt
modelVersionHash: 47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=
baselineArchiveLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile  Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip

Error: Error Domain=NSCocoaErrorDomain Code=134310 "The operation couldn’t be completed. (Cocoa error 134310.)" UserInfo=0x1fd8bbe0 {baseline=<PFUbiquityBaseline: 0x1fd956a0>(0)
permanentLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip
safeLocation: <PFUbiquityLocation: 0x1fd94110>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/mobile.EF865F29-F719-5648-8C0F-0F9CE63C520F
currentLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip

storeName: com.mirthfullife.ThatsIt
modelVersionHash: 47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=
baselineArchiveLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile  Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj 8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip, localStoreKV=<PFUbiquityKnowledgeVector: 0x1fd7d070> ()}
userInfo: {
baseline = "<PFUbiquityBaseline: 0x1fd956a0>(0)\n\tpermanentLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip\n\tsafeLocation: <PFUbiquityLocation: 0x1fd94110>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/mobile.EF865F29-F719-5648-8C0F-0F9CE63C520F\n\tcurrentLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip\n\n\tstoreName: com.mirthfullife.ThatsIt\n\tmodelVersionHash: 47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=\n\tbaselineArchiveLocation: <PFUbiquityLocation: 0x1fd91ab0>: /private/var/mobile/Library/Mobile Documents/F8MBU8E2WX~com~mirthfullife~ThatsIt/.baseline/com.mirthfullife.ThatsIt/47DEQpj8HBSa~_TImW~5JCeuQeRkm5NMpJWZG3hSuFU=/baseline.zip\n";
localStoreKV = "<PFUbiquityKnowledgeVector: 0x1fd7d070> ()"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T23:39:43.437

我这里也一样。在网上搜索后，我只找到了[清理构建的提示，从设备中删除应用程序并重新构建它](http://forums.bignerdranch.com/viewtopic.php?f=242&t=5411)。然而，这并没有解决我的问题，但该应用程序按预期工作。

一旦我第一次创建一些数据，错误就消失了，所以它可能“只是”是一个初始错误，虽然感觉很沮丧..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:59:48.350

这基本上意味着 iCloud 期望在您的 iCloud 文件夹中看到一些数据，您有一个 iCloud 文件夹（您刚刚创建），但其中没有任何（数据）......

Apple 似乎希望您在使用之前立即为商店播种。

要临时修复，请将 iCloud 期望从您的应用程序中获得的一些数据放入其中。（换句话说，使用您的应用程序）

它看起来像永久修复它，（对于您的用户在启动时）在它尝试读取之前用一些丢弃的变量为商店播种。

（换句话说，如果您删除了 iCloud 存储/临时存储/后备存储中的所有文件（包括实际文件夹），当您第一次运行应用程序并且不为存储添加种子时，此错误应该会再次出现）

无论如何，这应该为某人提供一些实验要做:o)

至少这是我认为正在发生的事情。如果我发现一些不同的东西，我会添加到答案中。

# java - Java：空安全 compareTo 方法

> ID：13517334
> 
> 赞同：9
> 
> 时间：2012-11-22T17:09:08.503
> 
> 标签：java, compare, comparator

以前有人问过，但我还没有找到一个体面的实现和解释。

```
public int compareTo(Object o)
{
    if (this == null || o == null)
    { 
        return 0;
    }
    Tok tmp = (Tok) o;      
    if (this.rang < tmp.rang)
    {
        return -1;
    } else if (this.rang > tmp.rang ) {
        return 1;
    } else {
        return 0;
    }
} 
```

我读了两个我发现的类似问题；他们坚持实施另一种方法。我不明白为什么这不起作用。该方法获取一个额外的对象，并检查它是否是一个有效的实例，或者`null`，如果`null`只是返回`0`；什么是实现 null-safe 的最简单方法`compareTo`。

对我有用的实现是：

```
public int compareTo(Object o)
{
    if (o == null)
    { 
        return 0;
    }
    Tok tmp = (Tok) o;      
    if (this.rang < tmp.rang)
    {
        return -1;
    } else if (this.rang > tmp.rang ) {
        return 1;
    } else {
        return 0;
    }
} 
```

这不是最佳实施，人们应该关注这里发布的好人作为答案。对于我的特殊情况，这已经足够了，因为它永远不会为空，但接收到的对象可以是空的，并且初始实现状态是否为空返回 0。因此，如果给定对象为空，则返回 0。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T17:13:11.950

就个人而言，我喜欢[Guava 的`Ordering`](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Ordering.html)null 安全比较。您可以指定[`#nullsFirst()`](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Ordering.html#nullsFirst%28%29)或[`#nullsLast()`](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Ordering.html#nullsLast%28%29)避免`NullPointerException`s。

其他重要说明，主要来自评论：

*   `this`**从不** `null`在 Java中
*   如果您要实现细粒度，请考虑使用[Guava`ComparisonChain`](https://github.com/google/guava/wiki/CommonObjectUtilitiesExplained#comparecompareto)`compareTo()`
*   实现时[`Comparable`](http://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html)，请务必指定类型参数，以便获得编译时类型安全并且不必使用`instanceof`或强制转换：

    ```
    class Tok implements Comparable<Tok> {
        // snip

        public int compareTo(Tok other) {
            // snip
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T17:12:08.597

返回 0 将意味着`this`and是相等的，如果为 null`o`则不正确。`o`此外，`this`永远不会为空。

当然，它取决于应用程序。您可能想要一个应该等于 null 的对象。你在那里返回什么取决于你，但如果你正在寻找一种通用的 null 安全方法，它并不是很理想。

为了完全通用，我会检查是否`o`是`null`，如果是，则抛出某种异常。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T17:45:21.050

我对其他答案不满意：
您不应该在 compareTo 中检查 null。
要求它抛出一个 NullPointerException，否则你会弄乱你的树并且很难找到你的 TreeMap 不工作的原因。

一个非常值得推荐的方法：

```
 public int compareTo(Tok other) { 
    int thisRang = this.rang; 
    int otherRang = other.rang; 
    return (thisRang < otherRang ? -1 : (thisRang == otherRang ? 0 : 1)); 
  } 
  public int compareTo(Object other) { 
    return compareTo((Tok)other); 
  } 
```

进一步使其完美，类 Tok 应该是最终的！（否则，当您从 Tok 子类化时可能会遇到问题。（Sun 在上课日期犯了那个错误）

```
final class Tok {
    int rang;
} 
```

处理 compare 和 equals 并不总是那么容易，考虑使用 HashMap 代替 Trees (TreeMap)，那么你不必实现 compareTo。您应该实现 hashCode，您只需在其中返回 this.rang。

最后，强烈推荐它，但不是强制实现 equals()

```
public boolean equals(Object obj) {
return obj instanceof Tok
    && this.rang() == ((Tok) obj).rang;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T17:18:24.537

比较两个对象可以像任何其他方法一样是空安全的，这里的问题是普通方法有两个参数，但`compareTo`接收一个参数，另一个是对象本身。

`this`永远不能为空，这意味着您正在`null`对象中执行代码（无实例）。在这种情况下， a`NullPointerException`将在调用 时被抛出`compareTo`，使其代码无法执行。

方法与对象一样多，因为比较可以基于可以为空的类的字段（旨在排除原始类型的上限）。因此，长话短说，您的空检查应该涵盖您作为参数接收的对象`compareTo`和使用的字段。此外，如果您有一个包含某些逻辑的外部实例（即实用程序类），您应该检查该实例是否也为空。

作为旁注，如果任何涉及的对象返回，则无论您返回什么，都`null`必须是一致的并记录在案（您可以返回 -1 或 1，以在开头或结尾放置空值）。只是避免返回 0 （这与`equals`返回对象`true`的情况相同`null`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T17:36:49.763

看起来很奇怪，但它并不安全。尝试将您的 Tok 添加到 TreeSet 或 TreeMap（作为键），您将获得 NullPointerException。问题是 TreeSet 的实现是基于 TreeMap 的。当您尝试添加（null）时，底层地图将尝试放置您的 null ，这将导致 NPE

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-23T14:03:54.013

作者坚持他不想从他的 Tok[] 中删除空值。
这是一个允许使用 NULL 值进行排序的灵魂，并且不违反 java 合同

为避免这种情况，您在 Tok 类中创建了一个违反 compareTo 协定的 compareTo，您创建了一个显式 NullSafeComparator：

```
 /**
 * This comparator accepts null objects,
 * sorts ascending, null values are after non null values.
 */
public static final class NullSafeComparator implements Comparator<Tok> {
    public int compare(Tok o1, Tok o2) {
        int r1 = Integer.MAX_VALUE;
        int r2 = Integer.MAX_VALUE;
        if (o1 != null) {
            r1 = o1.rang;
        }
        if (o2 != null) {
            r2 = o2.rang;
        }
        return (r1 < r2 ? -1 : (r1 == r2 ? 0 : 1));
    }
} 
```

简化类 Tok（删除静态关键字它用于在一个单元测试类中定义所有内容）：

```
public static class Tok {
    int rang;
    public Tok(int rang) {
        this.rang = rang;
    }
    public String toString() {
        return Integer.toString(rang);
    }
} 
```

最后一个单元测试显示：

```
public void testSort() {

    Tok[] toks = new Tok[5];
    toks[0] = new Tok(3);
    toks[1] = new Tok(1);
    toks[2] = null;
    toks[3] = null;
    toks[4] = new Tok(2);

    Arrays.sort(toks, new NullSafeComparator());

    for (Tok tok: toks) {
        System.out.println(tok);
    }
    assertEquals(1, toks[0]);
    assertNull(toks[4]);
} 
```

这将给出以下期望的结果：

```
1
2
3
null
null 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-02T18:11:05.403

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)：

```
Note that null is not an instance of any class, and e.compareTo(null) should
throw a NullPointerException even though e.equals(null) returns false. 
```

因此，如果您实现了一个空安全方法，它的行为将是出乎意料的（也就是与文档不一致，并且可能与 API 的其余部分不一致）。

# perl - SVN::Client 中的 SVN 登录访问提示

> ID：13517337
> 
> 赞同：3
> 
> 时间：2012-11-22T17:09:16.633
> 
> 标签：perl, svn

```
use SVN::Client;
my $ctx = new SVN::Client(
      auth => [SVN::Client::get_simple_provider(),
      SVN::Client::get_simple_prompt_provider(\&simple_prompt,2),
      SVN::Client::get_username_provider()]
      );

$ctx->cat(\*STDOUT, 'http://mysvn.repo.com/www/xxx','HEAD');

sub simple_prompt {
  my $cred = shift;
  my $realm = shift;
  my $default_username = shift;
  my $may_save = shift;
  my $pool = shift;

  print "Enter authentication info for realm: $realm\n";
  print "Username: ";
  my $username = <>;
  chomp($username);
  $cred->username($username);
  print "Password: ";
  my $password = <>;
  chomp($password);
  $cred->password($password);
} 
```

**问题**

首次登录后，SVN 正在缓存凭据，并且不会提示我再次输入身份验证。`config`我启用了&文件中的某些条目`servers`以禁用缓存。但它没有用。

还有一件事：
我`SVN::Client`使用. 我不知道 perl 模块使用的是哪个 SVN。`CPAN``svn/apache``apt-get`

我更改的配置是我稍后安装的 SVN。

有人可以让我知道如何解决这个问题吗？我希望 perl 脚本始终提示输入凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:11:35.493

据此：[_](http://search.cpan.org/~mlanier/Alien-SVN-1.6.12.0/src/subversion/subversion/bindings/swig/perl/native/Client.pm)

> 为提示样式提供程序返回 svn_auth_provider_object_t 的函数采用对用于回调的 Perl 子例程的引用。这些子例程中的每一个接收的第一个参数是一个凭证对象。...这些函数和凭证对象总是有一个 may_save 成员，它指定是否将缓存身份验证数据。

所以，我想在你的回调的实现中你需要设置**$may_save**：

```
$cred->may_save(0); 
```

[或使用此处](http://cpansearch.perl.org/src/CLKAO/SVK-v2.2.2/lib/SVK/Config.pm)描述的用户交互：

```
print(
        $may_save
            ? "(R)eject, accept (t)emporarily or accept (p)ermanently? "
            : "(R)eject or accept (t)emporarily? "
    );

    my $choice = lc(substr(<STDIN> || 'R', 0, 1));

    if ($choice eq 't') {
        $cred->may_save(0);
    }
    elsif ($may_save and $choice eq 'p') {
        $cred->may_save(1);
    } 
```

# java - Java App SWT：在线程上更新 UI 已完成

> ID：13517339
> 
> 赞同：1
> 
> 时间：2012-11-22T17:09:19.617
> 
> 标签：java, .net, asynchronous, download, swt

我正在尝试将 .NET 应用程序移植到 java 中，并且需要一个异步下载器，它在下载（或异步任务）完成后增加进度条，类似于 .NET 的 WebClient 及其 DownloadFileCompleted 事件。该应用程序将等待下载完成，但我不希望用户界面在下载过程中以“无响应”锁定。问题在于下载线程无法直接增加进度条，因为它是在主线程中创建的。我在想，因为这是一个 SWT 应用程序（它有一个 os 消息泵循环），我可以以某种方式从下载线程中泵出一条消息并让主线程来接收它。这可能吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:25:46.353

如果可以使用 JFace，则可以使用`ProgressMonitorDialog`：

```
ProgressMonitorDialog dialog = new ProgressMonitorDialog(shell);
dialog.run(true, true, new IRunnableWithProgress() {
    public void run(IProgressMonitor monitor) throws InterruptedException {
        // This is a forked thread and updates only monitor, monitor is responsible for updating UI

        monitor.beginTask("Downloading...", totalBytes);

        // Loop to download bytes
        ...
        monitor.worked(1);
        ...

        // Completed
        monitor.done();
    }
}); 
```

如果您不想使用 JFace，那么您可以查看此类的实现，以了解如何复制类似的实现来更新`ProgressBar`控件。通常，您可以使用`Display#async(IRunnable)`发布访问 UI 的可运行文件。如果您知道下载线程中的进度控件，则可以使用它来更新 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:29:09.820

尝试使用 Display.asyncExec 从下载线程更新进度条值。

```
Display.getCurrent().asyncExec(new Runnable() {         
        @Override
        public void run() {
        // update progress bar value here
        }

}); 
```

我不确定是否理解，但也许这样的事情可以运行：

```
class Downloader {
    public static void downloadAsync(Object object, String url, final ProgressBar progressBar ){
            // download thread
        new Thread(new Runnable() {
            @Override
            public void run() {
                // start download here
                // while download progresses
                Display.getDefault().asyncExec(new Runnable() {
                    @Override
                    public void run() {
                        progressBar.setSelection(<your progress value>);
                    }
                });
            }
        });
    }
} 
```

# .net - 服务合同的 PrincipalPermission 属性

> ID：13517343
> 
> 赞同：4
> 
> 时间：2012-11-22T17:09:42.547
> 
> 标签：.net, wcf

为什么不能将 PrincipalPermission 放在服务合同接口上是否有技术原因？它仅适用于实现合同的类或直接适用于类方法。

这行不通。

```
[ServiceContract]
public interface IMyService
{
    [PrincipalPermission(SecurityAction.Demand, Role="Admin")]
    [OperationContract]
    void MyFunction(string str);
} 
```

但是，如果我将属性放在实现 IMyService 的类中的匹配方法上，它就会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:38:05.297

在运行时检查角色，使用实现方法上的属性，而不是方法实现的接口上的属性。更一般地，在 .NET 中，放置在方法上的自定义属性与放置在相应接口方法上的自定义属性（如果有）之间没有直接关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T19:12:34.977

我知道这篇文章已经过时，试图为 OPs 问题提供一个具体的答案，原因在于接口和类之间的区别。

想想看；接口是对实现的描述，它不是实现的行为。 *接口仅描述类方法和事件等。*

[*或者正如微软所说：*](https://msdn.microsoft.com/library/ms229013(v=vs.100).aspx)

> 接口定义了实现者必须提供的一组成员的签名。接口不能为成员提供**实现细节**〜*（行为）*。

*继承接口的类提供这些方法和事件的行为。——也就是说实现了接口的【行为~功能】*

**那么为什么接口：**

*如果您需要提供值类型的多态层次结构，请定义一个接口。*

*考虑定义接口以达到类似于多重继承的效果。*

[https://msdn.microsoft.com/library/ms229013(v=vs.100).aspx](https://msdn.microsoft.com/library/ms229013(v=vs.100).aspx)

希望这有助于其他人理解。

# php - 检查数组值的顺序

> ID：13517344
> 
> 赞同：0
> 
> 时间：2012-11-22T17:09:52.143
> 
> 标签：php, arrays

我在这里有一个非常奇怪的帮助请求，让我尽可能地解释它：

我有一个项目数组（我已经对文本进行了哈希处理，因为文本并不重要，这是我将使用的**长度）**

```
Array
(
    [0] => ##
    [1] => ###
    [2] => ###
    [3] => ###
    [4] => ####
    [5] => ###
    [6] => ####
    [7] => #####
    [8] => ##
    [9] => ###
) 
```

我需要检查的是确保每个值的长度不超过前一个元素的长度大于 1。它们的长度可以减少超过 1，但长度不能增加超过 1。根据这些规则，上述数组是有效的。

但是，下面的数组将是错误的（请参阅元素 4 的长度是 2 大于 3）。

```
Array
(
    [0] => ##
    [1] => ###
    [2] => ###
    [3] => ###
    [4] => #####
    [5] => ###
    [6] => ####
    [7] => #####
    [8] => ##
    [9] => ###
) 
```

这是我到目前为止所拥有的：

```
<?php
$array = array('##','###','###','###','####','###','####','#####','##','###'); // Valid Array
$array = array('##','###','###','###','#####','###','####','#####','##','###'); // Invalid Array
$tmp = 0;
$i = 0;
$valid = true;
foreach($array as $k => $v) {
    if($i>0&&strlen($v)>$tmp&&strlen($v)>($tmp+1)) {
        $valid = false;
    }
    $tmp = strlen($v);
    $i++;
}
echo ($valid) ? 'Array is valid' : 'Array is invalid';
?> 
```

它有效，但它非常混乱，我对此一点也不满意，有人对更好的检查方法有任何其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:15:25.643

```
for($i = 1; $i < count($array); $i++) {
  if( ( strlen($array[$i - 1]) - strlen($array[$i]) ) > 1) {
    $valid = false;
    break;
  }
} 
```

注意循环开始于 1 以避免 -1 索引位于`$i = 0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:18:32.180

我认为没有比这更好的了 - 您可以将所有内容包装在一个函数中以实现可重用性：

```
function checkArray($array)
{

  foreach($array as $i => $v)
  {

    if($i==0)
      continue;

    if( ( strlen($v) - strlen($array[$i-1]) ) > 1 ){
      return false;
    }

  }

  return true;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:27:06.857

在我的脑海中，我可能会将循环更改为：

```
foreach ($array as $k => $v) {
    if ($k == 0) {
        continue;
    }
    if ((strlen($v) - strlen($array[$k - 1])) > 1 ) {
        $valid = false;
        break;
    } 
} 
```

最好也将其粘贴在一个函数中。编辑 - 实际上就像 moonwave99 所做的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T17:38:08.397

使用`current()`and`each()`允许使用任何类型的键的数组，并且不依赖于第一个键为 0。

```
 function arr_is_valid(array $arr) {
        $last_len = strlen(current($arr));
        while (list($k,$v) = each($arr) {
          $cur_len = strlen($v);
          if(1 < $cur_len - $last_len) return false;
          $last_len = $cur_len;
        }
        return true;
    }

$valid = arr_is_valid($my_array); 
```

# python - 使用 Python 正则表达式过滤推文

> ID：13517345
> 
> 赞同：0
> 
> 时间：2012-11-22T17:09:55.527
> 
> 标签：python, regex, twitter

我正在尝试创建一个通过 @ 或 # 标签过滤推文的查询。

所以我只想要@Obama 或#Obama 而不是奥巴马的结果。这是我到目前为止所拥有的：

```
re.compile(r'\b(?:#|@|)*%s*\b' % re.escape(obama), re.IGNORECASE) 
```

感谢您的回复....我尝试了两个答案，在我的情况下似乎有效的是：

```
 re.compile(r'\b[#@]*%s\b' % re.escape(term), re.IGNORECASE) 
```

'term' 是我迭代的列表中的一个元素。然后，这将返回在“术语”前带有 # 或 @ 的推文。Itried 不使用 '*' 但它给出了异常。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:26:39.507

如果这纯粹与正则表达式有关，并且与 Twitter 本身无关（除了您正在过滤推文这一事实之外），那么您想要的正则表达式是这样的：

```
compiled = re.compile(r'\b[#@]obama\b', re.IGNORECASE) 
```

如果您想要一些代码的示例与您正在做的事情类似，请查看此示例，因为它可能是一个有价值的示例：

```
https://github.com/kgaughan/is-on-a-train/blob/master/isonatrain.py 
```

该代码跟踪一群用户，寻找某些触发短语，并根据他们所说的写出一个 HTML 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:21:01.190

尝试使用这个正则表达式：

```
r'\b[#@]{name}\b'.format(name=re.escape('Obama')) 
```

字符`[%@]`类比选择组工作得更快`(?:#|@)`。

所以，我们从单词边界开始`\b`，然后是`#`或`@`。然后从`obama`变量中替换。然后是尾随边界。

在问题中，您使用`*`了从 0 到无穷次重复前一个表达式的量词。没有理由重复`#`和`@`符号。此外，最后一个 sybmol`obama`也不应该重复。

# c# - C# 装箱/拆箱的任何替代品？

> ID：13517353
> 
> 赞同：1
> 
> 时间：2012-11-22T17:10:56.713
> 
> 标签：c#, boxing

我最近的代码包括**很多** [装箱和拆箱](http://msdn.microsoft.com/en-us/library/yz2be5wk%28v=VS.80%29.aspx)，因为我的许多变量都是在运行时解析的。但是我读过装箱和拆箱在计算上非常昂贵，所以我想问一下是否还有其他方法来装箱/拆箱类型？这甚至是使用它的好习惯吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T17:12:57.963

使用`Generics`....

更多信息[在这里](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)

* * *

例如

```
List lst=new List();//non generic List accepts any kind of object
lst.Add(44);//this causes unnecessary boxing from int to object
lst.Add(100);//this causes unnecessary boxing from int to object 
```

如果您确定列表将始终包含一个整数，您可以使用泛型..

```
List<int> lst=new List<int>();
lst.Add(44);//no boxing or unboxing
lst.Add(100);//no boxing or unboxing 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T19:27:57.833

在那个特定的问题中，我可以说使用更通用的类型，在这种情况下是字符串，如果它是数字，则将其解析为数字。更一般的方法是创建自定义结构或使用带有字段的元组，说明它对每个案例的真正答案是什么，但它很难看。

# php - 读取一个文件直到达到一个字符然后用 PHP 写入它

> ID：13517360
> 
> 赞同：3
> 
> 时间：2012-11-22T17:11:14.720
> 
> 标签：php, file

嗨，这是我的问题，我想从文件中读取，直到我到达特定字符，然后在新行中用 php 在该特定字符之前写入一个字符串我知道如何通过 fopen 读取我也知道如何逐行读取我不知道最后一部分（在那之前的行中插入我的字符串）请看这个例子： MYfile 包含：

```
Hello 
How are You 
blab la 
...
#$?!
other parts of my file... 
```

所以知道当它达到$时我想要它？！把我的字符串放在前面的那一行假设我的字符串是我做的！

# 现在 MYfile 包含：

```
Hello 
How are You 
blab la 
...
#I did it!
#$?!
other parts of my file... 
```

我该怎么做？！？到目前为止我所做的：

```
$handle = @fopen("Test2.txt", "r");
if ($handle) 
{
while (($buffer = fgets($handle, 4096)) !== false) 
{
    if($buffer == "#?") echo $buffer;
}
if (!feof($handle)) {
    echo "Error: unexpected fgets() fail\n";
}
fclose($handle);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:28:19.930

您只需要`$?!`在阅读文本时搜索。

当您逐行阅读时，请检查每一行。

就个人而言，我会一次读取整个文件（假设它不是太大）并将字符串替换为所需的值。

```
$needle = '$?!'; // or whatever string you want to search for
$valueToInsert = "I did it!"; // Add \r\n if you need a new line

$filecontents = file_get_contents("Test2.txt"); // Read the whole file into string
$output = str_replace($needle, $valueToInsert . $needle, $filecontents);

echo $output; // show the result 
```

未测试上述代码 - 可能需要调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:22:16.627

Since you know your marker, can you make use of `fseek` to rewind back a number of bytes (set whence to SEEK_CUR) and then use `fwrite` to insert the data?

Something like:

```
$handle = @fopen("Test2.txt", "r");
if ($handle) 
{
    while (($buffer = fgets($handle, 4096)) !== false) 
    {
        if($buffer == "#?") {
            fseek($handle, -2, SEEK_CUR); // move back to before the '#?'
            fwrite($handle, 'I did it!');
            break; // quit the loop
        }
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
} 
```

Disclaimer: I've not tried the above so you may need to play about to get it working exactly, but it would seem like a possible solution (though perhaps not the ideal one!)

# c# - StreamInsight 2.0 中的异常处理

> ID：13517366
> 
> 赞同：0
> 
> 时间：2012-11-22T17:11:39.180
> 
> 标签：c#, sql-server, multithreading, exception, streaminsight

在 StreamInsight 2.0 中处理异常的最佳实践是什么？

当发生异常时（我不是在谈论丢失的事件，而是在代码中的某些地方出现 NullReferenceException 之类的实际异常）考虑到一切都是异步执行的，您如何处理它并安全地停止应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:21:23.177

您的应用程序如何处理异常将取决于您的应用程序应该做什么。至少，我会记录异常。如果您使用的是旧适配器模型，则查询中的异常将导致查询进入“中止”状态。如果您使用的是 StreamInsight 2.1 Rx 源/接收器模型，则可以使用接收器中的 IObservable.OnError 方法处理异常。良好的测试和防御性地编写代码将大大有助于您取得更大的成功。

[有关 StreamInsight 中的 IObservable 和 IEnumerable 接口的更多信息](http://msdn.microsoft.com/en-us/library/gg144954.aspx)

# tridion - 在回发之间保留 dialogArguments

> ID：13517367
> 
> 赞同：3
> 
> 时间：2012-11-22T17:11:46.683
> 
> 标签：tridion, tridion-2011

我目前正在创建一个通过自定义 url 功能访问的页面。每当我的页面回发到服务器时，我都会丢失该`window.dialogArguments`属性，因此无法访问`getFields()`等`container.deleteField()`。

有没有办法解决？

我的第一个想法是通过`XMLHttpRequest`调用与服务器进行所有通信，这将消除回发问题，但问题是代码（来自 Tridion 5.3）严重依赖服务器端逻辑，这将是一项艰巨的工作更改。（5.3 似乎使用`window.returnValue`而不是`dialogArguments`.

我的第二个想法是也许我可以在 中使用一些值`window.opener`，但我无法找到我需要的属性/功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:47:40.143

您可以在单独的 iframe 中进行回发。这将使主窗口保持活动状态，从而使`window.dialogArguments`您的代码可以访问。

据我所知，`window.opener`应该在任何回传中幸存下来。所以我不确定你在那里寻找什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:32:49.157

如果您使用的是 ASP.NET 3.5 或更高版本，您还可以简单地将控件包装在[UpdatePanel](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)中。

然后它将自动在异步客户端请求中执行回发，因此不会重新加载窗口。

# asp.net - 未使用 smtp 客户端和 ASP.NET 发送邮件

> ID：13517368
> 
> 赞同：0
> 
> 时间：2012-11-22T17:11:46.513
> 
> 标签：asp.net, smtpclient

我一直在阅读 Stack Overflow 上的一些帖子，这些帖子看起来与我的相似，并且我已经调整了我的代码，但它仍然无法正常工作。我的代码在下面供您阅读：

```
Dim ss As SmtpClient = New SmtpClient("smtp.gmail.com", 587)
    'Dim ss As SmtpClient = New SmtpClient("smtp.gmail.com",465 )
    'Dim ss As SmtpClient = New SmtpClient("smtp.gmail.com", 25)
    ss.Timeout = 10000
    ss.DeliveryMethod = SmtpDeliveryMethod.Network
    ss.UseDefaultCredentials = False
    ss.EnableSsl = True
    ss.UseDefaultCredentials = False
    ss.Credentials = New NetworkCredential("name@gmail.com", "name@123")

    Dim subject As String = "Approval request for Quotation with Order Number: " + Me.OrderNo

    Dim body As String = "Dear Sir/Madam," + vbCrLf + " This is to bring to your notice the quotation for the Client " + Me.cmbCustomer.SelectedItem.Text + " and Order Number " + Me.OrderNo & _
        " which is awaiting your approval." + vbCrLf + "Click here to view and approve the Quotation: http:192.168.20.7/appname/Sales/ManageInvoices.aspx" + vbCrLf & _
        " Kindly revert after approval. Thank you." + vbCrLf + "Regards."

    Dim To1, To2, To3 As String

    Dim mm As MailMessage = New MailMessage()
    mm.From = New MailAddress("name@gmail.com")

    To1 = "usernameTo1@domain.com"
    To2 = "usernameTo2@domain.com"
    To3 = "usernameTo3@gmail.com"
    'To is a collection of MailAddress types
    mm.To.Add(To1)
    mm.To.Add(To2)
    mm.To.Add(To3)

    mm.Subject = subject
    mm.Body = body

    mm.BodyEncoding = UTF8Encoding.UTF8
    'mm.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure
    Try
        ss.Send(mm)
    Catch ex As SmtpException
        Me.lblerr.Text = "SMTP Err:" & ex.ToString
    End Try 
```

那么是什么导致邮件无法到达目的地呢？我根本没有收到任何错误消息。请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:21:04.200

对于 gmail，您需要将端口设置为 587。

```
<system.net>
    <mailSettings>
      <smtp from="myn@gmail.com ">
        <network host="smtp.gmail.com" defaultCredentials="false"
          port="587" userName ="me@gmail.com" password="pass@123" />
      </smtp>
    </mailSettings>
   </system.net> 
```

# c++ - 在构造过程中使用单例管理指针？

> ID：13517371
> 
> 赞同：2
> 
> 时间：2012-11-22T17:11:51.927
> 
> 标签：c++, memory, stl, heap-memory, stack-memory

我是一个爱好 c++ 程序员，这是我的第一篇文章。

首先，让我告诉你，我正在开发跨平台的 ansi C++。

我刚刚做了很多工作来弄清楚内存管理，我终于掌握了使用 std::vector 并在删除期间手动管理指针的窍门。

另外，我一直在使用 boost::smart_ptr ，它终于点击了。

但是我刚刚遇到了一些代码，其中我们将有一个类 Foo，它的构造函数向 FooManager （单例）注册自己

```
Foo::Foo()
{
 FooManager::Instance()->register(this);
} 
```

在 FooManager 的销毁过程中，它遍历 std::vector 并对每个元素应用擦除和删除，有效地清理了 Foo 的内存。

```
FooManager::~FooManager()
{
    // iterate over the container of Foo pointers
    // erase the pointer from container and delete the pointer
} 
```

我很困惑，因为我们不是 a) 在创建过程中使用 boost::smart_ptr 来包装指针，并且 b) 我们在构造函数和析构函数中使用内存管理技巧。

这是一个可行的解决方案，还是使用单例的析构函数来清理它管理的对象是否存在可怕的危险？

从我自己的测试中，我发现了一个根本性的缺陷。Foo 不应再在堆栈上分配。当对象超出范围时，它会取消引用自身。当调用 FooManager 的析构函数时，它会尝试再次删除它。这会产生一个断言错误：

_ASSERTE(_BLOCK_TYPE_IS_VALID(pHead->nBlockUse));

这是唯一的缺点吗？我应该在 Foo 构造函数之外向管理器移动注册吗？我是否应该有一个 FooManager 的单独功能来清除我在程序生命周期结束时手动调用的内存？您对此事有何看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:51:05.087

切线，我认为你的类的设计有点不对称：

1.  所有 Foo 对象在创建时注册自己；
2.  FooManager 删除所有注册**并**在删除时删除所有已注册的 Foo 对象。

问题是： FooManager 只是聚合 Foo 对象还是也在处理它们的生命周期？

*   如果 FooManager 只是为 Foo 对象提供聚合，那么它在销毁时不应该删除它们，因为它不“拥有”它们；一个简单的内部注销就足够了（注意：多线程程序中可能存在问题）。

*   如果 FooManager 应该对 Foo 对象有更严格的控制（即处理它们的整个生命周期），[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern "工厂模式")可能更合适：只有 FooManager 可以分配 Foo 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:35:01.360

我看到几个问题：

1.  FooMananger 的单例实例是一个静态变量，具有从程序开始到结束的生命周期。如果我们只在 FooManager 的析构函数中删除 Foo，它可能只在程序结束时被调用，那么我们根本没有做任何内存管理。它相当于永远不会删除任何 Foo 实例。不是吗？

2.  正如您已经发现的那样，FooManager 在 Foo 的构造函数中注册**指针**的方式使得无法在堆栈上分配 Foo 对象。你最终会得到一个指向无效内存位置的指针，或者你不应该触摸的地方。

通常的做法是使用智能指针，取决于你的需要，你可以使用 boost::shared_ptr，或者 boost::scoped_ptr、std::uniqe_ptr (c++11) 等。

# java - 使用ant运行junit时如何阻止来自junit的额外消息？

> ID：13517373
> 
> 赞同：0
> 
> 时间：2012-11-22T17:11:51.533
> 
> 标签：java, ant, junit

我在 foreach 循环中使用 ant 运行 junit。 [使用此解决方案](http://solutionsdaily.blogspot.co.uk/2010/06/making-junit-tests-run-parallely.html)

我在控制台中获得以下格式的输出

```
[junit] Running com.test.MyUnitTest
[foreach] junit.framework.TestListener: startTest(testMyMethod)
[foreach] junit.framework.TestListener: endTest(testMyMethod)
[junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.109 sec 
```

如何停止 TestListener 消息，以便输出格式为

```
[junit] Running com.test.MyUnitTest
[junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.109 sec 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:19:27.630

**用途**在内部，结果是每次迭代都会调用**，因此每次迭代都会启动一次目标，并且每次迭代都会使用 DefaultLogger 获得一次目标的标签。******

 ******ANT-CONTRIB 无法控制从中输出什么。输出是“目标”类的核心定义的一部分。******

# javascript - Nodejs Express - 动态助手错误

> ID：13517375
> 
> 赞同：3
> 
> 时间：2012-11-22T17:11:59.720
> 
> 标签：javascript, node.js, mongodb, express

我正在尝试使用以下内容运行我的应用程序：

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.enable('jsonp callback');
  app.set('view engine', 'jade');
  app.set('view options', {layout : false});
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({
    secret : 'abcdefg'      
  }));
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));

});

app.dynamicHelpers({
  session : function(req, res){
    return req.session;
  }
}); 
```

并在运行时收到以下错误消息`node app.js`

```
app.dynamicHelpers({

TypeError: Object function app(req, res){ app.handle(req, res); } has no method 'dynamicHelpers'
    at Object.<annonymous> (C:\nodeapps\nodeblox\app.js:35:5)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.Load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallBack (node.js:244:9) 
```

我对使用 nodejs 有点陌生，但我知道 Express 不再支持 dynamicHelpers()，我尝试重新编写代码并继续在各处出现错误。修复此 dynamicHelpers 代码以确保其余代码仍然正常工作的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:17:04.087

我猜您使用的不是 Express 2，而是 Express 3。[迁移指南](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)可以帮助您弄清楚发生了什么。对于 dynamicHelpers() 您需要了解 app.use 函数需要在配置部分中，而不是之前的位置。

**前**

```
app.configure();
app.dynamicHelpers({
  user: function(req, res) {
    return req.session.user;
  }
}); 
```

**现在在E3**

```
app.configure(function(){
  //...
  app.use(function(req, res, next){
    res.locals.user = req.session.user;
    next();
  });
  //...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T05:56:19.717

```
**In Epress3.x** there seems to be having no concept of static or dynamic.
use global or local instead.

/*Global*/
app.locals({ foo: 'bar' });
//or
app.locals.foo = 'bar';

/*For single request*/
res.locals({ foo: 'bar' });
//or
res.locals.foo = 'bar'; 
```

**更多**的区别是指[这里](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)。

# php - 向第三方发送 GET

> ID：13517391
> 
> 赞同：1
> 
> 时间：2012-11-22T17:13:09.767
> 
> 标签：php, forms, post, get, sms

我正在尝试设置 SMS 系统并使用 aql.com 发送文本（SMS）消息。

这在浏览器中工作正常： [http ://gw1.aql.com/sms/postmsg.php?to_num=447943417499&message=HELLO&flash=0&originator=Me&username=](http://gw1.aql.com/sms/postmsg.php?to_num=447943417499&message=HELLO&flash=0&originator=Me&username=)**&密码=* ****

 *前几天晚上，我使用一个简单的 header() 函数让它在 PHP 中工作。我现在无法让它与 header、ob_start/flush、fsock 等一起使用。

在这种情况下发送 GET 请求的最佳和可靠方法是什么。我可以举一个基本的例子吗？

提前致谢， ：-）

[编辑] 收到短信后通过 SMS 提供商请求该页面，因此调试非常困难，尤其是在共享主机上！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:32:46.403

首先这里有这项服务的梨[类](http://pear.php.net/pepr/pepr-proposal-show.php?id=59)

这里还有另一个实现：

```
function dosmsend($number, $message, $flash = "") {
    // your aql username and password
    $username = "yourusername";
    $password = "yourpassword";

    $weburl = "http://gw1.aql.com/sms/postmsg.php";

    // encodes your message for sending on the web
    $message = urlencode($message);

    // the request string
    $smsurl = "$weburl?username=$username&password=$password&to_num=$number&message=$message";

    // if $flash is set to 1, it will add the flash request onto the query
    if ($flash == "1")
        $smsurl .= "&flash=1";

    // connects to server to send message
    if ($content_array = file($smsurl)) {
        $content = implode("", $content_array);

        // check for response
        if (eregi("AQSMS-AUTHERROR", $content))
        echo "There was an authenication error";
        elseif (eregi("AQSMS-NOMSG", $content))
        echo "There was no message or mobile number";
        elseif (eregi("AQSMS-OK", $content))
        echo "The Message was queued succcessfully";
        elseif (eregi("AQSMS-NOCREDIT", $content))
        echo "Your account has no credit";
    }
    else
        echo "There was an error connecting to the server";
}

dosmsend("09978123456", "this is a test message");

//or 
//dosmsend("09978123456","this is a test flash message oo!","1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:44:41.497

对于大多数业务场景，应尽量减少与第三方的交易，因为您希望尽可能多地控制自己的运营，除非涉及联属网络营销业务和通过这些程序致富的概念。*

# android-layout - Android横向视频视图居中

> ID：13517392
> 
> 赞同：3
> 
> 时间：2012-11-22T17:13:10.340
> 
> 标签：android-layout

我正在开发安卓应用程序。我需要在横向模式下播放视频，并且 videoview 应该在屏幕的中心，但它在屏幕的左角播放视频。这是我的代码，

```
 <VideoView
android:id="@+id/videoView1"
android:gravity="center"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true" > 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T03:50:11.370

试试这个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_gravity="center"
  android:gravity="center">

         <VideoView android:id="@+id/videoview"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerInParent="true"/>

         <!-- Put Your Admob Layout here and it will work as you want. -->

</RelativeLayout> 
```

**更新**

如果你想通过java代码来参考这个：[SO链接](https://stackoverflow.com/questions/8471618/center-videoview-in-landscape-mode)

有什么问题给我评论。

享受编码:)

# macos - 如何要求 Mac OS 在特定地址范围内分配内存？

> ID：13517396
> 
> 赞同：12
> 
> 时间：2012-11-22T17:13:11.137
> 
> 标签：macos, memory-management, x86, emulation, powerpc

我正在为 Mac OS X 编写一个 Mac OS 9“兼容层”，因为我最近被怀旧之情所震撼，而且因为所有当前的解决方案都要求您在虚拟机中运行 Classic，而该虚拟机不支持运行我应该运行的东西的所有内容想用。

为了实现这个目标，我实现了一个 PEF 可执行加载器、一个可以桥接到本机代码的 PowerPC 解释器以及一些 Mac OS 9 库。整个事情有点工作：解释器中有一些错误，但这是意料之中的，我正在努力。

到目前为止，我最大的问题是 PowerPC 程序是 32 位的，所以指针必须是 32 位的。为了满足这个限制，目前我只为 i386 编译。然而，当我试图围绕该核心进行构建时，它变得越来越受限制（例如，您不能将 ARC 与 32 位 Cocoa 应用程序一起使用）。更不用说让 PowerPC 代码访问主机进程可以访问的所有内容并不是超级安全的。

我在设计“平台”时考虑到最终切换到 64 位：解释器需要一个基地址，并且所有 PowerPC 指针都被该基地址偏移。（出于性能和设计原因，拥有将 PowerPC 地址转换为本地地址的映射是毫无疑问的。）

由于 64 位地址空间有足够的空间容纳 40 亿个独立的 32 位地址空间，这对我来说听起来是个不错的方法。

但是我仍然有一个问题：我需要确保我能够在该地址范围内分配内存，因为 PPC 解释器不可能访问它之外的任何内容。

我现在正在考虑两种解决方案：

*   看看我是否可以要求 Mac OS 在特定地址范围内分配一些东西。我知道我可以使用`mmap`，但`mmap`会要求以页面倍数进行分配，这对我来说似乎非常浪费，因为我需要为每个分配提供一整页，无论它有多小（尽管考虑到 Classic- 这实际上可以与现代计算机相比，时代 Mac 的内存非常少）；
*   用于`mmap`保留完整的 0x100000000 字节`PROT_NONE`，然后`mprotect`按需分页以在需要时实际分配内存，并`PROT_NONE`在它们不再有用时将它们放回原处。它在纸上看起来不错，但这意味着我必须实施`malloc`替换。

所以我该怎么做？是否有内置机制可以让我尝试`malloc`在特定地址范围内分配内存？否则，是否有一个好的、可读的、开源的实现`malloc`我可以基于？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:17:50.970

我不知道这样做的内置方法，但它可以通过一些工作来实现。一种方法是创建一个自定义 malloc 区域，然后在分配需要对 PPC 代码可见的任何内存时使用常用 malloc 函数的 malloc_zone_* 版本。您的自定义区域需要一个 malloc 实现，但您可以从任意数量的开源区域（例如 tcmalloc）中进行选择。它还需要连接起来以使用带有提示地址的 vm_allocate 之类的东西，以确保您在所需的确切范围内获得分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:33:44.283

所以，我自己考虑过这个问题，用于一个非常相似（未发布）的项目，并尝试使用这种 64 位方法（或者，实际上是 x86 上的任何类型的大端内存空间！）很快就会遇到一些令人讨厌的问题.

1.  虽然您可以将本机 API 指向模拟结构，但您不能强制它们在该领域内进行所有自己的分配。您可以提供自己的所有最明显的实现，例如`_NewPointer`，但是其他函数的内部分配（例如，`_NewWindow`使用 nil `wStorage`）在很大程度上是您无法控制的。

2.  由模拟代码分配的系统结构（例如 Rect）将是大端的，但操作系统会希望它们是小端的。除了可能在进出本机函数的过程中对所有内容进行字节交换之外，没有简单的方法可以解决这个问题，而且这似乎非常容易出错。（我在这里考虑的另一种方法是让模拟核心以小端方式运行，但不幸的是，有些程序对这种变化很敏感。）

需要明确的是，我非常喜欢 Classic-to-OS-X API 转换器的想法。但我很确定这是不切实际的——鉴于 Apple 最终在 PPC 上使用 VM for Classic，我怀疑他们认为翻译方法行不通。

# opengl - 无法在 64 位 Windows 7 上使用 GLEW

> ID：13517398
> 
> 赞同：3
> 
> 时间：2012-11-22T17:13:28.517
> 
> 标签：opengl, 64-bit, glew

我下载了 32 位和 64 位版本，并将 dll 和 lib 文件复制到相应的文件夹中（system32、systemWOW64、vc\lib 和 vc\lib\armd64）。我可以将项目构建到 win32 和 x64 平台，但无法运行可执行文件并出现错误“应用程序无法正确启动（0xc000007b）”。

然而，当我评论“GLenum err = glewInit();”这句话时 并重建它，事情进展顺利。那么我的 glew 安装有什么问题？我该如何解决这个问题？

# powershell - 在 PowerShell V2 中，如何在静态类的方法中命名参数？

> ID：13517399
> 
> 赞同：1
> 
> 时间：2012-11-22T17:13:37.817
> 
> 标签：powershell, static, named-parameters

以下没有解析

```
[x.y]::z -Param1 some_value 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:49:12.277

当您从 PowerShell 调用 .NET 方法时，您可以在括号语法中使用 C# 样式的逗号分隔参数，例如：

```
[x.y]::z(some_value) 
```

在 PowerShell 中，命名参数只是 PowerShell 命令（函数、高级函数、脚本、cmdlet、工作流）的一项功能。

# php - 翻译整个页面而不刷新它

> ID：13517403
> 
> 赞同：1
> 
> 时间：2012-11-22T17:14:32.710
> 
> 标签：php, jquery, ajax, translation

我目前正在开发的网站是用两种语言编写的（fr/en）。我用来翻译页面的方法很简单：

HTML

```
<ul id="switch">
    <li><a href="index.php?lang=en" title="English version">En</a></li>
    <li><a href="index.php?lang=fr" title="Version française">Fr</a></li>
</ul> 
```

PHP (index.php)

```
<?php      
    // Translation
    if(isset($_GET['lang'])) {
        $lang = $_GET['lang'];
    }
    else {
        $lang = 'en';
    }

    switch($lang) {
        case 'en':
            $content = 'en.php';
            break;

        case 'fr':
            $content = 'fr.php';
            break;
    }

    include_once('lang/'.$content);
?> 
```

两者都`en.php`包含`fr.php`一个数组，该数组以各自的语言填充页面的实际内容。

en.php（示例）

```
<?php
    $version = array(
        'mainTitle' => 'Main title test',
        'noscript' => 'Noscript message test',
        'header' => 'Header test'
        // And so on, same thing for the french version
    );
?> 
```

这个系统运行良好，对于这个网站来说已经足够了，但是当用户从一种语言切换到另一种语言时，它意味着**页面刷新**，而这正是我想要**避免**的。

我想我可以使用一点 AJAX (jQuery) 来解决这个问题，但我不确定如何做到这一点。你能给我一些关于如何实现这一点的提示吗？我也愿意就其他可能的方式提出建议——记住这是一个小规模的项目。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:28:44.023

我建议以下内容，将您的语言特定内容保存在 Javascript 字典中，使用 Javascript 方法从该字典中填充数据，使用 PHP 服务器调用返回该字典的内容（基本上是您的语言特定内容）以及每当用户切换到不同的语言，调用 PHP 服务器来填充你的 Javascript 字典并调用你的 Javascript 方法来填充。

大概是这样的

```
function js_populate_content(lang)  {
    var content-data = $.get(lang); // Ajax call to your PHP service. You will need to do some parsing here (JSON would be easiest)
    // Populate your HTML elements using data
    document.getElementById('header').innerHTML = content-data['header'];
} 
```

您可以在页面加载时调用此方法，或者您仍然可以在第一次加载时从 php 加载它

```
$(document).ready(function(){
    var default_lang = 'en';
    js_populate_content(default_lang);
} 
```

每当用户更改语言时，您都应该调用此方法，例如

```
$('a#language').on('click', function() {
    var new_lang = $('input#language').val();
    js_populate_content(new_lang);
} 
```

注意：您应该包括 jquery

注意 2：有关$.GET 的正确语法，请参阅[jQuery get](http://api.jquery.com/jQuery.get/)

然而，这对于语言切换来说是不必要的复杂。同样，您可以在 AJAX 中加载整个页面，并根据语言将您的正文设置为新加载的页面。取决于您更容易以服务调用的形式提供（仅提供语言字典与以特定语言提供整个页面）对于后者，请参阅[jQuery 加载](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:45:13.470

如果您不想刷新页面（向 PHP 页面发出新请求），我建议您在 Javascript 中使用字符串文件。这可能需要一些重复的编码，但效果很好。

页面.html：

```
<a href="#" onClick="setEnglish();">English</a> | <a href="#" onClick="setFrench();">Fran&ccedil;ais</a><br>

<span id="stringUsername"></span><br>
<input ...><br>
<span id="stringPassword"></span><br>
<input ...><br>
<span id="stringSex"></span>: <input ...><span id="stringMale"></span><input ...><span id="stringFemale"></span>

<script src="langEng.js"></script>
<script src="langFra.js"></script>
<script>
function setEnglish();
document.getElementById('stringUsername').innerHTML = $stringUsername;
document.getElementById('stringPassword').innerHTML = $stringPassword;
document.getElementById('stringSex').innerHTML = $stringSex;
document.getElementById('stringMale').innerHTML = $stringMale;
document.getElementById('stringFemale').innerHTML = $stringFemale;
</script> 
```

langEng.js

```
$stringUsername='Username';
$stringPassword='Password';
$stringSex='Sex';
$stringMale='Male';
$stringFemale='Female'; 
```

langFra.js

```
$stringUsername='Username'; // Not sure about this translation.
$stringPassword='Mot de passe';
$stringSex='Sexe';
$stringMale='Homme';
$stringFemale='Femme'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:17:48.283

假设页面上的所有内容都已翻译，您可能会这样做。

```
$('#switch a').on('click', function(e){
    e.preventDefault(); // to stop the link from following the url
    var href = $(this).attr('href');
    $('body').load( href );
}); 
```

如果 有一部分`body`，比如说 a`div`包含所有翻译的位，您可以将其更改为

```
$('#translated_content_id').load( href ); 
```

# php - PHP HandBrakeCLI 不会使用 proc_open 逐行输出

> ID：13517406
> 
> 赞同：1
> 
> 时间：2012-11-22T17:14:39.680
> 
> 标签：php

在将 HandBrakeCLI 与 php 一起使用时，是否有另一种方法可以实时逐行显示？到目前为止，我在 proc_open() 函数中使用[fgets()](http://us1.php.net/manual/en/function.fgets.php)来获取字节。fgets() 手册提到了长度：“读取结束时读取长度 - 1 个字节，或换行符（包含在返回值中）或 EOF（以先到者为准）。”。到目前为止，它不识别新行。

```
// disable output buffering so we can send the encoding progress to the browser.
ob_implicit_flush(true);

$Command = 'HandBrakeCLI -i "/tmp/in-1.FLV" -t 1 -c 1 -o "/tmp/out.mp4" -f mp4 --strict-anamorphic  -e x264 -q 20 --cfr  -a 1 -E faac -B 160 -6 dpl2 -R Auto -D 0 --gain=0 --audio-copy-mask none --audio-fallback ffac3 -x ref=1:weightp=1:subq=2:rc-lookahead=10:trellis=0:8x8dct=0';

echo 'Starting...';

ob_flush();
flush();

$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from (we do not use it).
   1 => array("pipe", "w"),  // stdout is a pipe that the child will write to and we will read from.
   2 => array("pipe", "w") // stderr is a file to write to (we do not use it).
);

// We do not use exec() because we want to get the Stdout line by line.   
$process = proc_open($Command, $descriptorspec, $pipes);

if(is_resource($process))
{
    $line = 1;
    while(!feof($pipes[1]))
    {
        $InputLine = fgets($pipes[1], 1024);
        if(strlen($InputLine) == 0) break;
            echo '<pre><strong>Line: '.$line++.'<br /></strong>';
                print_r($InputLine);
            echo '</pre>';
        ob_flush();
        flush();
    }
    fclose($pipes[0]);
    fclose($pipes[1]);
    fclose($pipes[2]);
}
echo 'Done!'; 
```

目前输出：

开始...

```
线路：1 
编码：任务 1 of 1, 3.10 %
编码：任务 1 of 1, 6.61 %
编码：任务 1 of 1, 8.81 %
编码：任务 1 of 1, 11.44 %
编码：任务 1 of 1, 14.52 %
编码：任务 1 of 1, 18.03 %
编码：任务 1 of 1, 21.10 %
编码：任务 1 of 1, 25.05 %
编码：任务 1 of 1, 27.25 %
编码：任务 1 of 1, 29.03 %
编码：任务 1 of 1, 29.91 %
编码：任务 1 of 1, 33.45 %
编码：任务 1 of 1, 36.52 %
编码：任务 1 of 1, 39.19 % (316.92 fps, avg 318.50 fps, ETA 00h00m06s)
编码：任务 1 of 1, 42.46 % (316.92 fps, avg 318.50 fps, ETA 00h00m06s)
编码：任务 1 of 1，46.44 %（316.92 fps，平均 318.50 fps，ETA 00h00m06s）
编码：任务 1 of 1, 47.32 % (316.92 fps, avg 318.50 fps, ETA 00h00m06s)
编码：任务 1 of 1，49.96 %（294.34 fps，平均 315.56 fps，ETA 00h00m05s）
编码：任务 1 of 1, 53.03 % (294.34 fps, avg 315.56 fps, ETA 00h00m05s)
编码：任务 1 of 1, 56.54 % (294.34 fps, avg 315.56 fps, ETA 00h00m05s)
编码：任务 1 of 1, 61.08 % (336.12 fps, avg 330.04 fps, ETA 00h00m04s)
编码：任务 1 of 1，
```

```
线路：2
 61.95 %（336.12 fps，平均 330.04 fps，ETA 00h00m04s）
编码：任务 1 of 1, 65.03 % (336.12 fps, avg 330.04 fps, ETA 00h00m04s)
编码：任务 1 of 1, 67.13 % (336.12 fps, avg 330.04 fps, ETA 00h00m04s)
编码：任务 1 of 1, 68.89 % (320.33 fps, avg 319.28 fps, ETA 00h00m03s)
编码：任务 1 of 1, 71.12 % (320.33 fps, avg 319.28 fps, ETA 00h00m03s)
编码：任务 1 of 1, 74.42 % (320.33 fps, avg 319.28 fps, ETA 00h00m03s)
编码：任务 1 of 1, 76.65 % (307.54 fps, avg 312.58 fps, ETA 00h00m02s)
编码：任务 1 of 1, 79.72 % (307.54 fps, avg 312.58 fps, ETA 00h00m02s)
编码：任务 1 of 1，83.38 %（307.54 fps，平均 312.58 fps，ETA 00h00m02s）
编码：任务 1 of 1，86.01 %（285.58 fps，平均 315.19 fps，ETA 00h00m01s）
编码：任务 1 of 1, 87.33 % (285.58 fps, avg 315.19 fps, ETA 00h00m01s)
编码：任务 1 of 1, 89.08 % (285.58 fps, avg 315.19 fps, ETA 00h00m01s)
编码：任务 1 of 1, 91.72 % (285.58 fps, avg 315.19 fps, ETA 00h00m01s)
编码：任务 1 of 1, 94.79 % (278.94 fps, avg 307.07 fps, ETA 00h00m
```

```
线路：3
 00s）
编码：任务 1 of 1, 96.99 % (278.94 fps, avg 307.07 fps, ETA 00h00m00s)
编码：任务 1 of 1, 100.00 % (278.94 fps, avg 307.07 fps, ETA 00h00m00s)
编码：任务 1 of 1, 100.00 % (278.94 fps, avg 307.07 fps, ETA 00h00m00s)

```

完毕！

结果不考虑换行并继续搜索，直到达到 1024 字节。有没有不同的方法可以用来逐行显示输出实时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:53:35.860

我想通了：使用 fread() 而不是 fgets(); fread() 是二进制安全的。

# submit - 在具有单选按钮的表单上使用 ENTER 提交

> ID：13517407
> 
> 赞同：0
> 
> 时间：2012-11-22T17:14:57.233
> 
> 标签：submit, keypress

我有一个只包含单选按钮的表单。我希望用户能够选择一个单选按钮，然后按 Enter 提交表单。但是 ENTER 不会触发表单提交，我找不到任何方法来捕获单选按钮上的按键。它似乎只是不火。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:19:51.900

您可以尝试编写一些 javascript 将输入键路由到表单提交。此方法已在此处讨论：

[按下返回键时如何提交表单？](https://stackoverflow.com/questions/29943/how-to-submit-a-form-when-the-return-key-is-pressed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:20:38.407

[这](http://jsfiddle.net/tWQLt/2/)似乎有效

```
$("input").on("keydown", function(ev) {
    if (ev.keyCode == 13)
        alert('submit here!');
}).on("click", function(ev) {
    $(this).focus();
}); 
```

在 FireFox、IE 和 Chrome 中测试。

# web-applications - 使用转换后的文档从 google drive api 获取 webContentLink

> ID：13517409
> 
> 赞同：0
> 
> 时间：2012-11-22T17:15:20.663
> 
> 标签：web-applications, google-drive-api

我正在使用带有 REST 调用的 Google Drive。我想将任何类型的文件上传到客户的驱动器。我在我的网络应用程序中使用来自谷歌驱动器的两个链接，“可视化”和“下载”链接。

我从“webContentLink”json 属性获取下载链接，从“alternateLink”获取可视化链接。

电子表格、文档和纯文本等文件必须转换，因此我将“convert”参数设置为“true”。

**问题**

随着发送的文件被转换为另一种谷歌文档类型，返回的 json 没有“webContentLink”属性！在处理转换后的文档文件时，如何同时**下载链接和可视化？**

**已编辑**

我正在寻找在转换之前上传的原始文件的下载链接。例如，如果我上传一个 xls，我想有一个原始 xls 文件的下载链接。使用“exportLinks”列表，我有一堆 xlsx 的链接，但我无法获得“正确的”，“exportLinks”中的 mime 类型与原始文件 mimeType 不同。对于某些文件，给出的两个电子表格 exportLinks 之一已损坏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:59:53.287

如果你想要谷歌原生文档的下载链接，你必须获取`exportLinks`返回的 JSON 的属性。

您将拥有其中的几个，具体取决于文件的格式。至少一种是所有原生格式通用的，一种是`"application/pdf"`mime 类型。

# android - 如何从 res/raw 文件夹中打开 PDF 文件？

> ID：13517412
> 
> 赞同：3
> 
> 时间：2012-11-22T17:15:25.393
> 
> 标签：android, pdf, android-intent, android-resources

我正在编写一个应用程序，当您单击按钮时会打开一个 pdf 文件。下面是我的代码：

```
File pdfFile = new File(
                        "android.resource://com.dave.pdfviewer/"
                                + R.raw.userguide);
                Uri path = Uri.fromFile(pdfFile);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.setDataAndType(path, "application/pdf");

                startActivity(intent); 
```

但是，当我运行它并按下按钮时，它显示“无法打开该文档，因为它不是有效的 PDF 文档”。这让我发疯。我是否正确访问文件？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:55:21.250

您必须将 pdf 从 assets 文件夹复制到 sdcard 文件夹。

```
.....
copyFile(this.getAssets().open("userguide.pdf"), new FileOutputStream(new File(getFilesDir(), "yourPath/userguide.pdf")));

File pdfFile = new File(getFilesDir(), "yourPath/userguide.pdf"); Uri path = Uri.fromFile(pdfFile);
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    intent.setDataAndType(path, "application/pdf");

                    startActivity(intent);

}

private void copyFile(InputStream in, OutputStream out) throws IOException {
        byte[] buffer = new byte[1024];
        int read;
        while((read = in.read(buffer)) != -1){
          out.write(buffer, 0, read);
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T17:32:08.317

您可以将 pdf 插入到 android 的文件夹 assets 中，然后尝试：

```
File pdfFile = new File(getAsset().open("userguide.pdf"));
                Uri path = Uri.fromFile(pdfFile);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.setDataAndType(path, "application/pdf");

                startActivity(intent); 
```

**编辑：** 来自文件夹 assets 的 URi 是：file:///android_asset/RELATIVE_PATH 然后源是：

```
File pdfFile = new File("file:///android_asset/userguide.pdf");
                    Uri path = Uri.fromFile(pdfFile);
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    intent.setDataAndType(path, "application/pdf");

                    startActivity(intent); 
```

# indexing - 获取 UITableView 中所选附件按钮的 IndexPath

> ID：13517414
> 
> 赞同：5
> 
> 时间：2012-11-22T17:15:31.647
> 
> 标签：indexing, segue, uitableview

UItableViewCell 附件按钮有问题。我的附件按钮与另一个 UIViewController 的 segue “连接”。当我点击附件按钮时，我从模型中获取对象并将该对象“传递”到 seguedestinationViewController。这是我为 segue 方法做的准备：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"IdentityCard"])
    {
        NSLog(@"%i" ,self.tableView.indexPathForSelectedRow.row);
        [segue.destinationViewController showIdentityCardForTeacher:[self.teachers getTeacherInPosition:self.tableView.indexPathForSelectedRow.row]];
    }
} 
```

问题是方法开头的 NSLog（在“if”之后）总是显示数字 0！我试图实现该方法：

```
-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

但是在此方法之前执行了 segue 方法的准备，因此我无法为“保存”indexPath 设置任何@property。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-16T00:28:07.957

在：

**-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender**

...你有'sender'参数，让你知道已经被窃听的附件的单元格，所以：

**index = [self.tableView indexPathForCell:sender].row;**

您可以获取它的索引以便使用它。

那么就不需要使用tableView的accessoryButtonTappedForRowWithIndexPath方法了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:23:37.363

我以这种方式解决了这个问题：我将 UIViewController 连接到了destinationViewController（不是来自附件按钮，而是来自 UIViewController）。

我在第一个 View Controller 中创建了一个 @property：

```
@property (nonatomic) NSInteger indexPathRow; 
```

然后我修改了这样的代码：

```
-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Disclosure Tapped----> %i" ,indexPath.row);
    self.indexPathRow = indexPath.row;
    [self performSegueWithIdentifier:@"IdentityCard" sender:self];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"IdentityCard"])
    {
        NSLog(@"%i" ,self.tableView.indexPathForSelectedRow.row);
        [segue.destinationViewController showIdentityCardForTeacher:[self.teachers getTeacherInPosition:self.indexPathRow]];
    }
} 
```

现在它起作用了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T10:55:18.653

@Andres 的解决方案对我有用，但如果我想将添加按钮添加到导航栏并且我想显示具有相同 segue 标识符的相同视图控制器，那么`index = [self.tableView indexPathForCell:sender].row;`代码不起作用，因为发送者不是 UITableViewCell 的子类。所以这是我使用@Andres 代码的解决方案：

```
- (void) addItem: (id) sender {
    [self performSegueWithIdentifier: @"Identifier" sender: self];
}

- (void) prepareForSegue: (UIStoryboardSegue *) segue sender: (id) sender {
    id selectedObject;
    if (![[sender class] isSubclassOfClass: [UITableViewCell class]]) {
        // create a new object
        selectedObject = [...];
    }
    else {
        selectedObject = [objectArray objectAtIndex: [self.tableView indexPathForCell: sender].row];
    }

    if ([[segue identifier] isEqualToString: @"Identifier"]) {
        // use the new or existing object
        [selectedObject doSonething];
    }
} 
```

# php - 不同类的静态方法之间的 PHP 数据

> ID：13517421
> 
> 赞同：0
> 
> 时间：2012-11-22T17:15:46.553
> 
> 标签：php, oop, wordpress, static-methods

我正在编写一个 Wordpress 插件，并在 PHP 中处理 OOP 概念。我想我想做的事情相对简单，所以我不知道我尝试组织事物的方式是否在找错树。

这是基本场景：我创建了一个自包含类来实现简码功能。这使用了静态方法，因为我认为不需要为此目的实例化类的实例。

这似乎工作正常。但是，我需要实现一些其他组件，即帖子编辑器的“短代码助手”插件、小部件和选项页面。这些逻辑上分解为离散的函数集合，因此将每个函数分组到自己的类中似乎是有意义的。不过，我再次不确定它们是否需要实例化。复杂之处在于每个类中的静态函数需要共享公共数据，我希望能够从另一个类中的静态函数调用一个类中的静态函数，因此，例如，所有类都可以共享默认设置，例如，我可以将简码助手的控制面板重用为小部件控制面板。

这实际上可以用静态函数实现吗？到目前为止，我还没有成功从另一个类中的静态函数调用一个类中的静态函数。我是不是在这里叫错了树。在过去，我使用程序方法完成了这种事情，但我正试图转向一种更加基于 OOP 的方法。

对不起，很长的消息。

非常感谢任何建议。

干杯，

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:19:27.243

> 面向课堂的编程就像买一辆车让它停在车道上，反复打开和关闭车门，在座位上跳来跳去，偶尔打开挡风玻璃雨刷，却从来没有转动一次点火钥匙开着车。它完全没有抓住重点。
> 
> [如何不使用静力学破坏您的可测试性](http://kunststube.net/static/)

请阅读上面链接的文章。您正在尝试的是具有全局状态的程序编程。OOP 实际上与它几乎没有关系。

# mysql - Cannot use mysql functions in Eclipse CDT Juno

> ID：13517422
> 
> 赞同：2
> 
> 时间：2012-11-22T17:15:54.410
> 
> 标签：mysql, c, eclipse, eclipse-cdt

I'm getting an error on my source file for the mysql functions Im using. I setup my inclusion path and the libraries. The error is, for example: `undefined reference to _mysql_init` when I call `mysql_init`. Whats interesting is, I can click on the function and it will go directly to the `mysql.h` function declaration

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:21:31.433

Assuming your project builds well: You might like to let Eclipse rebuild its symbol index.

To do so: Right-click the project and select `Index->Rebuild`

(see also: [eclipse C project shows errors (Symbol could not be resolved) but it compiles](https://stackoverflow.com/q/13269092/694576))

# asp.net - 在应用程序日志中出现错误的应用程序错误

> ID：13517425
> 
> 赞同：0
> 
> 时间：2012-11-22T17:16:18.927
> 
> 标签：asp.net, iis-7, foxpro

我们在我们的 asp.net 应用程序中使用了一些旧版 foxpro 页面，我们使用 .exe 来处理 foxpro 页面请求，并且还使用 WC.dll。它工作正常，但突然出现以下错误

```
Faulting application danamateweb.exe, version 0.0.0.0, stamp 47139f24, faulting module ntdll.dll, version 5.2.3790.4455, stamp 49900d60, debug? 0, fault address 0x0002cac2. 
```

我不知道如何解决这个问题，我们的生产下降了，DEV和Test box没有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:47:15.433

WC.dll 是 webconnect (http://www.west-wind.com/) 的一部分。

如果这不起作用，我建议重新启动 IIS 或服务器。

根据它的安装方式，这些可能会给您一个错误日志：

/admin/wc.wc?wwmaint~showlog~错误

/admin/wc.wc?wwMaint~wcDLLErrorLog

# javascript - 通过单独的 ID 组更改背景

> ID：13517427
> 
> 赞同：-2
> 
> 时间：2012-11-22T17:16:25.257
> 
> 标签：javascript, html

我需要一些帮助来做点小事...

我有两组“ **A** ”标签，第一组带有“ **me** ”ID，第二组带有“ **them** ”ID。当我单击“**我**”或“**他们**”组之一时，单击对象的背景会发生变化：

```
<a id="me" onclick="me();">text</a>
<a id="me" onclick="me();">text</a>
<a id="me" onclick="me();">text</a>

<a id="them" onclick="them();">text</a>
<a id="them" onclick="them();">text</a>
<a id="them" onclick="them();">text</a>
<script>
    function me(){
        document.getElementById('me').style.backgroundColor='#000000';
    }
    function them(){
        document.getElementById('them').style.backgroundColor='#000000';
    }
</script> 
```

我无法更改单击**A**的背景并独立于 ID 对象恢复上次单击**的 A ...**

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:17:23.270

给定 ID 的元素不能超过一个。

在你的情况下，你应该使用一个类。例如 ：

```
<a class="me" onclick="similar();">text</a>
<a class="me" onclick="similar();">text</a>
<a class="me" onclick="similar();">text</a>
<a class="them" onclick="similar();">text</a>
<a class="them" onclick="similar();">text</a>
<a class="them" onclick="similar();">text</a>
<script>
  function similar(){
     var elems = document.getElementsByClassName(this.className);
     for (var i=0; i<elems.length; i++) elems[i].style.backgroundColor='#000000';
  }
</script> 
```

# java - Error while Creating SQLCiphered database on sdCard in android

> ID：13517428
> 
> 赞同：1
> 
> 时间：2012-11-22T17:16:37.977
> 
> 标签：java, android, eclipse

I am trying to create a sqlCipher encrypted database in sdCard and then read from there and store values.

This is my code.

```
public class DataBaseHelper extends SQLiteOpenHelper 
{
    private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
    private static String DB_PATH ;//path of our database
    private static String DB_NAME = "application-database";// Database name
    private static int DATABASE_VERSION = 1;

    private SQLiteDatabase mDataBase; 
    private final Context mContext;

    private static final String DATABASE_CREATE_TABLE1 =
            "create table notes (_id integer primary key autoincrement, myval);";

    public DataBaseHelper(Context context) 
    {
        super(context, DB_NAME, null, DATABASE_VERSION );    
        this.mContext = context;
        DB_PATH = Environment.getExternalStorageDirectory() + "/Personal Folder/";
    }

    public void createDataBase() throws IOException
    {
        //If database not exists create it from the assets
        boolean mDataBaseExist = checkDataBase();
        if(!mDataBaseExist)
        {
          try 
          {
                File dbFile = new File(DB_PATH + DB_NAME);
                SQLiteDatabase.loadLibs(mContext);
                dbFile.mkdirs();
                dbFile.delete();
                SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbFile, "setPassword", null);
                db.execSQL(DATABASE_CREATE_TABLE1);
                Log.e(TAG, "createDatabase database created");
          } 
          catch (SQLException mIOException) 
          {
                throw new Error("Error Creating Database");
          }
        }
    }

    private boolean checkDataBase()
    {
       File dbFile = new File(DB_PATH + DB_NAME);
       return dbFile.exists();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        SQLiteDatabase.loadLibs(mContext);
        mDataBase = SQLiteDatabase.openDatabase(mPath, "setPassword", null, SQLiteDatabase.CREATE_IF_NECESSARY);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
       Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");

       /*
        if (oldVersion == 2)
        {
            db.execSQL("ALTER TABLE notes ADD " + KEY_DATA + " blog");
            db.execSQL("ALTER TABLE notes ADD " + KEY_TYPE + " text");

        }

        if (newVersion == 3)
        {
            db.execSQL("ALTER TABLE notes ADD " + KEY_TYPE + " text");
        }
        */
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub

    }

}

public class PADatabaseAdapter 
{
    private static final String TAG = "DbAdapter";
    private final Context mContext;
    private DataBaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    /**
     * Database creation sql statement
     */
    public PADatabaseAdapter(Context ctx)
    {
        this.mContext = ctx;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public PADatabaseAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public PADatabaseAdapter open(String password) throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase(password);
            //mDbHelper.close();
            mDb = mDbHelper.getmDataBase();
                    // mDbHelper.getWritableDatabase(password);

        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        System.gc();
        return this;
    }

    public boolean isOpen ()
    {
        if (mDb !=null)
            return mDb.isOpen();
        else
            return false;
    }

    public void rekey (String password)
    {
        mDb.execSQL("PRAGMA rekey = '" + password + "'");
        System.gc();
    }

    public void close() 
    {
        mDb.close();
        mDbHelper.close();
    } 
```

This is the code I am using in my activity

```
 mContext = this;
   mDbHelper = new PADatabaseAdapter(this);        
   mDbHelper.createDatabase();

   mDbHelper.open("setPassword");
   long as = mDbHelper.createNote("abc");
   mDbHelper.close();

   mDbHelper.open("setPassword");
   Cursor mCursor =   mDbHelper.fetchAllNotes();
   mDbHelper.close(); 
```

The problem is, in `db.exec(CREATE_tABLE)` it either does not create table OR something else is wrong because `long as = mDbHelper.createNote("abc");` gives error `no such table notes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:06:09.767

If you look at your code, you will see:

```
@Override
public void onCreate(SQLiteDatabase arg0) {
    // TODO Auto-generated method stub

} 
```

The idea is that you are supposed to replace the `// TODO` with actual code that populates the database. You can tell this [reading the documentation for `SQLiteOpenHelper`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html):

> You create a subclass implementing onCreate(SQLiteDatabase), onUpgrade(SQLiteDatabase, int, int) and optionally onOpen(SQLiteDatabase), and this class takes care of opening the database if it exists, creating it if it does not, and upgrading it as necessary. Transactions are used to make sure the database is always in a sensible state.

You then use `getReadableDatabase()` and `getWritableDatabase()` methods on `SQLiteOpenHelper` to access your database. In the case of SQLCipher for Android's version of those methods, you pass the passphrase as a parameter.

Hence, I recommend that you:

1.  Move `SQLiteDatabase.loadLibs(mContext);` to your constructor.

2.  Delete the rest of `openDataBase()`, and all of `close()` (since that code already exists)

3.  Rewrite `checkDataBase()` to get rid of the invalid `DB_PATH` and [use `getDatabasePath()` instead](http://developer.android.com/reference/android/content/Context.html#getDatabasePath%28java.lang.String%29)

4.  Move `db.execSQL(DATABASE_CREATE_TABLE1);` to `onCreate()`

5.  Delete the rest of `createDataBase()`

6.  Use the `SQLiteOpenHelper` properly in your activity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:07:22.333

Why are you subclassing `SQLiteOpenHelper`? The purpose of this class is managaing database files, opening/closing them, creating them if necessary and managing application database objects (`SQLiteDatabase`).

**But** you're doing that on your own, while doing **nothing** in `SQLiteOpenHelper.onCreate` which means SQLiteOpenHelper does nothing. Don't subclass `SQLiteOpenHelper` if you are creating the database files on your own.

What is that `SQLiteDatabase` class? I don't see any `loadLibs` method in the [offical one](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html), nor `openOrCreateDatabase`/`openDatabase` overloads which accept the parameters you are passing...

# google-chrome - Chrome 应用程序 - 固定在清单中

> ID：13517430
> 
> 赞同：0
> 
> 时间：2012-11-22T17:16:48.907
> 
> 标签：google-chrome, tabs, google-chrome-extension, manifest, pinned-site

我正在整理一个托管的 Chrome 应用程序。是否可以在清单中将应用程序指定为“固定”，以便当用户打开它时，它会自动作为固定选项卡打开？

我看到了[这个](http://developer.chrome.com/stable/extensions/tabs.html)，但我不确定它是否适用于托管应用程序......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:08:48.717

不，这是不可能的。

您提供的文档链接仅用于扩展。没有选项可以在[manifest.json 中为 apps](https://developers.google.com/chrome/apps/docs/developers_guide#manifest)固定托管应用的选项卡。

# ruby - 停止机架会话为所有页面设置 cookie

> ID：13517434
> 
> 赞同：1
> 
> 时间：2012-11-22T17:17:04.740
> 
> 标签：ruby, session, cookies, sinatra, rack

在我的 Sinatra 应用程序中，我正在使用机架会话

```
use Rack::Session::Cookie, :secret => ENV['SECRET'] 
```

即使我没有在会话中设置任何内容，它似乎也在为每个页面加载设置一个 cookie。如果设置了会话，有没有办法将其更改为仅设置 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:04:11.193

`Rack::Session::Cookie`将会话保存到编组的 Ruby`Hash`中。

基本上，它正在编组您的会话并将其保存到 cookie 中。

它不在乎你的 session 是空的`Hash`，
它无论如何都会被编组并持久化到 cookie 中。

您真的需要将会话保存在 cookie 中吗？

也许`use Rack::Session::Pool`将您的会话保存在内存池中？
然后它只会设置一次cookie。

# c# - 构建与视频驱动程序 VS2012 相关的 WPF 的问题

> ID：13517436
> 
> 赞同：6
> 
> 时间：2012-11-22T17:17:19.733
> 
> 标签：c#, wpf, visual-studio-2012, nvidia

最近，我在 Visual Studio 2012 构建 WPF 项目时遇到了一个奇怪的问题。

当我安装了视频驱动程序后，在启动调试时加载 XAML 查看器和 WPF 应用程序本身需要很长时间。这也适用于 exe 文件。

卸载视频驱动程序（使用基本 MS 驱动程序）后，一切运行正常。

我已经为我的 NVIDIA 8700m GT 尝试了不同的驱动程序版本（win 7 Professinal 64bit），但没有成功。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:03:36.387

VS 2012 使用 WPF 作为其 UI。VS 2012 的 WPF 是 WPF 4.0，它需要 DirectX 9.0c 支持和 Pixel Shader 3.0 支持。但 VS 2012 至少需要 Windows 7 SP1，建议完全支持 WDM 1.1。您的显卡 NVidia 8700m GT 部分支持 DirectX 10，但这意味着它也支持 DirectX 9.0c。

您应该从 NVidia 下载最新的驱动程序；适用于 Windows 7 32 位和 Windows 8 32 位的最新驱动程序是 306.97。

链接是：[http ://us.download.nvidia.com/Windows/306.97/306.97-notebook-win8-win7-winvista-32bit-international-whql.exe](http://us.download.nvidia.com/Windows/306.97/306.97-notebook-win8-win7-winvista-32bit-international-whql.exe)

# javascript - 如何验证多组单选按钮？

> ID：13517444
> 
> 赞同：1
> 
> 时间：2012-11-22T17:18:05.657
> 
> 标签：javascript, forms, validation

我有两组不同的单选按钮需要在提交表单之前进行验证。将来我可能需要为此添加更多选项，但目前有两组是/否问题。这是到目前为止单选按钮的代码。

```
<form name=myForm action="test.php" method="post">
<input type="radio" name="question1" id="question1">
<input type="radio" name="question1" id="question1">
<input type="radio" name="question2" id="question2">
<input type="radio" name="question2" id="question2">
<input type="submit" value="Submit">
</form> 
```

因此，基本上是在寻找一种方法来确保在提交表单之前在每个组（问题 1 和问题 2）中选择了一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:55:59.420

这个问题实际上是两个部分和一个附注。

旁注（与问题无关）是 id 应该始终是唯一的，拥有两个 id 为“question1”的收音机是无效的。

问题一是在表单提交时检查它。最简单的方法是在表单的 onsubmit 标记中添加“return functName()”。

```
<form name='myForm' action='test.php' method='post' onsubmit='return validate()'> 
```

表单是否提交将取决于您在提交时返回的是 true 还是 false。

第二个是抓住单选框并检查它们是否被选中。您可以使用以下方法获取每个收音机 seelct 的输入：

```
document.forms.myForm.nameOfRadioHere 
```

这将为您提供该名称下的输入列表。

然后，您只需遍历它们以检查其中一个是否已 .checked 有效。

**示例代码：**

*Javascript：*

```
function validate(){
  if (checkRadio("question1") && checkRadio("question2")){
    return true;
  }else{
    alert("Please fill in both radio boxes!");
    return false;
  }
}

function checkRadio(name){
  var radio = document.forms.myForm[name];
  for (var option in radio){
    if(radio[option].checked){
      return true;
    }
  }
  return false;
} 
```

*HTML*

```
<form name='myForm' action="test.php" method="post" onsubmit='return validate()'>
  <input type="radio" name="question1">
  <input type="radio" name="question1">
  <input type="radio" name="question2">
  <input type="radio" name="question2">
  <input type="submit" value="Submit">
</form> 
```

# jquery - 在服务器端解码 html

> ID：13517448
> 
> 赞同：0
> 
> 时间：2012-11-22T17:18:31.897
> 
> 标签：jquery, asp.net, web-services

我有一个字符串，我想在客户端使用 JavaScript 对其进行编码：

```
/* JS code */
var blogBody = $(".editor").val();
var blogBodyEnc = encodeURIComponent(blogBody)
// blogBody = "<p>text</p><p><br></p><p><br></p><p>text</p>";
// blogBodyEnc = "%3Cp%3Etext%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3Etext%3C%2Fp%3E" 
```

然后我使用 jquery ajax 将编码字符串 blogBodyEnc 传递给服务器。现在我想在服务器上解码这个字符串。我正在努力：

```
/* ASP.NET code */
string msg = HttpUtility.HtmlDecode(blogBodyEnc);
// blogBodyEnc = "%3Cp%3Etext%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3Etext%3C%2Fp%3E"
// msg =         "%3Cp%3Etext%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3Etext%3C%2Fp%3E" 
```

有人能说有什么问题吗？我希望在服务器端解码后看到 html 代码......但它仍然编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:20:08.670

你想要[`UrlDecode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)，没有`HtmlDecode`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:22:13.680

我想他真的想要：

```
function htmlEncode(value){
   return $('<div/>').text(value).html();
} 
```

并这样称呼它：

```
var blogBodyEnc = htmlEncode($(".editor").val()); 
```

然后使用

```
string msg = HttpUtility.HtmlDecode(blogBodyEnc); 
```

添加示例[jsfiddle](http://jsfiddle.net/S32dQ/)

# python - 熊猫日期时间索引错误或可能的时间旅行发现

> ID：13517451
> 
> 赞同：0
> 
> 时间：2012-11-22T17:18:44.547
> 
> 标签：python, pandas

这是一个错误吗？看起来像是将 datetime 对象推入数据框，然后在 datetime 列上建立索引，对日期进行了一些加扰，但不会产生错误（参见第 97 行）。有趣的是，这个视图看起来是正确的，所以我*猜*它是某种内存索引的东西。

这是一个相当新的熊猫版本：pandas-0.9.1.dev_85d982d-py2.7-linux-x86_64.egg。

```
In [93]: import datetime, pandas
In [94]: df = pandas.DataFrame([[datetime.datetime.today(), 12.1]], columns=['Date', 'Value'])

In [95]: df = df.set_index('Date')

In [96]: df
Out[96]: 
                            Value
Date                             
2012-11-22 12:12:40.905739   12.1    

In [97]: df.index
Out[97]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2190-12-31 02:18:44.941732032]
Length: 1, Freq: None, Timezone: None

In [98]: df = df.reset_index()

In [99]: df
Out[99]: 
                           Date  Value
0 2190-12-31 02:18:44.941732032   12.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:03:39.090

更新到新版本的 numpy（并重建 pandas）似乎已经解决了这个问题。

> > > 麻木的。**版本** “1.8.0.dev-fd78546”熊猫。**版本** “0.9.1.dev-85d982d”

我在这里发布并关闭了这个问题：[https ://github.com/pydata/pandas/issues/2329](https://github.com/pydata/pandas/issues/2329)

如果您认为这是多余的，请随时在 stackoverflow 上关闭此问题，尽管谁知道也许其他人也会遇到它。

# java - Java SE 7 认证示例任务无法理解

> ID：13517454
> 
> 赞同：1
> 
> 时间：2012-11-22T17:18:53.423
> 
> 标签：java, certificate

我正在阅读有关 Oracle Java SE 7 Certified Programmer Level 2 的信息。我查看了他们[网站](http://education.oracle.com/pls/web_prod-plq-dad/db_pages.getpage?page_id=303&p_certName=SQ1Z0_804)上的示例问题，发现这个答案我无法理解。

```
import java.util.*; 
public class MyScan { 
   public static void main(String[] args) { 
      String in = "1 a 10 . 100 1000"; 
      Scanner s = new Scanner(in); 
      int accum = 0; 
      for(int x = 0; x < 4; x++) { 
        accum += s.nextInt(); 
      } 
      System.out.println(accum); 
   } 
} 
```

结果是什么？
A) 1
B) 11
C) 111
D) 1111
E) 编译失败。
F) Class2 有一个 Class1。
G) 运行时抛出异常

正确答案是 F。这个答案是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:28:33.020

您将在运行时收到异常。

```
 java.util.InputMismatchException 
```

这是因为，它在尝试匹配时在第二次迭代中失败`a`

# monitoring - 用于检查 Nagios 的 Nagios 脚本

> ID：13517455
> 
> 赞同：0
> 
> 时间：2012-11-22T17:19:19.267
> 
> 标签：monitoring, nagios

我目前在多个项目中运行多个 (6) Nagios 实例。我的概念是每个项目运行一个 Nagios 实例，每个实例负责它们下面的机器和项目特定的任务。

是的，我可以将所有这些整合到一个 Nagios 实例中，但这不是问题所在。

我已经检查了 Google 和 Nagios Exchange 寻找插件，如果那里没有插件，我将自己构建一个。我想知道是否有人对此有任何经验。

问题：是否有一个 Nagios 插件可以检查另一个远程 Nagios 实例的整体状态，或者通过 NRPE 和本地脚本，或者通过经过身份验证的 HTTP(s) 到 cgi-bin，简单地报告有多少是 OK / 警告 /每个检查实例中的严重/未知等。HTTP(s) 将是首选。

如果没有，有人可以指出如何查询和理解单个 Nagios 实例的响应的方向。如果没有任何现有插件，我将开始查看 Nagstamon 以获取有关如何实现此目的的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:45:50.900

我不明白您是否要检查每个 Nagios 是否运行正常，在这种情况下您可以使用 check_nagios 插件。

如果您的意思是希望在一个地方查看每个 Nagios 检查，您可以使用 MNTOS，它会在一个地方显示每个 Nagios 战术概览。如果这还不够，您可以查看[此链接](http://www.openlogic.com/wazi/bid/188134/How-to-Build-a-Distributed-Monitoring-Solution-with-Nagios)以向您展示您的“主”Nagios 中的其他 Nagios 检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T10:37:09.167

您可以使用通过 nrpe/check_by_ssh/snmp 调用的上述 check_nagios，但您还应该确保主机本身正在被监控 - 例如文件系统、负载等。

您可能会查看 Icinga Wiki，我在其中保留了有关在监控主机上监控的内容的列表：[https ://wiki.icinga.org/display/howtos/Monitoring+the+Icinga+Host](https://wiki.icinga.org/display/howtos/Monitoring+the+Icinga+Host)

一种稍微不同的方法是解析 status.dat 手动获取 last_check。可以在此处找到针对 snmp 的示例（也可用于 Nagios，而不仅仅是 Icinga）：[https ://wiki.icinga.org/display/howtos/check_snmp_icinga](https://wiki.icinga.org/display/howtos/check_snmp_icinga)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:29:02.180

我正在为 Nagios 开发 Web 服务 RESTful API。

如果仍在进行中，但当前版本 (0.2) 可以通过 HTTP 检索所有主机状态和所有服务状态，以及对象的额外配置。

也可以提交主机和服务状态的被动检查结果。

请查看[http://dmytro.github.com/nagira](http://dmytro.github.com/nagira)，它也在 Nagios Exchange 的 API 部分发布。

这是你要找的东西吗？

# java - 检查文本中的具体字词

> ID：13517456
> 
> 赞同：0
> 
> 时间：2012-11-22T17:19:23.360
> 
> 标签：java, android, string

所以我的问题是：

我如何检查文本是否包含 1 个或多个单词？

例如。: 字一，这是字二，这是字三

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:21:16.947

遍历您要检查和调用的单词[`String.contains`？](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:22:06.097

**-**你可以使用String的方法`contains()`

**例如：**

```
String s = "Hello i am good";

if (s.contains("am")){

    // Do what u want
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:33:36.757

如果你想忽略大小写，你可以使用正则表达式

```
String data = "Word ONE , this is WORD two and this is the word THREE, " +
        "(words will not be counted)";
Pattern p = Pattern.compile("\\bword\\b", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(data);
int counter = 0;
while (m.find())
    System.out.println("[" + counter++ + "]" + m.group()); 
```

此代码将计算字数`Word` `WORD`，`word`但不计算`words`（如果您想将`words`正则表达式更改为`Pattern.compile("word", Pattern.CASE_INSENSITIVE);`

# android - 在 Android 上使用 Restful 服务 - 意图未启动？

> ID：13517460
> 
> 赞同：0
> 
> 时间：2012-11-22T17:19:33.310
> 
> 标签：android, android-intent

我正在按照 GoogleIO (http://www.youtube.com/watch?v=xHXn3Kg2IQE) 上的建议在 Android 上实现 RESTful 服务的使用（我的第一次 Android 体验）。我尝试实现一个 GET 请求，我认为我按照建议实现了所有内容，但它似乎不起作用。

这是我的[ServiceHelper](http://pastebin.com/hW5nBVrX#)和[Service](http://pastebin.com/n7Dpj8kc)类：

调试后我知道它进入了 ServiceHelper 类中的 getPersons() 方法：

```
public void getPersons ( Context context, ResultReceiver receiver ) {
    final Intent intent = new Intent ( Intent.ACTION_SYNC, null, context,   PersonService.class );
    intent.putExtra ( PersonService.EXTRA_STATUS, receiver );
    intent.putExtra ( PersonService.EXTRA_REST_OPERATION, PersonService.GENERAL_REST_OPERATION );
    context.startService ( intent );
} 
```

但是，它永远不会到达 Service 类中的 onCreate()、onHandleIntent() 或 getPersons()：

```
@Override
protected void onHandleIntent ( Intent intent ) {
Log.d ( TAG, "onHandleIntent()" );

final String restOperation = intent.getStringExtra ( EXTRA_REST_OPERATION );
    if ( GENERAL_REST_OPERATION.equals ( restOperation ) )
    getPersons ( intent );
} 
```

你知道这里出了什么问题吗？

预先感谢您的帮助！

# nginx - 尝试在 PHP-FPM 和 nginx 上使用 shell_exec 运行 su

> ID：13517461
> 
> 赞同：1
> 
> 时间：2012-11-22T17:19:34.213
> 
> 标签：nginx, php

因此，我一直在尝试`su - username -c whoami`使用 shell_exec() 运行以下命令，但我得到的唯一结果是 NULL。在 PHP 交互模式下运行、以`nginx`用户身份登录或通过 Apache 运行时，我得到正确的输出。一切都很完美。这是我的代码：

`var_dump(shell_exec('su - username -c whoami'));`

我怀疑这与 PHP-FPM 有关。有什么想法吗，伙计们？

# android - 安卓无线显示

> ID：13517463
> 
> 赞同：0
> 
> 时间：2012-11-22T17:19:44.007
> 
> 标签：android

我是一个相当新的安卓程序员，我一直在网上搜索关于通过网络显示安卓屏幕的内容。我知道可以使用 MirrorOp Sender 等应用程序镜像显示。我正在寻找的是 android 设备，它可以在 android 设备本身上显示一件事，而在其他地方的屏幕上显示完全不同的东西。到目前为止，我的搜索结果还没有让我走得很远。

所以我真的想知道的是，目前是否有应用程序可以做到这一点，是否有任何库可以用来帮助我实现这一点？我对如何实现这一点有一些想法，但如果已经完成，我从头开始写一些东西是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:08:51.870

Android 4.2 增加了[对多个显示器上不同内容的支持](http://developer.android.com/about/versions/android-4.2.html#SecondaryDisplays)。

虽然理论上您可以在早期版本的 Android 上在应用程序级别执行此操作，但我不知道有任何应用程序可以这样做，并且您可能很难符合相关的无线标准（例如 Miracast）。

请注意，MirrorOp Sender 需要 root 访问权限，并且使用的技术可能适用于所有 Android 设备，也可能不适用于所有 Android 设备。

# php - db更新后php页面未重定向

> ID：13517466
> 
> 赞同：0
> 
> 时间：2012-11-22T17:19:51.807
> 
> 标签：php, mysql, html, web

大家好，感恩节快乐！我正在使用 HTML 表单来获取电子邮件地址，并编写了这个小 php 脚本以将其添加到 mySql 数据库。我试图将用户重定向到一个 html 页面，让他们知道我很感激。但是，我的 php 脚本将更新我的数据库，但是使用如下所示的 (header) 无法重定向，它只会让我留在原始的 html 表单页面上......我做了一些研究，只是有点困惑，我的php 脚本不包含 HTML，所以这不是问题......真的很困惑，或者只是烧坏了，请帮忙！（注：添加*******以保护我的隐私；>））

```
 <?php
    $host = "*********";
    $user = "*********";
    $db_name= "********";
    $pass= "********";

    $con = mysql_connect($host, $user, $pass);

    if (!$con) 
    { 
    die('Could not connect: ' . mysql_error()); 
    } 
    mysql_select_db("******", $con);

    $email=mysql_real_escape_string($_POST['email']);
    $sql="INSERT INTO *** (email) VALUE ('$email')";         

    if (!mysql_query($sql,$con)) {
    die('Error: ' . mysql_error()); 
    } 
    mysql_close($con);
    header('Location: http://www.********.com/thanks.html');

    ?> 
```

谢谢大家，流程是这样的：用户转到/index.html。使用表单标签，我得到 $name。当用户输入他们的电子邮件地址然后单击提交时，它会启动 sendSql.php，这完全是您所看到的所有代码。这个 sendSql.php 工作并使用用户电子邮件更新我的数据库，但是它只是挂在他们最初输入电子邮件的原始 index.html 页面上，而不是转到我的 Thanks.html 页面。在浏览器栏中，您可以看到 sendSql.php 出现一秒钟，然后它清除回默认的 www。*** *.com/index.html 页面。这是我启动 sendSql.php 的 html 代码：

```
 <form method="post" action="sendSql.php">
                 <input type="text" value="your@email.com" name="email" />
                 <input type="submit" value="Subscribe">
                         </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:06:59.173

您还可以在代码末尾尝试一个简单的 html 重定向，检查是否使用了提交按钮，即

```
<meta http-equiv="REFRESH" content="0;url=http://www.the-domain-you-want-to-redirect-to.com"> 
```

前一阵子用过这个，让我知道这是否有效，如果无效，您是如何解决问题的

# c# - NHibernate 保存相关实体

> ID：13517468
> 
> 赞同：2
> 
> 时间：2012-11-22T17:20:07.483
> 
> 标签：c#, nhibernate, one-to-one

我有一个基本结构。一个 User 对象和一个 UserDetails 对象。User表有身份主键生成UserId，然后我还想为这个UserId保存一个UserDetails对象。单独执行此操作会很容易，但我正在尝试找到一种方法，如果我可以一次性完成，因为 User 类包含对 UserDetails 对象的引用。例如

用户 u = new User() { Name="me", Age=17, UserDetails = new UserDetails() { Detail1 = 1 } };

所以我所要做的就是传递用户对象，然后它包含对其他相关子信息的基于对象的引用（我在这个例子中大大简化了它，但是还有几个类似的类作为 UserDetails，比如 UserMatchConfiguration 等等每个字段的数量）

我希望能够在代码中构建对象，或者让它传递和修改，然后在父 User 对象上调用 save，然后保存所有相关对象。到目前为止，我已经使用一对一映射和保存级联实现了这一点，但问题是当您创建一个新对象时，当我希望它首先保存 User 类时，所有相关类的 UserId 设置为零，然后将生成的 UserId 传播到所有相关类，然后保存它们。

映射如下。

```
<class name="User" table="[User]">
    <id name="UserId" unsaved-value="0">
      <generator class="identity" />
    </id>
    <property name="FirstName" />
    <property name="LastName" />
    <property name="EmailAddress" />
    <property name="DateOfBirth" />
    <property name="Gender" />
    <property name="PostcodePartOne" />
    <property name="PostcodePartTwo" />
    <many-to-one name="UserLocation" column="UserLocationId" />
    <property name="DateJoined" />
    <property name="LastLoggedOn" />
    <property name="Status"/>
    <property name="StatusNotes" />
    <bag name="Photos" order-by="DisplayOrder asc" inverse="true" lazy="false" cascade="all">
      <key column="UserId" />
      <one-to-many class="UserPhoto" />
    </bag>
    <bag name="Interests" inverse="true" lazy="false" cascade="all">
      <key column="UserId" />
      <one-to-many class="UserMatchInterest" />
    </bag>
    <bag name="Preferences" inverse="true" lazy="false" cascade="all">
      <key column="UserId" />
      <one-to-many class="UserPreference" />
    </bag>
    <one-to-one name="Profile" class="UserProfile" cascade="save-update" />
    <one-to-one name="MatchCriteria" class="UserMatchCriteria" />
    <one-to-one name="MatchLifestyle" class="UserMatchLifestyle" />
    <property name="LastUpdated" />
  </class> 
```

如您所见，我现在仅使用 Profile 对象对其进行试用，以尝试使其正常工作。我怎样才能拥有它以便首先保存主用户对象，然后将 UserId 传递给其他类，因为它们都将其用作主键？

我再次无法进行级联保存，然后在每个子类上手动设置 UserId 并分别保存它们，但我试图在一次调用中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:21:13.990

我会说你快到了。你的`user`类映射似乎是正确的，所以对我来说怀疑是`UserProfile`.

NHibernate 完全支持这种风格的关系，它就是`one-to-one`映射（正如你所尝试的那样）。虽然我们看不到*UserProfile*映射，但让我们按照文档对其进行扩展：

*   [http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-onetoone](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-onetoone)（文档）
*   [http://ayende.com/blog/3960/nhibernate-mapping-one-to-one](http://ayende.com/blog/3960/nhibernate-mapping-one-to-one)（阅读更精彩）

`UserProfile`血红蛋白

```
<class name="UserProfile" table="[UserProfile]">
  <id name="UserProfileId" column="UserId">
    <generator class="foreign">
      <param name="property">User</param>
    </generator>
  </id>
  ...
  <one-to-one name="User" class="User" constrained="true"/>
</class> 
```

UserProfile 需要这些属性：

```
public class UserProfile 
{
   public virtual int UserProfileId { get; set; }
   public virtual User User { get; set; }
   ...
} 
```

在插入之前，我们必须连接两端（这是非常重要的一步）：

```
user.Profile =  profile;
profile.User = user; 
```

如果 中的级联映射`user.hbm.xml`如下所示：

```
 <one-to-one name="Profile" class="UserProfile" cascade="all" /> 
```

我们可以只保存一个**`user`**，所有其他实体将（以正确的方式）由 NHiberante 持久化。无论如何都不需要处理ID。

# c++ - 在没有单调时钟的系统上是否不可能实现一致的实现？

> ID：13517470
> 
> 赞同：4
> 
> 时间：2012-11-22T17:20:11.057
> 
> 标签：c++, time, c++11, implementation, chrono

标`<chrono>`头定义`steady_clock`了表示单调时钟的类 - 即，`now()`永远不会随着物理时间的增加而减少。虽然这个类没有被标记为可选，所以如果实现不能实现它，因为它运行在一个没有单调时间源的系统上，会发生什么？

看一下libstdc++源码，在`_GLIBCXX_USE_CLOCK_MONOTONIC`没有被定义的情况下，`steady_clock`简单定义为：

```
typedef system_clock steady_clock; 
```

`system_clock`虽然不一定是稳定的，所以这可能（并且可能会）打破`steady_clock`.

在没有单调时间源的系统上是否不可能实现 C++11 的一致实现？为什么`steady_clock`不像类型一样选择可选`intX_t`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T17:32:56.403

我想这样的系统将是某种嵌入式系统。

好吧，这样的~~系统~~西红柿可以有独立的实现，只需要标准库的最小子集。`<chrono>`不是那个最小子集的一部分。

这在 §17.6.1.3 独立实现 [合规] 中定义：

> *1*定义了两种实现：*托管*和*独立*(1.4)。对于托管实现，本国际标准描述了一组可用的标头。
> 
> *2*一个独立的实现有一组实现定义的头文件。该集合应至少包括表 16 中所示的标题。

表 16 包含以下标题：`<ciso646>`, `<cstddef>`, `<cfloat>`, `<limits>`, `<climits>`, `<cstdint>`, `<cstdlib>`, `<new>`, `<typeinfo>`, `<exception>`, `<initializer_list>`, `<cstdalign>`, `<cstdarg>`, `<cstdbool>`, `<type_traits>`, 和`<atomic>`.

请注意，这并不意味着这样的实现不能为`<chrono>`标头提供可以在其中实现的所有内容，但不能提供其余部分。

# c# - 如何抑制 StyleCop 警告 SA1403？

> ID：13517474
> 
> 赞同：9
> 
> 时间：2012-11-22T17:20:32.500
> 
> 标签：c#, stylecop

考虑以下代码，它包含在单个文件中：

```
namespace Foo
{
    public partial class One
    {
    }
}

namespace Baa
{
    public partial class Two
    {
    }
} 
```

编译此代码会导致两个 StyleCop 警告：

*   SA1402:FileMayOnlyContainASingleClass
*   SA1403:FileMayOnlyContainASingleNamespace

抑制 SA1402 按预期工作：

```
namespace Foo
{
    [SuppressMessage("Microsoft.StyleCop.CSharp.MaintainabilityRules", "SA1402:FileMayOnlyContainASingleClass")]
    public partial class One
    {
    }
}

namespace Baa
{
    [SuppressMessage("Microsoft.StyleCop.CSharp.MaintainabilityRules", "SA1402:FileMayOnlyContainASingleClass")]        
    public partial class Two
    {
    }
} 
```

不幸的是，我似乎无法压制 SA1403。

我已经在每个类上方尝试了以下抑制（根据 SA1402 抑制）：

```
[SuppressMessage("Microsoft.StyleCop.CSharp.MaintainabilityRules", "SA1403:FileMayOnlyContainASingleNamespace")] 
```

我还尝试了以下程序集级别的抑制，无论是在文件顶部还是在我的全局抑制文件中（我意识到这不是一个明智的想法）：

```
[assembly: System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.StyleCop.CSharp.MaintainabilityRules", "SA1403:FileMayOnlyContainASingleNamespace")] 
```

但无济于事。

所以，我的问题是：如何抑制 StyleCop 警告 SA1403？

谢谢，

乙

PS请抑制提醒我单个文件中的多个命名空间表明不良编程习惯的冲动...

编辑（20121127）：根据 Mightymuke 的回答，我研究了使用`SourceFileList`.

我们`StyleCopOverrideSettingsFile`在构建中使用标签，它指向一个共享的规则文件。根据 Mightymuke 的建议，我将以下内容添加到我们的文件中：

```
 <SourceFileList>
    <SourceFile>MyFileName.cs</SourceFile>
    <Settings>
      <Analyzers>
        <Analyzer AnalyzerId="Microsoft.StyleCop.CSharp.MaintainabilityRules">
          <Rules>
            <Rule Name="FileMayOnlyContainASingleNamespace">
              <RuleSettings>
                <BooleanProperty Name="Enabled">False</BooleanProperty>
              </RuleSettings>
            </Rule>
          </Rules>
        </Analyzer>
      </Analyzers>
    </Settings>
  </SourceFileList> 
```

这也不起作用。

但是，我相信这可能是设计使然。我发现了一个[StyleCop 错误报告](http://stylecop.codeplex.com/workitem/7107)，该报告建议该`SourceFileList`标签不能在高于项目级别的级别上使用。

考虑到这些信息，我尝试`Settings.StyleCop`在项目级别添加一个文件。

仍然没有喜悦。

我现在正在研究`StyleCopOverrideSettingsFile`标签是否会取消所有其他设置文件。这似乎是合乎逻辑的，但如果是这样，我所看到的行为将意味着不可能`SourceFileList`在也使用`StyleCopOverrideSettingsFile`. 或者，可能只是`Settings.StyleCop`文件名错误，或者我把它放在了错误的位置（我把它放在 csproj 文件旁边。

编辑（20130425）：

最终我放弃了。有问题的代码是由 Visual Studio 模板文件 (.TT) 自动生成的，因此我付出了额外的努力，使模板代码将命名空间拆分为单独的文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-24T23:16:02.427

您需要设置抑制的范围。在这种情况下，请使用“模块”。

```
[module: System.Diagnostics.CodeAnalysis.SuppressMessage("StyleCop.CSharp.MaintainabilityRules", "SA1403:FileMayOnlyContainASingleNamespace", Justification = "This is a generated file which generates all the necessary support classes.")] 
```

我从以下页面中的“全局级别抑制”部分了解到这一点：http: [//msdn.microsoft.com/en-us/library/ms244717.aspx#sectionToggle4](http://msdn.microsoft.com/en-us/library/ms244717.aspx#sectionToggle4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T20:35:06.683

您需要在设置文件中创建一个[文件列表](http://stylecop.codeplex.com/wikipage?title=Using%20File%20Lists&referringTitle=Documentation)。

从文档中：

```
Now consider a situation where you’d like to disable some additional rules for a
couple of specific files in the project, Class3.cs and Class4.cs. In StyleCop
4.4, this can be accomplished by adding a <SourceFileList> section within the
settings file: 
```

```
<SourceFileList>
  <SourceFile>Class3.cs</SourceFile>
  <SourceFile>Class4.cs</SourceFile>
  <Settings>
    <Analyzers>
      <Analyzer AnalyzerId="Microsoft.StyleCop.CSharp.MaintainabilityRules">
        <Rules>
          <Rule Name="AccessModifierMustBeDeclared">
            <RuleSettings>
              <BooleanProperty Name="Enabled">False</BooleanProperty>
            </RuleSettings>
          </Rule>
        </Rules>
      </Analyzer>
    </Analyzers>
  </Settings>
</SourceFileList> 
```

在您的特定情况下，它应该类似于：

```
<SourceFileList>
  <SourceFile>YourFile.cs</SourceFile>
  <Settings>
    <Analyzers>
      <Analyzer AnalyzerId="Microsoft.StyleCop.CSharp.MaintainabilityRules">
        <Rules>
          <Rule Name="FileMayOnlyContainASingleClass">
            <RuleSettings>
              <BooleanProperty Name="Enabled">False</BooleanProperty>
            </RuleSettings>
          </Rule>
          <Rule Name="FileMayOnlyContainASingleNamespace">
            <RuleSettings>
              <BooleanProperty Name="Enabled">False</BooleanProperty>
            </RuleSettings>
          </Rule>
        </Rules>
      </Analyzer>
    </Analyzers>
  </Settings>
</SourceFileList> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-02T13:12:41.963

我发现了更简单的方法，也许它可以帮助某人。您可以右键单击您的项目并选择[StyleCop Settings](http://i.stack.imgur.com/7Ibys.png)。

弹出窗口将打开，您可以在其中自定义警告并选择要禁止的内容。在您的情况下，可以在维护性规则\文件内容中找到交战 SA1403

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-25T12:26:58.473

如果这是针对生成的文件，您只需在项目属性下的代码分析部分中选中“抑制生成代码的结果”框[![在此处输入图像描述](../Images/94a43987ca6d6162c0854d5005ce03c6.png)](https://i.stack.imgur.com/F3ZTl.png)

# android - 自动接受蓝牙文件传输

> ID：13517476
> 
> 赞同：3
> 
> 时间：2012-11-22T17:20:36.977
> 
> 标签：android, bluetooth

如果设备已配对，是否可以在 Android 中以编程方式自动接受蓝牙文件传输？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:30:43.277

您可以创建自己的应用程序来监听传入的文件传输并接受它们。必须将连接创建为不安全的连接，以使配对/传输过程自动化，无需用户交互。

[在这里](https://stackoverflow.com/questions/10103472/how-to-accept-bluetooth-received-file-in-android-application)阅读更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-10T05:30:22.573

创建一个作为服务器运行的新应用程序并不容易。

因此，我设法创建了一个使工作更轻松的应用程序。

如果您有**ROOTED DEVICE，** 请访问此[Github 存储库](https://github.com/KYHSGeekCode/Auto-Accept)并使用 XPosed 框架安装应用程序。

[在这里](https://stackoverflow.com/a/49379762/8614565)阅读更多。

**编辑**

从链接添加核心。

试试这个代码。

```
import android.util.*;
import de.robv.android.xposed.*;
import de.robv.android.xposed.callbacks.XC_LoadPackage.*;

import static de.robv.android.xposed.XposedHelpers.findAndHookMethod;

public class Tutorial implements IXposedHookLoadPackage
{

    private String TAG="TUTORIAL";
    public void handleLoadPackage(final LoadPackageParam lpparam) throws Throwable {
        if (!lpparam.packageName.equals("com.android.bluetooth"))
        {
            Log.i(TAG,"Not: "+lpparam.packageName);
            return;
        }
        Log.i(TAG,"Yes "+lpparam.packageName);  

        findAndHookMethod("com.android.bluetooth.opp.BluetoothOppManager", lpparam.classLoader, "isWhitelisted", String.class,new XC_MethodHook() {
                @Override
                protected void beforeHookedMethod(MethodHookParam param) throws Throwable {
                    Log.v(TAG,"HOOK DONE");
                    param.setResult(true); /* you can compare the sender address(String) with your computer and determine if you return true or just allow the original method to be called after this returns.*/

                }
            });

    }
} 
```

我测试过，**效果很好:)**

**链接**

[自动接受应用的 Dropbox 链接](https://www.dropbox.com/s/9fuviv2seahf8jf/app.apk?dl=0)

[项目文件的 Dropbox 链接 (zip)](https://www.dropbox.com/s/ttl2uqcnoysdwge/auto-accept.zip?dl=0)

[Xposed apk 网站](http://repo.xposed.info/module/de.robv.android.xposed.installer)

[Towelroot 网站根您的手机](https://towelroot.com)

# postgresql - 允许 Web 用户从 Postgresql 动态创建报告

> ID：13517478
> 
> 赞同：1
> 
> 时间：2012-11-22T17:20:40.403
> 
> 标签：postgresql, report

我有一个带有 Postgresql 后端的 Web 应用程序。为了简单起见，假设它是一个带有 Web 服务器日志的表（实际上是表和引用的混合）。由于我的用户对该表中的不同数据有不同的需求，我正在考虑实现一个 Web 前端，他们可以在其中按需运行自己的报告（即启动后台作业来为他们运行它......有些查询可能很慢，因为实例子选择同一个表，聚合等）。

是否有实施此类自定义报告工具的最佳实践？

我正在考虑以下情况作为可能的解决方案：

*   用户构建查询并选择他/她想要的字段，该字段被翻译成 SQL 查询
*   SQL 将查询结果选择到一个名为“report_randomname479472984”的新表中，该表作为后台作业运行，甚至可能将表名添加到包含有关报告的一些元信息的报告表中。
*   Web 界面列出所有名称以“report_”开头的表作为可用报告或查询有关可用报告表的元信息表。
*   当用户显示报告时，网页将构建为 html 表，其中数据库中的每个可用列都是 html 表中的列

这是从 SQL 后端创建动态按需报告的一种不错的方法吗？执行此操作时我需要注意什么（SQL 注入除外）？

有什么方法可以强制元表的完整性，以便每个 report_ 始终存在一行*，并且元表中的所有行实际上都指向一个有效的 report_*表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:42:58.433

恕我直言，您应该做的第一件事 - 搜索报告构建、日志处理、OLAP 等现有解决方案......

他们有很多。免费和付费。我敢打赌，你会找到一个适合你的任务的。

它将为您节省大量时间并为您的客户提供高质量的解决方案。

# linux - 使用命令 tc 对所有数据包的固定延迟量

> ID：13517484
> 
> 赞同：1
> 
> 时间：2012-11-22T17:21:03.840
> 
> 标签：linux, linux-device-driver

我尝试使用此命令为所有数据包添加固定量的延迟（# tc qdisc add dev eth0 root netem delay 100ms）

输入后显示“找不到设备“eth0”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:27:18.047

输入命令

> ifconfig -a

并检查接口名称。也许您没有像 eth0 那样的它，而是在 eth1 上配置了它

您也可以检查配置

> /etc/网络/接口

如果您正在使用 debian/ubuntu 系统。

给我们一些更多的信息。

# ruby-on-rails - 如果我不向迁移方法添加“默认”，字段值是否会为空？

> ID：13517494
> 
> 赞同：0
> 
> 时间：2012-11-22T17:21:44.273
> 
> 标签：ruby-on-rails, migration, rails-migrations

这是我的迁移：

```
def change
  create_table :activities do |t|
    t.integer :week
    t.decimal :jog, :precision => 3, :scale => 1
    t.integer :pushups
    t.integer :situps
    t.decimal :bicycl, :precision => 3, :scale => 1
    t.integer :squats
    t.integer :lunges
    t.integer :ical
    t.integer :bcal
    t.integer :foodid
    t.integer :bmi
    t.decimal :bmr, :precision => 5, :scale => 2
    t.references :user
    t.timestamps
  end

  add_index :activities, :user_id
end 
```

我想要的只是在创建对象时为这些字段设置**0值。**这是 ruby​​ 的默认行为还是我仍然需要添加默认 => 0，以确保它们不会为空？事实上，我不想开始检查变量是否为空。

我做了一些研究，但我仍然不明白它是如何工作的。

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:24:39.517

您必须将每列的默认值显式设置为零，否则默认值为空/空。

```
t.integer :ical, :default => 0 
```

# java - Microsoft CRM Java

> ID：13517495
> 
> 赞同：2
> 
> 时间：2012-11-22T17:21:48.287
> 
> 标签：java, crm, live, microsoft-dynamics

Hi I'm trying to connect to crm online with my microsoft 365 login using java. I use the sample code given in java2crmcrud in crm sdk. I have replaced the myliveid@hotmail.com, mypassword and mycrmonlineinstance with the 365 credentials but the server responds as

Applies To:urn:crmemea:dynamics.com Policy:MBI_FED_SSL Issue Uri:https://login.live.com/extSTS.srf

```
<?xml version="1.0" encoding="utf-8" ?><S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wst="http://schemas.xmlsoap.org/ws/2005/02/trust" xmlns:psf="http://schemas.microsoft.com/Passport/SoapServices/SOAPFault"><S:Body><S:Fault><S:Code><S:Value>S:Sender</S:Value><S:Subcode><S:Value>wst:FailedAuthentication</S:Value></S:Subcode></S:Code><S:Reason><S:Text xml:lang="en-US">Authentication Failure</S:Text></S:Reason><S:Detail><psf:error><psf:value>0x80048821</psf:value><psf:internalerror><psf:code>0x80041012</psf:code><psf:text>The entered and stored passwords do not match.&#x000D;&#x000A;</psf:text></psf:internalerror></psf:error></S:Detail></S:Fault></S:Body></S:Envelope>
Exception in thread "main" java.lang.NullPointerException
    at java2crmpack.LiveIDManager.getValueFromXML(LiveIDManager.java:257)
    at java2crmpack.LiveIDManager.authenticateWithLiveID(LiveIDManager.java:183)
    at java2crmpack.Main.main(Main.java:85) 
```

do I need to change or add anything. I guess the 365 accounts authentication are not same as live login authentication in crm. any help will b appreciated thank you.

# java - java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef

> ID：13517497
> 
> 赞同：11
> 
> 时间：2012-11-22T17:21:54.523
> 
> 标签：java, reflection, noclassdeffounderror, corba

I am seeing `java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef` when I am calling the method `getMethod` of the `java.lang.Class`. I am trying to get the `getEmsSession` method in `EmsSeeionFactory_I` of TMF specific jars using reflection. But when I checked for the class in the `jacorb.jar`, `org/omg/CORBA/InterfaceDef.class` is available on the class path. I have seen in other forums and I am seeing no answer for the same question in those forums as well. It looks like this exception being thrown from native VM code. I am left with no clue now. Any Ideas ? Complete stack trace is as below

```
java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
        at java.lang.Class.getMethod0(Class.java:2670)
        at java.lang.Class.getMethod0(Class.java:2688)
        at java.lang.Class.getMethod(Class.java:1603) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:52:49.903

NoClassDefFoundError 表示在编译时找到了该类，但在运行时未找到。大多数情况下，运行时环境的类路径和编译环境的类路径之间存在差异。在你找到差异并修复它之后它会起作用。

如果您检查过并且 100% 确定类路径是相同的，那么错误会更加棘手，您可以阅读本教程来解决问题：http: [//javarevisited.blogspot.be/2011/06/noclassdeffounderror-异常-in.html](http://javarevisited.blogspot.be/2011/06/noclassdeffounderror-exception-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-11T12:16:49.750

安装或升级自定义应用程序使用的 Java 版本后，会生成以下错误：

```
Caused by: java.lang.NoClassDefFoundError: org/omg/CORBA/UserException 
```

出现此问题的原因是 java.corba 模块（例如，org.omg.CORBA* 包）在 Java 9 中已被弃用。在 Java 11 中，该模块不再可用。

弃用模块意味着默认情况下，模块中的类在类路径中不可用。但是，您可以通过在 javac 或 java 命令行中包含 --add-module java.corba 选项将它们添加到类路径中。

注意：此选项在 Java 9 和 Java 10 中可用。CORBA 模块在 Java 11 中不可用。但是，有一种解决方法可以让您为 Java 11 添加这些模块。请参阅以下 Java 9 和 10 示例，以及 Java 11 的解决方法。

Java 9 和 10 的示例：

在 Java 9 和 10 中，您需要更改此命令：

```
jdk-9.0.4/bin/java -classpath "log4j.jar;sas.core.jar;sas.security.sspi.jar;sas.svc.connection.jar" javaclass 
```

当您包含 --add-module java.corba 时，命令如下所示：

```
jdk-9.0.4/bin/java --add-modules=java.corba -classpath "log4j.jar;sas.core.jar;sas.security.sspi.jar;sas.svc.connection.jar" javaclass 
```

Java 11 的解决方法：

要将 CORBA 模块添加到 Java 11，您必须从在线资源外部下载 GlassFish CORBA JAR 文件并将它们添加到 Java 11 的类路径中。以下列表显示了您需要的五个 GlassFish JAR 文件：

```
glassfish-corba-internal-api.jar
glassfish-corba-omgapi.jar
glassfish-corba-orb.jar
pfl-basic.jar
pfl-tf.jar 
```

[http://support.sas.com/kb/63/716.html](http://support.sas.com/kb/63/716.html)

# ruby-on-rails - refinery cms using custome devise views and controllers

> ID：13517498
> 
> 赞同：1
> 
> 时间：2012-11-22T17:22:00.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, refinerycms

I have used [refinery_cms](http://refinerycms.com/) with my Rails 3.2.8 app. It is configured correctly and it is also working fine. But now I want to implement all my devise views and controllers explicitly as I will be modifying them a bit.

So for that I followed this article

[http://sdownie.com/blogs/integrating-refinery-rails-3-2-into-your-existing-rails-app](http://sdownie.com/blogs/integrating-refinery-rails-3-2-into-your-existing-rails-app)

After doing all the configuration mentioned in the above article, I am getting the following error and I have difficulty tracking the root cause:

This is the error:

```
undefined method `refinery' for #<#<Class:0xcdec518>:0xcdd4fd0> 
```

The above error occurs when I am removing the following line from routes.rb:

```
mount Refinery::Core::Engine, :at => '/' 
```

But if I am keeping the above line and visiting the page `http://localhost:3000/user/sign_up` , I'm getting the following error:

```
undefined method `user_registration_path' for # <ActionDispatch::Routing::RoutesProxy:0xe189634> 
```

Any idea on this will be really helpful

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:34:09.820

看来您正试图在现有的 Refinery 应用程序中添加一些控制器和视图，而不是将炼油厂集成到现有的普通应用程序中。在这种情况下，有几种可能性：

*   根据[指南](http://refinerycms.com/guides/extending-controllers-and-models-with-decorators)，通过编写装饰器向现有设计控制器添加新功能（我猜你知道炼油厂也依赖于设计宝石）
*   将所有其他功能作为可安装引擎，在[此 Railscast](http://railscasts.com/episodes/333-extending-refinery-cms)或任何其他来源中解释，与 Rails 3 中的引擎相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:54:01.470

大家好，这是一个传统的问题解决方案非常简单，请按照以下步骤操作。

```
(1)rake generate devise:views

(2)append "user" before helper urls for example if there is a helper url used in rails   forms

**new_registration_path** then update it as **new_user_registration_path** 

 Similarly whenever you get the same error then go to app/views/devise/ respective     template and check the url used there where error comes and update it as we updated above. 
```

希望这一切都有意义。

谢谢。

# eclipse - How to view scaladoc as part of eclipse

> ID：13517501
> 
> 赞同：3
> 
> 时间：2012-11-22T17:22:06.393
> 
> 标签：eclipse, scala

> **Possible Duplicate:**
> [How to configure scaladoc in eclipse juno?](https://stackoverflow.com/questions/12394471/how-to-configure-scaladoc-in-eclipse-juno)

Having downloaded eclipse and having installed scala plugins, i am now able to run and compile scala programs.

How can i get eclipse to actually show me the scaladoc, similar to how javadoc shows up?

![enter image description here](../Images/d4ef3916f106a799fc99ac3613a6907a.png)

# c# - 从具有用户当前位置的网站定向到谷歌地图

> ID：13517502
> 
> 赞同：0
> 
> 时间：2012-11-22T17:22:08.850
> 
> 标签：c#, google-maps, mobile

我真的很难为这个标题命名。我希望没事。

我有一个包含多个办公地点的网站。我想将用户发送到带有所选办公室位置的谷歌地图，并且我还想使用用户的位置。

本网站仅适用于手机。

我已经进行了一些研究，并且找到了一种可能的方法来做到这一点，但我不能但想知道，必须有一种更简单的方法来做到这一点。使用大量代码查看用户浏览器是哪种语言，然后以正确的语言将“当前+位置”传递到 href，考虑到它的 Google，这似乎很奇怪。

我现在正在使用以下 href，我将为办公室添加动态位置。

```
<a href="http://maps.google.com/maps?f=d&source=s_d&saddr=CURRENTLOCATION&daddr=OFFICELOCATION&hl=en&geocode=Ff7kxwMdn62eAClBW-CUmzFtRjG-TdPYIg6PMw%3BCVVCpEO5eoJYFdnnxwMd5LKeACEJ5__6cDooDym1URz6mzFtRjFiK54FolriNQ&mra=pe&mrcr=0&dirflg=w&doflg=ptm&sll=63.408475,10.396459&sspn=0.102044,0.33783&ie=UTF8&z=19
">Directions</a> 
```

它的当前位置我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:36:33.960

大多数智能手机都有 HTML 5 浏览器。您可以利用 HTML 5 Geolocation 规范来检索用户的当前位置。

[http://www.w3schools.com/html/html5_geolocation.asp](http://www.w3schools.com/html/html5_geolocation.asp)

然后将纬度/经度直接发送到谷歌地图，或者使用谷歌地图rest api进行反向地理编码查找。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:36:29.510

我不建议从您的 Web 应用程序中打开本机应用程序，我有一个客户想要这样做，这是一种糟糕的体验。你也不能很好地控制结果，当然你是在强迫用户离开你的网络应用程序，这意味着他们可能不会回来。

我想很多人不认为他们可以在他们的网络应用程序中使用地图，但你绝对可以，而且效果很好。该代码与您在桌面上时没有什么不同。

[http://professionalaspnet.com/archive/2012/05/25/A-Study-Using-The-HTML5-Geolocation-API.aspx](http://professionalaspnet.com/archive/2012/05/25/A-Study-Using-The-HTML5-Geolocation-API.aspx)

# sql - SQL SELECT and Stored Procedure integration

> ID：13517503
> 
> 赞同：0
> 
> 时间：2012-11-22T17:22:11.503
> 
> 标签：sql, sql-server, tsql

> **Possible Duplicate:**
> [SELECT FROM stored procedure?](https://stackoverflow.com/questions/3730718/select-from-stored-procedure)

How should I include a stored procedure in a T-SQL syntax?

```
select * from CITY_TABLE C where 
    COUNT_PEOPLE_PROCEDURE(C.ID) > 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:26:37.277

您不能像这样将存储过程包含在查询中。

相反，您可以制作标量函数

```
create function COUNT_PEOPLE_FUNCTION
(
    @ID int
)
returns int
as
begin
    declare @Result int

    <... your code here ...>

    return @Result
end 
```

接着

```
select * from CITY_TABLE C where COUNT_PEOPLE_FUNCTION(C.ID) > 3 
```

但是，实际上，它可能会减慢您的查询速度，因为将为每一行单独调用标量函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:30:53.360

根据您的评论，如果您需要获取仅有 n 个出现的记录，您可以使用这样的子查询：

```
SELECT * FROM CITY_TABLE WHERE IDPerson IN (
    SELECT IDPerson FROM CITY_TABLE GROUP BY IDPerson HAVING COUNT(*) > 3
) 
```

显然我不知道确切的列名，但这是我的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:29:02.907

正如其他人已经说过的那样，您不能使用这样的存储过程，我建议您尽可能使用函数；如果您不能使用函数（即使可以），我建议您将此页面作为有用的阅读材料：

[如何在存储过程之间共享数据](http://www.sommarskog.se/share_data.html)

# r - 在 data.frame 的列上 lop %in%

> ID：13517511
> 
> 赞同：0
> 
> 时间：2012-11-22T17:22:39.477
> 
> 标签：r

我处于这样的情况：

DF1：

> ```
>  "G1"            "G2"  
>   SEP11          ABCC1      
>   214223_at      ADAM19     
>   COPS4          BIK 
>   ACE            ALG3
>   EMP3           GGH 
> ```

DF2

> ```
>  "S1"            "S2"  
>   SEP11          0.1858      
>   ADAM19         0.131        
>   COPS4          0.1143 
>   ACE            0.119
>   GGH            0.1214 
> ```

我想要以下输出：

> ```
>  "G1"            "S2"        "G2"           "S2"
>   SEP11          0.1858      ADAM19         0.131         
>   COPS4          0.1143      GGH            0.1214
>   ACE            0.119 
> ```

对于 DF1 的第一列，我尝试了以下代码：

```
 DF1 = read.delim("...", header = T)   
  DF2 = read.delim("...", header = T)      
  INT = intersect(DF1$G1, DF2$S1)            
  dx = DF2$S1 %in% int            
  out = DF2[idx]    
  write.table(...) 
```

现在，我想对 DF1 的一列、DF1 的所有列应用简单代码的“逻辑”，而不是一一应用以获得所需的输出。如何做到这一点？还有另一种最简单的方法吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:26:36.507

此命令返回数据帧列表，每列一个`DF1`：

```
lapply(DF1, function(x) DF2[na.omit(match(DF2[[1]], x)), ])

$G1
     S1     S2
1 SEP11 0.1858
3 COPS4 0.1143
4   ACE 0.1190

$G2
      S1     S2
2 ADAM19 0.1310
5    GGH 0.1214 
```

# javascript - Google map v3 Geocoder 向后兼容

> ID：13517514
> 
> 赞同：0
> 
> 时间：2012-11-22T17:23:20.610
> 
> 标签：javascript, google-maps-api-3

> **可能重复：**
> [google.maps.Geocoder.geocode() geometry.location lat/lng 属性名称经常更改](https://stackoverflow.com/questions/13499111/google-maps-geocoder-geocode-geometry-location-lat-lng-property-names-change-f)

我在我的应用程序中使用 Google Map v3 及其地理编码器 api。我使用这个 url 来引用 api： [http ://maps.google.com/maps/api/js?key=key&sensor=false](http://maps.google.com/maps/api/js?key=key&sensor=false)

以下代码曾经运行良好：

```
 geocoder.geocode( 
    {'address': address }, function(data, status) 
    { 

            var lat = data[0].geometry.location.Ya;
            var lng = data[0].geometry.location.Za;
              }); 
```

但由于 11 月 18 日 api 更改，此代码无法再获取 lat 和 lng 信息：

```
var lat = data[0].geometry.location.Ya;
var lng = data[0].geometry.location.Za; 
```

我需要使用：

```
var lat = data[0].geometry.location.$a;
var lng = data[0].geometry.location.ab; 
```

我了解该问题可以通过以下方式解决：

```
var latlng = data[0].geometry.location;
var lat = latlng.lng();
var lng = latlng.lat(); 
```

但是继续更改变量的名称是否很奇怪？这发生在 10 月 22 日，现在再次更改。我只是想知道以前是否有人遇到过类似的问题？是否有带有版本号的 Google Map v3 javascript URL，以便我不需要使用最新版本？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:28:03.517

通过以下方式加载 Google API：

```
<!--load Google API-->
<script type="text/javascript" src="https://apis.google.com/js/client.js"></script> 
```

然后转到 API 控制台，创建您的新项目并启用您需要的 Google API，在您的情况下为 Gmaps V3 api（您会看到打开/关闭按钮以启用您需要的服务）

[https://code.google.com/apis/console](https://code.google.com/apis/console)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:48:21.273

我很奇怪你为什么要访问内部变量。Google 更改了 Google Maps API 的 Javascript 库，即使版本相同。他们编译他们的代码。编译器，我认为是谷歌闭包编译器，每次用户指定“优化=高级”时都会生成随机变量名称。

要了解编译器行为，您可以在此处尝试 Closure Compiler。 [http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

这是一个示例代码。

```
function MyFunc(prefix) {
  this.prefix_ = prefix;
}

MyFunc.prototype.helloWorld = function() {
  alert(this.prefix_ + " world");
};

MyFunc.prototype.sayHello = function() {
  alert(this.prefix_);
};

var myFunc = new MyFunc("Hello");
myFunc.helloWorld();
myFunc.sayHello(); 
```

当你指定“Optimization=Simple”时，你会得到这样的：

```
function MyFunc(a){this.prefix_=a}MyFunc.prototype.helloWorld=function(){alert(this.prefix_+" world")};MyFunc.prototype.sayHello=function(){alert(this.prefix_)};var myFunc=new MyFunc("Hello");myFunc.helloWorld();myFunc.sayHello(); 
```

但是如果你指定“Optimization=Advanced”，你会得到这样的：

```
var a=new function(){this.a="Hello"};alert(a.a+" world");alert(a.a); 
```

在高级模式下，编译器会自动更改变量名。这就是为什么内部变量名总是被改变的原因。

# iphone - How to group a tableview with dynamicaly sections in iOS

> ID：13517515
> 
> 赞同：1
> 
> 时间：2012-11-22T17:23:24.400
> 
> 标签：iphone, ios, xcode, json

I call a webservice and get a nice JSON in return. This JSON lists a couple of reports with category.

The big question is how I can make a nice looking tableview with this, grouped by category. Im new to iOS, and I am really stucked at this point.

I save the json in an array like this:

```
tableData = [NSJSONSerialization JSONObjectWithData:dataWebService options:kNilOptions error:&error]; 
```

And then I sort the list:

```
NSArray *sortedArray;
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"Category"  ascending:YES];
sortedArray = [tableData sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]]; 
```

The json I get is this:

```
{
        Category = Faktura;
        about = "Fakturablankett med giro med utvalg p\U00e5 fra-til fakturanr";
        name = Faktura;
        reportendpoint = "https://unionline.unimicro.no/uni24Report/Report.aspx";
        reportid = 16;
    },
            {
        Category = Faktura;
        about = "Fakturablankett med giro med utvalg p\U00e5 fra-til fakturanr";
        name = "Faktura med sidenummer";
        reportendpoint = "https://unionline.unimicro.no/uni24Report/Report.aspx";
        reportid = 19;
    },
            {
        Category = Faktura;
        about = "Liste over fakturaer med status og mva-detaljer. Utvalg p\U00e5 fra-til fakturanr.";
        name = Fakturajournal;
        reportendpoint = "https://unionline.unimicro.no/uni24Report/Report.aspx";
        reportid = 15;
    },
            {
        Category = "Journaler og Kontoutskrifter";
        about = "";
        name = "Kontoutskrift hovedbok";
        reportendpoint = "https://unionline.unimicro.no/uni24Report/Report.aspx";
        reportid = 4;
    },
            {
        Category = "Journaler og Kontoutskrifter";
        about = "";
        name = "Kontoutskrift kunder";
        reportendpoint = "https://unionline.unimicro.no/uni24Report/Report.aspx";
        reportid = 5;
    } 
```

I would like to list these "name" in a tableview, grouped by "Category". I need to sort the category an list the reports who belongs to these categories.

There is many more categories, but I didn´t paste them all.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:20:28.363

您必须创建一个具有类别数组列表的全局数组。

使用称为类别数组的元素创建全局数组，使用`didReceiveResponseJson:`和`nameDitionaryAllReadyExist:`方法。

在 UITableView 中查看以上 json 数据：

```
NSMutableArray* tableArray;//Declare this array globally and allocate memory in viewdidload

-(NSMutableArray *)nameDitionaryAllReadyExist:(NSString *)name {

    for(NSMutableArray *nameArray in tableArray){

        for(NSDictionary* nameDict in nameArray) {
            if([[nameDict objectForKey:@"Category"] isEqualToString:name])

                //return the existing array refrence to add
                return nameArray;
        }
    }

    // if we dont found then we will come here and return nil
    return nil;
}

-(void)didReceiveResponseJson:(NSArray *)jsonArray {

    for(NSDictionary* nameDict in jsonArray) {

        NSMutableArray* existingNameArray=[self nameDitionaryAllReadyExist:[nameDict objectForKey:@"Category"]];
        if(existingNameArray!=nil) {
            //if name exist add in existing array....
            [existingNameArray addObject:nameDict];
        }
        else {
            // create new name array
            NSMutableArray* newNameArray=[[[NSMutableArray alloc] init] autorelease];
            // Add name dictionary in it
            [newNameArray addObject:nameDict];

            // add this newly created nameArray in globalNameArray
            [tableArray addObject:newNameArray];
        }
    }

    //so at the end print global array you will get dynamic array with the there respetive dict.
    NSLog(@"Table array %@", tableArray);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    tableArray=[[NSMutableArray alloc] init];

    NSString* path=[[NSBundle mainBundle] pathForResource:@"JsonData" ofType:@"json"];

    NSDictionary* tableData=[NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:path] options:kNilOptions error:nil];

    //NSLog(@"Table Array- %@",tableData);

    NSArray* dataArray = [tableData objectForKey:@"data"];

    [self didReceiveResponseJson:dataArray];
}

#pragma mark
#pragma mark UITableViewDataSource

//@required

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSArray* array=[tableArray objectAtIndex:section];
    return [array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        NSArray* array=[tableArray objectAtIndex:indexPath.section];

        NSDictionary* item=[array objectAtIndex:indexPath.row];
        NSString* name=[item valueForKey:@"name"];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];
    if (cell == nil) {
        // No cell to reuse => create a new one
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"] autorelease];        
        // Initialize cell
    }

    // Customize cell
    cell.textLabel.text = name;

    return cell;
}

//@optional

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return [tableArray count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

        NSArray* array=[tableArray objectAtIndex:section];
    if([array count]) {
        NSDictionary* item=[array objectAtIndex:0];
    return [item valueForKey:@"Category"];
    }
    else
        return nil;
} 
```

# ruby-on-rails - Will this route work in ruby on rails?

> ID：13517517
> 
> 赞同：0
> 
> 时间：2012-11-22T17:23:28.767
> 
> 标签：ruby-on-rails, ruby, web, routes, ruby-on-rails-3.2

I am making a twitter like web app in rails, following a course. I am trying to change the path but every time i start the server i get an eror and the server shuts down.

this is the path:

```
ActionController::Routing::Routes.draw do |map|
  map.resources :posts
  map.connect ':controller/:action/:id'
  map.connect ':controller/:action/:id.:format'
end 
```

I have done routes before but they haven't looked like that. I think this is a ruby route where as i'm on rails. I'm not too sure. I thought they would work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:34:15.973

您的资源看起来像这样

```
PlatformAuth::Application.routes.draw do
  resources :posts
end 
```

对于 map.connect 它更像是一条命名路线，它看起来像

```
match ':controller(/:action(/:id(.:format)))' 
```

这将通过获取请求使您的所有控制器操作可用。不确定这是否真的想要你想要的。

# c# - Variable does not exist in the current context while debugging

> ID：13517521
> 
> 赞同：27
> 
> 时间：2012-11-22T17:23:51.413
> 
> 标签：c#, .net, debugging, properties, visual-studio-2012

I inserted two temp variables and want to see their values, but I can't. I could solve it by placing it somewhere else, but I'm interested why this behaviour exists.

```
 public float Value
    {
        get
        {
            float result = Memory.ReadFloat(Address);

            double Radian = Math.Round(result, 2); // **BREAK POINT HERE**
            double Degree = Math.Round(Math.Round((double)(result * 180 / Math.PI)), 2); // **BREAK POINT HERE**

            return result; // **BREAK POINT HERE**
        }
    } 
```

I break on all three points, but I can't get Visual Studio 2012 to show me the values. Only result will show up on the locals window, there is no variable called Radian or Degree.

If I add a watch for Radian variable for example, I get this message with a red cross icon:

> Radian - The name 'Radian' does not exist in the current context

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-22T21:08:38.550

JIT 编译器可能已经优化掉了局部变量。由于您使用的是 Visual Studio，因此您可以将配置切换到调试并重新构建。

如果没有，您可以配置 JIT 编译器以禁用优化并生成跟踪信息 - 请参阅[此处了解如何设置配置](http://msdn.microsoft.com/en-us/library/9dd8z24x.aspx)。这应该允许您在将调试器附加到进程时看到局部变量。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-01-22T07:28:53.547

我在 VS2012 中遇到了另一种情况，导致变量在调试模式下“消失”：

确保你没有这个：

```
if(false)
   {
   .
   }
else
   {
   //Code here will be optimized and variables will not be available.
   } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-10-20T20:05:41.017

如果您尝试在发布版本中进行调试（发布模式而不是调试模式），您将收到此错误。将您的解决方案配置更改为调试（任何 CPU），您将能够在即时窗口中看到变量值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-11T16:47:44.220

我有一个 .NET Standard 项目，对我有用的是：

*   项目属性。
*   构建选项卡。
*   高级按钮（一直在右下角）。
*   将“调试信息”选项更改为完整。
*   [![项目清单](../Images/fa020bf292bf16ed41320e2e65a0323e.png)](https://i.stack.imgur.com/EpuLD.png)

它已设置为“便携式”。将其更改为“完整”允许我再次在“监视”和“立即”窗口中查看变量。

不确定它是否相关，但我最近将该项目从 PCL 转换为 .NET Standard。也许在翻译中丢失了一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-06T20:23:33.750

我将解决方案配置更改为调试（任何 CPU），但这不是问题。升级到 Visual Studio 2017 后，我以为我处于调试状态，但还有一个更简单（但很重要）的步骤。（这对大多数人来说可能很明显，但我错过了。）在“解决方案配置”设置为“调试”的地方，我还必须单击“调试”旁边的向下箭头并选择“配置管理器...”，然后在相应的弹出窗口“配置”仍设置为“发布”——我必须将其更改为“调试”并单击“关闭”按钮。从那里重新运行允许我在调试时查看所有变量。

# c++ - Remove duplicate entries

> ID：13517523
> 
> 赞同：1
> 
> 时间：2012-11-22T17:24:05.193
> 
> 标签：c++, stl, indexing, complexity-theory, multimap

I need to insert some entries into a container, but, in case the entry has two specific attributes in common with one of the previously inserted entries : it will be considered as a dupe.

The tricky part is that in case I find any dupe, I don't want any entry sharing these attributes values to be part of the container at all (not even the first one, which wasn't a dupe as it was first discovered).

I was thinking about using a multimap, with the two attributes in a pair as a key (assuming the two attributes have a well defined operator==) and a pointer to the entry as a value to index all the entries.

Once I have scanned all the entries and fulfilled my multimap, I would have iterated all over the multimap and with the help of equal_range and std::distance added, in the output container, only the entries for which I have a single occurrence.

Is that the best way of doing it in terms of efficiency, assuming I only want to use standard stl containers and tools, or eventually boost libraries ?

```
typedef std::pair<attribute1,attribute2> key;
multimap<key, entry*> multimap;
typedef multimap<key, entry*>::iterator MultimapIter; 

// process all the entries and fullfill the multimap

MultimapIter iter;
for(iter = multimap.begin(); iter != multimap.end(); ++iter)
{
    std::pair<MultimapIter,MultimapIter> keyRange = 
            multimap.equal_range(iter->first);

    if(std::distance(keyRange.first, keyRange.second) != 1)
        iter = --keyRange.second;
    else
        // Fill the output container with the entry
}

// Destroy the multimap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:33:15.287

我会使用地图（不是多地图），如下所示：

```
地图我的地图；
对于（所有条目）
{
  pair::iterator,bool> res = mymap.insert(entry);
  如果 (!res->second)
  {
    // 未插入值，此处必须已存在重复值。
    // 通过将入口指针归零来标记重复
    iter->first->second = NULL；
  }
}
// 现在使用零指针从 mymap 中删除所有项目，并且您有一个带有唯一条目的地图。

```

# java - 如何将相同的 jrxml 文件与 Java 代码一起使用。？

> ID：13517524
> 
> 赞同：0
> 
> 时间：2012-11-22T17:24:08.637
> 
> 标签：java, ireport

我在用

> 文件名.jrxml

文件来创建一个简单的报告

> itext4.8.0

它工作正常，但我正在传递这样的参数。

> $P{userId}]

现在我想用同样的

> 文件名.jrxml

用java代码我怎么能做到这一点？我主要关心的是，当我在 ireport 中运行报告时，我们如何像在 ireport 中一样传递参数值，它正在为参数打开弹出窗口并且我正在输入值。但是在 Java 代码中如何传递该参数？

**注意：-我不想通过报告的连接。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:19:35.093

我在这篇[博文中找到了解决方案](http://suhasjavablog.wordpress.com/2011/11/23/jasper-reports-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:38:40.647

下载 jasperreport 引擎

```
final Map<String,Object> parameter = new HashMap<String, Object>();
parameter.put("userId", 1l);
JasperFillManager.fillReport("filename.jasper", parameter, getData());

// set your own params for this method
public JRDatasource getData() { 
  // initialize a collection of Objects
  // Oh yes the query
  final Query query = getQuery("from SomeObject");
  final List<SomeObject> collection = (List<SomeObject>)query.list();
  return new JRBeanCollectionDataSource(collection);
} 
```

另一种可能

```
JasperFillManager.fillReport(jasperReport, parameter, connection); 
```

# security - gcc -D_FORTIFY_SOURCE=1 和 -D_FORTIFY_SOURCE=2 之间的区别

> ID：13517526
> 
> 赞同：77
> 
> 时间：2012-11-22T17:24:16.647
> 
> 标签：security, gcc, glibc

有人能指出`gcc -D_FORTIFY_SOURCE=1`和之间的区别`-D_FORTIFY_SOURCE=2`吗？我想`=2`是不是更安全？我一直无法找到逐点列出差异的列表。

我还阅读了`-D_FORTIFY_SOURCE=2`应该与 一起使用的内容`-O2`，否则并非所有功能都可用。同样在这里，我还没有找到详细说明回归的列表。我特别有兴趣编译，`-Os`因为目标是没有那么多闪存的设备。

欢迎任何关于记录在哪里的提示！

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-05-17T07:55:44.330

来自功能测试宏的手册页 ( [`man 7 feature_test_macros`](http://man7.org/linux/man-pages/man7/feature_test_macros.7.html))

> ### **`_FORTIFY_SOURCE`**（从 glibc 2.3.4 开始）
> 
> 定义此宏会导致在使用各种字符串和内存操作函数（例如`memcpy`，、、、、、、、、、、、、、、、、及其宽字符变体）时 `memset`执行一些`stpcpy`轻量级检查以检测一些缓冲区溢出错误。对于某些函数，会检查参数的一致性；例如，当指定的*标志*包括. 并非所有问题都被检测到，只是一些常见情况。`strcpy``strncpy``strcat``strncat``sprintf``snprintf``vsprintf``vsnprintf``gets``open`***`O_CREAT`***
> 
>  *如果**`_FORTIFY_SOURCE`**设置为 1，编译器优化级别为 1 ( *`gcc -O1`*) 及更高，则执行不应更改符合程序行为的检查。
> 
> 设置为 2 时，**`_FORTIFY_SOURCE`**会添加更多检查，但某些符合要求的程序可能会失败。
> 
> 一些检查可以在编译时执行（通过在头文件中实现的宏逻辑），并导致编译器警告；其他检查在运行时进行，如果检查失败，则会导致运行时错误。
> 
> 使用此宏需要编译器支持，`gcc`从 4.0 版开始提供。*

 *此外，文章[Enhance application security with FORTIFY_SOURCE](https://access.redhat.com/blogs/766093/posts/1976213)（2014 年 3 月）说：

*   `gcc -D_FORTIFY_SOURCE=1`仅在编译时添加检查（某些标头是必需的`#include <string.h>`）
*   `gcc -D_FORTIFY_SOURCE=2`还在运行时添加检查（检测到缓冲区溢出终止程序）

本质上，`_FORTIFY_SOURCE`级别 2 更安全，但编译策略风险稍高；如果您使用它，请确保您对编译后的代码进行了非常强大的回归测试，以证明编译器没有引入任何意外行为。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-08-01T18:46:51.883

[http://gcc.gnu.org/ml/gcc-patches/2004-09/msg02055.html](http://gcc.gnu.org/ml/gcc-patches/2004-09/msg02055.html)比[`feature_test_macros(7)`](http://man7.org/linux/man-pages/man7/feature_test_macros.7.html).

这是相关的摘录，为了清晰起见，经过轻微编辑/重新格式化：

> `-D_FORTIFY_SOURCE=1`和之间的区别`-D_FORTIFY_SOURCE=2` 是例如
> 
> ```
>  struct S {
>       struct T {
>         char buf[5];
>         int x;
>       } t;
>       char buf[20];
>   } var; 
> ```
> 
> 与`-D_FORTIFY_SOURCE=1`,
> 
> ```
>  strcpy (&var.t.buf[1], "abcdefg"); 
> ```
> 
> 不被视为溢出（对象是整体`var`），而与`-D_FORTIFY_SOURCE=2`
> 
> ```
>  strcpy (&var.t.buf[1], "abcdefg"); 
> ```
> 
> 将被视为缓冲区溢出。
> 
> 另一个区别是，`-D_FORTIFY_SOURCE=2`只有当它存储在只读内存中（通常是字符串文字，'s也可以）时，才允许`%n` 使用最常见系列函数的格式字符串，但通常当攻击者试图利用格式字符串时漏洞，将在攻击者可以写入的地方。`*printf``gettext``_("%s string %n")``%n`*

# python - How to find an object from a list

> ID：13517527
> 
> 赞同：1
> 
> 时间：2012-11-22T17:24:22.007
> 
> 标签：python, list, find

I used the following program to create a list of cities obtained from a website. Now I want to find the name of city (argument) from the list I created. How do I do that?

In other words, how do I find an object from a list? I tried: `listOfCities.find (city)`, I got an error as the attribute find was not found.

```
def weatherNow (city):
  import urllib
  connection = urllib.urlopen("http://weather.canoe.ca/Weather/World.html")
  weather = connection.read()
  connection.close()
  cityLoc = weather.find('class="weatherred"')
  cityEnd = weather.find("</a>", cityLoc)
  if city != -1:
    listOfCities = []
    while cityLoc != -1:
      cityNames = weather[cityLoc+19:cityEnd-1]
      listOfCities.append(cityNames)
      cityLoc = weather.find('class="weatherred"', cityLoc+1)
      cityEnd = weather.find("</a>", cityLoc)

  print listOfCities 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:52:12.120

检查是否`city`在`listOfCities`：

```
if city in listOfCities:
   # city is in the list 
```

要在列表中查找其索引：

```
 i = listOfCities.index(city) 
```

如果city`IndexError`不在`listOfCities`.

您可以使用 HTMLParser 来解析 html 而不是正则表达式。

### 完整示例

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from __future__ import unicode_literals
import cgi

try:
    from html.parser import HTMLParser
except ImportError: # Python 2
    from HTMLParser import HTMLParser

try:
    from urllib.request import urlopen
except ImportError: # Python 2
    from urllib2 import urlopen

class CitiesParser(HTMLParser):
    """Extract city list from html."""
    def __init__(self, html):
        HTMLParser.__init__(self)
        self.cities = []
        self.incity = None
        self.feed(html)

    def handle_starttag(self, tag, attrs):
        self.incity = tag == 'a' and ('class', 'weatherred') in attrs
    def handle_endtag(self, tag):
        self.incity = False
    def handle_data(self, data):
        if self.incity:
            self.cities.append(data.strip())

# download and parse city list
response = urlopen("http://weather.canoe.ca/Weather/World.html")
_, params = cgi.parse_header(response.headers.get('Content-Type', ''))
html = response.read().decode(params['charset'])

# find city
cities = CitiesParser(html).cities
for city in ['Ar Riyāḍ', 'Riyadh']:
    if city in cities:
        print("%s is found" % (city,))
        print("the index is %d" % (cities.index(city),))
        break
    else:
        print("%r is not found" % (city,)) 
```

# objective-c - AFJSONRequestOperation 失败，因为 Web 服务返回内容类型为 text/html 的 JSON

> ID：13517533
> 
> 赞同：3
> 
> 时间：2012-11-22T17:24:52.287
> 
> 标签：objective-c, ios, afnetworking

我正在尝试更新我的应用程序以使用 AFNetworking，但我需要使用的 web 服务将 JSON 作为文本/html 返回，当我尝试使用 AFJSONRequestOperation 时，这会中断：

```
Expected content type {(
    "text/json",
    "application/json",
    "text/javascript"
)}, got text/html 
```

无论如何在 AFNetworking 中覆盖它，以便我可以接受文本/html？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T18:13:25.787

是的，有可能，AFNetworking 支持添加可接受的内容类型。在 AFHTTPClient 子类的 init 方法中执行以下操作：

```
[AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObjects:@"text/html", nil]]; 
```

我的应用程序遇到了同样的问题，这使它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:37:07.283

我认为除非您完全了解框架的内部功能，否则您不应该这样做。根据经验，我可以告诉你，如果你把它打得那么糟糕，你可能会破坏很多东西，而且你必须从那一刻起维护自己的独立分支，失去更新到最新版本 AFNetworking 的好处未来，因此，除非您将它们集成到您的分支中，否则获取最新的错误修复和功能。

如果你现在只想让它工作，公平地说，继续尝试它是否有效（我怀疑）。我确信 AFNetworking 的其他部分期望内容类型为“text/html”，并且通过在不应该是的部分中添加另一个部分，您会遇到需要您越来越多地修补的冲突直到最后一刻。

老实说，试着改变你的服务器发送的内容类型，并按照他们应该做的事情去做。

另一种方法是在您的应用程序中设置一个“代理”（例如在手机中本地运行的小型服务器），以检索内容并将其传递给具有正确内容类型的 AFNetworking。尽管如此，这仍然会使事情变得过于复杂，但至少您不会自己修改框架，这是最后要做的事情。

# image - DataGridView 中的不良图像

> ID：13517534
> 
> 赞同：0
> 
> 时间：2012-11-22T17:24:54.513
> 
> 标签：image, datagridview, zooming

我编写了一个小应用程序来执行类似于 Outlook 的操作，查看硬盘驱动器上的 .msg 文件。我正在使用 dataGridView 显示文件夹中的消息，并且我想在左侧列中显示一个小图标以指示消息文件（或日历/联系人/等的不同图标）。我复制了一个小邮件项目图像并保存为 gif。但是当我将图像加载到 datagridview 中时，它看起来很糟糕——它或多或少是正确的，但质量很差。查看图片 - 在我的应用程序正上方的左上方是 IE（或任何其他编辑器）显示的图像文件，下面是我的应用程序，其中相同的图像文件显示效果不佳。我尝试过缩放/拉伸/正常，但它们看起来都差不多。有任何想法吗？谢谢

哦-刚刚意识到我不能发布图片。好吧，基本上坏版本看起来像好版本，但放大了一点而且不是特别好 - 模糊，颜色保真度有些损失等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:54:18.217

好的，我想通了 - 非常愚蠢。问题不在于 DataGridView，而在于我用来导入图像的 ImageList。菲尔

# jquery - jQuery Mobile Header - 如何重复-x a bg 并放置图像？

> ID：13517537
> 
> 赞同：0
> 
> 时间：2012-11-22T17:25:18.200
> 
> 标签：jquery, css, image, mobile, repeat

我需要设置我的标题。我正在尝试`repeat-x`作为背景并在没有运气的情况下放置图像。

**HTML：**

```
<div data-role="page" id="page1">
<div data-role="header">
    <div><img src="jquery-mobile/images/logo.png" class="ui-header"></div>
</div> 
```

**CSS：**

```
 .ui-header{
    background-image: url(http://www.mybizonline.co.il/book/tno/jquery-mobile/images/bg.jpg);
    background-repeat: repeat-x; 
    width: 1024px;
    height: 275px;
} 
```

它应该是这样的： [![预期外观](../Images/08f323aa2ef4e14d95fe5aed186992c0.png)](http://www.mybizonline.co.il/book/tno/jquery-mobile/images/stack.PNG)

**bg 重复到 x，bg 上的图像**

有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:30:55.810

html:

```
<div data-role="page" id="page1">
<div id="bg_wrapper" data-role="header">
    <img src="jquery-mobile/images/logo.png" class="ui-header">
</div> 
```

CSS：

```
#bg_wrapper {
    background: url('...') repeat-x;
    text-align: center;  // To center your img
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:12:44.957

如果添加，您可以将背景图像应用于您的 img

显示：块

到 CSS，但我建议将 ui-header 类应用到包装图像的 div 中：

[http://jsfiddle.net/8mv7V/](http://jsfiddle.net/8mv7V/)

```
<div data-role="page" id="page1">
<div data-role="header">
<div class="ui-header"><img src="http://www.mybizonline.co.il/book/tno/jquery-mobile/images/logo.png"></div>
</div> 
```

CSS：

```
.ui-header
{
background-image: url(http://www.mybizonline.co.il/book/tno/jquery-mobile/images/bg.jpg);
background-repeat: repeat-x;
height: 462px;
text-align: center;
} 
```

（PS 我认为你的背景图片，bg.jpg，可能在顶部有 8px 的偏差）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:35:45.063

为此`you have to do some work on image resizing`，我做了你想做的事情：

```
.ui-header{
   background: url(http://www.mybizonline.co.il/book/tno/jquery-mobile/images/bg.jpg) 0 -60px repeat-x; 
   width:500px;
   height: 275px;
   padding:0 254px;
   text-align:center;
} 
```

**`you can find out here:` [http://jsbin.com/aduxum/5/edit](http://jsbin.com/aduxum/5/edit)**

# python - 有没有人有一个很好的例子来说明如何使用 struct python 模块将一个 numpy 数组保存到文件中？

> ID：13517539
> 
> 赞同：3
> 
> 时间：2012-11-22T17:25:37.547
> 
> 标签：python, numpy, struct, save, pypy

我一直在尝试在使用 pypy 时将 numpy 数组保存到文件的最佳方法（这意味着我不能使用明显`numpy.save`的`numpy.savetxt`等，因为它们不受支持）。我尝试过使用 Pickle 模块（与 pypy 一起使用），但 Pickle 只会让我保存数据列表。虽然我可以使用`array.tolist()`，但当远离一维 numpy 数组时，这会变得复杂。

我知道 Struct 模块可用于保存和加载 numpy 数组，但我不知道如何解决这个问题，而且网上的信息似乎很少。

任何有用的提示/教程都会非常有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:45:01.833

使用 struct，您可以轻松地将整个数据数组转储或读取到磁盘，但您必须弄清楚如何存储元数据，即写入的项目数、每个项目的大小、数组的形状......

比如说，你的数组总是由 uint32 组成。给定这样一个数组`arr`，您可以将其写为：

```
f = open(filename, 'wb')
f.write(struct.pack('I', arr.ndim))
f.write(struct.pack('I' * arr.ndim, *arr.shape))
size = reduce(lambda x, y: x*y, arr.shape)
f.write(struct.pack('I' * size, *arr.ravel())) 
```

你可以把它读成

```
f = open(filename, 'rb')
ndim = struct.unpack('I', f.read(4))[0]
shape = tuple(struct.unpack('I' * ndim, f.read(4 * ndim)))
size = reduce(lambda x, y: x*y, shape)
arr = np.array(struct.unpack('I' * size, f.read(4 * size)).reshape(shape) 
```

你可以想出一个更复杂的方案来编码数据类型，数据的字节序......

此外，如果它们在您的系统中工作，则使用[numpy.fromfile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html)和[numpy.tofile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tofile.html)来实际转储整个数组非常方便。

# iphone - iTunes 连接应用程序图标

> ID：13517543
> 
> 赞同：1
> 
> 时间：2012-11-22T17:26:02.883
> 
> 标签：iphone, ios, itunes

我已将我的应用程序的新版本添加到 iTunes Connect。我注意到过了一会儿我的图标在 iTunes Connect 中看起来不同了。它现在在实际图标上方有某种阴影，看起来有光泽。我的图标现在看起来很奇怪，我不知道它是否会再次改变，或者它是否会在应用商店中看起来像这样。当我最初上传图标时，它的质量也很差（在itunes connect 更改后它变得更好）。我也不明白这一点，因为我上传了一个 1024x1024 png，对我来说看起来不错。

作为对此的附加问题，是否可以在我的应用通过审核后更改图标或描述？它会触发新的评论还是仅针对我上传的二进制文件进行评论。

提前谢谢，

库库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:44:53.813

Apple adds glossy effect automatically to your application icon. If you want to disable it - check project plist file and add entry:

```
Icon already includes gloss effects: YES 
```

No, it's not possible to change application name (the one that users see on their iPhones is embedded into your application), nor application icon without submitting new binary for review.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T06:56:08.873

当我提交我的应用程序的第一个版本时，我也发生了同样的情况。但是在我上传了应用程序的二进制文件后，该应用程序在**项目设置**中针对**图标****预先呈现**了复选标记。三天后我会**自动修复。**因此，如果您在**项目设置中****检查了预渲染**图标，则无需担心。很快就会修复。

 ******不，一旦您的应用程序进入审核，您就无法更改同一版本的图标或信息。您可以通过提交新版本来做到这一点。

干杯******

# java - 如何使用java api从云存储中获取多个文件到大查询

> ID：13517544
> 
> 赞同：1
> 
> 时间：2012-11-22T17:26:01.780
> 
> 标签：java, google-app-engine, google-bigquery, google-cloud-storage

我在云存储中有数据，我想将数据传输到大查询并获取统计信息。目前我正在使用 JobConfigurationLoad 来获取单个文件，这里是代码示例：

```
JobConfigurationLoad jobconfigurationqLoad = new JobConfigurationLoad();
jobconfigurationqLoad.setSkipLeadingRows(1); // First line are columns names
    jobconfigurationqLoad.setSourceUris(Lists.newArrayList("gs://my_app/folder_name/test_file.csv"));
jobconfigurationqLoad.setWriteDisposition("WRITE_APPEND");
jobconfigurationqLoad.setEncoding(PlatformConstants.DEFAULT_ENCODING);
jobconfigurationqLoad.setCreateDisposition("CREATE_IF_NEEDED");
jobconfigurationqLoad.setDestinationTable(tableReference);
**tableReference = my table in big query
jobconfigurationqLoad.setSchemaInline("field1:STRING,field2:STRING");

// JobConfiguration
JobConfiguration jobConfiguration = new JobConfiguration();
jobConfiguration.setLoad(jobconfigurationqLoad);

// JobReference
JobReference jobreference = new JobReference();
jobreference.setProjectId(PROJECT_ID);

// Job
Job insertJob = new Job();
insertJob.setConfiguration(jobConfiguration);
insertJob.setJobReference(jobreference); 
```

在“setSourceUris”中，我只想放置文件夹并获取那里的所有文件，但这似乎不起作用。我在google api中看到了一些关于获取存储桶内容的文档，但不仅仅是存储桶内的一个文件夹。这个[答案](https://stackoverflow.com/questions/13418076/get-list-of-files-in-cloud-storage-java)中有类似的东西。我在 java 中使用 GAE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:21:31.067

BigQuery API 的[sourceUris](https://developers.google.com/bigquery/docs/reference/v2/jobs#importing)方法要求您单独列出每个源 URI（无法提供单个 Google Cloud Storage 存储桶 URI）。

但是，是的，您可以使用 Google Cloud Storage API 来[提供对象 URI 列表](https://developers.google.com/storage/docs/json_api/v1/objects/list)。提供一个`prefix`参数来过滤结果列表。

请注意，您可以在单个加载作业中包含的最大文件数量为 500（每个单个加载请求的最大数据量为 1Tb - 请参阅[BigQuery 配额页面](https://developers.google.com/bigquery/docs/quota-policy#import)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:34:16.180

BigQuery API 具有属性：configuration.load.sourceUris[]，它是一个可以包含一个或多个文件的数组。名称必须是“完全限定名称，例如：gs://mybucket/myobject.csv”

有关更多信息，请查看： [https ://developers.google.com/bigquery/docs/reference/v2/jobs](https://developers.google.com/bigquery/docs/reference/v2/jobs)

所以，正如 Michael 所说：“使用 Google Cloud Storage API[提供对象 URI 列表](https://developers.google.com/storage/docs/json_api/v1/objects/list)。提供前缀参数来过滤结果列表。”

然后将文件名放在作业的 sourceUris 数组中。

# android - 列出未保持激活状态的项目主/详细信息流

> ID：13517545
> 
> 赞同：2
> 
> 时间：2012-11-22T17:26:20.867
> 
> 标签：android, arraylist, android-listfragment

我修改了主/明细流模板以显示我自己的列表数组。但是，现在，当我单击 listfragment 中的一个项目时，它并没有保持激活状态。

这是列表片段的代码。

```
package com.example.sample;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;

/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 *{@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

private static String courseName;
ArrayList<String> courseItems;
    ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    courseItems = new ArrayList<String>();
    adapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, courseItems);
    // TODO: replace with a real list adapter.
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    setListAdapter(adapter);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
}
public void addCourse(String courseName) {
    courseItems.add(courseName);
    adapter.notifyDataSetChanged();
}
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:32:51.957

你总是传入`android.R.layout.simple_list_item_1`你的列表适配器。这是一个*不*使用支持激活状态的选择器的布局。但是，您似乎就快到了，因为该片段表明您只是忽略了自己的 TODO 之一：

```
adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, courseItems);
// TODO: replace with a real list adapter.
int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1; 
```

重新排序这两个语句并将其`int layout`用作适配器的输入。例如：

```
int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1;
adapter = new ArrayAdapter<String>(getActivity(), layout, courseItems); 
```

在运行 Honeycomb 或更新版本的设备上，应该为您提供具有激活状态的列表选择器。

# c# - 如何使用 VS 2010 SQL Server Express 更改身份验证模式和登录

> ID：13517547
> 
> 赞同：0
> 
> 时间：2012-11-22T17:26:26.190
> 
> 标签：c#, visual-studio-2010, sql-server-express

我为我正在处理的项目创建了一个数据库，并正在使用 WCF 更新 C# 中的 Datagridview。我的问题是我最初选择了 Windows 身份验证，我需要使用 SQL Server 身份验证，因为我使用的是学校计算机。无论使用哪种模式，我都是**仅**使用SQL Server Express 在 VS 2010 中登录 SQL Server 的新手。

我当前的连接字符串是：

```
SqlConnection con = new SqlConnection("Initial Catalog= MyDatabase;uid=sa;pwd=sa;"); 
```

我的错误信息是：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：....，错误：40 - 无法打开与 SQL Server 的连接）*

我真的对此一无所知，并且在任何地方都没有找到通过 SQL Server 身份验证和 SQL Server Express 进行日志记录的任何帮助。由于这只是一个练习，安全性真的不是问题。提供的任何帮助将不胜感激！

德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:39:07.247

您需要将 SQL Server 的配置更改为混合模式身份验证。打开 SQL Server Management Studio 并右键单击服务器实例。然后选择安全。在左侧，您应该在顶部看到两个单选按钮。选择 SQL Server 和 Windows 身份验证模式。然后重新启动服务器实例。

还要确保您的 sql server 允许网络连接。这可以在“连接”选项下找到。它应该是倒数第二个复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:35:55.933

在您的连接字符串中，您缺少服务器名称。您需要添加`Data Source=xxx`到您的连接字符串。也`uid`应该是`User ID`而且`pwd`应该是`Password`

```
SqlConnection con = new SqlConnection("Data Source=Server;Initial Catalog=Database;User ID=Username;password=xxxxxxxx"); 
```

`Server`托管 SqlExpress 的计算机的名称在哪里。

# wordpress - 将 http 标头添加到 wordpress

> ID：13517548
> 
> 赞同：3
> 
> 时间：2012-11-22T17:26:27.607
> 
> 标签：wordpress, http-headers

我正在尝试按需构建自定义 zip 文件，并找到了一些似乎可以正常工作的代码 [http://www.9lessons.info/2012/06/creating-zip-file-with-php.html](http://www.9lessons.info/2012/06/creating-zip-file-with-php.html)

我已经在我的 wordpress 模板中插入了代码，唯一的事情是`header()`

必须在加载模板之前发送

我怎么能用wordpress做到这一点？

这是带有标题的代码

```
$zip = new ZipArchive();            // Load zip library 
$zip_name = time().".zip";          // Zip name
if($zip->open($zip_name, ZIPARCHIVE::CREATE)!==TRUE){       // Opening zip file to load files
    $error .=  "* Sorry ZIP creation failed at this time<br/>";
}
foreach($post['files'] as $file){               
    $zip->addFile($file_folder.$file);          // Adding files into zip
}
$zip->close();
if(file_exists($zip_name)){
    // push to download the zip
    header('Content-type: application/zip');
    header('Content-Disposition: attachment; filename="'.$zip_name.'"');
    readfile($zip_name);
    // remove zip file is exists in temp path
    unlink($zip_name);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-12-14T04:56:13.967

Wordpress 有一个钩子。通过调用函数将标头添加到`send_headers`钩子中。`add_action`

```
$zip = new ZipArchive();
$zip_name = time().".zip";
if($zip->open($zip_name, ZIPARCHIVE::CREATE)!==TRUE){
    $error .=  "* Sorry ZIP creation failed at this time<br/>";
}
foreach($post['files'] as $file) {               
    $zip->addFile($file_folder.$file);
}
$zip->close();
if(file_exists($zip_name)){
    add_action( 'send_headers', 'my_headers' );
    readfile($zip_name);
    // put this somewhere or return it
    // so it can be retrieved later, otherwise
    // it might print before your headers
    // are sent
    unlink($zip_name);
}

function my_headers() {
    header('Content-type: application/zip');
    header('Content-Disposition: attachment;
} 
```

这都需要`functions.php`在您的主题文件夹中的文件中的一个函数中进行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T22:25:03.443

您需要使用在 Wordpress 将任何内容添加到输出之前执行的钩子。一个这样的钩子是“init”

```
function do_my_stuff_with_headers() {
    // ...
}
add_action( 'init', 'do_my_stuff_with_headers' ); 
```

# c++ - 让 Python 2.6 与内置的自定义模块链接时遇到问题

> ID：13517552
> 
> 赞同：0
> 
> 时间：2012-11-22T17:26:46.040
> 
> 标签：c++, python, linux, python-2.6

过去一周，我一直试图让 Python 2.6 在 Linux 上使用自定义模块构建，但遇到了很多问题。当 Python 尝试在我的自定义模块中链接时，我的最新问题似乎是另一个链接器问题。这是我得到的错误：

```
libpython2.6.a(config.o):(.data+0xa8): undefined reference to `init_myplugin' 
```

我的插件名称是“_myplugin”。我的 C++ 文件中没有名为“init_myplugin”的函数。帮助将不胜感激。

# php - 为引用 time() 的方法编写测试

> ID：13517559
> 
> 赞同：2
> 
> 时间：2012-11-22T17:27:17.487
> 
> 标签：php, unit-testing, phpunit

我刚刚开始使用 PHPUnit 进行单元测试，并且正在使用一些简单的方法来感受它。一个例子立即令人费解：

```
function setDelay($seconds)
{
    if($seconds == 0)
    {
        $this->delay = 0;
    }
    else
    {
        $this->delay = time() + $seconds;
    }
} 
```

当 time() 在方法之外未知时，我将如何确定正确的预期结果？：

```
public function testSetDelayNonZero() {
  $expected = [??];
  $this->class->setDelay(100);
  $actual = $this->class->delay;
  $this->assertEquals($expected, $actual);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-07T18:34:26.473

将时间相关代码提取到单独的类是最佳选择。

然而，有时它似乎有点矫枉过正。在其他语言中，可以全局设置时间，例如 Java 中的 DateTimeUtils.setCurrentMillisFixed 或 ruby​​ 中的[delorean](https://github.com/bebanjo/delorean)。

在 php 中，您必须使用 DateTime 的替代品，例如来自[ouzo goodies的](https://github.com/letsdrink/ouzo-goodies)[Clock](http://ouzo.readthedocs.org/en/latest/utils/clock.html)

然后在你的代码中使用：

```
$time = Clock::now(); 
```

在您的测试中：

```
//given
Clock::freeze('2011-01-02 12:34');

//when
$result = YourCode::doSomethingWithTimeReturnedByClockNow();

//then
$this->assertEquals('2011-01-02', $result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:12:11.567

基本上，您需要按照您的预期测试功能，并根据您的样本提出一些小挑战。第一个也是简单的测试是向代码发送 0 秒。这个测试可能像下面这样简单：

```
public function test_setDelay()
{
    this->assertEquals(0, setDelay(0));
} 
```

要测试时间是否正确向前移动，您可以模拟您的对象，以便延迟始终返回设定的时间，加上秒数，或者使用依赖注入将时间传递给函数/类以拥有它，这样您就可以设置对象，然后进行调用以确保您返回的时间与预期相符。

```
public function test_setDelay()
{
    this->assertEquals(0, setDelay(0));

    $setDelayMock = $this->getMock('DelayClass');
    $setDelayMock->method('setDelay')
        ->with($this->equalTo(5))
        ->will($this->returnValue('10:00:05'));
    $this->assertEquals('10:00:05', $setDelayMock->setDelay(5))
} 
```

这实际上并不测试 setDelay，但会帮助测试您在它之后所做的事情。依赖注入可能是您正在寻找将时间发送到类的方法，如果它不存在，则使用 time() 函数。这样，您可以在即将调用 setDelay 的代码中使用 time()，并将其传递给类，或者如果缺少它，则允许该类在运行时创建它。但是，对于您的测试，您始终将时间设置为已知值，而不是 time()。

```
$currentTime = DateTime::createfromformat('hms', '100000'); 
```

# asp.net-mvc - F12 开发者工具\网络：重复 js 文件，后面有 '?_=1353604295011'

> ID：13517560
> 
> 赞同：0
> 
> 时间：2012-11-22T17:27:19.243
> 
> 标签：asp.net-mvc, visual-studio, caching, browser-cache

我正在我的 Visual Studio 2012 MVC4 网站上缓存数据。我从 F12 开发者工具分析网络流量。我可以看到数据已缓存，但我不明白红色包围的部分（见下文）。似乎是多余的。

![在此处输入图像描述](../Images/d043a9aa34b04fb69709ff9f01edea51.png)

因此，例如 /Contact/Index.js 被缓存（304）

但是 /Contact/Index.js?_=1353604295011 没有缓存（200）并且似乎是同一个文件？

有人可以解释我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T02:00:16.227

我们遇到了类似的问题。您是否在正在操作的 DOM 元素中包含 JavaScript？如果您正在重写其中包含脚本标记的 DOM 的一部分，它将以您提到的确切方式重新加载这些 JavaScript 标记。

附加到 URL 末尾的 ?_= 是一个旨在破坏缓存的 Unix 纪元。

# oracle - Oracle - 向嵌套表添加方法（过程）

> ID：13517561
> 
> 赞同：0
> 
> 时间：2012-11-22T17:27:28.777
> 
> 标签：oracle, plsql, sqlplus

我有这个作业，我必须将程序添加到嵌套表中，这是结构

```
create type associe_t as Object(noAs int, nomAs varchar(50), capAs int)
/
create type lesAssocies_t as TABLE OF associe_t
/
create type promoteur_t as Object(matP int, nomP varchar(50), adrP varchar(50), lesAssocies lesAssocies_t)
/
create table promoteur of promoteur_t (
    constraint pk_promoteur primary key(matP));

create table promoteur of promoteur_t (
    constraint pk_promoteur primary key(matP),
    constraint limCapAs check (capAs <= 1 000 000)
) tableSpace TBS3202A2012
NESTED TABLE lesAssocies STORE AS Table_lesAssocies ; 
```

我想要一个 type 中的方法`associe_t`，它可以根据传入的参数更新记录中的值。

所以我尝试将方法签名添加到我的类型中：

```
alter type associe_t add member procedure augmenteCapAs(P IN number) cascade ; 
```

我试图在之后添加该程序的主体：

```
CREATE or replace TYPE BODY associe_t AS
MEMBER procedure augmenteCapAs(P in number ) AS 
  BEGIN 
    update Table_lesAssocies t set t.capAs = P/100 where t.noAs = self.noAs;
  END;
END;
/ 
```

如果我使用表名`Table_lesAssocies`它会给我以下错误：

```
ORA-22812: cannot reference nested table column's storage table 
```

如果我使用表名`lesAssocies_t`，它会告诉我该表不存在。

我究竟做错了什么？我很确定我不应该使用该表的物理名称（`Table_lesAssocies`）

我应该使用什么表名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:54:05.990

正如错误消息所述，您不能直接访问（检索或存储）嵌套表的列 - 只能通过外部表。所以你可以重写你的代码如下：

```
SQL> create type associe_t as Object(noAs int, nomAs varchar(50), capAs int)
  2  /

Type created

SQL> create type lesAssocies_t as TABLE OF associe_t
  2  /

Type created

SQL> create type promoteur_t as Object(matP int, nomP varchar(50), adrP varchar(50), lesAssocies lesAssocies_t)
  2  /

Type created

SQL> create table tb_promoteur of promoteur_t (
  2      constraint pk_promoteur primary key(matP)
  3  )tablespace users
  4  NESTED TABLE lesAssocies STORE AS Table_lesAssocies;

Table created

SQL> alter table table_lesassocies add constraint chk_capas check (capas < 1000000);

Table altered

SQL> alter type associe_t add member procedure augmenteCapAs(P IN number) cascade ;

Type altered

SQL> CREATE OR REPLACE TYPE BODY associe_t AS
  2  MEMBER procedure augmenteCapAs(P in number ) AS
  3    BEGIN
  4      update table(select lesAssocies
  5                     from tb_promoteur) t
  6         set t.capAs = P/100
  7       where t.noAs = self.noAs;
  8    END;
  9  END;
 10  /

Type body created 
```

# date - 简单的 DOS - 如何将日期值更改为已定义的变量？

> ID：13517563
> 
> 赞同：1
> 
> 时间：2012-11-22T17:27:32.570
> 
> 标签：date, batch-file, cmd, command-prompt

在 Windows 命令行中，键入时**`Date`**要求我们键入日期值。
但是，如果我们需要将日期更改为一个可以记住的值（而不是键入它）怎么办？

```
@echo off
set todaysdate=%date%
date 11/11/2012
date %todaysdate% 
```

最后一行显示此错误：`The system cannot accept the date entered.`然后要求我们输入日期。
那么有什么问题呢？我需要更改变量的类型吗？有可能吗？怎么做？

* * *

### 更新：

问题：多亏了 dbenham，我们现在知道问题出在哪里，`Date %todaysdate%`它的替代方案`Set "Todaysdate=%DATE:/=-%"`导致：星期几 + 日期。

示例：`Date %todaysdate%`and `Set "Todaysdate=%DATE:/=-%"`（在第一个脚本行）将具有值：Sat 11/24/2012。因此，当我们要求日期（在最后一行）具有此值 Sat 11/24/2012 时，它会失败，因为 date 不接受该值，其中包括星期几 Sat。

解决方案：我现在想到了 2 个解决方案，但我不确定它们是否适用于 cmd。
第一个解决方案是进行测试以查看第一个脚本行设置值是否包括星期几（星期六，星期日...）并修剪星期几。
第二种解决方案是更改第一行变量的类型，因此无论变量具有哪种类型，我们都将其更改为没有星期几的简单日期（星期日，星期一...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:19:26.993

当您设置时，`todaysdate`只取最后 10 个字符（mm/dd/yyyy 或 dd/mm/yyyy 取决于您的语言环境）。这应该工作：

```
@echo off
set todaysdate=%date:~-10%
date 11/11/2012
date %todaysdate% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:29:00.910

使用命令输出重定向：

```
@Echo OFF

Set "Todaysdate=%DATE:/=-%"
<NUL Echo %todaysdate%|DATE 

REM A Test
Set "randomDate=22-22-2012"
Echo %randomDate%
Echo %randomDate%|DATE

Pause&Exit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:39:53.180

我不能确定，但​​我会冒险猜测

```
set todaysdate=%date%
set date=%todaysdate% 
```

# python - 如何从现有窗口创建新的 PyQt4 窗口？

> ID：13517568
> 
> 赞同：6
> 
> 时间：2012-11-22T17:28:02.520
> 
> 标签：python, window, pyqt, qt-designer, pyuic

我一直在尝试使用 python3 和 Qt4 从现有窗口调用一个新窗口。

我已经使用 Qt Designer（主应用程序和另一个）创建了两个窗口，并且我已经将 Qt Designer 生成的 .ui 文件转换为 .py 脚本 - 但我似乎无法从主应用程序创建新窗口.

我试过这样做：

```
############### MAIN APPLICATION SCRIPT ################

from PyQt4 import QtCore, QtGui
import v2

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName(_fromUtf8("Form"))
        Form.resize(194, 101)
        self.button1 = QtGui.QPushButton(Form)
        self.button1.setGeometry(QtCore.QRect(50, 30, 99, 23))
        self.button1.setObjectName(_fromUtf8("button1"))

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        Form.setWindowTitle(QtGui.QApplication.translate("Form", "Form", None, QtGui.QApplication.UnicodeUTF8))
        self.button1.setText(QtGui.QApplication.translate("Form", "Ventana", None, QtGui.QApplication.UnicodeUTF8))

        self.button1.connect(self.button1, QtCore.SIGNAL(_fromUtf8("clicked()")), self.mbutton1)

    def mbutton1(self):
        v2.main()

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    Form = QtGui.QWidget()
    ui = Ui_Form()
    ui.setupUi(Form)
    Form.show()
    sys.exit(app.exec_()) 
```

```
################## SECOND WINDOW #######################

from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName(_fromUtf8("Form"))
        Form.resize(400, 300)
        self.label = QtGui.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(160, 40, 57, 14))
        self.label.setObjectName(_fromUtf8("label"))

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        Form.setWindowTitle(QtGui.QApplication.translate("Form", "Form", None, QtGui.QApplication.UnicodeUTF8))
        self.label.setText(QtGui.QApplication.translate("Form", "LABEL 2", None, QtGui.QApplication.UnicodeUTF8))

def main():
    import sys
    app = QtGui.QApplication(sys.argv)
    Form = QtGui.QWidget()
    ui = Ui_Form()
    ui.setupUi(Form)
    Form.show()
    sys.exit(app.exec_()) 
```

但我收到此错误消息：

```
 QCoreApplication::exec: The event loop is already running
 QPixmap: Must construct a QApplication before a QPaintDevice 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T19:47:56.983

虽然`pyuic`可以使用该选项创建可执行脚本`-x, --execute`，但它主要用于测试。

的主要目的是从 Qt Desgner文件`pyuic`创建*静态*`ui`python 模块，允许您将包含的 GUI 类*导入*应用程序。

假设您使用 Qt Designer 创建了两个文件，并将`ui`它们命名为.`v1.ui``v2.ui`

然后，您将像这样创建两个 python 模块：

```
pyuic4 -o v1.py v1.ui
pyuic4 -o v2.py v2.ui 
```

接下来，您将编写一个单独的`main.py`脚本，从模块中导入 GUI 类，并根据需要创建它们的实例。

所以你`main.py`可能看起来像这样：

```
from PyQt4 import QtGui
from v1 import Ui_Form1
from v2 import Ui_Form2

class Form1(QtGui.QWidget, Ui_Form1):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.setupUi(self)
        self.button1.clicked.connect(self.handleButton)
        self.window2 = None

    def handleButton(self):
        if self.window2 is None:
            self.window2 = Form2(self)
        self.window2.show()

class Form2(QtGui.QWidget, Ui_Form2):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.setupUi(self)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Form1()
    window.show()
    sys.exit(app.exec_()) 
```

请注意，我稍微更改了您的 GUI 类的名称以避免命名空间冲突。要给 GUI 类更好的名称，只需`objectName`在 Qt Desgner 中设置顶级类的属性。并且不要忘记`pyuic`在您进行更改后重新运行！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T17:47:58.340

您只能创建一个`QApplication`. 创建它后，您可以创建所需的窗口数量。

例如：

```
from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QDialog):    # any super class is okay
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)
        self.button = QtGui.QPushButton('Press')
        layout = QtGui.QHBoxLayout()
        layout.addWidget(self.button)
        self.setLayout(layout)
        self.button.clicked.connect(self.create_child)
    def create_child(self):
        # here put the code that creates the new window and shows it.
        child = MyWindow(self)
        child.show()

if __name__ == '__main__':
    # QApplication created only here.
    app = QtGui.QApplication([])
    window = MyWindow()
    window.show()
    app.exec_() 
```

每次单击按钮都会创建一个新窗口。

您可以调整上面的示例以使用您使用 Designer 创建的窗口。

附带说明：

永远不要编辑 pyuic 的结果。不应更改这些文件。这意味着：不要将`mbutton1`方法添加到`Ui_Form`.

如果你有`mywindow_ui.py`pyuic 创建的文件，那么你创建文件`mywindow.py`并输入如下内容：

```
from PyQt4 import QtCore, QtGui
from mywindow_ui import Ui_MyWindow

class MyWindow(QtGui.QWidget, Ui_MyWindow):   #or whatever Q*class it is
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)
        self.setupUi(self)
    def create_child(self):   #here should go your mbutton1
        # stuff
#etc. 
```

现在从您的主文件`main.py`中执行以下操作：

```
from PyQt4 import QtGui

from mywindow import MyWindow

# ...

if __name__ == '__main__':
    app = QtGui.QApplication([])
    window = MyWindow()
    window.show()
    app.exec_() 
```

# android - Android：有没有办法将数学公式从 res/values/formulas.xml 分配给变量？

> ID：13517569
> 
> 赞同：1
> 
> 时间：2012-11-22T17:28:03.390
> 
> 标签：android, xml, figures

我需要将我作为字符串存储在资源 xml 中的正方形周长 (4*a) 之类的公式分配给我的活动中的一个值。所以，它应该看起来像：

活动：

```
int a = (formula from xml) 
```

和 XML：

```
<resources>

<string name="square_perimeter">4*a</string>

</resources> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T18:55:36.700

是什么`[34 20 2A 20 31 36]`？

这是计算机遇到字符串时会看到的内容`"4 * 16"`。就像你一样，当只给它时，它不知道为什么那些神秘的数字应该等于 64。

因此，要真正评估这一点，计算机/算法将从将输入分成块开始。假设您的表达式必须用空格分隔（`4*4`是非法的，`4 * 4`没关系）。基于这些知识，我们可以将表达式拆分为`[34]`, `[2A]`, `[31 36]`。

*   `[34]`代表`4`数字的字符=>该部分表示4
*   `[2A]`代表作为`*`数学运算符的字符 => 我们需要将这之前的部分与之后的部分相乘。
*   `[31 36]`代表`1`and `6`，两者都是数字。=> 计算 1 * 10 + 6 => 是 16。

我们知道此时必须进行乘法运算，并且我们有 4 和 16，因此可以计算 4*16 并得到结果。

如果您只需要遵循严格规则的非常简单的公式，例如只有“[numbers] [*/+-] [numbers]”，那么为此编写一个小型解析器非常简单。

但是数学很快就会变得复杂，并且“10 + 5 * 2”已经要求如果您从左到右进行评估，则不要添加 10 + 5，因为这将是错误的结果。

因此，使用类似变量评估复杂表达式需要编写的代码量`"5a^2 * sin(a) +1"`相当大。它需要涵盖所有数学规则和所有特殊情况。

* * *

回到你的问题：如果你真的想使用文本公式，寻找一个可以为你做丑陋东西的库。[例如，评估以字符串形式给出的数学表达式会](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)提到一些。

如果您不需要将公式作为文本，您可以这样做：

您将方法名称放在 xml 数据库中，并在您的应用程序中实现该方法的解决方案。用户通过名称选择方法，然后您根据该名称调用正确的方法。缺点是必须知道所有公式，以便您可以编写一段代码来解决它。

非常基本的例子：

```
public int calculate(String method, int value1, int value2) {
    if ("square".equals(method)) {
        return value1 * value1;
    } else if ("add".equals(method)) {
        return value1 + value2;
    } else if ("substract".equals(method)) {
        return value1 - value2;
    } else {
        return 0;
    }
} 
```

公式中使用的值也需要在某个地方出现，我不知道您打算如何做到这一点。

# linux - Bash脚本：保持一行本地文件与远程文件同步

> ID：13517574
> 
> 赞同：3
> 
> 时间：2012-11-22T17:28:31.753
> 
> 标签：linux, bash, ssh, sync

我搜索了高低，但似乎找不到解决这个问题的方法（也许它不存在？）。这是我的问题：

我的本地机器上有一个名为 myFile.txt 的文件。远程计算机上有一个同名文件 (myFile.txt)。两个文件结构如下所示：

```
<tag1>November 22, 2012<tag1>
<tag2>version5.8<tag2>
<tag3>ASDFA23RASDF29ASDJ29DJ2<tag3> 
```

这两个文件具有完全相同的布局。我需要编写一个脚本`<tag3>`，使两个文件（本地和远程）之间的字符串保持同步。我需要从`<tag3>`远程服务器上获取字符串并将其与本地计算机上的相同字符串进行比较。如果有区别，我需要更改我的本地字符串以反映远程字符串。

到目前为止我已经尝试过：我已经使用 awk 获取了本地字符串，并将其分配给了一个变量。很容易。我通过 ssh 连接到远程服务器并尝试使用相同的方法将远程字符串分配给一个变量。据我所知，这似乎有效。问题是变量没有返回到我的本地机器的值（如果有意义的话）。这就是我尝试这样做的方式：

```
#!/bin/bash

fileName="myFile.txt"
logon="myUserName@remoteServer.com"

localString=$(awk -F "<tag3>" '{print $2}' $fileName)

x=$(ssh $logon "remoteString=$(awk -F "<tag3>" '{print $2}' $fileName); echo $remoteString")
echo "remote string = $x" 

if [ $localString == $x ]; then
echo "The 2 auth keys are EQUAL!!!"
else
echo "The 2 auth keys are NOT equal!!!"
fi 
```

当我回显 $remoteString 时，我可以看到正在分配的变量。据我了解，这发生在远程服务器上，尽管我将正确的字符串打印到控制台，然后是“找不到命令”。下一行 echo 的“remote string =”。所以 $x 要么失去它的价值，要么永远不会被正确分配。我已经尝试改变这条线，其中 $x 被分配了很多次，但没有任何运气。

Other ideas: If this isn't possible I'm beginning to think maybe I need to do a scp of the file, bring it over to my server, make the comparison, and then delete the copied filed. I would need to change the name of the copy before moving it to my local machine, or else I will overwrite my file. Also, it would seem more efficient not to have to make a secure copy because this script will have to run on many machines, and the file will potentially be a lot bigger than 3 lines. I've looked into diff, but can't find a way to get it to compare just one line.

I am fairly new to bash scripting so please forgive me if I am missing something obvious. Thank you for any help as it is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:11:19.280

There's a escaping issue with the `ssh` commands - you should escape the `$` inside the `ssh` parameters.

Then, I just replaced the `remoteString=$(awk ....); echo $remoteString` with just `awk ....`. If not, there was some issue with a leading blank line that made the strings to not match - and it seems pretty useless to store a command's output just to `echo`ing it.

```
#!/bin/bash

fileName="myFile.txt"
logon="myUserName@remoteServer.com"

localString=$(awk -F "<tag3>" '{print $2}' $fileName)

x=$(ssh $logon "awk -F '<tag3>' '{print \$2}' $fileName")
echo "remote string = $x" 

if [ "$localString" == "$x" ]; then
        echo "The 2 auth keys are EQUAL!!!"
else
        echo "The 2 auth keys are NOT equal!!!"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:58:38.330

You can use something along these lines:

```
#!/bin/bash 
fileName="myFile.txt"
logon="myUserName@remoteServer.com"

sedcommand='/^<tag3>.*<tag3>$/{s/<tag3>\(.*\)<tag3>/\1/p;q}'

localString=$( sed -n $sedcommand "$fileName" )
remoteString=$( ssh "$logon" "sed -n '$sedcommand' \"$fileName\"" )

if [[ $localString == $remoteString ]]; then
    echo "The 2 auth keys are EQUAL!!!"
else
    echo "The 2 auth keys are NOT equal!!!"
fi 
```

(which seems simpler than your method). The `sed` command finds the first occurence of a line starting by `<tag3>` and ending by `<tag3>` and removes the tags so as to transfer only the "auth key". There's no guard against files that don't exist, or against the tag not being find. This detail is left to the reader. But the script is safe regarding spaces in file names and doesn't use two nested subshells!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:34:58.533

Try changing this line:

```
x=$(ssh $logon "remoteString=$(awk -F "<tag3>" '{print $2}' $fileName); echo $remoteString") 
```

to

```
x=$(ssh $logon "remoteString=$(awk -F '<tag3>' '{print $2}' $fileName); echo $remoteString") 
```

i.e.: change `"<tag3>"` to `'<tag3>'`

I have a feeling that your current use of the double quotes is actually breaking the intended use of your ssh command.

* * *

As a side note: always wrap your variables in double quotes when you single `[`'s for condition tests:

```
if [ $localString == $x ]; then 
```

would be safer as:

```
if [ "$localString" == "$x" ]; then 
```

or

```
# this also works, but less portable
if [[ $localString == $x ]]; then 
```

The reason is that if either variable evaluates to the null string (suppose in this case `x` is empty), bash would see something like this instead: `if [ ASDFA23RASDF29ASDJ29DJ2 == ]; then`

# mysql - 如何将 MySQL 数据库导入 SOLR

> ID：13517581
> 
> 赞同：0
> 
> 时间：2012-11-22T17:28:58.713
> 
> 标签：mysql, solr, xampp

我正在尝试将我的**mysql**数据库导入**SOLR**（我正在遵循看起来完整的唯一教程[http://entropytc.com/importing-a-mysql-database-into-apache-solr/](http://entropytc.com/importing-a-mysql-database-into-apache-solr/)）但我没有了解 SQL 查询部分。我必须选择我拥有的所有列吗？我没有找到**solr/example/solr/conf**目录。你对此有什么想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:12:57.157

就个人而言，我不会进口任何东西。我会用“文档”加载 solr，这些“文档”是高度非规范化的视图，包含调用代码呈现它们所需的所有内容。尽管 afaik 确实需要代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:03:41.223

[在此处](http://ftp.itu.edu.tr/Mirror/Apache/lucene/solr/4.0.0/apache-solr-4.0.0.zip)下载最新的 Solr ，其中包含示例目录。很可能您下载了 Solr 源代码，因此它不包含示例。

对于第二个问题，不，您不必选择所有列。您应该选择您需要在 Solr 中建立索引/存储的那个。

有关更多信息，请查看[Solr Wiki](http://wiki.apache.org/solr/DataImportHandler)。它已经详细解释了这一点。

# dns - Behat + Mink 不适用于代理（DNS 无法解析域名）

> ID：13517583
> 
> 赞同：2
> 
> 时间：2012-11-22T17:29:06.623
> 
> 标签：dns, proxy, bdd, behat, mink

我有一个简单的[Behat](http://behat.org/)功能，它使用 Mink 来测试 webapp 是哪个域，比如说（我的文件中`http://myapp.localhost`有一条记录）。`127.0.0.1 myapp.localhost``hosts`

问题是，当我运行该功能时，Mink 驱动程序在浏览到应用程序中的任何 URL（例如，使用`When I go to "/some/url"`step）时得到的所有内容都是来自代理服务器的错误页面，表示`myapp.localhost`无法解析域。代理服务器地址由 env 设置。变量：`export http_proxy=...`。

外部网站运行良好（例如Behat docs[中的 Wikipedia 示例）。](http://docs.behat.org/cookbook/behat_and_mink.html#writing-your-first-web-feature)

我的浏览器可以访问该应用程序，因为有一个设置告诉浏览器在域为`*.localhost`.

如何强制 Mink 忽略代理？

今天花了一个小时来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:29:06.623

我使用的解决方案不是很优雅，但这是我能想到的最简单的方法。我有某种用 Bash 编写的构建工具，它具有以下调用 Behat 的函数：

```
function run_behat {
  local http_proxy_backup=$http_proxy
  export http_proxy=;

  bin/behat $@ # passing all args to behat
  # if you use phar version of behat, it will be like `php behat.phar $@`

  export http_proxy=$http_proxy_backup
} 
```

基本上，我只是暂时设置`http_proxy`为空值，调用behat，然后恢复`http_proxy`初始值。

它是从我的脚本中调用的，如下所示：

```
if [ $1 == "behat" ]; then 
  run_behat ${*:2}; # pass all args but 1st
fi 
```

# mongodb - 索引：我有太多索引吗？

> ID：13517584
> 
> 赞同：1
> 
> 时间：2012-11-22T17:29:06.797
> 
> 标签：mongodb

我有一系列课程，其中包含具有以下架构的文档

```
{
    title: "Programming 101",
    category: 1
    likes: 10,
    author: {
        name: "Mike",
        reputation: 100,
        rating: 1500
    },
    created: 154895126, // unix timestamp
    content: ".... html ... "
} 
```

在我的应用程序的索引页面中，我显示了所有类别的最新 18 节课，所以这是

```
db.lessons.find().sort({created:-1}).limit(18) 
```

由于这是一个非常常见的查询，而课程集合将是我在系统中最大的集合，我想尽可能地优化它，所以我在*created上做了一个索引*

```
db.lessons.ensureIndex({created:-1}) 
```

但有时我只想从一类中得到教训

```
db.lessons.find({category:1}).sort({created:-1}).limit(18) 
```

所以我还在类别中添加了一个索引，因为如果我不这样做，mongo可以轻松排序，但它仍然需要逐个元素检查才能获得类别= 1的那个，所以

```
db.lessons.ensureIndex({category:1}) 
```

因为我不按类别排序，所以我只传递一个 1，用于升序。

现在，问题是我还想按点赞、作者声望和作者评分对课程进行排序，这些将是非常常见的任务，不像按创建排序那样常见，但仍然很常见，我是否应该再添加 3 个索引？还是只使用创建的？

```
db.lessons.ensureIndex({likes:-1})
db.lessons.ensureIndex({'author.reputation':-1})
db.lessons.ensureIndex({'author.rating':-1}) 
```

我觉得我可能使用了太多索引，并且内存中的集合大小可能很大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T19:59:49.427

我将第三次 asya 提出聚合索引的动议。

```
> db.lessons.ensureIndex({category:1});
> db.lessons.ensureIndex({created:-1});
> db.lessons.find({category:1}).sort({created:-1}).limit(18).explain();
{
    "cursor" : "BtreeCursor category_1",
    "nscanned" : 1,
    "nscannedObjects" : 1,
    "n" : 1,
    "scanAndOrder" : true,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "category" : [
            [
                1,
                1
            ]
        ]
    }
} 
```

这里的 explain() 说明 MongoDB 不会像我们期望的 SQL 数据库那样使用两个单独的索引。

```
> db.lessons.ensureIndex({category:1,created:-1});
> db.lessons.find({category:1}).sort({created:-1}).limit(18).explain();
{
    "cursor" : "BtreeCursor category_1_created_-1",
    "nscanned" : 1,
    "nscannedObjects" : 1,
    "n" : 1,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "category" : [
            [
                1,
                1
            ]
        ],
        "created" : [
            [
                {
                    "$maxElement" : 1
                },
                {
                    "$minElement" : 1
                }
            ]
        ]
    }
} 
```

综合指数看起来肯定是赢家。

至于对索引过多的担忧，对于我的日常工作，我正在处理一个集合，该集合包含超过 3800 万个文档，通过 --notablescan 选项禁用了表扫描。我们发现，为每个查询量身定制一个索引对我们来说至关重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:06:01.143

如果你提到那个

> 这些将是非常常见的任务

在我看来，您应该使用索引，否则您的查询将在给出结果之前遍历您集合中的所有文档。当然，要更准确地回答，必须知道您的收藏数量，当然还有一些关于“常见事物”的指标。并且可以肯定，决定你应该如何表现的最好方法是运行一些测试。

收集用户在一段时间（2 天）内的行为信息，并检查每种类型的查询出现了多少次。比你现在每一个的“共性”。比使用和不使用索引模拟这些类型的查询并检查什么效果更好。

我也同意@Asya 关于这里的回复

> 您的第二个索引不是 {category:1, created:-1} 有什么原因吗

# php - Cakephp + Jquery：如何使用 jquery 方法？

> ID：13517589
> 
> 赞同：2
> 
> 时间：2012-11-22T17:29:21.040
> 
> 标签：php, jquery, cakephp

我的问题真的很简单。

我有很多链接，例如：

```
$this->Html->link(__('Calculer'), 'log_import/'.$suivi['Suivi']['date'], array('class' => 'logImport') 
```

如您所见，我的“a”标签的 href 属性在每个链接上都会发生变化（诸如“2012-01-01”、“2012-10-15”等日期...）

当我点击我的链接时，jquery 代码正在执行：

```
$this->Js
    ->get('.logImport')
    ->event('click',
        $this->Js->request(
          array('action' => '$(this).attr("href")'),
          array('async' => true,
                'update' => '#test')
          )); 
```

我收到一个错误，因为 ajax 请求使用的 URL 是：

```
/suivis/$(this).attr(&quot;href&quot;) 
```

并不是 ：

```
/suivis/log_import/2012-01-01 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:17:30.350

我认为这行不通：

```
array('action' => '$(this).attr("href")') 
```

似乎该值被视为字符串。

我的建议是使用原始 jquery 代码：

```
$('.logImport',this.DOMDoc).each(
  function(index, object){

    var href = $(this).get(0).href;
    $(this).get(0).href = "javascript:void(0);"

    // attach click function for each link
    $(this).click(function() {

        // make request here            
        $.ajax({
            type: "post",
            url: href,
            ...
        })

    });
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:16:13.450

是的，最后我在 JS Helper 缓冲区中使用了“纯”jquery 代码。

这是我的代码（您可以直接使用 $(this).attr 并绕过每个循环；-)

```
$this->Js->buffer('
  $(".logImport").click(function(event) {
    event.preventDefault();
    $.ajax({
        url: $(this).attr("href"),
        })
        .done(function(){
          alert("OK");
          })
        .fail(function(){
          alert("FAILED");
          });

    });
'); 
```

顺便说一句，如果有人知道的话，我仍然对答案感兴趣....

# c# - NETMF 是否可以对嵌入式设备进行编程以将 geochron 记录写入 Azure？

> ID：13517590
> 
> 赞同：0
> 
> 时间：2012-11-22T17:29:23.640
> 
> 标签：c#, azure, geolocation, azure-sql-database, .net-micro-framework

我想使用 NETMF 和 C# 以及 NetDuino，也许，对嵌入式设备进行编程，以定期将设备的地理时间数据（日期时间、坐标、海拔、温度和光照水平等）的记录写入 SQL DB（以前称为SQL Azure 或类似的）。鉴于微框架的局限性，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:05:40.523

答案是肯定的，但是是间接的。

不可能（AFAIK）在 Netduino 上编写直接与 Windows Azure SQL 数据库对话的 NETMF 代码，但完全有可能将 Azure SQL “包装”在一个安静的 Web 服务后面，托管在一个与它对话的 Azure 云服务中数据库，然后写入 RESTful 服务，然后将数据转发到数据库。

在 Azure 中托管一个写入数据库的服务有很好的文档记录，然后从 Netduino 上的 NETMF 调用该服务看起来就像这个人在这里所做的那样：

[http://forums.netduino.com/index.php?/topic/971-webservice/](http://forums.netduino.com/index.php?/topic/971-webservice/)

看一下“Osi”的示例代码，它取自 .NET MF Socket Client 示例（实际上它是一个温度记录器，与您尝试做的事情并没有太大的不同......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-03T06:16:27.603

不确定您是否了解了这一点，但这里有一个使用 Azure 移动服务的解决方案。

[https://www.ghielectronics.com/community/codeshare/entry/913](https://www.ghielectronics.com/community/codeshare/entry/913)

# iphone - UIView 在 Interface Builder 中的高度在模拟器中有所不同

> ID：13517591
> 
> 赞同：0
> 
> 时间：2012-11-22T17:29:34.593
> 
> 标签：iphone, xcode, ipad

我在山狮中使用 xcode 4.5 和 ios 6。每当我在界面构建器中添加任何对象（如 UIview、UIImageview 等）时，对象的高度或宽度或我添加的顺序都会在模拟器中更改。我也尝试了自由度量。如何将我在界面生成器中看到的相同宽度和高度带到模拟器？请帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:33:27.823

单击显示布局中的“应用 Retina 4 Form Factor”按钮。您为 Retina 4 设置了此设置，因此在模拟器中运行时屏幕大小调整为 3.5。您可以通过运行 iPhone5 模拟器（Retina 4 英寸）来验证这一点。

![在此处输入图像描述](../Images/09365a89636142cb7eb740ffcb396813.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T22:25:14.810

Matthias 可能是对的，在最右侧面板的界面构建器窗口中，将有自动调整大小和调整大小选项。与他们一起玩并删除任何垂直调整大小；它应该可以解决您的问题。

# javascript - AJAX 调用后重新初始化 jQuery

> ID：13517592
> 
> 赞同：1
> 
> 时间：2012-11-22T17:29:36.833
> 
> 标签：javascript, jquery, ajax

我遇到了一个问题，在通过 AJAX 动态填充元素后，我的 jQuery 函数无法处理新内容。

例如，我有一个文件列表，当点击“刷新”按钮时会填充这些文件。我想在双击列表中的项目时显示带有文件名的警报。每个项目都有“文件”类。

我正在使用这段代码：

```
$('.file').on('dblclick', function(event){
                alert($(this).html());
            }); 
```

这适用于首先存在的任何元素，但不适用于 AJAX 调用之后。

这是一项学校作业，我需要使用常规的 Javascript AJAX 方法，而不是内置的 jQuery AJAX 功能。我猜这是问题所在，也是 jQuery 没有注意到新填充的元素的原因。

刷新按钮正在调用此函数：

```
function getFileList()
    {
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("files").innerHTML=xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET","filelist.php",true);
        xmlhttp.send();
    } 
```

如果我被迫使用常规 JS 来进行 AJAX 调用而不是 jQuery 的 AJAX 方法，如何让 jQuery 正确地注意到这些新元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T17:38:46.723

问题是您仅将 .on() 附加到最初存在的“.file”元素。您只需要将 .on() 附加到文档并提供选择器作为选项。例如

```
$(document).on('dblclick', '.file', function(event){
    alert($(this).html());
}); 
```

这样，事件将附加到“文件”类的未来元素。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-22T17:35:01.410

`jQuery.on`绑定到 DOM 中已经存在的元素。如果您需要绑定到未来的元素，您可以使用`jQuery.live`或取消绑定并`jQuery.on`再次重新绑定。前者更容易。

```
$('.file').live('dblclick', function(event){
    alert($(this).html());
}); 
```

编辑：如前所述，`live`已弃用且速度缓慢。总是喜欢`on`。

# lua - 通过 .a 生成 .dylib

> ID：13517593
> 
> 赞同：3
> 
> 时间：2012-11-22T17:29:38.857
> 
> 标签：lua

我在我的 mac 中安装了 Lua 5.2，它是 lion，但安装在 /usr/local/lib 中生成了一个存档 .a，但我需要一个 .dylib。

我需要通过静态库生成动态库，我该怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:36:34.023

为什么需要 dylib？无论如何，您可以从[LuaBinaries](http://luabinaries.sourceforge.net/download.html)下载一个。

# php - PHP函数中的MySQL While循环

> ID：13517594
> 
> 赞同：0
> 
> 时间：2012-11-22T17:29:56.827
> 
> 标签：php, mysql, function, while-loop, preg-replace

# *如何将 PHP 函数的 MySQL 循环转换为 HTML 自定义标记？*

我在 PHP 函数中有一个 MySQL While 循环。基本上，如果需要，可以重用块代码，而不会出现任何用户错误。

这是用于客户端实现的。我想让这个过程尽可能简单，让客户端在无需学习 PHP 的情况下添加 PHP 函数，而且还能够通过我的 CMS 后端插入到 textarea 中。

我已经有使用**preg_replace**的自定义标记代码，但这涉及将函数的内容设置为变量。以我当前设置 MySQL while 循环的方式，它仅在/如果我用变量替换 echo 时显示*第一**行*。我对 preg_replace 了解不多，不知道是否可以在没有变量的情况下使用它。

 ***MySQL While 循环/PHP 函数（示例）：**

```
function myPageList($var1,$var2) 
{
    global $dbc;

    $query = "SELECT page_url, title, desc FROM pages ORDER BY nav_order ASC";
    $query_result = @mysql_query($query, $dbc);

    while ($row = mysql_fetch_array($query_result)) 
    {
        $page = $row['page_url'];
        $title = $row['title'];
        $desc = $row['desc'];
        echo "content goes here";
    }
} 
```

**自定义标记（最终结果）：**

```
[myPageList] 
```

无论我添加到我当前拥有的代码还是使用完全不同的代码，最后我都需要一个用于 PHP 函数的 HTML 安全自定义标记。

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:46:48.480

Here's a quick and somewhat dirty way to output to html tags. htmlentities is used to escape what comes from the db which helps prevent xss issues. If you want to use textareas then add the tags in place of the table markup.

Ideally you should look at separating markup from the code, take a look at the MVC design pattern for example. I hope this helps you.

```
function myPageList($var1,$var2) {
global $dbc;
$query = "SELECT page_url, title, desc FROM pages ORDER BY nav_order ASC";
$query_result = @mysql_query($query, $dbc);

//begin table
echo '<table>';
  while ($row = mysql_fetch_array($query_result)) {

    $page  = htmlentities($row['page_url']);
    $title = htmlentities($row['title']);
    $desc  = htmlentities($row['desc']);

    //produce table row
    echo '<tr>';
    echo '    <td>'.$page.'</td>';
    echo '    <td>'.$title.'</td>';
    echo '    <td>'.$desc.'</td>';
    echo '</tr>';

  }
 //end table
 echo '</table>'; 
} 
```*

# build - 示例如何使用 tycho 针对 nexus 存储库构建 Eclipse RCP 应用程序

> ID：13517598
> 
> 赞同：4
> 
> 时间：2012-11-22T17:30:32.293
> 
> 标签：build, rcp, nexus, tycho

Lars Vogel 有一个关于如何使用 tycho 构建 eclipse 插件或 rcp 应用程序的很好的教程（[http://www.vogella.com/articles/EclipseTycho/article.html](http://www.vogella.com/articles/EclipseTycho/article.html)）。这很好用，但有两件事我不喜欢。它建立在某个地方且不受我控制的存储库上

```
 <repositories>
     <repository>
       <id>juno</id>
       <layout>p2</layout>
       <url>http://download.eclipse.org/releases/juno</url>
     </repository>
  </repositories> 
```

并且它没有显示工件如何被另一个构建使用。如果可能的话，我想针对应该托管目标平台的nexus存储库进行构建，并且应该上传我的构建的部署，以便另一个构建可以将其引用为他的目标平台。

我已经看到有一些用于 nexus 的 p2 插件以及可用于导航到工件的 nexus-unzip-plugin ( [https://bugs.eclipse.org/bugs/show_bug.cgi?id=393309](https://bugs.eclipse.org/bugs/show_bug.cgi?id=393309) )我没有足够的知识来了解如何将这些东西结合在一起，以便能够针对 nexus 存储库构建 eclipse 插件或 rcp 应用程序。有人可以告诉我这样做的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:00:27.530

您不需要 nexus-p2-plugin。如果您将 p2 存储库作为 zip 文件部署到 maven 存储库，您应该能够使用解压缩插件。有关配置它的说明，请参阅 wiki 页面 - [http://wiki.eclipse.org/Tycho/Nexus_Unzip_Plugin](http://wiki.eclipse.org/Tycho/Nexus_Unzip_Plugin)。我在这里提取了一些步骤；

1.  克隆存储库（假设安装了 git）

    git clone git://git.eclipse.org/gitroot/tycho/org.eclipse.tycho.nexus.git

2.  构建插件（假设安装了 maven）

    mvn 干净安装

-- 参见 wiki 页面中的“部署插件”

1.  停止您的 Nexus 安装

2.  解压 org.eclipse.tycho.nexus.git/target/unzip-repository-plugin--bundle.jar 到你的 sonatype-work/nexus/plugin-repository/

3.  开始您的 Nexus 安装

4.  请参阅 wiki 页面中的“配置解压缩存储库”

5.  如果您的主存储库是公共的，并且您创建了一个名为 public.unzip 的虚拟解压缩存储库，则部署的 p2 存储库 zip 可在例如

    ```
    http://<NEXUS_HOST>/nexus/content/repositories/public/org/example/demo/org.example.demo.repository/0.1.0/org.example.demo.repository-0.1.0.zip 
    ```

应该可以作为；

```
 http://<NEXUS_HOST>/nexus/content/repositories/public.unzip/org/example/demo/org.example.demo.repository/0.1.0/org.example.demo.repository-0.1.0.zip-unzip 
```

您应该能够将该 URL 用作构建中的 p2 存储库 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:14:54.403

为了建立对抗 Nexus 并拥有其他人，您必须：

1.  将 Nexus P2 插件安装到您的实例中，并为您打算使用的存储库打开工件的发布。
2.  将 nexus 作为 maven 存储库添加到 POM 文件中的 maven 存储库中，这样您就可以使用 maven deploy 上传插件。
3.  添加与 am eclipse P2 存储库相同的连接，以便您的 tycho 构建可以下载您的插件
4.  构建您的工件（Maven 安装）
5.  将您的工件部署到 nexus (maven deploy)
6.  提供那些想要通过 tycho 重用您的 tycho 服务器地址的人。

笔记：

*   Tycho 构建是 Eclipse 构建，Eclipse 构建与 P2 存储库一起使用，远程 maven 存储库不受支持，因为 Eclipse根据依赖项要求从存储库中**选择最佳版本。**这将导致 maven repo 的流量丢失并且速度太慢。
*   Nexus P2 插件公开的唯一工件是插件（也称为 OSGI 包）。Eclipse 有其他与构建中重用相关的项目，例如特性和产品。因此，如果有人想重用这些项目，您必须在其他地方为他们托管由 tycho 构建生成的 P2 存储库。
*   如果您反复调用“部署”，如果您正在构建 SNAPSHOT，则每个工件都会有一个新的次要版本号。Eclipse（以及因此 Tycho）不知道快照的概念，而是会部署一个带有时间戳的版本。这可能会导致您的联系被填满。

# ios - 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]: index 7 beyond bounds [0 .. 6]”

> ID：13517600
> 
> 赞同：-2
> 
> 时间：2012-11-22T17:30:38.370
> 
> 标签：ios, xcode, runtime-error

以下代码有问题：

```
int count = [imageArray count];
for (int i = 0; i <= count ; i++)
{
     UIImage *currentImage = [imageArray objectAtIndex: i];
     UIImage *nextImage = [imageArray objectAtIndex: i +1];
     self.imageview.image = [imageArray objectAtIndex: i];
[self.view addSubview:self.imageview];
CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
crossFade.duration = 5.0;
crossFade.fromValue = (__bridge id)(currentImage.CGImage);
crossFade.toValue = (__bridge id)(nextImage.CGImage);
[self.imageview.layer addAnimation:crossFade forKey:@"animateContents"];
    self.imageview.image = nextImage;

}; 
```

对 iOS 编码来说非常新，所以任何帮助都将不胜感激，只需要知道如何停止错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:36:05.723

你有两个问题。您的数组中有 7 个对象。这意味着有效的索引是 0 到 6。

您的`for`循环被写入从 0 到 7 迭代。所以您应该将其编写为：

```
for (int i = 0; i < count; i++) 
```

你有`i <= count`而不是`i < count`.

但还有另一个问题。在循环中，您在 index 处获得当前图像，在 index 处`i`获得下一个图像`i + 1`。所以这意味着当您在索引 6 处获取当前图像时，将从索引 7 检索下一个图像。这将使其再次崩溃。

您很可能希望更快地停止循环。它应该是：

```
for (int = 0; i < count - 1; i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:33:51.487

问题是由于这段代码：

```
UIImage *nextImage = [imageArray objectAtIndex: i +1]; 
```

以及您使用的条件：`i <= count`

假设您的数组包含 6 个对象。然后循环将从 0 - 6 运行。数组索引从 0 开始，因此第 6 个元素索引为 5。如果您尝试获取 objectAtIndex:6，则会发生崩溃。

同样，如果 i 为 5，您将在 i+1 处拍摄图像，那么它将尝试获取 i+1 th 表示第 6 个元素。大概是撞车了。

改变你的方法，如：

```
int count = [imageArray count];
for (int i = 0; i <count-1 ; i++)
{
     UIImage *currentImage = [imageArray objectAtIndex: i];
     UIImage *nextImage = [imageArray objectAtIndex: i +1];
     self.imageview.image = [imageArray objectAtIndex: i];
     [self.view addSubview:self.imageview];
     CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
     crossFade.duration = 5.0;
     crossFade.fromValue = (__bridge id)(currentImage.CGImage);
     crossFade.toValue = (__bridge id)(nextImage.CGImage);
     [self.imageview.layer addAnimation:crossFade forKey:@"animateContents"];
     self.imageview.image = nextImage;

}; 
```

# java - 在 Java 线程的上下文中，“this”到底是什么意思？

> ID：13517601
> 
> 赞同：2
> 
> 时间：2012-11-22T17:30:39.197
> 
> 标签：java, multithreading, thread-safety, notify

> **可能重复：**
> [java中对象的监视器是什么意思？为什么要用这个词？](https://stackoverflow.com/questions/9848616/whats-the-meaning-for-objects-monitor-in-java-why-use-this-word)

在我正在研究的 java 项目中，我看到了这个代码块：

```
 // Continue once everybody is initialized
        if(allReady) {
            //AceFactory.log.fine("All ACEs are ready to start");
            readyAces.notify();
        }
    } 
```

readyAces 是一个 `Map<String, Boolean> AceFactory.readyAces`变量。

我查看了 notify() 做了什么，我发现它做了以下事情：

> 唤醒正在此对象的监视器上等待的单个线程。如果有任何线程正在等待该对象，则选择其中一个被唤醒

但是“这个对象的监视器”是什么意思呢？谢谢

# php - 带变量的 Ajax 函数

> ID：13517608
> 
> 赞同：0
> 
> 时间：2012-11-22T17:31:10.130
> 
> 标签：php, javascript, html, ajax

我有一个带有“onclick”选项的表格和字段：

```
<td class="name" onclick="ajax_update_entries('<?php echo $field['Player']['name']; ?>')"> 
```

它调用函数：

```
function ajax_update_entries(player_name)
  {
  $.post('http://mysite.com/entries/get_entries/' + player_name, function(data)
    {
    $('#gameText').html(data);
    });
  setTimeout('ajax_update_entries(player_name)', 30000);
  } 
```

它做得很好的是点击表格字段后进入请求的页面。它做错了什么，它无法识别 setTimeout 中应该刷新它的“player_name”参数。在 Opera 控制台中，它返回：

> 未捕获的异常：ReferenceError：未定义的变量：player_name

IE说没有'player_name'的定义。

但另一方面，如果我选择：

```
setTimeout('ajax_update_entries("Michael Jordan")', 30000); 
```

它可以工作，并将使用参数刷新页面：迈克尔乔丹。

所以我的问题是：这个脚本有什么问题？我的意思是，为什么变量`player_name`突然被遗忘了？如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:36:52.963

你需要这个：

```
setTimeout(function() {
    ajax_update_entries(player_name);
}, 30000); 
```

该变量没有被遗忘，问题是您将函数调用作为字符串传递给`setTimeout`. 然后会发生什么，它在没有原始上下文的情况下通过`eval`（顺便说一句，这[不好](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)），所以 javascript 解释器不知道要传递什么。因此错误。

# javascript - 在类似图片库的 div 中显示图片

> ID：13517610
> 
> 赞同：0
> 
> 时间：2012-11-22T17:31:19.400
> 
> 标签：javascript, jquery

我想从 div 内的表格行中显示选定的图像。我正在使用 for 循环来填充表格，但现在我发现很难在 div 内显示所选图像，因为 id 是动态的。这是我的 for 循环

```
for (i=1; i < my_image.length-1; i++) {

            if (i%3==0) {

                str += "<td><a 

href='"+my_image[i]+"'onclick='displayimg()'id=/image"+my_image[i] +"/"+" class='popup-

open'><img src='"+my_image[i]+"'"+

                "width='80' height='65'></a></td></tr><tr>";

            }

            else {

                str+= "<td><a href='"+my_image[i]+"'class='popup-open'><img src=' 

"+my_image[i]+

"' width='80' height='65'></a></td>";

            }
        } 
```

如何在用户点击时在 div 内容中显示这些图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T03:01:23.327

如果我理解正确，表格将具有动态的唯一 ID，但 div 将是静态的，并且将保存选择的任何图像，就像单击的图像的更大视图？

如果是这样，试试这个...

对于 javascript，请尝试以下代码：

```
function showImage(container, image)
{
    var imageTag = document.getElementById(container);
    imageTag.src = image;
} 
```

在您正在制作的表格中，对于标签中的 onclick 方法

```
<img onclick="showImage('IDofTheImageTagToRenderImage', this.getAttribute('src')" /> 
```

这样您就不需要知道哪个 Id 保存图像，您只需要拥有 src 信息并将其传递给 javascript 方法来填充要显示所选图像的 div 的图像标记。因为（据我了解）这将是该 div 的静态 Id 值，而不是动态生成的。

如果你把它放在一个弹出 div 中，我也有一些东西，可以修改答案以适应。

# python - 根据节点值为networkx中的节点绘制不同的颜色

> ID：13517614
> 
> 赞同：45
> 
> 时间：2012-11-22T17:32:06.667
> 
> 标签：python, graph, visualization, networkx

我有一个大的节点图和有向边。此外，我还有一个分配给每个节点的附加值列表。

我现在想根据节点值更改每个节点的颜色。例如，绘制具有非常高值红色的节点和具有低值蓝色的节点（类似于热图）。这是否很容易实现？如果没有 networkx，我也对 Python 中的其他库开放。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-22T17:57:32.510

```
import networkx as nx
import numpy as np
import matplotlib.pyplot as plt

G = nx.Graph()
G.add_edges_from(
    [('A', 'B'), ('A', 'C'), ('D', 'B'), ('E', 'C'), ('E', 'F'),
     ('B', 'H'), ('B', 'G'), ('B', 'F'), ('C', 'G')])

val_map = {'A': 1.0,
           'D': 0.5714285714285714,
           'H': 0.0}

values = [val_map.get(node, 0.25) for node in G.nodes()]

nx.draw(G, cmap=plt.get_cmap('viridis'), node_color=values, with_labels=True, font_color='white')
plt.show() 
```

产量 [![在此处输入图像描述](../Images/0ed2d6a167733acba132da90945bf5f9.png)](https://i.stack.imgur.com/rl48x.png)

* * *

中的数字`values`与 中的节点相关联`G.nodes()`。也就是说， 中的第一个数字`values`与 中的第一个节点相关联，第二个节点`G.nodes()`也是如此，依此类推。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-04-01T21:43:15.207

对于一般情况，我们有一个指示节点的某些属性的值列表，并且我们想为给定节点分配一种颜色，以给出该属性的*比例*感（例如红色到蓝色），这是一个方法：

```
import matplotlib as mpl
from matplotlib import pyplot as plt
from pylab import rcParams
import networkx as nx

G = nx.Graph()
G.add_edges_from([('A', 'D'), ('Z', 'D'), ('F', 'J'), ('A', 'E'), ('E', 'J'),('Z', 'K'), ('B', 'A'), ('B', 'D'), ('A', 'J'), ('Z', 'F'),('Z', 'D'), ('A', 'B'), ('J', 'D'), ('J', 'E'), ('Z', 'J'),('K', 'J'), ('B', 'F'), ('B', 'J'), ('A', 'Z'), ('Z', 'E'),('C', 'Z'), ('C', 'A')]) 
```

假设我们有以下字典将每个节点映射到给定值：

```
color_lookup = {k:v for v, k in enumerate(sorted(set(G.nodes())))}
# {'A': 0, 'B': 1, 'C': 2, 'D': 3, 'E': 4, 'F': 5, 'J': 6, 'K': 7, 'Z': 8} 
```

我们可以做的是根据节点采用的最小值和最大值[`mpl.colors.Normalize`](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.colors.Normalize.html#matplotlib.colors.Normalize)将值标准化`color_lookup`到范围内`[0,1]`，然后[`matplotlib.cm.ScalarMappable`](https://matplotlib.org/3.1.1/api/cm_api.html)将标准化值映射到颜色图中的颜色，这里我将使用`mpl.cm.coolwarm`：

```
low, *_, high = sorted(color_lookup.values())
norm = mpl.colors.Normalize(vmin=low, vmax=high, clip=True)
mapper = mpl.cm.ScalarMappable(norm=norm, cmap=mpl.cm.coolwarm)

rcParams['figure.figsize'] = 12, 7
nx.draw(G, 
        nodelist=color_lookup,
        node_size=1000,
        node_color=[mapper.to_rgba(i) 
                    for i in color_lookup.values()], 
        with_labels=True)
plt.show() 
```

[![在此处输入图像描述](../Images/dbc96afab2d64c173872972da9df0bff.png)](https://i.stack.imgur.com/avuE8.png)

对于另一个颜色图，我们只需要更改`cmap`参数`mpl.cm.ScalarMappable`：

```
mapper = mpl.cm.ScalarMappable(norm=norm, cmap=mpl.cm.summer)
nx.draw(G, 
        nodelist=color_lookup,
        node_size=1000,
        node_color=[mapper.to_rgba(i) 
                    for i in color_lookup.values()], 
        with_labels=True)
plt.show() 
```

我们会得到：

[![在此处输入图像描述](../Images/8567b547a36aef5590016f53efc5cb96.png)](https://i.stack.imgur.com/kD7FX.png)

类似地，我们可以[`degree`](https://networkx.github.io/documentation/stable/reference/classes/generated/networkx.Graph.degree.html)通过定义一个将所有节点映射到其对应度数的字典来根据节点的颜色设置节点的颜色，并采取与上述相同的步骤：

```
d = dict(G.degree)
# {'A': 6, 'D': 4, 'Z': 7, 'F': 3, 'J': 7, 'E': 3, 'K': 2, 'B': 4, 'C': 2}
low, *_, high = sorted(d.values())
norm = mpl.colors.Normalize(vmin=low, vmax=high, clip=True)
mapper = mpl.cm.ScalarMappable(norm=norm, cmap=mpl.cm.coolwarm)

nx.draw(G, 
        nodelist=d,
        node_size=1000,
        node_color=[mapper.to_rgba(i) 
                    for i in d.values()], 
        with_labels=True,
        font_color='white')
plt.show() 
```

[![在此处输入图像描述](../Images/6ca108443bd7741adff9319c727ba988.png)](https://i.stack.imgur.com/xmFuI.png)

# java - log4j：根据类更改一个附加程序的阈值

> ID：13517617
> 
> 赞同：1
> 
> 时间：2012-11-22T17:32:16.427
> 
> 标签：java, log4j

我想实现以下目标：

```
All log-messages with TRACE or higher should be logged to log-trace.log
All log-messages with DEBUG or higher should be logged to log-debug.log

In general messages with DEBUG or higher should be logged to stdout, but:
  for Class de.foo only INFO or higher should be logged to stdout,
  for Class de.bar also TRACE and higher should be logged to stdout. 
```

我设法将文件拆分为工作：

```
## Root logger
log4j.rootLogger=trace,STDOUT,FILE_DEBUG,FILE_TRACE
## Appenders
log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender
log4j.appender.STDOUT.Threshold=DEBUG
# File appenders
log4j.appender.FILE_DEBUG=org.apache.log4j.RollingFileAppender
log4j.appender.FILE_DEBUG.File=logs/log-debug.log
log4j.appender.FILE_DEBUG.Threshold=DEBUG

log4j.appender.FILE_TRACE=org.apache.log4j.RollingFileAppender
log4j.appender.FILE_TRACE.File=logs/log-trace.log
log4j.appender.FILE_TRACE.Threshold=TRACE

# [..] Layouts 
```

但是，如果我尝试更改标准输出的调试级别，我也会更改文件中的内容，例如

```
log4j.logger.de.foo=info 
```

使来自 foo 的 TRACE 消息从跟踪日志文件中消失。我正在寻找的可能是这样的：

```
log4j.appender.FILE_DEBUG.de.foo.Threshold=DEBUG 
```

但这不起作用。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:03:27.800

我认为正确的方法是为 appender STDOUT 编写自定义过滤器。因此，您将能够为特定包设置最低级别的控制台日志。这是一个类似过滤器的例子：[log4j 从一个类中分离出某个级别](https://stackoverflow.com/questions/12862267/log4j-isolating-certain-level-from-a-class/12883363#12883363)。

请注意，您应该使用 XML 配置，因为属性配置中不支持过滤器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T19:58:17.777

在 log4j 中不可能，使用 logback，无论如何它都是优越的（顺便说一句，带有 slf4j 外观）

# java - Java 中的“导入”与 C/C++ 中的“#include”

> ID：13517618
> 
> 赞同：21
> 
> 时间：2012-11-22T17:32:20.680
> 
> 标签：java, c++, c, import, include

Java 中的“import”的行为方式是否与 C/C++ 中的“#include”相同？具体来说，它会包括它正在导入的整个库，还是只包括在后续代码中调用的类和方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-22T17:34:45.410

`#include`两者都不做，既不是“导入”库，也不是类或模块。

该`#include`指令只是告诉预处理器包含另一个文本文件（源）的内容。就这样。

预处理文件 A 和`#include`文件 B 的结果被传递给编译器，就好像它们是一个文件一样，文件 B 粘贴到文件 A 中`#include`放置指令的位置。

明确地说：这一切都发生**在**任何编译、代码生成之前。

作为副作用，可以独立于编译器使用 C/C++ 预处理器来处理**任何**类型的文本文件输入。

`#include`有人可能会争辩说，像“实际上并不是 C/C++ 语言的一部分”这样的预处理器语句，因为它们本质上不需要用 C/C++ 编写任何程序，因为它们永远不会传递给编译器。

该表达式`import`不在（标准）C/C++ 编程的上下文中使用，因为没有要导入的内容。

**C/C++ 模块在编译之前在源代码级别或在编译****之后**由链接器组合在一起。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-11T07:46:22.990

`#include<stdio.h>`意味着在这个文件中复制 stdio.h 的内容，而`import java.util.ArrayList`意味着如果你在这个文件中找不到一个类，请查看上面提到的导入位置。Java 导入不会增加文件的大小，它只会节省一些击键。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-22T17:35:06.097

在 Java 中，当您使用 时`import`，您可以导入：

*   一个班级：`import foo.bar.Baz`
*   一个完整的包：`import foo.bar.*`
*   类的单个静态成员：`import static foo.bar.Baz.GRUT`
*   类的每个静态成员：`import static foo.bar.Baz.*`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T18:07:51.620

C/C++`#include`指令发生在预处理阶段，用简单的英语表示“在此位置粘贴作为参数给出的整个头文件（或任何文本文件，如果你愿意）”。新的 C++ 标准将具有模块（最终），并且可能类似于也可能不类似于 Java 的导入（取决于它将如何实现）。有关此 C++ 提案的更多信息：[http ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3347.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3347.pdf)

Java 8 还将改进对模块化编程的支持。见： http: [//openjdk.java.net/projects/jigsaw/](http://openjdk.java.net/projects/jigsaw/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-25T05:42:21.807

我认为关于 c 的其他答案可能尚未明确的一个方面是，

> include in c 只复制包含函数原型的预处理器阶段的头文件，仅此而已。在基本代码编译之后，实际的函数定义仍然位于链接时。

*可以通过包含头文件而不是源文件并从代码中调用函数来完成简单的验证。不会有编译错误，只有在链接时它会抱怨无法找到定义*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T17:34:35.130

取决于您实际导入的内容。最小的可导入实体是类，最大的是包。
因此，如果您需要一个类并导入完整的包，它将带入完整的包。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-01T05:14:51.030

import（在 Java 中）类似于 using（在 C++ 中） - 正如您所了解的，它们并不完全相同，但非常相似。

import 是指示编译器在哪里可以找到当前类中使用的类（或子包）。

包括 - 斯文在这里解释得更好 - [https://stackoverflow.com/a/3739563/135553](https://stackoverflow.com/a/3739563/135553)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-04-21T07:06:41.923

笼统 ：

在c语言中，当编译器遇到#include语句时，所有指定的头文件都会在include语句的时候被加载，而不管我们是否使用这些头文件。因此它被称为静态绑定。

但是对于 java 语言，当编译器遇到 import 语句时，不会在 import 语句时加载 .class 文件。在接下来的代码行中，每当我们当时使用一个类时，只会加载相应的 .class 文件。这种类型的加载称为动态加载或按需加载或动态加载。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-12-14T05:01:57.197

include 通常指 C、C++ 语言，它们是平台相关的语言，需要直接编译、链接和加载到架构的机器指令集上，但 import 指的是 java 语言，它是平台无关的，它可以生成字节码，然后可以解释为二进制码格式。

# python - “‘函数’对象不可下标”

> ID：13517619
> 
> 赞同：0
> 
> 时间：2012-11-22T17:32:21.327
> 
> 标签：python, github

代码：

```
def user(repo, language, page):
  # import pdb;pdb.set_trace()
  dictionary = {'language_search': language, 'page': page, 'followers': repo['followers'], 'github_repo': repo['name'],'forked?': repo['fork'], 'forks': repo['forks'], 'github_owner': repo['owner'], 'language': repo['language'], 'created_at': repo['created_at'], 'forks': repo['forks'], 'watchers': repo['watchers'], 'username': user['login'], 'type': user['type'], 'public_repos': user['public_repos'], 'followers': user['followers']}
  fields_user = ['blog', 'company', 'location', 'name']
  fields_repo = ['description']
  if user.get('email'):
    dictionary_2 = {'email': user['email']}
    for key in fields_user:
      if user.has_key(key):
        dictionary[key] = user[key]
    for key in fields_repo:
    if repo.has_key(key):
      dictionary[key] = repo[key]
    shelf[dictionary_2['email']] = dictionary
    shelf.sync()
    return dictionary_2['email']
    print dictionary_2['email'] 
```

出于某种原因，我不断收到此错误：

```
<ipython-input-40-98ec5463ecbd> in user(repo, language, page)
  1 def user(repo, language, page): #returns email address to pass into rapportive
  2   # import pdb;pdb.set_trace()
----> 3   dictionary = {'language_search': language, 'page': page, 'followers': repo['followers'], 'github_repo': repo['name'],'forked?': repo['fork'], 'forks': repo['forks'], 'github_owner': repo['owner'], 'language': repo['language'], 'created_at': repo['created_at'], 'forks': repo['forks'], 'followers': user['followers']}
  4   # dictionary = {, , 'watchers': repo['watchers'], 'username': user['login']} , 'type': user['type'], , 'public_repos': user['public_repos']
  5   fields_user = ['blog', 'company', 'location', 'name']

TypeError: 'function' object is not subscriptable 
```

我不明白为什么。我只想写更多的键：值对字典。但由于某种原因，这不断抛出这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:33:25.683

`user`是一个函数：

```
def user(repo, language, page): 
```

但在该函数中，您试图将其用作字典：

```
 user['followers'] 
```

在您定义的行上`dictionary`：

```
dictionary = {'language_search': language, 'page': page, 'followers': repo['followers'], 'github_repo': repo['name'],'forked?': repo['fork'], 'forks': repo['forks'], 'github_owner': repo['owner'], 'language': repo['language'], 'created_at': repo['created_at'], 'forks': repo['forks'], 'followers': user['followers']} 
```

您可以将该行拆分为多个，以使其更具可读性和可调试性：

```
dictionary = {
    'language_search': language, 
    'page': page,
    'followers': repo['followers'],
    'github_repo': repo['name'],
    'forked?': repo['fork'],
    'forks': repo['forks'],
    'github_owner': repo['owner'],
    'language': repo['language'],
    'created_at': repo['created_at'],
    'forks': repo['forks'],
    'followers': user['followers']  # `user` is a function, what did you mean instead?
} 
```

您似乎希望`user`在整个函数中都有一本字典：

```
 if user.get('email'):    # Will also throw the error
    dictionary_2 = {'email': user['email']}  # as will this
    for key in fields_user:
      if user.has_key(key):                  # and this
        dictionary[key] = user[key]          # and here 
```

也许您有一个名为`user`字典的全局名称？您的模块中不能同时拥有同名的字典*和函数。*重命名一个或另一个。

# php - 可捕获的致命错误：第 30 行 /home/refined/public_html/refer.php 中的 PDOStatement 类的对象无法转换为字符串

> ID：13517621
> 
> 赞同：1
> 
> 时间：2012-11-22T17:32:30.193
> 
> 标签：php, mysql, pdo

我目前正在构建一个小而简单的推荐系统。但是，我在尝试返回单个用户拥有多少推荐时遇到了麻烦。当新用户注册时，它会存储在名为“referid”的列中，并且其中的 ID 对应于推荐他的用户名的 ID。

但是，在尝试查找在“referid”列中提及该用户 ID 的次数然后回显它时，我收到此错误：

```
Catchable fatal error: Object of class PDOStatement could not be converted to string in /home/refined/public_html/refer.php on line 30 
```

我无法理解实际上是什么原因造成的。我做了一个快速的谷歌搜索，我只能看到 PDO 与字符串或其他东西不兼容。我以前没有同时使用过 PHP 和 MYSQL，所以我不确定如何“不”使用 PDO。

```
<?php
$checknumber = $odb -> prepare("SELECT COUNT('referid') FROM `users` WHERE `ID` = :ID");
$checknumber -> execute(array(':ID' => $_SESSION['ID']));
echo($checknumber);
?> 
```

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:40:18.597

让我们分析一下您的代码：

```
$checknumber = $odb -> prepare("SELECT COUNT('referid') FROM `users` WHERE `ID` = :ID"); 
```

...其中[PDO::prepare()](http://php.net/manual/en/pdo.prepare.php)定义为：

> PDOStatement PDO::prepare ( 字符串 $statement [, array $driver_options = array() ] )

所以它返回一个对象。但是两行之后，您尝试*打印*该对象：

```
echo($checknumber); 
```

如果您查看手册中的任何使用示例，您会发现您需要调用其中一种`PDOStatement`方法来提取查询结果，例如：

```
<?php
/* Execute a prepared statement by passing an array of values */
$sql = 'SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll(); 
```

**更新：**另外两个链接：

*   [可用的 PDOStatement 方法](http://es1.php.net/pdostatement)
*   [PHP 中的数组](http://es2.php.net/manual/en/language.types.array.php)

# linux - 我希望我的网站有“不区分大小写”的网址

> ID：13517625
> 
> 赞同：0
> 
> 时间：2012-11-22T17:32:47.687
> 
> 标签：linux, .htaccess, url, case-insensitive

如何使 url 不区分大小写，
`www.mysite.com/Boss/ => Works`
但 有没有办法使用 htaccess 或任何其他方式来做到这一点。 服务器在linux上运行。 mod_speling 被禁用
`www.mysite.com/boss/ => not working
www.mysite.com/BOSS/ => not working
www.mysite.com/boSS/ => not working`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:48:34.687

You should enable mod_speling

```
CheckSpelling On 
```

[Source and reference](http://answers.oreilly.com/topic/108-how-to-permit-case-insensitive-urls-with-apache/)

# mongodb - 使用 mongodb 映射减少：_id 问题

> ID：13517629
> 
> 赞同：0
> 
> 时间：2012-11-22T17:33:10.017
> 
> 标签：mongodb, map, reduce

我有一个名为“事件”的集合，如下所示：

```
{
        "_id" : ObjectId("4fd89f8d3cbec825d7000001"),
        "type" : "lms_course_view",
        "datetime" : ISODate("2011-12-23T12:55:00Z"),
        "user" : [
                {
                        "_id" : ObjectId("4fd89f8d3cbec825d7000000")
                }
        ]
} 
```

还有一个，叫做“用户”，如下：

```
{
        "_id" : ObjectId("4fd89f8d3cbec825d7000000"),
        "name" : "02ad1046f",

         (...)
} 
```

我正在尝试计算每个用户产生每种事件类型的次数。我正在尝试使用 map-reduce，但我不知道如何创建一个映射函数，该函数在发出用户名称（存储在不同的集合中）的同时迭代事件。

有什么线索吗？map-reduce可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:47:58.410

由于您的用户名与集合分开存储，因此`events`无论如何您都需要进行两次传递。我建议使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)，然后在第二遍中将其转换`user["_id"]`为。`user["name"]`聚合框架代码可能类似于：

```
db.events.aggregate(
    { $unwind: "$user" }, // breaks apart user array into separate documents
    { $group: {
        _id: { user: "$user._id", type: "$type" }
        count: { $sum: 1 }
    } }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:35:41.360

对于您声明的用例，您的架构似乎构造不佳。

我建议重新考虑它并将用户名非规范化到事件集合中。

我假设用户字段是一个数组，因为多个用户可以产生每个事件 - 在这种情况下，它仍然是一个数组，但每个元素将有两个字段 - _id 就像现在一样加上代表用户名称的名称。这是相对“安全”的，因为用户名不会经常更改（如果有的话）。

拥有该架构后，您可以选择使用 MapReduce（发出 {user name, event type} 作为键），或者您可以使用聚合框架（在 2.1+ 版本中）@slee 在他的回答中描述的方式。

# javascript - 如何在数组中的数组中获取值

> ID：13517635
> 
> 赞同：1
> 
> 时间：2012-11-22T17:33:32.300
> 
> 标签：javascript, arrays

我有这样的结构：

```
var Array = new Array(3);

Array["123"] = ["a","b","c"];

Array["456"] = ["d","e","f"];

Array["789"] = ["g","h","i"]; 
```

例如，我如何得到“b”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:37:16.867

```
var a = new Array();   
a["123"] = ["a","b","c"];
a["456"] = ["d","e","f"];
a["789"] = ["g","h","i"];
b = a["123"][1]; 
```

示例 :) [http://jsbin.com/agolef/1/edit](http://jsbin.com/agolef/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:39:54.803

```
a["123"][1]; // yields "b"
a[123][1]; // also yields "b" 
```

用字符串索引数组可能不是您想要做的。

```
var a = new Array(3);

a["123"] = ["a","b","c"];  // "123" causes the array to expand to [0..123]
a["123"][1]; // yields "b"
a[123] = ["a","b","c"];  // this has better performance and is idiomatic javascript.
a[123][1]; // also yields "b"
a["456"] = ["d","e","f"];
a["789"] = ["g","h","i"]; 
```

如果您想将对象用作地图，请尝试以下操作：

```
a = new object()
a["123"] = ["a","b","c"];
a["123"][1]; // yields "b" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:36:21.013

`Array`是本机构造函数。使用不向本机对象添加属性的新对象：

```
var obj = {};

obj["123"] = ["a","b","c"];

obj["456"] = ["d","e","f"];

obj["789"] = ["g","h","i"];

obj["123"][1]; // "123" 
```

您的代码正在做的是向 native 添加一堆属性`Array`（这是一个创建数组对象的函数对象）。有关数组和其他对象之间区别的更多信息，请参阅[此问题](https://stackoverflow.com/questions/874205/what-is-the-difference-between-an-array-and-an-object)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T17:37:15.473

使用这样的东西（你不需要引号）：

```
array[123][1] 
```

# css - 添加不同类的div时css last-child不起作用

> ID：13517638
> 
> 赞同：4
> 
> 时间：2012-11-22T17:33:44.560
> 
> 标签：css, css-selectors, pseudo-class

我有一些看起来像这样的 HTML：

```
<div class="SomeContainer">
    <div class="MyClass"></div>
    <div class="MyClass"></div>
    <div class="MyClass"></div>
    <div class="MyOtherClass"></div>
</div> 
```

我使用以下CSS

```
.MyClass{...}
.MyClass:last-child{box-shadow:0px 5px 10px black;} 
```

我错误地认为`last-child`它对某个类的最后一个孩子进行了操作，但如果它属于同一类，它实际上对容器的最后一个孩子进行了操作。

有什么方便的方法吗？我知道我可以在`MyClass`div 周围添加一个包装器并将阴影的 CSS 添加到包装器中，但我想知道是否有更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T17:44:11.547

既然您已经尝试过使用 CSS3 选择器，那么~~这是要使用的正确伪类~~

```
.MyClass:last-of-type 
```

根据[CSS3 规范](http://www.w3.org/TR/selectors/#last-of-type-pseudo)（至少据我所知），这应该可以工作，但似乎没有。至少在最新的 Chrome (v23) 和 Firefox (v17) 浏览器版本中没有。

> **警告：**上面的信息不起作用，并且可能会误导这个问题有一个纯 CSS 解决方案......因为从 CSS3 开始没有。另一方面，CSS4 将有一个额外的伪类`:nth-last-match(n)`，可能会涵盖这个确切的场景。但是现在说不是所有的 CSS3 选择器都被浏览器实现还为时过早。

## 额外调查

[这是一个 JSFiddle](http://jsfiddle.net/anHHU/3)，它显示了这个伪类选择器的实际工作方式：

1.  获取所有满足 CSS 选择器的元素（无伪）
2.  获取他们不同的 HTML 元素类型（标签）
3.  为每个类型（标签）组选择相同类型（标签）的所有兄弟元素
4.  将每个类型（标签）组减少到组中的最后一个元素
5.  这个（每个组的）剩余元素是否满足选择器（没有伪）？
6.  如果为**真**，则应用样式，否则不应用

这意味着（正如我的示例还显示的）几个兄弟元素可以满足这个选择器，只要它们是不同的类型。

这似乎在 Chrome 和 Firefox 中的工作方式相同。如果我们仔细阅读规范，它确实说

> `:last-of-type`伪类表示一个元素，它是其父元素的子元素列表中其类型的**最后一个兄弟元素。**

如果它说它是*满足选择器的最后一个兄弟，*那么我的上层解决方案将起作用。所以让我们测试我的步骤。

### 使用您的 HTML 运行步骤

1.  获取前 3 个元素
2.  只有一种类型：`div`
3.  四元素（包括最后一个）
4.  减少到最后一个
5.  满足？**不**
6.  不要设置样式

### 我的小提琴中的其他几个例子

只是为了测试这个伪类选择器的行为，我添加了两个额外的示例。这是HTML：

```
<!-- First -->
<div class="SomeContainer">
    <div class="MyClass">Content</div>
    <div class="MyClass">Content</div> 
    <p class="MyClass">Content</p>
    <p class="MyClass">Content</p>
</div>

<!-- Second -->
<div class="SomeContainer">
    <div class="MyClass">Content</div>
    <div class="MyClass">Content</div>
    <div class="MyClass">Content</div>
    <p class="MyOtherClass">Content</p>
</div> 
```

在第一个中，两个元素满足选择器（最后一个`div`和最后一个`p`）。
在第二个元素满足选择器（最后一个`div`）

## 结果

拥有您提供的 HTML 并假设可以有任意数量的元素，而`.MyClass`无法在 CSS3 中编写一个通用选择器，该选择器实际上会针对具有特定 CSS 类的最后一个元素。

最好的方法是向代表最后一个具有特定类的元素添加额外的类，并编写一个选择器来定位它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:36:45.177

看起来 last-of-type 只有在您使最后一个元素与其他元素不同时才会对您有所帮助，类名在这里似乎并不相关。这个例子确实正确地显示了两个红色方块，一个绿色，一个蓝色。

```
 .SomeContainer > div, .SomeContainer > span { width: 20px; height: 20px; background: red}
.SomeContainer > div:last-of-type {background: green}
.SomeContainer > span:last-child {box-shadow:0px 5px 10px black; background: blue; display: block} 
```

```
<div class="SomeContainer">
    <div class="MyClass"></div>
    <div class="MyClass"></div>
    <div class="MyClass"></div>
    <span class="MyOtherClass"></span>
</div> 
```

# c++ - 不知道类型时调用模板方法

> ID：13517649
> 
> 赞同：0
> 
> 时间：2012-11-22T17:34:31.150
> 
> 标签：c++, templates

我有`template method`，但我不知道类型。我以某种方式设法获得了对象的类型，现在我得到了`if-else`像这样的大循环

```
if ( type == "char") {
    templateMethod<char>();
} else if ( type == "int" ) {
    templateMethod<int>();
}
..... 
```

有没有什么`template trick`可以避免这么大`if loop`的。我的代码现在变得非常丑陋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:40:56.367

您几乎不需要在 C++ 中显式确定对象的类型。这正是模板旨在帮助您的内容。

您只提供了一小部分代码，但我认为最容易解决您的问题的方法是让 templateMethod 将您当前正在确定其类型的对象作为参数，即使它不会使用该对象。

所以而不是：

```
template <typename T> void templateMethod() {
  // ...
}

// later
if ( type_of_x == "char") {
  templateMethod<char>();
} else if ( type_of_x == "int" ) {
  templateMethod<int>();
} 
```

做这个：

```
template <typename T> void templateMethod(T x) {
  // ...
}

// later
templateMethod(x); 
```

这将导致编译器自动调用`templateMethod`模板类型`T`等于 的类型`x`，即当前代码中您试图确定其类型的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:44:08.387

模板专业化：

```
template <typename T> void templateMethod() {}

template <> void templateMethod<char>() {

}

template <> void templateMethod<int>() {

} 
```

# sql - TSQL根据选择在过程中添加或删除行

> ID：13517651
> 
> 赞同：1
> 
> 时间：2012-11-22T17:34:44.123
> 
> 标签：sql, tsql, sql-server-2005

我有持有用户访问权限的表：

```
 Id  |  UserId  |  SectionId
  ---------------------------
  1   |  1       |  1
  2   |  1       |  2
  3   |  2       |  1
  4   |  1       |  3 
```

使用此代码：

```
CREATE FUNCTION dbo.Split (@List    NVARCHAR(2000), 
                       @SplitOn NVARCHAR(5)) 
returns @RtnValue TABLE ( 
   id    INT IDENTITY(1, 1), 
   value NVARCHAR(100)) 
AS 
BEGIN 
  WHILE ( Charindex(@SplitOn, @List) > 0 ) 
    BEGIN 
        INSERT INTO @RtnValue 
                    (value) 
        SELECT Value = Ltrim(Rtrim(Substring(@List, 1, Charindex(@SplitOn, 
                                                       @List) 
                                                       - 1))) 

        SET @List = Substring(@List, Charindex(@SplitOn, @List) + Len( 
                                     @SplitOn 
                                     ), 
                    Len 
                    (@List)) 
    END 

  INSERT INTO @RtnValue 
              (value) 
  SELECT Value = Ltrim(Rtrim(@List)) 

  RETURN 
END 
```

我创建了一个返回的函数（现在是特定用户和部分的所有记录）：

```
CREATE PROCEDURE UpdateSettings(@UserId int, @NewSettings nvarchar(255))
AS
BEGIN
  SELECT * 
  FROM settings
  WHERE 
    UserId = @UserId AND 
    SectionId IN (SELECT convert(int,Value) FROM dbo.Split(@NewSettings,','))
END; 
```

这可在[http://sqlfiddle.com/#!3/79de7/4进行测试](http://sqlfiddle.com/#!3/79de7/4)

我想修改此过程，以便它将删除存在的项目并添加不存在的新项目。

这是一个例子。我想改变这个：

```
 Id  |  UserId  |  SectionId
  ---------------------------
  1   |  1       |  1
  2   |  1       |  2
  3   |  2       |  1
  4   |  1       |  3 
```

进入：

```
 Id  |  UserId  |  SectionId
  ---------------------------
  1   |  1       |  1
  3   |  2       |  1
  4   |  1       |  3
  5   |  1       |  4 
```

这应该通过调用来完成：

```
EXEC UpdateSettings @UserId=1, @NewSettings='2,4' 
```

因为有 UserId=1 和 SectionId=2 程序的行应该删除它，并且因为 userId=1 和 SectionId=4 行不存在我想创建它。

我的第一个想法是为 NewSettings 创建一个游标，然后检查该行是否存在，如果存在则删除它，如果不存在则添加它。

第二个想法是删除所有已经存在的行，如下所示：

```
CREATE PROCEDURE UpdateSettings(@UserId int, @NewSettings nvarchar(255))
AS
BEGIN
  DELETE 
  FROM settings
  WHERE 
    UserId = @UserId AND 
    SectionId IN (SELECT convert(int,Value) FROM dbo.Split(@NewSettings,','))
  END; 
```

这样我就可以删除已经存在的记录，但不知道如何添加新记录（比如在我的示例中，我必须删除表中存在的一行并添加一个新记录）

我想避免使用光标，也许会做某种 JOIN，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:50:55.083

如果我这样做，我会保持简单：

1.  删除用户的所有现有数据
2.  为用户插入所有新数据

好处是：

*   易于编码
*   容易理解
*   您希望实现的优化可能很小，不值得麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:07:30.237

在 SQL Server2005 中

```
CREATE PROCEDURE UpdateSettings(@UserId int, @NewSettings nvarchar(255))
AS
BEGIN
  DECLARE @tmp TABLE(UserId int, SectionId int)
  DELETE s
  OUTPUT DELETED.UserId, DELETED.SectionId INTO @tmp
  FROM settings s JOIN (
                        SELECT @UserId AS UserId, CONVERT(int, Value) AS SectionId 
                        FROM dbo.Split(@NewSettings, ',')  
                        ) d ON s.UserId = d.UserId AND s.SectionId = d.SectionId 
  INSERT settings(UserId, SectionId)
  SELECT @UserId AS UserId, CONVERT(int,Value) AS SectionId
  FROM dbo.Split(@NewSettings, ',') d LEFT JOIN @tmp t ON CONVERT(int, d.Value) = t.SectionId 
                                      LEFT JOIN settings s ON @UserId = s.UserId AND CONVERT(int, d.Value) = s.SectionId
  WHERE t.UserId IS NULL AND s.UserId IS NULL
END 
```

在 SQLServer 2008 中

```
CREATE PROCEDURE UpdateSettings(@UserId int, @NewSettings nvarchar(255))
AS
BEGIN
  MERGE settings AS target
  USING (
         SELECT id, @UserID AS UserId, value AS SectionId 
         FROM dbo.Split(@NewSettings,',')
         ) AS source
  ON (target.UserId = source.UserId AND target.SectionId = source.SectionID)
  WHEN MATCHED
    THEN DELETE
  WHEN NOT MATCHED
    THEN INSERT (
                 UserId,
                 SectionId
                 )
         VALUES (
                 source.UserId,
                 source.SectionId
                 );  
END 
```

# java - 从向量的向量中删除元素

> ID：13517654
> 
> 赞同：-3
> 
> 时间：2012-11-22T17:34:59.617
> 
> 标签：java

我尝试从 Java 中的 verctors 向量中删除一个元素，并将该向量设置为正确的位置。

所以我尝试了这个，当然它没有工作，因为第 (2) 行返回整数：

**定义：**

```
Vector<Vector<Integer>> current_domain;

Vector<Integer> t = current_domain.get(k).remove(0);
current_domain.set(k, t); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:39:09.663

```
Vector<Integer> t = current_domain.get(k).remove(0);

current_domain.get(k)-->returns a Vector<Integer>

Vector<Integer>.remove(0)---> returns an Integer 
```

尝试 ：

```
Vector<Vector<Integer>> current_domain=null;
Vector<Integer> t = current_domain.get(0);
t.remove(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:39:42.497

```
Vector<Vector<Integer>> current_domain; 
```

对于上述向量：-

```
current_domain.get(k) 
```

返回一个`Vector<Integer>`。当你`remove(0)`在它上面使用时，你会得到一个`integer`，你不能分配给一个`Vector`。

此外，当您使用： -

```
current_domain.get(k).remove(0); 
```

它会自动修改你的`vector`。所以你不需要再次设置它。

```
 Vector<Vector<Integer>> current_domain = new Vector<Vector<Integer>>();

    Vector<Integer> vect = new Vector<Integer>();
    vect.add(4);
    vect.add(5);

    current_domain.add(vect);
    current_domain.get(0).remove(0);

    System.out.println(current_domain); 
```

**输出 ： -**

```
[[5]] 
```

所以，你可以看到它`Vector`被修改了。

* * *

作为旁注，我建议使用`ArrayList`而不是`Vector`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:38:40.953

您需要从逻辑上考虑每个阶段返回的内容。拆分事情以帮助您，并为变量提供正确、有用的名称：

```
Vector<Integer> subVector = current_domain.get(k);
Integer intVal = subVector.remove(0);
//... now, what do you actually want to do with the integer? 
```

顺便说一句，您正在使用一种非常奇怪的数据结构，无论您使用它做什么都可能效率低下（尽管您努力的目的也不是很清楚）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T17:39:06.390

您是否正在尝试这样做：

```
Vector<Vector<Integer>> current_domain;

Vector<Integer> t = current_domain.remove(k);
// do something to t
current_domain.set(k, t); 
```

? Remove 返回元素，因此您想从包含该元素的集合中调用它。

# wpf - 完成 itemcontrol 绑定后设置 WPF 图像可见性（Windows 8 样式异步）

> ID：13517657
> 
> 赞同：1
> 
> 时间：2012-11-22T17:35:12.667
> 
> 标签：wpf, xaml, binding, asynchronous, windows-8

我创建了一个用户控件，在堆栈面板中显示图像，后跟 itemcontrol：

```
<StackPanel Orientation="Horizontal">
    <Image x:Name="ActorIcon" Source="ms-appx:///Assets/Content/actors.png"/>
    <ItemsControl x:Name="ActorList" ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name}" Margin="5,0,0,0"/>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</StackPanel> 
```

绑定由异步方法设置（可能需要几秒钟）我正在寻找一种隐藏图像的方法，直到绑定完成。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:10:54.703

将默认可见性设置`Image`为`Collapsed`

```
<Image x:Name="ActorIcon" Source="ms-appx:///Assets/Content/actors.png" Visibility="Collapsed"/> 
```

在你的`async`功能中

```
await getSomeData();
ActorIcon.Visibility = Visibility.Visible; 
```

`Image`将在项目加载后可见。

# java - 如何在 Play 框架的索引页面上加载示例 html 页面？

> ID：13517661
> 
> 赞同：1
> 
> 时间：2012-11-22T17:35:43.897
> 
> 标签：java, frameworks, playframework, playframework-2.0, javabeans

这是我的代码：

```
 <div id="account"><a href="@routes.Contacts.blank()">Contact</a></div>` 
```

而不是它，我使用上面的代码

`<div id="account"><a href="account.html">Contact</a></div>`

所以，我想直接在索引页面上加载静态 html 页面。
请帮我。坦克的

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T14:16:43.857

您可以通过在文件中创建路由来将索引页面映射到静态文件`conf/routes`，例如：

```
GET     /                           controllers.Assets.at(path="/public", file="index.html")
GET     /*file                      controllers.Assets.at(path="/public", file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:40:52.877

您需要在`conf/routes`文件中创建一个指向某些操作的路由，即：

```
GET  /contact    controllers.Contacts.blank 
```

因此，您可以使用键入的路线建立链接（强烈推荐）：

```
<a href="@routes.Contacts.blank()">Contact</a> 
```

或者您可以将其编写为硬编码路径。重要的是 - 它必须适合最终 HTML 代码中路线的第二部分

您也可以使用`*.html`“扩展”编写路由，但这是完全没有必要的，因为浏览器通过其标题而不是路径识别响应！

```
GET  /contact.html    controllers.Contacts.blank 
```

# c++ - 计算二维向量的偏航

> ID：13517663
> 
> 赞同：1
> 
> 时间：2012-11-22T17:35:57.163
> 
> 标签：c++, math, vector

我有两个 3D 点（但是 z 坐标始终为零）并且想要计算从这些点创建的方向向量的偏航。我已经找到[了这篇](https://stackoverflow.com/questions/2782647/how-to-get-yaw-pitch-and-roll-from-a-3d-vector)文章，并根据它尝试了以下代码：

```
double p1_x, p1_y, p2_x, p2_y;
//initialize vars...

double dx = p2_x - p1_x;
double dy = p2_y - p1_y;

double yaw = atan(dx/-dy); 
```

但是，如果我测试这种方法，我似乎会得到奇怪的结果。此外，这种方法似乎不考虑 dy 为零的情况。我的问题是我并不完全了解底层数学，所以我很难适应代码。

我的问题是：如何调整这种方法以返回适当的偏航？为什么它不能在 ints 当前状态下工作？

谢谢你的帮助和问候，scr

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T17:43:28.443

通常，人们会使用`atan2`（记录[在这里](http://en.wikipedia.org/wiki/Atan2)和[这里](http://www.cplusplus.com/reference/clibrary/cmath/atan2/)）

```
double dx = p2_x - p1_x;
double dy = p2_y - p1_y;

double yaw = atan2(dy, dx); 
```

这个版本的代码应该会给你你正在寻找的东西。

`180 / PI`如果你想要一个以度为单位的值，你可以乘以。

# windows - 批处理脚本循环变量

> ID：13517669
> 
> 赞同：4
> 
> 时间：2012-11-22T17:36:07.380
> 
> 标签：windows, variables, batch-file

我敢打赌，这很简单，而且我感觉由于嵌套循环，它无法按我需要的方式工作。这是一个简单的脚本，我在某个地方完成了一些修改，以便进行更多测试。从本质上讲，它只是一遍又一遍地延迟主机，直到您关闭它，但记录失败的响应。一切正常，但对于我来说，我无法弄清楚如何让它更新 for 循环中使用的名称。

```
@echo off
setlocal enabledelayedexpansion

:: ** Enter name to identify host in log **
set name1=Test 1
set name2=Test 2
set name3=Test 3

:: ** Enter IP or HOSTNAME to test against **
set hostIP1=1.1.1.1
set hostIP2=2.2.2.2
set hostIP3=3.3.3.3

:: ** Enter Delay in milliseconds between each test **
set delayMS=2000

title -DO NOT CLOSE- Ping Test
echo DO NOT CLOSE
echo Ping Test

:loop
set namecount=1
for %%x in (%hostIP1% %hostIP2% %hostIP3%) do (
set pingline=1
set pingname=name!namecount!
for /f "delims=" %%A in ('ping -n 1 -w 2000 -l 255 %%x') do (
    if !pingline! equ 2 (
        set logline=!date! !time! "%%A" - %%x !%pingname%!
        echo !logline! | find "TTL=">nul || echo !logline! >> pinglog.txt
        )
    set /a pingline+=1
    )
set /a namecount+=1
)
sleep -m %delayMS%
goto loop 
```

通常我会使用另一种语言，但我需要可以在各种 Windows 服务器上运行的东西。这似乎是最可靠的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:51:46.760

这是不正确的：

```
!%pingname%! 
```

试试这个：

```
!Pingname! 
```

我无法尝试您的代码，但我做了其他小的更正：

（更新）

```
 @echo off
setlocal enabledelayedexpansion

:: ** Enter name to identify host in log **
set "name1=Test 1"
set "name2=Test 2"
set "name3=Test 3"

:: ** Enter IP or HOSTNAME to test against **
set "hostIP1=1.1.1.1"
set "hostIP2=2.2.2.2"
set "hostIP3=3.3.3.3"

:: ** Enter Delay in milliseconds between each test **
set /A "delayMS=2000"

title -DO NOT CLOSE- Ping Test
Echo DO NOT CLOSE
Echo Ping Test

:loop
set /A "namecount=1"
for %%x in (%hostIP1% %hostIP2% %hostIP3%) do (
    set /A "pingline=1"
    call set "pingname=%%name!namecount!%%"
    for /f "delims=" %%A in ('ping -n 1 -w 2000 -l 255 %%x') do (
        if !pingline! equ 2 (
            set "logline=%date% !time! %%A - %%x !pingname!"
            (echo !logline! | find "TTL=">nul) || (echo !logline! >> "pinglog.txt")
        )
        set /a "pingline+=1"
    )
    set /a "namecount+=1"
)
sleep -m %delayMS%
goto :loop 
```

# php - 如何调用通过 POST 传输值的 php 站点？

> ID：13517677
> 
> 赞同：-2
> 
> 时间：2012-11-22T17:36:38.443
> 
> 标签：php, post

假设我有一个**index.php**：

```
<?php
    $currentUser = "Paedow";
?> 
```

我有一个**user.php**：

```
<?php
    printf($_POST["currentUser"]);
?> 
```

如何在调用时将变量提交`$currentUser`给**user.php ？**

我试过这段代码，但这只会提交数据而不调用/查看页面：

```
function PostToHost($host, $path, $referer, $data_to_send) {
  $fp = fsockopen($host, 80);
  fputs($fp, "POST $path HTTP/1.1\r\n");
  fputs($fp, "Host: $host\r\n");
  fputs($fp, "Referer: $referer\r\n");
  fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n");
  fputs($fp, "Content-length: ". strlen($data_to_send) ."\r\n");
  fputs($fp, "Connection: close\r\n\r\n");
  fputs($fp, $data_to_send);
  while(!feof($fp)) {
      $res .= fgets($fp, 128);
  }
  fclose($fp);

  return $res;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:41:50.687

## 选项1

使用将发布您的数据、返回输出的客户端 javascript，以便您可以随心所欲地使用它。参见[jQuery.post](http://api.jquery.com/jQuery.post/)

## 选项 2

使用服务器端（就像您已经使用的东西一样），而不是使用 cURL 来发布您的值。见[卷曲](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:44:29.023

的内容`$data_to_send`需要如下所示：

```
currentUser=Paedow 
```

这就是表单 urlencoded 数据的样子。

However, can I suggest a different tack: it may be easier for you to use cURL to do a HTTP POST instead like so:

```
$curl = curl_init(); 
curl_setopt($curl, CURLOPT_POST, true); 
curl_setopt($curl, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt($curl, CURLOPT_URL, $endpoint); 
$response = curl_exec($curl);
curl_close($curl);
print_r($response); 
```

(Keep in mind, I haven't tested that and just typed it in off the top of my head.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:08:51.810

It seems it isn´t possible as I like; so I´m using [`Cookies`](http://php.net/Cookies).
Another option would be to use a [`Session`](http://php.net/Session).

# matlab - 长向量的有效迭代

> ID：13517688
> 
> 赞同：0
> 
> 时间：2012-11-22T17:37:27.197
> 
> 标签：matlab, vector, loops

我有一个长向量，包含 > 100 万个条目，根据概率密度函数（高斯）分布。我只需要正值，这些我在下面的 MWE 中找到

```
N = 1.5e6;
vals = normrnd(0, 1, N, 1);

final = [];
for i=1:length(vals)
    if(vals(i)>0)
        final = [final vals(i)];
    end
end 
```

问题是这需要很长时间。在 MatLAB 中有更聪明的方法吗？

谢谢，奈尔斯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:40:17.957

您可以在 matlab 中删除没有 for 循环的负数：

```
vals = normrnd(0, 1, N, 1);
vals(vals<0) = []; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T17:42:00.987

无需循环，只需选择正值即可。

```
final = vals( vals>0 ); 
```

**编辑：** 出于兴趣，我对这两种方法进行了计时。分配给新变量的速度大约是删除元素的两倍。也就是说，它们都非常快：

```
>> N = 1.5e6;
>> vals = normrnd(0, 1, N, 1);
>> tic; final = vals( vals>0 ); toc
Elapsed time is 0.020852 seconds.
>> tic; vals(vals<0) = []; toc
Elapsed time is 0.041709 seconds. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T17:42:04.370

您的脚本运行缓慢的原因之一是您之前没有进行初始化`final`。因此，变量在循环内增长。如果您*先验地*知道变量的大小，请先初始化变量：

```
N = 1.5e6;
vals = normrnd(0, 1, N, 1);

final = zeros(vals,1);
for i=1:length(vals)
    if(vals(i)>0)
        final(i) = vals(i);
    end
end 
```

但是，主要原因是因为您使用的是循环，并且您可以使用逻辑索引执行此操作：

```
final = vals( vals > 0 ) 
```

# asp.net - Repeater 仅将其 FooterTemplate 的一半渲染到我的流中

> ID：13517691
> 
> 赞同：0
> 
> 时间：2012-11-22T17:37:44.803
> 
> 标签：asp.net, vb.net

我的页面上有一个转发器，除其他外，其中有一个我在页面事件中写入的`FooterTemplate`带有 a的内容。`Literal``LoadComplete`

`FooterTemplate`如下：

```
<FooterTemplate>
        <tr>
            <td colspan="3">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td>
                &nbsp;
            </td>
            <td>
                <b>Total:</b>
            </td>
            <td align="right">
                <asp:Literal runat="server" ID="ltrBasketTotal" />
            </td>
        </tr>
        <tr>
            <td>
                &nbsp;
            </td>
            <td>
                <b>Total inc. VAT:</b>
            </td>
            <td align="right">
                <asp:Literal runat="server" ID="ltrBasketTotalPlusVAT" />
            </td>
        </tr>
    </table>
</FooterTemplate> 
```

我知道我的`LoadComplete`方法运行良好，因为我在屏幕上显示了总额和总额加上增值税。在我的`PlaceOrder`方法中，我将转发器的内容呈现到流中以包含在电子邮件中：

```
Using mStream As New System.IO.MemoryStream()

    Using writer As New System.IO.StreamWriter(mStream)

        Using rptSummaryContentWriter As HtmlTextWriter = New HtmlTextWriter(writer)

            rptSummary.RenderControl(rptSummaryContentWriter)

            Dim reader As New System.IO.StreamReader(mStream)
            reader.BaseStream.Position = 0

            customerOrderMail.Body = "Dear " & Session("displayname") & ",<br /><br />Thank you for your order through MyPortal, your reference for this order is " & newQuoteID.ToString() & ". Below is a summary of your order.<br /><br /><br />" & reader.ReadToEnd()

        End Using

    End Using

End Using 
```

问题是我的电子邮件包含表格中的所有内容，除了总加增值税的最后一行：

![无总计加增值税行](../Images/fc2f030bf6c54cc5a97d8889a0970f27.png)

有人知道为什么吗？

编辑：

检查我的电子邮件客户端中的来源，我发现我想要的行中的`<tr>`and`<td>`在那里，但没有别的。就像我过早地从流中读取，但我认为`RenderControl`它会在将控制权返回给调用者之后完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:29:47.307

原来我只需要在使用`RenderControl`.

```
rptSummary.RenderControl(rptSummaryContentWriter)

rptSummaryContentWriter.Flush()

Using reader As New System.IO.StreamReader(mStream)

    reader.BaseStream.Position = 0

    customerOrderMail.Body = "Dear " & Session("displayname") & ",<br /><br />Thank you for your order through MyPortal, your reference for this order is " & newQuoteID.ToString() & ". Below is a summary of your order.<br /><br /><br />" & reader.ReadToEnd()

End Using 
```

# maven - 是否可以将 atlassian-sdk 调整为不在控制台消息中显示 [INFO] [talledLocalContainer] 前缀？

> ID：13517694
> 
> 赞同：2
> 
> 时间：2012-11-22T17:37:51.163
> 
> 标签：maven, tomcat, atlassian-plugin-sdk

在使用`atlas-run`atlassian-plugin-sdk 中的（自定义 maven）时，您将看到以 为前缀的应用程序输出`[INFO] [talledLocalContainer]`，如下所示：

```
[INFO] [talledLocalContainer] Tomcat 6.x starting...
[INFO] [talledLocalContainer] Nov 22, 2012 4:17:28 PM org.apache.catalina.core.AprLifecycleListener init
[INFO] [talledLocalContainer] INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /Users/sorins/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:. 
```

这会干扰我的终端，该终端配置了突出显示错误和警告（基于正则表达式），我想找到一种运行它的方法，而无需看到不太有用的前缀。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:47:14.850

您可以使用该`-q`选项来关闭`[INFO]`Maven 中的线路。

否则，您可以尝试通过类似这样的方式传递命令...

```
sed "s/\[INFO\] \[talledLocalContainer\] //" 
```

# c# - 如何将c#中的月历转换为persain日历

> ID：13517700
> 
> 赞同：0
> 
> 时间：2012-11-22T17:38:12.270
> 
> 标签：c#

大家好，我需要将 c# 形式的月历转换为波斯历。请为此提供任何代码。我在谷歌尝试过的都有转换今天日期的代码，但没有转换整个日历。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:41:12.370

对于将特定日期转换为波斯语使用：

```
System.Globalization.PersianCalendar p = new System.Globalization.PersianCalendar();
DateTime date = DateTime.Today;
int year = p.GetYear(date);
int month = p.GetMonth(date);
int day = p.GetDayOfMonth(date);
DateTime d1 = new DateTime(year, month, day); 
```

对于波斯日历，请点击此[链接](http://www.codeproject.com/Articles/17495/Persian-DateTime)并 [在此处](http://persianculture.codeplex.com/)**完成波斯日历 Asp.net**

**更新：**

[用于 Winform 应用程序的波斯日历 Ui](http://www.codeproject.com/Articles/13664/Farsi-Library-Working-with-Dates-Calendars-and-Dat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:42:07.890

他们是 PersianCalendar 类阅读 msdn [http://msdn.microsoft.com/en-us/library/system.globalization.persiancalendar.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.persiancalendar.aspx)

# c# - 清除或添加项目到列表框

> ID：13517706
> 
> 赞同：0
> 
> 时间：2012-11-22T17:38:48.550
> 
> 标签：c#, visual-studio-2010, listbox

我对 C# 比较陌生，所以尝试学习如何使用 Visual Studio 在 C# 中做不同的事情，我需要一些帮助

当我在其中选择项目时，我有一个`CheckListBox`包含交付和取件的，当我按下按钮时`CheckListBox`它会将它们移动到`ListBox`

但是我希望它只添加交货或只添加皮卡`ListBox`，如果同时检查了皮卡和交货，并且我尝试移动它们，我希望它给出一些类似或错误消息

无法同时显示送货和取货

另外，当我按下按钮移动它们时，我希望它清除`ListBox`它是否包含任何项目，然后添加已在`CheckListBox`

我不知道该怎么做，最简单的方法是什么？

如果可以给出一些示例代码，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:42:41.117

```
YourListBox.Items.Add(); 
```

和

```
if (YourListBox.Items.Count != 0)
{    
YourListBox.Items.Clear();
} 
```

应该做的工作。

# c - C 中的多线程编程问题

> ID：13517708
> 
> 赞同：1
> 
> 时间：2012-11-22T17:38:52.417
> 
> 标签：c, multithreading, unix

我正在做一个项目，我必须在 C 中编写一个多线程库。我必须编写诸如 thread_t_init、thread_t_shutdown、thread_t_create、thread_t_terminate、thread_t_yield 之类的函数。我正在寻找一个好的起点或至少一些建议。无论是某个网站，甚至只是一次对话，任何事情都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:42:41.703

在 Unix 系统下，主要的线程 API 是*POSIX Threads*，也称为 Pthreads。它是每个 Unix 供应商必须实现的一组标准 API 调用。几乎所有 Unix 衍生品和类 Unix 操作系统，包括 Linux、Solaris、*BSD 和其他（因为您没有具体指定哪一个）都提供了这个 API 的实现。用 Pthreads 编写的线程程序在不同的 Unices 之间是相当可移植的。

劳伦斯利弗莫尔国家实验室提供了一套关于不同并行编程技术的优秀教程，包括关于[Pthreads](https://computing.llnl.gov/tutorials/pthreads/)的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:49:17.093

See the linux clone() system call :

[http://en.wikipedia.org/wiki/Clone_(Linux_system_call)](http://en.wikipedia.org/wiki/Clone_%28Linux_system_call%29)

Also this might help :

[Source code of PThread Library?](https://stackoverflow.com/questions/3224252/source-code-of-pthread-library)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:40:40.813

POSIX 线程是您正在寻找的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T17:44:02.177

据我所知，C 标准中没有包含线程模型，C++ 仅在 C++11 版本中包含标准的线程模型。因此，使用线程编程与使用外部库是一样的，就像使用 C++ pre-C++11 一样，您需要掌握您决定选择的库，在 Unix 下，`Pthreads`（POSIX 线程）库是 de-事实标准。

寻找有关`Pthreads`.

# java - 获取 java.lang.StringIndexOutOfBoundsException 错误

> ID：13517711
> 
> 赞同：1
> 
> 时间：2012-11-22T17:38:55.657
> 
> 标签：java

当我在做一个简单的密码程序时。我遇到了这个错误

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -1
at java.lang.String.charAt(Unknown Source)
at Caesar.main(Caesar.java:27) 
```

好吧，我不太清楚是什么原因。我需要一些资深人士的帮助@@ 下面是我的代码。

```
import java.util.Scanner;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;

public class Caesar {

    public static void main(String[] args){
         String from = "abcdefghijklmnopqrstuvwxyz";
         String to   = "feathrzyxwvusqponmlkjigdcb";
            Scanner console = new Scanner(System.in);
            System.out.print("Input file: ");
            String inputFileName = console.next();
            System.out.print("Output file: ");
        String outputFileName = console.next();

        try{ 
            FileReader reader = new FileReader("C:/"+inputFileName+".txt");
            Scanner in = new Scanner(reader);
            PrintWriter out = new PrintWriter("C:/"+outputFileName+".txt");

                while (in.hasNextLine()){
                    String line = in.nextLine();
                    String outPutText = "";
                    for (int i = 0; i < line.length(); i++){
                        char c = to.charAt(from.indexOf(line.charAt(i)));
                        outPutText += c;
                    }
                    System.out.println("Plaintext: " + line);
                    System.out.println("Ciphertext: " + outPutText);
                    out.println(outPutText);         
                }
                System.out.println("Processing file complete");
                out.close();
        }
        catch (IOException exception){ 
            System.out.println("Error processing file:" + exception);
        }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:42:20.533

这是你在你的内部的任务`for loop`： -

```
char c = to.charAt(from.indexOf(line.charAt(i))); 
```

在这里，当在字符串中找不到时`indexOf`返回，然后它会抛出一个。`-1``char``from``StringIndexOutOfBoundsException`

您可以在获取字符之前添加检查：-

```
int index = from.indexOf(line.charAt(i));

if (index >= 0) {
    char c = to.charAt(index);
    outPutText += c;
} 
```

或者： -

```
char ch = line.charAt(i);

if (from.contains(ch)) {
    char c = to.charAt(from.indexOf(ch));
    outPutText += c;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T17:40:30.050

如果在字符串中找不到相关字符，则 indexOf() 返回 -1。因此，您需要为这种情况的发生建立一些应急措施。当在“from”中找不到字符时，您希望代码做什么？

# c# - Websocket服务器，客户端无法握手

> ID：13517712
> 
> 赞同：4
> 
> 时间：2012-11-22T17:38:57.210
> 
> 标签：c#, websocket, listener

我正在使用最新版本的 Chrome（websocket 版本 13）进行测试。

这是我的简单客户页面，位于`http://127.0.0.1/folder/default.aspx`：

```
<script type="text/javascript">
    var socket = new WebSocket('ws://localhost:8181/websession');
    socket.onopen = function () {
        alert('handshake successfully established. May send data now...');
    };
    socket.onclose = function () {
        alert('connection closed');
    };
    socket.onmessage = function(msg) {
        alert(msg);
    };
</script> 
```

这是我的听众 (c#)

```
var listener = new TcpListener(IPAddress.Loopback, 8181);
listener.Start();
while (true)
{
    Console.WriteLine("Listening...");
    using (var client = listener.AcceptTcpClient())
    using (var stream = client.GetStream())
    using (var reader = new StreamReader(stream))
    using (var writer = new StreamWriter(stream))
    {
        writer.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
        writer.WriteLine("Upgrade: WebSocket");
        writer.WriteLine("Connection: Upgrade");
        writer.WriteLine("WebSocket-Origin: http://127.0.0.1");
        writer.WriteLine("WebSocket-Location: ws://localhost:8181/websession");
        writer.WriteLine("");
    }
    Console.WriteLine("Finished");
} 
```

当我运行服务器，然后加载客户端页面时，它只显示`"connection closed"`.

有人可以告诉我如何让这个握手正确执行吗？据我从文档和以前的问题中可以看出，我发回给客户的响应看起来是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:37:37.787

根据您的代码，这应该可以工作（至少使用 chrome）

```
var listener = new TcpListener(IPAddress.Loopback, 8181);
listener.Start();
while (true)
{
    Console.WriteLine("Listening...");
    using (var client = listener.AcceptTcpClient())
    using (var stream = client.GetStream())
    using (var reader = new StreamReader(stream))
    using (var writer = new StreamWriter(stream))
    {

        string line = null, key = "", responseKey = "";
        string MAGIC_STRING = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
        while (line != "")
        {
            line = reader.ReadLine();
            if (line.StartsWith("Sec-WebSocket-Key:"))
            {
                key = line.Split(':')[1].Trim();
            }
        }

        if (key != "")
        {
            key += MAGIC_STRING;
            using (var sha1 = SHA1.Create())
            {
                responseKey = Convert.ToBase64String(sha1.ComputeHash(Encoding.ASCII.GetBytes(key)));
            }
        }

        // send handshake to the client
        writer.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
        writer.WriteLine("Upgrade: WebSocket");
        writer.WriteLine("Connection: Upgrade");
        writer.WriteLine("WebSocket-Origin: http://127.0.0.1");
        writer.WriteLine("WebSocket-Location: ws://localhost:8181/websession");
        if (!String.IsNullOrEmpty(responseKey)) 
            writer.WriteLine("Sec-WebSocket-Accept: " + responseKey);
        writer.WriteLine("");

        writer.Flush();

        SendString(stream, "This code works!!!!");
        SendString(stream, "This code also works!!!! ".PadRight(300, '.') + "\r\nEND");
    }
    Console.WriteLine("Finished");
}

void SendString(Stream s, string str)
{
    var buf = Encoding.UTF8.GetBytes(str);
    int frameSize = 64;

    var parts = buf.Select((b, i) => new { b, i })
                   .GroupBy(x => x.i / (frameSize - 1))
                   .Select(x => x.Select(y => y.b).ToArray())
                   .ToList();

    for (int i = 0; i < parts.Count; i++ )
    {
        byte cmd = 0;
        if (i == 0) cmd |= 1;
        if (i == parts.Count - 1) cmd |= 0x80;

        s.WriteByte(cmd);
        s.WriteByte((byte)parts[i].Length);
        s.Write(parts[i], 0, parts[i].Length);
    }

    s.Flush();
} 
```

PS：使用

```
socket.onmessage = function(msg) {
    alert(msg.data);
}; 
```

查看服务器发送的消息内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:56:33.717

您尚未计算安全哈希。客户端向您发送一个号码，并且在规范中硬编码了另一个号码。您需要按照规范中的说明组合它们，并将其作为标题返回。

这表明您的服务器实际上是一个 web-socket 服务器。

见[RFC6455](https://www.rfc-editor.org/rfc/rfc6455#section-4.2.2)

请注意，除了 RFC，您可能还需要考虑是否实现 Hixie 76。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T20:19:19.637

Dispose 上的 StreamReader 和 StreamWriter 正在关闭底层流（NetworkStream）。所以客户端页面只显示“连接关闭”

# php - MYSQL查询多个逗号分隔的字符串

> ID：13517715
> 
> 赞同：-1
> 
> 时间：2012-11-22T17:39:07.430
> 
> 标签：php, mysql, csv

我将数据存储在 MYSQL 数据库中，如下所示：

```
 id    t_id     type    color       Y        S       M          L   
  2    2606      2    Black DNA   1,5,8    4,2,6    7,3,9    10,11,12 
```

我希望查询使用 PHP 像这样返回：

全部的：

```
Black DNA

1 (Y)  
2 (S)  
3 (M)  
4 (S)  
5 (Y)  
6 (S)  
7 (M)  
8 (Y)  
9 (M)  
10 (L)  
11 (L)  
12 (L) 
```

我正在使用 Joomla 2.7，这是我在 PHP 中尝试过的：

```
$query = "SELECT DISTINCT(e.id) as id, e.color, GROUP_CONCAT(e.S) as small FROM  #__bl_equipment as e WHERE e.type = 4 AND e.t_id = 2606";
       $db->setQuery($query);
    $equip1 = $db->loadObjectList();

<table>

<?php foreach($this->equip1 as $equip){

echo '<tr><td>';
echo $equip->color;
echo '</td><td>';
echo $equip->small;
echo '</td></tr>';}

?>

</table> 
```

我能得到的唯一结果：

黑色 DNA 1, 2, 3

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T17:44:52.797

这对 SQL 来说太复杂了（甚至怀疑它是可能的）

我会执行以下操作 - 获取 Y、S、M 和 L 列 - 使用逗号解析每个列（以便获得数字）并将它们转换为数组 - 对每个列进行排序

所以现在你应该有类似的东西

y_numbers = [1,5,8]

s_numbers = [2,4,6]

m_numbers = [3,7,9]

l_numbers = [10,11,12]

然后在一个循环中，查看每个数组的第一个元素，找到最小的，根据它是哪个数组打印字母，迭代该数组的指针......继续直到你用尽所有数字

# html - Spotify 网络应用程序不更新

> ID：13517717
> 
> 赞同：1
> 
> 时间：2012-11-22T17:39:20.560
> 
> 标签：html, caching, web-applications, spotify

我尝试在 Spotify 上编写一些代码`index.html`，当我在 Spotify 上运行该应用程序时，它不会更新。我必须退出并重新启动 Spotify 才能看到我的更新……这正常吗？

是否可以不完全重新启动 Spotify 以获取我的更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:02:52.680

我不确定你是否尝试过这个，但它并没有在你的问题中说（我有几点只是评论和提问）。但是您问如何更新您的应用程序，这是三种方法：

*   开发 -> 重新加载应用程序
*   右键单击（应用程序中的任何位置）-> 重新加载应用程序
*   按 command+alt+R（在 mac 上，可能在 windows 上使用 ctrl+r）

# .htaccess - 如何在 .htaccess 中重写菜单项的 URL

> ID：13517718
> 
> 赞同：2
> 
> 时间：2012-11-22T17:39:20.517
> 
> 标签：.htaccess, url-rewriting, menuitem

我有一个看起来像这样的菜单项：

```
mysite.com/index.php?option=blog&view=index 
```

我希望它变成这样：

```
blog.mysite.com 
```

可以做到吗？

谢谢！

编辑：

@Daan 该规则给了我一个 500 内部服务器错误。我正在使用 joomla cms，默认的 htaccess 看起来像这样

```
Options +FollowSymLinks

RewriteEngine On

RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule .* index.php [F]

RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteCond %{REQUEST_URI} !^/index\.php
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

我的网站在付费托管服务器上，我无权访问任何 apache 文件夹或模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:46:50.787

试试这个：

**更新**

```
RewriteCond %{QUERY_STRING} ^option=(.+)&view=index$
RewriteRule ^index\.php$ http://%1.mysite.com? [L] 
```

逐行：

1.  您使用第一行中的 () 来捕获 option= 之后的值

2.  url 必须以 index.php 开头，%1 指的是在第 1 行捕获的值，？最后确保没有附加旧的查询字符串，[L] 停止执行
    .htacces的其余部分

[在http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)上阅读更多信息

# java - Android简单的拖放？

> ID：13517719
> 
> 赞同：0
> 
> 时间：2012-11-22T17:39:24.430
> 
> 标签：java, android, android-layout, drag-and-drop

一位朋友让我为他制作一个简单的 android 拖放投票。由于我是 Android 的初学者，而且一般都在编程，所以我不知道如何处理这样的任务。我尝试使用 LayoutParams 和 TranslateAnimations，但这是一条死胡同。

谁能给我关于如何解决这个问题的提示或提示（或易于使用的库）？

![我想拖放项目](../Images/4e0a4d1a4605b308890bad1e85678d70.png)- 我只需要垂直拖动项目。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:49:17.420

There are some examples for this:

[TouchListView.java](https://github.com/commonsguy/cwac-touchlist/blob/master/src/com/commonsware/cwac/tlv/TouchListView.java)

[Drag-And-Drop-Android](https://github.com/mtparet/Drag-And-Drop-Android)

[TouchInterceptor.java](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/TouchInterceptor.java)

# r - S4 中的替换（）

> ID：13517720
> 
> 赞同：4
> 
> 时间：2012-11-22T17:39:27.997
> 
> 标签：r, s4

如果仅在方法中定义了 S4 泛型函数的命名参数，则按`substitute()`预期工作：

```
> setGeneric("fS4", function(x, ...) standardGeneric("fS4"))
> setMethod("fS4", signature("numeric"),
+     function(x, ...) deparse(substitute(x))
+ )
[1] "fS4"
> fS4(iris[,1])
[1] "iris[, 1]" 
```

但是，如果向方法的定义添加一个额外的命名参数，`substitute()`则在传递参数时停止正确返回参数：

```
> setMethod("fS4", signature("numeric"),
+     function(x, y, ...) deparse(substitute(x))
+ )
[1] "fS4"
> fS4(iris[,1])
[1] "x" 
```

关于为什么会发生这种情况以及最重要的是如何解决它的任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:55:54.380

看一眼

```
showMethods(fS4, includeDef=TRUE) 
```

这表明

```
Function: fS4 (package .GlobalEnv)
x="numeric"
function (x, ...) 
{
    .local <- function (x, y, ...) 
    deparse(substitute(x))
    .local(x, ...)
} 
```

S4 实现具有不同于泛型签名的方法的方式是通过在具有泛型签名的函数内创建具有修改签名的“.local”函数。`substitute`然后在不正确的环境中进行评估。根本问题与 S4 无关

```
> f = function(x) deparse(substitute(x))
> g = function(y) f(y)
> f(1)
[1] "1"
> g(1)
[1] "y"
> h = function(...) f(...)
> h(1)
[1] "1" 
```

并且任何在“正确”环境中进行评估的尝试都将被用户提供的任意构造所阻挠。

# java - Java BufferedImage getRGB 方法和 Color 类

> ID：13517721
> 
> 赞同：5
> 
> 时间：2012-11-22T17:39:28.737
> 
> 标签：java, image-processing, colors

getRGB(x, y) 方法中的 x 和 y 参数代表什么？数值返回值代表什么？

如何识别绘图面板上显示的 BufferedImage 中特定像素的颜色？理想情况下，我想在图像中“找到”一个词，并在该词下划线或勾勒出该词以创建相关的超链接。如何将这些数值转换为人类可以理解的颜色，如“红色”、“绿色”或“蓝色”？

是的，我知道在 Color 类中，0-255 的 alpha 值表示透明到不透明。但这对实际颜色意味着什么？我很高兴澄清这是否没有意义。感谢您的阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:47:44.977

x 和 y 坐标代表**像素位置**，x 从左到右，y 从上到下（均从 0 开始）。所以 (0, 0) 是左上角像素， (width-1, height-1) 是右下角像素。

返回的整数值将 R、G、B 和（可能）Alpha 值打包到单个 int 中。请记住，一个 int 包含 32 位，因此其中 8 位分配给每个值。

但是，如果您不擅长在整数内移动位，最简单的方法是**将整数值传递给 Color 的构造函数**：

```
int rgba = image.getRGB(coordinates);
Color col = new Color(rgba, true);
int r = col.getRed();
int g = col.getGreen();
... 
```

显然，从原始像素值中识别单词的位置是另一个非常复杂的问题。

# java - Java 中的类设计——更优雅的解决方案？

> ID：13517730
> 
> 赞同：3
> 
> 时间：2012-11-22T17:40:20.623
> 
> 标签：java, oop, class

```
public class CustomPanel extends JPanel {
    private ClickGrid grid;

    public void registerMouseOutput(ClickGrid gridIN){}
    public void handleMouseInput(MouseEvent e){
        //Handle some mouse input
        grid.manipulateMouseData(e);
    }
}

public class ClickGrid {
    private boolean[][] 2darray = new boolean[3][2];
    private int[][] points_list = {{30, 100}, {200, 500}, {400, 300}};

    private GridDisplay gridDisplay;

    public void registerGridDisplay(GridDisplay griddisplayIN){
        gridDisplay = griddisplayIN;
        gridDisplay.setClickGrid(this);
    }
    public void manipulateMouseData(MouseEvent e) {
        //Do certain things based on mouse data
        gridDisplay.updateDisplay();
    }
}    

public class GridDisplay extends JPanel {
    private ClickGrid clickgrid;

    public void setClickGrid(ClickGrid clickgridIN){}
    public void updateDisplay(){}

    @Override
    public void paintComponent(){
        //display image at clickgrid.getPointsList(x,y) 
        //if clickgrid.get2dArray(x,y) is true;
    }
} 
```

似乎我正在以菊花链方式连接这些类（它们只能相互协作，而不是一般），而且它们变得太具体了。

我可以从刚刚实现部分功能的基类继承 ClickGrid，但是我只有一次机会抽象一些功能（没有多重继承）。我可以为每个新功能重复继承，但如何知道哪些功能更基础？

我不是一个完美主义者，这个解决方案很有效，但是当我编码时，我在想“这感觉很笨拙。必须有更智能的方法来做到这一点。” 不过，我有很多这样的设计问题。

# php - 如何在参数文件中有一个数组？

> ID：13517737
> 
> 赞同：0
> 
> 时间：2012-11-22T17:40:53.930
> 
> 标签：php, symfony, parameters, yaml, symfony-2.1

我正在使用 Symfony2.1，我需要在配置/参数文件中保存一个数组，因为我会经常修改这个数组的内容（可能每 6 个月一次）（它包含电子邮件地址）。

我知道我可以在 parameters.yml 中保存一个字符串，例如使用：

在 app/config/parameters.yml

```
parameters
    address: 'example@domain.com' 
```

并在控制器中使用 $this->container->getParameter('address') 检索此参数，但我有很多收件人，我想要类似的东西：

```
 parameters
        address: array('example@domain.com', 'example2@domain.com', 'example3@domain.com)
#the number of addresses is actually not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:46:44.313

数组的 Yaml 语法为：

```
address: 
    - example@domain.com
    - example2@domain.com
    - example3@domain 
```

或者

```
address: ["example1@domain.com", "example2@domain.com"] 
```

但我不知道 symfony 是否支持这一点。

# r - 如何按值对 data.frame 进行子集化？

> ID：13517739
> 
> 赞同：2
> 
> 时间：2012-11-22T17:41:05.633
> 
> 标签：r

我有一些带有 POSIXct 列的大型 data.frames。

```
 time longitude latitude
1 2012-10-28 23:01:00  16.42125 52.37832
2 2012-10-28 23:02:00  16.42125 52.37832
3 2012-10-28 23:03:00  16.42127 52.37832
... 
```

出于兼容性原因，我在某些地方存储时间值而不是行索引。如何获得具有这些时间值的（总是连续的）行？

使用索引，我会这样做：

```
indices <- 1:3
rows <- dat[indices,] 
```

但随着时间的推移：

```
times <- dat$time[1:3]
rows <- ??? 
```

什么是有效的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:49:44.923

切换到包[xts](http://cran.r-project.org/package=xts)。这里我们为您提供一个随机示例：

```
R> dat <- xts(as.matrix(data.frame(long=rnorm(20, 16, 0.1), 
+                                  lat=rnorm(20, 52, 0.1))),
+             order.by=ISOdatetime(2012,10,28,23,00,00)+seq(1,20))
R> dat
                       long     lat
2012-10-28 23:00:01 16.1100 52.0176
2012-10-28 23:00:02 15.7947 52.1227
2012-10-28 23:00:03 15.9632 52.1097
2012-10-28 23:00:04 16.1478 51.8562
2012-10-28 23:00:05 16.0800 52.0969
2012-10-28 23:00:06 15.9444 51.9217
2012-10-28 23:00:07 16.1291 52.1710
2012-10-28 23:00:08 16.1400 52.0243
2012-10-28 23:00:09 15.8718 52.0717
2012-10-28 23:00:10 16.0093 51.9953
2012-10-28 23:00:11 15.9821 52.1891
2012-10-28 23:00:12 16.0326 51.9598
2012-10-28 23:00:13 15.9243 51.9634
2012-10-28 23:00:14 15.9498 52.1015
2012-10-28 23:00:15 16.1454 51.9398
2012-10-28 23:00:16 15.9191 51.8936
2012-10-28 23:00:17 16.0541 51.7999
2012-10-28 23:00:18 15.7676 52.0641
2012-10-28 23:00:19 16.1154 52.0178
2012-10-28 23:00:20 16.1094 51.9573
R> 
```

您可以轻松地`xts`从现有对象创建对象，从文件中读取等。这里也有很多示例。

现在您可以使用 nice 子集：

```
R> dat["2012-10-28 23:00:10/2012-10-28 23:00:14"]
                       long     lat
2012-10-28 23:00:10 16.0093 51.9953
2012-10-28 23:00:11 15.9821 52.1891
2012-10-28 23:00:12 16.0326 51.9598
2012-10-28 23:00:13 15.9243 51.9634
2012-10-28 23:00:14 15.9498 52.1015
R> 
```

甚至简写：

```
R> dat["T23:00:10/T23:00:14"]
                       long     lat
2012-10-28 23:00:10 16.0093 51.9953
2012-10-28 23:00:11 15.9821 52.1891
2012-10-28 23:00:12 16.0326 51.9598
2012-10-28 23:00:13 15.9243 51.9634
2012-10-28 23:00:14 15.9498 52.1015
R> 
```

# javascript - 将菜单悬停更改为单击/活动 CSS

> ID：13517747
> 
> 赞同：1
> 
> 时间：2012-11-22T17:41:51.103
> 
> 标签：javascript, css

我试图将我的菜单从悬停更改为单击，但是如果我单击菜单，子菜单也会很快关闭，我想我需要一个用于 onclick 和切换的 javascript，但不知道该怎么做。请帮助我是新手

```
/* menu */
 #menu{ margin:0px 0px; margin-top:67px; margin-left:90px; list-style:none; color:#fff; line-height:30px; display:inline-block; float:left;  height:-100px; width:1000px; }
            #menu1{ margin:0px 0px; margin-top:auto; margin-left:-50px; list-style:none; color:#fff; line-height:30px; display:inline-block; float:left;  height:auto; width:95px; }
    #menu a { color:#000; text-decoration:none; }
    #menu > li {background:#fff none repeat scroll 0 0; cursor:pointer; float:left; position:relative;padding:0px 10px; z-index:999 !important;}
    #menu > li a:hover {color:#B0D730;}
    #menu .logo {background:transparent none repeat scroll 0% 0%; padding:0px; background-color:Transparent;}
    /* sub-menus*/
    #menu ul { padding:0px; margin:0px; display:block; display:inline;}
    #menu li ul { position:absolute; left:-10px; top:0px; margin-top:30px; width:200px; line-height:16px; background-color:#FFF; color:#FFF; /* for IE */                       display:none; }
    #menu li:hover ul { display:block;}
    #menu li ul li{ display:block; margin:5px 20px; padding: 5px 0px;  border-top: dotted 1px #606060; list-style-type:none; }
    #menu li ul li:first-child { border-top: none; }
    #menu li ul li a { display:block; color:#0395CC; }
    #menu li ul li a:hover { color:#7FCDFE; }
    /* main submenu */
    #menu #main { left:0px; top:-20px; padding-top:20px; background-color:#FFF; color:#fff; z-index:999 !important;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:06:56.310

# 点击时

在您的 HTML 代码中，您可以在点击时执行 Javascript 操作：

```
<p onclick="clickedText()">Click Me!</p> 
```

必要的 Javascript 代码是：

```
var clickedText = function() {
    //Insert Code Here That's On Click
} 
```

要通过 id 访问元素，请使用以下 Javascript 代码：

```
var element = document.getElementById("id"); 
```

然后你可以使用：

```
element.style.display = "none"; 
```

* * *

# 速度

如果某些东西关闭得太快，而您正在使用`display: none;`，那是因为您告诉浏览器在这一秒内不显示任何内容。

您的 CSS 代码*告诉*浏览器不要显示子菜单。

* * *

# CSS 代码

这就是您的 HTML 文件样本会派上用场的地方。您正在告诉浏览器以下内容：

```
#menu li:hover ul { /*Do stuff*/ } 
```

这意味着它会选择所有悬停`ul` **在****.**`li` **`#menu`**

 **我认为[CSS 选择器参考](http://www.w3schools.com/cssref/css_selectors.asp)会对您有很大帮助。

* * *

# 建议

*   我建议您提供一段 HTML 代码。
*   我建议你试试[这个](http://www.w3schools.com/html/default.asp)、[这个](http://www.w3schools.com/css/default.asp)和[这个](http://www.w3schools.com/js/default.asp)教程。
*   我建议你看看`:not()`CSS 选择器。**

# python - 向使用 PyYaml 生成的 YAML 添加注释

> ID：13517753
> 
> 赞同：21
> 
> 时间：2012-11-22T17:42:18.963
> 
> 标签：python, yaml, pyyaml

我正在使用 PyYaml 从我自己的 python 对象创建 Yaml 文档。例如我的对象：

```
class MyObj(object):
    name = "boby"
    age = 34 
```

变成：

```
boby:
   age: 34 
```

到现在为止还挺好。

但我还没有找到一种以编程方式向生成的 yaml 添加注释的方法，所以它看起来像：

```
boby:       # this is the name
   age: 34  # in years 
```

查看 PyYaml 文档和代码，我发现没有办法这样做。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-15T12:14:09.797

您可能有一些 MyObj 类的代表，因为默认情况下`print(yaml.dump(MyObj()))`使用 PyYAML 转储 () 将为您提供：

```
!!python/object:__main__.MyObj {} 
```

PyYAML 只能对所需输出中的注释做一件事：丢弃它们。如果您要重新读取所需的输出，您最终会得到一个包含 dict ( 的 dict ，因为没有标签信息`{'boby': {'age': 34}}`，您将无法获得实例)`MyObj()`

我开发的 PyYAML 增强版 ( [ruamel.yaml](https://pypi.python.org/pypi/ruamel.yaml) ) 可以读取带有注释的 YAML，保留注释并在转储时写入注释。如果你阅读你想要的输出，结果数据看起来（和行为）就像一个包含字典的字典，但实际上有更复杂的数据结构可以处理评论。但是，当 ruamel.yaml 要求您转储实例时，您可以创建该结构，`MyObj`并且如果您当时添加注释，您将获得所需的输出。

```
from __future__ import print_function

import sys
import ruamel.yaml
from ruamel.yaml.comments import CommentedMap

class MyObj():
    name = "boby"
    age = 34

    def convert_to_yaml_struct(self):
        x = CommentedMap()
        a = CommentedMap()
        x[data.name] = a
        x.yaml_add_eol_comment('this is the name', 'boby', 11)
        a['age'] = data.age
        a.yaml_add_eol_comment('in years', 'age', 11)
        return x

    @staticmethod
    def yaml_representer(dumper, data, flow_style=False):
        assert isinstance(dumper, ruamel.yaml.RoundTripDumper)
        return dumper.represent_dict(data.convert_to_yaml_struct())

ruamel.yaml.RoundTripDumper.add_representer(MyObj, MyObj.yaml_representer)

ruamel.yaml.round_trip_dump(MyObj(), sys.stdout) 
```

哪个打印：

```
boby:      # this is the name
  age: 34  # in years 
```

无需等待创建`CommentedMap`实例，直到您想要表示`MyObj`实例。例如，我将 make`name`和`age`into 属性，从/上获取/设置值 approprate `CommentedMap`。这样，您可以在`yaml_representer`调用静态方法来表示`MyObj`实例之前更轻松地添加注释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-03T13:21:13.673

这是我想出的解决方案；它有点复杂，但不如 ruamel 复杂，因为它完全与普通的 PyYAML API 一起工作，并且没有*往返注释（因此它不是*[这个其他问题](https://stackoverflow.com/questions/7255885/save-dump-a-yaml-file-with-comments-in-pyyaml)的适当答案）。它可能总体上还没有那么健壮，因为我没有进行广泛的测试，但对于我的用例来说似乎已经足够了，也就是说，我希望 dicts/mappings 能够对整个映射以及每项评论。

我相信往返评论——在这种有限的背景下——也可以通过类似的方法实现，但我没有尝试过，因为它目前不是我拥有的用例。

最后，虽然这个解决方案没有实现向列表/序列中的项目添加每个项目的评论（因为这不是我目前需要的东西），但它可以很容易地扩展到这样做。

首先，就像在 ruamel 中一样，我们需要一种`CommentedMapping`类，它将评论与[Mapping](https://docs.python.org/3/glossary.html#term-mapping)中的每个键相关联。有很多可能的方法。我的只是一个：

```
from collections.abc import Mapping, MutableMapping

class CommentedMapping(MutableMapping):
    def __init__(self, d, comment=None, comments={}):
        self.mapping = d
        self.comment = comment
        self.comments = comments

    def get_comment(self, *path):
        if not path:
            return self.comment

        # Look the key up in self (recursively) and raise a
        # KeyError or other execption if such a key does not
        # exist in the nested structure
        sub = self.mapping
        for p in path:
            if isinstance(sub, CommentedMapping):
                # Subvert comment copying
                sub = sub.mapping[p]
            else:
                sub = sub[p]

        comment = None
        if len(path) == 1:
            comment = self.comments.get(path[0])
        if comment is None:
            comment = self.comments.get(path)
        return comment

    def __getitem__(self, item):
        val = self.mapping[item]
        if (isinstance(val, (dict, Mapping)) and
                not isinstance(val, CommentedMapping)):
            comment = self.get_comment(item)
            comments = {k[1:]: v for k, v in self.comments.items()
                        if isinstance(k, tuple) and len(k) > 1 and k[0] == item}
            val = self.__class__(val, comment=comment, comments=comments)
        return val

    def __setitem__(self, item, value):
        self.mapping[item] = value

    def __delitem__(self, item):
        del self.mapping[item]
        for k in list(self.comments):
            if k == item or (isinstance(k, tuple) and k and k[0] == item):
                del self.comments[key]

    def __iter__(self):
        return iter(self.mapping)

    def __len__(self):
        return len(self.mapping)

    def __repr__(self):
        return f'{type(self).__name__}({self.mapping}, comment={self.comment!r}, comments={self.comments})' 
```

这个类既有一个`.comment`属性，所以它可以携带映射的整体注释，以及一个`.comments`包含每个键注释的属性。它还允许通过将键路径指定为元组来为嵌套字典中的键添加注释。例如，允许为嵌套字典中`comments={('c', 'd'): 'comment'}`的键指定注释。从 获取项目时，如果项目的值是 dict/Mapping，它也会以保留其注释的方式包装在 a 中。这对于递归调用嵌套结构的 YAML 表示器很有用。`'d'``'c'``CommentedMapping``CommentedMapping`

接下来我们需要实现一个自定义的 YAML [Dumper](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/dumper.py#L45)，它负责将对象序列化为 YAML 的整个过程。Dumper 是一个复杂的类，它由其他四个类 an [`Emitter`](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/emitter.py#L31)、 a [`Serializer`](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/serializer.py#L11)、 a[`Representer`](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/representer.py#L272)和 a组成[`Resolver`](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/resolver.py#L167)。其中我们只需要实现前三个；`Resolver`s 更关心的是，例如隐含的标量如何`1`解析为正确的类型，以及确定各种值的默认标签。这里并没有真正涉及。

首先我们实现一个*解析器*。解析器负责识别不同的 Python 类型，并将它们映射到本机 YAML 数据结构/表示图中的相应*节点*。即，这些包括标量节点、序列节点和映射节点。例如，基`Representer`类包含一个 Python `dict`s 的表示器，它将它们转换为 a `MappingNode`（dict 中的每个项目又由一对`ScalarNode`s 组成，一个用于每个键，一个用于每个值）。

为了将注释附加到整个映射以及映射中的每个键，我们引入了两种新`Node`类型，它们不是 YAML 规范的正式组成部分：

```
from yaml.node import Node, ScalarNode, MappingNode

class CommentedNode(Node):
    """Dummy base class for all nodes with attached comments."""

class CommentedScalarNode(ScalarNode, CommentedNode):
    def __init__(self, tag, value, start_mark=None, end_mark=None, style=None,
                 comment=None):
        super().__init__(tag, value, start_mark, end_mark, style)
        self.comment = comment

class CommentedMappingNode(MappingNode, CommentedNode):
    def __init__(self, tag, value, start_mark=None, end_mark=None,
                 flow_style=None, comment=None, comments={}):
        super().__init__(tag, value, start_mark, end_mark, flow_style)
        self.comment = comment
        self.comments = comments 
```

然后我们添加 a `CommentedRepresenter`，其中包含将 a 表示`CommentedMapping`为 a 的代码`CommentedMappingNode`。实际上，它只是重用基类的代码来表示映射，但将返回的转换`MappingNode`为`CommentedMappingNode`. 它还将每个键从 a 转换`ScalarNode`为 a `CommentedscalarNode`。我们基于`SafeRepresenter`这里，因为我不需要序列化任意 Python 对象：

```
from yaml.representer import SafeRepresenter

class CommentedRepresenter(SafeRepresenter):
    def represent_commented_mapping(self, data):
        node = super().represent_dict(data)
        comments = {k: data.get_comment(k) for k in data}
        value = []
        for k, v in node.value:
            if k.value in comments:
                k = CommentedScalarNode(
                        k.tag, k.value,
                        k.start_mark, k.end_mark, k.style,
                        comment=comments[k.value])
            value.append((k, v))

        node = CommentedMappingNode(
            node.tag,
            value,
            flow_style=False,  # commented dicts must be in block style
                               # this could be implemented differently for flow-style
                               # maps, but for my case I only want block-style, and
                               # it makes things much simpler
            comment=data.get_comment(),
            comments=comments
        )
        return node

    yaml_representers = SafeRepresenter.yaml_representers.copy()
    yaml_representers[CommentedMapping] = represent_commented_mapping 
```

接下来我们需要实现一个子类`Serializer`。*序列化*器负责遍历节点的表示图，并为每个节点输出一个或多个事件到发射*器*，发射器是一个复杂（有时难以遵循）的状态机，它接收事件流并输出适当的 YAML每个事件的标记（例如，当接收到时，如果它是流式映射，`MappingStartEvent`将输出 a ，和/或为后续输出添加适当的缩进级别，直到对应的.`{``MappingEndEvent`

重点是，新的序列化程序必须输出表示评论的事件，以便发射器知道何时需要发出评论。这只是通过添加 a`CommentEvent`并在每次在表示中遇到a `CommentedMappingNode`or时发出它们来处理：`CommentedScalarNode`

```
from yaml import Event

class CommentEvent(yaml.Event):
    """
    Simple stream event representing a comment to be output to the stream.
    """
    def __init__(self, value, start_mark=None, end_mark=None):
        super().__init__(start_mark, end_mark)
        self.value = value

class CommentedSerializer(Serializer):
    def serialize_node(self, node, parent, index):
        if (node not in self.serialized_nodes and
                isinstance(node, CommentedNode) and
                not (isinstance(node, CommentedMappingNode) and
                     isinstance(parent, CommentedMappingNode))):
            # Emit CommentEvents, but only if the current node is not a
            # CommentedMappingNode nested in another CommentedMappingNode (in
            # which case we would have already emitted its comment via the
            # parent mapping)
            self.emit(CommentEvent(node.comment))

        super().serialize_node(node, parent, index) 
```

接下来，`Emitter`需要对`CommentEvent`s 进行子类化处理。这可能是最棘手的部分，因为正如我所写，发射器有点复杂和脆弱，并且以难以修改状态机的方式编写（我很想更清楚地重写它，但没有时间现在）。所以我尝试了许多不同的解决方案。

这里的关键方法是[`Emitter.emit`](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/emitter.py#L111)处理事件流，并调用“状态”方法，这些方法根据机器所处的状态执行一些操作，而这些状态又受到流中出现的事件的影响。一个重要的认识是，在许多情况下，流处理在等待更多事件进入时被挂起——这就是该[`Emitter.need_more_events`](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/emitter.py#L120)方法的职责。在某些情况下，在处理当前事件之前，需要先进入更多事件。例如，在`MappingStartEvent`至少需要在流上缓冲 3 个事件：第一个键/值对，以及可能的下一个键。发射器在开始格式化地图之前需要知道地图中是否有一个或多个项目，并且可能还需要知道第一个键/值对的长度。在处理当前事件之前所需的事件数在`need_more_events`方法中是硬编码的。

问题是这并没有考虑`CommentEvent`到事件流上现在可能存在的 s，这不应该影响其他事件的处理。因此[`Emitter.need_events`](https://github.com/yaml/pyyaml/blob/2f463cf5b0e98a52bc20e348d1e69761bf263b86/lib3/yaml/emitter.py#L133)，解释 s 存在的方法`CommentEvent`。例如，如果当前事件是`MappingStartEvent`，并且缓冲了 3 个后续事件，如果其中一个是`CommentEvent`我们无法计算的，那么我们至少需要 4 个事件（以防下一个是预期事件之一在映射中）。

最后，每次`CommentEvent`在流中遇到 a 时，我们都会强行跳出当前的事件处理循环来处理注释的写入，然后`CommentEvent`从流中弹出并继续，就好像什么都没发生一样。这是最终结果：

```
import textwrap
from yaml.emitter import Emitter

class CommentedEmitter(Emitter):
    def need_more_events(self):
        if self.events and isinstance(self.events[0], CommentEvent):
            # If the next event is a comment, always break out of the event
            # handling loop so that we divert it for comment handling
            return True
        return super().need_more_events()

    def need_events(self, count):
        # Hack-y: the minimal number of queued events needed to start
        # a block-level event is hard-coded, and does not account for
        # possible comment events, so here we increase the necessary
        # count for every comment event
        comments = [e for e in self.events if isinstance(e, CommentEvent)]
        return super().need_events(count + min(count, len(comments)))

    def emit(self, event):
        if self.events and isinstance(self.events[0], CommentEvent):
            # Write the comment, then pop it off the event stream and continue
            # as normal
            self.write_comment(self.events[0].value)
            self.events.pop(0)

        super().emit(event)

    def write_comment(self, comment):
        indent = self.indent or 0
        width = self.best_width - indent - 2  # 2 for the comment prefix '# '
        lines = ['# ' + line for line in wrap(comment, width)]

        for line in lines:
            if self.encoding:
                line = line.encode(self.encoding)
            self.write_indent()
            self.stream.write(line)
            self.write_line_break() 
```

我还尝试了不同的方法来实现`write_comment`. 基`Emitter`类有它自己的方法 ( `write_plain`)，它可以通过适当的缩进和换行处理将文本写入流。但是，它不够灵活，无法处理诸如注释之类的内容，其中每一行都需要以`'# '`. 我尝试的一种技术是猴子修补`write_indent`处理这种情况的方法，但最后它太丑陋了。我发现简单地使用 Python 的内置`textwrap.wrap`就足够了。

接下来，我们通过子类化现有`SafeDumper`但将我们的新类插入 MRO 来创建转储程序：

```
from yaml import SafeDumper

class CommentedDumper(CommentedEmitter, CommentedSerializer,
                      CommentedRepresenter, SafeDumper):
    """
    Extension of `yaml.SafeDumper` that supports writing `CommentedMapping`s with
    all comments output as YAML comments.
    """ 
```

这是一个示例用法：

```
>>> import yaml
>>> d = CommentedMapping({
...     'a': 1,
...     'b': 2,
...     'c': {'d': 3},
... }, comment='my commented dict', comments={
...     'a': 'a comment',
...     'b': 'b comment',
...     'c': 'long string ' * 44,
...     ('c', 'd'): 'd comment'
... })
>>> print(yaml.dump(d, Dumper=CommentedDumper))
# my commented dict
# a comment
a: 1
# b comment
b: 2
# long string long string long string long string long string long string long
# string long string long string long string long string long string long string
# long string long string long string long string long string long string long
# string long string long string long string long string long string long string
# long string long string long string long string long string long string long
# string long string long string long string long string long string long string
# long string long string long string long string long string
c:
  # d comment
  d: 3 
```

我还没有非常广泛地测试这个解决方案，它可能仍然包含错误。当我更多地使用它并找到角落案例等时，我会更新它。

# android - 如何获得设备中支持的最大图片尺寸？

> ID：13517755
> 
> 赞同：3
> 
> 时间：2012-11-22T17:42:18.473
> 
> 标签：android, camera, resolution, image

我想使用支持的最高分辨率`SurfaceView`拍照。`PictureCallBack`

这是适用于我的 Galaxy Nexus 的配置：

```
 Camera.Parameters params = camera.getParameters();
    List<Camera.Size> sizes = params.getSupportedPictureSizes();
    Toast.makeText(MainActivity.this,"Supported Sizes: " + sizes,Toast.LENGTH_LONG).show();

    params.setPictureSize(2592, 1944);
    params.setJpegQuality(100);

    camera.setParameters(params); 
```

2592 x 1944 是我设备的最佳分辨率，但我如何从`var sizes`任何设备的最高分辨率中获得？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T22:08:12.057

循环遍历您的列表，并将高度和宽度相乘以获得像素数并保留最大索引的变量

```
int max = 0;
int index = 0;

for (int i = 0; i < List.size(); i++){
     Size s = List.get(i);
     int size = s.height * s.width;
     if (size > max) {
         index = i;
         max = size;
     }
}
params.setPictureSize(List.get(index).width, List.get(index).height); 
```

# ruby-on-rails - 带回形针的水印

> ID：13517757
> 
> 赞同：1
> 
> 时间：2012-11-22T17:42:24.233
> 
> 标签：ruby-on-rails

根据这个例子（http://dimaspriyanto.com/2010/06/08/image-watermarking-with-paperclip/），我尝试在我上传的每张图片上加上水印（现在，我克制自己一）。

你猜怎么着？它不起作用！

所以在我的图片模型中，我有

```
require 'paperclip_processors/watermark'
  has_attached_file :image,
                  :styles => {:medium => "300x300^", :thumb => "150x105^",
                      :large => {
                          :geometry => "460",
                          :watermark_path => ":rails_root/public/images/watermark.png"
                      }
                  },
                  :url => "/images/:style/:id_:style.:extension",
                  :path => ":rails_root/public/images/:style/:id_:style.:extension" 
```

在 /lib/paperclip_processors/watermark.rb 中，我有：

```
module Paperclip
  class Watermark < Processor

    attr_accessor :current_geometry, :target_geometry, :format, :whiny, :convert_options, :watermark_path, :overlay, :position

    def initialize file, options = {}, attachment = nil
       super
       geometry          = options[:geometry]
       @file             = file
       @crop             = geometry[-1,1] == '#'
       @target_geometry  = Geometry.parse geometry
       @current_geometry = Geometry.from_file @file
       @convert_options  = options[:convert_options]
       @whiny            = options[:whiny].nil? ? true : options[:whiny]
       @format           = options[:format]
       @watermark_path   = options[:watermark_path]
       @position         = options[:position].nil? ? "SouthEast" : options[:position]
       @overlay          = options[:overlay].nil? ? true : false
       @current_format   = File.extname(@file.path)
       @basename         = File.basename(@file.path, @current_format)
     end

      def crop?
        @crop
      end

      def convert_options?
        not @convert_options.blank?
      end

      def make
        dst = Tempfile.new([@basename, @format].compact.join("."))
        dst.binmode

        if watermark_path
          command = "composite"
          params = "-gravity #{@position} #{watermark_path} #{fromfile} #{transformation_command} #{tofile(dst)}"
        else
          command = "convert"
          params = "#{fromfile} #{transformation_command} #{tofile(dst)}"
        end

        begin
          success = Paperclip.run(command, params)
        rescue PaperclipCommandLineError
          raise PaperclipError, "There was an error processing the watermark for #{@basename}" if @whiny
        end

        dst
      end

      def fromfile
        "\"#{ File.expand_path(@file.path) }[0]\""
      end

      def tofile(destination)
        "\"#{ File.expand_path(destination.path) }[0]\""
      end    

      def transformation_command
        scale, crop = @current_geometry.transformation_to(@target_geometry, crop?)
        trans = "-resize \"#{scale}\""
        trans << " -crop \"#{crop}\" +repage" if crop
        trans << " #{convert_options}" if convert_options?
        trans
      end

  end

end 
```

水印在 /public/images/ 并且在此过程中不会崩溃，我的意思是图片已上传，各种尺寸，但大的是裸照，没有水印。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:13:19.443

这是工作的预处理器（我使用它） [https://gist.github.com/2499137](https://gist.github.com/2499137)

这是您模型的示例代码：

```
has_attached_file :data,
                  :processors => [:watermark],
                  :url  => "/ckeditor_assets/pictures/:id/:style_:basename.:extension",
                  :path => ":rails_root/public/ckeditor_assets/pictures/:id/:style_:basename.:extension",
                  :styles => {
                    :thumb => '118x100#',
                    :content => {
                      :geometry => '700>',
                      :watermark_path => "#{Rails.root}/public/images/watermark.png",
                      :position => 'SouthWest'
                    },
                  } 
```

# c# - 我应该对已建立的代码进行单元测试吗？

> ID：13517758
> 
> 赞同：0
> 
> 时间：2012-11-22T17:42:27.577
> 
> 标签：c#, unit-testing

对于 C# 中的单元测试，我从实现新功能或开始新解决方案的想法中看到了这一点，最好从那时开始进行单元测试。

但是，当已经建立了一个完全成熟的解决方案而几乎没有创建单元测试时，如果已经有足够的异常处理，那么测试的意义何在？

我正在编写单元测试，但是当我无法将格式错误的数据传递到任何我正在测试的东西中时，我没有看到这一点，因为我主要使用的是 ENUM！

除非我错过了一些绝对疯狂的东西。我是否在浪费时间回到旧代码来集成单元测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:44:10.160

当您当前或将来要使用现有代码时，为现有代码编写单元测试很有帮助。这些测试可帮助您确保不会引入任何新错误或不情愿地改变某些行为。

此外，为现有代码编写测试有助于确定可能未知或复杂实现的实际功能。

在极少数情况下，开发人员再也不会接触到无错误软件，添加单元测试可能对您没有太大帮助。但在任何其他情况下，它都有助于记录行为并为未来建立安全网。

哦，既然您提到它：使用`enums`不会保护您免于在 C# 中传递无效参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:57:20.217

不，为现有代码编写测试不会浪费时间。如果您以任何方式维护代码，最好进行单元测试。

你的主要挑战将是工作的范围——为大量代码编写单元测试并不容易，当然也不好玩。我强烈建议您采用迭代方法。在第一轮中，关注提供良好类覆盖率的单元测试可能是一个好主意，这是一个基本指标，也是一个很好的起点。

在达到您认为有意义的类覆盖率水平之后，您可以将注意力扩展到代码覆盖率之外的其他领域。

使用像 NCover 这样的覆盖工具将真正有助于在这里提供一些指标。

# java - 从java套接字发送html

> ID：13517759
> 
> 赞同：2
> 
> 时间：2012-11-22T17:42:26.367
> 
> 标签：java, html, sockets, output

我正在尝试使用包装在 BufferedWriter 中的 Java 套接字发送“index.html”代码。当我打开浏览器并连接到 'localhost:port' 时，我得到：

*   文本输出 ( `<head>...</head> <body>...</body>`) - firefox@linux
*   文本输出 - chrome@linux
*   正确的网页视图 - konqueror@linux
*   文本输出 - firefox@windows7

如何解决此问题以获得每个浏览器的正确视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:55:24.293

> 如何解决此问题以获得每个浏览器的正确视图？

根据您的描述，听起来您的代码严重违反了 HTTP 协议，并且每个浏览器都以不同的方式处理此违规行为。您需要做的第一件事是重温 HTTP 请参阅[http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6)

听起来您没有发送响应状态行，包括 Content-Length 等所需的标头，然后是消息正文（您的 index.html）

在阅读 RFC2616 并了解遵守 HTTP 协议所涉及的内容之后，您可能需要重新考虑自己做这件事，并考虑使用几个框架中的任何一个来为您处理这个问题 - [Tomcat](http://tomcat.apache.org)和[Jetty](http://jetty.codehaus.org/jetty/)是非常流行的基于 Java 的 HTTP 框架。 [Netty](https://netty.io)也是一种选择，它是一个更轻量级的可定制框架。

# .htaccess - 将域重定向到另一个域，包括文件夹结构（如果可能，使用 SSL）

> ID：13517760
> 
> 赞同：1
> 
> 时间：2012-11-22T17:42:38.537
> 
> 标签：.htaccess, iis, ssl, dns, web-config

我想将一个域重定向到另一个域，同时还保持相同的文件夹和文件请求结构，如下所示：

```
http://libraries.domain.net/testing/another/blah.php
https://libraries.anotherdomain.com/testing/another/blah.php 
```

暂时忽略 SSL 部分。

我的第一个问题很简单：

1.  如何在我的`web.config`文件（IIS）中实现这一点？
2.  这种类型的重定向称为什么？
3.  为了我自己的利益，我该如何处理`.htaccess`文件呢？您不必回答这个问题，因为我认为这个[问题](https://stackoverflow.com/questions/10778448/redirect-domain-to-another-domain-same-subfolder-structure)无论如何都有正确的答案，但只是希望它得到确认。

**请注意：**如果您只知道问题 3 的答案，请不要回答，因为我的主要问题是关于如何在 IIS 中执行此操作，而不是 Apache。

## SSL

到目前为止，我已将这部分排除在外，因为我不确定是否可以在不收到安全错误的情况下进行操作。但是，我想知道的是如何在保持安全连接的同时执行上述重定向？

显然`anotherdomain.com` **必须**有一个有效的 SSL 证书，但`domain.com`即使它正在转发所有页面也必须有一个有效的证书？

拥有两个证书会防止出现任何错误，还是会出现警告说`You are not going to where you think you are going`，或类似的东西？

使用 DNS 执行此操作会更好吗？SSL 可以与 DNS 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:52:20.260

> *如何在我的 web.config 文件（IIS）中实现这一点？*

请参阅以下内容：

*   [http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)
*   [http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-video-walkthrough](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-video-walkthrough)
*   [http://blogs.iis.net/ruslany/archive/2009/04/08/10-url-rewriting-tips-and-tricks.aspx](http://blogs.iis.net/ruslany/archive/2009/04/08/10-url-rewriting-tips-and-tricks.aspx)

使用 IIS URL 重写的示例：

```
<rule name="Redirect example.net to example.com" enabled="true" stopProcessing="true">
  <match url="(.*)" />
  <conditions>
    <add input="{HTTP_HOST}" pattern="example\.net$" negate="false" />
  </conditions>
  <action type="Redirect" url="http://www.example.com/{R:1}" redirectType="Permanent" />
</rule> 
```

* * *

> *这种类型的重定向称为什么？*

我不确定这是否有特定的名称。我只是将其称为域重定向或 30 倍重定向。

* * *

> 为了我自己的利益，我如何使用 .htaccess 文件来执行此操作？您不必回答这个问题，因为我认为这个[问题](https://stackoverflow.com/questions/10778448/redirect-domain-to-another-domain-same-subfolder-structure)无论如何都有正确的答案，但只是希望它得到确认。

*   [https://stackoverflow.com/a/3010036/908471](https://stackoverflow.com/a/3010036/908471)
*   [http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

```
RewriteEngine on

RewriteCond %{HTTP_HOST} example.net$
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

* * *

> *拥有两个证书会防止出现任何错误，还是会发出警告说你不会去你认为你要去的地方，或者类似的东西？*

是的，来自受信任的证书颁发机构的两个有效证书将防止出现错误（只要页面上的所有内容也来自有效的 https 链接）。如果证书颁发机构提供 SubjectAltName 支持（也称为 SAN 或统一通信证书），您也可以只使用一个证书。

如果您有两个有效证书且只有一个 IP，您可以做的另一件事是使用[SNI](http://en.wikipedia.org/wiki/Server_Name_Indication)，但您需要了解[并非所有 Web 客户端都可以使用 SNI](http://en.wikipedia.org/wiki/Server_Name_Indication#No_support) - 所以要小心。SNI 的使用正在增加，我建议这将成为首选方法，因为您不必处理更新时应该在 SAN/UCC 上跟踪域的麻烦。

* * *

> *使用 DNS 执行此操作会更好吗？SSL 可以与 DNS 一起使用吗？*

DNS 与 SSL 无关。您不能通过 DNS 恶作剧来欺骗 SSL。

# android - 相同的代码在不同类型的模拟器上产生不同的结果

> ID：13517766
> 
> 赞同：1
> 
> 时间：2012-11-22T17:42:57.600
> 
> 标签：android, google-api, emulation

我正在尝试为 android 创建一个应用程序，它允许用户从特定网站发送短信，它还允许检查他们在该网站上的帐户中贷记的金额。但我面临一个奇怪的问题。同一段代码在不同类型的模拟器上产生不同的输出。也就是说，当在带有 TARGET 的模拟器上进行测试时，`ANDROID 2.3.3`它运行良好并产生了预期的结果，但是当我在带有 TARGET 的模拟器上运行相同的应用程序时，`GOOGLE APIS - API LEVEL 10`我总是得到`null`输出。此外，我在我的 Android 4.0 设备上测试了该应用程序，即使在手机上我总是得到`null`输出。我正在提出问题的情况截图。任何人都可以使用连接到我的电脑吗`TEAMVIEWER`并帮助我解决错误，我不能在这里透露完整的代码，但要给出关于它的想法，这是我使用过的导入

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder; 
```

一些代码是这样的：

```
Pattern r = Pattern.compile(pattern);
Matcher m = r.matcher(rs); 
```

截图：

![截屏](../Images/a8c44dcfd5ad8b84ef6434e8625a4687.png)

**编辑：**

```
BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
StringBuilder response = new StringBuilder();
String line;
while ((line = rd.readLine()) != null) {
    response.append(line);
}
String text = response.toString();
int start = text.indexOf("<p>Rs</p>");
int end = text.indexOf("<div class=\"paisa_bg\">");
String rs = text.substring(start, end);
String pattern = "<h1>(\\d+)</h1>"; 
```

**HTTPURL连接**

```
String data = URLEncoder.encode("PARAM1", "UTF-8") + "=" + URLEncoder.encode("VALUE1", "UTF-8");
                data = data + "&" + URLEncoder.encode("PARAM2", "UTF-8") + "=" + URLEncoder.encode(VALUE2, "UTF-8");
                data = data + "&" + URLEncoder.encode("PARAM3", "UTF-8") + "=" + URLEncoder.encode(VALUE3, "UTF-8");
                data = data + "&" + URLEncoder.encode("PARAM4", "UTF-8") + "=" + URLEncoder.encode("VALUE4", "UTF-8");
                data = data + "&" + URLEncoder.encode("PARAM5", "UTF-8") + "=" + URLEncoder.encode("VALUE5", "UTF-8");

                URL url = new URL("http://www.somewebsite.com/somepage.php");
                HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                conn.setDoOutput(true);
                conn.setRequestMethod("GET");
                conn.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/534.29 (KHTML, like Gecko) Chrome/12.0.733.0 Safari/534.29");
                conn.setRequestProperty("Cookie", cookie);
                conn.setDoOutput(true);
                OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
                wr.write(data);
                wr.flush(); 
```

# actionscript-3 - AS3 点击movieclip改变饱和度

> ID：13517769
> 
> 赞同：1
> 
> 时间：2012-11-22T17:43:31.030
> 
> 标签：actionscript-3

我真的是 Flash 新手，并且正在努力寻找一种方法来做到这一点：我希望我的电影剪辑 (myMC) 开始时没有饱和度，然后在单击时恢复饱和度。

```
import fl.motion.MotionEvent;

var color:AdjustColor = new AdjustColor();

myMC.filters.saturation = -100;

color = new AdjustColor();
color.brightness = 20;
color.contrast = 20;
color.hue = 0;
color.saturation = -100;

myMC.addEventListener(MouseEvent.MOUSE_DOWN, mousedwn);
function mousedwn (event:MouseEvent):void{

myMC.filters = [colorFilter]

} 
```

我似乎在网上找不到任何东西......感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:56:09.503

一个非常简单的方法是使用来自[http://www.greensock.com/tweenmax/的 TweenMax](http://www.greensock.com/tweenmax/)

只需一行代码。

TweenMax.to(mc, 1, {colorMatrixFilter:{amount:1,saturation:1}});

在页面的一半处尝试插件资源管理器。颜色矩阵过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:52:05.360

我在搜索谷歌时发现了这个。
[使用 AS3 更改饱和度](http://www.actionscript.org/forums/showthread.php3?t=215303)

它使用`flash.filters.ColorMatrixFilter`, 而不是您必须下载的插件。

# java - JFileChooser 过滤器

> ID：13517770
> 
> 赞同：21
> 
> 时间：2012-11-22T17:43:33.467
> 
> 标签：java, image, swing, jfilechooser

我`JFileChooser`在我的程序中放了一个，但这只需要图像。所以我决定添加过滤器：

## 代码

```
import javax.swing.*;

public class fileChooser {

 public static void main(String[] args) {
    JPanel panel = new JPanel();

    final JFileChooser fc = new JFileChooser();
    int file = fc.showOpenDialog(panel);
    fc.addChoosableFileFilter(new ImageFilter());
    fc.setAcceptAllFileFilterUsed(false);
 }
} 
```

我是直接从 Java 教程中得到的。但 Eclipse 将以下内容强调为错误：

```
fc.addChoosableFileFilter(new ImageFilter());
fc.setAcceptAllFileFilterUsed(false); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-23T00:05:16.720

> 我在我的程序中放了一个 JFileChooser，但这只需要图像。

有关该操作系统上该 JRE 支持的类型列表，请使用[`ImageIO`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html).

```
FileFilter imageFilter = new FileNameExtensionFilter(
    "Image files", ImageIO.getReaderFileSuffixes()); 
```

## 看到的类型 - Java 1.6/Windows 7

```
bmp
jpg
jpeg
wbmp
png
gif 
```

**注意：**不要对该列表进行硬编码！它可能会因版本而异，也可能会因操作系统而异。例如

1.  我对 Windows 支持加载 BMP 并不感到惊讶，但在 Mac 中会出现这种情况吗？
2.  看到[WBMP](http://en.wikipedia.org/wiki/Wireless_Application_Protocol_Bitmap_Format)让我意识到这种格式的存在！

[如果安装了jai](/questions/tagged/jai "显示标记为“jai”的问题") ，该列表将具有更多格式。

## 过滤器显示在选择器中

![图像选择器](../Images/f83d98300025051ab268e8ae7e217d74.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-22T17:54:40.673

的参数`fc.addChoosableFileFilter()`应该是 的子类`javax.swing.filechooser.FileFilter`。例如，您可以将代码更改为

```
fc.addChoosableFileFilter(new FileNameExtensionFilter("Image Files", "jpg", "png", "tif"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-14T06:45:20.193

我正在使用 setFileFilter()。

我的代码如下（JAVA-JSE 1.6）

```
JFileChooser c = new JFileChooser();
//Setting Up The Filter
FileFilter imageFilter = new FileNameExtensionFilter(
    "Image files", ImageIO.getReaderFileSuffixes());

//Attaching Filter to JFileChooser object
c.setFileFilter(imageFilter);

//Displaying Filechooser
int rVal = c.showOpenDialog(new JPanel()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T17:50:21.743

您使用了错误的 ImageFiler 类:-)

教程中的 ImageFilter 不是来自您正在导入的 java.awt 包。此 ImageFilter 必须实现 javax.swing.filechooser.FileFilter。

请检查教程中是否定义了其他 ImageFilter 类并使用它。

正确的文件过滤器示例：

```
new JFileChooser().addChoosableFileFilter(new FileFilter() {

        @Override
        public boolean accept(File f) {
            // TODO Auto-generated method stub
            return f.getName().endsWith(".jpg");
        }

        @Override
        public String getDescription() {
            return "JPEG files";
        }

    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-24T04:09:31.863

您可以使用`FileFilter`类，然后使用`setFileFilter()`

```
class ImageFilter extends FileFilter {

@Override
public boolean accept(File pathname) {
  String filename = pathname.getName();
  if (pathname.isDirectory()) {
    return true;

  } else if (filename.endsWith("jpg'") || filename.endsWith("jpeg") || filename.endsWith("png") || filename.endsWith("gif")) {
    return true;
  } else {
    return false;
  }
} 
```

现在在您的主要课程中：

```
fc.setFileFilter(new ImageFilter()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-10T09:15:33.870

接受的答案（使用带有 ImageIO.getReaderFileSuffixes() 的 FileNameExtensionFilter）有一些问题。

在我的系统上（Ubuntu 上的 jdk1.8.0_192） ImageIO.getReaderFileSuffixes() 返回一个像这样的数组：

```
[, jpg, tiff, bmp, pcx, gif, png, ppm, tif, pgm, wbmp, jpeg, pbm] 
```

注意第一个空字符串。此字符串在 FileNameExtensionFilter 中无效：

```
IllegalArgumentException: Each extension must be non-null and not empty 
```

一个解决方案是删除空字符串 - 使用 Apache commons-lang：

```
String[] extensions = ArrayUtils.removeAllOccurences(ImageIO.getReaderFileSuffixes(), "");
FileFilter filter = new FileNameExtensionFilter("Images", extensions); 
```

附带说明 - 在具有 openjdk 版本“11.0.2”2019-01-15 的同一系统上，我得到了这些扩展：

```
[jpg, tif, tiff, bmp, gif, png, wbmp, jpeg] 
```

# javascript - 有人可以解释一下这个删除数组中重复值的函数是如何工作的吗？

> ID：13517772
> 
> 赞同：2
> 
> 时间：2012-11-22T17:43:39.027
> 
> 标签：javascript, arrays

我一直在寻找一个删除数组中重复值的 javascript 函数。我发现了这个功能：

```
function removeDuplicateElement(arrayName)
{
    var newArray=new Array();
    label:for(var i=0; i<arrayName.length;i++ )
    {   
        for(var j=0; j<newArray.length;j++ )
        {
            if(newArray[j]==arrayName[i]) 
            continue label;
        }
        newArray[newArray.length] = arrayName[i];
    }
    return newArray;
} 
```

这就是我需要的。有人可以解释一下这个功能是如何工作的，以及那个“标签：”是什么吗？我无法理解这段代码的逻辑，如果有人能给我一个解释，那就太好了。10倍

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:47:21.730

在 JavaScript 中，您可以在or语句中将 a指定`label:`为要跳转到的位置。因此，当达到时，迭代将返回到外部 for 循环，而不是它所在的内部循环（这将是 的默认行为）`continue``break``continue``continue`

基本上，此函数通过创建一个新数组`newArray`（不修改旧数组）并遍历原始数组中的每个元素来工作。它将原始数组中的元素添加到`newArray`if not already found 中。`newArray`它通过在旧数组循环的每次迭代中循环它并查找匹配值来确定它是否已经存在`arrayName[i]`

```
function removeDuplicateElement(arrayName)
{
    // Declares a new array to hold the deduped values
    var newArray=new Array();
    // Loops over the original array
    // label: here defines a point for the continue statement to target
    label:for(var i=0; i<arrayName.length;i++ )
    {   
        // Loops over the new array to see if the current value from the old array
        // already exists here
        for(var j=0; j<newArray.length;j++ )
        {
            // The new array already has the current loop val from the old array
            if(newArray[j]==arrayName[i]) 
            // So it returns to the outer loop taking no further action 
            // This advances the outer loop to its next iteration
            continue label;
        }
        // Otherwise, the current value is added to the new array
        newArray[newArray.length] = arrayName[i];
    }
    // The new deduped array is returned from the function
    return newArray;
} 
```

有关`continue`此上下文中的功能的更多信息，[请查看 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/continue)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:47:11.320

该函数遍历现有数组中的所有元素，如果它们不在新数组中，则将它们添加到新数组中。允许内`label`循环使用`continue`语句继续*外*循环的下一次迭代，而不是内循环的下一次迭代。常规`continue`只会重复内部循环，无论如何都会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:03:24.687

您可以使用 ES5 方法简化一点：

```
function dumpDupes ( arr ) {
    var arr2 = [];
    arr.forEach(function ( item ) {
        if ( arr2.indexOf( item ) === -1 ) arr2.push( item );
    });
    return arr2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T06:42:43.353

仅供参考[Sizzle 的方法](https://github.com/jquery/sizzle/blob/master/sizzle.js#L784)更快：

```
function dedupe(array) {
    array.sort();
    for(var i = 1; i < array.length; i++) {
        if (array[i-1] == array[i])
            array.splice(i--, 1);
    }

    return array;
} 
```

尽管我实际上是在调整它以查看是否可以在 jsperf.com 上加快它的速度 - 这实际上比任何一个都快：

```
function dedupeManyDupes(array) {
    array.sort();
    var l = array.length;
    for(var i = 1; i < l; i++) {
        if (array[i-1] == array[i]) {
            var dupe = array[i];
            var mark = i;
            for(i++; i < l && array[i] == dupe; i++)
            {}
            var snip = i - mark;
            array.splice(mark, snip);
            i -= snip;
            l -= snip;
        }
    }
    return array;
} 
```

[http://jsperf.com/js-dedupe-small](http://jsperf.com/js-dedupe-small)
[http://jsperf.com/js-dedupe-large](http://jsperf.com/js-dedupe-large)
[http://jsperf.com/js-dedupe-many-dupes](http://jsperf.com/js-dedupe-many-dupes)

[http://jsfiddle.net/b9chris/fLBTv/](http://jsfiddle.net/b9chris/fLBTv/)

# html - 用于确认、错误和警告消息的语义 HTML

> ID：13517773
> 
> 赞同：13
> 
> 时间：2012-11-22T17:43:49.540
> 
> 标签：html, semantic-markup, error-messaging

人们对用于确认、错误和警告消息的语义 HTML 有何看法？

目前我有一些简单的东西，比如：

```
<div class="message message-warning">
     <h3>Message Title</h3>
     <p>Message text</p>
</div> 
```

从而`message-warning`类被替换`message-confirmation`或者`message-error`如果消息是不同的类型。

有没有更语义化的方式来标记它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T01:54:15.607

我可以建议`<figure>`吗？

摘自[HTML5 Doctor](http://html5doctor.com/the-figure-figcaption-elements/)（以及他们，来自[W3C](http://dev.w3.org/html5/markup/figure.html)）：

> figure 元素表示一个内容单元，可以选择带有标题，它是自包含的，通常作为单个单元从文档的主要流程中引用，并且可以从文档的主要流程中移开而无需影响文档的意义。

让我们先回答问题：

*   这样的对话是一个单一的单元吗？**是的**
*   这样的对话是独立的吗？**是的**
*   这样的对话框能否在不影响文档含义的情况下从文档中移开？**是的**

是的，它非常适合`<figure>`。

而且，这`<figcaption>`对于标题栏/标题特别有用。

所以，我`<figure>`什至不去想更进一步看：

```
<figure id="dialog-box" class="warning">
    <figcaption>Message Title</figcaption>
    <p>Message text</p>
</figure> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-03T16:06:35.633

使用[element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog)，并调用而不是，或者在渲染服务器端时为其提供[属性`<dialog>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog)。`.show()``.showModal()``open`

只要不以模态方式显示，它就不会阻止与其他页面内容的交互。

* * *

旧答案（以前`<dialog>`是一件事）：

[警报是 ARIA 添加到 HTML 的语义之一](https://www.w3.org/TR/wai-aria/roles#alert)，因为在“纯”HTML 中没有直接的方法。因此：

```
<aside role="alert">
  <h2>Message Title<h2>
  <p>Message Text</p>
</aside> 
```

我个人喜欢将其`<aside>`用作拍打的元素- 正如[Jeff Lindblom 的回答](https://stackoverflow.com/a/20599451/2522637)`role`所描述的那样，它在技术上不是页面内容的一部分。

有一个“语义”的 CSS 选择器很容易：

```
[role="alert"] {
  font-size: 2em; /* or what have you */
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-15T20:34:31.973

这个`<figure>`想法很有趣，但我认为它不适合这里。它缺少的是证明使用标签的实际内容。根据规范，`<figure>`表示“内容单元” - 表示图像、图表、代码块等，可以选择为此内容提供标题 ( `<figcaption>`)。说 外面的消息`<figcaption>`代表一个适当的内容单元将是一个延伸。

在这种情况下，我们也应该谨慎使用`<h#>`标签，因为消息是次要内容，可能不应该是文档大纲的一部分。

[根据修订后的规范](http://dev.w3.org/html5/markup/aside.html)，有人可能会争辩说 an`<aside>`是合适的。在`<article>`.

`<strong>`将适用于消息的“标题”，因为它是消息中语义上更重要的部分，但不是文档标题。所以代码可能看起来像这样：

```
<aside class="warning-or-whatever">
    <strong>Message Title</strong>
    <p>Message Text</p>
</aside> 
```

人们也可以争辩说，由于没有专门为这样的功能创建任何东西，一个好的老式的、语义上没有意义`<div>`的可能是最好的元素。我想这取决于你觉得你的信息有多“切题”。

谢谢，杰夫

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T18:21:54.437

没有。HTML 中没有元素可以表示确认、错误或警告消息。

从技术上讲，该`samp`元素被定义为“程序、脚本等的样本输出”。在 HTML 4.01 和 HTML 3.2 中，虽然最初在 HTML 2.0 中是“文字字符序列，通常以等宽字体呈现”，并且在 HTML5 中被重新定义为“程序或计算系统的（样本）输出”。所以它的意思比较模糊，用的也不多，所以用起来也没有什么实际意义。但有人可能会争辩说，`samp`对来自程序的任何消息使用标记是可以接受的。它是一个文本级元素，因此您需要在内部`h3`和内部 (any)单独使用它`p`，或多或少会破坏结构。

也可以说消息是来自外部来源的引用，因此可以将它们包装在`blockquote`.

与其他一些标记的使用`h3`并不是真正的语义问题，而是结构问题：这是第三级嵌套中某些内容的标题吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T01:43:30.753

我认为该[`strong`元素](https://www.w3.org/TR/2017/REC-html52-20171214/textlevel-semantics.html#the-strong-element)是此类消息的合适元素。

您可以使用*几个* `strong`元素来指示消息的重要性：

```
<strong>Login successfully.</strong> <!-- confirmation --> 
<strong><strong>Wrong login data.</strong></strong> <!-- warning/error --> 
```

如果它是需要标题的独立消息，请使用[`section`元素](https://www.w3.org/TR/2017/REC-html52-20171214/sections.html#the-section-element)而不是`div`. 如果适用于整个页面的严重错误，它应该是页面上的第一个元素。

各种变体是可能的：

```
<section class="message message-error">
  <h1><strong><strong>Error:</strong> Wrong login data.</strong></h1>
  <p>The username and/or password is wrong. Try …&lt;/p>
</section> 
```

```
<section class="message message-error">
  <h1>Error</h1>
  <p><strong><strong>Wrong login data.</strong></strong></p>
  <p>The username and/or password is wrong. Try …&lt;/p>
</section> 
```

```
<section class="message message-error">
  <strong><strong>Wrong login data.</strong></strong>
</section> 
```

```
<section class="message message-error">
  <p><strong><strong>Wrong login data.</strong></strong> Try …&lt;/p>
</section> 
```

使用哪一个取决于消息的类型、是否知道确切的错误、是否提供了额外的帮助文本以及是否可能同时出现多条消息。

请注意，您可能不想为适用于单个`input`元素的消息使用标题（例如，当用户没有填写必填字段或输入错误内容等时），因为这些错误消息应该在相应的或直接在元素`label`旁边。`input`

对于可访问性，您应该查看[WAI-ARIA](http://en.wikipedia.org/wiki/WAI-ARIA)。也许`aria-live="assertive"`可能是标记错误消息的适当方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T19:28:00.590

如果你想去语义化，你可以使用语义网络方法，为消息和警告创建一个本体，并使用[RDFa](http://en.wikipedia.org/wiki/RDFa)将它嵌入到你的 HTML 中。

# linux - 使用 IP 队列时出现 Netlink 错误

> ID：13517776
> 
> 赞同：0
> 
> 时间：2012-11-22T17:43:56.583
> 
> 标签：linux, networking, iptables, ipv4, netlink

我似乎对 IP 队列有疑问。

我有一台 linux 机器，我用它来运行一些实验。linux机器被配置成路由器，有两个网卡，连接另外两台电脑，管理它们的网络流量。使用 iptables 捕获所有传入的包，并由 C 应用程序进行分析。

作为实验的一部分，分析数据包的应用程序具有内置延迟。

所以我有一台非常快的计算机通过我的 linux-router 发送数据包，还有一个（相对）慢的 linux-router 一个一个地分析和处理数据包。

这种情况导致这样一个事实，即当我在连接到 linux-router 的一台计算机上启动发送方应用程序时，我在 linux-router 上的 IP 队列（几乎）瞬间被填满。

IP 队列的最大长度当前设置为 1024，如果溢出，则丢弃数据包。这是意料之中的，我可以接受。

但是，（这就是有趣的地方），我时不时地收到以下错误：

> “接收网络链接消息失败：没有可用的缓冲区空间”

一开始以为是IP队列溢出导致的，但分析后发现有时IP队列缓冲区没有溢出也会报错，有时即使缓冲区DID也收不到消息溢出。

当我运行时`> cat /proc/net/ip_queue`，我得到下表（也用于监控 IP 队列溢出）：

```
Peer PID          : 27389
Copy mode         : 2
Copy range        : 65535
Queue length      : 0
Queue max. length : 1024
Queue dropped     : 1166875
Netlink dropped   : 2916 
```

查看最后两个值，`Queue dropped`似乎是指由于缓冲区已满而无法进入 IP 队列的数据包。当我轰炸 linux-router 时，我可以看到这个值上升。`Netlink dropped`（顾名思义:)）似乎与我遇到的错误有关。

我尽我所能搜索有关此错误的材料，但找不到任何似乎指向我所需方向的内容。

**底线：**为什么我会收到此错误，我该怎么做才能避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:53:00.837

尝试使用 setsockopt 增加 netlink 接收套接字上的接收缓冲区空间。这应该可以消除错误！

# javascript - 使用 jQuery 将视频加载到 JW Player

> ID：13517783
> 
> 赞同：0
> 
> 时间：2012-11-22T17:44:18.383
> 
> 标签：javascript, jquery, jwplayer

因此，在 JW Player 之后，我可以加载一个视频（显然），它看起来像这样：

```
<script type="text/javascript" src="/scripts/jwplayer.js"></script>
<div id="myElement">Loading the player ...</div>
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "/uploads/example.mp4",
        height: 360,
        image: "/uploads/example.jpg",
        width: 640
    });
</script> 
```

一旦触发模态（使用jQuery），我正在尝试实现这种效果以在模态中加载视频：

```
$("body").on('click', '[data-toggle=modal]', function(e){
   var vid = $(this).attr('data-video');
   jwplayer("videoElement").setup({ file: vid, width: 540 });
   jwplayer("videoElement").play();
}); 
```

但是我收到了错误：`Uncaught TypeError: Cannot call method 'setup' of null`

我已经尝试过其他以下（可能是可怕的）想法：

```
$("#videoElement").jwplayer.setup({ file: vid, width: 540 }); 
```

和

```
var $jwplayer = jwplayer();
$("body").on('click', '[data-toggle=modal]', function(e){
  $jwplayer("videoElement").setup({ file: vid, width: 540 });
} 
```

然而，都产生相同的结果`Cannot call method 'setup' of null`

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T13:24:57.530

您只有**myElement**页面上没有**videoElement**：

 **```
<div id="myElement">Loading the player ...</div>
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "/uploads/example.mp4",
        height: 360,
        image: "/uploads/example.jpg",
        width: 640
    });
</script> 
```

你必须使用：

```
jwplayer("myElement").setup({ file: vid, width: 540 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T00:16:38.707

添加此脚本

```
<script>
var trigger = $("body").find('[data-toggle="modal"]');
trigger.click(function () {
   var vid = $(this).attr('data-video');
   jwplayer().load([{ file: vid }]);
   jwplayer().play();
});
</script> 
```

然后像这样格式化你的链接

```
<a href="#" data-toggle="modal" data-target="#videoModal" data-video="example.mp4">Video</a> 
```**

# php - AmazonECS.class.php 页面大小

> ID：13517784
> 
> 赞同：2
> 
> 时间：2012-11-22T17:44:19.737
> 
> 标签：php, api, amazon, page-size

我正在使用 AmazonECS.class.php 与亚马逊进行一些搜索和附属集成。目前我返回了 10 个结果。做了各种搜索，不知道如何配置每页的项目数。

# php - php mysql 插入

> ID：13517786
> 
> 赞同：1
> 
> 时间：2012-11-22T17:44:23.017
> 
> 标签：php, mysql, insert

我是 php 编程的新手，我在这里遇到了一个麻烦。可能对你们所有人来说都很简单，但是好的..

当我第一次尝试在名为“novica”的 mysql 表中插入一行时，它工作正常，但之后我无法添加任何新行。但是当我删除这一行时，我可以添加一个……但同样，只有一个。我不知道这是什么原因。

这是我的小 php：

```
<?php
    $con = mysql_connect("localhost","root","password");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("sola", $con);
    mysql_query("INSERT INTO novica (naslov, vsebina, avtor, ustvarjeno) VALUES('$_POST[address]', '$_POST[content]', 'Klemen', NOW())");

    mysql_close($con);
?> 
```

这是mysql导出sql代码：

```
-- phpMyAdmin SQL Dump
-- version 3.4.10.1deb1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Nov 22, 2012 at 06:41 PM
-- Server version: 5.5.28
-- PHP Version: 5.3.10-1ubuntu3.4

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `sola`
--

-- --------------------------------------------------------

--
-- Table structure for table `novica`
--

CREATE TABLE IF NOT EXISTS `novica` (
  `id_novica` int(10) NOT NULL,
  `naslov` text COLLATE utf8mb4_bin NOT NULL,
  `vsebina` text COLLATE utf8mb4_bin NOT NULL,
  `avtor` text COLLATE utf8mb4_bin NOT NULL,
  `ustvarjeno` date NOT NULL,
  `posodobljeno` date DEFAULT NULL,
  PRIMARY KEY (`id_novica`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;

--
-- Dumping data for table `novica`
--

INSERT INTO `novica` (`id_novica`, `naslov`, `vsebina`, `avtor`, `ustvarjeno`, `posodobljeno`) VALUES
(0, 'a', 'a', 'Klemen', '2012-11-22', NULL);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:48:00.093

您的主键未设置为自动递增。因此，当您插入新行时，可能会分配零 id，但任何后续插入都会失败，因为该 id 已被占用。

要么将 id 添加到插入语句中，要么`id_novica`自动递增 - [http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

```
CREATE TABLE IF NOT EXISTS `novica` (
  `id_novica` int(10) NOT NULL AUTO_INCREMENT,
  `naslov` text COLLATE utf8mb4_bin NOT NULL,
  `vsebina` text COLLATE utf8mb4_bin NOT NULL,
  `avtor` text COLLATE utf8mb4_bin NOT NULL,
  `ustvarjeno` date NOT NULL,
  `posodobljeno` date DEFAULT NULL,
  PRIMARY KEY (`id_novica`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:48:31.350

它总是上帝检查错误（mysql_error（））以找出问题所在。如果这有问题，请显示您的查询，在控制台中手动执行并检查您遇到的错误。

通常，您的主键`id_novica`必须是唯一的，因此后续插入失败。您应该更改值或将主键定义为 AUTO_INCREMENT，以告诉 mysql 处理此问题。所以而不是

```
`id_novica` int(10) NOT NULL, 
```

你应该有

```
`id_novica` int(10) NOT NULL AUTO_INCREMENT, 
```

而你`INSERTS`根本不提供`id_novica`。

您也不应该使用`mysql_`exitension - 它已被**弃用**。切换到，但`mysqli_`如果你正在开始，直接跳转到`PDO`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:51:39.250

将唯一 id 添加到您的插入或更新您的 id 列以自动递增：

```
ALTER TABLE  `novica` CHANGE  `id_novica`  `id_novica` INT( 10 ) NOT NULL AUTO_INCREMENT 
```

# java - 使用 deployJava.runApplet 定位特定元素

> ID：13517790
> 
> 赞同：7
> 
> 时间：2012-11-22T17:44:32.003
> 
> 标签：java, javascript, css, applet

经过多年成功维护一个使用旧的小程序：

```
<script src="foo.js"></script> 
```

嵌入Java小程序的方法，我们无法捂住耳朵唱“啦啦啦！” 了。

是时候使用了：

```
deployJava.runApplet() 
```

当我使用单击处理程序触发此方法时（此处通过 jQuery 在按钮上使用事件侦听器，但这没关系）：

```
$('#button').click(function() {
  deployJava.runApplet(attributes, parameters, version);
}); 
```

...它会清除整个现有文档并用小程序替换它。我只需要知道如何将特定的 DOM 元素作为小程序的容器，这样我的页面就不会被擦除。

似乎它是一个属性，我可以以`target: someElement`其中“someElement”是一个 DOM 对象或元素的 ID 作为字符串的形式传递。但是，唉，我找不到这种属性的文档。

为了完整起见，以下是正在传递的内容：

```
/*here is where I imagine there might be an applicable attribute */
var attributes = {
  name: "SomeName",
  code: "some.class",
  archive: "some.jar",
  width: 640,
  height: 400
};

var parameters = {
  someParameter: someValue
};

var version = "1.5"; 
```

我可以`document.write`提供重建文档所需的一切，但我相信你们都可以想象这种前景在我看来是多么可怕。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T10:13:26.470

作为[Christophe Roussy](https://stackoverflow.com/questions/13517790/using-deployjava-runapplet-to-target-specific-element?answertab=active#answer-15139480)解决方案的替代方案，您可以`document.write`在运行时覆盖`deployJava.runApplet`。

像这样：

```
function docWriteWrapper(func) {
    var writeTo = document.createElement('del'),
        oldwrite = document.write,
        content = '';
    writeTo.id = "me";
    document.write = function(text) {
        content += text;
    }
    func();
    writeTo.innerHTML += content;
    document.write = oldwrite;
    document.body.appendChild(writeTo);
} 
```

然后：

```
docWriteWrapper(function () {
    deployJava.runApplet(attributes, parameters, "1.6");
}); 
```

有点hackish，但就像一个魅力;）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:41:19.103

所以问题的核心是这样的：deployJava.js 使用`document.write`. 如果您在页面渲染后使用此方法（相对于作为初始页面渲染的一部分），它将首先清除文档。其中有明显的负面影响。

虽然是为 JavaFX 设计的，但人们报告说 dtjava.js 取得了成功，我完全有理由相信它是一个可行的替代方案。

但是，我团队中的其他利益相关者已经围绕 deployJava.js 完成了工作，并且不愿意放弃这项工作，这意味着我需要坚持使用 deployJava.js。只有一种方法可以做到这一点：确保在页面呈现期间调用 deployJava，而不是通过 Ajax、事件或其他延迟触发器。

最后，我们正在收集我们的信息，并将其传递到第二个页面，该页面将按预期呈现小程序。它可以工作，并且在大多数情况下，我们的客户端无论如何都会这样做（收集信息，将其传递到服务器端，并获得重定向响应），因此强制执行该问题没有意义。我们通过查询字符串传递信息，但如果您希望 window.location 看起来更整洁，您可能会使用 cookie 和/或 localstorage API。

感谢您的回复，即使他们在评论区。如果有人有更好的方法，其他回复仍在接受中！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-01T21:44:33.447

如果您正在使用 jQuery 并且想要定位特定的 dom 元素，而不仅仅是附加：

```
function docWriteWrapper(jq, func) {
    var oldwrite = document.write, content = '';
    document.write = function(text) {
        content += text;
    }
    func();
    document.write = oldwrite;
    jq.html(content);
}

docWriteWrapper($('#mydiv'), function () {
    deployJava.runApplet(attributes, parameters, version);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:33:42.547

为了解决这个烦人的问题，我在第 316 行下载并破解了 deployJava.js，用我自己的行替换了该行：

```
 // document.write(n + "\n" + p + "\n" + r);
  myDiv.append(n + "\n" + p + "\n" + r); 
```

其中 myDiv 是一个 js 全局变量，在调用之前设置为所需的 div `runApplet`：

```
myDiv = jQuery('#someDiv'); 
```

如果你找到一个不那么侵入性的解决方案，请告诉我......

# c# - 使用动态键反序列化 JSON

> ID：13517792
> 
> 赞同：14
> 
> 时间：2012-11-22T17:44:41.053
> 
> 标签：c#, json, dynamic, deserialization

我对 JSON 很陌生，目前正在学习（反）序列化。我正在从网页中检索 JSON 字符串并尝试将其反序列化为对象。问题是，根 json 键是静态的，但底层键是动态的，我无法预料它们会反序列化。这是字符串的一个小例子：

```
{
    "daily": {
        "1337990400000": 443447,
        "1338076800000": 444693,
        "1338163200000": 452282,
        "1338249600000": 462189,
        "1338336000000": 466626
    }
} 
```

对于我的应用程序中的另一个 JSON 字符串，我正在使用 a`JavascriptSerializer`并使用类结构预测键。将此字符串反序列化为对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-22T18:10:54.203

说真的，没必要走动态路线；采用

```
var deser = new JavaScriptSerializer()
    .Deserialize<Dictionary<string, Dictionary<string, int>>>(val);
var justDaily = deser["daily"]; 
```

得到一本字典，然后你可以例如

```
foreach (string key in justDaily.Keys)
    Console.WriteLine(key + ": " + justDaily[key]); 
```

获取存在的键和相应的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T17:49:52.443

您可以`dynamic`在 .NET 4 或更高版本中使用。例如，使用 JSON.NET 我可以：

```
dynamic obj = JsonConvert.Deserialize<dynamic>("{x: 'hello'}"); 
```

然后你可以这样做：

```
var str = obj.x; 
```

但是，不确定它将如何处理数字键。你当然可以`JObject`直接使用它自己，例如：

```
var obj = JObject.Parse("{'123456': 'help'}");
var str = obj["123456"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-16T13:54:14.663

每当您拥有带有动态键的 JSON 时，通常可以将其反序列化为`Dictionary<string, SomeObject>`. 由于内部 JSON 键是动态的（在这个问题中），因此 JSON 可以建模为：

```
Dictionary<string, Dictionary<string, int>> 
```

我建议使用[NewtonSoft.Json](https://www.newtonsoft.com/json/help/html/Introduction.htm) (JSON.Net) 或[System.Text.Json](https://docs.microsoft.com/en-us/dotnet/api/system.text.json?view=netcore-3.1)（如果您使用 .NET-Core 3.0 及更高版本）。

**牛顿软件.Json**

使用`DeserializeObject<T>`来自`JsonConvert`：

```
var response = JsonConvert.DeserializeObject<Dictionary<string, Dictionary<string, int>>>(json); 
```

**System.Text.Json**

使用`Deserialize<T>`来自`JsonSerializer`：

```
var response = JsonSerializer.Deserialize<Dictionary<string, Dictionary<string, int>>>(json); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-22T17:49:52.260

这使用起来不方便，因为在с#中不能定义一个以数字开头的变量。为键添加前缀。

或者试试这个：

```
string json = "
{ daily:[
  { key: '1337990400000', val:443447 },
  { key: '1338076800000', val:444693 },
  { key: '1338163200000', val:452282 },
  { key: '1338249600000', val:462189 },
  { key: '1338336000000', val:466626 }]
}";

public class itemClass
{
  public string key; // or int
  public int val;
}

public class items
{
  public itemClass[] daily;
}

items daily = (new JavascriptSerializer()).Deserialize<items>(json); 
```

那么你就可以：

```
var itemValue = items.Where(x=>x.key=='1338163200000').Select(x=>x.val).FirstOrDefault(); 
```

# c# - Fluent NHibernate - 如何使用 GeneratedBy.Native() 为 Id 指定序列名称

> ID：13517793
> 
> 赞同：0
> 
> 时间：2012-11-22T17:44:41.193
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我使用 Fluent NHibernate，我需要使用 GeneratedBy.Native() 来生成 Id 以支持 Oracle、DB2 和 MSSQL 数据库。如果我尝试在 Oracle 上像这样运行它并将新记录插入到表中，我会得到：

```
Could not execute query: select hibernate_sequence.nextval from dual
System.Data.OracleClient.OracleException (0x80131938): ORA-02289: sequence does not exist 
```

映射类：

```
public sealed class ListDataMap : ClassMap<ListData>
{
    public ListDataMap()
    {
        Table("LIST_DEF");

        Id(x => x.Id, "ID").Not.Nullable().GeneratedBy.Native();
        //other mapping
    }
} 
```

如何指定序列的名称？我不想使用 hibernate_sequence 因为我需要超过 1 个序列并且我不想拥有 1 个共享序列。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:44:41.193

我在这里找到了答案：http: [//thatextramile.be/blog/2007/07/native-id-generation-with-nhibernate/](http://thatextramile.be/blog/2007/07/native-id-generation-with-nhibernate/)

很简单：

```
Id(x => x.Id, "ID").Not.Nullable().GeneratedBy.Native(
    builder => builder.AddParam("sequence", "SEQ_LIST_DEF")
); 
```

# javascript - How to Pan a div using JQuery

> ID：13517795
> 
> 赞同：1
> 
> 时间：2012-11-22T17:44:42.097
> 
> 标签：javascript, jquery, html

I have been trying for a while now to get a simple pan of a div to work, I however can not seem to get it to 100%. It partially works with bugs.

```
$("#view_point").mousedown(function(e) {
    start_x = e.pageX;
    start_y = e.pageY;
    e.preventDefault()
    //On Click set start x and y vars
}).mousemove(function(e) {
    temp_x = e.pageX;
    temp_y = e.pageY;
    e.preventDefault();
}).mouseup(function(e) {
    temp_x = Math.abs(temp_x - start_x);
    temp_x = Math.abs(temp_y - start_y);

    console.log(temp_x + " - " + temp_y);

    //Animate the map
    $("#tiles").animate({
        marginTop: '-' + temp_x,
        marginLeft: '-' + temp_y
    }, 50);
});​ 
```

How do I go about making a pan script that will pan inside a div that has its overflow property set to hidden.

# java - How can I put 3 separate programs into a JTabbedPane. They are already written for a JFrame

> ID：13517796
> 
> 赞同：0
> 
> 时间：2012-11-22T17:44:43.683
> 
> 标签：java, swing, jframe, jtabbedpane

So for the sake of keeping it simple, lets say I want to have 3 separate programs all display in a `JTabbedPane`. Suppose they are all Hello World simple file in a `JFrame`.

Lets use this simple file and create `HelloWorld1.java`, `HelloWorld2.java` and `HelloWorld3.java`. They exist separately this way. BUT say I want to combine them into ONE `JTabbedPane` - still keeping them separate. I am guessing I would need to create a project (lets say in Eclipse) and set up a `JTabbedPane` in a forth file and add these? Can someone give me a demonstration of this so I can understand clearer how to go about this. Appreciate any help. Just really interested in what the main (forth) file might look like.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:09:29.280

```
public static void main(String[] args) {
    JFrame child = new HelloWorld1("child1");
    child.add(new JLabel("Child1"));

    JTabbedPane jTabbedPane = new JTabbedPane();
    jabbedPane.addTab("Child", child.getContentPane());

    child = new HelloWorld2("child2");
    jabbedPane.addTab("Child2", child.getContentPane());
    //and so on with other applications/frames

    JFrame main = new JFrame("Main");
    main.setSize(600,600);
    main.add(jTabbedPane);      
    main.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:19:24.817

解决方法很简单：

1）而不是说`public class HelloWorld1 extends JFrame{....}`使用`public class HelloWorld1 extends JPanel{...}`

2) 在主类 ( 和 ) 中实例化您的类`HellowWorld1`并将`HellowWorld2`它们`HellowWorld3`添加到`JTabbedPane`如下所示：

```
HelloWorld1 hw = new HelloWorld1();
....
JTabbedPane tabbedPane = new JTabbedPane();
tabbedPane.add("Title of first panel",hw); 
```

# ruby - Mountain Lion rvm force reinstall error

> ID：13517797
> 
> 赞同：-1
> 
> 时间：2012-11-22T17:44:49.377
> 
> 标签：ruby, rvm, osx-mountain-lion

Have tried to reinstall ruby using rvm and ran into this error:

```
rvm reinstall all --force
Removing /usr/local/rvm/src/ruby-1.9.3-p194...
Removing /usr/local/rvm/rubies/ruby-1.9.3-p194...
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p194.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
ruby-1.9.3-p194 - #extracting ruby-1.9.3-p194 to /usr/local/rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/usr/local/rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p194', please read /usr/local/rvm/log/ruby-1.9.3-p194/configure.log
There has been an error while running configure. Halting the installation. 
```

What can I do to fix this problem? Thanks in advance.

Error message:

```
cat /usr/local/rvm/log/ruby-1.9.3-p194/configure.log
[2012-11-22 09:39:59] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/usr/local/rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p194
checking build system type... x86_64-apple-darwin12.2.0
checking host system type... x86_64-apple-darwin12.2.0
checking target system type... x86_64-apple-darwin12.2.0
checking whether the C compiler works... no
configure: error: in `/usr/local/rvm/src/ruby-1.9.3-p194':
configure: error: C compiler cannot create executables
See `config.log' for more details
unknown7cd1c3e98b07:~ pdenlinger$ cat config.log
cat: config.log: No such file or directory
unknown7cd1c3e98b07:~ pdenlinger$ 
```

GCC message:

gcc --version

```
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

'brew doctor' message

```
brew doctor
Warning: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
    /usr/local/lib/pkgconfig/fuse.pc
Warning: You have a non-Homebrew 'pkg-config' in your PATH:
  /opt/sm/pkg/active/bin/pkg-config

`./configure` may have problems finding brew-installed packages using
this other pkg-config. 
```

Config scripts outside Homebrew:

```
sudo mkdir /usr/local/Cellar
Password:
unknown7cd1c3e98b07:local pdenlinger$ sudo chown -R `whoami` /usr/local
unknown7cd1c3e98b07:local pdenlinger$ man chown
unknown7cd1c3e98b07:local pdenlinger$ brew doctor
Warning: "config" scripts exist outside your system or Homebrew directories.
`./configure` scripts often look for *-config scripts to determine if
software packages are installed, and what additional flags to use when
compiling and linking.

Having additional scripts in your path can confuse software installed via
Homebrew if the config script overrides a system or Homebrew provided
script of the same name. We found the following "config" scripts:

    /opt/sm/pkg/active/bin/curl-config
    /opt/sm/pkg/active/bin/ncurses5-config
    /opt/sm/pkg/active/bin/ncursesw5-config
    /opt/sm/pkg/active/bin/pkg-config
    /opt/sm/pkg/active/bin/xml2-config
    /opt/sm/pkg/active/bin/xslt-config
Warning: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
    /usr/local/lib/pkgconfig/fuse.pc
Warning: You have a non-Homebrew 'pkg-config' in your PATH:
  /opt/sm/pkg/active/bin/pkg-config

`./configure` may have problems finding brew-installed packages using
this other pkg-config. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:37:28.940

好的，因为您的 rvm 使用 CFLAGS 和 PATH 运行：

```
CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include 
```

您的 gcc 必须来自 Home Brew，而不是 Xcode，这[不再是必需](http://kennethreitz.com/xcode-gcc-and-homebrew.html)的。

我的建议是按照上面的链接重新安装 gcc，然后尝试再次重新安装 ruby​​。

这个问题也可能有帮助： [RVM ruby​​ 安装错误 - Mac](https://stackoverflow.com/questions/8813889/rvm-ruby-installation-errors-mac)

# c# - 从 C# 中的 HttpWebRequst 对象获取实际的 http 请求

> ID：13517802
> 
> 赞同：0
> 
> 时间：2012-11-22T17:45:13.277
> 
> 标签：c#, http, web

我有一个非常简单的应用程序，它发送一个 HttpWebRequest 并获得响应。我需要知道发送到服务器的确切请求。是否可以？

像这样的东西：

```
POST /path/script.cgi HTTP/1.0
From: frog@jmarshall.com
User-Agent: HTTPTool/1.0
Content-Type: application/x-www-form-urlencoded
Content-Length: 32 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:57:07.183

[使用System.Net.Sockets.TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)构建一个基本的 Web 服务器。该示例显示了如何执行此操作。然后，将您的 HttpWebRequest 指向该服务器并查看结果。

# xml - Get XML tag values through shell script

> ID：13517806
> 
> 赞同：0
> 
> 时间：2012-11-22T17:45:22.393
> 
> 标签：xml, shell, unix, sed, awk

I need to fetch username and password values from sample XML tags

```
<CommCellUser userName="~!@#$%^&*()_+`1=- 23)()();';" password="":>?<,./;'|}{[]  ><:"/" </CommCellUser> 
```

The value will be in double quotes. That value may contain double quotes and any other special characters including spaces .

```
comm_cell_line=`grep "CommCellUser" /filename | head -1`
userName=`echo "$comm_cell_line" | awk '{print $2}' | cut -d"\"" -f2`
passwd=`echo "$comm_cell_line" | awk '{print $3}' | cut -d"\"" -f2` 
```

Fetching like this miss so many cases. Because it may contain spaces and special characters in value.

Please help .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:58:56.717

以下解决方案对传递给*userName*和*password*属性的字符串进行编码，以便认为 XML 字符串有效。

```
#!/bin/bash

XML="<CommCellUser userName='~!@#$%^&amp;*()_+``1=- 23)()();&#39;;' password='&quot;:&gt;?&lt;,./;&#39;|}{[]  &gt;&lt;:&quot;/'></CommCellUser>"

USER=`echo $XML | xmllint --xpath "string(/CommCellUser/@userName)" -`
PASS=`echo $XML | xmllint --xpath "string(/CommCellUser/@password)" -`

echo username=$USER
echo password=$PASS 
```

产生以下输出：

```
username=~!@#$%^&*()_+1=- 23)()();';
password=":>?<,./;'|}{[] ><:"/ 
```

由于您正在解析数据，因此您可以假设传入的数据是有效的。xmllint 命令可用于强制执行此检查。

笔记：

*   维基百科有更多关于[XML 字符转义和编码](http://en.wikipedia.org/wiki/XML#Characters_and_escaping)的信息。与 XML 规范相比更易于阅读 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:28:43.030

我希望您示例中的密码值是错字。否则你的 xml 可能有问题。所以我从密码值中删除了双引号。看看下面的测试，grep 是你从文本中获取东西的朋友：

```
kent$  echo $comm_cell_line                                           
<CommCellUser userName="~!@#$%^&*()_+`1=- 23)()();';" password="quote removed:>?<,./;'|}{[]  ><:"/" </CommCellUser>

kent$  userName=$(grep -Po '(?<=userName=")[^"]*' <<<$comm_cell_line )

kent$  pwd=$(grep -Po '(?<=password=")[^"]*' <<<$comm_cell_line )     

kent$  echo $userName                                                 
~!@#$%^&*()_+`1=- 23)()();';

kent$  echo $pwd     
quote removed:>?<,./;'|}{[]  ><: 
```

# bash - Bash shopt xpg_echo

> ID：13517818
> 
> 赞同：1
> 
> 时间：2012-11-22T17:46:40.273
> 
> 标签：bash, echo, shopt

I don't understand what the shopt `xpg_echo` changes if it is activated or deactivated.

In the manual:

```
xpg_echo
         If  set,  the  echo  builtin  expands   backslash-escape
         sequences by default. 
```

I tried to activate/deactivate xpg_echo, but echo has the same behaviour.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:51:51.300

它确定 echo 是否会处理转义序列，例如`\n`：

```
$ shopt -u xpg_echo # Disable xpg_echo
$ echo "Hello\nworld"
Hello\nworld
$ shopt -s xpg_echo # Enable xpg_echo
$ echo "Hello\nworld"
Hello
world 
```

# jquery - Dynamically change the height of a Slickgrid table

> ID：13517823
> 
> 赞同：1
> 
> 时间：2012-11-22T17:46:58.080
> 
> 标签：jquery, slickgrid

Is it possible to change the height of a slickgrid table after it's been rendered? Ideally with out having to destroy the grid and re-init.

It currently looks like once the grid is rendered, it doesn't change.

I've been using JQuery resizeable to resize the containing div.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:15:53.870

`grid.resizeCanvas()`释放布局调整器夹点后调用方法。

# sql - 高效查询组中的第一个结果（postgresql 9）

> ID：13517825
> 
> 赞同：0
> 
> 时间：2012-11-22T17:47:02.270
> 
> 标签：sql, grouping, greatest-n-per-group, postgresql-9.1

我有一个包含 200000 行和列的表：名称和日期。日期和名称可能具有重复值。我想获得按升序排序的日期的前 300 个唯一名称，并让它运行得很快，因为我的表可能有一百万行。

我正在使用 postgresql 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:26:21.840

```
SELECT name, date
FROM
  (
    SELECT DISTINCT ON (name) name, date
    FROM table
    ORDER BY name, date
  ) AS id_date
ORDER BY date
LIMIT 300; 
```

@jachguate 的最后一个查询将错过在同一日期有两个日期的名称，但是这个没有。

在具有大约 100.000 个条目的非优化 postgresql 9.1 中，查询大约需要 100 毫秒，因此它可能无法扩展到数百万个条目。

升级到 postgresql 9.2 可能会有所帮助，因为根据[发行说明](http://www.postgresql.org/docs/9.2/static/release-9-2.html "发行说明")有许多性能改进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:56:35.257

使用 CTE：

```
with unique_date_name as (
       select date, name, count(*) rcount
         from table
        group by date, name
       having count(*) = 1
     )
select name, date
  from unique_date_name
 order by date limit 300; 
```

**编辑** 从评论中，这会导致性能不佳，所以试试这个：

```
 select date, name, count(*) rcount
         from table
        group by date, name
       having count(*) = 1
        order by date limit 300; 
```

或者，将原始查询转换为 FROM 中的嵌套子查询，而不是 CTE：

```
select name, date
from (
       select date, name, count(*) rcount
         from table
        group by date, name
       having count(*) = 1
     ) unique_date_name
 order by date limit 300; 
```

不幸的是，我手头没有 postgreSQL 来检查它是否有效，但优化器会做得更好。

（日期，名称）的索引是获得最佳性能的必要条件。

# android - android SocketTimoutException at getOutputStream()

> ID：13517833
> 
> 赞同：1
> 
> 时间：2012-11-22T17:47:37.107
> 
> 标签：android, httpurlconnection

I have a strange situation. about 50% of my requests failed with this exception.

```
11-22 19:46:55.352: W/System.err(15987): java.net.SocketTimeoutException: Connection timed out
11-22 19:46:55.362: W/System.err(15987):    at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
11-22 19:46:55.372: W/System.err(15987):    at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:357)
11-22 19:46:55.372: W/System.err(15987):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207)
11-22 19:46:55.382: W/System.err(15987):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:440)
11-22 19:46:55.392: W/System.err(15987):    at java.net.Socket.connect(Socket.java:1013)
11-22 19:46:55.402: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:75)
11-22 19:46:55.402: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
11-22 19:46:55.482: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
11-22 19:46:55.482: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
11-22 19:46:55.482: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
11-22 19:46:55.502: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
11-22 19:46:55.502: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
11-22 19:46:55.512: W/System.err(15987):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:614)
11-22 19:46:55.512: W/System.err(15987):    at ***.net.BasePostMethod.sendRequest(BasePostMethod.java:56) 
```

At this line:

```
connection.getOutputStream(); 
```

My timeouts:

```
connection.setReadTimeout(20000);
connection.setConnectTimeout(20000); 
```

I use HttpURLConnection.

# android - android 2.x 上的剪贴板管理器崩溃（仅）

> ID：13517835
> 
> 赞同：0
> 
> 时间：2012-11-22T17:47:52.647
> 
> 标签：android, clipboard

我刚刚发现这段代码只会在 android 2.x 上使我的应用程序崩溃

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
clipboard.setText(textView1.getText()); 
```

我认为...我需要在运行此方法之前添加检查 android 版本，这是允许在 android 2.x 上运行的正确代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:50:57.330

剪贴板 API 已在 Android SDK 的第 11 级更改。这是一些处理来自[arinkverma](http://www.arinkverma.in/2012/06/apertium-android-clipboard-handling.html)的两个版本的代码。

我希望有一天这可以进入支持库。

* * *

```
@SuppressWarnings("deprecation")
public void putText(String text){
    int sdk = android.os.Build.VERSION.SDK_INT;
    if(sdk < android.os.Build.VERSION_CODES. HONEYCOMB) {
        android.text.ClipboardManager clipboard = (android.text.ClipboardManager) activity.getSystemService(Context.CLIPBOARD_SERVICE);
        clipboard.setText(text);
    } else {
        android.content.ClipboardManager clipboard = (android.content.ClipboardManager) activity.getSystemService(Context.CLIPBOARD_SERVICE); 
        android.content.ClipData clip = ClipData.newPlainText("simple text",text);
        clipboard.setPrimaryClip(clip);
    }
}

@SuppressWarnings("deprecation")
public String getText(){
    String text = null;
    int sdk = android.os.Build.VERSION.SDK_INT;
    if(sdk < android.os.Build.VERSION_CODES. HONEYCOMB ) {
        android.text.ClipboardManager clipboard = (android.text.ClipboardManager) activity.getSystemService(Context.CLIPBOARD_SERVICE);
        text =  clipboard.getText().toString();
    } else {
        android.content.ClipboardManager clipboard = (android.content.ClipboardManager) activity.getSystemService(Context.CLIPBOARD_SERVICE); 
        text =  clipboard.getText().toString();
    }
    return text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:37:56.507

感谢[Snicolas](https://stackoverflow.com/users/693752/snicolas)提供参考。我希望这能解决问题。还要记住包含两个 api 级别的库，否则你会在构建时出错。

构建目标已设置为 Api 7 到 15，最好是 10**清单文件的预览**

```
<uses-sdk android:maxsdkversion="15" android:minsdkversion="7" android:targetsdkversion="10"></uses-sdk> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-08T20:10:04.997

Snicolas 的版本非常好。但是 getText() 的 else 部分有错误。

完整版是：

```
@SuppressWarnings("deprecation")
public String getText(Activity a){
    String text = null;
    int sdk = android.os.Build.VERSION.SDK_INT;
    if(sdk < android.os.Build.VERSION_CODES.HONEYCOMB ) {
        android.text.ClipboardManager clipboard = (android.text.ClipboardManager) a.getSystemService(Context.CLIPBOARD_SERVICE);
        text =  clipboard.getText().toString();
    } else {
        android.content.ClipboardManager clipboard = (android.content.ClipboardManager) a.getSystemService(Context.CLIPBOARD_SERVICE);
        text = clipboard.getPrimaryClip().getItemAt(0).getText().toString();
    }
    return text;
} 
```

# c++ - QTextEdit 中的自定义文本（代码）区域

> ID：13517839
> 
> 赞同：4
> 
> 时间：2012-11-22T17:48:00.213
> 
> 标签：c++, qt, custom-controls, qtextedit, qtextdocument

我有兴趣创建一个行为类似于代码区域的文本对象类型（继承[QTextObjectInterface ）：](http://doc.qt.io/qt-5/qtextobjectinterface.html)

*   独特的背景
*   边界
*   固定宽度字体
*   可编辑的内容
*   实例需要可识别代码，以便可以提取其中的内容（将代码与周围内容分开）
*   保存/加载（来自常规 html 文件）
*   语法高亮将是一个加号，但并不是真正需要的

文档的其他区域需要以通常的方式运行（字体属性可编辑、颜色可编辑等）。

* * *

Qt 提供了一个使用[QTextEdit](http://doc.qt.io/qt-5/qtextedit.html)实现自定义文本对象[的示例](http://doc.qt.io/qt-5/qtsvg-richtext-textobject-example.html)。这看起来很难，因为新的文本对象不能利用 QTextEdit / [QTextDocument](http://doc.qt.io/qt-5/qtextdocument.html)中的现有基础设施。

[QTextObject](http://doc.qt.io/qt-5/qtextobject.html)是

> [可以将QTextDocument](http://doc.qt.io/qt-5/qtextdocument.html)的各个部分组合在一起的不同类型对象的基类

所以继承它可能是一种选择，但它在 Qt SDK 包中的源文件和谷歌搜索都没有显示有用的信息。

[QTextFrame](http://doc.qt.io/qt-5/qtextframe.html)继承[QTextObject](http://doc.qt.io/qt-5/qtextobject.html)因此，如果要找到有关此路径的一些提示，它可能是一个可行的基类。

* * *

在一个简单的 HTML 文件中，所有这些（语法高亮除外）都很容易。[QTextEdit](http://doc.qt.io/qt-5/qtextedit.html)以 html 作为输入，并且能够导出 html，但在此过程中结构丢失。

```
<code class="code-sample">
  int i = 0;
</code> 
```

[顺便说一下， QWebView](http://doc.qt.io/qt-5/qwebview.html)是只读的。它宣传说：

> HTML 文档的一部分可以通过 HTML 元素的 contenteditable 属性进行编辑。

* * *

可能还有其他平台可以随时使用，但文本编辑器需要在 Qt Creator 中作为插件使用，因此使用 Qt 框架是有意义的。

底线：如何在[QTextEdit](http://doc.qt.io/qt-5/qtextedit.html)小部件中实现代码区域？

* * *

后期编辑：

*   使用来自主干的 Qt sdk（将自身标识为 4.8.4）
*   来自主干的 Qt Creator (Qt Creator 2.6.81)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:00:04.083

我发现使用 QTextEdit / QTextDocument 可以实现这一点。我能想到的最简单的实现在这个答案中提供，以供未来的寻求者参考。

请注意，需要自定义保存/加载，因为常规 .toHtml() 不会保留所需的信息。

插入代码块很简单：

```
QTextFrame * frame;

frame = cursor.insertFrame( code_block_format_ );
connect( frame, SIGNAL( destroyed() ),
  this, SLOT( codeBlockDeleted() ) );
code_blocks_.append( frame ); 
```

请注意您可以在类中保存的两个变量：

```
QTextFrameFormat code_block_format_;
QList<const QTextFrame*> code_blocks_; 
```

我们需要框架的格式保持一致和独特。它可以在构造函数中初始化为：

```
code_block_format_.setBackground( QBrush( Qt::yellow ) );
code_block_format_.setBorder( 1 );
code_block_format_.setBorderStyle( QTextFrameFormat::BorderStyle_Inset);
code_block_format_.setMargin( 10 );
code_block_format_.setPadding( 4 ); 
```

我们需要该列表，以便我们可以判断某个帧是否是代码框。由于所有继承 QTextObject 的对象都需要由 QTextDocument::createObject() 创建，因此我们不能简单地将 QTextFrame 子类化（实际上我认为我们可以，但还不确定）。

现在可以按照通常的方式将代码内容与其他内容分开：

```
for ( it = frame->begin(); !(it.atEnd()); ++it ) {
  child_frame = it.currentFrame();
  child_block = it.currentBlock();
  if ( child_frame != NULL )
  {
    if ( code_blocks_.contains( frame ) )
    {
      /* ... */
    }
  }
} /* for ( it = frame->begin(); !(it.atEnd()); ++it ) */ 
```

但请注意，为了简洁起见，这被过度简化了。需要考虑嵌套框架。

如果您对完整实施感兴趣，请查看[git 存储库](https://gitorious.org/proliterate)（正在进行中，2012 年 11 月）。

# monodevelop - 在 MonoDevelop 中使用 MonoMac 将目标平台设置为 mac OSX 10.5 (Leopard)？

> ID：13517840
> 
> 赞同：0
> 
> 时间：2012-11-22T17:48:01.617
> 
> 标签：monodevelop, osx-leopard, monomac, monobjc

我已经在 MonoDevelop (2.8.8.4) 中编写跨平台 GTK# 项目大约一个月了，我想我会尝试一些看起来和呼吸都更像 Mac 应用程序的东西。

当我在 MonoDevelop 中创建“Cocoa 应用程序”时，我可以在“项目选项 | 常规 | 主要设置 | MonoObj 设置 | 目标 Mac OS 版本”中选择 Leopard 作为构建目标。以这种方式构建的项目可以在我的 Mac 上运行。

当我创建“MonoMac”项目时，我无法选择可用的目标 Mac OS 版本，而当我尝试构建项目时，目标始终是 mac OSX 10.6。这对我没有好处，因为我只有 Leopard。[当然我可以升级 :( ] 在我看来我不应该这样做。

我试过查看我能想到的所有配置文件 *.sln、*.csproj。我还尝试在“Cocoa Application”类型项目中使用的“MonoMac”项目中添加额外的“引用”。在我看来，如果我知道那个开关是什么，我应该能够设置一个编译器开关。（如果可能的话，我有点希望有一种更清洁的方法。也许这是在更高版本的 MonoDevelop 中修复的问题，但我认为我的版本是 Mac Leopard 支持的最后一个版本）。

任何想法或评论都更受欢迎。请随意指出我正确的方向。（网址等）

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:29:34.137

您需要更改的两个地方：

1.  将您的 .xib 更改为具有 10.5 的部署目标
2.  将您的 Info.plist 更改为 LSMinimumSystemVersion 为 10.5

您可能需要删除输出目录中的 .app 包才能正确重新生成这些包。

# java - Java Server Client，线程间共享变量

> ID：13517841
> 
> 赞同：2
> 
> 时间：2012-11-22T17:48:08.293
> 
> 标签：java, multithreading, client

我正在做一个项目来创建一个多个客户端连接到的简单拍卖服务器。服务器类实现了 Runnable，因此为每个连接的客户端创建了一个新线程。我试图将当前的最高出价存储在每个客户都可以看到的变量中。我找到了使用 AtomicInteger 的答案，但是当我将它与 atomicVariable.intValue() 等方法一起使用时，我得到了空指针异常错误。

我可以通过哪些方式操作 AtomicInteger 而不会出现此错误，或者是否有其他方法可以拥有相对简单的共享变量？

任何帮助将不胜感激，谢谢。

**更新**

我有 AtomicInteger 工作。现在的问题是，似乎只有最近连接到服务器的客户端才能与之交互。另一个客户只是有点冻结。

我说这是锁定问题是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:50:21.490

好吧，很可能你忘了初始化它：

```
private final AtomicInteger highestBid = new AtomicInteger(); 
```

然而，使用`highestBid`需要大量的知识才能在没有任何锁定的情况下正确处理。例如，如果您想用新的最高出价更新它：

```
public boolean saveIfHighest(int bid) {
    int currentBid = highestBid.get();
    while (currentBid < bid) {
        if (highestBid.compareAndSet(currentBid, bid)) {
            return true;
        }
        currentBid = highestBid.get();
    }
    return false;
} 
```

或更紧凑的方式：

```
for(int currentBid = highestBid.get(); currentBid < bid; currentBid = highestBid.get()) {
    if (highestBid.compareAndSet(currentBid, bid)) {
        return true;
    }
}
return false; 
```

你可能会想，为什么这么难？想象两个线程（请求）同时出价。当前最高出价是 10。一个是出价 11，另一个是 12。两个线程比较当前`highestBid`并意识到它们更大。现在第二个线程恰好是第一个并将其更新为 12。不幸的是，第一个请求现在介入并将其恢复为 11（因为它已经检查了条件）。

这是一个典型的竞争条件，您可以通过显式同步或使用具有隐式比较和设置低级支持的原子变量来避免这种情况。

看到性能更高的无锁原子整数引入的复杂性，您可能希望恢复到经典同步：

```
public synchronized boolean saveIfHighest(int bid) {
    if (highestBid < bid) {
        highestBid = bid;
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:07:37.977

我不会那样看问题的。我会简单地将所有出价存储在[`ConcurrentSkipListSet`](http://download.java.net/jdk7/archive/b123/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)一个线程安全的`SortedSet`. 正确实现`compareTo()`，它决定了排序， 的第一个元素`Set`将自动成为最高出价。

这是一些示例代码：

```
public class Bid implements Comparable<Bid> {
    String user;
    int amountInCents;
    Date created;

    @Override
    public int compareTo(Bid o) {
        if (amountInCents == o.amountInCents) {
            return created.compareTo(created); // earlier bids sort first
        }
        return o.amountInCents - amountInCents; // larger bids sort first
    }
}

public class Auction {
    private SortedSet<Bid> bids = new ConcurrentSkipListSet<Bid>();

    public Bid getHighestBid() {
        return bids.isEmpty() ? null : bids.first();
    }

    public void addBid(Bid bid) {
        bids.add(bid);
    }
} 
```

这样做有以下好处：

*   自动提供出价历史
*   允许以简单的方式保存您需要的任何其他出价信息

* * *

你也可以考虑这个方法：

```
/**
 * @param bid
 * @return true if the bid was successful
 */
public boolean makeBid(Bid bid) {
    if (bids.isEmpty()) {
        bids.add(bid);
        return true;
    }
    if (bid.compareTo(bids.first()) <= 0) {
        return false;
    }
    bids.add(bid);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:55:07.327

使用 AtomicInteger 很好，只要您按照 Tomasz 的建议对其进行初始化。

但是，您可能想考虑的是，您是否真正需要存储的只是整数形式的最高出价。您是否永远不需要存储相关信息，例如投标时间、投标人的用户 ID 等？因为如果您在稍后阶段这样做，您将不得不开始撤消您的 AtomicInteger 代码并替换它。

我从一开始就很想**设置存储与投标相关的任意信息**。例如，您可以使用相关字段定义“投标”类。然后在每次出价时，使用**AtomicReference 来存储**带有相关信息的“出价”实例。为了线程安全，请将 Bid 类中的所有字段设置为 final。

您还可以**考虑使用显式锁定**（例如，参见 ReentrantLock 类）来控制对最高出价的访问。正如 Tomasz 所提到的，即使使用 AtomicInteger（或 AtomicReference：逻辑本质上是相同的），您也需要小心访问它的方式。原子类实际上是为经常访问它们的情况而设计的（例如每秒数千次，而不是像典型的拍卖网站那样每隔几分钟）。它们在这里不会真正给您带来任何性能优势，并且显式 Lock 对象可能更直观地编程。

# javascript - 图像上下文.restore();

> ID：13517848
> 
> 赞同：2
> 
> 时间：2012-11-22T17:48:46.107
> 
> 标签：javascript, html, canvas, clip

我开始学习画布，我刚刚遇到了第一个令人沮丧的情况，我试图在三角形中制作一个 .jpg src 的剪贴蒙版。一切看起来都很好，直到我恢复我的上下文并尝试添加任何其他路径......我的剪贴蒙版似乎不再存在。

这是我的代码：

```
 <script>
function init() {
    var canvas = document.getElementById('myCanvas');
    if(canvas.getContext) {

    var context = canvas.getContext('2d');
    var imageObj = new Image();
    imageObj.src = 'stephgopro2.jpg';

    // triangle coordonate
    context.save();
    context.beginPath;
    context.moveTo(100, 0);
    context.lineTo(0, 100);
    context.lineTo(200, 100);
    context.lineTo(100, 0);
    context.clip();

    imageObj.onload = function() {
        context.drawImage(imageObj, 0, 0, 300, 170);
    };

    context.restore();
    context.beginPath();
    context.fillStyle = '#333';
    context.rect(0, 0, 600, 200);
    context.fill();
    }
}
</script>

</head>
<body onload='init()'>
  <canvas id="myCanvas" width="600" height="200"></canvas>

</body> 
```

你能帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:14:21.657

图像是异步加载的，因此在将图像绘制到画布之前已经恢复了上下文。如果您按如下方式更新代码，您将获得（我认为是）您期望的结果：

```
function init() {
    var canvas = document.getElementById('myCanvas');
        if(canvas.getContext) {

        var context = canvas.getContext('2d');
        var imageObj = new Image();
        imageObj.src = 'assets/1.jpg';

        // triangle coordonate
        context.save();
        context.beginPath();
        context.moveTo(100, 0);
        context.lineTo(0, 100);
        context.lineTo(200, 100);
        context.lineTo(100, 0);
        context.stroke();
        context.clip();

        imageObj.onload = function() {
            context.drawImage(imageObj, 0, 0, 300, 170);

            // Restore the context and continue drawing now the image has been drawn
            context.restore();
            context.beginPath();
            context.fillStyle = '#333';
            context.rect(0, 0, 600, 200);
            context.fill();
        };
    }
} 
```

# wordpress - 默认情况下，使用自定义帖子类型密码保护 wordpress 帖子

> ID：13517851
> 
> 赞同：2
> 
> 时间：2012-11-22T17:49:08.063
> 
> 标签：wordpress, password-protection, custom-post-type

我尝试实现以下几点：默认情况下，具有自定义帖子类型的帖子应受密码保护

我发现这很好 [用 https://wordpress.stackexchange.com/questions/4952/forcing-all-posts-associated-with-a-custom-post-type-to-be-private](https://wordpress.stackexchange.com/questions/4952/forcing-all-posts-associated-with-a-custom-post-type-to-be-private)

但我不希望这些帖子是私人的，所以我碰巧

```
$post->post_status = 'private';
$post->post_password = 'some_default_password'; 
```

到

```
$post->post_status = 'published';
$post->post_password = 'some_default_password'; 
```

但是没有密码保护

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:57:06.440

以下代码执行此操作，但仅在创建新帖子 (post_type) 时才有效。

如果我们不检查`empty($data['post_name'])`，这表明*正在创建一个新帖子*，它会使用密码**锁定**所有帖子`some_default_password`。

^(基于此[WordPress StackExchange Q&A 的](https://wordpress.stackexchange.com/q/54711/12615)代码。)

```
add_filter( 'wp_insert_post_data' , 'so_13517851_filter_handler' , '99', 2 );

function so_13517851_filter_handler( $data , $postarr ) 
{
    // creating new post and correct post_type
    if( empty( $data['post_name'] ) && 'post' == $postarr['post_type'] )
        $data[ 'post_password' ] = 'some_default_password';

    return $data;
} 
```

# android - RectF.equals() fails on Android versions below Jelly Bean

> ID：13517852
> 
> 赞同：2
> 
> 时间：2012-11-22T17:49:10.680
> 
> 标签：android, graphics

It seems that not all .equals() methods are created equal.

I've been testing backwards compatibility on an android app and noticed something peculiar. When I tested my app under Froyo (2.2), RectF.equals() fails when used to compare two identical objects. Rect.equals() works as expected on all versions, but RectF seems to have overhauled in between Froyo and Jelly Bean. Stepping through the source code, it seems that RectF never overrode .equals and just used the Object implementation. Not so with Rect.equals, however.

```
 Rect r1 = new Rect(0,0,1,1);
    Rect r2 = new Rect(r1);

    RectF rf1 = new RectF(0,0,1,1);
    RectF rf2 = new RectF(rf1);

    if (r1.equals(r2))
        Log.d(Build.VERSION.RELEASE,"r1 and r2 are equal");
    else
        Log.d(Build.VERSION.RELEASE,"r1 and r2 are NOT equal");

    if (rf1.equals(rf2))
        Log.d(Build.VERSION.RELEASE,"rf1 and rf2 are equal");
    else
        Log.d(Build.VERSION.RELEASE,"rf1 and rf2 are NOT equal"); 
```

Looking at the code above, one would expect both .equals() to return true. Not so. the Rect comparison always returns true, while the RectF comparison returns true on my Nexus 7 and false on every other device. Arrgh!

It took me a while to find this problem as I've used Rect objects extensively and never had a problem. I never considered that RectF would be so inconsistent.

My question is: *How can I easily find reference to changes to Android source objects between versions?* The API Reference makes mention of new methods and deprecation but doesn't mention when the behaviour of methods is dramatically altered. I also scanned the bug list on code.google.com but found nothing about it. *Is their another online resource that I can use when I'm suspicious of an inconsistency?* I don't want to have to traipse through the android source every time I have a problem, when I have a hard enough time dealing with my own bugs/inconsistencies. *For instance, is there an easy way for me to find the entire change history for RectF?*

thanks,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:00:06.983

该类`RectF`的方法中有一个错字`equals()`。错误是：

```
public boolean equals(Object o) {
    if (this == o) return true;
    if (o == null || getClass() != o.getClass()) return false;

    // RectF r = (Rect) o; <=== bug!
    RectF r = (RectF) o;
    return left == r.left && top == r.top && right == r.right && bottom == r.bottom;
} 
```

如果您访问[RectF 的 GitHub 源](https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/RectF.java)并单击“历史记录”，您会发现 2012 年 3 月 9 日的条目，标题为“修复 RectF.equals 中的错字”。单击它，您可以看到更改。

我没有费心去确切地追踪哪个版本的 Android 首先包含此修复程序。但由于它是最近才出现的，您应该预计在未来一段时间内，大多数设备都会有这个错误。

# google-maps - 自定义谷歌地图样式

> ID：13517858
> 
> 赞同：4
> 
> 时间：2012-11-22T17:49:35.423
> 
> 标签：google-maps

我对javascript和API不太了解。我想知道是否有一种简单的方法来自定义谷歌地图，就像这个例子一样。他们是如何做到的呢？

[http://pooliestudios.com/kontakt/](http://pooliestudios.com/kontakt/)

另外，我在哪里可以找到预制样式的数据库？像[http://maps.cloudmade.com/editor](http://maps.cloudmade.com/editor)（如果谷歌地图存在这样的东西）

**编辑**：刚刚找到这个网站，查看[http://snazzymaps.com/](http://snazzymaps.com/)了解一些很酷的预制样式。

# opengl - OpenGL：远处的物体显示为黑色

> ID：13517867
> 
> 赞同：0
> 
> 时间：2012-11-22T17:50:13.973
> 
> 标签：opengl, 3d

因此，我目前正在尝试找出黑色伪影的原因，如下面的屏幕截图所示。

我怎么可能？当我在场景中移动时，黑色区域似乎大致位于屏幕的同一位置。它似乎与深度有关，但如果这是原因，那么我想知道为什么天空盒工作得很好。

这个问题对任何人来说似乎都很熟悉吗？会不会是某种opengl设置？

![有问题的奇怪文物](../Images/a2869d631a25a749ed7fe56617918238.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:11:47.787

原来这是一个mipmapping问题。应该有点明显，对象被渲染但为黑色。在进一步测试后，渲染的黑色多边形仍然受到雾的影响，并且在一些 irrlicht 论坛上，有人遇到了类似的问题，结果证明是 mipmapping。

在过滤器的纹理上使用 GL_NEAREST 修复了所有问题。

# python - 战舰巨蟒，轮番重置棋盘

> ID：13517870
> 
> 赞同：3
> 
> 时间：2012-11-22T17:50:23.680
> 
> 标签：python, loops, return

我正在制作战舰游戏，一切正常。但是由于我已经包含了一个回合系统，所以游戏无法正常运行。游戏有两个板（一个是隐藏的，另一个是“公共”的，对手可以看到（所以没有船）。隐藏的作品，但公共每回合都会重置，所以你看不到你之前的命中是什么。

下面的代码是针对“攻击”序列的，当然还有轮流的 while 循环。那么，您对正确实施转弯系统有何建议？我只需要从功能中获取有关“公共”板的信息。

```
 def napad(osebni_board):

    board = [] #this is the public board, the 'private' one is defined in another function (the board is called osebni_board)
    for x in range(0,5):
        board.append([" "] * 5)
    x=0
    while x<1 :
        napad_vrstica=streljaj_vrstica()
        napad_stolpec = streljaj_stolpec()
        osebni_board_priverjanje = list(itertools.chain(*osebni_board))

        if napad_vrstica <= len(board)-1 and napad_stolpec <= len(board[0])-1 and "S"  in osebni_board_priverjanje:
            print osebni_board_priverjanje
            if  osebni_board[napad_vrstica][napad_stolpec]=="S":
                osebni_board[napad_vrstica][napad_stolpec]="" #osebnemu boardu se element S spremeni v element H, zato, da ponovni stren ni razumljen kot zadetek
                board[napad_vrstica][napad_stolpec]="H"
                osebni_board_priverjanje = list(itertools.chain(*osebni_board))

                print True
                print "Kapitan, vase koordinate so se izkazale za tocne. Sovrazna ladja je uspesno potopljena!"
                print_board(board)
                if "S" not in osebni_board_priverjanje:
                    print_board(board)
                    print "game over"
                    break

            elif board[napad_vrstica][napad_stolpec]=="H":
                print "Ladja na koordinatah {},{} je ze bila potopljena, kapitan {}!".format(napad_vrstica, napad_stolpec, ime)

            elif osebni_board[napad_vrstica][napad_stolpec]=="M":
                print "Na koordinate {},{} ste ze streljali, kapitan {}!".format(napad_vrstica, napad_stolpec, ime)

            else:
                board[napad_vrstica][napad_stolpec]="M"
                osebni_board[napad_vrstica][napad_stolpec]="M"
                print "Zadetek neuspesen, kapitan {}!\n".format(ime)
                print_board(board)

        else:
            mrtvi = random.randint(100, 10000)
            print "Kapitan! Zadeli smo obalo! {} mrtvih!\nPoskusite znova!".format(mrtvi)
        x+=1

    return osebni_board_priverjanje 
```

转弯系统：

```
igralec = 0
while True:
    if igralec%2==0:
        print "Na vrsti je igralec 1"
        napad_igralec_1=napad(igralec_2)

    else:
        print "Na vrsti je igralec 2"
        napad_gralec_2=napad(igralec_1)
    igralec+=1
    print igralec 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:19:56.100

我不确定，因为我无法理解变量名，但是在`napad`函数的开头，你设置`board = []`了 ，这样就会删除`board`. 而且它看起来像是`board`一个局部变量，所以无论你做什么，它都会在每次函数结束时消失。如果我对您的代码理解正确，那么您似乎每次调用时都将私有板加载到公共板`napad`中，但如果每次您都以 开头`board = []`，那么公共板将没有持久状态。当你做类似的事情时`board[napad_vrstica][napad_stolpec]="M"`，你只是在局部变量中设置一个元素，当函数结束`board`时它被丢弃。`napad`要解决所有这些问题，您需要在`napad`函数，用空格初始化它，然后从你的`napad`函数中引用该公共板（作为全局变量或通过将其作为参数传递）。

# android - 从 google play 安装的应用程序然后在本地重新安装新版本导致 UnsatisfiedLinkError

> ID：13517871
> 
> 赞同：0
> 
> 时间：2012-11-22T17:50:23.850
> 
> 标签：android

我们在 google play 上有一个应用程序，我们即将发布更新，但是在 JB 设备上测试更新导致在我们的代码中调用 System.loadLibrary("ourlib") 时出现 UnsatisfiedLinkError。ourlib 是我们使用 NDK 编译的库。此错误仅在 4.1 设备上显示。

我怀疑它与 JB 上的新安全性有关，应用程序首先使用 Google Play 安装，比如说版本 1，然后使用 adb 或使用 apk 从设备重新安装版本 2。

我在谷歌上找不到与此相关的任何内容，可能是什么问题？

这个问题 [http://code.google.com/p/android/issues/detail?id=35962](http://code.google.com/p/android/issues/detail?id=35962) 看起来很相似，但实际上它似乎是 google play 中的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:05:51.730

这是否意味着您正在尝试使用标准/系统库？也许您尝试加载的库版本**不**包含您打算使用的特定功能。当功能可用或停止可用时检查 android 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:41:35.983

解决方案是使用：

$ adb install -r -l my.apk

这使得使用前向锁定（又名复制保护）重新安装apk，我认为因为apk已升级到google play并启用了复制保护，所以还必须添加adb中的前向锁定选项。我知道 JB 引入了一些带有前向锁定的更改，所以可能就是这种情况。我不知道真正导致这个问题的内部原因，但上面似乎有效。

# game-physics - 这个平面射线相交代码是否正确？

> ID：13517872
> 
> 赞同：3
> 
> 时间：2012-11-22T17:50:25.923
> 
> 标签：game-physics, raytracing

我的 Plane 课程有两个字段：

```
public Vector3 Norm; //normal vector 
public double Offset; //signed distance to origin 
```

这是我用于交集的代码，不知道是否正确。我仔细检查了我的方程式和所有内容，但我想从对此更有经验的人那里获得反馈。

```
public override Intersection Intersect(Ray ray)
{
    // Create Intersection.
    Intersection result = new Intersection();

    // Find t.
    double t = - (Vector3.Dot(Norm,ray.Start) + Offset) / (Vector3.Dot(Norm, ray.Dir));
    if (t < 0) // the ray does not hit the surface, that is, the surface is "behind" the ray
        return null;

    // Get a point on the plane.
    Vector3 p = ray.Start + t * ray.Dir;

    // Does the ray intersect the plane inside or outside?
    Vector3 planeToRayStart = ray.Start - p;
    double dot = Vector3.Dot (planeToRayStart, Norm);
    if (dot > 0) {
        result.Inside = false;
    } else {
        result.Inside = true;
    }

    result.Dist = t;
    return result;
} 
```

另外，如果 t 接近 0，我不确定该怎么办？我应该检查 epsilon 以及 epsilon 应该有多大？另外我不确定我是否正确检查光线是否从内或外与平面相交？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:36:16.497

您的代码看起来大部分都很好，请参阅[这张幻灯片](http://www.cs.princeton.edu/courses/archive/fall00/cs426/lectures/raycast/sld017.htm)。由于您的平面本质上定义为从特定点开始的一组光线（封装在偏移参数中）并且与法线向量正交，因此您只需将定义插入查看光线上的点为了确定观察光线上的哪个点定义了这样的正交光线。

问题将是您的视线是否在平面内。在这种情况下，观察光线和法线光线将是正交的，因此它们的点积将为 0，您将得到除以 0 的异常。您需要提前检查：如果观察向量与法线的点积为 0，则表示观察光线平行于平面，因此要么没有相交，要么存在无限多交叉点（射线在平面内）。无论哪种方式，我认为对于光线追踪，您通常只会说没有交点（即，没有要渲染的内容），因为在后一种情况下，您正在查看一个二维平面，因此您不会什么都看不见。

I don't see any reason you need to specially handle "close to 0". Either the ray is parallel to the plane and there's nothing to render, or it's not and it intersects the plane at exactly one point. You'll get into floating point rounding errors eventually, but this is just a small source of error in your rendering which is only an approximation of the scene anyway. As long as you keep your dimensions reasonably large, the floating point errors should be insubstantial.

# javascript - 我在哪里可以找到 $.post()？

> ID：13517879
> 
> 赞同：0
> 
> 时间：2012-11-22T17:51:07.670
> 
> 标签：javascript, asp.net, asp.net-mvc-3, razor, postback

我想用 Javascript 在 asp.net mvc3 razor 中发回一个页面，所以我四处搜索，看到有人在使用`$.post(blabla)`，但我不知道这个`post`功能在哪里？

谁能向我解释如何调用这个`post`函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:52:56.663

有很多可能性`$.post`。著名的 jQuery 库提供了此功能，例如：[http](http://api.jquery.com/jQuery.post/) ://api.jquery.com/jQuery.post/ ，它是其完整[`$.ajax`功能的包装器](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:03:27.820

这是 jQuery 中用于进行 AJAX 调用的函数，您不会使用它来回发页面。

使用`submit`要回发的表单上的功能。例子：

```
$('#myForm').submit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:52:25.620

这是 jQuery 的一部分，[也是 ajax 函数](http://api.jquery.com/jQuery.ajax/)`$.get()`的简写之一：

见[参考](http://api.jquery.com/jQuery.post/)

请注意，不可能 100% 确定：没有 jQuery，您可以很好地定义这样的函数：

```
var $ = {
   post: function(){...}
}; 
```

确定的主要方法是在 HTML 文件的头部查找导入（尽管可以将其命名为不同的名称或动态加载），如下所示：

```
<script type="text/javascript" src="jquery-1.6.1.js"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T17:53:04.163

您需要查看[http://jquery.com](http://jquery.com)。它是该库中的一个函数。

# jquery - jQuery事件绑定效率问题

> ID：13517882
> 
> 赞同：1
> 
> 时间：2012-11-22T17:51:39.157
> 
> 标签：jquery

我的项目中有这个 [以及更多] 非常低效的点击事件绑定代码，我想找到一种方法来加快速度，因为我相信这是我的前端大量减速的原因。希望有任何关于如何使它更平滑的提示，以便在页面上有更多可点击事件时进行缩放。

这些事件中的每一个在加载时都绑定到单个项目，我知道必须有一种更好更有效的方法将点击事件绑定到每个项目中的每个元素。

谢谢你的帮助。

```
$(self.colBodySelection + " #post_dm_" + sItemId).unbind();
    $(self.colBodySelection + " #post_dm_" + sItemId).click(function(){ 
        var sResponseType = $(this).attr("response_type");
        self.fnRespond(sItemId, sResponseType);
    }); 

    $(self.colBodySelection + " #post_body_" + sItemId).unbind();
    $(self.colBodySelection + " #post_body_" + sItemId).click(function(){   
        //self.fnPostSelect();
    });

    $(self.colBodySelection + " #select_" + sItemId).unbind();
    $(self.colBodySelection + " #select_" + sItemId).click(function(){
        self.fnPostSelect(1, sItemId);  
    });

    $(self.colBodySelection + " #poster_" + sItemId).unbind();
    $(self.colBodySelection + " #poster_" + sItemId).click(function(){
        self.fnLoadUserColumn();    
        $(self.colBodySelection + " #settings_box_" + sItemId).slideUp("fast");
        $(self.colBodySelection + " #history_" + sItemId).slideUp("fast");
        $(self.colBodySelection + " #respond_"+sItemId).slideUp("fast");
        $(self.colBodySelection + " #assign_box_" + sItemId).slideUp("fast");
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:58:26.280

如何尝试`.on()`在父容器上使用 a 而不是将事件附加到单个 DOM 元素。`.on`还负责将事件附加到稍后加载的新子元素。

在一个简化的例子中

```
<div id="parent">
    <div id="child-01">Child 01</div>
    <div id="child-02">Child 01</div>
    <div id="child-03">Child 01</div>
    <div id="child-04">Child 01</div>
</div> 
```

在这里而不是关联事件

```
$('#child-01').click
$('#child-02').click
$('#child-03').click
$('#child-04').click 
```

我会在孩子们身上加一门课

```
<div id="parent">
    <div id="child-01" class="child">Child 01</div>
    <div id="child-02" class="child">Child 01</div>
    <div id="child-03" class="child">Child 01</div>
    <div id="child-04" class="child">Child 01</div>
</div> 
```

并将 a 附加`.on`到父级上

```
$('#parent').on('click','.child', function(){
     //do whatever!!

}) 
```

看看[这个](http://api.jquery.com/on/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:55:12.390

作为第一个非常快速的建议，您可以链接您的 .unbind() 和 .bind() 事件，以便只需要找到一次选择器。例如

```
$(self.colBodySelection + " #post_body_" + sItemId).unbind().click(function(){   
    //self.fnPostSelect();
}); 
```

# nullpointerexception - NullPointerException org.gradle.wrapper.BootstrapMainStarter.findLauncherJar(BootstrapMainStarter.java:37)

> ID：13517884
> 
> 赞同：7
> 
> 时间：2012-11-22T17:51:52.043
> 
> 标签：nullpointerexception, gradle, runtimeexception

启动 gradle 1.1 时得到以下堆栈跟踪，任何人都知道如何解决它们：

`Exception in thread "main" java.lang.NullPointerException at org.gradle.wrapper.BootstrapMainStarter.findLauncherJar(BootstrapMainStarter.java:37) at org.gradle.wrapper.BootstrapMainStarter.start(BootstrapMainStarter.java:28) at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:130) at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:47)`

我认为 dists/gradle-1.1-bin/13d7lnhcrghv2i5e54el41jpgr/gradle-1.1-bin.zip 的自动解压缩可能会失败。我检查了权限，并且我可以访问该目录。

如果我手动解压缩，则会收到以下错误： `Exception in thread "main" java.lang.RuntimeException: Gradle distribution 'http://services.gradle.org/distributions/gradle-1.1-bin.zip' contains too many directories. Expected to find exactly 1 directory. at org.gradle.wrapper.Install.createDist(Install.java:73) at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:129) at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:47)`

我对 gradle nullpointerexception 进行了谷歌搜索，它提到需要设置 JAVA_HOME 以进行编译，但我已经检查它是否设置正确并且能够在该环境中使用 ant 编译东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-29T05:51:29.027

我遇到了完全相同的错误，我更改了我正在使用的 gradle 版本。在我的 gradle-wrapper.properties 中，将版本 2.4 更改为 2.2.1 并且错误消失了。

# java - 从java发送参数到jsp

> ID：13517887
> 
> 赞同：0
> 
> 时间：2012-11-22T17:51:58.813
> 
> 标签：java, jsp, netbeans, war

我想将执行特定工作的 java 文件中的参数发送到 index.jsp 文件。如何实现？基本上，我的应用程序从 wsdl 链接获取数据，然后 java 文件对其进行处理。我想将java文件的输出传递给jsp。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:04:54.983

```
request.setAttribute("value",valueFromWSDL); 
```

这个可以在java中设置。

在 index.jsp 你可以使用

```
request.getAttribut("value"); 
```

获得价值

# ios - iOS 应用因 UIWebView 而被拒绝

> ID：13517888
> 
> 赞同：0
> 
> 时间：2012-11-22T17:52:05.177
> 
> 标签：ios, uiwebview, app-store-connect

我刚刚因为拥有 UIWebView 而被我的应用程序拒绝。我启动了一个搜索，因此用户可以搜索任何东西，我想。我的问题是我不知道如何在 iTunes 连接中设置评级。他们拥有的类别是暴力、赌博等，但我的应用程序在设计上不属于这些类别中的任何一个。在我的情况下如何设置评级？我认为我可以像 Apple 想要的那样拥有 17+ 的评级。我真的不想启动 safari 并让用户离开我的应用程序。如何在 iTunes 连接中设置它？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:57:29.040

您只能在提交新版本时更改评级。所以只需创建一个新版本并上传具有新评级的相同二进制文件。否则，您可以提交评分为 17+ 的应用，并在审核后将其降至 4+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:57:55.110

它是您在 iTunes Connect 中运行的“添加新应用程序”向导的一部分。有一个部分，您可以在其中选择有关评级问题的单选按钮。由于搜索可能包括来自暴力、赌博等的内容，因此只需将其设置为不频繁/轻度或频繁/强烈。

# r - as.character 在函数上的用法

> ID：13517892
> 
> 赞同：6
> 
> 时间：2012-11-22T17:52:15.223
> 
> 标签：r, function

我偶然发现了一个问题：

```
temp.fun <- function() {}
as.character(temp.fun) 
```

产生错误。我理解，为什么不能将函数“转换”为字符。问题是，要向函数添加哪些属性，以便该方法`as.character`返回我自己定义的字符串？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T17:59:05.080

`deparse`能够帮助：

```
> deparse( temp.fun )
[1] "function () " "{"            "}" 
```

进一步了解您的评论细节，您可以做的是创建一个派生`function`并传递 this 而不是函数的类。

```
setClass( "myFunction", contains = "function" )
setMethod( "as.character", "myFunction", function(x, ...){
    deparse( unclass( x ) ) 
} ) 
```

因此，当您将函数传递给第三方包时，您传递的是 a `myFunction`：

```
f <- new( "myFunction", function(){} )
as.character(f)
# [1] "function () " "{"            "}" 
```

# java - 在 Android App 中使用代码设置启动 Activity

> ID：13517893
> 
> 赞同：1
> 
> 时间：2012-11-22T17:52:16.053
> 
> 标签：java, android, android-activity

我是开发 Android 应用程序的新手。我知道如何使用 AndroidManifest.xml 设置启动 Activity，但我需要一种方法在选择启动 Activity 之前先检查某些内容。

我的问题：我创建了一个 loginActivity 和一个 mainActivity。我想做以下事情：如果我登录，我会将标志设置为 1，并且在下一次应用启动时，我想直接显示 mainActivity 而不是登录。

有没有办法做到这一点？我想创建一个启动画面，我可以在显示第一个活动之前检查我是否登录。

谢谢，菲利普

更新的代码 - 工作：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // get preferences
    SharedPreferences userDetails = getApplicationContext().getSharedPreferences("userdetails", 0);
    String savedEmail = userDetails.getString("email", "");
    String savedPassword = userDetails.getString("password", "");
    Boolean savedRemember = userDetails.getBoolean("remember", false);
    Boolean savedLogged = userDetails.getBoolean("logged", false);

    // check if already logged in
    if(savedLogged) {
        // start the overview
        Intent intent = new Intent(this, ActivityOverview.class);
        startActivity(intent);
        finish();
    }
    else {
        // initialize the form layout
        setContentView(R.layout.activity_login);

        // get views
        this.email = (EditText)findViewById(R.id.editTextEmail);
        this.password = (EditText)findViewById(R.id.editTextPassword);
        this.remember = (CheckBox)findViewById(R.id.checkBoxRemember);

        // set values to views
        this.email.setText(savedEmail);
        this.password.setText(savedPassword);
        this.remember.setChecked(savedRemember);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:54:30.590

你真的不需要启动画面。

当用户成功登录到您的应用程序时，将[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中的布尔标志设置为 true。检查登录活动中的此标志是否为真，`onCreate()`如果是，则使用 an`Intent`启动主要活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:54:47.407

您不需要显示您的活动。不确定您的代码流究竟是什么，但您可以安全地开始，即使用 LoginActivity。检查您`onCreate()`是否已经登录（无论对您来说意味着什么），如果是这样，请立即启动 MainActivity 杀死 LoginActivity `finish()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:02:39.303

使用启动画面将是一个好主意。启动 loginActivity 将在瞬间显示登录屏幕。这将是不可取的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T18:13:29.030

我的一个应用程序中有类似的东西。我让用户选择天气是否应该自动登录。这是保存在`SharedPreferences`.

当应用程序启动并在主页中时，您应该检查 - **BEFORE**和`setContentView(R.layout.activity_login);`set `finish();`after`startActivity();`

```
if(savedLogged) {

    Intent intent = new Intent(this, ActivityOverview.class);
    startActivity(intent);
    finish();
}
setContentView(R.layout.activity_login); 
```

# asp.net-mvc - asp.net mvc 在每个操作之前修复（更正）数据。在模型或控制器中执行？

> ID：13517894
> 
> 赞同：2
> 
> 时间：2012-11-22T17:52:19.390
> 
> 标签：asp.net-mvc, model-view-controller, architecture

我正在开发类似带有步骤（控制器）和用途的向导`DerivedModel1`，`DerivedModel2`它继承自`BaseModel`并使用额外的属性扩展它们。模型——只有数据，没有业务逻辑。控制器操作中服务执行的所有逻辑，例如 _step1Service.GetRelated(model.id)。

现在我不仅要验证模型（在这种情况下有`ValidationAttribute`），还要修复无效数据`BaseModel`：

```
 public class BaseModel
 {
     public DateTime StartDate {get;set;}
 } 
```

`StartDate`应该比今天更大。用户可以选择无效日期，而不是验证错误应用程序应该修复此值（重置为默认值？）。

在我的第一次尝试中，我添加了用于验证/更正的服务，`StartDate`并在每个操作中调用：

```
public ActionResult Index(DerivedModel1 model)
{
_svc.fixModel(model);

if(!ModelState.IsValid)
{
return View();
}

... do stuff with valid data
} 
```

但不喜欢那样，因为必须将此行添加到每个控制器和操作。然后我将此更正添加到`StartDate`setter。它看起来更好，但这打破了流行的 MVC 范式，即所有逻辑都应该在控制器中（或者我可能误解了什么？）我在考虑这个问题的可能解决方案：ActionFilterAttribute，自定义 ModelBinder？但不确定这种方法是否正确以及是否有效。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:08:57.493

你必须实现 IModelBinder 来实现这一点。

首先像这样定义您的自定义模型绑定器：

```
public class MyCustomModelBinder : IModelBinder
{
   public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            // Get the raw attempted value from the value provider
            DateTime incomingDate = (DateTime) bindingContext.ValueProvider.GetValue("datefield").AttemptedValue;
            //validate and correct date here ...
            return new BaseModel{ DateMember =  incomingDate };
        }
} 
```

然后注册您的自定义模型绑定器，例如：

```
protected void Application_Start()
{
       ModelBinders.Binders.Add(typeof (BaseModel), new MyCustomModelBinder());          
} 
```

和你的控制器：

```
public ActionResult YourAction([ModelBinder(typeof(MyCustomModelBinder )] BaseModel model)
{
      return Content("Ok");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:54:58.787

验证和业务规则之间存在差异。对象可以（并且通常应该）负责确保它们本身处于有效状态。

# mediawiki-api - 如何使用 MediaWiki 的 api 获取文章的第一部分？

> ID：13517901
> 
> 赞同：2
> 
> 时间：2012-11-22T17:53:10.453
> 
> 标签：mediawiki-api

我想找到一个随机选择的页面的第一部分并将其呈现为 HTML。

这是我尝试过的： [http ://en.wikipedia.org/w/api.php?format=xml&action=query&generator=random&prop=revisions&rvprop=content&rvparse](http://en.wikipedia.org/w/api.php?format=xml&action=query&generator=random&prop=revisions&rvprop=content&rvparse)

但它不断在用户谈话和我不感兴趣的其他人中返回结果。（即它们在其他名称空间中）

我不知道如何在这里指定命名空间。rnnnamespace 和 rvnamespace 等参数不起作用。

我希望这是一个单一的 API 调用，但如果不可能的话，我怎么能分两次调用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:20:23.380

我玩过[API 沙箱](http://en.wikipedia.org/wiki/Special%3aApiSandbox)，这似乎符合我的要求：

[api.php?format=xml&action=query&generator=random&prop=revisions&rvprop=content&rvparse= **&rvsection=0&grnnamespace=0**](http://en.wikipedia.org/w/api.php?format=xml&action=query&generator=random&prop=revisions&rvprop=content&rvparse=&rvsection=0&grnnamespace=0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T23:03:07.490

如果您想获取特定文章而不是随机页面，可以使用基于 action=parse 的替代查询：[api.php?action=parse&page=StackOverflow&prop=text§ion=0](http://en.wikipedia.org/w/api.php?action=parse&page=StackOverflow&prop=text&section=0&format=txtfm&disablepp&redirects)

由于您专注于第一部分，您可能对扩展的 API 方法感兴趣（由[MobileFrontend 扩展](https://www.mediawiki.org/wiki/Extension%3aMobileFrontend)引入，这意味着默认情况下它并非在每个 MediaWiki wiki 上都可用，但在 Wikimedia wiki 上可用），它使用一个名为“extracts”的属性：[api.php?action=query&prop=extracts&exintro&generator=random&grnnamespace=0——](http://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&generator=random&grnnamespace=0&indexpageids=true&format=txtfm)这个查询实际上去掉了所有花哨的东西（表格、模板、链接、图像......）并只返回格式化的有效文本内容。

# javascript - Highstock Y 轴标签相互重叠

> ID：13517906
> 
> 赞同：1
> 
> 时间：2012-11-22T17:54:15.910
> 
> 标签：javascript, highcharts, highstock

请看一下我正在构建的图表的这个[小提琴。](http://jsfiddle.net/nickeblewis/3jgQc/2/)

我的问题是：

*   Y 轴标签和百分比重叠。是否可以对齐它们，以便我有绿色百分比，标签“二”，然后是红色百分比，最后是标签“三”？如果你看一下另一个[小提琴](http://jsfiddle.net/nickeblewis/UxJU6/2/)，它肯定看起来更整洁。
*   Highstock 在图表网格内显示其标签。可以将它们推到外面，使标签看起来更像我的第二个 JSFiddle 显示它们的方式吗？

第一个问题对我来说是最重要的，如果我必须解决第二个问题，我可以忍受：

```
chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container',
            zoomType: 'xy'
        },

        rangeSelector: {
            selected: 4
        },

        yAxis: [{
             title: {
                text: 'One',
                style: {
                    color: 'blue'
                }
            },
            labels: {
                formatter: function() {
                    return (this.value > 0 ? '+' : '') + this.value + '%';
                }
            }
        },
        {

             title: {
                text: 'Two',
                style: {
                    color: 'green'
                }
            },
            labels: {
                formatter: function() {
                    return this.value + '%';
                },
                style: {
                    color: 'green'
                }
            },
  opposite: true
        },
{

             title: {
                text: 'THree',
                style: {
                    color: 'red'
                }
            },
            labels: {
                formatter: function() {
                    return this.value + '%';
                },
                style: {
                    color: 'red'
                }
            },
  opposite: true
        }  
      ],

        plotOptions: {
            series: {
                compare: 'percent'
            }
        },

        tooltip: {
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
            valueDecimals: 2
        },

        series: seriesOptions
    });
}

});​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T18:28:49.763

[您可以使用yAxis.labels.x](http://api.highcharts.com/highstock#yAxis.labels.x)和[yAxis.title.margin](http://api.highcharts.com/highstock#yAxis.title.margin)的组合来控制这些位置。

例如第一个 yAxis：

```
 {
             title: {
                text: 'One',
                style: {
                    color: 'blue'
                },
                margin: 25 //push out 25 pixels
            },
            labels: {
                formatter: function() {
                    return (this.value > 0 ? '+' : '') + this.value + '%';
                },
                x: -20 //push out 20 pixels
            }
        } 
```

[在这里](http://jsfiddle.net/larsenmtl/3jgQc/6/)更新了小提琴。

![在此处输入图像描述](../Images/0b642e3f9e7bc5b784ad557b481b70ae.png)

# emacs - 通过 SSH 使用 Emacs 时，“yank”不粘贴文本

> ID：13517910
> 
> 赞同：10
> 
> 时间：2012-11-22T17:54:35.010
> 
> 标签：emacs, ssh, yank

当我尝试通过 ssh 在远程服务器上运行 Emacs 时，`C-y`(even `M-x yank`) 无法工作。每次我按`C-y`时，它都会显示“标记设置”，但没有其他任何反应。我在 Linux 下工作，远程服务器是 Mac pro。

现在我只能将文件下载到我的电脑上。关于如何更好地解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:26:01.270

我怀疑您的问题不是由于 Emacs 远程运行，而是由于 Emacs 在“文本模式”下运行（即在终端仿真器内运行）。在这种模式下运行时，Emacs 不知道任何可能正在运行的周围 GUI，因此`C-y`只能通过类似`C-w`或`M-w`.

您可以尝试在终端仿真器（可能是 Cmd-v）中进行“粘贴”，这会将选定的文本发送到底层应用程序（在本例中为 Emacs），就好像它已被键入一样。只要您粘贴的文本由“足够简单”的字符组成，它就可以正常工作。如果它包含任何有趣的控制字符，所有的赌注都被关闭（如果它包含非 ASCII 字符，它也可能以一种有趣的方式表现，这取决于整个“终端模拟器+ssh+Emacs”是否配置得恰到好处） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T14:23:27.887

文本模式的事情不是我的问题。

我有一个运行 emacs 的 macbook。我使用 tramp-mode 在 linux 机器上（远程）编辑文件。没有远程 emacs。都是本地的。

我在 mac 上设置了这样的复制/粘贴，所以我可以从 emacs 之外的系统剪贴板中“拉出”：

```
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; handle copy/paste intelligently
(defun copy-from-osx ()
  "Handle copy/paste intelligently on osx."
  (let ((pbpaste (purecopy "/usr/bin/pbpaste")))
    (if (and (eq system-type 'darwin)
             (file-exists-p pbpaste))
          (shell-command-to-string pbpaste))))

(defun paste-to-osx (text &optional push)
  "Handle copy/paste intelligently on osx.
TEXT gets put into the Macosx clipboard.

The PUSH argument is ignored."
  (let* ((process-connection-type nil)
         (proc (start-process "pbcopy" "*Messages*" "pbcopy")))
    (process-send-string proc text)
    (process-send-eof proc)))

(setq interprogram-cut-function 'paste-to-osx
      interprogram-paste-function 'copy-from-osx) 
```

*显然，tramp-mode 试图变得聪明，当拉动文本时，它会远程*运行我设置的 pbpaste 命令。或者尝试。这是我不想要的。所以我把它修改`copy-from-osx`成这样：

```
(defun copy-from-osx ()
  "Handle copy/paste intelligently on osx."
  (let ((pbpaste (purecopy "/usr/bin/pbpaste")))
    (if (and (eq system-type 'darwin)
             (file-exists-p pbpaste))
        (let ((tramp-mode nil)
              (default-directory "~"))
          (shell-command-to-string pbpaste))))) 
```

请注意，它在运行 pbpaste 之前临时将 tramp-mode 设置为 nil。

为我工作。

# vb6 - 读取列值时出错

> ID：13517913
> 
> 赞同：0
> 
> 时间：2012-11-22T17:54:53.683
> 
> 标签：vb6

该应用程序在数据库 IBM Informix 上运行良好……现在我们正在迁移到 SQL SERVER 2012……这开始发生了。

遵循一个例子。

```
sql = "select r_e_c_n_o_, zb1_larg, zb1_verniz from " & arq("zb1")
sql = sql & " where zb1_filial='" & filial("zb1") & "' and zb1_cod='" & dados_rotulo.b1_cod
sql = sql & "' and zb1_revpro='" & dados_rotulo.zb1_revpro & "'"
sql = sql & " and (d_e_l_e_t_ is null or d_e_l_e_t_ = ' ')"
rst_zb1.Open sql, cnn_db, adOpenForwardOnly, adLockReadOnly 
```

如果我像下面这样阅读它可以正常工作。

```
recno = rst_zb1.Fields!r_e_c_n_o_ ' return ok, return value: 5000
larg = rst_zb1.Fields!zb1_larg
verniz = rst_zb1.Fields!zb1_verniz 
```

如果我更改序列，它不会在读取查询的最后一列之前为 recno 列返回任何值。为什么会这样？

```
larg = rst_zb1.Fields!zb1_larg
verniz = rst_zb1.Fields!zb1_verniz
recno = rst_zb1.Fields!r_e_c_n_o_ 'return 0, it should return value: 5000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:29:56.040

尝试使用`adOpenKeyset`或`adOpenDynamic`代替`adOpenForwardOnly`. 看看是否有帮助。

# batch-file - 将数组从批处理程序传递到 vbscript

> ID：13517915
> 
> 赞同：2
> 
> 时间：2012-11-22T17:54:58.533
> 
> 标签：batch-file

嗨，我想知道如何将数组传递给 vbscript 文件。我有 5 个包含整数的文本文件。我在批处理程序中读取它们并且必须将这 5 个整数传递给 vbscript 文件并在 vbscript 中检测它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:48:41.760

我不知道这是不是你想要的：

**如何使用：**

```
Integers.vbs "number1" "number2" "number3" "number4" "number5" 
```

**整数.vbs**

```
' set the vars
Integer1 = Wscript.Arguments.Item(0)
Integer2 = Wscript.Arguments.Item(1)
Integer3 = Wscript.Arguments.Item(2)
Integer4 = Wscript.Arguments.Item(3)
Integer5 = Wscript.Arguments.Item(4)

' Print all the args
Set objArgs = WScript.Arguments
For Each strArg in objArgs
    WScript.Echo strArg
Next 
```

# java - 如何返回字符串的arrayList

> ID：13517920
> 
> 赞同：-4
> 
> 时间：2012-11-22T17:55:17.443
> 
> 标签：java, string, arraylist

我试图返回一个 userData 的 ArrayList，它是数据库中所有用户的用户名。我一直在尝试返回 ArrayList 时遇到错误。任何人都可以帮忙吗？

```
import java.util.*;
import java.io.*;
import java.util.ArrayList;

public class readCSV
{
    List<String[]> userData = new ArrayList<String[]> ();
    public void checkLogin() throws IOException
    {
        try
        {
            File file = new File("C:/Users/Sean/Documents/Programming assigment/Users.csv");
            BufferedReader bufRdr  = new BufferedReader(new FileReader(file));      
            String lineRead = bufRdr.readLine();
            while(lineRead != null)
            {
                ArrayList<String> list = new ArrayList<String>();
                while(lineRead != null)
                {
                    this.userData.add (lineRead.split(","));
                }
                bufRdr.close();
            }
        }
        catch(Exception er){
            System.out.print(er); 
            System.exit(0);
        }
    }

    public String[] getLogin()
    {
        return userData;
    }
} 
```

> 错误不兼容类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:56:24.997

```
public String[] getLogin() 
```

返回类型是`String[]`，并且您正在返回`List<String[]>`-

```
return userData;  // userData is `List<String[]>` 
```

您需要将方法签名更改为： -

```
public List<String[]> getLogin() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:05:34.963

您需要检查`getLogin()`方法的返回类型。它返回 a`List<String[]>`而不是`String[]`。相应地更改返回类型。

# flash - 管理 Flex 字段的 tabIndex 属性

> ID：13517927
> 
> 赞同：0
> 
> 时间：2012-11-22T17:56:10.513
> 
> 标签：flash, apache-flex, flash-builder

我的应用程序有多个表单，每个表单都有多个字段。
我发现 tabIndex 属性很难维护。每当我必须在给定表单上添加/重新定位/删除字段时，分配适当的 tabIndex 编号需要最长时间。
有什么方法可以更好地维护 tabIndexes 吗？可能是在初始化表单或以某种方式自动化它时。

```
I use Flash Builder 4.6. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:49:13.013

最好不要更改组件的内部选项卡数。如果您想要在每次按下回车键时关注下一个文本字段，则将下一个代码行添加到每个文本字段定义：

输入="{focusManager.getNextFocusManagerComponent().setFocus()}"

瞧！问题解决了。无论您是删除还是更改组件，都可以使用这种方式，因为它非常通用。

干杯

# php - 学说 2 动态查询

> ID：13517928
> 
> 赞同：4
> 
> 时间：2012-11-22T17:56:23.210
> 
> 标签：php, mysql, symfony, doctrine

我正在尝试使用教义进行动态搜索查询。它不工作

```
$em = $this->getDoctrine()->getEntityManager();
$city = 'new york';
$minprice = 500;
$maxprice = 1000;

$testquery = "SELECT p FROM AcmeTestBundle:Car p WHERE p.city = :city";
$testparam = array('city' => $city,);

if ($minprice != '') {
    if ($maxprice != '') {
        $testquery .= " and p.price BETWEEN :minprice AND :maxprice";
        $testparam .= array(
            'minprice' => $minprice,
            'maxprice' => $maxprice,
            );
    }
}

$testquery .= " ORDER BY p.price ASC";

$query = $em->createQuery($testquery)->setParameters($testparam);

$result = $query->getResult(); 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:18:32.340

原则上，您采用的方法是可以的。但是，我可以看到至少有两件事是错误的。

1）Doctrine 不支持 BETWEEN，所以你需要类似的东西：

```
 $testquery .= " and p.price >= :minprice AND p.price <= :maxprice"; 
```

2) .= 只是一个字符串运算符，你不能将它与数组一起使用。所以你必须做这样的事情（你可以做一个 array_merge 但这似乎有点矫枉过正）：

```
 $testParam['minPrice'] = $minPrice;
    $testParam['maxPrice'] = $maxPrice; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:18:13.320

在 php 中，不能`.=`与数组一起使用。相反，做

```
$testparam['minprice'] = $minprice;
$testparam['maxprice'] = $maxprice; 
```

# php - 与 twitteroauth 保持联系

> ID：13517934
> 
> 赞同：1
> 
> 时间：2012-11-22T17:56:35.653
> 
> 标签：php, twitter, oauth

这是我的连接功能：

```
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $oauth_token, $oauth_token_secret); 
```

当用户注册我的应用程序时，$oauth_token 和 $oauth_token_secret 是空的。但是当用户已经将我的应用程序授权给他的帐户时，尽管我正在使用他的 oauth 令牌，但会一次又一次地询问此授权。

我该如何解决？

# c++ - 如何从外部代码和 Makefile 启动 Codeblocks 项目？

> ID：13517938
> 
> 赞同：17
> 
> 时间：2012-11-22T17:56:55.153
> 
> 标签：c++, linux, unix, compiler-construction, codeblocks

我有依赖于 boost 和其他库的 C++ 代码，因此这段代码有一个调用 boost 的 makefile。

我现在正尝试开始在 linux 的代码块中开发此代码，所以为了做到这一点，我有两个基本问题：

(1) 如何将代码作为代码块新项目导入代码块？这似乎是一个很好的建议：http: [//www.programmingforums.org/thread44976.html](http://www.programmingforums.org/thread44976.html)

（2）我如何使用代码块而不是代码块来调用makefile来尝试编译代码（由于代码块不知道它需要调用boost，它会失败）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-11T11:39:33.383

> 如何将代码作为代码块新项目导入代码块？

*文件 > 新建 > 项目 > 空项目*

创建项目，然后：

*   右键单击“项目”窗格中的项目名称；
*   递归添加文件。

我建议您在源代码的顶层创建 Code::Blocks 项目新项目（而不是例如在专用`~/codeblocks`目录中），否则它将显示长文件路径。

> 如何使用代码块而不是尝试编译代码的代码块调用makefile（由于代码块不知道它需要调用boost，因此它会失败）。

问：[是否可以使用现有的 Makefile 在 Code::Blocks 中构建项目？](https://stackoverflow.com/questions/4754196/makefile-project-in-codeblocks). 为了快速参考，解决方案是转到*Project > Properties*并打开选项*This is a custom Makefile*。可以从同一窗口指定更多选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T18:10:54.797

大多数项目可以在没有 makefile 的情况下编译，因此只需包含文件，如果您需要额外的库，请将其包含在项目中。如果您的项目仅使用标头 boost 库并且您已经安装了包 libboost-dev （这是在我的 debian 上），那么它会自动包含在内。否则只需在设置中使用正确的库名称（如果您需要将 l 附加到名称，我不记得了）。

# python - 如何获取类/实例的所有属性？

> ID：13517941
> 
> 赞同：1
> 
> 时间：2012-11-22T17:57:09.313
> 
> 标签：python, oop, python-2.7

> **可能重复：**
> [检查 python 类属性](https://stackoverflow.com/questions/4241171/inspect-python-class-attributes)

我需要得到一个干净的列表，列出我在一个类中定义的所有属性的名称。假设我有下一节课：

```
class MyClass(object):
    attr1 = None
    attr2 = 2
    attr3 = "Hello world" 
```

我想知道是否有什么可以让我做的事情：

```
>>> some_method(MyClass)  # <- check class
['attr1', 'attr2', 'attr3']
>>> my_class = MyClass()
>>> some_method(my_class)  # <- check instance of MyClass
['attr1', 'attr2', 'attr3'] 
```

我不能依赖内置方法`dir`，因为它还返回属性，如`__class__`,`__getattr__`以及该类具有的任何方法。**我的意思是，我只**需要获取类中定义的属性，而不是内置属性，也不需要方法。

这甚至可能吗？或者有什么方法可以知道哪些属性是内置的，哪些是我定义的，以便我可以遍历列表`dir`返回并进行一些操作`filter`？

提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T18:03:03.263

这是一个起点：

```
>>> [x for x in dir(a) if not x in dir(super(type(a)))]
['__dict__', '__module__', '__weakref__', 'attr1', 'attr2', 'attr3'] 
```

返回对象`dir`中不是来自其父类的所有内容`dir`。

它做得好的一件事是过滤掉类中定义的方法，但不涉及碰巧是函数的实例属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:02:03.517

函数*也是*属性，没有什么能阻止您在以后将附加函数分配给类或实例。所以你问你是否可以列出所有*不是*函数的属性，而不是“特殊”。

如果要列出*直接*在类或实例上定义的任何内容，请查看`.__dict__`映射。您仍然需要过滤：

```
import types

def objectAttributes(obj):
    for key, val in obj.__dict__.iteritems():
        if not isinstance(val, (types.FunctionType, types.MethodType)):
            yield key 
```

这将生成所有不是函数或方法的属性名称，它们应该适用于类和手动分配给它们的方法的实例。

要获取列表作为输出，请调用`list(objectAttributes(MyClass))`或`list(objectAttributes(myinstance))`。

这个方法不*遍历*[`__slots__`](http://docs.python.org/2/reference/datamodel.html#slots)基类，如果你在你的类上使用就会失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T18:13:59.840

您可以使用[检查](http://docs.python.org/2/library/inspect.html)模块来执行此操作。

这是一个例子：

```
>>> import inspect
>>> filter(lambda x: not (x.startswith('__') and x.endswith('__')), [a for (a, b) in inspect.getmembers(MyClass, lambda x : (not inspect.ismethod(x) and not inspect.isbuiltin(x)) )])
['attr1', 'attr2', 'attr3'] 
```

基本思想是运行`inspect.getmembers`以获取某个对象的所有成员。这支持对象和类。使用作为可选参数提供的谓词 lambda 表达式过滤方法和内置函数`inspect.getmembers`。然后，列表推导用于获取每个成员的名称，最后`__dict__`使用 Python 过滤器函数过滤掉 etc。

过滤`__dict__`等不是很“科学”，但我认为它应该适用于大多数情况:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T18:03:57.923

```
t = MyClass()
result = []
for k,v in t.__dict__.items(): #all members of MyClass
    if not hasattr(v, '__call__'):#if it's not  a callable 
        result.append(k) 
```

# matlab - 如何同时使用函数和脚本

> ID：13517950
> 
> 赞同：0
> 
> 时间：2012-11-22T17:58:13.070
> 
> 标签：matlab

我是 MATLAB 新手，没有太多编程经验，所以我很困惑。

我需要创建一个文件，其中有两个函数（由于我有 GUI）和一个脚本。我需要在回调中使用我在脚本中声明的变量。

我的程序是一个专家系统。首先，我将规则声明为结构数组，然后执行算法。我不明白如何调用我的规则，这些规则应该在我的函数文件中的脚本文件中。

**更新：**
我确实明白这一点，但是我已经阅读了很多东西，但我仍然无法弄清楚。我有规则文件，如下所示：

```
rule(1).condition1='First condition';  
rule(1).cond1ask=1;  
rule(1).condition2='Second condition';  
rule(1).cond2ask=1;  
rule(1).conclusion='Conclusion';  
rule(1).endmarker=1; 
```

该文件包含±50个这样的声明。然后我有一个非常简单的 GUI，它应该在我按下按钮时运行一个算法。问题是：如何将文件与 GUI 函数、算法和文件与规则结合起来？如何从 GUI 文件中调用规则？

这是图形用户界面代码：

`% --- Executes on button press in pushbutton1.
function pushbutton1_Callback(hObject, eventdata, handles)
global rule
% hObject handle to pushbutton1 (see GCBO)
% eventdata reserved - to be defined in a future version of MATLAB
% handles structure with handles and user data (see GUIDATA)
a1=rule(1).condition(1);
a1`

然后我从脚本文件运行 GUI 文件，虽然界面加载正常，但当我按下按钮时，我收到错误消息：

> 不正确的索引矩阵参考。
> 
> ES_21112012 中的错误>pushbutton1_Callback（第 83 行）a1=rule(1).condition(1);
> 
> gui_mainfcn 中的错误（第 96 行） feval(varargin{:});
> 
> ES_21112012 中的错误（第 43 行）gui_mainfcn(gui_State, varargin{:});
> 
> @(hObject,eventdata)ES_21112012('pushbutton1_Callback',hObject,eventdata,guidata(hObject)) 中的错误
> 
> 评估 uicontrol 回调时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:06:33.227

听起来您的问题是您无权访问回调函数中的变量“规则”。有时在编写 GUI 时这样做会很棘手。

使用 GUI 时实现对变量的全局访问的最常用方法之一是在首次定义变量后使用 setappdata 函数。我对您对程序的描述感到困惑，但是无论您首先定义这个“规则”结构是在哪里，都可以添加以下内容：

```
% rule = struct(); % Define your rule struct first
setappdata(0,  'myRules',  rule); 
```

然后，您可以检索此变量，而无需通过调用 getappdata 以某种方式将其作为参数传递给您的回调函数：

```
rule = getappdata(0,'myRules'); 
```

请注意，这不是唯一的解决方案，并且可能不是您的程序的最佳解决方案，但是如果不完全了解程序的逻辑，就很难给出更具体的建议。

# oracle - SYS_REFCURSOR 作为 OUT 参数

> ID：13517952
> 
> 赞同：1
> 
> 时间：2012-11-22T17:58:28.700
> 
> 标签：oracle, procedure, sys-refcursor

我有一个表包含`(username-primarykey,password,age,gender);`

必须创建类似的程序`procedure(username in varchar,s_cursor out sys_refcursor);`

过程必须接受`username`并返回行 ( `where username=in parameter`) 作为游标。

规则：光标必须并且应该具有唯一的序列 no 以及它给出的记录。例子：`(unique no(sequence),username ,password,age,gender)`

每次过程都应返回单个记录以及唯一编号（序列）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T18:35:18.400

您可以尝试这样的事情，如果您需要更多信息，您必须提供更多详细信息。

为唯一编号创建一个序列。

```
CREATE SEQUENCE emp_seq
  MINVALUE 1
  MAXVALUE 999999999999999999999999999
  START WITH 1
  INCREMENT BY 1
  CACHE 20; 
```

创建一个`sys_refcursor`作为`OUT`参数和`emp_id`作为`IN`参数返回的过程

```
 CREATE OR REPLACE PROCEDURE get_employee_details (user_id 
                                                      YOURTABLE.USERNAME%TYPE,
                                               emp_cursor   OUT SYS_REFCURSOR)
    AS
    BEGIN
       OPEN emp_cursor FOR
          SELECT emp_seq.NEXTVAL,
                 USERNAME,
                 PASSWORD,
                 AGE,
                 GENDER
            FROM YOURTABLE
           WHERE USERNAME = user_id;
   EXCEPTION
   WHEN NO_DATA_FOUND
   THEN
      DBMS_OUTPUT.put_line ('<your message>' || SQLERRM);
   WHEN OTHERS
   THEN
      DBMS_OUTPUT.put_line ('<your message>' || SQLERRM);
    END get_employee_details;
    / 
```

并从 sqlplus 执行该过程

```
variable usercur refcursor;

DECLARE

user_id  YOURTABLE.USERNAME%TYPE;

BEGIN
user_id := 'JON';
get_employees(user_id,:usercur);

END;
/

print usercur 
```

更新 1

我假设您是从 sqlplus 或 Toad 调用您的过程，那么您可以执行您的过程

```
variable dcursor refcursor;

DECLARE

p_arrival  DEFAULT_DETAILS.ARRIVALCOUNTRY%TYPE;

BEGIN
p_arrival := '123';
PROCEDURE_SAMPLE(p_arrival,:dcursor);

END;
/

print dcursor 
```

更新 2

要从 SQL Developer 执行过程，请执行以下操作

```
var usercur refcursor
exec procedure_sample('AU',:usercur)
print usercur 
```

# python - 找不到记录器“pika.adapters.blocking_connection”的处理程序

> ID：13517955
> 
> 赞同：15
> 
> 时间：2012-11-22T17:58:51.553
> 
> 标签：python, amqp, pika

类似的问题似乎都基于使用自定义记录器，我很高兴只使用默认/无。我的 pika python 应用程序运行并接收消息，但几秒钟后崩溃`No handlers could be found for logger "pika.adapters.blocking_connection"`，有什么想法吗？

```
import pika

credentials = pika.PlainCredentials('xxx_apphb.com', 'xxx')
parameters = pika.ConnectionParameters('bunny.cloudamqp.com', 5672, 'xxx_apphb.com', credentials)

connection = pika.BlockingConnection(parameters)
channel = connection.channel()

channel.queue_declare('messages')

def message_received(channel, method, properties, body):
    print "[x] Received %r" % (body)

channel.basic_consume(message_received, queue='messages', no_ack=True)

channel.start_consuming() 
```

通过添加修复：

```
import logging
logging.basicConfig() 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-22T18:24:19.010

通过添加修复：

```
import logging
logging.basicConfig() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:10:54.213

应该有交换名称提供，它不应该保留默认值。

```
channel.exchange_declare(exchange='anyname') 
```

# php - 使用php从s3强制下载文件

> ID：13517956
> 
> 赞同：1
> 
> 时间：2012-11-22T17:59:01.303
> 
> 标签：php, amazon-s3, download

我想将文件直接从 s3 下载到用户机器。所以我用谷歌搜索并想出了这样的东西。但这不起作用。

```
$objInfo = $s3->getObjectInfo('bucket', 'filename.mp3');
$obj = $s3->getObject('bucket', 'filename.mp3');

header('Content-type: ' . $objInfo['type']);
echo $obj->body; 
```

如何强制下载不基于来自 s3 的 URL 的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:21:38.270

尝试添加

```
Content-Disposition: attachment 
```

到标题，您还可以选择指定正在下载的文件的文件名

```
Content-Disposition: attachment; filename=somefile.ext 
```

# php - API 未执行？困惑

> ID：13517970
> 
> 赞同：0
> 
> 时间：2012-11-22T18:00:18.090
> 
> 标签：php, api

我正在尝试使用 Lymbix 教程对一段短信进行情绪分析。

根据研究，我可以使用 curl，当我想执行 curl 时，使用 curl_exec();

但是，我使用了一个教程并拥有这段代码：

```
 function sentimentToken($programming)
{
    $ch = curl_init();
    $data = array('article' => $programming);
    $headers = array ('AUTHENTICATION'=>'MY_API_KEY','ACCEPT'=>'application/json','VERSION'=>'2.1');
    curl_setopt($ch, CURLOPT_URL, "http://gyrus.lymbix.com/tonalize");
    curl_setopt($ch, CURLOPT_HTTPHEADERS,$headers); 
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    $result = curl_exec($ch);
    curl_close($ch);

    var_dump($result);
} 
```

但`var_dump($result)`不返回任何东西。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:04:23.890

根据[文档](http://php.net/manual/en/function.curl-exec.php)：

> `curl_exec`成功时返回 TRUE，失败时返回 FALSE。但是，如果设置了 CURLOPT_RETURNTRANSFER 选项，它将在成功时返回结果，在失败时返回 FALSE。

鉴于您的实际选择，您不会因此获得任何数据，而是成功或失败的指示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:53:26.487

来自 Lymbix 的 Josh - 我们提供了几个客户端库，以使其更容易：

[http://lymbix.com/client-libraries?client_library=ruby&__lsa=c4bbd4e8](http://lymbix.com/client-libraries?client_library=ruby&__lsa=c4bbd4e8)获取我们的客户端库列表

或者

直接来自我们的 github 页面：

[https://github.com/lymbix/](https://github.com/lymbix/)

如果您需要任何帮助，请告诉我！

# ruby-on-rails - 如何使用 ransack 将更多字段包含在 where 条件中？

> ID：13517971
> 
> 赞同：0
> 
> 时间：2012-11-22T18:00:35.037
> 
> 标签：ruby-on-rails, ruby, meta-search, ransack

我正在使用 ransack 谓词构建查询，这意味着我需要大量条件来用于 SQL 方式的 WHERE 子句。这是我作为ransanck`search`方法的条件哈希：

这是控制台输出`params[:q]`

```
{"price_gteq"=>"0", "rooms_gteq"=>"1", "baths_gteq"=>"1", "has_photos_true"=>"0", "zone_id"=>"1", "deal_type_eq"=>"1", "s"=>{"0"=>{"name"=>"price", "dir"=>"asc"}}, "price_lteq"=>"2500000", "rooms_lteq"=>"2", "baths_lteq"=>"7", "sector_id_in"=>nil} 
```

这是它生成的 SQL 查询：

```
Property.search(params[:q]).result.to_sql 
```

这使：

```
SELECT "properties".* FROM "properties" LEFT OUTER JOIN "sectors" ON "sectors"."id" = "properties"."sector_id" WHERE (("properties"."price" >= 0.0 AND "properties"."price" <= 2500000.0)) ORDER BY "properties"."price" ASC 
```

如何在`where`子句中包含所有字段？

如您所见，只有`:price`字段保留在`where`子句中。我也需要`:baths`并且`:rooms`也被包括在该`where`条款中。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:28:16.823

幸运的是，我已经解决了自己的问题，发生的事情是我使用 UNRANSACKABLE_ATTRS 数组为我的模型从**排序**中排除上述字段（Ransack 提供的默认排序方法），但我不知道这会影响**搜索**好。无论如何，我删除了 UNRANSACKABLE_ATTRS 数组，搜索中的每个条件都开始按预期工作。:)

# hibernate - 为什么 JPA/Hibernate 在 windows 和 linux 上的行为不同？

> ID：13517972
> 
> 赞同：0
> 
> 时间：2012-11-22T18:00:38.853
> 
> 标签：hibernate, jpa

我在 windows 机器上开发了一个项目，我将 Hibernate 的 hibernate.hbm2ddl.auto 属性设置为更新。我的实体名称是 Kullanici，所以 Hibernate 在 Windows 机器上创建了 kullanici 表。

我在 Centos 上运行的 Tomcat 服务器上构建了项目并部署了 war。当我运行该项目时，它给出了错误。Hibernate 投诉没有名为 Kullanici 的表。因为 db 上存在 kullanici 表。

这有什么原因吗？

数据库是 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:11:01.003

我推测该表也是在 Windows 上以小写形式创建的`kullanici`，您可以使用大写形式访问它`Kullanici`。Windows 处理名称不区分大小写，这就是 Windows 上不会发生错误的原因。

在 Centos、OTOH 上，名称是区分大小写的——因此是错误的。

# oracle - Oracle ADF 中的模拟方法

> ID：13517974
> 
> 赞同：0
> 
> 时间：2012-11-22T18:00:56.597
> 
> 标签：oracle, mockito, powermock

我是 Mockito 的新手。我想模拟这段用 Oracle ADF 编写的代码。

```
else {
     FacesContext.getCurrentInstance().addMessage(null,                                                         new FacesMessage(FacesMessage.SEVERITY_INFO,
             "No Cases found in Queue",null));
        } 
```

这是我的模拟：

```
 FacesMessage facesMessageMock = mock(FacesMessage.class);
    PowerMockito.mockStatic(FacesContext.class);
    PowerMockito.when(FacesContext.getCurrentInstance()).thenReturn(facesContextMock); 
```

但我有这个错误：

```
org.mockito.exceptions.misusing.MissingMethodInvocationException:
when() requires an argument which has to be 'a method call on a mock'. 
```

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:42:47.187

您需要在测试类上有以下注释：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(FacesContext.class)
public class YourTest {
...
} 
```

有关详细信息和示例，请参阅[此页面](http://goo.gl/aJxry)。

# c# - 为什么这等待让我永远等待？

> ID：13517978
> 
> 赞同：3
> 
> 时间：2012-11-22T18:01:15.587
> 
> 标签：c#, windows-8, async-await, windows-store-apps, peoplepicker

[我](https://stackoverflow.com/questions/13446399/why-does-the-people-app-show-no-contacts-doesnt-allow-me-to-pick-contacts)现在对显示的人员/联系人没有问题- 连续几次现在它们都显示了 - 但是检索联系人对象的调用永远不会返回 - 断点在这一行：

```
var contact = await contactPicker.PickSingleContactAsync(); 
```

...我从来没有到达那里 - 虽然我可以选择一个联系人，然后选择“选择”按钮。控制永远不会从模拟器切换到断点。

为了充分披露，这里是整个方法：

```
private async Task<System.Collections.Generic.KeyValuePair<string, string>> SelectAContactForASlot()
{
    KeyValuePair<string, string> kvp;
    var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
    contactPicker.CommitButtonText = "Select";
    var contact = await contactPicker.PickSingleContactAsync();
    if (contact != null)
    {
        kvp = new KeyValuePair<string, string>(contact.Name, contact.Emails[0].Value);
        if (null != kvp.Value) // If there is no email, there's no use in passing it back, as the person cannot be contacted
        {
            return kvp;
        }
        else
        {
            return kvp = new KeyValuePair<string, string>(contact.Name, "No email found");
        }
    }
    return kvp = new KeyValuePair<string, string>("No Name found", "No email found");
} 
```

那么为什么对 PickSingleContactAsync() 的调用永远不会返回呢？

## 更新

某个功能的所有按钮共享一个 OnClick 处理程序（我应该进入 21.08 世纪并使用 OnTapped 处理程序）；这个处理程序像这样调用异步方法：

```
Task<System.Collections.Generic.KeyValuePair<string, string>> kvpContactNameEmail = SelectAContactForASlot(); 
```

## 更新 2

好吧，现在我真的被迷住了：

这段代码，在按钮 Onclick 中：

```
private void PersonButton_OnClick(object sender, RoutedEventArgs args)
{
    Task<System.Collections.Generic.KeyValuePair<string, string>> kvpContactNameEmail = SelectAContactForASlot();
    Button btn = null;
    if (args.OriginalSource is Button)
    {
        btn = args.OriginalSource as Button;
    }
    if (null == btn)
    {
        return;
    }
    //btn1_1 to btn3_4
    if (btn.Name == "btn1_1")
    {
        ApplicationData.Current.LocalSettings.Values["PersonSection1Slot1"] = kvpContactNameEmail.Result.Key;
        btn1_1.Foreground = new SolidColorBrush(Windows.UI.Colors.Gray);
    . . . 
```

...*确实*通过了对 SelectAContactForASlot() 的调用——单步执行第一行会立即返回——但它会在人员/联系人选择器显示之前返回。因此，KVP 中没有键或值，因为它返回的 SelectAContactForASlot() 应该返回：

```
 private async Task<System.Collections.Generic.KeyValuePair<string, string>> SelectAContactForASlot()
    {
            KeyValuePair<string, string> kvp;
            var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
            contactPicker.CommitButtonText = "Select";
            var contact = await contactPicker.PickSingleContactAsync();
            if (contact == null)
            {
                kvp = new KeyValuePair<string, string>("No Name found", "No email found");
            }
            else // contact != null
            {
                if (string.IsNullOrWhiteSpace(contact.Emails[0].Value))
                {
                    kvp = new KeyValuePair<string, string>(contact.Name, "No email found");
                }
                else
                {
                    kvp = new KeyValuePair<string, string>(contact.Name, contact.Emails[0].Value);
                }
            }
            return kvp;
} 
```

...由于某种原因，人员/联系人选择器在到达此行时显示（假设我单击了 btn1_1）：

ApplicationData.Current.LocalSettings.Values["PersonSection1Slot1"] = kvpContactNameEmail.Result.Key;

...但是，实际上没有返回任何内容，因为它停止在线：

var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();

所以 SelectAContactForASlot() 被调用的时间比我想象的/应该的要晚，但是一旦它被调用，它就无法继续。

## 更新 3

```
 private void PersonButton_OnClick(object sender, RoutedEventArgs args)
    {
        Task<System.Collections.Generic.KeyValuePair<string, string>> kvpContactNameEmail = SelectAContactForASlot();
    . . .

    private async Task<KeyValuePair<string, string>> SelectAContactForASlot()
    {
        KeyValuePair<string, string> kvp;
        var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
        contactPicker.CommitButtonText = "Select";
        var contact = await contactPicker.PickSingleContactAsync();
        if (contact == null)
        {
            kvp = new KeyValuePair<string, string>("No Name found", "No email found");
        }
        else // contact != null
        {
            if (string.IsNullOrWhiteSpace(contact.Emails[0].Value))
            {
                kvp = new KeyValuePair<string, string>(contact.Name, "No email found");
            }
            else
            {
                kvp = new KeyValuePair<string, string>(contact.Name, contact.Emails[0].Value);
            }
        }
        return kvp;
    } 
```

## 更新 4

...如果我将 buttonClick 代码更改为：

```
private async void PersonButton_OnClick(object sender, RoutedEventArgs args)
{
    Task<System.Collections.Generic.KeyValuePair<string, string>> kvpContactNameEmail = await SelectAContactForASlot();
    . . . 
```

（在这里添加了“async”和“await”），我得到，“*不能将类型'System.Collections.Generic.KeyValuePair'隐式转换为'System.Threading.Tasks.Task>'* ”

我想我的问题确实是我不希望调用 SelectAContactForASlot() 直到它检索到联系人对象（调用联系人应用程序并且用户选择联系人）；IOW，我希望它是异步的。但我认为没有 PickSingleContactAsync() 的异步版本 - IOW，没有“PickSingleContact”。

所以我真正想知道的是：我怎样才能调用联系人应用程序并允许用户选择一个联系人（已经这样做了）并从该对象中取回我可以在我的代码中访问的值？显然，我对这一切都是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:15:03.020

我猜在您的调用层次结构中的某个时刻，您正在阻塞`Task`返回`SelectAContactForASlot`的方法或调用它的方法。

这将导致死锁，因为完成`SelectAContactForASlot`时必须在 UI 上下文上恢复`await`，并且 UI 线程被阻塞等待`SelectAContactForASlot`完成。

为避免这种死锁，您应该`await`使用`Task`s 而不是使用`Wait`or `Result`，如下所示：

```
private async void PersonButton_OnClick(object sender, RoutedEventArgs args)
{
  KeyValuePair<string, string> kvpContactNameEmail = await SelectAContactForASlot();
  ...
} 
```

[我在我的博客上](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)详细解释了这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:35:55.300

在您的更新 2 代码中更改此行：

```
Task<System.Collections.Generic.KeyValuePair<string, string>> kvpContactNameEmail = SelectAContactForASlot(); 
```

为了这：

```
Task<System.Collections.Generic.KeyValuePair<string, string>> kvpContactNameEmail = SelectAContactForASlot().AsTask();
KeyValuePair<string, string> tempKeyValuePair = FileTask.Result; 
```

解释：您正在做的是将异步世界与同步世界绑定，原始调用只会获取任务但不会对其执行任何操作，而不是等待它完成（这就是您的调用立即返回的原因）。

# java - 我如何在java中处理Jcombobox的按键事件

> ID：13517980
> 
> 赞同：0
> 
> 时间：2012-11-22T18:01:23.020
> 
> 标签：java, swing, jcombobox

我想将项目添加到 JCombobox ，该项目是我在 JCombobox 中输入的要添加的项目。这个 jCombox 框是可编辑的。

我怎样才能做到这一点。

好的，我尝试为此 JCombo 框添加 KeyPress 事件，但它没有响应

```
 private void jbcBOXKeyTyped(java.awt.event.KeyEvent evt) {

        if (evt.getKeyCode() == 13) {
            System.out.println("Keypress");
            jbcBOX.addItem(jbcBOX.getSelectedItem().toString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:32:01.927

做了一个简短的例子希望它有所帮助。

基本上，只要选择或添加一个项目，`ActionListener`就会调用它。在我们简单地检查是否有一个项目与当前选定的项目匹配，如果没有，则将项目添加到如果找到匹配则什么都不做：`JComboBox``ActionListener``ActionListener``JComboBox`

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class EditableJComboBox {

    public EditableJComboBox() {
        initComponents();
    }

    private void initComponents() {
        JFrame frame = new JFrame("Editable JComboBox");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        String labels[] = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J"};
        final JComboBox comboBox = new JComboBox(labels);
        comboBox.setEditable(true);

        comboBox.addActionListener(new ActionListener() {
            private boolean found = false;

            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                String s = (String) comboBox.getSelectedItem();
                for (int i = 0; i < comboBox.getItemCount(); i++) {
                    if (comboBox.getItemAt(i).toString().equals(s)) {
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    System.out.println("Added: " + s);
                    comboBox.addItem(s);
                }
                found = false;
            }
        });

        frame.add(comboBox);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new EditableJComboBox();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:19:10.017

这在[Combobox 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#editable)中进行了解释。不需要脏`KeyListener`s 并检查 enter 键。

1.  您使组合框可编辑
2.  您添加一个`ActionListener`将在按下回车键时触发的
3.  在你的`ActionListener`你可以更新模型

或者更直接地引用该教程

```
JComboBox patternList = new JComboBox(patternExamples);
patternList.setEditable(true);
patternList.addActionListener(this); 
```

> 当用户从菜单中选择一个项目并且用户输入 Enter 时，一个可编辑的组合框会触发一个动作事件。请注意，当用户在组合框中输入值时，菜单保持不变。如果您愿意，您可以轻松编写一个动作侦听器，每次用户键入一个唯一值时，它都会向组合框的菜单中添加一个新项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-07T17:23:15.583

它甚至比这更糟糕 - 似乎（来自使用 Netbeans）keyTyped 等事件根本不会触发。我想很多人都想知道为什么他们可以在 JTextField 上捕获[java.awt.event.KeyEvent.getKeyChar()](https://docs.oracle.com/javase/8/docs/api/java/awt/event/KeyEvent.html#getKeyChar--)但使用 GUI Builder 的对应部分（在 Netbeans 中）为 JComboBox 完全没有得到他们！

> **[处理组合框上的事件](https://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#listeners)**
> 
> ...
> 
> 尽管 JComboBox 继承了为低级事件（例如焦点、键和鼠标事件）注册侦听器的方法，**但我们建议您不要在组合框上侦听低级事件**。原因如下：组合框是一个复合组件——它由两个或多个其他组件组成。组合框本身会触发高级事件，例如动作事件。它的子组件触发低级事件，例如鼠标、键和焦点事件。低级事件和触发它们的子组件依赖于外观。为避免编写依赖外观的代码，您应该只侦听复合组件（如组合框）上的高级事件。有关事件的信息，包括关于高级和低级事件的讨论，请参阅[编写事件侦听器](https://docs.oracle.com/javase/tutorial/uiswing/events/index.html).

# ruby-on-rails - 简单的 Rails 形式：未定义的方法 `categories_path'

> ID：13517982
> 
> 赞同：0
> 
> 时间：2012-11-22T18:01:27.153
> 
> 标签：ruby-on-rails, forms

作为第一次使用 Rails 的用户，我不得不说我喜欢 Rails 的做事方式。但是，我在尝试创建一个简单的表单时遇到了问题。我收到以下错误：

```
undefined method `categories_path' for #<#<Class:0x007f0440365880>:0x007f0430256cd8> 
```

我尝试在控制器中创建一个`categories_path`方法（尽管我不确定它的用途），但这并没有解决错误。那里有任何铁路专家知道发生了什么吗？

以下是相关代码：

**意见/类别/new.html.erb**

```
<%= form_for @category do |f| %>
  <%= f.label :category %>
  <%= f.text_field :name %><br />
  <%= f.submit %>
<% end %> 
```

**路线.rb**

```
Jackeyes::Application.routes.draw do
  scope "/admin" do
    resources :product, :category
  end
end 
```

**category_controller.rb**

```
class CategoryController < ApplicationController

  def index
    @category = Category.all
  end

  def new
    @category = Category.new
  end

  def create
    @category = Category.new(params[:category])
    @category.save
  end

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T18:09:57.657

使您的资源复数：

```
resources :products, :categories 
```

然后再试一次。

# sql - 在 SQL 中归档数据

> ID：13517984
> 
> 赞同：2
> 
> 时间：2012-11-22T18:01:39.947
> 
> 标签：sql, database, database-design

需要一些关于如何最好地解决这个问题的建议。基本上，我们的数据库中有一些表以及这些表的存档版本，用于删除数据（例如 Booking 和 Booking_archive）。这两个表中的表结构完全相同，只是存档表中有两个额外的列：DateDeleted 和 DeletedBy。

我已经删除了这些存档表，只是将 DateDeleted 和 DeletedBy 列添加到实际表中。我的计划是对这个表进行分区，这样我就可以将归档信息与非归档信息分开。

这是最好的方法吗？我只是不喜欢使用两个表来区分存档数据和非存档数据的想法。

这样做的任何其他建议/指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:04:26.073

归档的目的是提高性能，所以我会说将数据分离到另一个表中肯定会更好。事实上，我什至会在单独的服务器上创建一个存档数据库，并将存档数据保存在那里。这将产生最大的性能提升。亚军架构是在同一台服务器上的第二个“存档”数据库，具有完全重复的表。

即使使用分区，您仍然会遇到表锁定问题和硬件限制，从而减慢您的速度。单独的表或数据库将消除前者，单独的服务器或每个分区一个驱动器可以解决后者。

至于存储存档日期，我认为我不会在生产数据库上这样做。不妨在存档数据库表上设置您的时间戳，因此当您插入记录时，它会在存档时自动标记日期时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:35:49.100

解决方法取决于：

1.  具有此类存档表的表数
2.  数据进入归档表的到达率是多少？
3.  您想投资独立服务器的软件/硬件吗

基于上述 - 各种选项可能是：

1.  同一数据库，同一服务器上的不同架构
2.  在同一台服务器上存档数据库
3.  在不同的服务器上存档数据库

如果它是归档数据并且没有机会回到主表中，请不要进行分区。您还可以在归档数据（保留期或到期日期）上添加生命周期管理列，以便也可以有效地管理归档数据生命周期。

# java - 更新文本视图导致 android 应用程序崩溃

> ID：13517986
> 
> 赞同：1
> 
> 时间：2012-11-22T18:01:57.830
> 
> 标签：java, android, opengl-es, textview

我正在编写一个 android 游戏，其中精灵从屏幕上下来，用户点击它们以删除它们。当精灵到达屏幕底部时，玩家的生命减少并且精灵被移除，但显示玩家生命​​的文本视图不会更新。

我在用于杀死精灵的 on touch 监听器中放置了一个“更新”调用，这会更新一切正常（当精灵被杀死时，玩家得分会增加）。但是我不知道当精灵到达屏幕底部时如何更新生命。每次我尝试在删除精灵时更新它时，应用程序都会崩溃。我正在使用 (TextView).setText() 来更新显示分数的文本视图

该应用程序使用 openGL 来渲染精灵。

删除精灵时如何使其更新？

这是设置屏幕的类，它也有触摸监听器。

```
package com.JACSoft.game;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.Window;
import android.view.WindowManager;
import android.widget.LinearLayout;
import android.widget.TextView;

public class GamePlay extends Activity 
{
    public static GameGLSurfaceView mGLView;
    public static int PlayerScore = 0;
    public static int PlayerLives = 9;
    public static int counter = 0;
    static TextView PStatsView;         // creates text view to display stats
    static LinearLayout Stats;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Stats = new LinearLayout(this);             //creates an editable layout
    Stats.setOrientation(1);                                // makes it horizontal
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    mGLView = new GameGLSurfaceView(this);
    PStatsView = new TextView(this);
    PStatsView.setTextSize(20.0f);
    PStatsView.setText("Score : " + PlayerScore + "             " + "Lives : " + PlayerLives);          // puts the string version of score in the text view 
    Stats.addView(PStatsView);                              // adds views to layout
    Stats.addView(mGLView);                                 // adds views to layout
    setContentView(Stats);                                  // sets layout as the view
}

public boolean onTouchEvent(MotionEvent event) 
{
    switch(event.getAction())
    {
        case MotionEvent.ACTION_DOWN :
            GameGLRenderer.sprites.deleteSprite(event.getX(),event.getY(), 0);
            PStatsView.setText("Score : " + PlayerScore + "             " + "Lives : " + PlayerLives);          
            break;
    }
    return true;
} 
```

}

这是说我无法从其他线程访问文本视图的位，但我尝试从主线程中的精灵删除线程调用一个函数，然后调用 setText 函数

```
11-22 19:06:03.105: E/AndroidRuntime(27971): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

这是该行之后的内容

```
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4865)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:979)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:4306)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.view.View.invalidate(View.java:10519)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.view.View.invalidate(View.java:10474)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.widget.TextView.checkForRelayout(TextView.java:6598)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.widget.TextView.setText(TextView.java:3705)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.widget.TextView.setText(TextView.java:3563)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.widget.TextView.setText(TextView.java:3538)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at com.JACSoft.game.GameSprites.deleteSprite(GameSprites.java:120)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at com.JACSoft.game.GameSprite.BottomReached(GameSprite.java:61)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at com.JACSoft.game.GameSprite.moveBallDown(GameSprite.java:51)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at com.JACSoft.game.GameSprite.gravitate(GameSprite.java:25)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at com.JACSoft.game.GameSprites.draw(GameSprites.java:60)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at com.JACSoft.game.GameGLRenderer.onDrawFrame(GameGLRenderer.java:68)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1516)
11-22 19:06:03.105: E/AndroidRuntime(27971):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:16:18.953

您需要在每个游戏循环中迭代精灵并检查是否有任何精灵到达屏幕底部，然后将其删除并更新玩家统计信息。

许多游戏框架都有一个单独的线程来绘制和更新游戏对象。您的问题可能是该`setText`方法是从该线程调用的，而不是从 UI 线程调用的。将此方法添加到您的活动类：

```
public void setPStatsText(String text) {
    this.runOnUiThread(new Runnable() {
        public void run() {
            PStatsView.setText(text);
        }
    }
} 
```

并调用它来更改文本。

如果这没有帮助，请从 logcat 发布异常消息。

# python-3.x - Python3 找不到 urllib3

> ID：13517991
> 
> 赞同：1
> 
> 时间：2012-11-22T18:02:23.720
> 
> 标签：python-3.x, urllib3

我在 Ubuntu 系统上安装了 Python 2.7.3 和 Python 3.2.3。

我已经使用 pip 安装了 urllib3 并且可以从 python shell 导入它。当我打开 python3 shell 时，尝试导入 urllib3 时出现找不到模块错误。shell 中的 help('modules') 也没有列出 urllib3。

关于如何让 python3 识别 urllib3 的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:52:03.963

您需要为您拥有的每个 Python 版本`pip`安装它 - 如果为 Python 2.7 安装它，则无法从 3.2 访问它。

好像没有`pip-3.2`脚本，不过你可以试试`easy_install3 urllib3`。

# google-app-engine - 从 RDBMS 到 Google App Engines 高复制数据存储 (HRD)

> ID：13517992
> 
> 赞同：1
> 
> 时间：2012-11-22T18:02:27.837
> 
> 标签：google-app-engine, database-design, python-2.7

我有以下关系模式（比如 MySQL，它真的在我的脑海中）：

```
Login, Customer, Friendship, Address, Child, School 
```

这样

```
Login(username, password)
Customer(id, firstName, lastName)
Friendship(customer_id, customer_id) //many to many
Address(customer_id, street, city, state, zip)
Child(id, firstName, lastName, customer_id, school_id)//each customer may have many children
School(id, name, city, state, zip)// there are many children per school 
```

我想将架构重写为 Google App Engine 高复制数据存储 (HRD) 架构：有人知道该怎么做吗？

据我所知，这是：

```
class Login(db.Model):
 username = db.StringProperty()
 password = db.StringProperty()

class Customer(db.Model):
 first_name = db.StringProperty()
 last_name = db.StringProperty()

class Address(db.Model):
 # what goes here?

class Friendship(db.Model):
 # what goes here?

class Child(db.Model):
 # what goes here?

class School(db.Model):
 # what goes here? 
```

我正在使用python 2.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:13:11.600

首先，我建议使用`ndb`而不是`db`. 查看[文档](https://developers.google.com/appengine/docs/python/ndb/)以获取更多信息。

您似乎掌握了一些标准字符串属性，这主要是您所需要的。

对于引用其他模型的模型，您可以使用`KeyProperty`例如

```
from google.appengine.ext import ndb

class Friendship(ndb.Model):
  first_friend = ndb.KeyProperty(kind=Friend)
  second_friend = ndb.KeyProperty(kind=Friend) 
```

# xaml - 在 GridView (Windows 8) 中检测滚动事件

> ID：13517993
> 
> 赞同：3
> 
> 时间：2012-11-22T18:02:29.747
> 
> 标签：xaml, windows-8, scroll, microsoft-metro

我们如何在默认的 GridView 模板示例应用程序上检测 GridView 中的滚动事件（如 ScrollViewer 上的 ViewChanged）？我想复制 netflix App 在左侧红条上的效果。

我尝试将 GridView 放在滚动查看器中，但我未能成功拉伸它以填充不同分辨率的屏幕。

更新：我打算将它与 NuGet 上的 VariableGrid 控件一起使用 - 虽然它不是官方控件，但它继承了 GridView

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:35:00.233

执行此操作的最佳方法似乎是您可以通读控件的组件，并将事件分配给它。基于此示例中发生的情况

[http://mikaelkoskinen.net/post/WinRT-XAML-Automatically-Scrolling-ListView-to-Bottom-and-Detecting-When-ListView-is-Scrolled.aspx](http://mikaelkoskinen.net/post/WinRT-XAML-Automatically-Scrolling-ListView-to-Bottom-and-Detecting-When-ListView-is-Scrolled.aspx)

我抓住了滚动条的访问权限，起诉了 VisualTreeExtensions，我可以捕获事件 Scroll，就像在示例中一样。当网格的 Loaded 事件被触发时，我必须阅读孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T04:56:05.303

有一个更简单的方法。

编辑 GridView 的模板，并在 XAML 中查找作为`ScrollViewer`GridView 的组件的一个。

`ScrollViewer`有一个`ViewChanged`您可以订阅的事件。现在，每当滚动 GridView 时，都会触发此事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:07:11.697

在 GridView 上尝试 ManipulationCompleted 和 PointerReleased 事件。这只是使用键盘鼠标..

# c++ - c++ - 从不同的 cpp 文件写入输出文件

> ID：13517996
> 
> 赞同：0
> 
> 时间：2012-11-22T18:02:42.293
> 
> 标签：c++, file, ofstream

我们有三个不同的 .cpp 文件。当我在 random.cpp 中创建文件时

```
 ofstream outfile ("random.log"); 
```

然后我在 random.cpp 文件中写入文件 random.log：

```
 outfile << " something" ; 
```

然后我去一个不同的.cpp文件，比如StudentCS.cpp，我使用以下方法打开文件：

```
 ofstream outfile;
    outfile.open("random.log",std::ios_base::app); 
```

即使我在 random.cpp 中间调用 StudentCS，它也会在所有 random.cpp 输出之后写入所有 StudentCS 输出。我正在尝试从 random.cpp 写入然后它调用 StudentCS.cpp 应该写一些东西然后回到 random.cpp 再次写入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:06:43.423

打开文件一次，然后传递流对象。或者更好：使记录器对象可用于任何需要记录的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:09:54.077

随机的.cpp

```
void studentCS(ofstream & outfile);
void random() {
   ofstream outfile ("random.log");
   outfile << " something" ;
   outfile.close();
   studentCS(outfile);
   outfile.open("random.log",std::ios_base::app);
   outfile << " something write after call to studenCS";
} 
```

学生CS.cpp

```
void studentCS(ofstream & outfile) {
   ofstream outfile("random.log",std::ios_base::app);
   outfile << " something else ";
} 
```

但请记住，您应该尽量避免打开/关闭操作，这对 CPU 来说很重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:07:03.043

我看到您使用的名称是“random.log”。

这是否意味着您正在编写日志文件？如果是这样，您可以考虑使用为简化此过程而开发的许多日志记录类之一（请参阅[1](http://www.drdobbs.com/cpp/logging-in-c/201804215)、[2](http://log4cpp.sourceforge.net/)、[3](http://tomicki.net/clog.php)、[4](http://ahm507.blogspot.de/2006/12/simplest-logging-class-in-c.html)、[5](http://accu.org/index.php/journals/1304)）。

另一个想法...

您正在项目的不同部分打开和关闭文件。其他答案建议传递文件指针。但是如果你真的需要从任何地方写入这个文件并采取适当的预防措施，你可以考虑在这里使用一个全局变量。

# wpf - 多选组合框，强制它始终显示相同的文本

> ID：13517999
> 
> 赞同：2
> 
> 时间：2012-11-22T18:03:04.413
> 
> 标签：wpf

我有一个工作正常的多选组合框。除了文字。无论用户选择了什么，我都希望它始终具有相同的文本（“商品过滤器”）。

如果我将 iseditable 设置为 true 并将文本设置为 CommodityFilter ，在用户进行选择之前它看起来很好，那么它就是垃圾（显示对象类型名称）。我怎样才能在那里硬编码一些文本？（实际上，理想情况下我会对其进行数据绑定，以便它可以根据是否选择任何内容而改变，但此时这将是一个奖励）

```
 <ComboBox IsEditable="True" Text ="Commodity Filter" ItemsSource="{Binding Path=ActiveCommodities}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox IsChecked="{Binding IsSelected}"
                                      Width="20" />
                            <TextBlock Text="{Binding Commodity}"
                                       Width="100" />
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:21:56.947

我最终创建了一个用于填充 ComboBox 的自定义对象（它具有`IsSelected`属性并已实现`INotifyPropertyChanged`），因为我正在创建几个组合框来控制过滤。一旦我这样做了，就可以轻松地覆盖 customobject 上的 tostring 并传入适当的文本。所以xaml没有太大变化。

我本来希望覆盖一个文本框，但这似乎超出了我在合理时间内获得精美外观的能力。

```
 <ComboBox  ItemsSource="{Binding Path=ActiveFuturesMonths}"
               IsEditable="True"
               IsReadOnly="True"
               Text="Futures Month Filter" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <CheckBox IsChecked="{Binding IsSelected}"
                              Width="20" />
                    <TextBlock Text="{Binding Text}"
                               Width="100" />
                </StackPanel>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T12:30:36.763

实际上关键在于设置 - IsEditable="True" IsReadOnly="True" Text="Futures Month Filter"

而不是创建自定义对象。非常感谢它有帮助。