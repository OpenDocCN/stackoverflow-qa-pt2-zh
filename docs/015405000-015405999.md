# StackOverflow 问答 15405000-15405999

# php - 将多个图像保存在一个数组中

> ID：15405003
> 
> 赞同：0
> 
> 时间：2013-03-14T09:04:37.597
> 
> 标签：php, forms

我想将多个图像保存在一个数组中，但是因为图像是一个数组，所以我的方法不起作用。

这是我的方法：

```
for($i=2;$i<=$image_row;$i++){
    $image = 'image'.$i;
    $allImages[] = array(   
        'image' => $mysqli->real_escape_string($_SESSION[$image]));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:15:22.087

那么为什么要在数组中定义图像呢？

为什么不简单：

```
for($i=2;$i<=$image_row;$i++){
    $image = 'image'.$i;
    $allImages[] = $mysqli->real_escape_string($_SESSION[$image]);
} 
```

# python - 未经验证时，Django 使用数据呈现表单

> ID：15405007
> 
> 赞同：0
> 
> 时间：2013-03-14T09:04:49.880
> 
> 标签：python, django, django-forms

我在 Django 文档的帮助下编写了这个联系表：

```
def contact(request):
    if request.method == 'POST':
        form = ContactForm(request.POST)
        if form.is_valid():
            name = form.cleaned_data['name']
            subject = form.cleaned_data['subject']
            message = form.cleaned_data['message']
            sender = form.cleaned_data['sender']
            cc_myself = form.cleaned_data['cc_myself']

            recipients = ['name@e-mail.com']
            if cc_myself:
                recipients.append(sender)

            m = '%s\n\n-----------------\n%s' % (message, name)
            from django.core.mail import send_mail
            send_mail(subject, m, sender, recipients)
            return HttpResponseRedirect('/kontakt/tack/')
    else:
        form = ContactForm()

    return render(request, 'contact/index.html', {
        'form': form,
    }) 
```

问题是如果表单没有验证它会返回一个空表单。对于写了长消息但忘记输入自己的名字或其他东西的人来说，这可能是一个很大的烦恼。

我已通过将以下代码更改为 last`else:`来解决此问题：

```
 try:
        form = ContactForm(form.cleaned_data)
    except UnboundLocalError:
        form = ContactForm() 
```

当尚不存在页面时，我需要`try`声明页面的第一次渲染。`form.cleaned_data`这行得通，但它似乎是一个相当丑陋的黑客。

在没有我丑陋的 try-except 解决方案的情况下重新呈现表单时，是否有一些标准方法可以使用先前填写的文本？

### 应要求提供模板

```
{% block content %}
      <div id="contact-generic-container">
        <p>Lorem ipsum (not really, but ain't relevant).</p>
      </div> <!-- #contact-generic-container -->
      <div id="contact-form" class="clearfix">
    <br/>
    <h2>Kontakta oss!</h2>
    <form action="/kontakt/" method="post">
      {{ form.non_field_errors }}
      <fieldset class="text">
        {% csrf_token %}
            <div class="field-wrapper">
          <label for="id_name">Namn:</label>
        {{ form.name }}
                {{ form.name.errors }}
        </div>
            <div class="field-wrapper">
          <label for="id_sender">E-post:</label> 
        {{ form.sender }}
                {{ form.sender.errors }}
        </div>
            <div class="field-wrapper">
          <label for="id_subject">Ämne:</label> 
        {{ form.subject }}
                {{ form.subject.errors }}
        </div>
      </fieldset>
      <fieldset class="text">
          <div class="field-wrapper">
        <label for="id_message">Meddelande:</label><br/>
        {{ form.message }}
            {{ form.message.errors }}
      </div>
          <div class="field-wrapper">
        <label for="id_cc_myself">Kopia till mig själv:</label> 
        {{ form.cc_myself }}
            {{ form.cc_myself.errors }}
      </div>
      <input type="submit" value="Skicka" />
      <fieldset class="text">
    </form>
      </div>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:26:48.653

这是一种简单的方法，可以始终使用 POST 数据初始化表单，或者什么都不做：

```
def contact(request):
    form = ContactForm(request.POST or None)
    if request.POST and form.is_valid(): 
```

然后删除你的 else 块。

该表单将始终包含数据，并且如果它只是一个 GET 则不会引发错误。

由于我使用了一些 Python 技巧，请允许我解释一下。

1.  Python 支持表达式中的和/或运算符。
2.  当`or`第一个值返回一个真实值时，评估 python 将停止。
3.  在评估 时`and`，如果第一个条件返回 false，Python 将停止。

因此，当我们初始化表单时，我们要求 Python 分配 request.POST 的值（如果它为真），或者`None`，如果 request.POST 为假（如果它为空，则为假）。当有 POST 时，这会使用 request.POST 中的值正确初始化表单，否则为 None 。

在我们的 if 语句中，如果 request.POST 为假（如果 request.POST 为空，则为假），Python 会停在那里并且从不调用`form.is_valid()`，因此如果 POST 不存在，我们不必担心验证运行。

整齐吧？

# database - 用于审计数据的 NoSQL 或 RDBMS

> ID：15405014
> 
> 赞同：7
> 
> 时间：2013-03-14T09:05:19.467
> 
> 标签：database, database-design, nosql, rdbms, bigdata

我知道在该主题中提出了类似的问题，但我仍然没有看到任何人完全包含我的所有请求。

我首先要说我只有 RDBMS 方面的经验，所以如果我对 NoSQL 有任何错误，我很抱歉。

我正在创建一个可以保存大量审计日志（大约 1TB）的数据库。

我将它用于：

1.  快速数据写入（一直在写入大量的审计日志）

2.  搜索 - 搜索审计数据（特定用户在特定时间或特定操作执行的搜索操作......数据库应该支持非常快速地搜索任何“列”）

3.  分析和报告 - 生成数据的每日、每周、每月报告（它们目前是预定义的。如果它们更具动态性，是否会影响我应该选择的解决方案？）

可靠性（支持故障转移或任何类似功能）、可扩展性（如果我从 1TB 增加到 2TB、10TB 或 100TB - 是否有任何解决方案不能支持这种数据量？）当然还有性能（在使用中）我指定的案例）对我来说非常重要。

我知道 RDBMS，这将是我开始的简单方法，但我真的担心一段时间后，数据库根本跟不上步伐。

我的问题是我应该选择 RDBMS 还是 NoSQL 解决方案，为什么？如果是 NoSQL 解决方案，由于它们如此不同，您认为哪一个适合我的需求？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T19:45:30.727

一般来说，这里没有正确或错误的答案。

快速数据写入，任何一种解决方案都可以，尽管您没有说明每秒存储的容量。两种解决方案都有需要注意的地方。

搜索（非常快速）所有列。对于较小的卷，比如几百 Gb，那么任何一种解决方案都可以（假设熟练的人把它放在一起）。你实际上并没有说你搜索的速度/频率，所以如果它是每分钟很多次，这个考虑变得更加重要。快速搜索通常会降低快速写入大量数据的能力，因为搜索所需的索引需要更新。

审核记录通常具有时间部分，因此与搜索所有记录相比，受时间限制的搜索（例如最近 7 天内）将显着加快搜索时间。

报告。当您达到 100Tb 时，您将需要一些真正的技巧或大量预算来获得快速报告。对于静态报告，您可能最终会创建一个程序来一次生成多个报告以节省 I/O。动态报告将是一个棘手的问题。

我的意见？既然您知道 RDBMS，我会从它作为一种方法开始并提供解决方案。这为您赢得了时间来了解您将遇到的真正问题（SO 上的许多人都热衷于过早的优化）。在此初始时间范围内，您可以开始选择 nosql 解决方案并学习它们。我在这里假设您想运行自己的硬件/数据库，如果您想使用云类型的解决方案，那么请立即使用它们。

# javascript - Jquery取消选中用户最后选择的选项

> ID：15405017
> 
> 赞同：1
> 
> 时间：2013-03-14T09:05:36.763
> 
> 标签：javascript, jquery, checkbox

我有一个包含服务和持续时间的多选框。如果用户选择了某些服务，则捕获其持续时间，如果持续时间超过限制，则会生成警报。如何取消选中用户最后检查的值，以便在超过限制时不会重置持续时间。这是我的代码：

```
jQuery('.check-service').click(function () {

    serviceselected = jQuery("input.check-service:checked").length;
    serviceduration = 0;

    jQuery('input.check-service:checked').each(function () {

        serviceduration = parseInt(jQuery(this).val()) + parseInt(serviceduration);
        if (selectvalues == '') {
            selectvalues = jQuery(this).attr('title');
            serviceids = jQuery(this).attr('id');
        } else {
            selectvalues = selectvalues + "," + jQuery(this).attr('title');
            serviceids = serviceids + ", " + jQuery(this).attr('id');
        }

    });

    if (serviceduration >= '600') {
        alert("Selected Service is more than available time slot.");
        jQuery('input.check-service').attr('checked', false);
        console.log();

    } 
```

目前它未选中所有选中的值。我只想取消选中最后一个先前选择的值。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:10:15.917

您不能将最后选择的复选框存储在某个全局变量中。

```
var $lastChecked;

$(".check-service").on("change", function () {
    if ($(this).attr("checked") == "checked") {
        lastChecked = $(this);
    }
    //your logic
    //...
    //now when you have to uncheck:
    $lastChecked.removeAttr("checked");
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:13:52.050

试试下面的代码：

```
jQuery('#CheckboxID').click(function(){     //instead of class use id
    serviceselected = jQuery("input.check-service:checked").length;
    serviceduration = 0;
    jQuery('input.check-service:checked').each(function () {
        serviceduration = parseInt(jQuery(this).val()) + parseInt(serviceduration);
        if(selectvalues == '') {
            selectvalues = jQuery(this).attr('title');
            serviceids = jQuery(this).attr('id');
        } 
        else {
            selectvalues = selectvalues + "," + jQuery(this).attr('title');          
            serviceids = serviceids + ", " + jQuery(this).attr('id');
        }

    });
    if (serviceduration >= '600') {
        alert("Selected Service is more than available time slot.");
        jQuery(this).attr( 'checked', false );
        console.log();
    } 
}); 
```

# css - CKEDITOR 添加样式

> ID：15405022
> 
> 赞同：0
> 
> 时间：2013-03-14T09:05:51.460
> 
> 标签：css, ckeditor

我正在尝试以编程方式为 CKEDITOR 4 设置一些 css。这是因为当一个新用户来到编辑器时，我想用不同的颜色来识别他。

在注册样式数组中，我确实看到了添加的行（CKEDITOR.stylesSet.registered.user0）。但是样式在编辑器中不可见？为什么是这样？我在做什么错？

```
setStyling: function(editor)
{
    var userIds = this.getUserIds(editor);// returns an array with id's
    var colors = editor.config.Colors;    // Colors are set in the config

    for(var i = 0; userIds.length > i; i++)
    {
        if(CKEDITOR.stylesSet.get('user' + i) === null)
        {
            CKEDITOR.stylesSet.add('user' + i, [
                { name: 'userColor', element: 'span[data-uid="' + userIds[i] +'"]', styles: { color: colors[i] }}
            ]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:45:49.480

另一种方法完成了这项工作：

```
 var $head = $("iframe").contents().find("head");
    var $style = $("iframe").contents().find("#uniqueStyle");
    var css = "";

    for(var i = 0; userIds.length > i; i++)
    {
        css += "span[data-uid='" + userIds[i] + "'] { color: " + colors[i] + "; } ";
    }

    if($style)
    {
        $style.remove();
    }

    $('<style id="uniqueStyle" type="text/css"></style>')
        .html(css)
        .appendTo($head); 
```

# xcode - 仅 iPad 方向纵向

> ID：15405023
> 
> 赞同：15
> 
> 时间：2013-03-14T09:06:01.520
> 
> 标签：xcode, ipad, orientation, project-settings

> 我将 Project Summary > iPhone / iPod Deployment Info > Supported Interface Orientations 设置为仅纵向模式。

这适用于所有模拟器、iPad(iOS 5.1) 和 iPhone(iOS 6.1)。

但是在我将 iPad 上的 iOS 从 5.1 升级到 6.1.2 之后

> iPad 上运行的应用程序在应用程序启动时变为横向（左+右）模式。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-14T09:08:25.107

尝试转到 Supporting Files 中的 YourApp-Info.plist 文件，并确保为两者设置了正确的`Supported interface orientations`方向`Supported interface orientations (iPad)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:09:54.360

添加`UISupportedInterfaceOrientation`到您的*info.plist*中，并为您支持的每个方向设置一个设置。

# windows - “跟进：MachineOwner”是什么意思？

> ID：15405026
> 
> 赞同：5
> 
> 时间：2013-03-14T09:06:09.957
> 
> 标签：windows, debugging, windbg, crash-dumps

以下消息是从 WinDBG 的输出窗口复制而来的：

```
Use !analyze -v to get detailed debugging information.

BugCheck 24, {1904fb, 8f9ec9f8, 8f9ec5d0, 87c4fccc}

Probably caused by : Ntfs.sys ( Ntfs!NtfsCommonRead+6f4 )

Followup: MachineOwner 
```

请注意最后一行：**“跟进：MachineOwner”**

这是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T09:29:47.533

后续输出是`!analyze`命令尝试对异常进行分类以识别谁拥有故障，有时它可能是驱动程序、硬件、应用程序等。

triage.ini 文件中有一个默认条目`!analyze`（以及`!owner`命令）在找不到匹配项时使用：

> 默认=机器所有者

该文件位于我的机器上名为*triage的文件夹中*

> C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64\triage

在您的情况下，您可以忽略它，有更多[关于](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558788%28v=vs.85%29.aspx)分析如何工作以及如何为您的特定用例[编辑](http://msdn.microsoft.com/en-us/library/windows/hardware/ff560201%28v=vs.85%29.aspx)*triage.ini*文件的信息。

# asp.net - 在 ASP.net 应用程序中隐式获取 Facebook 响应

> ID：15405032
> 
> 赞同：1
> 
> 时间：2013-03-14T09:06:25.193
> 
> 标签：asp.net, facebook

我在 Asp.net 应用程序的帮助下在 Facebook 上发表评论。

那么，我可以通过我们的 Asp.net 应用程序获得 Facebook 提供的任何功能吗？查看者就像这篇文章一样。（意味着 facebook 是否立即 ping 我们的 asp.net 应用程序）

请建议我作为一种方便的方式。回复将不胜感激。

谢谢。拉胡尔

# jquery - 将相同的菜单类分配给body jquery

> ID：15405035
> 
> 赞同：0
> 
> 时间：2013-03-14T09:06:37.220
> 
> 标签：jquery, onclick, onload

我有个问题。我有一个这样的菜单：

```
<ul id="mainmenu" class="meganizr mzr-slide mzr-responsive">
<li id="menu_435" class="style1 menu_1 active">
<li id="menu_469" class="style5 menu_1 mzr-drop parent">
<li id="menu_475" class="style3 menu_1 mzr-drop parent">
<li id="menu_507" class="style4 menu_1">
<li id="menu_540" class="style5 menu_1 mzr-drop parent">
<li id="menu_559" class="style6 menu_1">
</ul> 
```

我的问题与`class="style6"`. 当菜单处于活动状态时，我希望将类`style6`分配给 body。示例： < `body class="style6"`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:09:12.827

假设您通过单击菜单中的 style6 来决定活动状态，

```
$(document).ready(function(){
    $('li[class^="style6 menu_1 active"]').click(function(){
        $('body').attr('class','style6');
    }); 
}); 
```

# javascript - require.js 仅在存在时才定义依赖项

> ID：15405036
> 
> 赞同：1
> 
> 时间：2013-03-14T09:06:37.713
> 
> 标签：javascript, requirejs, dependency-management, amd

如果依赖项存在，我如何才能定义它？我只想在对象“myObject”已经存在/已创建时才使用它。

```
define(['dependencyOne', 'dependencyTwo', 'myObject'], function(depOne, depTwo, myObj) { ... 
```

还是我误解了什么？

# c# - 图片上传有几种方法。什么时候选择一个而不是其他？

> ID：15405037
> 
> 赞同：1
> 
> 时间：2013-03-14T09:06:39.553
> 
> 标签：c#, asp.net-mvc-3, file-upload, image-upload

目前我正在使用 MVC3 上传图片。当我对示例代码进行一些搜索时，我发现了几种方法。我想出了几乎3种方法。有人可以解释哪一个比另一个更好还是所有的都一样？欢迎对性能或任何事情进行解释。

**方法一：作为参数**

```
public ActionResult UploadImage(HttpPostedFileBase img)
        {

            return View();
        } 
```

**方法 2：从 Request.Files**

```
HttpPostedFileBase imgFile= Request.Files["img"]; 
```

**方法 3：从图像助手**

```
var imgFile= WebImage.GetImageFromRequest(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:08:11.723

第一个是最好的方法。这样做的原因是因为这将使操作更容易进行单元测试，并且它不依赖于魔术字符串。

# unit-testing - 什么是 DynamicProxyGenAssembly2 程序集？

> ID：15405040
> 
> 赞同：21
> 
> 时间：2013-03-14T09:06:42.210
> 
> 标签：unit-testing, moq, obfuscation

我使用 Moq 进行单元测试。要测试内部接口，我必须将 InternalsVisibleTo 属性声明给 DynamicProxyGenAssembly2 程序集。

我们运行我们的混淆测试，这很有用，因为我们可以通过这种方法发现一些混淆问题。由于 DynamicProxyGenAssembly2 程序集，我的组件没有被混淆。

因此我需要知道什么是 DynamicProxyGenAssembly2 程序集？我在磁盘上的任何地方都找不到它。它是编译到 moq.dll 中还是在运行时生成？也许如果我知道这个程序集我可以找到解决我的问题的方法。有人遇到过同样的问题吗？

请不要建议我们需要不加掩饰地运行我们的测试。在这一点上，这是没有选择的。

**编辑**

DynamicProxyGenAssembly2 在运行时生成。为了满足 Dotfuscator 的要求，在 Moq 旁边放了一个空的 dll。此外，我们必须修改 Castle.Core dll 以使用您的公钥。我们遇到的最后一个问题在[这里](https://stackoverflow.com/questions/16669885/raising-obfuscated-events-with-moq-throws-error "使用带有最小起订量的混淆事件")得到了解答。有了这个，我们可以毫无问题地运行我们所有的混淆测试。

问候，Yggdrasil。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-18T22:13:22.563

DynamicProxyGenAssembly2 是一个临时程序集，由使用 CastleProxy（如 Moq 或 NSubsitute）的模拟系统构建。它在需要模拟时生成，并在测试完成后处理掉。

至于 Expose Internals 方法，有一个 RhinoMocks 解决方案可以为您的 Moq 提供最小的更改：

[http://ayende.com/Wiki/Rhino+Mocks+-+Internal+Methods.ashx?AspxAutoDetectCookieSupport=1](https://web.archive.org/web/20180718112728/http://ayende.com/Wiki/Rhino+Mocks+-+Internal+Methods.ashx?AspxAutoDetectCookieSupport=1)

# php - 使用 JQuery 和 PHP 检索和比较日期

> ID：15405041
> 
> 赞同：1
> 
> 时间：2013-03-14T09:06:45.420
> 
> 标签：php, ajax, jquery, jquery-ui-datepicker

我在 wordpress/PHP 中使用 jQuery 的 datepicker，我正在使用这段代码来显示日期：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
    $(function() {
        $("#datepicker").datepicker();
        $("#datepicker").datepicker("option","dateFormat",'yy-mm-dd');
    });
</script>

 Date<input type="text" id="datepicker" size="20" maxlength="15"  style="width: 80px;" readonly="readonly"/> 
```

它成功显示了我的日期。

另外，我在数据库中有一个表（wp_redeem_vouchers），其中保存了特定的凭证兑换日期：

```
 id       wp_deal_id            redeem_date
  1      Amazon6767           2012-03-21
  2      Ebay87nm             2013-06-12
  3      M&Svouc              2013-01-01
  4      ASDA                 2011-09-08 
```

**问题：**

1.  如何检索“redeem_date”并将日期选择器的文本框日期（在选择时）与已保存在数据库中的日期进行比较？

2.  无论如何我可以禁用过去的日期，以便用户无法从日期选择器中选择过去的日期？即 2013 年 3 月 14 日的用户不能从日期选择器中选择 22/02/2013。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:21:38.180

对于你的 i)

```
$('#datepicker').datepicker( {
        minDate: 0,
        onSelect: function(dateText, inst) {

           $.ajax({
                   type: "POST",
                   url: "some.php",
                   data: { date: dateText },
                   onSuccess: function(e){
                    alert("success");
                  }
                });
        }); 
```

然后在`some.php`文件中与 mysql 进行比较，然后返回成功或失败，获取警报（成功）。

然后我会开始

```
 $date = $_POST['date']; 
      die($date); 
```

在 some.php 中只是看它是否正确传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:28:43.887

好吧，您可以将 datepicker 日期字符串（将格式调整为`$("#datepicker").datepicker("option","dateFormat",'yyyy-mm-dd');`）传递给创建`Date`对象的以下 JavaScript 函数：

```
function createDate(s) {
    var bits = s.split('-');
    var d = new Date(bits[0], bits[1] - 1, bits[2]);
    return d;
} 
```

然后您必须从数据库中检索日期值。我不知道是否存在 wordpress 限制，但您可以触发 Ajax-Request，它读取数据库值并将日期字符串作为 JavaScript 变量作为响应。

这个变量也可以传递给`createDate(date)`函数。使用这两个日期对象，您可以轻松调用以毫秒为单位比较日期和时间 ->`getTime()`日期对象的函数。

问候

# html - 放置在数据 URI 中时 SVG 文件中缺少字体或

> ID：15405048
> 
> 赞同：4
> 
> 时间：2013-03-14T09:07:21.723
> 
> 标签：html, fonts, svg, html5-canvas, data-uri

我正在检查 SVG 和 Canvas (html5) 中字体的使用。我在 urldata 中翻译了一个 svg 文件。我得到了这个结果：

```
data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+Cjxzdmcgd2lkdGg9IjYxMiIgaGVpZ2h0PSIzOTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiA8ZGVmcz4KICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPkBpbXBvcnQgdXJsKGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9WZWdhRWRpdG9yL3N0YXRpYy9Nb2RlbGVQb2wvRGVzeXJlbC5jc3MpPC9zdHlsZT4KIDwvZGVmcz4KIDxnPgogIDx0aXRsZT5DYWxxdWUgMTwvdGl0bGU+CiAgPHRleHQgdHJhbnNmb3JtPSJtYXRyaXgoMi42NDI4NiwgMCwgMCwgMi41MzMzMywgLTQ2MC41MiwgLTIxNi45NjcpIiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMCIgeD0iMjc2Ljg1ODExIiB5PSIxNTQuNjA1MjYiIGlkPSJzdmdfMiIgZm9udC1zaXplPSIyNCIgZm9udC1mYW1pbHk9IkRlc3lyZWwiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHhtbDpzcGFjZT0icHJlc2VydmUiPmhlbGxvPC90ZXh0PgogPC9nPjwvc3ZnPg== 
```

当我将所有内容复制并粘贴到地址 brosser 时（Firefox、Chrome 示例），我可以使用 Desyrel 字体显示单词“hello”（如果您尝试过，您将不会显示 Desyrel 字体）。另一方面，我尝试使用以下代码使用相同的 urldata dans le canvas (html5)：

```
.............
                        var imageObj = new Image();

                imageObj.onload = function() {

                    context.drawImage(imageObj, 0, 0);

                 };
...........
         imageObj.src=urldata; 
```

在画布（html5）中，我也可以显示“你好”，但缺少 Desyrel 字体。我尝试了其他字体，结果是一样的。

有谁知道如何在 html5 画布中显示所需的字体？我也试过 imageObj.src=myfile.svg; 再次没有考虑字体。我认为 html5 画布可以显示 svg 图像，但字体有问题吗？谢谢你的回答，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:25:15.437

图像必须是自包含的，以防止隐私泄露。您的 base64 编码图像包含以下内容：

```
<style type="text/css">@import url(http://127.0.0.1:8000/VegaEditor/static/ModelePol/Desyrel.css)</style> 
```

这不起作用，因为它试图访问图像文件之外的数据。您必须对 css 文件进行 url 或 base64 编码，并将其作为数据 url 嵌入到图像中，就像对图像本身所做的那样。

一旦图像的**所有**数据都在一个文件中，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-18T03:14:41.300

我也遇到了这个问题，我想更好地理解罗伯特的回答，所以我把这个[jsfiddle](http://jsfiddle.net/headwinds/ykx7kp8L/)放在一起，演示如何用 base64 对字体“Geogrotesque”进行编码并将其嵌入到 svg 中，这样当 svg 被序列化为字符串并设置为作为img的源，它将保持img中的字体，以便它可以在画布中绘制。

```
<defs>
<style>
@font-face {
font-family: 'geogrotesque_mediummedium';
src: url(data:application/font-woff2;charset=utf-8;base64,d09GMg...[place encoded data here];
}
</style>
</defs> 
```

# jquery - 工具提示，即 7 个 问题

> ID：15405050
> 
> 赞同：1
> 
> 时间：2013-03-14T09:07:25.987
> 
> 标签：jquery, html, internet-explorer-7

我有大约 50-100 个链接并为它制作了一个工具提示。这是一个简单的工具提示，但真正的问题是 ie7。工具提示工作正常，我认为代码中存在一些问题。这是代码。

```
 $(document).ready(function(){
  $(document).ready(function(){
  $("a[id$='_down']").hover(function(){
      $(this).parent().next().toggle()
  });
});
  }); 
```

我正在为 div 使用 id，您可以查看[此链接](http://jsbin.com/ifizat/1/edit)，您会有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:48:45.110

@fahad.kazi IE 在涉及到 JS 和一些 CSS 属性时总是会引起麻烦。

但是，每当我需要在 IE 中显示工具提示时，我几乎在所有作业中都使用了**title**属性，它看起来有点像工具提示。

```
<a href="" title="hello world">Hello World</a> 
```

它的示例代码如下所示。例如，您参考[this](http://jsfiddle.net/Pa3a7/)。

# sql-server-2008-r2 - BCP IN 错误 = [Microsoft][SQL Server Native Client 10.0]无效的日期格式

> ID：15405052
> 
> 赞同：1
> 
> 时间：2013-03-14T09:07:44.603
> 
> 标签：sql-server-2008-r2

我正在尝试通过执行批处理文件通过 BCP-IN 在表中插入一些值。但面临这个问题 -

```
Starting copy...
SQLState = 22008, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Invalid date format
SQLState = 22008, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Invalid date format
SQLState = 22008, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Invalid date format
SQLState = 22005, NativeError = 0 
```

插入数据的文件是这样的 -

```
Marcus, Tom 371332  11-1-09 0:00    720.04  25.2    108.01  0   43.2 
```

并且插入数据的表具有coloumn-

```
EFFECT_DATE2] [datetime2](3) NULL, 
```

任何建议如何避免此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T20:00:41.070

您可能需要检查目标数据库的默认语言设置，因为它用于解释日期，即 DATEFORMAT。

一种解决方案是在数据文件中将日期重新格式化为 ISO 标准格式 (YYYYMMDD)。

替代方法是重新格式化日期以匹配目标数据库的 DATEFORMAT，或者通过更改数据库的默认语言设置来更改 DATEFORMAT。

请参阅[https://support.microsoft.com/en-us/kb/173907](https://support.microsoft.com/en-us/kb/173907)

如 KB 中所述，在控制面板中更改服务器的区域设置不会更改 Sql Server 解释日期的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T12:55:01.167

尝试在格式文件中使用 SQLCHAR 而不是 SQLDATETIME。将日期时间字段中的数据设置为本地格式，并使用 -R 键运行 bcp.exe。

# android - Firefox Mobile：使用 translate3d 动画的元素从父容器流出

> ID：15405054
> 
> 赞同：3
> 
> 时间：2013-03-14T09:07:48.940
> 
> 标签：android, css, firefox, mobile, translate3d

我有一个元素，我用 translate3d 变换设置了动画。父元素具有`overflow: hidden`，但在 Firefox Mobile 19.0.2 上，动画期间动画元素在父元素之外可见。

动画`top`属性而不是`translate3d`工作，但它不是硬件加速并且不够平滑。

它适用于我测试过的所有其他移动和桌面浏览器。

我想这是一个 Firefox Mobile 错误，但有人有解决方法吗？

这是用于测试的 jsfiddle 链接：http: [//jsfiddle.net/dioslaska/6h8qe/](http://jsfiddle.net/dioslaska/6h8qe/)

最小的测试用例：

HTML：

```
<div id="cont">
    <div id="translate">
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
        <div>5</div>
        <div>6</div>
        <div>7</div>
        <div>8</div>
        <div>9</div>
        <div>10</div>
    </div>
</div> 
```

CSS：

```
#cont {
    width: 50px;
    height: 90px;
    border: 1px solid black;
    margin: 20px;
    overflow: hidden;
}

#translate {
    -webkit-transition: all 1s ease-out;
    -moz-transition: all 1s ease-out;
}

#translate.a {
    -webkit-transform: translate3d(0, -60px,0);
    -moz-transform: translate3d(0, -60px,0);
}

#translate div {
    height: 30px;
    line-height: 30px;
    text-align: center;
} 
```

**更新**：看起来问题在 Firefox 27 中得到了解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T07:09:46.683

经过大量搜索后，我在这里找到了一种解决方法：http: [//jbkflex.wordpress.com/2013/04/04/css3-transformations-showing-content-outside-overflowhidden-region-in-firefoxandroid/](http://jbkflex.wordpress.com/2013/04/04/css3-transformations-showing-content-outside-overflowhidden-region-in-firefoxandroid/)

向容器元素添加`background`and`opacity: .99`似乎可以解决问题。

但仍然没有关于导致问题的原因的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T23:56:17.990

我尝试了 opacity: .99 hack，但它导致布局被推下..

所以我尝试了另一种技巧，我发现它可以通过将其应用于您的样式表来实现：

```
* {
   outline: 1px solid transparent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T22:18:57.160

对不起，但我似乎找到了一个更简单的解决方案。无布局损坏。

如果滚动容器的高度大于设备高度，那么这个问题就会消失。它对于纵向和横向方向具有不同的值。

对我来说，在 Android 4.0.4 上的 FF v.23 上使用 Sencha Touch 2 真的很有效。

# drupal - Drupal 7：实体引用的挂钩

> ID：15405058
> 
> 赞同：0
> 
> 时间：2013-03-14T09:08:03.410
> 
> 标签：drupal, reference, drupal-hooks, drupal-entities

是否可以挂钩实体引用的更改？假设我有`a <- b`和`b <- x -> a`。当`a <- b`更改为`d <- b`我也`b <- x -> a`想更改为`b <- x -> d`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:22:46.333

场在哪里？我的第一个倾向是使用 hook_entity_update。但是您可以使用以下方法捕获所有实体： hook_field_update

[http://api.drupal.org/api/drupal/modules%21field%21field.api.php/function/hook_field_update/7](http://api.drupal.org/api/drupal/modules%21field%21field.api.php/function/hook_field_update/7)

# twitter-bootstrap - Twitter Bootstrap 跨度和行

> ID：15405062
> 
> 赞同：0
> 
> 时间：2013-03-14T09:08:11.737
> 
> 标签：twitter-bootstrap

我有一个关于使用 Twitter Bootstrap 的非常简单的问题。如果我想显示大块，什么选择更好？

```
<div class="row">
  <div class="span10">..</div>
  <div class="span10">..</div>
  <div class="span10">..</div>
  .....
</div> 
```

或者

```
<div class="row">
  <div class="span10">..</div>
</div>

<div class="row">
  <div class="span10">..</div>
</div>

<div class="row">
  <div class="span10">..</div>
</div> 
```

非常感谢。我知道这是一个太简单的问题，但我开始使用这个框架并且我想有效地使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:10:14.333

如果您没有更改引导程序的配置，则您的屏幕仅分为 12 个部分。因此，您的第一个选择并不*自然*，因为您尝试使用 30 个零件。

去第二个，不同行的划分是明确的。

# javascript - 仅当使用 jquery 或 javascript 有多个页码时才显示第一页和最后一页？

> ID：15405064
> 
> 赞同：0
> 
> 时间：2013-03-14T09:08:19.213
> 
> 标签：javascript, jquery

我有两个这样的按钮：

```
 <button class="next_prev" onclick="" id="first_buttons" disabled>{{ pages.first }}</button>
<button class="next_prev" onclick="" id="last_buttons" disabled>{{ pages.last }}</button> 
```

如果默认只有一页，页面 {{ pages.first }} 和 {{ pages.last }} 存储页码 1 和 1 并显示它。但是如果页码大于 1，我只想显示这两个按钮。我得到的页面长度如下：

```
<p> <span>{% get_pages %} {{ pages|length }} pages</span> </p> 
```

可以在 jquery 或 javascript 中完成吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:26:15.103

如何为每个按钮添加一个公共类，例如：

```
<button class="next_prev pageNumberBtn" onclick="" id="first_buttons" disabled>{{ pages.first }}</button>

<button class="next_prev pageNumberBtn" onclick="" id="last_buttons" disabled>{{ pages.last }}</button> 
```

如果最后页码为 1，则隐藏按钮：

```
if ($('#last_buttons').html() == '1') {
    $('.pageNumberBtn').hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:30:42.543

使用类/ID 给出页长编号的包装器。例如：

```
<p id="num-of-pages"><span>{% get_pages %} {{ pages|length }} pages</span></p> 
```

如果上面代码的输出只产生了一些数字，你可以使用下面的 jQuery 代码来隐藏按钮：

```
var numOfPages = $('#num-of-pages').text();

if (numOfPages <= 1 ){
    $('.next_prev').hide();
} 
```

此处的小提琴示例：http: [//jsfiddle.net/shodaburp/56kbj/](http://jsfiddle.net/shodaburp/56kbj/)

PS：只是一个提示 - 因为 .next_prev 是一个非常通用的名称，您可能已经将此类用于其他一些元素，最好为您想要隐藏的这两个按钮提供一些 ID。

**更新（基于 user2032220 的第二条评论）：**

如果`{% get_pages %} {{ pages|length }}`实际输出“Pages 1”，那么最简单的解决方案之一是将页面长度包装在另一个 span 标签中。例如：

```
<p id="num-of-pages"><span>{% get_pages %} <span>{{ pages|length }}</span></span></p> 
```

然后隐藏按钮的代码将更改：

```
var numOfPages = $('#num-of-pages span span').text(); 
```

小提琴示例：http: [//jsfiddle.net/shodaburp/56kbj/1/](http://jsfiddle.net/shodaburp/56kbj/1/)

# c# - 使用带有 HTTPS 解密的 Fiddler 时出现 Win8 App 身份验证问题

> ID：15405075
> 
> 赞同：0
> 
> 时间：2013-03-14T09:08:42.550
> 
> 标签：c#, authentication, fiddler

我安装了 fiddler2 来查看我的应用程序的 api 连接情况。但是自从我安装了它之后，出现了安全问题。例如，我想打开 gmail，有一条消息说“注意它不安全”你想继续吗？”

在我的应用程序中，我需要连接，但我有一条消息“您无法验证，请检查您的互联网连接”还有另一条消息，但我不记得了。

我有互联网连接。在我的应用程序中，我必须查询 Twitter API。但是没有身份验证我不能这样做。

当我尝试搜索用户时，出现“没有来自 Twitter 的消息”异常。我该怎么办？

我认为这是fiddler2的问题，但我没有找到！

有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:18:12.583

如果您在 fiddler 选项中启用了 HTTPS 拦截，则很可能是 Fiddler 导致了此问题。如果您确实需要拦截 HTTPS 流量，请执行以下操作：

*   在提琴手去工具 - 提琴手选项 - HTTPS - 导出根证书到桌面
*   找到您刚刚导出的证书（在桌面上），将其安装为受信任的根 CA。

在你完成提琴手后**卸载**证书，否则这是一个严重的安全漏洞。

要卸载证书，您需要运行 mmc.exe 并选择文件 - 添加，然后选择证书。然后找到`DO_NOT_TRUST_FiddlerRoot`并删除它。

请注意，基本上这是一种解决方法。不要忘记删除证书！

# mysql - Mysql slave在状态检查时出错

> ID：15405076
> 
> 赞同：0
> 
> 时间：2013-03-14T09:08:42.517
> 
> 标签：mysql, database-replication, master-slave

我有一个工作正常的主 mysql 服务器。在它给出的 show status 命令上

```
+-------------------+----------+--------------+------------------+
| File              | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+-------------------+----------+--------------+------------------+
| master-bin.000004 |  181     |              |                  |
+-------------------+----------+--------------+------------------+ 
```

现在我正在尝试为此设置一个奴隶

salve my.ini 配置是

```
MASTER_HOST='master ip',
MASTER_PORT=3306,
MASTER_USER='repluser',
MASTER_PASSWORD='slavepass',

server­-id = 2 
relay­-log-­index = slave-­relay-­bin.index
relay­-log = slave­-relay­-bin
replicate-wild-ignore-table=mysql.%
replicate-wild-ignore-table=information_schema.%
replicate-wild-ignore-table=performance_schema.% 
```

但是当我检查奴隶状态时，我得到一些错误如下

```
| Waiting for master to send event | 10.0.100.168 | repl        |        3306 |
           60 | mysql-bin.000004 |                 181 | mysql-relay-bin.000002
|           638 | mysql-bin.000001      | Yes              | No                |
                 |                     |                    |
     |                         |                             |       1062 | Erro
r 'Duplicate entry '3094' for key 'PRIMARY'' on query. Default database: ''. Que
ry: 'INSERT INTO
                `phpmyadmin`.`pma_history`
              (`username`,
                `db`,
                `table`,
                `timevalue`,
                `sqlquery`)
         VALUES
              ('root',
               '',
               '',
               NOW(),
               'SHOW PROCESSLIST')' |            0 |                 493 |
      6232 | None            |                |             0 | No
   |                    |                    |                 |
   |                |                  NULL | No                            |
          0 |               |           1062 | Error 'Duplicate entry '3094' for
 key 'PRIMARY'' on query. Default database: ''. Query: 'INSERT INTO
                `phpmyadmin`.`pma_history`
              (`username`,
                `db`,
                `table`,
                `timevalue`,
                `sqlquery`)
         VALUES
              ('root',
               '',
               '',
               NOW(),
               'SHOW PROCESSLIST')' | 
```

注意：错误是从命令提示符复制的两个系统都在 windows7 上运行，XAMPP 堆栈位于同一本地网络上

是因为我现在的奴隶已经有一些数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:21:22.343

添加`replicate-wild-ignore-table=phpmyadmin.%`到您的从服务器 my.ini 文件。

因为它试图将数据复制到已经有数据的 phpmyadmin.pma_hostory 表中。

# bash - 如何共享正在运行的进程的屏幕输出？

> ID：15405078
> 
> 赞同：0
> 
> 时间：2013-03-14T09:08:50.047
> 
> 标签：bash

我有一个可以运行很长时间的程序，这个程序在远程服务器上编辑和运行。我用办公室的电脑远程连接服务器并运行它。进度显示在我办公室电脑的电脑屏幕上...

我想在家里看到输出，我如何捕捉办公室电脑屏幕上的输出并在家里看到结果？

我考虑将输出写入文件，但我需要关闭该文件。所以我应该打开文件然后写输出，关闭..再次打开？

谢谢

我不知道应该使用正确的标签，但程序是用 perl 编写的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:10:14.587

为什么不直接重定向到日志文件并对其进行[尾部](http://linux.about.com/library/cmd/blcmdl1_tail.htm)处理（或将其加载到编辑器等）？

```
$ myprog.pl >/tmp/logfile 2>&1 
```

以上将您的输出重定向到日志文件（`/tmp/logfile`- 您可能希望选择更好的位置，因为`/tmp`它是临时的并且可以在重新启动期间被丢弃）并将 stdout/stderr 重定向到同一个位置。请注意，这会捕获程序的*输出*，您无需修改​​脚本。

[另一种方法是在屏幕](http://linux.about.com/od/Bash_Scripting_Solutions/a/How-To-Use-The-Gnu-Linux-Screen-Terminal-Window-Manager.htm)内运行程序

> 也许最有用的功能之一是您可以在注销后重新连接到您的会话，移动到另一台计算机或断开连接，并继续工作，就像什么都没发生一样。您的所有编辑会话、shell 窗口等都将在您离开时出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:22:26.690

你可以`tee`的

```
your_program.pl | tee logfile.txt 
```

`logfile.txt`并在家中查看最新结果

```
tail -f logfile.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:47:14.843

就个人而言，我使用`screen`这种东西。

*   连接到服务器
*   输入命令`screen`。它会显示一条很好的消息，说明它的版本`screen`以及它在 GPL 下。
*   运行实际命令。
*   在任何时候，点击`ctrl-A`,`D`以断开`screen`会话。您将看到一条类似 的消息`[detached from pid.tty.server]`。正常从服务器注销。
*   再次连接到服务器并输入命令`screen -x`以重新连接到您的会话。

# python - 以root身份运行pygame脚本时，没有声音输出？

> ID：15405082
> 
> 赞同：0
> 
> 时间：2013-03-14T09:08:54.603
> 
> 标签：python, audio, pygame, sudo, raspberry-pi

我为我的树莓派编写了一个非常简单的脚本，它加载一个未压缩的 WAV 并播放它 - 但是当我以 root 身份运行脚本时（能够使用`GPIO`and `ServoBlaster`），没有声音输出。

我已将默认音频设备设置为 USB 声卡，这可以正常工作 - 我已经使用`aplay fx.wav`. 运行不带 pygame 脚本`sudo`，声音播放正常。

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:19:04.287

问题是`sudo`命令更改了运行脚本的目录 - 因此使用`sudo -s`或简单地使用声音的绝对路径运行 python 来修复它。

# java - java中如何在不影响文字的情况下打印String的镜像？

> ID：15405084
> 
> 赞同：-8
> 
> 时间：2013-03-14T09:09:13.927
> 
> 标签：java, string

我有一个`String str="Ram Is A Good Boy";`

我想要输出

> 男孩好A是拉姆

请给我这个方法的代码？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:12:17.373

没有给出直接的解决方案，但如果您按照以下步骤操作，您将实现您想要的。

1.  用空间[分割。](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)
2.  以相反的顺序打印拆分后的值。

但是再想想你的镜像是错误的。

> 拉姆是个好孩子 | yoB dooG A SI MAR

对于给定的字符串，这不是正确的镜像吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:12:27.153

```
String str = "Ram Is A Good Boy";
String [] strArray = str.split(" ");
StringBuilder sb = new StringBuilder();
for(int i=strArray.length-1;i>-1;i--)
{
    sb.append(strArray[i]+" ");
}
System.out.println(sb.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:13:35.023

```
String str="Ram Is A Good Boy";
String splits[] = str.split(" ");
string reverse = "";
for(int i = splits.length-1; i>=0; i--) {
    reverse += splits[i] + " ";
}
System.out.println(reverse); 
```

# javascript - 从外部文件javascript加载内容

> ID：15405085
> 
> 赞同：0
> 
> 时间：2013-03-14T09:09:19.327
> 
> 标签：javascript, jquery

我想加载 id 等于 id`('#content'+divId)` 例如按钮的div `id=1` ，它必须加载`file.php`div id 等于 content_1 和按钮的`id=2` 内容，它必须加载`file.php`div id 等于 content_2 的内容。两个内容加载来自同一个文件，并且必须显示在不同的 div 中。

这是我的js

```
$(document).ready(function() {         
var hash = window.location.hash.substr(1);
var href = $('#nav li a').each(function(){
        var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-4)){

        var toLoad = hash+'.html #content_low'+divId;
        $('#content'+divId).load(toLoad);
        alert(divId);
    }                                           
});

$('#nav li a').click(function(){
    divId = $(this).parents('li').attr('id');   
    var toLoad = $(this).attr('href')+'#content_low'+divId;
    alert(divId);
    $('#content'+divId).slideUp('normal',loadContent).delay(200);
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-$(this).attr('href').length);
    function loadContent() {
        $('#content'+divId).load(toLoad,showNewContent)
    }
    function showNewContent() {
        $('#content'+divId).delay(700).slideDown($('#content'+divId).height());

    }
    return false;

});
}); 
```

这是html

```
<ul id="nav" class="marketlist"><li id="1" class="market twobox">
<a href="external_file.php"><img src="img/projects/1.jpg" class="items" alt="" /></a>
</li><li id="2" class="market"> 
<a href="external_file.php"><img src="img/projects/1.jpg" class="items" alt="" /></a>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:20:01.377

如果我错了，请纠正我，但你的 div 不包含任何 id。所以永远不会有比赛。

我会通过代码生成 div 或 LI。

```
$('#nav').append("<li id='#content'" + divId + "'></li>"); 
```

# validation - 使用 play framework 1.2.5 验证外部模型对象

> ID：15405093
> 
> 赞同：0
> 
> 时间：2013-03-14T09:09:49.257
> 
> 标签：validation, playframework-1.x

我有一个在我的 play 应用程序之外定义的模型对象，它是一个从 wsdl 生成的自动生成的实体。这意味着我无法可靠地向其字段添加验证注释。我考虑过扩展课程，事实上我就是这样做的，我想知道是否可以在扩展版本中添加验证标签？然而，我看到的一个直接问题是它还有孩子的成员也需要添加验证标签，如果我要扩展它们，它们将不会被 play 的活页夹使用。我想我需要的是某种自定义验证器，但据我所知，它们旨在验证单个属性，而不是整个对象模型。

任何指示或建议都会很棒干杯！NFV

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:37:10.923

您可以为您的课程编写自定义验证器并使用：

```
public static void myController(@CheckWith(MyValidator.class) myParameter) 
```

在控制器中测试对象是否有效。然后只需在内部手动验证它们`MyValidator`（它必须扩展`play.data.validation.Check`）。查看[play 文档](http://www.playframework.com/documentation/1.2.5/validation#custom)以获取有关自定义验证器的更多信息。

# javascript - 通过 jQuery 拖放图像以获取图像尺寸

> ID：15405097
> 
> 赞同：0
> 
> 时间：2013-03-14T09:09:59.650
> 
> 标签：javascript, jquery, image, native, dimensions

我使用[jquery-filedrop](https://github.com/weixiyen/jquery-filedrop)并且我只允许用户上传文件 PNG & JPG

但是如何检查图像大小（如像素）？

**可以在文件对象中获取图像大小吗？**

在我查看了 console.log 中的文件对象之后，它与图像大小无关。

![在此处输入图像描述](../Images/6606741581429c3e6c501b3de423185f.png)

![在此处输入图像描述](../Images/fe3c652f9842400566abc8adc40931aa.png)

或者我必须检查 PHP 或附加图像所以`.width()`& `.height()` [(REF)](https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:20:22.777

根据[Georg Schölly](https://stackoverflow.com/users/24587/georg-scholly)的[回答](https://stackoverflow.com/a/1093364/1437016)：

```
// find the element
var img = $('#imageid');

/* 
 * create an offscreen image that isn't scaled
 * but contains the same image.
 * Because it's cached it should be instantly here.
 */

var theImage = new Image();
theImage.src = img.attr("src");

// you should check here if the image has finished loading
// this can be done with theImage.complete

alert("Width: " + theImage.width);
alert("Height: " + theImage.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:44:19.620

好的，我这样发布到 PHP

```
$size = getimagesize($_FILES['name']['tmp_name']);

    if($size[0]===150 && $size[1]===150) {
       // done
    } else {
       // error
    } 
```

# xaml - 如何根据 Metro 应用程序中的当前方向更改列表框的项目模板？

> ID：15405098
> 
> 赞同：2
> 
> 时间：2013-03-14T09:10:06.740
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml, itemtemplate

嗨，我正在开发一个 Metro 应用程序，我的应用程序在横向模式下运行良好，但现在我想让它也与纵向模式兼容。

这就是我定义学生列表框的方式：-

```
 <ListBox x:Name="lstbxbStudents"   Background="Transparent" Height="Auto"  ScrollViewer.VerticalScrollBarVisibility="Auto"  SelectionChanged="lstbxbStudents_SelectionChanged_1" HorizontalAlignment="Left" Width="Auto" Margin="4,50,0,122" Style="{StaticResource ListBoxStyle1}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <StackPanel Width="100"  Orientation="Horizontal">
                            <TextBlock Text="{Binding stunum}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                        </StackPanel>
                        <StackPanel Width="450">
                            <TextBlock Text="{Binding studsc}"   HorizontalAlignment="Left" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal"  Width="180">
                            <StackPanel>
                                <TextBlock Width="50" Text="{Binding stu_cod}" x:Name="txtblkstucode"   HorizontalAlignment="Right" />
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Width="150">
                            <TextBlock Text="{Binding stuby_prc}" VerticalAlignment="Center" TextAlignment="Right" HorizontalAlignment="Center" />
                        </StackPanel>
                        <StackPanel Width="100">
                            <TextBlock Text="{Binding stuqty, Mode=TwoWay}"  TextAlignment="Center" x:Name="txtbxbqty" Tag="{Binding stunum}"     VerticalAlignment="Center"   HorizontalAlignment="Right" />
                        </StackPanel>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

现在我的疑问是，当我将它从横向模式旋转到纵向模式时，由于列表框的 itemtemplate 中存在的文本块的宽度已经定义，当我将它旋转到纵向时，我无法看到所有存在的数据（它会切断），因为与横向模式相比，纵向模式的宽度更小。

1）我可以为同一个列表框设置两个项目模板，并根据当前方向在这两个模板之间切换吗？

2）当触发方向改变事件时，如何在运行时代码隐藏中减少/增加列表框的项目模板内存在的文本块的宽度。？

3）此时视觉状态是否有用，如果有，那么如何？

4）还有其他方法可以解决问题吗，我是否缺少任何替代方法？

请帮帮我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:57:57.783

您可以更改`ItemTemplate`使用视觉状态。首先将您的两个项目模板放入资源中：

```
<Page.Resources>
    <DataTemplate x.Key="Landscape">
         <!-- your landscape template -->
    </DataTemplate>
    <DataTemplate x.Key="Portrait">
         <!-- your portrait template -->
    </DataTemplate>
</Page.Resources> 
```

最初将景观模板分配给`ListBox`：

```
<ListBox x:Name="listbox" ItemTemplate="{StaticResource Landscape}" /> 
```

在`VisualStateManager`更改`FullScreenPortrait`视觉状态的模板：

```
<VisualStateManager.VisualStateGroups>
    <VisualState x:Name="FullScreenPortrait">
        <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="listbox" Storyboard.TargetProperty="ItemTemplate">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource Portrait}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </VisualState>
</VisualStateManager.VisualStateGroups> 
```

确保您将`LayoutAwarePage`其用作页面的基类以使其正常工作。

# ios - 添加 NSURLIsExcludedFromBackupKey 属性后的 iOS 数据存储指南

> ID：15405100
> 
> 赞同：0
> 
> 时间：2013-03-14T09:10:13.113
> 
> 标签：ios, storage, itunes-store, icloud-drive

我收到了，下一个 App 审核反馈：

> “我们发现您的应用程序不遵循 iOS 数据存储指南，这是 App Store 审查指南所要求的。
> 
> 特别是，我们发现在启动和/或内容下载时，您的应用程序存储了 2.07 MB。”

我的应用程序有以下数据：

*   一个 sqlite (352Kb)，当应用程序第一次启动时它会复制到设备。

*   下载并保存一些图像缓存。

因此，我阅读了文档，并将 NSURLIsExcludedFromBackupKey 添加到所有文件中，然后移至 tmp 目录（但在用户退出后我不删除数据，因为我想保留而不是备份）。我将应用程序发送给 Apple，经过审核后，我收到了相同的反馈。

> “应用商店 2.07 MB”

在我的设备中，下载所有图像后，当我去：

*   安装并启动您的应用
*   转到设置 > iCloud > 存储和备份 > 管理存储
*   如有必要，点击“显示所有应用”
*   检查您应用的存储空间

它只有 376 KB 和后来的 753 KB。

我不知道我下一步该怎么做，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:24:25.047

我的应用程序被拒绝的原因与您的相同，但不同之处在于我的应用程序不下载任何文档。

也许我不是更好的人来帮助你，但你的情况看起来像你的应用程序下载并保存图像两次（376 x 2 = 752）但我不知道如何创建其他存储的数据（如发生在我的应用程序）。

就我而言，我的应用程序在地图中显示注释并在应用程序内的网络浏览器中打开 URL，我不知道 iCloud 中存储了哪些文档（考虑到我没有使用 iCloud）。

# c# - Visual Studio 2012 项目不会在 2010 年打开

> ID：15405108
> 
> 赞同：23
> 
> 时间：2013-03-14T09:10:35.017
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, visual-studio-2012

我在 Visual Studio 2012 中为作业创建了一个游戏，而我所在的大学使用的是 2010，但它无法打开！它提到了一些关于 NET Framework 4.5 的内容。如何转换我的项目，使其在 2010 年开放？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-07-16T07:59:25.993

它需要三个步骤：

**步骤1**

在文本编辑器中打开解决方案文件 (.sln) 并更改

```
 Microsoft Visual Studio Solution File, Format Version 12.00 
```

至

```
 Microsoft Visual Studio Solution File, Format Version 11.00 
```

**第2步**

在文本编辑器中打开应用程序配置文件 (App.config) 并更改

```
sku=".NETFramework,Version=v4.5" 
```

至

```
sku=".NETFramework,Version=v4.0" 
```

**第 3 步**

在文本编辑器中打开项目文件（对于 C# 语言 .csproj）并更改

```
<TargetFrameworkVersion>v4.5</TargetFrameworkVersion> 
```

至

```
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion> 
```

现在享受你在 VS 2010 中的项目吧！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T09:14:34.990

您可能只需要在 Visual Studio 2012 中打开项目，然后转到项目的属性页面。

在 Application 选项卡上，找到 Target Framework 设置，并将其更改为 .Net Framework 4。

之后，您*应该*可以在 Visual Studio 2010 中打开它。

另请参阅[Converting VS2012 Solution to VS2010](https://stackoverflow.com/questions/12143383/converting-vs2012-solution-to-vs2010)，但到目前为止，我不必对 VS2012 创建的项目进行任何转换即可在 VS2010 中打开它们 - 但 YMMV。

[编辑]

我刚刚通过在 VS2012 中创建一个 .Net 4.5 项目再次测试了这一点（可以肯定），并验证我无法在 VS2010 中打开它。然后我再次在VS2012中打开，将框架版本改为.Net 4.0。之后我*可以*在VS2010中打开它。

请注意，我不必进行*任何*其他更改。但是，这是在安装了 VS2010 和 VS2012 的计算机上，因此安装 VS2012 可能会对 VS2010 进行某些操作以使其工作...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-27T09:59:04.867

我在工作中做过这个

用记事本打开 .sln 文件

更改下面的两行

```
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio 2012 
```

至

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010 
```

嘿，解决方案现在在 VS2010 中打开

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T08:27:26.503

打开 .sln 文件并将格式版本更改为 12.0 到 11.0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-05T22:22:33.600

缺少库或框架也可能导致此问题。例如，如果您想打开一个 MVC4 或 Silver Light 项目，但您的 PC 上没有安装这些库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T09:15:06.727

您可以在 Visual Studio 2010 中创建一个新项目，然后右键单击解决方案资源管理器 > 添加 > 现有项目。浏览 2012 年项目中的所有文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T09:17:38.537

在 VS2010 中创建一个新的解决方案并添加 VS2012 中的所有现有文件，或者将 .sln 文件与使用 VS2010 新创建的 .sln 文件进行比较。在顶部，您会看到一些应该更改的版本信息。还要比较 .csproj 文件并相应地更改任何版本信息和目标框架。

# javascript - jQuery 用 val() 改变值 - 元素并不总是显示新值

> ID：15405110
> 
> 赞同：1
> 
> 时间：2013-03-14T09:10:45.300
> 
> 标签：javascript, jquery

我试图用`$('#voucherID_id').val('LF3L3DAF6X');`. 这在大多数情况下都有效，但是在某些情况下（可能是由于我使用 jQUery + Google Chrome 的方式），该元素不会显示新值。但是，如果我单击元素，则值会发生变化。

作为例证。我有一个带有 value 的输入元素`LF3L3DAF6X`，但是它`QUXJOJJUDZ`在浏览器上显示完全不同的值。这可能是什么原因？

**截屏：**

[![生物识别中的 FTIR](../Images/3f12e01368205e0ecad3dcc88ba91c65.png)](https://i.stack.imgur.com/V2N8n.png)

**HTML**

```
<div class="controls">
    <input id="voucherID_id" name="voucherID" type="text" value="LF3L3DAF6X">
    <span class="help-inline"></span>
</div> 
```

**jQuery**

```
if (elem.is(":checkbox") && !nested){
    elem.prop('checked', aData[propertyName]);
}
else if ((elem.is(":text") || elem.is(":input[type='number']") || elem.is(":input[type='hidden']")) && !nested){
    elem.val(aData[propertyName]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:52:11.323

尝试这个

HTML

input type="text" placeholder="凭证ID" id="凭证"

jQuery

var VoucherID='WTWEYUYQWHB'

$('#Voucher').val(VoucherID);

# java - java - 如何确定网络连接在java中可用？

> ID：15405111
> 
> 赞同：-1
> 
> 时间：2013-03-14T09:10:47.083
> 
> 标签：java, network-connection

java - 如何确定网络连接在java中可用？我想获取有关网络连接的信息。如果可用，我将连接到网络以获取数据，否则我将使用本地数据库。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:16:19.083

如您所说，尝试连接网络。如果失败，重复例如 3 次。如果仍然失败，请使用本地数据库。您不必另外 ping 任何东西。

为简单起见，您可以使用[Jodd HTTP](http://jodd.org/doc/http.html)库，例如：

```
try {
    HttpRequest.get("http://stackoverflow.com").send();
    return true;
} catch (Exception ex) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:22:24.660

如@igor说：*“尝试连接网络，如你所说。如果失败，重复例如3次。如果仍然失败，使用本地数据库。你不必额外ping任何东西。“*

例如：

```
 public class InternetConnection {
    /*  use at least one reliable host, in most cases you will want
        to use the one you're working with later    */
    private static final String CHECK_URL = "http://www.t-online.de/";
    public static InternetConnectionState isAvailable() {
        try {
            URL url = new URL(InternetConnection.CHECK_URL);
            HttpURLConnection urlConnection = (HttpURLConnection)url.openConnection();
            Object objData = urlConnection.getContent();
        } catch(UnknownHostException exception) {
            return new InternetConnectionState(false);
        } catch(IOException exception) {
            return new InternetConnectionState(false);
        }
        return new InternetConnectionState(true);
    }
} 
```

[主链接](http://nerdcenter.de/java-periodically-check-internet-connection-availability/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:15:22.510

您可以ping主机。看

[ping IP 地址的 java 代码](https://stackoverflow.com/questions/11506321/java-code-to-ping-an-ip-address)

如果您想检查数据库是否可访问，您可能会捕获在尝试连接期间可能发生的连接异常。随后，如果失败，您可以使用本地数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:16:39.300

您可以为此使用[java.net.NetworkInterface](http://docs.oracle.com/javase/7/docs/api/java/net/NetworkInterface.html)，这是一个简单的示例，没有如何做到这一点：

```
public boolean isConnectedToNetwork() {
    Enumeration<NetworkInterface> interfaceEnumeration = NetworkInterface.getNetworkInterfaces();
    while (interfaceEnumeration.hasMoreElements()) {
    NetworkInterface each = interfaceEnumeration.nextElement();

     if (!each.isLoopback() && each.isUp()) {
          return true;
      }
    }
    return false;
} 
```

请注意，您必须检查它是否不是环回接口。

# c# - Lambda 表达式：编译器行为

> ID：15405112
> 
> 赞同：9
> 
> 时间：2013-03-14T09:10:51.667
> 
> 标签：c#, lambda

好吧，我正在讨论“Lambda 表达式”主题（第 17 章；代表，代表的 C# 语法糖）。Jeffery 指出 C# 编译器会在后台创建一个新的非静态类，该类具有以下内容：

1.  用于存储已在 Lambda 表达式中访问的所有局部变量的字段。
2.  一种方法，其主体包含 Lambda 表达式，并且其签名/返回类型与已使用 Lambda 表达式的委托相匹配。

我有以下两个问题：

1.  我自己做了一些调试，发现如果 Lambda 表达式修改了局部变量的值（在使用 lambda 表达式的方法中定义），新值也会反映在表达式主体之外。考虑到表达式实际上在不同的类中，这怎么可能？

2.  当静态类可以完美地完成同样的事情时，为什么发出的类需要是非静态的？

我希望这不是一个我无法理解的非常简单的概念。

如果我需要提供更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:14:13.550

首先，几天前我有一个类似的问题。

[闭包捕获的变量也会修改原始变量](https://stackoverflow.com/questions/15275637/closure-captured-variable-modifies-the-original-as-well)

其次，将其设为静态类有什么意义？无论如何，只会创建一个对象，并且该对象不必在应用程序的整个生命周期中都存在。

`the new value is reflected outside the expression body too. How is this possible considering the expression is actually in a different class.`

问题是匿名方法以及匿名方法外部的局部变量都引用了同一个对象，因此无论您从哪里更改它都无关紧要，您更改的是相同的东西。

此外，蒂姆古德曼在我链接到的问题中提供的答案向您展示了如何通过在您的匿名方法中创建一个新对象来避免更改无处不在。

# trigonometry - 如何在 Z 坐标中转换深度

> ID：15405120
> 
> 赞同：0
> 
> 时间：2013-03-14T09:11:39.187
> 
> 标签：trigonometry, coordinate, kinect-sdk

我正在制作一个项目，我需要在 640*480 的矩形中绘制用户的脚，并且我将骨骼关节坐标映射到深度坐标以适合它在框中，

但是 DepthImagePoint 给出了 xy 坐标和深度（以 mm 为单位），但我想要 xz 坐标。如何让 z 坐标适合 640*480 的分辨率？

或者我可以以某种方式将骨骼关节坐标转换为合适的分辨率以适合盒子吗？

我正在使用带有 C# 的 Microsoft Kinect SDK。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:56:41.513

中有几个函数`CoordinateMapper`将映射不同数据流之间的点。 `MapSkeletonPontToDepthPoint`是第一个想到的。映射器中的其他人也可能有助于找到您正在寻找的正确深度映射。

[http://msdn.microsoft.com/en-us/library/jj883690.aspx](http://msdn.microsoft.com/en-us/library/jj883690.aspx)

# ruby - eventmachine安装中的custom_require.rb加载错误

> ID：15405121
> 
> 赞同：0
> 
> 时间：2013-03-14T09:11:39.500
> 
> 标签：ruby, rubygems, bundler, eventmachine

我的 gems 依赖项有问题：Gemfile 的内容是

```
source :gemcutter
gem "sinatra"
gem "koala"
gem "json", "1.5.5"
gem "httparty"
gem "thin"
gem "rack", "1.3.10" 
```

这个`bundle install`错误击中了我

```
$ sudo bundle install
The source :gemcutter is deprecated because HTTP requests are insecure.
Please change your source to 'https://rubygems.org' if possible, or 'http://rubygems.org' if not.
Fetching gem metadata from http://rubygems.org/.......
Fetching gem metadata from http://rubygems.org/..
Using addressable (2.2.7) 
Using crack (0.1.8) 
Using daemons (1.1.3) 
Installing eventmachine (0.12.10) 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb 
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:1:in `<main>'

Gem files will remain installed in /var/lib/gems/1.9.1/gems/eventmachine-0.12.10 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/eventmachine-0.12.10/ext/gem_make.out

An error occurred while installing eventmachine (0.12.10), and Bundler cannot continue.
Make sure that `gem install eventmachine -v '0.12.10'` succeeds before bundling. 
```

但是，我**确实**安装了 eventmachine！：

```
$ gem list

*** LOCAL GEMS ***

eventmachine (1.0.3, 1.0.0.rc.4, 0.12.10) 
```

救救我，你是我唯一的希望！谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:47:58.447

ruby 1.9.1 在 C 扩展上有一些问题。尝试检查您是否有`mkmf`：

```
locate mkmf 
```

或安装 ruby​​ 1.9.1 的开发版本：

```
sudo apt-get install ruby1.9.1-dev 
```

我建议使用 RVM 安装 rubies：[https ://rvm.io/](https://rvm.io/)

您也可以尝试更改 Gemfile 中的源

```
source 'https://rubygems.org' 
```

而不是 :gemcutter

# android - AndEngine - LoopEntityModifier 用于连续向前向后移动

> ID：15405127
> 
> 赞同：1
> 
> 时间：2013-03-14T09:12:03.353
> 
> 标签：android, andengine

我正在尝试为精灵放置一个 LoopEntityModifier 以连续向前向后移动

但这有些不对劲。

运动不顺畅。

我想我在重置循环时犯了错误。

我怎样才能使它顺利移动。

```
LoopEntityModifier looper = new LoopEntityModifier (

    new IEntityModifierListener(){
        public void onModifierStarted(
                IModifier<IEntity> pModifier, IEntity pItem) {
            // TODO Auto-generated method stub
            Log.d("Modifier","Modifier Started !!");
        }

        public void onModifierFinished(
                IModifier<IEntity> pModifier, IEntity pItem) {
            // TODO Auto-generated method stub

            Log.d("Modifier","Modifier Finished !!");

            pModifier.reset();
        }
    },

    1,

    new ILoopEntityModifierListener(){
        public void onLoopStarted(
                LoopModifier<IEntity> pLoopModifier, int pLoop,
                int pLoopCount) {
            // TODO Auto-generated method stub

            Log.d("Modifier","Loop Started !!");    
        }

        public void onLoopFinished(
                LoopModifier<IEntity> pLoopModifier, int pLoop,
                int pLoopCount) {
            // TODO Auto-generated method stub

            Log.d("Modifier","Loop Finished !!");
        }
    },
    new SequenceEntityModifier(
            //Forward
            new MoveXModifier(.5f,mNextSprite.getX(),mNextSprite.getX()+50),

            //Backward
            new MoveXModifier(.5f,mNextSprite.getX(),mNextSprite.getX()-50))
);

mNextSprite.registerEntityModifier(looper); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:21:24.373

您可以使用 MoveByModifier。它的工作很好。

```
new SequenceEntityModifier(
        new MoveByModifier(0.5f, 100, 0),
        new MoveByModifier(0.5f, -100, 0)
)); 
```

如果你不使用然后在你的代码中替换它

```
new SequenceEntityModifier(
            // Forward
            new MoveXModifier(.5f, mNextSprite.getX(),
            mNextSprite.getX() + 50),
            // Backward
            new MoveXModifier(.5f, mNextSprite.getX() + 50,
            mNextSprite.getX())

LoopEntityModifier looper = new LoopEntityModifier (

new IEntityModifierListener(){
    public void onModifierStarted(
            IModifier<IEntity> pModifier, IEntity pItem) {
        // TODO Auto-generated method stub
        Log.d("Modifier","Modifier Started !!");
    }

    public void onModifierFinished(
            IModifier<IEntity> pModifier, IEntity pItem) {
        // TODO Auto-generated method stub

        Log.d("Modifier","Modifier Finished !!");

        pModifier.reset();
    }
},

1,

new ILoopEntityModifierListener(){
    public void onLoopStarted(
            LoopModifier<IEntity> pLoopModifier, int pLoop,
            int pLoopCount) {
        // TODO Auto-generated method stub

        Log.d("Modifier","Loop Started !!");    
    }

    public void onLoopFinished(
            LoopModifier<IEntity> pLoopModifier, int pLoop,
            int pLoopCount) {
        // TODO Auto-generated method stub

        Log.d("Modifier","Loop Finished !!");
    }
},
new SequenceEntityModifier(
            // Forward
            new MoveXModifier(.5f, mNextSprite.getX(),
            mNextSprite.getX() + 50),
            // Backward
            new MoveXModifier(.5f, mNextSprite.getX() + 50,
            mNextSprite.getX())
);

mNextSprite.registerEntityModifier(looper); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:36:26.357

感谢 Divyang Metalia 的回答，我想出了以下两种方法来为精灵的连续来回运动设置动画。它使用`SequenceEntityModifier`并在完成时简单地重置它。要停止动画，该方法会`stopAnimation()`清除所有修改器并重置精灵位置：

```
public void startAnimation() {
    this.from = this.getX();       // just an example start point (global)
    float to = from +100 ;         // example end point for the animation

    MoveXModifier rightMovement = new MoveXModifier(0.5f, from, to);
    MoveXModifier leftMovement = new MoveXModifier(0.5f, to, from);

    SequenceEntityModifier sequenceEntityModifier = new SequenceEntityModifier(rightMovement, leftMovement) {
        @Override
        protected void onModifierFinished(IEntity pItem) {
            super.reset();
        }
    };
    sequenceEntityModifier.setAutoUnregisterWhenFinished(false);
    this.registerEntityModifier(sequenceEntityModifier);
}

public void stopAnimation() {
    this.clearEntityModifiers();
    this.setX(from);
} 
```

澄清：这些方法是`Sprite`扩展类的一部分。

# matlab - 估计图像去模糊/去噪技术

> ID：15405128
> 
> 赞同：1
> 
> 时间：2013-03-14T09:12:06.533
> 
> 标签：matlab, image-processing, noise, blurry

我是图像处理的新手，想使用**Matlab**对一些图像进行去模糊/去噪。例子：

输入

![在此处输入图像描述](../Images/2d3d6e3fb9cd612a116f10b043deb6e3.png)

输出

![在此处输入图像描述](../Images/a3de517ebdc0a743ecbcd6f02d7c9248.png)

我不知道第二张图像产生的确切模糊/噪点效果。起初，我通常通过[Wiener 反卷积](http://www.mathworks.com/help/images/ref/deconvwnr.html)方法的反复试验来做到这一点，但无法达到最佳结果。

**所以我的问题是，除了反复试验，还有更聪明的方法吗？**

（注：输出图像来自Robot36无线传输解码器。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T17:21:59.717

我建议尝试 Richardson-Lucy 去模糊算法。它在图像处理工具箱中作为内置函数提供。它利用多次迭代，您可以设置这些迭代来控制您希望图像去模糊的程度。我一直觉得这是一个非常有用的方法。这是文档链接：[deconvlucy](http://www.mathworks.com/help/images/ref/deconvlucy.html)

# ios - 在 Objective-C 中使用带有或不带有后缀 .f 的 CGFloat 是否存在性能差异

> ID：15405129
> 
> 赞同：5
> 
> 时间：2013-03-14T09:12:07.230
> 
> 标签：ios, objective-c, performance, cgfloat

我是否应该使用后缀编写 CGFloat 值`f`？

```
CGFloat fValue = 1.2; 
```

对比

```
CGFloat fValue = 1.2f; 
```

我知道这个后缀定义了一个浮点值。但是是否有必要，是否有意义，使用这两者之间是否有任何性能差异，或者这只是视觉呈现，以便您可以快速定义值类型（例如，在这种情况下为浮点数）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:14:21.367

1.2 是一个`double`；即64位双精度浮点数。

1.2f 是一个`float`；即32位单精度浮点数。

就性能而言，这并不重要，因为编译器会根据需要将文字从`float`to转换`double`为`double`to `float`。但是，在从函数中分配浮点数时，您很可能需要进行强制转换以避免编译器警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:46:30.083

基本区别如下：

1.0 或 1\. 是双常数

1.0f 是一个浮点常数

如果没有后缀，其中包含小数的文字 (123.0) 将被视为双精度浮点数。

**如果您将其分配或传递给单精度变量或参数，编译器将（应该）发出警告。**附加`f`告诉编译器您希望将文字视为单精度浮点数。

# python - 如何为基于文本的交互式程序编写测试？

> ID：15405134
> 
> 赞同：1
> 
> 时间：2013-03-14T09:12:20.137
> 
> 标签：python, unit-testing, io, stdin

我正在尝试`unittest`为一个简单的 Python 程序编写一个测试（使用）。它是一个交互式程序，特别是基于文本的游戏，目前基本上是 Zuul 世界到 Python 的一个端口。

所以现在我想做一个好的测试驱动开发并编写一个测试并确保当用户输入命令 x 时，y 结果发生。示例：当用户输入“退出”时，我希望程序结束。我想确保这种行为。唯一的问题是，如果不将输入实际输入到 shell 中，我似乎想不出一种方法来给我自己的程序输入，所以我想不出如何为此编写测试。

目前，我已经将该程序嵌入到它自己的线程中......我在想这将允许我异步地给它输入，但我仍然不明白如何做到这一点。

有没有办法以编程方式和动态地给我自己的程序输入？... 喜欢，使用`stdin`还是什么？如果是这样，我会彻底困惑，并希望举个例子。

最后，如果我在这里走错了路，请告诉我，因为我对 Python 和测试驱动开发都是新手，我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:27:12.240

如果您像这样设置代码，您可以设置运行程序的 main 函数并读取用户将从文件（或字符串）提供的输入的测试：

```
def main(inp):
    # play game

if __name__ == '__main__':
    main(sys.stdin) 
```

然后测试涉及设置输入流（可能是 a `StringIO`），将其馈送到`main`，并监视输出。如果您认为程序可能会挂起，您可以在单独的线程中运行它并给它一个超时。

如果你想变得花哨，你甚至可以使用 a[`pty`](http://docs.python.org/2/library/pty.html)来模拟终端输入。

# android - 当服务器连接丢失时，如何自行停止和重新启动客户端的服务？

> ID：15405143
> 
> 赞同：1
> 
> 时间：2013-03-14T09:12:37.123
> 
> 标签：android, sockets, service, tcpclient

这是我的代码的[链接。](https://stackoverflow.com/questions/14985678/how-to-keep-the-android-client-connected-to-the-server-even-on-activity-changes)在服务上启动一个创建的套接字，它将数据从 android 客户端发送到服务器。此服务在销毁时停止。

但我注意到，如果我的客户端失去与服务器的连接，我无法知道它，更糟糕的是我无法重新连接到服务器。

我认为最好的方法是接收客户端发送到服务器的命令的回显，如果服务器没有回复，则了解连接丢失。在知道连接丢失后，我需要自行停止服务并重新启动它。我不知道该怎么做。完成此操作后，我需要重新绑定到活动。

另一种方式是客户端套接字应该为每一个发送的数据打开和关闭。这样它会自动重新连接到服务器。我也不知道该怎么做。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:13:39.250

我已经修改了我的代码以实现问题中建议的第二个解决方案。我现在没有在 startservice() 上创建套接字，而是在每次客户端想要发送数据时创建并关闭它。这样我就不必在连接丢失时停止我的服务。我修改为无限期监听端口的服务器端，除非客户端指示跳出循环并断开连接。

```
public void sendMessage(String message){
      //making message variable global to the SocketSevice class
      this.message=message;

      //connecting to class that performs socket connection
      Runnable connect = new connectSocket();
      new Thread(connect).start();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:39:21.283

当您想重新启动服务时，只需向您的一项活动发送一条广播消息。在接收到您的广播消息时，编写一段代码来启动您的广播接收器所定义的活动的服务。（杀死服务类内部或广播接收器类的服务）

# max - C# 中 Byte[] 的 MinValue 是多少

> ID：15405144
> 
> 赞同：1
> 
> 时间：2013-03-14T09:12:41.563
> 
> 标签：max, varbinary

我们将 DateTime 的 MinValue 表示为 DateTime.MinValue 但它如何表示为 Byte[]？

当我给出以下内容时，

```
DALImage.TwinImage = Convert.IsDBNull(reader["TwinImage"]) ? 
    Byte[].MinValue : 
    (Byte[])reader["TwinImage"]; 
```

1.  我收到错误，因为“字节”是一种类型，但像变量一样使用
2.  预期语法错误值（在 Byte[] 的 '[]' 部分中）

请帮助作为 C# 编程的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:17:11.430

字节数组没有最小值——它作为一个概念没有意义。这就像问“购物清单的最小值是多少”。

我认为您要做的是获取一个**空**的Byte 数组。

```
DALImage.TwinImage = Convert.IsDBNull(reader["TwinImage"]) ? 
    new Byte[0] : 
    (Byte[])reader["TwinImage"]; 
```

**编辑**：您的评论表明您真正想要的是一个包含 1 个元素的字节数组，其中该元素是一个字节的最小值。

那将是以下代码：

```
DALImage.TwinImage = Convert.IsDBNull(reader["TwinImage"]) ? 
    new Byte[1] { Byte.MinValue } : 
    (Byte[])reader["TwinImage"]; 
```

但是，这也可以使用[default](http://msdn.microsoft.com/en-gb/library/83fhsxwc%28v=vs.110%29.aspx)来编写，这在语义上可能更清晰。

```
DALImage.TwinImage = Convert.IsDBNull(reader["TwinImage"]) ? 
    new Byte[1] { default(Byte) } : 
    (Byte[])reader["TwinImage"]; 
```

# php - 脸书 API。删除帖子或评论

> ID：15405145
> 
> 赞同：0
> 
> 时间：2013-03-14T09:12:41.757
> 
> 标签：php, api, facebook-graph-api

是否可以删除自己的帖子或未从应用程序发布的评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:14:56.217

在 Facebook API 中，您不能删除应用程序未发布的评论/帖子/喜欢。

它是一个很好的安全功能。图像应用程序获得您的授权并删除您的所有帖子/评论。在当今世界，这可能意味着您已从虚拟世界中消失。:P

# c# - 检查数组的当前值，C#

> ID：15405146
> 
> 赞同：0
> 
> 时间：2013-03-14T09:12:42.130
> 
> 标签：c#

我创建了一个预定义长度为 2 的数组。我有一种方法可以将项目添加到数组中。

它的代码是：

```
 public void addItem(T item)
 {
   Array.Resize(ref items, items.Count() + 2);
   items[items.Count() - 2] = item;
 } 
```

现在，我想做的是它首先要检查数组大小，看看数组是否满了。如果数组已满，它应该是数组大小的两倍。如果它没有满，那么它不应该什么都不做。所以，我想知道是否可以使用 if 语句来实现这一点？

编辑：我正在写一个集合类，这就是为什么我需要检查数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:15:55.933

您应该真正熟悉[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)默认情况下已经使用此功能的内容：

[`List.Add`](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)例如调用`EnsureCapacity`：

```
private void EnsureCapacity(int min)
{
    if (this._items.Length < min)
    {
        int num = (this._items.Length == 0) ? 4 : (this._items.Length * 2);
        if (num < min)
        {
            num = min;
        }
        this.Capacity = num;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:37:07.833

你应该知道，如果你不自己做作业，你什么也学不到

但尝试这样的事情：

if count > size -2 than resize: size*2 else //什么也不做

也许您可以添加一个功能，例如： if count < size / 4 而不是将条目移到前面并调整大小： size/2 else //nothing

希望这个建议对你有用

# ruby-on-rails - 获取数组并转换为哈希 Ruby

> ID：15405148
> 
> 赞同：1
> 
> 时间：2013-03-14T09:12:51.350
> 
> 标签：ruby-on-rails, ruby, arrays, hash, nokogiri

我是第一次尝试这个，我不确定我是否已经完全实现了我想要的。我通过屏幕抓取将数据作为数组提取，并希望将它们放入哈希中。

我有一个带有 :home_team 和 :away_team 列的模型，并且想将通过屏幕抓取捕获的数据发布到这些

我希望有人可以在 rb 文件中快速运行它

```
require 'open-uri'
require 'nokogiri'

FIXTURE_URL = "http://www.bbc.co.uk/sport/football/premier-league/fixtures"

doc = Nokogiri::HTML(open(FIXTURE_URL))
home_team = doc.css(".team-home.teams").map {|team| team.text.strip}
away_team = doc.css(".team-away.teams").map {|team| team.text.strip}
team_clean = Hash[:home_team => home_team, :away_team => away_team]
puts team_clean.inspect 
```

并建议这是否实际上是一个哈希，因为它似乎是一个数组，因为我看不到正在输出的哈希名称。我会期待这样的事情

```
{"team_clean"=>[{:home_team => "Man Utd", "Chelsea", "Liverpool"}, 
          {:away_team => "Swansea", "Cardiff"}]} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:30:45.743

你实际上得到了一个哈希值。但它看起来和你想象的不一样。您期望哈希中的哈希。

一些例子来澄清：

```
hash = {}
hash.class
 => Hash 

hash = { home_team: [], away_team: [] }
hash.class
=> Hash
hash[:home_team].class
=> Array

hash = { hash: { home_team: [], away_team: [] } }  
hash.class
=> Hash
hash[:hash].class
=> Hash
hash[:hash][:home_team].class
=> Array 
```

您所说的“哈希名称”永远不会“输出”。哈希基本上是具有不同索引的数组。为了澄清这一点：

```
hash = { 0 => "A", 1 => "B" }
array = ["A", "B"]
hash[0]
=> "A"
array[0]
=> "A"
hash[1]
=> "B"
array[1]
=> "B" 
```

基本上，您还可以使用 Hash 来定义如何以及在何处通过显式定义键来查找值，而数组始终使用数字索引存储它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:32:29.860

这是解决方案

```
team_clean = Hash[:team_clean => [Hash[:home_team => home_team,:away_team => away_team]]] 
```

# c - “#define GOT_HERE() ((void)(__LINE__))”的含义？

> ID：15405150
> 
> 赞同：0
> 
> 时间：2013-03-14T09:12:57.497
> 
> 标签：c, macros

我在使用开源库时在 .c 文件中发现了它。

```
#define GOT_HERE() ((void)(__LINE__)) 
```

这是什么意思？在 .c 文件的其余部分中，宏的使用方式如下：

```
GOT_HERE(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:15:54.037

它是一个扩展扩展的宏，该宏`__LINE__`又扩展为将语句`GOT_HERE();` 放置在代码中的行号。

`__LINE__`是一个[预定义的宏](http://msdn.microsoft.com/en-gb/library/b0084kay%28v=vs.71%29.aspx)，其中有不少。这对于调试目的很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:16:16.153

它会给你行号，从哪里调用它......它可以被定义用于诊断目的......取决于你的实现

# google-app-engine - Google App Engine PDF 转换器

> ID：15405152
> 
> 赞同：14
> 
> 时间：2013-03-14T09:13:02.053
> 
> 标签：google-app-engine, pdf, pdf-generation, html-to-pdf

我正在寻找一个**好的**、**开源**的、PDF 生成器/库，它将 html（带有样式等）转换为 PDF 文件。

要求：

*   必须是 Java 或 Python 并在 Google App Engine 上运行。
*   必须是免费的、开源的。
*   必须易于使用/消费。

是的，我自己尝试过搜索 - 我尝试了许多在 Google 等上找到的“解决方案”。但没有一个能让我满意。许多看起来不完整、有缺陷或在 GAE 上不能很好地工作。所以我想我会向 StackOverflow 社区寻求意见或建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-21T19:05:30.093

对于 HTML/图像到 PDF，我使用 Python 库[http://www.xhtml2pdf.com/](http://www.xhtml2pdf.com/)，它使用在 GAE 上运行的 Pisa、Reportlab、pyPdf 和 html5lib。我一直在使用它来生成带有嵌入图像的非常好的文章 PDF，一旦我弄清楚如何正确设置页面大小，我发现这是一个非常好的库。

您将需要 xhtml2pdf 库及其依赖项： [https ://github.com/chrisglass/xhtml2pdf](https://github.com/chrisglass/xhtml2pdf)

我将一些示例 Python 代码放在一起并将其放入此 pastebin： http: [//pastebin.com/FFEZjNs3](http://pastebin.com/FFEZjNs3)

最后得到的 pdf_data 是二进制 PDF 文件数据。您提供给 pisa 的 html_data 实际上是包含 HTML 文档的任何字符串。

有一些推荐的东西包含在你的 HTML 中，以获得格式良好的 PDF 输出。这是一个类似于我使用的基本模板的示例 HTML 文档。注意作者元字段和@page CSS： [http ://pastebin.com/q1wRm9nJ](http://pastebin.com/q1wRm9nJ)

以下是有关兼容 CSS 和 HTML 的文档： [https ://github.com/chrisglass/xhtml2pdf/blob/master/doc/usage.rst#supported-css-properties](https://github.com/chrisglass/xhtml2pdf/blob/master/doc/usage.rst#supported-css-properties)

您可以使用外部图像的 URL 包含图像，也可以使用 dataUri，xhtml2pdf 具有创建这些“pisa.makeDataURI()”的功能。

希望这会有所帮助。

# php - php yii ctreeview

> ID：15405153
> 
> 赞同：2
> 
> 时间：2013-03-14T09:13:12.547
> 
> 标签：php, yii, treeview, expand, collapse

我正在使用**yii ctreeview**扩展，我无法通过节点单击来展开/折叠节点 - 只能使用 +/-。有谁知道出了什么问题？

```
<div id="treeview">
    <?php $this->widget('ext.CTreeView_M',
        array(
            'data'=>$data,
            'animated'=>'fast',
            'collapsed'=>false,
            'htmlOptions'=>array('class'=>'treeview-famfamfam'),

            )); 
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T07:13:37.170

您可以使用默认`CTreeView`小部件来显示分层数据的树视图。

例如：

```
$data = array(
    'text'=>$text, 
    'expanded'=>TRUE, 
    'id'=>$id,
);
$this->widget('CTreeView', 
    array(
        'data' => $data,
        'persist'=>'cookie'
    )
); 
```

# c# - 在 WinForms C# 应用程序中显示 IP cam 提要

> ID：15405156
> 
> 赞同：1
> 
> 时间：2013-03-14T09:13:19.870
> 
> 标签：c#, webbrowser-control, ip-camera

我正在尝试在我的 C# WinForms 应用程序中显示来自 IP cam 的视频。我只需要显示视频，而不是相机菜单等。我正在考虑使用 WebBrowser 控件并以某种方式更改参数。如果您对此方法或任何其他方法有任何建议，请提供帮助。我不知道从哪里开始。这是默认的 IP cam 页面：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<title>IP CAMERA</title>
<link href="style/css.css" rel="stylesheet" type="text/css">
<SCRIPT language="JavaScript" src="js/localization.js"></SCRIPT>
<SCRIPT language="JavaScript" src="js/commfunc.js"></SCRIPT>
<SCRIPT language="JavaScript" src="js/axobjdef.js"></SCRIPT>
<script language="JavaScript" src="js/slider.js"></script>
<SCRIPT language="JavaScript" src="js/vlc.js"></SCRIPT>
<SCRIPT language="Javascript" src="js/plugin_detect.js"></SCRIPT>

<style type="text/css">

.statusBarL{
background-image:url("./style/image/vlc/img_Liveview_L.png");
background-repeat:no-repeat;
height:25px;
width:7px;
}

.statusBarM{
background-image:url("./style/image/vlc/img_Liveview_M.png");
background-repeat: repeat-x;
height:25px;
overflow:hidden;
}

.statusBarR{
background-image:url("./style/image/vlc/img_Liveview_R.png");
background-repeat:no-repeat;
height:25px;
width:7px;
}

.live_btn{
display:block;
float:left;
}

</style>

<script type="text/JavaScript">
<!--
var PLUGIN_LANG=0;
//var INITMODE = "Player";
var VIEW_SIZE = getViewSize();
var PROTOCOL_TYPE=getProtocol();
var INITMODE = "none";
var CAPTEXT = "Live View";
var STATUSBAR = 1;
var TOOLBAR = 1;
var CONTEXTMENU = 0;
var AUTOSTART=1;
var TOOLBARCONF = "stream+rec+mic+zoom+time";
var CheckMac = (navigator.platform.toLowerCase().indexOf("mac") < 0) ? false : true;

GetDeviceInfo_A('view','General.Network.RTSP.Enabled&group=General.Network.RTP.R0.Multicast');
var RTSPEnabled = GetQueryVariable('General.Network.RTSP.Enabled');
var TypeIndex = getCookies("TypeIdx");

if(TypeIndex == null)
{
  if(getOs().indexOf("IE") >= 0)
  {
    TypeIndex = "ocx";
  }else{
    if(CheckMac)
    {
      TypeIndex = "quicktime";
    }else{
      TypeIndex = "vlc";
    }
  }
}

GetDeviceInfo_A('view','Image');
switch(getVideoFmt())
{
    default:
      case '1':
        CHANNEL = 1;
        break;
    case '2':
        if(RTSPEnabled == "1")
        {
          CHANNEL = 1;
          setVideoFmt(1);
        }else{
          CHANNEL = 2;
        }
        break;
}

if(CheckMac && TypeIndex != "jpg")
{
  TypeIndex = "quicktime";
}

function mouseOver(index)
{
  if(index=="Liveview_Play" || index=="Liveview_Sound" ||
     index=="Liveview_Talk" || index=="Liveview_Record")
  {
    EID(index).src = eval("'./style/image/vlc/btn_Liveview_"+EID(index).title+"_h.png'");
  }else{
    EID(index).src = eval("'./style/image/vlc/btn_"+index+"_h.png'");
  }
}

function mouseOut(index)
{
  if(index=="Liveview_Play" || index=="Liveview_Sound" ||
     index=="Liveview_Talk" || index=="Liveview_Record")
  {
    EID(index).src = eval("'./style/image/vlc/btn_Liveview_"+EID(index).title+"_e.png'");
  }else{
    EID(index).src = eval("'./style/image/vlc/btn_"+index+"_e.png'");
  }
}

function mouseDown(index)
{
  if(index=="Liveview_Play" || index=="Liveview_Sound" ||
     index=="Liveview_Talk" || index=="Liveview_Record")
  {
    EID(index).src = eval("'./style/image/vlc/btn_Liveview_"+EID(index).title+"_p.png'");
  }else{
    EID(index).src = eval("'./style/image/vlc/btn_"+index+"_p.png'");
  }
}

function mouseUp(index)
{
  switch(index)
  {
    case 'Play':
      EID("Liveview_Play").title = "Pause";
      mouseOver("Liveview_Play");
      break;
    case 'Pause':
      EID("Liveview_Play").title = "Play";
      mouseOver("Liveview_Play");
      break;
    case 'Stop':
      mouseOver("Liveview_Stop");
      EID("Liveview_Play").title = "Play";
      mouseOut("Liveview_Play");
      break;
    case 'Sound':
      EID("Liveview_Sound").title = "SoundMute";
      mouseOver("Liveview_Sound");
      break;
    case 'SoundMute':
      EID("Liveview_Sound").title = "Sound";
      mouseOver("Liveview_Sound");
      break;
    case 'Talk':
      EID("Liveview_Talk").title = "TalkMute";
      break;
    case 'TalkMute':
      EID("Liveview_Talk").title = "Talk";
      break;
    default:
  }
}

function changeVolume(value)
{
    if(value != 0 && EID("Liveview_Sound").title != "Sound")
    {
      EID("Liveview_Sound").title = "Sound";
      VLC_DoAct("Sound");
      mouseOut("Liveview_Sound");

    }
    A_SLIDERS[0].f_setValue(value);
    VLC_DoUpdateVolume(value);
}

var VLC_Version = PluginDetect.getVersion("vlc");
var VLC_Polling_Timer = null;

function onLoad()
{
  if( TypeIndex == "vlc" && navigator.platform.toLowerCase().indexOf("mac") < 0 )
  {
    if(VLC_Version != null)
    {
      EShow("vlc_control","");
      var i=0;
      while(EID("statusBor"+i))
      {
        EID("statusBor"+i).style.borderRight = "1px solid #000";
        i++;
      }
      EShow("table1","");
      EShow("table2","none");
      VLC_Polling_Timer = setTimeout("CheckVlcPlaying()",5000);
    }else{
      EShow("table1","none");
      EShow("table2","");
    }
  }else{
    EShow("table1","");
    EShow("table2","none");
    if( TypeIndex == "ocx")
    {
      AxMediaControl.Play(1);          
    } 
  }
}

function CheckVlcPlaying()
{
  if(VLC_Polling_Timer != null)
  {
    clearTimeout(VLC_Polling_Timer);
  }

  var vlc = getVLC("vlc");
  if( vlc )
  {
    if(VLC_Pause_Flag == false && EID("Liveview_Play").title == "Pause")
    {
      if(!vlc.playlist.isPlaying)
      {
        window.location.reload(true);
      }
    }
  }

  VLC_Polling_Timer = setTimeout("CheckVlcPlaying()",5000);
}

function onUnload()
{
  if(TypeIndex == "ocx")
  {
    onAxobjUnload();
  }else if(TypeIndex == "vlc"){
    if(VLC_Version != null)
    {
      VLC_DoStop();
    }
  }
}

//-->
</script>
</head>
<body leftmargin="0" topmargin="0" onLoad="onLoad()" onUnload="onUnload()">

<table id="table1" width="640" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td>&nbsp;

    </td>
  </tr>
  <tr>
    <td height="450">&nbsp;</td>
    <td align="center" valign="top">
  <script type="text/JavaScript">
  <!--
  GetDeviceInfo_A('view','Image');

  var Codec;
  if(CHANNEL == 3) CHANNEL = 1;
  switch(CHANNEL)
  {
    default:
    case 1:
      Codec = "MPEG4";
      break;
    case 2:
      Codec = "MJPEG";
      break;
  }

  var VideoPath;
  if(Codec == "MPEG4")
  {
    VideoPath = "video.mp4";
  }else if(Codec == "MJPEG"){
    VideoPath = "video.mjpg";
  }

  if(CheckMac)  
  {
    if(TypeIndex == "quicktime")
    {
      var normalSize = VIEW_SIZE;

      if(normalSize == null)
      {
          normalSize = "Medium";
          setViewSize(normalSize);
      }

      if(normalSize == "Medium")
      {
          normalSize = "320x240";
      }else if(normalSize == "Large"){
          normalSize = "640x480";
      }

      if(normalSize.indexOf("x")>=0)
      {
        resolutionW=normalSize.slice(0,normalSize.indexOf("x"));
        resolutionH=normalSize.slice(normalSize.indexOf("x")+1,normalSize.length);
      }

      document.open();
            document.write("<embed SCALE=\"ToFit\" width=\"" + resolutionW + "\" height=\"" + resolutionH + "\"" +
                           " type=\"video/quicktime\" qtsrc=\"rtsp://" + location.hostname + "/" + VideoPath + "\"" +
                           " qtsrcdontusebrowser src=\"quicktime.mov\" autoplay=\"true\" controller=\"true\"\>");
      document.close();

      }else{
        CHANNEL = 3;
        Viewer();
      }
    }else{
      if(TypeIndex != "vlc")
      {
        if(TypeIndex == "jpg")
        {
          CHANNEL = 3;
        }
        Viewer();
      }else{
        if(VLC_Version != null)
        {
          VLC_Viewer(VideoPath);
        }
      }
    }  
    //-->
      </script>
      <br>
    <script FOR="AxMediaControl" EVENT="OnConnectStateNotify(id, msg)">
        if(navigator.appName.toLowerCase().indexOf("microsoft internet explorer") >= 0)
        {
          if(msg=="video lost")
          {
            window.top.leftFrame.location.reload();
            window.top.mainFrame.location.reload();
      }
      else if(msg=="full connect")
          {
            alert(loadLangString("L_Warn_FullConnection",false));
      }
      else if(msg=="mic occupy")
          {
            alert(loadLangString("L_MicOccupy",false));
      }
      }
        </script>
    </div>
    </td>
  </tr>
<tr style="height:10px;"></tr>
<tr id="vlc_control" style="display:none;">
  <td></td>

  <td align="center">
    <table cellSpacing="0" cellPadding="0" border="0" bordercolor="#000" style="table-layout:fixed;">
      <tr id="statusBar">
        <td class="statusBarL"></td>
        <td id="statusBor0" class="statusBarM" style="width:80px;">
          <div class="live_btn" style="padding:2px 7px 0px 7px;" id="statusBar0">
            <img id="Liveview_Play" src="./style/image/vlc/btn_Liveview_Pause_e.png" title="Pause"
                 style="cursor:pointer"
                 onMouseOver="mouseOver(this.id)"
                 onMouseOut="mouseOut(this.id)"
                 onMouseDown="mouseDown(this.id)"
                 onMouseUp="mouseUp(this.title)"
                 onClick="VLC_DoAct(this.title)">
          </div>
          <div class="live_btn" style="padding:2px 14px 0px 7px;" id="statusBar1">
            <img id="Liveview_Stop" src="./style/image/vlc/btn_Liveview_Stop_e.png" title="Stop"
                 style="cursor:pointer"
                 onMouseOver="mouseOver(this.id)"
                 onMouseOut="mouseOut(this.id)"
                 onMouseDown="mouseDown(this.id)"
                 onMouseUp="mouseUp(this.title)"
                 onClick="VLC_DoAct(this.title)">
          </div>
        </td>

        <td id="statusBor1" class="statusBarM" style="width:43px;"> <!-- 87 -->
    <!--
          <div class="live_btn" style="padding:2px 7px 0px 14px;" id="statusBar2">
            <img id="Liveview_Record" src="./style/image/vlc/btn_Liveview_Record_e.png" title="Record"
                 style="cursor:pointer"
                 onMouseOver="mouseOver(this.id)"
                 onMouseOut="mouseOut(this.id)"
                 onMouseDown="mouseDown(this.id)"
                 onMouseUp="mouseOver(this.id)"
                 onClick="VLC_DoAct(this.title)">
          </div>
    -->
          <div class="live_btn" style="padding:2px 14px 0px 14px;" id="statusBar3"> <!-- 2 14 0 7 -->
            <img id="Liveview_Snapshot" src="./style/image/vlc/btn_Liveview_Snapshot_e.png" title="Snapshot"
                 style="cursor:pointer"
                 onMouseOver="mouseOver(this.id)"
                 onMouseOut="mouseOut(this.id)"
                 onMouseDown="mouseDown(this.id)"
                 onMouseUp="mouseOver(this.id)"
                 onClick="VLC_DoAct(this.title)">
          </div>
        </td>

        <form name="form1">
        <td class="statusBarM" style="width:150px;"> <!-- 234 -->
          <div class="live_btn" style="padding:1px 0px 0px 14px;" id="statusBar5"> <!-- 1 7 0 14 -->
            <img id="Liveview_Sound" src="./style/image/vlc/btn_Liveview_Sound_e.png" title="Sound"
                 style="cursor:pointer;"
                 onMouseOver="mouseOver(this.id)"
                 onMouseOut="mouseOut(this.id)"
                 onMouseDown="mouseDown(this.id)"
                 onMouseUp="mouseUp(this.title)"
                 onClick="VLC_DoAct(this.title)">
          </div>

          <div id="soundSlider" class="divStyle" style="padding-top:5px;margin-left:40px;">
          <script style="text/javascript">    
          <!--
              var A_TPL1h = {
                    'b_vertical' : false,'b_watch': true,'n_controlWidth': 105,'n_controlHeight': 10,
                    'n_sliderWidth': 5,'n_sliderHeight': 12,'n_pathLeft' : 0,'n_pathTop' : 1,'n_pathLength' : 100,
                    's_imgControl': 'style/image/blueh_bg.gif','s_imgSlider': 'style/image/blueh_sl.gif','s_imgAlt': '','n_zIndex': 1
                }
                var A_INIT1h = {
                    's_form' : 0,'s_name': 'sliderValue1h','n_minValue' : 0,'n_maxValue' : 100,'n_value' : 30,'n_step' : 1
                }
                new slider(A_INIT1h, A_TPL1h, changeVolume);
            //-->
            </script>
            <input type="hidden" name="soundSlider" id="sliderValue1h" size="2" readonly>
            </div>

          <!--
          <div class="live_btn" style="padding:1px 7px 0px 14px;" id="statusBar6">
            <img id="Liveview_Talk" src="./style/image/vlc/btn_Liveview_TalkMute_e.png" title="TalkMute"
                 style="cursor:pointer"
                 onMouseOver="mouseOver(this.id)"
                 onMouseOut="mouseOut(this.id)"
                 onMouseDown="mouseDown(this.id)"
                 onMouseUp="mouseUp(this.title)"
                 onClick="VLC_DoAct(this.title)">
          </div>
          <div id="talkSlider" class="divStyle" style=""></div>
          -->
        </td>
        </form>
        <!--
        <td class="statusBarM" style="width:44px">
          <div class="live_btn" style="padding:2px 7px 0px 14px;" id="statusBar7">
            <img id="Liveview_Fullscreen"
                 src="./style/image/vlc/btn_Liveview_Fullscreen_e.png" title="Fullscreen"
                 style="cursor:pointer"
                 onMouseOver="mouseOver(this.id)"
                 onMouseOut="mouseOut(this.id)"
                 onMouseDown="mouseDown(this.id)"
                 onMouseUp="mouseOver(this.id)"
                 onClick="VLC_DoAct(this.title)">
          </div>
        </td>
        -->
        <td class="statusBarR"></td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<table id="table2" style="display:none;" height="100%" border="0" cellpadding="0" cellspacing="0" align="center">
  <tr>
    <td>
      <u><a id="vlc_plugin_help" href="./vlc_help.htm" target="blank" style="color:#00000;">Install VLC plugin to watch streaming.</a></u>  
    </td>
  </tr>
</table>
</body>
<script type="text/JavaScript">
<!--
StyleCustomize("main");
//-->
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T09:25:50.003

这是我朋友的 .NET 3.5 解决方案。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading;
using System.Windows.Forms;
using System.IO;

namespace kamera
{
    public partial class Form1 : Form
    {

        //private static String imageUrl = "http://10.10.10.1/now.jpg";
        private static String imageUrl=null;
        private static Thread t ;  
        private static Image webImage;
        private static List<String> kamere;
        System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
        private static int intervalOsvezevanja=3000; //3 sekunde osveževanja
        public Form1()
        {
            InitializeComponent();
            ////timer k pokliče funkcijo vsake 3 sekunde
            //AutoResetEvent autoEvent = new AutoResetEvent(false);
            //TimerCallback tcb = updatePicture;
            //System.Threading.Timer stateTimer = new System.Threading.Timer(tcb, autoEvent, 0, 200);

            t = new Thread(updatePicture);
            t.IsBackground = true;
            t.Start();

            timer.Tick += new EventHandler(timer_Tick); // Everytime timer ticks, timer_Tick will be called
            timer.Interval = (intervalOsvezevanja) ;             // Timer will tick every 0.05 seconds
            timer.Enabled = true;                       // Enable the timer
            timer.Start();                              // Start the timer

            //skrijemo formo za dodajanje kamer
            panelDodajKamero.Hide();

            //inicializacija
            kamere = new List<String>();
            tbNaslovKamere.Text =  "cam-kk-";
            preberiDatoteko();
        }

        void timer_Tick(object sender, EventArgs e)
        {
            pictureBox1.Image = webImage;
        }

        ~Form1() {
            //t.Join();
            t.Abort();
            timer.Stop();
            timer.Dispose();
        }

        private void updatePicture(object stateInfo)
        {
            while (true)
            {
                if (imageUrl != null)
                {
                    try
                    {
                        WebRequest requestPic = WebRequest.Create(imageUrl);
                        WebResponse responsePic = requestPic.GetResponse();
                        webImage = Image.FromStream(responsePic.GetResponseStream());
                        //webImage.Save("C:\\Users\\Public\\kamera\\kamera" + fileName + ".jpg");
                    }
                    catch{}
                }
                Thread.Sleep(intervalOsvezevanja);
            }
        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {
            if (menuStrip1.Visible)
            {
                menuStrip1.Hide();
            }
            else
            {
                menuStrip1.Show();
            }
        }

        private void menjajKamero(String camAddr)
        {
            if (camAddr.Contains("http"))
            {
                imageUrl = camAddr;
            }
            else
            {
                imageUrl = "http://" + camAddr + "/now.jpg"; //link to http://10.10.10.1now.jpg camera live image.
            }
        }

        private void btDodajKamero_Click(object sender, EventArgs e)
        {
            String webAddres;
            if (tbNaslovKamere.Text.Contains("http"))
            {
                webAddres = tbNaslovKamere.Text;
            }
            else
            {
                webAddres = "http://" + tbNaslovKamere.Text + "/now.jpg";
            }
            if (RemoteFileExists(webAddres))
            {
                if (!kamere.Contains(tbNaslovKamere.Text) && !kamere.Contains(webAddres))
                {
                    kamere.Add(tbNaslovKamere.Text);
                    //kamere.Add(webAddres);
                }
                menjajKamero(tbNaslovKamere.Text);
                //menjajKamero(webAddres);
                panelDodajKamero.Hide();
                izpisKamer();
                tbNaslovKamere.Text = "cam-kk-";
            }
            else
            {
                MessageBox.Show("Ne najdem Kamere");
            }
        }

        private void dodajKameroToolStripMenuItem_Click(object sender, EventArgs e)
        {
            panelDodajKamero.Show();
        }

        private void izpisKamer()
        {
            //zanka ki odstrani vse prej dodane kamere
            textBox1.Text = kamereToolStripMenuItem.DropDownItems.Count.ToString();

            foreach (String kamera in kamere)
            {
                kamereToolStripMenuItem.DropDownItems.RemoveByKey(kamera);
            }

            System.IO.StreamWriter file = new System.IO.StreamWriter(System.Environment.CurrentDirectory + "\\kamere.txt");
            foreach (String kamera in kamere)
            {
                ToolStripDropDownButton btTemp = new ToolStripDropDownButton(kamera, null, kameraOnClick, kamera);
                file.WriteLine(kamera);

                //dodamo trenutno kamero, ki je v kamerah.txt
                kamereToolStripMenuItem.DropDownItems.Add(btTemp);
            }
            file.Dispose();
            file.Close();
        }

        private void kameraOnClick(object sender, EventArgs e)
        {
            //tbNaslovKamere.Text+=sender.ToString();
            imageUrl = "http://" + sender.ToString() + "/now.jpg";
        }

        private void izhodToolStripMenuItem_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void preberiDatoteko()
        {
            String vrstica;
            // Read the file as one string.
            if (File.Exists(System.Environment.CurrentDirectory + "\\kamere.txt"))
            {
                kamere = new List<String>();
                StreamReader myFile = new StreamReader(System.Environment.CurrentDirectory + "\\kamere.txt");
                while ((vrstica = myFile.ReadLine()) != null)
                {
                    //zapis v list
                    kamere.Add(vrstica);
                    //doda v meni
                    ToolStripDropDownButton btTemp = new ToolStripDropDownButton(vrstica, null, kameraOnClick, vrstica);
                    kamereToolStripMenuItem.DropDownItems.Add(btTemp);
                }
                myFile.Close();
            }
        }

        private void menuPobrisiKamere()
        {
            foreach (String kamera in kamere)
            {
                kamereToolStripMenuItem.DropDownItems.RemoveByKey(kamera);
            }
            kamere = new List<String>();
        }

        private void odpriToolStripMenuItem_Click(object sender, EventArgs e)
        {
            // Create an instance of the open file dialog box.
            OpenFileDialog openFileDialog1 = new OpenFileDialog();

            // Set filter options and filter index.
            openFileDialog1.Filter = "Text Files (.txt)|*.txt";
            openFileDialog1.FilterIndex = 1;

            //openFileDialog1.Multiselect = true;
            // Call the ShowDialog method to show the dialog box.
            DialogResult userClickedOK = openFileDialog1.ShowDialog();

            //tbNaslovKamere.Text = userClickedOK.ToString();
            // Process input if the user clicked OK.
            if (userClickedOK.ToString().Equals("OK"))
            {
                menuPobrisiKamere();
                String vrstica;

                // Open the selected file to read.
                System.IO.Stream fileStream = openFileDialog1.OpenFile();
                kamere = new List<String>();
                StreamReader myFile = new StreamReader(fileStream);
                while ((vrstica = myFile.ReadLine()) != null)
                {
                    //zapis v list
                    kamere.Add(vrstica);
                    //doda v meni
                    ToolStripDropDownButton btTemp = new ToolStripDropDownButton(vrstica, null, kameraOnClick, vrstica);
                    kamereToolStripMenuItem.DropDownItems.Add(btTemp);
                }
                myFile.Dispose();
                myFile.Close();
                fileStream.Dispose();
                fileStream.Close();
                myFile.Close();
                fileStream.Close();
            }
        }

        private void pobrišiKamereToolStripMenuItem_Click(object sender, EventArgs e)
        {
            menuPobrisiKamere();
        }

        private void zbrišiShranjeneKamereToolStripMenuItem_Click(object sender, EventArgs e)
        {
            menuPobrisiKamere();
            System.IO.StreamWriter file = new System.IO.StreamWriter(System.Environment.CurrentDirectory + "\\kamere.txt");
            file.Dispose();
            file.Close();
        }

        private void pictureBox1_DoubleClick(object sender, EventArgs e)
        {
            Form1 frm1 = new Form1();
            frm1.Size = new Size(100, frm1.Size.Height);
        }

        private bool RemoteFileExists(string url)
        {
            try
            {
                //Creating the HttpWebRequest
                HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
                //Setting the Request method HEAD, you can also use GET too.
                request.Method = "HEAD";
                //Getting the Web Response.
                HttpWebResponse response = request.GetResponse() as HttpWebResponse;
                //Returns TRUE if the Status code == 200
                return (response.StatusCode == HttpStatusCode.OK);
            }
            catch
            {
                //Any exception will returns false.
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:15:49.457

你有任何 C# 应用程序的代码吗？

首先，我将查看您的代码的这一部分：

```
 document.open();
 document.write("<embed SCALE=\"ToFit\" width=\"" + resolutionW + "\" height=\"" + resolutionH + "\"" +
                           " type=\"video/quicktime\" qtsrc=\"rtsp://" + location.hostname + "/" + VideoPath + "\"" +
                           " qtsrcdontusebrowser src=\"quicktime.mov\" autoplay=\"true\" controller=\"true\"\>");
 document.close(); 
```

在许多 IF 案例之后，您会在此处获得位置路径和类型。也许您也希望它们出现在您的 C# 代码中。然后设置 WebBrowser 控件的 URI 路径，看看会发生什么......

```
webBrowser1.Url = new Uri(myIPCamStringPath); 
```

通常，您可以使用标准浏览器直接访问每个 IP-Cam。

# ios - 如何通过排除括号来连接 NSArray 值？

> ID：15405168
> 
> 赞同：1
> 
> 时间：2013-03-14T09:13:40.987
> 
> 标签：ios, objective-c, nsarray

我的数组是这样的

```
(1,2,3,)
(4,5,6,)
(7,8,9,) 
```

我想连接所有这些值，即；123456789

我试过这样`NSString *str5=[array componentsJoinedByString:@" "];`

但我没有得到输出。

谁能给我一些信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:34:18.833

看起来你有一个`NSArray`of `NSArray`。首先循环遍历原件`NSArray`并将其展平，然后应用`componentsJoinedByString`。

创建一个`NSMutableArray`, 循环遍历您的原始数组并调用`addObjectsFromArray:`每个子数组。

```
NSMutableArray *flattenArray = [[NSMutableArray alloc] init];
for(NSArray *array in originalArray)
{
    [flattenArray addObjectsFromArray: array];
}

NSString *str5 = [flattenArray componentsJoinedByString:@" "]; 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:30:53.330

像这样尝试它会给出预期的输出，但我不知道它是否有效，

```
NSArray *arr=[[NSArray alloc]initWithObjects:@"(1,2,3)",@"(4,5,6)", nil];
    NSString *str=[arr componentsJoinedByString:@""];
    NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@",()"];
    str = [[str componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""];
    NSLog(@"%@",str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:31:36.617

试试这个用空值替换括号的字符。

代码 ：：

```
NSArray *arr = [[NSArray alloc] initWithObjects:@"(1, 2, 3, )", @"(4, 5, 6, )", @"(7, 8, 9, )", nil];

for (int i = 0; i < [arr count]; i++) {
    NSLog (@"==> %@", [or objectAtIndex:i]);
}

NSString *str5 = [arr componentsJoinedByString:@" "];
NSLog(@" ==> %@", str5);

str5 = [str5 stringByReplacingOccurrencesOfString:@"(" withString:@""];
str5 = [str5 stringByReplacingOccurrencesOfString:@" " withString:@""];
str5 = [str5 stringByReplacingOccurrencesOfString:@")" withString:@""];
str5 = [str5 stringByReplacingOccurrencesOfString:@"," withString:@""];

//Or Try this
NSCharacterSet *doNotWantChars = [NSCharacterSet characterSetWithCharactersInString:@",() "];
str5 = [[str5 componentsSeparatedByCharactersInSet: doNotWantChars] componentsJoinedByString: @""];
NSLog(@" ==> %@", str5);

NSLog(@"Output :: %@", str5); 
```

我已将**"(", ")", ""** & **","**替换为**""** (null) 值

希望它会帮助你。
谢谢。

# asp.net - ASP.NET 不能在 asp-tags NOT CodeBehind 中包含 MySql 命名空间

> ID：15405169
> 
> 赞同：1
> 
> 时间：2013-03-14T09:13:42.813
> 
> 标签：asp.net, mysql, dll, namespaces, include

尝试包含 MySql 命名空间：

```
<%@ Import Namespace="MySql.Data" %> 
```

但是出现错误...已检查，在`References`选项卡中包含所需的 dll。此外，我已经包含在 MySQL 的 CodeBehind 命名空间中（并且 CodeBehind 没有错误）。

但是，如果我尝试在 aspx 代码主体中包含包含代码，而不是 CodeBehind，我会发现一个错误，即当我通过浏览器导航到页面时它看不到这样的命名空间。

如何解决这样的问题？

# performance - 在 Qt 的非 GUI 线程中修改小部件？

> ID：15405172
> 
> 赞同：1
> 
> 时间：2013-03-14T09:13:49.120
> 
> 标签：performance, qt, qthread

假设我有多线程我的应用程序。然后根据 Qt 哲学，您甚至无法修改`Widgets`GUI 中添加的属性。假设一个类的对象`Not_GUI`被移动到另一个类`QThread`，那么在一个函数中调用`button1->SetEnabled(false);`（在 GUI 中添加）`button1`是非法的。`QPushButton``Not_GUI`

目前，我的应用程序有许多 GUI `widgets`（如 QLabel、QLineEdit 等），并且由于它们`events`都只在 1 个线程中处理，因此由于大量的绘画活动，应用程序会挂起一段时间。有没有一种方法可以以某种方式将一些工作负载分配`Widgets`给各个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:56:19.073

对于第一个示例，使用信号和插槽。`QWidget::setEnabled()`是一个插槽。创建一个信号`modifyWidgetEnableState(bool)`并连接到插槽。触发信号而不是使用直接方法调用。

> 由于大量的绘画活动，应用程序暂停了一段时间

这些小部件是 Qt 内置的吗？如果是，我怀疑挂起是由于绘画。这些小部件是你的吗？那么您可能在子类事件处理程序中进行了太多处理。要做的第一件事是尝试提高您所做的任何事情的性能，第二件事是在线程中移动繁重的处理，并且（*再次*）使用信号和插槽与小部件进行通信。

编辑：假设 o1 和 o2 并移动到不同的线程 t1 和 t2。

每当`o2->slot()`作为普通函数调用执行时，它就是正在执行的***调用线程***`slot()`。记住，`slot()`毕竟是一个普通的 C++ 方法。每当触发`sig()`连接到的信号时，它就是正在执行***的接收线程***。所以选择一个或另一个，否则你将受到竞争条件的影响。`slot()`*`slot()`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:58:09.037

正如您所说，Qt 要求所有小部件绘制都在主线程中完成。没有办法解决这个问题。您*可以*在单独的线程中绘制到 a`QImage`中，然后只需将图像绘制到其`paintEvent()`. 但是，首先请记住，这会为所有缓冲区图像占用额外的内存。此外，如果您能够做到这一点，那么在没有线程的情况下采用相同的方法可能会更容易。一般来说，您的目标应该是在内部做尽可能少的工作`paintEvent()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:54:47.013

您可以通过调用任何函数从另一个线程修改您的 ui，`QMetaObject::invokeMethod()`并在您可以使用的单独线程中运行某些函数`QtConcurrent::run`（我将它与 一起使用`QFutureWatcher`）。可能不是规范的 Qt 方式，但对我来说很好，如果我不想为每个函数创建自己的 QThread::run*

# java - 以 HTML 格式发送 jasperreport

> ID：15405173
> 
> 赞同：3
> 
> 时间：2013-03-14T09:13:51.320
> 
> 标签：java, jsp, servlets, jasper-reports

我`JapserReports`用于在 Java 中显示报告。我能够以`PDF`格式向网络浏览器发送报告。

现在我想以`HTML`格式发送报告，以下是我以`HTML`格式发送报告的方法。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    File reportFile = new File(getServletConfig().getServletContext().getRealPath("/rpts/report1.jasper"));
    ServletOutputStream servletOutputStream = response.getOutputStream();
    byte[] bytes = null;
    Map<String,Object> parameter = new HashMap<String,Object>();
    Connection con = DBConnection.getConnection("");
    try
    {
        bytes = JasperRunManager.runReportToHtmlFile(reportFile.getPath(),parameter,con).getBytes();
        response.setContentType("text/html");
        response.setContentLength(bytes.length);
        servletOutputStream.write(bytes, 0, bytes.length);
        servletOutputStream.flush();
        servletOutputStream.close();
    }
    catch (JRException e)
    {
        System.out.println(e);
    }
} 
```

以上方法是打印`path`生成的`HTML`文件。当我检查路径时，会`HTML`在那里生成带有数据的文件。

那么我在代码中遗漏了什么吗？

提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:09:39.720

尝试设置 Content-Disposition 和 html 文件名。

```
 response.setHeader("Content-Disposition","inline, filename=myReport.html");
    response.setContentType("text/html");
    response.setContentLength(bytes.length);
    servletOutputStream.write(bytes, 0, bytes.length);
    servletOutputStream.flush();
    servletOutputStream.close(); 
```

runReportToHtmlFile 方法返回绝对文件路径。在写入输出流之前，需要将生成的 html 文件读入字节数组。

下面的代码可能对你有用。

```
 String reportPath =JasperRunManager.runReportToHtmlFile(reportFile.getPath(), parameter);
        File reportHtmlFile = new File(reportPath);
        FileInputStream fis = new FileInputStream(reportHtmlFile);
        byte[] bytes =  new byte[(int)reportHtmlFile.length()];
        fis.read(bytes);
        resp.setHeader("Content-Disposition","inline; filename=myReport.html");
        resp.setContentType("text/html");
        resp.setContentLength(bytes.length);
        servletOutputStream.write(bytes, 0, bytes.length);
        servletOutputStream.flush();
        servletOutputStream.close(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T18:27:54.957

试试这个

```
public class ReportExample {

/**

* @param args

*/

public static void main(String[] args) {

// TODO Auto-generated method stub

ArrayList<City> cityList=new ArrayList<City>();

City city=new City();

city.setCityName("Kolkata");

city.setCountry("Country");

cityList.add(city);

InputStream inputStream;

try {

inputStream = new FileInputStream ("report1.jrxml");

DataBeanMaker dataBeanMaker = new DataBeanMaker();

JRBeanCollectionDataSource beanColDataSource = new JRBeanCollectionDataSource(cityList);

Map parameters = new HashMap();

JasperDesign jasperDesign = JRXmlLoader.load(inputStream);

JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);

JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, beanColDataSource);

JasperExportManager.exportReportToPdfFile(jasperPrint, "testjasper.pdf"); 

   JasperViewer.viewReport(jasperPrint);

   JasperPrintManager.printReport(jasperPrint, true);

}catch(Exception e)

{e.printStackTrace();

}

}

}

 check the link http://javadispute.com/content/jasper-report-example 
```

# mysql - MySQL - 如何获取按某个字段分组的最新行值？

> ID：15405176
> 
> 赞同：3
> 
> 时间：2013-03-14T09:14:05.610
> 
> 标签：mysql, sql, greatest-n-per-group

假设我们有一个名为 table A 的表

```
id         foreign_id   value
1             1         x
2             2         y
3             1         y
4             2         x
5             3         x 
```

`id`主键在哪里

您如何获得`id`按外国 id 分组的最新行（我们将按照 的顺序进行排序）？基本上，我想要得到的是

```
id     foreign_id     value
3      1              y
4      2              x
5      3              x 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:23:47.473

试试这个查询，

```
SELECT t.id, t.foreign_id, t.value FROM #temp t
WHERE t.id IN (SELECT max(id) FROM #temp GROUP BY foreign_id) 
```

替换`#temp`为您的实际表名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:16:54.610

试试这个查询

```
SELECT max(id) AS ID, foreign_id FROM tbl
GROUP BY  foreign_id 
```

如果还需要价值，那么

```
SELECT a.ID, a.foreign_id, a.value  
FROM tbl a,
(SELECT max(id) AS ID, foreign_id 
        FROM tbl GROUP BY foreign_id) b
WHERE a.id = b.id AND 
      a.foreign_id = b.foreign_id 
```

**[小提琴](http://sqlfiddle.com/#!2/67d0cc/1)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:20:27.677

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  foreign_ID, max(id) max_ID
            FROM    tableName
            GROUP   BY foreign_ID
        ) b ON  a.foreign_ID = b.foreign_ID AND
                a.ID = b.max_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b47f4/1)

输出

```
╔════╦════════════╦═══════╗
║ ID ║ FOREIGN_ID ║ VALUE ║
╠════╬════════════╬═══════╣
║  3 ║          1 ║ y     ║
║  4 ║          2 ║ x     ║
║  5 ║          3 ║ x     ║
╚════╩════════════╩═══════╝ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:28:28.023

```
`SELECT MAX(id) AS ID, 
       foreign_id,
       value 
 FROM tbl
 GROUP BY  foreign_id ASC` 
```

对于少量结果，此答案非常好，但如果您使用大量数据，则可能仅“值”字段的值错误。另一种方法更适合您获得适当的价值，这里是这段代码。

```
`SELECT MAX(id) AS ID, 
       foreign_id,
       value 
 FROM tbl
 WHERE id in ( SELECT MAX(id) FROM tbl )
 GROUP BY  foreign_id ASC` 
```

# c# - 递归引起的 StackOverflowException

> ID：15405180
> 
> 赞同：6
> 
> 时间：2013-03-14T09:14:17.140
> 
> 标签：c#, recursion, stack-overflow

我目前正在编写一个程序来帮助编写 Lore。每个书本对象都可以是父母并有孩子。这意味着每个孩子都可以有孩子等等。我正在研究一个 ToString() 方法，该方法可以使用递归来解决这个问题，但我不断收到 StackOverflowException。

我知道这意味着什么，但我怀疑如何解决它。我是 C# 的新手，但有很多 Java 经验，所以如果你知道一个技巧或我错过的东西，请告诉我！

所以我的问题是：如何避免 StackOverflow 异常？问题出在 GetAllChildren()

编辑：

运行测试后，我应该得到如下信息：

```
Name: a
Children:
b
c
    d
e 
```

使用来自@lc 的代码。我得到以下输出：

```
Name: a
Children: No Children   b
c
e
    b
c
e
    b
c
e 
```

这是课程：

```
class Book
{
    private String name;
    private Book[] children;
    private StringBuilder text;
    private Boolean isParent;

    public Book(String name, Book[] children, StringBuilder text, Boolean isParent)
    {
        this.name = name;
        this.children = children;
        this.text = text;
        this.isParent = isParent;
    }

    /**
     * Most likely all possible Constructors
     * */
    public Book(String name, Book[] children) : this(name, children, new StringBuilder("No Text"), true) { }
    public Book(String name, String text) : this(name, new Book[0], new StringBuilder(text), false) { }
    public Book(String name, StringBuilder text) : this(name, new Book[0], text, false) { }
    public Book(String name) : this(name, new Book[0], new StringBuilder("No Text"), false) { }
    public Book(Book[] children, String text) : this("Unnamed Book", children, new StringBuilder(text), true) { }
    public Book(Book[] children, StringBuilder text) : this("Unnamed Book", children, text, true) { }
    public Book(Book[] children) : this("Unnamed Book", children, new StringBuilder("No Text"), true) { }
    public Book(StringBuilder text) : this("Unnamed Book", new Book[0], text, false) { }
    public Book() : this("Unnamed Book", new Book[0], new StringBuilder("No Text"), false) { }

    public String Name
    {
        get { return name; }
        set { name = value; }
    }

    public Book[] Children
    {
        get { return children; }
        set { children = value; }
    }

    /**
     * Will Return the StringBuilder Object of this Text
     * */

    public StringBuilder Text
    {
        get { return text; }
        set { text = value; }
    }

    public Boolean IsParent
    {
        get { return isParent; }
        set { isParent = value; }
    }

    private void GetAllChildren(Book book, StringBuilder sb)
    {
        if (book.isParent)
        {
            GetAllChildren(book, sb);
        }
        else
        {
            sb.Append("\t");
            foreach (Book b in children)
            {
                sb.Append(b.Name + "\n");
            }
        }
    }

    public override String ToString()
    {
        StringBuilder sChildren = new StringBuilder("No Children");
        if (children.Length != 0)
        {
            GetAllChildren(this, sChildren);
        }

        return "Name: " + name + "\n" +
            "Children: " + sChildren.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T09:16:36.433

我想你的意思是：

```
if (book.isParent)
{
    foreach (var child in book.Children)
        GetAllChildren(child, sb);
} 
```

否则，您只是一遍又一遍地`GetAllChildren`使用相同的参数 ( ) 调用该方法。`book, sb`

* * *

旁注 - 你仍然有一些问题，因为中的停止条件`GetAllChildren`正在迭代子级，而它不应该（如果它不是父级，它不应该有子级）。相反，它应该返回自己的名称。此外，每个孩子还应该在上面的 foreach 循环中附加它的名字（或者实际上，每本书都应该附加它自己的名字）。

旁注 2 - 所写的方法（带有这些更改）应该是静态的，因为它与任何给定的实例无关（这让我想到了下面的建议）。

* * *

建议 - 我会推荐类似以下的内容（未经测试，需要在格式化方面进行一些工作）：

```
//name changed to reflect what it really does
//also changed to be an instance method (we no longer pass in a Book)
//added listThisBooksName parameter to allow supressing the topmost book's output
private void AppendAllChildren(StringBuilder sb, int level = 0, 
    bool listThisBooksName = false)
{
    if (listThisBooksName)
    {
        //append ourself here

        //first indent however far we need to
        sb.Append(new String('\t', level));

        //now add our name
        sb.Append(this.Name);

        //and a newline (you can strip the last one later if you want)
        sb.Append('\n');
    }

    //forget the "isParent" property, just check if it has any children
    //we don't need Children.Any() because the foreach will just iterate 0 times
    //you might also consider using a List<Book> instead of an array for Children
    if (this.Children != null)
        foreach (var child in this.Children)
            child.AppendAllChildren(sb, level+1, true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:17:18.413

是不是这个问题：

```
 if (book.isParent)
    {
        GetAllChildren(book, sb);
    } 
```

你又调用了同样的方法？我认为上面应该遍历 children 并调用`GetAllChildren`每个 child `Book`。`Book` *如果您没有*任何孩子，则仅输出名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T09:17:33.813

您的递归是在同一本书上递归，而该书的 IsParent 为真。如果这本书是父母，您可能希望通过所有孩子递归。

# java - JTable 工具提示中 JPanel 中的 JLabels 不起作用

> ID：15405181
> 
> 赞同：0
> 
> 时间：2013-03-14T09:14:20.490
> 
> 标签：java, swing, jtable, jpanel

我有一个带有自定义单元格渲染器的 JTable。我正在向 JTable 添加一个包含多个 JLabel 的面板。问题是当鼠标悬停在每个 JLabel 上时，我似乎无法获得每个工具的提示。我不想设置 jpanel 工具提示，我想显示我在 jpanel 内的 3 个 JLabels 上设置的工具提示。

这是我的 JTable 初始化：

```
public static JTable users = new JTable(model) {
    @Override
    public boolean isCellEditable(int row, int column) {
        return false;

    }

    @Override
    public Class<? extends Object> getColumnClass(int column) {
        return getValueAt(0, column).getClass();
    }

    @Override
    public String getToolTipText(MouseEvent event) {
        String tip = null;
        Point p = event.getPoint();

        // Locate the renderer under the event location
        int hitColumnIndex = columnAtPoint(p);
        int hitRowIndex = rowAtPoint(p);

        if (hitColumnIndex != -1 && hitRowIndex != -1) {
            TableCellRenderer renderer = getCellRenderer(hitRowIndex, hitColumnIndex);
            Component component = prepareRenderer(renderer, hitRowIndex, hitColumnIndex);
            Rectangle cellRect = getCellRect(hitRowIndex, hitColumnIndex, false);
            component.setBounds(cellRect);
            component.validate();
            component.doLayout();
            p.translate(-cellRect.x, -cellRect.y);
            Component comp = component.getComponentAt(p);
            if (comp instanceof JComponent) {
                return ((JComponent) comp).getToolTipText();
            }
        }

        // No tip from the renderer get our own tip
        if (tip == null) {
            tip = getToolTipText();
        }

        return tip;
    }
}; 
```

和我的自定义单元格渲染代码：

```
public class TransparentRenderer extends DefaultTableCellRenderer  implements TableCellRenderer {

public JPanel p = new JPanel();

    ........

// This method is called each time a cell in a column
// using this renderer needs to be rendered.
@Override
public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int rowIndex, int vColIndex) {

    ....

    // Now lets color in the table accordingly..
    if (value.toString().equals(gmeLobby.user)) {
        JLabel l = new JLabel(value.toString());
        l.setForeground(Color.YELLOW);
        p.add(l);

        //setHorizontalAlignment(SwingConstants.LEFT);
    } else {
        // If username is not yours
        //setHorizontalAlignment(SwingConstants.LEFT);

        if(value instanceof ImageIcon)
        {
            final JLabel l = new JLabel();
            l.setIcon((ImageIcon) value);
            l.setAlignmentY(0.85f);
            l.setToolTipText(((ImageIcon) value).getDescription());
            p.add(l);

            if(vColIndex==0)
            {
            final JLabel w = new JLabel();
            final JLabel d = new JLabel();
            try {
                w.setIcon(gmeImages.gmeImages("globe"));
                w.setToolTipText(((ImageIcon) value).getDescription());
                d.setIcon(gmeImages.gmeImages("dnds"));
                d.setToolTipText(((ImageIcon) value).getDescription());
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            p.add(d);
            p.add(w);
            setPosition(w, 5, 0);
            setPosition(d, 15, 2);
            }
            setPosition(l, 0, 0);

        }else{
            JLabel l = new JLabel(value.toString());
            l.setForeground(Color.WHITE);
            p.add(l);

        }
        return p;
    }

    if (isSelected) {
        setBackground(new Color(rsbc.getRed() - 100, rsbc.getGreen(), rsbc.getBlue()));
    } else {
        setBackground(bgu);
    }

    if (hasFocus) {
        // this cell is the anchor and the table has the focus
        p.setBackground(new Color(rsbc.getRed() - 100, rsbc.getGreen(), rsbc.getBlue()));
    }

    // Since the renderer is a component, return itself

    return this;
} 
```

任何帮助都会很棒。工具提示的 JTable 上的当前覆盖似乎只是获取添加的第一个组件的工具提示。

谢谢

编辑：

感谢所有提供帮助的人，正如 Andrea 所说，在制作 SSCCE 时，我似乎已经解决了问题，但不确定到底是什么错误，我相信这可能与我初始化 imageicon 变量的方式有关。

无论如何，一个在每个图像上都有一个工具提示的单元格中有 2 个图像图标的示例程序如下：

```
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.MatteBorder;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import javax.swing.text.BadLocationException;

@SuppressWarnings("serial")
public class design extends JFrame{

// Create the JTable users list and set editable to false
public static DefaultTableModel model = new DefaultTableModel();
    public static JTable users = new JTable(model) {
        @Override
        public boolean isCellEditable(int row, int column) {
            return false;

        }

        @Override
        public Class<? extends Object> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }

        @Override
        public String getToolTipText(MouseEvent event) {
            String tip = null;
            Point p = event.getPoint();

            // Locate the renderer under the event location
            int hitColumnIndex = columnAtPoint(p);
            int hitRowIndex = rowAtPoint(p);

            if (hitColumnIndex != -1 && hitRowIndex != -1) {
                TableCellRenderer renderer = getCellRenderer(hitRowIndex, hitColumnIndex);
                Component component = prepareRenderer(renderer, hitRowIndex, hitColumnIndex);
                Rectangle cellRect = getCellRect(hitRowIndex, hitColumnIndex, false);
                component.setBounds(cellRect);
                component.validate();
                component.doLayout();
                p.translate(-cellRect.x, -cellRect.y);
                Component comp = component.getComponentAt(p);
                if (comp instanceof JComponent) {
                    return ((JComponent) comp).getToolTipText();
                }
            }

            // No tip from the renderer get our own tip
            if (tip == null) {
                tip = getToolTipText();
            }

            return tip;
        }
    };

/**
 * @param args
 * @throws Exception 
 */
public design() throws Exception
{
    initialize();

    setSize(400, 400);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    add(users);
    setVisible(true);
}

public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub
    new design();
}

public static void initialize() throws Exception
{

    model.addColumn("icons");
    model.addColumn("text");

    users.setRowHeight(40);

    TableColumn col = users.getColumnModel().getColumn(0);
    col.setCellRenderer(new TransparentRenderer());
    TableColumn col2 = users.getColumnModel().getColumn(1);
    col2.setCellRenderer(new TransparentRenderer());

    model.addRow(new Object[] { new ImageIcon(), "text here" });
}

   }

 class TransparentRenderer extends JPanel  implements TableCellRenderer {
private static final long serialVersionUID = 1L;
public JPanel p = new JPanel();
private static SpringLayout spring = new SpringLayout();

public TransparentRenderer() throws Exception, BadLocationException {p.setLayout(spring);}

// This method is called each time a cell in a column
// using this renderer needs to be rendered.
@Override
public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int rowIndex, int vColIndex)       {

        if(value instanceof ImageIcon)
        {            
            if(vColIndex==0)
            {
            JLabel w = new JLabel();
            JLabel d = new JLabel();
            try {
                ImageIcon icon1 = new ImageIcon();
                extracted("http://fxtrade.oanda.com/wandacache/star_icon-c10fffd09c7a7548f329f56e446f3cfe5463558b.png"
                        , icon1, "Tooltip for icon 1");

                ImageIcon icon2 = new ImageIcon();
                extracted("http://hotels.online.com.sg/DB/icon/star_icon2.gif"
                        , icon2, "Tooltip for icon 2");

                w.setIcon(icon1);
                w.setToolTipText("ToolTip 1");
                d.setIcon(icon2);
                d.setToolTipText("ToolTip 2");
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            p.add(d);
            p.add(w);
            setPosition(d, 5, 2);
            setPosition(w, 5, 0);
            }

            return p;
        }else{
            add(new JLabel(value.toString()));
        }       
    return this;
}

public void setPosition(JComponent c, int w, int n)
{
    spring.putConstraint(SpringLayout.WEST, c, w, SpringLayout.WEST, p);
    spring.putConstraint(SpringLayout.NORTH, c, n, SpringLayout.NORTH, p);
}

public void extracted(String link, ImageIcon icon, String desc) throws Exception
{
    BufferedImage image = ImageIO.read(new URL(link));
    icon.setImage(image);

    if(desc.equals("")){} else{ icon.setDescription(desc);}
}
} 
```

感谢所有帮助过的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:23:16.383

您的代码是否有效？`TransparentRenderer`是每列一个单例，并`getTableCellRendererComponent`为每个单元格逐行调用。似乎将要呈现的每个单元格添加了一个新子项到变量`p`中。这可能就是为什么您总是只看到第一个组件的原因。

# qtp - 结果查看器保持最小化

> ID：15405183
> 
> 赞同：1
> 
> 时间：2013-03-14T09:14:26.083
> 
> 标签：qtp, hp-uft

在一台机器上，我有 UFT 11.51 和 Results Viewer 11.51，当我运行 Results Viewer 时，它保持最小化，即我无法查看结果。

我使用 Windows 7 并将主题更改为 XP 只是为了尝试它是否是图形故障...

有任何想法吗？

谢谢，马特奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-06T05:54:02.123

我也遇到了类似的问题，但最终通过以下步骤解决了

1.  鼠标悬停在任务栏上的结果查看器
2.  右键单击 RR 弹出窗口。
3.  单击最大化选项。

希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T06:43:16.530

**它没有被最小化。它的大小完全在屏幕外。**

尝试聚焦结果查看器（通过 Alt-Tabbing 到它），然后按 Alt-Space，然后选择“移动”。然后使用光标键 - 如果您按正确的方向键，窗口将滚动到视图中。

如果您从双显示器配置切换到单显示器配置，就会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T11:20:24.593

只需按下`Alt+ Space`然后选择移动。这对所有最小化窗口问题都有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T09:49:59.277

QTP 图标是否显示在任务栏上，但无法打开窗口？如果是这样，请尝试以下三个步骤。1\. 卸载 Result Viewer 11.51。2\. 安装较低版本，如 Result Viewer 11.0。使用低版本打开一个结果报告，你总是可以看到它在那里被最小化，将其设置为最大化，关闭。3.重新安装到Result Viewer 11.51，再次运行。

希望这对你有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T18:14:52.433

一种方法是关闭结果查看器并从 QTP 工具栏图标启动结果查看器。这似乎对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-22T23:24:41.577

这是一个奇怪的解决方案。同样的事情发生在我身上，我最终在我的机器上创建了另一个具有管理员权限的用户。我在运行该新帐户时没有遇到任何问题。

# php - 自定义 php 自动加载器

> ID：15405187
> 
> 赞同：1
> 
> 时间：2013-03-14T09:14:35.880
> 
> 标签：php, autoload

我正在尝试创建一个自定义自动加载器，它会扫描所有目录并保存每个文件中的类。这就是我所拥有的：

```
define ('PATH', 'C:\work\Symfony-1.4.20');

$files = array();
$map = array();

function loadClassLoader($name)
{
    global $map, $files;

    foreach(new RecursiveIteratorIterator(new RecursiveDirectoryIterator(PATH)) as $file)
    { 
        $file2 = $file->__toString();

        if (strtolower($file2) != strtolower(__FILE__) && 
            $file->getExtension() == 'php' && 
            !isset($files[$file2]))
        {
            $files[$file2] = true;
            $classesNow = get_declared_classes();                    
            require ($file2);
            foreach (array_diff (get_declared_classes(), $classesNow) as $c)
            {
                $reflection = new ReflectionClass($c);
                $map[$c] = $reflection->getFileName();
                unset ($reflection);
            }            
        }
    }
}

spl_autoload_register('loadClassLoader');

loadClassLoader ('');

echo '<pre>'; var_dump ($map); echo '</pre>'; 
```

可悲的是，它不适用于更大的系统。这个逻辑缺少什么？

错误信息是：`Fatal error: Class 'BaseForm' not found in C:\Work\symfony-1.4.20\lib\form\addon\sfFormObject.class.php on line 20`

# java - 我可以使用 Spring 开发管理工作流的服务器吗

> ID：15405189
> 
> 赞同：1
> 
> 时间：2013-03-14T09:14:45.303
> 
> 标签：java, spring, serversocket

我在一个项目中使用 Spring 框架。

我需要开发一个通过引入脚本 shell 命令 ( `sh -start`& `sh -stop`) 来启动和停止的服务器。

服务器应始终运行并等待用户的命令。

服务器还同时管理基于 Context 的多个工作流的执行。

我想知道 Spring 是否可以做到这一点，或者是否有任何其他框架或技术来简化我的 Task 。

# c# - MS Chart AxisX 标签应该对齐而不是交替

> ID：15405190
> 
> 赞同：1
> 
> 时间：2013-03-14T09:14:45.983
> 
> 标签：c#, asp.net, mschart

有了这里的图像，我希望我的 AxisX 标签（Mar Apr May Jun ... Totals）完全对齐，而不是如图所示交替。我应该修改哪些属性？如果您能尽快提供答案，将不胜感激。

![在此处输入图像描述](../Images/c5110696edca73746b259454df7fbca5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:21:49.650

经过一番修改，我终于找到了解决上述问题的属性。

```
Chart1.ChartAreas["ChartArea1"].AxisX.LabelAutoFitStyle = LabelAutoFitStyles.WordWrap; 
//This is a style that automatically changes during runtime.
//I added another line for the font size, just to be sure.  Consider it optional.
Chart1.ChartAreas["ChartArea1"].AxisX.LabelAutoFitMinFontSize = 11; 
```

![在此处输入图像描述](../Images/81b848566c328f1816134c0a4f4bf985.png)

# c# - 查找复选框的值

> ID：15405194
> 
> 赞同：4
> 
> 时间：2013-03-14T09:15:10.490
> 
> 标签：c#, asp.net, .net, checkbox

我在**ASP.NET 1.1**中工作。

我正在**动态添加一个复选框**，改变计数值，如下所示：

```
<INPUT id='btnCheck" + count.ToString() + "' name='btnCheck" + count.ToString() + "' type='checkbox' value='" + row["EmpId"].ToString() + "' Runat='server' Width='50px'> 
```

现在我能够得到这个——`id='btnCheck" + count.ToString()`

`value in code behind. But I am not able to get to refer ths ID from code behind and get the value='" + row["EmpId"].ToString() + "'`为此`ID`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:16:50.713

您不能像这样添加复选框，您正在使 html 字符串不是服务器控件，而是使用 CheckBox 类来实例化其对象

```
CheckBox ch = new CheckBox(); 
```

在页面控件中添加创建的复选框。

```
this.Controls.Add(ch); 
```

# javascript - 浏览器后退按钮

> ID：15405199
> 
> 赞同：3
> 
> 时间：2013-03-14T09:15:22.363
> 
> 标签：javascript, jquery, browser-cache, back-button

我正在使用以下代码行在注销后禁用浏览器后退按钮问题。

```
function LogoutOnClick() {
    window.history.go(-1);
} 
```

但是，这段代码有一个问题，假设我有三个页面，第一个是登录页面（`login.cshtml`），第二个成功登录页面（`home.cshtml`），第三个页面是关于页面（`about.cshtml`），

现在我登录然后它会在`home.cshtml`页面上重定向我，因为我在第三页上移动，`about.cshtml`然后我从页面注销`about.cshtml`，它会在页面上重定向我`login.cshtml`。

现在，如果我再次`clicked on browser back button`在页面上重定向我，`about.cshtml`但用户无法更改或添加任何内容。

所以让我知道是否有任何适当的代码或方法来解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:23:02.673

您需要禁用仅在登录时可见的页面的浏览器缓存，以防止用户在退出后返回到他们登录时的页面。这样您就不必担心禁用后退按钮。如果他们尝试访问要求他们登录的页面，您会将他们重定向到登录页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T09:22:12.897

要禁用后退浏览器按钮了解更多信息：[这里](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

我认为这段代码可以帮助你：

```
 <SCRIPT type="text/javascript">
    window.history.forward();
    function noBack() { window.history.forward(); }
</SCRIPT>
</HEAD>
<BODY onload="noBack();"
    onpageshow="if (event.persisted) noBack();" onunload=""> 
```

编辑：注销后禁用检查：[这里](https://stackoverflow.com/questions/5949801/how-to-disable-browser-back-button-after-logout-in-jsp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:28:05.107

我不认为，禁用浏览器中的后退按钮是您想要的，或者不是您应该想要的！从安全的角度来看，您应该尝试销毁会话。并且您应该在页面的每个请求中证明权限。

想想，你想归档什么;-)

# facebook - iOS SDK 3.2 取消请求或超时

> ID：15405200
> 
> 赞同：2
> 
> 时间：2013-03-14T09:15:23.597
> 
> 标签：facebook, ios6, sdk, timeout

我现在在 iOS 6 上使用最新的 FB 3.2 SDK 并在模拟器中进行测试。我发现我可以在第一次运行应用程序时将照片发布到用户的墙上。我可以再次重复这个帖子，一次。在第二个帖子之后，任何后续帖子都挂起，我收到可怕的 com.facebook.sdk 错误 5 消息。

因此，为了处理这个问题，我正在寻找最新 SDK 中的取消请求，因为我没有使用旧的 FBConnect 代码……基于当第一次挂起时，我取消请求并重试。

所以我需要一种取消的方法，同时也需要一种检测超时的方法。谁能告诉我如何使用 3.2 设置超时？

[编辑...] 我使用类级别的方法来使用 FBRequestConnection / startWithGraphPath，而不是使用 alloc/initWithTimeout 创建连接。因此，如果可能的话，我正在寻找允许在使用类级别代码时超时的东西

谢谢

保罗

# css - @font-face 不适用于特定字体

> ID：15405205
> 
> 赞同：0
> 
> 时间：2013-03-14T09:15:34.173
> 
> 标签：css, font-face

所以我不能让@font-face 使用特定的字体。是因为字体文件还是我做错了什么？

网站链接：[http ://carlpapworth.com/friday-quiz/](http://carlpapworth.com/friday-quiz/)

字体文件的路径：ftp: [//ftp.carlpapworth.com//friday-quiz/fonts/Lobster_1.3.otf](ftp://ftp.carlpapworth.com//friday-quiz/fonts/Lobster_1.3.otf) css：

```
@font-face {
font-family: lobster;
font-weight: 100;
font-style: normal;
src: url('fonts/Lobster_1.3.otf');
} 
```

如您所见，我调用的其他字体工作正常。为任何帮助而欢呼。C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:36:09.957

提到的页面由 Firefox 显示，没有任何`@font-face`字体。网络日志甚至没有显示任何获取字体的尝试。查看 Firefox 错误控制台（或使用 W3C CSS Validator）显示 at-rules 格式错误：它们以

```
@font-faceÂ { 
```

所以他们被忽略了。奇怪的`Â`可能是某些字符编码出错导致的，但无论如何解决这个问题应该是第一步。如果问题仍然存在，请尝试发布仍然出现问题的最简单的文档。另请注意，IE 不支持 .otf 格式，也不是 Web 的最佳字体格式；考虑使用[FontSquirrel @font-face 生成器](http://www.fontsquirrel.com/tools/webfont-generator)来实现跨浏览器功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T09:25:00.170

**尝试这个：**

```
@font-face {
    font-family: 'lobster';
    src: url("fonts/lobster.woff") format("woff"),
         url("fonts/lobster.ttf") format("truetype"),
         url("fonts/lobster.svg#webfontszsn4DPI") format("svg");
    font-weight: normal;
    font-style: normal;
} 
```

# jsf - primefaces 将另一个组件添加到数据表分页器模板

> ID：15405208
> 
> 赞同：4
> 
> 时间：2013-03-14T09:15:45.373
> 
> 标签：jsf, primefaces

我有 primefaces 数据表，其中定义了分页器模板和工具栏`<f:facet name="header">`

例子：

```
<p:dataTable paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
currentPageReportTemplate="{startRecord} - {endRecord} of {totalRecords}">

<f:facet name="header">

    <p:selectOneMenu id="presetSelectOneMenu"
        value="#{alarmTable.selectedGuiPreset}"
        style="padding: 0; margin: 0;float: left; display: block; width: 100px; text-align: left;">
        <f:selectItem itemLabel="Global" itemValue="" itemDisabled="true" />
        <f:selectItems value="#{guiSettings.arrayOfGlobalGuiPresets}" />
        <f:selectItem itemLabel="Personal" itemValue="" itemDisabled="true" />
        <f:selectItems value="#{guiSettings.arrayOfPersonalGuiPresets}" />
        <p:ajax event="change" update="alarmTableId"
            listener="#{alarmTable.actionSelectGuiPreset(true)}" />
    </p:selectOneMenu>

    <p:commandButton id="btnRefreshFilter" icon="ui-icon-refresh"
        action="#{alarmTable.actionSelectGuiPreset(true)}"
        update="alarmTableId" style="margin-left: 3px; float: left;"
        title="Refresh" />

    <h:outputText id="selectedGuiPresetText"
        style="float: left; font-size: 12px; padding-top: 3px; padding-left: 5px"
        value="In use - '#{alarmTable.selectedGuiPresets.size() > 0 ? alarmTable.selectedGuiPresets.get(0).presetName : ''}'" />
</f:facet>
<p:columns> 
```

它看起来像：[图片](http://goo.gl/MevqZ)

我想节省垂直监视器空间并将组件集成`<f:facet name="header">`到分页器行中。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-21T10:47:19.297

从 PrimeFaces 5.0（社区版）开始，这确实是可能的。您现在可以定义自定义构面并将其名称添加到`paginatorTemplate`. 像这样：

```
<p:dataTable paginator="true" paginatorTemplate="{Customization}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">

    <f:facet name="{Customization}">
        <p:selectOneMenu ... />
        <p:commandButton ... />
        <h:outputText ... />
    </f:facet>

    ...header
    ...columns
</p:dataTable> 
```

可以在[DataExporter 展示](http://www.primefaces.org/showcase/ui/data/dataexporter/basic.xhtml)中找到此功能的演示。

问候

# c++ - 函数的返回类型和作为参数的类型应该相同吗？

> ID：15405209
> 
> 赞同：0
> 
> 时间：2013-03-14T09:15:45.887
> 
> 标签：c++, lambda, pass-by-reference

[在这里](http://software.intel.com/en-us/blogs/2009/08/03/hello-lambdas-c-0x-a-quick-guide-to-lambdas-in-c)，我找到了这段代码（并且我对其进行了一些修改）：

```
template<typename F>     
void Eval( const F& f ) {
     f(3.14);
} 
```

据我了解， Eval 函数将另一个函数作为参数，并为其参数的特定值返回其值（在上述情况下为 3.14）。但我不确定应该使用什么类型的函数？它的返回类型？那么，是否应该按以下方式调用呢？

```
Eval<float>(sin) 
```

此外，我们为什么要使用指针（&-symbol）？我们通过引用传递参数是因为我们想改变它吗？我们要在函数内部重新定义`Eval`函数吗？如果是，为什么我们不这样做？如果不是，为什么我们需要 & 符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:25:17.030

`Eval`是一个函数模板。从此模板实例化的函数具有返回类型`void`，这意味着它不返回值。它只是`f(3.14)`在内部调用，然后返回给调用者。

它的参数类型是对 type 的*常量引用`F`，*其中`F`是模板参数。通过 const-reference 传递意味着您不能修改函数内部的对象，但*不会进行复制。*函数内部`f`将只是传入的对象（或函数）的不同名称。

`Eval`显然期望它的参数是一个可调用类型：一个函数、一个指向函数的指针或一个定义`operator()`. 因此，您不能将模板参数指定为`double`. 如果有的话，它应该是`double(double)`= 函数接受一个双精度并返回一个双精度。但是，大多数情况下，您根本不必指定模板参数：它将根据您传入的实际参数推导出来。像这样：

```
void myFun(double x)
{
  std::cout << x << '\n';
}

void someFun()
{
  Eval(myFun);
  Eval([](double a){ global_var = a; });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:23:29.853

> 但我不确定应该使用什么类型的函数？

函数类型看起来像`float(float)`.

或者你的意思是返回类型？在现代 C++ 中，您可以推断返回类型：

```
template <typename F>
auto Eval(const F & f) -> decltype(f(3.14)) {
    return f(3.14);
} 
```

如果您坚持使用旧版本的语言，那么它会相当棘手。您可以为普通函数和包含`result_type`定义的函数类型（例如从 派生的函数类型`std::unary_function`）提供重载：

```
template <typename Ret, typename Arg>
Ret eval(Ret (&f)(Arg)) {return f(3.14);}

template <typename F>
typename F::result_type eval(F const & f) {return f(3.14);} 
```

也许通过定义一个特征类或使用[Boost 的函数特征来概括这一点](http://www.boost.org/doc/libs/release/libs/type_traits/doc/html/boost_typetraits/reference/function_traits.html)

> 那么，是不是应该这样调用呢？

如果只有一个具有该名称的函数，则可以使用参数相关查找：

```
Eval(sin); 
```

但是，如果 this 是`std::sin`，则有多个重载，因此您必须指定类型：

```
Eval<float(float)>(sin); 
```

> 此外，我们为什么要使用指针（&-symbol）？

我们没有。那是参考，不是指针。

> 我们通过引用传递参数是因为我们想改变它吗？

不，它是对 的引用`const`，所以我们无法更改它。

> 如果不是，为什么我们需要 & 符号？

有些类型的复制成本很高；别人根本无法复制；但所有类型都可以通过引用传递。所以一个完全通用的函数模板需要通过引用来获取它的参数，以便对所有类型都可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:19:37.790

您传递的东西是**可调用类型**，这意味着它要么是`std::function<double(double)>`指向函数的函数指针，要么是指向函数的函数指针，`(double)(fooptr*)(double)`或者是重载的类/结构，`doubule operator()(double)`以便可以像调用函数一样调用它。

`f()` 你有一个内部的事实`Eval`给你一个线索，任何传递给的类型都`F`应该可以调用`()`

这是您可以使用它的示例：

```
#include<iostream>

template<typename F>     
void Eval( const F& f ) {
    std::cout << f(3.14);
}

double foo(double d)
{
   return d + d;
}
int main()
{

 Eval(foo);
} 
```

[现场示例](http://liveworkspace.org/code/2SZDri%243)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:22:49.403

如果你想返回值，你会想使用这样的东西

```
template<typename F>     
typename F::result_type Eval(F f) {
     return f(3.14);
} 
```

### 笔记

1.  按值传递函数更为惯用。
2.  这可能不适用于`void`返回类型。
3.  该功能必须具有[适应性](http://en.wikipedia.org/wiki/Functional_%28C%2B%2B%29#Adaptable_function_objects)。
4.  您不需要传递模板参数，因为编译器可以自己解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T09:36:51.077

> 据我了解， Eval 函数将另一个函数作为参数并返回其值

不，`Eval`返回无效。`f(3.14)`不使用任何回报。

> 但我不确定应该使用什么类型的函数？它的返回类型？那么，是否应该按以下方式调用呢？ `Eval<float>(sin)`

在大多数情况下`Eval(obj)`就足够了，并且类型`F`将从`obj`. 如果这是模棱两可的，您将需要明确：（ `Eval<float(float)>(sin)`我希望您包含了正确的头文件）。任何可以用`double`参数“调用”的类型的“对象”都将编译。

```
Moreover, why do we use pointers (&-symbol)? 
```

不在这里`const`，`&`意思是 const 参考。你直接接受这个论点，但保证不会改变它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T09:20:36.013

在 C++ 中，模板在编译期间被实例化，所以如果你传递任何支持调用的东西，它就会起作用。

例如：

```
class MyClass
{
public:
    void operator() (double d)
    {
        // Do something
    } 
}

MyClass m;

Eval(m); 
```

或者：

```
Eval([](double d) { /* ... */ }); 
```

或者：

```
void DoSth(double d)
{
    // ...
}

Eval(DoSth); 
```

为什么我们通过 const 引用传递？有几个原因：

*   不复制传递的对象，提高性能；
*   您不能传递不存在的对象（引用不能为空）
*   const 引用中的 const 确保对象本身不会在函数调用中更改

# ipython - 如何更改 ipython 笔记本格式？

> ID：15405210
> 
> 赞同：2
> 
> 时间：2013-03-14T09:15:51.457
> 
> 标签：ipython

我想更改 ipython 笔记本字体类型和颜色主题。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:02:44.433

我邀请你阅读[这篇](http://nbviewer.ipython.org/urls/raw.github.com/Carreau/posts/master/Blog1.ipynb) 文章并点击下一篇文章的链接，向你展示如何为开发版制作主题选择器。还有一些关于笔记本有趣主题的链接，以及在下一个版本中不起作用的解释。

简而言之，`custom.css`如果您有足够新的版本，请在您的个人资料中使用。其他方法将很快被弃用。

# android - Android SQLite 更新查询显示错误

> ID：15405217
> 
> 赞同：3
> 
> 时间：2013-03-14T09:16:09.560
> 
> 标签：android, sqlite, android-sqlite

我有一个下表：

```
sdb.execSQL("create table if not exists userprofile (id integer primary key, profilename text, user text);"); 
```

我想更新 Android SQLite 中的 profilename 字段。

所以我使用了以下代码：

```
ContentValues cv= new ContentValues();
cv.put("user",et4.getText().toString());
String admin="user1";
sdb.update("userprofile", cv, "profilename = " + admin, null); 
```

该表的 profilename 值为 user1。但是当我执行这个我得到

```
03-14 09:12:55.851: E/SQLiteLog(26616): (1) no such column: user1 
```

请帮我解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:19:58.070

它应该是 -

```
ContentValues cv= new ContentValues();
cv.put("user",et4.getText().toString());
String admin="user1";
sdb.update("userprofile", cv, "profilename = '" + admin +"'", null); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:19:59.593

尝试这样做：

```
sdb.update("userprofile", cv, "profilename = ?", new String[] {"user1"}); 
```

我推荐这种方法。占位符的使用可以解决这样的问题。您的方法不起作用，因为您缺少单引号。

# linux - rmmod 失败并显示设备或资源繁忙消息

> ID：15405219
> 
> 赞同：0
> 
> 时间：2013-03-14T09:16:15.823
> 
> 标签：linux, ubuntu

我已经搜索了网络，但仍然没有找到答案。我按照[http://ubuntuforums.org/showthread.php?t=800251](http://ubuntuforums.org/showthread.php?t=800251)上的指示进行操作。它编译好，我可以做 insmod。消息显示正常。但是当我运行 rmmod 时，它会失败并显示“设备或资源繁忙”消息。我更改了模块的名称和insmod，rmmod，同样的情况。我不知道如何强制 rmmod 模块，我也想知道是什么导致了这种“资源繁忙”现象。任何想法？我正在使用 ubuntu，并被告知系统是从未编译的二进制映像安装的，所以我的猜测是系统中存在一些差异。下面的程序有什么问题吗？提前致谢。陈

```
#include <linux/module.h>

static int __init hello_world( void )
{
  printk( "hello world!\n" );
  return 0;
}

static void __exit goodbye_world( void )
{
  printk( "goodbye world!\n" );
}

module_init( hello_world );
module_exit( goodbye_world ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:16:56.897

你的程序对我来说似乎是正确的。事实上，它在我的系统上运行良好。您能否提供任何可能有帮助的其他信息，例如您尝试 rmmod 时的 dmesg 输出。

# javascript - 如何在 tinymce 的 HTML 源代码编辑器中显示不同的元素？

> ID：15405221
> 
> 赞同：1
> 
> 时间：2013-03-14T09:16:17.717
> 
> 标签：javascript, tinymce

我想将自己的控件添加到 tinymce 编辑器（例如`<editable />`）。此控件必须显示如下形式：

```
<div class="editable">
<label>Test<input type="text" /></label>
<label>Test2<input type="text" /></label>
</div> 
```

暂时没有问题。我能做到。但我需要将其设为只读（也没有问题 - 使用不可编辑的插件）

我的问题是：如果用户按“编辑 HTML 源”，我必须`<editable />`只显示元素（没有标签和文本框）。

我不知道这是否可能，但查看`Embeded Media`元素 - 它在编辑器中显示图像，但在 HTML 源代码中将其替换为 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:21:11.153

我的结果有点简单。我只是`<cms:control />`从 HTML 源代码编辑器中删除标签的内容。

在 tinymce init 上进行以下操作：

```
 ed.onPreInit.add(function () {
        ed.parser.addNodeFilter('cms:control', function (nodes) {
            var i = nodes.length;

            while (i--)
                objectToHtml(nodes[i], ed.schema);
        });

        ed.serializer.addNodeFilter('cms:control', function (nodes, name, args) {
            var i = nodes.length, 
                node;

            while (i--) {
                node = nodes[i];
                htmlToObject(node, args);
            }
        });
    });

    function objectToHtml(node, schema) {
        node.empty();

        var html = '<label>Test<input type="text" /></label>' +
                   '<label>Test2<input type="text" /></label>';                     

        var parser = new tinymce.html.DomParser({validate: true}, schema);
        var rootNode = parser.parse(html);

        node.append(rootNode);           
    }

    function htmlToObject(node, args) {
        node.empty();           
    } 
```

# wpf - 为什么 FindAncestor 绑定在 GridViewColumn 中不起作用？

> ID：15405228
> 
> 赞同：2
> 
> 时间：2013-03-14T09:16:28.040
> 
> 标签：wpf, binding, gridviewcolumn, findancestor

我正在尝试创建自己的 GridViewColumn 并在绑定方面遇到一些问题。

有人可以向我解释为什么以下 Header-binding 确实有效

```
<GridViewColumn x:Class="interneProzesse_UebersetzungstoolNS.TranslateGridViewColumn"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:conv="clr-namespace:interneProzesse_UebersetzungstoolNS.Converter"
         xmlns:hk="clr-namespace:interneProzesse_UebersetzungstoolNS.Hilfsklassen"
         xmlns:local="clr-namespace:interneProzesse_UebersetzungstoolNS"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"Header="{Binding RelativeSource={RelativeSource Self}, Path=Sprache, UpdateSourceTrigger=PropertyChanged}">
</GridViewColumn> 
```

虽然它在这里失败了？

```
<GridViewColumn x:Class="interneProzesse_UebersetzungstoolNS.TranslateGridViewColumn"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:conv="clr-namespace:interneProzesse_UebersetzungstoolNS.Converter"
         xmlns:hk="clr-namespace:interneProzesse_UebersetzungstoolNS.Hilfsklassen"
         xmlns:local="clr-namespace:interneProzesse_UebersetzungstoolNS"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<GridViewColumn.Header>
    <GridViewColumnHeader Content="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:TranslateGridViewColumn}}, Path=Sprache, UpdateSourceTrigger=PropertyChanged}"/>
</GridViewColumn.Header>
<GridViewColumn> 
```

`Sprache`是我的 TranslateGridViewColumn 的一个属性，它继承自 GridViewColumn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:25:56.023

发布问题几分钟后，我在此[线程](https://stackoverflow.com/questions/4813237/how-to-use-relative-binding-mode-findancestor)中找到了答案。答案基本上是 GridViewColumn 不会被添加到可视化树中，因此使用此可视化树的绑定（例如 FindAncestor）无法工作。

所以我订阅了我绑定到的元素的加载事件（例如 GridViewColumnHeader）并在代码隐藏中进行了绑定：

```
BindingOperations.SetBinding(sender as GridViewColumnHeader, GridViewColumnHeader.ContentProperty, new Binding("Sprache") { Source = this, UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged, Mode = BindingMode.OneWay }); 
```

# payment-gateway - WooCommerce：根据选择的支付网关向卡添加费用

> ID：15405229
> 
> 赞同：3
> 
> 时间：2013-03-14T09:16:28.607
> 
> 标签：payment-gateway, woocommerce, woothemes

我需要根据客户在 WooCommerce 的购物车中选择的付款方式添加信用卡费用百分比。

这需要添加到购物车总数中，以便将包括费用在内的总金额发送到支付网关。

例如，如果购物车总额为 100 英镑。

如果客户选择“信用卡”付款，我想在交易中添加 2%，使购物车总计 102 英镑。然后，该金额将转到外部信用卡提供商进行处理，因为实际的信用卡处理由他们处理 (WorldPay_)。

我还想为 Paypal 3% 添加不同的金额。

如果客户选择货到付款或银行转账，我不会添加任何费用。

没有 WooCommerce 插件可以做到这一点。我最接近的是这个线程。

[http://support.woothemes.com/entries/22716621-Credit-card-fees](http://support.woothemes.com/entries/22716621-Credit-card-fees)

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-04T16:30:10.437

自由的

*   [WooCommerce](https://wordpress.org/plugins/woocommerce-jetpack) / 网关费用和折扣的助推器 - 更强大

*   [WooCommerce 的基于支付网关的费用和折扣](https://wordpress.org/plugins/checkout-fees-for-woocommerce)- 简单

有薪酬的

*   [基于支付网关的费用](https://woocommerce.com/products/payment-gateway-based-fees/?aff=4361&cid=1780159)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-21T11:31:37.027

你可以使用这个插件在支付网关上设置收费它的免费插件

[https://wordpress.org/plugins/woocommerce-extra-charges-to-payment-gateways/screenshots/](https://wordpress.org/plugins/woocommerce-extra-charges-to-payment-gateways/screenshots/)

# php - 2周后的php脚本cron作业向特定的电子邮件地址发送提醒消息

> ID：15405235
> 
> 赞同：4
> 
> 时间：2013-03-14T09:16:40.680
> 
> 标签：php, mysql, database, email

好的，我有一个 php 脚本，它向用户输入的电子邮件地址发送随机代码。

我需要让用户在 2 周后收到一条提醒消息到同一个电子邮件地址。这应该只发生一次。

我创建了一个数据库表，用于存储用户的电子邮件和添加日期。

如何编写脚本，以便在 2 周后通过电子邮件提醒用户。

我知道我需要使用 cron 作业，我的设置如下所示： ![在此处输入图像描述](../Images/ed267c4a749a85b1121e7122fe8f0efc.png)

据我了解，mailform.php 将每天 23 小时使用，对吗？而且我需要让那个 cron Job 每天都使用脚本来检查用户是否通过了 2 周。

我的数据库表如下所示： ![在此处输入图像描述](../Images/f2de8547a4b989a08c0fda5e52eb5d4a.png)

一切都很好，我只是不知道如何检查是否已经过了两周。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:57:13.937

您可以在脚本中使用以下内容来确定是否已经 2 周：今天 = 2013 年 3 月 14 日

```
<?php
$regDate = "2013-02-28";
$today = date("Y-m-d");

$date = date("Y-m-d",strtotime("+2 weeks", strtotime($regDate)));

if($today == $date)
    //do stuff if 2 weeks
else
    //do stuff if isn't
?> 
```

您将不得不根据您的需要对其进行修改，但确定日期的方法就在那里。

**这个怎么运作：**

```
strtotime("+2 weeks", strtotime($regDate)) 
```

这将占用`$regDate`字符串并从中抽出时间。然后它将增加 2 周并从新时间中抽出时间。

```
date("Y-m-d", above); 
```

然后，这将生成一个`date`可用于比较的`$today`

**请阅读手册**：[PHP 日期](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:46:40.020

没有保存数据的原因是因为您实际上没有保存它。

您需要致电：

```
mysql_query($query); 
```

将您的记录放入数据库。

此外，在 cron 作业中，“分钟”列应为“0”。因此，cron 作业将在每天 23:00 运行。如果在分钟列中输入“*”，它将在 23h 的每一分钟运行，因此 23h00、23h01、23h02、23h03... 等等。

您可以在此处找到有关 crontab 的基本帮助：http: [//crontab.org/](http://crontab.org/)

同样如前所述，如果可以，您应该使用 mysqli_ 函数或 PDO 模块。

mysql_ 函数已被弃用很长时间，取而代之的是 mysqli_ 函数（“i”表示改进）。它们很有可能工作，您不必更改很多代码。

祝你项目好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:26:56.273

> > 据我了解，mailform.php 将每天 23 小时使用，对吗？

不，您需要`0 23 * * * /path/to/script`让它在每天晚上 11 点运行。

这个 MySQL 只会为您提供两周前注册的用户（因此 regDate 恰好是两周前）

```
SELECT * 
FROM `Your_Users_Table_Name`
WHERE `regDate` = DATE_FORMAT(DATE_SUB(NOW(), INTERVAL -2 WEEK), '%Y-%m-%d') 
```

然后在您的 cron 脚本中，您可以使用该查询来获取您的用户，然后遍历发送您的提醒或代码或其他任何内容的行。

## 粗略的例子

```
$sql = "
    SELECT * 
    FROM `Your_Users_Table_Name`
    WHERE `regDate` = DATE_FORMAT(DATE_SUB(NOW(), INTERVAL -2 WEEK), '%Y-%m-%d')
";
if (false === ($result = mysqli_query($connection, $sql)) {
    trigger_error('there was a query/sql problem', E_USER_ERROR);
}
if ($result->num_rows > 0) {
    // ooo we found users from two weeks ago.
    while ($row = mysqli_fetch_row($result)) {
        // send email to user
        mail($row['email'], 'The email Subject', 'The email message body');
        // update the users table and set remind = 1
        if (false === (mysqli_query($connection, "UPDATE `Your_Users_Table_Name` SET `remind` = 1 WHERE `email` = '".$row['email']."'"))) {
            trigger_error('there was a query update problem!', E_USER_ERROR);
        }
        // sleep for 2 second so not to hammer mail systems and get flagged as abusive/spammer
        sleep(2);
    }
    mysqli_free_result($result);
}
else {
    // nothing to do today
} 
```

# c# - 路由规则冲突

> ID：15405239
> 
> 赞同：2
> 
> 时间：2013-03-14T09:16:52.007
> 
> 标签：c#, asp.net, routing

我的应用程序路由 url 是这样的：

```
routes.Add("Rule1",
            new Route("test/12345/{subjectname}/{pageno}",
            new RouteValueDictionary { { "pageno", null } },
            new RouteValueDictionary { { "pageno", @"^[0-9]*$" } },
            new GlobalURLRouteHandler("~/test/test.aspx")));

   routes.Add("Rule2",
                new Route("questions/middle-east/{subjectname}/{pageno}",
                new RouteValueDictionary { { "pageno", null } },
                new RouteValueDictionary { { "pageno", @"^[0-9]*$" } },
                new GlobalURLRouteHandler("~/test/test.aspx")));

        routes.Add("Rule3",
               new Route("questions/universal-affairs/{subjectname}/{topicname}/{pageno}",
               new RouteValueDictionary { { "pageno", null } },
               new RouteValueDictionary { { "pageno", @"^[0-9]*$" } },
               new GlobalURLRouteHandler("~/test/test.aspx")));

        routes.Add("Rule4", new Route("questions/{subjectname}/recent-questions/{pageno}",
              new RouteValueDictionary { { "pageno", null } },
              new RouteValueDictionary { { "pageno", @"^[0-9]*$" } },
              new GlobalURLRouteHandler("~/test/test1.aspx")));

    routes.Add("Rule5", new Route("questions/{subjectname}/{topicname}/recent-questions/{pageno}",
              new RouteValueDictionary { { "pageno", null } },
              new RouteValueDictionary { { "pageno", @"^[0-9]*$" } },
              new GlobalURLRouteHandler("~/test/test2.aspx")));

    routes.Add("Rule6", new Route("questions/{subjectname}/{topicname}/{subtopicname}/recent-questions/{pageno}",
                   new RouteValueDictionary { { "pageno", null } },
                   new RouteValueDictionary { { "pageno", @"^[0-9]*$" } },
        new GlobalURLRouteHandler("~/test/test3.aspx")));

    routes.Add("Rule7", new Route("questions/{subjectname}/recent-questions/{pageno}",
                   new RouteValueDictionary { { "pageno", null } },
                   new RouteValueDictionary { { "pageno", @"^[0-9]*$" } },
        new GlobalURLRouteHandler("~/test/test3.aspx"))); 
```

这些是我现有的网址，现在我想在这些网址**中用 - 替换 /**，当我这样做时，我的网址发生冲突。

谁能建议我如何做到这一点以及如何获得变量的值。

# php - undefined index: postevent .... 解决了它，但产生了其他问题

> ID：15405243
> 
> 赞同：-4
> 
> 时间：2013-03-14T09:17:03.280
> 
> 标签：php, undefined-index

```
$citylink_view = "view=$targetview&postevent=$_GET[postevent]"; 
```

它显示未定义的索引：postevent。我通过使用解决了它

```
$posteventview = $_GET['postevent'];
$citylink_view = "view=$targetview&".$posteventview; 
```

但这在我的 URL 中产生了问题。功能不起作用....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:21:34.253

之前的情况：

```
$citylink_view = "view=$targetview&postevent=$_GET[postevent]"; 
```

这与以下内容相同：

```
$citylink_view = "view=$targetview&postevent=" . $_GET['postevent']; 
```

可以写成：

```
$foo = $_GET['postevent'];
$citylink_view = "view=$targetview&postevent=" $foo; 
```

你写了：

```
$posteventview = $_GET['postevent'];
$citylink_view = "view=$targetview&".$posteventview; 
```

您看得出来差别吗？

此外，您可能容易受到 XSS 的攻击。清理输入和`urlencode`. 使用`filter_*`函数，例如：

```
$posteventview = filter_input(INPUT_GET, "postevent");
$citylink_view = "view=$targetview&postevent=" . urlencode($posteventview); 
```

# android - 某些手机 中 OnClickListener 的 NullPointerException

> ID：15405247
> 
> 赞同：2
> 
> 时间：2013-03-14T09:17:08.630
> 
> 标签：android, android-layout, android-event

我`NullPointerException`在这一行得到了一个：

```
ImageButton sb = (ImageButton) findViewById(R.id.imageButton2);
sb.setOnClickListener(new OnClickListener() { //error on this line

    public void onClick(View v) {
        Intent intent = new Intent(AlarmClock.this,SettingsActivity.class);
        startActivity(intent);
    }
}); 
```

我检查了`setContentView()`它，它指的是正确的布局文件，其`imageButton2`内容如下：

```
<ImageView
    android:id="@+id/imageButton1"
    android:layout_width="0dip"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:layout_weight="0.275"
    android:scaleType="fitCenter"
    android:src="@drawable/bell_icon" /> 
```

这是崩溃报告：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.moosa.alarmclock/com.moosa.alarmclock.AlarmClock}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3689)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at com.moosa.alarmclock.AlarmClock.updateLayout(AlarmClock.java:260)
    at com.moosa.alarmclock.AlarmClock.onCreate(AlarmClock.java:220)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
    ... 11 more 
```

最大的问题是：我在 GingerBread 电话或 ICS 模拟器上找不到错误。似乎这个问题主要发生在为已发布报告发送崩溃报告的 Galaxy S3 上。

请帮助我，因为这是我第一个发布的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:33:40.560

如果您有多个布局文件要使用不同的屏幕尺寸或方向，则 S3 可能正在加载其中一个文件，其中您的 ImageButton 具有不同的 ID，或者完全丢失。

这将导致空值并导致您的崩溃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T09:22:57.267

请把如果之前

ImageButton sb = (ImageButton)findViewById(R.id.imageButton2); 如果（某人！=空）

```
sb.setOnClickListener(new OnClickListener() { 
    public void onClick(View v) {
        Intent intent = new Intent(AlarmClock.this,SettingsActivity.class);
        startActivity(intent);

    }
}); 
```

否则它将在运行时崩溃。

# android - InputConnection.commitText(CharSequence text, int newCursorPosition) 只能提交英文字符和数字？

> ID：15405253
> 
> 赞同：6
> 
> 时间：2013-03-14T09:17:28.397
> 
> 标签：android, android-softkeyboard, android-input-method

**我实现了一个名为RemoteInput**的输入法，它只是扩展了 InputMethodService，没有 InputViews 也没有键盘。当用户选择**RemoteInput**作为默认 IME 时，**RemoteInput**会将当前输入状态发送到其他设备，用户可以远程执行输入操作（使用我们的客户化协议）。输入完成后，在其他设备中输入的文本将被发送回当前设备，然后 RemoteInput 使用 .将文本提交到当前 UI 组件（如 EditText）`InputConnection.commitText (CharSequence text, int newCursorPosition)`。

当远程输入的文本是英文字符和数字时，它工作得很好，但是当涉及到其他字符时，就会出错。我发现`InputConnection.commitText`过滤其他字符。比如我输入`hello你好`，只有提交`hello`成功。和更多：

*   `hello world`==>`helloworld`
*   `hello,world!!`==>`helloworld`

你所说的任何事情都会有所帮助，在此先感谢。

这是我的代码：

```
public class RemoteInput extends InputMethodService {
    protected static String TAG = "RemoteInput";

    public static final String ACTION_INPUT_REQUEST = "com.aidufei.remoteInput.inputRequest";
    public static final String ACTION_INPUT_DONE = "com.aidufei.remoteInput.inputDone";

    private BroadcastReceiver mInputReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            if (ACTION_INPUT_DONE.equals(intent.getAction())) {
                String text = intent.getStringExtra("text");
                Log.d(TAG, "broadcast ACTION_INPUT_DONE, input text: " + text);
                input(text);
            }
        }
    };

    @Override
    public void onCreate() {
        super.onCreate();

        registerReceiver(mInputReceiver, new IntentFilter(ACTION_INPUT_DONE));
    }

    @Override
    public View onCreateInputView() {
        //return getLayoutInflater().inflate(R.layout.input, null);
        return null;
    }

    @Override
    public boolean onShowInputRequested(int flags, boolean configChange) {
        if (InputMethod.SHOW_EXPLICIT == flags) {
            Intent intent = new Intent(ACTION_INPUT_REQUEST);
            getCurrentInputConnection().performContextMenuAction(android.R.id.selectAll);
            CharSequence text = getCurrentInputConnection().getSelectedText(0);
            intent.putExtra("text", text==null ? "" : text.toString());
            sendBroadcast(intent);
        }
        return false;
    }

    public void input(String text) {
        InputConnection inputConn = getCurrentInputConnection();
        if (text != null) {
            inputConn.deleteSurroundingText(100, 100);
            inputConn.commitText(text, text.length());
        }
        //inputConn.performEditorAction(EditorInfo.IME_ACTION_DONE);
    }

    @Override
    public void onDestroy() {
        unregisterReceiver(mInputReceiver);
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-09-19T07:51:49.753

如果您使用的语言不是英语，则需要使用 Unicode。您需要将您的 Unicode 字体附加到您的项目中，并将元素的字体（例如 EditText）设置为您附加的字体。请参阅以下内容以了解如何将自定义字体添加到您的应用程序。

[http://tharindudassanayake.wordpress.com/2012/02/25/use-sinhala-fonts-for-your-android-app/](http://tharindudassanayake.wordpress.com/2012/02/25/use-sinhala-fonts-for-your-android-app/)

第二个选项是根您的设备并安装所需的字体。

# .net - 服务器错误：HTTP 错误 500.19 - 内部服务器错误

> ID：15405263
> 
> 赞同：0
> 
> 时间：2013-03-14T09:17:51.470
> 
> 标签：.net, iis

当我尝试在 IIS 上运行我的网站时遇到此错误...我看到了一些问题...实际上我遇到了[这个](https://stackoverflow.com/questions/929131/how-do-i-resolve-http-error-500-19-internal-server-error-on-iis7-0) 但仍然是同样的错误..请给我一些想法..提前谢谢

![在此处输入图像描述](../Images/d3e8976822b33d225eb5416c77a9a776.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:05:13.060

将包含网站内容的文件夹从桌面文件夹删除到另一个路径，例如。C:\publish，并授予此文件夹上应用程序池的读/写权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:30:17.477

更改匿名身份验证以使用应用程序池。

# cross-compiling - 如何在交叉编译器下使用 libssl-dev？

> ID：15405266
> 
> 赞同：4
> 
> 时间：2013-03-14T09:18:10.863
> 
> 标签：cross-compiling

我想为arm目标交叉编译这个lib [http://carnivore.it/2011/04/23/openssl_-_af_alg](http://carnivore.it/2011/04/23/openssl_-_af_alg)

但源代码需要 libssl-dev。我可以为 i386 编译它，因为 gcc 可以从 libssl-dev 中找到头文件，但是当我使用交叉编译器 :arm-none-linux-gnueabi-gcc 时，
arm-none-linux-gnueabi-gcc 不能找到头文件，我如何告诉 arm-none-linux-gnueabi-gcc 在哪里可以找到头文件？

# javascript - Firebug 在 ajax 调用后停止 window.location

> ID：15405269
> 
> 赞同：1
> 
> 时间：2013-03-14T09:18:23.597
> 
> 标签：javascript, jquery, firebug

我对萤火虫有一个奇怪的问题。当我使用 jquery 进行 ajax 调用并在成功方法中执行 window.location.href = "to some url" 时，浏览器不会转到该页面。

如果我禁用萤火虫它可以工作。我在控制台中没有收到任何错误，我尝试重新启动浏览器我也重置了 firebug 选项，但没有成功。有没有人有同样的问题？

我在其他也使用以前有效的 window.locaton.href 的页面上遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:30:36.450

请检查是否错误地在行上放置了任何断点`window.location.href`。如果是这样，萤火虫将停止对该行的控制。当您停止通过 firebug 进行调试时。它会正常工作。

Firebug 或任何调试器不会阻止任何代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:43:44.833

这[之前被报道为Firebug问题](http://code.google.com/p/fbug/issues/detail?id=6082)，但没有STR，后来记者未能重现。我认为它已在最近的 Firefox+Firebug 版本中得到修复（尝试 nightlies），但如果没有，请发布关于该问题的说明。

# javascript - html5 的验证器（例如不管用

> ID：15405272
> 
> 赞同：0
> 
> 时间：2013-03-14T09:18:30.460
> 
> 标签：javascript, jquery, html, asp.net-mvc, knockout.js

我在mvc中工作。我有一个视图，其中使用 ajax post、knockout、javascript 将表单发布到服务器。表单中的名称字段是必需的，代码字段是必需的。因此，我在表格中使用了以下代码作为名称：-

```
 <input type="text"  data-bind="value:Name" placeholder = "Enter Name" required  /><br /> 
```

我使用以下javascript发布表格

```
 <script type="text/javascript">

     var EmpViewModel = function () {

         //Make the self as 'this' reference
         var self = this;
         //Declare observable which will be bind with UI 
         self.Code = ko.observable("");
         self.Name = ko.observable("");
         self.DateOfBirth = ko.observable("");
         self.Age = ko.observable("");
         self.ContactNumber = ko.observable("");
         self.Email = ko.observable("");
         self.Address = ko.observable("") ;
         self.MaritalStatus = ko.observable("");
         self.City = ko.observable("");
         self.Reference = ko.observable("");

         //The Object which stored data entered in the observables
         var EmpData = {
             EmpCode: self.Code,
             EmpName: self.Name,
             Dob: self.DateOfBirth,
             Age: self.Age,
             ContactNumber: self.ContactNumber,
             MaritalStatus: self.MaritalStatus,
             EmailID: self.Email,
             Address: self.Address,
             City: self.City,
             Reference: self.Reference
         };

         //Declare an ObservableArray for Storing the JSON Response
         self.Employees = ko.observableArray([]);

         //Function to perform POST (insert Employee) operation
         this.save = function () {

             //Ajax call to Insert the Employee
             $.ajax({
                 type: "POST",
                 url: "/Exercise/Save/",
                 data: ko.toJSON(this), //Convert the Observable Data into JSON
                 contentType: "application/json",
                 success: function (data) {
                     alert(data);
                     window.close();
                     //                        opener.location.reload(true);
                 },
                 error: function () {
                     alert("Failed");
                 }
             });
             //Ends Here
         };
     }

     ko.applyBindings(new EmpViewModel());
</script> 
```

我的表单中存在各种验证器，但没有任何作用。即使没有填写任何字段也正在提交表单？

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:27:46.977

HTML5 CR 中定义的表单数据验证仅适用于通过 HTML 提交的表单，例如使用`<input type=submit>`. 它不适用于脚本提交，即使您只是使用`submit()`表单的方法，更不用说 Ajax POST。

此外，IE 不支持 HTML5 的这一部分，直到版本 9。

由于这些原因，您应该在自己的 JavaScript 代码中执行表单数据验证，可能使用合适的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:48:32.090

您的表单验证没有做任何事情，因为您实际上并没有提交表单。您只需处理按钮按下、序列化视图模型并使用 jquery 向服务器发送 POST 请求。

我们需要查看您的表单提交代码来帮助您，但如果您使用 jQuery 验证，您应该调用 .valid()

```
 //somewhere in the document
    $(function() {
        //use jQuery validates default rules and validate on form submit
        $("#MyForm").validate();
    }) 
```

你的视图模型

```
 //changed to self from this for consistency
    self.save = function () {
        //what you SHOULD be doing is validating against your model. BUT, in the interest of time...
        var isValid = $("#MyForm").valid();
        if(isValid !== true) {
            alert("Not Valid!"); //please don't use an alert in a real app!
            return;
        }
         //Ajax call to Insert the Employee
         $.ajax({
             type: "POST",
             url: "/Exercise/Save/", //change this to self again, for consistency AND so you aren't relying on whatever is firing the save function to set this properly
             data: ko.toJSON(self), //Convert the Observable Data into JSON
             contentType: "application/json",
             success: function (data) {
                 alert(data);
                 window.close();
                 //                        opener.location.reload(true);
             },
             error: function () {
                 alert("Failed");
             }
         });
         //Ends Here
     }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:09:35.830

如果您还使用页面中的 jquery.validate.js 文件进行表单验证，那么它会在您的每个表单元素中隐含地添加值为 'novalidate'(true) 的 'novalidate' 属性，这会导致您的 html5 验证失败。

# ember.js - EmberJS：未为附加视图设置控制器。为什么？

> ID：15405274
> 
> 赞同：1
> 
> 时间：2013-03-14T09:18:33.653
> 
> 标签：ember.js

我正在为我的 Ember 应用程序中的一个错误而苦苦挣扎。我希望有人能对可能发生的事情有所了解。我的一个控制器的操作添加了一个视图：

```
addView: function(){
    var view = Ember.View.create({
        templateName: 'to_be_added',
        controller: this
    });
    view.append();
} 
```

我的模板如下所示：

```
<script type="text/x-handlebars" data-template-name="to_be_added">
    Added view.
    {{controller}}
</script> 
```

我知道它应该可以工作（它在这个 JSFiddle 中可以工作：http: [//jsfiddle.net/XWzWp/1/](http://jsfiddle.net/XWzWp/1/)）。但在我的应用程序的上下文中，它失败了。没有为视图设置控制器：`{{controller}}`是`null`.

我无法弄清楚发生了什么。有任何想法吗？

谢谢， PJ

# javascript - 如何使用Javascript在文本框onEnter函数中执行if语句

> ID：15405278
> 
> 赞同：0
> 
> 时间：2013-03-14T09:18:51.890
> 
> 标签：javascript, jquery-mobile

我的 document.ready 函数上有一些代码，它必须从文本框中获取扫描的条形码。但是，如果文本框内没有任何内容，则会出现一个弹出窗口，告诉用户扫描某些内容。我有一个按钮可以完美地完成所有操作，但是当我在文本框中使用回车键时，不会出现弹出窗口。可能有什么问题？我正在使用 JQuery 移动。

```
$(document).ready(function () {

    $("#txtBarcode").focus();
    $("#btnBarcode").click(getBarcode);

    var imageContainer = document.getElementById("divImage");

    $('#txtBarcode').live("keyup", function (event) {
    if (event.keyCode == '13') {
        getBarcode();
        }
    });
}); 
```

# jsf - JSF PrimeFaces 动态数据表映射

> ID：15405279
> 
> 赞同：4
> 
> 时间：2013-03-14T09:18:56.057
> 
> 标签：jsf, primefaces

在 PrimeFaces 和 dataTable 上处理动态表格内容。目标是动态呈现表格列标题和内容。

这是我的 bean 代码：

```
@ManagedBean(name="treeBean")
@SessionScoped
public class TreeBean implements Serializable {
    private static Logger log = Logger.getLogger(TreeBean.class);
    private static final long serialVersionUID = 1L;
    private List<TableColHeader> tableColHeaderList;

    /** Project-specific data structure. One list entry per one table row, Integer in Map is number of column */
    private List<Map<Integer,String>> tableContent;

    public TreeBean() {
        tableColHeaderList=MockedDataProvider.getDemo1ColHeaderList();
        tableContent=MockedDataProvider.getDemo1TableContent();     
        log.info("TreeBean started");
    }

    public int getTableColHeaderIndex(TableColHeader tableColHeader) {
        return tableColHeaderList.indexOf(tableColHeader);
    } 

    public List<TableColHeader> getTableColHeaderList() {
        return tableColHeaderList;
    }

    public void setTableColHeaderList(List<TableColHeader> tableColHeaderList) {
        this.tableColHeaderList = tableColHeaderList;
    }

    public List<Map<Integer,String>>  getTableContent() {
        return tableContent;
    }

    public void setTableContent(List<Map<Integer,String>> tableContent) {
        this.tableContent = tableContent;
    }   

    public List<Integer> getTableContentIdKeysAsList(int id){
         return new ArrayList<Integer>(tableContent.get(id).keySet());
    }   
} 
```

TableColHeader.java - 作为模型：

```
public class TableColHeader {   
    private String propertyUri;
    private String label;
    private String unitLabel;
    private String unitUri;
//getters,setters,equals,hashCode..
} 
```

这是我的 JSF 页面数据表代码：

```
<p:dataTable id="queryResults" var="tableContentVar" value="#{treeBean.tableContent}">                                               
   <p:columns value="#{tableBean.tableColHeaderList}" var="column"  >  
     <f:facet name="header">  
     #{column.label}  
     </f:facet>                       
     <h:outputText value="#{tableContentVar.values().toArray()[treeBean.getTableColHeaderIndex(column)]}" /> 
   </p:columns>                                                       
</p:dataTable> 
```

我已经阅读了有关空 columnIndexVar 值的问题，例如[https://code.google.com/p/primefaces/issues/detail?id=4449](https://code.google.com/p/primefaces/issues/detail?id=4449)，但是从 bean 获取索引也无济于事。

我只是在 dataTable 应该在的地方看不到任何东西，也没有例外。请问有什么想法吗？

使用 Primefaces 3.5 和 JBoss 7.1.1.Final。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:17:52.617

感谢@partlov，这里的错误是在 JSF 代码中引用了`tableBean`on 。`treeBean`

所以这里是工作代码：

```
<p:dataTable id="queryResults" var="tableContentVar" value="#{treeBean.tableContent}" >                                              
    <p:columns value="#{treeBean.tableColHeaderList}" var="column"  >  
    <f:facet name="header">  
     #{column.label}  
     </f:facet>                       
    <h:outputText value="#{tableContentVar.values().toArray()[treeBean.getTableColHeaderIndex(column)]}" /> 
    </p:columns>                                                      
</p:dataTable> 
```

# ios - 我应该避免为新版本更改我的 iOS 应用程序的 CFBundleName 吗？

> ID：15405281
> 
> 赞同：4
> 
> 时间：2013-03-14T09:19:02.973
> 
> 标签：ios, updates

`CFBundleName`我在 Info.plist 中有一个已经发布的 iOS 应用程序。

对于更新，`CFBundleName`出于一致性原因，我更改了（以及因此生成的 .app 产品的名称）。这对用户来说是不可见的，他们只看到`CFBundleDisplayName`.

但是，客户端设备上的更新似乎无法正常工作——更新进度条到达末尾，跳回到开头，然后停止。唯一的解决方案是删除并重新安装该应用程序。

所以：

*   是否禁止更改`CFBundleName`已经存在的应用程序？
*   是它破坏了我的更新吗？
*   如果是这样，为什么 Apple 的验证过程没有对此进行检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-21T15:22:03.097

两年后，我用一个最佳猜测的答案来回答这个老问题：不，不应该特别避免更改 CFBundleName。

# java - 如何在 GWT 中向客户端发送 XML 文档？

> ID：15405283
> 
> 赞同：1
> 
> 时间：2013-03-14T09:19:15.087
> 
> 标签：java, html, xml, gwt

我有这段代码：

```
public void generateXML(DynamicForm form) {
        Document doc = XMLParser.createDocument();

        Element root = doc.createElement("root");
        doc.appendChild(root);

        Element node1 = doc.createElement("node1");
        node1.setAttribute("attribute","test");
        node1.appendChild(doc.createTextNode("my value"));
        doc.appendChild(node1);

        Element node2 = doc.createElement("node2");
        node2.setAttribute("attribute","anothertest");
        doc.appendChild(node2);
        System.out.println(doc.toString());
    } 
```

如何将此文档发送到客户端进行下载而不将其存储在目录中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:56:03.827

这实际上取决于您希望如何在客户端处理它。

如果您希望为用户显示下载的文件弹出窗口，请遵循用户[如何在客户端下载文件（Google Web Toolkit）](https://stackoverflow.com/questions/13725198/how-to-make-user-can-download-file-in-client-side-google-web-toolkit/)

如果您希望处理 xml 文件下载以显示一些图表/等，请使用带有 gwt xml 处理的请求构建器概念。

```
Reference 1 - https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests
Reference 2 - https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasics#DevGuideXML
Reference 3 - https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsXML 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:37:16.837

很难说“ `NO`”。但它的`true`。

你不能自己做`client`。`Gwt`( `Javascript`) 没有将内容写入用户驱动器的权限。

您必须制作一个`request`.（例如：[FileDownLoadServlet](https://stackoverflow.com/questions/12110090/send-a-file-from-server-to-client-in-gwt)）。

无论如何，你必须做一个`request`to `server`。

# php - Symfony 资产：转储运行时异常

> ID：15405284
> 
> 赞同：8
> 
> 时间：2013-03-14T09:19:17.757
> 
> 标签：php, symfony, symfony-2.1, assetic, capifony

我正在逐步使用 Capifony 部署我的 Symfony 应用程序。当 Capifony 执行assetic:dump 时，我得到一个运行时异常。

> [RuntimeException]
> 无法写入文件 {path}/releases/20130314071536/app/../web/js/。

我尝试手动执行命令并得到相同的异常。
然后我使用 --verbose 参数尝试了该命令，并意识到所有具有源路径的文件都包含一个点，其中没有文件名，只有扩展名。当遇到没有扩展名的文件名（在本例中为 Makefile）并尝试写入文件“。”时出现异常。（只有一个点）。

在同一台服务器上的另一个域上，我有完全相同的代码，但手动部署。我没有得到这个错误。所以PHP版本不会有问题。我还检查了 Assetic 和 Assetic-Bundle 版本，它们是相同的。

什么可能是资产工作不同的原因？

编辑：
我忘了提到它在我的开发机器上也能正常工作。

编辑2：
它开始在文件上失败

编辑 3：
我刚刚意识到它适用于开发环境......但是对于 --env=prod 它会出现问题

> web/bundles/assets/assets/images/icons/aws.png

我没有在任何模板中使用的文件

来自错误的堆栈跟踪

```
Exception trace:
 () at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/vendor/symfony/assetic-bundle/Symfony/Bundle/AsseticBundle/Command/DumpCommand.php:249
 Symfony\Bundle\AsseticBundle\Command\DumpCommand->doDump() at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/vendor/symfony/assetic-bundle/Symfony/Bundle/AsseticBundle/Command/DumpCommand.php:187
 Symfony\Bundle\AsseticBundle\Command\DumpCommand->dumpAsset() at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/vendor/symfony/assetic-bundle/Symfony/Bundle/AsseticBundle/Command/DumpCommand.php:64
 Symfony\Bundle\AsseticBundle\Command\DumpCommand->execute() at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/vendor/symfony/symfony/src/Symfony/Component/Console/Command/Command.php:238
 Symfony\Component\Console\Command\Command->run() at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/vendor/symfony/symfony/src/Symfony/Component/Console/Application.php:192
 Symfony\Component\Console\Application->doRun() at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Console/Application.php:78
 Symfony\Bundle\FrameworkBundle\Console\Application->doRun() at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/vendor/symfony/symfony/src/Symfony/Component/Console/Application.php:105
 Symfony\Component\Console\Application->run() at /home/yanic.info/domains/pe.yanic.info/public_html/releases/20130318143912/app/console:33 
```

配置.yml

```
# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
    form:
        resources: [HomeBundle:Form:fields.html.twig]
# Assetic Configuration
assetic:
    write_to: "%kernel.root_dir%/../web"
    debug:          %kernel.debug%
    use_controller: false
    bundles:        ['YanicSecurityBundle','HomeBundle','UsersBundle','CmsBundle','AssetsBundle','FormBundle','TranslationBundle','EventBundle','ShopBundle','NewsletterBundle','IssueBundle','ProjectBundle']
    filters:
        cssrewrite: ~ 
```

编辑 4：
当搜索 aws.png （第一个被破坏的结果）时，缓存文件中有 2 个结果：

```
/Applications/MAMP/htdocs/symfony-standard-2.1/app/cache/dev/appDevUrlGenerator.php:
  112          '_assetic_e4d7f8d' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => 'e4d7f8d',    'pos' => NULL,    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/assets/images/icons/arrow_rotate_clockwise.png',    ),  ),),
  113          '_assetic_e4d7f8d_0' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => 'e4d7f8d',    'pos' => '0',    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/assets/images/icons/arrow_rotate_clockwise_arrow_rotate_clockwise_1.png',    ),  ),),
  114:         '_assetic_e1ec2e3' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => 'e1ec2e3',    'pos' => NULL,    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/assets/images/icons/aws.png',    ),  ),),
  115          '_assetic_e1ec2e3_0' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => 'e1ec2e3',    'pos' => '0',    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/assets/images/icons/aws_aws_1.png',    ),  ),),
  116          '_assetic_490c282' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => '490c282',    'pos' => NULL,    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/assets/images/icons/cancel.png',    ),  ),),
  ...
  874          '_assetic_13192a1' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => '13192a1',    'pos' => NULL,    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/images/icons/arrow_rotate_clockwise.png',    ),  ),),
  875          '_assetic_13192a1_0' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => '13192a1',    'pos' => '0',    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/images/icons/arrow_rotate_clockwise_arrow_rotate_clockwise_1.png',    ),  ),),
  876:         '_assetic_3d6d4c9' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => '3d6d4c9',    'pos' => NULL,    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/images/icons/aws.png',    ),  ),),
  877          '_assetic_3d6d4c9_0' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => '3d6d4c9',    'pos' => '0',    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/images/icons/aws_aws_1.png',    ),  ),),
  878          '_assetic_5ea17b1' => array (  0 =>   array (  ),  1 =>   array (    '_controller' => 'assetic.controller:render',    'name' => '5ea17b1',    'pos' => NULL,    '_format' => 'png',  ),  2 =>   array (  ),  3 =>   array (    0 =>     array (      0 => 'text',      1 => '/js/images/icons/cancel.png',    ),  ),),

/Applications/MAMP/htdocs/symfony-standard-2.1/app/cache/dev/appDevUrlMatcher.php:
  517  
  518          // _assetic_e1ec2e3
  519:         if ($pathinfo === '/js/assets/images/icons/aws.png') {
  520              return array (  '_controller' => 'assetic.controller:render',  'name' => 'e1ec2e3',  'pos' => NULL,  '_format' => 'png',  '_route' => '_assetic_e1ec2e3',);
  521          }
  ...
 4327  
 4328          // _assetic_3d6d4c9
 4329:         if ($pathinfo === '/js/images/icons/aws.png') {
 4330              return array (  '_controller' => 'assetic.controller:render',  'name' => '3d6d4c9',  'pos' => NULL,  '_format' => 'png',  '_route' => '_assetic_3d6d4c9',);
 4331 
```

编辑 5：
按照@cheesemacfly 的建议，我删除了hearsay_require_js 捆绑包，问题就消失了。既然我知道该错误应归咎于什么，我需要知道为什么它只发生在登台服务器上以及使用 Capifony 进行部署时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T11:23:21.543

尝试重新创建缓存目录。

当您的缓存不同步时，您可能会遇到各种奇怪的行为。

要清除缓存：

```
rm -rf app/cache/*

sudo chmod +a "www-data allow delete,write,append,file_inherit,directory_inherit" app/cache
sudo chmod +a "`whoami` allow delete,write,append,file_inherit,directory_inherit" app/cache 
```

或者

```
rm -rf app/cache/*

sudo setfacl -R -m u:www-data:rwX -m u:`whoami`:rwX app/cache
sudo setfacl -dR -m u:www-data:rwx -m u:`whoami`:rwx app/cache 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T13:27:05.693

就像其他用户说的那样，这是权限的问题。

`rm -rf symfonyProject/app/cache/*`

`chmod -R 755 symfonyProject/`

`chmod -R 777 symfonyProject/app/cache/`

`chmod -R 777 symfonyProject/app/logs/`

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:45:04.237

检查您的权限，您似乎没有写权限

```
Unable to write file {path}/releases/20130314071536/app/../web/js/. 
```

看这里：[http](http://symfony.com/doc/2.0/book/installation.html) ://symfony.com/doc/2.0/book/installation.html设置权限部分。

一个问题...

你可以上传你的 deploy.rb 配置吗？您是否设置了用户、root 模式...？

您还可以通过取消注释以下行来更详细

```
logger.level = Logger::MAX_LEVEL 
```

你会看到一步一步的部署

# java - 带有动态 where 子句的预处理语句

> ID：15405288
> 
> 赞同：7
> 
> 时间：2013-03-14T09:19:31.707
> 
> 标签：java, sql, prepared-statement

我有一个包含多个搜索条件的搜索页面

1.  员工姓名
2.  员工ID
3.  加入的日期
4.  部门

ETC

用户可以提供一个或多个搜索条件。我需要查询数据库以获取搜索结果。

使用普通的 JDBC，有两个选项可以实现这一点。

1.  通过附加用户提供的搜索条件来准备 SQL 查询。

前任：

```
String selectClause = "SELECT * FROM EMPLOYEES WHERE ";
String whereClause = "";
if(StringUtils.isNotBlank(empName)){
    if(whereClause.length > 0){
        whereClause += " AND ";
    }
    selectQuery += " EMP_NAME = " + empName;
}
if(StringUtils.isNotBlank(empID)){
    if(whereClause.length > 0){
        whereClause += " AND ";
    }
    selectQuery += " EMP_ID = " + empID;
}
//... and so on ... 
```

2.  使用`preparestatement`

前任：

```
String query = "SELECT * FROM EMPLOYEES WHERE EMP_NAME = ? AND EMP_ID = ? DATE_OF_JOINING = ? AND DEPARTMENT = ?"; 
```

这个[答案](https://stackoverflow.com/a/9943738/960778)解释说，就像上面的 ex 1，ex2 可以修改，如下所示

```
String selectClause = "SELECT * FROM EMPLOYEES WHERE ";
String whereClause = "";
if(StringUtils.isNotBlank(empName)){
    if(whereClause.length > 0){
        whereClause += " AND ";
    }
    selectQuery += " EMP_NAME = ?";
}
if(StringUtils.isNotBlank(empID)){
    if(whereClause.length > 0){
        whereClause += " AND ";
    }
    selectQuery += " EMP_ID = ?";
}
//... and so on ... 
```

然后仔细（记住参数索引）输入需要设置为准备好的语句。这听起来不是一个非常理想的解决方案。

有没有办法以优雅的方式做到这一点（没有 ORM 框架）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:25:32.127

我不喜欢`StringBuilder`每次都使用 a 来动态创建查询，尤其是当有意义的组合的数量是可数且有限的时。

我总是更喜欢静态字符串。是的，您必须输入它们，但您只需要输入一次。我宁愿这样做，也不愿在复杂性和运行时付出代价。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-16T06:11:48.477

在这种情况下，我更喜欢添加`1=1`where 子句，这样您就不必跟踪插入的位置`AND`。

```
String selectClause = "SELECT * FROM EMPLOYEES WHERE 1=1 ";
if(StringUtils.isNotBlank(empName)){
   selectQuery += "AND EMP_NAME = " + empName;
}
if(StringUtils.isNotBlank(empID)){
   selectQuery += "AND EMP_ID = " + empID;
}
//... and so on ... 
```

相关[问题](https://stackoverflow.com/questions/242822/why-would-someone-use-where-1-1-and-conditions-in-a-sql-clause)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-09T16:30:04.417

这很容易做到，无需任何复杂或昂贵的逻辑，只需一行......

假设您的三个变量是@name、@surname 和@gender。

还假设在不需要过滤器时将提供零长度字符串。

然后，您的 Select 语句很简单：

```
 select * from table_name where (name = @name or @name = '') and (surname = @surname or @surname = '') and (gender = @gender or @gender = '') 
```

这里的所有都是它的！没有复杂或昂贵的逻辑。

# c# - 无法在 C# 和 XNA 中正确初始化父类的子类

> ID：15405289
> 
> 赞同：0
> 
> 时间：2013-03-14T09:19:32.327
> 
> 标签：c#, class, inheritance, parent

我在寻找解决问题的方法时发现了这个网站，我想知道是否有人可以帮助我尝试解决我的困境。

我正在使用 XNA 和 C# 来创建用户能够从他们随机选择的零件组装汽车的东西。这辆车不必有 4 个轮子和挡风玻璃。它只需要由用户选择的至少 7 个部分组成。我创建了一个名为“Car”的类，它将创建用户选择的部件的所有 7 个实例。这些部件属于“CarPart”类。我还创建了两个独立的“CarPart”子类，称为“Wheel”和“Windshield”。我打算稍后扩展这些部分，例如添加“门”和“树干”等。

所以我所做的是在我的 Car 类中，声明 7 个“CarPart”类型的对象，然后将它们声明为 new Windshield()。或新的轮子（）。

但是当我尝试访问 Windshield 或 Wheel 类的初始化函数时，它只允许我访问父“CarPart”类的初始化函数。

我是在尝试以正确的方式做到这一点，还是应该找到另一种解决问题的方法？

我也尝试过使用 Virtual 和 Override 来尝试重载函数，但我似乎也无法让它正常工作，它只是说，“找不到合适的重载方法”。

我已经包含了我的课程代码。

任何帮助都会令人惊叹，我已经被困了好几天，如果没有用户能够按照自己的意愿组装汽车的功能，我就无法继续我的项目。

我发现了与我在此链接上尝试做的类似的事情，但我似乎无法让它工作。 [http://csharp-station.com/Tutorial/CSharp/Lesson09](http://csharp-station.com/Tutorial/CSharp/Lesson09)

我确定我在做一些我看不到的愚蠢的事情，因为我已经盯着同一个问题太久了。

车类：

```
namespace TestGame4
{
    class Car
    {
        //Car consists of 7 CarParts chosen by the user//
        //e.g.: 

        CarPart Part1, Part2, Part3, Part4, Part5, Part6, Part7; 

        public void Initialize(CarPart part1, CarPart part2, CarPart part3, CarPart part4, CarPart part5, CarPart part6, CarPart part7)
        {
            Part1 = part1;
            Part2 = part2;
            Part3 = part3;
            Part4 = part4;
            Part5 = part5;
            Part6 = part6;
            Part7 = part7;       

            ***//This is the part that doesn't work how I want it to. I want it to initialize 
            //as a Windshield class, but it's only initializing as a CarPart class//***
            part1.Initialize(

        }
    }
}

CarPart class:

namespace TestGame4
{
    public class CarPart
    {
        public void Initialize(string assetName, Vector2 Position)
        {

        }
    }
} 
```

挡风玻璃类：

```
namespace TestGame4
{
    public class Windshield : CarPart
    {
        public void Initialize(Vector2 Position)
        {

        }
    }
} 
```

轮组：

```
namespace TestGame4
{
    public class Wheel : CarPart
    {
        public void Initialize(Vector2 Position)
        {

        }
    }
} 
```

我在其中初始化 Car 类并尝试使用 Windshield 和 Wheel 类作为参数设置它的主要 Game1 类：

```
namespace TestGame4
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        Car myCar;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            myCar = new Car();
            myCar.Initialize(new Windshield(), new Wheel(), new Windshield(), new Wheel(), new Windshield(), new Wheel(), new Windshield());           

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // TODO: Add your drawing code here

            base.Draw(gameTime);
        }
    }
} 
```

我将非常感谢我得到的任何帮助！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:29:42.907

你`Windshield`和`Wheel`都是`CarPart`. 对于`Car`类，它们只是`CarPart`（如定义的那样），所以`Car`不知道它们中的任何一个是`Wheel`还是`Windshield`。至少在编译时不是。

要解决此问题，您需要为这些类添加一个接口。`CarPart`或者添加一个更容易的抽象函数。

```
abstract class CarPart
{
   public abstract void Initialize(Vector2 position);
   public void Initialize(string assetName, Vector2 position)
   {
   }
} 
```

之后，两个子类都需要重写这个函数，否则它们也将是抽象的（抽象类不能用于创建对象）。

接口非常简单：接口是您需要从类中获得的行为。例如

```
interface IInitializable
{
   void Initialize (Vector2 position);
}
class WindShield: IIinitializable
{
   void Initialize (Vector2 position)
   {
      ...
   }
} 
```

然后你可以写`CarPart`：

```
IInitializable [] parts = new IInitializable [7];
parts[0] = new WindShield();
...
parts[6] = new Wheel();

parts[3].Initialize(new Vector2(0, 0)); 
```

所以这些部分都符合接口`IInitializable`，你可以调用通用方法`Initialize (Vector2)`。当不同的不相关的类实现相同的行为时，接口是最有用的，比如`IQueryable`or`IDisposable`等​​等。

# c# - 检查 URL 是否有效

> ID：15405292
> 
> 赞同：0
> 
> 时间：2013-03-14T09:19:32.720
> 
> 标签：c#

```
string url = "www.google.com";

public bool UrlIsValid(string url)
{
    bool br = false;
    try
    {
                    IPHostEntry ipHost =  Dns.GetHostEntry(url);
                                     br = true;
    }
    catch (SocketException)
    {
        br = false;
    }
    return br;
} 
```

上面的程序将输出 true 但是当我将字符串更改为

```
string url = "https://www.google.com"; 
```

我的输出为`false`.

如何获得第二种情况的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:22:58.530

您可以尝试使用 Uri 类来解析 url 字符串。

```
public bool UrlIsValid(string url) {
   return UrlIsValid(new Uri(url));
}

public bool UrlIsValid(Uri url)
{
    bool br = false;
    try
    {
         IPHostEntry ipHost =  Dns.GetHostEntry(url.DnsSafeHost);
         br = true;
    }
    catch (SocketException)
    {
        br = false;
    }
    return br;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:22:50.377

Dns.GetHostEntry 正在寻找一个域名，而不是一个 url。尝试将字符串转换为 URI 并首先使用 URI.DnsSafeHost

```
string url = "http://www.google.com";
Uri uri = new Uri(url);
string domain = uri.DnsSafeHost; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:29:43.627

使用[这个](https://stackoverflow.com/questions/3274677/checking-if-url-is-up-and-working-if-it-is-to-redirect-to-that-url-itself-else)

```
Uri siteUri = new Uri("http://www.contoso.com/");
WebRequest wr = WebRequest.Create(siteUri);

// now, request the URL from the server, to check it is valid and works
using (HttpWebResponse response = (HttpWebResponse)wr.GetResponse ())
{
    if (response.StatusCode == HttpStatusCode.OK)
    {
    }
    response.Close();
} 
```

# facebook-graph-api - OAuthException: (#2) 未能创建任何应用请求

> ID：15405293
> 
> 赞同：2
> 
> 时间：2013-03-14T09:19:35.133
> 
> 标签：facebook-graph-api, oauth, apprequests

我正在使用以下代码从应用程序向用户发送请求。一切都很好，但突然停止工作，我收到一个错误： *OAuthException: (#2) Failed to create any app request*

```
$config = array();
$config['appId'] = $this->app_id;
$config['secret'] = $this->app_secret;
$facebook = new Facebook($config);
$url = "https://graph.facebook.com/oauth/access_token?client_id={$this->app_id}&client_secret={$this->app_secret}&grant_type=client_credentials";
$token = file_get_contents($url);
$request = $facebook->api('/'.$id.'/apprequests', 'POST', array(
   'message' => $text,
   'access_token' => $token
  )
  ); 
```

看起来令牌是有效的，我不知道还有哪里可能是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:47:34.870

端点不仅返回令牌，而且返回格式为 的字符串`access_token=YOUR_APP_ACCESS_TOKEN`。

因此，您作为`access_token`参数传递的并不是真正的访问令牌——您必须修剪第`access_token=`一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T09:56:33.330

您需要有效的应用程序 access_token 才能向 API 发出请求。创建应用程序 access_token 的最简单方法是使用 app_id 和 secret。正如[Facebook 文档](https://developers.facebook.com/docs/facebook-login/access-tokens/)所述：

> 还有另一种无需使用生成的应用令牌即可调用 Graph API 的方法。您可以在拨打电话时将您的应用程序 ID 和应用程序密码作为 access_token 参数传递：
> 
> `https://graph.facebook.com/endpoint?key=value&access_token=app_id|app_secret`

# css - 如何仅在一侧设置 CSS 边框？

> ID：15405307
> 
> 赞同：86
> 
> 时间：2013-03-14T09:20:21.153
> 
> 标签：css, border

对于给定的，`div`我只想在左侧、右侧、顶部或底部显示边框。

目前我有以下内容，它在所有方面都设置了边界：

```
#testdiv {
   border: 1px solid;
} 
```

我需要做什么才能**只在左侧有边框**？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-03-14T09:20:38.843

```
#testdiv {
   border-left: 1px solid;
} 
```

请参阅[有关边界的 MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/border)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-14T09:22:38.400

如果要分别设置 4 面，请使用：

```
border-width: 1px 2em 5px 0; /* top right bottom left */
border-style: solid dotted inset double;
border-color: #f00 #0f0 #00f #ff0; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-14T09:22:15.653

```
 div{
    border-left:solid red 3px;
    border-right:solid violet 4px;
    border-top:solid blue 4px;
    border-bottom:solid green 4px;
    background:grey;
    width:100px; height:50px
} 
```

[**演示**](http://jsfiddle.net/SdB62/4/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-14T09:23:36.823

您可以为所有边框分别指定边框，例如：

```
#testdiv{
  border-left: 1px solid #000;
  border-right: 2px solid #FF0;
} 
```

您还可以指定边框的外观，并为上、右、下和左边框使用单独的样式。例如：

```
#testdiv{
  border: 1px #000;
  border-style: none solid none solid;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-14T09:20:51.357

像这样试试

```
#testdiv{
  border-left:1px solid; 
```

}

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-04T15:54:57.993

```
#testDiv{
    /* set green border independently on each side */
    border-left: solid green 2px;
    border-right: solid green 2px;
    border-bottom: solid green 2px;
    border-top: solid green 2px;
} 
```

# cron - 每天下午 4:00 和下午 6:15 使用 Quartz 调度程序的 cron 作业？

> ID：15405316
> 
> 赞同：1
> 
> 时间：2013-03-14T09:20:43.863
> 
> 标签：cron, expression

我想在每天下午 4:00 和下午 6:15 使用 Quartz 调度程序运行 cron 作业。我们可以将这两者结合在单个 cron 表达式中吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:36:51.430

试试这个表达

```
0 00,15 16,18 * * ? 
```

# php - CodeIgniter 从多个控制器和模型加载

> ID：15405319
> 
> 赞同：1
> 
> 时间：2013-03-14T09:20:45.093
> 
> 标签：php, codeigniter

我最近才开始使用`CodeIgniter` 我有一个简单的问题，对同一个视图使用多个模型和控制器是否正常？我想要做的是有一个控制器和一个模型用于分页和显示数据库中的记录，然后有一个单独的模型和控制器用于更新和删除功能。为所有这些功能配备一个模型和控制器是否合适或更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:25:43.327

在大多数情况下，每个数据库表都有一个模型来处理该特定表的所有数据库功能。当谈到控制器时，这里的意见有所不同，我知道有些人每个视图都有一个控制器，我个人让我的控制器功能特定。因此，如果我正在处理会员功能，它们都进入会员控制器，销售功能进入销售控制器等等。

如果您有很多控制器会重复使用的功能，请查看创建一个 MY_Controller 并用它扩展基本控制器。基本上，您创建一个扩展基本 CI 控制器的控制器，然后您的所有其他控制器扩展为您的所有控制器提供 MY_Controller 中的功能。

在此处阅读更多信息：http: [//ellislab.com/codeigniter/user-guide/general/core_classes.html](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

# java - 弹簧参数不起作用

> ID：15405323
> 
> 赞同：1
> 
> 时间：2013-03-14T09:21:03.017
> 
> 标签：java, spring-mvc, annotations, http-request-parameters

使用 spring`params`的注释不起作用。

```
@RequestMapping(value = "/login", method = RequestMethod.PUT)
public @ResponseBody ResponseMsg login(@RequestParam String userName, @RequestParam String password ) 
{
    ResponseMsg responseMsg = CommonUtils.checkParam(userName, password);

    if(responseMsg.getStatus().equalsIgnoreCase("True"))
    {
        responseMsg =  userService.login(userName, password);
    }
    return responseMsg;
} 
```

我正在使用此函数获取 put 值，但它显示 400 Bad Request。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:20:27.683

正确的答案是这个……感谢 OQJF

```
@RequestMapping(value = "/login", method = RequestMethod.GET)
    public @ResponseBody ResponseMsg login(@RequestHeader(value="username", required=false) String userName, 
            @RequestHeader(value="password", required=false) String password ) {

        ResponseMsg responseMsg = CommonUtils.checkParam(userName, password);
        if(responseMsg.getStatus().equalsIgnoreCase("True"))
            responseMsg =  userService.login(userName, password);
        return responseMsg;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:30:48.270

首先使用 firebug 查看您发送给控制器的参数。如果参数名称正确。我认为原因是用@RequestParam注释的字段默认是必需的，这意味着从客户端发送的参数必须包含它们，即userName和passWord，更改为：`@RequestParam(value="username" required=false) String userName, @RequestParam(value="password" required=false) String password`并尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:32:39.877

我不确定你想在这种情况下使用帖子。但是您可以尝试按如下方式访问标头参数：

```
@RequestMapping(value = "/login", method = RequestMethod.PUT)
public @ResponseBody ResponseMsg login(@RequestHeader("username") String userName, @RequestHeader("password") String password ) {
                ResponseMsg responseMsg = CommonUtils.checkParam(userName, password);
                if(responseMsg.getStatus().equalsIgnoreCase("True"))
                    responseMsg =  userService.login(userName, password);
                return responseMsg;
            } 
```

# javascript - 如何使用hammer.js防止默认触摸

> ID：15405324
> 
> 赞同：8
> 
> 时间：2013-03-14T09:21:13.920
> 
> 标签：javascript, jquery, mobile, jquery-events, hammer.js

如果用触摸设备点击锚点，我想阻止它点击，但如果用鼠标点击它，它会正常运行。

原因是，在桌面上，您将鼠标悬停在锚点上以查看更多信息，然后单击以查看产品。

在手机上，我希望第一次点击显示信息，第二次点击查看产品。

我已经尝试了以下各种变化：

```
$('article.product aside a.link').hammer().on('tap', function(ev) {

    if (ev.gesture.pointerType == 'touch') {
        ev.gesture.srcEvent.preventDefault();

        return false;
    }

}); 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T13:23:53.583

`jQuery mouseover`适用于移动设备（至少在 iOS 中）。我创建了一个使用 的小提琴`mouseover`，同时告诉链接不要在没有`opacity`1 的情况下触发。

[http://jsfiddle.net/FyF3b/5/](http://jsfiddle.net/FyF3b/5/)

我在 chrome 和 iPhone 4S 上对此进行了测试，它似乎符合您的要求。让我知道它是否适用于您的关系。

JS：

```
$('aside').on('mouseover mouseout', function() {
  $(this).toggleClass('on'); 
});
$('aside a').on('click', function(event) {
  if ($(this).parent().css('opacity') < 1) {
    event.preventDefault();
  }
}); 
```

# ios - 在可达性连接丢失时显示警报视图

> ID：15405325
> 
> 赞同：0
> 
> 时间：2013-03-14T09:21:20.210
> 
> 标签：ios, ios5, uialertview, reachability

我试图以两种方式监控 Rechability。连接到主机并连接到 Internet。对于任何一个我都在尝试显示 UIAlertView。目前这工作正常。

我想要实现的是，如果用户单击警报视图按钮以再次检查可达性，但我不确定如何执行此操作。理想情况下，我不希望 alertview 再次关闭并显示，而是保持显示并再次请求可达性检查。这可能吗？

这是我当前的 appdelegate imp 代码，在 appdelegate 中使用，因为我想随时检查连接。

```
- (void)monitorReachability {
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:ReachabilityChangedNotification object:nil];

    self.hostReach = [Reachability reachabilityWithHostName: @"api.parse.com"];
    [self.hostReach startNotifier];

    self.internetReach = [Reachability reachabilityForInternetConnection];
    [self.internetReach startNotifier];

}

//Called by Reachability whenever status changes.
- (void)reachabilityChanged:(NSNotification* )note {
    NetworkStatus internetStatus = [self.internetReach currentReachabilityStatus];

    switch (internetStatus) {
        case NotReachable:
        {
            isReachable=NO;
            break;
        }
        case ReachableViaWiFi:
        {
            NSLog(@"The internet is working via WIFI.");
            isReachable=YES;
            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"The internet is working via WWAN.");
            isReachable=YES;
            break;
        }
    }

    NetworkStatus hostStatus = [self.hostReach currentReachabilityStatus];

    switch (hostStatus) {
        case ReachableViaWWAN:
        {
            hostActive=YES;
            break;
        }
        case ReachableViaWiFi:
        {
            hostActive=YES;
            break;
        }
        case NotReachable:
        {
            hostActive=NO;
            break;
        }

    }

    if (hostActive == YES && isReachable == YES) {
        connectionNotReachable.hidden = YES;
    }

    if (isReachable == NO) {
        NSLog(@"Internet connection lost");\
        connectionNotReachable = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"connectionNotReachableTitle", @"Title for alert view - connection Not Reachable") message:NSLocalizedString(@"connectionNotReachableMessage", @"Message for alert view - connection Not Reachable") delegate:self cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"connectionNotReachableTryAgain", @"Try again button for alert view - connection Not Reachable"), nil];

        [connectionNotReachable show];
        return;
    }

    if (hostActive == NO) {
        NSLog(@"Host not active, internet connection");
        UIAlertView *hostNotReachable = [[UIAlertView alloc] initWithTitle:@"Host Not Reachable" message:@"No Host" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [hostNotReachable show];
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:34:02.160

基本上，您可以做的是禁用 UIAlertView 按钮，直到您再次可以访问网络。

```
[alert addButtonWithTitle:@"OK"];
UIButton *submitButton = [[alert subviews] lastObject];
[submitButton setEnabled: … ]; 
```

在您的 Connection 恢复后，您只需再次执行相同的操作 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:39:05.553

您可以拥有自定义的 AlertView ，您可以在其中实现这样的方法

```
 -(void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated {
       if (![self connected])
          return;
       [super dismissWithClickedButtonIndex:buttonIndex animated:animated];
    } 
```

当您的警报启动时，您可以通过此方法自己检查连接

```
- (BOOL)connected 
{
    Reachability *reachability = [Reachability reachabilityForInternetConnection];  
    NetworkStatus networkStatus = [reachability currentReachabilityStatus]; 
    return !(networkStatus == NotReachable);
} 
```

终于看到`if([self connected])`然后关闭按钮

# ruby-on-rails - Ajax 发布提交表单 ruby on rails

> ID：15405328
> 
> 赞同：1
> 
> 时间：2013-03-14T09:21:24.527
> 
> 标签：ruby-on-rails, ajax, jquery

实际上我可以在哪里将变量传递给我的 js.erb，比如说

我有 1 个方法 create，在我的 application.js 的控制器中，我有我的 Ajax 帖子然后我有我的 create.js.erb

在我的创建表单中，我有 2 hidden_​​field_tag 在我的 create.js.erb 中，这是 ajax 成功发布并执行操作的地方，但是我如何访问 hidden_​​field 数据以执行我的逻辑以在成功时执行某些操作？

这是因为，当 js 成功时，我有 2 个不同的操作来确定我应该处理哪个操作。js.erb 实际上是如何工作的？此外，当我在 application.js 中提醒表单数据时，虽然 js 运行良好，但它不会发出警报。任何想法？

```
$(document).ready(function() {
  $("#new_answer").submit(function() {
    $.post(this.action, $(this).serialize(), null, "script");
    alert("you are submitting" + $(this).serialize()); //it dint work but it did post
    return false;
  })
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:47:00.523

> 等等，当你这样做时，假设你的 :controller => "months" 和 :action => "march"。

我的意思是你的 $(this).action() 返回“/months/march”。

> 这将存储在 url 中，当您通过以下 post 方法点击该 url 时，表单元素在 params 哈希中“months”控制器的“march”操作中可用。

现在，在“result” js 变量中，整个 params 散列将可用，这实际上是您在警告。

月控制器.rb

```
def march

  render :text => params

end 
```

应用程序.js

```
$("form#new_answer").submit(function() {  

          var data = $('form#new_answer').serialize();

          var url = $(this).action();

           $.post(url ,data, function(result){

            alert(result);

            });        

           return false;

          }); 
```

# css - 使用全屏背景图片时移动设备固定约束的解决方案

> ID：15405331
> 
> 赞同：3
> 
> 时间：2013-03-14T09:21:35.330
> 
> 标签：css, mobile, responsive-design, image-gallery, galleria

我刚刚从头开始构建我的 Shopify 主题。这是我的第一个响应式设计，我对一个主要问题的一切预期感到非常满意。

在我们的产品页面上，我们使用来自 Galleria.io 的全屏图片库作为背景来显示我们的产品图片。在桌面上，这是一个非常好的体验。

在移动设备上查看：http: [//finegra.in/products/bowden](http://finegra.in/products/bowden)

但是，在移动设备上，背景图像使页面具有固定约束，这意味着任何不在视口上的内容都无法向下滚动视图。

基本上，我试图弄清楚如何在保持全屏背景图像的同时打破固定约束。

实际上，我可以在移动设备上启动全屏图库而不是作为背景。

对此的任何帮助将不胜感激。

这是全屏背景库的 HTML：

```
<div id="galleria">
    <div class="galleria-container notouch fullscreen" style="width: 100%; height: 100%;">
        <div class="galleria-stage">
            <div class="galleria-images" style="position: relative; top: 0px; left: 0px; width: 100%; height: 100%;">
                <div class="galleria-image" style="overflow: hidden; position: absolute; top: 0px; left: 0px; transition: none 0s ease 0s ; opacity: 0; z-index: 0;">
                    <div class="galleria-layer" style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; z-index: 2;"></div>
                </div>
                <div class="galleria-image" style="overflow: hidden; position: absolute; top: 0px; left: 0px; opacity: 1; width: 1663px; height: 960px; transition: none 0s ease 0s ; z-index: 1;">
                    <div class="galleria-layer" style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; z-index: 2; display: none;"></div>
                    <img width="1663" height="1108" style="display: block; opacity: 1; min-width: 0px; min-height: 0px; max-width: none; max-height: none; width: 1663px; height: 1108px; position: absolute; top: -74px; left: 0px;" src="http://cdn.shopify.com/s/files/1/0207/2640/products/MG_9400_1024x1024.jpeg?156">
                </div>
            </div>
            <div class="galleria-loader" style="opacity: 1; display: none;"></div>
            <div class="galleria-counter" style="opacity: 1;">
                <span class="galleria-current">1</span>
                /
                <span class="galleria-total">10</span>
            </div>
            <div class="galleria-image-nav">
                <div class="galleria-image-nav-right" style="opacity: 0.5; display: block;"></div>
                <div class="galleria-image-nav-left" style="opacity: 0.5; display: block;"></div>
            </div>
        </div>
        <div class="galleria-thumbnails-container" style="top: 884px; opacity: 1;">
            <div class="galleria-thumb-nav-left disabled"></div>
            <div class="galleria-thumbnails-list" style="overflow: hidden; position: relative;">
                <div class="galleria-thumbnails" style="overflow: hidden; position: relative; width: 180px; height: 10px; left: 0px;">
                    <div class="galleria-image active">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                    <div class="galleria-image">
                        <span class="img" style="opacity: 1;"></span>
                    </div>
                </div>
            </div>
            <div class="galleria-thumb-nav-right disabled"></div>
            <div class="galleria-thumbnails-tab" style="visibility: hidden;"></div>
        </div>
        <div class="galleria-info" style="position: absolute; left: -10000px; display: block; opacity: 1;">
            <div class="galleria-info-text" style="width: 1623px;">
                <div class="galleria-info-title" style="display: none;"></div>
                <div class="galleria-info-description">BOWDEN</div>
            </div>
        </div>
        <div class="galleria-tooltip" style="opacity: 0;"></div>
    </div>
</div>
</div> 
```

这是它的CSS：

```
#galleria {
    background: none repeat scroll 0 0 #FFFFFF;
    position: relative;
    z-index: 1;
}

.galleria-container {
    height: 100%;
    left: 0;
    overflow: hidden;
    position: fixed;
    top: 0;
    width: 100%;
}
.galleria-container {
    background: none repeat scroll 0 0 #FFFFFF;
}
.galleria-container, .galleria-stage, .galleria-images, .galleria-image img, .galleria-image-nav, .galleria-image-nav-left, .galleria-image-nav-right, .galleria-thumbnails-container, .galleria-info, .galleria-tooltip {
    margin: 0;
    padding: 0;
}

.galleria-stage {
    height: 100%;
    position: absolute;
    width: 100%;
}

.galleria-thumbnails-container {
    bottom: 0;
    padding-top: 16px;
    position: absolute;
    width: 100%;
    z-index: 2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:35:53.707

## 选项1

如果您想在移动设备上将图库显示为内容块（不在背景中），您可以根据屏幕宽度通过媒体查询加载额外的 CSS。您必须覆盖`position: absolute`此额外文件中的一些内容才能使您的块恢复正常。

像：

```
<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="/mobile.css" /> 
```

或在现有的 css 文件中覆盖它：

```
@media all and (max-width: 1024px) {
    .galleria-container {
        position: relative;
    }

    /* and a lot more CSS ;-) */
} 
```

## 选项 2

要在现有布局中使用滚动条，无论如何您都必须替换一些`position: absolute`and `float: left|right`，以使您的内容恢复正常并扩展父 div 元素的高度：

```
html {
        overflow: auto !important;
}

body {
        overflow: visible !important;
}

#info {
    position: relative;
    float: none;
}

#product-details {
    position: relative;     
} 
```

我测试了这个设置。滚动条现在在 iPad/iPhone 和 IE9+ 上可见。但是您必须调整边距和偏移量，因为我必须更改`position`值

见[http://stephan.mestrona.net/finegra.in/products/bowden.html](http://stephan.mestrona.net/finegra.in/products/bowden.html)

# android - Android aSmack XMPP 文件传输始终显示正在进行和状态 0

> ID：15405339
> 
> 赞同：3
> 
> 时间：2013-03-14T09:21:59.250
> 
> 标签：android, chat, file-transfer, asmack, quickblox

我正在开发一个聊天应用程序，我需要在其中在点对点聊天用户之间发送图像。现在我能够发送图像并且我的文件接收器也接受请求并开始接收文件。

但打印状态始终保持打印： **LOG：** Progress：0.0 & Status：In Progress

并在完成线程后 - **LOG** ###Filetransfer 未完成。状态：进行中

如果我让这个线程运行删除计数，它会继续打印 - 进度：0.0 & 状态：进行中

有时会稍后收到完整的图像..这需要很长时间，而且要花很多时间一半或大小为 0。

```
private ServiceDiscoveryManager sdm;    
 if (sdm == null)
                    sdm = new ServiceDiscoveryManager(connection);
                Log.v("---fileReceive----","after discover connectin.....");
                sdm.addFeature("http://jabber.org/protocol/disco#info");
                sdm.addFeature("jabber:iq:privacy");

                ProviderManager.getInstance().addIQProvider("query","http://jabber.org/protocol/bytestreams", new BytestreamsProvider());
                ProviderManager.getInstance().addIQProvider("query","http://jabber.org/protocol/disco#items", new DiscoverItemsProvider());
                ProviderManager.getInstance().addIQProvider("query","http://jabber.org/protocol/disco#info", new DiscoverInfoProvider());
                ProviderManager.getInstance().addIQProvider("si", "http://jabber.org/protocol/si", new StreamInitiationProvider());
                ProviderManager.getInstance().addIQProvider("query", "http://jabber.org/protocol/bytestreams", new BytestreamsProvider());                    
                ProviderManager.getInstance().addIQProvider("open", "http://jabber.org/protocol/ibb", new OpenIQProvider());
                ProviderManager.getInstance().addIQProvider("data", "http://jabber.org/protocol/ibb", new DataPacketProvider());
                ProviderManager.getInstance().addIQProvider("close", "http://jabber.org/protocol/ibb", new CloseIQProvider());
                ProviderManager.getInstance().addExtensionProvider("data", "http://jabber.org/protocol/ibb", new DataPacketProvider());

                sdm = ServiceDiscoveryManager.getInstanceFor(connection);

                FileTransferNegotiator.setServiceEnabled(connection, true);
                FileTransferNegotiator.IBB_ONLY = true; 
                manager = new FileTransferManager(connection);
                // Create the listener
                //  fListner=new FileTransferListener() {
                manager.addFileTransferListener(new FileTransferListener() {
                    @Override
                    public void fileTransferRequest(FileTransferRequest request) {
                        // TODO Auto-generated method stub
                        Log.v("----Recieve File",
                                "new file transfere requesttttt------------");

                        Log.v("-----file request","from" + request.getRequestor());

                        // Accept it

                        try {
                            IncomingFileTransfer transfer = request.accept();
                            Log.v("----transfer--","accepted");

                            double percents = 0.0;
                            int currentCycle = 0;
                            transfer.recieveFile(new File( Environment.getExternalStorageDirectory().getPath()+"/"+transfer.getFileName()));

                              while(!transfer.isDone() && currentCycle < 100) {
                                    if(transfer.getStatus().equals(Status.in_progress)) {
                                        percents = ((int) (transfer.getProgress()*10000)) / 100.0;
                                                  //percents is 100.0 after 1 cycle
                                        Log.i(LOG, "Filetransfer Progress: "+percents + " Status: "+transfer.getStatus().toString());
                                    } else if (transfer.getStatus().equals(Status.error)) {
                                        Log.e(LOG, "FileTransfer ERROR"+transfer.getError().getMessage());
                                        break;
                                    } 
                                    currentCycle ++;
                                    try {
                                        Thread.sleep(1000);
                                    } catch (InterruptedException e) {
                                        e.printStackTrace();
                                    }
                                }

                                if(transfer.getStatus().equals(Status.complete)) {
                                    if (onFileReceivedListener != null) {
                                       onFileReceivedListener.onFileReceived(transfer);
                                    }
                                }else{
                                    Log.e(LOG, "###Filetransfer not complete. Status:" + transfer.getStatus().toString());
                                                        //FILE IS HERE  
                                }
                        } catch (XMPPException e) {
                            e.printStackTrace();
                        }
                    }
                }); ` 
```

任何提示或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:37:11.627

我最近确实对 asmack 和 smackx 有一点经验，对它们不能太乐观。

我不知道你的问题究竟来自哪里，但我可以告诉你这是正常的。在任何进度实际开始之前，您首先会得到一个 progress = 0 的负载。如果您发送的是一个小文件，那么它发送的速度很快，以至于没有任何实际进展。

但是，如果您成功发送了一个更大的文件，此功能确实可以很好地工作，并且会给您大致的进度。

最后我们得出的结论是，这个功能只是有缺陷和限制，并实现了我们自己的文件传输 xmpp 消息并处理通过我们自己的服务器发送它。像这样，您还可以分组（MUC）将文件发送给离线的人，并在双方（发送和接收）方面都取得了不错的进展。

# ios - 可变大小的结构数组？

> ID：15405340
> 
> 赞同：2
> 
> 时间：2013-03-14T09:22:09.130
> 
> 标签：ios, arrays, core-text

我想创建一个结构数组，其大小仅在运行时才知道

```
NSMutableArray *styleSettingsArray = [NSMutableArray array];

NSString *fontAlignmentAttribute = [element attributeNamed:@"TextAlignment"];
if(fontAlignmentAttribute)
{
    CTTextAlignment alignment = [self getTextAlignment:fontAlignmentAttribute];
    CTParagraphStyleSetting styleSetting = {kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &alignment};
    [styleSettingsArray addObject:[NSValue valueWithBytes:&styleSettings objCType:@encode(CTParagraphStyleSetting)]];
}

// other posible attributes

CTParagraphStyleRef paragraphStyleRef = CTParagraphStyleCreate((__bridge const CTParagraphStyleSetting *)(styleSettingsArray), [styleSettingsArray count]);
[dictionary setObject:(__bridge id)(paragraphStyleRef) forKey:(NSString*)kCTParagraphStyleAttributeName];
CFRelease(paragraphStyleRef); 
```

此代码不起作用。

编辑：

`CTParagraphStyleCreate`接受一个指向 的数组的指针`CTParagraphStyleSetting`，例如

```
CTParagraphStyleSetting styleSettings[] = {
    { kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), alignment},
    {...},
    {...}
}; 
```

我如何分配这个数组，并在不知道里面有多少东西的情况下向它添加东西？（我如何使用 malloc ？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:34:25.080

您不能以这种方式将 Objective-C 或 Core Foundation 集合与普通 C 数组混合。此外，正如您发现的那样，您需要将它们包装`CTParagraphStyleSetting` `structs`在`NSNumber`对象中以便存储它们。真是一团糟。

我将采取的方法是进行 2 次传球；第一个确定你有多少属性，第二个生成这些属性。

1.  遍历您的条件以找出有多少属性
2.  分配一个 C 数组（参见 参考资料`malloc()`）。
3.  迭代您的条件并将属性存储在动态数组中。
4.  使用数组创建样式。
5.  释放数组（参见 参考资料`free()`）。

**注意**我已经编辑了这个答案，因为我之前的答案已经过时了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:58:09.410

为了避免必须收集属性的数量然后在第二遍中创建它们，我建议使用`NSMutableData`而不是普通的 C 数组或 malloc。这种风格将允许您使用现有代码，只需进行最少的更改：

```
NSMutableData *styleSettingsArray = [NSMutableData array];

NSString *fontAlignmentAttribute = [element attributeNamed:@"TextAlignment"];
CTTextAlignment alignment;
if (fontAlignmentAttribute)
{
    alignment = [self getTextAlignment:fontAlignmentAttribute];
    CTParagraphStyleSetting styleSetting = { kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &alignment};
    [styleSettingsArray appendBytes:&styleSetting length:sizeof(styleSetting)];
}

// other posible attributes
CTParagraphStyleRef paragraphStyleRef = CTParagraphStyleCreate([styleSettingsArray bytes], [styleSettingsArray length] / sizeof(CTParagraphStyleSetting)); 
```

**编辑：**`alignment`与您的代码相比，请注意变量生命周期的延长。这是必要的，因为它是在之前声明的块结束之后引用的。

# javascript - 调试javascript的正确方法是什么？

> ID：15405348
> 
> 赞同：5
> 
> 时间：2013-03-14T09:22:33.173
> 
> 标签：javascript, debugging

我制作了一个`test()`在 javascript 文件中调用的函数。在其中放置了一个简单的警报。

在 html 文件中，在单击按钮时调用该方法。但是，它没有被调用。

问题出在第 11 个函数中，与我的无关！！！！但是，一个制作他的第一个 javascript 函数的人怎么能找到它？？？

我正在寻找调试 javascript 的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:25:40.817

您可以使用许多现代浏览器调试 javascript。有关如何在 Google Chrome 中调试的详细信息，请参阅此问题：

[如何在 Google Chrome 中启动 JavaScript 调试器？](https://stackoverflow.com/questions/66420/how-do-you-launch-the-javascript-debugger-in-google-chrome)

此外，您不应将`alert()`其用于调试，因为这会`alert()`导致脚本暂停，从而为生产版本提供不同的结果。

最佳做法是[`console.log()`](https://stackoverflow.com/questions/4743730/what-is-console-log-and-how-do-i-use-it)在浏览器控制台中使用和查看输出。

您还可以放入[`debugger`](http://msdn.microsoft.com/en-us/library/ie/0bwt76sk%28v=vs.94%29.aspx)您的 javascript 代码以强制断点。但是我不喜欢使用它，因为在部署之前忘记删除它会导致您的脚本暂停，这可能会非常尴尬！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:26:46.603

您应该使用浏览器提供的调试控制台。

Chrome 内置，按`CTRL`+ `SHIFT`+ `j`。在 Firefox 中，安装 Firebug 插件。

在您的代码中，添加`alert()`以显示流程并获取变量值。

此外，使用`console.log()`which 只会输出到调试控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:00:33.043

要在问题中回答您的问题，

> 一个制作他的第一个 javascript 函数的人怎么能找到它？？？

好吧，例如，当 JavaScript 出现问题时，您犯了语法错误 - 脚本将从那里停止工作。但是，这不会阻止 HTML 呈现，因此它**看起来**好像一切都是正确的（特别是如果您的 JS 没有改变页面的外观）但是 JS 的所有功能都将失效。

这就是为什么我们使用调试工具（在此处的其他答案中列出）来查看问题所在，在这种情况下，很容易注意到哪个函数有错误并导致整个脚本中断。这可能也会为您的老年人节省几分钟。

最好的方法是经常测试，这样无论何时遇到错误，您都可以立即修复它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:44:35.897

根据您的浏览器选择，有一些调试选项——我倾向于使用 Firefox，所以在我的情况下是 Firebug。有一个问题列出了其他浏览器的选项 -[什么是 console.log 以及如何使用它？](https://stackoverflow.com/questions/4743730/what-is-console-log-and-how-do-i-use-it)

除非您正在处理的项目已经采用了调试机制，否则`console.log()`在跟踪问题时往往是一个简单而有用的选项。

在调试时，您可以采用在输入函数时注销一行的方法，如下所示：

```
var myFunc = function(el) {
    console.log('Inside myFunc');

    // Existing code
}; 
```

这将使您能够查看哪些函数已被调用，并让您大致了解执行顺序。

您还可以使用`console.log()`显示变量的内容 -`console.log(el);`

完成后请注意删除/禁用`console.log()`调用，因为它可能会导致生产中的一些问题。

# django - Django-allauth：错误：没有名为 uni_form 的模块

> ID：15405349
> 
> 赞同：0
> 
> 时间：2013-03-14T09:22:34.243
> 
> 标签：django, django-allauth

我刚刚安装了 django-alluauth 。

项目中有一个示例。当我尝试运行时

```
python manage.py syncdb 
```

我收到一个错误`Error: No module named uni_form`。

我没有改变任何东西。我不知道为什么会出现这个错误。请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:27:17.020

这意味着您没有安装 django-uni-form：

> pip install django-uni-form

这个包可能是 allauth 的依赖。该包用于生成表单，但请注意该包当前已被弃用。

我建议改用 django-crispy-forms。

> pip install django-crispy-forms

然而，这可能需要更改 allauth 中的一些代码，因此安装 django-uni-form 会更容易。

# spring - 泽西杰克逊和春季服务

> ID：15405356
> 
> 赞同：0
> 
> 时间：2013-03-14T09:22:55.473
> 
> 标签：spring, rest, jersey, jackson

我们正在使用 Jersey、Jackson 和 Spring 服务 (@service) 注释来公开一些基于 REST 的 Web 服务。请求和响应数据以 JSON 格式交换。

以下是服务请求对象内容：

```
public class ServiceRequest{
   private RequestHeader requestHeader;
   private List<BaseEntity> requestData;
} 
```

所有特定实体都将从 BaseEntity 类扩展。例如 ：

```
public class User extends BaseEntity{
  private String userName;
} 
```

对于所有服务操作，我们通过传递请求数据对象列表仅接受 ServiceRequest 对象。现在，当我们尝试从 REST 客户端调用这些操作时，这些操作都失败了

```
 userName is not found as part of BaseEntity. 
```

这是因为在转换时，Jersey/Jackson 会尝试使用指定对象的属性自动检测传入的字段名称。

我想知道有什么办法，我可以聪明地处理这个问题。我们没有更改服务签名的选项。非常感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T03:31:16.140

下面的链接有我的问题的答案。谢谢你的支持。

[杰克逊注解中的多态性：@JsonTypeInfo 用法](https://stackoverflow.com/questions/11798394/polymorphism-in-jackson-annotations-jsontypeinfo-usage)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-28T11:01:31.183

您是否尝试过使用泛型？您可以在 Resource's 声明具体的类类型，以通知 Jackson 映射到特定类型

# javascript - “var cc = cc = cc || {};”是什么意思？在 Cocos2D 中行吗？

> ID：15405362
> 
> 赞同：4
> 
> 时间：2013-03-14T09:23:04.047
> 
> 标签：javascript, cocos2d-iphone

我试图找到使用这行代码的原因

```
var cc = cc = cc || {}; 
```

例如在[这个](https://github.com/cocos2d/cocos2d-html5/blob/master/cocos2d/CCCamera.js#L26)地方的 Cocos2D JavaScript 库中，但我找不到任何合理的理由。就设置而言，单一分配默认值可以，但双重分配？有谁知道其中的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:31:51.513

该代码等价于以下内容：

```
var cc;
cc = cc || {};
cc = cc; 
```

这显然是一个错误。

**更新。**我对这个话题做了更多的研究，这是一件有趣的事情：

每当您使用`var`关键字时，它都会在当前范围内创建一个新变量，除非它已经存在**于当前范围内**。基本上这段代码：

```
var cc = 1;
function test() {
    var cc = cc || {};
    return cc;
}
test(); 
```

将始终产生`{}`，无论`cc`( 在全局范围内 ) 的初始值是什么。特别是这段代码：

```
var cc = [expression]; 
```

相当于：

```
var cc;
cc = [expression]; 
```

尽管仅当当前范围内不存在**时才**`var cc;`创建新变量。 **`cc`**

 ****更新 2.**什么操作优先令人困惑，因为在 OP 的代码中，两个`=`符号实际上并不相同。第一个表示变量声明，因为`var`它前面有一个关键字。第二个是任务。这就是为什么

```
var x = y = z; 
```

相当于

```
var x;
y = z;
x = z; 
```

（请注意，`var`关键字仅适用于`x`）而

```
x = y = z; 
```

相当于

```
y = z;
x = z; 
```

（请注意操作`y=z`返回`z`，这并不重要（可能很`y`明显）但值得注意）

**结论：**左侧的变量声明**总是**在评估右侧并将右侧分配给左侧之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:24:31.400

这个一直让我很烦，所以我玩了一个游戏并做了一些测试，这是我的发现。

我将展示两个不同的脚本，它们会产生两种不同的结果，从而解释为什么有人可能会使用一个而不是另一个。然而，使用其中任何一种的原因取决于编码器，并且将基于他们想要发生的效果。

请注意，出于示例目的，我将使用实际值而不是空对象。

通常，您可能希望看到以下示例正在使用：

```
var cc = cc || 1; 
```

这将创建一个名为的新变量`cc`，并给出现有（在同一范围内）变量的值，或`1`. 此方法不会更改原始变量，尽管在实践中它似乎具有已更改的效果，因为您无法随后引用原始变量，因为它具有相同的名称。

这可以通过使用不同的变量名来测试，例如：

```
var aa;
alert(aa);
var cc = aa || 1;
alert(aa);
alert(cc); 
```

（[示例](http://jsfiddle.net/musefan/HzKhJ/)）在这里您可以看到`aa`永远不会改变。

接下来我们看一下有问题的代码：

```
var cc = cc = cc || 1; 
```

这实际上会改变原始变量并创建一个新的本地变量。同样，当变量具有相同名称时，不容易看到效果。但是，如果我们像上面一样进行名称更改，我们可以看到真正的效果：

```
var aa;
alert(aa);
var cc = aa = aa || 1;
alert(aa);
alert(cc); 
```

（[示例](http://jsfiddle.net/musefan/HzKhJ/1)）这次我们可以看到`aa`确实发生了变化。

总之，您可能永远不会真正看到使用一个比另一个（具有相同的变量名）产生任何影响，但我很好奇如果可以在分配之前在某处引用原始数据会发生什么影响，因此选择使用哪个实际上会产生影响。我会看看我是否能找到一些东西来展示这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:59:17.043

这段代码显然是一个错误。作者的想法可能是将全局变量和内部范围变量设置为相同的值，但这个表达式总是会失败。它不仅无法设置外部变量，而且总是使用 return `{}`。

这个表达式失败的原因是声明的变量在赋值之前被设置为*未定义*。由于这行代码尝试分配一个与自身同名的变量，并且由于 JavaScript 首先评估内部范围变量，因此在分配时`cc`将始终解析为*未定义*的内部 self，这否定了逻辑评估并返回`{}`。

在代码中查看它的另一种方法：

```
var cc;                 //cc is set to 'undefined'

cc = cc || {};          //which becomes equivalent to:

cc = undefined || {};   //which finally evaluates to:

cc = {} 
```**

# android - 如何将加载指示器添加到 AutoCompleteTextView

> ID：15405363
> 
> 赞同：6
> 
> 时间：2013-03-14T09:23:04.897
> 
> 标签：android, autocompletetextview

我想在从 web 服务加载数据时在 AutoCompleteTextView 中显示加载指示器。最好它应该显示在自动完成的右侧（fi 动画，如正在进行的控制 - 旋转轮）。如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T09:39:03.210

> 我想在从 web 服务加载数据时在 AutoCompleteTextView 中显示加载指示器。

`ProgressBar`在小部件的右侧放置一个不确定的外观并`AutoCompleTextView`像这样扩展类：

```
public class AutoCompleteLoadding extends AutoCompleteTextView {

    private ProgressBar mLoadingIndicator;

    public void setLoadingIndicator(ProgressBar view) {
        mLoadingIndicator = view;
    }

    @Override
    protected void performFiltering(CharSequence text, int keyCode) {
        // the AutoCompleteTextview is about to start the filtering so show
        // the ProgressPager
        mLoadingIndicator.setVisibility(View.VISIBLE);
        super.performFiltering(text, keyCode);
    }

    @Override
    public void onFilterComplete(int count) {
        // the AutoCompleteTextView has done its job and it's about to show
        // the drop down so close/hide the ProgreeBar
        mLoadingIndicator.setVisibility(View.INVISIBLE);
        super.onFilterComplete(count);
    }

} 
```

`ProgressBar`使用方法传递对 的引用`setLoadingIndicator()`。这假设您在适配器（的`AutoCompleteTextView`）/适配器的过滤器中发出 Web 服务请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T23:58:27.697

您想使用进度条而不是微调器。使用图形视图将它们放置在您的 AutoCompleteTextView 字段上并设置它们的 id。我将我的设置为progressLoading。

```
<ProgressBar
    android:id="@+id/progressLoading"
    style="?android:attr/progressBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/autoCompleteTextViewId"
    android:layout_alignTop="@+id/autoCompleteTextViewId"
    android:paddingTop="14dip"
    android:paddingRight="10dip" /> 
```

然后在您的活动/片段中：

```
final ProgressBar barProgress = (ProgressBar) findViewById(R.id.progressLoading);
originProgress.setVisibility(View.GONE); 
```

它是自动可见的，因此我们最初将其设置为隐藏。然后，我们在 AutoCompleteTextView 上的 addTextChangedListener 上将其设置为 VISIBLE。然后，每当该任务完成时，您将其设置回隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T16:14:50.267

要在 AutoCompleteView 中添加进度条，您可以轻松执行以下操作：

首先创建一个自定义自动完成类，如下所示：

```
public class AutoCompleteWithLoading extends AutoCompleteTextView{
    private ProgressBar mLoadingIndicator;

    public AutoCompleteWithLoading(Context context) {
        super(context);
    }

    public AutoCompleteWithLoading(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public AutoCompleteWithLoading(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public AutoCompleteWithLoading(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }

    @TargetApi(Build.VERSION_CODES.N)
    public AutoCompleteWithLoading(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes, Resources.Theme popupTheme) {
        super(context, attrs, defStyleAttr, defStyleRes, popupTheme);
    }

    public void setLoadingIndicator(ProgressBar progressBar) {
        mLoadingIndicator = progressBar;
    }

    public void dispayIndicator(){
        if(mLoadingIndicator != null){
            mLoadingIndicator.setVisibility(View.VISIBLE);
        }
        this.setText("");
    }

    public void removeIndicator(){
        if(mLoadingIndicator != null){
            mLoadingIndicator.setVisibility(View.GONE);
        }
    }
} 
```

然后，将此添加到您的 XML

```
 <thriviastudios.com.views.view.AutoCompleteWithLoading
                android:padding="10dp"
                android:layout_margin="5dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                style="@style/NotPresentationText"
                android:id="@+id/activity_activities_search_city_text_view"
                android:popupBackground="@color/app_bg"
                android:layout_centerInParent="true"
                android:background="@color/app_bg_darker"
                android:singleLine="true"
                android:hint="City"
                android:imeOptions="actionDone"
                android:textColorHint="@color/white"
                />

                <ProgressBar
                    android:id="@+id/loading_indicator"
                    style="?android:attr/progressBarStyleSmall"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical|right"
                    android:layout_marginRight="20dp"
                    android:visibility="gone"/>
            </FrameLayout> 
```

注意：使用自定义 AutomComplete 类的完整路径

然后，在您的 Activity 或 Fragment 中，您将获得对指标以及 AutoComplete 的引用。将进度条附加到自动完成，如下所示：

```
city.setLoadingIndicator(indicator); 
```

并且您可以在需要时进一步显示或删除指示器，如下所示：

```
city.dispayIndicator(); 
```

和

```
city.removeIndicator(); 
```

我希望这可以帮助别人。

# mysql - 如何在 MySQL 查询中定义目标表？

> ID：15405364
> 
> 赞同：1
> 
> 时间：2013-03-14T09:23:07.047
> 
> 标签：mysql, sql, database

如何使用用户 ID 获取用户名？

假设我有 3 个这样的表，`user.type holds` *'e'*代表雇主，*'w'*代表工人。

'e' 表示用户名在`employer.name`，所以 'w' 表示用户名在`worker.name`.

![在此处输入图像描述](../Images/d63e90471eab1aa7280c73189398ba6f.png)

employee.id 和 worker.id 是 user.id 的外键。

有没有办法通过单个查询获得用户名（我们还不知道类型）？

虽然如果这种建模有问题请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:26:16.263

直接回答你的问题，

```
SELECT  a.*,
        IF(a.type = 'e', b.Name, c.Name) PersonName
FROM    User a
        LEFT JOIN Employer b
            ON a.ID = b.ID
        LEFT JOIN Worker c
            ON a.ID = c.ID 
```

实际上，您可以重新设计架构并且只需要两个表，`Person`和`Type`

**类型**

*   身份证（*PK*）
*   类型名称

**人**

*   身份证（*PK*）
*   姓名
*   用户类型 ID ( *FK* )

你可以很容易地得到每个人的类型，

```
SELECT  a.*,
        b.TypeName
FROM    Person a
        INNER JOIN Type b
            ON a.UserTypeID = b.ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

# 样本记录

**类型**

```
╔════╦══════════╗
║ ID ║ TYPENAME ║
╠════╬══════════╣
║  1 ║ Employee ║
║  2 ║ Worker   ║
╚════╩══════════╝ 
```

**人**

```
╔════╦═════════╦════════════╗
║ ID ║  NAME   ║ USERTYPEID ║
╠════╬═════════╬════════════╣
║  1 ║ Stacky  ║          2 ║
║  2 ║ Horton  ║          1 ║
║  3 ║ Alam Na ║          1 ║
║  4 ║ Aw aw   ║          2 ║
╚════╩═════════╩════════════╝ 
```

**查询执行后的输出**

```
╔════╦═════════╦════════════╦══════════╗
║ ID ║  NAME   ║ USERTYPEID ║ TYPENAME ║
╠════╬═════════╬════════════╬══════════╣
║  1 ║ Stacky  ║          2 ║ Worker   ║
║  2 ║ Horton  ║          1 ║ Employee ║
║  3 ║ Alam Na ║          1 ║ Employee ║
║  4 ║ Aw aw   ║          2 ║ Worker   ║
╚════╩═════════╩════════════╩══════════╝ 
```

# c - 在 C 中的宏中使用可选参数

> ID：15405370
> 
> 赞同：0
> 
> 时间：2013-03-14T09:23:17.300
> 
> 标签：c, function, macros, c-preprocessor

这是一个定义函数的宏（我故意简化了我的宏）：

```
#define GET_VALUE_IMPL(func_name, value_type, get_func)                 \
    static value_type func_name(const char *token, value_type def_value) \
    {                                                                   \
        value_type  value;                                              \
        assert(token != NULL);                                          \
        value = get_func(token, def_value);                             \
        return value;                                                   \
    } 
```

然后，我使用这样的宏来定义两个函数，`get_int`并且`get_string`：

```
GET_VALUE_IMPL(get_int, int, external_get_int);
GET_VALUE_IMPL(get_string, char*, external_get_str); 
```

这是我的问题：对于`get_string`，我想将一个函数作为第四个参数传递给`GET_VALUE_IMPL`在赋值后调用的值`value = get_func(token, def_value);`

我怎么能用预处理器做到这一点？

# css - 固定 Header DIV 下推而没有设置边距

> ID：15405372
> 
> 赞同：1
> 
> 时间：2013-03-14T09:23:27.260
> 
> 标签：css, xhtml, header, css-position

我想使用一个*固定的标题*，后面有内容。菜单将包含锚链接，因此所有内容都将在一页中。

但是，我被卡在了早期阶段。我认为这不会有问题，但似乎div 以某种方式`header`捕捉到了div。`content`看起来他们有相同的利润。

如果`position:fixed;`被删除，它看起来应该，但我希望它被修复。

我真的不明白为什么会发生这种情况，因为它们彼此分开。使用类似的东西`margin-top:-100px`感觉不对。

这样做应该没有丑陋的解决方案......

CSS：

```
#header {
position:fixed;
width:1200px;
border:1px solid black;
z-index:1;
overflow:hidden;
background-color:white;
}

#menu {
width:100%;
z-index:2;
}

#content {
margin: 100px 0 0 0;
background-color:red;
overflow:hidden;
width:1200px;
z-index: -1;
height:100%;
} 
```

HTML

```
<div id="header">
 <h1>Header</h1>
  <div id="menu"><ul>
   <li><a href="#works">Works</a></li>
   <li><a href="#news">News</a></li>
   <li><a href="#about">About</a></li>
   <li><a href="#contact">Contact</a></li>
 </ul>
 </div>
 </div>

<div id="content">
  <div id="works" name="works"></div>
  <div id="news" name="news"></div>
  <div id="about" name="about"></div>
  <div id="contact" name="contact"></div>
</div>  

<div id="footer"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:30:28.380

添加`top: 0px;`到您的`#header`班级

# java - Hazelcast 直写式地图存储在启动时预填充

> ID：15405377
> 
> 赞同：3
> 
> 时间：2013-03-14T09:23:36.740
> 
> 标签：java, hazelcast

我目前正在`POC`为开发一个`distributed, fault tolerant, ETL ecosystem`. 我`Hazelcast`为我的`clustering (data+notification)`目的选择了。谷歌搜索 Hazelcast 资源将我[带到这个链接](http://highscalability.com/blog/2011/4/12/caching-and-processing-2tb-mozilla-crash-reports-in-memory-w.html)，它完全符合我的想法，使用基于地图的解决方案。

我需要明白一点。在此之前，请允许我对我们的架构给出一个规范的想法：

说`we have 2 nodes A,B running our server instance clustered through hazelcast`。其中之一是接受请求的侦听器（但可以在故障转移时更改），例如 A。

A 获取请求并将其放入分布式地图。此映射由持久存储支持直写，并且在节点上配置单个内存备份。

每个实例都有一个本地映射条目监听器，它在条目添加事件时会`(asynchronous/queuing)`处理该条目，然后将其从分布式映射中删除。

这按预期工作。

**问题：**

假设已收到 10 个请求并在每个节点上分发了 5 个请求。每个节点上的 2 个条目已被处理，现在两个实例都崩溃了。

因此，现在支持数据存储中总共存在 6 个条目。

现在我们提出这两个实例。根据文档 - “`As of 1.9.3 MapLoader has the new MapLoader.loadAllKeys API. It is used for pre-populating the in-memory map when the map is first touched/used"`

我们`loadAllKeys()`通过简单地加载存储中存在的所有键值来实现。

1.  那么这是否意味着有可能两个实例现在都将加载 6 个条目并处理它们（从而导致重复处理）？**还是**以同步方式处理，以便在集群中仅加载一次？

2.  `On server startup I need to process the pending entries`（如果有的话）。我看到数据已加载，但未触发 entryAdded 事件。如何使 entryAdded 事件触发（或任何其他优雅的方式，通过它我将知道启动时有待处理的条目）？

请求建议。

谢谢， 苏塔努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:32:52.080

1.  在初始化时，将调用 loadAllKeys() ，这将返回持久存储中的所有 6 个键。然后每个节点将选择它拥有的密钥并仅加载它们。所以 A 可能加载 2 个条目，而 B 加载剩余的 4 个。

2.  store.load 不会触发入口监听器。怎么样：在初始化之后，在注册你的监听器之后，你可以获取 localEntries 并处理现有的。

# php - 单击工厂名称时在页面上显示 1 个工厂（个人）

> ID：15405380
> 
> 赞同：0
> 
> 时间：2013-03-14T09:23:44.370
> 
> 标签：php, mysql, codeigniter, show, records

我有工厂的搜索功能。当我搜索工厂并单击名称（超链接）时，我想在新页面上显示单个工厂。

你可以在这里看到它：http: [//kees.een-site-bouwen.nl/home/searchresults](http://kees.een-site-bouwen.nl/home/searchresults)

此链接的视图是：

```
<div id="bigcontent">
<h2>Zoekresultaten:</h2>
<br /> <br />
<table>
<tr><th>Bedrijf</th><th>Adres</th><th>Postcode</th><th>Plaats</th><th>Website</th><th>Email</th></tr>
<hr>
<br /> <br />

 <?php foreach($query as $item):?>
 <tr>
  <td><a href="<?php echo base_url()?>home/showindividueel/<?php echo $item->idbedrijven?>"><?= $item->Bedrijfsnaam   ?></td>
   <td><?= $item->Adres ?></td>
    <td><?= $item->Postcode ?></td>
    <td><?= $item->Plaats ?></td>
    <td><?= $item->Website ?></td>
     <td><?= $item->Email ?></td>
     </tr>
 <?php endforeach;?>

</table>

<br /> <br />
<hr>
<br />
<<<a href="<?php echo base_url('home/search') ?>">Terug</a>
</div> 
```

控制器功能：

```
 function showindividueel($id)
    {
        $data['query'] = $this->bedrijven_model->get_result($id);
        $this->load->view('header');
        $this->load->view('table_individual',$data);
        $this->load->view('footer');
    } 
```

我的模型功能：

```
function get_result($id)
{
    $this->db->select('*');
    $this->db->from('bedrijven');

    $this->db->where('idbedrijven', $id);
    $result = $this->db->get();
    return $result; 
} 
```

我对个别工厂的看法：

```
<div id="bigcontent">
<table>
<tr><th>Adres</th><th>Postcode</th><th>Plaats</th><th>Website</th><th>Email</th></tr>
<hr>
<br /> <br />

 <?php foreach($query as $item):?>
   <tr>
 <td><?= $item->Bedrijfsnaam ?></td>
 <td><?= $item->Adres ?></td>
 <td><?= $item->Postcode ?></td>
 <td><?= $item->Plaats ?></td>
 <td><?= $item->Website ?></td>
 <td><?= $item->Email ?></td>
 </tr>
 <?php endforeach;?>

  </table>
</div> 
```

我得到这里显示的错误：http: [//kees.een-site-bouwen.nl/home/showindividueel/1](http://kees.een-site-bouwen.nl/home/showindividueel/1)

我的工厂表以 idbedrijven 作为主键。带自动增量。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:28:41.157

```
return $result->result(); 
```

在模型中。

# eclipse - 插件 org.apache.maven.plugins:maven-resources-plugin:2.5 或其依赖项之一无法解析：UnresolvedAddressException

> ID：15405385
> 
> 赞同：13
> 
> 时间：2013-03-14T09:23:51.387
> 
> 标签：eclipse, maven, dependencies, integration

我已经将 Maven 与 Eclipse 集成并尝试创建一个 Maven 项目。每次我尝试创建项目时，它的 POM.xml 都会显示错误。

> 在此行找到多个注释：-生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile（执行：默认编译，阶段：编译）-插件执行不被生命周期配置覆盖：org.apache.maven.plugins:maven-compiler-plugin:2.3.2:testCompile（执行：default-testCompile，阶段：test-compile）-CoreException：无法计算构建计划：插件org.apache .maven.plugins:maven-compiler-plugin:2.3.2 或其依赖项之一无法解析：无法读取 org.apache.maven.plugins:maven-compiler-plugin:jar:2.3.2 的工件描述符： ArtifactResolutionException: 无法从 htt:///repo.maven.apache.org/maven2 传输 org.apache.maven.plugins:maven-compiler-plugin:pom:2.3.2 被缓存在本地
> 存储库，直到中央的更新间隔已经过去或强制更新，才会重新尝试解析。原始错误：无法将工件 org.apache.maven.plugins:maven-compiler-plugin:pom:2.3.2 从/到中央 (htt:///repo.maven.apache.org/maven2): null 到 htt :
> //repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler-plugin/2.3.2/maven-compiler-plugin-2.3.2.pom

如果我尝试运行 maven-install 或任何 maven 运行选项。我得到这个错误

> SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。SLF4J：默认为无操作 (NOP) 记录器实现 SLF4J：有关详细信息，请参阅 htt://www.slf4j.org/codes.html#StaticLoggerBinder。[INFO] 正在扫描项目... [INFO]
> [INFO] ------------------------------------ ------------------------------------- [INFO] 构建 CQ5 MyApp UI 0.0.1-SNAPSHOT [信息]------------------------------------------------ ------------------------ 下载： [http ://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-资源插件/2.5/maven-资源插件-2.5.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.pom) 5/maven-resources-plugin-2.5.pom: UnresolvedAddressException -> [Help 1] [ERROR] [ERROR] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。[ERROR] [ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException)

我应该怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-31T14:50:19.773

1.  如果您像我一样在 Windows 上工作，只需转到 C:\Users\Owner.m2\repository 并删除其中的所有文件。确保保持你的日食关闭。
2.  打开eclipse并右键单击您的项目，然后单击Maven，然后单击Update Project。将出现一个对话框窗口，确保已选择“清理项目”和“从 pom.xml 更新项目配置”选项。

这应该消除项目中的所有错误。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-22T14:38:10.017

您实际上不必从 .m2\repository 目录中删除所有内容。只是“有问题的库”的目录，在您的示例中 YOUR_MAVEN_REPO.m2\repository\org\apache\maven\plugins\maven-compiler-plugin 并删除 2.3.2 文件夹。

然后右键单击Eclipse和Maven中的项目->更新项目。你可能会得到一个不同的错误，你必须重复这个过程。做3-4次应该没问题...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-22T14:55:56.327

谢谢大家的帮助和指导。我自己得到了错误。我在代理网络中，需要在 apache maven 的 settings.xml 文件中设置用户 ID 和密码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T21:36:33.497

听起来您可能需要在 pom 文件中添加 sl4j 依赖项。请参阅此处：[无法加载类“org.slf4j.impl.StaticLoggerBinder”](https://stackoverflow.com/questions/7951610/failed-to-load-class-org-slf4j-impl-staticloggerbinder)

这是 CQ5.5 中依赖查找器的依赖：

```
<dependency>
    <groupId>org.apache.sling</groupId>
    <artifactId>org.apache.sling.commons.log</artifactId>
    <version>2.1.3-R1232904</version>
    <scope>provided</scope>
</dependency> 
```

希望有帮助，祝你好运。

# java - 聊天 UDP 客户端/服务器程序

> ID：15405389
> 
> 赞同：2
> 
> 时间：2013-03-14T09:24:01.730
> 
> 标签：java, client-server

您好我正在尝试创建一个客户端/服务器聊天程序。我有三个客户端和一个服务器，当客户端向服务器发送一些字符串时，服务器会将这个字符串发送给其他客户端。我已经创建了客户端将数据发送到服务器的部分，但我不知道如何将接收到的数据从客户端发送到其他客户端。

这是我创建的代码：

对于服务器：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class Server {

    private static DatagramSocket serverSocket;

    public Server() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws Exception {

        serverSocket = new DatagramSocket(1111);
        byte[] receiveData = new byte[1024];
        byte[] sendData = new byte[1024];
        while(true)
           {
              DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
              serverSocket.receive(receivePacket);
              String s = new String( receivePacket.getData());
              System.out.println("Client dit : " + s);
              InetAddress IPAddress = receivePacket.getAddress();
              boolean found = false;
              int port = receivePacket.getPort();
              sendData = s.getBytes();
           }

    }

} 
```

对于客户：（X 是客户数量：client1/client2...）

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

    public class ClientX {

      public ClientX() {
        // TODO Auto-generated constructor stub
      }

      /**
       * @param args
       * @throws IOException 
       */
      public static void main(String[] args) throws Exception {

        BufferedReader inFromUser =
                 new BufferedReader(new InputStreamReader(System.in));
              DatagramSocket clientSocket = new DatagramSocket();
              InetAddress IPAddress = InetAddress.getByName("localhost");
              System.out.println("Connécté au serveur !");
              byte[] sendData = new byte[1024];
              byte[] receiveData = new byte[1024];
              System.out.print("Ecrire un message: ");
              String s = inFromUser.readLine();
              sendData = s.getBytes();
              DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 1111);
              clientSocket.send(sendPacket);
              DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
              clientSocket.receive(receivePacket);
              String message = new String(receivePacket.getData());
              System.out.println(message);
              clientSocket.close();

      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:11:22.600

当客户端连接到服务器时，您可以将客户端地址保存在服务器中，然后，每次客户端向服务器发送新消息时，将该消息发送给其他客户端。

您也可以使用多播。让客户端加入一个多播地址，并将新消息从服务器发送到该地址。这样你就不需要保存地址，每个客户都可以“听到”消息。

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/net/MulticastSocket.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/MulticastSocket.html)和[http://staff.www.ltu.se/~peppar/java/multicast_example/](http://staff.www.ltu.se/~peppar/java/multicast_example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:03:08.223

有点不清楚您的聊天应该如何工作。但是向前迈进的最简单的想法是：

1.  您的服务器应保留收到的最新消息数 (X)。存储收到每条消息的时间也很好。
2.  每次客户端连接到服务器时，服务器都会向它发送 X 条最新消息。

# jquery - 带有小滚动条的 Jquery 弹出 div 就像在移动设备中一样

> ID：15405390
> 
> 赞同：1
> 
> 时间：2013-03-14T09:24:05.037
> 
> 标签：jquery, jquery-mobile, scroll, scrollbar

我正在使用 Jquery 构建移动应用程序，我想显示一个带有大量文本的小弹出框。`popup is 30% of the screen`我希望文本`scrollable`带有移动小滚动条。

这是我的弹出窗口：

```
<div id="popup" class= "DivWithScroll">
    <div class="txt">
        <p id="text"> textData...textData...textData</p>
    </div>
</div> 
```

尝试使用此 CSS，但它`windows scroller`- 不是我需要的

```
.DivWithScroll{
    height:120px;
    overflow:scroll;
    overflow-x:hidden;
} 
```

尝试使用插件`iscroll.js`。看到了一些例子，但没有得到我想要的。

```
myScroll = new iScroll('popup'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:34:38.280

您可以`webkit scrollbars`使用自定义`CSS`。

阅读这篇文章了解更多详情：[http ://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:22:35.063

我为你做了一个例子：

首先创建一个弹出窗口，并应用 webkit 滚动样式：
[http ://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

尝试一下：

```
$(function(){

    // content of the pop up
    var content = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.  It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).";

    // add pop up to the window
    $("body").append("<div id='PopUp'>" + content + "</div>");

    // css properties
    $("#PopUp").css({
        "height":"300px",
        "width":"300px",
        "border":"1px solid #AAA",
        "background-color":"#FFF",
        "position":"fixed",
        "top":"50%",
        "left":"50%",
        "margin-top":"-150px",
        "margin-left":"-150px",
        "overflow-y":"scroll"
    });
});
```

```
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

# javascript - document.getElementById('xxx') 显示为空

> ID：15405392
> 
> 赞同：0
> 
> 时间：2013-03-14T09:24:10.567
> 
> 标签：javascript, html, arrays

这是我的 JS

```
var linkArray = {
    boothsizeDiv_link: false,
    furnishingsprovidedDiv_link: false,
    electricalDiv_link: false,
    rentalfurnishingsDiv_link: false,
    gesgraphicsDiv_link: false,
    geslaborDiv_link: false,
    contractorDiv_link: false,
    carpetingDiv_link: false,
    boothlightingDiv_link: false,
    javitsDiv_link: false,
    boothsealDiv_link: false,
    mannequinsDiv_link: false,
    calcDiv_link: false
};
for (var i in linkArray) {

    if (linkArray['boothsizeDiv_link'] == false) {

        document.getElementById('jumplinks').style.display = 'block';
        document.getElementById('boothsizeDiv_link').style.display = 'block';
    }
} 
```

html是

```
<div id="jumplinks" align="left" style="display:none;">

 <div id="boothsizeDiv_link" style="display:none;"><a href="#" onclick="ToggleLinks('boothsizeDiv');"><font face="calibri">BOOTHSIZE</font></a></div>

</div> 
```

在我的 html 文件中，有 id 为的 div`jumplinks`当`style='display:none;'` 我尝试运行 JS 文件时，它说的`document.getElementById('jumplinks')`是`null`. 问题是什么？需要帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:28:27.347

正如评论中提到的，您不需要遍历 linkArray 来查找它的长度。使用 linkArray.length 查找数组长度。也许：

```
console.log("linkArray length is: " + linkArray.length); 
```

关于 null 错误，您能否告诉我们您在哪里调用 javascript？您可以将 JS 包含在头部的一个函数中，然后从其他地方调用该函数。下面的代码也可以作为一个开关，让你也可以隐藏 div：

```
<script>

function togLinks() {
    if (linkArray['boothsizeDiv_link'] == false) {

        var jumplinks = document.getElementById('jumplinks');
        var boothsizeDiv_link = document.getElementById('boothsizeDiv_link');

        jumplinks.style.display = jumplinks.style.display == "block" ? "none" : "block";
        boothsizeDiv_link.style.display = boothsizeDiv_link.style.display == "block" ? "none" : "block";
    }
}

</script> 
```

调用切换链接：

```
<div onclick="togLinks()">show/hide links</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T09:26:05.220

您应该只在 DOM 完成加载后执行 Javascript，因此上述内容仅在`document.ready`事件触发后才有效。如果您在`<head>`页面中运行代码，它会在元素实际存在之前运行，因此它是`null`.

这是一个使用纯 Javascript 连接到该事件的示例： [$(document).ready 等效于没有 jQuery](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)

# dynamics-crm-2011 - 为什么发送电子邮件插件不起作用？

> ID：15405394
> 
> 赞同：1
> 
> 时间：2013-03-14T09:24:22.337
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我创建了一个插件（使用开发人员的工具包），每当创建 a 时，它将发送一封邮件到`Participants`已转换的邮件。但是这个插件不工作。当我尝试调试它时，插件注册工具（SDK）中出现以下消息`Contacts``Participants`

```
Profiler> Plug-in AppDomain Created
Profiler> Parsed Profiler File Successfully.
Profiler> Constructor Execution Started: XXXXXXXX
Profiler> Constructor Execution Completed Successfully (Duration = 8ms).
Profiler> Profiler Execution Started: XXXXXXXXXXX
Plug-in> Entered CRMEmailToParticipantsPackage.EmailPlugins.PostParticipantCreate.Execute(), 
Plug-in> Exiting CRMEmailToParticipantsPackage.EmailPlugins.PostParticipantCreate.Execute(),
Profiler> Profiler Execution Completed Successfully (Duration = 57ms).
Profiler> Profiler AppDomain Unloaded 
```

. 管道阶段是创建消息的预验证。这是我的代码：

```
protected void ExecutePostParticipantCreate(LocalPluginContext localContext)
{
    if (localContext == null)
    {
        throw new ArgumentNullException("localContext");
    }

    // TODO: Implement your custom Plug-in business logic.

    IPluginExecutionContext context = localContext.PluginExecutionContext;
    IOrganizationService service = localContext.OrganizationService;

    if (context.InputParameters.Contains("Target") &&
        context.InputParameters["Target"] is Entity)
    {
        try
        {
            Entity entity = (Entity)context.InputParameters["Target"];
            if (entity.LogicalName == "new_participant")
            {
                Guid Contact_id = ((EntityReference)entity.Attributes["new_participantscontact"]).Id;

                Guid trip_Id = ((EntityReference)entity.Attributes["new_tripparticipants"]).Id;

                ColumnSet col1 = new ColumnSet("new_name", "new_date", "new_destination");
                Entity trip = service.Retrieve("new_trip", trip_Id, col1);
                var Trip_name = trip.Attributes["new_name"];
                var Trip_date = trip.Attributes["new_date"];
                var Trip_destination = trip.Attributes["new_destination"];
                string emailBody = "Hi, your " + Trip_name.ToString() + "is booked on : " + Trip_date.ToString() + "; Destination : " + Trip_destination.ToString();
                Guid _userId = context.UserId;

                ActivityParty fromParty = new ActivityParty
                {
                    PartyId = new EntityReference(SystemUser.EntityLogicalName, _userId)
                };

                ActivityParty toParty = new ActivityParty
                {
                    PartyId = new EntityReference("new_participantscontact", Contact_id)
                };

               Email email = new Email
                    {
                    To = new ActivityParty[] { toParty },
                    From = new ActivityParty[] { fromParty },
                    Subject =Trip_name.ToString()+ "  :Trip Details",
                    Description = emailBody,
                    DirectionCode = true
                    };

                Guid emailID = service.Create(email);

               SendEmailRequest req = new SendEmailRequest();
               req.EmailId = emailID;
               req.TrackingToken = "";
               req.IssueSend = true;

               SendEmailResponse res = (SendEmailResponse)service.Execute(req);
            }
        }
        catch (FaultException ex)
        {

            throw new InvalidPluginExecutionException("An error occurred in the plug-in.", ex);
        }
    }
} 
```

我在这里做错了吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:40:40.200

我认为第一件事是发现您的插件是否被触发。尝试[调试](http://guruprasadcrm.blogspot.ca/2011/11/how-to-debug-crm-2011-online-plugin.html)或使用[ITracingService](http://mscrmtech.com/2010112682/mscrm-2011-useful-itracingservice-addiion-when-creating-plugin-assemblies)来了解这一点。如果您发现您的插件没有被触发，则代码是不必要的。请注意，在 CRM Online 中部署插件具有仅在沙盒模式下运行的限制。尝试在 CRM Online 中查看插件[的分步](http://msdn.microsoft.com/en-us/library/hh237515.aspx)部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:45:08.270

您是否能够使用此处列出的步骤进行调试：[http](http://microsoftcrmworld.blogspot.com/2013/01/debug-plugins-on-your-local-pc-without.html) ://microsoftcrmworld.blogspot.com/2013/01/debug-plugins-on-your-local-pc-without.html ？

如果没有，您可以添加一些 localContext.trace() 调用，然后在执行方法的最后抛出异常。下载并查看日志文件以查看 localContext.trace() 的输出。这将使您了解正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:43:42.130

您的代码似乎很好...我观察到您正在向自定义实体发送邮件...您是否在自定义期间启用了“发送电子邮件”选项？

[检查此链接以启用它](http://www.avanadeblog.com/xrm/2010/11/crm-2011-feature-of-the-week-11222010-new-entity-creation-flexibility.html)

# java - 当套接字关闭时，是否有必要关闭从套接字的 IO 流创建的输入/输出流？

> ID：15405396
> 
> 赞同：7
> 
> 时间：2013-03-14T09:24:27.500
> 
> 标签：java, sockets

```
 private val in = new BufferedReader(new InputStreamReader(con.getInputStream()))
  private val out = new PrintWriter(con.getOutputStream(), true)
  try {
    while (true) {
      if (in.readLine() == null)
        throw new IOException("connection reset by peer")
    }
  } catch {
    case e: Exception =>
  } finally {

    // Is this necessary?
    in.close()
    out.close()

    // Close socket
    con.shutdownInput()
    con.shutdownOutput()
    con.close()
  } 
```

如果从套接字的输入或输出流创建任何 IO 流或读取器/写入器，是否需要在套接字关闭之前或之后关闭它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:44:25.160

> 如果从套接字的输入或输出流创建任何 IO 流或读取器/写入器，是否需要在套接字关闭之前或之后关闭它们？

您应该关闭最外面的`OutputStream`或者`Writer`您从套接字输出流创建的。这将刷新流并关闭套接字及其输入流。关闭套接字的任何其他方面，例如它的直接输出流、它的输入流或围绕它的任何东西，或套接字本身，完成了大部分但不是全部：具体来说，在输出流之前关闭输入流在您的示例中，*防止*输出流被刷新，因此可能会丢失数据。

在收盘前调用`shutdownInput()`or总是多余的。`shutdownOutput()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T09:27:04.093

从[套接字 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#close%28%29)：

> 关闭此套接字也会关闭套接字的 InputStream 和 OutputStream。

当然，您的代码显式打开的任何读取器/编写器也应该显式关闭，但就网络资源而言，无论如何都会释放它们。

就操作的顺序而言，适用标准规则：最后打开 -> 先关闭。所以在关闭底层套接字连接*之前*一定要关闭所有的读者/作者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:35:36.737

在这种情况下没有必要，但它没有害处。

但是，如果您没有在构造函数中设置“autoFlush”标志，那么如果您在关闭之前`PrintWriter`没有关闭或刷新 ，则可能不会发送一些数据。（如果您以错误的顺序关闭，您可能会遇到异常！）`Writer``Socket`

对于读者/输入流来说，这不是问题。您已经决定忽略任何缓冲输入。

* * *

不存在泄漏资源（文件描述符）的问题。如果 Socket 关闭，则释放所有 I/O 资源。你不需要打电话`shutdownInput`或`shutdownOutput`要么。关闭`Socket`将做到这一点。

# ios - 如何检查定位服务并启动不同的视图？

> ID：15405399
> 
> 赞同：0
> 
> 时间：2013-03-14T09:24:34.957
> 
> 标签：ios, uiviewcontroller, core-location, cllocationmanager, uistoryboard

我想检查我的应用程序是否启用或禁用了位置服务。因此，如果位置服务被禁用，我会启动不同的视图。如何使用一个情节提要做到这一点？我需要一个示例代码。

![我的故事板](../Images/90abdca3ebbf3aa21445d178dcb9b8db.png)

Segue 标识符（例如 GPS 视图）：

![转义标识符](../Images/ce051009b13de933cf4c7491a4a4da60.png)

我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if([CLLocationManager locationServicesEnabled]){

        NSLog(@"Konum Servisleri Açık");

        if([CLLocationManager authorizationStatus]==kCLAuthorizationStatusDenied){
            alert = [[UIAlertView alloc] initWithTitle:@"Konum Servisleri Kapalı" message:@"Etkinleştirmek için ayarlardan konum servislerini kullanmasına izin verin." delegate:nil cancelButtonTitle:@"Tamam" otherButtonTitles:nil];
            [alert show];
            segueKontrol = @"Normal";
            [self performSegueWithIdentifier:@"Normal" sender:self];
        }
        else{
            segueKontrol = @"GPS";
            [self performSegueWithIdentifier:@"GPS" sender:self];
        }
    }

    else{
        NSLog(@"Konum Servisleri Kapalı");
        alert = [[UIAlertView alloc] initWithTitle:@"Konum Servisleri Kapalı" message:@"Etkinleştirmek için ayarlardan Konum Servislerini etkinleştirin." delegate:nil cancelButtonTitle:@"Tamam" otherButtonTitles:nil];
        [alert show];

        segueKontrol = @"Normal";
        [self performSegueWithIdentifier:@"Normal" sender:self];
    }

    // Do any additional setup after loading the view, typically from a nib.
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([[segue identifier] isEqualToString:@"Normal"])
    {
        CCHop2ViewController *cc = [segue destinationViewController];
    }
    else{
     CCHopViewController *cc = [segue destinationViewController];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:28:37.443

首先，在情节提要名称中，您的 2 个具有唯一名称的 segues，例如`A`在`B` 您的第一个视图控制器（处理最左侧视图的那个）中，执行以下操作：

```
if (([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) &&
            [CLLocationManager locationServicesEnabled]) {
  [self performSegueWithIdentifier:@"A" sender:self];
} else {
  [self performSegueWithIdentifier:@"B" sender:self];
} 
```

# magento - Magento 页面的自定义规范链接

> ID：15405400
> 
> 赞同：0
> 
> 时间：2013-03-14T09:24:42.847
> 
> 标签：magento, canonical-link

我正在尝试找到一种方法来修改 Magento 中的 head.php 文件，以便我可以通过产品和类别的“自定义布局更新”字段添加自定义规范链接，以便它将替换 Magento 生成的现有规范链接。

我只想更改特定类别和产品的规范链接，并认为这是最整洁的方法，但我无法理解所需的代码更改。任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:46:15.327

```
<action method="removeItem" block="head">
    <item>link_rel</item>
    <name>{product url}</name>
</action>
<action method="addLinkRel" block="head">
    <link>link_rel</link>
</action> 
```

# magento - magento右侧的快速登录表单

> ID：15405409
> 
> 赞同：1
> 
> 时间：2013-03-14T09:25:11.070
> 
> 标签：magento

我想在我的网站中添加相同的登录表单

是否有任何可用的模块，或者我们可以对此进行其他编码更改，请给我一些建议

我想要这样的东西：http: [//livedemo00.template-help.com/magento_42632/](http://livedemo00.template-help.com/magento_42632/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:57:57.857

您可以创建一个类型为 customer/form_login 的块。使用 XML 如下

```
<block type="customer/form_login" name="customer_small_login" template="customer/form/small-login.phtml" /> 
```

您可以查看`customer/form/login.phtml`表格以了解您的区块所期望的字段类型。0

然后，您可以使用将其添加到侧边栏

`<?php $this->getChildHtml('customer_small_login'); ?>`

**注意：**确保您将 XML 块添加为您希望将其包含在其中的侧边栏的子节点。

# java - 为什么可以更改 java 中抽象方法的返回类型？

> ID：15405410
> 
> 赞同：2
> 
> 时间：2013-03-14T09:25:15.780
> 
> 标签：java

为什么允许在子类中更改抽象方法的返回类型？

```
abstract class Animal {
    public abstract Animal assing(Animal a);
}

class Lizard extends Animal {
    @Override
    public Lizard assing(Animal a) {
        return new Lizard();
    }
}

class Chicken extends Animal {
    @Override
    public Chicken assing(Animal a) {
        return new Chicken();
    }
} 
```

而不允许更改参数类型：

```
abstract class Animal {
    public abstract void foo(int x);
}

class Lizard extends Animal {
    // compiler error
    // the type Lizard must implement the inherited abstract method Animal.foo(int)
    public void foo(float x) {
    }
}

class Chicken extends Animal {
    @Override
    public void foo(int x) {
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T09:26:09.013

因为，`overriden methods`允许从**java 1.5+ 版本获得**[**协变返回**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#d5e11368)。

 **另外，当您更改具体类中的参数类型时，您基本上是在声明一个全新的方法，该方法与抽象类中定义的抽象方法不同。请记住，您需要（由编译器强制）在扩展抽象类的具体类中实现/覆盖那些抽象方法。

简单地说，这里是java**中重写方法的规则：**

*   重写的方法和参数列表应该完全相同
*   返回类型应该是在超类中被覆盖的原始方法中声明的子类型（在协变返回的情况下），或者应该是相同的。
*   与覆盖方法的访问级别相比，访问级别的限制并不多。例如，当超类被认为是公共的时，在这种情况下，子类中存在的覆盖方法将不是公共的或私有的。但是与覆盖方法的访问级别相比，访问级别可能没有太大限制。
*   如果实例方法被子类继承，在这种情况下，只有它们可能被覆盖。
*   已声明为 final 的方法可能不会被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:30:16.543

在您的问题中，您混淆了两个方面：在覆盖方法中使用*子类型和在方法参数中使用**完全不相关的类型*和原语。

在任何情况下，您都不能将 a 从被覆盖的方法更改`int`为覆盖方法`float`中的 a。唯一允许的特殊情况是返回类型协方差。从理论上讲，参数类型*可以*是逆变的，但这会使方法重载解析变得一团糟，这已经非常复杂了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:33:16.287

被覆盖的方法应该具有相同数量的方法参数并且它们的类型应该相同。但是他们被允许有协变回报

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:28:24.483

换一种说法：返回抽象方法所需子类型的方法仍然履行合同。虽然采用浮点数的方法不履行该方法采用 int 的约定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T09:30:31.567

协变返回，意味着当一个方法被重写时，被重写方法的返回类型被允许是被重写方法的返回类型的子类型。为了用一个例子来说明这一点，一个常见的例子是 Object.clone() - 它被声明为返回一个 Object 类型。您可以在自己的课程中覆盖它。**

# java - Maven 构建只更改了文件

> ID：15405413
> 
> 赞同：40
> 
> 时间：2013-03-14T09:25:25.957
> 
> 标签：java, maven, build, continuous-integration

可以说我有如下的模块结构

```
 Modules
       ->utils
       ->domain
       ->client
       ->services
       ->deploy (this is at the module level) 
```

现在要启动客户端，我需要构建所有模块，`i.e utils, domain, client, services,`因为我正在加载所有上述模块的 jar 以最终启动客户端

所有的罐子都在模块部署中组装。

我的问题是，例如，如果我更改服务中的任何内容，那么有没有办法在运行构建时`deploy maven`可以识别它必须只构建`services`并因此构建它并将其部署在部署文件夹中？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-14T09:34:06.640

如果只调用“mvn install”而不调用“clean”，编译器插件将只编译修改过的类。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-04-23T10:48:11.747

**对于 GIT**

`mvn install -amd -pl $(git status | grep -E "modified:|deleted:|added:" | awk '{print $2}' | cut -f1 -d"/")`

或者

**在您的 .bashrc 文件**中（.bashrc 可以在主目录 ~/.bashrc 中找到，或者如果不存在则创建它）添加以下函数。

```
mvn_changed_modules(){
    [ -z "$1" ] && echo "Expected command : mvn_changed_modules (install/build/clean or any maven command)" && exit 0

        modules=$(git status | grep -E "modified:|deleted:|added:" | awk '{print $2}' | cut -f1 -d"/")

                if [  -z "$modules" ];
                then
                        echo "No changes (modified / deleted / added)  found"
                else
                        echo -e "Changed modules are : `echo $modules`\n\n"
                        mvn $1 -amd -pl $modules
                fi
} 
```

**然后在重新启动 bash** （命令提示符）后，您 ** 可以从 ROOT 目录本身使用以下命令**。

> smilyface@machine>ProjectRootDir]$ **mvn_changed_module install**

***它是如何工作***
的根据问题*是“在服务*模块`mvn install -amd -pl services`中完成一些更改”时的命令因此，首先从更改的文件中获取模块名称并将其作为 mvn-install 命令的输入

 ***例如**，下面是修改文件列表（的输出`git status`） -
**services** /pom.xml
**services** /ReadMe.txt
**web** /src/java/com/some/Name.java
然后是需要构建的模块`services`名称`web`/编译/安装

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-14T12:55:00.320

在多模块构建中，您可以使用：

```
mvn -pl ChangedModule compile 
```

从根模块将只编译给定的**ChangedModule**。编译器插件只会编译已更改的文件。但是您更改的模块可能会导致重新编译依赖于**ChangedModule**的其他模块。这可以通过使用以下方法来实现：

```
mvn -amd -pl ChangedModule compile 
```

其中 -amd 意味着**也使家属**。**这无需通过mvn install**将整个模块安装到本地存储库中即可工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-10T06:04:59.310

在尝试并使用上述建议后，我遇到了以下问题：

1.  Maven 安装（没有清理）仍然需要很多时间，对于几个项目来说可能是 10-20 秒的额外时间。
2.  Sebasjm 的解决方案快速且有用（我使用了几个月），但是如果您有几个更改的项目，那么一直重建它们（如果您甚至没有更改任何内容）是浪费时间

真正对我有用的是将源修改日期与本地存储库中的 .jar 修改进行比较。如果您只检查 VCS 更改的文件（请参阅 sebasjm 的答案），那么日期比较不会花费明显的时间（对我来说，100 个更改的文件不到 1 秒）。这种方法的主要好处是只对真正改变的项目进行非常准确的重建。主要问题是修改日期比较不仅仅是单行脚本。

对于那些想尝试但懒得自己写这样的脚本的人来说，分享我的版本：[https](https://github.com/bugy/rebuilder) ://github.com/bugy/rebuilder (linux/windows)。它可以做一些额外的有用的事情，但主要思想和中心算法如上所述。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-24T17:40:31.847

如果您使用的是 SVN 和 *nix，则从根模块

```
mvn install -amd -pl $(svn st | colrm 1 8 | sed 's /.*  ' | xargs echo | sed 's- -,:-g' | sed 's ^ : ') 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-20T12:00:59.800

我也有同样的挫败感，当时我还写了一个项目——可惜它不可用，但我发现有人实现了类似的东西：

例如 - [https://github.com/erickzanardo/maven-watcher](https://github.com/erickzanardo/maven-watcher)

它使用`nodejs`并假设一个`maven`项目，但应该在 Windows 和 unix 上工作。

我实现的想法是观察变化，然后编译变化的内容。- 有点像`nodemon`。

所以例如

*   当 java 文件更改时 - 我编译模块
*   当类文件或 jar 更改时 - 我会执行其他操作（例如将 jar 复制到 tomcat 下并重新启动 tomcat）

而且这两者是无关的..所以如果java编译失败，应该没有理由更新jar文件..并且它很稳定。

`.java`我已经在一个包含 23K文件的项目中使用它，并且运行顺利。

监视过程需要几秒钟才能启动 - 但只有在检测到更改时才会运行，因此整体体验很好。

我打算添加的下一步类似于您的 SVN 支持 - 列出修改后的文件并将它们用作初始化。

需要注意的重要一点 - 如果编译失败，它将在下一次修改时重试。所以如果你修改了多个jar，只要你在写代码，编译就会失败，每次代码更改时它都会重试编译所有内容，直到编译成功。

如果您愿意，我可以尝试找到我的旧项目，稍微修复一下并发布它..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-30T22:26:10.827

到目前为止发布的问题和答案没有考虑依赖树。如果更改了**utils模块怎么办？**我们需要重建（至少重新测试）它以及依赖它的所有模块。

这样做的方法：

*   [https://github.com/avodonosov/hashver-maven-plugin/](https://github.com/avodonosov/hashver-maven-plugin/)
*   [https://github.com/vackosar/gitflow-incremental-builder/](https://github.com/vackosar/gitflow-incremental-builder/)
*   Gradle Enterprise 是一项提供构建缓存的商业服务，特别是对于 maven
*   迁移到支持开箱即用构建缓存的更新的构建工具，例如 Gradle 或 Bazel。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-07T08:53:51.403

*   `mvn clean install`运行完整构建
*   `mvn install`仅编译更改并准备战争/罐子其他二进制文件
*   `mvn compile`仅编译更改的文件...

`mvn compile`最快的也是如此。但是如果使用 war/jars 运行/调试您的项目，它可能不会显示这些更改。*

# java - 九人莫里斯游戏的比特板表示

> ID：15405419
> 
> 赞同：3
> 
> 时间：2013-03-14T09:25:51.837
> 
> 标签：java, artificial-intelligence, bitboard

我正在用 Java 编写[九人莫里斯游戏](http://en.wikipedia.org/wiki/Nine_Men%27s_Morris)，并且已经使用 negamax 实现了游戏规则和 AI。然而，游戏是基于数组的，当 AI 思考时（从 6 层开始），移动生成需要相当长的时间。

我的位置数组基于下图：

```
// 0        1        2
//    3     4     5
//       6  7  8
// 9  10 11    12 13 14
//       15 16 17
//    18    19    20
// 21       22       23 
```

我有更多的阵列充满了可能的工厂和相邻的位置。

我决定将游戏从阵列更改为使用位板，以便移动生成和当前使用阵列的其他区域更快。

我的第一步是为每个玩家准备一个位板，用于跟踪玩家在棋盘上的棋子。

第二步是确定空闲位置的位置。我知道我可以这样做：

```
freepositions = ~(player1bb | player2bb); 
```

所以我的问题是，我如何设置/更新玩家的位板以跟踪他们的作品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:17:16.793

考虑到玩家的棋盘长度为 24 位，棋盘的位置 0 为第一位，因此在玩家下棋时设置棋盘非常简单，只需执行以下操作：

```
player1bb |= (1 << pos); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:22:59.643

位板很有趣:-)

我正在为这个问题编写一些代码，但这里有一些可以让你开始的东西：

```
public class BitBoard {
    public static final int White = 0;
    public static final int Black = 1;

    public long[] board = { 0, 0 };
    public int Player = 0;
    public int[] left = { 9, 9 };

    public int Opponent()
    {
        return Player == White ? Black : White;
    }

    public void makemove(int from, int to, int capture)
    {
        if (from == 0) { 
            assert left[Player] > 0 : "makemove: no left";
            left[Player]--;
        }       
        if (from != 0)
        {
            assert (board[Player] & from) != 0 : "makemove: source empty";
            board[Player] &= ~from;
        }
        assert (board[Player] & to) == 0 : "makemove: target must be empty";
        board[Player] |= to;
        if (capture != 0)
        {
            assert (board[Opponent()] & capture) != 0 : "makemove: capture empty";
            board[Opponent()] &= ~capture;
        }
    }

    public void unmakemove(int from, int to, int capture)
    {
        if (capture != 0)
        {
            assert (board[Opponent()] & capture) == 0 : "unmakemove: capture empty";
            board[Opponent()] |= capture;
        }
        assert (board[Player] & to) != 0 : "unmakemove: target empty";
        board[Player] &= ~to;
        if (from != 0)
        {
            assert (board[Opponent()] & capture) != 0 : "unmakemove: source must be empty empty";
            board[Player] |= from;
        }
        if (from == 0) { 
            assert left[Player] < 9 : "unmakemove: too many left";
            left[Player]++;
        }           
    }

    public void generatemoves()
    {
        // determine phase

        // 

    }
} 
```

没有对此进行全面测试，但以下代码显示了如何使用：

```
import java.math.*;

public class NineMenBitboard {
    static int tst;

    //   A  B  C  D  E  F  G
    // 1 0        1        2
    // 2    3     4     5
    // 3       6  7  8
    // 4 9 10 11    12 13 14
    // 5      15 16 17
    // 6   18    19    20
    // 7 21       22       23

    // positions

    static int A1 = 1 << 0;
    static int D1 = 1 << 1;
    static int G1 = 1 << 2;
    static int B2 = 1 << 3;
    static int D2 = 1 << 4;
    static int F2 = 1 << 5;
    static int C3 = 1 << 6;
    static int D3 = 1 << 7;
    static int E3 = 1 << 8;
    static int A4 = 1 << 9;
    static int B4 = 1 << 10;
    static int C4 = 1 << 11;
    static int E4 = 1 << 12;
    static int F4 = 1 << 13;
    static int G4 = 1 << 14;
    static int C5 = 1 << 15;
    static int D5 = 1 << 16;
    static int E5 = 1 << 17;
    static int B6 = 1 << 18;
    static int D6 = 1 << 19;
    static int F6 = 1 << 20;
    static int A7 = 1 << 21;
    static int D7 = 1 << 22;
    static int G7 = 1 << 23;

    // mills

    static int hor1 = A1 | D1 | G1;
    static int hor2 = B2 | D2 | F2;
    static int hor3 = C3 | D3 | E3;
    static int hor4_1 = A4 | B4 | C4;
    static int hor4_2 = E4 | F4 | G4;
    static int hor5 = C5 | D5 | E5;
    static int hor6 = B6 | D6 | F6;
    static int hor7 = A7 | D7 | G7;

    static int ver1 = A1 | A4 | A7;
    static int ver2 = B2 | B4 | B6;
    static int ver3 = C3 | C4 | C5;
    static int ver4_1 = D1 | D2 | D3;
    static int ver4_2 = D5 | D6 | D7;
    static int ver5 = E3 | E4 | E5;
    static int ver6 = F2 | F4 | F6;
    static int ver7 = G1 | G4 | G7; 

    public static void main(String[] args) {
        // sample on how to loop bits

        BitBoard game = new BitBoard();
        game.makemove(0, A1, 0);
        game.makemove(A1, A4, 0);

        System.out.println();

        tst = 255;

        for(int looper = tst, i = Integer.highestOneBit(looper); looper != 0; looper &= ~i, i = Integer.highestOneBit(looper))
        {
            System.out.println(i);
        }       

        System.out.println(tst);
      }
} 
```

还添加了一个循环来显示如何循环遍历位置。

玩得开心。我也将编写这个游戏，因为我想刷新我的 AB 修剪 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:37:04.907

这是 Perft 代码。我也在做所有的第一步，但在未来的版本中，我可能只会做 6 个独特的（其他只会导致评估镜像）。

```
public long Perft(int depth)
{
    long nodes = 0;

    ArrayList<Integer> moves = generateMoves();

    if (depth == 1) 
    {
        //for(int move : moves)
        //  System.out.println(moveStr(move));
        return moves.size();
    }

    for (int move : moves) {
        int capture = 1 << (move >> 10) >> 1; 
        int to = 1 << ((move >> 5) & 31) >> 1;
        int from = 1 << (move & 31) >> 1;           
        makemove(from, to, capture);
        //System.out.print(this);
        nodes += Perft(depth - 1);
        unmakemove(from, to, capture);
    }
    return nodes;       
} 
```

如您所见，我将动作打包成整数。

对于健全性检查，这是我的第一个 perft 结果：

*   1 24
*   2 552
*   3 12144
*   4 255024
*   5 5140800
*   6 99274176 (3.107ms)
*   7 1873562112（53 秒）
*   8 耗时太长

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T16:26:02.207

我知道你已经实现了它，但你应该这样实现它

```
//  0        1           2
//     8     9       10
//        16  17  18
//  7 15  23      19 11  3
//        22   21 20
//    14    13       12
//  6       5            4 
```

这样你就可以移动投掷位置 pos >> 1 for privious pos << 1 for next , pos << 8 for next byte 相同位置 pos >> 8 previous 用于字节相同位置

# android - 在 android 4.2.2 (Nexus 4) 上模拟位置

> ID：15405420
> 
> 赞同：1
> 
> 时间：2013-03-14T09:25:53.783
> 
> 标签：android, gps, mocking

我正在寻找 android 4.2.2 (Nexus 4) 上的“模拟位置”选项，但我找不到它。通常可以在“Preferences => Applications => Devlopment / Mock Locations”找到

我在谷歌帮助中心上搜索，我正在“谷歌搜索”，但什么也没有......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T11:21:28.503

`Allow mock locations`位于“ `Settings`> `Developer Options`”中。
要启用“ `Developer Options`”，请反复触摸“ `About`> `Build Number`”。
祝你好运！

# postgresql - postgresql 上的 pg_global 和 pg_default 有什么区别？

> ID：15405421
> 
> 赞同：14
> 
> 时间：2013-03-14T09:26:00.680
> 
> 标签：postgresql

我知道这是一个非常基本的问题，但我在谷歌上找不到答案。

但是这两个表空间之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T09:51:45.393

从[文档](https://www.postgresql.org/docs/current/manage-ag-tablespaces.html)：

> initdb 会自动创建两个表空间。pg_global 表空间用于共享系统目录。pg_default 表空间是 template1 和 template0 数据库的默认表空间（因此，也将是其他数据库的默认表空间，除非被 CREATE DATABASE 中的 TABLESPACE 子句覆盖）。

# php - 优化树状控制结构

> ID：15405423
> 
> 赞同：6
> 
> 时间：2013-03-14T09:26:05.200
> 
> 标签：php, javascript, algorithm, code-readability

我必须根据用户输入创建报告。用户回答一个问题，然后根据答案，我以树状结构向左或向右移动，并提出一个新问题。一些节点将有相同的问题，但不同的子节点。我不确定在代码可读性方面最好的方法是什么？

我想避免使用庞大的控制结构，因为它非常难以阅读，如下所示：

```
if() {
    if() {
        if() {
            if() {
                ... 
            }
        }
        else {
            if() {
                ...
            }
        }
    }
    else {
        ...
    }
}
else {
    if() {
        if() {
            if() {
                ...
            }
        }
        else {
            if () {
                ...
            }
        }
    }
} 
```

有没有更好的方法来处理它？这是我的树的样子

![在此处输入图像描述](../Images/8a5aab68b28c800546323573989b8ace.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:59:16.010

如果您使用的是 mysql，那么只需有一个问题表和一个答案表，如下所示：

问题表：

```
+----------+-----------+
| id       | question  |
+----------+-----------+
| 1        | Question 1|
+----------+-----------+
| 2        | Question 2|
+----------+-----------+
| 3        | Question 3|
+----------+-----------+ 
```

答案表：

```
+----------+-----------+-----------+---------------+
| id       | answer    | question  | next_question |
+----------+-----------+-----------+---------------+
| 1        | Answer 1  | 1         | 2             |
+----------+-----------+-----------+---------------+ 
| 2        | Answer 2  | 1         | 3             | 
+----------+-----------+-----------+---------------+ 
```

如果用户在问题 1 上并选择了第一个答案，他们会转到问题 2。如果他们选择第二个答案，他们会转到问题 3。

因此，在您的代码中，只需在每个答案后使用 id 查询数据库：

```
SELECT next_question FROM answers WHERE id = ?; // Change '?' depending on answer to get next question 
```

然后像这样得到下一个答案：

```
SELECT answer FROM answers WHERE question = ?; // Change '?' depending on previous value retrieved 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:57:46.110

将树存储为数据，然后您的代码可以非常小。如果我们稍微修改@jam6549 给出的答案，我们可以想出如下内容：

```
var answer = [ {t: "Does it have fur?", y: 1,  n: 2},
               {t: "Is it a kitten?",   y: 3,  n: 4},
               {t: "Is it a goldfish?", y: 5,  n: 4},
               {t: "Found a kitten",    y: -1, n: -1},
               {t: "I'm stumped",       y: -1, n: -1},
               {t: "Found a goldfish",  y: -1, n: -1} ];
var state = 0;

while ( answer[state].y >= 0 ) {
    var choice = confirm(answer[state].t);
    state = choice? answer[state].y: answer[state].n;
}
alert(answer[state].t); 
```

这仅支持简单的 y/n 答案，因此我可以使用确认，您将希望使用一个数组，其中每个可能的答案都有一个条目。

你说有些问题是重复的，所以我很想为每个独特的问题文本设置一个数组。然后您的答案数组将索引存储到问题数组中以保存重复文本。

# wireshark - SharpPCap 丢失数据包

> ID：15405427
> 
> 赞同：1
> 
> 时间：2013-03-14T09:26:14.287
> 
> 标签：wireshark, missing-data, sharppcap

我正在使用 SharpPCap 通过以太网收集 IEC61850-9-2LE 采样值。IEC61850-9-2LE 采样值由多个流组成，每个流每秒发送 4000 个数据包，其中平均数据包大小为 125 字节。

使用 SharpPCap 我正在尝试收集其中的 3 个流（每秒 3x4000 个数据包 - 每个 125 字节）。

在下面的代码中，我设置了网络接口卡。

```
if (nicToUse != null)
         {
            try
            {
               nicToUse.OnPacketArrival -= OnPackectArrivalLive;
               nicToUse.OnPacketArrival += OnPackectArrivalLive;
               try
               {
                  if (nicToUse.Started)
                     nicToUse.StopCapture();
                  if (nicToUse.Opened)
                     nicToUse.Close();
               }
               catch (Exception)
               {
                  //no handling, just do it.
               }

               nicToUse.Open(OpenFlags.Promiscuous|OpenFlags.MaxResponsiveness,10);

               var kernelBufferAssigned = false;
               uint kernelBufferSize = 200;

               while (!kernelBufferAssigned)
               {
                  try
                  {
                     nicToUse.KernelBufferSize = kernelBufferSize * 1024 * 1024;
                     kernelBufferAssigned = true;
                  }
                  catch (Exception)
                  {
                     kernelBufferSize--;
                  }

               }

               nicToUse.Filter = "(ether[0:4] = 0x010CCD04)";
               watchdog.Enabled = true;
               counter = 0;
               nicToUse.StartCapture();
            }
            catch (Exception ex)
            {
               throw new Exception(Resources.SharpPCapPacketsProducer_Start_Error_while_starting_online_capture_, ex);
            }
         } 
```

这是 OnPacketArrival 事件处理程序：

```
private void OnPackectArrivalLive(object sender, CaptureEventArgs e)
      {
         try
         {
            counter++;
            circularBuffer[circularBufferIndex] = e.Packet;
            circularBufferIndex++;

            if (circularBufferIndex > circularBufferSize - 1)
               circularBufferIndex = 0;

         }
         catch (Exception)
         {

         }
      } 
```

当捕获结束时（用户停止它），捕获的数据包被解码，因为它们拥有一个顺序计数器，我发现一些样本丢失了。

将相同的源连接到另一台运行 Wireshark 的 PC，这些示例不会丢失。

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:21:17.067

您使用的是什么版本的 SharpPcap？由于 3.x 和 4.x 系列的开销减少，性能有了一些相当大的改进。

您的示例似乎将循环缓冲区包裹在尾部。循环缓冲区是什么类型的？您如何确定在缓冲区填满之前正在处理数据包？

您是否看过这个来自 SharpPcap 源代码分发的示例，它展示了一种用于进行后台数据包处理的技术？

[QueueingPacketsForBackgroundProcessing/Main.cs](http://sourceforge.net/p/sharppcap/code/ci/b5a1d3c9ad4fc64b97ad30f31fa1318f04e2536a/tree/Examples/QueuingPacketsForBackgroundProcessing/Main.cs#l190)

# php - PHP - 需要将字符串公式计算为整数值

> ID：15405430
> 
> 赞同：0
> 
> 时间：2013-03-14T09:26:17.183
> 
> 标签：php, string, function

我需要在 PHP 中将字符串等公式转换为其计算值。

例如：

```
$str = "(20000+(2000*(40/100)))*(10/100)";
$calculated_value = ????; // Calculated value of the above string "$str". 
```

我需要计算字符串“$str”的值并将其存储在单独的字符串中。请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:28:35.950

看看这个：[http ://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html](http://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html)

并[在php中处理数学方程](https://stackoverflow.com/questions/4019418/process-mathematical-equations-in-php)

# jquery - jQuery 自动完成小部件在建议下拉列表中显示先前的结果

> ID：15405433
> 
> 赞同：0
> 
> 时间：2013-03-14T09:26:27.427
> 
> 标签：jquery, jquery-autocomplete

我从“admin/ajax.php”文件中得到了正确的 JSON 结果。示例：首先我输入 1 并获得许多记录，但它没有显示在建议下拉列表中。但是当我输入 9 时，这意味着在文本框 19 中，它会在下拉列表中显示我上面的记录，而不是 19 的结果。

```
<input type="text" id="invoice_id1" size="20" name="invoice_no" value="" 
    class="ui-widget" onkeyup="find_suggestion(invoice_id1,memberid,this.value);" />

<script>
    function find_suggestion(div_id,memberid,invoice){
        $.post("admin/ajax.php?action=invoice_suggestions", 
            {div_id: div_id,memberid:memberid,invoice:invoice},
            function(data){
                if(data){
                    var tags = data
                    $( "#"+div_id).autocomplete({source: tags});
                }

            }
            , "json"
        );
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:14:59.113

一种更传统的方法是使用函数作为执行 ajax 调用的源。我会`onkeyup`完全移除它，然后将它附加在准备好的或负载上。

我不确定您为什么要经过 the`div_id`或从哪里来`memberid`。我也不清楚您为什么要发布而不是获取。如果您提供更多详细信息，我可以进一步提供帮助。

```
$("#invoice_id1").autocomplete({
    source: function (request, response) {
        $.post({
            url:"admin/ajax.php?action=invoice_suggestions",
            dataType: "json",
            data: {div_id: '#invoice_id1',
                   memberid:memberid,
                   invoice:this.value
            },
            success: function(data) { 
                     response( return data; ) 
            }
     }),
     minLength: 1
}); 
```

# iphone - 在 iOS 模拟器中按下主页按钮时不会调用 applicationDidEnterBackground 和 applicationWillEnterForeground 方法

> ID：15405442
> 
> 赞同：11
> 
> 时间：2013-03-14T09:26:56.527
> 
> 标签：iphone, ios5, nstimer, nsthread, uiapplicationdelegate

我需要在后台和前台完成一项长时间运行的任务。这会更新核心数据。因此，为了保持 UI 响应，我创建了另一个线程，在其中使用不同的 managedObjectContext(MOC)。因此，在后台和前台都设置了一个计时器，并在状态更改时适当地停用。在任务开始之前和任务完成之后，当我按下主页按钮时，它会正确调用两个委托方法，但是当我按下主页按钮屏幕更改和 UI 挂起（变为空白）时任务处于活动状态但两个委托方法不是正确调用并且应用程序不会终止。我找不到发生这种情况的原因。如果有人可以提供帮助，那将很有帮助。

我将附上所需的代码：

```
-(void) startTimerThread
{
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        // Add code here to do background processing
        NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
        [context setPersistentStoreCoordinator:[(AppDelegate *)[[UIApplication sharedApplication] delegate] persistentStoreCoordinator]];
        self.managedObjectContext = context;
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(mergeChanges:)
                                                     name:NSManagedObjectContextDidSaveNotification
                                                   object:context];
        NSLog(@"managedObjContext : %@\n",self.managedObjectContext);
        [self getDataFromFile];

        dispatch_async( dispatch_get_main_queue(), ^{
            // Add code here to update the UI/send notifications based on the
            // results of the background processing

            [[NSNotificationCenter defaultCenter] postNotificationName:@"ReloadAppDelegateTable" object:nil];
            [context release];
            [[NSNotificationCenter defaultCenter] removeObserver:self 
                                                            name:NSManagedObjectContextDidSaveNotification
                                                          object:context];
        });
    });
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"Background\n");
    [self.notificationTimer invalidate];
    self.notificationTimer = nil;
    UIApplication  *app = [UIApplication sharedApplication];
    self.bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask]; 
        bgTask = UIBackgroundTaskInvalid;
    }];

    //start location update timer and background timer 
    self.timer = [NSTimer scheduledTimerWithTimeInterval:180 target:self
                                                selector:@selector(startLocationServices) userInfo:nil repeats:YES];
    self.locationManager.delegate = self; 
    [self.locationManager startUpdatingLocation]; 

    self.logDownloader.managedObjectContext = self.managedObjectContext;
    NSLog(@"managedObjContext : %@\n",self.logDownloader.managedObjectContext);
    self.backgroundTimer = [NSTimer scheduledTimerWithTimeInterval:90 target:self.logDownloader selector:@selector(getDataFromFile) userInfo:nil repeats:YES];
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"Foreground\n");
    //invalidate background timer and location update timer
    [self.timer invalidate];
    [self.backgroundTimer invalidate];
    self.timer = nil;
    self.notificationTimer = nil;

    self.logDownloader.managedObjectContext = self.managedObjectContext;
    NSLog(@"managedObjContext : %@\n",self.logDownloader.managedObjectContext);
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ReloadAppDelegateTable" object:nil];

    self.notificationTimer = [NSTimer scheduledTimerWithTimeInterval:180 target:self.logDownloader selector:@selector(startTimerThread) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2020-04-22T17:47:35.677

在 iOS13+ 上，如果您实现 UIWindowSceneDelegate，它会`func sceneDidEnterBackground(_ scene: UIScene)`改为调用 .

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-12T14:47:13.803

[`applicationDidEnterBackground:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW20)和永远不会被调用的原因[`applicationDidEnterForeground:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW21)是因为这些方法与[`Application does not run in background`](https://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)这个选项一起使用可以在你的`***-info.plist`. 如果此选项设置为，那么`YES`您的应用程序将永远不会调用这些方法，因为当您按下主页按钮时，如果您使用已将选项设置`YES`为正在运行的应用程序实例的应用程序，这些方法将被终止，因此每次您按下主页按钮时然后选择正在创建新实例的应用程序图标，因此它正在使用[`applicationWillTerminate:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW28).

上面所说的方法`Kirti mali`也将是不正确的方法，用于想要你想要的，原因是[`applicationDidBecomeActive:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW10)当[`applicationWillResignActive:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW9)你接听电话时会使用它。正在运行的实例不会被终止，也不会被发送到后台。该实例将暂停，直到用户完成该调用，然后它将再次变为活动状态。

因此，解决方案是，如果您希望应用程序在后台运行，则将选项“ `Application does not run in background`”更改`***-info.plist`为`NO`公正[`applicationDidBecomeActive:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW10)，并且[`applicationWillResignActive:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW9)是使用这些方法的错误方式。

请参阅苹果文档[`UIApplicationDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)以更好地了解这些方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-10T09:01:10.303

由于您的应用程序在后台运行，因此永远不会调用这些方法，但是您可以使用[willEnterForegroundNotification](https://developer.apple.com/documentation/uikit/uiapplication/1622944-willenterforegroundnotification)和[didEnterBackgroundNotification](https://developer.apple.com/documentation/uikit/uiapplication/1623071-didenterbackgroundnotification)来做您想做的事情。

您可以在 ApplicationDelegate 的 didFinishLaunchingWithOptions 方法中编写以下代码

```
 NotificationCenter.default.addObserver(forName:UIApplication.willEnterForegroundNotification, object: nil, queue: nil) { (_) in
        // Your Code here
}

NotificationCenter.default.addObserver(forName:UIApplication.didEnterBackgroundNotification, object: nil, queue: nil) { (_) in
       // Your Code here        
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-14T09:36:30.473

按下主页按钮时调用此方法

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

并且在按下图标按钮时调用此方法

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

# php - 参考错误数组未定义

> ID：15405445
> 
> 赞同：-5
> 
> 时间：2013-03-14T09:27:04.100
> 
> 标签：php, javascript, mysql, html

我尝试使用以下代码从数据库中检索值并使用 php 数组将它们存储在 javascript 数组中。我尝试使用以下代码，但它返回给我一个未定义的引用错误数组。代码如下。

```
<?php
$con = mysql_connect("localhost","root","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("cerebra", $con);
$sql="select name from details order by download desc limit 20";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
$query=mysql_query($sql,$con);
$names=array();
$index=0;
while($row=mysql_fetch_array($query)){
    $names[$index]=$row[0];
    $index++;
}
?>
<script>
var comp=new array();
<?php
 $i=0;
 foreach($names as $a){
        $i++;
        echo "comp[$i]='".$a."';\n";

        }
?>
for(i=0;i<comp.length;i++)
            alert(comp[i]);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:30:10.240

它`var comp = new Array()`不是`array()`。无论如何跳过它并`var comp = []`立即使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:30:43.653

我认为你的做法是错误的。这是一个更好的方法：

```
<?php
  $phpArray = array("foo", "bar", "baz");
  //....
?>

<script type="text/javascript">
var jsArray = <? echo json_encode($phpArray); ?>;
</script> 
```

取自这里：[如何使用从 php 到 javascript 的数组值？](https://stackoverflow.com/questions/2180133/how-to-use-an-array-value-from-php-to-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:31:12.997

首先，为什么要运行两次查询？

```
...

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
$query=mysql_query($sql,$con);

... 
```

其次在 Javascript 中调用数组对象`Array`，而不是`array`. 所以尝试

```
var comp = new Array(); 
```

**更新：**

> 但我得到的第一个值是未定义的。怎么会？– 用户2129868

因为您`$i`在获得价值之前会增加。`$i`也是如此，`1`而不是`0`在您的 Javascript 的第一次迭代中。

所以改变

```
<script>
var comp=new array();
<?php
 $i=0;
 foreach($names as $a){
        $i++;
        echo "comp[$i]='".$a."';\n";

        }
?>
for(i=0;i<comp.length;i++)
            alert(comp[i]);

</script> 
```

到

```
<script>
var comp=new array();
<?php
 $i=0;
 foreach($names as $a){
        echo "comp[".$i++."]='".$a."';\n";
        }
?>
for(i=0;i<comp.length;i++)
            alert(comp[i]);

</script> 
```

否则，当您尝试使用

```
for(i=0;i<comp.length;i++)
            alert(comp[i]); 
```

`0`将是未定义的，因为`1`它是您添加的第一个索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T09:31:43.110

```
new array(); 
```

应该

```
new Array(); 
```

在你的 JavaScript 中。

编辑：您还应该停止使用 mysql_* 函数。

# c++ - 禁用 sql loader 的 C++ 输出消息

> ID：15405448
> 
> 赞同：0
> 
> 时间：2013-03-14T09:27:05.370
> 
> 标签：c++, linux, g++, sql-loader

我有一个 C++ 代码，我在其中使用 .sql 加载器`system()`。当 SQL Loader 在运行代码时执行时，我收到了下面提到的要禁用的消息：

```
SQL*Loader: Release 10.2.0.1.0 - Production on Thu Mar 14 14:11:25 2013

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

Commit point reached - logical record count 20
Commit point reached - logical record count 40
Commit point reached - logical record count 60
Commit point reached - logical record count 80 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:32:27.777

请记住，该`system`函数使用 shell 来执行命令。所以你可以使用正常的shell重定向：

```
system("/some/program > /dev/null"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:34:09.903

您可以使用该`silent=ALL`选项来抑制这些消息：

```
system("/orahomepath/bin/sqlldr silent=ALL ...") 
```

另请参阅[SQL*Loader 命令行参考](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_params.htm#g1014550)：

> 在 SQL*Loader 执行时，您还会在屏幕上看到反馈消息，例如：
> 
> 已达到提交点 - 逻辑记录数 20
> 
> 您可以通过使用一个或多个值指定 SILENT 来抑制这些消息：
> 
> *   ...
> *   ALL - 实现所有抑制值：HEADER、FEEDBACK、ERRORS、DISCARDS 和 PARTITIONS。

Depending on the sql*ldr implementation, you **might** still end up with one or the other output - if you need complete silence, see the answer from @Joachim below.

# javascript - 优化时Jquery组合框的奇怪行为

> ID：15405451
> 
> 赞同：2
> 
> 时间：2013-03-14T09:27:25.253
> 
> 标签：javascript, jquery, html, performance

我正在尝试优化[组合框](http://jqueryui.com/autocomplete/#combobox)代码，因为我在项目中存在一些延迟，因为我连续创建了四个输入框。在这个[**jFiddle**](http://jsfiddle.net/mHQcW/5/)`appendChild()`中使用而不是我有一些改进。但是当我单击每个输入字段右侧的下拉箭头时，我会出现奇怪的行为。`insertAfter()`[](http://jsfiddle.net/mHQcW/5/)

 ****问：**为什么会这样？或者到底发生了什么？有人可以指出如何解决这个问题吗？

更新#1：我的解释和问题暗示我已经尝试过**原始代码**并且速度很**慢**我想**优化**它！

更新#2：在使用 Chrome 开发人员工具进行简短分析后，我想我**可能**已经解决了这个问题。虽然最初的问题仍然存在。

我做了三个测试：

1.  使用`insertAfter()`. [图片#1](http://i.stack.imgur.com/nmlta.png) [图片#2](http://i.stack.imgur.com/tvhJ3.png)
2.  在函数中使用`insertAfter()`和删除。[图片#3](http://i.stack.imgur.com/kXyPf.png)`$.Widget.prototype.destroy.call(this);``_destroy()`
3.  在函数中使用`appendChild()`和删除。[图片#4](http://i.stack.imgur.com/VT8AG.png)`$.Widget.prototype.destroy.call(this);``_destroy()`

测试评论：

1.  似乎正在发生一些事件触发。由于函数`$.Widget.prototype.destroy.call(this);`调用`_destroy()`，我有多个`$.widget._destroy()`调用导致使用率约为 25%。参见[图片#2](http://i.stack.imgur.com/tvhJ3.png)。组合框的行为除外。
2.  似乎`$.Widget.prototype.destroy.call(this);`从代码中删除会删除此事件触发。我不再看到延迟问题。行为例外。
3.  似乎`$.Widget.prototype.destroy.call(this);`从代码中删除会删除此事件触发。我不再看到延迟问题。行为不例外。与上述解释中所述的行为相同。**

# java - 异常是如何传播的？

> ID：15405458
> 
> 赞同：0
> 
> 时间：2013-03-14T09:28:09.850
> 
> 标签：java, exception-handling

我想在线程级别了解 java 中的异常传播。

我的理解是，当代码抛出异常并且该方法未处理该异常时，它将存储在该线程的堆栈中，如果未处理异常，jvm 只会不断从堆栈中弹出方法调用。此方法将适用于 Checked 和 unchecked 异常。如果我错了，请纠正我。

通过上述解释，我无法理解静态块中的异常是如何处理的，因为它们将在类加载期间被调用。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:05:44.793

*Java 严格而精确地定义了一个类被初始化*的时刻（与*加载*相反，顺便说一句！）。它总是由一些 Java 代码触发，因此触发类 init 的特定 Java 代码行将收到异常。没有魔法，没有特殊情况，它总是在运行时发生，就像任何其他异常一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:40:34.740

静态块中的代码也在线程中执行（即使它确实在*类初始化时*调用），因此相同的策略适用于从静态块抛出的未经检查的异常。

请注意，如果您的代码从静态块中抛出已检查异常，您将收到编译错误。

# python - 为什么我的 python 和 Objective-c 代码得到不同的 hmac-sha1 结果？

> ID：15405460
> 
> 赞同：3
> 
> 时间：2013-03-14T09:28:12.003
> 
> 标签：python, objective-c, base64, sha1, hmac

我正在编写一个需要签名的客户端/服务器项目。我`base64(hmac-sha1(key, data))`用来生成签名。但是我在python代码和objective-c代码之间得到了不同的签名：

```
get_signature('KEY', 'TEXT')   //python get 'dAOnR2oXWP9xa4vUBdDvVXTpzQo='
[self hmacsha1:@"KEY" @"TEXT"] //obj-c  get '7FH0NG0Ou4nb5luKUyjfrdWunos=' 
```

不仅 base64 值不同，hmac-sha1 摘要值也不同。我试着和我的朋友一起解决了几个小时，仍然不明白。我的代码问题出在哪里？

我的python代码：

```
import hmac
import hashlib
import base64
def get_signature(key, msg):
    return base64.b64encode(hmac.new(key, msg, hashlib.sha1).digest()) 
```

我朋友的 Objective-C 代码（复制自[HMAC-SHA1 的 Objective-C 示例代码](https://stackoverflow.com/questions/756492/objective-c-sample-code-for-hmac-sha1)）：

```
(NSString *)hmac_sha1:(NSString *)key text:(NSString *)text{

    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [text cStringUsingEncoding:NSASCIIStringEncoding];

    unsigned char cHMAC[CC_SHA1_DIGEST_LENGTH];
    CCHmac(kCCHmacAlgSHA1, cKey, strlen(cKey), cData, strlen(cData), cHMAC);

    NSData *HMAC = [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];
    NSString *hash = [GTMBase64 stringByEncodingData:HMAC];
    return hash;
} 
```

已解决：感谢以下所有人。但我不必告诉你真正的原因是我在我的 python IDE 中输入了“TE **S T”，而在这篇文章中输入了“TE** **X** T”：P

为了不浪费您的时间，我根据您的回答做了一些测试并得到了更好的解决方案：

```
print get_signature('KEY', 'TEXT')                        
# 7FH0NG0Ou4nb5luKUyjfrdWunos=

print get_signature(bytearray('KEY'), bytearray('TEXT'))  
# 7FH0NG0Ou4nb5luKUyjfrdWunos=

print get_signature('KEY', u'你好'.encode('utf-8'))  # best solution, i think!
# PxEm7Oibj7ijZ55ko7V3isSkD1Q=

print get_signature('KEY', bytearray(u'你好'))           
# TypeError: unicode argument without an encoding

print get_signature('KEY', u'你好')                      
# UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)

print get_signature(u'KEY', 'TEXT')                      
# TypeError: character mapping must return integer, None or unicode

print get_signature(b'KEY', b'TEXT')                       
# 7FH0NG0Ou4nb5luKUyjfrdWunos= 
```

结论：

1.  要签名的消息应编码为双方的 utf-8 字符串。
2.  （感谢[DJV](https://stackoverflow.com/users/1974792/djv)）在 python 3 中，字符串都是 unicode，所以它们应该与 'b' 或 bytearray 一起使用（感谢[Burhan Khalid](https://stackoverflow.com/users/790387/burhan-khalid)），或者编码为 utf-8 字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:48:34.543

你的朋友是完全正确的，但你也是（有点）。你的函数在 Python 2 和 Python 3 中都是完全正确的。但是，你的调用在 Python 3 中有点错误。你看，在 Python 3 中，[字符串](http://docs.python.org/3.0/howto/unicode.html#the-string-type)是 unicode，所以为了传递一个 ASCII 字符串（作为你的 Objective C 朋友和你在 Python 2 中所做的一样），你需要调用你的函数：

```
get_signature(b'KEY', b'TEXT') 
```

为了指定这些字符串是[字节](http://docs.python.org/3.0/library/functions.html#bytes)，也就是 ASCII 字符串。

**编辑：**正如[Burhan Khalid](https://stackoverflow.com/users/790387/burhan-khalid)所指出的，在 Python 3 中执行此操作的灵活方法是像这样调用您的函数：

```
get_signature(key.encode('ascii'), test.encode('ascii')) 
```

或将其定义为：

```
def get_signature(key, msg):
    if(isinstance(key, str)):
        key = key.encode('ascii')
    if(isinstance(msg, str)):
        msg = msg.encode('ascii')
    return base64.b64encode(hmac.new(key, msg, hashlib.sha1).digest()) 
```

# typo3 - Typo3 索引搜索 Local_Lang 路径

> ID：15405465
> 
> 赞同：1
> 
> 时间：2013-03-14T09:28:32.437
> 
> 标签：typo3, typoscript

我想知道需要什么 TS 代码来设置我自己的索引搜索 local_lang 的路径。我在 pi1/local_lang 中更改了我需要的内容，但我想将其设置为我自己的，这样我就可以为未来的项目进行编辑（在这种情况下是克罗地亚语）。

就像是：

```
plugin.tx_indexedsearch.templateFile = fileadmin/search_temp.html 
```

但是对于Local_lang 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:40:53.720

使用此行，您可以覆盖单个翻译：

```
 plugin.tx_myPlugin_pi1._LOCAL_LANG.de.key = value; 
    plugin.tx_myPlugin_pi1._LOCAL_LANG.en.key = value; 
```

我认为并非所有扩展都支持完整的自己的 localLang 文件，但不是 100% 肯定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:13:33.530

您可以将您的翻译添加到[官方翻译服务器](http://translation.typo3.org/)。因此，您的翻译将通过 TYPO3 后端的翻译模块提供。

indexed_search 的 croation 翻译在此处管理：[http ://translation.typo3.org/hr/TYPO3.TYPO3.core.indexed_search/](http://translation.typo3.org/hr/TYPO3.TYPO3.core.indexed_search/)

实现了typo3.org 的单点登录。[因此，您首先需要在typo3.org](http://typo3.org/my-account/sign-up/)上注册一个帐户。

# php - 从数据库创建 excel 并作为电子邮件附件发送

> ID：15405470
> 
> 赞同：2
> 
> 时间：2013-03-14T09:28:38.857
> 
> 标签：php

这是我从数据库表中获取数据的代码

```
$sql = "select * from tbl_input_values where 1";
$result = mysql_query($sql);
$resultRows = mysql_num_rows($result); 
```

以下是我用来将文件下载为 excel 格式的标题：

```
header("Content-Type: application/vnd.ms-excel");   
header("Content-Disposition: attachment; filename=test.xls");

header("Pragma: no-cache");
header("Expires: 0"); 
```

我获取记录的代码如下：

```
if($resultRows>0){
    $sep = "\t"; //tabbed character
    for ($i = 0; $i < mysql_num_fields($result); $i++) {
        echo mysql_field_name($result,$i) . "\t";
    }
    print("\n");
    while($row = mysql_fetch_row($result)){
        $schema_insert = "";
        for($j=0; $j<mysql_num_fields($result);$j++){
            if(!isset($row[$j]))
                $schema_insert .= "NULL".$sep;
            elseif ($row[$j] != "")
                $schema_insert .= "$row[$j]".$sep;
            else
                $schema_insert .= "".$sep;
        }
        $schema_insert = str_replace($sep."$", "", $schema_insert);
        $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
        $schema_insert .= "\t"; 
        print(trim(str_replace(',', " ", $schema_insert)));
        print "\n";
    }
} 
```

**代码工作正常。**

所以现在我必须通过电子邮件发送这个附件而不是下载它。表示当用户想要创建 excel 文件时，excel 将通过电子邮件发送到给定的电子邮件 ID。

那么使用电子邮件功能的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:43:29.463

可能它可以帮助你....

```
if($resultRows>0){
$sep = "\t"; //tabbed character
for ($i = 0; $i < mysql_num_fields($result); $i++) {
    echo mysql_field_name($result,$i) . "\t";
}
print("\n");
while($row = mysql_fetch_row($result)){
    $schema_insert = "";
    for($j=0; $j<mysql_num_fields($result);$j++){
        if(!isset($row[$j]))
            $schema_insert .= "NULL".$sep;
        elseif ($row[$j] != "")
            $schema_insert .= "$row[$j]".$sep;
        else
            $schema_insert .= "".$sep;
    }
    $schema_insert = str_replace($sep."$", "", $schema_insert);
    $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
    $schema_insert .= "\t"; 
    print(trim(str_replace(',', " ", $schema_insert)));
    print "\n";
}

 file_put_contents('$path_to_excelfile', $schema_insert);
  }

$to = 'youraddress@example.com';

     $subject = 'Test email with attachment';

     $random_hash = md5(date('r', time()));

     $headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com";

     $headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\"";

     $attachment = chunk_split(base64_encode(file_get_contents('path to file')));

   mail( $to, $subject, $message, $headers ); 
```

参考[http://webcheatsheet.com/PHP/send_email_text_html_attachment.php](http://webcheatsheet.com/PHP/send_email_text_html_attachment.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T11:11:30.547

```
**Code to create excel in php:**
$dtime=date('Y-m-d H-i-s');
$dtimeFile=date('Y-m-d-H-i-s');
$headerTab ="Col1 \t Col2\t Col3\n";
$rowRecords='';
$rowRecords .=preg_replace("/\r|\n|\t/"," ",$Col1)."\t".preg_replace("/\r|\n|\t/", " ",$Col2)."\t".preg_replace("/\r|\n|\t/", " ",Col3). "\t\n";
date_default_timezone_set('America/Los_Angeles');
$filename="Your File Name-".$dtimeFile.".xls";
$path='/pathOfFile/';
$csv_handler = fopen ($path.$filename,'w');
fwrite ($csv_handler,$headerTab);
fwrite ($csv_handler,$rowRecords);
fclose ($csv_handler);

**Code to send html email with attached excel in php:**
$file = $path.$filename;
$file_size = filesize($file);
$handle = fopen($file, "r");
$content = fread($handle, $file_size);
fclose($handle);
$content = chunk_split(base64_encode($content));
$uid = md5(uniqid(time()));
$headers = "From: from@gmail.com"."\r\n";
$headers.= "Bcc: bcc@gmail.com"."\r\n";
$headers.= "MIME-Version: 1.0\r\n";
$headers.= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$headers .= "This is a multi-part message in MIME format.\r\n";
$headers .= "--".$uid."\r\n";
$headers .= "Content-type:text/html; charset=iso-8859-1\r\n";
$headers .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$headers .= $msg."\r\n\r\n";
$headers .= "--".$uid."\r\n";
$headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n";
$headers .= "Content-Transfer-Encoding: base64\r\n";
$headers .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
$headers .= $content."\r\n\r\n";
$headers .= "--".$uid."--"; 

$date=date("Y-m-d");
if(mail($to,"Mail heading--".$date,$msg,$headers)){
    echo "Mailed successfully";
}
else
{
    echo "Mailed couldn't be sent"; 
} 
```

# extjs - 带有 LabelAlign 顶部（中心）的 ExtJS 文本字段

> ID：15405473
> 
> 赞同：4
> 
> 时间：2013-03-14T09:28:47.057
> 
> 标签：extjs, extjs4, textfield, extjs4.1

是否有任何配置选项可以将 lavel 放在顶部，并为文本字段居中对齐。

```
 {
    xtype:'numberfield',
    labelAlign:'top',
    labelSeparator:'',
    fieldLabel: 'Title',
    flex:1 
  } 
```

它在顶部的标签上工作正常，但与左侧对齐。我想与顶部居中对齐。

提前感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:42:20.547

只需使用以下命令向标签添加一个类`labelClsExtra`：

> 要添加到标签元素的一个或多个附加 CSS 类的可选字符串。默认为空。

例如：

```
labelClsExtra: 'your-class' 
```

在您的样式表中：

```
.your-class {
    text-align: center
} 
```

工作示例：http: [//jsfiddle.net/qazN3/](http://jsfiddle.net/qazN3/)

# sparql - Mac 终端上的 Jena Fuseki 服务器

> ID：15405474
> 
> 赞同：4
> 
> 时间：2013-03-14T09:28:49.687
> 
> 标签：sparql, jena, fuseki

我是 Jena Fuseki 服务器的新手，所以如果我在做一些愚蠢的事情或在错误的地方发帖，请说出来！

在链接[http://jena.apache.org/documentation/serving_data/index.html](http://jena.apache.org/documentation/serving_data/index.html)之后，在我的 Mac 上下载并解压缩后，我尝试使用命令行启动服务器。

即使我在同一个目录中，我仍然指定了整个路径，正如我在一些帖子中所读到的，这是必要的：

```
$ /Users/H_Miri/Desktop/jena-fuseki-0.2.6/fuseki-server --update --mem /ds 
```

但是我在终端上得到以下信息，然后光标就卡在那里了：

```
10:11:23 INFO  Server               :: Dataset: in-memory
10:11:23 INFO  Config               :: Home Directory: /Users/hosseinmiri/Desktop/jena-fuseki-0.2.6
10:11:24 INFO  Server               :: Dataset path = /ds
10:11:24 INFO  Server               :: Fuseki 0.2.6 2013-02-20T12:04:26+0000
10:11:24 INFO  Server               :: Started 2013/03/14 10:11:24 CET on port 3030 
```

我究竟做错了什么？

谢谢，

H

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:11:53.913

什么都没有。它正在运行！尝试访问`http://localhost:3030/`。

如果你想让 fuseki 在后台运行，你可以在行尾添加一个“&”：

```
$ /Users/H_Miri/Desktop/jena-fuseki-0.2.6/fuseki-server --update --mem /ds & 
```

但就我个人而言，我只是打开另一个终端选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T14:00:49.640

命令“fuseki-server --update --mem /ds”在 Mac 上对我不起作用

Fuseki 在此终端命令后成功启动：

“FUSEKI_HOME=桌面/apache-jena-fuseki/桌面/apache-jena-fuseki/fuseki-server --mem /ds”

# java - Shell 将参数传递给使用参数运行的 java

> ID：15405476
> 
> 赞同：1
> 
> 时间：2013-03-14T09:29:08.907
> 
> 标签：java, linux, shell

我正在从这样的 shell 脚本启动一个 java 程序：

```
JAVA_OPTS=
CLASSPATH=
JMX_OPTS=
java $JAVA_OPTS -cp $CLASSPATH $JMX_OPTS 
```

并且启动的程序期望用户输入另一个参数。不能在启动程序的参数列表中指定它。所以我想知道有没有办法将此参数传递给脚本中的java程序？我没有这个 java 程序的源代码，所以我不能添加参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:32:41.623

```
public static void main(String[] args) {
    for (int i = 0; i < args.length; i++)
        System.out.println(args[i]);
} 
```

运行你的程序：
java Name arg1 arg2 arg3 arg4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:37:38.300

我假设您想将参数传递给 shell 脚本。并在脚本中，将其传递给 Java 程序。$@ 可能可以实现这一点。

```
java $JAVA_OPTS -cp $CLASSPATH $JMX_OPTS classname $@ 
```

参考：[将参数传递给 shell 脚本](http://osr600doc.sco.com/en/SHL_automate/_Passing_to_shell_script.html)

# c - 如何获取指定架构（x86、pic控制器）中的芯片名称和可寻址内存？

> ID：15405481
> 
> 赞同：0
> 
> 时间：2013-03-14T09:29:33.923
> 
> 标签：c, memory, assembly, architecture, processor

如何在没有bios的情况下获取指定架构（x86、x64、pic控制器）中的芯片名称和可寻址内存？您是否有特定的寄存器来存储可用内存大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:44:12.893

不确定这有多相关，但它可能有助于为您指明正确的方向。

将 PicBasic 与 PicAxe 单片机（不是 PIC 单片机）一起使用，编程语言中有一个关键字/语句，称为“READSILICON”

此 READSILICON 操作将读取硅的未指定区域并返回一个值，该值又用于/用于识别 MCU。

那么也许在您的开发 IDE 中有类似的功能？

注意：由于这是当时的一项新功能，因此只有较新的 mcu 支持它，显然较旧的 mcu 不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:08:17.533

在 x86 中，可以使用`CPUID`指令检索芯片名称；CPUID 上的[Wikipedia 文章](http://en.wikipedia.org/wiki/CPUID#EAX.3D80000001h%3a_Extended_Processor_Info_and_Feature_Bits)提供了有关如何查询处理器品牌名称字符串的示例代码。

有关 CPUID 的主要参考资料，请参阅[Intel 的 App Note](http://www.intel.com/content/www/us/en/processors/processor-identification-cpuid-instruction-note.html)，品牌字符串标识在撰写本文时是第 7.2 节。

在 GCC 内联汇编中，您可以执行以下操作：

```
unsigned int cpuid = 0x80000000;

__asm__ __volatile__("cpuid\n\t" : "+a" (cpuid));
if (cpuid >= 0x80000004) { // brand name query supported
    union { char brandstr[48]; unsigned int i[12] } i;
    __asm__ ("cpuid\n\t"
        : "=a"(i.i[0]), "=b" (i.i[1]), "=c"(i.i[2]), "=d"(i.i[3])
        : "a"(0x80000002));
    __asm__ ("cpuid\n\t"
        : "=a"(i.i[4]), "=b" (i.i[5]), "=c"(i.i[6]), "=d"(i.i[7])
        : "a"(0x80000003));
    __asm__ ("cpuid\n\t"
        : "=a"(i.i[8]), "=b" (i.i[9]), "=c"(i.i[10]), "=d"(i.i[11])
        : "a"(0x80000004));
    printf ("This CPU brand name is: %48s\n", i.brandstr);
} else {
    printf ("This x86 CPU doesn't support brand name queries\n");
} 
```

*在 x86 机器上确定没有*BIOS 的内存布局/大小几乎是不可能的，因为直接在硬件上执行此操作的方法非常特定于 CPU/芯片组组合，以及供应商的开发指南（BKCD - BIOS 和内核开发人员指南）通常只在公共（不需要 NDA）版本中提供关于此的*部分参考。*记录的方法是查询 ACPI BIOS 以获取此信息。

# html - Http - 使用“升级”标头值

> ID：15405498
> 
> 赞同：0
> 
> 时间：2013-03-14T09:30:28.320
> 
> 标签：html, http, web

我知道 websockets (Html5) 使用升级标头让服务器知道会话将使用相同的端口 (80) 但不同的协议。

是否有任何其他元素（无论是 HTML5 还是其他元素）使用“升级”。我需要在网上找到一些使用“升级”的东西来测试一些行为。

# mysql - 月环比基金回报率（%）

> ID：15405503
> 
> 赞同：0
> 
> 时间：2013-03-14T09:30:39.397
> 
> 标签：mysql, sql, return

我制作的 MySQL 数据库包含以下数据：

```
Date (date) | NAV Decimal(30,10) 
```

每个日期都是月末日期。

过去 3 年的每月基金资产净值如下所示。

```
2012-12-31 |105

2013-01-28 | 100

2013-02-28 | 105 
```

我想使用 NAV 列计算月回报率百分比，并显示 3 年期间每个月的回报率。

请建议我如何进行 MySQL 查询。

预期结果如下：

```
2013-01-31 |-5%

2013-02-28 |5% 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:36:10.790

您不能在 SQL 中循环计算。为此，您必须使用 MySql 存储过程/函数，或者您必须使用 mysql 库 Api 以任何服务器端语言编写代码

您可以在这里了解存储过程：

[在 MySQL 中循环遍历结果集](https://stackoverflow.com/questions/1745165/looping-over-result-sets-in-mysql-resolved-using-cursors)

# javascript - 为什么 "\9" 给出 "9" 而 "\7" 为空？

> ID：15405504
> 
> 赞同：4
> 
> 时间：2013-03-14T09:30:40.177
> 
> 标签：javascript, string, lexical

我已经阅读了字符串文字的词汇语法。我发现两者`"\9"`都`"\7"`被认为是无效的字符串文字。但是为什么`alert("\9")`give `9`while`alert("\7")`是空的（我期望的`\7`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:35:21.187

`alert("\7")`不会给你一个*空*字符串，它会给你一个字符为 7 的字符串。这是因为你正在测试它的浏览器扩展了字符串文字的定义以允许八进制字符转义，如[第 B.1.2 节中所述的规范](http://www.ecma-international.org/ecma-262/5.1/#sec-B.1.2)。

由于`9`不是八进制数字，`\9`因此不会被解释为八进制字符转义序列，因此反斜杠被静默删除。

请注意，在符合要求的实现中，如果您处于严格模式，`alert("\7")`也不会工作，正如您在 Chrome、Firefox 或其他支持严格模式的浏览器中看到的那样：[Live Copy](http://jsbin.com/ugutuz/1) | [资源](http://jsbin.com/ugutuz/1/edit)

```
(function() {
  "use strict";

  alert("\7"); // fails
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:34:19.080

`\7`被解释为八进制字符串并产生一个 ASCII 值为 7 的单个字符。 9 不适合八进制基数，因此它被解释为常规字符。反斜杠被静默删除，因为它没有任何副作用。

另请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Using_special_characters_in_strings](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Using_special_characters_in_strings)：

> `\XXX`由和`XXX`之间 最多三个八进制数字指定的具有 Latin-1 编码的字符。例如，是版权符号的八进制序列。`0``377``\251`

# javascript - 设置高度和宽度在对话框中不起作用

> ID：15405514
> 
> 赞同：0
> 
> 时间：2013-03-14T09:31:01.193
> 
> 标签：javascript, jquery, css

我是 jQuery 新手，我正在尝试使用对话框功能。当我查看 jquery.ui 提供的演示 (animated.html) 时，我试图在对话框中插入一个巨大的图像。

插入以下代码时效果很好，它限制了对话框的大小。

但是，当我从演示中删除样式表（jquery.ui.all.css 和 demos.css）参考时，对话框现在不受限制，并且在对话框中显示整个图像而没有滚动条。（因此父级现在包含滚动条，这是不利的）

样式表中的哪个主题可以设置对话框的大小？

首次：

```
<link rel="stylesheet" href="../../themes/base/jquery.ui.all.css">
<script src="../../jquery-1.9.1.js"></script>
<script src="../../ui/jquery.ui.core.js"></script>
<script src="../../ui/jquery.ui.widget.js"></script>
<script src="../../ui/jquery.ui.mouse.js"></script>
<script src="../../ui/jquery.ui.draggable.js"></script>
<script src="../../ui/jquery.ui.position.js"></script>
<script src="../../ui/jquery.ui.resizable.js"></script>
<script src="../../ui/jquery.ui.button.js"></script>
<script src="../../ui/jquery.ui.dialog.js"></script>
<script src="../../ui/jquery.ui.effect.js"></script>
<script src="../../ui/jquery.ui.effect-blind.js"></script>
<script src="../../ui/jquery.ui.effect-fade.js"></script>
<script src="../../ui/jquery.ui.effect-explode.js"></script>
<link rel="stylesheet" href="../demos.css">

<script>
$(function() {
   $( "#dialog" ).dialog({
    autoOpen: false,
    show: {
  effect: "fade",
  duration: 1000
        },
    hide: {
  effect: "explode",
      duration: 1000
     },
    maxWidth:400,
    maxHeight: 300,
    width: 400,
    height: 300,

});

$( "#opener" ).click(function() {
  $( "#dialog" ).dialog( "open" );
});
});
</script> 
```

第二次：

```
<script src="../../jquery-1.9.1.js"></script>
<script src="../../ui/jquery.ui.core.js"></script>
<script src="../../ui/jquery.ui.widget.js"></script>
<script src="../../ui/jquery.ui.mouse.js"></script>
<script src="../../ui/jquery.ui.draggable.js"></script>
<script src="../../ui/jquery.ui.position.js"></script>
<script src="../../ui/jquery.ui.resizable.js"></script>
<script src="../../ui/jquery.ui.button.js"></script>
<script src="../../ui/jquery.ui.dialog.js"></script>
<script src="../../ui/jquery.ui.effect.js"></script>
<script src="../../ui/jquery.ui.effect-blind.js"></script>
<script src="../../ui/jquery.ui.effect-fade.js"></script>
<script src="../../ui/jquery.ui.effect-explode.js"></script>

<script>
$(function() {
    $( "#dialog" ).dialog({
        autoOpen: false,
        show: {
            effect: "fade",
            duration: 1000
        },
        hide: {
            effect: "explode",
            duration: 1000
        },
              maxWidth:400,
    maxHeight: 300,
    width: 400,
    height: 300,
    overflow: 'auto',
    });

    $( "#opener" ).click(function() {
        $( "#dialog" ).dialog( "open" );
    });
});
</script> 
```

# c# - 未使用 for 循环将对象引用设置为对象错误的实例

> ID：15405515
> 
> 赞同：-2
> 
> 时间：2013-03-14T09:31:05.823
> 
> 标签：c#, .net, object-reference

```
 private void btnAddStudent_Click(object sender, EventArgs e)
    {
        student[counter] = new Student(txtStudentName.Text, txtStudentSurname.Text,     int.Parse(txtExamMark.Text), counter);
        counter++;

    }

    private void btnAverage_Click(object sender, EventArgs e)
    {

        for (int i = counter; i <= counter; i++)
            MessageBox.Show("" + student[i].Average);
    } 
```

我的程序给了我错误：

> 你调用的对象是空的。

我只希望循环运行一次以仅显示最后计算的平均值。如果我这样做：即：更改`int i = counter`为`i = 0`

```
 private void btnAverage_Click(object sender, EventArgs e)
    {

        for (int i = 0; i < counter; i++)
            MessageBox.Show("" + student[i].Average);
    } 
```

然后我的程序可以工作，但它会根据输入的学生数量多次显示消息框，`i`最后一个值是正确的平均值。

我使用了一个名为`Student`来计算平均值的类。然而，这不是问题，因为正在显示正确的平均值。

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:34:27.457

首先，您似乎不需要循环，因为`counter`从`counter`到`counter`。

其次，我怀疑你有一个错误。

如果你尝试这个会发生什么？

```
private void btnAverage_Click(object sender, EventArgs e)
{
    if (counter > 0)
        MessageBox.Show("" + student[counter-1].Average);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:34:28.803

你的问题是`student[counter]`空的，而`student[0]`不是，所以我猜你的数组`counter`没有正确对齐。`student`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T09:34:55.680

尝试

```
if (student.Length > 0)
{
    MessageBox.Show("" + student[student.Length - 1].Average)
} 
```

没有循环 - 这将只显示数组中的最后一个平均值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T09:34:22.807

我相信问题是因为您试图访问没有实例的数组/集合中的项目（为什么会收到错误）。将 counter 设置为 0 有效，因为`student[0]`有一个`Student`.

如果只想获取一项，则不需要循环，可以`student[i]`通过传入数组的索引直接访问，即`0`.

```
MessageBox.Show("" + student[0].Average); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T09:50:22.987

一种不易出错的方法是使用 a`List<T>`而不是数组：

```
List<Student> students = new List<Student>();
private void btnAddStudent_Click(object sender, EventArgs e)
{
    students.Add(Student(txtStudentName.Text, txtStudentSurname.Text,
                 int.Parse(txtExamMark.Text), counter);
    counter++;
}

private void btnAverage_Click(object sender, EventArgs e)
{
    if(students.Any())
    {
        MessageBox.Show("" + students.Last().Average);
    }
} 
```

# c# - 如何检查子窗体是否最小化？

> ID：15405518
> 
> 赞同：0
> 
> 时间：2013-03-14T09:31:26.807
> 
> 标签：c#, winforms, visual-studio-2010

我实现了一个名为*CheckOpened*的方法，用于检查表单是否打开。

```
private bool CheckOpened(string name)
{
    FormCollection fc = Application.OpenForms;

    foreach (Form frm in fc)
    {
        if (frm.Text == name)
        {
            return true;
        }
    }
    return false;
} 
```

**以同样的方式**，我想检查表单是否被最小化。通过该检查，我想在*StatusStrip*中显示最小化状态，在该状态条上将显示最小化表单的名称，当用户单击表单名称时，它将显示。

怎么能做这个检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:34:38.283

使用相同的 thecnique 但查询[WindowState](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.windowstate.aspx)属性：

```
private bool CheckMinimized(string name)
{
    FormCollection fc = Application.OpenForms;

    foreach (Form frm in fc)
    {
        if (frm.Text == name && frm.State == FormWindowState.Minimized)
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:36:33.353

`Form`您可以通过读取`Form.WindowState`返回或`FormWindowState.Normal`的属性来检查 a是否最小化。`FormWindowState.Maximized``FormWindowState.Minimized`

# iphone - 收到内存警告和应用程序崩溃

> ID：15405519
> 
> 赞同：3
> 
> 时间：2013-03-14T09:31:32.820
> 
> 标签：iphone, ios, objective-c, xcode

由于收到内存警告，我的应用程序崩溃。

如果我运行该应用程序几分钟，然后执行任何操作，该应用程序会立即崩溃。

我什至检查了内存泄漏，但没有内存泄漏。此外，该应用程序在模拟器中运行良好。

我注意到的是，每当我收到“收到内存警告”时，就会调用项目中每个文件的“didReceiveMemoryWarning”方法，然后应用程序崩溃。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:36:53.790

好吧，坦率地说，你只是使用了太多的内存。`didReceiveMemoryWarning`被调用，以便您可以尝试自己释放一些内存，这样您就不会使应用程序崩溃（释放未使用的东西，以后可以重新加载）。

在运行应用程序时，模拟器在硬件方面并不准确，所以我不会总是依赖它，这可能就是你在模拟器上没有收到警告的原因。

我真的不能说是什么导致您的应用程序从您提供的信息中使用了这么多内存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:43:25.237

在 ARC 中，创建接收到的内存警告问题的事件（功能）需要在内部。接收到的`@autoreleasepool{}`内存警告问题可能会发生，这会从设备内存过载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:16:40.050

通过仪器检查应用程序->内存分配

它将显示应用程序使用的所有内存，如果有任何泄漏，它将显示。

您是否使用过重的图像？

# excel - 在 Locals 窗口中扩展自定义类节点静默崩溃 excel

> ID：15405527
> 
> 赞同：2
> 
> 时间：2013-03-14T09:31:53.230
> 
> 标签：excel, crash, watch, locals, vba

## 问题：

与此问题类似，但无法找到解决方案我试图弄清楚如何修复此错误：

[在 Locals 或 Watch 窗口中查看对象导致 excel 崩溃](https://stackoverflow.com/questions/13929724/viewing-an-object-in-locals-or-watch-window-causes-excel-to-crash%20%22Viewing%20an%20object%20in%20Locals%20or%20Watch%20window%20causes%20excel%20to%20crash)

自定义类作为 ADO 执行的包装器，允许我们使用单独的类来维护我们的 SQL 代码并在包装器内执行它，以便将 MS Access ADO 执行的错误处理保持在一个整洁的位置。

这对于日志记录和调试目的非常有用，直到几天前我注意到尝试在 VBA 编辑器中的 Locals 或 Watch 窗口中扩展自定义类的节点会导致 Excel 在挂起 5 秒后静默崩溃并使用文件重新启动恢复窗口。

不幸的是，代码是公司敏感的，所以我可能无法粘贴任何内容，但如果有任何关于可能导致它的想法的想法，我可能能够找到源并报告回来。

有没有其他人遇到过这个问题？

**更新**：新症状 - 在调试和比较旧版本和新版本之间的文本期间，我发现 Locals 窗口在挂起停止之后和崩溃发生之前为空（清除所有对象）。

## 我尝试过的修复：

*   重建 VBA 项目并修复所有已知的编译错误（以消除简单的 vba 错误）
*   导出所有类和模块 - 重新导入新工作簿（以消除工作簿文件损坏）
*   将类和模块文本复制到记事本并清除所有格式 - 粘贴到新工作簿中（试图删除损坏的类数据）
*   禁用对其他自定义类的任何引用以缩小到单个类。

感谢您的帮助，并希望我的问题可以为其他人提供一些启示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:58:36.037

你可以试试下面的东西。我希望他们中的任何一个都为你工作。如果它仍然不起作用，我要求您模拟类似的问题进行演示并共享代码。

*   加载项可能存在的问题。尝试删除您的插件（卸载 com 插件）并运行代码并检查您是否仍然遇到问题。禁用插件是一个很好的测试，因为它可以让您缩小选择哪个插件导致崩溃的范围。

*   检查您的防病毒软件是否是最新的或与 Excel 冲突。如果您的防病毒软件不是最新的，Excel 可能无法正常运行。

*   请在单个 excel 实例上运行宏并检查您是否仍有问题。单个实例是指当您转到任务管理器进程选项卡时，应该只出现一个带有 excel.exe 的图像名称。

*   验证/安装最新的窗口更新

*   尝试在其他电脑或其他版本的 excel 上运行相同的宏

*   使用 mztools andin 并查看您的代码

# javascript - 在 javascript 中使用资源文件 (.resx)

> ID：15405529
> 
> 赞同：5
> 
> 时间：2013-03-14T09:32:13.577
> 
> 标签：javascript, jquery, asp.net, razor, resx

我正在尝试在我的项目中使用本地化，但我找不到从 javascript 访问我的 resx 文件的方法。我一直在环顾四周，我不认为“AJAX 调用”方法对我的项目来说是理想的，因为我有很多需要获取的字符串，而且它只会向服务器发送垃圾邮件！

如果我只是把它放在我的 HTML 中，那么它可以使用以下代码：

```
@using Resources
<p>@Html.Raw(ISt_Localization.January)</p> 
```

我想我可以做的一件事是将所有字符串放在一个隐藏的 div 中，然后从我的 javascript 中的 div 中获取内容，但这不会很有效..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:37:56.363

我有类似的情况，在我的情况下，我创建了一个单独的部分视图，它只包含一个 javascript 块，我在其中放置了在客户端逻辑中使用所需的所有资源字符串。每个资源字符串都被定义为一个 javascript 变量。您还可以创建一个关联数组。

在您的部分观点中：

```
var Resources = {
        January : "@Html.Raw(ISt_Localization.January)",
        February : "@Html.Raw(ISt_Localization.February)",
        ...
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T11:59:44.020

你也可以直接试试下面的东西

```
@using Resources

<script>
var value = '@Resource.January';
/* work with value 
.......
.....

*/
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T14:57:42.407

我采取了完全不同的方法。

我想让我的 Javascript 文件所需的资源字符串成为我的 resx 文件的一部分。

我的资源文件中以*js*开头的每个键都必须在 Javascript 中可用。

在 global.asax 中，在 Application_OnStart 中，我为所有支持的语言即时构建 Javascript 文件。因为这只发生在应用程序的开始，所以它是否需要几秒钟并不重要。

好处：

*   所有翻译都集中在一个地方（在您用于 .NET 应用程序（C# 或 VB）的 rex 文件中，也用于您的 Javascript 代码
*   始终保持最新
*   非常快，因为我们将使用变量来获取翻译

构建 Javascript 文件很容易。遍历所有 resx 文件中的所有键值对。只需选择以 开头的键即可`_js_`。将键值对保存在 Javascript 文件中。

因此，如果 resx 文件 (languageSupport_es.resx) 中的键值对是 '_js_Hello'、'Hola'，我会在我的 Javascript 文件 (languageSupport_es.js) 中写入`var Hello = 'Hola';`

如果当前语言是西班牙语，那么`alert(Hello)`会给你“Hola”。

我现在唯一需要注意的是，在我的其他 Javascript 文件之前加载正确的“语言 Javascript 文件”。因此，如果语言是西班牙语，我只首先包含我的“西班牙语 Javascript 文件”（languageSupport_es.js）。

容易吗？如果有人感兴趣，我可以展示一些示例代码...

# php - php shell_exec() 自由半径命令

> ID：15405535
> 
> 赞同：0
> 
> 时间：2013-03-14T09:32:31.643
> 
> 标签：php, exec, radius, freeradius

我有这个问题：我想从指令 php exec() 执行一个命令 freeradius，但它不起作用。代码很简单：

```
<?php
    exec('radzap -x -N 192.168.0.1 localhost  secret');
?> 
```

如果我在 shell 工作中运行代码，但在脚本 php 中不起作用，则其他指令如 'ls' 、'cd' 和其他 'classical' commando 工作。我使用 Fedora，也许我没有用户“Apache”使用字典 Freeradius 的权限。

对不起我的英语，有什么建议吗？谢谢

更新：错误是：

```
 dict_init: Couldn't open dictionary "/etc/raddb/dictionary": Permission denied 
```

好的，我发现了错误（可能），selinux 不允许执行此指令，如果我设置 selinix permessive 工作，如果启用则不起作用。终于成功了，我更改了用户 Httpd 的文件权限，然后指令运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:38:08.520

问题不仅在于命令失败，还在于您不知道它是如何失败的。`exec()`本身并没有给你很多信息，所以你需要捕获命令输出（包括标准错误）：

```
$output = array();
$retcode = 0;
exec('radzap -x -N 192.168.0.1 localhost  secret 2>&1', $output, $retcode);
echo "Return code: $retcode\n";
print_r($output); 
```

这将为您提供命令的返回码和输出，让您了解命令失败的原因。有太多可能的问题给你一个具体的答案。

话虽如此，命令失败的最常见原因是由于 $PATH 环境变量而无法找到二进制文件。尝试`radzap`在 exec 中指定绝对路径，例如`/usr/bin/radzap`.

# c# - 使用 windows phone 中的警报计划更新磁贴通知

> ID：15405539
> 
> 赞同：-6
> 
> 时间：2013-03-14T09:33:07.410
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone, background-process

`It possible for windows phone updated tile by using alarm?`

当警报被触发时，磁贴将被更新。我厌倦了在后台特定时间更新磁贴通知的搜索方法。任何公会路线或资源都可以指向吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:24:34.210

不。

不可能让警报的触发触发磁贴的更新。无法运行代码（更新磁贴或其他方式）以响应触发的警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:42:58.483

我不认为警报会起作用，但是您是否探索过周期性任务？

# javascript - $http 在 Chrome 中给出“Access-Control-Allow-Origin 不允许”错误

> ID：15405542
> 
> 赞同：1
> 
> 时间：2013-03-14T09:33:18.153
> 
> 标签：javascript, angularjs

尝试访问[http://www.kawa.net/works/ajax/romanize/romanize.cgi?q=%ED%96%88%EB%8B%A4?&mode=hangulis](http://www.kawa.net/works/ajax/romanize/romanize.cgi?q=%ED%96%88%EB%8B%A4?&mode=hangulis)我只收到错误“不允许访问控制允许来源。” 我尝试用谷歌搜索这个问题并找到 2 条建议，1 条说我应该使用 --allow-file-access-from-files 启动 Chrome，还有一条说我应该在 WAAMP 服务器上运行页面/脚本。这些都不起作用。据我所知，这是出于安全原因。我正在考虑简单地将 $http 请求转到我的服务器，而不是在那里我将有一个 PHP 文件来联系外部 URL。我想我的问题是：有必要这样做还是有什么办法可以从客户端脚本中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:21:53.463

为了保护它们免受跨站点脚本攻击，浏览器具有内置的安全功能，可防止 javascript 向与最初请求的 HTML 页面不在同一域内的 URL 发出 HTTP（又名 AJAX）请求。

[特别是当从本地文件系统（即 file:///...）接收到原始 HTML 文件时，Chrome 会限制任何 HTTP 请求。正如您所说，您可以使用 --allow-file-access-from-files 选项将其关闭，或者通过始终从 Web 服务器加载页面而不是直接从文件系统加载来修复它。]

事实证明这是相当严格的，因为在许多有效情况下，您的 javascript 应用程序希望访问由位于不同域的第 3 方提供的 Web 服务。在您的情况下，您想要访问将韩文字符罗马化的服务。

所以有很多方法可以绕过这个限制：

# 服务器上的代理

第一种是在您自己的服务器上提供代理服务，将请求传递给第三方服务，然后将其返回给浏览器。浏览器正在向它获取原始 HTML 的同一服务器（即域）发出请求，因此很高兴。

# JSONP

第二种是使用 hack，例如 JSONP ( [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP) )，它涉及向 HTML 动态添加一个新的脚本标签，该标签将加载一个新的 JavaScript 文件并执行它。您必须配置服务器以包装您在调用浏览器中的应用程序提供的函数时请求的数据，以解包数据并使用它。这由使用 .jsonp 方法的 AngularJS $http 服务支持：http://docs.angularjs.org/api/ng [.](http://docs.angularjs.org/api/ng) $http#jsonp。查看页面底部的示例以获取更多信息。

# CORS

最后也是最复杂的方法是利用称为跨域资源共享 (CORS) 的标准： [http](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) ://en.wikipedia.org/wiki/Cross-origin_resource_sharing 。这是现在大多数浏览器中提供的标准，其中浏览器能够与托管不同域上的资源的服务器协商，以同意可以返回某些数据。它不需要在客户端应用程序中进行任何更改，因此 $http 完全支持它，但它需要您设置服务器才能正确响应。我想您所指的服务不支持这一点。顺便说一句，当 CORS 运行时，您会看到许多额外的 OPTION 请求被发送到服务器。这是协商机制的一部分，完全正常。

# javascript - 更改道具时PHP中的道具面部识别滞后

> ID：15405544
> 
> 赞同：0
> 
> 时间：2013-03-14T09:33:26.833
> 
> 标签：javascript, ajax, camera, getusermedia

我找到了一个带有道具的[面部识别库](https://github.com/neave/face-detection)，但希望它能够更改您使用的道具，而不仅仅是一个道具。

我把函数放在你发送的函数`face.html`里面，它会为你制作带有道具的相机。它可以工作，但是当您从另一个道具中选择一个道具时，它会变得越来越迟钝。该脚本使用API。`onclick``src``getUserMedia`

我尝试删除`div`并重新创建相机的内容，但它不起作用。

# google-analytics - Google Analytics 上的多个异步跟踪不起作用

> ID：15405545
> 
> 赞同：1
> 
> 时间：2013-03-14T09:33:28.987
> 
> 标签：google-analytics

我的目标是在每个网站上设置 2 个跟踪：一个特定于网站，第二个用于汇总属于网络的网站的数据。

```
here is the code i implemented :

// UA-XXXXXXXX-1 = Global tracking
// UA-XXXXXXXX-2 = Specific tracking

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(["_setCustomVar", 1, "Type", "Value_Type", 1]);
_gaq.push(['_trackPageview']);
var _gaq2 = _gaq2 || [];
_gaq2.push(['_setAccount', 'UA-XXXXXXXX-2']);
_gaq2.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

This code is not working : specific tracking is not working. Any idea why ?
Thanks in advance 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:33:38.660

您的代码应该如下所示：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(["_setCustomVar", 1, "Type", "Value_Type", 1]);
_gaq.push(['_trackPageview']);

_gaq.push(['SPECIFIC._setAccount', 'UA-XXXXXXXX-2']);
_gaq.push(['SPECIFIC._trackPageview']); 
```

# asp.net - 从另一个函数执行查询

> ID：15405548
> 
> 赞同：1
> 
> 时间：2013-03-14T09:33:35.263
> 
> 标签：asp.net, sql, function

我想对按钮单击事件执行查询。

但是该查询是用另一个函数编写的。

这是我的代码，它不起作用。我的问题是什么？

```
namespace MCE_Member_Registration
{
    public partial class registration_form_view : System.Web.UI.Page
    {
        SqlConnection conn = new SqlConnection("ConnectionString");
        SqlCommand cmd;
        protected void Page_Load(object sender, EventArgs e)
        {
            createform();
        }

        protected void createform() {
            NameValueCollection nvc = Request.Form;
            surname.Text = nvc["txt_surname"];
            cmd.CommandText = "Insert into mce_applicants_information values(N'" + nvc["txt_surname"] + "')";
        }

        protected void confirm_Click(object sender, EventArgs e)
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:38:10.577

我不确定这是否能解决您的问题。但是如果你真的需要另一种方法来创建你的命令，让它返回它。

```
protected SqlCommand  GetCommand() 
{
    SqlCommand cmd = new SqlCommand("Insert into blahblah values(blahblah)", connection);
    return cmd;
}

protected void Button1_Click() {
    connection.Open();
    GetCommand().ExecuteNonQuery();
    connection.Close();
} 
```

请注意，由于多种原因，这不是最佳实践。即使发生异常，也应关闭连接，因此请改用`using`语句。但这在这种方法中将是一个问题，因为连接是一个字段。

所以我更喜欢多合一的方法，它也使用参数来防止 sql 注入攻击：

```
protected void Button1_Click() 
{
    ExecuteBlahBlahCommand("blahblah");
}

private void ExecuteBlahBlahCommand(string blaColumnVal)
{
    const string sql = "Insert into blahblah values(@blaColumn)";
    using (var con = new SqlConnection(connectionString))
    using (var cmd = new SqlCommand(sql, con))
    {
        cmd.Parameters.AddWithValue("@blaColumn", blaColumnVal);
        con.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:38:27.470

回答问题本身 - 您在函数内声明的任何变量都无法在该函数外看到。您需要`SqlCommand`在正确的**[范围内](http://www.blackwasp.co.uk/CSharpVariableScopes.aspx)**声明...

例如：

```
SqlCommand cmd;
protected void CreateQuery() 
{
   cmd = new SqlCommand("Insert into blahblah values(blahblah),connection)";
}

protected void Button1_Click() 
{
  CreateQuery();
  connection.Open();
  cmd.ExecuteNonQuery();
  connection.Close();
} 
```

这将在类级别声明变量，并且该类中的所有其他方法都可以访问。

我只想提一下@Tim Schmelter 的回答是一个很好的解决方案，可能更适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:39:13.217

我建议你使用`CommandText property`而不是构造函数，因为 cmd 的实例是在这段代码之前创建的，所以你调整你的属性

```
protected void CreateQuery() {

    cmd.CommandText = "Insert into blahblah values(blahblah)";
}

protected void Button1_Click() {

    connection.Open();
    CreateQuery();

    cmd.ExecuteNonQuery();
    connection.Close();
} 
```

# c++ - JIT 编译器和异常处理

> ID：15405550
> 
> 赞同：4
> 
> 时间：2013-03-14T09:33:40.577
> 
> 标签：c++, windows, exception-handling, 64-bit

在 Windows x64 上，假设存在三个函数的调用链：

```
function A, written in C++
function B, generated by a JIT compiler
function C, written in C++ 
```

A 调用 B 调用 C，然后 C 抛出由 A 捕获的异常。 B 只是直线代码；它从不抛出或捕获任何异常，也不包含任何析构函数。

[http://msdn.microsoft.com/en-us/library/ms235286(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms235286(v=vs.80).aspx)说 B 必须保持堆栈对齐到 16 个字节，这很好。它还说必须为 B 提供展开数据，但不清楚这些数据应该包含什么或如何提供它。

在这种情况下，B实际上*不必*进行任何展开，它是否仍然必须有一个空的展开数据块，或者您可以忽略它并让异常静默传递 B？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T10:44:46.770

[正如本文所述，](http://blogs.msdn.com/b/freik/archive/2006/01/04/509372.aspx)您确实需要展开数据：

> 即使你只有一个很小的函数，它只调用另一个函数，你仍然需要展开数据，或者当发生异常时，你的进程将被简单地终止。

展开数据的[格式已记录在案](http://msdn.microsoft.com/en-us/library/1eyas8tf.aspx)，但相当简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:09:46.693

Microsoft C++ 编译器发出与 Windows SEH 统一的异常处理代码。所以它是一个很好的工具来看看它应该如何完成。从一个包含一些测试代码的虚拟项目开始：

```
void foo() { throw 1; }

void testNoTry() { foo(); }

void testTry() {
    try { foo(); }
    catch (int& err) {}
} 
```

项目 + 属性、C/C++、输出文件、ASM 列表位置 = /FAcs。这会生成一个 .cod 文件，其中包含此代码的程序集。C/C++、代码生成、基本运行时检查 = 默认。这减少了噪音。建造。

使用文本编辑器打开 .cod 文件。您会看到它将异常数据写入 xdata$x 段。使用显式命名的展开表部件、`__unwindtable$`符号。很痛苦，不是吗。

但除此之外，还有一个非常好的消息：testNoTry() 根本没有展开数据。恭喜。例如，通过将 foo() 移动到另一个 .cpp 文件并尝试 /EHsa 来增强您对它的信心。

# xaml - windows phone 8 xaml 设置单击按钮的颜色

> ID：15405554
> 
> 赞同：1
> 
> 时间：2013-03-14T09:33:48.063
> 
> 标签：xaml, windows-phone-8

我正在处理win8手机项目，每当我单击按钮时，按钮背景会变为手机强调色或在文本框上边框颜色会变为手机强调色或键盘按钮的颜色会变为手机强调色......我试图覆盖 application.resources 中的 PhoneAccentBrush`< solidColorBrush x:Key="PhoneAccentBrush" color="white" />`但它不起作用有什么方法可以更改我的应用程序中所有元素的 Phone Accent Color 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:55:14.873

您可以更改应用程序中所有 Button 控件的默认样式，使其不在`{StaticResource PhoneAccentBrush}`该`Pressed`状态下使用。

打开 Blend 并创建一个简单的 WP8 项目，放入`Button`其中，然后获取模板的副本（右键单击按钮并编辑副本）。请参阅[Jeff Wilcox 的博客，了解该过程的分步说明](http://www.jeff.wilcox.name/2010/08/using-blend-to-find-default-style-xaml/)。

然后，您可以将模板粘贴到您的`App.xaml`. 如果您删除`x:Key`它，它将成为该控件的默认样式。

或者，您可以查看[有关在任何地方覆盖主题的 StackOverflow 问题](https://stackoverflow.com/questions/14537071/windows-phone-8-change-accent-and-theme-colour)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-02T09:55:11.993

无需使用 blend 复制整个样式，您可以简单地覆盖默认主题：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.ThemeDictionaries>
            <ResourceDictionary x:Key="Default">
                <!-- Button pressed color -->
                <SolidColorBrush x:Key="ButtonPressedBackgroundThemeBrush" Color="OrangeRed"/>
            </ResourceDictionary>
        </ResourceDictionary.ThemeDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

至少用 wp8.1 测试过，反正我`ButtonPressedBackgroundThemeBrush`用 blend 发现了；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T07:12:32.913

```
 private void btnSignIn_Click(object sender, RoutedEventArgs e)
    {
        btnSignIn.Background = GetColorFromHexa("#59BD56");
    }
    public SolidColorBrush GetColorFromHexa(string hexaColor)
    {
        byte R = Convert.ToByte(hexaColor.Substring(1, 2), 16);
        byte G = Convert.ToByte(hexaColor.Substring(3, 2), 16);
        byte B = Convert.ToByte(hexaColor.Substring(5, 2), 16);
        SolidColorBrush scb = new SolidColorBrush(Color.FromArgb(0xFF, R, G, B));
        return scb;
    } 
```

# sql - 如何复制引用表中的行？

> ID：15405555
> 
> 赞同：1
> 
> 时间：2013-03-14T09:34:00.200
> 
> 标签：sql, sql-server

我有 3 个表：`Contract`, `ContractElement`（`ContractElementProduct`合同可以有多个`ContractElement`，`ContractElement`也可以有多个`ContractElementProduct`）。

我想复制一份合同/签订新合同，但合同要素和`ContractElement`产品相同。

我可以为该合同制作新合同和新元素（等于第一个合同元素），但我不能复制`ContractElementProduct`s?

```
insert into ContractElement
select newid(), @NewContractId, ElementId, ElementValue, Number 
from ContractElement
where ContractId = @FirstContractId 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-21T09:47:26.567

鉴于基数约束，应该有三个表：Contract、ContractElement 和 ContractElementProducts，其中 Contract 具有 ContractElement 的外键，而 Contract Element 具有 ContractElement 的外键。

如果你把所有东西都放回一张桌子上，这可能不是那么容易。

[在https://dba.stackexchange.com/q/80943/52708](https://dba.stackexchange.com/a/80959/52708)中有一个类似的问题，在[https://dba.stackexchange.com/a/80959/52708](https://dba.stackexchange.com/q/80943/52708)中有一个解决方案。该解决方案需要在表中添加一列，然后删除。不确定我是否喜欢这样。在那里寻找该问题的替代答案

# c# - 通过网络服务暂停流媒体广播

> ID：15405556
> 
> 赞同：2
> 
> 时间：2013-03-14T09:34:00.483
> 
> 标签：c#, web-services, streaming, radio, naudio

一旦我开始播放收音机，我就有一个问题，暂停功能不起作用这是我的代码

```
public class player
{
   Stream ms = new MemoryStream ( );
   WaveStream blockAlignedStream;
   IWavePlayer waveOut = new WaveOut ( WaveCallbackInfo . FunctionCallback ( ) );`

   public void play ( string url )
    {

       new Thread ( delegate ( object o )
       {
           // http://www.samisite.com/sound/cropShadesofGrayMonkees.mp3
           var response = WebRequest . Create ( url ) . GetResponse ( );
           using ( var stream = response . GetResponseStream ( ) )
           {
              byte[] buffer = new byte [ 65536 ]; // 64KB chunks
              int read;
              while ( ( read = stream . Read ( buffer , 0 , buffer . Length ) ) > 0 )
                {
                   var pos = ms . Position;
                   ms . Position = ms . Length;
                   ms . Write ( buffer , 0 , read );
                   ms . Position = pos;
                }
            }
    } ) . Start ( );

    // Pre-buffering some data to allow NAudio to start playing
    while ( ms . Length < 65536 * 5 )  // *10
        Thread . Sleep ( 1000 );

    ms . Position = 0;

    blockAlignedStream = new BlockAlignReductionStream ( WaveFormatConversionStream . CreatePcmStream ( new Mp3FileReader ( ms ) ) ); 
    this.waveOut . Init ( blockAlignedStream );
    this.waveOut . Play ( );
    while ( waveOut . PlaybackState == PlaybackState . Playing )
        {
        System . Threading . Thread . Sleep ( 100 );
        }
    } 
public void stop ( ) 
  {
   this.waveOut . Stop ( );
   this.waveOut . Dispose ( );
   this.waveOut = null;  
   } 
```

然后我称它为这样的网络方法

```
player mp3=new player ( );
[WebMethod]
 // http://streaming.radio.funradio.fr/fun-1-44-128

public void play(string url)
{
   mp3.play ( url );
}
[WebMethod]
public void pause (  )
{
   mp3 .pause();
} 
```

有时屏幕消息会显示此错误：“WaveOut 设备未在 WaveOut.Finalize() 关闭”

我在启动暂停功能时发现了问题，它使用参数“waveOut”，因为它没有在播放功能中修改，我需要找到一种方法来获得它们之间的连接。有任何想法吗 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:05:28.697

这不是我推荐的播放流媒体 MP3 文件的方法。我很惊讶它的工作原理，因为 NAudio 中的 MP3 文件阅读器试图构建一个目录，而您正试图在两个不同的线程上读取和写入内存流。

NAudio 演示应用程序显示了我建议如何进行此操作。您在收到 MP3 帧时对其进行解析和解码，并将它们放入用于播放的 BufferedWaveProvider 中。或者，如果您没有足够的缓冲音频，您可以暂停播放。源代码可从[naudio.codeplex.com 获得](http://naudio.codeplex.com)

# php - php - 一次将 2 个表单发送到两个不同的页面

> ID：15405565
> 
> 赞同：0
> 
> 时间：2013-03-14T09:34:14.447
> 
> 标签：php, javascript, jquery

我同时发送两个表格，但我的脚本中有错误。我研究了错误 - Uncaught TypeError: Property 'submit' of object # is not a function。他们告诉我添加一个提交按钮，但这里已经有一个提交按钮是我的表单

```
<form name="form1" id="form1" method="post" action="page1.php">
    <input type="hidden" name="pt" id="pt" value="<?=$b64string?>" style="width:800px; padding: 10px;">
    <input type="submit" value="submit" name="submit"/>
</form>
<form name="form2" id="form2" method="post" action="page2.php">
    <input type="hidden" name="signature" value="<?=$_sign?>"/>

    <input type="submit" value="submit" name="submit">
</form>
<span onclick="submitBoth();" style="cursor:pointer;"><img src="image1.png"></span> 
```

这是我的jQuery：

```
jQuery.post("form2.php", jQuery("#form2").serialize(), function(data){
    if(data.trim()=='valid'){
        document.form1.submit();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:02:34.580

你可以用这个

```
function submitBoth(){
    $.post('form1.php',$('form[name=form1]').serializeArray(),function(){
          $('form[name=form2]').submit();
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:00:16.727

我使用 NB 的想法得到了这个工作，但我通过触发提交按钮改变了它`jQuery('#submit1').trigger('click');`谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:48:54.533

您使用“form2”作为提交 URL，对吗？

`jQuery.post("form2", jQuery("#form2").serialize() ... etc`

jqery.post 的第一个参数需要是一个 url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:58:01.907

那么为什么不像这样使用smth呢？

```
jQuery.post("form2.php", jQuery("#form2").serialize(), function(data){
   // you sure, that response will be a string, right?
    if(data.trim()=='valid'){
        jQuery.post("form1.php", jQuery("#form1").serialize(), function(data){
     // todo: postprocess form1.php responce
    });
    }
}); 
```

并对之前的评论标记感到抱歉

# ruby-on-rails - ruby titleize 在字母和数字之间提供空间

> ID：15405579
> 
> 赞同：0
> 
> 时间：2013-03-14T09:34:45.583
> 
> 标签：ruby-on-rails, methods, title

```
1.9.3p385 :010 > "Dell Inspiron 14R Laptop".titleize
 => "Dell Inspiron 14 R Laptop" 
```

你看到了吗？，在 14 和 R 之间添加了一个空格，这会干扰我的搜索。你能想到什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:00:39.410

```
1.9.3p385 :015 > "dell inspiron 14r laptop".titleize
 => "Dell Inspiron 14r Laptop"

1.9.3p385 :016 > "dell inspiron 14R laptop".titleize
 => "Dell Inspiron 14 R Laptop" 

1.9.3p385 :017 > "dell inspiron 14R laptop".downcase.titleize
 => "Dell Inspiron 14r Laptop" 
```

字母部分被小写的字母数字不被视为标题。所以，做一个小写并命名它可以节省你的时间。

# jquery - 如何创建可点击的横向照片 jquery 幻灯片

> ID：15405580
> 
> 赞同：0
> 
> 时间：2013-03-14T09:34:50.753
> 
> 标签：jquery, slideshow

我已经用谷歌搜索了很多来创建这样的幻灯片..但没有运气..

[http://www.polygon.com/2013/2/21/4014286/infamous-second-son-playstation4-gallery#!/3934479](http://www.polygon.com/2013/2/21/4014286/infamous-second-son-playstation4-gallery#!/3934479)（滚动页面查看幻灯片）

有人可以帮我解决这个问题..thanx ..

我也希望它有响应

我搜索了你的网站，我发现的是这个

[jQuery 水平滚动（点击和动画）](https://stackoverflow.com/questions/13438135/jquery-horizontal-scrolling-click-and-animate)

在这里你给了一个箭头来点击，但我想点击下一个或上一个图像去相应的图像..

我是 php 编程新手，知道一点 jquery 和 javascript..

任何帮助都会得到帮助..谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:29:59.570

我搜索并找到了最适合您的结果

演示： [这个库的演示](http://bartaz.github.com/impress.js/#/bored)

来源：[Lib 的来源和文档](https://github.com/bartaz/impress.js/)

我希望这能回答你的问题:)

# java - 建立安全连接时没有共同的密码套件

> ID：15405581
> 
> 赞同：7
> 
> 时间：2013-03-14T09:34:54.543
> 
> 标签：java, ssl, rsa, jsse

我正在尝试在两个 Java 项目之间建立安全连接，但我得到了 SSLHandshakeException（没有共同的密码套件）。这是在双方创建套接字的方法：

客户：

```
private SSLSocket getSocketConnection() throws SSLConnectionException {
    try {

        /* Load properties */
        String keystore = properties.getProperty("controller.keystore");
        String passphrase = properties.getProperty("controller.passphrase");
        String host = properties.getProperty("controller.host");
        int port = Integer.parseInt(properties
                .getProperty("controller.port"));

        /* Create keystore */
        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
        keyStore.load(new FileInputStream(keystore), passphrase.toCharArray());

        /* Get factory for the given keystore */
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(keyStore);
        SSLContext ctx = SSLContext.getInstance("SSL");
        ctx.init(null, tmf.getTrustManagers(), null);
        SSLSocketFactory factory = ctx.getSocketFactory();

        return (SSLSocket) factory.createSocket(host, port);
    } catch (Exception e) {
        throw new SSLConnectionException(
                "Problem connecting with remote controller: "
                        + e.getMessage(), e.getCause());
    }
} 
```

服务器：

```
private SSLServerSocket getServerSocket() throws SSLConnectionException {
    try {

        /* Load properties */
        Properties properties = getProperties("controller.properties");

        String keystore = properties.getProperty("controller.keystore");
        String passphrase = properties.getProperty("controller.passphrase");
        int port = Integer.parseInt(properties
                .getProperty("controller.port"));

        /* Create keystore */
        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
        keyStore.load(new FileInputStream(keystore), passphrase.toCharArray());

        /* Get factory for the given keystore */
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(keyStore);
        SSLContext ctx = SSLContext.getInstance("SSL");
        ctx.init(null, tmf.getTrustManagers(), null);
        SSLServerSocketFactory factory = ctx.getServerSocketFactory();

        return (SSLServerSocket) factory.createServerSocket(port);
    } catch (Exception e) {
        throw new SSLConnectionException(
                "Problem starting auth server: "
                        + e.getMessage(), e.getCause());
    }
} 
```

我有一个用 keytool 生成的 RSA 密钥。此代码从磁盘加载它。

我做错了什么？

**更新：** 我用这个数组在两边添加了对 setEnabledCipherSuites 的调用：

```
String enableThese[] =
{
    "SSL_RSA_WITH_3DES_EDE_CBC_SHA",
    "SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA",
    "SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA"
}; 
```

我得到相同的结果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T10:23:27.123

在服务器端，您没有初始化 keystore/keymanagers，只有 truststore/trustmanagers: `ctx.init(null, tmf.getTrustManagers(), null)`。

在服务器上，始终需要初始化密钥管理器来配置服务器证书。仅当您要使用客户端证书身份验证时才需要初始化信任库。（关于keymanager 和 trustmanager 之间的区别，[此问题](https://stackoverflow.com/a/6341566/372643)中有更多详细信息。）

如果没有配置任何密钥管理器，则没有可用的基于 RSA 或 DSA 的证书，因此没有依赖证书进行身份验证的密码套件（默认启用的所有密码套件都可用）。因此，您在客户端和服务器之间没有共同的密码套件。

你需要这样的东西：

```
KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
kmf.init(keystore, password.toCharArray()); // That's the key's password, if different.
// ...
ctx.init(kmf.getKeyManagers(), null, null); 
```

从您的示例中不清楚，但是您当然不应该在客户端（作为信任库）和服务器端（作为密钥库）上使用相同的密钥库：私钥应该只为服务器所知，并且不不需要在客户的信任库中。

* * *

**编辑：（**我会尝试以不同的方式重新解释，因为每个人都不清楚。也许它可能会有所帮助。）

以下代码`SSLContext`使用一`null`组密钥管理器（第一个参数）初始化`ctx.init(null, tmf.getTrustManagers(), null)`：（没有默认的密钥管理器。）

密钥管理器在代码运行的一侧管理*您的（私有）密钥和证书。*在服务器上，密钥管理器负责处理服务器证书及其私钥。密钥管理器本身通常由“密钥库密钥库”初始化。Java 中的“ *keystore* ”可以有多种含义。*密钥库*的含义之一是可以存储密钥和证书的实体，通常是文件。这样的密钥库可用于初始化信任管理器¹（在这种情况下，它被称为*truststore*）或密钥管理器（在这种情况下，它被称为*密钥库）*）。抱歉，不是我选择的名称，而是调用系统属性的方式。

当服务器配置了空密钥管理器时，它被配置为没有任何证书和关联的私钥。因此，它没有任何 RSA 或 DSA 证书。因此，它将无法使用任何`*_RSA_*`密码`*_DSS_*`套件，无论它们是否已被显式启用（它们将因缺少与它们一起使用的证书而被自动禁用）。这有效地丢弃了默认启用的任何密码套件（或任何此类密码套件都明确启用）。因此，“没有共同的密码套件”。

简而言之，`SSLContext`服务器端的 a 需要配置一个证书及其私钥²。这是通过配置其密钥管理器来完成的。反过来，这通常是通过使用带有 a `KeyManagerFactory`（而不是 a `TrustManagerFactory`）的密钥库来完成的。

[1：信任管理器使用本地信任锚（例如受信任的CA 证书）来评估对*远程*方（即信任客户端证书的服务器或信任服务器证书的客户端）的信任。]

[2：JSSE 支持的一些密码套件不需要证书，但它们要么是匿名密码套件（不安全），要么是 Kerberos 密码套件（需要完全不同地设置）。两者都默认禁用。]

# php - 防止php在pre标签之间渲染/执行

> ID：15405586
> 
> 赞同：3
> 
> 时间：2013-03-14T09:35:00.580
> 
> 标签：php, javascript, jquery, html, rendering

我正在使用 pre 标签在我的网站上显示代码片段，这些片段包含 html 和 php。

到目前为止，我已经使用 Jquery 将代码片段中的 html 转换为纯文本，但 php 标记仍在执行中。

我用于将 pre 标记的 html 内容转换为纯文本的代码：

```
$(document).ready(function(){
    $("pre").text($("pre").html()); 
}); 
```

我使用它的一个例子：

```
<pre>
    <p>paragraph Content</p>
    <h1>html code</h1>
    <?php echo "this is php example code"; ?>
</pre> 
```

前两行在浏览器中显示标签和一切完美，但第三行执行 php 标签，仅呈现**此 php 示例代码**。任何人都可以帮助我，以便我也可以在我的代码片段中显示 php 标签吗？

此外，如果有人知道将 html/css 和 php 呈现为您网站上的代码片段的更好解决方案，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:37:58.897

您应该转义`<`and符号-分别`>`用它们的 HTML 实体替换它们；)`&lt;``&gt;`

如果您想要全面全面地转换为 HTML 实体，请尝试在[http://centricle.com/tools/html-entities进行转换](http://centricle.com/tools/html-entities)

通常，将所有符号转换为代码块中各自的 HTML 实体是一种很好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:40:39.613

The problem with your approach is, that you try to influence the rendering after the browser has processed the file. When you look at the sourcecode of your page, you will notice that there really is nothing else than "this php example code" in there, because the server parsed that part of your code and executed it, which leads to nothing but the string you put into that `echo` command.

You need to handle your output before your send it to the client and fetch all occurrences of `<pre>` and `</pre>` to replace all `<` and `>` between them with their respective HTML entities.

Have a look at [this question](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php) to find out the best approach to parse the HTML and get the appropriate elements in order to modify them.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:38:01.213

尝试替换`<?php ... ?>`为

`&lt;? .... &gt;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T09:38:50.593

```
<pre>
    &lt;p&gt;paragraph Content&lt;/p&gt;
    &lt;h1&gt;html code&lt;/h1&gt;
    &lt;?php echo "this is php example code"; ?&gt;
</pre> 
```

这是一个[JSFiddle 示例](http://jsfiddle.net/pRVGH/)，因此您可以查看它在页面上的呈现方式。

# javascript - 如何将点与折线进行比较

> ID：15405588
> 
> 赞同：0
> 
> 时间：2013-03-14T09:35:08.477
> 
> 标签：javascript, leaflet

我有一个存储所有折线的数组。

```
var polyArrayCollection = [polyline1, polyline2, polyline3] 
```

现在，当我单击地图时，我会得到该点的 LatLng 值。

现在我想将该点 LatLng 值与每条折线中的点进行比较。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:52:16.933

您可以使用折线的`getLatLngs`方法获取折线中的点。接下来，您可以循环生成的数组并将其元素与您的`LatLng`. 像这样的东西：

```
for (var pl in polyArrayCollection){
    var pts = polyArrayCollection[pl].getLatLngs();
    for (var pt in pts){
        //compare it with your LatLng, assuming it is stored in myPt variable
        if (pts[pt].equals(myPt)){
            //do something if the points are equal
        }
    }
} 
```

# php - 传出请求php的端口信息？

> ID：15405593
> 
> 赞同：0
> 
> 时间：2013-03-14T09:35:34.757
> 
> 标签：php, port

`$_SERVER['REMOTE_PORT']`端口（我从那里得到的）和我们得到的端口信息有什么区别`phpinfo();`因为我正在开发一个网站，它面临着无法从 twitter 提要和 youtube 获取内容的问题，并且`allow_url_fopen`也在 . 现在他们在问我使用哪个端口来访问这个站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:57:35.243

所以你想知道为什么你的请求会`https://api.twitter.com/whatever`失败`http://youtube.com/blablabla`。

1.  检查您的错误日志。`error_log`将日志记录到一些非公共日志文件，设置（不要`error_reporting = E_ALL`忘记`display_errors = Off`在生产中设置）。
2.  [检查返回值，在PHP 手册](http://php.net/manual)中查找它们的含义。
3.  如果事实证明一个传出端口被阻塞，请知道哪个端口用于资源。`https`使用 TCP 端口 443。`http`使用端口 80。另请参阅[Wikipedia - List of TCP and UDP port numbers](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)。

`$_SERVER["REMOTE_ADDR"]`与这个问题完全无关。为什么不向支持人员解释您的问题？他们应该能够很快找出需要打开的端口。

# ruby-on-rails - [Rails]update_without_password 不更新用户信息

> ID：15405598
> 
> 赞同：3
> 
> 时间：2013-03-14T09:35:39.093
> 
> 标签：ruby-on-rails, devise

我执行了以下代码

```
 @user = User.find(current_user.id)

successfully_updated = if needs_password?(@user, params)
  @user.update_with_password(params[:user])
else
  # remove the virtual current_password attribute update_without_password
  # doesn't know how to ignore it
  params[:user].delete(:current_password)
  @user.update_without_password(params[:user])
end

if successfully_updated
  set_flash_message :notice, :updated
  # Sign in the user bypassing validation in case his password changed
  sign_in @user, :bypass => true
  redirect_to after_update_path_for(@user)
else
  render "edit"
end 
```

但是 update_without_password 给出`false`并且数据库被回滚。我必须为 update_without_password 做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:29:43.580

我刚刚解决了我自己的问题。以下代码应该像宣传的那样工作（如在设计的 wiki 页面上找到的）。

```
def update    
  @user = User.find(current_user.id)
  successfully_updated = if needs_password?(@user, params)
    @user.update_with_password(params[:user])
  else
    params[:user].delete(:current_password)   
    @user.update_without_password(params[:user])
  end

  if successfully_updated
    set_flash_message :notice, :updated
    sign_in @user, :bypass => true
    redirect_to after_update_path_for(@user)
  else
    render "edit"
  end
end 
```

确保您还为“needs_password”定义了私有方法？

```
def needs_password?(user, params)
  (params[:user].has_key?(:email) && user.email != params[:user][:email]) 
     || !params[:user][:password].blank?
end 
```

我的问题是我从“edit.html.erb”文件的表单中删除了“电子邮件”字段，所以“needs_password？” 由于 user.email 永远不等于 nil，因此方法一直返回 true。为了解决这个问题，我添加了一个检查`params[:user].has_key?(:email)`以查看哈希中是否存在“电子邮件”。

FWIW，“update_without_password”的工作方式几乎与“update_with_password”相同，只是它在调用对象上的“update_attributes”之前去掉了“password”和“password_confirmation”参数，因此您不必再做任何事情。试着看一下上游，看看你是否真的在调用“update_without_password”。

# css - 在 GWT 中创建我自己的自定义小部件并使用我自己的自定义 CSS 代码对其进行样式设置

> ID：15405599
> 
> 赞同：0
> 
> 时间：2013-03-14T09:35:41.370
> 
> 标签：css, gwt

我创建了一个自定义小部件，基本上是一个图像和一个文本标签。我必须做什么才能现在只使用 CSS 设置文本的位置（例如图像的顶部/左侧/底部）？我的意思是我的班级需要什么方法才能应用 CSS 样式？

即我可以有这样的css类吗

```
.ImageAndLabel 
{
     imagePosition: top;
} 
```

这是我的 gwt 课程

```
 public class ImageAndLabel extends Composite
    {
        private Label label = new Label();
        private Image img = new Image("/images/pinkBackground.png");
        protected final FlexTable contentTable;

        public ImageAndLabel()
        {
            contentTable = new FlexTable();
            initWidget(contentTable);
            label.getElement().getStyle().setFontSize(40, Unit.PX);
            contentTable.setWidget(0,0,img);
            img.setHeight("200px");
            contentTable.setWidget(0,1,label);
            label.getElement().getStyle().setLeft(0, Unit.PX);
            img.getElement().setId("popupImg");
            label.getElement().setId("popupLabel");
        }

        public void setText(String text)
        {
            label.setText(text);
        }
    } 
```

我想我想要的是我可以创建自己的自定义 CSS 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:29:52.523

您可以`flextable`使用`alignment`. 例子 ：

```
 flexTable.getFlexCellFormatter().setAlignment(0, 0, 
      HasHorizontalAlignment.ALIGN_CENTER, HasVerticalAlignment.ALIGN_MIDDLE); 
```

# cmake - 使用 cmake 构建后复制或移动库

> ID：15405600
> 
> 赞同：8
> 
> 时间：2013-03-14T09:35:43.307
> 
> 标签：cmake

在我的项目中有一个包含第三方库（google test、zlib、...）的文件夹。在构建所有这些库后，我想将这些库放在一个公共文件夹中。我正在尝试用 cmake 做到这一点，但我遇到了问题。我正在尝试这段代码：

```
add_subdirectory(gtest-1.6.0)    
add_custom_command(
            TARGET gtest_main 
            POST_BUILD
            COMMAND ${CMAKE_COMMAND} -E copy ${SRC_LIB_DIR}/*.a ${DST_LIB_DIR}) 
```

我认为问题可能是目标 gtest main 未在此级别定义，而是在较低级别

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T09:41:47.593

如果您`CMAKE_LIBRARY_OUTPUT_DIRECTORY`在调用之前在 CMakeLists.txt 中设置了变量`add_subdirectory`（并且子项目不会覆盖它），则库应该放在正确的位置。

另外像这样子项目中的目标保持对输出文件的依赖。这不适用于您的副本 - 目标将始终过时并因此重建。

编辑：我忽略了您的复制命令正在复制 .a 文件，并且感谢@Fraser 的评论，我也了解到这`CMAKE_ARCHIVE_OUTPUT_DIRECTORY`应该可以解决问题。

# c# - 由于 section.PageSetup.SectionStart = BreakType.BreakOdd/EvenPage 而导致 MigraDoc 中的空白页

> ID：15405601
> 
> 赞同：0
> 
> 时间：2013-03-14T09:35:44.600
> 
> 标签：c#, sections, migradoc

我正在从数据库生成价格指南——许多所需的功能已经完成，但系统正在生成空白页，我认为这是正确的，但我想知道是否有解决方法。

简而言之，我习惯于`section.PageSetup.SectionStart`确保新部分从右侧页面开始。以这种方式跳过时，左侧页面是空白的。问题是前一部分有一个左侧页面的标题，新部分有一个左侧页面的标题。标题包含漂亮的背景。

一种背景或另一种背景都比空白页好，但空白页是可以接受的——我只是在寻找完美:)

跳过的页面可以有来自任一部分的标题/背景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:44:05.897

> 跳过的页面可以有来自任一部分的标题/背景吗？

不，AFAIK 你不能自动拥有它。

在我们的应用程序中，我们使用不同的方式添加背景：每个部分都有一个标签，指示必须使用哪个背景。我们在自己的循环中渲染页面，在渲染页面之前添加背景。

请参阅使用 RenderPage 的 Mix MigraDoc 和 PDFsharp 示例：
[http ://www.pdfsharp.net/wiki/MixMigraDocAndPdfSharp-sample.ashx](http://www.pdfsharp.net/wiki/MixMigraDocAndPdfSharp-sample.ashx)

这是一个代码片段：

```
// Check tags of all pages
for (int idx = 0; idx < pageCount; idx++)
{
  DocumentObject[] docObjects = docRenderer.GetDocumentObjectsFromPage(idx + 1);
  if (docObjects != null && docObjects.Length > 0)
  {
    Section section = docObjects[0].Section;
    DocumentSectionTag sectionTag = null;
    if (section != null)
      sectionTag = section.Tag as DocumentSectionTag;
    if (sectionTag != null && sectionTag.Name != sectionName)
    { 
      // Your code to handle the background information goes here 
```

DocumentSectionTag 是我们定义的用于传输所需信息的类。我们的页面背景是 PDF 文件中的页面，所以我们只需要页码。

# eclipse - 将对象作为参数传递给命令

> ID：15405602
> 
> 赞同：1
> 
> 时间：2013-03-14T09:35:46.337
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我的 Eclipse 插件中有两个命令。（上传并运行）。它们可以由用户一个接一个地调用。所以只有在上传命令完成后调用 Run 才有意义。

由于上传命令可能需要一些时间，它会安排一个 WorkspaceJob 来实际执行。并在安排工作后立即返回。

我想知道的是添加另一个名为“上传并运行”的命令（令人惊讶的是）应该首先上传然后运行选择。因此，必须`WorkspaceJob`在 Upload 命令中的启动完成时通知它。

所以我想用一个附加的参数化命令，`IJobChangeListener`它将在`WorkspaceJob`计划时添加。

不幸的是，在我看来，只能将字符串作为参数传递给可以轻松转换为字符串的命令或对象。然而，像这样的监听器不能作为字符串传递。

*   如何为命令提供这样的侦听器对象？
*   是否有其他我没有想到的向命令提供侦听器对象的方法（除了将其作为参数传递）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:44:32.260

由于您的“上传并运行”操作将开始上传，因此您可以为运行操作安排*另一个*`join()`作业，该作业只需在执行任何其他操作之前调用您拥有的工作区作业参考。

**更新：** 我认为您在那里遇到了框架的限制。这些命令旨在作为用户界面的抽象，而不是作为完成任务的抽象。我会简单地重用您拥有的 Java 代码，并直接从按钮调用这两个操作的代码以实现联合功能。

# asp.net - 经典的asp sql连接字符串错误

> ID：15405604
> 
> 赞同：3
> 
> 时间：2013-03-14T09:36:00.010
> 
> 标签：asp.net, asp-classic, sql-server-2012

我收到与我的连接字符串相关的错误并且找不到解决方案。

我的连接字符串是

```
Provider=SQLOLEDB; Driver={SQL Server}; Server=ServerName; 
      Initial Catalog=xxxx;Persist Security Info=True;User ID=xxxx;Password=xxxxx 
```

我在经典 asp 页面上使用此连接字符串来使用 ajax 调用更新 aspx 页面。但它一直给我“未指定的错误”和“无效的连接字符串属性”错误。但问题是错误消息不断变化：S

顺便说一句，我有 sql server 2012。

你有什么主意吗？？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:43:21.773

在此链接中，您拥有 Sql Server 2012 的所有字符串连接格式

链接： http: [//www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)

您可以尝试使用这种格式：

```
Provider=....;Data Provider=....;Data Source=myServerAddress;
Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

# javascript - jQuery-mobile 和 ASP.NET 组合问题

> ID：15405606
> 
> 赞同：3
> 
> 时间：2013-03-14T09:36:07.383
> 
> 标签：javascript, asp.net, jquery, jquery-mobile

我正在开发一个结合 jQuery.mobile 和 asp.net webforms 的移动解决方案。

为了使我的 asp.net 控件的回发正常工作，我必须在页面顶部禁用 ajax，如下所示：

```
 <script>
      $.mobile.ajaxEnabled = false;
   </script> 
```

但是当像这样禁用ajax时，其他功能似乎不起作用。我无法从 jQuery 文档准备好调用对话框/弹出窗口

例如：

```
 $(document).ready(function () {        
     $('#myPopup').popup('open'); 
  }); 
```

这只会导致弹出窗口在不到一秒的时间内显示，然后消失。此外，当我从代码隐藏注册一个客户端脚本以在单击服务器端按钮时触发弹出窗口时，弹出窗口只是闪烁，然后消失。但是当我在页面顶部禁用 ajax 时，弹出调用工作正常。

任何想法如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:54:12.443

文档准备好无法与**`jQuery Mobile`**. 它通常会在页面**`DOM`**填充之前触发。

而不是这一行：

```
$(document).ready(function () {        
    $('#myPopup').popup('open'); 
}); 
```

使用这一行：

```
$(document).on('pagebeforeshow', '#page-id', function(){       
    $('#myPopup').popup('open'); 
}); 
```

**`#page-id`**包含该弹出窗口的页面 id在哪里。

jQuery Mobile 在准备好文档时遇到了问题，因此它的开发人员创建了页面事件来解决这个问题，在这篇**[文章中阅读更多相关信息或在](http://www.gajotres.net/document-onpageinit-vs-document-ready/)****[此处](https://stackoverflow.com/a/14469041/1848600)**找到它。

**编辑 ：**

我认为您的问题也在**`$.mobile.ajaxEnabled = false;`**处理中。

该代码示例**必须**从**`mobileinit`**如下事件触发：

```
$(document).bind("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
}); 
```

还有一件事，**必须**在初始化之前触发**`mobileinit`**事件，如下所示：****`jQuery Mobile`****

 **```
<script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>      
<script>
        $(document).bind("mobileinit", function () {
            $.mobile.ajaxEnabled = false;
        });    
</script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T07:00:39.517

我做到了.....

不要使用[此处描述的说明](http://forum.jquery.com/topic/asp-net-postbacks-not-triggering-with-jquery-mobile-1-0-final)

只需打开 jquery.mobile-1.3.1.min.js 文件 ajaxEnabled:!0 并将其更改为 : ajaxEnabled:!1

现在点击 CTRL+F5 并在项目继续的同时让项目快乐！;)**

# jquery - 将事件跟踪代码从 Jquery 转换为 Mootools

> ID：15405609
> 
> 赞同：2
> 
> 时间：2013-03-14T09:36:11.543
> 
> 标签：jquery, joomla, mootools, analytics

我正在开发一个 Joomla 网站，所以它使用的是 Mootools。

我需要在联系表单提交按钮上使用分析事件跟踪；但是，JQuery 无法正常工作，我已经尝试了所有选项，使用 NoConflict 等等。

这是我需要在提交按钮上使用的 Jquery 代码。如何将其转换为 Mootools？

```
onclick="var _this=this;_gaq.push([
  '_set',
  'hitCallback',
  function( { 
    $(_this).parents('form').first().submit();
  }
]);

_gaq.push([
  '_trackEvent', 
  'Contact', 
  'Appointment',
  ,
  , 
  false]
);

return !window._gat;" 
```

希望你能帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:44:29.513

MooTools 1.1 不支持`getParent`选择器，因此您不妨直接使用 DOM API。我会重写该函数（顺便说一句，您发布的代码中缺少一个结束括号）

```
function() { 
    $(_this).parents('form').first().submit();
} 
```

如下：

```
function() {
    for (var el = _this.parentNode; el; el = el.parentNode) {
        if (el.tagName == 'form') {
            el.submit();
            break;
        }
    }
} 
```

如果您添加点击处理程序的元素是一个`input`元素，您可以简单地使用：

```
function() { _this.form.submit(); } 
```

另请注意，使用该`onclick`属性通常是不好的做法。您应该考虑使用 MooTools' 添加事件处理程序`Element.addEvent`。

# hadoop - hadoop 用于非 mapreduce 任务

> ID：15405610
> 
> 赞同：1
> 
> 时间：2013-03-14T09:36:19.990
> 
> 标签：hadoop, mapreduce, scheduling

我们可以使用 hadoop 作为框架来调度不同的任务而不使用 MapReduce 范例吗？

我想使用我的调度算法来调度一组任务。根据我的算法，任务要在不同的机器上运行，但任务的整个计算应该在一台机器上进行。

我们可以在hadoop上做到这一点吗？请给建议

# mysql - 将数据从erlang注册到表mysql

> ID：15405611
> 
> 赞同：-4
> 
> 时间：2013-03-14T09:36:20.013
> 
> 标签：mysql, erlang

我在 mysql 中有一个名为**person**的表， 这是在 person 表中插入数据的简单代码

```
$id = "1";
$firstname = "afif";
$lastname = "kaled";
$test = mysql_connect("localhost", "root", "root");
    if ($test) {
        mysql_select_db("basetest", $test);
    }

    $sql = " INSERT INTO `person` SET
            `id` = '" . $id . "',
                         `firstname` = '" . $firstname . "',
            `lastname` = '" . $lastname . "' ";

    @mysql_query($sql, $test); 
```

我想修改这个功能

```
test()->

Id ="11",
Firstname ="afif",
Lastname ="kaled",

%% here I want to register this data in the table person . 
```

所以表人会有这个数据

**11 afif kaled**

我想知道是否可以将数据从erlang注册到表mysql

我已经使用以下代码完成了将数据从 erlang 传输到 txt 文件的示例：

```
exporttxt()->
    F = fun() -> mnesia:foldl(fun(X,Acc) -> [X|Acc] end, [],person) end,
    {atomic,L} = mnesia:transaction(F),
    file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                     #person{id = F1,firstname = F2,lastname = F3} <- L]). 
```

**但现在正如我已经说过的，我想知道是否可以将数据从 erlang 发送到 mysql 中的表**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T10:43:20.983

[当然](https://github.com/dizzyd/erlang-mysql-driver) [有可能](https://stackoverflow.com/questions/2060547/erlang-mysql-example)。

在提问之前尝试使用搜索。

# git - 更改 emacs 版本控制模式

> ID：15405612
> 
> 赞同：0
> 
> 时间：2013-03-14T09:36:26.143
> 
> 标签：git, svn, version-control, emacs

我有一个`file.txt`被 SVN 和 Git 跟踪的。目录结构如下所示：

```
 + prj/
  |
  +    .git/
  +    src/
  |        .svn/
  |        file.txt 
```

当我在 Emacs 中打开该文件时，它默认以 SVN 模式打开。如何将其更改为以 Git 模式打开？这些`vc-`命令都不包含更改版本控制模式的内容。

编辑：我想逐个文件在 SVN 和 Git 模式之间切换。一个[相关的问题](https://stackoverflow.com/questions/5059804/howt-to-tell-emacs-vc-that-i-want-a-file-to-be-managed-by-git-not-by-svn-when-th?rq=1 "相关问题")没有回答如何做到这一点。`vc-handled-backends`永久更改订单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:08:07.343

很久以前，我使用`C-x v b`(for `vc-switch-backend`) 来处理 RCS 和 CVS 中的文件。我想这也应该适用于现代版本控制系统。

# c - 从共享库获取函数指针的区别

> ID：15405614
> 
> 赞同：5
> 
> 时间：2013-03-14T09:36:31.200
> 
> 标签：c, shared-libraries

问题是如何从共享库（UNIX/LINUX）中获取函数地址？

我用 C（见下文）编写了一些测试用例，在 Ubuntu 10.04 (amd64) 和 FreeBSD-8.2 (amd64) 上编译和运行。我没有感觉到任何不同，但我想更多地了解可能的麻烦。

他们来了：

1.  测试 1

库文件

```
char* f0(void) {
    return "Hello, World!";
} 
```

主程序

```
#include <dlfcn.h>
#include <stdlib.h>
#include <stdio.h>

void *hlib, *addr;
char* (*foo)(void);
char* s;

int main(int argc, char** argv) {
    if ( !(hlib = dlopen("./lib.so", RTLD_LAZY)) )
      return 1;
    if ( !(addr = foo = dlsym(hlib, "f0")) )
      return 2;
    s = foo();
    printf("%p => %s\n", addr, s);
    return 0;
} 
```

现在构建它：

```
gcc -o lib.o -c lib.c -Wall -Werror -O3 -fPIC
gcc -o lib.so -shared -nostartfiles lib.o
gcc -o main.o -c main.c -Wall -Werror -O3
gcc -o prog main.o -ldl 
```

这将打印库函数 f0() 的地址和执行结果。

1.  测试 2

lib.h（这里定义动态链接库的标准接口）

```
#ifndef __LIB_H__
#define __LIB_H__

typedef struct __syminfo {
  char* name; // function name
  void* addr; // function address
} syminfo_t;

typedef struct __libinfo {
  int       num;    // number of exported functions
  syminfo_t sym[1]; // vector of exported function information
} libinfo_t;

extern int (*__getinfo)(libinfo_t**);

#endif
/* __LIB_H__
*/ 
```

lib.c（库本身）

```
#include <stdlib.h>
#include <lib.h>

static libinfo_t* li;

char* foo(void);

__attribute__((constructor)) void __init() {
  if ( (li = calloc(1, sizeof(libinfo_t))) ) {
    li->num = 1;
    li->sym[0].name = "foo";
    li->sym[0].addr = &foo;
  }
}

__attribute__((destructor)) void __free() {
  if (li)
    free(li);
}

int getinfo(libinfo_t** inf) {
  if (!inf)
    return -1;
  *inf = li;
  return 0;
}

char* foo(void) {
  return "Hello, World!";
} 
```

主程序

```
#include <stdio.h>
#include <dlfcn.h>
#include <lib.h>

libinfo_t* inf;

void* hlib;

int (*__getinfo)(libinfo_t**);

char* (*foo)(void);

char* s;

int main(int argc, char** argv) {
  if ( !(hlib = dlopen("./lib.so", RTLD_LAZY)) ) 
    return 1;
  if ( !(__getinfo = dlsym(hlib, "getinfo")) )
    return 2;
  if (__getinfo(&inf))
    return 3;
  if ( !(foo = inf->sym[0].addr) )
    return 4;
  s = foo();
  printf("%p => %s\n", inf->sym[0].addr, s);      
  return 0;
} 
```

现在编译它（没有 -nostartfiles）：

```
gcc -I. -o lib.o -c lib.c -Wall -Werror -O3 -fPIC
gcc -o lib.so lib.o -shared
gcc -I. -o main.o -c main.c -Wall -Werror -O3
gcc -o prog main.o -ldl 
```

此 printf 与测试 1 相同：库函数 foo() 的地址及其执行结果。

我试图展示如何获取共享库函数地址，但我在第二次测试中是否正确？我会遇到一些麻烦吗？

注意：在 FreeBSD-8.2 中不需要使用 -ldl 参数，所有 dlfcn.h 例程都在 libc 库中。

分别等待任何解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T02:15:29.567

这对我来说看起来相当标准。您使用的唯一可能会造成一些问题的是您使用 gcc 属性为您的共享库创建构造函数和析构函数。那可能不是完全可移植的；这取决于您关心的平台。

请注意，在这种特定情况下，不需要做这么复杂的事情。您在第二个示例中从共享库返回的信息在编译时都是已知的，因此您可以使用该信息创建一个静态结构，然后使用 dlsym 检索结构的地址并从主程序或调用已知函数以返回结构。（后者在某些极端情况下稍微灵活一些，但两者都相当灵活。）

# jquery - jQuery 拖动完美，但在 ASP MVC4 局部视图上不掉线

> ID：15405617
> 
> 赞同：0
> 
> 时间：2013-03-14T09:36:38.137
> 
> 标签：jquery, asp.net-mvc, drag-and-drop

我对 MVC4 项目有部分看法。在这个视图中，我有 DevExpress html-editor，项目列表，我想将其放入编辑器和 div，在拖动开始时隐藏编辑器（直接在编辑器中拖放会很慢）。

这是一个代码

[http://jsfiddle.net/ghusse/zrbCj/](http://jsfiddle.net/ghusse/zrbCj/)

JS初始化可拖动和可放置：

```
 this.initializeDragNDrop = function(){

        console.log('D&D initializing.');

        $("#Shield ").droppable({
            drop: function (event, ui) { _this.OnActionItemDrop(); }
        });

        $("#ActionItemList div").draggable({
            start: function () { _this.OnActionItemDragStart(this); },
            stop: function () { _this.OnActionItemDragStop(this); },
            revert: true
        });

        console.log('D&D initialized.');

    }; 
```

Chrome 控制台输出：

> 研发初始化。
> D&D 已初始化。
> 拖动开始。
> 拖动停止。

项目正确拖动和还原。但不会发生下降。#Shield 的 PS 鼠标悬停事件正确发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:00:01.103

我认为`revert: 'valid'`不是`revert: true`

# c++ - 从引用中猜测类型

> ID：15405625
> 
> 赞同：0
> 
> 时间：2013-03-14T09:37:01.007
> 
> 标签：c++, boost, c++11

我有以下结构，其中一些是在框架中定义的，而另一些则不是，如评论中所示：

```
struct FixedInterface { // from the framework
   virtual ~FixedInterface() {}
}

struct MyAdditionalInterface { // generic, personal/additional interface
}; 
```

我的程序中的以下结构可以从上述两种结构派生出来，并被使用/传递给强类型框架

```
struct MyFirstInterface : MyAdditionalInterface, FixedInterface {
};

struct MySecondInterface : FixedInterface {
};

struct MyThirdInterface : MyAdditionalInterface, FixedInterface {
};

// ...

struct MyNthInterface : FixedInterface {
}; 
```

现在框架让我定义和“注入”一个具有以下签名的自定义函数。框架在需要时调用此函数：

```
void MyClass::my_function(const FixedInterface& obj) {
} 
```

在上述函数的主体中，我需要一种方法来知道 obj 是否是`MyAdditionalInterface`（即`MyFirstInterface`or `MyThirdInterface`）的实例，以便我可以将 obj 转换为使用`MyAdditionalInterface`.

我怎样才能获得这些信息？我可以自由地修改我的结构，只要我不改变层次结构并且`MyAdditionalInterface`没有 vtable（没有虚函数或析构函数，原因是框架不允许我这样做）。

我可以免费使用`Boost`以防万一。我可以访问 C++11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:40:33.227

A`dynamic_cast`会工作；

```
MyAdditionalInterface obj2 = dynamic_cast<MyAdditionalInterface const&>(obj) 
```

它会抛出异常`obj`is not a `MyAdditionalInterface`。

但是，使用`dynamic_cast`表示您应该重新设计层次结构。

### 一种可能的解决方案 (1)

看来您只`MyAdditionalInterface`在`FixedInterface`?

如果是这样的话，

```
struct MyAdditionalInterface : FixedInterface { ... } 
```

然后，定义 2 个重载。

```
void MyClass::my_function(const FixedInterface& obj) {
}
void MyClass::my_function(const MyAdditionalInterface& obj) {
} 
```

### 一种可能的解决方案 (2)

例如，让我们定义

```
struct MyConvolutedInterface : MyAdditionalInterface, FixedInterface {
    ...
} 
```

然后重新定义类如下

```
struct MyFirstInterface : MyConvolutedInterface  {
};

struct MySecondInterface : FixedInterface {
};

struct MyThirdInterface : MyConvolutedInterface  {
};

// ...

struct MyNthInterface : FixedInterface {
}; 
```

然后，定义2个重载

```
void MyClass::my_function(const FixedInterface& obj) {
}
void MyClass::my_function(const MyConvolutedInterface& obj) {
} 
```

但是，我怀疑这在许多情况下是否是*最佳解决方案。*

# visual-studio-2012 - 我想用MD5 Class做一些加密工作，但是找不到？

> ID：15405628
> 
> 赞同：3
> 
> 时间：2013-03-14T09:37:10.893
> 
> 标签：visual-studio-2012, windows-phone-8, md5

命名空间**System.Security.Cryptography**中只有*System.Security.Cryptography.X509Certificates* 但我想使用 *System.Security.Cryptography.MD5* 我使用 Visual Studio 2012 我想开发一个 Windows Phone 8 应用程序 你能告诉我吗为什么？？？

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:12:58.363

[您可以在Cimbalino Windows Phone Toolkit](http://cimbalino.org)中找到 MD5 实现。

只需将其添加到您的项目中（使用[NuGet](http://nuget.org/packages/Cimbalino.Phone.Toolkit)），将以下内容添加到代码文件的顶部：

```
using Cimbalino.Phone.Toolkit.Extensions; 
```

然后像这样在你的代码中使用它：

```
var myString = "this is my string data";

var myStringBytes = myString.GetBytes(); // this will get the UTF8 bytes for the string

var md5Hash = myStringBytes.ComputeMD5Hash().ToBase64String(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:49:14.920

这是因为 MD5 是“不安全的”（参见[wikipedia](http://en.wikipedia.org/wiki/MD5) .

您可以使用[M5 类](http://archive.msdn.microsoft.com/SilverlightMD5/Release/ProjectReleases.aspx?ReleaseId=5701)（我将它用于我的 wp8 项目）。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:25:45.790

Windows phone 不支持 MD5 加密，这里是一个[在 c# 中实现 md5 的好例子](http://farazmahmood.wordpress.com/projects/md5-implementation-in-c/)***

# oop - 如何在 Clojure 中创建“对象”的多个实例？

> ID：15405629
> 
> 赞同：0
> 
> 时间：2013-03-14T09:37:10.940
> 
> 标签：oop, clojure

我可以使用哪些 Clojure 方法在一个对象上创建多个实例，然后将其存储在 Java ArrayList 中？

我知道如何在 Java 中做到这一点，但我不确定如何在 Clojure 中继续，任何帮助/指针将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:30:38.777

看看[http://clojure.org/java_interop](http://clojure.org/java_interop)

```
(doto (new java.util.ArrayList) 
    (.add (new Object)) 
    (.add (new Object))) 
```

返回`#<ArrayList [java.lang.Object@5ae7fa2, java.lang.Object@33d6798]>`

在 clojure 中创建新对象有两种形式。

```
(Classname. args*)
(new Classname args*) 
```

所以这里是一个简单的例子，如何在 clojure 中创建 java 对象。首先它在Java中的外观：

```
Thread thread = new Thread("Hi there"); 
```

Clojure

```
; return instance of java.lang.Thread class
(new Thread "Hi there") 
```

或其他方式

```
(Thread. "Hi there") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:22:35.307

为什么不存储在向量中？

```
user=> (def lst (atom []))
user=> (swap! lst conj "String")
user=> (swap! lst conj 123)
user=> @lst
["String" 123] 
```

# batch-file - 批量使用 DIR 命令输出

> ID：15405631
> 
> 赞同：0
> 
> 时间：2013-03-14T09:37:11.507
> 
> 标签：batch-file, cmd, dir

我使用命令：

```
dir D:\ /b /A:D-H 
```

输出例如：

*   相片
*   壁纸
*   我的个人资料

和..我想在这个文件夹上设置varialeble：

* * *

设置 SOMEFOLDER=folder1

* * *

设置 SOMEFOLDER2=文件夹2

等等。。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:13:00.887

您可以将以下内容用于与文件夹位于同一目录中的批处理文件：

```
@echo off
setlocal enabledelayedexpansion
set num=0
for /d %%i in (*) do set /a num+=1&set SOMEFOLDER!num!=%%i
echo SOMEFOLDER1 = %SOMEFOLDER1%
echo SOMEFOLDER2 = %SOMEFOLDER2%
pause 
```

如果您需要不同目录中的批处理文件或想要更改某些选项，请改用：

```
@echo off
setlocal enabledelayedexpansion
set num=0
for /f "tokens=*" %%i in ('dir D:\ /b /a:D-H') do set /a num+=1&set SOMEFOLDER!num!=%%i
echo SOMEFOLDER1 = %SOMEFOLDER1%
echo SOMEFOLDER2 = %SOMEFOLDER2%
pause 
```

# paypal - Paypal REST API 自适应/多次付款（更改收款人）

> ID：15405632
> 
> 赞同：20
> 
> 时间：2013-03-14T09:37:11.683
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

我刚刚开始研究 Paypal 的[REST api](https://developer.paypal.com/webapps/developer/docs/api/)。我似乎看不到的一件事是功能 paypal 调用[Adaptive Payments](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/gs_AdaptivePayments)。这允许我使用我的开发者帐户注册我的应用程序，但不参与实际付款。例如，我的应用程序允许我的用户接受他们通过我的应用程序销售的服务的付款。

我已经通过 Paypals REST API 文档。我已经弄清楚如何完成付款，但所有交易都会发送到我的开发者贝宝帐户。我找不到可以更改收款人详细信息（即卖方）的地方，以允许将付款发送到不同的贝宝帐户。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-14T10:12:54.613

好的，经过一番广泛的谷歌搜索后，我设法在[这里找到了答案](http://whyidentity.blogspot.co.uk/2013/03/under-hood-restful-payments-api.html)

> 这种通用模型使我们能够在未来轻松添加对各种支付模型（并行、链式等）的支持。收款人可以是一种融资工具（如信用卡/借记卡）或 PayPal 账户（钱包）本身。如果收款人与付款服务商不同（在当前版本中，我们仅支持收款人与服务商相同的情况），则可以明确设置收款人，因此目前不需要。

所以看起来收款人刚刚添加到交易数组中，但截至本答案发布之日，目前尚未实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-13T01:22:23.383

自 2017 年 1 月 3 日起，PayPal 现在增加了将收款人设置为您希望的任何人的功能。

注意下面的新`payee`对象：

```
{
    'intent':'sale',
    'redirect_urls':{
        'return_url':'http://localhost:3000/process',
        'cancel_url':'http://localhost:3000/cancel'
    },
    'payer':{
        'payment_method':'paypal'
    },
    'transactions':[{
        'amount':{
            'total':'10',
            'currency':'USD'
        },
        'payee':{
            'email': 'payee@test.com'
        },
        'description':'My amazing product'
    }]
} 
```

但是，似乎没有能力拥有多个收款人。

此处的附加信息：[https ://devblog.paypal.com/setting-payee/](https://devblog.paypal.com/setting-payee/)

# javascript - js2-mode.el 编译错误

> ID：15405635
> 
> 赞同：1
> 
> 时间：2013-03-14T09:37:22.377
> 
> 标签：javascript, emacs, elisp, emacs23, js2-mode

在 emacs 中`js2-mode.el`使用命令编译时出现错误。`byte-compile-file`

```
js2-mode.el:6778:21:Error: Lisp nesting exceeds `max-lisp-eval-depth' 
```

我该如何摆脱这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:37:29.660

您可以尝试增加`max-lisp-eval-depth`：它通常足够大，但字节编译有时会递归得相当深。所以试试`M-: (setq max-lisp-eval-depth (* max-lisp-eval-depth 2)) RET`。如果这不能解决问题，则可能存在一些更严重的问题，例如无限递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:28:36.853

这一直是.`byte-compile-file`和一些旧版本的常见问题`js2-mode`。据我所知，它已经修复了一段时间，并且 emacsmirror 的存储库包含修复。

查看您是否在某处安装了旧版本`js2-mode`，以及是否可能在字节编译期间加载。

# python - Python 的 argparse 以 prog 和版本字符串格式显示程序的版本

> ID：15405636
> 
> 赞同：51
> 
> 时间：2013-03-14T09:37:22.800
> 
> 标签：python, version, argparse

在 argparse 中指定程序名称和版本信息的首选方法是什么？

```
__version_info__ = ('2013','03','14')
__version__ = '-'.join(__version_info__)
...
parser.add_argument('-V', '--version', action='version', version="%(prog)s ("+__version__+")")

```

*   [http://argparse.googlecode.com/svn/trunk/doc/ArgumentParser.html#prog](http://argparse.googlecode.com/svn/trunk/doc/ArgumentParser.html#prog)
*   [http://pymotw.com/2/argparse/](http://pymotw.com/2/argparse/)
*   [http://www.python.org/dev/peps/pep-0386/](http://www.python.org/dev/peps/pep-0386/)
*   [http://www.python.org/dev/peps/pep-0396/](http://www.python.org/dev/peps/pep-0396/)
*   [http://www.python.org/dev/peps/pep-3001/](http://www.python.org/dev/peps/pep-3001/)

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-14T10:25:43.890

是的，这是公认的方式。来自[http://docs.python.org/dev/library/argparse.html#action](http://docs.python.org/dev/library/argparse.html#action)：

```
>>> parser.add_argument('--version', action='version', version='%(prog)s 2.0') 
```

您当然应该以标准方式将版本号嵌入包中：[Standard way to embed version into python package?](https://stackoverflow.com/questions/458550/standard-way-to-embed-version-into-python-package)

如果您遵循该方法，则您有一个`__version__`变量：

```
from _version import __version__
parser.add_argument('--version', action='version',
                    version='%(prog)s {version}'.format(version=__version__)) 
```

例如，这是在[https://pypi.python.org/pypi/commando/0.3.2a](https://pypi.python.org/pypi/commando/0.3.2a)演示的方法：

> ```
> parser.add_argument('-v', '--version', action='version', version='%(prog)s ' + __version__) 
> ```

# html - 一个包装可调整大小的水平列表，HTML

> ID：15405638
> 
> 赞同：1
> 
> 时间：2013-03-14T09:37:31.393
> 
> 标签：html, css, resize, html-lists, horizontallist

![在此处输入图像描述](../Images/dada09059e3a2d9611adcefb474731a8.png)

我正在尝试在 HTML 中创建一个可调整大小的水平列表，并具有一些相当具体的行为。但是，我不确定实施它的最佳方式。

我有一个固定宽度项目（div，红色）的列表，我想用它来填充所有分配的水平空间；均匀分布以填补空白。但是，在无法将所有项目都放在水平行中的较窄屏幕上，我希望形成另一行来包含其余项目。这将类似于自动换行，但如果空间允许，项目将水平均匀分布。

看起来可能有一个简单的解决方案，但这个问题对谷歌来说有点太复杂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:49:19.600

我认为您会为将项目推离线的居中而苦苦挣扎，但对于其余部分，您可以执行以下操作：

```
#main
{
    width: 100%;
    background-color: blue;
    float: left;
}

.redDiv {
    width: 16%
    background-color: red;
    height: 150px;
    margin: 2%;
    float: left; 
```

}

鉴于此 HTML 结构：

```
<div id="main">
    <div class="redDiv"></div>
    <div class="redDiv"></div>
    <div class="redDiv"></div>
    <div class="redDiv"></div>
    <div class="redDiv"></div>
    <div class="redDiv"></div>
</div> 
```

**演示：http:** [//jsfiddle.net/QwQSd/1](http://jsfiddle.net/QwQSd/1)

# python - 分配前引用的局部变量“服务器”

> ID：15405643
> 
> 赞同：4
> 
> 时间：2013-03-14T09:37:45.787
> 
> 标签：python, list, dictionary

```
def websvc(currency):
    db = MySQLdb.connect("localhost", "root", "aqw", "PFE_Project")
    cursor = db.cursor()
    sql = "SELECT * FROM myform_composantsserveur"

    try:
        cursor.execute(sql)
        results = cursor.fetchall()
        currency_in = currency
        req = urllib2.urlopen('http://rate-exchange.appspot.com/currency?from=USD&to=%s') % (currency_in) 
        req1 = req.read()
        rate = int(req1['rate'])
        # rate = 0.77112893299999996

        servers = []
        for row in results:
            result = {} 
            result['1'] = row[1]
            result['3'] = int(row[2])
            result['4'] = int(row[3])
            result['5'] = int(row[4])
            result['6'] = row[5]
            result['7'] = int(row[6])
            result['8'] = row[7]
            result['9'] = row[8]
            p = rate * calculations_metric (int(row[2]), int(row[3]), int(row[4]), int(row[6]), row[7])
            result['2'] = p
            keys = result.keys()
            keys.sort()
            servers.append(result)

    except:
        print "Error: unable to fetch data"
    db.close()
    return servers 
```

但是我在编译代码时遇到了这个错误：

> 异常类型：UnboundLocalError
> 
> 异常值：分配前引用的局部变量“服务器”
> 
> 异常位置：/home/amine/PFE Directory/mysite1/myform/Webservice.py in websvc，第 43 行 Python 可执行文件：/usr/bin/python2.7

在我在此函数中添加参数之前，此代码正常工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T10:11:09.613

您的代码无法访问服务器初始化，这就是您收到错误的原因。只需在 try..except 之前移动初始化。改变这种方式：

```
def websvc(currency):
    db = MySQLdb.connect("localhost", "root", "aqw", "PFE_Project")
    cursor = db.cursor()
    sql = "SELECT * FROM myform_composantsserveur"
    servers = []

    try:
        cursor.execute(sql)
        results = cursor.fetchall()
        currency_in = currency
        req = urllib2.urlopen('http://rate-exchange.appspot.com/currency?from=USD&to=%s') % (currency_in) 
        req1 = req.read()
        rate = int(req1['rate'])
        # rate = 0.77112893299999996

        for row in results:
            result = {} 
            result['1'] = row[1]
            result['3'] = int(row[2])
            result['4'] = int(row[3])
            result['5'] = int(row[4])
            result['6'] = row[5]
            result['7'] = int(row[6])
            result['8'] = row[7]
            result['9'] = row[8]
            p = rate * calculations_metric (int(row[2]), int(row[3]), int(row[4]), int(row[6]), row[7])
            result['2'] = p
            keys = result.keys()
            keys.sort()
            servers.append(result)

    except:
        print "Error: unable to fetch data"
    db.close()
    return servers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:12:09.363

我现在看到了问题，您已经对其进行了编辑以添加缺失的部分。它是异常处理程序。

`try`如果你之前和之后有错误`servers=[]`会跳转到except子句，那么看看就`return servers`失败了。

您可能想使用 a `list()`，而不是使用 a`dict()`来模拟列表...

# java - neo4j：java 错误：找不到 NodeImpl#0 的属性

> ID：15405644
> 
> 赞同：1
> 
> 时间：2013-03-14T09:37:51.637
> 
> 标签：java, runtime-error, neo4j, node-neo4j

我正在用 java 编写 neo4j 演示代码。以下是我创建节点、索引它们并打印它们的属性的代码的一部分。

```
String NODE_KEY = "UserID";
String NODE_PROPERTIES = "UserProperties";

createAndIndexUser(String userID){
    Node node = graphDB.createNode();
    node.setProperty(NODE_KEY, nodeID);
    neo4jGraph.nodeIndex.add(node, NODE_KEY, userID);
    return node;
}

for(int i=0 ; i<100 ; i++){
    String userID = "userID_"+i;
    Node node = createAndIndexUser(userID);
    node.setProperty(NODE_PROPERTIES, strNodeProperties);
}

Iterable<Node> allNodes = GlobalGraphOperations.at(graphDB).getAllNodes();

for(Node n: allNodes){
    System.out.println("n.getPropertyKeys: "+n.getPropertyKeys());
    System.out.println(n.getProperty(NODE_KEY));
} 
```

当我执行这段代码时，第一个 println 的输出是：

```
n.getPropertyKeys: [] 
```

而对于第二个 println 我收到一个错误：

```
Exception in thread "main" org.neo4j.graphdb.NotFoundException: 'UserID' property not found for NodeImpl#0. 
```

我在哪里做错了什么？为什么它不打印所有属性键`n.getProperty(NODE_KEY)`？

有没有其他方法可以获取所有节点并打印它们的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:49:53.477

除了您添加的节点之外，您的图表中还有哪些其他节点`createAndIndexUser`？请记住，neo4j 图总是有一个 ID 为 0 的虚拟节点。尝试将循环修改为：

```
for(Node n: allNodes){
    System.out.println("n.getPropertyKeys: "+n.getPropertyKeys());
    if(n.hasProperty(NODE_KEY))
        System.out.println(n.getProperty(NODE_KEY));
    else
        System.out.println("Node " + n.getId() + " does not contain property " + NODE_KEY);
} 
```

事实上，如果你真的想确定，你可以保留一个上面创建的节点列表，并检查你从`getAllNodes()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:59:44.563

它是参考节点，如果您不使用它，可以将其删除。

n.getProperty(NODE_KEY,null) 也非常有用。

# java - 如何在我的应用程序和服务器之间同步时间？

> ID：15405647
> 
> 赞同：0
> 
> 时间：2013-03-14T09:37:56.590
> 
> 标签：java, android, random

下面的代码每 30 秒生成 7 个随机数字。

```
public class MainActivity extends Activity {

Timer timeoutTimer;
final Random myRandom = new Random();
GenerateTask genTask = new GenerateTask();
static String RAN_TEXT = "text";

class GenerateTask extends TimerTask {
    boolean started = false;
    public void run() {
        if (started) {
            System.out.println("generating");
            final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);

           RAN_TEXT = "";

            for(int k=0;k<7;k++){
                RAN_TEXT += myRandom.nextInt(10) + " ";
            }
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    textGenerateNumber.setText(RAN_TEXT);
                }
            });
        }
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     Button buttonGenerate = (Button)findViewById(R.id.generateme);

    buttonGenerate.setOnClickListener(new OnClickListener(){

         @Override
         public void onClick(View v) {
             System.out.println("click");
             if (!genTask.started) {
                 genTask.started=true;
                 timeoutTimer = new Timer();
                 timeoutTimer.scheduleAtFixedRate(genTask, 0, 30000);
             } else {
                 genTask.started=false;
                 timeoutTimer.cancel();
             }
         }
     });  
 }
} 
```

我将申请时间同步到服务器：

```
http://server10.instaforex.com:2012/TimeService/TimeService.svc?wsdl 
```

如何将服务器时间同步到我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:43:30.543

为此，您必须使用 Http 连接

见下面的代码

```
public long getCurrentTimeFromServer() {

    long serverTime = 0;
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(
            "your url");
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        // Examine the response status
        // Get hold of the response entity
        HttpEntity entity = response.getEntity();
        // If the response does not enclose an entity, there is no need
        // to worry about connection release

        if (entity != null) {

            // A Simple JSON Response Read
            InputStream instream = entity.getContent();
            String result = Utilities.convertinputStreamToString(instream);
            serverTime = Long.parseLong(result);
            // now you have the string representation of the HTML request
            instream.close();
        }

    } catch (Exception e) {
        Log.e("tag", "error", e);
    }

    return serverTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:44:44.217

为了实现您的目标，您首先需要从服务器获取正确的时间。我认为在服务器端，你有 wsdl，所以在你的客户端（你的应用程序），你需要创建一个进程来连接到服务器并获取时间。

关于如何做到这一点，请在此处查看：http: [//www.ibm.com/developerworks/webservices/library/ws-android/index.html](http://www.ibm.com/developerworks/webservices/library/ws-android/index.html)

之后，您将在您的应用程序中本地拥有正确的时间，并且您将能够利用该时间做任何事情。

# ios - -ObjC 链接器标志 - 尝试将其添加到“其他链接器标志”时出现错误

> ID：15405649
> 
> 赞同：1
> 
> 时间：2013-03-14T09:37:58.080
> 
> 标签：ios, objective-c, xcode, cocoa, google-analytics

我正在尝试将 facebook SDK 3.2 添加到我的应用程序中，但是在添加 -ObjC 链接器标志（如他们的视频中所述）后，我收到很多重复警告，并且我无法运行应用程序并出现错误：

```
duplicate symbol _OBJC_IVAR_$_GAI.defaultTracker_ in:
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics.a(GAI.o)
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics_debug.a(GAI.o)
duplicate symbol _OBJC_IVAR_$_GAI.dispatcher_ in:
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics.a(GAI.o)
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics_debug.a(GAI.o)
duplicate symbol _kGAIProduct in:
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics.a(GAI.o)
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics_debug.a(GAI.o)
duplicate symbol _kGAIVersion in:
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics.a(GAI.o)
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics_debug.a(GAI.o)
duplicate symbol _OBJC_IVAR_$_GAI.trackUncaughtExceptions_ in:
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics.a(GAI.o)
    /Users/gool/proj/Frameworks/GANT/libGoogleAnalytics_debug.a(GAI.o)

        /Users/gool/Documents/FacebookSDK/FacebookSDK.framework/FacebookSDK(Facebook.o)
    ld: 172 duplicate symbols for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:40:39.023

删除 libGoogleAnalytics_debug.a 和 facebook old sdk 解决了我的问题

# youtube-api - YouTube API Player getClickToPlayButton() 函数返回的拇指未在点击时播放视频

> ID：15405661
> 
> 赞同：0
> 
> 时间：2013-03-14T09:38:37.070
> 
> 标签：youtube-api

YouTube API 的 getClickToPlayButton() 函数返回的 DisplayObject 现在不播放视频。

我正在使用带有自定义 chrome 的无 Chrome 的 YouTube API 播放器。我的 YouTube 播放列表应用程序是不同的 SWF，它加载自定义 chrome 播放器 swf 并使用 YT 对象创建拇指 getClickToPlayButton()。

我也尝试过在单个 SWF 上仅使用 YouTube 无铬播放器和 getClickToPlayButton() 函数提供的简单拇指，但它不会在拇指点击时播放视频。

# python - Python - 从位置开始打印文本（html）

> ID：15405662
> 
> 赞同：1
> 
> 时间：2013-03-14T09:38:38.443
> 
> 标签：python

我正在尝试从 html 文本中搜索一个单词（即元）并从该单词的位置开始打印以下 20 个字符。

以下代码不返回任何内容：

```
import os,sys,urllib.request
url = "http://www.google.com/"
req = urllib.request.Request(url)
response = urllib.request.urlopen(req)
html = response.read()
html2 = html.decode("windows-1252")
b2='meta'
position=html2.index(b2)
if b2 in html2:
    print(html2[position:20]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:40:54.667

只需将您的代码更改为：

```
print(html2[position: position + 20]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:41:17.120

`print(html2[position : position + 20])`在最后一行尝试。

# java - 通过 hector API 在 cassandra 中为用户定义的查询分页

> ID：15405666
> 
> 赞同：1
> 
> 时间：2013-03-14T09:38:57.150
> 
> 标签：java, cassandra

是否可以通过用户定义查询的 hector API 在 cassandra 中实现分页。

如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:15:03.577

我已经添加了一个基本方法，其余的事情你必须处理。在这里，如您所见，我们将页面大小定义为 100 行，每行有 10 列。现在，在第一次迭代之后，您必须了解如何存储最后一个键值，这将是迭代的起点。

```
 int row_count = 100;

    RangeSlicesQuery<UUID, String, Long> rangeSlicesQuery = HFactory
        .createRangeSlicesQuery(keyspace, UUIDSerializer.get(), StringSerializer.get(), LongSerializer.get())
        .setColumnFamily("Column Family")
        .setRange(null, null, false, 10)
        .setRowCount(row_count);

    UUID last_key = null;

    while (true) {
        rangeSlicesQuery.setKeys(last_key, null);
        System.out.println(" > " + last_key);

        QueryResult<OrderedRows<UUID, String, Long>> result = rangeSlicesQuery.execute();
        OrderedRows<UUID, String, Long> rows = result.get();
        Iterator<Row<UUID, String, Long>> rowsIterator = rows.iterator();

        if (last_key != null && rowsIterator != null) rowsIterator.next();   

        while (rowsIterator.hasNext()) {
          Row<UUID, String, Long> row = rowsIterator.next();
          last_key = row.getKey();

          if (row.getColumnSlice().getColumns().isEmpty()) {
            continue;
          }

        }

    }
} 
```

# c# - MidpointRounding 的 Decimal.Round 默认设置

> ID：15405667
> 
> 赞同：22
> 
> 时间：2013-03-14T09:38:59.557
> 
> 标签：c#, .net, rounding

以下适用：

```
var rounded = Decimal.Round(7.635m, 2);
//rounded: 7.63 
```

对我来说，这是错误和意想不到的行为。我会假设*rounded*的值为**7.64**。

为此，我可以这样做：

```
var rounded = Decimal.Round(7.635m, 2, MidpointRounding.AwayFromZero);
//rounded: 7.64 
```

这怎么可能**不是**的默认行为`Decimal.Round`？这有什么好的理由吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T09:40:28.083

> 这怎么可能不是 Decimal.Round 的默认行为？这有什么好的理由吗？

如果您查看[Decimal.Round Method (Decimal)的文档](http://msdn.microsoft.com/en-us/library/k4e2bye2.aspx)

> 此方法的**行为遵循 IEEE 标准 754 第 4 节**。这种四舍五入有时被称为*四舍五入*或 *银行家四舍五入*。它可以最大限度地减少因在单个方向上持续舍入中点值而导致的舍入误差。它相当于调用带有 MidpointRounding.ToEven 模式参数的 Round(Decimal, MidpointRounding) 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:41:26.563

从[`Math.Round(Decimal, Int32)`](http://msdn.microsoft.com/en-us/library/vstudio/zy06z30k%28v=vs.90%29.aspx)方法

> 此方法的行为遵循 IEEE 标准 754 第 4 节。这种四舍五入有时称为四舍五入或银行家四舍五入。它可以最大限度地减少因在单个方向上持续舍入中点值而导致的舍入误差。
> 
> 此方法等效于调用带有 MidpointRounding.ToEven 模式参数的 Round 方法。如果 d 中小数点右侧有一个非零数字且其值为 5，则小数点位置的数字如果是奇数则四舍五入，如果是偶数则保持不变。如果 d 的小数位数少于小数，则 d 原样返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:49:34.157

原因是他们实施了一种遵循 IEEE 标准 754 第 4 节的方法。这称为四舍五入到最接近或有时是银行家四舍五入。

这只是进行舍入的众多方法之一，他们选择了这个。见：[http ://en.wikipedia.org/wiki/Bankers_rounding](http://en.wikipedia.org/wiki/Bankers_rounding)

更多信息：[为什么 .NET 使用银行家的舍入作为默认值？](https://stackoverflow.com/questions/311696/why-does-net-use-bankers-rounding-as-default)

# python - Run unittest in a python module in PyCharm/IntelliJ IDEA12?

> ID：15405673
> 
> 赞同：1
> 
> 时间：2013-03-14T09:39:06.580
> 
> 标签：python, unit-testing, intellij-idea, pycharm

In `testsuite/__init__.py`, I write this:

```
import unittest
def suite():
    from my_module.testsuite import (
    shell_command,
    shell_command_on_jinja,
    workflow
    )
    suite = unittest.TestSuite()
    suite.addTest(shell_command.suite())
    suite.addTest(shell_command_on_jinja.suite())
    suite.addTest(workflow.suite())

    return suite 
```

In terminal, I can execute the test suite like this:

```
python3 -m unittest testsuite.suite 
```

However, I don't know how to config the test for Pycharm/InteliJ. I add a configuration under `Python's test` and set `Test` to `Function`, `Script` to `my_module/testsuite/__init__.py`, and `Function` to `suite`and then run it. But it doesn't work. Does anyone have ideas about this? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T02:56:46.713

It seems that PyCharm doesn't support this now. Please check the following thread.

[http://forum.jetbrains.com/thread/PyCharm-1116](http://forum.jetbrains.com/thread/PyCharm-1116)

# ios - 视图控制器之间的对象共享

> ID：15405676
> 
> 赞同：2
> 
> 时间：2013-03-14T09:39:16.300
> 
> 标签：ios, objective-c

我想知道如何在几个视图控制器之间共享一个 NSDictionary 对象，这些视图控制器基本上是我的应用程序中的选项卡。

我尝试使用一个协议，比如在 Java 中，这样我就可以转换为协议并访问该属性。这似乎行不通。

我还查看了 [如何在多个视图控制器之间全局共享数据的类似问题](https://stackoverflow.com/questions/3989491/how-to-share-data-globally-among-multiple-view-controllers)

但我观察到 appDelegate 方法并不安全，可能会导致内存泄漏。

同样，将 A 类注入 B 类也会产生同样的问题。

那么任何人都可以建议我在我的代码中学习或实施的任何方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:43:38.673

您可以使用单例类来共享数据
检查这个[单例类](http://www.galloway.me.uk/tutorials/singleton-classes/)

`MyManger.h`

```
#import <foundation/Foundation.h>

@interface MyManager : NSObject {
NSMutableDictionary *_dict
}

@property (nonatomic, retain) NSMutableDictionary *dict;

 + (id)sharedManager;  
@end 
```

`MyManger.m`

```
#import "MyManager.h"

static MyManager *sharedMyManager = nil;

 @implementation MyManager

 @synthesize dict = _dict;

#pragma mark Singleton Methods  

+ (id)sharedManager {
 @synchronized(self) {
    if(sharedMyManager == nil)
      sharedMyManager = [[super allocWithZone:NULL] init];
 }
return sharedMyManager;
} 

- (id)init {
   if (self = [super init]) {
  dict = [[NSMutableDictionary alloc] init];
   }
 return self;
} 
```

您可以像这样从任何地方访问您的字典

```
 [MyManager sharedManager].dict 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:50:08.677

如果您只想共享字典，为什么不使用辅助类的类方法。

```
+(NSDictionary *)shareMethod
{
return dict;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:18:53.163

我找到了出路。由于我希望共享字典，因此我在协议中声明了一个方法

```
- (void) setSingleHouse:(NSDictionary*) singleHouse; 
```

在我的每个控制器中，我以适当的方式实现了该方法。因此，我现在能够与他们分享。

我还发现我之前以错误的方式进行了转换，即（@protocol（协议名称））。现在将其更改为 NSObject 。

抱歉大惊小怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:51:33.387

我建议您不要在 appDelegate 实例中使用属性。这种模式不会提高代码的可重用性。

基本上，您共享的 NSDictionnary 是您的模型。因此，如果您希望您的代码遵循 MVC 设计部分，您应该创建一个具有共享实例的类，该实例将在公共属性中包含您的 NDDictionnary。

这在[这篇文章中得到了很好的解释](http://www.daveoncode.com/2011/12/19/fundamental-ios-design-patterns-sharedinstance-singleton-objective-c/)

这样，您将通过以下方式访问共享的 NSDictionnary：

```
NSDictionary* sharedDictionnary = [MyModel sharedInstance].sharedDictionary; 
```

# javascript - 在移动设备中，哪个更快：包括一个额外的 CSS 文件或在 JavaScript 中创建一个样式元素？

> ID：15405677
> 
> 赞同：0
> 
> 时间：2013-03-14T09:39:20.923
> 
> 标签：javascript, html, css, performance, mobile

如果我有一个包含一些 JavaScript 的 HTML 页面，例如：

```
<script type="text/javascript" src="http://example.com/code.js" async></script> 
```

我想添加一些 CSS，以下 2 个选项中哪一个更快，性能方面？

**选项1**

（更多“网络重磅”）将 CSS 包含在单独的内联标记中，例如：

`<link rel="stylesheet" type="text/css" href="http://www.example.com/style.css">`

**或者**

**选项 2**

（更多“JavaScript Execution Heavy”，因为它需要 DOM 操作）从包含的 JavaScript 文件内部将 CSS 注入 DOM，例如（取自：[https://stackoverflow.com/a/707580/1785003]](https://stackoverflow.com/a/707580/1785003]) [1](https://stackoverflow.com/a/707580/1785003)）：

> ```
> var css = document.createElement("style");
> var css = "text/css";
> css.innerHTML = "strong { color: red }";
> document.body.appendChild(css); 
> ```

第二个选项从页面中删除网络请求，但需要 DOM 操作，这在移动设备浏览器中可能成本很高。

那么哪个更好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:48:49.067

我认为移动设备和普通浏览器在加载和缓存页面的方式上没有太大区别，所以我会一视同仁。

在你的 JavaScript 中使用 CSS 将成为维护的噩梦。可能不值得任何微小的（如果有的话）优化收益。正如 Pekka 在初始加载后指出的那样，它将被缓存。

您最好先针对其他性能优化。像 Minify CSS 和 javascripts、CSS sprites 等。使用诸如[yslow](http://yslow.org/)之类的工具来帮助显示可以在哪里进行性能优化。

此外，大多数浏览器可以向同一主机发出至少 4 个并发请求，以便可以同时下载 CSS 和 Javascript 、 HTML。[看这里](http://www.stevesouders.com/blog/2010/07/12/mobile-cache-file-sizes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:56:50.877

从性能 POV 回答：

使用**CSS**是一个更好的选择。

**原因**
性能不仅仅以网络带宽消耗来衡量。JS 会阻止页面的呈现，直到它们完全下载。

（**注：** html 5 现在支持

`<script type="text/javascript" src="http://example.com/code.js" async></script>`

这可以释放并行加载其余标记。）

第一次获取 css 后，**它既不会被下载也不会被执行**（与 javascript 相比）。这对回头客来说是一种享受。

**解决方案**
使用外部 css 并将其保持在语义的顶部（`<head>`最好在部分中）。使用外部js并保持在页面底部（`</body>`标签附近）

**背景：**
曾与雅虎合作过！并坚持他们的[最佳前端实践](http://developer.yahoo.com/performance/rules.html)。

*   将样式表放在顶部
*   将脚本放在底部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:46:52.813

CSS 文件一旦被下载和处理，它的渲染速度肯定会更快，因为浏览器已经为此进行了优化。通过 JS 应用意味着您需要等待文档加载，然后查找元素、应用样式，然后让浏览器发挥作用。

根据我的经验，添加一个 CSS 文件来解决动态行为远远超过了由于可维护性（更改某些内容是多么容易）而导致的任何“速度”下降，并且因为您实际上可以在不编辑代码部分的情况下重新设置页面样式，这可以破坏事物（例如，如果您更改了生成样式的 JS 并忘记了引用，那么您破坏了页面，并丢失了该页面的所有 JS）。

对于非动态行为，通过 JS 进行样式设置的唯一情况是它总共只有几行，即使这样我也很谨慎。

# javascript - 更改 JavaScript 函数的定义

> ID：15405683
> 
> 赞同：0
> 
> 时间：2013-03-14T09:39:31.077
> 
> 标签：javascript

假设你有一个函数如下：

```
function chk() {
    var valid = true;
    if(document.getElementById("bob")) {
        if(document.getElementById("bob").value == "") {
            valid = false;
            writeErrorMessage("bob", "Field 'Bob' is mandatory");
        }
    }
    ... //There may be a lot more than just this field, depending on the clients configuration.
    return valid;
} 
```

该函数由核心代码输出。现在有一个客户来了，说他们希望字段“x”是强制性的。在查看核心代码时，我们可以看到默认情况下该字段不能设为必填，但是我们之前所做的是如下所示：

```
var chk2 = chk;
chk = function() {
    var valid = true;
    if(document.getElementById("x")) {
        if(document.getElementById("x").value == "") {
            valid = false;
            writeErrorMessage("x", "Field 'x' is mandatory");
        }
    }
    if(valid) valid = chk2();
    return valid;
} 
```

这里的问题是，如果 valid 为 false，则它不会运行原始 chk 函数 (chk2)，因此最初验证的那些字段的错误消息将不会显示。

我想做的基本上是编辑这个 chk 函数的工作原理——在最后一行之前添加几行，the `return valid`，这样它就可以验证更多的字段。问题是整个函数都是由核心代码输出的，所以除了错误消息和验证的字段之外，这是我们无法控制的。如果默认情况下无法将某个字段设为必填字段，则它将永远不会为该字段输出此验证码。

请记住，`return valid`保证该行始终存在，有没有人知道我可以采用函数体，替换它的特定部分然后将新字符串设置为该函数的新体的方法？这似乎是 JS 应该可以实现的，但我无法找到实现这一目标的方法。

提前致谢。问候，理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:49:53.513

重新阅读您的原始问题后如何：

```
//store the original
var old_chk=chk;

// create a new version that first runs the original
chk=function(){
    // run the original validation
    var valid=old_chk();       

    //do your additional tests here
    var el=document.getElementById('x');
    if(el &&!el.value){
       valid=false;
       ...
    }    
return valid
} 
```

# jquery - 在 .load() 中传递变量

> ID：15405685
> 
> 赞同：0
> 
> 时间：2013-03-14T09:39:33.920
> 
> 标签：jquery

我有一个页面，其中包含许多名为的 div `.comment_holder`，每个 div 都包含不同的 ID 号，例如

```
<div class="comment_holder" id="123"></div>
<div class="comment_holder" id="345"></div> 
```

我想将 id 传递到我正在加载的页面中，该页面`.comment_holder`在执行操作时会附加 div。这是我正在尝试的：

```
$('.comment_holder').load('/pages/includes/wall.php', { 
    var wlid = $(this).attr("id");
    wl_id: wlid; 
}); 
```

但我得到：`SyntaxError: missing : after property id`

我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:42:18.113

该`data`参数不是正确的对象文字。 `this`也不在对象字面量的范围内，因此遍历为每个元素调用 load 函数的元素。使用传递给函数的元素来检索 id。

```
$('.comment_holder').each(function(index, elem){
   $(elem).load('/pages/includes/wall.php', { 
        wl_id: $(elem).attr("id") 
    });
}); 
```

**类似的例子：http:** [//jsfiddle.net/qQ4Np/1/](http://jsfiddle.net/qQ4Np/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:36:27.267

或者，如果您想在页面加载时动态加载数据，则必须在循环 $.each() 中进行

```
$('.comment_holder').each( function(){ 
    var myId = $(this).attr("id");
    $(this).load('/pages/includes/wall.php', { 
        myId: myId; 
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:31:27.537

```
$('.clicker').click( function(){ 
var myId = $(this).attr("id");

$('.comment_holder').load('/pages/includes/wall.php', { 
    myId: myId; 
});}); 
```

和wall.php：

```
$myId = $_POST['myId']; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T09:43:16.900

您不能在这样的对象文字中包含 var 语句。所以只需将 id 分配给对象属性

```
$('.comment_holder').load('/pages/includes/wall.php', { 
   wl_id: $("comment_holder").attr("id")
}); 
```

但是，如果您在该类中有多个元素，那将不起作用`.comment_holder`。所以我建议使用凯文的方法并循环收集。

# css - 为什么我不能将 CSS3 列应用于此文本？

> ID：15405686
> 
> 赞同：1
> 
> 时间：2013-03-14T09:39:36.703
> 
> 标签：css, tumblr, column-count

我试图让我的文字在我的不倒翁博客上有两列。我做了一个类：

```
<style> 
.2col
{

    width: 800px;
    margin: 0 auto;
    -moz-column-count: 2;
    -moz-column-gap: 20px;
    -webkit-column-count: 2;
    -webkit-column-gap: 20px;
    text-align: justify;
    height: 300px;
}
</style> 
```

这适用于我做的一个小测试：

```
<div class="2col">
    Bunch of text
</div> 
```

你可以[在这里看到](http://inertreactants.tumblr.com/2col-test)

但是当我尝试在我的博客中将其应用于文本时，它不起作用。如果我将它应用于整个博客，它会起作用，但我只想将它应用于某些文本部分。在 tumblr 中，我正在使用：

```
<div class="2col">
    {Body}
</div> 
```

但是，它不会更改您在我的博客主页上看到的文本[（](http://inertreactants.tumblr.com/post/45281005422/test-post) lorem ipsum 文本）。{Body} 部分似乎没有任何会导致问题的东西（您可以在页面的源代码中看到 CSS 和文本。我觉得我缺少对 CSS 类的一些基本了解，因为我还没有甚至成功地尝试在文本中添加一些简单的东西，比如下划线。我希望有人能指出我正确的方向。

作为参考，我在我的博客上发布了一张我正在尝试制作的图片，但我没有足够的声誉在此处添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:49:33.150

尝试重命名您的类 - 在大多数语言和命名约定中，您不应该以整数开头。相当肯定这也适用于 CSS - 解释器很可能显然忽略了它。

# c++ - C++，避免RTTI和访问者模式，有可能吗？

> ID：15405688
> 
> 赞同：3
> 
> 时间：2013-03-14T09:39:53.243
> 
> 标签：c++, design-patterns, rtti, visitor-pattern

我一直在查看一些相关的线程，但仍然没有找到任何可以回答以下问题的内容。

假设我有一个形成树结构的类层次结构（例如小部件、HTML 元素）。当我遍历树或根据其 ID 查找具体元素时，我得到一个指向基类的指针（树算法只知道基类）。

然后，根据类型（基类有一个标识类型的字段），我执行 dynamic_cast 以获得指向具体类型的指针。我一直在想办法避免这种情况。我唯一想到的是访问者模式。但是不太喜欢这种模式。

是否有其他方法/模式来搜索/迭代节点并在不使用 RTTI 或访问者模式的情况下获取指向具体类的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:27:37.427

这实际上取决于访问者模式的实现。使用 dynamic_cast<> 是一种方法，另一种方法可能是通过定义可以在所有子类中实现的虚拟 GetType() 函数来使用手工制作的 RTTI。根据该功能的结果，您可以做不同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:07:29.377

你的方法听起来不是一个好主意。主要是因为您必须在运行时之前完成所有考虑。

您想要做的基本上是列出和访问对象的特定属性。使用动态转换，这是可能的，但很难做到优雅——因为您必须提前编写大量开关并硬编码每种可能性，以便您可以在运行时使用它。

我像往常一样推荐的解决方案是 Qt 框架。您可以在运行时列出每个对象的属性，通过名称字符串或索引访问特定属性，甚至可以在运行时附加代码中不存在的属性。所有这一切都与类型无关，您无需知道对象的类型即可知道其属性，最后 - Qt`qobject_cast`为 QObject 派生类提供了明显更快的速度，而不是`dynamic_cast`.

元系统允许您了解类名、基类名、方法、枚举、构造函数和几乎所有内容，因此除了属性之外，它还是访问实例可用的所有功能的良好来源。

# python - Tkinter 之后会造成资源浪费吗？

> ID：15405694
> 
> 赞同：0
> 
> 时间：2013-03-14T09:40:29.597
> 
> 标签：python, tkinter

我在我的 tkinter 代码中使用了 'after' 函数，如下所示：

```
def task():
     #some work
     root.after(1000, task)
root.after(1000, task) 
```

我想知道 task() 函数在到达 root.after() 行后是否会保留在那里，或者它会在到达该行后结束。

我是 python 和 tkinter 的新手，所以对发生了什么有点好奇。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:57:47.953

它不会，因为`task()`调用`Tk.after()`会在内部注册回调并且不会导致延迟。之后`task()`就存在了。

例如（Python3）：

```
import tkinter as tk

root = tk.Tk()

TIMEOUT = 3000
i = 0
def task():
    global i
    i += 1
    print('In task(), i={}'.format(i))
    root.after(TIMEOUT, task)
    print('Called root.after() and exiting task()')

root.after(TIMEOUT, task)
root.mainloop() 
```

输出是：

```
In task(), i=1
Called root.after() and exiting task()
In task(), i=2
Called root.after() and exiting task()
In task(), i=3
Called root.after() and exiting task() 
```

如果您运行代码，您会注意到这`'Called root.after() and exiting task()'`会立即发生。

# c# - 如何将多个列表与自定义序列组合

> ID：15405701
> 
> 赞同：5
> 
> 时间：2013-03-14T09:40:47.983
> 
> 标签：c#, algorithm, list

不确定是否有描述此问题的算法，但是否有任何优雅的方法可以将列表组合成自定义序列。例如：

```
List<string> list1 = new List<string>();
List<string> list2 = new List<string>();
List<string> list3 = new List<string>();

list1.Add("a");
list1.Add("b");
list1.Add("c");

list2.Add("d");
list2.Add("e");
list2.Add("f");

list3.Add("g");
list3.Add("h");
list3.Add("i");

List<string> combined = new List<string>(); 
```

我希望*组合*的内容包含如下序列：

```
a //First record in list1
d //First record in list2
g //First record in list3
b //Second record in list1
e //Second record in list2
h //Second record in list3
c //Third record in list1 
f //Third record in list2 
i //Third record in list3 
```

每个列表中的记录数可能不相等。

**编辑**

当每个列表中的记录数可能不相等时，我的意思是：

```
List<string> list1 = new List<string>();
List<string> list2 = new List<string>();
List<string> list3 = new List<string>();

list1.Add("a");

list2.Add("b");
list2.Add("c");

list3.Add("d");
list3.Add("e");
list3.Add("f");

List<string> combined = new List<string>(); 
```

预期成绩：

```
a //First record in list1
b //First record in list2
d //First record in list3
c //Second record in list2
e //Second record in list3
f //Third record in list3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:46:25.910

不知道有没有名字。合并？拼接？但是代码很简单。

```
var lists = new [] { list1, list2, list3 };
var combined = new List<string>(lists.Sum(l => l.Count));    

for (var i = 0; i < lists.Max(l => l.Count); i++)
{
   foreach (var list in lists)
   { 
      if (i < list.Count)
          combined.Add (list[i])
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:50:11.627

```
int MaxCount = List1.Count; //Or whatever the highest list count.

            for (int i = 0; i < MaxCount; i++)
                {
                    if( list1.Count > i)
                    combined.Add(list1[i]);

                    if( list2.Count > i)
                    combined.Add(list2[i]);

                    if( list3.Count > i)
                    combined.Add(list3[i]);
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:43:54.253

你可以使用这个通用`Merge<T>`函数：

```
 public static IEnumerable<T> Merge<T>(params List<T>[] lists)
    {
        var max = lists.Max(list => list.Count());

        for (int i = 0; i < max; i++)
        {
            foreach (var list in lists)
            {
                if (i < list.Count)
                {
                    yield return list[i];
                }
            }
        }
    } 
```

示例用法：

```
var merged = Merge(list1, list2, list3).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T09:55:02.437

不幸的是，它没有内置功能。您应该循环每个列表并将其添加到新的自定义列表中。

例子：

```
List<string> result = new List<string>();
int listLength = Math.Max(list1.Count, Math.Max(list2.Count, list3.Count)); // get the largest list length
for(int index = 0; index < listLength; i++){
  if(list1.Count > index) result.Add(list1[index);
  if(list2.Count > index) result.Add(list3[index);
  if(list3.Count > index) result.Add(list3[index);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T10:00:41.900

一个快速的 LINQPad 示例：

```
void Main()
{
    List<string> list1 = new List<string>();
    List<string> list2 = new List<string>();
    List<string> list3 = new List<string>();

    list1.Add("a");
    list1.Add("b");
    list1.Add("c");

    list2.Add("d");
    list2.Add("e");
    list2.Add("f");

    list3.Add("g");
    list3.Add("h");
    list3.Add("i");

    Merge(new[] { list1, list2, list3}, (c1, c2) => c1 + c2).SelectMany(s => s).Dump();
}

IEnumerable<T> Merge<T>(IEnumerable<IEnumerable<T>> sources, Func<T, T, T> combine)
{
    return sources.Aggregate((s1, s2) => s1.Zip(s2, combine));
} 
```

结果是一个`IEnumerable<char>`，但这很简单，可以`List<string>`在必要时转换成一个。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-14T09:50:29.150

您可以使用 Concate() 或 AddRange，有关这些方法之间差异的更多信息，请参阅此[线程](https://stackoverflow.com/questions/100196/net-listt-concat-vs-addrange)

# ruby-on-rails-3 - 表单中的更改不会保存到数据库

> ID：15405703
> 
> 赞同：14
> 
> 时间：2013-03-14T09:40:53.250
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, datepicker, simple-form

我正在尝试在我的表单中添加一个日期字段。

我添加了 bootstrap-datepicker-rails gem，所有必需的 css 和 javascript。

当我在日历中选择日期并单击保存时，它不会在数据库中更新。

这是表单的代码：

```
= simple_form_for @model
  = f.input :date_last, :required => true, 
            :input_html => { data: {behaviour: "datepicker"}}, 
            :as => :string
  = f.button :submit, 'Save', :class => 'btn btn-primary' 
```

我认为这可能与格式有关，但不确定在哪里看。

**更新**

当我将默认格式更改为 yyyy-mm-dd（默认为 mm/dd/yyyy）时，它可以工作：

```
$('[data-behaviour~=datepicker]').datepicker({"format": "yyyy-mm-dd", "weekStart": 1, "autoclose": true}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-26T02:47:40.220

[我刚刚在这里](https://stackoverflow.com/a/19018373/2238268)回答了一个类似的问题，并在下面包含了我的答案：

* * *

我还需要让它工作并支持不使用以美国为中心的日期格式的多个语言环境，例如：日期格式为 dd/mm/yyyy 的 en-AU（澳大利亚）。

# 问题

Rails 期望日期格式`yyyy-mm-dd`来自浏览器，但您希望在用户的区域设置中显示日期。虽然日期控件允许您指定显示格式，但它不允许您单独指定要发送回服务器的格式。

# 解决方案

构建一个隐藏的输入字段，将正确的格式发送回您的 Rails 服务器。我使用自定义 simple_form 输入控件执行此操作，该控件构建日期选择器输入字段和隐藏字段，并在输入控件更改时使用一些 javascript 转换为 rails 日期。

结果是您可以在 rails 中有一个不错的引导日期选择器，并将其与 simple_form 一起使用，如下所示：

```
<%= f.input :date, as: :bootstrap_datepicker %> 
```

或者使用长日期格式：

```
<%= f.input :date, as: :bootstrap_datepicker, input_html: { format: :long } %> 
```

# 执行

创建或编辑以下文件：

**宝石文件**

```
gem 'bootstrap-sass'
gem 'bootstrap-datepicker-rails' 
```

**config/locales/en-AU.yml**

```
en-AU:
  date:
    datepicker:
      default: "dd/mm/yyyy"
      long: "dd MM, yyyy"
    formats:
      default: ! '%d/%m/%Y'
      long: ! '%d %B, %Y' 
```

**config/locales/en-US.yml**

```
en-US:
  date:
    datepicker:
      default: "mm/dd/yyyy"
      long: "MM dd, yyyy"
    formats:
      default: "%m/%d/%Y"
      long: ! '%B %d, %Y' 
```

**应用程序/资产/样式表/application.css.scss**

```
@import "bootstrap-responsive";
@import "bootstrap-datepicker"; 
```

**应用程序/资产/javascripts/application.js.coffee**

```
#= require bootstrap
#= require bootstrap-datepicker
#= require bootstrap-datepicker-rails 
```

或者，**app/assets/javascripts/application.js**

```
//= require bootstrap
//= require bootstrap-datepicker
//= require bootstrap-datepicker-rails 
```

**应用程序/资产/javascripts/bootstrap-datepicker-rails.js.coffee**

```
$ ->
  # convert bootstrap-datepicker value to rails date format (yyyy-mm-dd) on our hidden field
  $(document).on 'changeDate', '.bootstrap-datepicker', (evt) ->
    rails_date = evt.date.getFullYear() + '-' + ('0' + (evt.date.getMonth() + 1)).slice(-2) + '-' + ('0' + evt.date.getDate()).slice(-2)
    $(this).next("input[type=hidden]").val(rails_date) 
```

**应用程序/输入/bootstrap_datepicker_input.rb**

```
class BootstrapDatepickerInput < SimpleForm::Inputs::Base
  def input
    text_field_options = input_html_options.with_indifferent_access
    format =  text_field_options.delete(:format)
    hidden_field_options = text_field_options.dup
    hidden_field_options[:class] = text_field_options[:class].dup # so they won't work with same array object
    hidden_field_options[:id] = "#{attribute_name}_hidden"
    text_field_options[:class] << 'bootstrap-datepicker'
    text_field_options[:type] = 'text'
    text_field_options[:value] ||= format_date(value(object), format)
    set_data_option text_field_options, 'date-format', I18n.t(format, scope: [:date, :datepicker], default: :default)
    default_data_option text_field_options, 'provide', 'datepicker'

    return_string =
      "#{@builder.text_field(attribute_name, text_field_options.to_hash)}\n" +
      "#{@builder.hidden_field(attribute_name, hidden_field_options.to_hash)}\n"
    return return_string.html_safe
  end

protected

  def default_data_option(hash, key, value)
    set_data_option(hash,key,value) unless data_option(hash, key)
  end

  def data_option(hash, key)
    hash[:data].try(:[],key) || hash["data-#{key}"]
  end

  def set_data_option(hash, key, value)
    hash[:data].try(:[]=,key,value) || (hash["data-#{key}"] = value)
  end

  def value(object)
    object.send @attribute_name if object
  end

  def format_date(value, format=nil)
    value.try(:strftime, I18n.t(format, scope: [ :date, :formats ], default: :default))
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T17:08:52.883

我遇到了类似的问题，在创建操作中转换格式为我解决了这个问题：

```
def create
     .....
     @person.dob = DateTime.strptime(params[:person][:dob], '%m/%d/%Y').to_date
     .....
     @person.save
     .....
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T14:51:41.590

Andrew Hacking 的回答对我很有用，对**app/inputs/bootstrap_datepicker_input.rb**做了两个小改动。我正在使用 Rails 4.2.0。它忽略了隐藏字段中的值作为重复项（因为文本输入和隐藏输入具有相同的“名称”属性）。我换了：

```
"#{@builder.text_field(attribute_name, text_field_options.to_hash)}\n" 
```

...对此：

```
"#{@builder.text_field(attribute_name.to_s+'_box',text_field_options.to_hash)}\n" + 
```

此外，我丢失了包装器选项，因此我添加了一个参数`input`并将包装器选项合并到 html 选项中。

这个：

```
def input
    text_field_options = input_html_options.with_indifferent_access
    ... 
```

...变成：

```
def input(wrapper_options)
    merged_input_options = merge_wrapper_options(input_html_options, wrapper_options)
    text_field_options = merged_input_options.with_indifferent_access
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-03T10:20:04.223

我用过Andrew的anwser。它对我来说效果很好，只是它没有正确显示本地化的月份名称（例如，七月而不是七月）。

如果您想为 date_picker 使用本地化版本，这是我的方法。

默认情况下，bootsrap-datepicker gem 会加载所有语言版本。

例如，如果您只想加载英文和德文版本，则必须更改**application.js**

从

```
//= require bootstrap-datepicker 
```

至

```
//= require bootstrap-datepicker/core
//= require bootstrap-datepicker/locales/bootstrap-datepicker.en-GB.js
//= require bootstrap-datepicker/locales/bootstrap-datepicker.de.js 
```

Nest 步骤是更改***BootstrapDatepickerInput***

我们现在想要的是从给定参数中动态选择语言。

所以将以下行添加到输入法内的 Input 类中

```
set_data_option text_field_options, 'date-language', input_html_options[:locale] 
```

在我们看来，我们现在可以用

```
= f.input :your_attribute_name, as: :bootstrap_datepicker, input_html: { locale: locale } 
```

# rfid - 识别编码以在已知字符串之间进行转换

> ID：15405705
> 
> 赞同：0
> 
> 时间：2013-03-14T09:40:54.350
> 
> 标签：rfid

我有一些 ISO 11785 RFID 动物标签，它们用数字编程，上面也写有数字。这两个数字通过与 RFID 标签一起发送的文本文件进行匹配。问题是 RFID 阅读器返回的数字与文件中的数字不匹配。我希望有人帮助我确定如何将标签号转换为放入文件中。RFID 标签返回一个带有制造商代码的数字，后跟一个唯一的动物代码。

以下是数据示例：

```
RFID Tag         | RFID Response From Tag
8000F580076C2BA9 | 982 000124529577
8000F580076C2C34 | 982 000124529716
8000F580076C2C32 | 982 000124529714
8000F580076C2DD4 | 982 000124530132
8000F580076C2BDC | 982 000124529628 
```

任何人都可以建议我应该对左边的数字做什么才能得到右边的数字吗？我尝试从十六进制转换为十进制，但这似乎不起作用。

**编辑**

事实证明，如果我取十六进制的最后 7 个字符，那么它们就变成了动物 ID，F58 转换为 3982，可以通过它得到 982 部分。我认为我应该能够从中工作，但我想无论如何我都会离开这个职位，以防其他人遇到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T02:20:43.357

字段编码由 ISO 标准定义。
位
1 动物标志
2-4 重新标记计数器
5-9 用户信息
10-15 保留
16 附加数据标志
17-26 国家/制造商代码（982 是 Allflex）
27-64 唯一 ID

# java - 将增强的 for 循环转换为 for 循环

> ID：15405706
> 
> 赞同：-6
> 
> 时间：2013-03-14T09:41:02.610
> 
> 标签：java

如何将下面的“增强型 for 循环”转换为“for 循环”

```
ArrayList<Integer> input= new ArrayList<Integer>();

int[] copies = new int[20];
 for(int allCopies : input) {
        copies[allCopies]++;
    } 
```

我们试过这个：

```
for(int k = 0; k < input.size(); k++) { 
```

对于这部分：

```
for(int allCopies : input) { 
```

但我们不知道如何获得这部分：

```
copies[allCopies]++; 
```

任何帮助?????

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:43:11.147

```
ArrayList<Integer> input= new ArrayList<Integer>();

int[] copies = new int[20];
for(int k = 0; k < input.size(); k++) {
    copies[input.get(k)]++;
} 
```

在增强的 for 循环中`for(int allCopies : input)`

`allCopies`是一样的`input[counterPosition]`。

所以基本上所有这一切都是使用`k`作为计数器来获取该值。

`input.get(k)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:43:34.077

这应该这样做：

```
int allCopies = input.get(k); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T09:44:53.653

```
copies[input.get(k)]++; 
```

您应该首先查看[API](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)以找到要使用的适当方法。

# ios - 如何在 iTunes Connect 中添加多个应用内购买？

> ID：15405707
> 
> 赞同：1
> 
> 时间：2013-03-14T09:41:05.987
> 
> 标签：ios, objective-c, in-app-purchase, itunes

通常我会
`iTunes connect -> my app -> Manage In-App Purchase`在我的应用程序的应用程序内购买中添加单个项目。

我想知道是否有一个 API 我可以调用它来一次将多个文件添加到应用内购买。

帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:42:22.960

没有这样的 API。您应该手动添加所有这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:59:11.590

您必须手动添加它们。并在请求期间检查它们。将 appId 存储在数组中，并使用来自数组的请求发送适当的 id。这是处理 Multiple inAppp 的唯一方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:36:59.533

不，没有这样的 API，您必须为要设置的每一层都添加它们。

对于完整的应用程序购买设置和工作检查[Reywenderlich 完整的应用程序内购买实施](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-13T10:00:35.003

您可以使用 Mac 上的应用程序加载器。那里有一个模板，您可以下载并使用您的 IAP 填充

# android - Android ArrayList TextView 在 setText 之后不显示文本

> ID：15405708
> 
> 赞同：2
> 
> 时间：2013-03-14T09:41:10.240
> 
> 标签：android, arraylist, textview, show, settext

您好，我在制作应用程序时遇到了一些问题，无法在任何地方找到答案。我有一个用于用户输入的 EditText。我有一个字符串单词，我有一个带有 TextViews 的 ArrayList。我想根据用户输入是否等于字符串中的字符来设置 TextView 的文本。如果一个字符相等，它必须显示在正确的 TextView 中。现在的问题是，如果我输入一个应该与单词中的字符匹配的字符，它不会向我显示任何内容，即使我想在另一个 TextView 中显示 StringBuilder ，它看起来也是空的。

我有这个：

```
public void onClickButtons(View view) {
    if(view==mBtnGuess) {
        String getInput = mEtxtUserInput.getText().toString();
        word = "someword";
        if(getInput.length()==1) {
            List<TextView> txtCharArr= new ArrayList<TextView>();
            txtCharArr.add(mChar1);
            txtCharArr.add(mChar2);
            txtCharArr.add(mChar3);
            txtCharArr.add(mChar4);
            txtCharArr.add(mChar5);
            txtCharArr.add(mChar6);
            txtCharArr.add(mChar7);
            txtCharArr.add(mChar8);
            txtCharArr.add(mChar9);
            txtCharArr.add(mChar10);
            txtCharArr.add(mChar11);
            txtCharArr.add(mChar12);
            StringBuilder sb = new StringBuilder();
            for(i=0;i<getInput.length();i++) {
                if(getInput.equals(Character.toString(word.charAt(i)))) {
                    txtCharArr.get(i).setText(Character.toString(word.charAt(i)));
                    sb.append(Character.toString(word.charAt(i)));
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:45:59.223

我想而不是`word.length()`你正在使用`getInput.length()`

```
for(i=0;i<getInput.length();i++) {
                if(getInput.equals(Character.toString(word.charAt(i)))) {
                    txtCharArr.get(i).setText(Character.toString(word.charAt(i)));
                    sb.append(Character.toString(word.charAt(i)));
                }
            } 
```

因此，您将只循环一次并仅检查**getInput中****word**的第一个字符，即**s**。

# apache - 增加 apache 日志的精度以包括毫秒

> ID：15405719
> 
> 赞同：10
> 
> 时间：2013-03-14T09:41:58.893
> 
> 标签：apache, timestamp, syslog, rsyslog

我已经修改了`rsyslogd`禁用的配置`RSYSLOG_TraditionalFileFormat`。但是 apache 日志仍然`/var/log/apache/error.log`只显示第二精度。

还有什么需要配置的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T21:52:32.837

在[http://httpd.apache.org/docs/current/mod/mod_log_config.html](http://httpd.apache.org/docs/current/mod/mod_log_config.html) 您会看到不同的时间格式，包括毫秒 只需从

```
%t 
to 
%{%d/%b/%Y:%T}t-%{msec_frac}t for miliseconds
or
%{%d/%b/%Y:%T}t-%{usec_frac}t for microsecs 
```

示例：16/Mar/2013:22:44:34-634 16/Mar/2013:22:44:34-634200

**文档阿帕奇**

> %t 收到请求的时间，格式为 [18/Sep/2011:19:18:28 -0400]。最后一个数字表示与 GMT 的时区偏移
> 
> %{format}t 时间，格式由 format 给出，应该是扩展的 strftime(3) 格式（可能本地化）。如果格式以 begin: 开头：（默认）时间是在请求处理开始时所用的。如果它以 end 开头：它是日志条目被写入的时间，接近请求处理的结束。除了 strftime(3) 支持的格式外，还支持以下格式标记：
> 
> sec 自纪元以来的秒数
> 
> msec 自 Epoch 以来的毫秒数
> 
> usec 自纪元以来的微秒数
> 
> msec_frac 毫秒分数
> 
> usec_frac 微秒分数
> 
> 这些标记不能相互组合或 strftime(3) 格式化为相同的格式字符串。您可以改用多个 %{format}t 标记。

**strftime(3) 格式化** [http://man7.org/linux/man-pages/man3/strftime.3.html](http://man7.org/linux/man-pages/man3/strftime.3.html)

# angularjs - Angular UI Bootstrap Modal 去除 id 和 class 属性

> ID：15405722
> 
> 赞同：10
> 
> 时间：2013-03-14T09:42:13.530
> 
> 标签：angularjs, angular-ui, angular-ui-bootstrap

[现场示例](http://plnkr.co/edit/WSbSqeDBU2JyhTmsqbZ4?preview&p=preview)

添加以下[Angular UI Bootstrap 模式](http://angular-ui.github.com/bootstrap/#modal)：

```
<div id="my-id" class="my-class" modal="opened">
  <p>Modal Here</p>
</div> 
```

结果是：

```
<div class="modal ng-scope">
  <p>Modal Here</p>
</div> 
```

为什么`id`和`class`属性被剥离？

我想在对话框上设置一些 CSS 样式，例如对话框的宽度，或者为一些对话框的内部元素设置样式。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-14T11:20:20.077

因为我自己刚刚遇到了这个恼人的问题，并且文档和默认行为并不明显。您现在可以使用以下`windowClass`选项通过 $modal.open() 方法传入其他类：

```
var modalInstance = $modal.open({
      templateUrl: 'templateUrl.html',
      controller: Controller,
      windowClass: 'custom-css-class',
      ...
    }); 
```

无法设置一个蹩脚的 ID。官方[angular-ui modal docs](http://angular-ui.github.io/bootstrap/#/modal)中的更多信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T10:49:11.810

这是解释为什么 id 被剥离的[github 问题。](https://github.com/angular-ui/bootstrap/issues/197)

至于课程，我不确定为什么会被剥夺，但您可以使用[$dialog 选项](https://github.com/angular-ui/bootstrap/tree/master/src/dialog)来指定课程（这将解决您的问题）：

```
<div id="my-id" modal="opened" options="{dialogClass: 'modal my-class'}">
  <p>Modal Here</p>
</div> 
```

# apache - 如何将 websocket 请求从 Apache httpd 转发到 Apache Tomcat？

> ID：15405729
> 
> 赞同：1
> 
> 时间：2013-03-14T09:42:31.297
> 
> 标签：apache, tomcat, websocket, atmosphere

我有像 Apache2 + mod_jk + Tomcat 的两个实例（7.0.33）这样的服务器设置。现在我正在使用tomcat的气氛。长轮询的气氛工作得很好。但现在我想在大气中使用网络套接字作为传输协议。但似乎 Apache 无法将请求转发给 Tomcat，它给了我错误

> 无法在 ws://localhost/Myapp/update/?X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.1&X-Atmosphere-Transport=websocket&X-Cache-Date=0&Content- 建立与服务器的连接类型=应用程序/json。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T14:03:57.613

从 Apache 2.4.6 开始，Apache httpd 转发/代理 websockets

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T04:17:31.357

Mod_Jk 意味着将请求从 HTTP 转换为 AJP/13 协议，这意味着 Web 服务器应该具有一些处理/处理请求的能力。使用 mod_proxy 来建立 apache-tomcat 通信可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:22:36.683

Apache 不支持 WebSocket，所以需要使用 Ningx 或 HAProxy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-09T20:43:17.857

我认为您可以使用名为 mod_proxy_wstunnel 的模块来完成

[https://httpd.apache.org/docs/2.4/mod/mod_proxy_wstunnel.html](https://httpd.apache.org/docs/2.4/mod/mod_proxy_wstunnel.html)

我认为最初提出问题时不存在这种情况。在 2.4.5 版本中，Apache 增加了对这个 mod 的支持。

# parameters - 如何从另一个 ns 设置一个 ns 的值？

> ID：15405732
> 
> 赞同：1
> 
> 时间：2013-03-14T09:42:48.050
> 
> 标签：parameters, clojure, namespaces, function

我有两个命名空间：第一个是 clojuresque java 中的 gui，第二个是常规 clojure。用户在 gui 中输入值；这些需要在非gui ns中“传递”到“设置”值。我读过在 defn 中使用 def 是不好的做法，即使它有效。在我寻找解决这个小问题的过程中，我找到了实习生函数。实习生是一个可接受的解决方案还是我应该使用其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:18:09.767

请使用 atom，官方文档：http: [//clojure.org/atoms](http://clojure.org/atoms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:09:14.773

是的，正如另一个答案指出的那样，原子是保持可变状态的最佳选择。

创建一个原子，如：

```
(def my-state (atom 1))

（取消引用我的状态）
=> 1

;; @ 扩展为 deref 调用
@我的状态
=> 1

```

现在可以使用交换更新它：

```
（交换！我的状态（fn [旧值] 2）
@我的状态
=> 2

```

您可以在可从 Java 调用的命名空间中使用它：

```
(ns foo.NonGUI
  (:gen-class
    :name foo.NonGUI
    :methods [#^{:static true} [setMyState [int] int]]))

（定义我的状态（原子））

（定义-setMyState
  “将我的状态设置为新值”
  [新价值]
  （交换！我的状态（fn [旧值] 新值））

```

在编译它并在 java 类路径上获取编译后的类文件之后，您应该能够从 Java 中使用这个命名空间：

```
导入 foo.NonGUI；

公共类主要{

    公共静态无效主要（字符串[]参数）{
        NonGUI.setMyState(4);
    }
}

```

有关Java 互操作的更多信息，请参阅[从 java 调用 clojure 。](https://stackoverflow.com/questions/2181774/calling-clojure-from-java)

# php - 如何从远程 txt/php 文件中获取 URL 并加载该 URL？

> ID：15405733
> 
> 赞同：0
> 
> 时间：2013-03-14T09:42:53.917
> 
> 标签：php, post, curl, get, file-get-contents

如何`URL`从`text/php`另一个站点上的文件中获取一个然后打开该 URL 链接？

如果没有，则默认为 default.php

我可以访问这两个网站，

![](../Images/9c9a8fd4f84ed55603f029b3d54d2aad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:15:45.273

如果我理解正确，您希望站点 A 请求站点 B 上的 URL。站点 B 将响应一个 URL，您希望加载该 URL。你可以使用以下

```
<?
$url = 'http://www.siteb.com/givemeaurl.php';
$content = implode('', file($url));//

//$content now contains the response from site B. If its only the URL you can use it directly, else you need to parse the results

if (strlen($content)>0) {
  //we have a value
  $newurl = $content;
} else {
  //no value
  $newurl = 'default.php';
}

//no open the new site
header('Location: ' . $newurl);
?> 
```

# javascript - 在页面加载和按钮单击时调用相同的 js 函数并显示调用的两个函数

> ID：15405741
> 
> 赞同：0
> 
> 时间：2013-03-14T09:43:20.570
> 
> 标签：javascript

我有一个 javascript 函数，我想调用同一个函数两次。一次页面加载和一次按钮单击。我希望输出作为页面加载的函数将继续在后端运行并
显示输出，当再次单击按钮时调用函数并显示其输出。最后应该显示两个函数的输出。这是我写的，但没有得到输出。

例如

Javascript 文件：n.js

```
function webservice{

   for(i=0;i<10;i++)
   {
      alert("some msg");
      `enter code here`
   } 
```

html 文件 n.html

```
 <html>
   <head>
   <script type = "text/javascript" src="n.js"></script>
   <script type="text/javascript">

   window.onload=function() {
   webservice();
   }

   </script>
   </head>

   <body>

   <input id="button"  type = "button" name = "webservice" value = "Call Webservice"      
   onClick="webservice()" />
   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:53:25.883

我认为您的代码可能格式错误。

```
function webservice{
                for(i=0;i<10;i++)
                     {
                     alert("some msg");
                 `enter code here`
                 } 
```

改成

```
function webservice(){
        for(i=0;i<10;i++)
        {
          alert("some msg");
       //enter code here
      } 
```

只需在 webservice 之后添加 ()。像网络服务（）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:53:37.137

以下代码正在我的机器上运行。我认为您缺少`()`功能 webservice()。所以而不是`webservice`使用`webservice()`

```
<html>
<head>
<script>
function webservice()
{
   for(i=0;i<10;i++)
   {
      alert("some msg");
   }
}
window.onload=function()
{
   webservice();
}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
 <input id="webservice"  type = "button" name = "webservice" value = "Call Webservice" onClick="webservice()" />
</body>
</html> 
```

**更新：**

如果您`onload`像这样编写函数，那么您将能够执行`call 1`and `call 2`，但`call 2`将在`call 1`循环完成时开始。

```
window.onload=function()
{
   webservice('onload');    //call 1 
   document.getElementById("webservice").click();  //call 2 
} 
```

# android - 带有 onClick 弹出信息的 Listview

> ID：15405750
> 
> 赞同：0
> 
> 时间：2013-03-14T09:43:36.037
> 
> 标签：android, popup

我正在创建一个应用程序，它应该列出一些滑雪板技巧，当单击一个技巧时，应该会出现一个弹出窗口，其中包含有关技巧的信息以及如何做到这一点（带有文本和可能的 youtube 视频）。

一个人如何意识到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:01:39.267

这是创建自定义列表适配器的代码，当您按下行中的某个图像时，弹出窗口会弹出`ListView`：

**这是`Adapter`：**

```
 public class tasksRepositoryAdapter extends ArrayAdapter<Task>
{   
    private ArrayList<Task> list;

    public tasksRepositoryAdapter(Context context, int textViewResourceId, List<Task> tasksRepository) 
    {
        super(context, textViewResourceId, tasksRepository);
         this.list = new ArrayList<Task>();
         for (Task task : tasksRepository)
            {
                this.list.add(task);
            }
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row;
        final ViewHolder holder = new ViewHolder();
        tfRobotoRegular = Typeface.createFromAsset(getAssets(),"Roboto-Regular.ttf");

        LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflator.inflate(R.layout.new_row, null);
        holder.tvTitle = (TextView) row.findViewById(R.id.text_title);
        String title = tasksRepository.get(position).getTitle();
        if (title.length()>25)
        {
            title = title.substring(0, 24);
            title = title + "...";
        }
        holder.tvTitle.setText(title);
        holder.tvTitle.setTypeface(tfRobotoRegular);
        holder.tvDate = (TextView) row.findViewById(R.id.text_date);
        holder.tvDate.setText(tasksRepository.get(position).getDate());
        holder.tvDate.setTypeface(tfRobotoRegular);
        holder.tvTime = (TextView) row.findViewById(R.id.text_time);
        holder.tvTime.setText(tasksRepository.get(position).getTime());
        holder.tvTime.setTypeface(tfRobotoRegular);
        holder.tvDescription = (TextView) row.findViewById(R.id.text_description);
        String description = tasksRepository.get(position).getDescription();
        if (description.length()>46)
        {
            description = description.substring(0, 45);
            description = description + "...";
        }
        holder.tvDescription.setText(description);
        holder.tvDescription.setTypeface(tfRobotoRegular);
        holder.tvId = (TextView) row.findViewById(R.id.text_id);
        holder.tvId.setText(String.valueOf(tasksRepository.get(position).getId()));
        holder.tvId.setTypeface(tfRobotoRegular);
        holder.tvLocation = (TextView) row.findViewById(R.id.text_location);
        holder.tvLocation.setText(tasksRepository.get(position).getCity());
        holder.llRowLayout = (LinearLayout) row.findViewById(R.id.llRowLayout);
        holder.imCalendar = (ImageView) row.findViewById(R.id.iCalendar);
        holder.imClock = (ImageView) row.findViewById(R.id.iClock);
        holder.imLocation = (ImageView) row.findViewById(R.id.iLocation);

        holder.imTaskStatusButton = (ImageView)   row.findViewById(R.id.iTaskStatusButton);
        holder.imTaskStatusButton.setTag(position);
        holder.imTaskStatusButton.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                 int[] location = new int[2];
                 currentRowId = position;
                 currentRow = v;    
                 // Get the x, y location and store it in the location[] array
                 // location[0] = x, location[1] = y.
                 v.getLocationOnScreen(location);

                 //Initialize the Point with x, and y positions
                 point = new Point();
                 point.x = location[0];
                 point.y = location[1];
                 showStatusPopup(TasksListActivity.this, point);
            }
        });

        String status = tasksRepository.get(position).getStatus();
        Log.d(TAG, "The status of the current row: "+ status );
        setStatusColorImages(status, holder.imClock, holder.imCalendar, holder.imLocation, holder.llRowLayout); 

        return row;
    }
} 
```

**这是`ViewHolder`：**

```
static class ViewHolder
{
    RelativeLayout rlTitle;
    LinearLayout llRowLayout;
    TextView tvId;
    TextView tvTitle;
    TextView tvDate;
    TextView tvTime;
    TextView tvDescription;
    TextView tvLocation;
    ImageView imClock;
    ImageView imCalendar;
    ImageView imLocation;
    ImageView imTaskStatusButton;
} 
```

**和弹出窗口：**

```
// The method that displays the popup.
private void showStatusPopup(final Activity context, Point p) {

   // Inflate the popup_layout.xml
   LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.llStatusChangePopup);
   LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View layout = layoutInflater.inflate(R.layout.status_popup_layout, null);

   // Creating the PopupWindow
   changeStatusPopUp = new PopupWindow(context);
   changeStatusPopUp.setContentView(layout);
   changeStatusPopUp.setWidth(LinearLayout.LayoutParams.WRAP_CONTENT);
   changeStatusPopUp.setHeight(LinearLayout.LayoutParams.WRAP_CONTENT);
   changeStatusPopUp.setFocusable(true);

   // Some offset to align the popup a bit to the left, and a bit down, relative to button's position.
   int OFFSET_X = -20;
   int OFFSET_Y = 50;

   //Clear the default translucent background
   changeStatusPopUp.setBackgroundDrawable(new BitmapDrawable());

   // Displaying the popup at the specified location, + offsets.
   changeStatusPopUp.showAtLocation(layout, Gravity.NO_GRAVITY, p.x + OFFSET_X, p.y + OFFSET_Y);
} 
```

# jquery - 检测表单输入的更改完成

> ID：15405753
> 
> 赞同：1
> 
> 时间：2013-03-14T09:43:45.083
> 
> 标签：jquery

我喜欢构建没有“计算”大按钮的在线计算器。即，计算发生在更改事件上，无需用户单击计算按钮。不幸的是，许多用户只需输入数据并向下滚动即可查看结果，而无需选择或单击屏幕上的其他位置。此行为不会触发更改事件，因此结果不会更新。

以下是我认为用户输入已完成的一些场景：

1.  用户输入数据和制表符（更改）
2.  用户输入数据并将鼠标从文本框中移出（按键/输入后跟鼠标离开）
3.  用户选项卡进入输入字段，输入数据并将鼠标移动到其他地方一定距离。即，鼠标在任何时候都不在输入字段上。

实施#1 & #2 应该很容易。我想看看如何最好地使用 jQuery 实现#3。是否有任何 jQuery 插件可以帮助我解决上述所有问题或仅提供 #3？

或者，我应该放弃这一切并放一个大的计算按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:59:57.520

这是一个简单计算器的示例，它会根据每个输入更改进行更新。（没有添加检查该值是否为 int 等。）

```
$('#num1, #num2').bind('keyup', function() {
    if($('#num1').val() == '' || $('#num2').val() == '') {
        $('h1 b').html(0);
    } else {
         $('h1 b').html( parseInt($('#num1').val()) + parseInt($('#num2').val()) );
    }
}).trigger('keyup'); 
```

[JsFiddle 示例](http://jsfiddle.net/DV4HT/1/)

# c# - ASPX 页面内的 XSLT 代码

> ID：15405761
> 
> 赞同：1
> 
> 时间：2013-03-14T09:44:02.907
> 
> 标签：c#, asp.net, xml, xslt

我有`xslt`包含在`xml`文件中的文件（下面的文件）。我有`aspx`页面，我想在这个`aspx`页面中包含这个 xml 文件，当我运行`aspx`页面时，`xslt`代码`xml`也可以运行。是否可以 ？

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="simpletransform.xslt"?>
<JavacoTea>
   Try our new Herbal Tea!
</JavacoTea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:52:27.313

对于 ASP.NET WebForms，曾经有一个控件可以在页面内执行 XSLT，请参阅[http://msdn.microsoft.com/en-us/library/35b30hy4%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/35b30hy4%28v=vs.100%29.aspx)。但是请注意，该控件用于`System.Xml.Xsl.XslTransform`执行 XSLT 转换，这是 Microsoft 在 .NET 版本 1.x 中完成的 XSLT 1.0 实现，而更高版本的 .NET 版本具有`System.Xml.Xsl.XslCompiledTransform`.

如果您希望浏览器执行 XSLT 转换（就像您发布的代码一样），那么我建议您在代码中简单地包含一个`iframe`元素，例如 `<iframe with="100%" height="200" src="yourXmlFile.xml"></iframe>`.

# git - 从尚未推送的旧提交中删除文件（Git 扩展）

> ID：15405765
> 
> 赞同：1
> 
> 时间：2013-03-14T09:44:14.253
> 
> 标签：git, commit, git-extensions

我在这里面临一个特殊的情况。

![情况](../Images/d62656f91c179f723ccc5daabfb48167.png)

我必须改变 [4]xxxMerger.py 的行为并删除 [4]xxxWriter 这意味着将其级联以提交 [5] [6] [7]

我怎样才能做到这一点？

我知道我可以添加文件以使用 fixup 提交，甚至可以更改它们然后基于原点重新设置。我可以通过重新基于原点并要求对提交进行改写来更改提交消息。

但为此。我无法进行修复，因为我在 [7]，因此这两个文件被重命名。如果我结帐 [4]，它不会允许修复，因为我不会在任何分支上。

可能这很简单，但我对 GIT 很陌生。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:15:54.953

`git rebase --interactive <commit 4>`然后将提交“5”设置为修复，其中的更改将合并为 4，然后将在其上应用 6 和 7。

# android - 如何在我的 android 应用程序的操作栏上设置可绘制对象

> ID：15405768
> 
> 赞同：5
> 
> 时间：2013-03-14T09:44:20.073
> 
> 标签：android, android-layout, android-actionbar, android-drawable

我正在开发一个应用程序，在该应用程序中，我必须将可绘制对象放在操作栏的顶部，并且必须不时更新。这是我想要的布局。

![ActionBar 可在顶部绘制](../Images/f86975099fbe5937383f72db94f9c139.png)

我想放一个如图所示的可绘制对象（绿色可绘制不是通知的东西）。有可能在android中实现这种屏幕吗？如果，那么请指导我如何实现这一目标。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:48:48.127

这很容易使用自定义视图。让我简要解释一下步骤：

1.  在布局文件夹中创建您的自定义视图。例如，一个`ImageButton`.

2.  将此视图设置为活动中操作栏的自定义视图。你可以通过调用来做到这一点

    ```
    getSupportActionBar().setCustomView(R.layout.your_custom_view); 
    ```

    （或`getActionBar()`代替`getSupportActionBar()`）

3.  `setDisplayOptions()`使用`ActionBar.DISPLAY_SHOW_HOME`和`ActionBar.DISPLAY_SHOW_CUSTOM`选项调用。

4.  如果您在操作栏中有其他标准按钮，请扩充菜单。

5.  您终于可以`OnClickListener`为您的自定义视图设置。

这对我有用，希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:37:51.743

1.  创建自定义视图
2.  将其用作 ActionBar 中的 ActionView
3.  在 onCreateOptionsMenu 中获取对您的视图的引用并在需要时更新它

# django - 新生产 django + apache + mod_wsgi 上的 ImportError

> ID：15405774
> 
> 赞同：0
> 
> 时间：2013-03-14T09:44:35.887
> 
> 标签：django, apache, mod-wsgi

我正在部署我的 django 项目。让wsgi工作，现在我得到了importError。

错误：

```
Exception Type: ImportError
Exception Value:    
No module named forms 
```

这是进口：

```
from profile.forms import UserRegistrationForm 
```

profile 是一个文件夹，位于我的项目目录中。这是我使用的 wsgi 脚本：

```
import os
import sys

path = '/srv/www/project'
if path not in sys.path:
    sys.path.append(path)

path = '/srv/www'
if path not in sys.path:
    sys.path.append(path)

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "project.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:59:35.967

让它工作，需要添加项目名称作为前缀。

```
from projectname.profile.forms import <something> 
```

# android - 如何读取保存到设备内部存储器的 PDF 文件？

> ID：15405775
> 
> 赞同：2
> 
> 时间：2013-03-14T09:44:36.890
> 
> 标签：android, android-intent, storage, internal

我正在使用以下代码从设备的内部存储中下载和读取 PDF 文件。

我能够成功将文件下载到目录：

```
data/data/packagename/app_books/file.pdf 
```

但我无法使用 Adob​​e Reader 等 PDF 阅读器应用程序阅读文件。

## 下载文件的代码

```
//Creating an internal dir;
File mydir = getApplicationContext().getDir("books", Context.MODE_WORLD_READABLE);

try {
    File file = new File(mydir, outputFileName);
    URL downloadUrl = new URL(url);
    URLConnection ucon = downloadUrl.openConnection();
    ucon.connect();

    InputStream is = ucon.getInputStream();

    FileOutputStream fos = new FileOutputStream(file);  

    byte data[] = new byte[1024];

    int current = 0;
    while ((current = is.read(data)) != -1) {
        fos.write(data, 0, current);
    }        
    is.close();
    fos.flush();
    fos.close();
    isFileDownloaded=true;
} catch (IOException e) {
    e.printStackTrace();
    isFileDownloaded = false;
    System.out.println(outputFileName + " not downloaded");
}
if (isFileDownloaded)
    System.out.println(outputFileName + " downloaded");
return isFileDownloaded; 
```

## 读取文件的代码

```
PackageManager packageManager = getPackageManager();

Intent testIntent = new Intent(Intent.ACTION_VIEW);
testIntent.setType("application/pdf");

List list = packageManager.queryIntentActivities(testIntent,
        PackageManager.MATCH_DEFAULT_ONLY);

try {
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);                        

    File fileToRead = new File(
            "/data/data/com.example.filedownloader/app_books/Book.pdf");
    Uri uri = Uri.fromFile(fileToRead.getAbsoluteFile());

    intent.setDataAndType(uri, "application/pdf");
    startActivity(intent);
} catch (Exception ex) {
    Log.i(getClass().toString(), ex.toString());
    Toast.makeText(MainActivity.this,
            "Cannot open your selected file, try again later",
            Toast.LENGTH_SHORT).show();
} 
```

一切正常，但阅读器应用程序显示*“文件路径无效”*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:31:18.910

您的路径仅对您的应用有效。将文件放在其他应用程序可以“看到”它的地方。使用 GetExternalFilesDir() 或 getExternalStorageDirectory()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:55:38.140

请注意在创建的目录中创建的文件[`Context.getDir(String name, int mode)`](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29)，它们*只能由您自己的应用程序访问；您只能设置整个目录的模式，而不是单个文件的模式。*

所以你可以使用[`Context.openFileOutput(String name, int mode)`](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29). 我正在重新使用您的代码作为示例：

```
try {
    // Now we use Context.MODE_WORLD_READABLE for this file
    FileOutputStream fos = openFileOutput(outputFileName,
            Context.MODE_WORLD_READABLE);

    // Download data and store it to `fos`
    // ... 
```

您可能需要查看本指南：[使用内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-24T04:12:07.433

如果您想保持文件应用程序的特定性，您可以使用适用于 Lollipop 及更高版本的 PdfRenderer。google 和 youtube 上有很棒的教程，效果很好。您使用的方法是一种安全的方式来存储只能从应用程序内部读取的 PDF 文件。没有像 Adob​​e PDF Reader 这样的外部应用程序甚至可以看到该文件。我花了很多时间搜索，但我通过使用这个网站，尤其是 youtube，找到了针对我的特定用途的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-13T07:39:36.537

## 如何通过制作文件夹将 PDF 文件从资产文件夹下载到存储

确保您具有存储权限，例如棉花糖设备支持等，然后按照以下步骤操作

```
private void CopyReadAssets()
{
    AssetManager assetManager = getContext().getAssets();

    FileInputStream in = null;

    FileOutputStream out = null;
    File sdcard = Environment.getExternalStorageDirectory();
    File dir = new File(Environment.getExternalStorageDirectory()+File.separator+ "A_level");
    File dir2;
    if (dir.exists() && dir.isDirectory()){

        Log.e("tag out", ""+ dir);
    }else {
        dir.mkdir();
        Log.e("tag out", "not exist");
    }

    File file = new File(dir, mTitle+".pdf");

    try
    {
        Log.e("tag out", ""+ file);
       out = new FileOutputStream(file);
        in = new FileInputStream (new File(mPath));

        Log.e("tag In", ""+ in);

        copyFile(in, out);
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
    } catch (Exception e)
    {
        Log.e("tag out", ""+ out);
        Log.e("tag In", ""+ in);
        Log.e("tag", e.getMessage());
        Log.e("tag", ""+file);
        Log.i("tag",""+sdcard.getAbsolutePath() + "A_level");
    }

}

private void copyFile(InputStream in, OutputStream out) throws IOException
{
    byte[] buffer = new byte[1024];
    int read;
    while ((read = in.read(buffer)) != -1)
    {
        out.write(buffer, 0, read);
    }
} 
```

# java - 如何在 JEditorPane 中添加锚标记？（爪哇）

> ID：15405777
> 
> 赞同：2
> 
> 时间：2013-03-14T09:44:42.877
> 
> 标签：java, html, swing, url, jeditorpane

我有以下代码将 html 添加到 JEditorPane

```
 JEditorPane  content = new JEditorPane ();

        content.setEditable(false);
        content.setContentType( "text/html" );

        content.setText(resultText);

        JScrollPane bottomScrollPane = new JScrollPane(content);
        bottomScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        bottomScrollPane.setBorder(BorderFactory.createTitledBorder("Swing Rendered")); 
```

在这一步之后，我已将 JEditorPane 实例“内容”添加到 JPanel 实例中，并且可以完美地看到结果。但是当我尝试单击显示的链接时，它不起作用。

我如何使这些链接可点击，它应该将用户重定向到浏览器中的特定网址？

问候， 巴兰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:52:49.390

您需要将 HyperlinkListener 添加到 JEditorPane：

```
pane.addHyperlinkListener(new HyperlinkListener()
{
    public void hyperlinkUpdate(HyperlinkEvent r){
        try{
            if(r.getEventType() == HyperlinkEvent.EventType.ACTIVATED)
            pane.setPage(r.getURL());
        }
        catch(Exception e){
        }
    }
 }); 
```

或者您可以在侦听器中执行任何其他操作...例如，在默认浏览器中打开一个链接：

您需要将 HyperlinkListener 添加到 JEditorPane：

```
pane.addHyperlinkListener(new HyperlinkListener()
{
    public void hyperlinkUpdate(HyperlinkEvent r){
        try{
            if(r.getEventType() == HyperlinkEvent.EventType.ACTIVATED)
            Desktop.getDesktop().browse(new URI(r.getURL().toURI()));
        }
        catch(Exception e){
        }
    }
 }); 
```

# php - PHP 工具扩展和 HTML 智能感知

> ID：15405786
> 
> 赞同：0
> 
> 时间：2013-03-14T09:45:01.993
> 
> 标签：php, html, visual-studio, editor, intellisense

我得到了 PHP Tools 专业版，但意识到它只有 php intellisense，而且它只有 HTML 的颜色突出显示。虽然 html 本身并不难，但我也希望有智能感知。

有谁知道我可以将 PHP 和 HTML 智能感知链接到单个扩展的方法？

我尝试转到选项-> 文本编辑器-> 文件扩展名并将 php 扩展名设置为 HTML 编辑器，但它删除了 PHP 工具智能感知并用 HTML 替换它。我真正想要的是在添加（而不是替换）html 编辑器工具的同时保留 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:15:01.440

这是 Visual Studio 外部编辑器的已知限制。无论如何，根据[PHP 工具功能页面](http://www.devsense.com/products/php-tools/features)（刚刚更新），工作正在进行中。目前，不可能“混合”两种语言，如 HTML 和 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:40:35.980

看看这个线程：

[http://support.devsense.com/viewtopic.php?f=21&t=987](http://support.devsense.com/viewtopic.php?f=21&t=987)

似乎很快就会出现:-)。

# android - 阻止 Android BootReceiver 启动主要活动

> ID：15405787
> 
> 赞同：3
> 
> 时间：2013-03-14T09:45:10.557
> 
> 标签：android, android-intent, push-notification, boot

这是我的问题：

我的 Android 应用注册了一个启动接收器，它初始化一个 PushNotification-Manager (PushWoosh)。这是因为即使在设备重启后，用户也应该能够接收推送通知，而无需手动启动应用程序。

这可行，但是当设备重新启动时，应用程序的主要活动 (MainMenuActivity) 会启动并被带到前台，这不应该发生。

这是涉及的代码：

AndroidManifest.xml：

```
<!-- Re-register PushManagers after reboot -->
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

<application 
android:allowBackup="true"
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@android:style/Theme.Black.NoTitleBar">

<!-- PushWoosh -->
<activity android:name="com.arellomobile.android.push.PushWebview"/>
<activity android:name="com.arellomobile.android.push.MessageActivity"/>
<activity android:name="com.arellomobile.android.push.PushHandlerActivity"/>

<!-- PushWoosh -->
<receiver
    android:name="com.google.android.gcm.GCMBroadcastReceiver"
    android:permission="com.google.android.c2dm.permission.SEND">

    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
        <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
        <category android:name="de.myapp.android"/>
    </intent-filter>
</receiver>

<!-- PushWoosh -->
<service android:name="com.arellomobile.android.push.PushGCMIntentService"/>

<!-- Boot-Receiever -->
<receiver android:name="de.myapp.android.startup.BootCompleteReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver>

<activity
    android:name="de.myapp.android.activity.MainMenuActivity"
    android:configChanges="orientation|keyboardHidden|screenSize"
    android:label="@string/app_name"
    android:launchMode="singleTop"
    android:screenOrientation="portrait"
    android:windowSoftInputMode="adjustPan">

    <intent-filter>
        <!-- Starten bei Klick auf Launcher Icon -->
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>

    <intent-filter>
        <!-- Starten bei Erhalt einer Push Notification -->
        <action android:name="de.myapp.android.MESSAGE"/>
        <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>

</activity> 
```

BootCompleteReceiver.java：

```
public class BootCompleteReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent i) {
        PushWooshHelper.setupPushNotifications(context.getApplicationContext());
    }

} 
```

PushWooshHelper.java：

```
public class PushWooshHelper {

    public static void setupPushNotifications(Context context) {
        PushManager pushManager = new PushManager(context, AppIDs.PUSHWOOSH_APP_ID, AppIDs.GCM_PROJECT_ID);
        pushManager.onStartup(context);
        pushManager.startTrackingGeoPushes();
    }

} 
```

MainMenuActivity.java：

```
public class MainMenuActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ...
    }

    private void checkMessage(Intent intent) {

        if (intent != null) {

            String log = "PUSH NOTIFICATION RECEIVED.";

            if (intent.hasExtra(PushManager.PUSH_RECEIVE_EVENT)) {
                log += "message: " + intent.getExtras().getString(PushManager.PUSH_RECEIVE_EVENT);
            }
            else if (intent.hasExtra(PushManager.REGISTER_EVENT)) {
                log += "<register>";
            }
            else if (intent.hasExtra(PushManager.UNREGISTER_EVENT)) {
                log += "<unregister>";
            }
            else if (intent.hasExtra(PushManager.REGISTER_ERROR_EVENT)) {
                log += "<register error>";
            }
            else if (intent.hasExtra(PushManager.UNREGISTER_ERROR_EVENT)) {
                log += "<unregister error>";
            }
        }
    }

    @Override
    protected void onNewIntent(Intent intent) {

        super.onNewIntent(intent);

        setIntent(intent);
        checkMessage(intent);

        setIntent(new Intent());
    }
} 
```

请注意：我无权访问 PushManager.onStartup()，因为它是由 PushWoosh 提供的。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:11:18.573

那很奇怪。Pushwoosh 使用 GCM，它在设备重启后开箱即用。您只需注册一次推送通知，然后在重新启动后 GCM 会自行处理。

# android - HTML5 游戏在 appmobi 启动板中运行，但不是作为 apk 构建

> ID：15405789
> 
> 赞同：0
> 
> 时间：2013-03-14T09:45:12.320
> 
> 标签：android, appmobi

嗨，我创建了纯 html5/css3/js 游戏，并使用 appmobi（应用程序实验室启动器）为 Android 进行了测试。触摸事件在启动器上运行良好，但是当我通过 app.mobi xdk 创建具有相同源的构建时（触摸事件不起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:45:52.233

如果您的游戏大小小于 9.MB，请使用 phonegap。

# java - 在安装时启动应用程序，也没有启动器图标

> ID：15405791
> 
> 赞同：0
> 
> 时间：2013-03-14T09:45:17.543
> 
> 标签：java, android, eclipse

我正在构建一个没有启动器图标的应用程序。我需要在第一次从 Play 商店安装该应用程序时启动它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:56:49.867

如果您的目标是 Android 3.0 及更低版本，则可以在安装应用后使用安装程序发送的广播，如此[处](https://stackoverflow.com/q/4093150/1069068)所述。

但是，从 Android 3.0 开始，在用户在您的应用中至少打开一次 Activity 之前，您无法接收广播。因此，您无法在 Android 3.1 及更高版本上自动启动。

# backbone.js - 自定义同步的主干成功回调

> ID：15405793
> 
> 赞同：1
> 
> 时间：2013-03-14T09:45:26.437
> 
> 标签：backbone.js

我在模型中编写了自己的同步方法，然后`model.save()`用回调调用成功和错误不起作用。我究竟做错了什么？

我认为删除文件的处理程序：

```
dropHandler: function( e ) {
    e.stopPropagation()
    e.preventDefault()
    var files = e.dataTransfer.files
    _.each( files, function( file ) {
      this.tmpRetusjId++
      this.collection.add({
        tmpId: this.tempRetusjId,
        file: file
      })
    }, this )
    return false
  }, 
```

在这里，我收听集合的“添加”，如果成功，我想为新文件呈现缩略图：

```
addFile: function( model, index ) {
    model.save({}, {
      success: _.bind( function( m, xhr ) {
        console.log("success")
      }, this ),
      error: _.bind( function( m, xhr ) {
        console.log("noes!")
      }, this )
    })
  }, 
```

我自己的同步方法：

```
sync: function( method, model, options ) {
    // options.error() - this works
    // options.success() - this does not work
    // return
    if ( method == "create" ) {
      if ( !model.has("file") || !model.has("tmpId") ) {
        return
      }
      var form = new FormData()
      form.append( 'file', model.get("file") )
      form.append( 'id', bootstrap.bestilling.id )
      form.append( 'tmpId', model.get("tmpId") )
      $.ajax({
        type: 'POST',
        url: 'someurl',
        data: form,
        dataType: 'json',
        contentType: false,
        cache: false,
        processData: false,
        success: function( file ) {
          if ( "tmpId" in file && 
            file.tmpId == model.get("tmpId") ) {
            for ( var i in file ) {
              model.set( i, file[i] )
            }
            model.set( "id", file.foto_fil_id )
            if ( "success" in options ) {
              options.success( model, file )
            }
          }
        },
        error: function( xhr ) {
          if ( "error" in options ) {
            options.error( model, xhr )
          }
          //self.addErrorFile( xhr.responseText )
        }
      })
    } else {
      return Backbone.sync( method, model, options )
    }
  } 
```

错误回调将记录到控制台，但成功给了我这个：

```
Uncaught TypeError: Cannot set property 'attributes' of undefined backbone-min.js:16 
```

现在，如果我与模型同步 console.log(options)：

```
error: function () { [native code] }
parse: true
success: function (a,b,c){a.attributes=g;var k=a.parse(b,c);c.wait&&(k=f.extend(d||{},k));if(f.isObject(k)&&!a.set(k,c))return!1;e&&e(a,b,c)}
validate: true 
```

# php - 使用表的 mysql 查询选择定义的字符串值

> ID：15405798
> 
> 赞同：1
> 
> 时间：2013-03-14T09:45:46.303
> 
> 标签：php, mysql

我有一个名为 username 的表，例如`John Doe`，我想在 $username 的 php 操作中获取此值！我用这个

```
mysql_query("SELECT * FROM photos WHERE username = '$username'"); 
```

它工作正常。我将其用于搜索字段以返回不同的用户及其个人资料。问题是，我怎样才能只用名字进行搜索，`John`然后他又给了我`John Doe`。我不想创建名字和姓氏！

谢谢特德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:47:02.330

```
SELECT * FROM photos WHERE username LIKE '%$username%'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:55:03.760

关于安全性的一句话：如果 $username 是您网站中搜索字段的值，您应该正确转义给定的搜索模式，而不是让您的数据库注入。这可以通过以下代码简单地完成：

```
$escaped_username = mysql_real_escape_string($_REQUEST['username']);
mysql_query("SELECT * FROM photos WHERE username LIKE '%$escaped_username%'"); 
```

这将在您的表中执行安全搜索，可能只使用名​​字或姓氏。

图例： $_REQUEST['username'] 是您的搜索表单的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:47:20.347

您可以`LIKE`用于模式匹配，

```
SELECT * FROM photos WHERE username LIKE CONCAT('%','$username', '%') 
```

但这会在大型数据库中执行缓慢，因为它不会使用`index`导致执行`FULL TABLE SCAN`。

```
$query = "SELECT * FROM photos WHERE username LIKE CONCAT('%',$username, '%')"
mysql_query($query); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T09:47:23.443

您可以`LIKE`在查询中使用 MySQL 子句

```
SELECT * FROM photos WHERE username LIKE '$username%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T09:53:29.087

您可以使用 CONCAT 函数获取全名

```
 SELECT CONCAT(First_name, ' ', Lastnale,) 
  FROM photos 
  WHERE username LIKE '$username%' 
```

# c++ - 使用 gzip_compressor 产生不同的文件大小

> ID：15405800
> 
> 赞同：0
> 
> 时间：2013-03-14T09:45:49.083
> 
> 标签：c++, boost

我使用 gzip_compressor() 来压缩输出文件。为此，我使用了两种方法。共同的部分是

```
std::ofstream traceOut;
traceOut.open("log.gz", std::ios_base::out);
struct traceRec {
  traceRec(uint64_t c) : cycle(c) {};
  uint64_t cycle;
};
void writeTrace(traceRec &rec)
{
  boost::iostreams::filtering_ostream o;
  o.push(boost::iostreams::gzip_compressor());
  o.push(traceOut);
  // METHOD 1 OR 2
} 
```

**方法一**

我用

```
 o.write(reinterpret_cast<const char*>(&rec.cycle), sizeof(rec.cycle)); 
```

使用此实现，文件大小为 380K！

**方法二**

我用

```
 traceOut << rec.cycle << std::endl; 
```

使用此实现，文件大小为 78K！

那么为什么他们有不同的大小？另一件事是，如果我不使用 gzip_compressor 并直接写入文件

```
std::ofstream traceOut;
traceOut.open("log.gz", std::ios_base::out);
...
traceOut << rec.cycle << std::endl; 
```

文件大小为 78K。

所以有两个问题：

1-使用或不使用`gzip_compressor`对文件大小没有影响

2-使用不同的实现`gzip_compressor`产生不同的文件大小

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:51:49.697

operator << 可能使用数字的文本表示，而 write 方法采用完整的变量大小。

因此，例如，如果您有一个“13”的周期，在“写入”的情况下，您将消耗 8 个字节，而在文本表示中您将仅消耗 2 个字节。

压缩后的效果更加显着，因为将数字写成文本时，只用到了 10 个字符，（熵非常低），所以冗余度和可压缩性都很高。

另一方面，如果您的循环计数器通常非常大（> 99999999），那么 write 方法将提供更好的压缩。

# .net - .Net：是否有字典可以有效地将其内容存储/加载到文件中？

> ID：15405805
> 
> 赞同：1
> 
> 时间：2013-03-14T09:46:10.550
> 
> 标签：.net, vb.net, file, dictionary

在（VB）.NET（4.0 框架）中，我需要一个`Dictionary<string, string>`可以有效地存储其内容，或者更好地将其内部表示为文件并稍后加载的文件。

Ruby 在 PStore 中有这样的东西，请参阅[ruby​​ 文档](http://ruby-doc.org/stdlib-1.9.2/libdoc/pstore/rdoc/PStore.html "红宝石文档")。

目的是为例如从数据库中的文本翻译准备一个查找字典，并将其存储在一个磁盘文件中，该文件可以快速加载多次以生成输出。所以这不应该逐行读取文件并用键值对填充字典，而是直接将文件内容加载到其内部状态表示中。

我认为这应该是可能的，但如果您不这么认为，我也希望看到您的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:07:35.017

正如我评论的那样，我仍然认为您获得的任何好处都会被实施的努力所抵消。我建议查看一些[BerklyDB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)或[HamsterDB](http://hamsterdb.com/about)，我在几分钟内就搜索了这两者。

如果真的想手动实现某些东西，我想也许不是用`Marshal`类编写你自己的内存管理器来确保你的数据结构存储在一个可以快速编组到文件支持的连续块中，我会看看使用持久[内存映射文件](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)。然后你可以使用[CreateViewAccessor](http://msdn.microsoft.com/en-us/library/dd267546.aspx)来获取一个`MemoryMappedViewAccessor`可以用来读写原语和数据结构的实例。[将其与任何大学文本或诸如B-Tree 之](http://en.wikipedia.org/wiki/B-tree)类的开源实现或[类似](http://en.wikipedia.org/wiki/B+_tree)的东西结合起来，您就可以得到一些工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:04:25.513

如果您真的想为这个特定任务保持简单，我会这样：

```
class Pair {
    public string Key { get; set; }
    public string Value { get; set; }
}

var dict = new Dictionary<string, string>() {
    {"asd", "zxc"},
    {"111", "zzs"}
}; // Populate your dictionary somehow
var list = dict.ToList().Select( p => new Pair() { Key = p.Key, Value = p.Value} );
//Then XML-serialize this list 
```

要阅读它：

```
//De-XML-serialize that list
dict = list.ToDictionary( p => p.Key, p => p.Value ); 
```

附带的好处是您可以仅使用文本编辑器修改存储的列表。

# javascript - facebook js登录页面不断在IE10中重新加载

> ID：15405807
> 
> 赞同：1
> 
> 时间：2013-03-14T09:46:18.230
> 
> 标签：javascript, facebook, authentication, login, reload

我已经为我的 facebook 页面标签应用程序实现了一个简单的 facebook 登录脚本。它假设向用户验证应用程序。它在所有浏览器中都可以正常工作，但 IE（我有 IE10 用于测试兼容性）。在 IE 中，它会按预期带来身份验证弹出窗口，用户可以很好地对其进行身份验证，但是它不会像在其他浏览器中那样打开主应用程序页面 (liked.php)，而是不断重新加载自身 (login.php)。我知道在我们这个时代没有人应该使用 IE，但有些人确实需要它，我需要它来为他们工作:) 谢谢！代码在这里：

```
<body>
<div id="fb-root"></div>
<fb:login-button size="medium" onlogin="login()" scope="email, user_birthday">Logga in med Facebook</fb:login-button>
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'myid', // App ID
      channelUrl : '//www.mydomain.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
      // connected

    } else if (response.status === 'not_authorized') {
      // not_authorized
      //login();
    } else {
      // not_logged_in
      //login();
    }
   });

  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

   function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            window.location = 'liked.php';
        } else {
            // cancelled
        }
    });
}
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:27:58.043

这就是我的问题的答案，因为我注意到大多数用于标签应用程序的 Facebook 连接解决方​​案（FB 中的 iframe）在 IE10 中都有：

[https://stackoverflow.com/a/7083831/2169059](https://stackoverflow.com/a/7083831/2169059)

# java - 如何在java（Android）中将字符串转换为条件表达式？

> ID：15405809
> 
> 赞同：1
> 
> 时间：2013-03-14T09:46:26.323
> 
> 标签：java, android, string, conditional-statements

我有一个字符串“a>b”，我想转换成一个普通的条件表达式。如何在**Android**中做到这一点意味着只使用 JSE。

```
String abc = "a>10";
if(abc){
 // TO SOME TASK
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T03:21:31.737

我建议使用返回布尔结果的“助手”方法，因此语句看起来像这样

```
String abc = "a>10";

if(stringToConditional("a>b"))
{
  //TO SOME TASK
}

private boolean stringToConditional(String str)
{
  //code here
} 
```

从那里，“助手”方法可以使用正则表达式将字符串分成三个部分。可以在[此处](http://docs.oracle.com/javase/tutorial/essential/regex/intro.html)找到有用的、教唆密集的教程。从那里，可以使用 JSE 方法解析 a 和 b。它看起来像这样：

```
String a = "1.21";
double a1 = Double.parseDouble(a); //a1 is now equal to 1.21 
```

从那里开始，下一步是将条件字符串（“>”、“<=”、“==”等）与已知运算符列表进行比较，然后测试操作并将结果作为方法返回布尔返回。例如：

```
String operator = ">=";
if (operator.equals(">="))
{
  return a1>=b1;
}
... 
```

希望我不是太不清楚或离题。我很乐意详细说明、澄清或简化。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T12:57:47.497

在 Java 中，我们可以使用[javaScriptEngine API](https://docs.oracle.com/javase/7/docs/technotes/guides/scripting/programmer_guide/)：

```
String condExptn="34>5&&78<90";
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript");
result = engine.eval(condExptn.toString().trim()); 
```

# ios - 如何在 Shinobi Charts 中将条形宽度设置为固定值？

> ID：15405814
> 
> 赞同：2
> 
> 时间：2013-03-14T09:46:40.940
> 
> 标签：ios, graph, charts, bar-chart, shinobi

我正在尝试习惯为 iOS 开发的 Shinobi 图表。我已经下载了试用版并尝试使用它绘制一些示例图表。图表在演示应用程序中看起来相当不错。但有一件事我注意到，在使用类 SCHartColumnSeries 绘制条形图时，条形的宽度会根据可用于绘制图表的框架进行调整。我希望它是固定的（比如 20 像素），无论存在多少条，并且如果所需的宽度大于分配的宽度（在为图表分配框架时），那么只有图表的某些部分是可见的并且用户可以滚动用于查看剩余柱的图表（这在 Core Plot 中是可能的）。如何使用 Shinobi 图表实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:07:52.103

Shinobi 可以做到这一点，但恐怕这不是设置固定宽度属性的简单案例。我只是尝试过这样做，但它并不太复杂！

我的建议是这样设置图表：

```
chart = [[ShinobiChart alloc] initWithFrame:self.view.bounds];
[chart setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];
[chart setDatasource:d];

[chart setXAxis:[SChartNumberAxis new]];
[chart setYAxis:[SChartNumberAxis new]];
[[chart xAxis] setEnableGesturePanning:YES];
[[chart xAxis] setEnableGestureZooming:NO];

[chart.xAxis setDefaultRange:[[SChartNumberRange alloc] initWithMinimum:@5 andMaximum:@10]]; 
```

最重要的部分是最后 3 行。通过关闭缩放，您可以让图表具有固定的缩放级别，这意味着条形保持相同的宽度。您可以打开平移以允许用户滚动以查看不同的条形图。

最后一行设置默认范围。在这里，我刚刚将其设置为 5 到 10 之间的值。这意味着图表沿 x 轴显示 5 到 10 之间的值。

通过执行上述操作，这意味着您的列将具有固定的宽度！您可能需要根据您拥有的数据点数量进行一些调整和/或计算，以便找出您必须将默认范围设置为的内容。例如，如果它们是可变的，您将需要考虑数据点的数量、列之间的填充和列间填充以及可用的像素数）。

我意识到这是一个相当简单的答案，但它应该给你一个很好的起点！

# javascript - 截断div内的文本

> ID：15405817
> 
> 赞同：15
> 
> 时间：2013-03-14T09:46:53.687
> 
> 标签：javascript, html, css

我有一些动态文本（来自数据库），我需要适应`div`

我`div`的尺寸固定。但是，当文本变得太长时，它会分成两行。我想在较长文本的末尾放置三个点，以使它们适合一行。

例如：`My really long text`变成`My really lo...`

我进行了几次尝试，但基本上所有这些都取决于计数字符。也就是说，无论如何，并不是很幸运，因为字符没有固定的宽度。例如，大写`W`字母比小写字母大得多`i`

因此，我遇到了字符计数方法的两个主要问题：

1.  如果文本有许多窄字符，它会被剪切并附加...，即使文本在修剪前实际上适合一行。

2.  当文本包含许多宽字符时，即使我将其剪切到最大字符数并附加点，它也会以两行结束。

这里有没有考虑文本实际宽度而不是字符数的解决方案（JavaScript 或 CSS）？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-14T09:51:55.923

使用这些样式：

```
white-space: nowrap;      /*keep text on one line */
overflow: hidden;         /*prevent text from being shown outside the border */
text-overflow: ellipsis;  /*cut off text with an ellipsis*/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T09:56:43.363

除此之外`ellipsis`，我建议在鼠标悬停时使用`tooltip`.

[小提琴](http://jsfiddle.net/73ZwT/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T09:56:52.827

我建议[Trunk8](https://github.com/rviscomi/trunk8)

然后，您可以使任何文本适合 div 的大小，它会修剪会导致超出 1 行的文本（选项可用于设置允许的行数）

例如

```
$('.truncate').trunk8(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T09:50:44.850

你应该看看 css 省略号：[http ://www.w3schools.com/cssref/css3_pr_text-overflow.asp](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)

# ssis - 当所有子转换显示为绿色时，SSIS 数据流任务显示为黄色

> ID：15405820
> 
> 赞同：1
> 
> 时间：2013-03-14T09:47:03.487
> 
> 标签：ssis

我有一个 foreach 循环容器，其中包含一个流入执行 sql 任务的数据流任务。

当我运行我的包时，数据流任务中的所有转换最终都会变成绿色——由于输入数据错误，有一些错误，但这些都被重定向到各种输出文件。

但是，当我转到控制流时。我的数据流任务是黄色的。Execute sql 任务未执行。

执行结果中没有错误。

这是怎么回事？

# android - Android：在 oncreate 中循环声音文件

> ID：15405821
> 
> 赞同：1
> 
> 时间：2013-03-14T09:47:06.070
> 
> 标签：android, audio, media-player

我想在`onCreate()`方法中无限循环我的声音 mp3 文件。

我在 onCreate 方法中的代码如下：

```
 mMediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.sound_7);
  mMediaPlayer.setVolume(0.2f, 0.2f);
  Log.e("beep","started1");
  mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {
      public void onCompletion(MediaPlayer arg0) {
          mMediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.sound_7);
          mMediaPlayer.start();
      }
  });
  mMediaPlayer.setLooping(true);
  Log.d("beep","started0");
  mMediaPlayer.start(); 
```

但是这段代码只播放我的音频文件一次。请帮忙 ！！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:54:53.607

尝试这个

```
void playMp3()
{

    mMediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.sound_7);
    mMediaPlayer.setVolume(0.2f, 0.2f);
            Log.e("beep","started1");
    mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {
                public void onCompletion(MediaPlayer arg0) {
                    playMp3();
                }
         });
    Log.d("beep","started0");
    mMediaPlayer.start();
} 
```

如果你的声音文件很小，那么`SoundPool`而不是`MediaPlayer`

```
private void initializeSoundPool(){
        mSoundPool = new SoundPool(2, AudioManager.STREAM_MUSIC, 0);
        mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
                public void onLoadComplete(SoundPool soundPool, int sampleId,
                        int status) {
                    loaded = true;
                    playFile();
                    initializeSoundPool();
                }
            });
            soundID = mSoundPool.load(this, R.raw.glassbreak, 1);        
        } 
```

调用这个方法

```
private void playFile(){
 AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
         float actualVolume = (float) audioManager
                 .getStreamVolume(AudioManager.STREAM_MUSIC);
         float maxVolume = (float) audioManager
                 .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
         float volume = actualVolume / maxVolume;
         if (loaded) {
             mSoundPool.play(soundID, volume, volume, 1, 0, 1f);
             Log.e("Test", "Played sound");
         }
} 
```

# magento - magento 将其缓存的图像存储在哪里？

> ID：15405823
> 
> 赞同：5
> 
> 时间：2013-03-14T09:47:11.313
> 
> 标签：magento, caching

我知道magento会根据需要调整原始产品图像的大小并以不同的大小对其进行多次缓存。

1.  这些 chached 图像存储在哪里（路径）？
2.  当您从缓存管理中刷新图像缓存时，它们会被删除吗？
3.  如果我要手动缓存一些图像，当您从缓存管理中清除缓存时，我必须将它们放在哪里才能将它们删除？

谢谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T10:03:24.190

1.  `BaseUrl/media/catalog/product/cache`保存在文件夹中的所有缓存图像

2.  是的

3.  签出`BaseUrl/media/catalog/product/cache`您将得到答案的文件夹

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T04:22:38.443

这里的答案是调整大小的图像已经单独保存到普通缓存中，在 media/catalog/product/cache 中而不是在 var/cache/ 中。

如果您查看系统 > 缓存管理，您会看到有一个单独的按钮用于清除这些图像，因此如果您确实需要清除图像缓存，请使用该按钮。

# iphone - 无法将数据存储在iphone的数据库中

> ID：15405825
> 
> 赞同：0
> 
> 时间：2013-03-14T09:47:16.430
> 
> 标签：iphone, ios

我是 iphone 编程新手。我使用的是 Mac 10.7.3，因为我无法将数据存储在数据库中在这段代码中

```
 NSString *docsDir;
    NSArray *dirPaths;
// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];
// Build the path to the database file
    databasePath =  [docsDir stringByAppendingPathComponent: @"test.db"];
    NSLog(@"%@",databasePath);
    NSFileManager *fn=[NSFileManager defaultManager];
    NSError *error;
    BOOL success=[fn fileExistsAtPath:databasePath];

    if(!success) {

NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"test.db"];
success = [fn copyItemAtPath:defaultDBPath toPath:databasePath error:&error];
    }
    //NSLog(@"sdasdassd%@",databasePath);
    NSLog(@"hai");
    sqlite3_stmt  *statement;

    const char *dbpath = [databasePath UTF8String];
            if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
        {

            NSLog(@"hai2");
 NSString *insertSQL = [NSString stringWithFormat: @"insert into path(imagepath,audiopath) values (\"%@\",\"%@\")",name.text,email.text];

            const char *insert_stmt = [insertSQL UTF8String];

            sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);
            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                    NSLog(@"details added");    

            } else {
                    NSLog(@"details not added");    
            }
            sqlite3_finalize(statement);
            sqlite3_close(contactDB);

        }
    } 
```

谢谢阿斯拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:07:25.723

首先，当应用程序加载时，然后将数据库复制到应用程序文件夹中

应用程序委托文件的代码 ::

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

      NSString *docsDir;
      NSArray *dirPaths;

      // Get the documents directory
      dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
      docsDir = [dirPaths objectAtIndex:0];

      //Build the path to the database file
      databasePath =  [docsDir stringByAppendingPathComponent: @"test.db"];
      NSLog(@"%@",databasePath);

      NSFileManager *fn=[NSFileManager defaultManager];
      NSError *error;

      BOOL success=[fn fileExistsAtPath:databasePath];

      if(!success) {

          NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"test.db"];
          success = [fn copyItemAtPath:defaultDBPath toPath:databasePath error:&error];
      }
} 
```

然后，在 Save Button Click 上，
这里`[app dbpath]`是从委托文件访问的 NSString。
代码 ：：

```
 sqlite3_stmt  *statement;

 const char *dbpath = [databasePath UTF8String];

 if (sqlite3_open([[app dbpath] UTF8String], &contactDB) == SQLITE_OK) {
 {
    NSString *insertSQL = [NSString stringWithFormat: @"insert into path(imagepath,audiopath) values (\"%@\",\"%@\")",name.text,email.text];

    const char *insert_stmt = [insertSQL UTF8String];

    if (sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL) == SQLITE_OK) {

        NSLog(@"details added");

    }

    else {
        NSLog(@"details not added");
    }

    sqlite3_finalize(statement);
    sqlite3_close(contactDB);
} 
```

它可能对你有帮助。
谢谢。

# c++ - 新操作员从已分配的缓冲池中获取内存

> ID：15405830
> 
> 赞同：0
> 
> 时间：2013-03-14T09:47:32.757
> 
> 标签：c++, memory-leaks, new-operator

我添加了一个新类并使用`new`.

我看到程序因此而崩溃。在进一步调试中，我发现有一个现有的类是使用缓冲池中的新位置分配的。

那么我的`new`操作员是否有可能不知道这一点并从该缓冲区分配内存？

我如何确认这一点以及如何避免这个问题而不是从该池中分配？

代码片段：在分配池之前调用我的代码。

使用泳池的地方

```
// Initialize buffer pool for path pbject buffers

    UINT32 size = CHOP_MAX_PATH_NUM * sizeof(Buffer<pathElement>);

/* Create the path manager for each channelized sonet line */

    for (UINT8 lineId = 0; lineId < maxLines; lineId++) {
       /* Get the max STS Paths for this line */
       chanSonetLineMgr[lineId] =
          new ChopOC48SonetPathMgr(
              bay, lineId, &pathElementPool,
              NULL, dynamic_cast<SonetLineNg *>(linesNg[lineId]),
              NULL, //Alert: When Chop Path Mgr is ready 
```

# c# - 将 XML 反序列化为对象的问题 - XML 文档中存在错误 (0, 0)

> ID：15405832
> 
> 赞同：7
> 
> 时间：2013-03-14T09:47:35.313
> 
> 标签：c#, .net, xml, serialization

我正在尝试从一个简单的 XML 文档中读取元素值并将它们绑定到一个对象，但是我的 XML 文档遇到了问题。我已经对其进行了验证，并且可以确认文档本身没有问题，但是在线扩展了结果：

```
var nodes = from xDoc in xml.Descendants("RewriteRule")
                select xmlSerializer.Deserialize(xml.CreateReader()) as Url; 
```

显示*“XML 文档中存在错误 (0, 0)”*

内部异常读取`<RewriteRules xmlns=''> was not expected.`

我不确定我在这里做错了什么？

我的 XML 如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<RewriteRules>
    <RewriteRule>
        <From>fromurl</From>
        <To>tourl</To>
        <Type>301</Type>
    </RewriteRule>
</RewriteRules> 
```

加载 XML 文件并尝试对其进行反序列化的代码：-

```
public static UrlCollection GetRewriteXML(string fileName)
{
    XDocument xml = XDocument.Load(HttpContext.Current.Server.MapPath(fileName));
    var xmlSerializer = new XmlSerializer(typeof(Url));

    var nodes = from xDoc in xml.Descendants("RewriteRule")
                select xmlSerializer.Deserialize(xml.CreateReader()) as Url;

    return nodes as UrlCollection;
} 
```

我的 Url 对象类：-

```
[Serializable]
[XmlRoot("RewriteRule")]
public class Url
{
    [XmlElement("From")]
    public string From { get; set; }
    [XmlElement("To")]
    public string To { get; set; }
    [XmlElement("Type")]
    public string StatusCode { get; set; }

    public Url()
    {
    }

    public Url(Url url)
    {
        url.From = this.From;
        url.To = this.To;
        url.StatusCode = this.StatusCode;
    }
} 
```

谁能看到我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:20:03.270

我对这`from select`句话不太熟悉，但似乎你只是传入`xml`which is the whole `XDocument`，而不是 the `XElement`that is your `RewriteRule`。这就是为什么您会收到`RewriteRules`未知的错误消息 -`XmlSerializer`需要一个`RewriteRule`.

我设法改写了您的代码`LINQ`（但如果您知道如何从`from select`语句中获取单个元素，那应该同样有效）。

这应该给你正确的结果 -`rr`是`XElement`从返回的`Descendants`：

```
public static IEnumerable<Url> GetRewriteXML()
{
    XDocument xml = XDocument.Load(HttpContext.Current.Server.MapPath(fileName));

    var xmlSerializer = new XmlSerializer(typeof(Url));

    var nodes = xml.Descendants("RewriteRule")
                .Select(rr => xmlSerializer.Deserialize(rr.CreateReader()) as Url);

    return nodes;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T10:00:08.270

**编辑：** 您的 Url 类的名称不匹配。您需要将其重命名为“RewriteRule”或以这种方式定义它：

```
[Serializable]
[System.Xml.Serialization.XmlRoot("RewriteRule")]
public class Url
{
    [XmlElement("From")]
    public string From { get; set; }
    [XmlElement("To")]
    public string To { get; set; }
    [XmlElement("Type")]
    public string StatusCode { get; set; }

    public Url()
    {
    }
    public Url(Url url)
    {
        url.From = this.From;
        url.To = this.To;
        url.StatusCode = this.StatusCode;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:13:27.563

当您将其直接反序列化为类的实例时，我的方法更常用。

如果你想使用 XDocument，你可以这样写。我不在我的代码中使用 XDocument。因为我需要反序列化完整的 xml 包，所以我直接使用根节点的反序列化来完成。因此，我在上一篇文章中建议将根节点放在正确的位置。

使用 XDocument，您可以直接访问子部分。这是为您的目的而工作的代码，但可能还有其他人可以帮助您更优雅地设置此代码：

```
public static UrlCollection GetRewriteXML(string fileName)
    {
        XDocument xml = XDocument.Load(HttpContext.Current.Server.MapPath(fileName));
        var urls = from s in xml.Descendants("RewriteRule")
                   select new
                   {
                       From = (string)s.Element("From").Value,
                       To = (string)s.Element("To").Value,
                       StatusCode = (string)s.Element("Type").Value
                   };
        UrlCollection nodes = new UrlCollection();
        foreach (var url in urls)
        {
            nodes.Add(new Url(url.From, url.To, url.StatusCode));
        }
        return nodes;
    }

[Serializable]
public class Url
{
    [XmlElement("From")]
    public string From { get; set; }
    [XmlElement("To")]
    public string To { get; set; }
    [XmlElement("Type")]
    public string StatusCode { get; set; }

    public Url()
    {
    }

    public Url(string From, string To, string StatusCode)
    {
        this.From = From;
        this.To = To;
        this.StatusCode = StatusCode;
    }

    public Url(Url url)
    {
        url.From = this.From;
        url.To = this.To;
        url.StatusCode = this.StatusCode;
    }
} 
```

# c# - 中继器内的文本框没有使 UpdateProgress 触发

> ID：15405835
> 
> 赞同：1
> 
> 时间：2013-03-14T09:47:55.460
> 
> 标签：c#, asp.net, updateprogress

我在 .aspx 中有以下代码

```
<asp:UpdatePanel ID="upnGrid" runat="server" UpdateMode="Conditional">
                                    <ContentTemplate> 
            <asp:Repeater ID="rpt1" runat="server" OnItemDataBound="rpt1_ItemDataBound">
                <ItemTemplate>

                    <table width="100%">
                        <tr>
                            <td align="right" width="25%">
                                <asp:Label ID="lbl1" Font-Bold="true" Font-Size="16px" Text=' <%# DataBinder.Eval(Container.DataItem,"Name") %>'
                                    runat="server" />
                            </td>
                            <td>
                                <asp:HiddenField ID="hdn1" Value='<%# DataBinder.Eval(Container.DataItem, "Length") %>'
                                    runat="server" />
                            </td>
                            <td>
                                <asp:TextBox ID="txt1" Font-Size="16px" Text='<%# DataBinder.Eval(Container.DataItem, "Value") %>'
                                   AutoPostBack="true" Width="100px" OnTextChanged="txt1_TextChanged" runat="server" onkeydown="javascript:return OntxtEnter(event);"/>
                            </td>
                        </tr>
                    </table>

                </ItemTemplate>
            </asp:Repeater>
            </ContentTemplate>
                                    <%--<Triggers>
                                            <asp:AsyncPostBackTrigger ControlID="rpt1"/>
                                    </Triggers>--%>
                                    </asp:UpdatePanel> 
```

UpdateProgress 的代码位于 aspx 的末尾 -

```
<asp:Panel ID="UpdateProgressPanel" runat="server">
    <center>
        <asp:UpdateProgress ID="UpdateProgress2" runat="server" AssociatedUpdatePanelID="upnGrid"
            DynamicLayout="true">
            <ProgressTemplate>
                <img src="../Images/loading.gif" alt="">
            </ProgressTemplate>
        </asp:UpdateProgress>
    </center>
</asp:Panel>
<ajaxtoolkit:modalpopupextender id="ModalProgress" runat="server" targetcontrolid="UpdateProgressPanel"
    popupcontrolid="UpdateProgress2" dropshadow="false" backgroundcssclass="modalBackground">
</ajaxtoolkit:modalpopupextender> 
```

正如一些答案所建议的那样，我让 AsyncPostBackTrigger 在后面的代码中注册，比如 -

```
var control = e.Item.FindControl("txt1");
ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(control); 
```

我没有得到，为什么它不起作用。

请建议。

**编辑**

我尝试在 UpdatePanel 中仅放置所需的文本框，它显示以下错误

```
'System.Web.UI.Control' does not contain a definition for 'DataItem' and no extension method 'DataItem' accepting a first argument of type 'System.Web.UI.Control' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:08:22.593

> 尝试修改您的`UpdateProgress`控件，如下所示：

```
<asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1">
    <ProgressTemplate>
        <asp:Panel ID="Panel1" runat="server">
                    <asp:Panel ID="Panel2" runat="server">
                        <asp:ImageButton ID="ibProgress" runat="server" ImageUrl="~/Images/progress.gif"
                            Visible="true" />Loading...
                    </asp:Panel>
        </asp:Panel>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:15:08.100

你不能以这种方式使用它。因为中继器内部的文本框 ID 是不同的。你必须遵循不同的机制。

# twitter-bootstrap - 使用 box-sizing : border-box 和 Twitter Bootstrap 2.x，我们可以在不破坏一切的情况下轻松完成吗？

> ID：15405837
> 
> 赞同：10
> 
> 时间：2013-03-14T09:48:00.313
> 
> 标签：twitter-bootstrap, css

我在上一个项目中一直在使用“边框框模型”。这有很多优点，我不会在这里解释。但你可以在这里阅读：[css-tricks 中的边框框](http://css-tricks.com/box-sizing/ "css-tricks 中的边框")

现在我开始了一个更大的项目，我们认为 twitter bootstrap 将是满足我们需求的一个很好的解决方案。我想知道是否可以在不破坏所有内容的情况下使其“边框化”。有没有人试过这个，后果是什么/会是什么？调整太多？真正的改善？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T09:24:58.193

是的。

这是一个可以在 Bootstrap 中使用的**mixin 。**它将自动添加所有供应商前缀。

```
*, *:before, *:after {
    .box-sizing(border-box);
}

input {
    .box-sizing(content-box);
} 
```

输入仍然需要内容框，否则它们会太小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T10:11:37.037

它极大地简化了流体/响应式设计的工作：有一些复杂的布局和需要一致间距的情况，如果不使用`border-box`.

我最近用过这个（[FTW！](http://paulirish.com/2012/box-sizing-border-box-ftw/)）：

```
*, *:after, *:before {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

在一个相当大的网站上，发现它确实解决了很多问题。如果您需要对 IE7 的支持，我的方法是为该浏览器提供网站的固定宽度版本，并仅在需要时使用[此 polyfill](https://github.com/Schepp/box-sizing-polyfill)。*

我真的没有发现任何缺点 - 能够指定 50% 宽度的两列，添加`padding`并知道它会起作用，这是一种解脱。在您可能依赖标准的地方`box-model`，您始终可以针对特定元素恢复到标准。

**引导程序特定**

关于具体使用 Bootstrap，您可能会遇到一些问题 - 我建议您对其进行测试。有趣的是，将上面的 CSS 添加到[Bootstrap 主页](http://twitter.github.com/bootstrap/)没有任何问题。

Bootstrap 2.x 中内置的主网格系统使用`float`and `margin`，因此更改`box-model`不会对此产生影响（它只会让您能够`padding`直接添加到列中）。

[Bootstrap 3](https://github.com/twitter/bootstrap/pull/6342)正在转向移动优先的方法（并完全放弃对 IE7 的支持）。包括：

> [A] 新的单一网格系统（仍在使用`.row`）使用百分比宽度、填充，而`box-sizing: border-box`不是像素宽度和边距。

因此，他们显然相信采用这种方法的好处。

* 我的想法是我已经依赖 Modernizr 中的 HTML shim，因此浏览器的布局已经依赖 JS。使用 SASS 将宽度存储为变量，这非常顺利。也就是说，如果任何特定项目对旧 IE 的使用率较高，则这种方法变得不太合适。

# linux - linux-kernel中进程的当前目录

> ID：15405842
> 
> 赞同：2
> 
> 时间：2013-03-14T09:48:08.573
> 
> 标签：linux, linux-kernel, filesystems, linux-device-driver

是否可以通过获取进程当前目录`struct task_struct`？我可以看到它`struct fs_struct`有`pwd`指针，但我无法获得存储此信息的确切变量。

另外，我们可以更改当前目录的值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:05:58.017

你在一个相当旧的内核上工作，所以我不得不做一些挖掘工作。处理这类事情的一种更简单的方法是查看信息是否在 /proc 中并查看它的作用。如果我们在 fs/proc 中 grep 查找 cwd，我们会发现：

```
static int proc_cwd_link(struct inode *inode, struct dentry   **dentry,   struct vfsmount **mnt)
{
    struct fs_struct *fs;
    int result = -ENOENT;
    task_lock(inode->u.proc_i.task);
    fs = inode->u.proc_i.task->fs;
    if(fs)
        atomic_inc(&fs->count);
    task_unlock(inode->u.proc_i.task);
    if (fs) {
        read_lock(&fs->lock);
        *mnt = mntget(fs->pwdmnt);
        *dentry = dget(fs->pwd);
        read_unlock(&fs->lock);
        result = 0;
        put_fs_struct(fs);
    }
    return result;
} 
```

proc inode 指向任务（inode->u.proc_i.task，也由 task_lock() 东西给出）。查看 task_struct 定义，它有一个对 struct fs_struct *fs 的引用，它具有 pwd 的 dentry 指针。然而，将 dentry 条目转换为实际名称是另一个练习。

# php - 推特在 Modal 中的引导表单

> ID：15405843
> 
> 赞同：3
> 
> 时间：2013-03-14T09:48:09.487
> 
> 标签：php, html, forms, twitter-bootstrap, modal-dialog

我正在使用 twitter 的引导程序来制作一个 WebApp，在该应用程序的一个功能上，我需要在里面有一些带有表单的模式。这些表单将通过一些 PHP 脚本填充数据。我在使用表单的模式功能时遇到问题，编辑数据正确显示在字段中，但我似乎无法提交表单。

这是我的代码：

```
 <a href="#edit_user_<?php echo $row['id_user'] ?>" role='button' data-toggle='modal' data-original-title='Edit User' class='btn btn-small btn-info time-link'><i class='icon-pencil icon-white'></i></a>
                  <button data-toggle='tooltip' data-original-title='Delete User' class='btn btn-small btn-danger time-link'><i class='icon-trash icon-white'></i></button>
          <?php
             echo "</td>";
             echo "</tr>";?>      

        <div id="edit_user_<?php echo $row['id_user']; ?>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel">Modal header</h3>
            </div>
             <div class="modal-body">
                <form action="" method="POST">
                    <label for="name">Name</label>
                    <input type="text" name="name" value="<?php echo $row['name']?>"/>
                    <label for="email">Email</label>
                    <input type="text" name="email" value="<?php echo $row['email']?>">
                    <button type="submit" name="update_btn">Submit</button>
                    <?php
                    if (isset($_POST['update_btn'])) {
                        if (isset($_POST['name']) && $_POST['name'] !="") {
                            if (isset($_POST['email']) && $_POST['email'] !="") {
                                $qstr_updateuser = "UPDATE `host_register`.`users` SET `name`=".$_POST['name'].", `email`= ".$_POST['email']." WHERE `users`.`id_user` = ".$row['id_user']."";
                                echo $qstr_updateuser;
                                $update_user = mysqli_query($dbc,$qstr_updateuser);
                            }
                        }
                    }?>
                </form>
            </div>
             <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-primary">Save changes</button>
            </div>
        </div> 
```

由于某种原因我无法理解，浏览器输出是这样的：

```
<div class="modal-body">
                <form method="POST" action=""></form>
                    <label for="name">Name</label>
                    <input type="text" value="Pedro Oliveira" name="name">
                    <label for="email">Email</label>
                    <input type="text" value="pedro.oliveira@est.pt" name="email">
                    <button name="update_btn" type="submit">Submit</button>

            </div> 
```

我在这里有点不知所措！引导程序或我的代码有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:04:35.110

幸运的是，我发现，由于模态在标签内，因为 while 循环导致了这种干扰，但我很能理解为什么会发生这种情况。幸运的是，我从头开始重新开始我的工作，并决定创建一个不同的 while 循环来执行相同的工作，因为看起来问题实际上是表标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:28:22.727

如果浏览器输出是这样，则您无法提交，因为提交按钮不在表单标签内，甚至输入。除非你的问题真的是这样。

# java - 用于扫描表中文本字符串的 SQL 查询

> ID：15405844
> 
> 赞同：0
> 
> 时间：2013-03-14T09:48:09.457
> 
> 标签：java, sql

我正在尝试实现一个 SQL 代码，以便扫描数据库表中的特定文本字符串，该文本字符串将随每次查询搜索而改变。例如，在第一个搜索变量 1 = 'cat' 将执行查询 Search for 'cat'。如果表中存在变量 1，则继续下一个变量值（在我的 Java 独立应用程序中动态更改） 现在假设变量 1 = 'dog' 查询结果是否定的（此字符串不在数据库中）在这种情况下，请一些处理并将这个值存储在表中。

...等等，我需要在表中搜索所有值！

SQL 代码将在 Eclipse 中与我的其余 java 代码一起实现。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T05:11:43.770

试试这个（Oracle pl/sql）

```
insert into pets_table (variable1_col) values ('cat') 
where not exists (select * from pets_table where upper(variable1_col)='CAT')

insert into pets_table (variable1_col) values ('dog') 
where not exists (select * from pets_table where upper(variable1_col)='DOG') 
```

# plone - 如何将新创建的克隆站点的组和角色迁移到旧站点？

> ID：15405845
> 
> 赞同：0
> 
> 时间：2013-03-14T09:48:19.603
> 
> 标签：plone

Plone4.2.5 从 4.1.4 升级而来，拥有众多用户。

与新创建的克隆站点（4.2.5）相比，在我升级的旧克隆站点上没有“站点管理员”的组和角色。所以我计划将新创建的克隆站点的组和角色迁移到旧的。

我知道如何将旧站点的用户、组和角色迁移到新的 plone 站点：导出/导入 acl_users、portal_memberdata、portal_membership。但是不知道如何使用新创建的 plone 站点的组和角色而不影响旧 plone 站点中的用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:25:50.593

您无需担心，您的成员管理保持不变，这很好，没有人希望在该区域进行隐式更改。

引入“站点管理员”组是为了更好地区分 ZMI 管理员（“管理员”组）和站点管理员。您可能会或可能不会使用它（将用户分配到组），具体取决于您的要求。

请记住，Plone 附带 OOTB 的工作流、组和角色是大多数用例的建议/框架。定义站点安全要求的责任是（并且应该是）在自己的权力上。

# ios - 如何在 iPhone 的 UIScrollView 内动态添加图像

> ID：15405846
> 
> 赞同：0
> 
> 时间：2013-03-14T09:48:21.597
> 
> 标签：ios, sdk, uiscrollview, uiimage

在我的 iPhone 应用程序中，我从网络服务器获取了大约 300 个图像 url，我需要在 UIScrollView 上以 3x3 行和列格式显示所有图像。一旦我从 Web 服务器获取所有 url，将它们转换为 UIImage 并显示图像。一切正常，但是在加载 200 张图像应用程序崩溃后，我已经阅读了很多关于 UIScrollView 的一些内存问题，那么我们该如何解决这个问题。我也阅读了苹果文档，但不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:10:28.347

这是解决方案，我已经在我的应用程序中实现了它。这是我的代码 sv_port 是我的滚动视图。下载 SDWebImageDownloader 类文件并将其导入您的项目中。在您的项目中添加相关框架。像 imageIO.framework、QuartzCore

现在，在你的 .m 添加

```
#import "UIImageView+WebCache.h"
#import "SDImageCache.h"
#import "SDWebImageCompat.h"

//function for adding image in your scrollview
-(void)populateImages
{
int x=6,y=6;

for(UIView * view in sv_port.subviews){
    if([view isKindOfClass:[UIImageView class]])
    {
        [view removeFromSuperview]; view = nil;
    }
    if([view isKindOfClass:[UIButton class]])
    {
        [view removeFromSuperview]; view = nil;
    }
}

for(int p=0;p<[Manufacturer count];p++)
{
    UIButton *btnImageButton = [UIButton buttonWithType:UIButtonTypeCustom];
    btnImageButton.frame = CGRectMake(x,y,70,70);
    [btnImageButton setTag:p];
    [btnImageButton addTarget:self action:@selector(nextview:) forControlEvents:UIControlEventTouchUpInside];

    UIActivityIndicatorView *spinny = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinny.frame=CGRectMake(btnImageButton.frame.origin.x+25,btnImageButton.frame.origin.y+25, 20, 20);
    spinny.backgroundColor=[UIColor clearColor];
    [spinny startAnimating];

    [sv_port setScrollEnabled:YES];
    [sv_port addSubview:spinny];

    UIImageView *asyncImageView = [[[UIImageView alloc] initWithFrame:btnImageButton.frame] autorelease];
    asyncImageView.backgroundColor=[UIColor clearColor];
    CALayer *layer;
    layer = asyncImageView.layer;
    layer.borderWidth = 0.5;
    layer.cornerRadius = 5;
    layer.masksToBounds = YES;

     [asyncImageView setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@", yourUrl] ]   placeholderImage:[UIImage imageNamed:nil] options:0 andResize:CGSizeMake(btnImageButton.frame.size.width,btnImageButton.frame.size.height) withContentMode:UIViewContentModeScaleAspectFit];
    asyncImageView.contentMode = UIViewContentModeScaleAspectFit;

    [sv_port addSubview:btnImageButton];
    [sv_port addSubview:asyncImageView];
    int imgCntPort=0;

    imgCntPort=(sv_port.frame.size.width/(asyncImageView.frame.size.width));

    ////NSLog(@"imgport %d",imgCntPort);
    if((p+1)%imgCntPort==0)
    {
        x=5;
        y=y+80;
    }
    else
    {
        x=x+80;
    }
}
sv_port.contentSize = CGSizeMake(0, y);
glob_x =0; glob_y =y;
} 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-02T08:39:19.917

```
-(void)scrollimage
{
    [AsyncImageLoader sharedLoader].cache = nil;
    NSArray *viewsToRemove = [_scrollview_gallary subviews];
    for (UIView *v in viewsToRemove) {
        [v removeFromSuperview];
    }

    CGFloat width =_scrollview_gallary.bounds.size.width;

    _scrollview_gallary.contentSize=CGSizeMake(width*[tmpArr count]-1, 360);
    [_scrollview_gallary setShowsHorizontalScrollIndicator:NO];
    [_scrollview_gallary setShowsVerticalScrollIndicator:NO];
    int x=0;
    int y=0;
    for (int i=0; i<[tmpArr count]; i++)
    {
        AsyncImageView *imgv;
        imgv =[[AsyncImageView alloc] initWithFrame:CGRectMake(x,y,width,360)];
        imgv.contentMode = UIViewContentModeScaleToFill;
        imgv.activityIndicatorStyle = UIActivityIndicatorViewStyleWhite;
        NSString *strimag=[NSString stringWithFormat:@"%@",[tmpArr objectAtIndex:i]];
        imgv.imageURL=[NSURL URLWithString:[tmpArr objectAtIndex:i]];
        [_scrollview_gallary addSubview:imgv];
        x=x+width;
    }
    _pageview.numberOfPages=([tmpArr count]);
    _scrollview_gallary.pagingEnabled = YES;
}
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    int page;
    CGFloat pageWidth = _scrollview_gallary.frame.size.width;
    page = floor((_scrollview_gallary.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageview.currentPage = page;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:54:41.073

我的印象是您一次下载所有 300 张图像并保存在内存中并添加到 UIScrollView..

有一种称为 LazyLoad 的技术，意味着不要一次加载所有图像，将其加载到队列中。

您可以参考此链接[http://lazyloadinginuiscrollviewiniphone.blogspot.in/2011/12/iphone-uiscrollview-lazy-image-loading.html](http://lazyloadinginuiscrollviewiniphone.blogspot.in/2011/12/iphone-uiscrollview-lazy-image-loading.html)它可能会帮助您顺利完成任务..

一切顺利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:56:00.097

如果要以 Gridview 格式显示图像，则可以使用[PSTCollectionView](https://github.com/steipete/PSTCollectionView)。对于图像的延迟加载，您可以使用[SDWebImage](https://github.com/rs/SDWebImage)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T09:56:17.213

您是否正在释放不再可见的元素？UITableView 这样做（这就是 Sandro 建议它的原因）。您的 UIScrollView 实现应该这样做。

对于考虑到这一点的网格实现，您还可以考虑[UICollectionView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)或[GMGridView](https://github.com/gmoledina/GMGridView)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-14T09:53:10.153

我不明白为什么你正在做的是一个问题。可能是你有内存问题。在这种情况下，模拟器和设备的结果应该不同。

如果这是内存问题，您应该使用表格视图而不是滚动视图。在每个表格视图单元格中放置 3 张图像，这应该可以解决问题。

镉

# c# - 多种类型的 UI（Web、WPF、android）但单域模型的模式

> ID：15405847
> 
> 赞同：0
> 
> 时间：2013-03-14T09:48:22.253
> 
> 标签：c#, android, wpf, mvvm, web

我有一个具有多个 UI Web、WPF、android 的应用程序。但我是 WPF 开发人员。对于 WPF，我知道 MVVM 模式最适合 WPF，但对于其他人我不知道。

我不认为我可以在 Web 和 android 应用程序中使用 MVVM。我应该如何实现这一点，以便可以在所有三个 UI 应用程序中使用相同的 DomainModel。

请建议。

# javascript - 对象不支持 IE9 中的属性或方法“附加”

> ID：15405848
> 
> 赞同：7
> 
> 时间：2013-03-14T09:48:32.577
> 
> 标签：javascript, jquery, internet-explorer-9

这个脚本在 firefox 或 chrome 中运行，但在 IE9 中只能运行一半，IE9 是我们网站的顶级浏览器。

我遇到的问题是它抛出了这个错误。

SCRIPT438：对象不支持属性或方法“追加”calc_ajax.js，第 26 行字符 21

在这一行： item.append(link);

我坚持为什么。任何帮助，将不胜感激。

```
$(document).ready(function(){
$('.first a.btn').click(function(){
    $('.first a.active').removeClass('active');
    $(this).addClass('active');
    $('.second .title').addClass('active');

    var id = $(this).data('cat-id');

    var wrap = $('<div>');

    $.ajax({
        url:    script_url,
        type:   "post",
        data: {"cat": id},
        dataType: "json"
    }).success(function(result){
        if(result.status == "ok"){
            $.each(result.data, function(i, elem){
                item = $("<div class='body-area'>").append($("<img src='" + elem.image + "'>"));
                link = $("<a href='#results' class='btn'>");
                link.text(elem.name);
                link.data('subcat-id', elem.id);
                item.append(link);

                wrap.append(item);

            });
            $('.second .body').html(wrap).slideDown('fast');
        }
    });
});

$('.second a.btn').live('click', function(){
    $('.second .body-area.active').removeClass('active');
    $(this).parent().addClass('active');

    var sub_id = $(this).data('subcat-id');        

    $.ajax({
        url:    script_url,
        type:   "post",
        data: {"subcat": sub_id},
        dataType: "json"
    }).success(function(result){
        if(result.status == "ok"){
            $('.third .title').text(result.data.title);
            $('.third .body').html(result.data.body);
            $('.third').slideDown('fast'); 
        }
    });        
}); 
```

});

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-12-13T13:03:34.167

使用本机功能时，我在 IE11 上遇到了同样的错误`document.body.append`。

您可以使用`document.body.appendChild`或插入[来自 MDN](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/append#Polyfill) ( [npm](https://github.com/msn0/mdn-polyfills) ) 的 polyfill。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-14T14:45:23.387

`window.item`是 Internet Explorer 中的一种特殊方法，由于您粘贴的代码没有声明局部变量`item`，因此它试图在 IE 中重新分配本机方法。IE 不允许重新分配发生，因此您并没有真正在`item`变量中获得您期望的 jQuery 对象，因此该`append`方法不可用。

修复代码的最简单方法是在使用变量`var`之前添加一个权限。`item`我整理了一个 jsFiddle，展示了它如何解决 IE [http://jsfiddle.net/httyY/中的问题](http://jsfiddle.net/httyY/)

```
$.ajax({
    url:    script_url,
    type:   "post",
    data: {"cat": id},
    dataType: "json"
}).success(function(result){
    if(result.status == "ok"){
        $.each(result.data, function(i, elem){
            var item = $("<div class='body-area'>").append($("<img src='" + elem.image + "'>"));
            var link = $("<a href='#results' class='btn'>");
            link.text(elem.name);
            link.data('subcat-id', elem.id);
            item.append(link);

            wrap.append(item);

        });
        $('.second .body').html(wrap).slideDown('fast');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:00:53.637

尝试：

```
$.each(result.data, function(i, elem){
   var item = $("<div class='body-area'>").append($("<img src='" + elem.image + "'>"));
   var link = $("<a />", {"href" :"#results", "class": "btn"});
   link.text(elem.name);
   link.data('subcat-id', elem.id);
   item.append(link);
   wrap.append(item);    
}); 
```

# delphi - 如何更改 onChangeEvent 中的日期？

> ID：15405851
> 
> 赞同：0
> 
> 时间：2013-03-14T09:48:46.473
> 
> 标签：delphi, tdatetimepicker

我需要对日期更改在 TDateTimePicker.OnChangeEvent 做出反应。显示对话框，如“未保存的更改将丢失”，带有确定、取消按钮。如果用户按下取消按钮，我想重置原始日期。

不幸的是，我无法更改该事件的日期。更改被忽略。

**更详细的说明：**

1.  用户更改 DateTimePicker 中的日期（通过键盘）或打开日历并选择一个日期
2.  OnChange 事件被触发（日历可能仍然打开）
3.  我显示 MessageDialog，如果用户按“取消”我想恢复日期。例如。关闭日历并恢复日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:13:39.263

用户 LU RD 部分解决了该问题 - 请参阅注释“恢复 OnCloseUp 事件中的值”。它适用于从日历中选择日期。

如果用户使用键盘直接在编辑中更改日期，则可以直接在 onChangeEvent 中更改。

因此，在*onCloseUp*和*onChange*事件中设置原始（或任何其他日期）的**组合**就足够了。

# php - 创建安全的 API 通信

> ID：15405856
> 
> 赞同：1
> 
> 时间：2013-03-14T09:49:00.313
> 
> 标签：php, mysql, api

我正在寻找构建一个可以部署在我的服务器上以监控系统负载的 API。
它将报告给运行客户端以显示信息的中央管理服务器。

我正在努力解决的问题是最好保护 API。
我想要的是让客户端成为唯一可以访问服务器并检索此信息的软件，但我不确定如何使用 PHP 来实现这一点。
我还希望能够分发 API 和客户端供其他人在他们的服务器上使用，所以我不希望人们在使用 API 时也能够访问其他人的数据。

客户端也是使用 MySql 用 PHP 编写的，并且具有安全登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:12:23.253

这听起来像你试图解决错误的问题。

> 我还希望能够分发 API 和客户端供其他人在他们的服务器上使用，所以我不希望人们在使用 API 时也能够访问其他人的数据。

唯一正确的答案是**身份验证**。您需要通过为每个用户提供只有他们知道的访问凭证来保护您的 API。

您的 API 绝**不能**泄露任何不允许客户端根据其身份验证凭据查看的数据。试图通过试图以某种方式保护客户端免受窥探来解决这种危险是**不安全**的 - 可以访问客户端并可以观察到它正在运行的人将能够对它和服务器之间的任何流量进行逆向工程，只要付出足够的努力。

如果 API 得到适当保护，那么使用哪个客户端工具来访问它对您来说并不重要。限制对某个*程序*的 API 访问的要求将消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:09:06.607

如果您使用 SSL 以及身份验证（我使用 3rd 方身份验证 google、fb 等），请即时创建数据 /reports 并将数据保存在您的 Web 文件夹外部的子目录中（而不是 /var/www、/var /myStorage/currentSessionId/)，那么你基本上保证了你想要的安全性。

您的 php 将仅访问为其运行的会话命名的子目录。

# java - 使用电子邮件创建 bouncycastle PGPSSecretKey

> ID：15405857
> 
> 赞同：2
> 
> 时间：2013-03-14T09:49:01.890
> 
> 标签：java, bouncycastle, encryption-asymmetric

我需要为 unix 机器创建一个公钥来向我发送加密数据。

我所做的是使用以下构造函数来创建 PGPSecreyKey。

```
PGPSecretKey secretKey = new PGPSecretKey(PGPSignature.DEFAULT_CERTIFICATION, PGPPublicKey.RSA_GENERAL, publicKey, privateKey, new Date(),
            "Test test@mail.com", PGPEncryptedData.CAST5, passPhrase, null, null, new SecureRandom(), "BC"); 
```

当用 Kleopatra 打开（检查我的证书）时，我看到名称：“Test test@mail.com”和电子邮件：“”。

我如何创建一个同时包含名称和电子邮件的 PGP 密钥（如果可能，请发表评论）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:55:00.710

要添加电子邮件地址，您必须将电子邮件连接到用户 ID。喜欢

```
PGPPublicKey.RSA_GENERAL, publicKey, privateKey, new Date(),
            "Hans Mueller <hans.mueller@mail.com>", PGPEncryptedData.CAST5, passPhrase, null, null, new SecureRandom(), "BC"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-15T14:12:58.747

要解决此问题，您必须在名称和电子邮件之间添加 \n 换行符

```
PGPPublicKey.RSA_GENERAL, publicKey, privateKey, new Date(),
            "Hans Mueller \n <hans.mueller@mail.com>", PGPEncryptedData.CAST5, passPhrase, null, null, new SecureRandom(), "BC"); 
```

# iphone - 通过 AVAudioRecorder 录制声音

> ID：15405859
> 
> 赞同：0
> 
> 时间：2013-03-14T09:49:07.773
> 
> 标签：iphone, ios, avaudioplayer, avaudiorecorder

我想录制声音并想将录制的文件保存到文档目录中：- 做过喜欢：-

```
[[AVAudioSession sharedInstance]
         setCategory: AVAudioSessionCategoryRecord
         error: nil];
    NSMutableDictionary *recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:16000.0] forKey:AVSampleRateKey];
    [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

        recorderFilePath = [[NSString stringWithFormat:@"%@/Audio.caf", DOCUMENTS_FOLDER] retain];
        NSURL *soundFileURL=[NSURL URLWithString:recorderFilePath];

    recorderFilePath = [[NSString stringWithFormat:@"%@/Audio.caf", DOCUMENTS_FOLDER] retain];

    NSURL *soundFileURL = [NSURL fileURLWithPath:recorderFilePath];

        NSLog(@"str==>%@ soundurl==>%@",recorderFilePath,soundFileURL);
        AVAudioRecorder *newRecorder =
        [[AVAudioRecorder alloc] initWithURL: url
                                    settings: settings
                                       error: nil];

 newRecorder.delegate = self;
        [newRecorder prepareToRecord];
        [newRecorder record]; 
```

和[录音机停止]；当停止录制完成时。

看过这个：- [这个](https://stackoverflow.com/questions/1010343/how-do-i-record-audio-on-iphone-with-avaudiorecorder)

并相应编码..但我仍然无法在文件夹中创建任何 .caf 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:13:40.533

一旦完成下面的代码，它可能会对您有所帮助。首先将 AVAudioRecorder 的对象作为 AVAudioRecorder *audioRecorder;

```
-(void)viewWillAppear:(BOOL)animated{

    NSArray *dirPaths;
    NSString *docsDir;

    dirPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    //here i took cache directory as saved directory you can also take   NSDocumentDirectory
    docsDir = [dirPaths objectAtIndex:0];

    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound.caf"];//at this path your recorded audio will be saved

    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:

                                                    [NSNumber numberWithInt:AVAudioQualityMin],
                                                    AVEncoderAudioQualityKey,

                                                    [NSNumber numberWithInt:16], 
                                                    AVEncoderBitRateKey,

                                                    [NSNumber numberWithInt: 2], 
                                                    AVNumberOfChannelsKey,

                                                    [NSNumber numberWithFloat:44100.0], 
                                                    AVSampleRateKey,
                                                    nil];

    NSError *error = nil;
    audioRecorder = [[AVAudioRecorder alloc]initWithURL:soundFileURL settings:recordSettings error:&error];

    if( !audioRecorder ) {

        UIAlertView *alert  =
        [[UIAlertView alloc] initWithTitle: @"Warning" message: [error localizedDescription] delegate: nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        return;

    }

    if ( error )
    {
        NSLog( @"error: %@", [error localizedDescription] );
    }
    else {
        [audioRecorder prepareToRecord];
        [self recordAudio];//Mehod to Record Audio
    }

} 
```

现在定义录制音频的方法，

```
 -(void) recordAudio
 {
     if (!audioRecorder.recording)
      {
       audioRecorder.delegate = self;
      [audioRecorder recordForDuration:10];//Here i took record duration as 10 secs 

     } 
```

}

现在您可以将 AvAudio 记录 DelegateMethods 编写为，

```
-(void)audioRecorderDidFinishRecording:(AVAudioRecorder *)recorder successfully:      (BOOL)flag
 {
  //Your code after sucessful recording;
 }
-(void)audioRecorderEncodeErrorDidOccur:(AVAudioRecorder *)recorder error:(NSError *)error
 {
NSLog(@"Encode Error occurred");
} 
```

希望对你有帮助...

# windows - 使用 jsp 的 Windows 身份验证和电子邮件地址检索

> ID：15405868
> 
> 赞同：1
> 
> 时间：2013-03-14T09:49:22.753
> 
> 标签：windows, jsp, email, authentication, waffle

我正在尝试使用第三方库“Waffle”来实现 Windows 身份验证。我面临的挑战是如果我们知道用户 ID 和域，如何检索用户的邮件 ID。例如，我能够将用户 ID 设为 XYZ\phembr，并且我想从 SMTP 服务器获取邮件地址（在本例中为 phembrom@xyz.com）。以下是我正在使用的 jsp 代码和我得到的输出。

```
<%@page import="java.security.Principal" %>

<%@page import="waffle.windows.auth.WindowsAccount" %>

<%@page import="waffle.servlet.WindowsPrincipal" %>

<%@page import="com.sun.jna.platform.win32.Secur32" %>

<%@page import="com.sun.jna.platform.win32.Secur32Util" %>

<%

if (request.getParameter("logoff") != null) {

session.invalidate();

response.sendRedirect("index.jsp");

return;

}

%>

<html>

<head>

<title>Protected Page for Examples</title>

</head>

<body bgcolor="white">

Welcome <b><%= Secur32Util.getUserNameEx(Secur32.EXTENDED_NAME_FORMAT.NameDisplay)   %></b>    <br>

You are logged in as remote user <b><%= request.getRemoteUser() %></b> in session <b><%= session.getId() %></b>.<br>

You are impersonating user <b><%= Secur32Util.getUserNameEx(Secur32.EXTENDED_NAME_FORMAT.NameSamCompatible) %> </b>.

<br><br>

<%

if (request.getUserPrincipal() != null) {

%>

Your user principal name is <b><%= request.getUserPrincipal().getName() %></b>.<br>

Your email is <b><%= Secur32Util.getUserNameEx(Secur32.EXTENDED_NAME_FORMAT.NameUserPrincipal) %></b>.

<br><br>

<%

 } else {

%>

 No user principal could be identified.

 <br><br>

<%

}

%>

 </body> 
```

我得到的输出是：（请注意，我应该得到 phembrom@xyz.com 而不是 phembr@xyz.com）

```
Welcome Prashant Kumar Hembrom

You are logged in as remote user XYZ\phembr in session DB5376CCEF5FA13F6059AC679F0B95BE.

You are impersonating user XYZ\phembr .

Your user principal name is XYZ\phembr.

Your email is phembr@xyz.com. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:26:41.333

常见问题解答中对此进行了回答：[https ://github.com/dblock/waffle/blob/master/Docs/faq/AdditionalActiveDirectoryInfo.md](https://github.com/dblock/waffle/blob/master/Docs/faq/AdditionalActiveDirectoryInfo.md)

您不能直接使用 Waffle 执行此操作。在 Windows 上，这可以通过使用 ADSI 查询 Active Directory 来完成。这涉及通过从登录获得的 SID 定位用户的记录并获取任何附加信息。

两种实现：

*   [https://gist.github.com/dblock/3004083](https://gist.github.com/dblock/3004083)
*   [http://www.codeproject.com/Articles/572278/Java-Retrieving-users-information-such-as-email-an](http://www.codeproject.com/Articles/572278/Java-Retrieving-users-information-such-as-email-an)

# opengl - 自动生成 mipmap 时 glTexStorage2D 是否必要

> ID：15405869
> 
> 赞同：7
> 
> 时间：2013-03-14T09:49:26.040
> 
> 标签：opengl, opengl-4

我确实使用 gltexSubImage2D() 更新到 OpenGL 4.0 中的纹理 2D。纹理具有使用自动生成的 mipmap

```
 glGenerateMipmap(GL_TEXTURE_2D); 
```

我的纹理更新失败，直到我明白我也必须在更新时重新生成 mipmaps（或删除 mipmaps 生成）。然后我阅读[了这个](http://www.opengl.org/wiki/Common_Mistakes#Automatic_mipmap_generation)wiki，其中在生成 mipmaps 时使用了[glTexStorage2D](http://www.opengl.org/sdk/docs/man/xhtml/glTexStorage2D.xml) 。我实际上从未关注过这种方法。所以我想知道每次使用 mipmap 生成纹理时是否必须使用它？

更新 ：

我从方法规范中看到它

> 同时指定二维纹理或一维纹理数组的所有级别的存储要求

我猜使用它应该可以提高生成 mipmap 时的性能？是真的吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-14T10:35:06.910

这两个函数是完全正交的。

选择在`glTexImage2D`和之间`glTexStorage2D`。这两个都[为纹理图像分配存储空间](http://www.opengl.org/wiki/Texture_Storage)；他们只是以不同的方式做到这一点。

`glTexImage2D`是分配存储的旧方式。它[创建可变存储（还有其他函数也可以创建可变存储）](http://www.opengl.org/wiki/Texture_Storage)。如果您想要 mipmap，则必须通过单独调用函数来分配每个 mipmap 级别，手动计算 mipmap 图像的大小（请参阅下面的例外情况）。

`glTexStorage2D`[为图像数据](http://www.opengl.org/wiki/Texture_Storage#Immutable_storage)分配不可变的存储空间。它一次性分配所有你想要的 mipmap。

顾名思义，不可变存储无法更改。看，你可以调用`glTexImage2D`相同的 mipmap 级别，但大小不同。如果你这样做了，OpenGL 将破坏原来的 mipmap 层并为新层分配存储空间。您甚至可以更改格式。

不可变存储不会让您更改任何内容。您可以[使用`glTexSubImage2D`](http://www.opengl.org/wiki/Texture_Storage#Storage_contents). 但是这些功能不会改变*存储*；他们改变了内容。

`glTexImage2D`并且`glTexStorage2D`喜欢`malloc`。`glTexSubImage2D`就像`memcpy`; 它仅适用于*现有*内存。

`glGenerateMipmap`是一个函数，它将获取纹理的基础层并[为来自该基础层的所有 mipmap 生成数据（给定 mipmap 范围）](http://www.opengl.org/wiki/Texture_Storage#Automatic_mipmap_generation)。它会这样做*一次*。把它想象成一个渲染函数；它完成了它的工作，然后就完成了。

对于可变存储纹理，`glGenerateMipmap`还将为先前未分配的 mipmap 范围内的任何 mipmap 分配存储。这就是为什么您可以调用`glTexImage2D`一次，然后调用`glGenerateMipmap`强制它制作所有其他 mipmap，而无需手动执行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-14T10:35:27.703

在 glTexStorage 出现之前，每个 mipmap 级别都必须通过单独调用 glTexImage 来初始化。glTexImage 会触发很多复杂的内部状态变化，这些变化是相当昂贵的。每次调用 glTexImage 时，纹理对象的布局都会改变。

因此，如果可能，请尽量避免使用它。正如您所发现的，您必须先初始化所有所需的 mipmap 级别，然后才能通过 glTexSubImage 更新它们。glGenerateMipmap 将创建它们，这会引入布局更改，是的，很昂贵。

glTexStorage 将整个纹理对象初始化一次，以获得所需的不可变格式。是的，当与 glGenerateMipmap 或 glTexSubImage 的数据更新一起使用时，使用 glTexStorage 可以提高性能，但是这些改进发生在纹理对象创建的早期，而不是在其数据更改时。

# c# - 如何生成构造函数和其中的代码？

> ID：15405870
> 
> 赞同：0
> 
> 时间：2013-03-14T09:49:28.213
> 
> 标签：c#, .net, codedom

我`System.CodeDom`用来生成代码。有人可以告诉我如何在构造函数中创建代码。

**我想要的输出：**

```
internal class CurrencyMap : EntityTypeConfiguration<Currency>
    {
        public CurrencyMap()
        {
            ToTable("Currencies");
            HasKey(m => m.Id);
            Property(m => m.Name).IsRequired().HasMaxLength(100);
            Property(m => m.Code).IsRequired().HasMaxLength(10);
            Property(m => m.Symbol).HasMaxLength(10);
            Property(m => m.IsEnabled).IsRequired();
        }
    } 
```

**到目前为止，我对 CodeDom 所做的事情：**

```
@class = new CodeTypeDeclaration(className + "Map");
            @class.IsClass = true;
            @class.Attributes = MemberAttributes.Public;
            @class.BaseTypes.Add(new CodeTypeReference
            {
                BaseType = string.Format("EntityTypeConfiguration`1[{0}]", className),
                Options = CodeTypeReferenceOptions.GenericTypeParameter
            });

            var constructor = new CodeConstructor();
            constructor.Attributes = MemberAttributes.Public;

            var sb = new StringBuilder();

            // TODO: iterate through each field here and create the Property(m=>..... statements, etc.
            foreach (var field in fields)
            {
                sb.Clear();
                //Im guessing I will have to build a string for the fluid stuff, right?
            }

            @class.Members.Add(constructor); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:14:28.490

知道了：

```
constructor.Statements.Add(new CodeMethodInvokeExpression(new CodeThisReferenceExpression(),
    "ToTable", new CodeExpression[] { new CodePrimitiveExpression(tableName) }));

foreach (var field in fields)
{
    CodeExpression statement = new CodeMethodInvokeExpression(
        new CodeThisReferenceExpression(), "Property", new CodeExpression[] { new CodeSnippetExpression("m => m." + field.Name) });

    if (field.IsRequired)
    {
        statement = new CodeMethodInvokeExpression(statement, "IsRequired");
    }
    //etc: TODO...
    constructor.Statements.Add(statement);
} 
```

# java - 为什么聚合框架的 $max-function 比迭代游标慢？

> ID：15405871
> 
> 赞同：2
> 
> 时间：2013-03-14T09:49:32.027
> 
> 标签：java, mongodb

我得到了大约 300.000 个条目的数据集。为了存储该数据，我使用的是当前版本的 mongodb 2.2.3。我的问题是如何使用聚合框架来提高搜索性能？

这是我存储数据的示例：

```
{
    "_id":"654311649875645643131564",
    "@type":"K",
    "dataSourceA":{
        "name": "abc",
        "price": 12.99
    },
    "dataSourceB":{
        "name": "xyz"
    }
} 
```

在我切换到较新版本的 mongodb 之前，我在没有聚合框架的情况下处理了例如最大值的搜索，如下所示：

```
searchQuery = new BasicDBObject("dataSourceA.price", -1);
DBCursor cursor = collection.find().sort(searchQuery).limit(1); 
```

该操作大约需要`0.921 secs`

现在我尝试了聚合框架来实现相同的结果，但想更快地找到最高价格。这是我的方法：

```
DBObject match = new BasicDBObject("$match", new BasicDBObject("@type", "K"));
DBObject fields = new BasicDBObject("dataSourceA.price", 1);          
DBObject project = new BasicDBObject("$project", fields);
DBObject groupFields = new BasicDBObject("_id", 1);
groupFields.put("max", new BasicDBObject("$max", "$dataSourceA.price"));

DBObject group = new BasicDBObject("$group", groupFields);

Iterable<DBObject> results = 
    collection.aggregate(match, project, group).results(); 
```

但是这个操作需要`4.837 secs`找到最高价格。那么在我的查询中可以改进什么？我认为这样的数据库应该比在 java 中迭代游标更快，当我错了时纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:35:00.370

有许多的原因。

首先，对于您的光标示例，您只是在运行一个查询，对子文档字段上的所有根文档进行排序，很可能是索引。无论您如何看待它，这都会更快。

Second`$max`实际上是一个`$group`运算符，这意味着它是对适合您的查询集的所有文档（全部 300,000 个）的内存操作，因此 MongoDB 正在计算每个文档的多值字段的最大值，分组在`_id`,结果集中的所有文档。

由于`$max`工作方式的原因，您会立即失去从索引游标中获得的即时排序能力。

不仅如此，您还计划在聚合过程中进行一半，从而使 MongoDB 进一步强行拆分您的文档。

所以不，它不应该比迭代排序索引游标更快。

# entity-framework-5 - 具有可为空选择条件的 EF5 迁移种子 AddOrUpdate

> ID：15405875
> 
> 赞同：13
> 
> 时间：2013-03-14T09:49:45.597
> 
> 标签：entity-framework-5, entity-framework-migrations

我有一个问题，过去有人可能已经找到了解决方案。我正在使用 AddOrUpdate 方法在 EF5 迁移的 Configuration 类中播种数据库。

这是域模型的快速示例：

```
 public class Club
{
    public virtual long Id { get; set; }
    public virtual string Name { get; set; }
}

public class Court
{
    public virtual long Id { get; set; }
    public virtual string Name { get; set; }

    public virtual long? ClubId { get; set; }
    public virtual Club Club { get; set; }
} 
```

然后这是我的种子方法的摘录：

```
Club cb = new Club { Name = "Test Club 1" };
context.Set<Club>().AddOrUpdate(m=>m.Name, cb);
context.SaveChanges();

Court crt1 = new Court { ClubId = cb.Id, Name = "Court 1" };
Court crt2 = new Court { ClubId = cb.Id, Name = "Court 2" };
context.Set<Court>().AddOrUpdate(m => new { m.Name, m.ClubId }, crt1, crt2);
context.SaveChanges(); 
```

现在，一旦代码到达第 7 行，它就会抛出一个错误：

> 没有为类型“System.Nullable`1[System.Int64]”和“System.Int64”定义二元运算符 Equal。

根据我的调查，这是因为 ClubId 是一个 Nullable long 。

有没有办法解决？

不是主要问题 - 我只是一个完美主义者，想看看其他人如何解决这个问题......

谢谢，尼克 Goloborodko

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-28T16:16:09.533

我没有一个非常令人满意的答案，但我相信需要对 AddOrUpdate 实现进行代码更改才能解决此问题，因此我应用了一种解决方法。

简单地说`AddOrUpdate`，您手动执行相同的任务，而不是使用。例如：

```
private void AddOrUpdateCourt(long id, string name, string someOtherPropertyValue)
{
    var court = _context.Set<Court>().SingleOrDefault(c => c.Id = id && c.Name = name);
    if(court == null)
    {
        _context.Set<Court>().Add(new Court
        {
            ClubId=id, 
            Name=name, 
            SomeOtherProperty = someOtherPropertyValue
        });
    }
    else
    {
        court.SomeOtherProperty = someOtherPropertyValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-30T06:02:55.253

有同样的问题，最后实现了我自己`AddOrUpdate`的。

首先，我们必须获取实体的实际主键（也许您需要在此处添加额外的命名约定......）：

```
private static PropertyInfo[] PrimaryKeys<TEntity>()
    where TEntity : class
{
    return typeof(TEntity).GetProperties()
                          .Where(p => Attribute.IsDefined(p, typeof(KeyAttribute))
                                   || "Id".Equals(p.Name, StringComparison.Ordinal))
                          .ToArray();
} 
```

然后，我们需要解析“标识符表达式”，它用于`AddOrUpdate`匹配现有项（如原始项`AddOrUpdate`）：

```
private static PropertyInfo[] Properties<TEntity>(
    Expression<Func<TEntity, object>> identifiers)
    where TEntity : class
{
    // e => e.SomeValue
    var direct = identifiers.Body as MemberExpression;
    if (direct != null)
    {
        return new[] { (PropertyInfo)direct.Member };
    }

    // e => (object)e.SomeValue
    var convert = identifiers.Body as UnaryExpression;
    if (convert != null)
    {
        return new[] { (PropertyInfo)((MemberExpression)convert.Operand).Member };
    }

    // e => new { e.SomeValue, e.OtherValue }
    var multiple = identifiers.Body as NewExpression;
    if (multiple != null)
    {
        return multiple.Arguments
                       .Cast<MemberExpression>()
                       .Select(a => (PropertyInfo)a.Member)
                       .ToArray();
    }

    throw new NotSupportedException();
} 
```

因此，`.AddOrUpdate(m => m.Name, ...)`应该和`.AddOrUpdate(m => new { m.Name, m.ClubId }, ...)`.

最后，我们为每个实体动态构建*where 表达式*，将其与我们当前的数据库匹配，并采取相应的行动（添加或更新）：

```
public static void AddOrUpdate<TEntity>(this DbContext context,
    Expression<Func<TEntity, object>> identifiers,
    params TEntity[] entities)
    where TEntity : class
{
    var primaryKeys = PrimaryKeys<TEntity>();
    var properties = Properties<TEntity>(identifiers);

    for (var i = 0; i < entities.Length; i++)
    {
        // build where condition for "identifiers"
        var parameter = Expression.Parameter(typeof(TEntity));
        var matches = properties.Select(p => Expression.Equal(
            Expression.Property(parameter, p),
            Expression.Constant(p.GetValue(entities[i]), p.PropertyType)));
        var match = Expression.Lambda<Func<TEntity, bool>>(
            matches.Aggregate((p, q) => Expression.AndAlso(p, q)),
            parameter);

        // match "identifiers" for current item
        var current = context.Set<TEntity>().SingleOrDefault(match);
        if (current != null)
        {
            // update primary keys
            foreach (var k in primaryKeys)
                k.SetValue(entities[i], k.GetValue(current));

            // update all the values
            context.Entry(current).CurrentValues.SetValues(entities[i]);

            // replace updated item
            entities[i] = current;
        }
        else
        {
            // add new item
            entities[i] = context.Set<TEntity>().Add(entities[i]);
        }
    }
} 
```

希望这会有所帮助，尽管这个问题有点老了。

# junit - Junit（DBUnit）测试在Maven中失败但在Eclipse中失败？

> ID：15405882
> 
> 赞同：2
> 
> 时间：2013-03-14T09:50:01.157
> 
> 标签：junit, dbunit, maven-surefire-plugin

我的 Junit 测试使用 DBUnit，从 Eclipse 运行时它们运行良好。但是，使用 Maven 运行相同的测试无法通过以下测试：

```
integrity constraint violation: foreign key no action 
```

我已经尝试连续几次从 Eclipse GUI（“作为 JUnit 测试运行”）运行该测试和整个测试集，并且它们从未失败 - 但从 Maven 中它们确实失败了。

我对每个测试都使用@DatabaseSetup，但是真的重置数据库就足够了吗？我还认为 Maven 可能会并行运行测试，所以我尝试在 pom.xml 中将 Surefire 插件的 forkMode 设置为“始终”，但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T06:43:32.293

在 Maven 测试期间，关于 JVM 中使用的编码，我遇到了类似的问题。

我在 pom.xml 中添加了以下内容：

```
<plugins>
    ...
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
            <junitArtifactName>junit:junit</junitArtifactName>
            <encoding>UTF-8</encoding>
            <inputEncoding>UTF-8</inputEncoding>
            <outputEncoding>UTF-8</outputEncoding>
            <argLine>-Xms256m -Xmx512m -XX:MaxPermSize=128m -ea
                -Dfile.encoding=UTF-8</argLine>
        </configuration>
    </plugin>
</plugins> 
```

参见这里[http://carlobertoldi.wordpress.com/2012/03/12/maven-unit-tests-and-those-funny-characters/](http://carlobertoldi.wordpress.com/2012/03/12/maven-unit-tests-and-those-funny-characters/)

这解决了我的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:20:03.817

您正在使用`@DatabaseSetUp`来自[spring-test DBUnit](http://springtestdbunit.github.com/spring-test-dbunit/)的注释进行数据库初始化。您也应该使用注释`@DatabaseTearDown`。

从[spring-test DBUnit](http://springtestdbunit.github.com/spring-test-dbunit/)文档中：

*`The @DatabaseTearDown annotation can be used to reset database tables once a test has completed. As with @DatabaseSetup the annotation can be applied at the method or class level. When using @DatabaseTearDown use the value and type attributes in the same way as @DatabaseSetup.`*

# c# - 转换 web.config

> ID：15405885
> 
> 赞同：1
> 
> 时间：2013-03-14T09:50:11.673
> 
> 标签：c#, asp.net, web-config

我很新，我想在网上搜索时转换 web.config 我发现 SlowCheetah ，但我无法转换设置，因为我可以找到任何具有以下值的公共属性是我想要转换的属性

```
<smtp deliveryMethod="Network" >
      <network host="xxx" userName="xxxx" password="xxx" port="xxx" enableSsl="xxx" defaultCredentials="false" />
  </smtp> 
```

这就是我想把它变成

```
<smtp deliveryMethod="SpecifiedPickupDirectory" from="xxxxx">
    <specifiedPickupDirectory pickupDirectoryLocation="C:\" />
  </smtp> 
```

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:00:26.803

您可以使用以下转换。

```
<smtp deliveryMethod="SpecifiedPickupDirectory" from="xxxxx" xdt:Transform="SetAttributes">
    <network xdt:Transform="Remove" />
    <specifiedPickupDirectory pickupDirectoryLocation="C:\" xdt:Transform="Insert" />
</smtp> 
```

您可以在 msdn 上找到有关所有转换功能的更多信息：http: [//msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

# winforms - 在 .exe 文件（win 形式）和类库项目之间传递值

> ID：15405888
> 
> 赞同：0
> 
> 时间：2013-03-14T09:50:16.020
> 
> 标签：winforms, parameter-passing, projects

由于供应商软件的限制，我调用了一个 WinForm 的 exe 文件（带有某些控件，如组合框和文本框）并将值传递给另一个项目。

这可能吗？

# asp.net-mvc-4 - 即时更改 CSS 文件

> ID：15405889
> 
> 赞同：1
> 
> 时间：2013-03-14T09:50:17.540
> 
> 标签：asp.net-mvc-4

我想动态更改 CSS 文件（动态）。我正在使用 Razor 视图在 MVC 4 中进行开发。目前，它们已从 web.config 中提取...

**我的捆绑注册**

```
bundles.Add(New StyleBundle("~/Content/themes/" + Domain.GetTheme + "/css").Include(
    "~/Content/themes/" + Domain.GetTheme + "/Main.css",
    "~/Content/themes/" + Domain.GetTheme + "/Content.css")) 
```

**剃刀视图**

```
@Styles.Render("~/Content/themes/" + Domain.GetTheme + "/css") 
```

**GetTheme 属性中的代码**

```
Public Shared ReadOnly Property GetTheme As String
    Get
        Return ConfigurationManager.AppSettings("Theme")
    End Get
End Property 
```

我不确定这是否是最好的方法，但它确实有效。

**研究至今...**

但现在我想即时更改主题。我最初的想法是访问查询字符串参数。所以如果它包含 ?Theme=Green 那么 CSS 文件会选择绿色版本。查询字符串值将存储在会话状态中，以便 CSS 将继续使用绿色，直到通过查询字符串再次更改。

我首先创建了一个可以应用于我的控制器的属性......

**属性**

```
Public Class LoadThemeAttribute
    Inherits ActionFilterAttribute

    Public Overrides Sub OnActionExecuted(filterContext As ActionExecutedContext)
        MyBase.OnActionExecuted(filterContext)

        If HttpContext.Current.Request.QueryString("Theme") IsNot Nothing Then
            HttpContext.Current.Session("Theme") = HttpContext.Current.Request.QueryString("Theme")
        End If

    End Sub
End Class 
```

**控制器**

```
<LoadTheme>
Public Class CompanyController
    Inherits System.Web.Mvc.Controller

    ...
End Class 
```

然后在我的 _Layout.vbhtml razor 视图中，我覆盖 CSS 文件，如下所示：-

```
@If Session("Theme") IsNot Nothing Then
    @<link href="/Content/themes/@Session("Theme")/Main.css" rel="stylesheet"/>
    @<link href="/Content/themes/@Session("Theme")/Content.css" rel="stylesheet"/>
Else
    @Styles.Render("~/Content/themes/" + Domain.GetTheme + "/css")
End If 
```

我不能使用 Render 语句，我假设这是因为它在项目加载时被调用一次并且不能再次调用。我当然无法让它工作。

所以我的问题是：- 一切似乎都有效，但我只想知道这是否是一个好方法 - 这是更改 CSS 文件的好 MVC 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:22:04.857

所以我几乎遇到了和你一样的问题。我做的一个快速解决方法是从包中删除我的主题/css，并将其单独放在我的 layout.vbhtml /master 页面上。我给了 tag 和 id 属性，引用了一个 javascript 函数，并将 href 更改为我想要加载的不同 css。如果这没有足够的信息让我知道，请详细说明。

更新了我程序中的示例。layout.vbhtml 标头

```
<head>
<meta charset="utf-8" />
<title>Amtrust - Print Metrics @*@ViewData("Title")*@</title>
<link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<meta name="viewport" content="width=device-width" />
<link id="theme"
 href="~/Content/themes/jquery-blue-theme/css/start/jquery-ui-                                    1.10.3.custom.css"                  rel="stylesheet" />
@Styles.Render("~/Content/_Layout")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")
@Scripts.Render("~/Scripts/_Layout")
</head>

site.master.js -> js file I use to keep the theme consistent on all pages.

var domainName;
$(document).ready(function () {
//loading = document.getElementById('loading');
//pagediv = document.getElementById('page');
//alarum = document.getElementById('alarum');
//alarum = $('#alarum'); 
      jQuery's .append() method
$("#menu").menu();
hideLoading();
//Apply UI skins to controls
$(function ()

 {
    $('#printinvButton').button();
    $('#docsearchButton').button();
    $('#policysearchButton').button();
    $('#metricsButton').button();
    $('#themeButton').button();
});

//setInterval(function () { bannerAlert() }, 4000);
if (sessionStorage.getItem('theme') != null) {
    $('#theme').attr('href', sessionStorage.getItem('theme'));
}

domainName = location.protocol + '//' + location.host;
});

var counter = 0;
function switchTheme() {
var theme;
var imageRoot = document.body.getAttribute('data-root');
if (counter == 0) {
theme = domainName + '/PrintRoomMetrics/Content/themes/jquery-blackgrey-                          theme/css/blackGrey/jquery-ui-1.10.3.custom.min.css';
    $('#theme').attr('href', theme);
    counter++;
}
else if (counter == 1) {
     theme =
 domainName + '/PrintRoomMetrics/Content/themes/jquery-chrome-theme
/css/overcast/jquery-ui-1.10.3.custom.min.css';
    $('#theme').attr('href', theme);
    counter++;
}
else if (counter == 2) {
    theme = domainName + '/PrintRoomMetrics/Content/themes/jquery-blue-theme/css/start/jquery-ui-    1.10.3.custom.min.css';
    $('#theme').attr('href', theme);
    counter++;
}
if (counter == 3) {
    counter = 0;
}
sessionStorage.setItem('theme', theme);// store data for session
} 
```

希望你能弄清楚我做了什么。忽略我的应用代码，只关注你需要的。

# jquery - HTML5 & JQueryMobile - 分页和过滤 UL 列表

> ID：15405891
> 
> 赞同：2
> 
> 时间：2013-03-14T09:50:19.877
> 
> 标签：jquery, html, jquery-mobile, pagination, filtering

我正在构建一个简单的 HTML5 应用程序，它具有 Ul 和过滤器，如下所示：

```
<ul id="ItemsList" data-role="listview" data-inset="true" data-filter="true" > 
```

这个 UL 是从在 div 的 pageshow 上执行的 Javascript 方法动态填充的。由于数据集很大，我希望能够过滤此列表，但同时保留过滤选项。

我似乎找不到此类或任何先前问题的示例。有谁知道解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:56:00.460

您是在寻找 Ajax 解决方案还是列表项全部加载到 DOM 中？对于 Ajax 解决方案，您可以尝试[http://listomatic.stakbit.com/](http://listomatic.stakbit.com/)，它会在每次点击/单击时进行 Ajax 调用以进行分页，并且将在启用搜索字段的情况下工作 - 对键入的搜索字符串进行 Ajax 调用。我是这个插件的开发者。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T17:22:50.777

我只是设法为它写了一个 jquery 插件，因为我没有找到任何好的解决方案。我今天刚刚完成，需要几天时间才能将其作为免费插件上传。现在您可以通过 akhilesh.gandhi@gmail.com 与我联系，或者这里是解决方案

```
$.fn.scrollPagination.loadContent = function(obj, opts){
     var target = opts.scrollTarget;
     var mayLoadContent = $(target).scrollTop()+opts.heightOffset >= $(document).height() - $(target).height();
     if (mayLoadContent && (page <= noofpage)){
         if (opts.beforeLoad != null){
            opts.beforeLoad(); 
         }
         $(obj).children().attr('rel', 'loaded');
         var pageurl = opts.contentPage + "?q=" + opts.query + "&take=" + opts.take + "&skip=" + opts.skip + "&page=" + page + "&pagesize=" + opts.pagesize
         $.ajax({
              type: 'Get',
              url: pageurl,
              data: opts.contentData,
              success: function (data) {
                  noofpage = data[0].Count / opts.pagesize;
                  page = page + 1;
                $(obj).append(data); 
                var objectsRendered = $(obj).children('[rel!=loaded]');

                if (opts.afterLoad != null){
                    opts.afterLoad(data);
                }
              },
              dataType: 'json'
         });
     }

  }; 
```

# c# - 不仅生成唯一的密码字母

> ID：15405899
> 
> 赞同：0
> 
> 时间：2013-03-14T09:50:32.400
> 
> 标签：c#

我的密码生成器有问题。

```
 var listOfCharacters = "abcdefghijklmnopqrstuvwxyz"
    chars = listOfCharacters.ToCharArray();
} // RB: I've reformatted the code, but left this brace in. 
  //     I think it should be removed though... 

string password = string.Empty;
for (int i = 0; i < length; i++) // length = 64
{
    int x = random.Next(0, chars.Length); // chars.Lenght = 26 

    if (!password.Contains(chars.GetValue(x).ToString()))
        password += chars.GetValue(x);
    else
        i--;
 }

 if (length < password.Length) password = password.Substring(0, length); //stucks here at 26 because all the 26 chars from the list are used one time so there are no more chars to use, but i want to use a char more than one time

 return password; 
```

我的问题是：当我想创建一个包含 64 个字符的密码并且我使用示例 26 中的字符列表时，他在 26 处停止生成，因为他只从列表中取出所有 26 个字符一次。我需要在我上面的代码中使用一个多于一个字符的方法，因此不仅每个字符只有 1 次，而且例如他可以使用字母“a”3 次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:56:13.617

您的代码有明确的检查，以确保您最多只使用一个字符 1 次。

```
if (!password.Contains(chars.GetValue(x).ToString()))
    password += chars.GetValue(x);
else
    i--; 
```

删除此检查，您应该会没事的！

```
password += chars.GetValue(x); 
```

**编辑**：

请在下面找到您应该拥有的确切代码。

```
for (int i = 0; i < length; i++) // length = 64
{
    int x = random.Next(0, chars.Length); // chars.Lenght = 26 

    password += chars.GetValue(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:03:36.220

我已经更新了您的代码，因此它一次添加了所有字符，如果需要更多字符（长度 > 26），那么它会再次开始添加每个字符。因此，最多 26 个字符的密码具有唯一字符，最多 52 个字符的密码具有每个可能的字符两次，等等。

```
var listOfCharacters = "abcdefghijklmnopqrstuvwxyz";
var chars = listOfCharacters.ToList();

string password = string.Empty;
for (int i = 0; i < length; i++) {
    int x = random.Next(0, chars.Count);

    password += chars[x];

    chars.RemoveAt(x);
    if (chars.Count == 0)
        chars = listOfCharacters.ToList();
 }

 if (length < password.Length) password = password.Substring(0, length);

 return password; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:55:39.890

如果字符尚未添加到密码中，则仅添加字符：

```
if (!password.Contains(chars.GetValue(x).ToString())) 
```

一旦添加了所有 26 个字符，它就不会再添加了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:56:23.450

试试这个：

```
string password = string.Empty;

for (int i = 0; i < length; i++)
{
    int x = random.Next(0, chars.Length);

    password += chars.GetValue(x);
} 
```

# c# - 基于 MapObject2.4 的应用程序中的 Reding .dgn v8 文件

> ID：15405903
> 
> 赞同：0
> 
> 时间：2013-03-14T09:50:42.187
> 
> 标签：c#, c, microstation

我有一个应用程序，它启用了**MapObject2.4**提供的**GIS 支持**。应用程序能够使用 mapobject API 加载**.dgn**文件 v7，但无法加载 .dgn v8 文件。现在我必须在我的应用程序中提供对 .dgn v8 的支持。我在互联网上搜索了各种选项，但没有得到我正在寻找的正确答案。目前我正在尝试使用 Microstation SDK 构建可以读取 .dgn v8 文件并将其转换为 v7 格式的 MDL 应用程序，以便我将使用应用程序中的输出 dll 将 .dgn v8 转换为 v7 并使用该文件。我的问题是我不知道 mdl 编程，甚至不知道我是否可以在我的应用程序中使用 mdl 编译的 dll。

 ****请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:40:04.557

MDL 通常需要运行 MicroStation 实例才能执行任何操作。您的 dll 将无法独立运行。

您最好在 Bentley 社区网站上的[Bentley 开发人员网络](http://communities.bentley.com/communities/other_communities/bentley_developer_network/default.aspx)(BDN) 论坛上发布问题。如果您不是 BDN 成员，请申请成为 BDN 成员，因为您可以访问所有 SDK 和 Bentley 自己的开发人员定期在那里阅读/发布。

您也可以尝试查看 Open Design Alliance 的[Teigha](http://www.opendesign.com/the_oda_platform/Teigha)。他们为这类事情提供库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T16:04:15.340

您无需编写任何代码即可创建 V7 .dgn 文件。默认情况下，MicroStation V8 将保存为自己的 V8 DGN 格式，但也可以保存为 V7 DGN 格式文件。只需执行*File|Save As*。

您不能在独立应用程序中使用 MDL，我指的是独立于 MicroStation 运行的应用程序。****

# php - php文本文件搜索和删除

> ID：15405912
> 
> 赞同：1
> 
> 时间：2013-03-14T09:50:59.130
> 
> 标签：php, search

我有一个文本文件（in.txt），其中包含多行文本。我需要搜索一个变量字符串，如果找到，删除整行，但保留其他行。我使用了下面的脚本，但它似乎摆脱了所有数据并写下了我正在搜索的内容。请有人能指出我正确的方向吗？'key' 是我正在搜索的字符串。

```
$key = $_REQUEST['key'];
$fc=file("in.txt");

$f=fopen("in.txt","w");

foreach($fc as $line)
{
      if (!strstr($line,$key)) 
        fputs($f,$line); 
}
fclose($f); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:03:41.350

我能想到的最简单的是

```
<?php

    $key = 'a';
    $filename = 'story.txt';
    $lines = file($filename); // reads a file into a array with the lines
    $output = '';

    foreach ($lines as $line) {
        if (!strstr($line, $key)) {
            $output .= $line;
        } 
    }

    // replace the contents of the file with the output
    file_put_contents($filename, $output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:54:54.650

`write`您已在模式下打开文件。这将删除其所有数据。

您应该创建一个新文件。将数据写入较新的。删除旧的。并重命名较新的。

`OR`

`read`以模式打开此文件。将此文件的数据复制到变量中。`write`再次以模式打开。并写入数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:26:28.040

它为我工作

```
<?php
$key = $_REQUEST['key'];
$contents = '';
$fc=file("in.txt");
 foreach($fc as $line)
  {
    if (!strstr($line,$key))
    {
       $contents .= $line; 
     }  
  }
  file_put_contents('in.txt',$contents);
 ?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T10:00:41.230

```
$key = $_REQUEST['key'];
$fc=file("in.txt");

$f=fopen("in_temp.txt","w");

$temp = array();
foreach($fc as $line)
{
    if (substr($line,$key) === false) 
        fwrite($f, line);
}
fclose($f);
unlink("in.txt");
rename("in_temp.txt", "in.txt"); 
```

# java - java.lang.OutOfMemoryError：Java 堆空间

> ID：15405914
> 
> 赞同：0
> 
> 时间：2013-03-14T09:51:08.647
> 
> 标签：java

我的结果集太大。如果它返回一个消耗内存的巨大数据集，那么它会`OutOfMemory`在服务器中显示错误。除了增加堆大小之外，我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:10:08.757

如果您不能将整个结果集加载到内存中......那么不要！根据情况，我可以想到三种选择：

*   一次只读取部分结果集；例如，在“页面”中获取它。
*   阅读时减少结果集；例如，通过提取您需要的字段、制表或其他方式。
*   重组您的查询，以便可以在数据库中完成数据缩减。

如果您提供了有关结果集包含的内容以及您正在使用它做什么的更多详细信息，我们也许可以提供具体的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:15:45.297

如果您可以构造查询，以便单个查询可以返回您需要的所有内容，那么通过结果集流，您可以让数据库一次将结果返回给您一行。然后以增加客户端软件和数据库之间的数据流量为代价大幅减少内存使用量。在我自己的公司中，我们发现这在处理返回数百万行的结果集时非常有效。此功能依赖于数据库，对于 MySQL，它在以下位置进行了描述

[http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-implementation-notes.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-implementation-notes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:53:22.183

尽量不要每次放这么多数据，使用分页器或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:54:49.667

首先检查您对结果集的查询是否正确/优化。
在大多数数据库中，您可以限制返回的行数，例如

```
SELECT top(1000) * FROM mytable; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T09:56:06.250

使用分页器模式：不是一次获取所有数据，而是定期仅获取部分数据。例如，不是得到 100 个结果，而是 5 次得到 20 个结果：0-19，然后 20-39，然后 40-59，等等......

# linux - 使 shell 脚本在启动时作为守护进程运行

> ID：15405915
> 
> 赞同：0
> 
> 时间：2013-03-14T09:51:22.657
> 
> 标签：linux, bash, shell, ubuntu

我有一个 shell 脚本 ( bash )，我目前正在后台运行它来测试它。现在我想在启动计算机后将它作为守护进程运行。我怎样才能做到这一点？它已经有一个无限循环，因为它会一直运行到计算机关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:54:52.460

将脚本的完整路径放入**exit 0**行之前的**/etc/rc.local**文件中。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:26:57.333

或者您可以从内部软链接到您的脚本`/etc/init.d`。它应该以root权限执行。**

# iphone - 为 UIView 子类加载 Nib 的正确方法

> ID：15405916
> 
> 赞同：99
> 
> 时间：2013-03-14T09:51:23.140
> 
> 标签：iphone, ios, objective-c, uiview, xib

我知道以前有人问过这个问题，但答案是矛盾的，我很困惑，所以请不要喷我。

我想`UIView`在我的应用程序中拥有一个可重用的子类。我想使用 nib 文件来描述界面。

现在假设它是一个加载指示器视图，其中包含一个活动指示器。我想在某个事件上实例化这个视图并动画到视图控制器的视图中。我可以毫无问题地以编程方式描述视图的界面，以编程方式创建元素并在 init 方法中设置它们的框架等。

我怎么能用笔尖做到这一点呢？保持界面生成器中给定的大小，而无需设置框架。

我已经设法这样做了，但我确定这是错误的（它只是一个带有选择器的视图）：

```
 - (id)initWithDataSource:(NSDictionary *)dataSource {
        self = [super init];
        if (self){
            self = [[[NSBundle mainBundle] loadNibNamed:[NSString stringWithFormat:@"%@", [self class]] owner:self options:nil] objectAtIndex:0];
            self.pickerViewData = dataSource;
            [self configurePickerView];
        }
        return self;
    } 
```

但我正在覆盖自我，当我实例化它时：

```
FSASelectView *selectView = [[FSASelectView alloc] initWithDataSource:selectViewDictionary];
    selectView.delegate = self;

    selectView.frame = CGRectMake(0, self.view.bottom + 50, [FSASelectView width], [FSASelectView height]); 
```

我必须手动设置框架，而不是从 IB 获取框架。

编辑：我想在视图控制器中创建这个自定义视图，并有权控制视图的元素。我不想要一个新的视图控制器。

谢谢

**编辑：我不知道这是否是最佳做法，我确定不是，但这就是我的做法：**

```
FSASelectView *selectView = [[[NSBundle mainBundle] loadNibNamed:[NSString stringWithFormat:@"%@",[FSASelectView class]] owner:self options:nil] objectAtIndex:0];
    selectView.delegate = self;
    [selectView configurePickerViewWithData:ds];
    selectView.frame = CGRectMake(0, self.view.bottom + 50, selectView.width, selectView.height);
    selectView.alpha = 0.9;
    [self.view addSubview:selectView];
    [UIView animateWithDuration: 0.25 delay: 0 options:UIViewAnimationOptionAllowUserInteraction |UIViewAnimationOptionCurveEaseInOut animations:^{
                            selectView.frame = CGRectMake(0, self.view.bottom - selectView.height, selectView.width, selectView.height);
                            selectView.alpha = 1;
                        } completion:^(BOOL finished) {
                        }]; 
```

**仍然需要正确的练习**

这是否应该使用视图控制器和带有 nib 名称的 init 来完成？我应该在代码中的一些 UIView 初始化方法中设置笔尖吗？或者我做的还好吗？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-14T09:56:14.060

```
MyViewClass *myViewObject = [[[NSBundle mainBundle] loadNibNamed:@"MyViewClassNib" owner:self options:nil] objectAtIndex:0] 
```

我正在使用它来初始化我拥有的可重用自定义视图。

* * *

请注意，您可以在最后使用**“firstObject”**，它更干净一些。"firstObject" 是 NSArray 和 NSMutableArray 的一个方便的方法。

这是一个典型的示例，加载一个 xib 以用作表头。在您的文件 YourClass.m

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    return [[NSBundle mainBundle] loadNibNamed:@"TopArea" owner:self options:nil].firstObject;
} 
```

通常，在 中`TopArea.xib`，您将单击 File Owner 并将**文件所有者设置为 YourClass**。然后实际上**在 YourClass.h 中**，您将拥有 IBOutlet 属性。在`TopArea.xib`中，您可以将控件拖动到这些插座。

不要忘记，在 中`TopArea.xib`，您可能必须**单击视图本身**并将其拖到某个插座，以便在必要时控制它。（一个非常有价值的提示是，当您对表格单元格行执行此操作时，您绝对必须这样做 - 您必须将视图本身连接到代码中的相关属性。）

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-03-14T09:29:56.133

如果你想保持你的`CustomView`和它的`xib`独立`File's Owner`，然后按照这些步骤

*   将该`File's Owner`字段留空。
*   单击`xib`文件中的实际视图`CustomView`并将其设置`Custom Class`为`CustomView`（您的自定义视图类的名称）
*   添加自定义视图`IBOutlet`的`.h`文件。
*   在`.xib`您的自定义视图文件中，单击视图并进入`Connection Inspector`。在这里，您将在`.h`文件中定义所有 IBOutlets
*   将它们与各自的视图联系起来。

在`.m`你的类的文件中`CustomView`，重写`init`方法如下

```
-(CustomView *) init{
    CustomView *result = nil;
    NSArray* elements = [[NSBundle mainBundle] loadNibNamed: NSStringFromClass([self class]) owner:self options: nil];
    for (id anObject in elements)
    {
        if ([anObject isKindOfClass:[self class]])
        {
            result = anObject;
            break;
        }
    }
    return result;
} 
```

现在当你想加载你的`CustomView`，使用下面的代码行 `[[CustomView alloc] init];`

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-14T10:02:56.690

请按照以下步骤操作

1.  创建一个名为 MyView .h/.m 的类`UIView`。
2.  创建一个同名的xib `MyView.xib`。
3.  现在将 File Owner 类更改为`UIViewController`xib`NSObject`中的 from。见下图 ![在此处输入图像描述](../Images/ddae53d83f7b5a1350e83b19023477d0.png)
4.  将文件所有者视图连接到您的视图。见下图 ![在此处输入图像描述](../Images/44a2f06197f686e5139fb5fff420234e.png)

5.  将视图的类更改为`MyView`. 与 3 相同。

6.  放置控件创建 IBOutlets。

这是加载视图的代码：

```
UIViewController *controller=[[UIViewController alloc] initWithNibName:@"MyView" bundle:nil];
MyView* view=(MyView*)controller.view;
[self.view addSubview:myview]; 
```

希望能帮助到你。

**澄清**：

`UIViewController`用于加载您的 xib 以及您在 MyView xib 中分配的`UIViewController`实际视图。`MyView`

**演示** 我在[这里做了一个演示抓取](http://dl.dropbox.com/u/78701794/TestApp.zip)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-01-08T09:28:18.923

在这里回答我自己关于 2 年或几年后的问题，但是......

它使用协议扩展，因此您无需为所有类添加任何额外代码即可完成此操作。

```
/*

Prerequisites
-------------
- In IB set the view's class to the type hook up any IBOutlets
- In IB ensure the file's owner is blank

*/

public protocol CreatedFromNib {
    static func createFromNib() -> Self?
    static func nibName() -> String?
}

extension UIView: CreatedFromNib { }

public extension CreatedFromNib where Self: UIView {

    public static func createFromNib() -> Self? {
        guard let nibName = nibName() else { return nil }
        guard let view = NSBundle.mainBundle().loadNibNamed(nibName, owner: nil, options: nil).last as? Self else { return nil }
        return view
    }

    public static func nibName() -> String? {
        guard let n = NSStringFromClass(Self.self).componentsSeparatedByString(".").last else { return nil }
        return n
    }
}

// Usage:
let myView = MyView().createFromNib() 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-10-10T22:32:57.123

在斯威夫特：

例如，您的自定义类的名称是`InfoView`

首先，您创建文件`InfoView.xib`，`InfoView.swift`如下所示：

```
import Foundation
import UIKit

class InfoView: UIView {
    class func instanceFromNib() -> UIView {
    return UINib(nibName: "InfoView", bundle: nil).instantiateWithOwner(nil, options: nil)[0] as! UIView
} 
```

然后设置`File's Owner`成`UIViewController`这样：

[![在此处输入图像描述](../Images/70aa14fca908982a454e0c7d1188b474.png)](https://i.stack.imgur.com/YSsmC.png)

将您的重命名`View`为`InfoView`：

[![在此处输入图像描述](../Images/95e7f2f931927182f33958a7a7705648.png)](https://i.stack.imgur.com/GoOtG.png)

右键单击`File's Owner`并将您的`view`字段与您的`InfoView`：

[![在此处输入图像描述](../Images/a241d1b16786daf4df61b4c3fb171f5d.png)](https://i.stack.imgur.com/Uiu0F.png)

确保类名是`InfoView`：

[![在此处输入图像描述](../Images/1abd2f2f9eb14decaf099111ebd74746.png)](https://i.stack.imgur.com/5VXwM.png)

在此之后，您可以毫无问题地将操作添加到自定义类中的按钮：

[![在此处输入图像描述](../Images/f00a33c5a51cf92d46d8ed3a6bffacf2.png)](https://i.stack.imgur.com/nYctT.png)

并在您的`MainViewController`：

```
func someMethod() {
    var v = InfoView.instanceFromNib()
    v.frame = self.view.bounds
    self.view.addSubview(v)
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-14T10:50:59.760

好吧，您可以使用视图控制器初始化 xib 并使用 viewController.view。或者按照你的方式去做。仅将`UIView`子类作为控制器`UIView`是一个坏主意。

如果您的自定义视图没有任何出口，那么您可以直接使用一个`UIViewController`类来初始化它。

**更新：**在你的情况下：

```
UIViewController *genericViewCon = [[UIViewController alloc] initWithNibName:@"CustomView"];
//Assuming you have a reference for the activity indicator in your custom view class
CustomView *myView = (CustomView *)genericViewCon.view;
[parentView addSubview:myView];
//And when necessary
[myView.activityIndicator startAnimating]; //or stop 
```

否则，您必须进行自定义`UIViewController`（使其成为文件的所有者，以便正确连接插座）。

```
YourCustomController *yCustCon = [[YourCustomController alloc] initWithNibName:@"YourXibName"]. 
```

无论您想在哪里添加可以使用的视图。

```
[parentView addSubview:yCustCon.view]; 
```

但是，在加载 xib 时将另一个视图控制器（已经用于另一个视图）作为所有者传递并不是一个好主意，因为控制器的视图属性将被更改，并且当您想要访问原始视图时，您不会有一个参考。

**编辑：**如果您将新的 xib 与文件的所有者设置为同一个主`UIViewController`类并将视图属性绑定到新的 xib 视图，您将面临这个问题。

IE;

*   YourMainViewController -- 管理 -- mainView
*   CustomView - 需要在需要时从 xib 加载。

下面的代码稍后会引起混淆，如果你把它写在 view did load of `YourMainViewController`. 那是因为`self.view`从这一点开始将引用您的自定义视图

```
-(void)viewDidLoad:(){
  UIView *childView= [[[NSBundle mainBundle] loadNibNamed:@"YourXibName" owner:self options:nil] objectAtIndex:0];
} 
```

# java - 类在 Eclipse 中被解析，但在 netbeans 中失败 - 泛型

> ID：15405917
> 
> 赞同：0
> 
> 时间：2013-03-14T09:51:24.560
> 
> 标签：java, eclipse, netbeans, hbase

在 netbeans 和 eclipse 上课时，我有一个奇怪的行为。

下面的类在eclipse（juno）中编译OK，但netbeans（7.3）告诉我“MyComparator不是抽象的，不会覆盖Comparable的抽象方法compareTo（Object）”。源设置为使用 1.7 版。

```
import java.io.*;
import org.apache.hadoop.hbase.filter.WritableByteArrayComparable;

public class MyComparator extends WritableByteArrayComparable {
protected int offset;

public MyComparator () {
}

public MyComparator (byte[] mask, int offset) {
       //...
}

@Override
public void readFields(DataInput in) throws IOException {
      // do something
}

@Override
public void write(DataOutput out) throws IOException {
      // do something
}

public int compareTo(byte[] value) {
    //do something here
}
} 
```

我该怎么做才能让它在 netbeans 中也能正常工作？

编辑：hbase 的版本是 0.92.1 - 可以找到抽象类，例如。这里： http: [//archive.cloudera.com/cdh4/cdh/4/hbase-0.92.1-cdh4.0.0/apidocs/org/apache/hadoop/hbase/filter/WritableByteArrayComparable.html](http://archive.cloudera.com/cdh4/cdh/4/hbase-0.92.1-cdh4.0.0/apidocs/org/apache/hadoop/hbase/filter/WritableByteArrayComparable.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:07:21.773

不知道它是如何在eclipse中编译的。eclipse 和 net beans 类路径中可能存在不同版本的 WritableByteArrayComparable。

但是 WritableByteArrayComparable 是一个抽象类，你还没有实现它的所有抽象方法。检查[链接](http://javasourcecode.org/html/open-source/hbase/hbase-0.94.1/org/apache/hadoop/hbase/filter/WritableByteArrayComparable.java.html)。

至少这个没有实现

```
public abstract int compareTo(byte [] value, int offset, int length); 
```

# jquery - how to set nowrap to a checkbox jquery control?

> ID：15405919
> 
> 赞同：3
> 
> 时间：2013-03-14T09:51:33.323
> 
> 标签：jquery, jquery-mobile, checkbox

In jquery mobile the checkbox has a label caption and if the text is long, jqm wrap it in multiline, I need to do like the second checkbox without space. eg.

```
<label style="white-space: nowrap;"> 
```

[http://jsfiddle.net/evilripper/4rWMe/1/](http://jsfiddle.net/evilripper/4rWMe/1/) :)

I tryed to set nowrap in the style of the label but doesn't works.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:01:47.710

Put text in a span:

```
<label>
    <input name="checkbox-0" type="checkbox" />
    <span style="white-space: nowrap;">Very long text with space Very long text with space Very long text with
     space</span>
 </label> 
```

DEMO: [http://jsfiddle.net/4rWMe/2/](http://jsfiddle.net/4rWMe/2/)

# php - 如何在两种方法中通过引用传递？

> ID：15405922
> 
> 赞同：0
> 
> 时间：2013-03-14T09:51:40.050
> 
> 标签：php, oop, reference

```
class foo {
    public $value1 = 1;

    public function setValue1(& $v) {
        $this->value1 = $v;
    }
}

class bar {
    public $value2 = 2;
    public $obj;

    public function & getValue2() {
        return $this->value2;
    }

    public function setValue2($v) {
        $this->value2 = $v;
}
}

$foo = new foo();
$bar = new bar();

$bar->obj = $foo;

$foo->setValue1($bar->getValue2()); //<-- not works

//$foo->value1 =& $bar->getValue2(); //<-- works

$bar->setValue2(4);

var_dump($foo, $bar) Prints:
    object(foo)[124]
      public 'value1' => int 2
    object(bar)[123]
      public 'value2' => int 4
      public 'obj' => 
        object(foo)[124]
          public 'value1' => int 2 
```

为什么当我使用 $foo->setValue1($bar->getValue2()) a foo->value1 等于 2 而 bar->value2 等于 4 ？

我正在尝试使用方法而不是属性来传递引用和返回引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:14:46.963

**这有效：**

```
class foo {
    public $value1 = 1;

    public function &setValue1( $v ) { // <-- !
        $this->value1 = &$v; // <-- !
    }
}

class bar {
    public $value2 = 2;
    public $obj;

    public function &getValue2() {
        return $this->value2;
    }

    public function &setValue2( $v ) { // <-- !
        $this->value2 = $v;
}
}

$foo = new foo();
$bar = new bar();

$bar->obj = $foo;

$tmp =& $bar->getValue2(); // <-- !
$foo->setValue1( &$tmp ); // <-- !

$bar->setValue2( 4 );

echo "<pre>" . print_r( $foo, 1 ) . "</pre>";
echo "<pre>" . print_r( $bar, 1 ) . "</pre>"; 
```

→*输出：*

```
foo Object
(
    [value1] => 4
)

bar Object
(
    [value2] => 4
    [obj] => foo Object
        (
            [value1] => 4
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:55:00.687

正确答案是参考方法 $foo->value1 = &$v;

# reference - 如何选择具有特定 id 的锚标记

> ID：15405929
> 
> 赞同：0
> 
> 时间：2013-03-14T09:52:03.187
> 
> 标签：reference, tags, anchor

我想将一个类添加到特定的锚标记

我正在做的是这个......

```
$('#footerMenu > a#40').addClass['currentLink']; 
```

标签本身是

```
<a pageid="40" id="40" class="getPage" href="#Home">Home</a> 
```

请一些见解..

问候，

武特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:54:42.170

由于 an`id`是独一无二的，您可以使用

```
$('#40').addClass('currentLink'); 
```

如果您对 ID 的使用有任何疑问，请查看[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)上的“高效 CSS 指南”一章！

# asp.net - 删除树视图的所有元素

> ID：15405939
> 
> 赞同：2
> 
> 时间：2013-03-14T09:52:39.950
> 
> 标签：asp.net, treeview

嗨，我有这个带复选框的树视图。我想遍历整个树视图并删除那些尚未检查的项目。怎么做？我认为我们必须在 foreach 中写一些别的东西。好心的帮助

```
foreach (TreeNode tn in this.TreeView1.Nodes)
{
    if (tn.Checked == false)
    {
        int strTreeValue = Convert.ToInt32(tn.Value);
        SqlCommand com = new SqlCommand("Delete From Role_Menu Where Menu_id=" + strTreeValue, con);
        com.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:06:56.640

您需要在 for 循环之后绑定树视图。

您需要在 for 循环之后执行以下代码。

```
 DataTable table= new DatatTable();
SqlDataAdapter adp = new SqlDataAdapter("Select Query",Con);
adp.Fill(table,"Table");

TreeView1.DataSource=table;
TreeView.DataBind(); 
```

# extjs - 文件上传在 FireFox 中不起作用

> ID：15405940
> 
> 赞同：0
> 
> 时间：2013-03-14T09:52:41.373
> 
> 标签：extjs

我正在使用 fileuploadfield 上传文件。

代码片段：

```
myUploadForm.getForm().submit({
   url: 'ref/uploadData',
   waitMsg: 'Uploading file...',

   success: function( form, action ) {
      alert('sueccess');
   },

   failure:function(form, action) {
      alert('failure');
   }    
}); 
```

从后端（grails）我得到响应对象为{success：true，name：'etc'}。

这里的问题是这在 chrome 和 IE 中运行良好。但在 Firefox 中它不起作用。它正在下载以请求的 url 方法命名的文件，并在该文件中写入响应。

即uploadData {success:true, name:'etc'}

在萤火虫的网络标签中，我可以看到正确的响应。此问题仅在 FireFox 中存在。

任何帮助将非常感激。

问候网址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:12:35.723

在您的控制器中尝试如下设置

```
 response.contenttype ="text/html" // sometimes not required.
 render ("{ success: true, result:'file has been uploaded succesfully'}" ) 
```

这对我有用..试一试。

# android - 根据 Android-ImageView 在 XML 中的大小制作图像缩放

> ID：15405941
> 
> 赞同：0
> 
> 时间：2013-03-14T09:52:41.643
> 
> 标签：android, android-layout, android-imageview

我正在开发一个 Android 应用程序，由于我是 Android 开发的初学者，所以我在设计我的 UI 时遇到了困难。

UI 由许多图像组成，这些图像充当屏幕上的小部件。我希望这些图像始终覆盖屏幕的某个部分，以便布局与不同屏幕尺寸的不同设备兼容。例如，我有一个面板，我希望它与屏幕的顶部边缘对齐，并从顶部边缘开始覆盖屏幕的 %30。我知道我可以通过在布局xml中适当地混合Relative和LinearLayouts来实现这一点，但我失败的是根据屏幕上ImageView的大小调整我放入ImageView的图像大小。就我而言，似乎 ImageView 本身会根据我放入的图像调整自身大小。换句话说，如果我有一个覆盖屏幕上部 %30 的 ImageView 对象，我希望它在我将图像放入其中后保持不变。（图像可能会有点失真，在这种情况下对我来说不是什么大问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:11:03.197

首先，对于 Android SDK，有可用于为不同屏幕尺寸创建应用程序的指南。按照这个：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

如果你想要一个视图，它以 30% 或 80% 的特定面积显示，你可以`android:layout_weight`在布局中使用属性而不是定义特定的高度或宽度。

如果您希望您的图像始终填充`ImageView`, 您应该`android:scaleType="fitXY"`在 ImageView 中使用属性。

# php - 树枝模板循环将数组输出与键相关联

> ID：15405942
> 
> 赞同：0
> 
> 时间：2013-03-14T09:52:43.700
> 
> 标签：php, templates, loops, symfony, twig

我有两个数组，我知道它们的长度为 25 项。我想创建一个同时遍历它们的 for 循环，以便我可以输出值。以下内容不起作用，但它有望展示我试图实现的目标

```
{% for i in 0..25 %}
  <tr>
    <td>{{sourceList[i]}}</td> 
    <td>{{destinationList[i]}}</td>
  <tr>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:02:51.517

这应该可行，但您可以尝试这样做：

```
{% for i in range(0, 25) %}
<tr>
    <td>{{sourceList[i]}}</td> 
    <td>{{destinationList[i]}}</td>
  <tr>
{% endfor %} 
```

这将显示**26**个项目

在这里查看更多信息：http: [//twig.sensiolabs.org/doc/functions/range.html](http://twig.sensiolabs.org/doc/functions/range.html)

你确定你的数组内容吗？

# php - 使用 url 参数的 urlrewrite

> ID：15405946
> 
> 赞同：0
> 
> 时间：2013-03-14T09:52:51.700
> 
> 标签：php, apache, .htaccess, cookies, url-rewriting

我对 apache 和 .htaccess 有疑问。我需要什么：将网址从 www.mywebsite.com 重写为 rome.mywebsite.com 或 lasangeles.mywebsite.com

脚本如何工作：启动 php 脚本读取 cookie 并获取值（即 rome）脚本将使用参数将标头位置发送到 index.php?zone=rome .htacess 云会像 rome.mywebsite 一样进行 url 重写.com

我做了什么： - 我创建了一个通配符 DNS 记录 A，例如 *.mywebsite.com - 我正在使用以下规则：

```
RewriteCond %{HTTP_HOST} !www.mywebsite.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-_]+).mywebsite.com [NC]
RewriteRule (.*) %{SCRIPT_FILENAME}?zone=%2 [NC,QSA] 
```

但它不起作用！

在这里发帖之前，我在网站上进行了搜索，但所有答案都不适用于我的问题。

你有解决问题的想法吗？

在此先感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:04:09.263

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} !^www.mywebsite.com
RewriteCond %{HTTP_HOST} ^([w]{3})?\.?([a-z0-9-]+)\.mywebsite\.com
RewriteRule ^/? /index.php?zone=%2 [QSA] 
```

试试这个，如果有错误就做剩下的修复它。
我刚刚给了你一个例子，但仍然没有经过测试。

如果上面的代码不起作用，请尝试下面的代码：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} !^www.mywebsite.com
RewriteCond %{HTTP_HOST} ^([a-z0-9-]+)\.mywebsite\.com
RewriteRule ^/? /index.php?zone=%1 [QSA]

RewriteCond %{HTTP_HOST} !^www.mywebsite.com
RewriteCond %{HTTP_HOST} ^www\.([a-z0-9-]+)\.mywebsite\.com
RewriteRule ^/? /index.php?zone=%1 [QSA] 
```

# android - 简历上的透明活动不显示android

> ID：15405963
> 
> 赞同：5
> 
> 时间：2013-03-14T09:53:44.283
> 
> 标签：android, android-intent, navigation

我有 3 项活动：家庭（基本活动）与

```
 <activity
        android:launchMode="singleTop"
        android:name="com.Home"
        android:label="@string/app_name"

        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

其他两个活动：Activity1 和 Activity2

`android:theme="@android:style/Theme.Translucent"` 可以从彼此或从家里调用主题。

他们总是回到家 onBackpress() 它被覆盖

```
intent.setClass(this, Home.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

当从activity2调用activity1时

```
intent.setClass(this, ACtivity2.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

它的 onResume 被调用但看不到 有什么解决办法吗？

**我只想要堆栈中的单个 Activity 实例。**

**要求：** Activity1 和 Activity2 应该一旦创建就永远不应该被销毁（它们应该总是从历史中调用），直到 Home 被调用。

帮帮我。提前致谢。

[也去过这个](https://stackoverflow.com/questions/9309479/bug-theme-translucent-flag-activity-reorder-to-front)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:19:15.067

我认为出现问题是因为您将 FLAG_ACTIVITY_CLEAR_TOP 用于家庭活动。

作为，它执行

> 如果堆栈中已经存在被调用活动类型的实例，则将该实例带到前台而不是创建新实例。此外，堆栈中位于该实例顶部的所有活动都将从堆栈中清除。例如，假设当前活动堆栈是 ABCDE，启动类型 C 的活动将从任务中清除活动 D 和 E，并生成堆栈 ABC。

因此，当您调用 Home Activity 时，您的 Activity 1 和 Activity 2 会被清除。

解决方案 ：

带有 FLAG_ACTIVITY_RESET_TASK_IF_NEEDED 或 FLAG_ACTIVITY_REORDER_TO_FRONT 的 Call Home 活动

作为，它执行

> 除非意图创建新任务或将现有任务带到前台，否则此标志无效。在这种情况下，任务被重置，这意味着应用了任务关联性（导致活动从该任务移出或移至该任务），并且假设也设置了 FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET，则根据该标志的规范清除任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:57:06.227

在你的清单中给

```
android:launchMode="singleinstance"; 
```

# asp.net - 无效的回发或回调参数。这段代码有什么问题？

> ID：15405964
> 
> 赞同：1
> 
> 时间：2013-03-14T09:53:44.440
> 
> 标签：asp.net, vb.net, gridview

我有这个gridview，我不知道里面的按钮有什么问题。我有这个 asp 代码：

```
<asp:GridView ID="gvList" runat="server">
            <Columns>
                <asp:TemplateField HeaderText="User Name" HeaderStyle-ForeColor="Black"  HeaderStyle-Font-Bold="true">
                    <ItemTemplate>
                        <asp:Label runat="server" ID="lblUsername" Text='<%# Eval("cUserName") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Dept User" HeaderStyle-ForeColor="Black"  HeaderStyle-Font-Bold="true">
                    <ItemTemplate>
                        <asp:Label runat="server" ID="lblDept" Text='<%#  iif(Eval("lDeptUser"),"Yes","No")  %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Actions" HeaderStyle-ForeColor="black" HeaderStyle-Font-Bold="true">
                    <ItemTemplate>
                        <asp:Button  ID="btnedit" runat="server" Text="Edit" />
                        <asp:Button ID="btnDelete" OnClick="DeleteRow" runat="server" Text="Delete" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
            </asp:GridView> 
```

当我在任何行上按删除或编辑时，它会给我错误！`Invalid postback or callback argument.`

这是我在 vb.net 中的服务器端代码：

```
Public Function GetList() As DataTable
    Dim Query As String = "Select cUserName,lDeptUser FROM Intranet.dbo.Gn_ISCoordinators"
    Dim dt As DataTable = New DataTable()
    Using adapter = New SqlDataAdapter(Query, ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
        adapter.Fill(dt)
        gvList.DataSource = dt
        gvList.DataBind()
        Return dt
    End Using

End Function

Public Function DelRow() As DataTable

    Dim strusername As String = CType(gvList.FindControl("lblUsername"), Label).Text.Trim()

    Dim Query As String = "Delete FROM Intranet.dbo.Gn_ISCoordinators where cUserName='" & strusername & "'"
    Dim dt As DataTable = New DataTable()
    Using Adapter = New SqlDataAdapter(Query, ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
        Adapter.Fill(dt)
        Return dt
    End Using

End Function

Protected Sub DeleteRow(ByVal sender As Object, ByVal e As System.EventArgs)
    DelRow()
End Sub

Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    GetList()

End Sub

Protected Sub gv(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvList.RowDataBound
    e.Row.Cells(3).Visible = False
    e.Row.Cells(4).Visible = False

End Sub

End Class 
```

我认为它来自客户端。请帮我解决这个问题。顺便说一句，到目前为止我还没有使用任何 ajaxtoolkit，`EnableEventValidation="true"`在页面中以及 web.config

是什么问题及其解决方法，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:11:11.867

您不能使用此函数调用。因为

```
CType(gvList.FindControl("lblUsername"), Label).Text.Trim() 
```

仅允许在按钮单击事件上。按钮单击事件本身中的功能代码也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:16:00.577

首先，我将代码包装在`Page_Load`：

```
If Not IsPostBack Then GetList() 
```

因此，您只想在第一次加载而不是回发时对网格进行数据绑定。它的状态将通过`ViewwState`默认保持。

中的下一个问题`DeleteRow`，您试图`FindControl`通过`GridView`. 但`NamingContainer`它是`GridViewRow`因为 a`GridView`包含多行（和标签）而不仅仅是一个。

所以你必须首先获得对行的引用。只需`NamingContainer`使用`Button`:

```
Dim btn = DirectCast(sender, Button)
Dim row = DirectCast(btn.NamingContainer, GridViewRow)
Dim lblUsername = DirectCast(row.FindControl("lblUsername"), Label)
' ... ' 
```

# python - 如何检查输入中出现了多少次 0 1 2 3 4 5 6 7 8 9 并将其放入 Python 的列表中？

> ID：15405966
> 
> 赞同：2
> 
> 时间：2013-03-14T09:54:11.257
> 
> 标签：python, counting

如何检查`0` `1` `2` `3` `4` `5` `6` `7` `8` `9`输入中出现的次数并将其放入列表中。

例如，在有人输入后`122033`，该函数应返回以下列表：

```
[1,1,2,2] 
```

*   `result[0]=1`表示0出现1次
*   `result[1]=1`表示 1 出现 1 次
*   `result[2]=2`表示 2 出现 2 次
*   `result[3]=2`表示 3 出现 2 次

请帮助我在一两天内一直坚持如何做到这一点。它说我想使用结果`= 10 * [0]`

这是一个输出示例

```
Enter a string of numbers: 4567899678
4 occurs 1 time
5 occurs 1 time
6 occurs 2 times
7 occurs 2 times
8 occurs 2 times
9 occurs 2 times 
```

到目前为止，我尝试过这个，但我认为这不是我应该做的。

```
def countdigits(aString):
    d = {}
    for i in aString:
        if i in d:
            d[i] = d[i]+1
        else:
            d[i] = 1
    return d
def main():
    aString=input("Enter numbers:")
    print(countdigits(aString))
main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:55:57.920

```
>>> import collections
>>> a = collections.Counter([1,1,2,2])
>>> a
Counter({1: 2, 2: 2})
>>> a[1]
2 
>>> a[2]
2
>>> 
```

如果您不应该使用`collections`：

```
def count_digits(s):
    res = [0]*10
    for x in s:
        res[int(x)] += 1
    return res 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:10:03.397

尽管使用 eg 可以更好地解决您的任务`Counter`，就像其他答案所暗示的那样，但它不符合 using 的提示`result = 10 * [0]`。这是预期的解决方案：

```
def digit_count(number):
    # Make sure number is a string
    number = str(number)
    counts = [0] * 10
    for digit in number:
        counts[int(digit)] += 1
    return counts

counts = digit_count(122033)

for digit, count in enumerate(counts):
    if count == 0:
        continue
    print "{0} occurs {1} time{2}".format(
        digit, count, "" if count == 1 else "s") 
```

请注意，`digit_count`它只接受一个正整数或一串数字。如果您提供负数、浮点数或复数，它会引发 ValueError。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:38:43.967

删除零：

```
def count_digits(s):
    res = [0]*10
    for x in s:
        res[int(x)] += 1
    while 0 in res:
        re.remove(0)
    return res 
```

# java - 从字符数组中删除所有空元素

> ID：15405968
> 
> 赞同：2
> 
> 时间：2013-03-14T09:54:17.617
> 
> 标签：java, sockets

我有一个字符数组，一次最多可以容纳 50000 个字符。该数组的内容来自套接字连接。但是，不能保证此字符缓冲区不会有任何空元素。然后我需要将此字符数组转换为字符串（例如 new String(buffer);）。我的问题是，每当我从套接字收到一个不是 50000 长的缓冲区时，如何从这个 char 数组或这个字符串中删除剩余的或空的元素？如果没有，您建议的最有效方法是什么？

/*这是当前的实现*/

```
private BufferedReader is;

//Other code    

public String readBufferUpdate() throws IOException {
    char[] buffer =new char[50000];
    is.read(buffer);
    return new String(buffer);
} 
```

////// 这是一个使用 ByteArrayOutputStream 的实现

```
public String readAuth() throws IOException {
        int s;
        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        while ((s = is.read()) != -1) {
            bao.write(s);
            if (!is.ready())
                break;
        }
        if (s == -1) {
            return null;
        }
        String result = bao.toString();
        return result;
    } 
```

当我需要读取大量数据时，此实现非常慢。

- - - - - - - - -编辑

（例如，服务器向我发送数据，但它可能并不总是 50000 长字节，而是 32822 长字节，那么我需要删除剩余的数组元素）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:28:03.463

从缓冲区中读取的正确方法`InputStream`如下。

```
public String readBufferUpdate() throws IOException {
    char[] buffer =new char[50000];
    int bytesRead = is.read(buffer, 0, buffer.length);
    return new String(buffer, 0, bytesRead);
} 
```

在这里，您`is.read()`返回已读入的字节数`bytesRead`。只有那么多字节从缓冲区复制到`String`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:06:45.503

类似的东西也应该起作用：

```
public String readBufferUpdate() throws IOException {
  char[] buffer =new char[50000];
  is.read(buffer);

  return new String(ArrayUtils.removeElements(buffer, ''));
} 
```

此处的文档：http: [//commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#removeElements(char[], char...)](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#removeElements%28char%5B%5D,%20char...%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:08:09.710

我建议将数组转换为字符串并使用 replaceAll 和 trim 函数删除空元素。

```
String bufferString = new String(buffer).trim().replaceAll(" ", ""); 
```

这不需要任何额外的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:57:35.400

```
StringWriter writer = new StringWriter();
IOUtils.copy(inputStream, writer, encoding);
String theString = writer.toString(); 
```

或者

```
String theString = IOUtils.toString(inputStream, "UTF-8"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T10:00:47.177

改用数组列表！这将允许您删除数组元素，而标准数组包没有这样做的“简单”方法。

 `ArrayList buffer = new ArrayList (50000)

buffer.add(x)

buffer.remove(x)`  `[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

注意：在 ArrayList 上实例化一个类型`

# html - CSS Web 模板的问题

> ID：15405970
> 
> 赞同：1
> 
> 时间：2013-03-14T09:54:29.723
> 
> 标签：html, css

我对 Web 模板中的 CSS 有疑问。

这是我的 HTML 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Green Pasture by FCT</title>
<link href='http://fonts.googleapis.com/css?family=Oswald:400,300' rel='stylesheet' type='text/css' />
<link href='http://fonts.googleapis.com/css?family=Abel|Satisfy' rel='stylesheet' type='text/css' />
<link href="/EquityMKC/css/default.css" rel="stylesheet" type="text/css" media="all" />
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->

 <script type="text/javascript" src="/EquityMKC/jquery/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="/EquityMKC/jquery/jquery.fixedMenu.js"></script>
        <script>
        $('document').ready(function(){
            $('.menu').fixedMenu();
        });
        </script>

</head>
<body>
<div id="header-wrapper">
    <div id="header">
        <div id="logo">
            <h1><a href="#">Equity Group</a></h1>
        </div>
        <div id="menu" class="menu">
            <ul>
                <li class="current_page_item"><a href="/EquityMKC/Welcome.jsp" accesskey="1" title="">Welcome</a></li>
                <li><a href="/EquityMKC/Publish.jsp" accesskey="2" title="">Publish</a></li>
                <li><a href="#" accesskey="3" title="">Trading<span class="arrow"></span></a>

                 <ul>
                    <li><a href="/EquityMKC/Buy.jsp">BUY</a></li>
                    <li><a href="/EquityMKC/Sell.jsp">SELL</a></li>
                 </ul>
                </li>

                <li><a href="/EquityMKC/Portfolio.jsp" accesskey="4" title="">Portfolio</a></li>

                <li><a href="#" accesskey="5" title="">Blotter<span class="arrow"></span></a>

                <ul>
                    <li><a href="/EquityMKC/Order.jsp">Order</a></li>
                    <li><a href="/EquityMKC/Trade.jsp">Trade</a></li>
                 </ul>

                </li>

                <li><a href="/EquityMKC/About.jsp" accesskey="5" title="">About</a></li>
            </ul>
        </div>
    </div>
</div>

</body>
</html> 
```

我的 CSS 文件是

```
body {
    margin: 0px 0px 0px 0px;
    padding: 0;
    background: #2B2B2B;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #8F8F8F;
}

h1, h2, h3 {
    margin: 0;
    padding: 0;
    font-weight: 200;
    color: #222222;
}

h2 {
    font-size: 3em;
}

p, ol, ul {
    margin-top: 0px;
    padding: 0px;
}

p, ol {
    line-height: 180%;
}

strong {
}

a {
    color: #5C5539;
}

a:hover {
    text-decoration: none;
}

a img {
    border: none;
}

img.border {
}

img.alignleft {
    float: left;
}

img.alignright {
    float: right;
}

img.aligncenter {
    margin: 0px auto;
}

hr {
    display: none;
}

/** WRAPPER */

#wrapper {
    overflow: hidden;
    background: #FFFFFF;
}

.container {
    width: 1200px;
    margin: 0px auto;
}

.clearfix {
    clear: both;
}

/* Header */

#header-wrapper {
    overflow: hidden;
    height: 150px;
}

#header {
    width: 1200px;
    height: 150px;
    margin: 0 auto;
    padding: 0px 0px;
}

/* Logo */

#logo {
    float: left;
    width: 310px;
    height: 150px;
    padding: 0px 0px 0px 40px;
}

#logo h1 {
    padding: 50px 0px 0px 0px;
    letter-spacing: -2px;
    font-size: 3.6em;
    text-transform: uppercase;
}

#logo h1 a {
    text-decoration: none;
    color: #FFFFFF;
}

/* Menu */

#menu {
    float: right;
    width: 810px;
    height: 80px;
    padding: 20px 40px 0px 0px;
}

#menu ul {
    float: right;
    margin: 0;
    padding: 40px 0px 0px 0px;
    list-style: none;
    line-height: normal;
}

#menu li {
    float: left;
}

#menu a {
    display: block;
    margin-left: 1px;
    padding: 7px 20px 7px 20px;
    letter-spacing: 1px;
    text-decoration: none;
    text-align: center;
    text-transform: uppercase;
    font-family: 'Oswald', sans-serif;
    font-size: 16px;
    font-weight: 300;
    color: #FFFFFF;
}

#menu a:hover, #menu .current_page_item a {
    text-decoration: none;
    background: #1B5902;
    border-radius: 5px;
    color: #FFFFFF;
}

/* Page */

#page-wrapper {
    overflow: hidden;
}

#page {
    overflow: hidden;
    width: 1120px;
    margin: 0px auto;
    padding: 50px 40px;
    color: #8F8F8F;
    border-top: 1px solid #A1A1A1;
}

/** CONTENT */

#wide-content {
}

#wide-content h2 {
    padding: 0px 0px 20px 0px;
    letter-spacing: -1px;
    font-size: 36px;
    color: #222222;
}

/** CONTENT */

#content {
    float: right;
    width: 800px;
    padding: 0px 0px 0px 0px;
}

#content h2 {
    padding: 0px 0px 20px 0px;
    letter-spacing: -1px;
    font-size: 36px;
    color: #222222;
}

#content .subtitle {
    padding: 0px 0px 30px 0px;
    text-transform: uppercase;
    font-family: 'Oswald', sans-serif;
    font-size: 18px;
    color: #81AFC5;
}

/** SIDEBAR */

#sidebar {
    float: left;
    width: 290px;
    padding: 0px 0px 20px 0px;
}

#sidebar h2 {
    padding: 0px 0px 30px 0px;
    letter-spacing: -1px;
    font-size: 2em;
}

/* Footer */

#footer {
    margin: 0 auto;
    padding: 50px 0px 50px 0px;
}

#footer p {
    text-align: center;
    font-size: 12px;
    color: #757575;
}

#footer a {
    color: #757575;
}

/* Three Column Footer Content */

#footer-bg {
    overflow: hidden;
    padding: 40px 0px;
    background:#E5E0DD url(images/main-bsg.png) repeat;
}

#footer-content {
    color: #67C8E3;
}

#footer-content h2 {
    margin: 0px;
    padding: 0px 0px 30px 0px;
    letter-spacing: -1px;
    text-shadow: 1px 1px 0px #FFFFFF;
    text-transform: uppercase;
    font-size: 20px;
    font-weight: 200;
    color: #93776E;
}

#footer-content a {
}

#footer-content a:hover {
    text-decoration: underline;
}

#column1 {
    float: left;
    width: 280px;
    margin-right: 30px;
}

#column1 p {
    line-height: 1;
}

#column2 {
    float: left;
    width: 280px;
    margin-right: 30px;
}

#column3 {
    float: left;
    width: 280px;
}

#column4 {
    float: right;
    width: 260px;
}

/* Banner Style */

#banner-wrapper {
}

#banner {
    overflow: hidden;
    width: 1160px;
    margin: 20px auto 50px auto;
}

#banner .img-border {
    height: 350px;
    border: 20px solid #FFFFFF;
}

/* Button Style */

.button-style {
    display: inline-block;
    margin-top: 30px;
    padding: 7px 30px;
    background: #36332E;
    border-radius: 5px;
}

.button-style a {
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'Oswald', sans-serif;
    font-weight: 300;
    font-size: 16px;
    color: #FFFFFF;
}

/* List Style 1 */

ul.style1 {
    margin: 0px;
    padding: 0px;
    list-style: none;
}

ul.style1 li {
    padding: 25px 0px 15px 0px;
    border-top: 1px solid #A1A1A1;
}

ul.style1 a {
    text-decoration: none;
    color: #FFFFFF;
}

ul.style1 a:hover {
    text-decoration: underline;
    color: #6B6B6B;
}

ul.style1 .first {
    padding-top: 0px;
    border-top: none;
}

/** LIST STYLE 3 */

ul.style3 {
    margin: 0px;
    padding: 0px;
    list-style: none;
}

ul.style3 li {
    padding: 10px 0px 10px 0px;
    border-top: 1px solid #A1A1A1;
}

ul.style3 a {
    text-decoration: none;
    color: #949494;
}

ul.style3 a:hover {
    text-decoration: underline;
}

ul.style3 .first {
    padding-top: 0px;
    border-top: none;
    box-shadow: none;
}

ul.style3 .date {
    width: 87px;
    background-color: #36332E;
    margin-top: 20px;
    height: 24px;
    line-height: 24px;
    text-align: center;
    font-size: 12px;
    color: #FFFFFF;
}

ul.style3 .first .date
{
    margin-top: 0px;
}

/* Recent News */

#recent-news {
    overflow: hidden;
    width: 1120px;
    margin: 0px auto;
    padding: 50px 40px;
    background: #36332E;
    color: #8C8C8C;
}

#recent-news h2 {
    padding: 0px 0px 20px 0px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 2.5em;
    color: #EDEDED;
}

#recent-news .date {
    padding: 0px 0px 10px 0px;
    font-weight: bold;
    font-style: normal;
    color: #E3E3E3;
}

#recent-news p {
    font-style: italic;
}

#recent-news a {
    font-style: normal;
    color: #B8B8B8;
}

#recent-news #rbox1 {
    float: left;
    width: 250px;
    margin-right: 40px;
}

#recent-news #rbox2 {
    float: left;
    width: 250px;
    margin-right: 40px;
}

#recent-news #rbox3 {
    float: left;
    width: 250px;
}

#recent-news #rbox4 {
    float: right;
    width: 250px;
}

/* Button Style */

.button-style1 {
    margin-top: 30px;
}

.button-style1 a {
    padding: 10px 25px;
    background: #EBB462;
    border-radius: 5px;
    text-decoration: none;
    text-shadow: 1px 1px 0px #FCE3BB;
    color: #36332E !important;
}

.menu{
      font: 13px/27px Arial,sans-serif;

      color:#3366CC;
      height:20px;

}
.menu a:hover{
    background-color:#e4ebf8;
    color:black;

}
.menu a {
    text-decoration: none;
    padding: 6px 8px 7px;
    color:white;
    outline: lime;
}
.menu ul{
    list-style: none;
    margin:0;
    padding:0 0 0 10px;
}
.menu ul li{
    padding:0;
    float:left;    
}
.menu ul li ul li{
    padding:0;
    float:none;
    margin: 0 0 0 0px;
    width:60%;
}
.menu ul li ul{
    position: absolute;
    display:none;
    padding: 0px ;
}
.active ul{
    display:block !important; 
}
.active a{
    background-color: black;
    border: 1px solid #C3D1EC;
    border-bottom: 0;
    box-shadow: 0 -1px 5px #CCCCCC;
    display: block;
    height: 15px;
    padding: 0 8px 0 8px;
    position: relative;
    z-index: 1;
    color:#3366CC;

}
.active a:hover{
    background-color:white;
}
.active ul a:hover{
    background-color:#e4ebf8;
}

.active ul a{
    border: 0 !important;
    box-shadow: 0 0 0 #CCCCCC;
    border:0;
    width: 100%;
}
.arrow {
    border-color: white transparent transparent;
    border-style: solid dashed dashed;
    margin-left: 5px;
    position: relative;
    top: 10px;
} 
```

这是网页的快照

![在此处输入图像描述](../Images/c56979d28e030de4c130b32d439f6462.png)

当我点击交易菜单时，中间有空格，然后显示买入和卖出。我想删除空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:56:55.387

**需要 CSS**

```
#menu ul li ul { padding-top:5px; } 
```

在`css`您的`style code`.

# go - 奇怪的golang包导入问题

> ID：15405973
> 
> 赞同：7
> 
> 时间：2013-03-14T09:54:45.793
> 
> 标签：go

这是目录树：

```
+/project  
  +---/bin  
  +---/pkg  
  +---/src  
    +---/client_test  
      +---client_test.go  
    +---main.go 
```

在 main.go 中：

```
package main
import ("client_test")
func main() {
  client_test.Send()
} 
```

在 client_test.go 中：

```
package client_test
func Send() {
} 
```

错误：

```
src/main.go|8| imported and not used: "client_test"
src/main.go|32| undefined: client_test 
```

我读过[如何在 golang 中使用自定义包？](https://stackoverflow.com/questions/15049903/how-to-use-custom-packages-in-golang)我想我和这个人有同样的解决方案，但我只是不知道如何解决这个问题。请帮忙。

去环境：

```
GOARCH="amd64"  
GOBIN="/usr/local/go/bin"  
GOCHAR="6"  
GOEXE=""  
GOGCCFLAGS="-g -O2 -fPIC -m64 -pthread -fno-common"  
GOHOSTARCH="amd64"  
GOHOSTOS="darwin"  
GOOS="darwin"  
GOPATH="/Users/staff/projects/Minigame_Server" (that's exactly my working directory)  
GOROOT="/usr/local/go"  
GOTOOLDIR="/usr/local/go/pkg/tool/darwin_amd64"  
CGO_ENABLED="1" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T12:38:19.503

> [命令去，测试包。](http://golang.org/cmd/go/#hdr-Test_packages)
> 
> ...名称与文件模式“*_test.go”匹配的文件...可以包含测试函数、基准函数和示例函数。

不要使用保留名称。例如，`client_test`用`clienttest`整个替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:54:29.900

好的，最后我发现我的环境有什么问题：

由于我使用的是 OS X，所以我使用 .pkg 文件来安装 go，而 GOROOT 是“/usr/local/go”

然后我读了另一个关于 GO 安装的假教程，它说我必须在我的 ~/.profile 中定义 GOROOT，所以我在 ~/.profile 中添加了“GOROOT="/usr/local/go"，然后一切都出错了。

仔细阅读官方文档后发现：

> Go 二进制发行版假定它们将安装在 /usr/local/go（或 Windows 下的 c:\Go）中，但也可以将它们安装在不同的位置。如果这样做，则需要在使用 Go 工具时将 GOROOT 环境变量设置为该目录。
> 
> 例如，如果您将 Go 安装到您的主目录，您应该将以下命令添加到 $HOME/.profile：
> 
> 导出 GOROOT=$HOME/go 导出 PATH=$PATH:$GOROOT/bin

但问题是，它没有提到如果你在.pkg 安装后在~/.profile 中添加GOROOT 会发生什么，它也没有说你不能这样做。

这是我的 ~/.profile 现在的样子（正在纠正）：

导出 GOPATH=$HOME/projects/ 导出 PATH=$PATH:$GOPATH/bin

顺便说一句：您不需要在工作区下创建 /project 文件夹。根据[http://golang.org/doc/code.html#tmp_2](http://golang.org/doc/code.html#tmp_2)，它也没有说你必须：

> 工作区目录树现在如下所示：

```
bin/
    hello              # command executable
pkg/
    linux_amd64/ 
        example/
            newmath.a  # package object
src/
    example/
        hello/
            hello.go   # command source
        newmath/
            sqrt.go    # package source 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:21:09.423

如果你的 $GOPATH 是“/Users/staff/projects/Minigame_Server”，那么你的“项目”绝对路径应该是“/Users/staff/projects/Minigame_Server/src/project”。

您的导入应该是`import "project/src/client_test"`.

或者，如果您在“项目”下有与 Go 相关的子目录“/pkg”和“/bin”，您似乎想要做的事情，请将您的 GOPATH 设置为“/Users/staff/projects/Minigame_Server/project”

然后你就可以了`import "client_test"`。基本思想是 Go 会将导入字符串附加到 $GOPATH/src/。

（有点模棱两可，我同意）文档在这里： http: [//golang.org/doc/code.html#tmp_2](http://golang.org/doc/code.html#tmp_2)。我的猜测是您已经阅读了它，这就是您创建 /pkg、/bin 和 /src 子目录的原因，但关键是 GOPATH 应该在哪里，然后 Go 在查找导入时自动添加的隐式子级别（自动添加/src），然后按原样导入字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-18T11:46:54.093

您可以使用以下代码在主包中导入包，它将在主包中导入（“fmt”“./client_test”）

# ruby - 工厂方法的语义，关于验证消息

> ID：15405974
> 
> 赞同：0
> 
> 时间：2013-03-14T09:54:47.203
> 
> 标签：ruby, activerecord

假设我有一个用户模型，我想用类方法生成一个用户。

我曾经做过这样的事情：

```
def self.generate_user(params)
  user = user.new
  # Some work on the user model
  user.save ? user : nil
end 
```

有了这个，我可以知道用户是否很容易创建，但是，我无法访问它的错误消息。

所以我正在考虑这两个选项：

## 选项一，退货状态和型号

```
def self.generate_user(params)
  user = user.new
  # Some work on the user model
  return user.save, user
end 
```

然后我必须以这种方式得到结果：`ret, user = User.generate_user(params)`

## 选项2，仅返回用户，检查`valid?`

```
def self.generate_user(params)
  user = user.new
  # Some work on the user model
  user
end 
```

然后 ：

```
user = User.generate_user(params)
if user.valid?
  # Do stuff
end 
```

你更喜欢哪个选项？你还有别的吗？也许使用异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:11:44.283

例外，绝对。更像 Ruby，如果使用[create!，ActiveRecord 会抛出异常！](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-create-21)它失败了：

```
def self.generate_user(params)
  User.create! do |u|
    # Do some stuf wth user
  end
end

begin
  user = User.generate_user(params)
rescue ActiveRecord::RecordInvalid => e
  # Find errors here : e.record.errors
  # Something on rescue
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:05:35.937

我会尝试：

```
def self.generate_user(params)
  user = User.create do |u|
    # Do some stuff with user
  end
  user
end 
```

进而：

```
user = User.generate_user(params)
if user.valid? # or user.persisted?
  # alright
end 
```

# c++ - 文件未使用 c 中的 remove() 函数删除

> ID：15405980
> 
> 赞同：2
> 
> 时间：2013-03-14T09:54:53.013
> 
> 标签：c++, c, visual-c++-2005

我已经编写了一个 c++ 库来`remove`使用`Visual C++ 2005`. 但它不会删除文件。我该如何解决这个问题？

示例代码如下：

```
FILE *fp;
char temp[10000];
char *filename;

GetCurrentDirectoryA(10000,temp);
strcat(temp,"\\temp.png");

filename = (char*)malloc(sizeof(char)*strlen(temp));
memset(filename,'\0',strlen(temp));
strcpy(filename,temp);

if(png == NULL)
    return LS_ARGUMENT_NULL;

fp = fopen(filename,"wb");
fwrite(png,sizeof(unsigned char),pngLength,fp);
fclose(fp);

result = remove(filename); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:04:11.463

1) char * strcat ( char * 目标, const char * 源); 连接字符串 将源字符串的副本附加到目标字符串。目标中的终止空字符被源的第一个字符覆盖，并且在目标中两者连接形成的新字符串的末尾包含一个空字符。

所以你不需要附加 NULL \0 字符

2）要删除工作，你需要有文件权限。核实。

3) 使用 strerror(errno) 检查错误并打印错误

如果 fopen 成功，您的代码似乎也不会检查

```
if( remove( "myfile.txt" ) != 0 )
perror( "Error deleting file" );
 else
puts( "File successfully deleted" );
return 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:58:20.080

忽略其他部分，我认为您应该再分配一个字符：

```
filename = (char*)malloc(strlen(temp)+1); // I added a +1 for last '\0'
// memset(filename,'\0',strlen(temp));    // You dont need this
strcpy(filename, temp); 
```

如果您需要从当前目录中删除文件，只需名称就足够了：

```
remove("temp.png"); 
```

摆脱那些`GetCurrentDirectoryA`和相关的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:16:02.577

*仅*使用`GetCurrentDirectory`. _

这是一个花哨的跨平台版本：

```
#include <iostream>
#include <fstream>

int main()
{
    char file[1024];
    char buffer[2048];

    // Get file name.
    std::cout << "Enter name of file to create: ";
    std::cin >> file;

    // Append .txt to file.
    sprintf(file, "%s.txt", file);

    // Create it.
    std::cout << "* Creating file: " << file << std::endl;
    std::ofstream out(file);

    // Write in it.
    std::cout << "Write in the file: (CTRL+Z to stop)" << std::endl;
    while (std::cin >> buffer)
    {
        out << buffer << std::endl;
    }

    // Close it.
    out.close();

    // Delete it.
    std::cout << "* Deleting file: " << file << std::endl;
    if (remove(file) != 0) std::cerr << "* Couldn't remove the file. Does the program have the required permissions?" << std::endl;
} 
```

# c# - 根据特定的父 ID LINQ 获取 XML 项

> ID：15405983
> 
> 赞同：1
> 
> 时间：2013-03-14T09:54:56.340
> 
> 标签：c#, asp.net, xml, linq, linq-to-xml

我有以下 XML

```
<Group>
   <Id>1</Id>
   <GroupName>Fruit Juices</GroupName>
   <PersonId>46</PersonId>
   <DateCreated>0001-01-01T00:00:00</DateCreated>
   <DateModified>0001-01-01T00:00:00</DateModified>
   <Products ProductId="24">
     <ProductName>Grapes</ProductName>
     <CategoryId>2</CategoryId>
     <CategoryName></CategoryName>
     <SubCategoryId>4</SubCategoryId>
     <SubCategoryName>Armbands</SubCategoryName>
   </Products>
 </Group>
 <Group>
   <Id>2</Id>
   <GroupName>Wrist Watches</GroupName>
   <PersonId>49</PersonId>
   <DateCreated>0001-01-01T00:00:00</DateCreated>
   <DateModified>0001-01-01T00:00:00</DateModified>
   <Products ProductId="20">
     <ProductName>Hard Drives</ProductName>
     <CategoryId>2</CategoryId>
     <CategoryName></CategoryName>
     <SubCategoryId>4</SubCategoryId>
     <SubCategoryName>Armbands</SubCategoryName>
   </Products>
   <Products ProductId="24">
     <ProductName>Grapes</ProductName>
     <CategoryId>2</CategoryId>
     <CategoryName></CategoryName>
     <SubCategoryId>4</SubCategoryId>
     <SubCategoryName>Armbands</SubCategoryName>
   </Products>
   <Products ProductId="34">
     <ProductName>Oranges</ProductName>
     <CategoryId>2</CategoryId>
     <CategoryName></CategoryName>
     <SubCategoryId>4</SubCategoryId>
     <SubCategoryName>Armbands</SubCategoryName>
   </Products>
   <Products ProductId="50">
     <ProductName>Printers</ProductName>
     <CategoryId>2</CategoryId>
     <CategoryName></CategoryName>
     <SubCategoryId>4</SubCategoryId>
     <SubCategoryName>Armbands</SubCategoryName>
   </Products>
   <Products ProductId="52">
     <ProductName>Printers</ProductName>
     <CategoryId>2</CategoryId>
     <CategoryName></CategoryName>
     <SubCategoryId>4</SubCategoryId>
     <SubCategoryName>Armbands</SubCategoryName>
   </Products>
 </Group> 
```

现在我的目标是获取特定组 ID 的所有产品。

我尝试了以下方法，但它不起作用：-

```
 foreach (XElement xe in xdoc.Descendants("Group"))
        {
            Product product = new Product();

            Group group = new Group();
            group.Id = Convert.ToInt32(xe.Element("Id").Value);
            group.GroupName = xe.Element("GroupName").Value;
            group.PersonId = Convert.ToInt32(xe.Element("PersonId").Value);
            group.DateCreated = Convert.ToDateTime(xe.Element("DateCreated").Value);
            group.DateModified = Convert.ToDateTime(xe.Element("DateModified").Value);

            var products = xdoc.Descendants("Groups")
                .Where(node => (string)node.Attribute("Id") == group.Id.ToString())
                .GroupBy(x => x.Value)
                .Select(x => new { Name = x.Key, Count = x.Count() })
                .ToList();

            GroupList.Add(group);
        } 
```

我怎样才能让它根据 GroupID 实际获取产品？

感谢您的帮助和时间

****** *** ** *** ** *** ** *** ** *** ******更新****** ** *** ** *** ** *** ** *** ** *** ** *******

 **```
 foreach (XElement xe in xdoc.Descendants("Group"))
        {
            var group = from g in xdoc.Descendants("Group")
                        where (int)g.Element("Id") == 1 // filtering groups here
                        select new Group
                        {
                            Id = (int)g.Element("Id"),
                            GroupName = (string)g.Element("GroupName"),
                            PersonId = (int)g.Element("PersonId"),
                            DateCreated = (DateTime)g.Element("DateCreated"),
                            DateModified = (DateTime)g.Element("DateModified"),
                            Products = g.Elements("Products")
                                .Select(p => new Product
                                {
                                    Id = (int)p.Attribute("ProductId"),
                                    ProductName = (string)p.Element("ProductName")
                                }).ToList()
                        };

            foreach (var g in group)
            {
                GroupList.Add(g);
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:07:28.480

使用将节点转换为`int`、`string`或`DateTime`代替转换节点值：

```
from g in xdoc.Descendants("Group")
where (int)g.Element("Id") == id // filtering groups here
select new Group {
   Id = (int)g.Element("Id"),
   GroupName = (string)g.Element("GroupName"),
   PersonId = (int)g.Element("PersonId"),
   DateCreated = (DateTime)g.Element("DateCreated"),
   DateModified = (DateTime)g.Element("DateModified"),
   Products = g.Elements("Products")
               .Select(p => new Product {                   
                   ProductId = (int)p.Attribute("ProductId"),
                   ProductName = (string)p.Element("ProductName"),
                   CategoryName = (string)p.Element("CategoryName"),
                   SubCategoryId = (int)p.Element("SubCategoryId"),
                   SubCategoryName = (string)p.Element("SubCategoryName")
               }).ToList()
} 
```

此外，我认为最好将 xml 中的所有产品与每个产品的`<Products>`元素组合在一起。`<Product>`**

# wpf - 如何通过 generic.xaml 中定义的键访问资源

> ID：15405990
> 
> 赞同：4
> 
> 时间：2013-03-14T09:55:29.863
> 
> 标签：wpf, xaml, resourcedictionary

当前我正在使用`Generic.xaml`并在其中定义了一个自定义类实例。如下所示：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/TextPicker;component/Themes/FiltersTreeView.xaml" />
    </ResourceDictionary.MergedDictionaries>

</ResourceDictionary> 
```

在`FiltersTreeView.xaml`我定义了我定制的 UI 类的一个实例。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:utils="clr-namespace:TextPicker.Utils"
                    xmlns:cmd="clr-namespace:TextPicker.Commands"
                    xmlns:cc="clr-namespace:TextPicker.CustomControls"
                    xmlns:dm="clr-namespace:TextPicker.Models">

    <cc:ColorPiePopup x:Key="colorPiePopup"/>
    ....
<ResourceDictionary/> 
```

现在，我尝试使用`Application.Current.FindResource`它来查找它，但它总是返回`null`。

那么我怎样才能得到这个资源定义`Generic.xaml`呢？我的意思是使用代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-29T08:53:43.890

[这个问题在这里](https://stackoverflow.com/a/50961498/5525302)得到回答：

> 您无法直接在应用程序中访问 generic.xaml 中的资源。[...] 因此，如果您想使用 generic.xaml 中的资源，您应该将其添加为您的应用程序中的通用 ResourceDictionary

# iphone - 逻辑 - 需要找到重叠的数字范围

> ID：15405991
> 
> 赞同：1
> 
> 时间：2013-03-14T09:55:31.953
> 
> 标签：iphone, ios, cocoa-touch, cocoa, logic

假设我有一个带有“startNo”整数和“endNo”整数的“数字”对象数组。

数组中可以有多个“数字”，我想获得一个带有修改对象的新数组，该数组只有没有重叠的范围。

例如：如果数组有：

```
number
( startNo:1 endNo:3)
( startNo:1 endNo:7)
( startNo:2 endNo:9)
( startNo:15 endNo:18)
( startNo:50 endNo:60)
( startNo:55 endNo:65) 
```

我想得到一个这样的数组：

```
number
( startNo:1 endNo:9)
( startNo:15 endNo:18)
( startNo:50 endNo:65) 
```

我一直在尝试使用 structs、fors 和所有东西来尝试不同的方法，但我得到的只是多层次的混淆。

如果有帮助，我正在开发 Objective-C 平台

**补充：startPage 可以是大数，endPage 可以是小数。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:02:12.897

这是一个经典的算法课程问题..

按第一个（最小）值的降序对数组进行排序。跟踪两个变量：开始段，结束段。

每轮选择一个数组并检查开始和结束数字，并确定它是否在段中。

这样可以找到重叠

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:41:23.577

假设您的班级是 MyNumbers 并且是这样的：

```
@interface MyNumbers : NSObject
@property NSInteger startNumber;
@property NSInteger endNumber;

- (id)initWithStartNumber:(NSInteger)start withEnd:(NSInteger)end;

@end 
```

以及合并方式：

```
- (void)yourMethod{

    MyNumbers *obj1=[[MyNumbers alloc]initWithStartNumber:1 withEnd:3];
    MyNumbers *obj2=[[MyNumbers alloc]initWithStartNumber:1 withEnd:7];
    MyNumbers *obj3=[[MyNumbers alloc]initWithStartNumber:2 withEnd:9];
    MyNumbers *obj4=[[MyNumbers alloc]initWithStartNumber:15 withEnd:18];
    MyNumbers *obj5=[[MyNumbers alloc]initWithStartNumber:50 withEnd:60];
    MyNumbers *obj6=[[MyNumbers alloc]initWithStartNumber:55 withEnd:65];

    NSArray *array=@[obj1,obj2,obj3,obj4,obj5,obj6];
    NSMutableArray *mergedArray=[NSMutableArray arrayWithObject:array[0]];

    for (NSInteger index=1; index<array.count; index++) {
        MyNumbers *currentNumber=array[index];
        MyNumbers *previousNumber=array[index-1];

        if (currentNumber.startNumber<=previousNumber.endNumber) {
            previousNumber.endNumber=currentNumber.endNumber;
            [mergedArray replaceObjectAtIndex:mergedArray.count-1 withObject:previousNumber];
        }
        else{
            [mergedArray addObject:currentNumber];
        }
    }

    for(MyNumbers *element in mergedArray){
        NSLog(@"startNo:%d endNo:%d",element.startNumber, element.endNumber);
    } 
} 
```

输出：

```
2013-03-14 17:14:05.040 继承[34234:303] startNo:1 endNo:9
2013-03-14 17:14:05.041 继承[34234:303] startNo:15 endNo:18
2013-03-14 17:14:05.041 继承[34234:303] startNo:50 endNo:65

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:12:30.243

解决此问题的简单方法：

1.  创建一个新的空数组（我们将其命名为：tmp）。
2.  将第一个数组的**startNo**和**endNo 放入**tmp。
3.  取第二个数组的**startNo**和**endNo**。然后，决定它们是否与 tmp 中的重叠。*（如果它们不重叠，请将它们都插入到 tmp 的末尾。）*
4.  对每个数组重复这些步骤。
5.  tmp 现在将保存所有范围，没有重叠。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T10:12:34.760

只是快速的想法未经测试：

1.获取最小的起始编号say sn和对应的end no say en。

2.如果 start no 小于 sn 则继续检查下一个对象，然后忽略 start no 。如果结束编号大于 en 则将新的结束编号存储到您的 en 中。

3.这会给你你的对象。

4.如果起始编号大于en，则创建一个新对象添加到数组中。

这应该可以。如果您还有其他问题，请告诉我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T14:06:23.850

//它是用C#语言编写的。但是概念可以用任何编程语言来实现。

```
public class Range
{
    public int startNo { get; set; }
    public int stopNo { get; set; }

    public Range(int start, int stop)
    {
        startNo = start;
        stopNo = stop;
    }
}

        public void GetUniqueRanges()
    {
        var rangeList = new List<Range>();
        rangeList.Add(new Range(7,4));
        rangeList.Add(new Range(3, 15));
        rangeList.Add(new Range(54, 35));
        rangeList.Add(new Range(45, 60));
        rangeList.Add(new Range(60,75));
        rangeList.Add(new Range(76,100));
        rangeList.Add(new Range(6,10));
        rangeList.Add(new Range(16,24));
        rangeList.Add(new Range(19,34));

        var sorted = new List<Range>();
        foreach (var range in rangeList)
        {
            var item = new Range(Math.Min(range.startNo, range.stopNo), Math.Max(range.startNo, range.stopNo));
            sorted.Add(item);
        }
        var result = new List<Range>();
        sorted = sorted.OrderBy(x => x.startNo).ToList();
        var counter = sorted.Count;
        for (var i = 0; i < counter; )
        {
            var item = new Range (sorted[i].startNo, sorted[i].stopNo );
            var j = i + 1;
            for (; j < counter; j++)
            {
                if (sorted[j].startNo <= item.stopNo)
                {
                    item.stopNo =Math.Max(item.stopNo, sorted[j].stopNo);
                }
                else
                {

                    break;
                }
            }
            i = j;
            result.Add(item);
        }
    } 
```

# python - python的字符串解析不一致

> ID：15405994
> 
> 赞同：0
> 
> 时间：2013-03-14T09:55:41.400
> 
> 标签：python, regex

我正在尝试在 python 中解析字符串。我已经发布了几个关于堆栈溢出的问题，我基本上是在尝试结合所有不同的可能方式的功能来解析我正在使用的字符串。

这是一个单独工作的代码片段，可以很好地解析以下两种字符串格式。

```
from __future__ import generators
from pprint import pprint
s2="<one><two><three> an.attribute ::"
s1="< one > < two > < three > here's one attribute < six : 10.3 > < seven : 8.5 > <   eight :   90.1 > < nine : 8.7 >"
def parse(s):
    for t in s.split('<'):
        for u in t.strip().split('>',1):
            if u.strip(): yield u.strip()
pprint(list(parse(s1)))
pprint(list(parse(s2))) 
```

这是我得到的输出。它是我需要的格式，每个属性都存储在不同的索引位置。

```
['one',
 'two',
 'three',
 "here's one attribute",
 'six : 10.3',
 'seven : 8.5',
 'eight : 90.1',
 'nine : 8.7']
['one', 'two', 'three', 'an.attribute ::'] 
```

完成之后，我尝试将相同的代码合并到一个可以解析四种字符串格式的函数中，但由于某种原因，它似乎在这里不起作用，我不知道为什么。

这是完整的合并代码。

```
from __future__ import generators
import re
import string
from pprint import pprint
temp=[]
y=[]
s2="< one > < two > < three > an.attribute ::"
s1="< one > < two > < three > here's an attribute < four : 6.5 > < five : 7.5 > < six : 8.5 > < seven : 9.5 >"
t2="< one > < two > < three > < four : 220.0 > < five : 6.5 > < six : 7.5 > < seven : 8.5 > < eight : 9.5 > < nine : 6 -  7 >"
t3="One : two :  three : four  Value  : five  Value  : six  Value : seven  Value :  eight  Value :"
def parse(s):
    c=s.count('<')
    print c
    if c==9:
        res = re.findall('< (.*?) >', s)
        return res
    elif (c==7|c==3):
        temp=parsing(s)
        pprint(list(temp))
        #pprint(list(parsing(s)))
    else: 
        res=s.split(' : ')
        res = [item.strip() for item in s.split(':')]
        return res
def parsing(s):
    for t in s.split(' < '):
        for u in t.strip().split('>',1):
            if u.strip(): yield u.strip()
    pprint(list((s))) 
```

现在，当我编译代码并调用时，`parse(s1)`我得到以下输出：

```
7
["< one > < two > < three > here's an attribute < four",
 '6.5 > < five',
 '7.5 > < six',
 '8.5 > < seven', 
```

同样，在调用`parse(s2)`时，我得到：

```
3
['< one > < two > < three > an.attribute', '', '']
   '9.5 >'] 
```

为什么在解析字符串时拆分字符串不一致？我在两个地方都使用相同的代码。

有人可以帮我弄清楚为什么会这样吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:01:16.607

您正在使用二进制`|`按位或运算符，而应该使用`or`布尔运算符：

```
elif (c==7|c==3): 
```

应该

```
elif c==7 or c==3: 
```

也许：

```
elif c in (3, 7): 
```

启动速度更快。

因为`|`运算符的优先级与运算符*不同*`or`，所以第一条语句被解释为`(c == (7 | c) == 3)`进行`7 | c`按位逻辑运算，返回一个*永远不会*等于`c`and的结果`3`，因此**总是**返回`False`：

```
>>> c = 7
>>> (c==7|c==3)
False
>>> c = 3
>>> (c==7|c==3)
False
>>> c==7 or c==3
True 
```

# dynamics-crm-2011 - 如何查看 CRM 2011 中的联系人总数？

> ID：15405997
> 
> 赞同：6
> 
> 时间：2013-03-14T09:55:47.213
> 
> 标签：dynamics-crm-2011

现在使用的方法是检查从 DB 读取的数组的大小。只要对其进行其他操作，这样的背负就可以了。但是，我想知道是否有更直接的方法来查询现有联系人的数量。

我正在用 C# 编写代码，但 JS 也需要了解一下，以防万一。

```
QueryExpression query = new QueryExpression
{
  EntityName = "contact",
  ColumnSet = new ColumnSet(true),
};
EntityCollection response = organizationService.RetrieveMultiple(query);
IEnumerable<Entity> entities = response.Entities; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T12:31:05.607

以下是您的选择：

1.  使用 QueryExpression/Linq to CRM - 这些方法虽然不支持服务器端计数。所以这基本上就是你现在正在做的事情，将每条记录返回给客户端，然后计数。负面因素如下：
    1.  你得到的页面大小，而不是数据库中的真实数字。
    2.  页面大小限制为 5000 条记录，因此您必须实现自己的逻辑才能继续重新查询，直到返回所有记录
    3.  效率极低。必须返回来自所有实体的所有数据。
2.  oData - 从技术上讲，您可以使用 odata，但您将遇到与 QueryExpressions/Linq 相同的问题，因为它也不支持服务器端计数。
3.  使用[Fetch XML](http://msdn.microsoft.com/en-us/library/gg309565.aspx) - 这是在 CRM 中获取记录总数的唯一受支持的方法。它还具有执行返回所需信息所需的最少工作量的优势。

以下是检索 Count 所需的 Fetch XML 和 C# 代码：

```
var xml = @"
<fetch distinct='false' mapping='logical' aggregate='true'> 
    <entity name='contact'> 
       <attribute name='contactid' alias='contact_count' aggregate='count'/> 
    </entity> 
</fetch>";

using (var service = GetOrganizationServiceProxy())
{
  var resultEntity = service.RetrieveMultiple(
  new FetchExpression(xml)).Entities.First();
  var count = resultEntity
    .GetAttributeValue<Microsoft.Xrm.Sdk.AliasedValue>("contact_count").Value;
} 
```

## 注意 50K 限制！

可以聚合的实体限制为 50,000 个。 [看到这个问题](https://stackoverflow.com/questions/10131097/aggregate-query-limit-exceeded)

如果此限制太低，您可以按照 SO 问题的建议进行操作，并捕获异常并返回 50,000。如果您需要精确计数，最简单的做法可能是添加一个过滤器以将名称限制为以单个字母开头，然后执行 26 个不同的查询，每个字母一个。假设名称的分布完全一致（事实并非如此），您应该能够获得最多 1,300,000 个。

* * *

Microsoft 站点明确声明只有 Fetch XML 支持分组/聚合功能 --> [http://msdn.microsoft.com/en-us/library/gg334607.aspx](http://msdn.microsoft.com/en-us/library/gg334607.aspx)

## 对于 CRM/CDS V9+

现在有一个简单的请求来获取总数：[https ://docs.microsoft.com/en-us/dotnet/api/microsoft.crm.sdk.messages.retrievetotalrecordcountrequest?view=dynamics-general-ce-9](https://docs.microsoft.com/en-us/dotnet/api/microsoft.crm.sdk.messages.retrievetotalrecordcountrequest?view=dynamics-general-ce-9)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T10:00:29.013

您可以在*response上使用**TotalRecordCount*。

 *```
Console.WriteLine("Total number of records: " + response.TotalRecordCount); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:38:36.317

您可以使用计数聚合执行 FetchXML。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T10:02:26.213

我假设您正在从数据库中执行某种选择语句并查看返回的 DataTable 对象以查看它有多少行。

尝试做一个

```
SELECT COUNT(*) FROM [TableName] WHERE [condition] 
```

这将返回一个与行数相同的数字。*

# android - Spinner 未在 android 中显示所选项目

> ID：15405999
> 
> 赞同：5
> 
> 时间：2013-03-14T09:55:51.457
> 
> 标签：android

我在我的应用程序中使用 Spinner，从另一个屏幕恢复时，它显示其中的第一个项目，但旧项目被选中。我正在使用以下代码，请任何人帮助我。

```
Spinner= (Spinner) findViewById(R.id.spinner1);
dataAdapter=null;
dataAdapter = new ArrayAdapter<String>(this,android.
     R.layout.simple_spinner_item, country);

dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
Spinner.setAdapter(dataAdapter);
if (myPrefs.getBoolean("isChecked", false)) {
    Spinner.setSelection(myPrefs.getInt("PreviouslyselectedID", 0));
}
else
{
    country.add(0, "Please Select");
} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-29T01:51:46.873

将项目动态添加到适配器时，如果不调用：

```
adapter.notifyDataSetChanged(); 
```

选择添加的项目不会显示在 UI 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-17T05:59:23.973

我遇到同样的片段问题可能对你有帮助，请尝试将此行添加到适配器集线下方，Spinner.setSaveEnabled(false);