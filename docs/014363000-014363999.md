# StackOverflow 问答 14363000-14363999

# highcharts - 使用“列”类型和多个日期时间序列时，highcharts 的奇怪行为

> ID：14363015
> 
> 赞同：1
> 
> 时间：2013-01-16T16:25:44.107
> 
> 标签：highcharts

我有一个无法理解 highcharts 行为的案例。

在绘制原始数据系列时，我得到一个带有奇怪 x 轴（错误的开始/结束刻度）和缩放行为的图表。如果我完成该系列，以便每个数据点都存在于两个系列中（即将第一个系列的日期添加到具有 0 值的第二个系列），一切都会恢复正常。

如果您查看此[示例 jsFiddle](http://jsfiddle.net/Regisc/MNJBK/1/)，则开始日期为 12 月 2 日。2012 年午夜，结束日期为 1 月 31 日。然而，在 2013 年午夜，上图显示了一个在 2 月结束的 x 轴。如果您尝试缩放，刻度文本会出现乱码。在底部图表上，绘制了相同的数据，但这次使用“数据填充”，x 轴很好，缩放按预期工作。

所以我的问题是，有谁知道问题是什么，数据需要填充吗？

* * *

代码：

```
$(function () {
  var chart1, chart2;
  $(document).ready(function () {
    var opts = {
      chart: {
        "alignTicks": true,
          "animation": true,
          "backgroundColor": "#FFFFFF",
          "borderColor": "#4572A7",
          "borderRadius": 5,
          "borderWidth": 0,
          "ignoreHiddenSeries": true,
          "inverted": false,
          "plotBorderColor": "#C0C0C0",
          "plotBorderWidth": 0,
          "plotShadow": false,
          "reflow": true,
          "resetZoomButton": {
          "position": {
            "verticalAlign": "bottom",
              "y": 30.0
          },
            "relativeTo": "plot"
        },
          "selectionMarkerFill": "rgba(69,114,167,0.25)",
          "shadow": false,
          "showAxes": false,
          "spacingBottom": 15,
          "spacingLeft": 10,
          "spacingRight": 10,
          "spacingTop": 10,
          "type": "column",
          "zoomType": "x"
      },
      credits: {
        "enabled": false
      },
      legend: {
        "align": "center",
          "borderColor": "#909090",
          "borderRadius": 5,
          "borderWidth": 1,
          "enabled": true,
          "floating": false,
          "itemMarginBottom": 0,
          "itemMarginTop": 0,
          "layout": "horizontal",
          "lineHeight": 16,
          "margin": 15,
          "padding": 8,
          "reversed": false,
          "rtl": false,
          "shadow": false,
          "symbolPadding": 5,
          "symbolWidth": 30,
          "useHtml": false,
          "verticalAlign": "bottom",
          "x": 0,
          "y": 0
      },
      plotOptions: {
        "column": {
          "allowPointSelect": false,
            "animation": true,
            "colorByPoint": false,
            "enableMouseTracking": true,
            "grouping": true,
            "selected": false,
            "shadow": true,
            "showCheckbox": false,
            "showInLegend": true,
            "stacking": "normal",
            "stickyTracking": true,
            "visible": true
        }
      },
      title: {
        "align": "center",
          "floating": false,
          "useHTML": false,
          "verticalAlign": "top",
          "x": 0.0,
          "y": 15.0
      },
      xAxis: {
        "type": "datetime"
      },
      yAxis: {
        "title": {
          "text": "Number"
        }
      },
      tooltip: {
        "animation": true,
          "enabled": true,
          "shadow": true,
          "shared": false,
          "useHTML": false,
          "xDateFormat": "%d/%m/%Y"
      }
    };
    chart1 = new Highcharts.Chart($.extend(true, {
      chart: {
        "renderTo": "aU8Q_4"
      },
      title: { text: 'bad' },
      series: [{
        "data": [
          [
          1354489199000,
          0],
          [
          1357686000000,
          1],
          [
          1357858800000,
          1],
          [
          1358118000000,
          1],
          [
          1359673199000,
          0]
        ],
          "name": "Emit."
      }, {
        "data": [
          [
          1354489199000,
          0],
          [
          1357686000000,
          1],
          [
          1359673199000,
          0]
        ],
          "name": "Recpt."
      }]
    }, opts));
    chart2 = new Highcharts.Chart($.extend(true, opts, {
      chart: {
        "renderTo": "aU8Q_5"
      },
      title: { text: 'good' },
      series: [{
        "data": [
          [
          1354489199000,
          0],
          [
          1357686000000,
          1],
          [
          1357858800000,
          1],
          [
          1358118000000,
          1],
          [
          1359673199000,
          0]
        ],
          "name": "Emit."
      }, {
        "data": [
          [
          1354489199000,
          0],
          [
          1357686000000,
          1],
          [
          1357858800000,
          0],
          [
          1358118000000,
          0],
          [
          1359673199000,
          0]
        ],
          "name": "Recpt."
      }]
    }, opts));
  });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T05:41:31.890

添加`pointRange`，修复行为：

```
plotOptions: {
    series: {
      pointRange: 24 * 3600 * 1000 // one day
    },
// ... 
```

（[来源](https://github.com/highslide-software/highcharts.com/issues/987)）

# python - 在python中的一组字符串中查找超字符串

> ID：14363016
> 
> 赞同：5
> 
> 时间：2013-01-16T16:25:47.490
> 
> 标签：python, string

给定一组包含数字的字符串，我怎样才能找到那些是超集的字符串。例如，如果出现字符串“139 24”和“139 277 24”，那么我想保留“139 277 24”，因为可以在其中找到“139 24”。这些数字也可以在字符串中以任何顺序出现。

```
 '24'
              '277'
           '277 24'
           '139 24'
       '139 277 24'
          '139 277'
              '139'
           '136 24'
       '136 277 24'
          '136 277'
              '136'
       '136 139 24'
   '136 139 277 24'
      '136 139 277'
          '136 139'
              '246' 
```

上述数据的结果如下所示。

```
 '136 139 277 24'
              '246' 
```

编辑：我正在拆分每个字符串并将单个数字放入一个集合中，然后通过从整个列表创建的集合进行比较。我可以使用这种方法找到解决方案，但我认为应该有其他一些优雅的方法来执行相同的操作。

我正在尝试以下代码，并觉得它变得不必要地复杂。

```
#First create a set of tuples
allSeqsTuple = set()
for seq in allSeqs: #allSeqs store the sequences described above
    x = seq.split()
    allSeqsTuple.add(tuple(x))

#For each 'allSeqs', find if all the items in that seq that is in 'allSeqsTuple'. 
for line in allSeqs:
    x = set(line.split())
    result = findContainment(x, allSeqsTuple)
    ......
    ......

def findContainment(x, allSeqsTuple):
    contained = False
    for y in allSeqsTuple:
        cntnd = bool(x-set(y))
        if (cntnd):
            contained = True
            continue
        else:
            break
    return contained 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T17:10:07.653

让我们列出这个问题的主要参与者：

*   字符串，例如`'24 139 277'`
*   集合——“超弦”的集合
*   超集包含——`<=`集合运算符
*   将字符串拆分为一组数字字符串：例如`set(['24', '139', '277'])`

我们得到了一个字符串列表，但我们真正想要的——更有用的——是一个集合列表：

```
In [20]: strings = [frozenset(s.split()) for s in strings]    
In [21]: strings
Out[21]: 
[frozenset(['24']),
 frozenset(['277']),
 ...
 frozenset(['136', '139']),
 frozenset(['246'])] 
```

freezesets 的原因很快就会显现出来。我将在下面解释原因。我们想要集合的原因是因为它有一个方便的超集比较运算符：

```
In [22]: frozenset(['136']) <= frozenset(['136', '139', '24'])
Out[22]: True

In [23]: frozenset(['136']) <= frozenset(['24', '277'])
Out[23]: False 
```

这正是我们需要确定一个字符串是否是另一个字符串的超字符串。

所以，基本上，我们想要：

*   从一个空的集合开始`superstrings = set()`
*   遍历字符串：`for s in strings`.
*   当我们检查每一项`s`时，如果它们不是已经存在的项目的子集 `strings`，我们将添加新的 。`superstrings``superstrings`
*   对于每一个`s`，遍历一组`superstrings`: `for sup in superstrings`。

    *   检查是否`s <= sup`——即如果`s`是 的子集`sup`，退出循环，因为`s`它小于某个已知的超字符串。

    *   检查是否`sup <= s`- 即是否 `s`是`superstrings`. 在这种情况下，请删除其中的项目`superstrings`并将其替换为`s`.

技术说明：

*   因为我们要从中删除项目`superstrings`，所以我们也不能迭代`superstrings`自身。所以，相反，迭代一个副本：

    ```
    for sup in superstrings.copy(): 
    ```

*   最后，我们想`superstrings`成为一组集合。但是集合中的项目必须是可散列的，而集合本身是不可散列的。但是frozensets是，所以有可能有一组frozensets。这就是为什么我们转换`strings`成一个列表 `frozensets`。

* * *

```
strings = [
    '24', '277', '277 24', '139 24', '139 277 24', '139 277', '139', '136 24',
    '136 277 24', '136 277', '136', '136 139 24', '136 139 277 24', '136 139 277',
    '136 139', '246']

def find_supersets(strings):
    superstrings = set()
    set_to_string = dict(zip([frozenset(s.split()) for s in strings], strings))
    for s in set_to_string.keys():
        for sup in superstrings.copy():
            if s <= sup:
                # print('{s!r} <= {sup!r}'.format(s = s, sup = sup))
                break
            elif sup < s:
                # print('{sup!r} <= {s!r}'.format(s = s, sup = sup))
                superstrings.remove(sup)
        else:
            superstrings.add(s)
    return [set_to_string[sup] for sup in superstrings]

print(find_supersets(strings)) 
```

产量

```
['136 139 277 24', '246'] 
```

* * *

事实证明这比预排序字符串更快：

```
def using_sorted(strings):
    stsets = sorted(
        (frozenset(s.split()) for s in strings), key=len, reverse=True)
    superstrings = set()
    for stset in stsets:
        if not any(stset.issubset(s) for s in superstrings):
            superstrings.add(stset)
    return superstrings

In [29]: timeit find_supersets(strings)
100000 loops, best of 3: 18.3 us per loop
In [25]: timeit using_sorted(strings)
10000 loops, best of 3: 24.9 us per loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:53:55.313

假设您的字符串在一个名为“字符串”的列表中：

```
stset_string = {frozenset(s.split()):s for s in strings}
stsets = sorted(stset_string, key=len, reverse=True)
superstsets = set()
for stset in stsets:
    if not any(stset.issubset(s) for s in superstsets):
        superstsets.add(stset)
superstrings = [stset_string[s] for s in superstsets] 
```

这将创建一个字典，将字符串中的标记集映射到原始字符串，确定哪些标记集对应于您的超字符串，然后查找原始字符串。请注意，如果有多个不同的字符串产生相同的标记，则任意字符串将被视为定义超字符串；您可能想要修改它以获得例如所有可能的超字符串集。

# ios - iOS：检查值？NSDictionary、NSArray、NSString

> ID：14363017
> 
> 赞同：0
> 
> 时间：2013-01-16T16:25:53.577
> 
> 标签：ios, nsarray, nsdictionary, didselectrowatindexpath

* * *

**跳过以下**

这些值是 TVC didSelectRowAtIndexPath 方法的前三行，当我连续选择一个项目时，它会给我各种异常。

我如何：

一种。检查以下字典、数组和 selectedCategory 是否具有值。

湾。如果事实证明他们不这样做，确保他们这样做吗？

```
NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
NSArray *array = [dictionary objectForKey:@"News"];
NSString *selectedCategory = [array objectAtIndex:indexPath.row]; 
```

* * *

**到这里 ：**

UIView tableView 的异常：numberOfRowsInSection:]：无法识别的选择器发送到实例 0x7193a60

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:59:28.563

似乎 NSPlaceholderString 的 initWithString 方法得到了一个 nil 作为参数。所以，要弄清楚这究竟是什么时候发生的，最好添加一个异常断点。看看[这里](http://developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:01:11.647

要检查它们是否具有值，您可以检查...

```
[dictionary count];

[array count];

[selectedCategory length]; 
```

或者您可以检查...

```
dictionary == nil;

array == nil;

[selectedCategory isEqualToString:@""];

selectedCategory == nil; 
```

有很多方法。不完全确定你在问什么，但你可以检查这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:02:29.030

这是一个简单的调整。通常有比嵌套所有这些数据集合更好的方法来存储数据，但这是一个简单的替代方法，可以替代您已经拥有的应该阻止崩溃的方法。

```
// First check your listOfItems
NSDictionary *dictionary = NULL;
if (listOfItems.count > indexPath.section) {
    dictionary = [listOfItems objectAtIndex:indexPath.section];
}

// Next check your dictionary isn't null.
NSArray *array = NULL;
if (dictionary) {
    array = [dictionary objectForKey:@"News"];
}

// Next check your array and make sure your array has values.
NSString *selectedCategory = NULL;
if (array.count > indexPath.row) {
   selectedCategory = [array objectAtIndex:indexPath.row];
}

// Finally do your stuff
if (selectedCategory) {
    // Do your stuff
} else {
    // Something went wrong along the way and you don't have a selectedCategory string.
} 
```

# gwt - GWT maven 编译的默认优化级别是多少？

> ID：14363018
> 
> 赞同：1
> 
> 时间：2013-01-16T16:25:55.930
> 
> 标签：gwt, maven

根据[Maven GWT 插件文档](http://mojo.codehaus.org/gwt-maven-plugin/compile-mojo.html#optimizationLevel)，默认优化级别是 -1。目前尚不清楚这对应于哪个优化级别。那么，-1 是否意味着代码在 0 到 9 之间的某个级别上进行了优化？还是完全是别的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:33:16.247

除了常规的编译器级别的东西之外，GWT 从级别 1 到级别 9 有 9 种不同的优化技巧。但是，我们可以通过将其设置为 0 来退出这些优化。不建议这样做，如代码中所述。

您可能可以从 ArgHandlerOptimize.java 中的 GWT 源代码中获取更多信息

```
 @Override
  public String getPurpose() {
    return "Sets the optimization level used by the compiler.  0=none 9=maximum.";
  } 
```

来自 ArgHandlerOptimize.java 的评论部分

```
 * Set the optimization level from the command line.  For now, level 1 is the same
 * as draft compile, and level 9 is the same as the default (maximium optimization).
 * 
 * TODO(zundel): In theory, a level 0 should be possible, where all optimizers 
 * are eliminated for the fastest possible compile.  In practice, code generation 
 * depends on some optimizers being run. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:32:08.790

这意味着它使用 GWT 编译器的默认值。我相信默认值是9。

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions)和

# c++ - 对象作为 C++ 中的默认值

> ID：14363020
> 
> 赞同：4
> 
> 时间：2013-01-16T16:25:56.430
> 
> 标签：c++

有没有办法在 C++ 函数中为参数设置默认对象？我试过

```
void func(SomeClass param = new SomeClass(4)); 
```

它奏效了。但是，我应该如何知道最终是否必须释放分配的内存？我想在没有指针的情况下做同样的事情，只是堆栈上的一个对象。那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T16:28:39.357

```
void func(SomeClass param = new SomeClass(4)); 
```

这是行不通的，因为 new 返回一个指针

```
void func(SomeClass param = SomeClass(4)); 
```

应该可以工作并且不需要释放对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:28:12.443

您几乎拥有它，但您不需要`new`关键字。

```
void func(SomeClass param = SomeClass(4)); 
```

与使用相比，此方法的优势`new`在于它将在调用结束时自动删除，因此不需要内存管理。

另一种方法是使用共享指针。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-16T16:36:42.000

您可以使用重载：

```
void func(const SomeClass&) const;
void func() const {
  SomeClass* param = new SomeClass(4);
  func(param);
  delete param;
} 
```

# javascript - 检测 openlayers 地图上的长按

> ID：14363027
> 
> 赞同：3
> 
> 时间：2013-01-16T16:26:34.010
> 
> 标签：javascript, jquery, openlayers

我有一张地图，目前捕捉到双击事件并触发一些代码来在地图上设置一个航点，它工作得很好。

我真正想做的是检测平板电脑/移动用户的长按，因为我认为双击方法（在我的 ipad 上运行良好）不如使用鼠标指针精确。我认为我必须以某种方式与 onmousedown/onmouseup 相关联并设置一个计时器/阈值，但我正在努力让这样的事情发挥作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-22T21:00:58.450

老问题 - 但由于我对此有点挣扎，我想我会为通过谷歌浏览的人分享答案。

```
var multiTouchEvent = 0;
var timeoutId;
var waitFor = 1000;
$(document).delegate("#openLayersMapDiv", "pagecreate", function() {
     map.events.register('touchstart', map, function(e) {
         multiTouchEvent = e.touches.length;
         timeoutId = setTimeout(function() {
              if (multiTouchEvent > 1) {
                   clearTimeout(timeoutId);
              }
              else {
                   alert("longpress!!!");
              }
         }, waitFor);
     }, true);

     map.events.register('touchmove', map, function(e) {
         clearTimeout(timeoutId);
     });
     map.events.register('touchend', map, function(e) {
         clearTimeout(timeoutId);
     });
} 
```

上面的警报将在 1000 毫秒后触发。将 waitFor 值更改为您希望用户按下地图的时间。

说明：本质上，touchstart 事件会在等待 1000 毫秒后触发一个事件（通过 setTimeOut 函数）。但是，如果用户抬起手指（从而触发 touchend 事件），setTimeOut 函数将被清除。如果用户移动手指（从而触发 touchmove 事件）或缩放级别更改（由 multiTouchEvent 变量监控），也会发生这种情况。

希望这可以帮助某人。

在安卓 4+ 上测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:17:23.360

试试这个代码：

```
$(document).ready(function () {
    var longpress = false;

    $("button").on('click', function () {
        (longpress) ? alert("Long Press") : alert("Short Press");
    });

    var startTime, endTime;
    $("button").on('mousedown', function () {
        startTime = new Date().getTime();
    });

    $("button").on('mouseup', function () {
        endTime = new Date().getTime();
        longpress = (endTime - startTime < 500) ? false : true;
    });
}); 
```

[演示](http://jsfiddle.net/arcm111/8HggV/)

# windows - 命令行转录工具

> ID：14363030
> 
> 赞同：0
> 
> 时间：2013-01-16T16:26:40.760
> 
> 标签：windows, speech-recognition, transcription

我目前正在使用 Dragon 在 IVR 监控系统上执行电话转录。基本上我用dragon监视一个文件夹，将wav文件放在那里，然后等待另一个文件夹中的转录输出。由于龙崩溃，这种解决方案最近引起了相当大的麻烦。

我想要一个简单的可执行文件按需执行转录（从而消除永久运行的软件的需要），例如：

cmd -> 转录 in.wav > out.txt

该软件应该具有可用的意大利语词典和声学模型，或者至少应该易于训练以支持意大利语。我需要在没有办公套件的情况下在 windowx xp 嵌入式（一个相当旧的版本！）上运行，所以 Windows 语音引擎不是一个选项。

任何 lib/dll 以及它在 vbscript 或 python 中使用的代码片段也可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:52:42.477

您可以为此使用[pocketsphinx](http://cmusphinx.sourceforge.net)：

```
 pocketsphinx_continuous -hmm hmm_dir -lm lm_dir -dict dict_dir -infile file.wav 
```

pocketsphinx 可以用意大利语训练，并且可以在 Windows 上使用。

# android - 为什么要使用 FragmentTransaction.commit() 呢？

> ID：14363033
> 
> 赞同：2
> 
> 时间：2013-01-16T16:26:49.507
> 
> 标签：android, android-fragments

实际上是否有`FragmentTransaction.commit()`一个不应该使用的用例`FragmentTransaction.commitAllowStateLoss()`？第一个版本几乎总是让应用程序崩溃，以防发生诸如来电之类的意外事情，所以我宁愿忍受一些状态丢失而不是崩溃的应用程序，不是吗？

# spring-mvc - 在 Spring MVC Controller 上绑定错误并放入 BindingResult

> ID：14363039
> 
> 赞同：2
> 
> 时间：2013-01-16T16:27:01.950
> 
> 标签：spring-mvc, controller, illegalargumentexception

当我尝试在课堂上进行“绑定”时，它会引发异常，但是如何在表单上显示错误？

控制器：

```
@InitBinder
public final void binder(WebDataBinder binder) {        
    binder.registerCustomEditor(Telefone.class, new PropertyEditorSupport(){

        @Override
        public void setAsText(String value){
            if(null != value){
                try{
                    setValue(Telefone.fromString(value));
                } catch (IllegalArgumentException e) {
                    // what to do here ??
                }
            }
        }

    }); 
```

[电话](https://github.com/insula/opes/blob/master/src/main/java/br/com/insula/opes/Telefone.java)：

```
public static Telefone fromString(String s) {
    checkNotNull(s);
    String digits = s.replaceAll("\\D", "");
    checkArgument(digits.matches("1\\d{2}|1\\d{4}|0300\\d{8}|0800\\d{7,8}|\\d{8,13}"));
    return new Telefone(digits);
} 
```

[chekArgument 来自 Google Preconditions](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Preconditions.html#checkArgument%28boolean%29)

当电话无效时，会抛出 IllegalArgumentException .. 但是如何将其放入 BindingResult

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T17:01:09.943

我假设您使用的是 Java 5，因此您不能使用 @Valid（没有 JSR303）。如果是这种情况，那么唯一的选择就是使用 BindingResult。

这是您可以执行的操作：

```
@Controller
public class MyController {

    @RequestMapping(method = RequestMethod.POST, value = "myPage.html")
    public void myHandler(MyForm myForm, BindingResult result, Model model) {
        result.reject("field1", "error message 1");
    }
} 
```

我的jsp：

```
<form:form commandName="myForm" method="post">
<label>Field 1 : </label>
<form:input path="field1" />
<form:errors path="field1" />

<input type="submit" value="Post" />
</form:form> 
```

要将错误与特定表单相关联，您可以使用：

```
result.rejectValue("field1", "messageCode", "Default error message"); 
```

此外，BindingResult.reject() 将错误消息与整个表单相关联。所以选择哪一个适合你。希望有帮助！

# python - Python内部更改函数输入名称

> ID：14363044
> 
> 赞同：1
> 
> 时间：2013-01-16T16:27:16.633
> 
> 标签：python

我需要创建一个函数，它可以：

1.  检查输入参数并获取输入数量及其值
2.  创建一个循环，并在每个输入名称后添加字符串 '_in'
3.  使新输入全局化
4.  用旧值分配新输入

我尝试使用 inspect.getargspec() 但似乎应该在函数之外调用它。那么有什么建议吗？

这是伪代码： 定义这个函数：

```
def set_global(a1, a2, a3, .... an):
    #the number of arguments is not fixed and we need to detect that
    for old_input in total input:
         new_input_name=str(old_input.name)+'_in'
         global new_input_name 
         new_input_name = old_input.value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:29:57.450

```
def foo(*args, **kwargs):
    print "number of fixed args: %d" % len(args)
    print "number of keyword args: %d" % len(kwargs)
    print "keyword argument names: %s" % str(kwargs.keys()) 
```

我们可以应用它`globals()`来做你想做的事：

```
def set_globals(**kwargs):
    for argname in kwargs:
        globals()['%s_in' % argname] = kwargs[argname] 
```

因此，使用 Python 交互式解释器中的上述函数：

```
>>> set_globals(foo='x', bar='y')
>>> foo_in
'x'
>>> bar_in
'y' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:30:20.150

我真的认为您正在寻找该`globals`功能。

```
a = 1
globals()['a'] = 2
print a  #2
globals()['a_in'] = 2
print a_in  #2 
```

你可以把它放在一个函数中：

```
def do_something_with_globals(**kwargs):
    for k,v in kwargs.items():
        globals()[k+'_in'] = v 
```

可以这样称呼：

```
a = 1
b = 2
do_something_with_globals(a=a,b=b)
print a_in
print b_in 
```

但是，老实说，我真的不认为这是一个好主意......

# jquery - 改变回调函数

> ID：14363045
> 
> 赞同：0
> 
> 时间：2013-01-16T16:27:17.930
> 
> 标签：jquery

```
$('input.plan-select').change(function() {
  // alert('Handler for .change() called.');
  $(".subscription", this).toggleClass('selected');
}); 
```

小提琴：http: [//jsfiddle.net/XPVVp/](http://jsfiddle.net/XPVVp/)

由于某种原因，它不会切换课程，我不确定它为什么不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:29:25.097

那是因为`.subscription`select 不是`input`您的代码编写方式的元素的子元素。相反，该`.subscription`元素是父元素，因此您需要使用正确的 jQuery 操作来找到正确的父元素，如下所示：

```
$('input.plan-select').change(function() {
  // alert('Handler for .change() called.');
  $(this).closest(".subscription").toggleClass('selected');
}); 
```

`.closest()`将查找父链，直到找到与选择器匹配的第一个父链。

在这里工作演示：http: [//jsfiddle.net/jfriend00/krTER/](http://jsfiddle.net/jfriend00/krTER/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:29:18.577

因为`input`它在`.subscription`div 元素内，反之亦然。所以`.subscription`下面没有元素`this`......没有什么适用`toggleClass()`的。你到底想达到什么目的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:30:36.000

```
$('input.plan-select').change(function() {
  // alert('Handler for .change() called.');
  $([".subscription", this]).toggleClass('selected');
}); 
```

似乎在工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:34:35.867

我真的不知道你想用那个选择器做什么......你可以使用“this”选择器来获取单选按钮，然后使用 .parent() 指令上升一级。

```
$('input.plan-select').change(function() {
    // alert('Handler for .change() called.');
    $(this).parent().toggleClass('selected');
}); 
```

你也可以使用

```
$('.subscription').toggleClass('selected'); 
```

如果您只有所述类的一个元素。

# c# - 使用 iTextSharp 为 PDF 中的图像添加透明度/不透明度

> ID：14363046
> 
> 赞同：2
> 
> 时间：2013-01-16T16:27:18.533
> 
> 标签：c#, image, pdf, itextsharp, opacity

我需要设置图像的不透明度并使用 iTextSharp 将其添加到 PDF 中。我查看了[http://itextpdf.com/examples/](http://itextpdf.com/examples/)但找不到任何这样做的工作示例。

任何人都可以帮助我或指导我找到正确的资源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:44:19.453

```
//create new graphics state and assign opacity    
PdfGState graphicsState = new PdfGState();
graphicsState.FillOpacity = 0.2F;  // (or whatever)
//set graphics state to pdfcontentbyte    
pdfData.SetGState(graphicsState); 
```

# wordpress - 如何在 Wordpress Post 中使用该代码？

> ID：14363047
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:27:18.363
> 
> 标签：wordpress

我想在 Wordpress Post 中使用该代码。

当我在没有 Wordpress 的情况下使用该代码时，它可以工作。我的意思是我创建了一个 php 文件并将此代码粘贴到其中。它有效。但它在 Wordpress 帖子中不起作用。

我应该怎么办？

请帮助我。提前致谢。

```
<html>
<head>
<title>test</title>
<style type="text/css" media="screen">
textarea { resize: none; }
.hide{ display: none; }
#popupoverlay { background-color: #000000; bottom: 0px; display: none; left: 0px; opacity: .75; position: fixed; right: 0px; top: 0px; }
#popupwindow { background-color: #FAFAD2; border: solid 2px #cccccc; display: none; height: 150px; left: 50%; margin: -75px 0 0 -35px; position: absolute; left: 350px; top: 80px; width: 800px; height: 630px }
#popupwindow a { background-color: #ff3333; display: block; font-size: 9px; height: 20px; left: 50%; margin: -309px 0 0 370px; position: absolute; text-align: center; text-decoration: none; top: 50%; width: 25px; }
#popupwindow h1 { background-color: #cccccc; display: block; margin: 0; padding: 3px 5px; text-align: center; }
#popupwindow p { font-size: 9pt; margin: 0px; padding: 5px; }
body{font: 9pt Verdana;list-style:none;margin:0;padding:-10}
td{font: 9pt Verdana;}
th{font: 9pt Verdana; text-align: left; font-weight: bold;}
</style>
<SCRIPT>
function checkEmail(myForm) {
if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(myForm.email.value)){
return (true)
}
alert("Please check your email.")
return (false)
}
//  End -->
</script>
<script>
function SayiKontrol(e) {
    olay = document.all ? window.event : e;
    tus = document.all ? olay.keyCode : olay.which;
    if(tus<48||tus>57) {
        if(document.all) { olay.returnValue = false; } else { olay.preventDefault(); }
    }
}

function HarfKontrol(e) {
    olay = document.all ? window.event : e;
    tus = document.all ? olay.keyCode : olay.which;
    if(tus>=48&&tus<=57) {
        if(document.all) { olay.returnValue = false; } else { olay.preventDefault(); }
    }
}
</script>
    <script type="text/javascript">
    function OpenPopup() {
        document.getElementById('PopupOverlay').style.display = 'block';
        document.getElementById('PopupWindow').style.display = 'block';
    }
    function ClosePopup() {
        document.getElementById('PopupOverlay').style.display = 'none';
        document.getElementById('PopupWindow').style.display = 'none';
    }
    </script>
    <script language="JavaScript" type="text/javascript">
/*<![CDATA[*/
function HostingSpec(rad){
 var rads=document.getElementsByName(rad.name);
 var all=['first_giz','first_giz_1','second_giz']
 var ary=[
  ['first_giz','first_giz_1'],
  ['second_giz']
 ]
 for (var z0=0;z0<all.length;z0++){
  document.getElementById(all[z0]).style.display='none';
 }
 for (var z1a,z1=0;z1<rads.length;z1++){
  if (rads[z1].checked&&ary[z1]){
   for (z1a=0;z1a<ary[z1].length;z1a++){
    document.getElementById(ary[z1][z1a]).style.display='block';
   }
   return;
  }
 }

}
/*]]>*/
</script>
</head>
<body>
<form name="myform" action="submit.php" method="POST" onSubmit="return checkEmail(this)">
       <a href="javascript: void(0)" onClick="OpenPopup();"><img border="0" src="submit.jpg"></a>
    </p>

    <div id="PopupOverlay"></div>
    <div id="PopupWindow">
<h1>Test</h1>
<table border="0" width="100%" cellspacing="1">
<tr>
<th width="333">Name</th>
<th width="249">Surname</th>
<th width="258">No<th width="182">Email</th>
</tr>
            <tr><td width="333"><input type="text" name="name" size="45"></td>
                <td width="249">
                <!--webbot bot="Validation" s-display-name="name" s-data-type="Integer" s-number-separators="x" i-maximum-length="12" --><input type="text" name="name2" size="10" maxlength="11"></td>
                <td width="258"> 
                &nbsp;<input type="text" name="name3" size="10" maxlength="11"></td>
                <td width="182"><input type="text" name="email" size="20"></td>
        </tr>
            <tr>
                <td width="333">&nbsp;</td>
                <td width="249">&nbsp;</td>
                <td colspan="2">&nbsp;</td>
            </tr>
<tr><th width="333">Address</th>
    <th width="249">area 1</th>
<th colspan="2">area 2</th>
            </tr>
            <tr>
                <td width="333">
        <textarea rows="4" name="address" cols="39"></textarea></td>
                <td width="249">

        <input type="text" name="area1" size="20"><br>
        <b>area 3</b><br>
        <input type="text" name="area2" size="20"></td>
                <td colspan="2">

        <input type="text" name="area3" size="20"><br>
        <b>area 4</b><br>
        <input type="text" name="area4" size="20" maxlength="4"></td>
            </tr>
            <tr>
<th width="333">&nbsp;</th>
<th width="249">area 5</th>
<th colspan="2">area 6</th>
            </tr>
            <tr>
                <td width="333"> 

        &nbsp;</td>
                <td width="249"> 

        <input type="text" name="area5" size="20">
        <font color="#666666">(description)<br>
&nbsp;</font></td>
                <td colspan="2">

<input type="text" name="area6" size="20"><font color="#666666">(description)</font></td>
            </tr>
            <tr>
<th width="333">additional information</th>
<th width="249">&nbsp;</th>
<td colspan="2">&nbsp;</td>
            </tr>
            <tr>
                <td colspan="4">

                  <textarea name="message" cols="93" rows="5"></textarea></td>
            </tr>
            <tr>
                <td width="333" align="center">
                <p align="left">div 1 
<INPUT type="radio" name="hosting_package" id="hosting_package_1" value="1" class="validate[required] radio" onClick="HostingSpec(this);" /></td>
                <td width="249" align="center">
                <p align="left">div 2
              <input type="radio" name="hosting_package" id="hosting_package_2" value="2" class="validate[required] radio" onClick="HostingSpec(this);" />
                <br>
                </td>
<td colspan="2"><br>
</td>
            </tr>
            <tr id="first_giz" style="display:none;">
<th width="333">Company</th>
<th width="249">
&nbsp;</th>
                <td colspan="2">&nbsp;</td>
            </tr>
            <tr id="first_giz_1" style="display:none;">
<td width="333"><select size="1" name="company">
        <option>test 1</option>
        <option>test 2</option>
        </select></td>
<td width="249"><br>
&nbsp;</td>
                <td colspan="2">&nbsp;</td>
            </tr>
            <tr id="second_giz" style="display:none;">
                <td width="333">
<b>company 2<br>
<br>
</b>
<select size="1" name="company2">
<option>test 1</option>
<option>test 2</option>
<option>test 3</option>
        </select><br>
<br>
<br>
<br>
<br>
<br>
&nbsp;</td>
                <td width="249">
<b>company 3<br>
</b>
<select size="1" name="company3">
        <option>test 1</option>
        <option>test 2</option>
        <option>test 3</option>
        </select><b><br>
<br>
area 7<br>
        </b><input type="text" name="test1" size="10"><b><br>
    area 8<br>
        </b>

        <input type="text" name="test2" size="10"><br>
&nbsp;</td>
                <td colspan="2">
&nbsp;</td>
            </tr></table>
<table border="0" width="1151" cellspacing="0" cellpadding="0">
    <tr>
        <td width="1151">

    <tr>
        <td width="1151">

<blockquote>
    <blockquote>
        <blockquote>
            <blockquote>
                <blockquote>
                    <blockquote>
                        <blockquote>
                            <blockquote>
                                <blockquote>
                                    <input type="submit" name="button" value="Submit" style="height: 50px; width: 200px; font-size:14pt; font-weight:bold; float:right"></blockquote>
                            </blockquote>
                        </blockquote>
                    </blockquote>
                </blockquote>
            </blockquote>
        </blockquote>
    </blockquote>
</blockquote>
        </td>
    </tr>
</table>
</form></p>
        <a href="javascript: void(0)" onClick="ClosePopup();">
        <font color="#FFFFFF" style="font-size: 9pt">x</font></a><span style="font-size: 9pt">
        </span>
        </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:40:56.307

试试这个链接[wordpress 简单表单插件并在帖子中显示短代码](http://www.mananpatel.in/wordpress-simple-form-plugin-and-display-in-post-with-shortcode.html)

这样，您可以使用短代码将您的 php 代码直接包含到您的帖子中。我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:43:24.767

你介意解释一下原因吗？如果您想在博客文章中显示整个网页，最好使用[iframe](http://www.w3schools.com/tags/tag_iframe.asp)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:25:38.007

如果我正确理解您的问题，您的意图是在您的 wordpress 帖子中包含 HTML、PHP、CSS、Javascript 或其他一些代码。有很多插件可以做到这一点。但是，由于主题不同，某些插件可能无法按预期工作。

我最近遇到了一个名为[Crayon Syntax Highlighter](http://wordpress.org/extend/plugins/crayon-syntax-highlighter/installation/)的插件，它可以与我的多个博客一起使用。[按照此处](http://ak.net84.net/)指示的说明安装它并尝试。

# ocaml - OCaml 中的 List.fold_left

> ID：14363050
> 
> 赞同：1
> 
> 时间：2013-01-16T16:27:38.183
> 
> 标签：ocaml

我写了一个函数，它添加了给定列表中的所有元素：

`let rec add = function []->0 | h::t->h+add(t);;`

现在我想编写相同的函数，但使用`List.fold_left`，但我尝试了几次更改但仍然有错误。首先我尝试了这个：

`let rec add = function []->0 | h::t-> add List.fold_left((fun h t-> h+t) h t);;`

但是我有一个错误，我注意到 List.fold_left 返回一个 int 值，所以递归是不必要的。所以我改变了：

`let add = function []->0 | h::t -> List.fold_left ( fun h t-> h+t h t);;`

但我仍然收到关于错误类型的错误： `Error: This expression has type int -> 'a -> 'b but an expression was expected of type 'a` 但我不知道如何解决这个问题，有人可以解释我`List.fold_left`在这个例子中如何使用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T16:47:34.117

fold_left 对列表进行操作，*就像您的函数一样*，通过应用函数并以特定方式累积结果。它会为您处理和抽象递归。它处理列表的结构，因此您可以处理如何以特定方式组合列表的元素。因此，您需要找出要应用于 fold_left 的高阶函数，该函数以相同的方式对列表进行操作。

例如，这里有两种获取列表最大元素的方法，...

```
let rec max_list smallest lst = match lst with 
    | []   -> smallest
    | h::t -> max_list (max smallest h) t

let max_list smallest lst =
    List.fold_left (fun acc x -> max acc x) smallest lst 
```

您会注意到功能某些方面的相似之处；基本情况（最小）以及如何组合元素（使用函数 max）。您应该在函数中看到相同的相似之处。

回顾你的最终实现，

```
let add = function | []->0
                   | h::t -> List.fold_left (fun h t-> h+t h t) 
```

这里的问题是你有一个放错位置的括号......

```
let add = function | []->0
                   | h::t -> List.fold_left (fun h t-> h+t) h t 
```

但这可以简化，类似于我上面的示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T09:36:56.210

添加整数列表的一种方法：

```
# List.fold_left (+) 0 [1; 3; 5; 7];;
- : int = 16 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-09T20:00:37.797

如果使用 Core.Std，则需要命名参数，例如，

```
List.fold_left ~f:(+) ~init:0 [1; 3; 5; 7];;
- : int = 16 
```

# windows-8 - 如果处于试用模式，在 Windows 商店应用中显示广告的最佳做法是什么？

> ID：14363052
> 
> 赞同：1
> 
> 时间：2013-01-16T16:27:52.490
> 
> 标签：windows-8, windows-store-apps, windows-store

我创建了一个名为 enableAds 的 div。此 div 包含两个额外的广告控件。我只想在应用程序处于试用模式时显示这些广告。如果用户购买了该应用程序，我想删除广告。

这是正确的方法吗？理想情况下，我想给用户一个无限期的试用模式，这样如果他们不想付费，他们就可以继续使用它和广告。应用内购买似乎有点复杂。

另一种选择是启动两个应用程序： 1\. 免费广告。2\. 无广告付费

有人可以分享这方面的最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:34:47.643

您可能需要查看 MSDN 上的[试用应用和应用内购买示例](http://code.msdn.microsoft.com/windowsapps/Licensing-API-Sample-19712f1a)。第一个场景向您展示如何检查应用程序的收据以查看应用程序是否处于试用模式或是否已购买，这将允许您适当地显示/隐藏广告。该示例并未具体涵盖广告，但它应该是您的一个很好的起点。

# java - 如何在 Lotus Domino 数据库上使用 openWithFailover()？

> ID：14363055
> 
> 赞同：3
> 
> 时间：2013-01-16T16:28:00.637
> 
> 标签：java, lotus-notes, lotus-domino, iiop

我有一些使用 Java Domino API（使用 NCSO.jar）通过 IIOP 与 Domino 数据库连接的 Java 代码。现在的一个新要求是，如果正在连接的服务器是集群的，那么应该可以利用这一点并在当前连接的服务器出现故障时切换到集群中的故障转移服务器。

不幸的是，Domino Java API 完全是晦涩难懂的，在本地和通过 IIOP 远程使用 API 之间存在细微差别，很少有真正清晰的解释和奇怪的差异，具体取决于您为方法提供的参数。

我设法从这里收集到的一些信息...... [openWithFailoverMethod 是否有效？](http://www.poweroftheschwartz.com/web/blog/poweroftheschwartz.nsf/d6plinks/RSCZ-8HWT27)

我还查看了 IBM 信息中心上的文档。

我尝试的第一件事是：

```
Session session = NotesFactory.createSession(host + ":" + port, user, password);
Database db = session.getDatabase(null, databaseName, false);
db.openWithFailover(host, databaseName); 
```

的第一个参数`getDatabase`，服务器名称，对于 IIOP 操作显然必须为 null。当它已经在会话中时，如何有必要在`openWithFailover`方法中再次指定服务器名称，我对此感到相当困惑，但我想您可以使用会话连接到集群，然后在 open 方法中指定主服务器。但是，为什么您需要提供两次数据库名称并不十分清楚。最后一个参数表明如果无法访问数据库，则不应创建数据库（省略它，默认为 true；多么美妙）。

不幸的是，这在我脸上吐出了异常`NotesException: This database object is already open as E:\Lotus\Domino\data\mail-in\EDITEST.nsf`。它发生在`openWithFailover`方法上。

显然，第一次调用`getDatabase`已经打开它，并且没有关闭方法或仅获取对象而不实际打开它的选项。该类`Database`是一个接口，因此没有获取此类对象的静态方法或实例化它的方法。我检查了一下，发现唯一的选择是`openDatabase`在课堂上使用`DbDirectory`。猜猜这是做什么的。现在该方法确实有一个带有布尔值的替代方法，它表明您是否希望使用故障转移，但根据[文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_OPEN_METHOD_JAVA.html)，对于 IIOP 操作它总是错误的。

根据[this page](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_OPENING_AND_CLOSING_A_DATABASE_JAVA.html) ，您可以通过使用两个空参数调用来获取一个空`Database`对象。`getDatabase`所以我尝试了这个：

```
Session session = NotesFactory.createSession(host + ":" + port, user, password);
Database db = session.getDatabase(null, null, false);
db.openWithFailOver(host, databaseName); 
```

哪个及时给了我例外`NotesException: A database name must be provided`。将第二行更改为`Database db = session.getDatabase(null, null);`没有任何区别。

我只能假设远程操作必须使用数据库名称？但是，远程连接时如何使用故障转移呢？还是我做错了？也许我应该连接到集群而不是服务器本身，并且故障转移会自动处理？或者远程连接显然不可能进行故障转移？Notes 客户端可以做到这一点，所以我希望它可以在您自己的 Java 代码中实现。

有人请在这里帮助我，因为文档没有提供足够的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T17:22:21.657

API 没有任何问题。Lotus Notes 和 Domino 中的集群故障转移就是为 Domino 的专有网络协议 (NRPC) 设计的。Notes 客户端使用 NRPC。这就是它可以进行故障转移的原因。使用 notes.jar 而不是 NCSO.jar 的 Java 代码也可以做到这一点，因为它还使用 NRPC —— 以及一些不为人知的 Notes 客户端配置信息。

但它不适用于 NCSO.jar，因为它使用的是 IIOP。

这就是为什么会这样。一般来说，标准协议对任何类型的集群一无所知。集群这些标准协议的解决方案几乎都依赖某种高可用性网络设备来将流量引导到集群中的各种服务器。但与标准协议的集群解决方案不同，Domino 集群在网络上无需任何外部负载平衡器/故障转移设备即可工作。因此，如果 Domino 服务器在集群中，但它没有响应，那么 Notes 客户端如何知道要故障转移到的另一台服务器的地址？没有可与之交谈的交通警察设备，它显然无法询问服务器，因为它没有响应。所以它必须查看已经存储在本地的配置信息，以告诉它还有哪些具有目标数据库副本的服务器可用！该信息由作为 Notes 客户端安装一部分的 Notes 核心 DLL 维护，因此您必须安装 Notes 客户端才能使其正常工作。但是当您使用 NCSO.jar 时，不会假设有本地 Notes 客户端。即使您确实安装了 Notes 客户端，NCSO.jar 也不知道它。因此，基于 IIOP 的 Notes Java API 类无法知道在哪里查找有关 Domino 集群中可用服务器的任何信息。因此，您必须安装 Notes 客户端才能使其正常工作。但是当您使用 NCSO.jar 时，不会假设有本地 Notes 客户端。即使您确实安装了 Notes 客户端，NCSO.jar 也不知道它。因此，基于 IIOP 的 Notes Java API 类无法知道在哪里查找有关 Domino 集群中可用服务器的任何信息。因此，您必须安装 Notes 客户端才能使其正常工作。但是当您使用 NCSO.jar 时，不会假设有本地 Notes 客户端。即使您确实安装了 Notes 客户端，NCSO.jar 也不知道它。因此，基于 IIOP 的 Notes Java API 类无法知道在哪里查找有关 Domino 集群中可用服务器的任何信息。

有一种叫做 Domino Internet Cluster Manager 的东西适用于 Domino HTTP 故障转移，但我认为它也不支持 IIOP。不过，我不确定，所以你可能想调查一下。但我认为，如果您想要 IIOP 故障转移，您可能必须向您的网络添加第 3 方负载平衡/集群解决方案。不过，好消息是您可能不需要任何特殊的 API 来利用它。或者，如果您的网络上没有支持 IIOP 的集群解决方案并且您无法添加一个，那么您可以只编写代码以与多个服务器一起使用。编写您的代码，而不是仅将一个服务器名称/地址编程到其中，而是有多个，并尝试按顺序打开您的数据库，直到您成功。

# spring - 如何让 Spring 3.2 与 Tiles 3 和 REGEXP 一起工作

> ID：14363057
> 
> 赞同：1
> 
> 时间：2013-01-16T16:28:06.547
> 
> 标签：spring, spring-mvc, tiles, tiles-3

我正在使用 spring mvc 和 tiles 3 设置一个项目。它可以正常使用普通的瓷砖定义，但我无法让 REGEXP: 定义工作。有什么特别的事情需要做吗？

# 编辑

发现我必须将`completeAutoload`视图解析器中的属性设置为 true。但是，我得到了一个类转换异常

```
java.lang.ClassCastException: org.apache.tiles.impl.mgmt.CachingTilesContainer cannot be cast to org.apache.tiles.impl.BasicTilesContainer
    at org.springframework.web.servlet.view.tiles3.TilesConfigurer.afterPropertiesSet(TilesConfigurer.java:263)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

弹簧配置

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- - DispatcherServlet application context for KinzHunt's web tier. -->
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
                http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

    <!-- Enable Spring MVC annotation configuration -->
    <mvc:annotation-driven />
    <!-- Scan the application for all possible controllers & autowire collaborators -->
    <context:component-scan base-package="com.example" use-default-filters="true" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.tiles3.TilesViewResolver"/>
    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles3.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles.xml</value>
            </list>
        </property>
        <property name="completeAutoload" value="true"/>
        <property name="preparerFactoryClass" value="org.apache.tiles.compat.preparer.CompatibilityPreparerFactory"/>
        <property name="useMutableTilesContainer" value="false"/>
    </bean>

    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:04:09.183

您的问题似乎与正则表达式或您发布的 spring 配置无关。我怀疑你也在使用一些@nnotations。无论如何，Spring 声称您正在尝试在需要 BasicTilesContainer 的地方使用 CachingTilesContainer 类型的对象，通过自动装配连接起来。这在 XML 中没有调用，所以它必须在 Java 中，所以您必须找到它。将日志记录级别提高到 DEBUG 将使您有更多的时间去咀嚼。不是瓷砖专家，我只能写这看起来很奇怪。查看用于设置容器的注释的 Java 代码，并查看发生在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:16:25.020

原来是 Spring 自己的实现中的一个错误。我在他们的问题跟踪器上报告了这个[错误，并向他们发送了一个](https://jira.springsource.org/browse/SPR-10195)[拉取请求](https://github.com/SpringSource/spring-framework/pull/216)

# database - Access 2010-输入还是自动生成？

> ID：14363060
> 
> 赞同：0
> 
> 时间：2013-01-16T16:28:12.167
> 
> 标签：database, database-design

在 Access 2010 中，我试图设置一个 ID 号字段（它不是主键），它在其中输入条形码中的数字。在同一字段中，如果条形码不可用，我想要一个选项来自动在该空间中生成一个数字。用户可以按下按钮来自动生成号码。

换句话说，对于每条记录，我想成为一个 ID 号，可以从条形码扫描或通过按下按钮自动生成。

我可以在 MS Access 中执行此操作还是太多了？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:53:05.860

> 换句话说，对于每条记录，我想成为一个 ID 号，可以从条形码扫描或通过按下 [原文如此] 按钮自动生成。

Access（任何版本）都可以做到这一点。

但是您需要一个从条形码扫描的 ID 号，或者一个由从按钮的[Click 事件](http://msdn.microsoft.com/en-us/library/office/ff822439%28v=office.14%29.aspx)调用*的 VBA 代码生成的 ID 号。*

您需要编写 VBA 代码。保证从条码读取的 ID 号与您的代码生成的 ID 号之间不会发生冲突。一种方法，假设所有条码 ID 号都是正数，是让您的代码只生成负 ID 号。还有其他方法。

# node.js - Mongoose/mongoDB 查询加入.. 但我来自 sql 背景

> ID：14363065
> 
> 赞同：24
> 
> 时间：2013-01-16T16:28:24.593
> 
> 标签：node.js, mongodb, mongoose

我来自 sql 背景，所以在我加入表的 sql 中编写查询非常简单，但我想我在 mongoose/mongodb 中缺少它

基本上我知道 Subscriber_ID （映射到用户集合中的文档）

我想拉出项目组，以及用户所属的所有项目，所以如果我要在 pseduo sql 中写这个，那就是

```
Select 
  ProjectGroup.title, 
  Project.Title 
FROM 
  ProjectGroup, 
  Project, 
  User 
WHERE 
  User.id = req.body.subscriber_id 
  AND Project.subscriber_id = User.id 
  AND  ProjectGroup.project_id = Project.id 
```

必须有一种方法可以在 mongoose/mongodb 中进行类似的连接，因为类型映射到模式对吗？

我的架构......

项目组架构

```
var ProjectGroupSchema = new Schema({
    title             : String
  , projects          : [ { type: Schema.Types.ObjectId, ref: 'Project' } ]
}); 
```

项目架构

```
var ProjectSchema = new Schema({
    title         : {type : String, default : '', required : true}
  , subscribers   : [{ type: Schema.Types.ObjectId, ref: 'User' }]
}); 
```

用户模式

```
var UserSchema = new Schema({
    first_name    : {type: String, required: true}
  , last_name     : {type: String, required: true}
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-16T21:05:05.500

你只有一步之遥！

项目组架构：

```
var ProjectGroupSchema = new Schema({
    title             : String
}); 
```

项目架构：

```
var ProjectSchema = new Schema({
    title         : {type : String, default : '', required : true},
    group         : {type: Schema.Types.ObjectId, ref: 'ProjectGroup' },
    _users    : [{type: Schema.Types.ObjectId, ref: 'User' }]
}); 
```

用户架构：

```
var UserSchema = new Schema({
    first_name    : {type: String, required: true},
    last_name     : {type: String, required: true},
    subscribing   : [{type: Schema.Types.ObjectId, ref: 'Project' }]
}); 
```

然后您可以执行以下操作：

```
user.findById(req.userId)
     .populate('subscribing')
     .exec(function(err, user){
          console.log(user.subscribing);
     }) 
```

或者：

```
project.find({
        subscriber : req.userId
      })
     .populate('subscriber')
     .populate('group')
     .exec(function(err, projects){
          console.log(projects);
     }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:57:35.350

Mongodb 中没有连接。这个问题我认为是一个很好的参考：

[MongoDB和“加入”](https://stackoverflow.com/questions/4067197/mongodb-and-joins)

总而言之，对于将通过关系数据库中的连接解决的问题，mongodb 必须采用不同的策略。我会说你最终主要做以下两件事之一：

*   嵌入：您将信息嵌入到单个文档中，该文档将在关系数据库中分布在不同的表中。
*   加入信息客户端：当你需要使用来自多个地方的信息时，你会多次查询，然后在你的客户端中将这些碎片拼凑在一起。

# ruby - 获取每个 Chef 服务器节点的特定 IP 地址

> ID：14363066
> 
> 赞同：2
> 
> 时间：2013-01-16T16:28:27.353
> 
> 标签：ruby, chef-infra

请原谅，因为我对 Chef 和 Ruby 都是新手。这应该是一个简单的问题。跟随[Jason Grimes 的教程](http://www.jasongrimes.org/2012/06/deploying-a-lamp-application-with-chef-vagrant-and-ec2-3-of-3/)。

如何删除**localhost**并在下面的代码中使用 Chef 节点的特定 IP 地址？

`# Get a list of web servers
webservers = node['roles'].include?('webserver') ? [{'ipaddress' => 'localhost'}] : search(:node, "role:webserver AND chef_environment:#{node.chef_environment}")`

我可以代替，因为[根据 Opscode](http://wiki.opscode.com/display/chef/Automatic+Attributes)和这个[StackOverflow question](https://stackoverflow.com/questions/13337110/get-ip-address-of-node-returned-by-chef-search-in-recipe)
`webservers = search(:node, "role:webserver AND chef_environment:#{node.chef_environment}")`
IP_address 是一个自动属性。

不幸的是，我不太明白我将如何测试它以确保否则我会运行测试。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:55:53.440

是的你是对的。

```
webservers = search(:node, "role:webserver AND chef_environment:#{node.chef_environment}") 
```

然后`webservers`将是一个节点数组，您将能够通过

```
webservers[index]['ipaddress'] 
```

# javascript - 清空文件内容的功能

> ID：14363067
> 
> 赞同：2
> 
> 时间：2013-01-16T16:28:30.883
> 
> 标签：javascript, html

如果在值不是 etmpy 时单击按钮，我想创建一个清空文件内容的函数，这可能吗？

```
function file_empty() {

    var file = document.getElementById('file');

     if(file.value !=="") {
        // empty the file
          return true;
    }
}

<input  name="uploaded" type="file" id="file" />
<input type="submit" value="empty-if-full" onclick="return file_empty();" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:30:25.157

**不**，这是不可能的。JavaScript对文件系统的访问**为零。**

需要一种服务器端语言（C#、VB、PHP、ColdFusion、Ruby 等）来做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:38:16.477

文件系统是前端脚本无法访问的东西。js 就是其中之一。我也在努力通过js打开和写入文件，这也几乎不可能..所以你应该坚持使用php，python，java等......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:44:54.213

正如@james 先生所说，使用 javascript 是不可能的，但您可以查看 html5 文件阅读器。

在这里您可以查看[如何使用 Javascript 打开本地磁盘文件？](https://stackoverflow.com/questions/3582671/how-to-open-local-disk-file-with-javascript)

# asp.net - 客户端验证库在哪里？

> ID：14363068
> 
> 赞同：0
> 
> 时间：2013-01-16T16:28:31.160
> 
> 标签：asp.net, sharepoint

我正在为 sharepoint 2010 编码。根据这个[msdn](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)，当您查看浏览器的页面源代码时，您应该找到类似的内容以使用验证库。我没有找到它。

```
<script language="javascript" 
        src="/aspnet_client/system_web/1_0_3617_0/WebUIValidation.js">
</script> 
```

我很困惑，你能解释一下验证库是如何加载到客户端浏览器的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:34:54.493

该`WebUIValidation.js`文件包含用于客户端验证的客户端 JavaScript 函数。它会在以下情况下*自动*注入页面：

*   该页面包含一个或多个验证 Web 控件。
*   “高级”浏览器正在访问该页面。

我启动了 Reflector 以便在`System.Web.UI.WebControls.BaseValidator`该类中达到一个高峰，这是所有验证 Web 控件的派生类。`RegisterValidationCommonScript()`方法负责。

归功于：[http ://scottonwriting.net/sowblog/archive/2004/11/03/163009.aspx](http://scottonwriting.net/sowblog/archive/2004/11/03/163009.aspx)

通过 ILSpy (.NET 4.0) 反映：

```
// System.Web.UI.WebControls.BaseValidator
protected void RegisterValidatorCommonScript()
{
    if (this.Page.IsPartialRenderingSupported)
    {
        ValidatorCompatibilityHelper.RegisterClientScriptResource(this, typeof(BaseValidator), "WebUIValidation.js");
        ValidatorCompatibilityHelper.RegisterStartupScript(this, typeof(BaseValidator), "ValidatorIncludeScript", "\r\nvar Page_ValidationActive = false;\r\nif (typeof(ValidatorOnLoad) == \"function\") {\r\n    ValidatorOnLoad();\r\n}\r\n\r\nfunction ValidatorOnSubmit() {\r\n    if (Page_ValidationActive) {\r\n        return ValidatorCommonOnSubmit();\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\n        ", true);
        ValidatorCompatibilityHelper.RegisterOnSubmitStatement(this, typeof(BaseValidator), "ValidatorOnSubmit", "if (typeof(ValidatorOnSubmit) == \"function\" && ValidatorOnSubmit() == false) return false;");
        return;
    }
    if (this.Page.ClientScript.IsClientScriptBlockRegistered(typeof(BaseValidator), "ValidatorIncludeScript"))
    {
        return;
    }
    this.Page.ClientScript.RegisterClientScriptResource(typeof(BaseValidator), "WebUIValidation.js");
    this.Page.ClientScript.RegisterStartupScript(typeof(BaseValidator), "ValidatorIncludeScript", "\r\nvar Page_ValidationActive = false;\r\nif (typeof(ValidatorOnLoad) == \"function\") {\r\n    ValidatorOnLoad();\r\n}\r\n\r\nfunction ValidatorOnSubmit() {\r\n    if (Page_ValidationActive) {\r\n        return ValidatorCommonOnSubmit();\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\n        ", true);
    this.Page.ClientScript.RegisterOnSubmitStatement(typeof(BaseValidator), "ValidatorOnSubmit", "if (typeof(ValidatorOnSubmit) == \"function\" && ValidatorOnSubmit() == false) return false;");
} 
```

# javascript - 将 Google 电子表格日期转换为 JS Date 对象？

> ID：14363073
> 
> 赞同：18
> 
> 时间：2013-01-16T16:28:45.660
> 
> 标签：javascript, datetime, google-apps-script, google-sheets

我一直在这个圈子上转圈...我有一个包含两个日期的电子表格，我需要找到两者之间经过的年数（即某人在给定日期的年龄；这是Excel 的 DATEDIF 的替代品）。

第一步是将 Google 的序列号转换为 JS Date 对象，但似乎没有执行此操作的 Date 构造函数。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-01-14T22:41:50.543

To convert a Google spreadsheet date to a javascript date :

```
var JSdate = Date.parse(Cell.getValue()) 
```

To convert a javascript date to a Google spreadsheet date:

```
function GoogleDate( JSdate ) { 
   var D = new Date(JSdate) ;
   var Null = new Date(Date.UTC(1899,11,30,0,0,0,0)) ; // the starting value for Google
   return ((D.getTime()  - Null.getTime())/60000 - D.getTimezoneOffset()) / 1440 ;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-16T20:36:16.923

我知道您对目前的解决方案很满意，但我只是想补充一下我对 Google Apps 脚本如何处理“日期”的观察，这些“日期”可以通过自定义函数传递，也可以使用 getValue() 从单元格中检索。

我的经验法则是，如果 Sheets（电子表格应用程序）提供*格式*为日期的值（通过自动强制或用户设置格式），则 Google Apps 脚本会自动将此值保存为日期对象。

例如：

```
function returnDate(value) {
  return new Date(value);  
} 
```

如果您`1/1/13`在 A1 中输入，并在另一个单元格中调用`=returnDate(A1)`，它将返回相同的日期（就像您只是`return value;`在代码中一样）。但是，请注意当您将 A1 格式化为“正常”（将其转换为数值）时会发生什么。在这里，“表格序列号”（从 1899 年 12 月 30 日开始的天数）被 Google Apps 脚本转换为日期对象，但在 GAS 中，它被“视为”从 1970 年 1 月 1 日午夜开始的毫秒数. 因此，如果您传递您认为代表日期的数值，您可能会得到意想不到的结果。

还比较：

`=returnDate(DATE(2013;1;1))`

`=returnDate(VALUE("1/1/13"))`

`=returnDate(DATEVALUE("1/1/13"))`

`=returnDate("1/1/13")`

`=returnDate("1/1/2013")`

后两个“工作”，因为`new Date()`成功地从有效字符串创建日期对象，但请注意，Sheets 自动强制转换为当前世纪，而 GAS 将两位数年份强制转换为 1900 年代。

因此，IMO 如果您希望它的行为与 Excel 中的行为完全相同（即“将”数值“视为”日期的序列号），则需要首先测试传递的参数是否为日期对象（或“有效的”文本字符串），如果不是，则以数学方式将其从“从 1899 年 12 月 30 日开始的天数”转换为“从 1970 年 1 月 1 日开始的毫秒数”，然后再转换`new Date()`。

为冗长的帖子道歉。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-25T13:12:09.423

这就是我所做的：

```
function numberToDate(number){
  var date = new Date(number * 24 * 60 * 60 * 1000);
  date.setFullYear(date.getFullYear() - 70);
  date.setDate(date.getDate() - 1);
  return (date);
} 
```

这可能看起来有点脏，但这是我目前找到的唯一解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T17:12:47.320

经过更多的实验，结果证明它确实有效，这有点令人惊讶。`new Date(cell)`似乎在内部将序列号转换为足以创建日期对象的字符串。完整答案：

```
function datedif(first, second, format) {
  var e1  = new Date(first);
  var e2  = new Date(second);
  var age = e2.getFullYear() - e1.getFullYear();
  if(
      (e2.getMonth() <  e1.getMonth()) || 
     ((e2.getMonth() == e1.getMonth()) && (e2.getDate() < e1.getDate())))
    age--;
  return age;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-25T05:45:18.900

你可以这样尝试：

```
return new Date(1900, 0, --excelDate) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-28T14:40:18.607

为我工作

```
private static getDateFromGoogle(serialNumber: number): Date {
  // Google     30 Dec 1899
  // Javascript 01 Jan 1970
  return new Date((serialNumber - 25569) * 86400000);
}
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-13T01:56:23.633

首先，您必须从 google sheet config 获取时区设置。

然后，这是完美的解决方案：

```
import { zonedTimeToUtc, utcToZonedTime } from "date-fns-tz";

const SheetDate = {
  origin: Date.UTC(1899, 11, 30, 0, 0, 0, 0),
  dayToMs: 24 * 60 * 60 * 1000
};
function serialToDate(d: number, sheetTimeZone: string): Date {
  return zonedTimeToUtc(
    new Date(d * SheetDate.dayToMs + SheetDate.origin),
    sheetTimeZone
  );
}
function dateToSerial(date: Date, sheetTimeZone: string) {
  const msec = utcToZonedTime(date, sheetTimeZone).getTime() - SheetDate.origin;
  return msec / SheetDate.dayToMs;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-16T17:12:16.617

通过“序列号”，我猜您是在谈论从纪元开始以秒或毫秒为单位的 unix 时间。您可以简单地使用标准的 Javascript Date 对象：

```
new Date(value); 
```

谷歌是你的朋友。这里有一些参考资料可以帮助您入门：

*   [W3 学校参考](http://www.w3schools.com/jsref/jsref_obj_date.asp)
*   [W3 学校教程](http://www.w3schools.com/js/js_obj_date.asp)
*   [MDN 参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

Javascript 允许您对两个日期进行简单的减法运算，以毫秒为单位返回时间差。

```
var timeDiffInMS = date2 - date1; 
```

这应该是你需要弄清楚的全部，所以我将把年份计算留给读者作为练习。

# r - Invalid multibyte string in read.csv

> ID：14363085
> 
> 赞同：50
> 
> 时间：2013-01-16T16:29:39.107
> 
> 标签：r, read.csv

I am trying to import a csv that is in Japanese. This code:

```
url <- 'http://www.mof.go.jp/international_policy/reference/itn_transactions_in_securities/week.csv'
x <- read.csv(url, header=FALSE, stringsAsFactors=FALSE) 
```

returns the following error:

```
Error in type.convert(data[[i]], as.is = as.is[i], dec = dec, na.strings = character(0L)) : 
invalid multibyte string at '<91>ΊO<8b>y<82>ёΓ<e0><8f>،<94><94><84><94><83><8c>_<96>̏@(<8f>T<8e><9f><81>E<8e>w<92><e8><95>@<8a>փx<81>[<83>X<81>j' 
```

I tried changing the encoding (`Encoding(url) <- 'UTF-8'` and also to latin1) and tried removing the read.csv parameters, but received the same "invalid multibyte string" message in each case. Is there a different encoding that should be used, or is there some other problem?

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-16T16:39:19.387

`Encoding` sets the encoding of a character string. It doesn't set the encoding of the file represented by the character string, which is what you want.

This worked for me, after trying `"UTF-8"`:

```
x <- read.csv(url, header=FALSE, stringsAsFactors=FALSE, fileEncoding="latin1") 
```

And you may want to skip the first 16 lines, and read in the headers separately. Either way, there's still quite a bit of cleaning up to do.

```
x <- read.csv(url, header=FALSE, stringsAsFactors=FALSE,
  fileEncoding="latin1", skip=16)
# get started with the clean-up
x[,1] <- gsub("\u0081|`", "", x[,1])    # get rid of odd characters
x[,-1] <- as.data.frame(lapply(x[,-1],  # convert to numbers
  function(d) type.convert(gsub(d, pattern=",", replace="")))) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-12T05:27:58.590

You may have encountered this issue because of the incompatibility of system locale try setting the system locale with this code `Sys.setlocale("LC_ALL", "C")`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-05-30T11:31:58.163

The readr package from the tidyverse universe might help.

You can set the encoding via the local argument of the `read_csv()` function by using the `local()` function and its encoding argument:

```
read_csv(file = "http://www.mof.go.jp/international_policy/reference/itn_transactions_in_securities/week.csv",
         skip = 14,
         local = locale(encoding = "latin1")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-09T11:11:42.633

I had the same error and tried all the above to no avail. The issue vanished when I upgraded from R 3.4.0 to 3.4.3, so if your R version is not up to date, update it!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-18T14:20:36.890

The simplest solution I found for this issue without losing any data/special character (for example when using `fileEncoding="latin1"` characters like the Euro sign € will be lost) is to open the file first in a text editor like Sublime Text, and to "Save with encoding - UTF-8".

Then R can import the file with no issue and no character loss.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-17T00:20:03.850

For those using `Rattle` with this issue Here is how I solved it:

1.  First make sure to quit rattle so your at the R command prompt
2.  `> library (rattle)` (if not done so already)
3.  `> crv$csv.encoding="latin1"`
4.  `> rattle()`
5.  You should now be able to carry on. ie, *import your csv > Execute > Model > Execute* etc.

That worked for me, hopefully that helps a weary traveller

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-20T07:19:58.443

I had a similar problem with scientific articles and found a good solution here: [http://tm.r-forge.r-project.org/faq.html](http://tm.r-forge.r-project.org/faq.html)

By using the following line of code:

```
tm_map(yourCorpus, content_transformer(function(x) iconv(enc2utf8(x), sub = "byte"))) 
```

you convert the multibyte strings into hex code. I hope this helps.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-21T20:02:21.383

If the file you are trying to import into R that was originally an Excel file. Make sure you open the original file and Save as a csv and that fixed this error for me when importing into R.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-01T12:49:35.500

I came across this error (`invalid multibyte string 1`) recently, but my problem was a bit different:

We had forgotten to save a csv.gz file with an extension, and tried to use `read_csv()` to read it. Adding the extension solved the problem.

# javascript - 停止动画 3 秒

> ID：14363086
> 
> 赞同：2
> 
> 时间：2013-01-16T16:29:39.713
> 
> 标签：javascript, jquery

我正在创建一个打地鼠风格的游戏，其中给出了一个总和，数字从容器底部到顶部动画。游戏的目的是点击总和的正确答案并收集尽可能多的正确答案。

我还添加了一些额外的图标，让游戏更有趣。其中一个图标是雪花，它将计时器和图标冻结 3 秒。

目前停止时钟 3 秒没有问题 - 这部分工作正常。我遇到的问题是停止数字和其他图标 3 秒钟。

这个我试过了。。

```
 $(".character").click(clickThrottled(function () {
        if ($(this).hasClass("freeze")) { 
            $(this).effect("explode", 400);
            $('.character').stop(true);
            window.clearInterval(countdown);
            window.setTimeout(function() {
            countdown = window.setInterval(timer, 1000);
        }, 3000);
    }
})); 
```

但它所做的只是永久停止图标。我也尝试过在 setTimeout 函数中对接 stop()，但这也不起作用。有人可以告诉我哪里出错了吗？

小提琴：http: [//jsfiddle.net/pUwKb/52/](http://jsfiddle.net/pUwKb/52/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:23:00.133

stop 将清除队列中的所有动画。尝试像这样添加动画：

```
$(".character").click(clickThrottled(function () {
    if ($(this).hasClass("freeze")) { 
        $(this).effect("explode", 400);
        $('.character').stop(true).delay('3000').animate({
          'top': '-100px'
        }, 2000).fadeOut(1000);
        window.clearInterval(countdown);
        window.setTimeout(function() {
        countdown = window.setInterval(timer, 1000);
    }, 3000);
} 
```

# html - 如何导入在记事本中打开时全是 html 的 .xls 文件？VB.net

> ID：14363096
> 
> 赞同：0
> 
> 时间：2013-01-16T16:30:11.887
> 
> 标签：html, vb.net, import, xls

我有一个从 asp.net 网站下载的 .xls 文件。我需要使用 vb.net 将文件中的数据导入访问数据库。如果您在记事本中打开 xls 文件，则它全是 html。试图像普通的 excel 文件一样输入数据是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:24:07.013

实际上，您可以使用 OLEDB 执行此操作 - 您在扩展属性中指定它是 HTML，例如

```
Dim oleExcelConnection As OleDbConnection

sConnection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Test.xls;Extended Properties=""HTML Import;IMEX=1"""

oleExcelConnection = New OleDbConnection(sConnection)
oleExcelConnection.Open()

...

oleExcelConnection.close() 
```

自从我尝试了这个并且它工作正常但我选择在最终实现中强制文件为 .xlsx 已经有一段时间了。我不记得究竟是为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:05:15.567

您可能需要先在 excel 中打开它，然后以您尝试使用的文件格式保存它。该文件是 HTML，不是 excel 格式。该网站正在使用一种技巧，通过将内容类型设置为 application/vnd.ms-excel 并将文件扩展名设置为 .xls，让浏览器使用返回的 HTML 打开 excel。在大多数情况下，浏览器将使用 html 文件启动 excel。Excel 将看到文件格式不正确，但允许用户打开并导入它。

# gdb - 部分匹配的 gdb 搜索命令历史记录

> ID：14363100
> 
> 赞同：6
> 
> 时间：2013-01-16T16:30:22.870
> 
> 标签：gdb

在搜索 gdb 命令历史记录时，有没有办法只通过那些与给定命令匹配的命令？

例如，有时我只想搜索以前的中断命令，而不是整个命令历史记录。是否有仅通过以“break”或“b”开头的命令的快捷方式？这可以为我节省一百万次击键。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T22:17:19.487

在常规 GDB 中，`Ctrl``R`启用搜索模式。这与 bash、zsh 和许多其他 shell 的工作方式相同。

进入搜索模式后，提示会发生变化：

```
(reverse-i-search)`': 
```

键入字母然后输入要查找的文本：

```
(reverse-i-search)`br': break main 
```

要查找下一个匹配的命令，请`Ctrl``R`再次点击。

要再次运行该命令，请按 Enter。

要编辑命令，请按左或右光标键。

# sql-server - VBScript 使用 WMI 找出 SQL Server 版本

> ID：14363102
> 
> 赞同：-3
> 
> 时间：2013-01-16T16:30:24.757
> 
> 标签：sql-server, vbscript, wmi

任何人都可以将我指向一个 vbscript（使用 WMI）来找出已安装的 SQL Server 版本。我有一个场景，可以在一台机器上安装 SQL Server 2008 R2 或 SQL Server 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:54:58.317

基于[此处第一个 Google 搜索结果](https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.scripting.wsh/MNtfPYXZhIA)中的代码：

```
Dim WMI, Col, Prod, Q
Set WMI = GetObject("WinMgmts:")
Q = "Select * FROM Win32_Product WHERE Vendor = " & _
    "'Microsoft Corporation' AND Name LIKE 'SQL Server%Database Engine Services'"
Set Col = WMI.ExecQuery(Q)
For Each Prod in Col
  if left(Prod.version, 3) = "11." then
    msgbox "SQL Server 2012 was found!" & vbCrLf & prod.version
  elseif left(Prod.version, 4) = "10.5" then
    msgbox "SQL Server 2008 R2 was found!" & vbCrLf & prod.version
  end if
Next
Set Col = Nothing
Set WMI = Nothing 
```

请注意，WMI 并不是最快的方法。您是否考虑过直接检查注册表而不是通过 WMI？

**UPDATE**给出了使用注册表的 OP 解决方案，并假设可以安装 2008R2 或 2012 中的一个：

```
RegKey2012 = "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\" & _
             "Microsoft SQL Server\MSSQL11.MSSQLSERVER\"
If RegKeyExists(RegKey2012) Then 
  WScript.StdOut.Write("2012") 
Else 
  WScript.StdOut.Write("2008R2") 
End If 

Function RegKeyExists(Key) 
  Dim oShell, entry 
  On Error Resume Next 
  Set oShell = CreateObject("WScript.Shell") 
  entry = oShell.RegRead(Key) 
  If Err.Number <> 0 Then 
    Err.Clear 
    RegKeyExists = False 
  Else 
    Err.Clear 
    RegKeyExists = True 
  End If 
End Function 
```

# php - php - 为什么生成的下载链接不显示文件大小且不可恢复？

> ID：14363108
> 
> 赞同：1
> 
> 时间：2013-01-16T16:30:37.403
> 
> 标签：php, download

我使用下面的代码为我的文件生成下载链接，但生成的下载链接不可恢复。此外，它们在下载时不显示文件大小：

```
//set_time_limit(0);
header("Pragma: public");
header("Expires: 0"); 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Cache-Control: private",false);
header("Content-Type: application/download"); 
header("Content-Disposition: filename=file.zip");

$ch = curl_init("http://dl.otherserver.com/file.zip");
curl_exec($ch);
curl_close($ch);        
exit(); 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:43:40.673

因为客户端还不知道文件大小。您需要发送`Content-Length`标头。

```
header('Content-Length: ' . filesize($myFile)); 
```

不过，对恢复文件上传知之甚少。

# android - 通过适配器仅在一行上使 TextView 在 ListView 行中可见

> ID：14363111
> 
> 赞同：0
> 
> 时间：2013-01-16T16:30:45.327
> 
> 标签：android, listview, android-view, simplecursoradapter, listadapter

我当时只想突出显示一行，我通过使`TextView`可见（或使用 BadgeView 库，我在第一次尝试中使用但产生了这个错误，我认为这是库的一个缺陷/错误）来做到这一点.

**这是我的方法：（**我已经在我的 中覆盖了这个方法`SimpleCursorAdapter`）

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
    super.bindView(view, context, cursor);

    int rowId = Integer.valueOf(((TextView) view.findViewById(R.id.two_line_rowid)).getText().toString());

    if (rowId == mRowIdSelected) {
        ((TextView) view.findViewById(android.R.id.text1)).setText("SELECTED");
        ((TextView) view.findViewById(R.id.select_badge)).setVisibility(View.VISIBLE);
    }

} 
```

它工作得很好，但有一个错误。所选行中唯一更改的文本`android.R.id.text1`按预期工作，但在第一行**和**`TextView`所选行中可见，但未按预期工作。

 **有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:37:50.293

你可以试试这个：

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
    super.bindView(view, context, cursor);

    int rowId = Integer.valueOf(((TextView) view.findViewById(R.id.two_line_rowid)).getText().toString());

    if (rowId == mRowIdSelected) {
        ((TextView) view.findViewById(android.R.id.text1)).setText("SELECTED");
        ((TextView) view.findViewById(R.id.select_badge)).setVisibility(View.VISIBLE);
    } else {
        ((TextView) view.findViewById(android.R.id.text1)).setText("NOT-SELECTED");
        ((TextView) view.findViewById(R.id.select_badge)).setVisibility(View.INVISIBLE);
    }

} 
```

你能提供你通过的视图的布局吗？**

# sql - 带有 Select 的 SQL 插入不起作用

> ID：14363113
> 
> 赞同：0
> 
> 时间：2013-01-16T16:30:49.867
> 
> 标签：sql, sqlite

我有一个这样的 SQL 语句：

```
INSERT INTO TABLE_3(TABLE_1ID, TABLE_2ID) 
SELECT ID FROM TABLE_1 WHERE NAME = '..', 
SELECT ID FROM TABLE_2 WHERE NAME = '..'; 
```

但它不起作用。我只是得到一个错误

> *语句 ... 在“SELECT”附近：语法错误。*

那么如何正确地做到这一点呢？没有示例如何使用来自两个不同表的两个选择来处理此问题。

这会起作用：

```
INSERT INTO TABLE_1(NAME, AGE)
SELECT NAME, AGE FROM TABLE_2 WHERE ID = '..'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:33:11.413

你需要加入 2 个表，因为我不知道你的数据库结构，我会假设 Name 是 2 个表之间唯一的公共引用，如果不是这样的话，你实际上有更可靠的东西（比如实际的外键）那么你应该使用它。

```
INSERT INTO TABLE_3
       (TABLE_1ID, TABLE_2ID) 
SELECT TABLE_1.ID, TABLE_2.ID 
FROM TABLE_1 
     JOIN TABLE_2 ON TABLE_1.NAME = TABLE_2.NAME
WHERE TABLE_1.NAME = '..' 
```

根据您的评论，TABLE_2 和 TABLE_3 之间似乎没有关系，在这种情况下，您可以这样做：

```
INSERT INTO TABLE_3
       (TABLE_1ID, TABLE_2ID) 
SELECT (SELECT ID FROM TABLE_1 WHERE NAME = '..'), 
       (SELECT ID FROM TABLE_2 WHERE NAME = '..') 
```

# javascript - Javascript 中 JSON.parse 的 XML 等价物是什么？

> ID：14363117
> 
> 赞同：2
> 
> 时间：2013-01-16T16:30:59.437
> 
> 标签：javascript, xml-serialization

> **可能重复：**
> [JavaScript 中变量字符串的 XML 解析](https://stackoverflow.com/questions/649614/xml-parsing-of-a-variable-string-in-javascript)

作为服务器客户端项目的一部分，我在 C# 服务器应用程序中有一个对象，该对象被序列化为 XML 字符串。字符串如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<CandyShop xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <CandyList>
   <CandyDesc>
     <Taste>Taste1</Taste>
     <Color>Color1</Color>
   </CandyDesc>
   <CandyDesc>
     <Taste>Taste2</Taste>
     <Color>Color2</Color>
   </CandyDesc>
  </CandyList>
  <!-- Other stuff -->
</CandyShop> 
```

然后我通过 websockets 将此 XML 字符串传输到基于 javascript 的 HTML 客户端。我想反序列化初始类，以便我可以输入

```
var aColor = CandyShop.CandyList.CandyDesc[0].Color; 
```

对于 JSON 字符串，我只使用

```
JSON.parse(stringToParse); 
```

是否有 XML 的等价物？

如果我可以预先创建一个 CandyShop 类并直接映射字段，那将是一个奖励。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:40:07.887

没有直接等效于 JSON.parse 来处理 XML，这是因为 XML 所做的并不直接等同于 JSON 所做的，因此以这种方式读取它通常没有意义。阅读 TJ Crowder 在上面的评论中提供的链接，了解如何执行 XML 解析的详细信息。

# node.js - node.js编译后没有提示

> ID：14363119
> 
> 赞同：1
> 
> 时间：2013-01-16T16:31:10.007
> 
> 标签：node.js, arm, cross-compiling

我已经尝试为 arm 交叉编译 node.js，当我运行文件节点时，什么都不做。由于没有任何输出，我可以做些什么来找出问题所在有什么想法吗？

# java - HashMap 和可见性

> ID：14363123
> 
> 赞同：14
> 
> 时间：2013-01-16T16:31:25.640
> 
> 标签：java, multithreading, hashmap

[HashMap 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)状态：

> 如果在迭代器创建后的任何时候对映射进行结构修改，除了通过迭代器自己的 remove 方法之外的任何方式，迭代器都会抛出 ConcurrentModificationException。

我构建了一个示例代码，根据规范，它应该几乎立即失败并抛出 ConcurrentModificationException；

*   它确实像 Java 7 预期的那样立即失败
*   但它（似乎）总是适用于 Java 6（即它不会抛出承诺的异常）。

注意：Java 7 有时不会失败（比如 20 次中有 1 次）——我猜这与线程调度有关（即 2 个可运行对象没有交错）。

**我错过了什么吗？为什么使用 Java 6 运行的版本不会抛出 ConcurrentModificationException？**

实质上，有 2 个 Runnable 任务并行运行（使用倒计时闩锁使它们大致同时启动）：

*   一种是将项目添加到地图
*   另一个是遍历地图，读取键并将它们放入数组中

然后主线程检查有多少键已添加到数组中。

**Java 7 典型输出**（迭代立即失败）：

> java.util.ConcurrentModificationException
> MAX i = 0

**Java 6 典型输出**（整个迭代经过，数组包含所有添加的键）：

> 最大 i = 99

**使用的代码**：

```
public class Test1 {

    public static void main(String[] args) throws InterruptedException {
        final int SIZE = 100;
        final Map<Integer, Integer> map = new HashMap<Integer, Integer>();
        map.put(1, 1);
        map.put(2, 2);
        map.put(3, 3);
        final int[] list = new int[SIZE];
        final CountDownLatch start = new CountDownLatch(1);
        Runnable put = new Runnable() {
            @Override
            public void run() {
                try {
                    start.await();
                    for (int i = 4; i < SIZE; i++) {
                        map.put(i, i);
                    }
                } catch (Exception ex) {
                }
            }
        };

        Runnable iterate = new Runnable() {
            @Override
            public void run() {
                try {
                    start.await();
                    int i = 0;
                    for (Map.Entry<Integer, Integer> e : map.entrySet()) {
                        list[i++] = e.getKey();
                        Thread.sleep(1);
                    }
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        };
        ExecutorService e = Executors.newFixedThreadPool(2);
        e.submit(put);
        e.submit(iterate);
        e.shutdown();

        start.countDown();
        Thread.sleep(100);
        for (int i = 0; i < SIZE; i++) {
            if (list[i] == 0) {
                System.out.println("MAX i = " + i);
                break;
            }
        }
    }
} 
```

注意：在 x86 机器上使用 JDK 7u11 和 JDK 6u38（64 位版本）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T16:50:10.140

如果我们查看`HashMap`源代码并在 Java 6 和 Java 7 之间进行比较，我们会看到这样有趣的差异：

`transient volatile int modCount;`在 Java6 和`transient int modCount;`Java7 中。

我确信这是由于以下原因导致提到的代码的不同行为：

```
 if (modCount != expectedModCount)
            throw new ConcurrentModificationException(); 
```

**UPD：**在我看来，这是一个已知的 Java 6/7 错误：[http](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6625725) : //bugs.sun.com/bugdatabase/view_bug.do?bug_id=6625725 已在最新的 Java7 中修复。

**UPD-2：** @Renjith 先生说，他只是测试并没有发现 HashMaps 实现的行为有任何差异。但我也刚刚测试过。

我的测试是：

1）我创建了`HashMap2`类，它绝对是`HashMap` **Java 6**的副本。

一件重要的事情是我们需要在这里引入 2 个新字段：

```
transient volatile Set<K>        keySet = null; 
```

和

```
transient volatile Collection<V> values = null; 
```

2）然后我在这个问题的测试中使用它并**在Java 7下**`HashMap2`运行它

 ****结果：**它像这样的测试在 下工作`Java 6`，即没有任何`ConcurentModificationException`。

**这都证明了我的猜想。量子点**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T17:00:40.757

作为旁注，`ConcurrentModificationException`（尽管名称很不幸）*并非*旨在检测*跨多个线程*的修改。它*仅*用于捕获单个线程中的修改。无论使用迭代器或其他任何东西，都保证会破坏跨多个线程（没有正确同步）修改共享 HashMap 的效果。

简而言之，无论 jvm 版本如何，您的测试都是虚假的，并且它完全没有任何不同只是“运气”。例如，由于 HashMap 内部在查看跨线程时处于不一致状态，此测试可能会引发 NPE 或其他一些“不可能的”异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:50:04.717

我的理论是，在 Java 6 和 7 上，在读取器线程中创建迭代器比在写入器线程中放置 100 个条目需要更长的时间，主要是因为必须加载和初始化新类（即`EntrySet, AbstractSet, AbstractCollection, Set, EntryIterator, HashIterator, Iterator`）

因此，在阅读器线程上执行此行时，编写器线程已经完成

```
 HashIterator() {
        expectedModCount = modCount;
        if (size > 0) { // advance to first entry 
```

在 Java 6 中，因为`modCount`is `volatile`，迭代器看到了 latest `modCount and size`，所以其余的迭代顺利进行。

在 Java 7 中，`modCount`不是 volatile，迭代器可能会看到 stale `modCount=3, size=3`。之后`sleep(1)`，迭代器看到 updated `modCount`，并立即失败。

这个理论的一些缺陷：

1.  `MAX i=1`该理论应该在 java 7 上进行预测
2.  在 main() 执行之前，`HashMap`可能已经被其他代码迭代，所以提到的类可能已经加载了。
3.  阅读器线程可能会看到陈旧`modCount`，但不太可能，因为这是该线程上变量的第一次读取；没有先前的缓存值。

我们可以通过在 Hashmap 中植入日志代码来找出阅读器线程看到的内容，从而解决这个问题。**

# python - 使用 Python 记录器记录到文件和标准错误

> ID：14363127
> 
> 赞同：4
> 
> 时间：2013-01-16T16:31:47.393
> 
> 标签：python, logging, python-2.7

我正在尝试将一个模块添加到使用标准 Python (2.7) 日志库的项目中。我想要实现的是以下内容：

*   任何等于或差于 WARNING 的内容都会出现在主程序（我无法控制）配置日志记录的任何地方（通常是 stderr）
*   其他所有内容（主要是调试消息）都进入日志文件

请注意，这里的关键问题是我不想修改全局日志记录设置，因为这些设置是由主应用程序控制的。否则我会在这里使用示例：

[http://docs.python.org/2/howto/logging-cookbook.html#logging-to-multiple-destinations](http://docs.python.org/2/howto/logging-cookbook.html#logging-to-multiple-destinations)

我试过这个：

```
logger = logging.getLogger('my_module')
logger.setLevel(logging.WARNING)
fh = logging.FileHandler('my_module.log')
fh.setLevel(logging.DEBUG)
logger.addHandler(fh) 
```

但后来我只在我的文件中收到警告消息。

如果我将上面的行替换为：

```
logger.setLevel(logging.DEBUG) 
```

然后我在 stderr 和我的文件中都收到调试消息。

然后我尝试了这个：

```
logger = logging.getLogger('my_module')
logger.setLevel(logging.DEBUG)
logger.addHandler(logging.NullHandler())
console = logging.StreamHandler()
console.setLevel(logging.WARNING)
logger.addHandler(console)
fh = logging.FileHandler('my_module.log')
fh.setLevel(logging.DEBUG)
logger.addHandler(fh) 
```

但再次没有运气。

那么我可以在不必调用 basicConfig() 或其他任何影响全局日志基础设施的情况下实现这一点吗？如果可能的话，我只想在这里修改我自己的模块。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:22:47.490

> *   任何等于或差于 WARNING 的内容都会出现在主程序（我无法控制）配置日志记录的任何地方（通常是 stderr）
> *   其他所有内容（主要是调试消息）都转到日志文件

如果不对祖先的处理程序设置警告级别，就无法使用单个记录器来执行此操作。从[文档](http://docs.python.org/2/library/logging.html#logging.Logger.propagate)：

> ```
> Logger.propagate 
> ```
> 
> 如果计算结果为 true，则日志消息将由此记录器及其子记录器传递给更高级别（祖先）记录器的处理程序。消息直接传递给祖先记录器的处理程序 - 既不考虑所讨论的祖先记录器的级别也不考虑过滤器。

* * *

> 您建议模块在这种情况下可以做什么？

一般来说，除了为记录器设置警告级别和添加之外`NullHandler()`，库代码根本不应该配置日志记录。

如果您希望主应用程序以一种简单的方式为您提供调试信息，请定义一个为您的库配置 DEBUG 级别日志记录的函数。

* * *

> 除了我想查看所有内容的文件之外，我不希望库是 DEBUG 的。

如果您无法控制主程序，那么您不应该创建调试文件作为使用 your_module 的副作用，除非明确要求这样做：

```
import your_module # in the main application

your_module.get_logger().log_to_file(filename) # without this line your module
                                               # shouldn't create debug files
...
your_module.some_function() 
```

* * *

> 我不确定这个记录器层次结构是如何工作的：我创建的记录器是应用程序配置的根记录器的子级？

`''`是一个根记录器。`'a.b'`是`'a'`logger 的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:40:28.513

尝试创建两个指向同一个文件的记录器。一个.ERROR 和一个.WARNING。从来没有用 Python 做过这个，但我不明白为什么它不起作用。只要您在写入后刷新流，它们就不会相互干扰，除非您正在运行协同例程，在这种情况下，您需要在某些锁等中进行编程。只要您的程序线性运行，您就不必担心。

# ruby-on-rails - Rails ActiveRecord after_initialize 和覆盖访问器方法

> ID：14363130
> 
> 赞同：1
> 
> 时间：2013-01-16T16:32:05.560
> 
> 标签：ruby-on-rails

这是我的代码示例：

```
class User < ActiveRecord::Base

  belongs_to :account

  after_initialize :setup_account

  def setup_account
    self.account = Account.new
  end

  def email=(email)
    self.account.email = email
    super(email)
  end

end 
```

现在，以下调用失败：

```
User.new(email: 'hello@example.com') 
```

因为这是在 setup_account 方法之前执行 email= 方法，其中将设置帐户变量。

您将如何更改此代码以按预期工作？我知道复制电子邮件是一件坏事，但它可能是别的东西，而不是简单的副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:13:33.793

您可以使用以下内容。它不使用任何回调，而是懒惰地创建一个帐户或返回一个现有的帐户。

```
class User < ActiveRecord::Base
  belongs_to :account, autosave: true

  # ...

  def user_account
    self.account ||= Account.new
  end

  def email=(email)
    user_account.email = email
    super
  end
end 
```

您还需要指定在`account`保存用户对象时要自动保存关联。否则，您必须在更新用户记录时手动执行此操作。

# apache - mod_rewrite 重写 example.com/page.php?v1=abc&v2=def 到 example.com/abc/def

> ID：14363132
> 
> 赞同：0
> 
> 时间：2013-01-16T16:32:09.650
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

使用`Apache`的`htaccess`文件，我正在尝试`rewrite`将 URL`http://example.com/page.php?v1=abc&v2=def`指向`http://example.com/abc/def`.

到目前为止，我有：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule case-study/(.*)/(.*)/(.*)/(.*)/$ /case-study.php?$1=$2&$3=$4 
```

但这似乎只是提供`page.php`URL 不变的实际文件。

有谁知道这样做的正确方法或上述可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:40:39.817

你倒过来了。您正在重写的内容首先出现，然后您将其更改为最后的内容。以下可能不准确，但应该接近您的需要：

`RewriteCond {%QUERY_STRING} ^v1=(.*)&`

`RewriteCond {%QUERY_STRING} v2=(.*)$`

`RewriteRule case-study.php /case-study/%1/%2/`

这是 RewriteRule 文档以获取更多详细信息：[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)

请注意，在规则和替换上使用前导斜杠将取决于您使用它的上下文（请参阅链接文档）。在上面的示例中，%1 和 %2 引用回第一个和第二个 RewriteCond 中的捕获组。这是描述该方法的页面：[mod_rewrite based on query string parameters](http://statichtml.com/2010/mod-rewrite-baseon-on-query-string.html)

# grails - Grails中绑定请求参数：BigDecimal精度损失

> ID：14363135
> 
> 赞同：1
> 
> 时间：2013-01-16T16:32:15.757
> 
> 标签：grails, bigdecimal

我在将请求参数绑定到域类中的 BigDecimal 字段时遇到了一些问题。

当我在持续时间字段中输入 25.75 时，数据被正确序列化，并且持续时间以正确的精度传递给请求中的控制器。

控制器动作：

```
def save() {
    // params.duration is 25.75 (debugged and printed to the console)
    def entry = new Entry(params)
    // entry.duration is now 25
    // the precision is lost..
    // 125.25 converts to 125
    // 1.75 converts to 1
    ...
} 
```

领域类：

```
class Entry {
    BigDecimal duration

    static constraints = {
        duration(min: 0.01G, max: 168.00G, scale: 2)
    }
} 
```

MySQL 数据库中的列类型为 DECIMAL(5,2)。

我错过了一些明显的东西吗？

**编辑：** 使用 Grails 2.2.0 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:14:36.247

您的语言环境/浏览器语言是什么？数字解析取决于语言环境。因此，如果您的语言环境的小数分隔符是“，”（逗号）而不是“。”，那么您将在数据绑定后获得整数（如您所述）。尝试将您的语言环境更改为“en”并再次检查。

# webkit - OGV 视频 - video.js 和 WebKit 浏览器的持续时间错误

> ID：14363140
> 
> 赞同：3
> 
> 时间：2013-01-16T16:32:33.220
> 
> 标签：webkit, video.js

一般来说，我上传的视频存在一个奇怪的问题，用于使用 video.js 和 WebKit 浏览器进行复制。我已经尝试过适用于 Windows 7 的最新版本的 Chrome 和适用于 Mac 的 Safari。

以下是视频：

[http://www.csdalbenga.it/videos/SonnyInterview.html](http://www.csdalbenga.it/videos/SonnyInterview.html)

[http://www.csdalbenga.it/videos/recita2012.html](http://www.csdalbenga.it/videos/recita2012.html)

它们工作正常，但它们的持续时间被列为实际播放时间的两倍。其他浏览器不会发生这种情况。如果您转发超过该栏的 50%，视频将变为空白或重新启动，具体取决于浏览器。

这不是服务器问题（因为这也发生在本地），也不是编码器问题。如果我使用默认的 HTML5 播放器而不是 video.js，则不会发生这种情况。

有人可以帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:15:12.643

如果您在[mediainfo](http://mediainfo.sourceforge.net/en)等工具中检查您的 mp4 文件，您会看到它的元数据报告其长度为 14mn 25s。尝试重新导出/重新转换它。由于 Chrome 和 Safari 可以播放 mp4，它们将播放此源。

```
Duration                                 : 14mn 25s 
```

其他浏览器不会受到影响，因为它们会使用其他格式之一。webm 和 ogv 视频的元数据是正确的：

```
Duration                                 : 7mn 12s 
```

# c++ - 全局对象和静态变量之间的破坏顺序是什么？

> ID：14363142
> 
> 赞同：5
> 
> 时间：2013-01-16T16:32:37.227
> 
> 标签：c++

> **可能重复：**
> [C++ 中的对象破坏](https://stackoverflow.com/questions/6403055/object-destruction-in-c)

假设我们有两个类，一个被调用`Array`，另一个被调用`MessageOnExit`。

假设`Array`该类有一个名为 的静态数据成员`counter`。

以下是课程：

```
class Array {
public:
    static int counter;
    Array(){counter++;}
    ~Array(){counter--;}
};

class MessageOnExit {
public:
    ~MessageOnExit(){cout << Array::counter;}
}; 
```

以下是使用这些类的**“主要” ：**

```
// static variable definition
int Array::counter;
// global object definition
MessageOnExit message;

void main() {
    Array a1, a2;
    Array a3(a1);
} 
```

前两个声明将更改为`counter`2，然后调用 Empty/Default 构造函数第三个声明不会更改，`counter`因为将调用 Default 复制构造函数。

现在当`main`执行完成时，静态成员的值`counter`将`-1`跟随析构函数调用（在 a1、a2 和 a3 被销毁之后），然后`message`将调用析构函数，打印该值（`-1`）。

我的问题是我们如何知道在调用析构函数`counter`时静态成员仍然存在并且可用。`message`

此外，如果我更改静态/全局对象/变量定义顺序，即`message`定义为 before `counter`，则值保持为`-1`。

总而言之，无论我做什么更改，当程序终止消息析构函数成功访问静态成员时`counter`，我不明白为什么会这样。据我了解，如果`message`首先定义全局对象，则其析构函数将最后调用，因此该`counter`值将不可用于其析构函数。

提前致谢！盖伊

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T16:50:04.057

标准第 3.8 节说：

> 类型对象的生命周期在以下情况下`T`结束：
> 
> *   如果 T 是具有非平凡析构函数（12.4）的类类型，则析构函数调用开始，或者
>     
>     
> *   对象占用的存储空间被重用或释放。

Now`int`不是类类型，并且由于`Array::counter`具有静态存储持续时间，因此它的存储永远不会被释放。所以生命周期`Array::counter`永无止境，你可以从任何你想要的析构函数中安全地访问它！

# php - PHP SoapClient 格式错误的 xml

> ID：14363147
> 
> 赞同：6
> 
> 时间：2013-01-16T16:32:46.500
> 
> 标签：php, soap

我正在使用 php 与 SOAP 中的 web 服务进行通信。这是我的代码：

```
$data = array('name' => 'test', 'age' => 20);
$WDSL = 'http://xxx.xxxxx.xxx/wdsl.ibs?wsdl';
$SOAP = new SoapClient($WDSL, array('trace' => true));
$RESULT = $SOAP->__soapCall('Some_Service', $data); 
```

由于某种原因，XML 是错误的：

```
<?xml version="1.0" encoding="UTF-8"?> <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:Some_Crap"><SOAP-ENV:Body><ns1:Some_Service/><param1>test</param1><param2>20</param2> ... 
```

当它应该是变量名时，为什么 XML 节点名是 paramX？我究竟做错了什么 ？？

谢谢

更新：所以我列出了该网络服务的功能，我得到的是：

```
Some_Service_Response Some_Service(Some_Service $parameters)) 
```

我改变了我的电话，所以现在是：

```
$SOAP->__call('Some_Service', array('Some_Service', $data)); 
```

而且 XML 仍然是错误的：

```
<?xml version="1.0" encoding="UTF-8"?> <SOAP-ENV:Envelope xmlns:SOAP-ENV="
http://schemas.xmlsoap.org/soap/envelope/"
xmlns:ns1="urn:iwaysoftware:ibse:jul2003:HR_Master"><SOAP-ENV:Body><ns1:Some_Service/>
<param1><item><key>SomeKey</key><value>SomeValue</value> .... 
```

我仍然得到 `<param1><item><key>SomeKey</key><value>SomeValue</value> instead of <Somekey>SomeValue</Somekey>`

所以问题是，Web 服务是不能正常工作还是在我这边？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T16:36:17.027

该类`SoapClient`根据服务的 WSDL 进行了许多更正，例如删除无效标签。检查 WSDL，它可能包含参数的名称是`param1`和`param2`。

调用`SoapClient::__getFunctions()`和`SoapClient::__getTypes()`转储结果可以很好地总结 PHP 从您的 WSDL 中理解的内容。

* * *

（在 OP 更新后，输出的问题`SoapClient::__getFunctions()`是：

```
Some_Service_Response Some_Service(Some_Service $parameters)) 
```

)

通常数组键是参数名称，而不是类型。所以我的第一个猜测是：

```
$SOAP->__call('Some_Service', array('parameters', $data)); 
```

问题可能出在服务器端。WSDL 不兼容有时需要手动调整 WSDL 文件，以便 PHP 发出您想要的相同 XML。

但在进行任何黑客攻击之前（如果有机会） ，请**务必在没有 PHP 的情况下试用该服务，**以查看该服务对不同 XML 文件的反应。一个名为[SoapUI](http://www.soapui.org/)的好程序可以为您执行此操作，它会自动生成 XML 存根进行测试。（我只遇到了需要数字签名的 Web 服务的 SoapUI 问题。）

根据 XML 测试的结果，您可能需要：

*   手动调整 WSDL
*   手动生成 XML 文件并将其发送到 Web 服务器（最后的手段）
*   如果 XML 几乎是正确的，它只需要一个小的微调，您也可以从`SoapClient`类派生并覆盖该`SoapClient::__doRequest`方法以在提交到服务器之前对 XML 文件进行字符串操作（通过调用`__dorequest`基类的）。例如，当 Web 服务需要在某些标签上重新发送某些 XML 属性时，我使用了此解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T17:31:24.593

如果我是你，我会尝试以对象格式设置 $data。

```
$data = array('name' => 'test', 'age' => 20); 
```

**例如：**

```
$data = null;
$data->name = "test";
$data->age = 20;

$RESULT = $SOAP->__soapCall('Some_Service', $data); 
```

# c - 如何将执行程序的标准输出重定向到 FCGI_stdout？

> ID：14363150
> 
> 赞同：0
> 
> 时间：2013-01-16T16:32:51.360
> 
> 标签：c, git, exec, fastcgi

我正在构建一个基于 libfcgi 的 fastcgi 应用程序，以在 git 中提供“智能 HTTP”传输。为此，我目前需要 fork 并执行 git-upload-pack 程序。唯一的问题是 libfcgi 用特殊的 FCGI 文件描述符替换了 STDOUT 和 STDERR，而 git 不知道这些。我希望能够在父进程中捕获 git 程序（stdout 和 stderr）的输出，以便将其发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:09:49.247

在调用 fork() 和调用 exec() 之前，请执行以下操作：在 fds 1 和 2（即 stdout 和 stderr）上调用 close()，然后调用 dup2() 分配 STDOUT 的 fds 和 libfcgi 新 fds 的 STDERR : 1 和 2。然后你可以关闭 STDOUT 和 STDERR 的原始 fds（它们将只对执行的 git 程序关闭，但仍会在你的 main 中打开）。

这应该将 git 的输出重新分配给 libfcgi 流。如果您想手动读取流并自己发送数据，您可以使用 pipe() 调用来创建一对 fd，以便 git 可以写入其中一个，而您可以从另一个读取。或者只使用可以为您执行此操作的 popen()（但它不会让您使用 stderr）

# windows - 在 Microsoft Windows 上向大容量存储设备发送自定义命令

> ID：14363152
> 
> 赞同：0
> 
> 时间：2013-01-16T16:32:52.500
> 
> 标签：windows, usb, hid, usb-drive, usb-mass-storage

我开发了一个大容量存储设备，我想要一个 PC 应用程序来向它发送/接收一些自定义命令。通常会为此创建一个复合 USB 设备 (MSC+HID) 并通过 HID 发送命令。但是仅使用大容量存储类可以做到这一点吗？我想到的一些事情：

*   在未使用的 SCSI 命令中发送数据（Vista 需要管理员权限）
*   将数据写入“魔术”扇区，并在设备注意到特定扇区也被写入后立即在设备上对其进行解析（某些 Windows 版本不允许原始磁盘访问）
*   通过将数据放在磁盘上的 .txt 文件中发送数据（非常复杂，因为设备需要解析 FAT 表才能读取文件，并且无法在 .txt 文件更新时收到通知）

有人能想到任何其他可以为此目的工作的黑客吗？或者是创建 HID 设备的唯一选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:43:35.967

你提到的MSC也是“USB”大容量存储设备？

如果是，那么您可以使用 SCSI_PATH_THROUGH 与此 USB MSC 进行通信！

前任。向 USB MSC 发出写入命令可以通过以下代码片段实现：

```
BOOL LogicalWriteCmd(HANDLE fileHandle,ULONG LBA,ULONG SectorCnt,PVOID DataBuffer)
{
    SCSI_PASS_THROUGH_DIRECT_WITH_BUFFER  sptdwb;
    ULONG returned,length;
    BOOL status;

    ZeroMemory(&sptdwb, sizeof(SCSI_PASS_THROUGH_DIRECT_WITH_BUFFER));    

    length = SectorCnt<<SECTOR_SIZE_SHIFT_BIT;

    sptdwb.sptd.Length = sizeof(SCSI_PASS_THROUGH_DIRECT);
    sptdwb.sptd.PathId = 0;
    sptdwb.sptd.TargetId = 0;
    sptdwb.sptd.Lun = 0;
    sptdwb.sptd.CdbLength = CDB10GENERIC_LENGTH;
    sptdwb.sptd.DataIn = SCSI_IOCTL_DATA_OUT;
    sptdwb.sptd.SenseInfoLength = SPT_SENSE_LENGTH;
    sptdwb.sptd.DataTransferLength = length;
    sptdwb.sptd.TimeOutValue = g_ulTimeOut;
    sptdwb.sptd.DataBuffer = DataBuffer;
    sptdwb.sptd.SenseInfoOffset =
       offsetof(SCSI_PASS_THROUGH_DIRECT_WITH_BUFFER,ucSenseBuf);
    sptdwb.sptd.Cdb[0] = SCSIOP_WRITE;

    sptdwb.sptd.Cdb[2] = (UCHAR)(LBA>>24);
    sptdwb.sptd.Cdb[3] = (UCHAR)(LBA>>16);
    sptdwb.sptd.Cdb[4] = (UCHAR)(LBA>>8);
    sptdwb.sptd.Cdb[5] = (UCHAR)(LBA);

    sptdwb.sptd.Cdb[7] = SectorCnt>>8;    
    sptdwb.sptd.Cdb[8] = (UCHAR)SectorCnt;

    length = sizeof(SCSI_PASS_THROUGH_DIRECT_WITH_BUFFER);
    status = DeviceIoControl(fileHandle,
                             IOCTL_SCSI_PASS_THROUGH_DIRECT,
                             &sptdwb,
                             length,
                             &sptdwb,
                             length,
                             &returned,
                             FALSE);

    if ((sptdwb.sptd.ScsiStatus == 0) && (status != 0)) {       
        return TRUE;
    }

    return FALSE;

} 
```

您可以创建自己的供应商/自定义命令，然后通过上述方式将其发送到 USB MSC。但是您的设备应该正确识别它们！

# python - `_ast` 中导入函数的名称

> ID：14363158
> 
> 赞同：1
> 
> 时间：2013-01-16T16:33:29.360
> 
> 标签：python, import, abstract-syntax-tree

我正在`_ast`做一些代码分析，但在获取导入函数的名称时遇到了问题。
假设我的代码文件 ( `code.py`) 如下所示：

```
import somemod
def foo():
    somemod.bar() 
```

当我得到这个文件的 ast 时`root = compile(open('codefile.py').read(), 'codefile.py', 'exec', _ast.PyCF_ONLY_AST)`，我可以得到这样的行调用`somemod.bar`：

```
root.body[1].body[0] 
```

这是一个`_ast.Expr`节点。
然后我希望能够`somemod.bar`通过查看这个节点来获得。但是，当我查看 时`root.body[1].body[0].value.func.value.id`，我得到了`somemod`。据我所知，我找不到获得`bar`或`somemod.bar`

我错过了什么？我怎样才能到达`bar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:07:44.890

它在`value.func.attr`：

```
>>> root = compile(open('codefile.py').read(), 'codefile.py', 'exec', _ast.PyCF_ONLY_AST)
>>> root.body[1].body[0].value.func
<_ast.Attribute object at 0x9703acc>
>>> f = root.body[1].body[0].value.func
>>> vars(f)
{'col_offset': 4, 'ctx': <_ast.Load object at 0xb6e2c6cc>, 'attr': 'bar', 'value': <_ast.Name object at 0x9703a8c>, 'lineno': 3}
>>> f.attr
'bar'
>>> f.value.id
'somemod' 
```

# c++ - 主类不能从我的第二类继承方法

> ID：14363160
> 
> 赞同：0
> 
> 时间：2013-01-16T16:33:38.407
> 
> 标签：c++, class, memory, inheritance, methods

我的主要课程如下所示：

```
#include "stdafx.h"
using namespace std;

class MemoryAddressing : Memory {
    int _tmain(int argc, _TCHAR* argv[])
    {
        Memory mem;
        int hp = Memory.ReadOffset(0x000000);
    }
} 
```

然后我有我的第二节课：

```
#include <windows.h>
#include <iostream>

using namespace std;

static class Memory {
public : static int ReadOffset(DWORD offset) {
    DWORD address = 0x000000;
    DWORD pid;
    HWND hwnd;
    int value = 0;

    hwnd = FindWindow(NULL, L"");

    if(!hwnd) {
        cout << "error 01: Client not found, exiting...\n";
        Sleep(2000);
    }else {
        GetWindowThreadProcessId(hwnd, &pid);
        HANDLE handle = OpenProcess(PROCESS_VM_READ, 0, pid);
        if(!handle) {
            cout << "error 02: no permissions to read process";
        }
        else {
            ReadProcessMemory(handle, (void*) offset, &value,     sizeof(value), 0);
        }
    }
}
}; 
```

很明显，我正在尝试`ReadOffset`从我的`Memory`班级继承我班级的方法`MemoryAddressing`。我不知道该怎么做，似乎班级无法交流。

我已经知道 Java 和 C#，但我认为 C++ 非常不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:38:14.633

没有这样的概念`static class`

并且类的默认继承是私有的。私有继承意味着关系对类的用户是隐藏的。很少使用它，但有点像聚合，意味着“在面向对象级别上实现”，而不是“是一种类型”。

并且不建议调用方法_tmain，但是您要做什么？覆盖主要？（或者您正在尝试复制 Java，其中类具有静态主要方法以使其可作为入口点运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:53:44.807

在 C++`static class`中不起作用。您的继承语法也已关闭：

```
class MemoryAddressing : Memory { 
```

应该

```
class MemoryAddressing : public Memory { 
```

`:`在 C++ 中，类在in 继承之后需要一个访问修饰符。如果没有提供，则默认为`private`. [以下是C++ 教程中关于继承的章节](http://www.cplusplus.com/doc/tutorial/inheritance/)的摘录：

```
In order to derive a class from another, we use a colon (:) in the declaration of the    
derived class using the following format:

class derived_class_name: public base_class_name
{ /*...*/ };

Where derived_class_name is the name of the derived class and base_class_name is the   
name of the class on which it is based. The public access specifier may be replaced by  
any one of the other access specifiers protected and private. This access specifier   
describes the minimum access level for the members that are inherited from the base   
class. 
```

因此，如果没有修饰符，则只会继承私有成员。但是，由于不能从派生类访问私有成员，所以本质`class A : private B`上不会导致继承发生。

# java - 无法通过 Rserve 找到函数，但它在 R 中可见

> ID：14363161
> 
> 赞同：0
> 
> 时间：2013-01-16T16:33:39.687
> 
> 标签：java, r, rserve

我正在尝试使用 Java 客户端进行服务。我在 R 中定义了一个函数，如下所示：

```
bar <- function(x) { x+1 } 
```

在 R 中执行这个会给出以下（预期的）输出：

```
> bar(1)
[1] 2 
```

但是，执行以下 Java 代码：

```
public static void main(String[] args) throws REXPMismatchException, REngineException {
  RConnection c = new RConnection();
  REXP x = c.eval("try({bar(1)}, silent=TRUE)");
  System.out.println(x.asString());

} 
```

给出以下输出：

```
Error in try({ : could not find function "bar" 
```

在 R 控制台内，输出以下消息：

```
> Error: could not find function "bar" 
```

我需要做些什么来使我的功能对 Rserve 可见吗？

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T17:32:22.840

您正在不同的工作区/流程中定义您的功能。Rserve 和 R 不共享相同的进程空间，因此将您的方法声明为一个不会使其出现在 Rserve 工作区中。

```
public static void main(String[] args) throws REXPMismatchException, REngineException {
  RConnection c = new RConnection();
  REXP x = c.eval("try({bar <- function(x) { x+1 }; bar(1)}, silent=TRUE)");
  System.out.println(x.asString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T13:48:50.740

我有类似的问题，您需要将 R 代码存储在 Rserve 启动时调用的文件中（在同一进程中），要采取的步骤：

1.  使用您的 R 代码（函数等...）创建文件并将其命名为例如**filename.R**

2.  创建**Rserv.conf**文件并粘贴到那里

    带有 R 代码/文件名.R 的文件的源/路径

3.  使用命令运行 R serve

    Rserve(debug = TRUE, args='--no-save --RS-conf /Rserv 文件的路径/Rserv.conf')

它应该工作......

# c# - 将拖动行为添加到 FormBorderStyle 设置为 None 的表单

> ID：14363162
> 
> 赞同：0
> 
> 时间：2013-01-16T16:33:41.283
> 
> 标签：c#, .net, winforms, drag-and-drop

> **可能重复：**
> [C# - 使无边界表单可移动？](https://stackoverflow.com/questions/1592876/c-sharp-make-a-borderless-form-movable)

如果我将表单设置`FormBorderStyle`为`None`，我将失去表单的拖动行为，正如预期的那样。

我在表单顶部添加了一个自定义栏，我希望它保持这种状态，现在是否可以将表单保持在这种模式下并具有（或写入）拖动行为？

如果可能的话，我该怎么做。我真的希望找到一个**是的，这是可能的答案。**:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:36:12.383

```
private const Int32 WM_NCHITTEST = 0x84;
private const Int32 HTCLIENT = 0x1;
private const Int32 HTCAPTION = 0x2;

protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_NCHITTEST)
    {
        base.WndProc(ref m);

        if ((Int32)m.Result == HTCLIENT)
            m.Result = (IntPtr)HTCAPTION;

        return;
    }

    base.WndProc(ref m);
} 
```

# php - 使用 id 属性将数据传递给 php 有意义吗？

> ID：14363163
> 
> 赞同：2
> 
> 时间：2013-01-16T16:33:45.170
> 
> 标签：php, javascript, jquery, html, ajax

我正在创建一个可点击的日历，其中每个单元格都可以标记为“绿色”或“红色”。这应该记录在数据库中。我想过动态地为每个人分配`<td>`一个信息丰富的 id，例如

```
<td id="1-2013-16-1" class="green">16</td> 
```

然后使用 jQuery 获取 id 并使用 ajax 将其发送到 php，对于已单击的每个单元格。

这是可能的并且有效，但有些事情告诉我 id 不是为此而设计的。这是识别需要为每个单元发送的信息的合理方法吗？或者，有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T16:36:38.877

使用 HTML5 自定义数据属性：

```
<td data-date="1-2013-16-1" class="green">16</td> 
```

要使用 jQuery 获取值：

```
$('td').attr('data-date'); 
```

您可以设置任意数量的`data-*`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:37:41.827

我认为在这里使用 id 字段是合适的，因为它实际上是一个 id ;) 可以将其提交给 PHP，然后更新数据库中的某些内容。您可以使用任何其他自定义属性，但我认为 id 非常适合这里。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T16:37:05.523

这是一个不错的方法，但请确保您正在检查您在 PHP 中收到的 id，因为有人可以以 id 为幌子将任何他们想要的东西发送到您的服务器。

# jenkins - getAllItems() 在 Jenkins 中返回一个空列表

> ID：14363166
> 
> 赞同：2
> 
> 时间：2013-01-16T16:33:50.497
> 
> 标签：jenkins, hudson, jenkins-plugins

我需要在 Jenkins 中获取所有 MavenModuleSet 对象，我的代码是：

```
List<MavenModuleSet> list = Jenkins.getInstance().getAllItems(MavenModuleSet.class); 
```

当我在本地机器上运行它（在 Jenkins 插件中）时，列表包含所有项目，在服务器上列表为空。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:44:55.410

经过几次测试，我可以确认问题与用户“匿名”的权限有关。该插件由匿名用户运行，我修改了 Jenkins“基于矩阵的安全性”，以授予用户对作业的 CRUD 授权。

# php - Yii::app()->baseUrl 不工作

> ID：14363170
> 
> 赞同：2
> 
> 时间：2013-01-16T16:34:00.923
> 
> 标签：php, yii

为什么

```
<a id="tray-button"><img id="tray-arrow" src="http://localhost/ric/slideshow/img/button-tray-up.png"/></a> 
```

正在工作，但不是这个

```
<a id="tray-button"><img id="tray-arrow" src=<?php Yii::app()->baseUrl.'/slideshow/img/button-tray-up.png'?>/></a> 
```

提供`http://localhost/ric`-> 是我的 webroot。

这是我的 main.php 中的基本路径配置

```
'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..', 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:38:02.150

您需要“回显” baseUrl

```
<a id="tray-button">
  <img id="tray-arrow" src="<?php echo Yii::app()->baseUrl; ?>/slideshow/img/button-tray-up.png" />
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T18:29:23.693

奇迹般有效！我一直在到处寻找这段代码。我知道“回声”位，但我不知道要使用哪个功能。我的代码现在读取

```
< img src="< ?php echo Yii::app()->baseUrl; ?>/images/MyPicture.jpg" alt="MyPicture logo" /> 
```

# c++ - 使用 unique_ptr 作为抽象基类中的私有成员

> ID：14363172
> 
> 赞同：3
> 
> 时间：2013-01-16T16:34:06.570
> 
> 标签：c++

我对 C++（但不是 C 或 OOP）相当陌生，但我正在尝试以“正确”的方式做事并避免任何不良和/或危险的习惯，因此我使用 Google 的 C++ 编码指南和有效的 C++ 作为我学习的起点。

我有一个`unique_ptr`作为成员的抽象基类。如果我将其设为私有并且仅通过 getter 提供对派生类的访问（根据 Google C++ 样式指南），这是最好的方法吗？还是我在这里错过了一个潜在的陷阱？

**基数.h：**

```
#include "Document.h"

typedef std::unique_ptr<Document> pDOC;

class Base {
public:
    Base();
    virtual ~Base() = 0;

    pDOC& GetDoc();

private:
    // Unique pointers cannot be shared, so don't allow copying
    Base(Base const &); // not supported
    Base &operator=(Base const &); // not supported
    pDOC m_doc;
}; 
```

**基数.cpp**

```
#include "base.h"

Base::Base()
: m_xmldoc(new Document) {}

// Class destructor (no need to delete m_doc since it is a smart pointer)
Base::~Base() {}

pDOC& Base::GetDoc() {
    return m_doc;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:44:25.103

首先，调用它`upDoc`而不是`pDOC`--`unique_ptr`非常奇怪，以至于您需要一些指示，表明该类型不仅仅是一个指针。（有一种强烈的趋势是将指针类型定义为以小写 p 开头，因此很多人可能会被您的使用弄糊涂）。

其次，`GetDoc`如果它仅用于派生类，则`protected`不应`public`。

第三，我会质疑完全公开`unique_ptr`对所有孩子的引用。责任是`Base`什么？它管理的生命周期`m_doc`？如果是这样，请公开 a`Document*`而不是`upDoc`(`return m_doc.get();`而不是`return m_doc;`)

如果`Base`只是持有一个`m_doc`而不管理它的生命周期，那么它为什么存在呢？它不提供公共接口，并且几乎没有提供任何功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:06:58.280

> 如果我将其设为私有并且仅通过 getter 提供对派生类的访问

然后，您将进行额外的输入以获得与直接提供公共/受保护成员相同的效果。诚然，您可以向访问器添加代码并设置断点，但这并不会改变您通过提供对内部结构的直接访问来破坏封装的事实。

换句话说，没有什么可以阻止该类型的用户执行`obj.GetDoc().release()`和破坏您可能为您的类型拥有的不变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-14T15:05:49.893

另一种选择是公开对由 管理的对象的引用`std::unique_ptr`，例如：

```
 const Document& getDocument() const { return *m_doc; }
    Document& getMutableDocument() { return *m_doc; } 
```

这是 Jonas Devlieghere 建议的[一种](https://jonasdevlieghere.com/containers-of-unique-pointers/)可能的方法来公开“唯一指针的容器”，因为他认为“ *[b] 通过返回引用而不是指针，您清楚地表明调用者不负责管理 [指向的对象]的生命周期。* ”

# java - Java Hibernate 选择计数与其他列

> ID：14363174
> 
> 赞同：1
> 
> 时间：2013-01-16T16:34:18.393
> 
> 标签：java, hibernate, hql

我的 HQL 代码：

```
select count(products.id) ,products.id, products.productDescription, p.products.productFileName
    from Polls as p
    group by products.id
    order by count(products.id) desc 
```

此查询返回

```
Coloumn 1 | Column 2 | Column 3 | Column 4
3         | 2        | Product1 | ProductFilename1
2         | 1        | Product2 | ProductFilename2 
```

我希望将它们放在一个列表中，然后在 jsp 页面中显示它们。

**我的问题是**：我是否需要创建新类，以便我可以映射字段，因为仅针对此查询的计数？请问有什么帮助吗？

我的课程是：

```
public class Polls  implements java.io.Serializable {

    private Integer id;
    private Products products;
    private Users users;
    private Date voteDate;

    public Polls() {
    }

    public Polls(Products products, Users users, Date voteDate) {
       this.products = products;
       this.users = users;
       this.voteDate = voteDate;
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }
    public Products getProducts() {
        return this.products;
    }

    public void setProducts(Products products) {
        this.products = products;
    }
    public Users getUsers() {
        return this.users;
    }

    public void setUsers(Users users) {
        this.users = users;
    }
    public Date getVoteDate() {
        return this.voteDate;
    }

    public void setVoteDate(Date voteDate) {
        this.voteDate = voteDate;
    }
} 
```

产品类别：

```
public class Products  implements java.io.Serializable {

    private Integer id;
    private String productDescription;
    private String productFileName;
    private Set pollses = new HashSet(0);

    public Products() {
    }

    public Products(String productDescription) {
        this.productDescription = productDescription;
    }

    public Products(String productDescription, String productFileName, Set pollses) {
       this.productDescription = productDescription;
       this.productFileName = productFileName;
       this.pollses = pollses;
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }
    public String getProductDescription() {
        return this.productDescription;
    }

    public void setProductDescription(String productDescription) {
        this.productDescription = productDescription;
    }
    public String getProductFileName() {
        return this.productFileName;
    }

    public void setProductFileName(String productFileName) {
        this.productFileName = productFileName;
    }
    public Set getPollses() {
        return this.pollses;
    }

    public void setPollses(Set pollses) {
        this.pollses = pollses;
    }
} 
```

我正在尝试使用增强的 for 循环显示列表，如下所示：

```
<%
List<Object[]> myGadgets = new GadgetsRepository().getGadgetDescVotes();
for (Object p : myGadgets) {%>
    <div class="gadgetItem">
        <div><%=p[0]%>&nbsp;</div>//this don't work
    </div>
<%  }%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:03:58.513

不一定，尽管创建一个新对象会更干净并且更容易使用。除非你包装它，否则你的查询应该返回一个[`List<Object[]>`](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-select). 因此，要呈现表格，您只需遍历该集合即可。但是，如果您需要使用特定项目作为基础类型，则需要强制转换它。

我不确定你使用的是什么框架，但是这样的东西可以在纯 jsp 中工作：

```
<c:forEach value="${collection}" var="item">
  <c:out value="${item[0]}" />
</c:forEach> 
```

使用增强的 for 循环，您可以执行以下操作：

```
for(Object[] c : resultSet) {
   //work with c[0], c[1], etc...
} 
```

如果您确实创建了一个包装器对象，您将拥有记录显示内容的字段名称的优势，并且您还将获得基础字段的类型信息（而不是必须从 强制转换`Object`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:26:09.893

1.  你不需要做任何事情。该查询返回可以使用 vanilla JSP 显示的数组列表。唯一的缺点是您需要通过索引而不是名称（row[0]、row[1] 等）来访问字段。

2.  将新对象映射到查询结果将是对 Hibernate 的主要误用，并且可能会适得其反（当同一行可以被不同的对象修改时）。

3.  不要一直被迫使用 ORM 映射器。证据表明您需要一个普通的 SQL 查询。在您的示例中，您并没有真正操作对象，而是将关系数据查询到报告中。只需抓住 Connection 对象（最好使用 doWork 方法并使用 Work 对象内部的连接），进行普通查询。

4.  如果您真的讨厌 SQL，请使用构造函数创建一个简单的对象（可能是不可变的），该构造函数获取您需要的所有列和相关的 getter。不要映射对象，而是将您的 HQL 更改为：

```
 select new MyAggregatedPollRow(count(products.id) ,products.id, products.productDescription, p.products.productFileName) from Polls as p
       group by products.id
       order by count(products.id) desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:37:48.333

充分利用 hibernate 为您的表编写方法带来的便利。

你可以：

将 HQL 拆分为 3 个方法，每个方法中都有一个查询，以获取您感兴趣的表的计数。

制作一个方法，该方法采用通用对象并获取实体的计数，然后将其重用于您认为合适的任何实体。

# ruby-on-rails - 需要编程方法来检测 has_many 和 has_one 关系

> ID：14363176
> 
> 赞同：4
> 
> 时间：2013-01-16T16:34:25.077
> 
> 标签：ruby-on-rails, rails-activerecord

我希望能够检测 ActiveRecord 模型对象上是否存在 [has_one, has_many, belongs_to] 关系集。换句话说，我希望能够从模型中的 ruby​​ 代码中检测它是否定义了上述关系之一。

除了模型属性的蛮力搜索之外，还有什么聪明的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T16:47:58.953

看看 Rails 的[ActiveRecord::Reflection 方法](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html)来获得你想要的东西。

`Model.reflections`将返回以关联名称为键的模型关联的哈希值。 `Model.reflect_on_all_associations`将返回这些关联的数组，省略命名键。

因此，您可以执行以下操作：

```
Post.reflections.keys  # => [:comments, :author]
Post.reflections[:comments].marco  # => :has_many
Post.reflections[:author].macro    # => :belongs_to
# etc etc 
```

看看从这些方法返回的数据，你应该能够弄清楚如何做你想做的事。

# git - git：两个独立分支的区别

> ID：14363186
> 
> 赞同：1
> 
> 时间：2013-01-16T16:34:45.773
> 
> 标签：git, diff

我想对两个不同分支中的所有文件进行比较。假设一个项目有 100 个文件，并且有两个团队在两个独立的分支上工作。在某些时候，我想知道两个分支有多少不同。我怎样才能做到这一点？有没有办法以图形方式可视化差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:37:42.827

你可以只使用`git diff <branchone> <branchtwo>`.

如果您设置`diff.tool`配置选项，您提供的工具名称将用于图形差异。

# java - Postfix 与 Apache James

> ID：14363188
> 
> 赞同：4
> 
> 时间：2013-01-16T16:34:49.673
> 
> 标签：java, postfix-mta, james

两者有区别吗？他们执行相同的任务吗？

我有点困惑，因为我对电子邮件服务器不太熟悉，但我正在尝试构建一个主要用于发送交易电子邮件的服务器，`Java`并且关于`Apache James`. 目前我确实让它运行正常，但我遇到了`DKIM`正常工作的问题，挫败感让我考虑改变。

那么……是`Postfix`合适的`Apache James`替代品吗？`Postfix`除了发送电子邮件之外，我还需要什么`Java`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:39:40.227

我上次尝试`Apache James`是大约 5 年前。那个时候，`Postfix`比……成熟多了，稳定多了`Apache James`。`James`但是，从那以后，情况似乎有了很大的改善。

对我来说，`DKIM`你有问题，它与邮件服务器无关。在发送之前正确签署电子邮件完全是一项客户任务`DK/DKIM`。回答您的其他问题，您将需要`JavaMail`在您的类路径中（实际上是`mail.jar`, `smtp.jar`）`activation.jar`从`Java`.

# php - 重写规则删除

> ID：14363191
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:35:08.943
> 
> 标签：php, mod-rewrite, smarty

我想删除这个 htaccess 规则：

```
RewriteRule ^resendconfirmation/(.*) resendconfirmation.php?userid=$1 
```

`resendconfirmation`在整个代码中只出现一次：

```
<a href="{$baseurl}/resendconfirmation/{$smarty.session.USERID}">resend confirmation</a> 
```

你知道我应该如何更改后面的 HTML 代码以便删除 htaccess 规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:45:51.977

我会假设通过更改`href`为：

```
<a href="{$baseurl}/resendconfirmation.php?userid={$smarty.session.USERID}">re... 
```

# java - java中模式更新的编程方法

> ID：14363193
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:35:10.873
> 
> 标签：java, design-patterns, database-schema

我们应用架构更新的方式是这样的：

*   将每个 SQL 包装成一个字符串
*   创建一个更新对象，它接受 SQL、版本 ID 和另一个字符串“更新原因”
*   假设我们有 100 个更新，每一个都将被创建，并保存到一个列表中
*   然后循环遍历列表，将版本 id 与保存在数据库中的当前版本 id 进行比较，只有当它高于当前版本时才会应用更新。

问题是我们在这个类中有超过 4000 行代码。

大多数更新都是几年前完成的，我讨厌每次都加载它们

在java中有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:42:18.233

有很多工具可以做到这一点。看了一堆之后，我最终选择了[Liquibase](http://www.liquibase.org)。更改存储在文件中，顺便说一句，这些文件也可以进行版本控制，如果您使用的是 github 或 bitbucket，人们会在进入时看到它们，并可以发表评论等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:37:05.087

您可以将 sql 放入文件而不是 java 代码中。sql 文件的文件命名策略可以将版本和更新原因作为文件名的一部分，或者您可以将原因放在文件中。代码将遍历目录中的文件并将它们添加到列表中，然后像往常一样处理。

# jquery - 结合多个事件函数jQuery

> ID：14363197
> 
> 赞同：-2
> 
> 时间：2013-01-16T16:35:18.487
> 
> 标签：jquery

请原谅我不那么先进的方法，但我正在寻找将多个功能组合为一个的最佳方法。这是我的代码。基本上，我有 6 个步骤一页请求 6 个不同的 Ajax 调用。奇怪的是，奇怪的是，当您从页面底部开始向上工作时，它们会起作用，但是从页面顶部向下开始，事件不起作用。有什么建议么？谢谢！

的HTML：

```
 <!--   Expanding Block 1     -->
<div class="row span10 center clearfix">  <a href="http://diyshedsupply.com/step-1-tab/"  class="show_hide btn btn-primary pull-right">+ -</a><div class="pull-right"> <strong> Specs and Details &nbsp; </strong></div><br />
</div>
<div class="row span10 center slidingDiv">

<div class="row span9 center clearfix">

<div id="ajax-content">Default Content</div>
</div>
</div>
<!--   Expanding Block      -->   

 <!--   Expanding Block  2     -->
<div class="row span10 center clearfix">  <a href="http://diyshedsupply.com/step-2-tab/"  class="show_hide2 btn btn-primary pull-right">+ -</a><div class="pull-right"> <strong> Specs and Details &nbsp; </strong></div><br />
</div>
<div class="row span10 center slidingDiv2">

<div class="row span9 center clearfix">

<div id="ajax-content2">Default Content</div>

</div>
</div>
<!--   Expanding Block      --> 

ect... 
```

JavaScript：

```
// Load Ajax Content Step 1 //

     $('.slidingDiv').hide();
     $('.show_hide').show();
     $('.show_hide').click(function () {
         $('.slidingDiv').slideToggle(1600, function () {
             $('.show_hide').addClass('close-tabs');
             /* do anything after animation is complete */
             $('ul.tabs').each(function (e) {
                 var $active, $content, $links = $(this).find('a');
                 // If the location.hash matches one of the links, use that as the active tab.
                 // If no match is found, use the first link as the initial active tab.
                 $active = $($links.filter('[href="' + location.hash + '"]')[0] || $links[0]);
                 $active.addClass('active1');
                 $content = $($active.attr('href'));
                 // Hide the remaining content
                 $links.not($active).each(function () {
                     $($(this).attr('href')).hide();
                 });
                 // Bind the click event handler
                 $(this).on('click', 'a', function (e) {
                     // Make the old tab inactive.
                     $active.removeClass('active1');
                     $content.hide();
                     // Update the variables with the new link and content
                     $active = $(this);
                     $content = $($(this).attr('href'));
                     // Make the tab active.
                     $active.addClass('active1');
                     $content.show();
                     // Prevent the anchor's default click action
                     e.preventDefault();
                 });
             });
         });
         $('#ajax-content').empty().append("<div class='loading'><img src='/wp-content/themes/diy/img/ajax-loader.gif' alt='Loading' /></div>");
         $('.show_hide a').removeClass('current');
         $(this).addClass('current');
         $.ajax({
             url: this.href,
             success: function (html) {
                 $("#ajax-content").empty().append(html);
             }
         });
         return false;
     });

// Load Ajax Content Step 2 //

     $('.slidingDiv2').hide();
     $('.show_hide2').show();
     $('.show_hide2').click(function () {
         $('.slidingDiv2').slideToggle(1600, function () {
             $('.show_hide2').addClass('close-tabs');
             /* do anything after animation is complete */
             $('ul.tabs2').each(function (e) {
                 var $active, $content, $links = $(this).find('a');
                 // If the location.hash matches one of the links, use that as the active tab.
                 // If no match is found, use the first link as the initial active tab.
                 $active = $($links.filter('[href="' + location.hash + '"]')[0] || $links[0]);
                 $active.addClass('active2');
                 $content = $($active.attr('href'));
                 // Hide the remaining content
                 $links.not($active).each(function () {
                     $($(this).attr('href')).hide();
                 });
                 // Bind the click event handler
                 $(this).on('click', 'a', function (e) {
                     // Make the old tab inactive.
                     $active.removeClass('active2');
                     $content.hide();
                     // Update the variables with the new link and content
                     $active = $(this);
                     $content = $($(this).attr('href'));
                     // Make the tab active.
                     $active.addClass('active2');
                     $content.show();
                     // Prevent the anchor's default click action
                     e.preventDefault();
                 });
             });
         });
         $('#ajax-content2').empty().append("<div class='loading'><img src='/wp-content/themes/diy/img/ajax-loader.gif' alt='Loading' /></div>");
         $('.show_hide2 a').removeClass('current');
         $(this).addClass('current');
         $.ajax({
             url: this.href,
             success: function (html) {
                 $("#ajax-content2").empty().append(html);
             }
         });
         return false;
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:53:03.863

首先，在我看来，第一个问题是信息的冗余。您需要某种独特的函数来与您的不同参数一起使用，也许通过绑定传递给事件的通用函数可能是一个答案。

其次，由于步骤几乎相同，为什么不考虑使用一些数组来迭代只包含对 ID、类等的引用？通过这种方式，您可以将所有内容简化为某个数组上的一些简单`for`循环，该数组将参数传递给绑定的回调。

**编辑：**

您可以为事件使用`event.data` [可选对象](http://api.jquery.com/event.data/)（因为您使用的是 jQuery）。当然，这只是一个你必须改进的想法：

```
var NUM_OF_SECTIONS = 6;

function mySlidingFunc( event ) {
  $('.slidingDiv' + event.data.id).slideToggle( 1600, function () {
     $('.show_hide' + event.data.id).addClass('close-tabs');
     /* do anything after animation is complete */

     // here the rest of the code ....
  });
}

for ( var i = 0 ; i < NUM_OF_SECTIONS; i++ ) {
  $('.slidingDiv' + i).hide();
  $('.show_hide' + i).show();
  $('.show_hide').on('click', { id: i }, mySlidingFunc );
} 
```

就这样。1 个循环和 1 个函数，用于将您的元素迭代到 HTML 中的 6 次或更多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:41:46.717

我忘记了 jquery 的[`index()`功能](http://jquery.com/index/)。

你可以尝试这样的事情：

HTML

```
<div class="row span10 center clearfix">
    <a href="http://diyshedsupply.com/step-1-tab/"  class="show_hide btn btn-primary pull-right">+ -</a>
    <div class="pull-right"><strong> Specs and Details</strong></div><br />
</div>
<div class="row span10 center slidingDiv"> 
    <div class="row span9 center clearfix">
        <div id="ajax-content0" data-fetched="false">Default Content</div>
    </div>
</div>
<div class="row span10 center clearfix">
    <a href="http://diyshedsupply.com/step-1-tab/"  class="show_hide btn btn-primary pull-right">+ -</a>
    <div class="pull-right"><strong> Specs and Details</strong></div><br />
</div>
<div class="row span10 center slidingDiv"> 
    <div class="row span9 center clearfix">
        <div id="ajax-content1" data-fetched="false">Default Content</div>
    </div>
</div>

<div class="row span10 center clearfix">
    <a href="http://diyshedsupply.com/step-1-tab/"  class="show_hide btn btn-primary pull-right">+ -</a>
    <div class="pull-right"><strong> Specs and Details</strong></div><br />
</div>
<div class="row span10 center slidingDiv"> 
    <div class="row span9 center clearfix">
        <div id="ajax-content2" data-fetched="false">Default Content</div>
    </div>
</div> 
```

jQuery

```
$('.show_hide').click(function (e) {
    var index = $('.show_hide').index(this); //which one am I working with?
    //check if content has already been loaded via ajax
    if($("#ajax-content" + index).attr('data-fetched') === 'false') {
        $.ajax({
            url: this.href,
            beforeSend: function () {
                $('#ajax-content' + index).html("<div class='loading'><img src='/wp-content/themes/diy/img/ajax-loader.gif' alt='Loading' /></div>");
            },
            success: function (html) {
                $("#ajax-content" + index).html(html);
                $("#ajax-content" + index).attr('data-fetched', 'true');
                $('.show_hide:eq(' + index + ')').addClass('close-tabs');
                handletabs(index);
                $('.slidingDiv:eq(' + index + ')').slideToggle(1600, function () {
                    /* do anything after animation is complete */
                });
                $('.show_hide:eq(' + index + ')' + ' a').removeClass('current');
                $(this).addClass('current');
            }
        });
    } else {
        $('.slidingDiv:eq(' + index + ')').slideToggle(1600);
    }
    e.preventDefault();
});

function handletabs(index) {
    $('.slidingDiv:eq(' + index + ')' + ' ul.tabs').each(function (e) {
        //foreach new tab
        //bind to click event
        $(this).on('click', function (e) {
            //remove active class from all links in parent('tabby')
            $(e).parents('tabby').children('a').removeClass('active');
            //add to new link
            $(e).addClass('active');
            //hide all divs in parent('tabby')
            $(e).parents('tabby').children('div').hide();
            //use href to show div
            $($(this).attr('href')).show();
            // Prevent the anchor's default click action
            e.preventDefault();
        });
    });
} 
```

# wpf - 我可以更改 System.Windows.Data Error: 7 的消息吗？

> ID：14363199
> 
> 赞同：1
> 
> 时间：2013-01-16T16:35:21.423
> 
> 标签：wpf, xaml

如果我将一个字符串放入需要整数的 TextBox（在 XAML 中），我会收到以下消息：

> 无法转换值“xy”。

有人请告诉我是否可以引入如下自定义错误消息：

> 请输入一个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:58:02.867

本文将帮助您做到这一点：[http ://weblogs.asp.net/monikadyrda/archive/2009/06/24/wpf-textbox-validation.aspx](http://weblogs.asp.net/monikadyrda/archive/2009/06/24/wpf-textbox-validation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:47:11.493

是的，您需要在页面后面的代码中覆盖 TextBox 规则的默认验证方法，即规则的 ValidationResult Validate 方法，并让此方法返回由您的字符串组成的 ValidationResult，即“请输入一个数字”。

# ios - 可移动和可编辑的形状 ios

> ID：14363202
> 
> 赞同：0
> 
> 时间：2013-01-16T16:35:30.047
> 
> 标签：ios, xcode

我想知道是否有办法将 UITextView 添加到屏幕并使其既可移动又可调整大小以及可编辑。到目前为止，我给 UItextView 提供了在触摸开始时在屏幕上移动的可能性......，用户可以使用捏合手势调整它的大小，但我希望用户能够通过拉动 4 个角中的任何一个来调整它的大小textView （就像一个矩形），就像您可以在 Pages 中处理图像（iWork for ipad）一样。感谢您的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:59:47.580

您可以用按钮覆盖角落并从那里取出。

# c# - 将数据集添加到另一个数据集，如 C# 中的 DataRow

> ID：14363203
> 
> 赞同：0
> 
> 时间：2013-01-16T16:35:30.380
> 
> 标签：c#, asp.net, datatable, dataset

```
 sqlHelper = new SqlHelper();
            sqlHelper.OpenConnection();
            int i;
            String sqlSt = string.Empty;
            for (i = 0; i < tag.Count; i++)
            {
               sqlSt = "Select TagID from TagsList where TagName= '" + tag[i] + "'";
               ds = sqlHelper.ExecuteDataSet(sqlSt, CommandType.Text);

               if (ds != null)
               {
                   if (ds.Tables[0].Rows.Count > 0)
                   {
                       //dt = ds1.Tables[0];
                       ds.Tables[0].Rows.Add(ds);
                   }
               }
             }
             return ds; 
```

我想将一个数据集添加到另一个数据集，最后将返回累积的数据集。

我收到一个错误 -`Unable to cast object of type 'System.Data.DataSet' to type 'System.IConvertible'.Couldn't store <System.Data.DataSet>`

**编辑：**我想要的是我得到一个包含特定 int 值的数据集，我的 for 循环运行的每种类型我想将所有这些记录添加到数据集中，然后返回我的数据集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T10:06:06.063

从技术上讲，我们不能将一个数据集添加到其他数据集，因为 ASP.NET 中的数据集通常是只读的。

So,First We Have To Create Object Reference of Second DataSet.

Steps :

```
bool IsFirstTime  = true;(Create OutSide Loop) 
```

Inside Loop :

```
if (IsFirstTime)

{

// dsLoopData Contains Records

dsTotalRecords = dsLoopData.Clone();

IsFirstTime = false;

} 
```

1.At a Time Insert (For Bulk Copy)

```
dsTotalRecords.Tables[0].Merge(dsLoopData.Tables[0]); 
```

2.Row By Row Insertion

```
for (int i = 0; i < dsLoopData.Tables[0].Rows.Count; i++)

{

dsTotalRecords.Tables[0].ImportRow(dsLoopData.Tables[0].Rows[i]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:41:40.287

我想知道这是否是一个错字，因为您将相同的 DataSet 添加到其第一个表的行集合中：

> ds.Tables[0].Rows.Add(ds);

如果我理解正确，您有一个 DataSet`ds1`并且您想将其表添加到`ds`. 为此，您需要分两步逐表移动：**克隆表和导入其行**。

例如，这将复制第一个表（索引 0）：

```
//clone first table
DataTable dt = ds1.Tables[0].Clone();
//add rows
foreach (DataRow dr in ds1.Tables[0].Rows)
{
    dt.ImportRow(dr);
}
//add table to DataSet
ds.Tables.Add(dt); 
```

**编辑**：我也会调查`DataTableExtensions` [CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb396189.aspx)。它相信你也可以这样做（未经测试）：

```
//copy first table
DataTable dt = ds1.Tables[0].AsEnumerable().CopyToDataTable();    
//add table to DataSet
ds.Tables.Add(dt); 
```

# google-chrome - Chrome中的GWT选项卡布局面板水平幻灯片

> ID：14363204
> 
> 赞同：1
> 
> 时间：2013-01-16T16:35:30.560
> 
> 标签：google-chrome, gwt

我们遇到了一些问题。我们在 GWT 中开发的 Web 应用程序的布局具有“选项卡布局面板”功能。现在，水平幻灯片动画在除 Chrome（版本 > 22）之外的所有浏览器中都非常有效。

当用户单击应该触发幻灯片动画的选项卡之一时，它只是开始以某种循环从左到右滚动，而不会自行停止，直到 GWT Chrome 插件崩溃（这并不总是发生）。

我们在多台计算机、不同的操作系统、浏览器和平台上进行了尝试，但结果始终相同。Chrome 似乎不喜欢 GWT 选项卡布局面板动画。

这是为这个问题创建的示例网络应用程序。它仍然有这个 akward loop-ish 左右幻灯片。

```
public class MyWebApp implements EntryPoint {
  // A simple data type that represents a contact.
  private static class Contact {
    private final String address;
    private final String name;

    public Contact(String name, String address) {
      this.name = name;
      this.address = address;
    }
  }

  // The list of data to display.
  private static List<Contact> CONTACTS = Arrays.asList(new Contact("John",
      "123 Fourth Road"), new Contact("Mary", "222 Lancer Lane"), new Contact(
      "Zander", "94 Road Street"));

  public void onModuleLoad() {

    // Create a CellTable.
    CellTable<Contact> table = new CellTable<Contact>();

    // Create name column.
    TextColumn<Contact> nameColumn = new TextColumn<Contact>() {
      @Override
      public String getValue(Contact contact) {
        return contact.name;
      }
    };

    // Make the name column sortable.
    nameColumn.setSortable(true);

    // Create address column.
    TextColumn<Contact> addressColumn = new TextColumn<Contact>() {
      @Override
      public String getValue(Contact contact) {
        return contact.address;
      }
    };

    // Add the columns.
    table.addColumn(nameColumn, "Name");
    table.addColumn(addressColumn, "Address");

    // Create a data provider.
    ListDataProvider<Contact> dataProvider = new ListDataProvider<Contact>();

    // Connect the table to the data provider.
    dataProvider.addDataDisplay(table);

    // Add the data to the data provider, which automatically pushes it to the
    // widget.
    List<Contact> list = dataProvider.getList();
    for (Contact contact : CONTACTS) {
      list.add(contact);
    }

    // Add a ColumnSortEvent.ListHandler to connect sorting to the
    // java.util.List.
    ListHandler<Contact> columnSortHandler = new ListHandler<Contact>(list);
    columnSortHandler.setComparator(nameColumn, new Comparator<Contact>() {
          public int compare(Contact o1, Contact o2) {
            if (o1 == o2) {
              return 0;
            }

            // Compare the name columns.
            if (o1 != null) {
              return (o2 != null) ? o1.name.compareTo(o2.name) : 1;
            }
            return -1;
          }
        });
    table.addColumnSortHandler(columnSortHandler);

    // We know that the data is sorted alphabetically by default.
    table.getColumnSortList().push(nameColumn);

    // Create a tab panel
    TabLayoutPanel tabPanel = new TabLayoutPanel(2.5, Unit.EM);
    tabPanel.setAnimationDuration(1000);
    tabPanel.getElement().getStyle().setMarginBottom(10.0, Unit.PX);
    tabPanel.getElement().getStyle().setHeight(1000, Unit.PX);
    tabPanel.getElement().getStyle().setWidth(720, Unit.PX);
    tabPanel.getElement().getStyle().setLeft(14, Unit.PX);

    // Add a home tab
    String[] tabTitles = {"Prova1", "Prova2", "Prova3"};
    HTML homeText = new HTML("<h1>Prova1</h1>");
    tabPanel.add(homeText, tabTitles[0]);
    FlexTable ft = new FlexTable();
    ft.setText(0, 0, "upper-left corner");
    ft.setText(2, 2, "bottom-right corner");
    VerticalPanel p = new VerticalPanel();
    p.add(ft);
    // Add a tab
    HTML moreInfo = new HTML("<h1>Prova2</h1>");
    tabPanel.add(p, tabTitles[2]);   

    // Add it to the root panel.
    RootPanel.get().add(table);
    RootPanel.get().add(tabPanel);
  } 
```

}

# algorithm - Java中最快的队列实现方法

> ID：14363206
> 
> 赞同：1
> 
> 时间：2013-01-16T16:35:33.650
> 
> 标签：algorithm, data-structures, queue

任务是用以下方法在java中实现一个队列：

1.  enqueue //添加一个元素到队列
2.  dequeue //从队列中移除元素
3.  peekMedian //求中位数
4.  peekMinimum //找到最小值
5.  peakMaximum //找到最大值
6.  大小 // 获取大小

假设所有的方法都在等频中被调用，任务是有最快的实现。

我当前的方法：维护一个排序数组，除了队列，所以入队和出队需要 O(logn) 和 peekMedian、peekMaximum、peekMinimum 都需要 O(1) 时间。

请建议一种更快的方法，假设所有方法都以相同的频率调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:39:50.557

好吧，你已经接近了 - 但仍然缺少一些东西，因为从排序数组中插入/删除是`O(n)`（因为插入元素的概率为 1/2 位于数组的前半部分，你将不得不向右移动以下所有元素，其中至少有 n/2，因此此操作的总复杂度`O(n)`平均为 + 最坏情况）

但是，如果您将排序的 DS 切换到[跳过列表](http://en.wikipedia.org/wiki/Skip_list)/[平衡 BST](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree) - 您将获得`O(logn)`插入/删除和`O(1)`最小/最大/中值/大小（带缓存）

**编辑：**

您无法`O(logN)`在插入时变得更好（除非您减少`peekMedian()`to `Omega(logN)`），因为这将使您能够更好地排序`O(NlogN)`：

首先，请注意，对于您插入的每个“高”元素，中位数向右移动一个元素（在这里，高意味着 >= 当前最大值）。
所以，通过迭代地做：

```
while peekMedian() != MAX:
   peekMedian()
   insert(MAX)
   insert(MAX) 
```

您可以找到排序数组的“较高”一半。
使用相同的方法`insert(MIN)`可以获得数组的最低一半。

假设你有`o(logN)`(small o notation, better than `Theta(logN)`insert 和 O(1) `peekMedian()`，那么你得到了一个更好的排序`O(NlogN)`，但是排序是个`Omega(NlogN)`问题。
=><=

这样`insert()`就不能再好`O(logN)`了，中位数还在`O(1)`。

**量子点**

**EDIT2**：修改插入中的中位数：

如果插入前的树大小为 2n+1（奇数），则旧中位数在索引 n+1 处，新中位数在同一索引处（n+1），因此如果在旧中位数之前添加元素 -你需要得到最后一个中位数的前一个节点——这就是新的中位数。如果它是在它之后添加的 - 什么都不做，旧的中位数也是新的中位数。

如果列表是偶数（2n 个元素），那么在插入之后，你应该增加一个索引（从 n 到 n+1），所以如果新元素是在中位数之前添加的 - 什么都不做，如果它是在旧元素之后添加的中位数，您需要将新中位数设置为旧中位数的下一个节点。

注意：这里的next和previous节点是根据key跟随的节点，index表示节点的“位置”（最小的是第一个，最大的是最后一个）。
我只解释了如何插入，同样的想法也适用于删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:23:00.513

有一个更简单，也许更好的解决方案。（正如已经讨论过的，排序后的数组使入队和出队都是 O(n)，这不是很好。）

除了队列之外，还维护*两个排序集。*Java 库提供了例如 SortedSet，它们是平衡的搜索树。“低集”按排序顺序存储第一个上限 (n/2) 元素。第二个“高设置”具有最后一层（n / 2）。

注意：如果允许重复，则必须使用[Google 的 TreeMultiset](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeMultiset.html)之类的东西，而不是常规的 Java 排序集。

要入队，只需添加到队列和正确的集合中。如有必要，通过移动一个元素来重新建立集合之间的平衡：要么将低集合中的最大元素移至上集合，要么将高集合中的最小元素移至低集合。出队需要相同的重新平衡操作。

如果 n 为奇数，则查找中位数只是查找低集合中的最大元素。如果 n 是偶数，则在低集合中找到最大元素，在高集合中找到最小值并平均它们。

使用本机 Java 排序集实现（平衡树），所有操作的这将是 O(log n)。这将非常容易编码。大约60行。

如果您为低集和高集实现自己的筛选堆，那么查找中值操作将有 O(1)，而所有其他操作将保持 O(log n)。

如果您继续为低集和高集实现自己的[斐波那契堆](http://en.wikipedia.org/wiki/Fibonacci_heap)，那么您也将拥有 O(1) 插入。

# mysql - Oracle/MYSQL：对包含字母数字值的列的选择查询中的记录进行排序

> ID：14363209
> 
> 赞同：0
> 
> 时间：2013-01-16T16:35:45.423
> 
> 标签：mysql, sql, oracle, sorting

我知道这个问题已经以各种形式提出，但我的要求恰好有点不同。

假设我有一个包含如下数据的表：

```
ID  NAME        VALUE

-----------------------------

1   ABC-2-2     X
2   PQRS-1-3    Y
3   ABC-3-2     Z
4   PQRS-1-4    A
5   PQRS-3-4    B
6   MNO-2-1     C
7   AAA-1       D
8   BBB-2       E
9   CCC-3       F 
```

现在，我期望的输出应该是这样的：

```
ID  NAME        VALUE

-----------------------------
7   AAA-1       D
2   PQRS-1-3    Y
4   PQRS-1-4    A
8   BBB-2       E
6   MNO-2-1     C
1   ABC-2-2     X
9   CCC-3       F
3   ABC-3-2     Z
5   PQRS-3-4    B 
```

请注意，这不是直接的字母数字排序。相反，第一个“-”之前的值被忽略，字段按名称中第一个“-”之后的内容排序。

我对 PL/SQL 不是很熟悉，如果能提供任何帮助，我将不胜感激。

谢谢。

PS：请注意，这应该适用于 Oracle 和 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:38:52.160

对于您的示例，这就足够了（Oracle 语法）：

```
ORDER BY SUBSTR(name,4) 
```

如果第一个连字符之前的字符数可以变化，您可以这样做（同样是 Oracle 语法）：

```
ORDER BY SUBSTR(name,INSTR(name,'-')+1) 
```

但是，如果您有以下代码，这将不起作用：

```
AAA-10-1
AAA-8-1
AAA-9-1 
```

并期望`AAA-10-1`出现在`AAA-9-1`. 然后你需要进一步解析它：

```
ORDER BY LPAD(SUBSTR(name,INSTR(name,'-')+1, INSTR(name,'-',1,2)-INSTR(name,'-')-1),10,'0'),
         LPAD(SUBSTR(name,INSTR(name,'-',1,2)+1),10,'0') 
```

（注意，我使用 LPAD(x,10,'0') 将像 '1' 这样的值转换为 '0000000001' 等等，而不是使用 TO_NUMBER，因为如果您的数据中有任何非数字，这可能会失败。 )

例子：

```
with data as
(
select 'AAA-1' name from dual
union all
select 'PQR-1-4' name from dual
union all
select 'PQR-1-3' name from dual
union all
select 'AAA-10-10' name from dual
union all
select 'AAA-10-1' name from dual
union all
select 'AAA-9-10' name from dual
union all
select 'AAA-9-1' name from dual
)
select *
from data
ORDER BY LPAD(SUBSTR(name,INSTR(name,'-')+1, INSTR(name,'-',1,2)-INSTR(name,'-')-1),10,'0'),
         LPAD(SUBSTR(name,INSTR(name,'-',1,2)+1),10,'0'); 
```

输出：

```
NAME
---------
PQR-1-3
PQR-1-4
AAA-9-1
AAA-9-10
AAA-10-1
AAA-10-10
AAA-1 
```

如果 AAA-1 应该首先出现：

```
ORDER BY LPAD(SUBSTR(name,INSTR(name,'-')+1, INSTR(name||'-','-',1,2)-INSTR(name,'-')-1),10,'0'),
         LPAD(SUBSTR(name,INSTR(name||'-','-',1,2)+1),10,'0') nulls first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:21:20.303

在 mssql 中，查找问题的语法是：

```
select * from mytable order by substring(name,PATINDEX('%-%',name)+1,len(name)-PATINDEX('%-%',name)) 
```

[SqlFiddle](http://www.sqlfiddle.com/#!3/d8bba/20)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:45:26.590

不确定 mysql 语法，但您可以在 oracle 中执行此操作：

```
select * from  <your_table>
order by substr(name, 5) 
```

# powershell - 从 Powershell 中的 URL 获取域

> ID：14363214
> 
> 赞同：29
> 
> 时间：2013-01-16T16:36:01.517
> 
> 标签：powershell

我希望在这种情况下使用 PowerShell 去除域。从以下变量中获取“domain.com”的最有效方法是什么？

```
$URL = "http://www.domain.com/folder/" 
```

（这里的某种正则表达式命令使用 PowerShell 将 $URL 转换/剥离为 $DOMAIN）

```
$DOMAIN = "domain.com" #<-- taken from $URL 
```

我已经搜索并找到了从域中查找 IP 地址的结果，但我需要首先使用正则表达式（或其他方法）确定域是什么。任何建议都很棒。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-16T16:47:22.113

试试 Uri 类：

```
PS> [System.Uri]"http://www.domain.com/folder/"

AbsolutePath   : /folder/
AbsoluteUri    : http://www.domain.com/folder/
LocalPath      : /folder/
Authority      : www.domain.com
HostNameType   : Dns
IsDefaultPort  : True
IsFile         : False
IsLoopback     : False
PathAndQuery   : /folder/
Segments       : {/, folder/}
IsUnc          : False
Host           : www.domain.com
Port           : 80
Query          :
Fragment       :
Scheme         : http
OriginalString : http://www.domain.com/folder/
DnsSafeHost    : www.domain.com
IsAbsoluteUri  : True
UserEscaped    : False
UserInfo       : 
```

并删除 www 前缀：

```
PS> ([System.Uri]"http://www.domain.com/folder/").Host -replace '^www\.'
domain.com 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:49:04.860

像这样：

```
PS C:\ps> [uri]$URL = "http://www.domain.com/folder/"
PS C:\ps> $domain = $url.Authority -replace '^www\.'
PS C:\ps> $domain
domain.com 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-16T20:38:12.857

为了正确计算子域，诀窍是您需要知道倒数第二个期间。然后，通过从域的总长度中减去第二个句点（或 0）的位置，将倒数第二个句点的子字符串（如果只有一个 .，则没有子串）带到最终位置。这将仅返回正确的域，并且无论 TLD 下嵌套了多少子域都将起作用：

$domain.substring((($domain.substring(0,$domain.lastindexof("."))).lastindexof(".")+1),$domain.length-(($domain.substring(0, $domain.lastindexof("."))).lastindexof(".")+1))

另请注意，系统 URI 本身在 99% 的情况下都是有效的，但我正在解析我的 IIS 日志并发现对于非常长（通常是无效/恶意请求）的 URI，它无法正确解析并失败。

我有这个功能形式：

```
Function Get-DomainFromURL {
    <#
    .SYNOPSIS
    Takes string URL and returns domain only
    .DESCRIPTION
    Takes string URL and returns domain only
    .PARAMETER URL
    URL to parse for domain
    .NOTES
    Author: Dane Kantner 9/16/2016

    #>

    [CmdletBinding()]
        param(
        [Alias("URI")][parameter(Mandatory=$True,ValueFromPipeline=$True)][string] $URL
    )

    try { $URL=([System.URI]$URL).host }
    catch { write-error "Error parsing URL"}
    return $URL.substring((($URL.substring(0,$URL.lastindexof("."))).lastindexof(".")+1),$URL.length-(($URL.substring(0,$URL.lastindexof("."))).lastindexof(".")+1))
} 
```

# clojure - 如何避免在 Clojure 中进行单元测试时必须手动评估 defrecords 和 defprotocols？

> ID：14363216
> 
> 赞同：5
> 
> 时间：2013-01-16T16:36:08.157
> 
> 标签：clojure

在我的 Clojure 代码库中，我定义了几个协议和几个 defrecords。我正在使用 clojure.test 对我的 defrecords 中定义的具体函数进行单元测试。

例如，假设我有以下源文件：

在 src/foo/protocols.clj 中：

```
(ns foo.protocols)

(defprotocol RequestAcceptability
  (desired-accepted-charset [this])) 
```

在 src/foo/types.clj 中：

```
(ns foo.types
  (:use [foo.protocols :only [RequestAcceptability desired-accepted-charset]])

(defrecord RequestProcessor
  [field-1 field-2]
  RequestAcceptability
  (desired-accepted-charset [this]
    ...implementation here...)) 
```

在 test/foo/types_test.clj 中：

```
(ns foo.types-test
  (:use [clojure.test])
  (:use [foo.protocols :only [RequestAcceptability desired-accepted-charset]])
  (:import [foo.types RequestProcessor]))

(deftest test-desired-accepted-charset_1
  ...test code here...) 
```

我在 Emacs 中使用 Clojure 1.4、Leiningen 2、nrepl。

我面临的烦恼是，当我去运行我的单元测试（例如，使用 Cc C-，序列）时，我得到一个**ClassNotFoundException: foo.types.RequestProcessor**。为了解决这个问题，我正在做手动工作，分别评估我的每个协议和 defrecord 表单。即，我将导航到我的protocols.clj 并评估（nrepl 的CMx 键序列）我的defprotocol 表单；然后我将导航到我的 types.clj 并评估我的 defrecord 表单；然后最后我能够成功运行我的单元测试，而不会得到 ClassNotFoundException。

当然，在我的真实代码库中，我必须对所有协议和 defrecords 执行此操作，因此非常繁琐且耗时。此外，如果我只是简单地放入一个 shell 并执行**lein test**，我会得到相同的 ClassNotFoundException。

有没有更好的办法？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:04:36.073

您需要`require`包含测试命名空间中的 defrecord 的命名空间。

`(:import [foo.types RequestProcessor]))`不能单独工作，因为这只适用于类路径中已经存在的 Java 类。这不是这里的情况，因为您使用 defrecord 在运行时动态创建类。

`import`通常只需要 Java 互操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:48:26.497

defrecord**在运行时动态生成类**。一旦你进入命名空间并运行代码，类就会出现并且测试正常加载，因为类现在存在。如果您`use`在测试中使用命名空间除了`import`ing 类之外，它是否为您正确加载？

# javascript - 使用 jquery 进行背景颜色更改过渡

> ID：14363220
> 
> 赞同：4
> 
> 时间：2013-01-16T16:36:19.763
> 
> 标签：javascript, html, css

这就是我想要实现的目标：

![在此处输入图像描述](../Images/a0de9e8983f9db9076e7bf1851baefa4.png)

用户可以选择添加更多年份（带有文本的新圆圈和渐变中的下一种颜色）。

所以我正在做的是构建一个 div，通过重复它可以构建上面的图像。

这是标记：

```
 <a href="javascript:void(0)" class="timeline_box">
        <span class="timeline_dot"></span>
        <span class="timeline_year">2003</span>
    </a> 
```

这是CSS：

```
 a.timeline_box{
        background: url('../images/timeline_bg.png') no-repeat 15px -2px;
        display: block;
        width: 56px;
        height: 20px;
        float: left;
    }
    span.timeline_dot{
        display: block;
        height: 14px;
        width: 14px;
        background-color: #ff845a;
        -moz-border-radius: 5px;
        -webkit-border-radius: 10px;
        -khtml-border-radius: 5px;
        border-radius: 10px;
    }
    span.timeline_year{
        color: #b6b6b6;
        font-size: 10px;
        font-style: italic;
        font-family: Georgia, Times, "Times New Roman", serif;
        vertical-align: top;
    } 
```

这就是我得到的：

![在此处输入图像描述](../Images/a8062a1f46abdc4f61f20192781adacb.png)

如果我重复timeline_box，它开始构建良好：

![在此处输入图像描述](../Images/e9d18ad92aca1440ed06f64016c78039.png)

客户现在可以更改年份，但问题是圆圈的背景颜色将始终保持不变，我想找到一种**使用 jquery 更改它的方法，即每个新年，圆圈的背景都会成为下一个渐变**上的颜色或类似的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:42:48.097

从来没有尝试过这种东西——在跟随颜色渐变或其他的时候改变颜色。认为它会比它更棘手。hsl 颜色格式使它很容易做到。要“跟随渐变”，您只需要不断增加 hsl 中的 h - 逻辑很简单。

这是javascript：

```
var $box = $('.timeline_box'),
    h_val = 0;

function addBox () {
  var $new_box = $box.clone();
  h_val += 17; //change this value to change the amount of color change

  $new_box
    .find('.timeline_dot')
    .css('background', 'hsl('+ h_val +', 100%, 68%)') //change the "s" and "l" values to your liking
    .end()
    .appendTo('body'); 
}

$('#el').on('whatever', addBox); 
```

甚至不需要在任何时候将 h 重置为 0。h 可以一直持续下去，它只会继续循环渐变。

这是一个 jsbin：http: [//jsbin.com/oqifoq/1/edit](http://jsbin.com/oqifoq/1/edit)

# google-visualization - 谷歌可视化 + jboss 接缝 2

> ID：14363224
> 
> 赞同：2
> 
> 时间：2013-01-16T16:36:28.843
> 
> 标签：google-visualization, jboss-seam

我正在尝试在 jboss seam 2 项目中使用谷歌可视化 api。

我创建了一个简单的示例，它实际上取自[Google Quick Start page](https://developers.google.com/chart/interactive/docs/quick_start)。

```
<html>
   <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

       // Create the data table.
       var data = new google.visualization.DataTable();
       data.addColumn('string', 'Topping');
       data.addColumn('number', 'Slices');
      data.addRows([
        ['Mushrooms', 3],
        ['Onions', 1],
        ['Olives', 1],
        ['Zucchini', 1],
        ['Pepperoni', 2]
      ]);

       // Set chart options
       var options = {'title':'How Much Pizza I Ate Last Night',
                   'width':400,
                   'height':300};

       // Instantiate and draw our chart, passing in some options.
       var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>
</head>
<body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
</body>
</html> 
```

当我在网络浏览器中将它作为文件打开时，它运行良好。但是当我将它放到我的 Jboss Seam 2 项目中并在 Web 浏览器中打开时，它会在红色背景上生成错误消息“b[c] is undefined”。

这是我在浏览器中打开页面源代码时看到的内容：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>

     <script src="/MCMS/a4j/g/3_3_3.Final/org/ajax4jsf/framework.pack.js" type="text/javascript"></script>
     <script src="/MCMS/a4j/g/3_3_3.Final/org/richfaces/ui.pack.js" type="text/javascript"></script>
     <link class="component" href="/MCMS/a4j/s/3_3_3.Final/org/richfaces/skin.xcss/DATB/eAGTKJ8eErp8hjQADcsDKg__" rel="stylesheet" type="text/css" />
     <script type="text/javascript" src="https://www.google.com/jsapi"></script>
     <script type="text/javascript">
          // Load the Visualization API and the piechart package.
          google.load('visualization', '1.0', {'packages':['corechart']});

          // Set a callback to run when the Google Visualization API is loaded.
          google.setOnLoadCallback(drawChart);

          // Callback that creates and populates a data table,
          // instantiates the pie chart, passes in the data and
          // draws it.
          function drawChart() {

          // Create the data table.
          var data = new google.visualization.DataTable();
          data.addColumn('string', 'Topping');
          data.addColumn('number', 'Slices');
          data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                   'width':400,
                   'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
 </head>

 <body>

    <div id="chart_div"></div>
 </body>
</html> 
```

如您所见，Jboss Seam 为 a4j 添加了一些其他脚本 src。

a4j javascript 是否可能与谷歌可视化 api javascript 冲突？

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:39:40.537

终于在这里找到了解决方案

[谷歌图表错误：无法读取未定义的属性“长度”；谷歌图表中的调试错误](https://stackoverflow.com/questions/7759231/google-charts-errorcannot-read-property-length-of-undefined-debugging-error)

和这里

[http://code.google.com/p/google-visualization-api-issues/issues/detail?id=501](http://code.google.com/p/google-visualization-api-issues/issues/detail?id=501)。

在脚本的开头添加以下 hack：

```
Array.prototype.reduce = undefined; 
```

或更优雅地：

```
Array.prototype.reduce=function(fun){var len=this.length&#62;&#62;&#62;0;if(typeof fun!="function")throw new TypeError;if(len==0&#38;&#38;arguments.length==1)throw new TypeError;var i=0;if(arguments.length&#62;=2)var rv=arguments[1];else{do{if(i in this){var rv=this[i++];break}if(++i&#62;=len)throw new TypeError;}while(true)}for(;i&#60;len;i++)if(i in this)rv=fun.call(undefined,rv,this[i],i,this);return rv}; 
```

解决问题！

# ruby-on-rails - 获取 x 用户最后五次登录的列表

> ID：14363225
> 
> 赞同：0
> 
> 时间：2013-01-16T16:36:29.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, relational-database

所以我有这个任务，我应该输出当前登录用户最近五次登录的列表。

所以像这样：

个人 A 于 2012 年 12 月 12 日 12.00 登录。

个人 A 在 2013 年 12 月 1 日 12 点再次登录。

等等。

这需要最多五个列表，一旦达到该限制，第一次登录（在这种情况下为 12.00 12/12/12）将被排除在视图之外。

到目前为止，我所拥有的是一个登录系统，其中包含记住令牌和登录本身的一些简单授权（从头开始并回到 Michael Hartl 的教程中的一些细节）。现在，我可以列出用户登录的当前时间，但不能列出以前的“版本”。

**所以，这是我的观点：**

```
<% if signed_in? %>
<h1>Welcome, <%= current_user.name %>!</h1>
<p>You were last logged in on:</p>
<ul>
    <li><%= current_user.lastlogin %></li>
</ul>
<%= link_to "Sign out", signout_path, method: "delete", class: "btn btn-large" %>
<% else %>
... (state for non logged in users)
<% end %> 
```

**这是我的用户类：**

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :lastlogin
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  ...(validation following this) 
```

**这是我的 session_controller**

```
class SessionsController < ApplicationController
def new
end

def create
user = User.find_by_email(params[:session][:email].downcase)
if user && user.authenticate(params[:session][:password])
        sign_in user
        redirect_to root_path
else
        flash.now[:error] = 'Invalid email/password combination'
    render 'new'
  end
end 
```

**这里我们有 sign_in 函数**

```
module SessionsHelper
 def sign_in(user)
 # user.update_attribute(:lastlogin, Time.now)
   user.touch(:lastlogin)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
 end
end 
```

我正在寻找有关如何解决此问题的想法。

另一件我忘了提的是，视图层需要在一定程度上进行修改，以便循环遍历五个登录时间并按顺序输出，而不是在五个列表项中进行硬编码。

我正在考虑的一件事是在一个表之间建立一个关系，该表具有与一个用户对应的五个字段。然后在登录（或注销）时获取 :lastlogin 值并将其推送到表中的字段中。

然后，当所有字段都填写完毕后，查看第一个日期并将其替换为新日期。

所以我在想的是

```
def sign_in
  user.touch(:lastlogin)
  # push :lastlogin value into field in LoginsTable
  cookies.permanent[:remember_token] = user.remember_token
  self.current_user = user
end 
```

我对 Ruby on Rails 很陌生，可能离这里很远。我已经尝试搜索像我在这里解释的那样的功能，而我得到的只是各种插件/完整的 gem 来处理这个以及在身份验证等方面的所有其他事情，这并不是真的在这种情况下“需要”，因为这对我自己来说只是一个小时间项目。

干杯!

编辑：

推入 user_logins 表的徒劳尝试。

```
module SessionsHelper
  def sign_in(user)
    user.update_attribute(:lastlogin, Time.now)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
    login_time = UserLogins.create(:login_time Time.now, :user_id current_user)
  end
end 
```

现在这显然行不通。我不太确定如何在视图层中循环访问 login_times。但我认为我最终会让它工作，现在你让我走上了正确的轨道:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:01:34.633

如果您硬编码 5 个字段来保存最近 5 个登录日期，那么您将陷入混乱，而不是考虑使用一个表来存储所有用户的登录历史记录。一个简单的表“user_logins”和,`id`就足够了。每次用户登录时写入此表，然后在您的视图中只需选择按降序排列的前 5 个结果。`user_id``login_time``login_time`

希望这是有道理的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:17:04.607

在这条线上

```
login_time = UserLogins.create(:login_time Time.now, :user_id current_user) 
```

您正在创建错误的哈希对象。Ruby 1.9 哈希语法是

```
some_var: "some value" 
```

不是

```
:some_var "some value" 
```

祝你好运！

还要稍微分解一下 UserLogins 对象。由于您使用的是 Time.now，因此让 UserLogins 对象设置时间，从而将您的方法简化为单一方法。

旁注：

您不应该将 Model 对象命名为复数，因为这在 Rails 中会让人感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:07:12.147

我更喜欢使用 devise gem，因为它可以维护身份验证以及用户登录历史记录，因此您可以轻松获取最后五个登录用户，在用户模型上应用查询并通过最后一次登录订购 desc

# php - 将 jquery 变量传递给 php 页面并将计算的变量接收到第一页

> ID：14363228
> 
> 赞同：0
> 
> 时间：2013-01-16T16:36:39.060
> 
> 标签：php, jquery, ajax, bpopup

我有一个生成的表格，当按下第 6 列上的按钮以获取行中的第一个单元格值并将其发送到覆盖页面时，覆盖页面将进行一些计算，这将需要一些时间并显示分数，我想用该分数替换第 6 列按钮。

处理时我无法让 page2.php 在叠加层中显示（我使用[此处](http://dinbror.dk/bpopup/)的弹出窗口）

这是我到目前为止所达到的

```
<tbody>
    <?php foreach ($rows as $row_number => $columns): ?>
      <?php
        $row_class = 'row-' . ($row_number + 1);
        if ($row_number == 0) {
          $row_class .= ' row-first';
        }
        if (count($rows) == ($row_number + 1)) {
          $row_class .= ' row-last';
        }
      ?>
      <tr class="<?php print $row_class; ?>">
        <?php foreach ($columns as $column_number => $item): ?>
          <td class="<?php print 'col-'. ($column_number + 1); ?>"  >
                <?php print $item; ?>
          </td>
        <?php endforeach; ?>
<td>
<?php print $dnsearch; ?> 
</td>
<td>

<button id="my-button">Get Score</button>
<div id="element_to_pop_up">
    <a class="bClose">x<a/> 
```

这里应该 page2.php 从脚本接收变量并进行处理并返回数据（分数）以替换单击的按钮

```
 </div>

    </td>
          </tr>
        <?php endforeach; ?>
      </tbody>
    </table>

    <script type="text/javascript">
    $(":button").click(function (e) {
    e.preventDefault();
    $('#element_to_pop_up').bPopup();
    $.post("page2.php", {val: $(this).closest('tr').find('td:eq(0)').text()}, function(returned_data){
    //    alert(returned_data); 
          $(e.target).closest("td").text(returned_data); // to replace button with score
       });

    });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:48:40.703

单击按钮时，将第一行的值发送到 jquery 并对第二页进行 ajax 调用，并在第二页的响应中进行所需的计算，用结果替换按钮查找示例。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

把你的按钮放在这样的范围内

```
<span id="result">
<button id="my-button">Get Score</button></span> 
```

然后在你的响应处理jQuery中把这个

```
$("#result").html(you calculation result jquery variable); 
```

# button - 获取回发按钮的名称

> ID：14363230
> 
> 赞同：0
> 
> 时间：2013-01-16T16:36:49.630
> 
> 标签：button, razor, asp.net-mvc-4, postback, name-attribute

我通过为每个产品构建动态构建了一个“购买产品”页面。每个产品都有一个“添加到购物篮”按钮，每个产品`pID`的按钮`name`属性是不同的。我现在想`name`在回发时在我的控制器中获取属性的值。不知道该怎么做：

看法：

```
@foreach (Ecommerce.Models.HomeModels.Product product in Model)
{
    using (Html.BeginForm())
    {
        @Html.Label(product.Name);
        <br />
        @Html.Label(product.Description);
        <br />
        @Html.Label(product.UnitPrice.ToString());
        <p></p>

        <input name="@product.ID" type="submit" value="Add to Basket" /> 
    }
} 
```

控制器：

```
[HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult BuyProducts(string button)
        {

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:41:36.560

如果表单中没有多个提交按钮，则无需在服务器端知道单击的提交按钮的名称是什么。还有其他方法可以将您的 ID 发送回服务器：

为什么不在表单中生成一个隐藏字段来保存和发布数据？

```
@foreach (Ecommerce.Models.HomeModels.Product product in Model)
{
    using (Html.BeginForm())
    {
        <input type="hidden" name="productId" value="@product.ID" />
        <input  type="submit" value="Add to Basket" /> 
    }
} 
```

然后你可以在你的控制器中获取隐藏字段的值：

```
public ActionResult BuyProducts(string productId)
{
    //..
} 
```

# sql-server-2008 - 创建 SSRS 站点的副本

> ID：14363232
> 
> 赞同：0
> 
> 时间：2013-01-16T16:36:53.870
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services

我有一个名为`http://server/reports`.

现在我想重新开发它，而不会造成任何停机。我想复制整个网站并将其指向`http://server/reports2`.

在这里，我可以更改用户在最终将新站点重新指向之前将看到的内容`http://server/reports`。

这可能吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:47:26.217

您可以进入 SSRS 配置并选择一个新的站点名称。所有程序>SQL Server 2008>配置工具>SSRS 配置管理器。它会打开一个小的管理站点>单击左侧窗格上的“报告管理器 URL”，前提是您具有进入的凭据。您可以在此处更改您的网站和 Web 服务站点。

但是，这可能会清除您的旧网站，因为除了“移动”网站之外，我不确定这是否可行。如果您想要两个站点，则很可能必须使用“横向扩展部署”，这很可能是一个不同的问题。

# sql - SQL Server - 对整个列求和和分组依据

> ID：14363238
> 
> 赞同：5
> 
> 时间：2013-01-16T16:37:12.773
> 
> 标签：sql, sql-server

假设我在 SQL Server 中有下表：

```
grp:     val:     criteria:
a        1        1
a        1        1
b        1        1
b        1        1
b        1        1
c        1        1
c        1        1
c        1        1
d        1        1 
```

现在我想要的是得到一个基本上是的输出：

```
Select grp, val / [sum(val) for all records] grouped by grp where criteria = 1 
```

因此，鉴于以下情况为真：

```
Sum of all values = 9
Sum of values in grp(a) = 2
Sum of values in grp(b) = 3
Sum of values in grp(c) = 3
Sum of values in grp(d) = 1 
```

输出如下：

```
grp:     calc:    
a        2/9        
b        3/9        
c        3/9        
d        1/9 
```

我的 SQL 应该是什么样子？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:45:10.493

你应该能够使用这样的东西[`sum() over()`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)：

```
select distinct grp,
  sum(val) over(partition by grp)
    / (sum(val) over(partition by criteria)*1.0) Total
from yourtable 
where criteria = 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/efa1f/12)

结果是：

```
| GRP |          TOTAL |
------------------------
|   a | 0.222222222222 |
|   b | 0.333333333333 |
|   c | 0.333333333333 |
|   d | 0.111111111111 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:58:20.593

我完全同意@bluefeet 的回应——这只是一种独立于数据库的方法（应该适用于大多数 RDBMS）：

```
select distinct
  grp,
  sum(val)/cast(total as decimal)
from yourtable 
cross join 
(
  select SUM(val) as total 
  from yourtable
) sumtable
where criteria = 1
GROUP BY grp, total 
```

这是[SQL Fiddle](http://www.sqlfiddle.com/#!3/c9d2b/1)。

# modulus - 使用 javascript 模数获取页码

> ID：14363239
> 
> 赞同：1
> 
> 时间：2013-01-16T16:37:15.027
> 
> 标签：modulus

我有以下数字可以使用：

```
totalItems = 26;
itemsPerPage = 6;
currentItem = 17;

currentPage = ?? 
```

给定这些数字（或任何当前项目值），我如何确定当前页面是什么。我想我需要使用模数函数，但我不知道该怎么做。

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T16:40:30.867

你需要这个[`ceil`](http://www.w3schools.com/jsref/jsref_ceil.asp)功能

```
//In javascript
currentPage=Math.ceil(currentItem/itemsPerPage);//=3
//17/6=2.8333.. ceiling (round up to nearest integer) = 3 
```

值得指出的是，这是假设基于 1 的分页（第一页是第 1 页而不是第 0 页）和基于 1 的项目编号（意味着第 1 页有项目 1-6，第 2 页有项目 7-12）。

# scala - Akka Slick 和 ThreadLocal

> ID：14363241
> 
> 赞同：3
> 
> 时间：2013-01-16T16:37:25.613
> 
> 标签：scala, akka, thread-local

我使用 slick 将数据存储在数据库中，并使用 threadLocalSession 存储会话。

存储库用于完成 crud，我有一个 Akka 服务层可以访问 slick 存储库。

我找到了这个链接，Adam Gent 询问了我在这里要问的问题：[Akka and Java library that use ThreadLocals](https://stackoverflow.com/questions/13210318/akka-and-java-libraries-that-use-threadlocals)

我关心的是akka如何处理消息，因为我将数据库会话存储在threadLocal中，我可以在同一个线程中同时处理两条消息吗？

假设：两条添加用户消息（A 和 B）发送到 userservice，消息 A 被部分处理并停止，线程 B 开始在线程 A 开始处理的同一线程中处理，该线程将存储会话在它的本地会话中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T18:02:52.897

每个参与者一次处理一个消息，按照接收它们的顺序*。因此，如果您将消息 A、B 发送给同一个 Actor，那么它们永远不会同时处理（当然，如果您将每条消息发送给不同的 Actor，情况会有所不同）。

使用 ThreadLocals 的问题在于，通常不能保证参与者在同一个线程上处理其每条消息。

因此，如果您向参与者 A 发送消息 M1，然后再发送消息 M2，则可以保证 M1 在 M2 之前被处理。不能保证 M2 在与 M1 相同的线程上处理。

通常，您应该避免使用 ThreadLocals，因为 Actor 的全部意义在于它们是一个一致性单元，您可以安全地通过消息传递修改它们的内部状态。如果您确实需要对执行消息处理的线程进行更多控制，请查看调度程序的文档：http: [//doc.akka.io/docs/akka/2.1.0/java/dispatchers.html](http://doc.akka.io/docs/akka/2.1.0/java/dispatchers.html)

* * *

*除非您更改他们的邮箱实现，但这是非默认行为。

# python - 在python中覆盖文件

> ID：14363242
> 
> 赞同：1
> 
> 时间：2013-01-16T16:37:26.440
> 
> 标签：python, file-io

我正在使用 python 来抓取网页并且我正在迭代地进行操作 - 所以我使用 3 个 html 文件来存储网页，但不知何故我发现这些文件没有被覆盖，而且我仍然得到旧文件。这是我正在使用的代码：

```
def Vals(a,b):
    file1="C:\\Users\\YAS_ayush\\Desktop\\dataset_recommendation\\file1.html"
    file2="C:\\Users\\YAS_ayush\\Desktop\\dataset_recommendation\\file22.html"
    file3="C:\\Users\\YAS_ayush\\Desktop\\dataset_recommendation\\file33.html"

    Query1='"http://scholar.google.com/scholar?q=%22'+a+'%22&btnG=&hl=en&as_sdt=0%2C24"'
    URL1='wget --user-agent Mozilla '+Query1+' -O '+file1

    Query2='"http://scholar.google.com/scholar?q=%22'+b+'%22&btnG=&hl=en&as_sdt=0%2C24"'
    URL2='wget --user-agent Mozilla '+Query2+' -O '+file2

    Query3='"http://scholar.google.com/scholar?q=%22'+a+'%22+%22'+b+'%22&btnG=&hl=en&as_sdt=0%2C24"'
    URL3='wget --user-agent Mozilla '+Query3+' -O '+file3
##    print Query1
##    print Query2
##    print Query3
##    
##    print URL1
##    print URL2
##    print URL3

    os.system("wget "+ URL1)
    os.system("wget "+ URL2)
    os.system("wget "+ URL3)

    f1 = open(file1,'r+')
    f2 = open(file2,'r+')
    f3 = open(file3,'r+')

    S1=str(f1.readlines())

    start=S1.find("About")+6
    stop=S1.find("results",start)-1
    try:
        val1=float((S1[start:stop]).replace(",",""))
    except ValueError:
        val1=Reads('C:\\Users\\YAS_ayush\\Desktop\\dataset_recommendation\\file1.html')

    S1=str(f2.readlines())
    #f2.close()
    start=S1.find("About")+6
    stop=S1.find("results",start)-1

    try:
        val2=float((S1[start:stop]).replace(",",""))
    except ValueError:
        val2=Reads('C:\\Users\\YAS_ayush\\Desktop\\dataset_recommendation\\file22.html')

    S1=str(f3.readlines())
    #f3.close()
    start=S1.find("About")+6
    stop=S1.find("results",start)-1
    try:
        val3=float((S1[start:stop]).replace(",",""))
    except ValueError:
        val3=Reads('C:\\Users\\YAS_ayush\\Desktop\\dataset_recommendation\\file33.html')
    f1.truncate()
    f2.truncate()
    f3.truncate()
    f1.close()
    f2.close()
    f3.close()
    return (val1,val2,val3) 
```

谁能告诉我关闭文件是否有错误，或者我应该如何关闭它们以达到我的目的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:52:14.510

您正在使用`-O`(capital O) 选项，它将所有内容连接到 1 个文件。

> '-O 文件' '--output-document=file'</p>
> 
> 这些文档不会被写入适当的文件，但所有文件将连接在一起并写入文件。如果使用“-”作为文件，文档将打印到标准输出，禁用链接转换。（使用 './-' 打印到一个字面上名为 '-' 的文件。）使用 '-O' 并不意味着简单地表示“使用名称文件而不是 URL 中的文件名”；相反，它类似于 shell 重定向：`wget -O file http://foo`旨在像`wget -O - http://foo > file`; 文件将被立即截断，所有下载的内容都将写入那里。
> 
> 由于这个原因，'-N'（用于时间戳检查）不支持与'-O'结合使用：因为文件总是新创建的，它总是有一个非常新的时间戳。如果使用此组合，将发出警告。
> 
> 类似地，使用 '-r' 或 '-p' 和 '-O' 可能不会像你期望的那样工作：Wget 不会只是将第一个文件下载到文件，然后将其余文件下载到它们的正常名称：所有下载的内容都将是放在档案里。这在 1.11 版本中被禁用，但在 1.11.2 中已恢复（带有警告），因为在某些情况下此行为实际上可以使用。
> 
> 请注意，仅在下载单个文档时才允许与“-k”组合，因为在这种情况下，它只会将所有相关 URI 转换为外部 URI；当多个 URI 都被下载到单个文件时，'-k' 没有意义；'-k' 只能在输出为常规文件时使用。

这个片段取自[wget 的手册](http://www.gnu.org/software/wget/manual/wget.html#Download-Options)。

希望这可以帮助。

# r - ggplot中的概率热图

> ID：14363252
> 
> 赞同：4
> 
> 时间：2013-01-16T16:37:48.177
> 
> 标签：r, ggplot2, probability

一年前 我问了[这个问题，得到了这个“概率热图”的代码：](https://stackoverflow.com/questions/7305803/plot-probability-heatmap-hexbin-with-different-sized-bins)![热图](../Images/4c6343c98ee7d114f91994d4916aeca0.png)

```
numbet <- 32
numtri <- 1e5
prob=5/6
#Fill a matrix 
xcum <- matrix(NA, nrow=numtri, ncol=numbet+1)
for (i in 1:numtri) {
x <- sample(c(0,1), numbet, prob=c(prob, 1-prob), replace = TRUE)
xcum[i, ] <- c(i, cumsum(x)/cumsum(1:numbet))
}
colnames(xcum) <- c("trial", paste("bet", 1:numbet, sep=""))

mxcum <- reshape(data.frame(xcum), varying=1+1:numbet, 
idvar="trial", v.names="outcome", direction="long", timevar="bet")

library(plyr)
mxcum2 <- ddply(mxcum, .(bet, outcome), nrow)
mxcum3 <- ddply(mxcum2, .(bet), summarize, 
            ymin=c(0, head(seq_along(V1)/length(V1), -1)), 
            ymax=seq_along(V1)/length(V1),
            fill=(V1/sum(V1)))
head(mxcum3)

library(ggplot2)

p <- ggplot(mxcum3, aes(xmin=bet-0.5, xmax=bet+0.5, ymin=ymin, ymax=ymax)) + 
geom_rect(aes(fill=fill), colour="grey80") + 
scale_fill_gradient("Outcome", formatter="percent", low="red", high="blue") +
scale_y_continuous(formatter="percent") +
xlab("Bet")

print(p) 
```

（因此可能需要稍微更改此[代码](https://stackoverflow.com/questions/10146109/formatter-argument-in-scale-continuous-throwing-errors-in-r-2-15)）

这*几乎*正​​是我想要的。除了每个竖井应该有不同数量的垃圾箱，即第一个应该有2个，第二个应该有3个，第三个应该有4个（N+1）。在图中，轴 6 +7 具有相同数量的箱 (7)，其中 7 应该有 8 (N+1)。

如果我是对的，代码这样做的原因是因为它是观察到的数据，如果我进行更多试验，我们会得到更多的垃圾箱。我不想依靠试验次数来获得正确数量的垃圾箱。

**如何调整此代码以提供正确数量的垃圾箱？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T23:00:22.960

我已经使用 R`dbinom`来生成`n=1:32`试验的正面频率并现在绘制图表。这将是你所期望的。我在 SO 和 上阅读了您之前的一些帖子`math.stackexchange`。仍然我不明白你为什么要进行`simulate`实验而不是从二项式 RV 生成如果你能解释它，那就太好了！我将尝试使用@Andrie 的模拟解决方案来检查我是否可以匹配下面显示的输出。现在，这里有一些你可能感兴趣的东西。

```
set.seed(42)
numbet <- 32
numtri <- 1e5
prob=5/6

require(plyr)
out <- ldply(1:numbet, function(idx) {
    outcome <- dbinom(idx:0, size=idx, prob=prob)
    bet     <- rep(idx, length(outcome))
    N       <- round(outcome * numtri)
    ymin    <- c(0, head(seq_along(N)/length(N), -1))
    ymax    <- seq_along(N)/length(N)
    data.frame(bet, fill=outcome, ymin, ymax)
})

require(ggplot2)
p <- ggplot(out, aes(xmin=bet-0.5, xmax=bet+0.5, ymin=ymin, ymax=ymax)) + 
geom_rect(aes(fill=fill), colour="grey80") + 
scale_fill_gradient("Outcome", low="red", high="blue") +
xlab("Bet") 
```

`The plot:`

![ggplot2](../Images/dbf2f9a25cf2eff8f05e9bfd3a3a926a.png)

**编辑：**解释你的旧代码是如何`Andrie`工作的，以及为什么它没有给出你想要的。

基本上，安德烈所做的（或者更确切地说是一种看待它的方式）是使用这样的想法，即如果你有两个二项分布，`X ~ B(n, p)`并且`Y ~ B(m, p)`，其中`n, m = size`和`p = probability of success`，那么它们的总和，`X + Y = B(n + m, p)`（1）。所以，目的`xcum`是为了得到所有`n = 1:32`折腾的结果，但为了更好地解释，让我一步一步构造代码。伴随着解释， for 的代码`xcum`也将非常明显，并且可以立即构建（无需每次都`for-loop`构建一个。`cumsum`

如果您到目前为止一直关注我，那么，我们的想法是首先创建一个`numtri * numbet`矩阵，每列 ( `length = numtri`) 分别具有`0's`和`1's`概率 =`5/6`和`1/6`。也就是说，如果你有`numtri = 1000`，那么，你将有 ~ 834`0's`和 166 `1's`* 为每一`numbet`列（= 32 这里）。让我们先构建它并测试它。

```
numtri <- 1e3
numbet <- 32
set.seed(45)
xcum <- t(replicate(numtri, sample(0:1, numbet, prob=c(5/6,1/6), replace = TRUE)))

# check for count of 1's
> apply(xcum, 2, sum)
[1] 169 158 166 166 160 182 164 181 168 140 154 142 169 168 159 187 176 155 151 151 166 
163 164 176 162 160 177 157 163 166 146 170

# So, the count of 1's are "approximately" what we expect (around 166). 
```

`n = 1`现在，这些列中的每一列都是具有和的二项分布样本`size = numtri`。如果我们将前两列相加并用这个总和替换第二列，那么，从 (1) 开始，由于概率相等，我们最终会得到一个二项式分布`n = 2`。同样，相反，如果您添加了前三列并用这个总和替换了第 3 列，您将获得二项式分布，`n = 3`依此类推...概念是，如果您`cumulatively`添加每一列，那么您最终会得到`numbet`二项分布的数量（此处为 1 到 32）。所以，让我们这样做。

```
xcum <- t(apply(xcum, 1, cumsum))

# you can verify that the second column has similar probabilities by this:
# calculate the frequency of all values in 2nd column.
> table(xcum[,2])
  0   1   2 
694 285  21 

> round(numtri * dbinom(2:0, 2, prob=5/6))
[1] 694 278  28
# more or less identical, good! 
```

如果你划分`xcum`，到目前为止，我们`cumsum(1:numbet)`以这种方式在每一行上生成：

```
xcum <- xcum/matrix(rep(cumsum(1:numbet), each=numtri), ncol = numbet) 
```

这将与产生的`xcum`矩阵相同`for-loop`（如果您使用相同的种子生成它）。但是，我不太明白 Andrie 进行这种划分的原因，因为这对于生成您需要的图表不是必需的。但是，我想这与您[在之前关于 math.stackexchange 的帖子中](https://math.stackexchange.com/questions/37655/calculate-number-of-sequences-in-frequency-matrix)`frequency`谈到的值有关

现在谈谈为什么你很难获得我附上的图表（带`n+1`垃圾箱）：

`n=1:32`对于带有试验的二项分布，`5/6`作为尾部概率（失败）和正面`1/6`概率（成功），正面概率由`k`下式给出：

```
nCk * (5/6)^(k-1) * (1/6)^k # where nCk is n choose k 
```

对于我们生成的测试数据，对于`n=7`和（试验），和正面`n=8`的概率由下式给出：`k=0:7``k=0:8`

```
# n=7
   0    1    2     3     4     5 
.278 .394 .233  .077  .016  .002 

# n=8
   0    1    2    3     4      5 
.229 .375 .254 .111  .025   .006 
```

为什么他们都有 6 个箱子而不是 8 个和 9 个箱子？当然，这与 的值有关`numtri=1000`。让我们通过直接从二项分布生成概率来了解这 8 个和 9 个 bin 中的每一个的概率是多少，`dbinom`以了解为什么会发生这种情况。

```
# n = 7
dbinom(7:0, 7, prob=5/6)
# output rounded to 3 decimal places
[1] 0.279 0.391 0.234 0.078 0.016 0.002 0.000 0.000

# n = 8
dbinom(8:0, 8, prob=5/6)
# output rounded to 3 decimal places
[1] 0.233 0.372 0.260 0.104 0.026 0.004 0.000 0.000 0.000 
```

你看到对应`k=6,7`和`k=6,7,8`对应`n=7`的概率`n=8`是 ~ `0`。它们的价值非常低。这里的最小值`5.8 * 1e-7`实际上是 ( `n=8`, `k=8`)。这意味着如果您进行`1/5.8 * 1e7`多次模拟，您有机会获得 1 个值。如果对 进行相同检查`n=32 and k=32`，则值为`1.256493 * 1e-25`。因此，您必须模拟那么多值才能获得至少 1 个结果，其中所有`32`结果都指向`n=32`.

这就是为什么您的结果没有某些 bin 的值的原因，因为对于给定的`numtri`. 出于同样的原因，直接从二项分布生成概率克服了这个问题/限制。

我希望我已经设法写得足够清晰，以便您遵循。让我知道您是否遇到困难。

**编辑2：** 当我模拟我刚刚在上面编辑过的代码时`numtri=1e6`，我得到了`n=7`and并计算了and`n=8`的正面数：`k=0:7``k=0:8`

```
# n = 7
     0      1      2      3      4      5      6      7 
279347 391386 233771  77698  15763   1915    117      3 

# n = 8
     0      1      2      3      4      5      6      7      8 
232835 372466 259856 104116  26041   4271    392     22      1 
```

请注意，对于 n=7 和 n=8，现在有 k=6 和 k=7。此外，对于 n=8，k=8 的值为 1。随着增加`numtri`，您将获得更多其他丢失的垃圾箱。但这需要大量的时间/内存（如果有的话）。

# java - URLDecoder：转义 (%) 模式中的非法十六进制字符 - 对于输入字符串：“^*”

> ID：14363254
> 
> 赞同：1
> 
> 时间：2013-01-16T16:37:50.187
> 
> 标签：java, email, encode, uriencoding

我想发送一封电子邮件这个文本

`Destination : 6W - ATLANTA WEST!@#$%^*!gemini!@#$%^*!jfds!@#$%^*!,Trailer Number : 000564,,Drop empty trailer at Plant Numbe :546,Pick up trailer at Plant Number :45, Bill Date : 25-Jan-2013,Bill Time - Eastern Time : 1,Trip Number :456,MBOL :546,Carrier :Covenant!@#$%^*!test@shaw.com!@#$%^*!transport@shaw.com!@#$%^*!test@transport.com!@#$%^*!antoalphi@gmail.com,Destination : 6W - ATLANTA WEST!@#$%^*!gemini!@#$%^*!jfds!@#$%^*!,Customer Name : 567,Cusomer Delivery Address : 657567657,General Comments :657,Warehouse Comments : 65,Carrier Comments : ,Appointment Date :25-Jan-2013,Appointment Time : 1am,Rail Only :Standard,Total Weight : 45645`

我使用了这个`mailContent = URLDecoder.decode(Body, "UTF-8");`解码器，

但它给了我这个例外`URLDecoder: Illegal hex characters in escape (%) pattern - For input string: "^*"`

你们中的任何人都可以帮助我，如何解决这个问题。我在发送邮件时收到此消息。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:39:50.410

您正在尝试对最初不是 URL 编码的内容进行 URL 解码。身体有什么问题？换句话说，如果你只使用会发生什么：

```
mailContent = Body 
```

（在 URL 编码中，% 字符与两个十六进制数字一起使用来对可能导致问题的字符进行编码，例如`/`将被编码为`%2F`，因为它的 ASCII 代码是 47（十进制）或 2F（十六进制）。在你的身体中，`%`后面跟着通过两个不是十六进制数字的字符 - 这就是我可以告诉它没有被 URL 编码的方式，以及解码器出错的原因。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:48:28.127

只需停止调用 URLDecoder.decode() ，您将停止收到错误！您传递给它的字符串值不是 URL 编码的。

如果您要发送的电子邮件的内容通常不允许在没有编码的电子邮件中出现，那么您可能需要考虑多种形式的 MIME 编码。参考资料可能很方便：

1.  SMTP 允许什么：http: [//www.apps.ietf.org/rfc/rfc788.html](http://www.apps.ietf.org/rfc/rfc788.html)
2.  基本 MIME 编码： http: [//www.apps.ietf.org/rfc/rfc1341.html](http://www.apps.ietf.org/rfc/rfc1341.html)
3.  Java MIME 支持： [http ://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeUtility.html](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeUtility.html)

例如，您可以尝试：

```
String sendable = MimeUtility.encodeText(body,"UTF-8","BASE64") 
```

# regex - 在某些条件下使用 .htaccess 从 https 重定向到 http

> ID：14363257
> 
> 赞同：1
> 
> 时间：2013-01-16T16:38:03.910
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-rewriting

我在这个问题上摸不着头脑。我需要设置一个规则，所以当有人在我的网站上使用 /members/ 的 url 访问地址时，它会自动从 https 切换回 http。

有点像

```
RewriteCond %{REQUEST_URI} ^/members/
RewriteRule ^(.*)$ http://www.domain-name.co.uk/$1 
```

好吧，我对这类问题不是很好，所以非常感谢一些帮助。

编辑当前.htaccess

```
 #RewriteCond %{HTTPS} on
    #RewriteCond %{REQUEST_URI} !(acatalog)
    #RewriteRule ^(.*)$ http:// %{SERVER_NAME}%{REQUEST_URI} [R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:14:38.713

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTPS} on
RewriteRule ^(members/.*)$ http://%{HTTP_HOST}/$1 [L,R,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:59:47.603

这应该可以解决问题：

```
RewriteEngine On
RewriteCond %{HTTPS} on
RewriteRule ^members/(.*) http://www.domain-name.co.uk/members/$1 
```

`RewriteCond %{HTTPS} on`检查是否使用了 https。只有当这是真的时，RewriteRule 才会被激活。

# api - Foursquare api 调用我的签到

> ID：14363259
> 
> 赞同：0
> 
> 时间：2013-01-16T16:38:08.303
> 
> 标签：api, foursquare

我在集成foursquare API 时遇到了很大的麻烦。我想做的就是从指定的时间戳获取我的签到。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:33:40.257

使用带有/参数的[/users/checkins](https://developer.foursquare.com/docs/users/checkins)端点来获取时间范围内的签入。`beforeTimestamp``afterTimestamp`

# asp.net - 网络抓取电话号码

> ID：14363263
> 
> 赞同：0
> 
> 时间：2013-01-16T16:38:42.893
> 
> 标签：asp.net, vb.net, html-agility-pack

我是 HtmlAgilityPack 的新手，对我来说它是如何工作的有点不清楚。让我们说一下何时编写类似这段代码的内容

```
Dim url1 As String = "http://www.bing.com/search?q=Verizon
Dim hw As New HtmlWeb()
Dim doc As HtmlDocument = hw.Load(url1)
For Each link As HtmlNode In doc.DocumentNode.SelectNodes("//a[@href]")

Dim att As HtmlAttribute = link.Attributes("href")
Response.Write(att.Value)

Next 
```

1.  那么什么时候`SelectNodes`是`//a[@href]`意味着它只会查看`ahref`标签？
2.  如果是这样，我怎样才能让它考虑循环中的其他标签，例如`<li>, <h3>, <div>`. 像这样正确`//li[@class='wrap']|//div[@class='last']`吗？？
3.  如何获取和呈现这些标签之间的数据。

另一个问题是，假设我需要从该 url 中抓取一个电话号码，该号码可能不可用或可能不在任何定义的标签中。我可以使用任何可靠的方法来获取相关搜索词的电话号码吗？有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:56:32.483

实际上，当前的 xpath 会查看具有 href 参数的锚标记。我建议您阅读 xpath 语法（例如在[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)）

要选择其他节点，您需要更改 xpath 以选择这些标签，例如：

```
doc.DocumentNode.SelectNodes("//li") 
```

获取所有 li 节点等。

可以使用所选文档节点的 InnerHtml 访问标签中的数据（在您的示例中为 link.InnerHtml）

自动抓取电话号码真的很痛苦，每个国家使用不同的长度，并且有许多不同的格式来写一个号码：+12(0)3456 +123456 00123456 +12(0)34-56 都是相同的有效电话号码...请参阅[检查字符串 C# 中是否有电话号码以](https://stackoverflow.com/questions/11607103/check-if-there-is-phone-number-in-string-c-sharp)获得简单的解决方案

GL&HF！

# javascript - 剑道网格，水平滚动和列大小

> ID：14363264
> 
> 赞同：9
> 
> 时间：2013-01-16T16:38:45.130
> 
> 标签：javascript, kendo-ui, kendo-grid

默认情况下，剑道网格将扩展以填充其包含的 div。它只是一个表格元素，所以本质上是这样。

```
<table role="grid">
<colgroup>
<col style="width:200px"> // etc
<colgroup>
<thread>
// content
</thread>
</table> 
```

但是，当您添加更多列（或太多列）时，它们会来回缩放以适应。我想要水平滚动条溢出。

为此，我添加了一些在启动、添加和重新排序时运行的代码。

```
 this._initWidths = function () {
     var totalWidth = 0;
     for (var i = 0; i < grid.columns.length; i++) {
        var width = grid.columns[i].width;
        $('#myGrid .k-grid-header-wrap colgroup col').eq(i).css('width', width + 'px');
        $('#myGrid .k-grid-content colgroup col').eq(i).css('width', width + 'px');
        totalWidth = totalWidth + width;
     }
     table.css('width', totalWidth + 'px');
  }; 
```

然而，剑道似乎有自己的逻辑来反对这一点。Colgroup 条目将开始被删除，搞砸一切。

我能做些什么来阻止这一切吗？有没有更好的方法来做我想做的事？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T18:14:05.940

我有一个表格容器：

```
<div id="myWindow">
    <div id="myGrid"></div>
</div> 
```

并应用了以下样式：

```
#myWindow {
    width: 400px;
    overflow-x: scroll;
} 
```

您可以在其中看到我将宽度强制为 400 像素并隐藏（和滚动）溢出的内容。

然后我定义以下内容`grid`：

```
var grid = $("#myGrid").kendoGrid({
    dataSource : {
        data    : entries,
        schema  : {
            model: {
                id: "city"
            }
        },
        pageSize: 5
    },
    columns    : [
        { field: "city", title: "City", width: 100 },
        { field: "time", title: "Time", format: "{0:HH:mm}", width: 200},
        { field: "datetime", title: "Date - Time", format: "{0:yyyy-MM-dd HH:mm}", width: 300 }
    ],
    sortable   : {
        mode       : "single",
        allowUnsort: false,
        field      : "city"
    },
    editable   : "popup",
    navigatable: true,
    pageable   : true
}).data("kendoGrid"); 
```

我得到网格水平溢出其容器大小的效果。

看到它在[这里运行](http://jsfiddle.net/OnaBai/BBWU7/2/)

**注意**更棒的是，它`paging`始终保持在可见区域中的 400px 拟合，而网格实际上是`100 + 200 + 300 = 600`（`width`的`columns`）

**编辑：**如果您希望 的`width`与 `grid`的总和相同，`columns`那么您应该添加（在初始化网格之后）。

```
var totalWidth = 0;
for (var i = 0; i < grid.columns.length; i++) {
  var width = grid.columns[i].width;
  totalWidth = totalWidth + width;
}
grid.element.css('width', totalWidth + 'px'); 
```

循环计算总宽度，然后我将表格设置为它（不需要更改列，因为它们是正确的）。

[在这里](http://jsfiddle.net/OnaBai/BBWU7/6/)设置

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T22:08:46.557

您只需要确保 Grid 是**可滚动**的并设置创建 Grid 的元素的宽度。

```
<div id="myGrid" style='width:500px;'></div>

var grid = $("#myGrid").kendoGrid({
    scrollable:true,
    //...
}) 
```

[这](http://jsfiddle.net/BBWU7/3/)是在行动。

# sql - 仅将一条重复记录的列值设置为 0？

> ID：14363266
> 
> 赞同：0
> 
> 时间：2013-01-16T16:38:46.773
> 
> 标签：sql, sql-server

我有下表，并且我想将已删除列的值设置为零，仅针对具有重复名称的记录之一。

```
id     name      deleted
------------------------
1      a         1
2      a         1
3      a         1
4      b         1
5      c         1
6      d         1 
```

所以输出将是：

```
id     name      deleted
------------------------
1      a         0
2      a         1
3      a         1
4      b         0
5      c         0
6      d         0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:47:46.110

如果您的 dbms 是 SQL-Server(>= 2005)，您可以使用`CTE`with `ROW_NUMBER`：

```
WITH CTE AS
(
   SELECT ID, Name, Deleted,
     RN = ROW_NUMBER() OVER(PARTITION BY name ORDER BY ID)
   FROM dbo.T
)
UPDATE CTE 
SET Deleted = 0
WHERE RN = 1 
```

[**演示**](http://www.sqlfiddle.com/#!6/1c0b2/7/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:49:03.233

```
UPDATE Tbl SET deleted = 0 WHERE id IN
(SELECT MIN(id) FROM Tbl GROUP BY name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:43:14.007

```
UPDATE A
SET A.deleted = 0
FROM Tbl A
   LEFT JOIN Tbl B
     ON A.Name = B.Name
        AND A.Id > B.Id
WHERE B.Id IS NULL 
```

# java - Key-Value 参数匹配通配符

> ID：14363268
> 
> 赞同：4
> 
> 时间：2013-01-16T16:39:02.367
> 
> 标签：java, data-structures, hash, wildcard

我有大量映射到文件路径的键值参数。大多数有以下形式

```
filepath : /some/path
param_name_1 => 1234
param_name_2 => qwerty 
```

但其他可以包含通配符

```
filepath : /other/path
param_name_1 => 123*4
param_name_2 => ab?12 
```

其中`?`是匹配任何一个字符`*`的通配符，是匹配 0+ 个字符的通配符。

我的用户可以提供他们自己的一组 KV 参数，我必须匹配并返回映射路径。

示例：用户提供

```
param_name_1 => 1234
param_name_2 => qwerty

Application returns /some/path 
```

用户提供

```
param_name_1 => 123asdqweqweqdqweq1231asdcase4
param_name_2 => abW12

Application returns /other/path 
```

对于所有不包含通配符的映射，我可以计算`hashCode()`我存储的映射和用户提供的映射，并进行`HashMap`非常快的查找（匹配 3-4 个参数，100000 个映射，在 0 毫秒内，这是一个毕竟哈希）。

但是，对于包含通配符的映射，我有点坚持通过包含通配符的所有映射的列表进行线性查找。大约有 2000-5000 个这样的映射，每次查找只需要不到 200 毫秒，我需要加快速度。

有没有一种方法可以进行一般查找以匹配通配符或其他可以结合所有映射的匹配技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:45:15.790

如果您使用 a`TreeMap`而不是 a `HashMap`，则可以进行前缀搜索以减少必须迭代的项目数。只需抓住出现在`*`or之前的字符`?`，并遍历以这些字符开头的所有键。当然，如果您的搜索词以通配符开头，这将不起作用。

解决这个问题的另一种常见方法是使用字符`ngrams`或一些基于 trie 的结构，但这要复杂得多。

# r - 将 sql 结果重新格式化为 R 中的矩阵

> ID：14363269
> 
> 赞同：1
> 
> 时间：2013-01-16T16:39:02.990
> 
> 标签：r, reshape

我使用以下方法从 R 中的 SQL 数据框中检索数据：

```
query <- "SELECT date, identifier, somevalue FROM mytable"
data <- sqlQuery(conn, query) 
```

这给了我：

```
> data
        date identifier somevalue
1 2011-01-01          1      0.50
2 2011-01-02          1      0.40
3 2011-01-01          2      0.70
4 2011-01-02          2      0.10
5 2011-01-03          2      0.25

data <- data.frame(date=c("2011-01-01","2011-01-02","2011-01-01","2011-01-02","2011-01-03"), identifier=c(1,1,2,2,2), somevalue=c(0.5,0.4,0.7,0.1,0.25)) 
```

我想将其转换为使用日期作为行名和标识符作为列名的数字矩阵：

```
> output
             1    2
2011-01-01 0.5 0.70
2011-01-02 0.4 0.10
2011-01-03  NA 0.25

output <- matrix(c(0.5,0.4,NA,0.7,0.1,0.25),3)
rownames(output) <- c("2011-01-01","2011-01-02","2011-01-03")
colnames(output) <- c(1,2) 
```

我不知道该怎么做。我已经调查过`reshape`并且也调查过，`match`但由于有重复的行名或标识符，我总是失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:44:48.597

我通常使用`dcast`from **reshape2**（但有很多方法可以做到这一点）：

```
dcast(data,
      date~identifier,
      fun.aggregate = sum,
      value.var = "somevalue",
      fill = NA_real_)
        date   1    2
1 2011-01-01 0.5 0.70
2 2011-01-02 0.4 0.10
3 2011-01-03  NA 0.25

step1 <- dcast(data,
               date~identifier,
               fun.aggregate = sum,
               value.var = "somevalue",
               fill = NA_real_)
m <- as.matrix(step1[,-1])
rownames(m) <- step1$date
> m
             1    2
2011-01-01 0.5 0.70
2011-01-02 0.4 0.10
2011-01-03  NA 0.25 
```

我遇到的一个小问题是使用“正确”的 NA 值，在这种情况下是`NA_real_`. 如果我尝试任何一个或者这对我来说没有多大意义，`dcast`就会抛出一个错误，但我没有考虑很久。`NA``NA_integer_`

**编辑**好的，现在我明白了。NA 类型显然需要与其余数据的类型相匹配。我期待`dcast`能够转换为适当的 NA 类型，但我想不会。

# cakephp - 使用 CakePHP 的 LDAP 身份验证

> ID：14363270
> 
> 赞同：0
> 
> 时间：2013-01-16T16:39:04.380
> 
> 标签：cakephp, authentication, ldap

我正在尝试创建一个应用程序，其中通过在 CakePHP 上检查针对 LDAP 的输入条件来完成授权部分。我正在关注[此页面中链接](http://lanrat.com/ldap-authentication-for-cakephp/)的文本，但我遇到了问题。我不想使用任何用户表，我对存储数据没有兴趣。我要做的就是授予用户访问权限，以防他们有任何 LDAP 凭据。我设法建立连接并检查数据，但应用程序不会保存会话，因此用户永远不会登录。你知道我做错了什么吗？

这是登录功能：

```
 public function login() {
    /*if($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash("Invalid data provided");
        }
    }*/
    App::import('Lib', 'ldap');
    if ($this->Session->read('Auth.User')) {
         $this->redirect(array('controller' => 'allocations', 'action' => 'index'));
    } elseif (!empty($this->data)) {
        $ldap = new ldap;
        if ($ldap->auth($this->Auth->request->data['User']['username'], $this->Auth->request->data['User']['password'])) {
            /*$userrow = $this->User->findByUsername($this->data['User']['username']);
            if (!$userrow) {
                $ldap_info = $ldap->getInfo($this->data['User']['username']);
                $this->data['User']['user'] = $this->data['User']['username'];
                $this->data['User']['name'] = $ldap_info['name'];
                $this->data['User']['group_id'] = 3; //sets the default group
                $this->add();
                $userrow = $this->User->findByUsername($this->data['User']['user']);
            }

            $user = $userrow['User'];*/
            $user = array()
            $this->Auth->Session->write($this->Auth->sessionKey, $user);
            $this->Auth->_loggedIn = true;
            $this->redirect($this->Auth->redirect());
            $this->Session->setFlash('You are logged in!');
        } else {
            $this->Session->setFlash(__('Login Failed', true));
        }
    }
} 
```

我尝试调试 ldap->auth（它基本上调用存储在外部库中的 ldap_bind 函数），并且 auth 的结果是正确的（该方法返回“true”）。所以问题必须在会话的创建中。我如何让 CakePHP 知道用户已经正确登录并且它必须存储会话？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:55:20.170

您可以通过以下方式将用户数据从 ldap 写入会话

```
$this->Session->write('Auth.User', array(
    'id' => 1,
    'username' => 'admin'
)); 
```

我使用上面的代码在会话中设置用户。它与 AuthComponent 一起使用。
您可以通过 AuthComponent::user() 检查/获取用户详细信息

# powershell - 从 powershell 脚本向 cmd.exe 发送“任意键”

> ID：14363278
> 
> 赞同：2
> 
> 时间：2013-01-16T16:39:45.760
> 
> 标签：powershell

我有以下 PowerShell 脚本：

```
cmd /c script1.bat
cmd /c script2.bat 
```

script1.bat 在执行结束时有“暂停”命令，所以我的 PS 脚本的执行停止了。

如何发送任何密钥 cmd.exe 以避免停止脚本执行？注意：我无法更改批处理脚本 - 它们是第 3 方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T17:50:21.737

您可以像这样通过管道将输入输入到程序 (cmd.exe)：

`"X" | cmd /c script1.bat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:41:32.000

`pause.bat`您可以在同一目录中放置一个名为的空文件。然后它什么也不做，而是暂停。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:43:17.877

批处理脚本可能是第 3 方，但您肯定可以只复制/备份并编辑内容以删除 PAUSE 命令吗？

如果我正在测试某些东西并且不想关闭窗口，我有时会暂停，但否则我想不出一个很好的理由来保留它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-02-21T14:56:59.017

由于 bat 文件路径中有一个表达式，我无法让接受的答案为我工作。

```
"x" | $Env:WRAPPER_HOME\bat\installService.bat $LOGFILE 
```

错误是“表达式只允许作为管道的第一个元素。”

这是我的工作（最后）：

【PS脚本代码】

```
& runner.bat bat_to_run.bat logfile.txt 
```

[跑步者.bat]

```
@echo OFF

REM This script can be executed from within a powershell script so that the bat file
REM passed as %1 will not cause execution to halt if PAUSE is encountered.
REM If {logfile} is included, bat file output will be appended to logfile.
REM
REM Usage:
REM runner.bat [path of bat script to execute] {logfile}

if not [%2] == [] GOTO APPEND_OUTPUT
@echo | call %1
GOTO EXIT

:APPEND_OUTPUT
@echo | call %1  1> %2 2>&1

:EXIT 
```

# c++ - 代码在 Visual Studio 中编译得很好，但在使用 g++ 的 Unix 终端中编译得不好。我在多维向量处遇到错误。为什么？

> ID：14363287
> 
> 赞同：0
> 
> 时间：2013-01-16T16:40:08.527
> 
> 标签：c++, visual-studio, g++

代码编译，并使用 Visual Studio 按预期运行。我知道永远不能保证它会在其他地方编译/运行，但我不明白为什么在这种情况下。也许有人可以帮助澄清？g++ 编译器在第 45 行给了我错误，其中声明了 RGB 类型的向量的向量：

```
#include <iostream>
#include <string>
#include <vector>
#include <fstream>

using namespace std;

/*  The following color method uses the provided formula to determine
the float value of each (i,j) coordinate passed as parameters.  */

float color (int i, int j)
{
    float col = float (((i & 0x08) == 0) ^ ((j & 0x08) == 0));

    return col;
}

int main()
{
    // The provided RGB object that stores each rgb value:
    struct RGB
    {
        float r;
        float g;
        float b;
    };

    int w;
    int h;
    string filename;
    float c; // to store the result from the color method.

    cin >> w >> h >> filename;

    // A vector of vectors to represent the 2D array:
    vector< vector<RGB> > rgb(h, vector<RGB>(w));

    for (int i = 0; i < h; i++)
        for (int j = 0; j < w; j++)
        {
            c = color(i, j);
            rgb[i][j].r = c;
            rgb[i][j].g = c;
            rgb[i][j].b = c;
        }

        ofstream ppmfile;
        ppmfile.open (filename);
        ppmfile << "P3\n" << w << " " << h << endl;
        ppmfile << "255\n";

        for (int i = 0; i < h; i++)
        {
            // The following loop uses integer multiplication to output to the ppm
            // file the rgb values converted to integers on the 0-255 scale.
            for (int j = 0; j < w; j++)
            {
                ppmfile << rgb[i][j].r * 255 << " ";
                ppmfile << rgb[i][j].g * 255 << " ";
                ppmfile << rgb[i][j].b * 255;
                if (j != (w-1))
                    ppmfile << " ";
            }
            ppmfile << endl;
        }

        return 0;
} 
```

以下是 g++ 中弹出的错误的完整列表：

```
hw1.cxx: In function 'int main()':
hw1.cxx:45: error: template argument for 'template<class _Alloc> class std::allocator' uses local type 'main()::RGB'
hw1.cxx:45: error:   trying to instantiate 'template<class _Alloc> class std::allocator'
hw1.cxx:45: error: template argument 2 is invalid
hw1.cxx:45: error: template argument 1 is invalid
hw1.cxx:45: error: template argument 2 is invalid
hw1.cxx:45: error: invalid type in declaration before '(' token
hw1.cxx:45: error: template argument for 'template<class _Alloc> class std::allocator' uses local type 'main()::RGB'
hw1.cxx:45: error:   trying to instantiate 'template<class _Alloc> class std::allocator'
hw1.cxx:45: error: template argument 2 is invalid
hw1.cxx:45: error: initializer expression list treated as compound expression
hw1.cxx:51: error: invalid types 'int[int]' for array subscript
hw1.cxx:52: error: invalid types 'int[int]' for array subscript
hw1.cxx:53: error: invalid types 'int[int]' for array subscript
hw1.cxx:57: error: no matching function for call to 'std::basic_ofstream<char, std::char_traits<char> >::open(std::string&)'
/usr/local/gcc443/lib/gcc/i386-pc-solaris2.10/4.4.3/../../../../include/c++/4.4.3/fstream:696: note: candidates are: void std::basic_ofstream<_CharT, _Traits>::open(const char*, std::_Ios_Openmode) [with _CharT = char, _Traits = std::char_traits<char>]
hw1.cxx:67: error: invalid types 'int[int]' for array subscript
hw1.cxx:68: error: invalid types 'int[int]' for array subscript
hw1.cxx:69: error: invalid types 'int[int]' for array subscript 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:52:13.557

我记得 C++03 禁止在模板中使用具有内部链接的类型。

您应该从 main() 函数中提取 RGB 类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:52:27.797

在 C++03 中（几乎可以肯定你在 g++ 4.4.3 中得到的）问题是本地类型和具有内部链接的类型不能用作模板参数。在这种情况下，您的`RGB`类是在其中定义的`main`，不能用作`vector`.

C++11 放宽了限制，但我不记得是否（函数）本地类型仍然被禁止。Visual Studio 可能正在使用 C++11 规则，而 g++ 没有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T17:02:26.903

我看到两个错误：

```
vector< vector<RGB> > rgb(h, vector<RGB>(w)); 
```

对于函数的“本地”类型，C++03 不允许这样做，因此将定义移出 main()。

此外，该`open`函数不`std::string`作为参数，而是 const char *。所以改变

```
ppmfile.open (filename); 
```

到

```
ppmfile.open( filename.c_str() ); 
```

# java - 在特定情况下，Java 怎么可能不是类型安全的？

> ID：14363290
> 
> 赞同：9
> 
> 时间：2013-01-16T16:40:18.283
> 
> 标签：java, jakarta-ee, spring-data-jpa

今天我发现JVM 的一个**非常奇怪的行为**`List<Date>`， a （通常是类型安全的）在运行时确实持有 a `List<MyObject>`！

我想知道这怎么可能发生，但在网上找不到任何东西。

情况就是这样：我正在`Spring Data JPA 1.2.0`使用`JBoss EAP 6.0 Server`with `JRE 1.6.0_18-b07`。

错误地，在一个类中，表达式`Spring Data JPA Repository`中写入了错误的结果类型。`@Query`它应该是：

```
 @Query("select distinct trunc(record.orderDateTime) from MyType record [...]" )
  public List<Date> getOrderDates(...); 
```

但是是：

```
 @Query("select record from MyType record [...]" )
  public List<Date> getOrderDates(...); 
```

因此，目的是加载日期列表`java.util.Date`（

但是那个编码错误导致了以下结果：在运行时，实际上`List<MyType>`返回的是 a，即使方法的签名定义了一个`List<Date>`. 同样在我的模型中，一个属性`List<Date>`是/包含一个`List<MyType>`. 我调试了它，简直不敢相信自己的眼睛！`MyType`我什至可以将此列表的内容写入 JSP（我只认识到这种奇怪的行为，因为由于尝试键入 match from to时出现 Spring Expression Language 错误而无法再显示 JSP `Date`，这当然有坠毁）。

见鬼，我现在应该对 Java 的类型安全失去信心吗？

有没有人遇到过这样的问题？

是否存在对此的解释？

我可以做些什么来解决这个问题还是这是一个普遍问题？也许是另一个版本的 JRE、JBOSS，...？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T16:44:30.643

> 我想知道这怎么可能发生，但在网上找不到任何东西。

发生这种情况是因为泛型*主要*是仅编译时的功能。元数据根据类的类型参数、字段等进行维护......但在执行时，类型参数（大部分）丢失。例如：

```
Object x = new ArrayList<String>();
Object y = new ArrayList<Integer>();
System.out.println(x.getClass() == y.getClass()); // True 
```

JVM 无法区分 - 这就是为什么您在尝试强制转换时会收到警告：

```
// At execution time, this cast will *really* only check for List
List<String> dodgyCast = (List<String>) y; 
```

在*大多数*情况下，编译器使用泛型保持“常规”代码的安全。但是，当你有像 ORM 这样通过反射或动态字节码提供值的东西时，所有这些安全性都会消失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T16:51:05.993

[可悲的是，由于类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，这种事情可能会发生。您在集合中设置的类型仅在编译时检查，而不是运行时检查。

问题是您的查询没有被编译，所以 Java 无法知道它将返回什么样的对象。为了避免这种行为，我总是为我的查询创建测试。

# visual-studio - 如何使 Visual Studio 2012 始终在第二台显示器上打开源文件？

> ID：14363291
> 
> 赞同：1
> 
> 时间：2013-01-16T16:40:20.643
> 
> 标签：visual-studio, visual-studio-2012

我正在尝试改进在多台显示器上使用 VS 的方式。我想在一台显示器上拥有解决方案资源管理器、团队资源管理器和我所有的错误窗口、部署窗口、包资源管理器等。

我希望我正在编辑的任何文件在第二台显示器上打开最大化。

我可以轻松地移动源文件并在第二台显示器上使其全屏显示，但我在源浏览器中双击的任何新文件总是使用我的解决方案资源管理器等在第一台显示器的小窗格中打开。

这解释了如何打开第二个解决方案资源管理器并将它与我的源代码控制文件对接[http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/05/working-with-multiple-solution-explorer-windows -in-visual-studio-2012.aspx](http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/05/working-with-multiple-solution-explorer-windows-in-visual-studio-2012.aspx)

所以我可以用它在第二个窗口中打开文件。但是，我希望源代码控制文件全屏显示，因此只希望在主 Visual Studio 中使用解决方案资源管理器，并且只有一个。

这可能很明显，但似乎缺少如何实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:44:15.597

可能有一种更优雅的方式，但您可以尝试将主窗口移动到第二台显示器，并将所有其他面板从实际的 vs 窗口移到您的第一台显示器上。

# actionscript-3 - 每 XX 秒刷新一次

> ID：14363293
> 
> 赞同：0
> 
> 时间：2013-01-16T16:40:29.037
> 
> 标签：actionscript-3, flash, actionscript

我是 actionscript 和 flash 的新手，但我设法编写了从 php 文件中获取数据并每 30 秒刷新一次结果的代码：

```
var timerRefreshRate:Number = 30000;
var fatherTime:Timer = new Timer(timerRefreshRate, 0);
fatherTime.addEventListener(TimerEvent.TIMER, testaa);
fatherTime.start();

function testaa(event:Event):void{

    var loader:URLLoader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;
    loader.addEventListener(Event.COMPLETE,varsLoaded);
    loader.load(new URLRequest("data.php"));

    function varsLoaded (event:Event):void {
        this.opaqueBackground = loader.data.color;
        title.text=loader.data.title;
        banner_text.text=loader.data.text;

    }
} 
```

但现在我面临两个问题：

1.) 用户必须等待 30 秒才能首次加载电影

2.) 设置背景颜色不再起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:48:47.653

您可以调用一次函数以立即加载，而无需等待 30 秒。只需将函数的参数更改为默认为空事件即可：

```
function testaa(event:Event = null):void{    
   //...    
} 
```

现在您可以像这样调用该函数：

```
//...
fatherTime.start();
testaa(); 
```

因此，您启动计时器但立即运行该功能一次。

对于您的第二个问题，该问题很可能是您使用的是嵌套函数，因此`this`不是指您的类，而是指 testaa 函数。嵌套函数通常是不好的做法，如果可能的话，你应该避免它们。将函数和加载器引用移到外面，它应该可以工作。最终结果应该是这样的：

```
var loader:URLLoader;
var timerRefreshRate:Number = 30000;
var fatherTime:Timer = new Timer(timerRefreshRate, 0);
fatherTime.addEventListener(TimerEvent.TIMER, testaa);
fatherTime.start();
testaa();

function testaa(event:Event = null):void{

    loader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;
    loader.addEventListener(Event.COMPLETE,varsLoaded);
    loader.load(new URLRequest("data.php"));
}

function varsLoaded (event:Event):void {
    this.opaqueBackground = loader.data.color;
    title.text=loader.data.title;
    banner_text.text=loader.data.text;    
} 
```

# machine-learning - SKLearn 交叉验证：

> ID：14363298
> 
> 赞同：1
> 
> 时间：2013-01-16T16:40:41.147
> 
> 标签：machine-learning, classification, scikit-learn, document-classification

我正在进行文本分类，并将处理我的训练数据中未捕获的单词，这意味着该单词应被视为未知。

有谁知道如果训练数据中不存在某个特定单词，scikit 的交叉验证是否会将其视为看不见？

或者 scikit 是否会将所有单词都视为特征，即使它不在训练集中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:50:01.893

如果您在包含特征提取器（例如 CountVectorizer 或 TfidfVectorizer）和分类器的管道上进行交叉验证，那么一切都将自动开箱即用：仅出现在~~火车~~ **测试**集将被忽略（未映射到向量表示中的维度）。

[在有关文本特征提取的文档](http://scikit-learn.org/dev/modules/feature_extraction.html#text-feature-extraction)中，有更多关于如何使用`vocabulary_`属性将特征名称映射到维度的详细信息。

还有一个示例显示[了如何交叉验证包含特征提取组件和分类器的管道](http://scikit-learn.org/stable/auto_examples/model_selection/grid_search_text_feature_extraction.html)。

**编辑**：固定火车/测试错字

**编辑 2**：修复了示例的断开链接。

# database - LucidDB 项目有多健康？

> ID：14363299
> 
> 赞同：4
> 
> 时间：2013-01-16T16:40:42.563
> 
> 标签：database

我正在开发一个项目，该项目将从后端的列存储数据库中受益匪浅。我被 LucidDB 所吸引是因为它的功能集看起来很完美，而且在项目显示出价值之前，我不能承担像 Infobright 或 Vertica 这样的商业解决方案的成本。

问题是，我担心 LucidDB 项目的健康状况。内部wiki已经一个多月没有更新了，网站上到处都是断链。DynamoBI 的消亡无济于事。

有没有人知道项目的状态，以及你对依赖这个数据库的生产代码有多满意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:19:52.070

DynamoBI 将关闭商店，因此不再支持 LucidDB。

[http://www.nicholasgoodman.com/bt/blog/2012/10/08/dynamobi-is-dead/](http://www.nicholasgoodman.com/bt/blog/2012/10/08/dynamobi-is-dead/)

巴拉蒂什·杰西姆哈博士

# jquery - 列出内容的 jQuery 选项卡

> ID：14363300
> 
> 赞同：2
> 
> 时间：2013-01-16T16:40:44.630
> 
> 标签：jquery, list, tabs

所以，我不确定这是我做错了什么还是 jQuery 的问题。但是，当在选项卡中列出内容时，列表格式将被删除。

我的代码如下所示：

```
<div id="tabs">
    <ul>
        <li><a href="#tab1">Tab 1</a></li>
    </ul>
    <div id="tab1">
        <ul>
            <li>A list which isn't a tab</li>
        </ul>
    </div>
</div>

$("#tabs").tabs({ fx: { opacity: 'toggle' } }); 
```

当我在文档准备好后使用 jQuery 初始化选项卡时，第二个列表中的列表格式被删除。有没有办法阻止这种情况？

# c# - 有界树列表在其源被清除时需要时间

> ID：14363301
> 
> 赞同：1
> 
> 时间：2013-01-16T16:40:44.860
> 
> 标签：c#, winforms, devexpress, xtratreelist

使用 Dev Express 我有一个树列表，其数据源是绑定列表

在更新基础数据期间的某个时刻，我们手动调用：

```
 treeList.LockReloadNodes();
    list.Clear(); // binding list that is bound to the treelist
treeList.UnlockReloadNodes(); 
```

问题是调用 clear 非常慢，因为列表中的*每个*元素都会向树列表发送一个“元素已删除”事件，因此树列表必须重新计算其状态的次数与绑定列表中的元素一样多

你知道这是否是正确的方法吗？当我有很多节点时，这显然会变得很慢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:42:28.243

我猜你不使用[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)，否则你可以用你的模型绑定到一个列表，而不仅仅是控制你的 PropertyChanged 事件。

# regex - 正则表达式匹配所有排除块注释

> ID：14363303
> 
> 赞同：4
> 
> 时间：2013-01-16T16:40:58.777
> 
> 标签：regex, comments, notepad++

问题是我想匹配评论两侧的所有文本并排除评论本身。

有很多与“评论”相关的正则表达式帖子，但大多数都是其他语言的（我使用的是记事本++，维基百科告诉我是 POSIX ERE，我们不讨论语言或工具），而且大多数人都专注于寻找评论，我有完成了。

这将找到我想要的包含文本（这将包括匹配中的内部块注释）：

```
(^)rule ((.|\n|\r)*?)(^)end 
```

上面找到了“规则”和“结束”之间的任何内容，包括在内。美好的。

这将找到块注释：

```
(?:/\*(?:(?:[^*]|\*(?!/))*)\*/) 
```

上面找到了 和 之间的任何东西`/*`，`*/`包括在内。美好的。我不担心`*/`评论中是否有其中一个，在我的情况下不是问题。

`RULE`现在的问题是我如何在上面的正规则匹配中间将块注释放入负数，以便它匹配`END`除注释文本之外的所有内容？

如果您的答案也排除单行`//`注释，则加分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:07:59.867

让我首先说：正则表达式不是为此而生的！

但这并非不可能：可以使用递归正则表达式来完成：

*   匹配从“规则”到“结束”的所有内容，或者匹配到注释块的开头，然后进一步匹配所有内容到“结束”，或者匹配到注释块的开始，之后进一步匹配所有内容到“结束”或等等。

当然只捕捉“一切”

翻译为：

```
^rule((?:.|\r|\n)*?)(?:^end|(?:(?://$|/\*(?:(?:[^*]|\*(?!/))*)\*/)))
                                                                  ^
                                                             put cursor there
                                                              and insert
                           ((?:.|\r|\n)*?)(?:^end|(?:(?://$|/\*(?:(?:[^*]|\*(?!/))*)\*/)))
                                                                or end with
                           (?:\r?\n^end) 
```

然后替换为

$1$2$3$4$..

其中替换的数量应该与递归的数量相匹配

为了测试 Notepad++ 的极限，我创建了这个小提琴：

[http://jsfiddle.net/lovinglobo/wPKjb/](http://jsfiddle.net/lovinglobo/wPKjb/)

Notepad++ 通过简单地说“无效的正则表达式”就中断了超过 29 次递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:35:00.267

如果您能够翻转您的要求，而是从源中删除所有评论，您可以使用此模式来匹配评论（块和行）：

```
/(\/\*).*?(\*\/)|(\/\/).*?(\n)/s 
```

# html - requiresActiveX=true 元标记是否真的有效？

> ID：14363306
> 
> 赞同：4
> 
> 时间：2013-01-16T16:41:14.027
> 
> 标签：html, microsoft-metro, meta-tags, internet-explorer-10

我已经阅读了一堆博客文章，[比如这个](http://caioproiete.net/en/request-user-to-switch-to-desktop-version-of-internet-explorer-on-a-website/)，还有一些关于 SO 的其他问题，[比如这个](https://stackoverflow.com/questions/11973051/redirect-user-to-desktop-browser-in-windows-8)。

这些都说，如果您想弹出一条消息，告知访问者需要 IE 10 的桌面模式才能查看该站点，那么“您所要做的就是添加此元标记：

```
<meta http-equiv="X-UA-Compatible" content="requiresActiveX=true" /> 
```

或者，您可以改为设置 HTTP 标头：

```
<add name="X-UA-Compatible" value="requiresActiveX=true" /> 
```

我已经尝试了这两种技术，但它们似乎都不起作用！现代 UI 版本的 IE 什么都不做。没有弹出窗口，没有消息，什么都没有。

我现在通过 IIS 8 在本地运行我的站点。我已将 URL 添加到我的受信任站点列表中。如果我使用其他浏览器，例如 Chrome，我可以看到响应标头肯定已设置。该页面在 IE10 Modern 中运行，它只是没有告诉我切换到桌面模式......

我尝试将`<meta`标签战略性地定位在`<head`etc 中的不同位置，但这也无济于事

任何人都可以提供任何建议吗？即使提到实现它的网站也会有所帮助......

# 编辑

[我已经尝试将此添加到我自己网站上](http://www.danwellman.co.uk/steampad/steampad.html)的“实时”网页中，但在使用 IE10 Modern 时仍然没有提示我切换到桌面...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:18:29.970

不确定这是否会为您解决，但对我来说确实如此。我不得不将多个 Compat 标签组合成一个条目。像这样：

`<meta http-equiv="X-UA-Compatible" content="IE=7, requiresActiveX=true"/>`

# c++ - 在目标计算机上创建 ADO 对象实例失败

> ID：14363308
> 
> 赞同：1
> 
> 时间：2013-01-16T16:41:25.870
> 
> 标签：c++, sql, ado

我在安装 Windows XP SP3 的开发计算机上使用 VC++ 6.0 创建了一个 MFC 应用程序。在这个应用程序中，我使用 ADO 对象来访问 SQL 数据库服务器：

```
CoInitialize (NULL);
try 
{
 _ConnectionPtr pConn;
  HRESULT hr = pConn.CreateInstance (__uuidof (Connection));
  if (FAILED (hr))
  {
   AfxMessageBox ("Can't create intance of Connection");
  }
  //...
}
//... 
```

当然，该应用程序在我的电脑上运行良好。但是，我复制了该应用程序的整个 Release 文件夹，然后在另一台安装了 Windows XP SP3 的计算机上运行它，该应用程序无法使用`hr = -2147467262`.

我在互联网上搜索了很多，但没有看到任何解决方案。

有谁知道这个问题，你能给我一些指导吗？

# grails - Reloading Grails Bootstrap with environments

> ID：14363309
> 
> 赞同：2
> 
> 时间：2013-01-16T16:41:27.357
> 
> 标签：grails

There is a good answer for reloading the Grails Bootstrap in [Reloading bootstrap with Grails](https://stackoverflow.com/questions/10439314/reloading-bootstrap-with-grails/10440371#comment19952977_10440371)

But I have environments defined in my init closure and so I get the error:

```
groovy.lang.MissingMethodException: No signature of method: BootStrap.environments() is applicable for argument types: (BootStrap$_closure1_closure3) values: [BootStrap$_closure1_closure3@19ad0326] 
```

Bootstrap code is basically the spring-security domain classes for role, user, user_role

```
import org.mine.*

class BootStrap
{
    def init =
    { servletContext ->
        environments
          {
            development
            {
            def adminRole = new DummyRole(authority: 'ROLE_ADMIN').save(flush: true)
            def userRole = new DummyRole(authority: 'ROLE_USER').save(flush: true)

            def user = new DummyUser(username: 'user1', email_address: 'user1@mine.org', enabled: true, password: 'password')
            def user1 = new DummyUser(username: 'user2', email_address: 'user2@mine.org', enabled: true, password: 'password')
            def user2 = new DummyUser(username: 'user3', email_address: 'user3@mine.org', enabled: true, password: 'password')

            user.save(flush: true)
            user1.save(flush: true)
            user2.save(flush: true)

            DummyUserDummyRole.create manager, adminRole, true
            DummyUserDummyRole.create user, userRole, true
            DummyUserDummyRole.create user1, userRole, true
            DummyUserDummyRole.create user2, userRole, true

            assert DummyUser.count() >= 9
            assert DummyRole.count() >= 10
            assert DummyUserDummyRole.count() >= 9

        }   // end-development
        test {

            // bootstrap data for test environment

        }
        production {

            // bootstrap data for production environment

        }
    }
}

    def destroy =
    {
            // code here
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:30:03.103

This works for me:

```
def servletCtx = org.codehaus.groovy.grails.web.context.ServletContextHolder.servletContext
def myBootstrapArtefact = grailsApplication.getArtefacts('Bootstrap')[-1]
BootStrap.metaClass.environments = grails.util.Environment.&executeForCurrentEnvironment
myBootstrapArtefact.referenceInstance.init(servletCtx) 
```

Lovingly copied (and then modified) from the answer you referenced :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T15:14:19.333

I alway used this solution and it worked for me. Works with Grails 3.x too. [Here](http://grails.asia/how-to-check-if-environment-is-test-development-or-production-in-grails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T01:37:00.220

It is much easier to just swap your syntax to:

```
Environment.executeForCurrentEnvironment {
    production {
        // do something in production
    }
    development {
        // do something only in development
    }
} 
```

# linux - NSight Profiler 信号 139

> ID：14363314
> 
> 赞同：2
> 
> 时间：2013-01-16T16:41:40.320
> 
> 标签：linux, cuda, nvidia, nsight

我正在尝试使用 NSight 中的内置分析器来分析我的程序，但分析会话在启动后立即终止，并且我收到反馈“警告：应用程序收到信号 139”。这是什么意思？

我还收到以下错误消息：

> 无法读取整个会话时间线。显示的时间线可能为空或不完整，因为应用程序在退出之前中止或未能刷新配置文件数据。应用程序应在退出之前调用 cudaDeviceReset() 以确保所有配置文件数据都已刷新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:11:35.110

在 nsight 中，转到 Profile Configurations，然后转到 Profiler 选项卡。取消选中“ `Enable concurrent kernel profiling`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-01T17:03:14.557

检查`Start application with profiling enabled`为我修复了它。默认情况下它是打开的，但我想要显式控制，所以最初将其关闭。禁用`concurrent kernel profiling`也有效，但它会阻止您使用动态并行性分析应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:25:28.660

您的程序是否需要一些命令行参数？调试器和分析器可能没有从您的配置中正确选择 CLI 选项。您需要在 Nsight 用户属性或探查器的活动页面中指定它们。

# php - 替换缓冲字符串中的文本

> ID：14363317
> 
> 赞同：0
> 
> 时间：2013-01-16T16:41:44.463
> 
> 标签：php, regex, string, parsing, buffer

我正在开发一个程序，该程序在生成 mysqldump 的输出时对其进行修改，为此我目前有代码以块的形式读取 mysqldump 的输出，大小为固定字节数。我需要能够同时进行正则表达式匹配，以及在读入该文本时对其进行正则表达式替换（在最终文本输出上运行正则表达式是不可能的，因为最终文件大小为许多 GB）。我正在用 PHP 编写代码，尽管我相信问题（及其解决方案）应该与语言无关。

现在我所拥有的伪代码如下所示：

```
$previous_chunk = "";
while (!end_of_file($reader)) {
    $chunk = $reader.read() //read in a few thousand characters from the file
    $double_chunk = $previous_chunk + $chunk;
    // do regular expressions on the double chunk (to catch matches that span the chunk boundary)
    $output_file.write($chunk);
    $previous_chunk = $chunk;
} 
```

这在两个问题上搁浅。第一个是每个块都被正则表达式计算两次，所以如果一个匹配发生在一个块中（而不是跨越块边界），即使匹配的文本只出现一次，它也会触发两次匹配。第二个问题是这仍然不允许我在比赛中进行替换。正则表达式将替换中的文本，`$double_chunk`但我只写入`$chunk`输出文件，不受替换影响。

我的一个想法是我不希望我的任何正则表达式需要跨越多行（由`\n`字符分隔），所以我可以在我的程序中创建第二个缓冲区，只在完成的行上运行正则表达式，然后编写逐行而不是逐块输出到目标文件。不幸的是，由于 mysqldump 输出的性质，有一些非常长的行（有些实际上是数百兆字节），所以我认为这不是一个可行的选择。

我怎样才能在这个文件中读取一些合理大小的内存占用（比如几十 MB）并使用正则表达式在流中修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:10:15.040

```
$chunk = $reader.read() //read in exactly $chunk_length characters from the file (or less iff EOF reached)
while (!end_of_file($reader)) {
    $previous_chunk = $chunk;
    $chunk = $reader.read() //read in $chunk_length characters from the file (or less iff EOF reached)

    $double_chunk = $previous_chunk + $chunk;
    // do regular expressions on the double chunk (to catch matches that span the chunk boundary)
    $previous_chunk = substr($double_chunk, 0, $chunk_length);
    $chunk = substr($double_chunk, $chunk_length);
    $output_file.write($previous_chunk);
}

// do regular expressions on $chunk to process the last one (or the first and only one)
$output_file.write($chunk); 
```

问题 1 和 2 都通过执行正则表达式替换来解决，然后将生成的字符串块分配回 $previous_chunk 和 $chunk，假设您用作替换字符串的内容不会重新触发匹配。这将更`write`改为使用 $previous_chunk，以便在下次有机会捕获跨块匹配时更改 $chunk。

**此外**，*重要*的是，以上假设替换与被替换的字符串长度相同。如果不是，那么在替换后块大小会动态变化，上述解决方案太天真而无法处理。如果替换字符串的长度不同，那么您必须以某种方式跟踪不断变化的块边界。

# jquery - 单击链接时，图像不会显示在颜色框中；他们只是在新窗口/标签中打开

> ID：14363318
> 
> 赞同：1
> 
> 时间：2013-01-16T16:41:43.940
> 
> 标签：jquery, colorbox

我是 JQuery 中颜色框的新用户。而且我一直在尝试让示例代码在我的计算机上运行，​​并且当我单击它们只是在新窗口/选项卡中打开的链接时，图像不会显示在“颜色框”中。所以我会告诉你我的代码。因为我是初学者，所以我需要一些对你来说显而易见的事情的帮助。谢谢！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

 <link href="colorbox.css" rel="stylesheet" type="text/css" />
        <script src="jquery.min.js"></script>
        <script src="jquery.colorbox-min.js"></script>

</head>
<title>Untitled Document</title>

<body>
<!--JQuery library-->
<a href="http://jquery.com/">jQuery</a>
    <script src="jquery.js"></script>
    <script>
      var foo = "bar";
    </script>

<!--Colorbox Call-->

    <a class='gallery' href='images/DSC_0114.JPG'>Photo_1</a>
        <a class='gallery'     href='images/34180_1473822933002_1456544245_1218149_7765685_n.jpg'>Photo_2</a>
        <a class='gallery'     href='images/26577_1337288319722_1456544245_897498_8319969_n.jpg'>Photo_3</a>

        <script>
            jQuery('a.gallery').colorbox();
        </script>

</body>

<link href="test.css" rel="stylesheet" type="text/css" />
<div class="box" id="box">Content for  class "box" id "box" Goes Here</div> 
```

这些是我用来寻求帮助的网站，但它们并没有回答真正的小问题。

[http://www.jacklmoore.com/colorbox/guide](http://www.jacklmoore.com/colorbox/guide) http://learn.jquery.com/about-jquery/how-jquery-works/

我是否需要将网站上传到网络才能使彩盒正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:48:34.873

你已经`jquery.js`第二次附加了，我认为那是破坏代码`jquery.colorbox-min.js`，所以这不起作用。删除第二个。

你应该删除这一行，

```
<script src="jquery.js"></script> 
```

[jsFiddle 演示](http://jsfiddle.net/5bwx3/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link href="colorbox.css" rel="stylesheet" type="text/css" />
  <script src="jquery.min.js"></script>
  <script src="jquery.colorbox-min.js"></script>
</head>
<title>Untitled Document</title>
<body>
    <a class='gallery' href='images/DSC_0114.JPG'>Photo_1</a>
    <a class='gallery' href='images/34180_1473822933002_1456544245_1218149_7765685_n.jpg'>Photo_2</a>
    <a class='gallery' href='images/26577_1337288319722_1456544245_897498_8319969_n.jpg'>Photo_3</a>

    <script>
        jQuery('a.gallery').colorbox();
    </script>

    <link href="test.css" rel="stylesheet" type="text/css" />
    <div class="box" id="box">Content for  class "box" id "box" Goes Here</div>
</body>
</html> 
```

## 更新：

这是您分享的最新代码，

```
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<link href="colorbox.css" rel="stylesheet" type="text/css" /> 
<script src="Colorbox/jquery.colorbox-min.js"></script>
<script src="Colorbox/jquery.min.js"></script> 
<link href="test.css" rel="stylesheet" type="text/css" /> 
</head> 
<title></title> 
<a class='gallery' href='images/money2.jpg'>Photo_1</a> 
<a class='gallery' href='images/money2.jpg'>Photo_2</a> 
<a class='gallery' href='images/money2.jpg'>Photo_3</a> 
<script> jQuery(document).ready(function() { jQuery('a.gallery').colorbox(); }); </script> 
```

文件夹中必须有这些文件`Colorbox`，

*   jquery.min.js
*   jquery.colorbox-min.js

# data-structures - 支持 LIFO 推送和弹出的优先级队列？

> ID：14363319
> 
> 赞同：2
> 
> 时间：2013-01-16T16:41:46.450
> 
> 标签：data-structures, stack, priority-queue

我需要设计一个具有以下约束的“优先队列堆栈”数据结构：

*   pop() 和 deleteMin() 在平均情况下以 O(log(n)) 运行。
*   push(x) 和 getMin() 平均运行时间为 O(1)

有人对如何设计这个有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:18:48.853

您可以通过将标准堆栈与支持 O(1) 插入和 O(log n) 分期删除的优先级队列组合在一起来实现这一点。例如，您可以将堆栈与斐波那契堆或倾斜二项式堆配对，两者都有这些保证。确保将每个堆栈元素与其相应的优先级队列元素对齐存储指针，以便在 O(1) 时间内您可以在两者之间跳转。

要压入一个元素，请将其压入堆栈并在 O(1) 时间内将其插入优先级队列。要读取最小值，请在 O(1) 时间内查询优先级队列中的最小值。

要删除最小值，请从优先级队列中调用 extract-min 以删除最小值，然后进入堆栈并将删除的元素标记为无效。这需要 O(1) 时间。要弹出，重复弹出堆栈，直到弹出未标记为无效的元素，然后在优先级队列上调用 delete 以删除该元素。这需要时间 O(k + log n)，其中 k 是执行的弹出次数。但是，您可以使用潜在方法证明这是摊销 O(1)。如果您将堆栈的潜力设置为无效参数的数量，则每个 delete-min 都会将潜力增加一，并且每次弹出 k 个无效元素的弹出操作都会将潜力减少 k。因此，pop 的摊销运行时间为 O(log n)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:52:43.130

您可以将 Stack 与指向最小值对象一起使用。所以在这种情况下 push(x),pop(), getMin() 将在 O(1) 中 - 在平均时间内。

但是在 deleteMin() 之后，你需要调整顶部的项目。

# java - 使用 JSF2.0 和 Primefaces 3.4 进行导航

> ID：14363320
> 
> 赞同：1
> 
> 时间：2013-01-16T16:41:48.057
> 
> 标签：java, jsf, primefaces

我是 JSF 和 Primefaces 的新手，刚刚开始研究登录和基本导航，我已经遇到了问题。我在这里遇到了大约 10 个类似的问题，但没有一个解决方案对我有用，所以我想我会发布我的具体问题，以便真正了解的人可以为我指明正确的方向。

1.  登录：似乎和注销一样可以正常工作，但我很担心，因为浏览器中的 url 仍然显示登录后我在登录屏幕，并且我直接使用了 Oracle EE6 文档中的登录示例。下面提供登录方法。

    ```
    public String login(){
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest)context.getExternalContext().getRequest();
    try{
        logger.log(Level.FINE, "User credentials: name: {0}, password: {1}", new Object[] {this.username, this.password});
        request.login(this.username, encrypt(this.password));
        logger.log(Level.FINE, "User: {0} logged in", this.username);
    }catch(ServletException e){
        logger.log(Level.SEVERE, "User: {0} login failed, password: {1}", new Object[]{this.username, encrypt(this.password)});
        context.addMessage(null, new FacesMessage("Login Failed!"));
        return "error";
    }
    return "/faces/system/index"; 
    ```

    }

2.  登录后，我被带到正确目录中的正确页面，并且所有内容都正确显示，但是当您将鼠标悬停在链接上时，浏览器底部的状态栏会为所有三个链接显示相同的 url。下面提供的页面代码。

    ```
     <h:body>
        <p:layout fullPage="true">
            <f:facet name="last">
                <h:outputStylesheet library="css" name="discovery.css"></h:outputStylesheet>
            </f:facet>
            <p:layoutUnit styleClass="headerDiv" position="north" size="100">
                <h:graphicImage library="images" name="header.jpg"></h:graphicImage>
            </p:layoutUnit>
            <p:layoutUnit styleClass="navDiv" position="west" size="200" id="navPanel">
                <h:form>
                    <h:outputText value="Navigation Menu"></h:outputText>
                    <br/>
                    <p:commandLink value="First Time Users" update=":main">
                        <f:setPropertyActionListener target="#{navigationBean.pageToDisplay}" value="tutorial.xhtml"></f:setPropertyActionListener>
                    </p:commandLink>
                    <br/>
                    <p:commandLink value="Help" update=":main">
                        <f:setPropertyActionListener target="#{navigationBean.pageToDisplay}" value="help.xhtml"></f:setPropertyActionListener>
                    </p:commandLink>
                    <br/>
                    <h:commandLink action="#{loginBean.logout()}" value="Log Out"></h:commandLink>
                </h:form>
            </p:layoutUnit>
            <p:layoutUnit position="center" id="main">
                <ui:include src="#{navigationBean.pageToDisplay}"></ui:include>
            </p:layoutUnit>
        </p:layout>
    </h:body> 
    ```

3.  NavigationBean

    @Named(value = "navigationBean") @RequestScoped 公共类 NavigationBean 实现可序列化 {

    公共 NavigationBean() { }

    public String getPageToDisplay() { return pageToDisplay; }

    公共无效 setPageToDisplay(String pageToDisplay) { this.pageToDisplay = pageToDisplay; }

    私有字符串 pageToDisplay = "welcome.xhtml"; }

登录后页面加载时，显示导航 bean 中设置的默认页面，但单击注销链接以外的任何链接会导致默认页面从中心布局单元中消失并显示空白页面/单击日志out 链接确实会按预期将您注销。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:25:53.140

> *1\. 登录：似乎和注销一样可以正常工作，但我很担心，因为浏览器中的 url 仍然显示登录后我在登录屏幕。*

发送重定向（这指示浏览器在给定的 URL 上发送新的 GET 请求，该请求会反映在浏览器的地址栏中）。

```
return "/faces/system/index?faces-redirect=true"; 
```

* * *

> *2\. 登录后，我被带到正确目录中的正确页面，并且所有内容都正确显示，但是当您将鼠标悬停在链接上时，浏览器底部的状态栏会为所有三个链接显示相同的 url。*

`<h:form>`确实提交到同一页面。使用`<h:outputLink>`or`<h:link>`代替`<h:commandLink>`页面到页面的导航。另请参阅[何时应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink/4317723#4317723)

* * *

> *3\. 登录后页面加载时，显示导航bean中设置的默认页面，但点击退出链接以外的任何链接，导致默认页面从中心布局单元消失，并显示空白页面*

这是通过使用 GET 而不是 ajax 回发进行页面到页面导航来解决的。因此，在解决 #2 时，它本质上就解决了。您可能只想将您重新设计`NavigationBean`为过滤器或阶段侦听器，它也会拦截 GET 请求。您根本不应该通过 POST 导航。它破坏了可收藏性、用户体验和 SEO，就像您现在遇到的一样。

# php - PHP更新查询未接收页面中已定义的变量

> ID：14363321
> 
> 赞同：0
> 
> 时间：2013-01-16T16:41:49.613
> 
> 标签：php, mysql, variables

您好我正在尝试从 HTML 表单更新单个字段，由于某种原因，我传递给更新查询的会话变量之一未被接受。我已经在页面中回显了该变量，因此相当确定它存在于内存中。

注意，我知道我的代码非常不安全，但我正在学习 PHP，一旦我掌握了基础知识，我会检查它并使其达到最佳实践标准。

E2A：如果我做 var_dump($filename); 在尝试运行查询之前它返回 string(6) "356/18"，在查询之后它返回 NULL。我没有在任何地方取消设置变量，所以它会去哪里！

这是我的表格：

```
 <form method="post" action="">
      <p>Your username is:&nbsp;<?php echo $_SESSION['userid'] ?>&nbsp;Your company ID is:&nbsp;<?php echo $companyid['id']?></p>
      <h3>Please enter note for file: <?php echo $filename; ?></h3>
      <table width="200" cellpadding="5">
        <tr>
        <th width="18%" align="right" nowrap>Add Note:&nbsp;</th>
        <td width="82%" nowrap>
            <input type="text" name="note" />
        </td>
        </tr>
        <tr>
        <td colspan="2" width="100%" nowrap>
            <input type="submit" value="Submit" name="Submit" />
        </td>
        </tr>
        </table>
      </form> 
```

这是我的更新查询：

```
 $sql = "UPDATE fields SET Notes =          ('".mysql_real_escape_string(stripslashes($_REQUEST['note']))."') 
        WHERE companyId='".$companyid['id']."' AND fileNumber ='".$filename."'";
    if($result = mysql_query($sql)) { 
        echo "<h1>Thank you</h1>Your information has been entered into our database<br><br>";
        echo $sql;
        echo $filename;
        } else { 
        echo "ERROR: ".mysql_error(); 
        } 
        } else { 
```

回显 $sql 会产生以下结果：

```
 UPDATE fields SET Notes = ('asdasda') WHERE companyId='11' AND fileNumber ='' 
```

这是我实例化 POST 变量的地方。

```
 include "header.php";
         $checkFiles = "checkFiles.php";
         // Catches form input from previous page and stores it into session variable called filename for future reference;
         $_SESSION['filename']=$_POST['filename'];
         $filename = $_SESSION['filename'];
         //User id stuff from previous page too; 
         $userid = $_SESSION['userid'];
         $id = mysql_query("SELECT id FROM users WHERE DXNumber='".$userid."'");
         // Returns pointer so fetch it as an array and insert it into variable $companyid for later use;
         $companyid = mysql_fetch_array($id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:42:39.283

您需要包含`session_start()`在每个文件的顶部。

做就是了：

```
AND fileNumber ='".$_SESSION[filename]."'"; 
```

在您的更新查询中。

如果这不起作用，请确保设置了 for 的值`$_SESSION[filename]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:57:52.393

```
<h3>Please enter note for file: <?php echo $filename; ?></h3> 
```

创建输入框

```
<input type="text" name="filename" value="<?php echo $filename; ?>"/> 
```

然后文件名值将传递给 $_POST 数组

# jquery - JQuery $.get 异常返回数据

> ID：14363326
> 
> 赞同：0
> 
> 时间：2013-01-16T16:42:12.217
> 
> 标签：jquery, ubuntu

我正在尝试使用 $.get 方法从文件中提取一些数据，但我得到的是：

```
undefined slope
undefined reference to
undefined
undefined symbols for architecture x86_64
undefined symbols for architecture i386 
```

编码：

```
$.get('inc/autocomplete.php?q=' + $('.searchbox').val(), function(data){
      $('.autocomplete').html(data);  
}); 
```

我最近搬到了 Ubuntu，我认为这就是问题所在。在浏览器中打开 autocomplete.php 会得到正确的结果。有什么建议么？

# vhdl - VHDL 多维数组

> ID：14363327
> 
> 赞同：0
> 
> 时间：2013-01-16T16:42:15.420
> 
> 标签：vhdl

我试图获得 18*18 乘法的部分总和。我想将它们保存在一个多维数组（18*36）中，其中数组的每个索引都包含一个部分和。我尝试使用 std_logic_vector 数组。但我没有得到任何结果。我什至尝试了 bit_vector 数组和位数组。这是我的 VHDL 代码。

```
entity partial is
port(
   A : in bit_vector(17 downto 0);
   B : in bit_vector(17 downto 0);
   C : out bit_vector(35 downto 0);
   D : out bit
);
end partial;

architecture Behavioral of partial is
   type partial_sums is array (17 downto 0, 35 downto 0) of bit;
   signal sums : partial_sums;

begin

   process (A,B)
   begin

    --sums <= (others=> (others=>'0'));

    --for j in 0 to 17 loop
    --   sums(j)<="000000000000000000000000000000000000";
    --end loop;

      for i in B'low to B'high loop
         if ( B(i)='1') then
            for p in A'low to A'high loop
               sums(i,p) <= A(p);   
            end loop;
         end if;
      end loop;

      D <= sums(0,0);

   end process;
end Behavioral; 
```

无论 sums 数组中使用什么索引，我总是在 D 中得到 0。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:37:42.700

您在组合过程中将总和分配给 D，但总和不在过程敏感度列表中。

可能最好的方法是将 D 的分配移到流程之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:37:16.473

一句警告：Xilinx ISE（包括版本 14）在多维数组和向量分配方面存在问题。您不能使用三维数组，也不能使用不受约束的数组数组。此外，使用多维数组，分配充其量是有点不稳定。当我最后一次使用 ISE 时，它经常会抱怨合法分配没有所需的宽度，即使 ModelSim 可以很好地编译和模拟。

您的实际问题可能是您只分配了每个条目的低 18 位总和，其中条目实际上是 36 位宽。

为了更好的可读性，您可能应该定义

```
type partial_sums is array (natural range <>) of bit_vector(35 downto 0); 
```

然后使用没有循环的直接 bit_vector 分配。您在 D 中的固定值可能是由于 B 没有设置为 '1' 的位（您应该得到 U，因为您缺少默认值）或者因为 A 的位始终为 '0'，您应该得到所有的 '0'在低 18 位和高 18 bis 中的所有“U”。

编辑：但是，位是已解析的逻辑，因此您只会在其中看到“0”或“1”。IMO 你应该使用std_logic。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:39:17.753

实际上，它工作正常，将适当的测试数据加载到部分产品数组中。

您只是没有再次唤醒进程以收集 D 上的结果。将“sums”添加到进程“partial”的敏感度列表中即可。

或者更好的是，让它成为一个定时过程（你必须这样做，以便在你进行综合时获得任何合理的结果）。

请参阅此 Q/A，了解信号分配的工作原理。 [VHDL中的过程是可重入的吗？](https://stackoverflow.com/questions/13954193/is-process-in-vhdl-reentrant)

# ruby - 为什么我要打印两次对象？

> ID：14363330
> 
> 赞同：0
> 
> 时间：2013-01-16T16:42:19.987
> 
> 标签：ruby, irb

当我在 irb 或 rails 中创建一些迭代时`each`，我会在终端或浏览器中再次打印整个结构。例子：

```
a = [1,2,3,4]

a.each do |number|
  puts n
end 
```

irb 终端或浏览器中的结果：

```
1
2
3
4

=> [1,2,3,4] 
```

为什么会`=> [1,2,3,4]`出现在浏览器中？我无法在我的页面中创建单个列表，因为整个结构都出现了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:45:41.687

Ruby 中的每个表达式都返回一个值；在 中`irb`，你刚刚执行的表达式返回的值显示在 之后`=>`。

的返回值`Enumerable::each`是调用的对象`each`- 在这种情况下，数组`[1,2,3,4]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:47:20.530

跑到外面去`irb`，你就会开悟。

```
ruby -e `[1,2,3,4].each {|ele| puts ele}` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:44:55.597

您会看到它们打印了两次：一次作为*副作用*，第二次作为*返回值*。irb 总是`puts`最后一个返回值。的返回值`each`是它的接收者。使用 irb 时无法避免这种情况，但当您将脚本作为独立软件运行时，它们不会出现。第一个`1`，...，`4`是你的输出`puts`。它们被称为副作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:44:57.553

因为红宝石会在所有内容中返回，甚至会阻塞。所以你的每一条语句都在返回。你看到它的输出是因为 irb 向你展示了一切的回报。在脚本中它只会输出一次。

# entity-framework - 实体框架 HierarchyId 解决方法

> ID：14363332
> 
> 赞同：14
> 
> 时间：2013-01-16T16:42:37.823
> 
> 标签：entity-framework, entity-framework-5

英孚 5.0

我正在开发一个原型来一起测试hierarchyid 和实体框架。我有以下架构：

```
Create Table dbo.Employee
(
   EmployeeId int identity not null,
   Name nvarchar(100) not null,
   Node hierarchyid not null,
   NodePath as Node.ToString() persisted,
   Level AS Node.GetLevel() persisted,
   ManagerNode as Node.GetAncestor(1) persisted,
   ManagerNodePath as Node.GetAncestor(1).ToString() persisted
);

Alter Table dbo.Employee
    Add Constraint EmployeePK Primary Key NonClustered (EmployeeId);

Go

--Enforce Hierarchy
Alter Table dbo.Employee
    Add Constraint EmployeeManagerNodeNodeFK Foreign Key (ManagerNode) References Employee(Node);
Go

Create Unique Clustered Index EmployeeDepthFirstIndex on dbo.Employee(Node);

Go

Create NonClustered Index EmployeeBreathFirstIndex on dbo.Employee(Level, Node);

Go 
```

根据我的阅读，EF 目前不支持 hierarchyid 数据类型，但有些人建议了一些解决方法，例如创建我在上面所做的计算列 (Node.ToString())。

有没有办法设置 EF 以便它识别父/子关系，以便我可以有效地拥有一个下属集合？例如

```
Employee.Subordinates 
```

我唯一能想到的是创建一个带有 FK 的 ManagerId 列，但随后我有效地将层次结构存储在两个地方。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-31T12:52:24.620

EF6 现在是开源的，所以很容易添加 HierarcyID 支持。我也加了。您可以从 codeplex 下载修改后的源代码和编译/签名的 dll：http://entityframework.codeplex.com/SourceControl/network/forks/zgabi/efhierarchyidrc1 [（](http://entityframework.codeplex.com/SourceControl/network/forks/zgabi/efhierarchyidrc1)有时 fork 名称会更改）或从 NuGet：[https://www .nu​​get.org/packages/EntityFrameworkWithHierarchyId/](https://www.nuget.org/packages/EntityFrameworkWithHierarchyId/) 当前 EF6 处于 RC1 状态，但我会将修改合并到 EF6 的每个更高版本。

我有以下模型：

```
public class Employee
{
    public int EmployeeId { get; set; }
    [Required, MaxLength(100)]
    public string Name { get; set; }
    [Required]
    public HierarchyId Node { get; set; }

    public IQueryable<Employee> GetSubordinates(MyContext context)
    {
        return context.Employees.Where(o => Node == o.Node.GetAncestor(1));
    }
}

public class MyContextInitializer : CreateDatabaseIfNotExists<MyContext>
{
    protected override void Seed(MyContext context)
    {
        context.Database.ExecuteSqlCommand(
            "ALTER TABLE [dbo].[Employees] ADD [ManagerNode] AS ([Node].[GetAncestor]((1))) PERSISTED");
        context.Database.ExecuteSqlCommand(
            "ALTER TABLE [dbo].[Employees] ADD CONSTRAINT [UK_EmployeeNode] UNIQUE NONCLUSTERED (Node)");
        context.Database.ExecuteSqlCommand(
            "ALTER TABLE [dbo].[Employees]  WITH CHECK ADD CONSTRAINT [EmployeeManagerNodeNodeFK] " +
            "FOREIGN KEY([ManagerNode]) REFERENCES [dbo].[Employees] ([Node])");
        context.Employees.Add(new Employee { Name = "Root", Node = new HierarchyId("/") });
        context.Employees.Add(new Employee { Name = "Emp1", Node = new HierarchyId("/1/") });
        context.Employees.Add(new Employee { Name = "Emp2", Node = new HierarchyId("/2/") });
        context.Employees.Add(new Employee { Name = "Emp3", Node = new HierarchyId("/1/1/") });
        context.Employees.Add(new Employee { Name = "Emp4", Node = new HierarchyId("/1/1/1/") });
        context.Employees.Add(new Employee { Name = "Emp5", Node = new HierarchyId("/2/1/") });
        context.Employees.Add(new Employee { Name = "Emp6", Node = new HierarchyId("/1/2/") });
    }
}

public class MyContext : DbContext
{
    public DbSet<Employee> Employees { get; set; }
} 
```

生成的数据库：

```
CREATE TABLE [dbo].[Employees](
    [EmployeeId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](100) NOT NULL,
    [Node] [hierarchyid] NOT NULL,
    [ManagerNode]  AS ([Node].[GetAncestor]((1))) PERSISTED,
 CONSTRAINT [PK_dbo.Employees] PRIMARY KEY CLUSTERED 
(
    [EmployeeId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY],
 CONSTRAINT [UK_EmployeeNode] UNIQUE NONCLUSTERED 
(
    [Node] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[Employees]  WITH CHECK ADD  CONSTRAINT [EmployeeManagerNodeNodeFK] FOREIGN KEY([ManagerNode])
REFERENCES [dbo].[Employees] ([Node]) 
```

获取 Emp1 员工子节点的示例：

```
 using (var c = new MyContext())
    {
        var firstItem = c.Employees.Single(o => o.Node == new HierarchyId("/1/"));

        foreach (var table1 in firstItem.GetSubordinates(c))
        {
            Console.WriteLine(table1.EmployeeId + " " + table1.Name);
        }
    } 
```

结果：

```
4 Emp3
7 Emp6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-23T14:28:23.473

使用 varbinary(892) 而不是 hierarchyid。EF 识别 varbinary 返回字节数组。您可以将字节数组转换为 SqlHierarchyid 类型并使用 hyrarchy pod 函数。使用此解决方法，您甚至可以在其他数据库中使用 hierarchyid 函数。请参阅[http://www.casavillar.com.br/blog](http://www.casavillar.com.br/blog)以获取更多详细信息以及指向 nugget 和 github 的链接，您可以在其中找到包括 MySql 在内的示例

# iphone - 是否可以从 url 下载低分辨率的图像？

> ID：14363337
> 
> 赞同：4
> 
> 时间：2013-01-16T16:42:55.467
> 
> 标签：iphone, ios, cocoa, uiimageview

我正在尝试将图像从 加载`URL`到`UIIMageView`。它工作正常，但我想以较低的分辨率/尺寸下载图像，因为加载时间太长。

我曾尝试使用`AFNetworking+UIImage`类，但性能是相同的。

```
 [iv setImageWithURL:[NSURL URLWithString:@"http://cegamers.com/wp-content/uploads/2011/06/automaton.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder-avatar"]]; 
```

有人知道图书馆或某种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:22:48.130

通常，如果没有服务器端的帮助，您将无法做到这一点。通常你会依赖服务器为你生成缩略图。有图像转换代理服务器将下载完整的图像服务器端，并为您提供调整大小的版本。

没有任何类型的服务器端调整大小，选项是有限的，不是很好。

如果图像是逐行/隔行格式，那么您只能下载文件的一部分，但这将是一个低质量的近似值。

不幸的是，您无法提前知道需要多少数据，因此最好的办法是请求整个图像并在看到您有足够的数据时关闭 TCP/IP 连接（希望`[NSURLConnection cancel]`这样做）。

或者您可以使用 HTTP 请求下载一些任意少量数据`Range`，然后估计您还需要下载多少（这可能会节省一些带宽，但会花费您的延迟）。

我不知道 iOS SDK 中有什么可以让你检查你有多少部分下载的 JPEG 文件的逐行扫描，所以你可能需要用 libjpeg 或你自己的 JPEG 解析来弄脏你的手。

但是，如果您可以在服务器端下载整个图像并为其生成适当的缩略图，那真的会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:53:04.433

是的。如果您只是在 imgur 上的任何直接图像链接中的 img_hash 末尾添加“s”，那么您将获得它的小方形版本。

[http://i.imgur.com/DkDdK.jpg](http://i.imgur.com/DkDdK.jpg) <--- 直接链接
[http://i.imgur.com/DkDdKs.jpg](http://i.imgur.com/DkDdKs.jpg) <--- 小方版。注意额外的 s

# c++ - 在不同的命名空间中调用别名声明的基类构造函数

> ID：14363338
> 
> 赞同：1
> 
> 时间：2013-01-16T16:42:56.843
> 
> 标签：c++, c++11, constructor, base-class, using-declaration

我试图通过 C++11 了解别名声明类的一些细节，`using`以及这如何/为什么会影响基类构造函数调用。

## 示例代码

```
#include <iostream>

namespace N {

  template<typename T>
  struct Foo
  {
//     Foo(){}; // NOTE: If this line is present, error 2 goes away.
    Foo(T t):value(t){};
    ~Foo() = default;
    T value; 
  };

  struct BarInt : public Foo<int>
  {
    BarInt(int t):Foo< int >(t){};
    ~BarInt() = default;
  };

  using BarFloat = Foo<float>;

};

struct A : public N::BarInt
{
  A(int i=42):BarInt(i){}; //BarInt(i) or N::BarInt(i) doesn't matter here
  ~A() = default;
};

struct B : public N::BarFloat
{
  B(float f=23.0):BarFloat(f){}; //two errors with gcc4.7.2 (with -std=gnu++11)

//   B(float f=23.1):N::BarFloat(f){}; //this line seems to work.
  ~B() = default;
};

int main(int argc, char **argv)
{
  A a;
  B b;  
  std::cout << "a's value is "<< a.value << "\n"
            << "b's value is "<< b.value << std::endl;
  return 0;
} 
```

gcc 4.7.2（使用 -std=gnu++11 编译）为此代码生成两个我认为相关的错误（尽管我不明白如何......）

## 错误 1

```
main.cpp: In constructor ‘B::B(float)’:
main.cpp:32:19: error: class ‘B’ does not have any field named ‘BarFloat’ 
```

我在 stackoverflow 上的搜索[是在引用基类时需要命名空间](https://stackoverflow.com/questions/4277477/c-is-a-namespace-required-when-referring-to-the-base-class)，其中提到*注入的类名*作为进一步搜索的起点。但是，根据我收集到的信息，这解释了为什么我可以`A`按照我的方式编写构造函数（即 as `A(int i=42):BarInt(i){};`）以及为什么`BarInt(i)`不必使用 namespace 来限定`N`。

那么为什么这不起作用`B`呢？根据 [C++11 中的'typedef'和'using'有什么区别？](https://stackoverflow.com/questions/10747810/what-is-the-difference-between-typedef-and-using-in-c11),`using`与 good old 相同`typedef`，所以我想我对第一个错误的问题是，在注入类名的上下文中，别名声明的类（`BarFloat`在我的示例中）与常规类（在我的示例中）有何不同。`BarInt`任何指针都非常感谢:)

## 错误 2

```
main.cpp:32:29: error: no matching function for call to ‘N::Foo<double>::Foo()’
main.cpp:32:29: note: candidates are:
main.cpp:9:5: note: N::Foo<T>::Foo(T) [with T = double]
main.cpp:9:5: note:   candidate expects 1 argument, 0 provided
main.cpp:6:10: note: constexpr N::Foo<double>::Foo(const N::Foo<double>&)
main.cpp:6:10: note:   candidate expects 1 argument, 0 provided 
```

`Foo()`如果我在上面的示例代码中已经指出，引入一个空的构造函数，这个错误就会消失。然而，我的问题是为什么`BarFloat(f)`会触发对空`Foo()`构造函数的调用，在这种情况下，如何`BarFloat.value`可能将其设置为 23.0.0。

### 后经

因为这是我在这里的第一篇文章：您好 stackoverflow，感谢大家通过帮助他人解决问题为我提供的巨大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:50:44.097

从类继承时，派生类可以无条件地访问基类的名称（包括基类名称本身）。您实际上是在继承基类中的名称。这就是为什么继承自允许您无条件`N::BarInt`地引用`BarInt`内部。`A`

对于`B`，您从`Foo<double>`使用 BarFloat 别名继承，但`Foo<double>`不包含`BarFloat`，因此您不会继承该名称。

第二个错误只是因为第一个失败。由于编译器没有看到基础的有效初始化，就像您根本没有显式初始化基础一样，因此它被迫使用您没有的默认构造函数对其进行初始化。

# matlab - MATLAB GUI 回调没有为另一个回调设置值？

> ID：14363339
> 
> 赞同：0
> 
> 时间：2013-01-16T16:42:57.830
> 
> 标签：matlab, matlab-guide, handles

我想要一个按钮来设置值，另一个按钮来输出变量的值。似乎使用以下代码第一次按下按钮时未设置该值。这是为什么？

```
% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
handles.dog=1001

% --- Executes on button press in pushbutton3.
function pushbutton3_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton3 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
handles
disp(num2str(handles.dog))   % <-- value not present 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:48:37.637

`guidata(hObject, handles);`您必须在 `pushbutton2_Callback 的末尾写入以更新句柄结构，以便您可以从其他函数访问它。

因此，您生成的代码将是：

```
% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
handles.dog=1001
guidata(hObject, handles);

% --- Executes on button press in pushbutton3.
function pushbutton3_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton3 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
handles
disp(num2str(handles.dog))   % <-- value not present 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:48:04.200

在设置值后使用`guidata(hObject, handles);`以保留它

```
% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
handles.dog=1001

guidata(hObject, handles); 
```

# html - 动态背景颜色在 IE 中不起作用

> ID：14363345
> 
> 赞同：0
> 
> 时间：2013-01-16T16:43:14.283
> 
> 标签：html, internet-explorer, background-color, inline-formset

我需要根据用户输入更改的背景颜色，但它在 IE 中不起作用。

我做错了吗？有解决方法吗？

示例：http: [//jsfiddle.net/3nx7G/1/](http://jsfiddle.net/3nx7G/1/)

```
var viewModel = {
    color: ko.observable("red")
};

ko.applyBindings(viewModel);

<span style="background-color: red">red</span> <span style="background-color: green">green</span><br/>
<input data-bind="value: color" />
<span data-bind="text: color, style: { 'background-color': color }"></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:26:36.180

```
 Try using
   <span data-bind="text: color, style: { backgroundColor: color }"></span>. 
```

javascript 中的连字符无效使用 javascript 等效项 [，如此处](http://www.comptechdoc.org/independent/web/cgi/javamanual/javastyle.html)

# javascript - 与fancybox冲突的jQuery滑块

> ID：14363348
> 
> 赞同：2
> 
> 时间：2013-01-16T16:43:17.160
> 
> 标签：javascript, jquery, fancybox, slider

在我的网站主页上，我有一个滑块和一个精美的盒子并排工作。

它似乎工作正常，但是一旦打开一个花哨的盒子，滑块的幻灯片就会被弄乱。我尝试在任何地方使用 jquery.noconflict，甚至尝试使用 fancybox 的 onClosed 函数重置滑块。不幸的是，这一切都没有帮助我......

我真的希望你们中的一个可以帮助我解决这个问题。

**编辑**

换了jquery，可惜幻灯片还是乱七八糟

我目前正在尝试使 fancybox 的 onClosed 事件暂停（和恢复）幻灯片。代码不工作，我不知道为什么......我还用一个成功的按钮对其进行了测试`<button data-cycle-cmd="pause">Pause</button>`。任何想法为什么该功能不工作或调用？

**编辑额外；我将网站上的 html 代码放在下面：**

*滑块 div：*

```
<div class="cycloneslider cycloneslider-template-default" id="cycloneslider-slideshow1-1" style="max-width:657px">
<div class="cycloneslider-slides cycle-slideshow" data-cycle-slides=">
 div" data-cycle-auto-height="657:359"
 data-cycle-fx="fade" 
data-cycle-speed="1000" 
data-cycle-timeout="4000" 
data-cycle-pause-on-hover="false" 
data-cycle-pager="#cycloneslider-slideshow1-1 .cycloneslider-pager" 
data-cycle-prev="#cycloneslider-slideshow1-1 .cycloneslider-prev" 
data-cycle-next="#cycloneslider-slideshow1-1 .cycloneslider-next" 
data-cycle-tile-count="7" 
data-cycle-tile-delay="100" 
data-cycle-tile-vertical="true" 
data-cycle-log="false">
<div class="cycloneslider-slide" > 
(sources of) img1, img2, img3
</div>
</div>
<script>jQuery.noConflict();</script> 
```

尝试但失败：

```
$('.cycle-slideshow').cycle('pause');

$('#cycloneslider-slideshow1-1 .cycle-slideshow').cycle('pause');

$('.cycle-slideshow', window.parent.document).cycle('pause'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:31:40.583

您的代码中存在某种类型的 jquery 冲突。试试这个：

```
jQuery('.cycle-slideshow').cycle('pause'); 
```

代替

```
$('.cycle-slideshow').cycle('pause'); 
```

# javascript - Apache 为 .js 文件发送不正确的响应标头

> ID：14363350
> 
> 赞同：0
> 
> 时间：2013-01-16T16:43:28.070
> 
> 标签：javascript, apache, mime-types, content-type

我注意到 Chrome 报告 .js 文件的 MIME 类型错误。这些文件由 Apache 2 提供，最初在其 conf 文件中没有引用 js 文件。

我在 http.conf 中添加了以下配置：

```
AddType application/x-javascript .js 
```

然后重新加载配置。.js 文件仍与此响应标头一起发送：

```
HTTP/1.1 200 OK
Date: Wed, 16 Jan 2013 16:39:42 GMT
Server: Apache/2.2.3 (Red Hat)
X-Powered-By: PHP/5.4.10
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8 
```

没有 .htaccess 文件。

什么会导致 Apache 发送不正确的 Content-Type，即使我在配置中指定了 application/x-javascript 并重新加载了服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-03T16:15:42.903

我最近在另一台服务器上遇到了这个问题并解决了这个问题。 `conf.d/php.conf`包含这些行：

```
AddHandler php5-script .php .phtml .html .css .js
AddType text/html .php 
```

我将第一行更改为

```
AddHandler php5-script .php .phtml .html
AddType text/html .php 
```

然后保存并重新启动 Apache。js & css 文件现在以正确的 mime 类型出现在 Firefox/Chrome 中。

*顺便说一句，我尝试`AddType text/javascript .js`在下面添加`AddType text/html .php`，但文件仍然显示为`text/html`Inspector。我必须从 AddHandler 中删除 .css 和 .js 才能发送正确的 mime 类型。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:30:21.277

如果你的 httpd.conf 中有类似的东西`SetHandler application/x-httpd-php`，那么你应该把它放进`<FilesMatch \.php$> SetHandler application/x-httpd-php </FilesMatch>`去，让 Apache 为其他文件发送好的 Content-Type。

# python - 类路径上带有 NetBeans 项目模块的交互式控制台

> ID：14363351
> 
> 赞同：0
> 
> 时间：2013-01-16T16:43:28.330
> 
> 标签：python, netbeans, read-eval-print-loop

我正试图将我的头脑围绕在 Python 上，而我的大脑则为 Java 和 Scala 工作，所以如果这个问题表述不当，请原谅。

我已经设法在 OS X 上使用 Python 2.7 设置 NetBeans 6.9。我可以编译和运行我的项目，很好。

现在我想要的是相当于 sbt 的`console`命令的东西。我想**用我的项目在 classpath 上启动 Python REPL**，这样基本上我可以交互式地调用我的自定义函数和类。

有`Window`-> `PythonConsole`，但是会启动一些 Python（或 Jython？） 2.5，而我的模块似乎不在命名空间中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:08:56.553

我有一个类似的问题。

将默认平台设置为python `tools->python platforms`2.7。这应该会导致`window->pythonConsole`启动正确版本的 python。

至于然后能够导入您的自定义模块......这也是我目前遇到的问题。

# php - php 数组循环与数组循环来查找值

> ID：14363352
> 
> 赞同：0
> 
> 时间：2013-01-16T16:43:31.590
> 
> 标签：php, arrays, loops

我有一个二维数组 $array_userinfo 大约。21,000 个元素。每个元素在第一个位置都有“登录”，在第二个位置有“电子邮件”。我需要做的是遍历这个数组并从另一个 $array_usermeetingfolder 中找到任何匹配的“登录名”，这是一个大约为 1 的一维数组。700 个元素。

这是填充的两个数组：

```
foreach ($child->children() as $node_principalid) {
array_userinfo[$i][0] = (string) $node_principalid->login;
$array_userinfo[$i][1] = (string) $node_principalid->email;
i++;                            
}

foreach (.......) {
$endusersconame =  (string) $usermeetingsfoldersco->children()->name;       
$array_usermeetingfolder[$j] = $endusersconame;//
 $j++;
} 
```

最好/有效的方法是什么？我有一个这样的循环：

```
for ($k=0;$k < count($array_userinfo);$k++) {
//tempecho($array_userinfo[$k][0]);//will yield login, such as, 'joeblow'
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:57:05.150

一种可能的解决方案：

转换`$array_usermeetingfolder`所以你有一个数组，其中用户登录是键，值是任何东西。例如

```
$temp = array('joeblow' => 1,
      'someoneelse' => 1,
      ...); 
```

然后在循环中，您可以检查密钥是否存在：

```
if (isset($temp[$array_userinfo[$k][0]]) {
    echo 'Hoozah!';
} 
```

您也可以使用`array_key_exists()`代替 isset。您将不得不运行一些更有效的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:18:04.703

如果有可能您应该将登录名用作数组键，那么您可以快速访问该键，我认为您不需要考虑性能。PHP 中的数组是 Hashmaps，如果您知道密钥，则可以快速访问它，如果您必须检查整个数组，则需要更长的时间。如果你不能改变它，你应该考虑从数组中创建一个数据结构来提高性能。不知道值不值，量一下吧：）

像：

```
<?php
foreach($array_userinfo as $info) {
    $checkAgainst[$info[0]] = $info[1];
}

foreach($array_usermeetingfolder as $mail) {
    if(isset($checkAgainst[$mail]) {
        $return[$mail] = $checkAgainst[$mail];
    }
}

// use $return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:23:12.810

以下应该工作。

```
for($i=0;$i <= count($firstarray);$i++)
    {
    for ($j=0;$j <= count($secondarray);$j++)
    {
        while($firstarray[$i][0] == $secondarray[$j])
        {
            echo $firstarray[$i][0]; // or $secondarray[$j]
        }

    }

    } 
```

# html - 定位具有特定嵌套类的 div

> ID：14363353
> 
> 赞同：1
> 
> 时间：2013-01-16T16:43:33.870
> 
> 标签：html, css

我在一个页面上多次获得以下代码：

```
<div>
    <input class="entry">
</div> 
```

我想通过 css 定位 div 标签而不创建类或 id。这可能吗？

我试过了`div.entry { foo }` ，`.entry div {foo}` 但似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:48:02.800

您没有使用该 CSS 定位 div，您需要选择具有条目类的输入的父级。但是，在当前的 CSS 中没有办法做到这一点，只能使用 CSS4 的选择器规范，可以按如下方式完成：

```
div! > input.entry { foo } 
```

AFAIK，目前还没有浏览器支持这个，所以你必须使用 JavaScript。

# ios - 邮件 UIActivityViewController 不关闭

> ID：14363355
> 
> 赞同：1
> 
> 时间：2013-01-16T16:43:39.560
> 
> 标签：ios

我有一个 UIActivityViewController 不会关闭 iPad 上的邮件对话框。该代码是来自 Apple 示例的标准代码，并且在 iPhone 上运行良好。

```
 NSString* someText = [NSString stringWithFormat:@"%@ Is really cool, sent from Element Story. en.wikipedia.info/wiki/%@",
                          [_detailItem description], [_detailItem description]];

   ActivityViewCustomProvider *customProvider =
    [[ActivityViewCustomProvider alloc]init];

    NSArray *items = [NSArray arrayWithObjects:customProvider,imageView.image,someText, nil];

    //ActivityViewCustomActivity *ca = [[ActivityViewCustomActivity alloc]init];

    // ...or whatever pieces of data you want to share.
    UIActivityViewController *activityVC =
    [[UIActivityViewController alloc] initWithActivityItems:items applicationActivities:nil];
                                      //applicationActivities:[NSArray arrayWithObject:ca]];

activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePrint, UIActivityTypeCopyToPasteboard];
    [self presentViewController:activityVC animated:YES completion:^{}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:29:30.560

我假设您正在从 splitviewcontroller 显示此内容，这也是我遇到的问题。本质上，您需要从主视图中呈现 UIActivityViewController。

所以而不是

```
[self presentViewController:activityVC animated:YES completion:nil]; 
```

就像是：

`[[[self parentViewController] parentViewController] presentViewController:activityVC animated:YES completion:nil];`

不幸的是，它看起来不太好，因为它会在整个视图中显示选项，而不仅仅是在导航端或细节端的上下文中，但它会起作用。

# batch-file - 将参数从命令提示符传递到远程 ubuntu 机器

> ID：14363360
> 
> 赞同：3
> 
> 时间：2013-01-16T16:43:51.267
> 
> 标签：batch-file, ksh, putty, plink

我正在尝试将争论传递给要在远程机器上执行的本地脚本。该脚本工作正常，因为我已经测试过它手动传递变量。我正在尝试为此使用 plink。我接受用户名（arg 要传递给脚本），并需要通过 plink 将其与脚本一起发送。我正在使用的命令是：

```
plink.exe ubuntu@192.168.198.128 -m "myLocalScript.ksh" 
```

我也试过：

```
plink.exe ubuntu@192.168.198.128 -m "myLocalScript.ksh %username%"   

plink.exe ubuntu@192.168.198.128 -m %username% < "myLocalScript.ksh" 
```

我已经尝试过输入参数，并将它们添加到命令中的各个位置等。有谁知道我如何实现这一点？

编辑：我使用的是 cmd.exe 而不是 cygwin。他们 -m 选项执行以下操作：

```
-m file   read remote command(s) from file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:11:21.757

*-m*选项没有传递属性的机制，它只是按原样运行文件。问题是您的 korn shell 脚本在本地端没有解释器，因此在您的 Windows 端没有此机制，但请尝试以下操作：

```
plink ubuntu@192.168.198.128 "tr -d '\r'| ksh -s %username%" < myLocalScript.ksh 
```

更好的是让主调用更具可读性：

```
call :remotecmd ubuntu@192.168.198.128 myLocalScript.ksh %username%

exit /B
:remotecmd 
  setlocal
    for /f "tokens=2,*" %%i in ("%*") do set options=%%j
    plink %1 "tr -d '\r'| ksh -s %options%" < %2
  endlocal
exit /B 
```

该命令现在被概括为处理任意数量的附加开关。

# asp.net - 使用 Fiddler 模拟 HTTP POST 请求的数据包之间的延迟

> ID：14363361
> 
> 赞同：0
> 
> 时间：2013-01-16T16:43:54.813
> 
> 标签：asp.net, xmlhttprequest, fiddler

我可以看到如何使用 ScriptEditor 在 Fiddler 中编写整体延迟脚本，使用如下内容：

```
if (oSession.HostnameIs("www.testsite.co.uk")) {
    oSession["request-trickle-delay"] = "500";
} 
```

但是，**我需要更具体**并指定**包含标头的请求的第一个数据包和包含 body 的辅助数据包之间的**延迟。

我正在尝试模拟 0.3% 的 Web 客户端发生的问题，我们从这些客户端接收请求标头，但**缺少请求正文**。没有**一致的用户代理**。各种浏览器和操作系统似乎都受到了影响。所有 POST 请求都源自 XMLHttpRequests (XHR)。它们看起来像这样，并且包含 JSON 主体：

```
POST http://www.sitename.co.uk/folder/controller/list HTTP/1.1
Host: www.sitename.co.uk
Connection: keep-alive
Content-Length: 245
Accept: application/json, text/javascript, */*; q=0.01
Origin: http://www.sitename.co.uk
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17
Content-Type: application/json
Referer: http://www.sitename.co.uk/folder/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-GB,en;q=0.8,en-US;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: **removed**

{"bb":{"tl":{"lat":51.590527931951975,"lng":-0.636399852539089},"tr":{"lat":51.590527931951975,"lng":0.42652739355466096},"bl":{"lat":51.29736817638294,"lng":-0.636399852539089},"br":{"lat":51.29736817638294,"lng":0.42652739355466096}},"b":true} 
```

我检查了在防火墙级别设置的 MTU 大小，它设置为 1500，我认为这很好。

Web 服务器位于负载平衡器后面，并在 Windows Server 2008 R2 64 位上运行 IIS 7.5。网站在 ASP.NET MVC3 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:38:58.077

*值得一提的是，标头可能位于多个 TCP/IP 数据包中，并且没有什么要求正文与标头位于不同的数据包中。但我假设您正在松散地使用术语数据包*

Fiddler v2.4.2.6 有一个`Request-Body-Delay`会话标志，可以启用您正在寻找的延迟；将其设置为例如`5000`以将身体延迟 5 秒。（v2.4.2.6 目前处于 alpha 阶段：[https](https://fiddler2.com/dl/fiddler2alphasetup.exe) ://fiddler2.com/dl/fiddler2alphasetup.exe ）

FWIW，可能标头已发送，但 POST 正文未发送。如果您安装了有问题的插件，则在 IE 中可能会发生这种情况（例如，请参阅[为什么 IE 10 拒绝通过 jQuery $.ajax 发送 POST 数据](https://stackoverflow.com/questions/13188500/why-is-ie-10-refusing-to-send-post-data-via-jquery-ajax)）。

如果连接断开，也会出现此问题。例如，如果您尝试在 OnBeforeUnload 方法中执行 POST，则可能会发送标头，但在发出 POST 正文之前进程会被终止。

# php - PHP - 其他意外

> ID：14363363
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:44:00.907
> 
> 标签：php, if-statement

谁能告诉我为什么 PHP 给我这个错误？：

```
Parse error: syntax error, unexpected 'else' (T_ELSE) in C:\xampp\htdocs\Task2PHP\final\registration.php on line 139 
```

（错误是***中的错误，因为我没有输出所有代码）

我似乎找不到问题

代码：

```
<?php

if ($isLoggedin === false) {

                                include("form.php");

                                    if (isset($_POST['Name'])) {

                                        // DECLARE VARIABLES TO NULL
                                        $Name = null; $Surname = null; $Username = null; $Email = null; $C_Email = null; $Password = null; $C_Password = null; $SecQ = null; $SecA = null;

                                        // GET ELEMENTS FROM BROWSER POST.
                                        if (isset($_POST['Name'])) {
                                            $Name = $_POST['Name'];
                                        }
                                        if (isset($_POST['Surname'])) {
                                            $Surname = $_POST['Surname'];
                                        }
                                        if (isset($_POST['Username'])) {
                                            $Username = $_POST['Username'];
                                        }
                                        if (isset($_POST['Email'])) {
                                            $Email = $_POST['Email'];
                                        }
                                        if (isset($_POST['C_Email'])) {
                                            $C_Email = $_POST['C_Email'];
                                        }
                                        if (isset($_POST['password'])) {
                                            $Password = $_POST['password'];
                                        }
                                        if (isset($_POST['c_password'])) {
                                            $C_Password = $_POST['c_password'];
                                        }
                                        if (isset($_POST['SecQ'])) {
                                            $SecQ = $_POST['SecQ'];
                                        }
                                        if (isset($_POST['SecA'])) {
                                            $SecA = $_POST['SecA'];
                                        }

                                        // CONNECT TO MYSQL DB
                                        $con = mysql_connect('localhost', 'storefileuser', 'storefileuser');
                                        mysql_select_db ("storefile");

                                        if (!$con) {

                                                die('Could not connect: ' . mysql_error());
                                            } else {

                                                if ($Name == null || $Surname== null || $Password == null || $C_Password == null || $Email == null || $C_Email == null || $SecQ == null || $SecA == null ) {
                                                    echo "Missing details. Please enter all fields.";
                                                } else {

                                                    $usernameexists = false;
                                                    $emailexists = false;
                                                    $result = mysql_query("SELECT * FROM users WHERE username = '$Username'");
                                                    if (mysql_num_rows($result) > 0) {
                                                        $usernameexists = true;
                                                    }
                                                    $result = mysql_query("SELECT * FROM users WHERE Email = '$Email'");
                                                    if (mysql_num_rows($result) > 0) {
                                                        $emailexists = true;
                                                    }

                                                    if (!$emailexists || !$usernameexists) { 
                                                        // VALIDATE CONFIRMS
                                                        if  ($Email == $C_Email && $Password == $C_Password) {

                                                            $encrypt_password=md5($Password);

                                                            $query = "INSERT INTO users (Username, Name,Surname, Password, Email, SecQ, SecA) VALUES ('".$Username."', '".$Name."', '".$Surname."', '".$encrypt_password."', '".$SecQ."', '".$SecA."', '".$Email."')";

                                                            echo "You have been successfully registered.";

                                                            }

                                                        } else {
                                                            echo "Error registering.";

                                                    } else {
                                                        echo "Username or email already entered in the database!";
                                                    }
                                                }
                                        }

                                    } 

    }   else {

            echo '<h1> You are already registered/logged in!</h1>';

            }                               
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:47:26.360

在你的大 if 语句之前有一个额外的右花括号`} else {`（你知道我在说哪一个）

和：

139 之前的几行，**缺少**一个花括号。

```
 } else {
        echo "Error registering.";
    } // here is where it should be.                            
} else {
    echo "Username or email already entered in the database!";
} 
```

工作代码： http: [//pastebin.com/NcL85pnu](http://pastebin.com/NcL85pnu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:51:28.507

```
 echo "You have been successfully registered.";

'}'

} else {
    echo "Error registering.";
} 
```

那就是问题所在。我用引号括起来的括号。

我强烈建议您使用为 PHP 设计的 IDE（例如 Eclipse PDT）。它会准确地告诉你问题出在你的语法上。

# javascript - 如何返回没有、空或空白 id 的元素？

> ID：14363365
> 
> 赞同：2
> 
> 时间：2013-01-16T16:44:08.073
> 
> 标签：javascript, jquery, html

我正在重新配置一个包含 100 多个输入元素的复杂 HTML 文档。我想快速找到任何具有空白 id ( `<input type="text" name="something" id="" ...`)、只有空格 ( `<button name="unimportant" id=" "...`) 的 id 或根本不知道的元素（`<select name="whatever">`以便我可以对源进行必要的更正。

我知道空白 id 的选择器是`$('[id=""]')`，但是如何使用一个选择器（或连接的选择器）获取所有目标元素？

示例 HTML：

```
<form id="provision">
  <input type="text" name="something" id="" value="blank id" /><br />
  <input type="text" name="something2" value="no id" /><br />
  <select name="something3"><option>No id</option></select><br />
  <textarea name="something4" id="">Blank id</textarea><br />
  <button name="something5" id=" ">whitespace id</button><br />
  <button name="something6" id="  ">extra whitespace id</button><br />
  <label><input type="radio" name="something7" id="
">Carriage return id</label>
</form> 
```

有关添加红色边框 ( )的示例，请参阅[http://jsfiddle.net/jhfrench/VNdL6/ 。](http://jsfiddle.net/jhfrench/VNdL6/)`.css('border-color', 'red')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:45:13.713

用逗号分隔选择器：

```
$("[id=''], [id=' '], :not([id])").css("border-color", "red"); 
```

另一种选择是使用过滤：

```
$("[id]").filter(function() {
    return $.trim(this.id) === "";
}).add(":not([id])").css("border-color", "red"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:38:46.973

为了避免无效 ID 的潜在问题，以及由此产生的不可预测的行为`querySelector`或其 jQuery 等价物，这可能会影响@VisioN 的解决方案，我可能会尝试类似

```
[].concat(document.getElementsByTagName("input")).forEach(function(elt){
    if(elt.hasAttribute("id") && /^\s*$/.test(elt.getAttribute("id")) {
        elt.removeAttribute("id");
    }
}); 
```

如果您不在 ECMAScript5 环境中，则为等价物。

这大致相当于@Adil 正在做的事情，尽管它删除了无效的 ID，而不是仅仅在它们上设置边框颜色属性。

然后可以使用 CSS 规则进行着色

```
input:not([id]) { border-color: red; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:46:23.253

您可以使用[filter()](http://api.jquery.com/filter/)过滤掉具有空白 id 或 id 由空格组成的元素。您可以根据需要在过滤器功能中应用复杂的过滤器。

```
$(':input').filter(function(){
     if($.trim(this.id).length == 0)
           return $(this);
}).css('border-color', 'red') 
```

# jquery - 使用 PHP 生成的 XML 使用 jQuery 自动完成小部件将 ID 添加到 ul/li

> ID：14363367
> 
> 赞同：0
> 
> 时间：2013-01-16T16:44:14.443
> 
> 标签：jquery, xml, autocomplete

我在修改书中的脚本（Eric Sarrion 的 jQuery UI）时遇到问题，这本书设置了一个数据库（mysql），它输出一个格式化为的 xml 文档

```
<books>
<li>
<title>Annie</title>
<picture>annie.jpg</picture>
</li>
</books> 
```

因为我想将自动完成结果传递给加载“annie”详细信息的脚本，所以我想传递数据库 ID 而不是标题，所以修改了数据库以包含一个 id，然后将输出 xml 更改为

```
<books>
<li>
<id>123456</id>
<title>Annie</title>
<picture>annie.jpg</picture>
</li>
</books> 
```

我进一步更改了代码，因此它将 attr id="123456" 添加到自动完成的 li 标记中，如下所示

```
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 1; top: 209px; left: 969px; display: block; width: 400px;">
<li class="ui-menu-item" role="menuitem" **id="123456"**>
<a class="ui-corner-all" tabindex="-1">
<img src="./annie.jpg" height="30">
<span style="position:relative;top:-7px;left:10px">Annie</span>
</a>
</li>
</ul> 
```

但是，我现在无法将 ID 放入隐藏的表单输入，准备传递给详细信息脚本。

我希望能够做类似的事情

```
select:function(event, ui) {
    console.log("Name: " + ui.item.value + " Id: " + ui.item.id);
} 
```

这本书越看越觉得是个错误，很多很多html错误，一些php错误，格式不好。我不确定是我在服务器端语言方面的背景还是这本书让这变得如此困难。

jQuery代码如下。

```
// JavaScript Document
$(document).ready(function() {
$("input#search-text").autocomplete ({
source : function (request, callback){
var data = { term : request.term };
$.ajax ({
url : "./action.php",
data : data,
complete : function (xhr, result){
if (result != "success") return;
var response = xhr.responseXML;
var books = [];
$(response).find ("li title").each (function ()
{books.push ($(this).text ());});
callback (books);
var $ul = $("input#search-text").autocomplete ("widget");
$(response).find ("li picture").each (function (index) {
var src = $(this).text () || "default.jpg";
$ul.find ("li:eq(" + index +") a").wrapInner ("<span style=position:relative;" + "top:-7px;left:10px></span>").prepend ("<img src=./images/" + src + " height=30 />");});
$(response).find ("li id").each (function (index) {
    var id = $(this).text () || "0";
    $ul.find("li:eq("+index+")").attr('id',id);
});
}
});
},
open : function (event){
var $ul = $(this).autocomplete("widget");
$ul.blur(function(event) {});
$ul.show ().slideDown (600);
$ul.css ("width", "400px");
},
select:function(event, ui) {
    console.log("Selected: " + ui.item.value + " aka " + ui.item.id);
}
});
}); 
```

欢迎任何关于更好的书籍或更好的方法的建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:31:57.703

我通过从 xml 切换到 json 解决了这个问题，有点麻烦，但现在改用这段代码......

```
//autocomplete code
    $("#search-text").autocomplete({
        source: "./action.php",
        minLength: 3,
        delay: 300,
        max:10,

        select: function(event, ui) {
            $('#search-value').val(ui.item.id);
            //$('#picture').val(ui.item.picture);
        }
}).data("autocomplete")._renderItem = function (ul, item) {
        return $("<li />")
            .data("item.autocomplete", item)
            .append("<a><img height='30' src='./images/" + item.picture + "' /><span style=position:relative;" + "top:-7px;left:10px>" + item.label + "</span></a>")
            .appendTo(ul);
}; 

    }); 
```

像 json 输出

```
[{"id":"123456","value":"annie","picture":"annie.jpg"}] 
```

因为 max:10 不起作用，所以我在 mysql 查询中添加了 10 的限制。

# requirejs - requirejs 在一个成熟的项目上

> ID：14363373
> 
> 赞同：1
> 
> 时间：2013-01-16T16:44:28.213
> 
> 标签：requirejs, amd

我想开始在我的项目中使用 requirejs，该项目已经开发了大约一年，而且它很大。

该项目是asp.net，母版页有大约50个脚本，其中一半是项目的自定义脚本，其中大部分是使用显示模块模式编写的，另一半是第三方脚本和jquery插件。

页面中也有很多内联的JS代码。

如果有人能告诉我重构项目的最佳策略是什么，我将不胜感激。也许有一些方法可以一步一步来，以免阻碍开发团队的其他成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:44:40.533

选择 AMD 模块模式只有一个很好的理由：通过将 JS 代码拆分为可管理的模块来保护开发人员的理智。

只有一种方法可以保持理智并仍然提供紧凑、高效的页面——你需要“构建”你的 AMD 树。否则所有的小模块都会变成一堆 HTTP Get 请求，拖慢你的应用程序。

在您的特定情况下使用“内置 AMD 树”的一个副作用是您可能会从缩小的 JavaScript 中受益。您的应用程序已经由服务器 gziped 提供，但缩小 JavaScript 会使它们变得更小。另外，与可能由服务器分配的缓存设置非常短的 aspx 文件相比，单独的静态 JS 文件具有更好的缓存签名。

“构建” AMD 树的方法：

1.  将散布在 aspx 文件周围的所有*大块*JavaScript 代码放入单独的 JS 文件中。将它们的脚本标签插入到您的 aspx 中。测试，确保您的应用仍然有效。

2.然后把这些文件转成AMD模块。重新测试您的应用。

3\. 然后在树上运行 AMD 树优化器以获取一个包含所有 AMD 模块的长 JS 文件。针对该模块重新测试您的应用程序。

AMD 构建工具中有一个既定的领导者： [https ://github.com/jrburke/r.js](https://github.com/jrburke/r.js)

但我建议您先尝试以下方法：http: [//prunejs.com/](http://prunejs.com/)

第一个需要狡猾的配置，很多耐心。PruneJS 不需要配置，但不如 r.js 灵活。

除非你承诺一路走下去——“建立 AMD 树”——否则不要走 AMD。这不值得。

# lucene - 在 lucene 4 中，IndexReader.getTermVector(docID, fieldName) 为每个文档返回 null

> ID：14363377
> 
> 赞同：6
> 
> 时间：2013-01-16T16:44:34.613
> 
> 标签：lucene

我正在使用新发布的 Lucene 4，并且我了解与文档术语向量相关的 API 发生了很大变化。我已经阅读了迁移文档和相关的各种博客邮件列表帖子，并且我相信我正确使用了 API。但是，我总是从 IndexReader.getTermVector() 得到一个空术语引用。这就是我正在做的事情：

```
// Indexing, given "bodyString" as a String containing document text
Document doc = new Document();
doc.add(new TextField("body", bodyString, Field.Store.YES));
MyIndexWriter.addDocument(doc);

// much later, enumerating document term vectors for "body" field for every doc
for (int i = 0; i < Reader.maxDoc(); ++i) {
  final Terms terms = Reader.getTermVector(i, "body");
  if (terms != null) {
    int numTerms = 0;
    // record term occurrences for corpus terms above threshold
    term = terms.iterator(term);
    while (term.next() != null) {
      ++numTerms;
    }
    System.out.println("Document " + i + " had " + numTerms + " terms");
  }
  else {
    System.err.println("Document " + i + " had a null terms vector for body");
  }
} 
```

当然，它打印出我对每个文档都有空词向量，即 Reader.getTermVector(i, "body") 总是返回空值。

当我查看 Luke 中的索引时，我有存储了正文字段的文档。但是，当我在突出显示正文字段的同时单击“TV”按钮（在“文档”选项卡中）时，Luke 告诉我“术语向量不可用”。索引时是否需要添加其他类型的选项来记录此信息？

有任何想法吗？谢谢！

乔恩

*更新* 我应该注意到有`IndexReader`问题的是一个实例`SlowCompositeReaderWrapper`，它包装了一个`DirectoryReader`. 我使用 a 是`SlowCompositeReaderWrapper`因为我也想要语料库术语频率，并且不清楚如何在所有`IndexReader`叶子上迭代所有文档（文档 ID 是否在它们之间重复使用？等等）。

SlowCompositeReaderWrapper 是罪魁祸首吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T20:24:22.943

根据[TextField API](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/document/TextField.html)，它是“一个被索引和标记的字段，没有术语向量。” 如果您希望存储 TermVectors，您应该只使用一个[Field](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/document/Field.html)并将其设置为将 TermVectors 存储在[FieldType](http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/document/FieldType.html)中。

就像是：

```
Document doc = new Document();
FieldType type = new FieldType();
type.setIndexed(true);
type.setStored(true);
type.setStoreTermVectors(true);
Field field = new Field("body", bodyString, type);
doc.add(field);
MyIndexWriter.addDocument(doc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T05:10:02.473

您正在使用 TextField，[这是一个被索引和标记的字段，**没有术语向量**](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/document/TextField.html)。这就是为什么你会在 getTermVector() 上得到 null。不使用 TextField，而是使用自定义的 FieldType 构造 Field，其中 setStoreTermVectors 为 true。

# javascript - jQuery选择包含目标的div

> ID：14363378
> 
> 赞同：1
> 
> 时间：2013-01-16T16:44:35.770
> 
> 标签：javascript, jquery

```
<div class="row">
    <label for="txtTitle">Title</label>
    <div class="holder">
        <div class="text-holder"> <span class="ico-error"></span><span class="text"> <input id="txtTitle"
     runat="server" type="text" value="" /></span>  <span class="t-l">
     </span><span class="b-l"></span><span class="t-r"></span><span class="b-r"></span> 
        </div>
    </div>
</div> 
```

我有以下html。我打算对输入框进行一些 Jquery 验证。如果这是无效的，我想将错误类添加到 div

```
 var isValid = true;
        var errorMessage = '';
        if ($('#<%=txtTitle.ClientID %>').val() == '') {
            $('#<%=txtTitle.ClientID %>').parent().parent().parent(".row").addClass("error");
            isValid = false;
            errorMessage += "Firstname is required\n";
        }
        return isValid; 
```

我试图以父母为目标，但看到这个 div 比父母更进一步。所以试图用更多的父标签选择 heirachy，但认为我偏离了正确的定位 div 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:46:02.847

我建议使用[`.closest()`](http://api.jquery.com/closest/)：

> **描述**：对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

```
var isValid = true;
var errorMessage = '';
var $this = $('#<%=txtTitle.ClientID %>');

if ($this.val() == '') {
    $this.closest(".row").addClass("error");
    isValid = false;
    errorMessage += "Firstname is required\n";
}
return isValid; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T16:49:01.223

如果您需要查找树，请使用[.parents()](http://api.jquery.com/parents/)方法并将其传递给包含 div 的类，即：`.parents('.row')`

# java - Java 结果集 - 将 java 日期与 SQL getDate() 进行比较

> ID：14363379
> 
> 赞同：0
> 
> 时间：2013-01-16T16:44:37.773
> 
> 标签：java, swing, datetime, resultset

获取当前日期的代码：

```
SimpleDateFormat sdfDate = new SimpleDateFormat("yyyy-MM-dd");
Date now = new Date();
String strDate = sdfDate.format(now);
return strDate; 
```

搜索日期和返回结果的代码

```
try
   {     
        String x = cDate();

        ps = conn.prepareStatement(fill);
        rs = ps.executeQuery();

        int count = 0;

       while (rs.next()){
       Date dDate = rs.getDate("recDate");

        if (x.equals(dDate)){
            System.out.println("True);
            break;
        } 
        else {
            System.out.println("False");
            }
        }

   }
   catch(Exception e){
            JOptionPane.showMessageDialog(null, e);
  } 
```

下面的代码用于搜索名称并返回结果

```
 try
   {     
        string attendant = txtName.getText();

        ps = conn.prepareStatement(fill);
        rs = ps.executeQuery();

        int count = 0;

       while (rs.next()){
       String bName = rs.getString("name");

        if (attendant.equals(bName){
            System.out.println("True);
            break;
        } 
        else {
            System.out.println("False");
            }
        }

   }
   catch(Exception e){
            JOptionPane.showMessageDialog(null, e);
  } 
```

我设法得到我的第二个代码，即搜索名称并返回结果以正常工作。但是对于日期搜索，即使我在 SQL DB 中有 getDate() 也会导致错误。

我做了一个 System.out.println(x) 和 System.out.println(dDate) 来验证格式，但结果是正确的。

2013-01-17 2013-01-17

应该返回“真”

编辑：

```
 java.util.Date now = new java.util.Date();
        java.sql.Date sqlDate = new java.sql.Date(now.getTime());

       I replace (x.equals(dDate)) to (sqlDate == dDate) but the result still return as false, any idea? 
```

请帮忙..

最后我得到了它..

解决方案

```
 (Math.round(now.getTime() / 1000/3600/24) == Math.round(dDate.getTime() /1000/3600/24) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:56:09.210

Java Date 还包含时间信息。日期可能以分钟甚至秒为单位。为确保两个日期具有完全相同的值，您应该打印出`date.getTime()`哪个毫秒的返回`long`值 since `January 1, 1970, 00:00:00 GMT`。如果你想比较你应该`x`从 String 转换为 Date 然后这样做：

```
 x.getTime() == dDate.getTime() 
```

但是，如果您只想比较年、月和日，您应该像这样进行中继：

```
 Math.round(x.getTime()/1000/3600/24) == Math.round(dDate.getTime()/1000/3600/24) 
```

有关 Java 中日期比较的更多信息，您可以在此处找到：[使用 Java 进行日期比较](https://stackoverflow.com/questions/2811121/date-comparison-using-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:49:29.913

我认为问题在于您试图将字符串与日期对象进行比较，尽管值相同但两者都是不同的对象，但该对象将是错误的。

```
String x = cDate();
...
Date dDate = rs.getDate("recDate");
...
if(x.equals(dDate)){ 
```

方法的默认行为`equals`比较对象引用是否指向同一个对象而不是基于值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:49:34.773

在线：

```
x.equals(dDate) 
```

x 是 a `String`， dDate 是 a `java.sql.Date`。他们不是平等的。

# c++ - CWinApp::OpenDocumentFile 创建一个新窗口

> ID：14363383
> 
> 赞同：2
> 
> 时间：2013-01-16T16:44:49.177
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, mfc, mdi

最近，我们将使用 MFC 的 C++ 项目从 VS2008 移到了 VS2010。

还有一个小问题：在我们的MDI界面中，调用函数CWinApp::OpenDocumentFile后，app不仅打开了文件，还新建了一个空的MDI窗口。

如果我们将工具集（项目属性 -> 常规 -> 平台工具集）更改回 v90（VS2008），我们不会遇到这个问题。

也许有人看到了同样的问题并且知道我们做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:03:37.327

解决了。也许解释会帮助某人：

问题出在 MFC 功能中：

```
CDocument* CDocManager::OpenDocumentFile(LPCTSTR lpszFileName) 
```

在 VS2008 中它调用了一个函数

```
return pBestTemplate->OpenDocumentFile(szPath); 
```

在 VS2010 中它调用另一个函数（具有不同数量的参数）

```
return pBestTemplate->OpenDocumentFile(szPath, bAddToMRU, TRUE); 
```

我们在自己的 CMultiDocTemplate 实现中没有覆盖它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T17:16:08.543

实际上，调用 opendocumentfile 函数的文件 docmgr.cpp 发生了变化。

如果您从 CMultiDocTemplate 派生一个类，请注意此更改。

事实上，你的帖子帮助我在我的申请中发现了一个错误。

# java - 如何在 JOOQ 中将记录转换为表记录？

> ID：14363384
> 
> 赞同：5
> 
> 时间：2013-01-16T16:44:49.203
> 
> 标签：java, sql, jooq

我需要将 JOOQ 的记录结果集转换为表记录列表。有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:51:15.050

是的，您可以使用[`Result.into(Table)`](http://www.jooq.org/javadoc/latest/org/jooq/Result.html#into%28org.jooq.Table%29). 一个例子：

```
Result<?> result = create.fetch(...);
Table<MyRecord> MY_TABLE = ...
Result<MyRecord> other = result.into(MY_TABLE); 
```

作为[`Result`](http://www.jooq.org/javadoc/latest/org/jooq/Result.html)实现`List`，这应该可以满足您的需要

# c# - 链接/引用 DLL - 引用成功，构建失败 --> C#/.NET

> ID：14363386
> 
> 赞同：0
> 
> 时间：2013-01-16T16:44:50.260
> 
> 标签：c#, dll, reference, linker

我有 2 个 .NET 编译的 DLL，我想将其链接到另一个项目中。所以我在我的新项目中引用了这 2 个 DLL（添加引用-浏览 - 选择 dll）。一切似乎都很好，我可以访问引用的 DLL 中的类和方法，但是当我尝试构建新项目时，编译器告诉我：

```
 Error   14  The type or namespace name 'Business'
 could not be found (are you missing a using directive or an assembly reference?) 
```

我必须将它们链接到其他地方吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:02:04.377

当 DDL 的 .NET Framework 版本与引用它的项目不同时，可能会发生此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:55:04.620

尝试将每个引用的 CopyLocal 设置为“true”。如果 CopyLocal 设置为 false，则引用的 DLL 必须在您的项目范围内（think、bin 和 obj 文件夹）

# c# - 如何重新调整允许输入类型参数更改的通用 C# 表达式的用途？

> ID：14363387
> 
> 赞同：2
> 
> 时间：2013-01-16T16:44:52.910
> 
> 标签：c#, asp.net-mvc, generics, lambda

编辑：简化问题真实世界的版本可以在下面找到，但也许没有必要回答这个问题。

我有一个 MethodCallExpression，我想重新利用它。表达式调用的主体引用的方法是正确的方法，但是其中一个类型参数将发生变化。给定一个现有的 MethodCallExpression，我想构造一个具有相同主体表达式但类型参数不同的新 MethodCallExpression。这可能吗？如何做到这一点？谢谢。

真实世界的问题如下（除非您需要更具体的示例，否则请忽略此问题）：

我有一个`Expression<Func<HtmlHelper<TModel>, Expression<Func<TModel, TValue>>, MvcHtmlString>>`用作显示模板的表达式（将 HtmlHelper 和 Expression> 作为输入并输出 McvHtmlString）。如果 TValue 是一个自定义类实例，那么它的属性必须输入到表达式委托而不是对象本身。这是有问题的，因为这意味着 TValue 将从父对象更改为当前属性的类型。（代码如下）

我不确定我应该如何解决这个问题。我知道可以使用 ExpressionVisitor 来实现表达式的这种更改，但我也在考虑我的表达式可能过于冗长的事实。请帮忙。

我试图创建的是用于呈现标签/值字段对的 HtmlHelper 扩展方法（ASP.NET MVC）。但是，我有绑定和未绑定字段的概念。绑定字段只是用一些剔除属性呈现。在我尝试使用 C# Expression API 重构一些可重用的组件之前，这种方法运行良好。

首先，这是用于将字段集呈现为绑定或未绑定元素的两种公共扩展方法。

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString FieldsetDisplayFor<TModel, TValue>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TValue>> expression)
    {
        return RenderFieldsetDisplayFor(htmlHelper, expression, (helper, ex) => helper.DisplayFor(ex));
    }

    public static MvcHtmlString BoundFieldsetDisplayFor<TModel, TValue>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TValue>> expression)
    {
        return RenderFieldsetDisplayFor(htmlHelper, expression, (helper, ex) => helper.BoundDisplayFor(ex));
    }
    // ...
} 
```

请注意传递给 RenderFieldsetDisplayFor 方法的两个不同的表达式。这本质上是一个委托，较低级别的方法将使用它来呈现值，如下所示：

```
 internal static MvcHtmlString RenderFieldsetDisplayFor<TModel, TValue>(this HtmlHelper<TModel> htmlHelper,
                                                                    Expression<Func<TModel, TValue>> expression,
                                                                    Expression<Func<HtmlHelper<TModel>, Expression<Func<TModel, TValue>>, MvcHtmlString>> displayDelegate)
    {
        if (expression.ReturnType.IsContainerObject())
        {
            return DisplayChildFieldsetsFor(expression, htmlHelper, displayDelegate);
        }

        var labelBuilder = new TagBuilder("div");
        labelBuilder.AddCssClass("display-label");
        labelBuilder.InnerHtml = htmlHelper.LabelFor(expression).ToHtmlString();

        var inputBuilder = new TagBuilder("div");
        inputBuilder.AddCssClass("display-field");

        // expression delegate called here for the rendering display of the value
        inputBuilder.InnerHtml = displayDelegate.Compile().Invoke(htmlHelper, expression).ToHtmlString();

        return new MvcHtmlString(String.Format("{0}{1}", labelBuilder, inputBuilder));
    } 
```

此方法工作正常，直到 expression.ReturnType.IsContainerObject() == true。DisplayChildFieldsetsFor 方法将从表达式的 ReturnType 中获取所有适当的属性，并递归调用 RenderFieldsetDisplayFor 方法。我想要做的是将父类型的属性提供给 displayDelegate 表达式。问题是每个属性的 TValue 类型都会改变，因为它最初是基于父类型构造的。

那么，Expression 大师们，您有什么推荐的吗？我需要创建一个访问者来更改 lambda 参数吗？或者，是表达式参数的问题。我对 Expression API 很陌生，我认为我对泛型的了解不足以知道我哪里出错了。

# windows - 具有可变时钟速度的多核系统中的 QueryPerformance 计数器

> ID：14363398
> 
> 赞同：2
> 
> 时间：2013-01-16T16:45:33.690
> 
> 标签：windows, performance, winapi, timer, multicore

根据 MSDN 文章*[Game Timing and Multicore Processors](http://msdn.microsoft.com/en-us/library/windows/desktop/ee417693%28v=vs.85%29.aspx)* ，QueryPerformanceFrequency() 和 QueryPerformanceCounter() 函数据说是最好的。但如果不支持它，我可以使用 timeGetTime() 或 GetTickCount()。

1.  QueryPerformanceFrequency() 是否与 CPU 时钟相同，还是它使用自己的时钟或具有自己的频率且不会随时间变化的东西？
2.  如果频率随时间随机变化会怎样（尤其是在笔记本电脑中）
3.  如何使用 SetThreadAffinityMask 函数？（我见过的一些代码使用该函数将其更改为“1”，然后使用计数器并将掩码再次更改为旧值。为什么会这样？正确吗？）
4.  仅使用一次 QueryPerformanceFrequency() 函数并通过除以案例/问题 1 中的频率来计算增量时间值是否正确？还是由案例2修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-15T13:19:49.777

1.  QPC 的底层实现差异很大。在某些情况下是这样，但通常不是。
2.  这将影响 RDTSC，但不会影响 QPC。
3.  那是为了防止线程从一个 CPU 内核移动到另一个 CPU 内核。它*可能*有助于避免报告负时间传递的高分辨率计时方法（它发生了......）。不过一般不推荐。
4.  QPC 的频率是恒定的。至少在给定的系统上，至少在重新启动之前。

但你不一定会问正确的问题......

windows上常用的四个计时函数分别是：GetTickCount、timeGetTime、QueryPerformanceCounter（QPC）、RDTSC

我的建议包括：

Game logic timing should be done with timeGetTime. It is simple, reliable, and has sufficient resolution for that purpose. (edit: default resolution varies - you can call timeBeginPeriod to force it to 1 millisecond resolution though)

GetTickCount should not be used. It's resolution is too poor for either game logic or performance monitoring (64 Hertz - a nasty frequency as it creates a beat frequency with the typical monitor refresh rate). It is the fastest timing function call IIRC, but I can't find a scenario in which that makes up for its poor resolution. (edit: rumor has it that timeBeginPeriod can improve the resolution of GetTickCount - that rumor is FALSE)

RDTSC 和 QPC 对于简单的游戏逻辑时序来说都太不可靠/古怪，但更适合性能测量。如果您想要独立于 CPU 频率变化的单位，RDTSC 的问题会使其使用起来很痛苦，并且您通常需要 asm 才能使用它。QPC 通常可以正常工作...但是当它出错时，它可能会出错，并且出错的方式多种多样（有时它真的很慢，有时它经常出现小的负增量，有时它很少出现大的负增量（不是环绕），有时它只是完全精神病，等等）。RDTSC 几乎总是更快，而且通常分辨率更好。总的来说，我更喜欢 RDTSC 用于内部使用，因为它速度更快，因此在测量时产生的失真更少。在客户机器上，它'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:55:56.137

如果您需要**高精度计时器**，QPF/QPC 是最好的（返回值以纳秒为单位，但这并不意味着精度为 1 纳秒）。否则，只需使用`GetTickCount()`（以毫秒为单位）。两个版本都应正确处理可变 CPU 频率（例如，在具有省电选项的笔记本电脑上）。

我不知道亲和力掩码如何帮助检索系统时间。

获得高精度时间的正确方法是同时调用 QPF 和 QPC 并将时间计算为：

```
double seconds = QPC / QPF; 
```

编辑：

GetTickCount() 的精度很差，大约为 5 毫秒，但它仍然适用于大多数应用程序。要测量非常小的时间段，只有一个选项：QPC/QPF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T10:39:33.123

我个人更喜欢时间戳计数器，它是 x86 架构中的 64 位计数器，每个内部时钟周期都会递增。它使用 rdtsc 指令读取并返回 edx:eax 寄存器 (x86-32) 和 rdx:rax (x86-64) 中的计数器值。

指令存在问题，但那是很多年前的事了。今天，“绿色功能”导致负载相关的执行频率变化使得计算经过的时间变得更加困难，但经过的时钟周期不是问题。

```
unsigned long long startCycle, endCycle, elapsedCycles, overhead;

// @ start of program

overhead=instruction_rdtsc ();
overhead=instruction_rdtsc ()-overhead;

// preparing to measure

startCycle=instruction_rdtsc ();

// (sequence to measure)

endCycle=instruction_rdtsc ();

elapsedCycles=endCycle-startCycle-overhead; 
```

应该确定指令本身的开销。我发现英特尔处理器的开销比 AMD 处理器小。应该多次测量开销 - 例如循环 - 以找到可能的最低值。测量的序列越长，开销就越小。该指令可以在应用程序中插入永久性性能计量，以便能够在正常（非性能测试）执行下测量其实际性能。

由于流水线和乱序执行问题，不应测量非常短的序列。有些人建议在 rdtsc 之前插入 cpuid 指令，但这仅意味着实际时钟计数变得大于实际。我认为 30 左右的循环计数具有指示性，而 100 左右或更大的循环计数通常是可靠的。中间有一个灰色地带。

# php - 在 PHP 中解析类似 CVS 的文件并将其存储为字典

> ID：14363400
> 
> 赞同：-6
> 
> 时间：2013-01-16T16:45:37.070
> 
> 标签：php

我正在生成的文本文件如下所示：

```
ipaddress,host
ipaddress,host
ipaddress,host
ipaddress,host
ipaddress,host
... 
```

我如何阅读该文件并将每一行存储为键值对？

前任。

```
array{
       [ipaddress]=>[host]
       [ipaddress]=>[host]
       [ipaddress]=>[host]
       ..........
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:50:03.297

```
$arr = file('myfile.txt');
$ips = array();

foreach($arr as $line){
  list($ip, $host) = explode(',',$line);
  $ips[$ip]=$host;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:51:05.733

对于一个简单的解决方案：

```
<?php
    $hosts = file('hosts.txt', FILE_SKIP_EMPTY_LINES);
    $results = array();
    foreach ($hosts as $h) {
        $infos = explode(",", $h);
        $results[$infos[0]] = $infos[1];
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:52:57.717

试试函数[explode](http://php.net/manual/en/function.explode.php)。

```
//open a file handler
$file = file("path_to_your_file.txt");

//init an array for keys and values
$keys= array();
$values = array();

//loop through the file
foreach($file as $line){

    //explode the line into an array
    $lineArray = explode(",",$line);

    //save some keys and values for this line
    $keys[] = $lineArray[0];
    $values[] = $lineArray[1];
}

//combine the keys and values
$answer = array_combine($keys, $values); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:59:07.917

```
<?php
$handle = @fopen("ip-hosts.txt", "r");
$result = array();
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
        $t = explode(',', $buffer);
        $result[$t[0]] = $t[1];
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}
// debug:
echo "<pre>";
print_r($result);
echo "</pre>"
?> 
```

# ios - 自动布局可以处理比例（例如，我可以设置一些东西显示在屏幕下方的 2/3 处）而不是点吗？

> ID：14363401
> 
> 赞同：0
> 
> 时间：2013-01-16T16:45:38.393
> 
> 标签：ios, objective-c, xcode

我环顾四周，但没有找到这个问题的答案，所以如果它是重复的，请指出原件，我将删除。而且我刚刚开始使用自动布局，所以如果我的问题源于基本的误解，请告诉我！

正如主题标题如此巧妙地表明的那样，我想在 iPad 屏幕下方设置 2/3 的位置，无论方向如何。如果我用点设置它，比如在横向视图中高于底部 250 点，那么当它最终在纵向视图中高于底部 250 点时，它看起来很奇怪而且太低了。但是如果我在纵向视图中将其设置为高于底部 400 点，那么在横向视图中它看起来很奇怪而且太高了。有没有办法让我将约束设置为“屏幕下方的 2/3”或其他类似的比例距离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:59:16.800

是的，您可以通过在 constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant: 方法中使用 multiplier 参数来做到这一点。我认为这样的事情应该有效。您将需要一个 IBOutlet（在我的示例中为 conBottom），将其连接到从标签底部到在 IB 中创建的视图底部的约束。您还需要标签的 IBOutlet（在我的示例中为 myLabel）。

```
 [self.view removeConstraint:conBottom];
    conBottom = [NSLayoutConstraint constraintWithItem:myLabel attribute:NSLayoutAttributeBottom relatedBy:0 toItem:self.view attribute:NSLayoutAttributeBottom multiplier:0.66 constant:0];
    [self.view addConstraint:conBottom]; 
```

请注意，您只能通过对视图底部或右侧的约束来执行此操作，因为左侧和顶部的属性值为 0。

# oracle - Oracle 11g 目录/系统表 DBA_COL_COMMENTS 和 DBA_OBJECTS 条目

> ID：14363404
> 
> 赞同：0
> 
> 时间：2013-01-16T16:45:46.497
> 
> 标签：oracle, oracle11gr2

我正在做一个目标很简单的项目。我们有一个代理键，其数据类型需要从整数更改为十进制（18,0），以适应业务增长导致的更多事务。显然，这个字段非常重要，被成千上万的对象引用。

我想找出一种自动化方法来识别该字段存在或引用的所有对象。字段名称是 SRV_ACCS_XXX。那就是引用该字段的表/视图/宏等等。

想到会使用目录/系统系统表:)。这是我面临的问题。dba_col_comments 中有引用字段 SRV_ACCS 的对象，但是这些对象没有进入 dba_objects - 所以我最终将对象类型设为空。对象名称就像`"BIN$01gtIjJPB0vgRAALXeCowg==$0"`但是它们具有有效的数据库模式名称。

我的做法对吗？如果是这样，这些类型的对象是什么 - 名称为“BIN$01gtIjJPB0vgRAALXeCowg==$0”？如何从结果中消除临时对象/易失对象以仅获取永久创建的对象？因为每次我在不做任何修改的情况下运行查询都会产生不同的结果。

请阅读以下查询。

```
select 
current_date "Load_date",
NULL "Tower_owner",
'Oracle Production' as "Environment_Name",
Object_Details_Tbl.TABLE_NAME "Object_Name",
object_typ_tbl.object_type "Object Type",
1 "Num Occurances",
Object_Details_Tbl.Owner "Database Schema",
'p1etl1d8.edc.cingular.net' "Server",
'N/A' "Object_Repository",
'Oracle Table'  "Object_Description",
'N/A' "Object_Folder_Name", 
'N/A' "Object_Directory_Name",
'A' AS "Object_Status" 
from dba_col_comments Object_Details_Tbl
left outer join
dba_objects Object_Typ_Tbl
on
object_details_tbl.table_name = object_typ_tbl.object_name
and
object_details_tbl.owner = object_typ_tbl.owner
where Object_Details_Tbl.column_name like('%SRV_ACCS_%') 
```

谢谢马尔科夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:07:18.233

我不知道你的方法和交易率。但是对于`BIN$..`对象，它们是已删除的对象。不用担心它们，只需清除回收站（可能需要一些时间），它们就会消失。

# ios - IOS 6中核心数据不加载数据

> ID：14363406
> 
> 赞同：0
> 
> 时间：2013-01-16T16:45:48.517
> 
> 标签：ios, objective-c, core-data, ios6, simulator

我开发了一个在 iOS 5.1 上运行良好的应用程序，但是在将我的 IDE 升级到 X-CODE 4.5 并在 iOS 6 上模拟我的应用程序后，CoreData 没有从 myDataBase.SQLITE 获取数据，并且从返回的 NSInteger

*   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

始终为 0。X-CODE 4.5 不显示任何错误！并且应用程序不会崩溃，只显示一个空的 tableview！为什么会这样？我应该更改我的应用程序中的某些内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:09:46.663

iOS 5 和 iOS 6 模拟器之间的数据不共享。这两个模拟器是完全独立的。由于您使用 sqlite 作为核心数据持久存储，因此请检查模拟器平台文件夹中的 .sqlite 文件，它实际上有记录。

顺便说一句，Core Data 不是数据库。这是一个常见的误解，可能会导致以后出现各种概念问题。它可以使用 sqlite 作为持久存储，但模型不是数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:48:24.210

确保您要显示的数据确实在数据库中。

# c# - XmlDocument.GetElementsByTagName() 没有读取足够的数据

> ID：14363407
> 
> 赞同：0
> 
> 时间：2013-01-16T16:45:51.453
> 
> 标签：c#, xml-parsing

**编辑：是的，我的 Watch 窗口似乎滞后了。它继续呈现之前的结果。有没有人遇到过这种情况？**

**编辑：当你问我设置断点的位置时，它在最后一行之后。**

这是我的 C# 代码

```
XmlDocument document = new XmlDocument();
document.Load(fileName);
id = document.GetElementsByTagName("id"); 
```

这是我的 XML 文件

```
<StudentList>
  <id>1</id>  
  <id>3</id>  
  <id>7</id>  
  <id>9</id>
  <id>8</id>
  <id>Invalid</id>  
</StudentList> 
```

当我尝试调试时，`id.Count`等于 4，而我认为它应该是 6。

为什么调试器说只有 4 个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:38:58.720

如果你的 xml 文件看起来像上面显示的，你应该得到`id.Count`等于 6。

让我们尝试这样做：

```
 XmlDocument document = new XmlDocument();
  document.LoadXml(@"<StudentList>
                            <id>1</id>  
                            <id>3</id>  
                            <id>7</id>  
                            <id>9</id>
                            <id>8</id>
                            <id>Invalid</id>  
                        </StudentList>"); 

   id = document.GetElementsByTagName("id");
   Console.WriteLine(id.Count); 
```

在控制台中，您可以看到“6”。

所以我认为你`id`在你提交给我们的代码之前设置了值。值 4 来自先前的操作。

在这一行设置断点：

```
id = document.GetElementsByTagName("id"); 
```

在即时窗口中，您可以键入 id，您将得到以下结果：

```
id
{System.Xml.XmlElementList}
    [System.Xml.XmlElementList]: {System.Xml.XmlElementList}
    Count: 4 
```

接下来按F10，该行的代码将被执行，你必须再次输入即时窗口id，你会得到：

```
id
{System.Xml.XmlElementList}
    [System.Xml.XmlElementList]: {System.Xml.XmlElementList}
    Count: 6 
```

# c++ - 在 C++ 中获取对象的数组索引

> ID：14363409
> 
> 赞同：1
> 
> 时间：2013-01-16T16:46:00.580
> 
> 标签：c++, arrays, class, object, indexing

假设我有一个对象数组，我想根据它们的数组索引（0、1、4...等）在这些对象中设置变量。有没有办法通过成员函数获取对象的索引（在其父数组中），即不传递整数？

编造的例子：

```
class Car
{
    public:
        void init();
    private:
        short weight;
};

void Car::init()
{
    // affect 'weight' based on object's array index
}

Car myCars[7];

myCars[2].init(); 
```

有没有办法从 init() 中检索 myCars 的索引（即**2**），而函数没有从外部接收整数？

我知道这没有必要，但我很好奇这是否可能。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:54:18.743

您愿意为该`init`方法提供更多信息吗？您可以使用一些指针算术执行以下操作：

```
#include <iostream>

using namespace std;

class Car
{
    public:
        void init(const Car*);
    private:
        short weight;
};

void Car::init(const Car* arr)
{
    // affect 'weight' based on object's array index
    int idx = this - arr;
    cout<< "My index: " << idx << endl;
}

int main()
{
  Car myCars[7];

  for(int i = 0 ; i < 7 ; ++i)
    myCars[i].init(myCars);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:49:36.303

不，C++ 语言不提供这种能力。如果你真的需要它（仔细检查你的设计），如果你的对象的索引发生变化（例如，如果你插入容器的中间），你必须将它传入*并维护它。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:49:29.360

不。

但作为替代方案，您可以将初始化移动到构造函数（如果适用）。创建数组时会自动调用它。但这也不会让您根据索引调整权重。

# transformation - 如何将图像从控制点转换为目标点？

> ID：14363413
> 
> 赞同：0
> 
> 时间：2013-01-16T16:46:06.293
> 
> 标签：transformation, coordinate-transformation, matrix-transform

我目前有一个图像（A）说 iWidth by iHeight 与某些数据点映射到它。我想要做的是在其上添加另一个具有不同宽度和高度的图像（B），例如 nWidth 和 nHeight，并将图像 A 中的点转换为与图像 B 上的点相对应。我想通过选择控制点来做到这一点在图像 A 上映射到图像 B 上的目标点。

例如：我想说-让图像 A 中的 (0,0) 成为图像 B 中的 (20,40)，让 A 中的 (1000,1000) 成为 B 中的 (4000,2300)。需要注意的一点是可能有多个这些定义。

我知道有一个数学概念会很有帮助，如果有人能向我指出，我将不胜感激，因为我猜我不是唯一一个遇到这个问题并苦苦挣扎的人。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:51:34.123

Here is the library I coded to make this happen. It took a lot of research and looking around, but in the end it all paid off. The concept is called Affine Fit Transformation. More info can be found here: [https://github.com/clockwork189/Affinity](https://github.com/clockwork189/Affinity)

# image - 从 Sencha Touch 2 的缩略图库中推送新的全尺寸图像视图

> ID：14363414
> 
> 赞同：1
> 
> 时间：2013-01-16T16:46:18.510
> 
> 标签：image, extjs, sencha-touch-2, gallery, push

我目前正在使用 Sencha Touch 2 创建图片库。我已经成功地从主图库中的 JSON 存储加载图像，其中包含图像的缩略图。我希望能够让用户单击/点击主画廊中的每个图像，并让 TAP EVENT 将图像推送到新视图中，该视图将以全尺寸显示图像。

目前，这是我的观点：

```
Ext.define("tumblrPhotos.view.SampleView", {
extend: 'Ext.dataview.DataView',
xtype:'sampleviewtest',
requires: [
    'tumblrPhotos.store.PhotoStore',
],

config: {
    title: 'Photos',
    layout: 'card',
    id: 'gallerythumbnail',
    store: 'PhotoStore',
    styleHTMLContent: true,
    fullscreen: true,
    scrollable: 'vertical',
    baseCls: 'gallery-image',
    itemTpl: new Ext.XTemplate ([
        '<div class="gallery-thumbnail">',
        '<tpl for="photos[0].alt_sizes[0]">',
            '<img src="{url}" class="test" />',
        '</tpl>',
        '</div>'
    ].join('')
    ),
},  

}); 
```

到目前为止，这是我的控制器。这部分不起作用：

```
Ext.define('tumblrPhotos.controller.GalleryController',{
extend: 'Ext.app.Controller',

config: {
    refs: {
         nav: 'galleryview', //the xtype

    }, 
    control: {
        '#gallerythumbnail': { //the xtype
            itemtap: 'viewFullScreen',
        }
    }
},

viewFullScreen : function(dv,index,target,record,e,eOpts){
    Ext.ComponentManager.get('galleryview').push('tumblrPhotos.view.FullView');
    console.log(record);
}

}); 
```

非常感谢所有可以帮助我的人！对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:01:37.580

根据您的评论，错误相对明显......

```
Ext.ComponentManager.get('galleryview') 
```

...不返回任何东西。

查看 Sencha Touch 的 API 文档，我发现 Ext.ComponentManager 是一个私有类 - 所以你真的不应该使用它。也许您应该使用 Ext.ComponentQuery 或其他东西来获取该组件。

并且考虑到您在控制器上为该 xtype 定义了“ref”，您可以使用自动创建的 getter（我认为在您的情况下为 getNav()）。

最后但并非最不重要的一点是，您没有为该特定组件（galleryview）发布任何代码，因此我无法真正推测超出我刚才所说的内容。

# ruby-on-rails - 将 Jruby 战争部署到 Tomcat6 后出现 RackInitializationException

> ID：14363422
> 
> 赞同：0
> 
> 时间：2013-01-16T16:46:46.617
> 
> 标签：ruby-on-rails, tomcat, jruby, war

我在用：

```
jruby 1.7.2 (ruby-1.8.7p370)
Rails 2.0.2
jruby-jars-1.7.2
jruby-rack-1.1.13.1 
rake (10.0.3, 0.8.1) Rake 10.0.3 was installed by Warbler 
```

访问应用程序时出现以下错误：

```
org.jruby.rack.RackInitializationException: uninitialized constant Rack::Builder

from /usr/share/tomcat6/webapps/app/WEB-INF/gems/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:266:in `load_missing_constant'
from /usr/share/tomcat6/webapps/app/WEB-INF/gems/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:453:in `const_missing'
from null:1:in `(root)' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:20:12.987

那是一个非常旧的rails版本！:-) 如果可能的话，你应该把它带到 2.3 分支。我非常怀疑你在 jruby 1.7.1 中运行它不会有问题，因为它作为 ruby​​ 1.9 代码运行。您可能需要先将其拨回上一个 1.6 版本，因为默认情况下它将在 ruby​​ 1.8.7 中运行。

此外，您可能过于雄心勃勃地使用较新的 tomcat。您应该查看 trinidad gem，因为它可能会在遗留应用程序上更好地支持您。

但是，问题的要点是您使用的是需要机架的 ruby​​ 版本。我怀疑你在这么旧的 Rails 应用程序中拥有它。IIRC 直到 2.2-ish 才出现。

# c# - 如何查找列表在列表中有重复值

> ID：14363424
> 
> 赞同：70
> 
> 时间：2013-01-16T16:46:56.613
> 
> 标签：c#, linq, list

如何查找是否`List<string>`有重复值？

我尝试使用以下代码。有没有最好的方法来实现？

```
var lstNames = new List<string> { "A", "B", "A" };

if (lstNames.Distinct().Count() != lstNames.Count())
{
    Console.WriteLine("List contains duplicate values.");
} 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-16T16:50:55.927

尝试使用`GroupBy`并`Any`喜欢；

```
lstNames.GroupBy(n => n).Any(c => c.Count() > 1); 
```

[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)方法;

> 根据指定的键选择器函数对序列的元素进行分组，并使用指定的函数投影每个组的元素。

[`Any`](http://msdn.microsoft.com/en-us/library/bb337697.aspx)方法，它返回`boolean`；

> 确定序列的任何元素是否存在或是否满足条件。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-16T16:55:08.913

如果您正在寻找最有效的方法，

```
var lstNames = new List<string> { "A", "B", "A" };
var hashset = new HashSet<string>();
foreach(var name in lstNames)
{
    if (!hashset.Add(name))
    {
        Console.WriteLine("List contains duplicate values.");
        break;
    }
} 
```

*一旦找到第一个副本*就会停止。如果您将在多个地方使用它，您可以将其包装在一个方法（或扩展方法）中。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-11-11T16:42:08.337

基于哈希技术的答案的通用且紧凑的扩展版本：

```
public static bool AreAnyDuplicates<T>(this IEnumerable<T> list)
{
    var hashset = new HashSet<T>();
    return list.Any(e => !hashset.Add(e));
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-16T16:49:40.300

```
var duplicateExists = lstNames.GroupBy(n => n).Any(g => g.Count() > 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-14T06:32:55.467

```
 class Program
{
    static void Main(string[] args)
    {
        var listFruits = new List<string> { "Apple", "Banana", "Apple", "Mango" };
        if (FindDuplicates(listFruits)) { WriteLine($"Yes we find duplicate"); };
        ReadLine();
    }
    public static bool FindDuplicates(List<string> array)
    {
        var dict = new Dictionary<string, int>();
        foreach (var value in array)
        {
            if (dict.ContainsKey(value))
                dict[value]++;
            else
                dict[value] = 1;
        }
        foreach (var pair in dict)
        {
            if (pair.Value > 1)
                return true;
            else
                return false;
        }
        return false;
    }
} 
```

# eclipse-virgo - Maven-Pax-Plugin 和 Gemini 蓝图 /Spring DM

> ID：14363425
> 
> 赞同：0
> 
> 时间：2013-01-16T16:47:08.037
> 
> 标签：eclipse-virgo, spring-dm, blueprint-osgi, pax-runner, eclipse-gemini

以下情况：我们正在开发一个 OSGi 应用程序，最终产品应该使用 Eclipse Virgo。

为了与 OSGi 和 Spring 取得联系，我现在正在研究 OSGi 蓝图概念。我正在尝试使用 maven-pax-plugin 和 Gemini Blueprint/Spring-DM 但是当我运行 mvn pax:provision 时出现以下错误：

```
 ___
    /  /
   /  / Oops, there has been a problem!
  /  /  
 /__/   org.ops4j.pax.runner.platform.PlatformException:
[mvn:http://maven.springframework.org/milestone!org.springframework.osgi/spring-osgi- 
annotation/2.0.0.M1] could not be downloaded

<plugin>
    <groupId>org.ops4j</groupId>
            <artifactId>maven-pax-plugin</artifactId>
            <version>1.5</version>
            <configuration>
                <provision>
                    <param>--profiles=spring.dm</param>
                    <param>--platform=equinox</param>
                </provision>
            </configuration>
        </plugin> 
```

那么如何使用 pax 启用 Gemini Blueprint 或 Spring DM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:25:24.180

你有任何代理设置吗？我认为代理不允许您下载 jars。

# c# - 将 vcf 文件读入字符串数组

> ID：14363430
> 
> 赞同：0
> 
> 时间：2013-01-16T16:47:13.877
> 
> 标签：c#, vcf-vcard

下面是我调用的一种方法，用于尝试将 vcf 文件逐行读取到字符串数组中。

```
 internal static void splitUpFile(String fileLocation)
    {
        string[] file = System.IO.File.ReadAllLines(fileLocation);

        System.Console.WriteLine("Contents of contacts.vcf =:");
        foreach (string line in file)
        {
            Console.WriteLine("\t" + line);
        }

        Console.WriteLine("Press any key to exit.");
        System.Console.Read();

    } 
```

现在我想将数组拆分为另外三个 vcf 文件，这些文件是动态创建的，并与已读入的文件放在同一目录中？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:08:08.517

出现并保持打开控制台使用

```
Console.ReadLine(); 
```

在最后一行。

使用以下步骤创建其他 vcf 文件：

```
1\. create a directory
2\. create a file with .vcf extension in that directory
3\. write data to and read data from that created file kept in the specified directory 
```

# javascript - 为什么添加到一个 IFRAME 的 String.prototype 的属性在使用 IFRAME 的 String 函数创建的字符串对象中不可用？

> ID：14363432
> 
> 赞同：0
> 
> 时间：2013-01-16T16:47:21.247
> 
> 标签：javascript, gwt, iframe, prototype

我正在处理一个 GWT 项目，其中主机页面具有将属性添加到`String.prototype`. 主机页面脚本依赖于这些属性的存在才能正确运行，因此我需要确保每当我将字符串从 GWT 传递到“主机代码”时，对象中都存在额外的属性。

我认为通过`$wnd.String`在非构造函数上下文中调用，额外的属性会在那里，但情况似乎并非如此。在这个模拟 GWT 设置中，例如：

`test.html`：

```
<!DOCTYPE html>
<html>
<head>
<script>

String.prototype.myStartsWith = function String_myStartsWith(prefix) {
    prefix = String(prefix);
    return (this.indexOf(prefix) === 0);
};

function onLoad() {
    var iframe = document.createElement("IFRAME");
    iframe.src = "javascript:''";
    iframe.id = "myFrame";
    document.body.appendChild(iframe);
    iframe.contentWindow.location.replace("myFrame.html");
}

</script>
</head>
<body onload="onLoad()">
</body>
</html> 
```

`myFrame.html`：

```
<!DOCTYPE html>
<html><head><script>

var $wnd = parent;
var $doc = $wnd.document;

debugger;

</script></head></html> 
```

当执行到该`debugger`行时，使用 JS 调试器控制台获得以下结果：

```
> $wnd.String !== 字符串
真的

> new $wnd.String("test").myStartsWith === undefined
错误的

> $wnd.String.prototype.myStartsWith === 未定义
错误的

> $wnd.String("test").myStartsWith === 未定义
真的

```

结果在 Firefox 18.0、Safari 6.0.2 和 Opera 12.12 中是相同的。

前三个是预期的，但我没想到第四个检查 ,`$wnd.String("test").myStartsWith === undefined`是`true`。

为什么在非构造函数上下文中`myStartsWith`调用返回的字符串对象中不可用？`$wnd.String`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:54:21.953

> 为什么在非构造函数上下文中`myStartsWith`调用返回的字符串对象中不可用？`$wnd.String`

因为[非构造函数 String 函数](http://es5.github.com/#x15.5.1)只是应用[`ToString`](http://es5.github.com/#x9.8)并返回一个*原始*字符串值。如果您访问它的属性，则使用*当前*全局上下文的 String 构造函数 - 没有修改原型的构造函数。所以

```
$wnd.String("test").myStartsWith 
```

被评估为

```
"test".myStartsWith 
```

并且等价于

```
new String($wnd.String("test")).myStartsWith 
```

这`undefined`当然是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:01:18.500

我猜一个答案（不确定 gwt 是如何工作的）

您正在另一个窗口上更改原型

然后：

```
 var iframe = document.createElement("IFRAME");
    iframe.id = "myFrame";
    document.body.appendChild(iframe);
    iframe.onload = function(){

         // here is the correct prototype
         this.contentWindow.String.prototype.myStartsWith =
                    function(){ alert("hello"); };

    }
    iframe.src = "myFrame.html"; 
```

# visual-studio - Visual Studio Designer 如何在设计时显示/渲染任何控件？

> ID：14363435
> 
> 赞同：2
> 
> 时间：2013-01-16T16:47:25.657
> 
> 标签：visual-studio, controls, rendering, design-time

那么它是如何做到的呢？

无论您是在做 WinForm、WPF 还是 ASP.NET，您都可以将任何可视控件从工具箱拖到设计图面上。您没有编译任何代码，没有实例化与控件相关的类，但是您在那里看到了该控件，在设计图面上显示/呈现。

引擎盖下会发生什么？Visual Studio 如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:06:55.473

Visual Studio 实际上会即时解释您的代码，如果控件没有指定任何设计时版本，它将尝试运行这些控件。每个控件都可以使用属性指定设计时控件。当存在这样的属性时，将加载控件的设计时版本，而不是实际呈现控件本身。

在一个简单的 Stack Overflow 答案中回答整个过程相当复杂，但是这些文档页面很好地解释了它：

*   [http://msdn.microsoft.com/en-us/library/h51z5c0x.aspx](http://msdn.microsoft.com/en-us/library/h51z5c0x.aspx)
*   来自Michael Weinhardt 和 Chris Sells 的[MSDN 杂志。](https://msdn.microsoft.com/en-us/magazine/ee310108.aspx)
    [2003 年 4 月 构建具有丰富设计时功能的](http://download.microsoft.com/download/3/a/7/3a7fa450-1f33-41f7-9e6d-3aa95b5a6aea/MSDNMagazineApril2003en-us.chm)
    [Windows 窗体控件和组件 2003 年 5 月 构建具有丰富设计时功能的 Windows 窗体控件和组件，第 2 部分](http://download.microsoft.com/download/3/a/7/3a7fa450-1f33-41f7-9e6d-3aa95b5a6aea/MSDNMagazineMay2003en-us.chm)

这些 MSDN 回溯问题现在是 .chm 帮助文件。您需要在文件的属性页面中取消阻止它们，以便在下载后能够读取内容。

# angularjs - ng-bind-html 不加载图像 src

> ID：14363437
> 
> 赞同：6
> 
> 时间：2013-01-16T16:47:26.403
> 
> 标签：angularjs

我有一个像这样的简单演示

```
<div id="{{item.id}}" ng-repeat="item in itemList">
        <div ng-bind-html="item.html"></div>
</div> 
```

item.html 包含这样的 html：

```
<a href="http://www.youtube.com"><img src="icons/youtube.png" alt="Youtube"/></a> 
```

但是，生成的 html 不会加载图像：

```
<a href="http://www.youtube.com"><img alt="Youtube"/></a> 
```

经过一番搜索，看起来 angularjs 这样做是为了避免跨站点脚本，但我能够直接从 youtube 加载图像。

```
<a href="http://www.youtube.com"><img src="http://img.youtube.com/vi/9bZkp7q19f0/0.jpg" alt="Youtube"/></a> 
```

此外，我能够使用 ng-bind-html-unsafe 加载所有图像。

```
 <div id="{{item.id}}" ng-repeat="item in itemList">
        <div ng-bind-html-unsafe="item.html"></div>
    </div> 
```

如果我使用 ng-bind-html-unsafe，我不再需要 ngSanitize 模块，这意味着我的代码不那么安全了吗？我确实有从外部来源加载图像的用例。

来回答我的问题：

1.  除了我上面提到的之外，ng-bind-html 和 ng-bind-html-unsafe 之间有什么区别。有这方面的文件吗？我找不到任何东西。

2.  如何完成从主机服务器和外部服务器加载图像，而不必使用 unsafe 指令？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:34:31.683

1.  你说的没有什么要补充的了。

    `ng-bind-html``$sanitise`允许您在清理（使用该服务）后将 HTML 内容加载到您的 Angular 应用程序中。另一方面，`ng-bind-html-unsafe`允许您加载任何 HTML 内容而无需进行清理。

    清理过程包括使用众所周知的 HTML 标记/元素列表检查所提供 HTML 内容的每个元素。然后删除不在列表中的任何标签/元素。除此之外，还有一些针对特定 HTML 属性（例如`src`）的验证。

    在您的情况下，该元素`<img src="icons/youtube.png" alt="Youtube"/>`没有有效`src`属性，因为它与 AngularJS 的 URI 正则表达式不匹配：`/^((ftp|https?):\/\/|mailto:|tel:|#)/`

    有关更多信息，请查看[ngBindHtml](http://docs.angularjs.org/api/ngSanitize.directive%3angBindHtml)、[ngBindHtmlUnsafe](http://docs.angularjs.org/api/ng.directive%3angBindHtmlUnsafe)和[$sanitize](http://docs.angularjs.org/api/ngSanitize.%24sanitize)（以及[AngularJS 源代码](https://github.com/angular/angular.js)）

2.  我相信没有......特别是如果您不控制正在加载的 HTML。如`ngBindHtmlUnsafe`文档中所述：

    > 仅当 ngBindHtml 指令过于严格并且您绝对信任要绑定的内容的来源时，才应使用此指令。

    因此，一切都与信任您正在加载的 HTML 内容的来源有关。在最后一种情况下，您始终可以自己处理/“清理” HTML 内容，但这似乎并不容易完成，特别是在内容是动态的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T14:44:44.350

[Nenad](https://stackoverflow.com/users/186822/nenad)最近回答了这样一个问题。通过调用 $sce.trustAsHtml($scope.html) 您将能够将 HTML 标记为有效，以便 ng-bind-html 接受它。即使 img src 是相对的，因此会被标记为无效。

[你可以在这里找到他的帖子](https://stackoverflow.com/questions/18340872/how-do-you-use-sce-trustashtmlstring-to-replicate-ng-bind-html-unsafe-in-angu)

# rally - 团队燃尽报告

> ID：14363438
> 
> 赞同：1
> 
> 时间：2013-01-16T16:47:31.037
> 
> 标签：rally

Rally 中有哪些工具可用于生成团队燃尽报告？我的研究让我意识到基于迭代、发布和用户故事的燃尽，但我希望创建一个燃尽报告，其中包含给定团队正在处理的所有顶级用户故事，而不限制报告的时间到给定的版本或迭代。

有没有办法用 Rally SDK 或类似的东西来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T19:06:41.327

我强烈建议您下载 Excel 的 Rally 插件。

[Rally/Excel 安装/用户指南](http://help.rallydev.com/rally-add-excel-installation-user-guide)

该工具允许您从 Rally 中提取几乎所有内容。

至于您的具体问题，尽管燃尽图是根据定义和迭代报告......基本上他们说在时间 A 和 Z 之间，这是我们计划完成多少，这是我们目前在实现该目标的过程中的进展。如果没有明确的时间框架，报告并不能真正告诉你任何事情。没有它很难定义范围......

您能否更具体地说明您要完成/展示的内容？

# java - 避免通过 imap 使用 javamail 阅读重复的 gmail 电子邮件

> ID：14363439
> 
> 赞同：0
> 
> 时间：2013-01-16T16:47:31.060
> 
> 标签：java, imap, jakarta-mail, gmail-imap

我正在使用 javamail api 来阅读我的 gmail 邮箱`imap`以索引所有邮件。我想阅读除默认文件夹以外的所有文件夹。下面的代码段只给出了 gmail 的默认文件夹。

```
javax.mail.Folder[] folders = store.getDefaultFolder().list("*");
for (javax.mail.Folder fold : folders) {
    if ((fold.getType() & javax.mail.Folder.HOLDS_MESSAGES) != 0) {
       System.out.println(fold.getFullName() + ": " + fold.getMessageCount());
    }
} 
```

我有几个标签在我使用上面的代码时没有显示。有什么方法可以让我获得所有用户定义的标签，而不是gmail的默认文件夹。如果任何电子邮件具有多个标签并获取该邮件的标签，还有什么方法可以让我获得。这是为了避免同一封邮件被阅读两次。因为如果有任何邮件被标记为，`important`那么它就会进入`INBOX`,`ALL MAILS`和`IMPORTANT`文件夹。所以根据上面的代码，`INBOX`邮件首先被读取。如果我已经阅读了该文件夹中的邮件，我想避免阅读其他文件夹中的相同邮件并获取它的标签，例如`INBOX`和`IMPORTANT`无论该邮件被标记为已读还是未读。我对 javamail 和 imap 都是新手，不知道如何让它工作。如果有任何可能的方法，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:56:43.073

它应该工作。尝试[打开会话调试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)以查看服务器返回给您的确切内容。此外，尝试使用 list("%") 仅列出文件夹层次结构的单个级别。

# mysql - 当另一个表上的行数为 0 时没有得到结果

> ID：14363440
> 
> 赞同：1
> 
> 时间：2013-01-16T16:47:33.703
> 
> 标签：mysql, select, count, left-join

我正在建立一个讨论板...我有一个包含帖子的表格和另一个包含评论的表格...外国 id 是`post_id`. 现在，我正在尝试根据每个帖子的评论数量对帖子进行排序。我目前正在使用的查询：

```
SELECT username, posts.post_id, category_id, UNIX_TIMESTAMP(posts.datetime) AS datetime, posts.body, posts.owner_id, COUNT(comment_id) AS number
FROM posts, comments, user
WHERE posts.post_id = comments.post_id AND posts.owner_id = user.`id`
GROUP BY comments.post_id
ORDER BY number DESC 
```

查询工作正常，但问题是没有选择没有评论的帖子。我想显示不介意他们是否有评论的帖子，但我想按评论数量对它们进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:54:49.143

使用左连接。您的 From/where 关节相当于 INNER JOIN ：

```
SELECT username, p.post_id, category_id, UNIX_TIMESTAMP(p.datetime) AS datetime,
   p.body, p.owner_id, COUNT(comment_id) AS number
FROM posts p
LEFT JOIN comments c ON p.post_id = c.post_id
LEFT JOIN user u ON p.owner_id = u.`id`
GROUP BY c.post_id
ORDER BY number DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:54:30.257

在评论表上使用**LEFT JOIN**

尝试这个：

```
SELECT username, p.post_id, category_id, UNIX_TIMESTAMP(p.datetime) AS DATETIME, 
       p.body, p.owner_id, COUNT(comment_id) AS number
FROM posts p 
INNER JOIN user u ON p.owner_id = u.id
LEFT JOIN comments c ON p.post_id = c.post_id 
GROUP BY p.post_id
ORDER BY number DESC; 
```

# c# - MVP Winform 解决方案/项目文件布局

> ID：14363441
> 
> 赞同：2
> 
> 时间：2013-01-16T16:47:34.177
> 
> 标签：c#, winforms, mvp

有人可以帮我为 Winforms MVP 多项目解决方案定义物理文件布局吗？

有很多帖子涉及如何设置视图、界面等……MVP 的工作原理。我明白了。许多帖子还说，该项目的物理布局非常主观，并根据个人喜好开放。

好吧，我没有偏好、经验或历史。我正在尝试为当前和未来的 MVP Winform 项目简单地构建一个“模板”解决方案。我正在寻找有关布置解决方案、项目、文件夹等文件的指导。

我所有的 MVP 解决方案都将包括以下内容：
- 带有主 Winform 的解决方案本身
- 一个“模块”文件夹，其中包含解决方案的各种模块（ap、po、ar、库存等）的项目
- 一个“帮助程序” " 类库项目，它仅包含我的一些方法、例程等，用于执行常见任务
- 包含所有 BL 的业务逻辑类库项目
- 处理所有数据访问例程的数据访问逻辑类库项目 - 主要使用实体框架模型

主 Winform 将从各个模块调用用户控件，因此一切都是可重复和可移植的。如果使用 Supervisor 模型或 Passive 模型等，保留接口、控制器的最佳位置在哪里？

![当前解决方案文件布局](../Images/336a66abd5e9e76c4750946ddcec510c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:09:30.857

您的解决方案看起来不错。不过，我想提醒您的一件事是，沿着这条路走下去，您似乎将拥有由其他用户控件组成的复合用户控件。

在 WinForms 中，在这种情况下存在闪烁问题，您将不得不进行一些调整，以使应用程序不会显得迟缓。查看[此](https://stackoverflow.com/questions/3286373/flickering-in-a-windows-forms-app)问题可帮助您解决此问题。

# jquery - Jquery自动完成JSON字符串解析错误

> ID：14363444
> 
> 赞同：1
> 
> 时间：2013-01-16T16:47:39.140
> 
> 标签：jquery, asp.net, jquery-ui, jquery-ui-autocomplete

我想在我的 Web 应用程序中使用[Jquery 自动完成功能](http://jqueryui.com/autocomplete/)，但遇到问题。我正在用 ASP.NET 和 JQuery 开发我的应用程序。

这是 Autocoplete 'succes' 函数的一部分：

```
success: function (data) {
     response($.map(data.d, function (item) {
         return {
              label:  item.key,
             value: item.value
            }
       }));
     }, 
```

我的网络服务返回以下 JSON：

```
"[{"key":"Bread","value":"3"}]" 
```

当我运行它时，我得到 Javascript 错误：

```
Uncaught TypeError: Cannot use 'in' operator to search for '42' in [{"key":"bread","value":"3"}] 
```

据我所知，返回的 JSON 对于 $.map 函数的格式似乎不正确。此外，结果可能会返回多个项目，而不仅仅是一个如上所示。

谁能帮我解决这个问题。我在 Ajax 调用中使用`JSON`as`dataType`和`GET`as 。`type`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:55:04.890

我只是建议您不要使用任何其他可以使用的方法：

```
success: function (data, status, xhr) {
    var jsonArray = JSON.parse(data);  // Normal way
} 
```

另一种方式

```
success: function (data, status, xhr) {
    var jsonArray = $.parseJSON(data); // using jQuery
} 
```

通过这种方式，它将被转换为一个简单的 JavaScript 对象，您可以轻松地在您的 UI/DOM 上进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:54:52.573

你是对的——你的 JSON 是一个包含单个对象的数组。你期待的只是那个对象。

尝试像这样修改您的代码：

```
success: function (data) {
  data = data[0]; 
```

# c# - 是否可以触发发送者对象的事件（处理程序）以及如何触发？

> ID：14363446
> 
> 赞同：1
> 
> 时间：2013-01-16T16:47:43.327
> 
> 标签：c#, winforms, events, object, dynamic

我有一个用户界面控件，其中包含多个用户界面对象，这些用户界面对象有不同的事件处理程序订阅了它们的双击事件，有没有一种方法可以触发双击事件以响应类似这样的 keydown 事件：

```
 private void UIObject_KeyDown(object sender, KeyEventArgs e)
 {
      if (e.KeyCode == Keys.Enter)
      {
           ((Control)sender).DoubleClick.Trigger(); //note: senders of varied types
      }
 } 
```

? VSI 说'....DoubleClick 只能出现在 -= 或 += 的左侧，因此向两种不同的可能发送者对象类型添加可调用方法似乎是我最简单的希望，但类似于 :.Perform[[ Double]]Click() 会比 dunch 好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:15:08.640

不，这是不可能的。事件只能从定义它们的类型触发。也就是说，除非您有自己的类型（在这种情况下，您可以公开触发事件的方法）。

根据您附加事件处理程序的方式，您可以创建一个单独的对象，该对象具有一个委托/事件，所有相同的处理程序也可以添加到该对象；这将允许您触发/调用它而不是`Control`对象的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:19:16.900

维护控件到委托的映射可能会更容易，然后对所有控件使用相同的双击和按键处理程序。

```
private Dictionary<Control, Action> _controlsToActions = new Dictionary<Control, Action>() {
    { control1, method1 } // one for each control/handler pair
};

private void UIObject_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
      _controlsToActions[(Control)sender]();
    }
}

private void UIObject_DoubleClick(object sender, KeyEventArgs e)
{
    _controlsToActions[(Control)sender]();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:55:21.940

您可以直接调用事件处理程序，只要它们是可见的（即`private`在同一个类中，或`public`/`internal`在另一个类中）。

```
 private void UIObject_KeyDown(object sender, KeyEventArgs e)
 {
      if (e.KeyCode == Keys.Enter)
      {
           OtherUIObject_DoubleClick(sender, e); 
           // You can replace "sender" with "this", and/or replace "e" with a new EventArgs.
      }
 }
 private void OtherUIObject_DoubleClick(object sender, EventArgs e)
 {
    // Code
 } 
```

# jsf - 通过 JSF 和良好实践使用 get http 变量

> ID：14363448
> 
> 赞同：3
> 
> 时间：2013-01-16T16:47:45.950
> 
> 标签：jsf

1) 在 JSF 中使用 get http 变量是一个好习惯吗？似乎它试图避免这种情况。

2）这就是我想要做的：在第一页，我有一个链接列表，如果你点击一个链接，你会有一个带有其他链接等的页面，就像一棵树。我希望用户能够访问第三深度（例如），而无需从顶层开始（例如，通过 get 变量中具有相关对象 ID 的链接）。

所以我的问题是：如何从托管 bean 中设置一个 get http 变量？

要得到它，这篇文章很清楚：[Get http variable JSF](https://stackoverflow.com/questions/1339735/get-http-variable-jsf)

3）当然，如果您有其他解决方案，请随时分享。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T16:52:41.577

在 JSF 中使用 GET 请求没有好/坏的做法。如果业务需求要求使用 GET 请求，那么就使用它。但是，有一些历史：在 JSF 1.x 中没有简化应用/转换/验证 GET 参数的工具。您必须自己完成所有工作，方法是遍历`ExternalContext#getRequestParameterMap()`和/或设置托管属性`#{param}`并自己编写所有转换/验证样板。使用 POST 就容易多了（阅读：更少的代码），这可能导致了 GET 在 JSF 中“不好”的神话。

从 JSF 2.0 开始，`<f:viewParam>`引入了新标签，这应该让一切变得轻而易举。这就像`<h:inputText>`，包括转换/验证，但随后用于请求参数。

请注意，将POST 用于纯粹的页面到页面导航*实际上是*一种不好的做法，这在 JSF 1.x 中经常使用。它导致了非书签和非 SEO 友好的请求。

### 也可以看看

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)
*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink/4317723#4317723)

# javascript - 在 JavaScript 中将参数传递给函数的正确方法是什么？

> ID：14363450
> 
> 赞同：1
> 
> 时间：2013-01-16T16:47:56.230
> 
> 标签：javascript, setinterval

在我的 javascript 代码中，我有以下内容：

```
function foo(param1) {
    setInterval( bar(param1), 3000 );
}

function bar(msg) {
    alert(msg);
}

function set() {
    foo('hello');
} 
```

在我调用页面加载时`set()`，它只给出一次警报消息。为什么它不像我预期的那样工作。？我认为问题在于我传递`foo()`函数的参数，但它到底是什么，我无法弄清楚。

如果问题出在参数上，有什么替代方法可以达到预期的效果。？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:54:23.673

最好的方法是使用[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)从您传递给的函数访问参数`setInterval`：

```
function foo(param1) {
    setInterval(function () {
        bar(param1);
    }, 3000);
}

function bar(msg) {
    alert(msg);
}

function set() {
    foo('hello');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:58:43.820

您需要将一个函数传递给`setInterval`，您正在执行一个函数并传递它的返回值（`undefined`因为执行的函数没有返回值）。

尝试使用匿名函数：

```
function foo(param1) {
    setInterval(function () {
        bar(param1);
    }, 3000);
}

function bar(msg) {
    alert(msg);
} 
```

`param1`这里永远不会改变，所以不需要任何更复杂的东西。[这是一个工作示例。](http://jsfiddle.net/spvkV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:51:14.213

`setInterval`当您给出调用整个函数的返回值时，需要一个函数。

应该可以工作的修改版本：

```
var msg = null;

function foo(param1) {
   // When foo is called, its argument is set to msg variable, so the function called 
   // by setInterval will have access to the message that must show in a window.alert
    msg = param1;
    setInterval(bar, 3000 );
}

function bar() {
    alert(msg);
}

function set() {
    foo('hello');
} 
```

# javascript - 选择行时CSS更改整个行单元格背景（悬停）

> ID：14363455
> 
> 赞同：0
> 
> 时间：2013-01-16T16:48:06.650
> 
> 标签：javascript, css

当您将鼠标悬停在该行上时，我有一个具有不同颜色的表格。这工作得很好，但我在行的每个单元格中也有 CSS 背景。当前悬停在每个单元格上时背景图像会发生变化，但随着行颜色的变化，除非您将鼠标悬停在特定单元格上，否则您无法在每个字段中看到背景图像。

这可以通过 CSS 解决，或者任何人都可以提供一个 javascript 行来改变它。

在下图中，您可以在左侧看到我将鼠标悬停在第二列上，而在右侧则在第四列上。

基本上，当将鼠标悬停在行上时，我希望所有的刻度都变白。我知道你们可以帮忙！！

![在此处输入图像描述](../Images/2f2ba864aa745f027665d3b3d4290238.png)

多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:52:05.413

是的，您可以使用 CSS。你应该发布你的代码顺便说一句......

添加通过悬停触发`TR`但作用于`TD`s 的规则。

假设您有一个带有黑色 V 标记的 on s 和一个`class "ok"`带有X 红色标记的on s：`TD``class "ko"``TD`

```
tr:hover td.ok {
  color: white;
  background-color: black;
}

tr:hover td.ko {
  color: red;
  background-color: black;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T16:53:52.447

尝试应用[Descendant Selector](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)：

```
tr:hover td .tick { background-image: url('white-tick.png') } 
```

这将为具有类的任何元素应用样式，该类`tick`是 a 的子级，而鼠标悬停在其上时`td`本身就是 a 的子级。`tr`

为此，您需要使用元素`background-image`而不是`img`元素来实现刻度（如果使用`img`，图像将位于背景之上，并且上面的代码将不可见）。

# javascript - 这是 Javascript 中的数组还是对象？

> ID：14363457
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:48:19.447
> 
> 标签：javascript

有人可以向我解释这段代码以及“arr”的类型是什么。我知道数组是一个对象，但是

1.  **如果[[Class]]**的行为类似于对象，为什么它会显示为 Array
2.  arr.length 返回 3。如何？

    ```
    var arr = [0, 1, 3];
    arr.name = "asdf";

    console.log(arr[1] + " " + arr.name + " " + arr.length); 
    // Returns-> 1 asdf 3

    Object.prototype.toString.call(arr); 
    // Returns-> "[object Array]" 
    ```

这里有什么交易？

* * *

这已在此 SO 帖子中详细回答

[Javascript 数组是原语吗？字符串？对象？](https://stackoverflow.com/questions/5048371/are-javascript-arrays-primitives-strings-objects)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:50:50.950

JavaScript 数组是专门的对象，因此它们既是数组又是对象。因此，您可以像任何其他对象一样向它们添加属性。该属性仅考虑数字属性，`length`因此添加任意属性`name`不会影响它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:51:51.620

所有 javascript 变量都是对象。像这样的一些对象也是数组。

因此，您可以设置属性（因为它是一个对象），也可以查看特定于数组的属性（因为它是一个数组）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:54:55.597

对于 1，请参阅第[15.4.5](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.5)节“数组实例的属性”：

> Array 实例从 Array 原型对象继承属性，并且它们的 [[Class]] 内部属性值为“Array”。数组实例还具有以下属性。

对于 2，请参阅第[15.4.5.2](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.5.2)节“长度”

> 此 Array 对象的长度属性是一个数据属性，其值始终在数值上大于名称为数组索引的每个可删除属性的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:50:28.517

`var arr = [0, 1, 3]`只是 . 的语法糖`var arr = Array.new(0, 1, 3)`。这是同一件事，因此`arr`是一个`Array`，并且一个实例`Array`是一个对象：

```
var arr = [0, 1, 3];
typeof arr;  // returns "object"
arr instanceof Array;  // returns true 
```

`Array`覆盖该`lenght()`函数以仅计算数组中元素的数量；当您设置 时`arr. name = "asdf"`，您正在为这个特定对象设置一个属性，但它不被`length()`函数计算在内。

# php - 为什么在几个 str_replace() 函数中只有最后一个会影响字符串？

> ID：14363468
> 
> 赞同：0
> 
> 时间：2013-01-16T16:48:42.243
> 
> 标签：php

我设置了一个非常简单的代码片段：

```
$string = 'Some random words. Some more random, very random words.';
$words = explode(" ", $string);

for ($i = 0; $i < count($words); $i++) {
    $word = $words[$i];
    $words[$i] = str_replace(".", "!", $word);
    $words[$i] = str_replace(",", "?", $word);
}

print_r($words); 
```

输出是这样的：

```
Array
(
    [0] => Some
    [1] => random
    [2] => words.
    [3] => Some
    [4] => more
    [5] => random?
    [6] => very
    [7] => random
    [8] => words.
) 
```

为什么只有第二个`str_replace()`函数影响字符串？如果我删除第二个`str_replace()`，第一个会完美运行。这与使用无关，`str_replace()`但我相信我做的事情非常非常简单。

顺便说一句 - 我知道`preg_replace()`并将一个数组传递给`str_replace()`但想听听这种特殊情况:)。

**编辑：** 感谢大家的快速响应。我为这样的问题感到羞耻，但一开始并没有引起我的注意。谢谢大家！我会接受**Mike Brant**的第一个正确答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:51:05.927

这是因为您的第二个语句`$word`用作替换的主题，而不是`$words[$i]`您在第一次替换后分配字符串的位置。

您可以通过直接使用`$words[$i]`整个时间来修复，或者专门使用您的临时变量，然后像这样进行赋值：

```
for ($i = 0; $i < count($words); $i++) {
    $word = $words[$i];
    $word = str_replace(".", "!", $word);
    $words[$i] = str_replace(",", "?", $word);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:51:51.437

因为你`str_replace`一遍又一遍地申请同一个字符串。您需要重新分配新字符串（替换字符）并对更新的值执行另一个替换

```
for ($i = 0; $i < count($words); $i++) {
    $word = $words[$i];  //initial value
    $word = str_replace(".", "!", $word);  //change $word to modified text
    $word = str_replace(",", "?", $word);  //change $word to modified text
    $words[$i] = $word;
} 
```

该`$word`值不会被 改变`str_replace`，所以它保持不变。要更改它，您需要分配返回值/结果`str_replace`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:50:19.810

改成：

```
for ($i = 0; $i < count($words); $i++) {        
    $words[$i] = str_replace(".", "!", $words[$i]);
    $words[$i] = str_replace(",", "?", $words[$i]);
} 
```

更短：

```
for ($i = 0; $i < count($words); $i++) {        
    $words[$i] = str_replace(array(".", ","), array("!", "?"), $words[$i]);        
} 
```

# bash - 在 bash 中 ping 一个 ls 域列表

> ID：14363477
> 
> 赞同：1
> 
> 时间：2013-01-16T16:49:10.810
> 
> 标签：bash, list, for-loop, ping, ls

我正在输出一个域列表，如下所示：

```
lastdomain=`ls -lah /var/www/vhosts | wc -l`
#the variables below will be used later
IP1=`ifconfig | grep "inet addr" | sed '1 ! d' | awk '{print $2;}' | cut -c 6-19`
IP2=`ifconfig | grep "inet addr" | sed '2 ! d' | awk '{print $2;}' | cut -c 6-19`

LIST=`ls -lah /var/www/vhosts | sed "4,$lastdomain ! d" | awk '{print $9;}' | grep -v 'chroot\|default\|.skel'` 
```

我想ping每个。这几乎有效：

```
for each in $LIST
 do
 echo "Attempting to ping $each..."
  ping -c 1 $LIST > /dev/null 2>&1 #&& break
   if [ "$?" -ne "0" ]; then
    echo "Host $each is not reachable! "
     else
    break
   fi
done 
```

但是它们都返回为：

```
Host exampledomain.com is not reachable! 
```

我究竟做错了什么？

编辑：现在它正在工作，我需要摆脱以下内容以获取 IP 地址：

```
PING domain.com (IP.IP.IP.IP) 56(84) bytes of data.
64 bytes from domain.co.uk (IP.IP.IP.IP): icmp_seq=1 ttl=64 time=0.024 ms

--- domain.com ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.024/0.024/0.024/0.000 ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:52:11.200

```
ping -c 1 $LIST > /dev/null 2>&1 
```

你可能是说

```
ping -c 1 $each > /dev/null 2>&1 
```

# ios - 电话提示的结果：

> ID：14363478
> 
> 赞同：4
> 
> 时间：2013-01-16T16:49:14.543
> 
> 标签：ios, objective-c

有什么方法可以确定用户何时从 telprompt 回到应用程序？如果他们点击取消，我不想做任何事情，但如果他们在返回应用程序时点击呼叫，我想采取行动。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:33:35.893

```
NSNotificationCenter * center =
    [NSNotificationCenter defaultCenter];

    [center addObserverForName:UIApplicationDidBecomeActiveNotification
                        object:nil
                         queue:[NSOperationQueue mainQueue]
                    usingBlock:^(NSNotification *note)
    {
        // use instance flag to know
        if (self.isBackfromCalling)
        {
            // do some stuff
        }
    }]; 
```

# php - 为什么我的代码不会在 mysql 表中填充一行？

> ID：14363479
> 
> 赞同：0
> 
> 时间：2013-01-16T16:49:16.677
> 
> 标签：php

我正在尝试允许用户注册，并且代码返回时没有任何错误，但我的数据库中没有显示任何内容。我无法终生找出原因。我没有发现任何问题，但也许你们中的一个可以帮助我？

这是完整的 php 文件：

```
<?php

require "includes/constants.php";

$conn = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);

if(isset($_POST['username'])) {
    $username = $_POST['username'];
    $uLength = strlen($username);
}

if ($uLength >= 4 && $uLength <= 15)
{
}
else
{
    die("Your username must be between 4 and 15 characters.");
}

if($username == "")
{
    die("You didn't tell me what to call you! Please enter a username.");
}

if(isset($_POST['pwd'])) {
    $pwd = $_POST['pwd'];
    $pLength = strlen($pwd);
}

if ($pLength >= 6 && $pLength <= 41)
{
}
else
{
    die("Password must be between 6 and 41 characters.");
}

if($pwd == "")
{
    die("Please enter a password and verify it.");
}

if(isset($_POST['pwd_conf'])) {
    $pwd_conf = $_POST['pwd_conf'];
}
if($pwd != $pwd_conf)
{
    die("Ouch! Your passwords don't match! Try again.");
}

if(isset($_POST['email'])) {
    $email = $_POST['email'];
    $email1 = "@";
    $email_check = strpos($email,$email1);
}

$user_check = "SELECT username FROM users WHERE username='$username'";
if($stmt = mysqli_prepare($conn,$user_check)) {
    mysqli_stmt_execute($stmt);

    if(mysqli_stmt_num_rows($stmt) > 0){
        die("Username is already in use!<br>");
    }
}

$query = "INSERT INTO users (username, password, email) VALUES ('$username', '$pwd', '$email')";

if(!$query)
{
    die("Unfortunately, we can't sign you up because we have problems: ".mysql_error());
}
else
{
    header("Location: login.php");
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:52:06.253

您构建了一个查询字符串，但永远不会执行它......

```
1\. $sql = "INSERT ..."
2\. ???
3\. come to SO to ask why 
```

另请注意，您正在混合 mysqli 和 mysql 调用（特别是在定义 INSERT 查询之后 mysql_error 调用。这两个库不可互换且彼此不兼容

另请注意，当您使用准备好的语句（耶！）时，您完全错误地使用它们（嘘声）并且容易受到[SQL 注入攻击](http://bobby-tables.com)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T16:57:28.783

您需要在 if(!$query) 之前使用 mysql_query() 函数

```
$result = mysql_query($query);
if(!$result){ 
```

# c# - 查看模型 id 属性与 url 中的参数同名

> ID：14363483
> 
> 赞同：0
> 
> 时间：2013-01-16T16:49:22.777
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5

在我的 mvc 4 和 EF5 项目中，我有一个用作数据库模型和视图模型的类。在该类中，PK 是一个名为 Id 的属性。在视图中，我使用 @Html.HiddenFor(m => m.Id) 在 HiddenField 中加载此 Id。为了在第一次输入 url 时加载视图，我调用了一个名为 Index(int?Id) 的 Action。动作代码如下：

```
entry = context.Entries.Where(e => e.Id > Id.Value && e.Revised == false).First(); 
```

如您所见，我寻找的 Id 大于在 Url 中传递的，没关系，这就是我想要的。

现在弄清楚：我输入一个类似 localhost/Index/Index/1609 的 url，下一个将是 1610，但隐藏字段保留 1609。我自己发现它与属性名称“Id”有关，因为我更改了名称它按我的预期工作。

为什么会发生这种情况？如果我想使用那种期望前面描述的行为怎么办？

# python - 您如何在 python 中的字符串中查找文本，然后在其后查找数字？

> ID：14363484
> 
> 赞同：0
> 
> 时间：2013-01-16T16:49:26.450
> 
> 标签：python, string, search

我有一个日志文件，在文件中每一行的末尾都有这个字符串： 行号`Line:#`在哪里。`#`

我正在尝试获取 # 并将其与上一行的编号进行比较。在 python 中做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:52:04.117

我可能会使用`str.split`，因为它看起来很容易：

```
with open('logfile.log') as fin:
    numbers = [ int(line.split(':')[-1]) for line in fin ] 
```

现在您可以使用`zip`将一个数字与下一个数字进行比较：

```
for num1,num2 in zip(numbers,numbers[1:]):
    compare(num1,num2)  #do comparison here. 
```

* * *

当然，这并不懒惰（当你真的一次只需要 2 个时，你一次将每个行号存储在文件中），所以如果你的文件很大，它可能会占用大量*内存*。不过，让它变得懒惰并不难：

```
def elem_with_next(iterable):
    ii = iter(iterable)
    prev = next(ii)
    for here in ii:
        yield prev,here
        prev = here

with open('logfile.log') as fin:
    numbers = ( int(line.split(':')[-1]) for line in fin )
    for num1,num2 in elem_with_next(numbers):
        compare(num1,num2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:58:43.190

我假设您没有方便的东西来拆分字符串，这意味着正则表达式可能更有意义。也就是说，如果日志文件中的行结构如下：

```
date: 1-15-2013, error: mildly_annoying, line: 121
date: 1-16-2013, error: err_something_bad, line: 123 
```

然后您将无法`line.split('#')`按照建议使用 mgilson，尽管如果始终有冒号，`line.split(':')`可能会起作用。在任何情况下，正则表达式解决方案看起来像：

```
import re
numbers = []
for line in log:
    digit_match = re.search("(\d+)$", line)
    if digit_match is not None:
        numbers.append(int(digit_match.group(1))) 
```

这里的表达式`"(\d+)$"`匹配一些数字，然后是行尾。我们使用返回的匹配对象上的方法提取数字，`group(1)`然后将它们添加到我们的行号列表中。

如果您不确定“Line: #”是否总是出现在日志的末尾，您可以将上面使用的正则表达式替换为类似于`"Line:\s*(\d+)"`检查字符串“Line:”的内容，然后是一些（或否）空格，然后是任意位数。

# coldfusion - 将 Memcached 与 Coldfusion 一起使用

> ID：14363494
> 
> 赞同：1
> 
> 时间：2013-01-16T16:49:51.670
> 
> 标签：coldfusion, memcached, coldfusion-9

我第一次尝试使用 memcached，但在使用动态变量进行查询时我有几个问题。

到目前为止，这是我的代码示例。我让一切正常，但如果您发现我的代码有任何错误，请告诉我。

```
 <cfoutput>
    <cfset variables.memcachedFactory = createObject("component","memcachedfactory").init("127.0.0.1:11211")>
    <cfset variables.memcached = variables.memcachedFactory.getmemcached()>

    <cfset email = "sbcglobal"> //Pretend that this is a list with multiple choices for the user to choose from. 

//The query below would have multiple outputs based on the selection of the user above 
    <cfquery name="test" datasource="#ds#">
        select top 10 * from contact where email like '%#email#%'
    </cfquery>

//Setting the key
    <cfset set100 = variables.memcached.set(key="queryTest2",value=test,expiry="5000")>

//Getting the key
    <Cfset test6 = variables.memcached.get("queryTest2")>

    <br><br>this is the query test - did we retrieve it correctly?  - <br />

    <Cfdump var="#Test6#"><br />

    </cfoutput> 
```

现在，我是否必须为查询的每个可能结果设置一个键？（在我的情况下，这将是几百个键来涵盖所有可能的结果）我的理解是，memcached 在第一次请求之后将值保存到一个键中，然后您在没有 db 调用的情况下获得输出。如果我在我的情况下使用 memcached 是否只是浪费代码，因为每个查询都会根据用户的选择而有所不同？

另外，如果输出发生变化，如何更新缓存中的值？这是我必须手动做的事情吗？我的数据库每天有 100 笔交易，`select * from contacts`上午 10 点的交易在下午 5 点不会有相同的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:09:43.443

缓存背后的想法（在这种情况下）是您首先检查 memcached，如果密钥存在，则从缓存中获取数据。如果它不存在，你去数据库，获取数据，把它存入 memcached，然后返回给用户。

对于此处的用例，您需要为要返回的每个唯一记录集使用唯一键。以你为例。如果电子邮件地址是您用来识别记录集的唯一键，则将其用作 memcached 中的键。伪代码：

```
<cfset results = variables.memcached.set(key="foo_#email#",value=test,expiry="5000")> 
```

foo_ lets you provide a "namespace" for the keys you are putting into memcached, which makes it easier to manage and avoid key collisions.

# performance - GWT RequestFactory 性能

> ID：14363495
> 
> 赞同：1
> 
> 时间：2013-01-16T16:49:52.137
> 
> 标签：performance, gwt, requestfactory

我对 RequestFactory 和 GWT 的性能有疑问。我有一个包含 8 个字段的域实体，它返回大约 1000 个 EntityProxies。请求触发和响应之间的时间约为 20 秒。我也这样做，但返回 10 个 EntityProxies，时间是 17 秒，几乎相同。

这是因为我在开发模式下工作，还是当我将代码发布到网络时，时间会一样？

有什么方法可以提高性能吗？，我只是在读取数据，所以也许只读取而不写入的东西可能是解决方案？

我读了这篇文章，内容与我的问题类似：

[GWT Requestfactory 性能建议](https://stackoverflow.com/questions/12977922/gwt-requestfactory-performance-suggestions)

非常感谢。

PD：我在某处读到，一种解决方案可能是在服务器中创建一个 xml，将其发送到客户端并在那里重新创建对象，我不想这样做，因为它真的会改变我的应用程序的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:01:24.483

谢谢大家的帮助，我现在意识到使用请求工厂检索数千条记录可能是一个错误。

根据这篇文章，我最初使用 Locator 覆盖 isLive() 和 Find() 方法： [gwt-requestfactory-performance-suggestions](https://stackoverflow.com/questions/12977922/gwt-requestfactory-performance-suggestions/14362912#comment19985738_14362912)

响应时间减少到大约 13 秒，但仍然太高。

但我很容易解决了。我没有返回 1000+ Entities ，而是创建了一个新的数据库表，其中每个字段都有所有相同的字段记录（1000+）并由分隔符连接（每个 db 字段的长度约为 10000 ）并且我只有一个记录在表中大约有 8 个字段。

像这样的东西：

```
 Field1           |           Field2          |           Field3 
```

Field1val;Field1val;Field1val;....... | Field2val;Field2val;Field2val;...... | 字段 3 值；字段 3 值；字段 3 值；......

我通过 RequestFactory 将那条记录返回给我的客户，它大大降低了速度！，大约 1 秒。我在客户端解析这个大字符串，持续时间约为 500 毫秒。因此，现在不需要浪费大约 20 秒，而是需要大约 1-2 秒来完成相同的操作。

顺便说一下，我只显示信息，不需要插入、删除或更新记录，所以这个解决方案对我有用。

以为我可以分享这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:08:33.957

GWT 中的性能分析和修复问题很棘手。避免在 GWT 托管模式下进行所有分析。它们并不意味着任何有用的东西。

您应该只在 WEB 模式下配置文件。

GWT RequestFactory 在设计上比 GWT RPC 和 GWT JSON 等要慢。这是在 GWT RF 计算增量并在保存时仅向服务器发送少量信息的能力的权衡。

您应该重新检查您的应用程序设计以避免加载 1000 个代理。RF 是指类似“表单”的应用程序。您可能需要 1000 个代理的唯一原因是用于网格显示。在这种情况下，您可能可以使用分页异步网格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:48:49.080

您应该分析您的应用程序，以了解在以下步骤上花费了多少时间：

1.  **从数据库（服务器）检索的实体**：这可以使用二级缓存和优化查询来改进
2.  **实体序列化为 JSON（服务器）**：这里有开销，因为`RequestFactory`分别`AutoBean`依赖于反射。您可以尝试仅传输您也将在客户端上显示的实体。另一个大大减少延迟的优化是覆盖`isLive`你的方法`EntitiyLocator`并返回**true**
3.  **从服务器到客户端的 HTTP 请求以传输数据（线路）**：您可以考虑使用 gzip 压缩来减少必须传输的数据量（如果您通过线路发送大量对象，这一点很重要）。
4.  客户端（客户端）上的反序列化：这应该是相当快的。有一个基准表明**AutoBean**序列化是序列化 JSON 的最快方法之一。同样，这将受益于不通过网络发送整个对象图。

提高性能的一种方法是使用缓存。您可以使用 HTML5`localstorage`在客户端缓存数据。这特别适用于不经常更改的数据。

# pipe - 将多行数据传递到 Makefile 中的管道

> ID：14363500
> 
> 赞同：2
> 
> 时间：2013-01-16T15:24:06.287
> 
> 标签：pipe, makefile

在 bash 文件中，我可以这样写：

```
my_program << EOF
Some test
More test
A lot of multi-line text
EOF 
```

这将启动 my_program 可执行文件并通过管道将三行（或更多）文本传递给它。

现在我想在 Makefile (GNU make) 中做同样的事情。我没有找到标准解决方案，它是这样解决的：

```
LaunchMyProgram:
    echo -en "Some test\\nMore test\\nA lot of multi-line text\\n" | my_program 
```

但这看起来非常难看。有没有更精细的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:35:18.460

是的，这很丑陋，但你无能为力。`make`将每一行作为其自己的 shell 脚本执行，除非该行以`\`续行字符结尾；但随后换行符被剥离。这有点清洁：

```
all:
    printf 'hi\n\
    there\n\
    how\n\
    are\n\
    you' 
```

通常我会`echo`在这里使用，但`printf`在处理转义字符时更便携。

# cmd - 有没有办法可以在 tesseract 中使用 Asterix(*)？

> ID：14363509
> 
> 赞同：0
> 
> 时间：2013-01-16T16:50:31.573
> 
> 标签：cmd, ocr, tesseract

我试图提取以使用我所有的盒子文件来提取字符，当我尝试这一行时

```
unicharset_extractor *.box 
```

它给了我一个错误，它找不到 *.box 而不是加载所有盒子文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:03:42.520

该特定程序不支持这种语法。您必须链接所有盒子文件的名称并提供给它，例如：

```
unicharset_extractor lang.fontname.exp0.box lang.fontname.exp1.box ... 
```

您可以编写一个脚本（例如[train.ps1](http://vietocr.svn.sourceforge.net/viewvc/vietocr/jTessBoxEditor/trunk/tools/)）来自动化该过程。

[http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:52:10.063

我终于为此制作了自己的工具。[链接] [http://code.google.com/p/serak-tesseract-trainer/](http://code.google.com/p/serak-tesseract-trainer/) ![在此处输入图像描述](../Images/589e650750634b322e20b68bf8b5d201.png)

# html - Web 浏览器跳转到网站上的特定 H1/div

> ID：14363516
> 
> 赞同：0
> 
> 时间：2013-01-16T16:50:57.690
> 
> 标签：html, css

对...

我在一个客户的网站上工作，到目前为止大部分都运行良好......直到今天......

网址： http: [//www.chris-loweth.co.uk/shoaib-hassan-photography/site_demo_1/](http://www.chris-loweth.co.uk/shoaib-hassan-photography/site_demo_1/)

当页面显示时，它会跳转到`H1`页面中间的页面...

有一些`<a href="#">`虚拟内容的链接，但这些链接不应该像滚动锚点一样工作......而且在 div 中肯定没有浏览器似乎向下滚动到的锚点......

花了几个小时在这上面，想知道一些新鲜的眼睛是否会有所帮助......

我试图验证标记，但由于这是一个测试站点，一些 div ID 重复，因此验证失败。

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:55:15.140

我不认为它会跳到`H1`. 我认为是`tools.js`文件顶部附近的这一行正在执行此操作：

```
$('input[type="text"]:first').focus(); 
```

它正在滚动以将其放在视图中，并且根据您的浏览器大小，这很可能会将`H1`上面的内容放在窗口的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:55:00.130

问题是由 javascript 文件中的这一行引起的：

```
// Set focus to event title on page load
$('input[type="text"]:first').focus(); 
```

第一个输入字段位于页面下方。将焦点设置为它会导致浏览器滚动到输入字段，而不是停留在页面顶部。

# oracle - VB6 用户请求取消当前操作 Oracle 错误

> ID：14363521
> 
> 赞同：0
> 
> 时间：2013-01-16T16:51:09.983
> 
> 标签：oracle, vb6

我目前正在对偶尔出现以下错误的 VB6 应用程序进行故障排除：[Oracle][ODBC][Ora]ORA-01013：用户请求取消当前操作

我对这个错误所做的所有研究都表明它要么是用户的实际取消请求，要么是超时。它不能是取消请求，因为输入来自自动源，所以它必须是超时。我在网上阅读的一件事是取消选中 DSN 配置框中的查询超时复选框，但我的程序使用与数据库的无 DSN 连接，这是一个 Oracle 10g 数据库。

这个程序中有几个查询，但它总是在一个查询上失败，但是我无法在测试环境中使用所有相同的输入来重现错误，这些输入首先导致错误。

我的一位同事建议在每次查询后进行回滚，即使查询是只读的，因为某种缓冲区可能会被填满或类似的东西，但这不起作用。此时我什至不知道如何继续对其进行故障排除，因为我无法重现该错误。如果有人能给我关于发生了什么以及如何解决问题的任何想法，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:55:00.257

如果您使用的是无 DSN 连接，则可以在连接字符串中指定在设置 DSN 时可以选择的所有选项。如果你想禁用查询超时，你会添加

```
QTO=F 
```

到连接字符串。因此，您的新连接字符串将类似于

```
DRIVER={Oracle ODBC Driver};UID=Kotzwinkle;PWD=whatever;DBQ=instl_alias;QTO=F; 
```

# python - Django 开发服务器错误：找不到图像

> ID：14363522
> 
> 赞同：4
> 
> 时间：2013-01-16T16:51:10.623
> 
> 标签：python, django

尝试运行 Django 开发服务器时出现以下错误。我正在使用 OS X 10.8。我也使用 virtualenv 系统安装包。

```
(django-env)Glyns-iMac:Ares Glyn$ sudo python manage.py runserver
dyld: DYLD_ environment variables being ignored because main executable (/usr/bin/sudo) is setuid or setgid
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 217, in execute
    translation.activate('en-us')
  File "/Library/Python/2.7/site-packages/django/utils/translation/__init__.py", line 105, in activate
    return _trans.activate(language)
  File "/Library/Python/2.7/site-packages/django/utils/translation/trans_real.py", line 194, in activate
    _active.value = translation(language)
  File "/Library/Python/2.7/site-packages/django/utils/translation/trans_real.py", line 183, in translation
    default_translation = _fetch(settings.LANGUAGE_CODE)
  File "/Library/Python/2.7/site-packages/django/utils/translation/trans_real.py", line 160, in _fetch
    app = import_module(appname)
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/Glyn/Documents/workspace/Ares/django-env/lib/python2.7/site-packages/googlecharts/__init__.py", line 1, in <module>
    from qsstats import QuerySetStats
  File "/Users/Glyn/Documents/workspace/Ares/django-env/lib/python2.7/site-packages/qsstats/__init__.py", line 9, in <module>
    from django.db.models import Count
  File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/Library/Python/2.7/site-packages/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/Library/Python/2.7/site-packages/django/db/utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 16, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: dlopen(/Users/Glyn/Documents/workspace/Ares/django-env/lib/python2.7/site-packages/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib
  Referenced from: /Users/Glyn/Documents/workspace/Ares/django-env/lib/python2.7/site-packages/_mysql.so
  Reason: image not found
(django-env)Glyns-iMac:Ares Glyn$ 
```

非常欢迎有关此问题的任何帮助:)

谢谢你。

G

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T22:18:25.413

解决：

添加几个符号链接为我解决了这个问题。

```
sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib

sudo ln -s /usr/local/mysql/lib /usr/local/mysql/lib/mysql 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-19T08:56:34.490

在 MacOSX“El Capitan”中，接受的响应不起作用，因为对 SIP/rootless 策略的新限制以防止访问 usr/lib/

在 OSX El Capitan 中修复此问题的符号链接如下

```
sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/local/lib/libmysqlclient.18.dylib

sudo ln -s /usr/local/mysql/lib /usr/local/mysql/lib/mysql 
```

# javascript - 我将如何捕获用户从此幻灯片中选择的图像的“alt”属性？

> ID：14363524
> 
> 赞同：1
> 
> 时间：2013-01-16T16:51:16.317
> 
> 标签：javascript, jquery, arrays, key-value, alt

如何修改此脚本以捕获用户在幻灯片中选择的图像的“alt”属性？

此代码显示一系列 20 对图像，并要求用户选择他们的偏好。每次用户单击一个“选择”按钮时，“manipulateDOM()”函数都会前进到文本和图像数组中的下一组项目。但是，由于它没有设置为典型的表单字段，我很难弄清楚如何捕获每个选择的值，以便可以将其与其余表单值一起提交到数据库。

我尝试使用 click() 方法创建一个函数来（至少）捕获 src 值，但我无法正确获取语法，以便它可以与“manipulateDOM()”函数一起运行。我也更愿意捕获“alt”属性，但我不知道该怎么做。

**我正在试验的功能：**

```
 $(document).ready(function () {
     $("#buttons").click(function () {           
         var imgvalue = $("#imgtrendy").attr("src");
         $("#picval").text(imgvalue);
         document.write(imgvalue + ', ');
     });
 }); 
```

**现有代码：**

**Javascript - 操作DOM() 和操作DOM1() 函数**

```
 var NumberOfImages = 3 - 1; //-1 because array members starts from 0
 var trendy = new Array(NumberOfImages);
 trendy[0] = "files/set1/A1.jpg"; 
 trendy[1] = "files/set1/B1.jpg"; 
 trendy[2] = "files/set1/C1.jpg";
 var imgNumber = 1; //array key of current image

 var NumberOfImages = 3 - 1;
 var classic = new Array(NumberOfImages);
 classic[0] = "files/set1/A2.png"; 
 classic[1] = "files/set1/B2.jpg"; 
 classic[2] = "files/set1/C2.jpg";
 var classicNumber = 1;

 var text = 3 - 1;
 var text = new Array;
 text[0] = "Which would you be more likely to wear?"
 text[1] = "Which look is more you?"
 text[2] = "Which would you rather wear?"
 var textNumber = 1;   

function manipulateDOM() {
     changeObjects();
     NextImage();
 }
 function changeObjects() {
     document.getElementById("question").innerHTML = text[textNumber];     
 }   
 function NextImage() {
     if (imgNumber < NumberOfImages) //Stop moving forward when we are out of images
     {
         imgNumber++;
         document.images["taste"].src = trendy[imgNumber];
         document.images["taste1"].src = classic[imgNumber];
         textNumber++;  
         document.getElementById["question"].innerHTML = text[textNumber];
         document.getElementById["selectButton"].innerHTML = text[textNumber];
     }   
 }    
 function manipulateDOM1() {
     changeObjects();
     NextImage1();
 }
 function NextImage1() {
     if (imgNumber < NumberOfImages)
     {
         imgNumber++;
         document.images["taste"].src = trendy[imgNumber];
         document.images["taste1"].src = classic[imgNumber];
         textNumber++;  
         document.getElementById["question"].innerHTML = text[textNumber];
         document.getElementById["selectButton"].innerHTML = text[textNumber];
     } 
 } 
```

**HTML**

```
<form id="taste" name="taste" method="post" action="taste-exec.php" >
<h2 id="question"> Which would you be more likely to wear?</h2>
<table><tr>
   <td><img id="imgtrendy" src="files/set1/A1.jpg" name="taste" value="trendy[1]" /></td>
   <td><img id="imgclassic" src="files/set1/A2.png" name="taste1" value="classic[1]"  /></td></tr>
<tr id="buttons">
   <td><img id="trendyButton" alt"Select" src="files/Select.jpg" onclick="javascript:manipulateDOM()"></td>
   <td ><img id="classicButton" alt"Select" src="files/Select.jpg" onclick="javascript:manipulateDOM1()"></td> 
</tr><tr>
   <td id="picval"></td>
   <td><input name="answer" id="answer" type="text" /></td>
</tr></table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:59:55.093

`attr`您还可以使用方法和作为参数来获取 alt 属性`alt`，就像您已经使用`src`. 你可以试试：

```
 function changeObjects() {
     document.getElementById("question").innerHTML = text[textNumber];     

     var imgvalue = $("#imgtrendy").attr("alt");
     $("#picval").text(imgvalue);
 } 
```

**编辑：将数据保存在一个数组中的示例**

```
//to save it
var alt = $("#imgtrendy").attr("alt");
var fileName= 'someValue';//populate accordingly
var myArray[index] = alt + '|' + fileName;
//to retrieve it
var bothValues = myArray[index].split('|'); //gives you an array
alt = bothValues[0] //contains alt at index 0
fileName = bothValues[1] //contains fileName at index 1 
```

# eclipse - 更新后无法启动 Eclipse - 一个或多个捆绑包未解决

> ID：14363526
> 
> 赞同：2
> 
> 时间：2013-01-16T16:51:21.230
> 
> 标签：eclipse

更新 Eclipse 后它不再启动，我得到一个窗口说

发生错误

参考日志文件（见下文）

有什么办法可以解决这个问题？

---- 日志文件 -----

```
!SESSION 2013-01-16 23:31:46.709 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.6.0_37
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -keyring /Users/dorjeduck/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -keyring /Users/dorjeduck/.eclipse_keyring -showlocation

!ENTRY org.eclipse.osgi 2 0 2013-01-16 23:31:48.877
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.877
!MESSAGE Bundle reference:file:plugins/org.eclipse.ui.ide_3.8.1.v20120828-165804.jar was not resolved.
!SUBENTRY 2 org.eclipse.ui.ide 2 0 2013-01-16 23:31:48.877
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.877
!MESSAGE Bundle reference:file:plugins/org.eclipse.ui.console_3.5.100.v20120521-2012.jar was not resolved.
!SUBENTRY 2 org.eclipse.ui.console 2 0 2013-01-16 23:31:48.877
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/org.eclipse.jdt.junit_3.7.100.v20120523-1543.jar was not resolved.
!SUBENTRY 2 org.eclipse.jdt.junit 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/org.eclipse.pde.api.tools.ui_1.0.400.v20120523-2012.jar was not resolved.
!SUBENTRY 2 org.eclipse.pde.api.tools.ui 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.4.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/org.eclipse.jdt.ui_3.8.1.v20120814-144251.jar was not resolved.
!SUBENTRY 2 org.eclipse.jdt.ui 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.8.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/org.eclipse.jdt.debug.ui_3.6.100.v20120530-1425.jar was not resolved.
!SUBENTRY 2 org.eclipse.jdt.debug.ui 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/org.eclipse.wst.common.ui_1.1.500.v200911190730.jar was not resolved.
!SUBENTRY 2 org.eclipse.wst.common.ui 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.4.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/org.eclipse.cdt.ui_5.4.0.201206111645.jar was not resolved.
!SUBENTRY 2 org.eclipse.cdt.ui 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.4.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/com.android.ide.eclipse.adt_20.0.3.v201208082019-427395.jar was not resolved.
!SUBENTRY 2 com.android.ide.eclipse.adt 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-16 23:31:48.878
!MESSAGE Bundle reference:file:plugins/org.eclipse.pde.ds.ui_1.0.200.v20120530-1435.jar was not resolved.
!SUBENTRY 2 org.eclipse.pde.ds.ui 2 0 2013-01-16 23:31:48.878
!MESSAGE Missing required bundle org.eclipse.jface.text_[3.3.0,4.0.0). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:26:53.110

It seems that you are using MAC. I would suggest you to reinstall the Eclipse for MAC from the following [eclipse for osx](http://www.eclipse.org/downloads/?osType=macosx) (only if you can afford to do it obviously). From the logs the issue seems to be related to missing plugins. The update may have deleted the older plugin?? Try installing the plugins that eclipse is complaining about like Jface etc manually and putting them under eclipse/plugin folder, and see if that brings down the error logs. Otherwise, the only option would be reinstalling. Eclipse sometimes gets really angry :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T04:09:53.527

A number of people have [reported similar problems](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391495). There are several suggestions in that thread, but no definitive solutions. Only one of the suggestions worked for me - it's a way to revert eclipse to a previous state from the command line. It comes from [this blog post](http://pweclipse.blogspot.com.au/2011/03/working-state-from-p2-update.html).

In a terminal:

1.  Go to the folder containing your eclipse install
2.  `ls -lt p2/org.eclipse.equinox.p2.engine/profileRegistry/<som_profile_name>.profile/`
3.  In my case `<som_profile_name>` was `epp.package.java.profile`, in Paul's blog `SDKProfile`.
4.  You should see files like `1372434812558.profile.gz`.
5.  Choose a recent one with a date you feel sure is ok
6.  Put together a command like:

    `eclipse -noSplash -application org.eclipse.equinox.p2.director -repository file:$(pwd)/p2/org.eclipse.equinox.p2.engine/profileRegistry/<som_profile_name>.profile -profile <som_profile_name> -revert 1372434812558`

7.  If that doesn't work, try adding `-destination .` (I did it successfully with `-destination`, but I think it should work without)

# c# - 将对象数据源配置为标签

> ID：14363529
> 
> 赞同：0
> 
> 时间：2013-01-16T16:51:46.377
> 
> 标签：c#, asp.net, visual-studio

我是编程新手，如果有人能帮助我，我会很伤心。我正在尝试使用来自网站的数据创建一个表单。我已成功将 objectDataSource 分配给下拉列表，现在需要将数据分配给标签。有谁知道如何将 ObjectDataSource 分配给标签？任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T16:57:51.393

在以下示例中，您可以将 SQL 数据源绑定到标签文本属性

```
public string SqlConnection(string queryString)
    {
        using (var conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["RBConnectionString"].ConnectionString))
        using (var cmd = conn.CreateCommand())
        {
            conn.Open();
            cmd.CommandText = queryString;
            using (var reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    // This will return the first result 
                    // but there might be other
                    return reader.GetString(0);
                }
            }
            return null;
        }
    } 
```

分配标签的 Text 属性

```
lblTest.Text = SqlConnection("SELECT Description FROM RbSpecials WHERE Active=1"); 
```

# c# - 用于自动向多个社交资料发布警报的库

> ID：14363535
> 
> 赞同：2
> 
> 时间：2013-01-16T16:52:05.513
> 
> 标签：c#, asp.net, facebook, twitter, social-networking

我正在运行一个讨论网站，并且我希望每当向我的网站添加新主题时，应该自动发布推特推文、Facebook 页面状态以及我网站其他社交资料的新闻。那么是否有任何可用的一体化库呢？我知道 Twitter 和 Facebook API，但由于我们在各种社交网络上有很多个人资料，所以是否有任何简单的解决方案可以在我的网站上单击用户完成任务？

# php - 将 javascript/jquery 函数放在一个普遍可访问的页面中

> ID：14363543
> 
> 赞同：0
> 
> 时间：2013-01-16T16:52:14.600
> 
> 标签：php, javascript, jquery, universal

我正在尝试清理我的页面，我这样做的主要方法之一是将 JavaScript 和 JQuery 函数放入一个名为“scripts.js”的文件中，该文件会在页面加载时自动访问。

我遇到了使用 php 从页面本身调用的函数的问题。例如，下面的函数不起作用，实际上“杀死”了所有页面的脚本（所以现在应该隐藏的东西没有，并且东西没有正确加载）。我已经把它缩小到我用来调用变量的事实。我真的希望能够在这个通用文件中保留使用 PHP 的函数，而不是阻塞 HTML 模板页面，任何关于如何使其工作的想法，或者如果不是我可以如何调用所需的值? 如果有帮助，它们总是在渲染之前被提取到页面中。

```
function positiveSelect()
{
   var size = <?php echo $idea[0]["size"]; ?> * 1;
   if (size > 5)
      return true;
   else
      return false; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:59:19.827

如果您无法从 DOM 本身检索数据，您可以使用相应的对象存储值：

```
 <div data-size=20> 
```

然后用以下方法检索它：

```
 $(element).data("size"); 
```

或者，如果您有要存储的全局数据，您可以在 html 文档的头部创建一个值“容器”，如下所示：

```
<script type="text/x-json" class="global-data">{"value1":"1","value2":"2"}</script> 
```

然后读取该元素的内容并使用`JSON.parse`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:55:32.317

如果这个函数是特定于某个页面的，你可能想要添加一个刚刚加载到该页面上的第二个 js 脚本。

另一种方法是在该 php 页面中回显一个 js 变量，并让您的代码使用该变量作为参数调用该函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T16:55:37.257

您可以给 javascript 一个“.php”扩展名，并以完全相同的方式在脚本中调用它：

```
<script type="javascript" src="path/to/scripts.php"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:55:13.843

您可以将生成脚本文件命名为 scripts.php 或 scripts.js.php；然后 PHP 预处理器将处理该文件并评估 PHP 语句。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-16T16:57:21.473

将 php 或任何服务器端语言与 javascript 混合时，您需要注意，当在客户端创建 javascript 文件时，php 只会执行一次。

这可能就是您得到意外结果的原因。当您从一个页面移动到另一个页面时，全局 scripts.js 中的 php 片段将不会得到更新。

# c++ - shared_ptr 上的新位置在删除时会导致 seg 错误

> ID：14363544
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:52:18.920
> 
> 标签：c++, c++11, std

编辑解决方案::

事实上，我只是忘记了复制构造函数中的放置 new ><"

问题：

我有一个奇怪的问题。在尝试了很长时间的 momnet 起源后，我发现 masi 不明白。如果有人可以向我解释为什么。

我的课：

```
class B; //on other file
class A {
   public:
     A(int type) : type(type)
     {
        switch(type)
        {
           case TOKEN:
           {
             for(int i=0;i<4;++i)
                new(&token.h[i].link) shared_ptr<B>; //< init the ptr on the addr (because of union)
           }break;
           case OTHER: {}break;
        }
     }
     ~A()
      {
        switch(type)
        {
            case TOKEN:
            {
             for(int i=0;i<4;++i)
             {
                /*option 1*/ token.h[i].link.~shared_pt<B>(); //< Make seg fault
               /*option 2*/ token.h[i].link.reset(); //< ok
             }
            }break;
            case OTHER: {}break;
         }
        }
      }
   enum {TOKEN=0,OTHER} type;

   union {
       struct {
           double score;
           struct {
               std::shared_ptr<B> link;
               double to_find;
               } h [4];
       }token;

       struct {
          //else
       } other;
   }
}; 
```

我的代码：

```
void f()
{
    vector<A> vec;
    A tmp = A(A::TOKEN);
    vec.emplace_back(tmp);
} 
```

选项1：这会在离开f时导致错误；选项 2：好的，但是 ~shared_ptr() 没有被调用，所以它会导致内存泄漏，对吧？

如果您有一个想法可以帮助我了解谁错了。

编辑：我在 Ubuntu 12.04x86 上使用 C++11 和 gcc.4.6.3。

原始代码：

```
 class stack_token {
        public:
            stack_token();
            stack_token(const stack_token& other);
            stack_token(const int i,Parser::peptide::peak* data); //peak
            stack_token(const int i,const double e,AnalyseurPeptide::stack_token* peak); //aa
            stack_token(const int i); //aa pour boucher un trou
            stack_token(const double score); //HEADER

            ~stack_token();

            stack_token& operator=(const stack_token& other);

            inline stack_token* get_peak_stack_NULL() {
                stack_token* res = aa_token.pt_data;
                aa_token.pt_data=NULL;
                return res;
            };

            void __print__() const;

            enum Type {UNKNOW=-1,AA_TOKEN=0,AA_HOLD_TOKEN,/*AA_LIST,*/PEAK_TOKEN, HEADER_TOKEN} type;

            union {
                struct  {
                    int index;
                    double error;
                    stack_token* pt_data;
                } aa_token;

                struct{
                    double error;
                    stack_token* pt_data;
                    std::vector<int> aa_index;
                } aa_hold_token;

                struct {
                    int index;
                    Parser::peptide::peak* pt_data;
                } peak_token;

                struct {
                    double score;
                    struct {
                        std::shared_ptr<std::list<list_arg> > link;
                        double to_find;
                    } holds [Parser::peptide::SIZE];
                } header_token;
            };
    };

 stack_token::~stack_token()
{
switch(type)
{
    case AA_TOKEN:
    {
       if(aa_token.pt_data != NULL)
            delete aa_token.pt_data;
    }break;

    case AA_HOLD_TOKEN :
    {
        aa_hold_token.aa_index.~vector<int>();
    }break;

    case PEAK_TOKEN : 
    {
    }break;

    case HEADER_TOKEN : 
    {
       for (int i=0;i<Parser::peptide::SIZE;++i)
            header_token.holds[i].link.reset();//~shared_ptr<std::list<list_arg> >();
    }break;

    default : break;
}
};

  stack_token::stack_token()
{
this->type = UNKNOW;
};

stack_token::stack_token(const int i,Parser::peptide::peak* data) //peak
{
this->type=PEAK_TOKEN;
peak_token.index = i;
peak_token.pt_data = data;
};

stack_token::stack_token(const int i,const double e,AnalyseurPeptide::stack_token* peak) //aa
{
this->type=AA_TOKEN;
aa_token.error =e;
aa_token.index = i;
aa_token.pt_data = peak;
};

stack_token::stack_token(const int i)
{
this->type=AA_HOLD_TOKEN;
aa_hold_token.error = 0;
aa_hold_token.pt_data = this;
new(&aa_hold_token.aa_index) vector<int>();
};

stack_token::stack_token(const double score) //HEADER
{
this->type = HEADER_TOKEN;
header_token.score = score;
for (int i=0;i<Parser::peptide::SIZE;++i)
    new (&header_token.holds[i].link) shared_ptr<list<list_arg> >;
#warning "add to_find init"
}; 
```

失败的代码：

```
void save_stack(const std::list<stack_token*>& search, std::list<std::vector<stack_token> >& res)
{
    vector<AnalyseurPeptide::stack_token> l;
    auto i=search.begin();
    auto end = search.end();

    stack_token tmp = stack_token(0.f); /* if I remove this */
    l.emplace_back(tmp); /* and this, all is ok */

    while(i!=end)
   {
     l.emplace_back(**i); //< fail here
      ++i;
   }
   res.emplace_back(l);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:34:20.790

如果您使用 C++03 进行编译，则代码是非法的，因为 C++03 不允许在联合中具有非平凡默认构造函数、复制构造函数、赋值运算符或析构函数的类型。在 C++11 中，代码是非法的，因为如果联合包含上述任何一项，编译器就会删除联合的相应成员。所以你的联合没有默认构造函数、复制构造函数、赋值或析构函数。这意味着您不能实例化它，或以任何方式使用它。这意味着 by 所需的默认构造函数`A::A(int)`不存在，并且当您定义此函数（或任何构造函数`A`）时，编译器会报错。

如果编译器编译了这样的代码，则意味着编译器没有正确实现新的联合内容，因此您无法使用它。

关于实际发生的情况：我怀疑编译器在复制构造函数中使用按位复制`A` （而不是拒绝生成它）。 `vec.emplace_back(tmp)` 使用复制构造函数在`vec`. 按位复制意味着您最终得到了两个`shared_ptr`指向同一个对象的 a 实例，但它们的计数均为 1。第一个正确销毁，第二个访问已删除的内存。繁荣。

解决问题的最简单方法是使用 `boost::variant`（这意味着`struct`在联合之外的某个地方定义联合，并给它们一个名字）。如果由于某种原因您不能使用 Boost，那么按照您正在做的事情，手动实现相对微不足道。`unsigned char token[ sizeof(TokenType) ];`在联合本身中，对于每个非 POD 成员，您只有etc.，如果需要，还有一些额外的成员以确保对齐（在大多数处理器上，a`double`可以解决问题）。然后，您使用 `reinterpret_cast`数组的名称来获取指向所需类型的指针，放置 new 来初始化它，并使用显式销毁来破坏它，这与您所做的非常相似。 **并且**您实现了一个有效的复制构造函数和一个赋值运算符，并且还考虑了类型。

（这并不难。我已经做过一两次了：解析器中的标记，我们从 Excel 获得的建模表等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:31:35.460

技术问题：

*   联合（不要），
*   未初始化，
*   三法则（不负责复制）

设计问题：

*   将类型表示为数字。将类型表示为类型。

保留从编写该代码中获得的知识，然后从头开始。

在您发布**真正的代码**之前（例如`swithc`，永远不会编译：您发布的不是真正的代码），几乎没有什么可以说的。

# android - Android WebDriver无法在第二个文本框中输入文本（后续元素）

> ID：14363545
> 
> 赞同：0
> 
> 时间：2013-01-16T16:52:18.983
> 
> 标签：android, selenium, webdriver

描述/步骤：

如果使用以下代码调用屏幕（附加 HTML 文件），则使用最新的 android webdriver (selenium-java-2.28.0.zip)：

#######################################3

```
WebDriver driver = new AndroidDriver();
driver.get("http://10.178.147.244:8080/TestConnected");
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
driver.findElement(By.id("test")).sendKeys("Test");

Thread.sleep(10000);

WebElement ele=driver.findElement(By.id("username"));
ele.sendKeys("Test"); 
```

#

文本在屏幕的第一个字段中输入，但焦点永远不会移动到下一个文本框。

在任何运行中，代码仅作用于 screen 上的任何一个元素。

甚至尝试使用以下内容：

```
driver.findElement(By.name("test")).sendKeys(Keys.RETURN);

driver.findElement(By.name("test")).sendKeys(Keys.TAB); 
```

什么是预期的输出？你看到了什么呢？

脚本应在屏幕上所有可用的文本框中输入值。

Selenium 版本：selenium-java-2.28.0 操作系统：Android 2.3 浏览器：Android 浏览器 浏览器版本：HTC Desire Android 浏览器

网页代码：

```
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

 <link rel="stylesheet" type="text/css" href="css/mobileAppUI.css"/>

</head>
<body >

 <br/>
 <div id="wholeBody">

   <table align='center' >

    <tr id='mdttagtr'>

        <td width='30%' class="oraLabel"><script type="text/javascript">document.write(LABELS.mdttag)</script></td>
        <td width='70%'>
        <input name='test' class="oraInput" type="text" id="mdttag" />

        </td>

    </tr>
    <tr>
        <td width='30%' class="oraLabel" id='userLabel'><script type="text/javascript">document.write(LABELS.userId)</script></td>

        <td width='70%'>
        <input name='username' class="oraInput" type="text" id="username" maxlength="256"/>

        </td>
    </tr>

</table>

 <hr/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:47:12.897

尝试按名称查找元素，然后使用 sendKeys 方法。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T04:52:04.723

To enter text into second text field use selector "by name"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T04:48:58.540

您为第一个输入元素输入了错误的 ID。

```
driver.findElement(By.id("test")).sendKeys("Test");

//here id mention in your html is "mdttag"
<input name='test' class="oraInput" type="text" id="mdttag" /> 
```

# django - Django：使用正则表达式参数永久重定向 URL

> ID：14363548
> 
> 赞同：0
> 
> 时间：2013-01-16T16:52:27.907
> 
> 标签：django, django-urls

我一直在寻找，找不到我要找的东西。我找到了一种在没有参数和关键字的情况下重定向 url 的方法——但是如何使用参数来实现呢？

我想重定向这个：

```
(r'^andelsboligforeninger/(?P<page>[\d]*?)/$', 'cooperatives'), 
```

对此：

```
(r'^liste-over-andelsboligforeninger/(?P<page>[\d]*?)/$', 'cooperatives'), 
```

它应该是永久重定向。这对 SEO 有好处，而且由于 googlebot，我收到了很多调试邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:42:35.473

看来我已经在 django 文档中找到了答案——毕竟我看起来不够努力！

[https://docs.djangoproject.com/en/1.1/ref/generic-views/](https://docs.djangoproject.com/en/1.1/ref/generic-views/)

```
urlpatterns = patterns('django.views.generic.simple',
     ('^foo/(?P<id>\d+)/$', 'redirect_to', {'url': '/bar/%(id)s/'}),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:23:20.453

首先，您需要对 url 进行一些更改。使用[url](https://docs.djangoproject.com/en/dev/ref/urls/#url)函数，然后为 url 命名。您的 url 中有一些问题，例如您使用`?P`但没有为捕获组命名。其次`[\d]*?`，不需要，`?`因为`*`意味着可以有一个数字，也可以根本没有。因此，在最后考虑了所有上述错误和技术之后，您的 url 应该如下所示：

```
url(r'^liste-over-andelsboligforeninger/(?P<cooperative_id>\d*)/$', 'cooperatives', name="cooperatives") 
```

然后在视图中，您可以使用[反向 url 解析](https://docs.djangoproject.com/en/dev/ref/urlresolvers/#reverse)：

```
redirect(reverse('cooperatives', kwargs={'cooperative_id': some_id})) 
```

# java - Spring 3.2 和 Jackson 2：添加自定义对象映射器

> ID：14363555
> 
> 赞同：14
> 
> 时间：2013-01-16T16:52:43.743
> 
> 标签：java, json, spring, spring-mvc, jackson

我正在 Spring MVC 中开发 REST Web 服务。我需要更改杰克逊 2 序列化 mongodb objectid 的方式。我不确定该怎么做，因为我找到了 jackson 2 的部分文档，我所做的是创建一个自定义序列化程序：

```
public class ObjectIdSerializer extends JsonSerializer<ObjectId> {

    @Override
    public void serialize(ObjectId value, JsonGenerator jsonGen,
            SerializerProvider provider) throws IOException,
            JsonProcessingException {
        jsonGen.writeString(value.toString());
    }
} 
```

创建对象映射器

```
public class CustomObjectMapper extends ObjectMapper {

    public CustomObjectMapper() {
        SimpleModule module = new SimpleModule("ObjectIdmodule");
        module.addSerializer(ObjectId.class, new ObjectIdSerializer());
        this.registerModule(module);
    }

} 
```

然后注册映射器

```
<mvc:annotation-driven>
    <mvc:message-converters register-defaults="true">
        <bean
            class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper">
                <bean class="my.package.CustomObjectMapper"></bean>
            </property>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

我的 CustomConverter 永远不会被调用。我认为 CustomObjectMapper 的定义是错误的，我从杰克逊 1.x 的一些代码中改编了它

在我的控制器中，我使用@ResponseBody。我在哪里做错了？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-25T12:37:35.570

[您应该使用@JsonSerialize](http://fasterxml.github.io/jackson-databind/javadoc/2.3.0/com/fasterxml/jackson/databind/annotation/JsonSerialize.html)注释来注释相应的模型字段。在您的情况下，它可能是：

```
public class MyMongoModel{
   @JsonSerialize(using=ObjectIdSerializer.class)
   private ObjectId id;
} 
```

但在我看来，最好不要使用实体模型作为 VO。更好的方法是在它们之间有不同的模型和映射。你可以[在这里找到我的示例项目](https://www.dropbox.com/s/8wdswdvq82j1s76/jackson-example.tar.gz?dl=0)（我使用 Spring 3 和 Jackson 2 的日期序列化作为示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:06:14.623

我将如何做到这一点是：

创建一个注释来声明您的自定义序列化程序：

```
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface MyMessageConverter{
} 
```

在您的 mvc 配置文件中为此设置组件扫描

```
<context:include-filter expression="package.package.MyMessageConverter"
            type="annotation" /> 
```

并创建一个实现`HttpMessageConverter<T>`.

```
@MyMessageConverter
public MyConverter implements HttpMessageConverter<T>{
//do everything that's required for conversion.
} 
```

创建一个类`extends AnnotationMethodHandlerAdapter implements InitializingBean`。

```
 public MyAnnotationHandler extends AnnotationMethodHandlerAdapter implements InitializingBean{
    //Do the stuffs you need to configure the converters
    //Scan for your beans that have your specific annotation
    //get the list of already registered message converters
    //I think the list may be immutable. So, create a new list, including all of the currently configured message converters and add your own. 
    //Then, set the list back into the "setMessageConverters" method.
    } 
```

我相信这是您实现目标所需的一切。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T10:42:45.833

无需创建对象映射器。将 jackson-core-2.0.0.jar 和 jackson-annotations-2.0.0.jar 添加到您的项目中。

现在，在处理服务时将以下代码行添加到您的控制器：

```
@RequestMapping(value = "students", method = RequestMethod.POST, headers = "Accept=application/json", consumes = "application/json")

public HashMap<String, String> postStudentForm(
            @RequestBody Student student, HttpServletResponse response) 
```

不要错过任何注释。

# java - 使用 Spring MVC 的应用程序路由

> ID：14363559
> 
> 赞同：11
> 
> 时间：2013-01-16T16:53:12.097
> 
> 标签：java, design-patterns, spring-mvc, url-routing

我正在寻找一种方法来管理路由在我的 WebApp 上的使用。基本上，我有三个地方可以共享一个路由器模式。我可以通过表达语言将此模式发送给我的观点。

```
@Controller
public class LoginRuasController
{
    @RequestMapping("/system/index")
    public String logout(ModelMap model, HttpSession session)
    {
        return "system/index";
    }   

    @RequestMapping("/system/logout")
    public String logout(ModelMap model, HttpSession session)
    {
        session.setAttribute("xxx", null);
        return "redirect:/system/login";
    }
} 
```

模式：

```
/system/index
system/index
redirect:/system/login 
```

意见：

```
<a href="#{Routes.newuser}">Triple X</a> 
```

最初，RequestMapping 请求一个常量值，因此这会产生一个问题，以实现具有静态返回的 Route 类。有没有可用的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T12:55:32.887

我找到了一个解决方案，如下：

1) 我创建了一个 Routes 类

```
public class Routes {

    private static HashMap<String, String> routes;

    public static final String host = "/mywebapp";
    public static final String home = "/home";
    public static final String login = "/login";
    public static final String logout = "/logout";

    private static void setRoutes()
    {       
        if(routes == null)
        {
            routes = new HashMap<String, String>();

            routes.put("host", host);
            routes.put("home", host + home);
            routes.put("entrar", host + entrar);
            routes.put("sair", host + sair);
        }
    }   

    public static HashMap<String, String> getRoutes()
    {
        setRoutes();

        return routes;
    }

    public static String getRoute(String destin)
    {
        setRoutes();

        return routes.get(destin);
    }

} 
```

2）我在我的控制器上使用...现在可以设置一个 RequestMapping

```
@Controller
public class HomeController extends AbstractController {

    @RequestMapping(Routes.home)
    public String home(ModelMap model)
    {
        preRender(model);       
        return Routes.home;
    }

} 
```

3）我设置路线用于我的观点

```
public abstract class AbstractController {

    protected void preRender(ModelMap model) {
        model.addAttribute("routes", Routes.getRoutes()); 
    }

} 
```

4) 现在可以在视图上使用

```
<body>
    <p>Mary is singing.</p>
    <p><a href="${routes.home}">Home</a></p>
</body> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-23T01:17:02.730

查看 GitHub 上的 SpringMVC 路由器项目：

[https://github.com/resthub/springmvc-router](https://github.com/resthub/springmvc-router)

它是 SpringMVC 的 play 路由文件的实现

# jquery - 根据单击其他行在表中隐藏/显示行

> ID：14363562
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:53:21.567
> 
> 标签：jquery, html, css

所以我有这样的桌子

```
Moscow
 Moscow Shop 1
 Moscow Shop 2
 Moscow Shop 3
Kazan
 Kazan Shop 1
 Kazan Shop 2
 Kazan Shop 3 
```

我想要的是要加载的表打开为

```
Moscow
Kazan 
```

然后当你点击莫斯科

表应该看起来像

```
Moscow
 Moscow Shop 1
 Moscow Shop 2
 Moscow Shop 3
Kazan 
```

这是我目前的标记

```
<table id="whereToBuyContentTable" class="whereToBuyTable">
        <tbody>
        <tr class="countryRow categoryHeader">
            <td colspan="3" class="">
                <span class="listItemHeader">
                    Moscow
                </span>
            </td>
            <td>
                <a href="#" style="float: right;"><img width="20"  src="/Resources/Images/sBackTopPic.png"></a>
            </td>
        </tr>
                <tr class="spaceUnder">
                    <td width="30"></td>
                    <td>
                        <p><b>ООО ""</b></p>
                        <p class="">Адрес: </p>
                        <p class=""></p>
                        <p class="depth3"></p>
                        <p class="">Web: <a target="_blank" href=""></a></p>
                    </td>
                    <td></td>
                    <td></td>
                </tr>
        <tr class="countryRow categoryHeader">
            <td colspan="3" class="">
                <span class="listItemHeader">
                    Kazan
                </span>
            </td>
            <td>
                <a href="#" style="float: right;"><img width="20"  src="/Resources/Images/sBackTopPic.png"></a>
            </td>
        </tr>
                <tr class="spaceUnder">
                    <td width="30"></td>
                    <td>
                        <p><b>ООО ""</b></p>
                        <p class="">Адрес: </p>
                        <p class=""></p>
                        <p class="depth3"></p>
                        <p class="">Web: <a target="_blank" href=""></a></p>
                    </td>
                    <td></td>
                    <td></td>
                </tr>

                <tr class="spaceUnder">
                    <td width="30"></td>
                    <td>
                        <p><b>ООО ""</b></p>
                        <p class="">Адрес: </p>
                        <p class=""></p>
                        <p class="depth3"></p>
                        <p class="">Web: <a target="_blank" href=""></a></p>
                    </td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:00:09.813

[***这个小提琴***](http://jsfiddle.net/KspT6/)应该给你一个起点。

**CSS**

```
.spaceUnder{display:none;} 
```

**JS**

```
$('tr:not(.spaceUnder)').click(function(){
   $(this).next().toggle()
}); 
```

**更新** [***更新的小提琴***](http://jsfiddle.net/KspT6/1/)

```
$('tr:not(.spaceUnder)').click(function(){
   $(this).nextUntil('tr:not(.spaceUnder)').toggle()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:17:05.083

有一百万种方法可以做到这一点。由于这些是表格，我假设由于您使用的是表格，因此这是动态表格数据。

CSS：

```
tr.spaceUnder{display:none;} 
```

jQuery：

```
$("tr.categoryHeader").click(function(){$(this+" + tr.spaceUnder").toggle();}); 
```

你遇到的主要问题——我认为——是你需要找到一种方法来选择正确的元素来显示/隐藏。但是，您的代码没有任何方法可以离散地指定每个代码块。上述方法（以及其他方法）应该能够做到这一点，或者（从前端开发人员的角度来看更容易）将使用 html 标记每个可点击和可切换区域，可能使用 id，使用主键或来自数据库的数据字段的索引。我假设这是来自数据库。

# .net - WindowsAzure.Storage v2 StorageException

> ID：14363564
> 
> 赞同：10
> 
> 时间：2013-01-16T16:53:24.783
> 
> 标签：.net, azure, azure-storage

我正在从 WindowsAzure.StorageClient 1.7 迁移到 WindowsAzure.Storage 2.0，我现在正在处理异常的管理。遵循本[指南](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-breaking-changes-amp-migration-guide.aspx)和其他来源，我发现我必须从

```
try
{
    // Something
}
catch (StorageClientException e)
{
    switch (e.ErrorCode)
    {
        case StorageErrorCode.ContainerNotFound:
        case StorageErrorCode.ResourceNotFound:
        case StorageErrorCode.BlobNotFound:
        case StorageErrorCode.ConditionFailed:
            // Do something
    }
} 
```

至

```
try
{
    // Something
}
catch (StorageException e)
{
    switch (e.RequestInformation.ExtendedErrorInformation.ErrorCode)
    {
        case StorageErrorCodeStrings.ContainerNotFound:
        case StorageErrorCodeStrings.ResourceNotFound:
        case BlobErrorCodeStrings.BlobNotFound:
        case StorageErrorCodeStrings.ConditionNotMet:
            // Do something
    }
} 
```

看起来很简单。问题是 ExtendedErrorInformation 总是等于 null。HttpStatusMessage 反而说“指定的 blob 不存在。”，因为它应该。

我以为是测试环境的模拟器造成的，但是在真实的 Azure 环境中尝试，却把我逼到了同样的境地。

任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T15:56:46.747

另一种选择是查看`RequestInformation.HttpStatusCode`。无论如何，这似乎更可靠。您的代码很容易转换为：

```
try
{
    // Something
}
catch (StorageException e)
{
    switch (e.RequestInformation.HttpStatusCode)
    {
        case (int)HttpStatusCode.NotFound:
        case (int)HttpStatusCode.PreconditionFailed:
        // Do something
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T17:31:07.330

我刚试了一下，惊讶地发现 ExtendedErrorInformation 对象确实为空。但是它并不总是为空。例如，如果我尝试使用 blobContainer.Create() 方法创建一个已经存在的 blob 容器，我将得到一个非空的 ExtendedErrorInformation。但是，如果我尝试获取 blob 容器中不存在的 blob 的属性，我将得到一个空的 ExtendedErrorInformation 对象。我想人们不能仅仅假设 ExtendedErrorInformation 对象总是可用的。

~~我还注意到，在您的 2.0 代码中，您使用的是 StorageErrorCodeStrings。请注意，它已从 2.0 中删除，仅适用于 1.8 或更低版本。我想我应该提一下~~

更新：请参阅@VollmonD 下面的评论。这已在 2.0.3 版中添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-18T00:21:43.357

聚会迟到了，但是如果您正在尝试处理从 blob 中删除项目或只是检查它们是否存在（扩展方法有点方法）。您现在可以使用：

*   CloudBlob.DeleteIfExistsAsync() - [https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblockblob.deleteifexistsasync.aspx](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblockblob.deleteifexistsasync.aspx)

*   CloudBlob.ExistsAsync() - [https://msdn.microsoft.com/en-us/library/mt423366.aspx](https://msdn.microsoft.com/en-us/library/mt423366.aspx)

在此处查看 CloudBlob 上的方法列表：[https ://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblockblob.aspx](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblockblob.aspx)

# scala - 在 sbt 插件中转换构建定义

> ID：14363566
> 
> 赞同：2
> 
> 时间：2013-01-16T16:53:38.137
> 
> 标签：scala, sbt

sbt 插件是否可以挂钩到 sbt 的项目加载机制，并在处理后进一步更改当前根项目的属性？

换句话说，自动：

1.  取根项目
2.  以某种方式对其进行改造。例如，调用`dependsOn`.
3.  使转换后的项目成为新的根项目

一个应用程序将自动检查任何已加载项目的基本目录中的“checkouts”目录，并调用`dependsOn`其中的每个符号链接目录。（类似于 Leiningen 的结帐功能）。

请参阅[设置 sbt 环境以一次破解多个库](https://stackoverflow.com/questions/14351940/setting-up-sbt-environment-to-hack-on-multiple-libraries-at-once/14352600#14352600)

我想编写（或使用）一个自动执行此操作的插件，但首先需要知道这是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:10:22.370

[构建加载](http://www.scala-sbt.org/release/docs/Extending/Build-Loaders.html)器在转换构建方面提供了最大的灵活性，但更先进。

# javascript - 在垃圾收集期间是否会检查持久收集？

> ID：14363569
> 
> 赞同：0
> 
> 时间：2013-01-16T16:53:43.423
> 
> 标签：javascript, node.js, v8

我在 node.js 中有一个非常大的对象集合（数百万），我需要将它们保存在内存中以进行缓存（它们保存在几个全局哈希对象中）。每个哈希集合存储大约 750k 个键。

为了将 GC 保持在最低限度，我想找出存储这些项目的最佳方式。将这些项目拆分成成千上万的哈希值会更好吗？我应该根本不使用哈希吗？有没有办法让它们完全离开堆，这样它们就不会被 GC 检查（如果是这样，我会怎么做）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:56:42.910

没有公共 API 可以控制来自 JavaScript 的垃圾收集。

但这些年来，GC 已经走了很长一段路。现代 GC 实现会注意到一些对象的寿命很长，并将它们放入一个特殊的“区域”，该区域很少被收集。

这究竟是如何工作的完全取决于实现；每个浏览器都做自己的事情，通常，当新的浏览器版本发布时，这也经常发生变化。

**编辑**内存布局和组织完全无关。如果不花几周时间阅读实际代码，现代 GC 真的很难详细理解。所以我现在解释的是一个非常简化的图；实际代码的工作方式会有所不同（并且一些 GC 会使用完全不同的技巧来实现相同的目标）。

想象一下，GC 对每个对象都有一个计数器，用于计算过去看到它的频率。此外，它还有几个列表，其中保存了不同年龄的对象，即计数器已超过某些阈值的对象。因此，当计数器达到某个限制时，对象将移动到下一个列表。

每次 GC 运行时都会访问第一个列表。第二个列表仅在每 N 次 GC 运行时考虑。

另一种实现可能会将新对象添加到“GC 列表”的顶部，并且对于每次 GC 运行，它只会检查 N 个元素。所以长寿命的对象会在列表中向下移动，一段时间后，它们不会每次都被检查。

这对你来说意味着你不需要做任何事情。GC 会发现你的巨大地图存在很长时间（地图中的所有对象也是如此），一段时间后，它会开始忽略这个数据结构。

# iphone - 处理设备旋转显示

> ID：14363574
> 
> 赞同：0
> 
> 时间：2013-01-16T16:53:54.840
> 
> 标签：iphone, objective-c, xcode, layout, constraints

我有一个相当复杂的 IOS 应用程序，其中包含跨越 20 多个不同视图控制器的图标、表格、文本字段等。我以纵向模式构建了整个应用程序，当然也意识到横向模式看起来很奇怪。

对于非常简单的屏幕，我使用自动布局的约束来适应任何方向变化几乎没有问题。但是，当屏幕上有多个 (5+) 项时，我发现使用约束来管理所有内容非常困难。事实上，有些视图看起来需要将整个布局转换才能很好地流动。

有没有更好的替代约束？我唯一的另一个想法是制作重复的视图，一个用于纵向，一个用于横向。然后我可以打开 deviceOrientationChange 监听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:58:28.410

您始终可以通过选择 xib/storyboard 文件并取消选中`Use Autolayout`. 仅对更复杂的视图执行此操作，我认为拆分为单独的 xib 是可行的。

此外，有时景观确实需要完全重新排列视图（甚至添加/隐藏某些元素）。您不应该回避为此定义单独的视图，无论是否带有 xib 文档。

# python - App Engine appstats 性能调优

> ID：14363576
> 
> 赞同：1
> 
> 时间：2013-01-16T16:54:00.897
> 
> 标签：python, google-app-engine

尽管我已经对其进行了显着优化，但我的应用程序的延迟似乎非常高。

以下是其中一个请求的 appstats 示例：

```
(4) 2013-01-16 08:33:19.750 "GET /" 200 real=3154ms api=0ms overhead=12ms (39 RPCs, cost=0, billed_ops=[])
images.GetUrlBase   18  0   
memcache.Get            10  0   
datastore_v3.Get    9   0   
datastore_v3.RunQuery   1   0   
user.CreateLogoutURL    1   0 
```

似乎 images.GetUrlBase 和 memcache (?) 都是罪魁祸首之一。目前，我已获取 blob 并将其传递给 get_serving_url，在整个应用程序中图像大小可变。

关于性能改进的任何建议？谢谢

# url - Elasticsearch URL 问题

> ID：14363578
> 
> 赞同：0
> 
> 时间：2013-01-16T16:54:08.257
> 
> 标签：url, elasticsearch

我正在尝试使用弹性搜索返回更多值，但此 url 出现错误。该错误只是说我要发布到的 URL 错误是：

```
http:/someserver.com/elasticSearch/media/_search?q=bowls-d{'from' : 0, 'size' : 100} 
```

我不确定这个 URL 有什么问题，URL 确实有效，但我只能得到默认的 10 次点击：

```
http:/someserver.com/elasticSearch/media/_search?q=bowls 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:20:34.590

试试这个：

```
http:/someserver.com/elasticSearch/media/_search?q=bowls&from=0&size=100 
```

# php - 在php中创建密码算法？

> ID：14363579
> 
> 赞同：-4
> 
> 时间：2013-01-16T16:54:14.220
> 
> 标签：php, algorithm, encryption, passwords, cryptography

我想创建自己的密码算法，该算法将存储用于用户登录。我试图避免使用 md5、sha1 等，因为我想自己学做，但是我不知道要开始。我的问题是如何以及最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:56:46.840

[不要推出自己的加密货币](https://security.stackexchange.com/questions/18197/why-shouldnt-we-roll-our-own)。

[使用 bcrypt 作为密码](http://codahale.com/how-to-safely-store-a-password/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:58:54.357

如果您真的想学习并尝试自己如何执行这些算法，请获取一本关于密码学的好书。这样您就可以了解密码学的工作原理。

然后尝试使用PHP实现。

但有一件事，当您可以获得已经编写好的加密库时，为什么要重新发明轮子。

而且自己写一个也很乏味，你可能会面临很多问题，比如性能、安全等。

# .htaccess - .htaccess 仅在 URL 无效时重定向到不同的域

> ID：14363583
> 
> 赞同：0
> 
> 时间：2013-01-16T16:54:41.837
> 
> 标签：.htaccess, redirect, http-status-code-404

我正在尝试创建一个 .htaccess 规则来将用户从一个域重定向到另一个域，但只有当原始 URL 不存在时才会发生这种情况。例如：

*   `www.domain.com/100`到`www.otherdomain.com/PersonalPages/100`
*   `www.domain.com/150`到`www.otherdomain.com/PersonalPages/150`

现在，我没有名为 100 或 150 的页面/文件，这就是它应该重定向的原因，但如果用户输入“www.domain.com”，我确实有“index.php”并且应该留在“www.domain” .com”，而不是尝试转到“www.otherdomain.com/PersonalPages/index.php”（或任何其他如果页面存在于我的 www.domain.com 中）

我知道我可以创建一个简单的 301 重定向，但是 URL 中的数字是用户的 ID，而且这个数字每天都会增长，所以我不能为每个新用户添加重定向行到我的 .htaccess 中。

我可以使用 404 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:23:38.260

我认为这对你有用：

```
RewriteRule ^([0-9]+)$ http://www.otherdomain.com/PersonalPages/$1 
```

`^`并`$`标记 url 的开始/结束，`[0-9]+`代表 0 到 9 之间的一个或多个数字。

# intellij-idea - 在 IntelliJ IDEA 中加载 Java 类时设置断点

> ID：14363584
> 
> 赞同：3
> 
> 时间：2013-01-16T16:54:43.440
> 
> 标签：intellij-idea, classloader, breakpoints

有没有办法在 IntelliJ IDEA 中加载特定的 Java 类时设置断点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:58:02.107

从来没听说过。但是如果你试图确定一个类是从哪里开始加载的，你可以在类的构造函数（或静态字段/块）中放置一个断点，然后查看堆栈跟踪。这应该告诉您第一次呼叫班级的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T14:18:16.273

在 2016 版本中，它通过将断点设置到类定义行 ( `public class YourClass ...`) 来工作。您不必使用显式构造函数，它会在`... new YourClass();`被调用时停止。

# port - Kaltura 端口号？

> ID：14363587
> 
> 赞同：0
> 
> 时间：2013-01-16T16:54:52.857
> 
> 标签：port, kaltura

谁能分享一下 Kaltura 视频服务器使用的所有默认端口是什么？

我需要知道端口列表，因为我需要将此服务器放置在防火墙后面，然后将打开这些特定端口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:33:32.680

*   在 API、应用程序 (KMC/Admin Console/MediaSpace) 和批处理机器上 - 端口 80 (http)、22 (ssh) 和 443 (https)。
*   如果您需要 LDAP 和 MediaSpace，则需要端口 - 636。
*   您还需要在机器上为 Kaltura 服务器处理邮件的电子邮件端口（取决于您使用的方法）。
*   如果您计划使用流媒体服务器（例如 Red5、FMS、Wowza） - 您将需要 1935 (RTMP)、8088 (RTMPT)、5080 (Red5 Admin)、1936 (debug)。
*   如果您计划使用远程存储/放置文件夹 - 根据您的需要，您将需要 FTP、SFTP、Aspera FASP 等。
*   如果您将使用 NFS - 端口 2049（端口映射可能为 111）。
*   在您的 MySQL 和 DWH 机器上 - 端口 3306。
*   在您的 Sphinx 机器上 - 端口 9312 和 80。

查看[https://github.com/kaltura/ce-packager/issues/35](https://github.com/kaltura/ce-packager/issues/35)了解安装说明。

# c# - MVVM 绑定到文本框：需要在 SET 之后以某种方式调用 GET

> ID：14363591
> 
> 赞同：0
> 
> 时间：2013-01-16T16:54:59.893
> 
> 标签：c#, data-binding, mvvm, silverlight-4.0, inotifypropertychanged

我正在尝试在 MVVM 中的文本框上实现一些简单的验证

```
 public string Property
    {
        get
        {
            if (App.PropertyStorageContainer != null)
            {
                return App.PropertyStorageContainer.Property;
            }
            else
            {
                return null;
            }
        }
        set
        {
            App.PropertyStorageContainer.Property = value;
            RaisePropertyChanged("Property");
        }
    } 
```

然后在我的 PropertyStorageContainer 类中

```
private string _property;
public string Property
    {
        get
        {               
            return App.PropertyStorageContainer.Property;
        }
        set
        {
            if(value meets some condition)
            {
                _property = value;
            }
            else
            {
               _property = someothervalue;
            }
        }
    } 
```

.

```
 <TextBox Width="50" TextAlignment="Center" Text="{Binding Property, Mode=TwoWay, NotifyOnValidationError=True}" MaxLength="3"></TextBox> 
```

这样做的目的是验证盒子里有什么。现在，如果我直接从我的代码中设置这个值，那么一切都会按我的预期工作。它尝试 SET 值，然后调用 RaiseProperyChanged，然后 GET 值（因为验证可能与最初输入的值不同）。检索到的最终值确实显示在视图上，所以我知道 TwoWay 绑定正在工作。

我遇到的问题是当 SET 的输入来自用户绑定的 XAML 属性/直接时。在这种情况下，调用了 SET 方法，执行了验证，但 GET 永远不会发生。这会导致屏幕上的文本框中保留未验证的值。

我的第一个问题是这是一个错误还是预期的行为？我可以看到，当输入直接来自用户时，他们可能如何尝试通过删除最后一个 GET 来节省性能，因为 GET 应该没有什么新东西。但如果不是，那么我的所有设置方式可能会干扰 GET 被调用。

第二个问题当然是解决这个问题的任何建议。我已经阅读了一些关于其他验证方法的建议，但是我的程序已经在 PROD 上运行，并且建议的大多数更改都涉及到我的大量返工，所以我希望找到一种方法让它调用 GET any设置属性的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:09:16.380

我做了几个假设，因为我不确定我是否完全理解你的代码，但我认为你可以考虑实现自定义验证规则。首先，由于您的自定义 ValidationRule 将负责验证，您可以从模型类的属性定义中获取逻辑并“简化”您的 poco：

```
class PropertyStorageContainer
{
    public string Property { get; set; }
} 
```

您似乎希望您的视图模型充当模型类的基本包装器。同样，我将根据您的场景描述假设这是有效的：

```
class PropertyStorageContainerViewModel : INotifyPropertyChanged
{
    private PropertyStorageContainer model;

    public PropertyStorageContainerViewModel(PropertyStorageContainer model)
    {
        this.model = model;
    }

    public string Property
    {
        get
        {
            if (model != null)
            {
                return model.Property;
            }
            else
            {
                return null;
            }
        }
        set
        {
            if (model.Property != value)
            {
                model.Property = value;
                RaisePropertyChanged("Property");
            }
        }
    } 
    // INotifyPropertyChanged implementation...
} 
```

现在创建一个扩展 System.Windows.Controls.ValidationRule 的新类并覆盖抽象的 Validate 方法以实现您的验证逻辑。例如，我创建了一个规则，只检查字符串是 null 还是空（假设这将是一个无效的场景）：

```
class IsNullOrEmptyValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        string s = (value ?? string.Empty).ToString();
        if (string.IsNullOrEmpty(s))
        {
            // Invalid...
            return new ValidationResult(false, "Please enter a value.");
        }
        else
        {
            // Valid...
           return new ValidationResult(true, null);
        }
    }
} 
```

现在对于 XAML... 这是一个 TextBox 示例，它将验证规则添加到其绑定验证规则（可以是多个规则）。

```
 <TextBox Name="textBox1" Width="50" FontSize="12"
        Validation.ErrorTemplate="{StaticResource validationTemplate}"
        Style="{StaticResource textBoxInError}">
    <TextBox.Text>
        <Binding Path="Property" UpdateSourceTrigger="PropertyChanged" >
            <Binding.ValidationRules>
                <local:IsNullOrEmptyValidationRule />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

然后在某处（例如，Window.Resources）定义以下资源（上面引用）。首先是一个 ControlTemplate 来定义 TextBox 在无效状态下的外观：

```
<ControlTemplate x:Key="validationTemplate">
    <DockPanel>
        <TextBlock Foreground="Red" FontSize="15" Text="!!!" />
        <AdornedElementPlaceholder/>
    </DockPanel>
</ControlTemplate> 
```

此外，您可以定义样式触发器来显示错误消息。这里我只是将它绑定到 TextBox 的 ToolTip 属性：

```
<Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" 
                    Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                    Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:03:36.653

你现在正进入 INPC 地狱。我去过那里，并不好玩。
这是一个很大的禁忌，特别是因为如果在此类类上进行了任何映射，那么这些 getter 和 setter 将在其 WPF 绑定上下文之外被调用，并且会失败。

保持简单：直接绑定到`App.PropertyStorageContainer.Property`

对于第二种情况，要么：

*   使用数据验证
*   让属性不是通过绑定而是通过命令设置，您可以在其中进行这种值交换。

帮自己一个忙，不要滥用属性的 get/set

# java - 决策库

> ID：14363594
> 
> 赞同：0
> 
> 时间：2013-01-16T16:55:00.287
> 
> 标签：java, jakarta-ee, design-patterns, rule-engine

问题背景：

*   系统中的操作列表，创建这个，删除那个，编辑这些等等......
*   管理员、读者、记者等角色列表...
*   要发送的电子邮件列表、紧急电子邮件、警报电子邮件等...

我有一个决策矩阵，它描述了一个动作发生的时间，哪个角色应该接收哪个电子邮件。

理想情况下，我希望有一个 XML 文件或数据库表来动态配置这种关系。

我的问题是：

有图书馆可以借吗？
有什么设计模式要遵循吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:00:53.957

尽管这对您的用例来说可能是多余的，但您可能希望研究规则引擎。此类引擎有一个[Java API](http://jcp.org/en/jsr/detail?id=94)。关于此 JSR的[Wikipedia 页面](http://en.wikipedia.org/wiki/JSR_94)列出了许多实现。也许其中一个提供了适合您需求的规则语言。我相信 Drools 已经相当成熟了（作为实现；在名称上没有那么多 :/ ）并且它支持多种语言来描述您的规则。Apache License v2 也使其适用于许多环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:01:53.477

您正在寻找的是一个规则引擎。该领域的主要 Java 框架是[Openrules](http://openrules.com/)和[Drools](http://www.jboss.org/drools/)。

# html - GWT i18n，更改 metaTag 并重新加载应用程序

> ID：14363596
> 
> 赞同：1
> 
> 时间：2013-01-16T16:55:06.063
> 
> 标签：html, gwt, localization, internationalization

我正在尝试使我的 GWT 应用程序国际化。

我阅读了教程并查看了一些示例。

有没有办法在不添加标签 "?locale=de" 的情况下更改语言

我的目标是在菜单登录屏幕上，用户选择语言，然后重新加载。我设法通过将语言环境添加到 url 来做到这一点。[对我来说丑陋的方式]

我在读到 Html 文件中的元标记是可能的。所以我试图把它放在 html 文件中

它以该语言加载，但我无法再更改该语言。

是否可以仅使用元标记来更改语言？

在代码中，我可以读取和更改元标记值，但是当我刷新时，我所做的更改会丢失

```
 NodeList<Element> tags = Document.get().getElementsByTagName("meta");
    for (int i = 0; i < tags.getLength(); i++) {
        MetaElement metaTag = ((MetaElement) tags.getItem(i));
        System.out.println("metaTag.getName() = " + metaTag.getName());
        System.out.println("metaTag.getContent = " + metaTag.getContent());
        if (metaTag.getName().equals("gwt:property")) {
            metaTag.setContent("locale=de");
        }
    }
    Window.Location.reload(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:23:46.850

您可以使用 cookie 来读取/写入有关您的语言环境的信息，而不是元标记或 url。

在您的 .gwt.xml 文件中

```
<set-configuration-property name="locale.cookie"
    value="GWT_LOCALE" /> 
```

在你的java代码中读取语言环境信息

```
final String cookieName = LocaleInfo.getLocaleCookieName();
String cookie = Cookies.getCookie( cookieName ); 
```

在你的java代码中写语言环境信息

```
private void setLocaleCookie( String locale )
{
    final String cookieName = LocaleInfo.getLocaleCookieName();
    if ( cookieName != null )
    {
        Date expires = new Date();
        expires.setYear( expires.getYear() + 1 );
        Cookies.setCookie( cookieName, locale, expires );
    }
    if ( !control )
    {
        com.google.gwt.user.client.Window.Location.reload();
    }
} 
```

**也参考**

1) [https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale)

2) [http://learninggwt.blogspot.in/2011/07/gwt-internationalization-and-cookies.html](http://learninggwt.blogspot.in/2011/07/gwt-internationalization-and-cookies.html)

# php - 数组值的选择数字格式

> ID：14363602
> 
> 赞同：0
> 
> 时间：2013-01-16T16:55:17.650
> 
> 标签：php, arrays, number-formatting

我在 mysql 表中有两种类型的数字（FLOAT 和 BIGINT）。

答：0.002

乙：51443234

我需要替换“。” 在数字中带有“，”，我可以通过 number_format 来完成

```
foreach ($row as $key => $val) { 
                if (is_numeric($val)) {

                        $row[$key] = number_format($val,'3', ',', '.'); }
                }
            } 
```

新格式是：

答：0,002

乙：51.443.234,000

但我不希望数字 B 中的尾随零，所以我尝试分别格式化 FLOAT 和 BIGINT 值：

```
foreach ($row as $key => $val) { 
                if (is_numeric($val)) {
                        if (is_float($val)) {
                        $row[$key] = number_format($val,'3', ',', '.'); }
                        else {
                        $row[$key] = number_format($val,'0', ',', '.'); }
                }
            } 
```

但这不起作用。

我不确定问题出在哪里，是否可以在不将值转换为字符串的情况下做到这一点。

（我也不知道转换为字符串有什么缺点..）

你能展示一下正确的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:08:46.670

PHP 是一种松散类型的语言，因此它不知道*FLOATS*和*BIGITS*。事实上，两者都不`0,002`是`51.443.234`有效值。

为了进行计算，不要改变任何东西。要显示您的数字，请根据需要格式化它们，即使它们是字符串。

```
1\. <?php
2\. $float = 2.25;
3\. $bigInt = 4235234;
4.
5\. $commaFloat = 2,25;
6\. $commaBigInt = 4.235.234;
7\. ?>

Parse error: syntax error, unexpected ',' on line 5 
```

[http://codepad.org/epIuX8MZ](http://codepad.org/epIuX8MZ)

# .net - 计算文件/流中的字符

> ID：14363604
> 
> 赞同：0
> 
> 时间：2013-01-16T16:55:22.097
> 
> 标签：.net, encoding, filestream

如何获取流/文件的*字符*长度（不是字节）？假设文件/流的编码是已知的（在运行时）。

我宁愿不将整个流加载到内存中，所以我反对使用[`TextReader.ReadToEnd()`](http://msdn.microsoft.com/en-us/library/system.io.textreader.readtoend.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:58:42.557

除非编码是固定宽度的（每个字符的字节数相同 - 例如 ASCII 但不是 UTF-8），否则您需要读取整个文件 - 但它不需要在内存中。例如：

```
public long CountCharacters(TextReader reader)
{
    char[] buffer = new char[8 * 1024]; 
    long total = 0;
    int charsRead;
    while ((charsRead = reader.Read(buffer, 0, buffer.Length)) > 0)
    {
        total += charsRead;
    }
    return total;
} 
```

像这样使用：

```
using (var reader = File.OpenText("file.txt", Encoding.UTF8))
{
    Console.WriteLine(CountCharacters(reader));
} 
```

请注意，这将计算 UTF-16 代码单元，这与 Unicode 字符或可显示字形不太一样，但在*大多数*情况下它已经足够好了。（考虑组合字符和代理对等情况。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:58:34.750

这是我到目前为止所拥有的：

```
Stream stream = file.OpenRead("file.txt");
Encoding encoding = Encoding.Default; //or whatever

TextReader reader = new StreamReader(stream, encoding);
var buf = new char[4096];
long total=0;
long crt;
while ((crt = reader.Read(buf, 0, 4096)) > 0)
{
   total += crt;
}

return total; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:59:36.840

这取决于编码。如果它是固定长度编码，则将字节长度除以字符大小，如果它是可变长度编码，则在处理文件之前不知道。

# javascript - 图像裁剪以在网站上无限滚动

> ID：14363605
> 
> 赞同：1
> 
> 时间：2013-01-16T16:55:22.407
> 
> 标签：javascript, css, web

我有一个页面使用无限滚动在 270 x 270 div 中显示一堆照片。我正在尝试裁剪这些图像，以便它们保持纵横比。我已经使用 overflow: hidden 和一些类似的调整让它在 css 中工作。但是如果图像更小，我希望它放大，如果它更大，我首先想让它更小。

我现在最好的尝试是在 img onload 事件中，我运行了一些执行此操作的 javascript，但性能非常糟糕。

我在想我需要在用户上传图像时裁剪图像，并存储缩略图版本和常规版本。我的问题是有没有人在 javascript 中对图像进行客户端裁剪，仍然能够保持良好的性能（这意味着滚动不会因此而变得生涩）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:57:49.850

据我了解，您有 270x270 像素的块，并且您想用图像完全填充它们。尝试将图像移动到背景并使用[`background-size:cover`](https://developer.mozilla.org/ru/docs/CSS/background-size).

演示[http://jsfiddle.net/heuku/1/](http://jsfiddle.net/heuku/1/)

```
<div style="background-image:url(http://placekitten.com/100/200)"></div>
<div style="background-image:url(http://placekitten.com/200/100)"></div>
<div style="background-image:url(http://placekitten.com/200/200)"></div>

div {
  width:180px;
  height:170px;
  background-repeat:no-repeat;
  background-size:cover;
} 
```

请注意，此解决方案不适用于 IE8 及以下版本。

# linux - 旧内核的编译程序

> ID：14363608
> 
> 赞同：6
> 
> 时间：2013-01-16T16:55:32.777
> 
> 标签：linux, gcc, kernel, version, glibc

我在一台最新的 Linux 机器上静态编译和链接了一个程序，然后在另一个 9 岁的 Linux 上运行它。它给了我一个错误“致命：内核太旧”并退出。具体来说，新版本是 Fedora 18（gcc 4.7.2，glibc 2.16，内核 3.7.2），旧版本是 RHEL4.8（glibc 2.3.4，内核 2.6.9）。由于它是静态链接，因此 glibc 版本无关紧要。我想这里的问题是程序调用不在旧内核中的系统调用。

如果在旧系统上开发不是一个选项，我如何在新系统中构建程序并在旧系统中运行（甚至更好，两者都可以）？我正在寻找一种在兼容模式下运行 gcc 的方法，它只调用旧的系统调用。还没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T17:04:41.047

最简单的选择是始终在旧系统上构建。

或者，将 glibc 头文件和静态库从旧系统复制到新系统并链接它们。

如果这不起作用，您将不得不使用`--enable-kernel=2.6.9`或类似的东西重建 glibc。

# simulink - 如何加快 simulink 模糊控制器的仿真时间

> ID：14363610
> 
> 赞同：0
> 
> 时间：2013-01-16T16:55:36.090
> 
> 标签：simulink, fuzzy-logic

我在 simulink 中实现了模糊控制器，如下所示。模糊控制器有两个输入，三个隶属函数和 9 条规则。问题是；simulink 运行时间过长。可能是什么问题。任何指导。 ![在此处输入图像描述](../Images/0929917c06a3ed5f3767b18f5af26ea6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T07:45:14.460

转到配置参数->求解器->过零选项并将其禁用，它会对您有所帮助。

# php - Symfony 无法为池分配内存

> ID：14363612
> 
> 赞同：6
> 
> 时间：2013-01-16T16:55:37.943
> 
> 标签：php, memory, symfony

> **可能重复：**
> [是什么导致 PHP 中“无法为池分配内存”？](https://stackoverflow.com/questions/3723316/what-is-causing-unable-to-allocate-memory-for-pool-in-php)

今天我注意到下一个错误：

```
ErrorException: Warning: require() [function.require]: Unable to allocate memory for pool. in /symfony/symfony/src/Symfony/Component/ClassLoader/DebugClassLoader.php line 82 
```

这是一个奇怪的错误，如果我重新加载页面，有时 2 个文件会出现此错误，有时是所有文件。

它在我的 JS 和 CSS 文件中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T16:59:21.427

此错误通常与 Alternative PHP Cache (APC) 有关，它是 PHP 的免费且开放的操作码缓存。它的目标是为缓存和优化 PHP 中间代码提供一个免费、开放和健壮的框架。编辑/etc/php.d/apc.ini，输入：

```
# vi /etc/php.d/apc.ini 
```

确保传递给 mmap 模块的 mktemp 样式的 file_mask 是正确且有效的：

```
apc.mmap_file_mask=/tmp/apc.XXXXXX 
```

接下来确保每个共享内存段的大小，根据您的要求设置正确的 M/G 后缀。在我的情况下，它设置为 8M：

```
apc.shm_size=96M 
```

您需要调整允许缓存条目在插槽中空闲的秒数，以防另一个条目需要此缓存条目插槽：

```
apc.ttl=3600 
```

如果另一个条目需要此缓存条目插槽，则允许用户缓存条目在插槽中空闲的秒数：

```
apc.user_ttl=3600 
```

缓存条目可以保留在垃圾收集列表中的秒数。

保存并关闭文件。确保根据您的要求调整值。重新启动 Apache 2 Web 服务器：

```
# service httpd restart 
```

# sql-server - ROW_NUMBER OVER (ORDER BY date_column)

> ID：14363616
> 
> 赞同：6
> 
> 时间：2013-01-16T16:55:59.150
> 
> 标签：sql-server, performance, sql-server-2005-express

我想知道。我有一个复杂的查询，它在 SQL Server 2005 Express 版本中运行大约 3 秒。

主表有大约 300k 行。

当我添加

```
ROW_NUMBER() OVER (ORDER BY date_column) 
```

`date_column`是一`datetime`列需要 123 秒。

如果我做

```
ROW_NUMBER() OVER (ORDER BY string_title) 
```

它再次运行 3 秒。

`datetime`我在列上添加了一个索引。不用找了。还有123秒。

然后我尝试了：

```
ROW_NUMBER() OVER (ORDER BY CAST(date_column AS int)) 
```

查询再次在 3 秒内运行。

既然强制转换需要时间，为什么 SQL Server 会有这样的行为？？？

更新：似乎 ROW_NUMBER 完全忽略了我的 WHERE 语句并为所有可用条目构建行列列表？任何人都可以确认吗？

在这里，我在 SQL Management Studio 中复制了一个更好的可读性（仍然是大量的逻辑:)）：

```
SELECT ROW_NUMBER() OVER (ORDER BY xinfobase.lid) AS row_num, *
FROM xinfobase
LEFT OUTER JOIN [xinfobasetree] ON [xinfobasetree].[lid] = [xinfobase].[xlngfolder] 
LEFT OUTER JOIN [xapptqadr] ON [xapptqadr].[lid] = [xinfobase].[xlngcontact] 
LEFT OUTER JOIN [xinfobasepvaluesdyn] ON [xinfobasepvaluesdyn].[lparentid] = [xinfobase].[lid] 
WHERE (xinfobase.xlngisdeleted=2 
AND xinfobase.xlinvalid=2) 
AND (xinfobase.xlngcurrent=1) 
AND ( (xinfobase.lownerid = 1  
       OR (SELECT COUNT(lid) 
           FROM xinfobaseacl 
           WHERE xinfobaseacl.lparentid = xinfobase.lid 
             AND xlactor IN(1,-3,-4,-230,-243,-254,-255,-256,-257,-268,-589,-5,-6,-7,-8,-675,-676,-677,-9,-10,-864,-661,-671,-913))>0 
               OR xinfobasetree.xlresponsible = 1) 
AND (xinfobase.lid IN (SELECT lparentid 
                       FROM xinfobasealt a, xinfobasetree t 
                       WHERE a.xlfolder IN(1369) 
                         AND a.xlfolder = t.lid 
                         AND dbo.sf_MatchRights(1, t.xtxtrights,'|')=1 )) ) 
AND ((SELECT COUNT(*) FROM dbo.fn_Split(cf_17,',') 
      WHERE [value] = 39)>0) 
```

此查询需要 2-3 秒处理 300k 条记录。现在我将其更改`ORDER BY`为`xinfobase.xstrtitle`然后它再次运行大约 2-3 秒。如果我切换到`xinfobase.dtedit`（带有我刚刚添加的附加索引的日期时间列）它需要我上面提到的时间。

我还试图“作弊”并将我的声明作为一个 SUB SELECT 来强制他首先检索记录并`ROW_NUMBER()`在另一个 SQL 语句中执行外部操作，同样的性能结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:23:18.283

**更新**

在我仍然对解决方法感到沮丧之后，我进行了更多调查。我删除了所有现有索引并对表运行了几个 SQL 语句。事实证明，使用新的列排序顺序构建新索引并包含不同的列我解决了我的问题，并且使用 dtedit (datetime) 列的查询也很快。

所以吸取了教训：更加注意您的索引和执行计划，并在您生产的软件的每次更新（新版本）中重新检查它们......

但仍然想知道为什么 CAST(datetime_column AS int) 之前让它变得更快......

# c# - 当另一个属性改变时更新一个实体属性（在实体初始化之后）

> ID：14363619
> 
> 赞同：2
> 
> 时间：2013-01-16T16:56:10.427
> 
> 标签：c#, wpf, entity-framework, code-first

我在由 SQL CE 数据库支持的 WPF MVVM 应用程序中使用实体框架和代码优先方法。我正在尝试设计一个模型类，它可以简单地更新它的一个属性值以响应另一个属性值的变化。基本上，我正在寻找一种在 EF 初始化实例后定义“自我跟踪”的 poco 的方法。如果答案涉及放弃 Code First，那么也许这是唯一可行的途径（不确定）。一个基本的例子：

```
class ThingModel
{
    public int Id { get; set; }

    public bool OutsideDbNeedsUpdate { get; set; }

    private string _foo;

    public string Foo
    {
        get { return _foo; }

        set
        {
            if (_foo != value)
            {
                _foo = value;

                OutsideDbNeedsUpdate = true;
            }
        }
    }
} 
```

但是，上述问题在于，每当 DbContext 在运行时初始化实例并设置字段时，我的类都会过早地设置依赖字段作为响应。换句话说，我正在寻找一种简单的模式，它允许我的 poco 类仅在 EF 完成实例上的字段初始化后才进行这种特殊的更改跟踪。

[我意识到我可以在此处](https://stackoverflow.com/questions/3131347/entity-framework-check-if-there-are-changes-to-be-saved)执行类似解决方案的操作， 但我的业务案例要求将此特殊更改跟踪与 EF 更改跟踪分离，换句话说，无论上面的 HasChanges 属性的状态如何，我都需要 SaveChanges 的能力。这是因为我希望能够定期检查我的实体上的 HasChanges 属性，进而更新外部数据库中的依赖值（与支持 EF DbContext 的数据库不同），并且 EF DB 之间可能会发生许多更改/保存推到外部数据库。因此，我希望将标志与我的数据库中的记录一起保存，并在对外部数据库进行定期更新时将其重置为 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:59:26.283

编辑后，我认为您可以使用[ObjectMaterialized 事件](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.objectmaterialized.aspx)。

> 在对象上设置了所有标量、复杂和引用属性之后，但在加载集合之前引发此事件。

把它放在你的构造函数中`DbContext`：

```
((IObjectContextAdapter)this).ObjectContext.ObjectMaterialized +=
    HandleObjectMaterialized; 
```

和方法：

```
private void HandleObjectMaterialized(object sender, ObjectMaterializedEventArgs e)
{ } 
```

现在的问题是，在方法体中放什么？可能最简单的解决方案是定义一个接口

```
interface IChangeTracker
{
    bool Materialized { get; set; }
    bool OutsideDbNeedsUpdate { get; }
} 
```

并让您要跟踪的类实现此接口。

然后，`HandleObjectMaterialized`你可以这样做：

```
var entity = e.Entity as IChangeTracker;
if (entity != null)
{
    entity.Materialized = true;
} 
```

在此之后，您知道何时可以在`OutsideDbNeedsUpdate`内部进行设置。

* * *

**原文**

通常不建议使用具有副作用的属性（嗯，更准确地说，具有比更改表示的状态更多的副作用）。也许这条规则有例外，但大多数时候在属性之间建立依赖关系并不是一个好主意。

我必须猜测一下您最擅长的事情，因为我不知道您的真实代码是关于什么的，但是可以将逻辑放在 getter 中。只是一个例子：

```
public State State
{
   get { return this.EndDate.HasValue ? MyState.Completed : this._state; }
   set { this._state = value; }
} 
```

这不会消除相互依赖关系，但会将生效时间推迟到访问属性的时间。在您的情况下，这可能不会早于`SaveChanges()`.

另一种策略是制作一种同时设置两个属性的方法。方法预计会产生副作用，尤其是当它们的名称清楚地表明它时。你可以有一个像`SetMasterAndDependent (string master)`.

现在方法在数据绑定场景中并不方便。在这种情况下，您最好让视图模型设置两个属性或调用上述方法。

# javascript - XPCOM C++ 多线程和 javascript 回调

> ID：14363623
> 
> 赞同：7
> 
> 时间：2013-01-16T16:56:25.480
> 
> 标签：javascript, c++, multithreading, xul, xpcom

# 背景

在低于 12.0 的 XULRunner 版本中，它可以工作，但是当我尝试将其移植到 12.0 或更高版本时，它会导致应用程序崩溃。主要原因是在 sdk v12 或更新版本中，开发人员删除了 xpcom 组件的代理对象，并建议通过使用 nsRunnable/nsIRunnable 包装对象来替换它，并通过函数 NS_DispatchToMainThread 将调用路由到主线程（单击[此处](https://developer.mozilla.org/en-US/docs/XPCOM/Making_cross-thread_calls_using_runnables?redirectlocale=en-US&redirectslug=Making_Cross-Thread_Calls_Using_Runnables)）

# 我在开发什么？

我创建了异步的数据库连接器，并通过回调与主线程通信。使用：XULRunner v6，移植到XULRunner v17或以上

```
 //nsIDBCallback.idl
    [scriptable, function, uuid(XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX)]
    interface nsIDBCallback : nsISupports {
       void onInfo(in long phase, in long status, in string info);
    } 
```

```
 //nsDBService.h, it is XPCOM component 
    class nsDBService : public nsIDBService, nsIRunnable
    {
    public:
       NS_DECL_ISUPPORTS
       NS_DECL_NSIRUNNABLE
       NS_DECL_NSIDBSERVICE

    private:
       std::vector<nsIThread*>     threads;
       std::vector<nsIDBCallback*> callbacks;
       std::vector<const char*>    sqls;

       nsIThread* makeNewThread();
       void       runOperationIfNotBussy();

    public:
       NS_IMETHODIMP Query(const char *sql, nsIDBCallback *callback);
    } 
```

```
 //nsDBService.cpp
    // adding query and other data to buffers, 
    // it's thread safe, there are used mutex's
    NS_IMETHODIMP nsDBService::Query(const char *sql, nsIDBCallback *callback)
    {
       callbacks.push_back(callback);
       sqls     .push_back(sql);
       threads  .push_back( makeNewThread() );

       //run added operation if db driver is free, 
       //if driver is bussy then invocation is in buffer and need to wait
       runOperationIfNotBussy();

       return NS_OK;
    }

    void nsDBService::runOperationIfNotBussy() 
    {
       //some conditions, test's etc.

       //run first operation on list
       // RUNNING A THREAD, still ok
       if(...) threads.front()->Dispatch(this, nsIEventTarget::DISPATCH_NORMAL); 
    }

    //if this method is used by another thread+db query, 
    //then other operations can't run and need to wait
    //operations are stored and supported like fifo
    NS_IMETHODIMP nsDBService::Run(void)
    {
       //some other operations
       //real db operations in background

       int32_t phase = 3; //endphase
       int32_t code  = 0; //ok
       const char *msg = "OK";

       nsIDBCallback *callback = callbacks.pop();
       //wrapping callback function with runnable interface
       nsIRunnable   *runCallback = new nsResultCallback(callback, 
                                                         phase, 
                                                         code, 
                                                         msg);
       //routing event to main thread
       NS_DispatchToMainThread(runCallback, NS_DISPATCH_NORMAL); 

       runOperationIfNotBussy();
    } 
```

```
 //nsResultCallback.h
    class nsResultCallback: public nsRunnable
    { 
    public:
       NS_DECL_ISUPPORTS
    public:
       NS_DECL_NSIRUNNABLE

    private:
       nsIDBCallback* callback;
       int32_t        resPhase;
       int32_t        resStatus;
       const char*    resMessage;

    public:
       nsResultCallback(nsIDBCallback* callback, 
                        int32_t phase, 
                        int32_t status, 
                        const std::string &message)   
          : callback(callback), 
            resPhase(phase), 
            resStatus(status), 
            resMessage(c_str_clone(message.c_str())) {};
       ~nsResultCallback();

    }; 
```

```
 //nsResultCallback.cpp
    NS_IMETHODIMP nsResultCallback::Run(void)
    {
       nsresult rv = NS_ERROR_FAILURE;
       try 
       {
          // APP HANDS AND CRUSH ! 
          if(this->callback) this->callback->OnInfo(resPhase, resStatus, resMessage);
       }
       catch(...) 
       {
          rv = NS_ERROR_UNEXPECTED;
          ERRF("nsBackpack::Run call method OnInfo from callback failed");
       }
       return rv;
    } 
```

### 调用

```
 // *.js
    nsDBService.query("SELECT * FROM t", function(phase, code, mes) {
       //some UI actions or others db queries
    }); 
```

### 问题：

代码执行时应用程序冻结和崩溃如下所示：

```
 nsDBService::Query //main thread ok
    nsDBService::runOperationIfNotBussy //main thread
    nsDBService::threads.front()->Dispatch //run bg thread
    nsDBService:Run //bg thread
    NS_DispatchToMainThread //main thread
    nsResultCallback::Run //main thread
    nsIDBCallback::OnInfo //main thread, crash 
```

如果代码执行如下所示，一切正常：

```
 ```
nsDBService::Query //main thread ok
NS_DispatchToMainThread //main thread
nsResultCallback::Run //main thread
nsIDBCallback::OnInfo //main thread ok 
``` 问题：

当从 NS_DispatchToMainThread 调用 nsIDBCallback 并从其他线程调用 NS_DispatchToMainThread 时，然后是主应用程序线程，然后执行失败，我错过了什么，不明白？或者后台任务的另一种方法是什么？

            回答 #1

赞同：1

时间：2014-05-20T16:56:08.133

无法重现，因为您没有提供独立的完整示例，因此请注意：

我注意到的第一件事是`std::vector`. 你在评论中写了一些关于互斥锁的东西，所以这可能没问题。

什么肯定是**错误**的，是存储原始指针到`nsIDBCallback`. XPCOM 对象被引用计数。因此，一旦您的`Query`方法返回，如果没有其他对基础对象的引用，则基础对象可能是`delete`d，在您的向量中留下一个悬空指针。我*认为*这就是这里发生的事情！您需要保持对象处于活动状态，直到线程完成它，最好将其放入[`nsCOMPtr<nsIDBCallback>`](https://developer.mozilla.org/en-US/docs/Using_nsCOMPtr/Getting_Started_Guide)某个地方，例如在[`nsCOMPArray<nsIDBCallback>`](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Guide/Arrays).

PS：原来这是一个有点老的问题，我错过了......很抱歉*延迟*回答它：p

```

# node.js - 为什么 node.js 中的 ImageMagick 会崩溃？

> ID：14363624
> 
> 赞同：1
> 
> 时间：2013-01-16T16:56:25.977
> 
> 标签：node.js, debugging, imagemagick, libuv

我正在使用用 ImageMagick 编译的 node.js、node-vips 和 libvips 来转换和调整图像大小。当我尝试调整多个图像的大小时，我遇到了分段错误和失败的断言。

我经历了很多不同的崩溃，我不知道从哪里开始。我从 libvips 7.26.8 开始，我也尝试过 7.30.7。这是从源代码编译的节点 v0.8.17，在一个相当标准、干净的 ubuntu 盒子上。

```
#0  0x0000158ac3765c59 in ?? ()
Cannot access memory at address 0x7fffa837ec90 
```

```
#0  0x0000000000000000 in ?? ()
#1  0x0000000000000000 in ?? () 
```

```
node: ../deps/uv/src/unix/stream.c:729: uv__stream_io: Assertion `!!(events & EV_READ) ^ !!(events & EV_WRITE)' failed.
Aborted (core dumped)

#0  0x00007f5ed4df9425 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007f5ed4dfcb8b in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007f5ed4df20ee in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007f5ed4df2192 in __assert_fail () from /lib/x86_64-linux-gnu/libc.so.6
#4  0x00000000005d1bc8 in uv__stream_io (loop=<optimized out>, w=<optimized out>, events=<optimized out>) at ../deps/uv/src/unix/stream.c:729
#5  0x00000000005c6ac2 in ev_invoke_pending (loop=0xdb34c0 <default_loop_struct>) at ../deps/uv/src/unix/ev/ev.c:2145
#6  0x00000000005c2986 in uv__poll (loop=0xdb27e0 <default_loop_struct>) at ../deps/uv/src/unix/core.c:246
#7  uv__run (loop=0xdb27e0 <default_loop_struct>) at ../deps/uv/src/unix/core.c:257
#8  0x00000000005c2c60 in uv_run (loop=0xdb27e0 <default_loop_struct>) at ../deps/uv/src/unix/core.c:265
#9  0x000000000057d9f7 in node::Start(int, char**) ()
#10 0x00007f5ed4de476d in __libc_start_main () from /lib/x86_64-linux-gnu/libc.so.6
#11 0x0000000000575245 in _start () 
```

```
#0  0x00000000006b13b8 in v8::Object::SetHiddenValue(v8::Handle<v8::String>, v8::Handle<v8::Value>) ()
#1  0x0000000000593f5a in node::SlabAllocator::Allocate(v8::Handle<v8::Object>, unsigned int) ()
#2  0x0000000000591d04 in node::StreamWrap::OnAlloc(uv_handle_s*, unsigned long) ()
#3  0x00000000005d08fb in uv__read (stream=0x1fa7f90) at ../deps/uv/src/unix/stream.c:575
#4  0x00000000005d1a1a in uv__stream_io (loop=<optimized out>, w=<optimized out>, events=<optimized out>) at ../deps/uv/src/unix/stream.c:745
#5  0x00000000005c6ac2 in ev_invoke_pending (loop=0xdb34c0 <default_loop_struct>) at ../deps/uv/src/unix/ev/ev.c:2145
#6  0x00000000005c29df in uv__poll (loop=0xdb27e0 <default_loop_struct>) at ../deps/uv/src/unix/core.c:248
#7  uv__run (loop=0xdb27e0 <default_loop_struct>) at ../deps/uv/src/unix/core.c:257
#8  0x00000000005c2c60 in uv_run (loop=0xdb27e0 <default_loop_struct>) at ../deps/uv/src/unix/core.c:265
#9  0x000000000057d9f7 in node::Start(int, char**) ()
#10 0x00007f065aa1176d in __libc_start_main () from /lib/x86_64-linux-gnu/libc.so.6
#11 0x0000000000575245 in _start () 
```

我经常遇到前两个错误之一——即没有堆栈跟踪。这些都是在尝试调整 6 个左右的图像大小时发生的——有时它们都成功而没有错误，但通常在调整前一两个图像大小后会出现故障。

我到底该如何调试呢？

在 node-vips 插件的单元测试中，有一条评论如下：

> 如果使用 imagemagick 支持编译 vips，此测试将崩溃，因为从 libeio 调用时 imagemagick 崩溃

为什么是这样？这仍然是真的吗？我认为 ImageMagick 是完全线程安全的，但它如何使它从 libeio/libuv 调用不安全？

# php - mysql_result 转化为更高级的 mysqli 函数

> ID：14363625
> 
> 赞同：1
> 
> 时间：2013-01-16T16:56:28.883
> 
> 标签：php, mysql, mysqli

我正在将我的小项目从`MYSQL`数据库升级到`MYSQLi`，我只剩下 3 个函数需要更新。

这是我的功能`MYSQL`：

```
function id_from_username($username) {
    $username = sanitize ($username);
    return mysql_result(mysql_query("SELECT ´id´ FROM ´members´ WHERE ´username´ = '$username'"), 0, 'id');
} 
```

我有这段代码，我试图迁移到上面的函数中但没有用：

```
$result = "SELECT * FROM `settings`";
 if (!$row = $db_connect->query($result)) {
     die('Oops, something went wrong during loading data! Error x010');
 } 
```

我知道我应该公开我尝试过的代码，但问题是我真的不知道如何将其迁移`MYSQLi`到那个特定的函数中，而且我知道代码在所有可能的方面都是错误的，如果可以这么说的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:15:07.890

那么你可以试试这个迁移：
[https ://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php)

首先，在脚本前面的某个地方连接：

```
include 'safemysql.class.php';
$opts = array(
    'user'    => 'user',
    'pass'    => 'pass',
    'db'      => 'db',
    'charset' => 'latin1',
);
$db = new SafeMySQL($opts); 
```

然后用这种方式编写你的函数

```
function id_from_username($username) 
{
    global $db;
    return $db->getOne("SELECT id FROM members WHERE username = ?s", $username);
} 
```

请注意，这不是纯粹的 mysqli，而是基于它构建的自定义库。
最重要的区别是每个占位符都必须根据它们在查询中的角色来标记它的类型。例如，对于字符串，使用了`$username`字符串占位符 ( `?s`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:52:00.483

我找到了正确的答案，代码应该如下：

```
function id_from_username($username) {
    $username = sanitize($username);
    global $db_connect;

    $result = $db_connect->query("SELECT(id) FROM members WHERE username = '$username'");
    if (false === $result) {
        return false;
    }
    return ($result->num_rows === 1);
} 
```

这很简单，我仍然可以在不集成其他脚本的情况下坚持我的代码 :)

# hibernate - 使用 CriteriaBuilder 的 JPA + Hibernate count(*) - 使用 generateAlias

> ID：14363634
> 
> 赞同：6
> 
> 时间：2013-01-16T16:57:06.887
> 
> 标签：hibernate, jpa, criteria-api

尝试使用创建`count(*)`类型查询时`CriteriaBuilder`出现以下别名问题。

我应该对下面的代码进行哪些更改才能获得计数？

约束：

1.  我必须使用 CriteriaBuilder/Query 因为必须根据值动态构建 where 子句。
2.  我只需要 COUNT，而不需要内存中的对象列表。

代码示例片段：

```
 Class<ReqStatCumulative> entityClass = ReqStatCumulative.class;
 @Override
    public long getCountForAlertConfig(AlertConfig cfg) {
        long count = 0L;
        if (null != cfg) {
            CriteriaBuilder qb = entityManager.getCriteriaBuilder();

            Metamodel model = entityManager.getMetamodel();
            EntityType<ReqStatCumulative> reqStatEntType_ = model.entity(entityClass);
            CriteriaQuery<ReqStatCumulative> cq = qb.createQuery(entityClass);
            Root<ReqStatCumulative> rootReqStatEnt = cq.from(reqStatEntType_);
            Path<Long> processTimeSeconds = rootReqStatEnt.<Long> get("processTimeSeconds");
            cq.where(qb.and(qb.greaterThan(processTimeSeconds, (long) cfg.getProcessTimeExceedsSec()),//
                    qb.lessThan(processTimeSeconds, (long) cfg.getProcessTimeExceedsSec() + 100))//
            );//
            findCountByCriteria(entityManager, cq, qb);
            log.debug("\n\t#####Alert desc:" + cfg.getDescription());
            log.debug("\n\t#####Alert count= " + count);
        } else {
            // Do nothing
        }
        return count;
    }

    public <T> Long findCountByCriteria(EntityManager em, CriteriaQuery<T> cqEntity, CriteriaBuilder qb) {
        CriteriaBuilder builder = qb;
        CriteriaQuery<Long> cqCount = builder.createQuery(Long.class);
        Root<?> entityRoot = cqCount.from(cqEntity.getResultType());
        cqCount.select(builder.count(entityRoot));
        cqCount.where(cqEntity.getRestriction());
        return em.createQuery(cqCount).getSingleResult();
    } 
```

日志：我希望在所有 where 子句属性中使用 generateAlias0 而不是 generateAlias1。

```
select count(*) from abc.domain.ReqStatCumulative as **generatedAlias0** where ( **generatedAlias1**.processTimeSeconds>5L ) and ( **generatedAlias1**.processTimeSeconds<200L )

10:48:57.169 [main] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: select count(*) from abc.domain.ReqStatCumulative as generatedAlias0 where ( generatedAlias1.processTimeSeconds>5L ) and ( generatedAlias1.processTimeSeconds<200L )
10:48:57.169 [main] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[IDENT] Node: 'abc'
    |  |     |  |  \-[IDENT] Node: 'domain'
    |  |     |  \-[IDENT] Node: 'ReqStatCumulative'
    |  |     \-[ALIAS] Node: '**generatedAlias0**'
    |  \-[SELECT] Node: 'select'
    |     \-[COUNT] Node: 'count'
    |        \-[ROW_STAR] Node: '*'
    \-[WHERE] Node: 'where'
       \-[AND] Node: 'and'
          +-[GT] Node: '>'
          |  +-[DOT] Node: '.'
          |  |  +-[IDENT] Node: '**generatedAlias1**'
          |  |  \-[IDENT] Node: 'processTimeSeconds'
          |  \-[NUM_LONG] Node: '5L'
          \-[LT] Node: '<'
             +-[DOT] Node: '.'
             |  +-[IDENT] Node: '**generatedAlias1**'
             |  \-[IDENT] Node: 'processTimeSeconds'
             \-[NUM_LONG] Node: '200L'

10:48:57.169 [main] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
10:48:57.169 [main] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select << begin [level=1, statement=select]
10:48:57.169 [main] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : erf.domain.ReqStatCumulative (generatedAlias0) -> reqstatcum0_
10:48:57.169 [main] ERROR o.h.hql.internal.ast.ErrorCounter -  Invalid path: 'generatedAlias1.processTimeSeconds'
10:48:57.215 [main] ERROR o.h.hql.internal.ast.ErrorCounter -  Invalid path: 'generatedAlias1.processTimeSeconds'
org.hibernate.hql.internal.ast.InvalidPathException: Invalid path: 'generatedAlias1.processTimeSeconds' 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T17:44:43.903

您的代码失败，因为您`Root`对 count 和 where 子句使用不同的实例：第一个（按定义顺序）生成`generatedAlias1`别名，另一个生成`generatedAlias0`. 您需要重构代码以便`Root`在两个地方使用相同的实例：

```
CriteriaQuery<Long> cqCount = builder.createQuery(Long.class);
Root<ReqStatCumulative> entityRoot = cqCount.from(cqEntity.getResultType());
cqCount.select(builder.count(entityRoot));
Path<Long> processTimeSeconds = entityRoot.get("processTimeSeconds");
cqCount.where(qb.and(qb.greaterThan(processTimeSeconds, (long) cfg.getProcessTimeExceedsSec()),//
                qb.lessThan(processTimeSeconds, (long) cfg.getProcessTimeExceedsSec() + 100))//
                );//    
return em.createQuery(cqCount).getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-10T19:04:11.187

我有同样的问题，我解决了：

```
CriteriaQuery<Long> countCriteria = cb.createQuery(Long.class);
Root<EntityA> countRoot = countCriteria.from(cq.getResultType());
Set<Join<EntityA, ?>> joins = originalEntityRoot.getJoins();
for (Join<EntityA, ?> join :  joins) {
    countRoot.join(join.getAttribute().getName());
}
countCriteria.select(cb.count(countRoot));
if(finalPredicate != null)
    countCriteria.where(finalPredicate);

TypedQuery<Long> queryCount = entityManager.createQuery(countCriteria);
Long count = queryCount.getSingleResult(); 
```

在哪里

originalEntityRoot 是我使用 where 子句进行查询的主根。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-17T22:37:15.710

我正在寻找基于 OP 问题的更通用的解决方案。并且只留下一个基于@Hector 示例的更通用的解决方案：

```
public class CountQueryHelper<T> {

    final Class<T> typeParameterClass;

    public CountQueryHelper(Class<T> typeParameterClass) {
        this.typeParameterClass = typeParameterClass;
    }

    public CriteriaQuery<Long> getCountQuery(CriteriaQuery<T> originalQuery, EntityManager em) {
        CriteriaBuilder cb = em.getCriteriaBuilder();

        // create count query
        CriteriaQuery<Long> countQuery = cb.createQuery(Long.class);

        // start copying root/joins/restrictions from  the original query

        // copy roots
        for (Root r : originalQuery.getRoots()) {
            Root root = countQuery.from(r.getModel());
            root.alias(r.getAlias());
        }

        // copy joins
        for (Root r : originalQuery.getRoots()) {
            Set<Join<T, ?>> joins = r.getJoins();
            for (Join<T, ?> join : joins) {
                for (Root countRoot : countQuery.getRoots()) {
                    try {
                        Join joinOnCount = countRoot.join(join.getAttribute().getName());
                        joinRecursive(joinOnCount, join);
                    } catch (IllegalArgumentException e) {
                        // attribute does not exist on this root
                    }
                }
            }
        }

        countQuery.select(cb.count(countQuery.from(this.typeParameterClass)));

        //  copy restrictions
        if (originalQuery.getRestriction() != null) {
            countQuery.where(originalQuery.getRestriction());
        }

        return countQuery;
    }

    private void joinRecursive(Join countJoins, Join<T, ?> originalJoin) {
        for(Join original : originalJoin.getJoins()) {
            Join<Object, Object> childJoin = countJoins.join(original.getAttribute().getName());
            joinRecursive(childJoin, original);
        }
    }
} 
```

# .net - WCF Rest服务如何访问没有参数的post JSON数据

> ID：14363635
> 
> 赞同：0
> 
> 时间：2013-01-16T16:57:15.273
> 
> 标签：.net, json, wcf, wcf-rest

我创建了非常适合 get 的 restful wcf 服务。现在我正在构建一些发布方法。客户端以 JSON 格式将数据发布到此服务。服务方法不会有任何参数，所以我需要从发出的请求中读取 jsondata。我无法弄清楚我应该如何检索从请求中生成的数据。

```
 [OperationContract]
 [WebInvoke(Method = "POST", UriTemplate = "/SaveEmployee", RequestFormat =    WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]

public bool SaveEmployee()
        {
            //Capture Employee Object Data here and perform save
            return true;
        }

        [DataContract]
        public class Employee
        {
            [DataMember]
            public int Id
            {
                get;
                set;
            }

            [DataMember]
            public string Name
            {
                get;
                set;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:21:15.280

如果您使用数据协定类型设置您的方法，它将填充请求正文并为您反序列化。

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/SaveEmployee", RequestFormat =            WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public bool SaveEmployee(Employee sentEmployee)
    {
        //Capture Employee Object Data here and perform save
        return true;
    } 
```

如果你不能这样做，你将不得不在 URL 参数中传递 json 数据并手动反序列化内容。

# javascript - 链接多个 jquery 命令

> ID：14363638
> 
> 赞同：1
> 
> 时间：2013-01-16T16:57:24.637
> 
> 标签：javascript, jquery, chaining

我尝试过链接和嵌套，但可能以错误的方式执行这两行是否有更有效的方法？

```
$('#pub1, #pub1Tab').addClass('active');
$('#pub1').parent().addClass('active'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:01:26.457

尝试使用 jquery[父选择器](http://api.jquery.com/parent-selector/)

```
$('#pub1, #pub1:parent, #pub1Tab').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:14:23.447

```
$('#pub1').parent().andSelf().add('#pub1Tab').addClass('active'); 
```

# python - Python Pandas - 在一个命令中从数据框中删除多个系列

> ID：14363640
> 
> 赞同：18
> 
> 时间：2013-01-16T16:57:30.890
> 
> 标签：python, pandas

简而言之......我有一个 Python Pandas 数据框，它是使用“read_table”从 Excel 文件中读取的。我想从数据中保留一些系列，并清除其余部分。我知道我可以使用 'del data['SeriesName']' 一个一个地删除我不想要的内容，但我宁愿指定要保留的内容，而不是指定要删除的内容。

如果最简单的答案是将现有数据框复制到仅包含我想要的系列的新数据框中，然后完全删除现有框架，我会对该解决方案感到满意......但如果这确实是最好的方式，有人可以带我过去吗？

TIA ...我是熊猫的新手。:)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-16T17:01:31.107

您可以使用该`DataFrame` `drop`功能删除列。您必须传递`axis=1`选项才能使其在列而不是行上工作。请注意，它返回一个副本，因此您必须将结果分配给一个新的`DataFrame`：

```
In [1]: from pandas import *

In [2]: df = DataFrame(dict(x=[0,0,1,0,1], y=[1,0,1,1,0], z=[0,0,1,0,1]))

In [3]: df
Out[3]:
   x  y  z
0  0  1  0
1  0  0  0
2  1  1  1
3  0  1  0
4  1  0  1

In [4]: df = df.drop(['x','y'], axis=1)

In [5]: df
Out[5]:
   z
0  0
1  0
2  1
3  0
4  1 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-16T17:03:39.730

与 Zelazny7 的回答基本相同——只需指定要保留的内容：

```
In [68]: df
Out[68]: 
   x  y  z
0  0  1  0
1  0  0  0
2  1  1  1
3  0  1  0
4  1  0  1

In [70]: df = df[['x','z']]                                                                

In [71]: df
Out[71]: 
   x  z
0  0  0
1  0  0
2  1  1
3  0  0
4  1  1 
```

## *编辑*

`Dataframe.columns`您可以通过对对象进行索引/切片来指定大量列。
这个对象`type(pandas.Index)`可以看作是一个`dict`列标签（具有一些扩展功能）。

请参阅上述示例的扩展：

```
In [4]: df.columns
Out[4]: Index([x, y, z], dtype=object)

In [5]: df[df.columns[1:]]
Out[5]: 
   y  z
0  1  0
1  0  0
2  1  1
3  1  0
4  0  1

In [7]: df.drop(df.columns[1:], axis=1)
Out[7]: 
   x
0  0
1  0
2  1
3  0
4  1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-16T15:21:14.740

您还可以指定列列表以与 中的`usecols`选项保持一致`pandas.read_table`。这也加快了加载过程。

# html - HTML 表单操作标记。调用父相对 URL

> ID：14363641
> 
> 赞同：8
> 
> 时间：2013-01-16T16:57:31.707
> 
> 标签：html, spring, jsp, spring-mvc

我正在尝试设置一个 HTML 表单（实际上`.jsp`是在 Spring-MVC 应用程序的上下文中）。

假设我在 URL：

```
example.com/first/second 
```

我想采取行动

```
example.com/post 
```

动作应该是什么样的？

我希望这会起作用：

```
<form:form method="post" action="../post"> 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-16T17:16:10.443

`post`父目录中的相对路径：`... action="../post"`

`post`根目录中的相对路径：`... action="/post"`

# ios - 如何在 iOS 应用程序中通过 UIPickerView 实现视图之间的转换？

> ID：14363644
> 
> 赞同：0
> 
> 时间：2013-01-16T16:57:41.003
> 
> 标签：ios, objective-c, uiview, uipickerview

我想实现一个自定义下拉菜单，它允许用户快速更改 iOS 应用程序中的视图。我决定`UIPickerView`为此目的使用。但是我没有找到任何关于如何通过 a 更改视图的教程，`UIPickerView`所以我需要一些帮助和建议。代码示例将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:31:46.713

下面的方法是`UIPickerview`行选择的委托方法。

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:
(NSInteger)component    
{
    //in this method hide the views that you don't want to show and show the views that you
    //don't want to hide, when a particular row is selected.

    NSLog(@"row selected----->>%d",row);
} 
```

# requirejs - 如何定义与其文件名不同的模块？

> ID：14363645
> 
> 赞同：0
> 
> 时间：2013-01-16T16:57:40.873
> 
> 标签：requirejs

我遇到了一个奇怪的错误。**编辑**发生在 Firefox 中，但不是 Chrome

在我的 HTML 页面中，我有这个：

```
 <script type="text/javascript">              
          require(['blah']);
    </script> 
```

在名为 someFileNameNotNamedBlah.js 的 javascript 文件中，我有这个：

```
define(
    'blah',
    ['jquery', 'amplify', 'config' ],
    function ($, amplify, config) {
    ...
}); 
```

浏览器似乎在寻找 blah.js... 为什么？我该如何解决？

[Firebug 寻找不存在的文件名](http://i.stack.imgur.com/u0Sek.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:57:12.127

您需要问自己的问题是：鉴于 RequireJS 通过 XHR 请求异步加载模块，它如何**知道**在`blah`调用的文件中查找模块，`someFileNameNotNamedBlah.js`除非它被告知它位于何处？

您应该在[`paths`](http://www.requirejs.org/docs/api.html#config-paths)配置中为模块定义别名：

```
require.config({
    paths: {
        blah: 'someFileNameNotNamedBlah'
    }
}); 
```

然后，您可以从模块中删除模块名称：

```
define(['jquery', 'amplify', 'config' ], function ($, amplify, config) {
    //...
}); 
```

并通过别名找到它：

```
require(['blah']); 
```

# graphviz - Graphviz 图纸部分裁剪

> ID：14363647
> 
> 赞同：1
> 
> 时间：2013-01-16T16:57:49.923
> 
> 标签：graphviz, dot, neato

我正在使用 Graphviz 从邻接矩阵中绘制图形，在某些情况下，我得到一个 .ps 文件，其中图形出现部分裁剪。像这样： ![裁剪图:(](../Images/3527cd35e54a92d8fa9187b25e99eac2.png)

这非常烦人且无法使用。有人可以解释发生了什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:14:02.143

你有理由需要后记吗？您是否考虑过其他格式？例如

```
 neato.exe myfile.dot -Tpng -O
  neato.exe myfile.dot -Tsvg -O 
```

[http://www.graphviz.org/doc/info/output.html](http://www.graphviz.org/doc/info/output.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T02:12:32.807

我遇到了同样的输出裁剪问题。通过以png格式输出解决它

```
dot -Tpng myfile.dot -o ~/output.png 
```

或者

```
`command that generates *.dot` | dot -Tpng -o ~/output.png 
```

如果输出节点的大小太小而看不到使用`-Gsize`参数增加它们的大小

# python - 贝尔曼福特的迭代让我难以理解

> ID：14363655
> 
> 赞同：3
> 
> 时间：2013-01-16T16:58:21.443
> 
> 标签：python, algorithm

贝尔曼福特算法向我解释的方式是它经过 n-1 次（n 是节点数）迭代，每次迭代更新节点之间的距离。所有图形示例都显示了初始化为无穷大的节点，最接近源节点的节点在第一次迭代中被更新，但其余的保持在无穷大，直到发生到达它们的迭代。

但是，查看算法的代码，例如[此处](https://gist.github.com/701720)提供的代码，我发现很难理解为什么所有步数大于迭代次数的节点都没有使用算法进行更新。例如，如果我正在进行第二次迭代，并且我有一个只能通过路径 abcd 访问的节点 d，那么我读过的示例似乎表明 d 直到第 4 次迭代才会更新。

但是代码的主要松弛函数：

```
def relax(node, neighbour, graph, d, p):
    # If the distance between the node and the neighbour is lower than the one I have now
    if d[neighbour] > d[node] + graph[node][neighbour]:
        # Record this lower distance
        d[neighbour]  = d[node] + graph[node][neighbour]
        p[neighbour] = node 
```

根据给出与前任节点源的权重和距离的信息进行更新。如果算法在每次迭代中迭代每个节点，那么在第一次迭代中如何阻止 d 正确更新？例如，如果算法以 abcd 的顺序迭代节点，我不明白为什么该算法不会存储节点 b 的距离信息，移动到节点 c，存储距离信息，最后到达 d足够的信息来计算第一次迭代中的最短路径。

我希望这有点道理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:11:03.363

它*可能会*发生 - 但不能*保证*。您只能*保证*`k`在第 k 次迭代时拥有最短路径，而不是更早。

您看到的可视化只是为了解释算法的概念，使用事务内存模型更清晰、更容易理解。
想想如果距离为 10 的节点在第一次迭代中会发生变化，那么使用可视化来理解算法有多难......

关于评论中的问题：

> 这是否意味着我可以有效地创建一个工具来跟踪每次迭代的更改次数，并且一旦该计数器达到 0，我就可以提前退出迭代？

是的，如果迭代没有变化`k`——迭代也不`k+1`能改变任何东西，一切都是最小的，for `k+2`, ...

# javascript - 在控制器中使用 $setValidity

> ID：14363656
> 
> 赞同：80
> 
> 时间：2013-01-16T16:58:22.480
> 
> 标签：javascript, angularjs, angularjs-controller, angularjs-forms

我正在尝试对文件更改进行一些验证。这是我的代码：

**查看/模板**

```
<input type="file" name="file" id="file"  
       onchange="angular.element(this).scope().setFile(this)" 
       required />

<span class="error" ng-show="myForm.file.$error.required">Error</span>
<span class="error" ng-show="myForm.file.$error.size">Selected file is too large</span>
<span class="error" ng-show="myForm.file.$error.filetype">Unsupported File type</span> 
```

**控制器**

```
angular.module("myapp").controller("myctrl", function($scope) {
  $scope.setFile = function(element) {
    $scope.$apply(function($scope) {
      var fileObject = element.files[0];
      $scope.file.fileType = 
         fileObject.type.toUpperCase().substring(fileObject.type.indexOf("/") + 1);

      // Validation
      if (!$scope.isValidFileType($scope.file.fileType)) {
        myForm.file.$setValidity("myForm.file.$error.filetype", false);
      }

      if (fileObject.size > 1000*1000*10) {
        myForm.file.$setValidity("myForm.file.$error.size", false);
      }
    });
  };

  $scope.isValidFileType = function(fileExtension) {
    var supportedExtensions = ["doc", "docx", "ppt", "pptx", "jpg", "gif", "png"]; // etc.
    return (jQuery.inArray(fileExtension, supportedExtensions) > -1);
  }
}); 
```

但现在调用`$setValidity`不起作用。
有什么想法吗？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-01-16T19:38:00.483

这一行：

```
myForm.file.$setValidity("myForm.file.$error.size", false); 
```

应该

```
$scope.myForm.file.$setValidity("size", false); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-16T19:37:07.323

$setValidity 需要在 ngModelController 上调用。在控制器内部，我认为这意味着`$scope.myForm.file.$setValidity()`.

如果您还没有， 另请参阅[表单页面](http://docs.angularjs.org/guide/forms)上的“自定义验证”部分。

此外，对于 $setValidity 的第一个参数，只使用 'filetype' 和 'size'。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-01T07:26:20.230

为单个元素显示多个验证消息的更好和优化的解决方案是这样的。

```
<div ng-messages="myForm.file.$error" ng-show="myForm.file.$touched">
 <span class="error" ng-message="required"> <your message> </span>
 <span class="error" ng-message="size"> <your message> </span>
 <span class="error" ng-message="filetype"> <your message> </span>
</div> 
```

Controller Code 应该是@Ben Lesh 建议的那个

# java - Java正则表达式提取标签之间的内容

> ID：14363664
> 
> 赞同：0
> 
> 时间：2013-01-16T16:58:40.233
> 
> 标签：java, regex

**输入 ：**

```
<tag>Testing different formatting options in </tag><tag class="classA classB">Text</tag><tag class="classC">Class C text</tag> 
```

**预期输出：**

```
<tag>Testing different formatting options in </tag><tagA><tabB>Text</tagA></tagB><tagC>Class C text</tag> 
```

基本上，标签被基于“类”中的属性的标签替换。即，如果属性具有 classA 属性，则标签将被 tagA 替换，如果 classB 属性也存在，则标签还将包括 tagB 等等。

**尝试：**

```
 final String TAG_GROUPS = "<tag class=\"(.*)\">(.*)</tag>";
    Pattern pattern = Pattern.compile(TAG_GROUPS);
    Matcher matcher = pattern.matcher(inputString); 
```

我得到的输出找不到匹配的标签。特别是声明

```
 String classes = matcher.group(1); 
```

给出字符串`classA classB">Text</tag><tag class="classC">Class C text</tag`. 模式匹配器找不到匹配的标签。我是正则表达式的初学者，我想知道问题的正确模式。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:03:47.983

你应该使用贪婪的正则表达式：`"<tag class=\"(.*?)\">(.*)</tag>"`. 否则`.*`匹配*任何*字符，包括`</tag>`.

但总的来说，我同意人们的观点，即这不是使用正则表达式解析 XML 的最佳实践。请改用 XML 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:03:13.957

虽然您可以使用正则表达式来定位开始标签并解析类，但无法生成嵌套标签作为输出。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

您可以做的是编写自己的简单 HTML 解析器，但 HTML 解析起来非常混乱。或者换一种说法：看看我的声誉，然后考虑如果没有充分的理由（比如有人付给我一百万美元），*我*不会尝试它。

[请改用HTML Tidy](http://tidy.sourceforge.net/)等真正的 HTML 解析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:14:45.370

当你使用`*`它时，它会尝试吸收所有可能的字符（贪婪）。

如果你想让它`.*`匹配不太可能的字符，你必须使用惰性匹配`*?`。

所以你的正则表达式得到：

```
<tag class=\"(.*?)\">(.*?)</tag> 
```

以上，是简单的方法。但不一定是最佳方式。惰性匹配比贪婪更慢，如果可以的话，你必须尽量避免它。例如，如果您估计您的代码将是正确的（如果没有关闭标签，则不会破坏标签等）最好使用否定类而不是`.*?`. 例如，您的正则表达式可以写成：

```
<tag class="([^"]*)">([^<]*)</tag> 
```

Witch 对于正则表达式引擎更有效（尽管并非总是可以将惰性匹配转换为否定类）。

当然，如果您试图解析一个完整的 html 或 xml 文档，您必须进行许多不同的更改，最好使用 xml (html) 解析器。

# javascript - 在 JavaScript 中，条件中的 ',' 是什么

> ID：14363668
> 
> 赞同：6
> 
> 时间：2013-01-16T16:58:45.090
> 
> 标签：javascript, conditional

在这个例子中：

```
for (var c = 0, e = a.length; c < e && !(d = b(c, a[c]), !1 === d) 
```

而在另一个：

```
if (d = b(c, a[c]), !1 === d) 
```

这些条件是返回第一部分、第二部分还是两者都返回？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T17:00:01.567

它是[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)，并不特定于条件或循环。

# django - 创建仅用于测试的 Django 视图

> ID：14363669
> 
> 赞同：0
> 
> 时间：2013-01-16T16:58:49.943
> 
> 标签：django, django-testing

我们正在编写一个新的装饰器，它将测试请求标头中是否存在身份验证令牌。该请求是通过将数据发布到 URL 来创建的。当前没有使用此装饰器的视图。无论如何，这些视图可能位于不同的模块中。那么有没有办法让我创建一个视图，将它附加到一个 URL，然后将装饰器包裹在它周围，只是为了测试装饰器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:10:27.387

创建一个包含您的装饰视图的测试 url conf，然后使用该[`TestCase.urls`](https://docs.djangoproject.com/en/1.5/topics/testing/overview/#django.test.TestCase.urls)选项在您的测试类中使用它。

# c# - C# 正则表达式捕获括号

> ID：14363672
> 
> 赞同：1
> 
> 时间：2013-01-16T16:59:02.317
> 
> 标签：c#, regex

我无法捕获括号。

我有一个包含这种形式数据的大文件：

```
I.u[12] = {n: "name1",...};
I.u[123] = {n: "name2",...};
I.u[1234] = {n: "name3",...}; 
```

我想创建一个系统，如果我提供 id（这里 , , ），可以帮助我从文件中获取名称（这里`name1`, `name2`, ）。我有以下代码：`name3``12``123``1234`

```
 public static string GetItemName(int id)
    {
        Regex regex = new Regex(@"^I.u\["+id+@"\]\s=\s{n:\s(.+),.+};$");
        Match m= GetMatch(regex,filepath);
        if(m.Success) return m.Groups[0].Value;
        else return "unavailable";
    }

    public static Match GetMatch(Regex regex, string filePath)
    {
        Match res = null;
        using (StreamReader r = new StreamReader(filePath))
        {
            string line;
            while ((line = r.ReadLine()) != null)
            {
                res = regex.Match(line);
                if (res.Success) break;
            }
        }
        return res;
    } 
```

正则表达式在文件中找到正确的行，但我真的不知道为什么它没有按我的意愿提取名称，并且，

```
if(m.Success) return m.Groups[0].Value; 
```

返回文件中的整行而不是名称...我尝试了很多东西，甚至更改`m.Groups[0]`为`m.Groups[1]`但没有用。

我现在已经搜索了片刻没有成功。你知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:02:41.537

根据您更新的问题，我可以看到您正在使用贪婪量词：`.+`。这将尽可能匹配。您需要一个被动修饰符，它只会匹配必要的部分：`.+?`

尝试这个：

```
Regex regex = new Regex(@"^I.u\["+id+@"\]\s=\s\{n:\s(?<Name>.+?),.+\};$", RegexOptions.Multiline); 
```

然后：

```
if(m.Success) return m.Groups["Name"].Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:04:34.463

正如其他人指出的那样：

```
if(m.Success) return m.Groups[0].Value; 
```

应该：

```
if(m.Success) return m.Groups[1].Value; 
```

但是，这将返回`"name1"`包括引号。尝试将您的正则表达式模式修改为：

```
@"^I.u\["+id+@"\]\s=\s{n:\s""(.+)"",.+};$" 
```

这将排除引号`m.Groups[1].Value`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:01:01.217

因为您指的是错误的组号..应该`1`不是`0`

`0`无论您有多少组，组都将始终包含整个匹配项。

正则表达式也应该是

```
^I.u\["+id+@"\]\s*=\s*{n:\s*""(.+)"",.+};$ 
```

# php - 友好的 URL 问题

> ID：14363677
> 
> 赞同：0
> 
> 时间：2013-01-16T16:59:19.943
> 
> 标签：php, apache, mod-rewrite

所以我有几个问题。假设，我有 2 种类型的链接：（现在）
1.`test.com/?d=ID`
我希望它像`test.com/{cat}/{title}`where`{cat}`并且`{title}`将在 DB 中通过提供的 ID 进行搜索`d`。
2.`test.com/?h=ID`
我希望它就像`test.com/{cat}`在`{cat}`DB 中通过提供的 ID 搜索的位置一样`h`。
mod_rewrite 的哪些规则将使服务器（apache）理解，`test.com/?d=ID`应该重定向到`test.com/{cat}/{title}`？
如果人来自`test.com/{cat}/{title}`我所理解的链接，我只会做类似的事情

```
$vars=explode ("/", $_SERVER['REQUEST_URI']); 
```

然后使用 $vars[1] 和 $vars[2] 查询 db 并提供内容（如果有）（当然，在运行查询之前对所有内容进行清理。我理解概念对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:04:06.227

您应该在[SitePoint](http://www.sitepoint.com/guide-url-rewriting/)上查看这篇文章。总而言之，您不希望通过分解 URL 来获取参数。这将导致问题。

# c - C 语言音频输入/输出

> ID：14363679
> 
> 赞同：3
> 
> 时间：2013-01-16T16:59:21.687
> 
> 标签：c, audio, audio-recording

我已经搜索了使用 C 语言捕获/播放音频的方法，但我没有发现任何有用的东西。有没有这样的方法可以做到这一点，或者我将不得不使用另一种语言，如 C++、C# 或 Java？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T17:02:07.590

[PortAudio](http://www.portaudio.com/) 完全可以从 C 中使用。

> PortAudio 是一个免费、跨平台、开源的音频 I/O 库。它让您可以使用“C”或 C++ 编写简单的音频程序，这些程序可以在许多平台上编译和运行，包括 Windows、Macintosh OS X 和 Unix (OSS/ALSA)。它旨在促进不同平台上的开发者之间的音频软件交流。许多应用程序将 PortAudio 用于音频 I/O。
> 
> PortAudio 提供了一个非常简单的 API，用于使用简单的回调函数或阻塞读/写接口来录制和/或播放声音。示例程序包括播放正弦波、处理音频输入（吉他模糊）、录制和播放音频、列出可用的音频设备等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:05:17.147

我认为没有理由捕获 - 如果将在 pc 上使用纯 c 播放音频。但是使用 c++ 很容易，因为它有现成的库。或者如果您想使用框架，您可以尝试 c# 或 java

# c - 如何在 C 中定义 MPI 类型数组？

> ID：14363682
> 
> 赞同：1
> 
> 时间：2013-01-16T16:59:34.093
> 
> 标签：c, arrays, mpi, openmpi

我使用下面的代码定义了一个大小为 8 的数组并在 C 中键入 MPI_INTEGER：

```
/*=================================================================
C example 
=================================================================*/
#include <stdio.h>
#include "mpi.h"

int main(int argc, char** argv){    
    MPI_FLOAT itype[8];     
    int nproc;
    int iproc;
    MPI_Comm icomm;
    MPI_Request req;
    MPI_Status status;
    MPI_Init(&argc,&argv);

    icomm = MPI_COMM_WORLD;
    MPI_Comm_rank(icomm,&iproc);
    MPI_Comm_size(icomm,&nproc);

  itype[0]  = MPI_FLOAT;
  itype[1]  = MPI_FLOAT;
  itype[2]  = MPI_FLOAT;
  itype[3]  = MPI_FLOAT;
  itype[4]  = MPI_FLOAT;
  itype[5]  = MPI_FLOAT;
  itype[6]  = MPI_FLOAT;
  itype[7]  = MPI_UB;

    MPI_Finalize();

} 
```

我收到以下错误：

```
type_derived_struct.c(18): error: expected a ";"
        MPI_FLOAT itype[8];     
                  ^

type_derived_struct.c(93): error: identifier "itype" is undefined
    itype[0]  = MPI_FLOAT; 
```

我正在使用英特尔 openmpi。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:22:33.803

你要

```
MPI_Datatype itype[8]; 
```

`MPI_Datatype`是`MPI_FLOAT`(and`MPI_INT`等)的类型

# java - 使用 java.awt.Paint 加载自定义图像

> ID：14363683
> 
> 赞同：0
> 
> 时间：2013-01-16T16:59:35.643
> 
> 标签：java, paint

我需要使用*JFreeChart*的方法，它具有以下声明：

```
setShadowPaint(java.awt.Paint paint); 
```

`paint`问题是：如何正确地将图像从磁盘加载到我的自定义图像？我在互联网上找到的所有例子都没有说明这些时刻。

# iphone - 比较两个 NSArray 的最佳实践并用两个都没有出现的对象填充第三个？

> ID：14363687
> 
> 赞同：0
> 
> 时间：2013-01-16T16:59:40.763
> 
> 标签：iphone, ios, objective-c, xcode, nsmutablearray

我是 iOS 和 Objective C 的新手，我正在尝试想出一些我可以做的事情来实验和自学。我也想学习以正确的方式做事，这在自己学习时可能会很困难。

我想要 2 个可能看起来像的 NSArray

Array1： - Object1：@“Hello” - Object2：@“This” - Object3：@“Is a” - Object4：@“Test”

Array2: - Object1: @"Hello" - Object2: @"Is a"

并创建第三个数组，其中包含那些没有出现在我比较过的两个数组中的对象，所以结果是

Array3: - Object1: @"This" - Object2: @"Test"

我想我可以遍历每个数组并使用 foreach 遍历每个对象，它将每个对象与第二个数组中的对象列表进行比较，如果找不到，则将 array1 的对象添加到 array3。

我是内存管理的新手（我知道 ARC 就在这里，但我现在正努力成为老派，我到处都说这是一项重要的学习技能）所以我只是想找出是否有更好的方法去做这个。

提前感谢您的帮助，干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:19:48.367

您可能想要使用集合进行操作。

目标 C 中的对称差异：

```
NSSet *set1 = [NSSet setWithObjects:@"Hello", @"This", @"Is a", @"Test", nil];
NSSet *set2 = [NSSet setWithObjects:@"Hello", @"Is a", nil];

NSMutableSet *notInSet1 = [NSMutableSet setWithSet:set2];
[notInSet1 minusSet:set1];
NSMutableSet *notInSet2 = [NSMutableSet setWithSet:set1];
[notInSet2 minusSet:set2];

NSMutableSet *symmetricDifference = [NSMutableSet setWithSet:notInSet1];
[symmetricDifference unionSet:notInSet2]; 
```

您应该为您的任务使用集合的原因是因为集合包含唯一的对象（即它们不能包含两个`@"42"` `NSString`对象），当您需要像交集、差集或并集这样的操作时，这是更可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:03:00.437

有很多方法可以做到这一点。如果您想使用框架数组方法来做到这一点，这可能是一个好方法：

```
NSArray *Array1 = [NSArray arrayWithObjects:@"One", @"Two", @"Three", nil];
NSArray *Array2 = [NSArray arrayWithObjects:@"Two", @"Four", @"One", nil];
NSMutableArray *Array3 = [NSMutableArray arrayWithArray:Array1];
[intermediate removeObjectsInArray:Array2]; 
```

你不需要关心释放这个数组，因为它们是从 arraywithObjects 和 arrayWithArray 自动释放的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:03:55.173

如果您要`NSString`在示例代码中使用对象，我将迭代第一个数组并将这些字符串作为键添加到`NSMutableDictionary`（例如`[dict setValue:[NSNumber numberWithBool:YES] forKey:str_object_here];`）

创建第三个数组（您的最终输出，使用`[[NSArray alloc] initWithCapacity:min_count]`其中 min_count 是较小数组的大小）

然后迭代第二个数组并为每个项目检查它是否作为字典中的键存在，如果不将其添加到第三个（最终输出）数组中

由于字典针对键查找进行了优化（如果我没记错的话，应该是 O(1)，在内部正确使用散列），你正在从 O(N^2) 移动到 O(N)

# android - 未调用片段 onAttach/Create/CreateView 方法

> ID：14363688
> 
> 赞同：1
> 
> 时间：2013-01-16T16:59:43.603
> 
> 标签：android, android-fragments, nullpointerexception, initialization, android-support-library

我正在编写一个简单的`Activity`内容，它应该检索并显示`Fragment`包含 a 的一些数据`ListView`。问题是我无法访问，`ListView`因为`on*`似乎没有调用任何方法。

该片段有一个`LinearLayout`由`onCreateView`. `Activity`创建`Fragment`in并使用返回的 by将`onCreate`其添加到其布局中（附带说明：我使用的是 support-v4 库）。`FragmentManager``getSupportFragmentManager`

在//方法中添加一些`Log.d`调用清楚地表明它们根本没有被调用。`onAttach``onCreate``onCreateView`

我究竟做错了什么？

活动：

```
public class CharactersActivity extends FragmentActivity {

    private MainCharactersFragment mainFragment = null;

    private String[] charnames = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // R.layout.characters contains only a LinearLayout with id characters_fragment_container
        setContentView(R.layout.characters);
        if (mainFragment == null) {
            mainFragment = new MainCharactersFragment();
            //Add the fragment to the activity's layout.
            //Taken from Google's tutorials.
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.characters_fragment_container, mainFragment).commit();
            //I'd expect onCreateView to be called during this commit, but it is not called.
        }
        //Loads some data to display
        Intent intent = getIntent();
        String[] filenames = intent.getStringArrayExtra(PortableDnDActivity.CHARACTERS_FILENAMES);
        this.charnames = new String[filenames.length];
        for (int i=0; i < filenames.length; i++) {
            this.charnames[i] = getCharacterName(filenames[i]);
        }
    }

    @Override
    public void onStart() {
        // Set the ListAdapter to show the data.
        Log.d("MyLog", "           HERE            ");  // Shown by logs
        ListView view = (ListView) findViewById(R.id.main_characters_view); // This is null
        Log.d("MyLog", "The view is null:" + (view == null));
        mainFragment.setCharsAdapter(this, this.charnames);
        Log.d("MyLog", "                 HERE           2222"); //NOT shown by the logs
    } 
```

活动布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/characters_fragment_container"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
</LinearLayout> 
```

片段：

```
public class MainCharactersFragment extends Fragment {

    public ListView charsList;
    public Button newCharButton;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // The following is never shown in the logs
        Log.d("MyLog", "                HERE                ");
        View view = inflater.inflate(R.layout.main_characters_fragment, container, false);
        return view;
    }

    public void setCharsAdapter(Context ctx, String[] data) {
        // Raise NullPointerException because at this moment
        // findViewById(R.id.main_characters_view) returns null
        charsList.setAdapter(new ArrayAdapter<String>(ctx, R.id.main_characters_view, data));
    }
    @Override
    public void onAttach(Activity activity) {
        Log.d("MyLog", "            onAttach called           "); //Never shown
    }
} 
```

片段布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ListView android:id="@+id/main_characters_view"
              android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="0.5"
              />
    <Button android:id="@+id/new_character_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/new_character"
            />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:22:47.263

我认为 NPE 令人困惑。将其注释掉，`onStart()`以便您可以单独解决。

一旦你这样做了，你会看到你有几个跌倒的情况来调用该`super`方法。一进`MainCharactersFragment.onAttach()`一进`CharactersActivity.onStart()`。添加这两个调用，清理，然后重试。

鉴于这些更改，您的代码对我来说运行良好。

# machine-learning - 在决策树中计算熵（机器学习）

> ID：14363689
> 
> 赞同：8
> 
> 时间：2013-01-16T16:59:44.897
> 
> 标签：machine-learning, decision-tree

我确实知道计算熵的公式：

```
H(Y) = - ∑ (p(yj) * log2(p(yj))) 
```

换句话说，选择一个属性并为每个值检查目标属性值...所以 p(yj) 是节点 N 处模式在类别 yj 中的分数 - 目标值中的一个为真，一个为假。

但是我有一个数据集，其中目标属性是价格，因此是范围。如何计算这种数据集的熵？

（参考：[http](http://decisiontrees.net/decision-trees-tutorial/tutorial-5-exercise-2/) ://decisiontrees.net/decision-trees-tutorial/tutorial-5-exercise-2/ ）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T17:03:51.067

您首先需要以某种方式离散化数据集，例如将其以数字方式分类到多个桶中。存在许多离散化方法，有些是有监督的（即考虑目标函数的值），有些不是。[本文](http://www.math.upatras.gr/~esdlab/oldEsdlab/en/members/kotsiantis/discretization%20survey%20kotsiantis.pdf)概述了以相当笼统的术语使用的各种技术。对于更多细节，在 Weka 等机器学习库中有大量离散化算法。

连续分布的熵称为[微分熵](http://en.wikipedia.org/wiki/Differential_entropy)，也可以通过假设您的数据以某种方式分布（例如正态分布）来估计，然后以正态方式估计底层分布，并使用它来计算熵值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:12:25.343

同意 Vic Smith 的观点，离散化通常是一个不错的方法。根据我的经验，大多数看似连续的数据实际上是“块状”的，并且几乎没有丢失。

但是，如果由于其他原因不希望离散化，则还为连续分布定义熵（请参阅有关您最喜欢的分布的维基百科，例如 http://en.wikipedia.org/wiki/Normal_distribution]）。

一种方法是假设一种分布形式，例如正态分布、对数正态分布等，并根据估计的参数计算熵。我不认为玻尔兹曼熵（连续）和香农熵（离散）的尺度在相同的尺度上，所以不会混合它们。

# javascript - 使用 jQuery 添加 display:none; 当某件事是真实的并且具有一定的规模时？

> ID：14363693
> 
> 赞同：1
> 
> 时间：2013-01-16T16:59:51.633
> 
> 标签：javascript, jquery, width, screen

我想将我的代码中名为 text 的 div 更改为 diplay:none; 只要 div “#video-overlay-shadow 和 #video-overlay” 为真，并且当屏幕尺寸为 740 时，当它高于 740 时什么都不做，当它低于 460 时。我开始：

```
$(document).ready(function(){ window
var $window = $(window);

//display nav
var displayHide = true;

//on resize get widths
getWidths();
$window.resize(getWidths);

//set width of content to the needed widths
function getWidths()
{
    var browserWidth = $window.width();

    if ((browserWidth >=740) && (("#video-overlay-shadow, #video-overlay") == true))
    {
        //do somthing

    }
    else if((browserWidth >= 460) && (("#video-overlay-shadow, #video-overlay") == false))
    {
        //do something
    }
    else if((browserWidth < 740) && (("#video-overlay-shadow, #video-overlay") == false))
    {
        //do something
    }
}
//toggle nav
function toggleHide()
{
    $("#text").toggle();

}}); 
```

我想知道我是否走在正确的轨道上，或者任何人都可以看到代码中的错误？我不能使用媒体查询的原因是我需要确保“#video-overlay-shadow and #video-overlay”= true。

因此，只需添加我在尝试此之前所说的内容：

```
$(document).ready(function() {

var $window = $(window);

//display nav
var displayHide = true;

//on resize get widths
getWidths();
$window.resize(getWidths);

//set width of content to the needed widths
function getWidths()
{
    var browserWidth = $window.width();
    if(($("#video-overlay-shadow").length > 0) && ($(browserWidth >=740)))
                    {$("#hero-bg").css("display", "none");
                    }
                        else if(($("#video-overlay-shadow").length > 0) && ($(browserWidth <740)))
                        {
                        //do nothing
                        }

                        else if(($("#video-overlay-shadow").length > 0) && ($(browserWidth >=460)))//it exists
                        {
                            //do nothing
                        }
                        else if(($("#video-overlay-shadow").length <=0))
                        {
                        //do nothing
                        }
}}); 
```

但它仍然没有任何想法？就像它在代码中所说的那样，当 video-overlay-shadow 存在并且屏幕尺寸为 740-460 我想要 display:none 在#hero-bg 上，否则什么也不做。它现在只是设置 display:none; 一直在#hero-bg 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:20:19.713

为什么不能使用响应式网页设计来完成？在 css 文件中：

```
/* start css */

// some styles for all devices with max-width 460px

@media (min-width: 460px) and (max-width: 740px) {
  #video-overlay-shadow, #video-overlay {
    display: none;
  }
}

@media (min-width: 740px) {
  #video-overlay-shadow, #video-overlay {
    display: block;
  }
}

/* end css */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:05:18.607

你不能只问 JavaScript 是否`#video-overlay==true`. 要在 jQuery 中测试元素是否存在，请找到它的长度：

```
if ($('#video-overlay').length) {  // if no such div, length = zero = false 
```

要测试元素是否可见，请使用该选择器：

```
if ($('#video-overlay:visible').length) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:11:09.397

不知道你想在这里做什么 - 但这是我检查元素是否存在的方法

简单地：

* * *

```
$('#video-overlay-shadow').val() 
```

不是

```
(("#video-overlay-shadow, #video-overlay") == false) 
```

因为您使用的是 jquery 对象，而不是纯 JavaScript，所以它应该包含在 $

```
if((browserWidth < 740) && $("#video-overlay-shadow").val() && $("#video-overlay").val()){} 
```

所以我希望那更接近您的需求，但更多细节会很有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:04:55.803

您缺少`$`两个覆盖元素的 。目前您只是在测试一个字符串，这不是您想要的。假设覆盖只是输入，你想要：

```
$("#video-overlay-shadow").val() == true && $("#video-overlay").val() == true; 
```

如果您没有在其中存储任何其他真实值，则可以将其简化为：

`$("#video-overlay-shadow").val() && $("#video-overlay").val();`

此外，我会将这个值存储在一个变量中，而不是每次都查询它。

# c# - 获取 BitmapImage 对象的源路径

> ID：14363699
> 
> 赞同：1
> 
> 时间：2013-01-16T17:00:18.327
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml, bitmapimage

我有一个使用 MVVM、XAML 和 C# 的 Windows 8 项目。

我的一种方法目前是更新`ObservableCollection`Pictures 文件夹中的所有图像，转换为`BitmapImage`格式，这与我的 xaml 绑定以在`ListGrid`. 我遇到的问题是我希望使用 in 的`SelectedItem`属性`ListGrid`来允许用户打开 DoubleTapped 的图片 - 为此，我需要`BitmapImages`在我的`ObservableCollection`. 目前，当我尝试执行此操作时，该`UriSource`属性设置为 null。我做错了什么？

这是填充我的 ObservableCollection, "Images" 的方法：

```
 private async void FindRelatedImages()
        {
            FileOpenPicker picPicker = new Windows.Storage.Pickers.FileOpenPicker();
            List<string> fileTypeFilter = new List<string>();
            fileTypeFilter.Add(".png");
            fileTypeFilter.Add(".jpg");
            fileTypeFilter.Add(".jpeg");
            fileTypeFilter.Add(".gif");
            fileTypeFilter.Add(".bmp");
            var queryOptions = new QueryOptions(CommonFileQuery.OrderByName, fileTypeFilter);
            StorageFolder folderToGetPicsFrom = KnownFolders.PicturesLibrary;
            var query = folderToGetPicsFrom.CreateFileQueryWithOptions(queryOptions);
            IReadOnlyList<StorageFile> fileList = await query.GetFilesAsync();
            // Process results
            ObservableCollection<BitmapImage> newList = new ObservableCollection<BitmapImage>();
            foreach (StorageFile file in fileList)
            {
                // Process file
                BitmapImage src = new BitmapImage( uriSource : new Uri(file.Path));
               // src.UriSource = new Uri(file.Path, UriKind.Absolute);
                src.SetSource(await file.OpenAsync(FileAccessMode.ReadWrite));
                newList.Add(src);
            }
            Images = newList;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:26:55.663

我怀疑将任意文件的 BitmapImage.UriSource 设置为 new Uri(file.Path)) 正在做任何事情，并且通过调用 SetSource - 您基本上是在覆盖该错误设置。通常，如果您将 UriSource 设置为有效的源 - 您无需在之后调用 SetSource - 这是加载图像的两种不同方法。

除了使用 ObservableCollection，您还可以使用 ObservableCollection 之类的东西，其中 ItemViewModel 具有 BitmapImage 和 StorageFile 的属性。然后你就拥有了将路径或文件传递到其他地方所需的一切。再说一遍 - 为什么不通过双击传递 BitmapImage 本身呢？如果您需要将图像作为 WriteableBitmap 打开的路径 - 为什么不从 WriteableBitmap 开始。如果您出于任何其他原因需要该路径 - 您只需向您的 ItemViewModel 添加一个属性。

# android - 更新 Android SDK 工具后 AndroidPreCompiler 构建错误

> ID：14363700
> 
> 赞同：1
> 
> 时间：2013-01-16T17:00:25.273
> 
> 标签：android, android-sdk-tools

将我的 Android sdk 工具更新到 v21.0.1 后，我不断收到 AndroidPreCompiler 构建错误，每个项目都出现 NullPointerException。我可以创建一个新项目没问题，但是一旦我从损坏的项目中添加文件，它就会导致这个错误并且我的项目都没有构建。

有谁知道为什么会这样？也许最新的sdk工具有问题？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:06:26.637

我曾经遇到过完全相同的问题，结果与这个问题有关：[Android Pre Compiler error on 21.0.1 android sdk](https://stackoverflow.com/questions/14188650/android-pre-compiler-error-on-21-0-1-android-sdk)

接受的[答案](https://stackoverflow.com/a/14327874/1820695)张贴在那里：

> 21.0.1 中的 Android 预编译器似乎严重损坏，在 .svn 目录和 .DS_Store 文件以及没有文件扩展名的文件上崩溃。

是我的原因。如果可能，请尝试更新到较新的 ADT。

# background - 创建具有多个块的窗体背景

> ID：14363703
> 
> 赞同：1
> 
> 时间：2013-01-16T17:00:37.700
> 
> 标签：background

你好，这可能是一个愚蠢的问题，但我无法在这里找出问题..这是我用一个块填写表格的代码：

```
 private void drawBackground()
    {
        Graphics g = genPan.CreateGraphics();
        Image Block = Image.FromFile(@"C:\Users\Administrator\Desktop\movment V1\movment V1\images\BrownBlock.png");
        float recWidth = Block.Width; 
        // rectangle width didnt change the name from previous code, it's picture width.

        float recHeight = Block.Height;
        // rectangle Heightdidnt change the name from previous code, it's picture Height.

        float WinWidth = genPan.Width; // genPan is a panel that docked to the form

        float WinHeight = genPan.Height;

        float curWidth = 0; //indicates where the next block will be placed int the X axis
        float curHeight = 0;//indicates where the next block will be placed int the Y axis

        while ((curHeight + recHeight) <= WinHeight)
        {
            if (curWidth >= WinWidth / 3 || curWidth <= WinWidth / 1.5 ||
                curHeight >= WinHeight / 3 || curHeight <= WinHeight / 1.5)
            {
                g.DrawImage(Block, curWidth, curHeight, recWidth , recHeight );
            }
            curWidth += recWidth;
            if ((WinWidth - curWidth) < recWidth)
            {
                curWidth = 0;
                curHeight += 50;
            }
        }
    } 
```

如果我通过一个按钮启动这个函数，它会工作得很好。但是如果我在 InitializeComponent(); 之后启动函数 构造函数或 FORM 显示事件中的方法，当按钮仍在表单上时，它将执行 func 但是块背景将不可见，但灰色将是。但如果我删除按钮，背景将可见。=\

我不明白为什么会发生这种情况，如何解决它以及我做错了什么..谁能解释一下..？

# python - 我如何摆脱 QTabWidget 末尾的这条恼人的线

> ID：14363707
> 
> 赞同：1
> 
> 时间：2013-01-16T17:00:45.283
> 
> 标签：python, css, qt, pyside, qtabbar

所以我有一个相当简单的样式表来改变我的 Qt 应用程序中选项卡的外观（我使用的是 PySide，但如果有的话，它应该不会有太大的区别）；这里是：

```
QWidget{
    background: gray;
}

QTabBar{
    background: gray;
}

QTabBar::tab {
    background: lightgray;
    padding: 10 10 5 10;
    font-size: 14px;
    color:  gray;
}

QTabBar::tab:selected {
    background:  gray;
    color: white;
} 
```

如果我只是使用这个；然后我在标签的末尾看到一条丑陋的线 - 像这样：（这是应用程序的右上角 - 如果你调整它的大小使其超出标签的大小）

![在此处输入图像描述](../Images/ca780d5fd8dfa20dcf2cfbb2cc2a43aa.png)

如果我将以下 CSS 添加到样式表中：

```
QTabWidget::pane{
} 
```

我明白了：

![在此处输入图像描述](../Images/410dbf7604ce7badb725e0503af5fb7c.png)

这可能看起来解决了问题，但它没有 -

在不同颜色的背景下是相同的：

![在此处输入图像描述](../Images/18fdd8d0714ba502466f635736eec97b.png)

然后我想也许它是`lightgray`在使用的另一种颜色，这会更好，因为`lightgray`无论如何我都希望那部分是，所以我将`QTabBar`背景的颜色更改为`lightgray`。

![在此处输入图像描述](../Images/13ef1bb29af4b0047504544fc7fe8788.png)

仍然没有成功。

线条的颜色既不是`gray`也不是`lightgray`，但这是我使用的仅有的两种颜色。

**我该如何摆脱这条线？**

我宁愿使用样式表解决方案，将其排除在程序初始化之外——因为这似乎是一个混乱的解决方案。

编辑：这是使用 qt 设计器和 qt 4.6.2。我无法轻松升级 qt 版本。

# google-chrome - jQuery mousemove 解决方法

> ID：14363708
> 
> 赞同：1
> 
> 时间：2013-01-16T17:00:49.967
> 
> 标签：google-chrome, mousemove

我正在寻找 Chrome 上 .mousemove() 方法的解决方法。这是一个已知问题。

即使鼠标静止，Chrome 也会不断触发 mousemove。

我不能使用 .hover() 方法，因为该区域是窗口的高度和宽度......

我考虑检查鼠标光标坐标并检查它们是否改变，但我真的不知道从哪里开始。

> > 我向 Chromium 项目报告： [http ://code.google.com/p/chromium/issues/detail?id=170631](http://code.google.com/p/chromium/issues/detail?id=170631)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T13:28:51.250

仍然在 Chrome 版本 29.0.1547.66 m 中遇到问题并寻找“真正的”解决方案。到目前为止没有发现任何东西。就像你说的，我开始编写一个函数来检查鼠标是否真的移动了。

特别是，您可以根据自己的需要更改一些设置。

```
var my_mouseMovements = {
    readNewPos : true, //indicates if time since last check are elapsed
    oldPos : [0,0], //pos from the last check
    minX_Distance: 10, //only look at movements thats are big enough(px)
    minY_Distance: 10, //only look at movements thats are big enough(px)
    timeBetweenEachCheck : 100, //Just checking every x ms for movements
    saveNewPos : function(pos,callback){
    if(this.readNewPos === true)
    {
        this.readNewPos = false;

        var xDistance = pos[0] - this.oldPos[0];
        var yDistance = pos[1] - this.oldPos[1];
        //Just making the distances positive
        xDistance = xDistance < 0 ? -xDistance : xDistance;
        yDistance = yDistance < 0 ? -yDistance : yDistance;

        //Check if mouse moved more then expected distance
        if(xDistance >=  this.minX_Distance || yDistance >= this.minY_Distance)
        {
            console.log("Mouse has moved a lot since last check!");
            if(callback !== undefined)
            {
                callback();
            }
        }

        this.oldPos = pos;

        var that = this;
        //reset readNewPos after a while
        setTimeout(function(){
            that.readNewPos = true;
        },this.timeBetweenEachCheck);
    }
    else //Just for debug right now
    {
        console.log("the last time was not far away");
    }
}
};

jQuery('body').mousemove(function(e){
    my_mouseMovements.saveNewPos([e.pageX,e.pageY]);
}); 
```

# knockout.js - KnockoutJS - 如何一般更新可观察值

> ID：14363720
> 
> 赞同：0
> 
> 时间：2013-01-16T17:01:28.040
> 
> 标签：knockout.js, knockout-2.0, ko.observablearray

我有一个第 3 方自定义 jquery 组件，它覆盖了一个复选框并为它提供了一个更漂亮的“切换”外观。该组件有一个函数回调，只要用户单击该组件就会发生。

我如何使用事件目标设置可观察值，而不知道具体在我的视图模型中调用事件的哪个属性。

例如：

html是：

```
<input type="checkbox" id="cb123" data-bind="checked: IsDeleted" />
<input type="checkbox" id="cb345" data-bind="checked: IsValid" /> 
```

Javascript 回调如下所示：

```
$(document).ready(function() {
     .... Code snipped  ....
     var viewModel = ko.mapping.fromJS(myModel);
     ko.applyBindings(viewModel);

      $(':checkbox').toggleCheckbox({
           onChange: function($el, value, e) {
              var ctx = ko.contextFor(e.target);    // Gets me the knockout context object.

              // How do I set the appropriate observable value from here?
              // In this case either one of the checkboxes could have been triggered.
           }
      });
}); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:49:21.490

获取 observable 的一种方法是解析 data-bind 属性本身：

```
// inside your event handler
var viewModel = ko.dataFor(e.target);
var bindValue = $(e.target).data('bind');
// in case you applied 'checked' binding only: data-bind="checked: IsDeleted"
var observableName = $.trim(bindValue.split(':')[1]);

// get value
var _value = viewModel[observableName]();
// set value: viewModel[observableName](newValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:01:02.560

考虑使用自定义 bindingHandler 来初始化 toggleCheckbox。

```
<input type="checkbox" id="cb123" data-bind="toggleCheckboxChecked: IsDeleted" />
<input type="checkbox" id="cb345" data-bind="toggleCheckboxChecked: IsValid" /> 
```

Javascript：

```
ko.bindingHandlers.toggleCheckboxChecked = {
   init: function (element, valueAccessor) {
       // This is just to set the initial value of the checkbox
       element.checked = ko.utils.unwrapObservable(valueAccessor());

       // Then turn the element into an enhanced checkbox
       $(element).toggleCheckbox({
           onChange: function($el, value, e) {
              var checkedBinding = valueAccessor();
              checkedBinding(value);
           }
       });
   },
   update: function (element, valueAccessor) {
       // this is invoked by knockout when checkedBinding changes, so
       // to get a two-way-binding you need to update the checkbox component
       // here with ko.utils.unwrapObservable(valueAccessor())
   }
} 
```

[官方页面](http://knockoutjs.com/documentation/custom-bindings.html)上有一些关于自定义绑定处理程序的信息，但我也推荐 rniemeyer 的博客，尤其是[这篇文章](http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html)。

# matlab - 将矩阵缩放到新范围

> ID：14363723
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:01:35.570
> 
> 标签：matlab, matrix

> **可能重复：**
> [MATLAB：如何将向量归一化/反归一化以范围 [-1;1]](https://stackoverflow.com/questions/4684622/matlab-how-to-normalize-denormalize-a-vector-to-range-11)
> [matlab 将矩阵数据重新缩放为 -1 到 1](https://stackoverflow.com/questions/5641232/matlab-rescale-matrix-data-to-1-to-1)

考虑一个 100x200 矩阵`A`，是否有一个`builtin`函数（或一组`builtin`函数）可以将范围设置`A`为任意比例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:16:14.137

这符合条件吗？

```
R = [.5 .9];
dR = diff( R );

A =  A - min( A(:)); % set range of A between [0, inf)
A =  A ./ max( A(:)) ; % set range of A between [0, 1]
A =  A .* dR ; % set range of A between [0, dRange]
A =  A + R(1); % shift range of A to R 
```

# c# - 如何在 UpdatePanel 上禁用自动刷新？

> ID：14363728
> 
> 赞同：1
> 
> 时间：2013-01-16T17:01:50.313
> 
> 标签：c#, asp.net, .net

在 UpdatePanel 中，我有很多复选框，我需要将其“ `AutoPostback`”设置为“ `true`”。

问题：

假设我在面板中有 100 个复选框，并且我正在勾选 #50 复选框，然后控件会自动转到页面顶部，我必须再次下来以勾选另一个复选框（比如 #60）。

这对用户来说真的很烦人，我被要求停止这种自动滚动，以便他们可以留在同一个地方并勾选另一个复选框。我怎样才能让我的网页每次都在顶部？

有没有办法禁用这种行为？我猜 UpdatePanel 可能是问题所在。如果是这样，我该如何禁用自动引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:08:56.737

停止使用 UpdatePanel，或将 UpdateMode 设置为**Conditional**。

如果**UpdateMode**属性设置为**Conditional**，则 UpdatePanel 控件的内容会在以下情况之一为真时更新：

*   当回发是由该 UpdatePanel 控件的触发器引起时
*   当您显式调用 UpdatePanel 控件的 Update 方法时
*   当 UpdatePanel 控件嵌套在另一个 UpdatePanel 控件中并且父面板被更新时
*   当**ChildrenAsTriggers**属性设置为 true 并且 UpdatePanel 控件的任何子控件都会导致回发。嵌套 UpdatePanel 控件的子控件不会导致对外部 UpdatePanel 控件的更新，除非它们被明确定义为父面板的触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T10:26:04.700

在您的页面指令中添加以下内容

维护ScrollPositionOnPostback="true"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:09:14.027

没有内置的方法可以做到这一点。您必须编写一些 Javascript 函数来完成此操作：

有一个隐藏字段让我们说“hfScrollvalue”（保存和重置滚动位置）

*   编写一个JS方法“GetScrollPosition”，获取面板的滚动位置并保存在你的隐藏字段中

*   编写一个JS方法“SetScrollPosition”从隐藏字段中获取滚动位置并设置回面板

*   然后，您可以在请求结束时调用 SetScrollPosition 方法，为此添加一个处理程序

*   请求结束后，更新面板再次设置滚动位置。因此，您可以在将值设置为面板滚动位置时稍作延迟。您可以通过使用 Javascript 的 setTimeout 方法来做到这一点。所以通过这个延迟，您保存的位置将在 ajax 处理完成后设置在面板上

    ```
    function GetScrollPosition() {
        document.getElementById('<%= hfScrollvalue.ClientID %>').value = document.getElementById('<%= Panel1.ClientID %>').scrollTop; 
    ```

    }

    函数 SetScrollPosition() {

    ```
     document.getElementById('<%= Panel1.ClientID %>').scrollTop = document.getElementById('<%= hfScrollvalue.ClientID %>').value; 
        } 
    } 

    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequest); 

    function EndRequest(sender, args) { 

        setTimeout('SetScrollPosition()', 60); 
    } 
    ```

    如果您正在使用一个位于 UpdatePanel 内的 TextBox，它也与 Timer 相关联，那么您可以使用以下内容：

    ```
    Sys.Application.add_init(DownloadInit);

    function DownloadInit(sender) {

        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequest);

    }

    function SetScrollPosition() {

        var textArea = document.getElementById('<%=TextBox1.ClientID%>');

        textArea.scrollTop = textArea.scrollHeight;

    }

    function EndRequest(sender, args) {

         SetScrollPosition();

    } 
    ```

# css - Rails：Asset Pipelin / SASS 的问题

> ID：14363731
> 
> 赞同：0
> 
> 时间：2013-01-16T17:01:55.097
> 
> 标签：css, ruby-on-rails, sass, asset-pipeline

我对 Rails 资产管道有一个奇怪的问题。在我的`assets/stylesheets`文件夹中有一个普通的 application.css 以及一些 gmaps4rails css 文件，并且有一个包含 application.sass 的`sass`子文件夹。现在一定发生了一些事情，例如当我将主体光标更改为指针时，使用 rails s 在本地打开网站，然后在包含的已编译 application.css 中没有任何变化。我在哪里可以查看为什么会突然发生这种情况？应该如何包含 sass 和 css 文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:23:32.123

您的意思是当您执行“查看页面源代码”之类的操作时，您在 css / sass 文件中所做的更改不会得到反映。

一件事，您应该在开发模式下禁用资产流水线。它会预编译资产，有时资产无法正确加载。我什至注意到闪光灯没有被清除！但是你可以试试这个：

1) 清除浏览器缓存。

2) 在您的 rails app 文件夹中，转到 tmp/ 并删除缓存文件夹。

3) 现在，重新启动您的 Rails 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:13:31.983

如果 application.css 用于`//=require_tree`加载样式表，则应重命名 sass 文件

```
sass/appplication.css.sass 
```

只有 Sass 识别纯 sass 文件。Sprockets 依赖于最后一个扩展名，因此无法识别样式表。

但是，您也可以依靠 sass 来包含其他文件：

```
# application.sass.css
//= require_self

@import "sass/application"; 
```

并保持 sass 文件不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:39:07.463

根据您的环境（特定于生产）， config.assets.compile = true 应该会有所帮助。不建议这样做。

首选，运行

```
 rake assets:precompile 
```

在每次资产管道更改之后。

# html - 在 Bootstrap 中创建类似表格的表单

> ID：14363735
> 
> 赞同：0
> 
> 时间：2013-01-16T17:02:10.527
> 
> 标签：html, css, twitter-bootstrap

我有一个应该如下所示的表格：

```
Label:         <input field> Explanation of this field
Another Label: <input field> Lengthy explanation, must wrap. 
```

我正在尝试在 Twitter Bootstrap 中执行此操作，而不使用实际的`<table>`. 表格可以防止字段在窄屏幕（如移动设备）上换行。

标准的 Bootstrap 语法是这样的：

```
<label>Label name</label>
<input type="text" placeholder="Type something…">
<span class="help-block">Example block-level help text here.</span> 
```

有什么方法可以让这些字段变为水平状态？“form-inline”类没有削减它，因为标签没有对齐，“form-horizo​​​​ntal”类没有工作，因为我无法让class =“help-block”放置帮助文本在右边。

也许我错过了一个技巧？还是第三方的一点 css 来做更好的表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:18:25.197

给你，试试这个（仅使用 Bootstrap 类）[http://jsfiddle.net/jonschlinkert/pngWh/11/](http://jsfiddle.net/jonschlinkert/pngWh/11/)

（只需删除`.warning`, `.info`, `.error`,`.success`类即可删除验证状态。我将它们留在那里以便将我的示例与文档关联起来更容易）

这是它的样子：

![引导表单验证](../Images/4029f30af6a42ec46ee6eb593f942fb5.png)

# wpf - 如何从 DataGridColumn 绑定的代码中获取 UpdateSourceTrigger 设置？

> ID：14363737
> 
> 赞同：1
> 
> 时间：2013-01-16T17:02:17.417
> 
> 标签：wpf, data-binding, code-behind

我有一个具有 TextColumn 的 DataGrid 控件

```
 <DataGrid ItemsSource="{Binding Path=Dvm.Data}"
              Name="GrdName"
              AutoGenerateColumns="False"
              Margin="5"
              SelectionMode="Single">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Column 1"
                                Binding="{Binding Path=Col1, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                Width="*"/>
        </DataGrid.Columns>
    </DataGrid> 
```

我有一个自定义控件，需要我测试 UpdateSourceTrigger 设置是什么，但我无法从代码中访问它。我想做这样的事情：

```
BindingOperations.GetBindingExpression(GrdName.Columns[0], DataGridTextColumn.BindingProperty); 
```

但是，BindingProperty 实际上并不是一个依赖属性，所以我不能这样做。有谁知道我将如何获取该列的 Binding 属性的绑定表达式，以便获取 UpdateSourceTrigger 设置？

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:34:56.067

该`Binding`属性不是a `DependancyProperty`，因此您必须使用普通的公共属性访问。因此，您必须进行一些转换，因为您必须转换为access中的`Binding`属性`DataGridTextColumn`类型。并且因为是从你可以转换的，使它更通用一点`BindingBase``Binding``UpdateSourceTrigger``DataGridTextColumn``DataGridBoundColumn`

像这样的东西应该工作：

```
 var columnUpdateSourceTrigger = ((GrdName.Columns[0] as DataGridBoundColumn).Binding as Binding).UpdateSourceTrigger; 
```

# javascript - JavaScript 库是否应该使用已弃用的注解？

> ID：14363740
> 
> 赞同：19
> 
> 时间：2013-01-16T17:02:21.693
> 
> 标签：javascript, deprecated, deprecation-warning

显然，何时弃用和何时删除取决于开发人员，但我想知道如何*警告*开发人员 JavaScript 函数已被弃用？

一些流行的语言（[Java](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Deprecated.html)、[C#](https://stackoverflow.com/questions/314505/how-to-mark-a-class-as-deprecated)、[Python](http://docs.python.org/2/library/warnings.html)）以某种形式支持语言级别的弃用。

但是，对于 JavaScript，我找不到任何标准方法可以让开发人员指示函数已被弃用（在代码中）。我能做的最好的就是遵循（大量）发行说明。

例如，grepping jQuery 1.8 的完整源代码显示最少的内联注释：

```
# curl http://code.jquery.com/jquery-1.8.0.js | grep -i depre
// jQuery.support.boxModel DEPRECATED in 1.8 since we don't support Quirks Mode
// *** attrChange attrName relatedNode srcElement  are not normalized, non-W3C, deprecated, will be removed in 1.8 ***
// Some plugins are using, but it's undocumented/deprecated and will be removed.
// Deprecated
// Limit scope pollution from any deprecated API
// Deprecated, use jQuery.browser.webkit instead 
```

W3C 和 MDN 似乎没有标准方法或提供有关如何处理此问题的建议。

我发现的最好的是 JSDoc 的[`@deprecated`](http://code.google.com/p/jsdoc-toolkit/wiki/TagDeprecated)标签。

有谁知道 JavaScript*是否*有我忽略的弃用注释？有没有更好或更常见的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T17:28:02.140

```
console.log('This function is deprecated.'); 
```

这就是 jQuery Migrate（用于 1.8 -> 1.9 升级）如何帮助人们升级他们的代码。

从他们的[维基](https://github.com/jquery/jquery-migrate/blob/master/warnings.md)：

> 为了让开发人员在迁移旧 jQuery 代码时识别和修复兼容性问题，插件的开发（未压缩）版本在调用其任何功能时都会生成控制台警告消息。对于每条唯一消息，消息仅在控制台上出现一次。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T17:13:46.787

基本上没有*办法*弃用方法/函数。由开发人员处理已弃用的成员。

我猜唯一可以做的就是尽最大努力记录已弃用的函数/方法，并[`@deprecated`](http://usejsdoc.org/tags-deprecated.html)在源代码文档中使用标签。

然后，一些编译器（如果我没记错的话，Google Closure Compiler 会这样做）和高级 IDE，可以使用此标记来验证已编译的源代码并在使用某些已弃用的函数时发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-20T20:59:21.607

# 使用`deprecate()`功能

除了 JSDoc 的标签之外，您还可以使用流行的[util-deprecate包：](https://github.com/TooTallNate/util-deprecate)[`@deprecated`](http://usejsdoc.org/tags-deprecated.html)

```
import deprecate from "util-deprecate";

/**
 * @deprecated Use bar() instead
 */
const foo = deprecate(function () {

}, "foo() is deprecated, use bar() instead"); 
```

用户看到：

```
foo();
// foo() is deprecated, use bar() instead
foo();
foo(); 
```

这不是真正的标准，但它基于 Node.js[`util.deprecate()`](https://nodejs.org/api/util.html#utildeprecatefn-msg-code)函数。

您可能需要像 Webpack、Browserify、Rollup 等捆绑器来为浏览器捆绑 npm 包。

# google-analytics - 如何阻止 HTML 源代码编辑器剥离 Google Analytics 事件跟踪代码？

> ID：14363741
> 
> 赞同：1
> 
> 时间：2013-01-16T17:02:25.513
> 
> 标签：google-analytics, plone

我正在尝试使用 TinyMCE 编辑器的 HTML 源视图将事件跟踪代码（onClick="gaq.push();" 部分）添加到页面内容区域内的链接 HTML。一旦我保存页面或切换回可视化编辑器，事件跟踪就会从链接的 HTML 中删除。

在搜索中，我发现其他 CMS 不得不更改其 HTML 过滤器设置。

我试图找出的是如何在不将标签列入白名单的情况下阻止事件跟踪代码被剥离，这是 Plone 中的全局设置？

使用：克隆 4.2.1；异步 GA 代码已在现场并正在运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:19:45.073

我认为您可以在 Zope 管理界面中的“引擎盖”下配置它。

1.  转到`Site Setup`并单击`Zope Management Interface`。`/manage`或者，如果您位于门户的根目录，则在 URL 上附加 a 。

2.  转到`portal_transforms`并单击`safe_html`转换列表。

3.  表单应该有一个标记`remove_javascript`为默认设置为的项目`1`。通过将其设置为 取消设置此选项`0`。

4.  单击否保存此表格`Submit Query`。

要使其最终发挥作用需要考虑的几点：

*   您需要刷新对象缓存和/或重新启动 Zope 服务器。它在转换的顶部进行了描述`safe_html`。

*   TinyMCE 不会显示属性。您需要在没有富文本编辑器的情况下编辑文本并保存文档。您可以通过单击`Edit without visual editor`编辑页面上编辑器下方的链接来执行此操作。

*   这就**带来了安全风险**。最好将这样的功能实现为 viewlet，并在页面上需要此功能时让 viewlet 呈现。

底线是：您可以启用它，这是有风险的，并且有更好的方法来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T11:27:56.827

跟进 romanofski 的回答——对于任何像我一样对`Edit without visual editor`如果该链接不可用感到困惑的人。您可以转到`Site setup > Editing control panel`或`http://yoursite.com/@@editing-controlpanel`，将默认编辑器临时设置为`None`，在您想要打开 js 的页面或 portlet 上进行编辑，然后将其切换回`TinyMCE`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:07:10.667

更好的方法是使用collective.googleanalytics，它使用jquery 来注入额外的标签，并有一个可插入的框架来定制注入的内容。这是一种安全且可扩展的方式来执行此类操作。

# documentation - 我可以使用 Kinect 在 8'x6' 墙上跟踪机器人吗？

> ID：14363744
> 
> 赞同：0
> 
> 时间：2013-01-16T17:02:37.447
> 
> 标签：documentation, kinect, robotics

我有一个轻型机器人，它以磁性方式悬挂在金属墙上。我正在尝试追踪它的位置。

如果机器人是 6"x6"（x4" 深），Kinect 测距仪是否有足够的范围和分辨率来跟踪它在 8'x6' 墙上的任何位置？如果是，我应该期待什么样的错误？

我在硬件上找不到任何像样的文档。如果有人可以链接到一些，我可以处理数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:28:07.967

是的，但使用 Kinect 不会比其他摄像头系统显着受益。

Kinect 的 RGB 摄像头以 1280x960 分辨率存储 3 个通道（[来源](http://msdn.microsoft.com/en-us/library/jj131033.aspx)）。提取您需要的数据就足够了，但您可能不需要那么高的分辨率。此外，具有同样高（或更高）分辨率的相机可能会更便宜。

红外摄像头和深度信息可能不会为您提供任何有用的信息，因为听起来您的机器人总是靠墙。

考虑到这一点，Kinect API（官方或第三方）不会给你任何东西。这些 API 需要人类，并将相应地处理信息。他们无法跟踪任意 blob，除非你告诉它如何（所以，再次......使用 Kinect 没有优势）。

您最终需要使用[OpenCV](http://opencv.willowgarage.com/wiki/)等库来帮助跟踪机器人。OpenCV 不在乎您使用的是 Kinect 还是普通的旧网络摄像头。

**编辑：**

如果您的照明条件是可变的，您可以使用 IR 和深度数据。Kinect 绝对可以看到机器人，但如上所述，API 中的任何内置算法都无法帮助您。您可以访问原始状态的深度点数据以查找和跟踪机器人。由于深度数据，您既可以“看到”机器人，也可以通过查看 z 坐标来定位它（例如，假设机器人是墙上唯一的东西，任何不等于墙壁的 z 坐标都是可能是机器人）。

# node.js - 需要来自内存而不是磁盘的模块 - 这可能吗？

> ID：14363746
> 
> 赞同：2
> 
> 时间：2013-01-16T17:02:44.183
> 
> 标签：node.js, module, require

我想`require`从内存中获取 Node.js 模块，例如因为它是在运行时生成的或从网络流中接收的。

这可能吗？

您如何解决此问题（当然，无需写入磁盘并从那里加载）？

基本上，例如：

```
var code = 'module.exports = { foo: "bar" };';
var obj = require(code);
console.log(obj.foo); // => bar 
```

我目前能想到的唯一方法是使用该`eval`函数，例如：

```
var myModule = {};
eval(
  '(function (module) {' +
  '  var local = 5;' +
  '  module.exports = {' +
  '    foo: \'bar\'' +
  '  };' +
  '  module.exports.baz = \'baz\';' +
  '})(myModule)'); 
```

评估后，`myModule.exports`包含导出的对象：

```
{
  foo: 'bar',
  baz: 'baz'
} 
```

并且模块内应该是本地的任何东西都保持在本地。

因此，您可以创建一个函数`require2`，例如：

```
var require2 = function (code) {
  var temp = {};
  eval('(function (module) {' + code + '})(temp);');
  return temp.exports;
}; 
```

无论如何，我对更好的想法感兴趣...... :-)

PS：能够从流中请求将很棒:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:14:05.350

在没有更好的主意的情况下，我现在采用了我在问题中已经描述的方法，并进行了一些调整，但总体思路是：

```
var require2 = function (code) {
  var temp = {};
  eval('(function (module) {' + code + '})(temp);');
  return temp.exports;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T20:22:10.970

这已经在[这里得到了回答：](https://stackoverflow.com/questions/17581830/load-node-js-module-from-string-in-memory)

但是，您可以在 Github的[require-from-string](https://github.com/floatdrop/require-from-string)包中找到更完整的实现。

TL;DR 是您使用 node.js 中的[Modules](https://nodejs.org/dist/latest-v7.x/docs/api/modules.html)包从字符串 _compile 代码。

# html - Web 解析器问题

> ID：14363754
> 
> 赞同：0
> 
> 时间：2013-01-16T17:03:26.653
> 
> 标签：html, parsing, jsoup

我是 Java 的新手，所以我为我在这一点上缺乏大量的主题而道歉。我正在尝试编写一个 html 解析器，它分析并返回来自以下 URL 的元素的数据：[http](http://en.wikipedia.org/wiki/Neurons) ://en.wikipedia.org/wiki/Neurons 。

运行程序时，我不断收到此错误消息：

```
Exception in thread "main" java.io.FileNotFoundException: src/product.txt`: (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at org.jsoup.helper.DataUtil.load(DataUtil.java:36)
    at org.jsoup.Jsoup.parse(Jsoup.java:88)
    at ParserPractice2.main(ParserPractice2.java:16) 
```

我当前的代码如下所示：

```
import java.io.File;
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.parser.*;
public class ParserPractice2 {

    public static void main(String[] args) throws IOException {

        File input = new File ("src/product.txt`:");

        Document doc = Jsoup.parse(input, "UTF-8", "http://en.wikipedia.org/wiki/Neurons");

        Element content = doc.getElementById("bodyContent");
    }}*

Any help/feedback would be greatly appreciated by this noobie =)Thanks! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:54:50.313

此文件不存在：

```
new File ("src/product.txt`:"); 
```

也许你的意思是`"src/product.txt"`？

# c# - 合并除重复项外的 2 个列表

> ID：14363760
> 
> 赞同：0
> 
> 时间：2013-01-16T17:03:47.430
> 
> 标签：c#, asp.net, linq, list

我还有一个问题要问你。
我必须合并 2 个列表，不包括重复项。

这是我的代码：

```
private List<BudgetCommessa> UnisciListeSenzaDuplicati(List<BudgetCommessa> p_listBudgetCommessaEsistente, List<BudgetCommessa> listBudgetCommessaDaAggiungere)
{
    //restituisco lista verificata senza doppioni
    //List<BudgetCommessa> listaUnita = new List<BudgetCommessa>();

    List<BudgetCommessa> listaUnita = 
    p_listBudgetCommessaEsistente.Concat(listBudgetCommessaDaAggiungere.Except(p_listBudgetCommessaEsistente)).ToList();
    /*p_listBudgetCommessaEsistente.Union(listBudgetCommessaDaAggiungere).ToList();*/

    return listaUnita;
} 
```

我也试过：

```
List<BudgetCommessa> listaUnita = 
p_listBudgetCommessaEsistente.Union(listBudgetCommessaDaAggiungere)
                             .Distinct().ToList(); 
```

和：

```
List<BudgetCommessa> listaUnita = 
p_listBudgetCommessaEsistente.Union(listBudgetCommessaDaAggiungere).ToList(); 
```

（假设 Union() 方法已经排除了重复行）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T17:39:59.377

您在列表中撅嘴的类必须覆盖 Equals 和 GetHashCode。我认为实现 IEquatable 或 IEqualityComparer 也可能有效。

# ios - Adobe AIR IOS NSZombieEnabled

> ID：14363764
> 
> 赞同：0
> 
> 时间：2013-01-16T17:03:51.377
> 
> 标签：ios, debugging, memory, air, nszombieenabled

我正在尝试解决我的 adobe air ios 应用程序的内存问题，但遇到了很多麻烦。我在论坛等中读到，尝试在 ios 中查找内存问题的最佳方法是设置 NSZombieEnabled。

我想知道是否有任何方法可以为 adobe air ios 应用程序设置此标志。我对此表示怀疑，但我想我会问。

谢谢

# python - 如何在查询中使用引用键？

> ID：14363766
> 
> 赞同：0
> 
> 时间：2013-01-16T17:03:53.960
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有这两个模型：教程和章节。章节对它们所属的教程有一个重要的参考。现在我试图列出属于特定教程的所有章节，但我无法让查询工作：

```
class TutView(FuHandler):
    def get(self):
        tutKey = self.request.get('tut_key')
        tut = db.Key.from_path('Tutorial', tutKey)
        chaps = db.GqlQuery("SELECT * FROM Chapter " +
                            "WHERE __key__ = KEY('Tutorial', :1)", tut)
        self.render('tutView.html', chaps=chaps) 
```

运行时出现此错误：

```
BadArgumentError: Expected an integer id or string name as argument 2; 
received datastore_types.Key.from_path(u'Tutorial', u'<bound method 
Tutorial.key of <main.Tutorial object at 0x00............. 
```

* * *

章节型号：

```
class Chapter(db.Model):
    tutorial = db.ReferenceProperty(Tutorial, collection_name='chapters')
    title = db.StringProperty(required=True)
    content = db.TextProperty(required=True) 
```

教学模型：

```
class Tutorial(db.Model):
    title = db.StringProperty(required=True)
    presentation = db.TextProperty(required=True) 
```

* * *

更新：我设法没有错误，但没有得到任何结果（所以，可能是错误的）：

```
chaps = db.GqlQuery("SELECT * FROM Chapter " + 
                    "WHERE __key__ = KEY('tutorial', :1)", str(tutKey)) 
```

update2：问题可能出在我存储或检索 tutKey 的方式上。我正在获取带有 URL 的密钥......这可能不起作用......但我不知道其他方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:22:49.267

您不需要查询即可从键返回实体，只需使用：

```
chaps = Tutorial.get(tut).chapters 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:28:29.707

`KEY()`GQL 函数用于基于两个参数创建密钥：实体和名称/id 。如果您查看您的代码，您将看到您将`db.Key`对象作为参数传递给它。因此，错误消息：

```
Expected an integer id or string name as argument 2; 
received datastore_types.Key.from_path(u'Tutorial', ...) 
```

此外，您需要针对实体的`tutorial`属性进行测试`Chapter`，而不是针对它自己的`__key__`.

我不使用 GQL，而是使用 Query 对象。您直接向他们提供`db.Key`对象，所以我认为这应该有效：

```
chaps = db.GqlQuery("SELECT * FROM Chapter " +
                        "WHERE tutorial = :1", tut) 
```

如果没有，您可以随时尝试：

```
chaps = db.GqlQuery("SELECT * FROM Chapter " +
                        "WHERE tutorial = KEY('Tutorial', :1)", tut.id() or tut.name()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:39:26.393

在本地启动应用程序并运行交互式控制台：

```
http://127.0.0.1:8080/_ah/admin/interactive 
```

将下面的代码复制并粘贴到控制台中您可以轻松尝试不同的事情并打印出结果

```
from google.appengine.ext import db

class Tutorial(db.Model):
    title = db.StringProperty(required=True)
    presentation = db.TextProperty(required=True)

class Chapter(db.Model):
    tutorial = db.ReferenceProperty(Tutorial)
    title = db.StringProperty(required=True)
    content = db.TextProperty(required=True)

a = Tutorial(title="First tut", presentation="first")
a.put()

print a
print a.key().id()

b = Chapter(tutorial=a, title="tut2", content="lots of words")
b.put()

print b
print b.key().id()

chap = Chapter.all().filter("tutorial =", a).fetch(1000)

for i in chap:
  print i.tutorial.title 
```

# javascript - 是否可以使用 Javascript 从网络文件系统读取文件？

> ID：14363767
> 
> 赞同：1
> 
> 时间：2013-01-16T17:03:55.387
> 
> 标签：javascript, html, nfs

因此，我有一个硬件可以收集大量数据，并根据某些配置将其作为二进制数据写入某个文件。可能是机器本地的，但可能写入某些共享 NFS。

此外，系统有 Apache 并提供一些状态和配置页面。我正在开发一个应用程序，将二进制数据显示为一堆时间序列条形图。**问题就在这里……从 NFS 读取二进制文件的最佳方法是什么？**

当前的解决方案有一个 PHP 脚本读取文件，解压缩二进制文件，并将数据作为 JSON 发送到客户端。这当然有巨大的开销，而且由于资源有限，我需要从流程中删除 Apache 机器。**那么如何从 NFS 读取二进制文件（使用 HTML5 FileReader）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:04:49.690

出于安全原因，通常不允许 Javascript（在浏览器中运行）访问操作系统文件。

但是，请看这里：

**[使用 File API 的http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)**在 Javascript 中读取文件****

# sql - 多个独立输出的多个 SELECT 语句

> ID：14363768
> 
> 赞同：0
> 
> 时间：2013-01-16T17:04:02.033
> 
> 标签：sql, sql-server, visual-studio-2010, stored-procedures, sql-function

我在 SQL Server 中有一个数据库，列出了包含每个日期的海事事件。对于图表说明，我现在想编写一个 SQL 语句（用于 Visual Studio），它给出了每年的事件总数。

例子：

**2009 2010（年 - X 轴）**

**4575 5432（年 - Y 轴）**

X 轴的 SELECT 语句，我可以这样写

```
SELECT year1, year2 FROM (SELECT 2009 AS year1) AS a, ( SELECT 2010 AS year2) AS b 
```

但是第二个呢？当我写类似的东西时：

```
SELECT totalyear1, totalyear2 FROM (SELECT COUNT(Reference) FROM STO.dbo.STOMaritimeIncidents WHERE [Incident date] = 2010 AS totalyear1) AS a, (SELECT COUNT(Reference) FROM STO.dbo.STOMaritimeIncidents WHERE [Incident date] = 2009 AS totalyear2) AS b 
```

我收到类似“ *Msg 156, Level 15, State 1, Line 1 Incorrect syntax near the keyword 'AS' 之*类的错误。”

如果有人能给我一个解释或帮助我，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:10:58.793

需要在列本身上进行和别名声明`AS totalyear1`：`AS totalyear2`

```
SELECT totalyear1, totalyear2 
FROM (SELECT COUNT(Reference) AS totalyear1 
      FROM STO.dbo.STOMaritimeIncidents 
      WHERE [Incident date] = 2010) AS a, 
     (SELECT COUNT(Reference) AS totalyear2 
      FROM STO.dbo.STOMaritimeIncidents 
      WHERE [Incident date] = 2009) AS b 
```

您可以通过简单地在一个查询中执行此操作来改进这一点：

```
SELECT SUM(CASE WHEN [Incident date] = 2010 THEN 1 ELSE 0) as totalyear1,
       SUM(CASE WHEN [Incident date] = 2009 THEN 1 ELSE 0) as totalyear2
FROM STO.dbo.STOMaritimeIncidents 
```

如果您不介意（或更喜欢）旋转数据，您可以使用@Umair 的建议并将 COUNT 与 GROUP BY 子句一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:11:09.733

ps 你可以在一个查询中完成所有事情！如

```
SELECT [Incident date], Total = COUNT(Reference) 
FROM STO.dbo.STOMaritimeIncidents
GROUP BY [Incident date]
WHERE [Incident date] IN (2009, 2010) 
```

至于您的实际错误，是因为行`...WHERE [Incident date] = 2009 AS totalyear2`等。它需要采用以下格式（别名需要在列上）

```
SELECT totalyear2 = COUNT(Reference) FROM STO.dbo.STOMaritimeIncidents WHERE [Incident date] = 2010 
```

# c#-4.0 - 这段代码中的关键字“Where”是什么意思？

> ID：14363774
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:04:31.860
> 
> 标签：c#-4.0

我在 c# 中乞求。在所有这堂课中，“哪里”是什么意思？为什么我在代码中使用“where”？Where关键字有什么好处？

```
public abstract class AbstractEntity
    {
    }

 public abstract class AbstractControl<E> where E: AbstractEntity
    {
        public abstract void Add(E entity);
        public abstract void Modify(E entity);
        public abstract void Remove(E entity);
    }    

public abstract class AbstractSQLServerControl<E> : AbstractControl<E> where E : AbstractEntity
        {
            protected SQLServerConnectionManager connectionManager;
            public AbstractSQLServerControl(string connectionString)
            {
                connectionManager = new SQLServerConnectionManager(connectionString);
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:06:41.087

`where`被称为约束。它确保您的类型参数`E`派生自`AbstractEntity`. 如果在 之后指定了接口，则`where`需要`E`实现该接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:06:14.853

其中是限制 E 的允许类型的约束

[http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:06:33.607

它是一个[泛型类型约束](http://msdn.microsoft.com/en-us/library/bb384067.aspx)。

它的作用是要求调用此方法的泛型类型满足以下限制：

void temp(T stuff) where T : class

意味着 T 必须是一个类。编译器不允许您调用 'temp<int>(42)'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:07:02.437

`Where`在您的情况下，指定类型参数`E`需要是`AbstractEntity`. 我建议你看看[http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)关于泛型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T17:07:07.390

这是泛型的约束，请参考[MSDN](http://msdn.microsoft.com/en-us/library/d5x73970%28VS.80%29.aspx)。在您的问题中，`where`子句声明泛型类型`E`必须属于或派生自 type `AbstractEntity`。

从本质上讲，泛型是实现动态类型的一些好处的一种方式，同时具有静态类型的优点。根据实际考虑，没有任何约束的泛型有时过于松散或宽泛，我们需要在编译时强制执行一些类型限制，这就是该`where`子句的用武之地。

# c# - TPT - 选择基类实例时如何查询适当的子级？

> ID：14363776
> 
> 赞同：1
> 
> 时间：2013-01-16T17:04:34.770
> 
> 标签：c#, entity-framework, c#-4.0, entity-framework-5, table-per-type

我正在尝试确定我当前使用 Table-Per-Type 层次结构的设计是否是我进行以下操作的最佳方式：

例如，我有 3 个子类（Manager、Executive、Employee），它们都继承自我的基本 Person。然后，我想在网格视图中显示 Person 的所有实例，以供最终用户选择并编辑其关联数据。但是，我的问题与选择 Person 时如何查询适当的类型有关。我目前正在为 Person 类做如下操作：

```
public class Person 
{
    Guid PersonID { get; set; }    
    string FirstName { get; set; } 
    string LastName { get; set; }   
    string PersonType { get; set; } 
} 
```

`PersonType`然后，当它们被实例化时， 我在每个子类中设置该字段。

设置绑定并连接到`SelectionChanged`事件的委托

```
BindingSource peopleBinding = new BindingSource();  
peopleBinding.DataSource = db.People.Local.ToBindingList();
this.peopleGridView.DataSource = peopleBinding;    
this.peopleGridView.SelectionChanged += new EventHandler(peopleGridView_SelectionChanged); 
```

GridView 的 SelectionChanged 事件

```
if (peopleGridView.SelectedRows.Count != 1) 
{
     return;
}

Person person = peopleBinding.Current as Person;
if (person == null) 
{ 
     return;
}

switch (person.PersonType) 
{
    case "Employee":         
       Employee employee = db.Employees.Find(person.PersonID);
       // Do Work With Employee
       break;
    case "Manager":
       Manager manager = db.Managers.Find(person.PersonID);
       // Do Work With Manager
       break;
    case "Executive":
       Executive executive = db.Executives.Find(person.PersonID);
       // Do Work With Executive
       break;
    default: 
       throw new ArgumentException (string.Format("Invalid type of person encountered ({0})", person.PersonType);
} 
```

有没有更好的方法来获取子类的实例，而不是使用该`PersonType`字段作为某种鉴别器来确定`DbSet`我需要查询什么来获取关联实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:12:15.110

您可以使用[is](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.110%29.aspx)关键字：

```
if (person is Employee)
  ...
else if (person is Manager)
  ...
else if (person is Executive)
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:28:23.370

如果你有（例如）`DbSet<Person>`你可以调用 `OfType<> 就可以了。就像是：

```
Person person = db.People.OfType<Manager>().Find(PersonID); 
```

**编辑：** 在 TPT 解决方案中，假设您在其他地方不需要它，这也将消除存储 PersonType 鉴别器的需要。

# matlab - 如何使用 Matlab 计算骨架图像中的分支长度

> ID：14363783
> 
> 赞同：2
> 
> 时间：2013-01-16T17:05:05.510
> 
> 标签：matlab, image-processing, mathematical-morphology

我是 Matlab 的新手。我正在对骨架图像进行图像处理。我正在使用`bworph`Matlab 中的函数检测分支点和端点。现在我想计算骨架图像中每个分支的长度。Matlab中有哪些不同的选项以及如何计算图像的长度？

以下是我用来查找分支点和端点的代码。现在我想去图像中的每个分支并确定它的长度。

```
mn=bwmorph(y,'branchpoints');
[row column] = find(mn);
branchPts    = [row column];
endImg    = bwmorph(y, 'endpoints');
[row column] = find(endImg);
endPts       = [row column];
figure;imshow(y);
hold on ; 
plot(branchPts(:,2),branchPts(:,1),'rx');
hold on; plot(endPts(:,2),endPts(:,1),'*'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:39:45.787

如果您取出分支点 - 分支将成为不同的连接组件。您可以申请它们[`regionprops`](http://www.mathworks.com/help/images/ref/regionprops.html)以获得所需的属性

```
branches = y & ~mn; % set branch points to zero
branchesLabeled = bwlabel( branches, 4 ); % label connected components
sts = regionprops( branchesLabeled, 'Area', 'Perimeter' ); % extract properties 
```

# windows-7 - 强制关机而不检查打开的进程 Windows 7

> ID：14363785
> 
> 赞同：1
> 
> 时间：2013-01-16T17:05:12.300
> 
> 标签：windows-7, kill-process, system-shutdown

有没有办法在不检查或等待正在运行的进程终止的情况下强制关机。更具体地说，我想要拔掉插座之类的东西。将注册表中的 WaitTimeToKillApp 的值设置为零不会完成这项工作，“如果您强制关机，您将失去未保存的工作”的窗口不断弹出。任何人都可以解释什么检查窗口明确，以便关闭，以便我可以取消它们。

**编辑：** 让系统杀死自己而忽略任何过程（不仅是处理一切）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:19:18.923

该[`shutdown`](http://ss64.com/nt/shutdown.html)命令可能对您有用。

```
/t:xxx         : Time until system shutdown in seconds. 
                    The valid range is xxx=0-600 seconds. [default=30]    
   /f             : Force running applications to close. 
```

示例命令

```
shutdown /t:0 /f 
```

# jquery - 禁用用户定义函数 Jquery

> ID：14363788
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:05:18.013
> 
> 标签：jquery

我有一个导航到水平silder的另一个框架的功能..

```
function goto(id, t) {
    //animate to the div id.
    $(".HozSlidercontentbox-wrapper").animate({ "left": -($(id).position().left) }, 600);

    // remove "active" class from all links inside #nav
    $('#HozSlidernav a').removeClass('active');

    // add active class to the current link
    $(t).addClass('active');
} 
```

当检查复选框“克隆”时，我希望能够删除此功能。

```
<li class="HozSlider_li"><a id="hypHozSliderMobile" class="HozSlider_a" href="#" onclick="goto('#HozSlider_mobile', this); return false">Mobile</a></li>

<li class="HozSlider_li"><label><input type="checkbox" onclick="DisableGoto()"><span style="color:#0073BF;font-weight:bold">Clone</span></label></li> 
```

我如何编写函数 DisableGoto 以便在使用 hypHozSliderMobile 的 onClick 时不会做任何事情（它被禁用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:11:42.827

更好的方法是检查函数中复选框的状态。如果它被检查，什么也不做。

```
function goto(id, t) { 

    if(!$('#cloneCheckbox').is(':checked')) {
        $(".HozSlidercontentbox-wrapper").animate({ "left": -($(id).position().left) }, 600);

        // remove "active" class from all links inside #nav
        $('#HozSlidernav a').removeClass('active');

        // add active class to the current link
        $(t).addClass('active');
    }
} 
```

您还需要为您的复选框提供 ID。

```
<li class="HozSlider_li"><a id="hypHozSliderMobile" class="HozSlider_a" href="#" onclick="goto('#HozSlider_mobile', this); return false">Mobile</a></li>

 <li class="HozSlider_li"><label><input id="cloneCheckbox" type="checkbox" onclick="DisableGoto()"><span style="color:#0073BF;font-weight:bold">Clone</span></label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:06:56.023

```
document.getElementById('hypHozSliderMobile').onclick = function(){/*do nothing*/} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:07:42.043

你的问题很难理解，但这里是一个尝试。

要禁用锚事件，您必须调用 preventDefault() 方法

```
$("#hypHozSliderMobile").click(function(e){
  e.preventDefault();
}); 
```

# python - 在python中读取和操作文件

> ID：14363791
> 
> 赞同：1
> 
> 时间：2013-01-16T17:05:22.253
> 
> 标签：python, file

```
def ints(filename):
    a = []
    f = open(filename, "r")
    lines = f.readlines()
    f.close()
    for line in lines:
        numbers = line.split()
        for number in numbers:            
            a.append(int(number))
    return a 
```

到目前为止，这是我的功能，我希望能够读取包含整数和字符（如“x”和“b”等）的文件，并返回仅包含整数的列表。目前该函数只能处理包含整数的文件。

如何修改它以排除字符或字母？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:10:06.983

这是我对您的代码的编辑，它按您的预期执行。

```
 def ints(filename):
        """A function that takes the filename of a file as an input arguement, computs and returns a list of
        integers of all the numbers in the file."""
        a = []
        f = open(filename, "r")
        lines = f.readlines()
        f.close()
        for line in lines:
            for character in line:
                try:
                    a.append(int(character))
                except ValueError:
                    pass
        return a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:09:32.853

`regex`在这里可能会有所帮助：

一个简单的例子：

```
In [22]: import re

In [23]: strs="121 some 34useless text 56"

In [24]: map(int,re.findall("\d+",strs))
Out[24]: [121, 34, 56]

# or this If you want the individual digits:

In [40]: map(int,re.findall("\d",strs))
Out[40]: [1, 2, 1, 3, 4, 5, 6] 
```

对于您的代码，这应该有效：

```
for line in lines:
    numbers = map(int,re.findall("\d+",line))
    a.extend(numbers) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:17:42.363

我只是简单地测试了字符是否为数字：

```
sample_string = "Test4\. 2325This string3"
a_list = []
for x in sample_string:
    if x.isdigit():
        a_list.append(x) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:10:49.667

```
for number in numbers:
    try:
        a.append(int(number))
    except ValueError:
        pass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T17:13:36.120

尝试/捕捉可能会有所帮助：

```
for thing in line.split():
    i_thing = None
    try:
        i_thing = int(thing)
    except ValueError:
        pass

    s_thing = None
    try:
        s_thing = str(thing)
    except:
        raise Exception("OH NOES!") 
```

这很丑陋，但我还没有找到更好的方法来做你想做的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T17:18:11.900

使用更现代的 Python 习语：

```
def ints(filename):
    with open(filename, "r") as f:
        for line in f:
            for number in line.split():
                try:
                    yield int(number)
                except ValueError:
                    pass

a = list(ints("testdata.txt"))
print(a) 
```

基本上，尝试转换为 int，如果字符串不是十进制数，则会引发 ValueError。抓住它并忽略它并继续。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-16T17:43:19.410

如何使用[string.translate](http://docs.python.org/2/library/string.html#string.translate)等将所有非数字替换为空格，然后利用 split() 和 map() 的强大功能。

当然它有点晦涩，我的默认反应是只使用[re](http://docs.python.org/2/library/re.html)模块，因为总的来说，你可以用正则表达式做更多的事情，他们值得努力学习。

```
In [119]: import string
In [120]: allchars = string.maketrans('', '')
In [121]: delchars = allchars.translate(allchars, "0123456789")
In [122]: emptychars = string.maketrans(delchars, ' ' * len(delchars))
In [123]: "Welcome home 1234 56 ol".translate(emptychars)
Out[123]: '             1234 56   '
In [124]: "Welcome home 1234 56 ol".translate(emptychars).split()
Out[124]: ['1234', '56']
In [125]: map(int, "Welcome home 1234 56 ol".translate(emptychars).split())
Out[125]: [1234, 56] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-16T18:07:12.747

这是未经测试的 sudo 代码，但应该是有效的。另外，我能给出的最佳建议是观看 David Beazley 的系统程序员生成器技巧和掌握 Python 3 I/O 讲座。它们对学习 python 有很大帮助。

这只是一个简单的生成器，用于获取文件的每一行并随后关闭文件。

```
def getLine(fileName):
    file = open(fileName, "r")

    for line in file.readLines():
        yield line

    file.close()

def getNumbers(line):
// I'm lazy and stole this one from Keith
    for number in line.split():
        try:
            yield int(number)
        except ValueError:
            pass

def generatorChain(fileName):
    // I'm a little iffy on the syntax here, but shouldn't be to hard with a bit of googling
    fileGen = getLine(fileName);
    yield getNumber( fileGen.next() ).next()

def listCompressionMagic():
    return [x for x in generatorChain("foo.txt") ] 
```

# c# - 自定义 winforms 控件的调试器中没有显示运行时错误，但 console.WriteLine 显示它已停止

> ID：14363793
> 
> 赞同：0
> 
> 时间：2013-01-16T17:05:39.410
> 
> 标签：c#, .net

我已经为 Windows 窗体创建了一个自定义图表控件，现在我正在尝试调试它，因为它不起作用。

我不得不切换到控制台应用程序类型，并在各处编写 Console.WriteLine 语句以查找发生了什么。在这种情况下，我的代码尝试访问数组的负索引。然而调试器没有弹出任何东西。相反，应用程序只显示一个大的红色 X 并停止绘制/计算/等，正如我的 console.writeline 语句所证明的那样。

我的项目是作为 Windows 窗体应用程序启动的。它由几个类以及继承自用户控件的 ChartControl（我的控件）组成。我正在使用 Windows Forms 应用程序附带的默认表单来测试它。

当我调试时，它只是运行始终保持焦点的 Windows 窗体，没有来自 Visual Studio 的弹出窗口或通知。Visual Studio 中的 Locals 和 Call Stack 保持淡出/空。然而，我知道一个事实，即应用程序在尝试使用负索引值后完全停止运行。抱歉，我不知道该怎么做，或者如何查看发生了什么。

有谁知道发生了什么以及如何获取调试信息？

更新：

我发现了一个名为 output 的窗口，它似乎显示了来自调试器的内容。我得到：

“'System.IndexOutOfRangeException' 类型的第一次机会异常发生在......（Name.exe）”

但是，如您所见，它没有显示位置或类似的东西。有趣的.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:09:11.740

在 VS 中，选择 Debug 菜单 > Exceptions... 并确保选择了正确的类型。

# objective-c - 如何在 UIView 目标 c 中获取对象位置和大小

> ID：14363795
> 
> 赞同：0
> 
> 时间：2013-01-16T17:05:49.413
> 
> 标签：objective-c, uiimageview, cgrect

我将 UIImageView 从对象库中放入我的场景中，并给它一个图像并在 .h 文件中定义了 OUTLET。现在我想检查它的坐标，或中心点，或框架 X，Y，宽度，高度。我正在使用这个

```
CGRect newFrameSize = CGRectMake(recycleBin.frame.origin.x, recycleBin.frame.origin.y,
recycleBin.frame.size.width, recycleBin.frame.size.height); 
```

或者

```
CGRect newFrameSize = recycleBin.frame; 
```

通过使用这个

```
NSLog(@"%@", NSStringFromCGRect(newFrameSize)); 
```

给出相同的结果

> 2013-01-16 21:42:25.101 xyzapp[6474:c07] {{0, 0}, {0, 0}}

我想要它在加载视图控制器时的实际位置和大小，所以当用户点击图像视图时，它会通过向用户放大而淡出并消失，当用户点击重置按钮时，它会淡入并放大回原始形式（反转到上一个动画）。还给我提示，如何在 UIImageView 或任何按钮或标签上执行此动画。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:14:43.090

不幸的是，您无法检查项目在 IB 中设置的实际框架`-viewDidLoad`。最早可以检查它（我发现）是通过覆盖`-viewDidAppear:`. 但是，由于`-viewDidAppear:`可以在视图的整个生命周期中多次调用，因此您需要确保没有保存处于修改状态的帧。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    if(savedFrame == CGRectZero) {
        savedFrame = self.recycleBin.frame;
        NSLog(@"Frame: %@", NSStringFromCGRect(savedFrame));
    }
} 
```

`savedFrame`成员变量在哪里（或者您可以将其设为属性）。

从您想要的动画的描述中，听起来调整框架并不是解决问题的方法。听起来您想要获得视图拉伸和淡出的效果（重置时相反）？如果是这样，像这样的一些代码可能更适合你正在寻找的东西......

消退：

```
float animationDuration = 2.0f; // Duration of animation in seconds
float zoomScale = 3.0f; // How much to zoom in duration the animation
[UIView animateWithDuration:animationDuration animations:^{
    CGAffineTransform transform = CGAffineTransformMakeScale(zoomScale, zoomScale);
    self.recycleBin.transform = transform;
    self.recycleBin.alpha = 0; // Make fully transparent
}]; 
```

然后，重置视图：

```
float animationDuration = 2.0f; // Duration of animation in seconds
[UIView animateWithDuration:animationDuration animations:^{
    CGAffineTransform transform = CGAffineTransformMakeScale(1.0f, 1.0f);
    self.recycleBin.transform = transform;
    self.recycleBin.alpha = 1.0; // Make fully opaque
}]; 
```

你可以玩弄这些数字，看看你是否得到了你想要的效果。iOS 中的大多数动画实际上都非常简单。此代码适用于任何 UIView 子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:01:46.823

听起来好像您的 IBOutlet 没有附加到您的班级。

打开您的视图控制器头文件（如果这是您的属性声明所在的位置）并查看声明旁边：

![在此处输入图像描述](../Images/dc30d798c50a6d2ef157f20a4b0bd5a0.png)

请注意在第一个 IBOutlet 上，圆圈（行号左侧）是如何填充的。这意味着它已连接到您的场景。但是，第二个不是（圆圈没有填充）。

# jquery - 查找元素的最大高度

> ID：14363796
> 
> 赞同：0
> 
> 时间：2013-01-16T17:05:51.393
> 
> 标签：jquery, css

有没有办法找出`max-height`元素的预定义（css属性）？

我想找到高度`.height()`并与css进行比较，`max-height`如果达到最大高度，则添加添加类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:07:21.057

```
$('#myDiv').css('max-height'); 
```

演示：http: [//jsfiddle.net/F9DPh/](http://jsfiddle.net/F9DPh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:08:37.143

您可以使用`.css('max-height')`，但如果您想要一个数字，则必须删除“px”（或其他单位）部分：

```
parseInt($("element").css('max-height'),10) 
```

# android - 如何从 Android 添加用户代理字符串以进行 RESTFul Web 服务监控？

> ID：14363798
> 
> 赞同：1
> 
> 时间：2013-01-16T17:05:54.223
> 
> 标签：android, web-services, user-agent

我正在为我的应用程序提供 Restful 服务，并且许多用户都在使用它。现在我想监控该服务，因为我拥有免费和付费版本的应用程序。所以我想在调用 Web 服务时添加用户代理字符串；就像免费的应用程序一样，比如说**免费的 1.0**和付费的**高级版 1.0**。

如何从我的 android 应用程序中添加用户代理字符串？如果有人有任何想法，请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:13:52.720

创建请求时，使用 addHeader 方法添加您想要的任何标头

```
 HttpGet request = new HttpGet("http://www.example.com/api/resource");
    request.addHeader("User-Agent", "MY-CUSTOM-USER-AGENT"); 
```

# web-services - 设置 ISAPI dll 文件创建的路径

> ID：14363801
> 
> 赞同：0
> 
> 时间：2013-01-16T17:06:07.817
> 
> 标签：web-services, delphi, iis, dll, isapi

我正在开发一个使用 ISAPI dll 文件/Web 服务生成文件的项目。我以前使用硬编码的位置来存储文件的位置，效果很好，我现在尝试将它与存储在指定文本文件中的位置交换。

我遇到的问题是，它似乎将 IIS 工作进程 'C:\Windows\SysWOW64\inetsrv' 的当前路径附加到我存储在文本文件中的位置信息的开头。我不确定这是否取决于我的代码或 IIS 7 服务器设置？谁能指出我正确的方向？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:21:37.623

我认为你必须在[MSDN中使用 SetDllDirectory](http://msdn.microsoft.com/en-us/library/ms686203%28v=VS.85%29.aspx)

调用 SetDllDirectory 后，标准 DLL 搜索路径为：

1.  加载应用程序的目录。
2.  lpPathName 参数指定的目录。
3.  系统目录。使用GetSystemDirectory函数获取该目录的路径。该目录的名称为System32。
4.  16 位系统目录。没有函数获取这个目录的路径，但是被搜索了。此目录的名称是 System.
5.  Windows 目录。使用 GetWindowsDirectory 函数获取该目录的路径。
6.  PATH 环境变量中列出的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:14:15.280

这不是一个直接的答案，但可能会让您朝着正确的方向前进。在[http://xxm.sf.net/](http://xxm.sf.net/)项目上工作，我发现您可以从 ISAPI dll中[设置当前目录（用于进程）。](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.SetCurrentDir)看来inetinfo.exe/dllhost.exe/w3wp.exe（或IIS用来调用您的ISAPI的任何其他进程）并不介意并继续正常运行。

# r - R中x轴和y轴ggplot的标签大小

> ID：14363804
> 
> 赞同：22
> 
> 时间：2013-01-16T17:06:16.833
> 
> 标签：r, size, ggplot2

我有一个 ggplot 代码，我想更改 x 轴和 y 轴的标签大小。

编码：

```
df.m <- melt(df, names(df)[2:3], names(df)[1])
df.m$Results <- factor(df.m$Results)
df.m$HMn25_30.h <- strptime(as.character(df.m$HMn25_30.h), format = "%Y-%m-%d %H:%M:%S")
p <- ggplot(df.m, aes(x = HMn25_30.h, y = value, group = variable, color = variable))
p <- p + scale_shape_manual(values=c(20,22))
p <- p + geom_point(aes(shape = Results), cex=4, color= "blue3")
p <- p + geom_line(size=.8)
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1, size=13,color="darkred"))
p <- p + scale_color_manual(values=c("Red"))
p <- p + ylim(-1,8)
p <- p + xlab('Date and Time') 
p <- p + ylab('Temperature') 
p <- p + ggtitle("Temporal Outliers of Node 25 ") + theme(plot.title = element_text(lineheight=3, face="bold", color="black", size=29))
p 
```

换句话说，应该更改“温度”和“日期和时间”的字体和大小。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-16T17:33:34.657

您可以应用不同的选项`theme` ：

```
p <- ggplot(df.m, aes(x = HMn25_30.h, y = value, group = variable, color = variable))
    p <- p + scale_shape_manual(values=c(20,22))
    p <- p + geom_point(aes(shape = Results), cex=4, color= "blue3")
    p <- p + geom_line(size=.8)
    p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1, size=13,color="darkred"))
    p <- p + scale_color_manual(values=c("Red"))
    p <- p + ylim(-1,8)
    p <- p + theme_bw()
    p <- p + xlab('Date and Time') 
    p <- p + ylab('Temprature') 
    p <- p + ggtitle("Temporal Outliers of Node 25 ") + theme(plot.title = element_text(lineheight=3, face="bold", color="black", size=29))
    p <- p + labs(x = "Date-Time ", y = "Temprature  ")
    p <- p + theme(axis.title.y = element_text(size = rel(1.8), angle = 90))
    p <- p + theme(axis.title.x = element_text(size = rel(1.8), angle = 00))
    p 
```

# c# - 如何将文本框添加到 TabItem？

> ID：14363805
> 
> 赞同：1
> 
> 时间：2013-01-16T17:06:18.263
> 
> 标签：c#, wpf

每次单击按钮时，我都会尝试添加一个新按钮，对此我没有任何`TabItem`问题。`TabControl`但我想在每个`TabItem`. 我怎么做？我需要用我想的代码来做到这一点。

```
TabItem newTab = new TabItem();
                newTab.Header = ncn.courseName;
                newTab.FontSize = 20;
                TextBox textbox = new TextBox();
                textbox.Width = 200;
                textbox.Height = 100;
                textbox.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
                textbox.VerticalAlignment = System.Windows.VerticalAlignment.Top;
                Grid grid = new Grid();
                grid.Children.Add(textbox);
                newTab.Content = grid;
                this.Courses.Items.Add(newTab);
                this.Courses.SelectedItem = newTab; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:20:36.423

如果您只想使用代码而不是 MVVM 模式，可以这样解决：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    TabItem item = null;
    Grid grid = null;
    TextBox textbox = null;

    try
    {
        // Creating the TextBox
        textbox = new TextBox();
        textbox.Width = 200;
        textbox.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        textbox.VerticalAlignment = System.Windows.VerticalAlignment.Top;

        // Creating the Grid (create Canvas or StackPanel or other panel here)
        grid = new Grid();
        grid.Children.Add(textbox);     // Add more controls

        item = new TabItem();
        item.Header = "Hello, this is the new tab item!";
        item.Content = grid;            // OR : Add a UserControl containing all controls you like, OR use a ContentTemplate

        MyTabControl.Items.Add(item);
        MyTabControl.SelectedItem = item;   // Setting focus to the new TabItem
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error creating the TabItem content! " + ex.Message);
    }
    finally
    {
        textbox = null;
        grid = null;
        item = null;
    }
} 
```

那是通过使用代码隐藏来解决它“旧方法”。

另一方面，如果您想按应有的方式使用 WPF，则可以这样做。为了简化一点，我将代码隐藏用作 DataContext。我建议在运行代码中使用一个类。如果使用按钮命令，我还使用了 Cutton 单击事件。

首先，我为选项卡项创建一个“持有人”类，保存您需要的数据。

**TabItemHolder.cs**

```
 public class TabItemHolder : DependencyObject, INotifyPropertyChanged
    {
        public static readonly DependencyProperty HeaderProperty = DependencyProperty.Register("Header", typeof(String), typeof(TabItemHolder), new UIPropertyMetadata());
        public String Header
        {
            get { return (String)GetValue(HeaderProperty); }
            set
            {
                SetValue(HeaderProperty, value);
                NotifyPropertyChanged("Header");
            }
        }

        public static readonly DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(String), typeof(TabItemHolder), new UIPropertyMetadata());
        public String Text
        {
            get { return (String)GetValue(TextProperty); }
            set
            {
                SetValue(TextProperty, value);
                NotifyPropertyChanged("Text");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        public void NotifyPropertyChanged(String PropertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
        }
    } 
```

然后我有模型类，在这个例子中是 MainWindow.cs 本身：

**主窗口.cs**

公共部分类 MainWindow : Window, INotifyPropertyChanged { public static readonly DependencyProperty SelectedTabProperty = DependencyProperty.Register("SelectedTab", typeof(TabItemHolder), typeof(MainWindow), new UIPropertyMetadata()); 公共 TabItemHolder SelectedTab { get { return (TabItemHolder)GetValue(SelectedTabProperty); } set { SetValue(SelectedTabProperty, value); NotifyPropertyChanged("SelectedTab"); } }

```
public static readonly DependencyProperty TabsProperty = DependencyProperty.Register("Tabs", typeof(ObservableCollection<TabItemHolder>), typeof(MainWindow), new UIPropertyMetadata());
public ObservableCollection<TabItemHolder> Tabs
{
    get { return (ObservableCollection<TabItemHolder>)GetValue(TabsProperty); }
    set
    {
        SetValue(TabsProperty, value);
        NotifyPropertyChanged("Tabs");
    }
}

public MainWindow()
{
    InitializeComponent();
    this.DataContext = this;
    this.Tabs = new ObservableCollection<TabItemHolder>();
}

private void button1_Click(object sender, RoutedEventArgs e)
{
    this.Tabs.Add(new TabItemHolder() { Header = "Hello, this is the new tab item!", Text = "Dummy text for the textbox" });
    this.SelectedTab = this.Tabs[this.Tabs.Count - 1];
}

public event PropertyChangedEventHandler PropertyChanged;
public void NotifyPropertyChanged(String PropertyName)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
} 
```

}

最后，XAML 将是这样的。

**主窗口.xaml**

```
 <Grid x:Name="LayoutRoot">
        <TabControl x:Name="MyTabControl"
                    Margin="12,67,12,12"
                    ItemsSource="{Binding Tabs}"
                    SelectedItem="{Binding SelectedTab}">
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <Grid>
                        <TextBox Text="{Binding Path=Text}"
                                 Width="200"
                                 HorizontalAlignment="Left"
                                 VerticalAlignment="Top" />
                    </Grid>
                </DataTemplate>
            </TabControl.ContentTemplate>
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Header}"/>
                </DataTemplate>
            </TabControl.ItemTemplate>
        </TabControl>
        <Button Content="Button" Height="34" HorizontalAlignment="Left" Margin="19,12,0,0" Name="button1" VerticalAlignment="Top" Width="90" Click="button1_Click" />
    </Grid> 
```

那将以不同的（在我看来更好）的方式来做同样的把戏。

我希望这对你有帮助。

# java - 调试 MysqlDataTruncation 异常

> ID：14363807
> 
> 赞同：0
> 
> 时间：2013-01-16T17:06:27.330
> 
> 标签：java, mysql, exception

我正在使用以下例程将信息存储在数据库中：

```
try{
connection = cpds.getConnection();
pstmt = connection.prepareStatement("select setSomeData(?,?)");
//set data to the statement
res = pstmt.executeQuery();
//process data retrieved
} catch (SQLException ex) {
        System.out.println("SQLException: " + ex);
        ex.printStackTrace();
        return null;
    } finally {
        try {
            pstmt.close();
            connection.close();
        } catch (SQLException ex) {
    }
} 
```

但有时我会遇到这个异常：

> SQLException：com.mysql.jdbc.MysqlDataTruncation：数据截断：BIGINT UNSIGNED 值超出范围在“（tstmp@5 - lastEvent@11）”
> com.mysql.jdbc.MysqlDataTruncation：数据截断：BIGINT UNSIGNED 值超出范围在
> com.mysql.jdbc.MysqlIO.nextRowFast(MysqlIO.java:2066)
> 的 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
> 的'(tstmp@5 - lastEvent@11)'中.jdbc.MysqlIO.nextRow(MysqlIO.java:1922)
> 在 com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:3414)
> 在 com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:481)
> 在 com。 mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:3120)
> 在 com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:2288)
> 在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2709)
> 在 com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
> 在 com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2134 )
> 在 com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery
> (NewProxyPreparedStatement.java:116) 的 com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2300)

是否有可能了解有关异常的更多信息，例如受影响的列和我尝试存储的值？

例如，对于例外：`.MySQLTransactionRollbackException: Deadlock found when trying to get lock;`

查询`SHOW ENGINE INNODB STATUS`非常有用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:13:39.167

除了 SQLSTATE 和相应的 MySQL 错误代码和消息之外，通过 JDBC 提供的调试信息非常少。

[https://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html](https://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html)

* * *

对于第一个异常，最可能的解释是它是由 MySQL 在尝试将负值存储到 UNSIGNED 整数数据类型时引发的警告（或错误）引起的。

举个例子：

```
CREATE TABLE foo (val BIGINT UNSIGNED);
INSERT INTO foo (val) VALUES (-4);

0 row(s) affected
Total Time     : 0.030 sec
--------------------------------------------------

1 row(s) affected, 1 warning(s)
Total Time     : 0 sec

Warning Code : 1264
Out of range value for column 'val' at row 1 
```

* * *

对于另一个异常，这是有关正在引发的 MySQL 错误的信息：

```
Error: 1213 SQLSTATE: 40001 (ER_LOCK_DEADLOCK)
Message: Deadlock found when trying to get lock; try restarting transaction 
```

对于 InnoDB 表遇到的错误，是的，`SHOW ENGINE INNODB STATUS`语句的输出可以提供一些见解。但该信息是针对整个数据库的，不一定特定于遇到错误的会话。

# plugins - 从弹出窗口中获取选定的 FCK 文件 url

> ID：14363812
> 
> 赞同：1
> 
> 时间：2013-01-16T17:06:42.870
> 
> 标签：plugins, tinymce, fckeditor, file-browser

所以我在 TinyMCE 中使用了 FCKeditor。这很容易集成，并为我的客户提供了一种在选择文件时上传文件的好方法。为了整合它，我使用了以下代码：

```
function fileBrowserCallBack(field_name, url, type, win) {
var connector = ROOT + "path/to/tiny_mce/filemanager/browser.html?Connector=connectors/php/connector.php";
connector += "&Type=" + type;
browserField = field_name;
browserWin = win;
window.open(connector, "browserWindow", "modal,width=600,height=400");
} 
```

在`file_browser_callback: "fileBrowserCallBack"`TinyMCE 通话中。

现在我想使用这个相同的函数来填充一个简单的输入标签，这样我的用户就可以为自定义背景选择一个图像。

现在我在这个打开文件浏览器的输入字段上创建了一个 onClick 事件。但是当我选择一个文件时，我收到以下 javascript 错误：

```
TypeError: window.top.opener.tinyfck is undefined 
```

那么如何使用这个插件作为常规文件浏览器使其返回选定的文件呢？

**编辑：**我使用的插件的实际名称是*TinyFCK*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:34:28.643

不幸的是，这是不可能的。tinymce 图像上传器需要使用另一种编辑器时不存在的 tinymce 文档结构。

# regex - 正则表达式匹配电话号码

> ID：14363814
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:06:48.203
> 
> 标签：regex

有人可以帮我吗？我需要一个匹配以下模式的正则表达式：

10-（除 73480 外的任意 5 位）-（任意 4 位）

有效示例：10-12345-1234 无效：10-73480-1234

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:08:42.797

您应该使用负前瞻来检查`10-73480`匹配之前是否出现任何情况。

```
^(?!10-73480)10-\d{5}-\d{4}$ 
```

[在这里](http://regexhero.net/tester/)试试

# sql - 使用 NHibernate IQueryOver 选择重复项

> ID：14363820
> 
> 赞同：1
> 
> 时间：2013-01-16T17:06:59.130
> 
> 标签：sql, linq, nhibernate, queryover

我正在为 SQL Server 2012 和 IQueryOver使用 NHibernate`3.3.1.4000`和 FluentNHibernate`1.3.0.733`

我有下一节课：

```
class Foo {
  public virtual int Id;
  public virtual Bar Bar;
  public virtual Baz Baz;
}
class Bar {
  public virtual int Id;
}
class Baz {
  public virtual int Id;
} 
```

我想选择所有`Foo`包含相同`Bar`和`Baz`孩子的实体。我知道如何通过 LINQ 查询（IQueryable）在理论上做到这一点

```
IList<Foo> fooData = Session.Query<Foo>.GroupBy(x => x, new DistinctItemComparer()).Where(g => g.Count() > 1).Select(g => g.Key).ToList();

class DistinctItemComparer : IEqualityComparer<Foo> 
{
    public bool Equals(Foo x, Foo y)
    {
        return (x.Id == y.Id) || ((x.Bar.Id == y.Bar.Id) && (x.Baz.Id == y.Baz.Id)); 
    }

    public int GetHashCode(Foo obj)
    {
        return obj.Id.GetHashCode() ^ obj.Bar.Id.GetHashCode() ^ obj.Baz.Id.GetHashCode();
    }
} 
```

但我得到了错误：

> 无法解析表达式 'value(NHibernate.Linq.NhQueryable`1[Foo]).GroupBy(x => x, value(DistinctItemComparer))'：方法 'System.Linq.Queryable.GroupBy' 的重载当前不是支持的。

因此，也许存在其他解决方案（使用`IQueryOver`，也许？）来获取重复条目。不要丢弃它们并接收不同的东西。我只想要完全相同的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:37:19.720

这应该有效：

```
var fooData = (from foo1 in Session.Query<Foo>()
               from foo2 in Session.Query<Foo>()
               where foo1.Id != foo2.Id 
                     && foo1.Bar.Id == foo2.Bar.Id 
                     && foo1.Baz.Id == foo2.Baz.Id
               select foo1).Distinct().ToList(); 
```

# php - 将这些位掩码定义从典当语言转换为 PHP 的可能方法是什么？

> ID：14363822
> 
> 赞同：0
> 
> 时间：2013-01-16T17:07:06.690
> 
> 标签：php, permissions, bitmask, bitflags, pawn

好吧，澄清一下，pawn 是一种与 C++ 非常相似的语言。我正在编写一个需要位掩码权限（在 php 中）的管理控制面板，我实际上不知道我是否将权限正确转换（因为这是我从未做过的事情）到 PHP。我使用 define() 来定义权限。这是它最初的样子（典当）：

```
//Pawn
enum EAdminFlags (<<= 1) {
    EAdminFlags_None = 0, 
    EAdminFlags_BasicAdmin = 1, //kick, fine, etc 0
    EAdminFlags_CanGiveGuns, //1
    EAdminFlags_HouseAdmin, //2
    EAdminFlags_IRCAdmin, //3
    EAdminFlags_BusinessAdmin, //4
    EAdminFlags_AdminManage, //5 can see invisible admins/manipulate admin flags
    EAdminFlags_Scripter, //getpvars, reloadcmds, stuff only scripters should need 6
    EAdminFlags_HelperManage, // 7 manage helpers/teachers
    EAdminFlags_Unbannable, //unbanable under ANY circumstances 8
    EAdminFlags_CanRefundSelf, //can refund himself
    EAdminFlags_VehicleAdmin, //10 can manipulate player vehicles
    EAdminFlags_AntiCheat, //immune to the anticheat 11
    EAdminFlags_BigEars, //can /bigears, /bigfamilyears, /bigmouth
    EAdminFlags_SetName, //13
    EAdminFlags_CanHide, //can toggle/untoggle hidden on themselves 14
    EAdminFlags_Invisible, //Invisible on admins list(like 9999s before) 15
    EAdminFlags_GiveDrugs, //server manager, can restart the server/do rcon cmds, create job cars 16
    EAdminFlags_Unban, //can unban, oban, oprison people 17
    EAdminFlags_WeatherManage, //can manage weather/time 18
    EAdminFlags_GiveRestrictedGun, //can give restircted guns 19
    EAdminFlags_TeleportOthers, //can teleport other people 20
    EAdminFlags_CanBanAdmins, //can ban other admins(or any punishments) 21
    EAdminFlags_GiveMats, //can give materials 22
    EAdminFlags_StatsManage, //23 /setstat, /sethp, /setarmor
    EAdminFlags_FamilyAdmin, //24
    EAdminFlags_FactionAdmin, //25
    EAdminFlags_MassCmds, //26 can do /masstphere, /massmoney, /masskick, /massnuke
    EAdminFlags_Nuke, //27 can do things like /nuke, sparta, rangeban
    EAdminFlags_RangeBan, //28 can range ban
    EAdminFlags_GiveMoney, //29 can /givemoney /money
    EAdminFlags_Donations, //30 can give DPS/set donate rank
    EAdminFlags_ServerManager, //can restart the server, etc, use /noooc, /nopms, /nonewb
    EAdminFlags_All = -1,
}; 
```

现在这就是我在 PHP 中定义它的方式：

```
 define("EAdminFlags_None",0);
    define("EAdminFlags_BasicAdmin",1);
    define("EAdminFlags_CanGiveGuns",1 << 0);
    define("EAdminFlags_HouseAdmin",1 << 1);
    define("EAdminFlags_IRCAdmin",1 << 2);
    define("EAdminFlags_BusinessAdmin",1 << 3);
    define("EAdminFlags_AdminManage",1 << 4);
    define("EAdminFlags_Scripter",1 << 5);
    define("EAdminFlags_HelperManage",1 << 6);
    define("EAdminFlags_Unbannable",1 << 7); 
    define("EAdminFlags_CanRefundSelf",1 << 8);
    define("EAdminFlags_VehicleAdmin",1 << 9);
    define("EAdminFlags_AntiCheat",1 << 10);
    define("EAdminFlags_BigEars",1 << 11);
    define("EAdminFlags_SetName",1 << 12);
    define("EAdminFlags_CanHide",1 << 13);
    define("EAdminFlags_Invisible",1 << 14);
    define("EAdminFlags_GiveDrugs",1 << 15);
    define("EAdminFlags_Unban",1 << 16);
    define("EAdminFlags_WeatherManage",1 << 17);
    define("EAdminFlags_GiveRestrictedGun",1 << 18);
    define("EAdminFlags_TeleportOthers",1 << 19);
    define("EAdminFlags_CanBanAdmins",1 << 20);
    define("EAdminFlags_GiveMats",1 << 21);
    define("EAdminFlags_StatsManage",1 << 22);
    define("EAdminFlags_FamilyAdmin",1 << 23);
    define("EAdminFlags_FactionAdmin",1 << 24);
    define("EAdminFlags_MassCmds",1 << 25);
    define("EAdminFlags_Nuke",1 << 26);
    define("EAdminFlags_RangeBan",1 << 27);
    define("EAdminFlags_GiveMoney",1 << 28);
    define("EAdminFlags_Donations",1 << 29);
    define("EAdminFlags_ServerManager",1 << 30);
    define("EAdminFlags_All",-1); 
```

我比较了位标志，大多数时候它只识别`EAdminFlags_All`权限以及`EAdminFlags_None`和`EAdminFlags_BasicAdmin`。所以我在 PHP 中定义它的方式可能存在问题。权限存储在数据库中，并保存为原始整数值，例如：`51531777` 然后将其加载到 PHP 中并进行比较，如下所示：

```
$account = new Account(Auth::getUserID());
echo "Welcome ".$account->getUsername()."<br>";
if($account->getAdminPerms(EAdminFlags_FamilyAdmin)) { 
    echo "You are a family admin."; //testing purposes
    //If the person has those permissions set then display he / she is a family admin but even if the permissions are set to EAdminFlags_BasicAdmin, it will still display it wrong
}
public function getAdminLevel() {
    return $this->adminlevel; //This holds the integer value "51531777"
}
public function getAdminPerms($n) {
    return ($this->adminlevel & (1 << $n)) != 0;
} 
```

事先感谢您的帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:09:52.577

```
define("EAdminFlags_BasicAdmin",1);
define("EAdminFlags_CanGiveGuns",1 << 0); 
```

这两个是等价的……移位 0 基本上是一个空操作，所以“cangiveguns”与 basicadmin 具有相同的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:32:04.300

假设您对常量的移位操作是正确的，那么您在检测特定权限标志时会出错：

```
public function getAdminPerms($n) {
    return ($this->adminlevel & (1 << $n)) != 0;
} 
```

输入是标志值，它只是设置在正确位置的 1 位。您再次错误地移位，但您需要做的就是将整数值与从数据库中读取的整数值相加：

```
public function getAdminPerms($n) {
    return ($this->adminlevel & $n)) != 0;
} 
```

回来的路也是一样的。从零值开始，您可以添加所有管理员权限标志，并对所有常量值进行位或运算，而无需移位：

```
$newAdmin = EAdminFlags_AntiCheat | EAdminFlags_CanGiveGuns; 
```

# database - 在高性能应用程序上缓存数据库表

> ID：14363824
> 
> 赞同：3
> 
> 时间：2013-01-16T17:07:11.980
> 
> 标签：database, caching, distributed-computing, distributed-caching

我有一个高性能应用程序，我正在考虑制作分布式（使用 rabbitMQ 作为 MQ）。该应用程序使用一个数据库（目前是 SQLServer，但我仍然可以切换到其他东西）并将其大部分缓存在 RAM 中以提高性能。这会导致问题，因为当其中一个应用程序写入数据库时​​，其他应用程序的缓存数据库变得过时。

我认为这是在 High-Availability 社区中经常发生的事情，但是我找不到任何有用的东西。我想我不是在寻找正确的东西。有开箱即用的解决方案吗？

PS：如果这属于服务器故障，我很抱歉 - 因为这是一个开发问题，我认为它属于这里

编辑：应用程序读取和写入数据库。由于我正在更改要分发的应用程序 - 现在不止一个应用程序读取和写入数据库。缓存在每个分布式应用程序中完成，它们不知道来自另一个应用程序的数据库更改。我的意思是 - 如果他不是更新数据库的人，如何知道数据库是否已更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:24:07.440

因此，您在不同的服务器上拥有一个数据库和许多应用程序。每个应用程序都有自己的缓存，所有应用程序都在读取和写入数据库。

查看分布式缓存而不是本地缓存。查看 memcached 或 AppFabric。我已经成功使用 AppFabric 将内容缓存在 Microsoft 堆栈中。您可以简单地将新节点添加到 AppFabric，它会自动分发对象以实现高可用性。

如果您移动到共享缓存，那么您可以将过期时间放在缓存中的对象上。当事情发生变化时，尽量抵制主动驱逐物品的诱惑。这成为一个非常困难的问题。

我建议隔离您的关键项目，并且只缓存一次。例如，在拍卖网站上工作时，我们非常积极地缓存。我们只缓存了一次拍卖列表的价格。这样，当其他人竞标时，我们只需进行一次驱逐。我们不必遍历整个缓存并询问“价格出现在哪里？更改它！”

对于 95% 的数据，读取将自行过期，写入不会立即影响它们。当新的写入进入时，需要驱逐 5% 的数据。这就是我所说的“关键项目”。总是需要更新的东西。

希望能给你一些想法！

# primefaces - Spring Webflow 和 primefaces ActionListners

> ID：14363829
> 
> 赞同：1
> 
> 时间：2013-01-16T17:07:22.670
> 
> 标签：primefaces, spring-webflow

如何从 Primefaces actionlistner 调用 Spring Webflow 转换？

我有一个 Primefaces 组件`SelectOneMenu`。每当 Component 的值发生变化时，我想调用 Spring Webflow 中的转换以在 outPutText 中显示 SelectItem 上的描述。

我是 Spring Webflow 和 Primefaces 的新手。

如果以下内容不正确，请告诉我。

**JSF 代码**

```
<h:outputText value="Script " style="font-weight: bold" />
    <p:selectOneMenu value="#{selectedDN.cdrScript}" >
      <p:ajax event="change" listener="scriptChange" update="scriptDesc" />
      <f:selectItems value="#{sctiptOptions}" />
    </p:selectOneMenu>
<h:outputText value="#{scriptDesc}" id="scriptDesc" /> 
```

**视图的 Web 流配置**

```
<view-state id="Edit">
<on-entry>
<evaluate expression="scriptService.getOptions()"
              result="flowScope.sctiptOptions"/>
  <set name="flowScope.scriptDesc" value="selectedDN.cdrScript.scriptDesc"/>
    </on-entry>
<transition on="scriptChange">
  <set name="flowScope.scriptDesc"
       value="flowScope.selectedDN.cdrScript.scriptName"/>
  <render fragments="form:scriptDesc" />
</transition>

<transition on="Update" to="Edit">
</transition>

<transition on="Cancel" to="View">
</transition>
</view-state> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:27:03.727

为此，您不需要 SWF 转换或侦听器。像下面这样的东西会起作用：

```
<h:outputText value="Script " style="font-weight: bold" />
    <p:selectOneMenu value="#{selectedDN.cdrScript}" >
      <p:ajax event="change" update="scriptDesc" />
      <f:selectItems value="#{scriptService.getOptions()}" var="script" itemLabel="#{script.scriptName}" itemValue="#{script.id}"/>
    </p:selectOneMenu>
<h:outputText value="#{selectedDN.cdrScript.scriptName}" id="scriptDesc" /> 
```

如果还没有，请添加“selectedDN”变量定义：

```
<view-state id="Edit">
<on-entry>
  <set name="flowScope.selectedDN" value="scriptService.getCurrentSelectedDN()"/>
</on-entry> 
```

请注意添加了 itemLabel 和 itemValue 属性。您可能还需要在 selectOneMenu 上指定一个转换器。

使用 PF 部分渲染时，SWF 开箱即用的效果不佳。将以下内容添加到标记下的 MVC servlet 配置中：

```
 <webflow:flow-execution-attributes>
            <webflow:redirect-in-same-state value="false"/>
        </webflow:flow-execution-attributes> 
```

# matlab - 从现有的另外两个矩阵构造一个矩阵，它们都具有不同的大小

> ID：14363831
> 
> 赞同：1
> 
> 时间：2013-01-16T17:07:31.677
> 
> 标签：matlab, matrix

我有两个矩阵

```
a = randi ([0 10], 5, 6)
b = randi ([0 10], 2, 45) 
```

现在我想用 a 和 b 的所有元素构造一个大小为 8 x 15 的矩阵 c。是否可以在单行代码中完成？请给一些建议。

这是我正在尝试做的一个例子：

```
a = [1 4 6;
     5 8 0;
     3 7 9;
     4 10 5];

b = [5 6;
     5 0];

c = [1 4 6 5;
     8 0 3 7;
     9 4 10 5;
     5 6 5 0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:11:18.487

如何组合的规格`a`并不`b`清楚。这是一种方法。

`a`创建由和构建的单列向量`b`。然后`reshape`将该列向量转化为矩阵。

```
c = reshape( [ a(:); b(:) ], 8, 15); 
```

这**仅**在`numel(a) + numel(b)`等于 中的元素总数时才有效`c`。

由于您没有提供足够的元素来创建矩阵，因此尝试执行`c = reshape( [ a(:); b(:) ], 7,12);`将**失败。**`7x12`

**更新** Noufal 对此答案的评论稍微改变了问题要求。基本上你仍然创建列向量，但你只填充 C 取决于你有多少元素可供使用：

```
A = rand(5,6);
B = rand(2,45);
C = zeros(8,10);

tmp = [A(:); B(:)]; % create temporary column vector

maxIdx = min( [numel(tmp), numel(C)] ); % determine if tmp or C has fewer elements

C(1:maxIdx) = tmp(1:maxIdx); % fill C from tmp using indices 1:maxIdx 
```

# c# - 在 C# 中突出显示 Latex 语法

> ID：14363841
> 
> 赞同：1
> 
> 时间：2013-01-16T17:08:18.590
> 
> 标签：c#, .net, syntax-highlighting

> **可能的重复：**
> [如何构建语法突出显示？](https://stackoverflow.com/questions/2031154/how-is-syntax-highlighting-built)

我正在用 C# 编写。我有一个简单的 RichTextBox，我在其中用 LaTeX 编写。

**问题**：如何在框中添加 LaTeX 语法高亮显示，这样当我编写时（以 LaTeX 语法），文本会被高亮显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:51:35.103

`RichTextBox`本身不支持语法高亮。您必须自己编写或在[现有](http://www.codeproject.com/Articles/10675/Enabling-syntax-highlighting-in-a-RichTextBox)的基础上构建。

# c# - 使用 RX 同步多个事件

> ID：14363843
> 
> 赞同：2
> 
> 时间：2013-01-16T17:08:23.723
> 
> 标签：c#, system.reactive

假设我在一个列表中有三个产品。为了启用某个动作，所有三个都需要属于某种类型。为了找出产品的类型，我需要拨打服务电话并等待回复。

我想做的是等待所有三个响应（如果出现问题，可能会超时），当收集到所有信息后，决定是否启用可能的操作。

我曾经通过一些计数器或重置事件来跟踪完成的事件来解决这个问题，但我想看看我是否可以使用 Rx 以更清洁的方式来完成它。

由于我对 Rx 还不太熟悉，所以我正在寻找一些提示/指针。我知道我可以使用

```
Observable.FromEventPattern 
```

对于我正在等待的事件。我订阅并等待响应并处理它。我只是不清楚如何组合多个事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:36:45.430

您正在寻找的组合器是`CombineLatest`

假设您有这样的课程：

```
public class Foo
{
    public delegate void FooEventHandler(object sender, EventArgs args);

    public event FooEventHandler FirstEvent = delegate {};    
    public event FooEventHandler SecondEvent = delegate {};    
    public event FooEventHandler ThirdEvent = delegate {};    

    public void DoIt()
    {
        FireOne();
        FireTwo();
        FireThree();
    }

    public void FireOne()
    {
        Console.WriteLine("Firing event 1...");
        Thread.Sleep(1000);
        FirstEvent(this, new EventArgs());
    }
    public void FireTwo()
    {
        Console.WriteLine("Firing event 2...");
        Thread.Sleep(1000);
        SecondEvent(this, new EventArgs());
    }
    public void FireThree()
    {
        Console.WriteLine("Firing event 3...");
        Thread.Sleep(1000);
        ThirdEvent(this, new EventArgs());
    }
} 
```

首先，您需要将这些事件“转换”为`Observable`：

```
var foo = new Foo();
var firstWatcher = Observable.FromEventPattern(foo, "FirstEvent");
var secondWatcher = Observable.FromEventPattern(foo, "SecondEvent");
var thirdWatcher = Observable.FromEventPattern(foo, "ThirdEvent"); 
```

现在您需要“仅在所有这些都已触发时触发”选择器，即`CombineLatest`：

```
var allDone = Observable.CombineLatest(firstWatcher, secondWatcher, thirdWatcher); 
```

并对其进行测试：

```
using(allDone.Subscribe(_ => Console.WriteLine("Boop! You sunk my battleship!")))
{
    foo.DoIt();
} 
```

替代“测试工具”：

```
var foo = new Foo();
var firstWatcher = Observable.FromEventPattern(foo, "FirstEvent");
var secondWatcher = Observable.FromEventPattern(foo, "SecondEvent");
var thirdWatcher = Observable.FromEventPattern(foo, "ThirdEvent");

var allDone = Observable.CombineLatest(firstWatcher, secondWatcher, thirdWatcher);

// keep a handle on the subscription            
IDisposable subscription = null;

// to prevent premature exiting...
var blocker = new ManualResetEvent(false);

// explicit subscribe
subscription = allDone.Subscribe(
    whoCares => 
    {
        Console.WriteLine("BOOM! We're done!");
        // always clean up after yourself
        if(subscription != null)
        {
            subscription.Dispose();
        }
        // it's ok, we can quit now
        blocker.Set();
    });

foo.DoIt();

// Wait until it's clear to go ahead...
blocker.WaitOne(); 
```

# jquery - jQuery val() 函数没有正确替换字符串

> ID：14363847
> 
> 赞同：0
> 
> 时间：2013-01-16T17:08:32.943
> 
> 标签：jquery

所以代码应该如何工作是“登录为”被“你好”取代：

```
$("strong:contains('Logged in as:')").val(function (i, w) {
  return w.replace("Logged in as:", "Hello");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:09:32.240

如果您有非输入或文本区域，则需要使用[text()](http://api.jquery.com/text/)或[html()](http://api.jquery.com/html/)而不是[val()](http://api.jquery.com/val/)

```
$("strong:contains('Logged in as:')").text(function(i,w){return w.replace("Logged in as:","Hello");}); 
```

或者

```
$("strong:contains('Logged in as:')").html(function(i,w){return w.replace("Logged in as:","Hello");}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:10:17.027

假设

```
$("strong:contains('Logged in as:')") 
```

正常工作

利用：

```
$("strong:contains('Logged in as:')").text("Hello") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:11:25.977

尝试这个

$("strong:contains('登录为：')").html("Hello");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:11:43.370

不久前我遇到了类似的问题，奇怪的是我通过将语句分成两行来解决它。第一个将值分配给 var，第二个调用`val`.

# java - 使用 GSON 反序列化时，如何确定哪些字段未在原始 JSON 中发送？

> ID：14363856
> 
> 赞同：2
> 
> 时间：2013-01-16T17:08:52.897
> 
> 标签：java, json, gson

我有一个数据结构类和传入`JSON`数据。我使用该`fromJson(jsonData, MyClass)`方法将数据反序列化到类中。传入的`JSON`数据会有所不同，有时某些值不会发送。

我希望能够确定哪些值不是从那些已发送但专门设置为`null`. 初始化我的数据结构类中的字段似乎没有帮助，因为即使它们没有在原始数据中发送，它们在看起来`JSON`的方法中也被设置为 null 。`fromJson()`我似乎也无法让它与反序列化排除策略一起使用。

任何帮助，将不胜感激。

# android - 屏幕旋转后如何禁用禁用的按钮？

> ID：14363860
> 
> 赞同：0
> 
> 时间：2013-01-16T17:08:56.890
> 
> 标签：android, button, screen-rotation

onSaveInstanceState(Bundle outState) ?! 也许更好的主意是...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:09:51.400

```
Override public void onConfigurationChanged(Configuration config) {
//disable your button here(First try, i think it will be disabled already, if not you can add disable code here
} 
```

# hadoop - Elastic Map Reduce JSON 导出到 DynamoDB 错误 AttributeValue 可能不包含空字符串

> ID：14363864
> 
> 赞同：0
> 
> 时间：2013-01-16T17:09:12.353
> 
> 标签：hadoop, hive, amazon-dynamodb, amazon-emr

我正在尝试使用 EMR 作业从 S3 中包含稀疏字段的 JSON 文件导入数据，例如 ios_os 字段和 android_os 但只有一个包含数据。有时数据为空，有时为空字符串，当尝试插入 DynamoDB 时出现错误（尽管我能够插入一些稀疏填充的记录）：

> "AttributeValue 不能包含空字符串" {"created_at_timestamp":1358122714,...,"data":null,"type":"e","android_network_carrier":""}

我过滤掉了具有空字符串“”的列，但我仍然收到该错误。我假设它是“属性”：导致此（或两者）的空值。我假设为了让它正常工作，在去 DynamoDB 时这些值不应该存在吗？

有没有办法通过 JSONSerde 或 Hive 与 DynamoDB 表的交互告诉 Hive 忽略空字符串属性值。

这是 Hive SQL 模式和插入命令的示例：

```
CREATE EXTERNAL TABLE IF NOT EXISTS json_events (
  -- Common
  created_at BIGINT,
  data STRING,
  type STRING,
  android_network_carrier STRING
)
PARTITIONED BY (created_at BIGINT, type STRING)
ROW FORMAT SERDE "org.apache.hadoop.hive.contrib.serde2.JsonSerde"
WITH SERDEPROPERTIES (
  -- Common
  "created_at"="$.created_at",
  "data"="$.data",
  "android_network_carrier"="$.anw",
  "type"="$.dt"
)
LOCATION s3://test.data/json_events;

CREATE EXTERNAL TABLE IF NOT EXISTS dynamo_events (
  -- Common
  created_at BIGINT,
  data STRING,
  type STRING,
  android_network_carrier STRING
)
STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler' 
TBLPROPERTIES ("dynamodb.table.name" = "test-events", 
"dynamodb.column.mapping" = "created_at:created_at,data:data,type:type,android_network_carrier:android_network_carrier"); 
ALTER TABLE json_events RECOVER PARTITIONS;

INSERT OVERWRITE TABLE dynamo_events
SELECT created_at,
  data,
  android_network_carrier,
  type
FROM json_events 
WHERE created_at = 20130114 AND type = 'e'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:58:42.977

`null`只要不用于主键， s 就不应该成为问题。

但是，DynamoDB 不允许空字符串或空集，如[数据模型中所述](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html)。

为了解决这个问题，我认为你有几个选择：

1.  为“n/a”等空字符串定义一个常量，并确保您的数据提取过程将缺失值视为此类。
2.  您也可以过滤这些记录，但这将意味着丢失数据。这可以这样做：

    ```
    INSERT OVERWRITE TABLE dynamo_events
    SELECT created_at,
      data,
      android_network_carrier,
      type
    FROM json_events 
    WHERE created_at = 20130114 AND type = 'e' AND android_network_carrier != ""; 
    ```

# c++ - Googletest 参数化测试崩溃

> ID：14363874
> 
> 赞同：3
> 
> 时间：2013-01-16T17:09:41.740
> 
> 标签：c++, unit-testing, googletest

我刚刚了解了[googletest 中的值参数化单元测试，](https://github.com/google/googletest/blob/master/docs/advanced.md#value-parameterized-tests)并希望在我的项目中使用它们。

我写了一个简单的参数化测试。

标题：

```
#include <gtest/gtest.h>

namespace EnsembleClustering {

class ParametrizedGTest: public testing::TestWithParam<int> {
public:
    ParametrizedGTest();
    virtual ~ParametrizedGTest();
};

} /* namespace EnsembleClustering */ 
```

资源：

```
#include "ParametrizedGTest.h"

namespace EnsembleClustering {

ParametrizedGTest::ParametrizedGTest() {
    // TODO Auto-generated constructor stub

}

ParametrizedGTest::~ParametrizedGTest() {
    // TODO Auto-generated destructor stub
}

TEST_P(ParametrizedGTest, testParameter) {
    int n = GetParam();
    EXPECT_EQ(n, GetParam());
}

INSTANTIATE_TEST_CASE_P(ParametrizedGTestInstance,
                        ParametrizedGTest,
                        ::testing::Values(100));

} /* namespace EnsembleClustering */ 
```

现在，当我像往常一样运行 googletest 时，程序崩溃而没有任何输出。gdb 堆栈跟踪是

```
EnsembleClustering-D [C/C++ Application]    
    EnsembleClustering  
        Thread [1] (Suspended : Signal : EXC_BAD_ACCESS:Could not access memory)    
            __gnu_debug::_Safe_sequence_base::_M_attach_single() at 0x100528add 
            __gnu_debug::_Safe_sequence_base::_M_attach() at 0x100528a74    
            __gnu_debug::_Safe_iterator_base::_M_attach() at 0x100528bfe    
            __gnu_debug::_Safe_iterator_base::_Safe_iterator_base() at safe_base.h:90 0x1000016e9   
            __gnu_debug::_Safe_iterator<__gnu_cxx::__normal_iterator<testing::internal::ParameterizedTestCaseInfoBase**, std::__cxx1998::vector<testing::internal::ParameterizedTestCaseInfoBase*, std::allocator<testing::internal::ParameterizedTestCaseInfoBase*> > >, std::__debug::vector<testing::internal::ParameterizedTestCaseInfoBase*, std::allocator<testing::internal::ParameterizedTestCaseInfoBase*> > >::_Safe_iterator() at safe_iterator.h:154 0x100002e9c    
            std::__debug::vector<testing::internal::ParameterizedTestCaseInfoBase*, std::allocator<testing::internal::ParameterizedTestCaseInfoBase*> >::begin() at vector:207 0x100001fbe  
            testing::internal::ParameterizedTestCaseRegistry::GetTestCasePatternHolder<EnsembleClustering::ParametrizedGTest>() at gtest-param-util.h:574 0x1000025b0   
            EnsembleClustering::ParametrizedGTest_testParameter_Test::AddToRegistry() at ParametrizedGTest.cpp:22 0x100001d3f   
            __static_initialization_and_destruction_0() at ParametrizedGTest.cpp:22 0x100001349 
            _GLOBAL__sub_I_ParametrizedGTest.cpp() at ParametrizedGTest.cpp:32 0x100001424  
            <...more frames...> 
    gdb 
```

我做错了什么还是这是googletest中的错误？你能重现这个错误吗？

编辑：我在 Mac OS X 10.8 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:29:56.087

从查看 gtest 的源代码来看，如果没有可用的参数化测试，唯一的情况是在 Windows 上使用 VC7.1 并禁用异常：

```
// We don't support MSVC 7.1 with exceptions disabled now.  Therefore
// all the compilers we care about are adequate for supporting
// value-parameterized tests.
#define GTEST_HAS_PARAM_TEST 1 
```

那么，您需要检查您的 MinGW 是如何构建的并可能对其进行更新？您可以运行 gtest 单元测试来查看它们是否执行类型化参数测试吗？

有关 MinGW 的更多信息：

在他们的[常见问题解答](https://code.google.com/p/googletest/wiki/FAQ#Can_I_use_Google_Test_on_MinGW?)中，他们报告说，在使用 MinGW 时，需要以下编译选项来构建 gtest `PATH/TO/configure CC="gcc -mno-cygwin" CXX="g++ -mno-cygwin"`：.

完整示例：

```
#include <gtest/gtest.h>
namespace EnsembleClustering {

    class ParametrizedGTest: public testing::TestWithParam<int> {
    public:
        ParametrizedGTest();
        virtual ~ParametrizedGTest();
    };

    ParametrizedGTest::ParametrizedGTest() {
    }

    ParametrizedGTest::~ParametrizedGTest() {
    }

    TEST_P(ParametrizedGTest, testParameter) {
        int n = GetParam();
        EXPECT_EQ(n, GetParam());
    }

    INSTANTIATE_TEST_CASE_P(ParametrizedGTestInstance,
                            ParametrizedGTest,
                            ::testing::Values(100));

} /* namespace EnsembleClustering */

int main(int argc, char* argv[]) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
} 
```

我在 Mac OS X 10.8 上使用以下编译器调用编译了这段代码：

```
g++ -IGTEST_INCLUDE_DIR -LGTEST_LIB_DIR -lgtest -o tt2 tt2.cpp 
```

Where`GTEST_INCLUDE_DIR`和`GTEST_LIB_DIR`是存储头文件和库文件的路径。当你编译和执行时，会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T07:09:58.640

谢谢@ChristianStaudt 和@grundprinzip

我想向未来的读者指出解释此问题的以下链接。 [http://libcwd.sourceforge.net/reference-manual/group__enable__glibcxx__debug.html](http://libcwd.sourceforge.net/reference-manual/group__enable__glibcxx__debug.html)

这是 GLIBCXX_DEBUG 标志文档的链接。它陈述了以下要点。

*   “请注意，此标志会更改标准类模板（例如 std::vector）的大小和行为，因此如果在两个转换之间没有传递容器的实例化，您只能链接使用调试模式编译的代码和不使用调试模式编译的代码单位。”

*   “什么时候用

    如果您怀疑与迭代器相关的问题，最好使用它。”

现在，如果您查看最初发布的堆栈跟踪，则会发生崩溃，`vector<testing::internal::ParameterizedTestCaseInfoBase*>`因为 gtest 尝试使用 begin() 方法在此容器上获取​​迭代器。

在我的例子中，gtest lib 是在**没有**GLICXX_DEBUG 标志的情况下编译的，但是我的测试代码是**用**这个标志编译的。当我在没有这个标志的情况下编译时，测试代码就像一个魅力。

# ruby - 按行号搜索和替换部分文件

> ID：14363880
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:09:56.797
> 
> 标签：ruby, regex, file, copy

我想编写一个 Ruby 脚本，它会从一个文件中复制特定的代码行并将它们插入到另一个文件中。如果可能的话，我希望结果与我在 file_1 中突出显示一些行，复制它们，然后将光标放在 file_2 的中间并将复制的代码粘贴到（即下面的 file_2 中的代码）相同插入点将向下移动...）。

我过去曾编写脚本，将文件的全部内容插入到一个空文件中，但我希望将一个文件中的某些行“复制并粘贴”到另一个文件的中间。是否可以按行号搜索文件？我的总体目标可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:16:36.247

试试 each_with_index，如果你可以将整个文件保存在内存中，那么脚本非常简单。

```
IO.readlines("/etc/passwd").each_with_index do |line, line_num|
  if (line_num % 6 == 2)
    puts line 
  end
end 
```

然后，您可以重定向到一个新文件或打开一个新文件并使用

```
opened_file.puts line 
```

如果您有行号列表，您也可以浏览这些行号：

```
lines = IO.readlines(file)
line_numbers.each do |i|
   puts lines[i]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:19:17.950

只需使用 split 函数将文本转换为数组，然后您可以按数字甚至范围选择行：

```
arraytext = filetext.Split("\n")
arraytext[0] #for first line 
```

# javascript - 在 AngularJS 中使用循环和 ng-class 创建包装器 DIV

> ID：14363888
> 
> 赞同：2
> 
> 时间：2013-01-16T17:10:18.323
> 
> 标签：javascript, angularjs, wrapper, timeline

我目前正在使用 AngularJS 创建动态时间线。我的时间线中的数据是从我已经成功配置的 JSON 文件中获取的。这是我目前在 PLNKR 上的内容：http: [//plnkr.co/edit/avRkVJNJMs4Ig5mDrwJ8](http://plnkr.co/edit/avRkVJNJMs4Ig5mDrwJ8)

这是我目前的导航：

```
 <nav id="sticky-navigation">
      <ul>
          <li><a href="#decade-1960s">1960</a></li>
          <li><a href="#decade-1970s">1970</a></li>
          <li><a href="#decade-1980s">1980</a></li>
          <li><a href="#decade-1990s">1990</a></li>
          <li><a href="#decade-2000s">2000</a></li>
          <li class="active"><a href="#decade-2010s">2010-Now</a></li>
      </ul>
  </nav> 
```

我基本上想为“decade-1960s”、“decade-1970s”等的唯一 ID 创建包装 div，以便用户可以使用导航有效地导航到他们最感兴趣的十年。日期是从 JSON 文件中解析出来的，所以我想知道还有另一个从 JSON 中获取年份，根据特定的十年组织事件，然后为每个十年添加一个包装器。

非常感谢！我知道这听起来很复杂！但我更多的是前端开发人员和设计师，而不是后端程序员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:22:59.437

**这是一般的想法**：

这类似于分页。从您的所有记录（事件）中获取十年，然后将它们分组到页面中（每十年一个）。一旦你的中继器依赖于这个`eventsByDecade`数组，angularjs 将完成所有繁重的工作。

**以下是一些指导方针：**

使用 json 文件填充`events`变量后，创建一个数组并根据日期填充它。为此，您需要检查`event.theDate.getFullYear()`每个事件。

然后，根据年份，您可以获得十年，也许使用`year.substring(0,2)`（仅使用前 3 位数字）。

接下来，将它们按十年分组到一个数组中，然后将每个十年数组分配到一个主`eventsByDecade`数组中。

最后，将中继器从以下位置更改：

```
ng-repeat="event in events | filter:query | orderBy:orderProp:true" 
```

使用您的“分页”数组：

```
ng-repeat="event in eventsByDecade[currentIndex] | filter:query | orderBy:orderProp:true" 
```

在这里，`currentIndex`每当点击链接时都会设置，例如：

```
<li><a href="#decade-1960s" ng-click="currentIndex = 1">1960</a></li> 
```

**更新：操作 json**

JSON 评估为 JavaScript 对象。所以你可以像这样迭代你的事件：

```
for(var event in events){
 event.theDate; //this object should have properties such as the date
} 
```

# r - 一张图中的多个filled.countour 图

> ID：14363890
> 
> 赞同：0
> 
> 时间：2013-01-16T17:10:27.967
> 
> 标签：r, graph, plot, contour

我有一个包含连续变量 x、因子 y 和连续变量 z 的数据框

为了说明假设

```
x <- 1:5
y <- c("A", "B", "C", "D", "E")

z.a<-sort(sample(x=seq(0,1,0.1),size=5, replace=F))
z.b<-sort(sample(x=seq(0,1,0.1),size=5, replace=F))
z.c<-sort(sample(x=seq(0,1,0.1),size=5, replace=F))
z.d<-sort(sample(x=seq(0,1,0.1),size=5, replace=F))
z.e<-sort(sample(x=seq(0,1,0.1),size=5, replace=F)) 
```

现在我想构建以下情节

```
plot(x,y, yaxt="n", type="n",ylim=c(0,5),yaxs="i")
axis(2, at=seq(0.5,4.5,1), labels=c("A", "B", "C", "D", "E"))
abline(h=0:5) 
```

![在此处输入图像描述](../Images/56e07fd67fd9f06d313f7652f9c5fcaf.png)

现在对于`y`（显示在 y 轴上）的每个级别，我希望框根据各自的 z 值填充颜色。例如`A`情节的 the 应该用`z.a`, the `B`with`z.b`

都`z`包含相同比例（0,1）的值，并且总是随着减少而减少`x`

有没有执行这些情节的包？如果没有，我该如何在base R中编码？

我更喜欢基本的 R 解决方案，但如果不可能，任何其他解决方案都可以。

或者，该图可以被视为 y 的每个级别的水平条形图，范围为 x 的整个范围，其颜色将归因于 z（在每个 x 处）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:35:00.867

这是使用`ggplot2`库的解决方案。

首先，将所有数据放入一个数据框中。

```
df<-data.frame(x = rep(1:5,times=5),
               y = rep(c("A", "B", "C", "D", "E"),each=5),
               z= c(sort(sample(x=seq(0,1,0.1),size=5, replace=F)),
                    sort(sample(x=seq(0,1,0.1),size=5, replace=F)),
                    sort(sample(x=seq(0,1,0.1),size=5, replace=F)),
                    sort(sample(x=seq(0,1,0.1),size=5, replace=F)),
                    sort(sample(x=seq(0,1,0.1),size=5, replace=F)))) 
```

然后用于根据值`geom_tile()`获取每个级别的颜色。`y``z`

```
library(ggplot2)
ggplot(df,aes(x=x,y=y,fill=z))+geom_tile()+
  scale_x_continuous(expand = c(0, 0)) + scale_y_discrete(expand = c(0, 0)) 
```

![在此处输入图像描述](../Images/f6e8a6c35ea8ed059a25e9704f4042bb.png)

### 更新 - 使用功能图像的解决方案

`image()`通过基础系统的功能可以得到类似的结果。

首先，`z`使用 function 将所有值放在一个数据框中`cbind()`。还制作了新的 x 和 y 值。

```
z2<-cbind(z.a,z.b,z.c,z.d,z.e)
x2<-1:5
y2<-1:5 
```

使用函数绘制`z`值`image()`。然后用函数添加轴`axis()`。`image.plot()`使用从库中显示图例函数`fields`。在这两个功能中，`col=`应使用相同的设置。`image.plot()`可以生成整个图，但此功能不允许正确修改轴。

```
par(mar=c(5,5,5,8)) #sets space for legend on right side
image(x2,y2,z2,axes=F,col=rainbow(10))
axis(1,at=1:5)
axis(2,at=1:5,labels=c("A", "B", "C", "D", "E"))
box()
library(fields)
image.plot(x2,y2,z2,legend.only=T,col=rainbow(10)) 
```

![在此处输入图像描述](../Images/b1053da923cc22a6078c256c7d1b6f41.png)

# android - 电池耗尽时丢失数据

> ID：14363891
> 
> 赞同：1
> 
> 时间：2013-01-16T17:10:29.053
> 
> 标签：android

我们有一个奇怪的错误。如果电池耗尽，我们的应用程序将丢失其数据（存储在 SQLite 中），但如果我们强行终止应用程序然后电池耗尽，则不会。

我们不确定是什么原因造成的。

编辑1：

丢失数据意味着什么？

1.  当用户注册时，我们保存他的用户名等。
2.  当应用程序关闭，强制关闭并且用户再次打开应用程序时，用户名就在那里
3.  当电池耗尽并且应用程序在前台运行时。电池充电后，用户再次打开应用程序，用户名消失了。

对象如何存储：

```
 public Void perform(SQLiteDatabase db) {
                final ConfigEntry entry = new ConfigEntry(property, value);

                if(contains(property)) {
                    db.update(ConfigEntry.TABLE_NAME, databaseAdapter.convertToContentValues(entry), ConfigEntry.COLUMN_NAME + " = ?", new String[] { property });
                } else {
                    db.insertOrThrow(ConfigEntry.TABLE_NAME, null, databaseAdapter.convertToContentValues(entry));
                }
                return null;
            }
        }); 
```

所以基本上 db.insertOrThrow 被调用。

这是我们初始化数据库的方式：

```
 public  S doInTransaction(TransactionTask task) {
        DatabaseHelper mDbHelper = DatabaseHelper.getInstance(mContext);
        SQLiteDatabase mDb = mDbHelper.getWritableDatabase();
        mDb.setLockingEnabled(true);
        mDb.beginTransaction();
        try {
            S result = task.perform(mDb);
            mDb.setTransactionSuccessful();
            return result;
        } finally {
            mDb.endTransaction();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:43:16.893

问题是您正在使用`beginTransaction()`. 如果您有电话 `beginTransaction()`，您需要拨打：

```
db.setTransactionSuccessful();
   } finally {
     db.endTransaction();
   } 
```

下面或您的数据**将不会被保存**。原因在[sqlite手册](http://www.sqlite.org/lang_transaction.html)

中并且您的数据没有保存的原因是，如果您开始事务并且 `db.setTransactionSuccessful();`由于系统试图关闭它而没有被调用，那么数据将不会被保存。但是`finally{}`可能仍然会被调用，但这不会改变`db.setTransactionSuccessful();`未被调用的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:24:11.190

我不确定，但我希望我能提供一些问题或灵感来深入挖掘：

1.  您是否监控过您的数据库是否完成了完整的初始创建过程，或者表是否存在但只有用户名丢失？您可以从设备上下载数据库文件并在您的 PC 上的 SQLite 工具中检查内容吗？

2.  您在里面打开数据库，`doInTransaction()`但不在那里关闭它：

    ```
    public S doInTransaction(TransactionTask task) {
        DatabaseHelper mDbHelper = DatabaseHelper.getInstance(mContext);
        SQLiteDatabase mDb = mDbHelper.getWritableDatabase();
        //mDb.setLockingEnabled(true); // true is default, so it can be removed
        mDb.beginTransaction();
        S result = null;
        try {
            result = task.perform(mDb);
            mDb.setTransactionSuccessful();
        } finally {
            // rolls back if setTransactionSuccessful() wasn't called
            mDb.endTransaction();
            mDb.close();
        }
        return result;
    } 
    ```

3.  你完全确定你使用的是同一个数据库吗？我问是因为我曾经看到有人使用时间戳作为数据库名称的一部分。

4.  您不是错误地创建了[内存数据库](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#create%28android.database.sqlite.SQLiteDatabase.CursorFactory%29)吗？

5.  设备因电池电量不足而死机有多种不同的方式：它可能只是死机，或者它实际上设法紧急关闭。哪一个是这样的？您是否有任何日志记录可以提供您的应用程序关闭时的一些内部信息？

总结一下：我怀疑原因在于您提供的代码，正如您所提到的，代码仅在按下按钮时执行。这将上述问题留待进一步调查（当然，有些我可能错过了......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:01:02.293

非常感谢大家的帮助，我们终于找到了答案。

**我们正在使用用户密码加密我们的数据库，并使用设备的MAC 地址**对密码进行加盐处理。

发生的情况是，有时当用户在启动后没电时，当我们的应用程序运行并且我们请求 MAC 地址时它失败了，因为它仍然被禁用的网卡或其他东西。在这种情况下，我们创建了一个新的盐，当尝试读取数据库时它会失败。

# php - 检查字符串是否等于、以匹配开头或以匹配结尾

> ID：14363893
> 
> 赞同：0
> 
> 时间：2013-01-16T17:10:31.520
> 
> 标签：php

为此，我将如何改进此功能：在数组中搜索字段名称：

*   a) 完全匹配
*   b）带有“_”的存在检查字符串是否以
*   c) 以“_”结尾 检查字符串是否以

例如，我有一个列名列表：

```
array(
    'customer_name',
    'customer_lastname',
    'customer_streetname',
    'customer_dob',
    'system_modified'
) 
```

另一个带有格式化条件的数组：

```
array(
    '_dob' => 'date_dob',
    '_name' => 'varchar',
    'customer_name' => 'html_text',
    'system_' => 'required'
) 
```

结果将条件应用于列名：

```
1\. customer_name = html_text (exact matches have higher preference)
2\. customer_lastname = varchar
3\. customer_streetname = 
4\. customer_dob = dob
5\. system_modified = required 
```

目前有这个：

```
protected function matchPatterns($string) {
    $return = array();
    $parrerns = $this->_normaliseArrayItem($this->getPatterns());
    foreach ($parrerns as $match) {

        // If exact match
        if($string == $match) {
            $return[] = $match;
            break;
        // Else if begins with _ and ends with string.
        } elseif($string[0] == "_" && substr_compare($string, $match, -strlen($match), strlen($match)) === 0) {
            $return[] = $match;
        }

    } // end loop
    return $return;
}

/**
 * Return an array of validation patterns.
 *
 * @return string[]
 */
public function getPatterns() {
    return $this->_patterns;
}

/**
 * Returns an item as array rather than single item.
 *
 * @param string[] $data
 * @return string[]
 */
protected function _normaliseArrayItem($data) {
    if(!isset($data[0])|| !is_array($data)) {
        $tmp[] = $data;
        $data = $tmp;
    }
    return $data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:13:22.203

改编自 Marc 的解决方案。

```
if(substr($str, 0, 1) === '_' || substr($str, -1) === '_') {
    // it starts or ends with an underscore
} else if($str == $match) {
    // it's the same
} 
```

我不完全理解你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:31:45.557

```
foreach ($parrerns as $match => $format) {
    // If exact match
    if($string == $match) {
        $return[] = $format;
        break;
    // Else if begins with _ and string ends with it.
    } elseif($match[0] == "_" && substr_compare($string, $match, -strlen($match), strlen($match)) === 0) {
        $return[] = $format;
    // Else if ends with _ and string begins with it
    } eleif (substr($match, -1) == "_" && substr_compare($string, $match, 0, strlen($match)) == 0) {
        $return[] = $format;
 } 
```

# asp.net-mvc - Kendo UI Grid DateTimePicker 编辑器模板 - 保持价值

> ID：14363894
> 
> 赞同：2
> 
> 时间：2013-01-16T17:10:36.450
> 
> 标签：asp.net-mvc, datetimepicker, kendo-grid

我有一个带有 asp.net mvc 语法的 Kendo UI Grid。我有一个带有日期时间的列以及一个用于编辑的编辑器模板。当我单击编辑时，它会显示日期时间选择器，但我不确定如何保留当前值（InvoicedDate）（如果已经存在）。有任何想法吗？

编辑：当我选择一个日期时，它也不会将该值拉回更新操作中。我认为这些问题是相关的。

**发票网格：**

```
@(Html.Kendo().Grid<TMS.MVC.TIMS.Models.Invoice.InvoiceGridModel>()
<snip>
 columns.Bound(o => o.InvoicedDate).Width(100).Title("Invoice Date").Format("{0:M/d/yyyy}").EditorTemplateName("Invoice_InvoiceDate");
<snip> 
```

**编辑器模板 (Invoice_InvoiceDate.cshtml)：**

```
@model TMS.MVC.TIMS.Models.Invoice.InvoiceGridModel

   @(Html.Kendo().DateTimePicker()
                    .Name("InvoiceDate")
                    .Value(Model == null ? DateTime.Now : Model.InvoicedDate)
                    .Format("M/d/yyyy h:mm tt")
   ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T12:43:09.013

我相信你的问题是你的 editorTemplate 试图接受

```
@model TMS.MVC.TIMS.Models.Invoice.InvoiceGridModel 
```

这不起作用，因为您调用 editorTemplate 的网格列可能是 DateTime 类型。由于类型不匹配，您总是会在编辑器模板中显示 null 作为模型的值。试试这个。

```
@model DateTime? 
@(Html.Kendo().DateTimePicker()
                .Name("InvoiceDate")
                .Value(Model == null ? DateTime.Now : @Model)
                .Format("M/d/yyyy h:mm tt")
) 
```

# c# - XAML 中的颜色反转

> ID：14363898
> 
> 赞同：2
> 
> 时间：2013-01-16T17:10:52.173
> 
> 标签：c#, xaml, windows-phone-8, inverse

在我的 WP8 应用程序中，我想制作颜色反转效果。我不知道我应该使用什么工具，所以我只会用非常笼统的术语解释我想要什么。

它应该如何工作：假设我有一个`UserControl`由黑色矩形和顶部的一些白色文本组成的。我想对那个用户控件应用*一些东西*`UserControl`，它会反转它所覆盖的一部分的颜色。一些跨越 50%`UserControl`且在该区域中的不可见矩形背景将是白色，文本将是黑色。我希望它是动态的，所以我可以在运行时更改它覆盖的区域。

这是一张图片来说明这一点：
![在此处输入图像描述](../Images/e76dbbe4be53b7230c72a8f92879461d.png)

反转效果应用于一半的控制。

我相信可以通过使用具有相同文本、反转颜色和不透明蒙版的两个控件来实现这一点，但我想知道这是否可以以更干净和直接的方式完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:52:30.467

我认为理想情况下您要寻找的要么是两个`TextBlocks`，要么`OpacityMask`应用于顶部的一个；

```
<Grid MaxWidth="100">
    <TextBlock Text="Hey check it out we can change object gradients! yay!" Foreground="Red"
               TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    <TextBlock Text="Hey check it out we can change object gradients! yay!" Foreground="Blue"
               TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Center">
             <TextBlock.OpacityMask>
                 <LinearGradientBrush StartPoint="0.1,0.1" EndPoint="0.75,0.75">
                  <LinearGradientBrush.GradientStops>
                    <GradientStop Offset="0.322" Color="Black"/>
                    <GradientStop Offset="0.739" Color="Transparent"/>
                  </LinearGradientBrush.GradientStops>
                </LinearGradientBrush>
            </TextBlock.OpacityMask>
    </TextBlock>               
</Grid> 
```

或者您可以直接将 a 应用于`LinearGradientBrush`（`Foreground`或`Background`其他元素）本身，例如；

```
<Border Width="100" Height="50">
        <Border.Background>
                <LinearGradientBrush StartPoint="0.062,0.552" EndPoint="0.835,0.548">
                  <LinearGradientBrush.GradientStops>
                    <GradientStop Offset="0.5" Color="White"/>
                    <GradientStop Offset="0.5" Color="Black"/>
                  </LinearGradientBrush.GradientStops>
                </LinearGradientBrush>
            </Border.Background>

        <TextBlock Text="Hello World!" HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock.Foreground>
                <LinearGradientBrush StartPoint="0.1,0.1" EndPoint="0.75,0.75">
                  <LinearGradientBrush.GradientStops>
                    <GradientStop Offset="0.5" Color="Black"/>
                    <GradientStop Offset="0.5" Color="White"/>
                  </LinearGradientBrush.GradientStops>
                </LinearGradientBrush>
            </TextBlock.Foreground>
        </TextBlock>

    </Border> 
```

或开始 80 年代风格的幻想；

```
<Border Width="100" Height="50">
        <Border.Background>
                <LinearGradientBrush StartPoint="0.472,0.047" EndPoint="0.47,0.942">
                  <LinearGradientBrush.GradientStops>
                    <GradientStop Offset="0.541" Color="White"/>
                    <GradientStop Offset="0.548" Color="Black"/>
                  </LinearGradientBrush.GradientStops>
                </LinearGradientBrush>
            </Border.Background>

            <TextBlock Text="Hello World!" HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock.Foreground>
                    <LinearGradientBrush StartPoint="0.472,0.047" EndPoint="0.47,0.942">
                      <LinearGradientBrush.GradientStops>
                        <GradientStop Offset="0.631" Color="Black"/>
                        <GradientStop Offset="0.635" Color="White"/>
                      </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </TextBlock.Foreground>
            </TextBlock>

    </Border> 
```

试一试，希望这会有所帮助。

# visual-studio - 视觉工作室 2012 小工具

> ID：14363899
> 
> 赞同：1
> 
> 时间：2013-01-16T17:10:55.733
> 
> 标签：visual-studio, visual-studio-2012

我需要为 Visual Studio 2012 上的一个大项目编写一些 .Net Gadgeteer 模块。不幸的是，我找不到 Gadgeteer 的模板。我发现的所有教程都说我必须使用 Visual c# 或 Visual Studio 2012。

你知道是否存在一些合适的模板吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:29:07.560

这些模板可以在 codeplex 项目中找到。[https://gadgeteer.codeplex.com/](https://gadgeteer.codeplex.com/)

这是设置环境的详细教程。[http://gadgeteerguy.com/Tutorials/TutorialView/tabid/147/ArticleId/23/Getting-Started-Guide.aspx](http://gadgeteerguy.com/Tutorials/TutorialView/tabid/147/ArticleId/23/Getting-Started-Guide.aspx)

# git - 主分支反映旧版本

> ID：14363903
> 
> 赞同：0
> 
> 时间：2013-01-16T17:11:08.837
> 
> 标签：git, git-branch

我有三个分支：

*   `master`
*   `version1`
*   `version2`

`master`并且`version1`是相同的，这是正常的吗？或者应该`master`反映最新的版本`version2`？

我在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:40:55.267

我们使用每个功能的分支，版本只是潜在发布候选版本的标签，或者是那些实际进入生产环境的标签。这些通常在主分支上。这是我在每个功能的分支上所做的文章。它涉及您标记版本的位置以及何时合并到 master：[http ://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

# android - 使用地址打开默认导航应用

> ID：14363907
> 
> 赞同：3
> 
> 时间：2013-01-16T17:11:18.193
> 
> 标签：android

如何启动 Intent 以打开默认导航应用程序（例如 Google Navigation 或 Google Maps）或让用户有机会在导航应用程序中进行选择。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:16:52.990

您必须使用带有 ACTION_VIEW 和`geo`数据方案的 Intent。

使用的问题`geo:latitude,longitude`是谷歌地图只以你的点为中心，没有任何别针或标签。

这很令人困惑，特别是如果您需要指向一个精确的位置或/并询问方向。

如果您使用查询参数`geo:lat,lon?q=name`来标记您的地理点，它会使用查询进行搜索并忽略纬度和经度参数。

我找到了一种将地图以经纬度居中并显示带有自定义标签的图钉的方法，在询问方向或任何其他操作时显示非常好并且很有用：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("geo:0,0?q=37.423156,-122.084917 (" + name + ")");
startActivity(intent); 
```

[此意图来自此处](http://developer.android.com/guide/appendix/g-app-intents.html)的官方“G 应用程序”意图列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:15:18.837

尝试：

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("google.navigation:q=New+York+NY")); startActivity(i); 
```

或者使用这个，这样标准的导航应用就会启动：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345"));
startActivity(intent); 
```

如果您不想弹出对话框，请在 startActivity 之前添加此行：

```
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity"); 
```

另请参阅：[如何以编程方式检查 Android 中是否安装了应用程序？](https://stackoverflow.com/questions/11392183/how-to-check-if-the-application-is-installed-or-not-in-android-programmatically)和[Android：检测何时安装应用程序](https://stackoverflow.com/questions/11394141/android-detect-when-app-is-installed)，您可以制作自己的窗口，以便用户可以在某些应用程序之间进行选择。

# java - MySQL 连接器类路径

> ID：14363914
> 
> 赞同：0
> 
> 时间：2013-01-16T17:11:44.513
> 
> 标签：java, mysql, linux, jdbc

我的 $CLASSPATH 技能不是太好，我无法设置 mysql-connector 以使用我的 MySQLAccess 类。我编译并将 MySQLAccess 类放在与 my-sql-connector.jar 相同的目录中这是我的代码：

```
java -classpath :/home/rick/Downloads/mysql-connector-java-5.1.22/mysql-connector-java-5.1.22-bin.jar MySQLAccess

Exception in thread "main" java.lang.NoClassDefFoundError: MySQLAccess
Caused by: java.lang.ClassNotFoundException: MySQLAccess
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: MySQLAccess. Program will exit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:15:08.167

放一个`.`表示当前位置的也

```
java -classpath /home/rick/Downloads/mysql-connector-java-5.1.22/mysql-connector-java-5.1.22-bin.jar:. MySQLAccess 
```

# sql - 如何编写需要创建 id 并稍后在同一过程中使用的存储过程？

> ID：14363918
> 
> 赞同：0
> 
> 时间：2013-01-16T17:12:15.857
> 
> 标签：sql, stored-procedures, insert

我正在尝试编写一个存储过程，它将新用户（NonMembers 表）的详细信息写入数据库，然后在代码的下一部分中使用该用户自动生成的 id 将该用户注册到比赛（注册桌子）。我这样做的尝试如下，但显然我的 SQL 技能距离他们需要的地方还有很长的路要走？

所有帮助将不胜感激。

```
ALTER PROCEDURE [dbo].[RegisterNonMember]
    @CompetitionId INTEGER,
    @IsMember BIT,
    @FirstName  NVARCHAR(50),
    @Surname  NVARCHAR(50),
    @Handicap INTEGER,
    @Club NVARCHAR(50),
    @CountyId INTEGER,
    @CountryId INTEGER,
    @PlayersStartTime TIME

AS
BEGIN

DECLARE @NonMember TABLE
    (NonMemberId INTEGER,
    FirstName  NVARCHAR(50),
    Surname  NVARCHAR(50),
    Handicap INTEGER,
    Club NVARCHAR(50),
    CountyId INTEGER,
    CountryId INTEGER
) 
INSERT INTO [dbo].[NonMembers]
           (
           FirstName
           ,Surname
           ,[Handicap]
           ,[Club]
           ,CountyId
           ,CountryId       
)
     VALUES
           (@FirstName
           ,@Surname
           ,@Handicap
           ,@Club
           ,@CountyId
           ,@CountryId
           )

--UPDATE    @NonMember
--SET       [@NonMember].NonMemberId = [dbo].[NonMembers].[NonMemberId]
--FROM  [dbo].[NonMembers]
--JOIN  @NonMember ON [@NonMember].NonMemberId = [dbo].[NonMembers].[NonMemberId]
--WHERE @NonMember.FirstName = [dbo].[NonMembers].[FirstName]
--AND       @NonMember.Surname = [dbo].[NonMembers].[Surname]
--AND       @NonMember.Handicap = [dbo].[NonMembers].[Handicap]
--AND       @NonMember.Club = [dbo].[NonMembers].[Club]

DECLARE @Registration TABLE
    (CompetitionId INTEGER,
    IsMember BIT,
    NonMemberId INTEGER,
    PlayersStartTime TIME
    )

INSERT INTO [dbo].[Registration]
            (
            [CompetitionId]
            ,[IsMember]
            ,[NonMemberId]
            ,[PlayersStartTime])
    VALUES
            (@CompetitionId
            ,@IsMember
            ,@NonMemberId
            ,@PlayersStartTime)  
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:15:20.980

添加后`INSERT`：

```
DECLARE @UserID INT
SELECT @UserID = SCOPE_IDENTITY() 
```

# c# - 通过 C# 在 Windows8 中检查 Internet 连接失败

> ID：14363920
> 
> 赞同：1
> 
> 时间：2013-01-16T17:12:18.520
> 
> 标签：c#, .net, windows-8, windows-store-apps

我正在尝试从我的 C# 应用程序测试 Windows8 中的 Internet 连接。我有一个布尔类型的变量，它返回连接状态。当布尔值为真时：什么都不做。当布尔值变为假时，加载我的“ `NetworkDisconection`”页面。但是，当我调试这一行时：

```
if (this.Frame != null) 
```

我得到一个例外：

> *应用程序调用了为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）*

是的，这个方法在不同的线程上。我该如何解决这个问题？

```
private bool bConection;

public HUB()
    {
        this.InitializeComponent();
        bConection = NetworkInformation.GetInternetConnectionProfile()!= null;
        NetworkInformation.NetworkStatusChanged += NetworkInformation_NetworkStatusChanged;
    }

    void NetworkInformation_NetworkStatusChanged(object sender)
    {

        if (NetworkInformation.GetInternetConnectionProfile() == null)
        {
            if (bConection == false)
            {
                bConection = true;
            }   
        }
        else
        {
            if (bConection == true)
            {
                bConection = false;

                if (this.Frame != null)
                {
                    Frame.Navigate(typeof(NetworkDisconection));
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:53:45.253

使用以下代码，它应该可以解决您的问题...

```
 Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
            {
                if (this.Frame != null)
                {
                    Frame.Navigate(typeof(NetworkDisconection));
                }
            }); 
```

您应该能够直接获取 Dispatcher，因为您的代码看起来像是在 XAML 页面的代码隐藏中（参考 this.Frame）。

[在 C # Win8 开发论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/threads)中可以找到大量有用的信息。搜索 Dispatcher，你会发现关于它的几个讨论。与往常一样，请查看[GenApp](http://aka.ms/30Days)以获取其他重要资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:59:35.717

该事件在**非 UI 线程**`NetworkInformation.NetworkStatusChanged`上引发。与*WinForms*和*WPF*类似，您仍然只能访问 UI 线程上的控件。

 ****为了解决这个问题，您必须调用 UI 线程，类似于在*WinForms*或*WPF*上使用`this.Invoke`/的方式`this.Dispatcher.Invoke`。

起初你可能会尝试使用`Window.Current.Dispatcher.RunAsync()`，但你会注意到它`Window.Current`总是`null`在这里。

相反，您应该`CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync()`在`Windows.ApplicationModel.Core`命名空间中使用。是的，这肯定是相当拗口，所以我推荐*App.cs*中的这个辅助方法。

```
using Windows.ApplicationModel.Core;
using Windows.UI.Core;

public static IAsyncAction ExecuteOnUIThread(DispatchedHandler action)
{
  var priority = CoreDispatcherPriority.High;
  var dispatcher = CoreApplication.MainView.CoreWindow.Dispatcher;

  return dispatcher.RunAsync(priority, action);
} 
```

我也会推荐这个辅助方法：

```
public static bool CheckInternetAccess()
{
  var profile = NetworkInformation.GetInternetConnectionProfile();

  if (profile == null) return false;

  var connectivityLevel = profile.GetNetworkConnectivityLevel();
  return connectivityLevel.HasFlag(NetworkConnectivityLevel.InternetAccess);
} 
```

最后：

```
async void NetworkInformation_NetworkStatusChanged(object sender)
{
  var isConnected = CheckInternetAccess();

  await ExecuteOnUIThread(() =>
  {        
    if (!isConnected && this.Frame != null)
      this.Frame.Navigate(typeof(ConnectionLostPage));
  });
} 
```****

# plone - TinyMCE 在重氮打开的编辑模式下的不同风格

> ID：14363922
> 
> 赞同：1
> 
> 时间：2013-01-16T17:12:31.127
> 
> 标签：plone, diazo

我正在用 Diazo 为 plone4 创建一个主题。我注意到 TinyMCE 在编辑模式下不尊重网站的风格。基本字体和标题样式（h1、h2 等）看起来更“原始”。

怎么了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:47:37.293

TinyMCE 在 iframe 中设置要编辑的内容并加载一个名为 @@tinymce-getstyle 的样式表，它实际上是一个浏览器视图，其中包含在 portal_css 中注册的样式表。

当我在 Plone 样式表注册表 (portal_css) 中注册我的样式表，然后添加 Diazo 规则以将它们复制到我的主题的头部时，我在 Diazo 方面取得了最大的成功。

坏处：

*   除了通过 Plone 运行之外，您不能再单独编辑主题。

好处：

*   样式表会自动合并和压缩。
*   TinyMCE 可以加载样式。

# c++ - VS2012 C++ 警告 C4005: '__useHeader': 宏重新定义

> ID：14363929
> 
> 赞同：29
> 
> 时间：2013-01-16T17:12:49.277
> 
> 标签：c++, visual-studio-2012, visual-c++-6

在将旧的 C++ 项目从 Visual Studio 6 迁移到 Visual Studio 2012 时，我们在标准 Microsoft 平台标头中遇到了一组奇怪的警告：

*   警告 C4005：“__useHeader”：宏重新定义
*   警告 C4005：“__on_failure”：宏重新定义

在线搜索仅发现其他几个人遇到此错误。在某些情况下，有人试图使用 VS2012 来编译旧版 DirectX 代码——我没有这样做。在其他情况下，有人试图使用 VS2012 来针对 Windows XP（使用更新 1 中的新选项）——我正在这样做。

DirectX 问题得到了回答，警告将始终存在，告诉您您正在使用过时的（Win8 之前）版本的 DirectX 进行编译，您只需要忍受它。

没有回答 Windows XP 的问题。其他人只是说他们无法重现该问题。

我复制了它，并找到了原因，我在这里写下它以帮助遇到此问题的其他人。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T17:12:49.277

进入项目属性，找到“预处理器定义”字段。

除了默认和添加的定义常量之外，您还应该看到一个宏：

```
%(PreprocessorDefinitions) 
```

这个宏显然引入了一些额外的编译器提供的预处理器定义。我不确定 Visual Studio 的哪个版本引入了这个宏，但它在 Visual Studio 6*中没有。*

在 Visual Studio 2012 中，此宏*需要*出现在项目的预处理器定义字段中。在早期版本的 Visual Studio 中也可能需要它，但我没有测试过这些。

如果缺少此宏，您将看到如上所示的错误消息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-26T17:50:49.543

更新：

请先查看[Edmund](https://stackoverflow.com/users/57683/edmund)对同一问题的[回答](https://stackoverflow.com/a/18766351/236192)——试一试。如果它有效，那就太好了！如果没有...尝试以下操作：

原来的：

使用此网页的“解决方法”选项卡中提到的解决方法：

[http://connect.microsoft.com/VisualStudio/feedback/details/789965/resource-editor-warning-rc4005-on-toolset-visual-studio-2012-windows-xp-v110-xp](http://connect.microsoft.com/VisualStudio/feedback/details/789965/resource-editor-warning-rc4005-on-toolset-visual-studio-2012-windows-xp-v110-xp)

即，添加：

```
#define _USING_V110_SDK71_ 1 
```

...直接在 .rc 文件中*，然后*它包含任何可能包含导致此警告的系统标头的内容。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-05-02T11:29:48.583

还没有找到任何在线发布的解决方案，所以这对我有用。

我正在使用 110_xp 工具构建一个项目

我收到这些警告...

```
c:\program files (x86)\microsoft sdks\windows\v7.1a\include\sal_supp.h(57): warning C4005: '__useHeader' : macro redefinition
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\sal.h(2872) : see previous definition of '__useHeader'
c:\program files (x86)\microsoft sdks\windows\v7.1a\include\specstrings_supp.h(77): warning C4005: '__on_failure' : macro redefinition
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\sal.h(2882) : see previous definition of '__on_failure' 
```

显然 VC 11 标头和 7.1a sdk 标头之间存在不一致。

在我的 stdafx.cpp 我做了这个......

```
#define _USING_V110_SDK71_

#include "stdafx.h" 
```

...构建问题已经消失。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-12T13:59:08.707

这是资源编译器警告。解决方案很简单。右键单击解决方案资源管理器中的 .rc 文件，然后选择属性。现在转到 Resources > General > Preprocessor Definitions，然后添加

```
%(PreprocessorDefinitions) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-17T17:29:27.157

`#define _USING_V110_SDK71_`如果您的 cpp 文件没有预编译的头文件，则添加Stdafx.cpp 或 Stdafx.h 将不起作用。

为了解决这个问题，以下工作。

在解决方案资源管理器中右键单击项目* →*属性*→ *C/C++* →*预处理器*→*预处理器定义*→*编辑*→ 添加 _USING_V110_SDK71_

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-16T11:13:18.893

对我来说，另一个解决方案有效。

在项目*Properties* → *Configuration properties* → *C/C++* → *General*中，我使用此宏将字段*Addition Include Directories path 更改为 SDK：*

```
$(WindowsSDK_IncludePath) 
```

在此之前，这个字段有我的 SDK v7.1 的路径，我也有同样的警告。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-02T09:09:14.700

它仍然更简单。

*只需选中Configuration Properties* → *C/C++* → *Preprocessor / Preprocessor Definitions* → *Edit*中的*“从父级或项目默认值继承”*复选框。

 **** * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-17T18:51:45.767

对我来说，这发生在 Visual Studio 2017（全新安装和修复安装）中。显然，Windows 7.1 SDK 是在 VS2017 之前安装的，并已集成到 Visual Studio 2005 安装中。

在我的情况下，这两个文件：

*   `%LOCALAPPDATA%\Microsoft\MSBuild\v4.0\Microsoft.Cpp.Win32.user.props`
*   `%LOCALAPPDATA%\Microsoft\MSBuild\v4.0\Microsoft.Cpp.x64.user.props`

包含对 Windows 7.1 SDK 的包含目录和库的引用。删除这些引用完成了这项工作。

请记住，Win32 和 x64 的每个 C++ 项目都分别继承自这些属性表。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-09T14:10:49.617

我在一些源自 VC++ 2003 并且多年来逐步升级的项目中遇到了这个问题。我发现虽然项目设置`%(PreprocessorDefinitions)`在预处理器定义中有，但一些 .cpp 文件没有（最旧的文件）。将它们更改为“从父级或项目默认值继承”后，它消除了警告。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-12T13:23:17.530

虽然这个答案是针对 VS10 的，但有趣的是，它可能会提供一些关于 VC++ 目录宏正在发生的事情的线索：当这些语句被添加到项目的头文件 MyApp 中时出现警告：

```
#ifndef NTDDI_WINXPSP3
#define NTDDI_WINXPSP3 0x05010300
#endif 
#ifndef NTDDI_VISTA
#define NTDDI_VISTA 0x06000000
#endif 
#ifndef NTDDI_VISTASP1
#define NTDDI_VISTASP1 0x06000100
#endif 
#ifndef NTDDI_WS08
#define NTDDI_WS08 0x06000100
#endif 
```

除 XPSP3 def. 外，其他所有人都会弹出如下警告：

> 警告 RC4005：“NTDDI_VISTASP1”：重新定义 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\sdkddkver.h.., MyApp

MyApp 是 WinDebug 32 版本，注意到 Windows7.1SDK 出现在 proj 文件的 X64 部分：

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'" Label="Configuration">
<PlatformToolset>Windows7.1SDK</PlatformToolset> 
```

预处理器定义的继承值为 _VC80_UPGRADE=0x0600。在恢复到 V100 之前使用了 SDK 工具集后，SDK 库在*VC++ 目录*部分的*Include 目录*和*Library Directories中被发现为***inherit_from ，如此**[处](https://stackoverflow.com/questions/22390539/sdkddkver-h-missing-but-winsdk-installed-c-header-issues)所述。 看起来警告是由于升级、迁移或工具集更改的组合而生成的。

 *****编辑**：VS2017（MBCS）中的一个不相关问题选择使用

```
LoadCursorW(nullptr, IDC_ARROW) 
```

`LoadCursorA(...)`而不是WNDCLASSEXW 结构中的默认值。一个可能的解决方案是像这样重新定义：

```
 #define IDC_ARROW           MAKEINTRESOURCEW(32512) 
```

在这里，可以通过使用之前的[`#undef`过程](https://stackoverflow.com/a/12516989/2128797)`#define`来抑制警告：

```
#ifdef IDC_ARROW
#undef IDC_ARROW
#endif
#define IDC_ARROW           MAKEINTRESOURCEW(32512) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-03T22:01:02.777

我知道这是个老问题，但是......“有时他们会回来”:)

在新操作系统上安装 VS 2012 Express 后遇到相同的警告。经过一番调查，我决定将我当前`Program Files (x86)\Microsoft Visual Studio 11.0\VC\include`的文件夹与 VS 2012 Update 4 的同一文件夹进行比较。这是比较结果： [![在此处输入图像描述](../Images/f367c1cd9c4d907143a2c9e8e8c7a5a2.png)](https://i.stack.imgur.com/VdFWm.png)

和`sal.h`差异： [![在此处输入图像描述](../Images/5fb20e761cdf92720efbecc9e128f18d.png)](https://i.stack.imgur.com/CZUBW.png)

如此简单的复制`__useHeader`检查修复了所有警告。******

# java - 线程的重要性

> ID：14363934
> 
> 赞同：2
> 
> 时间：2013-01-16T17:13:15.857
> 
> 标签：java, multithreading, jakarta-ee

我知道线程是软件/网络应用程序的关键成员。但我在大学项目中没有使用它们，该项目是关于使用 Java EE 技术进行在线购物的。

如果我将它们应用到我的项目中，有人可以告诉我它们如何有用吗？

我熟悉货币等，但只是想了解它们的重要性。例如，我为什么要费心将一些代码放在线程中（除了多个请求的事实，我应该费心）。只是有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:20:34.837

如果您已经完成了一个 Java EE 项目，那么线程是您可能不会接触到的东西。使用 Java EE 时，您正在编写将插入某个容器的部件。例如，您编写 EJB 代码，应用程序服务器负责缓存这些并调用它们。您编写持久性实体，应用程序服务器将为您提供持久性上下文并处理事务......应用程序服务器将有许多线程池来处理客户端请求。它们都是为您管理的，因此您实际上看不到它。因为您正在针对框架进行编码。

切换到 Java SE，情况就不同了。如果您主要从头开始构建应用程序，可能使用一些库但不是真正的框架，那么在一个非平凡的应用程序中您可能需要多线程。虽然知道如何或何时以最佳方式使用并发是您通过学习和经验学到的东西（“Java 并发实践”一书是这里的首选），但您基本上可以说任何时候需要要在后台完成，同时还执行其他工作，或者您的程序可以继续而无需等待某些调用返回，多线程可以发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:16:07.120

由于您使用的是 Java EE，它已经是一个多线程环境，这就是您不需要多线程的原因。

您必须知道，对于到达您的 servlet 的每个请求，每个请求都由容器在单独的线程中处理。所以在后台你使用了容器提供的多线程。

我不知道现在我要给出的例子是否与任何实际情况有关，但这只是为了理解：

说新年，您需要向所有注册用户发送一封电子邮件，告知您购物网站上的新年优惠。因此，您的数据库中可能有数千甚至更多的客户。所以你可以在这里使用线程来执行发送电子邮件的任务，比如为 1000 个客户，你可以使用 10 个线程，每个线程向 100 个客户发送电子邮件。注意：这只是我想到的一个场景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:19:47.763

这真的取决于上下文。如果您正在编写 Java，那么您很可能在服务器上。如果是这样，您的应用程序服务器通常会管理线程。

如今，客户端 Java 代码很少见，但仍然存在。例如，Swing 中的线程对于后台任务很重要，因此不会阻塞重绘/事件线程。

理解线程安全的概念可能比“何时使用线程”更重要。Joshua Bloch 的 Effective Java 是一本很棒的书（或者很多年前我读到它时）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:26:00.297

# 为什么要使用线程？

（请记住，这与您选择使用的任何平台套件无关。）

## 表现

想象一下，如果你愿意，你要去购物，而你的篮子里没有很多东西。大约有十个人在你面前购物，他们中的许多人的篮子里还有很多东西。与打开另一条通道相比，当您几乎没有结帐通道必须处理的那么多东西时，处理您需要更长的时间。

线程类似于商店中的结帐通道。您拥有的它们越多，您可以执行的操作就越多。

随着计算机不再变得越来越快，并且更加专注于在芯片上放置更多内核，我们作为软件工程师必须想出方法来提高我们的算法和应用程序的效率，以适应我们硬件的使用。多线程是一种方式。我们可以设计和实现算法来处理一个大问题并将其划分为更小的子问题，以便稍后重新组合。

# 为什么*不*使用线程？

## 单核系统

线程有一个开销，这是在轻量级进程的上下文切换和启动中。如果您只有一个核心，您将花费更多时间来处理开销，而不是处理任何实际数据。

## 线程太多是一件坏事

我已经分享了我对结帐通道的类比，虽然打开更多通道通常是好的，但如果没有足够的工作让所有通道都打开它们是合理的，那么它们就是浪费资源和时钟周期。平衡您必须做的工作量与您需要的线程数是至关重要*的。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T17:26:09.163

我曾经有一个系统接收到一个请求（只是一个 HTTP 帖子）来处理数据列表。对于每一位数据，它需要调用另一个系统并等待 1-6 秒的响应。处理 1000 位数据需要数十分钟。HTTP 连接将超时。所以我使用并发向远程系统一次发出 20 或 30 个请求。无论如何，我的系统大多只是在等待。这将总处理时间减少到以前的 3% 到 5%，每个人都很高兴。

现在，请注意，在 Java EE 容器中使用 Java SE 并发特性是不合法的。容器正在执行各种多线程，您的多线程会或可能会干扰。我们发现尽管我们违反了规则，但我们正在做的事情还不错。在其他情况下，我尝试过它并发现它不起作用。

如果您使用 WebSphere 或 Weblogic Java EE 容器，它们都具有处理多线程的专有框架。它是同一个标准，并且是一个提议的标准，但今天我不知道这个名字。

如果您使用的是 Tomcat 之类的 servlet 容器，则可以使用 Java SE 多线程。

Spring 框架有一些实用程序类，您可以对其进行编程以满足某些并发需求。这些使得将支持并发从 Java SE 切换到 IBM 和 Oracle 使用的框架变得容易。

# jquery - sheetengine 缓慢旋转物体使其更靠近

> ID：14363935
> 
> 赞同：1
> 
> 时间：2013-01-16T17:13:19.570
> 
> 标签：jquery, html, canvas, sheetengine

我一直在尝试[sheetengine 1.2.0](http://sheetengine.codeplex.com/releases/view/98942)但是当我创建一个对象并旋转它时，它似乎慢慢地向相机漂移。

我正在使用示例中的方法，根据文档，这应该没问题。

```
// move object around
            var maxsteps = 10;
            var direction = {x:5, y:0, z:0};
            var rotate = true;
            setInterval(function() 
            {
                lolwut.rotate({x:1, y:0, z: 1}, Math.PI/2/maxsteps);

                // calculate sheets and draw scene
                sheetengine.calc.calculateChangedSheets();
                sheetengine.drawing.drawScene();
            }, 30); 
```

codeplex 页面上没有当前问题似乎与我所看到的相匹配。

难道我做错了什么？

JsFiddle[在这里](http://jsfiddle.net/XKUvQ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:03:01.493

您提供的轴似乎必须标准化。标准化后示例中的轴看起来像这样：

```
lolwut.rotate({x:Math.sqrt(2)/2, y:0, z: Math.sqrt(2)/2}, Math.PI/2/maxsteps); 
```

我认为这是一个错误，尽管解决方法很简单。我已经相应地更新了关于 codeplex 的文档。

# jquery - 完成后继续

> ID：14363938
> 
> 赞同：0
> 
> 时间：2013-01-16T17:13:27.030
> 
> 标签：jquery, ajax

我有这个 Ajax 脚本：

```
if(ajax.readyState==4)
        {
        var respuesta=ajax.responseText;
        document.getElementById('result').innerHTML=ajax.responseText;
        $("#newaircraftdialog").dialog('close');

        $(document).ready(function(){
            refreshTable();
        });

        $("#loadingdialog").dialog('close');
        } 
```

函数刷新表：

```
function refreshTable(){
    $('#table').load('aircrafts_table.php');

} 
```

我遇到的问题是我希望`#loadingdialog`在前一个功能`refreshTable`完全完成时关闭。现在它所做的是运行函数，然后关闭对话框，但函数需要时间来刷新表。所以当你关闭对话框时函数还没有来得及更新表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:22:04.017

您可以向该函数添加一个回调参数`refreshTable`，然后在它完成时传递您希望运行的任何内容。例如：

```
function refreshTable(callback)
{

  /* ... (refresh table code) */

  if ('function' === typeof callback)
  {
    callback()
  }

}

/* ... (AJAX request) */

refreshTable(function ()
{
  $("#loadingdialog").dialog('close')
}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:18:44.423

一旦 refreshTable() 方法完成，您只需调用对话框 close() 方法。如果 refreshTable() 正在调用异步方法，那么您需要在该异步方法的回调处理程序中调用对话框的关闭方法

@Edit：将您的 refreshtable() 代码更改为

```
function refreshTable(){
    $('#table').load('aircrafts_table.php', function(){
        //put that code to close that dialog box here
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:29:55.473

这样它应该像你想要的那样做（请参阅答案末尾的更新刷新表）：

```
if(ajax.readyState==4) {
        var respuesta=ajax.responseText;
        document.getElementById('result').innerHTML=ajax.responseText;
        $("#newaircraftdialog").dialog('close');
        refreshTable(function(){$("#loadingdialog").dialog('close');});
} 
```

但我不知道你为什么将 jQuery 与纯 JS 混合（在我看来）。

假设您的代码可以这样更改：

```
$(document).ready(function() {
     $.ajax({url:ajax_url,
             method:'GET',
             dataType:'html',
             success:function(res){
                 document.getElementById('result').innerHTML=res;
                 $("#newaircraftdialog").dialog('close');
                 refreshTable(function(){$("#loadingdialog").dialog('close');});

             });
     }); 
```

请注意，`$(document).ready(function() {})`仅在文档完全加载后调用一次。ajax 完成后不会再次调用它。

```
function refreshTable(callback){
    $('#table').load('aircrafts_table.php', callback);

} 
```

# image - 如何在不改变其大小的情况下将动作脚本中的图像加载到舞台？

> ID：14363946
> 
> 赞同：0
> 
> 时间：2013-01-16T17:13:53.343
> 
> 标签：image, actionscript-3, image-processing

我制作了一个应用程序，用户可以加载图像，然后他们可以对其进行编辑。问题是，当我第一次加载图像时，它加载的是原始像素大小。但是当我加载另一张图像时，像素大小与原始图像不同。

这是图像加载到阶段时的功能代码：

```
function onFileLoadComplete(event:Event):void
        {
            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onDataLoadComplete);
            loader.loadBytes(loadFileRef.data);

            loadFileRef = null;
        }

        function onDataLoadComplete(event:Event):void
        {
            var bitmapData:BitmapData = Bitmap(event.target.content).bitmapData;

            var matrix:Matrix = new Matrix();
            matrix.translate(-imageView_mc.x, -imageView_mc.y);
            matrix.scale(scaleX, scaleY);
            matrix.translate(imageView_mc.x, imageView_mc.y);

            imageView_mc.graphics.clear();
            imageView_mc.graphics.beginBitmapFill(bitmapData, matrix, false, true); 
            imageView_mc.graphics.drawRect(0, 0, bitmapData.width, bitmapData.height);
            imageView_mc.graphics.endFill();

            trace ("Image width: " ,imageView_mc.width, ", Image height: " ,imageView_mc.height);

            imageView_mc.width = stage.stageWidth;
            imageView_mc.height = stage.stageHeight;
            (imageView_mc.scaleX < imageView_mc.scaleY) ? imageView_mc.scaleY = imageView_mc.scaleX : imageView_mc.scaleX = imageView_mc.scaleY;
            (imageView_mc.scaleX > imageView_mc.scaleY) ? imageView_mc.scaleY = imageView_mc.scaleX : imageView_mc.scaleX = imageView_mc.scaleY;
            imageView_mc.x = 0.5*(stage.stageWidth-imageView_mc.width);
            imageView_mc.y = 0.5*(stage.stageHeight-imageView_mc.height);
} 
```

那么，这段代码有问题吗？此代码用于将图像加载到舞台，然后将其按比例缩放到舞台大小。任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:22:13.560

在应用矩阵变换之前加载新图像时重置您的比例。

```
scaleX = scaleY = 1; 
```

# php - 如何存储isset条件php以避免重复

> ID：14363950
> 
> 赞同：1
> 
> 时间：2013-01-16T17:14:20.647
> 
> 标签：php

我的代码：

```
if (isset($dayMarks[$res['resId']][$dDate])) {
     $var=$dayMarks[$res['resId']][$dDate];
     echo $var;
} 
```

请注意，isset 条件与分配给 $var 的值相同，这会创建一个非常丑陋的代码。

如何将条件分配给 $var 而无需重复？

（在javascript中，我会写`if (var=$dayMarks[$re...)` ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:22:24.030

这是 PHP 中的一个常见问题，其中包含文件会造成变量的不确定性。

有两种方法对我很有效。

**默认分配**

使用默认赋值，当键不存在时，$var 变量将被赋予一个默认值。

> $var = isset($dayMarks[$res['resId']][$dDate]) ？$dayMarks[$res['resId']][$dDate] : false;

在此代码之后可以假定 $var 将始终包含一个有效值。

**默认合并**

我的首选方法是始终声明一个包含所有必需值及其默认值的默认数组。使用 False 值标记任何可能缺少值的键（假设键包含除布尔值之外的另一种值类型）。

```
$default = array(
    'date'=>false,
    'name'=>'John Doe'
);

$dayMarks[$res['resId']] = array_merge($default, $dayMarks[$res['resId']]); 
```

这将确保该变量所需的键存在，并至少保存一个默认值。

您现在可以测试日期是否存在。

```
if($dayMarks[$res['resId']]['date'] !== false)
{
     // has a date value
} 
```

虽然这可能不适用于您的阵列。因为它看起来像一个表结构。切换到命名键/值对是有好处的。因为这使您可以轻松地为该数组分配默认值。

**编辑：**

实际的问题是是否可以重现 JavaScript 代码。

> if (var=$dayMarks[$re...)

是的，这可以通过使用辅助函数来完成。

*注意：*这个技巧应该只用于非布尔类型。

```
 function _isset($arr,$key)
 {
    return isset($arr[$key]) ? $arr[$key] : false;
 }

 $a = array('zzzz'=>'hello');
 if(($b = _isset($a,'test')) !== false)
 {
    echo $b;
 }
 if(($c = _isset($a,'zzzz')) !== false)
 {
    echo $c;
 } 
```

[在此处查看上面的代码](http://codepad.org/61RzvAft)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:15:25.290

```
$isset = isset(...); //save the value
if ($isset) { .... }; // reuse the value
...
if ($isset) { ... }; // reuse it yet again 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:18:21.630

你唯一能做的就是存储`$res['resId'][$dDate]`。

```
$var = $res['resId'][$dDate];
if( isset($dayMarks[$var]) ) {
    $var = $dayMarks[$var];
    echo $var;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T17:52:17.617

如果你只想简单地分配一个变量处理，你也可以这样写：

```
$var = $dayMarks[$res['resId']][$dDate]);
if (!isset($var)) unset($var); 
```

# actionscript-3 - AS3 - 如何使用子类，如何创建子类的实例？

> ID：14363956
> 
> 赞同：0
> 
> 时间：2013-01-16T17:14:41.943
> 
> 标签：actionscript-3

论坛和 AS3 非常新，但非常感谢您的帮助。不确定我是否使用了所有正确的术语，但是您如何创建子类的实例？这是我到目前为止所拥有的：

我有一个“mob_troll”电影剪辑，其类：巨魔和基类：[空白]

主要作为：

```
import mob

var troll:mob = new troll();
troll.Speed = 10
troll.Hp =10 
```

巨魔.as：

```
package  { 
    import mob

    public class troll extends mob {

        public function troll(){
            trace('I work')
        }
    }
} 
```

mob.as：

```
package  {

    import flash.display.MovieClip;  
    public class mob extends MovieClip {

        public var Speed:int;
        public var Hp:int;

        public function mob() {
            trace('mob')
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:12:37.337

如果我说的很明显，我很抱歉，但我想确保我们理解彼此的条款。

子类（也称为子类或派生类）正是您使用该行创建的

```
public class Troll extends Mob { ... } 
```

Troll 类是 Mob 的子类。实例是类的出现。你用这一行创建的：

```
var troll:Mob = new Troll(); 
```

具体来说，该部分`new Troll()`创建了 Troll 实例。然后将其设置为引用 Mob 的变量。

所以在这个例子中你已经创建了一个子类（巨魔）。

如果您想知道如何在舞台上直观地查看您的影片剪辑，那么您应该阅读 AS3 显示列表[，这是一个很好的起点](http://www.republicofcode.com/tutorials/flash/as3displaylist/)。但从本质上讲，它将涉及将该实例添加到舞台上。假设 Main.as 是您的文档类，它看起来像这样：

```
import Mob;
import Troll;

var troll:Mob = new Troll();
troll.Speed = 10
troll.Hp =10

this.addChild(troll); 
```

注意 Troll 的导入（您需要导入使用的每种类型）

# c# - 从 UserController 调用父页面的方法

> ID：14363958
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:14:51.650
> 
> 标签：c#, methods, user-controls

我已经关注[了这个](https://stackoverflow.com/questions/623136/calling-a-method-in-parent-page-from-user-control)问题并尝试构建我的解决方案。问题是“UserControlButtonClicked”似乎为空！因此，if 中的“UserControlButtonClicked(this, EventArgs.Empty)”不会运行，并且父页面中的方法“addStepContent”永远不会被调用。

**用户控件“StepsBar”**

```
public sealed partial class StepsBar : UserControl
    {

        public event EventHandler UserControlAddStepContent;

        [...]

    public StepsBar()
    {
        this.InitializeComponent();
                    Image step_1 = new Image();

        ButtonInfo step_1Info = new ButtonInfo();
        step_1Info.Add((int)stepNumber.one, (int)stepStatus.normal);
        step_1.Tag = step_1Info;

        step_1.Source = setBackground((int)stepStatus.normal);
        step_1.Tapped += stepTapped;

        [...]
    }

public void stepTapped(Object sender, RoutedEventArgs e)
    {
        [...]

        if (step != null)
        {

           [...]

            firePageEvent(); 

        }

    }

    public void firePageEvent() 
    {
        if (UserControlAddStepContent != null)
        {
            UserControlAddStepContent(this, EventArgs.Empty); 
        }
    } 
```

**父页面**

```
public Violation()
    {

        this.InitializeComponent();

        StepsBar stepsBar = new StepsBar();

        stepsBar.UserControlAddStepContent += new EventHandler(addStepContent); 

    }

    private void addStepContent(object sender, EventArgs e) 
    {

        CheckBox check_1 = new CheckBox();
        check_1.Content = "Check me!";
        bodyStackPanel.Children.Add(check_1);

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T17:20:05.843

这假设您想要使用现有的委托而不是自己创建委托，并且您没有通过事件参数传递任何特定于父页面的内容。

在用户控件的代码隐藏中（如果不使用代码隐藏或 C#，则根据需要进行调整）：

```
 public partial class MyUserControl : System.Web.UI.UserControl
    {
        public event EventHandler UserControlButtonClicked;

    private void OnUserControlButtonClick()
    {
        if (UserControlButtonClicked != null)
        {
            UserControlButtonClicked(this, EventArgs.Empty);
        }
    }

    protected void TheButton_Click(object sender, EventArgs e)
    {
        // .... do stuff then fire off the event
        OnUserControlButtonClick();
    }

    // .... other code for the user control beyond this point
} 
```

在页面本身中，您使用以下内容订阅事件：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // hook up event handler for exposed user control event
        MyUserControl.UserControlButtonClicked += new  
                    EventHandler(MyUserControl_UserControlButtonClicked);
    }
    private void MyUserControl_UserControlButtonClicked(object sender, EventArgs e)
    {
        // ... do something when event is fired
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T21:05:01.233

解决了。问题是这个，在父页面上。

```
StepsBar stepsBar = new StepsBar();

    stepsBar.UserControlAddStepContent += new EventHandler(addStepContent); 
```

StepsBar 的距离没有添加到页面中。哦！所以这就是我所做的：

```
 stepsBar.UserControlAddStepContent += new EventHandler(addStepContent); 
```

并在父页面的 xaml 上：

```
<local:StepsBar x:Name="stepsBar"/> 
```

# android - Android中的背景图像：每个单独的设备都有单独的图像？

> ID：14363959
> 
> 赞同：0
> 
> 时间：2013-01-16T17:15:02.083
> 
> 标签：android, android-layout, background-image

我需要开发一个 Android 应用程序，我是这个环境的初学者。实际上，我们需要将使用 Objective-C 为 iPhone 编写的现有应用程序移植到 Android。我们目前针对四款设备：Samsung S2、S3、Note 和 Note 2。该应用程序完全由按钮和背景中的自定义图像组成。根据我在 iOS 开发中的经验，我们为非视网膜和视网膜设备设计了 320x480 和 640x960 背景，只要我们提供适当的 @2x 后缀，系统就会选择正确的背景。我试图了解 Android 的处理方式。我已经阅读了 [Supporting Multiple Screens] (http://developer.android.com/guide/practices/screens_support.html) 文档，但我仍然对一些事情感到困惑。

据了解，有大小和密度类别，分别命名为 small、normal、large 和 xlarge 以及 ldpi、mdpi、hdpi、xhdpi。我们需要生成适当的位图资源并将它们放置在正确的“drawable-XY”文件夹下。这看起来像是 iOS 中 @2x 表示法的高级版本。但我不知道我们应该如何准备背景图像。例如，如果我计算正确，Note1 和 Note2 的分辨率分别为 449x718dp 和 431x767dp，因此它们都属于正常尺寸类别。如果我们为 Note1 准备一个背景图片，它的屏幕比例将不会与 Note2 相同，并且必须调整背景图片的大小。因此，系统不处理属于相同尺寸和像素密度类别的不同尺寸设备。所以，我不明白这个系统如何允许我们在相同尺寸密度类别下为类似设备重用相同的背景图像。我们是否应该为 Note1 和 Note2 准备单独的背景图像？如果是这样，这种分类的含义是什么，我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:58:37.033

> 我们目前针对四款设备：三星 S2、S3、Note 和 Note 2。

除非您正在控制应用程序的分发，并且可以以某种方式限制它在这些设备上运行，否则这些设备充其量只是示例设备。例如，如果您计划通过 Play 商店分发您的应用程序，那么您的应用程序将在许多其他应用程序上结束，并具有一系列屏幕尺寸、密度和分辨率。虽然您也许可以通过`<compatible-screens>`清单中的元素限制大小/密度组合，但仍然会有一系列分辨率。

> 所以，我不明白这个系统如何允许我们在相同尺寸密度类别下为类似设备重用相同的背景图像。我们是否应该为 Note1 和 Note2 准备单独的背景图像？

如果您可以将您的应用程序的分发限制在这四种设备上，如果您想使用`android.os.Build`嗅探设备并根据设备型号选择不同的图像，欢迎您这样做。

在您将应用程序分发给更广泛的受众的情况下，您的应用程序可以在任意设备上运行，您没有实际的方法来预先确定可能使用的所有可能的分辨率。因此，您无法为每种可能的分辨率创建自定义图像。在这种情况下，您将需要重新考虑应用程序的方法，从数百万其他桌面和 Web 应用程序开发人员用于处理任意分辨率的技术中学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:56:17.650

最好使用 dp 作为控件大小，对 Android 应用使用 9-patch。Android SDK 无法处理这种详细的分类。hdpi/mdpi large/xlarge 屏幕可以在一定程度上有所帮助，但你的情况我认为没有简单的方法。如果您绝对需要为每个设备制作单独的图像，那么您可以考虑像这样进行布局：s2_layout_actvity.xml、s3_layout_activity.xml，并在每个设备中使用相应的图像。并在调用 setContentView 之前检测您拥有的设备。

# ios - 没有应用程序更新的企业分发配置文件更新

> ID：14363965
> 
> 赞同：2
> 
> 时间：2013-01-16T17:15:14.703
> 
> 标签：ios, provisioning-profile, in-house-distribution, enterprise-distribution

根据“内部应用程序|提供更新的应用程序”部分中的[此链接](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)，我应该能够分发一个新的 .mobileprovision 文件，而不是强迫用户安装新版本的应用程序：

> 对于已经拥有该应用程序的用户，您可能希望确定下一个发布版本的时间，以便它包含新的配置文件。如果没有，您可以只分发新的 .mobileprovision 文件，这样用户就不必再次安装该应用程序。新的配置文件将覆盖应用存档中已有的配置文件。

这怎么可能呢？编译/唱歌应用程序不需要分发配置文件吗？我希望能够分发新证书的便利，但我非常怀疑这是否可行。有人有确切消息么？还是我误解了这个措辞？如果没有，我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:05:49.353

苹果说`Provisioning profiles can be installed and managed using MDM, downloaded and installed by users from a secure website that you provide, or distributed to users as an email attachment to open and install.`

因此，您只能分发移动配置文件并测试这些东西。

我观察到的一件事是，在企业分发配置文件的情况下，设备 udid 不需要添加到门户中。ipa 文件将安装在所有设备上。它发生在企业开发人员档案案例的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T14:00:15.800

对于管理更新，Apple 表示：“内部分发的内部应用程序不会自动更新。您需要通知员工更新并指示他们安装应用程序。如果分配给应用程序的应用程序标识符“

所以我猜想向用户发送一个推送通知，通知他们更新并要求他们安装，一旦单击确定，您可以将他们重定向到托管应用程序的服务器，他们可以从那里安装

# windows-8 - Metro 应用程序的 WM_GETICON 返回默认图标句柄

> ID：14363966
> 
> 赞同：1
> 
> 时间：2013-01-16T17:15:15.320
> 
> 标签：windows-8, microsoft-metro, icons

我正在尝试通过向窗口发送带有 WM_GETICON 消息的消息来检索 Metro 应用程序的图标句柄。但是，我不断获得默认图标句柄（65575）。Windows 8 中的图标有什么变化吗？

# android - Android 截图 OpenGL + 原生 GUI

> ID：14363977
> 
> 赞同：1
> 
> 时间：2013-01-16T17:16:02.533
> 
> 标签：android, opengl-es, screenshot

我正在尝试截取包含**openGL元素的活动的****屏幕截图**（来自与 vuforia 的统一......所以 openGL 代码是自动生成的并且不是很容易访问）和**自定义本机布局**（按钮等）。

 ****目前我正在使用以下方法：

```
ViewGroup v1 = (ViewGroup) activity.findViewById(id).getRootView();
v1.setDrawingCacheEnabled(true);
Bitmap source = Bitmap.createBitmap(v1.getDrawingCache());
sCoverBitmap = Bitmap.createBitmap(source, 0, statusBarHeight,
  source.getWidth(), source.getHeight() - statusBarHeight); 
```

在包含 openGL 和其他布局的根视图中，但 openGL（统一）区域是完全黑色的。****

# windows-phone-7 - 基于 GPS 的应用程序未在 Windows 手机的锁定屏幕下运行

> ID：14363980
> 
> 赞同：1
> 
> 时间：2013-01-16T17:16:07.550
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone

我开发了一个 Windows Phone 应用程序，当它打开并主动运行时它工作正常。它跟踪用户在地图上的移动，并使用图钉显示位置移动。

现在我想确保即使在打开此应用程序时手机被锁定，相同的应用程序也能运行。我添加了以下代码以使其在锁定屏幕下工作。在此之后，当我验证应用程序时，我意识到应用程序被锁定时它没有运行。

我是否需要进行任何其他更改才能在锁定屏幕下完成这项工作。任何帮助将不胜感激。

```
private void initiliazesettings()
{
    PhoneApplicationService.Current.UserIdleDetectionMode = 
       IdleDetectionMode.Disabled;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:46:32.623

要让您的应用在 Windows Phone 7.0/7.1/8.0 的锁定屏幕下运行，您需要设置 ApplicationIdleDetectionMode，而不是 UserIdleDetectionMode。[在此处](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff941090%28v=vs.105%29.aspx#BKMK_Changingtheappidledetectionmode)查看详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:20:27.417

假设您将方法放置在正确的位置，该代码只会使屏幕保持打开状态，但不会在激活锁定屏幕时使您的应用程序在后台运行。Windows Phone 7 应用程序无法在后台运行，它们会被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:22:18.723

对于 Windows Phone 8，这是可能的 -[请参阅 MSDN 中的示例。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935%28v=vs.105%29.aspx)

但是对于 Windows Phone 7/7.1，您不能这样做。

您可以防止由于用户未与其交互而锁定屏幕（如您的代码所示）。但是，如果您手动锁定屏幕，该应用程序仍将处于休眠或墓碑状态，并且您的位置代码将无法运行。

您唯一的其他选择是使用计划的后台任务来读取手机的位置，但请记住，这与实时数据相差甚远（它是一个缓存位置，在最佳情况下您每 30 分钟只运行一次）。

# batch-file - 批量使用 FindStr + length

> ID：14363981
> 
> 赞同：0
> 
> 时间：2013-01-16T17:16:09.747
> 
> 标签：batch-file, findstr

在我的文本文件中是这一行。

```
08.01.2013 20:06:36: SolsticeFTW (109.189.238.113:60381) 04ee8dfa81f700bba194a528911ecb4a - #0
08.01.2013 20:11:00: SolsticeFTW (109.189.238.113:60381) 04ee8dfa81f700bba194a528911ecb4a - #0
08.01.2013 20:11:24: SolsticeFTW (109.189.238.113:60381) 04ee8dfa81f700bba194a528911ecb4a - #0
08.01.2013 20:11:50: SolsticeFTW (109.189.238.113:60381) 04ee8dfa81f700bba194a528911ecb4a - #0
09.01.2013 15:39:57: lalka (95.165.55.92:15609) 161c5a17c5afc0b1e079fca7fdc8f1a9 - #0 
```

我想根据命令 Findstr 过滤一个文本文件，这可行，但我无法让它只过滤 32 位单词。例如 04ee8dfa81f700bba194a528911ecb4a 和 161c5a17c5afc0b1e079fca7fdc8f1a9。到目前为止，它只能通过过滤整行来工作。

有谁知道我如何能够仅过滤 32 位符号/令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:23:38.797

FINDSTR 只能打印匹配的整行。它没有像 grep 这样只能列出文本匹配部分的功能。

FOR /F 命令通常可用于从一行文本中提取标记，具体取决于数据的格式。您可以使用 FINDSTR 仅选择适当的行，并使用 FOR /F 处理这些结果并提取 32 位标记。

我不知道您的 FINDSTR 搜索条件是什么，所以我会编造一些东西作为示例。假设您要打印以 . 结尾的行的 32 位标记`#0`。

FINDSTR 选择适当的行，寻找以 . 结尾的行`#0`。并且 FOR /F 将每个结果行解析为由空格分隔的标记。（标记分隔符可以通过 DELIMS 选项更改，但默认为空格和制表符）。你想要第五个令牌。

```
for /f "tokens=5" %%A in ('findstr /le " #0" "someFile.txt"') do echo %%A 
```

**编辑以回应 OP 评论**

如果您不需要过滤这些行并且只想将每个 32 位 ID 写入一个新文件，那么它就更简单了：

```
(for /f "tokens=5" %%A in (logged-players.log) do echo %%A) >logged-bans.txt 
```

# jquery - 什么样的 jquery/css 脚本将按钮定位为“固定”，但也会对网页滚动做出反应？

> ID：14363983
> 
> 赞同：0
> 
> 时间：2013-01-16T17:16:12.643
> 
> 标签：jquery, css, social-networking

抱歉，这个问题有点空洞。让我解释一下我所追求的效果：

我不仅在左侧：0 和顶部：50% 的按钮上使用位置：固定，而是在网络上看到了当用户向下滚动时，按钮（以及页面的其余部分向上）的效果，但是按钮轻松回到原来的固定位置。所以它比一个 CSS 固定项目更引人注目。

我很难用谷歌搜索这种效果。我不记得我在哪些网站上看到过它，但当向下滚动一篇文章时，它通常包含社交/分享按钮。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:25:51.300

您可以使用直接从此处获取的相当简单的 jQuery 代码片段：http: [//css-tricks.com/scrollfollow-sidebar/](http://css-tricks.com/scrollfollow-sidebar/)（不是我的代码）

```
$(function() {

    var $sidebar   = $("#sidebar"), 
        $window    = $(window),
        offset     = $sidebar.offset(),
        topPadding = 15;

    $window.scroll(function() {
        if ($window.scrollTop() > offset.top) {
            $sidebar.stop().animate({
                marginTop: $window.scrollTop() - offset.top + topPadding
            });
        } else {
            $sidebar.stop().animate({
                marginTop: 0
            });
        }
    });

}); 
```

当然，更改`#sidebar`以匹配您的按钮。

# iphone - xCode Organizer 中的分发证书

> ID：14363985
> 
> 赞同：0
> 
> 时间：2013-01-16T17:16:17.493
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我可以拥有多个分销证书吗？我正在开发一个应用程序，但当前证书不是由我创建的，而是用于另一个应用程序的。该应用程序和证书是由不再在这里的其他人完成的。

我下载了 vert，但在组织者中它告诉我，找不到有效的签名身份。

我是什么做的？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:40:08.700

显示错误，因为未找到有效的签名身份。Apple 文档清楚地[描述](https://developer.apple.com/library/mac/documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/CodeSigning/CodeSigning.html#//apple_ref/doc/uid/TP40011201-CH7-SW17)了如何导出/导入它。您应该要求证书的创建者导出他自己的证书副本（因为无法从 iOS 开发中心重新下载），然后您才能导入并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:24:38.813

证书和配置文件之间存在差异。

证书与每个帐户相关联，而配置文件适用于每个帐户下的单个应用程序。

如果您正在使用多个 iTunes / Apple Developer 帐户，那么是的，您应该在钥匙串中安装每个帐户的证书。

假设您的应用程序有自己的应用程序（捆绑）ID，您需要为您在该帐户下开发的每个应用程序提供一个配置文件。有不同的配置文件用于分发 ADHOC 构建和上传供 Apple 审查的 Store 构建。

听起来您需要首先获取要使用的帐户的证书，然后是配置文件。

# ruby-on-rails - Rails 标注宝石

> ID：14363986
> 
> 赞同：0
> 
> 时间：2013-01-16T17:16:26.310
> 
> 标签：ruby-on-rails, ruby, web-services, callout

我正在开发一个 Rails 应用程序，该应用程序需要在事件发生时从第三方服务接收标注（又名“网络请求”）。是否有允许我从我的开发环境（互联网无法从外部访问）接收这些的 gem 或服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:43:10.370

不需要任何第三方 gem，只需在第三方服务完成其流程时将您的应用程序 url 发送给他们，他们将调用您的 url 以通知您的应用程序处理已完成。

# jquery - 使用 jQuery Waypoints Sticky Shortcut 时如何触发回调？

> ID：14363988
> 
> 赞同：5
> 
> 时间：2013-01-16T17:16:36.620
> 
> 标签：jquery, jquery-waypoints

`waypoint('sticky')`每当更改导航栏的类时，我想切换另一个元素的类。我试图使用该`handler`选项触发回调，但它不起作用。我能做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T23:52:08.743

出于某种原因，Waypoints 的回调选项是“处理程序”，因此您可以这样做：

```
$.waypoint('sticky', {
    handler: function(dir) {
        //Do stuff when the user scrolls past this waypoint.
    }
}); 
```

# android - 动态添加的单选按钮无法正常工作

> ID：14363989
> 
> 赞同：0
> 
> 时间：2013-01-16T17:16:43.980
> 
> 标签：android, android-layout, android-widget

我正在尝试将单选按钮添加到现有单选组，但动态添加的单选按钮无法正常工作，这意味着它不会“取消选中”组中的其他单选按钮。

注意：当我单击 XML 文件中预先创建的那些时，它只会“取消选中”预先创建的那些，而不是动态的。

```
RadioGroup rgQ = (RadioGroup)findViewById(R.id.rgQ);
RadioButton[] rbQ = new RadioButton[4];
for(int i = 1; i<5; i++) {
    rbQ[i-1] = new RadioButton(this); 
    rbQ[i-1].setText(""+i);
    rgQ.addView(rbQ[i-1]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:58:33.537

而不是动态地将单选按钮添加到单选组。您可以在 xml 中预定义所有单选按钮，并使用视图对象的可见性来隐藏/显示它们。

隐藏：

```
 radioButton1.setVisibilty(View.GONE); 
```

节目：

```
 radioButton1.setVisibilty(View.VISIBLE); 
```

希望这可以帮助

# delphi - 将 TMemoryStream 转换为变体

> ID：14363993
> 
> 赞同：4
> 
> 时间：2013-01-16T17:16:58.417
> 
> 标签：delphi, memorystream, variant

如何将 TMemoryStream 的内容转换为变体？我使用德尔福 2010。

TMemoryStream 存储文件的内容，它可以是 PDF 或 JPG（扫描文档）。

文件保存在 MS SQL 库中。当我在程序中进入编辑模式时，我将该文件的内容从 base 提取到 TMemoryStream 中。

编辑文档卡片后，我需要将文档发布回基地。扫描的文件也可以更改（或替换为其他文件）。为了回发记录，我使用了一个带有一堆参数的存储过程——每个字段一个。我将参数作为变体传递给存储过程。

这就是为什么我需要将 TMemoryStream 转换为变体。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T17:39:25.777

假设您需要 Variant 来保存一个字节数组，您可以使用它：

```
var
  MS: TMemoryStream;
  V: Variant;
  P: Pointer;
begin
  ...
  V := VarArrayCreate([0, MS.Size-1], varByte);
  if MS.Size > 0 then
  begin
    P := VarArrayLock(V);
    Move(MS.Memory^, P^, MS.Size);
    VarArrayUnlock(V);
  end;
  ...
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T17:39:37.047

`TMemoryStream`没有方便的方法来直接访问内部数据。它提供了一个属性，该属性为您提供了一个指针，但没有任何有用的数据类型。但是，如果使用`TBytesStream`派生自 的`TMemoryStream`，则可以从流中获取数据作为类型的变量`TBytes`。

在此之后，假设您的参数是类型的标准参数对象`TParam`，您不需要使用变体。你可以这样做：

```
param.AsBlob := MyTBytesVariable; 
```

或者，甚至比这更简单，您可以直接使用流：

```
param.AsStream := MyMemoryStream; 
```

（如果您这样做，请确保`Position`首先将流设置为 0。）

# android - Android debuggable=false 导致 jQuery.ajax POST 在 Cordova/Phonegap Eclipse 项目中失败

> ID：14363994
> 
> 赞同：4
> 
> 时间：2013-01-16T17:17:00.413
> 
> 标签：android, eclipse, jquery, cordova, cordova-2.0.0

我有一个内置在 Eclipse 中的 Android 应用程序，它使用 Cordova 2.0.0。当使用 Eclipse 调试器构建并加载到手机上时，应用程序工作正常，但是当我在 AndroidManifest 文件中设置 android:debuggable="false" 时，jQuery.ajax() POST 失败。我无法告诉我 LogCat 跟踪中的失败原因。

这是 jQuery.ajax 调用：

```
jQuery.ajax({
    url: that.endpoint,
    data: that.data,
    dataType: "json",
    type: "POST",
    contentType: "application/json",
    success: successHandler,
    error: errorHandler,
    timeout: serviceTimeout
}); 
```

当 android:debuggable="true" 它工作正常并进入成功处理程序，但是当它 android:debuggable="false" 它进入 failureHandler 时，只有 textStatus 设置为“error”，没有其他任何东西表明它失败的原因. 当它失败时，似乎帖子没有发生，因为我可以看到它没有命中我试图调用的网络服务。

有谁知道为什么可调试标志可能会以这种方式影响我的应用程序？

除了日志级别之外，“可调试”标志还会影响什么？

任何提示或指针将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:30:58.163

找到了这个原因。我的代码很好。问题出在我试图调用的 Web 服务的 SSL 证书上。虽然我的浏览器说没问题，但当我使用 SSL 证书检查器（例如[http://www.geocerts.com/ssl_checker](http://www.geocerts.com/ssl_checker)）检查时，它显示证书层次结构存在问题。修复证书允许我的代码工作。

iPhone 版本的应用程序我从来没有遇到过这个问题，所以 Android 似乎对它的 SSL 证书检查更加严格（并且在调试模式下运行时它不进行证书检查。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:41:13.613

当您将应用程序设置为 debug=false 时，您必须指定应用程序从中获取其数据的 URI。当处于调试模式时，您的权限会被放宽，而不是处于调试模式。请参阅此参考：http: [//developer.android.com/guide/topics/providers/content-provider-basics.html#Permissions](http://developer.android.com/guide/topics/providers/content-provider-basics.html#Permissions)

您的代码看起来不错，并且仅在将您的应用程序设置为更严格的 debug=false 时才会失败，这告诉我您的 URI 权限设置不正确。无论如何，这就是我首先要看的地方。

# algorithm - 如何使用经过 10 个参数训练的人工神经网络对具有 3 个参数的实例进行分类？

> ID：14363997
> 
> 赞同：3
> 
> 时间：2013-01-16T17:17:05.013
> 
> 标签：algorithm, machine-learning, artificial-intelligence, neural-network

我想使用任何人工智能技术使用多个参数对元素进行分类。我已经使用人工神经网络（ANN）来做到这一点，效果很好。我现在的目的是在不使用我用来训练网络的所有输入参数的情况下对对象进行分类。我是说：

假设我已经用 10 个参数训练了我的网络。然后，我想只用 3 个参数（每个实例的不同参数）来测试我的网络。我可以用某种 ANN 来做，还是有其他系统来做？
（数字显然只是一个例子）

我认为我的问题在很多情况下很有用，因为在某些情况下，您可能有很多过去（及时）的信息，并且您想在未来对对象进行分类（并且您可能没有足够的信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:23:31.343

我认为你需要一个**推荐系统**。在处理大量不确定（或根本不知道）的数据时，这样的系统很有用。网络和文献中有许多材料很好地解释了这个主题。

**编辑：** 教授提供了很好的解释。Andrew Ng 在[https://www.coursera.org/course/ml](https://www.coursera.org/course/ml)

根据评论，这里有一些指南：xavier.amatriain.net/PFC/mramirez-recommender.pdf infolab.stanford.edu/~ullman/mmds/ch9.pdf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T10:16:28.443

如果未知参数的数量和 ANN 大小不是很大，那么我会尝试对未知参数进行积分。这可以通过对未知参数的随机值进行多次采样并对网络的相应输出进行平均来以数值方式完成。这里的问题是，ANN 的运行次数随着未知维度的数量呈指数增长。如果输入的分布是已知的，这种方法应该会变得更加准确。

此外，通过分配输入，分析集成成为一种选择。在这种情况下，似乎只有第一层的传递函数受到影响。因此，您需要推导出积分的解： `Tnew(other inputs)=integral(p(x|other inputs)*T(x,other inputs),x=min_x..max_x)`，其中`p`是未知参数的条件分布，`T`是第一层的传递函数，`Tnew`是所有参数已知的第一层的新传递函数。

# clojure - lein repl (-main "something") 和 lein run "something") 的区别

> ID：14363998
> 
> 赞同：4
> 
> 时间：2013-01-16T17:17:10.630
> 
> 标签：clojure, leiningen

新手 Clojure 和 leiningen 问题：

鉴于下面我项目中的代码片段，这适用于 lein repl ：

```
==> (-main "something") 
```

产生预期的“命令：某事......运行......完成”，但不能从命令行工作：

```
me pallet1]lein run "something" 
```

产生“命令：某事......错误：未作为命令解析”

为什么？/ 我如何解决它？

重现：

```
lein new eg 
```

然后编辑生成的工程文件，添加`:main eg.core`定义main函数，编辑生成的src/eg/core.clj文件，粘贴进去：

核心.clj

```
(ns eg.core)
(defn something [] (println "Something!"))

(defn run-command-if-any [^String commandname]
    (printf "Command: %s ..." commandname)
    (if-let [cmd (ns-resolve *ns* (symbol commandname))] 
      (
        (println "running ...") (cmd) (println "done.")
      )
      (println "error: not resolved as a command.")
    ))
(defn -main [ commandname ] (run-command-if-any commandname)) 
```

然后

```
lein repl
eg.core=> (-main "something") 
```

工作（即打印“某事！），但 lein run something 没有（即打印“错误：未解决”消息）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T17:55:47.513

问题是当您从 lein 运行它时，您的默认命名空间是“用户”命名空间：

```
(defn -main [ commandname ] (println *ns*)) 
```

打印`#<Namespace user>`。所以它不包含`something`函数，因为它来自另一个命名空间。你有几个选择：

1.  传递完全限定的函数名：`your-namespace/something`而不是`something`.
2.  使用`your-namespace`代替`*ns*`：`(ns-resolve 'your-namespace (symbol commandname))`
3.  将命名空间更改为`your-namespace`in `-main`。

方法3的例子：

```
(defn -main [ commandname ] 
   (in-ns 'your-namespace)
   (run-command-if-any commandname)) 
```

另外，如果您想一一调用多个函数，则应使用：

```
(do (println "Hello")
    (println "World")) 
```

不仅仅是大括号`( (println "hello") (println "World"))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:23:26.373

[lein exec 插件](https://github.com/kumarshantanu/lein-exec)对于在项目上下文中编写此类脚本非常有用。我已经广泛使用它在 clojure 和其他脚本编写情况下编写 Jenkins 作业

```
lein exec -pe '(something ...) (something-else) (save-results)' 
```