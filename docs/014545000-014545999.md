# StackOverflow 问答 14545000-14545999

# python - Python标准库中有哪些“工具”

> ID：14545001
> 
> 赞同：42
> 
> 时间：2013-01-27T06:23:26.947
> 
> 标签：python

我目前知道两个工具：

1.  base64 编码器/解码器：

    `python -m base64 -e <input`
    `python -m base64 -d <input`

2.  json 验证器和漂亮的打印机

    `python -m json.tool <input`

其中输入可以是标准输入或文件。

我很好奇 SPL 是否还有其他以类似方式工作的工具？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-27T07:27:18.720

不是一个完整的列表...

## 编码

Base64 编码/解码：

```
python -m base64 -d [file]
python -m base64 -e [file] 
```

ROT-13 编码/解码器：

```
python -m encodings.rot_13 
```

Macintosh BinHex：

```
# binhex <file> to <file>.hqx, and unbinhex <file>.hqx to <file>.viahqx
python -m binhex <file> 
```

UU编码/解码：

```
python -m uu [infile [outfile]] # encode
python -m uu -d [infile [outfile]] # decode 
```

MIME 引用可打印编码/解码：

```
python -m mimify -e [infile [outfile]] # encode
python -m mimify -d [infile [outfile]] # decode 
```

引用可打印的编码/解码：

```
python -m quopri [file] # encode
python -m quopri -d [file] # decode 
```

## 压缩

压缩包：

```
python -m gzip [file] # compress
python -m gzip -d [file] # decompress 
```

Zipfile提取等：

```
python -m zipfile -l <file> # list
python -m zipfile -t <file> # test
python -m zipfile -e <file> <dir> # extract
python -m zipfile -c <file> sources... # create 
```

## 互联网

HTTP 服务器：

```
python -m BaseHTTPServer
python -m CGIHTTPServer
python -m SimpleHTTPServer 
```

简单的FTP客户端：

```
python -m ftplib host [-l<dir-to-list>] [-d<dir-to-cwd>] [-p] [file-to-retrieve] 
```

HTML文本提取：

```
python -m htmllib <file> 
```

JSON 验证器和漂亮的打印机：

```
python -m json.tool [infile [outfile]] 
```

列出 POP3 邮箱：

```
python -m poplib <server> <username> <password> 
```

SMTP 服务器：

```
python -m smtpd 
```

发送邮件消息（到本地主机）：

```
python -m smtplib 
```

远程登录客户端：

```
python -m telnetlib [host [port]] 
```

MIME 类型/扩展名数据库：

```
python -m mimetypes file.ext # print type for filename
python -m mimetypes -e mime/type # print extension for type 
```

打开网络浏览器：

```
python -m webbrowser -n <url> # new window
python -m webbrowser -t <url> # new tab 
```

[反重力](http://xkcd.com/353/)：

```
python -m antigravity 
```

## Python

纯 Python REPL：

```
python -m code 
```

Python字节码批处理编译器：

```
python -m compileall 
```

Python 代码分析器：

```
python -m cProfile <script>
python -m profile <script>
python -m pstats <filename> # print profiling statistics 
```

Python doctest 执行器：

```
python -m doctest <script> 
```

Python 基准测试：

```
python -m test.pystone [iterations]
python -m hotshot.stones 
```

Python 交互式调试器：

```
python -m pdb 
```

从模块中提取 Python 类和方法：

```
python -m pyclbr <script> 
```

Python 文档浏览器：

```
python -m pydoc <topic>
python -m pydoc -g # graphical browser
python -m pydoc -p <port> # start HTTP docs server on port 
```

Python片段计时器：

```
python -m timeit 
```

## 杂项

日历（类似`cal`，但可以做 HTML 和各种花哨的格式化的东西）：

```
python -m calendar 
```

目录比较器：

```
python -m filecmp [-r] dir1 dir2 # -r for recursive directory compare 
```

段落格式：

```
python -m formatter [file] 
```

显示当前平台（类似`uname`但更简单）：

```
python -m platform 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-27T06:33:32.893

许多。

```
$ grep "if __name__ == '__main__':" /usr/lib64/python2.7/* | wc -l
55 
```

并不是所有的都可以作为过滤器，所以在运行之前检查有问题的模块。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-06T11:21:06.720

Also, there is:

```
python -m this 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T03:39:03.077

Cheeseshop 上还有与 -m 兼容的软件包。试试“e”或“oo”:-)

# c - mbind 返回 EINVAL

> ID：14545002
> 
> 赞同：5
> 
> 时间：2013-01-27T06:23:34.897
> 
> 标签：c, linux, numa

我正在使用为以下问题提供的代码[numa+mbind+segfault](https://stackoverflow.com/questions/14528588/numa-mbind-segfault)，每次调用 mbind 都会返回 EINVAL。我怎样才能得到完全错误的东西？我问这个是因为 EINVAL 可以出于多种原因返回。

```
page_size = sysconf(_SC_PAGESIZE);
objs_per_page = page_size/sizeof(A[0]);
assert(page_size%sizeof(A[0])==0);
split_three=num_items/3;
aligned_size=(split_three/objs_per_page)*objs_per_page;
remnant=num_items-(aligned_size*3);
piece = aligned_size;

nodemask=1;
mbind(&A[0],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);

nodemask=2;
mbind(&A[aligned_size],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);

nodemask=4;
bind(&A[aligned_size*2+remnant],piece*sizeof(double),MPOL_BIND,
     &nodemask,64,MPOL_MF_MOVE); 
```

运行程序后（通过在每次 mbind 调用之前将节点掩码分别更改为 1,2 和 4）如下所示（作为 Mats Petersson 的回答）。它有时会出现段错误，有时运行良好。当它出现段错误时，dmesg 如下：

```
Stack:
Call Trace:
mpol_new+0x5d/0xb0
sys_mbind+0x125/0x4f0
finish_task_switch+0x4a/0xf0
? __schedule+0x3cf/0x7c0
system_call_fastpath+0x16/0x1b
Code: ...
kmem_cache_alloc+0x58/0x130 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:49:47.450

查看Linux内核的源代码，您可以获得EINVAL：

*   传入无效的模式值。超出“不一致”范围（同时使用静态和相对节点）
*   无效的最大节点（> 页面中的位数 -> x86 上的 32K）。
*   节点掩码的各种其他问题。
*   没有之一`MPOL_MF_STRICT | MPOL_MF_MOVE | MPOL_MF_MOVE_ALL`
*   `start`不是页面对齐的。
*   `start+len`当页面对齐 = 开始时。[也就是说，你的 len 至少不是一个字节]
*   `start+len`< `start` - 即负长度。
*   policy =`MPOL_DEFAULT`并且`nodes`不为空或`NULL`.
*   引用源中的评论“如果节点掩码为空（本地分配），则 MPOL_PREFERRED 不能与 MPOL_F_STATIC_NODES 或 MPOL_F_RELATIVE_NODES 一起使用。所有其他模式都需要指向非空节点掩码的有效指针。

我的猜测`start`是不是页面对齐的。

这段代码对我有用：

```
#include <numaif.h>
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>

#define ASSERT(x) do { if (!(x)) do_assert(#x,(long)(x), __FILE__, __LINE__); } while(0)

static void do_assert(const char *expr, long expr_int, const char *file, int line)
{
    fprintf(stderr, "ASSERT failed %s (%d) at %s:%d\n", 
        expr, expr_int, file, line);
    perror("Error if present:");
    exit(1);
}

int main()
{ 
    size_t num_items = 6156000;
    double *A = valloc(num_items * sizeof(double));
    ASSERT(A != NULL);
    int res;
    unsigned long nodemask;

    size_t page_size = sysconf(_SC_PAGESIZE);
    size_t objs_per_page = page_size/sizeof(A[0]);
    ASSERT(page_size%sizeof(A[0])==0);
    size_t split_three=num_items/3;
    size_t aligned_size=(split_three/objs_per_page)*objs_per_page;
    size_t remnant=num_items-(aligned_size*3);
    size_t piece = aligned_size;

    printf("A[0]=%p\n", &A[0]);
    printf("A[%d]=%p\n", piece, &A[aligned_size]);
    printf("A[%d]=%p\n", 2*piece, &A[2*piece]);

    nodemask=1;
    res = mbind(&A[0],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);
    ASSERT(res ==0);
    nodemask=1;
    res = mbind(&A[aligned_size],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);
    ASSERT(res ==0);

    nodemask=1;
    res = mbind(&A[aligned_size*2],(piece+remnant)*sizeof(double),MPOL_BIND,
     &nodemask,64,MPOL_MF_MOVE);
    ASSERT(res == 0);
} 
```

请注意，我在所有分配上都使用“nodemask=1”，因为我的机器中只有一个四核处理器，所以没有其他节点可以绑定 - 这也给出了`EINVAL`. 我认为您的系统中实际上有多个节点。

我还将最后一次通话的“剩余”从大小移到了`A[]`大小。`piece+remnant``mbind`

# jackrabbit - 如何在 adobe CQ 中创建新的自定义节点类型

> ID：14545004
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:23:39.483
> 
> 标签：jackrabbit, aem, jcr, sling

我是 CQ 新手，如何在 Day(adobe) CQ5.4 中创建新的自定义节点类型，如 mycmpny:testNode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:27:30.733

您可以像这样从工作区获取[NodeTypeManager ：](http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/nodetype/NodeTypeManager.html)

```
NodeTypeManager manager = session.getWorkspace().getNodeTypeManager();
manager.registerNodeTypes(myNewNodeType, true); 
```

日站点上有一些关于[自定义节点类型](http://dev.day.com/docs/en/cq/current/developing/custom_node_types.html)和[管理的附加信息。](http://dev.day.com/docs/en/crx/current/using_crx/nodetype_administration.html)

但是，您最好避免从一开始就使用模式，并在必要时稍后添加。请参阅 Michael Marth 的[结构化或非结构化？在 JCR 中，您不必选择](http://dev.day.com/content/ddc/blog/2010/05/you_do_not_have_toc.html) 另一种方式来看待这个问题。JCR 规范负责人 David Nuescheler对此[表示赞同](http://wiki.apache.org/jackrabbit/DavidsModel#Rule_.231%3a_Data_First.2C_Structure_Later._Maybe.)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T16:34:43.857

如果你看一下节点类型可以为你做什么，基本上有三件事：

1.  给事物命名 - 但您也可以为此使用 Sling 的资源类型等约定
2.  防止存储某些内容 - 但规则会随着时间而改变
3.  提供有效的观察

第三点可能是引入自定义节点类型的最重要原因。如果您不想观察存储库某个部分中的所有更改，则节点类型提供了有效的过滤器。（这是从 Adob​​e CQ5 产品经理 Lars Trieloff 的帖子中捕获的）

这些几乎是使用自定义节点类型的唯一原因。我只在少数情况下使用了自定义节点类型，而且大多数情况下它与索引和复杂的 jcr 查询有关。从你的问题的声音来看，听起来你都没有做这些。我建议使用开箱即用的节点类型。

要创建一个新的节点类型，请创建一个名为 nodetypes 的文件夹并在其中放置一个 example.cnd 文件，其中包含以下内容

```
<'example'='http://www.somedomain.com/example'>

[example:Audit]   
   - * (undefined) 
```

它还应该有一个 .content.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
    xmlns:rep="internal" jcr:mixinTypes="[rep:AccessControllable]"
    jcr:primaryType="nt:folder" /> 
```

# vim - (g)Vim - 在运行时禁用历史/viminfo

> ID：14545005
> 
> 赞同：2
> 
> 时间：2013-01-27T06:23:46.300
> 
> 标签：vim

我有一些命令用于在保存时压缩文件，并在保存后解压缩它（只是开头的缩进）。我遇到困难的一件事是我不希望将命令添加到历史记录中。命令和光标位置等都不是。

我想我要做的就是关闭`viminfo`预写，然后在写后重新打开。但我似乎无法弄清楚。这是我正在使用的功能：

```
function! s:CompressIndent()
    augroup CompressIndent
        autocmd!

        " Befor writing, change 4 spaces (and single tabs) into 2 spaces
        autocmd BufWritePre * set viminfo="NONE"              " Turn off 'history' before making the pre-write substitutions
        autocmd BufWritePre * %substitute/^\( \+\)\1/\1/e " Halve the number of spaces of indentation
        autocmd BufWritePre * set tabstop=2               " Make sure that tabs = 2 spaces before re-tabbing
        autocmd BufWritePre * retab                       " Turn tabs into two spaces

        " When opening a file (and after writing the file) turn 2 spaces into (and 4 tabs) into 4 spaces
        autocmd BufReadPost,BufWritePost * set tabstop=4         " Make sure to display in 4 tabs
        autocmd BufReadPost,BufWritePost * %substitute/^ \+/&&/e " Double the number of spaces of indentation on Reading and writing
        autocmd BufReadPost,BufWritePost * set viminfo='20,\"200 " Turn back on history
    augroup END
endfunction 
```

我试过`set viminfo="NONE"`和`set viminfo=""`。两者似乎都没有效果。

任何帮助，将不胜感激！

谢谢！

**编辑**

这是我现在的位置，但我仍然没有完全让它工作（现在缩进被破坏了，但 histdel() 也不太工作。保存文件后，光标移动到一个全新的位置和撤消历史已被分支或奇怪的东西：

```
function! s:CompressIndent()
    augroup CompressIndent
        autocmd!

        " Befor writing, change 4 spaces (and single tabs) into 2 spaces
        autocmd BufWritePre * call s:SpaceSubstitution("2") " Halve the number of    spaces of indentation
        autocmd BufWritePre * set tabstop=2                 " Make sure that tabs = 2 spaces before re-tabbing
        autocmd BufWritePre * retab                         " Turn tabs into two spaces

        " When opening a file (and after writing the file) turn 2 spaces into (and 4 tabs) into 4 spaces
        autocmd BufReadPost,BufWritePost * set tabstop=4    " Make sure to display in 4 tabs
        autocmd BufReadPost,BufWritePost * call s:SpaceSubstitution("4") " Double the number of spaces of indentation on Reading and writing
    augroup END
endfunction
command! -n=0 -bar CompressIndent :call s:CompressIndent()

function! s:SpaceSubstitution(toSpaces)
    if a:toSpaces == "2"
        %substitute/^\( \+\)\1/\1/e
    else
        %substitute/^ \+/&&/e
    endif

    call histdel('search', -1)
endfunction 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:38:28.367

Vim 有四个操作历史的函数，`:h history-functions`给你一个列表和简短的描述。在这四个中，您需要的是：

```
histdel() 
```

您可以在`:h histdel()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T09:53:50.093

操纵`'viminfo'`是一个太大的俱乐部，无法在这里挥舞。执行`:autocmd`的命令不会添加到命令历史记录中。

我唯一看到的是`:substitute`污染了搜索历史和当前的搜索模式。您可以通过将命令移动到 a 中来避免很多事情`:function`，并从 autocmd 调用它。见`:help function-search-undo`。

在函数结束时唯一需要做的就是从历史记录中删除搜索模式：

```
:call histdel('search', -1) 
```

* * *

编辑：要保持当前光标位置，请`:substitute`使用以下内容进行包装：

```
let l:save_view = winsaveview()
    %substitute/...
call winrestview(l:save_view) 
```

# ip - CIDR 二进制读取

> ID：14545006
> 
> 赞同：0
> 
> 时间：2013-01-27T06:23:47.210
> 
> 标签：ip, cidr

大家好，我目前正在学习网络地址..

我想知道这个的 CIDR，因为我对什么是正确的 CIDR 有点困惑......我知道...... IP：202.67.132.1 Sub:255.224.0.0

它的 CIDR 是 202.67.132.1/10

但我对另一个问题感到困惑..

IP：172.16.254.255 子：255.255.253.0

二进制文件是.. 11111111.1111111.11111101.00000000

那么它会是 172.16.254.255/23 吗？还是 /21？/o /24？

我不确定我是否会在 0 之后计算 1 或者当我遇到 0 时我会停止计算？

tnx提前..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:17:08.053

似乎印在小册子中的示例有印刷错误：D...对不起...

不可能回答这个问题...

# mysql - Instagram API 在 mysql 中存储标签中的图像

> ID：14545009
> 
> 赞同：1
> 
> 时间：2013-01-27T06:24:48.857
> 
> 标签：mysql, json, api, instagram

我正在尝试从我的数据库中的特定标签将所有图像存储在 Instagram 上。我的代码调用API并加载第一轮图像

```
$json =  file_get_contents('https://api.instagram.com/v1/tags/hahanotfunny/media/recent?client_id='. $client_id .'&max_tag_id='. $max_tag_id)  ; 
```

一旦它通过响应的第一页，它就会通过抓取响应的分页部分中的链接来检查是否还有另一个页面。它还会检查“max_tag_id”是否有值并更新我的数据库中的“max”值。我有一个最大值的原因是，当我收到“实时”的回复说有新图像时，我会从最后一个最大值开始下载它们。但是，我的代码有问题。如果我们在响应的最后一页（没有更多的分页链接），则没有“max_tag_id”变量，因此没有更新数据库。因此，下次我的刮刀运行时，它会从最后一个已知的“max_tag_id”开始，这会导致最后一页上的重复图像记录在我的数据库中。

所以，我的问题是，当我收到另一个“实时”警报说新图像可用于特定标签时，我如何从存储在数据库中的最后一条记录开始找到它们？

```
$dbConnection = new PDO('mysql:dbname=XXXXXXX;host=127.0.0.1;charset=utf8', 'XXXXXXXXX', 'XXXXX');
$dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

function getMax() {
global $dbConnection;

$tag = 'hahanotfunny';
$selectTotals = $dbConnection->prepare("SELECT * FROM instagram_time WHERE tag = :tag LIMIT 1");
$selectTotals->execute(array(':tag' => $tag));

foreach ($selectTotals as $time) {
    $max = $time['max'];    
}

return $max;
}

function updateMax($data) {
global $dbConnection;

$tag = 'hahanotfunny';
$selectTotals = $dbConnection->prepare("UPDATE instagram_time SET max = :maxid WHERE tag = :tag LIMIT 1");
$selectTotals->execute(array(':maxid' => $data, ':tag' => $tag));
}

function fetchData() {
global $dbConnection, $client_id;

$max_tag_id = getMax();
$json =  file_get_contents('https://api.instagram.com/v1/tags/hahanotfunny/media/recent?client_id='. $client_id .'&max_tag_id='. $max_tag_id)  ;
$data = json_decode($json);

$next_max = $data->pagination->next_max_tag_id;

foreach ($data->data as $insta) {
    echo '<br/><img  src="'.$insta->images->low_resolution->url.'"/>';

}

foreach ($data as $object) {
    if ( is_array( $object ) ) {
        foreach ( $object as $media ) {
            $url = $media->images->standard_resolution->url;
            $m_id = $media->id;
            $c_time = $media->created_time;
            $user = $media->user->username;
            $filter = $media->filter;
            $comments = $media->comments->count;
            $caption = $media->caption->text;
            $link = $media->link;
            $low_res=$media->images->low_resolution->url;
            $thumb=$media->images->thumbnail->url;
            $lat = $media->location->latitude;
            $long = $media->location->longitude;
            $loc_id = $media->location->id;

            $data = array(
                'media_id' => $m_id,
                'min_id' => $next_min_id,
                'url' => $url,
                'c_time' => $c_time,
                'user' => $user,
                'filter' => $filter,
                'comment_count' => $comments,
                'caption' => $caption,
                'link' => $link,
                'low_res' => $low_res,
                'thumb' => $thumb,
                'lat' => $lat,
                'long' => $long,
                'loc_id' => $loc_id,
            );

            $selectTotals = $dbConnection->prepare("INSERT INTO instagram_mg (media_id, min_id, url, c_time, user, filter, comment_count, caption, link, low_res_link, thumb, latitude, longitude, loc_id) VALUES (:mediaid, :minid, :url, :ctime, :user, :filter, :commentcount, :caption, :link, :lowreslink, :thumb, :latitude, :longitude, :locid)");

            $selectTotals->execute(array(':mediaid' => $data['media_id'], ':minid' => $data['min_id'], ':url' => $data['url'], ':ctime' => $data['c_time'], ':user' => $data['user'], ':filter' => $data['filter'], ':commentcount' => $data['comment_count'], ':caption' => $data['caption'], ':link' => $data['link'], ':lowreslink' => $data['low_res'], ':thumb' => $data['thumb'], ':latitude' => $data['lat'], ':longitude' => $data['long'], ':locid' => $data['loc_id']));

        }
    }
}

if (isset($next_max)) {
    echo $next_max . "</br>";
    updateMax($next_max);
    fetchData();
} else {
    //$current_time = time();
    //updateMax($current_time); // i tried making the current time the "max_tag_id" but it wouldnt work. 

}

} //fetchData()

fetchData(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T02:59:19.697

就个人而言，我会使用数据库触发器和随附的函数来检查重复项。来自 mysql.com：

> 触发器被定义为在对关联表执行 INSERT、DELETE 或 UPDATE 语句时激活。触发器可以设置为在触发语句之前或之后激活。例如，您可以在插入表的每一行之前或在更新的每一行之后激活触发器。

例如：

```
CREATE TRIGGER insert_check BEFORE INSERT ON instagram_mg
FOR EACH ROW
BEGIN
    *pseudo-code from here cause I don't know the exacts of mySQL functions*
    if new.media_id is equal to an existing record's media_id, 
        then return false, 
    otherwise, insert the row as normal.
END; 
```

对不起，我不能更具体。我主要处理 postgreSQL 函数，我知道语法略有不同。这是 mySQL 触发器语法的链接：http: [//dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

我希望这有帮助。干杯!

# c++ - DBT_DEVICEARRIVAL 消息正在发送无法识别的类 GUID

> ID：14545012
> 
> 赞同：1
> 
> 时间：2013-01-27T06:25:35.447
> 
> 标签：c++, winapi, ports

我正在尝试确定已连接到计算机的设备的类类型。如果它是监视器（例如电视或投影仪），我想执行特定操作，例如更改计算机的显示设置。

我确定设备类类型的方法包括以下步骤：

> *   注册设备通知
> *   检测 WM_DEVICECHANGE 事件：如果 wParam 值 = DBT_DEVICEARRIVAL：
>     
>     *   我将 lParam 值转换为 PDEV_BROADCAST_DEVICEINTERFACE 变量并检查该变量 dbcc_classguid 属性
>     *   如果 dbcc_classguid 属性 == "{4d36e96e-e325-11ce-bfc1-08002be10318}" 那么我找到了一个监控设备

**我的问题：**每当我将 LG 宽屏电视连接到计算机时，它都会发送一个无法识别的 dbcc_classguid。

出于某种原因，连接电视后，我收到 2 DBT_DEVICEARRIVAL 消息。lParam 包含以下 GUID。这是什么[设备类](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553426)？：

> {e6f07b5f-ee97-4a90-b076-33f57bf4eaa7}
> {866519b5-3f07-4c97-b7df-24c5d8a8ccb8}

有趣的是，如果我检查 Windows 设备管理器应用程序（在我连接电视之后），我可以看到电视存储在监视器下，并且它的类 GUID 确实是监视器类 GUID，即 {4d36e96e-e325-11ce-bfc1 -08002be10318}。所以这真的很奇怪。我还把一个普通的电脑显示器屏幕连接到我的笔记本电脑上，它发送了完全相同的 GUID，还发送了 2 条到达消息。

这是我的代码。为什么我在将电视连接到计算机时收到奇怪的类 GUID？这 2 个 GUID 用于什么样的设备？也许我收到的是*硬件 GUID*而不是*类 GUID*？

```
 case DBT_DEVICEARRIVAL:
    {
        PDEV_BROADCAST_HDR pBroad = (PDEV_BROADCAST_HDR) lParam;
        if (pBroad->dbch_devicetype != DBT_DEVTYP_DEVICEINTERFACE) {
            debug_print("pBroad->dbch_devicetype != DBT_DEVTYP_DEVICEINTERFACE\n");
            break;
        }

        PDEV_BROADCAST_DEVICEINTERFACE pInter = (PDEV_BROADCAST_DEVICEINTERFACE) pBroad;
        _tprintf(_T("Device Data: %s\n %x\n\n"), pInter->dbcc_name, pInter->dbcc_devicetype);

        debug_print("Printing Device Data");
        outputDeviceData(toString(pInter->dbcc_classguid), SPDRP_CLASSGUID);

        if (isMonitorDevice(pInter->dbcc_classguid)) {
            // TODO: change display mode and etc.
            debug_print("is MonitorDevice!!!");
        }
        else debug_print("is NOT MonitorDevice!!!");
    }
    break; 
```

我的应用程序的输出是：

> 消息 DBT_DEVICEARRIVAL：
> 
> 设备数据：\?\DISPLAY#GSM3AD7#5&20a3f50d&0&UID513#{866519b5-3f07-4c97-b7df-24 c5d8a8ccb8} 5
> 
> {866519b5-3f07-4c97-b7df-24c5d8a8ccb8} 不是 MonitorDevice！
> 
> 消息 DBT_DEVICEARRIVAL：
> 
> 设备数据：\?\DISPLAY#GSM3AD7#5&20a3f50d&0&UID513#{e6f07b5f-ee97-4a90-b076-33 f57bf4eaa7} 5
> 
> {e6f07b5f-ee97-4a90-b076-33f57bf4eaa7} 不是 MonitorDevice！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:47:28.363

`{e6f07b5f-ee97-4a90-b076-33f57bf4eaa7}`是`GUID_DEVINTERFACE_MONITOR`

MSDN 页面[在这里](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545901%28v=vs.85%29.aspx)。你的功能一定有问题`isMonitorDevice()`，我从这里看不到。使用 IsEqualGUID() 比较 guid 值。

# c++ - c ++中没有名称的默认参数

> ID：14545013
> 
> 赞同：8
> 
> 时间：2013-01-27T06:25:38.683
> 
> 标签：c++, parameters, default

考虑以下功能：

```
void foo(int a = 3)//named default parameter
void foo1(int = 3)//unnamed default parameter 
```

我了解第一个功能的需要。（“a”的值为3，可以在程序中使用）。但是第二个函数（这不是错误）将 3 初始化为空。我究竟如何使用这个值，如果我可以使用这个值......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T06:45:32.113

在函数声明/定义中，参数可能有或没有名称，这也适用于具有默认值的参数。

但是要在函数中使用参数，必须提供名称。

通常在声明具有默认参数的函数时

```
// Unnamed default parameter. 
void foo1(int = 3); 
```

在函数定义中

```
void foo1(int a)
{
   std::cout << a << std::endl;
} 
```

然后你可以打电话

```
foo1();   // the same as call foo1(3)
foo1(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-10T15:27:02.293

我发现在声明基类的空虚方法时，第二个声明非常有用

```
virtual void doSomething(bool = false) {}; 
```

我不想让它成为纯虚拟的，因为在许多派生类中我不想重新实现它，所以我在基类中将它留空。`false`但是在其他一些派生类中实现这个方法时我需要默认值。

```
virtual void doSomething(bool en = false) {}; 
```

这没有错，但是编译器给出了未使用的参数警告

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:35:59.303

在这两种情况下，都将**3**分配给`int`将在函数定义中确定的变量。所以在后面的情况下 - `void foo1(int = 3);`// 3 被分配给`int`- 因为在声明变量名不是必需的

您可以将其与 -`void fun(int,int);` **注意：不是从默认参数的角度来看，而是从函数声明的角度来看**

// 这里我们声明了两个`int`变量，并且在函数声明时不需要给出它的名字。

**编辑：**

正如@chethan 所指出的 -`void foo1(int = 3){ }`在函数定义中也是有效的，但是再一次**做一些你以后不能使用的事情有什么用（在函数体内）**。例如：

```
void foo1 (int a, int =2)
{
// do something
// here you wont be able to use your second argument if you haven't gave it any name
} 
```

所以我认为“不在函数定义中给出参数名称”是没有意义的。

# resize - embedSwf 居中并调整大小

> ID：14545015
> 
> 赞同：0
> 
> 时间：2013-01-27T06:26:14.477
> 
> 标签：resize, flash, embed, center

我查看了有关我的问题的所有帮助，但仍然没有结果。我想让这个 swf 以网页为中心并调整大小，以便无论屏幕大小如何都能看到整个 swf 文件，并且我希望它像 bg 一样处于固定位置。我试图实现我在这个网站上看到的每一件事，但几乎没有成功。这是我到目前为止所拥有的基础。如果您需要其他任何东西，请告诉我。

```
 <!DOCTYPE html>
    <html>
      <head>
             <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
             <title>CountdownFX</title>

      </head>
    <body style="background-color:black; background-attachment: fixed;">

    <div id="DivCountdownFX" stye="position:absolute;">
        <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript">
            var flashvars = {};
            var params = {};
            params.base = "";
            params.scale = "noscale";
            params.salign = "tl";
            params.wmode = "transparent";
            params.allowFullScreen = "true";
            params.allowScriptAccess = "always";
            swfobject.embedSWF("CountdownFX.swf", "DivCountdownFX", "1268", "1269", "9.0.0", false, flashvars, params);
        </script>
            </div>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:47:59.153

首先，`position:absolute`从`#DivCountdownFX`. 然后，创建以下类：

```
#DivCountdownFX {
    margin:auto;
    // If the div is fixed-width, use the following line:
    width:[the width of your div];

    // If your div is fluid width or part of a responsive layout, don't use the above, but rather,
    text-align:center;
} 
```

# php - PHP存储字符串JSON差异比JavaScript

> ID：14545016
> 
> 赞同：1
> 
> 时间：2013-01-27T06:26:16.650
> 
> 标签：php, javascript, json

通过 JavaScript，我可以使用 JSON.stringify() 存储 cookie，它直接将 cookie 存储为 Ie

```
'[{"n":"50fb0d0cc1277d182f000002","q":2},{"n":"50fb0d09c1277d182f000001","q":1},{"n":"50fb0d06c1277d182f000000","q":1}] 
```

我现在通过一个 REST API 传递它，另一个端点接收然后需要在服务器端重新合并到相同的 cookie 键和值中。我使用 PHP 的设置 cookie 来做到这一点。我能够正确地通过 vars，但是当使用 JSON 值设置 cookie 时，它​​会不断变成 urldecoded，我将它存储为一个直字符串，它仍然变成 Ie：

> %5B%7B%22n%22%3A%2250fb0d9dc1277d1b2f000003%22%2C%22q%22%3A3%7D%5D

有任何想法吗？为什么将其存储为解码值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T06:44:43.517

我想通了。PHP setcookie 默认编码值，需要使用 setrawcookie！

[http://php.net/manual/en/function.setrawcookie.php](http://php.net/manual/en/function.setrawcookie.php)

# c# - asp.net :: J query :: 使用 J query 添加新元素

> ID：14545017
> 
> 赞同：0
> 
> 时间：2013-01-27T06:26:23.840
> 
> 标签：c#, javascript, jquery, asp.net

我使用 c# 和 Jquery 将新表格单元格附加到页面：

此代码位于我从 JQuery 事件中调用的 Web 处理程序中：

```
sb.Append("<td style=width: 5%; align=center>" + " <input id=cbSelect"+dt.Rows[i]["FileID"].ToString()+
                    " type=checkbox name=cbSelect"+dt.Rows[i]["FileID"].ToString()
                    +" onclick='return selectSingleCheckbox('"+dSize.ToString() +"','cbSelect"+dt.Rows[i]["FileID"].ToString()+"')';>"
                    + "</td>"); 
```

表格单元格添加成功，但 **`onclick='return selectSingleCheckbox('"+dSize.ToString() +"','cbSelect"+dt.Rows[i]["FileID"].ToString()+"')'`**没有触发 java 脚本。

如何根据表格单元格触发此 javascript 事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:53:30.317

您可以单独制作每个元素：

```
var input = $('<input type="checkbox">');
var container = $('<div class="container"/>');

input.click(function(){
    // add your click event code here for the checkbox
});

// append input to container
container.append(input); 
```

只是一个简单的例子，我相信你可以从这里弄清楚。将每个元素作为一个对象，然后将它们附加到一个结构中，这很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:40:20.013

您可以执行这样的方法，而不是在输入上使用 onclick 属性

```
$(document).live('click','input[id|="cbSelect"]',function() {
   ..
}); 
```

并在输入上使用 data-size 和 data-fileid 属性来存储输入值并在函数中使用它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:47:30.290

不要在`onclick`那里使用，而是将其放入包含的 JavaScript 文件中：

```
$(document).on('click', '[id^=cbSelect]', function () {
    return selectSingleCheckbox(673, 'cbselect189');
}); 
```

# ruby-on-rails - 从模型中的视图访问查询字符串（Rails）

> ID：14545019
> 
> 赞同：1
> 
> 时间：2013-01-27T06:26:36.077
> 
> 标签：ruby-on-rails

我对 Rails 非常陌生（< 1 个月），并决定构建一个天气应用程序来让我的脚湿透。我正在使用 HTTParty 获取基于邮政编码的 Weather Underground 提要，并将通过它传递天气信息......

## 短篇小说（应该发生的事情）

用户在主页上输入邮政编码，邮政编码通过 URL 传递，因此 HTTParty 可以提供适当的 XML 文件。

## 问题

我一辈子都无法得到愚蠢的邮政编码来让它回到 HTTParty 正在做的事情的模型。

我已经调试弄清楚：

```
http://localhost:3000/12345 
```

确实会传递一个参数 - 我将它路由到 ?zip=12345 被转换为各种永久链接的位置：。调试转储确实显示：

```
zip: '37064' 
```

所以我知道邮政编码至少在那里。但是，我需要能够获取该参数并将其传递给包含 HTTParty 获取请求的模型。

以下是基础知识：

### fetch_weather.rb（模型）、weather_controller、weather#weather（视图）、routes.rb 文件

[http://pastebin.com/jbrffU08](http://pastebin.com/jbrffU08)

（值得一提的是：“37064”将替换为通过 URL 传递的邮政编码......它只是用于测试目的）

显然我想用这个做更多，但这是起点。

## 我的问题

这是正确的方法（“rails 方式”）吗？

a) 如果是这样，我怎样才能得到查询字符串来更新模型，这样我才能得到正确的 XML 提要？

b）如果不是，那么“正确”的方法是什么，我至少可以指出正确的方向吗？

我是 WordPress-Dev-Turned-Rails-Dev，所以我很乐意对此提供任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:30:38.893

模型不应该关心视图、查询字符串等等。他们的工作是管理数据。然而，管理查询字符串是控制器的工作。

```
class WeatherController < ApplicationController
  def weather
    # extract zip code from query string and pass to the model
    @weather_lookup = FetchWeather.new params[:zip]
  end
end

class FetchWeather < ActiveRecord::Base
attr_accessor :temperature, :condition, :zip

def initialize zip
  # snip

 self.zip = zip
end

 def fetch_weather
    HTTParty.get("http://api.wunderground.com/api/0299ecb9aa94e332/hourly/q/" + zip + ".xml")
 end

end 
```

# yacc - 有人可以帮我解决这个 Lex-Yacc 解析问题吗？

> ID：14545020
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:26:38.397
> 
> 标签：yacc, lex

看到我想要的是完全忽略`$display`解析器中的某种语法。所以我问[了这个问题](https://stackoverflow.com/questions/14441674/in-lex-how-to-parse-some-code-until-a-special-symbol)，以便我可以解析`if(1) $display("Hello");`哪个`if(1) ;`没有问题。但是当只有`$display("Hello");`没有时`if(1)`，我的解析器会生成一个`;`，这会导致`syntax error`. 谁能帮我这个。将不胜感激。

* * *

我正在修改的解析器不解析`$display`，它显示`syntax error`。而且我的目的很简单：使用最简单的方法忽略`$display("Hello");`其他语法而不影响其他语法。情况是这样的：

```
always @(*)
begin
if(1) $display("Hello");
end 
```

如果我将`$display("Hello");`as 视为`;`，上述代码将被解析为：

```
always @(*)
begin
if(1) ;
end 
```

解析器没问题，但是如果有这样的代码：

```
always @(*)
begin
$display("Hello");
end 
```

它将被解析为：

```
always @(*)
begin
;
end 
```

这是不行的。所以我被困在这里。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:56:13.390

所以在不知道你的 .y 和 .lex 的情况下，我只会添加规则来吃掉

```
$display (...); 
```

也许喜欢

```
display0 = Dollardisplay Leftbracket parameterlist Rightbracket {/* ignore it */}
display : display0 | display0 Semi 
```

然后`display`在你的语法中适当的地方插入这个规则

这意味着，该规则可以选择包含尾随`;`当然，您可以引入歧义，从而减少冲突。或者您重构有关语句的规则并允许使用空的规则（单个`;`）。但是使用语法和词法分析器会更容易回答......

# visual-studio-2010 - 是什么导致消息“未设置批准以使用您的测试框架。”？

> ID：14545021
> 
> 赞同：4
> 
> 时间：2013-01-27T06:26:55.763
> 
> 标签：visual-studio-2010, tfsbuild, approval-tests

**是什么导致消息“未设置批准以使用您的测试框架。”？**

我们有一个基于 ApprovalTests 的单元测试在夜间远程团队构建中失败，但有以下例外：

* * *

测试方法 Test_CanvasModeConverters 抛出异常：
System.Exception: **Approvals 未设置为使用您的测试框架。**
它目前支持 [NUnit, MsTest, MbUnit, xUnit.net] 添加一个使用 ApprovalTests.StackTraceParsers.StackTraceParser.AddParser() 方法来添加 ApprovalTests.StackTraceParsers.IStackTraceParser 的实现，并支持您的测试框架。要了解如何实施，请参阅[http://blog.approvaltests.com/2012/01/creating-namers.html](http://blog.approvaltests.com/2012/01/creating-namers.html)

* * *

**此单元测试在本地 VS2010 单元测试运行（即 mstest）中顺利通过。它还在远程团队“签入”构建中顺利通过（即在每个代码签入时运行）。**

我们在测试开始时记录了一些诊断信息，以识别正在运行的 ApprovalTests.dll 程序集......

```
--------------------
ApprovalTests, Version=1.21.4657.21485, Culture=neutral, PublicKeyToken=11bd7d124fc62e0f:
CodeBase = file:///E:/BldSrc/27/305/TestResults/NightlyBuild/Client[2]/Out/ApprovalTests.DLL
FullName = ApprovalTests, Version=1.21.4657.21485, Culture=neutral, PublicKeyToken=11bd7d124fc62e0f
GlobalAssemblyCache = False
ImageRuntimeVersion = v4.0.30319
Location = E:\BldSrc\27\305\TestResults\NightlyBuild\Client[2]\Out\ApprovalTests.dll
Company Name = 
Assembly Product = ApprovalTests
-------------------- 
```

这是堆栈跟踪...

```
ApprovalTests.StackTraceParsers.StackTraceParser.Parse(StackTrace stackTrace)
ApprovalTests.Namers.UnitTestFrameworkNamer..ctor()
ApprovalTests.Approvals.<.cctor>b__11()
ApprovalTests.Approvals.GetDefaultNamer()
ApprovalTests.Approvals.Verify(IApprovalWriter writer)
ApprovalTests.Approvals.Verify(String text)
ApprovalTests.Combinations.CombinationApprovals.VerifyAllCombinations[A,B,C,D,E,F,G,H,I](Func`10 processCall, String format, Func`2 resultFormatter, IEnumerable`1 aList, IEnumerable`1 bList, IEnumerable`1 cList, IEnumerable`1 dList, IEnumerable`1 eList, IEnumerable`1 fList, IEnumerable`1 gList, IEnumerable`1 hList, IEnumerable`1 iList)
ApprovalTests.Combinations.CombinationApprovals.VerifyAllCombinations[A,B,C,D,E,F,G,H,I](Func`10 processCall, String format, IEnumerable`1 aList, IEnumerable`1 bList, IEnumerable`1 cList, IEnumerable`1 dList, IEnumerable`1 eList, IEnumerable`1 fList, IEnumerable`1 gList, IEnumerable`1 hList, IEnumerable`1 iList)
ApprovalTests.Combinations.CombinationApprovals.VerifyAllCombinations[A,B](Func`3 processCall, IEnumerable`1 aList, IEnumerable`1 bList) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T19:40:35.280

正如格雷厄姆所说：

“批准测试通过遍历堆栈跟踪来推断批准文件的名称以获取测试方法名称。”

最有可能的是，我建议您的编译器可能正在删除（内联）实际的测试方法。您可以通过带有注释的方法来防止这种情况

```
[MethodImpl(MethodImplOptions.NoInlining)] 
```

或者，我认为这是最好的选择，在您的编译器选项中完全关闭该功能（取消选中项目属性中的优化代码按钮）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T19:05:35.110

我对包含我的测试代码的项目进行了以下更改，并消除了这些错误：

1.  按照 Llewellyn 的建议禁用代码优化
2.  在高级构建设置中，将“调试信息”设置为“完整”。在我的项目中，它被设置为仅用于发布版本的 pdb。

同样，我只需要对包含我的测试的项目进行这些更改。

此外，我测试了 Llewellyn 建议的注释，它也有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-05T08:53:29.730

FWIW，当我的测试方法使用`[TestCase(...)]`没有的属性时，我看到了这个问题`[Test]`

```
[TestCase("example")]
public void Broken_Test(string parameter) {
  //...
} 
```

添加`[Test]`属性解决了问题

```
[Test]
[TestCase("example")]
public void Working_Test(string parameter) {
  //...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T11:18:00.903

Approvals Tests 通过遍历堆栈跟踪来推断批准文件的名称以获取测试方法名称。

您的堆栈跟踪中没有您的测试名称，这可能意味着；

*   您没有包含完整的堆栈跟踪，其中包含相关信息以回答您的问题
*   或者您的测试可能由于缺少 pdb 而没有获取所需的堆栈跟踪信息？

# javascript - jQuery 1.9 浏览器检测

> ID：14545023
> 
> 赞同：19
> 
> 时间：2013-01-27T06:27:27.803
> 
> 标签：javascript, jquery, browser-detection, browser-feature-detection

在早期版本中，我曾经测试是否应该`popstate`在页面加载时手动触发，因为 Chrome 会在加载后立即触发，而 Firefox 和 IE 则不会。

```
if ($.browser.mozilla || $.browser.msie) {
    $(window).trigger('popstate');
} 
```

现在他们在 1.9 中删除了浏览器对象，我应该如何测试这些浏览器？或者我如何确定是否需要`popstate`加载页面？

代码是：

```
$(function(){
    $(window).on('popstate', popState);

    // manual trigger loads template by URL in FF/IE.
    if ($.browser.mozilla || $.browser.msie) {
       $(window).trigger('popstate');
    }
}); 
```

## 更新

为此：

```
 function popState(e){
        var initial = e.originalEvent === undefined || e.originalEvent.state === null;
        if(!initial){
            activateRoute({
                key: e.originalEvent.state.key,
                settings: e.originalEvent.state.settings
            },'replace');
        }
    }

    function init(){
        $(window).on('popstate', popState);

        $(function(){
            var route = getRoute(document.location.pathname);
            activateRoute(route, 'replace');
        });
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T22:13:51.333

您应该为您的处理程序添加一点完整性检查`popstate`，并确保如果您“弹出”到您开始时的相同状态，它不会做任何昂贵的事情。然后您可以不关心浏览器，而只需调用您的 popstate准备好文件：

```
$(function(){
    $(window).on('popstate', popState);

    // call popstate on document ready
    $(popstate);
}); 
```

建议您将代码从后面粘贴`$.browser`到您的环境中的答案对于支持不好的做法来说太过分了。您可以检测 99% 的您需要的东西。几乎每次使用`$.browser`都是危险的。*几乎*总有办法检测到这一点。

JavaScript 社区长期以来一直反对浏览器嗅探。 [这](http://www.sitepoint.com/why-browser-sniffing-stinks/)是 2009 年的一篇文章，告诉我们为什么这是一个坏主意。还有很多其他的。

我求求你不要复制`$.browser`回你的代码，jQuery 团队决定取消它是有原因的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-15T12:01:00.123

[这](http://pupunzi.open-lab.com/2013/01/16/jquery-1-9-is-out-and-browser-has-been-removed-a-fast-workaround/)是解决此问题的快速方法。将这行代码添加到您的 jQuery-1.9.js 中，并将 $.browser 替换为 jQuery.browser

```
jQuery.browser = {};
jQuery.browser.mozilla = /mozilla/.test(navigator.userAgent.toLowerCase()) && !/webkit    /.test(navigator.userAgent.toLowerCase());
jQuery.browser.webkit = /webkit/.test(navigator.userAgent.toLowerCase());
jQuery.browser.opera = /opera/.test(navigator.userAgent.toLowerCase());
jQuery.browser.msie = /msie/.test(navigator.userAgent.toLowerCase()); 
```

[这里](http://pupunzi.open-lab.com/2013/01/16/jquery-1-9-is-out-and-browser-has-been-removed-a-fast-workaround/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-27T06:29:44.260

我想把这段代码给你了。如果您需要根据您的要求进行更改，请不要忘记进行更改。

```
var matched, browser;

// Use of jQuery.browser is frowned upon.
// More details: http://api.jquery.com/jQuery.browser
// jQuery.uaMatch maintained for back-compat
jQuery.uaMatch = function( ua ) {
    ua = ua.toLowerCase();

    var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
        /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
        /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
        /(msie) ([\w.]+)/.exec( ua ) ||
        ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
        [];

    return {
        browser: match[ 1 ] || "",
        version: match[ 2 ] || "0"
    };
};

matched = jQuery.uaMatch( navigator.userAgent );
browser = {};

if ( matched.browser ) {
    browser[ matched.browser ] = true;
    browser.version = matched.version;
}

// Chrome is Webkit, but Webkit is also Safari.
if ( browser.chrome ) {
    browser.webkit = true;
} else if ( browser.webkit ) {
    browser.safari = true;
}

jQuery.browser = browser; 
```

# 供您参考 - jQuery Docs

> 我们建议不要使用此属性；请尝试改用特征检测（参见 jQuery.support）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

[jQuery.browser](http://api.jquery.com/jQuery.browser/)

[jQuery.support](http://api.jquery.com/jQuery.support/)

# jquery - 如何在 jQuery AJAX 的 onclick 事件中的函数中传递参数？

> ID：14545026
> 
> 赞同：2
> 
> 时间：2013-01-27T06:28:28.430
> 
> 标签：jquery

我在 AJAX 的 onclick 事件中使用参数更改了函数，但出现了一些错误。它不工作。我犯了什么错误？

```
function changeStatus(pid,status,table)
{
$.ajax({
    url:'view/ajax_change_status.php?pid='+pid+'&status='+status+'&table='+table,
    type:'GET',
    cache:false,
    success:function(result)
    {
        $('.status_'+pid).html(result);
        if(result=='Enabled')
        {
            var newStatus=1;
        }
        else
        {
            var newStatus=0;
        }
        $('.status_'+pid).attr("onclick",'return changeStatus('+pid+','+newStatus+','+table+')');
        }
    });
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:39:49.613

修改这个

```
$('.status_'+pid).attr("onclick",'return changeStatus('+pid+','+newStatus+','+table+')'); 
```

至

```
$('.status_'+pid).attr("onclick",'return changeStatus(\''+pid+'\',\''+newStatus+'\',\''+table+'\')'); 
```

并且还要确保 php 文件的 url 是正确的。我建议您使用绝对路径而不是相对路径：

`/view/ajax_change_status.php`

# c# - c# - 列表对象元素翻转

> ID：14545027
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:28:29.043
> 
> 标签：c#, list

我正在开发一个程序，该程序利用重载到我创建的结构的 List 对象。

随着时间的推移，这个程序不断地增加列表的大小。我正在寻找一种算法，它将在 List 的大小为 50 时触发，消除前 25 个元素，并将后 25 个元素向下移动到前半部分，并开始在第 26 个元素点添加元素。

假设条目和 testEntries 在上面定义并模板化为我创建的结构。

```
if(entries.Count >= 50)
{
    testEntries = entries;
    int x = 0;
    for (x = 0; x < (entries.Count / 2); x++)
    {
        testEntries.RemoveAt(x);
    }
    for (x = 0; x < (entries.Count); x++)
    {
        testEntries.Add(entries[entries.Count / 2]);
    }
entries = testEntries;
} 
```

//entries 是我的原始列表，testEntries 是我的第二个帮助操作的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:48:01.553

[List （框架中的任何IList](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx) ）*的默认实现保持具有连续索引的项目。也就是说，一旦你删除了一个项目，列表中在它之后的所有项目都会向后移动一个位置。需要明确的是，如果您有：

```
 0 -> A
 1 -> B
 2 -> C
 3 -> D 
```

如果您删除`B`then`C`并将`D`向后移动一个空格：

```
 0 -> A
 1 -> C
 2 -> D 
```

*：您是否使用 List 的自定义实现？

* * *

## 假设您不使用自定义列表

知道这一点，并且由于您在列表的开头删除，您可以在第一个位置删除所需数量的项目：

```
if(entries.Count >= 50)
{
    testEntries = entries;
    int x = 0;
    for (x = 0; x < (entries.Count / 2); x++)
    {
        testEntries.RemoveAt(0); // <--- Always removing the first item
    }
    //No need
    /*for (x = 0; x < (entries.Count); x++)
    {
        testEntries.Add(entries[entries.Count / 2]);
    }*/
    entries = testEntries;
} 
```

您可能还需要考虑是否要删除前半部分、前 25 个项目，或者直到只剩下 25 个项目。上面的代码删除了前半部分。

要删除前 25 个，请更改`for (x = 0; x < (entries.Count / 2); x++)`为`for (x = 0; x < 25; x++)`。要删除直到剩下 25 个项目，我建议一段时间：

```
if(entries.Count >= 50)
{
    testEntries = entries;
    while (entries.Count > 25)
    {
        testEntries.RemoveAt(0);
    }
    entries = testEntries;
} 
```

* * *

## 假设您使用自定义列表

如果您有一个不保留连续索引的自定义列表...您可以先将后半部分复制到前半部分。之后，您可以删除下半部分。

```
if(entries.Count >= 50)
{
    testEntries = entries;
    int x = 0;
    int pivot = (entries.Count / 2);
    //Copy
    for (x = pivot; x < entries.Count; x++)
    {
        testEntries[x - pivot] = testEntries[x];
    }
    //Remove
    for (x = pivot; x < entries.Count; x++)
    {
        testEntries.RemoveAt(x);
    }
    entries = testEntries;
} 
```

* * *

## 最后说明

这些都不是线程安全的。如果您有多个线程同时访问您的对象，则可能会导致意外结果。您应该考虑使用某种形式的同步。我认为创建无锁解决方案是可能的，这超出了本文的范围。

# android - 试图将相机切换回前面但出现异常

> ID：14545031
> 
> 赞同：2
> 
> 时间：2013-01-27T06:29:28.337
> 
> 标签：android, android-camera

试图将摄像头切换回前面，但出现异常。找不到问题请检查并帮助..

> ```
> error:- 01-27 11:49:00.376: E/AndroidRuntime(30767):
> java.lang.RuntimeException: Unable to start activity
> ComponentInfo{com.vdrecord/com.vdrecord.AndroidVideoCapture}:
> java.lang.NullPointerException 
> ```

**我的代码：-**

```
 public class AndroidVideoCapture extends Activity{
    private static final String TAG = "CameraRecorderActivity";
  private Camera myCamera;
    private MyCameraSurfaceView myCameraSurfaceView;
    private MediaRecorder mediaRecorder;
    private static String val="yes";
    private Button useOtherCamera;
  Button myButton;
  SurfaceHolder surfaceHolder;
  boolean recording;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        recording = false;
        setContentView(R.layout.activity_android_video_capture);
        useOtherCamera = (Button) findViewById(R.id.useOtherCamera);
        useOtherCamera.setOnClickListener(
                new View.OnClickListener() {
                    @Override
                     public void onClick(View v) {
            //Get Camera for preview
            myCamera = getCameraInstance();
        }
        });
        FrameLayout myCameraPreview = (FrameLayout)findViewById(R.id.videoview);
        myCameraPreview.addView(myCameraSurfaceView);
        myButton = (Button)findViewById(R.id.mybutton);
        myButton.setOnClickListener(myButtonOnClickListener);
        myButton.setOnClickListener(myButtonOnClickListener);

        if(myCamera == null){
            System.out.println("PRINT TRACK--7 ");
         Toast.makeText(AndroidVideoCapture.this,
           "Fail to get Camera",
           Toast.LENGTH_LONG).show();
        }

        myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
        }

    Button.OnClickListener myButtonOnClickListener
    = new Button.OnClickListener(){

  @Override
  public void onClick(View v) {
   // TODO Auto-generated method stub
   if(recording){
                // stop recording and release camera
                mediaRecorder.stop();  // stop the recording
                releaseMediaRecorder(); // release the MediaRecorder object

                //Exit after saved
                finish();
   }else{

    //Release Camera before MediaRecorder start
    releaseCamera();

          if(!prepareMediaRecorder()){
           Toast.makeText(AndroidVideoCapture.this,
             "Fail in prepareMediaRecorder()!\n - Ended -",
             Toast.LENGTH_LONG).show();
           finish();
          }

    mediaRecorder.start();
    recording = true;
    myButton.setText("STOP");
   }
  }};

  public int getFrontCameraId() {
      CameraInfo ci = new CameraInfo();
      for (int i = 0 ; i < Camera.getNumberOfCameras(); i++) {
          Camera.getCameraInfo(i, ci);
          if ((val=="yes") && (ci.facing == CameraInfo.CAMERA_FACING_FRONT))
          {
              val="no";
              return i;
          }

      }

      return CameraInfo.CAMERA_FACING_BACK; // No front-facing camera found
  }
    public Camera getCameraInstance(){
  // TODO Auto-generated method stub
        Camera c = null;
        try {
          int index = getFrontCameraId();
          if (index != -1)
          {
           c = Camera.open(index);
         //   c = Camera.open(); // attempt to get a Camera instance
        }else{
             c = Camera.open(index);
        }
        }
        catch (Exception e){
          Log.d(TAG, "Error setting camera preview: " + e.getMessage());
            // Camera is not available (in use or does not exist)
        }
        return c; // returns null if camera is unavailable
  }

  private boolean prepareMediaRecorder(){
     myCamera = getCameraInstance();
     mediaRecorder = new MediaRecorder();

     myCamera.unlock();
     mediaRecorder.setCamera(myCamera);

     mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
     mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

     mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));

     mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
        mediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
        mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M

     mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface());

     try {
         mediaRecorder.prepare();
     } catch (IllegalStateException e) {
         releaseMediaRecorder();
         Log.d(TAG, "Error setting camera preview: " + e.getMessage());
         return false;
     } catch (IOException e) {
         releaseMediaRecorder();
         Log.d(TAG, "Error setting camera preview: " + e.getMessage());
         return false;
     }
     return true;

  }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaRecorder();       // if you are using MediaRecorder, release it first
        releaseCamera();              // release the camera immediately on pause event
    }

    private void releaseMediaRecorder(){
        if (mediaRecorder != null) {
            mediaRecorder.reset();   // clear recorder configuration
            mediaRecorder.release(); // release the recorder object
            mediaRecorder = null;
            myCamera.lock();           // lock camera for later use
        }
    }

    private void releaseCamera(){
        if (myCamera != null){
            myCamera.release();        // release the camera for other applications
            myCamera = null;
        }
    }

  public class MyCameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{

  private SurfaceHolder mHolder;
     private Camera mCamera;

  public MyCameraSurfaceView(Context context, Camera camera) {
         super(context);
         mCamera = camera;

         // Install a SurfaceHolder.Callback so we get notified when the
         // underlying surface is created and destroyed.
         mHolder = getHolder();
         mHolder.addCallback(this);
         // deprecated setting, but required on Android versions prior to 3.0
         mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
     }

  @Override
  public void surfaceChanged(SurfaceHolder holder, int format, int weight,
    int height) {
         // If your preview can change or rotate, take care of those events here.
         // Make sure to stop the preview before resizing or reformatting it.

         if (mHolder.getSurface() == null){
           // preview surface does not exist
           return;
         }

         // stop preview before making changes
         try {
             mCamera.stopPreview();

         } catch (Exception e){
           Log.d(TAG, "Error setting camera preview: " + e.getMessage());
           // ignore: tried to stop a non-existent preview
         }

         // make any resize, rotate or reformatting changes here

         // start preview with new settings
         try {
             mCamera.setPreviewDisplay(mHolder);
             mCamera.startPreview();

         } catch (Exception e){
           Log.d(TAG, "Error setting camera preview: " + e.getMessage());
         }
  }

  @Override
  public void surfaceCreated(SurfaceHolder holder) {
   // TODO Auto-generated method stub
   // The Surface has been created, now tell the camera where to draw the preview.
         try {
             mCamera.setPreviewDisplay(holder);
             mCamera.startPreview();
         } catch (IOException e) {
           Log.d(TAG, "Error setting camera preview: " + e.getMessage());
         }
  }

  @Override
  public void surfaceDestroyed(SurfaceHolder holder) {
   // TODO Auto-generated method stub

  }
  }
  } 
```

> ```
>  Error Log:- 01-27 11:49:00.376: E/AndroidRuntime(30767): FATAL
>     EXCEPTION: main 01-27 11:49:00.376: E/AndroidRuntime(30767):
>     java.lang.RuntimeException: Unable to start activity
>     ComponentInfo{com.vdrecord/com.vdrecord.AndroidVideoCapture}:
>     java.lang.NullPointerException 01-27 11:49:00.376:
>      E/AndroidRuntime(30767):   at
>     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
>     01-27 11:49:00.376: E/AndroidRuntime(30767):    at
>     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
>     01-27 11:49:00.376: E/AndroidRuntime(30767):    at
>     android.app.ActivityThread.access$600(ActivityThread.java:127) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
>     01-27 11:49:00.376: E/AndroidRuntime(30767):    at
>     android.os.Handler.dispatchMessage(Handler.java:99) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     android.os.Looper.loop(Looper.java:137) 01-27 11:49:00.376:
>     E/AndroidRuntime(30767):    at
>     android.app.ActivityThread.main(ActivityThread.java:4507) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     java.lang.reflect.Method.invokeNative(Native Method) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     java.lang.reflect.Method.invoke(Method.java:511) 01-27 11:49:00.376:
>     E/AndroidRuntime(30767):    at
>     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
>     01-27 11:49:00.376: E/AndroidRuntime(30767):    at
>     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     dalvik.system.NativeStart.main(Native Method) 01-27 11:49:00.376:
>     E/AndroidRuntime(30767): Caused by: java.lang.NullPointerException
>     01-27 11:49:00.376: E/AndroidRuntime(30767):    at
>     android.view.ViewGroup.addView(ViewGroup.java:3158) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     android.view.ViewGroup.addView(ViewGroup.java:3145) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     com.vdrecord.AndroidVideoCapture.onCreate(AndroidVideoCapture.java:51)
>     01-27 11:49:00.376: E/AndroidRuntime(30767):    at
>     android.app.Activity.performCreate(Activity.java:4465) 01-27
>     11:49:00.376: E/AndroidRuntime(30767):  at
>     android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
>     01-27 11:49:00.376: E/AndroidRuntime(30767):    at
>     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932) 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T11:48:53.567

在切换到其他实例之前停止相机上一个实例：

```
if (camera != null) {
        camera.stopPreview();
        camera.setPreviewCallback(null);
        camera.release();
        camera = null;
        surfaceholder.removeCallback(CameraActivity.this);
        surfaceholder = null;
} 
```

并完成当前的相机活动，调用相同相机活动的开始意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T14:44:37.313

首先，破坏您的表面，释放相机并手动重新创建表面。像这样：

```
surfaceDestroy(holder);
surfaceCreated(holder);
surfaceChanged(holder,format,width,height); 
```

它解决了我的问题，它可能会帮助你。

# ruby - 如何用 ruby 解析这些书名？

> ID：14545033
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:29:53.183
> 
> 标签：ruby, regex, parsing

我想让 ruby​​ 阅读我的图书收藏中所有图书的标题，这些图书目前看起来像这样：

```
No.Starch.The.Book.of.Ruby.Jun.2011.mobi
No.Starch.The.Book.of.Ruby.Jun.2011.pdf
Oreilly.Graphics.and.Animation.on.iOS.Apr.2011.epub
Oreilly.Graphics.and.Animation.on.iOS.Apr.2011.pdf
Packtpub.Core.Data.iOS.Essentials.Apr.2011.pdf
Pragmatic.iOS.Recipes.Jul.2011.epub 
```

我要做的第一件事是解析出版商名称。我从这里开始：[http ://rubular.com/r/muioQM1Gsq](http://rubular.com/r/muioQM1Gsq)

但是我究竟该如何解析多个发布者字符串呢？我真的是个菜鸟 - 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T07:30:47.520

这是我如何做的一个基本示例：

```
TITLE_HASH = {
  'No.Starch' => 'No_Starch'
}
TITLE_REGEX = /\b(?:#{ Regexp.union(TITLE_HASH.keys).source })\b/i

DATA.each do |fn|
  puts fn.gsub(TITLE_REGEX, TITLE_HASH).split('.').first.tr('_', ' ')
end

__END__
No.Starch.The.Book.of.Ruby.Jun.2011.mobi
No.Starch.The.Book.of.Ruby.Jun.2011.pdf
Oreilly.Graphics.and.Animation.on.iOS.Apr.2011.epub
Oreilly.Graphics.and.Animation.on.iOS.Apr.2011.pdf
Packtpub.Core.Data.iOS.Essentials.Apr.2011.pdf
Pragmatic.iOS.Recipes.Jul.2011.epub 
```

运行时输出：

```
No Starch
No Starch
Oreilly
Oreilly
Packtpub
Pragmatic 
```

`TITLE_HASH`与发布者的模式保持一致，`.`用“_”替换任何超过一个单词的名称的分隔符。

这种解决方案需要人工维护，但这是因为无法隔离发布者信息；有时是第一个词，有时是前两个词，我敢肯定还有更多的词。

# javascript - 如何从另一个 java 脚本文件调用 java 脚本函数？

> ID：14545034
> 
> 赞同：0
> 
> 时间：2013-01-27T06:29:53.883
> 
> 标签：javascript, html

> **可能重复：**
> [从另一个 .js 文件调用 javascript 函数](https://stackoverflow.com/questions/4335069/calling-a-javascript-function-from-another-js-file)

我是 Java 脚本的新手。我只想知道如何从另一个 java 脚本文件中调用 java 脚本函数？从 main.js 调用 temp.js 中的函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:33:05.580

您所要做的就是在页面上包含两个 JavaScript 文件。假设这两个函数都在该`window`级别声明，它们都可以相互调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:33:27.360

只需确保带有 javascript 代码的文件包含在 html 文档中，并且您可以将位于任何文件中的任何函数从一个文件调用到另一个文件。

# c# - 如果类从 IDisposable（或任何）继承，那么从 IDisposable（或任何）继承的接口是否好/是否必要？

> ID：14545044
> 
> 赞同：2
> 
> 时间：2013-01-27T06:31:32.590
> 
> 标签：c#, idisposable

我在问，如果一个类 A 继承自 InterfaceA 和 IDisposable，那么 InterfaceA 是否应该从 IDisposable 继承是否是好的/必要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:34:39.617

不。

仅仅因为实现类继承自`IDisposable`并不意味着它的接口应该实现`IDisposable`。

`IDisposable`旨在用作类释放非托管资源的一种方式。您的接口很有可能不需要实现类来使用非托管资源，因此没有理由实现实现`IDisposable`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:08:40.143

我认为这取决于您的预期用途。例如，如果用户永远不会看到具体的类，而只会看到接口，那么他们就不会期望实现能够实现`IDisposable`。

用户*可以*执行以下操作：

```
var disposable = a as IDisposable;
if (disposable != null)
    disposable.Dispose(); 
```

但我认为他们中的大多数人不会这样做，除非您的文档明确说明他们应该这样做。

另一方面，如果您希望用户主要直接使用该类，那么他们将知道该类是`IDisposable`，因此他们可能会正确处理它。

您在评论中提到了 DI 容器。这取决于特定的容器，但我认为大多数 DI 容器会在知道您不再使用该对象时将其丢弃。但这假设容器知道该对象不再使用（在 Castle 的情况下，这很可能意味着调用`Release()`）并且他们不使用“单身生活方式”（在 Castle 术语中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T19:27:28.903

如果最后一个持有对实现并需要清理的对象实例的引用的实体可能只将该实例知道为，而不是其底层类型，则接口`IFoo`可能应该实现。`IDisposable``IFoo``IFoo`

例如，`IEnumerator<T>`implements的原因`IDisposable`是，虽然只有少数实现需要清理，但实例通常由调用`IEnumerable<T>.GetEnumerator()`. `GetEnumerator()`这样的代码通常对要返回的对象的实际类型一无所知；因此，它无法知道返回的对象是否需要清理。由于未能处置确实需要清理的枚举数可能会产生不良后果，因此唯一安全的假设是，如果可能，应清理任何未知类型的枚举数。

虽然非泛型`IEnumerator`没有实现`IDisposable`，但这并不意味着它不需要清理。相反，这意味着任何调用的代码都`IEnumerable.GetEnumerator()`必须检查它返回的对象是否实现`IDisposable`，如果是，则检查`Dispose`它。这是相当缓慢和麻烦的。如果`IEnumerator`实现`IDisposable`，代码可以简单地调用`Dispose`类是否需要清理；即使`Dispose`什么都不做，在一个已知实现的接口上调用一个不做任何事情的例程将比测试一个没有实现的接口浪费更少的时间。

It's important to note that even though very few implementations if `IEnumerator` require disposal, any code which calls `GetEnumerator` on unknown implementation of `IEnumerable` *must*, for correctness, attempt the cast to `IDisposable`. The fact that `IEnumerable<T>`, unlike `IEnumerable`, implements `IDisposable` does not add to the obligations of code that calls `IEnumerable<T>`. Rather, it makes such obligations explicit, and it reduces the cost of complying with them.

# apache - 差异目录上的 cgi-bin ScriptAlias

> ID：14545046
> 
> 赞同：0
> 
> 时间：2013-01-27T06:31:52.133
> 
> 标签：apache, cgi, httpd.conf

请帮我解决这个问题！

目前我有一个服务器，有 2 个硬盘驱动器安装为 /site01 和 /site02，我在每个硬盘驱动器上创建了 2 个站点。

现在我想在两个站点上运行 cgi 脚本，但我不知道如何为 cgi-bin 目录配置 ScriptAlias。对于 site01.mydomain.com 和 /site02/www/cgi-bin 对于 site02.mydomain.com，cgi 脚本放置在 /site01/www/cgi-bin 上。

现在我的 httpd.conf 配置为：

```
ScriptAlias /cgi-bin/ /site01/www/cgi-bin/ 
```

有了这个，我可以在 site01.mydomain.com 上执行 cgi 脚本但是我如何配置 site02.mydomain.com 上的脚本来运行它呢？

我试图把：

```
ScriptAlias /cgi-bin/ /*/www/cgi-bin/ 
```

或者

```
ScriptAlias /cgi-bin/ /site0*/www/cgi-bin/ 
```

但它不可能运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:58:10.393

ScriptAlias 指令可以放在 VirtualHost 指令中。通过在每个 VirtualHost 中使用不同的 ScriptAlias 指令，您可以为您的站点指定不同的脚本目录。

# ios - 如何确定 ScheduledAudioFileRegion 何时完成播放？

> ID：14545051
> 
> 赞同：3
> 
> 时间：2013-01-27T06:32:23.960
> 
> 标签：ios, core-audio

在 iOS 上，我有一个由 AUNode 包装的音频单元类型`kAudioUnitSubType_AudioFilePlayer`，并连接到音频图中的多通道混音器和远程 IO（输出）。

在播放图表时，我想循环文件并能够确定 AudioFilePlayer 何时到达文件末尾，以便我可以在它开始下一次循环迭代之前执行操作。

在查看 AudioUnitProperties.h 时，虽然有一个完成回调 -`mCompletionProc`它仅在磁盘读取文件并安排播放时调用，而不是在它实际完成播放音频时调用。

因此，我考虑将音频（数据包/帧）的长度存储为一个属性，并在附加到混音器的另一个输入的输入回调中，检查我们是否在文件末尾。但是该回调不会在每一帧都被调用，所以我很可能会错过文件的实际结尾。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T15:33:15.647

请设置 ScheduledAudioFileRegion.mCompletionProc，

//

```
ScheduledAudioFileRegion playRegion;
playRegion.mTimeStamp.mFlags = kAudioTimeStampSampleTimeValid;
playRegion.mTimeStamp.mSampleTime = 0;
playRegion.mCompletionProc = XXXXXXXXXXXXXXXX(you proc);
playRegion.mCompletionProcUserData = NULL;
playRegion.mAudioFile = mAudioFile;
playRegion.mLoopCount = 0;
playRegion.mStartFrame = mStartSampleFrame;
playRegion.mFramesToPlay = UInt32(-1);

err = AudioUnitSetProperty(mFilePlayerAU, kAudioUnitProperty_ScheduledFileRegion,
                           kAudioUnitScope_Global, 0, &playRegion, sizeof(playRegion)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T10:15:26.487

如果您想知道轨道何时结束，您可以使用`RenderNotify`（当要求渲染音频单元时调用通知回调）。在渲染回调中，您可以获得当前处理的帧数，并可以将它们添加到您的 frame 属性中。通过简单检查此属性是否高于帧数，您将能够知道轨道何时完成。

# python - 每当将新数据发布到我的 Flask SQLAlchemy 应用程序时，我应该如何更新 div？

> ID：14545053
> 
> 赞同：0
> 
> 时间：2013-01-27T06:32:54.330
> 
> 标签：python, jquery, flask

我正在 Flask 中制作一个聊天应用程序进行练习，我需要聊天页面上的 HTML div 来自动检索新的聊天消息，而无需简单地刷新整个页面。

根据我的发现，建议经常读取在服务器端创建的 JSON 文件并使用 AJAX 和 JQUERY 来更新 div 的文本。但是，我的代码似乎没有自动发出任何 GET 请求。在`chat.html`：

```
<body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type=text/javascript>
  var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
<script type="text/javascript">
setInterval(
    function()
    {
        $.getJSON(
            $SCRIPT_ROOT+'/_chat_update',
            {
                ChatId: $({{ chatid }}).val()
            },
            function(data)
            {
                $("#chat-main").text(data.updated);
            });

    },
    500);
</script>
<div id="chat-main">
{% for line in chatLines %}
<p>{{ line.sent_by }}: {{ line.line_text }}</p>
{% else %}
<em>there's nothing here...</em>
{% endfor %}
</div>
... 
```

和服务器端

```
@app.route('/c/<chatid>', methods=['POST', 'GET'])
def chat(chatid):
    c = chatid
    thisChat = Chat.query.get(chatid)
    thisUser = User.query.filter_by(user_email=session['signed-in-user']).first()
    chatLines = Line.query.filter_by(chat_line=thisChat).all()
    if request.method == 'POST':
        newLine = Line(published_date=datetime.datetime.utcnow(), chat_line=thisChat, line_author=thisUser, line_text=request.form['newline-input'])
        db.session.add(newLine)
        db.session.commit()
        return redirect(url_for('chat', chatid=c))
    return render_template('chat.html', chatLines=chatLines, chatid=c)

@app.route('/_chat_update')
def chat_update():
    ChatId = request.args.get('ChatId', 0, type=int)
    thisChat = Chat.query.get(ChatId)
    newChatLines=Line.query.filter_by(chat_line=thisChat).all()
    return jsonify(updated=newChatLines) 
```

我预期会发生的是，每 500 毫秒，`/_chat_update`将抓取 JSON 并且 HTML div 将更新结果 - 在后站点中，只有当 JSON 与当前版本不同时才会发生这种情况，但那是另一次了. 现在，我想知道 1\. 我是否走在正确的轨道上，我可能在哪里出错了，或者 2\. 是否有更好的方法来实时添加此类数据库。非常感谢您的帮助。

编辑

有一个错误每秒出现两次，因此它必须与我在上面尝试进行的调用有关。这是：

```
Uncaught TypeError: Cannot call method 'toLowerCase' of undefined  jquery.min.js:1
st.fn.extend.val                                                   jquery.min.js:1
(anonymous function) 
```

# android - 如何使用 aSmack 在 Android 设备上获取 Openfire 聊天记录？

> ID：14545057
> 
> 赞同：10
> 
> 时间：2013-01-27T06:33:33.510
> 
> 标签：android, xmpp, chat, smack, asmack

我正在开发一个聊天应用程序，用户将在其中与一位领域专家的组成员聊天。用户使用我的 android 应用程序，领域专家使用 spark web 进行聊天。我进行了 Openfire 设置和 Spark 网络设置，并使用 aSmack 库开发了 Android 聊天应用程序。我的应用用户可以与领域专家聊天。到目前为止还好。现在我想在 Android 设备上显示用户与任何或特定专家的聊天记录。上网后，我可以为我的开放式服务器安装监控服务插件，该插件在管理员端显示用户的聊天记录，如下所示。![在此处输入图像描述](../Images/3cf6c60ca2b690762af1beb4a2a1fbef.png)

现在我想在我的 Android 应用程序中展示这段历史，我怎样才能做到这一点。任何建议，非常欢迎。我是否朝着正确的方向前进？或者有什么简单的方法来完成我的工作？非常感谢有关此聊天历史记录将存储在 Open fire 数据库中何处的任何信息，以便我可以进行 SQL 查询并使用 Web 服务获取数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-12T07:05:51.563

**您可以使用以下代码获取群聊历史记录：**

```
DiscussionHistory history = new DiscussionHistory();
history.setMaxStanzas(0);

multiUserChat.join("username", "password", history, SmackConfiguration.getPacketReplyTimeout()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-25T06:12:21.623

我将监控服务插件添加到 openfire，它创建了一些额外的表来存储任意 2 个帐户之间的聊天对话详细信息。监控服务还为您提供数据库查询静态信息。从管理面板数据库静态数据中，我可以获取此聊天详细信息存储在哪些表、哪些列中。还需要查询。使用上述信息，我的后端团队编写了 Web 服务来获取所需的信息。这是我实施的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T12:17:33.250

如果您使用的是 MUC (XEP-45)，那么您可以在输入 MUC 时请求讨论历史记录。请参阅[XEP-45 7.2.14 讨论历史](http://xmpp.org/extensions/xep-0045.html#enter-history)。使用 (a)Smack 时，这意味着您必须使用[MultiUserChat.join(Stringnickname, String password, DiscussionHistory history, long timeout)](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/muc/MultiUserChat.html#join%28java.lang.String,%20java.lang.String,%20org.jivesoftware.smackx.muc.DiscussionHistory,%20long%29)来获取 History。

# java - 克服服务器程序中的阻塞写入

> ID：14545059
> 
> 赞同：1
> 
> 时间：2013-01-27T06:33:47.623
> 
> 标签：java, io, java-server

对于冗长的文字墙，我提前道歉。

我正在写一个游戏服务器。基本上有线程来接受连接，每个玩家都有单独的线程，以及处理所有更新的线程。每个单独的播放器线程的唯一职责是向实际客户端读取和写入数据包。请记住，所有 I/O 都是使用 good ol'`java.io`包完成的。

无论如何，当我写完一些内容时，我决定我要进行某种压力测试。所以我向我的一个朋友发送了一个 bot flooder 程序。该程序将假玩家快速连接到服务器。与其在本地运行它，我认为如果连接不是本地的，它会更加真实。我从测试中发现，玩家更新周期时间非常好，除了一旦连接了大约 200 名玩家，周期时间就会开始急剧增加（我们所说的从 15 毫秒到有时*超过 9000毫秒）*）。起初，我认为它与接受者线程有某种关联，因为我注意到当周期变慢时，我收到“玩家已从...连接”消息的频率较低。但是，在我决定测量更新周期的各个步骤所花费的时间后，我发现这不是原因。瓶颈在于播放器更新。在我滚动到播放器更新方法的最底部后，我立即意识到了原因。

问题是在每次播放器更新结束时，都会发送更新数据包。大的，有时是数 KB 大小的数据包在构建后通过套接字的输出流发送。正如你们许多人所知，写入数据包是一个阻塞操作。而这种阻塞是导致周期时间看似随机峰值的原因。一旦有几百个玩家连接，服务器就会尝试更新所有这些玩家。但有时，其中一个连接会有点慢。因此，服务器将继续处理玩家，直到它尝试处理通过慢速套接字连接的玩家。一旦它构造了更新包，它就会尝试发送它。但是，由于套接字速度较慢，发送会阻塞很长时间。当发送操作被阻塞时，其他玩家都没有更新。因此，周期有时会花费极长的时间。

现在，我有点纠结于如何解决这个问题。理想的情况是让服务器构造数据包并将数据包交给单个玩家线程并让它发送它（并愉快地阻塞在它自己的小线程中）。当更新数据包将被构建时，服务器线程将存储更新数据包，并且可能会引发一些标志，表明数据包已构建。这听起来不错，但问题是很多时候，单个播放器线程都陷入了自己的阻塞操作中。播放器线程正在阻塞，因为它正在等待接收数据包。所以更新包一旦被读阻塞完就会被写入，但我担心更新包会在它实际构建后发送，这会让播放器看起来很滞后。

所以这里是我向你们提出建议的时候。你会如何处理这个问题？有人推荐我使用 NIO，但这需要我重写大部分代码，所以我宁愿用尽我的可能性，因为我采取了不同的路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:16:03.277

正如@Drakosha 在他的评论中所说，您可以使用具有多个线程服务的消息队列。

也许是这样的：

```
import java.util.concurrent.LinkedBlockingDeque;
import static java.lang.System.*;
class Message{
    String message;
    public Message(String message) {this.message=message;}
    public String toString(){return message;}
}
public class Test {
static LinkedBlockingDeque<Message> outgoing=new LinkedBlockingDeque<>();
    public static void main(String[] args) {
        for(int i=0;i<10;i++) new Player(outgoing,i).start();
        for(int i=0;i<3;i++)  new Sender(outgoing,i).start();
    }
}
class Player extends Thread{
    private LinkedBlockingDeque<Message> outgoing;
    private int id;
    public Player(LinkedBlockingDeque<Message> outgoing,int id){this.outgoing=outgoing; this.id=id;}
    public void run(){
        for(int i=0;i<10;i++){
            try {
                outgoing.putLast(new Message(String.format("Player %d's message",id)));
                Thread.sleep(20);
            } catch (InterruptedException e) {e.printStackTrace();}
        }
    }
}
class Sender extends Thread{
    private LinkedBlockingDeque<Message> outgoing;
    private int id;
    public Sender(LinkedBlockingDeque<Message> outgoing,int id){this.outgoing=outgoing; this.id=id;}
    public void run(){
        while(true){
            Message m = null;
            try {
                m = outgoing.takeFirst();
                //send message
                if(Math.random()>0.95){
                    out.printf("Sender %d is hanging! %n",id);
                    Thread.sleep(1000);//Slow socket is blocking!
                }
            } catch (InterruptedException e) {e.printStackTrace();}
            out.printf("Sender %d sent message \"%s\" %n",id,m);
        }
    }
} 
```

# android - Android 从电话簿问题导入联系人

> ID：14545062
> 
> 赞同：2
> 
> 时间：2013-01-27T06:34:09.157
> 
> 标签：android, android-contacts

我正在尝试从 android 电话簿中导入联系人。该应用程序在所有手机上都能正常运行，但在 HTC 手机上失败。我的代码如下

```
 Intent pickContactIntent = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI);
        pickContactIntent.setType(Phone.CONTENT_TYPE); // Show user only contacts w/ phone numbers
        startActivityForResult(pickContactIntent, PICK_CONTACT_REQUEST);

Uri contactUri = data.getData();
                String[] projection = {Phone.DISPLAY_NAME,Phone.NUMBER};

                Cursor cursor = getContentResolver()
                        .query(contactUri, projection, null, null, null);
                cursor.moveToFirst();

                // Retrieve the phone number from the NUMBER column
                int column = cursor.getColumnIndex(Phone.NUMBER);
                int nameColumn=cursor.getColumnIndex(Phone.DISPLAY_NAME);
                String number = cursor.getString(column);
                String fName=cursor.getString(nameColumn);
                contact = new HashMap<String, String>();
                contact.put(fName, number);
                eName.setText(fName); 
```

因为它是在客户端电话上，所以我无法查看日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:05:35.957

Android 对其联系人有几个抽象（Contact <- RawContact <- Data），以便能够分离不同的提供者（Google、FB 等）并聚合它们。该文档很好地概述了联系人提供程序的工作原理：

[http://developer.android.com/guide/topics/providers/contacts-provider.html](http://developer.android.com/guide/topics/providers/contacts-provider.html)

我认为您的问题是，您正在尝试访问联系人表中的数据字段。Intent.ACTION_PICK 返回联系人 uri，它指向联系人表。

您需要做的是从contacts 表中获取Contacts._ID，然后从ContactsContract.Data 表中获取按Contacts._ID 过滤的数据。您可以在此处找到示例查询：

[http://developer.android.com/reference/android/provider/ContactsContract.Data.html](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:05:55.547

这是用户经历的崩溃吗？可能是由于某些设备在没有名称/号码的情况下在 NUMBER 的 DISPLAY_NAME 中返回 null（如果设备具有 Skype 等自定义内容提供商，则可能会发生这种情况）。一些设备返回 display_name 中的数字，一些设备返回 null。

还是只是用户看不到任何联系人？你知道用户是否真的有吗？例如，如果通讯录为空，您的代码会发生什么情况。

# salesforce - 测试中出现意外的空指针异常

> ID：14545072
> 
> 赞同：1
> 
> 时间：2013-01-27T06:38:14.507
> 
> 标签：salesforce, apex-code, visualforce

我正在编写 apex 中休息服务的单元测试

我的测试班是

```
global class Feedpost9 {

    // your methods here...

    static testMethod void testRest() {
        // set up the request object
        System.RestContext.request = new RestRequest();
        RestContext.request.requestURI = '/v.9/notifications/preferences/ritesh';
        // Invoke the method directly
        Member__c member=new Member__c(name='ritesh');
        insert member;

        Notification_Settings__c no=new Notification_Settings__c(member__c=member.Id);
         no.Event__c='Category|Cloud Foundry' ;
         no.Event_Per_Member__c='12';
         insert no;

        NotificationRestService.retrievingNotificationSettings();

        RestContext.request.requestURI = '/v.9/notifications/preferences' ;

        NotificationRestService.retrievingNotificationSettings();
        RestContext.request.requestURI ='/v.9/notifications/preferences/ritesh.xml';
NotificationRestService.retrievingNotificationSettings();
    }
} 
```

当测试单元到达这一点时，我得到一个错误 RestContext.request.requestURI = '/v.9/notifications/preferences' ;

```
 NotificationRestService.retrievingNotificationSettings(); 
```

错误是

System.NullPointerException：尝试取消引用空对象 Class.NotificationRestService.retrievingNotificationSettings：第 46 行，第 1 列 Class.Feedpost9.testRest：第 23 行，第 1 列

我得到这个错误的部分是

```
 List<Notification_Settings__c> note1=[SELECT id,name,Member__r.name,Do_not_Notify__c,Event__c,Event_Per_Member__c,Notification_Method__c from Notification_Settings__c WHERE Member__r.name= :userName Limit 1];
Notification_Settings__c note;

if(note1 !=null )
{if(note1.size() >0)
note=note1.get(0);
} 
```

并且错误在行{if（note1.size（）> 0）我无法计算如果note1不等于null那么它将来到下一行但是在下一行它给了我错误为什么note1是null下一条线并首先传递 if statement.query 应该返回空列表。请有人帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:54:00.823

添加@isTest(SeeAllData=true) 注解

```
@isTest(SeeAllData=true)
global class Feedpost9 {

} 
```

# jquery - jQuery 从 json 填充表单

> ID：14545082
> 
> 赞同：3
> 
> 时间：2013-01-27T06:40:44.953
> 
> 标签：jquery, json, forms

我显然遗漏了一些关于 jquery 的内容......我正在尝试填充 jQueryUI 对话框内的表单。我得到 JSON 数据就好了，但它让我无法引用数据并设置表单字段的值......

您将在下面看到三次尝试-最后一次是几乎每个人都说要使用的一次-但表格仍然是空白...我错过了什么？？？？？？

```
$( '#companies' ).on( 'click', '.uLink' , function( event ) {
    // set ID
    var xid = $( this ).data( 'identity' );
    // get record
    $.ajax({
        type: 'POST',
        url: 'm/company_edit.php',
        dataType: 'json',
        data: { id: xid },
        success: function ( data ) {
            // display dialog
            $( '#company-form-container' ).dialog( 'open' );

            /* ATTEMPT #1 - with a variant on 'name' - form remains blank
            // populate form
            $( '#companyid' ).val( value.id );
            $( '#name' ).val( 'test' + value.name );
            $( '#address1' ).val( value.address1 );
            $( '#address2' ).val( value.address2 );
            $( '#city' ).val( value.city );
            $( '#state' ).val( value.state );
            $( '#postalcode' ).val( value.postalcode );
            $( '#phone' ).val( value.phone );
            $( '#contact' ).val( value.contat );
            $( '#email' ).val( value.email );
            */

            /* ATTEMPT #2 - supposed to make some accommodation for field type...
                            Make assumption that fields are named same as JSON fields, and the you only
                            want to use the data value in that one spot...*/
                           /*
            var frm = '#company-form';
            $.each(data, function( key, value ){
                var $ctrl = $( '[name='+key+']', frm );
                switch( $ctrl.attr( "type" ) )  {  
                    case "text" :   
                    case "hidden":  
                    case "textarea":  
                    $ctrl.val(value);   
                    break;   
                    case "radio" : case "checkbox":   
                    $ctrl.each(function(){ if($(this).attr('value') == value) {  $(this).attr("checked",value); } });
                    break;  
                }  
            });  
            */

            // attempt 3 - still no go
            $.each( data, function( key, value ) {
                $( '#' + key ).val( value ); 
               }); 
```

/* // 下面建议的尝试 - 没有变化... var c = jQuery.parseJSON( data );

```
 // populate form
            $( '#companyid' ).val( c.id );
            $( '#name' ).val( c.name ); 
```

*/

```
 },

        error: function () {    
            // there's an error
            $( '#message' ).html( '<p>There was a problem on the server... </p>' );
            $( '#message' ).removeClass( 'hidden' ).addClass( 'message' );
        }
    });

    return false;
}); 
```

JSON数据样本

```
[{"id":"3", "name":"Sub Customer B", "address1":"232 road", "address2":"", "city":"Galatan ", "state":"TN", "phone":"", "email":""}] 
```

这是 HTML 表单

```
<!-- the form -->
<div id="company-form-container" title="Create New Company">
<p class="validateTips">* fields are required.</p> 
<form id="company-form" >
<fieldset>

    <input type="hidden" name="customer_id" id="customer_id" value="" />

    <label for="name">name<sup>*</sup> <span class="fieldhint"></span></label> <br/>
    <input type="text" name="name" id="name" 
           size="50" maxlength="100" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="address1">address1 <span class="fieldhint"></span></label> <br/>
    <input type="text" name="address1" id="address1" 
           size="20" maxlength="100" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="address2">address2 <span class="fieldhint"></span></label> <br/>
    <input type="text" name="address2" id="address2" 
           size="10" maxlength="50" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="city">city <span class="fieldhint"></span></label> <br/>
    <input type="text" name="city" id="city" 
           size="20" maxlength="50" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="state">state <span class="fieldhint"></span></label> <br/>
    <input type="text" name="state" id="state" 
           size="5" maxlength="3" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="postalcode">postal code <span class="fieldhint"></span></label> <br/>
    <input type="text" name="postalcode" id="postalcode" 
           size="20" maxlength="15" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="phone">phone <span class="fieldhint"></span></label> <br/>
    <input type="text" name="phone" id="phone" 
           size="20" maxlength="20" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="contact">contact <span class="fieldhint"></span></label> <br/>
    <input type="text" name="contact" id="contact" 
           size="20" maxlength="50" class="text ui-widget-content ui-corner-all" /><br/>

    <label for="email">email <span class="fieldhint"></span></label> <br/>
    <input type="text" name="email" id="email" 
           size="20" maxlength="100" class="text ui-widget-content ui-corner-all" /><br/>

</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:17:47.097

近视编码...由太多小事引起...

问题是表单有一个字段“customer_id”，但 JSON 正在提供“id”......

```
$.each( data, function( key, value ) {
    $( '#' + key ).val( value ); 
}); 
```

这段代码确实有效，一旦我纠正了这个错误——当然我必须把它分成一个单独的页面并隔离每个步骤才能看到——但是它给了我更好的洞察力。

谢谢帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:45:09.963

成功函数将 json 数据返回到“数据”变量中，而您在第三次尝试中使用“结果”变量。

因此，将“成功：函数（数据）”行更改为“成功：函数（结果）”可能会解决您的问题。

**编辑**

检查使用，

```
var c = jQuery.parseJSON( data );
$( '#companyid' ).val( c['id'] );
$( '#name' ).val( c['name'] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:48:38.233

使用[jQuery.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)解码方法 1 中的 json 编码数据。确保您确实从您的`company_edit.php`

# 供您参考

我想如果您可以使用 Javascript 模板引擎来为您解决问题，那将是完美的。使用方法一尝试其中一种。

[良好的 Javascript 模板引擎，可与 JSON 一起使用](https://stackoverflow.com/questions/2929111/good-javascript-template-engine-to-work-with-json)

[JSON模板引擎](https://stackoverflow.com/questions/4580632/json-templating-engine)

[你推荐什么 Javascript 模板引擎？](https://stackoverflow.com/questions/7788611/what-javascript-template-engines-you-recommend)

[http://www.jquery4u.com/javascript/10-javascript-jquery-templates-engines/](http://www.jquery4u.com/javascript/10-javascript-jquery-templates-engines/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T21:16:41.097

您可以使用[https://github.com/corinis/jsForm](https://github.com/corinis/jsForm)用 json 填充表单字段（然后再返回）

# c# - 使用 C# 的基于 WSSE 的服务的客户端

> ID：14545084
> 
> 赞同：2
> 
> 时间：2013-01-27T06:40:52.343
> 
> 标签：c#, web-services, basic-authentication, wsse

我最近一直在为 WSS 服务编写客户端。它根据其文档使用 usernametoken 配置文件。我已经写了这样的东西作为代码来传达它。但由于不允许匿名身份验证，我一直面临服务未经授权的错误。
我怎样才能解决这个问题？

这是示例代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Xml;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Execute();
        }
        public  void Execute()
        {
            HttpWebRequest request = CreateWebRequest();
            XmlDocument soapEnvelopeXml = new XmlDocument();
            soapEnvelopeXml.LoadXml(@"<?xml version=""1.0"" encoding=""UTF-8""?>
<soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"">
<soapenv:Header>
<wsse:Security xmlns:wsse=""http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"">
<wsse:UsernameToken>
<wsse:Username>something</wsse:Username>
<wsse:Password>something</wsse:Password>
</wsse:UsernameToken>
</wsse:Security>
</soapenv:Header>
<soapenv:Body>
...
</soapenv:Body>
</soapenv:Envelope>
");
            using (Stream stream = request.GetRequestStream())
            {
                soapEnvelopeXml.Save(stream);
            }

            using (WebResponse response = request.GetResponse())
            {
                using (StreamReader rd = new StreamReader(response.GetResponseStream()))
                {
                    string soapResult = rd.ReadToEnd();
                    Console.WriteLine(soapResult);
                }
            }
        }
        public HttpWebRequest CreateWebRequest()
        {
            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(@"http://127.0.0.1:5434");
            webRequest.Headers.Add(@"SOAP:Action");
            webRequest.ContentType = "text/xml;charset=\"utf-8\"";
            webRequest.Accept = "text/xml";
            webRequest.Method = "POST";
            return webRequest;
        }
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:46:24.227

有两种解决方案可以实现对 WCF 的 UsernameToken Profile 支持：

*   [UsernameToken 配置文件与 WCF](http://blogs.msdn.com/b/aszego/archive/2010/06/24/usernametoken-profile-vs-wcf.aspx)。
*   [在 WCF 客户端代理中支持 WS-I 基本配置文件密码摘要](http://blog.benpowell.co.uk/2010/11/supporting-ws-i-basic-profile-password.html)。

那么，为什么不使用 WCF 而不是发出原始请求呢？

# css - 图像未居中

> ID：14545085
> 
> 赞同：0
> 
> 时间：2013-01-27T06:40:56.440
> 
> 标签：css

在我的页脚区域中，我设置了背景图像。问题是它没有居中。仅显示图像的一部分。图像的右端被隐藏。如果我裁剪图像，我可以处理这个。但我想从 css 处理它。

这是代码

```
#footer{

}

#middle-footer{
    background-image:url('img/footer-bg.gif');
    background-repeat:no-repeat;
    width:100%;
    margin-left:auto;
    margin-right:auto;
    height:inherit;
    overflow:hidden;
}

<div id="footer" style="height:200px;">
    <div id="middle-footer" >
    </div>
 </div> 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:46:59.773

好的，试试这个。而不是`background-image:`使用简写，在 URL 之后使用`top center`. 代码将是：

```
#footer {
    background: url('img url') top center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:59:39.307

只有现代浏览器才能在 CSS 中调整背景大小。因此，如果您愿意，请添加以下内容：

```
background-size: 90%; 
```

完整的 CSS 是：

```
#middle-footer{
    background-image:url('img/footer-bg.gif');
    background-repeat:no-repeat;
    background-size: 90%;
    width:100%;
    margin-left:auto;
    margin-right:auto;
    height:inherit;
    overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T07:00:40.783

问题是您将 a`width: 100%`与做的居中技巧混合在一起`margin-left: auto;`，`margin-right: auto;`这将不起作用，因为如果宽度为 100%，那么`auto`由于框填充了空间，所以边距将毫无意义。所以我重新设计了 CSS，使它有一个固定的宽度。我还为盒子添加了一种颜色，因为我们没有图片可供参考，但需要查看盒子。我还将内联样式`#footer`移到 CSS 中，因为在 CSS 中看到空的样式很奇怪`#footer { }`。这是一个完整的 HTML 示例，说明它应该如何工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <title>CSS Centering Fixed</title>
    <style type="text/css">
        /*<![CDATA[*/
        #footer
        {
            height: 200px;
        }

        #middle-footer
        {
        display: block;
            background-image: url('img/footer-bg.gif');
            background-repeat: no-repeat;
            background-color: #ffffcc;
            width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: inherit;
            overflow: hidden;
        }

        /*]]>*/
</style>
</head>

<body>
    <div id="footer">
        <div id="middle-footer"></div>
    </div>
</body>
</html> 
```

# hadoop - 如何增加 hadoop 集群中节点上的地图输出容量？

> ID：14545088
> 
> 赞同：0
> 
> 时间：2013-01-27T06:41:41.647
> 
> 标签：hadoop

我在 hadoop 集群中使用 3 台计算机，主服务器有 3 GB 内存，从服务器有 3 GB 内存。

奴隶的地图任务容量是6，但我需要更多。

我可以更改这个号码吗？机器的哪个属性决定了地图任务的容量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:19:06.053

分配给运行 map 和 reduce 任务的 JVM 的内存量由**mapred.child.java.opts**属性设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:40:45.673

我猜你在问如何让它在每台工作机器上运行超过 6 个映射器。首先要检查的是`mapred.tasktracker.map.tasks.maximum`集群中的值。它默认为 2。如果您有 3 台机器，这意味着整个集群最多有 6 个映射 - 而不是每个工作人员。无论如何，将其增加到您喜欢的程度。

但这不会使 Hadoop 使用比它认为适合输入的更多的映射器。这可能是你应该留给 Hadoop 的东西。

# c++ - 在 C++ 程序中删除不会释放内存

> ID：14545095
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:42:47.370
> 
> 标签：c++, memory-management, memory-leaks, valgrind, delete-operator

我创建了一个具有很少整数变量的对象，并且一个 char 内存块说它分配了 300-500 字节的内存作为其成员。之后这个对象被一个线程推入向量，然后另一个并行运行的线程将与一个空向量交换并开始处理包含该对象的向量，在处理后我曾经删除对象中使用的字符块和还完成了对象并删除了对象。但似乎内存没有释放。我用 valgrind 工具运行了这段代码，它没有显示任何泄漏。请帮我解决问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T07:01:10.390

> 但似乎内存没有释放。

你是如何确定的？我假设不正确。调用`delete whatever`将该内存标记为已释放并释放以供将来使用。该语言没有具体说明这意味着什么。你的操作系统比你更擅长管理内存。例如，不必强制确保您用于测量内存使用的任何工具（任务管理器？）现在看到 X 更多的空闲字节。

您正在使用的内存现在可以重新分配。这就是你需要关心的，让操作系统的内存管理器担心细节。

# ios - UITextView NSAttributedString 大小

> ID：14545096
> 
> 赞同：9
> 
> 时间：2013-01-27T06:42:56.870
> 
> 标签：ios, objective-c, uikit, uitextview, nsattributedstring

我正在开发一个使用 UITextView 的应用程序。

UITextView 应该垂直和水平地增长或缩小以适应其文本。为此，我在子类中覆盖 sizeToFit，并设置如下边界：

```
- (void)sizeToFit {
    [self setBounds:(CGRect){.size = self.attributedText.size}];
} 
```

问题是这个大小不能反映字符串的正确大小，因为 UITextView 会剪辑文本。我将边缘插图设置为零，所以这不应该是一个问题，对吧？

在这一点上，我认为这是 NSAttributedString 的 size 属性的错误，但如果我使用 boundingRectWithSize:options:context 也会发生同样的事情：

```
[self setBounds:(CGRect){.size = [self.attributedText boundingRectWithSize:CGSizeMake(CGFLOAT_MAX, CGFLOAT_MAX) options:0 context:nil].size}]; 
```

因此，可能为 NSAttributedString 进行布局计算的任何代码都不能很好地与 UITextView 的布局计算配合使用。

[这是演示该问题的示例项目](http://files.thermoglobalnuclearwar.com/TextViewBug.zip)。

欢迎任何想法！

**编辑：我还应该指出以下内容也不起作用：**

```
- (void)sizeToFit {
    [self setBounds:(CGRect){.size = [self sizeThatFits:self.attributedText.size]}];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T21:46:59.763

虽然不完美，但我最终使用了：

```
- (void)sizeToFit {

    CGSize textSize = self.attributedText.size;
    CGSize viewSize = CGSizeMake(textSize.width + self.firstCharacterOrigin.x * 2,
                                 textSize.height + self.firstCharacterOrigin.y * 2);

    [self setBounds:(CGRect){.size = [self sizeThatFits:viewSize]}];
}

- (CGPoint)firstCharacterOrigin {

    if (!self.text.length) return CGPointZero;

    UITextRange * range = [self textRangeFromPosition:[self positionFromPosition:self.beginningOfDocument offset:0]
                                           toPosition:[self positionFromPosition:self.beginningOfDocument offset:1]];
    return [self firstRectForRange:range].origin;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:41:10.730

我认为你是对的——我无法`-[NSAttributedString boundingRectWithSize:options:context: ]`返回一个适用于所有字体大小的值......

但是，我确实得到了一个 UILabel 来正确调整大小并绘制属性字符串：

*   将您的文本视图类更改为`UILabel`
*   `-setAttributedText:`在标签上使用
*   设置`label.numberOfLines = 0`（多行）
*   在`-layoutSubviews`标签的超级视图调用中 -[ label sizeThatFits: ] 以获取标签的正确大小....

为我工作...

编辑：这是我的 ViewController.m 文件：

```
@interface View : UIView
@property ( nonatomic, strong ) UITextView * textView ;
@property ( nonatomic, strong ) UISlider * fontSizeSlider ;
@end

@implementation View

-(void)layoutSubviews
{
    CGRect bounds = self.bounds ;

    self.textView.layer.anchorPoint = (CGPoint){ 0.0f, 0.5f } ;
    self.textView.layer.position = (CGPoint){ CGRectGetMinX( bounds ), CGRectGetMidY( bounds ) } ;
    self.textView.bounds = (CGRect){ .size = [ self.textView sizeThatFits:bounds.size ] } ;

    self.fontSizeSlider.frame = CGRectMake(5, CGRectGetMaxY(bounds) - 30, bounds.size.width - 10, 25) ;
}

@end

@interface ViewController ()

@end

@implementation ViewController

-(void)loadView
{
    self.view = [[ View alloc ] initWithFrame:CGRectZero ] ;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    NSMutableAttributedString * aString = [[ NSMutableAttributedString alloc ] initWithString:@"Some test text in a scaling text view" ] ;
    NSDictionary * attributes = @{ NSForegroundColorAttributeName : [ UIColor redColor ] } ;
    [ aString setAttributes:attributes range:(NSRange){ 5, 4 } ] ;

    textView = [[UITextView alloc] initWithFrame:CGRectZero];
    [textView setAttributedText:aString ];
    [textView setFont:[UIFont systemFontOfSize:18]];
    [textView setCenter:CGPointMake(CGRectGetMidX(self.view.bounds), CGRectGetMidY(self.view.bounds))];

    ((View*)self.view).textView = textView ;
    [self.view addSubview:textView];
    [textView release];

    UISlider * fontSizeSlider = [[UISlider alloc] initWithFrame:CGRectMake(5, CGRectGetMaxY(self.view.bounds) - 30, self.view.bounds.size.width - 10, 25)];
    [fontSizeSlider addTarget:self action:@selector(fontSizeSliderDidChange:) forControlEvents:UIControlEventValueChanged];
    [fontSizeSlider setMinimumValue:5];
    [fontSizeSlider setMaximumValue:100];
    [fontSizeSlider setValue:textView.font.pointSize];
    ((View*)self.view).fontSizeSlider = fontSizeSlider ;
    [self.view addSubview:fontSizeSlider];
    [fontSizeSlider release];
}

- (void)fontSizeSliderDidChange:(UISlider *)sender {
    [ textView setFont:[textView.font fontWithSize:sender.value]];
    [ self.view setNeedsLayout ] ;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-22T22:52:27.480

上述汤姆·欧文斯解决方案的 swift 3 解决方案：

```
extension UITextView {
    func sizeToFitAttributedString() {
        let textSize = self.attributedText.size()
        let viewSize = CGSize(width: textSize.width + self.firstCharacterOrigin.x * 2, height: textSize.height + self.firstCharacterOrigin.y * 2)
        self.bounds.size = self.sizeThatFits(viewSize)
    }

    private var firstCharacterOrigin: CGPoint {
        if self.text.lengthOfBytes(using: .utf8) == 0 {
            return .zero
        }
        let range = self.textRange(from: self.position(from: self.beginningOfDocument, offset: 0)!,
                                     to: self.position(from: self.beginningOfDocument, offset: 1)!)
        return self.firstRect(for: range!).origin

    }
} 
```

# objective-c - 以标准播放速率获取原始音频数据

> ID：14545097
> 
> 赞同：0
> 
> 时间：2013-01-27T06:43:02.007
> 
> 标签：objective-c, macos, cocoa, core-audio

我想在播放音频文件时接收音频数据（二进制）。我知道我可以使用 获取整个数据块`NSFileManager`，但我需要能够在音频文件播放时实时接收数据。

我正在研究 Core Audio，特别是[Extended Audio File API](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007912)。有人知道如何使用这种方法提取数据吗？或者如果有另一种方法来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:09:51.780

我建议查看[AVFoundation 框架](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVFoundationFramework/_index.html)，特别是用于访问音轨中包含的样本的[`AVAssetReader`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetReader_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009515)和类。[`AVAssetReaderTrackOutput`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetReaderTrackOutput_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009691)和类应该通过属性和通知充分公开播放时间位置，以允许您将音频样本与正在播放的音频进行匹配[`AVPlayer`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009530)。[`AVPlayerItem`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/doc/c_ref/AVPlayerItem)

# python - ImportError：没有名为 web 的模块

> ID：14545099
> 
> 赞同：1
> 
> 时间：2013-01-27T06:43:29.213
> 
> 标签：python, mod-wsgi, web.py

当我`apache`尝试`web.py`使用`mod_wsgi`. 我已`web.py`在共享主机上成功安装，并且可以确认可以在本地导入它：

```
>>> import web
>>> web.application(('/', 'test'), globals())
<web.application.application instance at 0x1f8d3b0> 
```

我还能够运行内置服务器并将页面成功提供给我的网站。

我可以确认该`mod_wsgi`模块也可以正常工作，`apache`因为我能够使用`wsgi`应用程序的手动编码来提供页面。

我尝试了文档[http://webpy.org/install#apachemodwsgi](http://webpy.org/install#apachemodwsgi)`ImportError: No module named web`上错误消息的建议方法，即添加：`web.py`

```
abspath = os.path.dirname(__file__)
sys.path.append(abspath)
os.chdir(abspath)

import web 
```

我还在`Files`http.conf 文件中添加了建议的标签，这似乎是多余的，因为我已经`htdocs`设置了目录，但无论如何。我的`httpd.conf`文件在下面，我已经重新启动了 apache，但仍然收到导入错误消息。

```
ServerRoot "/home/usr1/webapps/test/apache2"

LoadModule dir_module        modules/mod_dir.so
LoadModule env_module        modules/mod_env.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module       modules/mod_mime.so
LoadModule rewrite_module    modules/mod_rewrite.so
LoadModule setenvif_module   modules/mod_setenvif.so
LoadModule wsgi_module       modules/mod_wsgi.so

LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog /home/usr1/webapps/test/logs combined
DirectoryIndex index.py
DocumentRoot /home/usr1/webapps/test/htdocs
ErrorLog /home/usr1/webapps/test/apache2/logs/error_test.log
KeepAlive Off
Listen 21708
MaxSpareThreads 3
MinSpareThreads 1
ServerLimit 1
SetEnvIf X-Forwarded-SSL on HTTPS=1
ThreadsPerChild 5
WSGIDaemonProcess test processes=5 python-path=/home/usr1/webapps/test/lib/python3.1 threads=1
WSGIProcessGroup test
WSGIRestrictEmbedded On
WSGILazyInitialization On

<Directory /home/usr1/webapps/test/htdocs>
    AddHandler wsgi-script .py
</Directory>

<Files /home/usr1/webapps/test/htdocs/index.py>
   SetHandler wsgi-script
   Options ExecCgi FollowSymLinks
</Files> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:37:10.513

首先，您的 apache mod_wsgi 似乎是用 python 3 编译的，web.py 不支持。

你的 apache conf 看起来很像我在 Webfaction 上的那个，如果有一个带有 python 2.7 的 mod_wsgi 安装程序，你必须选择它而不是 python 3。

这是我典型的 conf 的样子：

```
ServerRoot "/home/username/webapps/projectname/apache2"

LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module       modules/mod_mime.so
LoadModule rewrite_module    modules/mod_rewrite.so
LoadModule alias_module modules/mod_alias.so
LoadModule wsgi_module       modules/mod_wsgi.so

LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog /home/username/logs/user/access_projectname.log combined
ErrorLog /home/username/logs/user/error_projectname.log
KeepAlive Off
Listen 21708
MaxSpareThreads 3
MinSpareThreads 1
ServerLimit 1
WSGIPythonOptimize 2
ThreadsPerChild 5
WSGIDaemonProcess projectname processes=5 threads=1
WSGIPythonHome /home/username/lib/python2.7 # your python home dir where libraries are installed
WSGIProcessGroup projectname
WSGIRestrictEmbedded On
WSGILazyInitialization On
WSGIScriptAlias / /home/username/webapps/projectname/htdocs/code.py/
Alias /static /home/username/webapps/projectname/htdocs/static 
```

这是示例 code.py

```
#!/usr/bin/env python
import os
import sys
sys.path.append(os.path.abspath(os.path.dirname(__file__)))
from app import app

if __name__ == "__main__":
    app.run()
else:
    application = app.wsgifunc() 
```

# php - 代码点火器更改密码

> ID：14545104
> 
> 赞同：1
> 
> 时间：2013-01-27T06:44:11.897
> 
> 标签：php, codeigniter, security

我是 codeigniter 的新手，并试图编写一个安全代码来更改用户密码。请帮我

我的控制器功能是

```
public function change_password()
          {

            $data = array( "main_content" => 'includes/memberadmin/memberadmin_cpass'
                );
                $this->load->view('includes/memberadmin/template',$data);
          }

        public function change_password_process()
        {

        $this->load->library('form_validation');
        $this->form_validation->set_rules('old_password','Old Password','trim|required|min_length[4]|max_length[32]');
        $this->form_validation->set_rules('password','Password','trim|required|min_length[4]|max_length[32]');
        $this->form_validation->set_rules('password2','Reenter Password','trim|required|min_length[4]|max_length[32]|matches[password]');

        if ($this->form_validation->run() == FALSE)
        {
            $this->change_password();

        }else {
            $this->load->model('membership_model');
            $query=$this->membership_model->change_password();

                $data = array( "main_content" => 'includes/memberadmin/memberadmin_cpass_process',
                "query" => $query
                );
                $this->load->view('includes/memberadmin/template',$data);

        } 
```

我的模型功能是

```
function Change_password()
        {   
        $this->db->select('id');
        $this->db->where('username',$this->session->userdata('uname'));
        $this->db->where('password',md5($this->input->post('old_password')));
        $query=$this->db->get('memberadmin');   

        if ($query->num_rows() > 0)
         {
                $row = $query->row();
                if($row->id==$this->session->userdata('uid'))
                {
                    $data = array(
                      'password' => md5($this->input->post('password'))
                     );
                  $this->db->where('username',$this->session->userdata('uname'));
                  $this->db->where('password',md5($this->input->post('old_password')));
                       if($this->db->update('memberadmin', $data)) 
                       {
                       return "Password Changed Successfully";
                       }else{
                        return "Something Went Wrong, Password Not Changed";
                       }
                }else{
                return "Something Went Wrong, Password Not Changed";
                }

         }else{
            return "Wrong Old Password";
         }

        } 
```

实际上，我的用户 ID 和用户名存储在会话中，我尝试从表中获取用户名，并再次将返回的用户 ID 与会话用户 ID 匹配以提高安全性，然后更改密码。

请让我知道我的代码是安全的还是我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:55:52.087

首先，您可以在匹配用户 ID 时使用 === 代替 ==

```
if($row->id===$this->session->userdata('uid')) 
```

此外，为了提高安全性，您可以在更新密码时在 where 子句中再添加一行

```
$this->db->where('username',$this->session->userdata('uname'));
$this->db->where('id',$this->session->userdata('uid'));
$this->db->where('password',md5($this->input->post('old_password'))); 
```

# php - 解析从 Google 时区 API 返回的 JSON

> ID：14545112
> 
> 赞同：2
> 
> 时间：2013-01-27T06:45:48.153
> 
> 标签：php, arrays, json

我正在尝试执行使用 Google 的时区 API 查找给定坐标的时区的简单任务。然后我试图解析返回的 JSON 只是为了显示时区本身。有谁知道我在这里做错了什么？任何帮助都会很棒！谢谢！

```
<?php

$jsonObject = file_get_contents("https://maps.googleapis.com/maps/api/timezone/json?    
timestamp=0&sensor=true&location=39.6034810,-119.6822510");

foreach($jsonObject as $p)
{
    echo "$p[timeZoneId]";
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T06:49:54.393

`file_get_contents`返回一个字符串：

```
$object = json_decode($jsonObject);
echo $object->timeZoneId; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T06:49:48.220

您需要解码 json 对象。它现在只是一个字符串， foreach 将无法使用。（仅限数组或对象）。

```
<?php

$jsonObject = file_get_contents("https://maps.googleapis.com/maps/api/timezone/json?    
timestamp=0&sensor=true&location=39.6034810,-119.6822510");

$jsonObject = json_decode($jsonObject);

foreach($jsonObject as $p)
{
    echo "$p is $jsonObject[$p]";
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T06:53:05.980

您需要将来自 Google 的响应（实际上只是 JSON 格式的文本）解析为 PHP 数组。使用这样的东西：

```
$json_text = file_get_contents(...);
$obj = json_decode($json_text, true);
foreach ($obj as $p)
{
    echo "$p[timeZoneId]";
} 
```

我认为您会想要传递`true`给，`json_decode`以便将结果转换为易于使用的关联数组。阅读[此处](http://php.net/manual/en/function.json-decode.php)了解更多信息。祝你好运。

# xcode - 如何将 xcode 项目从空视图应用程序更改为单视图应用程序？

> ID：14545117
> 
> 赞同：0
> 
> 时间：2013-01-27T06:47:12.353
> 
> 标签：xcode

Xocde(4.3)——我的意思是我已经在 Xocde 4.3 中创建了一个项目（空视图应用程序）；但是，现在我想将该（现有）项目转换为单个视图 Application Xcode 。

请澄清这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:05:00.030

解决方案＃1）

您可以做的最简单的事情是创建一个全新的 Single View 应用程序，然后将源文件从旧项目复制到新项目。

解决方案＃2）

您还可以通过在 Xcode 的“文件”菜单下选择“新建”->“文件...”来添加用户界面。选择“用户界面”选项。由您决定是否制作故事板或 XIB 文件。

这是您将看到的内容：

![选择用户界面类型](../Images/2f6ca061d61c4e83ea0b59fe870ac358.png)

当然，您还必须选择设备系列：

![选择设备类型](../Images/e9d0e51658fb00d488f7fd7049173aac.png)

# c++ - 我如何从文本文件中读取数据并推回向量？

> ID：14545120
> 
> 赞同：0
> 
> 时间：2013-01-27T06:47:48.527
> 
> 标签：c++, vector, ifstream, getline

我有一个文本文件“test.txt”，它存储了我的数据如下，每个分隔符字段之间都有一个空格..

代号： 姓名： 腼腆

```
045: Ted: Coy1
054: Red: Coy2 
```

我如何从文件中读取这些数据并将其插入向量中？

```
vector <Machine> data;
Machine machine

void testclass(){
ifstream inFile("test.txt");
if (!inFile){
    cout << "File couldn't be opened." << endl;
    return;
}
while(!inFile.eof()){
    string code,name,coy;
    getline(inFile,code, ':');
    getline(inFile,name, ':');
    getline(inFile,coy, ':');
data.push_back(machine)

} 
```

但是推送数据好像有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:33:21.187

正如其他人已经指出的那样，一个问题是您正在将数据读入局部变量（`code`和`name`） ，但在将这些值添加到向量之前`coy`从未将这些值放入。`machine`

但这*不是**唯一*的问题。你`while (!infile.eof())`也是错的（事实上，`while (!whatever.eof())`本质上*总是*错的）。您通常想要做的是在阅读成功时继续阅读。只有在您尝试读取并且在读取开始*之前*`whatever.eof()`您已经到达文件末尾之后才会返回 true 。

 *我通常解决的方法是为您的 Machine 类定义一个流提取器：

```
class Machine { 
// ...

    friend std::istream &operator>>(std::istream &is, Machine &m) { 
        std::getline(is, m.code, ':');
        std::getline(is, m.name, ':');
        std::getline(is, m.coy, ":");
        return is;
    }
}; 
```

使用它，您可以进行如下阅读：

```
std::vector<Machine> machines;

Machine machine;

while (infile >> machine) 
    machines.push_back(machine); 
```

一旦您为该类型定义了流提取器，还有另一种可能性需要考虑；您可以从一对迭代器初始化向量：

```
std::vector<Machine> machines((std::istream_iterator<Machine>(infile)),
                               std::istream_iterator<Machine>()); 
```

...这将从文件中读取所有数据（使用`operator>>`我们上面定义的）并使用它来初始化`machines`向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:04:01.320

您应该读取数据并将它们放入 Machine 类对象的成员变量中。然后将该对象放在 Vector 上。*

# arrays - 不能将 4 个数组连接在一起

> ID：14545124
> 
> 赞同：0
> 
> 时间：2013-01-27T06:48:08.090
> 
> 标签：arrays, null, nullreferenceexception, concat

```
var upArray : Array = new Array();
var downArray : Array = new Array();
var leftArray : Array = new Array();
var rightArray : Array = new Array();

upArray = [100,110,120,130,140,150,200,210,220,230];
downArray = [100,110,120,130,140,150,200,210,220,230];
leftArray = [100,110,120,130,140,150,200,210,220,230];
rightArray = [100,110,120,130,140,150,200,210,220,230];

var joinedArray : Array = upArray.Concat(downArray,leftArray,rightArray); 
```

**上面的代码给了我编译器错误：**

NullReferenceException：对象引用未设置为对象 TerrainGenerator2.Main () 的实例（在 Assets/Scripts/TerrainGenerator2.js:516）

**使用 Unity / Javascript / Unityscript。**

**请帮忙！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:55:47.187

试试 upArray.concat(downArray,leftArray,rightArray)。Javascript 区分大小写。单词“Concat”应该都是小写字母。

```
var upArray  = new Array();
var downArray = new Array();
var leftArray = new Array();
var rightArray  = new Array();

upArray = [100,110,120,130,140,150,200,210,220,230];
downArray = [100,110,120,130,140,150,200,210,220,230];
leftArray = [100,110,120,130,140,150,200,210,220,230];
rightArray = [100,110,120,130,140,150,200,210,220,230];

var joinedArray = upArray.concat(downArray,leftArray,rightArray);

alert(joinedArray.length); 
```

它在小提琴中工作 [http://jsfiddle.net/gregnozik/2C3UT/](http://jsfiddle.net/gregnozik/2C3UT/)

# python - 插座模块有问题？

> ID：14545128
> 
> 赞同：0
> 
> 时间：2013-01-27T06:49:10.327
> 
> 标签：python, python-2.7

我无法将套接字模块导入我的程序。当我导入它时说，`"AttributeError: 'module' object has no attribute "AF_INET'`. 我认为我的python虚拟机有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:08:00.803

大多数情况下它看起来像命名问题或路径问题。您可以尝试从另一个位置运行您的程序，就像这样做[Python Socket Problem所做的那样](http://ubuntuforums.org/showthread.php?t=464541)

或者，如果这是一个命名问题，那么您可能在代码中使用了一些标准名称，这些名称与系统名称冲突[Socket is not working in Python](https://stackoverflow.com/questions/13422356/socket-isnt-working-in-python) and [Python Error](http://programandolahuida.blogspot.in/2009/09/error-python-module-object-has-no.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:42:55.910

用户创建的 python 模块的经验法则，永远不要给你的模块使用相同的 python 标准模块名称；会发生即时冲突。

例如。如果您将套接字应用程序命名为“socket.py”，并启动您的应用程序，则会出现与您显示的类似的问题。

# android - 在 ListView 调用 getView() 后调用函数

> ID：14545134
> 
> 赞同：1
> 
> 时间：2013-01-27T06:49:56.183
> 
> 标签：android, android-inflate

有什么方法可以在调用 getView 方法后调用函数。例如，我希望能够根据它们的大小隐藏/显示各种小部件。为此，我需要能够在视图中查询小部件的大小。

我的问题是，被覆盖的 ArrayAdapter 中的 getView 方法实际上并没有使视图膨胀，因此视图内的小部件上的任何 getWidth/getLeft/getHeight 等调用都返回为 0。我想知道，有没有办法在之后调用函数等到视图正确膨胀？或者也许可以完成的事件绑定实际上等到视图在视图中完全膨胀？

干杯

编辑：

```
public class GetDataTask extends
    AsyncTask<Context, Void, FriendListAdapter> {

    @Override
    protected void onPostExecute(FriendListAdapter result) {
    friendList.onRefreshComplete();
        friendList.getRefreshableView().setAdapter(result);

        friendList.getRefreshableView().setOnItemClickListener(itself);
        friendList.getRefreshableView().getChildCount();
    } 
```

这段代码的行为非常奇怪。适配器已设置，但 getChildCount 返回 0，即使屏幕上显示的列表清楚地显示了列表中的约 15 个内容。这

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:55:39.863

```
public void onWindowFocusChanged(boolean hasFocus) {}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T07:29:26.570

如果问题只是获取项目的数量。你可以试试这个

```
friendlist.getRefreshableView.getCount() 
```

请看[这里](http://developer.android.com/reference/android/widget/AdapterView.html#getCount%28%29)

# ruby-on-rails - 如果 params[:query] 为 nil，是否有任何可能的方法使 @foo="" ？

> ID：14545135
> 
> 赞同：0
> 
> 时间：2013-01-27T06:49:56.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果 params[:query] 为 nil，则在视图中显示 @messages 会出错。如果 params[:query] 为 nil，我如何将 "" 设置为 @foo？

```
@foo = params[:query]
@messages = 'I got this value' + @foo + 'etcs' 
```

我想要这样的东西

> @messages = '我得到了这个值' + (try(@foo) || "") + 'etcs'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:54:49.853

使用 强制将值转换为字符串`to_s`。 `nil.to_s`产生一个空白字符串。

```
@foo = params[:query].to_s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:54:53.773

```
@messages = 'I got this value' + (@foo || "") + 'etcs' 
```

或使用字符串插值，调用`to_s`：

```
@messages = "I got this value #{@foo} etcs" 
```

# html - 带有文字的居中图像

> ID：14545136
> 
> 赞同：0
> 
> 时间：2013-01-27T06:50:15.130
> 
> 标签：html, sql, css, wordpress

我正在使用 Wordpress 作为后端。我几乎不得不尝试从布局中剥离所有内容。

您知道是否有一种无需在 wordpress 中创建模板即可拥有纯 html 文本文件的方法？

我无法将包括图像在内的一些文本居中，我想知道是否有人可以帮助我。

[http://spiketradinginc.com](http://spiketradinginc.com)

它与更广泛的浏览器/不同的分辨率不一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:23:59.827

我认为您可以为空白页面使用“页面模板”选项，您使用的 css 也存在问题以居中对齐您可以使用的任何内容 a (Div Tag with Margin:auto and width:400px (Less then page宽度））

```
 <div style="margin:auto;width:400px">ANy image or text</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:55:13.973

更改 CSS 中的样式

```
#newsticker 
{
width: 600px;
margin: 0 auto;
}

 #newsticker img 
{
margin: 0 auto;
width: 600px;
}

#header 
{
margin: 0 auto;
width: 420px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:55:44.427

> 您知道是否有一种无需在 wordpress 中创建模板即可拥有纯 html 文本文件的方法？

WordPress首先确定它是否有[静态首页](http://codex.wordpress.org/Creating_a_Static_Front_Page)。如果已设置静态首页，则 WordPress 根据[页面模板层次结构](http://codex.wordpress.org/Template_Hierarchy#Page_display)加载该页面。

如果尚未设置静态首页，则 WordPress 会查找名为的模板文件`home.php`并使用它来生成请求的页面。

如果`home.php`缺少，WordPress 会在活动主题的目录中查找一个名为`index.php`的文件，并使用该模板生成页面。

# android - Android - 标题栏中的后退按钮

> ID：14545139
> 
> 赞同：131
> 
> 时间：2013-01-27T06:51:11.817
> 
> 标签：android, user-interface, themes, titlebar

在许多应用程序（日历、云端硬盘、Play 商店）中，当您点击按钮并输入新活动时，标题栏中的图标会变成后退按钮，但对于我正在制作的应用程序，它不会这样做。如何使该图标带您回到上一个屏幕？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-05-26T00:58:51.630

在标题栏中创建后退按钮有两个简单的步骤：

首先，在您希望在其标题栏中添加后退按钮的 Activity 中使用以下代码使应用程序图标可点击：

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayHomeAsUpEnabled(true); 
```

添加上述代码后，您将看到应用程序图标左侧出现一个后退箭头。

[![在此处输入图像描述](../Images/afed1c9641350df12b37e4bd5b8a43ec.png)](https://i.stack.imgur.com/b7c4O.png)

其次，在完成上述操作后，您仍然需要创建能够利用点击事件的代码。为此，请注意，当您实际单击应用程序图标时，`onOptionsItemSelected`会调用一个方法。因此，要返回上一个活动，请将该方法添加到您的活动中并将`Intent`代码放入其中，这将使您返回上一个活动。例如，假设您尝试*返回*的活动被调用`MyActivity`。要回到它，编写方法如下：

```
public boolean onOptionsItemSelected(MenuItem item){
    Intent myIntent = new Intent(getApplicationContext(), MyActivity.class);
    startActivityForResult(myIntent, 0);
    return true;
} 
```

就是这样！

（在 Android 开发者 API 中，它建议弄乱清单并添加类似 . 的东西`android:parentActivityName`。但这似乎对我不起作用。上面更简单，更可靠。）

```
<meta-data
      android:name="android.support.PARENT_ACTIVITY"
      android:value=".MainActivity" /> 
```

在你的活动中

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-06-26T04:12:35.670

使用此代码

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
    ...
   getActionBar().setDisplayHomeAsUpEnabled(true);
 } 
```

之后在`onOptionsItemSelected`方法中编写此代码

```
 int id = item.getItemId();

     if (id==android.R.id.home) {
        finish();
    } 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-11-30T12:00:12.570

我终于设法将后退按钮正确添加到操作栏/工具栏

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ...
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
}  

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            finish();
            return true;
    }

    return super.onOptionsItemSelected(item);
}

public boolean onCreateOptionsMenu(Menu menu) {
    return true;
} 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-11-11T00:28:43.090

1.- 将活动添加到 AndroidManifest.xml 并确保提供元数据：

```
<activity
    android:name="com.example.myfirstapp.DisplayMessageActivity"
    android:label="@string/title_activity_display_message"
    android:parentActivityName="com.example.myfirstapp.MainActivity" >
    <!-- Parent activity meta-data to support 4.0 and lower -->
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.myfirstapp.MainActivity" />
</activity> 
```

2.- 将以下代码添加到活动的 onCreate 方法中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ...
    getActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

3.- 覆盖 onOptionsItemSelected 并使用 NavUtils.navigateUpFromSameTask() 静态方法来导航抛出堆栈。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    // Respond to the action bar's Up/Home button
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

> 但是，仅当您的应用程序是当前任务的所有者（即用户从您的应用程序开始此任务）时，才适合使用 navigateUpFromSameTask()。如果不是这样，并且您的活动是在属于不同应用程序的任务中启动的，那么向上导航应该会创建一个属于您的应用程序的新任务，这需要您创建一个新的后退堆栈。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-09-13T10:23:41.333

如果您的活动确实扩展了活动

```
public class YourActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_xxx);

        getActionBar().setHomeButtonEnabled(true);

        [...]
    }

    [...]
} 
```

如果您的操作扩展了 AppCompatActivity

```
public class YourActivity extends AppCompatActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_xxx);

            getSupportActionBar().setHomeButtonEnabled(true);

            [...]
        }

        [...]
    } 
```

**无事可做**，请参阅[添加操作](https://developer.android.com/training/implementing-navigation/ancestral.html#up)

[可选] 要显式定义父活动，请修改您的 Manifest.xml，如下所示：

```
<application ... >
    ...
    <!-- The main/home activity (it has no parent activity) -->
    <activity
        android:name="com.example.myfirstapp.MainActivity" ...>
        ...
    </activity>
    <!-- A child of the main activity -->
    <activity
        android:name="com.example.myfirstapp.YourActivity "
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstapp.MainActivity" >
        <!-- Parent activity meta-data to support 4.0 and lower -->
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstapp.MainActivity" />
    </activity>
</application> 
```

请参阅[指定父活动](https://developer.android.com/training/implementing-navigation/ancestral.html#SpecifyParent)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-11-24T12:55:32.810

**首先，您需要编写此代码**

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    } 
```

**然后在清单中添加这一行**

```
 <activity android:name=".MainActivity"
            android:parentActivityName=".PreviousActivity"></activity> 
```

> 我认为它会起作用

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-04-23T13:29:04.827

首先在 onCreate 函数中添加以下行

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

然后在代码中添加以下函数：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                finish();
                return true;
        }

        return super.onOptionsItemSelected(item);
    } 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-03-25T08:21:02.850

如果您的活动扩展`AppCompatActivity`，您需要`onSupportNavigateUp()`像这样覆盖该方法：

```
public class SecondActivity extends AppCompatActivity {

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_second);
       Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
       setSupportActionBar(toolbar);
       getSupportActionBar().setHomeButtonEnabled(true);
       getSupportActionBar().setDisplayHomeAsUpEnabled(true);
       ...
   }

   @Override
   public void onBackPressed() {
       super.onBackPressed();
       this.finish();
   }

   @Override
   public boolean onSupportNavigateUp() {
       onBackPressed();
       return true;
   }
} 
```

在您的方法中处理您的逻辑，`onBackPressed()`然后调用该方法，`onSupportNavigateUp()`以便手机上的后退按钮和工具栏上的箭头执行相同的操作。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-11-13T13:32:44.353

经过一段高质量的时间后，主题选项是我代码中的主要问题以下是为我显示工具栏的正确方法

在 AndroidManifest 文件中，首先你必须改变你的主题风格

```
Theme.AppCompat.Light.DarkActionBar
to 
Theme.AppCompat.Light.NoActionBar 
```

然后在您的活动 xml 中，您需要调用自己的工具栏，例如

```
<androidx.appcompat.widget.Toolbar
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="@color/colorPrimary"
        android:id="@+id/toolbar"
        android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"
        android:elevation="4dp"/> 
```

然后这个工具栏应该在你的Java文件中被调用

```
Toolbar toolbar = findViewById(R.id.toolbar);
setSupportActionBar(toolbar); 
```

对于显示 U 的工具栏，应检查 null 以避免 NullPointerException

```
if(getSupportActionBar() != null){
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

对于家庭活动回来添加这个

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId()==android.R.id.home) {
            finish();
            return true;
        }

        return super.onOptionsItemSelected(item);
    } 
```

或返回您想要的活动

```
public boolean onOptionsItemSelected(MenuItem item){
    Intent myIntent = new Intent(getApplicationContext(), YourActivity.class);
    startActivityForResult(myIntent, 0);
    return true;
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-07-25T07:27:23.217

如果您在 android studio 中使用 5.1 的新支持库，则可以在 AppCompatActivity 上使用它

```
 ActionBar actionBar = getSupportActionBar();
 actionBar.setHomeButtonEnabled(true);
 actionBar.setDisplayHomeAsUpEnabled(true);
 actionBar.setHomeAsUpIndicator(R.mipmap.ic_arrow_back_white_24dp);
 actionBar.setDisplayShowHomeEnabled(true); 
```

干杯。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-08-31T15:49:45.837

[谷歌在这里](https://developer.android.com/training/implementing-navigation/ancestral.html "developer.android.com")解释的最简单的方法和最佳实践：

1.在以下位置为您的 childActivity 添加父级`AndroidManifest.xml`：

```
<activity 
        android:name=".ChildActivity"
        android:parentActivityName=".ParentActivity" >
</activity> 
```

2.在您的 childActivity 中激活后退按钮：

```
myActionOrActionSupportBar.setDisplayHomeAsUpEnabled(true); 
```

为我工作，我希望它也适合你。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-10-10T11:33:28.100

我看到了很多复杂的答案，所以这是我的代码。在这里工作。您可以通过两种方式实现这一目标。

1) 标准安卓兼容性

```
import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;
import androidx.core.app.NavUtils;

import android.view.MenuItem;
import android.view.View;

public class EditDiscoveryActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_edit_discovery);
        Toolbar toolbar = findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        /*toolbar.setNavigationIcon(R.drawable.ic_arrow_white_24dp);
        toolbar.setNavigationOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                finish();
            }
        });*/
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setDisplayShowHomeEnabled(true);
    }

    @Override
    public boolean onSupportNavigateUp() {
        onBackPressed();
        return true;
    }

} 
```

2）使用自定义图标

如果你想在注释中使用代码，你只需要在drawable中添加这个文件，叫做ic_arrow_white_24dp.xml

```
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24.0"
    android:viewportHeight="24.0">
    <path
        android:fillColor="#ffffff"
        android:pathData="M20,11H7.83l5.59,-5.59L12,4l-8,8 8,8 1.41,-1.41L7.83,13H20v-2z"/>
    </vector> 
```

有了这个代码。

```
toolbar.setNavigationIcon(R.drawable.ic_arrow_white_24dp);
            toolbar.setNavigationOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    finish();
                }
            }); 
```

希望它会帮助这里的一些人！

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2020-08-09T10:53:53.997

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.YourxmlFileName);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    }

  public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();

        if (id==android.R.id.home) {
            finish();
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-03-28T08:07:30.763

2020年你需要做的所有事情：（
*考虑到你想回到MainActivity）*

```
protected void onCreate(Bundle savedInstanceState){
    ...
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
}

public boolean onOptionsItemSelected(MenuItem item) {
    Intent myIntent = new Intent(getApplicationContext(), MainActivity.class);
    startActivityForResult(myIntent, 0);
    return true;
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-12-13T15:27:53.273

不使用的轻量级版本`ActionBarActivity`在这里仍然具有相同的行为：

```
public class ToolbarConfigurer implements View.OnClickListener {
    private Activity activity;

    public ToolbarConfigurer(Activity activity, Toolbar toolbar, boolean displayHomeAsUpEnabled) {
        toolbar.setTitle((this.activity = activity).getTitle());
        if (!displayHomeAsUpEnabled) return;
        toolbar.setNavigationIcon(R.drawable.abc_ic_ab_back_mtrl_am_alpha);
        toolbar.setNavigationOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        NavUtils.navigateUpFromSameTask(activity);
    }
} 
```

用法：`new ToolbarConfigurer(this, (Toolbar) findViewById(R.id.my_awesome_toolbar), true);`放入`onCreate`。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-12-18T17:14:45.953

您需要在清单文件中添加下面提到的代码。搜索要在其中添加后退箭头功能的活动。如果你找到了那很好或创建活动

```
<activity android:name=".SearchActivity">

</activity> 
```

然后在其间添加以下三行代码。

```
<meta-data
android:name="android.support.PARENT_ACTIVITY"
android:value="com.example.raqib.instadate.MainActivity" /> 
```

并且不要忘记在 onCreate() 中添加这段代码；您需要返回箭头的特定活动的方法。

```
 Toolbar toolbar = (Toolbar) findViewById(R.id.searchToolbar);
    setSupportActionBar(toolbar);
    try{
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    }catch(NullPointerException e){
       Log.e("SearchActivity Toolbar", "You have got a NULL POINTER EXCEPTION");
    } 
```

这就是我解决问题的方法。谢谢。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-01-30T08:22:47.490

对于科特林：

```
 override fun onOptionsItemSelected(item: MenuItem): Boolean {
        onBackPressed();
        return true;
    } 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-04-07T21:51:51.107

我需要混合一些答案来为我找到正确的答案，因为我的应用程序有 3 个可以随时来回的活动。活动 1 > 活动 2 > 活动 3。当我在我的活动 3 上做某事时，后退按钮正确返回到活动 2。但是，从 Activity2 使用`finish()`，它返回到 Activity3 而不是 Activity1。我正在扩展 AppCompatActivity。所以，我的解决方案是：

```
public class Activity2 extends AppCompatActivity {
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            ...

            getSupportActionBar().setHomeButtonEnabled(true);
        }
    } 
```

在 AndroidManifest.xml 上：

```
<activity android:name=".activities.Activity2"
           android:parentActivityName="com.example.appname.activities.Activity1">
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.appname.activities.Activity1" />
        </activity> 
```

最后，我的菜单上的操作按钮（操作栏）：

```
public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()){
            ...

            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;

        }

        return super.onOptionsItemSelected(item);

    } 
```

使用`NavUtils.navigateUpFromSameTask(this);`对我有用，而不是`finish()`.

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2019-05-13T14:33:33.120

其他答案没有提到您也可以在`Toolbar`小部件的 XML 中设置它：

`app:navigationIcon="?attr/homeAsUpIndicator"`

例如：

```
<android.support.v7.widget.Toolbar
    android:id="@+id/toolbar"
    android:layout_width="match_parent"
    android:layout_height="?attr/actionBarSize"
    android:background="?attr/colorPrimary"
    app:navigationIcon="?attr/homeAsUpIndicator"
    app:popupTheme="@style/AppTheme.PopupOverlay"
    app:title="@string/title_activity_acoustic_progress" /> 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2019-06-24T05:48:57.993

只是分享一些对我有帮助并且可能对其他人有用的东西。尽管这里的大多数答案都是正确的，但通过使用`getActionBar().setDisplayHomeAsUpEnabled(true);`，这对我不起作用。我遇到的问题是我试图手动创建第二个活动，但涉及更多细节。
真正解决我的问题的是遵循 Android 开发者教程 ( [https://developer.android.com/training/basics/firstapp/starting-activity](https://developer.android.com/training/basics/firstapp/starting-activity) ) 使用 Android Studio 自己的工具创建第二个活动：

```
Create the second activity
1\. In the Project window, right-click the app folder and select New > Activity > Empty Activity.
2\. In the Configure Activity window, enter "DisplayMessageActivity" for Activity Name and click Finish (leave all other properties set to the defaults).
Android Studio automatically does three things:
- Creates the DisplayMessageActivity file.
- Creates the corresponding activity_display_message.xml layout file.
- Adds the required <activity> element in AndroidManifest.xml. 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-01-27T06:53:13.790

如果您使用的是 ActionBar，您需要阅读本文档 [http://developer.android.com/reference/android/app/ActionBar.html#setDisplayHomeAsUpEnabled(boolean)](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayHomeAsUpEnabled(boolean))

然后你必须覆盖方法 onOptionsItemSelected(MenuItem) 并寻找 android.R.id.home 事件进来。然后你知道用户点击了操作栏上的返回按钮

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-06-30T16:57:08.497

它也可以通过在应用程序清单中指定父活动而无需代码来完成如果您想要 Activity B 中的后退按钮将转到 Activity A，只需在清单中添加 Activity A 作为 Activity B 的父级。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-07-09T14:55:22.593

您也可以简单地放入`onBackPressed()`您的 onClick 侦听器。这会导致您的按钮像 Android 应用程序中的默认“后退/向上”按钮一样！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-07-07T06:56:02.313

```
Toolbar toolbar=findViewById(R.id.toolbar);
getSupportActionBar().setDisplayHomeAsUpEnabled(true);

if (getSupportActionBar()==null){
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setDisplayShowHomeEnabled(true);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
if(item.getItemId()==android.R.id.home)
    finish();
return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-10-22T12:07:07.820

这对我有用..假设有两个活动（Activityone，Activitytwo）

**在Activitytwo里面使用这个代码**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

**在活动一**

```
//when you need to go second activity
startActivity(new Intent(Activityone.this, Activitytwo.class)); 
```

**这应该包含在清单文件中的第二个活动中**

```
<activity android:name=".Activitytwo"
        android:parentActivityName=".Activityone"></activity> 
```

**结果会是这样**

[![在此处输入图像描述](../Images/76e4939d022618ed59fe3dd8eb39f608.png)](https://i.stack.imgur.com/uzmIY.gif)

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2018-10-31T17:22:19.987

这对我有用 getSupportActionBar().setDisplayHomeAsUpEnabled(false); [在此处输入图像描述](https://i.stack.imgur.com/J3zZ6.png)

# c# - 计算大量粒子之间经历的类重力力的最快方法是什么？

> ID：14545140
> 
> 赞同：5
> 
> 时间：2013-01-27T06:51:22.790
> 
> 标签：c#, algorithm, xna, physics

给定二维空间中的一组 n 个粒子，其中每个粒子对集合中的所有其他粒子都受到吸引力，与它们之间的距离的平方反比成正比，你能想象任何计算所经历的净力的巧妙方法吗？每个粒子，不执行 n^2 距离计算？

从我的程序的粒子类：

```
 public void calculateAttractions(List<Particle> entities)
    {
        foreach (Particle p in entities)
        {
            if (!p.Equals(this))
            {
                Vector2 dx = this.Position - p.Position;
                this.ApplyForce(-dx / dx.LengthSquared());
            }
        }
    } 
```

在遇到性能问题之前，蛮力方法只能在我的程序中模拟大约 150 个粒子（使用 XNA 框架和 Farseer 物理引擎）。

如果没有别的办法，这段代码怎么优化，不然怎么作弊？我尝试在粒子到粒子的基础上随机化对 calculateAttractions() 的调用，这样在任何给定时间，实际上只有大约 1/3 的粒子被更新。这导致了性能的一些改进，但当然是以准确性为代价的。

我正在尝试做的类似于重力计算。[该线程](https://stackoverflow.com/questions/7115439/optimizing-gravitation-calculation-for-particles-in-a-zero-gravity-2d-space)中的某人建议使用复数并使用方程式：

```
(z-z')/abs(z-z')**3 
```

但是，我不知道 z 指的是什么，我在其他任何地方都找不到这个方程的参考。

**编辑：虽然我已经接受了下面的答案，但我最终使用了一个没人提到的解决方案：查找表。基本上，我预先计算了另一个粒子在任何方向上最多 2000 像素的所有距离（分辨率为 1 像素）对一个粒子施加的力。然后可以在没有任何运行时距离计算的情况下确定力。虽然它不是一个精确的解决方案，但失真是不可察觉的，它使我能够将模拟粒子的数量增加三倍（到现在数量受限于物理引擎而不是 n 体问题的程度。 )**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T07:07:35.557

1.  首先，力是对称的，所以你只需要 n 平方除以 2 计算。

2.  其次，力随着距离的平方而下降，因此您可以通过设置一个阈值来近似此值，超过该阈值无需计算。您只需要在一维中检查它。如，如果 x - x' < t 和 y - y' < t 计算，否则不计算。

3.  您可以使用两棵占用树将粒子放入小方块或桶中，并且只对一棵树中每个桶中的对进行 k 平方除以 2 距离计算。另一棵树向上和向左平移，以处理相邻方格边界上的任何对。对于第二棵树，不要重复您在第一棵树中所做的距离计算。

4.  在更新之间，一些粒子可能不会改变它们的位置，因此您不需要再次计算任何涉及自上次更新以来静止的两个粒子的力。

5.  人们可以假设群众也做出了贡献。进一步的优化是，如果质量太小，则不计算的阈值 t 也会缩小。

6.  您可能还想量化粒子的平移，这样任何低于最小值的移动都不会被记录为坐标的变化。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T07:07:53.357

要准确计算所有`N`粒子之间的力，您必须确定`O(N^2)`粒子间的距离。没有比 更好的方法了`O(N^2)`，尽管您可以`(1/2)N^2`通过注意对称性（即`dist(i,j) == dist(j,i)`）来实现。

要通过作弊来做*几乎*相同的事情，您可以只计算“附近的”粒子相互作用（无论如何这些都是最大幅度的）并利用空间索引结构。

一个想法是利用[四叉树](http://en.wikipedia.org/wiki/Quadtree)（[3d](http://en.wikipedia.org/wiki/Octree)中的八叉树）来让您有效地确定与`M`特定粒子“接近”的一小组粒子。在计算粒子力时，您只考虑这个缩减集。您将需要试验用于确定集合`M`是否足够大的阈值 - 显然小集合会非常快，但不准确，大集合会准确但慢。

随着粒子的移动，空间索引也需要更新。使用四叉树执行此操作的一种方法是设置每个叶子的粒子数上限和下限，并在违反这些约束时对树进行细化。

总体而言，基于合理分布的粒子集，树的高度将是`O(log(N))`并且您应该期望`O(N*log(N))`基于树的方法的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T07:07:45.897

既然你提到作弊是可以的，那么通过计算单个粒子与整个群体（包括粒子本身）的质心之间的吸引力，就有可能造假。这将是一个 O(2N) 问题（N 代表质心，加上另一个 N 代表每个粒子的受力）。对于某些粒子排列，这可能会显着偏离实际的运动定律，但对于大多数（随机）初始排列来说，它可能是一个合理的近似值。

# jdbc - jdbc db2 连接

> ID：14545142
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:51:37.533
> 
> 标签：jdbc, db2

我正在使用 Tomcat 7、Eclipse juno、db2 v10.1 我已将 db2jcc.jar 和 db2jcc4.cc 放在 WEB-INF/lib 和 tommcat 库中。我收到此错误 **java.sql.SQLException: No suitable driver found for dburl,admin123,admin123** 我写的代码是：public String execute()

```
 {

        try{
            Class.forName("com.ibm.db2.jcc.DB2Driver");
            String dbURL = "jdbc:db2:localhost:50000/EEMS";
            java.sql.Connection con =DriverManager.getConnection("dburl,admin123,admin123");

            String s = "insert into detail values(?,?,?)";
            PreparedStatement ps=con.prepareStatement(s);
            ps.setInt(1, beanobject.getAge());
            ps.setString(2, beanobject.getUname());
            ps.setString(3, beanobject.getSex());

            ps.executeUpdate();
            con.commit();

                ps.close();
                con.close();

                    }
                catch(Exception e){
                    e.printStackTrace();
                }

                    return SUCCESS;

    } 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:39:54.153

您正在尝试获取 URL 的连接`"dburl,admin123,admin123"`。

改变

```
DriverManager.getConnection("dburl,admin123,admin123"); 
```

至

```
DriverManager.getConnection(dbURL, "admin123", "admin123"); 
```

并了解有关 JDBC 的更多信息：连接应始终在 finally 块中关闭，并且您应该使用连接池（因此也是 DataSource）来获取连接。

# php - MySQL获得两个用户之间的对话

> ID：14545143
> 
> 赞同：3
> 
> 时间：2013-01-27T06:51:56.920
> 
> 标签：php, mysql, sql, select

我有一个名为 private_messages 的 SQL 表，其中包含字段（id、from、to、message、stamp）。戳字段对应于消息的日期

那么我需要什么查询：

1）获得两个用户之间的对话（按日期排序）？

我试过查询

```
(SELECT * FROM private_messages WHERE from=$my_id AND to=$other_id) 
UNION 
(SELECT * FROM private_messages WHERE from=$other_id AND to=$my_id) 
ORDER BY stamp
; 
```

但不起作用...

2) 获取我和其他用户之间的最后一条消息，每个用户都有不同的用户，按日期排序（例如在 Facebook 中构建一个收件箱）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T06:54:31.200

1.)

```
SELECT  * 
FROM    private_messages a
WHERE   (a.from = $my_id AND a.to = $other_id) OR
        (a.from = $other_id AND a.to = $my_id)
ORDER   BY stamp DESC 
```

2.)

```
SELECT  f.*
FROM
        (
            SELECT  *
            FROM    private_messages a
            WHERE  (LEAST(a.from, a.to), GREATEST(a.from, a.to), a.stamp) 
                    IN  (   
                            SELECT  LEAST(b.from, b.to) AS x, 
                                    GREATEST(b.from, b.to) AS y,
                                    MAX(b.stamp) AS msg_time
                            FROM    private_messages b
                            GROUP   BY x, y
                        )
        ) f
WHERE   $my_id IN (f.from, f.to)
ORDER   BY f.stamp DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:06:28.597

你能试试这个吗？

```
SELECT x.* 
FROM (SELECT * FROM private_messages 
WHERE `to`='$my_id' OR `from`='$my_id' GROUP BY `to`, `from`) AS x 
ORDER BY x.stamp DESC ; 
```

`To`,`From`可以是**保留字**。注意到这`x`是一个表别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T07:13:20.690

我过去曾这样做过，但查询很简单。可能这对你有用

```
 SELECT * FROM private_messages WHERE (from=$my_id AND to=$other_id) OR (from=$other_id AND to=$my_id) ORDER BY stamp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T07:14:54.510

1) 很确定您需要在 PHP 变量周围加上引号，如下所示：

```
(SELECT * FROM private_messages WHERE from='$my_id' AND to='$other_id') UNION (SELECT * FROM private_messages WHERE from='$other_id' AND to='$my_id') ORDER BY stamp DESC 
```

2）尝试类似：

```
SELECT * FROM (SELECT * FROM private_messages WHERE to='$my_id' OR from='$my_id' GROUP BY to, from) AS tmp_table ORDER BY stamp DESC 
```

# android - Android 列表项

> ID：14545144
> 
> 赞同：0
> 
> 时间：2013-01-27T06:52:03.113
> 
> 标签：android

谁能告诉我这行代码是做什么的？我在一个android教程中学习了它，但无法理解它，谁能告诉我它的细节？

```
Class ourClass = Class.forName("com.prem.firsttry.STARTINGPOINT"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:04:37.947

调用 Class.forName("X") 会导致名为 X 的类被动态加载（在运行时）。对 forName("X") 的调用会导致初始化名为 X 的类（即，JVM 在类加载后执行其所有静态块）。Class.forName("X") 返回与“X”类关联的 Class 对象。返回的 Class 对象不是“x”类本身的实例。

Class.forName("X") 加载尚未加载的类。JVM 会跟踪以前加载的所有类。此方法使用调用它的类的类加载器。“X”是所需类的完全限定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:01:24.923

此[方法](http://developer.android.com/reference/java/lang/Class.html#forName%28java.lang.String%29)加载并链接一个 Java 类。构造一个`Class`对象并将其提供给您。你可以继续用它制作一个对象[`newInstance()`](http://developer.android.com/reference/java/lang/Class.html#newInstance%28%29)。

这种方法最流行的用途是检查特定类是否存在以及是否可以加载（例如某些 JDBC 驱动程序）。如果不是，此方法将引发异常。这也会导致所述类的静态初始化。

# c# - 在 Visual Studio 的 WebForm 中执行 JavaScript

> ID：14545147
> 
> 赞同：0
> 
> 时间：2013-01-27T06:52:48.480
> 
> 标签：c#, javascript, winforms, visual-studio-2010

所以，我创建了一个小应用程序只是为了好玩，它包括一个嵌入在 tabControl 中的 webForm，在 windows 窗体中。

应用程序的其余部分工作正常，但是每当我设置为 url 的网站尝试运行 javascript（我假设它是一个 javascript 脚本，而不是其他一些脚本）时，它都会给我错误。通常是对象 null 或未定义的错误。

我也知道分页是由 javascript 完成的，单击分页按钮不起作用。

有任何想法吗？

# sql - sql中的Groub by子句

> ID：14545161
> 
> 赞同：-5
> 
> 时间：2013-01-27T06:54:37.103
> 
> 标签：sql, select

查找工资低于每种工作的平均工资的员工的姓名给定的解决方案是：

```
SELECT ENAME,JOB,SAL
FROM EMP
   WHERE SAL<ALL
    (SELECT AVG(SAL) FROM EMP
      GROUP BY JOB); 
```

子句中指定的所有列都`SELECT`必须存在于`GROUP BY`子句中，但这里不是。内部查询的`SELECT`子句不包含作业，尽管它在 GROUP BY 子句中指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:21:39.443

如果我理解正确，您需要列出所有员工的`SAL`ary 低于每个员工的所有薪水的平均值`JOB`。

```
SELECT  a.*
FROM    EMP a
        INNER JOIN
        (
            SELECT  JOB, AVG(SAL) avg_sal
            FROM    EMP
            GROUP   BY JOB
        ) b ON a.JOB = b.JOB
WHERE   a.SAL < b.avg_sal 
```

# twitter - 我在哪里可以看到你的推文？

> ID：14545162
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:54:39.077
> 
> 标签：twitter

推荐一个服务，您可以在其中看到您的推文。我正在寻找类似这两个的服务：[http](http://allmytweets.net) ://allmytweets.net、http : [//greptweet.com/u/twitter/](http://greptweet.com/u/twitter/) 我想找到类似的东西，最好是在开源中。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:36:35.217

对于您请求的基本任务，我不知道（在我脑海中）可用的开源解决方案，而且我不倾向于只是去谷歌搜索一个，但复制并不是特别困难你自己，因为你不怕写一些代码。

第一步是访问[https://dev.twitter.com/](https://dev.twitter.com/)并开始注册您自己的应用程序并获取您的消费者密钥和秘密。您还需要使用 Twitter 的代码库列表来查找可用的 Twitter oauth 库，该库的语言可以用于您的项目。一个不错的选择是 PHP；亚伯拉罕的 TwitterOauth 库对我来说非常有用，我自己。

假设帐户的推文不是私人的，您可以使用自己的应用程序和用户访问密钥来请求批量推文。[`GET statuses/user_timeline`](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)在向指定 a `since_id`of的 API 方法成功请求后`0`，您将发出一个新请求，在其中指定`since_id`与上一批中的最大 ID 相同；您可以继续此操作，直到您返回的结果数为 0（当您返回的结果少于指定的结果时，您不能简单地假设您已完成`count`，因为某些情况可能会导致结果集中省略推文。）

# ios - AFHTTPRequestOperation 完成后如何使函数返回

> ID：14545164
> 
> 赞同：0
> 
> 时间：2013-01-27T06:54:49.637
> 
> 标签：ios, afnetworking

我希望函数在完成之前不返回`AFHTTPRequestOperation`，但我不知道该怎么做，在此先感谢。

```
-(BOOL)download
{
BOOL ret = TRUE;
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    ret = [self handle:data];
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Failure: %@", error);
}];
[operation start];
return ret ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:00:17.537

你的设计不正确。

`AFHTTPRequestOperation`是异步的，因此您不能（也不应该）以同步的方式处理它。您必须修改工作流程才能使用`AFHTTPRequestOperation`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:59:58.550

由于 AFNetworking 是异步的，这是不可能的。使用异步请求时，您应该始终在成功/完成块中调用完成代码。

如果你解释你在哪里使用下载方法以及为什么你需要知道它何时完成，我可以帮助解释/帮助你更好地设计它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:43:52.110

我同意上述其他人的观点，通常您应该坚持使用 AFNetworking 异步性质，但是有一些方法可以让伪同步代码为 AFNetworking 请求运行。

使用您的示例，下面的代码应该可以工作。

```
-(BOOL)download {
    BOOL ret = TRUE;
    __block BOOL complete = NO;
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        ret = [self handle:data];
        complete = YES;
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Failure: %@", error);
        complete = YES;
    }];
    [operation start];

    while(complete == NO) {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeIntervalSinceNow:0.1]];
    }

    return ret;
} 
```

我发现这种用法对单元测试 API 特别有用。如果您必须执行 API 调用只是为了获得您想要测试的调用，那么嵌套可能会变得非常烦人。这是一个很好的工具来解决这个问题。

# three.js - THREE.CanvasRender() 是否支持 mesh.updateAnimation()

> ID：14545176
> 
> 赞同：0
> 
> 时间：2013-01-27T06:55:55.357
> 
> 标签：three.js

刚看到[http://oos.moxiecode.com/js_webgl/md2_morphtarget_example/](http://oos.moxiecode.com/js_webgl/md2_morphtarget_example/)的工作 ，很神奇。所以，我试试看能不能在Three.CanvasRender上运行。但是不行。好像updateAnimation不起作用。谁能告诉我为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:46:36.967

`CanvasRenderer`还不支持变形目标。

# ruby-on-rails - 调用 script/delayed_job 启动但没有任何反应

> ID：14545185
> 
> 赞同：0
> 
> 时间：2013-01-27T06:57:03.753
> 
> 标签：ruby-on-rails, delayed-job

在我的服务器上，我执行以下命令：

```
RAILS_ENV=production script/delayed_job start 
```

但是什么也没有发生（我的作业队列没有被清空，没有输出错误，`locked_by`并且`locked_at`保持为 NULL）。`delayed_log.log`在我的`/log`目录中具有写访问权限，但没有任何记录。我只收到这个警告：

> /home/user/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:211：警告：不安全的世界可写目录/home/user/。路径中的 rvm/gems/ruby-1.9.3-p125，模式 040777

但是，当我这样做`rake jobs:work`时，它会起作用，并且我的作业队列会被清空。

为什么前者不起作用而后者是的任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:38:12.123

安装了3个不同的版本`delayed_jobs`。

`gem uninstall`+`bundle install`修好了。

# node.js - 在 node.js 中将结果集发送回客户端

> ID：14545200
> 
> 赞同：0
> 
> 时间：2013-01-27T06:59:00.773
> 
> 标签：node.js, node-mysql

我在使用 Node.js 将结果集返回给客户端时遇到问题。我是新手并将其用于项目，但我被卡住了，不知道为什么。情况如下：我有一个网页、一个服务器、一个请求处理程序和一个数据库接口。我能够毫无问题地在客户端和服务器之间来回发送数据。唯一不起作用的是当我尝试将查询的结果发送回客户端时。

```
function doSomething(response)
{
    var data = {
        'name': 'doSomething'
    };

    response.writeHead(200, {'Content-Type': 'text/html', 'Access-Control-Allow-Origin': '*'});     
    response.end(JSON.stringify(data));
} 
```

这很好用，因为我可以从客户端的对象中读取名称，但是

```
function fetchAllIDs(response)
{
    dbInterface.fetchAllIDs(function(data) {
        // console.log(data) prints the correct information here        
        response.writeHead(200, {'Content-Type': 'text/html', 'Access-Control-Allow-Origin': '*'});     
        response.end(data);
        // console.log(data) from the client side is just blank
    });
} 
```

我相信问题在于我处理回调和响应的方式，因为在不尝试使用 mysql 的情况下，我的其余代码工作正常。谢谢！

编辑：我删除了一个似乎让人们感到困惑的代码。这只是为了表明，如果我在回调之外有响应代码，那么我可以将任何数据返回到服务器。在我的实际代码中，我没有将两个响应语句放在一起。我只是无法将 fetchAllIDs 函数中的行返回给客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:04:33.697

你写它的方式意味着

```
reponse.end('This string is received by the client'); 
```

line 总是在回调函数之前调用，这意味着响应已经结束。

在 JS 下，所有代码都将在下一个事件（您的回调函数）从队列中取出之前完成。注释掉上面的行 // 并测试它

# c++ - 判断您是否已成功释放动态分配内存的方法

> ID：14545201
> 
> 赞同：0
> 
> 时间：2013-01-27T06:59:08.437
> 
> 标签：c++, memory, memory-management

这就是我为二维数组分配动态内存的方式

```
char **twod;

twod=new char*[count];
for (int i = 0; i < count; i++)
{
    twod [i] = new char [MAX];
} 
```

这就是我释放二维数组内存的方式

```
for (int i=0; i<count;i++)
  {
      delete [] twod [i];

  }
   delete [] twod; 
```

我怎么知道我已经成功发布了所有内容并且没有内存泄漏？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T07:00:24.470

> **判断您是否已成功释放动态分配内存的方法**

在 valgrind 或任何此类内存泄漏检测工具中运行代码。
如果您愿意，您还可以为您的班级重载`new`and`delete`运算符并自己进行簿记，但是这太费力了，所以您最好使用内存泄漏检测工具进行设置。

当然，我认为该示例只是一个示例示例，而不是通常会使用的代码，因为：

1.  你最好避免动态分配，而是使用自动变量。
2.  如果您必须使用带有 RAII 的智能指针而不是原始指针。

# javascript - 为什么原型未定义

> ID：14545210
> 
> 赞同：13
> 
> 时间：2013-01-27T07:01:01.063
> 
> 标签：javascript, prototype

我知道这已经被问了数百次了，但是，我似乎无法理解`prototype`

这是我的示例脚本

```
var config = {
  writable: true,
  enumerable: true,
  configurable: true
};

var defineProperty = function(obj, name, value) {
  config.value = value;
  Object.defineProperty(obj, name, config);
}

var man= Object.create(null);
defineProperty(man, 'sex', "male");

var person = Object.create(man);
person.greet = function (person) {
    return this.name + ': Why, hello there, ' + person + '.'
}
var p=Object.getPrototypeOf(person);
alert(p.sex);//shows male
person.prototype.age=13;//why there is a error said the prototype is undefined? I thought it supposed be man object...

var child=function(){}
child.prototype.color="red";//why this line doesn't show error? both child and person are an object . 

alert(child.prototype.color);//shows red

var ch=Object.getPrototypeOf(child);

alert(ch.color);//why it is undefined? it is supposed red. 
```

希望你能给我一些帮助...谢谢。

**更新：**

谢谢你们的帮助，根据 Elclanrs 的回答，以下是我学到的。

`Function`是 javascript 中的内置对象之一。3 格式创建函数对象是相等的。

```
var function_name = new Function(arg1, arg2, ..., argN, function_body)
function function_name(arg1, arg2, ..., argN)
{
...
}
var function_name=function(arg1, arg2, ..., argN)
{
...
} 
```

所以，这就是为什么要创建一个原型链，我们必须创建一个函数，然后用 new 关键字调用它。

`Function.prototype`是对所有函数对象的引用`prototype`。

干杯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T07:22:48.103

该`prototype`属性仅存在于函数上，而`person`不是函数。这是一个`object`.

这是正在发生的事情：

```
var man = Object.create(null);         // man (object) -> null
man.sex = "male";

var person = Object.create(man);       // person (object) -> man (object) -> null
person.greet = function () { ... };

var p = Object.getPrototypeOf(person); // man (object) -> null
alert(p.sex);                          // p is the same object as man

person.prototype.age = 13;             // person doesn't have a prototype

var child = function () {};            // child (function) -> Function.prototype
                                       // -> Object.prototype -> null
child.prototype.color = "red";         // child has a prototype

var ch = Object.getPrototypeOf(child); // Function.prototype

alert(ch.color);                       // ch is not the same as color.prototype
                                       // ch is Function.prototype 
```

有关更多信息，我建议您阅读此答案：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

**编辑：**用尽可能少的词来解释正在发生的事情：

1.  JavaScript 中的一切都是对象，除了原始值（布尔值、数字和字符串）`null`和`undefined`.

2.  所有对象都有一个名为的属性`[[proto]]`，程序员无法访问该属性。然而，大多数引擎使这个属性可以作为`__proto__`.

3.  当你创建一个像`var o = { a: false, b: "something", ... }`then的对象`o.__proto__`时`Object.prototype`。

4.  当你创建一个像`var o = Object.create(something)`then的对象`o.__proto__`时`something`。

5.  当你创建一个像`var o = new f(a, b, ...)`then的对象`o.__proto__`时`f.prototype`。

6.  当 JavaScript 找不到属性时，`o`它会搜索属性 on `o.__proto__`，然后`o.__proto__.__proto__`等，直到找到属性或原型链以结尾`null`（在这种情况下属性为`undefined`）。

7.  最后，`Object.getPrototypeOf(o)`return`o.__proto__`和 not `o.prototype`-`__proto__`存在于包括函数在内的所有对象上，但`prototype`仅存在于函数上。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-27T07:28:36.100

我想你可能会混淆概念。试着先用经典的原型继承来掌握原型的概念，然后你就可以接触到所有的新`Object`东西了。

在 JavaScript 中，每个对象（数字、字符串、对象、函数、数组、正则表达式、日期... `prototype`）*都有*.

要创建原型链，您必须创建一个函数，然后使用`new`关键字调用它以指定它是构造函数。您可以将构造函数视为主要函数，它接受构建对象的新实例所需的参数。

考虑到这一点，您可以扩展原生对象或创建自己的新原型链。这类似于类的概念，但在实践中更强大。

与您的示例类似，您可以编写如下原型链：

```
// Very basic helper to extend prototypes of objects
// I'm attaching this method to the Function prototype
// so it'll be available for every function
Function.prototype.inherits = function(parent) {
  this.prototype = Object.create(parent.prototype);
}

// Person constructor
function Person(name, age, sex) {
  // Common to all Persons
  this.name = name;
  this.age = age;
  this.sex = sex;
}

Person.prototype = {
  // common to all Persons
  say: function(words) {
    return this.name +'says: '+ words;
  }
};

// Student constructor   
function Student(name, age, sex, school) {
  // Set the variables on the parent object Person
  // using Student as a context.
  // This is similar to what other laguanges call 'super'
  Person.call(this, name, age, sex);
  this.school = school; // unique to Student
}

Student.inherits(Person); // inherit the prototype of Person

var mike = new Student('Mike', 25, 'male', 'Downtown'); // create new student

console.log(mike.say('hello world')); //=> "Mike says: hello world" 
```

在较新版本的 JavaScript（阅读 EcmaScript）中，他们添加了处理对象和扩展对象的新方法。但是它的概念与经典的原型继承有点不同，它看起来更复杂，并且更多地了解 JS 如何在底层工作将有助于真正理解它是如何工作的，而且它在旧浏览器中不起作用。这就是为什么我建议你从经典模式开始，你会在互联网上找到准确而丰富的信息。

# javascript - jQuery 检查道具。的 Radio 并取消选中 onClick

> ID：14545214
> 
> 赞同：0
> 
> 时间：2013-01-27T07:02:28.053
> 
> 标签：javascript, jquery, html, list

所以这里是代码

```
<html>
    <head>
        <link href="../../fuctions/style.css" rel="stylesheet" media="screen" type="text/css" />
        <script type="text/javascript" charset="utf-8" src="../../fuctions/cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="../../fuctions/functions.js"></script>
        <script type="text/javascript" charset="utf-8" src="../../fuctions/jq.js"></script>
    </head>
    <body>
        <div id="topbar">
            <div id="title"><!--Title-->
                After Landing
            </div>  
            <div id="leftnav">
                <a href="../../index_aerosoft.html">Home</a>
                <a href="katana_checklist_all.html">Overview</a><!--AllChecklist-->
            </div>
            <div id="rightnav">
                <a href="katan_checklist_engineshut-downl.html"id="a_next">Next</a></div><!--NextPage-->
            </div>
            <div id="content">
                <ul class="pageitem">
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Wing Flaps -<font color="red"> UP
                        </font></span>
                        <input name="1" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Carburetor Heat -<font color="red"> OFF
                        </font></span>
                        <input name="2" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Exterior Lights -<font color="red"> as required
                        </font></span>
                        <input name="3" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Electric Fuel Pump -<font color="red"> OFF
                        </font></span>
                        <input name="4" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                </ul>
            </div>
            <div id="footer">
                <a class="noeffect" href="#" onClick="resetChecklist();">Reset Checklist</a><!--ResetChecklist-->
                <br /><br />
                <a class="noeffect" href="#" onClick="openxyzDE();">xyz</a>
            </div>
    </body>
</html> 
```

我有一个检查“无线电被检查并改变颜色”的功能

```
function checkChanges()
{

    $('.radiobutton font').attr('color', 'red');

    $('.radiobutton :checked').closest('.radiobutton').find('font').attr('color', 'green');
}

$(function()
  {
  checkChanges();
  $('.radiobutton :radio').on('click', checkChanges);
  }); 
```

我想在该代码中添加一个函数，如果选中并再次单击 Radio（onClick），则取消选中 Radio，这也应该将颜色改回红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:07:12.813

几处更正...

1.  去掉前面的空格`:checked`。改变：

    ```
    $('.radiobutton :checked').closest('.radiobutton').find('font').attr('color', 'green'); 
    ```

    至：

    ```
    $('.radiobutton:checked').closest('.radiobutton').find('font').attr('color', 'green'); 
    ```

2.  你需要在`input[type="radio"]`这里使用。改变：

    ```
    $('.radiobutton :radio').on('click', checkChanges); 
    ```

    至：

    ```
    $('input.radiobutton[type="radio"]').on('click', checkChanges); 
    ```

# javascript - 未捕获的类型错误：无法使用 d3.js 读取未定义的属性“类型”

> ID：14545217
> 
> 赞同：2
> 
> 时间：2013-01-27T07:03:21.817
> 
> 标签：javascript, d3.js

在这一点上，我已经被这个问题困扰了几个小时，我无法弄清楚这个问题。

我一直在用我自己的数据集关注[http://bost.ocks.org/mike/map/ 。](http://bost.ocks.org/mike/map/)

错误：未捕获的类型错误：无法读取未定义的属性“类型”-topojson.v0.min.js:1

```
<!DOCTYPE html>
<head>
<meta charset="utf-8">
<style>

path {
  fill: #ccc;
  stroke: #fff;
  stroke-width: .5px;
}

path:hover {
  fill: red;
}

</style>
</head>
<body>
<script src="../static/js/d3.min.js"></script>
<script src="../static/js/topojson.v0.min.js"></script>
<script>

var width = 900,
    height = 900;

var path = d3.geo.path();

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("../static/json/newjerseymun.json", function(nj) {
  svg.append("path")
      .datum(topojson.object(nj, nj.objects.subunits))
      .attr("d", d3.geo.path().projection(d3.geo.mercator()));
});

</script>

</body> 
```

这是我的 json 文件开头的示例：http: [//pastebin.com/g0Lut36V](http://pastebin.com/g0Lut36V)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:11:28.647

问题似乎出在文件中`../static/json/newjerseymun.json`。

您发布的片段`newjerseymin.json`确实具有`objects`包含 JSON 对象的字段，但该对象中似乎没有`subunits`字段，至少在您发布的片段中没有。因此，`ns.objects.subunits`将是`undefined`导致错误的原因。

# c++ - 先到先服务程序 C++ 表格格式

> ID：14545218
> 
> 赞同：0
> 
> 时间：2013-01-27T07:03:59.807
> 
> 标签：c++, formatting

我被要求做先到先服务计划。我破解了代码，程序运行良好。但是，我在表格列中显示它时遇到问题。

我希望它像这样显示：

```
Pr  AT  ST  WT  TAT RR
--------------------------
A   0   3   0   3   1
B   2   6   1   7   1.16
C   4   4   5   9   2.25
D   6   5   7   12  2.4
E   8   2   10  12  6

Average Response Ratio is 2.56 
```

但我得到的是这样的： ![输出](../Images/4c5ba8d2c84c5581523dd930ca63a1c8.png)

在我输入姓名、到达时间和服务时间后，等待时间、周转时间和响应率出现在下一行。我希望所有的东西都出现在同一行。

谁能告诉我哪里出错了？这是我的代码：

```
//First Come First Serve Scheduling
#include<iostream.h>
#include<stdio.h>
#include<conio.h>
void main()
{
 int at[5],st[5],tt=0,wt=0,tr=0;
 char name[5];
 float res,tres;
 clrscr();
 cout<<"\n\tName \tAT \tST \tWT \tTAT \tRR";
 for(int i=0;i<5;i++)
 {
  cout<<"\n\t";
  cin>>name[i];
  cout<<"\t";
  cin>>at[i];
  cout<<"\t";
  cin>>st[i];
  wt = tr - at[i];
  cout<<"\t\t"<<wt;
  tt = wt + st[i];
  cout<<"\t"<<tt;
  tr+=st[i];
  res=(float)tt/st[i];
  tres+=(float)res;
  cout<<"\t"<<res;
  }
  cout<<"\nAverage response ratio is: "<<tres/5;
 getch();
} 
```

任何帮助都会非常好。谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:54:53.493

换行符不是由 C++ 程序处理的，在 Windows 平台上，也许你可以尝试[Windows 控制台 API](http://msdn.microsoft.com/en-us/library/ms682073%28VS.85%29.aspx)或诅咒库（例如 ncurse）来改变光标的位置。或者您可以简单地编写自己的函数来处理输入。在这种情况下，您应该放弃 std:cin。

# mysql - 根据另一个表中的值更新 MYSQL 表的字段

> ID：14545224
> 
> 赞同：0
> 
> 时间：2013-01-27T07:04:21.613
> 
> 标签：mysql, sql, sql-update

我的 SQL 数据库中有两个表，一个是 Companies，另一个是 Company_advertisements。我想更新公司表“adv”的字段

```
SET Company.adv = 1 if Company_adv.image is not empty
SET Company.adv = 0 if Company_adv.image is empty 
```

Company_adv 表的外键是 company_id

我尝试使用以下语法，但没有成功。相反，在运行此查询后，Companmy.adv 的所有值都变为 1

我试过这个查询：

```
UPDATE companies cmp, company_adv cma 
SET    cmp.adv=1 
WHERE  cma.company_id=cmp.id AND 
       cma.image1 IS NOT NULL 
```

请帮我 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:06:37.430

如果是这种情况，您需要使用`LEFT JOIN`

```
UPDATE  companies cmp
        LEFT JOIN company_adv cma
            ON cmp.id = cma.company_id
SET     cmp.adv = IF(cma.image1 IS NULL, 0, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:30:46.060

你可以试试：

```
UPDATE companies
   SET adv=IF((SELECT image
                 FROM company_adv
                WHERE companies.id=company_adv.company_id) IS NULL,
              0,
              1); 
```

# haskell - Haskell：交互使用导致错误

> ID：14545232
> 
> 赞同：4
> 
> 时间：2013-01-27T07:05:16.840
> 
> 标签：haskell, eclipse-fp

我正在尝试使用交互功能，但我遇到了以下代码的问题：

```
main::IO()
main = interact test

test :: String -> String
test [] = show 0
test a = show 3 
```

我正在使用 EclipseFP 并接受一个输入，似乎有一个错误。尝试再次运行 main 会导致：

```
*** Exception: <stdin>: hGetContents: illegal operation (handle is closed) 
```

我不确定为什么这不起作用，测试类型是 String -> String 并且 show 是 Show a => a -> String，所以看起来它应该是交互的有效输入。

**编辑/更新**

我已经尝试了以下，它工作正常。unlines 和 lines 的使用如何导致交互按预期工作？

```
main::IO()
main = interact respondPalindromes

respondPalindromes :: String -> String
respondPalindromes =
    unlines .
    map (\xs -> if isPal xs then "palindrome" else "not a palindrome") .
    lines

isPal :: String -> Bool
isPal xs = xs == reverse xs 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T10:12:35.263

## GHCi 和不安全的 I/O

您可以将此问题（异常）减少为：

```
main = getContents >> return () 
```

（`interact`打电话`getContents`）

问题是`stdin`( `getContents`is really `hGetContents stdin`) 仍然在 GHCi 调用之间进行评估`main`。如果您查找`stdin`，它的实现为：

```
stdin :: Handle
stdin = unsafePerformIO $ ... 
```

要查看为什么这是一个问题，您可以将其加载到 GHCi 中：

```
import System.IO.Unsafe                                                                                                           

f :: ()                                                                                                                           
f = unsafePerformIO $ putStrLn "Hi!" 
```

然后，在 GHCi 中：

```
*Main> f
Hi!
()
*Main> f
() 
```

由于我们已经使用`unsafePerformIO`并告诉编译器这`f`是一个纯函数，它认为它不需要第二次评估它。在 的情况下`stdin`，句柄上的所有初始化都没有第二次运行，并且仍处于半关闭状态（`hGetContents`将其放入），这会导致异常。所以我认为 GHCi 在这种情况下是“正确的”，问题在于定义哪个对于只评估一次`stdin`的编译程序来说是一种实用的便利。`stdin`

## 交互和惰性 I/O

至于为什么`interact`在版本继续时单行输入后退出`unlines . lines`，让我们尝试减少它：

```
main :: IO ()
main = interact (const "response\n") 
```

如果你测试上面的版本，interact 甚至不会在打印前等待输入`response`。为什么？这是`interact`（在 GHC 中）的来源：

```
interact f = do s <- getContents
                putStr (f s) 
```

`getContents`是惰性 I/O，由于`f`在这种情况下不需要`s`，因此不会从`stdin`.

如果您将测试程序更改为：

```
main :: IO ()
main = interact test

test :: String -> String
test [] = show 0
test a = show a 
```

你应该注意到不同的行为。这表明在您的原始版本`test a = show 3`（`a`，它只需要打印`"3"`）。由于输入可能是在终端上进行行缓冲的，因此它会一直读取，直到您按下回车键。

# git - Git 回了 5 次提交，忘记创建新的分支，怎么回？

> ID：14545234
> 
> 赞同：3
> 
> 时间：2013-01-27T07:05:37.433
> 
> 标签：git, git-branch, git-commit, git-checkout

我不得不使用命令返回 Git 中的六次提交

```
git checkout idofthecommit 
```

我一直在做的是继续提交，提交，提交。由于我没有创建真正的新分支，因此当我使用 git push 到外部存储库时

```
git push origin master 
```

它告诉我一切都是最新的。

这意味着我实际上并没有对 master 进行任何更改。

如何将我一直在做的提交移动到主分支？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T10:03:28.053

如果您对您运行的命令的描述是正确的 - 现在就创建一个您正在处理的分支，以创建一个可靠的命名引用 ( `git branch WIP HEAD`)。`git rebase master`然后针对 master ( ) 和 checkout master 进行rebase并在 WIP 中合并。

您可以相当简单地对此进行测试，以复制情况并探索您需要的命令以及它们的作用。因为这`git graph`是一个别名`git log --graph --oneline --decorate --abbrev-commit`，只是产生一个漂亮的 git 日志。

创建一个包含 8 个提交的演示存储库，然后签出六个并创建更多提交

```
$ cd /tmp && git init demo && cd demo
$ for msg in one two three four five six seven eight; do echo $msg>file && git add file && git commit -m $msg; done
$ git checkout HEAD~6
$ for msg in nine ten eleven; do echo $msg>file && git add file && git commit -m $msg; done 
```

所以让我们看看这个：

```
$ git graph --all
* e81b31c (HEAD) eleven
* c005e75 ten
* c567d25 nine
| * 4d28c3d (master) eight
| * 380f715 seven
| * 9966c80 six
| * 6b2f757 five
| * e43d079 four
| * ce0ff34 three
|/
* 8d5a6e1 two
* 1f880ae one 
```

所以实际上这看起来就像是从 8d5a6e1 中提取的一个特性分支。唯一特别的是它唯一的参考是HEAD。如果您现在添加一个分支引用，它将成为一个正常的功能分支。

如果您在使用分支标记标记此工作分支之前不小心签出了 master 或其他一些分支，那么您将失去对这个新提交链顶部的引用。现在你失去了分支。在这种情况下，您需要使用 reflog 来查找该链上的最后一个提交并添加对该提交的分支引用。我们可以从上面的演示存储库中看到这一点：

```
$ git reflog
e81b31c HEAD@{0}: commit: eleven
c005e75 HEAD@{1}: commit: ten
c567d25 HEAD@{2}: commit: nine
8d5a6e1 HEAD@{3}: checkout: moving from master to HEAD~6
4d28c3d HEAD@{4}: reset: moving to 4d28c3d
.... 
```

我们可以从 reflog 中看到返回了一些提交，我们检查了 HEAD~6，然后又添加了三个提交。然后我们可以发出`git branch recover-commits e81b31c`一个指向该组提交的分支并恢复它们。

# python - python - 将列表项放入队列中

> ID：14545237
> 
> 赞同：10
> 
> 时间：2013-01-27T07:05:59.647
> 
> 标签：python

我有以下代码：

```
self.queryQ = Queue.Queue()
queries = self.getQueries()  # returns list

for query in queries:
  self.queryQ.put(query) 
```

有没有更好的方法来跟踪代码？请提供指点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-27T07:10:18.500

好吧，您可以使用`map`（[文档](http://docs.python.org/2/library/functions.html#map)）：

```
map(self.queryQ.put, self.getQueries()) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-27T07:10:28.063

使用列表理解，它更快。

```
list = [self.queryQ.put(query) for query in queries] 
```

# ios - 将 STL 加载到 Objective-C 项目中并编译

> ID：14545238
> 
> 赞同：3
> 
> 时间：2013-01-27T07:06:06.027
> 
> 标签：ios, objective-c, ios5, stl

一篇关于数据结构的 Stack Overflow 帖子说您可以在 Objective-C 和 iOS 开发中使用 STL。他提供的链接具有 STL 下载链接，为[http://www.sgi.com/tech/stl/](http://www.sgi.com/tech/stl/)

它只是头文件，我不确定是否需要任何其他文件。但是，让我们说这有效。我想我可以将文件放在我的项目文件夹中的一个文件夹中，然后将它们全部添加到我拥有的项目中，到目前为止，这是一个简单的聊天客户端。但这会导致它们全部加载到我的文件视图中吗？有正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T09:42:53.600

您需要做的就是将文件重命名为 *.mm。这告诉编译器它是 Objective-C++ 代码。您可以同时使用 Objective-C 对象和 C++ 对象。

然后，如果您想使用向量，只需`#include <vector>`像在普通 C++ 代码中一样使用它。

# sql - 在 SQL 中使用特殊字符作为字符串

> ID：14545242
> 
> 赞同：2
> 
> 时间：2013-01-27T07:07:33.790
> 
> 标签：sql, sql-server-2008

使用 SQL Server 2008

```
DECLARE @myVariable nvarchar (500)

SET @myVariable = 'select distinct b.*,v.vertrag_id,v.VersicherungsscheinNummer 
from CRM_Wifo_GmbH.dbo.vertrag_168 v,temp_universa b 
where v.VersicherungsscheinNummer like '%' + b.vsnr + '% 
and v.gesellschaft_id in('59','66')' 
```

我必须在变量中设置这种类型的值。我怎么能这样做？是否可以？使用**“”**登录字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T07:09:30.957

您只需要`'`使用 2 个单引号来转义单引号`''`

```
DECLARE @myVariable nvarchar (500)
SET @myVariable = 
N'select distinct b.*,v.vertrag_id,v.VersicherungsscheinNummer 
  from CRM_Wifo_GmbH.dbo.vertrag_168 v,temp_universa b 
  where v.VersicherungsscheinNummer like ''%'' + b.vsnr + ''% 
  and v.gesellschaft_id in(''59'',''66'')' 
```

我也在使用`N'`，这样我就可以跨越多行的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:19:02.397

替代解决方案：

```
DECLARE @myVariable nvarchar (500)
SET @myVariable = 'select distinct b.*,v.vertrag_id,v.VersicherungsscheinNummer from CRM_Wifo_GmbH.dbo.vertrag_168 v,temp_universa b where v.VersicherungsscheinNummer like ' + char(39) + '%' + char(39) + ' + b.vsnr + ' + char(39) + '% and v.gesellschaft_id in(' + char(39) + '59' + char(39) + ',' + char(39) + '66' + char(39) + ')' 
```

但我建议你使用 2 个单引号。

# java - NetBeans：在“晚上”结束时表现怪异

> ID：14545246
> 
> 赞同：0
> 
> 时间：2013-01-27T07:07:48.867
> 
> 标签：java, netbeans

我的标题没有问题，但它是真的。当我`NetBeans`早上运行我的 Java 时，它工作正常。但是在晚上/晚上（没有关闭我的 lappy/neatbeans），几乎没有问题。

当我尝试运行任何程序时，它不会显示我的程序修改后的输出。假设，在我的程序中说“A”，我有一个打印语句说 print(“hi”)，当我将其更改为：print(“bye”) 并运行程序时，它会显示“hi”而不是“bye” ”。它会在第二次运行时向我显示“再见”。

我不知道这个问题是否会被关闭或什么，但这是真实的。有没有人经历过这样的事情？这是因为：

1) 我的 lappy 从早上一直开到深夜，这会引起什么问题吗？

2）我`NetBeans`的从早上开到深夜（任何记忆问题，或什么？）

注意：早上的时候效果很好，请帮我找出错误，它真的很烦人。

**更新：**

使用 Windows 7，NB 6.5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T19:00:07.447

您可以尝试删除缓存（在`C:\Users\yourUserName\AppData\Local\NetBeans\Cache\YourVersionOfNetBeans`并删除它的内容。

然后进行清理并构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:10:39.087

在对代码进行任何更改后，尝试、清理和构建。您可能更改了自动保存选项。

您最后提到的两个可能原因根本无效。

# cordova - 移动设备上的 authClient

> ID：14545253
> 
> 赞同：0
> 
> 时间：2013-01-27T07:08:55.507
> 
> 标签：cordova, firebase

我对 Firebase 的身份验证客户端有疑问。我已将 Firebase 的登录系统设置为在 Chrome 中完美运行，但是当我开始为移动设备使用模拟器时，它开始引起问题。我知道我需要设置身份验证客户端的“应用程序域”部分，以便它知道允许哪些域，但是我应该为移动应用程序添加什么？

我所有的数据存储都直接来自 Firebase 本身，所以我不知道我需要添加哪个域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:59:06.627

[Firebase 工程师] 我想提供一个简短的更新。Firebase 最近发布了一些更新，添加了对 Adob​​e PhoneGap / Apache Cordova 的全面支持，包括完全支持 Facebook、Twitter、GitHub 和电子邮件/密码身份验证方法的 Firebase 简单登录。

查看[https://www.firebase.com/blog/2013-04-16-firebase-adds-phonegap-cordova-support.html](https://www.firebase.com/blog/2013-04-16-firebase-adds-phonegap-cordova-support.html)上的博客文章了解更多信息！

# jquery - 如何使用 jquery ajax 调用为 web 服务传递用户名和密码？

> ID：14545254
> 
> 赞同：4
> 
> 时间：2013-01-27T07:09:00.123
> 
> 标签：jquery, ajax, web-services

我有一个网络服务；为了访问它，我需要使用凭据。我想在另一个项目中使用**jQuery AJAX 调用来调用 Web 服务。**那么如何使用该方法为该 Web 服务传递用户名和密码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:12:09.597

这是[$.ajax](http://api.jquery.com/jQuery.ajax/)的文档。这也有许多额外的参数。当您需要任何额外的东西时，请遵循文档。

```
$.ajax({
     type: 'POST',
     url:   'https://webservice url',
     data: ({ username: value, password: value; }) //use parameters as such defined in webservice
     success: function(data){

       }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T14:46:50.917

```
$.ajax({
    type: 'GET',
    url: 'url',
    dataType: 'json',
    //whatever you need
    beforeSend: function (xhr) {
        xhr.setRequestHeader('Authorization', make_base_auth(user, password));
    },
    success: function () {});
});

function make_base_auth(user, password) {
    var tok = user + ':' + password;
    var hash = btoa(tok);
    return 'Basic ' + hash;
} 
```

# ruby-on-rails - 为什么这个“片段缓存”不起作用？

> ID：14545262
> 
> 赞同：0
> 
> 时间：2013-01-27T07:10:18.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

我刚刚尝试在加载 example.com/communities?sort=popular 时实现缓存

我的代码就是这样。但是，似乎缓存不起作用。
看起来它每次重新加载时仍在发送 SQL...

怎么了？然后当用户制作或编辑“社区”记录后，我想清除所有包含字符串“community_index_sort_by_”的存储缓存。

**配置/环境/development.rb**

```
...
config.consider_all_requests_local       = true
config.action_controller.perform_caching = true
config.cache_store = :dalli_store
... 
```

**community_controller.rb**

```
def index

    @key = "community_index_sort_by_" + params[:sort].to_s + "_page_" + params[:page].to_s

    if params[:sort] == 'popular'
        unless read_fragment(:controller => "communities", :action => "index",  :action_suffix => @key)
            @communities = Community.scoped.page(params[:page]).order("cached_votes_up DESC")
        end
    elsif params[:sort] == 'latest'
        @communities = Community.scoped.page(params[:page]).order("created_at DESC")
    end

end 
```

我没碰过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:25:58.707

您显示的代码仅尝试从缓存中读取，它从不存储任何内容。如果您想在没有找到值的情况下填充缓存（例如，在缓存未命中时），您可以使用[`Rails.cache.fetch`](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html#method-i-fetch)而不是`read_fragment`. `fetch`如果存在，将返回缓存值。否则，如果一个块被传递，那么它将在发生缓存未命中时运行，并且返回值将存储在缓存中。例如，您的代码片段的相关部分将类似于

```
@communities = Rails.cache.fetch(["communities", "index", @key]) do
  Community.scoped.page(params[:page]).order("cached_votes_up DESC")
end 
```

修改对象时使缓存数据过期的推荐方法是让缓存键包含一些在对象被修改时更改的数据。这通常是一个`updated_at`时间戳字段，ActiveRecord 将在保存对象时自动更新。`updated_at`当对象直接用作缓存键的一部分时，该字段还具有自动用作缓存键的一部分的优点（例如，缓存键`@community`会导致缓存键类似于`communities/1-20130116113736`）。这通常需要进行少量重组以确保相关对象可用于缓存键中。David Heinemeier Hansson[对此进行了更详细的讨论](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)。尤其是第 5 步与我在这里提到的最相关。

# php - 显示下拉优先级中的值

> ID：14545266
> 
> 赞同：0
> 
> 时间：2013-01-27T07:10:38.420
> 
> 标签：php, mysql

我有一个下拉列表，其中有不同的位置，根据这个位置下拉列表，我显示了属于各个位置的代理。现在我已经为一个位置分配了一个代理，所以分配的代理应该最后显示在下拉列表中。我不知道如何做到这一点。请帮忙。LIKE FIFO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:16:52.037

一种（不是很有效）的方法，基于没有您的任何代码......

```
print "<select id="whatever">;
foreach ($arrAgents as $arrAgent) {
    if (empty($arrAgent['location'])) {
        printf('<option value="%s">%s</option>', $arrAgent['name'], $arrAgent['name']);
    }
}
foreach ($arrAgents as $arrAgent) {
    if (!empty($arrAgent['location'])) {
        printf('<option value="%s">%s</option>', $arrAgent['name'], $arrAgent['name']);
    }
}
print "</select>"; 
```

假设您正在处理一个数组，一个更好的方法是根据`location`元素对数组进行排序。这可能需要使用[uasort](http://php.net/manual/en/function.uasort.php)进行用户定义的排序。

# java - 通用枚举/枚举集问题

> ID：14545267
> 
> 赞同：1
> 
> 时间：2013-01-27T07:11:07.247
> 
> 标签：java, generics, enums, enumset

我有一个定义如下的类和函数：

```
public class Site {
    public EnumSet<?> contents;

    public void determineStates(Site a, Site b) {
        this.contents.clear();
        this.contents.addAll(a.contents);
        this.contents.addAll(b.contents);
        a.contents.removeAll(b.contents);
        this.contents.removeAll(a.contents);
    }
} 
```

对于这两个 addAll 操作，Eclipse 都给我以下错误消息：

```
The method addAll(Collection<? extends capture#6-of ?>) in the type AbstractCollection<capture#6-of ?> is not applicable for the arguments (EnumSet<capture#7-of ?>) 
```

本质上，我需要某种形式的`Enum`泛型，而我只是对似乎存在的限制感到沮丧。我有许多`Enum`不兼容的类型，但我想要一些可以容纳任何类型的容器。

我认识到在这段代码中无法确定`a`,`b`和`contents`都是同一`Enum`类型，但是在实际实现中这应该没有问题。

解决我的一般`Enum`问题的任何想法和可能的方法都是有价值的，我将非常感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T07:45:00.003

Site 类应该是通用的：

```
public class Site<E extends Enum<E>> {
    public EnumSet<E> contents;

    public void determineStates(Site<E> a, Site<E> b) {
        this.contents.clear();
        this.contents.addAll(a.contents);
        this.contents.addAll(b.contents);
        a.contents.removeAll(b.contents);
        this.contents.removeAll(a.contents);
    }
} 
```

# sql - 如何在 SQL Server 2008 中删除 mdf 和 ldf 文件？

> ID：14545269
> 
> 赞同：4
> 
> 时间：2013-01-27T07:11:36.397
> 
> 标签：sql, sql-server-2008

我有这个代码：

```
IF EXISTS (SELECT * FROM sys.sysdatabases WHERE name='MyDatabase')
begin
   DROP database MyDatabase
end
Go

CREATE DATABASE MyDatabase 
```

但我在执行此查询后看到此错误：

> *无法创建文件“C:\Program Files\Microsoft SQL Server\MSSQL10.FARASQL\MSSQL\DATA\MyDatabase.mdf”*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T07:18:54.753

当您尝试使用它时，您的数据库很可能处于脱机状态`DROP`。在这种情况下，SQL Server 将 db 文件留在文件系统上。是故意的行为。

根据[DROP DATABASE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms178613.aspx)

> 删除数据库会从 SQL Server 实例中删除数据库，并删除数据库使用的物理磁盘文件。**如果数据库或其任何文件在删除时处于脱机状态，则不会删除磁盘文件。**可以使用 Windows 资源管理器手动删除这些文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-23T01:52:14.417

删除数据库只是使其脱机。您需要手动删除 mdf 和 ldf 文件（[请参阅此处](https://dba.stackexchange.com/questions/49811/location-of-the-mdf-file-of-the-database)了解如何找到它们）；然后参考这张图片：

![](../Images/4235cc877f1edfbf6f3315ea6a442633.png)

之后，您可以重新创建数据库。

# java - 查找整数数组的总和而不溢出

> ID：14545272
> 
> 赞同：4
> 
> 时间：2013-01-27T07:11:58.187
> 
> 标签：java, algorithm

给定一个整数数组（正数和负数），每个整数最多有 K 位（加上符号位），并且已知数组中所有整数的和也最多有 K 位（加上符号位） . 设计一种算法，计算数组中整数的总和，所有中间和最多也有 K 位（加上符号位）。[提示：找出你应该按什么顺序添加正数和负数]。

这是面试材料中的一个问题，不是家庭作业

我实际上正在考虑创建两个单独的数组，一个用于正数，另一个用于负数，对它们进行排序，然后将两者相加，以便将大多数负数添加到最正数...但这似乎具有 O(nlogn) 时间复杂度（到排序）和O（n）空间复杂度>请帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T07:42:43.280

首先要注意，即使让即时结果溢出，如果能表示出来，最终结果总是正确的。这是因为在包括 Java 在内的大多数语言中，任何大小的整数类型都类似于循环组（不是在 C 中，其中整数溢出是未定义的行为，而在 C# 中，它能够抛出溢出异常）。

如果您*仍*想防止溢出，以下是如何在原地和线性时间内执行它：

*   将数组就地拆分为其负条目（以任何顺序）和其正条目（以任何顺序）。零可以在任何地方结束。换句话说，在枢轴为零的情况下执行一个快速排序步骤。

*   让`ni`指向数组的开头（负条目所在的位置）。

*   让`pi`指向数组的末尾。
*   设为`sum`零。
*   尽管`pi >= ni`

    *   如果`sum`是负数
        *   添加`arr[pi]`到`sum`.
        *   如果`arr[pi]`为负（我们已经用完了正加数）并且`sum`为正（发生溢出），则结果溢出。
        *   递减`pi`
    *   别的
        *   添加`arr[ni]`到`sum`.
        *   if`arr[ni]`为正且`sum`为负，结果溢出。
        *   增量`ni`。
*   最后，检查是否`sum`有多个`K`位。如果是，则声明结果溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T09:28:04.710

主要思想是使用两个索引迭代数组：正元素和负元素。当总和为负时，我们将搜索下一个正元素（使用相应的迭代器）以添加到总和中，否则 - 为负元素。

此代码应该可以工作：

```
public final class ArrayAdder {
  @NotNull
  private final int[] array;

  private int sum;

  public ArrayAdder(@NotNull int[] array) {
    this.array = array;
  }

  public int sum() {
    sum = 0;

    final IntPredicate positive = v -> v > 0;
    final Index positiveIndex = new Index(positive);
    final Index negativeIndex = new Index(positive.negate());

    while (positiveIndex.index < array.length || negativeIndex.index < array.length) {
      sum += sum < 0 ? sum(positiveIndex, negativeIndex) : sum(negativeIndex, positiveIndex);
    }

    return sum;
  }

  private int sum(@NotNull Index mainIndex, @NotNull Index secondaryIndex) {
    int localSum = 0;
    // searching for the next suitable element
    while (mainIndex.index < array.length && secondaryIndex.sign.test(array[mainIndex.index])) {
      mainIndex.index++;
    }

    if (mainIndex.index < array.length) {
      localSum += array[mainIndex.index++];
    } else {
      // add the remaining elements
      for (; secondaryIndex.index < array.length; secondaryIndex.index++) {
        if (secondaryIndex.sign.test(array[secondaryIndex.index])) {
          localSum += array[secondaryIndex.index];
        }
      }
    }
    return localSum;
  }

  private static final class Index {
    @NotNull
    private final IntPredicate sign;

    private int index;

    public Index(@NotNull IntPredicate sign) {
      this.sign = sign;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T07:14:35.183

选项 1：就地对数组进行排序并迭代其中的一半。在每一步，将第`i`th 元素与第`size-i-1`th 元素相加。

如果有一些大数字但有很多小的负数（反之亦然），则不起作用。

选项 2（改进）：

就地排序。

保留两个索引 - 一个在开头，一个在结尾。当他们相遇时退出一个循环。如果到目前为止的结果是负数，则在每一步中添加第二个索引处的值并推进它。如果结果是肯定的，则在第一个索引处添加值并推进它。

# ruby - Sinatra 只识别第一个 GET 参数

> ID：14545276
> 
> 赞同：0
> 
> 时间：2013-01-27T07:12:19.730
> 
> 标签：ruby, sinatra, rack

我有一个简单的 Sinatra 应用程序。当我做：

```
curl localhost:4567/api/shows?limit=1&page=2 
```

我只在 Sinatra 日志中看到这个：

```
{"limit"=>"1"} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:31:58.660

我需要在 curl 中的 url 周围加上引号。所以它会是：

```
curl 'localhost:4567/api/shows?limit=1&page=2' 
```

原因：`&`意味着在后台运行您之前输入的任何命令作为命令，这就是它不起作用的原因。

# facebook - 如何通过钛将我的 iphone 应用程序中的数据提交到我的 Facebook 墙上

> ID：14545279
> 
> 赞同：0
> 
> 时间：2013-01-27T07:12:56.820
> 
> 标签：facebook, titanium, dom-events, titanium-mobile

我是钛新手。我用钛制作了显示产品列表的 iPhone 应用程序。如果单击它，它会像每个普通应用程序一样带来详细信息页面。如果我想将产品详细信息从我的应用程序提交到我的 Facebook 墙，我需要了解流程。我研究了钛的 Facebook API，但我对这个过程有点困惑，因为我是钛和 Facebook 应用程序的新手。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:11:41.850

您可以在 Titanium Kitchen Sink 示例应用程序中找到内置的 facebook 集成。这是git存储库的链接

[钛厨房水槽 Facebook 示例](https://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/common/mashups/facebook_publish_stream.js)

# android - 自动更新 Android 应用程序，无需询问用户

> ID：14545283
> 
> 赞同：1
> 
> 时间：2013-01-27T07:13:50.120
> 
> 标签：android, auto-update

再会，

如何在不询问用户的情况下执行 Android 应用程序的自动更新？

应用不在 Google Play 中。

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T10:55:23.793

[仅供参考，我刚刚在http://blog.vivekpanyam.com/evolve-seamless-deploy-android-apps-to-users/?hn](http://blog.vivekpanyam.com/evolve-seamlessly-deploy-android-apps-to-users/?hn)读到了这个

> Evolve 是一个供 Android 开发人员使用的库，让他们无需通过 Google Play 或要求用户下载更新即可部署新版本的应用程序。它通过使用反射和动态字节码生成来“欺骗”Android 运行新代码。

此外，[Update an Android app (without Google Play)](https://stackoverflow.com/questions/15213211/update-an-android-app-without-google-play)中的解决方案似乎允许在没有 Play 商店的情况下更新应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:14:06.833

出于安全原因，您不能在无根的 Stock Android 设备上静默安装应用程序。[Dianne（谷歌员工）在这里](https://groups.google.com/d/msg/android-developers/B7zKbvySHkU/Z3dSi3edD6AJ)甚至清楚地说明了这一点。

# eclipse - 在 Eclipse 中找不到 JSTL 核心库描述符错误

> ID：14545285
> 
> 赞同：2
> 
> 时间：2013-01-27T07:13:56.090
> 
> 标签：eclipse, jsp, jakarta-ee, jstl, taglib

我收到以下错误：

![在此处输入图像描述](../Images/7696a4777b784e435e7e9ec39316284a.png)

我拥有的 taglib 声明：

```
 <%@ taglib prefix="s" uri="http://java.sun.com/jsp/jstl/core" %> 
```

如上所示，我还在我的项目库文件夹中包含了 jstl.jar。那么还有什么其他可能的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T03:26:46.293

1.  删除 JSP 文件中当前拥有的所有指令，并删除`jstl.jar`and `standard.jar`.
2.  [在此处](http://search.maven.org/remotecontent?filepath=javax/servlet/jsp/jstl/javax.servlet.jsp.jstl-api/1.2.1/javax.servlet.jsp.jstl-api-1.2.1.jar)下载 JSTL 的最后一个 JAR ，并将其放在您的`/WEB-INF/lib`文件夹中。
3.  **在您的taglib**指令中使用以下 URI 。

JSTL 核心指令：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T12:50:19.743

我遇到了同样的问题，解决方案是从 uri 中删除“/jsp”：

"<%@ taglib uri="http://java.sun.com/jstl/core" 前缀="c" %>"

就我而言，我还必须将“jstl/core”更改为“jstl/core_rt”

问候。

# hadoop - 如何处理hadoop中的大地图输出？

> ID：14545287
> 
> 赞同：0
> 
> 时间：2013-01-27T07:14:01.737
> 
> 标签：hadoop

我是 hadoop 的新手，我正在使用集群中的 3 个节点（每个节点都有 2GB RAM）。输入文件很小（5 MB），但地图输出非常大（大约 6 GB）。

在地图阶段，我的内存变满了，任务运行得很慢。它的原因是什么？

谁能帮助我如何使我的程序更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:36:59.590

使用 NLineInputFormat ，其中 N 是指每个映射器将接收的输入行数。通过这种方式，您可以创建更多的拆分，从而将较小的输入数据强制分配给每个映射器任务。如果没有，整个 5 MB 将进入一个 Map 任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T19:59:43.420

map 输出的大小本身不会导致内存问题，因为 mapper 可以在“流”模式下工作。它使用记录，处理它们并写入输出。Hadoop 会在内存中存储一​​些数据，然后将其溢出到磁盘。
所以你的问题可能是由以下两者之一引起的：
a）你的映射器算法在处理过程中以某种方式积累数据。b) 给映射器的累积内存小于节点的 RAM。然后操作系统开始交换，您的性能可能会下降几个数量级。

情况 b 的可能性更大，因为 2 GB 实际上对于通常的 hadoop 配置来说太少了。如果您要处理它 - 我建议配置 1 个，每个节点最多 2 个映射器插槽。

# cookies - 如何延长用户上次活动的 Cookie 有效期？

> ID：14545295
> 
> 赞同：2
> 
> 时间：2013-01-27T07:15:05.557
> 
> 标签：cookies, extend

如何从用户完成的最后一项活动中延长 cookie 的到期日期？

举个例子，默认情况下，cookie设置为用户登录后30分钟。userA 在下午 1 点登录，因此给定的 cookie 将在下午 1.30 过期。

这种情况的问题是，如果用户 A 在应用程序中执行一些非常重要的活动，那么当他单击任何内部链接上的提交表单时，他将被重定向到登录。因此，他失去了他已经完成的工作。

我想要的是当用户 A 在下午 1 点（第一次活动）登录时，首先，cookie 将在下午 1.30 过期。在那个用户A空闲之后，这意味着他没有点击任何地方，他只是离开他的电脑并在15分钟后再次回来，即在下午1.15开始使用php门户，然后cookie到期应该变成下午1.45

怎么做？我发现脚本 PHPmyadmin 做了同样的事情。当用户处于非活动状态超过 1440 秒时，它会导致 cookie 过期。

# android - 当我指定横向时，如何防止 Android Activity 短暂进入纵向模式？

> ID：14545296
> 
> 赞同：8
> 
> 时间：2013-01-27T07:15:19.223
> 
> 标签：android

我已指定我的 Activity 应固定为横向，这在大多数情况下都有效。 ***具体来说，当 Activity 已经在运行，并且我从 Eclipse 启动它的新实例时***，Activity 以 Portrait 启动并立即更改为 Landscape——但不是在 View 已经被告知它是 Portrait 之前。 ***所以我的 View 被初始化为 Portrait，但立即得到一个 surfaceChanged。***

我的清单中指定了以下内容：

```
 <activity android:screenOrientation="landscape"
        android:configChanges="orientation|keyboardHidden" 
```

我也试过：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

当我瞄准 API 级别 7 时，我相信这很好用。现在我针对 API level8，出现了一个奇怪的怪癖。

在 oncreate 方法中，值为：

```
getResources().getConfiguration().orientation 
```

是：

```
Configuration.ORIENTATION_PORTRAIT 
```

创建活动后，方向立即更改为横向，我收到一个`surfacechanged`，我可以“修复”一切。但为什么它永远是肖像？

我怀疑这与应用程序在从纵向屏幕启动时自动旋转的事实有关。被指示永远不要纵向的应用程序以这种方式启动，然后迅速改变，这似乎很奇怪。

但是，有没有办法让它永远不会出现在肖像中？

我把它放在我的活动中`onCreate`：

```
while (getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE) 
{
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
} 
```

这导致它永远卡在那里:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:52:51.607

将此添加到您的活动中：

```
@Override 
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);     
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T07:28:59.833

在你的清单中定义方向。

屏幕方向=“风景”

或者

在活动中的 setContentView(...) 之前设置 setRequestOrientation(...)。

# c++ - STL 函数/Boost 函数 typedef 错误

> ID：14545297
> 
> 赞同：1
> 
> 时间：2013-01-27T07:15:26.320
> 
> 标签：c++, templates, alias, typedef

我试图弄清楚如何在 boost 函数和 c++11 函数之间切换，具体取决于我编译它的平台可用。我知道 c++ 没有模板别名（c++11 之前），所以我写了以下内容，但我无法理解错误消息或为什么它不起作用：

```
#define FUNCTION_Boost

#if defined(FUNCTION_Boost)
   #include <boost/function.hpp>
#elif defined(FUNCTION_STL)
   #include <functional>
#endif

template<typename Res, typename... ArgTypes>
struct function {
   #if defined(FUNCTION_Boost)
   typedef boost::function<Res(ArgTypes...)> type;
   #elif defined(FUNCTION_STL)
   typedef std::function<Res(ArgTypes...)> type;
   #endif
};

// In instantiation of ‘function<void()>’:
// error: function returning a function
void foo(function<void ()>::type f) {
   f();
}

// this works fine
void bar(boost::function<void ()> f) {
   f();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:28:00.787

我的印象是这段代码没有做你认为它做的事情：

```
 typename function<void ()>::type 
```

将“void ()”绑定为 Res，只是创建了一个返回函数的函数。

关于什么：

```
...

void foo(typename function<void >::type f) {
   f();
}

... 
```

?

您可以获得类似于您试图通过 boost::type_traits 和 boost::type_traits::function_traits 特别获得的别名。也就是说，我怀疑如果您想要一个简单且可移植的解决方案，那么最简单的方法是使用 boost 并等待 C++ 编译器和对 C++11 的 STL 支持的更好时机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T07:42:50.317

无需再定义一个`function`......一切都可以使用`using`;）

```
#define USE_BOOST_FUNCTION

#ifdef USE_BOOST_FUNCTION
# include <boost/function.hpp>
# define FUNCTION_NS boost
# else
#  include <functional>
# define FUNCTION_NS std
# endif

#include <iostream>

namespace test {
using FUNCTION_NS::function;
}

int main()
{
    test::function<void()> f = [](){ std::cout << __PRETTY_FUNCTION__ << std::endl; };
    f();
    return 0;
} 
```

# postgresql - 连接到亚马逊 ec2 上的远程 postgresql 服务器

> ID：14545298
> 
> 赞同：10
> 
> 时间：2013-01-27T07:15:33.140
> 
> 标签：postgresql, amazon-web-services, amazon-ec2, postgresql-9.1

我启动了一个 amazon ec2 实例，并在其上安装了 postgresql 9.1。然后我去了安全组：quicklaunch-1 `(there was one more`default`，我没有更改）并打开 5432 TCP 端口，表格如下所示：

```
(Service)   Source  Action
22        0.0.0.0/0         Delete
5432      0.0.0.0/32    Delete
5433      0.0.0.0/32    Delete
6432      0.0.0.0/32    Delete 
```

我创建了一个数据库和用户。我的`/etc/postgresql/9.1/main/pg_hba.conf`样子是这样的：

```
# Database administrative login by Unix domain socket
local   all             postgres                                peer

# TYPE  DATABASE        USER            ADDRESS                 METHOD
host    all             all             0.0.0.0/0               md5
host    db_name         user_name       0.0.0.0/0               md5

# "local" is for Unix domain socket connections only
local   all             all                                     peer
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
host    replication     postgres        127.0.0.1/32            md5
host    replication     postgres        ::1/128                 md5 
```

和**/etc/postgresql/9.1/main/postgresql.conf**看起来像这样：

```
# - Connection Settings -
listen_addresses = '*'
#listen_addresses = 'localhost'         # what IP address(es) to listen on;
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost', '*' = all
                                        # (change requires restart)
port = 5432                             # (change requires restart) 
```

然后我尝试连接到远程机器，如下所示：

```
psql -h ec2-xxx-xx-xxx-xxx.compute-1.amazonaws.com -d <database_name> -U <username> 
```

其中**ec2-xxx-xx-xxx-xxx.compute-1.amazonaws.com**是我的**Public DNS**。

上面的命令没有任何连接，我该如何连接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T13:51:11.110

在此表中：

```
5432      0.0.0.0/32    Delete
5433      0.0.0.0/32    Delete
6432      0.0.0.0/32    Delete 
```

CIDR 看起来您不允许任何 IP 进入。难道不应该`0.0.0.0/0`像您对端口 22 (ssh) 所拥有的那样吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-05T12:40:25.053

我找到了解决这个问题的方法。需要两件事。

1.  使用文本编辑器修改 pg_hba.conf。找到所有 127.0.0.1/0 md5 的行主机。在它下面，添加这个新行：host all all 0.0.0.0/0 md5

2.  编辑 PostgreSQL postgresql.conf 文件：

    使用文本编辑器修改 postgresql.conf。找到以#listen_addresses = 'localhost' 开头的行。通过删除 # 取消注释该行，并将 localhost 更改为`*`. 该行现在应该如下所示：`listen_addresses = '*'` # 要监听的 IP 地址；。

现在只需重新启动您的 postgres 服务，它就会连接

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-19T21:39:15.137

您的 psql 命令需要添加 -W 选项，它允许您输入 db 用户的密码和 -p 选项，后跟 postgres 端口号（默认为 5432）

干杯！

# codeigniter - 两个应用程序之间的 Code Igniter 通信和数据交换

> ID：14545299
> 
> 赞同：0
> 
> 时间：2013-01-27T07:15:44.297
> 
> 标签：codeigniter

我有两个服务器 alpha 和 beta 都是开发服务器的基本思想是 alpha 服务器应该承认 beta 并且 beta 服务器应该开始从 alpha 下载文件到 beta。我必须使用codeigniter，php来做到这一点。我应该如何着手开始开发应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:08:06.000

因此，为了澄清，您将数据存储在您希望 beta 定期提取的 alpha 上 - 这是正确的吗？

如果是这样，您希望这由用户自动完成还是手动完成？如果您希望它自动化，您可以使用[CodeIgniter CLI](http://ellislab.com/codeigniter/user-guide/general/cli.html)通过系统的 crontab 调用 CoedIgniter 控制器。我一直这样做是为了运行夜间清理和批量处理工作。

您是要提取实际文件还是仅提取原始数据？

# android - Phonegap 导航

> ID：14545301
> 
> 赞同：1
> 
> 时间：2013-01-27T07:15:49.227
> 
> 标签：android, cordova

我对如何构建我的 phonegap 应用程序感到困惑。

我是否使用单页应用程序，其中我使用 ajax 加载相关视图？或者我应该使用许多本地 html 文件并使用 href 标签在它们之间继续导航？此外，window.location 似乎在浏览器窗口中加载了第二页，这是不可取的。我想让我的整个应用程序在同一个 webview 中运行。

如何在使用 javascript 在页面之间导航时保​​持在同一个 webview 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:21:49.110

尝试使用诸如骨干网或 sencha touch 之类的 JavaScript 框架。Jquery-mobile 可以工作，但所有内容都将封装在一个页面上

# javascript - 是什么让 Twitter 页面之间的导航如此之快？

> ID：14545302
> 
> 赞同：1
> 
> 时间：2013-01-27T07:15:51.910
> 
> 标签：javascript, ajax, twitter, navigation

前几天我在 Twitter，我打开 chrome devtools 并进入网络控制台，然后点击 Twitter 上的一个链接（特别是菜单栏上写着“我”的那个），然后和往常一样，页面并没有真正再次加载，它似乎是 AJAX 化的，但后来我查看了网络内容，我看到的只是一些图像和一些 javascript 文件。

除非 Twitter 在加载主页时从“我”页面加载内容（我非常怀疑，因为 Twitter 的加载速度也非常快），是什么让 Twitter 页面之间的导航如此之快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:27:19.890

像所有 JS 应用程序一样，您看到的页面只是“视图”。您在同一页面上，通过 AJAX 加载内容，然后 JS 使用模板呈现数据以形成该视图。

这是一个场景：当您打开一个干净的浏览器并转到 Twitter 的时间线时，所有内容都会加载。这还包括呈现后续页面所需的所有脚本。

现在，当您转到另一个页面时，例如“我”，Twitter 还没有该页面的资源。因此，它通过 AJAX 加载所需的资源，以像所有数据一样呈现“我”页面，以及它的模板。加载后，它会渲染数据并与模板一起形成“我”页面。

现在，当*您返回*时间线时，Twitter 从未丢弃时间线数据，而是将其缓存（最好是本地存储）。**因此，回到时间线（或任何访问过的页面）只是读取缓存数据、缓存模板并将视图重新渲染到页面上的问题。根本不需要网络请求。**

您还注意到，新数据是通过从服务器查询新推文而不是全部取回来增量检索的。只有当页面确定它需要一组新数据时，它才会查询一堆数据。

此外，JSON 数据比加载普通页面轻一百万倍（夸大其词）。

# java - 如何比较两个ArrayList >

> ID：14545303
> 
> 赞同：4
> 
> 时间：2013-01-27T07:15:51.717
> 
> 标签：java, arrays, arraylist

我想比较这两个`ArrayList`：

```
public static ArrayList<List<String>> arrayList1 = new ArrayList<List<String>>();
public static ArrayList<List<String>> arrayList2 = new ArrayList<List<String>>(); 
```

如果它们具有相同的元素，它将返回 true，否则返回 false。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T07:26:26.237

你有没有尝试过

```
 arrayList1 .equals ( arrayList2 ) 
```

这是真的，如果它们以相同的顺序包含相同的元素

或者

```
new HashSet(arrayList1) .equals (new HashSet(arrayList2)) 
```

如果订单无关紧要

见[http://www.docjar.com/html/api/java/util/AbstractList.java.html](http://www.docjar.com/html/api/java/util/AbstractList.java.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T07:23:11.863

您可以尝试使用 Apache commons [CollectionUtils.retainAll](http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/CollectionUtils.html#retainAll%28java.util.Collection,%20java.util.Collection%29)方法：返回一个集合，其中包含 collection1 中的所有元素，这些元素也在 collection2 中。

```
ArrayList commonList = CollectionUtils.retainAll(arrayList1, arrayList2); 
```

如果 commonList 的大小等于　`arrayList1`　并且`arrayList2`您可以说两个列表相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:41:55.333

我认为你可以自己做，没有任何依赖。

```
public class ListComparator<T> {

    public Boolean compare(List<List<T>> a, List<List<T>> b) {
        if (a.size() != b.size()) {
            return false;
        }
        for (int i = 0; i < a.size(); i++) {
            if (a.get(i).size() != b.get(i).size()) {
                return false;
            }
            for (int k = 0; k < a.get(i).size(); k++) {
                if(!a.get(i).get(k).equals(b.get(i).get(k))) {
                    return false;
                }
            }
        }
        return true;
    }

} 
```

并使用

```
 ListComparator<String> compare = new ListComparator<String>();
  System.out.println(compare.compare(arrayList1, arrayList2)); 
```

我不使用 foreach 语句，因为我读过这篇文章[http://habrahabr.ru/post/164177/](http://habrahabr.ru/post/164177/) （俄语），但你可以将其翻译成英文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T10:17:40.253

使用以下代码。这将检查两个列表是否具有相同的元素。-->> list1.equals(list2)

# c# - 如何从可移植类库中获取屏幕大小？

> ID：14545304
> 
> 赞同：1
> 
> 时间：2013-01-27T07:16:02.887
> 
> 标签：c#, .net, portable-class-library

所以在一个普通的 .net 程序集中我可以访问`SystemInformation.VirtualScreen`. 这将如何在 PCL 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:41:07.277

这就是我要做的：

1.  `IVirtualScreen`在你的 PCL 项目中引入一个抽象
2.  在您的桌面类库（它引用 PCL 项目）中，提供一个适配器类以将其映射`SystemInformation.VirtualScreen`到您的 IVirtualScreen 接口。
3.  在引导您的桌面应用程序时，将特定于平台的版本注册到您的 IoC 容器中。

    ```
    // in your PCL project
    public interface IVirtualScreen {
         Rectangle Current { get; 
    }

    // in your desktop project
    public interface DesktopScreen : IVirtualScreen {
       public Rectangle Current { 
         get {
            return System.Windows.Forms.SystemInformation.VirtualScreen;
       }
    } 
    ```

但这引出了一个问题：这是您在 PCL 项目中需要的东西吗？

由于 UI 技术（WinForms/WPF/SL/WP7/WP8/WinRT）之间的根本差异，您最终可能会做很多特定于平台的事情，虽然您*可以*为移动应用程序插入不同的 IVirtualScreen 实现，但是否存在这样做的价值？

# sql - 使用 django 在 postgres 中将左连接的结果转换为布尔值

> ID：14545308
> 
> 赞同：0
> 
> 时间：2013-01-27T07:16:48.237
> 
> 标签：sql, django, postgresql, left-join, django-queryset

现场：

我以这种方式拥有三个模型：

```
class Person(models.Model):
    ....

class Affiliate(models.Model):
     persona = models.OneToOneField('Person', primary_key=True, db_column='id', parent_link=True, related_name='afiliado')
     ...

class Referred(models.Model):
     persona = models.OneToOneField('Person', primary_key=True, db_column='id', parent_link=True, related_name='referido')
     ... 
```

**我需要序列化一些查询，我可以在其中说明此人是附属机构还是被推荐人。**

在我的第一次尝试中，我构建了类似的东西：

```
 Person.objects.all().values_list('afiliado__pk') #this is because of the related_name in the relation 
```

抛出这个 SQL：

```
 SELECT `afiliado`.`id` FROM `persona` LEFT OUTER JOIN `afiliado` ON (`persona`.`id` = `afiliado`.`id`) 
```

结果是：

```
[(None,), (2,), (3,), (4,), (5,), (6,), (7,), (8,), (9,), (10,), (11,), (12,), (13,), (14,), (15,), (16,), (17,), (18,), (19,), (20,), '...(remaining elements truncated)...'] 
```

**我想要类似的东西：**

```
[(False,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), (True,), '...(remaining elements truncated)...'] 
```

如果左连接的结果为空，则为 False，如果左连接的结果是记录的 id，则为 True。

此外，我尝试了类似的东西：

qs = Persona.objects.all().extra(select={'es_afiliado':"cast( `afiliado`. `id`as boolean)"}).values_list('es_afiliado','afiliado__pk')

但我得到了这个错误：

```
DatabaseError: syntax error at or near "."
LINE 1: SELECT (cast(`afiliado`.`id` as boolean)) AS "es_afiliado", ... 
```

所以，如果你们知道通过 django 获得这个的任何方法，或者甚至在 postgres 中使用额外的或至少是普通的 SQL 语句会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:23:46.023

您需要做的就是将输出转换为布尔值。您的查询：

```
SELECT COALESCE(afiliado::boolean, false), COALESCE(id::boolean, false) 
FROM `persona` 
LEFT OUTER JOIN `afiliado` ON (`persona`.`id` = `afiliado`.`id`); 
```

# sql-server - 从字符串“INSERT INTO Products_Archive VAL”到类型“Double”的转换无效

> ID：14545311
> 
> 赞同：1
> 
> 时间：2013-01-27T07:17:22.320
> 
> 标签：sql-server, vb.net

这是我的 sql 命令：

```
 sqlcom1 = New SqlCommand("INSERT INTO Products_Archive VALUES ('" + arno1 + "','" +
    ds.Tables("Products").Rows(myval).Item(0) + "','" + 
    ds.Tables("Products").Rows(myval).Item(1) + "','" + 
    ds.Tables("Products").Rows(myval).Item(2) + "','" + 
    ds.Tables("Products").Rows(myval).Item(3) + "','" + 
    ds.Tables("Products").Rows(myval).Item(4) + "','" + 
    ds.Tables("Products").Rows(myval).Item(5) + "'," + 
    ds.Tables("Products_Archive").Rows(myval).Item(6) + "," + 
    ds.Tables("Products_Archive").Rows(myval).Item(7) + ",'" + 
    ds.Tables("Products").Rows(myval).Item(8) + ",'" + 
    ds.Tables("Products").Rows(myval).Item(9) + "'," + 
    ds.Tables("Products").Rows(myval).Item(10) + "," + 
    ds.Tables("Products").Rows(myval).Item(11) + "," + 
    ds.Tables("Products").Rows(myval).Item(12) + "," + 
    ds.Tables("Products").Rows(myval).Item(13) + "," + 
    ds.Tables("Products").Rows(myval).Item(14) + ")", con1)

 sqlcom1.ExecuteNonQuery() 
```

数据集 6、7、8、10、11、12、13 和 14 的列具有 datatype `bigint`。但是，我总是收到此错误

```
Conversion from string "INSERT INTO Products_Archive VAL" to type 'Double' is not valid. 
```

顺便说一句，我使用 sql server 和 vb.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:04:08.813

在 VB 中，您应该使用`&`而不是`+`连接字符串。

使用`+`，在您的情况下，它（错误地）将您的陈述解释为总和而不是串联。该错误来自将 SQL 语句字符串隐式转换为 a`double`以执行添加。

# sql - 使用当前行值更新变量

> ID：14545316
> 
> 赞同：2
> 
> 时间：2013-01-27T07:18:37.793
> 
> 标签：sql, tsql, variables, subquery, sql-server-2012

我正在尝试执行一个复杂的操作，在该操作中，我提取一整列数据的总和，并从每一行的总和中减去运行小计。我可以单独完成 Sum 和 Running Subtotal 的组成部分。用它来运行小计：

```
sum(UsageMetric) over(order by Nested1.IDNumber) as RunningTotal 
```

但是，尝试合并它们时出现此错误：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

所以我安装了这个，它返回给定行的“独立”运行小计：

```
declare @TargetNumber BIGINT
Set @TargetNumber=(select Nested1.IDNumber from TargetTable Nested1 where Nested1.IdNumber='1234567890' and (Extraneous Criteria Here))

select  sum(Usage.UsageMetric) 
from Table_Usage Usage, IDTable IDT
where IDT.IDNumber <= @TargetNumber
and (Extraneous Criteria Here) 
```

但我真正想做的是能够删除限定符“Nested1.IDNumber='1234567890' 并为 TargetTable 中的每个 IDNumber 执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:07:17.480

如果我理解正确，您可以执行以下操作：

```
sum(UsageMetric) over () -
sum(UsageMetric) over (order by Nested1.IDNumber) as ... 
```

虽然简单地恢复 OVER 子句中的行顺序会产生相同的结果，但我相信：

```
sum(UsageMetric) over (order by Nested1.IDNumber DESC) as ... 
```

# python - pyfluidsynth 导入错误

> ID：14545322
> 
> 赞同：0
> 
> 时间：2013-01-27T07:19:37.300
> 
> 标签：python, jack

在 OSX 10.7.5 上，我运行`port install fluidsynth`并`pip install pyfluidsynth`成功，并且流体合成器在终端上工作。

但`from fluidsynth.fluidsynth import *`输出

```
OSError: dlopen(libfluidsynth.so.1, 6): image not found 
```

有任何想法吗？

# ruby-on-rails-3.2 - 瑞克失败了！错误的常量名 0Bak

> ID：14545330
> 
> 赞同：0
> 
> 时间：2013-01-27T07:21:44.660
> 
> 标签：ruby-on-rails-3.2, rake

在使用 Capistrano 部署后，让我的应用程序成功运行 rake db:migrate 时遇到了真正的问题。该应用程序在开发模式下运行良好，但是当我尝试部署到我的 Ubuntu 12.04 服务器时，我得到以下输出：

```
/var/mdnapp/current$ bundle exec rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:migrate
rake aborted!
An error has occurred, all later migrations canceled:

wrong constant name 0Bak
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/inflector/methods.rb:229:in `const_defined?'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/inflector/methods.rb:229:in `block in constantize'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/inflector/methods.rb:228:in `each'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/inflector/methods.rb:228:in `constantize'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:522:in `load_migration'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:517:in `migration'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:512:in `migrate'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:704:in `block (2 levels) in migrate'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:761:in `call'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:761:in `ddl_transaction'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:703:in `block in migrate'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:684:in `each'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:684:in `migrate'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:554:in `up'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/migration.rb:535:in `migrate'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/railties/databases.rake:153:in `block (2 levels) in <top (required)>'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/var/mdnapp/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/var/mdnapp/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
/var/mdnapp/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
Tasks: TOP => db:migrate 
```

我正在运行：rails 3.2.2 mysql2 0.3.11 ruby​​ 1.9.3

在寻找这方面的答案时，我遇到了一些关于模型不正确的 CamelCase 的评论。我检查了我的，它们在文件名中都是小写的（例如 user.rb），但在类名中它们是 CamelCase。变形器的文档描述了 NameError 并将其定义为：“当名称不在 CamelCase 中或常量未知时引发 NameError。”

[http://www.rubydoc.info/github/rails/rails/master/ActiveSupport/Inflector:constantize](http://www.rubydoc.info/github/rails/rails/master/ActiveSupport/Inflector:constantize)

但我不确定我的代码中还有哪些地方可以查找可能的 CamelCase 错误。我无法弄清楚这是怎么回事。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:15:50.943

好的。我发现了问题。我的 db>migrate 文件夹中有一个名为 backup_migrations 的文件夹。我一定是在某个时候创建​​了它来存储一些我想在修改原件时备份的迁移。此文件夹中的这些迁移之一以原始名称命名，但扩展名为“.0.bak”。无论如何，我删除了 backup_migrations 文件夹，一切都按预期工作。

因此，对于正在为类似“rake aborted！错误的常量名称”而苦苦挣扎的其他人来说，可能需要检查您的迁移文件是否存在命名或驼峰式错误。我希望这对其他人有帮助，花费了我很多时间。事后看来，答案总是显而易见的。

# ruby - 尝试从哈希中提取值时，nil:NilClass 的未定义方法“[]”

> ID：14545332
> 
> 赞同：0
> 
> 时间：2013-01-27T07:22:04.730
> 
> 标签：ruby, ruby-on-rails-3

我是 Ruby 新手，在大多数情况下它开始变得有意义，但后来我遇到了这个问题。

我使用以下方法搜索用户：

```
user = User.find_by_id(user_id) 
```

我可以做到`user.inspect`，它显示为：

```
#<User id: 1, username: "test_user", first_name: "test", last_name: "user"> 
```

但是，当我尝试这样做时：

```
user[:id] 
```

我得到：

```
undefined method `[]' for nil:NilClass 
```

我在看什么？

这是user.rb：

```
class User < ActiveRecord::Base

  # Validations
  validates :first_name, :last_name, :presence => true
  validates :username, :uniqueness => {:allow_blank => true}

  # Setup accessible (or protected) attributes for your model
  default_fields = [:username, :first_name, :last_name]
  attr_accessible *default_fields

  # Instance Methods
  def full_name
    "#{first_name} #{last_name}"
  end
end 
```

此外，如果我这样做：

```
user.to_s 
```

结果是：

```
#<User:0x007fdad09717f8> 
```

这进一步让我相信它不是零，但我无法引用哈希值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:37:52.857

你的第一句话

```
user = User.find_by_id(user_id) 
```

返回一个空对象，因此您需要对此进行测试以避免异常：

```
if( ! user.nil? )
# code with user[:id]    
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:24:05.923

所以问题结果与代码无关，而是与我用来获取“user_id”值的数据库表中的数据有关。这就是我相信其他人会在项目中的所有模型上编写适当的验证所得到的。

这就是帮助我解决这个问题的每个人，如果我不需要创建一个重现该问题的最小示例，我永远不会偶然发现数据库中的错误条目。

所以为了使用[Miguel Prz 的](https://stackoverflow.com/users/546205/miguel-prz)想法，我最终这样做了：

```
user.nil? ? '' : user[:id] 
```

这进一步证明了为什么我永远不应该相信任何人的工作:)

# tidesdk - 当我尝试启动 TideSDK 桌面应用程序时出错（我使用 TideSDK 开发者）

> ID：14545334
> 
> 赞同：0
> 
> 时间：2013-01-27T07:22:30.507
> 
> 标签：tidesdk

我正在尝试启动 hello world 示例，我将 TideSDK 1.3.1-beta 与 Tide SDK Developer 一起使用，我已经安装了所有需要的组件，例如 imagick、wix 和 python 2.7，但是在启动过程中我收到了这个错误：

```
Preparing to package and launch desktop app. One moment...
C:\Python27\\lib\site.py:158: Warning: 'with' will become a reserved keyword in Python 2.6
'import site' failed; use -v for traceback
C:\Python27\\lib\linecache.py:127: Warning: 'with' will become a reserved keyword in Python 2.6
C:\Python27\\lib\linecache.py:127: Warning: 'with' will become a reserved keyword in Python 2.6
Traceback (most recent call last):
File "C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\tidebuilder.py", line 36, in
import env
File "C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\env.py", line 32, in
import app
File "C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\app.py", line 34, in
import os, os.path as p
File "C:\Python27\\lib\os.py", line 63, in
import ntpath as path
File "C:\Python27\\lib\ntpath.py", line 12, in
import warnings
File "C:\Python27\\lib\warnings.py", line 6, in
import linecache
File "C:\Python27\\lib\linecache.py", line 127
with open(fullname, 'rU') as fp:
^
SyntaxError: invalid syntax
Done launching! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:36:39.400

我已经解决了这个问题，由于 TideSDK 带有它自己的 Python 运行时，我创建了一个指向该 python 运行时的环境变量，所以我就是这样做的。[代码] 变量主页：PYTHONHOME 变量值：C:\ProgramData\TideSDK\modules\win32\python\1.3.1-beta

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:17:06.133

尽管文件夹清楚地写着 2.7，但它似乎使用的是不同的 Python 版本。你之前安装过其他版本的 Python 吗？如果是这样，您是否在安装 2.7 后将环境变量更改为指向 2.7？也许用 python --version 确认。

# javascript - 为什么某些 JS 行为在开发中起作用，但在我推送到 Heroku 时却不起作用？

> ID：14545337
> 
> 赞同：0
> 
> 时间：2013-01-27T07:23:01.833
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, heroku

I am trying to create a step form - which triggers/shows some fields when something else is chosen.

这是一个例子 - [http://jsfiddle.net/XnPZF/](http://jsfiddle.net/XnPZF/) - 它工作（它也适用于开发）。

只是无法弄清楚为什么当我推送到 Heroku 时这不起作用。

这是[Heroku 上的一个版本](http://realty-cloud.herokuapp.com/listings/new/)。

登录凭据：abc@test.com/test123

应该触发其下方其他字段的字段是 Property_Type 和 Category。

这是一些代码的片段：

`/views/listings/new.html.erb`

```
<%= simple_form_for @listing, :html => { :class => 'form-horizontal' } do |f| %>
<%= f.error_notification %>
      <fieldset>
            <%= f.association :property_type %>

    <div style="display: none;" data-show-for-prop-type="Multi Family">
      <h4>Multi-Family</h4>
      <%= f.input :taxes %>
      <%= f.input :house_families %>
      <%= f.input :house_extensions %>
      <%= f.input :house_stories %>
      <%= f.input :house_units %>
    </div>

    <div style="display: none;" data-show-for-prop-type="Condo">
      <h4>Condo</h4>
      <%= f.input :taxes %>
      <%= f.input :common_charges %>
    </div> 
```

`listings.js`文件：

```
$('#listing_property_type_id').on('change', function(){
    var option = $(this).find(':selected');
    $('[data-show-for-prop-type]').hide(); //And maybe reset?
    $('[data-show-for-prop-type='+ option.text() +']').show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:48:51.473

在 realty-cloud.herokuapp.com/listings/new 上看到几个 JS 错误...“未捕获的类型错误：无法读取未定义的属性 'oApi'”。几乎是肯定的，这可能是问题所在。

Dev 没有问题的原因是因为在 dev 中，它是单独的资产，因此错误仅限于具有该错误的那个 js 文件。但是，由于资产管道编译为一个，因此错误会停止其余部分的执行。

最好的办法是修复所有控制台错误，或添加“未定义”检查以防止出现此类“未捕获类型错误”错误。

# php - 如何防止 MySQL 睡眠注入？

> ID：14545340
> 
> 赞同：6
> 
> 时间：2013-01-27T07:23:26.020
> 
> 标签：php, mysql, sql-injection

最近，一位黑客试图使用睡眠注入来减慢我的网站速度。尽管我们正在使用预防措施，例如`mysql_real_escape_string()`覆盖大多数易受攻击的输入。我们通过查询字符串传递产品的 id，它使命令为：

```
$id = mysql_real_escape_string($_REQUEST['id']);
$qry = "Select * from products where id = ".$id; 
```

但黑客试图提供输入

```
?id=3 and sleep(4) 
```

和查询变成

```
Select * from products where id = 3 and sleep(4); 
```

尽管有一些可能的解决方案，例如

1.  检查产品ID是否为数字
2.  使用一些自定义功能从输入中删除单词睡眠

有没有其他方法可以阻止这种情况？防止睡眠注射的最佳方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-27T07:30:15.277

您没有正确逃脱。`mysql_real_escape_string`用于正确转义 SQL*字符串*语法，但您只是将值嵌入为裸值，而不是 SQL 字符串。你需要：

```
$qry = "SELECT * FROM products WHERE id = '$id'"; 
```

请注意查询中 id 周围的引号。

但是，如果 id 是数字，则转换为数字会更明智：

```
$id = (int)$_GET['id']; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-27T07:28:47.057

防止 SQL 注入的最佳方法是使用当前技术。MySQL`mysql_`系列函数已被弃用，并将在未来的修订版中从 PHP 中删除。

您应该将准备好的语句与 MySQLi 或 PDO 一起使用。

这些技术使用准备好的语句和参数化查询。SQL 语句由数据库服务器与任何参数分开解析。攻击者不可能注入恶意 SQL。

你基本上有两种选择来实现这一点：

1.  [MySQLi](http://php.net/manual/en/book.mysqli.php)：

    ```
    $stmt = $dbConnection->prepare('SELECT * FROM table WHERE name = ?');
    $stmt->bind_param('s', $name);
    $stmt->execute();
    $result = $stmt->get_result();
    while ($row = $result->fetch_assoc()) {
        // do something with $row
    } 
    ```

2.  [PDO](http://php.net/manual/en/book.pdo.php)：

    ```
    $stmt = $pdo->prepare('SELECT * FROM table WHERE name = :name');
    $stmt->execute(array(':name' => $name));
    foreach ($stmt as $row) {
        // do something with $row
    } 
    ```

发生的情况是您传递给的 SQL 语句`prepare`由数据库服务器解析和编译。通过指定参数（a`?`或命名参数，如`:name`），您可以告诉数据库引擎您要过滤的内容。然后，当您调用`execute`准备好的语句时，将与您指定的参数值相结合。

这里重要的是参数值与编译语句组合在一起，而不是 SQL 字符串。SQL 注入的工作原理是在创建要发送到数据库的 SQL 时诱使脚本包含恶意字符串。因此，通过将实际 SQL 与参数分开发送，您可以限制以您不想要的东西结束的风险。您在使用准备好的语句时发送的任何参数都将被视为字符串（尽管数据库引擎可能会进行一些优化，因此参数也可能最终以数字形式结束）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T07:30:55.103

这是一个错误的问题。

“**如何防止mysql注入？** ”它必须是。睡觉或不睡觉 - 没关系。

这个问题已经有**很多答案了**

*   如果你想要一个规范的，那么[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/q/60174/285587)
*   如果你想*了解*它是如何工作的，[这里我详细解释了它](https://stackoverflow.com/a/2995163/285587)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T07:30:22.563

您应该使用 PDO 或 mysqli 将您的查询转换为“准备好的语句”。

# java - Spring security拦截-url传递模式参数访问方法

> ID：14545341
> 
> 赞同：0
> 
> 时间：2013-01-27T07:23:37.307
> 
> 标签：java, spring, spring-security, parameter-passing

在 Spring Security 中，我们可以使用以下构造限制对某些 Web 资源的访问： `<intercept-url pattern="/admin.xhtml" access="hasPermission('admin')" />`

现在，我有很多页面，要访问每个页面，都应该具有与页面名称相同的特殊权限。`intercept-url`接受模式，但似乎不提供从正则表达式匹配组传递到的`pattern`参数`access`。我想要这样的东西：

```
<intercept-url pattern="/([a-z]+).xhtml" access="hasPermission('$1')" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:52:18.693

不幸的是，您不能在访问规则中使用匹配的正则表达式组。作为一种解决方法，您可以尝试定义自定义 Web 安全表达式。它将负责提取一些匹配的正则表达式组：

```
<intercept-url pattern="/([a-z]+).xhtml" access="hasPermission(extractGroup('$1', '/([a-z]+).xhtml'))" /> 
```

在执行期间**extractGroup(...)**方法将能够使用当前的 HttpRequest。这个解决方案有两个缺点：1）做起来不是那么简单 2）正则表达式模式将在你的 conf 中重复。[如果您觉得没问题，那么您可以在此处](https://stackoverflow.com/questions/14185070/spring-securityintercept-url-pattern-access-id-1/14199105#14199105)阅读如何添加自定义 Web 安全表达式。

# java - 最后加上“正斜杠”对网址有什么影响？

> ID：14545345
> 
> 赞同：3
> 
> 时间：2013-01-27T07:24:10.500
> 
> 标签：java, url, jakarta-ee, servlets, url-pattern

2个网址有什么区别：

```
http://localhost:8084/D_Nappster/NewServlet/ 
```

和

```
http://localhost:8084/D_Nappster/NewServlet 
```

第一个 URL 让我得到`404`响应，而第二个 URL 按预期工作。

从*web.xml*：

```
<servlet-mapping>
    <servlet-name>NewServlet</servlet-name>
    <url-pattern>/NewServlet</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:30:39.957

通常，第一个 url 将被视为目录，而第二个将被视为文件。

在您的情况下，您没有第一个 url 的映射，因此它被视为不存在的目录，从而导致 404。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:29:36.200

通常`/`，最后的 a 使服务器假定它是一个文件夹，而不是 url-pattern 中提到的 servlet。

```
http://localhost:8084/D_Nappster/NewServlet/ 
```

因此，在上述情况下，它会尝试查找 NewServlet 文件夹的默认页面。而在第二个 url 中，服务器正确地断定它是一个 Servlet 并完美地呈现 UI。

此外，您的 web.xml 不包含`NewServlet/`url-pattern 的定义，因此不包含 404 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T07:30:06.080

第一个不带 / 的 URL 访问 NewServlet 类。

带有 / 的第二个 URL 尝试查找名为 NewServlet 的文件夹并访问该文件夹中的默认设置

# c# - SelectedValue 无效，因为它不存在于项目列表中，如何处理此错误

> ID：14545348
> 
> 赞同：0
> 
> 时间：2013-01-27T07:24:17.177
> 
> 标签：c#, asp.net, entitydatasource

尝试绑定数据时出现以下错误。

> SelectedValue 无效，因为它不存在于项目列表中

```
<asp:DropDownList ID="DropDownList2" runat="server" 
     DataSourceID="JobCategoryEntityDataSource" DataTextField="ItemValue"
     DataValueField="ItemValue" SelectedValue='<%# Bind("JobCategory") %>' 
     Width="230px">
</asp:DropDownList> 
```

我知道我收到此错误的原因。这是因为它无法在选择中找到值。当事务表中的 JohCategory 字段在来自 JobCategoryEntityDataSource 的列表中找不到它时，它只会抛出错误。

如果在下拉列表中找不到数据并且不想抛出错误，我想要做的就是不绑定数据。我怎样才能做到这一点 ？

另一种选择是如果找不到匹配的值，只需添加“请选择”或类似的内容。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:29:04.270

您可以在 的`DataBound`事件中选择值`dropdown`。您可以检查值是否存在，然后选择它，或者您可以实施`try catch`

```
<asp:DropDownList ID="DropDownList2" runat="server"
 DataSourceID="JobCategoryEntityDataSource" DataTextField="ItemValue"
 DataValueField="ItemValue" 
 Width="230px" OnDataBound="DropDownList2_DataBound">
</asp:DropDownList>

<asp:HiddenField ID="JobCategory" runat="server" value='<%# Bind("JobCategory") %>'></asp:HiddenField> 
```

**代码隐藏**

```
protected void DropDownList2_DataBound(object sender, EventArgs e)  
{  
    try{
       HiddenField hf = (HiddenField)Form.FindControl("JobCategory");

       DropDownList2.SelectedValue = hf.Value;

    }Catch(Exception ex){

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:28:44.797

您需要将其绑定在后面的代码中，或者

*   将语句包装在 try/catch 块中
*   首先检查该项目是否存在，`FindByName`如果没有，则可以选择添加它。

# linq-to-xml - 将 linq 中的 XElement 的名称更改为 xml

> ID：14545349
> 
> 赞同：6
> 
> 时间：2013-01-27T07:24:17.760
> 
> 标签：linq-to-xml

我有 2 个 xmls.SourceXml 和 TargetXml

我正在将 xml 的一些元素导入另一个 xml。

这一切都很好，但是一些元素我只需要更改名称。我目前正在做的是从头开始构建元素，唯一的区别是 xml 的名称。

让我给你举个例子。

在我的 Source Xml 中，我有一个名为

```
 <OldBank>
       <SortCode>123456</SortCode>
       <AccountNumber>12345678</AccountNumber>  
       etc....        
 </OldBank> 
```

在我的目标 xml 中，应调用 NewBank，其子元素完全相同

```
 <NewBank>
       <SortCode>123456</SortCode>
       <AccountNumber>12345678</AccountNumber>  
       etc....        
 </NewBank> 
```

这就是我所做的：

```
 public static void ReplaceNewCustomerDetails(this XDocument xDoc)
    {
        XElement oldBankElement = GetOldBankElement(xDoc);

       var newBakXml= new XElement("NewBank",
                     new XElement(oldBankElement.ElementOrDefault("SortCode")),
                     new XElement(oldBankElement.ElementOrDefault("AccountNumber")));

       //Build new xml. This is what I do
       var newXml = new XElement("MyNewXml");
       newXml.Add(newBakXml);

      //I wish I could just change the name of the xml rather then building it again
       var newXml = new XElement("MyNewXml");
       newXml.Add(oldBankElement.Name="NewBank"); 
```

任何建议或更优雅的解决方案

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T07:34:09.707

您不需要创建新元素 - 只需传递现有的：

```
var newBankXml = new XElement("NewBank", 
                             oldBankElement.Attributes(), 
                             oldBankElement.Elements());
newXml.Add(newBankXml); 
```

或者只是更改名称：

```
oldBankElement.Name = "NewBank";
newXml.Add(oldBankElement); 
```

# java - 加载整个页面后加载谷歌加代码

> ID：14545350
> 
> 赞同：2
> 
> 时间：2013-01-27T07:24:17.993
> 
> 标签：java, load, google-plus-one

我想在整个页面加载后加载 Google plus 代码，因为它确实减慢了加载时间。我正在运行 Joomla，所以这正是我放入 php 文件的内容：

```
<div class="g-plus" data-action="share" data-annotation="vertical-bubble" data-height="60"></div>
<script type="text/javascript">
(function googlefunction() {

    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js'; 
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
</div> 
```

似乎可能有一个函数说 LoadAftePage 我可以环绕它。

# php - 使用 AJAX 将 lat & lng 变量发送到 PHP 进行邻近度计算

> ID：14545351
> 
> 赞同：1
> 
> 时间：2013-01-27T07:24:30.000
> 
> 标签：php, mysql, ajax, jquery, geolocation

首先，提前感谢您提供的所有见解和帮助。

我有一个 MySQL 数据库（实际上是单表），其中包含 9 个用于测试的条目。字段包括 id、name、address、city、state、zip、lat、lng 等。我的目标是加载启用位置感知的主页，使用 Javascript 将用户纬度和经度设置为变量，然后使用 AJAX，发送这些变量到另一个 .php 页面，以便可以将变量放入我的查询中的计算公式中。有第二个 AJAX 实例，然后在发送变量并处理整个页面后从服务器获取查询结果。

我的第二个 AJAX 实例非常成功地调用了第二页的结果。如果我手动设置变量，我会得到排序良好的列表，如果我依赖 Javascript 变量，则会出现错误。我不确定我哪里出错了。

我知道这似乎是一个重复的问题。在过去的 8 个小时里，我一直在阅读我希望对我有所帮助的其他问题。不幸的是，我尝试过的每个示例都不起作用。

我的主页（test.php）上的代码是这样的：

```
<html><head></head><body>
<script type="text/javascript">
if(navigator.geolocation)
  {
  navigator.geolocation.getCurrentPosition(function(position)
   {
  var lat = position.coords.latitude;
  var lng = position.coords.longitude;
$.ajax({
        type: "POST", 
        url:  "locations-ajax.php", 
        data: 'x='+lat+'&y='+lng,
        });  
 });
}
</script>
<!--begin list area-->
<script>
function getXMLHttp()
{
var xmlHttp
try
{
//Firefox, Opera 8.0+, Safari
xmlHttp = new XMLHttpRequest();
}
catch(e)
{
//Internet Explorer
try
{
  xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
}
catch(e)
{
  try
  {
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  catch(e)
  {
    alert("Your browser does not support AJAX!")
    return false;
  }
}
}
return xmlHttp;
}
function MakeRequest()
{
var xmlHttp = getXMLHttp();
xmlHttp.onreadystatechange = function()
{
if(xmlHttp.readyState == 4)
{
  HandleResponse(xmlHttp.responseText);
}
  }
 xmlHttp.open("GET", "locations-test.php", true); 
 xmlHttp.send(null);
}

function HandleResponse(response)
{
document.getElementById('listarea').innerHTML = response;
}
</script>
<div class="container"><input type='button' onclick='MakeRequest();' value='Get List'/></div>
<div class="container"><div id="listarea">
</div></div></div>
</body>
</html> 
```

我生成排序列表的页面是这样的：（locations-test.php）

```
<?php
/*   $x = 32.839001;
$y = -79.852316;   */
mysql_connect("localhost", "root", "") or die(mysql_error());
 echo "Connected to MySQL<br />";
mysql_select_db("test_db") or die(mysql_error());
 echo "Connected to Database <br>";
// Make a MySQL Connection
  $x = @$_POST['x'];
  $y = @$_POST['y']; 
 if (!empty($x)){
        echo 'x not empty';
    }else{
        echo 'x is not set or empty';
    }
    echo "$x";
 echo "<br>";
    if (!empty($y)){
        echo 'y not empty';
    }else{
        echo 'y is not set or empty';
    }
 echo "<br>";  

$query = "SELECT * , ( 3959 * acos( cos( radians($x) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians($y) ) + sin( radians($x) ) * sin( radians( lat ) ) ) ) AS distance FROM locations HAVING distance < 2500 ORDER BY distance LIMIT 0 , 20;"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array( $result )) {
    echo "<div class='row'><div class='logo'><img src='foo.png' width='20' height='20'></div><div class='siteblock'><div class='sitename'>"; 
    echo $row['site_name'];
    echo "</div><div class='address'>"; 
    echo $row['street_number'];
    echo " ";  
    echo $row['street_name'];
    echo "</div></div></div>"; 
}
?> 
```

我已将测试留在代码中，但已注释掉。如果我为变量分配一个值，我会在我的表中得到正确的结果，并且它会很好地输出到 test.php。

该页面可以正常连接到数据库，但 lat 和 lng 的值不会从 test.php 传递到 locations-test.php。

我真的不确定我错过了什么，但希望它很简单。我正在使用 PHP 5.4.3、MySQL 5.5.24 和 Apache 2.2.22 运行 WAMP 64 位。

我宁愿希望这是我的疏忽，而不是其他任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:16:37.170

由于您使用的是 jQuery，因此绝对不需要使用 XMLHTTP 函数。此外，您似乎正在尝试通过 jQuery 发送数据并通过 XMLHTTP 检索；这是不正确的。你可以像这样重写你的代码：

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function (position) {
        $.ajax({
            type: "POST",
            url: "locations-ajax.php",
            data: {
                x: position.coords.latitude,
                y: position.coords.longitude
            },
            success: function (data) {
                $("#listarea").html(data);
            }
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T07:48:28.523

如果您考虑将 Jquery 用于 ajax 请求，则应将要发送的数据编码为对象，

```
$.ajax({
    type: "POST", 
    url:  "locations-ajax.php", 
    data: {
         lat: lat,
         lng: lng 
    }
}); 
```

这应该像您的 php 所期望的那样将数据发送到服务器。另请注意，在您之前的代码中，ajax 请求的最后一个设置之后是一个逗号。

* * *

但是如果没有 Jquery，您似乎没有在`MakeRequest`函数中发送任何变量。您必须添加地理位置代码并从那里发送坐标，

```
function MakeRequest()
{
    if(navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(function(position)
        {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            var xmlHttp = getXMLHttp();
            xmlHttp.onreadystatechange = (function()
            {
               if (xmlhttp.readyState==4 && xmlhttp.status==200)
               {
                   HandleResponse(xmlHttp.responseText);
               }
            });
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xmlHttp.open("POST", "Encoder/Index", true); 
            xmlHttp.send("x=" + lat + "&y=" + lng);
        });
    }
} 
```

这应该可以实现您的目标。

# python - Python数学显着性水平

> ID：14545354
> 
> 赞同：2
> 
> 时间：2013-01-27T07:25:35.590
> 
> 标签：python, math, significant-digits

我从一个数据集中加载了 2 个值。

```
x1=5.904e-16 
```

和

```
x1=1.048576e-14 
```

当然这些都是很小的数字，但我想做的就是平均它们。

```
avg = 1/2*(x1+x2) 
```

但这给出了 avg = 0

啊！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T07:27:34.457

我假设您使用的是 Python 2。

当两个参数都是整数时，Python 2 使用**整数除法**，这意味着结果也将是整数。例如：

```
print 1/2
# 0
print 5/2
# 2 
```

为了克服这个问题，要么使用等效的浮点数`0.5`（`1``2`

```
print 1.0/2
# 0.5
print 1/2.0
# 0.5
print 1.0/2.0
# 0.5 
```

正如[nneonneo 提到](https://stackoverflow.com/questions/14545354/python-math-significance-level/14545368#comment20288884_14545368)的，您还可以将总和直接放入除法中，如下所示：

```
(x1+x2)/2.0 
```

这也将给出预期的结果。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-27T07:26:59.520

```
avg = 0.5*(x1+x2) 
```

之所以有效，是因为在 python 中 1/2 显然不等于 0.5，但不，它认为 1/2 是二分之一，并且任何一个都没有超过小数点的值，所以它假设你不关心想要那个。

# cluster-analysis - Mahout - 聚类的向量

> ID：14545370
> 
> 赞同：1
> 
> 时间：2013-01-27T07:27:49.803
> 
> 标签：cluster-analysis, mahout, k-means

我使用以下方法运行 K-Means：

```
KMeansDriver.run(new Path("./bd.seq.file"), new Path(clustersLoc), new Path("output"),
            new EuclideanDistanceMeasure(), 0.001, 10, true, 0.5, false); 
```

我的目标是知道我的每个原始向量属于哪个集群。据我了解，这应该在 output/clusteredPoints/part-m-00000 中，但是这个文件看起来像一个空的（120 字节）序列文件。

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:53:42.887

好的，我终于明白了（至少部分）。它与`KMeansDriver.run()`第 8 个参数有关。如果它的值为“0”，则其行为与 Mahout 0.5 中的相同。参数的名称是“clusterClassificationThreshold”，它的 javadoc 说明：

> 是一个聚类严格性/异常值去除参数。它的值应该在 0 和 1 之间。pdf 低于该值的向量将不会被聚类。

对于像我这样的 Mahout 初学者，pdf 是“概率密度函数”的首字母缩写。我不确定我真的知道这个参数是什么（谷歌搜索在这里没有帮助，javadocs 就是你要得到的全部），但我想这是因为它是过滤 Mahout 开发人员选择的原始向量的机制的一部分如果它不是“0”，则禁用聚类点。

# matrix - 列出满足特定条件的矩阵的入口位置

> ID：14545372
> 
> 赞同：0
> 
> 时间：2013-01-27T07:28:15.910
> 
> 标签：matrix, wolfram-mathematica

我在 Mathematica 中有一个多项式的列向量，并且我已将向量的每个条目除以另一个多项式。一些条目现在是多项式，而其他条目是多项式的分数。是否可以列出所有多项式条目的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:11:10.997

我想内在函数`PolynomialQ`可能会有所帮助，但如果没有看到您的代码，就很难确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:44:12.393

```
genRndPoly[grade_,var_,max_] := Product[var - RandomInteger[{1,max}], {i, grade}]
rndDivisor = genRndPoly[1, w, 1];
f[max_] := Total@(Boole/@PolynomialQ/@(#/rndDivisor &/@ 
                                            Table[genRndPoly[5, w, max], {100}]))
DiscretePlot[f[max], {max, 30}] 
```

![数学图形](../Images/0570f107e608d427d17881f6531d32d2.png)

# solr - 如何在solr中逐行索引文本文件

> ID：14545375
> 
> 赞同：1
> 
> 时间：2013-01-27T07:28:24.627
> 
> 标签：solr, indexing

我有一个包含推文的大阿拉伯文文本文件，每行包含一条推文，我想在 solr 中编制索引，以便该文档的每一行都应在单独的 solr 文档中编制索引

**到目前为止我尝试了什么：**

*   我知道如何在 solr 中 SQL 数据库记录
*   我知道如何更改 solr 架构以适应数据并使用数据导入处理程序
*   我知道查询如何用于索引 solr 中的数据

**我想要的是：**

知道如何在 solr 中索引文本文件，以便将每一行视为 solr 文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:08:58.150

我认为您应该查看 DataImportHandler 功能的 LineEntityProcessor。这在下面的链接中有详细解释。

LineEntityProcessor 此 EntityProcessor 逐行读取数据源中的所有内容，并为读取的每一行返回一个名为 rawLine 的字段。内容不以任何方式解析；但是，您可以添加转换器来操作 rawLine 字段中的数据，或创建其他附加字段。

[http://lucidworks.lucidimagination.com/display/solr/Uploading+Structured+Data+Store+Data+with+the+Data+Import+Handler](http://lucidworks.lucidimagination.com/display/solr/Uploading+Structured+Data+Store+Data+with+the+Data+Import+Handler)

希望信息有所帮助。祝你好运！

# php - 跨域请求，但 POST 为空

> ID：14545376
> 
> 赞同：1
> 
> 时间：2013-01-27T07:28:28.960
> 
> 标签：php, javascript, ajax, cross-domain, jsonp

我需要实现一个跨域 POST 请求。使用此代码，在同一个域中一切正常。但是当我将后端移动到另一个域时 - 都停止工作了！因此，可能会有错别字。只有与跨域请求相关的错误才可能存在。我尝试使用 ajax 和 JSONP 发送 POST 请求：

```
function requestToServer(url, success, myObjects) 
{
    $.ajax({
        type: "POST",
        crossDomain: true,
        dataType: 'jsonp',
        jsonp: 'jsonp_callback',
        url: url,
        data: "arrObjects=" + JSON.stringify(myObjects),
        success: function(data)
        {
            success(data);
        },
        error: function()
        {
            alert('Server connection error!!!');
        }
    });
} 
```

和服务器脚本，其中发送数据：

```
<?php

header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']);
header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
header('Access-Control-Max-Age: 1000');
header('Access-Control-Allow-Headers: Content-Type');

include 'connection.php';

$arrObjects = json_decode($_POST['arrObjects']);

$title = $arrObjects->title;
$msg = $arrObjects->msg;
$lat = $arrObjects->lat;
$lon = $arrObjects->lon;

$query = "INSERT INTO `geo_markers` (`id`, `title`, `description`, `lat`, `lon`) 
VALUES (NULL, '{$title}', '{$msg}', '{$lat}', '{$lon}')";

$res = mysqlQuery($query);

echo $_GET['jsonp_callback'].'({"success":true});';

mysql_close();
?> 
```

但 $_POST 是空的。但是 $_GET 取值 $_POST。如果我使用 var_dump 检查 $_POST，它是 array(0)，$_GET 包含所有发送数据！

这里有什么问题？可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T07:39:53.463

你不能发出 jsonp POST 请求，jsonp 只能用 GET 完成，这就是为什么所有数据都在 $_GET 中的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T07:40:27.353

JSONP 不适用于 POST 请求。JSONP 的工作原理是调用者生成一个带有 url 的脚本标记，希望生成一些脚本，根据需要使用传递的数据调用回调函数。如果您想要真正的跨域发布，则必须使用处理 OPTIONS 请求的东西来实现跨域资源共享 (CORS) 功能（可能像[http://remysharp.com/2011/04/21/getting-cors -working/](http://remysharp.com/2011/04/21/getting-cors-working/)，但我承认，我什至没有完全扫描它，我只是看了看它，看看它可能记录了基本的、必要的功能）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T07:37:04.157

由于您使用的是 jsonp 格式，因此您已发送 JSON 格式。在数据之前尝试[json_encode](http://php.net/manual/en/function.json-encode.php)`echo`。

还要记住，当您进行跨域 jsonp 调用时，JSONP 不是 AJAX，它只是一个动态脚本元素。您不能使用动态脚本元素进行 POST。没有地方放`POST`数据。所以你将不得不使用`GET`方法。

另请记住，您可以使用以下格式

```
$.getJSON(url + "?callback=?", null, function(data) {

}); 
```

[阅读更多](http://api.jquery.com/jQuery.getJSON/#jsonp)

# java - 看不到 mapreduce wordcount 输出文件

> ID：14545382
> 
> 赞同：0
> 
> 时间：2013-01-27T07:29:17.123
> 
> 标签：java, hadoop, mapreduce

我按照 michael noll 的教程下载并安装了 hadoop。我还运行了 wordcount 示例。但我看不到相同的输出。当我看到 dfs 中的文件时，我得到了我拥有的所有文件列表

![在此处输入图像描述](../Images/8afad465ccd92c456312e1df82d58cba.png)

但是当我 cat 这些文件时，我得到一个错误：

![在此处输入图像描述](../Images/b97fc2d89162668840a9cfa24f70ba13.png)

想知道那里出了什么问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:49:39.820

您尝试在 HDFS 中查找的文件是一个目录（标志列显示`drwxr-xr-x`）。Hadoop 作业通常会将其结果输出到一个目录，每个reducer 一个文件（或者如果您运行没有reducer 的作业，则每个映射器）。

所以 ls 该文件夹的内容，您应该会看到一些 part-r 文件 - 尝试对这些文件进行分类：

```
bin/hadoop dfs -cat /user/ravi/tempoutput.txt/part-r-* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:02:17.473

运行 wordcount 示例的预期语法是：`bin/hadoop jar hadoop-examples-1.0.4.jar wordcount <input_dir> <output_dir>`. 您的 wordcount 可能没有处理任何数据，因此您看不到任何结果。尝试运行，`bin/hadoop jar hadoop-examples-1.0.4.jar wordcount /user/ravi/inputall /user/ravi/output`然后`bin/hadoop dfs -ls /user/ravi/output`查看结果。

此外，您应该在运行后检查 map reduce yob 执行的详细信息（直接在控制台中或使用 Web 界面）。应该有关于处理的输入记录/字节数的详细信息。您还可以在 Web 浏览器中浏览整个文件系统：`http://localhost:50070/dfshealth.jsp`

# android - 获取Android网络接口IP地址

> ID：14545392
> 
> 赞同：5
> 
> 时间：2013-01-27T07:30:24.027
> 
> 标签：android, linux, wifi-direct

我正在为 Android 编写一个 wifi-direct 应用程序。我正在尝试与设备建立套接字连接。由于组所有者意图功能似乎不起作用（它只是随机分配）我必须找到一种将客户端 IP 地址传输到主机的方法。我知道的唯一地址是 WifiP2pManager 可以获取的组信息对象中的主机设备。我知道哪个设备是主机，哪个设备是客户端，因此我可以打开一个套接字以使连接到达或尝试连接到另一个。

如果“主机”设备是组所有者，我需要做的是找到一种方法来传输 Wifi P2P（Wifi Direct）客户端的设备 IP 地址。如果主机是组所有者，我无法连接到客户端上的套接字。这有点令人困惑，但这就是它的工作原理。

我已经看到了诸如从 ARP 表中获取 IP 地址之类的事情，但是 ARP 表似乎仅在几秒钟（如一分钟）后就自动清除了，并且在 ICS 上，因为 wifi 接口已禁用 Wifi direct 我什至没有查看 arp 表中的任何内容。

我觉得这应该很容易，但我不是一个大的 linux 用户，所以我不知道哪个文件可以保存网络接口配置。有没有办法获取网络接口的 IP 地址？或者至少是Wifi P2P接口？（注意：这不是wifi地址。它类似于tethering地址，只是它是Wifi Direct。WifiManager不返回这个）

谢谢，
Mgamerz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:47:48.627

```
DhcpInfo dhcpInfo = (WifiManager)this.context.getSystemService(Context.WIFI_SERVICE)).getDhcpInfo();
String ipaddress = intToIp(dhcpInfo.ipAddress)

intToIp(int integer) {
        return (integer & 0xFF) + "." + ((integer >> 8) & 0xFF) + "."
                + ((integer >> 16) & 0xFF) + "." + ((integer >> 24) & 0xFF);
    } 
```

上面的代码应该可以帮助您获取 ipaddress ...

要获取通过套接字连接到主机的客户端的 IP 地址，您可以使用.. clientSocket = this.serverSocket.accept(); clientSocket.getInetAddress();

# objective-c - 使用完成按钮以编程方式添加 UINavigationBar

> ID：14545398
> 
> 赞同：11
> 
> 时间：2013-01-27T07:30:57.193
> 
> 标签：objective-c, xcode, uinavigationbar, modalviewcontroller

所以我有一个模态视图，并希望以编程方式添加一个带有完成按钮的 UINavigationBar，以便在用户完成阅读内容时关闭此视图。

关于如何做到这一点的任何想法以及是否可以完全不使用界面构建器？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-10-15T21:58:33.693

很抱歉，这里没有人真正阅读您的问题...这是您要查找的代码：

```
UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 44)];
navBar.backgroundColor = [UIColor whiteColor];

UINavigationItem *navItem = [[UINavigationItem alloc] init];
navItem.title = @"Navigation Bar title here";

UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithTitle:@"Left" style:UIBarButtonItemStylePlain target:self action:@selector(yourMethod:)];
navItem.leftBarButtonItem = leftButton;

UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Post" style:UIBarButtonItemStylePlain target:self action:@selector(yourOtherMethod:)];
navItem.rightBarButtonItem = rightButton;

navBar.items = @[ navItem ];

[self.view addSubview:navBar]; 
```

我希望这会有所帮助，祝你好运:)

将此代码添加到您的 viewDidLoad 方法中，一切都会自行构建。请注意，用您自己的方法签名替换选择器-

快乐编码

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T07:35:53.270

这绝对是可能的。

可能最简单的方法是将`UIViewController`您正在呈现的模态嵌入到 a 中`UINavigationViewController`，然后添加`Done`按钮，执行类似的操作

```
UIBarButtonItem * doneButton = [[UIBarButtonItem alloc] 
                            initWithBarButtonSystemItem:UIBarButtonSystemItemDone 
                            target:self 
                            action:@selector(dismiss)];
self.navigationItem.rightBarButtonItem = doneButton; 
```

并实现`dismiss`如下方法

```
- (void)dismiss {
    [self.presentingViewController dismissViewControllerAnimated:YES 
                                   completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T07:38:35.327

```
//add done button to navigation bar
UIBarButtonItem *doneBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(userPressedDone)];
self.navigationItem.rightBarButtonItem = doneBarButtonItem; 
```

然后在您的视图控制器中的某处有这样的方法

```
-(void)userPressedDone {
    // Action For Done Button Tapped
} 
```

# php - 使用 Laravel 4 在路由组上添加更多过滤器选项

> ID：14545399
> 
> 赞同：0
> 
> 时间：2013-01-27T07:30:58.120
> 
> 标签：php, rest, routes, laravel, laravel-4

我正在使用 postmarkapp 的入站服务在网络挂钩上接收 JSON 格式的电子邮件。在我的例子中，我有一个接受 HTTP POST 来存储邮件的 EmailController。

它是这样设置的：

```
Route::group(array('before' => 'auth'), function()
{
    Route::resource('emails', 'EmailController');
}); 
```

我需要路由组不过滤与控制器上的存储操作相关的 POST。我试过使用：

```
array('before' => 'auth', 'except' => 'post')
array('before' => 'auth', 'except' => 'store') 
```

所以我真的不知道在哪里做这个。也许在过滤器本身？另外，我在做异常时是使用动作名称还是 HTTP 动词？

另外：我也不太愿意像那样向所有人开放路线动作。关于如何确保只有 postmarkapp 在那里发布的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:48:04.497

创建您自己的过滤器并为其添加适当的逻辑。例如：

```
Route::get('test', ['before' => 'foo']);

Route::filter('foo', function($route, $request) {

    if ($request->getClientIp() === 'xxx.xxx.xxx.xxx')
    {
            //...
    }

    if ($request->getMethod() === 'POST'))
    {
            //...
    }

}); 
```

```

您还可以为更复杂的过滤器创建过滤器类。阅读[http://four.laravel.com/docs/routing#route-filters](http://four.laravel.com/docs/routing#route-filters)中的部分。

# apache - 允许人们连接到我的 IP 地址以查看内容吗？

> ID：14545402
> 
> 赞同：0
> 
> 时间：2013-01-27T07:31:33.357
> 
> 标签：apache

我正在使用 XAMPP 在我的本地计算机上测试页面，我希望人们能够通过连接到我的 IP 地址来查看我的内容（例如，在浏览器中，他们会将 1.1.1.1/index.php 放在地址栏中查看我的 localhost/index.php)。我的防火墙已关闭，根据 XAMPP Apache 服务似乎运行良好。即使我尝试 WAMP 或 UniformServer，我似乎也无法让人们连接到我。据我所知，端口已正确转发。

我正在为此撕扯头发，我似乎无法让它发挥作用。

编辑; 我可能应该提到我在 W7 x86-64 下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:37:32.393

你有 apache httpdocs：

听（你的IP）：8000

[这是文档](http://httpd.apache.org/docs/2.2/bind.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T07:53:01.777

您可以使用[这篇文章](http://lifehacker.com/124212/geek-to-live--how-to-set-up-a-personal-home-web-server)（与 Apache 文档相比，本指南更加用户友好），它解释了如何在 Windows 机器上安装和配置 Apache（您可以跳过与您的需求无关的第 3 步）以及如何使其可访问通过您的外部 IP

# box2d - 在 box2d 中的每一步执行代码

> ID：14545405
> 
> 赞同：-1
> 
> 时间：2013-01-27T07:31:56.387
> 
> 标签：box2d, physics, game-physics, box2dweb

在box2d的每个步骤（解决）中执行代码而不是每帧一次的方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:44:50.380

这是你的意思吗？

```
var box2DListener = Box2D.Dynamics.b2ContactListener;
var ContactListener = new box2DListener;
ContactListener.PreSolve = function(contact, oldManifold) {
  // some code to be executed before each solve
}
ContactListener.PostSolve = function(contact, impulse) { 
  // some code to be executed after each solve
} 
```

[Box2dweb - Collision Contact Point 线程](https://stackoverflow.com/questions/10878750/box2dweb-collision-contact-point)中也对此进行了介绍

[您可以在Seth Ladd 的博客](http://blog.sethladd.com/2011/09/box2d-collision-damage-for-javascript.html)和[TheNightOwl 的博客](http://thenightowl.xp3.biz/)中找到一些很好的例子。

# c - 字符串数组中的最后一个字符串（从 strtok 解析）有垃圾

> ID：14545407
> 
> 赞同：3
> 
> 时间：2013-01-27T07:32:25.430
> 
> 标签：c, arrays, string, strtok

我在这里有点困惑。主要：

```
int main() {
    char **symbols = (char **) malloc(3 * sizeof(char *)); // allocate 3 (char *)'s
    for (int i = 0; i < 3; i++)
        symbols[i] = (char *)malloc(3); // allocate string of length 3

} 
```

然后用户在一行上输入三个字符串符号，空格分隔：

```
111 010 101 
```

然后我将这个缓冲的字符串解析成一个字符串数组：

```
void parseSymbols(char *line, int k, char **symbols) {
    // k == 3
    // Ignore leading spaces
    while (*line != '\0' && is_whitespace(*line))
            line++;

    char *p = strtok(line, " ");
    int cnt = 0;
    symbols[cnt++] = p;
    while (p) {
            p = strtok(NULL, " \n");
            symbols[cnt++] = p;
    }

    // Let's call this FOOBAR
    //for (int i = 0; i < k; i++)
    //        printf("%d. %s\n", i, symbols[i]); 
```

}

回到 main，当我 printf 符号中的 3 个字符串时，我得到了这个：

```
0\. '111'
1\. '010'
2\. ' s' 
```

但是当我取消注释最后两行 parseSymbols 时，我得到：

```
0\. '111'
1\. '010'
2\. '101' 
```

为什么 FOOBAR 块“修复”我的字符串数组，更重要的是，我怎样才能让 parseSymbols 正常工作而不必在屏幕上打印一些东西？符号[2] 是否需要以 '\0' 结尾？（但是 strtok 不是为我做的吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:20:20.923

您的第一个问题是您通过将结果指针分配给`strtok`符号表来导致内存泄漏。这是因为您只是将引用复制到标记的下一个开始，而不是复制这些行中的结果字符串：`symbols[cnt++] = p;`

接下来，您应该通过将结果分配给符号表来确保不超过 k。您的代码始终在符号表的最后一个位置写入 NULL。解析 3 个符号后，您将写入未分配的内存，从而导致未定义的行为。

我建议先纠正这些问题，然后再试一次。

请注意，strtok 通过在标记末尾用 '\0' 替换分隔符来修改原始缓冲区，因此无需复制字符串。另请注意，strtok 会跳过连续出现的分隔符之一。因此，您的第一个循环可以替换为检查第一个标记的长度是否 >0（或者换句话说，结果字符串的第一个字节是`!= '\0'`

请注意，C 字符串总是需要比您想要存储的多 1 个字节的空间。这个额外的字节用于 '\0' 终止。在您的示例中，您正在解析 3 个字节的块，而每个块仅分配 3 个字节（应该是 4 个）：`symbols[i] = (char *)malloc(3); // allocate string of length 3`

# ruby-on-rails-3 - Rails：验证模型以确保新关联归特定用户所有的最佳方式

> ID：14545410
> 
> 赞同：0
> 
> 时间：2013-01-27T07:33:17.863
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我正在编写一个 Rails 3.2 应用程序，我敢肯定这种类型的需求经常出现。在我的应用程序中，我有以下 ActiveRecord 模型：

*   用户
*   信息
*   联系人
*   MessageContacts（消息 <-> 联系人的 has_many 直通表）

我想确保当用户创建新消息时，他们只能将自己的联系人添加到消息中。很想听听可以使这个过程干燥的建议和/或相关的宝石（cancan？）。

以下是我整理的内容，它似乎有效，但想知道我是否以正确的方式进行。

```
class Message < ActiveRecord::Base

  belongs_to :user

  has_many :message_contacts
  has_many :contacts, through: :message_contacts

  validates_each :contacts do |record, attr, contacts|
    contacts.each do |contact|
      record.errors.add(attr, 'must belong to you') if contact.user_id != record.user_id
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:06:06.187

对于这种情况，您的代码遵循公认的风格。

如果您不希望用户不拥有的每个联系人都出现错误，而只是尝试包含您不拥有的联系人时出现错误，则可以改为：

```
validates :contacts_ownership

def contacts_ownership
  errors.add(:contacts, 'must belong to you') unless (contacts - user.contacts).empty?
end 
```

但这更多的是品味和要求，而不是首选方法。如果每次联系都需要错误，那么您的方式会更好。如果您只需要一个错误，这种方式可能更可取。它还可以帮助您，因为它更具可读性并且在您需要时更易于单独测试。

# java - Spring 社交登录和 Spring Security 自定义身份验证管理器

> ID：14545413
> 
> 赞同：2
> 
> 时间：2013-01-27T07:34:08.040
> 
> 标签：java, spring, spring-mvc, spring-security, spring-social

我试图了解我是否正确处理了我的服务器身份验证

我正在创建一个使用 Facebook 自动登录的服务器，另外我正在使用休眠

我通过使用与默认相同的过程来做到这一点，`JdbcUsersConnectionRepository` 但我总是返回一个用户。如果没有找到。

> ```
> @Override
> public List<String> findUserIdsWithConnection(Connection<?> connection) {
>     List<String> ret = new LinkedList<String>();
>     ConnectionKey key = connection.getKey();
>     MyUser myUser = userService.getUserBySocialConnection(key.getProviderId(), key.getProviderUserId());
>     if (myUser == null)
>     {
>         MyUser user = userService.createUserFromConnection(connection);
>         String myUserId = String.valueOf(user.getId());
>         ret.add(myUserId);
>     }else
>     {
>         ret.add(String.valueOf(myUser.getId()));
>     }
>     return ret;
> } 
> ```

所以我`signIn`有这个代码。登录用户：

> ```
>  public String signIn(String userId, Connection<?> connection, NativeWebRequest request) {
>     MyUser user = userService.getUserById(Long.parseLong(userId));
>     Authentication authentication = SecurityToolbox.signInUser(user);
>     // set remember-me cookie
>     MyUser myu = (MyUser)authentication.getPrincipal();
>     userCookieGenerator.addCookie(String.valueOf(myu.getId()), request.getNativeResponse(HttpServletResponse.class));
>     return null;
> } 
> ```

以及来自的登录代码`SecurityToolBox`：

> ```
>  public static Authentication signInUser(MyUser user) {
>     List<GrantedAuthority> authorities = getAuthorities(user);
>     Authentication authentication = new UsernamePasswordAuthenticationToken(user, "", authorities);
>     SecurityContextHolder.getContext().setAuthentication(authentication);
>     return authentication;
>   } 
> ```

现在所有这一切都由`userInterceptor`我编写的一个处理读取cookie（如果可用）并记住用户（如果存在）处理。我现在可以使用 cookie 发送给用户以记住我的最佳受保护信息是什么我正在发送用户 ID 但这不是我想要的

我现在想让 Spring Security 处理我的会话/remmeberme/身份验证过程，但我真的不明白我应该做什么。

**第一个问题** 我的代码是否足以正确地向服务器验证用户？，在下一个请求中。如果我问我`userInterceptor`是否`SecurityContextHolder.getContext().getAuthentication() != null`可以安全地假设用户已登录？

现在我想让spring security来处理我的身份验证，而不是自己用拦截器来做。所以我想创建一个身份验证管理器。但我不明白我需要在什么方面进行身份验证

> ```
>  public class CustomAuthenticationManager implements AuthenticationManager {
> public Authentication authenticate(Authentication auth)
>         throws AuthenticationException {}} 
> ```

我没有用户名和密码，我只是通过 facebook 进行身份验证才能登录，所以我用什么进行身份验证。总的来说，我在这里有一些知识差距，我真的不明白我应该怎么做才能让所有东西粘在一起

**第二个问题**`authenticate`对于我的情况，函数中 究竟需要发生什么

**第三个问题** 我希望 Spring Security 处理会话和 cookie 以记住我。我知道有一个与 u/p 令牌相同的记住我令牌，但我仍然不明白我应该如何在我的情况下使用它。

**第四个问题** 现在整个登录过程发生在每个发送到服务器的请求（不是资源）上。这是它应该发生的方式吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T02:31:27.517

那里有很多问题。首先，您在第一个框中编写的代码实际上已经通过可以注入的 ConnectionSignUp 在 JdbcUsersConnectionRepository 中得到支持。ConnectionSignUp 是一个策略接口，如果 JdbcUsersConnectionRepository 找不到用户，您可以实现该接口来创建用户。查看 spring-social-quickstart 应用程序以查看此示例。

无需深入阅读，您的登录代码看起来还不错，但我同意从本质上重新创建 Spring Security 在拦截器中已经完成的所有工作需要大量工作。出于这个原因，Spring Social 的最新快照构建包括与 Spring Security 更紧密的集成。

新的东西有一个 SocialAuthenticationFilter ，它是一个 Spring Security 身份验证过滤器，就像任何其他身份验证过滤器一样，它直接插入 Spring Security 的过滤器链。此身份验证过滤器通过将用户的提供者信息与本地应用程序上先前建立的连接进行比较来工作，并在找到匹配项时将其登录。否则，它会重定向到注册页面。

从功能的角度来看，它的工作与 Spring Social 的 ProviderSignInController 相同。但是，它的不同之处在于它与 Spring Security 紧密集成，因此您期望的所有安全性内容（记住我、权限等）都可以按照您的预期工作，而无需太多/任何额外的努力部分。

同样，这仅在最新的 1.1.0.BUILD-SNAPSHOT 版本中，但我预计（除非有任何意外）在下周初推出 1.1.0.M2 版本。如果您想查看一些实际示例，请查看 spring-social-showcase-sec 或 spring-social-showcase-sec-xml 示例。

# javascript - 存在多个表单时的 JS 验证

> ID：14545417
> 
> 赞同：0
> 
> 时间：2013-01-27T07:34:35.373
> 
> 标签：javascript, jquery, validation

嗨，我的代码中有以下内容。我的问题是在同一页面中处理多个表单时如何调整代码以仅选择相关表单提交？

即使不想要的表单也提交了，JS 也会激活。

我尝试将代码更改为看起来像一些东西`$('input[type=submit, name=deletenow]').click(function() {`，但它肯定看起来不准确。请帮忙。谢谢你的关注。

```
$(document).ready(function() {

    $('input[type=submit]').click(function() {

    });

    $('input[type=submit]').confirm({
        msg:'Do you really want to delete this?',
        timeout:3000
    });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T07:38:08.770

您[不应该监听](https://stackoverflow.com/questions/4529012/should-i-use-the-inputs-onclick-or-the-forms-onsubmit-event-to-validate-form-f?lq=1)提交按钮上的点击，因为这会破坏可访问性。相反，您应该在表单本身上监听提交事件。

为您的表单提供一个 ID，然后使用该 ID 侦听提交事件，如下所示：

```
<form id="yourForm" method="POST" action="">
    <input type="submit">
</form>

$('#yourForm').submit(function(event){
    event.preventDefault();  // Prevents the form from submitting.
}); 
```

该`preventDefault`方法[阻止表单提交](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-cancelation)。您可能想要创建一些调用它的条件，而不是像我的演示那样每次都停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:50:22.493

```
<form id="formForEvent" method="POST" action="">
    <input id="submit-Btn" type="submit">
</form> <!--taken from @thordarson answer with additional [id]-->

$('form#formForEvent').on('click', 'input#submit-Btn', function(){
    // your code
    return false;
}); 
```

# python - python 正则表达式 - 可选匹配

> ID：14545424
> 
> 赞同：-1
> 
> 时间：2013-01-27T07:36:22.940
> 
> 标签：python, regex

我有一堆这种风格的字符串：

```
#q1_a1
#q7 
```

基本上 # 是必须忽略的符号。# 之后是一个单字母字母加上一些数字。可选地，可以在`_`（下划线）之后跟随一些字母+数字组合。

这是我想出的：

```
>>> pat = re.compile(r"#(.*)_?(.+)?")
>>> pat.match('#q1').groups()
('q1', None) 
```

问题是`#q1_a1`格式字符串。当我将所做的应用于此类字符串时：

```
>>> pat.findall('#q1_f1')
[('q1_f1', '')] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T07:47:33.383

正如其他人所说，您的正则表达式越具体，匹配它不应该匹配的东西的可能性就越小：

```
In [13]: re.match(r'#([A-Za-z][0-9])(?:_([A-Za-z][0-9]))?', '#q1_a1').groups()
Out[13]: ('q1', 'a1')

In [14]: re.match(r'#([A-Za-z][0-9])(?:_([A-Za-z][0-9]))?', '#q1').groups()
Out[14]: ('q1', None) 
```

笔记：

1.  如果您只需要匹配整个字符串，请用`^`and包围正则表达式`$`。
2.  您说“某个数字”，但您的示例仅包含一个数字。如果您的正则表达式需要接受多个数字，请将 更改`[0-9]`为`[0-9]+`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T07:39:41.343

您的“。*”匹配也下划线，因为匹配是贪婪的。更好地创建更具体的正则表达式，以从第一组中排除下划线。

正确的正则表达式可能如下所示：

```
#([a-z][0-9])_?([a-z][0-9])? 
```

但是您需要检查它是否适用于您期望的所有数据。

附言。在正则表达式中更具体会更好，因为您的误报更少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T07:42:48.200

当你使用`.*`时，它会*贪婪*匹配尽可能多的。尝试：

```
>>> pat = re.compile(r"#([^_]*)_?(.+)?")
>>> pat.findall('#q1_f1')
[('q1', 'f1')] 
```

同样，最好写一个更具体的表达式：

```
#([a-z][0-9])(?:_([a-z][0-9]))? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T07:45:35.307

不使用正则表达式的简单替代方案：

```
s = '#q7'
print s[1:].split('_')
# ['q7']

s = '#q1_a1'
print s[1:].split('_')
# ['q1', 'a1'] 
```

这是假设您所有的字符串都以`#`. 如果不是这种情况，那么您可以轻松地进行一些验证：

```
s = '#q1_a1'
if s.startswith('#'):
    print s[1:].split('_')
# ['q1', 'a1]

s = 'q1_a1'
if s.startswith('#'):
    print s[1:].split('_')  # Nothing is printed 
```

# asp.net - 如何创建 youtube 缩略图链接，如 youtube

> ID：14545430
> 
> 赞同：2
> 
> 时间：2013-01-27T07:37:04.750
> 
> 标签：asp.net, video, youtube

我已经在 youtube 频道上传了视频。

使用 [http://www.codeproject.com/Articles/207284/Displaying-Videos-from-YouTube-Channel-in-ASP-NET](http://www.codeproject.com/Articles/207284/Displaying-Videos-from-YouTube-Channel-in-ASP-NET)

我能够显示频道中的所有视频。但我不想在我的网站上播放视频。

我想在我的网站上显示视频链接，当点击它应该去 youtube 播放。

我希望链接成为视频链接的缩略图链接 youtube 向我们展示了缩略图右下角的总时间。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:05:36.653

你可以参考这里`thumbnail`使用`video`

[https://developers.google.com/youtube/2.0/developers_guide_dotnet#Retrieving_and_searching_for_videos](https://developers.google.com/youtube/2.0/developers_guide_dotnet#Retrieving_and_searching_for_videos)

```
 foreach (MediaThumbnail thumbnail in video.Thumbnails)
 {
   Console.WriteLine("\tThumbnail URL: " + thumbnail.Url);
   Console.WriteLine("\tThumbnail time index: " + thumbnail.Time);
 } 
```

# sql - SQL Server：无法访问临时表

> ID：14545432
> 
> 赞同：10
> 
> 时间：2013-01-27T07:37:37.697
> 
> 标签：sql, sql-server, tsql

如何从此查询创建表值函数？

我需要计算`HH:MM`开始和结束工作时间之间的时间

当我在 SQL 中运行此查询时，它会起作用：

```
DECLARE @USERID int;
SET @USERID = 10

DECLARE @JOBStartDATE DATETIME;
SET @JOBStartDATE = (SELECT StartJOBHoursDATE FROM JOBs WHERE ID=@USERID) 

DECLARE @StartTime DATETIME;
DECLARE @JOBDateTime DATETIME;
DECLARE @JOBEvent nvarchar(50);
DECLARE @totalTime int;
SET @totalTime = 0;

SELECT  ROW_NUMBER() OVER(ORDER BY JOBID) AS ROWNUM, JOBDateTime,JOBEvent  INTO #TEMP FROM  JOBsActivityData where JOBID = @USERID and JOBDateTime >= @JOBStartDATE
DECLARE @MaxRownum INT
SET @MaxRownum = (SELECT MAX(RowNum) FROM #TEMP)
DECLARE @Iter INT
SET @Iter = (SELECT MIN(RowNum) FROM #TEMP)

WHILE @Iter <= @MaxRownum
BEGIN
SET @JOBDateTime =(SELECT JOBDateTime FROM #TEMP WHERE RowNum = @Iter)
SET @JOBEvent =(SELECT JOBEvent FROM #TEMP WHERE RowNum = @Iter)
IF(@JOBEvent = 'START')
BEGIN
SET @StartTime =(SELECT JOBDateTime FROM #TEMP WHERE RowNum = @Iter)
END
IF(@JOBEvent = 'END' AND @StartTime IS NOT NULL)
BEGIN
SET @totalTime = @totalTime + (SELECT DATEDIFF(minute,@StartTime,@JOBDateTime))
SET @StartTime = NULL;
END

    SET @Iter = @Iter + 1
END

DROP TABLE #TEMP

SELECT CAST((@totalTime / 60) AS VARCHAR(8)) + ':' + 
       CAST((@totalTime % 60) AS VARCHAR(2)) AS JOBHours 
```

当我尝试创建时出现此错误

> *无法从函数内访问临时表。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-27T07:42:49.370

服务器不允许修改函数中的**任何**表。请改用表变量。

```
declare @temp table (RowNum int, JOBDateTime DateTime, JOBEvent int)

insert into @temp
  SELECT ROW_NUMBER() OVER(ORDER BY JOBID) AS ROWNUM, 
         JOBDateTime,
         JOBEvent  
    FROM JOBsActivityData 
   where JOBID = @USERID and JOBDateTime >= @JOBStartDATE
... 
```

使用表变量时，不需要删除它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T07:41:39.210

不要使用临时表，而是使用表变量，这应该可以解决您的问题。看到这个类似的问题[Cannot access temporary tables from within a function](https://stackoverflow.com/questions/9561626/cannot-access-temporary-tables-from-within-a-function)

# haskell - 读取 Tchan 会导致阻塞或轮询吗？

> ID：14545436
> 
> 赞同：12
> 
> 时间：2013-01-27T07:38:16.600
> 
> 标签：haskell, ghc, stm

首先，一些背景。我想要一个队列，我想以两种不同模式之一操作。在第一种模式下，如果队列中存在一个元素，我希望能够检索一个元素，但如果没有元素，*则不阻塞。*在第二种模式下，我希望能够阻塞直到队列有一个元素。（我知道我可以为每种模式使用专门的机制，但我想排除一些通用代码，因此如果我可以对两种操作模式使用相同的机制，那将是最简单的。）

我可以使用`Chan`，但根据文档，我不应该使用`isEmptyChan`它，因为由于可能出现死锁，它已被弃用。这给我留下了`TChan`. 该`tryReadTChan`函数为我提供了我想要的第一种模式（即我可以检查元素是否存在而不阻塞），但我不确定究竟是什么`readTChan`。我的心智模型是，该`atomically`块将不断重试，直到通道中出现一个元素，这意味着它会忙于循环浪费 CPU 周期；这与`readChan`（即非 STM 版本）不同，后者（如果我理解正确的话）实际上会阻塞线程的执行，直到元素可用，因为运行时线程调度程序可以理解 MVar。

`TChan`就像这样，`Chan`如果我使用`readTChan`运行时足够聪明，不会在值可用之前调度调用线程？还是会浪费大量 CPU 周期不断轮询一个值到达？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T07:49:06.577

STM 阻塞（通过`retry`）的行为就像它立即重试事务一样，但实现更智能：由于 STM 会跟踪您在事务进行时读取的变量，它知道事务的行为方式相同，只要这些变量具有相同的值。因此，当事务失败时，它会阻塞（实际上不会重试），直到您使用的变量之一发生更改。在`TChan`s 的情况下，这意味着它会阻塞，直到有人写入`TChan`.

我推荐 Simon Marlow 关于并发和并行 Haskell 的[幻灯片](http://community.haskell.org/~simonmar/slides/cadarache2012/)，以很好地介绍 STM（以及其他内容）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-27T07:47:13.457

您的心智模型具有正确的指称语义，但错过了 STM 所做的操作优化。当一个事务在 STM 中重试时，它会阻塞，直到`TVar`它在重试之前读取的一些内容被更改。（是的，`TChan`是根据`TVar`.）

因此，执行事务与事务不断重试具有相同的含义——但 STM 系统足够智能，不会在事务中发生不同情况的情况下不忙循环。

# java - Java 泛型绑定不匹配错误

> ID：14545437
> 
> 赞同：0
> 
> 时间：2013-01-27T07:38:19.630
> 
> 标签：java, generics

我正在用 Java 编写一个通用的链表实现。代码是

```
public class LinkedList<T> {
    private Node<T> top;
    private int no_of_items;

    private class Node<T extends Comparable<? super T>> {
        T data;
        Node<T> next;
    }

    public LinkedList() {
        top = null;
    }

    public boolean isEmpty() {
        return (top == null);
    }

    public void insert(T item) {
        Node<T> node = new Node<T>();
        node.data = item;
        node.next = top;
        if(isEmpty()) {
            top = node;
        } else {
            Node<T> n = top; 
            while(n.next != null) {
                n = n.next;
            }
            n.next = node;
        }
        no_of_items++;

    }
} 
```

我想要的是`T`应该是`Comparable`。在编译此代码时，我在初始化 Node.js 时遇到错误。

```
Bound Mismatch the type T is not a valid substitute for the bounded parameter <T extends Comparable<? super T>> of the type LinkedList<T>.Node<T> 
```

我无法弄清楚这里有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:41:02.797

我自己解决了这个错误。正确的代码是

```
 public class LinkedList<T extends Comparable<? super T>> {
private Node top;
private int no_of_items;

private class Node {
    T data;
    Node next;
}

public LinkedList() {
    top = null;
}

public boolean isEmpty() {
    return (top == null);
}

public void insert(T item) {
    Node node = new Node();
    node.data = item;
    node.next = top;
    if(isEmpty()) {
        top = node;
    } else {
        Node n = top; 
        while(n.next != null) {
            n = n.next;
        }
        n.next = node;
    }
    no_of_items++;

}
    } 
```

答案在于，当我们在顶级类中使用泛型类型 T 并且我们有非静态内部类时，相同的 T 在内部类中也是可见的。

谢谢，

# java - 使用二进制数据对 java servlet 进行单元测试

> ID：14545440
> 
> 赞同：1
> 
> 时间：2013-01-27T07:38:57.260
> 
> 标签：java, unit-testing, servlets, jetty, binary-data

我正在尝试编写 Java Servlet 单元测试以将二进制数据 http 请求发送到 servlet 并接收二进制响应。通常我使用 jetty ServletTester 和 HttpTester 来对 servlet 进行单元测试，但是 HttpTester 似乎还不支持二进制请求。

任何想法如何在java中对二进制servlet进行单元测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T07:55:06.160

似乎在[Jetty 8](http://grepcode.com/file/repo1.maven.org/maven2/org.eclipse.jetty/test-jetty-servlet/8.0.0.M0/org/eclipse/jetty/testing/HttpTester.java#HttpTester.0_charset) HttpTester 中以二进制格式存储内容。

您可以扩展 HttpTester 并手动设置 _genContent（它是受保护的）。或者您可以将字节解释为具有与HttpTester中相同的[字符集的字符串。](http://grepcode.com/file/repo1.maven.org/maven2/org.eclipse.jetty/test-jetty-servlet/8.0.0.M0/org/eclipse/jetty/testing/HttpTester.java#HttpTester.%3Cinit%3E%28java.lang.String%29)

# ruby - 将哈希值插入字符串

> ID：14545442
> 
> 赞同：0
> 
> 时间：2013-01-27T07:39:27.117
> 
> 标签：ruby, arrays, string, hash, insert

我有一个哈希数组的格式

```
albums = [ {name: "Sgt. Pepper's Lonely Hearts Club Band", year: "1967" }, 
           { name: "Are You Experienced?", year: "1967" } 
         ] 
```

ETC..

我正在尝试将此输出插入到一个字符串中，然后需要将其插入到 html 中。我目前有这个

```
def convert_to_html albums
  string_before = 
    "<html>
      <head>
        <title>\"Rolling Stone's ....\"</title>
      </head>
      <body>
        <table>\n" + 
        albums.each do |x| 
          "name is: #{x.values[0]} year is: #{x.values[1]}"
        end  + "
        </table>
      </body>
    </html>"
end 
```

我知道这可能不是获取值的最佳方式，但我想不出任何其他方式，但我的主要问题是，当我尝试这个时，我得到了这个错误：

```
[2013-01-27 00:16:20] ERROR TypeError: can't convert Array into String
    albums.rb:72:in `+'
    albums.rb:72:in `convert_to_html'
    albums.rb:28:in `block in render_list'
    albums.rb:26:in `open'
    albums.rb:26:in `render_list'
    albums.rb:9:in `call' 
```

有没有办法将每个散列中的值并排插入到字符串中？

PS为了便于阅读，我使用了名称和年份。我知道 #{x.values[0]} #{x.values[1]} 是格式化它的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:02:07.880

在 Ruby 中，`String#+`不会*将*右操作数隐式转换为字符串。

```
# like post - oops!
> "hello " + ["world", "moon"]
=> #<TypeError: can't convert Array into String>

# valid, but .. ugly
> "hello " + ["world", "moon"].to_s
=> "hello [\"world\",\"moon\"]"

# likely desired
> "hello " + ["world", "moon"].join(" and ")
=> "hello world and moon" 
```

此外，在帖子中`albums.each .. do`返回初始数组（专辑）对象，但这仍然是错误的，因为块的结果被丢弃（使用 Array.each 执行副作用）。相反，使用[`albums.map .. do`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-collect)（或`albums.collect .. do`）来收集/使用块结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:04:26.700

这是一个简单的代码，展示了如何做到这一点：

```
album_list = [
  {name: "Sgt. Pepper's Lonely Hearts Club Band", year: "1967" }, 
  { name: "Are You Experienced?", year: "1967" } 
]

def convert_to_html(albums)

"<html>
  <head>
    <title>\"Rolling Stone's ....\"</title>
  </head>
  <body>
    <table>
" + albums.map { |album| 
"     <tr><td>name is: #{ album[:name] } year is: #{ album[:year] }</td></tr>"
}.join("\n") +
"
    </table>
  </body>
</html>"

end

puts convert_to_html(album_list) 
```

哪个输出：

```
<html>
  <head>
    <title>"Rolling Stone's ...."</title>
  </head>
  <body>
    <table>
    <tr><td>name is: Sgt. Pepper's Lonely Hearts Club Band year is: 1967</td></tr>
    <tr><td>name is: Are You Experienced? year is: 1967</td></tr>
    </table>
  </body>
</html> 
```

在现实生活中，我会使用[ERB](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)或[HAML](http://haml.info)来生成 HTML。它们是很棒的模板工具。

其他写法：

```
<tr><td>name is: #{ album[:name] } year is: #{ album[:year] }</td></tr>" 
```

是：

```
<tr><td>name is: %s year is: %s </td></tr>" % [ album[:name], album[:year] ] 
```

或者：

```
<tr><td>name is: %s year is: %s </td></tr>" % album.values_at(:name, :year) 
```

我不建议单独使用`album.values`，因为它依赖于插`album`入哈希的顺序。将来，如果您通过在维护代码的同时以不同的顺序将某些内容放入其中来修改哈希，那么`values`顺序将会改变，以一种可能不明显的方式破坏它。

相反，请使用其中一种访问值的方式来始终明确地获取与键关联的值。这是防御性编程的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:09:49.147

albums.each 并没有按照您的想法进行。我的印象是您希望它在这些行中附加一些内容到您的字符串中。

名字是：中士。Pepper's Lonely Hearts Club Band 年份是：1967 名称是：Are you Experienced？年份是：1967

实际发生的事情实际上什么都不是。您在 .each 中有一个表达式，它与同时尝试将专辑数组附加到您的字符串中的 for 循环相同。因此无法将 Array 转换为 String 错误。

实现您想要的最简单的方法是将字符串放在前面，然后将其附加到您的字符串中。类似于此的东西。

```
def convert_to_html albums
append_string = ""
albums.each do |album|
  append_string += "<tr><td>name is: #{album[:name]} year is #{album[:year]} </td></tr>"
end

string_before =
  "<html>
    <head>
      <title>\"Rolling Stone's ....\"</title>
    </head>
    <body>
      <table>\n" + append_string + "
      </table>
    </body>
  </html>"
end 
```

# android - 执行 doInBackground() Twitter4J 时发生错误

> ID：14545452
> 
> 赞同：3
> 
> 时间：2013-01-27T07:41:45.613
> 
> 标签：android, multithreading, android-asynctask, twitter4j

我正在使用 Twitter4J 库，并且正在尝试实现一些异步任务来对服务进行一些调用，如下所示。

```
public class TweetsActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_post_tweet);
    new getFollowers().execute();

}
@SuppressWarnings("unused")
private class getFollowers extends AsyncTask<String,Void,List<String>>
{

    @Override
    protected List<String> doInBackground(String... arg0) {
        List<String> friends = null;
        Twitter t = ((TwitterApplication)getApplication()).getTwitter();
        try {
            IDs names  = t.getFollowersIDs("jd_biggestboss");
            for(int i:names.getIDs())
            {
                friends.add(t.showUser(i).getScreenName());

            }
            return friends;
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }// TODO Auto-generated method stub
        return null;
    }

    protected void onPostExecute(List<String> result) {
        for(String name:result)
            System.out.println(name);

     }

}

} 
```

我收到一个错误。这是堆栈跟踪。我检查以确保我没有从我的 UI 线程等访问任何 UI 元素。那么可能导致问题的原因是什么？难道我对 API 的每个调用都需要在一个单独的异步任务中吗？提前致谢。

```
01-27 02:22:58.042: W/dalvikvm(30528): threadid=11: thread exiting with uncaught exception (group=0x40ab0a08)
01-27 02:22:58.052: E/AndroidRuntime(30528): FATAL EXCEPTION: AsyncTask #1
01-27 02:22:58.052: E/AndroidRuntime(30528): java.lang.RuntimeException: An error occured while executing doInBackground()
01-27 02:22:58.052: E/AndroidRuntime(30528):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.lang.Thread.run(Thread.java:864)
01-27 02:22:58.052: E/AndroidRuntime(30528): Caused by: java.lang.NullPointerException
01-27 02:22:58.052: E/AndroidRuntime(30528):    at com.tmm.android.twitter.TweetsActivity$getFollowers.doInBackground(TweetsActivity.java:40)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at com.tmm.android.twitter.TweetsActivity$getFollowers.doInBackground(TweetsActivity.java:1)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-27 02:22:58.052: E/AndroidRuntime(30528):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-27 02:22:58.052: E/AndroidRuntime(30528):    ... 5 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:44:08.500

`ArrayList`在 doInBackground 方法中添加元素之前，您需要初始化朋友：

```
List<String> friends = new ArrayList<String>(); 
```

# gdal - PyEphem/GDAL 在特定投影的特定范围内查找角度和仰角

> ID：14545455
> 
> 赞同：1
> 
> 时间：2013-01-27T07:42:02.137
> 
> 标签：gdal, pyephem

例如，我正在创建一条 5000 米长的线，该线在具有高度的观察点与直接位于观察者和被观察物体之间的路径中的点之间。

就我而言，现在是太阳。

我找不到一种预先存在的方法来找到椭球上两点之间的斜率。

一种从 PyEphem 提供的任何结果或转换中找到全局椭球投影（如 WGS94 墨卡托）中的北角和斜率的方法会让我快速上手。

# configuration - 如何将丢失文件的请求重定向到不同的服务器（nginx配置）？

> ID：14545456
> 
> 赞同：1
> 
> 时间：2013-01-27T07:42:03.577
> 
> 标签：configuration, nginx

如果在服务器上找不到图像，我想将图像请求重定向到 github repo。我在哪里做错了？

```
 location ~* \.(gif|jpg|jpeg|png)$ {
            try_files $uri /gitpipe =404;
    }

    location ~* /gitpipe$ {
            proxy_pass https://raw.github.com/Org/$arg_repo/master/$uri;
    } 
```

* * *

我将配置更改为下一个

```
location ~* \.(gif|jpg|jpeg|png)$ {
    try_files $uri /gitpipe =404;   
}

location = /gitpipe {
            proxy_pass http://websaints.net/rlog.php?save;
} 
```

但结果还是一样。Nginx 不会将请求重定向到静态 url [http://websaints.net/rlog.php?save](http://websaints.net/rlog.php?save)；所以问题不在 $uri 中。

* * *

顺便说一句，此配置有效，但它重定向到 uri，而不是代理并缓存它

```
location ~* \.(gif|jpg|jpeg|png)$ {
    try_files $uri @redirect;
}

location @redirect {
            return 301 http://websaints.net/rlog.php?save&req=$request_uri;
} 
```

嗯……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:40:39.443

首先，您可以轻松地将您的更改`location`为：

```
location = /gitpipe { 
```

因为它的含义与 `^/gitpipe$' 相同，但在 nginx 中具有最高优先级，因此该位置将始终被视为第一个。

接下来，您将尝试返回文件（如果存在），因此使用 url 如下：

```
http://your.domain.com/some_dir/another_dir/some_file.gif 
```

通过第一个`location`块，您尝试从`root`指令中获取文件：

```
root_directive/some_dir/another_dir/some_file.gif 
```

如果这个文件不存在，那么你告诉`try_files`指令它应该在第二个`location`块中搜索，在这里你是代理传递这样的 url：

```
proxy_pass https://raw.github.com/Org/$arg_repo/master/$uri; 
```

但对于我们的示例，这将意味着：

```
proxy_pass https://raw.github.com/Org/$arg_repo/master//root_directive/some_dir/another_dir/some_file.gif 
```

`$arg_repo`它的价值将在哪里改变。

对您的指令所做的解释是否正是您的想法？

**以下是您可以轻松重定向到所需内容的方法：**

```
location ~ \.(jpg|png|gif) {
   try_files $uri /proxy$request_url =404;
}

location ^~ /proxy(.*) {
   proxy_pass https://your.proxy.domain/$1;
} 
```

# dependency-injection - Castle Windsor 使用参数解析对象

> ID：14545457
> 
> 赞同：0
> 
> 时间：2013-01-27T07:42:17.940
> 
> 标签：dependency-injection, castle-windsor

```
public class Component1
{
    public Component1(Component2 comp, Component3 comp3)
    {
        Component2 = comp;
        Component3 = comp3;
    }

    public Component3 Component3 { get; set; }

    public Component2 Component2 { get; set; }
}

public class Component3
{
    public Component3(Component2 comp)
    {
        Component2 = comp;
    }

    public Component2 Component2 { get; set; }
}

public class Component2
{
    private Guid _guid = Guid.NewGuid();
}

[TestMethod]
    public void InjectingUsingDictionary()
    {
        var container = new WindsorContainer();
        container.Register(Component.For<Component1>().ImplementedBy<Component1>().LifestyleTransient());
        container.Register(Component.For<Component2>().ImplementedBy<Component2>().LifestyleTransient());
        container.Register(Component.For<Component3>().ImplementedBy<Component3>().LifestyleTransient());
        Component1 c;
        var component2 = new Component2();
        using (container.BeginScope())
        {
            IDictionary arguments = new Dictionary<string, object> { { "comp", component2 }, { "Component2", component2 } };
            c = container.Resolve<Component1>(arguments);
            c.Component2.Should().Be(c.Component3.Component2);
        }
    } 
```

大家好！当我解决时，我想传递一个 Component2 的实例来初始化所有道具，Windsor 将它传递给整个对象图中的所有构造函数参数。可能吗？

# c# - 通过 iCal 文件发送电子邮件邀请

> ID：14545458
> 
> 赞同：1
> 
> 时间：2013-01-27T07:42:19.187
> 
> 标签：c#, icalendar

在这一点上，我已经被这个问题困扰了几个小时，我无法弄清楚这个问题。

我想通过 iCal 文件通过电子邮件（gmail）发送邀请，

如果我发送一个事件，它可以工作（接收者可以获得邀请，并且可以单击“是”将此邀请添加到接收者的日历中），

但它失败了（Gmail 只会显示一个邀请，如果我点击是，我想将它添加到我的日历，它只会向我的日历添加一个邀请）如果我发送两个事件。

代码如下：

```
protected void Page_Load(object sender, EventArgs e)
{

    MailMessage msg = new MailMessage("testxxx@gmail.com", "testxxx@gmail.com", "test", "test");

    msg.IsBodyHtml = true;

    SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);

    smtp.Credentials = new NetworkCredential("test", "test");

    msg = GetCalanderInviteMsg3(msg);

    smtp.EnableSsl = true;

    smtp.Send(msg);
}

public static MailMessage GetCalanderInviteMsg3(MailMessage msg)
{    

    StringBuilder sb = new StringBuilder();
    sb.AppendLine("BEGIN:VCALENDAR");
    sb.AppendLine("PRODID:-//Google Inc//Google Calendar 70.9054//EN");
    sb.AppendLine("VERSION:2.0");
    sb.AppendLine("CALSCALE:GREGORIAN");
    sb.AppendLine("METHOD:PUBLISH");
    sb.AppendLine("X-WR-CALNAME:test");
    sb.AppendLine("X-WR-TIMEZONE:Asia/Taipei");
    sb.AppendLine("X-WR-CALDESC:");
    sb.AppendLine("BEGIN:VEVENT");
    sb.AppendLine("DTSTART;VALUE=DATE:20130705")`
    sb.AppendLine("DTEND;VALUE=DATE:20130706");
    sb.AppendLine("DTSTAMP:20130127T040705Z");
    sb.AppendLine("UID:" + "c643b569-9ba8-45c1-9264-8f160411872a");
    sb.AppendLine("CREATED:20130624T082605Z");
    sb.AppendLine("DESCRIPTION:");
    sb.AppendLine("LAST-MODIFIED:" + "2013127T054310Z");
    sb.AppendLine("LOCATION:");
    sb.AppendLine("SEQUENCE:0");
    sb.AppendLine("STATUS:CONFIRMED");
    sb.AppendLine("SUMMARY:event1");
    sb.AppendLine("TRANSP:TRANSPARENT");
    sb.AppendLine("END:VEVENT");
    sb.AppendLine("BEGIN:VEVENT");
    sb.AppendLine("DTSTART;VALUE=DATE:20130703");
    sb.AppendLine("DTEND;VALUE=DATE:20130704");
    sb.AppendLine("DTSTAMP:20130127T040730Z");
    sb.AppendLine("UID:" + "84395bf9-875e-4925-864f-910309e0a355");
    sb.AppendLine("CREATED:20080624T082556Z");
    sb.AppendLine("DESCRIPTION:");
    sb.AppendLine("LAST-MODIFIED:" + "2013127T054320Z");
    sb.AppendLine("LOCATION:");
    sb.AppendLine("SEQUENCE:0");
    sb.AppendLine("STATUS:CONFIRMED");
    sb.AppendLine("SUMMARY:event2");
    sb.AppendLine("TRANSP:TRANSPARENT");
    sb.AppendLine("END:VEVENT");
    sb.AppendLine("END:VCALENDAR");
    System.Net.Mime.ContentType ct = new System.Net.Mime.ContentType("text/calendar");
    ct.Parameters.Add("method", "REQUEST");
    AlternateView avCal = AlternateView.CreateAlternateViewFromString(sb.ToString(), ct);
    msg.AlternateViews.Add(avCal);

    return msg;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:06:30.093

问题不在于您的代码（尽管根据 rfc5545 强制使用不同的 uid），而在于来自不同日历应用程序的 GUI。

如果我们扩展您的用例，它们可能是电子邮件中的 100 或 1000 个事件，GUI 应该是什么样子？为每个单独的事件单击 100 或 1000 个串联按钮？

因此，即使您的代码是正确的并且 iMIP (RFC6047) 也表示可以包含超过 1 个 VEVENT，但拥有超过 1 个事件并不是一个好习惯，因为用户需要一一批准它们。

如果您想要拥有 2`instances`个相同的事件（因此具有相同的 UID），您应该使用 RDATE 属性在一个 EVENT 中指定您的 2 个日期，然后您的用户可以接受 1 个事件的邀请（这将有 2 个实例）。

# google-chrome-extension - 如何从 google chrome 和 firefox 调用 Windows 应用程序？

> ID：14545479
> 
> 赞同：2
> 
> 时间：2013-01-27T07:46:22.147
> 
> 标签：google-chrome-extension, firefox-addon

我想从 google chrome 或 Firefox 调用 Windows（仅限 7/Vista/XP）应用程序。我正在考虑制作一个插件来做到这一点。我可以查看这里提到的教程[如何制作 firefox 或 google Chrome 插件？](https://stackoverflow.com/questions/2934635/how-to-make-firefox-or-google-chrome-add-on). 但是，在此之前，我想知道是否可以从这些浏览器调用 Windows 应用程序。这样做是否可取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T08:24:08.223

**在 Chrome 上（Firefox 也支持 npapi）**

你有 NPAPI (c extension) 可以直接调用 os

[https://developer.chrome.com/extensions/npapi.html](https://developer.chrome.com/extensions/npapi.html)

`ShellExecuteEx`来自 npapi 的电话

**在火狐上**

你也有这个调用 os 命令

[https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess)

来自上述网址的示例

```
// create an nsILocalFile for the executable
var file = Components.classes["@mozilla.org/file/local;1"]
                     .createInstance(Components.interfaces.nsILocalFile);
file.initWithPath("c:\\myapp.exe");

// create an nsIProcess
var process = Components.classes["@mozilla.org/process/util;1"]
                        .createInstance(Components.interfaces.nsIProcess);
process.init(file);

// Run the process.
// If first param is true, calling thread will be blocked until
// called process terminates.
// Second and third params are used to pass command-line arguments
// to the process.
var args = ["argument1", "argument2"];
process.run(false, args, args.length); 
```

# iphone - 从 iphone 中的 sqlite 数据库更新表视图数据

> ID：14545480
> 
> 赞同：1
> 
> 时间：2013-01-27T07:46:44.210
> 
> 标签：iphone, ios, sqlite, uitableview

我在 sqlite 数据库中插入数据，在第二个选项卡中我将插入数据显示到分组表视图中，但是我插入的最后一个数据不会显示在表视图中，尽管当我再次运行应用程序时会显示所有数据，如何我可以在表格视图中显示所有插入数据？？

这是我从费用表中选择名称和金额的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    NSInteger section = [indexPath section];
    NSInteger row = [indexPath row];
    NSLog(@"sec%i",section);
    NSLog(@"row%i",row);
    NSMutableArray *NAMeA= [[NSMutableArray alloc]init ];
    NSMutableArray *DateA= [NSMutableArray array];
    if (sqlite3_open([[AppDelegate getDBPath] UTF8String], &database) == SQLITE_OK) {
        const char *sql ="select ExpenseMonth,count(*) as day from Expense  where strftime('%m',ExpenseMonth)=strftime('%m','now') group by ExpenseMonth order by ExpenseMonth desc";

        sqlite3_stmt *selectstmt;
        int result = sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL);
        if( result== SQLITE_OK) {
            while(sqlite3_step(selectstmt) == SQLITE_ROW) {

                NSString *dateAndTime=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];
                NSInteger numofday=sqlite3_column_int(selectstmt,1);

                MaxEntity *DatTime=[[MaxEntity alloc]initWithDate:dateAndTime andnumofDay:numofday];                
                [DateA addObject:DatTime];
                [NAMeA removeAllObjects];
                NSLog(@"Date %@",dateAndTime);
                NSString *querySQL =[NSString stringWithFormat:@"select Name, amount from Expense  where ExpenseMonth=\"%@\" order by ExpenseMonth desc",dateAndTime];
                const char *query_stmt = [querySQL UTF8String];
                sqlite3_stmt *selectstm = NULL;
                int result = sqlite3_prepare_v2(database, query_stmt, -1, &selectstm, NULL);
                if( result== SQLITE_OK) {
                    while(sqlite3_step(selectstm) == SQLITE_ROW) {
                        NSString *NAMe=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstm, 0)];
                        NSString *Amount=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstm, 1)];
                        MaxEntity *NM=[[MaxEntity alloc]initWithName:NAMe andAmount:Amount];
                        [NAMeA addObject:NM];
                        NSLog(@"text%@",NAMe);

                        if ([indexPath section]+1 ==[DateA count] && [indexPath row]+1==[NAMeA count]) {
                            cell.textLabel.text =NM.name;
                            cell.detailTextLabel.text = NM.amountD;
                            NSLog(@"%@ name",NM.name);

                        }
                    }
                }
                sqlite3_finalize(selectstm);
            }
        }else {
            NSLog(@"failed to prepare %d",result);
        }
    }
    else{

        NSLog(@"Faile to open db");
        sqlite3_close(database);
       [self.table reloadData];

    }
    self.NameArray =NAMeA ;

    self.DateArray = DateA;
       [self.table reloadData];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:48:42.407

您需要`UITableView`在执行操作后重新加载`insert/delete/update`。

```
[self.YourTableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:10:43.593

正如评论中已经说过的..

要在选项卡出现时更新表格，请添加第二个选项卡的实现文件：

```
- (void)viewWillAppear:(BOOL)animated{

       [super viewWillAppear:animated];
       NSLog(@"updateTable");

     [self.table reloadData];
    //or - depend of your your conf
    //[self.tableView reloadData];

} 
```

# php - PayPal_Adaptive::CURLRequest() 的声明应该与 PayPal::CURLRequest() 的声明兼容

> ID：14545486
> 
> 赞同：1
> 
> 时间：2013-01-27T07:49:18.787
> 
> 标签：php, paypal

当我尝试创建发票时出现上述错误。发票创建成功，但上述错误没有发生。

我发现了这个，但它不起作用 [-方法声明应该与 PHP 中的父方法兼容](https://stackoverflow.com/questions/3115388/declaration-of-methods-should-be-compatible-with-parent-methods-in-php) 这是函数-

```
class PayPal
{
    .
    .
    .
    /**
     * Send the API request to PayPal using CURL
     *
     * @access  public
     * @param   string  NVP string
     * @return  string
     */
    function CURLRequest($Request)
    {
        $curl = curl_init();
                // curl_setopt($curl, CURLOPT_HEADER,TRUE);
                curl_setopt($curl, CURLOPT_VERBOSE, 1);
                curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE);
                curl_setopt($curl, CURLOPT_TIMEOUT, 30);
                curl_setopt($curl, CURLOPT_URL, $this->EndPointURL);
                curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($curl, CURLOPT_POSTFIELDS, $Request);

        if($this->APIMode == 'Certificate')
        {
            curl_setopt($curl, CURLOPT_SSLCERT, $this->PathToCertKeyPEM);
        }

        $Response = curl_exec($curl);       
        curl_close($curl);
        return $Response;   
    }

    .
    .
}

class PayPal_Adaptive extends PayPal
    {
        .
        .
        .   
        /**
         * Send the API request to PayPal using CURL
         *
         * @access  public
         * @param   string $Request
         * @param   string $APIName
         * @param   string $APIOperation
         * @return  string
         */
        function CURLRequest($Request, $APIName, $APIOperation)
        {
            $curl = curl_init();
                    curl_setopt($curl, CURLOPT_VERBOSE, 1);
                    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE);
                    curl_setopt($curl, CURLOPT_TIMEOUT, 30);
                    curl_setopt($curl, CURLOPT_URL, $this -> EndPointURL . $APIName . '/' . $APIOperation);
                    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
                    curl_setopt($curl, CURLOPT_POSTFIELDS, $Request);
                    curl_setopt($curl, CURLOPT_HTTPHEADER, $this -> BuildHeaders(false));

            if($this -> APIMode == 'Certificate')
            {
                curl_setopt($curl, CURLOPT_SSLCERT, $this -> PathToCertKeyPEM);
            }

            $Response = curl_exec($curl);       
            curl_close($curl);
            return $Response;
        }
        .
        .
    } // End Class PayPal_Adaptive 
```

我已将所有参数更改为相同的数字以及相同的默认值，但似乎不起作用。系统正在使用自定义错误处理程序。我也试过这个 -`error_reporting(E_ALL & ~(E_NOTICE | E_DEPRECATED | E_STRICT));`

我已经从[这里](http://www.angelleye.com/download-angell-eye-php-class-library-for-paypal/)下载了这个库。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T02:28:46.723

看来您必须使用我[的 PayPal 的 PHP 类库](http://www.angelleye.com/download-angell-eye-php-class-library-for-paypal/)..??

我已经在我当前的本地版本中修复了这个问题，但在发布官方更新之前我还有一些其他的东西要更新。

要解决此问题，请将该函数的开始行设置为以下...

```
function CURLRequest($Request = '', $APIName = '', $APIOperation = '')
{

} 
```

根据您使用的我的库的版本，PayPal Here、PayFlow 和 PayPal Access 可能还有其他扩展类。如果您有这些，只需对这些扩展类中的 CURLRequest 函数进行相同的更改，使其在任何地方都匹配。

这将消除通知。

# c# - 从根应用程序使用 MediaElement 运行视频

> ID：14545492
> 
> 赞同：1
> 
> 时间：2013-01-27T07:50:52.130
> 
> 标签：c#, wpf, video, mediaelement

我想获取在我的应用程序文件夹之一中退出的视频文件的地址，例如我有以下代码：

```
<MediaElement x:Name="meShowClip" 
 Source="G:\Clip\ANIMFORCD.MPG"     
 FlowDirection="LeftToRight" 
 Width="800" Height="600" /> 
```

此代码运行正确。

我想将地址更改为相对地址。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:55:04.527

阅读有关[`MediaElement.Source`](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.source.aspx). 那里你`Source`有财产。

那里有相对路径的示例。

您必须`G:\Clip`从路径中删除，但您必须确保视频文件在您的可执行文件夹中。

这应该有效：

```
<MediaElement x:Name="meShowClip" 
 Source="ANIMFORCD.MPG" 
 FlowDirection="LeftToRight" 
 Width="800" Height="600" /> 
```

您拥有可执行文件的文件夹应如下所示：

```
──┬─ Your folder
  ├─── Executable.exe
  ├─── ANIMFORCD.MPG
  └─── Other files... 
```

# android - 无法使用eclipse创建完整的android应用

> ID：14545493
> 
> 赞同：2
> 
> 时间：2013-01-27T07:51:16.170
> 
> 标签：android, eclipse, apk

我刚刚审查了很多问题，以确保我的问题没有重复。安装`Android SDK`, `JDK`, `Eclipse`,`ADT`插件后。我开始创建一个android项目，但我想我可能无法创建任何项目。这些是我得到的文件：

![在此处输入图像描述](../Images/e09c351aace7ba9eb17bf8f829a8e8ac.png)

此外，当我尝试运行该应用程序时，我得到了`Could not find LSCP.apk!`. 正如我告诉你们的那样，我回顾了很多关于这个问题的问题，但没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:30:05.380

看看以下链接是否对您有帮助：

[http://peepaal.org/profiles/blogs/getting-started-with-android](http://peepaal.org/profiles/blogs/getting-started-with-android)

如果您已按照这些步骤操作...请尝试同一教程中的下一步...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:56:20.453

从现有源创建项目时，我看到过类似的情况。您可以修复它 - 进入项目属性到 android 构建路径。摆脱那里的一切。然后读取您的 src 和 gen 文件夹，并从 SDK 读取您的 android jar 文件。在订购屏幕中，确保 android jar 位于其他两个之前。当您在那里时，请确保将 Java 编译器设置为 1.6。这样做，它应该重构自己并失去灰显的外观并最终编译（可能需要先进行清理）。

# codeigniter - 使用 codeigniter 的服务器错误

> ID：14545494
> 
> 赞同：1
> 
> 时间：2013-01-27T07:51:22.777
> 
> 标签：codeigniter

我在同一主机上有两个带有 codeigniter 的脚本，其中一个运行良好。但另一个是显示服务器错误。当我## Heading ## 关注问题时，我注意到当我注释该行时没有出现服务器错误（在文件 CodeIgniter.php 中）：

```
call_user_func_array(array(&$CI, $method), array_slice($URI->rsegments, 2)); 
```

## 更新：

我的`htaccess`文件是：

```
RewriteEngine on 
RewriteCond $1 !^(index\.php?|images|robots\.txt|favicon\.ico) 
RewriteRule ^(.*)$ index.php?/$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:31:06.233

用这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

然后，如果您的 ci 在目录下运行，请`for example "/foo"`替换为：

```
RewriteEngine On
RewriteBase /foo
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /foo/index.php/$1 [L] 
```

# android - 带有特殊字符的 SearchManager

> ID：14545496
> 
> 赞同：2
> 
> 时间：2013-01-27T07:51:28.640
> 
> 标签：android, android-searchmanager

我正在使用 SearchManager 在数据库中搜索单词。它适用于标准字母，但是当使用特定语言的字母（č、ž、š）时，它只会在字母位于单词中间的情况下找到单词。如果字母在单词的开头，则返回没有数学（但它们存在于数据库中）。SearchManager 的编码可以更改吗？

# python - 替换 XML 中的文本，忽略粗体和斜体标记

> ID：14545497
> 
> 赞同：-2
> 
> 时间：2013-01-27T07:51:30.623
> 
> 标签：python, xml, regex, xml-parsing

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我有一个任意 XML 字符串，它也有`<b>, <i>`具有通常含义的标签。我只需要在纯文本中执行字符串替换。不应替换节点定义中的任何内容。

例如，我想用 * 替换“hello”。XML之类的`<hello a="hello">text sayh<b>ell</b>o more text</hello>`应该成为`<hello a="hello">text say* more text</hello>`

做这个的最好方式是什么？我打算`regex`只使用，但这个问题被否决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:12:15.473

一个非常快速和肮脏（强调肮脏）的解决方案，它只是实现规则“仅当下一个尖括号不是闭合尖括号时才匹配”将是

```
hello(?![^<>]*>) 
```

这可能适用于您的 XML 文件，但它可能会以各种方式在有效 XML 上失败（在无效 XML 上甚至更多）。

**编辑：**

自从我原来的答案以来，问题已经发生了很大的变化，所以答案不再正确。如果你想忽略粗体/斜体标签，你要么首先必须完全删除它们，搜索`</?[bi]>`并用空字符串替换所有这些，然后运行上面的正则表达式（但这将删除*所有* 这些标签，而不仅仅是里面的标签`hello`，或使用

```
</?[bi]>h</?[bi]>e</?[bi]>l</?[bi]>l</?[bi]>o</?[bi]>(?![^<>]*>) 
```

而不是上面的正则表达式。到目前为止，我认为您可以看到正则表达式对于此类任务并不是一个可靠的工具。但这应该已经从评论中清楚了。

# python - 将多个项目打印到一行

> ID：14545499
> 
> 赞同：0
> 
> 时间：2013-01-27T07:51:56.067
> 
> 标签：python, printing

我一直在尝试制作一个程序来加密您输入的任何消息。目前，每个数字（原始消息的每个字符为 1）以相反的顺序打印在每个数字的单独行上。如果可能的话，我希望将数字打印在同一行上。

到目前为止，这是我的代码：

```
whinger = 0F
bewds = raw_input ('Please enter the message that you wish to encrypt: ')
dooblew = list(bewds)
wetler = len(dooblew)FF
dooblew.reverse();
while whinger < wetler:
    print ord(dooblew[whinger])
    whinger += 1 
```

随机变量名称是为了确保它们不太可能被用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:41:25.680

您可以使用`sys.stdout.write(str(ord(dooblew[whinger]))`而不是`print`语句（当然，您必须`import`使用`sys`模块）。

或者，您可以在`print`语句后添加一个逗号。这将摆脱换行符，但仍用空格分隔每个值。

旁白：随机变量名称有点毫无意义。它们使代码难以阅读，如果用户输入您的变量名称之一，它不会有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:48:40.453

在 python 2 上，您可以在 print 的末尾使用逗号来表示 print 默认情况下不会换行。所以在这种情况下你的语法是

```
whinger = 0
bewds = raw_input ('Please enter the message that you wish to encrypt: ')
dooblew = list(bewds)
wetler = len(dooblew)
dooblew.reverse();
while whinger < wetler:
   print ord(dooblew[whinger]),
   whinger += 1 
```

在 Python 3 的情况下，同样可以通过

```
whinger = 0
bewds = raw_input ('Please enter the message that you wish to encrypt: ')
dooblew = list(bewds)
wetler = len(dooblew)
dooblew.reverse();
while whinger < wetler:
   print(ord(dooblew[whinger]), end='')
   whinger += 1 
```

# java - 根据 Google Map Android API v2 上的一组位置确定合适的缩放级别

> ID：14545500
> 
> 赞同：1
> 
> 时间：2013-01-27T07:52:08.617
> 
> 标签：java, android, android-maps-v2

我正在尝试查找是否有一种算法/方法可以帮助确定初始显示的合适缩放级别。

例如，给定一组位置点 A、B、C、D 和 E，我如何确定将在屏幕上显示所有位置的正确缩放级别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:31:43.530

```
LatLngBounds.Builder builder = new LatLngBounds.Builder();
for (Location loc : allLocations) {

    LatLng position = new LatLng(loc.getLatitude(), loc.getLongitude());
    builder.include(position);

}

CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(builder.build(), someMarginValue);
map.moveCamera(cu); 
```

# google-app-engine - GAE Python ImportError：没有模块——在本地工作，但不在云中

> ID：14545503
> 
> 赞同：2
> 
> 时间：2013-01-27T07:52:49.787
> 
> 标签：google-app-engine, python-2.7, importerror

这适用于本地开发。但是，当我部署到生产环境时，我遇到了问题。我收到的错误如下：

```
Traceback (most recent call last):
File "/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", 
line 196, in Handle
handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
File "/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", 
line 255, in _LoadHandler
handler = __import__(path[0]) ImportError: No module named shamn 
```

这是我的 app.yaml 文件供参考：

```
application: shaman-labz
version: 1-4
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /css
  static_dir: css

- url: /s
  static_dir: s

- url: /api.*
  script: shamn.app

- url: /.*
  script: helloworld.app

libraries:
- name: jinja2
  version: latest 
```

我已经尝试了我能想到的一切来仔细检查任何潜在的命名冲突。helloworld.app 适用于本地和云，但 /api.* 显然正确映射到 shamn.app，但由于某种原因没有看到“shamn”。我已经检查并三次检查了根目录中是否存在 shamn.py（与 app.yaml 和 helloworld.py 相同的目录）。我重命名为 shamn.py，因为之前我有一个名为 shaman 的静态目录，我认为它可能会导致云中的冲突。我什至尝试从 1.3 --> 1.4 更改版本以确保一切都是干净的......等等......仍然无法弄清楚为什么会发生这种情况......请注意，在该过程的每个步骤中，我都验证了推送到云端之前的本地开发环境。因为这纯粹是服务器端问题，

作为参考，这是我非常简单的测试 shamn.py（我将再次尝试并重命名）[更新-只是为了删除任何未知数，我从等式中删除了 json...

```
import jinja2
import os
#import json

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):

        template_values = {
            'greetings': [],
            'url': 'url',  
            'url_linktext': 'url_linktext'
        }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

class testclass(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('hello world from testclass.get')
    def post(self):
        #jsonobj = json.loads(self.request.body)
        #self.response.out.write(json.dumps(jsonobj))
        self.response.out.write(self.request.body)

app = webapp2.WSGIApplication([
        ('/api/test.*', testclass),
        ('/api.*', MainPage)                            
  ],debug=True) 
```

这适用于开发，但不适用于生产。是的，'index.html' 被验证存在（与 helloworld.app 共享），所以我想我可以排除）。请注意，我断断续续地与 GAE 合作了很多年，我从来没有这么难过，而且在一些看似如此简单的事情上。我不得不破解我所有的基本代码，现在我又回到了一堆代码……离线工作两周而不推送到云端的缺点之一（这可能更早被发现）。

任何帮助将不胜感激。

...更新，这是第二天早上，我仍然很难过...接下来我要做的就是创建一个新文件。我想要完成的只是使用简化的 xmlhttprequest 将一些 json 从客户端发布到服务器。这不应该是跨域问题，因为页面是从同一个域加载的。此外，该请求已经足够远，至少可以识别应该存在 shamn（一个 python 模块）但它找不到它。这已经重命名过一次，所以我将只是“修补”，看看我如何找到解决方案。主要问题是每次我尝试更改代码时都需要重新上传到云端，因为我无法在开发中复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:58:12.000

检查文件是否名为 Shamn.py，因为 AppEngine 在生产服务器上区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:24:27.020

this is an old question, and the answer was that the wsgi.app is in global context, meaning that there cannot be two. i had one in each shamn.py and helloworld.py (both called app), causing a conflict. got rid of helloworld, everything worked just fine.

# css - 以百分比表示的 div 高度

> ID：14545507
> 
> 赞同：23
> 
> 时间：2013-01-27T07:53:33.770
> 
> 标签：css, html, percentage, jsfiddle

> **可能重复：**
> [百分比高度 HTML 5/CSS](https://stackoverflow.com/questions/1622027/percentage-height-html-5-css)

这需要是一个简单的，但我为什么以百分比为 div 指定的高度不适用于它。

例如：

```
<div class="container">
  adsf
</div> 
```

CSS：

```
.container
{
  width:80%;
  height:50%;
  background-color:#eee;
} 
```

当我将高度从 % 更改为 px 时，它工作得很好。% 与 px 一样有效，但为什么只有 px 有效而 % 无效。[这](http://jsfiddle.net/ZedBee/j8bsS/2/)是jsfiddle

**编辑** 虽然我在原始问题中错过了 50% 之后的分号，但这完全破坏了它。事实上，我想问的是，为什么 50% 不能让它消耗 50% 的容器。它仅从内容中获取高度，而不是从其容器中获取 50%。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-27T08:03:08.107

不需要整个页面的 50% 是因为“整个页面”只是你的内容有多高。将封闭的`html`和更改`body`为`100%`高度，它将起作用。

```
html, body{
    height: 100%;
}
div{
    height: 50%;
} 
```

[http://jsfiddle.net/DerekL/5YukJ/1/](http://jsfiddle.net/DerekL/5YukJ/1/)

![在此处输入图像描述](../Images/10e25ba833e3613309b564f317faa2b6.png)

^ 您的文档只有 20 像素高。20px 的 50% 是 10px，这不是你所期望的。

![在此处输入图像描述](../Images/16814ef0fe1479d015e1bbfe71990d50.png)

^ 现在如果将文档的高度更改为整个页面的高度（150px），150px 的 50% 是 75px，那么它将起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T08:02:32.737

你也需要给 the`body`和`html`a 高度。否则，body 只会和它的内容一样高（单个 div），其中 50% 将是这个 div 高度的一半。

更新小提琴：http: [//jsfiddle.net/j8bsS/5/](http://jsfiddle.net/j8bsS/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T08:09:27.607

“50%”后有分号缺失 (;)

但您还应该注意到，您的 div 的百分比与包含它的 div 相关联。

例如：

```
<div id="wrapper">
  <div class="container">
   adsf
  </div>
</div>

#wrapper {
  height:100px;
}
.container
{
  width:80%;
  height:50%;
  background-color:#eee;
} 
```

这里你的 .container 的高度是 50px。它将是包装器 div 的 100px 的 50%。

如果你有：

广告

```
#wrapper {
  height:400px;
}
.container
{
  width:80%;
  height:50%;
  background-color:#eee;
} 
```

那么你的 .container 将是 200px。包装纸的 50%。

所以你可能想看看“包装”你的“.container”的div...

# groovy - 为什么当依赖项之一失败时执行 Gant 目标？

> ID：14545512
> 
> 赞同：0
> 
> 时间：2013-01-27T07:54:58.673
> 
> 标签：groovy, gant

这是的内容`build.gant`：

```
target('cleanCache': 'description') {
  ...
}    

target('remove': 'description') {
  ...
  File app = new File("...")
  if (!app.exists()) {
     println "Error"
     return -1
  }
  ...
  // continue if no error
  ...
}

target('default': 'description') {
  depends(cleanCache, remove)
} 
```

如果我正在运行这个脚本，如果目标`remove`失败，我将得到预期的结果：

```
...
BUILD FAILED
Total time: 2,21 seconds 
```

但是，如果我将实现添加到`default`目标，如下所示：

```
target('default': 'description') {
  depends(cleanCache, remove)
  println "Do default task"
} 
```

当目标`remove`失败时，`println`将被执行，结果是：

```
...
BUILD SUCCESSFUL
Total time: 2,20 seconds 
```

`default`目标取决于`remove`目标。如果`remove`目标失败，我希望`default`目标也失败。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:31:58.070

而不是返回整数值来指示失败的目标，您应该调用`fail()`.

# android - 有人使用 onPrimaryClipChanged 吗？

> ID：14545514
> 
> 赞同：3
> 
> 时间：2013-01-27T07:55:09.173
> 
> 标签：android, clip

有一个问题，当我使用 OnPrimaryClipChangedListener 来缓解剪贴板更改时。
它总是得到两次。有人可以帮助我吗？

代码是这样的：

```
private OnPrimaryClipChangedListener clipListener = new OnPrimaryClipChangedListener() {
    @Override
    public void onPrimaryClipChanged() {
        Log.d("mytag", '--------->clip--------->');
    }
} 
```

当我剪辑时，我得到两个日志输出。有人有同样的问题吗？

> D/mytag --------->clip--------->
> D/mytag --------->clip--------->

# c - 计算 ac 程序执行时上下文切换的次数

> ID：14545515
> 
> 赞同：3
> 
> 时间：2013-01-27T07:55:32.207
> 
> 标签：c, windows, process, context-switching

我想输出在执行我的程序时由 Windows 操作系统执行的上下文切换的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:11:08.497

为此，您可以使用 Performance-counter。

来自：http: [//msdn.microsoft.com/en-us/library/aa373083%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa373083%28VS.85%29.aspx)

您可以通过两种方式查看上下文切换数据：

*   系统监视器中的 System\Context Switches/sec 计数器报告系统范围的上下文切换。
*   Thread(_Total)\Context Switches/sec 计数器报告所有线程每秒生成的上下文切换总数。

# c - 如何用 C 语言（linux）重启 BIND9？

> ID：14545516
> 
> 赞同：1
> 
> 时间：2013-01-27T07:55:36.613
> 
> 标签：c, linux, bind, named

我写了一个程序来查看命名进程是否已经死亡，就像这样：

```
char *cmd = "pidof named | wc -l";
if((fp = popen(cmd , "r")) == NULL)
{
    throw;
}
fscanf(fp,"%d",&runningNum);
pclose(fp); 
```

如果runningNum = 0，则表明没有命名进程正在运行。所以我想重新启动BIND进程。我试图`sudo /etc/init.d/bind9 restart`用作popen（）的参数，但它不起作用。你能帮帮我吗？

# php - PHP模板类和表示逻辑？

> ID：14545518
> 
> 赞同：0
> 
> 时间：2013-01-27T07:55:58.047
> 
> 标签：php, design-patterns, controller, presentation, front-controller

我研究过前端控制器模式。我确信我将在即将到来的项目中使用这种模式。我还没有编写代码，但是，如何为我的网站使用表示逻辑？如果我想在用户登录并且用户具有某些权限时显示某些信息怎么办？如果某个表单需要数据库中的数据才能工作怎么办？（对于后者，我想用 AJAX 调用相应的控制器并以这种方式加载数据，但我不知道是否有更有效的方法）这让我有点困惑，我想尽可能避免使用框架像 Smarty 或 CakePHP。事先谢谢你。

编辑：我正在考虑使用模板控制器类，这是一个类，其职责是加载某些网页并显示它们，从前端控制器调用。我的主要问题是在调用模板页面时从数据库加载数据。如果有一个表单需要数据库中的数据怎么办？我是否必须依靠 AJAX 来加载数据，或者有没有办法告诉模板加载数据同时保持图层分离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:16:55.077

我想我得到了答案。我还没有测试过，但我认为我可以这样做。

首先，HTML5[能够为每个标签添加自定义数据属性](http://html5doctor.com/html5-custom-data-attributes/)。考虑到这一点，我可以执行以下操作，因为我们有一个`targetController`类，其中包含一个名为的方法`foo()`和一个前端控制器，该控制器将单词“Controller”附加到每个请求：

```
<select data-target="target" data-action="foo">
</select> 
```

这样我就可以在文档被渲染之前调用某个控制器并调用某个动作！现在，我可以通过[一个 DOM 库](http://php.net/manual/en/book.dom.php)来加载它们，而不是像常规方式那样包含一个模板，该库会将控制器加载委托给前端控制器作为常规请求，或者通过一个可能执行控制器加载的类。这样我就不必依赖 javascript 来做任何事情。一旦我开始工作，我一定会测试这个解决方案！

# .net - 从 vb.net 将数据插入 SQL Server

> ID：14545519
> 
> 赞同：0
> 
> 时间：2013-01-27T07:56:05.023
> 
> 标签：.net, sql, sql-server, vb.net

我在尝试将数据插入 SQL Server 数据库时遇到问题。

这是功能

```
 Public Sub Processsales()

        Dim cust_guid As Guid = Session("guid")
        Dim Iden As Guid = System.Guid.NewGuid
        Dim ssql As String
        ssql = "Insert into WebSite.wTranH ([WebTranHGUID],[TranType],[LOCTN]) values ([Iden],[2],[5])"

        Using connection As New SqlConnection(System.Configuration.ConfigurationSettings.AppSettings("SqlConnectionString"))
            Dim command As New SqlCommand(ssql, connection)
            connection.Open()
            command.ExecuteNonQuery()
        End Using
    End Sub 
```

但它给出了这些错误

> *列名“Iden”无效。*
> 
> *列名“2”无效。*
> 
> *列名“5”无效。*

有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:27:08.360

The **best approach** would be to [use a **parametrized query** to avoid SQL injection](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html) attacks:

```
Public Sub Processsales()
    Dim cust_guid As Guid = Session("guid")
    Dim Iden As Guid = System.Guid.NewGuid()

    ' define your SQL query and use parameters for the values to be inserted           
    Dim sqlQuery As String = "INSERT INTO WebSite.wTranH([WebTranHGUID], [TranType], [LOCTN]) VALUES (@HGuid, @TranType, @LocTn)"

    Dim connString As String = ConfigurationSettings.AppSettings("SqlConnectionString")

    Using connection As New SqlConnection(connString)
        Using command As New SqlCommand(sqlQuery, connection)
            connection.Open()

            ' add paramters and their values to the SqlCommand instance
            command.Parameters.AddWithValue("@HGuid", Iden)
            command.Parameters.AddWithValue("@TranType", 2)
            command.Parameters.AddWithValue("@LocTn", 5)

            command.ExecuteNonQuery()
            connection.Close()
        End Using
    End Using
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:58:27.177

你应该使用：

```
values ('Iden',2 ,5 ) 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:11:47.433

您的 sql 字符串中有两个错误。您为和列
传递固定值，但列应该获取结构的值而不是其名称。当然，值应该不带括号传递，以免与列名混淆。 您应该更改您的代码，以这种方式将 Iden 的值连接到 sql 命令：`TranType``LOCTN``WebTranHGUID``Iden`

```
Public Sub Processsales()

    Dim cust_guid As Guid = Session("guid")
    Dim Iden As Guid = System.Guid.NewGuid
    Dim ssql As String
    ssql = "Insert into WebSite.wTranH ([WebTranHGUID],[TranType],[LOCTN]) " + 
    "values (" + Iden.ToString + ",2,5)"

    Using connection As New SqlConnection(....))
        Dim command As New SqlCommand(ssql, connection)
        connection.Open()
        command.ExecuteNonQuery()
    End Using

End Sub 
```

# javascript - 使用 d3 修改 svg:path

> ID：14545522
> 
> 赞同：1
> 
> 时间：2013-01-27T07:56:20.647
> 
> 标签：javascript, html, css, svg, d3.js

我一直在研究这个问题一段时间，我很难过:(

我有一个 svg，其中包含我制作的一些按钮。然后在另一个 svg 中，我有一个带有各种线条或 svg:path 的图表。当我点击一个按钮时，我想要一条特定的线来改变颜色。我有以下代码：

```
buttons.selectAll("#infoBox")
   .data(mydata)
   .enter()
   .append("svg:image")

... some attributes here ...

   .on("click", function() 
    {
       linechart.selectAll("svg.path")    

//right now i'm just selecting all the paths                                          
//because i want to check to see if it works 

                .style("stroke", "red");

    } 
```

任何想法为什么这不起作用？[如果您需要有关我如何构建所有内容的更多信息，您可以在此处](http://www.sonia-kandah.com)查看我的代码（我是 javascript、html 和 css 的初学者，如果我的代码不是很清晰或简洁，请见谅）

感谢您的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:43:06.773

`selectAll("svg.path")`选择所有`svg`具有 class 的元素`path`。不确定这是否是你真正想要的。如果要选择`path`元素内的所有`svg`元素，应该说：`selectAll("svg path")`.

我在您提供的链接中找不到变量`linechart`。如果`linechart`指的是`svg`元素的选择，那么简单地说`linechart.selectAll("path")`就足够了。

# android - 无法加载布局：设计师不支持android版本

> ID：14545523
> 
> 赞同：2
> 
> 时间：2013-01-27T07:56:20.787
> 
> 标签：android, visual-studio-2010, xamarin.android

**编辑：这是关于 Mono for android**

我正在尝试使用 vs2010 开发 android 应用程序

但问题是，当我进入布局文件夹 main.axml 文件时，该窗口上显示的消息显示

**无法加载布局：设计师不支持android版本**

请帮忙，我现在为这个问题做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:36:26.153

通过重新安装所有东西来修复，我以前做过，但现在我重新安装了jdk。

在我安装 jdk 7 之前，但现在我安装 jdk 6 并解决了问题

我不知道为什么会这样。

# sql - 如何在windows上安装oracle客户端11g？

> ID：14545525
> 
> 赞同：1
> 
> 时间：2013-01-27T07:56:31.313
> 
> 标签：sql, database, oracle, oracle11g

我对 oracle 非常陌生，需要在这方面进行练习，所以我决定使用此链接在我的私人机器上安装[oracle](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win32soft-098987.html) 11g我在安装时没有给出任何类似 tat 的东西，在安装时它也没有提出任何要求。

```
SQL*Plus: Release 11.2.0.1.0 Production on Sun Jan 27 13:24:15 2013

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Enter user-name: sysdba
Enter password:
ERROR:
ORA-12560: TNS:protocol adapter error

Enter user-name: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:04:19.333

试试`sqlplus / as sysdba`。那你就不需要密码了。

那么你定义了 ORACLE_HOME 变量吗？如果这样做，它是否指向存储正在运行的数据库的数据库软件的正确文件夹？如果删除变量 ORACLE_HOME 会发生什么？

您是否将环境变量 ORACLE_SID 设置为数据库的名称？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:12:49.907

> 使用用户名 SYSTEM 登录数据库并以 SYSDBA 身份连接。Oracle Enterprise Manager 显示数据库主页。

```
Use the password that you specified for the SYSTEM account during the installation. 
```

> 注意：您也可以使用 SYS、SYSTEM 或 SYSMAN 帐户登录到 Database Control，或者您可以将登录权限授予其他数据库用户。如果您以 SYS 身份登录，那么您必须以 SYSDBA 身份连接。

* * *

> 使用以下语句启动 SQL*Plus 并以 SYS 用户身份登录，以 SYSDBA 身份连接：

```
$ $ORACLE_HOME/bin/sqlplus 
SQL> CONNECT SYS as SYSDBA
Enter password: SYS_password 
```

例如，要以 SYSTEM 身份登录，请输入：

```
$ $ORACLE_HOME/bin/sqlplus 
SQL> CONNECT SYSTEM
Enter password: password 
```

如果您以 SYS 身份登录，则必须以 SYSDBA 身份连接：

```
$ $ORACLE_HOME/bin/sqlplus 
SQL> CONNECT SYS as SYSDBA
Enter password: SYS_password 
```

参考：

*   [http://docs.oracle.com/cd/E11882_01/install.112/e16763/rev_precon_db.htm](http://docs.oracle.com/cd/E11882_01/install.112/e16763/rev_precon_db.htm)

*   [http://docs.oracle.com/cd/B25329_01/doc/admin.102/b25610/toc.htm](http://docs.oracle.com/cd/B25329_01/doc/admin.102/b25610/toc.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:41:48.610

首先检查以下链接。在您运行 oracle 实例的服务器上跟踪它们，您将启动您的 oracle 实例。

[ORA-12560: TNS: 协议适配器错误](https://stackoverflow.com/questions/6894558/ora-12560-tnsprotocol-adaptor-error)

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::p11_question_id:431775600346873836](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::p11_question_id:431775600346873836)

如果仍然存在任何与 TNS 相关的错误，可能需要检查 $ORACLE_HOME/network/admin 下的 tnsnames.ora 和 listener.ora 文件。

当您连接到 oracle 时，客户端（例如 sqlplus）将尝试查找在服务器机器上运行的 oracle 实例。当找不到服务器时，它将报告与 TNS 相关的错误。

要解决此问题，您需要先配置安装目录下的 tnsname.ora 文件（默认为 $ORACLE_HOME/network /admin）。

tnsnames.ora 文件的基本格式为：

```
net_service_name=
 (description=
 (address=(protocol_address_information))
 (connect_data=
 (service_name=service_name))) 
```

示例 tnsnames.ora 条目可能如下所示：

```
ORA_INSTANCE=
  (description=
    (address_list=
      (address = (protocol = TCP)(host = yourmachine)(port = 1521))
    )
    (connect_data =
      (service_name=ora_sid)
    )
  ) 
```

这样配置后，你可以尝试：

```
sqlplus /@ORA_INSTANCE as sysdba; 
```

然后你安装的oracle客户端会根据你在tnsnames.ora文件中的配置找到ORA_INSTANCE。如果 oracle 服务器正在侦听，则将建立您的连接。顺便说一句，如果还有任何错误，您可能需要查看服务器机器上的 listener.ora。

我附上了以下 tnsnames.ora 中常用的参数：

***description***：此 tnsnames.ora 参数充当连接描述符的容器。它可以嵌入在 tnsnames.ora 文件的 description_list 参数下。

***description_list***：这个 tnsnames.ora 参数定义了一个特定网络服务名称的连接描述符列表。

***address***：这个 tnsnames.ora 参数定义了一个单一的监听器协议地址。它可以嵌入在 tnsnames.ora 文件中的 address_list 或 description 参数下。

**address_list**：这个 tnsnames.ora 参数定义了多个监听器协议地址。如果只使用一个侦听器协议地址，则没有必要。它可以嵌入在 tnsnames.ora 文件中的 description 或 description_list 参数下。

# git - git squash 为公共服务器提交，但为私有服务器保留详细的提交

> ID：14545527
> 
> 赞同：5
> 
> 时间：2013-01-27T07:57:04.990
> 
> 标签：git, version-control, github, git-rebase

我正在编写一个开源库。我正在使用两个遥控器：一个用于个人测试平台和备份的私人仓库，另一个在 github 上托管。

在私人仓库中，这是我保存并执行大量提交和推送所有小更改的地方，例如“固定拼写”或“仍在处理错误 #123！”。这很好，我想保持这种方式。私人回购永远不会分享给任何人。

在 github 上的公共 repo 上，我希望我的 git 提交历史是干净的。将多个提交合并为一个提交，例如“Fixed bug #123”。

问题是，如何在两个不同的远程仓库上维护两个单独的 git 历史记录？

我一直在阅读关于`git rebase`. 会`rebase`改变那个分支的整个历史吗？如果我重新设置公共回购的历史记录，私人回购是否也会重新设置？

如果我维护两个分支会更好吗？公共服务器是否有可能只看到一个分支（作为主服务器），而另一个看到两个分支都有详细的提交？

我不确定这种情况下的最佳做法是什么。感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T09:12:16.250

> 问题是，如何在两个不同的远程仓库上维护两个单独的 git 历史记录？

我要提防你，那个分支不应该是长寿的。长期存在的分支有一天会变得一团糟，因为它应该与开发分支（或您的分支开始的分支）同步，这就是为什么鼓励您`git rebase develop`这样做等等。

实际上，很难理解在不同的遥控器中拥有一个分支的两个版本有什么好处。在您的公共回购中拥有这个分支有什么意义，它将包含单个提交并且一直被强制更新？至于我，这听起来像是无用的废话。

**现实生活中的事情是如何发生的：**

*   你发布你的分支和你所做的所有提交；

*   当功能完成并且每个人都同意将此分支合并到一个`develop`（或创建它的位置）分支中时，可以将其压缩为单个提交，也可以按原样合并。

*   应该删除您正在使用的远程功能分支，因为它已合并到另一个分支，并且不会补充任何提交。

所以，除了你的分支开始的分支之外，没有什么需要维护的。

**回答问题文字：**

如果您想拥有一个包含您在当前分支中所做的所有更改的单一提交的分支，您可以执行以下操作：

*   获取您在当前分支中所做的所有更改。`git diff ${SHA}`，`${SHA}`您的分支开始的分支的最后一次提交在哪里。
*   将此差异重定向到补丁文件`> patch.diff`。
*   结帐`${SHA}`到`git checkout ${SHA}`.
*   使用`patch -p1 < patch.diff`.
*   使用`git commit -m '...'`.
*   用 .重命名任何你想要的分支`git branch -m`。
*   使用 将其推送到远程`git push ${REMOTE_NAME} ${BRANCH_NAME}`。
*   在下次推送到公共远程之前重置此提交`git reset HEAD~1`。

但是所有这些看起来都是普通开发人员永远不会使用的丑陋杂物：[

# java - android中有没有用于用户管理的API？

> ID：14545528
> 
> 赞同：1
> 
> 时间：2013-01-27T07:57:15.787
> 
> 标签：java, android, user-management

我正在开发一个可供多组用户使用的 Android 应用程序。我想管理我的用户对我的应用程序每个部分的访问。

我知道.Net 中有一个用户管理结构。我想知道Java或Android中是否有类似的用户管理和访问控制，或者我必须完全自己实现这个结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:03:36.687

您的意思是设备本身上有多个用户吗？多用户支持仅在 4.2 中添加，这意味着即使在大多数新设备上你也不能指望它。除了文件系统之外，没有真正支持阻止访问。

或者你的意思是你的应用程序有一个他们需要登录的网络服务，并且它的一部分应该只被某些用户组访问？如果是这样，没有。但无论如何，这更像是一种服务器功能而不是客户端功能——永远不要相信客户端会验证自己，这就是你获得安全马裤的方式。

# java - JPA表的ID是强制性的吗？

> ID：14545530
> 
> 赞同：0
> 
> 时间：2013-01-27T07:57:23.090
> 
> 标签：java, jpa, eclipselink

我看到每个 JPA 表中都定义了 ID 类型。它是强制性的吗？或者有没有什么选项可以让我在没有 ID 成员的情况下上课？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:59:51.580

Id（即主键）在 JPA 中是强制性的。正如 JSR317（Java Persistence API，可以在[这里](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec/)下载）第 2.4 章所说（第一句）：

```
Every entity must have a primary key 
```

顺便说一句，除了`Id`注释之外，还可以对复合主键使用`EmbeddedId`注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T08:14:07.090

JPA 需要 Id，但不要求映射中指定的 Id 与数据库中的 Id 匹配。

例如，您可以将没有 id 的表映射到 jpa 实体。为此，只需指定“Jpa Id”是所有列的组合。

请注意，出于性能原因，在 Jpa 中指定为 Id 的列上有一个良好的索引很重要

# php - 是否可以对未定义的对象进行回调？

> ID：14545535
> 
> 赞同：0
> 
> 时间：2013-01-27T07:58:22.430
> 
> 标签：php, callback, undefined

是否可以定义一个在未定义对象时调用的函数？所以我可以`$makeUpOntheFlyObjectNames->something();`在函数中获取对象名称，函数名称和它的参数数组，或者如果没有，则为空数组。它试图调用什么？有一个想法`$varName->length();`在 V5.x 中为字符串和东西制作类似的东西。试图用谷歌搜索，但得到的东西`class_exists`和东西一样，所以认为人类会有更好的答案。但我认为这是不可能的，只是想在这里检查一下。

因此，如果找不到对象，并且正在调用长度，请检查它是否是字符串，然后返回 strlen 的结果，否则如果它不是字符串，则模拟 php 自己的错误。只是我有一些想法，但不确定是否甚至可以进行第一部分的检测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:05:30.557

您可以尝试以下方法：

```
$objName = 'test';
//check if the object exists
if(isset($$objName)){
//object exists...
}
else{
//do what you want here
} 
```

尝试“按原样”运行它或在此代码之前添加一行，例如：

```
$test = array(1=>'a',2=>'b');
$objName = 'test';
... 
```

看看你是如何“落入”“if”而不是“else”的

# javascript - jQuery 检查道具。的 Radio 并取消选中 onClick 并检查颜色

> ID：14545539
> 
> 赞同：0
> 
> 时间：2013-01-27T07:59:03.040
> 
> 标签：javascript, jquery, radio-button

所以这里是代码

```
<html>
    <head>
        <link href="../../fuctions/style.css" rel="stylesheet" media="screen" type="text/css" />
        <script type="text/javascript" charset="utf-8" src="../../fuctions/cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="../../fuctions/functions.js"></script>
        <script type="text/javascript" charset="utf-8" src="../../fuctions/jq.js"></script>
    </head>
    <body>
        <div id="topbar">
            <div id="title"><!--Title-->
                After Landing
            </div>  
            <div id="leftnav">
                <a href="../../index_aerosoft.html">Home</a>
                <a href="katana_checklist_all.html">Overview</a><!--AllChecklist-->
            </div>
            <div id="rightnav">
                <a href="katan_checklist_engineshut-downl.html"id="a_next">Next</a></div><!--NextPage-->
            </div>
            <div id="content">
                <ul class="pageitem">
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Wing Flaps -<font color="red"> UP
                        </font></span>
                        <input name="1" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Carburetor Heat -<font color="red"> OFF
                        </font></span>
                        <input name="2" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Exterior Lights -<font color="red"> as required
                        </font></span>
                        <input name="3" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                    <li class="radiobutton" onClick="checkChanges()">
                        <span class="name">Electric Fuel Pump -<font color="red"> OFF
                        </font></span>
                        <input name="4" type="radio" value="other" />
                    </li><!--CheckpunktEnd-->
                </ul>
            </div>
            <div id="footer">
                <a class="noeffect" href="#" onClick="resetChecklist();">Reset Checklist</a><!--ResetChecklist-->
                <br /><br />
                <a class="noeffect" href="#" onClick="openxyzDE();">xyz</a>
            </div>
    </body>
</html> 
```

我有一个检查“无线电被检查并改变颜色”的功能

```
function checkChanges()
{

    $('.radiobutton font').attr('color', 'red');

    $('.radiobutton :checked').closest('.radiobutton').find('font').attr('color', 'green');
}

$(function()
  {
  checkChanges();
  $('.radiobutton :radio').on('click', checkChanges);
  }); 
```

我想在该代码中添加一个函数，如果选中并再次单击 Radio（onClick），则取消选中 Radio，这也应该将颜色改回红色。

这是代码的JSFiddle :)！[http://www.jsfiddle.net/syTQD](http://www.jsfiddle.net/syTQD)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:32:33.393

这可能会帮助你

```
function checkChanges() {
    // remove this line $('.radiobutton font').attr('color', 'red');
    font = $(this).closest('.radiobutton').find('font')

    if (this.flag) {
        this.checked = false;
        font.attr('color', 'red');
    } else {
        font.attr('color', 'green');
    }

    this.flag = !this.flag;
} 
```

# javascript - 使用支持从右到左的 JavaScript 创建 PDF

> ID：14545540
> 
> 赞同：2
> 
> 时间：2013-01-27T07:59:18.813
> 
> 标签：javascript, pdf-generation

我是 JavaScript 的初学者，我知道有很多方法可以即时创建 PDF 文件。我发现的一个例子是 jsPDF (hspdf.com)

然而，据我所知，jsPDF 不支持从右到左的语言（例如阿拉伯语或希伯来语）。yuu 是否知道通过 RTL 支持即时创建 PDF 文件的任何方法？

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:20:23.190

我有另一个选择，那就是**[TCPDF](http://www.tcpdf.org)**。

TCPDF 是使用 PHP 而不是 JavaScript 的 PDF 创建器。但是您可以使用 AJAX 链接 PHP 和 JavaScript。一个简单的方法是使用**[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)**。您可以使用 JavaScript 通过 AJAX 将数据传递给 PHP 以处理数据以创建 PDF。TCPDF 与 HTML 和 CSS 完全兼容。您可以使用 HTML 设计布局。对于要从​​右到左打印的文本，只需使用 CSS 属性即可；

```
.element_class{
  direction:rtl;
} 
```

**[以下](http://www.tcpdf.org/examples.php)**是 TCPDF 的一些示例。

# android - 打开 project.properties 文件时出现资源不同步错误

> ID：14545544
> 
> 赞同：1
> 
> 时间：2013-01-27T07:59:51.830
> 
> 标签：android, eclipse

每当我尝试打开项目的 project.properties 文件时，都会出现以下错误：-**无法打开编辑器：资源与文件系统不同步：'/FamilyTracker/project.properties'。**

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:04:59.103

这是在日食吗？文件是否在其他地方打开？选择文件后尝试单击“刷新”。

在 Eclipse 中，您可以在 Window->Preferences 菜单，然后 General > Workspace 上启用自动刷新。在那里，标记“自动刷新”。这将自动为您刷新文件并避免不同步消息，即使您也在 eclipse 之外编辑文件。

顺便说一句，在 Indigo 版本的 Eclipse 上，自动刷新设置现在是“访问时刷新”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T16:32:10.127

选择项目名称并右键单击-> 刷新，然后进行更改，例如重命名项目名称或相关内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T10:57:34.433

窗口 -> 首选项 -> 常规 -> 工作区

![在此处输入图像描述](../Images/acff69f2bcb21c4b308bc84c888a6777.png)

# android - 如何在同一设备上拥有多个应用程序变体？

> ID：14545549
> 
> 赞同：1
> 
> 时间：2013-01-27T08:01:44.393
> 
> 标签：android

我必须维护比较大的android应用程序。当我进行更改并将其安装在设备上时，它会安装在以前的版本之上，使其不可用。同时，我希望安装两个版本（更改和未更改），以比较他们的行为。因此，对于更改版本，克隆代码库并更改 AndroidManifest.xml 中的包属性。但作为副作用，这会在处理布局 xml 文件时导致错误：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:cyberdyne="http://schemas.android.com/apk/res/com.cyberdyne.mobile"
          android:background="@drawable/back_grad">
     <TableRow android:paddingBottom="15dp">
          <com.cyberdyne.mobile.EmptyByDefaultSpinner

          ^ error: No resource identifier found for attribute 'defaultLabel' in package com.cyberdyne.mobile'

              android:layout_height="@dimen/spinner_height"
              android:layout_width="fill_parent"
              cyberdyne:defaultLabel="@string/labelRDCAccount"
              style="@style/DefaultAppearancePlus"/>
     </TableRow> 
```

我读到其中的包`xmlns:cyberdyne="http://schemas.android.com/apk/res/com.cyberdyne.mobile"`应该与 AndroidManifest.xml 中的相同，但我不想更改所有布局描述（有很多）。

有没有一种快速的方法可以在同一设备上安装多个应用程序变体，而无需对代码库进行大量更改？

# javascript - Chosen.js：使用幻灯片效果为下拉菜单设置动画

> ID：14545550
> 
> 赞同：3
> 
> 时间：2013-01-27T08:01:49.617
> 
> 标签：javascript, jquery, jquery-chosen

所以，[选择](http://harvesthq.github.com/chosen/)的插件很棒。有谁知道如何在下拉选择框中添加一点效果，使其在单击时滑动而不是弹出没有动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T10:56:41.137

您的问题有解决方案。

CSS：

规则`.chosen-container`

添加

```
display: none; 
```

并删除

```
left: -9999px; 
```

现在我们必须绑定一些事件：

```
$('.chosen-select').on('chosen:showing_dropdown', function() {
    $(this).next('.chosen-container').children('.chosen-drop').slideDown(400);
}).on('chosen:hiding_dropdown', function () {
    $(this).next('.chosen-container').children('.chosen-drop').slideUp(400);
}); 
```

就这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:17:56.293

Chosen 没有太多的 API，所以我正在使用[Select2](http://ivaynberg.github.com/select2/)，它是 Chosen 的更高级的继任者。从 Chosen 到 Select2 的语法切换相当简单。

这会让您关闭，但 Select2 会在关闭时隐藏搜索结果。你必须处理那个。

[http://jsfiddle.net/isherwood/9WgAB/](http://jsfiddle.net/isherwood/9WgAB/)

```
$("#mySelect").select2().on('open',function(){
    $('.select2-drop').hide().slideDown();
}).on('close',function(){
    $('.select2-drop').show().slideUp();
}); 
```

# vmware - 相同的虚拟化开发环境，不同的客户端站点

> ID：14545555
> 
> 赞同：-1
> 
> 时间：2013-01-27T08:02:57.623
> 
> 标签：vmware, virtualization

我花了很多时间在多个客户站点工作，并希望尽可能保持我的开发环境一致。我正在考虑使用包含我的开发环境的单个虚拟机映像，理想情况下可以在任何位置运行。预计将面临哪些性能瓶颈以及如何处理它们？我不知道运行此设置的最快方法，但我目前有一个 USB 3.0 外置硬盘驱动器。磁盘 I/O 是否会成为瓶颈，有哪些替代方案？例如[固态硬盘](http://www.amazon.com/s/ref=sr_nr_p_85_0?rh=n:172282,n%3a!493964,n:541966,n:193870011,n:1292116011,k%3assd,p_85:2470955011&bbn=1292116011&keywords=ssd&ie=UTF8&qid=1359273700&rnid=2470954011)？虚拟机的同一份副本是否应该在不同指令集架构（例如 AMD、Intel、ARM）的机器上工作？

我目前只使用 VMWare Player。我用高级语言编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:18:07.863

我们使用 VMware fusion 和 ssd 驱动器。您需要计算出 vm 需要多少内存和处理能力，并确保主机有足够的资源来运行自己和 vm。

如果您总是需要离开并重新加入 Windows 域，您也会遇到麻烦。购买高规格笔记本电脑并运行您的虚拟机可能更容易。在另一个磁盘上保留您的 vm 的副本，以防发生某些事情。

# c# - 串行数据、线程和复选框

> ID：14545557
> 
> 赞同：0
> 
> 时间：2013-01-27T08:03:25.993
> 
> 标签：c#, multithreading, checkbox

我正在为物理课做一个项目，并想尝试和一个应用程序一起执行以下操作。测试单元上有一个串行端口，以 1 Hz 的频率输出数据。我想要一个可以读取串口数据并将其保存到文件的应用程序。我在控制台应用程序中创建了它，它工作正常。现在，我想要一个 GUI。在 GUI 的主屏幕上，我想要几个复选框。一种是用户可以在传入的数据流中添加时间戳，一种是将数据输出到文本文件，一种是将数据发送到我的石墨图形服务器。

所以，我在这里寻找一些指示。现在，我有一个连接按钮。按下时，它会打开串行端口并执行 serial.readline() 但如果当前没有数据通过链接推送，则应用程序被锁定。所以我假设我需要使用线程。这听起来正确吗？

最后，如何处理复选框？我想要总共 4 个按钮。连接/断开记录/暂停。至少这些是我的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:18:03.117

无需为串行端口创建线程，只需挂钩[DataReceived](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)事件。

至于复选框挂钩到[CheckedChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.checkedchanged.aspx)事件。

所以它看起来像：

```
private bool paused;
private SerialPort sp;

public Form1()
{
    InitializeComponent();

    sp = new SerialPort();
    sp.DataReceived += new SerialDataReceivedEventHandler(sp_DataReceived);
}

private void sp_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    if (!paused)
    {
        string indata = sp.ReadExisting();

        //Display the data
        //To avoid cross thread problems do something like this
        Invoke(new Action(() =>
        {
            textBox1.Text += indata;
        }));

        //Or if you are just writing to the console 
        Console.WriteLine(indata); //Thread safe

        //Timestamp checkbox
        if (checkBox3.Checked)
        {
            //Display timestamp using DateTime.Now  
        }

    //Write to file checkbox
    if (checkBox4.Checked)
    {
        using (StreamWriter file = new StreamWriter(path, true))
        {
            file.WriteLine(indata);
        } 
    }
}
}

//Pause/Resume Checkbox
private void checkBox1_CheckedChanged(object sender, EventArgs e)
{
    paused = checkBox1.Checked;
}

//Connect/Disconnect checkbox
private void checkBox2_CheckedChanged(object sender, EventArgs e)
{
    if (checkBox2.Checked)
    {
        sp.Open();
    }
    else
    {
        sp.Close();
    }
} 
```

# jquery - jquery sortable：嵌套列表：在子列表之间移动子列表项，但不创建新列表

> ID：14545559
> 
> 赞同：0
> 
> 时间：2013-01-27T08:03:40.940
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我在列表中有 jquery 可排序列表。在下面的示例中，我想在子列表之间移动项目，但子列表项必须保留在子列表中。

此外，Mary 和 Peter 类别应该可以相互排序。

```
Stuff Mary does
    get food
    find dj
Stuff Peter does
    make drinks
    play piano 
```

我有：

```
<ul id="s1">
    <li>Stuff Mary does
        <ul id="s2" > 
          <li > get food  </li> 
          <li >find dj  </li> 
        </ul>
    </li> 
    <li >Stuff Peter does
        <ul id="s3" > 
          <li > make drinks  </li> 
          <li >play piano  </li> 
        </ul>
    </li> 
</ul>

$( "#s1, #s2, #s3" ).sortable(); 
```

这将子列表项保留为子列表项，但它们不能在两个列表之间移动。如果 ul 具有相同的 id，则子列表项可以在子列表中移动，但它们也可以（永久）成为列表。为子列表提供相同的 ID，与父级分开，也不起作用。

# logging - 鼠标位置记录器

> ID：14545560
> 
> 赞同：1
> 
> 时间：2013-01-27T08:03:58.870
> 
> 标签：logging, macros, ui-automation, autohotkey

对于 Windows 7 应用程序，我想编写一个简单的脚本，它可以在 csv 日志文件中记录时间戳的当前位置、鼠标光标和窗口名称。**我希望它仅在用户单击鼠标时**登录后台以对我的程序进行可用性测试。格式为 csv：

```
timestamp, mouse_btn_name mouse_xpos,mouse_ypos, title_window_handler 
```

我在[这里找到了一个例子](http://www.autohotkey.com/docs/commands/MouseGetPos.htm)，但现在根据我的要求是一个完整的例子。我如何进行日志记录？

```
MouseGetPos, xpos, ypos 
Msgbox, The cursor is at X%xpos% Y%ypos%. 

; This example allows you to move the mouse around to see
; the title of the window currently under the cursor:
#Persistent
SetTimer, WatchCursor, 100
return

WatchCursor:
MouseGetPos, , , id, control
WinGetTitle, title, ahk_id %id%
WinGetClass, class, ahk_id %id%
ToolTip, ahk_id %id%`nahk_class %class%`n%title%`nControl: %control%
return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:16:55.027

您的示例每 100 毫秒记录一次，这会创建一个非常长的列表。
如果您只想在单击鼠标按钮时记录，请使用以下内容：

```
~LButton::
MyButton = Left
GoSub, MyRecord
Return

~RButton::
MyButton = Right
GoSub, MyRecord
Return

MyRecord:
MouseGetPos, xpos, ypos 
WinGetTitle, title, A
FormatTime, CurrentDateTime,, yyyy-MM-dd-HH-mm-ss 
FileAppend, %CurrentDateTime%`,%xpos%`,%ypos%`,%MyButton%`,%title%`n, C:\Temp\Record.csv
Return 
```

让我知道这是否适合。
编辑：更改为`csv`分别记录鼠标左右动作

# c++ - 使用静态标准库构建 Visual C++ 静态库

> ID：14545565
> 
> 赞同：0
> 
> 时间：2013-01-27T08:04:23.030
> 
> 标签：c++, windows, visual-studio, visual-c++

我有一个依赖于标准库的 C++ 静态库。如果我选择将标准库链接为 DLL，则构建 OK。但是，如果我将它链接为 LIB，我就会遇到问题。我的库是指静态标准库，我的 EXE 是指标准库和 MFC，我收到错误消息“函数 XXX 已定义”（这里 XXX 表示任何标准库函数，如 operator new、free、malloc 等）。所以，看起来我的静态 C++ 库不仅导出了它自己的函数，还导出了标准库函数，并且它们被导入到 C++ 程序中两次。有没有办法解决这个问题并创建使用静态标准库的静态库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:44:32.277

您的静态库包含标准库的完整副本，您将两者静态链接在一起。显然，将该库链接到您的应用程序会导致重复符号。也许静态链接应用程序可以解决这个问题，因为链接器可能会丢弃标准库的这些重复副本，但我认为这不适用于 MFC。将您的静态库与 DLL 标准库链接起来，这听起来可能有些矛盾，但实际上并非如此。

# android-mediaplayer - 类型与 Mediaplayer 设置不匹配

> ID：14545566
> 
> 赞同：0
> 
> 时间：2013-01-27T08:04:22.843
> 
> 标签：android-mediaplayer

我正在尝试按照教程进行操作：[http](http://www.rbgrn.net/content/307-light-racer-20-days-61-64-completion) ://www.rbgrn.net/content/307-light-racer-20-days-61-64-completion但只需快速复制和粘贴，我就会立即收到错误“类型不匹配：无法从 Object 转换为 MediaPlayer”，用于以下行：

```
 MediaPlayer mp = players.get(music); 
```

附加信息：

```
private static HashMap players = new HashMap(); 
```

和“类型不匹配：无法从元素类型 Object 转换为 MediaPlayer”：

```
 for (MediaPlayer p : mps) { 
```

附加信息：

```
Collection mps = players.values(); 
```

任何想法为什么以及如何解决这个问题？PS我是一个新手程序员，所以请在必要时解释所有细节。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T05:55:37.843

线路有问题：

```
private static HashMap players = new HashMap(); 
```

你必须写

```
private static HashMap<Int,MediaPlayer> players = new HashMap(); 
```

并在每个“Collection mps”行上将其投射到（MediaPlayer）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T08:18:07.740

我将哈希图更改为稀疏数组：

这一行：

```
private static HashMap players = new HashMap(); 
```

对此：

```
private static SparseArray<MediaPlayer> players = new SparseArray<MediaPlayer>(); 
```

然后在我使用的每个 Collection mps 事件中：

```
for(int i = 0; i < players.size(); i++)
{
   if(players.get(i).isPlaying())
      players.get(i).pause();
} 
```

或类似的规定

# c# - 用于查找货币符号的更短的 linq 查询？

> ID：14545569
> 
> 赞同：0
> 
> 时间：2013-01-27T08:04:43.607
> 
> 标签：c#, .net, linq

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:07:04.670

Your first `Select` seems redundant. You should generally filter first (using `Where`) then `Select`.

EDIT: Doh - I missed the `new RegionInfo()`. What about:

```
var ccy = CultureInfo.GetCultures(CultureTypes.SpecificCultures)
              .Select(c => new RegionInfo(c.LCID))
              .First(ri => ri.ISOCurrencySymbol == "ILS").CurrencySymbol; 
```

That assumes you know you are dealing with a valid `ISOCurrencySymbol`. If you can't make that assumption then use `FirstOrDefault` and check the result for `null` first before accessing the `CurrencySymbol`.

One additional point to note is that if you are performing this query frequently you could cache the result of `CultureInfo.GetCultures(CultureTypes.SpecificCultures))`, although this really is a micro optimisation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:17:23.363

You can use overloaded [First](http://msdn.microsoft.com/en-us/library/bb535050.aspx) method which accepts predicate (to combine `Where` and `First`)

```
 CultureInfo.GetCultures(CultureTypes.SpecificCultures)
            .Select(c => new RegionInfo(c.LCID))
            .First(r => r.ISOCurrencySymbol == "ILS")
            .CurrencySymbol; 
```

This code does exactly what your code does. But actually you should use `FirstOrDefault` and try to get region for your ISO currency symbol. If region is found, then use it:

```
var isoCurrency = "ILS"
var region =  CultureInfo.GetCultures(CultureTypes.SpecificCultures)
                        .Select(c => new RegionInfo(c.LCID))
                        .FirstOrDefault(r => r.ISOCurrencySymbol == isoCurrency);
if (region != null)
    // get region.CurrencySymbol 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:17:55.570

This should do it:

```
 var t = CultureInfo.GetCultures(CultureTypes.SpecificCultures)
                     .Select(d => new RegionInfo(d.LCID))
                     .First(f => f.ISOCurrencySymbol == "ILS").CurrencySymbol; 
```

# php - CodeIgniter 中的自定义控制器

> ID：14545570
> 
> 赞同：0
> 
> 时间：2013-01-27T08:04:58.173
> 
> 标签：php, codeigniter, directory-structure

我不知道这是否是重复的，我找不到任何东西。对不起。

好的，所以我做了几个这样的课程：

```
abstract class Bank(){}
class HB extends Bank(){}
class NO extends Bank(){}
class BankController(){}
class Contract(){} 
```

我像这样使用它们：

```
$contract  = new Contract();
$bank      = new HB();
$bankC     = new BankController($bank);
$bankC->setContract($contract)->processContract()->sendRequest(); 
```

我的问题是，我将 BankController 放在哪里？因为我真的不想把它们放在控制器文件夹中，因为我不想通过 URL 访问它们。你们会怎么做？或者你创建一个新文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:34:06.757

您可以创建一个自定义核心控制器：

[http://ellislab.com/codeigniter/user-guide/general/core_classes.html](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

或者，如果您不希望它出现在 url 上，您可以创建一个库：

[http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

在应用程序/库目录上创建一个 `bank.php`

或者你可以创建一个像 bankfolder/bank.php 这样的文件夹

```
class bank()
{

  public function setContract()
  {
     //
  }

  public function processContract()
  {
    //
  }

  public function sendRequest()
  {
    //
  }

} 
```

然后在 HB 控制器上

```
class HB extends CI_Controller
{
  public function __construct(){
    parent::__construct();
    $this->load->library('bankfolder/bank');
  }

  public function index()
  {
    $this->bank->setContract($contract)->processContract()->sendRequest();
  }

} 
```

*这只是一个示例，而不是您的工作代码*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:20:17.187

您可以通过以下划线开头的名称将控制器功能设为私有。因此，例如，如果您将 Contract 放在控制器文件夹中，则可以访问 Contract，但 _Contract 不会。如果有一天您可能需要，您仍然可以在控制器文件本身中使用它。

# http - 角度——访问多个http调用的数据——如何解决promise

> ID：14545573
> 
> 赞同：54
> 
> 时间：2013-01-27T08:05:32.263
> 
> 标签：http, angularjs

我被困在我认为应该直截了当的事情上。我需要从三个不同的 ajax 调用中获取数据，组合并处理所有三个，并将结果数组显示给用户。

我的代码最简单的形式如下所示：

```
function giftControler ($scope, $http) {
  var names = $http.get("names.json"),
      naughty = $http.get("naughty.json"),
      nice = $http.get("nice.json"); 
```

我知道我的变量被分配给承诺，而不是实际结果，并且 http 请求已被传递到事件队列。如果我用可执行语句遵循这些变量，这些变量将是未定义的。我不明白如何等待这些承诺解决才能继续处理它们。

我想做的是立即添加代码：

```
 for (var i=0; i<names.length; i++){
        for (var j=0; j<nice.length; j++){
          if (names[i] === nice[j]){
            names[i] = names[i] + "--Yay!!";
          };
        };
      };                
      $scope.kids = names; 
```

问题是我不能像处理数组一样处理承诺。Javascript 将在 http 调用之后立即看到这些 for 语句并尝试立即执行它们，即使这些承诺尚未解决。

我卡住的地方是[$http api](https://docs.angularjs.org/api/ng/service/$http)给了我一个具有三个功能的 promise 对象：`error`, `success`& `then`。在这种情况下，我不确定该怎么做。我需要为这三个函数提供一个单一的成功函数。我需要全部三个来解决，然后处理每个中的数据，然后将结果分配给角度模型。

我确定我遗漏了一些明显的东西，但是有人有建议吗？在我的实际工作中，我有几个 ajax 调用多个数据源和大量处理（比较值、排序、连接等）来提出一个好的数据集合，但我无法通过这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-01-27T08:42:00.407

您可以使用 $q 的函数 'all'：

```
function giftControler ($scope, $http, $q) {
  var names = $http.get("names.json"),
      naughty = $http.get("naughty.json"),
      nice = $http.get("nice.json");
  $q.all([names, naughty,nice]).then(function(arrayOfResults) { 
      ... This callback would be called when all promised would be resolved
    }); 
```

这种方式稍微干净一些。

[这是文档的链接： http](http://docs.angularjs.org/api/ng.$q) ://docs.angularjs.org/api/ng.$q

# android - 索尼 Xperia Smartwatch MN2 如何获取加速度计值？

> ID：14545575
> 
> 赞同：0
> 
> 时间：2013-01-27T08:05:50.877
> 
> 标签：android, sdk, accelerometer, sony, sony-smartwatch

我已经研究了几个星期的索尼 Smartwatch MN2。我仍然不知道如何使用他们的 SDK 从 Smartwatch 的加速度计中获取价值。我已经阅读了文件。但这并没有过多解释。示例传感器代码也运行，但它只显示“READ ME”。我想知道如何从 Smartwatch 的加速度计中获取值。如果有人知道如何并愿意帮助我。我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:57:46.337

SDK 中的 SampleSensor 扩展是传感器 API 工作原理的一个很好的示例，并展示了如何：

*   创建一个 AccessorySensorEventListener
*   使用 AccessorySensorManager 注册监听器
*   实现`onSensorEvent`AccessorySensorEventListener 接口的方法，从 SmartWatch 获取传感器数据。

如果您安装示例扩展，您需要在 SmartWatch 上启动它，然后将看到 SmartWatch 上显示的三轴传感器数据。

“READ ME”文本显示在手机的分机设置中，并不是您真正想要的。

# c# - 删除WPF活动选项卡上标题周围的虚线轮廓？

> ID：14545584
> 
> 赞同：2
> 
> 时间：2013-01-27T08:07:30.227
> 
> 标签：c#, wpf, wpf-controls

当我从我的选项卡中选择一个标签时`TabControl`，`WPF`我会得到一个虚线轮廓或边框，或者你想在标题周围调用它： ![在此处输入图像描述](../Images/eb75129f9dc6dfa9d3cba3d86f7484d4.png)

我的问题是：是否有**不**显示的选项，因为它有点烦人。当整个窗口未处于活动状态时，此轮廓不会显示，并且我仍然希望在窗口处于活动状态时将其删除。

我很抱歉这个愚蠢的问题，但我只是想不出究竟要搜索什么`Google`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T08:19:08.047

`FocusVisualStyle`是您要查找的内容，将此属性设置为 null 以`TabItems`获得通用样式-

```
 <TabControl>
        <TabItem Header="Page1"/>
        <TabItem Header="Page2"/>
        <TabItem Header="Page3"/>
        <TabControl.ItemContainerStyle>
            <Style TargetType="TabItem">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>
        </TabControl.ItemContainerStyle>
    </TabControl> 
```

# c++ - 在 3d 空间中的 QT 中围绕其 Y 轴旋转小部件

> ID：14545586
> 
> 赞同：0
> 
> 时间：2013-01-27T08:08:05.440
> 
> 标签：c++, qt, 3d, image-rotation

我想在 QT 中围绕其 Y 轴（或任何轴）旋转一个小部件，其方式与此处显示的方式完全相同：

[围绕 Y 轴在 3D 空间中的图像旋转](https://stackoverflow.com/questions/13741571/image-rotation-in-3d-space-around-y-axisQTransform)

我已经搜索过，但我得到的所有二维变换，如顺时针或逆时针旋转

我真的想要一些非常简单的东西，因为我会在整个项目中这样做一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:08:22.113

首先，由于绘画引擎的操作方式（它完全是 2D）和布局管理器的工作方式，普通的 Qt 小部件无法做到这一点，因此任何解决方案都不是微不足道的。

最简单的方法是将小部件放入 a `QGraphicsScene/View`as a`QGraphicsProxyWidget`中，并使用该`setTransform(const QTransform&, bool)`方法应用转换矩阵。

但是，由于引擎仍然是 2D，您必须创建一个 3D 转换矩阵来描述您想要的操作，然后使用投影转换为 2D 矩阵。这并不简单，但是您可以“伪造”效果，就像您使用静态方法链接到的效果一样`squareToQuad(const QPolygonF&, QTransform&)`- 当用户“旋转”小部件时，一个垂直边缘变得更小并向四边形中心移动，而相反的边缘变得更大并向四边形中心移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:18:21.417

最容易制作和理解的可能是[将小部件绘制到 QPixmap](http://qt-project.org/doc/qt-4.8/qpixmap.html#grabWidget)。然后子类 QWidget 将绘制这个 QPixmap 转换以匹配 3D 旋转，或“假”旋转。由于这幅画整齐地位于您的自定义小部件中的单个paintEvent() 中，因此很容易从假版本开始（例如，没有透视图），然后如果有时间和需要，可以返回并改进它。

例如，使用 OpenGL 进行绘画会很容易，例如基于[Qt 的 openGL 示例中的](http://qt-project.org/doc/qt-4.8/examples-opengl.html)[“纹理”](http://qt-project.org/doc/qt-4.8/opengl-textures.html)示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:38:01.523

如果您真的想在 Qt 项目中以能够与其他用户界面小部件良好集成的方式完成此操作，我建议您查看 Qt Quick (Qt 4.7 +) 或 Qt Quick 2.0 (Qt 5.0 +)。它们旨在帮助促进创建更动态的界面。他们使用 QML（描述小部件功能的类似 css 的标记语言）和熟悉的更高级别的 C++ 包装器，可以像任何其他 Qt 小部件一样访问。Qt Quick 2.0 尤其酷，能够相对轻松地绘制酷炫的粒子系统效果。

# php - PHP会话变量没有传递到下一页

> ID：14545594
> 
> 赞同：0
> 
> 时间：2013-01-27T08:10:10.970
> 
> 标签：php, session-variables

我正在使用此代码来检索 php 会话变量。

```
session_start();
$username = $_SESSION['username1'];
$password = $_SESSION['password1'];
echo $username; 
```

当我执行它时，我收到以下错误。

> 警告：session_start() [function.session-start]：无法发送会话 cookie – 标题已由 /home 中的（输出开始于 /home/practice/public_html/wp-content/themes/twentytwelve/header.php:13）发送/practice/public_html/wp-content/plugins/php-execution-plugin/includes/class.php_execution.php(273)：第 2 行的 eval() 代码

如果我删除`session_start()`，我不会收到错误。

但是在这两种情况下，会话变量都没有被检索到，命令`echo $username;` 也没有显示任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:11:26.130

您在`session_start();`. 确保`session_start();`出现在任何`echo`/`print`语句或 HTML 之前。

您的脚本在第 13 行输出一些内容`header.php`。`session_start();`如果不在脚本的第一行，请放在此之前。

当您删除`session_start();`会话时，不会尝试检索并且问题（导致错误）消失了。PHP 不在乎您尝试输出的变量不存在。这就是 PHP 的样子（尽管它会生成一个`Notice`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:12:58.463

错误消息已经告诉您，您在 session_start 调用之前输出了一些内容：

```
output started at /home/practice/public_html/wp-content/themes/twentytwelve/header.php:13 
```

输出在第 13 行的 header.php 文件中。

您必须在向客户端发送任何输出之前启动会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:19:17.240

我不会在 wordpress 安装中使用会话。代码太脏，不能依赖“无输出”。

您不能使用 wordpress 中的用户表作为凭据和身份验证方法吗？

# hbase - Scan和Get之间的性能差异？

> ID：14545595
> 
> 赞同：11
> 
> 时间：2013-01-27T08:10:42.300
> 
> 标签：hbase

我有一个包含`8G`数据的 HBase 表。

当我对该表使用部分键扫描来检索给定键的值时，我得到几乎恒定的时间值检索。

当我使用 a`Get`时，所花费的时间远远大于扫描。但是，当我查看代码时，我发现它`Get`本身使用了`Scan`.

谁能解释一下这个时差？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T23:01:36.507

正确，当您发出 Get 时，会在幕后进行扫描。[Cloudera 的博文](http://blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/)证实了这一点：“每次发出 get 或 scan 时，HBase 扫描（原文如此）通过每个文件来查找结果。”

我无法确认您的结果，但我认为线索可能在于您的“部分键扫描”。在比较部分键扫描和获取时，请记住，用于获取的行键可以是比用于扫描的部分键长得多的字符串。

在这种情况下，对于 Get，HBase 必须进行确定性查找以确定它需要匹配并获取它的行键的确切位置。但是使用部分键，HBase 不需要查找确切的键匹配，而只需要找到该键前缀的更近似位置。

答案是：视情况而定。我认为这将取决于：

1.  您的行键“模式”或组合
2.  Get 键和 Scan 前缀的长度
3.  你有多少个地区

以及可能的其他因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T19:33:37.477

在后端 HRegion 上，Scan 和 Get 的数量*几乎*相同。它们最终都由 HRegion.RegionScannerImpl 执行。请注意，该类中的 get() 实例化了 RegionScanner - 类似于调用 Scan。

org.apache.hadoop.hbase.regionserver.HRegion.RegionScannerImpl

```
public List<Cell> get(Get get, boolean withCoprocessor)
throws IOException {

List<Cell> results = new ArrayList<Cell>();

// pre-get CP hook
if (withCoprocessor && (coprocessorHost != null)) {
   if (coprocessorHost.preGet(get, results)) {
     return results;
   }
}

Scan scan = new Scan(get); 
```

在 get() 的情况下，仅返回一行 - 通过调用scanner.next() 一次：

```
RegionScanner scanner = null;
try {
  scanner = getScanner(scan);
  scanner.next(results); 
```

# android - android appwidgetprovider sqlite 数据库未创建记录

> ID：14545598
> 
> 赞同：1
> 
> 时间：2013-01-27T08:11:32.280
> 
> 标签：android, sqlite, appwidgetprovider

我有一个 appwidgetprovider，当用户“单击”图标时，它会更新我的 sqlite 数据库。这是由 onRecieve 方法触发的，并且工作正常，但现在看来，它仅在活动首先创建记录时才有效。

数据库由它自己的`DBadapter`类处理，活动和 appwidgetprovider 都以相同的方式使用这个类：

```
mydb = new DBadapter(this);  
mydb = mydb.open(); 
```

由于 DBadapter 在 onCreate 方法中创建数据库，我无法理解为什么活动 a) 创建数据库和 b) 可以创建第一条记录但 appwidgetprovider 不能。

该活动对 appwidgetprovider 所做的唯一其他用途是使用数据库游标在数据库中导航。

如果活动尚未创建，appwidgetprovider 是否存在无法实际创建数据库的限制？如果是这样，这意味着应用程序必须在安装后首先启动，然后必须创建/删除虚拟记录，因为我对此进行了测试，发现一旦活动创建然后删除记录，appwidgetprovider 就可以写入数据库。

忘了提到 onReceive 调用一个私有方法来执行将记录添加到数据库的重复任务。从一开始就是这种情况，当记录已经存在时它可以工作，但是当没有记录时它不会创建任何记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:19:52.523

操作员错误在这里我发布了一个问题，然后在这个线程中回答了这个问题：

[应用小部件问题](https://stackoverflow.com/questions/14224457/android-appwidgetprovider-toolbar-style-widget-solved)

所以我然后开始编写 onReceive 方法并且愚蠢地太愚蠢了：

```
} else { 

       super.onReceive(ctx,intent);
   } 
```

部分代码，然后只是将 supper.onReceive 留在方法的底部，因为重新应用它，它现在正在写入数据库。非常遗憾 。

我羞愧地低下了头：）

# python - numpy vs 本机 Python - 最有效的方法

> ID：14545602
> 
> 赞同：3
> 
> 时间：2013-01-27T08:11:53.950
> 
> 标签：python, performance, numpy

对于很多功能，可以使用本机 Python 或 numpy 来继续。

数学函数就是这种情况，它可用于 Python native `import math`，但也可用于 numpy 方法。当涉及到数组时也是如此，narray 来自 numpy 和 pythons 列表推导或元组。

关于 Python 和 numpy 中的这些功能，我有两个问题

1.  一般来说，如果方法在本机 Python 和 numpy 中可用，您更喜欢这两种解决方案中的哪一种？在效率方面？它有什么不同吗？ Python 和 numpy 在他们的过程中会有什么不同？

2.  更具体地说，关于数组和处理数组的基本函数，如排序、连接......，哪种解决方案更有效？是什么使最有效的解决方案的效率？

这是一个非常开放和普遍的问题。我想这不会对我的代码产生很大影响，但我只是想知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T08:16:32.603

一般来说，避免*两者之间*的转换可能最重要（效率方面）。如果您主要在数据上使用非 numpy 函数，那么它们将在内部使用标准 Python 数据类型进行操作，因此由于需要来回转换，使用 numpy 数组效率低下。

同样，如果您使用大量 numpy 函数来操作数据，那么将其全部转换回基本的 Python 类型也将是低效的。

* * *

就选择函数而言，使用设计用于对数据已经存在的表单进行操作的任何一个 - 例如，如果您已经有一个 numpy 数组，请在其上使用 numpy 函数；同样，如果您有基本的 Python 数据类型，请使用其上的 Python 函数。numpy 的函数将针对使用 numpy 的数据类型进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:19:08.033

1.  当在使用 NumPy 数组和数字列表之间进行选择时，前者通常更快。

2.  我不太明白第二个问题，所以不会尝试解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T08:27:38.850

您可以对代码片段进行基准测试并确定结果。使用python模块timeit：[http ://docs.python.org/2/library/timeit.html](http://docs.python.org/2/library/timeit.html)

# yii - 如何在关系模型中设置条件

> ID：14545605
> 
> 赞同：0
> 
> 时间：2013-01-27T08:12:22.627
> 
> 标签：yii, get, many-to-many

我有两个名为的表`content`，`category`它们的`MANY_MANY`关系如下：

```
'contents'=>array(self::MANY_MANY, 'Content',
                'content_category(category_id, content_id)',
                'order'=>'contents.id DESC',
    ) 
```

content_category 是这两个表之间的一个中间表。所以我使用这种关系来查找这样一个类别的内容：

```
$category = Category::model()->findByPk($cat_id);
foreach ($category->contents as $content)
{
    //some code for each content
} 
```

现在我想写一些关系之外的条件，对于`content`表格，为了这个关系找到一些内容。我的情况可能多种多样，并从`$_GET`变量中获取。我必须如何写我的条件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:23:54.533

您应该使用 CDbCriteria 来执行此操作。这是一个简单的例子：

```
$criteria = new CDbCriteria;
$criteria->select = 'the columns you need';
$criteria->limit = 5; // the number of row to fetch
$criteria->condition = 'column=:param OR column2="example"';
$criteria->params = array(':param' => $_GET['param'];//bind the param to the condition

//here I am going to add some conditions about the related model
$criteria->with = array(
   'content' => array(
       'select' => 'the columns you need in the related model',
       'condition' => 'column=:param',
       'params' => array(':param' => $_GET['param']),
   ),
);

$category = Category::model()->findAll($criteria); 
```

阅读有关[CDbCriteria](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)的 Yii 文档以找到更多选项。[yii 指南](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#reading-record)也有一些例子

# php - 请解释 mcrypt_decrypt 这个奇怪的输出

> ID：14545607
> 
> 赞同：0
> 
> 时间：2013-01-27T08:12:30.457
> 
> 标签：php, encryption, mcrypt, rawurl

另一方面，我正在使用此代码解密 GET 发送的信息：

```
$key              ="key";
$ema              =$_GET['email'];
$iv               =$_GET['iv'];
$ema              =substr($ema,1,-1);
$iv               =substr($iv,1,-1);
$ema              =rawurldecode($ema);
$cipher_alg       = MCRYPT_RIJNDAEL_128;
$decrypted_string = mcrypt_decrypt($cipher_alg, $key, $ema, MCRYPT_MODE_CBC, $iv);

echo $decrypted_string; 
```

例如，这输出`hello@xyz.com`. 但是，当我将此字符串与 if 语句进行比较时：

```
if($decrypted_string=="hello@xyz.com")
echo "Match";
else
echo "No match"; 
```

这会输出一个奇怪的答案`No match`。我不明白为什么会这样。这是 var_dump($decrypted_string) 的结果：

```
string(32) "priyam@itbhu.ac.in" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:31:59.277

请注意，`mcrypt_decrypt`将填充到模式的块大小，如[http://php.net/manual/en/function.mcrypt-decrypt.php所述](http://php.net/manual/en/function.mcrypt-decrypt.php)

> 将使用给定密码和模式解密的数据。如果数据的大小不是 n * blocksize，数据将用 '\0' 填充。

一种解决方案是在解密后修剪数据，如果您可以保证原始数据不应该以尾随空格结尾，否则您可以将前几个字节专用于原始数据的长度并在解密后使用它。请注意，由于您选择的块大小是 128 位，因此数据将是 32 字节的倍数（8 位到一个字节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:58:59.500

如果我正确地遵循了你的问题，你会得到错误，因为`"hello@xyz.com"`它不同于`"priyam@itbhu.ac.in"`. 如果某些东西解密为可读的东西，你可以很确定输入和密钥是正确的，否则它会失败，或者 - 如果 PHP 的编写不当的加密函数没有取消填充 - 显示垃圾。

因此输入与您期望的字符串不同。

# c - C (Windows) 程序无错误退出

> ID：14545613
> 
> 赞同：-5
> 
> 时间：2013-01-27T08:13:12.613
> 
> 标签：c

我开发了一个小 C 程序来检查我的网络服务器是否还活着和其他东西，该程序读取带有 IP 地址或主机名的测试列表并检查网页中的字符串；如果答案是真的，一切正常，如果不是我的程序退出。我究竟做错了什么？这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <winsock.h>

#pragma comment(lib, "wsock32.lib")

int isAlive(const char *addr)
{
  struct sockaddr_in blah;
  struct hostent *he;
  WSADATA wsaData;
  int i;
  WORD wVersionRequested;
  SOCKET sock;

  char buff[1024];
  char *ex;
  ex="GET /alive.php HTTP/1.0\n\n";
  char *fmsg="ALIVE";  

  wVersionRequested = MAKEWORD(1, 1);
  if (WSAStartup(wVersionRequested , &wsaData)){
    printf("Winsock Initialization failed.\n");
    exit(1);
  }

  if ((sock=socket(AF_INET,SOCK_STREAM,0))==INVALID_SOCKET){
    printf("Can not create socket.\n");
    exit(1);
  }
  sock = socket(AF_INET,SOCK_STREAM,0);
  blah.sin_family = AF_INET;
  blah.sin_port = htons(80);
  blah.sin_addr.s_addr = inet_addr(addr);

  if ((he=gethostbyname(addr))!=NULL){
    memcpy((char *)&blah.sin_addr.s_addr,he->h_addr,he->h_length);
  }
  else{
    if((blah.sin_addr.s_addr=inet_addr(addr))==-1){
      WSACleanup();
      exit(1);
    }
  }

  if (connect(sock,(struct sockaddr*)&blah,sizeof(blah))==0){
    send(sock,ex,strlen(ex),0);
    recv(sock,buff,sizeof(buff),0);
    if(strstr(buff,fmsg)!=NULL){
      printf("ALIVE: %s\n", addr);
    }
  }

  closesocket(sock);
  WSACleanup();
  return(1);
}

int main(int argc,char *argv[])
{
  if(argc!=2){
    printf("Usage: checkalive [webservers list]\n");
    return(1);
  }

  char *inname = argv[1];
  FILE *infile;
  char line_buffer[BUFSIZ];
  char line_number;

  infile = fopen(inname, "r");
  if (!infile) {
    printf("Couldn't open file %s for reading.\n", inname);
    return 0;
  }

  line_number = 0;
  while (fgets(line_buffer, sizeof(line_buffer), infile)) {
    ++line_number;
    //printf("%s", line_buffer);
    isAlive(line_buffer);
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:30:25.393

我建议首先阅读[退出](http://msdn.microsoft.com/en-us/library/6wdz5232%28v=vs.71%29.aspx)调用的结果。然后我建议通过您的 isAlive 代码并仔细检查错误处理......

# html - 移动设备放大 Google Apps 脚本

> ID：14545615
> 
> 赞同：5
> 
> 时间：2013-01-27T08:13:40.867
> 
> 标签：html, google-apps-script, mobile, web-applications

我在 GAS 中制作了一个 400 像素宽的网络应用程序。我希望它在加载时缩放以填充移动设备的屏幕，而不是仅填充屏幕的一半（尽管仍然使用固定的像素宽度）。

我试过使用下面的视口代码，但没有成功。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-24T14:46:34.447

这是最近几个月 Google 解决的问题，并添加了功能，请使用 .addMetaTag() 方法。

例子：

```
<meta name="google-site-verification" content="..."/>
<meta name="viewport" content="..."/>

var output = HtmlService.createHtmlOutput('<b>Hello, world!</b>');
output.addMetaTag('viewport', 'width=device-width, initial-scale=1'); 
```

有关方法的文档 [https://developers.google.com/apps-script/reference/html/html-output#addmetatagname-content](https://developers.google.com/apps-script/reference/html/html-output#addmetatagname-content)

相关论坛 [https://code.google.com/p/google-apps-script-issues/issues/detail?id=4659](https://code.google.com/p/google-apps-script-issues/issues/detail?id=4659)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-26T04:56:25.083

GAS 现在支持视口（截至 2015 年 12 月）。

示例（取自此[链接](https://plus.google.com/+MarcoColomboMow/posts/GXgRCh98HTu)）

```
var html = HtmlService.createHtmlOutputFromFile('inputpage').setSandboxMode(HtmlService.SandboxMode.IFRAME).addMetaTag('viewport', 'width=device-width, initial-scale=1'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T12:02:33.423

我最近遇到了同样的问题，经过一番环顾后，偶然发现了 Google 的 Caja 项目问题跟踪器[http://code.google.com/p/google-caja/issues/detail?id=1632](http://code.google.com/p/google-caja/issues/detail?id=1632)上记录的问题。

报告的问题正是您所描述的，当您通过移动设备查看时，您试图放大网页（使用 Google 应用程序脚本生成）。回复中提到了一种解决方法，但发现很难按照说明进行操作并解决问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-14T18:29:09.073

谷歌似乎并不认为这是一个问题。他们认为对元视口的访问是一种增强。我发现的唯一替代方法是为移动设备编写自定义 CSS 并使用媒体查询将其嗅出。请参阅[https://code.google.com/p/google-apps-script-issues/issues/detail?id=4659](https://code.google.com/p/google-apps-script-issues/issues/detail?id=4659)

# configuration - 大多数应用程序如何保存它们的数据？（不是在谈论网络应用程序）

> ID：14545616
> 
> 赞同：0
> 
> 时间：2013-01-27T08:13:44.533
> 
> 标签：configuration, datastore

我是软件开发的新手。现在，我打算设计一个小而有用的软件来帮助人们背诵和复习英语单词。

作为一个长期使用 linux 的用户，我发现面向用户的应用程序以各种方式保存用户配置，例如 XML、纯文本、SQLite 等。当我成为开发人员时，我认为最重要的是选择一些合适的方法。

所以这是我的问题，大多数应用程序如何保存它们的数据？更具体地说，您能否列出一些常用的数据存储方法？上面的数据是指帮助应用程序记住事物并在下次启动时恢复到先前状态的数据（也许这就是配置文件的全部内容）。顺便说一句，我对纯文本样式配置很好奇，它看起来像这样：

> 属性 1 = 值 1
> 
> 属性 2 = 值 2
> 
> ...

我想知道程序员如何实现整个方案，他们应该使用正则表达式，还是有 3rd-party 库可以调用，或者他们只是编写代码来直接解析它？

至于我的小项目，它有两种持久化数据，一种用于用户友好的配置，另一种用作存储英文单词和相关信息的数据库。

提前感谢您的耐心等待！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T08:24:12.787

嗯。与其他方法相比，我认为没有一些*合适的方法。*好吧，一些开发人员更喜欢带有自定义解析例程的纯文本文件，一些使用一些格式，如 YAML 或 XML 与相应的库一起使用，一些使用本地数据库后端，如 sqlite 甚至外部数据库（外部数据库配置主要用于企业集中式环境），一些甚至可以使用 Lua 作为一种数据表示语言（尽管它有缺点和优点）。您可以自由选择更适合您需要或您更熟悉的一种。这里没有灵丹妙药。对于简单的配置，最好使用一些带有普通文件的配置解析器（例如，用于 POSIX 兼容系统的**libconfig ）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:22:40.260

它实际上取决于数据的形式、数据的大致大小、性能要求、对数据进行预处理或后处理的设施等。

此外，您可能希望（或不希望）以某种文本格式保存数据。文本格式（包括 XML、[JSON](http://json.org/)、[YAML](http://yaml.org/)等）的主要优势在于它是可移植的并且易于开发人员查看。此外，您可以使用源代码工具（例如版本控制系统，如`git`）对其进行管理。缺点是它占用更多磁盘空间，并且需要更多时间来解析和生成它（但是，XML、JSON、YAML 格式有许多支持它们的库）。而且文本数据很难直接访问：您基本上需要阅读所有内容才能使用它。

您还可以将该问题视为[序列化](http://en.wikipedia.org/wiki/Serialization)或[持久性](http://en.wikipedia.org/wiki/Persistence_%28computer_science%29)问题。您可以考虑使用 XDR、ASN1 或您自己的格式，或[s11n](http://s11n.net/)等库。您可能对二进制但可移植的格式感兴趣（例如，该文件将在具有其他处理器、字节顺序和字长的系统上可读）。

如果您将您的数据视为配置数据（将由您的程序读取而不是写入），请将其变为文本并有一种表达注释的方式：系统管理员将非常乐意在配置文件中添加注释，您的程序应该忽略。

如果您有大量数据需要快速访问和更新，那么二进制格式（类似于 RAM 中的格式）可能更可取。在这种情况下，想想一个转储和恢复设施生产（和消费）一些文本的东西。

您还可以考虑使用类似于[垃圾收集算法的](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)[应用程序检查点](http://en.wikipedia.org/wiki/Checkpointing)。

一个问题是您的数据的价值是什么……如果您认为即使在您的应用程序不断发展（新版本、新功能）时它也应该保持不变，请认真考虑这一点。记录好数据的格式。

# css - 如何在 HAML 中增加 Twitter Bootstrap 进度条？

> ID：14545617
> 
> 赞同：0
> 
> 时间：2013-01-27T08:13:49.743
> 
> 标签：css, ruby, twitter-bootstrap, sinatra, haml

我刚刚开始学习使用 Sinatra、HAML 和 Twitter Bootstrap 构建小型 Web 应用程序。

在我的应用程序中，每 500 秒发生一次操作。我想在我的页面上放置一个进度条，指示下一个操作发生之前的剩余时间。现在，如果重新加载页面，该栏应该会更新。

我正在像这样计算栏的进度：

```
-percentage = (Time.now.to_i.modulo(500))/5 
```

现在，在我的原型 HAML 页面布局中，我有一个这样的进度条：

```
%div.progress.progress-striped.active
  %div.bar{:style => "width: 40%;"} 
```

我正在努力找出正确的语法来将`width`进度条的属性设置为先前计算的进度百分比。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:19:55.050

事实证明，我可以简单地将百分比放在属性中，如下所示：

```
%div.progress.progress-striped.active
  %div.bar{:style => "width: #{percentage}%;"} 
```

我很困惑，因为我想我需要像这样“启用” Ruby 代码，类似于在 HAML 中评估 Ruby 代码时使用尾随`-`或符号。`=`

# memory - Symfony 2 应用程序的内存限制

> ID：14545618
> 
> 赞同：3
> 
> 时间：2013-01-27T08:13:59.093
> 
> 标签：memory, symfony, symfony-2.1

我的 Symfony 应用程序正在使用大量内存，原因我不太了解（我没有处理图像或任何我认为会占用大量内存的东西）。

* * *

我可以从[这里](https://stackoverflow.com/questions/3882817/is-a-128mb-php-memory-limit-a-lot)看到 128M 的内存限制非常高......而且没有人应该需要那么多内存。

php.ini 文件：

```
 memory_limit = 128M; 
```

* * *

我相信人们也必须在 Symfony 应用程序中处理这个问题，所以我想知道是否可以对以下内容提供一些意见：

1.  128M 是可控的，还是真的高得惊人？人们通常在 Symfony 应用程序中使用什么，我应该倾向于达到的最大值是多少？
2.  我能做些什么来改善这一点，有没有办法调试内存问题？
3.  是否有任何使用大量内存的进程在编码时应该注意？

（例如，我注意到通过 DIC 在一个类中注入许多服务可能需要更多内存，即使我不能保证这一点，我只是提出一个问题，编码人员是否应该知道一些重要的事情来避免使用内存太多，例如小心使用 DIC..)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:15:42.983

1.  没关系。任何框架都需要一些资源。另一方面（更重要的是）它可以让你快速发展

2.  正如我之前评论过的：使用分析器找出内存使用情况。它是非常非常强大的工具。

3.  许多人。依赖注入可能需要更多的内存，它会让你创建更多的文件。但它使设计变得更好。如果你想编写单元测试，别无选择。

# c - 使用 struct pass 作为参数编译 c 代码时遇到问题

> ID：14545621
> 
> 赞同：1
> 
> 时间：2013-01-27T08:14:22.517
> 
> 标签：c

我从下面的代码块中得到了两个警告和错误：

> test.c:12:26: 警告: 'struct PrioirtyQueue' 在参数列表中声明[默认启用] test.c:12:26: 警告: 它的范围只是这个定义或声明，这可能不是你想要的[默认启用] test.c：在函数'set_mask_bit'中：test.c：13：3：错误：取消引用指向不完整类型的指针

```
 struct PriorityQueue {

        unsigned queue_mask;
        int is_empty;
        int task_guid;

};

void set_mask_bit(struct PrioirtyQueue *q, unsigned x) {
    q->queue_mask = x; 
}

int main() {

    return 0;

} 
```

请告诉我我需要修复什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T08:15:14.110

`struct PrioirtyQueue`应该是`struct PriorityQueue`（错字）。

```
struct PrioirtyQueue;
           ||
struct PriorityQueue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T08:16:57.040

你拼错`PriorityQueue`了：

```
void set_mask_bit(struct PrioirtyQueue *q, unsigned x) {
                             ^^ 
```

# php - 如何在 zend 框架 2 中添加新模块

> ID：14545622
> 
> 赞同：0
> 
> 时间：2013-01-27T08:14:43.763
> 
> 标签：php, zend-framework2

我只是从ZF2开始。我安装了 ZF2，创建了 VirtualHost，我可以看到欢迎页面。然后我在模块目录中添加了一个新模块，然后在 application.config.php 中添加了模块名称，但每次都说

> 未找到
> 
> 在此服务器上找不到请求的 URL /应用程序。

ZF2 带有一个名为 application 的默认模块，所以如果我点击“virtuaHostName/application”之类的 URL，那么它也应该显示欢迎页面，对吧？但我看到了同样的“未找到”消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T06:47:16.600

To add any new module you need to define new module name in follwing array in application.config.php file in config folder. Suppose you need to add new module 'Admin'. You can set that here as follows:

```
return array(
'modules' => array(
    'Application',
    'Admin',
), 
```

Note: Application is the default module.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:52:40.783

不要误解`ModuleNames`为`RouteNames`. 如果您看一下内部`module.config.php`，您会看到一个具有以下语法的数组：

```
'router' => array(
    'routes' => array(
        '$routeName' => array(
            // $routeParams 
        )
    )
) 
```

在这种情况下`$routeName`，当然总是一个定义路由名称的字符串。要知道哪个 URL 附加到该路由，您必须查看`$routeParams`. 这通常如下所示：

```
'type' => '$routeType',
'options' => array(
    'route' => '$theRoute'
) 
```

`$routeType`always 也是一个字符串。人们通常在这里为定义的路由类型添加一个短名称[（](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html#zend-mvc-router-http-regex)向上滚动一点）。或者，也可以给出特定路线的完整类名。

在`options`数组中，您将定义路线所需的选项。一个永远是`route`，因为这是路线的匹配标准。以下示例：

```
'route' => '/test'
Matching URL: http://myproject.dev/test 
```

然而，有一个问题，那就是子路线。当有子路由时，该`route`选项会附加到它的父路由。例如：

```
'route' => '/test'   // <- This is the PARENT Route
'route' => '/foobar' // -< This is the CHILD Route
Matching URL: http://myproject.dev/test/foobar 
```

希望这对您理解框架路由有所帮助。更多信息总是可以从[Zend\Mvc\Router 的官方文档中收集](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:15:44.370

在 application.config.php 中添加模块名称，然后在 module.config.php 中添加路由。当然，您必须在 module.config.php 的“invokables”数组中添加调用控制器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T05:30:07.610

要在 zend 框架 2 中添加/创建任何新模块。它提供了 ZFTool 通过简单的一些步骤来完成此工作。

1）下载ZFTool到zend框架官网。2）将其解压缩到项目的根文件夹中。3）通过命令访问它（项目路径>php zftool/zf.php创建模块模块名称项目路径）

你可以得到更多的细节

[https://www.youtube.com/watch?v=8BNg2zPzEmI&index=5&list=PLMoDvYQTYOX3C1WZvNVLm7u3YTRvR5Zhs](https://www.youtube.com/watch?v=8BNg2zPzEmI&index=5&list=PLMoDvYQTYOX3C1WZvNVLm7u3YTRvR5Zhs)

# javascript - mouseover 事件时的鼠标位置

> ID：14545626
> 
> 赞同：12
> 
> 时间：2013-01-27T08:15:27.480
> 
> 标签：javascript, mouse, mouseover, mouse-position

是否可以在图像的 mouseouver 事件中获得确切的鼠标位置？如果我在文档鼠标移动事件中使用更新鼠标位置的函数，我可能会遇到延迟和此类问题，并且无法获得确切的位置。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-27T10:09:16.333

如果您正在寻找一个简单的 JS 来获取 MouseOver 事件的光标位置，这里是示例代码：

```
 <!DOCTYPE html>
    <html>
    <head>
    	<script>

    	function getPos(e){
    		x=e.clientX;
    		y=e.clientY;
    		cursor="Your Mouse Position Is : " + x + " and " + y ;
    		document.getElementById("displayArea").innerHTML=cursor
    	}

    	function stopTracking(){
    		document.getElementById("displayArea").innerHTML="";
    	}

    	</script>
    </head>

    <body>
    	<div id="focusArea" onmousemove="getPos(event)" onmouseout="stopTracking()"><p>Mouse Over This Text And Get The Cursor Position!</p></div>

    	<p id="displayArea"></p>
    </body>
    </html>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T11:42:15.967

用于跟踪位置的 javascript 方法`offset()`，在这里我做了和 Mayur 说的一样的，只是添加了一点点。

[见 jsfiddle](https://jsfiddle.net/7P8Rr/)

# ios - 当我第二次运行应用程序时，相机背景没有出现。iOS，Vuforia

> ID：14545628
> 
> 赞同：1
> 
> 时间：2013-01-27T08:16:20.180
> 
> 标签：ios, camera, appdelegate, vuforia

我通过使用 Vuforia 进行开发，在 iOS 上进行有关增强现实的项目。

我在开始之前创建了视图`FrameMarkerAppDelegate`（扫描 AR 视图）。在我推送`UIButton`on view 页面后，`FrameMarkerAppDelegate`它就开始了。背景是`FrameMarkerAppDalegate`运行完成后的相机背景。然后我触摸相机背景并选择返回查看页面，现在我们再次进入查看页面。

我的问题是`UIButton`再次按下后，相机背景没有出现。它仍然是查看页面，但相机已激活。

> 视图控制器.mm

```
- (IBAction)btnSelect:(id)sender {
    FrameMarkersAppDelegate *appDelegate = [[FrameMarkersAppDelegate alloc] init];
    [appDelegate startFrameAppDelegate];
} 
```

> FrameMarkerAppDelegate.mm

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    window = [[UIWindow alloc] initWithFrame: screenBounds];
    [self setupSplashContinuation];
    [QCARutils getInstance].targetType = TYPE_FRAMEMARKERS;
    arParentViewController = [[ARParentViewController alloc] init];
    arParentViewController.arViewRect = screenBounds;
    [window insertSubview:arParentViewController.view atIndex:0];
    [window makeKeyAndVisible];
    return YES;
}

-(void)startFrameAppDelegate
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    window = [[UIWindow alloc] initWithFrame: screenBounds];
    [self setupSplashContinuation];
    [QCARutils getInstance].targetType = TYPE_FRAMEMARKERS;
    arParentViewController = [[ARParentViewController alloc] init];
    arParentViewController.arViewRect = screenBounds;
    [window insertSubview:arParentViewController.view atIndex:0];
    [window makeKeyAndVisible];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:16:33.213

有同样的问题。基本上我认为错误归结为将非弧 vuforia sdk 与弧项目合并。我发现当我使用 vuforia 相机作为打开视图控制器时，当 vuforia 视图控制器第一次运行时，“ARViewController”中的“dealloc”方法没有被调用。但之后每次都会调用它。对我来说似乎太复杂了，无法正确锻炼，所以我通过在“ImageTargetsParentViewController”之前使用我的导航控制器中的方法推送 ImageTargetsParentViewController 来破解它（这个方法只是推送了 ImageTargetsParentViewController 视图控制器）。这似乎解决了它，现在每次都调用 dealloc。

**空白视图控制器.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [((CARNavigationController *)self.navigationController) firstLoadOpenAr];
    });
} 
```

# javascript - SlidesJS自动高度问题

> ID：14545632
> 
> 赞同：2
> 
> 时间：2013-01-27T08:16:44.933
> 
> 标签：javascript, jquery, css, slideshow

我在这里遇到了一个问题，使用 SlidesJS 滑块的 wordpress 网站通过 ajax 将多个幻灯片加载到具有 AutoHeight 值的同一页面（不是同时运行）。我设法通过选项让 AutoHeight 工作，它确实有效，但它不适用于幻灯片的第一张图像。第一次加载时不会出现第一张图片。单击下一步或等到幻灯片自动执行此操作时，一切都适用于其他图像。

我猜那是因为当滑块第一次加载时高度为 0 ？！

我不能为滑块使用固定的 CSS 高度，我尝试使用 max-height 值，但它不起作用，它会以这种方式回退到滑块的固定高度。css 中的 height auto 显然不能很好地工作。有人知道解决这个问题的方法吗？这只是第一个无法正确加载的图像。

我将粘贴下面代码的 CSS 和 Javascript

```
 initializePortSlider=function(){
    if($().slides) {

        var portSliderPreloader = $('#portfolio-slider').attr('data-loader');

        $("#portfolio-slider").slides({
            preload: true,
            preloadImage: portSliderPreloader,
            play: 5000,
            pause: 2500,
            hoverPause: true,
            autoHeight: true, 
            container: 'portfolio-slider-wrap',
            effect: 'fade',
            next: 'gallery-next',
            prev: 'gallery-prev',
            crossfade: true,
            generatePagination: false
        });

    }
    };
    initializePortSlider(); 
```

滑块的 CSS

```
#portfolio-slider {
position: relative;
width: 588px;
line-height: 1;
padding-top:10px;
padding-bottom:10px;}

#portfolio-slider .portfolio-slider-wrap {
position: relative;
width: 588px;}

.portfolio-slider-wrap a,
.portfolio-slider-wrap img {
display: block;
width: 588px;
height:auto;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:00:00.060

如果在幻灯片加载时我做对了，那么只有第一个图像的高度为 0。

您可以通过以下几种方式解决此问题：

CSS：

```
.portfolio-slider-wrap img:first-child {
   height: auto or 100%;
} 
```

如果这不起作用，您可以使用 javscript 方式执行此操作：

```
$('.portfolio-slider-wrap').find('img').each(function(i, obj){
  if (obj.clientHeight <= 0){
      obj.style.height = obj.offsetParent.clientHeight + 'px';
  }
}); 
```

在幻灯片放映的初始化之后添加此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T14:13:59.467

您需要在每个滚动条上将滑块高度设置为图像高度。这个解决方案对我有用。

#slides 是我正在使用的所有 img 所在的 div 的 id。

`// other option for slidesjs,`

```
callback: {
          loaded: function(number) {
            // Use your browser console to view log
       jQuery('#slides').height(jQuery('.slidesjs-control img:nth-child(1)').height());
            console.log('SlidesJS: Loaded with slide #' + number);
          },
          start: function(number) {
            // Use your browser console to view log
            console.log('SlidesJS: Start Animation on slide #' + number);
          },
          complete: function(number) {
            // Use your browser console to view log
            console.log('SlidesJS: Animation Complete. Current slide is #' + number);
  jQuery('#slides').height(jQuery('.slidesjs-control img:nth-child('+number+')').height());
          } 
```

# ios - 解析 Django 创建的 JSON

> ID：14545633
> 
> 赞同：0
> 
> 时间：2013-01-27T08:16:51.080
> 
> 标签：ios, xcode, sbjson, nsjsonserialization

我认识到已经有很多关于此的 SO 主题，但它们似乎都已经过时了。

IE: [SBJSON 解析问题与 Twitter 的 GET 趋势/:woeid](https://stackoverflow.com/questions/7972809/sbjson-parsing-issue-with-twitters-get-trends-woeid)和[JSONValue ARC 问题](https://stackoverflow.com/questions/10122534/jsonvalue-arc-issue)

但是，我的 JSON 响应有点不同。

这是原始字符串（从 Django 后端创建）：

```
 [
  {"user":  "[
              {\"id\": \"48\"}, 
              {\"email_address\": null}, 
              {\"password\": \"f41fd61838bc65d6b2c656d488e33aba\"}, 
              {\"salt\": \"24\"}, 
              {\"date_created\": \"2013-01-27 07:59:26.722311+00:00\"},
              {\"date_modified\": \"2013-01-27 07:59:26.722357+00:00\"}, 
              {\"is_deleted\": \"False\"}
            ]"
   }
 ] 
```

`"user":`阻止我仅使用 SBJson 和它的 SBJSonParser 和/或 Apple NSJSONSeriliazatoin 类 + 方法的事情是第二个之后和之前的两个引号`[`（以及它的引号表亲，在倒数第二个之后`]`）。

`NSMutableString`这些引号在转换为 JSON 对象时会混淆上述两种解决方案。

在删除有问题的引号和/或有效处理它们的 JSON 解析库方面有什么建议/解决方案？

`NSScanner`也许一些`NSMutableString`类方法，但没有什么特别明显的东西出现在我的脑海中。

寻找一个简单新颖的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:28:27.127

您显示的 JSON 有点......无效......**上面是嵌套的 JSON：**

1.  带有用户键的 dict 数组 == 另一个 JSON 的字符串
2.  具有 n 个 JSON 字典的数组

我猜它可以分两步解析......

```
 id s = @"[ \n \
            {\"user\": \"[%@]\" \n \
            } \n \
     ]";
    id s2 = @"{\\\"id\\\": \\\"48\\\"},{\\\"email_address\\\": \\\"null\\\"},{\\\"password\\\": \\\"f41fd61838bc65d6b2c656d488e33aba\\\"},{\\\"salt\\\": \\\"24\\\"},{\\\"date_created\\\": \\\"2013-01-27 07:59:26.722311+00:00\\\"},{\\\"date_modified\\\": \\\"2013-01-27 07:59:26.722357+00:00\\\"},{\\\"is_deleted\\\": \\\"False\\\"}";
    s = [NSString stringWithFormat:s,s2];
    id d = [s dataUsingEncoding:NSUTF8StringEncoding];
    NSLog(@"\n%@ %@", s, d);
    NSError *error = nil;
    id outerJSON = [NSJSONSerialization JSONObjectWithData:d options:0 error:&error];
    if(!outerJSON && error) {
        NSLog(@"%@", error);
        return -1;
    }
    NSLog(@"\n%@", outerJSON);

    s = [[outerJSON objectAtIndex:0] objectForKey:@"user"];
    d = [s dataUsingEncoding:NSUTF8StringEncoding];
    id innerJSON = [NSJSONSerialization JSONObjectWithData:d options:0 error:&error];
    if(!innerJSON && error) {
        NSLog(@"%@", error);
        return -1;
    }
    NSLog(@"\n%@", innerJSON); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:51:22.920

就像其他人所说的那样，这不是有效的 JSON。在后端修复它是最好的解决方案，但如果你不能 - 这应该适合你：

```
NSString *dJangoString = @"[{\"user\":  \"[{\"id\": \"48\"},{\"email_address\": null},{\"password\":\"f41fd61838bc65d6b2c656d488e33ab\"},{\"salt\": \"24\"},{\"date_created\": \"2013-01-27 07:59:26.722311+00:00\"},{\"date_modified\": \"2013-01-27 07:59:26.722357+00:00\"},{\"is_deleted\": \"False\"}]\"}]\"";

dJangoString = [dJangoString stringByReplacingOccurrencesOfString:@"\"[" withString:@"["];
dJangoString = [dJangoString stringByReplacingOccurrencesOfString:@"]\"" withString:@"]"];

NSData* dJangoData = [dJangoString dataUsingEncoding:NSUTF8StringEncoding];
NSError *error = nil;
id retObj = [NSJSONSerialization JSONObjectWithData:dJangoData options:0 error:&error];

NSLog(@"retObj = %@", [retObj description]); 
```

# jquery - 如何通过id而不是标签设置jquery自动完成

> ID：14545637
> 
> 赞同：2
> 
> 时间：2013-01-27T08:17:34.603
> 
> 标签：jquery, autocomplete

大家好，我得到了一个带有表单源的 jquery 自动完成功能：

```
var source = [
              {"label":"item 1", "value":1}, 
              {"label":"item 2", "value":2}, 
              {"label":"item 3", "value":3}]; 
```

我要做的就是将自动完成设置为显示，如果我给他值 1，让他说“项目 1”，如果我给他值 2，则显示“项目 2”。

我所看到的只是通过标签设置自动完成的选项，如下所示：

```
$("#myAutoCompleteID").val("item 1") ; 
```

我想按值设置自动完成...类似于：

```
$("#myAutoCompleteID").setValByValue(1) 
```

有什么帮助吗？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:31:21.807

你为什么不自己写一个小函数

```
function GetLabelByValue(val){
 $.each(function(i,v){
 if(v.value === val)
  {
   return v.label;
  }
 });
}
$("#myAutoCompleteID").val(GetLabelByValue(1)) ; 
```

# c# - 更改 WPF 选项卡控件中的选项卡项位置

> ID：14545638
> 
> 赞同：1
> 
> 时间：2013-01-27T08:17:52.937
> 
> 标签：c#, .net, wpf, tabcontrol

我想更改 WPF TabControl 中的 TabItems 位置。我知道有一个“标签条位置”属性，但这个属性只允许我使用“顶部”、“左侧”、“右侧”、“底部”选项。我想将选项卡条放在选项卡控件的顶部，如下所示：

```
 -----------------------------------
 |                                 |
 |   TabItem1       TabItem2       |
 |                                 |
 |                                 |
 |                                 | 
```

但我找不到怎么做。

TabItems 仍然需要在不同的内容之间切换。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:48:58.380

这可以通过覆盖您可以从[此处](http://msdn.microsoft.com/en-us/library/ms754137%28v=vs.85%29.aspx)获取的 tabControl 的默认模板来实现。

我根据您的需要修改了一些模板 -

```
 <Style TargetType="{x:Type TabControl}"
               BasedOn="{StaticResource {x:Type TabControl}}">
          <Setter Property="Template">
            <Setter.Value>
              <ControlTemplate TargetType="{x:Type TabControl}">
                <Grid KeyboardNavigation.TabNavigation="Local">
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                  </Grid.RowDefinitions>
                   <Border Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                           Grid.Row="0"
                           BorderThickness="1">
                      <TabPanel x:Name="HeaderPanel"
                                IsItemsHost="True"
                                Margin="0,10,0,0"
                                Panel.ZIndex="1"
                                KeyboardNavigation.TabIndex="1"
                                Background="Transparent" />
                   </Border>
                  <Border x:Name="Border"
                          Grid.Row="1"
                          BorderThickness="1"
                          KeyboardNavigation.TabNavigation="Local"
                          KeyboardNavigation.DirectionalNavigation="Contained"
                          KeyboardNavigation.TabIndex="2"
                          Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}">
                    <ContentPresenter x:Name="PART_SelectedContentHost"
                                      Margin="4"
                                      ContentSource="SelectedContent" />
                  </Border>
                </Grid>
              </ControlTemplate>
            </Setter.Value>
          </Setter>
        </Style> 
```

把这种风格放在你的窗口资源中，你就可以开始了。它给了我这个外观（希望这是你想要的） -

![在此处输入图像描述](../Images/23c8245f00a174ce10cba01867080183.png)

# unit-testing - 当测试文件和被测文件位于不同文件夹时如何设置.cabal测试套件

> ID：14545644
> 
> 赞同：4
> 
> 时间：2013-01-27T08:18:44.940
> 
> 标签：unit-testing, haskell, automated-tests, cabal, cabal-install

我正在尝试以一种便于我将来开发的方式来构建我的简单项目。基本上我已经习惯`cabal init`了获取基本的东西，然后我创建了一个 src 文件夹，在里面我创建了一个主文件夹和一个测试文件夹，主要用于保存所有源代码，测试是放置所有测试源代码。在 .cabal 我有以下内容：

```
.
.
.
.
test-suit Test
  type:           exitcode-stdio-1.0
  hs-source-dirs: src/test
  main-is:        Test.hs
  build-depends:  base

executable Finance
  hs-source-dirs: src/main
  main-is:        Main.hs
  build-depends:  base 
```

只有三个文件 Main.hs、Methods.hs、Test.hs。Methods.hs 导入 Main.hs 以执行，Test.hs 导入 Methods.hs 并测试方法。我的目标是能够做到`cabal --enable-tests configure`那么`cabal build`那么`cabal test`那么`cabal install`。但是在构建阶段我收到了错误

```
src/test/Test.hs:2:8:
  Could not find module `Methods`
  Use -v to see a list of the files search for. 
```

我如何让 cabal 知道 Methods.hs 在哪里？另外，有没有更好的方法来设置项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T09:16:42.070

看起来你只需要添加`src/main`到`hs-source-dirs`测试服。

您还可以使用`Methods`模块创建一个库，并使可执行文件和测试套件都依赖于该库。

有大量关于 hackage 的示例，例如[doctest](http://hackage.haskell.org/packages/archive/doctest/0.9.5/doctest.cabal)它的测试套件“spec”使用`hs-source-dirs`，而测试套件“doctests”使用库。第一种方法允许测试不是由库导出的区间函数。

# android - 在运行时更改复选框背景-（在运行时更改复选框渐变颜色）android

> ID：14545645
> 
> 赞同：1
> 
> 时间：2013-01-27T08:18:55.660
> 
> 标签：android, checkbox, gradient

我们知道在 android 应用程序中，我们可以通过使用`SetButtonDrawable`xml 文件来更改复选框的背景颜色。

此 xml 文件可以使用渐变或在可绘制对象中使用图像的简单文件来定义。本文展示了一个带有渐变的示例：[Android: Set color of CheckBox](https://stackoverflow.com/questions/11464143/android-set-color-of-checkbox)

这也是我使用的另一个示例：

```
 <item android:state_checked="true">
    <layer-list>
        <item>
            <shape android:shape="rectangle">
                <solid android:color="#9b9b9b" />
                <corners android:radius="5dp" />

            </shape>
        </item>
        <item android:top="2dp" android:left="1.5dp" >
            <shape  android:shape="rectangle">
                <solid android:color="#ffffff" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
        <item android:top="2dp" android:bottom="1dp" android:left="1.5dp">
            <shape  android:shape="rectangle">
                <gradient android:startColor="#ff7dbce9" android:endColor="#ff2578b3" android:angle="270" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
        <item android:top="2dp" android:bottom="1dp" android:left="1.5dp">
            <shape  android:shape="rectangle">
                <gradient android:startColor="#ff7dbce9" android:endColor="#ff2578b3" android:angle="270" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
        <item>
            <bitmap android:gravity="center" android:src="@drawable/tick_red_icon"/>
        </item>
    </layer-list>
</item>
<item >
    <layer-list>
        <item>
            <shape android:shape="rectangle">
                <solid android:color="#9b9b9b" />
                <corners android:radius="5dp" />
            </shape>
        </item>
        <item android:top="2dp" android:left="1.5dp" >
            <shape  android:shape="rectangle">
                <solid android:color="#ffffff" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
        <item android:top="2dp" android:bottom="2dp" android:left="1.5dp">
            <shape  android:shape="rectangle">
                <solid android:color="#e5e4e4" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
    </layer-list>
</item> 
```

我们还知道，如果我们想改变渐变颜色，我们需要`DrawableGradient`在运行时将其定义为 a ，然后使用它。

问题是这样的：我们如何定义一些像上面这样复杂的渐变，`DrawableGradient`以便能够在运行时改变它们的颜色？

或者如果有一个不好的解决方案，有没有更好的解决方案，我们设置复选框的背景颜色并可以在运行时更改它们的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:48:11.667

最后通过研究，我找到了这篇[文章](https://stackoverflow.com/questions/8018435/android-how-to-change-a-layer-list-drawable)，并在此基础上开发了一个代码，即这个问题的答案。

我们必须在单独的 xml 文件中定义每一层，如下所示：

```
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
        <item>
            <shape android:shape="rectangle">
                <solid android:color="#9b9b9b" />
                <corners android:radius="5dp" />

            </shape>
        </item>
        <item android:top="2dp" android:left="1.5dp" >
            <shape  android:shape="rectangle">
                <solid android:color="#ffffff" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
        <item android:top="2dp" android:bottom="1dp" android:left="1.5dp" android:id="@+id/mainImage">
            <shape  android:shape="rectangle">
                <gradient android:startColor="#ff7dbce9" android:endColor="#ff2578b3" android:angle="270" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
        <item android:top="2dp" android:bottom="1dp" android:left="1.5dp" android:id="@+id/TheinImage">
            <shape  android:shape="rectangle">
                <gradient android:startColor="#ff7dbce9" android:endColor="#ff2578b3" android:angle="270" />
                <corners android:radius="5dp" />
                <size android:height="20dp" android:width="20dp" />
            </shape>
        </item>
        <item>
            <bitmap android:gravity="center" android:src="@drawable/ic_menu_ca_dis"/>
        </item>
    </layer-list> 
```

然后通过在运行时检索它们，我们可以更改它们的项目。（层是我的 xml 文件的名称）

```
GradientDrawable gd = new GradientDrawable
            (GradientDrawable .Orientation .TopBottom,
             new int[]{Color.Red , Color.Green });
        gd.SetStroke (10, Color.Blue );
LayerDrawable ld = (LayerDrawable) Resources .GetDrawable  (Resource .Drawable.Layer   );
        bool testfactor = ld.SetDrawableByLayerId (Resource .Id.mainImage , gd); 
```

现在，通过使用`StateListDrawable`我们可以定义女巫状态与女巫层相关：

```
 StateListDrawable states = new StateListDrawable();
        states.AddState (new int[] {Android .Resource .Attribute .StateChecked },
        ld);
        states.AddState(new int[] { },
        Resources .GetDrawable (Resource .Drawable .ic_menu_ca_dis   ) ); 
```

现在，您可以加入在运行时更改此 xml :)

# javascript - 如何动态呈现新的 Twitter 小部件？

> ID：14545653
> 
> 赞同：6
> 
> 时间：2013-01-27T08:20:30.500
> 
> 标签：javascript, jquery, html, twitter

如果我在 Twitter 上注册一个小部件，我会得到以下代码：

```
<a class="twitter-timeline" href="https://twitter.com/vinto60utd" data-widget-id="283564783750483968">Tweets by @vinto60utd</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id))>>>{js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}>(document,"script","twitter-wjs");</script> 
```

如果我将这段代码原样放在我的页面上，我会看到我想要的 Twitter 小部件。如何动态呈现我的小部件或在执行某些事件时（如按钮单击）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-20T09:42:25.107

采用

```
twttr.widgets.load(); 
```

如果您已经加载了 //platform.twitter.com/widgets.js

在我的情况下，我这样做：将一些空的或以前时间轴填充的块的内容替换为像你这样的新链接

```
<a class="twitter-timeline" href="https://twitter.com/vinto60utd" data-widget-id="283564783750483968">
    Tweets by   @vinto60utd</a> 
```

然后我打电话 `twttr.widgets.load();`和推特做剩下的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T08:35:10.170

改变

```
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs"); 
```

到

```
function twit(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}
twit(document,"script","twitter-wjs"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-12T11:41:08.827

您可以拥有一个数据小部件 ID 并通过添加过滤掉任何推文消息提要，

```
 data-screen-name="AnyTwitterName" 
```

举个例子

```
 <a class="twitter-timeline"  data-widget-id="6596840392xxxxxxxx"  data-screen-name="AnyTwitterName" ></a> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-16T10:28:05.167

您可以使用 Twitter for Websites JS 在运行时创建小部件。

[https://dev.twitter.com/web/embedded-timelines](https://dev.twitter.com/web/embedded-timelines)

# matlab - matlab误差矩阵维数必须一致

> ID：14545654
> 
> 赞同：0
> 
> 时间：2013-01-27T08:20:33.450
> 
> 标签：matlab

我正在尝试调试代码的一部分，但收到此错误：

```
??? Error using ==> plus 
```

矩阵尺寸必须一致。

==> dwtembed 中的错误在 48 cH1=cH1+k*pn_sequence_h;

这是代码段：

```
for kk=1:length(message_vector)  
pn_sequence_h=round(2*(rand(Mc/2,Nc/2)-0.5)); 
pn_sequence_v=round(2*(rand(Mc/2,Nc/2)-0.5)); 
if (message(kk) == 0) 
    cH1=cH1+k*pn_sequence_h; 
    cV1=cV1+k*pn_sequence_v; 
end 
end 
```

这些是变量的值：

```
kk 18096  
message_vector <150096x1 double>  
pn_sequence_h <118x116 double>  
Mc 236  
Nc 232  
pn_sequence_v <118x116 double>  
cH1 <118x116x3 double>  
cV1 <118x116x3 double>  
k   2 
```

你能帮我提供所提供的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:26:50.920

You have mismatch dimensions. You are trying to add `CH1` of size 118x116x3 (a 3D array) with `on_sequence_h` which is 118x116 (a 2D matrix). This operation is **not defined**

You may use `bsxfun`:

```
cH1 = bsxfun( @plus, cH1, k*pn_sequence_h ); 
```

# build-process - 编译时的目标混淆

> ID：14545655
> 
> 赞同：0
> 
> 时间：2013-01-27T08:21:14.580
> 
> 标签：build-process, xcode4.5, target

我正在开发一个项目，在 xCode 4.5.2 中具有 2 个目标 T1 和 T2。

当我想构建 T1 时，我收到有关仅属于 T2 的一个文件的错误消息。

显然，即使我认为该文件属于 T2，编译器也有不同的想法。我需要在哪里检查？据我所知，我已经完成了文件位于 T2 内部而不是 T1 内部的必要操作。但我一定是忘记了什么。任何想法？

感谢您提供任何有用的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:35:14.920

检查文件的“目标成员资格”...单击项目中的文件，然后查看 Xcode 项目窗口右侧的“文件检查器”：

![确保为您的 .m 文件选择了 Target Membership](../Images/8a712ba07f70b744223e5d8c7c39304e.png)

在这种情况下，我刚刚查找了 UIKit.framework 的目标成员资格，但在您的情况下，您应该看到有问题的文件属于哪个目标成员资格。

# count - SQL as JPA2\. How to create a CriteriaQuery in JPA2 with MAX(), GROUP BY, ORDER BY, LIMIT and FOUND_ROWS()

> ID：14545657
> 
> 赞同：1
> 
> 时间：2013-01-27T08:21:28.207
> 
> 标签：count, subquery, jpa-2.0, aggregation, criteriaquery

In MySQL I'm able to select MAX value for desired column, group and order records, limit result and get total rows count in two SQL statements (executions):

```
SELECT SQL_CALC_FOUND_ROWS b.class, b.age FROM (
    SELECT students.*, max(age) FROM `students`GROUP BY class LIMIT 0,10
) as b;
SELECT FOUND_ROWS() as total; 
```

From 250 records it selects 24 as total which is correct. (24 unique classes)

I'm able to select grouped records but not sure how to get total count. Also, result is List< List< Student > + MAX(age) >. However, without groupBy and max(), it produces List< Student > as expected.

```
CriteriaBuilder qb = em.getCriteriaBuilder();
CriteriaQuery q = qb.createQuery();

Root e = q.from(Student.class);
Expression maxExpression = qb.max(e.get("age"));

CriteriaQuery<Object> cq = q.multiselect(e, maxExpression);
cb.groupBy(e.get("class"));

TypedQuery typedQuery = em.createQuery(cb);
List<Student> students = typedQuery.getResultList(); 
```

Is it possible to get same result in JPA2 as a List?

# android - Android get sms from inbox, optimized way to read all messages and group them

> ID：14545661
> 
> 赞同：13
> 
> 时间：2013-01-27T08:21:36.967
> 
> 标签：android, android-contentprovider, android-contacts, android-contentresolver

Hi am implementing a SMS App, now am able to retrieve all messages with their respective contact info like display name, photo uri.. and am displaying them in a custom list where on item click takes you to respective discussion. Here my issues is the time taking to sync all these messages,

1.  I need to optimize this time.
2.  Each time i send a new message in the discussion view and go back to recent chats i need to only update the particular item, not the whole list.

Here's my code:

ReadSMS.java:

```
public class ReadSMS {

    ArrayList<HashMap<Contact, ArrayList<OneComment>>> recentChats;

    Application _context;

    public ReadSMS(Application context) {
        this._context = context;
        this.recentChats = ((ChatApplication) _context).getChats();
    }

    public ArrayList<HashMap<Contact, ArrayList<OneComment>>> getSMS() {

        // Init
        ArrayList<SmsMsg> smsMsgs = new ArrayList<SmsMsg>();
        TreeSet<Integer> threadIds = new TreeSet<Integer>();

        Uri mSmsinboxQueryUri = Uri.parse("content://sms");
        Cursor cursor = _context.getContentResolver().query(
                mSmsinboxQueryUri,
                new String[] { "_id", "thread_id", "address", "date", "body",
                        "type" }, null, null, null);

        String[] columns = new String[] { "address", "thread_id", "date",
                "body", "type" };
        if (cursor.getCount() > 0) {

            while (cursor.moveToNext()) {

                SmsMsg smsMsg = new SmsMsg();

                String address = null, displayName = null, date = null, msg = null, type = null, threadId = null;
                Uri photoUri = null;

                threadId = cursor.getString(cursor.getColumnIndex(columns[1]));

                type = cursor.getString(cursor.getColumnIndex(columns[4]));

                if (Integer.parseInt(type) == 1 || Integer.parseInt(type) == 2) {

                    address = cursor.getString(cursor
                            .getColumnIndex(columns[0]));

                    if (address.length() > 0) {

                        String[] contactData = getContactByNumber(address);
                        if (contactData != null) {
                            displayName = contactData[0];
                            if (contactData[1] != null)
                                photoUri = Uri.parse(contactData[1]);
                        }
                    } else
                        address = null;

                    date = cursor.getString(cursor.getColumnIndex(columns[2]));
                    msg = cursor.getString(cursor.getColumnIndex(columns[3]));

                    smsMsg.setDisplayName(displayName);
                    smsMsg.setThreadId(threadId);
                    smsMsg.setAddress(address);
                    smsMsg.setPhotoUri(photoUri);
                    smsMsg.setDate(date);
                    smsMsg.setMsg(msg);
                    smsMsg.setType(type);

                    // Log.e("SMS-inbox", "\n\nNAME: " + displayName
                    // + "\nTHREAD_ID: " + threadId + "\nNUMBER: "
                    // + address + "\nPHOTO_URI: " + photoUri + "\nTIME: "
                    // + date + "\nMESSAGE: " + msg + "\nTYPE: " + type);

                    smsMsgs.add(smsMsg);

                    // Add threadId to Tree
                    threadIds.add(Integer.parseInt(threadId));
                }

            }

            for (int threadId : threadIds) {

                HashMap<Contact, ArrayList<OneComment>> oneChat = new HashMap<Contact, ArrayList<OneComment>>();
                Contact con = new Contact();
                ArrayList<OneComment> oneDisc = new ArrayList<OneComment>();

                for (SmsMsg smsMsg : smsMsgs) {

                    if (Integer.parseInt(smsMsg.getThreadId()) == threadId) {

                        con.setContactName(smsMsg.getDisplayName());
                        con.setContactNumber(smsMsg.getAddress());
                        con.setContactPhotoUri(smsMsg.getPhotoUri());

                        if (Integer.parseInt(smsMsg.getType()) == 1)
                            oneDisc.add(0, new OneComment(true,
                                    smsMsg.getMsg(), smsMsg.getDisplayName(),
                                    smsMsg.getDate(), false));
                        else if (Integer.parseInt(smsMsg.getType()) == 2)
                            oneDisc.add(0,
                                    new OneComment(false, smsMsg.getMsg(),
                                            "Me", smsMsg.getDate(), false));

                    }

                }

                oneChat.put(con, oneDisc);
                // add at pos 0
                recentChats.add(0, oneChat);

            }

        }

        return recentChats;
    }

    public String[] getContactByNumber(final String number) {
        String[] data = new String[2];

        try {

            Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
                    Uri.encode(number));

            Cursor cur = _context.getContentResolver().query(uri,
                    new String[] { PhoneLookup.DISPLAY_NAME, PhoneLookup._ID },
                    null, null, null);

            if (cur.moveToFirst()) {
                int nameIdx = cur.getColumnIndex(PhoneLookup.DISPLAY_NAME);
                data[0] = cur.getString(nameIdx);

                String contactId = cur.getString(cur
                        .getColumnIndex(PhoneLookup._ID));

                Uri photoUri = getContactPhotoUri(Long.parseLong(contactId));

                if (photoUri != null)
                    data[1] = photoUri.toString();
                else
                    data[1] = null;

                cur.close();
                return data;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;

    }

    public Uri getContactPhotoUri(long contactId) {

        Uri photoUri = ContentUris.withAppendedId(Contacts.CONTENT_URI,
                contactId);
        photoUri = Uri.withAppendedPath(photoUri,
                Contacts.Photo.CONTENT_DIRECTORY);
        return photoUri;

    }

} 
```

SmsMsg.java POJO:

```
public class SmsMsg {

    private String address = null;
    private String displayName = null;
    private String threadId = null;
    private String date = null;
    private String msg = null;
    private String type = null;
    Uri photoUri = null;

    public Uri getPhotoUri() {
        return photoUri;
    }

    public void setPhotoUri(Uri photoUri) {
        this.photoUri = photoUri;
    }

    public String getDisplayName() {
        return displayName;
    }

    public void setDisplayName(String displayName) {
        this.displayName = displayName;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getThreadId() {
        return threadId;
    }

    public void setThreadId(String threadId) {
        this.threadId = threadId;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public String getMsg() {
        return msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T23:53:19.890

POJO 存储不是一个好方法，因为它们需要一直保留在内存中，否则会重新加载导致痛苦和缓慢。

在这种情况下，您应该创建一个更新 sqlite 数据库的服务，并将其呈现为[ContentProvider](http://developer.android.com/guide/topics/providers/content-providers.html)。sqlite db 应该只包含 Android 未提供的结构，即您的联系人/线程层次结构，以及您可能在列表中显示的任何数据，例如最新消息的文本。

[该线程](https://stackoverflow.com/questions/2735571/detecting-sms-incoming-and-outgoing)讨论了如何检测新的 SMS 消息到达/发送，无论是来自您的应用程序还是其他应用程序，这可能是您真正想要的，而不是简单地检测用户从您自己的应用程序发布消息。Service 应该执行这个任务，UI Activity 只需要观察 ContentProvider。

旁白：我想知道用户将如何向尚未向其发送消息的联系人发送消息，因为您的列表仅包含他们已向其发送消息的联系人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T14:18:21.903

您可能需要提供更多详细信息，说明您实际上是如何接近该方向的，特别是您有多少活动（似乎有两个）。

假设其中有两个，在第一个活动中不要尝试捕获每条消息，只需获取所有 thread_Id 和地址。

然后当用户单击任何列表项时，然后执行其他线程以读取属于该线程的所有消息。

使用以下内容：

```
Uri uriSMSURI = Uri.parse("content://sms/inbox");
Cursor cur = getContentResolver().query(uriSMSURI, null, null, null, null); 
```

用于阅读收件箱并获取 thread_Ids 和地址并将它们存储到一些 java modal 类，即 DTO

并填充列表，当用户单击任何项​​目时，传递thread_id，然后像这样查询以获取所有对话，即线程。

```
Uri uriSMSURI = Uri.parse(Uri.parse("content://sms/conversations/")+ thread_id);
cursor = getContentResolver().query(uriSMSURI, null,"thread_id=?", new String[] { tid }, null); 
```

# sql-server-2008 - Using cursors in a stored procedure

> ID：14545667
> 
> 赞同：1
> 
> 时间：2013-01-27T08:23:11.710
> 
> 标签：sql-server-2008, stored-procedures, cursor

Here is my stored procedure :

```
CREATE PROCEDURE uspUpdateDataInBapMidTable (
   @companyName varchar(50)
)
AS
BEGIN
    SET @companyName = 'nürnberger'

    DECLARE @tableNameMid varchar(50) , @tableNameIn varchar(50) , @queryToCreateTable nvarchar (500) , @queryToAddColumn nvarchar(500)
    DECLARE @queryToUpdateBapMid nvarchar(500)
    SET @tableNameMid = 'BAP_'+@companyName+'_MID'
    SET @tableNameIn = 'BAP_'+@companyName+'_IN'
    DECLARE @COGI varchar (50)
    SET @COGI = ''

SET NOCOUNT ON
    DECLARE @collectionOfGesellschaft_id nvarchar(100)
    DECLARE myCursor cursor FOR
    SELECT distinct gesellschaft_id from CRM_Wifo_GmbH.dbo.vertrag_168 where gesellschaft like '%nürnberger%'

    open myCursor
    DECLARE @collectionOfGesellschaft_id1 nvarchar(100)

    set @collectionOfGesellschaft_id  = '('
    fetch next from myCursor into @collectionOfGesellschaft_id1
    while @@fetch_status = 0
    begin
    set @collectionOfGesellschaft_id = @collectionOfGesellschaft_id + @collectionOfGesellschaft_id1 + ' ,'

    fetch next from myCursor into @collectionOfGesellschaft_id1
    END
    set @collectionOfGesellschaft_id = SUBSTRING(@collectionOfGesellschaft_id,1,LEN(@collectionOfGesellschaft_id)-1) + ')'
    SET @COGI = @collectionOfGesellschaft_id
    CLOSE myCursor
    DEALLOCATE myCursor                         
    go

SET @queryToUpdateBapMid = N'select distinct b.*,v.vertrag_id,v.VersicherungsscheinNummer 
from CRM_Wifo_GmbH.dbo.vertrag_168 v,temp_universa b where v.VersicherungsscheinNummer like ''%'' + b.VSNR + ''%''  and v.gesellschaft_id in' + @COGI
EXEC(@queryToUpdateBapMid)

END 
```

`@companyName` is set for my testing purpose. when I execute the cursor only, it runs fine. but in the stored procedure it shows followingerror :

> *Msg 102, Level 15, State 1, Procedure uspUpdateDataInBapMidTable, Line 33
> Incorrect syntax near 'myCursor'.*
> 
> *Msg 137, Level 15, State 2, Line 3
> Must declare the scalar variable "@COGI".*
> 
> *Msg 137, Level 15, State 2, Line 4
> Must declare the scalar variable "@queryToUpdateBapMid".*

I have declare these two variable in the starting of the SP, but they are showing this error. and what is the problem with the line

```
 DEALLCOATE myCursor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:45:57.037

问题与`go`该行之后的单词有关`DEALLOCATE myCursor`。

`GO`不是一般 SQL 或特定 Transact-SQL 的一部分。它是 SQL Server Management Studio 等工具识别的关键字或`sqlcmd`作为批处理分隔符。遇到`GO`时，您的脚本将在该点拆分，并且前面`GO`的部分与其后面的部分分开执行。

您的`go`特定脚本中的 过早拆分它。它基本上使最初的`BEGIN`未关闭，这实际上就是错误的含义，尽管授予该消息可能看起来有些混乱。

无论如何，这是你的问题，所以，只需删除`go`.

# sql - 将代表 DateTime 的通用格式 (dd/MM/yy hh:mm) 的 varchar 转换为 DateTime

> ID：14545672
> 
> 赞同：0
> 
> 时间：2013-01-27T08:23:34.523
> 
> 标签：sql, datetime, sql-server-2008-r2, type-conversion

我有一个表格，其中有一`varchar`列以下一种格式表示日期和时间：

```
dd/MM/yy hh:mm 
```

例如：`27/01/13 07:57`

我需要将此列转换为`DateTime`类型。

我试图做到这一点但没有成功。

假设`@varcharDT`包含`VarChar`DateTime 并且我想将转换后的值插入到`@dateTimeDT`变量中。

```
DECLARE @varcharDT varchar(1000)
SELECT @varcharDT = dateTimeColumn from dbo.tempTable

--Trying to convert
DECLARE @dateTimeDT DateTime
SET @dateTimeDT= CONVERT (DATETIME, @varcharDT ) 
```

最后一行引发了下一个异常：

> *从字符串转换日期和/或时间时转换失败。*

我认为转换失败是因为我的`VarChar`DateTime 是自定义格式。

我该如何解决？

我正在使用 SQL Server 2008 R2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:29:43.080

尝试：

```
CONVERT(datetime, @varcharDT, 3) 
```

最后一个数字是转换的样式。该列表可在 MSDN 文档文章[CAST and CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)中找到。

# google-maps-api-3 - 标记过多：如何将它们呈现为服务器端的平铺层？

> ID：14545673
> 
> 赞同：4
> 
> 时间：2013-01-27T08:23:35.107
> 
> 标签：google-maps-api-3

我正在开发一个使用 Google Maps JavaScript API V.3 作为前端的公共交通信息网络应用程序。**但是由于地图上显示的标记（中转站）数量众多，客户端性能很差**，尤其是地图平移（尽管标记是基于地图边界动态加载的）。

对于可用性设计，聚类标记不是一种选择。所以我正在考虑**将这些标记渲染为 server-side 上的单独切片层**。然后可能在地图对象上使用谷歌地图事件 onclick 和 onmousemove 来模仿标记交互。

问题是：*什么是做到这一点的好方法？*我应该研究哪个服务/API/软件/服务器可以以最小的开销和学习曲线完成此任务？你能指点我的起点吗？

我已经查看了 Google 的 Fusion Table，但它不允许自定义标记图像，因此不是可接受的替代方案。

我的项目环境是：Apache 服务器上的 PHP CodeIgniter 作为后端，PostgreSQL 9.2 + PostGis 2.0 作为数据库系统，都托管在 Amazon EC2 小型实例服务器上。

PS。我的网站在[www.bussup.com](http://www.bussup.com)，如果你有兴趣的话（它还没有被国际化，所以很抱歉没有英文支持）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:18:40.907

使用任一：

*   [融合表](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)
*   [KML 层](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

两者都会自动处理。

# c# - 在 WPF 中绘制样式线

> ID：14545675
> 
> 赞同：6
> 
> 时间：2013-01-27T08:23:55.927
> 
> 标签：c#, wpf, geometry, customization

有没有办法在点之间画线，给定一个简单的**几何**作为线条样式，使用**WPF 几何**？我知道可以制作这些线条：

```
-- -- --- -- 
```

但我想使用任何简单的几何图形（例如：'^' 符号）来制作线条。所以我想要的是这样的：（这条线不一定是水平的或垂直的）：

```
^^^^^^^^^^^^^^^^^    
***************** 
```

**注意：**我不想与某些字符划线。我想使用任意几何形状（例如：起始形状、三角形或任何其他几何形状）来实现。换句话说，我想沿着两点之间的线性路径重复一些几何图形。所以这些简单的几何图形可能会以某种方式旋转以跟随这条线并且......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:44:32.093

如果我理解正确，您基本上想使用`*`or`^`或`!`作为一条线。与其使用普通的实线、虚线、虚线等线条，不如使用物理字符？但你希望这些角色成为一个`Geometry`对象。

您可以执行以下操作：

```
// Create a line of characters.
string lineString = "^^^^^^^^^^^^^^";

// Create Formatted Text, customize accordingly.
FormattedText formatText = new FormattedText(
     lineString, CultureInfo.GetCultureInfo("en-us"),
     FlowDirection.LeftToRight,
     new Typeface("Arial"), 32, Brushes.Black);

// Set the Width and Height.
formatText.MaxTextWidth = 200;
formatText.MaxTextHeight = 100;

// You can obviously add as many customization's and outputs of your choice. 
```

现在我明白这不是你想要的，你想要上面`string`的行为`Geometry`。要做到这一点；你只需要这样做：

```
// Build Geometry object to represent text.
Geometry lineGeometry = formatText.BuildGeometry(new System.Windows.Point(0, 0));

// Tailor Geometry object that represents our item.
Geometry hGeo = formatText.BuildHighlightGeometry(new System.Windows.Point(0, 0)); 
```

现在基本上你已经构建了一个`Geometry`代表“^^^^^^^^”的对象。

希望我理解正确，我不知道这是否能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:20:18.940

我认为这是一个有趣的问题，但我无法在 stackoverflow 文本框中找到令人满意的答案，所以我在 github 上上传了一个建议的解决方案：

[https://github.com/mrange/CodeStack/tree/master/q14545675/LineGeometry](https://github.com/mrange/CodeStack/tree/master/q14545675/LineGeometry)

我并不是说这是对您问题的 100% 解决方案（因为我不是您所有要求的 100%），但是如果您看一下它，也许可以进行一些改进和改进。

除非ofc我对你正在寻找的东西是错误的。

# sql - Renaming worksheets in Excel via export from Visual Studio 2010

> ID：14545677
> 
> 赞同：2
> 
> 时间：2013-01-27T08:24:10.167
> 
> 标签：sql, excel, visual-studio-2008

I' m developing reports from Visual Studio 2010 using .rdlc extension.

There is a requirement where I have to export all reports to one excel file in the form of tabs.

When I export reports to Excel I can see the reports in the form of tabs(sheet1, sheet2, ........).

I want to rename these sheets. I have seen that in SQL Server 2008 R2 there is a property PageName which I' m unable to find in Visual Studio 2010\. Please help me with this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T08:28:52.720

你可以试试这个：

> **页面名称**
> 
> 设置此项，然后在导出到 excel 时，选项卡将使用页面名称。这可以在报表中的某些对象上设置，并且可以使用表达式来设置名称。包含此属性的对象包括：

```
 - Tablix
 - Rectangle 
```

以下是供您探索的教程：

*   [将报告导出到 Excel 并设置页面名称](http://www.wiseowl.co.uk/blog/s146/pagename-reports.htm)

# r - 在 ggplot2 的箱线图中为每个框在 x 轴上添加样本总数

> ID：14545680
> 
> 赞同：3
> 
> 时间：2013-01-27T08:24:29.907
> 
> 标签：r, ggplot2, boxplot

我可以用经典来做到这一点`boxplot`。这里我们使用内置数据：`PlantGrown`作为示例。

```
attach(PlantGrowth)    
boxplot(weight~group,data=PlantGrowth,xaxt="n")
PlantGrowthSum=ddply(PlantGrowth,.(group),summarise,sum=length(weight))

> PlantGrowthSum
   group sum
1  ctrl  10
2  trt1  10
3  trt2  10

axis(1,1:3,paste(PlantGrowthSum$group,"(",PlantGrowthSum$sum,")",sep="")) 
```

![箱线图，每个框的总和数](../Images/8dfa57da1d0da8920233fe36559bd109.png)

这里有一个问题，怎么样`ggplot2`？

```
library(ggplot2)
bp <- ggplot(data=PlantGrowth, aes(x=group, y=weight, fill=group))
    + geom_boxplot()
    +theme(axis.text.x=element_blank())
    +theme(axis.text.x=1:3)
bp 
```

但它失败了。关于应该设置哪个参数的任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T08:27:47.970

由于在这种情况下 x 值是离散的，您应该使用`scale_x_discrete()`来设置 x 轴的标签。

```
bp <- ggplot(data=PlantGrowth, aes(x=group, y=weight, fill=group))+
geom_boxplot()
bp+scale_x_discrete(labels=paste(PlantGrowthSum$group,"(",PlantGrowthSum$sum,")",sep="")) 
```

![在此处输入图像描述](../Images/ed6a3765827563a17e6a511afe84025a.png)

有关 ggplot2 绘图的比例和其他元素的更多信息和示例可以在 ggplot2 文档[站点](http://docs.ggplot2.org/0.9.3/index.html)中找到。

# jquery - Google/Facebook/Twitter 分享按钮添加额外的“类”

> ID：14545682
> 
> 赞同：0
> 
> 时间：2013-01-27T08:24:54.197
> 
> 标签：jquery, twitter, google-plus, facebook-sharer

我在我的网站（G+、FB、Twitter）上添加了三个分享按钮。一切正常，但我还需要控制用户单击任何共享按钮的那一刻，应该出现共享窗口，而且我想同时运行我的 jQuery 脚本。以不同的方式尝试，但结果令人悲伤。是否可以为这些按钮添加“类”？也许以前有人尝试过这样做？

需要一个建议。谢谢亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:55:01.930

我认为您应该考虑查看每个按钮的事件。

[Facebook 有一个类似的事件](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)：

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
); 
```

[Twitter 有一个推文事件](https://dev.twitter.com/docs/intents/events)：

```
twttr.events.bind('tweet', function(event) {
    // Do something there
}); 
```

[Google 支持回调属性](https://developers.google.com/+/plugins/+1button/#plusonetag-parameters)：

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<g:plusone callback="yourCallbackHandler"></g:plusone> 
```

# java - Play framework 1.2.5 application slow startup

> ID：14545683
> 
> 赞同：1
> 
> 时间：2013-01-27T08:25:05.200
> 
> 标签：java, hibernate, playframework, playframework-1.x

I am using Play framework 1.2.5 and Hibernate 3.25 for developing my web application. I am facing problems with the application startup, it is very slow :(

For any Java EE servlet-driven application, we use the `ServletContextListener` for initializing the session factories (which is really a time consuming job). Once the application is deployed, the session factories will be initialized and all this have to be completed before the application is ready to use for the end user. In this way, when the user triggers the first request, the response time for the first is faster.

But, for Play framework does not follow any servlet architecture. Hence not sure how to implement something similar to the `ServletContextListener` which will be create all the session factories before the application is ready to use to the end user.

Without this, for the first time the application is really very slow for the first request.

I am sure there might be something in Play Framework also which will do the same but I am not aware of it.

Please let me know about this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:57:50.790

您可以使用 Job 来初始化您的应用程序。例如，您可以有一个使用**@OnApplicationStart**注释的引导作业，该作业将负责加载您的静态数据或初始化您的缓存或工厂。

```
@OnApplicationStart
public class Bootstrap extends Job {

    public void doJob() {
        //Load static data
        //Initialise cache
        //Initialise factories
        ...
        // ready to serve application
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:53:37.603

您可能在开发模式下运行应用程序，在第一次请求时，所有内容都被懒惰地编译和初始化。生产模式在实际启动服务器之前编译所有内容。见[http://www.playframework.org/documentation/1.2.5/production](http://www.playframework.org/documentation/1.2.5/production)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:19:35.950

JB应该是正确的。简而言之，您可以使用以下`--%prod`选项启动服务器：

```
play run --%prod 
```

或者

```
play start --%prod 
```

# capslock - Setting Caps Lock to a higher level

> ID：14545684
> 
> 赞同：1
> 
> 时间：2013-01-27T08:25:05.993
> 
> 标签：capslock, xmodmap

I'm running Linux and have used a script calling xmodmap (among a couple other things) to remap my `Caps_Lock` as `BackSpace`, inspired by the Colemak layout.

Occasionally, though, the lock will be turned on as I switch layouts. To help fix this and to allow me to use the lock if I ever want to, I'd like to move it up to level 3 (`Caps Lock` = `BackSpace`; `ISOLevel3Shift`/`AltGr`+`Caps Lock`=`Caps_Lock`).

But it doesn't look like there's any easy way to do so—unless I include `remove Lock = Caps_Lock` the key changes the lock even if it's also set to `BackSpace`, and it doesn't look like there's any way to specify modifiers in `add Lock`, at least that I've found.

I'm wondering if I've missed something in this, or if there is any other way of making it work (doesn't have to be in an xmodmap file, I can call other commands in the script).

EDIT: I have found the `setxkbmap -option caps:backspace` to fix the problem, and `-option shift:both_capslock` also works in case I ever do want a caps lock.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:08:48.100

大写锁定是二进制操作。它不可能有第三种状态。

# java - Java Formatting

> ID：14545686
> 
> 赞同：4
> 
> 时间：2013-01-27T08:25:41.857
> 
> 标签：java, format

I am trying to format a string whereby the '$' stick close to the price.

For example:

```
Oranges     3     $3.00     $9.00 
```

But what I currently have:

```
Oranges     3 $    3.00 $    9.00 
```

This is my code: (Note: "price" and "total" are double datatype)

```
System.out.printf("%-25s %10s $%10s $%10s", item, quantity, price, total); 
```

I want to have a gap in between every output but I can't find a way to get the result that I wanted. Is there any ways to solve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:39:57.647

尝试

```
System.out.printf("%-25s %10s %10s %10s", item, quantity, "$" + price, "$" + total); 
```

输出

```
Oranges                            3       $3.0       $9.0 
```

或者，最重要的是，使用格式化程序方法

```
 String format(double d) {
        return String.format("$%.2f", d);
    }
...
    System.out.printf("%-25s %10s %10s %10s", item, quantity, format(price), format(total)); 
```

输出

```
Oranges                            3      $3.00      $9.00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:31:58.850

您可以将它们转换为字符串以进行输出吗？Double 类型可以调用 toString() 方法，根据此链接：

[http://www.java2s.com/Code/Java/Language-Basics/Convertdoubletostring.htm](http://www.java2s.com/Code/Java/Language-Basics/Convertdoubletostring.htm)

然后你可以在每个字符串的顶部输出一个美元符号（如果你将它们加载到一个数组中，你甚至可以循环遍历所有字符串，并为所有字符串添加一个美元符号）。

这可能不是最好的选择，但我相信它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:29:57.797

去掉价格和总数上的 10 个空格填充。

```
System.out.printf("%-25s %10s $%s $%s", item, quantity, price, total); 
```

# php - Elrte and Elfinder setup on laravel

> ID：14545688
> 
> 赞同：0
> 
> 时间：2013-01-27T08:26:01.647
> 
> 标签：php, javascript, laravel, elrte, elfinder

I am using laravel on a Mcbook with mamp as the testing environment.

I have setup elrte and elfinder using this code:

```
var dialog;
    $('.elrte').elrte({
        toolbar      : 'maxi',
        fmOpen: function(callback) {
            if (!dialog) {
                // create new elFinder
                dialog = $('<div />').dialogelfinder({
                    url: '/mycms-laravel/elfinder/php/connector.php',
                    commandsOptions: {
                        getfile: {
                            oncomplete : 'close' // close/hide elFinder
                        }
                    },
                    getFileCallback: callback // pass callback to file manager
                });
            } else {
                // reopen elFinder
                dialog.dialogelfinder('open')
            }
        }
    }); 
```

But get this message:

Invalid backend configuration. Readable volumes not available.

Have I not setup the config file? What should it be for a laravel environment.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:24:44.590

connector.php 文件应位于公共文件夹中。您可以在浏览器中访问该文件吗？您可以使用 chrome 开发人员工具或 firebug 来查看脚本的调用方式（在 network/xhr-requests 中）。找到脚本了吗？或者打开错误，看看 connector.php 文件产生了什么错误。

# php - Getting text content with xpath

> ID：14545689
> 
> 赞同：1
> 
> 时间：2013-01-27T08:26:04.897
> 
> 标签：php, xpath

I have some HTML like this:

```
<dd class="price">
    <sup class="symbol">&#36;</sup><span class="dollars">58</span><sup class="cents">.00</sup>
</dd> 
```

What's the xpath to get $58.00 back as one string?

I'm using PHP:

```
$xpath = '?????';
$result = $xml->xpath($xpath);
echo $result[0];   // want this to show $58.00, possible? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T23:38:54.513

These are valid in your case, check for more detail the links below;

```
$html = '<dd class="price">
            <sup class="symbol">&#36;</sup><span class="dollars">58</span><sup class="cents">.00</sup>
         </dd>';
$dom = new DOMDocument();
$dom->loadXML($html);
$xpt = new DOMXpath($dom);
foreach ($xpt->query('//dd[@class="price"]') as $node) {
    // outputs: $58.00
    echo trim($node->nodeValue);
}
// or
$xml = new SimpleXMLElement($html);
$res1 = $xml->xpath('//dd[@class="price"]/sup');
$res2 = $xml->xpath('//dd[@class="price"]/span');
// outputs: $58.00
printf('%s%s%s', (string) $res1[0], (string) $res2[0], (string) $res1[1]); 
```

1.  [DOMDocument](http://php.net/manual/en/class.domdocument.php)
2.  [DOMXPath](http://php.net/manual/en/class.domxpath.php)
3.  [SimpleXMLElement](http://php.net/manual/en/simplexmlelement.xpath.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:37:21.530

`data()`将返回当前上下文中的所有内容。尝试

```
//dd/data() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:45:10.140

您还没有向我们展示您的代码，所以我不知道您使用的是什么平台。如果您有可以评估非节点 XPath 表达式的东西，那么您可以使用它：

```
string(//dd[@class = 'price']) 
```

如果没有，您可以选择节点，

```
//dd[@class = 'price'] 
```

并且您正在使用的 API 应该具有获取所选节点的内部文本值的方法。

# javascript - How to apply onfocus function to all "input" objects?

> ID：14545691
> 
> 赞同：1
> 
> 时间：2013-01-27T08:26:20.857
> 
> 标签：javascript, html

I'd like to create an onfocus function to my input fields in a form. I'm working with a drag and drop landing page wizard(in Marketo) therefore I don't have access to the HTML tags.

I tried to do use getElementById and it worked only on the first field. I also tried the following:

```
<script>
var input = document.getElementsByTagName('input')[0]
input.onfocus = function() {

    this.value=''

}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:30:06.753

您查询所有`<input>`s 元素，但仅适用于第一个匹配项：

```
var input = document.getElementsByTagName('input')[0] 
```

遍历所有匹配并施展你的魔法：

```
var inputs = document.getElementsByTagName('input');
for (var i=0; i< inputs.length; i++){
    inputs[i].onfocus = function(){this.value = '';};
} 
```

如果你可以使用 jQuery，那就容易多了：

```
$('input').focus(function(){this.value = '';}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:32:23.207

[另一个变体是这个](http://jsfiddle.net/t5WN2/)

```
 //get all inputs
var inputs = document.getElementsByTagName('input')
    //cache the length
  , inputsLen = inputs.length;

//define one handler
function focusHandler(){
  this.style.backgroundColor = 'red';
}

//loop through all
while(inputsLen--){
  //each element's onfocus references only one function instead of "one each"
  inputs[inputsLen].onfocus = focusHandler;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:36:35.690

是的，在 jquery 中你可以这样做：

```
$("input").on("focus",function(){
    //function data block goes here    
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T09:57:25.047

每个人都打败了我，但试试这个

```
$("input").on("focus",function()
{
    this.value=''  
}); 
```

# asp.net-mvc-4 - Protect folder in MVC

> ID：14545692
> 
> 赞同：1
> 
> 时间：2013-01-27T08:26:30.093
> 
> 标签：asp.net-mvc-4, iis-6

I need a really simple password protection for a certain folder in my MVC-4 application. By simple I mean: no database validation, no ASP membership, no forms authentication, no OpenID, etc.

There will be only one user allowed to have access to the views in a folder called "Admin": Username "ABV" and password "myPassword". Again: I do not have high security requirements. It's more about keeping users outside who tried to enter certain dialogs by accident.

I was hoping for a way to just bring up the Windows Authentication dialog as soon as I hit the Admin folder the first time.

Some posts on this forum suggest to put this in the web.config:

```
<location path="Admin">
<system.web>
  <authorization>
    <deny users="?"/>
    <allow users="ABV"/>
  </authorization>
</system.web> 
```

On my server I added a Windows user called "ABV" with the password mentioned above.

When I try to access a view in the Admin folder, I'm getting a 404 error. No password dialog appeared.

I have also been playing around with the settings of my web server (IIS6), like unchecking "Enable anonymous access". But what ever I did, it didn't help.

I'm sure I missed something obvious and hope that somebody can help me out here.

Thanks guys! Ingmar

# algorithm - 合并区间范围

> ID：14545695
> 
> 赞同：10
> 
> 时间：2013-01-27T08:27:02.920
> 
> 标签：algorithm, merge, tree, range, interval-tree

给定一组区间：{1-4, 6-7, 10-12} 添加一个新区间：(9,11)，以便最终解决方案“合并”：输出：{1-4, 6-7, 9-12}。合并可以发生在双方（低范围和高范围）。

我看到这个问题在多个地方得到了回答，甚至有人建议使用 Interval Tress，但没有解释他们将如何使用它。我知道的唯一解决方案是按开始时间的升序排列间隔并迭代它们并尝试适当地合并它们。

如果有人可以帮助我理解我们如何在这个用例中使用区间树，那就太好了！

[我一直在关注 CLRS 书中的区间树，但他们没有谈论合并，他们谈论的只是插入和搜索。]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T09:01:55.120

（我假设这意味着间隔永远不会重叠，否则它们会被合并。）

一种方法是存储平衡的二叉搜索树，每个范围的端点有一个节点。然后将每个节点标记为标记间隔开始的“打开”节点或标记间隔结束的“关闭”节点。

插入新范围时，将出现关于范围起点的两种情况之一：

1.  它已经在一个范围内，这意味着您将扩展一个已经存在的范围作为插入的一部分。
2.  它不在范围内，因此您将创建一个新的“开放”节点。

要确定您所处的情况，您可以在树中进行先行搜索以查找范围的起点。如果您获得 NULL 或关闭节点，则需要插入一个表示范围起点的新打开节点。如果您获得一个开放节点，您将继续延长该间隔。

从那里，您需要确定范围延伸多远。为此，请不断计算您插入的初始节点的后继节点，直到发生以下情况之一：

1.  您已经查看了树中的所有节点。在这种情况下，您需要插入一个关闭节点来标记此间隔的结束。

2.  您会在范围结束后看到一个关闭节点。在这种情况下，当新范围结束时，您处于现有范围的中间，因此您无需再做任何事情。你完成了。

3.  您会在范围结束之前看到一个关闭或打开的节点。在这种情况下，您需要从树中删除该节点，因为旧范围已被新范围包含。

4.  您会在范围结束后看到一个打开的节点。在这种情况下，将一个新的关闭节点插入树中，因为您需要在看到这个新节点的开始之前终止当前范围。

天真地实现，该算法的运行时间为 O(log n + k log n)，其中 n 是间隔数，k 是在此过程中删除的间隔数（因为您必须执行 n 次删除）。但是，您可以使用以下技巧将其加速到 O(log n)。由于删除过程总是按顺序删除节点，因此您可以使用后继搜索端点来确定要删除的范围的末尾。然后，您可以通过执行两个树拆分操作和一个树连接操作来拼接子范围以从树中删除。在合适的平衡树（例如红黑树或 splay）上，这可以在 O(log n) 总时间内完成，如果要包含很多范围，这会快得多。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T22:20:18.730

公共类 MergeIntervals {

```
public static class Interval {

    public double start;
    public double end;

    public Interval(double start, double end){
        this.start = start;
        this.end = end;
    }
}

public static List<Interval> mergeInteval(List<Interval> nonOverlapInt, Interval another){

    List<Interval> merge = new ArrayList<>();

    for (Interval current : nonOverlapInt){

        if(current.end < another.start || another.end < current.start){
            merge.add(current);
        }
        else{

            another.start = current.start < another.start ? current.start : another.start ;
            another.end = current.end < another.end ? another.end : current.end;                
        }           
    }
    merge.add(another);
    return merge;   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:32:24.820

看一下这个。它可以帮助你：- [http://www.boost.org/doc/libs/1_46_0/libs/icl/doc/html/index.html](http://www.boost.org/doc/libs/1_46_0/libs/icl/doc/html/index.html)

该库提供以下功能：

1) 间隔集

2) 分离间隔集

3) split_interval_set

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-07T19:22:16.420

C＃

```
public class Interval
{
    public Interval(int start, int end) { this.start = start; this.end = end; }
    public int start;
    public int end;
}

void AddInterval(List<Interval> list, Interval interval)
{
    int lo = 0;
    int hi = 0;
    for (lo = 0; lo < list.Count; lo++)
    {
        if (interval.start < list[lo].start)
        {
            list.Insert(lo, interval);
            hi++;
            break;
        }
        if (interval.start >= list[lo].start && interval.start <= list[lo].end)
        {
            break;
        }
    }
    if (lo == list.Count)
    {
        list.Add(interval);
        return;
    }

    for (hi = hi + lo; hi < list.Count; hi++)
    {
        if (interval.end < list[hi].start)
        {
            hi--;
            break;
        }
        if (interval.end >= list[hi].start && interval.end <= list[hi].end)
        {
            break;
        }
    }
    if (hi == list.Count)
    {
        hi = list.Count - 1;
    }

    list[lo].start = Math.Min(interval.start, list[lo].start);
    list[lo].end = Math.Max(interval.end, list[hi].end);

    if (hi - lo > 0)
    {
        list.RemoveRange(lo + 1, hi - lo);
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-20T21:04:37.480

这只需将相关区间添加到区间集的末尾，然后对区间集的所有元素执行合并即可。

合并操作在这里很详细： [http ://www.geeksforgeeks.org/merging-intervals/](http://www.geeksforgeeks.org/merging-intervals/)

如果你不喜欢 C++ 代码，这里是 python 中的相同内容：

```
def mergeIntervals(self, intervalSet):
    # interval set is an array.
    # each interval is a dict w/ keys: startTime, endTime.  
    # algorithm from: http://www.geeksforgeeks.org/merging-intervals/
    import copy
    intArray = copy.copy(intervalSet)
    if len(intArray) <= 1:
        return intArray
    intArray.sort(key=lambda x: x.get('startTime'))
    print "sorted array: %s" % (intArray)
    myStack = []  #append and pop.
    myStack.append(intArray[0])
    for i in range(1, len(intArray)):
        top = myStack[0]
        # if current interval NOT overlapping with stack top, push it on.
        if   (top['endTime'] < intArray[i]['startTime']):
            myStack.append(intArray[i])
        # otherwise, if end of current is more, update top's endTime
        elif (top['endTime'] < intArray[i]['endTime']):
            top['endTime'] = intArray[i]['endTime']
            myStack.pop()
            myStack.append(top)

    print "merged array: %s" % (myStack)
    return myStack 
```

不要忘记你的鼻子测试来验证你确实做了正确的工作：

```
class TestMyStuff(unittest.TestCase):

    def test_mergeIntervals(self):
        t = [ { 'startTime' : 33, 'endTime' : 35 }, { 'startTime' : 11, 'endTime' : 15  }, { 'startTime' : 72, 'endTime' : 76 }, { 'startTime' : 44, 'endTime' : 46  } ]
        mgs = MyClassWithMergeIntervalsMethod()
        res = mgs.mergeIntervals(t)
        assert res == [ { 'startTime' : 11, 'endTime' : 15  }, { 'startTime' : 33, 'endTime' : 35 }, { 'startTime' : 44, 'endTime' : 46  }, { 'startTime' : 72, 'endTime' : 76 } ]

        t = [ { 'startTime' : 33, 'endTime' : 36 }, { 'startTime' : 11, 'endTime' : 35  }, { 'startTime' : 72, 'endTime' : 76 }, { 'startTime' : 44, 'endTime' : 46  } ]
        mgs = MyClassWithMergeIntervalsMethod()
        res = mgs.mergeIntervals(t)
        assert res == [{'endTime': 36, 'startTime': 11}, {'endTime': 46, 'startTime': 44}, {'endTime': 76, 'startTime': 72}] 
```

# c# - Using stored procedure in Entity Framework 5 with complex type?

> ID：14545698
> 
> 赞同：1
> 
> 时间：2013-01-27T08:27:45.473
> 
> 标签：c#, sql-server-2008, entity-framework-5

I have the following stored procedure in SQL Server:

```
ALTER PROCEDURE [dbo].[FullTextSearchOnContent]
(
    @SearchText NVARCHAR(200),
    @LanguageId INT ,
    @ContentStatusId INT ,
    @ResultCount INT 
)
AS

BEGIN
    SET FMTONLY OFF;
    SET NOCOUNT ON;
    IF (@SearchText IS NULL) OR (@SearchText = '') OR (@ResultCount IS NULL) OR (@ResultCount = 0) RETURN NULL;
    SELECT DISTINCT TOP(@ResultCount) 
        C.Id AS ContentId, C.ImagePath AS ContentImagePath, C.IsSpecial,C.LanguageId,C.LockCommenting,C.RegistrationDate AS ContentRegistrationDate,C.StatusId AS ContentStatusId,C.Summary,C.Title,C.VisitNumber,C.AllTagsString,
        CS.FarsiName AS ContentStatusFarsiName,
        U.Id As UserId,U.InitialReputation AS UserInitialReputation,U.IsAdmin AS IsUserAdmin,U.FullName AS UserFullName,U.PhotoPath AS UserPhotoPath,U.RoleId AS UserRoleId,U.UserStatusId AS UserStatusId
        --,T.Id AS TagId, T.Name AS TagName
        FROM Content AS C
    INNER JOIN [User] AS U ON U.Id = C.WriterId
    INNER JOIN [Subject] AS S ON S.Id = C.SubjectId
    INNER JOIN [ContentStatus] AS CS ON CS.Id = C.StatusId
    --INNER JOIN (SELECT DISTINCT * FROM Tag AS T
    --          INNER JOIN TagContent AS TC ON TC.TagId=T.Id) 
    --          AS T ON T.ContentId = C.Id
    WHERE C.LanguageId = @LanguageId AND C.StatusId=@ContentStatusId AND CONTAINS((C.Title,C.AllTagsString),@SearchText) ORDER BY C.RegistrationDate DESC
END 
```

It's used for fulltext search on some columns.

I want to use it in EF5, but it always returns `int`!

How can I use it in Entity Framework 5 ?

**EDIT :**

I couldn't generate the comlex type, whenever I click on `Get Column Information` button nothing happen !

![Get stored procedure information in entity framework 5](../Images/edafa4a75aad597778009243f709e811.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:54:47.197

我刚刚找到了答案。
我已将存储过程更改如下：

```
ALTER PROCEDURE [dbo].[FullTextSearchOnContent]
(
    @SearchText NVARCHAR(200),
    @LanguageId INT ,
    @ContentStatusId INT ,
    @ResultCount INT 
)
AS

BEGIN
    SET NOCOUNT ON;

    DECLARE @ReturnTable table 
    (
        ContentId int not null,
        LanguageId int null,
        ContentStatusId int null,
        ContentTitle nvarchar(2000) null,
        ContentSummary nvarchar(2000) null,
        ContentImagePath nvarchar(50) null,
        IsSpecial bit null,
        LockCommenting bit null,
        VisitNumber int null,
        AllTagsString nvarchar(max) null,
        ContentRegistrationDate datetime not null,
        ContentStatusFarsiName nvarchar(50) null,
        UserId int null,
        UserInitialReputation int null,
        IsUserAdmin bit null,
        UserFullName nvarchar(71) null,
        UserPhotoPath nvarchar(50) null,
        UserRoleId int null,
        UserStatusId int null,
        SubjectId int not null,
        SubjectName nvarchar(50) null,
        SubjectSymbolPath nvarchar(1000) null
    )
    IF (@SearchText IS NULL) OR (@SearchText = '') OR (@ResultCount IS NULL) OR (@ResultCount = 0) RETURN NULL;
    INSERT @ReturnTable 
        SELECT DISTINCT TOP(@ResultCount) 
            C.Id AS ContentId, 
            C.LanguageId,
            C.StatusId AS ContentStatusId,
            C.Title AS ContentTitle,
            C.Summary AS ContentSummary,
            C.ImagePath AS ContentImagePath, 
            C.IsSpecial,
            C.LockCommenting,
            C.VisitNumber,
            C.AllTagsString,
            C.RegistrationDate AS ContentRegistrationDate,
            CS.FarsiName AS ContentStatusFarsiName,
            U.Id As UserId,
            U.InitialReputation AS UserInitialReputation,
            U.IsAdmin AS IsUserAdmin,
            U.FullName AS UserFullName,
            U.PhotoPath AS UserPhotoPath,
            U.RoleId AS UserRoleId,
            U.UserStatusId AS UserStatusId,
            S.Id AS SubjectId,
            S.Name AS SubjectName, 
            S.SymbolPath AS SubjectSymbolPath
            --,T.Id AS TagId, T.Name AS TagName
            FROM Content AS C
        INNER JOIN [User] AS U ON U.Id = C.WriterId
        INNER JOIN [Subject] AS S ON S.Id = C.SubjectId
        INNER JOIN [ContentStatus] AS CS ON CS.Id = C.StatusId
        --INNER JOIN (SELECT DISTINCT * FROM Tag AS T
        --          INNER JOIN TagContent AS TC ON TC.TagId=T.Id) 
        --          AS T ON T.ContentId = C.Id
        WHERE C.LanguageId = @LanguageId AND C.StatusId=@ContentStatusId AND CONTAINS((C.Title,C.AllTagsString),@SearchText) ORDER BY C.RegistrationDate DESC
    select * from @ReturnTable
    --SELECT TOP(@ResultCount) * from Content order by RegistrationDate desc
END 
```

现在它就像一个魅力:-)

# vb.net - Submit a method in webbrowser

> ID：14545701
> 
> 赞同：0
> 
> 时间：2013-01-27T08:27:52.937
> 
> 标签：vb.net, methods, browser, submit, invokemember

I have a problem invoking a submit method in web page

This is my code

```
Webbrowser.document.forms(0).invokemember("submit") 
```

It does nothing.

Here is the html

```
<form name="myWebForm" action="myServerSideScript.php" method="post"> 
    <input type="checkbox" /> Checkbox 1<br /> 
    <input type="text" /> Text Field 1<br /> 
    <input type="submit" value="SUBMIT" /> 
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:10:53.403

您必须将 .AllowNavigation 属性设置为“TRUE”

```
Webbrowser.AllowNavigation = True 
```

并像这样调用提交方法

```
Webbrowser.Document.Forms(0).InvokeMember("submit") 
```

或者

```
Webbrowser.Document.Forms.GetElementsByName("myWebForm").Item(0).InvokeMember("submit") 
```

# sql - 对象引用未设置为对象的实例和“没有可用的代码源”错误

> ID：14545705
> 
> 赞同：0
> 
> 时间：2013-01-27T08:28:47.070
> 
> 标签：sql, vb.net

```
 sqlcom1 = New SqlCommand("INSERT INTO Products VALUES ('" + 
            ds.Tables("Products_Archive").Rows(myval).Item(1) + "','" +  
            ds.Tables("Products_Archive").Rows(myval).Item(2) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(3) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(4) + "','" + 
            ds.Tables("Products").Rows(myval).Item(5) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(6) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(7) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(8) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(9) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(10) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(11) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(12) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(13) + "','" + 
            ds.Tables("Products_Archive").Rows(myval).Item(14) + "', '" + 
            ds.Tables("Products_Archive").Rows(myval).Item(15) + "')", con1)
sqlcom1.ExecuteNonQuery() 
```

这是我的代码。我得到错误

> *你调用的对象是空的。*

并且有一个消息框说“没有可用的代码源......”应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:51:17.300

您应该对 ADO.NET使用**参数化查询-****始终**- 以避免 SQL 注入攻击并提高性能。

并且从您的 分配值时`DataSet`，您需要在盲目分配值之前**检查 NULL ！**

所以尝试这样的事情：

```
// define your SQL statement - with **PARAMETERS**
// first off: I would recommend to ALWAYS define the columns in the table that you want to insert into
//            to avoid unpleasant surprises (if e.g. a new column is added); of course, use YOUR column
//            names from the "Products" table here! Since you didn't give them - I had to fill in "placeholders"
// secondly: use **PARAMETERS** in your INSERT statement! One for each column you want to insert a value into.
//           Again: you should use "@YourColumnName" for each column in your table - since I don't know
//           those column names - I just made up placeholders. Replace those as needed!
string sqlStmt = "INSERT INTO dbo.Products(Col1, Col2, ..., Col15) " +
                 "VALUES(@v1, @v2, ....., @v15)";

// create SqlConnection and SqlCommand to use                 
using(SqlConnection conn = new SqlConnection("......"))
using(SqlCommand cmd = new SqlCommand(sqlStmt, conn))
{
    // fetch the DataTable you use, and the current row in that table
    DataTable tbl = ds.Tables["Products_Archive"];
    DataRow currentRow = tbl.Rows[myval];

    // define the parameters and set their values    
    cmd.Parameters.AddWithValue("@v1", GetValue(currentRow, 1));
    cmd.Parameters.AddWithValue("@v2", GetValue(currentRow, 2));
    .....
    cmd.Parameters.AddWithValue("@v15", GetValue(currentRow, 15));

    // open connection, execute query, close connection    
    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();
}

// method to fetch the value from the row
private object GetValue(DataRow row, int index)
{
    // CHECK FOR NULL ! If the value is NULL - define what you want to have returned.
    if(IsNull(row[index]))
    { 
        // return whatever makes sense to you, if the value in the DataTable's row is NULL
        // here - I chose to return a "database NULL" so that NULL will be inserted into the database
        return DbNull.Value;
    }

    // only if NOT NULL --> then return the actual value in that row's column
    return row[index];
} 
```

# solr - 在 Solr 4 中使用 PreAnalyzedField

> ID：14545706
> 
> 赞同：0
> 
> 时间：2013-01-27T08:28:47.567
> 
> 标签：solr

我正在尝试使用 Solr 索引字段，其中我已经有一个 TokenStream。我不希望 Solr 进行任何分析 - 它已经进行了。据我了解，我可以使用 Solr 的 PreAnalyzedField 获得这个确切的功能。问题是我找不到任何好的资源来帮助我理解流程：我需要将 schema.xml 文件中的字段定义为 PreAnalyzedField，并且应该使用解析器实现的 parse 方法来解析令牌流 - 但是我如何真的用我的 tokeStream 喂这个字段吗？\ 到底是什么时候发送到 toFormattedString 方法的？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:24:23.047

我认为 PreAnalyzedField 是 Solr 4.0/4.1 的前沿。[主要文档](http://wiki.apache.org/solr/PreAnalyzedField)在 Wiki 上，基本上解释了两种解析器类型。默认是 JSON，我不确定如何让其他类型工作。

一旦定义了该类型，您只需以 JSON 格式提供完全标记化的内容，如该字段的值所述。当它到达解析器时，它会将其转换为 Token 流。与将数字从字符串表示解析为实数值表示的方式相同。尝试输入一个不可解析的值，您将在异常堆栈跟踪中看到完整的调用堆栈。

问题是如何查询它。[我自己在邮件列表上的讨论](http://grokbase.com/t/lucene/solr-user/1313ewa1xk/anybody-uses-preanalyzedfield)并没有走得太远。

# php - PHP 速记 if else 条件问题

> ID：14545708
> 
> 赞同：-1
> 
> 时间：2013-01-27T08:29:29.650
> 
> 标签：php, if-statement

如果其他速记代码，我不明白我在做什么错

```
$item  = '<li '. ($avatar_size > 50) ? .'style="overflow:hidden">'; 
```

我只想检查条件是否为真，而不是添加内联样式。

编辑：当然在上面的语句中，`>`当条件为假时它也会被删除，所以我尝试了其他语句但没有工作。我确信我必须犯愚蠢的错误，但无法弄清楚。

```
$item  = '<li '. ($avatar_size > 50) ? .'style="overflow:hidden"'.:. '' .'>'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T08:33:02.717

没有“速记 if”，`?:`是一个*运算符*，它*总是*必须由`?` *and* `:`组成。你能做的最好的事情是：

```
$item  = '<li' . ($avatar_size > 50 ? ' style="overflow:hidden"' : null) . '>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T10:26:14.697

尽管最初的答案是正确的，但我有一个较晚的答案并提供了更多解释。

**关于三元运算符**

```
$expression ? $value1 : $value2 
```

三元运算符像函数一样工作，例如它返回一个值。

哪个值？这就是第一个参数发挥作用的地方。它是一个被评估为`true`或的表达式`false`。

如果为真，则将第二个参数作为值返回。如果为假，则返回第三个参数。

由于您在外部处理字符串，因此返回的值将用作字符串。然后只返回字符串值并且不要将代码的读者与返回 NULL 混淆是一个非常好的主意。尽管如此，它将被转换为空字符串。

**快捷方式三元运算符**

```
$expression ?: $value 
```

这个省略了第二个值为 true 的值，如果结果为 true，则返回 $expression，否则返回 $value。这对于检查变量是否已定义并设置为一个值（除了那些评估为假的变量）非常有用，否则使用默认值。

通过反转表达式可以省略参数，但在您的情况下不可能返回空字符串或其他内容。

```
$avatar_size <= 50 ?: ' style="overflow:hidden"' 
```

这不起作用，因为如果头像大小低于 50，将返回“true”并在字符串中使用 - 转换为`"1"`.

# javascript - .live("click") 事件在 ios safari 上不起作用，甚至 onclick='' isnt

> ID：14545709
> 
> 赞同：3
> 
> 时间：2013-01-27T08:29:42.527
> 
> 标签：javascript, jquery, mobile-safari

我正在尝试在我的导航栏中实现一个下拉菜单。在我的桌面上似乎一切正常，但在电话上，我的 jquery .live("click") 似乎没有工作。我也尝试添加 onclick='' ，但它似乎不起作用！

这是我一直在实现的代码

# HTML

```
<ul class="nav pull-right">
  <li class="dropdown">
    <a id="notif-load-dropdown" class="dropdown-toggle" data-toggle="dropdown" onclick='' href="/notifications/"><b data-icon="&#xe01d;"></b></a>
    <ul class="dropdown-menu dropdown-menu2 pull-left">
      <h3 class="lead" style="margin-left:25px;">Activity Feed</h3>
      <hr>
      <span id="notif-load"></span>
    </ul>
  </li>
</ul> 
```

# JS

```
$('#notif-load-dropdown').live('click', function(event) {
  event.preventDefault();
  var checkclass = $('#notif-load-dropdown').parent().hasClass('open');
  var b = $('html');
  if (checkclass){
    var w = $(document).width();
    var h = $(document).height();
    $('#notif-load').css({
      position: 'relative',
      top     : 0,
      left    : 0,
      zIndex  : 100
    });
    var $overlay = $('<div/>', {
    'id': 'overlay',
      css: {
        position   : 'absolute',
        height     : h + 'px',
        width      : w + 'px',
        left       : 0,
        top        : 0,
        background : '#000',
        opacity    : 0.5,
        zIndex     : 99
      }
    }).appendTo('body');
    b = $('html');
    b.css('overflow', 'hidden');
    var href = $(this).attr('href');
    $('#notif-load').load(href);
    var chkaclass = $('#notif-load a').hasClass('endless_more');
    if (!checkclass){
      $('#notif-load a').live('click', function(event){
        $('#notif-load').load('/notifications/allread/').load(href);
      });
    }
    $('#overlay').click(function(){
      $(this).remove();
      $('#notif-load').load('/notifications/allread/');
      $('#unread-notif').load('/isunread/');
      $('#notif-load').empty();
      b.css('overflow', 'auto');
    });
  }
  else
  {
    $('#overlay').remove();
    $('#notif-load').load('/notifications/allread/');
    $('#unread-notif').load('/isunread/');
    $('#notif-load').empty();
    //$('#notif-load-dropdown').parent().removeClass('open');
    b.css('overflow', 'auto');
  }
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:02:30.957

iOS 不接受点击。您可以使用事件“touchend”。

反而：

```
$('#notif-load-dropdown').live('click', function(event){...});
and $('#notif-load a').live('click', function(event){...}); 
```

写

```
$('#notif-load-dropdown').bind('click touchend' ,function(event){...}); 
```

并且：对于 jQuery 1.7 及更高版本：

```
$('#notif-load').on('click touchend', 'a', function(event){...}); 
```

在 jQuery 1.7 之前：

```
$('#notif-load').delegate('a', 'click touchend', function(event){...}); 
```

[jsbin 示例](http://jsbin.com/iwiziv/3/ "jsbinsample")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:08:26.897

它不完全清楚什么不起作用。

如果问题是根本没有调用 CLICK 处理程序，那么您可以尝试使用触摸事件，`"touchstart"`或者`"touchend"`因为在触摸设备上您没有鼠标指针，因此您无法“单击”。我正在使用[jquery.tappable.js](https://github.com/aanand/jquery.tappable.js)，它对我来说很好。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T09:00:34.870

```
$(document).on('click', '#notif-load-dropdown', function(e) {
  e.preventDefault();
  $('#notif-load').load(this.href);
}); 
```

用最近的非动态父级替换文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T08:47:03.870

live() 已弃用， load() 自 jQuery 1.8 起也已弃用。

无论如何，试试这个：

```
$('#notif-load-dropdown').live('click', function(event) {
    event.preventDefault();
    var href = $(this).attr('href');
    $('#notif-load').load(href, {}, function(response) {
        $(this).html(response);
        //alert(response); // show server response, if there is no response, then the issue could be from the server side
    });
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-17T09:26:37.957

“点击”事件似乎只在“a”标签上触发，也许还有其他标签，但绝对不会在“body”和“div”上触发。

# qt - QFileSystemModel 和 QTreeView 仅显示目录。如何隐藏空目录的扩展标记？

> ID：14545711
> 
> 赞同：1
> 
> 时间：2013-01-27T08:29:51.030
> 
> 标签：qt, qt4, qtreeview, qfilesystemmodel

我正在构建有点像标准文件资源管理器 - 左侧窗格用于文件夹树，右侧窗格用于显示所选文件夹中的文件。

带有 QFileSystemModel 的 QTreeView 用于显示文件夹。模型的过滤器设置为`QDir::Dirs | QDir::NoDotAndDotDot`仅列出目录，不列出文件。我想仅针对具有子文件夹的文件夹显示扩展标记，即如果某些目录为空或仅包含文件，则它不应该是可扩展的。但相反，树视图会针对空目录保留扩展标记。这就是问题：**如何隐藏它们**？

我在这里，在谷歌，在 QT 示例中搜索了解决方案 - 没有成功。虽然我认为这个问题很容易回答。我目前唯一的解决方案是继承 QAbstractItemModel。那是痛苦。

QT 4.8，QT 创建者，C++。

这是演示的代码：

```
#include <QApplication>

#include <QFileSystemModel>
#include <QTreeView>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QTreeView w;

    QFileSystemModel m;
    m.setFilter(QDir::Dirs | QDir::NoDotAndDotDot);
    m.setRootPath("C:\\");

    w.setModel(&m);
    w.setRootIndex(m.index(m.rootPath()));
    w.hideColumn(3);
    w.hideColumn(2);
    w.hideColumn(1);

    w.show();

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:30:53.260

我已经解决了这个问题

> QFileSystemModel::fetch更多

在当前级别的每个 QModelIndex 上。要知道文件夹是否已加载到模型中，可以使用信号

> void directoryLoaded ( const QString & path )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T01:19:33.110

最简单的方法： juste 像这样实现 hasChildren ：

```
/*!
 * Returns true if parent has any children and haven't the Qt::ItemNeverHasChildren flag set;
 * otherwise returns false.
 *
 *
 * \remarks Reimplemented to avoid empty directories to be collapsables
 *          and to implement the \c Qt::ItemNeverHasChildren flag.
 * \see     rowCount()
 * \see     child()
 *
 */
bool YourModelName::hasChildren(const QModelIndex &parent) const
{
    // return false if item cant have children
    if (parent.flags() &  Qt::ItemNeverHasChildren) {
        return false;
    }
    // return if at least one child exists
    return QDirIterator(
                filePath(parent),
                filter() | QDir::NoDotAndDotDot,
                QDirIterator::NoIteratorFlags
            ).hasNext();
} 
```

# android - 自定义 ListView 中按钮的 NPE

> ID：14545718
> 
> 赞同：0
> 
> 时间：2013-01-27T08:30:50.463
> 
> 标签：android, android-listview

我有一个自定义列表视图，每个单元格有 5 个文本视图和 2 个按钮。不知何故，当我滚动时，我得到了 getView 方法中按钮的 NPE。粘贴日志

```
01-27 08:15:40.654: D/AndroidRuntime(15471): Shutting down VM
01-27 08:15:40.654: W/dalvikvm(15471): threadid=1: thread exiting with uncaught     exception (group=0x40c181f8)
01-27 08:15:40.662: E/AndroidRuntime(15471): FATAL EXCEPTION: main
01-27 08:15:40.662: E/AndroidRuntime(15471): java.lang.NullPointerException
01-27 08:15:40.662: E/AndroidRuntime(15471):    at  com.example.collegesoft.ViewAttendance$MyAdapter.getView(ViewAttendance.java:158)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.widget.AbsListView.obtainView(AbsListView.java:2189)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.widget.ListView.makeAndAddView(ListView.java:1772)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.widget.ListView.fillDown(ListView.java:672)
 01-27 08:15:40.662: E/AndroidRuntime(15471):   at android.widget.ListView.fillGap(ListView.java:636)
 01-27 08:15:40.662: E/AndroidRuntime(15471):   at android.widget.AbsListView.trackMotionScroll(AbsListView.java:5312)
 01-27 08:15:40.662: E/AndroidRuntime(15471):   at android.widget.AbsListView.scrollIfNeeded(AbsListView.java:3050)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:3391)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.View.dispatchTouchEvent(View.java:5588)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1723)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1968)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1737)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1968)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1737)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1968)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1737)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1968)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1737)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at   com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2060)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1398)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2008)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.View.dispatchPointerEvent(View.java:5768)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2957)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2531)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:898)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2540)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.os.Looper.loop(Looper.java:137)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at android.app.ActivityThread.main(ActivityThread.java:4514)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at java.lang.reflect.Method.invokeNative(Native Method)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at java.lang.reflect.Method.invoke(Method.java:511)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-27 08:15:40.662: E/AndroidRuntime(15471):    at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助，将不胜感激。让我知道你是否想要 c 代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:24:06.783

我找到了答案。这是个愚蠢的错误。对于我曾经使用 setId() 方法的按钮。然后我把它改成了 setTag() ，一切都像魅力一样。

无论如何谢谢

# ruby-on-rails - Rails：更改 ONE 渲染调用的渲染视图路径

> ID：14545719
> 
> 赞同：1
> 
> 时间：2013-01-27T08:30:52.510
> 
> 标签：ruby-on-rails, render, actionview, renderpartial

我想更改`render`呼叫的视图路径（部分）：

```
vp1 = ActionView::PathSet.new
vp1.prefixes << 'bla1'
render partial: 'abc', view_paths: vp1

vp2 = ActionView::PathSet.new
vp2.prefixes << 'bla2'
render partial: 'abc', view_paths: vp2 
```

例如，`prepend_view_paths`但对于 ONE `render`。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:42:24.957

您可能可以在渲染之前添加特定路径并在之后删除。

```
self._view_paths.paths << "/home/someone/..."
render(partial: ...)

# after filter
self._view_paths.paths.delete("/home/someone/") 
```

# prolog - 如何从 XPCE 传递选择值以生成 prolog 代码

> ID：14545720
> 
> 赞同：2
> 
> 时间：2013-01-27T08:30:54.513
> 
> 标签：prolog, swi-prolog, xpce

我想传递 COD、DB、Wounds 和 Medical 的值来计算概率。

我已经将 XPCE 代码编写为 GUI，如下所示。

```
list:-
new(D,dialog('Enter Evidence')),
send_list(D,append,
  [new(COD,menu(cause_of_death,choice)),
   new(DB,menu(dead_body,cycle)),
   new(Wounds,menu(wound_and_injuries,cycle)),
   new(Medical,menu(medical_evidence,cycle)),
   new(_,button('OK',message(@prolog,prob,COD?selection,DB?selection,Wounds?selection,Medical?selection)))]),

send_list(COD,append,[suicide,homicide]),
findall(X,db_evidence(X),Y),
send_list(DB, append,Y),
findall(E,i_evidence(E),F),
send_list(Wounds, append,F),
findall(G,m_evidence(G),H),
send_list(Medical, append,H),

  get(D,confirm, Answer),
  get(Answer, element(1), A),
  get(A, selection, AV),
  get(Answer, element(2), B),
  get(B, selection, BV),
  get(Answer, element(3), C),
  get(C, selection, CV),
   Q = [AV, BV, CV],

db_evidence(hanging_dead_body).
i_evidence(offensive_injuries).
i_evidence(head_injuries).
i_evidence(markings).
m_evidence('state of mind').
m_evidence(traces_of_anaesthetic). 
```

我计算概率的序言代码如下：

```
 prob( COD,Q, P)  :-
delete( Y, Q, Cond),
 %   predecessor( X, Y), !,           % Y is a descendant of X
prob( X, Cond, Px),
prob( Y, [X | Cond], PyGivenX),
prob( Y, Cond, Py),
P is Px * PyGivenX / Py,         % Assuming Py > 0

p(hanging_dead_body, 0.1).
p(offensive_injuries,0.05).
p(head_injuries, 0.5).
p(markings,0.2).
p('state of mind',0.1).
p(traces_of_anaesthetic,0.3).

 % suicidal table
 p( suicide, [hanging_dead_body,markings,traces_of_anaesthetic], 0.8). 
```

结果应显示 P=概率的计算值。如果我的代码很混乱，我很抱歉。也许我对序言中的变量很陌生。请帮助我..谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:57:20.107

我不知道这是否是您想要的，但我编写了这段代码，当您单击 OK 时，它会为您提供对话框中选择的内容：

```
list:-
new(D,dialog('Enter Evidence')),
send_list(D,append,
      [new(COD,menu(cause_of_death,choice)),
       new(DB,menu(dead_body,cycle)),
       new(Wounds,menu(wound_and_injuries,cycle)),
       new(Medical,menu(medical_evidence,cycle)),
       new(_,button('OK',
            message(D, return,
                [COD?selection,DB?selection,
                 Wounds?selection,Medical?selection])))]),

send_list(COD,append,[suicide,homicide]),
findall(X,db_evidence(X),Y),
send_list(DB, append,Y),
findall(E,i_evidence(E),F),
send_list(Wounds, append,F),
findall(G,m_evidence(G),H),
send_list(Medical, append,H),
get(D,confirm, Answer),
get(Answer, element(1), A),
get(A, value, AV),
get(Answer, element(2), B),
get(B, value, BV),
get(Answer, element(3), C),
get(C, value, CV),
get(Answer, element(4), E),
get(E, value, EV),
Q = [AV, BV, CV, EV],
writeln(Q). 
```

例如 ：

```
 ?- list.
[suicide,hanging_dead_body,offensive_injuries,state of mind]
true. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:48:37.230

您应该定义 prob/4 过程。例如

```
prob(COD,DB,Wounds,Medical) :-
    writeln([COD,DB,Wounds,Medical]). 
```

我以这种方式更改了对话框

```
...
send_list(Medical,append,H),
send(D, open). 
```

当我单击 OK prob/4 时，会使用实际选择进行调用。

# javascript - jQuery - 将多个元素选择器与 :not 结合使用 - 如何

> ID：14545721
> 
> 赞同：1
> 
> 时间：2013-01-27T08:31:12.477
> 
> 标签：javascript, jquery

我很高兴让两个选择器一起工作*，*就像我宣布分开时一样。

我的问题：

*当我移动到任何*不包含在某个元素中的输入或锚标记时，我想关闭一个菜单。当我为输入和锚点显式编码时，我得到了我需要的行为 - 但是当我尝试压缩我的代码并将它们组合时，它的行为很奇怪并且不能按预期工作。

因此，基本上，当用户焦点位于不是我的选择器子项的输入字段或锚点时，我想关闭菜单。当我使用两个单独的处理程序时，它可以工作。我想把它们结合起来。

我正在尝试缩短这个......

```
jQuery('#hdr input:not(#opt *)')
.focusin(function(event){
   setTimeout(function(){
       jQuery("#opt").hide()
   },100);
 });
jQuery('#hdr a:not(#opt *)')
.focusin(function(event){
   setTimeout(function(){
       jQuery("#opt").hide();
   },100);
 }); 
```

我已经将所有这些都尝试在一行中，但无济于事：

```
jQuery('#hdr a input:not(#opt *)')
jQuery('#hdr a, #hdr input:not(#opt *)') <-- I expect this to work, but doesn't.
jQuery('#hdr a,input:not(#opt *)')
jQuery('#hdr *:not(#opt *)') 
```

它似乎只在我执行单个 arg 时有效：#hdr a 或 #hdr input 但是当我尝试将它们组合时，没有运气。我搜索了高低，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T08:32:39.470

您可以使用以下`not`方法：

```
$('#hdr').find('a,input').not('#opt *') 
```

有时使用方法而不是巨大的选择器字符串会更好，更易读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T08:47:53.950

所有元素都是 #opt 的子元素，而不是选择器确保 #opt 是父元素，并且其中的所有元素或节点都被阻止事件处理程序。像这样在小提琴中：

[***工作小提琴***](http://jsfiddle.net/gxYxL/)

@elclanrs 的方法也有效。

```
$("#hdr a:not(#opt), #hdr input:not(#opt)") 
```

# c# - 删除不需要的字符

> ID：14545723
> 
> 赞同：0
> 
> 时间：2013-01-27T08:31:21.910
> 
> 标签：c#, regex, casing

我正在尝试使用另一个列表来清理项目列表，它工作正常，除了它没有忽略大小写。当我尝试添加序数或正则表达式大小写检查时，出现语法错误。有人可以告诉我我做错了什么吗？这是我的代码：

```
List<string> removeChars = new List<string>(textBox_ScrubList.Text.Split(','));
            for (int i = 0; i < sortBox1.Count; i++)
                foreach (string repl in removeChars)
                    sortBox1[i] = sortBox1[i].Replace(repl, "", RegexOptions.IgnoreCase); 
```

这是我得到的语法错误：

![正则表达式大小写语法错误](../Images/ce9c6678f96e9d433716311a0d393b95.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:35:40.920

假设`sortBox1`是 a`List<string>`或类似的，问题是[`String.Replace`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)没有任何需要 a 的重载`RegexOptions`。

您可以使用[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)，但在这种情况下，您应该能够构造一个*正*则表达式来一次性删除所有字符。如果您*确实*想一次删除一个，您可能希望使用它[`Regex.Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)来避免正则表达式模式成为问题。（例如，如果它试图用“”替换“.”，你最终会摆脱一切。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:12:40.720

所以我想通了。最后一行：

```
 sortBox1[i] = sortBox1[i].Replace(repl, "", RegexOptions.IgnoreCase); 
```

必须改为：

```
 sortBox1[i] = Regex.Replace(sortBox1[i], repl, "", RegexOptions.IgnoreCase); 
```

# ruby-on-rails - 查找两个日期范围之间的日期范围

> ID：14545725
> 
> 赞同：-2
> 
> 时间：2013-01-27T08:31:52.623
> 
> 标签：ruby-on-rails, ruby

我想知道 Ruby 是否有一种简单的方法来查找两个日期范围之间的所有日期范围。我有两个日期数组：一个数组，`January 01, 08:00`另一个数组。我想返回一个数组，如：`January 01, 12:00``January 01, 09:00 to January 01, 10:00`

```
January 1, 08:00 to January 1, 09:00 
```

和：

```
January 1, 10:00 to January 1, 12:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:04:23.203

这是一种方法：

```
date_array_1, date_array_2 = [
  'January 01, 08:00', 'January 01, 12:00',
  'January 01, 09:00', 'January 01, 10:00'
].map{ |s| DateTime.parse(s) }.each_slice(2).to_a 
```

这设置了两个日期数组。

```
require 'date'

def date_ranges(ary1, ary2)
  [
    ary1,
    ary2
  ].flatten.sort.each_slice(2).map{ |s| s.first .. s.last }
end

puts date_ranges(date_array_1, date_array_2) 
```

哪个输出：

```
2013-01-01T08:00:00+00:00..2013-01-01T09:00:00+00:00
2013-01-01T10:00:00+00:00..2013-01-01T12:00:00+00:00 
```

* * *

> 如果我想让 date_array_2 成为日期数组？这简单吗？像 date_array_1 = ['January 01, 08:00', 'January 01, 13:00'] date_array_2 = [['January 01, 09:00', 'January 01, 10:00'], ['January 01, 11:00', '1 月 1 日 12:00']]

两个日期数组如下所示：

```
date_array_1 = ['January 01, 08:00', 'January 01, 12:00']
date_array_2 = ['January 01, 09:00', 'January 01, 10:00'] 
```

将它们强制转换为 DateTime 对象：

```
[ date_array_1, date_array_2 ].map{ |a| a.map!{ |d| DateTime.parse(d) } } 
```

# java - 如何使用java在文件中搜索单词

> ID：14545730
> 
> 赞同：1
> 
> 时间：2013-01-27T08:32:18.627
> 
> 标签：java, java-me

我正在编写一个 java 程序来搜索包含字典中单词列表的文本文件中的单词。正如您现在可能看到的，该文件包含大约 300,000 个单词。我能够想出一个程序，该程序可以遍历将每个单词与输入单词（我正在搜索的单词）进行比较的单词。问题是这个过程需要很长时间才能找到一个词，特别是如果这个词以 x、y 或 z 等最后一个字母开头。我想要更高效的东西，几乎可以立即找到一个词。这是我的代码：

```
import java.io.IOException;
import java.io.InputStreamReader;

public class ReadFile
{
public static void main(String[] args) throws IOException
{
    ReadFile rf = new ReadFile();
    rf.searchWord(args[0]);
}

private void searchWord(String token) throws IOException
{
    InputStreamReader reader = new InputStreamReader(
            getClass().getResourceAsStream("sowpods.txt"));
    String line = null;
    // Read a single line from the file. null represents the EOF.
    while((line = readLine(reader)) != null && !line.equals(token))
    {
        System.out.println(line);
    }

    if(line != null && line.equals(token))
    {
        System.out.println(token + " WAS FOUND.");
    }
    else if(line != null && !line.equals(token))
    {
        System.out.println(token + " WAS NOT FOUND.");
    }
    else
    {
        System.out.println(token + " WAS NOT FOUND.");
    }
    reader.close();
}

private String readLine(InputStreamReader reader) throws IOException
{
    // Test whether the end of file has been reached. If so, return null.
    int readChar = reader.read();
    if(readChar == -1)
    {
        return null;
    }
    StringBuffer string = new StringBuffer("");
    // Read until end of file or new line
    while(readChar != -1 && readChar != '\n')
    {
        // Append the read character to the string. Some operating systems
        // such as Microsoft Windows prepend newline character ('\n') with
        // carriage return ('\r'). This is part of the newline character
        // and therefore an exception that should not be appended to the
        // string.
        if(readChar != '\r')
        {
            string.append((char) readChar);
        }
        // Read the next character
        readChar = reader.read();
    }
    return string.toString();
} 
```

}

另请注意，我想在 Java ME 环境中使用该程序。任何帮助将不胜感激 - Jevison7x。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:41:51.670

您可以使用`fgrep`（`fgrep`由`-F`to激活`grep`）（[fgrep 的 Linux 手册页](http://linux.die.net/man/1/fgrep)）：

```
grep -F -f dictionary.txt inputfile.txt 
```

字典文件应在每一行包含一个单词。

不确定它是否仍然准确，但[维基百科关于 grep](http://en.wikipedia.org/wiki/Grep#Variations)的文章提到了在 中使用[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)，`fgrep`这是一种基于固定**字典**构建自动机的算法，用于快速字符串匹配。

无论如何，您可以查看Wikipedia[上有限模式集上的字符串搜索算法列表。](http://en.wikipedia.org/wiki/String_searching_algorithm#Algorithms_using_finite_set_of_patterns)这些是在字典中搜索单词时更有效的方法。

# actionscript-3 - actionscript 3 流式传输 aac

> ID：14545736
> 
> 赞同：0
> 
> 时间：2013-01-27T08:33:01.430
> 
> 标签：actionscript-3, stream, aac

也许这个问题并不新鲜，但我正在努力解决它

我有代码：

```
var tr:SoundTransform = new SoundTransform();
        var connect_nc:NetConnection = new NetConnection();
        connect_nc.connect(null);
        var stream_ns:NetStream = new NetStream(connect_nc);
        stream_ns.client = this;
        stream_ns.play("http://live.directfire.ru:8000/radio.aac");
        tr.volume = 1;
        stream_ns.soundTransform = tr; 
```

似乎 swf 加载流导致它收到一些数据但没有声音我该如何解决？抱歉英语不好=）

# asp.net - 使用 AJAX 在 .NET 中获取选择元素

> ID：14545738
> 
> 赞同：0
> 
> 时间：2013-01-27T08:33:35.323
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-ajax

我有这样的 ajax 函数可以在 HTML 选择列表上运行

```
$.ajax({
                type: "POST",
                url: urlemp,
                success: function (returndata) {
                    if (returndata.ok) {
                        //  var data = eval("" + returndata.data + "");
                        select.empty();
                        select.append($('<option>' + "" + '</option>'));
                        $.each(returndata.data, function (rec) {

                            select.append($('<option>' + returndata.data[rec].Name + '</option>'));
                        });
                        select.show('slow');
                        select.change();
                    }
                    else {
                        window.alert(' error : ' + returndata.message);
                    }

                }
            }
    ); 
```

这是 HTML 元素

```
 <select id="cmbDept"></select> 
```

如何使用 MVC 3 获取控制器中所选项目的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:40:20.973

您有 4 种方法可以做到这一点
1\. 您可以绑定 select 的 change 事件`$(select).change(function(){})`并再次发送`ajax`请求，包装您将能够在`controller`

2\. 中获得的选定值。您可以将`hidden input`视图中的 a 绑定到 a视图模型中的属性现在绑定到 select 的更改，并以这种方式填充输入，每当您的表单被回发时，它将具有正确绑定到`model`

3 的值。@Don 使我免于编写第三种方式，所以请阅读他的回答。

4.如果你有一个`model`这个视图被绑定到然后简单的保留一个`property`名称`model`和`cmbDept`选择的值将被自动回发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:36:39.587

我们`FormCollection`作为控制器中的参数。并分配`name`给`select`

```
<select id="cmbDept" name="cmbDept"></select> 
```

现在`FormCollection`有这个发布的价值。

```
public ActionResult Index(FormCollection form)
    {
        string val = "";
        foreach (var key in form.AllKeys)
        {
            if (key.Contains("cmbDept"))
            {
                 val = form.Get(key);
            }
        }
        --your code here with the posted values
        return View();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:38:08.730

要获取`select`客户端上元素的值，只需使用`$("#cmbDept").val()`.

要在元素提交到服务器后获取元素的值，请添加 a并简单地创建一个在您的调用发布到的控制器操作中命名`name="cmbDept"`的参数。`select``cmbDept``$.ajax`

# c++ - 从函数结构成员中获取函数地址

> ID：14545739
> 
> 赞同：1
> 
> 时间：2013-01-27T08:33:44.400
> 
> 标签：c++, visual-studio, assembly, structure

我正在尝试获取隐藏在结构后面的函数地址。不幸的是，**`void*`**基本的 C++ 转换不起作用，所以我**`C++ template`**改用了。

**1\. 基本****的 C++ 转换不适用于结构内的函数，为什么？****`void*`**

 **```
void * lpfunction;
lpfunction = scanf; //OK
lpfunction = MessageBoxA; //OK 
```

我做了一个简单的结构：

```
struct FOO{

    void PRINT(void){printf("bla bla bla");}

    void SETA(int){} //nothing you can see
    void SETB(int){} //nothing you can see

    int GETA(void){} //nothing you can see
    int GETB(void){} //nothing you can see
};
///////////////////////////////////////////
void *lpFunction = FOO::PRINT; 
```

和编译错误：

```
error C2440: 'initializing' : 
cannot convert from 'void (__thiscall FOO::*)(void)' to 'void *' 
```

**2\. 获取函数成员地址是不可能的吗？**

然后，我制作了一个模板函数，它能够将函数成员转换为地址。然后我会通过汇编来调用它。它应该是这样的：

```
template <class F,void (F::*Function)()>  
void * GetFunctionAddress() {

    union ADDRESS  
    { 
        void (F::*func)();  
        void * lpdata;  
    }address_data;  

    address_data.func = Function;  
    return address_data.lpdata; //Address found!!!  

} 
```

这是代码：

```
int main()
{
    void * address = GetFunctionAddress<FOO,&FOO::PRINT>();

    FOO number;
    number.PRINT(); //Template call
    void * lpdata = &number; 
```

 ****```
 __asm mov ecx, lpdata //Attach "number" structure address
    __asm call address //Call FOO::PRINT with assembly using __thiscall 
```**  **```
printf("Done.\n");
system("pause");
return 0;
} 
```

但是，我看到它**非常具体**。它看起来像**LOCK - KEY**，我必须为每组参数类型制作一个新模板。

原件（好的）：

```
void PRINT(); //void FOO::PRINT(); 
```

稍微修改一下：

```
void PRINT(int); //void FOO::PRINT(int); 
```

编译器立即使用旧模板代码显示：

```
//void (F::*func)();
//address_data.func = Function; 
```

 ****```
error C2440: '=' : cannot convert from 
'void (__thiscall FOO::*)(int)' to 'void (__thiscall FOO::*)(void)' 
```**  ****为什么？**它们只是地址。

```
69:       address_data.func = Function;
00420328  mov  dword ptr [ebp-4],offset @ILT+2940(FOO::PRINT) (00401b81) 
```

...

EDIT3：我知道更好的解决方案：

```
void(NUMBER::*address_PRINT)(void) = FOO::PRINT;
int(NUMBER::*address_GETA)(void) = FOO::GETA;
int(NUMBER::*address_GETB)(void) = FOO::GETB;
void(NUMBER::*address_SETA)(int) = FOO::SETA;
void(NUMBER::*address_SETA)(int) = FOO::SETB; 
```

它比**模板**好得多。顺便说一句，我想实现目标：

```
<special_definition> lpfunction;
lpfunction = FOO::PRINT; //OK
lpfunction = FOO::GETA; //OK
lpfunction = FOO::GETB; //OK
lpfunction = FOO::SETA; //OK
lpfunction = FOO::SETB; //OK 
```

**这可能吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T09:35:02.857

指向成员函数的指针与指向全局函数或静态成员函数的指针完全不同。造成这种情况的原因有很多，但我不确定您对 C++ 的工作原理了解多少，因此我不确定哪些原因是有意义的。

我知道你在汇编中尝试的东西在一般情况下根本行不通。您似乎对成员函数和函数指针的用途存在根本性的误解。

问题是，您正在做一些在 C++ 中通常不会做的事情。您通常不会在 C++ 中建立函数指针表，因为您将使用这种东西的东西就是`virtual`函数的用途。

如果你确定要使用这种方法，我建议你完全不要使用 C++，而只使用 C。

为了证明这些指针类型是完全不兼容的，这里有一个程序给你：

```
#include <cstdio>

struct Foo {
   int a;
   int b;
   int addThem() { return a + b; }
};

struct Bar {
   int c;
   int d;
   int addThemAll() { return c + d; }
};

struct Qux : public Foo, public Bar {
   int e;
   int addAllTheThings() { return Foo::addThem() + Bar::addThemAll() + e; }
};

int addThemGlobal(Foo *foo)
{
   return foo->a + foo->b;
}

int main()
{
   int (Qux::*func)();

   func = &Bar::addThemAll;
   printf("sizeof(Foo::addThem) == %u\n", sizeof(&Foo::addThem));
   printf("sizeof(Bar::addThemAll) == %u\n", sizeof(&Bar::addThemAll));
   printf("sizeof(Qux::addAllTheThings) == %u\n", sizeof(&Qux::addAllTheThings));
   printf("sizeof(func) == %u\n", sizeof(func));
   printf("sizeof(addThemGlobal) == %u\n", sizeof(&addThemGlobal));
   printf("sizeof(void *) == %u\n", sizeof(void *));
   return 0;
} 
```

在我的系统上，该程序产生以下结果：

```
$ /tmp/a.out 
sizeof(Foo::addThem) == 16
sizeof(Bar::addThemAll) == 16
sizeof(Qux::addAllTheThings) == 16
sizeof(func) == 16
sizeof(addThemGlobal) == 8
sizeof(void *) == 8 
```

注意成员函数指针是 16 字节长的。它不适合`void *`. 它不是正常意义上的指针。您的代码和`union`工作纯属偶然。

这样做的原因是成员函数指针通常需要存储在其中的额外数据，这些数据与修复它传递的对象指针有关，以便对被调用的函数正确。在我的示例中，当`Bar::addThemAll`在`Qux`对象上调用时（由于继承而完全有效），指向`Qux`对象的指针需要在调用函数之前调整为指向`Bar`子对象。因此`Qux::*`，成员函数的 s 必须在其中编码这种调整。毕竟，saying`func = &Qux::addAllTheThings`是完全有效的，如果调用该函数，则无需调整指针。所以指针调整是函数指针值的一部分。

这只是一个例子。允许编译器以他们认为合适的任何方式（在某些约束内）实现成员函数指针。许多编译器（比如我使用的 64 位平台上的 GNU C++ 编译器）将以不允许任何成员函数指针被视为完全等同于普通函数指针的方式实现它们。

有办法解决这个问题。处理成员函数指针的瑞士军刀是`::std::function`C++11 或 C++ TR1 中的模板。

一个例子：

```
 #include <functional>

 // .... inside main
    ::std::function<int(Qux *)> funcob = func; 
```

`funcob`绝对可以指向任何可以像函数一样调用并且需要`Qux *`. 成员函数、全局函数、静态成员函数、仿函数……`funcob`都可以指向它。

该示例仅适用于 C++11 编译器。但是如果你的编译器是相当新的，但仍然不是 C++11 编译器，这可能会起作用：

```
 #include <tr1/functional>

 // .... inside main
    ::std::tr1::function<int(Qux *)> funcob = func; 
```

如果情况变得更糟，您可以使用 Boost 库，这就是整个概念的来源。

但我会重新考虑你的设计。我怀疑你会从一个经过深思熟虑的继承层次结构和使用`virtual`函数中获得更多的好处，而不是你现在正在做的任何事情。使用解释器，我将拥有一个顶级抽象“表达式”类，它是任何可以评估的抽象类。我会给它一个虚拟`evaluate`方法。然后，您可以为不同的语法元素派生类，例如加法表达式、变量或常量。他们每个人都会为他们的具体情况重载评估方法。然后你可以建立表达式树。

虽然不知道细节，但这只是对您的设计的模糊建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T10:17:30.610

这是一个干净的解决方案。通过模板将您的成员函数包装成静态成员函数。然后您可以将其转换为您想要的任何指针：

```
template<class F, void (F::*funct)()>
struct Helper: public T {
  static void static_f(F *obj) {
    ((*obj).*funct)();
  };
};

struct T {
  void f() {
  }
};

int main() {
  void (*ptr)(T*);
  ptr = &(Helper<T,&T::f>::static_f);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T09:48:50.993

看来您需要将指向成员函数的指针转换为 void *。我假设您想将该指针作为“用户数据”提供给某个库函数，然后您将取回您的指针并希望在某个给定对象上使用它。

如果是这种情况，a`reinterpret_cast<void *>(...)`可能是正确的...我假设接收指针的库没有使用它。**********

# wpf - Prism-WPF 相当于 Silverlight 的：CompositionInitializer 类和 SatisfyImports()

> ID：14545742
> 
> 赞同：1
> 
> 时间：2013-01-27T08:34:14.620
> 
> 标签：wpf, prism, mef

我正在使用 Prism-MEF-WPF 有时我需要从视图的 XAML 构造视图模型，因此不涉及容器并且无法自动执行依赖注入（因为没有与 VM 一起使用的 Export 属性） .so Prism-WPF 中应该有一些类，如 CompositionInitializer，使我能够要求容器进行注入。如果有等效的类如何使用它，如果没有等效的如何从 xaml 构造视图模型知道我使用 MEF 的观点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:20:46.227

问题是如果 XAML 没有无参数构造函数，则无法在 XAML 中创建对象。

使用 ServiceLocator，您可以实现这一点。它将作为 IoC 工作（由 Prism/MEF 设置，您只需删除 .dll）：

xml:

```
<Window.DataContext>
    <local:ViewModel/>
</Window.DataContext> 
```

代码隐藏：

```
class ViewModel : NotificationObject
{
    public ViewModel()
    {
        var firstDependency = ServiceLocator.Current.GetInstance<FirstDependencyType>();
        //... more dependencies here instead of as constructor parameters
    }

    //class code omitted for brievity
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:47:40.707

这是我从 Agustin Adami “ [http://blogs.southworks.net/aadami](http://blogs.southworks.net/aadami) ”得到的正确答案：

根据我的理解，仅当视图模型没有任何构造函数参数时，才能在 XAML 中将视图模型实例化为视图的 DataContext。据我所知，目前不支持通过与逆控制容器合作创建在 XAML 中定义的对象。

关于 CompositionInitializer 类，据我所知 WPF 没有等效类，另一方面，关于这个主题，我相信您会发现以下博客文章很有趣：

•<a href="http://reedcopsey.com/2010/03/26/mef-compositioninitializer-for-wpf/" rel="nofollow">http://reedcopsey.com/2010/03/26/mef -compositioninitializer-for-wpf/ 另外，我相信另一种方法可能是注册 CompositionContainer 类，就像这个线程中提到的那样：

[http://compositewpf.codeplex.com/discussions/311933](http://compositewpf.codeplex.com/discussions/311933) 因为这可以让您在视图模型的构造函数中检索此类，以便调用 SatisfyImportsOnce 方法以满足传递的类中定义的 Imports：

this.compositionContainer =ServiceLocator.Current.GetInstance(); this.compositionContainer.SatisfyImportsOnce(this);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:57:26.053

[Bootstrapper](http://msdn.microsoft.com/en-us/library/ff921139%28v=pandp.20%29.aspx)类是您正在寻找的。它`UnityContainer`用于注入依赖项。[此处](http://msdn.microsoft.com/en-us/magazine/cc785479.aspx)的此链接也可能对您感兴趣..

**编辑**

如果我做对了，您想从您的 xaml 创建一个 ViewModel，可以这样实现（这里本地是您的 ViewModel 类的命名空间） -

```
<Window.DataContext>
    <local:ViewModel/>
</Window.DataContext> 
```

# makefile - Makefile 模式匹配

> ID：14545743
> 
> 赞同：0
> 
> 时间：2013-01-27T08:34:17.463
> 
> 标签：makefile

我的 Makefile 中有两个模式规则。target1 实际上匹配这两个规则。当我运行 makefile 时，它​​总是尝试运行模式 rule1 的配方，而不是我想要的模式 rule2。对于特定目标（例如 target1），是否可以让 makefile 进程跳过匹配规则 1 并继续查找第二个匹配项（规则 2）？？？

```
 ## pattern rule 1
    %.xml: $^
       recipes ....

  ## pattern rule 2
    /opt/test1/xml/default%.xml: $^
       recipes ....

  ## target1
    /opt/test1/xml/default1.xml: prereq 
```

# javascript - 如何使 ng-click 事件有条件？

> ID：14545744
> 
> 赞同：119
> 
> 时间：2013-01-27T08:34:22.893
> 
> 标签：javascript, html, angularjs

我在 ng-repeat 中有这段代码：

```
<a href="#" class="disabled" ng-click="doSomething(object)">Do something</a> 
```

**如何设置按钮在有时被禁用的条件`class="disabled"`？**

或者有没有办法在Javascript中做到这一点，看起来像：

```
$('.do-something-button').click(function(){
  if (!$(this).hasClass('disabled')) {
    do something
  }
}); 
```

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2013-01-27T09:41:30.293

在指令之外的任何地方使用 DOM（包括检查属性）都是不好的。您可以在范围中添加一些值，指示是否应禁用链接。

但另一个问题是 ngDisabled 除了表单控件外，对任何东西都不起作用，所以你不能将它与 <a> 一起使用，但你可以将它与 <button> 一起使用并将其设置为链接。

另一种方法是对表达式使用惰性求值，例如，如果为真，`isDisabled || action()`则不会调用动作。`isDisabled`

两种解决方案都在这里：[http ://plnkr.co/edit/5d5R5KfD4PCE8vS3OSSx?p=preview](http://plnkr.co/edit/5d5R5KfD4PCE8vS3OSSx?p=preview)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-07-10T12:17:39.207

我们可以在不使用禁用类的情况下有条件地添加 ng-click 事件。

HTML：

```
<div ng-repeat="object in objects">
<span ng-click="!object.status && disableIt(object)">{{object.value}}</span>
</div> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-01-28T03:11:35.310

我使用 && 表达式，这对我来说非常有用。

例如，

```
<button ng-model="vm.slideOneValid" ng-disabled="!vm.slideOneValid" ng-click="vm.slideOneValid && vm.nextSlide()" class="btn btn-light-green btn-medium pull-right">Next</button> 
```

如果`vm.slideOneValid`为 false，则不触发表达式的第二部分。我知道这是将逻辑放入 DOM 中，但这是一种快速的肮脏方式，可以让 ng-disabled 和 ng-click 放置好。

只需记住将 ng-model 添加到元素以使 ng-disabled 工作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-08-29T12:05:49.577

基本上`ng-click`首先检查`isDisabled`并根据它的值来决定是否应该调用该函数。

```
<span ng-click="(isDisabled) || clicked()">Do something</span> 
```

或将其读作

```
<span ng-click="(if this value is true function clicked won't be called. and if it's false the clicked will be called) || clicked()">Do something</span> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-17T04:09:14.573

你可以尝试使用`ng-class`.
这是我的简单示例：
[http ://plnkr.co/edit/wS3QkQ5dvHNdc6Lb8ZSF?p=preview](http://plnkr.co/edit/wS3QkQ5dvHNdc6Lb8ZSF?p=preview)

```
<div ng-repeat="object in objects">
  <span ng-class="{'disabled': object.status}" ng-click="disableIt(object)">
    {{object.value}}
  </span>
</div> 
```

状态是对象的自定义属性，您可以随意命名。in是一个 CSS 类名，
应该是or`disabled``ng-class``object.status``true``false`

您可以在 function 中更改**每个对象的状态**`disableIt`。
在您的控制器中，您可以这样做：

```
$scope.disableIt = function(obj) {
  obj.status = !obj.status
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-03T14:06:19.440

I had this issue also and I simply found out that if you simply remove the "#" the issue goes off. Like this :

```
<a href="" class="disabled" ng-click="doSomething(object)">Do something</a> 
```

# javascript - Javascript动态表

> ID：14545747
> 
> 赞同：-3
> 
> 时间：2013-01-27T08:34:35.583
> 
> 标签：javascript, dynamic, html-table

我遇到了麻烦下表应该在表中的每个框中读取 r1 c1、r1 c2、r2 c1、r2 c2 等等，并且用户应该只能选择 12 行和 12 列应该显示的任何内容一条错误消息。到目前为止，这是我的代码。

```
<!DOCTYPE html>

        <!-- written by Angela Bauer on 1/23/2013-->
        <!-- saved from url=(0014)about:internet -->

       <html>
         <head>
           <meta charset = "utf-8">
           <title> Dynamic Table </title>
             <script type = "text/javascript">

             var width = 500;
             var height = 500;

            function CreateTable(txtRows, txtCols, hold)
            {
            if(validNumber(txtRows) && validNumber(txtCols)
            && (hold != null) && (hold.canHaveChildren))
            {
            hold.innerHTML = "";
            var table = document.createElement("table");
            table.border = 3;
            table.borderColor = "Blue";
            table.height = height;
            table.width = width;
            var row = null;
            var cell = null;
            hold.appendChild(table);
            for(i=0; i<txtRows; i++)
            {
            row = appendR(table)
            for(j=0; j<txtCols; j++)
            {
            cell = appendC(row);
            cell.innerText = j;
            cell = null;
            }
            row = null;
            }
            }
            }

            function appendR(table)
            {
            if(table != null)
            {
            return table.insertRow();
            }
            else
            {
            alert("Error while creating table. Cause: Container Table is null!");
            }
            }

            function appendC(aRow)
            {
            if(aRow != null)
            {
            return aRow.insertCell();
            }
            else
            {
            alert("Error while creating table. Cause: Container row is null!");
            }
            }

            function validNumber(ipNum)
            {
            if(isNaN(ipNum))
            {
            alert("Invalid Number!");
            return false;
            }
            else if(ipNum <= 1)
            {
            alert("You can only enter a number from 1 - 12!");
            return false;
            }
            else
            {
            return true;
            }
            }
             </script>
        </head>
            <body>
            <table>
            <tr>
                <td> How many Rows would you like: </td>
                <td><input type=text name=txtRows value=1 /></td>
            </tr>
            <tr>
                <td> How many Columns would you like: </td>
                <td><input type=text name=txtCols value=1 /> </td>
            </tr>
            <tr>
                <td colspan=10 align=right><input type=button name=cmdCreate value="Create Table" 
                onClick="CreateTable(txtRows.value, txtCols.value, divHolder)" /></td>
            </tr>
            </table>
                <div id=divHolder></div>
            </body>
       </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:22:33.590

正如 gdoron 所说，您需要问一个问题，但我会赌一把，猜您希望您修复代码。

以下是您的代码的工作副本。有很多东西错了，包括

*   输入框没有ID
*   否 " 用于 HTML 表单中项目的值
*   .insertRow 缺少参数
*   .insertCell 缺少参数
*   如果您输入数字 1，validNumber 函数会产生错误。
*   canHaveChildren 仅在 IE 中有效我已将其删除，但如果您的脚本仅在 IE 中使用，则将其添加回来

最佳实践要避免的事情：使用单词 table、row 等作为 var 名称。

我猜你是新人，所以我的建议是安装 Firefox 和 firebug 插件，因为它会告诉你一半的错误。此外，如果它没有执行您想要的操作，请向代码部分添加警报并确定它到达或未到达的位置。

希望这会让你走上正轨。

```
<html>
<head>
    <meta charset = "utf-8">
    <title> Dynamic Table </title>
    <script type = "text/javascript">
        var width = 500;
        var height = 500;
        function createTable(txtRows, txtCols, hold) {
//                alert (txtRows+", "+txtCols+", "+hold);
//                alert (hold.canHaveChildren);
//                Removed as its an IE only javascript ----    && (hold.canHaveChildren)
            if(validNumber(txtRows) && validNumber(txtCols) && (hold != null) ) {
//                    alert ("is valid");
                hold.innerHTML = "";
                var table1 = document.createElement("table");
                table1.border = 3;
                table1.borderColor = "Blue";
                table1.height = height;
                table1.width = width;
                var row1 = null;
                var cell1 = null;
                hold.appendChild(table1);
                for(i=0; i<txtRows; i++) {
 //                        alert ("first for");
                    row1 = appendR(table1, i);
                    for(j=0; j<txtCols; j++) {
 //                            alert ("second for");
                        cell1 = appendC(row1, j);
                        cell1.innerText = j;
                        cell1 = null;
                    }
                    row1 = null;
                }
            }
        }

        function appendR(table1, i) {
            if(table1 != null) {
                return table1.insertRow(i);
            } else {
                alert("Error while creating table. Cause: Container Table is null!");
            }
        }

        function appendC(aRow, j) {
            if(aRow != null) {
                return aRow.insertCell(j);
            } else {
                alert("Error while creating table. Cause: Container row is null!");
            }
        }

        function validNumber(ipNum) {
            if(isNaN(ipNum)) {
                alert("Invalid Number!");
                return false;
            } else if(ipNum > 12) {
                alert("You can only enter a number from 1 - 12!");
                return false;
            } else if(ipNum < 1) {
                alert("You can only enter a number from 1 - 12!");
                return false;
            } else {
                return true;
            }
        }
    </script>
</head>
<body>
    <table>
        <tr>
            <td> How many Rows would you like: </td>
            <td><input id="txtRows" type="text" name="txtRows" value="1" /></td>
        </tr>
        <tr>
            <td> How many Columns would you like: </td>
            <td><input id="txtCols" type="text" name="txtCols" value="1" /> </td>
        </tr>
        <tr>
            <td colspan=10 align=right><input type=button name=cmdCreate value="Create Table" 
                                              onClick="createTable(txtRows.value, txtCols.value, divHolder)" /></td>
        </tr>
    </table>
    <div id="divHolder"></div>
</body> 
```

# django - Django ImageField 删除绑定表单上的路径

> ID：14545748
> 
> 赞同：1
> 
> 时间：2013-01-27T08:34:35.627
> 
> 标签：django, django-models, boundfield

所以我有一个使用 ImageField 的 ModelForm，它对插入和更新都按预期工作。如果表单已绑定，我还实现了一个小部件以显示图像的缩略图。我遇到的问题是文件路径仍在显示（连同缩略图）。如何覆盖此 URL，使其不会像“当前”标签一样呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:37:45.123

负责将当前文件路径呈现为实例化表单的属性，我们在以下位置找到：`forms.widgets.ClearableFileInput()`

覆盖 ClearableFileInput() 的渲染方法。就我而言，我改变了

```
substitutions['initial'] = (u'<a href="%s">%s</a>'
                                    % (escape(value.url),
                                       escape(force_unicode(value)))) 
```

至

```
substitutions['initial'] = (u'%s <br />'
                                %(escape(force_unicode(os.path.basename(value.url))))) 
```

这样做会删除当前文件的路径并仅显示文件名，而不显示链接。

# javascript - Javascript：文档 innerHTML 替换中断表单

> ID：14545750
> 
> 赞同：0
> 
> 时间：2013-01-27T08:34:39.170
> 
> 标签：javascript, forms, replace, innerhtml

我目前正在尝试替换还包含表单的页面中的一段纯文本。我知道在替换包含表单的代码后，表单元素会被重新创建。这可能会破坏表单（并且在我正在操作的网页上确实如此）。

通常，我通过使用“getElementsByTagName”函数来解决这个问题，以确保我不需要替换包含表单的代码，并且到目前为止这一直是可能的。然而此时，我已经到达了一个页面，其中最小的标记名是一个 div，其中包含我需要替换的文本**和**一个表单。这个 div 在表格中进一步细分，所以最初我认为“让我们按表格获取元素”，但我需要替换的部分并**没有**在表格中细分。

所以我用这段代码来替换：

`document.documentElement.innerHTML = document.documentElement.innerHTML.replace(RegEx, replaceString);`

当然，这会破坏页面上的表单，这是不想要的行为。

有谁知道如何在不破坏表格的情况下解决这个问题？是否有可能以某种方式获得对不包含表格的 div 部分的引用？是否可以仅更改部分代码？现在我获取代码的一个实例，替换实例中的匹配项，然后用更改的实例覆盖原始代码。我曾经记得`document.documentElement.innerHTML.replace(RegEx, replaceString);`在另一个页面上尝试过，但这仅返回了一个更改代码的实例，它没有更改原始代码。

这是页面的一部分：

```
<div class="BoxContent" style="background-image:url(http://static.tibia.com/images/global/content/scroll.gif);">
<TABLE></TABLE>
<BR>
Some text here.
<BR>
And some more.
<table></table>
<table></table>
</div> 
```

我需要对表格之间的文本进行一些更改。

我在 SO 上环顾四周，发现了关于使用 innerHTML 向表单添加内容的类似问题，但这对我的事业没有帮助。所以，这里感谢所有帮助！

肯尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:25:24.503

这里 - 普通的 JS

[演示](http://jsfiddle.net/mplungjan/azU7E/)

```
window.onload=function() {
  var nodes = document.getElementsByClassName("BoxContent")[0].childNodes;
    for (var i=0,n=nodes.length;i<n;i++) {
        if (nodes[i].nodeType==3) {
            // console.log(nodes[i].textContent)
            nodes[i].textContent=nodes[i].textContent.replace(/some/gi,"Lots");
        }
    }
} 
```

# ember.js - 如何在 Ember-data 中嵌入一对一关系？

> ID：14545751
> 
> 赞同：5
> 
> 时间：2013-01-27T08:35:05.950
> 
> 标签：ember.js, ember-data

我正在使用 Ember 1.0-pre4。

我有两个一对一关系的模型：

```
App.Lesson = DS.Model.extend                               
  timeslot: DS.belongsTo 'App.Timeslot'

App.Timeslot = DS.Model.extend
  lesson: DS.belongsTo 'App.Lesson' 
```

我有一个适配器配置为在保存时将时间段嵌入到课程中：

```
App.Adapter = DS.RESTAdapter.extend()  

App.Adapter.map App.Lesson,    
  timeslot: { embedded: 'always' }             

App.Store = DS.Store.extend            
  revision: 11                                 
  adapter: App.Adapter.create() 
```

然后我创建一个课程和一个时间段并尝试保存它们：

```
lesson = App.Lesson.createRecord
  group: group
lesson.set('timeslot', App.Timeslot.createRecord())

lesson.store.commit() 
```

但是在保存后没有嵌入任何内容，我看到 POST 请求，一个用于课程，一个用于时间段。

如何告诉 Ember 始终将时间段嵌入到课程中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:53:57.343

我认为这是一个错误，您应该报告它。筛选源代码并进行一些测试表明`createRecord`根本没有考虑`embedded`配置。此配置仅用于序列化和反序列化过程。

当您调用 createRecord 时，会将一条记录添加到存储桶中`created`，然后在`commit` `ember-data`存储桶中的每条记录上简单地触发一个 ajax 发布。

因此，要回到您的代码中`ember-data`，您创建了两条记录，并且在提交时它将触发对其中的`Lesson`对象的 ajax 发布调用`Timeslot` `embedded`，并且还将在随后的调用中为`Timeslot`最后剩余的记录触发另一个 ajax 发布在桶里。

```
lesson = QrTimetable.Lesson.createRecord
  group: group

lesson.set('timeslot', QrTimetable.Timeslot.createRecord())
lesson.store.commit() 
```

除非，对 ember-data 内部有更好理解的人与我的观点相矛盾，否则我倾向于再次相信这是一个错误。

这是提交事务时调用的最后一个代码。

```
 createRecord: function(store, type, record) {
    var root = this.rootForType(type);

    var data = {};
    data[root] = this.serialize(record, { includeId: true });

    this.ajax(this.buildURL(root), "POST", {
      data: data,
      context: this,
      success: function(json) {
        Ember.run(this, function(){
          this.didCreateRecord(store, type, record, json);
        });
      },
      error: function(xhr) {
        this.didError(store, type, record, xhr);
      }
    });
  }, 
```

# php - cookie 的生命周期（用于会话 id）？关闭浏览器后删除+错误：无法启动会话，因为标头已经发送

> ID：14545752
> 
> 赞同：1
> 
> 时间：2013-01-27T08:35:09.110
> 
> 标签：php, session, cookies, symfony, symfony-2.1

我想将用户的会话 ID 存储在 cookie 中。

所以我写了这段代码：

```
public function indexAction()
{
    $session_id = $this->get('session')->getId();
    $request = $this->get('request');
    $value = $request->cookies->get('session_id');
    if ($value == null)//if cookie session_id does not exist, we create it
    {
        $cookie = new Cookie('session_id', $session_id, time() + (3600 * 24 * 7));
        $response = new Response();
        $response->headers->setCookie($cookie);
        $response->send();
    }
    else echo 'A cookie session_id has already been set :' . $value;

    return $this->render('MyBundle:Default:index.html.twig');
} 
```

1.首先，我不知道把这段代码放在哪里。我不认为把它放在 indexAction 中是正确的。

2\. 存储会话ID的cookie PHPSESSID已经存在。更改它的到期时间而不是创建一个新的到期时间会更好吗？那么如何更改其到期时间呢？

3\. 要更改我的 cookie session_id 的到期时间，我尝试过：

*   `$cookie = new Cookie('session_id', $session_id, time() + (3600 * 24 * 7));`
*   并在 config.yml 中设置，在会话下，生命周期为 604800。

4.当我重新打开浏览器时，我也收到以下错误：`Failed to start the session because headers have already been sent.`这似乎是由于这个调用`$this->get('session')`和这一行：`$response->send();`但我不知道我怎么能以另一种方式做到这一点。

但这不起作用：当我关闭浏览器并重新打开它时，我定义的所有 cookie 都已消失，并且 PHPSESSID 具有新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:53:07.023

您可以在框架部分下的配置文件中设置会话生命周期。config.yml 的示例可能如下所示：

```
framework:
secret:        %secret%
charset:       UTF-8
error_handler: null
csrf_protection:
  enabled: true
router:        { resource: "%kernel.root_dir%/config/routing.yml" }
validation:    { enabled: true, annotations: true }
templating:    { engines: ['twig'] } #assets_version: SomeVersionScheme
session:
  default_locale: %locale%
  lifetime:       3600
  auto_start:     true 
```

您可以在这里找到更多信息：http: [//forum.symfony-project.org/viewtopic.php?f=23 &t=34110](http://forum.symfony-project.org/viewtopic.php?f=23&t=34110)

# jquery - 更改文本区域 jquery 内的 html 标记之间的文本

> ID：14545755
> 
> 赞同：-3
> 
> 时间：2013-01-27T08:35:17.717
> 
> 标签：jquery, html, textarea

如何使用 jQuery 更改具有位于文本区域内的 id 的 html 标记之间的文本。

```
<textarea><div id="tochange">Text</div></textarea> 
```

如何更改 #tochange 中的“文本”，当然这将显示为 HTML 代码，就像它在 textarea 中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:56:31.133

```
$('textarea').val( 
   $('<div />').append( $($('textarea').val()).text('something') ).html() 
); 
```

[**小提琴**](http://jsfiddle.net/sDJxM/)

# sql-server - 在查询文本参数中搜索术语

> ID：14545756
> 
> 赞同：0
> 
> 时间：2013-01-27T08:35:23.273
> 
> 标签：sql-server, tsql, search, sql-server-2008-r2

我在 SQL Server 中有一个简单的表（我使用的是 2008 R2）：

```
Sites ( SiteId, Name ) 
```

假设我有以下数据：

```
-----------------------------------------
- SiteId - Name                         -
-----------------------------------------
-      1 - Foo Bar Baz                  -
-      2 - Qux Tar                      -
-      3 - Contoso                      -
----------------------------------------- 
```

我希望允许用户搜索“ `baz foo`”并返回第 1 行。我希望 SQL Server 将输入字符串分解并仅返回列值与所有条件匹配的行。

从逻辑上讲，这将是这样的：

```
function Search(query) {
    query = query.Split(" ");
    sql = "SELECT ..."
    foreach(term in query) {
        sql += "WHERE Name LIKE " + term + " AND ";
    }
    executeSql( sql );
} 
```

我知道 T-SQL 使处理数组变得非常困难，但肯定有一些内置的结构可以执行标记化/术语匹配吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:35:29.903

创建一个自定义函数来构建您的 SELECT 语句

```
CREATE FUNCTION [dbo].[FINDWORDS](@SEARCHTERMS VARCHAR(150), @TABLE VARCHAR(100))
RETURNS VARCHAR(200)

AS

BEGIN

DECLARE @CURRENTCOUNT AS INT
DECLARE @MAXCOUNT AS INT
DECLARE @SEARCHSTATEMENT AS VARCHAR(200)
DECLARE @CURRENTITEM AS VARCHAR(50)
DECLARE @WORDS TABLE (ROWNUMBER INT, ITEMS VARCHAR(50))

INSERT INTO @WORDS(ROWNUMBER, ITEMS)
SELECT ROWNUMBER = ROW_NUMBER() OVER(ORDER BY items), items
FROM dbo.splitfn(@SEARCHTERMS, ' ')

SET @CURRENTCOUNT = 1
SET @MAXCOUNT = (SELECT MAX(ROWNUMBER) FROM @WORDS)
SET @SEARCHSTATEMENT = 'SELECT SiteId, Name 
                        INTO #MYTABLE
                        FROM ' + @TABLE + ' WHERE Name LIKE ''%' 

WHILE(@CURRENTCOUNT <= @MAXCOUNT)
    BEGIN
        IF @CURRENTCOUNT > 1
            BEGIN
                SET @SEARCHSTATEMENT = @SEARCHSTATEMENT + ' AND NAME LIKE ''%'
            END
        SET @CURRENTITEM = (SELECT items 
                            FROM @WORDS 
                            WHERE ROWNUMBER = @CURRENTCOUNT)
        SET @SEARCHSTATEMENT = @SEARCHSTATEMENT + @CURRENTITEM + '%'''
        SET @CURRENTCOUNT = @CURRENTCOUNT + 1
    END

RETURN @SEARCHSTATEMENT

END 
```

然后创建一个过程来调用 SELECT 语句（因为我们不能从函数中执行 SQL 字符串）

```
CREATE PROCEDURE [dbo].[FINDWORDS2] @SEARCHSTRING VARCHAR(200)

AS

BEGIN

DECLARE @STRING AS VARCHAR(200)

SET @STRING = DBO.FINDWORDS(@SEARCHSTRING, 'SITES') + ' SELECT * FROM #MYTABLE'

EXEC(@STRING)

END 
```

您现在已准备好使用该过程搜索特定字符串

```
EXEC FINDWORDS2 @SEARCHSTRING = 'baz foo' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:00:50.623

好吧，要在数据库中查找任何值，请看这里： http: [//plixa.nl/find-any-value-in-a-database/](http://plixa.nl/find-any-value-in-a-database/)它包含一个您可以使用的脚本！

# c# - 在不阻塞 UI 线程的情况下执行一系列操作

> ID：14545757
> 
> 赞同：0
> 
> 时间：2013-01-27T08:35:26.377
> 
> 标签：c#, wpf, multithreading

我想做一系列动作，同时依赖它抛出的异常或不抛出任何异常更新我的 UI，我怎样才能实现这样的事情？

我已经尝试为每个步骤创建新线程，但它不会等到一个步骤结束并且它总是写入失败消息，使用 Thread.Join() 也没有帮助，因为它也阻塞了 UI 线程......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:40:13.637

你需要[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx "后台工作者")。将要在后台线程中执行的代码放入`DoWork`处理程序中，将更新 UI 的代码放入`RunWorkerCompleted`事件处理程序中。

如果您想在`DoWork`处理程序之间更新 GUI，您可以像这样在 UI 调度程序上将其排队 -

```
App.Current.Dispatcher.BeginInvoke((Action)delegate
        {
           // Update GUI here.
        }, null); 
```

# linux - ps -e 和 ps -A 的区别

> ID：14545760
> 
> 赞同：1
> 
> 时间：2013-01-27T08:35:41.430
> 
> 标签：linux, process

我正在浏览 ps 命令的帮助页面（使用 ps --h），我注意到这两个选项具有相同的描述。

```
-e all processes
-A all processes 
```

我使用这两个选项运行命令，但没有发现任何区别。

这两个选项有什么区别吗？如果不是，为什么要提供两个相同的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:37:43.190

> 为什么要提供两个相同的选项？

可能是为了与`ps`其他（旧版？）系统兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T08:38:22.260

man ps 说：

```
 -A     Select all processes.  Identical to -e. 
```

如上所述，这可能是为了与不同 UNIX 系统的旧脚本兼容，它确实发生了。

（archlinux 发行版）。

# android - 在 onPause() 中识别 NEXT 活动

> ID：14545762
> 
> 赞同：0
> 
> 时间：2013-01-27T08:35:45.727
> 
> 标签：android, android-activity, onpause

有什么方法可以确定`onPause()`调用时下一个活动将是什么。

我需要知道，因为当下一个活动不是我自己的应用程序中的一个活动时，我需要执行某些我不想在移动到我自己的应用程序中的活动时执行的清理工作。我知道我可以在我的应用程序中设置某种标志，`startActivity()`但我想知道是否有内置的方法来获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:55:47.290

无法猜测哪个其他活动获得了焦点。我为此实现了一个[应用程序](http://developer.android.com/reference/android/app/Application.html)类，其中所有活动都调用了一个自定义挂起函数，该函数等待恢复调用 10 秒。如果任何活动都没有进行恢复调用，我的应用程序就知道它必须关闭并退出。

```
public ExampleApp extends Application {
    boolean shutdown;

    public void suspend() {
       shutdown=true;
       voodooFunctionToInvokeCallback10SeondsDelayed();
    }

    public void resume() {
       shutdown=false;
    }

    public void callback() {
        if(shutdown) {
            // shutdown code
        }
    }
}

public MyActivity extends Activity {
    public void onResume() {
        ((ExampleApp)getApplicationContext()).resume();
    }

    public void onPause() {
        ((ExampleApp)getApplicationContext()).suspend();
    }
} 
```

# coldfusion - ColdFusion hash_hmac256 输出格式/编码

> ID：14545766
> 
> 赞同：2
> 
> 时间：2013-01-27T08:36:38.970
> 
> 标签：coldfusion, character-encoding

我有这个脚本可以在 CFML 中输出类似 hash_hmac 的函数：

```
<cfprocessingdirective pageencoding = "iso-8859-1">

<cfset msg = "AgostinoSqueglinPiccolinMonachin">

<cfset jMsg = JavaCast("string",msg).getBytes() />
<cfset jKey = JavaCast("string","cicciolin").getBytes() />

<cfset key = createObject("java","javax.crypto.spec.SecretKeySpec") />
<cfset mac = createObject("java","javax.crypto.Mac") />

<!--- this line had to be changed to the 256 version --->
<cfset key = key.init(jKey,"hmacSHA256") />

<cfset mac = mac.getInstance(key.getAlgorithm()) />
<cfset mac.init(key) />
<cfset mac.update(jMsg) />

<cfset cc = mac.doFinal()>

<cfset strBase64Value = ToString( cc,"Utf-8" ) />

<cfscript>
    writeDump(msg);
    writeDump(strBase64Value);
</cfscript> 
```

这应该输出与此 php 相同的结果：

```
<?php

    $uu = hash_hmac('sha256', "AgostinoSqueglinPiccolinMonachin", "cicciolin", true);

    echo $uu;

?> 
```

但我得到了这个不同的结果，可能是由于格式错误：

ColdFusion : �GK�襍}Ÿ�}��B�}9w�(���u�m�</p>

PHP: ÐGKÒè¥}Å¸»}©ì¬B§}9w´(«æüu§mÃ

似乎有些字符没有以正确的方式输出。

我该如何解决这个问题？

**更新：**

该解决方案完美运行，但如果我尝试编码新行，还有其他问题：

例如

php：

```
$sign = "GET\n" . "agostinsqueglin" . "". "piccolin";

$uu = base64_encode(hash_hmac('sha256', $sign, "cicciolin", true)); 
```

如果我尝试：

```
sign = "GET#chr(13)##chr(10)#" & "agostinsqueglin" & "" & "piccolin"; 
```

我得到了两个不同的结果。

这是由于coldfusion处理“\ n”换行符的方式......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:33:27.427

您提供的代码比它需要的要冗长一些，而且......好吧，这是一个改进的版本：

```
<cfscript>
    msg       = "AgostinoSqueglinPiccolinMonachin";
    key       = "cicciolin";
    algorithm = "HmacSHA256";
    encoding  = "iso-8859-1";

    secret = createObject('java',"javax.crypto.spec.SecretKeySpec").init( charsetDecode(key,encoding) , algorithm );
    mac    = createObject('java',"javax.crypto.Mac").getInstance(algorithm);
    mac.init(secret);
    digest = mac.doFinal( charsetDecode(msg,encoding) );

    writeDump( msg );
    writeDump( toString(digest,encoding) );
</cfscript> 
```

这是基于此处的答案和评论：[使用 Java 在 ColdFusion 中计算 HMAC-SHA256 摘要](https://stackoverflow.com/questions/951477/calculate-hmac-sha256-digest-in-coldfusion-using-java/951782#951782)

显然，对于常规使用，它应该包含在一个合适的函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:58:06.537

看起来您正在尝试输出 UTF-8 字符串，而您的处理指令设置为 iso-8859-1。尝试改变它：

```
<cfprocessingdirective pageencoding = "UTF-8"> 
```

# jquery - 在 Fancybox 中查看购物车的内容，IE8 中只有空白页

> ID：14545769
> 
> 赞同：0
> 
> 时间：2013-01-27T08:36:48.543
> 
> 标签：jquery, iframe, internet-explorer-8, fancybox, fancybox-2

我正在使用[Mal 的购物车](http://www.mals-e.com/tpv.php?tp=2)，我希望查看购物车链接在 Fancybox 窗口中显示购物车内容。这适用于 Windows Firefox 18、Chrome 24、Opera 12 和 Safari，但在 IE8 中，fancybox 将弹出空白，刷新框将显示内容。打开兼容性视图，它工作正常。

[http://www.riptest.info](http://www.riptest.info) 使用IE8，点击第一个帖子的“购买许可证”按钮就可以了，然后点击左侧边栏中的“查看购物车”按钮，弹出一个空白页面，刷新白色页面并显示内容。

**购买许可证按钮的代码：**

```
<a href="http://www.riptest.info/fancyboxtest.html" class="iframe rollover"><span class="displace">Buy A Beat</span></a> 
```

**sidebar.php 查看购物车按钮的代码：**

```
<a href="http://ww11.aitsafe.com/cf/review.cfm?userid=D886658" class="iframe"><img src="http://www.rockitpro.com/misc/viewcart.gif" width="130px" height="20px" alt="View Your Cart" border="0px"></a> 
```

**footer.php 代码（之前`</body>`）：**

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="http://www.riptest.info/wp-content/themes/acosmin-v3/fancybox/source/jquery.fancybox.pack.js?v=2.1.4"></script>
<script type="text/javascript">
$(document).ready(function() {
$(".iframe").fancybox({
'fitToView': false,
'autoSize': false,
'scrolling': 'no',
'maxWidth': 820,
'maxHeight': 600,
'width': 800,
'height': 600,
'type':'iframe'
    });
});
</script> 
```

我知道这可能是购物车链接，而我的 fancybox 代码没有针对这种类型的链接设置？这超出了我的专业知识，所以我正在寻求帮助。我有 2 个查看购物车按钮的可用选项[http://www.mals-e.com/tpv.php?tp=2](http://www.mals-e.com/tpv.php?tp=2)但是让 Fancybox 使用表单似乎比它需要的复杂得多，超链接应该在 IE8 中工作，因为它适用于所有其他浏览器，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:24:29.237

我不知道为什么，但在这种情况下，禁用预加载可以解决您的 IE 问题。

```
 $(".fancybox").fancybox({
     iframe : {
         preload: false
     }
 }); 
```

见 - [http://jsfiddle.net/hwvqf/1/](http://jsfiddle.net/hwvqf/1/)

# java - 设置 MIME 类型

> ID：14545771
> 
> 赞同：1
> 
> 时间：2013-01-27T08:37:19.887
> 
> 标签：java, playframework, playframework-1.x

我想编写一个 excel 并将其作为应用程序中的响应发送给用户 Play `framework 1.x`。但我不确定如何设置`content-type/MIME-type`返回 doc 或 excel 文件的响应。

让我知道这一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:47:08.507

从[文档中](http://www.playframework.org/documentation/1.2.5/controllers#result)：

> 要提供二进制数据，例如存储在服务器上的文件，请使用 renderBinary 方法。例如，如果您有一个带有 play.db.jpa.Blob 照片属性的 User 模型，请添加一个控制器方法来加载模型对象并使用存储的 MIME 类型渲染图像：

```
public static void userPhoto(long id) { 
    final User user = User.findById(id); 
    response.setContentTypeIfNotSet(user.photo.type());
    java.io.InputStream binaryData = user.photo.get();
    renderBinary(binaryData);
} 
```

# symfony - FOSUser Bundle.. 覆盖表单类型时无法加载类型“X”错误

> ID：14545774
> 
> 赞同：5
> 
> 时间：2013-01-27T08:37:34.220
> 
> 标签：symfony, fosuserbundle

我以为我非常密切地关注了文档，但由于某种原因，我收到了这个错误消息。

**无法加载类型“sam_user_registration”**

**// src/Sam/Bundle/UserBundle/Entity/User.php**

```
namespace Sam\Bundle\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use FOS\UserBundle\Entity\User as BaseUser;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * @ORM\Table(name="sam_user")
 */
class User extends BaseUser
{
/**
 * @var string $id
 *
 * @ORM\Id
 * @ORM\Column(name="id", type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * Get id
 *
 * @return string $id
 */
public function getId()
{
    return $this->id;
}

/**
 * @ORM\Column(type="string", length=255)
 *
 * @Assert\NotBlank(message="Please enter your name.", groups={"Registration", "Profile"})
 * @Assert\MinLength(limit="3", message="The name is too short.", groups={"Registration", "Profile"})
 * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})
 */
protected $name; 
```

**// src/Sam/Bundle/UserBundle/Form/Type/RegistrationFormType.php**

```
<?php

namespace Sam\Bundle\UserBundle\Form\Type;

use Symfony\Component\Form\FormBuilderInterface;
use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType;

class RegistrationFormType extends BaseType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    parent::buildForm($builder, $options);

    // add your custom field
    $builder->add('name');
}

public function getName()
{
    return 'sam_user_registration';
}
} 
```

** src/Sam/Bundle/UserBundle/Resources/config/services.xml ****

```
<container xmlns="http://symfony.com/schema/dic/services"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

<service id="sam_user.registration.form.type" class="Sam\Bundle\UserBundle\Form\Type\RegistrationFormType">
        <tag name="form.type" alias="sam_user_registration" />
        <argument>%fos_user.model.user.class%</argument>
    </service>

</container> 
```

**# app/config/config.yml**

```
fos_user:
db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
firewall_name: main
#user_class: Sam\Bundle\UserBundle\Document\User
user_class: Sam\Bundle\UserBundle\Entity\User

group:
    group_class:  Sam\Bundle\UserBundle\Entity\Group

profile:  # Authentication Form
    form:
        type:               fos_user_profile
        name:               fos_user_profile_form
        validation_groups:  [Authentication] 

registration:
        form:
            type:               sam_user_registration 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T09:07:50.473

首先，您的用户类缺少其构造函数。由于您继承 BaseUser ，因此您也必须调用父构造函数。所以...

```
public function __construct()
{
    parent::__construct();

    //your code

} 
```

其次，您不需要覆盖表单类型。由于您已将名称字段添加到您的实体中，因此它将通过以下方式自动在您的表单中可用

```
{{ form_widget(myForm.name)} } 
```

[**-> FosUserBundle 文档**](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)

但是，您确定**在 config.yml 中导入了 services.xml**吗？为什么要混合 xml 和 yml？只要坚持一个。

```
imports:
    - { resource: @SamBundleUserBundle/Resources/config/services.yml } 
```

Patt 在评论中指出了我们[最重要的注册 FOSUserBundle Symfony2](https://stackoverflow.com/questions/10964388/overriding-registration-fosuserbundle-symfony2)

# url - 从开发的角度来看，indeed.com URL 结构和站点是如何工作的？

> ID：14545775
> 
> 赞同：3
> 
> 时间：2013-01-27T08:37:35.487
> 
> 标签：url, hyperlink, seo, url-routing, search-engine

在站长的问答网站上，我问了以下问题：

[https://webmasters.stackexchange.com/questions/42730/how-does-indeed-com-make-it-to-the-top-of-every-single-search-for-every-single-c](https://webmasters.stackexchange.com/questions/42730/how-does-indeed-com-make-it-to-the-top-of-every-single-search-for-every-single-c)

但是，我想从开发的角度了解更多关于此的信息。

如果您在 Google 上搜索任何与工作相关的内容，例如 Gastonia Jobs (City + jobs)，那么除了他们的搜索结果在 Google 的第一页中占主导地位外，您还会得到一个如下所示的 URL 结构：

```
indeed.com/l-Gastonia,-NC-jobs.html 
```

我假设 L 代表 URL 结构中的位置。如果您搜索与行业相关的工作或具有特定公司名称的工作，您将得到类似以下内容（Microsoft 工作）：

```
indeed.com/q-Microsoft-jobs.html 
```

在美国只有 40,000 多个城市，我想，好吧，也许他们有可能遍历它们并为每个城市创建一个页面。这对计算机来说并不难。但是显然该站点是动态的，因为每个页面都有 10000 个结果并以 10 分页。上面的 q 显然代表查询。我可以理解的位置，但他们不可能为每个查询组合创建一个网页，对吗？

好吧，它变得有点奇怪。我想看看他们是否有站点地图，所以我在 Google 中输入了“indeed.com sitemap.xml”，得到了回复：

```
indeed.com/q-Sitemap-xml-jobs.html 
```

.. 再次，我搜索了“indeed.com url structure”，正如我在网站管理员的另一篇文章中提到的那样，我回来了：

```
indeed.com/q-change-url-structure-l-Arkansas.html 
```

Indeed.com 是否以某种方式使用编程根据我对谷歌的搜索输入动态创建网页？如果他们不是，他们如何能够为数百万和数百万可能的查询组合提供静态页面，让它们动态分页，然后让所有这些控制谷歌的第一页结果（尽管最后一个问题可能是最好的对于网站管理员 QA）？

页面中的 javascript 是否以某种方式与 URL 交互

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:44:27.457

它很可能**不是**一堆页面。“实际”页面可能是[http://indeed.com/?referrer=google&searchterm=jobs%20in%20washington](http://indeed.com/?referrer=google&searchterm=jobs%20in%20washington)。然后，该站点巧妙地使用 URL 重写生成人类可读的 URL，在数据库中获取与查询匹配的作业，然后瞧……

当然，我可能完全错了。说实话，它的技术方面可能可以通过多种方式解决。每次将作业添加到站点时，可能会创建与该作业匹配所需的所有页面，从而产生大量页面供 Google 抓取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:28:29.057

这是一个**很好的问题**，但是由于基本的 Google 搜索使用的原因仍未得到解答，

```
ste:indeed.com 
```

返回超过 120MM 的结果，其次是“product manager new york”等查询在结果中排​​名第一。这些页面显然是预先生成的，这可以通过搜索引擎缓存的页面（有时是几天前）与网站上的实时查询有不同的结果来证实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T07:00:24.407

当 Google 的搜索机器人抓取确实或任何其他求职网站上的页面时，这些页面是动态创建的。这是另一个站点： http: [//jobuzu.co.uk](http://jobuzu.co.uk/)我运行这个站点，它与实际工作方式相似。

PHP 在这方面是您的朋友，并且确实不要只使用标准数据库来研究 Sphinx 和 Solr，因为它们提供全文搜索以获得比 MySql 等更好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T21:13:14.317

他们还巧妙地利用了**rel="canonical"**和彻底的内部链接： http: [//www.indeed.com/find-jobs.jsp](http://www.indeed.com/find-jobs.jsp)

请注意，所有实际排名的页面都可以从该直接内部链接结构中找到。

# javascript - 使用 JQuery 创建链接

> ID：14545776
> 
> 赞同：2
> 
> 时间：2013-01-27T08:37:37.677
> 
> 标签：javascript, jquery

我得到了这个 Jquery 代码

```
 <head>
  <script type="text/javascript">
    $(document).ready(function() {
        $("#pav li a").click(function() {
            $(".srvctext").empty().append("<div id='loading'><img src='loading2.gif' alt='Loading' /></div>");
            $("#pav li a").css('color','#656565');
            $(this).css('color','#3ca5d4');
            $.ajax({ 
                url: this.href, 
                success: function(html) {
                    $(".srvctext").empty().append(html);
                }
            });
            return false;
        });

    });
</script>
  </head> 
```

和这个 HTML

```
 <div class="srvclinksholder">
    <h4> Our Services </h4>

        <ul id="pav">
            <li><a href="pages/page_1.html"  id="mostPopular">Technical Infrastructure Service</a></li>
            <li><a href="pages/page_2.html"  id="mostPopular">Email Exchange Service (Messaging)</a></li>
            <li><a href="pages/page_3.html"  id="mostPopular">Firewall Services</a></li>
            <li><a href="pages/page_4.html"  id="mostPopular">Security and Antivirus Service</a></li>
.... 
```

我希望能够创建从另一个页面到其中一个页面的链接，我想我必须以某种方式使用 # 只是不确定。因此，如果我的`<a href="service/pages/page_4.html">`服务是显然不起作用的页面名称。也许是这样的`<a href="service.html#pages/page_4.html">`

为了实现这一目标，我必须做出哪些改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:00:29.533

**演示**：http: [//jsfiddle.net/LxreN/3/](http://jsfiddle.net/LxreN/3/)

基本上，您将更改另一个 div 的 html。

```
$(".srvctext").html("<div id='loading'><img src='loading2.gif' alt='Loading' /></div>"); 
```

随着以下成功，不需要每次都清空，因为这会导致每次 2 次 DOM 访问，而 IE 不能很好地处理。

```
 success: function(html) {
        $(".srvctext").html(html);
    } 
```

# wordpress - Wordpress https ssl 内容被阻止的错误

> ID：14545782
> 
> 赞同：0
> 
> 时间：2013-01-27T08:38:53.777
> 
> 标签：wordpress, .htaccess, ssl, https

我现在在谷歌上花了很多天，我的 wordpress 问题就是这个。我想为网站上的几个页面打开 https 以用于结帐页面和我的帐户页面。

到目前为止我所做的是尝试使用 htaccess 并尝试了 wordpress https 插件。使用 WordPress 3.4

发生的情况是我收到被阻止的内容错误，因为它无法在 https 页面中加载模板（headway）中的 css 图像等。我可以在 chrome 检查元素上看到它会显示被阻止的内容错误（css 文件等），因为它们是 http 而不是 https 链接我相信 WordPress 地址（URL）应该有 https 但不确定当我这样做时，主页即使在 http 上也想显示一个证书。

这是一个开发域，因此证书尚不正确，因此仅使用服务器范围的证书。

我是否需要在 htaccess 中使用额外的规则，因为我相信 wordpress 与 https 的斗争从谷歌搜索和到目前为止遇到的每个错误（重定向循环错误等）防火墙允许端口 443，所以不是防火墙问题。希望有人对wordpress https ssl有很好的了解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:28:01.013

我想我会为那些可能像我一样卡住几天的人发布我对 wordpress https 问题的答案。在 wordpress 上使用 https 时，您必须拥有一个有效的 ssl 证书，我们以每年 16 英镑的价格从 rapidssl 购买了一个。如果没有有效的 ssl 证书，我们会不断收到来自 google 等浏览器的 310 错误，抱怨重定向循环。一旦安装了 ssl，这些就消失了。wordpress 站点 url 和 wordpress 主页链接根本不需要从 http 更改。

为我们需要的安全页面使用 wordpress https 插件，勾选编辑页面中的框以强制使用 ssl，并在 https 设置中勾选除管理员 ssl 登录之外的所有内容。

然后，我们在安装证书后收到有关部分加密内容的安全警告和错误，这意味着在您的安全页面中有一些浏览器不喜欢的 http 链接。

然后我们所做的是使用 chrome 检查页面元素并单击控制台选项卡以找到这些 http 链接。在我们的例子中，在 headway 主题中，我必须将 3 张图像作为 https:// url（图像的 url）插入到网格中的标题或媒体框中（对于那些使用 headway 的人）。

我们还有一个来自谷歌网络字体的链接，一旦安全，我们的错误就消失了，必须在安全页面中设置为 https。例如在 Firefox 中只显示挂锁。

如果您在 paypal 中设置了一个返回 url，它会为您提供这样的部分加密消息 - 尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且可以很容易地被第三方读取 -您要返回的页面必须在 https 中有一个挂锁，如果没有，您将不断从 firefox 等处收到此错误。所以返回页面必须没有错误，最好的方法是有一个不调用图像等的感谢页面，但是只是订单详情等。

让我发疯的一件事是，对 google we fonts 的调用受到了 headway 缓存的影响，所以它有时会在 https 页面中坚持 http 导致错误，所以现在禁用了，只是发布一个关于制作的问题一个在 ssl 页面上禁用 wordpress headway 主题缓存的插件，看看是否有任何可以帮助我的插件。

祝你的 ssl 页面好运，这很有趣！！！！！！！！！！哦，如果有人想要它作为标题，我将其用于谷歌字体的 javascriipt

```
 <script type="text/javascript">
 WebFontConfig = {
 google: { families: [ 'Lato:300,400,700' ] }
 };
 (function() {
var wf = document.createElement('script');
wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
    '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
wf.type = 'text/javascript';
wf.async = 'true';
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(wf, s);
 })();
</script> 
```

但是还有其他在 https 中调用它的方法，使用 // 而不是 http:// google bla 是另一种

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:48:32.157

> 我可以在 chrome 检查元素上看到它会显示被阻止的内容错误（css 文件等），因为它们是 http 而不是 https 链接我相信 WordPress 地址（URL）应该有 https 但不确定当我这样做时，主页即使在 http 上也想显示一个证书。

这就是答案。`ssl`提供内容的受保护网页需要 100% 通过`https`. 也许 10 年前混合`https`/`http`页面存在，但现在浏览器具有额外的安全意识。因此，您需要弄清楚如何确保所有内容的 URL 都设置为`https`. [这个网站](http://prosauce.org/blog/2010/8/5/enable-complete-support-for-ssl-on-wordpress.html)似乎有一套不错的答案。

# php - 如何从 Zend Framework 中的其他模块呈现特定模板

> ID：14545785
> 
> 赞同：0
> 
> 时间：2013-01-27T08:39:28.003
> 
> 标签：php, zend-framework, helper

viewRenderer 助手允许从同一个控制器的操作目录渲染模板，是否可以从另一个模块渲染模板？

编辑：实际上我在 ViewRenderer 中找到了 renderBySpec 方法，但似乎在构建路径时没有考虑模块参数，除此之外还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:14:19.663

在我的项目中，当我需要设置与默认布局不同的布局时，我会在 Controller 的初始化函数中设置正确的布局。像这样：

```
public function init()
{
    $this->_helper->layout->setLayout('different-layout');
} 
```

希望这对您有所帮助。

# c++ - openCV 未定义符号 _cvCvtColor

> ID：14545786
> 
> 赞同：0
> 
> 时间：2013-01-27T08:39:32.827
> 
> 标签：c++, xcode, opencv

我知道已经发布了类似的问题，但我发现的解决方案对我根本不起作用。

我正在使用 XCode 4.5 和 openCV 2.4.3。我从源代码构建了库，我将编译器设置为 LLVM GCC 4.2，每当我尝试使用 cvCvtColor() 时，都会收到以下错误消息：

```
Undefined symbols for architecture x86_64:
  "_cvCvtColor referenced from:
    _main in main.o 
```

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:15:48.757

我发现了问题，我在踢自己。事实证明，我没有导入 cvCvtColor() 所在的特定库（具体为 libopencv_imgproc）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:56:28.513

在终端中，“cd”到包含您的 OpenCV 库（或者实际上是库，当我查看[“如何构建 OpenCV 教程”](http://www.shiffman.net/2011/01/23/how-to-build-opencv-static-libraries-mac-os-x/)时，我看到其中一些是构建的）的目录，然后输入以下命令：

“ `nm -arch x86_64 _________.a`”（下划线所在的库名填写）

这会转储库的所有符号。您可以 egrep 或搜索“ `cvCvtColor`”。

我的猜测是，您只为 32 位构建了 OpenCV（这很容易看出`-arch x86_64`在“ `nm`”命令中指定“”时是否绝对没有符号），并且您还需要为 64 位构建 OpenCV 库位（x86_64）。

# php - 是否可以在 MYSQL AND “子句”中使用 IF ELSE

> ID：14545794
> 
> 赞同：0
> 
> 时间：2013-01-27T08:40:19.647
> 
> 标签：php, mysql, if-statement

我下面的示例“显然”不起作用 ::: 有没有办法获得**IF ELSE**或类似于工作的东西 ::: 我有几个 PHP 变量，基于这些变量我想更改 AND “子句”，而无需创建多个查询并使用 PHP if 语句来使用正确的查询块 :::

```
$query = "SELECT $wpdb->posts.ID
          FROM $wpdb->posts 
          INNER JOIN $wpdb->postmeta ON ($wpdb->posts.ID = $wpdb->postmeta.post_id)
          WHERE 1=1 
          AND $wpdb->posts.post_type = 'cars' 
          AND ($wpdb->posts.post_status = 'publish' OR $wpdb->posts.post_status = 'private') 

          IF ( $drive )
          AND ( ($wpdb->postmeta.meta_key = 'vehicle_year' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$year')
          ELSEIF ( $fuel  )
          AND ( ($wpdb->postmeta.meta_key = 'vehicle_fuel' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$fuel')
          ENDIF

          AND ( ($wpdb->postmeta.meta_key = 'vehicle_fuel' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$fuel') )
          GROUP BY $wpdb->posts.ID 
          ORDER BY $wpdb->posts.post_date 
          DESC LIMIT 0, 99"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:47:37.900

```
$p="";
$q="";
if( empty($drive) ){
    $p=" AND ( ($wpdb->postmeta.meta_key = 'vehicle_year' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$year')";
    }else{
        if( empty($fuel)  ){
            $q=" AND ( ($wpdb->postmeta.meta_key = 'vehicle_fuel' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$fuel')";
        }
    }

$query = "SELECT $wpdb->posts.ID
    FROM $wpdb->posts 
    INNER JOIN $wpdb->postmeta ON ($wpdb->posts.ID = $wpdb->postmeta.post_id)
    WHERE 1=1 
    AND $wpdb->posts.post_type = 'cars' 
    AND ($wpdb->posts.post_status = 'publish' OR $wpdb->posts.post_status = 'private') 
    ".$p.$q."
    AND ( ($wpdb->postmeta.meta_key = 'vehicle_fuel' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$fuel') )
    GROUP BY $wpdb->posts.ID 
    ORDER BY $wpdb->posts.post_date 
    DESC LIMIT 0, 99"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:47:05.060

您可以使用`if`

或者你可以在 MYSQL中使用`case when`which contains 。`then, else end`

*   [参考：](http://www.w3resource.com/mysql/control-flow-functions/case-operator.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:51:08.907

根据您的 PHP 条件设置局部变量，然后使用它们（局部变量）准备 sql 查询...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T08:54:14.840

试试这个：

```
$query = "SELECT $wpdb->posts.ID
      FROM $wpdb->posts 
      INNER JOIN $wpdb->postmeta ON ($wpdb->posts.ID = $wpdb->postmeta.post_id)
      WHERE 1=1 
      AND $wpdb->posts.post_type = 'cars' 
      AND ($wpdb->posts.post_status = 'publish' OR $wpdb->posts.post_status = 'private') 
      AND CASE WHEN $drive THEN $wpdb->postmeta.meta_key = 'vehicle_year' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$year'
               WHEN $fuel THEN $wpdb->postmeta.meta_key = 'vehicle_fuel' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$fuel'
               ELSE 1 = 1 END
      AND $wpdb->postmeta.meta_key = 'vehicle_fuel' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$fuel'
      GROUP BY $wpdb->posts.ID 
      ORDER BY $wpdb->posts.post_date 
      DESC LIMIT 0, 99"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T10:04:58.350

这不是逻辑上等价的吗？

```
"...
(
    $drive AND ($wpdb->postmeta.meta_key = 'vehicle_year' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$year')
    OR
    $fuel AND ($wpdb->postmeta.meta_key = 'vehicle_fuel' AND CAST($wpdb->postmeta.meta_value AS CHAR) = '$fuel')
)
..." 
```

# resources - 编写一个调用另一个资源通知方法的 LWRP

> ID：14545798
> 
> 赞同：1
> 
> 时间：2013-01-27T08:41:02.003
> 
> 标签：resources, chef-infra

我正在尝试编写一个扩展 Execute 资源的 LWRP。我希望`notifies`LWRP 中的属性/方法传递给`notifies`Execute 资源的方法

在我拥有的资源中：

```
attribute :notifies,     :kind_of => Array,  :default => [] 
```

在我有的提供者中

```
execute something do
  ...
  r.notifies.empty? ? nil : notifies(*r.notifies)
end 
```

作为回报得到一个参数错误：

```
ArgumentError: wrong number of arguments (3 for 1) 
```

感谢任何提示或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:26:04.570

我很确定该`:notifies`属性存在于**任何**LWRP 中，因为它是由基类提供的。所以你不应该将此属性添加到资源文件中。

而且您可以只使用提供者中的分配，无需检查零。

```
execute something do
  ...
  notifies r.notifies
end 
```

# ios - 即使在制作了@2x 副本后，iOS 图标也都是模糊的

> ID：14545799
> 
> 赞同：1
> 
> 时间：2013-01-27T08:41:12.137
> 
> 标签：ios, user-interface, icons, retina-display

我让我的设计师为应用程序创建了所有图标，但它们都很模糊。起初，我怀疑设计师，但我们最终从一位非常知名的 iOS 应用设计师那里得到了一个小图标套件。我实现了它们，我得到了和以前一样的模糊。

所以我知道这不是我的设计师。不知何故，这一定是我（编码员）的错。我曾经看到一些关于获得 CGRefContext 或使图标和图像更清晰的东西，但我再也找不到有人说答案的 SO 问题:(

我已经保存了应用程序中所有内容的常规大小图标 + @2x 大小的图标。

例如，我们尝试将一些工具栏图标放入工具栏中，图像的大小为 25 x 25 的正常大小，然后是 50 x 50 的@2x 大小。

另外，我正在直接对 iPhone 4S 进行测试。所以这不像我在模拟器或其他东西中查看它。

我已经查看了图标大小指南，并且将图标大小全部加倍只会导致更大版本的图标。也许有一些我不知道的以编程方式缩小它们的方法？

请帮忙。几个星期以来，我们一直在被动地尝试纠正这个问题！

**应要求提供的图标：**

普通的 ![guestlist_icon.png](../Images/e469e40f96868efcb213be4111c962c3.png)

@2x ![guestlist_icon@2x.png](../Images/565f73d60ccf76c9c93dcb72e8e6e640.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-27T20:59:07.960

虽然我在 6 个月前问过这个问题，但我希望这个问题在未来仍然可以帮助一些人。我了解到，获得最清晰图像的最佳方法是从设计师开始。

在完成设计时，设计师需要使用基于矢量的应用程序，例如 Adob​​e Illustrator。他们不应该使用 Adob​​e Photoshop 等基于像素的应用程序来完成设计。

当我问这个问题时，这并不是我的问题。这实际上是我的愚蠢错误。我将图像保存为@2X 而不是@2x。所以视网膜图像永远不会被加载。严重的是最大的荷马辛普森“Doh！”之一 我生命中的时刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:00:41.297

首先，我不明白这意味着什么：“另外，我正在直接对 iPhone 4S 进行测试。所以这不像是在模拟器或其他东西中查看它。”

可能的问题：

1.  图片的提名->根据您的评论，我认为提名是正确的。

2.  创建图像的方式 -> 如果您使用“imageNamed”之类的方法，它将处理 2x 图像。如果你使用“imageWithContentsOfFile”之类的方法，你需要自己做：

    ```
    -(NSString *)getPathByFileName:(NSString *)name{
        if([UIScreen mainScreen].scale == 2.0) {
            return [[NSBundle mainBundle] pathForResource:[name stringByAppendingString:@"@2x"] ofType:@"jpg"];
        }else{
            return [[NSBundle mainBundle] pathForResource:name ofType:@"jpg"];
        }
    }
    [UIImage imageWithContentsOfFile:[self getPathByFileName:name]]; 
    ```

3.  您确定在 Xcode 中添加的所有文件。

# android - Android VPN服务路由排除

> ID：14545800
> 
> 赞同：8
> 
> 时间：2013-01-27T08:41:24.727
> 
> 标签：android, security, networking, android-4.0-ice-cream-sandwich, openvpn

我正在使用 OpenVPN 和 ICS (Android 4.X) 附带的新 VpnService API

有没有办法定义从 VPN 隧道中排除 IP 地址？（这样发往该 ip 的流量将直接路由到网络，而不通过 VPN 隧道）。我们正在尝试通过允许带宽密集型服务（例如 youtube 未加密通过）来减少 VPN 的网络负载和成本，同时仍保护其余流量。

据我了解，在 Android 打开 Tun 设备之前，它可以接收一个路由列表，指定哪些流量应该通过 VPN，而不是排除哪些流量：

[VPNService.Builder API 文档](http://developer.android.com/reference/android/net/VpnService.Builder.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-22T17:59:21.980

我需要从 VPN 中排除本地 WiFi 子网。我使用了添加多个路由而不是 0.0.0.0 / 0 的方法。例如，如果您需要排除子网 192.168.240.90 / 21（二进制表示为 11000000.10101000.11110000.01011010），那么您应该将以下 21 条路由添加到您的 VpnService（二进制表示）：

```
00000000.00000000.00000000.00000000 / 1
10000000.00000000.00000000.00000000 / 2
11100000.00000000.00000000.00000000 / 3
11010000.00000000.00000000.00000000 / 4
11001000.00000000.00000000.00000000 / 5
11000100.00000000.00000000.00000000 / 6
11000010.00000000.00000000.00000000 / 7
11000001.00000000.00000000.00000000 / 8
11000000.00000000.00000000.00000000 / 9
11000000.11000000.00000000.00000000 / 10
11000000.10000000.00000000.00000000 / 11
11000000.10110000.00000000.00000000 / 12
11000000.10100000.00000000.00000000 / 13
11000000.10101100.00000000.00000000 / 14
11000000.10101010.00000000.00000000 / 15
11000000.10101001.00000000.00000000 / 16
11000000.10101000.00000000.00000000 / 17
11000000.10101000.10000000.00000000 / 18
11000000.10101000.11000000.00000000 / 19
11000000.10101000.11100000.00000000 / 20
11000000.10101000.11111000.00000000 / 21 
```

这个想法是反转前缀位置（从右侧）的位，并使前缀位置之后的所有位为零。结果，除了那些去本地子网的包之外的所有包都将匹配一个或另一个路由

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:11:58.173

简短的回答没有。

长答案。您要么必须执行多条路由（例如，使用从 /1 到 /32 的 32 条路由来排除 ip）。您可以解析数据包并使用新的受保护套接字代理这些数据包。（可能是 CPU 密集型）

# ruby-on-rails - 创建一个打破 has_many 关联的表单？

> ID：14545804
> 
> 赞同：0
> 
> 时间：2013-01-27T08:42:34.383
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, polymorphism

正如我之前的文章[rails has_many manager](https://stackoverflow.com/questions/14541248/rails-has-many-manager)中所提到的，我正在尝试创建一个多态成像系统，该系统将允许任何项目继承拥有封面照片和附加照片的能力。

为了完成这种成像系统，我支持了一个带有 belongs_to :imageable 的多态模型，并将其活动记录功能扩展到了一个名为 Imageable 的模块。

我的主要问题是，例如我们有一个名为 Object 的类，我如何创建一个仅针对第一个 Object 的 has_many 关联（封面）的表单，然后分别管理其他 has_many 关联？

表格看起来像..

--- 封面照片表格 ----

对象[image_attributes][0][public_id] 的上传按钮

--- 补充照片表格 ---

对象的上传按钮[image_attributes[1][public_id]

图片.rb

```
class Image < ActiveRecord::Base

  attr_accessible :public_id

  # Setup the interface that models will use
  belongs_to :imageable, :polymorphic => true
end 
```

Imageable.rb

```
module Imageable
  extend ActiveSupport::Concern

  included do
    has_many :images, :as => :imageable, :dependent => :destroy # remove this from your     model file
    accepts_nested_attributes_for :images

    validates :images, :presence => { :message => "At least one image is required" }
  end

  def cover
    cover = images.where(:cover => true).first
    if not cover
        return Image.new
    end
    return cover
  end

  def additional_images
    images.where(:cover => false).all
  end

end 
```

形式

```
<%= form.semantic_fields_for :images do |image_fields| %>

    <%= image_fields.cl_image_upload(:public_id, :crop => :limit, :width => 1000, :height => 1000, 
                      :html => {:class => "cloudinary-fileupload"}) %> 
    ... 
```

以上产生适当的路线，如 object[image_attributes][0][public_id]

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:55:54.937

我建议您通过使用从“对象”到封面 Imageable 的显式 has_one 关系以及用于附加图像的单独的 has_many 关系来对您的关系进行稍微不同的建模。

如果您想要同一集合中的所有图像，请查看这篇文章： [How to apply a scope to an association when using fields_for?](https://stackoverflow.com/questions/3057036/how-to-apply-a-scope-to-an-association-when-using-fields-for) 它解释了在设置 fields_for 帮助器时如何指定 has_many 集合中条目的“范围”或子集。它也应该与semantic_fields_for 帮助器一起使用，因为它只是包装了Rails 的fields_for 帮助器。

# intellij-idea - 如何将不打算编译的附加文件添加到项目中？

> ID：14545806
> 
> 赞同：0
> 
> 时间：2013-01-27T08:42:53.760
> 
> 标签：intellij-idea, setup-project

我想在项目中添加一些不应该编译的文件。我的意思主要是文本文件，例如注释、概念、评论等。我意识到这只有在模块级别才有可能。但这不是很方便。我宁愿将它们保持在项目级别。有没有可能？

如果没有：
我有另一个想法：创建特殊模块，将其命名为“other_stuff”，不要创建 src 目录并将文件放在那里。可以吗？当模块之一是人工的，没有源但仍然分配了 sdk 时，我担心潜在的编译问题（在没有分配 sdk 的情况下离开模块可能是不可能的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:56:46.133

在生成工件时，您可以将任何文件添加到您的工件中。此外，在模块中，您可以拥有未声明为源的文件夹，并且它们不会被编译。

# android - 调试反向的 Android 应用程序

> ID：14545807
> 
> 赞同：4
> 
> 时间：2013-01-27T08:42:55.213
> 
> 标签：android, debugging, bytecode, dalvik

假设我有一个从设备获取的恶意软件应用程序，使用 smali 或 dedexter 或 dex2jar 对其进行逆向是可以的，但我想实际调试它，而不仅仅是执行静态分析。

甚至可能吗？我不确定 dalvik VM 调试功能是如何工作的，因为他们应该知道单步执行哪一行代码属于哪一个 dalvik 操作码行，我不确定元数据在哪里，有人有经验吗？当然，我可以尝试使用 dex2jar 并创建一个 eclipse 项目，但我也在寻找一种从 dalvik 执行此操作的方法，这意味着能够单步执行 dalvik byecode 行。

找不到任何这样做的开源项目，我不确定即使 Ida Pro 允许它。

有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-14T16:24:39.093

您当然可以这样做，并且毫无问题地调试恶意软件应用程序。Ida 允许您以非常流畅和温和的方式进行操作，您只需将 apk 中的 classes.dex 打开到 IDA PRO 并配置 Davilk 调试器。但是，您也可以像使用 eclipse 编写应用程序一样执行此操作。

唯一的限制，由于应用程序清单不允许您调试它（假设最坏的情况和智能恶意软件），您需要有一个工程师设备，以便您可以连接您的 IDA Pro 或调试器，我的意思是一个设备

```
$ getprop ro.debuggable
1
$ getprop ro.secure
0 
```

如果您可以解锁设备的引导加载程序并在 initfiles 中编辑 ramdisk 设置 ro.debuggable=1 和 ro.secure=0，那么满足这些条件也非常容易。或者，如果您的设备已植根，则可以使用 setpropex 以这种方式轻松更改只读属性。

```
# ./setpropex ro.debuggable 1
# ./setpropex ro.secure 0 
```

github 到 setpropex [https://github.com/poliva/rootadb/blob/master/jni/setpropex.c](https://github.com/poliva/rootadb/blob/master/jni/setpropex.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:45:21.803

我没有尝试这种方法，但这是可能的。为此，您需要下载旧版本的[apktool 1.4.1](https://code.google.com/p/android-apktool/downloads/detail?name=apktool1.4.1.tar.bz2&can=1&q=)和[netbeans 6.8](http://netbeans.org/downloads/6.8/index.html)据称，在较新的版本上，该方法不起作用。

[您可以在此处](http://www.youtube.com/watch?v=P_Zyf7jFbx4)观看如何执行此操作的视频，也可以阅读[这篇](https://code.google.com/p/android-apktool/wiki/SmaliDebugging)描述如何使用 smali 代码执行调试的文章。

我在一个流行的俄罗斯 IT 网页上阅读了这些方法。以下是这些文章的链接：首先[是](http://habrahabr.ru/post/150825/)[扩展名](http://habrahabr.ru/post/150862/)。如果您懂俄语，有分步说明如何执行调试。如果您不这样做，谷歌翻译可以帮助您抓住这个想法。

如果您有一些不清楚的地方，我会尽力帮助您。

# printing - 后记 ghostscript 输出

> ID：14545809
> 
> 赞同：0
> 
> 时间：2013-01-27T08:43:08.637
> 
> 标签：printing, lifecycle, ghostscript, postscript

这听起来可能是一个非常愚蠢的问题，但我一直在阅读并且无法理解打印作业的生命周期。

`Program`→ `PostScript`→ `GhostScript`→ ? →`Printer`

我的疑问是，什么（如果有的话）代替了**？**?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:44:03.400

老实说，一般来说 Ghostscript 根本不在那个循环中，尽管它在很大程度上取决于您的打印机和操作系统。

一般情况下，您会将 PostScript 直接发送到内置 PostScript 解释器的打印机。如果您没有 PostScript 打印机，那么您（通常）会生成一些其他页面描述语言（例如 HP PCL）并发送到打印机。

但是（稍微扩展上面乔治所说的内容）在 Unix 系统上，您可能正在使用 CUPS（通用 Unix 打印系统），它确实使用 Ghostscript 将 PostScript 呈现为非 PostScript 打印机的光栅格式（CUPS 光栅）。CUPS 打印机驱动程序将光栅重新打包成适合特定打印机的形式。

请注意，现代版本的 CUPS 使用 PDF 作为中间格式，因此 Ghostscript 可能涉及两次，一次从 PostScript 创建 PDF，一次将 PDF 渲染为光栅（或者实际上，将其转换回 PostScript... ..)

此外，还有在 Windows 上运行的 gsprint 应用程序，它使用 Ghostscript 渲染位图，该位图被写入打印机画布，然后使用 GDI 调用使用 Windows 打印机驱动程序打印到打印机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:52:26.550

如果你想走 ghostscript 路线，问号会填上“gsprint”，它是“gsview”包的一部分。

gsview 允许使用ghostscipt 查看postcipt 文件，其中gsprint 允许使用ghostscript 将postscript 文件发送到打印机。

[http://pages.cs.wisc.edu/~ghost/redmon/index.htm](http://pages.cs.wisc.edu/~ghost/redmon/index.htm)

然后要创建一个能够将 postscript 输出发送到的 Windows 打印机，然后运行 ​​gsprint 并输出到打印机，您需要“redmon”。

[http://pages.cs.wisc.edu/~ghost/redmon/index.htm](http://pages.cs.wisc.edu/~ghost/redmon/index.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:41:20.530

您的操作系统打印机驱动程序将适合该位置。它接收来自 ghostscript 的渲染输出并将其转换为特定于打印机的格式。

# php - PHP 加载 XML 流导致 MySQL INSERT INTO 表不再工作

> ID：14545812
> 
> 赞同：0
> 
> 时间：2013-01-27T08:43:25.157
> 
> 标签：php, mysql, xml, database

我整天都在研究这个问题，我无法轻视它，所以我想问问经验丰富的专业人士！

本质上，如果我删除 XML 连接线（顶部的前四个），我的“INSERT INTO”语句工作（使用静态值），如果我不删除它们，我不会收到来自 MySQL / PHP 的错误消息......他们根本不工作。

数据库已全部设置为在所有字段上接受空值（暂时），并且它们现在都是 VARCHAR ......直到我能弄清楚发生了什么。

XML 提要似乎可以毫无问题地连接，因为页面需要很长时间才能加载，并且当我 ECHO 输出时，所有正确的值都会输入。

最需要注意的是，当我回显 INSERT INTO 命令时，然后将其复制并粘贴到 PHP My Admin 中……实际的插入行工作得非常好……就在打开 XML 时；它不起作用。

有谁知道为什么我似乎无法使用：

```
$result = mysqli_query($cxn, $query); 
```

连接到 XML 提要后？

```
$context  = stream_context_create(array('http' => array('header' => 'Accept: application/xml')));
$url = "https://thedatastream.xml";
$xml = file_get_contents($url, false, $context);
$xml = simplexml_load_string($xml);

foreach ($xml->row as $item) {

  $partNumber = strval(escape($item->PartNumber));
  $partName = strval(escape($item->Name));
  $partBrand = strval(escape($item->Manufacturer));
  $partCategory = strval(escape($item->CategoryName));
  $partGroup = strval(escape($item->Group));
  $partQty = intval(escape($item->Quantity));
  $partCostEx = floatval(escape($item->PriceCostEx));
  $partRetailEx = floatval(escape($item->PriceRetailEx));
  $partDesc = strval(escape($item->Description));
  $partHTMLDesc = strval(escape($item->HTMLDescription));
  $partImg = strval($item->image_large);
  $partPDF = strval($item->PDFURL);
  $partUpdated = strval(escape($item->StockRecordUpdated));
  $partETA = strval($item->ETADate);
  $partETAStatus = strval($item->ETAStatus);

  $query15 = "INSERT INTO `downloadTbl` (`partNumber`, `partName`, `Manufacturer`, `CategoryName`, `Group`, `Unit`, `PriceCostEx`, `PriceRetailEx`, `Description`, `HTMLDescription`, `image_large`, `PDFURL`, `StockRecordUpdated`, `ETADate`, `ETAStatus`) VALUES ('".$partNumber."', '".$partName."', '".$partBrand."', '".$partCategory."', '".$partGroup."', '".$partQty."', '".$partCostEx."', '".$partRetailEx."', '".$partDesc."', '".$partHTMLDesc."', '".$partImg."', '".$partPDF."', '".$partUpdated."', '".$partETA."', '".$partETAStatus."')";
  $result15 = mysqli_query($cxn, $query15);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:23:46.740

我有答案！

XML 文件的下载导致数据库连接超时，

我只是在 XML 文件完成下载后创建了第二个连接，并将其用于 INSERT 语句。

```
$cxn2 = mysqli_connect($host, $user, $password, $db); 
```

我认为您可以重新连接第一个数据库连接，而不是创建第二个。

感谢所有帮助解决此问题的人。

# ios - ARC：从 performSelector 调用的方法返回分配的对象，可以吗？

> ID：14545814
> 
> 赞同：2
> 
> 时间：2013-01-27T08:44:10.843
> 
> 标签：ios, objective-c, automatic-ref-counting, performselector

我不确定我是否在这里造成了泄漏，是否可以通过执行选择器将分配的 NSError 返回给调用方法？可以创建 NSMutableArray 并将其存储在我为回调获得的同一个对象中吗？然后将其传递给代表？代码运行良好，但因为我是新来的 arc，所以我害怕做错事。

（我正在使用执行选择器，因为我的选择器是动态的。仅用于我静态编写的示例）。

```
AFHTTPRequestOperation *operation = [self.client HTTPRequestOperationWithRequest:request 
   success:^(AFHTTPRequestOperation *operation, id responseObject) {

        //-----------------Callback--------------------

        #pragma clang diagnostic ignored "-Warc-performSelector-leaks"
        SEL callback = @selector(getOperationCallback:);
        NSError *error = [self performSelector:callback withObject:operation];

        //------------------Delegate Call---------------
        if(operation.delegate)
            [operation.delegate onFinish:operation.requestIdentifier error:error 
                                                    data:operation.parsedObject];

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

        //------------------Delegate Call---------------
        if(operation.delegate)
            [operation.delegate onFinish:operation.requestIdentifier error:error data:nil];

    }];

- (NSError *)getOperationCallback:(AFHTTPRequestOperation *)operation{

    NSArray *rawJson = (NSArray *)operation.jsonObject;
    NSError *error;

    NSMutableArray *array = [[NSMutableArray alloc] init];

    for(id json in rawJson){
        MyObject *object = [[MyObject alloc] initWithJson:json];
        if(object){
            [array addObject:object];
        }else{
            error = [NSError errorWithDomain:@"myErrors" code:1000 userInfo:nil];
            break;
        }
    }

    operation.parsedObject = array;

    return error;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:44:02.527

通常，在 ARC 中，如果您传递给它的选择器以、、、或`performSelector:`开头，则只会导致泄漏。`alloc``new``retain``copy``mutableCopy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:56:13.997

> 可以通过执行选择器将分配的 NSError 返回给调用方法吗？
> 
> 可以创建 NSMutableArray 并将其存储在我为回调获得的同一个对象中吗？
> 
> 然后将其传递给代表？

所有问题的答案都可以，没有任何问题。所有对象都是以自动释放方式创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T08:56:29.753

只要您调用的方法的返回值`performSelector:withObject:`是一个对象，就可以这样做。

它不会泄漏，因为 ARC 会负责释放`array`并`error`自动释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T10:55:19.497

一般来说，避开`performSelector:`. 原因是 ARC 无法帮助您。即使您认为您的应用程序有效并且您已经对其进行了测试，但当您更改某些内容时，它也可能会中断。

当然，如果您调用的选择器不以`alloc`, `new`, `copy`,`mutableCopy`等开头，那么它不会有问题。但是在某些情况下，例如使用`__attribute__((ns_returns_retained))`它会使方法可能返回保留的东西变得不明显。无论如何，拥有 ARC 无法帮助您的代码是一件坏事。

总有一种方法可以使您不必使用`performSelector:`. 例如，为什么不使用回调块？

# matlab - 如何将特定格式的数据读取到 Matlab 中的矩阵？

> ID：14545815
> 
> 赞同：1
> 
> 时间：2013-01-27T08:44:21.043
> 
> 标签：matlab

我有一个文本文件 FILE1.txt，其中记录了指定格式的数据。

```
[39645212,-79970785]35892002323232[0.0][39645212,-79970785]35892002323232[12.2] 
```

我想将此数据加载到大小为 2*4 的矩阵中。我尝试使用 dlmread 这会引发错误。我正在尝试使用 textread 获得一些东西。我怎样才能得到类似的东西：

```
39645212 -79970785 35892002323232 0.0
39645212 -79970785 35892002323232 12.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:57:40.557

```
fid = fopen('fun.txt'); %the file you want to read
A=fscanf(fid,'[%d,%d]%d[%g][%d,%d]%d[%g]',[2 inf]);
fclose(fid); 
```

有关格式化字符串的语法，请参见[fscanf](http://www.mathworks.com/help/matlab/ref/fscanf.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T08:57:41.453

让我们尝试使用[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)

```
mat = []; % I am lazy and I do not per-allocate. this is BAD.
fh = fopen( 'FILE1.txt', 'r' ); % open for read
line = fgetl( fh );
while ischar( line )
    tks = regexp( line, '\[([^,]+),([^\]]+)\]([^\[]+)\[([^\]]+)', 'tokens' );
    for ii = 1:numel(tks)
        mat( end+1 ,: ) = str2double( tks{ii} );
    end
    line = fgetl( fh );
end
fclose( fh ); % do not forget to close the handle :-) 
```

**笔记：**

1.  我假设'['，']'和'，'之间没有空格，只有数字。所以我可以`str2double`在恢复的字符串上使用。

2.  我没有预先分配`mat`- 这是不好的做法，会显着降低性能。有关如何预分配的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/14049677/matlab-preallocation-guess-a-large-matrix-or-a-small-one)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T09:47:48.287

您的问题非常具体，我的解决方案也是如此：

```
C = textread('FILE1.txt', '%s', 'delimiter', '\n');
A = reshape(str2num(regexprep([C{:}], '[\]\[,]', ' ')), 4, [])' 
```

这会将所有括号和逗号替换为空格，将所有内容转换为数字并重新调整为`A`具有 4 列的矩阵。它也应该适用于多行的输入文件。

# javascript - 骨干木偶新架构和cdnJS

> ID：14545817
> 
> 赞同：1
> 
> 时间：2013-01-27T08:44:23.733
> 
> 标签：javascript, backbone.js, marionette

我正在尝试使用 CDNJS 作为我的木偶存储库。

//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.0.0-rc2/backbone.marionette.min.js

但是我收到依赖错误：

![控制台截图](../Images/f988e3201113889dcf59251075a7f4a4.png)

我意识到该项目被分成几个部分，所以我尝试添加其他项目：

```
<script src="https://raw.github.com/marionettejs/backbone.babysitter/master/lib/backbone.babysitter.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/backbone.wreqr/0.1.0/backbone.wreqr.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.0.0-rc2/backbone.marionette.min.js"></script> 
```

没有效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:46:21.307

我刚刚将捆绑版本添加到 cdnjs：[http ://cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.0.0-rc4-bundled/backbone.marionette.min.js](http://cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.0.0-rc4-bundled/backbone.marionette.min.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:35:36.133

只需使用在一个文件中具有所有所需依赖项的捆绑版本：http: [//marionettejs.com/#download](http://marionettejs.com/#download)

# android - Android：如何仅在我更新市场上的应用程序时执行一些代码？

> ID：14545822
> 
> 赞同：0
> 
> 时间：2013-01-27T08:46:49.080
> 
> 标签：android, versioning, google-play

我需要知道当用户从市场（谷歌播放）安装我的新更新时，是否有办法在我的应用程序中运行一段代码？

每次上传应用程序的新版本时都需要运行一次代码吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T08:55:20.773

使用 SharedPreferences 存储应用程序的最新版本和当前版本，并在每次版本更改时运行一次代码。就像是：

```
 public static final String LAST_VERSION = "LAST_VERSION";
    public static final int VERSION_CODE = 4; // Same as the version code in your manifest.

    SharedPreferences prefs = getSharedPreferences("MyPrefs", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = prefs.edit();

    mContext = this;

    int last = prefs.getInt(LAST_VERSION, 0);
    if (last < VERSION_CODE) {
        //Your code
        editor.putInt(LAST_VERSION, VERSION_CODE);
        editor.commit();
    } 
```

# mysql - 如何在 MySQL 中管理多用户作业列表？

> ID：14545824
> 
> 赞同：0
> 
> 时间：2013-01-27T08:46:57.367
> 
> 标签：mysql, list

我有一个存储在 MySQL 表中的多个用户的作业列表。我目前计划在客户端应用程序中执行以下操作：

*   向 MySQL 服务器询问未分配给任何人的作业。
*   标记分配给我自己的第一份工作。

但问题是，如果 2 个用户以某种方式获得相同的“未分配”作业列表，他们都会将同一个作业标记为已分配。那么如何管理这种情况，并确保每个用户只获得一个唯一的未分配工作呢？

我试图避免使用存储过程，因为如果可能的话，我希望应用程序中的所有代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:57:34.197

抱歉，按照你喜欢的方式，你需要一个触发器来避免发送相同的列表，在查询时分配。或者你可以在查询的时候盲目接受和分配......像这样的东西：

```
 Update jobs set allocatedto=myid where status=notallocated limit 1
   select * from jobs where status=allocated and allocatedto=myid limit 1;
   select * from jobs where status=not allocated; 
```

# perl - HTML::FormHandler 验证选择

> ID：14545829
> 
> 赞同：0
> 
> 时间：2013-01-27T08:47:19.157
> 
> 标签：perl, validation, select, forms

我正在使用[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)创建一些表单，并且我希望能够通过确保提交的任何值实际上是给用户的值来验证表单上的任何选择字段。现在这就是我设置选择字段的方式：

```
has_field 'choice' => (
    type             => 'Select',
    label            => 'Choice',
    options          => [{value=>"1",label=>"One"},{value=>"2"=>label=>"Two"}],
    empty_select     => '---Choose an Option---',
    apply            => [{
                      check => ['1','2'],
                      message => 'Must be a value in the list.',
    }], 
); 
```

现在这行得通，但我想知道是否有更优雅的方式来做到这一点？由于 HTML::FormHandler 已经知道它对该字段有哪些选项，有没有办法告诉 HTML::FormHandler 验证用户的选择实际上是这些选项之一？我查看了文档，似乎无法在任何地方找到它，但对于具有预定义值的字段来说，这似乎是有意义的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:32:35.533

根据`HTML::FormHandler::Field::Select`此检查的代码已经完成。你试过了吗？

# dust.js - chunk.write 和 chunk.render 有什么区别

> ID：14545832
> 
> 赞同：1
> 
> 时间：2013-01-27T08:48:08.460
> 
> 标签：dust.js

我看到了这个，

```
chunk = chunk.write("<li>").render(bodies.block, context.push(items[i])).write("</li>\n"); 
```

在看到这段代码之前，我认为`render`类似于`flush`，并且`write`类似于“写入缓冲区”，自然会导致如下代码。

```
for loop
chunk.write("something")
end for loop

chunck.render(); 
```

但是，正如您在第一个代码中看到的那样，render 出现在写入之间。有人可以解释这两个功能之间的区别。

@贾罗：

阅读您的答案后，我尝试了以下代码：

**模板：** `You have {render} {write}`

**数据**：

```
{
  "name": "Mick",
  "render": function(c,ct,b){
       chunk.render("Rendered {~n}");
   },
   write:function(c,ct,b){
       chunk.write("Written {~n}")
   }
} 
```

**预期输出：**

```
 you have Rendered 

Written {~n} 
```

请注意`{~n}`单词“Rendered”之后的解释，但“Written”之后的 {~n} 不被解释。

但实际输出与预期输出不同。你能发布一个jsfiddle，这将有助于我理解。实际输出是一个空字符串，这也表明代码中可能存在错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:56:11.687

该`chunk.write`方法将字符串直接写入缓冲区。

另一方面，`chunk.render`解析其参数中包含的变量，然后将结果字符串写入缓冲区。

您不必在上下文中重写 write 和 render 函数。

让我告诉你它是如何工作的。

**模板**

```
Hello {name}!, how are you? 
```

Dust 编译模板以将它们转换为 javascript。编译该模板后，您将获得如下内容：

```
return chk.write("Hello ").reference(ctx.get("name"), ctx, "h").write("! how are you?"); 
```

正如您在“你好”和“你好吗？”中看到的那样，使用灰尘`chunk.write`是因为它知道应该打印什么。`{name}`但是，dust在获取上下文（JSON）之前不知道 的值。

出于这个原因，它使用`chunk.reference`，因为它将来必须解析变量名的值。Dust 将从 JSON 数据中获取 name 的值。

您可以在此处阅读有关dust.js 的更多信息：

[http://linkedin.github.com/dustjs/wiki](http://linkedin.github.com/dustjs/wiki)

您可以在此处查看工作示例并尝试您的示例：

[http://linkedin.github.com/dustjs/test/test.html](http://linkedin.github.com/dustjs/test/test.html)

# c# - 无法创建 supersocketserver AppServer 的实例

> ID：14545833
> 
> 赞同：0
> 
> 时间：2013-01-27T08:48:20.230
> 
> 标签：c#, .net, websocket

我正在尝试启动 SuperSocketServer 应用程序。但是，我似乎无法创建服务器实例。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using SuperSocket.SocketBase;
using SuperSocket.SocketBase.Config;
using SuperSocket.SocketEngine;
using SuperSocket.SocketBase.Protocol;

namespace WinnieServer
{
    class Program
    {
        AppServer W = new AppServer();

        static void Main(string[] args)
        {
            Console.Write("Starting...");

            while (true)
            {

            }
        }
    }
} 
```

我尝试了源代码中的示例。但是，它们都给出了相同的错误：

无法创建抽象类或接口“SuperSocket.SocketBase.AppServer”的实例

这是创建 SSS 实例的正确方法吗？

保重，李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:44:49.180

我有同样的问题。他们主屏幕上的下载为您提供 1.4.4 版本。如果您查看对象资源管理器，它是抽象的。如果您去他们的下载并获取二进制压缩包，您将获得 ISN'T 抽象的 1.5 版本。

# android - Android 切换图像点击列表视图内的图像

> ID：14545836
> 
> 赞同：0
> 
> 时间：2013-01-27T08:48:33.887
> 
> 标签：android, listview, toggle

我有一个`listview`图像和文本。根据条件，我为文本视图设置了两个不同的图像。设置我使用的图像

```
viewholder.btnFavItem.setImageResource(R.drawable.imagA); 
```

现在点击我想切换图像。如果最初是图像 a，我希望它变成图像 b。我使用了`onclick listner`而不是单击项目，因为我需要图像和文本视图的位置。我需要该位置，因为文本视图可以具有两个图像中的任何一个。具有图像 a 的那个，我想将其更改为图像湾。我点击的是图片而不是 tetxview。我使用了扩展基本适配器的自定义适配器。

在 onclick 我再次使用

```
viewholder.btnFavItem.setImageResource(R.drawable.imagB); 
```

在 xml 中，我使用可点击为真，可聚焦为假。

我如何切换这些图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:11:52.260

您实际上可以做的是通过 setTag() 为您的图像使用标签，并将其与您的 getTag() 进行比较：

```
字符串标签 = viewholder.btnFavItem.getTag(); 
if(tag.equals("imagA")) 
{ 
    viewholder.btnFavItem.setImageResource(R.drawable.imagB); 
    viewholder.btnFavItem.setTag("imagB"); 
} 
else if(tag.equals("imagB")) 
{ 
    viewholder.btnFavItem.setImageResource(R.drawable.imagA); 
    viewholder.btnFavItem.setTag("imagA"); 
}

```

# java - 为什么我们总是扩展 Exception 类而不是 RuntimeEexception 类？

> ID：14545839
> 
> 赞同：-1
> 
> 时间：2013-01-27T08:49:06.773
> 
> 标签：java, exception

我认为我们通常只扩展 Exception 类，因为我们不想打扰是否应该检查或取消检查异常。我对吗？

我问了另一个与此相关的问题，这里是我的问题的链接和我得到的答案[https://stackoverflow.com/questions/14169866/while-creating-my-own-exception-when-should-i-extend- exception-class-and-when-sh](https://stackoverflow.com/questions/14169866/while-creating-my-own-exception-when-should-i-extend-exception-class-and-when-sh) 但是我仍然有一个困惑，即我认为我们通常只扩展 Exception 类，因为我们不想打扰是否应该检查或取消检查异常。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:07:26.853

是的，扩展 Exception 而不是 RuntimeException 的唯一原因是检查它。

在某些特殊情况下，您确实想要抛出未经检查的异常，但大多数情况下，当您抛出异常时，您会这样做，因为您希望调用方法能够在抛出异常时恢复，因此您几乎总是希望使用检查异常。很多时候，您还使用自己的异常来包装程序中较低级别的异常，以实现更松散的耦合，即将 SQLException 转换为自定义 DatastoreException，以便您以后可以将 SQL 服务器换成另一种技术。

所以我们扩展 Exception 以使其检查，但我不必认为您应该盲目地始终扩展 Exception，而是考虑您需要的异常是否可能是 RuntimeException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:26:10.873

如果您查看当今使用的一些框架，例如 Spring，您会发现它提倡使用运行时异常。通常，当捕获某个异常对调用方没有意义时，您将使用运行时异常，因为它们对该异常无能为力。因此，如果呼叫方需要，您可以自行决定处理它。但是，如果您确实使用了 Exception 类而不是 RuntimeException 类，那么即使它们不需要，调用方也需要处理这些异常，因为按照规范，这些异常被归类为受检异常。

# java - 使用 JDBC 将用户定义的表类型传递给 SQL Server 存储过程

> ID：14545844
> 
> 赞同：3
> 
> 时间：2013-01-27T08:50:07.913
> 
> 标签：java, sql-server, stored-procedures, jdbc, user-defined-types

我们在 SQL Server 中有这个用户定义的表类型：

```
CREATE TYPE [dbo].[INITVALS_MSG] AS TABLE(
    [SDate] [decimal](8, 0) NOT NULL,
    [EDate] [decimal](8, 0) NOT NULL,
    [PlantCode] [nvarchar](10) NOT NULL,
    [LoadType] [nchar](8) NOT NULL,
    [Asset] [bigint] NOT NULL
) 
```

和一个以该表为输入的存储过程：

```
ALTER PROCEDURE [dbo].[RegisterInitAssets]
    @initmsg INITVALS_MSG ReadOnly
AS
BEGIN
    ... 
```

现在，我需要从 java 调用这个过程。有可能做这样的事情吗？JDBC 支持这个吗？

--------编辑我在java中有一个对应于该类型的类：

```
public class DBInitialAsset {
    private Integer sDate;
    private Integer eDate;
    private String plantCode;
    private String loadType;
    private Integer asset;

    public DBInitialAsset() {
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-01T16:40:50.177

是的，现在可以了。Microsoft 的 SQL Server JDBC 驱动程序 6.0 版增加了对表值参数的支持。

以下代码示例显示了如何

*   使用一个`SQLServerDataTable`对象来保存要传递的表数据，并且
*   调用该`SQLServerCallableStatement#setStructured`方法将该表传递给存储过程。

```
SQLServerDataTable sourceDataTable = new SQLServerDataTable();   
sourceDataTable.addColumnMetadata("SDate", java.sql.Types.DECIMAL);
sourceDataTable.addColumnMetadata("EDate", java.sql.Types.DECIMAL);
sourceDataTable.addColumnMetadata("PlantCode", java.sql.Types.NVARCHAR);
sourceDataTable.addColumnMetadata("LoadType", java.sql.Types.NCHAR);
sourceDataTable.addColumnMetadata("Asset", java.sql.Types.BIGINT);

// sample data
sourceDataTable.addRow(123, 234, "Plant1", "Type1", 123234);   
sourceDataTable.addRow(456, 789, "Plant2", "Type2", 456789);   

try (CallableStatement cs = conn.prepareCall("{CALL dbo.RegisterInitAssets (?)}")) {
    ((SQLServerCallableStatement) cs).setStructured(1, "dbo.INITVALS_MSG", sourceDataTable);
    boolean resultSetReturned = cs.execute();
    if (resultSetReturned) {
        try (ResultSet rs = cs.getResultSet()) {
            rs.next();
            System.out.println(rs.getInt(1));
        }
    }
} 
```

有关更多详细信息，请参阅以下 MSDN 文章：

[使用表值参数](https://msdn.microsoft.com/en-us/library/mt651781(v=sql.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:11:30.527

试试这种方式：

```
connection = dataSource.getConnection();
CallableStatement statement = connection.prepareCall("{? = call dbo.RegisterInitAssets(?)}");
statement.registerOutParameter(1, OracleTypes.CURSOR);//you can skip this if procedure won't return anything
statement.setObject(2, new InitvalsMsg()); //I hope you some kind of representation of this table in your project
statement.execute();

ResultSet set = (ResultSet) statement.getObject(1);//skip it too if its not returning anything 
```

# netty - Netty：关于“丢弃” Netty 示例的 writeindex

> ID：14545847
> 
> 赞同：0
> 
> 时间：2013-01-27T08:50:59.413
> 
> 标签：netty

这是netty源码包中的一个例子，我打印了writeindex，我测试了一个客户端，我想知道

```
public class DiscardClientHandler extends SimpleChannelUpstreamHandler {
...
@Override
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    // Send the initial messages.
    generateTraffic(e);
}
@Override
public void channelInterestChanged(ChannelHandlerContext ctx, ChannelStateEvent e) {
    // Keep sending messages whenever the current socket buffer has room.
    generateTraffic(e);
}

private void generateTraffic(ChannelStateEvent e) {
    // Keep generating traffic until the channel is unwritable.
    // A channel becomes unwritable when its internal buffer is full.
    // If you keep writing messages ignoring this property,
    // you will end up with an OutOfMemoryError.
    Channel channel = e.getChannel();
    while (channel.isWritable()) {
        ChannelBuffer m = nextMessage();
        if (m == null) {
            break;
        }
        channel.write(m);
    }
} 
```

以上是克林特代码...

```
public class DiscardServerHandler extends SimpleChannelUpstreamHandler {
    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    // Discard received data silently by doing nothing.
ChannelBuffer cb = (ChannelBuffer) e.getMessage();
    transferredBytes += cb.readableBytes();

    System.out.println("-=-=- " + transferredBytes + "-=-" + cb.writerIndex() + "-=- " + e.getMessage().toString());
    }
-=-=- 679039232-=-65536-=- BigEndianHeapChannelBuffer(ridx=0, widx=65536, cap=65536)
-=-=- 679072768-=-33536-=- BigEndianHeapChannelBuffer(ridx=0, widx=33536, cap=33536)
-=-=- 679105792-=-33024-=- BigEndianHeapChannelBuffer(ridx=0, widx=33024, cap=33024)
...
-=-=- 679298816-=-256-=- BigEndianHeapChannelBuffer(ridx=0, widx=256, cap=256)
-=-=- 679299072-=-256-=- BigEndianHeapChannelBuffer(ridx=0, widx=256, cap=256)
-=-=- 679299328-=-256-=- BigEndianHeapChannelBuffer(ridx=0, widx=256, cap=256)
...
-=-=- 679600640-=-65536-=- BigEndianHeapChannelBuffer(ridx=0, widx=65536, cap=65536)
-=-=- 679634176-=-33536-=- BigEndianHeapChannelBuffer(ridx=0, widx=33536, cap=33536)
-=-=- 679640576-=-6400-=- BigEndianHeapChannelBuffer(ridx=0, widx=6400, cap=6400)
.... 
```

我测试了一个客户，我想知道：

1.  为什么 writeIndex 有时是 256，有时是 65536？
2.  为什么最大的是65536？

private ChannelBuffer nextMessage() { return ChannelBuffers.wrappedBuffer(content);//内容大小为256 } 我希望一个客户端使用相同的通道缓冲区，一个writeindex增加序列？我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:23:35.797

这取决于读取操作能够“读取”多少数据。所以它可以一直不同。65536 是 64k，这很可能是您的应用程序的 RECV_BUF 大小，因此它是“最大值”。

# javascript - 使用强制重新加载或导航回到主页时，背景图像大小调整不起作用

> ID：14545849
> 
> 赞同：1
> 
> 时间：2013-01-27T08:51:09.803
> 
> 标签：javascript, jquery, responsive-design

在我们的网站[www.mydubaitrip.com 中](http://www.mydubaitrip.com)，我有一个脚本可以根据浏览器宽度调整背景图像的大小。我的问题是，每当我尝试按**`Ctrl`+`F5`**或导航到酒店页面并返回主页时，背景图像都无法正确调整大小并且我的布局看起来很乱。但是，如果我再次尝试按下**`F5`**它，它现在会相应地调整。我无法弄清楚是什么问题。

这是我使用的脚本。

```
 var minWidth = 1024;
var minHeight = 844;
var winRatio = new Array();
var imgReady = new Array();
var orientation = 90;
var debounceId;

var isiPad = navigator.userAgent.match(/iPad/i) != null;
if (isiPad) {
    var minWidth = 980;
}

var readyToRotate = false;
var readyToResize = true;

var miniContentWrapperHeight = 444;

// BACKGROUND TRANSITION 
var theTimer;
var currBanner = -1;
var totalBanner = 0;
var timeWaiting = parseInt(500);
var timeTextTransIn = parseInt(1000);
var timeTextTransOut = parseInt(1000);
var timeTransCross = parseInt(2000);
var timeTransInit = parseInt(0);
var timeTransInterval = parseInt(7000);

var transitioning = false;

$("#homePageMainPanel").css({ "backgroundColor": "black" });

var hybridMode = true;
if (($.browser.mozilla && $.browser.version == "5.0") ||
    $.browser.msie && $.browser.version == "9.0") {
    //hybridMode = false;
}

//$("html").css({ "overflow": "hidden" });

function updateOrientation() {

    // scroll and hide address bar for iPhone landscape
    setTimeout(function() { window.scrollTo(0, 1) }, timeWaiting);

    if (window.orientation != undefined)
        orientation = Math.abs(window.orientation);

    resizeBackground();
}

$(window).load(function() {

    resizeBackground();

    if (!($.browser.msie && $.browser.version == "6.0")) {
        var lang = $('meta[name="language"]').attr("content");
        if ((lang == "ar") || (lang == "ir")) {
            $(".carouselShadow").css('background', 'url(/media/images/fg_ar_text_bg.png) no-repeat');
        }
        else {
            $(".carouselShadow").css('background', 'url(/media/images/fg_text_bg.png) no-repeat');
        }
    }
});

$(document).ready(function() {

    if (typeof BackgroundInfo != 'undefined' && BackgroundInfo.length > 0) {
        $("#carousel").append("<img src=\"" + BackgroundInfo[0].Src + "\" alt=\"" + BackgroundInfo[0].Alt + "\" />");
    }

    if ($(window).height() > $(document).height() - $("#bottomLayer").height()) {
        $("#bottomLayer").css({ 'position': 'absolute', "top": parseInt($(window).height() - $("#bottomLayer").height()) });
        $("#carousel img").height($(window).height() - $("#bottomLayer").height());
        //alert($("#bottomLayer").offset().bottom);
        $(".bookPanel").css({ 'position': 'relative', "bottom": parseInt($(".bookPanel").height() - $("#carousel").height() + 28) });
        $(".carouselShadow").css({ 'position': 'relative', "bottom": parseInt($(".carouselShadow").height() - $("#carousel").height()+20) });

        setTimeout(function() {
            $("#bottomLayer").css({ "position": "relative", "top": parseInt($(window).height() - $("#bottomLayer").height()) });
        }, 500);

        setTimeout(function() {
        $(".bookPanel").css({ "position": "relative", "bottom": parseInt($(".bookPanel").height() - $("#carousel").height() + 28) });
        }, 500);

        setTimeout(function() {
        $(".carouselShadow").css({ "position": "relative", "bottom": parseInt($(".carouselShadow").height() - $("#carousel").height()+20) });
        }, 500);

    }

    //in case the navigation height is longer than prefixed minheight, adjust minheight=navigation height
    var homepageHeight = $("#homePageMainPanel").height() + $("#bottomLayer").height();
    if (homepageHeight > minHeight)
        minHeight = homepageHeight;

    //this is only for mobile safari on ipad/iphone
    window.onorientationchange = function() {
        window.scrollTo(0, 1);  // to prevent jumpy and blinky page transitions
        updateOrientation();
    }

    $(window)
        .resize(function() {
            if (readyToResize) {
                clearTimeout(debounceId);
                debounceId = setTimeout(resizeEvent, 500);
            }
        })
        .load(function() {
            // scroll and hide address bar for iPhone landscape
            setTimeout(function() { window.scrollTo(0, 1) }, timeWaiting);
        });

    initRotateBanner();
});

var winWidth = $(window).width();
var winHeight = $(window).height();

var winNewWidth = -1;
var winNewHeight = -1;

function resizeEvent() {
    // JL: Hack to prevent IE 7,8 to have infinite loop when window.resize event
    winNewWidth = $(window).width();
    winNewHeight = $(window).height();
    if (winWidth != winNewWidth || winHeight != winNewHeight) {
        clearTimeout(debounceId);
        resizeBackground();
    }
    winWidth = winNewWidth;
    winHeight = winNewHeight;
}

function initRotateBanner() {

    $('#carousel img').eq(0).one('load', function() {
        if (readyToRotate = true) {
            if (typeof BackgroundInfo != 'undefined' && BackgroundInfo.length > 0) {
                $.each(BackgroundInfo, function(i, v) {
                    if (i > 0) {

                        $("#carousel").append("<img src=\"" + BackgroundInfo[i].Src + "\" alt=\"" + BackgroundInfo[i].Alt + "\" />");
                    }
                });
                initBackgroundImageReady();
            }
            imgReady[0] = true;
            window.setTimeout("rotateBanner('init')", timeTransInit);
        }
        //$('#background').children("img").show();
        //$('#background').children("img").css({ 'opacity': '1' });
        resizeBackground();

    }).each(function() {
        // $(this).load();
    });

    /// assign each background text accordingly
    var index = 0;
    $('.carouselContentContainer').each(function() {
        $(this).attr('id', 'text_box_' + index);
        index++;
    });
}

function initBackgroundImageReady() {
    $('#carousel').children("img").each(function() {
        //assign each background id accordingly
        $(this).attr('id', 'img_box_' + totalBanner);

        // flag correspondingly when bg images is loaded
        imgReady[totalBanner] = false;
        $(this).one('load', function(event) {
            var id = $(this).attr('id');
            var idArr = new Array();
            idArr = id.split('_');
            var index = idArr[idArr.length - 1];

            //console.log(index + "loaded");
            imgReady[index] = true;
            resizeBackground();
        });

        //$(this).load();
        totalBanner++;
    });
}

function resizeBackground() {

    readyToResize = false;
    $('html').css({ 'overflow': 'hidden' });
    $("#carousel").children("img").each(function() {

        var oriWidth = $(this).width('');
        var oriHeight = $(this).height('');

        var bgWidth = $(window).width();
        if (bgWidth < minWidth)
            bgWidth = minWidth;

        var bgHeight = bgWidth / oriWidth * oriHeight;
        if (oriHeight < bgWrapperHeight)
            bgWrapperHeight = oriHeight;

        $(this).css({ 'position': 'absolute', 'width': bgWidth, 'height': bgHeight });

    });

    //start with window height & width
    var bgWrapperHeight = $(window).height();
    var bgWrapperWidth = $(window).width();

    // if vertical scrollbar exists, accommodate the scrollbar width (16px)
    if ($.browser.webkit == true) {
        ////$("#log").prepend(document.body.scrollHeight + " : " + document.body.clientHeight + "<br />");
        if (document.body.scrollHeight < document.body.clientHeight)
            bgWrapperWidth = $(window).width() - 16;  // accomdate the scroll bar width (16px)
        else
            bgWrapperWidth = $(window).width();
    }
    else {
        ////$("#log").prepend($(document).height() + " : " + $(window).height() + "<br />");
        if ($(window).height() < $(document).height())
            bgWrapperWidth = $(window).width() - 17;  // 
        else
            bgWrapperWidth = $(window).width();
    }

    // for screen size > min height (hp-navigation) but < min background image size, adjust to fit without scroller
    if (bgWrapperHeight + $('#bottomLayer').height() > $(window).height()) {
        bgWrapperHeight = $(window).height() - $('#bottomLayer').height();
    }

    //wrapper height should not go lower than navigation height
    if (bgWrapperHeight < $('#bookPanel').height())
        bgWrapperHeight = $('#bookPanel').height();

    //wrapper width should not go lower than min width
    if (bgWrapperWidth < minWidth)
        bgWrapperWidth = minWidth;

    // set #hp-content-wrapper height
    $('#homePageMainPanel').css({ 'height': bgWrapperHeight, 'width': bgWrapperWidth });
    $('#carousel').css({ 'height': bgWrapperHeight, 'width': bgWrapperWidth });
    $('#bottomLayer').css({ 'width': bgWrapperWidth });

    $('html').css({ 'overflow': 'auto' });

    //TODO: better way to center align bg image!
    //var nn = 0;
    // vertically middle align background
    $("#carousel").children("img").each(function() {
        // IF document height (minus footer height) is more than background image, 
        //    Expand Background Image Vertically!
    if (($(document).height() - $('#bottomLayer').height()) >= $(this).height()) {
            var newHeight = $(document).height() - $('#bottomLayer').height();
            var newWidth = Math.round((newHeight / $(this).height()) * $(this).width());

            var offsetX = ((bgWrapperWidth - newWidth) / 2);
            $(this).css({ 'position': 'absolute', 'left': offsetX, 'width': newWidth, 'height': newHeight });
            // $("#log").prepend($(document).height() + " : " + $('#footer').height() + "<br />");
            // Reset back the image top position to 0;
            $(this).css({ 'position': 'absolute', 'top': 0 });
        }
        else { //TODO: figure out what contributes to offset??
            var newWidth = $(document).width();
            var newHeight = Math.round((newWidth / $(this).width()) * $(this).height());
            var offsetX = ((bgWrapperWidth - newWidth) / 2);
            // Reset back the image left position to 0;
            $(this).css({ 'position': 'absolute', 'left': 0, 'width': newWidth, 'height': newHeight });
            // $(this).css({ 'position': 'absolute', 'left': 0, 'width': '100%', 'height': '' });

            if (bgWrapperHeight > $('#bottomLayer').position().top) {
                var offsetY = ((bgWrapperHeight - $(this).height()) / 2);
                $(this).css({ 'top': offsetY });
            }
            else {
                var offsetY = (($('#bottomLayer').position().top - $(this).height()) / 2);
                $(this).css({ 'top': offsetY });
            }
        }
    });

    //$(".bookPanel").css({ 'position': 'absolute', "top": parseInt($("#carousel").height()) });
    $('#bottomLayer').css({ 'position': 'absolute', 'top': $("#carousel").height() });
    $(".bookPanel").css({ "bottom": parseInt($(".bookPanel").height() - $("#carousel").height() + 28) });
    $(".carouselShadow").css({ 'position': 'relative', "bottom": parseInt($(".carouselShadow").height() - $("#carousel").height()) });
    //when having vertical scroll bar
    //known issue: does not work for IE screen onresize, only works onload
    if ($(window).height() != $(document).height()) {
        //$("#roomreservations").html($(window).width() + ":" + $(document).width() + ":" + minWidth);
        if ($(document).width() == minWidth && ($(window).width() != $(document).width())) {
            //show horizontal scrollbar (by default)
        }
        else {
            //otherwise hide horizontal scrollbar
            $('html').css({ 'overflow-x': 'hidden' });
        }
    }
    setTimeout('checkWidth(' + bgWrapperWidth + ')', 500);

    readyToResize = true;
}

function checkWidth(bgWrapperWidth) {
    $('#homePageMainPanel').width('100%');
    $('#bottomLayer').width('100%');
    $('#carousel').width($(document).width());

    $("#carousel").children("img").each(function() {
    if (($(document).height() - $('#bottomLayer').height()) >= $(this).height()) {
            // Resize the image height to $("#background") height, as the image should fill from the top till the footer
            $(this).css({ 'width': (($("#carousel").height() / $(this).height()) * $(this).width()), 'height': $("#carousel").height() });
        }
    });
}

function positionFooter() {
    return null;
    var footerPosition = $('#carousel').height() - $('#bottomLayer').height() + 1;
    if ($('#carousel').height() < minHeight) {
        footerPosition = minHeight - $('#carousel').height() + 1;
    }

    $('#carousel').css({ 'position': 'absolute', 'top': footerPosition });

    $('html').css({ 'overflow': 'auto' });

    $("#homePageMainPanel").css({ 'height': $('#carousel').height() });

}

var waitingTimeout;
function rotateBanner(param) {

    var nextBanner = 0;
    nextBanner = parseInt(currBanner) + 1;

    if (nextBanner >= totalBanner) { nextBanner = 0; }

    // wait until next bg image is fully loaded
    if (imgReady[nextBanner] != true) {
        waitingTimeout = window.setTimeout("rotateBanner('waiting')", timeWaiting);
        return false;
    }

    clearTimeout(waitingTimeout);

    transitionStart();

    // cross fade
    if (currBanner > -1) {

        if (hybridMode) {
            window.setTimeout("changeClass('quality','speed')", 500);
            window.setTimeout("changeClass('speed','quality')", 1500);
        }

        fadeBgImg('#text_box_' + String(currBanner), 0, 500);

        window.setTimeout("fadeBgImg('#img_box_" + String(currBanner) + "',0," + 1000 + ")", 500);
        window.setTimeout("fadeBgImg('#img_box_" + String(nextBanner) + "',1," + 1000 + ")", 500);
        window.setTimeout("fadeBgImg('#text_box_" + String(nextBanner) + "',1," + 1000 + ",true)", 1500);

        window.setTimeout("transitionComplete()", 2500);

    }
    else {

        if (hybridMode) {
            changeClass('quality', 'speed');
            window.setTimeout("changeClass('speed','quality')", 1000);
        }
        fadeBgImg("#img_box_" + String(nextBanner), 1, 1000);
        window.setTimeout("fadeBgImg('#text_box_" + String(nextBanner) + "',1," + 1000 + ",true)", 1000);

        window.setTimeout("showShadow()", 1000);

        window.setTimeout("transitionComplete()", 2000);
    }
    currBanner = nextBanner;

}

function nextPaging(nextBanner) {
    $('#carousel #paging ul li').each(function() {
        if ($(this).attr('id') == 'paging_item_' + nextBanner) {
            $(this).addClass("active");
        }
        else {
            $(this).removeClass("active");
        }
    });
}

function changeClass(from, to) {
    $("#carousel").removeClass(from).addClass(to);
}

function fadeBgImg(id, inout, duration, triggerTimer) {
    $(id).stop(true, true);

    if (inout == 1) {
        $(id).fadeIn(duration);
    }
    else {
        $(id).fadeOut(duration);
    }

    //$(id).animate({ 'opacity': inout }, duration);
    if (triggerTimer == true) {
        window.clearTimeout(theTimer);
        if (totalBanner > 1) {
            theTimer = window.setTimeout("rotateBanner()", timeTransInit + timeTransInterval);
        }
    }
}

function transitionStart() {
    transitioning = true;
}

function transitionComplete() {
    transitioning = false;
}

function Timer(callback, delay) {

    var timerId, start, remaining = delay;

    this.pause = function() {
        window.clearTimeout(timerId);
        remaining -= new Date() - start;
    };

    this.resume = function() {
        start = new Date();
        timerId = window.setTimeout(callback, remaining);
    };

    this.resume();
}

var waitingTimeout2;
function onBlur() {
    //theTimer.pause();
    clearTimeout(waitingTimeout2);
    if (transitioning) {
        waitingTimeout2 = window.setTimeout("onBlur()", timeWaiting);
        return false;
    }
    window.clearTimeout(theTimer);
};

function onFocus() {
    //theTimer.resume();
    if (totalBanner > 1) {
        window.clearTimeout(theTimer);
        theTimer = window.setTimeout("rotateBanner()", timeTransInit + timeTransInterval);
    }
};

if (/*@cc_on!@*/false) { // check for Internet Explorer
    document.onfocusin = onFocus;
    document.onfocusout = onBlur;
    readyToRotate = true;
} else {
    window.onfocus = onFocus;
    window.onblur = onBlur;
    readyToRotate = true;
}

function showShadow() {
    // Do not fade in shadow png IE8 and below
    if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
        $(".carouselShadow").delay(1000).show();
    }
    else {
        $(".carouselShadow").delay(1000).fadeIn();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:05:32.880

虽然您自己构建了这个很棒，但有人已经用[Backstretch](http://srobbin.com/jquery-plugins/backstretch/)解决了您的所有问题。

# c++ - 构造函数——关于性能？

> ID：14545855
> 
> 赞同：2
> 
> 时间：2013-01-27T08:51:52.673
> 
> 标签：c++, performance, oop, class, constructor

> **可能重复：**
> [由于构造函数初始化列表而优化](https://stackoverflow.com/questions/8386848/optimization-due-to-constructor-initializer-list)

好的，这就是我的困境：假设我们有一个类，以及几个构造函数，它们将被多次调用（每秒数亿次；所以**速度至关重要**）。

哪种方式更可取？（有什么区别吗？）

**方式A：**

```
// Prototype
class MyClass
{
    public:
        // Constructor
        MyClass (int x, int y, int z) : X(x), Y(y), Z(z) {}

        // Variables
        int X,Y,Z;
}; 
```

**方式 B：**

```
// Prototype
class MyClass
{
    public:
        // Constructor
        MyClass (int x, int y, int z);

        // Variables
        int X,Y,Z;
};

// Implementation
MyClass::MyClass(int x,int y,int z)
{
     this->X=x;
     this->Y=y;
     this->Z=z;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T08:54:52.880

您需要使用配置文件工具自行测量。使用内置类型可能没有区别（*关于构造速度*），但对于类类型，使用成员初始化器列表始终是更可取的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:04:51.000

用唐纳德·高德纳 (Donald Knuth) 的话来说：

> [过早的优化是万恶之源。](http://en.wikipedia.org/wiki/Premature_optimization#When_to_optimize)

以最易读和可维护的任何风格编写代码；我个人的偏好是在标题之外单独实现。如果它足够小可以内联，编译器将内联它；如果编译器决定它足够大而不内联（以减少代码大小并节省指令缓存空间或其他），那么编译器将不会内联它。

然后根据*实际经验数据*进行基准测试和优化。

# python - 无需调用即可检查 python 函数签名

> ID：14545857
> 
> 赞同：1
> 
> 时间：2013-01-27T08:52:27.583
> 
> 标签：python, function, signature, typechecking

我的程序从用户输入中派生出一个序列`args`和一个映射。`kwargs`我想检查该输入，然后将其转发给 python 函数`f`（根据用户输入选择）。`f`在这种情况下，和之间的函数签名不匹配`[kw]args`是*输入*错误；我必须将其与实现中可能出现的*编程*错误区分开来`f`，即使它们都可能引发`TypeError`.

所以我想在尝试函数调用之前检查签名。除了手动比较（或更高版本的python版本）`[kw]args`的结果之外，还有其他方法吗？`inspect.getargspec``.getfullargspec``.signature`

**相关问题：** [有没有办法在 Python 中检查函数的签名？](https://stackoverflow.com/questions/3534852/is-there-a-way-to-check-a-functions-signature-in-python)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:54:49.643

using 的方法`inspect`可能是最直接的方法——这不是人们通常期望在 Python 中做的事情。

（通常，允许最终用户使用任意输入调用任意函数并不是程序员想要的。）

# java - Java是抢占式的吗？

> ID：14545866
> 
> 赞同：7
> 
> 时间：2013-01-27T08:54:34.653
> 
> 标签：java, multithreading, thread-priority, preemptive

我已经看到了很多关于这个问题的答案，但我仍然不确定。

其中之一是“Java 是抢占式的”。（JVM 使用抢占式、基于优先级的调度算法（通常是循环算法）进行调度。

第二个是如果 2 个具有相同优先级的线程运行 Java 将不会抢占并且一个线程可能会饿死。

所以现在我写了一个程序来检查它，我创建了 10 个具有最低优先级的线程，然后创建了 10 个具有最高优先级的线程，结果是我在所有线程之间跳转 - 这意味着即使 2 个线程具有相同的 Java 也是抢占式的优先事项

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;

import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @
 */
public class JavaApplication1 {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        for (int i=0;i<10;i++){
            Thread t=new Thread(new Dog(i));
            t.setPriority(Thread.MIN_PRIORITY);
            t.start();
        }

        try {
            Thread.sleep(5000);
        } catch (InterruptedException ex) {
            Logger.getLogger(JavaApplication1.class.getName()).log(Level.SEVERE, null, ex);
        }
        for (int i = 0; i < 10; i++) {
            Thread g = new Thread(new Dog(i+10));
            g.setPriority(Thread.MAX_PRIORITY);
            g.start();
        }

    }
} 
```

吨

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;

/**
 *
 * @author Matan2t
 */
public class Dog implements Runnable{
    public int _x=-1;
    public Dog(int x){
        _x=x;
    }
    @Override
    public void run(){
        while(true){
            System.out.println("My Priority Is : " + _x);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T09:01:17.793

我认为这并不像两个引号中的任何一个所暗示的那样精确地指定。我只能[找到](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)：

> 每个线程都有一个优先级。具有较高优先级的线程优先于具有较低优先级的线程执行。当在某个线程中运行的代码创建一个新的 Thread 对象时，新线程的优先级最初设置为等于创建线程的优先级。

除此之外，我相信这些机制是特定于平台和 JVM 的。在我熟悉的平台上，JVM 使用 OS 线程，因此依赖于 OS 调度程序。

也就是说，假设所有应用程序线程默认具有相同的优先级，如果这些线程不能相互抢占，那将是非常不方便的。

# java - jsp:fn:split 将意外的换行符附加到字符串数组中的值的末尾

> ID：14545869
> 
> 赞同：0
> 
> 时间：2013-01-27T08:54:52.873
> 
> 标签：java, xml, jsp, jstl

基本上是`jsp:fn:split`用来构造一个数组作为传递给bean的参数。

这些字符串是从以下 XML 的警告/警告元素中解析的：

```
<?xml version="1.0" encoding="UTF-8"?>
<task><caution>fs43sd</caution>
<title>aaaa<warning>fsdfas</warning></title>
<warning>asddas</warning><sbsb><warning>fsdasds</warning></sbsb>
<aaaaa>
<bbb><caution>fsdfsd243sd</caution>
<warning>fsdfsd</warning>
</bbb>
</aaaaa>
</task> 
```

并且使用以下 JSP 构造字符串数组并将其参数化为 bean：

```
<c:set var="wids">
<x:forEach select="$output/descendant::warning" var="warning">
<x:out select="$warning" />,</x:forEach></c:set>
<c:set var="cids">
<x:forEach select="$output/descendant::caution" var="caution">
<x:out select="$caution" />,</x:forEach></c:set>
<jsp:useBean id="wc" class="main.beans.WCBean">
<jsp:setProperty name="wc" property="wids" value="${fn:split(wids, ',')}"/>
<jsp:setProperty name="wc" property="cids" value="${fn:split(cids, ',')}"/>
</jsp:useBean> 
```

当我使用以下命令打印构造的数组时`<c:forEach items="${fn:split(wids, ',')}" var="entry">${entry},</c:forEach>`：

```
fsdfas,
asddas,
fsdasds,
fsdfsd, 
```

请注意，换行符附加到每个值的末尾。任何想法？

* * *

试图删除选择之前的换行符并且它消失了。猜猜 c:set 将里面的任何非 jsp 标记视为字符串文字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:50:14.747

换行符是从 c:set 元素内的 XML 中忠实复制的。

# spring - “名为 XXX 的 Bean 必须属于 [XXX] 类型，但实际上属于 [XXX] 类型”

> ID：14545872
> 
> 赞同：0
> 
> 时间：2013-01-27T08:55:21.870
> 
> 标签：spring, integration, mybatis

我在整合spring和mybatis的时候遇到了错误输出，说的是：

> 名为 'sqlSessionFactory' 的 Bean 必须是 [org.mybatis.spring.SqlSessionFactoryBean] 类型，但实际上是 [org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] ​​类型

这是我的代码片段：

```
ApplicationContext context = new ClassPathXmlApplicationContext("spring_mybatis_integration/spring_config.xml");
    SqlSessionFactoryBean sqlSessionFactoryBean = context.getBean("sqlSessionFactory", org.mybatis.spring.SqlSessionFactoryBean.class); 
```

这是我在 xml 中的 bean 定义：

```
<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
  <property name="configLocation" value="spring_mybatis_integration/mybatis_config.xml"></property>
  <property name="dataSource" ref="dataSource"></property>
</bean> 
```

如您所见，在 java 代码和 xml 文件中，我将 bean`sqlSessionFactory`与 class相关联`org.mybatis.spring.SqlSessionFactoryBean`，为什么错误输出告诉我另一个非相对类名`org.apache.ibatis.session.defaults.DefaultSqlSessionFactory`？

非常感谢！

### 版本信息：

*   mybatis 3.1.1
*   春天 3.2.0
*   mybatis-spring 1.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:04:48.423

没有必要`SqlSessionFactoryBean`通过依赖注入进行访问，通常我们使用由工厂 Bean 创建的对象，而不是工厂 Bean 本身，在这种情况下，工厂 Bean 返回一个`DefaultSqlSessionFactory`实例。

请参阅[使用 FactoryBean 接口自定义实例化逻辑](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-extension-factorybean)

但是如果你真的想访问`FactoryBean`实例，你应该使用 & 符号`&`参见[Spring: Getting FactoryBean object 而不是 FactoryBean.getObject()](https://stackoverflow.com/questions/1655140/spring-getting-factorybean-object-instead-of-factorybean-getobject)

是的，返回工厂的工厂 Bean 的概念可能有点令人困惑，但这就是 Spring 中的工作方式。

所以它很可能`SqlSessionFactory`不是`SqlSessionFactoryFactoryBean`你想要的。

**更新：**实际上 MyBatis 甚至在[SqlSessionFactoryBean的文档中解释了这一点](http://www.mybatis.org/spring/factorybean.html)

> 请注意，SqlSessionFactoryBean 实现了 Spring 的 FactoryBean 接口（参见 Spring 文档的第 3.8 节）。这意味着 Spring 最终创建的 bean 不是 SqlSessionFactoryBean 本身，而是工厂作为对工厂的 getObject() 调用的结果返回的内容。在这种情况下，Spring 将在应用程序启动时为您构建一个 SqlSessionFactory 并将其存储为名称 sqlSessionFactory

# spring-mvc - spring MVC 扩展控制器无法解决

> ID：14545874
> 
> 赞同：1
> 
> 时间：2013-01-27T08:55:53.543
> 
> 标签：spring-mvc, controller, spring-annotations

我有以下内容：

```
@Controller
@RequestMapping("/admin")
public class AdminController extends BaseHtmlController{

    @Autowired
    protected DeviceCustomerMap deviceCustomerMap;

    @Autowired
    protected CustomerDao customerDao;

    String layout = "template/admin";

    @RequestMapping(value="/login", method = RequestMethod.GET)
    public String login(ModelMap model) {
        model.addAttribute("meta", meta);
        String view = "login";
        return view;
    }

}

public class AdminCustomerController extends AdminController{

    @RequestMapping(value="/customer/mapping", method = RequestMethod.GET)
    public String customerMapping(ModelMap model, @RequestParam(required=false) boolean refresh) throws Exception {
        if (refresh){
            deviceCustomerMap.initCustomerUrlMap();
        }
        model.addAttribute("meta", meta);
        model.addAttribute("view", "customer/mapping");
        model.addAttribute("customers", deviceCustomerMap.getCustomerMap());
        return layout;
    }
} 
```

但是，扩展控制器不解决请求，但是当它们在基本控制器中时，它们被解决得很好，我已经浏览了几个线程但找不到解决方案，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:01:23.200

除非您将方法移至类，否则在执行对`/admin/login`资源的请求而不是对资源的请求时，您是否能够获得响应？`/admin/customer/mapping``customerMapping()``AdminController`

解决方案是使用注解对`AdminCustomerController`类进行`@Controller`注解。如果没有[构造型](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-stereotype-annotations)注释（和适当的组件扫描），Spring 将不会将该类识别为 Spring bean。

# maven - 为每个项目设置不同的 Maven 镜像

> ID：14545875
> 
> 赞同：4
> 
> 时间：2013-01-27T08:55:55.610
> 
> 标签：maven, maven-3, nexus

我正在参与两个项目，这两个项目都使用私有 maven 存储库（使用 nexus）。由于他们都使用自己的 3rd 方库，我想为每个项目设置相应的镜像。幸运的是，我可以自由编辑 project1 的 pom.xml。

有什么方法可以注入一些变量或设置，以便我的 ~/.m2/settings.xml 将 mirror1 用于 project1，将 mirror2 作为默认值（用于 project2）？

好吧..我查找了许多stackoverflow问题和答案，但我是maven的新手，我无法理解并在我的项目中采用这些答案..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T09:24:48.153

不幸的是，没有办法在单个设置文件中支持多个镜像定义。

您将需要创建两个 maven 设置文件，然后参数化 maven 构建，例如`mvn <cmd> -s <path/to/settings.xml>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-11T17:43:39.820

maven 3.3.1之后，使用[project-settings-extension](https://github.com/gzm55/project-settings-maven-extension#example)`${basedir}/.mvn/settings.xml`加载项目设置，在每个项目中放入项目特定的镜像。

在`${basedir}/.mvn/extensions.xml`

```
 <extensions xmlns="http://maven.apache.org/EXTENSIONS/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/EXTENSIONS/1.0.0 http://maven.apache.org/xsd/core-extensions-1.0.0.xsd">
      <extension>
        <groupId>com.github.gzm55.maven</groupId>
        <artifactId>project-settings-extension</artifactId>
        <version>0.1.1</version>
      </extension>
    </extensions> 
```

在`${basedir}/.mvn/settings.xml`

```
<settings>
  <mirrors>
    <mirror>
      <id>id</id>
      <url>https://url-for-this-project/</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
</settings> 
```

# c# - C#中的客户端-服务器

> ID：14545877
> 
> 赞同：-2
> 
> 时间：2013-01-27T08:55:57.397
> 
> 标签：c#, client, client-server

我正在寻找编写客户端应用程序和服务器应用程序的教程/示例。我希望发送服务器命令运行，并让服务器运行它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T09:05:22.150

查看MSDN 上的[TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)（服务器）和[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)（客户端），包括示例。

至于发送命令，您可以简单地发送字符串并在另一端解析它们。但是，如果您想更进一步，请查看命令设计模式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T09:02:19.083

用关键字谷歌它：示例客户端服务器 C#

尝试这个 ：

1.  [C#中TCP客户端服务器简介](http://www.codeproject.com/Articles/1415/Introduction-to-TCP-client-server-in-C)

2.  [Simple-Client-server-Interactions-using-C#](http://www.codeproject.com/Articles/12286/Simple-Client-server-Interactions-using-C)

# android - “是图书馆”项目被红叉

> ID：14545878
> 
> 赞同：1
> 
> 时间：2013-01-27T08:56:12.093
> 
> 标签：android

我将在“SHER”应用程序中使用“库”。所以我做了“图书馆”“是图书馆”并在“SHER”应用程序中使用它。通过添加库：
![图片](../Images/392766153fbf29c463b8af157ee006c9.png)

当我回头看时，它是红叉：
![图2](../Images/5aedda8b4ebebcdc72fbe28d02390cb3.png)

我正在使用 ABS。我已经从下载的“ABS”中导入了所有应用程序。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:58:39.440

这意味着无法找到该项目，并且您没有引用任何内容。

您应该删除损坏的引用并从正确的位置再次导入

这也可能意味着您从环境中删除了引用的项目，您应该重新打开该项目或将其导入回 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:57:48.670

选择上面有红线的行，然后单击`Remove`。然后单击该`Add`按钮，并`library`从打开的对话框中选择，根据其当前位置将库项目添加到您的项目中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:11:44.990

它显示它所在的库所在的路径不存在。

您需要先删除该库。单击该库并选择`Remove`按钮。

之后单击`Add`按钮，然后选择您的相关库并将其添加到您的应用程序中。

我希望这能帮到您。

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-18T07:13:51.160

直接在 lib 文件夹中添加 google-play-services.jar 文件即可。清理项目。希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-29T09:50:15.960

我通过导入项目解决了这个问题，并将其全部引用。

[![在此处输入图像描述](../Images/56543e2f46d242b5b7e65acdcba43cb6.png)](https://i.stack.imgur.com/kpBbX.png)

（图 1：输入路径并单击刷新以显示该文件夹中的所有项目。检查项目及其引用）

[![在此处输入图像描述](../Images/a2a626a78720acbbe588f087211f81e1.png)](https://i.stack.imgur.com/HNltK.png)

（图2：参考项目路径变为相对，不再出现红叉。）

我不明白为什么单独导入参考项目不起作用。我猜唯一的区别是路径。

更新：签出这篇文章：[在 Eclipse 中，无法在另一个 android 项目中引用一个 android 库项目](https://stackoverflow.com/questions/5167273/in-eclipse-unable-to-reference-an-android-library-project-in-another-android-pr)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-02T13:42:39.953

红十字表示破坏参考以解决该问题，您应该在工作区中复制该库，然后在 Eclipse 中导入该库。

之后，您可以在项目中成功使用带有绿色刻度符号的库。

# php - PHP Regex 在应该的时候没有表现得贪婪

> ID：14545886
> 
> 赞同：0
> 
> 时间：2013-01-27T08:56:44.270
> 
> 标签：php, regex

我有一个可能非常大的提交类型输入按钮列表，这些按钮名为`delete0`,等`delete1`，`delete2`我试图用它`preg_match`来匹配数组中单击的按钮`$_POST`并梳理出附加的数字，这样我就可以从一个mysql表。

问题是我`preg_match`的行为似乎并不贪婪。例如，如果我使用 button 提交`delete13`，我将得到一个匹配项`delete1`，`delete23`我得到一个匹配项`delete2`，等等。

以下是我的模式和逻辑：

```
$pattern = "/,?(delete)(\d)+,?/";
$allpostkeys = implode(",", array_keys($_POST));
echo "<br />" . $allpostkeys . "<br />";
if (preg_match($pattern, $allpostkeys, $matches))
{
    echo "<br />You elected to delete row: " . $matches[2];
    $rowToDelete = $matches[2];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:58:14.493

小修复：

```
/,?(delete)(\d+),?/ 
```

您正在捕获正在重复的模式：`(\d)+`，因此只有最后一次重复的子字符串应该留在捕获组中（单个数字）。`(\d+)`将捕获包含**所有**重复数字的子字符串。

作为进一步的改进，第一个捕获组不是必需的：

```
/,?delete(\d)+,?/ 
```

所以你可以参考后面的`delete`数字`matches[1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:00:13.600

改变

```
$pattern = "/,?(delete)(\d)+,?/"; 
```

进入

```
$pattern = "/,?(delete)(\d+),?/"; 
```

# python - 使用选择排序对列表进行排序

> ID：14545888
> 
> 赞同：0
> 
> 时间：2013-01-27T08:56:46.813
> 
> 标签：python, algorithm, sorting, python-2.7, insertion-sort

我有一个列表列表，我想根据列表的第一个元素按升序对其进行排序。如果列表的第一个元素相同，则应根据第二个元素对其进行排序。

到目前为止，我已经能够仅根据列表的第一个元素进行排序。我使用插入排序对它们进行排序。如果第一个元素相同，如何根据第二个元素对列表进行排序？

```
def sort_list ():
    # An example of the list to be sorted
    original_list = [['Glenn', 'Stevens'],
                    ['Phil', 'Wayne'],
                    ['Peter', 'Martin'],
                    ['Phil', 'Turville'],
                    ['Chris', 'Turville']]

    sorted_list = list(original_list)

    for index in range(1, len(sorted_list)):           
        pos = index                                 
        while pos > 0 and sorted_list[pos - 1][0] > sorted_list[pos][0]:    
            sorted_list[pos-1], sorted_list[pos] = sorted_list[pos], sorted_list[pos-1]
            pos -= 1                            

    return sorted_list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:13:28.777

如果你想使用自己的函数进行排序，你可以这样做。

要检查第二个元素是否第一个相等，只需编写

```
 (sorted_list[pos - 1][0] > sorted_list[pos][0] 
or (sorted_list[pos - 1][0] == sorted_list[pos][0] 
    and sorted_list[pos - 1][1] > sorted_list[pos][1])) 
```

代替

```
sorted_list[pos - 1][0] > sorted_list[pos][0] 
```

其实你可以写得更短：

```
sorted_list[pos - 1] > sorted_list[pos] 
```

这正是您所需要的。

当python比较列表时，它从第一个[0]开始比较它们的元素：

```
>>> a=[1,2]
>>> b=[1,1]
>>> a<b
False
>>> a=[1,2]
>>> b=[1,3]
>>> a<b
True
>>> a=[1,2]
>>> b=[2,1]
>>> a<b
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T09:30:13.507

列表比较已经按照您想要的方式进行（称为词法顺序）：比较第一个项目，如果它们相等，则比较第二个和后续项目。

这意味着您可以用一行对列表进行排序：

```
original_list.sort() 
```

如果你必须实现自己的排序，你应该以一种通用的方式实现它，传入一个关键函数（如内置的排序函数）。

```
def insertion_sort(xs, key=(lambda x: x)):
    result = list(xs)
    for i in xrange(len(result)):
        for pos in xrange(i, 0, -1):
            if key(result[pos-1]) <= key(result[pos]):
                break
            result[pos-1], result[pos] = result[pos], result[pos-1]
    return result 
```

现在您可以按每个子列表的第一个元素进行排序：

```
print insertion_sort(xs, key=(lambda x: x[0])) 
```

或按词汇顺序：

```
print insertion_sort(xs) 
```

# javascript - 当我尝试将鼠标悬停在 WordPress 下拉菜单上时，它会消失

> ID：14545892
> 
> 赞同：0
> 
> 时间：2013-01-27T08:57:23.840
> 
> 标签：javascript, wordpress, drop-down-menu

在任何地方都找不到解决方案，当我指向父菜单并尝试移至下拉菜单时，下拉菜单不断消失。该网站是[www.skillraise.net](http://www.skillraise.net)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:20:37.493

将此添加到您的 /wp-content/themes/Underfire/style.css 文件中：

```
.sub-menu li:hover .sub-menu {
    left: -5px !important;
} 
```

# mips - 从 MIPS 中的寄存器向基数添加偏移量

> ID：14545896
> 
> 赞同：0
> 
> 时间：2013-01-27T08:57:46.487
> 
> 标签：mips, memory-address

如果我在 t3 中有一个数字，我可以使用 lw $s3, $t3($t0) 来获取存储在 base+offset 引用的内存中的值，其中基数在 t0 中，偏移量在 t3 到 s3 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T01:50:42.147

我相信 plaknas 给出的解决方案只对了一半，因为在 MIPS 中“创建”偏移量时必须考虑字长。

这是正确的答案，假设字长为 4 个字节：

```
sll $t3, $t3, 2
add $t0, $t0, $t3
lw $s3, 0($t0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:26:33.277

显然是做不到的。更好的方法是：

```
add $t4, $t0, $t3
lw $s3, 0($t4) 
```

谢谢 ：）

# php - 插入两个表不会插入最后一个表。pdo

> ID：14545906
> 
> 赞同：0
> 
> 时间：2013-01-27T09:00:07.763
> 
> 标签：php, mysql

我正在尝试插入两个不同的表，但最后一个表没有收到数据。没有显示错误我真的不知道这种情况可能是什么原因。是因为第二个表包含外键吗？

```
<?php

#connect to the db
require_once('db.inc.php');
?>
<?php

$date_created = date('y-m-d h:i:s a');
$username = (isset($_POST['username'])) ? trim($_POST['username']) : '';
$Previllage = (isset($_POST['Previllage'])) ? trim($_POST['Previllage']) : '';
#second tanble values 
$title = (isset($_POST['title'])) ? trim($_POST['title']) : '';
$firstname = (isset($_POST['firstname'])) ? trim($_POST['firstname']) : '';
$lastname = (isset($_POST['lastname'])) ? trim($_POST['lastname']) : '';
$client_code = (isset($_POST['client_code'])) ? trim($_POST['client_code']) : '';
#end
$query = "INSERT INTO tish_user(username,Previllage,date_created)
VALUES(:username,:Previllage,:date_created)";
$insert = $con->prepare($query);
$insert->execute(array(':username' => $username,
    ':Previllage' => $Previllage,
    'date_created' => $date_created));
# try another insert 
$query = "INSERT INTO tish_clientinfor(title,firstname,lastname,client_code,date_registered)
VALUES(:title,:firstname,:lastname,:client_code,:date_registered)";
$insert = $con->prepare($query);
$insert->execute(array(
    ':title' => $title,
    ':firstname' => $firstname,
    ':lastname' => $lastname,
    ':client_code' => $client_code,
    'date_registered' => $date_created));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:05:17.707

如果第二个查询中的“client_code”字段具有外键约束，那么我相信这就是导致查询失败的原因。您可以尝试回显第二个查询并在 phpmyadmin sql 部分或 mysql 命令提示符中运行它。

# ios - 在 iOS 上阅读 MS Office 文档

> ID：14545914
> 
> 赞同：2
> 
> 时间：2013-01-27T09:00:54.543
> 
> 标签：ios, cocoa-touch, ms-office

我的任务是创建一个 iOS Cocoa 应用程序，可以在我的应用程序中读取 .pdf、.doc、.xsl 等文档。

因为我将为我国政府创建应用程序，所以主要要求是安全性。客户希望在我的应用程序中读取所有文档，不允许在第三方应用程序中加载文档。

我知道 iOS 有一个 PDF 文件容器，但我不知道 iOS 上有任何可以读取 Microsoft Office 格式的框架。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:36:25.080

在 Cocoa 和 CocoaTouch 中有许多用于显示和编辑 Microsoft 内容的开源、免费和付费库。

但是，如果您使用的是 iOS，您可以在 UIWebView 中显示（而不是编辑）Microsoft 文档（.doc、.xls、.dot）以及 PDF 文件。

就像这样：

```
NSURL* url = [NSURL fileURLWithPath:filePath];    
NSURLRequest* request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request]; 
```

# ios - 如何在 Xcode 项目的 Prefix.pch 中编译一次？

> ID：14545919
> 
> 赞同：0
> 
> 时间：2013-01-27T09:01:24.917
> 
> 标签：ios, objective-c, xcode, precompile

`Prefix.pch`如下。

```
#ifdef __OBJC__

#import <Foundation/Foundation.h>

#define BUNDLE_NAME XXXBundle
#define LOADER_CLASS XXXBundleLoader

extern NSBundle *BUNDLE_NAME;
#undef NSLocalizedString
#define NSLocalizedString(key, comment) [BUNDLE_NAME localizedStringForKey:(key) value:@"" table:nil]

#ifdef RUN_ONCE

NSBundle *BUNDLE_NAME;

@interface LOADER_CLASS : NSObject @end

@implementation LOADER_CLASS

+ (void)load
{
  static dispatch_once_t onceToken;
  dispatch_once(&onceToken, ^{
    BUNDLE_NAME = [NSBundle bundleWithURL:[[NSBundle mainBundle] URLForResource:@"CXAFMResources" withExtension:@"bundle"]];
  });
}

@end

#endif

#endif 
```

`.pch`将被添加到每个`.m`文件的头部，所以这里的类定义会编译多次而不定义`RUN_ONCE`，但我需要的是让这`RUN_ONCE`部分只编译一次。我在我的项目文件中添加了一个编译器标志`-DRUN_ONCE`来`.m`解决这个问题。`#ifdef RUN_ONCE`我想知道是否有不需要添加标志的一步解决方案？

不，我不想要另一个`.m`文件。我想通过仅复制到另一个`.pch`.

# java - 具有数千个线程的内存设置

> ID：14545924
> 
> 赞同：11
> 
> 时间：2013-01-27T09:02:26.927
> 
> 标签：java, multithreading, memory

我在 Linux 机器（AMD 6 核，16 GB RAM）上使用 JVM（Oracle 1.7 64 位）来查看应用程序中的线程数如何影响性能。我希望测量上下文切换在哪一点会降低性能。

我创建了一个创建线程执行池的小应用程序：

```
Executors.newFixedThreadPool(numThreads) 
```

我`numThreads`每次运行程序时都会进行调整，以查看它的效果。

然后我将`numThread`作业（的实例`java.util.concurrent.Callable`）提交到池中。每个人增加一个`AtomicInteger`，做一些工作（创建一个随机整数数组并对其进行洗牌），然后睡一会儿。这个想法是模拟 Web 服务调用。最后，作业重新提交到池中，因此我始终有`numThreads`作业工作。

我正在测量吞吐量，如每分钟处理的作业数量。

有了几千个线程，我每分钟可以处理多达 400,000 个作业。超过 8000 个线程，结果开始变化很大，这表明上下文切换正在成为一个问题。但是我可以继续将线程数增加到 30,000 并且仍然获得更高的吞吐量（每分钟 420,000 到 570,000 个作业之间）。

现在的问题是：我得到了一个`java.lang.OutOfMemoryError: Unable to create new native thread`拥有超过 31,000 个工作岗位的职位。我试过设置`-Xmx6000M`这没有帮助。我试过玩，`-Xss`但这也无济于事。

我读过这`ulimit`可能很有用，但增加`ulimit -u 64000`并没有改变任何东西。

有关信息：

```
[root@apollo ant]# ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 127557
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1024
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

所以问题 #1：我必须做什么才能创建更大的线程池？

问题 #2：我应该在什么阶段看到上下文切换真正降低吞吐量并导致进程停止？

* * *

这是一些结果，在我对其进行修改以进行更多处理（如建议的那样）并开始记录平均响应时间（也如建议的那样）之后。

```
// ( (n_cores x t_request) / (t_request - t_wait) ) + 1
// 300 ms wait, 10ms work, roughly 310ms per job => ideal response time, 310ms
// ideal num threads = 1860 / 10 + 1 = 187 threads
//
// results:
//
//   100 =>  19,000 thruput,  312ms response, cpu < 50%
//   150 =>  28,500 thruput,  314ms response, cpu 50%
//   180 =>  34,000 thruput,  318ms response, cpu 60%
//   190 =>  35,800 thruput,  317ms response, cpu 65%
//   200 =>  37,800 thruput,  319ms response, cpu 70%
//   230 =>  42,900 thruput,  321ms response, cpu 80%
//   270 =>  50,000 thruput,  324ms response, cpu 80%
//   350 =>  64,000 thruput,  329ms response, cpu 90%
//   400 =>  72,000 thruput,  335ms response, cpu >90%
//   500 =>  87,500 thruput,  343ms response, cpu >95%
//   700 => 100,000 thruput,  430ms response, cpu >99%
//  1000 => 100,000 thruput,  600ms response, cpu >99%
//  2000 => 105,000 thruput, 1100ms response, cpu >99%
//  5000 => 131,000 thruput, 1600ms response, cpu >99%
// 10000 => 131,000 thruput, 2700ms response, cpu >99%,  16GB Virtual size
// 20000 => 140,000 thruput, 4000ms response, cpu >99%,  27GB Virtual size
// 30000 => 133,000 thruput, 2800ms response, cpu >99%,  37GB Virtual size
// 40000 =>       - thruput,    -ms response, cpu >99%, >39GB Virtual size => java.lang.OutOfMemoryError: unable to create new native thread 
```

我将它们解释为：

1) 即使应用程序在 96.7% 的时间内处于休眠状态，仍然需要完成大量线程切换 2) 上下文切换是可测量的，并显示在响应时间中。

有趣的是，在调整应用程序时，您可能会选择可接受的响应时间，例如 400 毫秒，并增加线程数，直到获得该响应时间，在这种情况下，这将使应用程序处理大约 95,000 个请求分钟。

人们常说，理想的线程数接近核心数。在具有等待时间（阻塞线程，例如等待数据库或 Web 服务响应）的应用程序中，计算需要考虑到这一点（参见上面的公式）。但是，当您查看结果或调整到特定响应时间时，即使是理论上的理想也不是实际理想。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T10:46:57.757

> 我得到一个 java.lang.OutOfMemoryError: Unable to create new native thread with more than about 31,000 jobs。我试过设置 -Xmx6000M 这没有帮助。我尝试使用 -Xss 但这也无济于事。

-Xmx 设置无济于事，因为线程堆栈不是从堆中分配的。

正在发生的事情是 JVM 正在向操作系统请求一个内存段（在堆之外！）来保存堆栈，而操作系统正在*拒绝*该请求。最可能的原因是 ulimit 或操作系统内存资源问题：

*   “数据段大小”ulimit 是无限的，所以这不应该是问题。

*   这样就剩下内存资源了。一次 1Mb 的 30,000 个线程约为 30Gb，这比您拥有的物理内存多得多。我的猜测是 30Gb 的虚拟内存有足够的交换空间，但是您将边界推得太远了。

-Xss 设置应该会有所帮助，但您需要使请求的堆栈大小小于默认大小`1m`。此外，还有一个硬性的最小尺寸。

> 问题 #1：我必须做什么才能创建更大的线程池？

将默认堆栈大小减小到当前值以下，或增加可用虚拟内存量。（不建议使用后者，因为看起来您已经严重过度分配了。）

> 问题 #2：我应该在什么阶段看到上下文切换真正降低吞吐量并导致进程停止？

这是无法预测的。这将高度依赖于线程实际在做什么。事实上，我不认为你的基准测试会给你答案，告诉你一个真正的多线程应用程序将如何表现。

* * *

Oracle 网站关于线程堆栈空间的主题是[这样说的：](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom)

> 在 Java SE 6 中，Sparc 的默认值在 32 位 VM 中为 512k，在 64 位 VM 中为 1024k。在 x86 Solaris/Linux 上，32 位 VM 中为 320k，64 位 VM 中为 1024k。
> 
> 在 Windows 上，默认线程堆栈大小是从二进制文件 (java.exe) 中读取的。从 Java SE 6 开始，该值在 32 位 VM 中为 320k，在 64 位 VM 中为 1024k。
> 
> 您可以通过运行 -Xss 选项来减小堆栈大小。例如：

```
 java -server -Xss64k 
```

> 请注意，在某些版本的 Windows 上，操作系统可能会使用非常粗略的粒度对线程堆栈大小进行四舍五入。如果请求的大小比默认大小小 1K 或更多，则堆栈大小向上舍入到默认值；否则，堆栈大小将向上舍入为 1 MB 的倍数。
> 
> 64k 是每个线程允许的最小堆栈空间量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T09:26:08.627

这里有一些要点/方法，我会遵循：

1.  看看上下文切换中使用的数据。尝试使用一些大的 List 或 Map 而不是布尔值或字符串。

2.  不要在开始时尝试创建固定池，而是尝试使用缓存池。

3.  与其让线程在完成一些小工作后消失，不如让它们活着并一次又一次地回来做小块的工作。

4.  尽量保持线程的处理时间更长。

# c - Initializing mixed types (constants) in a void* structure - is it possible?

> ID：14545925
> 
> 赞同：0
> 
> 时间：2013-01-27T09:02:27.430
> 
> 标签：c, struct, void-pointers

When I initialize a single element into a void structure, it works fine:

```
void* CMD_ARRAY[] = 
{
  {"+++\r"},
  {"+++\r"},
  {"+++\r"},
}; 
```

However, when I try to add more elements to the structure, i.e.:

```
void* CMD_ARRAY[] = 
{
  {"+++\r" ,  4,  1300},
  {"+++\r" ,  4,  1300},
  {"+++\r" ,  4,  1300},
}; 
```

This results in an error:

> expected a "}"

What is the difference between a single element as in the 1st example, and a structure of a structures (which are also considered as elements)?

How can I achieve initialization of this void structure with mixed types?

Update: So I understand that the compiler doesn't know how to handle different types in the same elements. Is there a way to define these types on the fly (i.e. using casting) without actually defining the structure outside this definition (i.e. using an array of strucutres)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:11:17.937

The use of curly brackets as initializer implies the initialization of a structured information. You are initializing a void-pointer array. So the compiler expects a set of pointers he can store in this array. Your second variant is not a pointer anymore it's a approximately 12 bytes long. There is not enough room for this in a single void-pointer array cell.

Moreover I get the feeling that something bad is rising at the horizon while looking at this code. What exactly are you trying to do?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:12:52.257

You have an array of pointers not an array of structures. A literal string initialiser is a single pointer that can be assigned to a void pointer, to use a structured initialiser, it has to be assigned to a matching structure - otherwise how would the compiler know whet to place the data in memory?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:00:21.000

I would suggest that the compiler can't guess certain details regarding your implicit struct declarations. For example, how is your compiler to guess that I wanted `y` in the example below to be a `short`?

```
struct foo { char *x; short y; unsigned int z; };

void* CMD_ARRAY[] = 
{
  &(struct foo){"+++\r" ,  4,  1300},
  &(struct foo){"+++\r" ,  4,  1300},
  &(struct foo){"+++\r" ,  4,  1300},
}; 
```

This could be expanded at the cost of legibility to:

```
void* CMD_ARRAY[] = 
{
  &(struct { char *x; short y; unsigned int z; }){"+++\r" ,  4,  1300},
  &(struct { char *x; short y; unsigned int z; }){"+++\r" ,  4,  1300},
  &(struct { char *x; short y; unsigned int z; }){"+++\r" ,  4,  1300},
}; 
```

edit: In addition to the cost of legibility, consider what will happen if you decide to change your struct at the higher level. You'll have to do plenty of finding/replacing in the lower level. Does this sound sweet to you?

# php - 在 PHP 中删除带有循环复选框的记录

> ID：14545930
> 
> 赞同：0
> 
> 时间：2013-01-27T09:03:47.563
> 
> 标签：php

下面是我试图通过复选框选择删除数据库记录的代码的一部分。循环是我与复选框一起获取数据的方式。(code 1:) 和 (code 2:) 是我试图删除所选记录的地方。

正如您在循环中看到的那样，数据库中有 3 个字段，当删除记录时，代码 2 仅检查与第一条记录的匹配，即`bname`. 但是我的问题是我需要在从系统中删除之前检查所有三个数据库字段是否匹配。进一步解释问题；

```
bname | bvariant | bsku
-----------------------
apple |red       | 20g
apple |green     | 30g 
```

当前代码查看与“apple”匹配并删除所有两个数据行。但是，如果用户选择了第 1 行，那么我需要调整代码以检查所有三个字段与数据库的匹配，在这种情况下，只会删除 apple、red、20g。我已添加`AND bvariant='$wec2' AND bsku='$wec3'"`到代码 2，但似乎它不起作用。请帮忙。

**代码 1：**

```
while ($reK = mysqli_fetch_array($runBrands))
{
$wec = $reK['bname']; $wec2 = $reK['bvariant']; $wec3 = $reK['bsku'];
    echo "<tr class='brndTab'>";
    echo "<td class='brndTab'>".$reK["bname"]."</td>";
    echo "<td class='brndTab'>".$reK["bvariant"]."</td>";
    echo "<td class='brndTab1'>".$reK["bsku"]."</td>";
    echo "<td class='brc'><input type='checkbox' name='delz[]' value='$wec' ></td>";
    echo "</tr>";
} 
```

**代码 2：**

```
if(isset($_POST['delz'])) 
{
foreach($_POST['delz'] as $we)
  {
$Mo = mysqli_query($db,"DELETE FROM brands WHERE bname ='$we' AND bvariant='$wec2' AND     bsku='$wec3'");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:32:47.923

您的变量 $wec2 和 $wec3 未在代码 2 中初始化。您必须将它们作为隐藏值提交给代码 1。

但正如之前的评论者已经建议的那样。最好的方法是使用主键。

# php - 错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。为 Facebook 使用 PHP SDK

> ID：14545932
> 
> 赞同：3
> 
> 时间：2013-01-27T09:04:08.080
> 
> 标签：php, facebook

> **可能重复：**
> [PHP-SDK 重定向过多](https://stackoverflow.com/questions/13065649/php-sdk-too-many-redirects)

我正在尝试将 facebook 登录会话保存到数据库并使用 localhost 作为主机（使用 PHP SDK for facebook）。下面是我的代码。

```
<?php

require_once 'facebook/facebook.php';
require 'config/fbconfig.php';
require 'config/functions.php';

$facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            ));

$user = $facebook->getUser();

if ($user) 
{
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }

    if (!empty($user_profile )) {
        # User info ok? Let's print it (Here we will be adding the login and     registering routines)

        $username = $user_profile['name'];
         $uid = $user_profile['id'];
           $email = $user_profile['email'];
            $user = new User();
        $userdata = $user->checkUser($uid, 'facebook',     $username,$email,$twitter_otoken,$twitter_otoken_secret);
        if(!empty($userdata)){
            session_start();
            $_SESSION['id'] = $userdata['id'];
    $_SESSION['oauth_id'] = $uid;

            $_SESSION['username'] = $userdata['username'];
    $_SESSION['email'] = $email;
            $_SESSION['oauth_provider'] = $userdata['oauth_provider'];
            header("Location: home.php");
        }
    } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");
    }
 } else {
    # There's no active session, let's generate one
    $login_url = $facebook->getLoginUrl(array( 'scope' => 'email'));
            header("Location: " . $login_url);
 }
?> 
```

home.php 如下所示..

```
<?php

//Always place this code at the top of the Page
session_start();
if (!isset($_SESSION['id'])) {
    // Redirection to login page twitter or facebook
    header("location: index.php");
}
else
{
echo '<h1>Welcome</h1>';
echo 'id : ' . $_SESSION['id'];
echo '<br/>Name : ' . $_SESSION['username'];
echo '<br/>Email : ' . $_SESSION['email'];
echo '<br/>You are login with : ' . $_SESSION['oauth_provider'];
echo '<br/>Logout from <a href="logout.php?logout">' . $_SESSION['oauth_provider'] .     '</a>';
}
?> 
```

但是浏览器（chrome）抛出错误

```
 Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects. 
```

我已尝试清除所有 cookie 但无济于事。让我了解如何处理此错误，或者是否需要更改代码。我也尝试在论坛中查找错误，但它们并不是那么解释，因为它可能是这个领域的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:37:50.877

该错误意味着存在无限循环的重定向。

似乎 index.php 正在重定向到 home.php，然后 home.php 在无限循环中重定向回 index.php..

在您的 index.php 和 home.php 中，检查`$_SESSION['id']`each 之前`if()`和内部 each的值`if()`，因为它是破坏循环的主要变量。

# asp.net - ASP.NET Commercial Uber-Grids 2013 的开源替代方案

> ID：14545933
> 
> 赞同：0
> 
> 时间：2013-01-27T09:04:09.907
> 
> 标签：asp.net

我正在寻找一个开源替代品

[http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx)

[http://www.devexpress.com/Products/NET/Controls/ASP/Grid/](http://www.devexpress.com/Products/NET/Controls/ASP/Grid/)

我的雇主想要类似水平的东西，但不愿意为此付费。我需要可以通过数据表轻松集成到 asp.net 中的东西。

在彻底搜索互联网并找到至少可以说是可怕的所有替代方案后，我在这里问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:02:09.223

试试 slickgrid，这是一个基于 javascript/jQuery 的网格，可以在 ASP.NET 中使用 - 高性能和可定制的。请浏览 github 中的示例。您还可以在 SO 中得到很好的支持。

[https://github.com/mleibman/SlickGrid](https://github.com/mleibman/SlickGrid)

几个月前，我在我的项目中用 Slickgrid 替换了 Telerik RadGrid（出于性能原因），并获得了很好的结果。

# javascript - 敲除可观察字段未在输入值更改时更新

> ID：14545935
> 
> 赞同：29
> 
> 时间：2013-01-27T09:04:31.977
> 
> 标签：javascript, data-binding, knockout.js

我注意到我无法让一些 Knockout 现场教程工作或应该演示可观察数据绑定的基本示例。

这是我的代码：

```
<!DOCTYPE html> 
<html lang="en">

<html>
    <head>
        <meta charset="utf-8" />
        <title>Testing</title>
        <script type="text/javascript" src="knockout.js"></script>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            function TestViewModel() {
                this.Name = ko.observable("Testing");
            }

            $(function() {
                ko.applyBindings(new TestViewModel());
            });
        </script>
    </head>

    <body>
        <h1>Testing Knockout.js</h1>
        <div>
            <div>
                <span data-bind="text: Name"></span>
            </div>
            <div>
                <input type="text" data-bind="value: Name"></input>
            </div>
        </div>
    </body>
</html> 
```

因此，当我在 Google Chrome 或 Firefox 中打开它时，我希望 span 标签的值会随着我更改输入中的文本而改变，但事实并非如此。有人可以解释为什么上述方法不起作用吗？（此代码几乎是从网站上的文档中复制的）

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-27T09:20:41.933

从 KO 版本 3.2 开始（正如[Salvador Dali 的回答所](https://stackoverflow.com/a/25493176/872395)指出的），您应该使用[`textinput`绑定](http://knockoutjs.com/documentation/textinput-binding.html)进行即时更新：

```
<input data-bind="textInput: userName" /> 
```

如果您使用的是早期的 Knockout 版本和`value`绑定，那么您应该进行以下更改：

默认情况下，敲除会在更改事件上更新可观察对象的值（例如，当文本框的焦点丢失时）。

如果您想要即时更新，您需要指定`valueUpdate`可能事件所在的选项：`keyup`, `keypress`，请参阅[文档](http://knockoutjs.com/documentation/value-binding.html)`afterkeydown`中的更多信息。

所以改变你的`value`绑定：

```
<input type="text" data-bind="value: Name, valueUpdate: 'afterkeydown'"></input> 
```

演示[JSFiddle](http://jsfiddle.net/FHGvy/1/)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-08-25T19:40:12.300

接受的答案是正确的，但在新的 KO 版本 3.2 中，他们添加了[textinput 绑定。](http://knockoutjs.com/documentation/textinput-binding.html)`value`因此，您可以使用以下方式代替绑定`textInput`：

```
<input data-bind="textInput: userName" /> 
```

它做了两件重要的事情：

*   立即更新
*   处理剪切，拖动，自动完成的浏览器差异......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-14T20:43:44.847

对于那些在这里徘徊的人（像我一样）想知道为什么它不起作用。请注意您额外的“（）”用法。这让我遇到了这样的嵌套可观察对象：

坏的：

```
<input data-bind="textInput: subItem().userName()" /> 
```

好的：

```
<input data-bind="textInput: subItem().userName" /> 
```

# javascript - 如何在 AngularJS 中查看 Scope 的所有更改？

> ID：14545936
> 
> 赞同：14
> 
> 时间：2013-01-27T09:04:36.723
> 
> 标签：javascript, angularjs

Angular 的 $watch 函数允许在指定属性更改时触发事件，如下所示。*当范围发生任何*变化时，是否有类似的方法来监听事件？

```
// works
$scope.$watch("someval", function() { }, true);
$scope.$watch(function(scope){ return scope.someval; }, function() { }, true);

// doesn't work
$scope.$watch("this", function() { }, true);
$scope.$watch(function(scope){ return scope; }, function() { }, true); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-27T22:03:28.723

我相信您无法观察到`$scope`（除了使用@ValentynShybanov 的建议）的变化。您可以做的最接近的事情是观察摘要调用：

```
$scope.$watch(function() { 
    console.log("digest called"); 
}); 
```

每次`$digest`在作用域上调用 a 时都会调用上述函数，即使作用域的属性**没有更改也是如此。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-26T18:26:09.860

这并不简单，因为范围是一个普通的对象。那是您可以订阅所有事件的 Backbone，但为此您的模型应该扩展*专有*接口 - `Backbone.Model`. Angular 在其经典外观中摒弃了观察者模式。这是一个不同寻常的设计决定。基本上有一个循环，Angular 评估被观察的表达式，当它检测到与前一次迭代的差异时，它会通知观察者。一种非常有趣的方法，可能是观察者模式的唯一替代方案（除了可能还不常见的*反应式编程）。*

我建议使用一个函数作为监视表达式，它返回范围的哈希值。不幸的是，范围在某处包含循环引用，因此快速解决方案（例如`JSON.stringify($scope)`不起作用）。我写了快速而肮脏的概念证明。[http://jsfiddle.net/ADukg/2544](http://jsfiddle.net/ADukg/2544)。您在其中输入的任何文本字段都会打印到控制台。字符串哈希函数取自此处[Generate a Hash from string in Javascript/jQuery](https://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript-jquery)。

```
function MyCtrl($scope) {
    $scope.$watch(
        function($scope) {return hash($scope);},
        function() {console.log("changed");}
    );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-27T21:08:34.850

我自己遇到了这个问题，我用类似于@ValentynShybanov 的评论解决了这个问题，但并不完全相同。**我的解决方案不需要您按照评论中的说明为所有属性添加前缀**。

看到一个[工作 plunkr](http://plnkr.co/edit/hBBGxK1x3JtipvyFYgtr?p=preview)

```
var entireScope = {};
  for ( var i in $scope ){
    if ( i[0] !== '$' && i !== 'this' && i !== 'constructor'){
      console.log(i);
      entireScope[i] = $scope[i];
    }
  }

  $scope.entireScope = entireScope;

  $scope.$watch('entireScope', function( newValue, oldValue ){
   $log.info('entireScope has changed',newValue, oldValue);
  }, true); 
```

如您所见，解决方案完全相同，但实际上它向范围添加了另一个属性，而不是替换您已有的结构。这个新属性代表整个范围（因此得名），您可以观看它。

我写的循环可能太通用了，你可以用自定义的初始化来替换它。例如：

```
$scope.entireScope = { 'someVal' : $scope.someVal } 
```

这个解决方案可以满足您的需求，让您无需重构代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-04T18:48:04.453

一个简单的解决方案可能是您应该只检查范围的变量，但它可能是对象。

**应用程序.js**

```
app.controller('MainController', ['$scope', function($scope){
   $scope.watchable = {
       'param1':'',
       'param2':''
   };
   $scope.update = -1;
   $scope.$watch('watchable', function(scope){
       scope.update++;
   }, true);

}); 
```

**索引.html**

```
<div ng-controller="MainController">
    <input type='text' ng-model="watchable.param1">
    <input type='text' ng-model="watchable.param2">
    <p>param1:{{watchable.param1}}, param2:{{watchable.param2}}</p>
    <p>update:{{update}}
</div> 
```

这里的技巧是在 $watch 函数的第三个参数中传递 'true' ，这将执行 angular.equal 检查，这是按值检查而不是简单的引用检查。请让我知道它是否正确。

# c# - Linq 有条件的地方不工作

> ID：14545939
> 
> 赞同：0
> 
> 时间：2013-01-27T09:05:07.377
> 
> 标签：c#, linq, linq-to-entities

以下不是在 SQL 中生成 where 子句。

这些`search.Where`部分在我调试时正在执行，但在我查看 SQL 分析器时没有出现。

```
using (var db = new CERTContext())
{
    var search = db.Project.Include("ValueStream").Include("Function").AsQueryable();
    if (!lookForDate)
    {
        search.Where(p => p.ProjectName.Contains(searchText) ||
                          p.ProjectDescription.Contains(searchText) ||
                          p.EquipmentName.Contains(searchText) ||
                          p.ValueStream.Description.Contains(searchText) || 
                          p.ValueStream.Description.Contains(searchText) ||
                          p.TrackingId.Contains(searchText) ||
                          p.ENumber.Contains(searchText) ||
                          p.ShamrockNumber.Contains(searchText));

        //.Take(10)
        //.OrderByDescending(p => p.ProjectID);
        //.ToList();
    }
    else
    {// Search on date
        search.Where(p =>
        (System.Data.Objects.EntityFunctions.TruncateTime(p.StartDate) == searchDate));
        //.Take(10)
        //.OrderByDescending(p => p.ProjectID);
        //.ToList();
    }                              
    if (showDeleted != true)
    {
        search.Where(p => p.Deleted == false);
    }
    pList = search.Take(10).OrderByDescending(p => p.ProjectID).ToList();

}// using (var db = new CERTContext()) 
```

这就是我得到的。它有 select top 10、orderby 和 joins 但没有位置。

```
SELECT 
[Limit1].[ProjectID] AS [ProjectID], 
[Limit1].[FunctionId] AS [FunctionId], 
[Limit1].[ValueStreamId] AS [ValueStreamId], 
[Limit1].[TrackingId] AS [TrackingId], 
[Limit1].[VersionNo] AS [VersionNo], 
[Limit1].[VersionDate] AS [VersionDate], 
[Limit1].[ProjectName] AS [ProjectName], 
[Limit1].[Deleted] AS [Deleted], 
[Limit1].[Closed] AS [Closed], 
[Limit1].[ProjectLead] AS [ProjectLead], 
[Limit1].[ProjectDescription] AS [ProjectDescription], 
[Limit1].[StartDate] AS [StartDate], 
[Limit1].[CurrentPhase] AS [CurrentPhase], 
[Limit1].[ENumber] AS [ENumber], 
[Limit1].[ShamrockNumber] AS [ShamrockNumber], 
[Limit1].[EquipmentName] AS [EquipmentName], 
[Limit1].[ConceptExpectedEndDate] AS [ConceptExpectedEndDate], 
[Limit1].[PlanningExpectedEndDate] AS [PlanningExpectedEndDate], 
[Limit1].[DesignExpectedEndDate] AS [DesignExpectedEndDate], 
[Limit1].[InstallExpectedEndDate] AS [InstallExpectedEndDate], 
[Limit1].[DeployExpectedEndDate] AS [DeployExpectedEndDate], 
[Limit1].[ConceptActualEndDate] AS [ConceptActualEndDate], 
[Limit1].[PlanningActualEndDate] AS [PlanningActualEndDate], 
[Limit1].[DesignActualEndDate] AS [DesignActualEndDate], 
[Limit1].[InstallActualEndDate] AS [InstallActualEndDate], 
[Limit1].[DeployActualEndDate] AS [DeployActualEndDate], 
[Limit1].[ScalingQ1Text] AS [ScalingQ1Text], 
[Limit1].[ScalingQ2Text] AS [ScalingQ2Text], 
[Limit1].[ScalingQ3Text] AS [ScalingQ3Text], 
[Limit1].[ScalingQ1Answer] AS [ScalingQ1Answer], 
[Limit1].[ScalingQ2Answer] AS [ScalingQ2Answer], 
[Limit1].[ScalingQ3Answer] AS [ScalingQ3Answer], 
[Limit1].[ScalingNotes] AS [ScalingNotes], 
[Limit1].[CreateUserName] AS [CreateUserName], 
[Limit1].[LastUserName] AS [LastUserName], 
[Limit1].[CreatedDate] AS [CreatedDate], 
[Limit1].[EditedDate] AS [EditedDate], 
[Extent2].[ValueStreamId] AS [ValueStreamId1], 
[Extent2].[Description] AS [Description], 
[Extent3].[FunctionID] AS [FunctionId1], 
[Extent3].[Description] AS [Description1]
FROM    (SELECT TOP (10) [c].[ProjectID] AS [ProjectID], [c].[FunctionId] AS [FunctionId], [c].[ValueStreamId] AS [ValueStreamId], [c].[TrackingId] AS [TrackingId], [c].[VersionNo] AS [VersionNo], [c].[VersionDate] AS [VersionDate], [c].[ProjectName] AS [ProjectName], [c].[Deleted] AS [Deleted], [c].[Closed] AS [Closed], [c].[ProjectLead] AS [ProjectLead], [c].[ProjectDescription] AS [ProjectDescription], [c].[StartDate] AS [StartDate], [c].[CurrentPhase] AS [CurrentPhase], [c].[ENumber] AS [ENumber], [c].[ShamrockNumber] AS [ShamrockNumber], [c].[EquipmentName] AS [EquipmentName], [c].[ConceptExpectedEndDate] AS [ConceptExpectedEndDate], [c].[PlanningExpectedEndDate] AS [PlanningExpectedEndDate], [c].[DesignExpectedEndDate] AS [DesignExpectedEndDate], [c].[InstallExpectedEndDate] AS [InstallExpectedEndDate], [c].[DeployExpectedEndDate] AS [DeployExpectedEndDate], [c].[ConceptActualEndDate] AS [ConceptActualEndDate], [c].[PlanningActualEndDate] AS [PlanningActualEndDate], [c].[DesignActualEndDate] AS [DesignActualEndDate], [c].[InstallActualEndDate] AS [InstallActualEndDate], [c].[DeployActualEndDate] AS [DeployActualEndDate], [c].[ScalingQ1Text] AS [ScalingQ1Text], [c].[ScalingQ2Text] AS [ScalingQ2Text], [c].[ScalingQ3Text] AS [ScalingQ3Text], [c].[ScalingQ1Answer] AS [ScalingQ1Answer], [c].[ScalingQ2Answer] AS [ScalingQ2Answer], [c].[ScalingQ3Answer] AS [ScalingQ3Answer], [c].[ScalingNotes] AS [ScalingNotes], [c].[CreateUserName] AS [CreateUserName], [c].[LastUserName] AS [LastUserName], [c].[CreatedDate] AS [CreatedDate], [c].[EditedDate] AS [EditedDate]
    FROM [dbo].[Projects] AS [c] ) AS [Limit1]
LEFT OUTER JOIN [dbo].[ValueStreams] AS [Extent2] ON [Limit1].[ValueStreamId] = [Extent2].[ValueStreamId]
LEFT OUTER JOIN [dbo].[Functions] AS [Extent3] ON [Limit1].[FunctionId] = [Extent3].[FunctionID]
ORDER BY [Limit1].[ProjectID] DESC 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T09:07:09.953

只是调用`Where`不会改变你调用它的查询的任何内容。相反，它会返回一个*新*查询……您当前正在忽略它。你要：

```
search = search.Where(/* code as before */); 
```

编辑：然后您还需要将声明更改为：

```
IQueryable<Project> search = db.Project.(code as before) 
```

我希望使用`AsQueryable()`, 这不是必需的 - 但显然它是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T09:07:50.057

把结果search.Where返回搜索这样的：

```
search = search.Where( // same with your code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:27:16.163

您从查询中返回的结果丢失了。您需要将其分配回搜索变量。

# google-chrome-extension - 避免重复的 Developer Tool 面板实例

> ID：14545942
> 
> 赞同：2
> 
> 时间：2013-01-27T09:05:28.550
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在尝试创建一个 devtools 扩展，从添加一个面板开始。我只是`chrome.devtools.panels.create`从加载到我的扩展程序页面上的外部脚本调用。但是当我为我的扩展选择工具栏按钮时，会创建一个新的面板实例，并在原始面板的右侧显示一个相应的按钮。选择该新按钮实例会重复该行为。

我遵循了[Google 的示例](https://developer.chrome.com/stable/extensions/devtools.panels.html)和[详细的博客文章](http://www.raymondcamden.com/index.cfm/2012/7/15/How-to-add-a-panel-to-Chrome-Dev-Tools)，但在它们中我都没有看到任何应该从事件侦听器调用它的地方。我也找不到任何方法来检测面板的其他实例，所以我不确定如何避免这个问题。我不确定我是否可能遇到了新的错误，或者我在这里忽略了一些基本的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:03:04.563

我遇到过同样的问题。我的问题是我有一个调用该`panels.create()`方法的循环。

## 诱导循环

我的`manifest.json`文件显示：

```
"devtools_page": "devtools.html" 
```

我的`devtools.html`include `devtools.js`，它是这样调用`panels.create()`的：

```
chrome.devtools.panels.create('Title', 'iconfile', 'devtools.html'); 
```

这是问题所在，因为我的`panels.create()`方法是创建一个新面板，其中包含将循环 `devtools.html`调用的面板。`panels.create()`

## 修复循环

此方法应调用一个单独的`html`文件，该文件将包含所有实际面板内容，例如：

```
chrome.devtools.panels.create('Title', 'iconfile', 'panel.html'); 
```

`panel.html`不能包含`devtools.js`，否则您将再次遇到相同的问题。

我希望这有帮助。

# ruby-on-rails - Rails 中的临时表？

> ID：14545944
> 
> 赞同：0
> 
> 时间：2013-01-27T09:06:13.243
> 
> 标签：ruby-on-rails, jquery-datatables

我有一张放着产品的桌子。产品与产品评论相关联。每个产品的“等级”存储在产品表中。使用贝叶斯平均策略每天两次计算每种产品的排名 - 通过 cron 作业。我在[ajax 加载数据表中显示产品](http://www.datatables.net/examples/data_sources/ajax.html)

这是我的问题...评论与特定的用户类型相关联。有数百种用户类型，我想让用户要么显示全球产品排名，要么过滤产品评论以排除不同用户类型提交的评论......并显示一个产品列表（带有排名），它是与他们及其用户类型相关。

在这种情况下，我想要做的是创建一个临时表，其中只有相关评论添加到产品平均分数和排名。这样我就可以用我的ajax调用来访问临时表......**最大的问题是数据表只能根据数据库中的一些实际列对显示的表进行排序......所以即使你可以为唯一的用户类型，您仍然无法正确地对列进行排序，因为它们不是可以从中工作的可靠基表。**

编辑：

如果您想了解其工作原理，请查看[http://railscasts.com/episodes/340-datatables?view=asciicast 。](http://railscasts.com/episodes/340-datatables?view=asciicast)当用户单击列标题时..说“排名”...进行 ajax 调用，请求排名最高的 10 个产品或排名最低的 10 个产品..所以只有 10 行从数据库中提取并从客户。这就是为什么我不能根据不在数据库中的列进行排序的原因。我已经实现了一个没有ajax加载数据的工作模型..通过将所有数据放在视图中并从那里排序..

# php - 如何使用 RSync 和 NetBeans 同步 PHP 项目？

> ID：14545945
> 
> 赞同：2
> 
> 时间：2013-01-27T09:06:32.423
> 
> 标签：php, netbeans, ssh, rsync

我刚刚安装了最新版本的 Netbeans (7.2)。

我想使用 rsync（或其他基于 ssh 的工具）将我的项目与远程服务器同步。

我试图搜索插件，但没有找到。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:19:55.483

使用 Ant，您可以将`build.ant`文件添加到您的项目中。右键单击该文件应该会给您一个*“运行目标”*选项，您可以在其中运行您的 ant 任务。

*这是一个包含部署*任务的示例`build.ant`文件

 *```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Project Name" default="deploy">
    <property name="username" value="username"/>
    <property name="host" value="example.com"/>
    <property name="path" value="/path/to/project/dir"/>

    <target name="deploy">
        <exec dir="." executable="rsync" failonerror="true">
            <arg value="-avu"/>
            <arg value="."/>
            <arg value="${username}@${host}:${path}"/>
        </exec>
    </target>
</project> 
```

Capistrano 可能是一个更好的选择，但我不确定与 NetBeans 的集成*

# java - StackOverflowError 不知道出了什么问题

> ID：14545947
> 
> 赞同：1
> 
> 时间：2013-01-27T09:06:49.113
> 
> 标签：java, class, stack-overflow

尝试运行我的程序时，我不断收到此错误。

```
Exception in thread "main" java.lang.StackOverflowError

at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:244)
at javax.swing.UIDefaults.getUI(UIDefaults.java:752)
at javax.swing.UIManager.getUI(UIManager.java:1001)
at javax.swing.JPanel.updateUI(JPanel.java:109)
at javax.swing.JPanel.<init>(JPanel.java:69)
at javax.swing.JPanel.<init>(JPanel.java:92)
at javax.swing.JPanel.<init>(JPanel.java:100)
at serverProperties.<init>(serverProperties.java:164)
at exportProperties.<init>(exportProperties.java:8)
at serverProperties.<init>(serverProperties.java:162) 
```

它仅在尝试从某个类访问方法后发生。

这是主要课程：

```
public class serverProperties extends JPanel
{
    //Add classes
    exportProperties writeProperties = new exportProperties();

    //Assume I created the array sent to the exportProperties class

    public serverProperties()
    {
        CheckBoxListener checkListener = new CheckBoxListener();

        //Assume I created the check box and added the listener for it
    }

    private class CheckBoxListener implements ItemListener
    {

        public void itemStateChanged (ItemEvent event)
        {
            JCheckBox checkBox;
            checkBox= (JCheckBox)event.getSource();

            //Process check Boxes
            if (checkBox.isSelected())
            {
                checkBox.setText("Yes");
                writeProperties.exportFile(propertiesArr);
            }
        }
    }
} 
```

这是上面代码访问的类的代码：

```
public class exportProperties extends serverProperties
{

    public void exportProperties(String[] args)
    {
        exportFile(args);
    }

    public static void exportFile(String[] propertiesArr)
    {
        try
        {
            FileWriter outFile = new FileWriter("Path/file.txt");
            BufferedWriter out = new BufferedWriter(outFile);

            //Loop through properties
            for (int i=0; i < 27; i++)
            {
                out.append(propertiesArr[i]);
            }
            //out.write("Test");
            out.close();

        }
        catch (IOException exception)
        {
            exception.printStackTrace();
        }
    }

    public void importFile()
    {

    }

} 
```

一旦我删除了对 exportProperties 类的调用，程序就会完美运行。带有错误消息，最后两行

```
at exportProperties.<init>(exportProperties.java:8)
at serverProperties.<init>(serverProperties.java:162) 
```

他们在它结束之前重复了很多次。

我已经用谷歌搜索了，然后用谷歌搜索，我不知道发生了什么..感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T09:09:39.067

你的`serverProperties`班级有这个：

```
exportProperties writeProperties = new exportProperties(); 
```

...创建一个`exportProperties`. 但是`exportProperties`extends `serverProperties`，构造一个将*再次*`exportProperties`执行上面的行......所以它继续。

 *在不知道你想要达到的目标的情况下，除了“不要那样做”之外，很难提供非常具体的帮助。我怀疑你不应该在这里使用继承。（目前还不清楚你为什么要扩展`JPanel`......尝试更喜欢组合而不是继承。）

（您还应该修改您的类名以遵循 Java 约定...）*

# ajax - 清理 Wicket 上的文本字段时如何捕获空值？

> ID：14545951
> 
> 赞同：1
> 
> 时间：2013-01-27T09:07:09.920
> 
> 标签：ajax, wicket, textfield

我正在使用文本字段作为对象的日期属性。我有一个用于该字段的 jquery-ui 日期选择器。问题如下。

当我在该字段上选择一个日期时，我试图在 AjaxFormComponentUpdatingBehavior 的 onUpdate 方法中捕获该值。问题是，我是第一次获得选定的值。但是，当用户清理文本字段时，我没有得到空值。因此该值仍然具有旧的选定值，这次应该将其设置为 null。清除字段时不会触发 onUpdate 方法。我认为清理字段时不会更改字段的模型，这就是不触发 onUpdate 方法的原因。如何捕获空值？

```
 surveyRandevuDatePicker = new TextField<String>("surveyRandevuDatePicker", new PropertyModel<String>(itemModel, "surveyRandevuDisplay"));

    surveyRandevuDatePicker.add(new AjaxFormComponentUpdatingBehavior("onkeydown") {
        private static final long serialVersionUID = 8745814248540998760L;

        @Override
        protected void onUpdate(AjaxRequestTarget target) {
            surveyRandevuSelectedValue = surveyRandevuDatePicker.getModelObject();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:34:49.340

而不是`AjaxFormComponentUpdatingBehavior`使用[OnChangeAjaxBehavior](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/form/OnChangeAjaxBehavior.html)

`OnChangeAjaxBeahvior`是 的子类`AjaxFormComponentUpdatingBehavior`。我使用`OnChangeAjaxBeahvior`for`TextField`和它的后代来跟踪组件中的所有更改。它可以跨浏览器工作，并支持组件中的 ale 更改，例如剪切和粘贴以及正常编辑（onkeyup、onkeydown）。`AjaxFormComponentUpdatingBehavior`然后，当您想通过传递一个字符串来跟踪您在构造函数中选择的*一个事件时，可以使用它*`"onkeydown"`

我`AjaxFormComponentUpdatingBehavior`经常在`onblur`活动中使用。

# sonarqube - 关于 setting.xml 中所需配置的声纳查询

> ID：14545953
> 
> 赞同：0
> 
> 时间：2013-01-27T09:07:41.143
> 
> 标签：sonarqube

我已经下载了声纳并进行了设置想要分析一个项目 - 所以在 pom 中进行了与插件相关的更改，并设置了声纳安装的 URL 以及声纳正在使用的数据库属性（mysql）

我的问题：为什么我们需要在 maven_home\conf\settings.xml 中指定 URL？

```
<sonar.host.url>http://localhost:9000</sonar.host.url> 
```

为什么这是必需的？我的理解是当我从我的 dos 提示符运行 mvn sonar:sonar 时 - 声纳插件（在 pom .xml 中定义）正在分析然后将数据插入数据库 - 使用设置中提供的 db 信息

上面的网址有什么用？谢谢，萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:28:02.863

首先，这是默认 URL。如果不指定任何内容，Sonar 插件将假定在端口 9000 上本地运行声纳实例。

当声纳完成分析时，您是完全正确的，它将所有结果直接使用 JDBC 上传到数据库中。URL 参数是必需的，因为 Sonar 插件还使用 Sonar [REST API](http://docs.codehaus.org/display/SONAR/Web+Service+API)在开始 Sonar 分析时检索有关您的项目的信息。

# python - 无法在 Mac 上安装 NetworkX 以与 python 2.7 一起使用

> ID：14545954
> 
> 赞同：0
> 
> 时间：2013-01-27T09:07:41.417
> 
> 标签：python, macos, installation, networkx

我尝试在我的 Mac 上使用`easy_install`和安装 python 2.7 的 networkx 包`pip`。但是，我无法让它工作。当我使用`easy_install`时，我收到以下消息：

```
Searching for networkx
Best match: networkx 1.7
Processing networkx-1.7-py2.6.egg
networkx 1.7 is already the active version in easy-install.pth

Using /Library/Python/2.6/site-packages/networkx-1.7-py2.6.egg
Processing dependencies for networkx
Finished processing dependencies for networkx 
```

有人可以向我提供如何安装它们的详细信息吗？一步一步来就好了。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:20:31.647

您在 python2.6 中安装 networkx 而不是在 python2.7 中！
两种可能的解决方案...

*   下载[源代码](http://pypi.python.org/pypi/networkx)，然后安装为`sudo python2.7 setup.py install`
*   或使用[macports](http://www.macports.org/)！例子`sudo port install py27-networkx @1.7`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:19:24.213

我可以想到其他一些解决方案（请参阅@namit 对您的问题的正确诊断）：

1.  第一个是黑客。只需将`networkx`包放在脚本的同一级别，这将直接导入。这是最快的解决方案，但如果您在许多程序中使用该软件包，则不能令人满意。
2.  安装和使用`virtualenv`——关于[PyPI的说明和](http://pypi.python.org/pypi/virtualenv/1.8.4)[OS X](https://docwhat.org/virtualenv-on-os-x/)的一些细节——这将允许您并行使用多个版本的 Python

如果您在 Mac 上进行大量科学计算，您会反复遇到此类问题。考虑使用[MacPorts](http://www.macports.org/)、[HomeBrew](http://mxcl.github.com/homebrew/)或[Enthought Python Distribution](http://www.enthought.com/products/epd.php)。

# process - 获取进程详细信息

> ID：14545957
> 
> 赞同：0
> 
> 时间：2013-01-27T09:07:59.753
> 
> 标签：process, operating-system

一般来说，有什么方法可以获取进程的详细信息（我的程序在执行之前由操作系统翻译成的进程）。当我的程序作为进程执行时，是否可以输出数据结构（例如 PCB）的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:38:48.090

我建议在 linux 中运行该程序.. 然后您可以使用 [readlf](http://www.linuxforums.org/articles/understanding-elf-using-readelf-and-objdump_125.html)和 [objdump](http://www.thegeekstuff.com/2012/09/objdump-examples/) 来获取有关该进程的大量信息（例如它的地址空间、来自 glibc Ex:printf() 的动态链接库、它的符号表等）...还可以`cat /proc/process's pid`在linux中查看文件夹，在那里可以得到运行进程的各种信息。
当然，您可以使用调试器来获取进程执行时的状态

# java - 使用 anotherEntry 命令编译 java 的问题

> ID：14545958
> 
> 赞同：1
> 
> 时间：2013-01-27T09:08:32.727
> 
> 标签：java, println

当我尝试输入以下代码时，使用 javac 命令时出现语法错误：

```
import java.util.Scanner;

public class DemoVariables3
{

public static void main(String[] args)
{
int entry;
Scanner keyBoard = new Scanner(System.in);
System.out.print("Enter an Integer");
entry = keyBoard.nextInt();
System.out.print("The entry is ");
System.out.println(entry);
System.out.print("Enter another integer ");
anotherEntry = keyBoard.nextInt();
System.out.print("The other entry is");
System.out.println(anotherEntry);
System.out.println(entry + " plus " +
anotherEntry + " is " + (entry + anotherEntry));
System.out.println(entry + " minus " +
anotherEntry + " is " + (entry - anotherEntry));
System.out.println(entry + " times " +
anotherEntry + " is " + (entry * anotherEntry));
System.out.println(entry + " divided by " +
anotherEntry + " is " + (entry / anotherEntry));
System.out.println("The remainder is " +
(entry % anotherEntry));
}
} 
```

这是我的错误消息：

```
C:\User\Student\Desktop\mywork>javac DemoVariables3.java
DemoVariables3.java:16: error: cannot find symbol
System.out.println(anotherEntry);
                   ^ 
```

该错误消息在我的代码中重复了 12 次；任何帮助，将不胜感激。

**编辑**：我真的没有看到 anotherEntry 没有被定义，我认为这意味着一旦我启动应用程序最终用户会输入什么（我刚刚开始，所以如果我错了，我深表歉意）

**Edit2**：上帝我觉得很愚蠢，我只是没有为 anotherEntry 声明字符串；非常感谢您为我指出这一点！

# linux - 从后台工作线程修改 Qt GUI

> ID：14545961
> 
> 赞同：28
> 
> 时间：2013-01-27T09:08:42.500
> 
> 标签：linux, multithreading, qt, user-interface

我在 Qt 中工作，当我按下 GO 按钮时，我需要不断地将包发送到网络并使用我收到的信息修改界面。

问题是我`while(1)`在按钮中有一个，所以按钮永远不会完成，所以界面永远不会更新。我想在按钮中创建一个线程并将`while(){}`代码放在那里。

我的问题是如何从线程修改界面？（例如，如何从线程修改文本框？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-27T09:45:38.733

关于 Qt 的重要一点是，您**必须**只能从 GUI 线程（即主线程）使用 Qt GUI。

这就是为什么这样做的正确方法是从worker**通知**主线程，而主线程中的代码实际上会更新文本框、进度条或其他东西。

我认为最好的方法是使用 QThread 而不是 posix 线程，并使用 Qt*信号*在线程之间进行通信。这将是您的工人，替代`thread_func`：

```
class WorkerThread : public QThread {
    void run() {
        while(1) {
             // ... hard work
             // Now want to notify main thread:
             emit progressChanged("Some info");
        }
    }
    // Define signal:
    signals:
    void progressChanged(QString info);
}; 
```

在您的小部件中，定义一个与 .h 中的信号具有相同原型的*槽：*

```
class MyWidget : public QWidget {
    // Your gui code

    // Define slot:
    public slots:
    void onProgressChanged(QString info);
}; 
```

在 .cpp 中实现这个功能：

```
void MyWidget::onProgressChanged(QString info) {
    // Processing code
    textBox->setText("Latest info: " + info);
} 
```

现在在你想要生成线程的地方（点击按钮）：

```
void MyWidget::startWorkInAThread() {
    // Create an instance of your woker
    WorkerThread *workerThread = new WorkerThread;
    // Connect our signal and slot
    connect(workerThread, SIGNAL(progressChanged(QString)),
                          SLOT(onProgressChanged(QString)));
    // Setup callback for cleanup when it finishes
    connect(workerThread, SIGNAL(finished()),
            workerThread, SLOT(deleteLater()));
    // Run, Forest, run!
    workerThread->start(); // This invokes WorkerThread::run in a new thread
} 
```

连接信号和槽后，`emit progressChanged(...)`在工作线程中发出槽将向主线程发送消息，主线程将在这里调用连接到该信号的槽`onProgressChanged`。

~~*Ps 我还没有测试过代码，所以如果我在某个地方错了，请随时提出修改建议*~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-12T01:32:44.390

因此，机制是您不能从线程内部修改小部件，否则应用程序将崩溃并出现以下错误：

```
QObject::connect: Cannot queue arguments of type 'QTextBlock'
(Make sure 'QTextBlock' is registered using qRegisterMetaType().)
QObject::connect: Cannot queue arguments of type 'QTextCursor'
(Make sure 'QTextCursor' is registered using qRegisterMetaType().)
Segmentation fault 
```

为了解决这个问题，您需要将线程工作封装在一个类中，例如：

```
class RunThread:public QThread{
  Q_OBJECT
 public:
  void run();

 signals:
  void resultReady(QString Input);
}; 
```

其中 run() 包含您想做的所有工作。

在您的父类中，您将有一个生成数据的调用函数和一个 QT 小部件更新函数：

```
class DevTab:public QWidget{
public:
  void ThreadedRunCommand();
  void DisplayData(QString Input);
...
} 
```

然后调用线程，你将连接一些插槽，这个

```
void DevTab::ThreadedRunCommand(){
  RunThread *workerThread = new RunThread();
  connect(workerThread, &RunThread::resultReady, this, &DevTab::UpdateScreen);
  connect(workerThread, &RunThread::finished, workerThread, &QObject::deleteLater);
  workerThread->start();  
} 
```

连接函数有 4 个参数，参数 1 是原因类，参数 2 是该类中的信号。参数3是回调函数的类，参数4是类内的回调函数。

然后你的子线程中有一个函数来生成数据：

```
void RunThread::run(){
  QString Output="Hello world";
  while(1){
    emit resultReady(Output);
    sleep(5);
  }
} 
```

然后你会在你的父函数中有一个回调来更新小部件：

```
void DevTab::UpdateScreen(QString Input){
  DevTab::OutputLogs->append(Input);
} 
```

然后当你运行它时，每次在线程中调用发出宏时，父级中的小部件都会更新。如果连接函数配置正确，它将自动获取发出的参数，并将其存储到回调函数的输入参数中。

这是如何工作的：

1.  我们初始化类
2.  我们设置插槽来处理线程完成时发生的事情以及如何处理“返回的”aka `emit`ted 数据，因为我们无法以通常的方式从线程返回数据
3.  然后我们通过`->start()`调用（硬编码到 QThread 中）运行线程，然后 QT`.run()`在类中查找硬编码的名称成员函数
4.  每次`emit`在子线程中调用 resultReady 宏时，它都会将 QString 数据隐藏在线程之间陷入困境的某个共享数据区域中
5.  QT 检测到 resultReady 已触发，并通知您的函数 UpdateScreen(QString ) 接受从 run() 发出的 QString 作为父线程中的实际函数参数。
6.  每次触发 emit 关键字时都会重复此操作。

本质上，这些`connect()`函数是子线程和父线程之间的接口，因此数据可以来回传输。

**注意：** resultReady() 不需要定义。把它想象成存在于 QT 内部的宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-27T09:51:46.880

您可以使用 invokeMethod() 或 Signals and slots 机制，基本上有很多示例，例如如何发出信号以及如何在 SLOT 中接收信号。但是，InvokeMethod 似乎很有趣。

下面是示例，其中显示了如何从线程更改标签的文本：

**//file1.cpp**

```
QObject *obj = NULL; //global 
QLabel *label = new QLabel("test");
obj = label;   //Keep this as global and assign this once in constructor. 
```

接下来在您的 WorkerThread 中，您可以执行以下操作：

**//file2.cpp（即线程）**

```
extern QObject *obj;
void workerThread::run()
{
     for(int i = 0; i<10 ;i++
     {
         QMetaObject::invokeMethod(obj, "setText",
                                Q_ARG(QString,QString::number(i)));
     }
     emit finished();
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-27T09:26:19.323

您开始线程传递一些指向线程函数的指针（在posix中，线程函数具有签名**void* (thread_func)(void*)**，在 Windows 下也相等） - 您可以完全自由地将指针发送到您自己的数据（结构或其他东西）并从线程函数中使用它（将指针转换为正确的类型）。好吧，内存管理应该被淘汰（所以你既不会泄漏内存也不会使用已经从线程中释放的内存），但这是一个不同的问题

# iphone - 当从一个视图控制器传递到另一个视图时，视图向上移动 x 像素

> ID：14545963
> 
> 赞同：0
> 
> 时间：2013-01-27T09:09:13.777
> 
> 标签：iphone, view, uiview, uiviewcontroller

当我第一次运行该应用程序时，我的视图显示完美，但是当我“pushViewController”（同一个）时，视图可能会向上移动 60 像素。

可能是什么问题？

使用此功能，我推送 viewController：

```
-(void)userLogin
{
MSLoginViewController *loginController = [[MSLoginViewController alloc] initWithNibName:@"MSLoginViewController" bundle:nil];
loginController.isTryToBuyCoupon = YES;
[self.navigationController pushViewController:loginController animated:YES];
[loginController release];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:08:32.603

您可能为 setNavigationBarHidden 方法设置了 YES。这将使您的视图向上移动 44 像素。有关您的问题的更多详细信息将使我们易于回答。

# haskell - 为什么我不能在 `do` 块中获得时间？

> ID：14545968
> 
> 赞同：0
> 
> 时间：2013-01-27T09:09:48.920
> 
> 标签：haskell, time, io, websocket

我有这个功能，它负责网络聊天中的通信。没有`t <- getClockTime`（这里是它的代码）一切正常：

```
talk :: WS.Protocol p => MVar State -> Client -> WS.WebSockets p ()
talk state client@(user, sink) = flip WS.catchWsError catchDisconnect $ 
  forever $ do
    t <- getClockTime
    msg <- WS.receiveData
    case () of
      () | T.unpack(msg) == "#list" -> liftIO $ readMVar state >>= listClients client
        | T.unpack(msg) == "#time" -> liftIO (sendTime client)
        | "#name" `T.isPrefixOf` msg -> liftIO (command msg client)
        | otherwise -> liftIO $ readMVar state >>= broadcast
          (user `mappend` msg)
  where
    catchDisconnect e = case fromException e of
        Just WS.ConnectionClosed -> liftIO $ modifyMVar_ state $ \s -> do
            let new_state = removeClient client s
            return new_state
        _ -> return () 
```

随着`t <- getClockTime`我得到错误：

```
Couldn't match type `WS.WebSockets p0' with `IO'
Expected type: IO Text
  Actual type: WS.WebSockets p0 Text
In a stmt of a 'do' block: msg <- WS.receiveData
In the second argument of `($)', namely
  `do { t <- getClockTime;
        msg <- WS.receiveData;
        case () of {
          ()
            | T.unpack (msg) == "#list"
            -> liftIO $ readMVar state >>= listClients client
            | T.unpack (msg) == "#time" -> liftIO (sendTime client)
            | "#name" `T.isPrefixOf` msg -> liftIO (command msg client)
            | otherwise
            -> liftIO $ readMVar state >>= broadcast (user `mappend` msg) } }'
In the second argument of `($)', namely
  `forever
   $ do { t <- getClockTime;
          msg <- WS.receiveData;
          case () of {
            ()
              | T.unpack (msg) == "#list"
              -> liftIO $ readMVar state >>= listClients client
              | T.unpack (msg) == "#time" -> liftIO (sendTime client)
              | "#name" `T.isPrefixOf` msg -> liftIO (command msg client)
              | otherwise
              -> liftIO $ readMVar state >>= broadcast (user `mappend` msg) } }' 
```

我怎样才能得到这个时间并将它与味精连接起来？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T09:21:27.263

因为你的 monad 不是`IO`。我不知道是什么`WS.WebSockets`，但如果是[这个](http://hackage.haskell.org/packages/archive/websockets/0.7.1.1/doc/html/Network-WebSockets.html)，它是一个实例`MonadIO`，所以你可以使用. 我建议阅读更多关于这种代码的 monad 转换器，因为提升会出现很多。[`liftIO`](http://hackage.haskell.org/packages/archive/websockets/0.7.1.1/doc/html/Network-WebSockets.html)`getClockTime`

# ios - 如何在控件上方添加动态大小视图？

> ID：14545969
> 
> 赞同：4
> 
> 时间：2013-01-27T09:10:07.397
> 
> 标签：ios, uiview

我在滚动视图中有 160 个控件（UITextField、UILabel、UIImageVIew）的 xib。这个控件是放顺序的。现在我想要的是在滚动视图中在这 160 个控件运行时之上添加更多控件。我怎样才能做到这一点 ？？
我试图这样做在滚动视图中添加 1 个 UIView 并在其中添加动态控件，并在滚动视图中的其他 UIview 中添加 160 个控件。但问题是当我要在 UIview 中添加这 160 个控件时，帧大小会受到干扰。那么还有其他解决方案吗？请让我知道..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:18:20.437

将属性更改为`scrollView.contentSize`您想要的大小

# android - ArrayAdapter 如何混合添加项？

> ID：14545970
> 
> 赞同：-1
> 
> 时间：2013-01-27T09:10:26.703
> 
> 标签：android, android-arrayadapter

我有一个 ArrayAdapter。我想混合项目。例如;

```
ArrayAdapter<String> Adapter = new ArrayAdapter<String>();

Adapter.add("Table");
Adapter.add("Desk");
Adapter.add("Pen");
Adapter.add("Computer");
Adapter.add("Mouse");
Adapter.add("Book"); 
```

我正在向我的 ArrayAdapter 添加项目。但我想在添加后，在“笔”项目下添加其他项目。例如;

```
Adapter.add("New Item"); 
```

但这个项目是最后一个。我想这个项目是在“笔”项目下添加的。我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:15:34.173

改为使用`insert(T object, int index)`。参考[http://developer.android.com/reference/android/widget/ArrayAdapter.html](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

# android - 将字符串从一个活动传递到另一个活动的问题

> ID：14545971
> 
> 赞同：1
> 
> 时间：2013-01-27T09:10:41.400
> 
> 标签：android, android-intent

背景：我正在尝试开发我的第一个 android 应用程序，它是一个学生讨论面板。我擅长 PHP 和 MySQL，但在 android Java 方面没有太多经验。

问题：在 SelectedQuestionActivity 类中，如果我只是将 URL 指定为[http://thewbs.getfreehosting.co.uk/talky/fetchans.php?qid=3](http://thewbs.getfreehosting.co.uk/talky/fetchans.php?qid=3)，它工作得很好，它会获取问题的相应答案。但是如果我按照下面代码中显示的方式进行操作，应用程序就会崩溃。我不确定我错在哪里。

代码：AllQuestionActivity.java

```
 public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.qid)).getText()
                    .toString();
             //pid is the value of the selected question for example www.example.com/fetchans?qid=3 so here pid value is supposed to be 3\. 
            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    SelectedQuestionActivity.class);
            // sending pid to next activity
            in.putExtra(TAG_PID, pid);
            startActivity(in);

        }
    }); 
```

现在在 SelectedQuestionActivity.java 代码中：

```
public class SelectedQuestionActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> productsList;

Intent intent = getIntent();
String qid = intent.getExtras().getString(TAG_PID);
// url to get all products list
private String url_all_products = "http://thewbs.getfreehosting.co.uk/talky/fetchans.php?qid="+qid;

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "ques";
private static final String TAG_PID = "aid";
private static final String TAG_NAME = "aname";
private static final String TAG_INFO = "answer";
private static final String TAG_DATE = "date";
// products JSONArray
JSONArray products = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_ans);

    // Hashmap for ListView
    productsList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();
 }
  class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(SelectedQuestionActivity.this);
        pDialog.setMessage("Loading Answers. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Answers: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                products = json.getJSONArray(TAG_PRODUCTS);

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);
                    String info = c.getString(TAG_INFO);
                    String date = c.getString(TAG_DATE);
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_INFO, info);
                    map.put(TAG_DATE, date);

                    // adding HashList to ArrayList
                    productsList.add(map);
                }
            } 
            else {

            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        SelectedQuestionActivity.this, productsList,
                        R.layout.list_selected_ques, new String[] { TAG_PID,
                                TAG_NAME, TAG_INFO, TAG_DATE },
                        new int[] { R.id.aid, R.id.aname, R.id.answer, R.id.date});
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

   }
  } 
```

JSONparser.java

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:13:19.180

目前，您正在尝试在 ListActivity 的 onCreate 之外获取 Intent，因此将其移动到 onCreate 方法中，如下所示：

```
 Intent intent;
String qid;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_ans);

       // get Intent here 
      intent = getIntent();
      qid = intent.getExtras().getString(TAG_PID);

       // your code here 
```

也不需要使用`runOnUiThread`更新 UI 的方法，`onPostExecute`因为在 Ui 线程上调用了 onPostExecute 方法，我们可以访问其中的 UI 元素

**编辑：-**

您没有在 doInBackground 中向 NameValuePair 添加任何参数。在将其发送到 makeHttpRequest 之前添加 quid：

```
 protected String doInBackground(String... args) {
 // Building Parameters
List<NameValuePair> params = new ArrayList<NameValuePair>();
add quid param here
params.add(new BasicNameValuePair("qid",qid));  //<<<< add here
// getting JSON string from URL
JSONObject json = jParser.makeHttpRequest(
                      url_all_products,
                      "GET", 
                      params);
// your code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:16:08.240

您正在将一个字符串从一个活动对象传递到另一个，而您没有编写代码来在正确位置的新活动上接收它。要解决这个问题，您应该在 onCreate 中添加一些代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.all_ans);
       String url = getIntent().getStringExtra(TAG_PID);
       if (url != null)
        url_all_products = url; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:18:57.610

您应该需要`onCreate()`如下所示获取您的意图值：

> ```
> @Override
>   public void onCreate(Bundle savedInstanceState) {
>       super.onCreate(savedInstanceState);
>        setContentView(R.layout.all_ans);
>         Intent intent = getIntent();
>       String qid = intent.getExtras().getString(TAG_PID);
>     } 
> ```

# c# - 如何在 DNS 中获取 TTL（生存时间）？

> ID：14545973
> 
> 赞同：4
> 
> 时间：2013-01-27T09:10:57.690
> 
> 标签：c#, dns, ttl

我想监控 DNS 地址。我需要获得`TTL`（生存时间），它告诉我 DNS 记录何时到期。

如何在 C# 中获取 TTL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:10:12.313

[C# .NET DNS 查询组件](http://www.codeproject.com/Articles/12072/C-NET-DNS-query-component)中的 .Net 示例代码似乎提供了您需要的 API。

# eclipse - 如何在 Eclipse 项目资源管理器中更改已更改文件的背景颜色？

> ID：14545978
> 
> 赞同：26
> 
> 时间：2013-01-27T09:11:28.583
> 
> 标签：eclipse, colors, egit, color-scheme

版本控制下的更改文件在项目资源管理器中以深棕色背景显示，使文件名不可读。我想改变它。

![棕色的](../Images/2d6723bda582d53a165f01b851ce339b.png)

我已经在几个颜色主题之间切换，但它们不会影响项目资源管理器中的颜色。`General->Appearance->Colors&Fonts`我在菜单和菜单中都没有找到任何有用的选项`Team->Git`。

右键单击彩色文件名不提供更改颜色的选项，就像在编辑器中使用时一样。

我正在使用 Eclipse 3.7 SR2 和 EGit。

编辑：我可以确认它是提供颜色的 git 装饰器 - 一旦我将其关闭（常规->外观->标签装饰器），棕色就消失了。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-27T15:37:57.960

您想要的设置在*Preferences* > *General* > *Appearance* > *Colors and Fonts*下，在列表中查找“ **Git** ”部分，在“未提交的更改（背景）”和“未提交的更改（前景）”下方。 ![在此处输入图像描述](../Images/2d7073fe10079794b29045e9e8a4d579.png)

我将这些设置编辑为浅蓝色背景和白色前景，这就是我的项目/包资源管理器中更改后的文件的样子：

![在此处输入图像描述](../Images/1d2be7090871449104756d4a9a166dfe.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-27T04:54:25.257

另一个不在项目资源管理器中但在文件中的类似功能是 QuickDiff。该功能通过始终与提交的内容进行比较，始终告诉我们您更改、添加和删除了哪一行。要启用此功能，请执行此 Window -> Preferences -> Quick Diff -> Enable Quick Diff Window -> Preferences -> Quick Diff -> Use this reference source -> Git Have Revision

更改您想要指示更改、添加和删除内容的颜色。我分别使用黄色、绿色和红色。然后，在任何时候，您都在文件中，您始终可以看到您编辑了哪一行，并且可以将鼠标悬停在行号上（这将是粉红色、蓝色或您选择的任何颜色）以准确查看您已编辑的内容改变了与 Git。![这是 eclipse 中的样子](../Images/6c2f9557a1f13b6131ae87facb6750a5.png)

# wpf - 类依赖 WPF 控件

> ID：14545995
> 
> 赞同：0
> 
> 时间：2013-01-27T09:13:22.597
> 
> 标签：wpf

WPF 确实令人惊叹，原因有很多，其中之一是它允许我们更改控件内的控件。例如，如果我们采用 ListBox。我们可以将面板从 StackPanel 更改为 WrapPanel，它仍然可以工作（我想显然 ListBox 和 WrapPanel 不共享任何类依赖项，因此它为什么工作）。

这是我对类依赖项的意思的示例。

```
public class Test1
{
 public Test2 t;

 public Test1(Test2 t)
 {
   this.t = t;
 }
}

public class Test2
{
  public string someStr;
} 
```

现在可以像这样注入/插入实例：

```
Test2 test2 = new Test2();
test2.someStr = "Hello";

Test1 test1 = new Test1();
test1.t = test2; 
```

或者可以像这样插入实例：

```
Test2 test2 = new Test2();
test2.someStr = "Hello";
Test1 test1 = new Test1(test2); 
```

几乎没有其他方法可以做到这一点，但我希望你们现在明白这一点。

所以现在在我们知道如何注入实例之后，让我们尝试使用以下示例在 WPF 中这样做：

我有一个自定义控件。我的 CustomControl 有点复杂，因为它有行和列。此外，CustomControl 不是从 DataGrid 派生的。事实上，它是从 ItemsControl 派生的。

正如我提到的，它有列和行，或者更准确地说，行需要了解列。那就是我想在一行中插入列实例的地方。我如何在 WPF 中做到这一点？

这是我的问题的一个简单的简单示例：

假设 CustomControl 的 VisualTree 如下所示：

```
CustomControl
+ Grid
 + Border
  + ContentPresenter
   + Headers
 + DockPanel
  + Border
   + ContentPresenter
    + Rows 
```

如您所见，行远离标题，我想在不找到标题的情况下获取/插入标题的实例到行。

Rows 和 Headers 类如下所示：

```
class Row : ContentControl
{
  List<Column> Headers;
  ...
}

class Headers : ContentControl
{
  List<Column> Cols = new List<Column>()
  public Headers()
  {
    this.Cols.Add(...);
    this.Cols.Add(...);
  }
 ...
} 
```

问题是如何做这样的事情：

```
this.rows.Headers = columns.Cols; 
```

我在互联网上搜索过，很多人建议我让该行使用 VisualTreeHelper，然后沿着树向上移动以找到 Cols。事实上，我尝试这样做，并且在使用性能分析器工具监视了我的 CustomControl 之后，我认为这正是每一行都在树中查找最耗时的标题的步骤。因此，让我们不要使用 VisualTreeHelper，而是像我在上面的 Test1 和 Test2 示例中描述的那样使用注入。

有什么建议么？这可能有一个模式吗？

已编辑：@Benjamin。在 OnApplyTemplate 中使用 RedSlider = GetTemplateChild("RedSlider") 是一个很好的解决方案，但它对我不起作用，因为我的情况更复杂。就我而言，我真的需要以某种方式插入实例。这是我无法在 OnAppyTemplate 方法中使用 GetTemplateChild 的示例。

这是滑块控件。

```
class CustomSliders : ContentControl
{
} 
```

CustomSlider 的样式如下所示：

```
 <Style x:Key="mySliders" TargetType="{x:Type local:CustomSliders}">
    <Style.Setter Property="Template">
    <ControlTemplate TargetType="{x:Type local:CustomSliders}">
    <Grid>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Slider x:Name="PART_RedSLider" />
     <Slider x:Name="PART_GreenSlider" Grid.Row="1"/>
     <Slider x:Name="PART_BlueSlider" Grid.Row="2"/>
     <Slider x:Name="PART_AlphaSlider" Grid.Row="3"/>
    </Grid>
    </ContentTemplate>
   </Style> 
```

这是我的CustomControl 的ControlTemplate，名为ColorPicker。

```
<ContentTemplate TargetType="Picker">
    <DockPanel>
     <ContentControl DockPanel.Dock="Left" Style="{StaticResource mySliders}"/>
    <Rectangle x:Name="PART_ColorPresenter" 
                   DockPanel.Dock="Right"
                   Margin="5"/>
    </Grid> 
</ControlTemplate> 
```

在此示例中，将在 ColorPicker 的 OnApplyTemplate 内执行的 GetTemplatedChild 方法将不起作用，因为它找不到位于 CustomSliders 内的 PART_RedSLider。

GetTemplateChild 无法在 VisualTree 中找到所有内容。

因为 GetTemplatedChild 无法解决这个复杂的模板结构，所以很多人建议我使用 VisualTreeHelper.Find() 反复地在树上或下旅行。尽管就像我在问题中解释的那样，我不想使用递归方式。我想插入实例..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:19:12.740

正如我已经说过的，Kent Boogaarts 的回答在技术上是正确的，但我认为您可能需要更多信息来帮助您理解。

想象一下您正在编写的控件是一个颜色选择器。该控件有 4 个`Sliders`用于更改红色、绿色、蓝色和 alpha 值，最终结果显示在 a 中的滑块旁边`Rectangle`。样机如下图所示：

![在此处输入图像描述](../Images/a59cfe34f3a6917eefb8d828cb96581b.png)

该控件有 5 个依赖项才能正常工作；4`Sliders`和 1`FrameworkElement`用于显示最终结果。

这意味着`ControlTemplate`我希望看到 4 个滑块和 1`FrameworkElement`个*名为*. 例如，控制红色值的滑块可以称为**“PART_RedSlider”**（名称可以是您想要的任何名称，但推荐的方法是在名称前加上“PART_”）。

示例模板可能如下所示：

```
<!-- Typically this would be defined in a style -->
<ControlTemplate TargetType="ColorPicker">
    <Grid>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Slider x:Name="PART_RedSLider" />
    <Slider x:Name="PART_GreenSlider" Grid.Row="1"/>
    <Slider x:Name="PART_BlueSlider" Grid.Row="2"/>
    <Slider x:Name="PART_AlphaSlider" Grid.Row="3"/>

    <Rectangle x:Name="PART_ColorPresenter" 
                   Grid.Column="1" 
                   Grid.RowSpan="4" 
                   Margin="5"/>
    </Grid> 
</ControlTemplate> 
```

现在在您的控件代码中，您将覆盖该`OnApplyTemplate()`方法，如下所示：

```
public override void OnApplyTemplate()
{
    RedSlider = GetTemplateChild("PART_RedSlider") as Slider;
    GreenSlider = GetTemplateChild("PART_GreenSlider") as Slider;
    BlueSlider = GetTemplateChild("PART_BlueSlider") as Slider;
    AplhaSlider = GetTemplateChild("PART_AlphaSlider") as Slider;

    ColorPresenter = GetTemplateChild("PART_ColorPresenter") as FrameworkElement;
} 
```

您现在可以访问`ControlTemplate`. 然后，您可以在代码中对这些控件执行任何操作（设置默认属性值、连接事件处理程序等）。

现在您可能想知道这`TemplatePartAttribute`一切的来源。问题是，此属性纯粹用于文档目的，以便工具（例如 Expression Blend）可以帮助其他人创建自定义模板。

该属性应用于您正在编写的类，如下所示：

```
[TemplatePart(Name="PART_RedSlider", Type=typeof(Slider)]
[TemplatePart(Name="PART_GreenSlider", Type=typeof(Slider)]
[TemplatePart(Name="PART_BlueSlider", Type=typeof(Slider)]
[TemplatePart(Name="PART_AlphaSlider", Type=typeof(Slider)]
[TemplatePart(Name="PART_ColorPresenter", Type=typeof(FrameworkElement)]
public class ColorPicker 
```

一条建议是*永远不要*假设模板将包含命名部分。您的控件应该在没有指定部分存在的情况下仍能正常工作（尽其所能）。Microsoft 的指导是，如果缺少命名部分，则不应抛出异常（即，即使您的控件无法按预期工作，您的应用程序仍然可以运行）。

例如

```
public override void OnApplyTemplate()
{
    RedSlider = GetTemplateChild("RedSlider") as Slider;

    if (RedSlider != null)
    {
        // Only do anything if the named part is present.
    }
} 
```

您还应该尝试对命名部件使用尽可能低的基类。例如，在我的示例中，命名的部分`Sliders`可以是类型，`RangeBase`而不是`Slider`可以使用范围控件的类型。

最后，你的类应该有变量来保存对你的命名部分的引用，这些引用在调用`OnApplyTemplate`. 不要在每次要使用控件时都试图找到它们。

因此，现在您需要将此应用到您的控件，该控件依赖于`Row`和`Header`控件，因此这些控件需要存在于您的控件中`ControlTemplate`（为了简单起见，我将假设一个`Row`和`Header`）。

首先`CustomControl`用`TemplatePartAttribute`这样的方式记录你的：

```
[TemplatePart(Name="PART_Header", Type=typeof(Header)]
[TemplatePart(Name="PART_Row", Type=typeof(Row)]
public class CustomControl : Control
{
    // etc... 
```

现在确保您将这些控件作为命名部分，`ControlTemplate`如下所示：

```
<ControlTemplate TargetType="CustomControl">
    <Grid>

        <!-- other elements omitted -->

    <Header x:Name="PART_Header" />
    <Row x:Name="PART_Row" />

    </Grid> 
</ControlTemplate> 
```

然后你使用这样的`OnApplyTemplate()`方法：

```
public override void OnApplyTemplate()
{
    myHeader = GetTemplateChild("PART_Header") as Header;
    myRow = GetTemplateChild("PART_Row") as Row;

    if ((myHeader != null) && (myRow != null))
    {
        myRow.Headers = myHeader.Cols;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:10:10.897

如果您的自定义控件对其可视化树有特定要求，您可以使用[`TemplatePartAttribute`](http://msdn.microsoft.com/en-us/library/system.windows.templatepartattribute.aspx)s 声明这些并在[`OnApplyTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.onapplytemplate.aspx).

# web - 如何将文件夹添加到 Visual Studio Express 2012 for Web 的解决方案资源管理器中？

> ID：14545997
> 
> 赞同：23
> 
> 时间：2013-01-27T09:14:01.197
> 
> 标签：web, visual-studio-2012, directory

我对 Visual Studio 很陌生，所以我正在努力学习基础知识。

我已经阅读了很多文章，但有些是 2012 年的，有些是非网络版本的，等等，但我真的找不到像这样简单的任务的解决方案。

我正在使用 Visual Studio Express 2012 for Web，并创建了一个“空白解决方案”。

我最终得到了这个观点：

![在此处输入图像描述](../Images/b9263838ca38ec49cb01480445a85d1e.png)

现在我的目标是添加我所有现有的文件和文件夹并将其显示在 Visual Studio 中。

所以，我在磁盘上找到了我的解决方案文件，并将所有文件复制到同一个文件夹中：

![在此处输入图像描述](../Images/9e5aa4e42db980c155f65b3f047f335b.png)

现在，我知道可以通过右键单击并选择添加项目来将单个项目添加到视图中：

![在此处输入图像描述](../Images/73c778d6ba33c4461ac544900088a840.png)

但我不能在这里包含文件夹。我曾尝试拖放，我已阅读有关使用“显示所有文件”按钮的指南，但显然这对于​​ Visual Studio 2012 的 Web 版本不存在。

谁能告诉我将我的所有文件包含到解决方案资源管理器中的正确方法是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-13T00:09:57.693

我刚刚在 Visual Studio 2012 Ultimate 中遇到了同样的问题。我知道你的问题是关于网络的，但也许这也对你有用。

假设您要包含的文件/文件夹在您的解决方案文件夹中，从“显示所有文件”的项目菜单切换，那么您应该在解决方案资源管理器中看到文件/文件夹。选择要包含的那些，右键单击并选择“包含在项目中”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T10:42:54.487

一个解决方案包含一个或多个项目，并且没有解决方案范围的文件（通常）。创建一个项目，然后按照[如何将现有目录树添加到 Visual Studio 中的项目？](https://stackoverflow.com/questions/392473/how-do-i-add-an-existing-directory-tree-to-a-project-in-visual-studio)添加文件。

（很久以前我就是这样做的，并且使用的是早期版本的 Visual Studio，所以是 YMMV。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-28T10:07:20.447

我认为最好的方法是在 VS 中的文件资源管理器和解决方案资源管理器之间简单地拖放带有文件的所需文件夹。我刚刚对其进行了测试，这对我来说效果最好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T09:17:18.503

您可以将文件放在解决方案文件夹中并刷新解决方案资源管理器 :) 它会自动添加您的文件，我为 2010 年做，并认为它也适用于 2012 年

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-10T04:37:40.737

在解决方案资源管理器顶部切换中，您可以找到几个图标，找到显示所有文件并单击它。导航到与您的 Visual Studio 中的相同地址完全匹配的文件夹，您可以看到一个新添加到项目中的文件夹，即显示为一个虚线文件夹并右键单击它并将其包含到项目中。

不要忘记将项目转换为 Web 应用程序。

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-21T22:11:34.057

我实际上找到了解决方案。因此，在解决方案资源管理器中有一个按钮“解决方案和文件夹”[屏幕截图](https://i.stack.imgur.com/C2e7N.png) 当您按下它时，您的项目文件夹将被打开。你找到你需要添加的文件夹，复制它（[截图](https://i.stack.imgur.com/2nCyn.png)），返回项目解决方案并过去它