# StackOverflow 问答 13371000-13371999

# c++ - 这个过剩球体不会旋转，为什么？使用 Visual c++ 2010

> ID：13371003
> 
> 赞同：-1
> 
> 时间：2012-11-14T00:00:58.087
> 
> 标签：c++, visual-studio-2010, opengl, animation, glut

这是我正在使用的完整代码。球体不会像我期望的那样旋转。通常我用 Java 编程，所以也许这是我的 c++ 编程而不是 GLUT。

```
#include "stdafx.h"
#include <stdlib.h>
#include <stdio.h>
#include <GL/glut.h>
#include <GL/glu.h>
#include <GL/gl.h>
#include <iostream>
using namespace std;

static float angle = 0;

void init(void) 
{
   GLfloat mat_specular[] = { 1.0, .5f, .5f, .5f };
   GLfloat mat_shininess[] = { 15.0 };
   GLfloat light_position[] = { 1.0, 1.0, 1.0, 0.0 };
   glClearColor (0.0, 0.0, 0.0, 0.0);
   glShadeModel (GL_FLAT);

   glMaterialfv(GL_FRONT, GL_SPECULAR, mat_specular);
   glMaterialfv(GL_FRONT, GL_SHININESS, mat_shininess);
   glLightfv(GL_LIGHT0, GL_POSITION, light_position);

   glEnable(GL_LIGHTING);
   glEnable(GL_LIGHT0);
   glEnable(GL_DEPTH_TEST);
}

void display(void)
{

   cout << angle;
   glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
   glPushMatrix();
   glRotatef(90, 1, 0, 0);  
   glRotatef(angle, 0, 0, 1);
   glutSolidSphere (.5, 24, 24);
   glPopMatrix();   
   glFlush ();
   angle += 1;
   glutSwapBuffers();

}

void reshape (int w, int h)
{
   glViewport (0, 0, (GLsizei) w, (GLsizei) h);
   glMatrixMode (GL_PROJECTION);
   glLoadIdentity();

   glOrtho (-1.5*(GLfloat)w/(GLfloat)h, 1.5*(GLfloat)w/(GLfloat)h, -1.5, 1.5, -10.0, 10.0);
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
}

int main(int argc, char** argv)
{
   glutInit(&argc, argv);
   glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
   glutInitWindowSize (500, 500); 
   glutInitWindowPosition (100, 100);
   glutCreateWindow (argv[0]);
   init ();
   glutDisplayFunc(display); 
   glutReshapeFunc(reshape);

   glutMainLoop();
   return 0;
} 
```

从我的调试行 'cout << angle;' 看来 那个 glut 只调用一次显示函数。我正在使用带有 GLUT 的 Microsoft Visual C++ 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:04:51.750

将此添加到主

```
glutIdleFunc( display ); 
```

告诉 glut 在程序处于空闲状态时调用您的显示函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:09:19.067

有几个选项：

您可以手动调用`glutPostRedisplay`以要求主循环再次调用您的显示函数，如此[处](http://www.opengl.org/resources/libraries/glut/spec3/node20.html)所述。

`glutIdleFunc`或者，您可以通过将其设置为空闲函数，将其设置为尽可能频繁地自动调用您的显示器，如此[处](http://www.opengl.org/resources/libraries/glut/spec3/node63.html)所述。

如果您要使用 Idle Func，我绝对建议您创建一个函数，例如`gameUpdate`或`simulationUpdate`在其中操纵角度然后调用`glutPostRedisplay`，以便可以呈现更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:09:44.200

事实上，球体正在正确旋转。然而，GLUT 尽可能少地调用显示函数：只有在窗口发生变化时才会调用它。

要解决这个问题，您应该使用空闲功能。空闲函数是由 GLUT 连续调用的函数。您可以执行以下操作：

```
void idle() {
  angle += 1;
  glutPostRedisplay();
} 
```

在你的主要功能中：

```
glutIdleFunc(idle); 
```

# desire2learn - desire2learn valence.desire2learn.com 测试用户帐户

> ID：13371004
> 
> 赞同：1
> 
> 时间：2012-11-14T00:01:01.443
> 
> 标签：desire2learn

如果我想为desire2learn 平台进行开发，但没有要开发的desire2learn 安装，我可以使用valence.desire2learn.com 环境吗？如何获得该环境的用户登录名？当我请求应用程序开发者密钥时，我会得到一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:15:04.870

[此处](http://docs.valence.desire2learn.com/clients/tools/keytool.html)记录了使用desire2learn 密钥工具的过程，只需要您有一个谷歌帐户即可登录该工具。他们的密钥工具允许您“选择在其生命周期的试用和开发阶段为应用程序创建非商业密钥”和“从此页面您只能立即接受与 D2L 的非商业开发者协议；如果您寻求接受与 D2L 的商业开发者协议，我们通过合作伙伴网络处理该请求。” 因此，密钥工具允许您获得应用程序开发人员密钥，而无需注册他们的合作伙伴计划。

您可能还想查看 Valence 入门[页面](http://docs.valence.desire2learn.com/basic/firstlist.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:53:54.283

作为 Valence API 用户，您可以采取两个步骤来让自己工作：

1.  下载[客户端库](http://docs.valence.desire2learn.com/clients/index.html)并使用它，以及[入门示例](http://docs.valence.desire2learn.com/samples/gettingStarted.html)，以启动并运行“valence.desire2learn.com”。该示例具有一组测试应用凭据和一个测试用户，您可以使用该用户进行一两次简单调用：从测试 LMS 获取产品版本表，并获取测试用户的“whoami”信息。

    您可以使用此级别的引导程序让您自己达到这样一个阶段：您拥有一个可以通过 LMS 进行身份验证过程的客户端框架，然后创建经过身份验证的 URls 以针对 LMS 进行 API 调用。

2.  实际工作的下一步需要您拥有可以工作的 LMS，以及该 LMS 上的用户帐户。您可以在这里尝试几种方案：

    *   与拥有可以测试的测试环境的现有供应商或机构合作。

    *   完成成为[D2L 合作伙伴](http://www.desire2learn.com/partners/)所需的步骤：一旦您这样做了，合作伙伴计划可以为您提供一个测试 LMS，您可以使用它来满足您的开发需求。

# java - 反正有没有直接开始你的一项活动？

> ID：13371009
> 
> 赞同：0
> 
> 时间：2012-11-14T00:01:17.430
> 
> 标签：java, android, android-testing

> **可能重复：**
> [如何在另一个应用程序中启动活动？](https://stackoverflow.com/questions/2209513/how-to-start-activity-in-another-application)

我的应用程序架构是这样的；

```
SplashActivty ( <category android:name="android.intent.category.LAUNCHER" /> )
LoginActivity 
MainActivty 
    BanksActivity ( Gridview  of some banks ) 
      BankActivity ( Some detail information  about selected bank )
          Request loan 
          etc.
    HotelsActivty ( Gridview of some hotels ) 
          HotelActivty 
          etc. ( same hierarcy as banks...) 
```

附加信息：所有活动/操作都请求 api 调用以检索该屏幕的信息和资产。

我的场景/问题是；

反正有吗？我可以直接从我的应用程序外部启动 BanksActivty 或其他既不是启动器也不是 mainActivity 的活动之一？

这个问题有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:16:56.390

是的你可以。如果您想从主屏幕启动它，只需将以下内容添加到您的`AndroidManifest.xml`（并删除该活动的原始行）：

```
 <activity android:name="MyHotelActivity"
              android:label="MyHotelActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

您`MyHotelActivity`将在已安装的程序中有一个图标。

您也可以启动它以响应您可能想要注册的任何其他“intent-filter”类型。

问候。

# php - Ajax/PHP/MySQL 和运行代码

> ID：13371010
> 
> 赞同：3
> 
> 时间：2012-11-14T00:01:22.703
> 
> 标签：php, jquery, ajax

我正在开发我的第一个单页应用程序，但我不确定存储页面数据的最佳方式。

我进行了设置，以便将页面内容保存在我的数据库中，当用户单击其中一个导航链接时，它会对提取页面内容的进程文件进行 ajax 调用，将其格式化为 json 并回显它返回以便 jQuery 可以填充页面。

我遇到的问题是，如果数据库中的任何页面内容包含 PHP，则 PHP 不会被处理甚至显示（但是，如果我查看源代码，我会看到原始 php）。他们是否是解决此问题的更好方法，以便代码运行？

我的 Ajax 调用：

```
$("nav a").click(function(e) {
    e.preventDefault();
    var page = $(this).attr("href");
    $("nav a").removeClass("menuSelected");
    $(this).addClass("menuSelected");

    form_data = {
        action: "load",
        page: page,
        is_ajax: 1
    }

    $.ajax({
        type: "post",
        url: "process.php",
        dataType: "json",
        data: form_data,
        success: function(data) {
            if(data.success === "true") {
                $("#asideLeft").html(data.aside_left);
                $("#contentMiddle").html(data.content_middle);
                $("#asideRight").html(data.aside_right);
            } else {
                $("#contentMiddle").html("<h1>AJAX Failure</h1>");
            }
        }
    }); 
```

当用户单击链接时调用我的 PHP 代码：

```
if($action == "load") {
    $pms->connect();
    $result = $pms->dbh->prepare("SELECT * FROM pages WHERE name=:name");
    $result->execute(array(':name' => $page));
    $page = $result->fetch(PDO::FETCH_OBJ);
    $data['success'] = "true";
    $data['aside_left'] = $page->aside_left;
    $data['content_middle'] = $page->content_middle;
    $data['aside_right'] = $page->aside_right;
    echo json_encode($data);
} 
```

以及保存在数据库中的 HTML/PHP 示例：

```
<h1>Content Middle</h1>
<p>Today is <?php echo date("Y-m-d H:i:s"); ?> </p> 
```

感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:04:18.743

+1 的问题。我同意 php 代码和 html（来自数据库）应该分开。特别是，在服务器端组装 json 数据时，您应该调用您现在存储在数据库中的所有 php 代码。因此，与其在数据库中存储类似：

```
<p>Today is <?php echo date("Y-m-d H:i:s"); ?> </p> 
```

你可以这样写：

```
$data['success'] = "true";
$data['aside_left'] = $page->aside_left;
$data['content_middle'] = $page->content_middle;
$data['aside_right'] = "<p>Today is" . date("Y-m-d H:i:s") . "</p>";
echo json_encode($data); 
```

是的，这不像从数据库中检索数据那样干净，但是所有服务器端脚本都应该在服务器端执行。尤其是像这样的问题 - 比如打印今天的日期和类似的问题 - 可以使用 JavaScript 解决，它可以轻松存储在数据库中（例如，您在数据库中存储一个函数，一旦加载到服务器端，返回当前日期）。如果您在数据库中存储如下记录，则可以实现这一点：

```
"<p><script>(new Date()).toString('dddd, MMMM ,yyyy');</script></p>" 
```

加载后，它将在**p**标签内显示当前日期。

另一种解决方案，如果 JavaScript 根本不是一个选项，并且您必须使用 PHP，这可以通过对服务器端的另一个请求来实现，如下所示：

```
.
.
$data['aside_right'] = "<p>Today is:<script> $.ajax({type:'post',url:'processSomeMore.php',dataType:'json',data:form_data,success:function(data) {...}});
</script></p>";
echo json_encode($data); 
```

一旦 JavaScript 代码与从数据库中检索到的其余 html 一起发送到客户端，它将向服务器发出另一个请求，要求通过 ajax 获取更多数据。希望这不会太令人困惑:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:08:59.523

这是因为 php 是一个服务器端脚本局域网，你不能将它解析到客户端，除非它是 js/jquery 脚本，它将通过 ajax 从 php 脚本加载结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:09:08.070

好吧，您不能只导出数据库内容；你必须通过`eval()`。但是在你的例子中这特别难的是`eval`只处理 PHP 代码；它无法处理您提供的 PHP 和 HTML 的混合。因此，要么您将数据库片段全部设为 PHP（通过 HTML 内容`echo`-ed 或`print`ed），要么您必须投入时间和精力来了解如何分离这些内容。（后一个问题起初可能看起来像是一个正则表达式，但结果确实很难完全解决）。

但也许您想要查看的不是完整的 PHP 和 HTML 的组合，而是一种模板语言——例如，在交付之前将 Smarty 片段存储在您使用 Smarty 处理的数据库中？（我们已经在我们自己的两个产品中成功使用了这样的数据流——通过 AJAX 的智能输出。）

# sql-server - 如何使用 TortoiseCVS 对存储过程进行版本控制

> ID：13371011
> 
> 赞同：2
> 
> 时间：2012-11-14T00:01:53.897
> 
> 标签：sql-server

我需要对在 SQL Server Management Studio 2008 上创建的存储过程进行版本控制。如何将 TortoiseCVS 配置为 SSMS 源代码控制的外部工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:42:56.850

我是 SQL Source Control 的产品经理，它为各种源代码控制系统提供 SSMS 集成。CVS 不支持开箱即用，但它*可能*是可能的，因为我们确实提供了一种让您通过修改以下文件夹中的配置文件来指定自己的命令行的方法：

%AppData%\Local\Red Gate\SQL 源代码控制 3\CommandLineHooks\

如果您对此感到困惑，请联系 Red Gate 支持 (support@red-gate.com)。有关 SQL 源代码控制的更多信息，请访问：

[http://www.red-gate.com/products/sql-development/sql-source-control/](http://www.red-gate.com/products/sql-development/sql-source-control/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:27:43.237

如果 SSMS 就像视觉工作室一样！默认情况下，对源代码控制插件的唯一原生支持是安全且 perforce 的可视源代码？要支持任何其他内容，将涉及自由市场上的外部插件或开发自己的插件。

# facebook - facebook - 应用详情页面 - 尝试上传封面图片时出错

> ID：13371013
> 
> 赞同：2
> 
> 时间：2012-11-14T00:02:11.837
> 
> 标签：facebook, image, cover

我正在尝试完成创建 Facebook 应用程序。您可能还记得 FB 请求许多特定尺寸的不同图像。由于某种原因，我无法上传封面图片（800x150 像素）。我尝试了各种文件，但总是收到错误消息“您尝试上传的图像无效。它可能已损坏，文件格式错误或大小错误。”

谁能帮助解释为什么我在处理这个文件时遇到了困难？

谢谢！

# haskell - Haskell 提示/为什么不能线性扩展？

> ID：13371014
> 
> 赞同：5
> 
> 时间：2012-11-14T00:02:27.560
> 
> 标签：haskell, recursion, tail-recursion

我的朋友写了一个程序，它比较骰子面的随机排列，以找到分布最均匀的面——尤其是当面不仅仅是一个序列时。

我将他的程序翻译成haskell，因为我一直在寻找一个理由来谈论haskell 有多酷。然而，我对 haskell 不是很精通（我花了很长时间才写这个，并且经历了几次巨大的重构），所以我有两个问题。

1.  他一直在优化他的版本，这不是很快，也不是线性扩展。我搞砸了一些尾递归还是某种更大的问题？
2.  由此产生的代码实际上并不像我预期的那样优雅。我知道这不是一个讨论板，但是如果您对如何简化它有任何想法，我会全力以赴

这是最相关的代码：

```
-- _CENTERS :: [{ x :: Float, y :: Float, z :: Float}]
-- _VALUES :: [Num]

-- Basically just (repeat $ map rand [0.._SIDES]), but never using a seed twice
randstates from = (take _SIDES (infrand from)) : randstates newseed
    where   infrand seed = seed : infrand (shuffle seed)
            newseed      = (infrand from) !! (_SIDES + 1)

-- yates shuffle
yates _ (last:[]) = [last]
yates (rand:pass) (swap:order) = choice:yates pass rorder
        where   choice = order !! index
                index  = (randfrom rand) `mod` (length order)
                rorder = take (index) order ++ swap : drop (index + 1) order

arrangements seed = map arrange $ randstates seed
        where   arrange rands = yates rands [0.._SIDES - 2]

-- fns comparing arrangements --
arcLength i j = 1 / (1 + _WEIGHT * acos(dot3D / _VEC_LEN_SQUARED))
        where   dot3D    = apply x + apply y + apply z
                apply fn = (fn i) * (fn j)

matrix arr = map crosscmp arr
        where   crosscmp s1  = [ value s1 * (distance s1 s2) | s2  <- arr ]
                distance a b = arcLength (_CENTERS !! a) (_CENTERS !! b)
                value s      = fromInteger $ _VALUES !! s

variance arr = sum $ map perside (matrix arr)
        where   perside s = (sum s - mean) ^ 2
                mean      = (sum (concat $ matrix arr)) / (sides + 1)
                sides     = fromInteger $ toInteger _SIDES

maxDistr = maximumBy (\a b -> variance a `compare` variance b) 
```

主要基本上只是

```
print $ maxDistr $ take _TRIALS $ arrangements seed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-23T05:53:59.683

正如评论所指出的，它不能像索引到列表中那样线性扩展`O(index)`。您需要迁移到数组结构才能开始看到改进。

# html - 如何将 !important 添加到 CSS 文件中的每个元素

> ID：13371016
> 
> 赞同：0
> 
> 时间：2012-11-14T00:02:56.940
> 
> 标签：html, css, overriding

> **可能重复：**
> [是否有设置 !important 在 CSS 文件中的每个属性上的快捷方式？](https://stackoverflow.com/questions/7640847/is-there-a-shortcut-for-setting-important-on-every-property-in-a-css-file)

我有一个独特的问题。在 css 中，`!important` 覆盖任何已经声明的元素 - 但是假设我希望*所有*样式都覆盖任何其他提到的样式表；好吧，通常我会将覆盖放在 html 文件中，如下所示：

```
<link rel="stylesheet" type="text/css" href="mystyle.css">
<link rel="stylesheet" type="text/css" href="override.css"> 
```

但由于某种原因，这不起作用。具体来说，我正在做的是添加类来附加基本的 CSS 样式。像这样：

```
<div class="no-border-right float-left no-margin-top"></div> 
```

在我的 CSS 中：

```
.no-border-right {
    border-right: 0px solid transparent;
}

.float-left {
    float: left;
}

.no-margin-top {
    margin-top: 0;
} 
```

但是，它仍然不是压倒一切的。我只想添加`!important`到每个元素，但问题是，我已经构建了 14gb 库。（我只有在无聊的时候才这样做……呵呵：P）所以我想知道如何添加`!important`到每个元素中。像：

```
* {
    ...!important;
} 
```

也许甚至没有……有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:09:44.893

```
sed -i 's/;$/ !important;/' override.css other.css css.css files.css 
```

只需物理添加它们。阅读其他答案，了解为什么`!important`这不是一个好主意，但永远不要说我们没有给你足够的绳索让你上吊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:10:10.703

可能您的新选择器的优先级低于您在 mystyle.css 上的选择器？

[CSS/训练/选择器的优先级](http://www.w3.org/wiki/CSS/Training/Priority_level_of_selector)

[CSS：了解选择器的优先级/特异性](https://stackoverflow.com/questions/4072365/css-understanding-the-selectors-priority-specificity)

!important 覆盖这些计算，但是如果可能的话，应该避免使用标准方式的黑客攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:07:01.697

没有简单的方法可以为文件中的每个元素添加重要信息。话虽如此，这`!important`是一个非常糟糕的主意，并且只能作为最后的手段使用，因为它破坏了在 CSS 中覆盖样式的自然能力。您需要了解[CSS 选择器的特殊性](http://css-tricks.com/specifics-on-css-specificity/)，这就是您的样式不会覆盖前一个文件中的样式的原因。第一个文件中的样式可能更具体。

请显示内容`mystyle.css`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:07:58.010

这是一个坏主意...阅读我在下面链接到的文章。

尽管如此，答案仍然是否定的，没有办法在 CSS 中做到这一点。但是，由于您包含 CSS 文件（在 HTML 中）的顺序，override.css 将优先于 mystyle.css。向 CSS 文件中的每个声明添加重要信息是公然的误用。阅读[Chris Coyier](http://css-tricks.com/when-using-important-is-the-right-choice/)的这篇文章，了解更多关于何时使用它适合使用与何时不应该使用它的详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T02:14:40.970

如果要覆盖上述或已实现的样式，请使用层次结构中更高的选择器。每次更具体时，层次结构中较高的 CSS 样式都会被覆盖。

例如：

```
HTML:
   <div class="container">
    <div class="old-style stale vintage">
      <div class="new-style override-old-style">
        <div class="no-border-right float-left no-margin-top">
        </div>
       </div>
    </div>   
   </div>

 CSS:
  .no-border-right{border-right: 0px solid transparent;}

  .new-style .float-left{float: left;}

  .old-style .no-margin-top{margin-top: 0;} 
```

.new-style .float-left 应该覆盖 .no-border-right。并且 .old-style .no-margin-top 应该覆盖这两种样式。如果您尝试使用同一级别的样式，例如 .no-border-right .float left，则同一级别的样式将被抵消。当您在样式表中向下移动时，样式必须有更详细的描述。使用新的选择器添加您想要覆盖的新样式。我通过在同一站点上工作的一组开发人员使用的样式表中使用 !important 来学习这种方法。这不漂亮。

如果您必须获得比类更具体的信息，并且您正在更改特定元素，请继续使用 ID。我知道大多数 Web 开发人员都看不起它。但是，如果小心处理并偶尔使用，它们会很有用。不要对他们发疯。它们非常适合用于个性化、模式等。同样，请小心处理。

最重要的是，让 !important 覆盖你的最后手段。把它想象成一个紧急按钮。仅在可怕的超控紧急情况下使用。

# c++ - 使用 std::mutex、std::condition_variable 和 std::unique_lock

> ID：13371020
> 
> 赞同：13
> 
> 时间：2012-11-14T00:03:14.920
> 
> 标签：c++, multithreading, concurrency, mutex, condition-variable

我在理解条件变量及其与互斥锁的使用方面遇到了一些麻烦，我希望社区可以帮助我。请注意，我来自 win32 背景，所以我与 CRITICAL_SECTION、HANDLE、SetEvent、WaitForMultipleObject 等一起使用。

这是我第一次尝试使用 c++11 标准库进行并发，它是[此处找到的程序示例](http://en.cppreference.com/w/cpp/thread/condition_variable)的修改版本。

```
#include <condition_variable>
#include <mutex>
#include <algorithm>
#include <thread>
#include <queue>
#include <chrono>
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{   
    std::queue<unsigned int>    nNumbers;

    std::mutex                  mtxQueue;
    std::condition_variable     cvQueue;
    bool                        m_bQueueLocked = false;

    std::mutex                  mtxQuit;
    std::condition_variable     cvQuit;
    bool                        m_bQuit = false;

    std::thread thrQuit(
        [&]()
        {
            using namespace std;            

            this_thread::sleep_for(chrono::seconds(7));

            // set event by setting the bool variable to true
            // then notifying via the condition variable
            m_bQuit = true;
            cvQuit.notify_all();
        }
    );

    std::thread thrProducer(
        [&]()
        {           
            using namespace std;

            int nNum = 0;
            unique_lock<mutex> lock( mtxQuit );

            while( ( ! m_bQuit ) && 
                   ( cvQuit.wait_for( lock, chrono::milliseconds(10) ) == cv_status::timeout ) )
            {
                nNum ++;

                unique_lock<mutex> qLock(mtxQueue);
                cout << "Produced: " << nNum << "\n";
                nNumbers.push( nNum );              
            }
        }
    );

    std::thread thrConsumer(
        [&]()
        {
            using namespace std;            

            unique_lock<mutex> lock( mtxQuit );

            while( ( ! m_bQuit ) && 
                    ( cvQuit.wait_for( lock, chrono::milliseconds(10) ) == cv_status::timeout ) )
            {
                unique_lock<mutex> qLock(mtxQueue);
                if( nNumbers.size() > 0 )
                {
                    cout << "Consumed: " << nNumbers.front() << "\n";
                    nNumbers.pop();
                }               
            }
        }
    );

    thrQuit.join();
    thrProducer.join();
    thrConsumer.join();

    return 0;
} 
```

关于这个的几个问题。

[我读过](http://en.cppreference.com/w/cpp/thread/condition_variable)“任何打算等待 std::condition_variable 的线程必须首先获取一个 std::unique_lock 。”

所以我有一个 {quit mutex, condition variable & bool} 来指示何时发出退出信号。生产者和消费者线程必须分别获取一个 std::unique_lock ，如下所示：

```
std::unique_lock<std::mutex> lock(m_mtxQuit); 
```

这让我很困惑。这不会将退出互斥锁锁定在第一个线程中，从而阻塞第二个线程吗？如果这是真的，那么第一个线程如何释放锁，以便另一个线程可以开始？

另一个问题：如果我将 wait_for() 调用更改为等待零秒，则该线程将被饿死。有人可以解释吗？我希望它在执行 while 循环之前不会阻塞（我是否正确假设 no_timeout 是recv'd 而不是超时？）。

如何调用 wait_for() 并指定零时间，以便 wait_for() 调用不会阻塞，而只是检查条件并继续？

我也很想听听关于这个主题的好的参考资料。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T00:53:55.113

> 这不会将退出互斥锁锁定在第一个线程中，从而阻塞第二个线程吗？

是的。

> 如果这是真的，那么第一个线程如何释放锁，以便另一个线程可以开始？

当您等待时，`condition_variable`它会解锁您通过它的锁，所以在

```
cvQuit.wait_for( lock, chrono::milliseconds(10) ) 
```

条件变量将调用`lock.unlock()`然后阻塞长达 10 毫秒（这是原子发生的，因此在解锁互斥锁和阻塞条件可以准备好的地方之间没有窗口，你会错过它）

当互斥锁被解锁时，它允许其他线程获取它的锁。

> 另一个问题：如果我将 wait_for() 调用更改为等待零秒，则该线程将被饿死。有人可以解释吗？

我希望*另一个*线程被饿死，因为互斥锁的解锁时间不足以让另一个线程锁定它。

> 我是否正确假设 no_timeout 是recv'd 而不是超时？

不，如果持续时间过去了，条件还没有准备好，那么即使在零秒之后它也会“超时”。

> 如何调用 wait_for() 并指定零时间，以便 wait_for() 调用不会阻塞，而只是检查条件并继续？

不要使用条件变量！如果您不想*等待*条件变为真，请不要等待条件变量！只需测试`m_bQuit`并继续。（除此之外，为什么你的布尔值被称为`m_bXxx`？他们不是成员，所以`m_`前缀具有误导性，而且`b`前缀看起来像匈牙利表示法的那种糟糕的 MS 习惯......这很臭。）

> 我也很想听听关于这个主题的好的参考资料。

最好的参考是 Anthony Williams 的[C++ Concurrency In Action](http://www.manning.com/williams/)，它详细介绍了整个 C++11 原子和线程库，以及多线程编程的一般原则。我最喜欢的一本关于该主题的书是 Butenhof 的[Programming with POSIX Threads](https://rads.stackoverflow.com/amzn/click/com/0201633922)，它专门针对 Pthreads，但 C++11 工具与 Pthreads 的映射非常接近，因此很容易将信息从该书转移到 C++11 多线程.

注意：在`thrQuit`你写入时`m_bQuit`没有使用互斥锁保护它，因为没有什么能阻止另一个线程在写入的同时读取它，这是一个竞争条件，即未定义的行为。对 bool 的写入必须受互斥体保护或必须是原子类型，例如`std::atomic<bool>`

我认为您不需要两个互斥锁，它只会增加争用。`mtxQuit`由于您在等待时从不释放except ，`condition_variable`因此拥有第二个互斥锁毫无意义，因此`mtxQuit`已经确保只有一个线程可以一次进入临界区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T00:53:20.637

如果你想检查某事并继续不管它是否真实（可能做两件不同的事情），那么使用条件变量是错误的。条件变量是与锁定数据结构相关的某些条件的低级原语，您希望等待而无需旋转获取和释放锁。典型的例子是队列——你有一个锁保护对队列的访问和两个条件变量（队列不为空，队列不满）。要在队列中推送某些内容，您需要获取锁，检查它是否未满，等待未满的 condvar（如果是），将值推送到队列中，向非空 condvar 发出信号（因为它不再为空）和释放锁。pop 操作类似。

因此，在您的情况下，您有一个不能满的简单队列，因此您需要一个锁和一个 condvar。完全有道理。但是，您有一个“退出”标志，您希望触发完成。你不想等待退出标志被设置——你想实际工作直到它被设置——所以 condvar 在这里真的没有意义。是的，你可以想出一个复杂的安排来使它工作，但这会令人困惑，因为它不使用条件变量作为条件变量。

`std::atomic<bool>`仅将 a用于退出标志更有意义（并且更清晰） 。然后你只需将它初始化为 false，在退出线程中设置为 true，然后在其他线程中检查它。

# c# - C# - 如何从键转换为 System.Windows.Forms.Key

> ID：13371022
> 
> 赞同：0
> 
> 时间：2012-11-14T00:03:21.593
> 
> 标签：c#, char, virtual, translate, keycode

> **可能重复：**
> [C#如何将虚拟键码转换为字符？](https://stackoverflow.com/questions/318777/c-sharp-how-to-translate-virtual-keycode-to-char)

基本上我有一个 ascii 字符列表，我需要将其转换为 System.Windows.Forms.Key（用于 PostMessage）。无论键盘/区域/语言环境等如何，它都需要工作......

我知道如果它来自 AZ，你可以直接投射它，但没有其他方法。有没有人弄清楚这一点？

我说的是 [、]、<、> 等键......所有非数字和非 A 到 Z。

谢谢！

乔什

# computer-science - 自动计算终止算法的算法时间复杂度

> ID：13371025
> 
> 赞同：6
> 
> 时间：2012-11-14T00:03:54.413
> 
> 标签：computer-science, big-o, code-analysis, time-complexity, halting-problem

这里有很多关于 SO 的相关问题，但他们都询问是否编写程序来计算任意算法的复杂度（这显然是无法确定的）。我愿意对输入做以下限制：

1.  算法终止
2.  该算法是纯函数式的

问题是，是否可以编写一个程序来通过静态分析计算这种算法的时间复杂度？如果输入算法没有终止，则程序行为未定义（它可能会崩溃、返回谎言或无法终止）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:39:20.087

您不能 100% 确定您从任何技术中得到正确答案，以根据实际运行时间估算复杂性。这是因为确切的运行时间可能涉及一个非常复杂的函数，这意味着运行时间理论上可以跟随任何其他函数，而输入大小低于某个非常大的数字。当输入大小趋于无穷大时，运行时间只需要趋向于复杂度函数（一些倍数）。这假设您想要找到一个[紧密的界限](https://stackoverflow.com/questions/464078/what-is-the-difference-between-lower-bound-and-tight-bound)（它存在于许多但不是所有的算法中），而不仅仅是一个上限或下限。

但是您可以对通常应该非常准确的复杂性提出一些合理的估计。

另请注意，对于相同大小的不同输入，许多算法具有不同的运行时间。您可以尝试对相同大小的几个不同输入运行以下命令，并对结果进行平均以减轻这种情况。这也将有助于缓解可能影响运行时间的系统条件。尽管如果您不知道要用于这些情况的具体输入，您可能无法估计最坏和最好情况的复杂性（因为它们可能太少了，以至于您在传递随机数据时无法获取它们）。

**这该怎么做：**

记录一些足够大和足够不同大小的输入的时间（例如，您可以为大小等于 10 的不同幂的输入运行它，例如 100、1000 和 10000，这些应该足够大，可以运行至少一个几秒钟以减少数据的噪音）。让我们使用 3 个输入大小。严格来说，您只需要 2 个输入大小，但您可以使用 3 个或更多作为附加验证。

现在我们可以尝试将我们得到的这 3 个结果映射到一组复杂性中的一个，例如`O(1)`, `O(log(n))`, `O(sqrt(n))`, `O(n)`, `O(n log n)`, ,等。`O(n²)``O(n³)`

如果您尝试手动匹配它，您可以将获得的运行时间与上述每个函数的图表（适当缩放）一起放在图表上，然后查看哪个最匹配。

如果您尝试使其自动化，您可以尝试将每个函数映射到输入大小并查看它匹配的接近程度。

有更好的方法可以做到这一点，但一种非常简单的方法如下：

假设您有以下运行时间：

```
input size   running time
100          21 seconds
1000         29 seconds
10000        40 seconds 
```

现在您可以尝试将其中一个（比如最大的一个，这可能是最准确的）与上述函数之一的倍数相匹配。

```
O(n):     k x n     = k x 10000     = 40,    k = 40 / 10000     = 0.004
O(log n): k x log n = k x log 10000 = 40,    k = 40 / log 10000 = 10
O(n²):    k x n²    = k x 10000²    = 40,    k = 40 / 10000²    = 0.0000004 
```

现在将等式给出的内容与其他输入大小的实际运行时间进行比较：

```
For n = 1000, actual running time = 29 seconds
O(n):     0.004 x 1000      = 4 seconds
O(log n): 10 x log 1000     = 30 seconds
O(n²):    0.0000004 x 1000² = 0.4 seconds

For n = 100, actual running time = 21 seconds
O(n):     0.004 x 100      = 0.4 seconds
O(log n): 10 x log 100     = 20 seconds
O(n²):    0.0000004 x 100² = 0.004 seconds 
```

看看这个，我们可以清楚地看到这`O(log n)`是最接近的，在这两种情况下，实际运行时间和预测运行时间仅相差 1 秒。所以这将是我们对复杂性的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:17:56.597

我终于问对了地方，得到了答案。不。

[https://cstheory.stackexchange.com/questions/14969/algorithmically-compute-a-reasonable-bound-on-the-runtime-of-an-algorithm#comment40524_14969](https://cstheory.stackexchange.com/questions/14969/algorithmically-compute-a-reasonable-bound-on-the-runtime-of-an-algorithm#comment40524_14969)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:49:06.257

鉴于算法停止的限制，它是可能的。为每个可能的输入执行算法并测量执行时间。接下来，选择一个函数作为可能的上限，并针对每个结果对其进行测试。如果不够好，增加边界并重新测试。重复直到边界足够好。

**编辑**：这个解决方案假设一个真正的计算机程序的边界，即不同输入的数量不是无限的。否则，不可能计算**通用**算法的复杂度。考虑复杂度为 的算法`O(n) = n`^(`O(n-1)`)。由于输入是无限的，您将无法找到任何`f`可以限制复杂性的函数。

# javascript - 为什么 Closure Compiler 会生成不同的语法？

> ID：13371028
> 
> 赞同：1
> 
> 时间：2012-11-14T00:04:13.380
> 
> 标签：javascript, google-closure-compiler

为什么 Closure Compiler 会为以下两个函数生成不同的代码（使用*高级选项）：*

```
 var function1 = function() {
        return 1 * Math.random();
  };

  window['function1'] = function1;  // export function1

  var function2 = function() {
        return function1() + 1;
  };

  window['function2'] = function2;  // export function2 
```

这是生成的代码：

```
 function a() {
        return 1 * Math.random();
  }

  window.function1 = a;

  window.function2 = function() {
        return a() + 1;  // call to a() fails in a more complex example
  }; 
```

请注意，`function1`已重命名`a`并`a`分配给全局变量`function1`。`function2`没有其他变量名与之关联。为什么？

我问的原因是，在我的代码的情况下，对`function1`from的调用`function2`失败，因为重命名`function1`不被视为函数调用，`function2`而是 Javascript 解释器认为这`a()`是一个数字。

任何见解都值得赞赏。TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:44:06.760

使用 ADVANCED_OPTIMIZATIONS，闭包编译器将删除未使用的代码。由于唯一的用途`function2`是在导出中，因此直接对导出的名称进行赋值（而不是首先对变量进行赋值）。 `function1`被导出和使用，`function2`因此编译器保留了初始命名函数，因为它被引用了两次。

至于失败，我们需要查看您的实际代码来解释发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T06:49:57.903

如果“a”是一个数字，它很可能会被其他东西覆盖。如果您不使用多个模块，请尝试使用输出包装器选项来隔离全局变量（如果您使用多个模块，还有其他选项可以隔离全局变量）。通常在“windows.a”上定义一个设置器并在那里设置一个断点会让你知道这个覆盖是如何发生的。

# sorting - 使用 malloc 对名称进行排序时不断出现段错误

> ID：13371030
> 
> 赞同：0
> 
> 时间：2012-11-14T00:04:20.023
> 
> 标签：sorting, segmentation-fault, malloc

我想读取一个文件，然后在一个按字母顺序排序的数组中写入文件。但是，我在使用 gdb 时不断遇到分段错误，这表明我的显示和排序功能出现分段错误。

编辑：我通过使用宏分配内存来修复它。由于这是一项任务，我不想透露它以防万一。我非常感谢大家对我的代码的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:24:07.660

你应该这样做吗？哎哟。

我也遇到了段错误，但是在 read_names() 中。我可以通过用一个简单的 scanf() 替换所有 strtok() 东西来修复它：

```
 void read_names (FILE *fp, char **f, char **l, char *m, int num)//read it
    {
        int i=0;
        char temp[80];

        for (i=0; i<num; i++)
        { 
            fscanf( fp, "%s %s %s", f[i], l[i], m);
        }
    } 
```

之后，我能够进行排序和打印，尽管它最后试图错误地释放（）某些东西。

我一般 strtok() 是不安全的，只是一种痛苦 - 它会破坏你的字符串。

此外，更有意义的名称使其更易于使用。我最终发现“l[]”是一个包含姓氏的字符串数组，但是类似于“sLastName[]”的东西会大大加快速度。

编辑：

我收集了您的输入文本文件，如下所示：

```
2 bill smith a doug adams r 
```

编辑2：

好的，发现另一个段错误。什么是“数”？它似乎被解释为文件中名称的数量和每个名称的大小？

```
// allocate "num" first name elements -> implied "num" is # of names
f=(char**)malloc (num*sizeof(char*));

// allocate space for each name... but uses the value of "num" for each name
for (i=0; i<num;i++)
    f[i]=(char*)malloc (num*sizeof(char));  // "num" bytes per name? 
```

当我开始为每个名称分配 100 个字节而不是“num”的值时，第二个 - 对我来说也是最后一个 - 段错误消失了。

有没有进入整个程序然后开始测试？让它以小步骤工作然后逐步添加功能会容易得多 - 使用调试器和/或 printf() 验证它在每一步都在做你想做的事情。

# asp.net-mvc - Telerik MVC 网格与 ExpandoObject 列表

> ID：13371034
> 
> 赞同：4
> 
> 时间：2012-11-14T00:04:39.160
> 
> 标签：asp.net-mvc, dynamic, telerik, telerik-grid

我正在尝试将 Telerik MVC 与动态 ExpandoObjects 的集合一起使用。

控制器是：

```
[GridAction]
public ActionResult TestDiario()
{
        var result = new List<dynamic>();

        dynamic diarioModel = new ExpandoObject();

        var dictionary = (IDictionary<string, object>)diarioModel;

        dictionary.Add("ID", 1);
        dictionary.Add("AlunoID", 12781);
        dictionary.Add("DAY05CLASS1", true);
        dictionary.Add("DAY05CLASS2", true);
        dictionary.Add("DAY07CLASS1", true);
        dictionary.Add("DAY08CLASS1", true);

        result.Add(diarioModel);
        return View(result);
} 
```

视图是：

```
@using Telerik.Web.Mvc.UI

@model IEnumerable<dynamic>

@{
    ViewBag.Title = "TestDiario";
}

@(Html.Telerik().Grid(Model).Name("Grid")
    .DataKeys(dataKeys => dataKeys.Add("ID"))
    .Columns(columns => 
    { 
        columns.Bound("MatAnoID").Visible(true);
        columns.Bound("AlunoID");
        columns.Bound("NroClasse");
        columns.Bound("Aluno");

        var dictionary = (IDictionary<string, object>)Model;
        foreach (var property in (IDictionary<String, Object>)dictionary)
        {
            if (property.Key.ToString().Remove(3) == "DAY")
            {
                columns.Bound(property.Key);
            }
        }
    })
    .Pageable()
    .Sortable()
    .Groupable()
    .Filterable()

) 
```

循环 foreach 获取由 DAY 字符串开始的动态字段。

当我运行项目时，出现以下错误：

{“不可能转换类型化对象'System.Collections.Generic.List `1[System.Object]' to type 'System.Collections.Generic.IDictionary`2[System.String,System.Object]'。”}

有没有办法使用带有循环字段的 Telerik MVC Control 动态对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:38:13.040

是的，你可以，而且你很接近，但犯了一些错误。

1) Model 不是 IDictionary 类型，因为它不是 expando 对象。它是一个动态列表。

这有点小技巧，但为了解决这个问题，我只取了可枚举中的第一个（或默认）元素，然后从中制作了一个字典。

2) 您正在尝试绑定在您的 expando 对象中不作为属性存在的列。

我评论了那些。

3）我*认为*您正在寻找以“DAY”开头的键。如果您想从列名中删除“DAY”，您可以调整我的示例代码。

除此之外它工作正常：

```
@(Html.Telerik().Grid(Model).Name("Grid")
    .DataKeys(dataKeys => dataKeys.Add("ID"))
    .Columns(columns => 
    { 
        //NOTE: some of these columns are not valid because you didn't include them as properties
        //columns.Bound("MatAnoID").Visible(true);
        //columns.Bound("NroClasse");
        //columns.Bound("Aluno");

        columns.Bound("AlunoID");

        var first = Model.FirstOrDefault();
        if (first != null) {
            var dictionary = (IDictionary<string, object>)first;
            foreach (var property in dictionary) {
                string key = property.Key.ToString();
                if (key.StartsWith("day", StringComparison.InvariantCultureIgnoreCase)) {
                    columns.Bound(property.Key);
                }
            }
        }

    })
    .Pageable()
    .Sortable()
    .Groupable()
    .Filterable()
) 
```

# html - 为什么在提交表单后，带引号的值会被读取为空白？

> ID：13371035
> 
> 赞同：3
> 
> 时间：2012-11-14T00:04:39.563
> 
> 标签：html, string, forms, submit

对于知道答案的人来说应该是一个简单的问题......

```
<input type="hidden" name="english" value="\"oh no! i left my umbrella on the train\" \"you are a scatterbrain!\""/>                                                

<input type="hidden" name="english" value=""oh no! i left my umbrella on the train" "you are a scatterbrain!""/> 
```

这些都不会正确提交表单中的字符串。如何获取要提交的带引号的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:07:33.560

您必须用[HTML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML) `&quot;`替换引号。所有与网络相关的编程语言都有一个简单的方法来做到这一点。

或者，您可以将值放在单引号而不是双引号内，这样您就可以使用双引号而不用实体替换它们——但是当然您必须将*单*引号转换为实体。

# sql - 访问更新声明

> ID：13371038
> 
> 赞同：0
> 
> 时间：2012-11-14T00:04:58.753
> 
> 标签：sql, ms-access

试图使列中的所有日期都为空，除了 10/15/2012 访问这里我到目前为止。

```
Update tbl_ReleaseTracking Set 2nd_Ltr_Sent= null WHERE  2nd_Ltr_Sent <> #10/15/2012# 
```

我在查询表达式 '2nd_LRT_Sent <> #10/15/2012# 中收到错误缺少运算符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:42:23.377

这将做你想要的：

```
Update tbl_ReleaseTracking Set [2nd_Ltr_Sent]= null 
WHERE [2nd_Ltr_Sent] <> #10/15/2012# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:07:20.710

尽管我不熟悉 MS Access，但我认为列不应该以数字开头。尝试用 `` 括住列名？

# iphone - 为什么我的完成块被 NSOperation 对象触发

> ID：13371040
> 
> 赞同：1
> 
> 时间：2012-11-14T00:05:14.877
> 
> 标签：iphone, objective-c, concurrency, nsoperation, nsoperationqueue

我有一个 NSOperation 自定义类，我在其中添加了一个方法来轻松接受块，以便我可以分配完成块。但是，即使我不调用该块，它也会返回到主调用类并发送消息并传递自身。

**`Interface :`**

```
@class  SKSimpleDownloadOperation;
typedef void(^CompletionBlock)(id Json, NSError *error);
@protocol SKSimpleDownloadDelegate <NSObject>
-(void)operation:(SKSimpleDownloadOperation*)operation didCompleteWithData:(NSData*)data;
-(void)operation:(SKSimpleDownloadOperation*)operation didFailWithError:(NSError*)error;
@end
@interface SKSimpleDownloadOperation : NSOperation
@property(nonatomic, assign) NSInteger statusCode;
-(id)initWithUrlRequest:(NSURLRequest*)request andDelegate:(id<SKSimpleDownloadDelegate>)aDelegate;
-(id)initWithUrlRequest:(NSURLRequest*)request andDelegate:(id<SKSimpleDownloadDelegate>)aDelegate withCompletionBlock:(void(^)(id json, NSError *error))completionBlock;
@end 
```

**`Implementation:`**

```
@interface SKSimpleDownloadOperation()<NSURLConnectionDataDelegate>
@property(nonatomic, strong) NSURLRequest *request;
@property(nonatomic, strong) NSMutableData *data;
@property(nonatomic, assign) id<SKSimpleDownloadDelegate>delegate;
@property(nonatomic, copy) CompletionBlock completionBlock;
@end
@implementation SKSimpleDownloadOperation
@synthesize delegate;
@synthesize request;
@synthesize statusCode;
@synthesize completionBlock;

-(id)initWithUrlRequest:(NSURLRequest *)aRequest andDelegate:(id<SKSimpleDownloadDelegate>)aDelegate withCompletionBlock:(void (^)(id, NSError *))aCompletionBlock{
    if(!(self = [super init])) return nil;
    [self setRequest:aRequest];
    [self setDelegate:aDelegate];
    [self setCompletionBlock:aCompletionBlock];
    return self;
}
-(id)initWithUrlRequest:(NSURLRequest *)aRequest andDelegate:(id<SKSimpleDownloadDelegate>)aDelegate{
    return [self initWithUrlRequest:aRequest andDelegate:aDelegate withCompletionBlock:nil];
}

-(void)main{
    [NSURLConnection connectionWithRequest:[self request] delegate:self];
    CFRunLoopRun();
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSHTTPURLResponse *)response{
    [self setStatusCode:[response statusCode]];
    [self setData:[NSMutableData data]];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)newData{
    [[self data] appendData:newData];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    if(self.delegate && [self.delegate respondsToSelector:@selector(operation:didCompleteWithData:)])
    [[self delegate] operation:self didCompleteWithData:[self data]];
    CFRunLoopStop(CFRunLoopGetCurrent());
//    if(completionBlock != nil){
//        [self performSelector:@selector(callBlockWithNecessaryParameter) onThread:[NSThread mainThread] withObject:nil waitUntilDone:NO];
//    }
}

-(void)callBlockWithNecessaryParameter{
    NSError *error = nil;
    id object = [NSJSONSerialization JSONObjectWithData:[self data] options:NSJSONReadingAllowFragments error:&error];
    // completionBlock(object,error);
    //completionBlock = nil;

}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    [[self delegate] operation:self didFailWithError:error];
    CFRunLoopStop(CFRunLoopGetCurrent());
}
@end 
```

我如何称呼手术；

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://query.yahooapis.com/v1/public/yql?q=select%20item%20from%20weather.forecast%20where%20location%3D%2248907%22&format=json"]];
    ViewController __weak *__viewController = self;
    NSOperation *operation = [[SKSimpleDownloadOperation alloc] initWithUrlRequest:request andDelegate:nil withCompletionBlock:^(id json, NSError *error) {
        [__viewController populateReceivedJSON:json];
    }];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue addOperation:operation];
    operation = nil;
    queue = nil;

-(void)populateReceivedJSON:(id)json{
    NSLog(@"JSON --> %@", json);
} 
```

正如您在上面的代码中看到的那样，我在 connectionDidFinishLoading: 方法中取消了对块的调用的注释，但是正在调用块并且正在触发 populateReceivedJSON 方法。

对我来说更有趣的是日志显示了与 NSOperation 子类相同的实例； **`JSON --> <SKSimpleDownloadOperation: 0x7462be0>`**

我不明白这里有什么问题？当我调用委托时，它工作正常，但块总是被调用。我要提前感谢您的热情建议和想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T03:14:11.243

[NSOperation 类参考](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSOperation_class/Reference/Reference.html)

> **completionBlock**
> 返回操作的主要任务完成时要执行的块。
> 
> -(void (^)(void))completionBlock
> **返回值**
> 操作的主要任务完成后要执行的块。这个块没有参数，也没有返回值。
> 
> **讨论** 当 isFinished 方法返回的值变为 YES 时，就会执行你提供的完成块。因此，**该块由操作对象在操作的主要任务完成或取消后执行**。

如果将操作放在队列上，则会在操作完成或取消时调用完成块。
此外，您的“自定义”完成块可能会干扰 NSOperation 的“完成块”。
`I would suggest using a different name for your custom completionBlock,`因为这不是您想要的 NSOperation completionBlock 的行为，而是其他东西。

# javascript - 有没有办法删除 window.open 事件？

> ID：13371043
> 
> 赞同：2
> 
> 时间：2012-11-14T00:05:27.123
> 
> 标签：javascript, jquery, onclick

> **可能重复：**
> [检查窗口打开](https://stackoverflow.com/questions/10932758/check-window-open)

我正在使用 JQuery 根据某些选择来更改 window.open 事件的 URL：

```
$(".class").click(function() {
    window.open("http://www.url.com/" + variable);
}); 
```

问题是每次更改时，我都必须再次调用此单击函数，并且仍然记得旧的 window.open 事件，并且打开了两个窗口，然后是 3，然后是 4，依此类推。

我已经尝试了很多解决方法，但没有任何效果。我尝试只调用一次 click 函数，然后更改变量，但 window.open 只会记住原始变量。

有没有办法在添加新的单击事件处理程序之前删除旧的单击事件处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:11:32.067

更改变量不起作用的原因是变量范围：匿名函数继承其原始上下文的范围，无论此后发生了什么。你有两个可能的答案：

不好：改用全局变量 ( `window.variable`)。

好：将 window.open 函数设置为变量本身：

```
WindowOpener = $(".class").click(function() {
    window.open("http://www.url.com/" + variable);
}); 
```

接着

```
WindowOpener.unbind(); 
```

随时清除先前的事件。Jamey Sharp 的回答也是正确的，除非您对绑定元素做一些不寻常的事情，否则可能会在您的场景中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:10:24.323

看看 $.unbind -- [http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)。你可以用它来删除你的旧事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:11:01.583

在添加新的`click`处理程序之前，您可以删除旧的处理程序：

```
$(".class").unbind('click'); 
```

# java - MySQL/Java 数据库

> ID：13371049
> 
> 赞同：1
> 
> 时间：2012-11-14T00:06:34.170
> 
> 标签：java, mysql

好吧，我继续使用 XAMPP，现在我通过网络主机托管我的 hiscores，我如何编辑这一行以便它与它一起工作，当我运行服务器时，它会抛出一个错误。

```
public static void createConnection() {
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            con = DriverManager.getConnection(
                    "jdbc:mysql://fdb4.awardspace.com/", "1191306_hiscores", "passremoved");
            stmt = con.createStatement();
                    Misc.println("Connected");
        } catch (Exception e) {
            Misc.println("Connection Problem");
        }] 
```

曾经是 localhost/hiscores 显然不再起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:25:18.300

没有堆栈跟踪很难，但我注意到您的 url 中缺少数据库名称，它应该类似于：

```
con = DriverManager.getConnection(
                    "jdbc:mysql://fdb4.awardspace.com/hiscores", "1191306_hiscores", "passremoved"); 
```

注意`jdbc:mysql://fdb4.awardspace.com/hiscores`vs。`jdbc:mysql://fdb4.awardspace.com/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:34:35.160

Awardspace 不允许在免费帐户上远程连接到 mysql 数据库。

您可以使用[http://www.freesqldatabase.com/](http://www.freesqldatabase.com/)

但非常有限，只有 5mb。这是我发现的唯一提供远程连接到 mysql 数据库的免费服务。

# c# - LINQ to xml - 如何选择特定节点？

> ID：13371052
> 
> 赞同：1
> 
> 时间：2012-11-14T00:07:15.767
> 
> 标签：c#, .net, xml, linq, xpath

我有这个xml。如何`<region>`根据“部分”选择一个？

```
<PhoneAndAddresses>
  <PageTitle></PageTitle>
  <region section="CityServices">
    <Business>
      <Name>
        Atlanta Police Department
        <Name>
          <Address>612 Magnolia St NW, Atlanta, GA 30314</Address>
          <Phone>404-658-6486</Phone>
        </Business>
    <Business>
      <Name>Atlanta Police Department</Name>
      <Address>398 Centennial Olympic Park Dr NW, Atlanta, GA 30313</Address>
      <Phone>404-658-6636</Phone>
    </Business>
  </region>
  <region section="Hospitals">
    <Business>
      <Name>
        Emory University Hospital
        <Name>
          <Address>612 Magnolia St NW, Atlanta, GA 30314</Address>
          <Phone>404-658-6486</Phone>
        </Business>
    <Business>
      <Name>
        St Joseph's Hospital
        <Name>
          <Address>398 Centennial Olympic Park Dr NW, Atlanta, GA 30313</Address>
          <Phone>404-658-6636</Phone>
        </Business>
  </region>
</PhoneAndAddresses> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:16:49.350

采用：

```
var result = XDocument.Parse(input).Descendants("region")
    .FirstOrDefault(e => (string)e.Attribute("section") == "CityServices"); 
```

或使用 XPath：

```
//region[@section = 'CityServices'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T00:17:53.057

尝试这样的事情（未经测试）：

```
var doc = XDocument.Parse(xmltext);
var selectedRegion = doc.Root.Descendents("region").FirstOrDefault(r => r.Attribute("section").Value == "target value"); 
```

# activemq - ActiveMQ 死信队列使用 WSO2 ESB 监听 ACTIVEMQ.DLQ

> ID：13371061
> 
> 赞同：1
> 
> 时间：2012-11-14T00:07:41.037
> 
> 标签：activemq, wso2, wso2esb, wso2carbon

我正在尝试使用 WSO2 ESB 收听死信队列。

现在，我在队列中添加了一些东西，这个队列在 60 秒后超时，然后被发送到 DeadLetterQueue。

收听 ACTIVEMQ.DLQ 并触发将对数据库产生魔力的数据服务的最佳方式是什么？

我是新手，我真的不知道它是如何工作的。

提前致谢。

# android - 如何使android按钮等宽？

> ID：13371062
> 
> 赞同：1
> 
> 时间：2012-11-14T00:07:48.480
> 
> 标签：android, layout

我已将 android:layout_weight="1" 设置为所有 3 个按钮，但不起作用。

我的布局是这样的：

```
<table1>
    <row></row>
    <row><button /><button /><button /></row>
    <row><table2><row>SOMETHING</row></table2></row>
</table1> 
```

当table2被隐藏（“消失”）时，这3个按钮看起来还不错，虽然它们的宽度不相等，但当table2没有隐藏时，第一个按钮变大了，我几乎看不到其他2个按钮，下面是完整的 xml 和快照：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="Title" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText2"
                android:layout_width="fill_parent"
                android:layout_height="150dp"
                android:layout_weight="1"
                android:hint="Content"
                android:inputType="textMultiLine" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="A"
                android:text="A" />

            <Button
                android:id="@+id/button2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="B"
                android:text="B" />

            <Button
                android:id="@+id/button3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="C"
                android:text="C" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TableLayout
                android:id="@+id/optionalViewGroup"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_weight="1"
                > <!--  android:visibility="gone" -->

                <TableRow
                    android:id="@+id/tableRow5"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >

                    <EditText
                        android:id="@+id/editText4"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:ems="10"
                        android:hint="Tags (optional)" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow6"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >

                    <EditText
                        android:id="@+id/editText3"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:hint="Itinerary Name (optional)" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow7"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >

                    <EditText
                        android:id="@+id/editText5"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:inputType="date" />

                    <EditText
                        android:id="@+id/editText6"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:inputType="time" />
                </TableRow>
            </TableLayout>
        </TableRow>
    </TableLayout>
</ScrollView> 
```

![在此处输入图像描述](../Images/fbc3f95d7a4799bdf33e5d799a51891a.png) ![在此处输入图像描述](../Images/dbd1597e3ac3b33e06d40b008ca78c84.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:16:16.313

`layout_weight`用于水平`View`分布时，用属性代替`layout_width="0dip"`或`"fill_parent"`设置。`"wrap_content"``View``layout_weight`

看：

[Android 布局权重](https://stackoverflow.com/questions/4986861/android-layout-weight/4987097#4987097)

[android:layout_weight 初学者的问题](https://stackoverflow.com/questions/3084185/androidlayout-weight-beginners-question)。

# java - 参考类型的易失性 - 它是否总是避免由于 JMM 而发布参考问题？

> ID：13371066
> 
> 赞同：7
> 
> 时间：2012-11-14T00:08:07.050
> 
> 标签：java, multithreading, concurrency, thread-safety, volatile

假设这个类：

```
public class AmIThreadSafe {

    private int a;
    private int b;

    AmIThreadSafe(int a, int b) {
        this.a = a;
        this.b = b;
    }
} 
```

假设一旦（引用）转义`volatile`，某些线程（导致竞争条件）就可以访问该实例对此类（声明为）的引用：`this`

```
volatile AmIThreadSafe instance = new AmIThreadSafe(1,2); 
```

在这里，我确信分配`instance`引用的事实*发生在*线程读取之前。

但是`AmIThreadSafe's`田野呢？

external`volatile`关键字是否也暗示了`happens-before`与`a`和`b`字段的关系？或者由于构造函数期间潜在的语句重新排序，是否有可能导致任何线程看到陈旧的值（`0`在这种情况下为默认值）？`int`

换句话说，我应该声明`a`和`b` `final`/或`volatile`防止 JMM 出现任何意外，还是仅仅`volatile`在实例的引用上表明就足够了？

----------------**更新后的帖子 - 一个很好的答案：** ---------------------------- -

下面的文章通过它的样本证实了这一点，在我的例子中，`a`并且`b`受到 JMM 优化的保护，这些优化可以防止永久***发生之前的***关系。

[http://jeremymanson.blogspot.fr/2008/11/what-volatile-means-in-java.html](http://jeremymanson.blogspot.fr/2008/11/what-volatile-means-in-java.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T00:11:21.343

**不**，仅仅让它变得不稳定是不够的。线程安全性取决于使用情况。例如，如果另一个线程正在修改这些值，这仍然会产生意想不到的结果。

*为简单起见假设`public`变量*

```
volatile AmIThreadSafe instance = new AmIThreadSafe(1,2);
if (instance.x == 0) {
   // instance.x might have changed between checking and assigning
   instance.x = instance.x + 1;
} 
```

`volatile`仅适用于变量（例如，`x`并且`y`不会`volatile`因为`instance`is 而自动）。这应该从[`JLS 8.3.1.4`](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#37715)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T00:27:16.560

声明`instance`as`volatile`不会使其成为 fields `volatile`，但如果我正确理解了您的问题，那么 - 是的，在您的情况下就足够了。

根据[规范的§17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)：

*   一个线程中的`volatile`写入*发生*在另一个线程中的任何后续`volatile`读取之前。
*   同一线程中的语句具有您所期望的*发生之前的关系。*
*   *发生之前的*关系是及物的。

所以，如果一个线程感知到`instance`已经被初始化，那么它的初始化`instance` *发生在*它之前，而`instance`' 的字段的初始化发生在它*之前*，所以线程会感知到`instance`' 的字段已经被初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T00:14:01.323

在`volatile`您的情况下，仅适用于`AmlThreadSafe`. 您仍然必须创建实例变量 ( `a`and `b`)或在块`volatile`中访问它们。`synchronized`否则你会得到陈旧的数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T00:56:22.260

是的。

```
thread 1                 thread 2

1 write(a)

2 write(instance)

                         3 read(instance)

                         4 read(a) 
```

由于实例是易变的，因此 [2] 发生在 [3] 之前。

由于happens-before是传递的，我们有hb(1,2), hb(2,3), hb(3,4)，因此hb(1,4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T00:16:36.123

如果`a`and`b`只在构造函数中被修改，那么在这种情况下你应该没问题，因为对象是在引用被分配给之前创建（`a`和设置）的，并且任何其他线程都不会有内存的本地缓存副本这些位置，因为它是线程以前看不到的新对象。换句话说，我不相信另一个线程可能会看到 0 的“默认”值，因为构造函数将在对象的引用分配给之前完全运行。`b``instance``a``b``instance`

但是，如果`a`并且`b`可以在构造函数之后进行修改，那么这里的其他答案是正确的 - 您需要围绕它们进行同步。

如果您要假设`a`并且`b`不会在构造函数之外进行修改，那么为了安全起见，没有理由不将它们设为最终状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-11T15:54:58.223

例子 ：

```
class Something{
  private volatile static Something instance = null;
  private int x;
  private int y;
  private Something(){
    this.x = 1;
    this.y = 2;
  }
  public static Something getInstance() {
    if (instance == null) {
        synchronized (Something.class) {
            if (instance == null)
                instance = new Something();
            }
         }  
     }
   return instance; 
  }

} 
```

**解释 ：**

* * *

假设我们有上面的代码：

现在让我们假设实例在一段时间内不是易变的：

*线程#1*：
进来调用getInstance方法，检查实例值{since null}，将进入IF条件，现在再次访问锁发现实例== null，调用Something构造函数。现在进入构造函数体内。

只要 Thread#1 进入 Constructor 主体，就会发生上下文切换，现在 Thread#2 轮到执行。

*Thread#2* :
调用get Instance，但突然发现instance不是null？为什么{原因会在这之后讨论}因此将部分构造的Object分配给引用并返回它。

现在情况是这样的：*线程#1*仍然需要完全构造对象{需要完全构造它}，*线程#2*获得了部分构造的对象的引用，如果它使用它就像说 reference.x //将打印“x " 默认值而不是 "1"

*为什么在Thread#2*的情况下返回部分构造的对象引用？原因很简单：**语句重新排序**。对象创建和引用关联的步骤很简单：

1.  在堆中分配内存。
2.  执行将初始化类成员的构造函数主体。
3.  完成上述步骤后，引用新创建的对象。

但有时编译器可能会乱序执行这些指令**，**这意味着：
它可能会发生这样的事情：

1.  在堆中分配内存。
2.  引用新创建的对象。
3.  执行将初始化类成员的构造函数主体。

一旦发生上述两个步骤并且如果发生上下文切换，那么引用将指向未初始化的对象，或者可能是内部构造函数主体上下文切换发生的情况，那么在这种情况下，引用将引用部分初始化的对象。

如果发生这种情况，那么引用既不为空也不完整，因此它将破坏我们的单例动机。

现在**Volatile**如何将我们的生命从这种尴尬中拯救出来：
众所周知，Volatile 的工作有两个原则：1）**可见性**2）**发生在关系之前**。现在**发生在关系**出现之前。

所以引用是 volatile 写的，所以所有的语句都应该发生在任何 Volatile 写之前。再次如果我们看一下我们的 Object 构造步骤：

1.  为对象分配内存
2.  初始化成员变量{Constructor Body}
3.  将对象引用分配给 volatile 变量实例。

步骤 3 具有**可变变量写入**，并且根据之前发生的情况 .. 写入的所有语句都保证可用于步骤 3。并且由于它是可变的，因此在 volatile 和非 volatile 语句之间不会发生重新排序，这在旧 Java 中不是这种情况记忆模型。
所以在执行第 3 步之前，第 1 步和第 2 步保证会发生并可供第 3 步使用。{第 1 步和第 2 步发生的顺序我们不关心它。}

所以从这个 Thread 将看到 Completely created Object 或 null

# android - 新版本应用的SVN结构

> ID：13371069
> 
> 赞同：3
> 
> 时间：2012-11-14T00:08:36.823
> 
> 标签：android, svn

我正在开发新版本的应用程序。我应该使用什么 SVN 结构来创建应用程序的新版本？每个版本 1.0、1.2 等是否应该有一个主干和分支？1.2真的是基于1.0而不是主干吗？所以我想澄清一下如何构建这个？它确实是几个项目，如模型、ui 等，并且模型在达到主要版本/发布时变化不大，但 ui 项目确实如此。所以我想就如何为 1.2 版设置分支提出建议。SVN 也应该每个开发人员都有自己的分支吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:03:02.980

如果您正在开始一个新项目，最好从以下典型布局开始：

*   树干
*   标签
*   分支机构

至少应该首先创建主干，因为您可能会将初始代码放在那里。

在分支下，您可以存储主干的功能或维护克隆，或任何其他分支。

无论如何，这一切只是一个广泛使用的约定；SVN 功能完全不依赖于命名或布局。但是，一些更高级别的工具可以 - 例如 maven-release-plugin ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:58:16.380

在您提交 SVN 之前，请花几分钟阅读[http://hginit.com/](http://hginit.com/)并考虑使用分布式版本控制系统 (DVCS)，例如 Mercurial 或 Git。它使生活变得如此轻松。

# php - 将数组数据插入每个表列

> ID：13371072
> 
> 赞同：0
> 
> 时间：2012-11-14T00:08:43.143
> 
> 标签：php, mysql

这是一个数组`print_r($_POST)`

```
Array
(
    [january] => Array
        (
            [0] => 10
            [1] => 20
            [2] => 5
        )

    [february] => Array
        (
            [0] => 9
            [1] => 8
            [2] => 10
        )

    [march] => Array
        (
            [0] => 2
            [1] => 5
            [2] => 6
        )

) 
```

循环为`$_POST`.

```
$data = array();
foreach ($_POST as $key => $value) {
   $data[] = $value;
} 
```

陈述

```
INSERT INTO table (january,february,march) VALUES (".implode(", ", $data).") 
```

使用这个当前数组，我该如何做出正确的陈述？我想存储这样的数据

```
id january february march
--------------------------
1  10      9        2
2  20      8        5
3  5       10       6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:18:52.867

像这样做：

```
$month = array("january" => array(10, 20, 5), "february" => array(1,2,3), "march" => array(3,4,5));

$datasets = array();

foreach ($month as $monthname => $monthdata)
{
    foreach ($monthdata as $i => $data)
    {
        $datasets[$i][] = intval($data);
    }
}

$values = array();

foreach ($datasets as $dataset)
{
    $values[] = "(" . implode(", ", $dataset) . ")";
}

echo "INSERT INTO table (january,february,march) VALUES " . implode(", ", $values); 
```

我`intval`在代码中添加了一个应用一些“基本安全性”的代码，因为您永远不应该在数据库中插入未经过滤的用户数据。请告知自己准备好的语句和 mysql 转义；)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T00:21:30.770

这就是我要做的：

```
$rows=sizeof($_POST['january']);#find how many rows we want to add
for($i=0;$i<$rows;$i++){
  $columns=array();
  $values=array();
  foreach ($_POST as $key => $value) {
    $columns[]=$key;
    $values[]=$value;
  }
  $sql="INSERT INTO table (".implode(",",$columns).") VALUES (".implode(",",$values).")"
  mysql_query($sql)
} 
```

# c++ - 带有默认模板参数的模板成员转换运算符到与 typename 绑定的函数

> ID：13371073
> 
> 赞同：1
> 
> 时间：2012-11-14T00:08:44.547
> 
> 标签：c++, templates, operator-keyword

```
template<typename T, int cn, typename _Prd = equal_to<T> > //watch out this <T>, when convert it to other typename, _Prd changes too.
struct Vec
{
//output overloading
// c++ gotcha, must forward declare this, and with <> .
friend std::ostream& operator<< <>(std::ostream& output, const Vec<T,cn,_Prd>& out);
friend const Vec<T,cn,_Prd> operator+ <>(const Vec<T,cn,_Prd>& lhs, const Vec<T,cn,_Prd>& rhs) ;
friend const Vec<T,cn,_Prd> operator+ <>(const T& lhs, const Vec<T,cn,_Prd>& rhs)  ;
friend const Vec<T,cn,_Prd> operator+ <>(const Vec<T,cn,_Prd>& lhs, const T& rhs)  ;

friend const Vec<T,cn,_Prd> operator- <>(const Vec<T,cn,_Prd>& lhs, const Vec<T,cn,_Prd>& rhs) ;
friend const Vec<T,cn,_Prd> operator- <>(const T& lhs, const Vec<T,cn,_Prd>& rhs)  ;
friend const Vec<T,cn,_Prd> operator- <>(const Vec<T,cn,_Prd>& lhs, const T& rhs)  ;

friend const Vec<T,cn,_Prd> operator* <>(const T& lhs, const Vec<T,cn,_Prd>& rhs)  ;
friend const Vec<T,cn,_Prd> operator* <>(const Vec<T,cn,_Prd>& lhs, const T& rhs)  ;

protected:
    T data[cn] ;
    _Prd comp ;
public:
    typedef T value_type ;

    Vec() ;
    Vec(T v0, T v1) ;
    Vec(T v0, T v1, T v2) ;
    Vec(T v0, T v1, T v2, T v3) ;
    explicit Vec(const T* values) ;
    explicit Vec(const T& value) ;

    //copy constructor, incase delete twice
    Vec(const Vec<T, cn, _Prd>& v) ;

    //Get Magnituede
    T magnituede() const ;
    //Dot product
    T dot(const Vec<T, cn, _Prd>& b) const ;

    //cross product of two 3D vectors, other dimension raises exception
    Vec<T, cn, _Prd>& cross(const Vec<T, cn, _Prd>& v) const ;

    //product of all elements
    T product() ;

    //scale vector to 1
    Vec<T, cn, _Prd>& normalize() ;
    Vec<T,cn,_Prd> normalize(const Vec<T,cn,_Prd>& rhs) ;
    //change length of the vector
    Vec<T, cn, _Prd>& scale(const T &length);
    Vec<T, cn, _Prd> scale(const Vec<T,cn,_Prd> &rhs,const T &length) ;

    //project
    Vec<T, cn, _Prd> projectTo (const Vec<T,cn,_Prd>& rhs) ;

    //Operators

    //element access
    const T& operator[](const int& i) const ;
    T& operator[](const int& i) ;

    //return element number
    T GetSize() ;

    //comparison 
    bool operator==(const Vec<T,cn,_Prd>& rhs) const ;
    bool operator!=(const Vec<T,cn,_Prd>& rhs) const ;

    //function call operators
    Vec<T,cn,_Prd>& operator() (const T* rhs) ;
    Vec<T,cn,_Prd>& operator() (const Vec<T,cn,_Prd>& rhs );

    //assignment
    Vec<T,cn,_Prd>& operator=(const Vec<T,cn,_Prd>& rhs) ; //care, here is no copy
    Vec<T,cn,_Prd>& operator=(const T rhs[cn]) ;
    Vec<T,cn,_Prd> operator=(const T& rhs) ; //assignment constructor
    Vec<T,cn,_Prd> operator-() const;

    //math

    Vec<T,cn,_Prd>& operator+=(const Vec<T,cn,_Prd>& rhs) ;
    Vec<T,cn,_Prd>& operator+=(const T& rhs) ;

    Vec<T,cn,_Prd>& operator-=(const Vec<T,cn,_Prd>& rhs) ;
    Vec<T,cn,_Prd>& operator-=(const T& rhs) ;

    Vec<T,cn,_Prd>& operator*=(const T& rhs) ;

    static Vec<T, cn, _Prd> abs(const Vec<T,cn,_Prd>& rhs) ;    
    static void swap(Vec<T,cn,_Prd>& a,Vec<T,cn,_Prd>& b) ;

    //conversion
    template<typename U> operator Vec<U,cn,_Prd> () const ;

}; 
```

正是这个转换运算符让我抓狂。

```
template<typename U> operator Vec<U,cn,_Prd> () const ; 
```

实现是：

```
//conversion
template<typename T, int cn, typename _Prd>
template<typename U> 
Vec<T,cn,_Prd>::operator Vec<U,cn,_Prd> () const 
{
  U temp[cn] ;
  for (int i = 0 ; i < cn ; ++i)
      temp[i] = static_cast<U>(this->data[i]) ;
  Vec<U,cn,_Prd> v(temp) ;
  return v ;
};

inline void foo (Vec<int,2> test)
{
    std::cout <<"works" << std::endl ;
} 
```

电话是：

```
Vec<double,2> vec25(234.5,2352.5) ;
foo(vec25) ;
Vec<int,2> vec26 = Vec<int,2>(vec25) ; 
```

错误是：

```
tests/newsimpletest1.cpp:74: error: conversion from ‘Vec<double, 2, std::equal_to<double> >’ to non-scalar type ‘Vec<int, 2, std::equal_to<int> >’ requested
tests/newsimpletest1.cpp:75: error: no matching function for call to ‘Vec<int, 2, std::equal_to<int> >::Vec(Vec<double, 2, std::equal_to<double> >&)’
./Vec.hpp:186: note: candidates are: Vec<T, cn, _Prd>::Vec(const Vec<T, cn, _Prd>&) [with T = int, int cn = 2, _Prd = std::equal_to<int>]
./Vec.hpp:180: note:                 Vec<T, cn, _Prd>::Vec(const T&) [with T = int, int cn = 2, _Prd = std::equal_to<int>]
./Vec.hpp:173: note:                 Vec<T, cn, _Prd>::Vec(const T*) [with T = int, int cn = 2, _Prd = std::equal_to<int>]
./Vec.hpp:166: note:                 Vec<T, cn, _Prd>::Vec(T, T, T, T) [with T = int, int cn = 2, _Prd = std::equal_to<int>]
./Vec.hpp:159: note:                 Vec<T, cn, _Prd>::Vec(T, T, T) [with T = int, int cn = 2, _Prd = std::equal_to<int>]
./Vec.hpp:149: note:                 Vec<T, cn, _Prd>::Vec(T, T) [with T = int, int cn = 2, _Prd = std::equal_to<int>]
./Vec.hpp:145: note:                 Vec<T, cn, _Prd>::Vec() [with T = int, int cn = 2, _Prd = std::equal_to<int>] 
```

但是，我尝试了另一个项目，它可以工作。

```
template <typename T>
class varmani
{
    T var ;
    public:
        varmani (T var_){
            var = var_ ;
        }
        T increase() {
            return ++var ;
        }
        template<typename U> operator varmani<U> () const;

};

void foo (varmani<int> test)
{
    std::cout << "works" << std::endl ;
}

template <typename T>
template <typename U>
varmani<T>::operator varmani<U> () const
{

   U temp = static_cast<U>(this->var) ;
   varmani<U> v(temp) ;
   return v ;
}

//all works
varmani<double> test3(10.25) ; 
varmani<int> test4 = varmani<int>(test3) ;
foo(test3) ; 
```

所以这是我的问题，为什么我的转换运算符不起作用？是否有其他适合这个数学向量类的转换形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:34:15.847

问题是您的`_Prd`（谓词？）模板参数。转换运算符定义为

```
template<typename U> operator Vec<U,cn,_Prd> () const ; 
```

这意味着元素类型`U`可以与`T`要转换的向量的元素类型不同，但是谓词类型必须匹配。在您的代码中，您使用的是默认谓词`std::equal_to<T>`，这对于您的两种类型是不同的，即您正在尝试转换

```
Vec<double, 2, std::equal_to<double>> 
```

到

```
Vec<int, 2, std::equal_to<int>>. 
```

这是您的编译器错误的来源。如果您想允许这种类型的转换，您需要向转换函数添加另一个模板参数：

```
template<typename U, typename Prd2> operator Vec<U,cn,Prd2> () const ; 
```

# ruby - Jekyll 支持的网站 - 主页上显示的文本量

> ID：13371079
> 
> 赞同：0
> 
> 时间：2012-11-14T00:09:09.880
> 
> 标签：ruby, html, jekyll

我正在使用出色的 Jekyll 设置我的博客。问题是我的降价文件在主页上完整显示。我怎样才能让它们看起来更像这样？所以只有一点点想出标题？谢谢。

[http://daverupert.com/](http://daverupert.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:56:13.517

**编辑：从 Jekyll 1.0 开始，这不再是必要的（答案已过时）。**

Jekyll 1.0`post.excerpt`默认导出一个包含文章第一段的变量。

**/编辑**

那么，您想显示帖子的摘录，而不是完整的帖子？

有三种方法可以做到这一点：

*   渲染完整的帖子，但使用 CSS 隐藏所有不需要的内容
*   使用过滤器。您可以访问`post.content`，使用`truncate`过滤器截断它并使用`markdownify`过滤器呈现它。
*   在 YAML Front Matter 中指定摘录并使用它进行渲染`{{post.excerpt | markdownify}}`（这就是我在我的博客上所做的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:02:58.410

水平线之间的每个块都是指向实际博客文章的链接。每当我对某人如何在他们的网页上做某事有疑问时，我总是查看源代码。

该页面的来源是 - view-source:http://daverupert.com/

要了解如何在降价中做某事，我喜欢这个网站 - [http://daringfireball.net/projects/markdown/basics](http://daringfireball.net/projects/markdown/basics)

# parallel-processing - CUDA 内核可以调用 cublas 函数吗？

> ID：13371082
> 
> 赞同：17
> 
> 时间：2012-11-14T00:09:19.870
> 
> 标签：parallel-processing, cuda, gpu, cublas

我知道这听起来很奇怪，但这是我的场景：

我需要进行矩阵-矩阵乘法 (A(n*k)*B(k*n))，但我只需要为输出矩阵评估对角线元素。我搜索了 cublas 库，没有找到任何可以做到这一点的 2 级或 3 级函数。因此，我决定将 A 的每一行和 B 的每一列分配到 CUDA 线程中。对于每个线程（idx），我需要计算点积“A[idx,:]*B[:,idx]”并将其保存为对应的对角线输出。现在因为这个点积也需要一些时间，我想知道我是否可以在这里调用 cublas 函数（比如 cublasSdot）来实现它。

如果我错过了一些可以直接实现我的目标的 cublas 函数（仅计算矩阵-矩阵乘法的对角线元素），则可以丢弃这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T01:32:13.260

是的，它可以（直到（不包括）CUDA 10 版本）。

“CUDA C/C++ 中可用的语言接口和设备运行时 API 是主机上可用的 CUDA 运行时 API 的子集。CUDA 运行时 API 的语法和语义已保留在设备上，以方便代码重用用于可能在主机或设备环境中运行的 API 例程。**内核也可以直接调用 GPU 库，例如 CUBLAS**，而无需返回 CPU。[来源](http://developer.download.nvidia.com/assets/cuda/docs/TechBrief_Dynamic_Parallelism_in_CUDA_v2.pdf)

[在这里](http://geco.mines.edu/tesla/cuda_tutorial_mio/index.html)，您可以看到使用 cuda 和 CUBLAS 库函数 cublasSgemv 进行矩阵向量乘法。

但是请记住，[CUDA 10 中不再有设备 CUBLAS 功能](https://forums.developer.nvidia.com/t/cublas-call-from-kernel-in-cuda-10-0/69969)。从 Robert_Crovella 可以引用：

> 目前的建议是看看[CUTLASS](https://github.com/NVIDIA/cutlass) 2 是否会有所帮助（它主要关注与 GEMM 相关的活动）。如果没有，请编写您自己的代码来执行该功能，或者从主机代码中调用 cublas。

尽管如此，目前有几种矩阵向量乘法的在线实现，例如[1](https://medium.com/analytics-vidhya/sparse-matrix-vector-multiplication-with-cuda-42d191878e8f)、[2](https://medium.com/analytics-vidhya/matrix-multiplication-in-cuda-a-simple-guide-bab44bc1f8ab)等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-17T15:38:07.713

确保您使用设备库来调用 cublas。您不能使用从主机调用它的同一个库；有关使用 cuda 设备库的详细信息，请参阅 cuda 工具包：[http ://docs.nvidia.com/cuda/cublas/index.html#device-api](http://docs.nvidia.com/cuda/cublas/index.html#device-api)

查看 7_CUDALibraries/ 下的 cuda 5 样本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-08T12:49:17.950

这里有一个针对您的问题的代码示例，我认为[此代码链接](https://github.com/zchee/cuda-sample/blob/master/7_CUDALibraries/simpleDevLibCUBLAS/kernels.cu)可以帮助您。感谢 Github 的作者。

```
__global__ void invokeDeviceCublasSgemm(cublasStatus_t *returnValue,
                                    int n,
                                    const float *d_alpha,
                                    const float *d_A,
                                    const float *d_B,
                                    const float *d_beta,
                                    float *d_C)
{   
    cublasHandle_t cnpHandle;
    cublasStatus_t status = cublasCreate(&cnpHandle);

    if (status != CUBLAS_STATUS_SUCCESS){
        *returnValue = status;
        return;
    }

    /* Perform operation using cublas */
    status = cublasSgemm(cnpHandle,
                CUBLAS_OP_N, CUBLAS_OP_N,
                n, n, n,
                d_alpha,
                d_A, n,
                d_B, n,
                d_beta,
                d_C, n);
    cublasDestroy(cnpHandle);
    *returnValue = status;
} 
```

# jquery - 从输入切换下一个 div

> ID：13371093
> 
> 赞同：0
> 
> 时间：2012-11-14T00:10:47.867
> 
> 标签：jquery, html, next

我想在输入后切换第一个 div

是否可以？

我试过了

```
<script type="text/javascript">
function spoiler() {
    $(this).next().show();
}
</script>

<div>
       <input value="Show/Hide" style="" onclick="spoiler();" type="button"/>
</div>
<div style="display:none;">
    Text
</div> 
```

我不能使用类或 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:16:17.483

试一试：

```
$(this).parent().next().show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:16:21.407

您需要使用：

`$(this).parent().next().show();`

你需要遍历树的一个地方，因为你已经在里面了`<div />`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:16:42.753

如果您知道 DOM 中的确切位置，您可以执行诸如`$('div:nth-child(2)')`选择元素之类的操作，但这将非常脆弱 - 对标记的更改可能会破坏您的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:16:43.963

因为 next() 引用的是 div 中的下一个元素，而不是下一个父 div

使用 parent().next().show()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T00:17:39.747

您的代码不起作用，因为`$(this)`没有引用您的按钮。另外，`.next()`在按钮之后查找不存在的元素。您正在寻找该按钮的父级之后的元素。

此外，不要使用 绑定事件，而是`onclick`使用 JavaScript 完全绑定它：

```
$(document).ready(function() {
    $('input[value="Show/Hide"]').click(function() {
        $(this).parent().next('div').toggle();
    });
});​ 
```

然后，您可以简化 HTML：

```
<div>
   <input value="Show/Hide" type="button" />
</div>

<div style="display:none;">
    Text
</div>​ 
```

**演示：http: [//jsfiddle.net/NXM7w/](http://jsfiddle.net/NXM7w/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T00:31:21.457

您正在引用全局变量 'this' 您当前使用它的方式。让你的 DIV 通过自己，然后你可以很容易地从那里工作：

```
<div>
       <input value="Show/Hide" style="" onclick="spoiler(this)" type="button"/>
</div>
<div style="display:none;">
    Text
</div> 
```

然后你的 JS 函数可以如下所示：

```
function spoiler(div1) {
    $(div1).parent().next().toggle();
} 
```

希望这对你有用。

# sql-server - Web 应用程序从 SQL Server 2005 检索数据

> ID：13371099
> 
> 赞同：0
> 
> 时间：2012-11-14T00:11:19.193
> 
> 标签：sql-server, iis, web-applications

我有以下（和奇怪）的情况：我的 Web 应用程序在 8 秒内加载了一些数据（通过执行 1 个 proc）我的 proc，当直接在 SQL 上执行时，在 1 秒内加载。

我很确定两者都没有循环。

我的问题是：错误的 IIS 配置会导致这种情况吗？

谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:37:19.007

您可能想谈谈您如何从您的网络应用程序连接到您的数据库... Ofc。由于您需要连接到 DM、读取上下文、传输它并关闭 conn，因此您从 Web 应用程序中获得较慢的结果，另一方面，在 sql server 中您已经连接并且数据就在那里。

但是在您的情况下，与您的应用程序和直接 sql 有 800% 的差异有点奇怪。

顺便说一句，您的应用程序是在您的 PC 上与 sql server 一样运行还是在某个远程服务器上运行？

# paypal - Paypal IPN 和交易 ID

> ID：13371100
> 
> 赞同：0
> 
> 时间：2012-11-14T00:11:20.940
> 
> 标签：paypal

我目前在我的网站上有一个简单的 Paypal 按钮，人们在其中输入一些保存到数据库中的信息，然后该按钮将他们带到贝宝支付 20 英镑加入。问题是网站和paypal之间没有链接，所以我每次都必须手动交叉检查谁在网站上加入了Paypal。

我研究了看起来很理想的 Paypal IPN，但我不知道如何匹配交易。

即 IPN 向我发送了一个 txn_id，但我没有那个。我需要一种方法来发送生成并保存每笔交易的唯一 ID，该 ID 与用户一起发送到 Paypal，然后 Paypal 通过 IPN 发回给我。

我完全迷失在 Paypal 的劣质文档中，所以任何来自 SO 的帮助都会有所帮助！

（题外话：为什么 Paypal 有这么多域名：paypal.com、paypal-business.com、x.com、paypal-marketing.com、......他们不能拼写网络钓鱼吗？！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:15:32.407

通过变量将您的 id（如数据库行 id）传递给 Paypal ，您可以使用IPN`custom`中的变量交叉引用它。`custom`

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)

# javascript - 如何正确设置动态 XUL 元素的事件？

> ID：13371105
> 
> 赞同：0
> 
> 时间：2012-11-14T00:11:33.327
> 
> 标签：javascript, firefox, firefox-addon, xul

我有一个生成动态`toolbarbutton`和`menuitem`元素的工具栏扩展。这些项目通常是这样构造的：

```
tempMenuItem = document.createElement("menuitem");
tempMenuItem.setAttribute("label",  "Some Label");
tempMenuItem.setAttribute("tooltiptext", "Some Tooltip");
tempMenuItem.setAttribute("oncommand", "myObject.someFunction()"); 
```

这段代码工作得很好，但是当我将我的扩展提交到官方附加存储库时，我收到以下警告：

> 使用 setAttribute 设置 on* 属性
> 
> 警告：为防止漏洞，应始终使用 addEventListener 定义事件处理程序（如“onclick”和“onhover”）。

我还能如何为这些动态元素设置适当的命令处理程序？我知道这只是一个警告，但作为我这样的强迫症程序员，我想以最干净的方式做事。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:51:02.940

好吧，您显然按照建议使用[`addEventListener()`方法：](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

```
tempMenuItem.addEventListener("command", function(event)
{
  myObject.someFunction();
}, false); 
```

[`Function.bind()`如果您还使用以下方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，或者稍微短一些：

```
tempMenuItem.addEventListener("command", myObject.someFunction.bind(myObject), false); 
```

# java - GraphicsMagick + im4java，如何删除颜色配置文件（和其他冗余数据）

> ID：13371107
> 
> 赞同：2
> 
> 时间：2012-11-14T00:12:35.727
> 
> 标签：graphicsmagick, im4java, java, thumbnails, graphicsmagick, color-profile, im4java

我正在使用[graphicsmagick](/questions/tagged/graphicsmagick "显示标记为“graphicsmagick”的问题") + [im4java](/questions/tagged/im4java "显示标记为“im4java”的问题")在我的 Web 应用程序中生成缩略图。不幸的是，正如我所看到的，在处理用相机拍摄的照片时，缩略图包含所有原始数据，例如颜色配置文件、光圈、相机的制造商/型号等。换句话说，比在页面上显示简单的缩略图所需的东西要多得多。当然，它会导致缩略图的文件大小很大。***从任何图形编辑器为网络***保存的同一张照片的缩略图要小得多。

在进一步处理之前，如何使用 im4java 删除不需要的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:55:34.490

问题解决了，遵循这个 GM[要点](https://gist.github.com/1283951)：

```
mogrify +profile '*' -define jpeg:preserve-settings 
```

我`im4java`用[`p_profile(java.lang.String profileName)`](http://im4java.sourceforge.net/api/org/im4java/core/IMOps.html#p_profile%28java.lang.String%29)方法解决了这个问题：

```
ConvertCmd cmd = new ConvertCmd();
IMOperation op = new IMOperation();

op.addImage(sourcePath);
op.p_profile("*");
op.scale(123);
op.addImage(targetPath);

cmd.run(op); 
```

# node.js - 如何将 node.js 模块作为 node.js 程序的子进程执行？

> ID：13371113
> 
> 赞同：52
> 
> 时间：2012-11-14T00:13:23.113
> 
> 标签：node.js, nonblocking

这是我的问题。我实现了一个小脚本，它做一些繁重的计算，作为一个 node.js 模块。所以，如果我输入“node myModule.js”，它会计算一秒钟，然后返回一个值。现在，我想从我的主要 Node.JS 程序中使用该模块。我可以将所有计算放在“doSomeCalculation”函数中，然后执行以下操作：

```
var myModule = require("./myModule");
myModule.doSomeCalculation(); 
```

但这会阻塞，因此会很糟糕。我想以非阻塞的方式使用它，例如数据库调用本身就是这样。所以我尝试使用 child_process.spawn 和 exec，如下所示：

```
var spawn = require("child_process").spawn;
var ext = spawn("node ./myModule.js", function(err, stdout, stderr) { /* whatevs */ });
ext.on("exit", function() { console.log("calculation over!"); }); 
```

但是，当然，它不起作用。我尝试在 myModule 中使用 EventEmitter，发出“calculationDone”事件并尝试在上面示例中的“ext”变量上添加关联的侦听器。还是不行。

至于叉子，它们并不是我真正想要做的。分叉需要将与计算相关的代码放在主程序中，分叉，在子程序中计算，而父程序执行任何操作，然后我将如何返回结果？

所以这是我的问题：当计算放在节点文件中时，我可以使用子进程进行一些非阻塞计算，还是不可能？我应该在 Python 脚本中进行繁重的计算吗？在这两种情况下，如何将参数传递给子进程 - 例如图像？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-11-14T00:48:34.327

我认为您所追求的是[child_process.fork()](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options) API。

例如，如果您有以下两个文件：

在 main.js 中：

```
var cp = require('child_process');
var child = cp.fork('./worker');

child.on('message', function(m) {
  // Receive results from child process
  console.log('received: ' + m);
});

// Send child process some work
child.send('Please up-case this string'); 
```

在 worker.js 中：

```
process.on('message', function(m) {
  // Do work  (in this case just up-case the string
  m = m.toUpperCase();

  // Pass results back to parent process
  process.send(m.toUpperCase(m));
}); 
```

然后运行 ​​main（并为 worker.js 代码生成一个子工作进程......）

```
$ node --version
v0.8.3

$ node main.js 
received: PLEASE UP-CASE THIS STRING 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T00:49:29.703

无论你小时候使用什么（Node、Python 等等），Node 都不在乎。只需确保您的计算脚本*在*一切完成并将结果写入`stdout`.

它不起作用的原因是您使用[`spawn`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)的是[`exec`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback).

# profiling - Chrome 堆分析器中分离的 DOM 节点的颜色意味着什么？

> ID：13371119
> 
> 赞同：13
> 
> 时间：2012-11-14T00:14:23.567
> 
> 标签：profiling, google-chrome-devtools

在使用 Chrome devtools 分析堆快照时，我似乎无法弄清楚查看分离的 DOM 树时颜色的含义。红色和黄色有什么区别？

![在此处输入图像描述](../Images/308b7c76ed78c4326e85bc9c15450512.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-28T11:39:18.683

[这里](http://addyosmani.com/blog/taming-the-unicorn-easing-javascript-memory-profiling-in-devtools/)有一个很好的解释。

来自文章：

> 红色节点没有 JavaScript 对它们的直接引用，但是因为它们是分离的 DOM 树的一部分，所以它们是活跃的。树中可能有一个从 JavaScript 引用的节点（可能作为闭包或变量），但巧合的是，它阻止了整个 DOM 树被垃圾收集。
> 
> 然而，黄色节点确实有来自 JavaScript 的直接引用。在同一个分离的 DOM 树中查找黄色节点以定位 JavaScript 中的引用。应该有一个从 DOM 窗口到元素的属性链（例如 window.foo.bar[2].baz）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:29:41.787

*我还没有找到明确的答案，但这似乎始终如一：*

红色背景表示从闭包中的变量引用的分离的 DOM 节点。

黄色背景表示从对象的属性或数组元素引用的分离的 DOM 节点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-12T11:28:36.793

# 2018 年更新

在使用 Chrome v70.0.3538.77 时，我发现 Nodes 根本没有背景高亮（但所有可用的文档仍然引用它），所以我在 Twitter 上[询问了 Chromium 开发团队。](https://twitter.com/LinguaBrowse/status/1060922408763383809)

[从 Mathias Bynens](https://twitter.com/mathias/status/1060957241509998592)本人看来，旧版本的 Chrome 在某些情况下也有未突出显示的引用（尽管这不适用于我的新版本 Chrome）：

> 在旧版本的 Chrome 中，像这样未突出显示的引用意味着该对象没有`window`通过 JS 对象指向该对象的路径，这意味着它由系统对象或 DOM 保留。

他跟进了[这条推文](https://twitter.com/mathias/status/1060957353468522496)：

> 颜色确实很混乱！最新的稳定版 Chrome [Tweet 于 2018 年 11 月 9 日发送；由于这个原因，应该在 Chrome v70 左右] 不再显示颜色，而是在悬停图标时显示带有解释的图标。

[他在这条推文](https://twitter.com/mathias/status/1060996393219674112)中提供了新演示格式的屏幕截图。

[![新的演示格式](../Images/3fab0c52392009fc9b30f2681c8efd85.png)](https://i.stack.imgur.com/nCKuh.png)

# c++ - 为什么这个用于计算最长公共子序列的并行函数比串行函数慢？

> ID：13371122
> 
> 赞同：2
> 
> 时间：2012-11-14T00:14:43.267
> 
> 标签：c++, openmp, dynamic-programming, lcs, longest-substring

LCS 的并行计算遵循波前模式。这是比串行实现慢的并行功能。（我认为对角线的数量（平行）与行数（串行）与它有关）

```
void parallelLCS(char * sequence_a, char * sequence_b, size_t size_a, size_t size_b) {
double start, end;

int ** dp_table = new int*[size_a + 1];

for (int i = 0; i <= size_a; i++)
    dp_table[i] = new int[size_b + 1];

for (int i = 1; i <= size_a; i++)
    dp_table[i][0] = 0;
for (int j = 0; j <= size_b; j++)
    dp_table[0][j] = 0;

int p_threads = 2;
int diagonals = size_a + size_b;

start = omp_get_wtime();
#pragma omp parallel num_threads(p_threads) default(none) firstprivate(p_threads,size_a,size_b,sequence_a,sequence_b) shared(dp_table,diagonals)
{
    for (int curr_diagonal = 1; curr_diagonal <= (diagonals - 1);) {
        int j = omp_get_thread_num() + 1;   //column index
        int i = curr_diagonal - j + 1;      //row index
        for (; j <= curr_diagonal; j += p_threads, i = i - p_threads) {
            if (i <= size_a && j <= size_b) {
                if (sequence_a[i] == sequence_b[j]) {
                    dp_table[i][j] = dp_table[i - 1][j - 1] + 1;
                } else if (dp_table[i - 1][j] >= dp_table[i][j - 1]) {
                    dp_table[i][j] = dp_table[i - 1][j];
                } else {
                    dp_table[i][j] = dp_table[i][j - 1];
                }
            }
        }
        curr_diagonal++;
#pragma omp barrier
    }
}
end = omp_get_wtime();

printf("\nParallel - Final answer: %d\n", dp_table[size_a][size_b]);
printf("Time: %f\n", end - start);

//Delete dp_table
for (int i = 0; i <= size_a; i++)
    delete [] dp_table[i];
delete [] dp_table;
} 
```

这是串行功能

```
void serialLCS(char * sequence_a, char * sequence_b, size_t size_a, size_t size_b) {
double start, end;
int ** dp_table = new int*[size_a + 1];
for (int i = 0; i <= size_a; i++)
    dp_table[i] = new int[size_b + 1];

for (int i = 1; i <= size_a; i++)
    dp_table[i][0] = 0;
for (int j = 0; j <= size_b; j++)
    dp_table[0][j] = 0;

start = omp_get_wtime();
for (int i = 1; i <= size_a; i++) {
    for (int j = 1; j <= size_b; j++) {
        if (sequence_a[i] == sequence_b[j]) {
            dp_table[i][j] = dp_table[i - 1][j - 1] + 1;
        } else if (dp_table[i - 1][j] >= dp_table[i][j - 1]) {
            dp_table[i][j] = dp_table[i - 1][j];
        } else {
            dp_table[i][j] = dp_table[i][j - 1];
        }
    }
}
end = omp_get_wtime();
printf("\nSerial - Final answer: %d\n", dp_table[size_a][size_b]);
printf("Time: %f\n", end - start);

//Delete dp_table
for (int i = 0; i <= size_a; i++)
    delete [] dp_table[i];
delete [] dp_table;
} 
```

...以为我会添加测试功能

```
#include <cstdlib>
#include <stdio.h>

#include <omp.h>

void serialLCS(char * sequence_a, char * sequence_b, size_t size_a, size_t size_b);
void parallelLCS(char * sequence_a, char * sequence_b, size_t size_a, size_t size_b);

int main() {

size_t size_a;
size_t size_b;

printf("Enter size of sequence A: ");
scanf("%zd",&size_a);
printf("Enter size of sequence B: ");
scanf("%zd",&size_b);

//keep larger sequence in sequence_a
if (size_b > size_a) size_a ^= size_b ^= size_a ^= size_b;

char * sequence_a = new char[size_a + 1];
char * sequence_b = new char[size_b + 1];
sequence_a[0] = sequence_b[0] = '0';

const size_t alphabet_size = 12;
char A[alphabet_size] = {'A', 'T', 'G', 'C', 'Q', 'W', 'E', 'R', 'Y', 'U', 'I', 'O'};
char AA[alphabet_size] = {'T', 'C', 'A', 'G', 'R', 'E', 'W', 'Q', 'O', 'I', 'U', 'Y'};

for (size_t i = 1; i < size_a; i++) {
    sequence_a[i] = A[rand() % alphabet_size];
}
for (size_t i = 1; i < size_b; i++) {
    sequence_b[i] = AA[rand() % alphabet_size];
}

serialLCS(sequence_a, sequence_b, size_a, size_b);
parallelLCS(sequence_a, sequence_b, size_a, size_b);

delete [] sequence_a;
delete [] sequence_b;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T09:39:27.187

问题不在于 OpenMP，而在于您在并行实现中访问数据的方式。即使你只用一个线程运行并行版本，它仍然慢两倍左右。

好吧，欢迎来到非缓存友好的数据结构的世界。由于对角线依赖性，您可以通过对角线遍历矩阵，但仍以通常的方式存储它。数据访问模式是强非线性的，因此对缓存非常不友好。在旧的 16 核 Xeon X7350 系统上以单线程模式运行代码时，观察 L1 和 L2 缓存未命中的数量：

![L1 和 L2 缓存未命中](../Images/2cbfe93d69cb84fa5b73e67012363f0b.png)

流程时间线的绿色部分代表代码的串行部分。橙色部分是（由于单线程执行而处于非活动状态）OpenMP`parallel`区域。您可以清楚地看到串行代码对缓存非常友好 - 不仅 L2 缓存未命中的数量相对较低，而且 L1 缓存未命中的数量也相对较低。但是在代码的并行部分，由于对角线遍历矩阵时的步幅非常大，缓存不断被丢弃，并且未命中的数量非常高。

有了两个线程，情况会变得更糟。属于同一矩阵行的两条相邻对角线的元素很可能落入同一高速缓存行。但是其中一条对角线由一个线程处理，另一条由另一个线程处理。因此，您的代码会遇到大量错误共享。更不用说现代多插槽 AMD64 或（后）Nehalem 系统上的 NUMA 问题了。

解决方案不仅是简单地通过对角线遍历矩阵，而且还以倾斜格式存储矩阵，以便每个对角线在内存中占据连续的部分。

# clojure - refs 如何在 clojure 中通知其手表？

> ID：13371123
> 
> 赞同：3
> 
> 时间：2012-11-14T00:14:44.663
> 
> 标签：clojure

比较 和 的源代码`clojure.lang.Ref`，`clojure.lang.Atom`我发现它们都继承自`clojure.lang.ARef`.

其中`clojure.lang.ARef`有一个功能`notifyWatches`可以让所有手表功能都知道已经进行了更改。

`swap!`和`reset!`函数在其实现中的`clojure.lang.Atom`调用。`notifyWatches`

例如。

```
public Object swap(IFn f) {
for(; ;)
    {
    Object v = deref();
    Object newv = f.invoke(v);
    validate(newv);
    if(state.compareAndSet(v, newv))
        {
        notifyWatches(v, newv);
        return newv;
        }
    }
 } 
```

但是，当我搜索`notifyWatches`in 时`clojure.lang.Ref`，它什么也没有。`alter`函数看起来像这样。

```
public Object alter(IFn fn, ISeq args) {
   LockingTransaction t = LockingTransaction.getEx();
   return t.doSet(this, fn.applyTo(RT.cons(t.doGet(this), args)));
} 
```

如果没有方法调用 notifyWatches，如何通知 ref 的所有 watch 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:59:13.193

`notifyWatches`您正在寻找的调用发生在类的`run`方法中`LockingTransaction`。

对 refs 的更改发生在事务中。请注意，传递了对`doSet`方法的调用（对 Ref 的引用）。*将*在事务中应用的更改由 方法确定，但该更改在 的方法中生效。当事务成功运行时，使用对 Ref 记录的引用调用。`LockingTransaction``this`*`doSet``run``LockingTransaction``notifyWatches``doSet`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T01:34:45.997

[clojure.lang.Ref](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Ref.java#L19)扩展了具有[手表](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/ARef.java#L19)并提供 notifyWatches 方法的[clojure.lang.ARef](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/ARef.java#L87)*

# javascript - 从哪个文件和哪一行查找调用了javascript函数

> ID：13371127
> 
> 赞同：0
> 
> 时间：2012-11-14T00:15:05.270
> 
> 标签：javascript

在使用[此问题](https://stackoverflow.com/questions/280389/how-do-you-find-out-the-caller-function-in-javascript)中的功能进行调试后，我想知道是否有办法获取调用该函数的文件名，并且可能是该行。

可能是我要求太多，但我知道在某些语言中这是可能的。

如果这是不可能的，任何人都可以提及为什么他的功能没有实现？

我会尝试改写这个问题，因为我认为我没有说清楚。

我有 file.js，其中第 17 行有一个函数声明：

```
...
function main()
{
   Hello();
} 
```

我有另一个文件 test.js，我在其中定义函数 hello

```
function Hello()
{
  ...
  which tells me the name of the file and a line in which the function which evoked it was defined
} 
```

例如，如果我打电话 `main()`，它会告诉我`file.js, 17 line`

与萤火虫无关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:18:09.940

你没有提到你使用的是什么浏览器。

在 Chrome 中，我建议在函数的第一行插入一个断点。然后重新加载页面（或以其他方式触发函数调用）。当执行在断点处暂停时，检查`Call Stack`Chrome 的开发者工具中的部分——它会给你一个执行流程的堆栈回溯。

我确信 Firebug 提供了类似的东西，如果不完全相同的话，我使用它已经有一段时间了。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:19:24.657

如果你所做的只是调试，为什么不使用现代浏览器内置的调试器呢？

```
debugger 
```

那条线就是你所需要的。您可以检查调用堆栈、检查变量值，甚至可以在当前范围内运行代码。

这样的功能使您的请求变得不必要。

# c# - 如何从另一个表单按钮更改表单菜单项的文本

> ID：13371129
> 
> 赞同：2
> 
> 时间：2012-11-14T00:15:28.837
> 
> 标签：c#

我无法在 stackoverflow 上找到答案，所以就到这里了。单击子表单上的按钮时，我试图更改 MenuStrip 子项的文本。下面是来自我的子表单上的提交按钮的代码。单击时，它应该将“登录”的文本更改为“注销”。代码看起来很好，没有错误，但没有更新文本。

```
public AccessForm()
{
    InitializeComponent();
}

private void btnSubmit_Click(object sender, EventArgs e)
{
    try
    {
        if (txtUser.Text == "admin" && txtPass.Text == "1234")
        {
            MessageBox.Show("Access granted.", "Access");

            playgroundPlannersForm mainForm = new playgroundPlannersForm();

            mainForm.logInToolStripMenuItem.Text = "Log Out";
            this.Close();

        }
        else
        {
            MessageBox.Show("Incorrect Username or Password.", "Warning");
            txtUser.Clear();
            txtPass.Clear();
            txtUser.Focus();
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Message: " + ex, "Error");
    }
}

private void btnCancel_Click(object sender, EventArgs e)
{
    this.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:21:56.663

您正在创建主窗体的新实例并对其进行更改；您需要传递对原始表单的引用并使用它来更新它。

这是一种方法。在您的子表单中.. 添加此属性：

```
public playgroundPlannersForm ParentForm { get; set; } 
```

..然后，在你上面的代码中，使用这个：

```
MessageBox.Show("Access granted.", "Access");

//playgroundPlannersForm mainForm = new playgroundPlannersForm(); <--- not needed anymore

ParentForm.logInToolStripMenuItem.Text = "Log Out"; 
```

在您的主表单中，在您显示您的子表单之前..执行以下操作：

```
SubForm subform = new SubForm();
subform.ParentForm = this;
subform.Show(); 
```

这会将父级设置为创建它的表单（根据您的代码，这是正确的表单）。您可能还需要进入表单设计器代码并将 loginToolStripMenuItem 公开（如果尚未公开）。

# java - 是否可以在 Java 中创建一个对输入法计时的方法？

> ID：13371133
> 
> 赞同：1
> 
> 时间：2012-11-14T00:15:55.793
> 
> 标签：java, time, reference

是否可以在 Java 中通过引用创建一个方法来计时另一个方法？

我在想类似的东西：

```
 int timeMethod(method myMethod) {
        long start = time
        run myMethod
        long end = time
        return end-start
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:18:18.313

AOP（aspectJ 实现）是您要重新发明的，[这里](http://www.christianschenk.org/blog/profiling-with-aspectj/)是描述示例的快速谷歌链接

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T00:33:52.860

您可以将方法调用包装在 a`Runnable`和 time 中运行需要多长时间`Runnable`：

```
long timeMethod(Runnable myMethodRunner) {
    long start = System.nanoTime();
    myMethodRunner.run();
    return System.nanoTime() - start;
} 
```

然后您可以按如下方式计时您的方法：

```
public void myMethod(...) {
    . . .
}

// later:

long timeInNanoSeconds = timeMethod(new Runnable() {
    public void run() {
        myMethod(...);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T00:18:07.407

您可以使用`System.currentTimeMillis();`for start 并在方法结束时执行此操作，然后像您提到的那样减去两个。

```
public void timeExtensiveMethod() {
    long start = System.currentTimeMillis();
    //do stuff 
    long end = System.currentTimeMillis();
    System.out.println("Time taken: " + (end - start));
} 
```

请注意，并非上述所有变量都是必需的，它们只是用来展示思考过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T00:20:06.950

Java中没有函数指针（至少不是确切的函数指针）。您可以尝试例如像这样的组合：

```
int timeMethod(MyClass object) {
        long start = System.currentTimeMillis();
        object.run();  //this class can implement a common interface and you program to interface not concrete implementation
        long duration = System.currentTimeMillis() - start;
        return duration;
     } 
```

编辑：AOP +1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T00:25:38.577

是的，这是可能的，但是我相信您应该使用真正的分析器，而不是这样一个“愚蠢”的分析器。

您必须使用[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)来调用该方法[`System.currentTimeMillis()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29)或[`System.nanoTime()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)测量经过的时间：

```
long measureMethodExecutionTime(Method method, Object object, Object[] args) {
    long startTime = System.currentTimeMillis();

    method.invoke(object, args);

    return System.currentTimeMillis() - startTime;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-14T00:19:19.853

没有在java中你不能将方法作为参数传递

# iphone - 目标 c 和 xcode 将值分配给来自 NSInteger 类型变量的标签

> ID：13371139
> 
> 赞同：0
> 
> 时间：2012-11-14T00:16:38.650
> 
> 标签：iphone, objective-c, xcode

又是我，在过去的一个半小时里我一直在为此苦苦挣扎，似乎找不到实现这一点的好方法。我基本上是想在单击按钮时在标签上显示结果。（刚从 xcode 开始，所以我不确定这是否是该操作的正确术语）。无论如何，这是我的代码和控制器上的方法：我有

```
@interface Match : NSObject{
}
@property NSInteger *Id;
@property NSString *fighter1, *fighter2;
- (id) initWithWCFId:(NSInteger)matchId bracketId:(NSInteger)bracketId;
@end

@implementation Match
- (id) initWithWCFId:(NSInteger)matchId bracketId:(NSInteger)bracketId{
    self = [self init];
    if(self){
        self.Id = &(matchId);
        self.fighter1 = @"Person 1";
        self.fighter2 = @"Person 2";
    }
    return self;
}
@end 
```

- - 控制器 - -

```
@interface ViewController : UIViewController{
    /*IBOutlet UITextField *txtFieldBracketId;
    IBOutlet UITextField *txtFieldMatchId;*/
}
@property (weak, nonatomic) IBOutlet UITextField *txtFieldBracketId;
@property (weak, nonatomic) IBOutlet UITextField *txtFieldMatchId;
- (IBAction)btnSubmit:(id)sender;

@end 
```

- - 执行

```
- (IBAction)btnSubmit:(id)sender {

    @autoreleasepool {
        Match *match = [[Match alloc]initWithWCFId:[_txtFieldMatchId.text integerValue] bracketId:[_txtFieldBracketId.text integerValue]];

        self.lblMatchId.text = [[NSString alloc] initWithString:[NSNumber numberWithInt:match.Id]];
        self.lblFighter1.text = [[NSString alloc] initWithString:match.fighter1];
        self.lblFighter2.text = [[NSString alloc] initWithString:match.fighter2];
    }
} 
```

我基本上有两个文本框。现在，当我单击按钮时，它将获取这些文本框的值，然后显示它根据这些输入获得的数据。然后它将显示以下三个数据：

Id，Fighter1 和 Fighter2。

所以发生的事情是，当我单击按钮时，整个事情都会停止并给我这个错误：

> NSInvalidArgumentException”的，原因是： ' - [__ NSCFNumber长度]：无法识别的选择发送到实例0x74656e0' ***第一掷调用堆栈：（0x1c90012 0x10cde7e 0x1d1b4bd 0x1c7fbbc 0x1c7f94e 0xae4841 0x2891 0x10e1705 0x18920 0x188b8 0xd9671 0xd9bcf 0xd8d38 0x4833f 0x48552 0x263aa 0x17cf8 0x1bebdf9 0x1bebad0 0x1c05bf5 0x1c05962 0x1c36bb6 0x1c35f44 0x1c35e1b 0x1bea7e3 0x1bea668 0x1565c 0x23dd 0x2305) libc++abi.dylib：终止调用抛出异常

现在我不确定 1\. 我设计班级的方式是否正确，使用“NSInteger”作为属性 ID。或 2\. 将 Id 整数分配给字符串（编辑框）是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:24:00.100

两件事情：

1.  该属性不应该是指针类型，所以它应该是`@property NSInteger Id;`并且`init`应该只是`self.Id = matchId;`
2.  通过使用使其成为字符串`[NSString stringWithFormat:@"%d", match.Id]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:43:17.853

除了您的`Id`财产问题外，崩溃还来自以下原因：

```
self.lblMatchId.text = [[NSString alloc] initWithString:[NSNumber numberWithInt:match.Id]]; 
```

您正在尝试将`NSNumber`对象作为参数传递给该`initWithString:`方法。但是这个方法需要一个`NSString`值，而不是一个`NSNumber`.

将三行更新为：

```
self.lblMatchId.text = [[NSString alloc] initWithFormat:#"%d", match.Id];
self.lblFighter1.text = match.fighter1;
self.lblFighter2.text = match.fighter2; 
```

我假设`match.fighter1`并且`match.fighter2`是 NSString 属性。

# sql - 将 IP 地址分组返回 15 而不是 3

> ID：13371144
> 
> 赞同：0
> 
> 时间：2012-11-14T00:16:47.060
> 
> 标签：sql, group-by

我想对 IP 地址进行分组，使其返回 3 而不是 15，就像下面的 SQL 代码一样。

这是它在我的数据库中的样子：

```
ID    IDP   IDU  DATE                   INFO_IP
 1    19    0    2012-11-14 00:42:03    127.0.0.1
 2    19    0    2012-11-14 00:42:40    127.0.0.1
 3    19    0    2012-11-14 00:45:01    127.0.0.1
 4    19    0    2012-11-14 00:47:24    127.0.0.1
 5    19    0    2012-11-14 00:48:35    127.0.0.1
 6    19    0    2012-11-14 00:48:57    127.0.0.1
 7    19    0    2012-11-14 00:53:41    127.0.0.1
 8    19    0    2012-11-14 01:02:12    127.0.0.1
 9    19    0    2012-11-14 01:02:55    127.0.0.1
10    19    0    2012-11-14 01:03:03    127.0.0.1
11    19    0    2012-11-14 01:03:20    127.0.0.2
12    19    0    2012-11-14 01:03:28    127.0.0.2
13    19    0    2012-11-14 01:04:16    127.0.0.2
14    19    0    2012-11-14 01:04:33    127.0.0.3
15    19    0    2012-11-14 01:04:40    127.0.0.3 
```

这是SQL代码：

```
SELECT idp, COUNT(info_ip) FROM photos_watched
WHERE idp = '19'
GROUP BY info_ip
LIMIT 1 
```

我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:23:48.417

你想要的是计算不同的 IP ：

```
SELECT COUNT(DISTINCT INFO_IP)
FROM photos_watched
WHERE idp = 19; 
```

您当前的查询计算每个组中的 IP 数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:19:33.423

难道不应该

```
SELECT info_ip, COUNT(*) 
FROM photos_watched
WHERE idp = '19'
GROUP BY info_ip 
```

# css - 背景图像用作精灵未加载

> ID：13371145
> 
> 赞同：1
> 
> 时间：2012-11-14T00:16:47.810
> 
> 标签：css, background-image, sprite

我一直在尝试为我的网站创建一个小型社交媒体栏。由于某种原因，我无法计算出我想用来创建精灵的图像不会加载。我还应该提到，我在背景图像不显示方面遇到了类似的问题。

HTML 调用是这样的：

```
<div id="socialbar">
    <div class="plus"><a href="https://plus.google.com/u/0/105252399036646613257/posts">Google Plus</a></div>
    <div class="twitter"><a href="https://twitter.com/DarrenLumber">Twitter</a></div>
    <div class="facebook"><a href="http://www.facebook.com/Dazzla2020">Facebook</a></div>
    <div class="youtube"><a href="http://www.youtube.com/user/dazzla2020">YouTube</a></div>
    <div class="flickr"><a href="http://www.flickr.com/photos/dazzla2020/">Flickr</a></div>
</div> 
```

CSS 看起来像这样：

```
#socialbar
{
    width: 245px;
    margin: 0px;
    display: inline;
    border: 0px;
}

#socialbar a.plus
{
    display: block;
    float: left;
    height: 32px;
    width: 32px;
    text-indent: -9999px;
    background-image: url('http://www.mediafire.com/conv/9452d5f77f6e5e7e91294b54b9a74d18029cbeae2075ef9d12787e7631f849226g.jpg');
    background-position: 0px 0px;
    margin-left: 5px;
    margin-right: 5px;
}

#socialbar a:hover.plus
{
    background-image: url('http://www.mediafire.com/conv/9452d5f77f6e5e7e91294b54b9a74d18029cbeae2075ef9d12787e7631f849226g.jpg');
    background-position: 0px -32px;
}

#socialbar a.twitter
{
    display: block;
    float: left;
    height: 32px;
    width: 32px;
    text-indent: -9999px;
    background-image: url('http://www.mediafire.com/conv/d2133ecf83fc76b78008ed1357a8fb8213e6c2300c26f6af3b1758c576ed17db6g.jpg');
    background-position: 0px 0px;
    margin-left: 5px;
    margin-right: 5px;
}

#socialbar a:hover.twitter
{
    background-image: url('http://www.mediafire.com/conv/d2133ecf83fc76b78008ed1357a8fb8213e6c2300c26f6af3b1758c576ed17db6g.jpg');
    background-position: 0px -32px;
}

#socialbar a.facebook
{
    display: block;
    float: left;
    height: 32px;
    width: 32px;
    text-indent: -9999px;
    background-image: url('http://www.mediafire.com/conv/df04514676d02be959e52f440b9c10e82d09eefdb82d34fdd336a896be551d026g.jpg');
    background-position: 0px 0px;
    margin-left: 5px;
    margin-right: 5px;
}

#socialbar a:hover.facebook
{
    background-image: url('http://www.mediafire.com/conv/df04514676d02be959e52f440b9c10e82d09eefdb82d34fdd336a896be551d026g.jpg');
    background-position: 0px -32px;
}

#socialbar a.youtube
{
    display: block;
    float: left;
    height: 32px;
    width: 32px;
    text-indent: -9999px;
    background-image: url('http://www.mediafire.com/conv/6de4cbb7ecf8e81a25e0ebe35e2cb82af5859b4b2cb3ac9c3ec2fe8c62348c296g.jpg');
    background-position: 0px 0px;
    margin-left: 5px;
    margin-right: 5px;
}

#socialbar a:hover.youtube
{
    background-image: url('http://www.mediafire.com/conv/6de4cbb7ecf8e81a25e0ebe35e2cb82af5859b4b2cb3ac9c3ec2fe8c62348c296g.jpg');
    background-position: 0px -32px;
}

#socialbar a.flickr
{
    display: block;
    float: left;
    height: 32px;
    width: 32px;
    text-indent: -9999px;
    background-image: url('http://www.mediafire.com/conv/dbab33ccef1c60b2974d10a0323f7bb04f594f3b57468dc1a7be8551eb9d1b176g.jpg');
    background-position: 0px 0px;
    margin-left: 5px;
    margin-right: 5px;
}

#socialbar a:hover.flickr
{
    background-image: url('http://www.mediafire.com/conv/dbab33ccef1c60b2974d10a0323f7bb04f594f3b57468dc1a7be8551eb9d1b176g.jpg');
    background-position: 0px -32px;
} 
```

您还可以在这里找到我的代码：http: [//jsfiddle.net/Yx8tT/122/](http://jsfiddle.net/Yx8tT/122/)
（请注意，我为此使用了另一个主机，因为我的网站的主机不允许直接链接到图像等，而不是我的实际网站）

有问题的网站是： [http ://www.darrenlumber.co.uk](http://www.darrenlumber.co.uk)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:19:59.450

您没有将 CSS 应用于加号元素。

```
<div class="plus"><a href="https://plus.google.com/u/0/105252399036646613257/posts">Google Plus</a></div>

#socialbar a.plus
{
    display: block;
    float: left;
    height: 32px;
    width: 32px;
    text-indent: -9999px;
    background-image: url('http://www.mediafire.com/conv/9452d5f77f6e5e7e91294b54b9a74d18029cbeae2075ef9d12787e7631f849226g.jpg');
    background-position: 0px 0px;
    margin-left: 5px;
    margin-right: 5px;
} 
```

选择器应该是：

```
#socialbar .plus a 
```

以此类推。

# html - 如何停止在网页上自动播放音频？

> ID：13371148
> 
> 赞同：0
> 
> 时间：2012-11-14T00:16:53.720
> 
> 标签：html, audio

我目前正在一个处理音频的网站上工作，我想知道如何在用户访问该页面时阻止我的音频自动播放。我已经尝试了多种方法来嵌入音频，这些方法应该在没有 html5 和最新浏览器（和）的情况下工作，它们都播放音频，但它们都是自动启动的，我在 Google 上找不到任何东西可以解决这个问题。所以我想知道如何阻止嵌入式音频自动启动，如果可能的话，我希望该解决方案能够在大多数浏览器中工作。

谢谢您的帮助。

编辑我尝试过的代码请求：

```
<embed src="http://www.test.com/audio.mp3" autoplay=false autostart=false /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:17:56.697

尝试添加`autoplay=false`到标签。

# android - google nexus 7 的安卓模拟器？

> ID：13371149
> 
> 赞同：4
> 
> 时间：2012-11-14T00:16:55.680
> 
> 标签：android, android-emulator

我想设置 android 模拟器，它将模拟设备 google nexus 7。它有 7 英寸显示屏和分辨率 1280x800。

显示器 dpi 的正确值是多少？这个值是否相当于硬件部分中抽象的 LCD 密度？

![在此处输入图像描述](../Images/c1901eebbfb2e3e0b427b1ad57cd0304.png) ![在此处输入图像描述](../Images/8bbc22ee8ad055e6d8c9412dfed82181.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:46:27.147

这是其他人在android模拟器中正确设置显示的答案。

所以我将**抽象的 LCD 密度**设置为值**213**。它是 Nexus 7 的默认值。由于这个值，nexus 无法显示完整的平板电脑模式。此值特定于每个设备。

接下来我将**分辨率**设置为**1280x800**并保存。然后我单击启动模拟器并设置有关监视器的下一个值。

我使用分辨率为**1680x1050 px的****15.4 英寸显示器**。首先，我设置了平板电脑的**屏幕尺寸**（**7 英寸**），然后**监控 dpi**。当您单击问号时，它将显示带有**屏幕尺寸**和**分辨率**的新窗口。这些值是您的电脑显示器的值。当您填写这些值时，它会计算您的显示器 dpi。对我来说是**129**。最后我启动模拟器。

# ms-access - 如何根据 Access 2010 表单中的单选按钮选择将文本输入表格

> ID：13371153
> 
> 赞同：2
> 
> 时间：2012-11-14T00:17:05.337
> 
> 标签：ms-access, ms-access-2010

我创建了一个带有单选按钮的表单。

它接受人的性别输入并将其存储在表格中。我希望它在选择男性时存储文本“男性”，在选择女性时存储文本“女性”。

我无法做到这一点，因为当我尝试时，我无法更改选项的值，它将它作为整数 1,2,3 ...

在按钮的属性中，在数据选项卡中，我尝试将各自按钮的选项值更改为“男性”和“女性”，但它们不断变回 1 和 2

我希望这是一个将进入数据库的文本。我试过这样做，但选项的数据值似乎没有改变。

有人知道怎么做吗？？

问候， 阿米尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:14:51.300

可能最简单的方法是取消绑定选项按钮并为性别创建一个隐藏的文本框，然后使用选项组的更新后事件更新隐藏的文本框。

```
Select Case Me.Options
    Case 1
       Me.Gender = "Male"
    Case 2
       Me.Gender = "Female"
    Case Else
       Me.Gender = "N/A"
End Select 
```

在表单的当前事件中，您可以执行相反的操作：

```
Select Case Me.Gender
    Case "Male"
       Me.Options = 1
    Case "Female"
       Me.Options = 2
    Case Else
       Me.Options = 3
End Select 
```

# loops - 数学确定性自动机

> ID：13371154
> 
> 赞同：2
> 
> 时间：2012-11-14T00:17:07.583
> 
> 标签：loops, wolfram-mathematica, deterministic, automaton

我想在mathematica中创建一个模块，如果自动机是确定性的则返回。我正在考虑，如果有 2 个转换从同一状态开始并读取相同的符号，或者存在一个空转换，则自动机不是确定性的。

我想调试这段代码，但我不能：

```
isDeterministic[au_] := Module[{a, s},
  For[i = 1, i <= Length[au[[3]]],
   a = au[[3]][[i]][[1]];
   s = au[[3]][[i]][[2]];
   If[s == {}, Return[False]];
   For[j = i, j <= Length[au[[3]]],
    If[a == au[[3]][[j]][[1]] && s == au[[3]][[j]][[2]], 
     Return[False]];
    j++;
    ];
   i++;
   ];
  Return[True];
  ]
A = {{1, 2},
  {a, b},
  {{1, a, 2}, {2, b, 1}},
  1,
  {2}
  }
isDeterministic[A] 
```

A 是一个自动机，其中第一个元素是状态列表，第二个是字母表，第三个是转换，第四个是初始状态，第五个是最终状态列表。

主要问题是，当我将函数应用于 A 时，它永远不会结束。

编辑：已解决

这是最终代码：

```
isDeterministic[au_] := 
 Module[{a, s, lambda}, 
  For[i = 1, i <= Length[au[[3]]], i++, a = au[[3]][[i]][[1]];
   s = au[[3]][[i]][[2]];
   If[s == lambda, Return[False]];
   For[j = i + 1, j <= Length[au[[3]]], j++, 
    If[a == au[[3]][[j]][[1]] && s == au[[3]][[j]][[2]], 
     Return[False]]]];
  True]

A = {{1, 2},
  {a, b},
  {{2, b, 1}, {1, a, 2}},
  1,
  {2}
  }

isDeterministic[A]

True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:36:04.253

我讨厌看到人们在 Mathematica 中编写循环，它们几乎总是不必要的，而且几乎在所有情况下都有更好的选择，更好的是执行速度更快，更容易编写和理解。这种易于编写和理解的部分仅来自于按照 Mathematica 设计使用的方式做事的经验，但如果您继续以命令式风格进行编程，您将永远无法获得。

好的，讲道就够了，上一些 Mathematica。我将从定义一个不确定的自动机开始

`aub = {{1, 2, 3}, {a, b}, {{1, a, 2}, {2, b, 1}, {2, b, 3}}, 1, {2}};`

将规则的第一个子句用于确定自动机的确定性，首先将转换集按其前 2 个元素分组。表达方式

`GatherBy[aub[[3]], {First[#], First[Rest[#]]} &]`

产生输出

`{{{1, a, 2}}, {{2, b, 1}, {2, b, 3}}}`

如果您仔细检查，您会发现这是一个列表列表，每个列表都是前 2 个元素（开始状态和事件）匹配的转换列表。现在检查这些列表的长度很简单：

`Map[Length[#] == 1 &, GatherBy[aub[[3]], {First[#], First[Rest[#]]} &]]`

生成列表

`{True, False}`

最后，将最后一个表达式的头部更改为`And`，我们得到

`And @@ Map[Length[#] == 1 &, GatherBy[aub[[3]], {First[#], First[Rest[#]]} &]]`

这给出了响应

`False`

接下来，确定确定性规则的第二个子句要求没有空转换。我不确定您将如何建模这些，我假设这样的转换看起来像`{1,{},2}`一个带有空事件列表的开始和结束状态。我需要另一个测试用例

`auc = {{1, 2}, {a, b}, {{1, a, 2}, {2, {}, 1}, {2, b, 1}}, 1, {2}};`

要检查这一点，首先从转换中获取所有事件的集合：

`auc[[3, ;; , 2]]`

返回

`{a, {}, b}`

我已经使用`;;`符号对转换数组进行切片并仅从中选择事件。然后

`FreeQ[auc[[3, ;; , 2]], {}]`

检查空列表是否在转换的切片中。当然，在这种情况下，表达式返回`False`。

所以，我建议这个功能

```
isDeterministic[au_]:=And[(And @@ 
   Map[Length[#] == 1 &, 
    GatherBy[au[[3]], {First[#], First[Rest[#]]} &]]), 
 FreeQ[au[[3, ;; , 2]], {}]] 
```

替换您的基于循环的方法。

或者随意忽略这个无端的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:57:31.853

尝试这个

```
isDeterministic[au_]:=Module[{a,s,len = Length[au[[3]]] },

  For[i = 1, i <= len, i++,

     a=au[[3]][[i]][[1]];
     s=au[[3]][[i]][[2]];

     If[s=={}, Return[False,Module] ];

     For[j = i, j <= len, j++,

        If[a==au[[3]][[j]][[1]]&&s==au[[3]][[j]][[2]],
           Return[False,Module]
        ]
     ]
  ];

  True
 ] 
```

# sed - 使用 sed 删除括号内的重复数字

> ID：13371156
> 
> 赞同：3
> 
> 时间：2012-11-14T00:17:11.987
> 
> 标签：sed

我正在尝试使用 sed 删除括号内的重复数字。

所以我有以下字符串：

```
Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456) 
```

我想使用 sed 删除括号内的任何 4 位数字，包括括号。所以我的字符串应该是这样的：

```
Abdc 1234 1234 (5678) (9012) (3456) 
```

在这种情况下，“(5678)”和“(9012)”被删除，因为它们是重复的括号内的 4 位数字。“1234”数字没有被删除，因为它们不在括号内。“（3456）”没有被删除，因为它没有重复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:42:33.610

我不知道如何做到这一点，`sed`但您可以尝试以下方法`awk`：

```
$  echo "Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456)" | awk '
   {
     for(i=1;i<=NF;i++) { 
       if(substr($i,0,1) != "(" || (seen[$i] != 1)) {
         seen[$i]=1;
         printf "%s ",$i
       }
     };
     print ""
   }' 
```

输出：

```
Abdc 1234 1234 (5678) (9012) (3456) 
```

这将遍历行字段，然后仅在以前从未见过或不是以 . 开头的情况下打印每个字段`(`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T00:49:24.310

这适用于您的输入：

```
echo 'Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456)' | 
  sed 's/\(([0-9][0-9]*)\) \1/\1/g' 
```

它假设重复项彼此跟随，如果不是这种情况，请使用此版本：

```
echo 'Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456)' | 
  sed 's/\(([0-9][0-9]*)\) \(.*\)\1/\1\2/g' 
```

或者使用 GNU sed 扩展表达式更短一些：

```
echo 'Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456)' | 
  sed -r 's/(\([0-9]+\)) (.*)\1/\1\2/g' 
```

所有情况下的输出：

```
Abdc 1234 1234 (5678) (9012) (3456) 
```

### 编辑 - 处理存在两个以上相同项目的情况

这可以通过循环模式直到它不再匹配来完成：

```
echo 'Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456) (5678) (5678)' | 
  sed -r ':a; s/(\([0-9]+\))(.*)\1 ?/\1\2/g; ta' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:21:47.687

```
awk -F"(" '{for(i in a)delete a[i];for(i=2;i<=NF;i++){if($i in a){$i="";}else{a[$i];$i="("$i}}print $0}' your_file 
```

测试如下：输入：

```
> cat temp
Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456)
1234 1234 (1234) (5678) (9012) (1234) (3456)
 (5678) (6467) (6467) (9012) (5678) 
```

现在执行：

```
> awk -F"(" '{for(i in a)delete a[i];for(i=2;i<=NF;i++){if($i in a){$i="";}else{a[$i];$i="("$i}}print $0}' temp
Abdc 1234 1234  (5678)   (9012)   (3456)
1234 1234  (1234)  (5678)  (9012)   (3456)
  (5678)  (6467)   (9012)  (5678)
> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T01:10:28.720

使用 Perl：

```
$ echo "Abdc 1234 1234 (5678) (5678) (9012) (9012) (3456)" |
    perl -ne '
        my (@arr, %hash);
        for (split) {
            if (/^\(.*\)/) {
                $hash{$_}++;
                push @arr, $_ if $hash{$_} == 1;
            }
            else {
                push @arr, $_; 
            }
        }
        print join " ", @arr, "\n";
    ' 
```

这将使用多行作为输入和 N 次出现重复的带括号的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T07:19:01.690

这可能对您有用（GNU sed）：

```
sed ':a;s/\(\(([0-9]\+) *\).*\)\2/\1/g;ta' file 
```

# c# - 如何从 ExcelDna 将自定义对象或 double[,] 返回到 Excel 中的单元格？

> ID：13371157
> 
> 赞同：1
> 
> 时间：2012-11-14T00:17:27.620
> 
> 标签：c#, excel, user-defined-functions, excel-dna

理想情况下，我的 UDF 会以 double[,]、double[] 或自定义对象的形式返回一些双精度结果。我希望它全部存储在 Excel 中的单个单元格中，然后使用另一个 UDF 来提取它们。它类似于缓存计算结果并在以后按需显示。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:20:54.513

一种方法是在您的[Excel-DNA](http://exceldna.codeplex.com)加载项中有一个内部“对象存储”，然后有一个函数将某种“句柄”返回给 Excel，以及获取“句柄”并访问该对象的访问器函数按要求。清理您可以创建的对象是一个可能的问题，但可以使用一些 RTD 功能来解决。

这个关于 Excel-DNA 组的讨论有一个在 F# 中实现这个想法的例子 - [https://groups.google.com/group/exceldna/browse_frm/thread/138bc83923701e6d](https://groups.google.com/group/exceldna/browse_frm/thread/138bc83923701e6d)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:33:51.210

It certainly is possible, but it is difficult to give you a detailed answer without knowing how you are using ExcelDNA. What I mea by that is whether you are wrapping your C# methods in vba code, or are getting a handle on the Excel application in C# and writing to the workbook directly from there. In both cases you can do what you want, but the way to do it would be slightly different. The wrapper method would also be slightly less flexible, since you have to first pass out your values to the vba UDF and then write them to the cell from there, so you will be restricted in the data type you can return (as far as I know anyway).

The way to do this would be to write the results to a specific cell, maybe on a hidden sheet, so it can't be tampered with, and then retrieve those using another UDF. You would have to hardcode the cell address, or maybe parse the sheet to find the values you want.

In case of a method returning a `double[,]`, you would probably have to write the values to two different cells, or in one cell as text with a separator and then convert from text to double when you retrieve the cell value, something like `Double.Parse(cell.value.ToString().Split(',')[0])` to get the first values (assuming that you are storing the values as a comma-separated string) or similar code in vba if you use a pure vba UDF to get the values...

If you want to do this, I think you should definitely use a hidden sheet with a well-defined structure to store your values. If you only need to store the values for the duration of the session, then I think you should store them in global variables in a vba module.

UPDATE

Since you are just writing functions, I don't think you will be able to pass out a custom object (unless you implement your own converter, convert it to text and then read it back in that way).

You pass back the `double` or `double[,]` to a variable in your UDF and write it to a cell from there. Then read it back again from that cell with any other UDF.

The rest is the same as I wrote above. If you store two values in the same cell, you will have to do that as text, so you will have to split and parse the values first in your UDF before passing them to your C# method (or you can do the parsing in the method).

In practice there should be no problem at all with what you are trying to do.

# android - ArrayAdapter - 使用多个搜索词过滤

> ID：13371160
> 
> 赞同：6
> 
> 时间：2012-11-14T00:17:44.177
> 
> 标签：android, listview, filtering, android-arrayadapter

我最近为[这个 SO question](https://stackoverflow.com/questions/9407428/filter-for-android-listview-space-character/13354555#13354555)添加了赏金，但意识到原始问题要求的是 SimpleAdapter 而不是 ArrayAdapter。所以，这个问题与 ArrayAdapter 有关：

我希望能够使用多个搜索词过滤 ListView 中的 ArrayAdapter。例如，如果我的列表包含以下项目：

```
a thing
another thing
a different thing
nothing
some thing 
```

如果我搜索“事物”，则*所有*术语都应在过滤结果中返回。这是可以使用以下代码完成的正常行为：

```
 private TextWatcher filterTextWatcher = new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
        myAdapter.getFilter().filter(s.toString());
    }
}; 
```

然而; 如果我输入搜索短语“ `a thing`”，我希望显示以下结果：

```
a thing
another thing
a different thing 
```

事实上，我在结果“ `a thing`”中返回的所有内容。由于过滤器正在查找整个字符串，因此它将空格视为搜索词的一部分。本质上，我要问的是如何过滤列表，而不是按一个特定的字符串，而是按多个搜索词，每个搜索词用空格分隔？只要每个搜索词在项目中至少出现一次，那么该项目就应该在结果中返回。

之前似乎在 SO 上提出过类似的问题（例如，请参阅本文顶部的链接，该链接涉及 SimpleAdapters），但我没有找到实现此目的的实际方法。我想答案将涉及将搜索短语分成单独的字符串，由空格字符分隔，然后在每个字符串上多次运行搜索，并且只返回与*所有*迭代匹配的结果......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T04:45:42.530

不幸的是，ArrayAdapter 和其他内置适配器不允许您更改它们现有的过滤器。API中没有`setFilter()`方法...您必须创建一个自定义适配器，该适配器执行与 ArrayAdapter 相同的功能。

为此：只需将[ArrayAdapter 的源代码](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ArrayAdapter.java/?v=source)剪切并粘贴到项目中的一个新类中。然后在底部找到过滤器。在里面`performFiltering()`我们会做一些改变。找到标有以下注释的 if-else 块，并将该代码块替换为：

```
// First match against the whole, non-splitted value
if (valueText.startsWith(prefixString)) {
    newValues.add(value);
} else {
    // Break the prefix into "words"
    final String[] prefixes = prefixString.split(" ");
    final int prefixCount = prefixes.length;

    int loc;
    // Find the first "word" in prefix
    if(valueText.startsWith(prefixes[0]) || (loc = valueText.indexOf(' ' + prefixes[0])) > -1)
        loc = valueText.indexOf(prefixes[0]);

    // Find the following "words" in order
    for (int j = 1; j < prefixCount && loc > -1; j++) 
        loc = valueText.indexOf(' ' + prefixes[j], loc + 2);

    // If every "word" is in this row, add it to the results
    if(loc > -1) 
        newValues.add(value);
} 
```

而已。我们只需要更改上面的代码部分以满足您的要求，但是我们必须将整个适配器复制到一个类中，因为没有其他方法可以进行这些更改。

（PS 由于您已经创建了一个新类，您不妨进行优化`getView()`以适应您的需要。泛型方法比自定义类所需的速度要慢。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T20:37:32.180

我想我会分享我修改过的 Sam 出色答案的版本。我刚刚做了 2 处小改动，以支持过滤器字符串和被过滤的文本中的多行文本：

```
final String valueText = value.toString().toLowerCase().replace('\r', ' ').replace('\n', ' ');

// First match against the whole, non-splitted value
if (valueText.startsWith(prefixString)) {
    newValues.add(value);
} else {
    // Break the prefix into "words"
    final String[] prefixes = prefixString.split("\\s+");
    final int prefixCount = prefixes.length;

    int loc;
    // Find the first "word" in prefix
    if(valueText.startsWith(prefixes[0]) || (loc = valueText.indexOf(' ' + prefixes[0])) > -1)
        loc = valueText.indexOf(prefixes[0]);

    // Find the following "words" in order
    for (int j = 1; j < prefixCount && loc > -1; j++) 
        loc = valueText.indexOf(' ' + prefixes[j], loc + 2);

    // If every "word" is in this row, add it to the results
    if(loc > -1) 
        newValues.add(value);
} 
```

我只是用空格替换 \r 和 \n 。如果需要，您还可以删除其他空格，例如 \t，或更改为正则表达式......对我来说 \r 和 \n 就足够了。我还将 split() 更改为 \s+ 以便它在任何空白处拆分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-20T09:41:53.053

Sam 已经给出了一个很好的答案 但是有一个很短的问题 例如，如果我想搜索“a thing”，我可能会输入“thing a”。这行不通。但是，上面的代码包含一个简短的部分，它试图返回“按顺序”这个词。您需要对其进行一些更改以获得最佳解决方案。

```
 // First match against the whole, non-splitted value
    if (valueText.startsWith(prefixString)) {
        newValues.add(value);
    } else {
        // Break the prefix into "words"
        final String[] prefixes = prefixString.split(" ");
        final int prefixCount = prefixes.length;

        int loc;
        // Find the first "word" in prefix
        if(valueText.startsWith(prefixes[0]) || (loc = valueText.indexOf(' ' + prefixes[0])) > -1)
            loc = valueText.indexOf(prefixes[0]);

        // Find the following "words"
        for (int j = 1; j < prefixCount && loc > -1; j++) 
            loc = valueText.indexOf(prefixes[j]);

        // If every "word" is in this row, add it to the results
        if(loc > -1) 
            newValues.add(value);
    } 
```

我已经从 Sam 的回答中删除了 loc + 2 这一行

```
for (int j = 1; j < prefixCount && loc > -1; j++)
        loc = valueText.indexOf(' ' + prefixes[j], loc + 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:52:09.763

目前，实现您想要的唯一解决方案是覆盖`ArrayAdapter`并实现您自己的过滤要求。

这需要大量代码，例如`Filter`使用`ArrayAdapter`大量私有对象，您需要复制这些代码。

幸运的是，其他人 (@uʍop ǝpısdn) 已经参与了这个过程，编写了代码并将其提供给社区。

[您可以在此处](http://blogactivity.wordpress.com/2011/08/28/filterable-adapter/)找到指向博客的链接，包括如何使用示例以及[此处](https://github.com/slezica/blogActivity/blob/master/src/com/slezica/tools/widget/FilterableAdapter.java)的代码。

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T23:35:48.427

[补充 sam 的回复] 当您只输入空格时，您的代码会出现问题。我加了一个“如果”。

```
// First match against the whole, non-splitted value
if (valueText.startsWith(prefixString)) {
  newValues.add(value);
} else {
  // Break the prefix into "words"
  final String[] prefixes = prefixString.split(" ");
  final int prefixCount = prefixes.length;
  // HERE CHANGE
  if (prefixCount>0) {
    int loc;
    // Find the first "word" in prefix
    if (valueText.startsWith(prefixes[0]) || (loc = valueText.indexOf(' ' + prefixes[0])) > -1)
      loc = valueText.indexOf(prefixes[0]);

    // Find the following "words" in order
      for (int j = 1; j < prefixCount && loc > -1; j++)
        loc = valueText.indexOf(' ' + prefixes[j], loc + 2);

    // If every "word" is in this row, add it to the results
    if (loc > -1)
      newValues.add(value);
  }
} 
```

# iphone - 使用带有两个参数的 UIButton addTarget 时无法识别的选择器

> ID：13371167
> 
> 赞同：0
> 
> 时间：2012-11-14T00:18:17.643
> 
> 标签：iphone, objective-c, ios, mapkit

当我试图链接到我的 UIButton 的方法只有一个参数时，我可以调用 addTarget 并且我的代码在单击按钮时成功运行——

```
[ myDetailButton addTarget:self action:@selector(hideMap:) forControlEvents:UIControlEventTouchUpInside];

(void)hideMap:(NSMutableArray*)arguments 
```

但是如果我在 hideMap 方法中添加第二个参数，调用它时会出现无法识别的选择器错误：

```
[ myDetailButton addTarget:self action:@selector(hideMap:) forControlEvents:UIControlEventTouchUpInside];

(void)hideMap:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options 
```

[根据这个问题](https://stackoverflow.com/questions/3988485/passing-parameters-to-addtargetactionforcontrolevents)，无论我如何格式化 addTarget 参数，我都会看到这个错误——

```
action:@selector(hideMap)
action:@selector(hideMap:)
action:@selector(hideMap:event:) 
```

如何使用 addTarget 调用具有多个参数的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:25:37.647

您的问题是您提供了一个选择器，该选择器期望 NSMutableArray 作为输入以及字典。UIButton 不同意这一点。根据您链接到的帖子，UIBUtton 只同意发送任何内容、本身作为 id 或自身和事件。

我不是 100% 确定您期望如何从 UIButton 回调中获取 NSMutableArray 和 NSMutableDictionary，您在这里想要实现的究竟是什么，我可能会提供一些帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:34:55.513

问题是你的方法是：

```
-(void)hideMap:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options 
```

而且方法名`hideMap:withDict:`不是`hideMap:event:`。

将此代码更改`action:@selector(hideMap:event:)`为`action:@selector(hideMap:withDict:)`它将解决您的问题。

没有像这样的方法：`hideMap:event:`这就是问题所在。

# php - 将数组与 foreach 相结合

> ID：13371170
> 
> 赞同：-1
> 
> 时间：2012-11-14T00:18:25.877
> 
> 标签：php, arrays, foreach

为了检查我的数组中相等值的频率，我计算它们：

```
$count = array_count_values($array_names); 
```

要获取每个键/值对，我使用这个 foreach 循环：

```
foreach ($count as $key => $value) {
    echo $value . '–' . $key . '<br />'; 
} 
```

可能的输出：

```
2 – Harry Peters
1 – Winston Meyers
3 – Jason Williams 
```

现在我有了第二个带有 URL 的数组：

```
$urls = array(http://harry-peters.com, http://winston-meyers.com, http://jason-williams.com); 
```

该数组应该包裹在`$key`变量周围，例如

```
echo $value . '- <a href="' . $url . '">' . $key . '</a><br />'; 
```

所以我会得到类似的东西：

```
2 – <a href="http://harry-peters.com">Harry Peters</a>
1 – <a href="http://winston-meyers.com">Winston Meyers</a>
3 – <a href="http://jason-williams.com">Jason Williams</a> 
```

但我不知道如何为第一个循环的 URL 实现另一个 foreach 循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:46:50.273

这对你有用吗？

```
<?php

$names = array
(
    2 => "Harry Peters",
    1 => "Winston Meyers",
    3 => "Jason Williams"
);

$urls = array
(
    "http://harry-peters.com", 
    "http://winston-meyers.com", 
    "http://jason-williams.com"
);

$counter = 0;

foreach ($names as $key => $value)
{
    echo $key . '- <a href="' . $urls[$counter] . '">' . $value . '</a><br />';

    $counter++;
} 
```

请小心，因为 url 必须与名称的顺序完全匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:42:45.467

```
 $count =array("mark Ortiz", "You", "me", "hello");
  $urls = array("http://harry-peters.com", "http://winston-meyers.com", "http://jason-williams.com")
    foreach ($count as $key => $value) {
    //echo $key . '-' . $value . '<br />'; 
    $count[$key] = "<a href='$urls[$key]' >".$value."</a>";// this forced value to be formatted
    }
    foreach ($count as $key => $value) {
    echo $key . '-' . $value . '<br />'; 

    } 
```

这应该很容易，我希望你小心避免数组索引越界异常

# java - arraylist java计算整数的运行

> ID：13371171
> 
> 赞同：0
> 
> 时间：2012-11-14T00:18:28.933
> 
> 标签：java, sorting, arraylist

我是 java 和数组列表的新手。我应该排序填充一个充满随机整数的数组，然后如果有一个运行（一行中相同数字的倍数），则在该运行周围放置（）。所以如果随机列表是：

2 3 4 5 5 5 5 6 7 7 9

2 3 4 (5 5 5 5) 6 (7 7) 9

这是我到目前为止所拥有的：

```
import java.util.*;

class Run {
  public static void main (String [] args){

    Scanner m = new Scanner(System.in);

    System.out.print("Enter length wanted: ");
    int len = m.nextInt();

    System.out.print("Enter max number wanted: ");
    int max = m.nextInt();
    max = max -1;

   int[] x = new int[len]; 
   ArrayList<String> y = new ArrayList<String>();

   //Filling x with random numbers
   for(int i = 0; i<len; i++){

    x[i] = ((int)(Math.random()*max)+1); 

   }

   System.out.println("Orginal Array: " + Arrays.toString(x));

   for(int i = 0; i<=len-1; i++){
     if(x[i] == x[i++]){ //I just don't know how I am exactly supposed to sort this

     }else{

     }

  }
   //Array List with ()
   System.out.println("Runs labeled Array: " + y);

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:22:03.270

用于[`Collections.sort(yourList)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)对 ArrayList 进行排序。

如果你不想使用 API 方法。

尝试 ：

```
for(int i=0;i<list.size(); i++){
            for(int j=i+1; j<list.size(); j++){
                if(list.get(i)>list.get(j)){
                    temp = list.get(i);
                    list.set(i,list.get(j));
                    list.set(j, temp);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:25:21.490

您将需要一个字符串来显示最终输出。另外，不要走出阵列。尝试这样的事情：

```
x = Collections.sort(x);
String s = "";
boolean b;
for(int i = 0; i<=len-1; i++){
 if(x[i] == x[i+1]){
   s+=" ("+i+" ";
   b = true;
 }else{
   if(b == true){
      s+=i+") ";
      b = false;
   }
   s+=i + " ";
 }

} 
```

# jquery - jquery hide/show Div 在 Firefox 中有效，但在 chrome 中无效

> ID：13371172
> 
> 赞同：0
> 
> 时间：2012-11-14T00:18:36.510
> 
> 标签：jquery, show-hide

我有一个很长的页面，里面有很多查询和 ajax。这是缩短的版本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/ui-lightness/jquery-ui.css" type="text/css" />
<style>
    #holder{position:relative;}
    #waiting{width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index:200; padding-top:20%; text-align:center; background:rgba(255, 255, 255, 0.5);}
    #waiting img {width:200px;}

</style>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="scripts/jquery.json-2.3.min.js"></script>
    <script type="text/javascript" src="scripts/scripts.js"></script>
    <script type="text/javascript"> 

        function showStep3(){
            $('#waiting').show();
            // this is where a ton of jquery including ajax goes
            runQuery();
            $('#waiting').hide();
        }

        $(function(){

            $('#waiting').hide();

        });

    </script>

</head>
<body>
    <div id="holder">
    <div id="waiting"><img src="img/waiting.gif"></div>
        <div id="criteria">
            whole bunch of HTML
        </div>
    </div>
</body>
</html> 
```

在标记为“这是包含 ajax 的大量 jquery 所在的区域”的区域中，有一些 ajax 调用设置为 async:false （以防产生影响）。

基本上我在加载时隐藏“等待” div，然后当我启动函数 showStep3 时显示它，做一堆东西，然后在所有完成后隐藏它。

这在 Firefox 中按预期工作，但在 chrome 或 IE9 中不起作用。有任何想法吗？

# objective-c - NSPersistentStoreCoordinator executeRequest 是否没有任何上下文，可以安全获取_objectIDs_

> ID：13371175
> 
> 赞同：1
> 
> 时间：2012-11-14T00:18:56.720
> 
> 标签：objective-c, cocoa, core-data

我们有一个后台线程需要进行一些获取..但它不需要任何数据——只需要 objectID

最初我们只是为此使用特定的新创建的空白托管上下文来执行此操作。

```
NSFetchRequest *request = [DKDocumentDetails requestAllWithPredicate:predicate inContext:ctx];
[request setResultType:NSManagedObjectIDResultType];
self.objectIDs = [DKDocumentDetails executeFetchRequest:request inContext:ctx];
... 
```

但最近我发现，我也可以在 PST 本身上执行此操作，无需任何上下文，**因为我不想要托管对象，而只想要 ID**

```
NSFetchRequest *request = [DKDocumentDetails requestAllWithPredicate:predicate inContext:mainctx /*used in the wrong thread but only for getting entity description*/];
[request setResultType:NSManagedObjectIDResultType];

NSError *error = nil;
self.objectIDs = [pst executeRequest:request inContext:nil error:&error];
... 
```

所以在我的测试中它从未崩溃，在文档中我不明白为什么它也不应该工作......我的意思是我没有得到未保存的东西，我无法得到对象，但是以这种方式使用......

它更快，看起来很优雅，但它是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T23:55:07.037

我整天都在想你的问题。这是我想出的。正如其他人指出的那样，`NSPersistentStoreCoordinator`对象不是线程安全的。当不同线程上的一堆`NSManagedObjectContext`对象使用相同的对象时`NSPersistentStoreCoordinator`，它们通过锁定和解锁`NSPersistentStoreCoordinator`.

但是，您担心只读取数据和线程安全`NSManagedObjectID`数据。那样可以么？

好吧，[Apple 文档 On Concurrency with Core Data](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)提到了与您正在做的事情类似的事情：

> 例如，您可以将获取请求配置为仅返回对象 ID，但还包括行数据（并更新行缓存）——如果您只是要将这些对象 ID 从后台线程传递到另一个线程，这将很有用.

好的，但是我们需要锁定协调器吗？

> 通常不需要对托管对象或托管对象上下文使用锁。但是，如果您使用由多个上下文共享的单个持久存储协调器并希望对其执行操作（例如，如果您想添加一个新存储），或者如果您想在一个上下文中将多个操作聚合为如果是虚拟单个事务，则应锁定持久存储协调器。

这似乎很清楚，如果您从多个线程对持久存储执行操作，则应该锁定它。

但是等等 - 这些只是读取操作，它们不应该是安全的吗？好吧，显然不是：

> Core Data 不存在读取“安全”但更改“危险”的情况——每个操作都是“危险的”，因为每个操作都有缓存一致性影响并且可能触发故障。

它是我们需要担心的缓存。这就是您需要锁定的原因 - 一个线程中的读取可能会导致另一个线程中的数据因无意的缓存更改而变得混乱。你的代码从来没有给你带来问题，因为这可能真的很少见。但它的那些边缘情况和百万分之一的错误可以造成最大的破坏......

那么，它安全吗？我的答案：

*   如果在您阅读时没有其他任何东西在使用您的持久存储协调器，是的，您是安全的。
*   如果您有其他任何东西使用相同的持久存储协调器，请在获取对象 ID 之前将其锁定。
*   使用托管对象上下文意味着锁定会自动为您处理，因此它也是一个很好的可能性，但看起来您*不需要*使用它（我同意不要仅仅为了获得一个几个对象 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:53:39.320

来自 NSPersistentStoreCoordinator 文档：

> 请注意，如果多个线程直接与协调器一起工作，则它们需要显式地锁定和解锁它。

我想说，如果您要正确锁定 PSC：

```
[pst lock];
self.objectIDs = [pst executeRequest:request inContext:nil error:&error];
[pst unlock]; 
```

根据我对文档的阅读，这将被认为是“安全的”。话虽如此，由 MOC 内部完成的锁定可能是您描述的两种方法之间最显着的性能差异，如果是这种情况，您可能更愿意只使用空白 MOC，因为当您或某人否则以后遇到的代码。

相关问题： [NSPersistentStoreCoordinator 线程安全吗？](https://stackoverflow.com/questions/1976020/is-nspersistentstorecoordinator-thread-safe)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T21:57:56.900

没有充分的理由不为此使用托管对象上下文。托管对象上下文给你带来了很多好处——它处理变更管理、线程等。使用持久存储协调器直接失去了很多这种功能。例如，如果您有尚未持久化到此存储的更改，则直接使用持久存储协调器可能会错过它们。

现在您说这对您有吸引力的原因是您只需要托管对象 ID。您似乎真正想要的是找到托管对象，而不是在它们上触发错误。您可以在获取请求中使用 NSManagedObjectResultType 或 NSManagedObjectIDResultType 来执行此操作。在 NSManagedObjectResultType 的情况下，您只需访问获取的对象上的 objectID，这不会触发错误 - 因此不会“获取数据”。如果已经填充了行缓存等，这可能具有一些性能优势。

说了这么多，为什么不直接使用父子上下文来解决这个问题呢？

# html - 两个 div 没有正确浮动

> ID：13371176
> 
> 赞同：0
> 
> 时间：2012-11-14T00:18:56.907
> 
> 标签：html, css

不知道问题是什么：[http ://watercookies.topfloorstudio.com/](http://watercookies.topfloorstudio.com/)

如果你向下滚动到“最新消息”，我试图让类的 div 与`.newscontentright`左侧的图像内联。我浪费了太多时间试图自己弄清楚。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:20:56.097

需要设置 newscontentright 的宽度

```
.newscontentright {
       width: 300px;
 } 
```

并从 newscontentleft 和 newscontentright 之间删除以下内容

```
 <div style="clear:both;"></div> 
```

作为旁注，学习在不使用 clear 的情况下布局页面。仅在绝对必要时使用 clear ，否则事情会变得一团糟。“溢出：自动”通常是更好的解决方案。

在这种特殊情况下，清除是完全不必要的，所以只需将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:29:22.507

也许在你第一次漂浮之前尝试你的清除？

```
<div style="clear:both;"></div>
<div class="newscontentleft">
<img class="imageshadow" width="178" height="122" alt="news1" src="images/news1.jpg">
</div>
<div class="newscontentright">   
<h3>Fall Blue Ridge Parkway “Bike for the French Broad”&lt;/h3>   
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vestibulum, turpis ut hendrerit porttitor, lectus ipsumegestas sapien, ac tristique metus quam id est. </p>
<a> href="#">Read the full article »</a>
</div> 
```

# c++ - 从成员函数数组访问成员函数

> ID：13371182
> 
> 赞同：0
> 
> 时间：2012-11-14T00:19:19.580
> 
> 标签：c++, arrays, function, pointers, member

我已经将几个成员函数分组到一个数组中。如何从数组中访问函数？我收到“错误 C2064：术语不评估为采用 0 个参数的函数。” 见下文。

```
class A
{
public:

    //Constructor
    A()
    {
        //Fill function array
        ClipFunction[0] = &A::ClipTop;
        ClipFunction[1] = &A::ClipBottom;
        ClipFunction[2] = &A::ClipLeft;
        ClipFunction[3] = &A::ClipRight;
    }

    //Declare array
    typedef void (A::*ClipFunction_ptr) ();
    ClipFunction_ptr ClipFunction[4];

    //Clipping functions
    void ClipTop();
    void ClipBottom();
    void ClipLeft();
    void ClipRight();

    //Start clipping process
    void StartClip();

};

//Define clipping functions
void A::ClipTop() {}
void A::ClipBottom() {}
void A::ClipLeft() {}
void A::ClipRight() {}

//Define A::StartClip()
void A::StartClip()
{
    //Run through all functions in the array
    for (unsigned int i = 0; i < 4; i++)
    {
        ClipFunction[i](); //ERROR. How do I access ClipFunction[i] ???
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:27:24.637

您需要像这样取消引用该函数： `this->(*ClipFunction[i])();`

您缺少的是`this`或者更确切地说编译器抱怨它没有第一个参数（调用成员函数的对象的实例）将其传递给函数。

对编译器的成员函数： `void A::ClipFunction() { }`

翻译成类似的东西： `void ClipFunction(A* this) { }`

因此，抱怨该函数不是采用零参数的函数的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:40:15.963

我认为问题是您需要像[http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/topic/com.ibm.xlcpp8l.doc/language/ref/cplr034.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/topic/com.ibm.xlcpp8l.doc/language/ref/cplr034.htm)中那样明确使用“this” .

所以在你的情况下，你应该使用

```
 (this ->* ClipFunction[i]) (); 
```

代替

```
 ClipFunction[i](); 
```

附言

当我回复这个帖子时，我没有看到 Vite Falcon 的回答。基本上我们说的是同样的事情，但我认为他的代码“this->(*ClipFunction[i])()”不会编译，因为 GCC 在我的机器上给出了错误。"(this->*ClipFunction[i])()" 是正确的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:30:18.360

我认为您不需要`::`typedef 中的范围解析运算符。而是尝试把

```
 typedef void (*ClipFunction_ptr) (); 
```

# html - 如何使导航栏始终位于顶部？

> ID：13371186
> 
> 赞同：14
> 
> 时间：2012-11-14T00:19:38.343
> 
> 标签：html, css, zurb-foundation

我正在使用`Foundation`并`ZURB`试图将导航栏置于顶部。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-14T00:23:11.793

我不知道那两件事是什么，但这就是你如何在适当的位置修复某些东西，而不管使用 CSS 的窗口滚动位置如何：

```
#navbar {
    position: fixed;
    top: 0px;
    width: 100%;
}​ 
```

见这里：http: [//jsfiddle.net/qC2Dt/](http://jsfiddle.net/qC2Dt/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-14T00:21:28.040

如果您使用基础，您可以使用：

```
<nav class="top-bar fixed"></nav> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-04T22:12:04.287

添加到亚历克斯韦恩的回答：

我发现有必要添加一个足够大的**z-index ，以便导航栏始终出现在其他元素的顶部。**

```
#navbar {
   z-index: 10000;
   position: fixed;
   top: 0px;
   width: 100%;
}​ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T00:27:20.117

使用样式：

```
position:fixed;
top:0px; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-18T14:59:38.763

首先，导入ActivatedRoute：

```
import { ActivatedRoute } from "@angular/router"; 
```

然后在您的构造函数中，您可以提取参数。例如：

```
constructor(private route: ActivatedRoute) { 
    this.route.queryParams.subscribe(params => {
        let myparam = params['myparam'];
        console.log(myparam); // Print the parameter to the console.  
    });
} 
```

有关信息，请参阅[https://www.mackenziesoftware.com/2020/06/how-to-get-param-from-url-in-angular.html](https://www.mackenziesoftware.com/2020/06/how-to-get-param-from-url-in-angular.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-06T20:53:49.357

你也可以使用bootstrap设计的类。

```
 <nav class="navbar-fixed-top"> 
```

# python - 打开文件并匹配 Engr 标签

> ID：13371187
> 
> 赞同：0
> 
> 时间：2012-11-14T00:19:50.480
> 
> 标签：python

1.从buildlocation获取buildid，这是“\”之后的最后一个单词，在这种情况下是“A1234ABCDE120083.1”

2.获取buildid后，打开一个文件，然后尝试匹配“Engr Label：Data_CRM_PL_177999”行以获得标签名称“Data_CRM_PL_177999”

3.最终输出应该是“Data_CRM_PL_177999”

出于某种原因，我收到以下语法错误..

```
 import re

 Buildlocation= '\\umor\locations455\INT\A1234ABCDE120083.1'

 Labelgetbuildlabel(Buildlocation)

def getbuildlabel(BuildLocation):
buildid=BuildLocation.split('\')[-1]
Notes=os.path.join(BuildLocation,Buildid + '_notes.txt')
if os.path.exists(Notes):
    try:
        open(Notes)
    except IOError as er:
        pass
    else:
        for i in Notes.splitlines:
        if i.find(Engr Label)
            label=i.split(:)[-1]

print label//output should be Data_CRM_PL_177999 
```

输出应该是： -

```
Line looks like below in the file
Engr Label: Data_CRM_PL_177999 
```

语法错误

```
 buildid=BuildLocation.split('\')[-1]
                                   ^
 SyntaxError: EOL while scanning string literal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:50:08.617

反斜杠正在转义`'`字符（请参阅[转义码文档](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)）

试试这条线：

```
 buildid=BuildLocation.split('\\')[-1] 
```

现在你有一个反斜杠转义反斜杠，所以你的字符串是一个文字反斜杠。你可以做的另一件事是告诉 Python 这个字符串没有任何转义码，方法是在它前面加上`r`这样的前缀：

```
 buildid=BuildLocation.split(r'\')[-1] 
```

你还有很多其他问题。

Python 中的注释字符是`#`，不是`//`。

我认为您还将文件名与文件对象混淆了。

`Notes`是您尝试打开的文件的名称。然后，当您调用 时`open(Notes)`，您将返回一个可以从中读取数据的文件对象。

所以你可能应该更换：

```
open(Notes) 
```

和

```
f = open(Notes) 
```

然后替换：

```
for i in Notes.splitlines: 
```

和

```
for line in f: 
```

当您对文件对象执行 for 循环时，Python 会自动一次给您一行。

现在您可以像这样检查每一行：

```
if line.find("Engr Label") != -1:
  label = line.split(':')[-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:52:22.837

在行

```
buildid=BuildLocation.split('\')[-1] 
```

反斜杠实际上是在转义下面的引号所以，Python 认为这实际上是你的字符串：

```
'[-1]) 
```

相反，您应该执行以下操作：

```
buildid=BuildLocation.split('\\')[-1] 
```

Python会将您的字符串解释为

```
\\ 
```

有趣的是，StackOverflow 的语法高亮提示了这个问题。如果您查看您的代码，它会将第一个斜杠之后的所有内容视为字符串的一部分，一直到代码示例的末尾。

您的代码中还有一些其他问题，所以我尝试为您清理一下。（但是，我没有该文件的副本，所以很明显，我无法对此进行测试）

```
import re
import os.path

build_location= r'\\umor\locations455\INT\A1234ABCDE120083.1'

label = get_build_label(build_location)

# Python prefers function and variable names to be all lowercase with
# underscore separating words.
def get_build_label(build_location):
    build_id = build_location.split('\\')[-1]
    notes_path = os.path.join(build_location, build_id + '_notes.txt')
    # notes_path is the filename (a string)
    try:
        with open(notes_path) as notes:
            # The 'with' keyword will automatically open and close
            # the file for you
            for line in notes:
                if line.find('Engr Label'):
                    label = line.split(':')[-1]
                    return label
    except IOError:
        # No need to do 'os.path.exists' since notes_path doesn't
        # exist, then the IOError exception will be raised.
        pass
print label 
```

# unit-testing - 这有可以用来测试网络表单的垃圾邮件机器人吗？

> ID：13371190
> 
> 赞同：6
> 
> 时间：2012-11-14T00:20:03.493
> 
> 标签：unit-testing, bots, spam, spam-prevention

我正在测试不同的验证码方法，我想对不同的方法进行一些模拟/单元测试。如果没有机器人，是否有可以测试表格的服务？

# javascript - 将可以执行的检查次数限制为一组基于选中单选按钮值的复选框

> ID：13371196
> 
> 赞同：0
> 
> 时间：2012-11-14T00:20:33.883
> 
> 标签：javascript, jquery, html, checkbox, radio-button

如何根据选中的单选按钮的值限制可以对一组复选框进行的检查次数。

假设我有 3 个选项单选按钮。

```
Option 1 with value of 1 
Option 2 with value of 2
Option 3 with value of 3 
```

然后我有3个复选框。

```
Checkbox 1
Checkbox 2
Checkbox 3 
```

默认情况下，复选框被禁用，没有选中任何单选按钮。如果我选中选项 1 单选按钮 - 所有复选框均已启用，我必须且仅在 3 个中选择 1 个 如果我选中选项 2 单选按钮 - 所有复选框已启用且我必须且仅在 3 个中选择 2 个 如果我选中选项3 单选按钮 - 所有复选框均已启用，我必须选择所有复选框。

我有一些东西我开始使用 JSFiddle 但我不太擅长 Javascript 并且需要一些帮助..

**更新：http:** [//jsfiddle.net/wF38X/](http://jsfiddle.net/wF38X/)

```
<div id="radioButtons">
    <input type="radio" name="quantity" id="radio1">
    <input type="radio" name="quantity" id="radio2">
    <input type="radio" name="quantity" id="radio3">
</div><!-- radioButtons -->
<hr />
<div id="checkBoxes">
    <input type="checkbox" name="color">
    <input type="checkbox" name="color">
    <input type="checkbox" name="color">
</div><!-- checkBoxes -->​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:49:19.663

这应该做你需要的。我没有使用单选值，而是使用单选的索引来确定需要禁用和取消选中哪些复选框。

```
var $radios = $('#radioButtons input:radio');
var $checks = $('#checkBoxes input:checkbox').prop('disabled', true);

$radios.change(function() {
    var idx = $radios.index(this);
    $checks.prop('disabled', function(index) {
        return index > idx;
    }).filter(':gt('+idx+')').prop('checked',false);

});

/* validate all non disabled checkboxes are checked*/
$('button').click(function() {
    var missingChecks = $checks.filter(function() {
        return !this.checked && !$(this).prop('disabled');
    }).length;

    if (missingChecks) {
        alert('Not all checkboxes selected')
    }    
}); 
```

演示：http: [//jsfiddle.net/C6SpM/18/](http://jsfiddle.net/C6SpM/18/)

# assembly - 在程序集中移动字符

> ID：13371204
> 
> 赞同：0
> 
> 时间：2012-11-14T00:21:46.460
> 
> 标签：assembly

好的，所以我需要向后打印一个字符串。如果 ebx 是指向字符串数组开头的指针，为什么我不能只向它添加一个以转到数组中的下一个字节，即字符串中的第二个字符？

```
PROMPT:
.ascii "Enter the string to evaluate \0"
FMT_STR:
.ascii "%s\0"
FMT_INT:
.ascii "%d\0"
FMT_CHR:
.ascii "%c\0"

.globl _main
_main:
    pushl %ebp                # save old frame ptr
movl  %esp,%ebp           # set new frame ptr & save local var space

//create local variable space
subl $100,%esp

pushl $PROMPT
call _printf

leal -4(%ebp),%ebx

pushl %ebx
call _gets

call _rprint

leave
ret

_rprint:

pushl %ebp
movl %esp,%ebp

pushl -1(%ebx)
pushl $FMT_CHR
call _printf

leave
ret 
```

编辑：我重新阅读了我的笔记并意识到我需要增加 8 才能转到字符串中的下一个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:40:14.317

您*可以*添加一个以转到第二个字符。但是要向后处理字符，您将：

*   找到字符串的结尾
*   处理字符
*   备份一个字符
*   如果不在缓冲区之前，则进行第二步

# javascript - 通过索引号怪癖的javascript字符串分配

> ID：13371206
> 
> 赞同：6
> 
> 时间：2012-11-14T00:21:50.880
> 
> 标签：javascript

```
a="12345"
a[2]=3
a[2]='9'
console.log(a) //=> "12345" 
```

到底是怎么回事？？这个怪癖给我带来了 1 小时痛苦的调试。如何以明智的方式避免这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T00:26:37.290

您不能使用方括号来重写字符串的单个字符；只有“getter”（即读取）访问可用。引用文档（[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Character_access)）：

> 对于使用方括号表示法的字符访问，尝试删除这些属性或为这些属性赋值将不会成功。所涉及的属性既不可写也不可配置。

那是问题的“发生了什么”部分。对于“如何替换”部分，有一个有用的片段（取自[很久很久以前写的答案](https://stackoverflow.com/a/1431113/1229023)）：

```
String.prototype.replaceAt = function(index, char) {
    return this.slice(0, index) + char + this.slice(index+char.length);
} 
```

您可以按原样使用（咬紧牙关扩展 JS 本机对象） - 或将此代码作为方法注入某个实用程序对象中（显然它应该重写一点，将源字符串作为其第一个参数并使用它而不是`this`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T00:29:58.833

根据[this question](https://stackoverflow.com/questions/4051385/javascript-access-string-chars-as-array)，并非所有浏览器都支持此功能。

如果你的字符串不是太长，你可以像这样相对容易地做到这一点：

```
var a="12345";
a = a.split("");
a[2]='9';
a = a.join("");
console.log(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T00:29:40.847

```
var letters = a.split('');
letters[2] = 3;
letters[2] = 9;
console.log(letters.join('')); 
```

[http://jsfiddle.net/XWwKz/](http://jsfiddle.net/XWwKz/)

干杯

# haskell - 寻找一种简单的方法来计时 readProcess 的执行（没有标准）

> ID：13371207
> 
> 赞同：1
> 
> 时间：2012-11-14T00:21:55.887
> 
> 标签：haskell

我正在使用`readProcess`（来自`System.Process`包）执行 ssh 命令，我想计算执行需要多长时间并将其与命令输出一起打印。

我知道可以使用标准准确计时，但标准似乎花费时间进行大量设置和拆卸以及打印额外的输出。我不想运行完整的基准测试，只是显示 ssh 命令运行多长时间。

到目前为止，我已经尝试了该`System.TimeIt`软件包，但结果不正确。例如，这应该报告至少 5 秒（刚刚运行`sleep 5`）：

```
>>> timeIt $ readProcess "sleep" ["5"] []
CPU time:   0.04s 
```

这`System.TimeIt`是幕后的工作：

```
-- |Wrap an 'IO' computation so that it prints out the execution time.
timeIt :: IO a -> IO a
timeIt ioa = do
    (t, a) <- timeItT ioa
    printf "CPU time: %6.2fs\n" t
    return a

-- |Wrap an 'IO' computation so that it returns execution time is seconds as well as the     real value.
timeItT :: IO a -> IO (Double, a)
timeItT ioa = do
    t1 <- getCPUTime
    a <- ioa
    t2 <- getCPUTime
    let t :: Double
    t = fromIntegral (t2-t1) * 1e-12
    return (t, a) 
```

看起来很简单，但我想不出一种方法来强制执行`a <- ioa`. 用注释`!`似乎没有什么区别。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T00:31:17.747

你的问题不是懒惰的评估——它`sleep`不会在计算上浪费任何 CPU 时间，它只会让程序在给定的延迟期间暂停执行。`TimeIt`正确报告您的 IO 操作花费在计算上的时间也是如此。

而不是`getCPUTime`，您想要在您想要计时的动作之前和之后获得挂钟时间。试试看。`getCurrentTime`_`Data.Time.Clock`

# actionscript-3 - 如何将影片剪辑动画中的变量提取到主类公共变量中

> ID：13371209
> 
> 赞同：1
> 
> 时间：2012-11-14T00:21:58.707
> 
> 标签：actionscript-3

我是 AS3 的新手，所以请保持友好:)

我开发了一个带有一些公共变量和私有函数的类，在动画中我制作了一个 eventLisener，它调用帧编码内的函数。我希望内部函数将一个值返回给主类中的公共变量。

这是内部动画代码：

```
import flash.events.MouseEvent;
import Box2D.Common.Math.b2Vec2;

var vector:b2Vec2 ;

pandaHold.addEventListener(MouseEvent.MOUSE_OVER,getMouse);
pandaHold.addEventListener(MouseEvent.MOUSE_OUT,getMouseOut);
function getMouse (e:MouseEvent):void{
    this.MouseX = mouseX;
    this.MouseY = mouseY;
}

function getMouseOut (e:MouseEvent):void{
    this.MouseXk = mouseX ;
    this.MouseYk = mouseY ;
    this.applyVector(makeVector());
}

function makeVector () : b2Vec2 {

    return( new b2Vec2 (this.MouseXk - this.MouseX,this.MouseY - this.MouseYk));

} 
```

这是主类中的函数

```
/*** apply Vector from movieClip ***/
 private function applyVector (newVector:b2Vec2):void {
       gravity = newVector;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:27:17.857

您可以按如下方式引用您的主文档类。将“MyDocumentClass”替换为您的文档类的名称（省略 .as）。

以下是如何从 MovieClip 内部将您的 MovieClip 对象“vector”作为参数发送到您的文档类函数“applyVector”。

```
MyDocumentClass.applyVector(vector); 
```

# html - 如果正文为 95%，如何将页脚设置为 100%？

> ID：13371210
> 
> 赞同：0
> 
> 时间：2012-11-14T00:22:00.080
> 
> 标签：html, css

我的任务是稍微改变一个网站，现在，该网站有一个响应式布局，占视口宽度的 95%，身体方面，所以如果调整大小，它会调整。

这很好，我希望它继续这样做，但我希望页脚有一个并排平静的蓝色背景，并且由于某种原因我无法想出一种方法来做到这一点。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:30:39.293

试试这个 -[**演示**](http://jsfiddle.net/ZXspx/)

***HTML***

```
<div id="container">
    <h1>TITLE</h1>

    <section>MAIN CONTENT</section>

    <footer> FOOTER </footer>
</div>​ 
```

***CSS***

```
#container {
    width: 95%;
    margin: auto;
    background: honeydew;
}

footer {
    position: absolute;
    width: 100%;
    background: beige;
    margin-left: -2.5%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:28:10.683

`body`包含所有其他元素。因此，你不应该有一个比`body`里面大的。

尽管您可以将其绝对定位到`position: absolute; bottom: 0px; left: 0px;`宽度为的`100%`左下角(并将页脚放在该容器之外。`div``body`

但是，我不确定哪种方法更可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:30:09.993

您是否尝试过用其他“包装器”组件（div、span 等）包装现有的“标题”组件？例子：

```
<div id="wrapper" width="100%"

<div id="header" width="95%">
  some header stuff here
</div>

<!-- foo bar --> 

<div id="footer" width="100%">
  my footer
</div>

</div> 
```

# iphone - 应用程序会在更新后从头开始运行吗？

> ID：13371214
> 
> 赞同：0
> 
> 时间：2012-11-14T00:22:32.870
> 
> 标签：iphone, multitasking, updates

假设我在 iphone 上玩游戏，然后按主页按钮（多任务）并从应用商店更新我的游戏。更新后，我按游戏图标重新开始，这个游戏是从一开始就开始（就像一个新安装的应用程序）还是从我玩的地方开始？

如果从头开始，一切都会好起来的，但是如果它继续从我玩的地方玩，那就会造成麻烦（仍然使用旧游戏设置：旧AI，旧分数等）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:27:29.223

您的应用程序将完全退出，新应用程序将被安装，您将重新启动更新后的应用程序。

但！在更新应用程序的代码和资产时，会保留所有存储的数据。`NSUserDefaults`应用程序文档中的任何内容或文件，或（显然）远程服务器上的任何数据，都不会被重置。

无论如何，应用程序必须可以正常关闭。无论是否更新应用程序，应用程序都需要能够从头开始，并且能够按照您的意愿自行设置备份。

因此，将首选项或其他用户生成的数据保存在不会被擦除的位置，更新后的应用程序将读取所有内容，您可以使用它来设置应用程序的初始状态。

# python - 如何在python中制作带有列表的列表的格式化打印

> ID：13371215
> 
> 赞同：0
> 
> 时间：2012-11-14T00:22:52.707
> 
> 标签：python, list, printing

我在 python 中有一个类，其中包含 2 个“主”字符串和一个 N 大小的字符串列表

我怎样才能“很好地”格式化它的打印，以便我可以打印疼痛列表，它看起来很正常。

预期的结果是这样的：

```
entry 1 : string1 string 2 <br>
liststring1 liststring2 .... liststring n

entry 2 : string1 string 2 <br>
liststring1 liststring2 .... liststring n

.<br>
.<br>
.<br>
entry n : string1 string 2 <br>
liststring1 liststring2 .... liststring n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:51:52.437

假设您的 python 类`Entry`具有以下成员变量：

```
Entry.string1  
Entry.string2  
Entry.list_of_strings 
```

然后打印一个`list_of_entries`：

```
>>> for entry in list_of_entries:
...     print entry, " : ", entry.string1, entry.string2
...     for s in entry:
...         print s,
...     print "" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:30:05.323

```
>>> l
[[1, 2, 3], [1, 2, 3]]
>>> for entry in l:
...    print entry, ":", 
...    for x in entry:
...        print x,
...    print 
```

`print`注意语句中的尾随逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:37:51.903

尝试使用[pprint](http://docs.python.org/2/library/pprint.html)模块轻松打印 2D 列表等。

```
import pprint
x=[[1,2,3,4,5,6,7,8,9,10,11],['jkdfjkdfjkfdjkfdkjfdkdfjfkdjdkfjkdjkfd']]
pprint.pprint(x) 
```

# mysql - 优化类似的 MySQL 子查询

> ID：13371220
> 
> 赞同：1
> 
> 时间：2012-11-14T00:23:13.670
> 
> 标签：mysql, query-optimization

这是我在较大 SQL 脚本中的子查询。它在多个不同的 CASE 语句中执行相同的操作，所以我希望我可以以某种方式组合该操作，这样它就不必一遍又一遍地做同样的事情。但是，如果我将 ORDER BY 命令移到 CASE 语句之外，我将无法获得正确的结果。

我在 JDAY 加入了 2 个表，met_data 和 flexgridlayers_table。Flexgridlayers_table 具有 JDAY 和 Segment 的字段，met_data 具有 JDAY、TAIR 和 TDEW 字段（在这个简单的示例中，但实际上有更多字段）。我通过 Matlab 运行它，所以*variable1*和*variable2*是由嵌套循环设置的值。我需要使用 CASE 语句来说明*variable1*不等于 1 的情况，然后我想输出 0。否则，我想找到与 JDAY 连接对应的值，但这些值可能与 F 中的值不完全匹配。 JDAY 和 M.JDAY。我想匹配最接近的 <= 值，所以我在每个子查询中使用 ORDER BY M.JDAY DESC LIMIT 1 语句。

输出是一个包含字段 JDAY（来自 F.JDAY）、TAIR 和 TDEW 的表。每当我尝试将 ORDER BY 部分移到 CASE 语句之外以摆脱重复的子查询时，我只会得到代表最大 JDAY 的单行结果。这个查询给了我正确的结果 - 有没有办法优化它？

```
SELECT F.JDAY, 
    CASE
        WHEN *variable1*<>1 THEN 0 
        ELSE 
            (SELECT M.TAIR 
            FROM met_data AS M
            WHERE M.Year=2000 AND M.JDAY<=F.JDAY
            ORDER BY M.JDAY DESC LIMIT 1)
    END AS TAIR,
    CASE
        WHEN *variable1*<>1 THEN 0 
        ELSE                
            (SELECT M.TDEW 
            FROM met_data AS M
            WHERE M.Year=2000 AND M.JDAY<=F.JDAY
            ORDER BY M.JDAY DESC LIMIT 1)
    END AS TDEW
FROM FlexGridLayers_table AS F
WHERE F.SEGMENT=*variable2* 
```

* * *

进一步说明：

此查询从 flexgridlayers_table 中提取所有 JDAY 值，然后在表 met_data 中搜索以查找与该表中最接近的 <= JDAY 值对应的值。例如，考虑以下 flexgridlayers_table 和 met_data 表：

```
flexgridlayers_table:
Segment  JDAY
2        1.5
2        2.5
2        3.5
3        1.5
3        2.5
3        3.5

met_data:
JDAY  Year  TAIR  TDEW
1.0   2000  7     8
1.1   2000  9     10
1.6   2000  11    12
2.5   2000  13    14
2.6   2000  15    16
3.4   2000  17    18
4.0   2000  19    20 
```

对于*variable1* =1和*variable2* =2，我想要的（以及上面的查询返回的）是这样的：

```
JDAY  TAIR  TDEW
1.5   9     10
2.5   13    14
3.5   17    18 
```

我只是想知道是否有更有效的方法来编写此查询，因此我不会对每个 TAIR、TDEW 等字段的同一 JDAY 值列表一遍又一遍地执行 ORDER BY 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:57:58.223

然后我会写如下......看起来你正在寻找每个 JDAY 的“TAIR”和“TDEW”。如果是这种情况，请在年份条件和 F 与 M JDay 值上将 LEFT JOIN 应用于您的met_data 表。现在通常，这将在每个“JDay”返回多行

```
SELECT 
      PQ.JDay,
      PQ.MaxJDayPerFDay,
      CASE WHEN *var1* <> 1 THEN 0 ELSE M2.TAIR END TAIR,
      CASE WEHN *var1* <> 1 THEN 0 ELSE M2.TDEW END TDEW
   from 
      ( SELECT 
              F.JDay,
              MAX( M.JDAY ) as MaxJDayPerFDay
           from 
              FlexGridLayers_Table F
                 JOIN met_Data M
                    ON M.Year = 2000
                    AND F.JDay >= M.JDay
           where
              F.Segment = *var2* 
           group by
              F.JDay ) PQ 
         JOIN Met_Data M2 
            on M2.Year = 2000 
            AND PQ.MaxJDayPerFDay = M2.JDay 
```

现在，它通过在met_data ONCE 中应用MAX() JDay 并按JDay 分组来进行预查询，因此它总是每个F.JDay 返回一条记录。因此，现在您有一个预限定为您的 F.Segment = 变量 2 的查询。如果您想要从“F”表中获得其他列，请根据需要将它们放入此“PreQuery”（PQ 别名）。

然后，可以立即将此结果连接回met_data 表，因为现在可以从预查询中明确知道一天的值。因此，您现在可以一次获取 TAIR 和 TDEW 值，而不是针对每条记录应用两个单独的查询。

希望这是有道理的，如果没有，请告诉我。

# c++ - 不显示控制台的跨平台进入功能

> ID：13371222
> 
> 赞同：2
> 
> 时间：2012-11-14T00:23:33.713
> 
> 标签：c++, cross-platform, entry-point, fltk

我正在使用跨平台 GUI 库 (FLTK) 来制作一些 GUI，我没有使用 Win32 API。我希望这个程序可以在 Windows、Linux 和 Mac OS 上运行。

我真的不明白跨平台的 mumbo jumbo 是*如何*工作的（看看我的帐户名），但我认为理解跨平台意味着*什么。*但这不是我的问题。

我的问题是我现在的入口函数只是int main()，但是当我使用这个入口函数时，控制台就弹出来了。我不想要任何控制台，所以我知道我可以像这样使我的输入功能：

```
int wWinMain(HINSTANCE hInst, HINSTANCE hPreInst, LPWSTR nCmdLine, int nCmdShow) 
```

并且不会有控制台。

我担心的是，因为我必须使用 Win32 API 才能拥有这个 wWinMain 入口函数（因为 HINSTANCE 和 LPWSTR），所以该程序将不再与其他操作系统兼容。

所以我的问题是，如果我使用 wWinMain 函数，我的程序能否在 Mac 和 Linux 操作系统上运行？如果没有，是否有一个我*可以*使用的功能不创建控制台并且可以在所有操作系统上运行？

最后，也许我完全幻想能够在任何操作系统上运行相同的 .exe 程序，这实际上是不可能的。是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:46:49.110

*NIX 系统默认不应该产生终端窗口，所以你可能只需要在 Windows 上做一些特殊的事情。

如果您可以包装 WinMain 函数，即`#define`在其周围放置防护并调用另一个充当其`main`内部“真实”的函数，然后从`main`其他平台调用该函数，则应该没有大问题。

**但是**，我强烈建议`wchar_t`尽可能避免使用宽字符（通过[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/dd319072%28VS.85%29.aspx)）仅用于进行 API 调用。

基本上，非 Windows 平台需要你使用标准`main`功能，Windows 需要你使用`WinMain`. 让他们都调用第三个函数来处理你的主函数应该和返回的内容。

此外，任何 Windows PE 二进制文件（.exe 文件）都只能在 Windows 上运行。无论您做什么，都必须为每个平台分别编译程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:47:27.357

看看链接器选项。链接器控制您的程序将是哪种可执行文件。
具有多种`main`功能也是一种选择。`#ifdef`可以控制每个平台使用哪一个。

> 也许我完全幻想能够在任何操作系统上运行相同的 .exe 程序

这是不可能的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-12T18:08:16.800

这是一个老问题，但我刚刚发现它并且我认为它很有用，我遵循了 user308323 的建议并提出了这个问题，一旦我将 WIN32 定义为 Visual Studio 项目中的预处理器定义，它就很好用。

```
#ifdef WIN32
int wWinMain(HINSTANCE hInst, HINSTANCE hPreInst, LPWSTR nCmdLine, int nCmdShow)
#endif
#ifndef WIN32
int main(int argc, char **argv)
#endif

{
    Model model;
    UIController controller(model);

    controller.run(NULL, NULL);
} 
```

请注意，我只更改了函数签名，并且将 null 作为 argc 和 argv 参数发送，无论如何我们都不需要这些，因为这不是命令行程序

关于能够为每个平台拥有相同的 .exe，这是不可能的，但只要您能够在不同平台上编译相同的程序，这不是问题。这就是 FLTK 库的用途。

# javascript - 根据 id 值显示表格的某些行并切换所有值

> ID：13371229
> 
> 赞同：0
> 
> 时间：2012-11-14T00:25:02.957
> 
> 标签：javascript, jquery

我有一个表，它的行分组为五行，匹配的 id 是：一、二、三、四等。

我只需要显示id为一行的行，一个带有下一个按钮，然后是两个带有下一个按钮的行，依此类推，直到我到达表格的末尾，然后显示包含的表单的提交按钮表内。

我是一个完整的 javascript 新手，这就是为什么当我尝试使用 jquery 切换功能时，我无处可去！如果有人至少可以指出一个教程的方向，该教程在表格中的多行上具有切换功能，我将非常感激。

干杯!

编辑：经过一些困惑和再次阅读这个问题后，我意识到我并不清楚我只是想要一些关于在 jquery 中使用的正确函数的指针。如果我在正确的球场。我不是在寻找完全为我编写的代码。对不起，如果我遇到这样的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:49:50.370

如果您需要帮助专门学习 jquery 切换，您真的应该只查找[Jquery 文档](http://docs.jquery.com/Effects/toggle)

正如您可能在上面的评论中注意到的那样，StackOverflow 并不是一个您可以将代码交给您的网站——您必须自己编写代码，我们可以为您提供建议/提示，以解决挑剔的修复、语法、令人困惑的概念或不同的问题解决问题的方法。

这是我第一次[在 Codeschool 学习 Jquery 时](http://www.codeschool.com/courses/jquery-air-first-flight)使用的一个非常好的教程，所以请看一下。它真的很互动，你真的学得很快。我也相信它会教你一些 Javascript 的基础知识。

[W3schools](http://w3schools.com/js/default.asp)也非常适合学习 JS 或一般的 web 开发，所以你可能想在那里闲逛。

当您发布更多代码时，我可以编辑我的答案以更好地帮助您解决问题。您想要一些处理表格的好教程，虽然我可能会找到专门处理表格的 JS 教程，但这不是您应该学习的方式。我将尝试找到适合您需求的教程，但您应该从头开始学习并逐步完成。我就是这样做的，我们中的许多人都这样做了。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:50:20.797

你可以使用一些相当通用的东西来切换 tbody 元素。根据需要调整以下内容，它不需要任何 ID。

我已将行分组以在 tbody 元素中显示和隐藏，以便于处理它们。

```
<script>

var toggleRows = (function() {
    var hidden = -1;

    return function(el) {
      var tbodies;

      // Get the table from the passed element
      // The element must be in the table, or be the table
      while (el.tagName.toLowerCase() != 'table') {
        el = el.parentNode;
      }

      // Get just tbody elements, exclude thead and tfoot
      tbodies = el.tBodies;

      // Hide them all
      for (var i=0, iLen=tbodies.length; i<iLen; i++) {
        tbodies[i].style.display = 'none';
      }

      // Show the next tbody, or first if were showing the last one
      tbodies[++hidden % iLen].style.display = '';
    }

}());

window.onload = function() {
  toggleRows(document.getElementById('section1'));
}
</script>

<table>
  <thead>
    <tr>
      <th colspan="3"><span onclick="toggleRows(this);">Show next</span></th>
    </tr>
  </thead>
  <tbody id="section1">
    <tr>
      <td>foo 1<td>bar 1<td>fum 1
  <tbody id="section2">
    <tr>
      <td>foo 2<td>bar 2<td>fum 2
  <tbody id="section3">
    <tr>
      <td>foo 3<td>bar 3<td>fum 3
</table> 
```

# java - 如何在android中从ExpandableListView获取onChildClick、groupPosition和childPosition？

> ID：13371230
> 
> 赞同：1
> 
> 时间：2012-11-14T00:25:09.040
> 
> 标签：java, android, expandablelistview

我真的不确定如何从 ExpandableListView 获取 groupPosition 和 childPosition。我尝试使用开关和外壳，但这不起作用，它似乎无法识别 groupPosition。那么如何获取 groupPosition 和 childPosition 呢？

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    // Set up our adapter
    mAdapter = new MyExpandableListAdapter();
    setListAdapter(mAdapter);
    registerForContextMenu(getExpandableListView());

    getExpandableListView().setOnChildClickListener(new OnChildClickListener()
    {
        public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id)
        {
            switch(groupPosition & childPosition)
            {
            case 2 & 2:
                Intent asariIntent = new Intent(Codex.this, CodexAsari.class);
                Codex.this.startActivity(asariIntent);
                break;

            case 1 & 0:
                Intent protheanIntent = new Intent(Codex.this, CodexProthean.class);
                Codex.this.startActivity(protheanIntent);
                break;

            case 1 & 1:
                Intent rachniIntent = new Intent(Codex.this, CodexRachni.class);
                Codex.this.startActivity(rachniIntent);
                break;
            }
            return false;
        }
    });
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    menu.setHeaderTitle("Sample menu");
    menu.add(0, 0, 0, "Sample action");
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();

    String title = ((TextView) info.targetView).getText().toString();

    int type = ExpandableListView.getPackedPositionType(info.packedPosition);
    if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        int childPos = ExpandableListView.getPackedPositionChild(info.packedPosition); 
        Toast.makeText(this, title + ": Child " + childPos + " clicked in group " + groupPos,
                Toast.LENGTH_SHORT).show();
        return true;
    } else if (type == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        Toast.makeText(this, title + ": Group " + groupPos + " clicked", Toast.LENGTH_SHORT).show();
        return true;
    }

    return false;
}

public class MyExpandableListAdapter extends BaseExpandableListAdapter
{
    public String[] groups = { "Aliens: Council Races", "Aliens: Extinct Races", "Aliens: Non-Council Races", "Aliens: Non-Sapient Creatures", "Citadel and Galactic Government", "Humanity and the Systems Alliance", "Known Associates" };
    private String[][] children = {
            { "Asari", "Salarians", "Turians" },
            { "Protheans", "Rachni" },
            { "Batarians", "Collectors", "Drell", "Elcor", "Geth", "Hanar", "Keepers", "Krogan", "Praetorians", "Quarians",
                "Reapers", "Reapers: Indoctrination", "Sovereign", "Volus", "Vorcha" },
            { "Husks", "Thresher Maws", "Varren" },
            { "Citadel", "Citadel Council", "Citadel Space", "Spectres" },
            { "Councilor Donnel Udina: Anderson Chosen Councilor", "Councilor Donnel Udina:  Undina Chosen Councilor", "Earth: Mass Effect", "Earth: Mass Effect 3", "First Contact War", "Systems Alliance", "Rise of the Alliance: Renegade", "Rise of the Alliance: Paragon" },
            { "Steven Hackett", "David Anderson", "Udina Chosen Councilor", "Dr. Liara T'Soni", "EDI", "Garrus Vakarian", "Kaidan Alenko", "Ashley Williams", "Tali'Zorah", "Dr. Mordin Solus", "Jacob Taylor", "Jeff 'Joker' Moreau", "Miranda Lawson", "Dr. Karin Chakwas" }
    };

    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        return children[groupPosition].length;
    }

    public TextView getGenericView() {
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT, 64);

        TextView textView = new TextView(Codex.this);
        textView.setLayoutParams(lp);
        textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
        textView.setPadding(36, 0, 0, 0);
        return textView;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
            View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getChild(groupPosition, childPosition).toString());
        return textView;
    }

    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    public int getGroupCount() {
        return groups.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
            ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getGroup(groupPosition).toString());
        return textView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }

}

public int childPosition()
{
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:55:23.523

我得说，我从未见过这样的案例陈述。也许您可以尝试以下方法，看看是否得到任何不同的结果：

```
getExpandableListView().setOnChildClickListener(new OnChildClickListener() {
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        switch(groupPosition) {
        case 1: 
            switch (childPosition) {
            case 0: 
                Intent protheanIntent = new Intent(Codex.this, CodexProthean.class);
                Codex.this.startActivity(protheanIntent);
                break;              
            case 1:
                Intent rachniIntent = new Intent(Codex.this, CodexRachni.class);
                Codex.this.startActivity(rachniIntent);
                break;
            }
        case 2:
            switch (childPosition) {
            case 2: 
                Intent asariIntent = new Intent(Codex.this, CodexAsari.class);
                Codex.this.startActivity(asariIntent);
                break;
            }
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:55:42.580

尝试`getChildView()`在您的`MyExpandableListAdapter`班级中覆盖。`getChildView`每当一个孩子被触摸时（或者当它的复选框被选中或未选中时——我不记得是哪个，或者是否有区别），就会被调用。在该方法中，您可以访问 groupPosition 和 childPosition。有关更多信息，请参阅[在 ExpandableListActivity 中处理子项。](https://stackoverflow.com/questions/4741671/working-with-children-in-expandablelistactivity)

# windows - 循环的批处理脚本不起作用

> ID：13371234
> 
> 赞同：1
> 
> 时间：2012-11-14T00:25:25.490
> 
> 标签：windows, command-line, batch-file

我需要让多个远程管理员在现场测试他们的下载速度。Speedtest.net 等并不是我们 WAN 中性能的真正指标。我不想使用 iperf，因为我需要尽量减少远程管理员的技术知识和工作量。我也不希望他们安装任何东西。因此我需要一个简单的批处理文件来下载一个测试文件 5 次。这是我到目前为止所拥有的：

```
@echo off
rem localize variables to this script
setlocal
rem delete the test file if it already exists
if exist %HomePath%\Downloads\100meg.test del %HomePath%\Downloads\100meg.test
rem perform the test 5 times
for /l %%i IN (1,1,5) DO (
    rem mark the start time
    set STARTTIME=%TIME%
    echo Download started at:%STARTTIME%
    rem start download
    C:\windows\explorer.exe http://mirror.internode.on.net/pub/test/100meg.test
    rem check for file download completion
    :while
        if exist %HomePath%\Downloads\100meg.test goto wend
        goto while
    :wend
    rem mark the end time
    set ENDTIME=%TIME%
    echo Download completed at:%ENDTIME%
    rem convert STARTTIME and ENDTIME to centiseconds
    set /A STARTTIME=(1%STARTTIME:~0,2%-100)*360000 + (1%STARTTIME:~3,2%-100)*6000 + (1%STARTTIME:~6,2%-100)*100 + (1%STARTTIME:~9,2%-100)
    set /A ENDTIME=(1%ENDTIME:~0,2%-100)*360000 + (1%ENDTIME:~3,2%-100)*6000 + (1%ENDTIME:~6,2%-100)*100 + (1%ENDTIME:~9,2%-100)
    rem calculate the time taken in seconds
    set /A DURATION=(%ENDTIME%-%STARTTIME%)/100
    echo Download took:%DURATION% seconds
    rem delete the test file ready for next iteration
    del %HomePath%\Downloads\100meg.test
) 
```

问题是，由于添加了 for 并将块括在其括号中，它就停止了工作。任何人都可以解释为什么这会失败吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:34:07.513

在 FOR 循环中使用 GOTO 总是会中断循环 - 一旦使用 GOTO，剩余的迭代将不会发生。

这是因为 CMD.EXE 的工作方式。括号内的整个命令块被一次性解析并加载到内存中。每次迭代都会执行存储在内存中的已解析命令。这些解析的命令不包含任何标签。GOTO 必须扫描文件，这需要中断循环。

STARTTIME 的“消失”值也与一次解析整个块的事实有关。`%STARTTIME%`在解析时扩展，但在执行任何块之前解析命令。因此，您将获得执行 FOR 命令之前存在的值，这可能是未定义的。有一个称为延迟扩展的功能，可用于在执行时而不是解析时获取变量的值。在命令提示符下键入`HELP SET`并阅读从文档大约一半开始的关于延迟扩展的部分。

但是有一种简单的方法可以让您的代码工作 - 只需将 DO 块的内容移动到子例程，然后在循环中调用例程。（我假设您在 DO 子句中的逻辑是正确的）。CALL 不会中断循环:-)

您必须记住在您的例程标签之前放置一个 EXIT /B，以便您的主代码不会落入子例程。

```
@echo off
rem localize variables to this script
setlocal
rem delete the test file if it already exists
if exist %HomePath%\Downloads\100meg.test del %HomePath%\Downloads\100meg.test
rem perform the test 5 times
for /l %%i IN (1,1,5) do call :downloadTest
exit /b

:downloadTest
rem mark the start time
set STARTTIME=%TIME%
echo Download started at:%STARTTIME%
rem start download
C:\windows\explorer.exe http://mirror.internode.on.net/pub/test/100meg.test
rem check for file download completion
:while
  if exist %HomePath%\Downloads\100meg.test goto wend
  goto while
:wend
rem mark the end time
set ENDTIME=%TIME%
echo Download completed at:%ENDTIME%
rem convert STARTTIME and ENDTIME to centiseconds
set /A STARTTIME=(1%STARTTIME:~0,2%-100)*360000 + (1%STARTTIME:~3,2%-100)*6000 + (1%STARTTIME:~6,2%-100)*100 + (1%STARTTIME:~9,2%-100)
set /A ENDTIME=(1%ENDTIME:~0,2%-100)*360000 + (1%ENDTIME:~3,2%-100)*6000 + (1%ENDTIME:~6,2%-100)*100 + (1%ENDTIME:~9,2%-100)
rem calculate the time taken in seconds
set /A DURATION=(%ENDTIME%-%STARTTIME%)/100
echo Download took:%DURATION% seconds
rem delete the test file ready for next iteration
del %HomePath%\Downloads\100meg.test
exit /b 
```

# java - ProcessBuilder 及其子进程的标准输入/标准输出

> ID：13371241
> 
> 赞同：0
> 
> 时间：2012-11-14T00:26:14.957
> 
> 标签：java, bash

我目前创建一个 ProcessBuilder 传递命令“bash -c [bashCommandString]”。bashCommandString 依次运行“bash -c [anotherCommandString]”。

我的代码调用 Process.getInputStream 和 getOutputStream 来获取通过 ProcessBuilder 启动的进程的标准输出和标准输入。

在这种情况下，

1) 在 [anotherCommandString] 中运行的脚本的标准输入和标准输出是否可以通过 Process.getInputStream 和 getOutputStream 检索？

2) stdin 和 stdout 的 IO 性能会受到这种脚本执行嵌套的影响吗？

提前致谢。

# c# - 如何联合来自不同表的linq输出并返回

> ID：13371242
> 
> 赞同：1
> 
> 时间：2012-11-14T00:26:15.817
> 
> 标签：c#, asp.net-mvc, linq

如何在两个 linq 结果之间执行联合并将结果返回到视图？

```
public ActionResult ShowAllStudents()
    {
        var StudentA = (from p in stud.Student_A.Where(a => a.StudentId != 0)
                                        group p by p.Index into g
                                        select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index).ToList();
        var StudentB = (from p in stud.Student_B.Where(a => a.StudentId != 0)
                                        group p by p.Index into g
                                        select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index).ToList();

        ViewData.Model = StudentA.Union(StudentB);

        return View();
    } 
```

如果我尝试上面显示的方式，我会收到以下错误：

```
'System.collections.Generic.List<Student.Models.Student_A> does not contain a definition for 'Union' and the best extension method overload 'System.Linq.Queryable.Union<TSource>(System.Linq.IQueryable<TSource>, System.Collections.Generic.IEnumerable<TSource>)' has some invalid arguments 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:34:52.887

Avoid the queries materialization. Remove the .ToList() calls.

**Update:**

```
 class Program
    {
        static void Main(string[] args)
        {
            var Student_A = new[]{
                new {StudentId = 1, Index = 23, Name = "Lucas"},
                new {StudentId = 2, Index = 71, Name = "Juan"},
                new {StudentId = 3, Index = 85, Name = "Noelia"}
            };
            var Student_B = new[]{
                new {StudentId = 6, Index = 31, Name = "Marcelo"},
                new {StudentId = 7, Index = 72, Name = "Manuel"},
                new {StudentId = 8, Index = 95, Name = "Roberto"}
            };

            var StudentA = (from p in Student_A.Where(a => a.StudentId != 0)
                            group p by p.Index into g
                            select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index);
            var StudentB = (from p in Student_B.Where(a => a.StudentId != 0)
                            group p by p.Index into g
                            select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index);

            var all = StudentA.Union(StudentB);

            all.ToList().ForEach(x=> Console.WriteLine(x.Name));
        }
    } 
```

Which is the diference with this snippet?

**Update 2:** Ok, I got it. The problem is Student_A´s elements and Student_B's elements are different types. I could reproduce the error you have as follow

```
class Program
{
    static void Main(string[] args)
    {
        var Student_A = new[]{
            new {StudentId = 1, Index = 23, Name = "Lucas"},
            new {StudentId = 2, Index = 71, Name = "Juan"},
            new {StudentId = 3, Index = 85, Name = "Noelia"}
        };
        var Student_B = new[]{
            new {StudentId = 6, Index = 31, Name = "Marcelo", I=0},  // extra property
            new {StudentId = 7, Index = 72, Name = "Manuel", I=0},
            new {StudentId = 8, Index = 95, Name = "Roberto", I=0}
        };

        var StudentA = (from p in Student_A.Where(a => a.StudentId != 0)
                        group p by p.Index into g
                        select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index);
        var StudentB = (from p in Student_B.Where(a => a.StudentId != 0)
                        group p by p.Index into g
                        select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index)

        var all = StudentA.Union(StudentB);

        all.ToList().ForEach(x=> Console.WriteLine(x.Name));
    } 
```

However, if we make both with the same type it works. Take a look at the follow example:

```
class Program
{
    static void Main(string[] args)
    {
        var Student_A = new[]{
            new {StudentId = 1, Index = 23, Name = "Lucas"},
            new {StudentId = 2, Index = 71, Name = "Juan"},
            new {StudentId = 3, Index = 85, Name = "Noelia"}
        };
        var Student_B = new[]{
            new {StudentId = 6, Index = 31, Name = "Marcelo", I=0},
            new {StudentId = 7, Index = 72, Name = "Manuel", I=0},
            new {StudentId = 8, Index = 95, Name = "Roberto", I=0}
        };

        var StudentA = (from p in Student_A.Where(a => a.StudentId != 0)
                        group p by p.Index into g
                        select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index)
                        .Select(x=> new {StudentId = x.StudentId, Index = x.Index, Name = x.Name });
        var StudentB = (from p in Student_B.Where(a => a.StudentId != 0)
                        group p by p.Index into g
                        select g.FirstOrDefault()).Distinct().OrderBy(a => a.Index)
                        .Select(x=> new {StudentId = x.StudentId, Index = x.Index, Name = x.Name });

        var all = StudentA.Union(StudentB);

        all.ToList().ForEach(x=> Console.WriteLine(x.Name));
    } 
```

The difference is in the line:

.Select(x=> new {StudentId = x.StudentId, Index = x.Index, Name = x.Name });

# python - Django/Python 代码：可读 vs 快速代码

> ID：13371246
> 
> 赞同：2
> 
> 时间：2012-11-14T00:26:48.560
> 
> 标签：python, django

假设我想获得与值匹配的记录，并且我有两种方法可以做到：

第一的：

```
try:
  obj = Model.objects.get(field = value)
except
  pass 
```

第二：

```
if Model.objects.filter(field = value).count() > 0:
  obj = Model.objects.filter(field_value)[0] 
```

让我们把代码注释放在一边，我应该使用哪种方式或者您更喜欢哪种方式阅读？第一种似乎更快，因为只查找 1 个 DB，但第二种方式似乎更具可读性，但需要 2 个 DB 查找。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T00:30:51.200

第一个是 Python 中的首选，基于**EAFP**设计原则（“请求宽恕比许可更容易”）。除了速度，这个系统的一个优点是没有竞争条件——在第二个例子中，如果其他对数据库的并发访问在执行第一行和第二行代码之间改变了结果，那么你的结果将不一致。

根据您对事务的使用，竞争条件的可能性可能不是问题，但一般来说，**EAFP**是 Python 中一种突出的设计模式，经验丰富的 Python 编码人员在阅读这种形式的代码时不会遇到任何问题。

ETA：哦，我忘了：不要使用`except:`（你需要冒号）。使用`except IndexError:`或您正在寻找的任何其他特定例外。这样，如果您遇到完全意外的错误，例如无法访问数据库，它将传播而不会被隐藏。您不希望出现这样一种情况，即您稍后编写代码计数被抛出的异常意味着“没有结果”，而是系统试图告诉您“数据库已关闭”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:43:12.513

怎么样

```
matches = Model.objects.filter(field=value)[:1]
obj = matches[0] if matches else None 
```

查询只会被评估一次（在条件表达式`matches`的`if`部分评估时），这用于空性检查和检索结果。请注意切片以限制返回对象的数量。

# html - 在悬停其他元素上更改身体背景图像

> ID：13371250
> 
> 赞同：1
> 
> 时间：2012-11-14T00:27:23.127
> 
> 标签：html, css, responsive-design

> **可能重复：**
> [使用 CSS 更改悬停时兄弟元素的颜色](https://stackoverflow.com/questions/12574668/change-color-of-sibling-elements-on-hover-using-css)

基本上我想在#fb或我创建的任何其他div id悬停时更改我的身体背景图像，我在任何地方都找不到解决方案

```
<body>
<div class="container">
    <div class="sixteen columns">
        <h1 class="remove-bottom" style="margin-top: 40px">Club 77</h1>
        <hr />
    </div>
    <div class="sixteen columns">
        <h3><a href="" id="fb">Facebook</a></h3>
    </div>
    <div class="sixteen columns">
        <h3><a href="">Photos</a></h3>
    </div>
    <div class="sixteen columns">
        <h3><a href="">Contact</a></h3>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:34:02.023

我相信最好的方法是通过 jQuery：

**第一的。**预加载背景图片：

```
$('<img/>').hide().attr('src', 'images/background.jpg').load(function(){
    $('body').append($(this));
}); 
```

**第二。**图像鼠标悬停：

```
$('#fb').hover(function() {
    $('body').css('background-image', 'url("images/background.jpg")');
}, function() {
    $('body').css('background', '');
}); 
```

这是 JSFiddle 演示：http: [//jsfiddle.net/kGgyY/1/](http://jsfiddle.net/kGgyY/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:32:49.573

相信您需要退回到依赖于 javascript 事件侦听器。一种会监听 div 的 onmouseover/onmouseout并根据需要更改标签`#fb`的类名的方法。`<body>`从未见过任何其他方式根据子`:hover`状态更改元素样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:20:29.490

为了做到这一点，body元素（它必须是一个div）必须嵌套在#fb中。在悬停时调用嵌套的 div。将嵌套 div 设置为绝对位置和高度/宽度 100%。如果您需要大于 100% 则不能使用 AP，因为它会创建滚动条。在这种情况下，您可以使用高度/宽度 999em 固定的位置。这可能会奏效。您将需要解决一些 z-index 问题。

# mysql - Magento - 如何按最大值选择 mysql 行？

> ID：13371257
> 
> 赞同：0
> 
> 时间：2012-11-14T00:28:01.137
> 
> 标签：mysql, sql, magento

```
mysql> SELECT * FROM `log_customer` WHERE `customer_id` = 224 LIMIT 0, 30;
+--------+------------+-------------+---------------------+-----------+----------+
| log_id | visitor_id | customer_id | login_at            | logout_at | store_id |
+--------+------------+-------------+---------------------+-----------+----------+
|    817 |      50139 |         224 | 2011-03-21 23:56:56 | NULL      |        1 |
|    830 |      52317 |         224 | 2011-03-27 23:43:54 | NULL      |        1 |
|   1371 |     136549 |         224 | 2011-11-16 04:33:51 | NULL      |        1 |
|   1495 |     164024 |         224 | 2012-02-08 01:05:48 | NULL      |        1 |
|   2130 |     281854 |         224 | 2012-11-13 23:44:13 | NULL      |        1 |
+--------+------------+-------------+---------------------+-----------+----------+
5 rows in set (0.00 sec)

mysql> SELECT *  FROM `customer_entity` WHERE `entity_id` = 224;
+-----------+----------------+---------------------------+----------+---------------------+---------------------+
| entity_id | entity_type_id |  email                    | group_id | created_at          | updated_at          |
+-----------+----------------+---------------------------+----------+---------------------+---------------------+
|       224 |              1 |  damodar@stackoverflow.com.au |        3 | 2011-03-21 04:59:17 | 2012-11-13 23:46:23 |
+-----------+----------------+---------------------------+----------+--------------+----------+-----------------+
1 row in set (0.00 sec) 
```

如何搜索过去 10 个月未登录且其帐户在过去 10 个月未更新的客户。我在下面尝试但失败了。

```
$collection = Mage::getModel('customer/customer')->getCollection();
$collection->getSelect()->joinRight(array('l'=>'log_customer'), "customer_id=entity_id AND MAX(l.login_at) <= '" . date('Y-m-d H:i:s', strtotime('10 months ago')) . "'")->group('e.entity_id');
$collection->addAttributeToSelect('*');
$collection->addFieldToFilter('updated_at', array(
    'lt' => date('Y-m-d H:i:s', strtotime('10 months ago')),
    'datetime'=>true,
));
$collection->addAttributeToFilter('group_id', array(
    'neq' => 5,
)); 
```

上表有一位客户供参考。我不知道如何在连接上使用 MAX()。谢谢

### 更新：

这似乎返回了正确的数据，但我想使用资源收集来做 magento 方式，所以我不需要在 for 循环上再次加载客户。

```
$read = Mage::getSingleton('core/resource')->getConnection('core_read');

$sql = "SELECT e.*,MAX(l.login_at) as login_at
    FROM `customer_entity` e
    LEFT JOIN `log_customer` l on e.entity_id=l.customer_id
    GROUP BY l.customer_id
    HAVING created_at < '".date('Y-m-d H:i:s', strtotime('10 months ago'))."'
    and (login_at< '".date('Y-m-d H:i:s', strtotime('10 months ago'))."' or login_at is null)
    and group_id != 5
    ORDER BY `e`.`entity_id` ASC";

$result = $read->fetchAll($sql); 
```

### 我已将完整的 shell 脚本加载到 github

*   [https://github.com/dbashyal/Magento-ecommerce-Shell-Scripts/blob/master/shell/suspendCustomers.php](https://github.com/dbashyal/Magento-ecommerce-Shell-Scripts/blob/master/shell/suspendCustomers.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:56:01.327

您可以在 where 过滤器中进行子选择。尝试：

```
<?php
// Get the customer collection
$collection = Mage::getModel('customer/customer')->getCollection();
$collection
    ->addFieldToFilter('created_at', array('lt' => date('Y-m-d H:i:s', strtotime('10 months ago'), 'datetime' => true);

// Get the SQL connection and build a Zend_Db_Select subquery so that
// we can filter on customer logins
$read = Mage::getSingleton('core/resource')->getConnection('core_read');
$select = $read->select();
$select
    ->from('log_customer', array('customer_id'))
    ->where('login_at < DATE_SUB(CURDATE() INTERVAL 10 MONTHS)');

// Add the subquery to the field filter
$collection
    ->addFieldToFilter('entity_id', array('in' => $select)); 
```

# java - CardLayout - 如何使用 NetBeans GUI Builder 使用 previous() 和 next()？

> ID：13371259
> 
> 赞同：1
> 
> 时间：2012-11-14T00:28:12.677
> 
> 标签：java, swing, user-interface, netbeans, cardlayout

这是我尝试过的：

将一些 JPanel 拖到 JFrame 上（使用 NetBeans 检查器窗口）。

在 JFrame 构造函数中，使用 使所有 JPanel 不可见`.setVisible(false)`，除了我想首先显示的那个。

`.setVisible(false)`它可以工作，我可以通过使用一些带有 actionPerformed 的按钮并添加到当前卡片和`.setVisible(true)`我想要查看的卡片轻松地从一个到另一个。

我现在想做的是使用 CardLayout`previous()`和`next()`，类似于浏览器的后退/前进。我也想从不同的地方访问一个面板，即两个面板可以链接到同一个面板，所以前一个面板并不总是相同的。

我尝试在 JFrame 类的 actionPerformed 中使用以下代码：

```
CardLayout cardLayout = (CardLayout) this.getLayout();
cardLayout.previous(this); 
```

但是，它不起作用。我错过了什么？这应该做我正在寻找的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:12:43.227

由于您已经设置了`JFrame`to的布局，因此在使用&方法`CardLayout`时需要使用父容器。父容器是内容窗格。所以改变：`next()``previous()``JFrame`

```
cardLayout.previous(this); 
```

到

```
cardLayout.previous(getContentPane()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T13:38:13.297

`String previousCard`在 JPanel 中声明一个变量。当您从 CardA 转到 CardB 时，将`previousCard`变量设置为“CardA”或任何卡的名称。因此，在为从一张卡到另一张卡的所有转换设置此设置后，后退按钮将始终执行相同的操作。

```
cardLayouot.show(getContentPane(), previousCard); 
```

# javascript - 我如何使用 jQuery 遍历祖先？

> ID：13371261
> 
> 赞同：1
> 
> 时间：2012-11-14T00:28:28.950
> 
> 标签：javascript, jquery

如何使用 jQuery 遍历祖先？

当前代码陷入递归循环：

HTML：

```
<html>
    <body>
        <div>
            <ul>
                <li></li>
            </ul>
        </div>
    </body>
</html> 
```

JS：

```
function traverse($node){
  while ( $node.get(0) !== $("html").get(0) ) {
    console.log($node);
    traverse($node.parent());
  }

}

//traverse($("ul li")); 
```

要观察问题，请取消注释最后一行，但请注意它可能会冻结您的浏览器。

在 JSFiddle 上也是如此：http: [//jsfiddle.net/WpvJN/1/](http://jsfiddle.net/WpvJN/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:34:44.833

您可以使用以下方式获取集合[`.parents()`](http://api.jquery.com/parents/)并进行迭代[`.each()`](http://api.jquery.com/each/)：

```
$('ul li').parents().each(function () {
    console.log(this);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:26:08.363

我希望你需要限制遍历，以防你寻找的父级不是你开始的地方的祖先。否则，您要么陷入无限循环，要么父母用完。

例如，一个从元素到具有特定标签名称的父元素的通用函数，你可能会这样做（不是 jQuery，但我相信你可以在必要时转换它）：

```
function upTo(tagName, el) {
  tagName = tagName.toLowerCase();

  // Make sure el is defined on each loop
  while (el && el.tagName && el.tagName.toLowerCase() != tagName) {
    el = el.parentNode;
  }
  return el;
} 
```

另一种方法是检查`el.parentNode`并在没有更多内容时停止。

HTML 文档中总是有一个 HTML 节点，所以只要你不从文档节点开始，你就会一直到达那里。

# node.js - 我的 Node.js 站点的开发构建

> ID：13371262
> 
> 赞同：1
> 
> 时间：2012-11-14T00:28:32.560
> 
> 标签：node.js, authentication, deployment

我在 VPS 上有我的网站的生产版本，我部署到一个裸 git 存储库，该存储库有一个钩子，可以检查对应用程序目录的提交。我永远使用来让我的应用程序从应用程序目录运行。

我想要做的是建立一个我可以推送的开发版本。开发版本可以托管在我的 VPS 上的子域下。但是，我需要一个身份验证步骤来阻止任何人和每个人访问开发站点。如何在对我的应用程序进行很少（如果有的话）更改的情况下将身份验证放在整个站点的前面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:41:45.460

为什么不在公众不可用的端口上运行它，然后您可以创建一个 ssh 隧道并通过 localhost 访问它？

将 dev ssh 用户添加到您的 VPS 并为其分配密码。

您的 ssh 隧道将如下所示（只需相应地调整您的端口）：

```
ssh -N -L8808:localhost:8808 user@destination.com 
```

系统将提示您输入密码，然后您将打开终端会话并通过“http://localhost:8808”访问您的开发服务器

另一种选择（我通常会这样做）。是将一个名为“config.sample.json”的文件签入您的存储库，其中包含配置信息（在这种情况下，您的用户名/密码 [开发] 限制）。然后，您还设置 git 以忽略“config.json”（这样您就不会意外地将其提交到您的存储库并且必须在生产部署中编辑文件）。

接下来，您将编写一个需要该 config.json 文件的函数，并在找到该文件时使用它的配置数据，否则它将作为“生产”加载。

然后您将代码部署到您的开发目录，然后将您的“config.sample.json”重命名为“config.json”，并在该文件中进行所需的任何编辑以设置调试、访问控制等。

# android - 神奇的加入，还是一次刷新多个对象？

> ID：13371263
> 
> 赞同：1
> 
> 时间：2012-11-14T00:28:48.633
> 
> 标签：android, ormlite

我有一些`Item`带有 parent 外键的 s `Category`。有没有一种有效的方法来查询一些项目并获得完全填充的类别对象？

我知道的唯一方法是使用`foreignAutoRefresh`, 或在 Item 查询之后手动刷新 Categories ，但这会导致 EACH Item 对象的额外数据库命中。

这可以通过单个 JOIN 完成，但如果我这样做，是否支持自动构建 Category 对象？部分（也许是全部）问题是我不完全理解 QueryBuilder 的连接功能，但基于[这个答案](https://stackoverflow.com/a/7320091/931277)，它听起来好像没有这样做：

> 但是请注意，您只能使用此机制从查询构建器中获取实体。如果您想从不同的对象中获取两个描述字段，那么您仍然必须使用原始查询。

或者，有没有办法用一个查询刷新一个类别的集合，这样我就可以从 Item 查询中获取纯 id 的类别并将它们全部刷新？

如果感兴趣，目标是在[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html#setAdapter(android.widget.ExpandableListAdapter))中分层显示这些。如果我可以提供更多信息，请告诉我。如果需要的话，我很乐意向它抛出一些 SQL 并自己填充 Java 对象，但如果可能的话，我宁愿留在框架内。

# c# - 星际争霸 2 之类的游戏是否使用 Windows 窗体来构建其 UI？

> ID：13371265
> 
> 赞同：3
> 
> 时间：2012-11-14T00:29:08.583
> 
> 标签：c#, .net

这可能是一个愚蠢的问题......

当我登录星际争霸 2 并看到漂亮的 UI 时，我不禁想知道它是不是使用 Windows 窗体（.Net 或 C#）设计的。登录框只是某种 Windows 对话框还是他们做自己的事情——不管是什么？

是否有可能在 Windows 窗体中获得如此多的自定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:32:13.773

不可以。使用 DirectX 控制视频设备的游戏和其他应用程序不使用 WinForms 甚至 Win32 API 进行屏幕输出。

星际争霸 2 很可能实现了自己的窗口和 UI 系统，完全独立于 Windows API 或 WinForms 库。

是的，您可以用 C# 编写应用程序来执行类似的 DirectX 图形输出，但使用 DirectX 并不像使用 WinForms 那样简单。我不建议您尝试编写 DirectX 应用程序来自学 C#，除非您已经通过其他语言或工具（主要是 C++）对 DirectX 非常有经验。

WinForms 非常适合学习 C# 和您选择使用的任何 IDE 工具链。在您熟悉 C# 模式和术语之后，开始学习如何使用 C# 编写 DirectX 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T00:30:20.870

不，他们使用 DirectX。DirectX 绕过正常窗口并在较低级别运行。

您可以在很大程度上自定义表单。您可以完全控制将其绘制成您想要的样子。

# ruby-on-rails - 有没有办法在 Ruby on Rails 的控制台中检查命令的性能？

> ID：13371267
> 
> 赞同：9
> 
> 时间：2012-11-14T00:29:29.893
> 
> 标签：ruby-on-rails, ruby, benchmarking

我找不到任何关于这是否可能的信息，但我可以在命令中调用一个方法`rails console`并使用任何测量来确定性能，但我主要是及时考虑。

例如，我试图找出其中哪个更快：

```
[val2,val3,val4,val5,val6].find{|x| x != val1}
[val2,val3,val4,val5,val6].all?{|x| x == val1} 
```

有这样的事情吗？

```
[val2,val3,val4,val5,val6].find{|x| x != val1}.performance 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-14T00:31:36.400

有！而且你甚至不需要 Rails。从标准库中查看[基准。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)

作为示例：

```
require 'benchmark'

puts Benchmark.measure { [val2,val3,val4,val5,val6].find{|x| x != val1} }
puts Benchmark.measure { [val2,val3,val4,val5,val6].all?{|x| x == val1} } 
```

输出的报告将显示（以秒为单位）：

*   用户 CPU 时间。
*   系统 CPU 时间。
*   用户和系统 CPU 时间的总和。
*   经过的实时。

看起来像这样的东西：

```
0.350000   0.010000   0.360000 (  0.436450) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T08:55:42.013

这个宝石： [https ://github.com/igorkasyanchuk/benchmark_methods](https://github.com/igorkasyanchuk/benchmark_methods)

不再有这样的代码：

```
t = Time.now
user.calculate_report
puts Time.now - t 
```

现在你可以这样做：

```
benchmark :calculate_report # in class 
```

只需调用您的方法

```
user.calculate_report 
```

# java - 如何在二维数组中查找和计算重复项？

> ID：13371275
> 
> 赞同：3
> 
> 时间：2012-11-14T00:30:24.740
> 
> 标签：java, arrays, for-loop

嗨，我正在尝试通过一个二维数组（特别是 4x4 数组）并且都找到任何重复的数字，然后计算该数字重复的次数。到目前为止，我有 4 个 for 循环可以*工作*，但是比我真正想要的要多。

```
int counter1 =1;
    String huh="";

    for (int x = 0; x< dataTable.length; x++)
    {
        for (int y=0; y< dataTable.length; y++)
        {
            for (int z = 0; z< dataTable.length; z++)
            {
                for (int a=0; a< dataTable.length; a++)
                {
                    if ( x != z && x !=a && y != z && y !=a)
                    {
                        if (dataTable[x][y] == dataTable[z][a])
                        {
                        counter1++;
                        }
                    }   
                }
            }
        if (counter1 > 1)
        {
        huh += ("\n " + dataTable[x][y] + " repeats " + counter1 + " times!");
        }
        counter1=1;
        }
    } 
```

基本上，这在它将我的数组中的每个数字与包括自身在内的所有其他数字进行比较的意义上是有效的（但 if 语句阻止它自己计算）。基本上我需要输出来说明一些简单的事情，比如

```
The number 3 repeats 3 times 
```

但是，按照我的设置的工作方式，每次比较数组中每个位置的数字 3 时，它都会将相同的语句添加到字符串中。那么我的方法是否正确，只需要一些调整？还是完全错了，我需要完全不同的东西？我只是在我大学的初学者编程课上，所以我们只知道 Java 的基础知识，比如数组、循环和其他一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:34:08.743

I think the best approach would be to maintain a `Map<Integer, Integer>` that keeps track of the number frequencies (i.e. it maps each number in the array to the number of times it appears). It would not be hard to loop through the entire array and update this map accordingly. What you're doing now seems *way* more complicated than it really needs to be (in my opinion).

And why are you using *4* for-loops? Perhaps I'm misunderstanding the purpose of your specific code, but you should only need two to loop over a 2D-array (and to ultimately count the number-frequencies):

```
for (int[] a : array)
    for (int i : a)
        // do something 
```

* * *

Relevant documentation:

*   [`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T00:38:00.650

只需将此数组转换为 a`Map<Integer, Integer>`然后打印出来，如下所示：

```
 public static void main(String[] args) throws Exception {
        final int[][] dataTable = new int[][] {
                new int[] {0, 1, 2, 1},
                new int[] {0, 1, 3, 1},
                new int[] {0, 1, 2, 2},
                new int[] {0, 1, 2, 0}
        };

        final Map<Integer, Integer> map = new HashMap<Integer, Integer> ();
        for (int i = 0; i < 4; i++) {
            for (int j = 0; j < 4; j++) {
                final int value = dataTable[i][j];
                final Integer currentCount = map.get(value);
                final Integer newCount;
                if (currentCount == null) {
                    newCount = 1;
                }
                else {
                    newCount = currentCount + 1;
                }

                map.put (value, newCount);
            }
        }

        for (final Map.Entry<Integer, Integer> entry : map.entrySet()) {
            System.out.println(String.format ("The number %d repeats %d times", entry.getKey(), entry.getValue()));
        }
    } 
```

[在这里](http://ideone.com/9GWgg9)您可以找到结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:50:20.200

你可以有一个 n*n 行和 2 列的数组：

```
/*being n the number of rows/columns*/
int count[]][] = new int[n*n][2];

for (int i = 0; i < dataTable.length; i++) {

    for (int k = 0; k < dataTable.length; k++) {

        /*this loop finds the position in which it should go*/
        for (int h = 0; h < n*n; h++) {
            if (count[h][0] == dataTable[i][k]) {
                break;
            }

            /*Assuming that '0' is not a possible number in dataTable, use '-1' or a number that */
            if (count[h][0] == 0) {
                break;
            }
        }

        count[h][0] = dataTable[i][k];
        count[h][1]++;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:39:27.303

正如其他人所建议的那样，最通用的解决方案是使用地图。但是，如果数组值在相对较小的范围内，则可以使用数组而不是映射。如果`min`是（至多）数组中的最小值并且`max`（至少）是最大值：

```
public int[] getFrequencyMap(int[][] array, int min, int max) {
    int[] map = new int[max - min + 1];
    for (int[] row : array) {
        for (int val : row) {
            map[val - min]++;
        }
    }
    return map;
} 
```

在返回的数组中，索引处的值`val - min`将是该值`val`在数组中出现的次数。

# log4net - 能够以编程方式删除记录器

> ID：13371277
> 
> 赞同：3
> 
> 时间：2012-11-14T00:30:29.873
> 
> 标签：log4net

有没有办法`Logger`在添加后删除它？通过说：

```
LogManager.GetLogger("loggerName") 
```

在我的研究中，这似乎是不可能的。我发现最接近的是调用`Clear` [层次结构方法](http://logging.apache.org/log4net/release/sdk/log4net.Repository.Hierarchy.Hierarchy.Clear.html)的能力。这确实会清除现有的记录器，但我想有选择地删除它们，更不用说这可能不是最安全的事情。

对于某些背景，我为每个任务记录一个文件，其中可能有数千个并发任务和每个应用程序生命周期数十万个任务。一种方法是`Logger`为每个任务创建一个，然后在任务完成后将其删除。如果不能有选择地删除一个`Logger`虽然，内存将被退休的实例咀嚼。

当然，还有其他可行的设计。可以通过添加/删除`Appenders`以及`Filters`根据需要对给定的`Logger`. 此外，可以创建一个池，然后为每个任务配置`Loggers`一个池。`Appenders`

如果在添加特定记录器后无法删除它，那么它显然不是一个显示停止器。我只是好奇是否有办法删除`Logger`我可能错过的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-06T22:12:46.857

不，这是不可能的。这些天在他们的常见问题解答中特别提到了这一点：

**记录器实例似乎只是创建的。为什么没有删除记录器实例的方法？** 定义仍然被用户引用的“已删除”记录器的语义是非常重要的。

来源： [能够以编程方式删除记录器](https://stackoverflow.com/questions/13371277/ability-to-programmatically-remove-a-logger)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-12T20:23:41.083

因为它已经开放了很长时间，所以总结一下。我还没有找到一种自行删除记录器的方法，而且我在文档中看到的任何内容都没有表明它也是可能的。对我有用的解决方案是共享一个只会增长到最大并发任务数量的记录器池。每个任务都可以从池中获取一个记录器，并添加一个特定于该任务的附加程序。任务完成后，appender 被移除，记录器返回到池中。

# php - 为什么 php 函数 asXML() 在响应中包含 html 标签？

> ID：13371278
> 
> 赞同：1
> 
> 时间：2012-11-14T00:30:36.117
> 
> 标签：php, javascript, xml, ajax, simplexml

我正在创建一个 PHP 脚本以将目录的文件结构作为 XML 文档返回。我已经使用 simpleXML 来执行此操作，并且脚本正在运行，但响应嵌套在 HTML 标记中。

PHP 文件：

```
<!DOCTYPE HTML>

<html>
<body>

<?php
$xml_string = <<<XML
<?xml version='1.0' standalone='yes'?>
<directory>
</directory>
XML;
$directory=new SimpleXMLElement($xml_string);

Code creating the file structure.    

echo $directory->asXML();

?>

</body>
</html> 
```

响应如下：

```
<!DOCTYPE HTML>

<html>
<body>

<?xml version='1.0' standalone='yes'?>
<directory>
XML tags created by script
</directory>

</body>
</html> 
```

我想知道为什么 XML 在 HTML 文档中。我无法获得任何 javascript 来访问 XML 元素。

```
var xmlhttp = new XMLHttpRequest();
var xmlDoc=xmlhttp.responseXML.documentElement.getElementsByTagName("folder");
document.getElementById("myDiv").innerHTML = xmlDoc[0].firstChild.nodeValue; 
```

*（使用的 Javascript 代码片段）*

我收到一个错误：'xmlhttp.responeXML 未定义'

有什么方法可以解释响应或不将 XML 嵌套在 HTML 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:34:21.623

It's because the code generating the xml is surrounded by html. Remove the html parts and you should be fine.

Remove this:

```
<!DOCTYPE HTML>

<html>
<body> 
```

And this:

```
</body>
</html> 
```

# python-3.x - 什么是另一种编写python3 zip的方法

> ID：13371279
> 
> 赞同：-1
> 
> 时间：2012-11-14T00:30:37.410
> 
> 标签：python-3.x

我一直在研究读取文件文档中的行然后代码组织它们的代码。但是，我一度陷入困境，我的朋友告诉我我可以使用什么。该代码有效，但似乎我不知道他在第 7 行和第 8 行从底部做什么。我使用了####，所以你们知道它是哪几行。

那么，本质上，您如何重新编写这两行代码以及它们为什么起作用？我似乎不明白来自 sys import argv 的字典

```
filename = input("Please enter the name of a file: ")
file_in=(open(filename, "r"))

print("Number of times each animal visited each station:")
print("Animal Id             Station 1              Station 2")

animaldictionary = dict()

for line in file_in:
    if '\n' == line[-1]:
        line = line[:-1]
    (a, b, c) = line.split(':')
    ac = (a,c)
    if ac not in animaldictionary:
        animaldictionary[ac] = 0
    animaldictionary[ac] += 1

alla = []
for key, value in animaldictionary:
    if key not in alla:
        alla.append(key)
print ("alla:",alla)
allc = []
for key, value in animaldictionary:
    if value not in allc:
        allc.append(value)    
print("allc", allc)

for a in sorted(alla):
    print('%9s'%a,end=' '*13)
    for c in sorted(allc):
        ac = (a,c)
        valc = 0
        if ac in animaldictionary:
            valc = animaldictionary[ac]
        print('%4d'%valc,end=' '*19)

    print()

print("="*60)
print("Animals that visited both stations at least 3 times: ")

for a in sorted(alla):
    x = 'false'
    for c in sorted(allc):
        ac = (a,c)
        count = 0
        if ac in animaldictionary:
            count = animaldictionary[ac]
            if count >= 3:
                x = 'true'
    if x is 'true':    
        print('%6s'%a, end=' ')
        print("")

print("="*60)
print("Average of the number visits in each month for each station:")

#(alla, allc) = 
#for s in zip(*animaldictionary.keys()):
#    (alla,allc).append(s)
#print(alla, allc)

(alla,allc,) = (set(s) for s in zip(*animaldictionary.keys())) ##### how else can you write this
##### how else can you rewrite the next code
print('\n'.join(['\t'.join((c,str(sum(animaldictionary.get(ac,0) for a in alla for ac in ((a,c,),))//12)))for c in sorted(allc)]))

print("="*60)
print("Month with the maximum number of visits for each station:")
print("Station             Month               Number")

print("1")
print("2") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:26:23.057

您指出的两行确实相当混乱。我将尽我所能解释它们，并建议替代实现。

第一个计算`alla`和的值`allc`：

```
(alla,allc,) = (set(s) for s in zip(*animaldictionary.keys())) 
```

这几乎等同于您在上面已经完成的用于构建`alla`和`allc`列表的循环。如果你愿意，你可以完全跳过它。但是，让我们解开它在做什么，这样你就可以真正理解它了。

最里面的部分是`animaldictionary.keys()`。这将返回一个包含字典所有键的可迭代对象。由于其中的键`animaldictionary`是二值元组，这就是您将从可迭代对象中得到的。`keys`在大多数情况下处理字典时实际上不需要调用，因为对键视图的操作通常与直接对字典执行相同的操作相同。

继续前进，通过`zip`使用`zip(*keys)`. 这里发生了两件事。首先，`*`语法将上面的迭代解包成单独的参数。因此，如果animaldictionary 的键是`("a1", "c1), ("a2", "c2"), ("a3", "c3")`这`zip`三个元组作为单独的参数调用。现在，`zip`所做的是将多个可迭代参数转换为单个可迭代参数，产生一个包含每个值的第一个值的元组，然后生成一个包含每个值的第二个值的元组，依此类推。所以`zip(("a1", "c1"), ("a2", "c2"), ("a3", "c3"))`会返回一个生成器 yield`("a1", "a2", "a3")`后跟`("c1", "c2", "c3")`.

下一部分是生成器表达式，它将表达式中的每个值传递`zip`给`set`构造函数。这用于消除任何重复。`set`实例在其他方面也很有用（例如寻找交叉点），但这里不需要。

最后，两组`a`和`c`值被分配给变量`alla`和`allc`。它们用这些名称（以及相同的内容！）替换您已经拥有的列表。

您已经有了一个替代方案，您可以在其中计算`alla`并`allc`作为列表。使用集合可能会稍微高效一些，但对于少量数据来说可能并没有太大关系。另一种更明确的方法是：

```
alla = set()
allc = set()
for key in animaldict:  # note, iterating over a dict yields the keys!
    a, c = key  # unpack the tuple key
    alla.add(a)
    allc.add(c) 
```

您询问的第二行进行了一些平均，并将结果组合成一个巨大的字符串，然后打印出来。在一行中塞进这么多东西真的是一种糟糕的编程风格。事实上，它做了一些不必要的事情，这使得它更加混乱。就是这样，添加了几个换行符以使其一次全部显示在屏幕上。

```
print('\n'.join(['\t'.join((c,str(sum(animaldictionary.get(ac,0)
                                      for a in alla for ac in ((a,c,),))//12)
                           )) for c in sorted(allc)])) 
```

这是最里面的部分`for ac in ((a,c,),)`。这很愚蠢，因为它是一个 1 元素元组的循环。这是一种将元组重命名为 的方式`(a,c)`，`ac`但它非常混乱且不必要。

如果我们用`ac`显式写出的元组替换一次使用，则新的最里面的部分是`animaldictionary.get((a,c),0)`. 这是一种特殊的书写方式，但如果不在字典中，则不会`animaldictionary[(a, c)]`冒引发 a 的风险。相反，对于不存在的键，将返回（传递给）的默认值。`KeyError``(a, c)``0``get`

该`get`电话已包含在以下内容中：`(getcall for a in alla)`。这是一个生成器表达式，它使用键中的给定值从字典中获取所有值`c`（如果该值不存在，则默认为零）。

下一步是取上一个生成器表达式中的值的平均值`sum(genexp)//12`：这非常简单，尽管您应该注意使用`//`for 除法总是向下舍入到下一个整数。如果您想要更精确的浮点值，请使用`/`.

下一部分是对 的调用`'\t'.join`，其参数是单个`(c, avg)`元组。这是一个笨拙的结构，可以更清楚地写成`c+"\t"+str(avg)`or `"{}\t{}".format(c, avg)`。所有这些都会产生一个包含`c`值、制表符和上面计算的平均值的字符串形式的字符串。

下一步是列表`[joinedstr for c in sorted(allc)]`推导（其中joinedstr 是`join`上一步中的调用）。在这里使用列表推导有点奇怪，因为不需要列表（生成器表达式也可以）。

最后，列表理解与换行符连接并打印：`print("\n".join(listcomp))`。这很简单。

无论如何，可以通过使用一些变量并在循环中分别打印每一行来以更清晰的方式重写整个混乱：

```
for c in sorted(allc):
    total_values = sum(animaldictionary.get((a,c),0) for a in alla)
    average = total_values // 12

    print("{}\t{}".format(c, average)) 
```

最后，我有一些一般性的建议。

首先，您的数据结构可能不是您对数据的使用的最佳选择。`animaldict`与其成为带有键的字典，不如`(a,c)`拥有一个嵌套结构可能更有意义，您可以在其中分别索引每个级别。即，`animaldict[a][c]`。让第二个字典包含以相反顺序索引的相同值甚至可能是有意义的（例如，一个被索引`[a][c]`，而另一个被索引`[c][a]`）。使用这种方法，您可能不需要`alla`and`allc`列表进行迭代（您只需直接循环主字典的内容）。

我的第二个建议是关于代码风格。您的许多变量命名不佳，或者是因为它们的名称没有任何含义（例如`c`），或者名称暗示的含义不正确。最明显的问题是你的`key`和`value`变量，它实际上解开了两个密钥（AKA`a`和`c`）。在其他情况下，您可以将键和值放在一起，但仅当您迭代字典的`items()`视图而不是直接在字典上时。

# php - 如何使用 PHP PDO 从 Mac 连接到 Sql Server？

> ID：13371281
> 
> 赞同：29
> 
> 时间：2012-11-14T00:30:37.650
> 
> 标签：php, sql-server, pdo

如果你在谷歌上搜索这个问题，你会发现很多不正确、误导和过时的信息。令人惊讶的是，Stack Overflow 上没有一个可靠的答案，所以我们应该改变它。

我正在使用 Apache 和 PHP 的 Mac 端口安装。我已经安装了 php5-mssql，我可以在我的 phpinfo() 页面上看到 mssql。

但我没有看到它列在 PDO 下。

```
PDO support enabled
PDO drivers     dblib, mysql, odbc, pgsql 
```

mssql 与 PDO 没有关联吗？是否有另一个驱动程序可以在 Mac 上使用 PDO 连接到 SqlServer 数据库？似乎这应该是可能的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T14:59:38.890

这对你有帮助吗？

[http://blog.nguyenvq.com/2010/05/16/freetds-unixodbc-rodbc-r/](http://blog.nguyenvq.com/2010/05/16/freetds-unixodbc-rodbc-r/)

我使用 FreeTDS 从 Linux 服务器连接到 Microsoft SQL 服务器，看起来上面链接中的人使用 FreeTDS 从 Mac 连接。

这是我的 /etc/freetds/freetds.conf 文件（我添加的唯一部分是在 XYZ 服务器的最后）：

```
[global]
        # TDS protocol version
;       tds version = 4.2

        # Whether to write a TDSDUMP file for diagnostic purposes
        # (setting this to /tmp is insecure on a multi-user system)
;       dump file = /tmp/freetds.log
;       debug flags = 0xffff

        # Command and connection timeouts
;       timeout = 10
;       connect timeout = 10

        # If you get out-of-memory errors, it may mean that your client
        # is trying to allocate a huge buffer for a TEXT field.  
        # Try setting 'text size' to a more reasonable limit 
        text size = 64512

# Define a connection to the MSSQL server.
[xyz]
        host = xyz
        port = 1433
        tds version = 8.0 
```

[提问者编辑]

FreeTDS 配置是答案的前半部分。配置完成后，您应该能够从命令行运行类似的内容并连接：

```
tsql -S xyz -U username -P password 
```

然后你需要使用 dblib，而不是 mssql，作为 PDO 驱动：

```
$pdo = new PDO("dblib:host=$dbhost;dbname=$dbname",
                "$dbuser","$dbpwd"); 
```

其中 $dbhost 是 freetds.conf 文件中的名称

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T05:13:11.373

**dblib**是 unix 系统上需要与 mssql 一起使用的驱动程序

无需您安装其他任何东西，

```
<?php
    $dsn = 'dblib:dbname=testdb;host=127.0.0.1';
    $user = 'dbuser';
    $password = 'dbpass';
    $dbh = new PDO($dsn, $user, $password); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-08T15:57:54.400

在查看了许多线程之后，我发现使用 PHP 7 或更早版本从 Mac OS X 连接到 MSSQL 的最佳方法是使用 dblib。（只需下载正确的php版本）

您可以按照这些说明（忽略 mssql.so 扩展名）非常轻松地进行连接：

[https://github.com/BellevueCollege/public-docs/blob/master/PHP/configure-mssql-pdodblib-mac.md](https://github.com/BellevueCollege/public-docs/blob/master/PHP/configure-mssql-pdodblib-mac.md)

它与 OS X El Capitan、Bitnami 和 PHP 7 完美配合。

步骤 1.- 安装 XCode

```
$ xcode-select ---install 
```

2.- 安装自制软件

3.- 使用 Homebrew 安装 autoconf。

```
$ brew install autoconf 
```

4.- 安装 FreeTDS

```
$ brew install freetds 
```

5.- 下载您的 PHP Source 版本并解压缩。

6.- 构建 PDO DBLIB 扩展（PHP 5.5.14 的示例）

```
$ cd php-5.5.14/ext/pdo_dblib
$ phpize
$ ./configure --with-php-config=/usr/bin/php-config --with-pdo-dblib=/usr/local/
$ make
$ sudo cp modules/pdo_dblib.so /usr/lib/php/extensions/no-debug-non-zts-20121212 
```

7.- 将 .so 扩展名添加到 php.ini 扩展名=pdo_dblib.so

8.- 重启 Apache

9.- 使用 dblib dsn 连接：

```
$pdo = new PDO("dblib:host=$dbhost;dbname=$dbname","$dbuser","$dbpwd"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-20T08:05:54.083

感谢 Esteban 的精彩指南（[https://stackoverflow.com/a/37707426](https://stackoverflow.com/a/37707426)），它成功地帮助我安装了 pdo_dblib 驱动程序。

但是，我在使用提供的 dblib dsn 从 OSX 10 与 PHP (5.5) 和 FreeTDS 连接到我的 Azure SQL 数据库时遇到问题。最终为我解决的问题是**将 Azure 数据库 (m53man42a) 附加到我的 username**。

我在 PHP 中的 dblib PDO 连接：

```
$conn = new PDO("dblib:host=azure-sql;dbname=my-database-name", 
"username@m53man42a",
"my-secret-password"); 
```

我的 FreeTDS.conf：

```
[azure-sql]
host = m53man42a.database.windows.net
port = 1433
tds version = 8.0
client charset = UTF-8
text size = 20971520 
```

考虑将其添加为列表中的第 10 号项目符号...：D

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-29T15:17:51.093

请注意，Microsoft 已为此发布了 PHP7 扩展，但如果您仍在使用 PHP5.x，那对您没有帮助。我已经成功地使用不同的堆栈进行连接：freetds、odbc、pdo。

我正在使用 OS X 10.11.6 (El Capitan) 和 Macports，PHP5.6。

我首先创建了一个 Azure SQL 数据库，该数据库`mydb`在名为`myserver.database.windows.net`. 重要的是要记住打开防火墙到您的客户端 IP 地址，您在服务器上执行此操作。

第一步是使用 ODBC 驱动程序及其 PHP 连接器安装 freetds（将 php56 更改为您的 PHP 的正确版本）：

```
sudo port install freetds +odbc
sudo port install php56-odbc 
```

接下来，您需要在配置文件中包含一些行：

/opt/local/etc/odbcinst.ini

```
[FreeTDS]
    Description = ODBC for FreeTDS
    Driver      = /opt/local/lib/libtdsodbc.so
    Setup       = /opt/local/lib/libtdsodbc.so
    FileUsage   = 1 
```

这告诉 odbc 库在哪里可以找到它的 odbc 驱动程序。

/opt/local/etc/freetds/freetds.conf

```
[myserver]
    host = myserver.database.windows.net
    port = 1433
    tds version = 7.0 
```

这告诉 freetdc 库在哪里可以找到您的服务器。

/opt/local/etc/odbc.ini

```
[myds]
Description = Test for SQL Server on Azure
Driver = FreeTDS
Trace = Yes
TraceFile = /var/log/sql.log
Database = mydb
Servername = myserver
UserName = myusername
Password = mypassword
Port = 1433
Protocol = 7.0
ReadOnly = No
RowVersioning = No
ShowSystemTables = No
ShowOidColumn = No
FakeOidIndex = No 
```

这将创建一个名为`myds`指向您的数据库的数据源，使您能够连接以下 PHP：

```
$conn = new PDO('odbc:myds', 'myusername', 'mypassword'); 
```

如果其中任何一个对您不起作用，请首先使用以下命令检查 freetds 安装是否正确：

```
tsql -S myserver -U myusername -P mypassword 
```

然后使用以下命令检查 ODBC 规范是否正常：

```
isql -v myds myusername mypassword 
```

感谢[https://github.com/lionheart/django-pyodbc/wiki/Mac-setup-to-connect-to-a-MS-SQL-Server](https://github.com/lionheart/django-pyodbc/wiki/Mac-setup-to-connect-to-a-MS-SQL-Server)，它为 Python 完成了同等的工作，并指出了我的正确方向这一切的方向。

# http - CURL 命令行 URL 参数

> ID：13371284
> 
> 赞同：236
> 
> 时间：2012-11-14T00:30:46.177
> 
> 标签：http, curl

我正在尝试`DELETE`使用 CURL 发送带有 url 参数的请求。我在做：

```
curl -H application/x-www-form-urlencoded -X DELETE http://localhost:5000/locations` -d 'id=3' 
```

但是，服务器没有看到参数 id = 3。我尝试使用一些 GUI 应用程序，当我将 url 传递为:`http://localhost:5000/locations?id=3`时，它可以工作。我真的宁愿使用 CURL 而不是这个 GUI 应用程序。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：344
> 
> 时间：2012-11-14T00:41:01.620

`application/x-www-form-urlencoded`不需要 Content-type 标头（嗯，有点取决于）。除非请求处理程序期望来自表单主体的参数。试试看：

```
curl -X DELETE "http://localhost:5000/locations?id=3" 
```

或者

```
curl -X GET "http://localhost:5000/locations?id=3" 
```

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2013-01-11T18:34:39.790

Felipsmartins 是正确的。

值得一提的是，如果这不是 POST 请求，则无法真正使用 -d/--data 选项。但是，如果您使用 -G 选项，这仍然是可能的。

这意味着您可以这样做：

```
curl -X DELETE -G 'http://localhost:5000/locations' -d 'id=3' 
```

这里有点傻，但是当你在命令行上并且你有很多参数时，它会更整洁。

我这么说是因为 cURL 命令通常很长，因此值得在多行上进行转义换行符。

```
curl -X DELETE -G \
'http://localhost:5000/locations' \
-d id=3 \
-d name=Mario \
-d surname=Bros 
```

如果您使用 zsh，这显然要舒服得多。我的意思是当您需要重新编辑上一个命令时，因为 zsh 可以让您逐行执行。（只是说）

希望能帮助到你。

# oracle - 在'select'上合并oracle中的两个日期列并在合并列上排序

> ID：13371286
> 
> 赞同：0
> 
> 时间：2012-11-14T00:30:54.307
> 
> 标签：oracle

您好我有一个选择查询，我从表中选择 2 个不同的日期列，我需要将它们合并到结果中的一列中，并按日期的降序排列。查询如下所示：

```
select work_order_no,install_remove_type,removed_item_id,installed_item_id,
       removed_performed_on as irdate, 
       installed_performed_on as irdate 
  from install_remove_items 
 where work_order_no is not null  
   and (installed_item_id = 'IID000174096' or removed_item_id= 'IID000174096') 
```

上述查询的结果是创建了 2 列

irdate - 对于 removed_performed_on

和

irdate_1 - 用于 installed_performed_on

这不是我想要的方式。我如何在“irdate”列中获得与日期相关的数据并按 desc 顺序排序？

更新：

install_remove_items 表中的示例数据（INSTALL_REMOVE_TYPE 字段中 4 种操作类型的 4 条记录）：

```
 ir_id: xxxxyyyy5555,  install_remove_type= 'INSTALL', workOrderno = 22335522, installed_item_id = IID000174096, installed_performed_on = '11/10/2012', removed_item_id = null, removed_performed_on = null.

 ir_id: xxxxyyyy3333, install_remove_type= 'REMOVE', workOrderno = 223542, installed_item_id = null, installed_performed_on = null, removed_item_id = IID000174096, removed_performed_on = '11/12/2012'.

 ir_id: xxxxyyyy1111,  install_remove_type= 'WORKEDON', workOrderno = 111111, installed_item_id = null, installed_performed_on = null, removed_item_id = IID000174096, removed_performed_on = '11/13/2012'.

 ir_id: xxxxyyyy2222, install_remove_type= 'REPLACED', workOrderno = 444444, installed_item_id = IID000174096, installed_performed_on = 11/15/2012, removed_item_id = IID000174096, removed_performed_on = '11/14/2012'. 
```

所以有 4 种类型的操作，“删除”字段用于 REMOVE 操作，“安装”字段用于安装操作，两个字段用于 REPLACED 操作，“删除”字段用于 WORKEDON 操作。

我想编写一个查询，以根据 install_performed_on 和 removed_performed_on 日期（并获取该日期）查找最后执行的四个操作中的哪种操作（与今天的日期或输入日期值相比）。

希望这能让事情变得清楚。

我知道联合可能很好，但目前我们为 SQL 提供的 Java API 不支持联合，所以我可能必须结合 SQL 和 JAVA 代码来实现我的输出。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:53:03.050

如果没有放置您想要的样本数据，它并不完全清楚您想要什么。但会是这样吗？

```
select *
  from (select work_order_no,install_remove_type,installed_item_id,
                   installed_performed_on as irdate 
              from install_remove_items 
             where work_order_no is not null  
               and installed_item_id = 'IID000174096'
            union all
            select work_order_no,install_remove_type,removed_item_id,
                   removed_performed_on as irdate
              from install_remove_items 
             where work_order_no is not null  
               and removed_item_id= 'IID000174096')
         order by irdate desc; 
```

根据您的样本修改为：

```
SQL> select *
  2    from (select workOrderno, install_remove_type,
  3                 case
  4                   when installed_performed_on > removed_performed_on
  5                     or removed_performed_on is null then ir.installed_performed_on
  6                   else removed_performed_on
  7                 end last_action_date,
  8                 coalesce(ir.installed_item_id,ir.removed_item_id)  item_id
  9            from install_remove_items ir
 10           where workOrderno is not null
 11             and (installed_item_id = 'IID000174096' or removed_item_id= 'IID000174096')
 12           order by last_action_date desc )
 13   where rownum = 1
 14  /

WORKORDERNO INSTALL_RE LAST_ACTI ITEM_ID
----------- ---------- --------- --------------------
     444444 REPLACED   15-NOV-12 IID000174096 
```

或您可以这样做的每个项目的列表：

```
SQL> select * from install_remove_items;

IR_ID                INSTALL_RE WORKORDERNO INSTALLED_ITEM_ID    INSTALLED REMOVED_ITEM_ID      REMOVED_P
-------------------- ---------- ----------- -------------------- --------- -------------------- ---------
xxxxyyyy5555         INSTALL       22335522 IID000174096         10-NOV-12
xxxxyyyy3333         REMOVE          223542                                IID000174096         12-NOV-12
xxxxyyyy1111         WORKEDON        111111                                IID000174096         13-NOV-12
xxxxyyyy2222         REPLACED        444444 IID000174096         15-NOV-12 IID000174096         14-NOV-12
3242                 REMOVE              43                                IID000174097         14-DEC-12
123                  INSTALL            123 IID000174097         15-NOV-12

6 rows selected.

SQL> select workorderno, install_remove_type, item_id, last_action_date
  2    from (select l.*,
  3                  row_number() over(partition by item_id order by last_action_date desc) rn
  4             from (select workorderno, install_remove_type,
  5                           case
  6                             when installed_performed_on > removed_performed_on or
  7                                  removed_performed_on is null then
  8                              ir.installed_performed_on
  9                             else
 10                              removed_performed_on
 11                           end last_action_date,
 12                           coalesce(ir.installed_item_id, ir.removed_item_id) item_id
 13                      from install_remove_items ir
 14                     where workorderno is not null) l)
 15   where rn = 1;

WORKORDERNO INSTALL_RE ITEM_ID              LAST_ACTI
----------- ---------- -------------------- ---------
     444444 REPLACED   IID000174096         15-NOV-12
         43 REMOVE     IID000174097         14-DEC-12 
```

# perl - OS X 上 perl 中的奇数文件处理

> ID：13371292
> 
> 赞同：0
> 
> 时间：2012-11-14T00:31:47.787
> 
> 标签：perl, file-io, osx-mountain-lion

我是一个 perl 新手，所以请耐心等待。

我正在寻找一种在 OS X 中递归遍历文件夹的方法，并遇到了这个解决方案：[如何遍历目录中的所有文件...](https://stackoverflow.com/questions/9600395/how-to-traverse-all-the-files-in-a-directory-if-it-has-subdirectories-i-want-t)

我稍微修改了 perreal 的答案（见下面的代码），以便我可以在参数中指定搜索文件夹；即我改变`my @dirs = (".");`了我的`@dirs = ($ARGV[0]);`

但由于某种原因，这不起作用——它会打开文件夹，但不会将任何子目录识别为文件夹，除了“。” 和'..'，所以它实际上从未超出指定的根。

如果我主动指定了文件夹（例如 \Volumes\foo\bar），它仍然不起作用。但是，如果我返回`my @dirs = (".");`然后坐在我想要的文件夹 (foo\bar) 中并从它自己的文件夹 (foo\boo\script.pl) 调用脚本，它就可以正常工作。

这是“预期”的行为吗？我错过了什么？！

非常感谢，

垫

```
use warnings;
use strict;

my @dirs = (".");
my %seen;
while (my $pwd = shift @dirs) {
        opendir(DIR,"$pwd") or die "Cannot open $pwd\n";
        my @files = readdir(DIR);
        closedir(DIR);
        foreach my $file (@files) {
                if (-d $file and ($file !~ /^\.\.?$/) and !$seen{$file}) {
                        $seen{$file} = 1;
                        push @dirs, "$pwd/$file";
                }
                next if ($file !~ /\.txt$/i);
                my $mtime = (stat("$pwd/$file"))[9];
                print "$pwd $file $mtime";
                print "\n";
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:10:24.373

问题是您在`-d`没有路径的文件基名上使用了运算符。Perl 将在当前工作目录中查找具有该名称的目录，如果在该目录中找到，则返回 true，此时它应该查找`$pwd`.

此解决方案更改`$file`为始终保存文件或目录的全名，包括路径。

```
use strict;
use warnings;

my @dirs = (shift);
my %seen;

while (my $pwd = shift @dirs) {

  opendir DIR, $pwd or die "Cannot open $pwd\n";
  my @files = readdir DIR;
  closedir DIR;

  foreach (@files) {

    next if /^\.\.?$/;

    my $file = "$pwd/$_";
    next if $seen{$file};

    if ( -d $file ) {
      $seen{$file} = 1;
      push @dirs, $file;
    }
    elsif ( $file =~ /\.txt$/i ) {
      my $mtime = (stat $file)[9];
      print "$file $mtime\n";
    }

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:42:50.637

使用带有 -d 的完整路径

```
-d "$pwd/$file" 
```

# wix - 您如何更正具有相同 UpgradeCode 的 2 个不相关的 msi

> ID：13371296
> 
> 赞同：3
> 
> 时间：2012-11-14T00:32:23.500
> 
> 标签：wix, windows-installer

我对细节有点轻，但我认为我们有问题。

使用在 wix 中提升安装程序项目的复制/粘贴方法，我们似乎错过了更新 UpgradeCode 以确保它们是唯一的......

```
<Product Id="*" UpgradeCode="SOME-BAD-FOO"> 
```

所以，我的理解是这“不好”（r）（tm）

目前，存在此问题的 2 个安装程序的用户不太可能同时安装这两个安装程序，但他们将来可能会安装。

寻找有关如何在此问题成为安装的噩梦之前解决此问题的想法...也许 Windows 甚至无法同时安装两者？有没有办法执行升级安装/补丁和更改升级代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:46:23.820

> 所以，我的理解是这“不好”（r）（tm）

这真的不好，你应该小心不要在未来这样做，因为它会给你和你的用户带来很多麻烦。

但是，解决方案非常简单。您需要做的就是更改其中一个软件包的升级代码，并将当前升级代码添加到新版本的[升级表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372379%28v=vs.85%29.aspx)中，以便在机器上找到它时将其删除。

如果您确定所有已安装第一个版本的用户都将安装第二个版本，则在下一个版本中，您应该从升级表中删除升级代码，以确保您与第二个软件包没有任何冲突，即仍然使用第一个升级代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:40:22.890

我要问的一个问题是您使用的是主要升级还是次要升级。

如果是 Minor，我从未尝试过更改 UpgradeCode 而不是 ProductCode。我认为这没关系，但我害怕发现。

如果是重大升级，产品是否使用不同的版本号范围？1.0-1.9 , 2.0-2.9? 如果是这样，则可以更改两个安装程序中的 UpgradeCode（只需将“脏”guid 保留在您的过去），然后在 UpgradeTable 中使用带有版本号的旧 guid 作为识别正确产品代码的关键。

如果不知道，您是否知道曾经为这两种产品发布的每一个 ProductCode？自定义操作可用于查询 MSI 以获取已安装的 ProductCode，然后将其与已知 guid 列表进行比较以确定它是否适用。

不过，您必须永远保留代码。旧版本的软件倾向于永远存在。

# solr - Solr 复制：confFiles 元素中的路径？

> ID：13371297
> 
> 赞同：0
> 
> 时间：2012-11-14T00:32:36.573
> 
> 标签：solr

是否可以在 ReplicationHandler 的 confFile 值中为文件定义路径（相对或绝对）？

例如：

```
<str name="confFiles">../../x.xml</str> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:33:47.873

配置文件的 Solr 复制仅适用于核心 conf 文件夹。

[配置复制的文档](http://wiki.apache.org/solr/SolrReplication#How_are_configuration_files_replicated.3F)。

[SOLR-3809](https://issues.apache.org/jira/browse/SOLR-3809)支持在conf 文件夹中的子文件夹中复制文件。因此，如果您在 conf 文件夹中有文件夹和文件，则支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:07:17.033

根据您在 cores 标签中`solr.xml`设置属性的文件中的设置检查每个核心的配置。`instanceDir`数据 - 存储索引的位置和 conf - 存储配置的位置都会从`instanceDir`. `solr.xml`因此，当您进行复制时，solr 会检查该特定文件夹，然后检查您定义的文件夹的名称`confFiles`。

基本上，它会检查单个文件夹中的文件，因为它假定特定核心的所有配置都在该文件夹中。

所以给出路径是行不通的

# ada - Ada - 如何从 GNAT Pro Studio 生成包变量列表？

> ID：13371298
> 
> 赞同：3
> 
> 时间：2012-11-14T00:32:35.853
> 
> 标签：ada, gnat

我想使用 GPS Ada 项目中的外部参照信息来生成为每个包规范和主体定义的变量列表。我需要排除在子程序中定义的任何变量。

我可以在 GPS 的“项目视图”中看到这些信息，它显示了每个文件中定义的文字、包、编译指示、类型和变量。但是，该信息不可用于剪切/粘贴。如何以文本形式生成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:00:37.020

GPS 是使用 Python 定制的。提供的脚本在`{installation}/share/gps/library`; 看起来`unused_entities.py`可能是一个好的开始。或者，在 GPS 文档中有“自定义和扩展 GPS”一章。

[编辑]

或者，更好的是，查看 中的示例`globals.py`。`{installation}/share/examples/gps/python`快速浏览文档（通过帮助/Python 扩展在 GPS 中访问）表明您正在寻找 GPS.Entities `e`where `e.category()`is `"object"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:06:41.163

SciTools 的[理解](http://www.scitools.com/download/latest.php)产品可以提取这些信息，尽管它相当昂贵。尽管如果您正在处理大量遗留代码，那么这笔钱是值得的——它不止一次地救了我的培根。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T07:00:49.873

既然你提到了GPS，你有没有试过工具->文档->生成项目？这将生成带有超链接等的 html，类似于 Javadoc。

# ruby-on-rails - Gmaps4rails - 当 JSON == "[]" 时地图在第一次加载时抛出 JS 错误

> ID：13371300
> 
> 赞同：0
> 
> 时间：2012-11-14T00:32:56.993
> 
> 标签：ruby-on-rails, geolocation, ruby-on-rails-3.2, geocoding, gmaps4rails

我正在使用地理编码器 gem 的`.nearby`方法来查询我的数据库并返回附近的位置对象。

问题一：第一次加载地图时，没有给JS传任何标记，也不加载地图。如何在不加载标记的情况下解决此问题？

```
<script type="text/javascript">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.map_options.detect_location = true;
Gmaps.map.map_options.center_on_user = true;
Gmaps.map.initialize();
Gmaps.map.markers = ; // BLOWS UP HERE
Gmaps.map.markers_conf.list_container = "markers_list";
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
Gmaps.oldOnload = window.onload;
 window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); };
</script>` 
```

问题 2：当用户搜索并且没有附近的结果可供他们搜索时，如何从仅显示随机位置（现在它加载海洋中部）中恢复。

问题 3：当用户搜索并且附近没有可用的结果时，我可以使用浏览器地理定位将附近的位置显示到他们当前的位置（我知道并非所有浏览器都支持它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:23:25.757

**答案1：**

gem 中没有错误。

你的这行让javascript哭了：

```
@json = nil 
```

确实`nil`不是有效的 json。

你应该做：

```
@json = [].to_json 
```

**答案 2**

如果您的查询没有返回任何内容，请制作另一个以获取随机对象。看不出有什么问题。

**答案 3**

来自浏览器的地理位置包含在 gem 中，你甚至有一个成功的回调。[见代码](https://github.com/apneadiving/Google-Maps-for-Rails/blob/1.x/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee#L91)。但是您必须编写适合您自己逻辑的自己的 javascript。

# google-app-engine - webapp2 - blobstore 或 request.get 每 75 个字符添加 =\r\n 以获取长参数？

> ID：13371301
> 
> 赞同：1
> 
> 时间：2012-11-14T00:32:57.017
> 
> 标签：google-app-engine, blobstore, webapp2

我有一个 iOS 应用程序，除了通过 blobstore url 向我的 App Engine 实例发送图像外，还发送相当大的 JSON POST 参数（几百个字符长）。

出于某种原因，self.request.get('foo') 返回的 JSON 字符串每 76 个字符插入一次回车（即十进制值为 13 的字符）。这导致 JSON 解析器抛出有关控制字符的错误。为什么会发生这种情况，有没有办法阻止它？

我相当确定我的应用程序没有添加这些字符，因为我使用代理来检查 HTTP 请求并且 JSON 字符串的格式正确。

谢谢！

**编辑：**

我发现它实际上是每 75 个字符添加一次 =\r\n，这导致我提出另一个 SO 问题，其中包含指向 App Engine 的 blobstore 中的错误的指针。

这是一个副本（除了它在 webapp2 而不是 django 中）：[数据在表单发送时损坏，=\r\n 每 75 个字符在数据中引入？](https://stackoverflow.com/questions/11950220/data-gets-corrupted-on-form-send-r-n-introduced-in-the-data-every-75-characte)

解决方案是：[提交多部分/表单数据表单时应用引擎中的编码问题](https://stackoverflow.com/questions/3624226/encoding-problem-in-app-engine-when-submitting-multipart-form-data-forms)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:04:56.720

[webob 1.2.3](http://pypi.python.org/pypi/WebOb/1.2.3)已解决此问题，将在下一个 App Engine 版本中提供：1.7.4

同时，您可以将 webob 1.2.3 与您的应用程序一起部署，方法是将`webob`其发布 tarball 中包含的子目录复制到您的应用程序目录。

# php - Opencart 仅显示子类别

> ID：13371306
> 
> 赞同：0
> 
> 时间：2012-11-14T00:33:50.387
> 
> 标签：php, opencart

我正在使用 Opencart 1.4.9.3 并为类别安装了左侧模块。

我有2个问题，希望有人能帮助解决。

1.  我只想在搜索页面上显示类别左侧模块
2.  我只想显示相关的孩子类别（搜索页面上没有父母）

我有默认的类别代码（没有改变），并尝试了一些事情，比如改变一些 category_id 设置，但没有任何效果。它要么删除所有类别，要么显示所有类别。

我基本上希望类别模块像细化搜索模块一样运行。我还查看了要购买的模块，但找不到任何我需要的工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:31:21.807

要在除搜索页面之外的所有页面上隐藏 mod，请尝试在新行`/catalog/controller/module/category.php`之后将其添加到文件中`function index()`

```
if(empty($this->request->get['route']) || $this->request->get['route'] != 'product/search') {
    return false;
} 
```

# java - java - making object in nested classes case

> ID：13371319
> 
> 赞同：2
> 
> 时间：2012-11-14T00:34:43.963
> 
> 标签：java, class, nested

I've looked all around and it seems I have the proper syntax:

```
QueueOfChars queue = new QueueOfChars();
QueueOfChars.QueueOfCharsNode charNode = queue.new QueueOfCharsNode(); 
```

However I get a compiling error with the charNode object I try to create

> Driver3.java:22: error: constructor QueueOfCharsNode in class
> QueueOfChars.QueueOfCharsNode cannot be applied to given types;
> QueueOfChars.QueueOfCharsNode charNode = queue.new QueueOfCharsNode();
> 
> required: char
> found: no arguments
> reason: actual and formal argument lists differ in length
> 1 error

It's getting this error because I have a QueueOfCharsNode(char ch)

```
public class QueueOfChars{

      public class QueueOfCharsNode{
         QueueOfCharsNode next;
         QueueOfCharsNode prev;
         char c;

         public QueueOfCharsNode(char ch){ //line causing the error
            c = ch; 
            next = prev = null;
         } 
```

How do I get it to just read the "public class QueueOfCharsNode" line when I'm making the object for it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:36:27.517

您缺少一个无参数构造函数。

您需要一个构造函数声明，如下所示：

```
public QueueOfCharsNode() { } 
```

在你的`QueueOfCharsNode`课上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:37:45.697

```
QueueOfChars.QueueOfCharsNode charNode = queue.new QueueOfCharsNode(); 
```

您的内部类 QueueOfCharsNode 在其构造函数中需要 char 作为参数。尝试

```
QueueOfChars.QueueOfCharsNode charNode = queue.new QueueOfCharsNode('c');//some character that you wanna pass 
```

或在您的内部类中创建一个无参数构造函数，例如。

```
public UueueOfCharsNode() {

}

QueueOfChars.QueueOfCharsNode charNode = queue.new QueueOfCharsNode(); 
```

在这种情况下可以工作

# c# - 从 C# 类库生成文档

> ID：13371321
> 
> 赞同：4
> 
> 时间：2012-11-14T00:34:47.303
> 
> 标签：c#, documentation, documentation-generation

我开发了一个包含许多项目的 C# 类库。我将其用作跨多个不同项目的通用库。

许多不同的开发人员最近加入了该团队，他们不熟悉该库，他们不确定其中包含什么。在 ghostdoc 的帮助下，我对它进行了很好的评论。

是否可以使用库的任何工具自动生成文档？我想针对它运行一个工具，它会为我生成文档，我可以让开发人员知道要阅读。我认为这样的工具会根据评论生成文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T00:39:54.067

我建议使用[Sandcasle Help File Builder](https://github.com/EWSoftware/SHFB)从源代码生成文档。您将需要查看[XML 文档注释](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)，因为生成的文档的质量和稳健性与您使用的 XML 注释的丰富性直接相关。

SHFB 可以生成 HTML 和/或编译的帮助文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T00:39:39.130

如果您使用的是 Visual Studio，请转到项目的属性，选择构建，然后在输出下勾选 XML 文档文件复选框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-25T19:43:09.853

我最近制作了一个简单易用的库，可以从 C# 代码生成 markdown 文档。所需要的只是一个类库 dll 文件。
如果您想尝试一下，[这里有一个链接](https://github.com/CBinet/AutoDocumentation "关联")，说明如何开始使用它，并附有生成文档的示例。

更多信息：[https ://www.nuget.org/packages/BetaSoftware.AutoDocumentation](https://www.nuget.org/packages/BetaSoftware.AutoDocumentation)

# ios - 核心数据或钥匙串问题

> ID：13371323
> 
> 赞同：1
> 
> 时间：2012-11-14T00:35:00.057
> 
> 标签：ios, core-data, app-store, keychain

我有一个应用程序，它使用核心数据来存储一些信息，并使用钥匙串来存储密码和其他关键信息。

我最近对应用程序进行了更新，对核心数据或钥匙串功能没有任何影响。这在我的测试中运行良好（使用临时/企业配置文件）：该应用程序将从以前的版本更新，并且一切都会顺利运行。在通过应用商店提交（并获得批准）并更新旧版本后，我遇到了两个问题之一：数据库已损坏（或无法访问）或钥匙串无法访问。

有没有人有类似的案例？某些东西（核心数据或钥匙串）在测试（包括测试更新）中运行良好，但在提交到应用商店后突然停止运行？

我也怀疑这可能与 iOS6 / 6.0.1 有关。

# javascript - Meteor Session 和浏览器刷新

> ID：13371324
> 
> 赞同：27
> 
> 时间：2012-11-14T00:35:02.937
> 
> 标签：javascript, session, meteor

页面刷新时 Meteor 会话是否会重置？

出于某种原因，我认为他们没有这样做，但似乎他们这样做了。有没有办法让他们坚持下去？

如果不是，那么最好的解决方案是什么？

我想允许相同的数据显示用户是否刷新（此数据特定于用户），即使他们尚未注册。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T05:54:15.667

实际上，您可以做的是创建 Session 的“子类”，在调用 set() 时将值存储在 Amplify 的存储中。您将自动继承 Session 的所有反应属性。这是代码，它对我有用：

```
SessionAmplify = _.extend({}, Session, {
  keys: _.object(_.map(amplify.store(), function(value, key) {
    return [key, JSON.stringify(value)]
  })),
  set: function (key, value) {
    Session.set.apply(this, arguments);
    amplify.store(key, value);
  },
}); 
```

只需将所有 Session.set/get 调用替换为 SessionAmplify.set/get 调用即可。调用 set() 时，会调用父 Session 方法，以及 amplify.store()。当“子类”第一次创建时，它会在其键中加载 amplify 存储中的所有内容，以便可以使用 get() 立即检索它们。

您可以在此处测试排行榜示例的工作变体：[https ://github.com/sebastienbarre/meteor-leaderboard](https://github.com/sebastienbarre/meteor-leaderboard)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-30T21:15:46.947

这是一个老问题，但它是搜索“流星会话管理器”的第二次点击，所以我认为添加包 u2622:persistent-session 完美地解决了这个问题很重要。

来自文档： [https ://atmospherejs.com/u2622/persistent-session](https://atmospherejs.com/u2622/persistent-session)

> 安装
> 
> 流星添加u2622：持久会话
> 
> 而已！现在，您可以使用 Session.setPersistent 设置刷新后将保存的会话变量。
> 
> 如果您愿意，您也可以让 Session.set 执行此操作。请参阅下面的选项部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-23T00:31:05.600

我刚刚为 Atmosphere 创建了[UserSession](https://github.com/BenjaminRH/meteor-user-session)包，它基本上是一个基于用户的持久化`Session`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T18:52:00.987

所以我认为最好的方法是使用 amplifyJS 包。

这是某人的要点，显示了他们如何使用它： [https ://gist.github.com/2865146](https://gist.github.com/2865146)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T09:07:32.823

这`Session`是一个全局键值存储，一个反应式的。

[http://docs.meteor.com/#session](http://docs.meteor.com/#session)

> Session 在客户端上提供了一个全局对象，您可以使用它来存储任意一组键值对。使用它来存储列表中当前选定项目之类的内容。
> 
> Session 的特别之处在于它是响应式的。如果您从模板内部调用 Session.get("currentList")，则每当调用 Session.set("currentList", x) 时，模板将自动重新呈现。

如果您必须在客户端中保留某些内容，`localstorage`如果您关心较旧的浏览器，则可以使用浏览器或 cookie。

# ruby-on-rails - Rails 关联模型未在数据库中更新

> ID：13371327
> 
> 赞同：3
> 
> 时间：2012-11-14T00:35:44.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试更新我的关联模型，但它没有更新到数据库，我不确定接下来要尝试什么。

模型

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation,
                  :remember_me, :username, :login, :first_name,
                  :last_name, :home_phone, :cell_phone,
                  :work_phone, :birthday, :home_address,
                  :work_address, :position, :company, :user_details

  has_one :user_details, :dependent => :destroy
  accepts_nested_attributes_for :user_details 
end

class UserDetails < ActiveRecord::Base
  belongs_to :user  
  attr_accessible :home_phone, :position  
end 
```

控制器

```
# PUT /contacts/1/edit
    # actually updates the users data
    def update_user
      @userProfile = User.find(params[:id])

      respond_to do |format|
        if @userProfile.update_attributes(params[:user]) 
          format.html {
            flash[:success] = "Information updated successfully"
            render :edit
          }
        else 
          format.html {
            flash[:error] = resource.errors.full_messages
            render :edit
          }
        end
      end
    end 
```

看法

```
<%= form_for(@userProfile, :url => {:controller => "my_devise/contacts", :action => "update_user"}, :html => {:class => "form grid_6"}, :method => :put ) do |f| %>
  <%= f.label :username, "Username" %>
    <%= f.text_field :username, :required => "required" %>  
    <%= f.fields_for :user_details do |d| %>
      <%= d.label :home_phone, "Home Phone" %>
      <%= d.text_field :home_phone %>
    <% end %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:37:58.790

你`attr_accessible`应该接受`user_details_attributes`，而不仅仅是`user_details`。

# apache - 301 将站点上的每个页面重定向到新的域主页

> ID：13371333
> 
> 赞同：0
> 
> 时间：2012-11-14T00:36:53.373
> 
> 标签：apache, .htaccess, redirect

我知道还有一百万个这样的帖子，但这个有点具体。

基本上我有一个旧网站已经死了，只是让它重新活了起来，谷歌里还有一些旧链接。我想在 htaccess 中做一些事情，将 302 重定向所有页面和站点到我的新域。例如我需要：

www.oldsite.com > www.newsite.co.uk

oldsite.com > www.newsite.co.uk

www.oldsite.com/?color=red > www.newsite.co.uk

www.oldsite.com/?color=red&size=large > www.newsite.co.uk

www.oldsite.com/page > www.newsite.co.uk

www.oldsite.com/something.html > www.newsite.co.uk

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:40:50.070

你是对的，一个 .htaccess 文件就是答案。

```
RewriteEngine on
RewriteRule .* http://www.newsite.co.uk/? [R=301,L] 
```

由于您想重定向所有内容，因此`RewriteCond`不需要。相信如果你想让谷歌遵循这些，你会想要它 301'ed

编辑：已添加？到要重定向到的域的末尾。这将删除当前的查询字符串。

# mysql - 根据第一个查询的结果数组合查询

> ID：13371336
> 
> 赞同：0
> 
> 时间：2012-11-14T00:37:43.007
> 
> 标签：mysql

我正在尝试根据第一个查询中返回的行数组合 2 个 MySQL 查询，如下所示：

```
mysql_query("SELECT * FROM `new_userprofile_combined`
WHERE `upg_featured` >= NOW() LIMIT 20
IF mysql_num_rows(1st query) < 20
(SELECT * FROM `new_userprofile_combined`
WHERE `upg_featured` < NOW() ORDER BY rand()
LIMIT (20-mysql_num_rows(1st query))) "); 
```

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:39:00.200

```
mysql_num_rows(); 
```

是 PHP 函数，不是 SQL 函数，所以不能在查询中调用它，必须在查询后检查条件，然后再运行另一个查询。

# c - 用于检测混合 C 和 Fortran 代码中的段错误的 GUI 工具

> ID：13371342
> 
> 赞同：0
> 
> 时间：2012-11-14T00:38:11.497
> 
> 标签：c, segmentation-fault, fortran

我正在使用调用旧版 Fortran 代码子例程的 C 代码函数。Fortran 代码子例程还调用其他 C 代码函数。我正在使用的代码不是最漂亮的，但是从头开始重新编写所有内容是相当具有挑战性的。

不幸的是，程序中的某个地方发生了段错误，我想知道是否有一个带有漂亮 GUI 的软件工具可以用来准确地查明 C 和 Fortran 代码中的位置。

虽然我正在使用 Open Watcom 编译器在 Windows 上开发软件程序来编译 C 和 Fortran 代码，但如果有可以使用的 FOSS 工具，我愿意将代码移动到我的 GNU/Linux 机器上。

或者，我想知道英特尔 Composer XE 套件是否可用于直观地查明分段违规的位置。英特尔 Composer XE 套件包括 C 和 Fortran 编译器。

由于我正在使用 C 和 Fortran 代码，因此我需要某种指示代码中发生段错误的位置。我不是特别想使用对`printf()`函数的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:48:34.410

这不是一个 GUI，但[valgrind](http://valgrind.org/)是一个出色的内存调试工具。它不仅会告诉您段错误在哪一行（您应该可以使用任何调试器进行此操作），而且还会告诉您每次访问未初始化或未分配的内存或出现各种其他错误时。不过，您确实需要移植到 Linux 才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T02:35:00.180

与 Windows 上的英特尔 Visual Fortran 产品一起提供的 Visual Studio 集成允许对混合的 Fortran 和 C 代码进行 GUI 调试。

在 Linux 上，英特尔将他们自己的基于 GUI 的调试环境 (idb) 与他们的编译器产品一起发布。

# html - 如何在按钮内定位图像？

> ID：13371344
> 
> 赞同：3
> 
> 时间：2012-11-14T00:38:30.450
> 
> 标签：html, css, button

我有这个按钮，我想在左边有一个图像，它应该有一个文本

我可以在按钮内随意放置。我尝试了几种方法，但我无法定位

我想要的文字和图像。

```
 <button class ="buttn"> Click Here <img src ="./logo.png"> </button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:43:51.717

```
.buttn{
    background:transparent url(/logo.png) no-repeat left;
    border:0;
    padding-left: xxxpx; // this is how wide the image is plus any additional padding
}

<button class="buttn">Click Here</button> 
```

该路径应替换为正确的路径。基本上，将图像设置为背景，删除任何默认按钮样式，然后使用填充，直到您按预期定位文本。

倍数：

```
.buttn{
    background-image:url(/logo.png), url(/gradient.png);
    background-repeat:no-repeat, repeat-x;
    background-position:center left, center left;
} 
```

顺便说一句，您不需要使用图像作为渐变。只是表明您可以拥有多个背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:46:22.137

我从来没有在按钮中放置图像。我猜它没有显示出来。在这种情况下，将按钮包装在一个 div 中，向左浮动（或与按钮相同的 demensons）和相对位置。使用绝对定位将图像定位在您想要的位置。使用按钮中的填充来按您想要的方式推送文本。如果填充不起作用，则将文本包装在 span 中并将其 AP 到。

如果它适用于所有浏览器，Kai 的答案会更干净。

# windows-phone-7 - WP7 - Visual Studio 2012 抛出 3 NullReferenceExceptions

> ID：13371346
> 
> 赞同：0
> 
> 时间：2012-11-14T00:39:08.633
> 
> 标签：windows-phone-7, visual-studio-2012, portable-class-library, xaml-designer

**在开发 WP7 应用程序（从 VS 2010 解决方案迁移到 VS2012 解决方案）时，设计师在迁移后不断崩溃，并出现以下细节：**

```
>System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous(Action action, Int32 targetApartmentId, WaitHandle aborted, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1 targetObject, Action action, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CreateDesignerImpl(IHostSourceItem item, IHostTextEditor editor, RemoteCancellationToken remoteCancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner>b__11(RemoteCancellationToken remoteToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CallWithCancellation[TResult](CancellationToken cancelToken, Func`2 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.CreateDesignerViewInfo(CancellationToken cancelToken)

> System.NullReferenceException
Object reference not set to an instance of an object.

> Server stack trace: 
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalIn(Action action, Int32 targetApartmentId)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn(IRemoteObject targetObject, Action action)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn[TResult](IRemoteObject targetObject, Func`1 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor, IRemoteCancellationToken remoteToken)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

> Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor, IRemoteCancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass8.<CreateDesignerImpl>b__6(IRemoteDesignerService d)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass4`2.<MarshalOut>b__3()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

> System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Expression.Platform.PlatformService.PlatformEntry.get_PlatformCreator()
   at Microsoft.Expression.Platform.PlatformService.GetPlatformCreator(String frameworkSpec)
   at Microsoft.Expression.Platform.PlatformService.IsCompatibleFramework(FrameworkName hostFramework, FrameworkName guestFramework)
   at Microsoft.Expression.DesignSurface.Project.ProjectContextManager.GetProjectContext(IHostProject project, IPlatform platform, Boolean create)
   at Microsoft.Expression.DesignSurface.Project.ProjectContextManager.GetSourceItemContext(IHostSourceItem sourceItem)
   at Microsoft.Expression.DesignSurface.DesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.<>c__DisplayClass10.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner>b__f(CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.CallWithCancellation[TResult](IRemoteCancellationToken remoteToken, Func`2 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.<>c__DisplayClass10.<Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner>b__e()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass16`1.<MarshalIn>b__15()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker() 
```

**我*认为*它在启用 Hyper-V 后开始发生。该应用程序运行良好，并且可以在 Blend 中很好地设计。**

我正在使用一些功能的很多“预发布”版本。该项目引用了解决方案中的另一个项目（可移植类库），其中包含 Mvvm Light 的预发布可移植版本，以及 Silverlight 异步库 (Microsoft.bcl.async) 和 PCL Contrib。

我将我的 VS 2012 副本与 VS 2010 “并行”安装，并且没有从 beta 版本升级它。

无论如何，还有其他人遇到过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:40:07.550

您之前是否安装了预发布 SDK？如果是这样，听起来您遇到了这里描述的问题：http: [//social.msdn.microsoft.com/Forums/en-US/wptools/thread/7398ad5e-c2fc-40a8-85e7-37e6a6cca834](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/7398ad5e-c2fc-40a8-85e7-37e6a6cca834)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:51:12.990

Visual Studio 2012 Update 1 修复了这个问题。按回答结束。如果您仍然遇到此问题，请确保更新 VS。如果在那之后它仍然不起作用，那么不幸的是，您的问题与我的问题不同。

这是为语法编辑的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:51:29.640

我在 2012 的早期版本中遇到了类似的问题，在一种情况下，[这些](http://blendinsider.com/xaml/known-issue-xaml-designer-in-visual-studio-11-beta-crashes-on-launch-2012-03-07/)说明有所帮助。

# javascript - jQuery 计算

> ID：13371347
> 
> 赞同：0
> 
> 时间：2012-11-14T00:39:13.403
> 
> 标签：javascript, jquery, jquery-ui

[我从小提琴http://jsfiddle.net/QmTNZ/2/](http://jsfiddle.net/QmTNZ/2/)运行与此脚本类似的脚本

我试图修改它以使用我的表。

这是产品页面上表格的链接

[http://styleso1.nextmp.net/dev/shop/safari-pu-sleeve-jacket.html](http://styleso1.nextmp.net/dev/shop/safari-pu-sleeve-jacket.html)

我需要它来计算数量（输入框，第 4 列）X 单价（第 5 列）并在第 6 列中显示总和

我将如何修改 JS 来做到这一点？

这是我为 JS 准备的

```
$(function(){
function ca(){
    var $overall = 0;

    $("tr.sum").each(function() {

        var $qnt = $(this).find(".qty");
        var $price = $(this).find("td").eq(1);

        console.log($qnt + " | " + $price);

        var sum = parseFloat($price.text()) * parseFloat($qnt.val());

        $(this).find(".a-center1").text(sum);

        $overall += sum;

    });

    $("#total").text($overall);
}

$(function() {

    ca();
    $('input.qty').bind('change keyup',function(){ca();});

}); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:44:36.940

试试这个

```
 $("tr.sum").each(function() {

        var $qnt = $(this).find(".qty");
        var $price = $(this).find("td:eq(4)").find('.price');

        console.log($qnt + " | " + $price);
        var pri = $price.text();
            pri = pri.replace('$', '');
        var sum = parseFloat(pri) * parseFloat($qnt.val());

        $(this).find("td").eq(5).text('$' + sum);

        $overall += sum;

    });
    $("#total").text('$' +$overall); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/Jk976/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:51:01.593

您可以通过做一些简单的事情来保存一些 DOM 搜索和文本解析，例如将单价作为数据属性添加到行并使用 jQuery`data()`方法检索它

HTML

```
<tr class="sum" data-unit_price="10.00"> 
```

JS

```
function ca(){
    var $overall = 0;

    $("tr.sum").each(function() {
         var $row=$(this);
        var $qnt = $(this).find(".qty");
        var cost = $row.data('unit_price');       

        var sum = cost * parseFloat($qnt.val());

        $(this).find("td").eq(5).text('$' +sum);

        $overall += sum;

    });

    $("#total").text('$' +$overall);
}

$(function() {

    ca();
    $('input.qty').bind('change keyup', ca);

}); 
```

演示：http: [//jsfiddle.net/Jk976/3/](http://jsfiddle.net/Jk976/3/)

# php - javascript文件未加载或其他问题？

> ID：13371352
> 
> 赞同：1
> 
> 时间：2012-11-14T00:39:43.660
> 
> 标签：php, javascript, jquery, knockout.js

我在运行基本的 knockout.js 脚本时遇到了一些麻烦，我不确定是文件加载不正确还是另一个问题。

本质上，我只是想获得一个在 localhost 上工作的教程片段。我正在使用调用函数“名称”的 PHP。它应该做的就是显示 javascript 文件中列出的名称。教程可以在[这里找到](http://learn.knockoutjs.com/#/?tutorial=intro)

```
//on name_test.php
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://github.com/downloads/SteveSanderson/knockout/knockout-2.0.0.js"></script>
<script src="name_test.js"></script>  //name_test.js is in the folder with all of my other files
</head>

//bunch of irrelevant code omitted

<?
function names(){
    ?>
    <p>First name: <strong data-bind="text: firstName"></strong></p>
    <p>Last name: <strong data-bind="text: lastName"></strong></p>
    <?
}
?> 
```

这是javascript文件

```
// name_test.js
function AppViewModel() {
  this.firstName = "first name here";
  this.lastName = "last name here";
}

ko.applyBindings(new AppViewModel()); 
```

现在当页面加载时我看到的是

```
First name:
Last name: 
```

我在这里缺少什么吗？javascript 文件与我的所有其他文件位于目录中。我也尝试了整个路径（在 xampp 中），但它仍然没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:48:28.080

`<script>`标签在解析时执行。在您的`applyBindings()`函数运行时，DOM 尚未加载。您需要在 DOM 加载后（在脚本底部）运行它，或者通过运行它`window.onload`或类似 jQuery的方式运行它`$(document).ready()`。

```
// name_test.js
function AppViewModel() {
  this.firstName = "first name here";
  this.lastName = "last name here";
}

// Run after the window has loaded    
window.onload = function() {
  ko.applyBindings(new AppViewModel())
};

// Or if you are using jQuery
$(document).ready(function() {
  ko.applyBindings(new AppViewModel())
}); 
```

这记录在[Knockout observables 文档](http://knockoutjs.com/documentation/observables.html)中。

最后，您也可以将 移动`<script src='name_test.js></script>`到文档的末尾，它会在解析时加载，也就是在解析完 DOM 的其余部分之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:12:05.830

有趣的是，对我来说它工作得很好：

HTML 文件：

*   将脚本标签设置为底部
*   删除了 PHP 代码

所以我们有：

```
<p>First name: <strong data-bind="text: firstName"></strong></p>
<p>Last name: <strong data-bind="text: lastName"></strong></p>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://github.com/downloads/SteveSanderson/knockout/knockout-2.0.0.js">   </script>
<script src="name_test.js"></script> 
```

JS 文件（未更改）：

```
function AppViewModel() {
  this.firstName = "first name here";
  this.lastName = "last name here";
}

ko.applyBindings(new AppViewModel()); 
```

当我使用 PHP 版本时它也可以工作（当然我在声明它之后调用 names() 函数，我假设你在上面的示例中忘记了这一点？）

```
<?php
function names(){
    ?>
    <p>First name: <strong data-bind="text: firstName"></strong></p>
    <p>Last name: <strong data-bind="text: lastName"></strong></p>
    <?php
}
names();
?>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://github.com/downloads/SteveSanderson/knockout/knockout-2.0.0.js"></script>
<script src="name_test.js"></script> 
```

很抱歉，我无法为您提供更多帮助，但它对我有用。而且我没有使用任何库，只是您的脚本标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:42:20.143

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

你好，你错过了`http://`

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

# macos - 在安装了 POW/Powify 的 Mac OS X 上运行 Apache 时出现奇怪的 127.0.0.1 和 localhost 分辨率

> ID：13371359
> 
> 赞同：0
> 
> 时间：2012-11-14T00:40:24.927
> 
> 标签：macos, apache, httpd.conf, hosts, rack-pow

我无法弄清楚为什么 http:// localhost 会解析而 http:// 127.0.0.1 不会解析，当我运行 apache 时，没有任何意义。而在运行 POW 时，两者都会解决。

我已经在 hosts 文件中设置了正确的映射，并在 httpd-vhosts.conf 文件中创建了 VirtualHost 条目，其中定义了我已经映射到 127.0.0.1 的 ServerName。VirtualHost 条目用于反向代理设置。

每次我运行 localhost 时，VirtualHost 条目都可以工作，但任何时候我尝试访问 127.0.0.1 或映射域时，我都会不走运。在我的情况下，由于项目设置 http://localhost 不足以运行开发环境，我需要在 hosts 文件中映射条目才能运行。

我还将 POW 用于我的 rails 和 sinatra 应用程序。以前遇到过 POW 问题，为了启动和关闭 POW 服务器，我安装了 gem Powify。非常方便，我想，并假设当我运行“powify server stop”时，它至少会处理本地主机解析的事情。

那么如何处理呢？我最终卸载了 POW。所以这个问题的简单解决方案是完全卸载 POW，显然由于配置 POW 设置我最终处理了这个问题。

由于缺乏实际发生的幕后知识，如果有人能指出内部运作，我将不胜感激。我阅读了一些关于如何与 Apache 一起设置 POW 的文章，但如果有人能解释为什么会发生这种行为，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:24:56.213

最终关于 powify 没有删除防火墙异常，只是停止了 pow 实例以释放一些内存和处理能力。

仍然需要卸载 pow 才能删除防火墙规则。这样您就可以正确使用apache。

# html - 更改父元素的位置可防止 Firefox 中的子元素 CSS3 过渡

> ID：13371360
> 
> 赞同：4
> 
> 时间：2012-11-14T00:40:32.183
> 
> 标签：html, firefox, css, transitions

在 Webkit 中，以下小提琴按预期工作。也就是说，#navigation 的左内边距从 0 到 100px 正确过渡。

在 Firefox 中，相同的代码以某种方式阻止了转换的发生。

[http://jsfiddle.net/threehz/JEMN6/27/](http://jsfiddle.net/threehz/JEMN6/27/)

我的CSS：

```
#navigation {
  background: #ccc;
  -webkit-transition: padding-left 0.125s ease;
  -moz-transition: padding-left 0.125s ease;
  transition: padding-left 0.125s ease;
  margin: 0;
  padding-left: 0;
  width: 100%;
}

.fixed #navigation {
  padding-left: 100px;
}

.fixed #page-navigation {
   position: fixed; // removing this results in #navigation transition working properly in firefox
   height: auto;
   border-top: 1px solid #000;
   width: 100%;
} 
```

似乎与父元素的位置变化有关。如上所述，如果我从父元素中删除 position:fixed，则转换在 Firefox 中有效：

[http://jsfiddle.net/threehz/JEMN6/28/](http://jsfiddle.net/threehz/JEMN6/28/)

问题是，对于我想要完成的事情，标题必须变得固定，并且子填充属性必须转换，所以简单地删除 position: fixed 不是一个选项。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:53:30.393

如果您从 Firebug/DevTools 切换它，转换就会起作用。另一方面：

*   对 li 项使用`transform: translate(100px)`or `position: absolute`+`left: 100px`
*   使用转换延迟

不工作。转换事件甚至没有被触发：/（[http://jsfiddle.net/JEMN6/25/](http://jsfiddle.net/JEMN6/25/)）

似乎 FF 无法同时重绘`#page-navigation`容器（因为`position: fixed`将其从文档流中取出）和`#navigation child`，因此转换事件被中止。

`#fixed`正如 Alex Morales 建议的那样，您可以使用动画，但在删除课程时您需要相反的动画来获得过渡。

通过 JavaScript 引入最小延迟也是一种选择：

```
$('#toggle').click('on', function() {
  $('body').toggleClass('fixed');

  setTimeout(function () {
    $('#navigation').toggleClass('get-padding')
  }, 20);
}); 
```

[http://jsfiddle.net/JEMN6/26/](http://jsfiddle.net/JEMN6/26/)

不过，这不是一个理想的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:08:12.000

This looks like [https://bugzilla.mozilla.org/show_bug.cgi?id=625289](https://bugzilla.mozilla.org/show_bug.cgi?id=625289) to me: the parent is having its CSS boxes reconstructed, which loses the old computed style on the child.

# javascript - 某些字段更改时流星不会重新渲染

> ID：13371364
> 
> 赞同：5
> 
> 时间：2012-11-14T00:40:44.890
> 
> 标签：javascript, meteor

Meteor 在文档更改时重新渲染视图。

```
Template.story.data = function() {
  var storyID = Session.get('storyID');
  var story = Stories.findOne({
    _id: storyID
  })

  if (!story)
    return;

  return story;
}; 
```

这是故事模板的模板助手，从故事文档中获取故事。

当诸如更改之类的字段时，`story.title`我希望模板重新呈现。但是当诸如`story.viewingusers`更改之类的字段时，我不想重新呈现模板。无论如何要做到这一点？

通过将发布功能设置为不发布这些字段来解决触发问题的具体问题。但是，该解决方案不适用于每个用例，需要通用解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T00:50:52.997

您正在寻找的是[`#constant`](http://docs.meteor.com/#constant)模板助手。

在您的情况下，我要做的是将弹出框标记包装在一个常量块中，然后在`story.rendered`函数中手动更新该块中的内容。

所以是这样的：

故事.html：

```
<template name="story">
    ...
    {{#constant}}
        <!-- Popover markup here -->
    {{/constant}}
    ...
</template> 
```

客户端.js：

```
Template.story.rendered = function(){
    //Update logic here
} 
```

# http-headers - 是否有任何浏览器支持以分块编码响应发送的预告片？

> ID：13371367
> 
> 赞同：31
> 
> 时间：2012-11-14T00:40:52.813
> 
> 标签：http-headers, sample, chunked-encoding, http-1.1, trailing

[HTTP/1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.6.1)指定发送的响应`Transfer-Encoding: chunked`可以包含可选的尾部（即通常作为头部发送的内容，但由于某种原因不能在内容之前计算，因此它们可以附加到末尾），例如：

**要求：**

```
GET /trailers.html HTTP/1.1
TE: chunked, trailers 
```

**回复：**

```
HTTP/1.1 200 OK
Transfer-Encoding: chunked
Trailer: My-Test-Trailer
D\r\n
All your base\r\n
B\r\n;
 are belong\r\n
6\r\n
 to us\r\n
0\r\n
My-Test-Trailer: something\r\n
\r\n 
```

此请求在`TE`标头中指定它期待`chunked`响应，并将`trailers`在最终块之后寻找。

响应在`Trailer`标题中指定它将发送的预告片列表（在这种情况下，只有一个`My-Test-Trailer`：）

每个块被发送为：

*   十六进制的块大小（`D`= 13），后跟一个`CRLF`
*   块数据 ( `All your base`)，后跟一个`CRLF`

零大小的块 ( `0\r\n`) 表示正文的结尾。

然后指定预告片 ( `My-Test-Trailer: something\r\n`)，然后是 final `CRLF`。

现在，从我目前所读的所有内容来看，很少（如果有的话）使用预告片。大多数关于预告片[的](https://stackoverflow.com/questions/7851645/how-do-i-send-http-trailers-footers-in-a-chunked-response-from-within-a-java-ser#comment9577096_7851645)讨论通常以“但是你为什么要使用预告片？”开头。

抛开为什么的问题不谈，出于好奇，我一直在尝试模拟使用预告片的 HTTP 请求/响应交换；但到目前为止，我还不能让它工作，而且我不确定我生成的响应是否有问题，或者（正如一些人建议的那样）根本没有客户端在寻找尾随标头.

我尝试过的客户端包括：curl、wfetch、Chrome + jQuery。

在所有情况下，客户端都会接收并正确重建分块响应（`All your base are belong to us`）；我可以在`Trailer: My-Test-Trailer`正在发送的响应标头中看到；但我`My-Test-Trailier: something`在响应标头或任何地方都没有看到返回。在收到整个响应并关闭连接之后，不清楚这样的尾随标头是否应该作为正常的响应标头出现在客户端中？

有趣的是，[curl 更改日志](http://curl.haxx.se/changes.html)似乎表明 curl*确实*支持可选的预告片，并且 curl 会将它找到的任何预告片处理[到正常的标头流中](http://permalink.gmane.org/gmane.comp.web.curl.cvs/4787)。

所以有人知道吗：

*   我可以 ping 的有效 URL，它在分块响应中发送预告片？（以便我可以确认是否只是我的测试响应不起作用）；和
*   已知哪些客户端支持（和访问/显示）服务器发送的预告片？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-08-16T00:16:46.693

没有常见的浏览器支持 HTTP/1.1 预告片。[查看browserscope](http://www.browserscope.org/?category=network&v=top)的“网络”选项卡中的“预告片中的标题”列。

*   Chrome：不，也不会修复（[错误](https://bugs.chromium.org/p/chromium/issues/detail?id=33325)）。支持 H/2 拖车（[错误](https://bugs.chromium.org/p/chromium/issues/detail?id=422958)）。
*   Firefox：没有，而且我在 bugzilla 中没有看到它的票证。似乎支持 H/2。
*   即：没有
*   边缘：没有
*   野生动物园：没有
*   Opera：仅限旧版本（v10 - 12，在 14 中删除）

正如您所发现的，许多非浏览器客户端都支持它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-10T04:13:40.047

自提出这个问题以来已经超过 5 年了，我现在可以自己明确地回答它。

Mozilla 刚刚宣布他们将支持新`Server-Timing`字段作为 HTTP 尾随标头（他们首次支持预告片）。

[https://bugzilla.mozilla.org/show_bug.cgi?id=1413999](https://bugzilla.mozilla.org/show_bug.cgi?id=1413999)

然而，更重要的是，他们确认它将被列入白名单，因此这`Server-Timing`是唯一的支持值（强调我的）：

> Server-Timing 是 HTTP 预告片，而不是标头。:mcmanus 告诉我**我们目前正在解析预告片，但随后默默地将它们丢弃。我们一般不想改变这种行为（我们不想鼓励预告片），所以我们想要将 Server-Timing 预告片列入白名单**，将其存储在某个地方（可能现在即使只是一个 mServerTiming 标头也可以工作，因为它是我们支持的唯一预告片），然后通过一些新的 channel.getTrailers() 调用使其可用。

因此，我想这可以一劳永逸地证实：Moz 不支持尾随标头（并且永远不可能是一般意义上的），并且可能所有其他浏览器供应商都采取相同的立场。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-20T03:56:48.533

自此[提交](https://github.com/oblac/jodd/commit/5a59531ccda6858bf4079320fc075659de14b20c)以来，Jodd [HTTP Java 客户端](http://jodd.org/doc/http.html)支持尾部标头。

在第一个问题上，我还没有找到任何使用它们的实时响应；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T10:44:41.927

就在最近，据[caniuse.com](https://caniuse.com/mdn-http_headers_trailer)称，大多数主要浏览器提供商现在都支持[`Trailer`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Trailer)最新版本的响应标头（例如 Firefox-88、Safari-14.1、Chrome-88 等）。

但是，这似乎只是因为他们支持[Server-Timing](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing)（可以使用另一个答案中提到的预告片），并且目前似乎没有从浏览器 Javascript 访问 Trailer 标头的通用方法 - 目前是[Fetch API](https://github.com/whatwg/fetch/issues/981)的一个未解决问题，Chrome 中预告片的错误请求[被标记为 wontfix](https://bugs.chromium.org/p/chromium/issues/detail?id=691599)。

# html - 居中位置：固定在移动浏览器上缩放不正确

> ID：13371372
> 
> 赞同：0
> 
> 时间：2012-11-14T00:41:18.140
> 
> 标签：html, css

我在页面顶部有一个徽标，该徽标必须相对于文本居中并固定在视口顶部，如下例所示： http: [//dev.markbrouwers.nl/test.html](http://dev.markbrouwers.nl/test.html)

```
<h1 style="width: 200px; height: 100px; margin: 0 auto;">
    <img src="images/logoforeground.png" style="position: fixed; display: block;" alt="Page title">
</h1>
<div style="width: 800px; margin: 0 auto;">
    <p>content</p>
</div> 
```

它可以在 pc 上完美运行。然而，在移动浏览器上，缩放时徽标开始偏离中心。我已经阅读了很多关于 iOS 上固定位置的内容（例如[this](http://davidbcalhoun.com/2011/new-mobile-safari-stuff-in-ios5-position-fixed-overflow-scroll-new-input-type-support-web-workers-ecmascript-5 "这个")），并且显然从 iOS 5 和 Android 2.2 开始它应该可以工作，认为它不会......它仍然会漂移......有谁知道如何制作移动设备webkit 的行为类似于 pc 浏览器？

[编辑]

我稍微编辑了html，h1现在在容器之外

我还在 iPhone 和 Windows 上做了截图。如您所见，当您在 iOS 上放大时，徽标会偏离视口。在 chrome 浏览器中，它位于视口的顶部中间。

**Safari/iOS5 截图：** ![在此处输入图像描述](../Images/36121d65d6aab63e42069fa860a5d966.png)

**Chrome/Win7 截图：** ![在此处输入图像描述](../Images/7f00dfb2b14a46286745441db7612f9b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:30:35.640

发生这种情况的原因是移动设备需要知道页面的宽度，即使您的页面宽度为 340px，例如您仍然会遇到此问题，这是因为您的 ZOOMING，而不是调整大小。

如果您希望用户的文本更大，最好的解决方案是如下所示：

两个按钮小/大

然后将这些按钮链接到一些 javascript，然后根据您的需要更改文本大小。

例如，当单击大时，您可能希望它变为 24px，而当他们单击小时，它变为 14px。

这是简单的javascript

# c# - 测试项目的不同 stylecop 规则

> ID：13371375
> 
> 赞同：3
> 
> 时间：2012-11-14T00:41:28.877
> 
> 标签：c#, testing, stylecop, code-inspection

我与 stylecop 一起工作，发现它非常有帮助。但是，我希望我的测试项目有一套与我的普通 c# 类库不同的规则。

这可能吗？

例如，我不希望我的方法在普通库中包含下划线，但在我的测试项目中可以。所以我的 IDE 应该提醒我在正常项目中违反规则，而不是在测试项目中。

接下来是我希望将类似的内容作为我的 msbuild 任务的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:45:47.703

StyleCop 可根据项目进行配置。右键单击一个测试项目，选择 StyleCop 设置，然后为您的测试项目禁用下划线规则。

然后，您可以将所有测试项目保存在子文件夹中，例如 test/（在磁盘上，而不是解决方案文件夹），然后将 Settings.StyleCop 文件从项目文件夹移动到 test/ 文件夹。现在您可以在所有测试项目之间共享一个设置文件。

# ant - 诊断为什么我的 Ant 的 Cobertura 输出处于调试模式

> ID：13371377
> 
> 赞同：0
> 
> 时间：2012-11-14T00:41:50.290
> 
> 标签：ant, log4j, cobertura

我已经设置了一个 Ant 脚本来使用 Cobertura 运行单元测试。出于某种原因，我从 Cobertura 获得了 log4j DEBUG 输出。我一直盯着这个几个小时，使用我能想到的所有诊断方法，我不明白为什么会这样。

我使用 SysInternals ProcessMonitor 检查我是否手动加载了“log4j.properties”或“log4j.xml”。没有找到。

我让 Ant 打开详细类加载，但我从未见过它加载“log4j.properties”或“log4j.xml”。这告诉我这没有传递给分叉进程，因为我知道“cobertura.jar”有一个“log4j.properties”，它具有以下内容：

```
# set default logging level and appender
log4j.rootCategory=WARN, console
#log4j.category.net.sourceforge.cobertura=WARN, console

#log4j.category.net.sourceforge.cobertura.check=DEBUG, console
#log4j.category.net.sourceforge.cobertura.coverage=DEBUG, file
#log4j.category.net.sourceforge.cobertura.coverage.CoverageDataFactory=INFO, file
#log4j.category.net.sourceforge.cobertura.coverage.SaveInstrumentationTimer=DEBUG, file
#log4j.category.net.sourceforge.cobertura.merge=DEGUG, console
#log4j.category.net.sourceforge.cobertura.reporting=DEBUG, file

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%-6p %M, %m%n

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=cobertura.log
log4j.appender.file.MaxFileSize=3000KB
log4j.appender.file.MaxBackupIndex=3
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d %-2p [%t] %c{3} - %m - (%F:%L) %n 
```

这里唯一不相关的问题是拼写错误的“DEGUG”，但已被注释掉。

我看不出这是怎么回事。我一直在询问 Cobertura 的一位维护者，他不明白为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:17:27.787

我想到了。我忘记了非常方便的“log4j.debug”属性，它在启用时会告诉您它在哪里找到了“log4j.xml”或“log4j.properties”文件。我在一个意外的 jar 文件中找到了前者，我现在已经对其进行了修补（它将默认级别设置为 DEBUG），现在默认情况下我没有得到调试输出。

# html - 我怎么放一个 在一个内 ?

> ID：13371386
> 
> 赞同：3
> 
> 时间：2012-11-14T00:42:21.163
> 
> 标签：html, image

我需要在 html 页面中的图像左侧放置一个段落。现在，文本在图像旁边，但段落本身在图像后面延伸到容器的左侧。我希望它们彼此并排，内联，段落中的文本像普通文本一样换行。

```
<div class="content-box">
            <h1>Welcome to Genesis of Robotics!</h1>
            <p>Unrelated text </p>
                <div id="holder">
                    <img id="problem-image" src="css/images/problem_image.jpg" width="500px" height="300px">
                    <p class="p">The Problem Text</p>
                </div>
            <img src="css/images/define.png" width="200px" height="200px">
            <img src="css/images/brainstorm.png" width="200px" height="200px">
        </div> 
```

CSS：

```
#drawing-image {border-radius: 15px; }
    .content-box h1{color:#fff; text-align: center; margin: auto; width: 630px;    background: url(css/images/paper.png); padding: 12px; border-radius: 15px;}
    .content-box p{padding-top: 40px; padding-bottom: 40px;}
    #holder {height: 0px; width: auto; height: auto; }
    #holder p { height: auto; width: 100px; }
    #holder img { margin: 15px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:24:18.307

这个怎么样？`#holder img { float:left; display:inline; padding-right:10px;} #holder p {display:inline;}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:46:06.797

段落总是在最后一个对象之后开始，下一个对象也将从该段落开始。

尝试`<img src="..."><span>Your text here</span>`标签，这将是内联渲染！

抱歉，今天凌晨 2:00 对我来说太晚了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T00:50:20.863

为段落分配高度和宽度，并添加图像宽度的左侧边距，将图像和段落向左浮动，您应该拥有所需的内容。

`#holder p { float:left;height: auto; width: 100px; margin-left:100px } #holder img { float:left;margin: 15px; }`

# android - 隐藏 ImageButton 背景时如何防止图标对齐更改？

> ID：13371389
> 
> 赞同：0
> 
> 时间：2012-11-14T00:42:38.413
> 
> 标签：android, xamarin.android, android-actionbar, imagebutton, android-spinner

我在应用程序的操作栏中有一个 ImageButton，我用它来模拟微调器，通过选择标题来更改视图（我使用 MonoDroid.ActionBar 作为起点 - [http://bit.ly/UBzI77](http://bit.ly/UBzI77)）。

![ImageButton-之前](../Images/29f3b140affc92621dc4bebaf0bfd537.png)

这是 ImageButton 的 XML。

```
 <ImageButton
      android:id="@+id/title_spinner_button"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_toRightOf="@+id/actionbar_title"/> 
```

当我通过向 XML 添加 android:background 属性使 ImageButton 背景透明时。

```
 <ImageButton
      android:id="@+id/title_spinner_button"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_toRightOf="@+id/actionbar_title" 
      android:background="@null"/> 
```

ImageButton 背景消失，但图标垂直居中。

![ImageButton-After](../Images/45f52428eeae7ba3bada5793878dbbf6.png)

有谁知道如何使 ImageButton 背景透明但保持图标在 ImageButton 底部对齐？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:59:40.530

结合您的空背景尝试以下操作：

```
android:layout_alignParentBottom="true"
android:layout_marginBottom="3dp" // this is here just to ensure the image doesn't sit flush against the bottom of the bar, vary as required 
```

或者，您可以尝试

```
android:layout_height="match_parent"
android:gravity="bottom" 
```

# xml - 这是什么标记语言？...行结尾而不是结束标签

> ID：13371390
> 
> 赞同：4
> 
> 时间：2012-11-14T00:42:42.660
> 
> 标签：xml, xml-parsing, markup

我正在尝试解析与此类似的文档：

```
<PRESOL>
<DATE>1112
<YEAR>12
<AGENCY>Defense Logistics Agency
<OFFICE>DLA Acquisition Locations
<LOCATION>DLA Land and Maritime
<ZIP>43218-3990
<CLASSCOD>59
<DESC>Proposed procurement for NSN 5365013055528 SPACER,PLATE:
Line 0001 Qty 70.00  UI EA  Deliver To: ARIZONA INDUSTRIES FOR THE BLIND By: 0180 DAYS ADOThe solicitation is an RFQ and will be available at the link provided in this notice.  Hard copies of this solicitation are not available.  Digitized drawings and Military Specifications   and Standards may be retrieved, or ordered, electronically.
All responsible sources may submit a quote which, if timely received, shall be considered.
Quotes must be submitted electronically.

<SETASIDE>HUBZone
.......
</PRESOL> 
```

如您所见，它很奇怪，但也许它曾经是某种标准。整个文档似乎使用了一组有限的空白字符，例如我看不到 [tab]，但我确实看到了一些较大数据块中的换行符。

这对任何人来说都很熟悉吗？

我正在寻找一个可以解析这个的 rails gem。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T02:01:52.367

## 这是 FederalBizOpps.gov 的预[请求通知](https://www.fbo.gov/?s=generalinfo&mode=list&tab=list&tabmode=list&static=interface&ss=Presolicitation)

# 征集通知模板

> 预征集模板用于发布拟议收购的通知。FAR 第 5.2 节要求在发布任何进一步行动之前提交本文件。FBO 将拒绝任何其他提及特定征集的文件，而之前未发布该征集的预征集通知。

```
 Tag           Description [Format]
 <PRESOL>                                                              
 <DATE>        Month and day synopsis is submitted [MMDD]
 <YEAR>        Year synopsis is submitted [YY]
 <CBAC>*       User ID for the Office Location. Assigned/managed by your location Administrator.    [string]
 <PASSWORD>*   Password. Assigned/managed by your location Administrator. [string]
 <ZIP>         The Contracting Office's ZIP code [5 Digits]
 <CLASSCOD>*   Either one alphabetic code or a two-digit code for service or supply that the synopsis should be listed under. [Valid classification code (FAR, Section 5.207(g))]
 <NAICS>*      Six-digit code for service or supply that the synopsis would be listed under [Valid NAICS Code]
 <OFFADD>      The complete address of the contracting office [Up to 65535 characters]
 <SUBJECT>     The classification code, two hyphens, and a brief title description of the synopsis. [Up to 255 characters]
 <SOLNBR>*     Unique reference number for the solicitation [Up to 128 characters from the set: a-z A-Z 0-9 - _ ( ) { }]
 <RESPDATE>    Response deadline date [MMDDYY]
 <ARCHDATE>    The date when this notice will be archived. [MMDDYYYY]
 <CONTACT>     The names and phone numbers of officials to contact in regard to this synopsis. If there are two points of contact, their information shall be separated by semicolon [Up to 65535 characters]
 <DESC>        A narrative description of the procurement action. [Up to 65535 characters]
 <LINK>        A structural tag [No data required or accepted]
 <URL>         The Government Agency's URL that will be listed with this award. [Up to 255 characters, consist of a restricted set of characters (see URL specification - RFC 2396)]
 <DESC>        Visible hypertext description provided to the user for linking to the related site [Up to 255 characters]
 <EMAIL>       A structural tag [No data required or accepted]
 <ADDRESS>     The Government Agency contact's email address [Up to 128 characters]
 <DESC>        Visible hypertext description provided for linking to the Government Agency contact's email [Up to 255 characters]
 <SETASIDE>    Identify set-aside acquisitions. [Valid values: 'Competitive 8(a)', 'Emerging Small Business', 'Woman Owned Small Business', 'Economically Disadvantaged Woman Owned Small Business', 'HUBZone', 'Partial HBCU / MI', 'Partial Small Business', 'Service-Disabled Veteran-Owned Small Business', 'Total HBCU / MI', 'Total Small Business', 'Veteran-Owned Small Business']
 <POPADDRESS>  Place of performance address [Up to 65535 characters]
 <POPZIP>      Place of performance ZIP code [Up to 5 digits]
 <POPCOUNTRY>  Place of performance country [Up to 32 characters]
 </PRESOL> 
```

## 笔记

1.  所有红色标签代表所需数据。
2.  *   表示经过验证的数据。
3.  `<LINK>`, `<URL>`, 和`<DESC>`是一组数据，应该一起提供或省略。
4.  `<EMAIL>`, `<ADDRESS>`, 和`<DESC>`是一组数据，应该一起提供或省略。

## 例子

```
<PRESOL> 
<DATE> 0521 
<YEAR> 99 
<CBAC> demo 
<PASSWORD> DEMO 
<ZIP> 22030 
<CLASSCOD> B 
<NAICS>123456 
<OFFADD> Office of Environmental Studies; 1323 Y Street, Washington, DC 22030 
<SUBJECT> B--ENERGY AND ENVIRONMENTAL SERVICES KNOWLEDGE DEVELOPMENT AND DISSEMINATION ACTIVITIES REGARDING THE HOMELESS MENTALLY ILL POPULATION 
<SOLNBR> 208-94-0008 
<RESPDATE> 061399 
<ARCHDATE> 07131999 
<CONTACT> Mary Ann Deal, Contract Specialist, 301-443-5329; Contracting Officer, Beatrice L. Woods, 301-443-0043 
<DESC> The Center for Mental Health Services is soliciting proposals on a full and open competitive basis from qualified organizations to award a 3-year contract to develop and disseminate new knowledge about effective approaches to providing comprehensive community-based services to persons with serious mental illnesses who are homeless. 
<LINK> 
<URL> http://www.abc.gov 
<DESC> Center for Mental Health <EMAIL> <ADDRESS> johndoe@usa.gov 
<DESC> Center for Mental Health <SETASIDE> Total Small Disadvantage Business 
<POPADDRESS> Office of Environmental Studies; 1323 Y Street; Washington, DC 22030 
<POPZIP> 22030 
<POPCOUNTRY> US 
</PRESOL> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T01:44:34.893

（了解我以前没有见过这个 - 这都是一些挖掘的结果）

这是由美国[联邦商业机会发布的](https://www.fbo.gov/)[预请求通知](https://www.fbo.gov/?s=generalinfo&mode=list&tab=list&tabmode=list&static=interface&ss=Presolicitation)的格式……某事。这是该组织定义的[十五种数据交换格式之一。](https://www.fbo.gov/?&static=interface)

我找不到该模板的基本格式的描述。不幸的是，因为 SGML 中有大量的陷阱（正如我在评论中提到的，这肯定看起来很像 SGML）如果你没有准备好它们会咬你。这里有一个来自 Wikipedia 的有趣例子：`<QUOTE></QUOTE>`也可以写成: `<QUOTE//`, 或`<QUOTE>`.

[模板文档](https://www.fbo.gov/?s=generalinfo&mode=list&tab=list&tabmode=list&static=interface&ss=Presolicitation)仅限于每个字段中预期的数据格式。例如：

> `<CLASSCOD>`
> 
> 概要应在下面列出的服务或供应的一个字母代码或两位数代码。有效分类代码（FAR，第 5.207(g) 节）

# jquery - 如何在 css 值更改后停止调整大小功能？

> ID：13371399
> 
> 赞同：0
> 
> 时间：2012-11-14T00:43:44.840
> 
> 标签：jquery, return, media-queries, window-resize, stoppropagation

在通过 CSS 媒体查询更改 css 值后，我试图阻止 resize 函数触发。这不起作用......我希望“有一个切换”只出现一次。我该如何杀死它？

```
$(window).bind('resize', function(event) {
    if ($('#toggle').css('display') == 'none')
        {
            console.log("there's no toggle!");
        }
        else {
            console.log("there IS a toggle!");
            return false; // trying to stop the function
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:48:34.403

采用`unbind()`

```
$(window).unbind('resize'); 
```

/

```
else {
        console.log("there IS a toggle!");
        $(window).unbind('resize');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:59:29.080

应该这样写，使用 .on() 和 .off()。

```
$(window).on('resize', function() {

if ($('#toggle').css('display') == 'none')
    {
        console.log("there's no toggle!");
    }
    else {
        console.log("there IS a toggle!");
        $(window).off('resize');
    }
}); 
```

# ruby-on-rails - 索引多个关系多态

> ID：13371400
> 
> 赞同：0
> 
> 时间：2012-11-14T00:43:46.107
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想知道是否可以执行以下操作

我有很多文章，我有很多照片。

我正在尝试显示所有文章和属于该文章的所有照片集。在控制器中对我来说，我想做以下事情

```
@mosttop = Article.all[1..-1]
@loc = @mosttop.photos 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:05:26.677

所以你有一套`articles`. 您`Article.all[1..-1]`出于某种原因使用，所以我会坚持使用它。
然后你希望每`photos`一个都`articles`合并成一组`photos`？

既然你用了`Rails`，你就可以用[`flat_map`](http://apidock.com/ruby/Enumerable/flat_map)

```
@articles = Article.all[1..-1]
@photos = @articles.flat_map(&:photos)

@photos.each do |photo|
  # show photo
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:30:08.797

```
# app/models/article.rb
has_many :photos

# app/models/photo.rb
belongs_to :article

# app/controllers/article_controller.rb
def index
  @articles = Article.include(:photos).all
end

# app/views/articles/index.html.erb
<%= render :partial => "articles/article_with_photos", :collection => @articles

# app/views/articles/_article_with_phots.html.erb
<H2><%= article.title %></H2>
Photos
<ul>
  <% article.photos.each do |photo| %>
    <li><%= image_tag(photo.url) %></li>
  <% end %>
</ul> 
```

# android - iOS/Android 实时新闻提要实现

> ID：13371405
> 
> 赞同：0
> 
> 时间：2012-11-14T00:44:45.433
> 
> 标签：android, ios, sockets, mobile

基于[此](https://stackoverflow.com/questions/5557776/websockets-over-a-3g-connection)，是否可以肯定地说使用轮询构建实时新闻提要类型的应用程序比使用套接字更好？我正计划为移动设备构建一个新闻提要类型的应用程序，并计划使用套接字来实现它，但我开始认为构建一个 RESTful 应用程序并在客户端上进行短间隔轮询可能会更好获取新的更新。其他人是如何实现“实时”移动应用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:02:51.997

在 Android 中，[GCM](http://developer.android.com/guide/google/gcm/gs.html)是任何实时通知的最佳选择。如果您有一个可以推送通知的服务器，那么获取实时通知就再简单不过了。

在 iOS 上，最好编写一个轮询机制。我能想到的最好的例子是适用于 iOS 的新 Facebook 应用程序。它似乎每 30 秒左右轮询一次以检查新数据。如果有新数据，用户点击新故事栏，它会获取新数据并显示出来。

一个简单的请求和计时器就可以工作，但还有一种称为[长轮询](https://stackoverflow.com/questions/6300756/long-polling-in-objective-c)的技术在这些情况下效果很好。这将限制电池的消耗。

简而言之，由于 Apple 对推送通知的限制，您将不得不解决它。然而，一般来说，推送通知是要走的路，考虑到所有的事情。

# java - 使用嵌套的 for 循环绘制棋盘

> ID：13371406
> 
> 赞同：0
> 
> 时间：2012-11-14T00:44:45.243
> 
> 标签：java

我有几个关于使用嵌套 for 循环的问题。在本书的这个例子中，它使用嵌套的 for 循环来绘制一个典型的棋盘。

1）当我假设下面的代码说绘制棋盘格的顺序将从左到右垂直向下直到绘制整个棋盘时，我的理解是否正确？

2) 我对双 x 的用途和最里面的 for 循环中的双 y 有一些疑问。计算它们的目的是为了将一个正方形与下一个正方形隔开吗？您能否扩展双 x 和双 y 的目的以及一个循环的每个循环会发生什么？

```
import acm.program.*;
import acm.graphics.*;

public class checkerBoard extends GraphicsProgram{
    public void run(){

        double sqSize = getHeight() / N_ROWS;
        for ( int i = 0; i < N_ROWS; i++){
            for (int j = 0; j < N_COLUMNS; j++){
                double x = j * sqSize;
                double y = i * sqSize;

                GRect rect = new GRect(x, y, sqSize, sqSize);
                rect.setFilled((i+ j) % 2 !=0);
                add(rect);

            }

        }

    }

    private static final int N_ROWS = 8;
    private static final int N_COLUMNS = 8;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:48:18.310

> 1）当我假设下面的代码说绘制棋盘格的顺序将从左到右垂直向下直到绘制整个棋盘时，我的理解是否正确？

这是对的。一行一行，从左到右，从上到下。

> 2) 我对双 x 的用途和最里面的 for 循环中的双 y 有一些疑问。计算它们的目的是为了将一个正方形与下一个正方形隔开吗？您能否扩展双 x 和双 y 的目的以及一个循环的每个循环会发生什么？

它们是绘制下一个正方形的位置的坐标。具体来说，它们是正方形左上角的坐标。您可以通过简单地乘以正方形的宽度来计算所有正方形的起点，就像他们所做的那样。

# powershell - 如何为要从提示符调用的 PowerShell 脚本设置别名？

> ID：13371407
> 
> 赞同：8
> 
> 时间：2012-11-14T00:44:51.437
> 
> 标签：powershell, cmd

我有一个 PowerShell 脚本，可以打开与我的开发环境相关的所有文件和程序。而不是打字

```
> &.\mysetup.ps1 
```

有什么方法可以将其别名为只需键入

```
> gosetup 
```

?

理想情况下，我也会将此功能用于其他 PowerShell 脚本！作为参考，我想从 Git PowerShell 窗口运行这些命令。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T00:54:55.257

*   首先，您需要设置您的 PowerShell 配置文件，如果您还没有这样做的话。
*   创建一个您想要保留别名脚本的目录（我使用 C:\ps）。
*   在您的个人资料中，添加以下行：

    ```
    $ps_script_dir = "C:\path\to\scripts"

    New-Alias <alias name> $ps_script_dir\<script name> 
    ```

*   打开一个新的 shell，你应该可以通过它的别名调用你的脚本。

**更新/附加信息**

*   以下是对 OP 评论的回应，如下所示。

如果您想简单地为别名分配一个单行或一小段代码，则不需要将其放入脚本文件中，如上所述，您可以简单地在您的配置文件中创建一个函数：

```
function someUsefulOneliner
{
    # Your one-liner goes here
}

set-item -path alias:<alias name> -value someUsefulOneliner 
```

# ruby-on-rails - 数据存储困境 - 作为整数计数还是作为关联？

> ID：13371412
> 
> 赞同：1
> 
> 时间：2012-11-14T00:45:27.673
> 
> 标签：ruby-on-rails, database, design-patterns, storage

对于有经验的程序员来说，这应该很容易回答。

我有一个 Rails 应用程序，鼓励用户单击网站各处的不同按钮。在存储数据时，我需要记录两件事：

1) 单击每个单独按钮的总人数。2) 单击每个单独按钮的唯一人数。

95% 的时间里，我不需要知道实际点击的人是谁。这些数据被非常频繁地访问。另外 5% 的时间我确实需要知道谁点击了什么，我需要遍历这些人并执行某些操作。

现在我有一个 Click 模型，它记录用户和每次点击的按钮。我不确定是我是否应该对点击进行某种独特的选择以找到独特的点击，或者我是否应该为独特的点击创建一个单独的模型。此外，为按钮模型创建一个 num_clicks 列并在每次有人点击以及将点击添加为记录时递增它是否明智？还是我应该每次只做一个选择计数（*）？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:01:10.493

您可以将计数器缓存列用于所有目的。

# php - 需要转义或清理显示在?

Do you have to escape or sanatise output that will be in a `<textarea></code>? </p> <p>It seems that if i sanatise it using <code>htmlentities()</c</h1> <blockquote> <p>ID：13371421</p> <p>赞同：1</p> <p>时间：2012-11-14T00:46:26.457</p> <p>标签：php, html, textarea</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：2</p> <p>时间：2012-11-14T00:53:46.030</p> </blockquote> <p>那么，你必须：</p> <pre><code><?php $content = "</textarea><script>alert('hi!')</script>"; ?> <textarea> <?php echo $content; ?> </textarea> </code></pre> <p><img src="../Images/fae2ef8be87d03aef9cf922fc1e32367.png" alt="在此处输入图像描述" data-original-src="https://i.stack.imgur.com/Wx0w1.png"/></p> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-11-14T00:50:38.013</p> </blockquote> <p>如果该输出最初是由用户或任何不受信任的来源（即不是直接来自您的代码）提供的，则需要对其进行清理以防止 XSS 攻击。</p> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-11-14T00:51:27.063</p> </blockquote> <p>您需要考虑用户是否可以编辑输出。如果不是，并且它是受信任的输出（可能来自您编写的预定义文本），您显然不会。否则是的。HTML 字符替换是很正常的，但您不必担心，因为当页面被读取并输出到用户浏览器时，所有以前的字符仍然存在。</p> <p>请注意，如果不进行清理，可以使用<code>></code>and字符来注入其他 HTML 代码，特别是可以运行 Javascript 的标记。<code><</code><code><script></code></p> <hr/> <h2>回答 #4</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-11-14T00:52:28.800</p> </blockquote> <p>是的，你需要消毒。改为使用<code>htmlspecialchars($str, ENT_QUOTES)</code>。</p> <hr/> <h2>回答 #5</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-11-14T00:52:43.490</p> </blockquote> <p>始终避免在's 内容中出现<code><</code>and <code>></code>（使用<code>&lt;</code>and <code>&gt;</code>） 。<code>textarea</code>否则，可以提供以下内容（示例）来“转义”文本区域并注入 HTML 代码：</p> <pre><code></textarea><script src="http://malicious.code.is/us.js"></script> </code></pre> <p>否则，这可能会导致以下代码：</p> <pre><code><textarea id="text"></textarea><script src="http://malicious.code.is/us.js"></script></textarea> </code></pre> <p>最后的第二个<code></textarea></code>将被忽略，之前的脚本标签将被执行。</p> <hr/> <h2>回答 #6</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-11-14T01:13:05.237</p> </blockquote> <p>仅仅使用<code>htmlspecialchars()</code>是不够的。它仍然使您容易受到某些多字节字符攻击向量的攻击（即使使用<code>htmlspecialchars($string, ENT_QUOTES | ENT_SUBSTITUTE, 'UTF-8')</code></p> <p>也许看看像<a href="http://htmlpurifier.org/" rel="nofollow">HTMLPurifier</a>这样的库，可以为您提供更完整的解决方案。</p> <p>这是 PHP 中 XSS 保护的一个很好的总结。 </p> <p><a href="http://www.bytetouch.com/blog/programming/protecting-php-scripts-from-cross-site-scripting-xss-attacks/" rel="nofollow">http://www.bytetouch.com/blog/programming/protecting-php-scripts-from-cross-site-scripting-xss-attacks/</a></p> </body> </html></textarea>`

# javascript - 删除 JavaScript 中未知字符的前缀

> ID：13371422
> 
> 赞同：0
> 
> 时间：2012-11-14T00:46:27.933
> 
> 标签：javascript, regex

我有一个网页，当页面上有更新时，标题从“页面名称”更改为“（1）页面名称”。每次有新更新时，该数字都会增加到 50，然后显示“（50+）时间轴”。

记录页面浏览量时，Google Analytics 会显示我不想要的“（n）页面名称”。所以我发现了如何手动更改为记录的页面标题，`_gaq.push(["_set", "title", 'new title']);`.

所以我的问题是，如何最有效地删除 (1-50)/(50+) 前缀并获得“页面名”？正则表达式最适合这个吗？

这是我根据罗斯的回答使用的：

```
var window_title = window.title.replace(/^\(\d+\+?\)\s/, '');
_gaq.push(["_set", "title", window_title]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:50:17.583

是的，RegEx 可以做到这一点。

```
window.title.replace(/^\(\d+\+?\)\s/, ''); 
```

当然，这取决于您的站点使用的软件，因为在模板的相关部分中可能只输出没有该前缀的页面标题。因此，将其直接回显到 Google Analytics（分析）标签中。但我认为上面的 javascript 可能是更容易实现的解决方案。

# java - 了解 Hive 失败背后的真正原因

> ID：13371425
> 
> 赞同：3
> 
> 时间：2012-11-14T00:46:56.680
> 
> 标签：java, jdbc, hive

我正在使用 JDBC 驱动程序在 hive 上运行“describe TABLE_NAME”。它给了我以下错误：

```
NativeException: java.sql.SQLException: Query returned non-zero code: 9, cause: FAILED:
Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 
```

`return code 1`没有告诉我太多。我如何弄清楚根本原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:04:37.053

这很可能是因为您的 Hive 元存储设置不正确。Hive 使用 RDBMS 元存储来存储有关其表的元数据。这包括表名、模式、分区/桶/排序列、表级统计信息等。

默认情况下，Hive 使用嵌入式 derby 元存储，一次只能由一个进程访问。如果您正在使用它，则可能有多个会话打开 Hive 导致此问题。

无论如何，我建议您为 Hive 设置一个独立的元存储。选择嵌入式 derby 是因为它在运行测试中的可用性和开箱即用的元存储。但是，在我看来，它不适合生产工作流程。[您可以在此处](https://ccp.cloudera.com/display/CDHDOC/Hive+Installation#HiveInstallation-ConfiguringtheHiveMetastore)找到有关如何将 MySQL 配置为 Hive 元存储的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:53:43.370

可能你有另一个会话打开。由于德比比赛每人只允许一场比赛。你可以检查 -

```
ps -wwwfu <your id> 
```

杀死正在运行 hive 连接的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:05:25.003

这是因为您指定的名称的表在数据库中不存在。尝试创建表并再次运行该命令。它会起作用的。:)

# dojo - 从模板实例化 dijit.Dialog 我无法正确初始化它

> ID：13371429
> 
> 赞同：0
> 
> 时间：2012-11-14T00:47:29.743
> 
> 标签：dojo

在 Dojo 中，我尝试使用模板扩展 dijit.Dialog。当我实例化它时，我只得到对话框中的文本，没有边框或关闭按钮。我需要做一些额外的步骤来让它完全初始化吗？

我的模板在 template.html 中，它看起来像这样：

```
<div dojoType="dijit.Dialog" id="dynFilter" jsId="dynFilter">
"Dynamic Dialog"
</div> 
```

这是 dojo.declare：

```
dojo.declare(
    "template.dialog",                                  // class name
    [dijit._Widget, dijit._Templated, dijit.Dialog],    // parent classes
    {
    templateString : dojo.cache("autonomics", "template.html"),
    }
); 
```

在我实例化它之后，我调用 .startup()，它似乎没有做任何事情，然后是 .show()，它确实将它放置在页面上，但缺少它的大部分功能。

```
var dialog = new template.dialog();
dialog.startup();
dialog.show(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:52:46.170

子类化时覆盖原始模板`dijit/Dialog`。

看看我对[Dojo Dialog 的回答，带有确认按钮](https://stackoverflow.com/questions/10401512/dojo-dialog-with-confirmation-button/10405938#10405938)，它可以解决您遇到的问题。或者直接转到 jsFiddle 的工作示例：http: [//jsfiddle.net/phusick/wkydY/](http://jsfiddle.net/phusick/wkydY/)

# jquery - jQuery .focus() 突出显示所有预填充的文本

> ID：13371430
> 
> 赞同：5
> 
> 时间：2012-11-14T00:47:33.783
> 
> 标签：jquery, focus, highlight

HTML

```
<input id="formloginusername" type="text" name="username" placeholder="Username" value="Pre-filled-from-database"></input> 
```

JS：

```
$(document).ready(function() {
    $("#formloginusername").focus();
}); 
```

问题：

突出显示文本“Pre-filled-from-database”。我只希望光标显示在字段中，就好像用户在填充文本后单击它一样。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T00:49:54.653

这是一个漂亮的小技巧......

```
$(document).ready(function() {
    var $field = $("#formloginusername"),
        oldVal = $field.val();
    $field.focus().val('').val(oldVal);
}); 
```

演示：http: [//jsfiddle.net/X7Y8S/](http://jsfiddle.net/X7Y8S/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T04:01:16.643

只需这样做：

```
$('#field').focus().val($("#field").val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T19:18:03.730

Hopstream，我使用您的方法在 Chrome 中发现光标位于文本末尾。我需要一种方法让光标集中在字段的开头而不突出显示文本。这对我有用：

> $('#ElementID').each(function () { $(this).focus(); this.selectionEnd = this.selectionStart; });

# ruby-on-rails - rails 3 eager load has_many 通过与 limit 关联

> ID：13371431
> 
> 赞同：0
> 
> 时间：2012-11-14T00:47:49.993
> 
> 标签：ruby-on-rails, associations, has-many-through

我正在尝试通过关联来限制has_many，对于某些我想在使用时限制结果数量的实例`.includes(:model)`

这是我到目前为止所拥有的：

```
class Student < ActiveRecord::Base
    has_many :courses, :through => :students_courses
    has_many :sample_courses, :through => :students_courses, :limit => 3, :source => :course, :order => 'updated_at DESC'
end

class Course < ActiveRecord::Base
    has_many :students, :through => :students_courses
end 
```

到目前为止，一切都很好。如果我启动 rails 控制台并加载学生，我可以访问示例课程并返回三个结果。但是，当我有查询并尝试`includes`时，在尝试打印课程名称的视图中，它会为学生加载所有课程，而不仅仅是三个。

```
# Query in controller
@students.where(...stuff..).includes(:sample_courses)

# In the view -
@students.each do |student| courses = student.sample_courses 
```

最后一个`courses`变量返回与学生相关的所有课程，而不仅仅是三个示例课程。如果我在控制器中跳过`includes`并保持视图相同，那么它会正确查询示例课程。当然，您随后会运行我试图避免的 n 个查询。

那么我怎样才能急切地加载 3 门课程呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:04:37.223

当`:limit`您使用急切加载关联时，会忽略，如 API 文档中所说：

> 如果您使用指定的 :limit 选项急切加载关联，它将被忽略，返回所有关联的对象，例如：

```
class Picture < ActiveRecord::Base
  has_many :most_recent_comments, :class_name => 'Comment', :order => 'id DESC', :limit => 10
end

Picture.includes(:most_recent_comments).first.most_recent_comments # => returns all associated comments. 
```

如果你想加载 3 门课程，也许你可以使用这个：

```
courses = student.sample_courses.limit(3) 
```

# .net - .NET 4.0 共享缓存

> ID：13371432
> 
> 赞同：0
> 
> 时间：2012-11-14T00:47:54.113
> 
> 标签：.net, caching, shared

是否可以在 ASP.NET 和 WebService 之间共享缓存对象？

我有 3 个项目：

*   ASP.NET 网站
*   网络服务
*   包含 MyCache 类的类库

MyCache 类：

...

```
Dim oCache As New MemoryCache("MyCache")
Dim oReturn as String

If oCache.Item("Key") Is Nothing Then
    oCache.Add("Key", "Value", Now.AddYears(1))
End If

oReturn = oCache.Item("Key") 
```

...

此代码不起作用...当我在 WebSite 中调用 MyCache 类时，“Key”为空（正确），但是当我在 WebService 中调用 MyCache 类时，“Key”再次为空（不正确，它会不能为空）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:48:03.340

我在网站内创建了 WebService，例如：

www.website.com/webservice/service.asmx

# c# - 可以在列表中存储对对象的引用吗？

> ID：13371433
> 
> 赞同：7
> 
> 时间：2012-11-14T00:47:56.287
> 
> 标签：c#

我希望能够在不直接引用它们的情况下为列表对象分配值：

伪示例：

```
List<int> intList = new List<int> { 0 };
???? intPointer = ref intlist[0];

*intPointer = 1;  // I know * isn't possible here, but it is what I'd like to do

Console.WriteLine(intList[0]); 
```

它会输出`1`.

我认为这是不可能的，但我只是想确保我没有遗漏任何东西。

另外，我不是在寻找使用的示例`unsafe`，我很好奇这在托管代码中是否可行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T00:54:04.093

C# 没有“ref locals”的概念（[虽然 CLR 有](http://blogs.msdn.com/b/ericlippert/archive/2011/06/23/ref-returns-and-ref-locals.aspx)）。因此，您需要将值包装在可以变异的引用类型中。例如，

```
public class Ref<T> where T : struct
{
    public T Value {get; set;}
}

List<Ref<int>> intRefList = new List<Ref<int>>();
var myIntRef = new Ref<int> { Value = 1 };
intRefList.Add(myIntRef);

Console.WriteLine(myIntRef.Value);//1

Console.WriteLine(intRefList[0].Value);//1

myIntRef.Value = 2;

Console.WriteLine(intRefList[0].Value);//2 
```

编辑：C# 7.0 添加了[ref locals](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/ref-returns)但它们仍然不能以这种方式使用，因为您不能将 ref locals 放入数组或列表中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T00:55:05.593

不，这在 C# 中是不可能的。

C# 不支持对局部变量的引用，其中包括对本地容器元素的引用。

在 C# 中获得真正的引用（即，*不是*引用类型的实例，而是对另一个变量的实际引用）的唯一方法是通过`ref`or`out`参数关键字。这些关键字不能与任何类型的索引值或属性一起使用，其中包括`List<>`. 您也无法直接控制这些引用：编译器在幕后为您执行取消引用。

有趣的是，CLR*确实*支持这种引用。如果您将 CIL 反编译成 C#，您有时会看到类似的类型`int&`是对`int`. C# 故意不允许您在代码中直接使用这些类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:53:16.727

使用诸如 int 之类的[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)时，您要问的问题是不可能的。您将需要额外的间接级别；例如，您可以包装您的整数。

有关该示例，请参见[传递给迭代器的值类型的可变包装器。](https://stackoverflow.com/questions/1050413/mutable-wrapper-of-value-types-to-pass-into-iterators)

# symfony - 只允许在 Symfony2 中切换/模拟特定用户

> ID：13371438
> 
> 赞同：9
> 
> 时间：2012-11-14T00:48:31.447
> 
> 标签：symfony, switch-statement

**解释**

在 Symfony2 中允许用户切换到任何其他用户很容易。我的问题是，如何允许某些用户只切换到某些其他用户？我使用 FOSUserBundle 作为我的用户提供者。

**例子**

有 5 个用户，UserA、UserB、UserC、UserD、UserE，但其中只有 3 个链接在一起。

UserA 可以切换到 UserB 和 UserC

UserB 可以切换到 UserA 和 UserC

UserC可以切换到UserA和UserB

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T23:10:09.100

你可以通过覆盖默认的 SwitchUserListener 来实现这种类型的东西。

您将覆盖的参数是：`security.authentication.switchuser_listener.class`

例如，在 parameters.yml 中：

```
parameters:
  security.authentication.switchuser_listener.class: My\Project\Security\Listener\SwitchUserListener 
```

在您的自定义侦听器类中，您将实现`Symfony\Component\Security\Http\Firewall\ListenerInterface`并使用现有`Symfony\Component\Security\Http\Firewall\SwitchUserListener`类作为自定义实现的基础。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:47:07.357

如果您想将管理员用户模拟为普通用户，则有一些示例：)

[https://gist.github.com/1589120](https://gist.github.com/1589120)

[http://symfony.com/doc/current/book/security.html#impersonating-a-user](http://symfony.com/doc/current/book/security.html#impersonating-a-user)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T12:29:50.470

感谢 Veonik，一种（可能是肮脏的）方式来做到这一点

使用该语法添加角色：

```
 ROLE_ALLOWED_TO_SWITCH_{usertype} 
```

例如将 ROLE_A 添加到 userA ：

```
ROLE_A:
 - ROLE_ALLOWED_TO_SWITCH_USERTYPEB
 - ROLE_ALLOWED_TO_SWITCH_USERTYPEC 
```

在 yml 中声明你自己的 SwitchUserListener 服务：

```
security.authentication.switchuser_listener:
  class: %security.authentication.switchuser_listener.class%
  public: false
  abstract: true
  tags:
      - { name: monolog.logger, channel: security}
  arguments: 
   - @security.context
   - null
   - @security.user_checker
   - null
   - @security.access.decision_manager
   - @logger
   - _switch_user
   - ROLE_ALLOWED_TO_SWITCH 
   - @event_dispatcher
   - @security.role_hierarchy 
```

在 SwitchUserListener::attemptSwitchUser 方法中

```
private function attemptSwitchUser(Request $request)
{
 ....
 CODE BEFORE
 ....
    $user = $this->provider->loadUserByUsername($username);
    $rtoSwith = $this->getRolesToSwitchTo($token->getRoles());
    $accessGranted = false;
    foreach ($rtoSwith as $suType) {
        $instance = ucfirst(strtolower($suType));
        if ($user instanceof $instance) {
            $accessGranted = true;
            break;
        }
    }

    if (!$accessGranted) {

        throw new AccessDeniedException('Access Denied, not allowed to switch to type : '.get_class($user));
    }
 ....
 CODE AFTER 
 ....
 return $token
}

protected function getRolesToSwitchTo($roles){

    $rts = array();
    foreach ($this->roleHierarchy->getReachableRoles($roles) as $role) {

        $tmp = explode("ROLE_ALLOWED_TO_SWITCH_", $role->getRole());

        if(isset($tmp[1])){
            $rts[] = $tmp[1];
        }
    }

    return $rts;
} 
```

如果您有其他解决方案，请告诉我 ++

# python - Python：检查文件被锁定

> ID：13371444
> 
> 赞同：13
> 
> 时间：2012-11-14T00:48:57.670
> 
> 标签：python, file-io

我的目标是知道文件是否被另一个进程锁定，即使我无权访问该文件！

`open()`所以更清楚地说，假设我正在使用python 的内置`'wb'`开关（用于写入）打开文件。`open()`如果：`IOError`_`errno 13 (EACCES)`

1.  用户无权访问该文件或
2.  该文件被另一个进程锁定

我怎样才能在这里检测到案例（2）？

（我的目标平台是 Windows）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T00:58:45.320

您可以`os.access`用于检查您的访问权限。如果访问权限很好，那么它必须是第二种情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-06T05:56:59.990

正如前面评论中所建议的，`os.access`不返回正确的结果。

但是我在网上找到了另一个确实有效的代码。诀窍是它试图重命名文件。

来自：[https ://blogs.blumetech.com/blumetechs-tech-blog/2011/05/python-file-locking-in-windows.html](https://blogs.blumetech.com/blumetechs-tech-blog/2011/05/python-file-locking-in-windows.html)

```
def isFileLocked(filePath):
    '''
    Checks to see if a file is locked. Performs three checks
        1\. Checks if the file even exists
        2\. Attempts to open the file for reading. This will determine if the file has a write lock.
            Write locks occur when the file is being edited or copied to, e.g. a file copy destination
        3\. Attempts to rename the file. If this fails the file is open by some other process for reading. The 
            file can be read, but not written to or deleted.
    @param filePath:
    '''
    if not (os.path.exists(filePath)):
        return False
    try:
        f = open(filePath, 'r')
        f.close()
    except IOError:
        return True

    lockFile = filePath + ".lckchk"
    if (os.path.exists(lockFile)):
        os.remove(lockFile)
    try:
        os.rename(filePath, lockFile)
        sleep(1)
        os.rename(lockFile, filePath)
        return False
    except WindowsError:
        return True 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T00:59:05.430

根据[文档：](http://docs.python.org/2/library/errno.html)

```
errno.EACCES
    Permission denied
errno.EBUSY

    Device or resource busy 
```

所以只需这样做：

```
try:
    fp = open("file")
except IOError as e:
    print e.errno
    print e 
```

从那里找出 errno 代码，就可以了。

# assembly - IA32 中的对齐和组装

> ID：13371445
> 
> 赞同：0
> 
> 时间：2012-11-14T00:49:07.680
> 
> 标签：assembly, x86, alignment

![在此处输入图像描述](../Images/465c458c834c680852047c8f3a192835.png)

有人可以向我解释为什么在第二个问题 proco2 中，x-> bi -> f[3]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:54:19.860

实际上，在堆栈上，您只有一个指向`struct s2`(in `8(%ebp)`) 的指针。因此之后

```
movl 8(%ebp), %eax 
```

在`%eax`你有一个地址**`struct s2`**。

`struct s2`构成的第8-11`f[0]`个字节和第 12-15 个字节构成**`f[1]`**，因此您有

```
return x->f[1] 
```

在第二种情况下

```
movl 8(%ebp), %eax 
```

在`%eax`你有一个地址**`struct s1`**。

的第 4-7 个字节`struct s1`构成**`b`**类型字段`union u1`。因此之后

```
movl 4(%eax), %eax 
```

在`%eax`你有`union u1`。因为它`union`同时`%eax`包含所有字段值（`h`和`i`）`j`。所以

```
movl 20(%eax), %eax 
```

实际上正在获取任何指针所在的第 20-23 个字节`%eax`（它不能是`j`字段，因为它不是指针）。它不能是`h`字段，因为它指向`struct s1`并且`sizeof (struct s1)`是 12，即 <20。因此，它必须是**`i`**场。的第 20-23 个字节`struct s2`是**`f[3]`**，因此您有：

```
return x->b.i->f[3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:33:35.887

mov 8(%ebp), %eax ;; eax = &x
mov 4(%eax), %eax ;; eax = x->b (or x->e)

More likely x->e would have had movsbl 4(%eax), %eax //; sign extension
or mov 4(%eax), %al with sign extension

Because char can't (shouldn't) be used as a pointer, the 4(%eax) was a ptr to struct. Which struct? 20%(eax) exists only for struct s2, unless originally there was an array os structs s1.

Offset 20 of s2 is f[3].

# iphone - iOS 6 MapKit 绘图（实时）行进距离？

> ID：13371448
> 
> 赞同：1
> 
> 时间：2012-11-14T00:49:27.973
> 
> 标签：iphone, objective-c, xcode, gps, ios6

我想用 GPS（Apple Maps）实现用户跟踪（跑步、步行）。所以当用户走路时，我想在地图上画一条线 - 实时。

我怎样才能做到这一点？

我在这里看到了一个解决方案：[http](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial) ://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial但它只有在你已经有了 A 点和 B 点时才有效。

提前致谢！

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:21:28.613

第一步，我准备这样的财产

```
ViewController.h

    #import <MapKit/MapKit.h>

    @interface ViewController : UIViewController <CLLocationManagerDelegate, MKMapViewDelegate>
    @property (nonatomic, strong) MKMapView *mapView;
    @property (nonatomic, strong) MKPolyline* routeLine;
    @property (nonatomic, strong) MKPolylineView* routeLineView;
    @property (nonatomic, strong) NSMutableArray *trackPointArray;
    @property (nonatomic, strong) CLLocationManager *locationManager;
    @property (nonatomic, readwrite) MKMapRect routeRect;

    @end 
```

然后我在里面这样实现`ViewController.m`

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation 
{
    MKMapPoint * pointsArray = malloc(sizeof(CLLocationCoordinate2D)*2);
    pointsArray[0]= MKMapPointForCoordinate(oldLocation.coordinate);
    pointsArray[1]= MKMapPointForCoordinate(tempNewLocation.coordinate);

    routeLine = [MKPolyline polylineWithPoints:pointsArray count:2];
    free(pointsArray);

     if (tempNewLocation.coordinate.latitude - oldLocation.coordinate.latitude < 1)
     {
          [[self mapView] addOverlay:routeLine];
     }

} 
```

对于 iOS6，您可以尝试这种方式而不是上面的代码：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *newLocation = [locations objectAtIndex:locations.count - 1];
    CLLocation *oldLocation = nil;
    if (locations.count > 1)
    {
        oldLocation = [locations objectAtIndex:locations.count - 2];
    }

    MKMapPoint * pointsArray = malloc(sizeof(CLLocationCoordinate2D)*2);
    pointsArray[0]= MKMapPointForCoordinate(oldLocation.coordinate);
    pointsArray[1]= MKMapPointForCoordinate(tempNewLocation.coordinate);

    routeLine = [MKPolyline polylineWithPoints:pointsArray count:2];
    free(pointsArray);

    if (tempNewLocation.coordinate.latitude - oldLocation.coordinate.latitude < 1)
    {
        [[self mapView] addOverlay:routeLine];
    }
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKOverlayView* overlayView = nil;
    self.routeLineView = [[MKPolylineView alloc] initWithPolyline:[self routeLine]];
    [[self routeLineView] setFillColor:[UIColor colorWithRed:167/255.0f green:210/255.0f blue:244/255.0f alpha:1.0]];
    [[self routeLineView] setStrokeColor:[UIColor colorWithRed:106/255.0f green:151/255.0f blue:232/255.0f alpha:1.0]];
    [[self routeLineView] setLineWidth:15.0];
    [[self routeLineView] setLineCap:kCGLineCapRound];
    overlayView = [self routeLineView];
    return overlayView;
} 
```

希望我的回答能帮到你，干杯。

# gnuplot - 从 csv 读取 gnuplot 图例

> ID：13371449
> 
> 赞同：6
> 
> 时间：2012-11-14T00:49:27.807
> 
> 标签：gnuplot

我有一个 data.csv 文件，其结构如下：

```
n    John Smith stats     Sam Williams stats
1                23.4                   44.1
2                32.1                   33.5
3                42.0                   42.1 
```

目前我正在 gnuplot 中使用以下命令进行绘图：

```
plot 'data.csv' using 1:2 title 'John' with lines, '' using 1:3 title 'Sam' with lines 
```

问题是如何从 .csv 的第一行检索名字而不是手动输入？

此外，如果我在表格中添加一列，是否可以调整它，以便它自动添加具有适当标题的另一行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T01:20:40.100

你说你有一个 csv 文件，所以我假设你的数据文件看起来像这样（并保存在*infile.csv*中）：

```
n,John Smith stats,Sam Williams stats
1,23.4,44.1
2,32.1,33.5
3,42.0,42.1 
```

如果您的 Gnuplot 版本足够新，则可以`columnhead`用作`title`参数：

```
echo "
  set datafile separator ','
  plot 'infile.csv' using 1:2 with lines title columnhead
" | gnuplot --persist 
```

或使用以下`key`选项：

```
echo "
  set datafile separator ','
  set key autotitle columnhead
  plot 'infile.csv' using 1:2 with lines, '' using 1:3 with lines
" | gnuplot --persist 
```

### 编辑 - 缩短标题

```
echo "
  set datafile separator ','
  set key autotitle columnhead
  plot '< sed -r \"1 s/,([^ ]+)[^,]+/,\1/g\" infile.csv' using 1:2 with lines, '' using 1:3 with lines
" | gnuplot --persist 
```

输出：

![infile.csv 的 1:2 和 1:3 列的绘图](../Images/b20f9315e3aa45a70b1251b2c2c97234.png)

*请注意，[此](https://stackoverflow.com/a/13375264/1331399)对后续问题的回答也可能是相关的。*

# javascript - 返回函数调用和第三条件不起作用

> ID：13371454
> 
> 赞同：0
> 
> 时间：2012-11-14T00:50:07.447
> 
> 标签：javascript, jquery

我正在努力解决这个问题。我有一个函数返回另一个函数的值。在第二个函数中，我有一个第三条件，它不会得到那个回报。我想不通。我确定这是范围问题，但我无法解决。这一切都在一个 jquery 插件中。

```
 somefunctionA: function(){
   var self = this;
   var data = somecollection_of_data;
   var storeReturn = $.map( data, function( obj, i) {
                            return (function(i){
                                 return self._returnFilteredData(id);
                            })(obj.i);
             });
 },

  __returnFilteredData: function(i){
                var self = this;
                  if(some_conditionals){
                     return (
                       self.url ?
                       (function(){
                           if(some_more_conditionals){
                               self._getDBdata();  <<-- NEVER FIRES OFF
                           }
                      }) : self._getDBdata()  <<--- THIS ONE FIRES OFF
                     )
                  }
               }
            }, 
```

所以最终发生的是我在 storeReturn 数组中得到一个“null”，因为在某些条件下，第一个三级失败。我无法进入它...进行测试。

“_getDBdata()”函数只返回一个基于其他数据的哈希值。

关于正在发生的事情有什么想法吗？我尝试了所有方法，但无法解决此范围/关闭问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:58:54.817

首先：这太令人费解了，你应该停止这样做。把它分成几块。

第二：在那种情况下你永远不会调用匿名函数，你只是在返回它。添加另一组`()`将解决此问题，以便您调用它并返回其值：

```
__returnFilteredData: function(i){
              var self = this;
                if(some_conditionals){
                   return (
                     self.url ?
                     (function(){
                         if(some_more_conditionals){
                             return self._getDBdata();
                         }
                    })() : self._getDBdata()
                   )
                }
             }
          }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:28:08.917

只是一个评论：

你说你不能`if..else`上班，但我认为你不能只见树木不见森林。如果你摆脱了匿名函数，你也摆脱了`self`，整个事情变得非常简单。

请注意，无论`this.url`评估为真还是假，您仍然调用`this._getDBdata()`，因此您只需要有条件地执行“更多条件”部分：

```
__returnFilteredData: function(i) {
    if (some_conditionals) {
        if (this.url) {
            if (some_more_conditionals) {
                // do stuff
            }
        }
        return this._getDBdata();
    }
}, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T01:11:39.963

在`__returnFilteredData()`你里面的三元语句中，根据 的真实性`self.url`，返回两种可能的东西之一。然后从您提供给的回调中返回返回的任何内容`$.map()`。

如果`self.url`为真，则返回一个函数：

```
 (function(){
                       if(some_more_conditionals){
                           self._getDBdata();  <<-- NEVER FIRES OFF
                       }
                  }) 
```

...但如果`self.url`是假的，则返回调用函数的结果：

```
 self._getDBdata() 
```

在匿名函数的情况下，实际上没有任何东西调用它，但是即使确实调用了匿名函数，它实际上也没有返回结果，它有条件地调用`self._getDBdata()`而不返回结果。

您可以将其更改为立即调用的返回结果的匿名函数：

```
__returnFilteredData: function(i){
          var self = this;
            if(some_conditionals){
               return (
                 self.url ?
                 (function(){
                     if(some_more_conditionals){
                         return self._getDBdata();  // added "return"
                     }
                })() : self._getDBdata()            // added "()" after "})"
               )
            }
         }
      }, 
```

...但即便如此，匿名函数仍然可以返回`undefined`，因为它没有`else`案例。如果它从不进入主块也`__returnFilteredData()`可以返回。在某些情况下，可能是可以接受的结果，但这对于当前的代码结构来说远非显而易见。`undefined``if``undefined`

如果您删除匿名函数和三元并编码为使用结构，它将*更加*清晰和易于维护。`__returnFilteredData()``if / else if / else if`

# java - applicationcontext.xml 来自另一个 jar 的 spring 服务

> ID：13371456
> 
> 赞同：0
> 
> 时间：2012-11-14T00:50:14.540
> 
> 标签：java, spring, mapping, applicationcontext

快速提问。当它们位于 webApp 使用的另一个 jar 中时，您可以在 applicationContext.xml 中引用 Spring 类吗？

JAR（一个包含我所有的 servries 和 daos 等的通用 jar）在 WAR 文件中，但是当我尝试通过 applicationContext.xml 引用服务时，我收到以下错误：-

```
Error creating bean with name 'com.myproject.common.test.impl.TestServiceImpl' defined in ServletContext resource [/WEB-INF/context/spring-context.xml]: Instantiation of bean failed; nested exception is java.lang.IllegalStateException: No bean class specified on bean definition 
```

（注意 spring-context.xml 被导入到 applicationContext.xml 中没有错误。）

我的上下文 XML：

```
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                            http://www.springframework.org/schema/tx 
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/context 
                            http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="com.myproject.common.test.impl.TestServiceImpl">
        <property name="genericDao" ref="genericDao" />
    </bean>         
</beans> 
```

我的 App 包都在 com.myproject.web 下 我的常用 JARS 都在 com.myproect.common 下

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:42:18.617

您的 bean 元素需要一个类属性：

```
<bean id="myTestServiceImpl" class="com.myproject.common.test.impl.TestServiceImpl">
    <property name="genericDao" ref="genericDao" />
</bean> 
```

id 属性只是在 bean 文件中其他地方引用 bean 的标识符。class 属性提供了 bean 所代表的类的名称。

# python - 正确地对用户代理进行 url 编码

> ID：13371465
> 
> 赞同：3
> 
> 时间：2012-11-14T00:50:33.153
> 
> 标签：python, string, escaping, urlencode

我是 Python 新手，似乎遇到了问题。我正在尝试对用户代理字符串进行 urlencode ...

```
import urllib

UserAgent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3 Gecko/2008092417 Firefox/3.0.3'
print 'Agent: ' + UserAgent
print urllib.urlencode(UserAgent) 
```

这导致...

```
Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3 Gecko/2008092417 Firefox/3.0.3
Traceback (most recent call last):
  File "D:\Source\SomePath\test.py", line 7, in <module>
    print urllib.urlencode(UserAgent)
  File "C:\Python26\lib\urllib.py", line 1254, in urlencode
    raise TypeError
TypeError: not a valid non-string sequence or mapping object
Press any key to continue . . . 
```

我只能假设尽管`UserAgent`打印正确，但我要么在输入的过程中丢失了一些字符串转义选项，要么在`urllib.urlencode()`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T00:55:57.907

`urllib.urlencode`期望每个具有两个项目的映射或序列。如[文档中所示](http://docs.python.org/2/library/urllib.html#urllib.urlencode)

在您的代码中，您需要执行以下操作：

```
urllib.urlencode({'Agent': UserAgent}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T00:57:10.687

韦西打败了我。为了将来参考，您也可以这样做：

```
>>> help(urllib.urlencode)
Help on function urlencode in module urllib:

urlencode(query, doseq=0)
    Encode a sequence of two-element tuples or dictionary into a URL query string.

    If any values in the query arg are sequences and doseq is true, each
    sequence element is converted to a separate parameter.

    If the query arg is a sequence of two-element tuples, the order of the
    parameters in the output will match the order of parameters in the
    input. 
```

# java - 在没有 java 命令的情况下在 linux 终端中执行 java 类

> ID：13371467
> 
> 赞同：0
> 
> 时间：2012-11-14T00:50:43.067
> 
> 标签：java, linux, command

我有一个 java 类 cs.class，我想从命令行执行它，就像您使用任何其他命令一样。我希望能够键入“cs file1”等，而不必使用“java cs file1”。我怎样才能做到这一点？

编辑：如果我把我的班级放在我的路径的任何地方，我也希望这个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:02:21.767

看起来[这](http://javacompiler.sf.net)将在 linux 上为您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:25:59.677

> 对于 Windows

创建一个名为 custom.cmd 的文件并将以下内容添加到其中

```
@echo off
DOSKEY cs=java cs $* 
```

现在

> 右键单击命令提示符快捷方式->属性->快捷方式选项卡->并将以下内容附加到目标字段
> 
> /KC:\custom.cmd

我的 custom.cmd 位于 C: 中，将路径更改为你的现在您可以在该 cmd shell 中使用“cs”作为命令。您可以提及您的文件名作为参数以及 $* 指定命令行参数。

# windows - Unix 与 Windows 的 GNU-Make 测试

> ID：13371475
> 
> 赞同：1
> 
> 时间：2012-11-14T00:52:32.163
> 
> 标签：windows, shell, unix, gnu-make

什么是 GNU-Make 测试，用于测试系统是 Unix 还是 Windows，并且可以在 Unix 和 Windows 上运行？

例如，如果 shell 命令在 unix 和windows 上`foo`总是等于，我可以在我的 makefile 中使用以下内容来获得这种效果：`bizz``buzz`

```
IS_UNIX := $(shell foo)

ifeq "$(IS_UNIX)" "bizz"
BUILD_ARCH := UNIX
else
BULID_ARCH := WINNT
endif 
```

什么命令可以充当`foo`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:40:07.197

这对我有用（`foo`== `ver`）：

```
IS_WINNT := $(shell ver)

ifeq "$(IS_WINNT)" ""
BUILD_ARCH := UNIX
else
BULID_ARCH := WINNT
endif 
```

# php - 如何为我的 wordpress 主题调用插件函数？

> ID：13371476
> 
> 赞同：0
> 
> 时间：2012-11-14T00:52:34.023
> 
> 标签：php, wordpress

我把这些代码行放在我的functions.php中

```
if(function_exist("showMessage")){
    showMessage();
} 
```

但它给了我一个致命的错误：

```
"Call to undefined function showMessage" 
```

我的插件上有这个功能

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:43:52.723

我在插件文件中的所有函数之上添加了这些代码行，它就像一个魅力

```
if (!defined('WP_CONTENT_URL'))
define('WP_CONTENT_URL', get_option('siteurl') . '/wp-content');
if (!defined('WP_CONTENT_DIR'))
    define('WP_CONTENT_DIR', ABSPATH . 'wp-content');
if (!defined('WP_PLUGIN_URL') )
    define('WP_PLUGIN_URL', WP_CONTENT_URL. '/plugins');
if (!defined('WP_PLUGIN_DIR') )
    define('WP_PLUGIN_DIR', WP_CONTENT_DIR . '/plugins'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:07:09.993

尝试将该功能连接到适当的挂钩。如果您将其用于调试目的，它应该运行的最早时间应该在`init`钩子中。

将此添加到函数文件中，它将在 init 钩子执行时运行 showMessage 函数：

```
add_action('init', 'showMessage'); 
```

为了获得更大的灵活性，您可以将其更改为使用您定义的函数：

```
add_action('init', 'run_debug');

function run_debug( ) {
    showMessage();
} 
```

有关更多信息，请访问[http://codex.wordpress.org/Plugin_API/Action_Reference](http://codex.wordpress.org/Plugin_API/Action_Reference)。

# rad - 服务器端口 9081 正在使用中，正在 RAD 中启动 Websphere Application Server

> ID：13371478
> 
> 赞同：0
> 
> 时间：2012-11-14T00:52:50.620
> 
> 标签：rad, launch, websphere-portal

关于我以前从未见过的问题的非常快速的问题。我一直在使用 RAD 6 进行 Java 开发，并安装了 Websphere 门户服务器 5.0。当我尝试启动服务器时，我在弹出窗口中收到以下错误：

![在此处输入图像描述](../Images/954903fa794d1b4fc446a9bd191bbd82.png)

在我的情况下，所描述的都不是真的……即使我重新启动了 PC，并且检查了任何冗余的 javaw.exe 进程，情况仍然如此。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:08:01.370

一个最简单的方法是从任务管理器中杀死jawa/javaw 进程。然后启动服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:11:33.163

启动命令提示符（如果您使用的是 Windows Vista 及更高版本，请确保以管理员模式启动它）。

类型：

`netstat -a -b`

这将显示所有被监听的端口。查找`9081`，然后您将能够看到正在捕获该端口的进程。

是哪个过程？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:33:18.513

我问了一位同事，他们建议您设置一个服务器，该服务器被定义为作为服务运行。由于该服务将随 Windows 自动启动，因此重新启动将无济于事。

检查您的 services.msc 并查看是否有 WebSphere 服务，然后尝试停止它并从 RAD 中启动您的服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:45:35.217

做一件事，如果可能的话。只需转到正在运行的程序并检查任何 java.exe 并停止/删除所有它们。并尝试重新启动您的服务器。并检查它是否有意义。

希望能帮助到你。

//生命值

# php - PHP 获取元素

> ID：13371480
> 
> 赞同：0
> 
> 时间：2012-11-14T00:52:54.797
> 
> 标签：php

我有以下代码。其中显示了 php.ini 中的网页。

```
<?php

$ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://jobseekers.direct.gov.uk/listjob.aspx?sessionid=94d5cfde-f7f1-40e9-bef6-2f587b4f04b0&pid=4&sid=421116805&p=1&so=1&rpp=20");
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    $curled=curl_exec($ch);
    curl_close($ch);
print_r($curled); 
```

?>

我想用 cURL 去掉诸如工作角色之类的元素。我想列出所有角色，但我知道如何通过观看教程来做到这一点。工作角色嵌入在 TD 类中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:55:15.447

所以你要做的实际上是 HTML 解析，CURL 只是为了获取页面。看看[这篇文章](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)作为一个好的开始。

我个人建议使用[SimpleDom](http://simplehtmldom.sourceforge.net/)，它使您能够在 HTML 文档上应用基于 css 选择器的语法。

# xcode - Xcode 4.5“应用retina 4 Form factor”切换按钮无法正常工作

> ID：13371483
> 
> 赞同：5
> 
> 时间：2012-11-14T00:53:14.720
> 
> 标签：xcode, ios6

我正在尝试为 IOS6 和 iPhone 5 更新 IOS 应用程序，但我在调整主 Storyboard 中的某些视图时遇到了问题。

当我单击新的“应用 Retina 4 外形尺寸”按钮时，StoryBoard 中包含的某些视图不会调整大小。我已经检查了每个场景的所有设置，并且似乎以相同的方式配置。任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:46:21.567

您可能已经找到了解决方案，但我遇到了类似的问题。为了将来的通知，我发现修复是在显示大小检查器中，而不是使用布局矩形，我使用了框架矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T05:06:04.200

我遇到了同样的问题，这个答案对我有用，最后删除了信箱：

[https://stackoverflow.com/a/12927282/539149](https://stackoverflow.com/a/12927282/539149)

因此，添加一个名为 Default-568h@2x.png 的 640x1136 启动图像，并为其设置“Retina (4-inch)”目标设置。其他尺寸的更多信息：

[http://www.idev101.com/code/User_Interface/launchImages.html](http://www.idev101.com/code/User_Interface/launchImages.html)

以防万一它对其他人有所帮助，我已经尝试了这些链接，但他们都没有摆脱信箱，但他们至少启用了调整大小蒙版：

[在情节提要中调整 UIViewController 的大小](https://stackoverflow.com/questions/9728952/resize-of-uiviewcontroller-in-storyboard)

[Xcode 4.5：无法在 Interface Builder 中设置根视图 autoresizingMask](https://stackoverflow.com/questions/14329726/xcode-4-5-cant-set-root-view-autoresizingmask-in-interface-builder)

[你如何在情节提要中调整 UISplitViewController 的详细视图的大小（视觉上，而不是编程方式）？](https://stackoverflow.com/questions/10902297/how-do-you-resize-visually-not-programmatically-the-detail-view-of-a-uisplitv)

[iphone 5 和情节提要设置自动调整大小蒙版](https://stackoverflow.com/questions/12939580/iphone-5-and-storyboard-setting-autoresizing-masks)

# delphi - Delphi XE2 - 如何获取指定网站的IP？

> ID：13371493
> 
> 赞同：5
> 
> 时间：2012-11-14T00:54:07.613
> 
> 标签：delphi, ip, resolveurl

我有一个程序可以检查 Web 服务器上的 php 文件以查看用户是否已通过验证。php 文件通过数据库运行，如果它们是，则检查并回显“已验证”。

现在，人们现在可以通过安装 Xampp 轻松绕过验证系统，在他们的 hosts 文件中将我的服务器路由到 127.0.0.1，然后设置一个回显验证的脚本。

我希望能够检查我的域的 IP 地址以检查它是否路由到 127.0.0.1。

我将如何通过delphi解析域的IP地址？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T01:39:52.560

我曾经使用类似的 hack 来绕过 ICQ 服务器端验证。当我想测试我未被邀请的 alpha/beta 版本时非常方便:-)

Delphi 附带的 Indy 有一个`TIdStack.ResolveHost()`函数和一个单独的`TIdDNSResolver`组件，它们都可以用来获取域的 IP。它还具有`TIdStack.LocalAddresses`检索本地 IPv4 地址的属性。或者您可以直接使用套接字 API`gethostbyname()`或`getaddrinfo()`函数，以及特定于平台的 API 来枚举本地 IP，就像`GetAdaptersAddresses()`Windows 上的函数一样。

但是，与其让 PHP 脚本简单地将纯文本回显到您的应用程序，不如让您的应用程序创建一个动态生成的 nonce 值并将其发送到 PHP 脚本，而不需要您验证 IP 的更安全的选择，然后让脚本根据需要使用只有您知道的算法对其进行处理、哈希处理，然后将其发送回应用程序。该应用程序可以执行相同的算法并比较结果。除非有人花时间对您的应用程序进行逆向工程，否则他们将无法使用自定义 Xampp 脚本重现您的算法或伪造其结果。

更好的是，使用 SSL/TLS 加密您与域服务器的连接，并为您的域服务器提供一个 SSL 证书，您的应用程序可以在它与您的 PHP 脚本交换任何数据之前验证该证书。如果您做了这么多，您可以继续使用纯文本回显，因为 SSL/TLS 将验证您是否已连接到您的域。

# javascript - 这会创建一个闭包吗

> ID：13371496
> 
> 赞同：1
> 
> 时间：2012-11-14T00:54:32.160
> 
> 标签：javascript, closures

我知道这是经典的关闭方式：

```
var dvs = document.getElementByTagName("div");

for (var i = 0, len = dvs.length; i < len; i++) {
    dvs.onclick = (function(i_) {
        return function() {
            alert(i_);
        };
    })(i);
} 
```

然而，在我的应用程序中我经常感到困惑，我的应用程序是基于谷歌地图的。

```
var app = function() {}
app.prototype = {
    init: function() {
        this.map = ..;
        this.infowindow = ..;
    },
    initEvent: function() {
        var that = this;
        google.maps.event.addListener(map, 'click', function() {
            that.infowindow.open(...);
        });
    }
} 
```

在`initEvent`方法内部，我创建了一个名为`that`context的变量`this`，然后在回调函数中调用它。

这会创建一个闭包吗？

我是这么认为的，因为当函数`addListener`返回时，变量`that`仍然被引用，被关闭。

这是真的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T00:58:59.233

从技术上讲， ECMAscript 中的*每个*函数在调用时都会创建一个闭包。它只是*词法作用域*的工作方式。在不深入细节的情况下，用作*click 事件的事件处理程序的**匿名函数*将关闭*其父上下文*。其中之一是分配给*initEvent的**匿名函数*。

 ***所以，是的，内部函数创建了一个闭包，因此可以`that`在其生命周期内访问。

```
Global Context <> initEvent <> click-event-handler 
```

这就是*作用域链*的样子。***

# wpf - 对于 VM 响应另一个 VM 中的属性更改，这是一种可接受的方式吗？

> ID：13371497
> 
> 赞同：0
> 
> 时间：2012-11-14T00:54:38.917
> 
> 标签：wpf, mvvm, prism

假设我有 2 个实现 INotifyPropertyChanged 的​​ VM 类（在这种情况下是 Prism NotificationObject），并且我希望一个 VM 响应另一个 VM 中的属性更改？

假设这些都是子虚拟机作为父虚拟机上的属性，有哪些方法可以在不使用事件聚合器/调解器的情况下将它们从父虚拟机连接起来？

我计划让监听 VM 公开的 ICommand（PRISM DelegateCommand）通过父 VM 连接到另一个 VM 的 PropertyChanged 事件。

首先，这是一种可接受的方式吗？其次，如何将 ICommand 连接到事件？我是否必须使用附加行为，例如编程 EventToCommand 或类似行为，还是有更直接的方法来做到这一点？

其次，在 MVVM 的哲学中，这是一种可接受的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:09:32.583

它更直接——因为您的事件侦听器具有对目标类的完全访问权限，您可以直接调用方法/命令。

```
sourceVM.PropertyChanged += (sender, args) => {
    if (args.PropertyName.Equals("Property to listen for"))
    {
        targetVM.Method();
    }
}; 
```

或者，如果目标需要是一个`ICommand`而不是常规方法，那么请`targetVM.Command.Execute(null);`改用。

我还建议在您的源类中创建一个自定义事件，这样您就不会依赖`OnPropertyChanged`属性名称“魔术字符串”。

* * *

就 MVVM 和良好设计的理念而言，我认为它确实有些偏离，因为现在你的两个视图模型耦合得更紧密了。这并不是说这种方法一定不好，但看起来 Prism 的事件聚合器可能是一个更好的选择。

# java - 需要一些关于二维字符串数组的解释

> ID：13371503
> 
> 赞同：4
> 
> 时间：2012-11-14T00:55:08.217
> 
> 标签：java, arrays, eclipse

在基本二维字符串数组的嵌套`for`循环中，我遇到了这个：

```
 array = new String [5][10];
for(int i=0; i<array.length;i++)
{
    for(int j=0; j<array[0].length;j++)
    {
        System.out.print(array[i][j]="*");
    }
    System.out.println("");
} 
```

现在这就是我想知道的，为什么第二个`for`语句在它之前的语句中包含`array[0].length`而不是`array.length`like `for`？

我在实验时可以从中提取的只是如果两个`for`语句都包含`array.length`并且 2D 数组是 5x10，它将打印为 5x5，但`array[0].length`它会打印正确的 5x10。

那么为什么这个小小的调整可以解决所有问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:58:19.513

你正在处理一个*二维*数组。`array.length`本质上为您提供了行数，但`array[0].length`提供了*列*数（至少对于非锯齿状数组）。举个例子：

```
String[][] array = new String[][]{
    {"1","2"},
    {"3","4"},
    {"5","6"}
}; 
```

这里`array.length`是`3`（整个二维数组由*三个*一维数组组成），但是`array[0].length`是`2`（*每个组成数组*的长度）。您的第一个`for`-loop 循环遍历整个数组数组，但您的第二个循环遍历外部循环遇到的每个*组成*数组。因此，内部循环应该只循环到（但不包括）**`array[0].length`**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T01:04:52.387

二维数组就像一个矩阵，由`String`对象数组的数组表示。当你定义：

```
array = new String [5][10]; 
```

你说“我想要一个长度为 10 的 5 个字符串数组的数组”，如下所示：

```
 [String[10]][String[10]][String[10]][String[10]][String[10]] 
```

这里：

```
for(int i=0; i<array.length;i++)
{
    for(int j=0; j<array[0].length;j++) //I'd recommend j < array[i] here. Nothing 
                                        //changes on this case, but it would bring 
                                        //some trouble if the second dimention of the 
                                        //array was not the same for every case.
    {
        System.out.print(array[i][j]="*");
    }
    System.out.println("");
} 
```

第一个 for 迭代五个`String`数组的数组，这就是为什么 i 从`0`to`4`并且数组的长度为 5。第二个 for 迭代`String[]`第一个数组中包含的对象的索引（具有 length 的那个`5`）。该数组具有一定长度的`10`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:56:48.513

这是因为`array[0]`实际上是一个`String[]`数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:57:14.307

第二条`for`语句需要获取数组中的列数，在本例中为 10。

*   `array.length`- 不。行数
*   `array[0].length`- 列数

这个数组被假定为方形而不是锯齿状，因此`array[0]`在这个例子中使用被认为是安全的。

让我们看看**错误**的方式： 通过这样做：

```
for (int i=0; i<array.length;i++) {
    for(int j=0; j < array.length;j++) {
        System.out.print(array[i][j]="*");
    }
} 
```

您只显示 5 x 5 个条目，缺少一半的条目数。此外，如果数组最初是 10 行 x 5 列，`ArrayIndexOutOfBoundsException`则会抛出 an ，因为当 时超过列数`j = 5`。

显示二维数组的一种便捷方式是：

```
System.out.println(Arrays.deepToString(array)); 
```

# php - 如何包含具有相对路径的文件？

> ID：13371507
> 
> 赞同：3
> 
> 时间：2012-11-14T00:55:22.410
> 
> 标签：php

有一个文件目录是这样的：`magento\app\design\frontend\default\template\catalog\product\view.phtml`

另一个文件目录如下：`magento\blog\wp-blog-header.php`

现在，如果我想在 view.phtml 中包含 wp-blog-header.php。我该怎么做？谢谢。

```
include('../../../../../../../wordpress/wp-blog-header.php'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:14:47.477

您可以使用文档根目录（“ `$_SERVER["DOCUMENT_ROOT"]`”）。但这仅适用于您的应用程序作为唯一应用程序安装在 Web 服务器的基本目录中的情况。如果您在子目录中运行应用程序，则需要对此进行调整。但是，这将使应用程序的可移植性降低，因为您无法在不修改代码的情况下轻松更改目录。

根据您的示例，您似乎正在运行 Magento，使用 Magento，您可以使用 " `Mage::getBaseDir`" 方法获取 Magento 的基本目录并从中获取相关的包含文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:58:06.610

就我个人而言，我会从头开始，而不是所有这些 ../../ jazz：

```
include($_SERVER['DOCUMENT_ROOT'] . "/path-to-include-file"); 
```

您确定 wordpress 标头与 magento 兼容吗？那里可能会遇到一些可怕的异常情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T00:59:13.303

那行得通，您只需要计算斜线以确保它与以前相同。但是，您也可以在`magento\app\design\frontend\default\template\catalog\product\`目录中创建指向`magento\blog\wp-blog-header.php`.

`ln -s magento\blog\wp-blog-header.php wp-blog-header.php`会做的伎俩然后你可以：`include ("wp-blog-header.php");`

您也可以`$_SERVER["DOCUMENT_ROOT"]`在包含中引用。

# javascript - Javascript：如何调用 元素值

> ID：13371508
> 
> 赞同：0
> 
> 时间：2012-11-14T00:55:25.860
> 
> 标签：javascript

谁能给我 javascipt 代码以`sf_number`从我的 HTML 中提取以下实例？

```
<ul class="multi_value_field" style="width: 99.5%;">
<li class="choice" choice_id="sf_number">sf_number<a class="close">×</a><input type="hidden" name="ticket[set_tags][]" value="sf_number" style="display: none;"></li>
<li class="search_field_item"><input type="text" autocomplete="off" tabindex="20"></li>
</ul> 
```

基本上我想用`sf_number`另一个字段的不同值替换所有三个实例。这是我为尝试提取 sf_number 但到目前为止不起作用的代码：

```
var n2 = document.getElementsByClassName("multi_value_field").getElementsByClassName("choice"); 
```

提前致谢

**更新** 如何使用您的以下建议更改我现有的代码？

```
<html>
<script type="text/javascript">
copy = function()
{
    var n1 = document.getElementById("ticket_fields_20323656");
    var n2 = document.getElementById("choice").getElementsByClassName("sf_number")[0] ;
    n2.value = n1.value;
}
</script>

<input type="button" value="copy" onClick="copy();" />
</html>​​​​​ 
```

**更新**

这似乎不起作用，对吗？

```
<html>
<script type="text/javascript">
copy = function()
{
var fields = document.getElementsByClassName("multi_value_field")[0].getElementsByClassName("choice");

for (var i = 0; i < fields.length; i++)

    fields[i].setAttribute("choice_id", "document.getElementById("ticket_fields_20323656").value");
    fields[i].getElementsByTagName("input")[0].value = "document.getElementById("ticket_fields_20323656").value";
    fields[i].firstChild.nodeValue = "document.getElementById("ticket_fields_20323656").value";
}
</script>

<input type="button" value="copy" onClick="copy();" />
</html>​​​​​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:59:33.440

`var n2 = document.getElementsByClassName("multi_value_field")` 返回一个节点列表

所以你需要使用for循环来迭代列表..

```
var n2 = document.getElementsByClassName("multi_value_field");

for(var i =0;i< n2.length;i++){
  var $li =  n2[i].getElementsByClassName("choice"); This is again a Node list.

  for(var j = 0;j< $li.length ; j++){
     $li[j] // This the li in question
  }
} 
```

**更新**

```
var n1 = document.getElementById("ticket_fields_20323656"); 
var n2 = document.getElementById("choice").getElementsByClassName("sf_number");
// The above line again return's node List .... 
n2.value = n1.value; 
```

如果你觉得它只有一个类，用这一行替换它

```
var n2 = document.getElementById("choice").getElementsByClassName("sf_number")[0] ; 
```

但问题是我`id="choice"`在`HTML.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:07:35.963

试试这个代码。你也想替换文本吗？

```
<script>
var fields = document.getElementsByClassName("multi_value_field")[0].getElementsByClassName("choice");

for (var i = 0; i < fields.length; i++)
{
    fields[i].setAttribute("choice_id", "something else");
    fields[i].getElementsByTagName("input")[0].value = "something else";
    fields[i].firstChild.nodeValue = "something else";
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:46:13.043

我不确定我是否理解你的问题。

没有名为“choice_id”的 HTML 属性，使用非标准属性不是一个好主意。如果您想使用值 'sf_number' 识别多个元素，则应使用类代替，例如

```
<li class="choice sf_number">sf_number<a class="close">×</a>...</li> 
```

`getElementsByClassName`现在您可以使用, 或获取所有具有“sf_number”类的元素`querySelectorAll`。您可以为其中一个或两个添加垫片以使生活更轻松，然后使用：

```
var sfNumbers = document.querySelectorAll('.sf_number'); 
```

然后，您可以根据其他答案遍历集合。

一个元素可以有多个类，上面将只选择那些具有“sf_number”类的元素。如果要选择 text `sf_number`，最好将其放在 span 或类似元素中，以便更直接地引用它。依赖不同的浏览器一致地插入文本节点并不是一个好主意。

# c++ - std::find_end 作为 Big-O 的复杂性

> ID：13371509
> 
> 赞同：7
> 
> 时间：2012-11-14T00:55:41.133
> 
> 标签：c++, algorithm, complexity-theory

如何将`std::find_end`算法的复杂性表示为 Big-O 表示法？

的复杂度`std::find_end`定义如下：

> 最多`(last2 - first2) * (last1 - first1 - (last2 - first2) + 1)` 应用相应谓词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:05:23.883

它是`O(M*(N-M))`，其中`N`是序列 1 中`M`的元素数， 是序列 2 中的元素数。

# php - CodeIgniter DataMapper - where_join_field 生成不正确的查询

> ID：13371520
> 
> 赞同：1
> 
> 时间：2012-11-14T00:56:38.747
> 
> 标签：php, codeigniter, jointable, codeigniter-datamapper

我的程序正在使用带有 CodeIgniter 的 WanWizard DataMapper ORM，并且需要基于连接表中的字段执行简单的查询。这是我的代码：

```
$d = new Deal();

$deals = $d
    ->where_join_field('networks', 'status', 'active')
    ->get(); 
```

如您所见，相当简单。“交易”和“网络”之间的多对多关系，在连接表中有一个“状态”字段。但是，这是它生成的查询：

```
SELECT * FROM (`deal`) WHERE `deal_network`.`status` = 'active' 
```

显然，这根本行不通，因为没有`JOIN`地方可以引入`deal_network`表。我尝试使用`include_related`，但它将`deal_network`表别名为`networks_deal_network`，导致表引用不正确。如何`JOIN`正确地将 DataMapper 到该表的查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:49:37.113

看来这`_join_field`是`libraries/datamapper.php`. 我分叉并提交了一个带有修复程序的拉取请求。

[https://bitbucket.org/jonahbron/datamapper](https://bitbucket.org/jonahbron/datamapper)

# python - 是否可以在 Python 中使用实例中的方法来装饰类中的方法

> ID：13371524
> 
> 赞同：1
> 
> 时间：2012-11-14T00:57:05.083
> 
> 标签：python, decorator

我试图在定义类时包装一个函数，在这个类的实例中使用方法

下面是一个有效的代码

```
class A(object):   
    def __init__(self):    
        pass       

    @self_decorator 
    def to_be_decorated(self):
        pass       

def self_decorator(fn):    
    from functools import wraps
    @wraps(fn)     
    def wrapper(*args, **kwargs):
        self = args[0]     
        return self.app.route('/twip')(fn(*args, **kwargs))

    return wrapper 
```

我实际上试图得到什么：

```
class A(object):   
    def __init__(self):    
        self.app = APP()    

    @self.app.wrapper_function # which apparently doesn't work
    def to_be_decorated(self):
        pass 
```

那么，我的装饰方式有可能奏效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:01:18.350

在类定义中没有自我，因为该类还不存在并且无法实例化。

您可以使用

```
class A(object):
    app = APP()

    @app.wrapper_function
    def to_be_decorated(self):
        pass 
```

但这将是一个类变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:54:58.863

装饰器只是一个在定义时被调用的函数。

当你写这个：

```
@self.app.wrapper_function # which apparently doesn't work
def to_be_decorated(self):
    pass 
```

它与写这个大致相同：

```
def to_be_decorated(self):
    pass
to_be_decorated = self.app.wrapper_function(to_be_decorated) 
```

一旦你这样看，很明显为什么这不起作用，而且不可能起作用。

首先，`A`的类定义没有 self 变量，也没有即使有也可以访问`A`的成员。`app`相反，每个实例`A`都有自己独特的`self.app`.

即使您希望口译员可以“按照我的意思做”，但如果您考虑一下，那也没有任何意义。你想调用“the”`self.app.wrapper_function`方法，但没有这样的东西。除非您在可以定义或重新定义方法的所有地方通读所有相关代码，否则绝对不能保证`self.app.wrapper_function`来自不同实例`A`的`func_code`. 但是，即使他们这样做了，`self.app.wrapper_function`也是一个绑定方法——一个与调用它的对象绑定在一起的方法——所以它们仍然彼此不同。

有很多方法可以解决这个问题，但它们都是相同的技巧：使用某种间接来获取一个不是`self.app`or成员的函数`self`，并在调用时引用`self.app`。这基本上就是你`self_decorator`所做的，这是不可避免的。

# scheme - 为什么Scheme允许在闭包中突变到封闭环境？

> ID：13371530
> 
> 赞同：3
> 
> 时间：2012-11-14T00:57:50.460
> 
> 标签：scheme

以下方案代码

```
(let ((x 1))
   (define (f y) (+ x y))
   (set! x 2)
   (f 3) ) 
```

它的计算结果是 5 而不是 4。考虑到 Scheme 促进了静态作用域，这令人惊讶。允许后续突变影响闭包中封闭环境中的绑定似乎恢复到有点动态范围。允许它的任何具体原因？

编辑：

我意识到上面的代码不太明显地揭示了我所关心的问题。我在下面放了另一个代码片段：

```
(define x 1)

(define (f y) (+ x y))

(set! x 2)

(f 3)  ; evaluates to 5 instead of 4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T04:09:10.660

您在这里混淆了两个想法：作用域和通过内存的间接性。词法作用域保证你的引用`x`总是指向绑定`x`中的`let`绑定。

在您的示例中没有违反这一点。从概念上讲，`let`绑定实际上是在内存中创建一个新位置（包含`1`），并且*该位置*是绑定到 的值`x`。当该位置被取消引用时，程序会在该内存位置查找当前值。使用时`set!`，它会在内存中设置值。只有有权访问绑定到的位置`x`（通过词法范围）的各方才能访问或改变内存中的内容。

相反，动态范围允许任何代码更改您在 中引用的值`f`，无论您是否授予对绑定到 的位置的访问权限`x`。例如，

```
(define f
  (let ([x 1])
    (define (f y) (+ x y))
    (set! x 2)
    f))

(let ([x 3]) (f 3)) 
```

将返回`6`一个具有动态范围的虚构方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T12:43:14.807

允许这样的突变是*极好*的。它允许您定义具有内部状态的对象，只能通过预先安排的方式访问：

```
(define (adder n)
  (let ((x n))    
    (lambda (y)
      (cond ((pair? y) (set! x (car y)))
            (else (+ x y))))))

(define f (adder 1))
(f 5)                 ; 6
(f (list 10))
(f 5)                 ; 15 
```

`x`除了通过`f`函数及其已建立的协议之外，没有办法改变它——正是因为 Scheme 中的*词法*作用域。

该`x`变量指的是内部环境框架中的内存单元，属于`let` *定义*内部的环境`lambda`- 因此返回组合`lambda`及其定义环境，也称为“闭包”。

如果你不提供改变这个内部变量的协议，没有什么可以改变它，因为它是*内部*的，我们早就离开了定义范围：

```
(set! x 5) ; WRONG: "x", what "x"? it's inaccessible! 
```

* * *

编辑：您的新代码完全改变了您问题的含义，那里也没有问题。就像我们仍然在那个定义环境中一样，所以内部变量自然仍然可以访问。

比较有问题的是以下

```
(define x 1)
(define (f y) (+ x y))
(define x 4)
(f 5) ;?? it's 9. 
```

我希望第二个定义不会干扰第一个，但[R5RS](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-8.html#%_sec_5.2.1) 说`define`就像`set!`在顶层一样。

闭包将它们的定义环境与它们打包在一起。**顶级环境始终是可访问的。**

`x`引用的变量`f`位于顶级环境中，因此可以从同一范围内的任何代码访问。也就是说，*任何*代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T01:12:13.077

不，它不是动态范围。请注意，您的`define`此处是一个内部定义，只有`let`. 具体来说，`f`不是在模块级别定义的。所以什么都没有泄露出去。

内部定义在内部实现为`letrec`(R5RS) 或`letrec*`(R6RS)。因此，它被视为相同（如果使用 R6RS 语义）：

```
(let ((x 1))
  (letrec* ((f (lambda (y) (+ x y))))
    (set! x 2)
    (f 3))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T16:06:43.210

我的答案很明显，但我认为其他人没有触及它，所以让我说：*是的，它很可怕*。您在这里真正观察到的是，突变使您很难推断您的程序将要做什么。纯功能代码——没有突变的代码——在使用相同的输入调用时总是产生相同的结果。具有状态和突变的代码不具有此属性。使用相同的输入两次调用一个函数可能会产生不同的结果。

# python - 奇怪的重定向位置导致 urllib2 出现代理错误

> ID：13371534
> 
> 赞同：4
> 
> 时间：2012-11-14T00:58:09.850
> 
> 标签：python, urllib2

我正在使用 urllib2 使用 Python 2.7.3 执行 http 发布请求。我的请求返回 HTTPError 异常（HTTP 错误 502：代理错误）。

查看与 Charles 的消息流量，我看到正在发生以下情况：

1.  我使用 urllib2 发送 HTTP 请求（POST /index.asp?action=login HTTP/1.1）
2.  远程服务器回复状态 303 和 ../index.asp?action=news 的位置标头
3.  urllib2 重试发送 get 请求：(GET /../index.asp?action=news HTTP/1.1)
4.  远程服务器回复状态为 502（代理错误）

502 回复在响应正文中包含以下内容：“DNS 查找失败：10.0.0.30:80index.asp”（注意格式错误的 URL）

所以我认为这意味着远程服务器网络上的代理服务器在请求中看到“/../index.asp” URL 并误解它，从而使用错误的 URL 发送我的请求。

当我使用浏览器 (Chrome) 发出相同的请求时，重试将发送到 GET /index.asp?action=news。因此，Chrome 从 URL 中去掉了前导的“/..”，远程服务器回复了一个有效的响应。

这是一个 urllib2 错误吗？有什么办法可以让重试忽略 URL 中的“/..”吗？或者有没有其他方法可以解决这个问题？认为这可能是一个 urllib2 错误，我用请求替换了 urllib2，但请求产生了相同的结果。当然，这可能是因为 requests 是建立在 urllib2 之上的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:30:54.777

与该 302 一起发送的位置在多个方面都是错误的。

首先，如果您阅读[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)（HTTP/1.1 标头字段定义）14.30 Location，则 Location 必须是绝对URI，而不是相对URI。10.3.3 节明确说明这是相关定义。

其次，即使允许使用相对 URI，[RFC 1808](https://www.rfc-editor.org/rfc/rfc1808)`..` ，Relative Uniform Resource Locators，4\. Resolving Relative URLs，第 6 步，仅在模式中指定特殊处理`<segment>/../`。这意味着相对 URL 不应以`..`. 因此，即使基本 URL 是`http://example.com/foo/bar/`并且相对 URL 是`../baz/`，解析的 URL 也不是`http://example.com/foo/baz/`，而是`http://example.com/foo/bar/../baz`。（当然大多数服务器会以同样的方式处理这些，但这取决于每个服务器。）

最后，即使您在解析之前确实结合了相对 URL 和基本 URL `..`，路径以 开头的绝对 URI`..`也是无效的。

因此，该错误存在于服务器的配置中。

现在，碰巧许多用户代理都会解决这个错误。特别是，他们变成`/../foo`阻止`/foo`用户（或在他们不知情的情况下代表他们运行的任意 JS）尝试进行“逃避 webroot”攻击。

但这并不意味着`urllib2`应该这样做，或者不这样做是错误的。当然`urllib2`应该更早地检测到错误，以便它可以告诉您“无效路径”或其他内容，而不是一起运行一个非法的绝对 URI，这会混淆服务器向您发送无意义的错误。但失败*是*对的。

说服务器配置错误固然很好，但除非您是服务器的负责人，否则您可能会面临一场艰苦的战斗，试图让他们相信他们的网站已损坏并且需要修复它适用于他们关心的每个网络浏览器。这意味着您可能需要编写自己的解决方法来处理他们的网站。

做到这一点的方法`urllib2`是为您自己[`HTTPRedirectHandler`](http://docs.python.org/2/library/urllib2.html#httpredirecthandler-objects)提供一个方法实现，`redirect_request`该方法可以识别这种情况并返回`Request`与默认代码不同的值（特别是，`http://example.com/index.asp?action=news`而不是`http://example.com/../index.asp?action=news`）。

# sql - 从 HAVING 子句表达式中投影一个值

> ID：13371538
> 
> 赞同：5
> 
> 时间：2012-11-14T00:58:18.993
> 
> 标签：sql

我提前道歉，因为我对 SQL 有点陌生，所以我的代码可能看起来毫无意义，但我会尽我所能理解它，希望你更有经验的人能帮助我。我不确定它是否会有所帮助，但我使用的是 Oracle 数据库。

我有两张桌子：

**Elements** - 这包含一个*elementID*和一个*elementName*字段
**Exchanges** - 这包含一个*exchangeID*和一个*elementID*字段

我创建了以下查询，以便仅检索超过 50% 的交换中出现的元素：

```
SELECT e.elementName
FROM Elements e
WHERE e.elemID in
(SELECT elemID FROM Exchanges
GROUP BY elemID
HAVING (count(*) / (SELECT count(*) FROM
(SELECT exchangeID, count(*) FROM Exchanges GROUP BY exchangeID))) > 0.5); 
```

这部分似乎工作正常，但我还需要检索交换中每个项目的出现百分比。因此，例如，如果元素 A 出现在 76% 的交换中，元素 B 出现在 59% 的交换中，我想返回一行包含 A 和 76% 的行和另一行包含 B 和 59% 的行。在我看来，这意味着以某种方式获得 HAVING 子句左侧表达式的结果：

```
(count(*) / (SELECT count(*) FROM
(SELECT exchangeID, count(*) FROM Exchanges GROUP BY exchangeID))) 
```

这个表达式给了我我正在寻找的百分比，但是我无法找到一种方法来使用这个表达式，以便我可以用 SELECT 检索它，以便我可以将它与其对应的 elementName 配对就像我刚才解释的那样。

有没有办法将此值传播到我的 SELECT 以便我可以检索我正在寻找的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:40:02.600

您将需要预先聚合两个派生表 (1) 每个元素的交换，以及 (2) 交换的总数。其余的成为基本的。

```
 SELECT x.elementName, A.elemExchanges/B.totalExchanges Percentage
      FROM
(
    SELECT x.elemID,
           count(distinct x.exchangeID) elemExchanges
      FROM Exchanges x
  GROUP BY x.elemID
) A
CROSS JOIN
(
    SELECT COUNT(distinct y.exchangeID) totalExchanges
      FROM Exchanges y
) B
      JOIN Elements e on e.elemID = A.elemID
     WHERE A.elemExchanges/B.totalExchanges > 0.5; 
```

# java - jsp中的UTF-8编码

> ID：13371541
> 
> 赞同：1
> 
> 时间：2012-11-14T00:58:42.087
> 
> 标签：java, jsp, utf-8

我目前正在从我的 jsp 页面中的一个类中的方法返回一个 utf-8 编码的字符串，但是尽管字符串的大多数字符都可以，但由于所有字母都被编码为 ??

如何解决这个问题？

我有 jsp 页面所需的正确指令，以便将其内容编码为 utf-8

我的字符串的内容是希腊语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:14:12.120

你用过这个指令`<%@page contentType="text/html;charset=UTF-8"%>`吗？

这会将您设置`content-type`为 utf-8 和您的`pageEncoding`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T18:47:12.623

我遇到了同样的问题，对我来说，在 web.xml 中添加来自 spring 的 CharacterEncodingFilter 修复了：

```
<filter>
    <filter-name>SetCharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>SetCharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

即使你的项目中不使用spring也可以使用（只需下载spring-web-xxx.jar）。

或者您可以创建自己的过滤器来执行此操作：

```
request.setCharacterEncoding("UTF8");
response.setCharacterEncoding("UTF8"); 
```

例如，您可以在 grepcode.com 上找到 org.springframework.web.filter.CharacterEncodingFilter 的源代码，以查看它的确切作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T14:31:52.193

我是如何做到以下几点的：

我正在使用 Eclipse IDE 并将 Window > Preferences > General > Workspace > Text File Encoding 设置为 UTF-8。

在那之后，我所有的编码问题，神奇地消失了！！！！！！

有人可以解释一下吗？

# ios - iOS：获得位置用户的最佳方式

> ID：13371551
> 
> 赞同：0
> 
> 时间：2012-11-14T00:59:30.513
> 
> 标签：ios, map, geolocation

我有一个 MKMapView 类，我想在地图上显示由图像表示的用户位置。所以，我读了这个教程：[http ://www.switchonthecode.com/tutorials/getting-your-location-in-an-iphone-application](http://www.switchonthecode.com/tutorials/getting-your-location-in-an-iphone-application)

这家伙在视图上使用 locationmanager，我需要在 MKMapView 上使用它。

对我来说，最好的方法是创建一个仅用于控制用户位置的类？我怎样才能做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:26:52.600

为此，您需要实施`MKAnnotation`&`MKMapView`代表。

实现此方法以将默认引脚更改为自定义图像。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
  {
    if ([annotation isKindOfClass:[MKUserLocation class]])
    {
        // Create a custom MKAnnotationView here that will display your image.
        //user current location
    }

    static NSString *identifier = @"MyLocation";   
    if ([annotation isKindOfClass:[MyLocation class]])
    {

        MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil)
        {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        }
        else
        {
            annotationView.annotation = annotation;
        }

        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;
        annotationView.image=[UIImage imageNamed:@"yourImage.png"];

        return annotationView;
    }

    return nil;    
} 
```

请参考本[教程](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:13:11.467

首先，您希望该位置显示在您的地图上：

`yourMapView.showsUserLocation = YES;`

然后您需要处理用于显示用户位置的注释视图的委托方法：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation {
    if ([annotation isKindOfClass:[MKUserLocation class]]) {
        // Create a custom MKAnnotationView here that will display your image.
    }
} 
```

确保正确设置`delegate`。`MKMapView`

# javascript - Creating Symbol, then Deleting it

> ID：13371556
> 
> 赞同：0
> 
> 时间：2012-11-14T00:59:52.443
> 
> 标签：javascript, jquery, adobe-edge

I'm working with edge to make an animation in JS/jQ. All I'm trying to do right now, is initiate a symbol on the stage, and then delete it halfway through the timeline.

So, to begin with, I have a variable called food, that does a sym.createChildSymbol on a symbol called Food_Spanner:

```
var food = sym.createChildSymbol("Food_Spanner", "Stage"); 
```

and then further down on my timeline, I have:

```
sym.getSymbol(food).deleteSymbol(); 
```

When I run it, it isn't deleting it at all, I get an error in my Developer Tools (Google Chrome) "Javascript error in event handler! Event Type = timeline". The animation plays, and my food is initiated, just not removed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:43:36.133

Maybe it's late to answer now.. To delete the symbol you have 2 options.

Option 1:

```
food.deleteSymbol(); 
```

Option 2 (better one):

```
sym.getSymbol("Food_Spanner").deleteSymbol(); 
```

In the option 1 you are using the variable food which is the symbol you just created. In the option 2 you are finding the symbol using the function getSymbol on the stage, passing it a string which is the name of the symbol you want to find. Note that you don't need the variable food at all, because you can always recover your symbol instances finding them by name.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T23:26:15.757

If you're inside of the symbol you wish to destroy:

edit: Correcting myself here. It should be:

```
sym.deleteSymbol(); 
```

not:

`this.deleteSymbol();`

But they both work.

# java - 布尔数组和无限循环的麻烦

> ID：13371557
> 
> 赞同：1
> 
> 时间：2012-11-14T00:59:57.813
> 
> 标签：java, arrays, loops, boolean

我正在从事一个名为 life 的项目，该项目应该随机显示 1 表示活着或 0 表示死亡。当我执行程序时，零和一继续打印。我查看了代码，我找不到错误。

```
public class Life {
//Makes the first batch of cells
public static boolean firstgen(boolean[][] a)
{
    int N = 5;
    double cellmaker = Math.random();
    //boolean[][] b = new boolean[N][N];

    for (int i = 0; i < N; i++)
    {
        for (int j= 0; j< N;j++)
        {
            if (cellmaker >0.5)
            {
                a[i][j]= true;

                return true;
            }
            else
                a[i][j]=false;
        }
    }

    return false;

}

public static void main(String[] args)
{

 boolean[][] b = new boolean[5][5];

  //Placing the cells
  for (int i =0;i < 5; i++)
  {
      for (int j= 0 ; j < 5;i++)
      {
        if (firstgen(b)== true)
        {
            System.out.print("1"); //1 is live cell
        }
        else
            System.out.print("0");// 0 is dead cell 
     }

      System.out.println();
  }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T01:01:36.570

在以下您的`main`方法中

```
for (int j= 0 ; j < 5;i++) 
```

你应该增加`j`而不是`i`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T01:02:14.890

您的随机呼叫在任何循环之外。因此，它是一个常数，它将使您始终处于循环状态。将随机调用放在循环中，你会没事的。

```
public static boolean firstgen(boolean[][] a)
{
    int N = 5;
    //boolean[][] b = new boolean[N][N];

    for (int i = 0; i < N; i++)
    {
        for (int j= 0; j< N;j++)
        {
            double cellmaker = Math.random();
            if (cellmaker >0.5)
            {
                a[i][j]= true;

                return true;
            }
            else
                a[i][j]=false;
        }
    }

    return false;
} 
```

另外，正如 Bhesh 所指出的，在这里将 i++ 更改为 j++

```
 for (int i =0;i < 5; i++)
  {
      for (int j= 0 ; j < 5;j++)
      {
        if (firstgen(b)== true)
        {
            System.out.print("1"); //1 is live cell
        }
        else
            System.out.print("0");// 0 is dead cell 
     } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T01:22:13.900

试试这些

```
//Makes the first batch of cells
public static boolean firstgen(boolean[][] a)
{
    int N = 5;
    double cellmaker = Math.random();
    //boolean[][] b = new boolean[N][N];

    for (int i = 0; i < N; i++)
    {
        for (int j= 0; j< N;j++)
        {
            if (cellmaker >0.5)
            {
                a[i][j]= true;
                return true;
            }
            else
                a[i][j]=false;
        }
    }

    return false;
}

public static void main(String[] args)
{
    boolean[][] b = new boolean[5][5];
  //Placing the cells
    for (int i =0;i < 5; i++)
    {
        for (int j= 0 ; j < 5;j++)
        {
            if (firstgen(b))
            {
                System.out.print("1"); //1 is live cell
            }
            else
                System.out.print("0");// 0 is dead cell 
        }
        System.out.println();
    }
} 
```

# linux - shell 脚本中的定时陷阱

> ID：13371558
> 
> 赞同：1
> 
> 时间：2012-11-14T01:00:10.903
> 
> 标签：linux, bash, shell, unix

我有一个运行“nohupped”的shell脚本后台进程。这个过程应该在陷阱中接收信号，但是在玩一些代码时，我注意到如果它们之间的间隔太小，一些信号会被忽略。陷阱函数的执行花费了太多时间，因此后续的信号将不可用。不幸的是，陷阱命令没有某种信号队列，这就是我问的原因：解决这个问题的最佳方法是什么？

一个简单的例子：

```
function  receive_signal()
{
local TIMESTAMP=`date '+%Y%m%d%H%M%S'`
echo "some text" > $TIMESTAMP
}

trap receive_signal USR1

while :
do 
   sleep 5
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:38:05.437

在不重新设计方法的情况下，最简单的更改是使用排队的[实时信号](http://pubs.opengroup.org/onlinepubs/9699919799/idx/realtime.html)。

这不是便携式的。实时信号本身是一个可选扩展，在任何情况下扩展都不需要对它们的 shell 和实用程序支持。然而，Linux 上的相关 GNU 实用程序——`bash(1)`而且`kill(1)`——*确实*以常识的方式支持实时信号。所以，你可以说：

```
trap sahandler RTMIN+1 
```

并且，在其他地方：

```
$ kill RTMIN+1 $pid_of_my_process 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:09:48.697

您是否考虑过多个单行陷阱语句？每个要阻止或处理的信号一个？

```
trap dosomething 15
trap segfault    SEGV 
```

由于您刚刚遇到的原因，您还希望在信号处理程序中包含尽可能少的代码。

编辑 - 对于 bash，您可以在 C 中编写自己的错误处理/信号处理，或者如果您想要使用动态可加载模块，则可以使用现代信号语义编写任何其他代码：

[http://cfajohnson.com/shell/articles/dynamically-loadable/](http://cfajohnson.com/shell/articles/dynamically-loadable/)

# wpf - 使用 protobuf-net RuntimeTypeModel 和 WPF 客户端预编译的问题

> ID：13371559
> 
> 赞同：2
> 
> 时间：2012-11-14T01:00:22.550
> 
> 标签：wpf, wcf, performance, protobuf-net, precompile

任何人都可以阐明我如何将预编译的 protobuf-net 序列化程序程序集与 WCF 和客户端一起使用（而不是在代码中序列化/反序列化）来加速 DTO 类型的首次使用？

通过使用 protobuf-net 与 datacontractserializer，我已经设法在我的大型 WCF/WPF 应用程序中获得了很多性能改进。但是，即使我可以从我的 DTO 预编译序列化程序集，我也无法让 WCF 或其 WPF 客户端使用它。Web 服务进程对于来自该进程的任何第一次调用涉及新的 DTO 总是需要很长时间，大概是为了动态生成序列化程序集。如何指示 WCF 服务器和/或 WPF 客户端使用我生成的程序集？

在一个相关问题上，我在某些 DTO 中有 SolidColorBrush 类型的属性，这使得预编译器因“没有为类型定义的序列化程序：System.Windows.Media.SolidColorBrush”而崩溃。我有一些代码可以将此支持添加到 protobuf-net 模型，但是当其余的 DTO 用属性（例如 ProtoContractAttribute）装饰时，我无法理解如何应用它（到预编译器或我的代码）。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:32:30.847

目前，让 WCF 使用预编译模型的唯一方法是通过代码手动配置 WCF，特别是`ProtoOperationBehavior`手动添加一个，并指定模型：

```
var behavior = new ProtoOperationBehavior();
behavior.Model = new MyPrecompiledSerializer(); 
```

我承认我没有完整的端到端 WCF 示例。我怀疑在新版本中对我来说可能更容易调整`ProtoBehaviorExtension`和/或`ProtoBehaviorAttribute`允许您通过配置指定自定义序列化程序类型 - 但该代码今天不存在。

在此期间，如果问题是第一次操作有轻微延迟，那么您还可以添加一些您需要的类型，*显式遵循*默认模型，然后编译它：

```
RuntimeTypeModel.Default.Add(typeof(Foo), true);
RuntimeTypeModel.Default.Add(typeof(Bar), true);
RuntimeTypeModel.Default.CompileInPlace(); 
```

*那就是说：编译并不是非常慢 - 如果它导致明显的*延迟，我会有点惊讶，除非你的模型*真的很*复杂（数百种类型）。延迟是否可能只是 WCF、网络、TCP 等开销？

* * *

关于`SolidBrush`，并且暗示：`Color`- 可以*在运行时*配置它们：

```
RuntimeTypeModel.Default.Add(typeof(System.Windows.Media.Color), false)
    .Add("R", "G", "B", "A");
RuntimeTypeModel.Default.Add(typeof(System.Windows.Media.SolidColorBrush), false)
    .Add("Color"); 
```

但是，在使用“预编译”时，我还没有添加一种机制来做到这一点——在技术层面上要棘手得多：我不能只在（比如说）属性上使用可执行方法，因为程序集被“检查” precompile”可以用于任何 CLI（Silverlight、WinRT、.NET 1.1、CF 等）——因此，它是由非常不同的机制加载的。

我首选的方法是：不要将其公开为`System.Windows.Media.Color`- 编写您自己的 DTO 类来表示*数据*（而不是最终实现），并在它们之间进行映射。或者，也可以编写自己的实用程序控制台 exe，其作用类似于“预编译”，方法是配置模型然后调用`RuntimeTypeModel.Default.Compile(string,string)`or `RuntimeTypeModel.Default.Compile(CompilerOptions)`。

# homebrew - 如何使用自制软件对文件进行符号链接以及如何删除文件

> ID：13371561
> 
> 赞同：1
> 
> 时间：2012-11-14T01:00:42.457
> 
> 标签：homebrew

我安装了 PIL，然后安装了 libjpeg，但出现以下错误：

```
 jpeg8-d is already installed, it's just not linked
    Could not symlink file: /usr/local/Cellar/jpeg/8d/bin/wrjpgcom
    Target /usr/local/bin/wrjpgcom already exists. You may need to delete it.
    To force the link and delete this file, do:
    brew link --overwrite formula_name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T01:09:15.433

您发布的错误消息完全描述了问题和解决方案。你不明白它的哪一部分？

```
Could not symlink file: /usr/local/Cellar/jpeg/8d/bin/wrjpgcom
Target /usr/local/bin/wrjpgcom already exists. 
```

这告诉您，出于某种原因，您已经`/usr/local/bin/wrjpgcom`从 Homebrew 之外的某个地方获得了 a，而 Homebrew 不想弄乱它，以防您有充分的理由。

```
To force the link and delete this file, do:
brew link --overwrite formula_name 
```

如果你不知道那个文件是从哪里来的，不要在意，只想让它被炸毁，就做`brew link --overwrite jpeg8-d`.

您可能还希望运行`brew doctor`它以查找您应该修复的设置中的其他问题。

# ios - 如何使用动态重用标识符设置和出列自定义 UITableViewCell？

> ID：13371566
> 
> 赞同：3
> 
> 时间：2012-11-14T01:01:25.143
> 
> 标签：ios, objective-c, uitableview, nib

这就是我最终想要做的事情。我想在 UITableView 中显示项目菜单，但要动态显示，以便显示的项目类型确定加载的自定义单元格视图。例如，假设菜单项类型为“switch”，那么它将加载一个名为“switch.xib”的 nib，并且状态将根据该特定菜单项的值打开/关闭。可能有 5 个项目是“开关”类型，但值不同。所以我想为每一个使用相同的 xib，但有 5 个实例。

所以，这个问题还有很长的路要走。当我从笔尖加载单元格视图时，我认为它需要唯一的重用标识符用于出队，以便在屏幕上回滚时，对吗？（对于每个实例，即每个菜单项都是唯一的。）在 Interface Builder 的 UITableViewCell 中，我看到了可以在哪里设置重用标识符属性，但我想在运行时为开关的每个实例设置它。例如，菜单项#1 是一个开关，#2 是一个文本字段，#3 是一个开关，等等。所以#1 和#3 都需要唯一的单元格 ID 才能出列。

这是我的 cellForRowAtIndexPath 的样子：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
// Cells are unique; dequeue individual cells not generic cell formats
NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row];

ITMenuItem *menuItem = [menu.menuItems objectAtIndex:indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    // Load cell view from nib
    NSString *cellNib = [NSString stringWithFormat:@"MenuCell_%@", menuItem.type];
    [[NSBundle mainBundle] loadNibNamed:cellNib owner:self options:nil];
    cell = myCell;
    self.myCell = nil;
}
// Display menu item contents in cell
UILabel *cellLabel = (UILabel *) [cell viewWithTag:1];
[cellLabel setText:menuItem.name];
if ([menuItem.type isEqualToString:@"switch"]) {
    UISwitch *cellSwitch = (UISwitch *) [cell viewWithTag:2];
    [cellSwitch setOn:[menuItem.value isEqualToString:@"YES"]];
}
else if ([menuItem.type isEqualToString:@"text"]) {
    UITextField *textField = (UITextField *) [cell viewWithTag:2];
    [textField setText:menuItem.value];
}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:17:17.480

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell == nil)
    {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    TextFieldFormElement *item = [self.formItems objectAtIndex:indexPath.row];
    cell.labelField.text = item.label;
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:26:10.637

您可以在 nib 文件中设置重用标识符。因此，对于 switch.xib，您将使用 'switch' 作为重用标识符。然后只需改变

```
NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row];
```

至

```
NSString *CellIdentifier = menuItem.type;
```

假设这`menuItem.type`是“开关”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T17:23:45.747

您可以通过这样的方式加载来自 xib 文件的自定义单元格。xib 文件名与单元类名和重用 id 相同。

```
- (YourCell *)tableView:(UITableView *)_tableView getCellWithId:(NSString *)cellId
{
        YourCell *cell;

        /* Cell id and xib have the same name. */
        cell = [_tableView dequeueReusableCellWithIdentifier:cellId];
        if (cell == nil) {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:cellId owner:self options:nil];
                cell = [nib objectAtIndex:0];
        }
        return cell;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-23T15:51:34.047

对于我的想法，如果您的类型不是太多，请在不同的 xib 和 swift 文件中设计每个单元格。主要针对性能问题。

如果无法出队，请给他们不同的标识符。您可以为 tableview 或 collection view 注册多个标识符（我们的一个应用程序以这种方式使用 12 个不同的单元格。）

但是以这种方式处理 IBActions 会有点混乱。

# opengl - OpenGL奇数行片段着色器错误：未绘制

> ID：13371567
> 
> 赞同：0
> 
> 时间：2012-11-14T01:01:28.577
> 
> 标签：opengl, graphics, glsl, shader, fragment-shader

我正在编写一个应用程序来渲染交错立体 3d 中的每一帧。为了实现这一点，我正在编写两个片段着色器：一个用于渲染左眼帧的奇数行，一个用于渲染右帧的偶数行像素。

我正在使用 OSX 的内置 OpenGL Shader Builder 应用程序，并且能够成功地将每个奇数行渲染为绿色： ![OpenGL Shader Builder 奇行片段着色器](../Images/218a77d3a737047ff8bea4dc89db7040.png)

如您所见，我使用的片段代码如下所示：

```
 void main(){
        if ( mod(gl_FragCoord.y - 0.5, 2.0) == 1.0){
            gl_FragCoord = vec4(0.0, 1.0, 0.0, 1.0);
        }
    } 
```

但是，我编写了一个小型 OpenGL 应用程序来测试这个着色器（顺便说一句，这是 NVIDIA OpenGL 2.1，OSX 10.6.8）：

```
 #include <iostream>
    #include <stdio.h>

    #ifdef __APPLE__
    #include <OpenGL/gl.h>
    #include <OpenGL/glu.h>
    #include <GLUT/glut.h>

    void DrawGLScene(){
      glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

      glFlush();
      glutSwapBuffers();
    }

    void Shading(){
      //Fragment shader we want to use
      GLuint oddRowShaderId = glCreateShader(GL_FRAGMENT_SHADER);
      std::cout << "Creating the fragment shader with id " << oddRowShaderId << std::endl;

      const GLchar *source[] = 
      { "void main(){   \n",
        "  if (mod(gl_FragCoord.y-0.5, 2.0) == 0.0){\n",
        "    gl_FragColor = vec4( 0.0, 1.0, 0.0, 1.0 );\n",
        //"    gl_BackColor = vec4( 0.0, 1.0, 0.0, 1.0 );\n"
        "  }\n",
        "}\n"
      };

      std::cout << "Shader source:\n" << source[0] << source[1] << source[2] << source[3] <       < source[4] << std::endl;

      std::cout << "Gathering shader source code" << std::endl;
      glShaderSource(oddRowShaderId, 1, source, 0);

      std::cout << "Compiling the shader" << std::endl;
      glCompileShader(oddRowShaderId);

      std::cout << "Creating new glCreateProgram() program" << std::endl;
      GLuint shaderProgramId = glCreateProgram();    //Shader program id

      std::cout << "Attaching shader to the new program" << std::endl;
      glAttachShader(shaderProgramId, oddRowShaderId); //Add the fragment shader to the         program

      std::cout << "Linking the program " << std::endl;
      glLinkProgram(shaderProgramId);                //Link the program

      std::cout << "Using the shader program for rendering" << std::endl;
      glUseProgram(shaderProgramId);                  //Start using the shader
    }

    void keyboard(int key, int x, int y){
      switch(key){
      case 's':
        Shading();
        break;
      case 'q':
        exit(0);
        break;
      }

    }

    void idleFunc(){
      glutPostRedisplay();        //Redraw the scene.
    }

    int main(int argc, char** argv){
      glutInit(&argc, argv);
      glutInitWindowPosition(100, 100);
      glutInitWindowSize(1000,1000);
      glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
      glutCreateWindow("anaglyph test");
      glutDisplayFunc(DrawGLScene);
      glutSpecialFunc(keyboard);
      glutIdleFunc(idleFunc);

      glutMainLoop();
    } 
```

这是我运行代码得到的输出： ![错误输出](../Images/09432d40de7a0d4bd5504c640b7b9699.png) 我感觉我可能没有正确编译和`glUseProgram`ing 片段着色器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:41:21.147

您可以节省一些性能并获得一些兼容性，并且通过使用 2 像素纹理蒙版（偶数像素为黑色、奇数 - 白色）并将其平铺在全屏四边形顶部（您将拥有其中 2 个：右眼和左眼）。使用倒置蒙版或在第二个四边形上放置一些坐标偏移。一般来说，它看起来像这样：

（为可视化添加了透视和巨大的差距） ![在此处输入图像描述](../Images/5d32067898d837d4eeef570158be90cc.png)

将场景纹理（或您拥有的任何东西）放在四边形上并使用蒙版颜色丢弃片段或[透明度](http://www.opengl.org/archives/resources/faq/technical/transparency.htm)。为避免使用 2 个 g 缓冲区（GPU 内存），您可以在纹理中为一只眼睛渲染一个完整场景，在视图中为另一只眼睛渲染一个完整场景，并在其之上渲染具有第一个场景纹理和透明蒙版的全屏四边形。如果您需要两个输出，或者将它们分开渲染。

* * *

要点是您应该使用遮罩而不是基于纹理坐标的逻辑操作。

# macos - 如何签署动态库以允许访问由另一个签署的可执行文件创建的钥匙串？

> ID：13371568
> 
> 赞同：0
> 
> 时间：2012-11-14T01:01:33.903
> 
> 标签：macos, code-signing, keychain

我有一个作为根级守护进程运行的可执行文件（从 /Library/LaunchDaemons 启动）和它加载的动态库。它们都使用相同的标识符进行签名，并且都需要访问相同的钥匙串。当我`SecKeychainItemExport()`从动态库中的代码调用时，我得到错误代码`-25308`。这转化为`errSecInteractionNotAllowed`......本质上是一个权限问题。

如果守护进程以 root 身份从终端窗口运行，则会出现提示，询问我：“{您的进程}想要从您的钥匙串中导出密钥“privateKey”。您要允许访问此项目吗？” 在这些提示上单击始终允许可以让一切顺利进行。似乎当进程无头运行时，它无法提示，因此它只是因`errSecInteractionNotAllowed`错误而失败。

我曾假设如果可执行文件和库都使用相同的证书和相同的标识符进行签名，那么它们将具有对钥匙串等资源的平等访问权限，但我似乎遗漏了一些东西。

对于代码签名，这是在动态库上运行的命令：

```
codesign -s "$CertName" -i com.abc.xyz -r='designated => anchor trusted and identifier com.abc.xyz and certificate leaf[subject.O]="My Company" and certificate leaf[subject.CN]="My Company"' ${PROJECT_ROOT_DIR}/library.dylib
codesign -dvvv ${PROJECT_ROOT_DIR}/library.dylib 
```

代码签名需要做什么才能允许我的可执行文件和库之间的平等访问？

# jquery - Jquery 切换 - 加载不同的内容

> ID：13371571
> 
> 赞同：1
> 
> 时间：2012-11-14T01:01:57.450
> 
> 标签：jquery, load, toggle

所以我现在有这个代码。基本上我有一个按钮，你点击它，按钮所在的 div 关闭，另一个 div 切换。问题是我想制作一堆按钮，这些按钮将根据您单击的内容将不同的内容加载到第二个 div 中。有没有人对实现这一目标的最佳方法有任何想法？[http://jsfiddle.net/PDzFj/](http://jsfiddle.net/PDzFj/)

jQuery

```
$(function() {
$('.clickme').click(function() {
   var tot = $('.maindiv');
   var exp = $('.contentdiv');

   var frt = (tot.is(":visible"))?tot:exp;
   var lst = (tot.is(":visible"))?exp:tot;

   frt.slideToggle('slow','easeInOutExpo', function() {
   lst.slideToggle('slow','easeInOutExpo', function() {/*complete*/});
   });
});
}); 
```

HTML

```
<div class="wrapper">

<div class="maindiv">
<div class="button clickme">Page One</div>
<div class="button clickme">Page Two</div>
<div class="button clickme">Page Three</div>
<div class="button clickme">Page Four</div>
<div class="clearit"></div>
</div>

<div class="contentdiv">
<div class="button clickme">Back</div>
Different content loads here (eg. page one, page two, page three...)
</div>

</div> 
```

CSS

```
.wrapper{
  width:800px;
}

.maindiv{
  width:760px;
  padding:20px;
  background:lightblue;
}

.contentdiv{
  width:760px;
  padding:20px;
  background:blue;
  display:none;
}

.button{
  background:#eee;
  height:100px;
  width:100px;
  text-align:center;
  line-height:100px;
  margin:2px;
  float:left;
}
.clearit{
  clear:both;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:09:13.933

```
$(function() {
    $('.clickme').click(function() {
        // just cache the clicked element 
        var self = this;
        var tot = $('.maindiv');
        var exp = $('.contentdiv');

        var frt = (tot.is(":visible")) ? tot : exp;
        var lst = (tot.is(":visible")) ? exp : tot;

        frt.slideToggle('slow', function() {
            // and append it here
            lst.append(self).slideToggle('slow')
        });
    });
}); 
```

[http://jsfiddle.net/EHKdp/](http://jsfiddle.net/EHKdp/)

如果要加载其他页面，可以使用 jQuery`load`方法并将页面的路径存储在数据属性中，或者更好地使用锚链接而不是 div 元素。

```
<div class="maindiv">
  <div class="button clickme" data-target="/path-to.file">Page One</div>
  <div class="button clickme" data-target="/path-to.file">Page Two</div>
  <div class="button clickme" data-target="/path-to.file">Page Three</div>
  <div class="button clickme" data-target="/path-to.file">Page Four</div>
  <div class="clearit"></div>
</div> 
```

```
$(function() {
    $('.clickme').click(function() {

        var path = this.dataset.target;

        var tot = $('.maindiv');
        var exp = $('.contentdiv');

        var frt = (tot.is(":visible")) ? tot : exp;
        var lst = (tot.is(":visible")) ? exp : tot;

        frt.slideToggle('slow', function() {
            lst.load(path, function(){
               $(this).slideToggle('slow')
            })
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:10:19.577

试试这个

```
$(function() {
    $('.clickme').click(function() {
        var tot = $('.maindiv');
        var exp = $('.contentdiv');
        var html = $(this).html();
        exp.slideUp('slow', function() {
            $(this).html(html).delay(500).slideDown('slow');
        });

    });
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/PDzFj/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:13:02.007

最好的方法是使用 AJAX 并从外部 .txt 文件加载文本，您可以在此处快速了解如何执行此操作[。](http://www.scriptsplash.com/2009/07/simple-ajax-request-loading-text-file.html)

# windows-7 - 将 VBS 脚本分配给键盘快捷键

> ID：13371572
> 
> 赞同：6
> 
> 时间：2012-11-14T01:02:09.367
> 
> 标签：windows-7, vbscript, macros, keyboard-shortcuts

我有一个非常基本的 VBS 脚本，我计划在我的 Windows 7 机器上经常使用它。有什么办法可以将它绑定到键盘快捷键，这样我就不必通过资源管理器讨厌地导航到它。

我意识到这个问题与编程甚至脚本无关，但我无法在网上或通过我自己的实验找到一个直接的答案。我确信某处有一个简单的解决方案......

感谢您花时间阅读，并希望能回复我的询问。埃文·乌古尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:30:23.330

Windows 确实具有对 shell 快捷键的内置支持，其中按键用于调用`*.lnk`启动 VBScript 的文件（使用 cscript 或 wscript）。

创建一个快捷方式文件，让它直接调用您的 VBScript 文件或使用适当的参数运行 cscript 或 wscript，然后保存并打开其属性表并在“快捷键”字段中设置击键（我建议使用类似 Ctrl+Alt+ ķ）。

像这样：

[![Windows 快捷方式属性窗口截图](../Images/9bbcdab5f881b3b9046775dedd10ce78.png)](https://i.stack.imgur.com/pN6Bq.png)

然后，无论何时按下 Ctrl+Alt+K，无论活动的应用程序如何，都会调用您的脚本。

更耐用的选择是 AutoHotKey：[http ://www.autohotkey.com/](http://www.autohotkey.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-31T14:05:05.590

仅供参考。我试过这个，当我在服装文件夹中有图标时，我无法注册热键。即使我添加了热键，它也无法正常工作。

一旦我将图标移动到“C:\ProgramData\Microsoft\Windows\Start Menu\Programs”，热键就开始工作了。

# python - rake:stats 等价于 python/django

> ID：13371579
> 
> 赞同：-1
> 
> 时间：2012-11-14T01:03:01.827
> 
> 标签：python, django

由于 rake:stats 提供了当前代码库的一个很好的视觉效果，在 django 中是否有任何等效且易于使用的东西？我正在寻找像 rake 那样以表格形式或实际上可以在以后解析为所需结构的任何形式的视觉显示。

![http://s3.amazonaws.com/37assets/svn/756-bcx-code-stats.png](../Images/0be7957f2e8007084e14a8990ac7a8a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-27T10:14:04.040

正如 Pedro Romano 所提到的，pylint 和 coverage.py 的组合可以实现这一点，我能够使用它来报告类似的事情。

# mono - 如何从本机 c 代码中停止嵌入式单声道中的 GC

> ID：13371582
> 
> 赞同：0
> 
> 时间：2012-11-14T01:03:34.707
> 
> 标签：mono, garbage-collection

我有两种软件开发人员，一种专注于native `C`，另一种专注于`.Net`or `mono`，我们通过嵌入式开发一些集成软件`mono`。我们通过在线学习来做到这一点，一开始似乎还可以。但渐渐地，我们越来越频繁地遇到有关内存损坏的错误。虽然培训他们熟悉对方和大量互操作的东西是很昂贵的，这样他们就不会为内存损坏集成软件做出贡献，但作为一名经理，我认为拥有标准`C`代码可能更便宜：

*   `GC`第 1 步在调用单声道之前停止线程，
*   第 2 步调用`result = mono_runtime_invoke(..)`, 和
*   步骤 3`GC`在所有关于结果的处理由`C`代码完成后启动线程。

内存损坏通常是该人在释放/移动数据`C`时使用指向托管空间的指针做某事。`GC`

如何实现这一点以及任何评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:24:57.697

The recommended practice is to create GCHandles to the managed object so that the GC knows about them instead of stopping the GC.

This is accomplished using the following functions:

```
mono_gchandle_new
mono_gchandle_new_weakref
mono_gchandle_get_target
mono_gchandle_free 
```

# perl - Params::Validate，如何要求两个参数之一？

> ID：13371583
> 
> 赞同：0
> 
> 时间：2012-11-14T01:03:43.393
> 
> 标签：perl, params

如果我有一个方法采用两个命名参数中的一个或另一个，其中一个必须存在，有没有办法用 Params::Validate 来处理它？

```
 $store->put( content_ref => $stringref ); 
```

或者

```
 $store->put( path => $path_to_file ); 
```

我在文档中没有看到它，但这似乎是一个明显的用例，所以我想我应该问一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:15:35.923

您可以使用这些方法[`callbacks`](http://search.cpan.org/perldoc/Params%3a%3aValidate#Callback_Validation)来实现一些目标：

```
#!/usr/bin/env perl

use strict;
use warnings;

package My::Class;

use Params::Validate;
use YAML;

sub new { bless {} => shift }

sub _xor_param {
    my $param = shift;
    return sub { defined($_[0]) and not defined($_[1]->{$param}) }
}

my %validation_spec = (
    content_ref => {
        'default' => undef,
        callbacks => {
            "Provided only if no 'path' is given"
                => _xor_param('path')
        },
    },
    path => {
        'default' => undef,
        callbacks => {
            "Provided only if no 'content_ref' is given"
                => _xor_param('content_ref')
        },
    },
);

sub put {
    my $self = shift;
    validate(@_, \%validation_spec);
    print Dump \@_;
}

package main;

my $x = My::Class->new;

$x->put(path => 'some path');
$x->put(content_ref => \'some content');
$x->put(path => 'another_path', content_ref => \'some other content'); 
```

输出：

```
---
- 小路
- 一些路径
---
- content_ref
- !!perl/ref
  =：一些内容
My::Class::put 的 'content_ref' 参数 ("SCALAR(0xab83cc)") 未通过
'仅在没有给出'路径'时提供'回调
 在 C:\temp\v.pl 第 37 行
        我的::Class::put(undef, 'path', 'another_path', 'content_ref',
'SCALAR(0xab83cc)') 在 C:\temp\v.pl 第 47 行调用
```

# c# - 从一个子窗口获取listview的值到另一个子窗口

> ID：13371584
> 
> 赞同：0
> 
> 时间：2012-11-14T01:03:48.080
> 
> 标签：c#, wpf

在 vb6 中，我可以轻松地将值从 childwindow 获取到另一个 childwindow .. 例如 frm1.textbox1.text = frm2.listview.item.selectedindex ... 我如何在 wpf 中做到这一点？

我有两个名为 EmployeProfile 的子窗口，另一个是 PrintEmpProfile ... 在 EmployeeProfile 窗口中，有一个列表视图 ...我想要的是如果我要单击打印按钮，我可以从 EmployeeProfile 列表视图中获取值……

到目前为止，这就是我所拥有的。此代码位于 PrintEmpProfile 中

```
DataTable table = new DataTable("EmpIDNumber");
table.Columns.Add("IDNum", typeof(string));
for (int i = 1; i <= 100; i++)
{
    table.Rows.Add(new object[] { EmployeeProfile.????? });
} 
```

我不知道如何从 EmployeeProfile 列表视图中获取所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:15:45.760

您可以创建 listview 的属性。

```
 public ListView EmployeeListView
    {
        get
        {
            return IdOfYourListView;
        }
        set
        {
            IdOfYourListView = value;
        }
    } 
```

现在在 PrintEmpProfile 创建 EmployeeProfile 对象

```
 EmployeeProfile empf = new EmployeeProfile();
      ListView MyListView = empf.EmployeeListView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:31:21.677

每当您打开子窗口时，将新子窗口的引用放入集合中。我假设 MyChild 是您在 XAML 中定义的子窗口，例如：

```
<Window
    x:Class="TEST.MyChild"
    ... 
```

您可以在 App.xaml.cs 中定义一个包含子窗口的静态列表

```
public partial class App : Application
{
    public static List<MyChild> Children
    {
        get
        {
            if (null == _Children) _Children = new List<MyChild>();
            return _Children;
        }
    }

    private static List<MyChild> _Children;
} 
```

每当您打开子窗口时，将其添加到此集合中，例如：

```
MyChild Child = new MyChild();
App.Children.Add(Child);
Child.Show(); 
```

当您关闭您的子窗口时，您还应该从该集合中删除子项。您可以在窗口的关闭事件中执行此操作。在 XML 中定义封闭通风口：

```
Closed="MyChild_Closed" 
```

在后面的代码中：

```
 private void MyChild_Closed(object sender, EventArgs e)
    {
        // You may check existence in the list first in order to make it safer.            
        App.Children.Remove(this); 
    } 
```

每当一个子窗口想要访问其他子窗口的 ListView 时，它就会从集合中获取子窗口的引用，然后直接调用 XAML 中定义的 ListView。

```
 MyChild ChildReference = App.Children.Where(x => x.Title == "Child Title").FirstOrDefault();
    if (null != ChildReference)
{
    ChildReference.listview.SelectedIndex = ...
} 
```

# pdf - 如何重新组合拆分的句子？

> ID：13371591
> 
> 赞同：0
> 
> 时间：2012-11-14T01:04:20.060
> 
> 标签：pdf, nlp, sentence

我正在处理已转换为文本的 PDF。问题？有时，由于不稳定的 PDF 格式和/或 PDF 到文本的转换，句子会被拆分。

因此，我正在寻找有助于“重组”被拆分的句子的工具。页眉或页脚通常是罪魁祸首。其他元素，例如数字和图表，也可以发挥作用，但它们不是我现在最关心的问题。

这个问题可以通过以下几种方式解决：

1.  在进行 NLP 句子检测之前删除页眉和页脚肯定会有所帮助。我不知道执行此操作的工具。你知道工具或方法吗？（删除页码的一般想法在理论上是“容易的”：找到大约每页出现一次的连续递增数字。）

2.  使用可以判断句子语法正确可能性的 NLP 解析器会有所帮助。这样我就可以比较两个句子的语法正确性和它们合并的正确性。（据我所知，Stanford Parser 不评估语法正确性。）您知道可以提供帮助的工具吗？

如果您有解决问题的建议、答案或其他方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-23T14:10:46.397

使用 Apache Tika 从 pdf 中提取数据。

# html - IE 正文宽度不起作用

> ID：13371593
> 
> 赞同：1
> 
> 时间：2012-11-14T01:04:25.683
> 
> 标签：html, css, internet-explorer

我将 body 元素设置为 840px，然后边距自动：

```
body {
width: 840px;
margin: auto;
} 
```

在 FF、safari 和 chrome 上，这一切都集中在我的网站主体中。但是在 IE（目前在 IE9 中测试）上，我所有设置为 100% 的 div 仍会扩展到屏幕的整个宽度。在开发工具中，它仍然说主体的宽度为 840，但它不会限制其余元素。

在这里做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:21:21.127

使用有效的文档类型，例如 <!DOCTYPE HTML>

```
<!DOCTYPE HTML>
<style>
body {
margin: 0 auto;
width: 1000px;
}
</style>

<body>
SALALALLA
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T01:11:00.307

IE 不支持...为此，您可以仅为 IE 创建一个主“容器”div 并使用 IE 特定的 CSS 文件（mozilla 等将忽略该文件，因此 div 与您当前的设计无关）设置 DIV 的宽度并将其居中使用

```
#div_id{
width:840px;
left:50%;
margin-left:-420px;
} 
```

包括像这样的 IE only css

```
<!--[if IE 8]>
<link type="text/css" rel="stylesheet" href="/css/ie8.css" media="all" />
<![endif]-->
<!--[if IE 7]>
<link type="text/css" rel="stylesheet" href="/css/ie7.css" media="all" />
<![endif]--> 
```

有限，是的，但 IE 不允许设置正文宽度。

# ruby - 正则表达式查询

> ID：13371596
> 
> 赞同：-1
> 
> 时间：2012-11-14T01:04:51.273
> 
> 标签：ruby, regex

我正在使用 Ruby 进行简单的子字符串类型匹配。我试图了解为什么会发生以下情况：

```
irb(main):024:0> puts "match" if "foo" =~ /foo/
match
=> nil
irb(main):025:0> puts "match" if "foo" =~ /foo,/
=> nil 
```

如何修改此正则表达式，以便如果搜索条件的任何部分与“foo”匹配，则进行匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:03:59.703

You've got your comparisons backwards:

```
"foo".match(/foo,/) # See if "foo" matches the pattern "foo,"
# => nil
"foo,".match(/foo/) # See if "foo," matches the pattern "foo"
# => #<MatchData "foo"> 
```

The `=~` operator is a bit of history that has fallen out of style because it's not self-explanatory.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T01:14:56.217

您可以使用 String 的 scan 方法并传入要检查的正则表达式。

```
1.9.3p194 :008 > puts "match" if "foo".scan(/foo,/)
match
=> nil 
```

# c++ - 如何使用来自 QProcess 的 bash 命令“which”

> ID：13371601
> 
> 赞同：1
> 
> 时间：2012-11-14T01:05:20.700
> 
> 标签：c++, bash, qt, qprocess

我是一名使用 Qt 的学生程序员，我似乎遇到了使用 QProcess 启动 bash 命令“which”以尝试收集应用程序安装图的问题。我有以下代码，我真的迷失了我可能缺少的东西。我已经参考了[QProcess 文档](http://doc.qt.digia.com/qt/qprocess.html)，但仍然无法找出问题所在。

每次运行此代码时，都不会在指定的目录中创建文件。如果没有构建文件，应用程序将无法继续。

```
//datatypes
QProcess *findFiles = new QProcess();
QStringList arguments;
QStringList InstallationList;
QString program = "/bin/bash";
QString currentUsersHomeDirectory = QDir::homePath();
QString tmpScriptLocation = currentUsersHomeDirectory;
QProcessEnvironment env = QProcessEnvironment::systemEnvironment();
//generate file with list of files found
tmpScriptLocation += ".whichBAScriptOutput";
arguments << QString(QString("which -a certainFile >> ") += tmpScriptLocation);
findFiles->setProcessEnvironment(env);
findFiles->start(program,arguments);
findFiles->waitForFinished(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:38:32.807

*它*位于*/usr/bin/*所以尝试更改路径..

**编辑**：您需要将*QProcess*的信号*readyReadStandardOutput()*连接到您的插槽。实际上，如果您查看*QProcess*继承自*QIODevice*的文档。这意味着您可以执行以下操作：

```
while(canReadLine()){
   string line = readLine();
   ...
} 
```

如果你已经在 Qt 中编写了一个客户端-服务器应用程序，我相信你重新编译了伪代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:57:19.577

正如您所说的要执行`which`，但您正在`bash`使用手写脚本启动。有一种更简单的方法可以按顺序执行此操作：

```
//preparing the job, 
QProcess process;
QString processName = "which"; //or absoute path if not in path
QStringList arguments = QStringList() << "-a" 
                                      << "certainFile.txt";

// process.setWorkingDirectory() //if you want it to execute in a specific directory

//start the process                                  
process.start(processName, arguments ); 
//sit back and wait                                     
process.waitForStarted(); //blocking, return bool
process.waitForFinished(); //blocking, return bool                                      
if(process.exitCode() != 0){
  //Something went wrong
}

//return a byte array containing what the command "which" print in console
QByteArray processOutput = process.readAll(); 
```

# php - 文本预处理的性能改进

> ID：13371604
> 
> 赞同：0
> 
> 时间：2012-11-14T01:05:51.233
> 
> 标签：php, regex, linux, windows, text-processing

有没有办法改进此代码并维护功能？其中一些是在 Windows 和 Linux 上检查代码和输出的结果，因此需要“多操作系统”。

```
// Remove tags
$input = strip_tags($input);
// Converts accented to non-accented
$input =  iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE', $input);
// String to lower
$input = strtolower($input);
// Remove all non-word and non-space chars
$input = preg_replace('/[^\sa-z]/', '', $input);
// Replace enters
$input = preg_replace('/[\r\n]/', ' ', $input);
// Remove stopwords
$input = preg_replace('/\b(' . implode('|', $stopwords) . ')\b/', '', $input);
// Remove individual chars
$input = preg_replace('/\b([a-z])\b/', '', $input);
// Trim it
$input = trim($input);
// Remove multiple spaces
$input = preg_replace("/[[:blank:]]+/", " ", $input); 
```

输入：

```
<doc id="603" url="http://it.wikipedia.org/wiki/Esperanto">
Esperanto.
Esperanto (pôvodne Lingvo Internacia – „medzinárodný jazyk“) je najrozšírenejší <a     href="Medzin%C3%A1rodn%C3%BD_pomocn%C3%BD_jazyk">medzinárodný</a> <a     href="Umel%C3%BD_jazyk">plánový jazyk</a>. Názov je odvodený od <a     href="Pseudonym">pseudonym</a>u, pod ktorým v roku <a href="1887">1887</a> zverejnil lekár     <a href="Ludwik_Lejzer_Zamenhof">L. L. Zamenhof</a> základy tohto jazyka. Zámerom tvorcu     bolo vytvoriť ľahko naučiteľný a použiteľný neutrálny jazyk, vhodný na použitie v     medzinárodnej komunikácii. Cieľom nebolo nahradiť <a href="N%C3%A1rodn%C3%BD_jazyk">národné     jazyky</a>, čo bolo neskôr aj deklarované v <a     href="Boulonsk%C3%A1_deklar%C3%A1cia">Boulonskej deklarácii</a>.
Hoci žiaden <a href="%C5%A1t%C3%A1t">štát</a> neprijal esperanto ako <a href="%C3%BAradn%C3%BD_jazyk">úradný jazyk</a>, používa ho komunita s odhadovaným počtom hovoriacich 100 000 až 2 000 000, z čoho približne 1 000 tvoria rodení hovoriaci. Získalo aj isté medzinárodné uznania, napríklad dve rezolúcie <a href="UNESCO">UNESCO</a> či podporu známych osobností verejného života. V súčasnosti sa esperanto využíva pri <a href="Cestovanie">cestovaní</a>, dopisovaní, medzinárodných stretnutiach a kultúrnych výmenách, <a href="Kongres">kongres</a>och, <a href="Veda">vedeckých</a> diskusiách, v pôvodnej aj prekladovej
</doc> 
```

输出：

> esperanto esperanto povodne lingvo internacia medzinarodny jazyk najrozsirenejsi medzinarodny planovy jazyk nazov odvodeny pseudonymu ktorym roku zverejnil lekar zamenhof zaklady tohto jazyka zamerom tvorcu vytvorit lahko naucitelny pouzitelny neutralny jazyk vhodny pouzitie medzinarodnej komunikacii cielom nebolo nahradit narodne jazyky neskor deklarovane boulonskej deklaracii hoci ziaden stat neprijal esperanto uradny jazyk pouziva komunita odhadovanym poctom hovoriacich coho priblizne tvoria rodeni hovoriaci ziskalo iste medzinarodne uznania napriklad dve rezolucie unesco podporu znamych osobnosti verejneho zivota sucasnosti esperanto vyuziva cestovani dopisovani medzinarodnych stretnutiach kulturnych vymenach kongresoch vedeckych diskusiach povodnej prekladovej

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:23:10.540

m.buettner 的回答是一个好的开始。使用该解决方案，我的基准测试测量速度提高了 25% 以上。

## PCRE'S'“研究”修饰符

对于某些正则表达式，PCRE`'S'` *研究修饰符*可以大大加快匹配速度。这是 m.buettner 代码的增强版：

```
// Remove tags
$input = strip_tags($input);
// Converts accented to non-accented
$input =  iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE', $input);
// String to lower
$input = strtolower($input);
// Remove all non-word and non-space chars
$input = preg_replace('/[^\sa-z]+/S', '', $input);
// Replace all (consecutive) whitespace characters with a single space:
$input = preg_replace('/\s+/S', ' ', $input);
// Remove all stopwords and single letters:
$input = preg_replace('/\b('.implode('|', $stopwords).'|[a-z])\b/', '', $input);
// Trim it
$input = trim($input); 
```

这进一步改进了它，比原来的速度提高了大约 45%。请注意，`S` *Study*修饰符对以文字或锚点开头的正则表达式没有帮助。瓶颈可能在`$stopwords`语句中，具体取决于您在其中的数量。（我使用了一个包含四个元素的简单数组进行基准测试：）`['one','two','three','four']`。更大的`$stopwords`阵列将显示更少的改进。

在经典中还有更多有用的效率花絮：[掌握正则表达式（第 3 版）](https://rads.stackoverflow.com/amzn/click/com/0596528124 "通过杰弗里弗里德尔。 关于正则表达式的最佳书籍 - 永远！") -定期使用正则表达式的每个人都*必须阅读。*

8^)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T01:23:26.810

您确定这是您的应用程序的瓶颈吗？在进行没有的性能优化之前，您绝对应该对其进行分析。

我不确定这是否会显着提高性能，但至少它会稍微简化代码。`Replace enters`您可以通过将它们折叠到调用中来摆脱最后两个语句：

```
// Replace all (consecutive) whitespace characters with a single space:
$input = preg_replace('/\s+/', ' ', $input); 
```

之后您可以将这两个替换组合起来：

```
// Remove all stopwords and single letters:
$input = preg_replace('/\b(' . implode('|', $stopwords) . '|[a-z])\b/', '', $input); 
```

所以你最终得到了这个：

```
// Remove tags
$input = strip_tags($input);
// Converts accented to non-accented
$input =  iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE', $input);
// String to lower
$input = strtolower($input);
// Remove all non-word and non-space chars
$input = preg_replace('/[^\sa-z]/', '', $input);
// Replace all (consecutive) whitespace characters with a single space:
$input = preg_replace('/\s+/', ' ', $input);
// Remove all stopwords and single letters:
$input = preg_replace('/\b(' . implode('|', $stopwords) . '|[a-z])\b/', '', $input);
// Trim it
$input = trim($input); 
```

实际上，您可以`trim`在 last 中使用另外两个替代方案`preg_replace`，但我觉得这相当模糊，而且我不知道这是否对您的表现有好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:44:51.543

Take a look at the following:

[http://stuffivelearned.org/doku.php?id=programming:general:phpvspythonvsperl](http://stuffivelearned.org/doku.php?id=programming:general:phpvspythonvsperl)

It compares the speed of regexes for PHP, Perl and Python. Note especially the tremendous speed of Perl, which takes only around 20% of the time required by PHP.

# ios - iOS6 / 6.0.1 中的 UIDevice 唯一标识符

> ID：13371605
> 
> 赞同：0
> 
> 时间：2012-11-14T01:06:34.567
> 
> 标签：ios, uniqueidentifier, uidevice

我知道这是一个众所周知和讨论过的问题。而且我已经在这里搜索了我想知道的内容并且无法得出任何结论。

UniqueIdentifier 仍在 iOS6.0.1 中工作（尽管我知道它自 5.0 以来已被弃用）。但是它是否有可能返回一些与旧操作系统版本不同的（或零）字符串？并且可能仅在某些特定设备中？我设法在 5.1 中进行了测试，返回的字符串等于 6.0.1 中的字符串。

我读过很多说它不再起作用了，但事实是它仍然有效。现在的问题是，它仍然像以前一样工作吗？是否会因为弃用而发生变化？我知道我不应该再依赖 uid，但我只是想分析和调试我最近在应用程序中遇到的一些奇怪行为。

谢谢，弗朗西斯科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:58:50.057

对于 iOS 6 及更高版本，您应该使用 NSUUID：

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSUUID_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSUUID_Class/Reference/Reference.html)

我意识到这并不能回答你的实际问题。无论出于何种原因，Apple 都不希望您再使用旧方法，并且有*应用*程序因使用它而被拒绝的情况。因此，如果您甚至无法提交它，它是否有效可能是一个较小的问题;)。我不认为机制已经改变了。

# git - 无需登录即可从 BitBucket 克隆到 GIT？

> ID：13371606
> 
> 赞同：3
> 
> 时间：2012-11-14T01:06:44.567
> 
> 标签：git, bitbucket

BitBucket 上有一个项目，我只想下载以进行试验。我是 GIT 的新手。克隆按钮显示一个 hg 命令并且 URL 没有 .git，所以我认为这不是我需要的 GIT 的 URL。无论如何我都尝试过（也尝试在末尾添加一个 .git）并在这两种情况下都出现“未找到”错误。

```
$ git clone https://bitbucket.org/munificent/amaranth.git

fatal:https://bitbucket.org/munificent/amaranth not found did you git
 update server-info on the server ? 
```

我不确定错误是什么意思。听起来它建议我在服务器端运行一个我不能运行的命令，因为我不是 repo 的所有者。

是否可以在没有 mercurial 的情况下从 bit bucket 下载这个 repo？如果是这样，怎么做？即使只是一个存档文件也会很好。

我正在使用 GitHub for windows 命令行。（我没有看到直接在 GitHub 用户界面中输入 URL 的明显方法，我觉得我只是没有找到它，因为似乎 URL 是我一直看到的主要克隆方式一个仓库，连同 SSH）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T01:11:30.120

这个东西的底部有一个小的下载链接：

![在此处输入图像描述](../Images/7cde773c2ad1037980862c5116e116d9.png)

它似乎指向[最新提交的 zipball](https://bitbucket.org/munificent/amaranth/get/b6be068243e4.zip)。

# java - 如何创建完全连接的客户端图？

> ID：13371607
> 
> 赞同：0
> 
> 时间：2012-11-14T01:06:54.880
> 
> 标签：java, multithreading, sockets

使用 Java 中的 Socket 类，我试图创建一个由六个客户端组成的网络，每个客户端都相互连接。

到目前为止，我已经有了*不错的想法，我想，我只是不确定如何做到这一点。*

基本上，我有一个存储在字符串数组中的主机名列表。我打开到我将使用的每台机器的 ssh 连接，并一个接一个地启动我的客户端。

第一个客户端使用 找到它的主机名`InetAddress.getLocalHost().getHostName()`，然后将其与主机名列表进行比较并计算出它的 NodeID：

```
for(i = 0; i < hostNames.length; i++){
    if(localHostName == hostNames[i]){
        NodeID = i;
        break;
    }
    ... 
```

所以这对我来说是困难的部分：此时我将连接到客户端`hostNames[i]`。我的计划是为每个客户端的每个连接设置一个不同的线程。我应该如何去创建这些线程？我应该事先设置一个线程数组并在此时定义线程吗？

```
Thread[] connections = new Thread[]();
...
    //in for loop
    connections[i] = new Thread(new ConnectionThread().start(hostNames[i]));
    // ConnectionThread being a tentative name for a custom class 
```

这似乎很简单，但我是不是想多了？过于简单化了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:42:14.207

你马上犯了一个新手错误：

```
if(localHostName == hostNames[i]) 
```

将永远是`false`，因为在*java*中，`==`运算符比较对象*身份*- 即两个对象*是同一个*对象。你想要的是：

```
if(localHostName.equals(hostNames[i])) 
```

接下来，`Thread[]`思路不错，不过传入a`Runnable`给线程，启动*线程*。让您的班级使用实例字段来连接主机名（班级不需要知道自己的主机名）。

像这样的东西：

```
public class MyServer implements Runnable {

    private final String[] hostnames;

    public MyServer(String... hostnames) {
        this.hostnames = hostnames;
    }

    public void run() {
       for (String hostname : hostnames) {
           // connect to hostname
       }
    }

} 
```

然后在你的主要（简单地）：

```
Thread[] threads = new Thread[6];
threads[0] = new Thread(new MyServer("foo", "bar"));
threads[1] = new Thread(new MyServer("bar", "dog"));
...
for (Thread thread : threads) {
    thread.start();
} 
```

# sql-server - 从 dekstop 应用程序访问 Internet 上的数据库服务器是否安全

> ID：13371608
> 
> 赞同：0
> 
> 时间：2012-11-14T01:06:58.193
> 
> 标签：sql-server

我正在开发一个需要从 Internet 访问数据库的应用程序。直接访问数据库服务器（ sql server 2005 ）是否安全，还是使用 Web 服务访问数据库更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:13:04.163

这是一个你需要问自己的问题。通常，通过层访问 DB 是设计应用程序的公认方式，因为它充当插入各种功能（例如安全性、DB 更改、映射更改等）的占位符。

# c# - 我如何对这个简单的表单进行单元测试

> ID：13371609
> 
> 赞同：3
> 
> 时间：2012-11-14T01:07:01.550
> 
> 标签：c#, asp.net, unit-testing

我试图理解为简单场景编写单元测试，但找不到任何能变得如此简单的东西。假设我有一个包含以下两个表单字段的 Web 表单：

```
FirstName
LastName 
```

在后端，我有这个类：

```
class User
{
   public string FirstName {get;set;}
   public string LastName {get;set}
} 
```

这些表单字段映射到然后我使用普通的旧 ADO.NET（无框架）保存到数据库中。我没有验证，它只是通过 INSERT 语句保存它。

单元测试适用于哪里？我要写什么单元测试？这甚至值得测试吗？如果我确实有验证功能，那么我可以测试它们，对吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:21:39.890

您并没有真正对表单和 UI 进行单元测试。您要做的是将您的 UI 分成两部分：呈现并返回给客户端的 HTML 和服务器端部分。这实际上是集成测试的一部分，而不是单元测试。请注意，尽管它不是单元测试，但您仍然可以完全自动化集成测试（这只是意味着像 NUnit 这样的单元测试框架并不合适，您需要制作自己的工具）。

您可以通过获取 HTML 并通过 HTML 分析器（如 HtmlAgilityPack）运行它来测试客户端部分，并确保页面中的所有 URI 返回 200 并且所有表单字段都具有正确的`name=""`属性。

然后，您将单独测试服务器端部分，方法是使用一个程序提交带有示例数据的 POST 表单请求，然后直接检查您的数据库并确保新提交的数据现在以正确的格式保存在数据库中。您将为此使用专用的测试数据库，因为针对生产数据库运行测试工具绝不是一个好主意。

我不能告诉你是否值得为你的应用程序编写自动化测试——它通常花费的时间与编写应用程序代码一样多，甚至更多。您这样做是为了确保在安全关键型或任务关键型系统中至关重要的正确性。要问的简单问题是“如果我的程序不正确，人们会死亡/受伤还是会赔钱？”，如果答案是“是”，那么您应该这样做。

像这样的测试也可以用于运行应用程序以监控“应用程序健康”。例如，我写了一个应用系统与公用电话系统的接口，所以我需要写一个测试器来确保应用程序能够成功拨打电话）。

# dsl - Xtext/EMF 如何进行模型到模型的转换？

> ID：13371612
> 
> 赞同：0
> 
> 时间：2012-11-14T01:07:09.103
> 
> 标签：dsl, xtext, emf

我在 Xtext 中有一个 DSL，我想重用我的 .xtext 文件中定义的规则、终端等，为项目中涉及的其他一些工具生成配置文件。配置文件使用类似于 BNF 的语法，因此它与实际的 Xtext 内容非常相似，并且需要最少的转换。从理论上讲，我可以轻松编写一个脚本来解析 Xtext 并吐出我的配置......

问题是，我该如何实施它以适应整个生态系统？换句话说 - 如何在 Xtext/EMF 中进行模型到模型的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:50:07.767

如果你有两个元模型（ecore,xsd,...），你最好的办法是使用 ATL（[http://www.eclipse.org/atl/](http://www.eclipse.org/atl/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:08:32.447

如果我理解你是正确的，你想从 xtext 模型转到它的 EMF 模型。这是实现此目的的代码示例，在必要时替换您的特定模型。

```
 public static BeachScript loadScript(String file) throws BeachScriptLoaderException { 
    try {
        Injector injector = new BeachStandaloneSetup().createInjectorAndDoEMFRegistration();
        XtextResourceSet resourceSet = injector.getInstance(XtextResourceSet.class);
        resourceSet.addLoadOption(XtextResource.OPTION_RESOLVE_ALL, Boolean.TRUE);
        Resource resource = resourceSet.createResource(URI.createURI("test.beach"));
        InputStream in = new ByteArrayInputStream(file.getBytes());
        resource.load(in, resourceSet.getLoadOptions());
        BeachScript model = (BeachScript) resource.getContents().get(0);
        return model;

    } catch (Exception e) {
        throw new BeachScriptLoaderException("Exception Loading Beach Script " + e.toString(),e );
    } 
```

# asp.net - System.NullReferenceException 与赫芬顿邮报网站

> ID：13371617
> 
> 赞同：1
> 
> 时间：2012-11-14T01:07:32.070
> 
> 标签：asp.net, razor

我正在使用 asp.net Webmatrix-Razor。我也在使用 HTMLAgilityPack。我正在解析元标签以从网站抓取 Facebook 元标签以发布到我的网站。该代码适用于所有网站，除非我尝试从《赫芬顿邮报》获取一篇新闻文章。我得到“System.NullReferenceException：对象引用未设置为对象的实例。” 错误发生在 select new 的行。该网站确实有 Facebook 元标签。我听说有这个元标记可能会导致不确定的问题。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" > 
```

这是代码；

```
 var webGet = new HtmlWeb();   
    var document = webGet.Load(Request.Form["news_URL"]);
    var metaTags = document.DocumentNode.SelectNodes(".//meta");
    if (metaTags != null){
        var metaOnPage = from lnks in document.DocumentNode.Descendants()
                where lnks.Name == "meta" && 
                lnks.Attributes["property"] != null
                //lnks.InnerText.Trim().Length > 0
                select new
                {
                metaName = lnks.Attributes["property"].Value,
                metaContent = lnks.Attributes["content"].Value
                };

        var Title = "";
        var URL = "";
        var imgSRC = "";
        var Description = "";
        foreach(var i in metaOnPage){

        if(i.metaName == "og:title"){
            Title = i.metaContent;
        }else if(i.metaName == "og:url"){
            URL = i.metaContent;
        }else if(i.metaName == "og:image"){
            imgSRC = i.metaContent;
        }else if(i.metaName == "og:description"){
            Description = i.metaContent;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:14:17.097

似乎这个表达式是问题所在：`lnks.Attributes["content"].Value`. 您已检查“属性”是否存在，但“内容”不存在。也许您想添加检查，因为您的代码似乎假定内容包含某些内容：

```
lnks.Attributes["property"] != null && lnks.Attributes["content"] != null 
```

# java - Java：使用线条从中心点绘制填充方块

> ID：13371629
> 
> 赞同：1
> 
> 时间：2012-11-14T01:09:33.830
> 
> 标签：java, graphics, awt, draw, shapes

我需要绘制一个填充正方形，该正方形必须用中心线绘制。我们不能使用 java 形状

我们有一个中心点，笔必须在每个角度从中心到方形边缘画一条线。

这里的问题是数学，我可以用什么来计算绘画所需的距离。因为如果我总是使用相同的距离，它会画一个圆圈。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:17:52.900

只需使用[`java.awt.Graphics.fillRect(int, int, int, int)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#fillRect%28int,%20int,%20int,%20int%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:15:28.917

绘制正方形时，您可以将需要以任何角度绘制的长度视为直角三角形的斜边的长度。你可以很容易地用三角比解决这个问题。棘手的部分是三角形的底边会四处移动。

以下图左半部分所示的 45 度直线为例：

你需要计算出红线的长度（hyp）。您可以使用三角函数根据其与 adj 的角度和 adj 的长度来计算 hyp 的长度。adj 边的长度是正方形高度的一半。

使用的公式是：

cos（角度）= adj/hyp

重新排列：

hyp = adj/cos(角度)

代码看起来像这样：

```
public static double calculateLengthToPaint(double angle, double heightOfSquare){
      return  (heightOfSquare/2.0) / Math.cos(Math.toRadians(angle));
} 
```

不幸的是，这还不是全部。这对于前 45 度非常有效，但是当角度 > 45 度时，三角形的相邻边会改变位置（如下图右半部分所示）。它每 45 度翻转一次。

要处理这种翻转，您需要使用传递给方法的角度（从 12 点钟位置开始围绕正方形的角度）来计算出我们想象的三角形的角度。我已经修改了上面的方法以添加逻辑来计算出校正的角度。

```
public static double calculateLengthToPaint(double angle, double heightOfSquare){
    double flippy = angle % 90;
    if (flippy > 45.0){
        flippy -= 90;
        flippy = Math.abs(flippy);
    }
      return  (heightOfSquare/2.0) / Math.cos(Math.toRadians(flippy));
} 
```

注意：此代码以度为单位表示角度，仅适用于正角度。此外，如果您想让线条在周界周围以均匀增量与正方形相交，那么您需要提出一个解决方案，该解决方案使用勾股定理计算出斜边的长度，然后使用三角函数计算出角度画在。

希望有帮助。

![显示三角形翻转它的斜边在 45 度。](../Images/f7d7baf29c89d767e14897727682dd59.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:42:11.487

我会说这样的话

```
for(int i = sideLength * -1; i < sideLength; i++) {
for(int j = sideLength * -1; j < sideLength; j++) {
   graphics.drawLine(centerX + i, centerY + j);
}
} 
```

这样，它会在您尝试制作的正方形中的每个点上画一条线。我不确定这是否是您想要的，但它会起作用。

# solr - 错误：在 Solr 的 DIH 配置文件中使用嵌入式实体“缺少必填字段”

> ID：13371630
> 
> 赞同：0
> 
> 时间：2012-11-14T01:09:43.970
> 
> 标签：solr, dataimporthandler, dih

我正在尝试使用 Solr 的数据导入处理程序 (DIH) 从 MySQL 数据库中导入多个表。DIH 不会从第二个表“详细信息”中导入数据。

我的数据库配置文件是

```
<document>
    <entity name="item" pk="ListingId" query="SELECT * FROM item as item where listingid=360245270">
        <entity name="detail" pk="ListingId" query="SELECT Body FROM detail where listingid='${item.listingid}'">
            <field column="Body" name="Body" />
        </entity>
     </entity>
</document> 
```

我监控了 MySQL 查询日志，执行的两个重要查询是：

```
SELECT * FROM item as item where listingid=360245270

SELECT Body FROM listeditemdetail where listeditemdetail.listingid='' 
```

显然，配置文件中的“${item.listingid}”部分没有按要求工作。我为表名和列名尝试了不同的拼写，但无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:11:21.017

（试一试）尝试删除主键并使用大写，例如：-

```
<document name="items">
    <entity name="item" query="SELECT * FROM item as item where listingid=360245270">
        <field column="LISTINGID" name="listingid" />
        <entity name="detail" query="SELECT Body FROM detail where listingid='${item.LISTINGID}'">
            <field column="Body" name="Body" />
        </entity>
    </entity>
</document> 
```

# css - 将鼠标悬停在“禁用”图标上时，如何防止延迟显示“热”图标？

> ID：13371631
> 
> 赞同：0
> 
> 时间：2012-11-14T01:09:46.027
> 
> 标签：css

当用户将鼠标悬停在“禁用”（灰色）图标上时，我正在使用以下 CSS 代码显示“热”（彩色）图标：

```
.pic a:link { background: url(http://www.mydomain.com/media/disabled/pic.png) top center no-repeat; }
.pic a:hover { background: url(http://www.mydomain.com/media/hot/pic.png) top center no-repeat; }
.pic a:active { background: url(http://www.mydomain.com/media/normal/pic.png) top center no-repeat; } 
```

它工作正常，但有一个烦恼：用户第一次将鼠标悬停在“禁用”图标上时，在“热”图标出现之前会有一点延迟。所有随后的鼠标悬停都会立即显示“热”图标。有没有办法可以防止在第一次鼠标悬停时发生这种延迟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:12:58.497

这是一个常见的问题，有三种解决方案：

1.  使用 JavaScript 预加载文件。
2.  使用另一个可见元素预加载文件，但隐藏了一些涉及 z 排序的技巧。
3.  使用 CSS 精灵：[http ://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:14:27.307

使用一种技术来预加载背景图像。您看到的延迟是由于浏览器直到用户将鼠标悬停在它上面才获取图像引起的。

这是[有关执行此操作的几种技术的文章](http://css-tricks.com/snippets/css/css-only-image-preloading/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:22:59.830

CSS Sprites 是解决这个问题的正确方法。它不仅解决了这个问题，而且还通过减少要下载的图像数量来加快网站的初始加载速度。对移动客户端特别有用。

# rspec - RSpec：如何测试布尔返回类型？

> ID：13371633
> 
> 赞同：24
> 
> 时间：2012-11-14T01:09:54.000
> 
> 标签：rspec, boolean

我正在使用 RSpec 来测试 API。我想指定一个特定的端点返回一个布尔值，要么`true`要么`false`。这是一个供其他系统和语言使用的 API，因此它是一个实际的布尔值很重要，而不仅仅是 Ruby 将评估为`false`or的东西`true`。

但我看不到这样做的方法，因为`Boolean`Ruby 中没有类型。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-10-29T15:35:22.777

```
expect(variable).to be_in([true, false]) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-03-26T09:05:36.477

我有同样的问题。这就是我想出的：

```
RSpec::Matchers.define :be_boolean do
  match do |actual|
    expect(actual).to be_in([true, false])
  end
end 
```

见：[https ://www.relishapp.com/rspec/rspec-expectations/v/3-4/docs/custom-matchers](https://www.relishapp.com/rspec/rspec-expectations/v/3-4/docs/custom-matchers)

它可以像这样使用：

```
it 'is boolean' do
  expect(true).to be_boolean
end 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-09-06T16:09:51.940

在最近的 rspec 版本中，可以使用复合匹配器：

```
expect(thing).to be(true).or be(false) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-06-13T15:22:44.473

以上的组合如何？

```
RSpec::Matchers.define :be_boolean do
  match do |value|
    [true, false].include? value
  end
end 
```

用法：

```
expect(something).to be_boolean 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T01:17:15.287

虽然 Ruby 没有`Boolean`类，但它确实有[TrueClass](http://ruby-doc.org/core-1.9.2/TrueClass.html)和[FalseClass](http://ruby-doc.org/core-1.9.2/FalseClass.html)，其中`true`和`false`是唯一的实例。我敢肯定，您可以针对这两者中的任何一个进行测试，并且一切顺利。

```
true.is_a? TrueClass # => true
(1 == 1).is_a? TrueClass # => true
1.is_a? TrueClass # => false

false.is_a? FalseClass # => true
(1 == 2).is_a? FalseClass # => true
nil.is_a? FalseClass # => false 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-16T04:33:38.747

很久以后，但这是我决定的：

```
foo.should satisfy {|x| [true, false].map(&:object_id).include? x.object_id} 
```

这是有效的，因为 true 和 false 只有一个实例。此外，更多的是好奇，但它们也总是具有相同的实例 ID。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-16T07:33:18.467

将 gem rspec_boolean 添加到组中的 Gemfile :development, :test:

**宝石'rspec_boolean'**

而不是像这样使用它：

**期望（val.is_done）.to be_boolean**

# networking - 当两台计算机监听同一个端口并且路由器通过该端口接收数据包时会发生什么

> ID：13371634
> 
> 赞同：5
> 
> 时间：2012-11-14T01:09:54.930
> 
> 标签：networking, tcp, listener, port

我要问的是，如果两台计算机监听同一个端口，并且一个信息包通过 WAN Ip 和同一个端口进入路由器。数据包会发送到两台计算机吗？两者都不？非此即彼？

IE

计算机 1 -（内部 IP）-> 192.168.1.3 -（监听端口）-> 4444

计算机2 -（内部IP）-> 192.168.1.2 -（监听端口）-> 4444

计算机 3 -（连接和发送）-> 24.157.358.45:4444

数据包 -> 计算机 1 和计算机 2

VB6中的代码是：

```
LAN.LocalPort = 4444
LAN.Protocol = sckTCPProtocol
LAN.Listen 
```

我在 VB6 Professional 的 Microsoft WinSock Control 6.0 中使用 WinSock 对象

如果有什么需要澄清的，我会非常乐意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:22:02.673

除非已经建立通信，否则路由器不会向任何一台机器发送入站数据包。

如果 192.168.1.3 从其端口 4444 调用其他机器（例如 4.5.6.7），路由器将在其外部地址上分配一个任意端口（例如 24.157.358.45 [原文如此]:5555）并将数据包传递给 4.5 .6.7\. 4.5.6.7 将向 24.157.358.45:5555 发送回复数据包——因为这是它知道的唯一地址——路由器会将这些数据包中继到 192.168.1.3:4444。

这是正常的过程，但是这个方案有很多额外的细节，可以通过诡计与路由器后面的机器建立通信。

在具有公共地址的路由器后面拥有具有私有 IP 地址的机器的系统称为[网络地址转换 (NAT)](http://en.wikipedia.org/wiki/Network_address_translation)；这是一个相当深刻的话题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T01:20:31.083

根据我对路由器的了解，除非设置了端口转发，否则路由器将丢弃在该端口上发送的任何数据包。

如果设置了端口转发，则只能设置其中一台计算机来接收数据包。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T01:30:46.980

如果数据包是与在路由器后面运行的服务器建立新 TCP 连接的入站请求，则路由器必须配置明确的端口转发规则，无论是在路由器的配置中静态配置，还是通过 uPNP 或 SNMP 动态配置，这告诉将 24.157.358.45:4444 上的入站数据包路由到 192.168.1.2:4444 或 192.168.1.3:4444 的路由器，否则数据包将被丢弃。所以不，你的两个监听服务器都不会看到相同的数据包。

一旦建立了 TCP 连接，路由器就知道哪些特定的 LAN 机器与哪些连接相关联，并将相应地路由属于这些连接的传入数据包。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-27T15:21:48.607

前面的答案都是正确的，你需要启用端口转发。如果未启用端口 4444 将在路由器上关闭。

听起来您有多个服务器，并且想要转发到当前打开的任何服务器。这是不可能的 (*)，路由器不关心 PC1 或 PC2 是否正在侦听端口 4444，它只会将所有内容转发到端口转发中配置的地址。

(*): 好的，这是可能的，但需要一些额外的工作。

解决方案 1：诱使路由器认为只有一台服务器。给 PC1 和 PC2 一个具有相同 IP 地址的虚拟网络接口并转发到该地址。确保仅启用这些接口中的一个，在您的网络中具有重复的 IP 地址可能会出现意外行为。

解决方案2：让路由器关心哪个服务器在哪个服务器上。您将需要编写一个程序以在路由器（或另一台服务器）上运行，该程序可以检测哪个服务器正在运行并相应地转发数据包。如果您使用的是 Linux，那么程序 iptables 可能值得一看。

# c++ - C++：如何为控制台应用程序设置新的 wndProc？

> ID：13371644
> 
> 赞同：11
> 
> 时间：2012-11-14T01:11:03.510
> 
> 标签：c++, winapi, console, access-denied, wndproc

如果我有一个带有句柄的控制台应用程序，像这样设置；

```
HWND hWnd = GetConsoleWindow(); 
```

那么如何为窗口设置一个新的 wndProc 呢？
我尝试使用

```
SetWindowLong(hWnd, GWL_WNDPROC, (LONG)conProc); 
```

将 conProc 定义为

```
LRESULT CALLBACK conProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_NCHITTEST:
            return HTCAPTION;
    }
    return DefWindowProc(hWnd, msg, wParam, lParam );
} 
```

但它不起作用并显示“错误代码：5 - 访问被拒绝”`GetLastError()`

我知道像这样修改控制台应用程序非常困难，因为它是一个 csrss.exe 应用程序等等，但我仍然想尝试.. 谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-18T09:27:00.043

虽然给人的印象是控制台窗口属于您的进程（就像其他窗口一样），但它实际上是由`CSRSS`系统进程托管的，并且它的 WndProc 就在那里。这使您无法对窗口进行子类化并在您的进程中提供您自己的 WndProc。

一些相关阅读：

*   [负责显示显示控制台的 GUI 窗口的进程是...... CSRSS](https://stackoverflow.com/a/2831185/868014)
*   [带有 WH_KEYBOARD 的 SetWindowsHookEx 对我不起作用，我做错了什么？](https://stackoverflow.com/questions/11176408/setwindowshookex-with-wh-keyboard-doesnt-work-for-me-what-do-i-wrong)
*   [子类化 XP 控制台窗口](http://us.generation-nt.com/answer/subclassing-xp-console-window-help-27053442.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:34:18.583

首先 SetWindowLong 被 SetWindowLongPtr 取代，你应该使用那个函数。

您是否尝试更改您自己的控制台窗口或其他进程的 WNDPROC？

从 MSDN 文档：

`GWL_WNDPROC -4 Sets a new address for the window procedure. You cannot change this attribute if the window does not belong to the same process as the calling thread.`

# c - 在C中输入数组

> ID：13371648
> 
> 赞同：0
> 
> 时间：2012-11-14T01:11:58.360
> 
> 标签：c, file-io

基本上我有一个 C 程序，用户在其中输入一个数字（例如 4）。定义的是将进入数组的整数数量（最多 10 个）。但是我希望用户能够将它们输入为“1 5 2 6”（例如）。即作为一个空格分隔的列表。

至今：

```
#include<stdio.h>;

int main()
{
    int no, *noArray[10];    
    printf("Enter no. of variables for array");
    scanf("%d", &no);

    printf("Enter the %d values of the array", no);
    //this is where I want the scanf to be generated automatically. eg:
    scanf("%d %d %d %d", noArray[0], noArray[1], noArray[2], noArray[3]);

    return 0; 
} 
```

不知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:38:10.177

[scanf](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)自动使用格式说明符/百分号之前的任何空格（%c 除外，它一次使用一个字符，包括空格）。这意味着像这样的一行：

```
scanf("%d", &no); 
```

实际上读取并忽略您要读取的整数之前的所有空格。因此，您可以使用 for 循环轻松读取由空格分隔的任意数量的整数：

```
for(int i = 0; i < no; i++) {
  scanf("%d", &noArray[i]);
} 
```

请注意，noArray 应该是一个整数数组，并且您需要将每个元素的地址传递给 scanf，如上所述。此外，您的#include 语句后不应有分号。如果没有错误，编译器应该给你一个警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:31:56.853

```
#include <stdio.h>

int main(int argc,char *argv[])
{
    int no,noArray[10];
    int i = 0;

    scanf("%d",&no);
    while(no > 10)
    {
        printf("The no must be smaller than 10,please input again\n");
        scanf("%d",&no);
    }
    for(i = 0;i < no;i++)
    {
        scanf("%d",&noArray[i]);
    }
    return 0;
} 
```

你可以这样试试。

# c - 减少 Makefile 冗余

> ID：13371649
> 
> 赞同：4
> 
> 时间：2012-11-14T01:11:59.613
> 
> 标签：c, makefile

我目前有一个 Makefile 处理可以单独构建的一小组文件。每组 3 个文件的命名方案和结构相同；标头、实现和测试驱动程序。我将有大约 4 个组，如下面的 3 个。

有哪些不那么冗余的方式来构建这个 Makefile，以避免每个组的重复性？

```
flextest: flex_test.o  flex.o
    $(CC) $(CFLAGS) -o  $@  $^
flex_test.o: flex_test.c flex.o minunit.h
    $(CC) $(CFLAGS) -c  $<
flex.o: flex.c flex.h debug.h
    $(CC) $(CFLAGS) -c  $<

skiptest: skip_test.o  skip.o
    $(CC) $(CFLAGS) -o  $@  $^
skip_test.o: skip_test.c skip.o minunit.h
    $(CC) $(CFLAGS) -c  $<
skip.o: skip.c skip.h debug.h
    $(CC) $(CFLAGS) -c  $<

dynatest: dyna_test.o dyna.o
    $(CC) $(CFLAGS) -o  $@  $^
dyna_test.o: dyna_test.c dyna.o minunit.h
    $(CC) $(CFLAGS) -c  $<
dyna.o: dyna.c dyna.h debug.h
    $(CC) $(CFLAGS) -c  $< 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T01:19:10.360

如果您和使​​用此 makefile 的其他任何人都在使用 GNU make，您可以使用大量快捷方式。像这样的东西应该工作：

```
%test: %_test.o %.o
%_test.o: minunit.h
%.o: %.h debug.h

all: flextest skiptest dynatest 
```

# android - 将“触摸区域”映射到位图

> ID：13371652
> 
> 赞同：0
> 
> 时间：2012-11-14T01:12:07.563
> 
> 标签：android

我正在尝试更熟悉 Android`SurfaceView`类，并在此过程中尝试创建一个简单的应用程序，允许用户`Bitmap`在屏幕上移动 a。这个实现的麻烦部分是我还包括用户可以在放置图像后**再次拖动图像的功能。**为了做到这一点，我将位图映射到一组简单的坐标，这些坐标定义了`Bitmap`的当前位置。但是，我将图像映射到的区域与图像不匹配。

# 问题

在`SurfaceView`using上`canvas.drawBitmap()`放置图像并记录放置图像的坐标后，我设置的映射系统`Bitmap`以某种方式误解了 的坐标并且无法正确显示。正如你在这张图片中看到的那样，我只是简单地用`canvas.drawLine()`线条来表示我的触摸区域的空间，并且图像总是在右边：

![.png 和纹理区域始终处于关闭状态！](../Images/a6498c9f70cf0fee09a6be0860bb46b4.png)

# 编码

在这里，我将提供相关的代码摘录来帮助回答我的问题。

## CustomSurface.java

此方法将对象的绘制封装到画布上。评论阐明了每个要素：

```
public void onDraw(Canvas c){

    //Simple black paint
    Paint paint = new Paint();

    //Draw a white background
    c.drawColor(Color.WHITE);

    //Draw the bitmap at the coordinates
    c.drawBitmap(g.getResource(), g.getCenterX(), g.getCenterY(), null);

    //Draws the actual surface that is receiving touch input
    c.drawLine(g.left, g.top, g.right, g.top, paint);
    c.drawLine(g.right, g.top, g.right, g.bottom, paint);
    c.drawLine(g.right, g.bottom, g.left, g.bottom, paint);
    c.drawLine(g.left, g.bottom, g.left, g.top, paint);
} 
```

此方法封装了我如何捕获触摸事件：

```
public boolean onTouchEvent(MotionEvent e){

    switch(e.getAction()){

        case MotionEvent.ACTION_DOWN:{

            if(g.contains((int) e.getX(), (int) e.getY()))
                item_selected = true;
            break;
        }
        case MotionEvent.ACTION_MOVE:{

            if(item_selected)      
                g.move((int) e.getX(), (int) e.getY());

            break;
        }
        case MotionEvent.ACTION_UP:{

            item_selected = false;
            break;
        }
        default:{

            //Do nothing
            break;
        }
    }

    return true;
} 
```

## 图形.java

此方法用于构造图形：

```
//Initializes the graphic assuming the coordinate is in the upper left corner
public Graphic(Bitmap image, int start_x, int start_y){

    resource = image;
    left = start_x;
    top = start_y;
    right = start_x + image.getWidth();
    bottom = start_y + image.getHeight();
} 
```

此方法检测用户是否在图像内部单击：

```
public boolean contains(int x, int y){

    if(x >= left && x <= right){

        if(y >= top && y <= bottom){

            return true;
        }
    }

    return false;
} 
```

此方法用于移动图形：

```
public void move(int x, int y){

    left = x;
    top = y;
    right = x + resource.getWidth();
    bottom = y + resource.getHeight();
} 
```

我还有两种方法可以确定区域的中心（用于重绘）：

```
public int getCenterX(){

    return (right - left) / 2 + left;
}

public int getCenterY(){

    return (bottom - top) / 2 + top;
} 
```

任何帮助将不胜感激，我觉得许多其他 StackOverflow 用户真的可以从这个问题的解决方案中受益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:50:09.113

在 Android 开发者博客上有一个[关于触摸/多点触控/手势](http://android-developers.blogspot.jp/2010/06/making-sense-of-multitouch.html)的非常好的和彻底的解释，其中包括[google code 上的免费和开源代码示例](http://code.google.com/p/android-touchexample/)。

请看一下。如果您不需要手势 - 只需跳过该部分，仅阅读有关触摸事件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:15:20.583

这个问题最终比我想象的要简单得多，经过一些调整后，我意识到这是一个*图像宽度补偿*的问题。

上面代码中的这一行是错误的来源：

```
c.drawBitmap(g.getResource(), g.getCenterX(), g.getCenterY(), null); 
```

正如你所知道的，我在`Graphic`类中操纵坐标来生成位图的中心，然后调用`canvas.drawBitmap()`它，假设它将从中心向外绘制。

显然，这是行不通的，因为画布总是从图像的左上角向下和向右下降，所以解决方案很简单。

# 解决方案

根据触摸位置创建触摸区域，但绘制它的距离等于从 x 和 y 方向的中心位置减去图像宽度的距离。我基本上更改了`Graphic`类的体系结构以实现一个`getDrawX()`and`getDrawY()`方法，该方法将返回修改后的`x`坐标`y`和应该绘制的位置，以便使`center_x`and`center_y`值（在构造函数中确定）实际上看起来位于区域的中心。

这一切都归结为这样一个事实，即为了弥补画布绘制位图的方式，我不幸加入了一些不良行为，最终不得不以完全不同的方式处理偏移量。

# javascript - 即使 Firefox 显示代码 200，JQuery.AJAX 也会失败

> ID：13371662
> 
> 赞同：6
> 
> 时间：2012-11-14T01:13:12.257
> 
> 标签：javascript, jquery, ajax

即使它生成的 URL 有效，我也无法让 jQuery 返回成功。代码如下：

```
 var baseURL = "http://api.rottentomatoes.com/api/public/v1.0.json";
    var apiKey = "myAPIKEy";

    $.ajax
    ({
        type: "GET",
        url: baseURL,
        data: { apikey: apiKey },
        success:function()
        {
            alert('here');
        },
        complete:function(data)
        {
            return data;
        }
    }); 
```

它没有成功（我取出失败但它进入失败）。我不确定为什么会失败，因为我复制粘贴了生成的 URL，它可以工作并返回响应。请让我知道我可以提供哪些其他信息。我很抱歉有点含糊。任何帮助是极大的赞赏！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T01:16:17.720

这将适用于跨域

```
var baseURL = "http://api.rottentomatoes.com/api/public/v1.0.json";
var apiKey = "myAPIKEy";

$.getJSON (baseURL + "?callback=?", { apikey: apiKey }, function(data){
        return data;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:18:16.347

根据烂番茄，您可以使用 JSONP：

```
http://api.rottentomatoes.com/api/public/v1.0.json?apikey=[your_api_key]&callback=mycallbackfn 
```

**一个简单的例子：**

$.getJSON (http://api.rottentomatoes.com/api/public/v1.0.json, { apikey: apiKey, callback : uniqueCallback });

function uniqueCallback(data) { //数据将被发送到这个函数 }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:46:51.287

找到了解决方案。对于烂番茄，您必须将其更改为 JSONP。吸取教训，以后查阅文档...

[http://developer.rottentomatoes.com/docs/read/json/v10/examples](http://developer.rottentomatoes.com/docs/read/json/v10/examples)

# android - Android Share - Facebook SDK - ShareActionProvider

> ID：13371663
> 
> 赞同：5
> 
> 时间：2012-11-14T01:13:25.703
> 
> 标签：android, facebook, facebook-sharer

我正在尝试在我的应用程序中实现共享一个简单的字符串。显然，除了 Facebook 之外的一切都有效。据我所知，现在我必须使用他们的 Facebook SDK 在墙上发布状态。

但是，如果我确实使用他们的 SDK 实现它，有没有办法将它合并到选择器（默认或 ShareActionProvider）中并以某种方式覆盖它并插入 Facebook SDK 的实现？

还是我必须创建一个专用按钮？

//编辑

```
package com.example.shareactionproviderdemo;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent sharingIntent = new Intent(Intent.ACTION_SEND);
        sharingIntent.setType("text/plain");
        sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Test message");
        startActivity(Intent.createChooser(sharingIntent, "Share using"));
    }

} 
```

![在此处输入图像描述](../Images/cfbd2452ca3447871cd521b3de1b144b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:31:35.213

答案是您不能通过使用意图将字符串共享到用户自己的墙上。您需要 SDK 才能做到这一点。原因是因为 Facebook 不允许预填充用户的状态更新，如[Platform Policy IV.2](https://developers.facebook.com/docs/guides/policy/application_integration_points/)所示。

但是，如果您使用 SDK，我们提供了一个提要对话框，提示用户共享状态，并允许开发人员预先填写状态更新的部分内容。然而，它并没有被整合到 Android 的原生选择器中。

跟踪此问题的外部错误报告[在此处](https://developers.facebook.com/bugs/332619626816423/)。

# mysql - 如何替换 MySQL 表中的单词

> ID：13371664
> 
> 赞同：0
> 
> 时间：2012-11-14T01:13:40.410
> 
> 标签：mysql, rename

`VARCHAR`我在MySQL 表的一个大字段中输入了一个错字。如何将单词更改`operaet`为`operate`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:13:40.410

由于 的所有实例`operaet`都可能是拼写错误，因此只需对整个表运行此命令：

```
UPDATE table_name SET column_name = REPLACE(column_name, 'operatre','operate'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:24:59.287

只需转到您的结构选项卡并重命名它。或者运行这个 mysql 命令

```
UPDATE `your_table_name` SET `column_name` = REPLACE(column_name, 'operatre','operate'); 
```

# asp.net-mvc-3 - 使用 EF/Data Annotations 时如何验证部分记录？

> ID：13371665
> 
> 赞同：1
> 
> 时间：2012-11-14T01:13:40.180
> 
> 标签：asp.net-mvc-3, entity-framework-4, entity-framework-5

我正在像向导一样在多个表单/页面上更新记录。我需要在每个表单之后保存到数据库。然而，这只是部分记录。EF POCO 模型具有所有属性（字段）的所有数据注释，因此我怀疑当我保存此部分记录时会出错。

所以我不确定最简单的解决方案。

我想到的一些选择：

a) 为每个表单创建一个视图模型。视图模型而不是 EF 域模型上的数据注释。

b) 在控制器中保存特定属性而不是 SaveAll 以供查看，从而不会触发对非相关属性的验证。

c）其他一些解决方案......？？

提前谢谢了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:18:49.887

选项 1\. 验证可能（尤其是在您的情况下）无论如何都属于视图模型。如果拥有部分填充的记录在技术上是有效的（数据库约束明智），那么这进一步证明了验证属于视图。

此外，通过将验证抽象到您的视图中，您允许其他消费应用程序拥有自己的验证逻辑。

**额外的想法：**

不过，我要说的是，作为一个旁注，像你正在做的那样部分地保存你的数据有点尴尬，除非你有一个很好的理由（我最初假设你这样做了），否则你可以考虑保留该数据其他地方（会话）并在向导结束时将其持久化。

这将允许更好、更合适的数据库约束，以实现更好的数据完整性。例如，如果整条记录不允许使用空名称，那么为了打破向导的提交而允许使用空值可能会导致更长期的麻烦。

# c - 如何仅计算列表中的某些项目？

> ID：13371673
> 
> 赞同：2
> 
> 时间：2012-11-14T01:14:54.220
> 
> 标签：c, list, loops, if-statement

我试图允许用户输入姓氏并将其删除，如果有多个姓氏相同的人，则用户可以输入名字并删除该特定个人。我的问题是我无法找到一种方法来允许该函数破译是否有多个具有相同姓氏的联系人。我可以让它在它只识别多个联系人中的第一个或所有多个联系人的情况下工作，但不能同时识别这两种情况。例如。如果我有一个 mike smith、ted smith 和 phil stevens 的列表，我可以让它删除其中一个 smiths，但不删除 stevens，或者我可以让它删除 stevens 而不仅仅是其中一个 smiths。

```
typedef struct friends_contact{

   char *First_Name;
   char *Last_Name;
   char *home;
   char *cell;
}fr; 
```

上面是结构，下面显然是剩下的代码

```
char delete_contact(fr*friends ,int* counter, int i)
{
    char name_search[50]={'\0'};
    char name_search3[50]={'\0'};
    char Delete[5]={'\0'};
    int flag=0;

    printf("Search by last name\n");
    scanf("%s",name_search);//Name entry

    for(i=0;i<*counter;i++)
    {
        if(strcmp(name_search,friends[i].Last_Name)==0)//Copys over the name entered
            flag++;
    }
    if(flag<=1)
    {
        strcpy(friends[i].Last_Name,Delete);
        printf("Name was deleted");
    }
    if(flag>1)
    {
        printf("There is more then 1 " "%s " ",please enter a first name\n",name_search);
        scanf("%s",name_search3);
        for (i=0;i<*counter;i++)
        {
            if(strcmp(name_search3,friends[i].First_Name)==0)
            {
                strcpy(friends[i].First_Name,Delete);
                printf("Name was deleted");
            }
        }
    }

    free(friends[i].First_Name);
    free(friends[i].Last_Name);
    free(friends[i].home);
    free(friends[i].cell);
} 
```

我试图使用一个标志，该标志计为第一个`for`循环循环，但所做的只是计算它搜索联系人列表（或*计数器）的次数。

有没有办法让函数计算有多少类似的姓氏，这样我就可以让程序确定何时需要询问名字，何时不需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:21:19.093

与其简单地计算匹配的数量，最好的办法是创建第二个列表，在其中添加匹配的索引。这样，当解析结束时，如果这个新列表只有一个元素，请将其删除 - 否则，您将拥有原始列表的索引，甚至可以将所有匹配的条目呈现给用户。

您的逻辑也有一个错误，因为您没有记录最后一个匹配名称的索引（即使只有一个） - 在使用 i 计数后，您总是删除索引“i”的元素如果有一个匹配项，则从 0 到“计数器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:57:53.657

自己检查内存泄漏。我不会用勺子喂你。:)

```
#include <stdio.h>
#include <string.h>

typedef struct friends_contact{

   char *First_Name;
   char *Last_Name;
   char *home;
   char *cell;
}fr;

void delete_contact(fr *friends ,int counter)
{
    char name_search[50]={'\0'};
    char name_search3[50]={'\0'};

    int flag=0;
    int i;

    printf("Search by last name\n");
    scanf("%s",name_search);//Name entry

    for(i=0;i<counter;i++)
    {
        if(strcmp(name_search,friends[i].Last_Name)==0)//Copys over the name entered
            flag++;
    }
    if(flag==1)
    {

       friends[i].Last_Name = NULL;
        printf("Name was deleted");
    }
    if(flag>1)
    {
        printf("There is more then 1 " "%s " ",please enter a first name\n",name_search);
        scanf("%s",name_search3);
        for (i=0;i<counter;i++)
        {
            if(strcmp(name_search3,friends[i].First_Name)==0)
            {
                friends[i].Last_Name = NULL;
                printf("Name was deleted");
            }
        }
    }

}

int main()
{
    fr arr[3];

    arr[0].First_Name = "john";
    arr[1].First_Name = "jack";
    arr[2].First_Name = "jake";

    arr[0].Last_Name = "smith";
    arr[1].Last_Name = "smith";
    arr[2].Last_Name = "fox";

    delete_contact(arr,3);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:16:50.900

```
char delete_contact(fr*friends ,int* counter, int i)
{
    char name_search[50]={'\0'};
    char name_search3[50]={'\0'};
    char Delete[5]={'\0'};
    int flag=0;

    printf("Search by last name\n");
    scanf("%s",name_search);//Name entry

    for(i=0;i<*counter;i++)
    {
        if(strcmp(name_search,friends[i].Last_Name)==0)//Copys over the name entered
            flag++;
    }
    if(flag == 1)
    {
        strcpy(friends[i].Last_Name,Delete);

        free(friends[i].First_Name);
        free(friends[i].Last_Name);
        free(friends[i].home);
        free(friends[i].cell);

        printf("Name was deleted");
    }
    if(flag>1)
    {
        printf("There is more then 1 " "%s " ",please enter a first name\n",name_search);
        scanf("%s",name_search3);
        for (i=0;i<*counter;i++)
        {
            if((strcmp(name_search3,friends[i].First_Name)==0) && (strcmp(name_search,friends[i].Last_Name) == 0))
            {
                strcpy(friends[i].First_Name,Delete);

                free(friends[i].First_Name);
                free(friends[i].Last_Name);
                free(friends[i].home);
                free(friends[i].cell);

                 printf("Name was deleted");
            }
        }
    }
} 
```

你可以这样试试。

# c++ - 从给定位置开始重新排序数组，C++

> ID：13371676
> 
> 赞同：4
> 
> 时间：2012-11-14T01:15:12.083
> 
> 标签：c++, arrays, element

我是 C++ 新手，我正在尝试使用切片列表在 python 中做一件容易的事情，但我找不到在 C++ 中做这件事的简单方法。

我需要重新排序数组以从给定元素开始，例如： int array[] = {1,2,3,4,5}; 重新排序的数组从元素 3 开始：{3,4,5,1,2}

这是我发现这样做的方式，但它似乎有点矫枉过正：

```
void Graph::reorder(int x, MIntArray &currentArray) 
{
    MIntArray reorderedIndices;
    int index;
    for (unsigned int i=0; i<currentArray.length();i++){if(currentArray[i]==x){index=i;}} // get the index
    for (unsigned int i=index; i<currentArray.length();i++){reorderedIndices.append(currentArray[i]);} // zero to index
    for (unsigned int i=0; i<index;i++){reorderedIndices.append(currentArray[i]);} // index to last
    for (unsigned int i=0; i<currentArray.length();i++){currentArray.set(reorderedIndices[i],i);} // transfer
} 
```

任何帮助将非常感激！！

谢谢

路易斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:17:44.400

使用[`std::rotate`](http://www.cplusplus.com/reference/algorithm/rotate/)方法来执行此重新排序。将数组的开头作为第一个参数，将数组的结尾（即`array+length`）作为最后一个参数，将“中点”作为第二个参数。中点定义要移动到初始位置的元素的索引。

```
int x[] = {1,2,3,4,5};
rotate(x, x+2, x+5);
for (int i = 0 ; i != 5 ; i++)
    cout << x[i] << " ";
cout << endl; 
```

这[打印](http://ideone.com/XEldk8) `3 4 5 1 2`

# android - 选项卡菜单使用 api16 上的选项卡活动和选项卡组启动活动

> ID：13371677
> 
> 赞同：1
> 
> 时间：2012-11-14T01:15:14.917
> 
> 标签：android, nfc, activitygroup

我正在创建一个用于读取和写入 nfc 标签的应用程序，为此我创建了一个带有 4 个选项卡的选项卡菜单。这个应用程序有一个自定义标题栏和背景上的图像。
我试图在 api 16 中运行这个应用程序。
当按下 tab3 时，一切都会正确显示，我的自定义标题栏、我的背景和下面的 4 个选项卡。在此选项卡中，我有一个文本框和一个按钮，单击按钮时，文本框中的文本应传递给 nfc 标签，如果没有，则应读取标签数据。
发生的情况是，当我单击按钮而不是写入标签时，它正在读取，当它读取标签时，启动的活动是标签活动，但布局错误，它只出现定义的活动标题在清单中，黑色背景以及文本框和按钮。然后，如果我单击按钮写入标签，它会起作用，并且如果未单击按钮，则会读取标签。
现在我创建了第四个选项卡，里面有一个按钮，如果单击该按钮，它会启动一个新活动，并且这个 tagsactivity 运行良好。当这个类在 api13 之后被弃用时，问题是否与在 api16 中使用 tagsactivity 有关？还是我错过了另一件事。
这是tabs2

```
 import android.app.LocalActivityManager;
   import android.content.Intent;
 import android.os.Bundle;
 import android.view.KeyEvent;
 import android.view.View;
 import android.view.View.OnKeyListener;
 import android.view.Window;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.TabHost;

 public class Tabs2 extends android.app.TabActivity{
public TabHost tabHost;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.activity_tabs);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);
        // Get the tabHost
    this.tabHost = getTabHost();

    Button btentrar= (Button) findViewById(R.id.titlebarRefreshBtn);

       btentrar.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                setResult(2);
                finish();
            }
        }); 

    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch the first Activity for the tab (to be reused)
    intent = new Intent().setClass(this, FirstGroup.class);

    // Initialize a TabSpec for the first tab and add it to the TabHost
    spec = tabHost.newTabSpec("Opcções").setIndicator("FirstGroup",
            getResources().getDrawable(R.drawable.settingsicon)) // Replace null with R.drawable.your_icon to set tab icon
                    .setContent(intent);
    tabHost.addTab(spec);

        // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, SecondActivityGroup.class);

    // Initialize a TabSpec for the second tab and add it to the TabHost
    spec = tabHost.newTabSpec("Tags passadas").setIndicator("Tags Passadas",
            getResources().getDrawable(R.drawable.writedocumenticon)) // Replace null with R.drawable.your_icon to set tab icon
                    .setContent(intent);
    tabHost.addTab(spec);

     // Create an Intent to launch an Activity for the tab (to be reused)
        intent = new Intent().setClass(this, ThirdActivityGroup.class);

        // Initialize a TabSpec for the second tab and add it to the TabHost
        spec = tabHost.newTabSpec("Read and write").setIndicator("Ler e escrever",
                getResources().getDrawable(R.drawable.checkiconm)) // Replace null with R.drawable.your_icon to set tab icon
                        .setContent(intent);
        tabHost.addTab(spec);

        // Create an Intent to launch an Activity for the tab (to be reused)
        intent = new Intent().setClass(this, FourthActivityGroup.class);

        // Initialize a TabSpec for the second tab and add it to the TabHost
        spec = tabHost.newTabSpec("Read and write v2").setIndicator("Ler e escrever v2",
                getResources().getDrawable(R.drawable.checkiconm)) // Replace null with R.drawable.your_icon to set tab icon
                        .setContent(intent);
        tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
}
} 
```

这是扩展活动组的第三个活动组

```
import java.util.ArrayList;

import android.app.ActivityGroup;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class ThirdActivityGroup extends ActivityGroup {

    // Keep this in a static variable to make it accessible for all the nested activities, lets them manipulate the view
public static ThirdActivityGroup group;

    // Need to keep track of the history if you want the back-button to work properly, don't use this if your activities requires a lot of memory.
private ArrayList<View> history;

@Override
protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      this.history = new ArrayList<View>();
      group = this;

          // Start the root activity withing the group and get its view
      View view = getLocalActivityManager().startActivity("TagsActivity", new
                                         Intent(this,TagsActivity.class)
                                          .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                                        .getDecorView();

          // Replace the view of this ActivityGroup
      replaceView(view);

   }

public void replaceView(View v) {
            // Adds the old one to history
    history.add(v);
            // Changes this Groups View to the new View.
    setContentView(v);
}

public void back() {
    if(history.size() > 0) {
        history.remove(history.size()-1);
        setContentView(history.get(history.size()-1));
    }else {
        finish();
    }
}

public void onBackPressed() {
    ThirdActivityGroup.group.back();
    return;
}

} 
```

这是第四个活动组

```
import java.util.ArrayList;

import android.app.ActivityGroup;
import android.content.Intent;
import android.os.Bundle;
 import android.view.View;

public class FourthActivityGroup extends ActivityGroup {

    // Keep this in a static variable to make it accessible for all the nested activities, lets them manipulate the view
public static FourthActivityGroup group;

    // Need to keep track of the history if you want the back-button to work properly, don't use this if your activities requires a lot of memory.
private ArrayList<View> history;

@Override
protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      this.history = new ArrayList<View>();
      group = this;

          // Start the root activity withing the group and get its view
      View view = getLocalActivityManager().startActivity("Teste", new
                                        Intent(this,Teste.class)
                                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                                        .getDecorView();

          // Replace the view of this ActivityGroup
      replaceView(view);

   }

public void replaceView(View v) {
            // Adds the old one to history
    history.add(v);
            // Changes this Groups View to the new View.
    setContentView(v);
}

public void back() {
    if(history.size() > 0) {
        history.remove(history.size()-1);
        setContentView(history.get(history.size()-1));
    }else {
        finish();
    }
}

public void onBackPressed() {
    FourthActivityGroup.group.back();
    return;
}

} 
```

这是睾丸

```
import java.util.ArrayList;

import android.app.Activity;
import android.app.ActivityGroup;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.Button;

public class Teste extends Activity {

    // Keep this in a static variable to make it accessible for all the nested activities, lets them manipulate the view

@Override
protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_teste);

        Button btnfc= (Button) findViewById(R.id.button1);

           btnfc.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    startActivity(new Intent(Teste.this, TagsActivity.class));  
                }
            }); 

   } 
```

}

这是标签活动

```
public class TagsActivity extends Activity {

private NfcAdapter mNfcAdapter;

private Button mEnableWriteButton;
private EditText mTextField;
private ProgressBar mProgressBar;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tags);
     getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);
    mTextField = (EditText) findViewById(R.id.text_field);

    mProgressBar = (ProgressBar) findViewById(R.id.progress_bar);
    mProgressBar.setVisibility(View.GONE);

    mEnableWriteButton = (Button) findViewById(R.id.enable_write_button);
    mEnableWriteButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            setTagWriteReady(!isWriteReady);
            mProgressBar.setVisibility(isWriteReady ? View.VISIBLE : View.GONE);
        }
    });

    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
    if (mNfcAdapter == null) {
        Toast.makeText(this, "Sorry, NFC is not available on this device", Toast.LENGTH_SHORT).show();
        finish();
    }

}

private boolean isWriteReady = false;

/**
 * Enable this activity to write to a tag
 * 
 * @param isWriteReady
 */
public void setTagWriteReady(boolean isWriteReady) {
    this.isWriteReady = isWriteReady;
    if (isWriteReady) {
        IntentFilter[] writeTagFilters = new IntentFilter[] { new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED) };
        mNfcAdapter.enableForegroundDispatch(TagsActivity.this, NfcUtils.getPendingIntent(TagsActivity.this),
                writeTagFilters, null);
    } else {
        // Disable dispatch if not writing tags
        mNfcAdapter.disableForegroundDispatch(TagsActivity.this);
    }
    mProgressBar.setVisibility(isWriteReady ? View.VISIBLE : View.GONE);
}

@Override
public void onNewIntent(Intent intent) {
    // onResume gets called after this to handle the intent
    setIntent(intent);
}

@Override
public void onResume() {
    super.onResume();
    if (isWriteReady && NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {
        processWriteIntent(getIntent());
    } else if (!isWriteReady
            && (NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction()) || NfcAdapter.ACTION_NDEF_DISCOVERED
                    .equals(getIntent().getAction()))) {
        processReadIntent(getIntent());
    }
}

private static final String MIME_TYPE = "application/com.smartcom.onetagv4";

/**
 * Write to an NFC tag; reacting to an intent generated from foreground
 * dispatch requesting a write
 * 
 * @param intent
 */
public void processWriteIntent(Intent intent) {
    if (isWriteReady && NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {

        Tag detectedTag = getIntent().getParcelableExtra(NfcAdapter.EXTRA_TAG);

        String tagWriteMessage = mTextField.getText().toString();
        byte[] payload = new String(tagWriteMessage).getBytes();

        if (detectedTag != null && NfcUtils.writeTag(
                NfcUtils.createMessage(MIME_TYPE, payload), detectedTag)) {

            Toast.makeText(this, "Wrote '" + tagWriteMessage + "' to a tag!", 
                    Toast.LENGTH_LONG).show();
            setTagWriteReady(false);
        } else {
            Toast.makeText(this, "Write failed. Please try again.", Toast.LENGTH_LONG).show();
        }
    }
}

public void processReadIntent(Intent intent) {
    List<NdefMessage> intentMessages = NfcUtils.getMessagesFromIntent(intent);
    List<String> payloadStrings = new ArrayList<String>(intentMessages.size());

    for (NdefMessage message : intentMessages) {
        for (NdefRecord record : message.getRecords()) {
            byte[] payload = record.getPayload();
            String payloadString = new String(payload);

            if (!TextUtils.isEmpty(payloadString))
                payloadStrings.add(payloadString);
        }
    }

    if (!payloadStrings.isEmpty()) {
        String content =  TextUtils.join(",", payloadStrings);
        Toast.makeText(TagsActivity.this, "Read from tag: " + content,
                Toast.LENGTH_LONG).show();

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:41:21.743

使用[链接](http://www.mkyong.com/android/android-tablayout-example/)的示例来重建您的应用程序。一个建议：您在使用选项卡时遇到问题，因此作为第一个任务构建用户界面。当它正常工作时，添加您的 NFC 代码。

# java - 如何使用 XStream 注释 java 对象以将属性添加到单个元素？

> ID：13371678
> 
> 赞同：0
> 
> 时间：2012-11-14T01:15:19.080
> 
> 标签：java, xstream

我正在尝试**使用 XStream 注释**创建一个 java 测试来序列化/反序列化 XML，例如：

```
<book>
  <title>Hello</title>
  <author>Joe Smith</author>
  <publisher city="Smallville">
      <employees>25</employees>
      <age>15</age>
  </publisher>
  <key type="1">XYZ</key>
</book> 
```

我有大部分工作。我有一个使用 @XStreamAlias("book") 的 Book 对象。我创建一个 Publisher 对象并将其添加到具有相关别名的书中，并使用城市的 @XStreamAsAttribute 注释。

但是，当我尝试创建表示“键”的对象时，我遇到了困难。基本上我需要一个名为 key 的元素，该元素具有一个名为“type”的属性和数据。

在书中，如果我使用：

```
@XStreamAlias("key")
String key; 
```

但这并没有给我类型属性（显然），如果

```
@XStreamAlias("type")
@XStreamAsAttribute
String type; 
```

我将该属性添加到 Book 对象（即，

```
<book type="1">
 ....
</book> 
```

我还没有找到任何示例来展示如何向这样的单个元素添加属性。XStream 是否提供了一种方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:35:25.533

请参阅[http://fahdshariff.blogspot.de/2011/12/using-xstream-to-map-single-element.html](http://fahdshariff.blogspot.de/2011/12/using-xstream-to-map-single-element.html)（不是我的网站）

从那里改编的答案是：

```
@XStreamAlias("error")
@XStreamConverter(value=ToAttributedValueConverter.class, strings={"message"})
public class Error {

   String message;
   int code;
} 
```

这将生成以下 XML：

```
<error code="99">This is an error message</error> 
```

# sql - 获取孩子关系的计数和孩子的孩子的计数

> ID：13371679
> 
> 赞同：1
> 
> 时间：2012-11-14T01:15:43.990
> 
> 标签：sql, postgresql

对不起，naff 的标题，但我真的不知道如何解释这一点，我是新一代的 SQL 技能由于活动记录模式而下降的人之一！

基本上我在 PostgreSQL 中有三个表

客户端（一个客户端有许多地图）- id

地图（地图有一个客户端和多个图层） - id - client_id

图层（图层有一张地图） - id - map_id

我想编写一个 SQL 查询，它返回 Client.id 以及客户端拥有的地图数量以及客户端在所有地图中拥有的图层总数。

这可以通过单个查询来实现吗？速度无关紧要，因为这只是出于分析目的，因此不会经常运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:25:04.283

我会为此使用一对子查询。就像是：

```
SELECT
    id,
    (
         SELECT count(map.id)
         FROM map 
         WHERE map.client_id = client.id
    ) AS n_maps,
    (
         SELECT count(layer.id)
         FROM map INNER JOIN layer ON (layer.map_id = map.id)
         WHERE map.client_id = client.id
    ) AS n_layers
FROM client; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:38:09.497

我会这样做，在客户端模型中的方法中使用单个 SQL 查询：

```
def self.statistics
    Client.select("
            clients.id AS client_id, 
            COUNT(DISTINCT(maps.id)) AS total_maps, 
            COUNT(layers.id) AS total_layers")
    .joins(maps: :layers)
    .group("clients.id")
end 
```

为了使其工作，您需要在模型之间声明关联（客户端 has_many :maps，Map has_many :layers）

你可以在 ActiveRecord 的查询界面中去 depper[这里](http://guides.rubyonrails.org/active_record_querying.html)

# database - （sqlite3）是否可以根据级联/递归条件进行选择？

> ID：13371681
> 
> 赞同：1
> 
> 时间：2012-11-14T01:16:03.853
> 
> 标签：database, select, sqlite

假设我有这张桌子：

```
Parent         ID         FileName                 Flag
0              1          C:\                      -1
1              2          C:\Test\                 0
2              3          C:\Test\Test2\           0
3              4          C:\Test\Test2\file.txt   0
0              5          D:\                      0
5              6          D:\file-2.txt            0 
```

我想选择满足这两个条件的记录：

1.  标志 <> -1
2.  没有父记录具有标志 <> -1

这在 sqlite3 中可能吗？IE。

`SELECT FileName FROM MyTable WHERE Flag <> -1 And Recursive(Parent) <> -1`

所以在示例表中，这样的查询将返回`D:\file-2.txt`，但**不是** `C:\Test\Test2\file.txt`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:12:09.823

SQLite 没有任何机制可以在任意深度上进行递归查找。
您必须以访问数据库的任何语言来实现此逻辑。

在此特定示例中，您可以尝试根据文件名进行查找：

```
SELECT FileName
FROM MyTable A
WHERE Flag <> -1
  AND NOT EXISTS (SELECT ID
                  FROM MyTable B
                  WHERE SUBSTR(B.FileName, -1) = '\'
                    AND A.FileName LIKE B.FileName || '%'
                    AND B.Flag = -1) 
```

# vb.net - 在 Visual Basic 中将 CSV 文本文件的项目添加到列表框

> ID：13371685
> 
> 赞同：2
> 
> 时间：2012-11-14T01:16:25.693
> 
> 标签：vb.net, text, csv, listbox

> **可能重复：**
> [在 Visual Basic 中选择列表框项时切换 CVS 文本文件项时出错](https://stackoverflow.com/questions/13385092/error-switch-cvs-text-file-item-when-selecting-listbox-item-in-visual-basic)

我正在尝试将文本文件中的行导入列表框，但收到以下错误消息：

--附加信息：索引超出了数组的范围。--

文本文件中的信息是这样的：

```
 Ball,Krystal,F,1981
       Banks,Robin,F,1988
       Burgher,Hamilton,M,1980
       Early,Brighton,M,1989
       Hedd,MT,M,1960
       Hogg,Ima,F,1953
       Knapp,Anita,F,1970
       Overnout,Roger,M,1968
       Psito,Arnie,M,1962
       Teak,Anne,F,1939 
```

我的代码如下：

```
 Dim names() As String = IO.File.ReadAllLines("Info.txt")
    Dim query = From line In names
                Let data = line.Split(","c)
                Let lName = data(0)
                Let fName = data(1)
                Let gender = data(2)
                Let yOB = CInt(data(3))
                Select lName, fName, gender, yOB
    For Each person In query
        lstLNames.Items.Add(person.lName)
    Next 
```

有人可以让我知道出了什么问题。提前致谢。

# sharepoint-2010 - 可视化 web 部件中的相对 url

> ID：13371687
> 
> 赞同：0
> 
> 时间：2012-11-14T01:17:14.463
> 
> 标签：sharepoint-2010, web-parts

在我的 Visual web 部件中，我使用了如下的相对 url，它工作正常。但是我认为当我将我的项目部署在另一台服务器上的不同站点结构中时它不会起作用。所以我的问题是如何使链接、网址成为动态的，这将在所有场景中起作用。

```
../../something.aspx 
```

请注意，我在标签中包含了一些 JQuery 文件，`<script>`我不能只依赖于使用代码构建动态 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:22:01.380

理士，

您是否使用文档库来存储页面？如果是这样，您可以使用 SPDocumentLibrary.DefaultViewURL。如果您尝试导航到不同的 Web，则可以从 SPWeb.Url 获取 Web 的 URL。

最好的，-托尼

# ios - 在 iPad 上诊断旋转问题

> ID：13371690
> 
> 赞同：0
> 
> 时间：2012-11-14T01:17:41.797
> 
> 标签：ios, ipad, uiviewcontroller, rotation, orientation

我在 iPad 上保持方向时遇到了一个奇怪的问题。很少，当我换入和换出视图控制器时，我的视图显示为纵向，即使我的设备处于横向模式。

我应该怎么做才能解决这个问题？我已经使用 shouldAutorotateToInterfaceOrientation: 方法将我的控制器设置为横向。此外，它很少出现，使得跟踪错误非常困难。

除了通过每个控制器之外，有没有更快的方法来找出方向错误的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:36:52.027

我看到您的评论说您正在使用“shouldAutorotateToInterfaceOrientation”通过代码管理方向，这特别是一种 iOS5 方法。有没有可能是iPad iOS6？如果是，您需要使用“supportedInterfaceOrientations”对其进行备份。

# ruby-on-rails - 如何重新定义 ruby 和 rails request.ip 和 request.remote_ip 方法？

> ID：13371692
> 
> 赞同：2
> 
> 时间：2012-11-14T01:17:45.367
> 
> 标签：ruby-on-rails, ruby, rack

我有一个 Rails 应用程序，我正在尝试重载 request.remote_ip 和 request.ip 以便使用 cloudflare 标头（HTTP_CF_CONNECTING_IP）（如果存在）...我已经尝试过这些，但它们都不起作用：

```
module Rack
  class Request
    class << self
      def ip
        @ip ||= (@env['HTTP_CF_CONNECTING_IP'] || super)
      end
    end
  end
end

module ActionDispatch
  class Request < Rack::Request
    class << self
      def remote_ip
        @remote_ip ||= (@env['HTTP_CF_CONNECTING_IP'] || super)
      end
    end
  end
end 
```

我不能使用额外的方法，比如

```
def connecting_ip
  @env['HTTP_CF_CONNECTING_IP'] || request.remote_ip
end 
```

在 application_controller 中，因为我还有一些使用 request.ip 的其他宝石（如设计）

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T01:20:38.303

我相信`request`是一个例子。但是您正在定义类方法。删除`class << self`废话，您将重新定义实例方法。

只是一个音符，这听起来有点疯狂。里面小心点。框架并不总是喜欢重新安排他们的胆量。

* * *

使用实例方法时的错误消息意味着正在发生其他事情。 `super`调用超类实现。但是，当您重新打开一个类并覆盖某些东西时，您实际上是在覆盖原始实现。由于该方法在超类中不存在，`super`因此不起作用。

相反，您可以在声明将替换它的新方法*之前*`alias`保存原始实现。

 *```
module ActionDispatch
  class Request < Rack::Request
    alias :remote_ip_orig :remote_ip
    def remote_ip
      @remote_ip ||= (@env['HTTP_CF_CONNECTING_IP'] || remote_ip_orig)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-15T19:53:31.877

如果你想使用 CloudFlare 并像我在没有 Ngingx 或 Apache 模块的情况下那样检测真正的 IP，这种猴子补丁方法是一个非常糟糕的主意，这将在未来导致意想不到的结果。最好使用中间件，因为它应该被使用。这是我提出并实施的一个。

```
module Rack
  class CloudFlareFixup
    def initialize(app)
      @app = app
    end

    def call(env)
      if env['HTTP_CF_CONNECTING_IP']
        env['HTTP_X_FORWARDED_FOR'] = env['HTTP_CF_CONNECTING_IP']
        env['REMOTE_ADDR'] = env['HTTP_CF_CONNECTING_IP']
      end
      @app.call(env)
    end
  end
end 
```

只需将其添加到您的 application.rb

```
config.middleware.insert_before(0, Rack::CloudFlareFixup) 
```

你可以在[https://gist.github.com/mattheworiordan/9024372看到完整的 Gist](https://gist.github.com/mattheworiordan/9024372)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-20T19:12:45.763

我尝试了很多解决这个问题的方法。这是我发现的：

*   `cloudflare-rails`gem => 这会将 ip 和 remote_ip 设置为原始 ip。我希望 ip 代表它来自的 cloudflare ip，而 remote_ip 代表用户的原始 ip，所以这对我不起作用。它通过每 12 小时查找一次 Cloudflare IP 范围列表并将其添加到trusted_proxies 来运行。然后它修补： - `ActionDispatch::Request.ip`，`ActionDispatch::Request.remote_ip`并`Rack::Attack::Request.trusted_proxy?`使用 cloudflare 受信任的代理，以便 ip 和 remote_ip 忽略它们并使用发起请求的用户的原始 ip。
*   `actionpack-cloudflare`gem => 这要简单得多。它所做的一切都是直接设置`ActionDispatch.remote_ip = @env['HTTP_CF_CONNECTING_IP']`的，这符合 Cloudflare 最佳推荐的最佳实践，但将 gem 用于 1 行代码似乎并不值得。
*   手卷

```
# config/initializers/cloudflare.rb

# These values should rarely or never change and Cloudflare should alert us before that happens.
# The list of Cloudflare proxy server ip ranges comes from https://www.cloudflare.com/ips/
CLOUDFLARE_IP_RANGES = [IPAddr.new("103.21.244.0/22"),IPAddr.new("103.22.200.0/22"),IPAddr.new("103.31.4.0/22"),IPAddr.new("104.16.0.0/12"),IPAddr.new("108.162.192.0/18"),IPAddr.new("131.0.72.0/22"),IPAddr.new("141.101.64.0/18"),IPAddr.new("162.158.0.0/15"),IPAddr.new("172.64.0.0/13"),IPAddr.new("173.245.48.0/20"),IPAddr.new("188.114.96.0/20"),IPAddr.new("190.93.240.0/20"),IPAddr.new("197.234.240.0/22"),IPAddr.new("2405:8100::/32"),IPAddr.new("2405:b500::/32"),IPAddr.new("2606:4700::/32"),IPAddr.new("2803:f800::/32"),IPAddr.new("2a06:98c0::/29"),IPAddr.new("2c0f:f248::/32")
]

# By adding the cloudflare IP ranges as trusted_proxies, rails ignores those IPs when setting remote_ip and correctly sets it to the originating IP
Rails.application.config.action_dispatch.trusted_proxies = CLOUDFLARE_IP_RANGES + ActionDispatch::RemoteIp::TRUSTED_PROXIES 
```

最后，我想阻止非代理请求

```
# config/initializers/rack_attack.rb
class Rack::Attack
  class Request < ::Rack::Request
    # Create a remote_ip method for rack request by setting it equal to the cloudflare connecting ip header
    # To restore original visitor IP addresses at your origin web server, Cloudflare recommends your logs or applications
    # look at CF-Connecting-IP instead of X-Forwarded-For since CF-Connecting-IP has a consistent format containing only one IP.
    # https://support.cloudflare.com/hc/en-us/articles/200170986-How-does-CloudFlare-handle-HTTP-Request-headers-
    def remote_ip
      @remote_ip ||= (env['HTTP_CF_CONNECTING_IP'] || ip).to_s
    end

    # This checks the request IP against Cloudflare IP ranges and the action dispatch default trusted proxies.
    # These include various local IPs like 127.0.0.1 so that local requests won't be blocked.
    def proxied?
      Rails.application.config.action_dispatch.trusted_proxies.any? { |range| range === ip }
    end
  end

  # Block all requests coming from non-Cloudflare IPs
  blocklist("block non-proxied requests in production") do |req|
    if req.proxied?
      false
    else
      req.log :warn
      true
    end
  end
end 
```*

# javascript - element 和 observe('click') on options to toggle option.selected 我已经看到了一些使用 jQuery 做我想做的事的例子，但我正在为使用 Prototype 框架并希望坚持的应用程序开发一个插件到那个。基本上，我想要的功能就像总是按下 ctrl 键一样。如果单击选定的选项，我希望它取消选择。这是我使用 jQuery 找到的一个示例：http://jsbin.com/idofa 这是我的版本不起作用，因为该事件在默认操作选择它之后

> ID：13371693
> 
> 赞同：3
> 
> 时间：2012-11-14T01:18:04.087
> 
> 标签：javascript, dom, prototypejs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:58:59.723

正确的答案，来自我上面的评论：

选择是在鼠标按下时执行的，因此**`'mousedown'`必须使用事件而不是`'click'`此处。**

```
option.observe('mousedown', function (event) {
    this.selected = !this.selected;
    event.stop();    // unnecessary in this case, but I think it's good practice
}); 
```

小提琴上的例子，由 Victor 编辑：

[http://jsfiddle.net/RP7em/3/](http://jsfiddle.net/RP7em/3/)

# linq - asp.net mvc3如何传递ID变量但没有在浏览器中

> ID：13371695
> 
> 赞同：0
> 
> 时间：2012-11-14T01:18:16.940
> 
> 标签：linq, asp.net-mvc-3

我想知道如何将我的主键 int ID **myid**传递给使用**for 每个循环**的**.tolist方法**

 ****看法**

```
@foreach (var item in Model)

{

@Html.ActionLink("View", "detail", new { id = item.myid})

@Html.ActionLink("Add Pictures", "pictures")

} 
```

**.tolist 控制器**

```
[Authorize]

public ActionResult mylist(list listings)
    {

var showlist = (from s in db.list where getid == s.RegistrationID select s).ToList();

        return View(showlist.ToList());

} 
```

正如您从上面看到的那样，我确实在**mylist上有****[authorize]**符号，这是 foreach 语句已打开，因此人们已经登录。我的问题是我可以将 int **myid**放在**@Html.ActionLink("Add Pictures", "pictures") 中**吗？我不想在浏览器中拥有它，因为那时用户可以轻松输入不同的数字并查看其他人的图片。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:20:44.780

您不能通过检查他们的用户 ID 是否与图片的所有者 ID 匹配来防止人们查看其他人的图片吗？

您必须将 id 传递给用户，您无法避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:26:16.770

这不是你停止这种“黑客行为”的地方。在您的控制器或其他地方，您检查当前经过身份验证的用户是否拥有该照片并将他重定向到显示“未找到图片”或类似内容的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:28:40.603

您应该在 url 中传递 id

```
@Html.ActionLink("Add Pictures", "pictures",new { @id=item.ID}) 
```

在您的图片操作方法中，您应该检查当前用户是否是已登录（**身份验证**）用户，并且他是否具有添加图片的适当权限（**授权**）。

```
public ActionResult pictures(int id)
{
  //TO DO  : Check the user has sufficient permission to add pictures. 
  // The implementation of this checking is completely up to you.
  // If not authorized redirect to a view to show the "Not authorized" message

} 
```********

# java - 如何实现可以返回不同PageObjects的WebDriver PageObject方法

> ID：13371699
> 
> 赞同：14
> 
> 时间：2012-11-14T01:19:37.337
> 
> 标签：java, selenium, webdriver, pageobjects

我刚刚开始使用[WebDriver](http://seleniumhq.org/docs/03_webdriver.html)，我正在尝试学习最佳实践，特别是使用[PageObjects](http://code.google.com/p/selenium/wiki/PageObjects)和[PageFactory](http://code.google.com/p/selenium/wiki/PageFactory)。

我的理解是PageObjects应该暴露网页上的各种操作，并将WebDriver代码与测试类隔离开来。很多时候，相同的操作可能会导致导航到不同的页面，具体取决于所使用的数据。

例如，在这个假设的登录场景中，提供管理员凭据会将您带到 AdminWelcome 页面，提供客户凭据会将您带到 CustomerWelcome 页面。

因此，实现这一点的最简单方法是公开两个返回不同 PageObjects 的方法......

## 登录页面对象

```
package example;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.FindBy;
import org.openqa.selenium.support.PageFactory;

public class Login {

    @FindBy(id = "username")
    private WebElement username;

    @FindBy(id = "password")
    private WebElement password;

    @FindBy(id = "submitButton")
    private WebElement submitButton;

    private WebDriver driver;

    public Login(WebDriver driver){
        this.driver = driver;
    }

    public AdminWelcome loginAsAdmin(String user, String pw){
        username.sendKeys(user);
        password.sendKeys(pw);
        submitButton.click();
        return PageFactory.initElements(driver, AdminWelcome.class);
    }

    public CustomerWelcome loginAsCustomer(String user, String pw){
        username.sendKeys(user);
        password.sendKeys(pw);
        submitButton.click();
        return PageFactory.initElements(driver, CustomerWelcome.class);
    }

} 
```

并在测试类中执行以下操作：

```
Login loginPage = PageFactory.initElements(driver, Login.class);
AdminWelcome adminWelcome = loginPage.loginAsAdmin("admin", "admin"); 
```

或者

```
Login loginPage = PageFactory.initElements(driver, Login.class);
CustomerWelcome customerWelcome = loginPage.loginAsCustomer("joe", "smith"); 
```

## 替代方法

`login()`我希望有一种更简洁的方法来公开返回相关 PageObject的单个方法，而不是重复代码。

我考虑过创建页面层次结构（或让它们实现一个接口），以便我可以将其用作返回类型，但感觉很笨拙。我想出的是以下内容：

```
public <T> T login(String user, String pw, Class<T> expectedPage){
    username.sendKeys(user);
    password.sendKeys(pw);
    submitButton.click();
    return PageFactory.initElements(driver, expectedPage);
} 
```

这意味着您可以在测试类中执行以下操作：

```
Login loginPage = PageFactory.initElements(driver, Login.class);
AdminWelcome adminWelcome = 
    loginPage.login("admin", "admin", AdminWelcome.class); 
```

或者

```
Login loginPage = PageFactory.initElements(driver, Login.class);
CustomerWelcome customerWelcome = 
    loginPage.login("joe", "smith", CustomerWelcome.class); 
```

这是灵活的 - 您可以添加一个 ExpiredPassword 页面而根本不必更改`login()`方法 - 只需添加另一个测试并传递适当的过期凭据和 ExpiredPassword 页面作为预期页面。

当然，您可以很容易地离开`loginAsAdmin()`and`loginAsCustomer()`方法并通过调用泛型替换它们的内容`login()`（然后将其设为私有）。一个新页面（例如 ExpiredPassword 页面）将需要另一种方法（例如`loginWithExpiredPassword()`）。

这样做的好处是方法名称实际上意味着什么（您可以很容易地看到有 3 种可能的登录结果），PageObject 的 API 更易于使用（没有“预期页面”要传入），但是 WebDriver代码仍在被重用。

**进一步改进...**

如果您确实公开了单个`login()`方法，则可以通过向这些页面添加标记界面来更清楚地显示可以通过登录访问哪些页面（如果您为每个场景公开一个方法，这可能不是必需的）。

```
public interface LoginResult {}

public class AdminWelcome implements LoginResult {...}

public class CustomerWelcome implements LoginResult {...} 
```

并将登录方法更新为：

```
public <T extends LoginResult> T login(String user, String pw, 
    Class<T> expectedPage){
    username.sendKeys(user);
    password.sendKeys(pw);
    submitButton.click();
    return PageFactory.initElements(driver, expectedPage);
} 
```

这两种方法似乎都行之有效，但我不确定它如何适应更复杂的场景。我还没有看到任何类似的代码示例，所以我想知道当页面上的操作会根据数据导致不同的结果时，其他人会怎么做？

或者只是复制 WebDriver 代码并为每个数据/页面对象的排列公开许多不同的方法是常见的做法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T04:36:26.620

波西米亚人的回答并不灵活——你不能有一个页面动作让你回到同一个页面（例如输入错误的密码），你也不能有超过 1 个页面动作导致不同的页面（想想如果你有什么乱七八糟的登录页面有另一个导致不同结果的操作）。您最终还会堆积更多的 PageObjects 来满足不同的结果。

在尝试了更多（包括失败的登录场景）之后，我确定了以下内容：

```
private <T> T login(String user, String pw, Class<T> expectedPage){
    username.sendKeys(user);
    password.sendKeys(pw);
    submitButton.click();
    return PageFactory.initElements(driver, expectedPage);
}

public AdminWelcome loginAsAdmin(String user, String pw){
    return login(user, pw, AdminWelcome.class);
}

public CustomerWelcome loginAsCustomer(String user, String pw){
    return login(user, pw, CustomerWelcome.class);
}

public Login loginWithBadCredentials(String user, String pw){
    return login(user, pw, Login.class);
} 
```

这意味着您可以重用登录逻辑，但防止测试类在预期页面中传递的需要，这意味着测试类非常可读：

```
Login login = PageFactory.initElements(driver, Login.class);
login = login.loginWithBadCredentials("bad", "credentials");
// TODO assert login failure message
CustomerWelcome customerWelcome = login.loginAsCustomer("joe", "smith");
// TODO do customer things 
```

为每个场景使用单独的方法也使`Login`PageObject 的 API 非常清晰 - 并且很容易告诉所有登录结果。我没有看到使用接口来限制与该`login()`方法一起使用的页面的任何价值。

我同意 Tom Anderson 的观点，即应将可重用的 WebDriver 代码重构为细粒度的方法。它们是细粒度地暴露（以便测试类可以选择相关操作），还是组合并作为单个粗粒度方法暴露给测试类可能是个人喜好问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T01:57:05.467

您正在使用多种类型污染您的 API - 只需使用泛型和继承：

```
public abstract class Login<T> {

    @FindBy(id = "username")
    private WebElement username;

    @FindBy(id = "password")
    private WebElement password;

    @FindBy(id = "submitButton")
    private WebElement submitButton;

    private WebDriver driver;

    private Class<T> clazz;

    protected Login(WebDriver driver, Class<T> clazz) {
        this.driver = driver;
        this.clazz = clazz
    }

    public T login(String user, String pw){
        username.sendKeys(user);
        password.sendKeys(pw);
        submitButton.click();
        return PageFactory.initElements(driver, clazz);
    }
} 
```

接着

```
public AdminLogin extends Login<AdminWelcome> {

   public AdminLogin(WebDriver driver) {
       super(driver, AdminWelcome.class);
   }
}

public CustomerLogin extends Login<CustomerWelcome> {

   public CustomerLogin(WebDriver driver) {
       super(driver, CustomerWelcome.class);
   }
} 
```

登录页面上的所有类型等

请注意通过将类的实例传递到构造函数中，能够将实例传递给方法的[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)的解决方法，这被称为“类型令牌”模式。`Class<T>``PageFactory.initElements()`

# jquery - 提交表单并用进度指示器替换提交按钮

> ID：13371700
> 
> 赞同：1
> 
> 时间：2012-11-14T01:19:47.137
> 
> 标签：jquery, forms, click, submit

因此，我们网站上有很多表格，很遗憾需要一段时间才能提交。

我想做的是编写一个通用脚本，在提交或单击提交按钮时将用加载指示器替换提交按钮，然后提交表单，遵循表单提交操作所做的任何重定向。

如果我使用 jQuery 替换表单提交上的按钮，它不会替换提交按钮，但仍会提交表单。决定在 .click() 上执行此操作，这会导致加载指示器替换提交按钮，但表单未提交。还尝试替换提交按钮，然后放置一个 setTimeout 并导致提交按钮的父级使用 jQuery submit() 函数提交，但均无济于事。

我也走上了 AJAX 提交之路等等，但每个都提出了它自己的问题。

目前我的代码是：

```
$("#content form :submit").click(function(data) {
    $(this).replaceWith('<img src="loader.gif" alt="submitting form" style="display:block; margin:0 auto">');
    var form = $(this).parent("form");
    setTimeout(function() {
        console.log(form);
        form.submit();
    },1000);    
}); 
```

我知道这个当前的代码是错误的，但我经历了很多不同的解决方案，得到了 90%，以至于我有点失去了它。关于如何做到这一点的任何建议？

编辑：对不起，当我第一次提交时，我认为这不够明显。提交时，至少 Safari 上的 DOM 不再更新。尽管动作发生了，但 DOM 并没有改变并且提交发生了。结果是表单像往常一样提交，并且没有发生加载 gif。我认为将实际的表单提交延迟到 DOM 更新之前会修复它，但它似乎没有提交（1000 很长，但希望先让事情正常工作）。此外，如果我将侦听器放在提交而不是单击并尝试在其中调用 submit() 它将导致无限循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:25:20.367

您需要将处理程序绑定到表单的`submit`事件，而不是`click`提交按钮上的事件：

```
$("#content form").submit(function(e) {
    var $this = $(this);
    $('<img />', {
        'src': 'loader.gif',
        'alt': 'submitting form',
        'class': 'loading',
        'style': 'display: block; margin: 0 auto;' // Use a class instead
    }).appendTo(this);

    $this.find(':submit').hide();

    e.preventDefault();

    $.ajax({
        type: $this.attr('method') || 'get',
        url: $this.attr('action') || window.location,
        data: $this.serialize(),
        success: function(response) {
            $(this).find('.loading').remove();
            $(this).find(':submit').show();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T01:36:10.437

您可以隐藏提交输入而不是删除它。在我看来，这比使用超时和类似的东西要干净得多。

```
​$('form').on('submit', function(e){
    var submitButton = $(this).find('input[type=submit]');
    $(this).append('<span>submitting...</span>');//Replace with whatever you want
    submitButton.css('display', 'none');
});​​​​​ 
```

[http://jsfiddle.net/g7GgU/](http://jsfiddle.net/g7GgU/)

# vb.net - 需要 vb.net 拆分帮助

> ID：13371704
> 
> 赞同：0
> 
> 时间：2012-11-14T01:20:23.227
> 
> 标签：vb.net

我目前正试图从 html Web 源中获取头像，问题是存在多个具有相同名称的 img 源和容器，这是我需要的当前部分

```
</div>

<div class="content no_margin">

    <img src="http://www.gravatar.com/avatar/4787d9302360d807f3e6f94125f7754c?&d=mm&r=g&s=250" /><br />
    <br />
    <a class="link" href="http://sharefa.st/user/donkey">Uploads</a><br />
    <a class="link" href="http://sharefa.st/user/donkey/favorites">Favorites</a><br />

</div>
        </div>       

        <div id="content" class="left">
            <div class="header">

    Uploads

</div>

<div class="content no_margin">

        <div class="profile_box">

        <div class="profile_info"> 
```

现在我需要抓住的部分是：

```
 <img src="http://www.gravatar.com/avatar/4787d9302360d807f3e6f94125f7754c?&d=mm&r=g&s=250" /><br /> 
```

这张图片，任何帮助和ID将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:51:11.840

尝试：

```
 Dim wb As New WebBrowser
    wb.Navigate("")
    Do While wb.ReadyState <> WebBrowserReadyState.Complete
        Application.DoEvents()

    Loop
    wb.DocumentText = HtmlString 'Your Html
    For Each img As HtmlElement In wb.Document.GetElementsByTagName("img")
        If InStr(img.GetAttribute("src"), "avatar") Then
            MsgBox(img.GetAttribute("src"))
        End If
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:24:21.273

您似乎正在尝试“手动”解析 HTML。请不要。

[http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

请参阅此问题以获取一些替代方法[How do you parse an HTML in vb.net](https://stackoverflow.com/questions/516811/how-do-you-parse-an-html-in-vb-net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:33:13.377

使用正则表达式查找您要查找的内容：http: [//msdn.microsoft.com/en-us/library/twcw2f1c.aspx](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)

示例代码几乎演示了您的场景。

# c# - 在 C# 中播放声音 (WMA) 文件的一部分

> ID：13371717
> 
> 赞同：1
> 
> 时间：2012-11-14T01:22:16.883
> 
> 标签：c#, windows, audio, wma

我有一个 WMA 文件，其中包含许多不同的音频片段。有什么办法可以播放声音流的一部分吗？

就像是：

```
public static void Play(Stream soundStream, long start, long end); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:23:35.823

您可以使用[NAudio](https://naudio.codeplex.com/)来做到这一点，它是 .Net 的音频库。

使用[此处](https://naudio.codeplex.com/wikipage?title=MP3)的示例，我能够抛出一个快速测试应用程序来尝试它。使用 WaveSteam.Skip(int seconds) 方法，您可以从文件中的特定位置开始。不过，我还没有弄清楚如何获得最终位置。以下是在 30 秒标记处启动 wma 文件的修改示例：

```
 IWavePlayer waveOutDevice = new WaveOut();
    WaveStream mainOutputStream;
    WaveChannel32 volumeStream;

    WaveStream wmaReader = new WMAFileReader(@"F:\My Music\The Prodigy\Music for the Jilted Generation\01 Intro.wma");
    volumeStream = new WaveChannel32(wmaReader);

    mainOutputStream = volumeStream;

    mainOutputStream.Skip(30); //start 30 seconds into the file
    waveOutDevice.Init(mainOutputStream);
    waveOutDevice.Play(); 
```

上面的示例省略了清理代码以停止播放并处理流。希望那些对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:41:35.580

不是你想要的方式，不。

我假设这是在 WinForms 或 WPF 上下文中。解决方案是在项目中托管 WMP ActiveX 控件，然后将 WMA 文件加载到其中并设置 Position/Seek 属性，然后播放一段时间并在 Timer 到达某个点时停止它。我不相信 WMP ActiveX 控件有计时器事件，因此您需要在另一个线程上观看它并在到达时停止播放。

这是一个黑客，但应该工作。如果您熟悉在 .NET 应用程序中托管 ActiveX 控件，您应该能够在几个小时内获得“有效”的东西。请注意，由于与 64 位 WMP ActiveX 控件的兼容性问题，您需要将应用程序设置为仅 x86。

更难的替代方法是在您的应用程序中使用 DirectShow，并为 WMA 文件创建一个渲染图，然后自己进行操作、搜索和播放。DS 有一个非常陡峭的学习曲线，如果您以前从未使用过 COM，那么预计这将花费您至少几天甚至几周的时间。

# python - 在 python 中使用搜索添加到元组中的列表

> ID：13371718
> 
> 赞同：0
> 
> 时间：2012-11-14T01:22:23.303
> 
> 标签：python, string, list, search, add

我有一个类（**cls**），它有 2 个主要字符串（**str1**，**str2**）和一个字符串列表（**strlist**）

python将strlist变成一个元组，所以当我想附加到它时我使用

```
tmp=list(strlist)
tmp.append(addToList)
self.list=tmp 
```

可能不是最好的选择，但它是我唯一能在对 python 了解不多的情况下做出的选择

现在我让事情变得更复杂我有 cls 列表（**clslist**），我想向 strlist 添加另一个字符串，其中 str1 = A && str2 = B

如何创建将在 clslist 中搜索匹配项的搜索，如果找到会将新字符串添加到 strlist

**编辑 1**

```
class cls ():
    def __init__ (self,str1,str2,strlist):
        self.str1 = str1
        self.str2 = str2 
        self.strlist = strlist 
```

和主要

```
def main():
    clslist =[]
    clslist.append(cls ("aaa","bbb",("123","456")) 
```

我想在 clslist 中找到 str1 = aaa 和 str2 = bbb 的 cls，然后将另一个字符串添加到 str 列表

所以我最终会变成这样 ("aaa","bbb",("123","456","789"))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:30:55.230

Python 不会让 strlist 成为元组，而是传入一个元组。如果你想要一个列表，只需使用`[]`而不是`()`

```
clslist.append(cls("aaa", "bbb", ["123","456"]) 
```

搜索您的 clslist 很容易

```
for item in clslist:
    if item.str1 == A and item.str2 == B:
        # do something
        item.strlist.append(otherstring) 
```

如果你*确实*需要扩展一个元组，你可以这样做

```
>>> ("foo", "bar")+("baz",)
('foo', 'bar', 'baz') 
```

均值`,`之前是一个元组，您可以添加元组。与 不同，这将创建一个新元组，因此效率不如将所有旧引用复制到新元组中。`)``("baz",)``list.append`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:31:23.703

由于 clslist 未排序，因此您的搜索需要是线性的。

例如：

```
for i in clslist:
    if i.str1 == A and i.str2 == B:
        i.strlist.append(whatever) 
```

# java - 如何在带有变量的 JLabel 中添加新行

> ID：13371721
> 
> 赞同：7
> 
> 时间：2012-11-14T01:23:10.833
> 
> 标签：java, html, swing, jlabel

我知道您可以使用新行创建一个新行，`<html> <br> </html>`但是当我将变量（是字符串类型）添加到标签的文本时，此命令不再起作用。

`label.setText("blahblahblah" + variable + "<html><br>blahblahblah</html>");`

我需要它输出：

啦啦啦啦啦啦
啦啦

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T01:25:42.097

您需要将`<html>`标签作为字符串中的第一件事：

```
label.setText("<html>blahblahblah" + variable + "<br>blahblahblah</html>"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T01:25:43.797

它应该是：

```
label.setText("<html>blahblahblah" + variable + "<br>blahblahblah</html>"); 
```

# actionscript-3 - 动态主体不响应 .ApplyForce

> ID：13371723
> 
> 赞同：1
> 
> 时间：2012-11-14T01:23:27.193
> 
> 标签：actionscript-3, flash, box2d

我有一个动态主体，在我的更新循环中，当我使用 SetLinearVelocity 时，我可以移动它，但是当我使用 ApplyForce 时，主体根本不会移动。关于对 b2DynamicBody 施加力，我有什么遗漏吗？

```
var force:b2Vec2 = new b2Vec2();

if (keyIsDown(Keys.S)) force.y = 6;
if (keyIsDown(Keys.A)) force.x = -6;
if (keyIsDown(Keys.D)) force.x = 6;

_body.SetAwake(true);
if (force.x != 0 || force.y != 0)
    _body.ApplyForce(force, _body.GetPosition()); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:23:01.927

此代码在您的更新功能中吗？你确定 force 设置为 6 吗？

我还要确保力足够大以移动物体。也许将它增加到 60 或 600，看看它是否有所作为。如果摩擦力很高，小力不会移动物体。

# c++ - 在当前机器上使用主机名

> ID：13371729
> 
> 赞同：1
> 
> 时间：2012-11-14T01:24:22.050
> 
> 标签：c++, c, hosts

我正在使用套接字进行连接，客户端需要服务器的主机名。我在同一台机器上运行它并且我的主机名有效。问题是我的主机名真的很长，我不想把所有的时间都花在打字上。所以，我所做的是我 sudo su'd and did

```
hostname brandon 
```

然后我输入

```
hostname 
```

它显示“布兰登”

然后我以brandon作为主机名运行程序，它说它无法解析主机。有什么帮助吗？我什至在 /etc/hostname 中编辑了我的主机名文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:27:34.093

它`/etc/hosts`不是`/etc/hostname`

您可以在 /etc/hosts 文件中添加一行来解析主机名查找

```
xxx.xxx.xx.xxx      brandon 
```

替换`xxx.xxx.xx.xxx`为真实IP地址

# php - php 对象：属性对象与 stdClass 对象 - 哪个更好？

> ID：13371730
> 
> 赞同：3
> 
> 时间：2012-11-14T01:24:30.187
> 
> 标签：php, properties, std

有时我使用`__get`or`stdClass`将**数组转换为 object**。但我不能决定我应该坚持下去。我想知道哪个更好更快，有什么想法吗？

```
class property 
{

    public function __get($name)
    {
        return (isset($this->$name)) ? $this->$name : null;
    }
}

$object = new property();
$object = new stdClass(); 
```

所以如果我使用`new property()`，我将有一个**属性对象**输出，

```
property Object
(
....
) 
```

而如果我使用`new stdClass()`，我将有一个**stdClass 对象**输出，

```
stdClass Object
(
....
) 
```

所以我可以像这样得到对象数据`$item->title`。

**编辑：**

我如何进行实际的数组到对象的转换。

```
public function array_to_object($array = array(), $property_overloading = false)
    {

        # If $array is not an array, let's make it array with one value of former $array.
        if (!is_array($array)) return $array;

        # Use property overloading to handle inaccessible properties, if overloading is set to be true.
        # Else use std object.
        if($property_overloading === true) $object = new property();
            else $object = new stdClass();

        foreach($array as $key => $value)
        {
            $key = (string) $key ;
            $object->$key = is_array($value) ? self::array_to_object($value, $property_overloading) : $value;
        }

        return $object;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:28:12.503

首先，像您这样的（几乎）空类定义几乎就像 an`stdClass`所以使用任何一个都不会出现任何重大问题。

也就是说，您的“命名”类所具有的一个优势`stdClass`是，您可以通过利用`__get`魔术方法来定义访问不存在的属性时会发生什么。

```
class property
{
   public function __get($name)
   {
       return null;
   }
} 
```

以上是对原始`property`类的更简单重写；当`__get()`被调用时，你已经知道`$this->$name`没有设置。尽管这不会引起通知，但当您尝试引用不存在的`$obj->bla->bla`位置时，它并不能防止致命错误。`$obj->bla`

在访问不存在的属性时抛出异常可能更有用：

```
class property
{
   public function __get($name)
   {
       throw new Exception("Property $name is not defined");
   }
} 
```

这允许您的代码在异常变成完全停止脚本的致命运行时错误之前捕获异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:27:24.353

如果您只是将“属性”类用作哑数据容器，请使用 stdClass 甚至数组。

# android - 输入字符串为空 Base64 解码

> ID：13371741
> 
> 赞同：1
> 
> 时间：2012-11-14T01:26:01.873
> 
> 标签：android, nullpointerexception, base64, sharedpreferences, encryption-symmetric

我使用 Base64 加密了 sharedpreferences 中的字符串，但我的解码错误。我是加密新手，无法确定 logcat 错误。

日志猫：

```
 11-12 03:57:06.593: W/System.err(20229): java.lang.NullPointerException: Input string was null.
  11-12 03:57:06.603: W/System.err(20229):  at com.SharedPreferences.Login.Base64.decode(Base64.java:1243)
  11-12 03:57:06.603: W/System.err(20229):  at com.SharedPreferences.Login.Base64.decode(Base64.java:1224)
  11-12 03:57:06.603: W/System.err(20229):  at com.SharedPreferences.Login.AccessApp.decrypt(AccessApp.java:137)
  11-12 03:57:06.603: W/System.err(20229):  at com.SharedPreferences.Login.AccessApp.onClick(AccessApp.java:55)
  11-12 03:57:06.603: W/System.err(20229):  at android.view.View.performClick(View.java:3511)
  11-12 03:57:06.613: W/System.err(20229):  at android.view.View$PerformClick.run(View.java:14105)
  11-12 03:57:06.635: W/System.err(20229):  at android.os.Handler.handleCallback(Handler.java:605)
  11-12 03:57:06.643: W/System.err(20229):  at android.os.Handler.dispatchMessage(Handler.java:92)
  11-12 03:57:06.669: W/System.err(20229):  at android.os.Looper.loop(Looper.java:137)
  11-12 03:57:06.673: W/System.err(20229):  at android.app.ActivityThread.main(ActivityThread.java:4424)
  11-12 03:57:06.673: W/System.err(20229):  at java.lang.reflect.Method.invokeNative(Native Method)
  11-12 03:57:06.673: W/System.err(20229):  at java.lang.reflect.Method.invoke(Method.java:511)
  11-12 03:57:06.695: W/System.err(20229):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  11-12 03:57:06.695: W/System.err(20229):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  11-12 03:57:06.695: W/System.err(20229):  at dalvik.system.NativeStart.main(Native Method) 
```

类检索保存字符串和解密：

```
public void onClick(View arg0) {

    sp=this.getSharedPreferences("AccessApp", MODE_WORLD_READABLE); 

    byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5 };

    try {
         String decryptedUser = decrypt(user, key);  
         user = sp.getString("USERNAME_KEY", decryptedUser);
    }
 catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}   
try {
         String decryptedPass = decrypt(pass, key);  
         pass = sp.getString("PASSWORD_KEY", decryptedPass);

} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

   if(lBttn.equals(arg0)){

      if((uname.getText().toString().equals(user))&& 
        (pword.getText().toString().equals(pass)))

            {
          Toast.makeText(this, "You are Logged In", 20000).show();

               Intent intent;
               intent=new Intent(this,details.class);
               startActivity(intent);
              flag=1;
            }

        else 
           {
            Toast.makeText(this, "Wrong Username or Password",20000).show();
            flag=0;   
           }       
        } 
        else if(cBttn==arg0){
            AlertDialog.Builder builder=new AlertDialog.Builder(this);
          builder.setTitle("Exit");
         builder.setMessage("Do you want to exit");
    builder.setCancelable(false);
    builder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {

   public void onClick(DialogInterface dialog, int which) {
   // TODO Auto-generated method stub
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent);

  finish();
   }
  });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
               arg0.cancel();
            }
        });
    AlertDialog alert=builder.create();
    alert.show();

        }

    }
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
 if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {

     Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
     finish();
 }
 return super.onKeyDown(keyCode, event);
 }

public static String decrypt(String encryptedText, byte[ ] key) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] toDecrypt = Base64.decode(encryptedText);
    byte[] encrypted = cipher.doFinal(toDecrypt);
    return new String(encrypted);
 }
 } 
```

声明：

```
public class AccessApp extends Activity implements OnClickListener {
private SharedPreferences sp;
String user,pass;
Button lBttn,cBttn;
EditText uname,pword;
Intent i;
int flag=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{ 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lBttn=(Button)findViewById(R.id.login_button);
    cBttn=(Button)findViewById(R.id.cancel_button);
    uname=(EditText)findViewById(R.id.username);
    pword=(EditText)findViewById(R.id.password);

    lBttn.setOnClickListener(this);
    cBttn.setOnClickListener(this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:35:19.050

对不起。我正在改变我的答案。我之前说的完全错了。
您收到错误的原因

`java.lang.NullPointerException: Input string was null.`

是因为你已经声明

```
String user; 
```

你还没有初始化它，你正在调用

```
String decryptedUser = decrypt(user, key); 
```

现在函数中的`decrypt`用户为空。

# vb.net - 如何检查列表框选定项中的某些特定单词？

> ID：13371746
> 
> 赞同：4
> 
> 时间：2012-11-14T01:26:28.770
> 
> 标签：vb.net

我试过了：

1.  如果 ListBox1.Items.Contains("myword") 那么
2.  如果 ListBox1.SelectedIndex = ListBox1.Items.IndexOf("myword") 那么
3.  If ListBox1.SelectedItems.Item("myword") Then

但没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:32:15.987

尝试这样的事情，[listbox.items](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)属性是[ListBox.ObjectCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.aspx)：

```
For Each i As Object In ListBox1.SelectedItems
    If CStr(i).Contains("myword") Then
        BackColor = Color.Blue ' Do your logic here, I just used setting the BackColor for a test
    End If
Next 
```

# hadoop - MapReduce - 二级排序

> ID：13371748
> 
> 赞同：1
> 
> 时间：2012-11-14T01:27:06.767
> 
> 标签：hadoop, mapreduce

我想按降序对减速器输出进行排序，以下是我的映射器/减速器输出？

映射器输出：文本，IntWritable

减速器输出：IntWritable、Text

# expressionengine - 需要将 Expresso Store 中的修饰符值设置为 0

> ID：13371752
> 
> 赞同：3
> 
> 时间：2012-11-14T01:27:28.120
> 
> 标签：expressionengine, expresso-store

我设置了女性服装尺码的修饰符，并试图将尺码添加为零。但是，当我输入“0”时，商店认为该行是空的并且没有捕获它。你能添加对“0”的支持吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:06:03.967

您能否在商店中将其设置为零，然后在模板中运行一个简单的条件来检查“零”并将该值替换为 0（数字）？

# python - 使用 Google App Engine 让 SQL Alchemy 发挥出色

> ID：13371754
> 
> 赞同：4
> 
> 时间：2012-11-14T01:27:42.417
> 
> 标签：python, google-app-engine, sqlalchemy

我目前正在开发一个 Google App Engine (Python) 项目，该项目主要使用 Google Cloud SQL（使用 SQL Alchemy）进行后端数据存储。

大多数时候，一切都运行良好。但是，有时“某事”会出问题，我们开始遇到奇怪的异常。例如：

*   AttributeError：“ColumnProperty”对象没有“策略”属性

*   AttributeError：“RelationshipProperty”对象没有属性“strategy”

我们**认为**这可能与新 GAE 实例的启动有关，但我们不能确定。

说了这么多，我的问题是这个。我和我的团队可以使用哪些策略来追踪此问题？

请记住，该应用程序正在 Google App Engine 上运行，因此可能会稍微限制我们的选择。

**更新：**欧文尼尔森下面的评论是正确的。我们已`threading.RLock`按照 Google 的建议添加。然而，我们仍然会看到这个问题，但频率要低得多。

我想明确一点，到目前为止，我们无法在本地环境中重现此问题。我们很确定这与动态实例旋转有关，这不是我们在开发中真正可以做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:38:09.730

据我了解，您的应用程序仅在生产模式下存在问题。

**尝试在开发模式下重现该错误**

最好的解决方案是能够在开发模式下重现该错误。为此，您可以尝试使用大量数据运行一批单元测试。（查看[如何在 appengine 上进行本地测试](https://developers.google.com/appengine/docs/python/tools/localunittesting?hl=fr)）。

如果这不起作用...

**打开 appstats 以获取有关处理程序的更多信息**

您可以打开 appstats 以尝试获取有关当前导致问题的处理程序的信息。[Appstats](https://developers.google.com/appengine/docs/python/tools/appstats?hl=en)通常会为您提供有关数据存储的信息，这与我们的案例无关，但您可以从一般请求中获取信息（例如响应时间）

**识别处理程序并将其包装在漂亮的 try catch 中**

一旦您确定了问题的根源或问题的来源，您可以用 try..catch. 将其包围。这样您可以获得有关当前执行 Trace 的更多信息，并有望解决您的问题

# c++ - Win32 应用程序调用 C 代码

> ID：13371757
> 
> 赞同：-3
> 
> 时间：2012-11-14T01:28:03.260
> 
> 标签：c++, c, winapi, user-interface

对于我的工程项目，我们正在编程机器人，我们的团队决定在 Win32 中编写一个 gui 来指导机器人如何移动、旋转等。到目前为止，我还没有在网上找到任何关于如何封装代码和调用函数的信息使用按钮和其他输入。任何人都知道一个好的指南或如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:43:59.410

看看 Qt。

这将允许您轻松创建 gui，轻松地将单击/鼠标/任何事件连接到底层 api 调用。还允许您轻松地对应用程序进行多线程处理，这样您对底层机器人 api 的调用就不会锁定您的前端......所有这些都在一个非常易于使用和适应性强的框架内。

恕我直言，从win32开始只是要求更多的痛苦而不是它的价值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:37:38.587

如果你真的想用原始的 C/Win32 API 编程，我会得到一份[Petzold](https://rads.stackoverflow.com/amzn/click/com/157231995X)的副本。购买二手副本；）

如果您想编写更现代的东西，我会考虑使用 C# 和 .Net。

恕我直言...

PS：

您可能还希望考虑 Linux。Linux 可以*很*容易地接近硬件，并且您在两种语言（C、C++、Python、Java 等）和 UI（SDL、Qt、GTK+ 等）中都有很多选择

# c++ - C++ 字符串.data() 函数

> ID：13371759
> 
> 赞同：-4
> 
> 时间：2012-11-14T01:28:23.877
> 
> 标签：c++, string

我试图理解这段使 operator 过载的代码`>>`。我想我不明白的是为什么不拥有 `is.open(fileName);`而不是`is.open(fileName.data());`. 或者`fileName.data()`.

```
ifstream& operator>> (ifstream& is, TheMatrix& myMatrix)
{
string fileName;
cout << "Enter a file name -> ";
cin >> fileName;
is.open(fileName.data());
for (int i=0; i< 5; i++)
    for (int j=0; j<5; j++)
        is >> myMatrix.M[i][j];
return is;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:30:16.000

我想比在这里询问**之前**在谷歌上**搜索**它会更好。

 **> 获取字符串数据 返回一个指向与字符串内容相同的字符数组的指针。
> 
> 请注意，没有附加终止空字符（有关此类功能，请参见成员 c_str）。
> 
> 返回的数组指向不应在程序中直接修改的内部位置。它的内容保证仅在下一次调用字符串对象的非常量成员函数之前保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:56:30.283

> 为什么没有 is.open(fileName);

使用标准库的现代实现，您可以而且应该做到这一点。（尽管您真的不应该接受用户输入并在输入运算符中打开文件；重载`operator>>()`更通用`istream`而不是`ifstream`.）

在标准库的旧版本中，`ifstream::open(filename)`将 C 风格的字符串（指向以零结尾的`char`数组的指针）作为参数，而不是 C++ 风格的`std::string`。因此，要使用 C++ 字符串，您需要将其转换为 C 字符串：`filename.c_str()`.

使用`data()`而不是`c_str()`错误的。它不一定给出正确终止的字符串，如果没有，如果您尝试将其视为一个，您将获得未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:33:16.077

它返回完整的字符串数据，包括任何嵌入的 0。`filename.c_str()`将只返回直到任何终止 0 的字符串。

顺便说一句，代码片段不会编译，因为变量有不同的大小写。**

# java - 从命令行运行 AppEngine

> ID：13371762
> 
> 赞同：3
> 
> 时间：2012-11-14T01:29:37.850
> 
> 标签：java, google-app-engine

如何从命令行运行 AppEngine。假设我想在上面运行它，`http://localhost:8889`并且我想`C:/workspace/myapp/src/main/webapp`作为部署在上面的应用程序运行。

我的意思是我想独立运行它，而不是使用 Eclipse Google 插件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T03:02:44.033

在 Windows 上本地运行：

```
appengine-java-sdk\bin\dev_appserver.cmd --port=8889 C:\workspace\myapp\war 
```

这假定`myapp`包含一个`war`目录。如果不是这种情况，请将路径修改`war`为您要运行的项目所在目录的任何位置。

# php - 在 SQL 上分组项目

> ID：13371763
> 
> 赞同：1
> 
> 时间：2012-11-14T01:29:54.470
> 
> 标签：php, mysql, sql

有人可以帮我弄这个吗：

我有一个 mySQL 数据库，我想在项目中进行简单的搜索，这是我的数据库的示例，名为“ **orders** ”

```
id  OrderDate   OrderPrice  Customer
1   2008/11/12  1000        Hansen
2   2008/10/23  1600        Nilsen
3   2008/09/02  700         Hansen
4   2008/09/03  300         Hansen
5   2008/08/30  2000        Jensen
6   2008/10/04  100         Nilsen 
```

如何按重复数据分组并显示如下：

```
<select name="costumer">
    <option>Hansen</option>
    <option>Nilsen</option>
    <option>Jensen</option>
</select> 
```

我知道这是 GROUP BY 命令，但不知道如何在 PHP 脚本文件上显示它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:31:13.057

您可以使用`DISTINCT`它，因为您只需要`1`列，

```
SELECT DISTINCT  Customer FROM `Orders` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T01:34:56.757

试试这个：

```
 $dbconn = new mysqli();
       $dbconn->connect("localhost","root","","test");

       if($dbconn->connect_errno ){
         echo "Connection Failed";
       }

       $query = "SELECT DISTINCT  Customer FROM `Orders`";

       $result = $dbconn->query($query);
       echo "<select name=\"costumer\">";
       while($row = $result->fetch_array())
       {
            echo "<option>".$row["Customer"]."</option>";
       }

      echo "</select>"; 
```

# css - 防止 div 元素在流体导航中换行

> ID：13371764
> 
> 赞同：0
> 
> 时间：2012-11-14T01:30:11.287
> 
> 标签：css, uinavigationbar

*   我有一个跨越页面的顶部导航
*   在那个顶部导航中，我有各种元素
    *   两个必须左对齐
    *   一个必须正确对齐的
*   导航是流动的，元素是固定宽度的
*   当浏览器窗口最小化时不希望元素换行
*   由于中国观众较多，需要在 IE6 上工作。

请参阅此处的示例：http: [//jsfiddle.net/4SUwg/](http://jsfiddle.net/4SUwg/)

```
<div id="header">
  <div id="headerContent">
    <div class="search-list"> Search List </div>
    <div class="social-buttons"> Social </div>
    <div class="signin"> Login Drop Down </div>
  </div>
</div> 
```

我希望导航中的 div 元素不换行。我在堆栈上四处搜索，可以找到接近但没有完全解决问题的答案。我需要让 div 元素右对齐使事情变得复杂。必须适用于所有浏览器，尤其是 IE。

提前感谢大家的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:34:30.153

使用 SPAN .. 它是 INLINE 而不是 BLOCK ？

```
<div id="header">
  <div id="headerContent">
     <span class="search-list"> Search List </span>
     <span class="social-buttons"> Social </span>
     <span class="signin"> Login Drop Down </span>
  </div>
</div> 
```

还有你的 CSS，删除浮动

```
<style>
body {
margin:0;
padding:0;
}

#header {
background: #404040;
height: 35px;
color: white;
margin: 0 0 12px 0;
overflow-x:auto; overflow-y:hidden;
}

#headerContent {
height: 32px;
border:1px dashed #fff;
}

.search-list {
width:150px;

background:#039;
}

.social-buttons {
width:150px;

background:#060;
}

.signin {
width:200px;

background:#F00;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:41:37.237

你想要一个流畅的布局，但流畅的布局最重要的规则不是设置元素的确定宽度，而是你已经设置了宽度。

CSS有一个`<style>`标签，这不是必需的，可能你放错了。

我在 headerContent 中以百分比值设置了 div 的宽度。CSS是

```
body {
margin:0;
padding:0;
}

#header {
background: #404040;
height: 35px;
color: white;
margin: 0 0 12px 0;
overflow-x:auto; overflow-y:hidden; 
}

#headerContent {
height: 32px;
border:1px dashed #fff;
}

.search-list { 
width:28%; 
float:left;
background:#039;
}

.social-buttons { 
width:28%; 
float:left;
background:#060;
}

.signin { 
width:28%; 
float:right;
background:#F00; 
} 
```

刚刚更改了宽度值，在我的浏览器上它看起来很好，比以前的版本更好。这是一个小提琴[http://jsfiddle.net/DeepakKamat/s52Hn/8/](http://jsfiddle.net/DeepakKamat/s52Hn/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:49:53.080

我找到了一个适用于所有浏览器的解决方案，特别是 IE6，因为这是该项目的要求。如果你有更好的东西可以完成同样的事情，请发布！我衷心感谢所有回答/帮助的人。

```
<div id="header2">
    <table id="headerContent2">
        <tr>
            <td id="left" valign="top">
                <div id="leftWrapper">
                <div class="search-list2">Search List</div>
                <div class="social-buttons2">Social Buttons</div>
                </div>
            </td>
            <td id="middle">&nbsp;</td>
            <td id="right" valign="top">
                <div class="signin2">Login Drop Down</div>
            </td>
        </tr>
    </table>
</div>

<style>
#header2 {
background: #404040;
height: 35px;
color: white;
margin: 0 0 12px 0;
}

#headerContent2 {
width:100%;
}

#headerContent2 td {
height: 32px;
padding:0;
margin:0;
}

.search-list2 { 
width:150px; 
float:left;
background:#039;
}

.social-buttons2 { 
width:200px; 
float:left;
background:#060;
}

.signin2 { 
background:#F00;
float:right;
width:400px;
}

#leftWrapper {
width:400px;    
}

#middle {
width:100%;
}
</style> 
```

请参阅此处工作的演示。复制代码并在所有 IE 中试用，因为 JSfiddle 不适用于所有 IE。 [http://jsfiddle.net/GtXKE/](http://jsfiddle.net/GtXKE/)

# jquery - 如何找到父母的上一个兄弟姐妹

> ID：13371765
> 
> 赞同：2
> 
> 时间：2012-11-14T01:30:14.097
> 
> 标签：jquery, traversal

好的，我知道这应该很简单。我有一个`<dl>`包含数据定义和数据标签的定义列表 ( )。我在其中一个数据定义中有输入，因此用户可以定义定义。

然后我试图获取该定义的标签名称。在[演示](http://jsfiddle.net/M6WJp/)中，警报应提示“cycle_3”。

```
var myErrors = $('.myTest').prev('dt').text();
console.log(myErrors);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<dl>
  <dt> cycle_1:</dt>
  <dd> test </dd>
  <dt> cycle_2: </dt>
  <dd> test </dd>
  <dt> cycle_3: </dt>
  <dd>
    <input class="myTest" value="test" />
  </dd>
</dl>
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T01:35:07.747

```
$('.myTest').parent().prev('dt').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:40:23.667

采用**[`.closest()`](http://api.jquery.com/closest/)**

```
$('.myTest').closest('dd').prev('dt').text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-12T21:18:07.030

虽然我来这个问题的时间非常晚，但值得指出的是，原生 JavaScript 完全有能力实现这一要求：

```
// here we retrieve the first element in the document which matches the
// selector passed to the document.querySelector() method (this method
// will return either the first matching element-node, or null if no
// element is found):
const input = document.querySelector('input'),

// here we navigate through the DOM from the <input> element found
// previously; we navigate to the first element (if any exists) that
// matches the selector passed to the Element.closest() method, and
// then from that <dd> element to its previous element-sibling,
// using the Node.previousElementSibling property:
      inputPreviousDT = input.closest('dd').previousElementSibling;

// here we use a template literal to interpolate the JavaScript expression
// - wrapped in the '${...}' block - into the string itself, to show the
// text-content of that element:
console.log(`The previous <dt> contains the text of: "${inputPreviousDT.textContent}"`);

// here we access the element-node, and use the classList API to
// add an orange background to further - visually - demonstrate
// that the correct <dd> element was found:
inputPreviousDT.classList.add('highlight');
```

```
*, ::before, ::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-size: 1rem;
  font-weight: 400;
}

dl {
  display: grid;
  gap: 0.5em;
  grid-template-columns: min-content 1fr;
}

dt {
  font-weight: 600;
  grid-column: 1;
  grid-row: auto;
}

dd {
  grid-column: 2;
  grid-row: auto;
}

.highlight {
  background-color: #f806;
}
```

```
<dl>
  <dt>cycle_1:</dt>
  <dd>test </dd>
  <dt>cycle_2: </dt>
  <dd>test </dd>
  <dt>cycle_3: </dt>
  <dd>
    <input class="myTest" value="test" />
  </dd>
</dl>
```

[JS 小提琴演示](https://jsfiddle.net/davidThomas/t1upeham/1/)。

参考：

*   [`document.querySelector()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector).
*   [`Element.closest()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/closest).
*   [`Node.previousElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Element/previousElementSibling).
*   [`Node.textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent).
*   [模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)。

# fortran - 哪些 Fortran 77 格式说明符永远不会用于输入？

> ID：13371768
> 
> 赞同：0
> 
> 时间：2012-11-14T01:30:29.603
> 
> 标签：fortran, fortran77

仍在为 C# 制作 fortran I/O。我有限的 fortran 经验并没有真正帮助，所以我再次需要专家的一些建议。

我现在只关心 Fortran 77 和数据输入。稍后我将处理数据输出。

[从这个](http://www.nsc.liu.se/~boein/f77to90/a2.html#section8)fortran 编辑描述符列表中，到目前为止，我已经编码了 I、F、E、D、G、L、A、''、Tn、TL、TR 和 X 用于数据输入。还是需要照顾BN和BZ...

我想知道其余的符号 $、:、/、Sp、SS 和 S 是否真的出现在数据输入的格式字符串中？我可以想象 / 可能如果要提前终止读取数据线，但我看不出另一个有什么用处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:52:29.343

`$`不是有效的 Fortran 77 描述符。它用于扩展。

`:`在没有其他列表项的情况下终止格式处理。在某些极端情况下，输入跟随的格式规范无效，这可能会有所不同，但无论如何这可能都是无效的。

`/`当然意义重大。

“ `SP`,`SS`和`S`编辑描述符在执行输入语句期间无效。” (F77 13.5.6 p3)

（无论如何，撇号描述符（字符文字）在输入格式规范中无效。我`P`在您的列表中没有看到。当需要输出和 Fortran 77 时，不要忘记`H`...）

# javascript - 反转 DECRYPT 算法

> ID：13371784
> 
> 赞同：0
> 
> 时间：2012-11-14T01:32:48.297
> 
> 标签：javascript, cryptography, reverse

我很难扭转这个算法：

```
decrypt_algorithm = function (text) {
  var parser = new TextParser(text);
  var decrypt_key = [16, 19, 17, 7, 20, 23, 13, 1, 24, 15, 6, 12, 0, 18, 21, 2, 9, 14, 3, 10, 5, 25, 8, 4, 22, 11];
  var text_size = parser.getSize();
  var text_size_without_last_part = text_size - 26;
  var output = [];
  if (text_size_without_last_part > 0) {
      for (var m = 0; m < text_size_without_last_part; m += 26) {
          var word_to_decrypt = [];
          for (var k = 0; k < 26; k++) {
              word_to_decrypt[k] = parser.readNextChar()
          }
          for (var k = 0; k < 26; k++) {
              output[m + k] = word_to_decrypt[decrypt_key[k]]
          }
      }
      var parser_position = parser.getPosition();
      var last_part_size = text_size - text_size_without_last_part - 1;
      if (last_part_text > 0) {
          for (var k = 0; k < last_part_size; k++) {
              output[text_size_without_last_part + k] = parser.readNextChar()
          }
      }
  }
  return output;
}; 
```

我没有任何逆向工程知识，所以如果你能指出一些解释如何“逆向”函数的资源，那将非常有帮助。

我不需要确切的代码作为答案，但是我非常感谢一些关于如何自己逆向工程的指南。

**编辑1：**

稍作停顿，稍微思考了一下算法后，我明白了这个问题，而且比我想象的要容易：

`output[decrypt_key[k]] = word_to_decrypt[m + k]`

改变这将恢复算法，解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T01:48:15.130

这是一个简单的置换密码。本质上`decrypt_key`是用于重新排列输出

```
output[m + k] = word_to_decrypt[decrypt_key[k]]

decrypt_key = [16, 19, 17, 7, 20, 23, 13, 1, 24, 15, 6, 12, 0, 18, 21, 2, 9, 14, 3, 10, 5, 25, 8, 4, 22, 11]; 
```

或者，重新排列：

```
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 16 16 17 18 19 20 21 22 23 24 25 
```

编码

```
word_to_decrypt[decrypt_key[k]] 
```

本质上将索引放入被“加密”的代码中，并将其单词排列成 26 个块。

你可以把它想象成只是根据“key”来打乱单词，它告诉你它是如何被打乱的。

例如，

```
decrypt_key[0] -> 16
decrypt_key[16] -> 9 
```

这意味着第一个单词（位置 0）被放在位置 16，位置 16 的单词被放在位置 9。

另一个术语是称它为洗牌密码。它打乱了所有的单词，但是以一种非常可预测的方式。

只要你知道`decypher_key`密码的类型和类型，你就可以很容易地恢复数据，就像你知道一副纸牌是如何洗牌的一样（因为它不是真正随机的）。

要制作逆密码，您必须创建相反的密钥。如果位置 0 变为 16，则意味着位置 16 必须变为 0。对数组中的每个数字执行此操作并形成一个名为“encrypt_key”的新数组，然后您就可以加密可以正确解密的单词你给的代码。

* * *

卢阿代码：

```
function printarray(arr) local s = '[' for k,v in pairs(arr) do s = s..tostring(v)..', '  end s = s:sub(1,-3)..']' return s end
function permute(arr, key) local newarr = {}; for i = 1, #key do newarr[i] = arr[key[i]] end return newarr end

letters = {'a','b','c','d','e'};
key = {5, 1, 3, 4, 2};
invkey = {}
newletters = permute(letters, key)
print('input:  '..printarray(letters))
print('key:    '..printarray(key))
print('output: '..printarray(newletters))

for i = 1, #key do
    for j = 1, #key do
        if i == key[j] then
            invkey[i] = j;
            break;
        end
    end
end;

newletters2 = permute(newletters, invkey)
print('\nInverse Permutation')
print('input:  '..printarray(newletters))
print('key:    '..printarray(invkey))
print('output: '..printarray(newletters2)) 
```

输出：

```
input:  [a, b, c, d, e]
key:    [5, 1, 3, 4, 2]
output: [e, a, c, d, b]

Inverse Permutation
input:  [e, a, c, d, b]
key:    [2, 5, 3, 4, 1]
output: [a, b, c, d, e] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T01:37:13.657

您无需对其进行逆向工程：您已经拥有 JavaScript 源代码。该算法看起来很简单（只有两个嵌套循环） - 只需使用调试器单步执行它就可以揭示“关键”与任何给定输入的关系。

该算法看起来是对称的，所以一旦你了解了它们的密钥的作用（看起来它只是根据密钥在字符串中随机排列字符），那么你就可以推导出加密函数。

# dynamics-crm - 打印案例时可以不打印案例上的注释吗？

> ID：13371786
> 
> 赞同：1
> 
> 时间：2012-11-14T01:33:09.207
> 
> 标签：dynamics-crm, dynamics-crm-2011

在使用案例的内置打印功能时，是否可以避免打印附在案例上的笔记？

如果不可能，我将创建一个 SSRS 报告来执行此操作，但我宁愿只使用已经存在的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:15:30.347

您应该能够通过在页面中嵌入隐藏的 HTML Web 资源来实现，该页面是打印预览页面时隐藏元素。

将字段变为不同颜色的示例代码：

```
<HTML>
    <HEAD>
        <SCRIPT type=text/javascript>
            if (top.location.href.indexOf("/print/print.aspx") != -1) {
                //Do your own DOM manipulation here to hide sections
                top.frames[0].document.getElementById('caseorigincode_d').firstChild.style.color = '#0000FF';

            }
        </SCRIPT>
        <META charset=utf-8>
    </HEAD>

    <BODY contentEditable=true>
        <FONT size=2 face="Tahoma, Verdana, Arial">
            Testing…
        </FONT>
    </BODY>
</HTML> 
```

此方法来自：[http](http://www.crmsoftwareblog.com/2011/08/printing-in-crm-2011/) : //www.crmsoftwareblog.com/2011/08/printing-in-crm-2011/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:32:56.590

如果你把：

```
<field name>_c 
```

它是标题/标签

`<field name>_d`

它是数据值

在你的情况下，只需输入：

```
{
   top.frames[0].document.getElementById('notescontrol_c').style.display = "none"
   top.frames[0].document.getElementById('notescontrol_d').style.display = "none"
} 
```

# javascript - 如何使用 Spotify 的内部 Javascript API 在播放列表的上下文中播放歌曲？

> ID：13371790
> 
> 赞同：1
> 
> 时间：2012-11-14T01:33:40.397
> 
> 标签：javascript, spotify

我一直在尝试使用[Spotify API](https://developer.spotify.com/technologies/apps/docs/f19ff300f8/)，并尝试使用`player.play()`. 我的代码如下所示：

```
models = sp.require("sp://import/scripts/api/models");
player = models.player;
playlist = new models.Playlist();

playlist.add("a track uri");
playlist.add("a track uri also");

track = models.Track.fromURI(playlist.get(0).data.uri);
player.play(track.data.uri, playlist.data.uri); 
```

此代码为我播放第一首曲目，但当歌曲结束或我按下下一个时，播放器进入“空”状态，没有曲目排队。换句话说，它就像没有更多的曲目可以播放一样。官方 API 在上下文主题方面缺乏深度。

注意：我希望我的播放列表是短暂的，但一个持久的播放列表可以作为起点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:06:11.210

我的代码的另一部分有错误导致这种意外行为。上面的代码工作正常。

# c - 如何获取指向动态库（Linux ELF）特定部分的指针？

> ID：13371791
> 
> 赞同：4
> 
> 时间：2012-11-14T01:33:56.760
> 
> 标签：c, linux, memory, elf, dynamic-library

[从这个问题的第二个答案中](https://stackoverflow.com/questions/12159595/how-to-get-a-pointer-to-an-specific-section-of-a-program-from-within-itself-ma)可以看出，使用节的名称从程序自身内部获取指向程序特定节的指针非常简单。使用`libelf`，只需打开程序自己的文件，遍历其中的所有部分（由`Elf64_Shdr`结构表示），当部分名称与您想要的部分匹配时停止并使用存储在结构`sh_addr`元素中的指针`Elf64_Shdr`。在这种情况下，获取想要的指针非常简单，因为它是在 ELF 可执行文件中定义的。

但是，假设您有一个使用动态库的程序，并且您需要获取指向该动态库的一部分的指针。由于其部分的地址是在运行时定义的，如何获得指向动态库部分的指针？

顺便说一句，动态库和主程序本身都有一个同名的部分（这是我需要获得指针的部分）。那么，在这种情况下，这两个具有相同名称的部分是否有可能在内存中相邻存储，所以我只需要获取指向主文件部分的指针（正如我在第一段中解释的那样）并添加一个偏移量到达动态库部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T05:49:31.370

> 从自身内部获取指向程序特定部分的指针非常简单

不必要。在运行时实际上不需要节表，并且可以完全剥离（只有段重要，而不是节）。

> 由于其部分的地址是在运行时定义的，如何获得指向动态库部分的指针？

该库与主可执行文件完全不同。主要区别在于库通常在地址处链接`0`（主可执行文件不是），并由运行时加载程序*重新定位*到其他一些常量偏移量。

一旦知道了偏移量，只需将其添加到节开始（您可以`readelf -S foo.so`从 libelf 或从 libelf 中找到），瞧：您已经获得了该节的运行时地址。

那么如何找到给定共享库的重定位呢？

不优雅的解决方案（尼克已经建议）是解析`/proc/self/maps`.

更好的解决方案是使用 (glibc-specific) `dl_iterate_phdr`。文档[在这里](http://linux.die.net/man/3/dl_iterate_phdr)。你会想要使用`dlpi_addr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-21T11:07:52.243

很简单，这里举个例子：

```
#include <stdio.h>

int i __attribute__((section("my_section"))) = 2;
int j __attribute__((section("my_section"))) = 3;
int k __attribute__((section("my_section"))) = 5;

extern int __start_my_section;
extern int __stop_my_section;

int main(void)
{
    int *p = &__start_my_section;

    printf("%d\n", *p++); /* print k value */
    printf("%d\n", *p++); /* print j value */
    printf("%d\n", *p);   /* print i value */

   return 0;
} 
```

# php - 扩大字数限制

> ID：13371795
> 
> 赞同：0
> 
> 时间：2012-11-14T01:34:28.803
> 
> 标签：php

有没有人有过为博客制作撰写表单的经历？

我有这个问题在我的本地主机上运行得很好，但是当我尝试在服务器上上传时，事情没有解决。

我的问题是，当我在 localhost 上运行时，它接受无限数量的字符并作为“文本”数据类型保存到数据库，但在站点上运行它只接受 10,000 个字符，除此之外它返回错误。这里可能是什么问题？

这是我的代码。

```
<form action="savepost.php" method="POST">
<fieldset style="width:600px; height:580px">
<br><strong>Title</strong> <input id="posttitle" name="posttitle" type="text">
<br><br><strong>Content</strong>
<br><textarea id="postform" name="postform" style="width:600px; height:450px; resize: none"></textarea>
<br><input type="submit" value="Post" id="postbutton"/>
</fieldset>
</form> 
```

savepost.php 基本上是一个 mysql 插入过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:51:34.447

尝试在 php.ini 或 .htaccess 中检查/设置

```
post_max_size=20M 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:56:04.980

1-确保您的数据库模式表中的数据类型设置为`TEXT`，`LONGTEXT`或`MEDIUMTEXT`在本地和托管服务器中。

```
TEXT : 65,000 characters
MEDIUMTEXT: 16 million characters
LONGTEXT : 4 trillion 
```

2-在您的**php.ini**中设置`post_max_size`为您想要的百万字符数。默认是（在 WAMP 中）`post_max_size = 8M`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:47:18.080

只需更改您的 MySQL 数据库架构以允许超过 10,000 个字符的文本。

根据这个文件（[http://dev.mysql.com/doc/refman/5.0/en/blob.html](http://dev.mysql.com/doc/refman/5.0/en/blob.html)）你应该使用`LONGTEXT`类型，它有4 GB的文本限制，当然足够的空间:)

# scala - 如何在 Scala Actor 模型中重载 bang(!) 运算符？

> ID：13371797
> 
> 赞同：3
> 
> 时间：2012-11-14T01:34:34.940
> 
> 标签：scala, actor

在 Scala 中的 Actor 模型实现中，我们可以覆盖 bang(!) 运算符吗？我们可以通过重载这个操作符来修改消息传递的操作吗？

示例场景：当任何参与者通过传递消息调用另一个参与者时，我需要包含信息记录。因此，通过重载消息传递（！）运算符，我可以
跟踪不同参与者之间的消息传递并避免为每个参与者消息传递调用包含记录器语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:35:59.067

> 在 Scala 中的 Actor 模型实现中，我们可以覆盖 bang(!) 运算符吗？

你可以，但我强烈建议不要这样做。

> 示例场景：当任何参与者通过传递消息调用另一个参与者时，我需要包含信息记录。

1.  这不适用于任何不扩展您的类型的参与者：Akka 系统参与者、由库创建的参与者等。

2.  [这已经可以由 Akka 完成](http://doc.akka.io/docs/akka/2.0.3/scala/logging.html)，只需设置`akka.debug.receive = on`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T08:51:49.697

You can try the following code.

```
override def !(msg:Any):Unit =
{
   //logic for writing to logs..
   super.!(msg)
} 
```

This works fine. However, i want to differentiate behavior of !, depending upon the messages I am sending. for example below:

```
actor_name!(arg1,arg2,arg3)
actor_name1!(arg4, arg5) 
```

How do i differentiate between these two message sending notation in the overriding code?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:00:54.250

在 Akka 中，您实际上无法覆盖`!`运算符，因为您无法以有意义的方式创建 ActorRef 的子类（即它们不会由相应的工厂方法生成），原因是它实际上不是您想要的（请相信我在这里）。

您声明的用例已包含在[内置功能中](http://doc.akka.io/docs/akka/2.0.4/scala/testing.html#Tracing_Actor_Invocations)：

```
import akka.event.LoggingReceive
def receive = LoggingReceive {
  case x => ...
} 
```

如果您启用这些配置设置，它将为每次调用记录一条消息：

```
akka {
  loglevel = DEBUG
  actor.debug {
    receive = on     // this enables the above
    autoreceive = on // same for the likes of PoisonPill, Kill, …
    lifecycle = on   // will log actor creation, restart, termination
  }
} 
```

# objective-c - Animating CAShapeLayer size change

> ID：13371801
> 
> 赞同：18
> 
> 时间：2012-11-14T01:35:09.077
> 
> 标签：objective-c, ios, cabasicanimation, cashapelayer

I am drawing a circle, with an initial radius of 200

```
self.circle = [CAShapeLayer layer];
self.circle.fillColor = nil;
self.circle.strokeColor = [UIColor blackColor].CGColor;
self.circle.lineWidth = 7;
self.circle.bounds = CGRectMake(0, 0, 2 * radius, 2 * radius);
self.circle.path = [UIBezierPath bezierPathWithArcCenter:CGPointMake(self.radius, self.radius) 
```

Can anyone please tell me how to animate a change to a radius of 100?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T13:32:18.823

This is how I ended up doing it:

```
UIBezierPath *newPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(newRadius, newRadius) radius:newRadius startAngle:(-M_PI/2) endAngle:(3*M_PI/2) clockwise:YES];
CGRect newBounds = CGRectMake(0, 0, 2 * newRadius, 2 * newRadius);

CABasicAnimation* pathAnim = [CABasicAnimation animationWithKeyPath: @"path"];
pathAnim.toValue = (id)newPath.CGPath;

CABasicAnimation* boundsAnim = [CABasicAnimation animationWithKeyPath: @"bounds"];
boundsAnim.toValue = [NSValue valueWithCGRect:newBounds];

CAAnimationGroup *anims = [CAAnimationGroup animation];
anims.animations = [NSArray arrayWithObjects:pathAnim, boundsAnim, nil];
anims.removedOnCompletion = NO;
anims.duration = 2.0f;
anims.fillMode  = kCAFillModeForwards;

[self.circle addAnimation:anims forKey:nil]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-04-21T13:13:22.373

This is, I believe, the simpler and preferred way to do it:

```
UIBezierPath *newPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(newRadius, newRadius) radius:newRadius startAngle:(-M_PI/2) endAngle:(3*M_PI/2) clockwise:YES];
CABasicAnimation* pathAnim = [CABasicAnimation animationWithKeyPath:@"path"];
pathAnim.fromValue = (id)self.circle.path;
pathAnim.toValue = (id)newPath.CGPath;
pathAnim.duration = 2.0f;
[self.circle addAnimation:pathAnim forKey:@"animateRadius"];

self.circle.path = newPath.CGPath; 
```

I got this approach from the [Apple Documentation here](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html#//apple_ref/doc/uid/TP40004514-CH3-SW1) (See listing 3-2). The important things here are that you're setting the `fromValue` and also setting the final value for `self.circle`'s `path` to `newPath.CGPath` right after you set up the animation. An animation does not change the underlying value of the model, so in the other approach, you're not actually making a permanent change to the shape layer's `path` variable.

I've used a solution like the chosen answer in the past (using `removedOnCompletion` and `fillMode` etc) but I found that on certain versions of iOS they caused memory leaks, and also sometimes that approach just doesn't work for some reason.

With this approach, you're creating the animation explicitly (both where it starts from and where it ends), *and* you're specifying the final permanent value for the path at the end (with that last line), so that there's no need to mess with not removing the animation when it finishes (which I believe is what leads to memory leaks if you do this animation a lot of times... the unremoved animations build up in memory).

Also, I removed the animation of the `bounds` because you don't need it to animate the circle. Even if the path is drawn outside the bounds of the layer, it'll still be fully shown (see the docs for `CAShapeLayer` about that). If you do need to animate the bounds for some other reason, you can use the same approach (making sure to specify the `fromValue` and the final value for bounds).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T01:47:28.260

You can use a `CAAnimationGroup` to animate the `bounds` and `path` of your `CAShapeLayer`:

```
- (void)animateToRadius:(CGFloat)newRadius {
   CAShapeLayer *shapeLayer = ...;

   UIBezierPath *newBezierPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(newRadius, newRadius)];
   NSValue *newBounds = [NSValue valueWithCGRect:CGRectMake(0,0,2*newRadius,2*newRadius);

   CAAnimationGroup *group = [CAAnimationGroup animation];

   NSMutableArray *animations  = [@[] mutableCopy];
   NSDictionary *animationData = @{@"path":newBezierPath.CGPath, @"bounds":newBounds};
   for(NSString *keyPath in animationData) {
      CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:keyPath];
      animation.toValue   = animationData[keyPath];
      [animations addObject:animation];
   }

   group.animations = [animations copy];
   group.duration = 2;
   group.removedOnCompletion = NO;
   group.fillMode = kCAFillModeForwards;

   [shapeLayer addAnimation:group forKey:nil];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-20T15:08:24.497

Here is a direct swift conversion of Jonathan's code should anyone need it.

```
func scaleShape(shape : CAShapeLayer){

    let newRadius : CGFloat = 50;

    let newPath: UIBezierPath = UIBezierPath(arcCenter: CGPointMake(newRadius, newRadius), radius: newRadius, startAngle: (CGFloat(-M_PI) / 2.0), endAngle: (3 * CGFloat(M_PI) / 2), clockwise: true);

    let newBounds : CGRect = CGRect(x: 0, y: 0, width: 2 * newRadius, height: 2 * newRadius);
    let pathAnim : CABasicAnimation = CABasicAnimation(keyPath: "path");

    pathAnim.toValue = newPath.CGPath;

    let boundsAnim : CABasicAnimation = CABasicAnimation(keyPath: "bounds");
    boundsAnim.toValue = NSValue(CGRect: newBounds);

    let anims: CAAnimationGroup = CAAnimationGroup();
    anims.animations = [pathAnim, boundsAnim];
    anims.removedOnCompletion = false;
    anims.duration = 2.0;
    anims.fillMode = kCAFillModeForwards;

    shape.addAnimation(anims, forKey: nil);
} 
```

# php - 路径名中的 PHP 符号链接

> ID：13371802
> 
> 赞同：1
> 
> 时间：2012-11-14T01:35:13.507
> 
> 标签：php, directory, lamp, symlink

我正在研究一种通过 php 列出目录中所有文件的简单方法。我有直接来自 php.net 的[代码](http://php.net/manual/en/function.readdir.php)，但我似乎无法访问符号链接。当我尝试访问符号链接（到目录）时，getcwd() 将显示原始工作目录。

index1.php 是这个文件。我在arch linux上运行。

`ls -lh`的目录。权限似乎是有序的？

```
[drake@unimatrix434 .hiddenVideo]$ pwd
/home/drake/public_html/.hiddenVideo
[drake@unimatrix434 .hiddenVideo]$ ls -lh
total 224K
-rw-r--r-- 1 drake users  921 Nov 13 20:17 index1.php
-rwxr-xr-x 1 drake users 213K Nov 13 15:19 index.php
drwxr-xr-x 2 drake users 4.0K Nov 13 20:05 testDIR
lrwxrwxrwx 1 drake users   26 Nov 13 14:10 Video -> /media/storage_pool/Video/ 
```

php代码部分：

```
<?php
    echo "<div>" . getcwd() . "</div>";
    chdir('Video');
    echo "<div>" . getcwd() . "</div>";

    echo "</br>";

    //list files
    if ($handle = opendir('.')) {
        echo "<div>Directory handle: $handle</div>";
        echo "<div>Entries:</div>";

        while (false !== ($entry = readdir($handle))) {
            echo "<div>$entry</div>";
        }
        closedir($handle);
    }
?> 
```

产生：

```
/home/drake/public_html/.hiddenVideo
/home/drake/public_html/.hiddenVideo

Directory handle: Resource id #3
Entries:
..
index.php
.
Video
index1.php
testDIR 
```

有没有人有任何想法或建议？我原以为这会奏效......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:53:29.653

尝试使用[readlink()](http://www.php.net/manual/en/function.readlink.php) 您应该能够将链接转换为目录...并使用[is_link()](http://www.php.net/manual/en/function.is-link.php)来验证它是否真的是一个 =)

# java - MySQL JDBC 插件加载

> ID：13371803
> 
> 赞同：3
> 
> 时间：2012-11-14T01:35:15.853
> 
> 标签：java, mysql, jdbc

我在初始化 MySQL JDBC 连接的代码中看到了很多这种类型的代码。

```
Class.forName("com.mysql.jdbc.Driver");
conn = DriverManager.getConnection("jdbc:mysql://10.0.0.2:3306", "username", "password"); 
```

现在我的问题是为什么/何时需要第一行？我已经能够通过以下方式毫无问题地连接到 MySQL 数据库：

```
conn = DriverManager.getConnection("jdbc:mysql://10.0.0.2:3306", "username", "password"); 
```

我将 Java 7 与 Connector/J 5.0.8 驱动程序一起使用。

我的代码中没有任何导入或类加载语句可以直接加载 MySQL 驱动程序，只有通用 Java SQL 接口类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:43:45.833

**简短回答**：使用 4.0 之前的 JDBC 驱动程序（JDBC 4.0 引入了 JDBC 驱动程序类的自动加载）

> 在以前的 JDBC 版本中，要获得连接，首先必须通过调用方法 Class.forName 来初始化 JDBC 驱动程序。此方法需要 java.sql.Driver 类型的对象。每个 JDBC 驱动程序都包含一个或多个实现接口 java.sql.Driver 的类。Java DB 的驱动程序是 org.apache.derby.jdbc.EmbeddedDriver 和 org.apache.derby.jdbc.ClientDriver，而 MySQL Connector/J 的驱动程序是 com.mysql.jdbc.Driver。请参阅 DBMS 驱动程序的文档以获取实现接口 java.sql.Driver 的类的名称。
> 
> 在您的类路径中找到的任何 JDBC 4.0 驱动程序都会自动加载。**（但是，您必须使用 Class.forName 方法手动加载 JDBC 4.0 之前的所有驱动程序。）**

资料来源：[JDBC 基础](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)

# vba - 从 Sub 调用时，Word VBA 标题文本被缩短并且函数产生相反的结果

> ID：13371805
> 
> 赞同：1
> 
> 时间：2012-11-14T01:35:25.530
> 
> 标签：vba, ms-word

很抱歉在一篇文章中提出了两个问题。

这间接与我最近在这里发布的一个问题有关：[vba: return page number from selection.find using text from array](https://stackoverflow.com/questions/13327813/vba-return-page-number-from-selection-find-using-text-from-array) which has beensolved

节目目的：

首先：为所选文件夹和子文件夹中的文档（即0.0.0，Chapter.Section，Page代表）添加带有自定义页码的页脚。

其次：在选定的根文件夹中创建一个目录，并将自定义页码保存为 roottoc.docx。

在我完全清理并最终解决之前，我现在有两个新问题，我将在本文末尾发布完整的代码。

**解决**了首先，从我发现的内容以及刚刚在其他地方阅读的内容来看，该`getCrossReferenceItems(refTypeHeading)`方法只会从找到的内容中返回一定长度的文本。我有一些很长的标题，这意味着这对于我的代码来说是相当烦人的。所以我的第一个问题是我可以用这种`getCrossReferenceItems(refTypeHeading)`方法做些什么来强制它从任何引用的标题中收集全文，或者是否有解决这个问题的替代方法。

**解决**了其次，`createOutline()`调用该函数时`ChooseFolder()`会产生正确的结果，但顺序相反，请有人也可以指出这一点。

不幸的是，我收到的实际结果很难准确复制，但如果一个文件夹包含几个具有不同标题的文档。目录名称应与单元数组中的相同，即 Unit(1) "Unit 1"，文件名由两部分组成，即 Unit(1) & " " & Criteria(1) & ext 成为“Unit 1 p1.docx”等，数组**Unit**和**Criteria**在`ChooseFolder`子中。**chapArr**是我的页码系统唯一的**Unit**数组内容的数字代表，由于此时的懒惰，我使用了另一个数组。我本可以在 Unit 数组上使用其他一些方法来达到我在清理时可能会看到的相同结果。

运行 ChooseFolder Sub 时，如果包含文档的新文件夹位于“我的文档”中，则**“我的文档”**将成为在文件对话窗口中定位和选择的文件夹。这应该会产生相似的结果，并会举例说明我正在谈论的内容。

完整代码：

```
Public Sub ChooseFolder()
  'Declare Variables
    '|Applications|
    Dim doc As Word.Document
    '|Strings|
    Dim chapNum As String
    Dim sResult As String
    Dim Filepath As String
    Dim strText As String
    Dim StrChapSec As String
    '|Integers|
    Dim secNum As Integer
    Dim AckTime As Integer
    Dim FolderChosen As Integer
    '|Arrays|
    Dim Unit() As Variant
    Dim ChapArray() As Variant
    Dim Criteria() As Variant
    '|Ranges|
    Dim rng As Range
    '|Objects|
    Dim InfoBox As Object
    '|Dialogs|
    Dim fd As FileDialog
  'Constants
    Const ext = ".docx"
  'Set Variable Values
    secNum = 0 'Set Section number start value
    AckTime = 1 'Set the message box to close after 1 seconds
    Set InfoBox = CreateObject("WScript.Shell") 'Set shell object
    Set fd = Application.FileDialog(msoFileDialogFolderPicker) 'Set file dialog object
    FolderChosen = fd.Show 'Display file dialogue
  'Set Array Values
  'ToDo: create form to set values for Arrays
    'Folder names
    Unit = Array("Unit 1", "Unit 2")
    'Chapter Numbers
    chapArr = Array("1", "2")
    'Document names
    Criteria = Array("P1", "P2", "P3", "P4", "P5", "P6", "P7", "P8", "P9", "M1", "M2", "M3", "M4", "D1", "D2", "D3")

    If FolderChosen <> -1 Then
        'didn't choose anything (clicked on CANCEL)
        MsgBox "You chose cancel"
    Else
        'Set sResult equal to selected file/folder in file dialogue
        sResult = fd.SelectedItems(1)
    End If

    ' Loop through unit array items
    For i = LBound(Unit) To UBound(Unit)
        unitName = Unit(i)
        ' Test unit folder being looked at and concatenate sResult with
        ' unitName delimited with "\"
        If unitName = "Unit 105" Then
            Filepath = sResult & "\unit 9"
        Else
            Filepath = sResult & "\" & unitName
        End If
        ' Loop through criteria array items
        For j = LBound(Criteria) To UBound(Criteria)
            criteriaName = Criteria(j)
            ' Set thisFile equal to full file path
            thisfile = Filepath & "\" & unitName & " " & criteriaName & ext 'Create file name by concatenating filePath with "space" criteriaName and ext
            ' Test if file exists
            If File_Exists(thisfile) = True Then
                ' If file exists do something (i.e. process number of pages/modify document start page number)
                ' Inform user of file being processed and close popup after 3 seconds
                Select Case InfoBox.Popup("Processing file - " & thisfile, AckTime, "This is your Message Box", 0)
                    Case 1, -1
                End Select
                ' Open document in word using generated filePath in read/write mode
                ' Process first section footer page number and amend to start as intPages (total pages)  + 1
                Set doc = Documents.Open(thisfile)
                With doc
                    With ActiveDocument.Sections(1)
                        chapNum = chapArr(i)
                        secNum = secNum + 1
                        ' Retrieve current footer text
                        strText = .Footers(wdHeaderFooterPrimary).Range.Text
                        .PageSetup.DifferentFirstPageHeaderFooter = False
                        ' Set first page footer text to original text
                        .Footers(wdHeaderFooterFirstPage).Range.Text = strText
                        ' Set other pages footer text
                        .Footers(wdHeaderFooterPrimary).Range.Text = Date & vbTab & "Author: Robert Ells" & vbTab & chapNum & "." & secNum & "."
                        Set rng = .Footers(wdHeaderFooterPrimary).Range.Duplicate
                        rng.Collapse wdCollapseEnd
                        rng.InsertBefore "{PAGE}"
                        TextToFields rng
                    End With
                    ActiveDocument.Sections(1).Footers(1).PageNumbers.StartingNumber = 1
                    Selection.Fields.Update
                    Hide_Field_Codes
                    ActiveDocument.Save
                    CreateOutline sResult, chapNum & "." & secNum & "."
                End With
            Else
                'If file doesn't exist do something else (inform of non existant document and close popup after 3 seconds
                Select Case InfoBox.Popup("File: " & thisfile & " - Does not exist", AckTime, "This is your Message Box", 0)
                    Case 1, -1
                End Select
            End If

        Next
        Filepath = ""
        secNum = 0
    Next
End Sub

Private Function TextToFields(rng1 As Range)
    Dim c As Range
    Dim fld As Field
    Dim f As Integer
    Dim rng2 As Range
    Dim lFldStarts() As Long

    Set rng2 = rng1.Duplicate
    rng1.Document.ActiveWindow.View.ShowFieldCodes = True

    For Each c In rng1.Characters
        DoEvents
        Select Case c.Text
            Case "{"
                ReDim Preserve lFldStarts(f)
                lFldStarts(f) = c.Start
                f = f + 1
            Case "}"
                f = f - 1
                If f = 0 Then
                    rng2.Start = lFldStarts(f)
                    rng2.End = c.End
                    rng2.Characters.Last.Delete '{
                    rng2.Characters.First.Delete '}
                    Set fld = rng2.Fields.Add(rng2, , , False)
                    Set rng2 = fld.Code
                    TextToFields fld.Code
                End If
            Case Else
        End Select
    Next c
    rng2.Expand wdStory
    rng2.Fields.Update
    rng1.Document.ActiveWindow.View.ShowFieldCodes = True
End Function

Private Function CreateOutline(Filepath, pgNum)
' from https://stackoverflow.com/questions/274814/getting-the-headings-from-a-word-document
  'Declare Variables
    '|Applications|
    Dim App As Word.Application
    Dim docSource As Word.Document
    Dim docOutLine As Word.Document
    '|Strings|
    Dim strText As String
    Dim strFileName As String
    '|Integers|
    Dim intLevel As Integer
    Dim intItem As Integer
    Dim minLevel As Integer
    '|Arrays|
    Dim strFootNum() As Integer
    '|Ranges|
    Dim rng As Word.Range
    '|Variants|
    Dim astrHeadings As Variant
    Dim tabStops As Variant
  'Set Variable values
    Set docSource = ActiveDocument
    If Not FileLocked(Filepath & "\" & "roottoc.docx") Then
        If File_Exists(Filepath & "\" & "roottoc.docx") Then
            Set docOutLine = Documents.Open(Filepath & "\" & "roottoc.docx", ReadOnly:=False)
        Else
            Set docOutLine = Document.Add
        End If
    End If

    ' Content returns only the
    ' main body of the document, not
    ' the headers and footer.
    Set rng = docOutLine.Content

    minLevel = 5  'levels above this value won't be copied.

    astrHeadings = returnHeaderText(docSource) 'docSource.GetCrossReferenceItems(wdRefTypeHeading)

    docSource.Select
    ReDim strFootNum(0 To UBound(astrHeadings))
    For i = 1 To UBound(astrHeadings)
        With Selection.Find
            .Text = Trim(astrHeadings(i))
            .Wrap = wdFindContinue
        End With

        If Selection.Find.Execute = True Then
            strFootNum(i) = Selection.Information(wdActiveEndPageNumber)
        Else
            MsgBox "No selection found", vbOKOnly 'Or whatever you want to do if it's not found'
        End If
        Selection.Move
    Next

    docOutLine.Select
    With Selection.Paragraphs.tabStops
        '.Add Position:=InchesToPoints(2), Alignment:=wdAlignTabLeft
        .Add Position:=InchesToPoints(6), Alignment:=wdAlignTabRight, Leader:=wdTabLeaderDots
    End With

    For intItem = LBound(astrHeadings) To UBound(astrHeadings)
        ' Get the text and the level.
        ' strText = Trim$(astrHeadings(intItem))
        intLevel = GetLevel(CStr(astrHeadings(intItem)))
        ' Test which heading is selected and indent accordingly
        If intLevel <= minLevel Then
                If intLevel = "1" Then
                    strText = " " & Trim$(astrHeadings(intItem)) & vbTab & pgNum & strFootNum(intItem) & vbCr
                End If
                If intLevel = "2" Then
                    strText = "   " & Trim$(astrHeadings(intItem)) & vbTab & pgNum & strFootNum(intItem) & vbCr
                End If
                If intLevel = "3" Then
                    strText = "      " & Trim$(astrHeadings(intItem)) & vbTab & pgNum & strFootNum(intItem) & vbCr
                End If
                If intLevel = "4" Then
                    strText = "         " & Trim$(astrHeadings(intItem)) & vbTab & pgNum & strFootNum(intItem) & vbCr
                End If
                If intLevel = "5" Then
                    strText = "            " & Trim$(astrHeadings(intItem)) & vbTab & pgNum & strFootNum(intItem) & vbCr
                End If
            ' Add the text to the document.
            rng.Collapse (False)
            rng.InsertAfter strText & vbLf
            docOutLine.SelectAllEditableRanges
            ' tab stop to set at 15.24 cm
            'With Selection.Paragraphs.tabStops
            '    .Add Position:=InchesToPoints(6), _
            '    Leader:=wdTabLeaderDots, Alignment:=wdAlignTabRight
            '    .Add Position:=InchesToPoints(2), Alignment:=wdAlignTabCenter
            'End With
            rng.Collapse (False)
        End If
    Next intItem
    docSource.Close
    docOutLine.Save
    docOutLine.Close
End Function

Function returnHeaderText(doc As Word.Document) As Variant
    Dim returnArray() As Variant
    Dim para As Word.Paragraph
    Dim i As Integer
    i = 0
    For Each para In doc.Paragraphs
        If Left(para.Style, 7) = "Heading" Then
            ReDim Preserve returnArray(i)
            returnArray(i) = para.Range.Text
            i = i + 1
        End If
    Next
    returnHeaderText = returnArray
End Function

Function FileLocked(strFileName As String) As Boolean
   On Error Resume Next
   ' If the file is already opened by another process,
   ' and the specified type of access is not allowed,
   ' the Open operation fails and an error occurs.
   Open strFileName For Binary Access Read Write Lock Read Write As #1
   Close #1
   ' If an error occurs, the document is currently open.
   If Err.Number <> 0 Then
      ' Display the error number and description.
      MsgBox "Error #" & Str(Err.Number) & " - " & Err.Description
      FileLocked = True
      Err.Clear
   End If
End Function

Private Function GetLevel(strItem As String) As Integer
    ' from https://stackoverflow.com/questions/274814/getting-the-headings-from-a-word-document
    ' Return the heading level of a header from the
    ' array returned by Word.

    ' The number of leading spaces indicates the
    ' outline level (2 spaces per level: H1 has
    ' 0 spaces, H2 has 2 spaces, H3 has 4 spaces.

    Dim strTemp As String
    Dim strOriginal As String
    Dim intDiff As Integer

    ' Get rid of all trailing spaces.
    strOriginal = RTrim$(strItem)

    ' Trim leading spaces, and then compare with
    ' the original.
    strTemp = LTrim$(strOriginal)

    ' Subtract to find the number of
    ' leading spaces in the original string.
    intDiff = Len(strOriginal) - Len(strTemp)
    GetLevel = (intDiff / 2) + 1
End Function

Private Function File_Exists(ByVal sPathName As String, Optional Directory As Boolean) As Boolean
    'Returns True if the passed sPathName exist
    'Otherwise returns False
    On Error Resume Next
    If sPathName <> "" Then
        If IsMissing(Directory) Or Directory = False Then
            File_Exists = (Dir$(sPathName) <> "")
        Else
            File_Exists = (Dir$(sPathName, vbDirectory) <> "")
        End If
    End If
End Function

Sub Hide_Field_Codes()
    Application.ActiveWindow.View.ShowFieldCodes = False
End Sub 
```

凯文的解决方案：

**问题第 1 部分，答案**

我最初认为当我添加您的函数时出现问题，但这是由于文档中实际标题之后的下一行中的空白标题。我想一个`If`测试是否存在文本的语句可以解决这个问题。:-)

我还没有测试这一点（由于累了），但是如果标题与普通文本内联，这个函数会只拾取标题还是同时拾取标题和普通文本？

**问题第 2 部分，答案**

刚刚工作，虽然有一个小问题（生成的列表不再按主`CreateOutline`函数中的需要缩进）。时间快到了，所以明天必须再次拿起这个:-)

再次感谢 kevin，这是我在 uni 编程期间应该更加专注的地方，而不是考虑酒吧。

菲尔:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:56:00.823

欢迎回来！:-)

对于 CreateOutline 函数的反向数据 - 将 Collapse 函数更改为具有`false`参数。Collapse 默认将光标放在所选内容的开头，但这会将其放在末尾，因此您将添加到文档的末尾而不是开头：

```
' Add the text to the document.
rng.Collapse(False) 'HERE'
rng.InsertAfter strText & vbLf
docOutLine.SelectAllEditableRanges
rng.Collapse(False) 'AND HERE' 
```

对于 CrossReferenceItems 问题，试试这个，让我知道它返回的内容中是否缺少任何数据。调用它而不是 CrossReferenceItems 方法：

```
Function returnHeaderText(doc As Word.Document) As Variant
    Dim returnArray() As Variant
    Dim para As Word.Paragraph
    Dim i As Integer
    i = 0
    For Each para In doc.Paragraphs
        If Left(para.Style, 7) = "Heading" Then
            ReDim Preserve returnArray(i)
            returnArray(i) = para.Range.Text
            i = i + 1
        End If
    Next
    returnHeaderText = returnArray
End Function 
```

# c# - 将 ContentTemplateSelector 绑定到不同的对象然后内容（ContentPresenter）

> ID：13371807
> 
> 赞同：1
> 
> 时间：2012-11-14T01:35:35.117
> 
> 标签：c#, wpf, data-binding

查看我的代码，我意识到我的许多`DataTemplateSelector`基于类的功能几乎相同，例如检查`bool`绑定对象的属性。我真的不想要一堆几乎做同样事情的对象，但我对我的想法并不完全满意。

我最喜欢的想法是将我需要的对象绑定到模板，并让我`DataTemplateSelector`有一个属性可以设置为例如布尔属性的*名称*，该属性应该用于选择模板（在实例化选择器时提供名称）我的 xaml。在选择器中，我将使用反射来访问该属性。

第二个想法是只绑定我的布尔属性，然后在我的模板中使用与祖先的相对绑定`DataContext`并从那里开始工作。我不喜欢这样，因为它看起来非常违反直觉并且难以维护。

我可以为此目的实现一个接口（以便布尔属性始终具有相同的名称），但这意味着我将在模型中包含一些仅用于视图的代码。或者在 a 中实现接口，`ViewModel`并且不能`DataTemplateSelector`在同一个控件中进行多个操作（不为此目的拆分为类）。

只需按名称绑定即可。非常简单的解决方案，但如果您想在多个控件中重用您的模板，则实际上并不能正常工作。如果我有一个`UserControl`我需要模板的地方，我会选择的解决方案。只需将其作为资源，`UserControl`并拥有一个简单且可维护的解决方案。只要您不想在多个控件中使用模板，那绝对没有问题。

还有其他我忽略的想法吗？对上面列出的事情有任何意见吗？

### 用于说明的示例代码

*注意：因为我不在办公室，所以我在没有编译器的情况下输入了代码。既然它应该说明这个问题，编译错误等应该没有太大关系*

我正在谈论的模型的剥离版本：

```
public class RegisterToRead : IValueNotifyPropertyChanged
{
    ...
    public bool UseName { get {...} set {...} }
} 
```

`TemplateSelector`我的典型之一

```
public class RegisterToReadTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, 
        DependencyObject container)
    {
        if(item != null && item is RegisterToRead)
        {
            RegisterToRead register = (RegisterToRead)item;

            if( register.UseName)
                return element.FindResource("nameSelectionTemplate") as DataTemplate;
            else
                return element.FindResource("manualEntryTemplate") as DataTemplate;
        }
        return null;
    }
} 
```

### 我不能做，但精神上想做的事

有一个`TemplateSelector`看起来像这样的：

```
public class BooleanTemplateSelector : DataTemplateSelector
{
    public property DataTemplate TrueTemplate { get; set; }
    public property DataTemplate FalseTemplate { get; set; }

    public override DataTemplate SelectTemplate(object item, 
        DependencyObject container)
    {
        if(item != null && item is bool)
        {
            bool value = (bool)item;

            if( value)
                return TrueTemplate;
            else
                return FalseTemplate;
        }
        return null;
    }
} 
```

并这样使用，达到如上图的效果：

```
<sel:BooleanTemplateSelector
     TrueTemplate="{StaticResource nameSelectionTemplate}" 
     FalseTemplate="{StaticResource manualEntryTemplate}" 
     x:Key="RegisterToReadTemplateSelector" />
<ContentPresenter Content="{Binding SelectedRegister.UseName}" 
    ContentTemplateSelector={StaticResource ResourceKey=RegisterToReadTemplateSelector}"/> 
```

但我不能这样做，因为`DataContext`模板内部将设置为 UseName 属性，这不是我想要的。

这个问题在stackoverflow上有一个重复：[Bind property for ContentTemplateSelector but pass DataContext to template](https://stackoverflow.com/questions/11849786/bind-property-for-contenttemplateselector-but-pass-datacontext-to-template) where the OP没有得到任何答案，并提出了第四个想法。我想重申这个问题，以获得对我发布的其他想法的一些反馈。

# java - 多线程访问添加、获取、删除方法，使用递归和 Java 和树结构

> ID：13371809
> 
> 赞同：0
> 
> 时间：2012-11-14T01:35:51.250
> 
> 标签：java, multithreading, data-structures, recursion, tree

我有一个树结构，我正在尝试使用递归方法来添加、获取或删除项目。我希望能够为使用迭代器找到的每个子节点引入一个新线程。我目前在调用它时将节点传递给递归方法。我希望能够启动一个线程并告诉该线程调用该方法。我将如何做类似于说新线程 thread.callMethod() 的事情？我显然需要一个 Runnable 接口和一个运行方法？然而，这似乎使事情变得比必要的复杂得多（我已经有了方法名称）。有谁知道使用 run(..) 的好方法，或者有谁知道不使用 run(..) 的更好方法。谢谢。

谢谢您的回答。我一直在想我需要获得一个在新线程上运行的节点的新实例，但事实并非如此。节点只占用内存空间，线程引用了在内存中的实例上执行的方法代码（我的 CS 302 TA 在我的脑海中已经不同意我的看法）。所以..我一直在考虑枚举，但我在想我可能需要在实例化期间以某种方式让我的所有节点在单独的线程上运行，或者让方法实际编写在实现可运行的新类中。

换句话说，

```
public class TreeMethods implements Runnable
{
...
    run(.. node, .. params, .. enum)
    {
        switch(enum)
        case(add)
        {
             myThreadInstanceMethod(node);
        }
    ...
    }
    myThreadInstanceMethod(..) {..}
} 
```

谢谢。我不知道我在问这个问题，但是您大大简化了我的线程管理设计过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T01:38:25.103

`Runnable`如果没有or`Callable`对象，您将无法做到这一点。做你想做的事情的正确方法是创建一个`Runnable`类，该类接受你的对象并在该对象上调用适当的方法。

```
public class MyRunnable implements Runnable {
    private MyObject obj;
    public MyRunnable(MyObject obj) {
       this.obj = obj;
    }
    public void run() {
       obj.someMethod();
    }
} 
```

如果您需要调用几个方法之一，那么您可以`enum`为此使用 an。如果您需要传入参数，则可以将它们添加到构造函数中。

对于线程，始终建议您使用`Executors`类和`ExecutorService`线程池。这将限制递归算法创建的线程数量，并隐藏线程详细信息。

```
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
// or you can create an open-ended thread pool
// ExecutorService threadPool = Executors.newCachedThreadPool();
while (recursing) {
    threadPool.submit(new MyRunnable(myObject));
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:42:49.157

你可能需要这样的东西：

您的可运行文件：

```
public class ComputeNode implements Runnable {

    private Node node;

    public ComputeNode(Node nodeToCompute) {
        this.node = nodeToCompute;
    }

    @Override
    public void run() {
        computeOnNode(node);
    }
} 
```

如何启动它：

```
Runnable compute = new ComputeNode(nodeToComputeOn);
Thread t = new Thread(comute);
t.start(); 
```

ComputeOnNode() 是你自己写在某处的方法。

# go - Go的缺点

> ID：13371811
> 
> 赞同：1
> 
> 时间：2012-11-14T01:36:04.673
> 
> 标签：go

我学习 Go 有一段时间了，发现它有很多好的特性（简单干净的语法、快速的编译/执行、对并发的良好支持、一流的函数等）。但是很少有流行的项目是用 Go 开发的。

我只是想知道限制 Go 成为主流语言的主要缺点是什么？有人能想出一种 Go 显然不适合使用的程序/项目吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T02:01:09.140

Go只有3岁。C 40 多岁。C++ 30 多。Perl 25。Ruby 差不多 20。Java 是一门相对年轻的语言，17 岁，C# 10 岁（或 12 岁，取决于你如何计算）。Java 和 C# 投入了大量资源来使它们占据主导地位，Sun 和 Microsoft 投资于各种工具和库，并让人们接受了相关培训。相比之下，3年几乎不算什么。谷歌在 Go 开发人员身上花了一些钱，但远不及 C# 和 Java 的规模。对于真正杰出的产品用 Go 编写和发布来说，3 年并不是很多时间。

给它几年。用 Go 写一些代码。也许你的将成为下一个突出的项目。

至于它不适合什么，它不适合任何需要真正成熟的语言和工具集的东西。如果您想要花哨的重构 IDE、大量现成的库以及大量在线教程和信息，您可能还找不到。我最后一次检查，它的垃圾收集器有点弱；由于将整数误认为指针，可能会导致泄漏，因为它是一个保守的收集器。这现在可以修复，但它表明 Go 实现的相对不成熟；有些事情可能会在其他语言中解决问题（或有众所周知的解决方法模式），对于 Go 来说，这仍然是一个悬而未决的问题。

# c++ - 如何将 void* 转换回 std::vector

> ID：13371813
> 
> 赞同：2
> 
> 时间：2012-11-14T01:36:15.727
> 
> 标签：c++, stl, casting

如果我`data`知道.`vvp.at(0)``vf`

```
#include <iostream>
#include <vector>

typedef void* VoidPointer;
typedef std::vector< float > VF;
typedef std::vector< VoidPointer > VVP;

int main(int argc, char** argv)
{
    VF vf;
    vf.push_back(13.0f);
    vf.push_back(14.0f);
    vf.push_back(15.0f);
    vf.push_back(16.0f);

    VVP vvp;
    vvp.push_back( (VoidPointer)const_cast<float *>( &(vf.front()) ) );

    VF data ( static_cast< float* >( vvp.at(0) ),
              static_cast< float* >( vvp.at(0) ) + vf.size() );

    std::cout << "data.size() is " << data.size() << std::endl;

    for(VF::const_iterator i = data.begin(); i != data.end(); ++i)
    {
        std::cout << "data contains " << *i << std::endl;
    }

    return 0;
} 
```

`vvp.at(0)`撇开这是否合理（这个例子是人为的）我想知道`std::vector<float>`如果我不知道`vf`. 我的想法是这样的：

```
std::vector<float> data( *static_cast< std::vector<float>* >( vvp.at(0) ) ); 
```

但这会导致程序以 std::bad_alloc 终止，如果需要，我不介意复制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:42:01.447

这不是从到向量的转换，而是*将浮点数组**复制*到*新*向量中。而且你不能在不知道长度的情况下复制它。您只保存了指向第一个元素的指针，因此信息丢失了。`vvp.at(0)`

 **您可以`std::vector<std::pair<VoidPointer, size_t> > VVP`同时创建和保存`&vf.front()` *and* `vf.size()`（或者如果您愿意，可以创建和保存开始和结束指针）。

您可以创建`std::vector<VF *>`和存储指向向量（即`vvp.push_back(&vf)`）的指针，现在根本没有强制转换。

编辑：如果您没有意识到：指针`&vf`与`&vf.front()`. `vf`是一个包含指针`&vf.front()`（或获取它的方法）的结构。仅地址中没有任何信息`&vf.front()`可以让您找到`&vf`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:53:13.567

我唯一能想到的是极其不便携（同样疯狂）。每个向量分配一个连续的内存数组。任何分配函数都必须跟踪已分配的字节数，以便仅在分配地址的开头就可以取消分配它们。

AFAIK，C++ 标准没有指定如何保​​存这本书，因此，这取决于每个编译器。一种方法是在实际分配地址之前写一个计数 - 我相信这就是 Visual C++ 编译器所做的。（例如，如果在 0x104 分配，32 位计数可以存储在 0x100）。同样，您必须知道您的特定编译器是如何保存这本书的。

无论如何，关键是，一旦你这样做了，理论上一点指针算术和取消引用可以查找分配的大小（我当然假设你在这里仍然使用带有默认分配器的向量），并弄清楚如何许多浮点数实际上是仅使用 void 指针分配的。

下面是一个在 32 位调试模式下在 Visual Studio 中工作的示例：

```
#include <iostream>
#include <vector>

size_t bytes_allocated( void* p )
{
#ifndef _DEBUG
#error Doesn't work
#endif // _DEBUG
    size_t const offset = 12;
    size_t const counter_size = 4;
    size_t const total_offset = offset + counter_size;
    void* counter_address = ((char*)p)-total_offset;
    size_t* count = reinterpret_cast<size_t*>(counter_address);
    return *count;
}

int main(int argc, char* argv[])
{
    typedef float test_type;
    std::vector<test_type> v;
    v.push_back(23);
    v.push_back(23);
    v.push_back(23);
    size_t count = bytes_allocated(&v[0]);
    std::cout<<count<<" bytes allocated\n";
    std::cout<<count/sizeof(test_type)<<" items allocated\n";
    return 0;
} 
```

输出是：

```
12 bytes allocated
3 items allocated 
```**

# windows-phone - WP8 PhoneAccentBrush 不影响 TextBox 焦点边框

> ID：13371814
> 
> 赞同：2
> 
> 时间：2012-11-14T01:36:27.493
> 
> 标签：windows-phone, windows-phone-8

我试图让我的 WP7 应用程序在 WP8 上运行良好（通过将其编译为 WP8 应用程序）。

在我的应用程序中，我正在更改 PhoneAccentBrush 的颜色，它似乎仍然可以正常工作，但是当文本框处于焦点时，WP8 中的 TextBox 现在似乎在它周围显示了一个边框（这在 WP7 上没有发生在我身上）。此边框似乎总是使用系统的强调色，而不是像其他控件一样使用更改后的颜色。

知道这里发生了什么以及如何改变它吗？红色口音（如果这是用户选择的）真的与我的应用程序的颜色发生冲突！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:54:23.800

我将覆盖强调色称为 hack。我会避免设置强调色并为您的`textBlock`.

Blend 允许您复制默认模板并对其进行更改，从而使这变得非常容易。

右键单击窗格`textBox`中的，然后选择*->*。然后选择选项卡并选择，然后编辑边框画笔。根据需要保存和重复使用模板。`Objects and Timeline``Edit Template` *`Edit Current``States``Focused FocusState`*

 *我确实注意到`textBox`控件模板在 8 中发生了变化，现在定义了焦点状态边框画笔，尽管它默认为`PhoneAccentBrush`.*

# google-apps-script - 您如何获取在 Google 脚本中运行的脚本的 url？

> ID：13371815
> 
> 赞同：1
> 
> 时间：2012-11-14T01:36:36.993
> 
> 标签：google-apps-script

如果您使用 Google 脚本编辑器制作脚本，您如何获取您在 google 文档中的 google 脚本编辑器中运行的脚本的 url？（很抱歉没有大写 google 这个词）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:15:11.317

如果我理解您的问题，您可以选择“发布”->“部署为 Web 应用程序...”菜单项。从那里，弹出窗口将显示“部署为 Web 应用程序”，下方有一个包含 URL 的文本框。抓住它（或单击它下方的“最新代码”链接）。您不必对重新部署进行后续操作（如果您这样做，您将需要使用它在这样做后在弹出窗口中显示的 URL）

如果您之前没有部署它，您需要保存一个“版本”并部署它，如此[处](https://developers.google.com/apps-script/execution_web_apps)所述。执行此操作后，它将在弹出窗口中向您显示 URL，如上所述。如果你错过了，这个答案的第一部分适用。

# r - 添加组时 geom_bar 停止工作

> ID：13371816
> 
> 赞同：2
> 
> 时间：2012-11-14T01:36:54.053
> 
> 标签：r, ggplot2

使用这些数据：

```
library(ggplot2)
dd <- data.frame(id = c("A", "A", "B", "B"), prepost = c("pre", "post"), 
         value = 1:4) 
```

这个有效：

```
qplot(id, value, data = dd, fill = prepost, geom = "bar") 
```

但是，下一个给出了指示的错误消息。两者之间的唯一区别是`group = prepost`在命令末尾添加了；但是，因为我们已经写过`fill = prepost`它应该是默认组。

```
> qplot(id, value, data = dd, fill = prepost, geom = "bar", group = prepost)
 Error in pmin(y, 0) : object 'y' not found 
```

我们可以通过这样添加来修复最后一个`stat = "identity"`：

```
qplot(id, value, data = dd, fill = prepost, geom = "bar", group = prepost, 
      stat = "identity") 
```

我有两个问题：

(a) 为什么`qplot`当其他人工作时，给出错误信息的那个人不起作用？

(b) 如果我们使用连续`y`美学，`geom_bar`那么如果不指定会发生什么`stat`？从一开始`qplot`，它似乎在这种情况下表现得好像`stat="identity"`但在`group`指定`stat="identity"`与否的存在下揭示了差异。

（顺便说一句，这个问题似乎有些相关，尽管它的不同之处在于它似乎无法回答这个问题：[ggplot2、geom_bar 和 position="dodge" 的问题：stacked has correct y values, dodged does not](https://stackoverflow.com/questions/11604070/issue-with-ggplot2-geom-bar-and-position-dodge-stacked-has-correct-y-values)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:13:07.363

一个好问题！

我将回应[@joran之前的评论](https://stackoverflow.com/a/13370258/1385941)

> 我通常发现人们一旦学会停止使用 qplot 就不会对 ggplot 感到困惑

`qplot`可以使用重新创建您的通话

```
ggplot(dd) + geom_bar(aes(x = id, y = value, fill = prepost)) 
```

现在，如果您阅读帮助`geom_bar`它列出了它理解的美学，它`group`不是其中之一（所以当您这样做时，也许您不能期望它按您的意愿工作）

如果您阅读帮助，`group`您会发现它是一种美学，允许您覆盖所有离散变量的默认交互。

如果您`prepost`单独分组，则不会按离散`x`轴变量分组`id`，默认值也将包括在内，

所以

```
ggplot(dd) + 
 geom_bar(aes(x=id, y = value, fill = prepost, group = interaction(id, prepost))) 
```

有效，但分组是完全多余的，因为这是默认设置。

如果您指定只是`prepost`或`id`作为您的分组，它会混淆`stat_bin`（处理数字以创建条形图值的基础方法。因此您需要`stat_identity`改用。

* * *

编辑：正如 OP 在下面的评论中所指出的，这与一个[已知问题](https://github.com/hadley/ggplot2/pull/648)有关，并将在下一个版本（或 github 上的当前开发版本）中给出更好的警告

从新闻

> *   `stat_bin`现在，当它与设置或映射的 y 值一起使用时会产生警告消息。以前，可以使用`stat_bin`和设置/映射 y 值；如果每组有一个 y 值，它将显示数据中的 y 值，而不是每组的病例数。这种用法已被弃用，并将在 ggplot2 的未来版本中删除。（温斯顿张。修复 #632）

# sql - Rails + Squeel 查询问题

> ID：13371820
> 
> 赞同：3
> 
> 时间：2012-11-14T01:37:23.160
> 
> 标签：sql, ruby-on-rails, ruby, squeel

完全坚持这一点，可以使用一些帮助！

我让用户输入某些偏好，然后根据这些偏好向每个用户显示一组结果。

用户与这些偏好之间存在 HABTM 关系：

用户.rb

```
has_many :userpreferences
has_many :preferences, through: :userpreferences 
```

首选项.rb

```
has_many :userpreferences
has_many :users, through: :userpreferences 
```

用户偏好.rb

```
belongs_to :user
belongs_to :preference 
```

现在，偏好有一个名为“标签”的属性，它列出了某些细节：即大、小、厚等。

我想根据他们的偏好（即基于他们选择的偏好的标签）显示每个用户项目。

现在我正在尝试：

```
current_user.preferences.all.each do |p|
        query = p.tags.split(' ')
            @items = Item.where{title.like_any query} 
```

现在，由于某种原因，这只查询标签的第一偏好。

例如，如果偏好 1 的标签是：["black", "leather", "suede"] 偏好 2 的标签是：["brown", "cloth"].......只有第一组正在作为查询传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:34:53.593

想通了 - 对于任何感兴趣的人来说，这与 Squeel 无关！

就像我在查询之前组织循环的方式一样。

**解决方案！**

```
query = []
      current_user.preferences.each do |p|

        query << p.tags.split(' ')
        end
            @items = Item.where{title.like_any query} 
```

# python - 如何在雪豹上安装 scipy、numpy 和 scikit-learn？

> ID：13371827
> 
> 赞同：3
> 
> 时间：2012-11-14T01:39:08.627
> 
> 标签：python, numpy, scipy, osx-snow-leopard, scikit-learn

我一直在尝试使用 python 2.7 在雪豹上安装 scipy、numpy 和 scikit-learn，但到目前为止还没有成功。

我能找到的只是我无法升级到的 Lion。我成功安装了 python 2.7、pip、virtualenv、virtualenvwrapper 和 numpy。但是当我尝试安装 scipy 时，我得到了这个错误。

```
/var/folders/KU/KUY52WxPExK-Pljd3M-eV++++TM/-Tmp-//cc3jPxg5.s:3149:junk `@GOTPCREL' after expression

/var/folders/KU/KUY52WxPExK-Pljd3M-eV++++TM/-Tmp-//cc3jPxg5.s:3149:`___dso_handle@GOTPCREL(%rip)' is not a valid base/index expression

/var/folders/KU/KUY52WxPExK-Pljd3M-eV++++TM/-Tmp-//cc3jPxg5.s:3150:`__ZStL8__ioinit(%rip)' is not a valid base/index expression

/var/folders/KU/KUY52WxPExK-Pljd3M-eV++++TM/-Tmp-//cc3jPxg5.s:3151:junk `@GOTPCREL' after expression

/var/folders/KU/KUY52WxPExK-Pljd3M-eV++++TM/-Tmp-//cc3jPxg5.s:3151:`__ZNSt8ios_base4InitD1Ev@GOTPCREL(%rip)' is not a valid base/index expression

/var/folders/KU/KUY52WxPExK-Pljd3M-eV++++TM/-Tmp-//cc3jPxg5.s:3155:bad register name `%rsp'

error: Command "c++ -fno-strict-aliasing -fno-common -dynamic -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -Iscipy/interpolate/src -I/Users/user/.virtualenvs/venv/lib/python2.7/site-packages/numpy/core/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c scipy/interpolate/src/_interpolate.cpp -o build/temp.macosx-10.6-intel-2.7/scipy/interpolate/src/_interpolate.o" failed with exit status 1 
```

我安装了 gcc 和 g++ 4.2，我想我发现它应该适用于我不知道如何安装的 gcc、g++ 4.0。

我应该怎么做才能在 Snow Leopard 上成功安装 scipy、numpy 和 scikit-learn？

非常感谢。

编辑：我`brew install python`用来安装 python 2.7.3，我在雪豹上安装了 Xcode 4.2。以上是我在尝试安装 scipy 时遇到的错误。

当我查看我的 /usr/bin 时，我只有 `g++, g++-4.2`

g++ 也是 4.2.1 版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:23:24.790

我也只安装了 Xcode 4.2，但设法在我的系统上找到了一个可以工作的 gcc-4.0。不知道它是如何到达那里的，但我想它是 Xcode 4.2 附带的。

因此，在安装旧版本的 Xcode 之前，您可能需要检查此位置是否有 gcc-4.0：

```
/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ 
```

我所做的就是运行这个：

```
export CC=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc-4.0
export CXX=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++-4.0
export ARCHFLAGS='-arch i386 -arch x86_64' 
```

...在安装 scipy 之前：

```
pip install scipy 
```

# php - 在 PHP 中使用带有 sqlsrv_query 函数的临时表不会产生任何结果

> ID：13371829
> 
> 赞同：4
> 
> 时间：2012-11-14T01:39:46.743
> 
> 标签：php, sql-server

我对 SQL Server 2005 有一个很长的查询，我试图找到在 PHP 中使用 sqlsrv_query 函数的结果集。这是我的示例查询。为简洁起见，我删除了 CASE 语句中的变量声明和 SET 语句以及大多数 WHEN 条件。

```
DECLARE @TotalTable TABLE (
    SourceName varchar(50),
        GrossRevenue float,
        TotalOrderCount int,
        FBAOrderCount int,
        PostageExpense float,
        MarketplaceFees float,
        PickupExpense float,
        COGS float,
        AvgOrder float
    );

INSERT @TotalTable(SourceName,GrossRevenue,TotalOrderCount,FBAOrderCount,PostageExpense,MarketplaceFees,PickupExpense,COGS,AvgOrder)
SELECT 
    cl.Name,
    SUM(oi.Price) + SUM(oi.NativeShippingFee),
    COUNT(*) AS 'Order Count',
    SUM(CASE WHEN o.ActualPostage = '0.00' THEN 1 ELSE 0 END) AS 'FBA Orders',
    SUM(o.ActualPostage) AS 'Postage Expense',
    CAST(SUM(CASE 
        WHEN o.ActualPostage = '0.00' AND mcd.VisibleName = 'Amazon US' THEN --FBA order on Amazon
            (pt.weight * @FBAWeightCost) + @FBAPickPackCost + (oi.Price * @AmzComm) + @AmzVcf
        ELSE 
            0
        END) AS DECIMAL(10,2)) AS 'Marketplace Fees',
    CASE
        WHEN cl.Name = 'Source - Monroe County Recycler' THEN 
            (@PickupMonroeCounty * @TimesToMonroeCounty) * @JohnPerMile
        ELSE
            0
    END AS 'Pickup Expense',
    CASE 
        WHEN cl.Name = 'Source - Monroe County Recycler' THEN 
            @TotalCostMonroeCounty
        ELSE 
            0
    END AS 'COGS',
    CAST(ROUND(SUM(oi.Price) / COUNT(*),2) AS DECIMAL(10,2)) AS 'Avg Order'
FROM 
    [Order] o
JOIN [OrderItem] oi ON oi.OrderId = o.Id
JOIN [InventoryItem] ii ON ii.Id = oi.InventoryItemId
JOIN [ProductsTraits] pt ON pt.ASIN = ii.ASIN
JOIN [Classifier] clr ON clr.InventoryItemId = ii.Id
JOIN [Classification] cl ON cl.Id = clr.ClassificationId
JOIN [MarketConfigurationData] mcd ON mcd.MarketHandle = o.MarketHandle
WHERE cl.Name LIKE 'Source - %' AND o.Status = '2'
GROUP BY cl.Name
ORDER BY SUM(oi.Price) + SUM(oi.NativeShippingFee) DESC

SELECT
    SourceName,
    GrossRevenue,
    TotalOrderCount,
    FBAOrderCount,
    PostageExpense,
    MarketplaceFees,
    COGS,
    PickupExpense,
    AvgOrder,
    GrossRevenue - PostageExpense - MarketplaceFees - COGS - PickupExpense AS 'Profit'
FROM @TotalTable
ORDER BY 'Profit' DESC 
```

此查询在 SQL Server Management Studio 中运行时按预期显示 19 行数据。但是，当通过这个 PHP 代码运行时，我没有得到任何结果。

```
$sSql = <<<EOD
THIS IS WHERE THAT LONG QUERY STRING GOES
EOD;

$oConn = connectDb(SERVER,USER,PASSWORD);
$result = sqlsrv_query($oConn,$sSql) or die(print_r(sqlsrv_errors(), true));
print_r(sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)); 
```

我已经确认通过此方法运行简单查询时可以显示测试结果，因此它与 PHP 如何将查询传递给 SQL 有关。

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-08T06:17:36.067

已经有一段时间了，但万一有人仍然遇到这个问题：您所要做的就是在存储过程的开头调用 SET NOCOUNT ON 。这将防止“受影响的行”消息被发送到客户端并被误认为是过程的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T02:05:21.283

如果它类似于`mysql_query()`，则不能使用 . 在单个字符串中执行多个查询`sqlsrv_query()`。请参阅此线程的最后一篇文章：http: [//sqlsrvphp.codeplex.com/discussions/35511](http://sqlsrvphp.codeplex.com/discussions/35511)

`sqlsrv_query()`因此，您应该首先尝试在三个不同的语句中执行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T17:34:02.263

写之前`set nocount on;` 喜欢

```
 SET NOCOUNT ON; DECLARE @TotalTable TABLE (
    SourceName varchar(50),
        GrossRevenue float,
        TotalOrderCount int,
        FBAOrderCount int,
        PostageExpense float,
        MarketplaceFees float,
        PickupExpense float,
        COGS float,
        AvgOrder float
    );

INSERT @TotalTable(SourceName,GrossRevenue,TotalOrderCount,FBAOrderCount,PostageExpense,MarketplaceFees,PickupExpense,COGS,AvgOrder)
SELECT 
    cl.Name,
    SUM(oi.Price) + SUM(oi.NativeShippingFee),
    COUNT(*) AS 'Order Count',
    SUM(CASE WHEN o.ActualPostage = '0.00' THEN 1 ELSE 0 END) AS 'FBA Orders',
    SUM(o.ActualPostage) AS 'Postage Expense',
    CAST(SUM(CASE 
        WHEN o.ActualPostage = '0.00' AND mcd.VisibleName = 'Amazon US' THEN --FBA order on Amazon
            (pt.weight * @FBAWeightCost) + @FBAPickPackCost + (oi.Price * @AmzComm) + @AmzVcf
        ELSE 
            0
        END) AS DECIMAL(10,2)) AS 'Marketplace Fees',
    CASE
        WHEN cl.Name = 'Source - Monroe County Recycler' THEN 
            (@PickupMonroeCounty * @TimesToMonroeCounty) * @JohnPerMile
        ELSE
            0
    END AS 'Pickup Expense',
    CASE 
        WHEN cl.Name = 'Source - Monroe County Recycler' THEN 
            @TotalCostMonroeCounty
        ELSE 
            0
    END AS 'COGS',
    CAST(ROUND(SUM(oi.Price) / COUNT(*),2) AS DECIMAL(10,2)) AS 'Avg Order'
FROM 
    [Order] o
JOIN [OrderItem] oi ON oi.OrderId = o.Id
JOIN [InventoryItem] ii ON ii.Id = oi.InventoryItemId
JOIN [ProductsTraits] pt ON pt.ASIN = ii.ASIN
JOIN [Classifier] clr ON clr.InventoryItemId = ii.Id
JOIN [Classification] cl ON cl.Id = clr.ClassificationId
JOIN [MarketConfigurationData] mcd ON mcd.MarketHandle = o.MarketHandle
WHERE cl.Name LIKE 'Source - %' AND o.Status = '2'
GROUP BY cl.Name
ORDER BY SUM(oi.Price) + SUM(oi.NativeShippingFee) DESC

SELECT
    SourceName,
    GrossRevenue,
    TotalOrderCount,
    FBAOrderCount,
    PostageExpense,
    MarketplaceFees,
    COGS,
    PickupExpense,
    AvgOrder,
    GrossRevenue - PostageExpense - MarketplaceFees - COGS - PickupExpense AS 'Profit'
FROM @TotalTable
ORDER BY 'Profit' DESC 
```

# wpf - 使用枚举值在 Combobox 中添加其他项目

> ID：13371832
> 
> 赞同：2
> 
> 时间：2012-11-14T01:40:02.237
> 
> 标签：wpf, mvvm

我正在使用 wpf 组合框来显示和选择枚举“BloodGroup” BloodGroup 枚举定义如下。

```
 public enum BloodGroup : byte {
    A_Positive,
    A_Negative,
    B_Positive,
    B_Negative,
    AB_Positive,
    AB_Negative,
    O_Positive,
    O_Negative,
    } 
```

这是我用来用上面的枚举项填充组合框的 wpf 组合框代码。

```
<UserControl.Resources>
    <ObjectDataProvider x:Key="BloodGroupEnum" MethodName="GetValues" ObjectType="{x:Type sys:Enum}">
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="enums:BloodGroup" />
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
</UserControl.Resources>

<ComboBox x:Name="BloodGroupFilter" ItemsSource="{Binding Source={StaticResource BloodGroupEnum}}" 
              cal:Message.Attach = "[Event SelectionChanged] = [Action BloodGroupFilterChanged(BloodGroupFilter)]"/> 
```

我正在使用上面的组合框来过滤数据网格的行。要取消过滤器，我需要在组合框中显示**“取消过滤器”**的附加项目。如何在上述组合框中添加一个用于取消过滤器的附加项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:10:53.627

您可以将不同的集合与`CompositeCollection`：

```
<ComboBox x:Name="BloodGroupFilter">
    <ComboBox.ItemsSource>
        <CompositeCollection>
            <CollectionContainer Collection="{Binding Source={StaticResource BloodGroupEnum}}"/>
            <sys:String>Cancel Filter</sys:String>
        </CompositeCollection>
    </ComboBox.ItemsSource>
</ComboBox> 
```

# c# - FindWindow 在当前上下文中不存在

> ID：13371836
> 
> 赞同：2
> 
> 时间：2012-11-14T01:40:18.883
> 
> 标签：c#

我是构建小型示例应用程序的 WindowsForms 新手。

我正在尝试构建一个在记事本窗口中键入文本的应用程序，并且在`FindWindow does not exist in current context`从 dll 导入它时出现错误。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void MenuAbout_Click(object sender, System.EventArgs e)
        {
            Form1 frm = new Form1();
            frm.ShowDialog();
        }

        private void Launch_Click(object sender, System.EventArgs e)
        {

            // find window handle of Notepad
            IntPtr handle = FindWindow("Notepad", "Untitled - Notepad");
            if (!handle.Equals(IntPtr.Zero))
            {
                // activate Notepad window
                if (SetForegroundWindow(handle))
                {
                    // send "Hello World!"
                    SendKeys.Send("Hello World!");
                    // send key "Tab"
                    SendKeys.Send("{TAB}");
                    // send key "Enter"
                    SendKeys.Send("{ENTER}");
                }
            }
            //Process.Start(@"D:\\32-Bit Programs\\StarCraft II\\Support\\SC2Switcher.exe");
        }

        [DllImport("user32.dll", EntryPoint = "FindWindow")]
        private extern IntPtr FindWindow(string lp1, string lp2);

        [DllImport("user32.dll", ExactSpelling = true, CharSet = CharSet.Auto)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private extern bool SetForegroundWindow(IntPtr hWnd);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T01:47:08.917

您导入的方法[也必须是静态](http://msdn.microsoft.com/en-us/library/e59b22c5.aspx)的：

```
 [DllImport("user32.dll", EntryPoint = "FindWindow")]
    private static extern IntPtr FindWindow(string lp1, string lp2);

    [DllImport("user32.dll", ExactSpelling = true, CharSet = CharSet.Auto)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool SetForegroundWindow(IntPtr hWnd); 
```

# android - Xtify 入门示例不起作用

> ID：13371837
> 
> 赞同：1
> 
> 时间：2012-11-14T01:40:22.073
> 
> 标签：android, xtify

我正在一个使用[Xtify](http://www.xtify.com/)的项目中工作，并且正在尝试使用[入门](http://developer.xtify.com/display/sdk/Getting+Started+with+Google+Cloud+Messaging#GettingStartedwithGoogleCloudMessaging-CreateaNewGoogleAPIProjectwithGCM)示例，但是我遇到了问题。该示例不起作用。我在 LogCat 中得到了这个：**打开跟踪文件时出错：没有这样的文件或目录（2）**

这是我的 AndroidManifiest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.projects.xtifyproject"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission android:name="com.projects.xtifyproject.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <uses-permission android:name="com.projects.xtifyproject.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <provider
            android:name="com.xtify.sdk.db.Provider"
            android:authorities="com.projects.xtifyproject.XTIFY_PROVIDER"
            android:exported="false" />
        <receiver android:name="com.xtify.sdk.c2dm.C2DMBroadcastReceiver" >
            <intent-filter android:permission="com.google.android.c2dm.permission.SEND" >
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="com.projects.xtifyproject" />
            </intent-filter>
            <intent-filter android:permission="com.google.android.c2dm.permission.SEND" >
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.projects.xtifyproject" />
            </intent-filter>
        </receiver>
        <receiver android:name="com.xtify.sdk.NotifActionReceiver" />
        <receiver android:name="com.xtify.sdk.wi.AlarmReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

        <service android:name="com.xtify.sdk.location.LocationUpdateService" />
        <service android:name="com.xtify.sdk.c2dm.C2DMIntentService" />
        <service android:name="com.xtify.sdk.alarm.MetricsIntentService" />
        <service android:name="com.xtify.sdk.alarm.TagIntentService" />
        <service android:name="com.xtify.sdk.alarm.RegistrationIntentService" />
        <service android:name="com.xtify.sdk.alarm.LocationIntentService" />

    </application>
</manifest> 
```

还有我的 MainActivity.xml：

```
package com.projects.xtifyproject;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import com.projects.xtifyproject.R;
import com.xtify.sdk.api.XtifySDK;

public class MainActivity extends Activity {
    final String XTIFY_APP_KEY = "aaaa0505-aa00-000a-0a0a-000000a0a000";
    final String SENDER_ID = "123412341234"; // This is the Google Project ID

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        XtifySDK.start(getApplicationContext(), XTIFY_APP_KEY, SENDER_ID);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

最后，我的 AVD：

![在此处输入图像描述](../Images/2641d2d345a83fc0ffd8b6a6220fc513.png)

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:18:39.330

Xtify SDK 使用 Google GCM 服务。我建议使用实际设备进行测试。如果它不可用，您可以使用 Google API 级别 8 或更高级别创建模拟器，当您运行模拟器时，请确保转到设置屏幕并添加有效的 google 帐户（GCM 服务需要才能在设备上工作）。

您还可以查看[Xtify Notifier](http://developer.xtify.com/display/sdk/Advanced+Integration+Guide+for+Google+Cloud+Messaging#AdvancedIntegrationGuideforGoogleCloudMessaging-HandlingEventsandNotificationData)，它具有 onError 方法，当 SDK 中发生错误时将调用该方法。

# java - 制作一个 concat 运算符以将 char 数组添加到字符串。打印字符串对象的引用变量

> ID：13371841
> 
> 赞同：1
> 
> 时间：2012-11-14T01:41:23.077
> 
> 标签：java, arrays

到目前为止，如果我尝试使用 concat 运算符，我会收到此错误 Tester.java:14: cannot find symbol symbol : method concat(MyString) location: class MyString System.out.println(hello.concat(goodbye)); // 打印“hellogoodbye”

当我尝试打印 MyString 的“hello”对象时，我得到 MyString@558ee9d6 我觉得它离工作太近了。

```
public class MyString

{
     private char[] charString;
     private String oneString;

      public  MyString(String string) 
      {
        this.oneString = string;

      }

//second constructor for overloading
    public MyString(char[] s) 
    {

        this.charString = s;
        this.oneString = charString.toString();
    }

//methods
    public String toString( char [] s)
    {
        return new String(s);
    }

    public char charAt(int i) {

        char [] temp = new char[oneString.length()];
        for ( int j = 0; j < oneString.length() ;  j++)
        temp[j] = oneString.charAt(i);
        return temp[i];
    }

    public String concat ( char[] s)
    {
        s.toString();
        String result = oneString + s;
        return result;
    }

    public String concat ( String s)
    {
        String result = oneString + s;
        return result;
    }

} 
```

public class Tester { public static void main (String[] args)

```
 {
    MyString hello = new MyString("hello");
    System.out.println(hello);  // right now this prints MyString@558ee9d6
    System.out.println(hello.charAt(0));    // works, prints 'h'
    char[] arr = {'g','o','o','d','b','y','e' };
    MyString goodbye = new MyString(arr);
   // System.out.println(hello.concat(goodbye)); // i can't get this line to work
    System.out.println(hello.equals(goodbye)); // works, prints false
    System.out.println(hello.equals(hello));  //works, prints true
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:43:45.817

`charString.toString()`将为您提供对象的`String`表示形式`char[]`，它不会将您`char[]`转换为`String`.

如果您想要/需要该`oneString`属性包含您的`String`表示形式`charString`，那么您可以`String`使用您的 char 数组创建一个：

```
this.oneString = new String(charString); 
```

另外，这条线

```
System.out.println(hello); 
```

将打印`String`您的对象的表示。您需要在类中覆盖类中的`public String toString()`方法：`Object``MyString`

```
@Override
public String toString() {
    return this.oneString; //or similar
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:43:47.910

您正在尝试打印 Object ：

```
System.out.println(hello);  // right now this prints MyString@558ee9d6 
```

在这种情况下，您的 MyString 类

将 get 方法设为变量 oneString。

```
public String getOneString() {return this.oneString;} 
```

然后打电话

```
System.out.println(hello.getOneString()); 
```

另一个问题

```
System.out.println(hello.concat(goodbye)); 
```

你 concat 方法接收一个字符串而不是一个 MyString 类

你可能想这样做

```
System.out.println(hello.concat(goodbye.getOneString())); 
```

或者

```
public String concat ( MyString myS)
    {
        String s = myS.getOneString();
        String result = oneString + s;
        return result;
    } 
```

最后结果：

```
public class Tester { public static void main (String[] args)

    {
    MyString hello = new MyString("hello");
    System.out.println(hello.getOneString());
    System.out.println(hello.getOneString().charAt(0)); 
    char[] arr = {'g','o','o','d','b','y','e' };
    MyString goodbye = new MyString(arr);
    System.out.println(hello.concat(goodbye.getOneString()));
    System.out.println(hello.equals(goodbye)); // works, prints false
    System.out.println(hello.equals(hello));  //works, prints true
    }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:48:37.210

我会说现在，您正在尝试将字符数组添加到字符串中。调用 s.toString() 不会使 char[] 成为字符串。这不会像你拥有的那样工作。尝试

```
result = oneString + new String(s); 
```

# python - 将值添加到二进制字符串

> ID：13371843
> 
> 赞同：0
> 
> 时间：2012-11-14T01:41:39.020
> 
> 标签：python, string, binary, append

我想将十六进制值添加到二进制字符串中，以便最终得到可以传输的二进制字符串。我想要的是：（ `StringToAppend = "5ce7e615ff0000000000010202041f0140009e005d006404084c5ce82215ff1d02000000010202041f013b0097005c005e04777c"`我有这个未十六进制的形式，并想将它附加到一个字符串`StatusStr = chr(0)` 中我该怎么做？？？这就是我所拥有的：

```
>>> not_macs_buffer=     unhexlify("5ce7e615ff0000000000010202041f0140009e005d006404084c5ce82215ff1d02000000010202041    f013b0097005c005e04777c")
>>> StatusStr = chr(0)
>>> for i in xrange(0,len(not_macs_buffer)):
...     StatusStr +=chr(not_macs_buffer[i])
... 
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
TypeError: an integer is required
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:49:43.233

你向/从什么传输字符串？它必须是十六进制的吗？

问题似乎是您正在将十六进制字符串转换为二进制字符串，然后在您的循环中尝试使用 chr() 将字符串字符转换为字符。这失败了，因为 chr() 只接受一个表示 256 值 ASCII 代码的整数值，而不是一个字符串。

要解决您的问题，只需更改`StatusStr +=chr(not_macs_buffer[i])`为：

```
StatusStr += not_macs_buffer[i] 
```

当然，您可以完全放弃循环。

```
StatusStr = chr(0) + not_macs_buffer 
```

如果您确实需要将整数列表转换为字符串，则可以使用列表推导然后加入列表。（我不会举例，因为它不相关）

**编辑：**

如果要将 null 值添加到原始十六进制字符串，可以执行以下操作：

```
StringToAppend = '5ce7e6' # ... snip the real value
StatusStr = hexlify(chr(0)) + StringToAppend 
# or
StatusStr = hexlify('\x00') + StringToAppend 
# or
StatusStr = '0000' + StringToAppend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:39:30.647

好吧，谢谢大家，但我实际上最终得到了我想要的东西，是：

```
>>> not_macs_buffer=         unhexlify("5ce7e615ff0000000000010202041f0140009e005d006404084c5ce82215ff1d02000000010202041      f013b0097005c005e04777c")
>>> StatusStr = chr(0)
>>> for i in xrange(0,len(not_macs_buffer)):
...     StatusStr +=chr(ord(not_macs_buffer[i])) 
```

# php - PHP，如何检索特定数字？

> ID：13371844
> 
> 赞同：-1
> 
> 时间：2012-11-14T01:41:41.257
> 
> 标签：php

我需要从 URL 地址中检索 iTunes 应用程序 ID。

[https://itunes.apple.com/us/app/angry-birds-star-wars/id557137623?mt=8](https://itunes.apple.com/us/app/angry-birds-star-wars/id557137623?mt=8)

我使用了 strpos()，但是这个没有用。

如何从该地址获取 id 后的数字？

$url = 'https://itunes.apple.com/us/app/angry-birds-star-wars/id557137623?mt=8';

$结果 = '557137623'

结果将是这样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:48:59.137

```
$url = 'https://itunes.apple.com/us/app/angry-birds-star-wars/id557137623?mt=8';
preg_match("~id(\d+)~", $url, $matches);
$result = $matches[1];
echo $result; //557137623 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:47:42.867

```
// Find where the / is and add 2 for the word "id"
$pos = strrpos($url, "/") + 2; // Note that it's "strrpos" not "strpos"

// Find the question mark at the end
$pos2 = strpos($url, "?");

$id = substr($url, $pos, $pos2 - $pos); 
```

当然，这是假设您的 URL 始终具有这种形式。

# python - 重用粘贴配置条目

> ID：13371846
> 
> 赞同：0
> 
> 时间：2012-11-14T01:42:08.873
> 
> 标签：python, pyramid

我有以下 Pyramid .ini 文件：

```
[DEFAULT]
redis.host = localhost
redis.port = 6379
redis.db = 0

[app:main]
...

# beaker session
session.type = redis
session.url = localhost:6379 
```

在该`app:main`部分中`session.url`，我想使用在`DEFAULT`部分`redis.host`和下定义的内容`redis.port`。

据我了解，`DEFAULT`section 下的所有内容都是全局的，并传递给其他部分。但是，如果我想重用一个设置`DEFAULT`并在其他部分下为其分配不同的名称，我该怎么做？

我正在研究使用 .cfg 文件引用构建中的部分条目的相同方式`${<section name>:<entry>}`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:56:44.543

`session.url = %(redis.host)s:%(redis.port)s`

应该做的伎俩。

# iphone - iphone app / xcode中的视觉资产

> ID：13371851
> 
> 赞同：-1
> 
> 时间：2012-11-14T01:42:41.947
> 
> 标签：iphone, objective-c, ios, xcode

我是 ios dev 的新手，想知道在 xcode 中管理集成到应用程序中的视觉资产的最佳实践是什么。人们是否拥有每个外形尺寸的每个 UI 的副本，包括方向？以编程方式调整大小？其他方法？我正在以编程方式完成所有 UI，但不知道管理资产的最佳方式是什么，即实际的 PNG 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:48:39.290

只要有可能，我喜欢使用可调整大小的图像。UIImage 有一个方法`resizableImageWithCapInsets:resizingMode:`，它采用压缩图像并将中心行、列或单个像素拉伸到你想要的宽度或高度。这就是 iOS 创建许多按钮的方式，包括在操作表中看到的按钮。

如果您需要为方向设置单独的资产，我建议在文件名上使用后缀。所以你可能有 Button-Portrait.png 和 Button-Landscape.png。您还可以在 UIImage 上添加一个类别，该类别采用图像名称、[检测当前方向](https://stackoverflow.com/a/9856895/472768)并获取实际图像文件。

# ffmpeg - ffmpeg image2 屏幕截图有噪声线

> ID：13371852
> 
> 赞同：0
> 
> 时间：2012-11-14T01:42:44.100
> 
> 标签：ffmpeg

我正在尝试从我的索尼高清摄像机的 MTS 文件中捕捉静止图像。

这个命令：

```
ffmpeg -vframes 1 -i 00035.MTS -s 1440x1080  -f image2   output_single_frame2.jpg 
```

生成这张图片[http://i.minus.com/iYXQ4S7F1Mwq2.jpg](http://i.minus.com/iYXQ4S7F1Mwq2.jpg)有很多线条。当我在我拥有的 flv 文件上尝试它时，不会发生这种情况。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:00:38.367

事实证明，某些框架自然有这些线条。我收集了 300 帧，第 300 帧看起来很正常。

# android - Android- 联系方式 UI 布局

> ID：13371864
> 
> 赞同：3
> 
> 时间：2012-11-14T01:44:05.270
> 
> 标签：android, layout, user-interface, android-xml

我正在构建一个联系人应用程序，并想知道在使用列表视图、滚动视图等方面构建类似下图的最佳方式（杰西卡不是太破旧......）。

理想情况下，我的所有数据都在 sql 数据库中，因此游标适配器不会成为问题。最好有一个带有分隔符的列表视图，还是一个添加视图的滚动视图。由于所有联系人都不会拥有完全相同的信息，我们能做些什么来做到这一点？任何想法将不胜感激。

![在此处输入图像描述](../Images/5881bad0c08899b9509e066c25175b9f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:41:12.263

如果您打算在项目中包含交互式元素（例如上面屏幕截图中的消息按钮），我建议您使用 ScrollView。实际上，由于您可能没有那么多项目，我会再次推荐一个 ScrollView。然后，只需根据您拥有的联系人信息动态添加一组布局即可。

# android - 在 Android 中更改某些系统文件值失败

> ID：13371865
> 
> 赞同：1
> 
> 时间：2012-11-14T01:44:09.980
> 
> 标签：android, file, usb, system, root

我正在尝试更改一些 sys 值，但似乎并没有取得太大的成功。

就我而言，我正在尝试更改文件夹中文件的值

“/sys/devices/platform/omap/musb-omap2430/musb-hdrc/usb1/1-0:1.0”

例如，当前值为 09 的文件 bInterfaceClass

我的尝试：（在 shell 中，以 root 身份）

```
chmod 777 bInterfaceClass
echo 07 >> bInterfaceClass 
```

我没有收到错误，但是在查找值时

```
cat bInterfaceClass 
```

还是09

现在在 Root Explorer 中查找这个文件，我可以看到文件的最后修改日期已经改变，所以我的猜测是：这样的 sys 文件的值一旦改变就会被重置。任何人都可以对这个问题有更多的了解吗？如何更改值？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:06:19.893

**这是骇客，您已被警告！:)**

此处的说明通常在 Internet 上找不到，但对于测试接口和功能非常有用，而无需显着更改系统代码。这些可用于解决任何在没有警告或原因的情况下被覆盖的内容。使用这些，您有时可以在测试解决方案时根据使用情况`dmesg` `ps`了解`logcat`究竟是什么导致了这么多问题。

很可能在内核中，像这样的东西被覆盖，可能是系统服务或内部脚本。质量烫发修复将在内核的 /drivers 文件夹中。我只能假设这是在 Beagle 或 Panda Board 上，也许是 Moto 设备。如果是 Beagle 或 Panda，这会更容易（耶 Linaro，AOSP 支持，大社区！）。

如果这不需要保持 USB 处于打开状态，而只需存在所需的数字，您可以尝试以下操作：

打开您的 boot.img 并打开他的 Root Disk/Ramdisk，最后打开您的 init..rc 文件之一。您可以使用此工具：**https** ://github.com/dsixda/Android-Kitchen - 需要 Linux 和一些软件包，很棒的工具！

如果幸运的话，这将作为`init.rc`文件的一部分（您可以在系统中签入）或`/system/etc`作为类主脚本或核心脚本之一出现在文件夹中。

如果您在以下位置查找它，您可以声明您想要的值：

在初始化

**init.platform.rc**的部分，看看在哪里

**/sys/devices/platform/omap/musb-omap2430/musb-hdrc/usb1/1-0:1.0**

被初始化，

然后在 .rc 文件中

```
chmod 777 /sys/devices/platform/omap/musb-omap2430/musb-hdrc/usb1/1-0:1.0/bInterfaceClass
write /sys/devices/platform/omap/musb-omap2430/musb-hdrc/usb1/1-0:1.0/bInterfaceClass 07 
```

然后，如果这样做并对其进行初始化并不能单独使用，请打开正常的 init.rc 并添加

```
on nonencrypted 
write /sys/devices/platform/omap/musb-omap2430/musb-hdrc/usb1/1-0:1.0/bInterfaceClass 07 
```

并且

```
on property:vold.decrypt=trigger_shutdown_framework
write /sys/devices/platform/omap/musb-omap2430/musb-hdrc/usb1/1-0:1.0/bInterfaceClass 07 
```

因为这两个属性或函数将在 init 结束时覆盖您以再次设置该属性（您之前已经给它 777 特权作为 on init 的一部分）

如果你想要一些你可以在不刷新新的 Boot.img 文件的情况下玩的东西：

使用以下命令将 system/bin 中的脚本声明为 init.platform.rc 中的服务（不要担心大多数每个 .rc 文件都是链接并相互包含的）：

```
service usbchanger /system/bin/sh /system/bin/usbchanger.sh
      class late_start
      user root   
      disabled 
```

然后在正常的init.rc中

```
on nonencrypted 
     start usbchanger

on property:vold.decrypt=trigger_shutdown_framework
     start usbchanger 
```

然后，您的脚本将成为一个持续运行的服务（您可以对二进制文件执行相同的操作）。在进行调试和测试新功能/修复时，这完全是一个理想的特性，因为您可以在系统打开时更改值和运行命令，并且不需要您在每次更改后重新刷新。但是，对于生产，您不应该这样做。它的坏代码通常在真正的时候这样做，它应该在`kernel`或核心中。

# ruby-on-rails - mongoid 无法在 Rails 中推动 HABTM 关系

> ID：13371868
> 
> 赞同：1
> 
> 时间：2012-11-14T01:44:54.933
> 
> 标签：ruby-on-rails, mongoid

我在这个问题上停留了几天..请帮助，在此先感谢。

这是一个 mongoid 上的 rails 项目，项目中有 2 个模型，一个是 User，另一个是 CustomSearchEngine：

```
class User
  include Mongoid::Document
  # Include default devise modules. Others available are:
  ......
  # keep the CSEs
  has_and_belongs_to_many :keeped_custom_search_engines, class_name: 'CustomSearchEngine', inverse_of: :consumers

  # create or fork the CSEs
  has_many :custom_search_engines, inverse_of: :author, dependent: :destroy

  # Index
  index({username: 1}, {unique: true, name: 'user_username'})
  index({email: 1}, {unique: true, name: 'user_email'})

  # Massive assignment for User.new
  attr_accessible :email, :username, :agreement, :password, :password_confirmation
  attr_accessor :agreement, :password_confirmation
  validates :password_confirmation, presence: true
  validates :agreement, presence: true
end

class CustomSearchEngine
  include Mongoid::Document
  include Mongoid::Timestamps
  paginates_per 20
 ...
  belongs_to :author, class_name: 'User', inverse_of: :custom_search_engines
  has_and_belongs_to_many :consumers, class_name: 'User', inverse_of: :keeped_custom_search_engines
  belongs_to :node

  # Index
  index({author_id: 1}, {name: 'cse_author_id'})
  index({node_id: 1}, {name: 'cse_node_id'})

  # validations
  validates :status, presence: true, inclusion: {in: ['draft', 'publish']}
  validates :author_id, presence: true
  validates :node_id, presence: true

  scope :recent, ->(status) { where(status: status).desc(:created_at) }
  ...
end 
```

在我的 CustomSearchEngine 控制器中：

```
current_user.keeped_custom_search_engines.push(@custom_search_engine) 
```

然后我去我的 mongodb，我只看到更新的用户文档：

```
keeped_custom_search_engine_ids: ["50a208092061c770190000df"] 
```

但自定义搜索引擎文档没有改变：

```
consumer_ids: [] 
```

我得到一个错误： `@messages={:consumers=>["is invalid"]}`

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T02:14:37.907

我认为这个问题是你在消费者实例保存到数据库之前推送消费者。

试试这样的代码：

```
 def create
@team = Team.new(params[:team])
@team.own = current_user
respond_to do |format|
  if @team.save
    current_user.push_join_teams(@team.id)
    format.html { redirect_to @team, notice: 'Team was successfully created.' }
    format.json { render json: @team, status: :created, location: @team }
  else
    format.html { render action: "new" }
    format.json { render json: @team.errors, status: :unprocessable_entity }
  end
end
end

#user.rb
def push_join_teams(tid)
 return false if self.join_team_ids.include?(tid)
 self.push(:join_team_ids,tid)
end 
```

# c - 如何正确使用curses/调试一个简单的c程序

> ID：13371869
> 
> 赞同：0
> 
> 时间：2012-11-14T01:45:12.500
> 
> 标签：c, ncurses, curses

我正在尝试学习如何使用诅咒来处理我即将完成的任务的输入。我得到了一个名为 test-curses.c 的 ac 程序，其中包含以下代码......

```
#include <curses.h>
#include <stdio.h>
#include <stdlib.h>

// brief example of using curses.
// man 3 ncurses for introductory man page, and man 3 function name
// for more information on that function.

void setup_curses();
void unset_curses();

int main()
{

 setup_curses();

 move(5, 10);
 printw("Press any key to start.");
 refresh();
 int c = getch();

 nodelay(stdscr, true);
 erase();

 move(5, 10);
 printw("Press arrow keys, 'q' to quit.");
 refresh();

 c = getch();

 while(1)
 {
   if (c != ERR)
    {
  // in asn3, won't need to do any printing to screen.
  // instead, will rotate figure on left or right arrow keys, and
  // initiate thrust when space bar is pressed.
  erase();
  move(5,10);
  printw("Press arrow keys, 'q' to quit.");
  move(6, 10);
  if (c == KEY_DOWN)
    printw("down key pressed");
  else if (c == KEY_LEFT)
    printw("left key pressed");
  else if (c == KEY_RIGHT) 
    printw("right key pressed");
  else if (c == KEY_UP)
    printw("up key pressed");
  else if (c == 'q')
    break;
  refresh();

   }

   c = getch();

}

// must do this or else Terminal will be unusable
// (if there are problems, it's not that big a deal though ... just
// close the Terminal, and open a new one.)
unset_curses();

exit(EXIT_SUCCESS);
}

void setup_curses()
{
  // use return values.  see man pages.  likely just useful for error
  // checking (NULL or non-NULL, at least for init_scr)
  initscr();
  cbreak();
  noecho();
  // needed for cursor keys (even though says keypad)
  keypad(stdscr, true);
}

void unset_curses()
{
  keypad(stdscr, false);
  nodelay(stdscr, false);
  nocbreak();
  echo();
  endwin();
} 
```

我通过在终端 gcc -std=c99 -Wall -o tester test-curses.c -lcurses ./tester 中键入以下内容来运行该程序

一切都很好，花花公子。但是，当我修改代码以在草图板中移动简单的线条图以响应箭头键时，我遇到了重大错误。这是我修改后的程序。

```
#include <curses.h>
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>

// brief example of using curses.
// man 3 ncurses for introductory man page, and man 3 function name
// for more information on that function.
typedef struct {
  long x, y, x1, y1;
  long deltax, deltay, deltax1, deltay1;
 } line_item;

line_item *line;
FILE * popen(const char*, const char*);
int pclose(FILE*);
void setup_curses();
void unset_curses();
void draw(line_item * line, FILE * executable);
void translate(line_item * line, double trans_x, double trans_y);

int main()
{
  FILE * executable;
  executable = popen("java -jar Sketchpad.jar", "w");
  assert( executable != NULL);

  setup_curses();

  move(5, 10);
  printw("Press any key to start.");
  refresh();
  int c = getch();

  nodelay(stdscr, true);
  erase();

  move(5, 10);
  printw("Press arrow keys, 'q' to quit.");
  refresh();

  c = getch();

  while(1)
  {
    if (c != ERR)
    {
      // in asn3, won't need to do any printing to screen.
      // instead, will rotate figure on left or right arrow keys, and
      // initiate thrust when space bar is pressed.
      erase();
      move(5,10);
      printw("Press arrow keys, 'q' to quit.");
      move(6, 10);
      if (c == KEY_DOWN){
        printw("down key pressed");
        translate(line, 0, -10);
        draw(line, executable);
      }
      else if (c == KEY_LEFT){
        printw("left key pressed");
        translate(line, -10, 0);
        draw(line, executable);
      }
      else if (c == KEY_RIGHT){ 
        printw("right key pressed");
        translate(line, 10, 0); 
        draw(line, executable); 
      }
      else if (c == KEY_UP){
        printw("up key pressed");
        translate(line, 10, 0); 
        draw(line, executable); 
      }
      else if (c == 'q')
        break;
      refresh();

    } 

    c = getch();
    pclose(executable);
  }

  // must do this or else Terminal will be unusable
  // (if there are problems, it's not that big a deal though ... just
  // close the Terminal, and open a new one.)
  unset_curses();

  exit(EXIT_SUCCESS);
}

void draw(line_item * line, FILE * executable)
{
  fprintf(executable, "eraseSegment %ld %ld %ld %ld", line->x, line->y, line->x1, line->y1);
  fprintf(executable, "drawSegment %ld %ld %ld %ld", line->deltax, line->deltay, line->deltax1, line->deltay1);
  fflush(executable);
}
void translate(line_item * line, double trans_x, double trans_y)
{
  line->x = line->deltax;
  line->y = line->deltay;
  line->x1 = line->deltax1;
  line->y1 = line->deltay1;

  line->deltax = line->x + trans_x;
  line->deltax1 = line->x1 + trans_x;
  line->deltay = line->y + trans_y;
  line->deltay1 = line->y1 + trans_y;
}

void setup_curses()
{
  // use return values.  see man pages.  likely just useful for error
  // checking (NULL or non-NULL, at least for init_scr)
  initscr();
  cbreak();
  noecho();
  // needed for cursor keys (even though says keypad)
  keypad(stdscr, true);
}

void unset_curses()
{
  keypad(stdscr, false);
  nodelay(stdscr, false);
  nocbreak();
  echo();
  endwin();
} 
```

当前目录包含这两个程序和Sketchpad.jar。当我运行第二个时我得到的错误看起来像这样......

```
ses.so.5.9
          7f100a23a000-7f100a23b000 r--p 0001f000 08:01 2882225                    /lib/x86_64-linux-gnu/libncurses.so.5.9
          7f100a23b000-7f100a23c000 rw-p 00020000 08:01 2882225                    /lib/x86_64-linux-gnu/libncurses.so.5.9
          7f100a23c000-7f100a25e000 r-xp 00000000 08:01 2877975                    /lib/x86_64-linux-gnu/ld-2.15.so
          7f100a428000-7f100a42c000 rw-p 00000000 00:00 0 
          7f100a45b000-7f100a45e000 rw-p 00000000 00:00 0 
          7f100a45e000-7f100a45f000 r--p 00022000 08:01 2877975                    /lib/x86_64-linux-gnu/ld-2.15.so
          7f100a45f000-7f100a461000 rw-p 00023000 08:01 2877975                    /lib/x86_64-linux-gnu/ld-2.15.so
          7ffffa0be000-7ffffa0df000 rw-p 00000000 00:00 0                          [stack]
         7ffffa19e000-7ffffa19f000 r-xp 00000000 00:00 0                          [vdso]
    ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
       Aborted (core dumped) 
```

我不明白这告诉我什么，以及文件之间的差异导致了这种混乱。请帮忙。

我应该告诉你一些关于以下发送到画板的命令 drawSegment xy x1 y1 在画板窗口中从 (x,y) -> (x1, y1) 绘制一条线 eraseSegment xy x1 y1 擦除该线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:51:21.730

对于初学者来说，你的线指针永远不会指向任何真实的东西。这可能会导致核心转储。

您可以做的最小编辑修复：-

```
line_item _line;
line_item *line; 
```

然后在main中，在循环之前执行：-

```
line = &_line; 
```

# ruby - ruby，试图返回多维数组的子集

> ID：13371870
> 
> 赞同：2
> 
> 时间：2012-11-14T01:45:59.540
> 
> 标签：ruby, multidimensional-array

**我试图返回一个多维数组的子集，试图保持维度的确切结构，但是..发生了一些奇怪的事情......请看一下：**

```
space = [  [ [1],[2],[3] ],  [ [4],[5],[6] ],  [ [70],[8],[9] ]  ]

space_subset = space[(1..2)].collect { |y| y[1] }

=> [[5], [8]] 
```

让我们分解一下：

```
space[(1..2)]

=> [  [ [4], [5], [6] ], [ [70], [8], [9] ]  ] 
```

所以现在我可以确定我在调用什么 .collect on

实际上：

```
[  [ [4], [5], [6] ], [ [70], [8], [9] ]  ].collect { |y| y[1] }

=> [[5], [8]] 
```

然后......（对于真正的问题）......

如果现在 space_subset 是 [[5], [8]]

我尝试像这样修改它：

```
space_subset[1].delete (8) 
```

正如预期的那样，我得到：`=> [[5], []]`

**为什么这同时修改了我*从中提取*子集数组的原始“空间”数组？**

如果现在我这样做：

```
space

=> [[[1], [2], [3]], [[4], [5], [6]], [[70], [], [9]]] 
```

缺少“8”，与我从 space_subset 中删除的值相同

我正在查看 ruby​​ Array api 文档，从我正在阅读的内容来看，我的代码应该可以毫无意外地工作......但是......仍然......

你能帮我弄清楚我做错了什么，或者这里有什么误解吗？

感谢所有花时间回答的人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T02:11:15.883

请记住，在 Ruby 中，不仅一切都是对象，而且变量始终是对对象的*引用*。当您得到的是对原始单元素数组的引用时，您期望在此处制作副本。

这就是为什么在许多对象上有`clone`或方法。`dup`如果您打算在使用之前对其进行修改，但又不想破坏原件，请制作一个副本并使用它。

一种简单的方法是避免使用就地修饰符 like`delete`而是使用一个 like `reject`：

```
space_subset[1] = space_subset[1].reject { |v| v == 8 } 
```

这将删除单个元素并返回原始数组的*副本*减去该元素。不过，这不一定是最好的方法。更好的方法可能是简单地“减去”您不想要的元素，因为这也会返回一个副本：

```
space_subset[1] -= [ 8 ] 
```

一般来说，您必须警惕对您不“拥有”的数据使用就地修饰符。为了安全起见，您应该使用生成修改副本的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T02:24:51.413

**这是reference**和**value**之间的差异。在您的代码中，您创建了对内部数组的引用，但您在两个地方都引用了相同的值。您可以通过调用两个数组来确认这一点`Object#object_id`（好像通过一个引用更改值并看到从另一个引用进行修改是不够的确认！）。

```
space = [  [ [1],[2],[3] ],  [ [4],[5],[6] ],  [ [70],[8],[9] ]  ]
=> [[[1], [2], [3]], [[4], [5], [6]], [[70], [8], [9]]] 
space[2][1].object_id
=> 70329700053380 
space_subset = space[(1..2)].collect { |y| y[1] }
=> [[5], [8]] 
space_subset[1].object_id
=> 70329700053380 
```

不幸的是，`Array#dup`并且`Array#clone`只制作对象的“浅”副本，因此您必须使用一些变通方法来获取要使用的副本`space`。获得深层副本的一个简单技巧是：

```
Marshal.load(Marshal.dump(space)) 
```

您还可以编写一个递归函数来获取`space`并手动将其复制到一个新数组中。

只是为了证明这一点：

```
space = [  [ [1],[2],[3] ],  [ [4],[5],[6] ],  [ [70],[8],[9] ]  ]
=> [[[1], [2], [3]], [[4], [5], [6]], [[70], [8], [9]]]
space[2][1].object_id
=> 70329700053380
space_subset = Marshal.load(Marshal.dump(space))
=> [[[1], [2], [3]], [[4], [5], [6]], [[70], [8], [9]]]
space_subset = space_subset[(1..2)].collect { |y| y[1] }
=> [[5], [8]]
space_subset[1].object_id
=> 70329695297500
space_subset[1].delete(8)
=> 8
space
=> [[[1], [2], [3]], [[4], [5], [6]], [[70], [8], [9]]]
space_subset
=> [[5], []] 
```

希望有帮助！

# scala - 驯服 Scala 类型系统

> ID：13371872
> 
> 赞同：16
> 
> 时间：2012-11-14T01:46:20.767
> 
> 标签：scala, types

我似乎不了解 Scala 类型系统。我正在尝试实现两个基本特征和一个特征，以供一系列算法使用。我在下面做错了什么？

动作和状态的基本特征；这些被简化为仅包括暴露问题的方法。

```
trait Move
trait State[M <: Move] {
    def moves: List[M]
    def successor(m: M): State[M]
} 
```

这是使用上述算法的家族的特征。我不确定这是否正确！可能涉及一些+M / -S的东西......

```
trait Algorithm {
    def bestMove[M <: Move, S <: State[M]](s: S): M
} 
```

具体动作和状态：

```
case class MyMove(x: Int) extends Move
class MyState(val s: Map[MyMove,Int]) extends State[MyMove] {
    def moves = MyMove(1) :: MyMove(2) :: Nil
    def successor(p: MyMove) = new MyState(s.updated(p, 1))
} 
```

关于以下内容，我的立场非常不稳定，但编译器似乎接受了它......试图对算法特征进行具体实现。

```
object MyAlgorithm extends Algorithm {
    def bestMove(s: State[Move]) = s.moves.head
} 
```

到目前为止没有编译错误；但是，当我尝试将所有部分放在一起时，它们会出现：

```
object Main extends App {
    val s = new MyState(Map())
    val m = MyAlgorithm.bestMove(s)
    println(m)
} 
```

上面抛出了这个错误：

```
error: overloaded method value bestMove with alternatives:
  (s: State[Move])Move <and>
  [M <: Move, S <: State[M]](s: S)M
 cannot be applied to (MyState)
    val m = MyAlgorithm.bestMove(s)
                        ^ 
```

**更新：**按照建议，我将算法特征更改为使用抽象类型成员。这解决了我所说的问题*，*但我把它简化了一点。`MyAlgorithm.bestMove()`必须允许该方法使用 s.successor(m) 的输出调用自身，如下所示：

```
trait Algorithm {
    type M <: Move
    type S <: State[M]
    def bestMove(s: S): M
}

trait MyAlgorithm extends Algorithm {
    def score(s: S): Int = s.moves.size
    def bestMove(s: S): M = {
        val groups = s.moves.groupBy(m => score(s.successor(m)))
        val max = groups.keys.max
        groups(max).head
    }
} 
```

以上给出了2个错误：

```
Foo.scala:38: error: type mismatch;
 found   : State[MyAlgorithm.this.M]
 required: MyAlgorithm.this.S
            val groups = s.moves.groupBy(m => score(s.successor(m)))
                                                               ^
Foo.scala:39: error: diverging implicit expansion for type Ordering[B]
starting with method Tuple9 in object Ordering
            val max = groups.keys.max
                                  ^ 
```

我是否必须转向使用特征特征的方法，也就是蛋糕模式，才能使这项工作有效？（我只是在这里猜测；我仍然非常困惑。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T03:16:13.323

您`MyAlgorithm#bestMove`明确声明采用`State[Move]`参数，但在内部`Main`您试图传递它 a `MyState`，它`State[MyMove]`不是 a `State[Move]`。

您有几个选项可以解决此问题。一种是不限制类型`MyAlgorithm`：

```
object MyAlgorithm extends Algorithm {
    def bestMove[M <: Move, S <: State[M]](s: S) : M = s.moves.head
} 
```

不幸的是，scala 类型推断不够聪明，无法为您找出这些类型，因此在调用站点，您必须声明它们，使调用`MyAlgorithm#bestMove`看起来像这样：

```
val m = MyAlgorithm.bestMove[MyMove, MyState](s) 
```

另一种选择使用特征的抽象类型成员`Algorithm`：

```
trait Algorithm {
  type M <: Move
  type S <: State[M]
    def bestMove(s: S): M
} 
```

并解析具体实现中的抽象类型：

```
object MyAlgorithm extends Algorithm {
  type M = MyMove
  type S = MyState
  def bestMove(s: S) : M = s.moves.head
} 
```

然后调用站点将返回到您的原始版本，而无需提及类型：

```
val m = MyAlgorithm.bestMove(s) 
```

您可能希望 MyAlgorithm 不知道实际类型，并将这些类型的确定留给该对象的“客户”，在这种情况下，将对象更改为特征：

```
trait MyAlgorithm extends Algorithm {
  def bestMove(s: S) : M = s.moves.head
} 
```

然后在您的 Main 类中，`MyAlgorithm`使用具体类型实例化 a ：

```
val a = new MyAlgorithm {
  type M = MyMove
  type S = MyState
}
val m = a.bestMove(s) 
```

您的评论“可能涉及一些 +M / -S 的东西”是一个很好的猜测，但它在这里对您不起作用。您可能希望协变类型修饰符“+”在这里有所帮助。如果您已将类型参数声明`State`为

```
State[+M] 
```

这将表明`State[M] <:< State[N]`如果`M <:< N`. （读`<:<`作“是”的子类型）。然后，您可以毫无问题地传入 State[MyMove] ，而 State[Move] 是预期的。但是，您不能在此处对 M 使用协变修饰符，因为它作为后继函数的参数出现在逆变位置。

为什么这是个问题？您的继任者声明说它将需要一个 M 并返回一个状态。协变注释说 State[M] 也是 State[Any]。所以我们应该允许这个赋值：

```
val x : State[Any] = y : State[MyMove] 
```

现在如果我们有一个`State[Any]`，那么 x.successor 是什么类型？ `Any => MyMove`. 这不可能是正确的，因为您的实现需要 a `MyMove`，而不是`Any`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T12:19:36.763

对于更新的代码。

编译器对投诉非常公平。算法使用 State 的一个子类，并且状态后继者可以返回 State[M] 的任何其他子类

您可以声明 IntegerOne 类

```
trait Abstract[T]
class IntegerOne extends Abstract[Int] 
```

但是编译器不知道 AbstractOne[Int] 的所有实例都是 IntegerOne。它假设可能有另一个类也实现了 Abstract[Int]

```
class IntegerTwo extends Abstract[Int] 
```

您可以尝试使用隐式转换从 Abstract[Int] 转换为 IntegerOne，但特征没有隐式视图边界，因为它们根本没有值参数。

## 解决方案 0

因此，您可以将您的算法特征重写为抽象类并使用隐式转换：

```
abstract class MyAlgorithm[MT <: Move, ST <: State[MT]] (implicit val toSM : State[MT] => ST) extends Algorithm {
  override type M = MT // finalize types, no further subtyping allowed
  override type S = ST // finalize types, no further subtyping allowed
  def score(s : S) : Int = s.moves.size
  override def bestMove(s : S) : M = {
    val groups = s.moves.groupBy( m => score(toSM ( s.successor(m)) ) )
    val max = groups.keys.max
    groups(max).head
  }
}

implicit def toMyState(state : State[MyMove]) : MyState = state.asInstanceOf[MyState]

object ConcreteAlgorithm extends MyAlgorithm[MyMove,MyState]

object Main extends App {
  val s = new MyState(Map())
  val m = ConcreteAlgorithm.bestMove(s)
  println(m)
} 
```

此解决方案有两个缺点

*   使用带有 asInstanceOf 的隐式转换
*   搭售类型

作为进一步类型绑定的成本，您可以先熄灭。

## 解决方案 1

让我们使用 Algorithm 作为唯一的类型参数化源并相应地重写类型结构

```
trait State[A <: Algorithm] { _:A#S =>
  def moves : List[A#M]
  def successor(m : A#M): A#S
}

trait Algorithm{
  type M <: Move
  type S <: State[this.type]
  def bestMove(s : S) : M
} 
```

在这种情况下，您的 MyAlgorithm 可以在不重写的情况下使用

```
trait MyAlgorithm extends Algorithm {
  def score(s : S) : Int = s.moves.size
  override def bestMove(s : S) : M = {
    val groups = s.moves.groupBy(m => score(s.successor(m)))
    val max = groups.keys.max
    groups(max).head
  }
} 
```

使用它：

```
class MyState(val s : Map[MyMove,Int]) extends State[ConcreteAlgorithm.type] {
  def moves = MyMove(1) :: MyMove(2) :: Nil
  def successor(p : MyMove) = new MyState(s.updated(p,1))
}

object ConcreteAlgorithm extends MyAlgorithm {
  override type M = MyMove
  override type S = MyState
}

object Main extends App {
  val s = new MyState(Map())
  val m = ConcreteAlgorithm.bestMove(s)
  println(m)
} 
```

请参阅此技术的更多抽象和复杂的使用示例：[Scala：抽象类型与泛型](https://stackoverflow.com/questions/1154571/scala-abstract-types-vs-generics/10891994#10891994)

## 解决方案 2

您的问题还有一个简单的解决方案，但我怀疑它能否解决您的问题。在更复杂的用例中，您最终将再次陷入类型不一致。

只需让 MyState.successor 返回`this.type`而不是`State[M]`

```
trait State[M <: Move] {
  def moves : List[M]
  def successor(m : M): this.type
}

final class MyState(val s : Map[MyMove,Int]) extends State[MyMove] {
  def moves = MyMove(1) :: MyMove(2) :: Nil
  def successor(p : MyMove) = (new MyState(s.updated(p,1))).asInstanceOf[this.type]
} 
```

其他东西不变

```
trait Algorithm{
  type M <: Move
  type S <: State[M]
  def bestMove(s : S) : M
}

trait MyAlgorithm extends Algorithm {
  def score(s : S) : Int = s.moves.size
  override def bestMove(s : S) : M = {
    val groups = s.moves.groupBy(m => score(s.successor(m)))
    val max = groups.keys.max
    groups(max).head
  }
}

object ConcreteAlgorithm extends MyAlgorithm {
  override type M = MyMove
  override type S = MyState
}

object Main extends App {
  val s = new MyState(Map())
  val m = ConcreteAlgorithm.bestMove(s)
  println(m)
} 
```

注意`final`MyState 类的修饰符。它确保转换 asInstanceOf[this.type] 是正确的。Scala 编译器可能会计算出最终类始终保持不变，`this.type`但它仍然存在一些缺陷。

## 解决方案 3

无需将算法与自定义状态联系起来。只要算法不使用特定的状态函数，它就可以在没有类型边界练习的情况下编写得更简单。

```
trait Algorithm{
  type M <: Move
  def bestMove(s : State[M]) : M
}
trait MyAlgorithm extends Algorithm {
  def score(s : State[M]) : Int = s.moves.size
  override def bestMove(s : State[M]) : M = {
    val groups = s.moves.groupBy(m => score(s.successor(m)))
    val max = groups.keys.max
    groups(max).head
  }
} 
```

这个简单的例子并没有很快出现在我的脑海中，因为我假设绑定到不同的状态是强制性的。但有时只有系统的一部分真的应该被显式参数化，你可以避免额外的复杂性

## 结论

讨论的问题反映了我在实践中经常出现的一堆问题。

有两个相互竞争的目的不应该相互排斥，而是在 scala 中这样做。

*   可扩展性
*   概论

首先意味着你可以构建复杂的系统，实现一些基本的实现，并且能够一个一个地替换它的部分来实现更复杂的实现。

其次，允许您定义非常抽象的系统，可用于不同的情况。

Scala 开发人员在为一种既可以是函数式又可以面向对象的语言创建类型系统方面面临着非常具有挑战性的任务，同时仅限于具有诸如类型擦除等巨大缺陷的 jvm 实现核心。给用户的 Co/Contra-variance 类型注解不足以表达复杂系统中的类型关系

每次遇到可扩展性-普遍性两难选择接受哪种权衡时，我都会遇到困难。

我不想使用设计模式，而是用目标语言**声明**它。我希望 scala 有一天会给我这种能力。

# ios - 在没有硬编码文本字段框架的情况下在 UITableViewCell 中安装 UITextField？

> ID：13371883
> 
> 赞同：0
> 
> 时间：2012-11-14T01:48:02.130
> 
> 标签：ios, uitableview, uitextfield

[在 UITableViewCell 中有一个 UITextField](https://stackoverflow.com/questions/409259/having-a-uitextfield-in-a-uitableviewcell)

我正在使用表格视图制作一个填写表格（名字、中间名、姓氏），并希望在我的一些单元格中嵌入文本字段。我看到很多关于在 UITableViewCell 中添加 UITextField 的示例，例如上面的示例。但是，它们都具有文本字段框架的硬编码值，如下所示

```
UITextField *playerTextField = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)]; 
```

我希望我的文本字段使用单元格的框架或边界。

为了让事情更有趣，我的表格视图有四个部分，只有第 1 部分有 3 行，将嵌入文本字段。

为了让事情变得更有趣，我使用一个弹出控制器来展示我的表单。

那么，如何在设置其框架或边界时不使用硬编码值将文本字段嵌入到表格视图单元格中？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:58:24.097

自动调整面具是你的朋友。

```
cell = [tableView dequeueReusableCellWithIdentifier:@"identifier"];
CGFloat optionalRightMargin = 10.0;
CGFloat optionalBottomMargin = 10.0;
UITextField *playerTextField = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, cell.contentView.frame.size.width - 110 - optionalRightMargin, cell.contentView.frame.size.height - 10 - optionalBottomMargin)];
playerTextField.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[cell.contentView addSubview:playerTextField]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T02:39:24.457

如果要确保`UITextField`填充`contentView`单元格，则执行以下操作：

```
cell = [tableView dequeue....];
if (!cell) {
    cell = ... // create cell
    UITextField *textField = [[UITextField alloc] initWithFrame:cell.contentView.bounds];
    textField.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [cell.contentView addSubview:textField];
} 
```

显然，这需要额外的单元格设置，并且应该为文本字段的委托设置一些内容。但这涵盖了让文本字段填充单元格的基础知识`contentView`。如果单元格的大小发生变化，文本字段也会随之变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:56:38.613

您可以使用情节提要编辑器通过创建自定义 nib 将其映射出来，然后在 cellForRowAtIndexPath 中引用该笔尖

假设您的目标是 iOS5+，这很容易做到。

1.  使用以下内容在 viewDidLoad 中设置笔尖

> ```
> [self.tableView registerNib:[UINib nibWithNibName:@"nibname" bundle:nil]  forCellReuseIdentifier:<#(NSString *)#>] 
> ```

2.  在 cellForRowAtIndexPath 中加载笔尖

> ```
> CellClass *cell = [tableView dequeueReusableCellWithIdentifier:<#(NSString *)#>]; 
> ```

其中 CellClass 是您为单元格创建的类。

这种方法允许很大的灵活性来自定义单元格以及创建单元格特定的方法。（例如，如果您在 tableView 中使用多个单元格模板）。

# java - 使用 AppEngine 访问 NoSQL 数据库，如 CouchDB

> ID：13371885
> 
> 赞同：0
> 
> 时间：2012-11-14T01:48:07.950
> 
> 标签：java, google-app-engine, couchdb

我可以使用什么开源库来访问`CouchDB`REST API？

我将从中访问，`AppEngine`因此我可以使用的最接近的库是`CouchDB`使用其 Rest 接口进行访问的库，可能需要做一些工作来移植要使用的库的低级访问`URLFetch`或与 AppEngine 一起使用的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:34:41.813

App Engine[使用 URL Fetch 服务实现 java.net 接口](https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet)，因此任何依赖于网络通信的[CouchDB java 库都应该可以工作。](http://wiki.apache.org/couchdb/Related_Projects#Libraries)`java.net`

# codeigniter - CodeIgniter 更新不起作用

> ID：13371887
> 
> 赞同：0
> 
> 时间：2012-11-14T01:48:16.367
> 
> 标签：codeigniter, sql-update

我有一个模态表单，用于对记录进行更新。表单似乎可以提交，浏览器中的 URL 指向正确的位置（domain.net/cities/update_city/1），但没有显示视图，并且记录从未更新。我搜索了互联网，但大多数教程似乎都略过更新或硬编码要更新的 id。我只使用 CI 一个星期。

型号代码

```
// Edit City
function edit_city($city_id) {
    $data = array('city_name' => $this->input->post('city_name'));
    $this->db->where('city_id', $city_id);
    $this->db->update('cities', $data);
} 
```

查看代码（表单处于模态并获取由 jQuery 添加的 city_id）

```
<div class="modal-body">
    <?php $this->load->helper('form'); ?>
        <?php echo form_open('/cities/update_city/'); ?>
        <label class="control-label" for="name">City</label>
        <input type="text" name="city_name" id="city_name" value=""/><br />
        <input type="submit" name="submit" class="btn-small btn-primary" value="Edit City" />
        <button class="btn-small" data-dismiss="modal">Cancel</button>
    <?php echo form_close(); ?>
</div>
<script>
  // scripts for modal windows
      $(document).on("click", ".edit-modal", function () {
      var city_name = $(this).data('name');
      var city_id = $(this).data('id');
      $(".modal-body #city_name").val( city_name );
      //set the forms action to include the city_id
      $(".modal-body form").attr('action','/cities/update_city/'+city_id);
      $('#editCityDialog').modal('show');
  }); 
```

控制器代码

```
// Update City
function update_city($city_id) {
$this->load->model('cities_model');

    if ($this->input->post('submit')) {
        $data = array('city_name' => $this->input->post('city_name'));

        $this->cities_model->edit_city('cities', array('city_id' => $city_id),$data);
        redirect('/cities');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:09:18.480

这是一个示例，您可以使用它轻松更新（我的英语不好，对不起）。

模型：

```
class Cities_model extends CI_Model{
    function edit($table,$where,$data){
       foreach ($where as $key => $value){
            $this->db->where($key,$value);
        }
        $this->db->update($table,$data);        
    }
} 
```

控制器：

```
 function update_city($city_id){
    $this->load->model('cities_model');
         if($this->input->post('submit'){
         $data = array('city_name' => $this->input->post('city_name'));

         $this->cities_model->edit('cities',array('city_id' => $city_id),$data); //(table,where,data); see in model.
         redirect(''); 
         }
     } 
```

***如果你去一个链接为“http://......update_city/2”和一个函数 update_city($city_id)，$city_id 将接收为“2”，你不需要写 uri_segment 来获取 $city_id . 希望对你有帮助

编辑 ：

控制器：

```
function update_city($city_id) {
$this->load->model('cities_model');

if ($this->input->post('submit')) {
    $this->cities_model->edit_city($city_id);
    redirect('/cities');
} 
```

}

# python - 我可以在不创建自己的计数器的情况下显示每个列表项在列表中的位置吗？

> ID：13371891
> 
> 赞同：1
> 
> 时间：2012-11-14T01:49:12.177
> 
> 标签：python, loops, for-loop

我正在尝试用 BeautifulSoup 解析一个表，并发现当我浏览它时知道我正在查看的行和列是/会有所帮助的。现在我有这个：

```
for table in soup.find_all("table", {"class":"foo"}):
    r = 0
    for row in table.find_all('tr'):            
        cells = row.find_all("td")
        c = 0
        for cell in cells:
            print "row", r, "cell", c
            print cell.attr
            c += 1
        r +=1 
```

这会输出一些有启发性的信息：

```
row 0 cell 0 
row 1 cell 0 
row 1 cell 1 
row 1 cell 2 
row 1 cell 3 
row 1 cell 4 
row 2 cell 0 
row 2 cell 1 
row 3 cell 0 
row 3 cell 1 
```

由于某种原因 row[1] 有很多额外的列。方便知道。我想知道的是......是否有一个内置变量可以报告我在列表中的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T01:52:38.317

你在找`enumerate`吗？

```
for c,cell in enumerate(cells):
    .... 
```

# vba - 如何在 Excel VBA 用户窗体中创建两列查找组合框

> ID：13371892
> 
> 赞同：1
> 
> 时间：2012-11-14T01:49:12.917
> 
> 标签：vba, excel

你能告诉我如何在 Excel VBA 用户窗体中创建一个两列查找组合框吗？我正在寻找这样的东西：

![在此处输入图像描述](../Images/f83971c5cfc0d703fcaf038e4f548f9d.png)

我知道我们可以使用以下方法将项目添加到组合框：

```
Private Sub UserForm_Initialize()
  With Me.ComboBox1
    .AddItem "215"
    .AddItem "316"
    .AddItem "485"
   End With
End Sub 
```

但我需要用 215,316,485 等生成一个关联值，比如锤子，......谢谢你的时间，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:32:53.747

填充一个二维数组并将`List`ComboBox 的属性设置为该数组：

```
Dim listEntries(3, 2) As Variant

listEntries(0, 0) = "215"
listEntries(0, 1) = "Hammer"
listEntries(1, 0) = "316"
listEntries(1, 1) = "Wrench"
listEntries(2, 0) = "485"
listEntries(2, 1) = "Pliers"

Me.ComboBox1.List = listEntries 
```

您可能还需要相应地调整`ColumnWidths`和`TextColumn`属性

# opengl-es - 阴影映射 - 与光正交的薄壁上的伪影

> ID：13371893
> 
> 赞同：17
> 
> 时间：2012-11-14T01:49:28.107
> 
> 标签：opengl-es, 3d, opengl-es-2.0, shadow-mapping

我的背面（对光）和阴影贴图有问题，我似乎无法通过。我仍处于优化引擎的相对早期阶段，但我似乎无法到达那里，因为即使为这一几何图形手动调整了所有内容，它仍然看起来像垃圾。

它是一堵通过大约 5 块不同的墙“弯曲”的瘦墙。当我创建我的深度图时，我正在剔除正面（对光）。这肯定有帮助，但墙另一侧的正面似乎是导致 z 冲突/投影阴影的原因。

![弯墙上的文物](../Images/01d8e118cd16d4d66e6ac6b58bca42dd.png)

截图上的一些注释：

*   绘制深度纹理（来自灯光）时剔除正面
*   我为这块几何图形调整了近平面和远平面（分别设置为 20 和 25）
*   一个定向光源，以轻微的角度朝向场景的右侧向下照射，足以表明墙壁应该被遮蔽，但大部分是笔直向下
*   使用非常大的 4096x4096 阴影贴图纹理
*   所有照明都被禁用，但知道我正在做柔和的照明（因此顶点的顶点法线）即使在这面墙上

正如[这里](https://gamedev.stackexchange.com/questions/29948/first-time-shadow-mapping-problems)提到的，它得出的结论是，您不应该对光线背面的多边形进行阴影处理。我正在努力解决这个特殊问题，因为我不想将面部法线一直传递到片段着色器以排除那里的光线的真正背面 - 但是如果有人认为这是最好/唯一的解决方案对于这个几何，这就是我必须要做的。考虑到管道如何让面部法线通过它变得不容易/明显，这让我觉得这不是阻力最小的路径。请注意，我传递的法线是顶点法线，以允许在边缘周围产生更柔和的照明效果（可能包括非阴影和阴影表面）。

请注意，我有一些令人讨厌的[Perspective Aliasing](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416324(v=vs.85).aspx)，但我希望我的下一步是处理[级联阴影贴图](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416307(v=vs.85).aspx)，但如果没有解决这个问题，我觉得我只是在推迟不可避免的事情，因为我已经手动收紧了视图尽我所能（或者我认为）。

无论如何，我觉得我错过了一些东西，所以如果您有任何想法或帮助，将不胜感激！

编辑

需要明确的是，根据光线的来源，从技术上讲，墙不应该处于阴影中。

![俯视图](../Images/c4feccf8b372acf2557addef131a8c20.png)

下面是关闭阴影的图像。这只是使用顶点法线来计算漫反射照明 - 它并不漂亮（太多几何图形可见），但它确实表明某些边缘有些可见。

![没有开启阴影](../Images/60dbddd3d638ee15c8e7840d43d69214.png)

所以是的，墙应该在阴影中，但我希望我可以让平滑工作更好，这样边缘就可以有一些漫射照明。如果我需要将它完全置于阴影中，那么如果是将其置于阴影中的阴影贴图，或者我的代码专门将其置于阴影中，因为面法线已消失，我对此很好 - 但将面法线通过对我的顶点/片段着色器来说似乎不是阻力最小的路径。

也许这些将有助于更好地说明我的问题，或者可能会揭示我缺少的一些基本理解。

编辑#2

我在下面包含了深度纹理。您可以在左下角看到有问题的墙，从屏幕截图中您可以看到我如何将深度值修剪到 ~0.4->1。这意味着该墙的深度值从 0.4 范围开始。所以它没有完美地剪裁，但它很接近。这看起来合理吗？我很确定它是一个完整的 24 位或 32 位深度缓冲区，是 iOS 上的一个 DEPTH_COMPONENT 扩展。对于@starmole，这是否有助于确定我的投影中是否存在缩放错误？您是否认为我的地图所覆盖的大小/区域太大，因此如果它聚焦得更近可能会有所帮助？

![在此处输入图像描述](../Images/0b463907641f9e18235fae930fe4b30c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:59:54.740

问题似乎是你是

1.  剔除正面
2.  看着背影
3.  不移除背面的光，因为它实际上没有被法线照亮 - 或者计算中存在一些不准确
4.  可能不会添加一些 epsilon

(1) 和 (2) 意味着阴影贴图和背面之间会有 Z 冲突。

此外，阴影贴图分辨率对您没有帮助 - 只需查看阴影贴图中的墙，它只有一个像素厚。

建议：

1.  ε。确保 Z > lightZ + epsilon
2.  ε。确保墙壁正对着灯光（法线点 > epsilon），以确保墙壁在非常接近正交时被遮蔽

# jquery - jquery 不会在我的无序列表之后插入

> ID：13371897
> 
> 赞同：1
> 
> 时间：2012-11-14T01:50:02.083
> 
> 标签：jquery

我有一个无序列表（ul），我试图在（ul）之前和之后插入一些标签。似乎在（ul）之前插入我的标签就好了，但由于某种原因，它不会在之后插入它。这是jsfiddle：http: [//jsfiddle.net/grem28/ptSVA/1/](http://jsfiddle.net/grem28/ptSVA/1/)

```
$('.isNav').addClass('nav').before('<nav class="navbar navbar-inverse"><div class="navbar-inner">').after('</div></nav>'); 
```

如果您检查结果，您会看到我在说什么。最初我把它链起来，但它似乎将前后插入在一起，这就是我将它分开的原因。我想如果我先做 .after 然后 .before 它会正确显示，但它不起作用。非常感谢您的所有帮助！

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:52:14.933

那是因为您将无效标记传递给`after`方法，`before`并`after`在所选元素之前和之前插入元素*作为兄弟元素*，如果要包装元素，则应改用`wrap`方法。

```
$('.isNav').addClass('nav').wrap('<nav class="navbar navbar-inverse"><div class="navbar-inner"></div></nav'); 
```

[http://jsfiddle.net/brCuw/](http://jsfiddle.net/brCuw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:54:41.490

你必须使用`wrap()`. `before()`并且`after()`不要添加您传递给函数的实际 HTML，它们会添加带有结束标记的整个元素。所以你添加的元素会`before()`自动关闭，之后没有“打开”标签可以用你的`after()`功能关闭。

使用示例`wrap`：

[http://jsfiddle.net/ptSVA/2/](http://jsfiddle.net/ptSVA/2/)

```
$('.isNav').addClass('nav').wrap('<nav class="navbar navbar-inverse"><div class="navbar-inner">'); 
```

# javascript - 简单的 JavaScript 只有“下一个”和“上一个”动作？

> ID：13371900
> 
> 赞同：0
> 
> 时间：2012-11-14T01:50:19.743
> 
> 标签：javascript

我目前拥有它，以便在您单击“页码”编号时更改文本块，但我想添加上一个和下一个按钮。

在这里查看我当前的版本：http: [//jsfiddle.net/ZBWqS/](http://jsfiddle.net/ZBWqS/)

当我开始着手时，我想到的每一个解决方案都会变成一堆无法工作的代码。

抱歉，noob-JS 问题。

```
<div id="1" style="display: block;">
<p>This is the first block of text</p>
<p class="page">
1 of 3
</p>
</div>

<div id="2" style="display: none;">
<p class="red">This is the second block of text</p>
<p class="page">
2 of 3
</p>
</div>

<div id="3" style="display: none;">
<span>This is the third block of text</span>
<p class="page">
3 of 3
</p>
</div>

<div class="bottom">
<a href="#" onclick="show('1'), hide('2'), hide('3'); return false;">1 </a><a href="" onclick="show('2'), hide('1'), hide('3'); return false;">2 </a><a href="" onclick="show('3'), hide('2'), hide('1'); return false;">3 </a>
</div>
<script>
    function show(id) {
        document.getElementById(id).style.display = 'block';
    }
    function hide(id) {
        document.getElementById(id).style.display = 'none';
    }
</script>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:58:56.103

保留一个变量来存储您所在的位置，递增/递减它，然后根据该变量显示内容。

[http://jsfiddle.net/ZBWqS/3/](http://jsfiddle.net/ZBWqS/3/)

```
// hold where we are right now. For previous and next to make sense,
// you have to know where you are.
var current = 1;

// function to go to previous
var prev = function() {
    current -= 1;
    if (current < 1) current = 1; // can't go too far previous
    showContent();
};

// function to go next
var next = function() {
    current += 1;
    if (current > 3) current = 3; // can't go too far next
    showContent();
};

// Update what content we are showing based on the "current" index
var showContent = function() {
    var display;
    for (var i = 1; i <= 3; i++) {
        if (i == current) {
            display = 'block';
        } else {
            display = 'none';
        }
        document.getElementById(i).style.display = display;
    }
};

// bind the prev and next function to the links 
document.getElementById('prev').onclick = prev;
document.getElementById('next').onclick = next;

// Setup the initial state of the content
showContent();
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:03:08.650

我还构建了你的代码的重构版本，你决定你更喜欢哪一个；）

[http://jsfiddle.net/haDAj/](http://jsfiddle.net/haDAj/)

**HTML**

```
<div id="1" class="pagecontainer" style="display: block;">
<p>This is the first block of text</p>
<p class="page">
1 of 3
</p>
</div>

<div id="2" class="pagecontainer" style="display: none;">
<p class="red">This is the second block of text</p>
<p class="page">
2 of 3
</p>
</div>

<div id="3" class="pagecontainer" style="display: none;">
<span>This is the third block of text</span>
<p class="page">
3 of 3
</p>
</div>

<div class="bottom">
    <a href="#" onclick="prev()">&lsaquo;</a>
    <a href="#" onclick="page('1')">1 </a>
    <a href="#" onclick="page('2')">2 </a>
    <a href="#" onclick="page('3')">3 </a>
    <a href="#" onclick="next()">&rsaquo;</a>
</div>​ 
```

**脚本**

```
var currentPage = 1;

function page(pg)
{
    var els = document.getElementsByClassName("pagecontainer");
    for (var i = 0; i < els.length; i++)
    {
        var page_of_container = els[i].getAttribute("id");
        els[i].style.display = page_of_container  == pg ? 'block' : 'none';                    
    }

    currentPage = pg;
}

function prev()
{
    if (currentPage <= 1) return;

    page(currentPage -1);
}

function next()
{
    if (currentPage >= document.getElementsByClassName("pagecontainer").length) return;

    page(currentPage + 1);
}​ 
```

# google-apps-script - 将 GAS 数组（从 .gs）转换为 javascript 数组（在 .html 中）

> ID：13371902
> 
> 赞同：1
> 
> 时间：2012-11-14T01:50:30.117
> 
> 标签：google-apps-script

是否有一种“简单”的方法可以将 GAS 字符串数组（在 .gs 文件中）转换为 HTML 文件中存在的 javascript 数组？我正在尝试使用 jquery 来做一些事情，它需要（据我所知）值位于 javascript 数组中。第一段代码是从联系人应用程序获取电子邮件地址并返回字符串数组的函数。其余的是带有链接中断的 HTML 示例，用于分隔他们的哄骗结果（至少我很确定他们的哄骗结果）。此外，这基本上是我使用的 availableTags 变量，您将在下面看到：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

脚本文件，返回电子邮件地址的字符串数组

```
function getAllContacts(){
  var contacts = ContactsApp.getContactsByGroup(ContactsApp.getContactGroup("ContactsAppTest"));
  var email = new Array();
  for(var i=0;i<contacts.length;i++){
    if(contacts[i].getPrimaryEmail() != ""){
    email.push(contacts[i].getPrimaryEmail());
    }
  }
  return email;
} 
```

尝试 1，创建一个空的 js 数组，并从 getAllContacts 函数手动填充。这行得通，但认为这不是很有效。

```
var availableTags = [];
<?
var temp = getAllContacts();
for (var i=0; i<temp.length; i++) { ?>
availableTags.push(<?= temp[i] ?>);
<?} ?>

availableTags.push_m___?availableTags.push('email1@test.com'):availableTags.m___('push',['email1@test.com']);availableTags.push_m___?availableTags.push('email2@test2.com'):availableTags.m___('push',['email2@test2.com']);availableTags.push_m___?availableTags.push('email3@test3.com'):availableTags.m___('push',['email3@test3.com']); 
```

尝试2，设置availableTags = getAllContacts函数

```
var availableTags = <?=getAllContacts()?>;

availableTags='email1@test.com,email2@test2.com,email3@test3.com' 
```

普通js数组

```
var availableTags = ["email1@test.com","email2@test2.com","email3@test3.com"];

availableTags=['email1@test.com','email2@test2.com','email3@test3.com']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:08:12.080

尝试这样的事情：

```
<? var temp = getAllContacts(); ?>
var availableTags = <?= temp ? "[" + temp.toString() + "]" : "null" ?>; 
```

这应该一次在客户端初始化数组。（无论如何，我不会太担心效率，除非你要处理成百上千个这样的联系人。我自己，我会为我认为最易读的内容而努力。）

更新：如评论中所述，这不起作用，因为结果似乎被引用了。其他使用`new Function()`或`eval()`在该字符串上的尝试失败，可能是由于 Caja sanitizer GAS 在输出中使用。这应该起作用，而不是：

```
 <? var temp = getAllContacts(); ?>

  var array = null;
  var str  = <?= temp ? temp.toString() : "" ?>;
  if(str) array = str.split(","); 
```

# mdx - 如何使用 MDX 查询获取当前年份？

> ID：13371904
> 
> 赞同：0
> 
> 时间：2012-11-14T01:50:50.110
> 
> 标签：mdx

我对 MDX 没什么意见。有没有办法通过 MDX 查询从系统/服务器获取当前年份？我没有任何与日期相关的维度或类似的东西。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:15:41.147

创建一个成员并将其定义为 'YEAR(NOW())'

```
Member [Measures].[Current Year] as 'YEAR(NOW())' 
```

这是一个更[完整的示例](http://support.microsoft.com/kb/301537)

```
-- The First Calculated member is the value of NOW()
WITH  MEMBER [Measures].[Full Date] as 'NOW()'
-- The Second Calculated Member is the Day part of the first calculated member.
MEMBER [Measures].[What Day] as 'DAY([Full Date])'
-- The Third Calculated Member is the Month part of the first calculated member.
MEMBER [Measures].[What Month] as 'MONTH([Full Date])'
-- The Fourth Calculated Member is the Year part of the first calculated member.
Member [Measures].[What Year] as 'YEAR([Full Date])'
SELECT
   {[Full Date],[What Day],[What Month],[What Year]} ON COLUMNS
FROM [Your Cube] 
```

# c# - 为什么这个线程代码运行得这么慢？

> ID：13371906
> 
> 赞同：0
> 
> 时间：2012-11-14T01:51:01.647
> 
> 标签：c#, multithreading

我正在编写一个 N-Body 模拟，为了简化计算，我将整个空间划分为多个大小一致的区域。

对于每个物体，我计算同一区域中所有其他物体的力，对于其他区域，我将质量和距离汇总在一起，因此要做的工作更少。

我有一个`List<Region>`并`Region`定义`public void Index()`了在这次迭代中总质量的总和。

我的`Space.Tick()`函数有两种变体：

```
public void Tick()
{
  foreach (Region r in Regions)
    r.Index();
} 
```

这非常快。对于 20x20x20 = 8000 个区域，每个区域有 100 个物体 = 总共 800000 个物体，只需大约 0.1 秒即可完成此操作。CPU 图表显示我的四核利用率为 25%，这正是我所期望的。

现在我编写这个多线程变体：

```
public void Tick()
{
  Thread[] threads = new Thread[Environment.ProcessorCount];

  foreach (Region r in Regions)
    while (true)
    {
      bool queued = false;

      for (int i = 0; i < threads.Length; i++)
        if (threads[i] == null || !threads[i].IsAlive)
        {
          Region s = r;
          threads[i] = new Thread(s.Index);
          threads[i].Start();
          queued = true;
          break;
        }

      if (queued)
        break;
    }
} 
```

所以一个快速的解释，以防它不明显：`threads`在我的 CPU 的情况下是一个 4 的数组。它开始是 4x `null`。对于每个区域，我循环遍历所有 4 个`Thread`对象（可能是`null`）。当我找到一个要么`null`是要么不是的，`IsAlive`我就排队。我设置为以便我可以知道该区域已开始编制索引。`Index()``Region``Start()``queued``true`

此代码大约需要 7 秒。这慢了 70 倍。我知道在设置线程、查找空闲线程等方面会产生一些开销。但我仍然希望我至少会获得某种性能提升。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:18:53.813

为什么不试试 PLINQ？

```
Regions.AsParallel().ForAll(x=>x.Index()); 
```

PLINQ 通常对我来说超级快，并且它的扩展取决于您的环境。如果它不应该是并行的，它会执行单线程。

所以，如果你必须让一个多维数组进入函数，你可以这样做：

```
 Regions.AsParallel().Cast<Region>().ForAll(x=>x.Index()); 
```

# php - 使用jquery将js变量传递给php

> ID：13371907
> 
> 赞同：0
> 
> 时间：2012-11-14T01:51:20.570
> 
> 标签：php, jquery

我正在尝试将一个非常简单的 javascript 变量发布到 php 文件中。

keyinput.php 中的 Jquery 位：

```
<script type="text/javascript">

var imgArray = [<?php echo implode(',', getImages($cat, $site)) ?>];
$(document).ready(function() {      

    var img = document.getElementById("showimg");
    img.src = imgArray[<?php echo $imgid ?>];
    var imgIndex = <?php echo $imgid ?>;

    $(document).keydown(function (e) {
        var key = e.which;
        int rightarrow = 39;
        int leftarrow = 37;
        int random = 82;

        if (key != rightarrow && key != leftarrow && key != random) {
            return;
        }
        else {
            //next image: right arrow
            if (key == rightarrow) 
            {
                imgIndex++;
                if (imgIndex > imgArray.length-1) 
                {
                    imgIndex = 0;
                }
                img.src = imgArray[imgIndex];
            }
            //last image: left arrow
            if (key == leftarrow) 
            {
                if (imgIndex == 0) 
                {
                    imgIndex = imgArray.length;
                }
                img.src = imgArray[--imgIndex];
            }
            //random: r
            if (key == random) 
            {
                imgIndex = Math.floor((Math.random()*(imgArray.length-1))+1);
                img.src = imgArray[imgIndex];
            }   
        }
        $.post('./templates/viewcomic.php', {variable: imgIndex});
    });
});

</script>
<?php
function  getImages($catParam, $siteParam) {
include './scripts/dbconnect.php';

if ($siteParam == 'artwork') { 
    $table = "artwork"; 
}       
else { 
    $table = "comics"; 
}   

if ($catParam != null) {
    $catResult = $mysqli->query("SELECT id, title, path, thumb, catidFK FROM $table WHERE catidFK = $catParam");
}
else {
    $catResult = $mysqli->query("SELECT id, title, path, thumb, catidFK FROM $table");
}

$img = array();
while($row = $catResult->fetch_assoc()) 
{
    $img[] = "'" . $row['path'] . "'";
}
return $img;
}
?> 
```

viewcomic.php 中的 PHP 位：

```
include './scripts/keyinput.php'; 

$JSIndex = $_POST['variable'];
echo "Index = " . $JSIndex;
//$JSIndex should be equal to the javascript variable imgIndex... but it outputs nothing 
```

任何想法都会非常有帮助！我正在尝试让我的漫画网站上线。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:21:23.927

您的逻辑是错误的：在您定义`key`变量的那一刻，`e`未定义。然后你将你的事件处理程序附加到一个`if`总是评估为 false 的语句中，这样它就永远不会起作用。

赋值`key`应该在你的事件处理程序中，并且条件需要去，你已经在你的事件处理程序中有了它。

**编辑：**你也应该只在你的一个动作键被按下时才进行 ajax 调用（把它放在事件处理程序中）并对结果做一些事情。

**编辑2：**查看手册[`$.post`](http://api.jquery.com/jQuery.post/)，您应该添加一个回调函数来处理您的php脚本的返回值。

例如：

```
$.post(
       './templates/viewcomic.php',
       { variable: imgIndex },
       function(data) {    /* data contains what you have echoed out in your php script */
           alert(data);
       }
      ); 
```

# c# - 另一个全局钩子影响我的全局钩子

> ID：13371911
> 
> 赞同：5
> 
> 时间：2012-11-14T01:51:42.810
> 
> 标签：c#, winapi, hook, keyboard-hook

我在 C# .NET 中编写了一个全局键盘挂钩程序，它就像一个键盘日志，它将结果写入一个文件。但是我使用了另一个程序，它支持在同一台计算机上输入越南语-它还使用全局挂钩将设置的键盘修复为越南语字符-它影响了我的程序！

示例：当我在没有我的程序的情况下输入以下内容：“xin chao2, to6i la2 mot65 nguoi72 Viet65 Nam”时，它会在我输入每个字符后再次修复：xin chào, tôi là một người Việt Nam。

但是当我使用我的全局钩子时，我会在文件中收到结果：

```
xin chao2[Back]
[Back]
[Packet]
[Packet]
[Escape]
 toi6[Back]
[Back]
[Packet]
[Packet]
[Escape]
 la2[Back]
[Packet]
[Escape]
 nguoi7[Back]
[Back]
[Back]
[Packet]
[Packet]
[Packet]
[Escape]
2[Back]
[Back]
[Packet]
[Packet]
[Escape]
Viet6[Back]
[Back]
[Packet]
[Packet]
[Escape]
5[Back]
[Back]
[Packet]
[Packet]
[Escape]
 Nam 
```

那么，我该如何解决这个错误，排除程序支持类型越南语的影响而不删除或禁用它，或者接受它的影响但导致文件看起来像在没有我的程序的情况下输入？

对不起，如果您对我的英语有任何不适！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:11:34.487

Assuming I understand your question correctly, you are trying to create another hook that will also hook the characters after they have been fixed to use vietnamese characters? It's a bit of a hacky solution, but you could try opening up the vietnamese program which is creating the hook in a debugger, find the function that is doing the hooking, and hook the return value of that function.

Check out windows detours [http://research.microsoft.com/en-us/projects/detours/](http://research.microsoft.com/en-us/projects/detours/)

and if you're doing .NET there's easy hook [http://easyhook.codeplex.com/](http://easyhook.codeplex.com/)

here's a tutorial on creating hooks in C++ and detours [http://gamerztools.net/foros/showthread.php?933-C-Tutorial-Hooking-Functions-using-Detours](http://gamerztools.net/foros/showthread.php?933-C-Tutorial-Hooking-Functions-using-Detours)

Hopefully that should point you in the right direction!

# sql - SQL：在内部使用过滤器查看或在选择时使用过滤器查看

> ID：13371912
> 
> 赞同：4
> 
> 时间：2012-11-14T01:51:47.337
> 
> 标签：sql

我一直在研究一个使用大量视图的数据库，并且表记录最多只有 100 万行，但是等待我的查询出现是一件很痛苦的事情。

我想复制视图并在里面放一个“WHERE CLAUSE”。现在我的问题：

将 where 子句放在视图中是否更快。例如，我会将所有客户类型 = 'BIZ'。

或者如果我只使用视图“SELECT * FROM VIEW_CUSTOMER WHERE type = 'BIZ'”会不会一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:55:45.233

在此脚本的帮助下，可以使用您的 where 子句创建视图

```
DECLARE @pref nvarchar(10) = '_type$biz',
        @where_clause nvarchar(max) = 'WHERE 1 = 1',
        @dsql nvarchar(max) = ''
IF OBJECT_ID('tempdb.dbo.#tmp') IS NOT NULL DROP TABLE dbo.#tmp 
SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS rn,
       'CREATE VIEW ' + SCHEMA_NAME(o.schema_id) + '.' + OBJECT_NAME(o.object_id) + @pref
       + ' AS SELECT * FROM ' + SCHEMA_NAME(o.schema_id) + '.' + OBJECT_NAME(o.object_id) + ' ' + @where_clause AS def
INTO dbo.#tmp       
FROM sys.sql_modules m JOIN sys.objects o ON m.object_id = o.object_id
WHERE o.type = 'V'

DECLARE @i int = (SELECT MIN(rn) FROM dbo.#tmp)

WHILE (@i IS NOT NULL)
BEGIN
  SELECT @dsql = def FROM dbo.#tmp WHERE rn = @i
  EXEC sp_executesql @dsql
  SELECT @i = MIN(rn) FROM dbo.#tmp WHERE rn > @i
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-28T13:13:50.407

当您向视图添加 where 子句时，这将减少您选择的行数。默认情况下，调用视图时 sqlserver 不使用索引！要强制 sqlserver 使用可用索引，请在创建视图时指定“with schemabinding”（使用 schemabinding 创建视图...）。

一定要指定一个可以被 where 规范使用的索引。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-14T04:03:21.237

Adding another view with your filter will not help your performance. You should bring your concerns to your DBA. If you don't have a DBA... then you'll have to find a knowledgeable developer to help troubleshoot your query performance.

# objective-c - 创建一个 NSString 指针

> ID：13371913
> 
> 赞同：1
> 
> 时间：2012-11-14T01:52:07.500
> 
> 标签：objective-c, nsstring

考虑：

```
 NSString*test2=[[NSString alloc]init];

test2=@"yo";
NSString *test= test2;
NSLog(@"test: %@ test2: %@",test, test2);
test2=@"what the?";
NSLog(@"test: %@ test2: %@",test, test2); 
```

输出：

```
2012-11-14 09:50:26.720 testt[693:c07] test: yo test2: yo
2012-11-14 09:50:26.721 testt[693:c07] test: yo test2: what the? 
```

一个人如何制作`test`一个真正的指针，这样当`test2`发生变化时，也会发生变化`test`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T02:03:22.740

`NSString *test2`已经是一个指针。您想创建`test`一个指向指针（double `*`）的指针，并使用前缀为其分配`test2`地址，然后使用`&`前缀访问该值`*`。我很讨厌解释这个，所以这里是代码：

```
test2=@"yo";
NSString **test= &test2;
NSLog(@"test: %@ test2: %@", *test, test2);
test2=@"what the?";
NSLog(@"test: %@ test2: %@", *test, test2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T02:03:08.527

您*已经*创建了一个“真正的指针”，问题在于声明：

```
test2 = @"What the?"; 
```

正在创建一个新的字符串对象并将指向新字符串的指针分配给变量`test2`，`test`仍然包含旧指针。

您可以创建一个指向指针的指针来解决这个问题。或者，您可以使用 an`NSMutableString`然后仅使用`NSMutableString`方法来更改（变异）字符串，而不是为`test`and`test2`变量重新分配新值。

以下将是`NSMutableString`您的示例的版本：

```
NSString *test2 = [[NSMutableString alloc] initWithString:@"yo"];       
NSString *test = test2;

NSLog(@"test: %@ test2: %@", test, test2);

[test2 setString:@"what the?"];

NSLog(@"test: %@ test2: %@", test, test2); 
```

产生输出：

```
2012-11-14 10:06:27.231 Untitled 2[592:707] test: yo test2: yo
2012-11-14 10:06:27.232 Untitled 2[592:707] test: what the? test2: what the? 
```

* * *

`NSString`s 在 Objective-C 中有一些额外的语法糖，因此以下两者具有相同的效果（尽管在后台发生的事情可能完全不同或相同）。

```
NSString *test = [NSString alloc] initWithString:@"Hello World"];
NSString *test = @"Hello World"; 
```

这两个语句都创建了一个新的不可变（不可更改）字符串。创建`NSString`using 语句`[NSString alloc] init]`会创建一个空字符串，这通常不是您想要做的。

* * *

这意味着，在您的示例中，前两行是：

```
NSString*test2=[[NSString alloc]init];
test2=@"yo"; 
```

第一行是不必要的，因为您正在创建一个字符串对象并将指针放入其中`test2`，然后立即用指向由创建的字符串的指针覆盖该指针`@"yo"`。如果您不使用 ARC，这将导致内存泄漏，因为由创建的字符串`[[NSString alloc] init]`尚未释放。但是，`NSString`它与其他对象的工作方式并不相同，因此与其泄漏内存，不如说你在浪费内存可能更正确”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:01:34.437

我会尝试以下方法：

```
NSString *test = &test2; 
```

# xslt-1.0 - 基于静态与字符串数据的 XSLT 节点集

> ID：13371917
> 
> 赞同：1
> 
> 时间：2012-11-14T01:52:51.697
> 
> 标签：xslt-1.0

这适用于静态数据：

```
<xsl:variable name="ExtensionData3">
<images>
    <image id="10842" width="2450" height="2200" default="1" />
    <image id="10543" width="2450" height="2200" default="0" />
    <image id="10544" width="2450" height="2200" default="0" />
</images>
</xsl:variable>
<xsl:value-of select="msxsl:node-set($ExtensionData3)/images/image[@default='1']/@id" /> 
```

如何让它与动态数据一起使用？：

```
<xsl:variable name="ExtensionData3">
<xsl:value-of select="XMLData" />
</xsl:variable>
<xsl:value-of select="msxsl:node-set($ExtensionData3)/images/image[@default='1']/@id" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:38:54.073

> 如何让它与动态数据一起使用？：
> 
> ```
> <xsl:variable name="ExtensionData3">
>   <xsl:value-of select="XMLData" />
> </xsl:variable>
> <xsl:value-of select="msxsl:node-set($ExtensionData3)/images/image[@default='1']/@id" 
> ```
> 
> />

**错误在这一行**：

> ```
>  <xsl:value-of select="XMLData" /> 
> ```

`XMLData`这会输出（创建一个文本节点）当前节点的第一个子节点的字符串值。

但是你不想要字符串——你想要复制*节点。*

**正确的方法是**：

```
 <xsl:copy-of select="XMLData" /> 
```

**更好的是，在这种情况下，您根本不需要创建 RTF，然后将其转换为临时树 - 只需使用**：

```
<xsl:variable name="ExtensionData3" select="XMLData"/> 
```

# java - 如何获取 jongo 的 jar lib 文件？

> ID：13371921
> 
> 赞同：1
> 
> 时间：2012-11-14T01:53:50.773
> 
> 标签：java, mongodb, jongo

在[jongo](http://jongo.org/)上关注MongoDB 之上的一个 java 库，它允许在 Java 中像在 Mongo shell 中一样进行查询。例子：

贝壳

`db.friends.find({"age": {$gt: 18}});`

JAVA 驱动程序

`friends.find(new BasicDBObject("age",new BasicDBObject("$gt", 18)));`

中工

`friends.find("{age: {$gt: 18}}").as(Friend.class);`

但是我找不到任何东西来下载这些 jar lib 文件。谁能和我分享这个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T02:39:13.140

该项目托管在 Sonatype OSS 库上，因此您可以在此处搜索它[https://oss.sonatype.org/index.html#nexus-search;quick~jongo](https://oss.sonatype.org/index.html#nexus-search;quick~jongo)

快速搜索最新的 jar 出现[https://oss.sonatype.org/service/local/artifact/maven/redirect?r=releases&g=org.jongo&a=jongo&v=0.2&e=jar](https://oss.sonatype.org/service/local/artifact/maven/redirect?r=releases&g=org.jongo&a=jongo&v=0.2&e=jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:31:07.153

正如 David Welch 所说，您可以直接在 Sonatype 上下载 Jongo。您还可以使用它的 maven 依赖项，它将简化即将到来的版本升级：

```
<dependency>
    <groupId>org.jongo</groupId>
    <artifactId>jongo</artifactId>
    <version>0.2</version>
</dependency> 
```

# nhibernate - NHibernate 的 PLINQO。映射和实体。

> ID：13371922
> 
> 赞同：0
> 
> 时间：2012-11-14T01:53:54.170
> 
> 标签：nhibernate, fluent-nhibernate, codesmith

我最近发布了一个关于 NHibernate 的问题。这使我检查了 Codesmith 的 NHibernate 框架 PLINQO。

同时，我正在他们的官方网站上阅读有关 nhibernate 的教程（因为我正在查看 PLINQO 生成的项目）。

我不是 NHibernate 方面的专家，但我现在正在看的东西（PLINQO 生成的 NHibernate 项目）在我看来非常草率，几乎是灾难的根源。它创建了一组我猜是业务对象的“实体”？我的眼睛一团糟。

有人对 Codesmith 的 NHibernate 有经验吗？

任何人都可以将我指向 NHibernate 的 mc 爸爸。到目前为止，我已经发现了如此多的变体，以至于我已经不知所措了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:22:08.787

我为 CodeSmith 工具工作。你觉得生成的项目看起来很草率吗？你会如何改进它？我们尝试将实体（POCO）/hbm 分离出来以保持一致性和易于使用（如 Randy 上面详述）。实体直接从 hbm 文件中定义的内容生成，可以自定义而不会丢失您的更改。

生成的项目遵循 Linq-to-SQL 和实体框架的架构。我们认为这允许 Microsoft Stack 上的开发人员在后端之间快速切换（NHibernate 到 EF 或 EF 到 NHibernatE），同时最大限度地减少代码更改量。生成的数据上下文为您管理 NHibernate 会话，同时让您可以访问查询扩展、缓存等。此外，您不会丢失任何核心 NHibernate 功能，因为我们只是扩展了核心库。所有核心功能都在高级属性下的 DataContext 上可用。

PS，发布问题并获得及时回复的最佳地点是通过[我们的论坛](http://community.codesmithtools.com/Template_Frameworks/f/67.aspx)。

# nginx - 如何关闭或指定nginx错误日志位置？

> ID：13371925
> 
> 赞同：25
> 
> 时间：2012-11-14T01:54:10.503
> 
> 标签：nginx

我自己在 Ubuntu 上编译了 nginx。我用 -c nginx.conf 参数启动我的 nginx。在我的 nginx.conf 文件中，我尝试关闭错误日志但失败了。

```
error_log /dev/null crit; 
```

仍然得到错误信息： nginx: [alert] could not open error log file: open() "/usr/nginx/logs/error.log" failed (2: No such file or directory)

如何关闭此日志或更改其位置？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-14T13:21:01.227

禁用错误日志的语法是可以的，但[文档](http://wiki.nginx.org/CoreModule#error_log)声明在读取配置之前使用默认日志文件。（这似乎是合理的，因为否则它会如何告诉您您的配置中有错误）

尝试使用运行 nginx 的用户的正确权限手动创建此文件。或者尝试以 root 身份启动服务器。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-15T19:22:39.133

我在启动 nginx 时使用 -p 参数解决了这个问题，例如：

```
/home/ubuntu/nginx/sbin/nginx -c /home/ubuntu/nginx/conf/nginx.conf -p /home/ubuntu/nginx 
```

这将在配置中指定的任何日志路径前面加上前缀目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-10T07:21:54.953

我刚刚通过使用此配置参数解决了这个问题：

```
./configure --prefix="$HOME/nginx" --error-log-path=/dev/stderr 
```

由于我从不将此 nginx 用作守护程序并始终在 shell 中运行它，因此将错误记录到 stderr 是有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-26T05:56:13.860

你不能通过指定`-p`前缀来解决问题；因为这只适用于配置文件中的指令；正如 RickyA 已经注意到的那样，问题是 nginx 甚至在打开配置之前就想要打开一个编译错误日志。出于显而易见的原因，更改已编译错误日志的权限并不理想。

一种解决方法是将错误日志指定为命令行上的配置：

```
$ nginx -p . -g 'error_log error.log;' 
```

或者

```
$ nginx -p . -g 'error_log stderr;' 
```

您仍然会收到 [警报]，但至少它允许我在 Ubuntu 上以非 root 用户身份启动 nginx。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-02T21:55:44.700

根据[nginx.org 邮件列表上的这篇文章](http://mailman.nginx.org/pipermail/nginx/2009-June/013326.html "0.7.60：无法打开错误日志")（下面引用的摘录），它`%%ERROR_LOG_PATH%%`被设置为编译选项，并在启动时立即检查，导致“无法打开”警报。指定前缀 (with `-p`) 可能有助于抑制警报，但*前提*是在编译时将`%%ERROR_LOG_PATH%%`指定为**相对路径。**

您可以检查它是如何在您当前的可执行文件中指定的

`nginx -V 2>&1 | grep -oE 'error-log-path=\S*'`

这就是为什么@Michael 提出的解决方案适用于某些人，但不适用于其他人。

> 请参阅更改日志：
> 
> nginx 0.7.53 的变化
> 
> ...
> 
> *) 更改：现在由 --error-log-path 设置的日志是从一开始就创建的。
> 
> *) 功能：现在启动错误和警告输出到 error_log 和 stderr。
> 
> ...
> 
> 现在编译为 error_log 值，始终用于在启动时记录错误（如果 nginx 无法打开它，则会发出警告）。读取配置文件后 - 将使用配置中的 error_log。
> 
> 如果您使用相对于前缀的 error_log 路径编译 nginx - 应该可以通过 -p 开关覆盖启动 error_log。
> 
> 马克西姆·杜宁

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-04T17:13:29.920

无需使用命令行参数。只需确保将 error_log 指令添加到 nginx.conf 的最顶部或至少在可能出现任何错误消息之前添加。

nh2 从 2016 年 1 月开始的评论表明，这个选项至少可以使用几年了。我可以确认它有效并且不那么麻烦。与替代方案相比，对 nginx.conf 的自定义不太可能导致打包 nginx 安装的更新出现问题。

# applescript - AppleScript 中的名称扩展不起作用

> ID：13371926
> 
> 赞同：2
> 
> 时间：2012-11-14T01:54:14.783
> 
> 标签：applescript

我正在尝试显示我选择的文件的扩展名。我究竟做错了什么？

```
 set theFile to (choose file with prompt "Select a file to transfer:")
    set ext to name extension of theFile
    display dialog ext as text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:02:49.620

尝试：

```
tell application "System Events" to set ext to name extension of theFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:24:17.580

tell application "Finder" set theFile to choose file {} set ext to name extension of theFile display dialog "la extenxion es " & ext end tell

# excel - Excel中的求和函数

> ID：13371927
> 
> 赞同：0
> 
> 时间：2012-11-14T01:54:16.133
> 
> 标签：excel, excel-formula

晚上所有：

我正在尝试根据不同的值对列中的数值求和。我怎样才能做到这一点？=总和（A）？我想根据 B 的 10 添加 A 的值。

这是我想要尝试做的简单屏幕截图：

![在此处输入图像描述](../Images/cd33ee0bd1779b8282d43ff34b0d34fb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:59:14.340

您可以使用 a`SUMIF`来完成我相信您要实现的目标。在您的示例中的单元格`C1`中：

```
=SUMIF(B:B,B1,A:A) 
```

这会将总和放在 B 列中每次出现的值旁边。您可以只复制 B 列中的唯一值，如果这是您要查找的内容，则执行相同操作：

![在此处输入图像描述](../Images/4bb9f5ae853ce2cf9418ac8491fdc1d3.png)

# c++ - 并行处理碰撞对

> ID：13371929
> 
> 赞同：0
> 
> 时间：2012-11-14T01:54:31.977
> 
> 标签：c++, parallel-processing, openmp, collision

我正在编写一些用于并行处理冲突的代码，预期的结果是每个线程都有一个加速，但是我没有在数据处理上得到任何加速，因为我里面有一个关键部分`parallel_reduce()`，我相信它的序列化太多了对对象的访问。这是代码的样子：

```
do {
    totalVel = 0.;
#pragma omp parallel for
    for (unsigned long i = 0; i < bodyContact.size(); i++) {
        totalVel += bodyContact.at(i).bodyA()->parallel_reduce();
        totalVel += bodyContact.at(i).bodyB()->parallel_reduce();
    }
} while (totalVel >= 0.00001); 
```

有没有办法通过使其并行或访问的序列化太多来获得更快的速度？

观察：

*   **身体A（）**和**身体B（）**是在 bodyContact 容器内重复很多次的对象。
*   目前`parallel_reduce()`只做一次乘法（临界区），但会变得更复杂。

```
double parallel_reduce(){
    #pragma omp critical
        this->vel_ *= 0.99;
        return vel_.length();
    }
```

实际时间：

*   序列号，25.635
*   平行，123.559

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:58:32.427

使用 OpenMP 结构总是有成本的，因此避免在循环中使用并行，遵循每次新线程时它可以启动的实现，而不是重新唤醒之前启动的线程。

事实上，如果 bodyContact.size() 很小并且 do {} 步数很大并且 parallel_reduce 非常快，那么仅使用几个 OpenMP pragma 就很难具有可伸缩性。

```
#pragma omp parallel shared(totalVel) shared(bodyContact)
{
   do {
       totalVel = 0.;
       #pragma omp for reduce(+:totalVel)
       for (unsigned long i = 0; i < bodyContact.size(); i++) {
          totalVel += bodyContact.at(i).bodyA()->parallel_reduce();
          totalVel += bodyContact.at(i).bodyB()->parallel_reduce();
       }
   } while (totalVel >= 0.00001);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:59:34.010

以上可能不仅速度较慢，而且很可能是错误的；所有线程都在尝试更新相同的 totalVel。大量的竞争条件，还有争用、缓存失效等。

假设这些`parallel_reduce()`东西没问题，你会想要更多类似的东西

```
do {
    totalVel = 0.;
#pragma omp parallel for default(none) shared(bodyContact) reduction(+:totalVel)
    for (unsigned long i = 0; i < bodyContact.size(); i++) {
        totalVel += bodyContact.at(i).bodyA()->parallel_reduce();
        totalVel += bodyContact.at(i).bodyB()->parallel_reduce();
    }
} while (totalVel >= 0.00001); 
```

这将正确地 [减少](http://en.wikipedia.org/wiki/OpenMP#Reduction)。`totalVel`

# android - 如何在Android中获取经度和纬度

> ID：13371932
> 
> 赞同：3
> 
> 时间：2012-11-14T01:54:50.853
> 
> 标签：android, android-location

我想找到我当前位置的经度和纬度，但我一直得到**NULL**。

```
double lat = loc.getLatitude(); //Cause the result is null, so can't know longitude and latitude
double lng = loc.getLongitude();

 LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);  
    String provider = LocationManager.GPS_PROVIDER;  
    Location location = locationManager.getLastKnownLocation(provider); //result is null! 
```

这是获取 GPS 状态的代码。它工作正常：

```
public void onGpsStatusChanged(int event) { // get the GPS statue  
                LocationManager locationManager = (LocationManager) GpsActivity.this.getSystemService(Context.LOCATION_SERVICE);  
                GpsStatus status = locationManager.getGpsStatus(null);  
                String satelliteInfo = updateGpsStatus(event, status);
                myTextView.setText(satelliteInfo);//work fine ,searched satellite:16
    }
    };
        private String updateGpsStatus(int event, GpsStatus status) {  
            StringBuilder sb2 = new StringBuilder("");  
            if (status == null) {  
                sb2.append("searched satellite number" +0);  
            } else if (event == GpsStatus.GPS_EVENT_SATELLITE_STATUS) {  
                int maxSatellites = status.getMaxSatellites();  
                Iterator<GpsSatellite> it = status.getSatellites().iterator();  
                numSatelliteList.clear();  
                int count = 0;  
                while (it.hasNext() && count <= maxSatellites) {  
                    GpsSatellite s = it.next();  
                    numSatelliteList.add(s);  
                    count++;  
                }  
                sb2.append("searched satellite number:" + numSatelliteList.size());  
            }
            return sb2.toString();  
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T01:58:06.687

`getLastKnownLocation()`仅返回最近的 GPS 定位（如果可用）。您需要实现 LocationListener 并用于[`LocationManager#requestLocationUpdates()`](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)获取新位置。

* * *

基本实现：

```
public class Example extends Activity implements LocationListener {
    LocationManager mLocationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        Location location = mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if(location != null) {
            // Do something with the recent location fix
            //  otherwise wait for the update below
        }
        else {
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        }
    }

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            Log.v("Location Changed", location.getLatitude() + " and " + location.getLongitude());
        }
    }
    // etc..
} 
```

# javascript - Javascript setinterval 函数在 MAC Safari 上不起作用

> ID：13371939
> 
> 赞同：0
> 
> 时间：2012-11-14T01:55:32.127
> 
> 标签：javascript, safari, setinterval

我想等待 30 秒，然后每 30 秒开始轮询一次 API。我正在使用以下代码

```
 setTimeout(function() {
    var poll = setInterval(function() {
      self.poll()
    }.bind(self), 30000)
  }, 30000); 
```

虽然这个东西适用于 Chrome IE 和 FF 以及 windows 上的 safari。它不适用于 MAC Safari。

有人可以指导我吗？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:57:52.407

问题很可能是您使用的是稍旧版本的 Safari。

Safari`Function.prototype.bind`最近获得了收益。你应该做的是测试它，如果没有，应用垫片。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)

为了验证，做一个简单的`console.log`or `alert`of `Function.prototype.bind`。我猜它会出现`undefined`。

# php - PHP Exceptions - try/catch necessary?

> ID：13371940
> 
> 赞同：4
> 
> 时间：2012-11-14T01:55:34.567
> 
> 标签：php, exception, exception-handling, try-catch

I started using "real" Exceptions instead of custom error-functions.

I think I don't need a try/catch-block everytime and its okay just to throw an exception but now I get an fatal error because of these uncaught exceptions.

Everything works fine when I set error_reporting(0) but I want to avoid errors at all. Does anyone know an alternative to try/catch or how to throw an exception without getting an fatal error?

Thanks in advance!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T01:58:18.170

You can use [`set_exception_handler()`](http://sg2.php.net/set_exception_handler) for that and handle any uncaught exceptions yourself.

The callback that you register will receive the exception as its first and only argument. Registering a dummy function is possible, however:

1.  In a production environment it's recommended to log the exception instead of muffling it; this way you can keep track of exceptions that you didn't expect.

2.  The script execution halts after your handler is done.

# 3d - 我的 SceneJS 代码有什么问题？

> ID：13371941
> 
> 赞同：0
> 
> 时间：2012-11-14T01:55:57.380
> 
> 标签：3d, webgl, scenejs

我的 HTML 代码：

```
<body onload= "main()" bgcolor="white">
        <div>
        <label id="3dobjects">test</label>
        </br>
        <canvas id="theCanvas" width="720" height="405">
        </canvas>
        </br>
        <label id="fpsout"></label>
        </div>  
</body> 
```

我的 SceneJS 脚本：

```
<script type="text/javascript">
         var N=10;
         function average(v){
             var items = v.length;
             var sum = 0.0;
             for (i = 0; i<items; i++)
             sum += v[i];
             return (sum/items);
           }

         function main()
         {

          SceneJS.createScene({
          type: "scene",
          id: "theScene",
          canvasId: "theCanvas",
          nodes: [{
            type:"library",
              id:"mylib",
              nodes:[]
            },
            // Viewing transform specifies eye position, looking at the origin by default
            {
              id:"lookat",
              type: "lookAt",
              eye : { x: 0.0, y: 1.0, z: 80.0 },
              up : { z: 1.0 },
              look:{x:0,y:0,z:0},
              nodes: [
                  /* Camera describes the projection*/
                  {
                type: "camera",
                optics: {
                type: "perspective",
                fovy : 45.0,
                aspect : 1.78,
                near : 0.10,
                far : 300.0
                  },
               nodes: [
                       {
                           type: "renderer",
                           clearColor: { r: 0.0, g: 0.0, b: 0.0 },
                           clear: {
                               depth : true,
                               color : true
                       },

                  nodes: [
                      // Light Source
                      {
                    type: "light",
                    mode:                   "point",
                    color:                  { r: 1.0, g: 1.0, b: 1.0 },
                    diffuse:                true,
                    specular:               true,
                    pos:{ x: 10.0, y: 10.0, z: 10.0 }
                    },

                     // Tranform
                      {
                    type: "rotate",
                    id: "pitch",
                    angle: 0.0,
                    x : 1.0,    
                    nodes: [
                        {
                          type: "rotate",
                          id: "yaw",
                          angle: 0.0,
                          y : 1.0,
                          nodes: [       
                              // Lights Properties
                              {
                                type: "material",
                                id:"cubeviewspace",
                                emit: 0.1,
                                  baseColor:      { r: 0.8, g: 0.8, b: 0.8 },
                                  specularColor:  { r: 0.8, g: 0.8, b: 0.8 },
                                  specular:       0.7,
                                  shine:          10.0
                              }
                              ]
                            }
                        ]
                      }
                      ]
                       }
                       ]
                  }
                  ]
            }
            ]
        });
         var scene = SceneJS.scene(theScene);
         for(var i=0; i<N; i++){
           scene.findNode("cubeviewspace").add("node",{
          type:"translate",
            id:"balltrans"+i,
            x:(Math.random()-0.5) * scale,
            y:(Math.random()-0.5) * scale,
            z:(Math.random()-0.5) * scale,
            nodes:[{
              type: "cube",
            id: "ball"+i
            }]
            });
         }  
         // Printing Number Of Cubes
         document.getElementById('3dobjects').innerHTML = "The number of Cube Objects: " +N;
         var t0 = (new Date()).getTime();
         var t = 0;

         var fpss = [];
         scene.start({
        idleFunc:function(){
          var t1 = (new Date()).getTime();
          fpss.push(1000/(t1 - t0));
          if(fpss.length>200)
            fpss.shift();
          // Printing fps 
          document.getElementById('fpsout').innerHTML = "The number of Cube Objects: " +average(fpss);
          t0 = t1;
          t++;
        }
           });
     }

</script> 
```

首先抱歉，如果我避免发布此问题的任何规则。我的目的是找到问题的解决方案，但仅此而已。SceneJS API 对我的编程来说是非常新的，但我正在努力编写最好的代码。我试图在整个空间中打印立方体并计算相应的 FPS。我什至看不到屏幕上的画布，而只是空的浏览器。我一直在尝试不同的方法（几乎完全编辑了以前的版本）来修复它，但我的努力是徒劳的。我请求是否有人在这个问题上帮助我。我非常感谢这个人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:46:11.230

您必须更改以下代码

```
var scene = SceneJS.scene(theScene); 
```

至

```
var scene = SceneJS.scene("theScene"); 
```

在场景 ID 的任一侧添加***“ 。***

并添加

```
var scale = any_value_you_want; 
```

你省略了“比例”变量。

# actionscript-3 - 如何计算播放中的当前声音循环（0、30）

> ID：13371943
> 
> 赞同：1
> 
> 时间：2012-11-14T01:56:03.280
> 
> 标签：actionscript-3, audio

我正在播放一个声音文件 (mp3) 并循环播放 30 次。

```
soundChannel = soundLoop.play(0, 30); 
```

我想将当前循环显示为文本字段中的数字。已尝试使用 eventListener 来确定每个循环何时重新启动，但我认为 Event.SOUND_COMPLETE 在加载声音时调度，而不是在每次重复播放时调度。

我将不胜感激在这方面的一些指导。谢谢。

**使用工作代码进行编辑** 感谢@Barış

```
 var lastPosition:Number;
    var loops:int=1;
    var timerLoops:Timer = new Timer(1000);
    timerLoops.addEventListener(TimerEvent.TIMER, startTimerLoops);

    function startTimerLoops():void
    {
        timerLoops.start();

        if(lastPosition > soundChannel.position)
            loops++;
            lastPosition = soundChannel.position;
            trace("Playing " + loops + " of 30" + "-" + lastPosition);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:18:25.360

`soundChannel.position`是从声音开始的毫秒数。声音循环后重置为 0。您可以跟踪它以确定声音是否循环播放。

您的更新/输入框架中的以下内容可以工作：

```
private function update():void
{
   if(lastPosition > soundChannel.position)
      loops++;
   lastPosition = soundChannel.position;
} 
```

# vb.net - 显示一个无模式的表单，但只有一个

> ID：13371948
> 
> 赞同：1
> 
> 时间：2012-11-14T01:56:21.577
> 
> 标签：vb.net, forms, instance, show, modeless

VB2010。我一定错过了一些东西，因为在搜索了一个小时后我找不到解决方案。我想做的很简单。在我的应用程序中，我想显示一个无模式表单，以便它浮动，而用户仍然可以与主表单交互。

```
dim f as New frmColors
f.Show(Me) 
```

但我在任何时候都只想要一个表单实例。那么如何防止多次显示实例，如果有一个实例，那么就给它焦点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:06:22.573

像这样的事情对你有用吗，如果表格已经可见，你不能做 a `Show`，你可以做 a `BringToFront`，你也可以检查表格是否已经被处理，这样你就可以新建一个。

```
Public Class Form1
    Dim f As New frmColors

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        If f.IsDisposed Then f = New frmColors 'To handle user closing form
        CheckForm(f)
    End Sub

    Private Sub CheckForm(frm As Form)
        If frm.Visible Then
            frm.BringToFront()
        Else
            frm.Show(Me)
        End If
    End Sub    
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:35:28.203

使您的表单遵循单例模式。我不能保证这个[样本](http://www.codeproject.com/Articles/5000/Simple-Singleton-Forms)，但从文本来看，它似乎做了你想做的事。

# xaml - 在鼠标悬停/获得焦点时，Windows 8 Metro 应用程序中的按钮消散器，如何禁用该效果？

> ID：13371949
> 
> 赞同：0
> 
> 时间：2012-11-14T01:56:35.910
> 
> 标签：xaml, button, microsoft-metro, winrt-xaml, visualstates

在我的应用程序的许多地方，我在 UI 中使用按钮，但我的疑问是：-

1）当按钮获得焦点或鼠标悬停时，按钮背景消失（即，此时它变得不可见），

再次离开按钮（按钮失去焦点）后，它像往常一样显示按钮

所以，在鼠标悬停/获得焦点时，按钮会以这种方式运行。

如果我不想要这种效果，我该怎么办。请告诉我 。

2）我可能错了，但我的猜测是这背后应该有一些视觉状态属性，我需要禁用它，但我不知道在哪里禁用？，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:06:08.663

我相信您将需要重新模板控件，以便您可以覆盖视觉状态。您可以在 Blend 中通过右键单击并选择编辑样式的副本来轻松完成此操作。

# d - 将 void* 参数数组转换为静态类型

> ID：13371950
> 
> 赞同：1
> 
> 时间：2012-11-14T01:56:49.373
> 
> 标签：d, dmd

如果我有如下课程：

```
import std.traits;

class Test(T) if(isCallable!T)
{
 alias ParameterTypeTuple!T Parameters;
 alias ReturnType!T delegate(Parameters) DelegateType;

 DelegateType m_delegate;

 void Foo(void ** arguments)
 {
  // I want to convert the void* array to
  // the respective type of each argument
  m_delegate(arguments);
 }
} 
```

如何将`C`void 指针数组转换为它们各自的类型（其中定义了它们的类型，`Parameters`并且长度`arguments`等于 的长度`Parameters`）然后调用函数？

我尝试使用如下元组来执行此操作：

```
void Foo(void ** arguments)
{
 Tuple!(Parameters) tuple;

 foreach(index; 0 .. Parameters.length)
 {
  // Copy each value to the tuple
  tuple[index] = *(cast(Parameters[index]*) arguments[index]);
 }

 // Call the function using the tuple (since it expands to an argument list)
 m_delegate(tuple);
} 
```

但这不会编译，因为编译器抱怨“`index`在编译时无法读取变量”。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:02:39.953

沿着这些思路做一些事情：

```
ParameterTypeTuple!T args;

foreach(i, arg; args) {
    args[i] = cast(typeof(arg)) arguments[i];
} 
```

你应该开始

# python - python3 for循环字典

> ID：13371952
> 
> 赞同：-1
> 
> 时间：2012-11-14T01:57:16.043
> 
> 标签：python, python-3.x

> **可能重复：**
> [写python3 zip的另一种方法是什么](https://stackoverflow.com/questions/13371279/whats-another-way-to-write-python3-zip)

有什么更好的方法来编写这些东西我被介绍给这些代码，但我不习惯以这些方式看到它们：

```
(alla,allc,) = (set(s) for s in zip(*animaldictionary.keys())) 
```

你还能怎么写这个

```
print('\n'.join(['\t'.join((c,str(sum(animaldictionary.get(ac,0) 
for a in alla 
     for ac in ((a,c,),))//12)))
             for c in sorted(allc)])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:04:08.057

回到家后，我将用更全面（没有双关语）的结果更新我的答案，并有更多时间围绕这一系列有趣的理解进行思考。现在，您需要查看以下内容：

*   [列出理解](http://docs.python.org/3.3/tutorial/datastructures.html#tut-listcomps)
*   [嵌套列表理解](http://docs.python.org/3.3/tutorial/datastructures.html#nested-list-comprehensions)
*   [集合和集合理解](http://docs.python.org/3.3/tutorial/datastructures.html#sets)

# sql - 两个下划线的正则表达式

> ID：13371953
> 
> 赞同：0
> 
> 时间：2012-11-14T01:57:26.550
> 
> 标签：sql, regex

匹配带有两个下划线的字符串的正则表达式会分解 3 个字符系列。如果可能的话，这也可以是 SQL 'like' 语句。

匹配：

```
b_06/18/2012_06:02:34 PM 
y1289423_06/14/2011_03:06:35 AM 
23479693_11/01/2011_06:12:55 PM 
```

不匹配：

```
CCC Valuation_b_06/28/2012_05:57:20 PM 
CCC Valuation_CCC Valuation_b_06/28/2012_05:57:20 PM 
doc1_2.pdf 
testdoc.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:15:47.670

如果所有数据都与您的示例一致，那么这应该有效：

**编辑**：更新以匹配整行。这将排除无效列表中的任何子字符串匹配。但是，它假定 OP 不想匹配任何子字符串。

```
^[a-z0-9]+_[0-9\/]+_[A-Z0-9:\s]+$ 
```

例如，在 python 中：

```
>>> import re
>>> s = 'b_06/18/2012_06:02:34 PM'
>>> pattern = '^[a-z0-9]+_[0-9\/]+_[A-Z0-9:\s]+$'
>>> m = re.match(pattern, s)
>>> m.group(0)
'b_06/18/2012_06:02:34 PM'            # <======== matches from valid list

>>> s = 'CCC Valuation_CCC Valuation_b_06/28/2012_05:57:20 PM'
>>> m = re.match(pattern, s)
>>> m.group(0)
Traceback (most recent call last):    # <======= does NOT match from invalid list
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'group' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:06:35.760

```
^[^_]+_[0-9\/]+_[0-9:]+\s[AM|PM] 
```

# javascript - 如何在 textarea 的行之外添加图像？

> ID：13371954
> 
> 赞同：2
> 
> 时间：2012-11-14T01:57:33.487
> 
> 标签：javascript, jquery, html, css, textarea

想象一下当您的代码出现错误时 Eclipse 和其他 IDE 会做什么。它类似于：

> X 编号=5；

例如，其中 X 是带有白色 X 的红色圆圈的图像。我怎么能在一个网站上产生这样的效果？考虑到文本区域是可滚动的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:37:17.820

[http://ace.ajax.org/](http://ace.ajax.org/) Ace 解决了我的需求。这是一个 javascript 增强的文本区域，重点是代码编辑。BSD 许可。

（在我找到 ACE 方式后编辑）

首先按照站点中的说明设置编辑器，然后调用

A) 综合方式：

```
editor.getSession().setAnnotations([{row: lineNum, column: 0, html:"foo<br/>bar", type:"error"}]); 
```

其中 lineNum 从 0 开始（即：0 是第一行）。还有“警告”类型，两者都提供默认的适当图标。可能还有其他类型。

B) Hack 版本，或者更强大的方式？，或者添加你喜欢的 css 类的方式：

```
editor.getSession().addGutterDecoration(0,"error_line"); 
```

其中 0 是从零开始的行号（即：第一个），“error_line”是您自己定义的 css 类。然后你使用 background-image: url(''); 选择要使用的图标。它还有其他非常棒的功能，例如行号和许多常用语言的语法突出显示。

# c - C中类型之间的转换

> ID：13371955
> 
> 赞同：1
> 
> 时间：2012-11-14T01:57:35.037
> 
> 标签：c, types, operators, unsigned, signed

我知道，每当运算符用于具有不同类型的两个操作数时，结果类型将是两个操作数之间的“主导”类型。
例如，结果
`(int) + (float)`
将是一个浮点数。
另一个例子是：
`(char) + (double)` 结果是双倍的。

这对于有符号变量是正确的，并且仅适用于有符号变量。

但是当我们将有符号变量与无符号变量结合起来时会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T02:08:25.263

详细信息在 C11, 6.3.1.8 中。总结一下：

*   如果无符号类型等于或宽，则将有符号类型转换为无符号。

*   否则，如果有符号类型可以保存无符号类型的所有值，则将无符号类型转换为有符号类型。

*   否则，两者都转换为对应于有符号类型的无符号版本。

“更广泛”是指“具有更高的转化排名”。

示例（在某些特定架构上，例如`sizeof(short) == 2`and `sizeof(long) == sizeof(unsigned int) = 4`）：

```
int + unsigned int     => unsigned int  (first rule, equal rank)

long + unsigned short  => long          (second rule, long contains u. short)

long + unsigned int    => unsigned long (third rule) 
```

# ruby - 为什么在 Sinatra 中使用 Rack-Flash？

> ID：13371957
> 
> 赞同：4
> 
> 时间：2012-11-14T01:57:42.033
> 
> 标签：ruby, sinatra, rack

如果这是一个有明显答案的菜鸟问题，请原谅我，但是在 Sinatra 中使用[机架闪存有什么意义呢？](https://github.com/treeder/rack-flash)

感觉就像机架闪存功能可以很容易地自己编写，而 gem 有点矫枉过正。Rack 是否提供了我缺少的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:24:03.187

自述文件解决了这个问题：

```
flash[:notice] = "You can stop rolling your own now." 
```

> 感觉就像机架闪存功能可以很容易地自己编写，而 gem 有点矫枉过正。Rack 是否提供了我缺少的东西？

是的：

*   它作为 gem 分发，因此您不必跨项目复制 Flash 实现。这种可重用性是关键。
*   该接口与 Rails 一致，因此您代码的未来维护者将不必研究您的特殊实现。
*   它在社区中得到了很好的测试和开发。
*   您不会浪费时间重新发明一个小齿轮。

除非您的应用程序的核心功能是闪烁消息，否则这个提供上述好处的大约 100 SLOC 的小宝石几乎不会过大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:46:17.993

我只是在我的会话数据中添加一条消息，如果它在那里，则将其闪烁。这也是机架式闪存所做的。我看过它一次，我需要查找它的 API 的时间是我需要自己一遍又一遍地编写它的时间。也许我在这里遗漏了一些东西，但是 iirc 的一个 flash gem 打破了一些 Sinatra 更新，如果你依赖 gem，那就是痛苦开始的地方。

# gtk - 检测ctrl+点击pygtk中的按钮

> ID：13371968
> 
> 赞同：2
> 
> 时间：2012-11-14T01:58:26.143
> 
> 标签：gtk, pygtk

我想检测用户单击按钮时是否按住 ctrl。'clicked' 信号似乎没有向回调传递足够的信息来解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T05:48:17.707

如果您可以连接[`button-press-event`](http://developer.gnome.org/pygtk/2.24/class-gtkwidget.html#signal-gtkwidget--button-press-event)或[`button-release-event`](http://developer.gnome.org/pygtk/2.24/class-gtkwidget.html#signal-gtkwidget--button-release-event)代替`clicked`，则`event`传递给回调的参数可用于获取修饰符状态（使用[`get_state`](http://developer.gnome.org/pygtk/2.24/class-gdkevent.html#method-gdkevent--get-state)）并检查是否按下了控制键。例如。

```
def button_release_callback(widget, event, data=None):
    if event.get_state() &  gtk.gdk.CONTROL_MASK:
        print "Ctrl held"
    else:
        print "Ctrl not held"
...
button.connect("button-release-event", button_release_callback) 
```

希望这可以帮助！

# php - 从多个 xml 元素创建一个 foreach 数组

> ID：13371970
> 
> 赞同：1
> 
> 时间：2012-11-14T01:58:39.730
> 
> 标签：php, xml, arrays

我一直在尝试创建一个`foreach`循环，该循环`ListingId`将从 XML 文件中获取所有内容，但由于某种原因，我只能获取一个“Id”

**XML结构：**

```
<List>
    <Listing>
        <ListingId></ListingId>
</Listing>
    <Listing>
        <ListingId></ListingId>
</Listing>
    <Listing>
        <ListingId></ListingId>
</Listing>
</List> 
```

**PHP：**

```
$xml = simplexml_load_file("domain.co.nz/xml.xml");

        foreach($xml->List->Listing->ListingId as $value)
        {

            $xmlArray[] = $value;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:25:04.603

```
<?php
$xml = '<List>
    <Listing>
        <ListingId>12</ListingId>
</Listing>
    <Listing>
        <ListingId>13</ListingId>
</Listing>
    <Listing>
        <ListingId>14</ListingId>
</Listing>
</List>';

$xml = simplexml_load_string($xml);
$arr = array();

foreach($xml->Listing as $value)
{
    $arr[] = intval($value->ListingId);
}

print_r($arr); //Array ( [0] => 12 [1] => 13 [2] => 14 ) 
```

# jquery - 如何使用 cookie 检测创建一个常见的 jquery 免责声明/验证（是/否选项）窗口？

> ID：13371973
> 
> 赞同：2
> 
> 时间：2012-11-14T01:59:10.433
> 
> 标签：jquery, cookies, dialog, window

我一直在让 jquery 插件工作时遇到问题。应该会出现一个 jquery 窗口并询问用户是否同意或不同意条款。如果用户同意按“是”，它将存储一个 cookie，并且在 cookie 过期之前窗口不会返回。如果他们按否，它将重定向到另一个网址。

脚本如下。

[http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/build-a-popup-modal-window-using-the-jquery-reveal-plugin/](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/build-a-popup-modal-window-using-the-jquery-reveal-plugin/)

当用户单击是/绿色按钮时，如何集成 jquery.cookies.js 来编写 cookie？我用谷歌搜索了回调和事情无济于事。

如何使显示插件以这种方式工作？

请帮忙！

（PS 另一个用户提出的问题类似于但不一样，因为它通过单击关闭而不是单击是否按钮来执行相同的操作。 [我对这个 jQuery cookie 做错了什么？](https://stackoverflow.com/questions/9243510/what-am-i-doing-wrong-with-this-jquery-cookie)）

以下是我到目前为止所拥有的

```
<!--jQuery-->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>  -->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.reveal.js"></script>
    <script src="js/jquery.cookie.js"></script>

<script type="text/javascript">
$(document).ready(function() {

if (!(jQuery.cookie("agree"))) {  

    $('#modal').reveal({ // The item which will be opened with reveal
                    animation: 'fade',                   // fade, fadeAndPop, none
                    animationspeed: 500,                       // how fast animtions are
                    closeonbackgroundclick: false,              // if you click background will modal close?
                    dismissmodalclass: 'close'    // the class of a button or element that will close an open modal
                });
}
});

$(".close").live("click",function () {
    $.cookie("agree", 1, { expires: 1, path: '/' });
});     
</script>

</head>
<body>

<div id="modal">
<img src="images/images.jpg" alt="image test" width="360" height="194" hspace="0" vspace="0" border="0" align="top">
    <div id="heading">heading/div>

    <div id="content">
        <p>Do you agree yes or no?</p>

        <a href="#" class="button green close"><img src="images/tick.png">Yes</a>

        <a href="http://google.com" class="button red close"><img src="images/cross.png">No</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:15:30.893

**HTML**

```
<div id="modal">

    <img src="images/images.jpg" alt="image test" width="360" height="194" hspace="0" vspace="0" border="0" align="top" />

    <div id="heading">heading/div>

    <div id="content">

    <p>Do you agree yes or no?</p>

      <a id='agree' href="#" class="button green close"><img src="images/tick.png" /> Yes </a>            <a href="http://google.com" class="button red close"><img src="images/cross.png" /> No </a>    

    </div>

</div> 
```

**查询**

```
$('document').load(function() {

    //Check cookie value
    if ($.cookie("disclaimer") != 'agree') {

        $('#modal').reveal({ 
            animation: 'fade',                   
            animationspeed: 500,                       
            closeonbackgroundclick: false,
            dismissmodalclass: 'close'    
        });

    }

    // Attach click function to button '#agree' to set cookie
    $("body").on("click", "#agree", function () {
        $.cookie("disclaimer", "agree", { expires: 365, path: '/' });
    });

}); 
```

# ios - 令牌的 NSPredicate 和 NSArray

> ID：13371978
> 
> 赞同：0
> 
> 时间：2012-11-14T01:59:32.693
> 
> 标签：ios, core-data, nspredicate

我过去曾问过这个问题，但无法得到明确的答案。我在 CoreData 中有一个像这样的对象，KeyWord(word, chapter)

```
Word      Chapter
cold      chapter1
cold      chapter2
cold      chapter3
weather   chapter1
weather   chapter2
humidity  chapter7
Florida   chapter8
Florida   chapter9 
```

我希望用户搜索这些词中的任何一个，例如“寒冷的佛罗里达天气……”
所以，我将搜索分为`NSArray *tokens = [search.text compnentsSeparatedBy:@" "];`

目前，我有这个谓词，它有点工作：

```
[NSPredicate predicateWithFormat@"word contains[cd]%@ AND word contains [cd]%@",words[0],words[1],words[2]..] 
```

但是，问题是我不知道用户将输入多少个单词，所以，有没有办法使用 NSArray 的标记来搜索“单词”列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:06:29.720

查看：

`[NSCompoundPredicate andPredicateWithSubpredicates:/*Your Array Of Contains Predicates Here*/]`

尽管我不清楚您是否想使用该`IN`命令来搜索对象数组/对象集。

`[NSPredicate predicateWithFormat:@"word IN %@", setOfWords]`

# iphone - 创建 NSArray - EXC_BAD_ACCESS？

> ID：13371981
> 
> 赞同：3
> 
> 时间：2012-11-14T01:59:40.657
> 
> 标签：iphone, ios, nsarray, out-of-memory

当我尝试创建时`NSArray purchasedTimeArray`，我遇到了崩溃`EXC_BAD_ACCESS`

```
NSString *blank = @"";
NSArray *purchasedTimeArray = [[NSArray alloc] initWithObjects:
                                   timeRemainingTitle, blank, @"imagename.png", blank, description, 4, nil]; 
```

是的，`timeRemainingTitle`并且`description`仍然存在于内存中。它们都是 NSString。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T02:11:27.643

使用新的 Objective-C 语法：

```
NSArray *purchasedTimeArray = @[ timeRemainingTitle, blank, @"imagename.png", blank, description, @4 ]; 
```

两个好处：

1.  写起来容易多了。
2.  不需要`nil`终止符，并且如果其他值之一`nil`在值中，则所有对象仍会在数组中结束。

如评论中所述，`@4`语法转换为`[NSNumber numberWithInt:4]`.

# arrays - 如何在java中使用2个并行数组加密或解密文本文件？

> ID：13371982
> 
> 赞同：-1
> 
> 时间：2012-11-14T01:59:40.873
> 
> 标签：arrays, encryption

我有两个数组：

```
char[] A={"A","B","C"};
char[] B={"1","2","3"}; 
```

如何将 A 数组解密为 B。例如，如果我写 ABA，它应该变成 121。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:18:23.487

您可以使用一个简单的字典，将您想要的“B”值映射到您给“A”的值。

你可以谷歌“java字典”

# web-services - 水晶报表网络服务运营

> ID：13371983
> 
> 赞同：1
> 
> 时间：2012-11-14T01:59:45.023
> 
> 标签：web-services, crystal-reports

如何使用 Web 服务列出的 Crystal Report Web 服务操作？

我创建了一个 Visual Studio Web 项目并为水晶报表创建了一个 Web 服务。`http://localhost:52567/CrystalReportsWebSite1/CrystalReport1Service.asmx`它显示“支持的操作”列表

```
CrystalReport1Service

The following operations are supported. For a formal definition, please review the Service Description.

DoParameterPrompting
DrillGraph
DrillPartGraph
Export
FindGroup
FindText
GetAvailableExportFormats
GetGroupLevelData
GetInitialReportParts
GetLastPageNumber
GetPage
GetParamPromptingInfo
GetPromptParameterFields
GetReportEngineType
GetReportInfo
GetReportParts
GetTotaller
NavigateToReportPart
Refresh
ResolveParamPromptingResult
TestReport 
```

我在网上跟踪了许多示例，它们完美地工作，使用 Web 服务提供和使用水晶报表。但是没有人展示如何使用这些方法，我无法弄清楚。我的主要目标是获取报告的参数名称，这些操作似乎可以实现这一点。

我仍在学习服务等，所以我可能对这些操作的用途有所了解。

# sql - 根据两个字段在记录之间获得 1:1 匹配，然后将它们组合在一起？

> ID：13371985
> 
> 赞同：0
> 
> 时间：2012-11-14T01:59:51.727
> 
> 标签：sql, tsql

我有两个这样的表：

```
Date    Client  Amount | table x
123     abc     123
456     abc     987
234     xyz     567

Date    Client  Amount | table y
123     abc     234
921     lka     981
234     xyz     123 
```

在我的查询中，我想显示：

```
123     abc     123     | (from x)
123     abc     234     | (from y)
234     xyz     567     | x
234     xyz     123     | y 
```

在没有“合作伙伴”的情况下遗漏所有记录。这在 TSQL 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:09:00.103

```
SELECT a.[Date] , a.[Client] , a.[Amount], 'X' [table]
FROM   tableX a INNER JOIN tableY b 
          ON a.[DATE] = b.[DATE] AND
             a.[Client] = b.[Client]
UNION
SELECT a.[Date] , a.[Client] , a.[Amount], 'Y' [table]
FROM   tableY a INNER JOIN tableX b 
          ON a.[DATE] = b.[DATE] AND
             a.[Client] = b.[Client]
ORDER BY [DATE], [Table] 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/079ba/7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T02:16:36.783

```
 select DISTINCT
           case when c='x' then x.date else y.date end date,
           case when c='x' then x.client else y.client end client,
           case when c='x' then x.amount else y.amount end amount,
           c from_
      from tablex x
      join tabley y on x.date=y.date and x.client=y.client
cross join (select 'x' union all select 'y') z(c)
  order by date, client, from_; 
```

公认解决方案的替代方案。

请注意，如果您有来自任一/两个表的多个匹配项，则来自“x”的所有结果将列在来自“y”的匹配项之前。例如

```
create table tablex (Date int, Client char(3), Amount int);
insert tablex select
    123     ,'abc',     123 union all select
    456     ,'abc',     987 union all select
    123     ,'abc',     919 union all select
    234     ,'xyz',     567;
create table tabley (Date int, Client char(3), Amount int);
insert tabley select
    123     ,'abc',     234 union all select
    123     ,'abc',     867 union all select
    921     ,'lka',     981 union all select
    234     ,'xyz',     123;

**Results**

date        client amount      from_
----------- ------ ----------- -----
123         abc    123         x
123         abc    919         x
123         abc    234         y
123         abc    867         y
234         xyz    567         x
234         xyz    123         y 
```

# c# - 使用后台工作者的进度条

> ID：13371987
> 
> 赞同：1
> 
> 时间：2012-11-14T02:00:14.040
> 
> 标签：c#, multithreading, progress-bar

关于如何实现进度条有很多问题，我相信我已经通过了所有这些问题，但我仍然不知道为什么我的进度条不起作用。

嗯，好像是做完操作才可以，这当然不是我想要的。我希望进度条能够正常工作，因为主要操作正在做它的事情。

我的代码很长而且很痛苦，所以我将对其进行简化以使其尽可能基本。

```
private void button1_Click(object sender, EventArgs e)
{
  backgroundWorker1.RunWorkerAsync();
  //Main UI Operation
}

private void BackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
 for (int i = 1; i <= 100; i++)
  {
   // Wait 100 milliseconds.
   Thread.Sleep(100);
   // Report progress.
   backgroundWorker1.ReportProgress(i);     }
  }

private void BackgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs        e)
  {
   progressBar1.Value = e.ProgressPercentage;
  } 
```

就像我说的，我只在主 UI 操作后才看到进度条。

WorkerReportsProgress 设置为 True。最小值和最大值分别为 0 和 100。

我觉得这可能是对线程缺乏了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:16:49.077

我测试了和你一样的代码，发现它有效。您是否忘记将`WorkerReportesProress`属性更改为`True`？

# html - 如何删除文本但保留 HTML 元素、属性和属性值？

> ID：13371988
> 
> 赞同：2
> 
> 时间：2012-11-14T02:00:23.857
> 
> 标签：html, xml, xslt, xpath

使用 XSLT，如何从 HTML 中删除所有文本节点，但保留元素标签、属性名称和属性值？

```
<table id="preserve-this-value">
  <caption>Lose this text node</caption> 
```

转型：

```
<table id="preserve-this-value">
  <caption></caption> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:15:32.053

使用此模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()"/>

</xsl:stylesheet> 
```

它复制除文本节点之外的所有节点（元素、属性）。

# java - Java AES 密钥生成

> ID：13371990
> 
> 赞同：1
> 
> 时间：2012-11-14T02:00:43.070
> 
> 标签：java, encryption, aes

我正在尝试用 java 编写一个简单的密码管理器。我想使用 AES 256 位加密使用存储的密码加密文件。此外，我希望用户能够使用密码解密文件。当在线阅读其他帖子时，几乎所有人都强调简单地使用密码作为密钥是不安全的，他们提到使用随机盐来增加安全性。但我不明白在生成密钥时如何使用随机盐。如果我从用户的密码和随机盐创建密钥，那么当他们尝试解密他们的文件时，我怎么知道盐是什么？这让我完全糊涂了。

目前，我在每一步都使用常量盐通过几个不同的哈希来运行他们的密码。这足够安全还是我错过了什么？任何有关如何从密码安全地生成密钥的帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T04:22:46.277

请记住，**盐不是秘密**。您可以将其附加到加密数据中。加盐的目的是防止有人使用预先计算的由常用密码加密的常用数据的字典作为“破解”加密文件的一种方式。

通过确保盐是**随机**的并将其与密码相结合，您消除了字典攻击的可能性，因为（实际上）黑客不可能拥有使用您的“盐+密码”预加密的数据数据库。（作为初学者，请参阅此页面，来自我的一个教程，关于[基于密码的加密中的盐](http://www.javamex.com/tutorials/cryptography/pbe_salt.shtml)。）

您还（有效地）消除了**冲突**问题：如果在两个文件中出现的相同数据块在加密版本中看起来相同，则在两个文件上使用相同的密码可能会给攻击者提供内容线索。

但是，您通常仍需要采取其他预防措施，这仅仅是因为典型密码通常不包含太多*熵*. 例如，8 个完全随机的小写字母会产生大约 40 位的熵；8 个遵循典型英语模式的小写字母会产生大约 20 位的熵。换句话说，在 2^256 个可能的键中，实际上典型用户会在 2^20-2^40 范围内的一小部分中进行选择。对于精明的用户，情况会好一些，但您不太可能接近 256 位的熵。（考虑在“密码短语”中，每个字符大约有 2.5-3 位熵，所以 30 个字符的密码短语给你大约 75 位熵——老实说，有多少人使用任何东西像一个 30 个字符的密码？；使用“完整”范围的可打印 ASCII 的 8 个完全随机的字符会给你一个略低于 64 位的字符。）

稍微缓解这种情况的一种方法是**使用计算复杂的单向函数****转换密码**（附加盐），这样黑客就需要更长的时间来尝试他们想要猜测的每个密钥。同样，[请参阅此页面了解更多详细信息](http://www.javamex.com/tutorials/cryptography/pbe_key_derivation.shtml)。

 **为了让您大致了解基于密码的文件加密的缺陷，您可能还想看看我几年前编写的[Arcmexer 库，其中包括一个名为 isProbablyCorrectPassword() 的方法。](http://www.javamex.com/arcmexer/)结合用于生成候选密码的字典/算法，您可以使用它来衡量上述方法的有效性（因为 ZIP 文件加密使用这些技术的组合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:07:08.427

使用这个库：[http ://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

这里有一个很好的 AES 示例：

[http://www.jcraft.com/jsch/examples/AES.java.html](http://www.jcraft.com/jsch/examples/AES.java.html)

很多大牌都用这个包，Maven，Eclipse等。**

# objective-c - ABAddressBookGetPersonCount 在 iOS 中返回 -1

> ID：13371996
> 
> 赞同：5
> 
> 时间：2012-11-14T02:01:30.063
> 
> 标签：objective-c, ios

我遇到了 ABAddressBookGetPersonCount 返回 -1 的情况。测试人员向我保证通讯录中确实存在联系人。所有手机都运行 iOS 6.0.1。

这是代码：

```
NSMutableDictionary *myAddressBook = [[NSMutableDictionary alloc] init];
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef people  = ABAddressBookCopyArrayOfAllPeople(addressBook);
int numEntries = ABAddressBookGetPersonCount(addressBook);
if (numEntries == 0)
{
    NSString *title = NSLocalizedString(@"error", nil);
    NSString *description =  NSLocalizedString(@"error_empty_contacts", nil);
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title
                                                    message:description
                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];

    return;
}

NSLog(@"emails: found %d", numEntries); 
```

我无法在我的任何手机上重现这一点，但测试人员已经在 3 部手机上进行了测试。它在 iPhone 5 上正常工作，但在 iPhone 4 或 3 上不能正常工作；

我找不到任何说明 -1 值意味着什么的文档。我假设这是某种错误，但是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:19:22.257

在 iOS 6 下，此代码无效。您必须验证您的应用是否有权访问通讯录。最有可能的是，-1 表示应用在这些设备上没有权限（或未知权限状态）。

从文档中`ABAddressBookRequestAccessCompletionHandler`：

```
CFErrorRef myError = NULL;
ABAddressBookRef myAddressBook = ABAddressBookCreateWithOptions(NULL, &myError);
APLViewController * __weak weakSelf = self;  // avoid capturing self in the block
ABAddressBookRequestAccessWithCompletion(myAddressBook,
  ^(bool granted, CFErrorRef error) {
    if (granted) {
        NSArray *theSmiths = CFBridgingRelease(
          ABAddressBookCopyPeopleWithName(myAddressBook,
            CFSTR("Smith")
          )
        );
        weakSelf.numberOfSmiths = [theSmiths count];
    } else {
        // Handle the error
    }
});
CFRelease(myAddressBook); 
```

如果您需要支持 iOS 5.x 或 4.x，您需要正确检查是否存在新方法。

# php - 生成行，输入后使用Javascript通过href将数据发送到php

> ID：13371997
> 
> 赞同：0
> 
> 时间：2012-11-14T02:01:32.877
> 
> 标签：php, javascript, mysql

我想创建一个可以在单击按钮或链接时添加新行的表，然后让用户输入并将值提交给 php 并将其存储在数据库中。

问题1：

在我的 HTML 中，

```
<script>
    document.getElementById('table').innerHTML +=
    "<td><textarea id='addRow' name='addRow'></textarea></td>";

    var addRow = document.getElementById('addRow').innerHTML;     <-- Is this correct? Because I'm unable to get the data, tried with .value and .innerHTML.

    document.getElementById('table').innerHTML +=
    "<td><a href='page2.php?addRow=" + addRow + "'>Add</a></td>";
</script> 
```

当我添加一行时它工作正常，当我按下`Add`脚本生成的时，它没有获得我输入到textarea的值。

问题2：

从javascript生成的链接，当它被点击时，它会提交一个这样的地址：

```
page2.php?addRow= 
```

该地址由空数据组成，但它也应该保存在其中，`page2.php`因为我没有设置任何值检查。

这是我的`page2.php`代码：

```
<?php
    require("Connections/localhost.php");

    $addRow = $_REQUEST["addRow"];          <-- I tried with $_GET, $_POST, $_REQUEST.
    $query = "INSERT INTO row2 (addRow) VALUES ($addRow)";
    $result = mysql_query($query);

    if($result)
    header("Location:Home.php");

?> 
```

我的代码有什么错误？

编辑 ：

(12/11/2012) 我已将我的代码上传到[这里](http://anonynewbie.site11.com/IMS/Home.html)。我怎么解决这个问题？

(17/11/2012) MySQL 部分，我犯了一些语法错误，即我忘记`' '`为每个 VALUES 加上单引号。

解决了 ：

我将其更改`href`为另一个 javascript 函数。

```
"<td><h4><a href='javascript:send()'>Add</a></h4></td>" 
```

在 中`send()`，我获取 textarea 值并使用`window.location()`. 那就是解决我的问题。

可能是我的代码不是合适的方法，但我下次会尝试改进。