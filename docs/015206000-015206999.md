# StackOverflow 问答 15206000-15206999

# opencv - Image Segmentation for Color Analysis in OpenCV

> ID：15206003
> 
> 赞同：5
> 
> 时间：2013-03-04T16:16:22.723
> 
> 标签：opencv, image-segmentation, watershed

I am working on a project that requires me to:

Look at images that contain relatively well-defined objects, e.g.

![enter image description here](../Images/cc1bae25be2ba6b14202f94b09b6c3e7.png)

and pick out the color of n-most (it's generic, could be 1,2,3, etc...) prominent objects in some space (whether it be RGB, HSV, whatever) and return it.

I am looking into ways to segment images like this into the independent objects. Once that's done, I'm under the impression that it won't be particularly difficult to find the contours of the segments and analyze them for average or centroid color, etc...

I looked briefly into the Watershed algorithm, which seems like it could work, but I was unsure of how to generate the marker image for an indeterminate number of blobs.

What's the best way to segment such an image, and if it's using Watershed, what's the best way to generate the corresponding marker image of integers?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T18:18:20.640

Check out this possible approach:
[***Efficient Graph-Based Image Segmentation*** *Pedro F. Felzenszwalb and Daniel P. Huttenlocher*](http://cs.brown.edu/~pff/segment/)

Here's what it looks like on your image:
![enter image description here](../Images/00b1927f323230bc89c6d12d6658d4c8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:24:38.593

I'm not an expert but I really don't see how the Watershed algorithm can be very useful to your segmentation problem.

From my limited experience/exposure to this kind of problems, I would think that the way to go would be to try a sliding-windows approach to segmentation. Basically this entails walking the image using a window of a set size, and attempting to determine if the window encompasses background vs. an object. You will want to try different window sizes and steps.

Doing this should allow you to detect the object in the image, presuming that the images contain relatively well defined objects. You might also attempt to perform segmentation after converting the image to black and white with a certain threshold the gives good separation of background vs. objects.

Once you've identified the object(s) via the sliding window you can attempt to determine the most prominent color using one of the methods you mentioned.

**UPDATE**

Based on your comment, here's another potential approach that might work for you:

If you believe the objects will have mostly uniform color you might attempt to process the image to:

1.  remove noise;
2.  map original image to reduced color space (i.e. 256 or event 16 colors)
3.  detect connected components based on pixel color and determine which ones are large enough

You might also benefit from re-sampling the image to lower resolution (i.e. if the image is 1024 x 768 you might reduce it to 256 x 192) to help speed up the algorithm.

The only thing left to do would be to determine which component is the background. This is where it might make sense to also attempt to do the background removal by converting to black/white with a certain threshold.

# fonts - 如何在博客中添加 Meera 马拉雅拉姆语 unicode 字体

> ID：15206008
> 
> 赞同：0
> 
> 时间：2013-03-04T16:16:34.590
> 
> 标签：fonts, font-face, blogger

我们在 blogger.com 上有一个博客。现在我们正在使用乔治亚字体来显示我的马拉雅拉姆语内容，但它看起来很糟糕，无法正确阅读。我们在另一个网站上使用了马拉雅拉姆语的 Meera 字体，但它托管在我们自己的服务器上。这里的问题是，博主不允许上传文件。我们有 ttf 格式的字体。如何以 Meera 字体而不是 georgia 显示我的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:36:54.280

如果您的服务器中有字体，您可以将其调用到博客博客或任何其他带有 CSS 的网页。

```
@font-face{font-family:Meera;src:url("//your-server/Meera.eot")}
@font-face{font-family:Meera;src:local('meera'),url('//your-server/Meera.ttf') format("truetype")} 
```

并将字体应用于任何 html 元素。

```
p{font-family:meera,georgia;} 
```

这是以meera 字体显示马拉雅拉姆语的[jsfiddle 演示。](http://jsfiddle.net/Aslamise/Feea6/)

希望这可以帮助。如果它对您有帮助，请为这个答案投票。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T12:21:00.613

将字体放在服务器中并将其添加到页面中。

```
@font-face {
font-family: sans;
font-style: normal;
font-weight: normal;
src: url(Meera.eot);
}

@font-face {
font-family: Meera;
src: local('Meera'), url('Meera.ttf') format("truetype");
} 
```

# python - 如何传递 argparse 参数以充当 kwargs？

> ID：15206010
> 
> 赞同：40
> 
> 时间：2013-03-04T16:16:50.433
> 
> 标签：python, python-2.7, arguments, argparse

我有一个定义如下的类

```
class M(object):
    def __init__(self, **kwargs):
        ...do_something 
```

我有结果`argparse.parse_args()`，例如：

```
> args = parse_args()
> print args
Namespace(value=5, message='test', message_type='email', extra="blah", param="whatever") 
```

我想传递这个命名空间的值（除了`message_type`）来创建一个类的实例`M`。我试过了

```
M(args) 
```

但出现错误

```
TypeError: __init__() takes exactly 1 argument (2 given) 
```

我不明白。我怎样才能

1.  `message_type`从列表中删除值`args`
2.  传递值，就像我`M(value=5, message='test', extra="blah", param="whatever")`直接输入一样。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-04T16:19:09.000

您需要传入以下结果`vars(args)`：

```
M(**vars(args)) 
```

该[`vars()`函数](https://docs.python.org/3/library/functions.html#vars)将命名空间实例（其`__dict__`属性）的命名空间作为字典返回。

在里面`M.__init__()`，干脆忽略`message_type`关键。

# parsing - 在 Spoon CSV 文本输入中将货币解析为数字

> ID：15206012
> 
> 赞同：0
> 
> 时间：2013-03-04T16:16:59.480
> 
> 标签：parsing, etl, pentaho, kettle

这似乎应该很简单。

我有一个包含多个货币值的 CSV 文件（所以如果可以避免的话，我想避免编写一堆字符串操作步骤），我很高兴看到 CSV 文件输入步骤具有货币分隔符等字段，十进制符号、分组符号（我的分别是默认的“$”、“.”和“,”）。

该文档将这些描述为：

*   货币 用于解释像 $10,000.00 或 E5.000,00 这样的数字
*   小数点 小数点可以是“.”。(10;000.00) 或 "," (5.000,00)
*   分组 分组可以是点“、”(10;000.00) 或“.”。(5.000,00)

( [http://wiki.pentaho.com/display/EAI/Text+File+Input](http://wiki.pentaho.com/display/EAI/Text+File+Input) )

但截至目前的生产版本（4.4）......这些设置似乎没有效果。

有没有人成功使用数字掩码或类似的字符串，例如“$10,000,238.48”这样的字符串可以产生一个可以推入数据库的数字？我所做的任何事情要么是文本输入中的“不可解析”，要么是插入时的“截断字段”错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T20:22:52.410

当我在文本输入步骤中使用您的示例编号执行获取字段时，它将货币、十进制和组分别设置为“$”、“.”、“,”，并且它可以很好地读取您的数字。它还设置了 '$#,##0.00;($#,##0.00)' 的格式字符串，这似乎是关键部分。文本文件输入步骤将检查您从 CSV 指定的尽可能多的行，并猜测每列的格式。

这是 PDI 的数字格式表：

[数字格式表](http://wiki.pentaho.com/display/Reporting/Number+Formatting+Table)

如果您在同一列中混合了不同的货币格式，我会使用 UDJE 步骤和这个答案：

[在 Java 中解析货币字符串](https://stackoverflow.com/questions/6016501/parsing-a-currency-string-in-java)

或者一个 JavaScript 步骤和这个答案：

[使用 JavaScript 转换货币字符串](https://stackoverflow.com/questions/559112/how-to-convert-a-currency-string-to-a-double-with-jquery-or-javascript)

去除所有非数字和非小数点字符，然后通过选择值步骤。请注意，如果您在输入列中混合使用小数分隔符，这将非常棘手。

# java - HTTP 状态 500 - 在第 9 行处理 JSP 页面 /index.jsp 时发生异常

> ID：15206016
> 
> 赞同：1
> 
> 时间：2013-03-04T16:17:07.233
> 
> 标签：java, eclipse, jsp, servlets, tomcat7

我正在尝试从 Eclipse 中的包运行 Web 应用程序，但无论我尝试什么，我仍然会遇到这些错误。我也尝试阅读和理解错误日志报告，但这对我没有帮助，因为我对这一切都很陌生

错误信息：

```
type Exception report

message An exception occurred processing JSP page /index.jsp at line 9

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: An exception occurred processing JSP page /index.jsp at line 9

6: <title>SimpleJspServletDB</title>
7: </head>
8: <body>
9: <jsp:forward page="/UserController?action=listUser" />
10: </body>
11: </html> 
```

它说第 9 行有问题，但对我没有帮助。

这是我的 UserController.java 类

```
package com.daniel.controller;

import java.io.IOException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.daniel.dao.UserDao;
import com.daniel.model.User;

public class UserController extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private static String INSERT_OR_EDIT = "/user.jsp";
    private static String LIST_USER = "/listUser.jsp";
    private UserDao dao;

    public UserController() {
        super();
        dao = new UserDao();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String forward="";
        String action = request.getParameter("action");

        if (action.equalsIgnoreCase("delete")){
            int userId = Integer.parseInt(request.getParameter("userId"));
            dao.deleteUser(userId);
            forward = LIST_USER;
            request.setAttribute("users", dao.getAllUsers());    
        } else if (action.equalsIgnoreCase("edit")){
            forward = INSERT_OR_EDIT;
            int userId = Integer.parseInt(request.getParameter("userId"));
            User user = dao.getUserById(userId);
            request.setAttribute("user", user);
        } else if (action.equalsIgnoreCase("listUser")){
            forward = LIST_USER;
            request.setAttribute("users", dao.getAllUsers());
        } else {
            forward = INSERT_OR_EDIT;
        }

        RequestDispatcher view = request.getRequestDispatcher(forward);
        view.forward(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        User user = new User();
        user.setFirstName(request.getParameter("firstName"));
        user.setLastName(request.getParameter("lastName"));
        try {
            Date dob = new SimpleDateFormat("MM/dd/yyyy").parse(request.getParameter("dob"));
            user.setDob(dob);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        user.setEmail(request.getParameter("email"));
        String userid = request.getParameter("userid");
        if(userid == null || userid.isEmpty())
        {
            dao.addUser(user);
        }
        else
        {
            user.setUserid(Integer.parseInt(userid));
            dao.updateUser(user);
        }
        RequestDispatcher view = request.getRequestDispatcher(LIST_USER);
        request.setAttribute("users", dao.getAllUsers());
        view.forward(request, response);
    }
} 
```

还有我的 DD web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>SimpleJspServletDB</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description></description>
    <display-name>UserController</display-name>
    <servlet-name>UserController</servlet-name>
    <servlet-class>com.daniel.controller.UserController</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>UserController</servlet-name>
    <url-pattern>/UserController</url-pattern>
  </servlet-mapping>
</web-app> 
```

还有我的 index.jsp

```
<%@ page language="java" contentType="text/html; charset=EUC-KR" pageEncoding="EUC-KR"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
<title>SimpleJspServletDB</title>
</head>
<body>
<jsp:forward page="/UserController?action=listUser" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:00:08.110

使用servlet`try-catch`内部的块`doGet`和方法，并在块中`doPost`打印**堆栈跟踪**`catch`，以便您可以准确地知道 servlet 失败的位置。

# javascript - Html 模态弹出窗口

> ID：15206017
> 
> 赞同：0
> 
> 时间：2013-03-04T16:17:09.333
> 
> 标签：javascript, jquery, html, ajax

我正在使用以下代码来显示 html 模式弹出窗口。它显示得非常好。唯一的问题是我的 div 中的一个字段是日期时间字段，我正在使用 jquery datetimepicker 模块。但是，当我单击日历图像时，日历下拉菜单显示在主 HTML 页面中，而不是在弹出的 html 页面上。任何人都可以查看我的代码并就我在这里做错了什么给我建议。

```
 <div id="shade" ></div>
  <div id="modal">
      <label> Summary:   </label>
      <input type="text" name="summary" id="summary" style="width: 500px;"/>  <br>
      </select><br>
      <label> priority:  </label>
      <select id="change_type" name="change_type" style="width: 150px;">
          <option value ="Minor"> Minor</option>
          <option value ="Medium"> Medium</option>
          <option value ="Major"> Major</option>
      </select> <br>
      <label> Due Date:   </label>
      <input type="text" name="duedate" id="duedate" value="{{ request.args['duedate'] }}" align ="center" ondblclick="value=''"/>
      <img src="{{ url_for('static', filename='cal.gif')}}" style="cursor: pointer; display: inline-block;" onclick="javascript:NewCssCal('duedate','yyyymmdd','dropdown',true,'24')"/><br>

      <button id="id" style="position: absolute;left:600px;">Please verify</button>
      <button id="Cancel" onclick="" style="position: absolute;left:700px;">Cancel</button>
  </div> 
```

我的ajax调用是

```
 $('#cm').blur(function(){
    var cmnumber = document.forms['myform']['cm'].value;
    var modal = document.getElementById('modal');
    var shade = document.getElementById('shade');

    $.ajax({
    type:'get',
    url: "/validatecm/"+cmnumber,
    cache:false,
    async:false,
    data:cmnumber,
    success: function(data) {

            if ( data == cmnumber)
            {  alert ("Its a valid CM")}
            else
            { var answer = confirm("This is Not a Valid CM. Do you want to File a new one?")
                if(answer)
                {
                    modal.style.display=shade.style.display= 'block';
                }
            }

  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:21:57.167

您不能`=`在 JavaScript 中像这样堆叠赋值 ( )：

```
 modal.style.display=shade.style.display= 'block'; 
```

你已经在使用 jQuery，所以使用：

```
$('#modal, #shade').show() 
```

# spring - 向使用基本存储库方法的单个存储库添加行为

> ID：15206020
> 
> 赞同：1
> 
> 时间：2013-03-04T16:17:23.050
> 
> 标签：spring, design-patterns, spring-data, spring-data-jpa

我想向单个存储库添加自定义行为，如[1.4.1 向单个存储库添加行为中](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#repositories.single-repository-behaviour)所述。在这个自定义行为中，我想使用我的基础存储库中已经存在的方法（比如`save()`或`findOne()`方法）。我可以在 Spring 数据中实现这一点吗？

我尝试扩展我`UserRepositoryImpl`的 with`SimpleJpaRepository`以提供可用的基本`SimpleJpaRepository`方法。但是这样我就遇到了实例化问题。

同样使用[1.4.2 向所有存储库添加自定义行为中](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#repositories.custom-behaviour-for-all-repositories)描述的方法似乎不是一个好的解决方案，因为添加一个简单方法的代码太多了。在这种情况下，Spring Data 似乎更像是负担。

还是将这种依赖于基础存储库中其他方法的简单方法添加到我的存储库中是反模式？我是否应该将此方法移至服务/业务层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:39:12.740

几天前[在这篇文章中](https://stackoverflow.com/q/15124937/1276804)提出了同样的问题。正如我在那里写的那样，我坚信这是一种反模式，所以我对你最后一个问题的回答是肯定的。

# maven - 如何在 mvn assembly:single 期间关联 Ant 任务？

> ID：15206026
> 
> 赞同：3
> 
> 时间：2013-03-04T16:17:38.457
> 
> 标签：maven, ant, maven-assembly-plugin

使用`maven-antrun-plugin`我可以将 ant 任务附加到 maven 阶段。

我正在使用 maven 程序集插件而不将其附加到任何阶段：脚本正在运行命令`mvn assembly:single`或`mvn assembly:assembly`在需要时运行。

有什么方法可以让我只在运行时执行 ant 任务`mvn assembly:single`？

PS：这个问题与[Extract subset of repository with maven assembly](https://stackoverflow.com/questions/14850996/extract-subset-of-repository-with-maven-assembly)有关。由于我无法对程序集插件生成的存储库进行过滤，我想创建一个 ant 任务来对生成的存储库执行操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-06T09:51:43.237

您不能将插件绑定到另一个插件目标，您只能将插件执行绑定到 maven 定义的阶段。

[参见：Maven – 配置插件指南，配置构建插件](https://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_executions_Tag)。
[Maven 生命周期参考](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)或[Maven 核心生命周期参考](http://maven.apache.org/ref/3.3.3//maven-core/lifecycles.html)简介。

`mvn assembly:single`否则，您可以运行而不是仅启动`mvn antrun:run assembly:single`。

# c++ - 如何忽略以下编译器警告？

> ID：15206027
> 
> 赞同：0
> 
> 时间：2013-03-04T16:07:28.390
> 
> 标签：c++, g++

编译以下代码（g++ 4.6）时，我收到（预期的）警告消息： `./test.cpp:3:7: attention : address of local variable ‘ii’ returned [enabled by default]`.

```
int *get_ii()  
{  
  int ii = 2;
  return &ii;
}

int main(int argc, char* argv[])
{
  int *ii;
  ii = get_ii();
  return 0;
} 
```

问题：是否有编译器选项可以让我在编译时忽略此警告消息？

**原因**：这纯粹是为了教学目的。我想向观众展示这段代码并询问它有什么问题。这就是为什么我要隐藏警告信息，因为它是一个很大的线索。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T16:19:45.927

在 gcc 中没有办法（在 MSVS 中有），这是一个**你不应该忽略**`pragma warning`的警告。

 **返回函数局部变量的地址是未定义的行为。返回时`get_ii`，变量`ii`不再存在，但您正在返回指向它的指针。如果您将其更改为

```
int *get_ii()  
{  
  static int ii = 2;
  return &ii;
} 
```

它将解决问题和警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:59:43.323

我建议在大多数情况下不要使用它，但由于这是出于教学目的，您可以使用该`-w`标志来禁止来自 g++ 的所有警告。`-Wno-return-local-addr`如果您升级到更新版本的 g++，您也可以使用来抑制该特定警告。**

# html - 我在使用 rel 属性时使用 FancyBox JavaScript 时遇到验证问题（w3 验证器、html5）

> ID：15206028
> 
> 赞同：1
> 
> 时间：2013-03-04T16:17:41.453
> 
> 标签：html, fancybox, html-validation

使用 FancyBox JavaScript 时遇到验证问题（w3 验证器、html5）

" 元素 a 上属性 rel 的错误值组：不是绝对 IRI。字符串组不是注册关键字或绝对 URL。"

这是代码：

```
<a class="fancybox" rel="group" href="1-big.jpg"><img class ="fbox" src="1-small.jpg" alt="slideshow" /></a>
<a class="fancybox" rel="group" href="2-big.jpg"><img class ="fbox" src="2-small.jpg" alt="slideshow" /></a>
<a class="fancybox" rel="group" href="3-big.jpg"><img class ="fbox" src="3-small.jpg" alt="slideshow" /></a>
<a class="fancybox" rel="group" href="4-big.jpg"><img class ="fbox" src="4-small.jpg" alt="slideshow" /></a>
<a class="fancybox" rel="group" href="5-big.jpg"><img class ="fbox" src="5-small.jpg" alt="slideshow" /></a>
<a class="fancybox" rel="group" href="6-big.jpg"><img class ="fbox" src="6-small.jpg" alt="slideshow" /></a> 
```

我尝试使用 data 属性而不是 rel 无济于事。

如果我将其更改为类，那么我会收到在同一个标​​签中有 2 个类的错误，我是 html 的新手，因为这是我在 uni 的第一年，我想知道是否有人有有效的替代品/解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:28:27.547

查看文档，`rel`应该链接到文档，但是许多插件使用它来进行分组和类似的东西，这在技术上是不正确的。

就数据属性而言，我不确定如何将标记确定为有效/无效。据我所知，HTML5 还不是 100% 完整，验证器的好坏取决于制作它们的人。数据是一种广泛使用的规范，比`rel`用于此类目的更正确。

我读过你可以用逗号分隔多个类，虽然我从未尝试过。这是否使它验证。我几乎完全确定多个类是有效的 HTML，所以不用担心。

我会使用 data 属性而不用担心验证器。对于您的用例来说，这似乎更正确，即使用其中的数据作为插件。这样，您可以在需要时更改您的类，并且该插件仍然可以工作。

其他人可能会更清楚地解决这个问题，但如果您的插件使用 data 属性，我会说这是最正确的 HTML-5 解决方案。

# java - 显示启动画面，直到应用程序完成加载

> ID：15206030
> 
> 赞同：1
> 
> 时间：2013-03-04T16:17:47.770
> 
> 标签：java, android, xml, android-asynctask, splash-screen

我的应用程序在启动时加载了很多东西，经过测试，它在开始时延迟太久而没有`splash screen`. 所以，我想显示一个`splash screen`直到我的应用程序完成加载。我不想在 X 秒内显示带有计时器的屏幕。我在这里找到了一个例子：

[安卓闪屏](https://stackoverflow.com/questions/1979524/android-splashscreen)

我尝试在上面的 SO 主题中实现代码，但我只是不理解代码。将它集成到我的代码中后，我发现了一个错误，我在下面的代码中进行了注释。但是我不懂很多代码，我在下面的代码中评论了我感到困惑的部分。

```
public class MainMenu extends Activity {

    private ProgressDialog pd = null;
    private Object data = null;  //What is this?

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.mainmenu);

        // show the ProgressDialog on this thread
        this.pd = ProgressDialog.show(this, "Working...", "Downloading data...", true, false);

        // start a new thread that will download all the data
        new DownloadTask().execute("Any parameters to download.");  //What is DownloadTask()?
    }

    private class DownloadTask extends AsyncTask<String, Void, Object> {

        protected Object doInBackground(String... args) {  //Are these parameters correct?
            return "replace this with your object";  //What is this?
        }

        protected void onPostExecute(Object results) {
            // pass the resulting data to the main activity
            MainMenu.this.data = result;  //Error:  "result cannot be resolved to a variable"

            if(MainMenu.this.pd != null) {
                MainMenu.this.pd.dismiss();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:19:29.617

让我们从错误开始：

```
MainMenu.this.data = result; 
```

注意到错字了吗？它应该是结果*s*：

```
MainMenu.this.data = results; 
```

在下面解决您的其余问题：

```
private class DownloadTask extends AsyncTask<String, Void, Object> 
```

该声明用于一个名为 的内联类`DownloadTask`，它声明您将`String`s (via `String...`) 作为`doInBackground(String... params)`.

第二个参数（`Void`在您的情况下）指示用于通过`publishProgress(DATATYPE)`/ “发布”进度的数据类型`onProgressUpdate(DATATYPE... progress)`。此方法适用于通知用户更改，例如当您完成下载文件但仍有一些文件未完成时。

在本例中，最后一个参数 ( `Object`) 指示您将传递给的数据类型。这可能是在某处更新 ListAdapter，或者根据在.`onPostExecute(DATATYPE)``Object``doInBackground`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:19:07.290

`ProgressDialog`在方法中显示`onPreexecute`和关闭它`onPostExcute`

像这样的东西

```
private class DownloadTask extends AsyncTask<String, Void, Object> {

           @Override
protected void onPreExecute() {
  mProgressDialog = new ProgressDialog(activity);
    mProgressDialog =ProgressDialog.show(activity, "", "Please Wait",true,false);
    super.onPreExecute();
}

        protected Object doInBackground(String... args) {  //Are these parameters correct?
            return "replace this with your object";  //What is this?
        }

        protected void onPostExecute(Object results) {
            // pass the resulting data to the main activity
            MainMenu.this.data = results;  //it should be results 
if (mProgressDialog != null || mProgressDialog.isShowing()){
         mProgressDialog.dismiss();
 }
            if(MainMenu.this.pd != null) {
                MainMenu.this.pd.dismiss();
            }
        } 
```

# sql-server - 具有唯一索引的列中有多个 NULL 值

> ID：15206035
> 
> 赞同：7
> 
> 时间：2013-03-04T16:17:56.693
> 
> 标签：sql-server

我们有一个表，该表在可以接受空值的列上具有唯一索引。问题是我们发现这个结构只能接受 NULL 值的一行。如果我们尝试添加具有 NULL 值的第二行，我们会收到类似的错误。“不能在对象中插入重复的键行……”</p>

我们可以做些什么来保持该列上的索引以及将 NULL 值添加到多行的能力？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-04T16:19:19.227

是的，您可以使用过滤索引来支持这一点。只需删除现有索引并像这样创建新索引

```
CREATE UNIQUE INDEX Index_Name ON TableName(ColumnName)
WHERE ColumnName IS NOT NULL 
```

这将允许您拥有 NULL 值的重复项。如果您需要有关此的更多详细信息，这是一篇深入的文章。

[http://blog.sqlauthority.com/2008/09/01/sql-server-2008-introduction-to-filtered-index-improve-performance-with-filtered-index/](http://blog.sqlauthority.com/2008/09/01/sql-server-2008-introduction-to-filtered-index-improve-performance-with-filtered-index/)

# matlab - 编写一个迭代，当满足上述情况时将停止该迭代

> ID：15206036
> 
> 赞同：1
> 
> 时间：2013-03-04T16:17:57.060
> 
> 标签：matlab

大家好，我在编写算法的编程代码时遇到了一个问题，如下所示

当定义为（当前近似值-先前近似值）/当前近似值的近似误差小于 0.01 时，该程序将终止。它可以简化为 (f(xr)i+1 - f(xr)i)/f(xr)i+1。下面是我编写的代码，我真的很想知道如何编写一个迭代，当遇到上述情况时该迭代将停止。

```
xl = input('Enter lower limit : ');

xu = input('Enter upper limit : ');

xr = (xl+xu)/2;

R = 3; V = 30;

fl = (pi*R*xl^2)-(pi*(xl^3)/3)-V;    % between is there anyway can call these functions 

fu = (pi*R*xu^2)-(pi*(xu^3)/3)-V;      other than typing 3 times

fh = (pi*R*xr^2)-(pi*(xr^3)/3)-V;

while relative error is less than 0.01 then display value of xr

if fl*fu<0

    xu = xr;

elseif fl*fu>0

    xl = xr;

end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:28:30.847

您忘记执行步骤 3(c)。

如说明所述，您也没有在步骤 3(a) 和 3(b) 中“返回到步骤 2”。为此，您需要按照[此处](http://www.mathworks.com/help/matlab/ref/while.html)`while`所述创建一个循环；将保持循环的条件放入您的while循环中。如果该条件评估为假，则应按照步骤 3(c) 退出循环。

使用 CONTINUE 完成步骤 3(a) 和 3(b) 中的“返回步骤 2”部分；将执行移回循环的顶部。另请参见[MATLAB 中的跳转命令](https://stackoverflow.com/questions/1082605/jump-command-in-matlab)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:31:26.037

你可以把计算放在一个函数中：

```
function f = some_function(x)
    R = 3;
    V = 30;
    f = (pi*R*x^2)-(pi*(x^3)/3)-V; 
```

您可以尝试 100 次通行证（为了安全起见）：

```
for i=1:100
    xr_old = xr
    fr_old = fr

    xr = (xl+xu)/2;
    fr = some_function(xr);

    if abs((xr - xr_old)/xr) < MIN_STEP
        break
    end

    temp = fl*fr
    if temp < 0:
        xu = xr
        fu = fr
    else if temp > 0:
        xl = xr
        fl = fr
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:33:15.390

我现在更新了代码，我可以运行它了。我用 f(x)=x^2-2 对其进行了测试。它在 6 次迭代中收敛到 1.4141。我建议您将该代码与您必须了解的代码进行比较，以了解以前不适合您的代码。这将是一次很好的学习经历。

```
>> example(1,2);
Crossing found after 6 iterations: 1.414062 
```

其中 example.m 如下：

```
function xr = root(xl,xu)

MAX_NUMBER_ITERATIONS = 1000;
MAX_DELTA=.01;

numberIterations=0;
xr_old=xu;
xr = (xl+xu)/2;

while ((numberIterations<MAX_NUMBER_ITERATIONS) & (abs(xr_old-xr)>=MAX_DELTA))
    numberIterations=numberIterations+1;
    xr_old = xr;;

    product=f(xl)*f(xr);
    if product<0
        xu = xr;
        xr = (xl+xu)/2;
        continue;  
    elseif product>0
        xl = xr;
        xr = (xl+xu)/2;
        continue;
    else
        break;
    end
end
fprintf('Crossing found after %d iterations: %f\n',numberIterations,xr)

end

function y = f(x)
y=x^2-2;
end 
```

# hadoop - 对于基于日期的 Hive 分区，为什么使用字符串类型？为什么不是int？

> ID：15206040
> 
> 赞同：5
> 
> 时间：2013-03-04T16:18:34.453
> 
> 标签：hadoop, hive

如果我在 Hive 中定义一个表，并且将基于日期进行分区，并且我的日期格式为 YYYYMMDD，我应该为类型、int 还是 string 选择哪个？

如果它只是一个字段，因此在我为表提供的文件中，我可以看到使用字符串，即使只是为了搜索和识别可能进入我的数据的格式错误的条目。但由于我将指定分区作为加载过程的一部分，我知道我将始终拥有正确形成的值。

在`Where`子句中使用时，分区字段通常为相等或小于/大于逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T17:42:41.623

在 Hive 中，日期通常被视为字符串。如果您查看所有可用的日期操作 UDF，它们使用字符串类型，因此如果您使用整数，则每次都必须转换它们。

从概念上讲，我认为使用字符串更有意义，您的 YYYYMMDD 只是日期对象的文字表示，但它隐含地等同于 YYYY-MM-DD 或 DDMMYYYY。因此，如果您在这里使用整数，则进行此类比较会变得很痛苦。

请注意，您还可以将 Hive 中的字符串与相等/大于/小于运算符进行比较，如果您想选择一系列分区，您可以使用这些运算符轻松地做到这一点。

我看到使用“日期”作为整数的唯一情况是使用时间戳（Unix 风格），因为它是一个连续值并且代表一个真实可测量的数量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T06:15:31.470

因为 YYYY-MM-DD 是日期表示的标准，并且是 hive 的 to_date() UDF 的输出，所以它还允许你做一些懒惰的事情，比如 select * from foo where day>'2013'

[http://xkcd.com/1179/](http://xkcd.com/1179/)

# ios - 使用显式动画时如何自动使用设置图层值？

> ID：15206055
> 
> 赞同：0
> 
> 时间：2013-03-04T16:19:04.110
> 
> 标签：ios, core-animation

我可以像这样动画地移动一个图层：

```
CABasicAnimation *animation = [CABasicAnimation animation];
[animation setFromValue:[NSValue valueWithCGPoint:self.layer.position]];
[animation setToValue:[NSValue valueWithCGPoint:CGPointMake(100, 100)]];
[self.layer addAnimation:animation forKey:@"position"];
self.layer.position = CGPointMake(100, 100); 
```

但是，我必须在动画结束后设置 layer.position，有没有办法在使用显式动画时自动设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:33:29.660

根据 Apple 文档，您必须手动设置：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html#//apple_ref/doc/uid/TP40004514-CH3-SW3](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html#//apple_ref/doc/uid/TP40004514-CH3-SW3)

```
CABasicAnimation* fadeAnim = [CABasicAnimation animationWithKeyPath:@"opacity"];
fadeAnim.fromValue = [NSNumber numberWithFloat:1.0];
fadeAnim.toValue = [NSNumber numberWithFloat:0.0];
fadeAnim.duration = 1.0;
[theLayer addAnimation:fadeAnim forKey:@"opacity"];

// Change the actual data value in the layer to the final value.
theLayer.opacity = 0.0; 
```

> 与更新图层对象数据值的隐式动画不同，显式动画不会修改图层树中的数据。显式动画只产生动画。在动画结束时，Core Animation 从图层中移除动画对象并使用其当前数据值重新绘制图层。如果您希望显式动画的更改是永久的，您还必须更新图层的属性，如前面的示例所示。

# jquery - jQuery 弹出窗口 (bpopup) 不出现

> ID：15206063
> 
> 赞同：1
> 
> 时间：2013-03-04T16:19:24.100
> 
> 标签：jquery, popup, bpopup

我正在尝试实现一个根本不起作用的多个弹出功能。我有两种弹出窗口要显示。使用的插件是 bpopup。

```
// multibind on srate-classes for rating
$(document).ready(function () { 
$(document).on('click', '.SRATE', function() {
    $('#SRATE-div').bPopup({
        closeClass: 'srateBtn',
        modalClose: false,
        escClose: false,
        zIndex: -1
    });
    alert('sollte eigentlich erscheinen');
});

// multibind on brate-classes for rating
$(document).on('click', '.BRATE', function() {
    $('#BRATE-div').bPopup({
        closeClass: 'brateBtn',
        modalClose: false,
        escClose: false,
        zIndex: -1
    });
    alert('sollte eigentlich erscheinen');
}); 
```

});

触发函数的 HTML：

```
<img width="24" height="24" src="img/glyphicons_150_rate.png" alt="Inserat ausstehend" class="BRATE" /> 
```

要显示的 id：

```
<div id="BRATE-div"> 
```

HTML 的东西与 SRATE 的东西重复。

使用 zIndex: 9999 我得到了一个带有 noch content-field 的停电窗口（它实际上应该显示 BRATE-div 的东西）。没有它，除了出现 alert() 之外什么都不会发生。每次单击时，alert() 都会正确触发。

我希望你有一些线索。提前致谢。

# android - 如果已经运行，则阻止启动主要活动

> ID：15206064
> 
> 赞同：5
> 
> 时间：2013-03-04T16:19:25.530
> 
> 标签：android, android-intent, android-activity, intentfilter, main-activity

我有一个通过`intent-filter`操作启动的应用程序。问题是每次事件/动作发生时，Android 都会显示一个对话框，要求启动应用程序，即使它已经启动。

我希望行为如下：

*   如果应用程序未打开，用户要求启动应用程序。
*   如果应用程序在前台运行，则不会显示对话框。

有没有办法实现这两个目标？我的目标是 Android 4.0。

*编辑*

这是我的意图过滤器：

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
        </intent-filter>

       <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" />
        </intent-filter>

       <meta-data
            android:name="android.hardware.usb.action.USB_DEVICE_DETACHED"
            android:resource="@xml/device_filter" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T16:43:40.100

您需要将`Activity`'s设置`launchMode`为`singleTask`. 您可以通过在 Android 清单中添加活动属性来做到这一点：

```
android:launchMode="singleTask" 
```

有关更多详细信息，请参阅[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:22:22.520

在要求用户启动应用程序时使用标志。首次启用时设置标志，并且每次检查是否勾选了此标志。例如`if (flag == 1) askusertostart() else continue;`，如果这对您来说很清楚？

# objective-c - 堆叠视图控制器

> ID：15206072
> 
> 赞同：0
> 
> 时间：2013-03-04T16:19:44.520
> 
> 标签：objective-c, uiviewcontroller

我是 iPhone 开发的新手，甚至不确定我是否做对了。我基本上想将我的屏幕分成多个区域。

我目前正在尝试将视图控制器堆叠在彼此内部，就像 HTML 上的 div 框一样（如果它不是应该的方式，请纠正我）

列继承自`UIViewController`：

```
 Column *column = [Column new]; 
```

告诉我一些关于不兼容指针的事情。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:37:45.553

你不想那样做。

您**可以**在单个屏幕中使用多个 View Controller，但通常对于简单的应用程序，每个屏幕只需使用单个 View Controller。

无论如何都要像 div 框一样堆叠 UIView，但只使用一个 View Controller。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:38:16.737

```
Column *column = [[Colulmn alloc] init]; 
```

并查看 IB 中的 View Containers。它们是为具有自己的视图控制器的子视图而设计的。如果这是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:40:37.933

如果您在 iPad 应用程序中寻找多个可滚动区域，请查看使用 UISplitViewController 的 Xcode 中的 Master-Detail 项目模板。

# sql - SQLServer - 合并条件很慢，甚至是“总是错误”的条件

> ID：15206075
> 
> 赞同：2
> 
> 时间：2013-03-04T16:19:50.397
> 
> 标签：sql, sql-server-2008, merge

我想有条件地执行 MERGE 语句，所以它不会尝试匹配整个目标表。我原来的说法是这样的：

```
MERGE [target_table] USING [table_source]
ON (([target_table].[ID] = [table_source].[ID]) AND (condition))
WHEN MATCHED THEN UPDATE
SET [table_source].[_strField1] = [table_source].[_strField2]; 
```

注意：假设“_strField”被键入为 nvarchar(4000)，“条件”类似于 [target_table].[_strField8] = 'sometext'。

但是后来我在[指示](http://technet.microsoft.com/en-us/library/bb510625.aspx)`"...Do not attempt to improve query performance by filtering out rows in the target table in the ON clause"`.

所以我原来的查询被改成了下面的

```
MERGE [target_table] USING [table_source]
ON (([target_table].[ID] = [table_source].[ID]))
WHEN MATCHED AND (condition) 
THEN UPDATE
SET [table_source].[_strField] = [table_source].[_strField]; 
```

问题是，查询现在需要更多时间。即使将条件更改为“始终为假”，例如**1 = 2**也无济于事。另一方面，设置不同的字段，例如

```
SET [table_source].[_intField] = [table_source].[_intField]; 
```

或除两个 nvarchar(4000) 之外的任何其他类型都会导致语句执行得更快。

总结一下，我不明白的事情是：

*   如果 nvarchar(4000) 的数据设置是较长的过程，为什么将条件设置为“1 = 2”并不能加快执行时间？
*   如果“行匹配”是较长的过程，为什么设置 INT 字段会加快执行时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:47:37.357

根据 sql server 文档：

"...不要试图通过在 ON 子句中过滤掉目标表中的行来提高查询性能，例如通过指定 AND NOT target_table.column_x = value。**这样做可能会返回意外和不正确的结果**..*

您的第一个查询无效。你不应该考虑时间结果。

如果您使用固定长度 (int,date) 更新列，则不会出现“行溢出数据超过 8 KB”的情况。当您使用 nvarchar(4000) 并提供较差的查询性能时，可能会发生这种情况。

我们现在不知道合并函数如何在内部工作以及它如何处理数据。因此，可能只有此功能的开发人员才能为您提供问题的答案。

我希望我能帮助您解决 varchar(4000) 性能问题。

马辛·帕兹吉尔

# java - HelloWorld 应用程序在 Windows Azure 中部署时不起作用

> ID：15206081
> 
> 赞同：0
> 
> 时间：2013-03-04T16:20:01.880
> 
> 标签：java, deployment, azure, eclipse-plugin

我正在尝试使用 eclips 部署 HelloWorld 应用程序。该程序在 Windows Azure 模拟器中成功运行，但我无法在 Windows Azure 中发布它。我收到以下错误消息：上传部署包失败。我在这个网站上发现了一个类似我的问题，但没有提供真正的解决方案，因为它建议尝试缩小尺寸： [Microsoft azure deploy error 40 %](https://stackoverflow.com/questions/12521042/microsoft-azure-deploy-error-40) 请注意，它只显示一条 Hello World 消息我遵循以下教程： [http： //msdn.microsoft.com/en-us/library/windowsazure/hh690944(VS.103).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh690944(VS.103).aspx)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:51:28.757

我们已经在慢速连接或大型部署包中看到了这个问题。我建议几个选项：

1) 使用 Windows Azure 管理门户手动部署包。

2) 下载最新的 eclipse 插件，现在允许您直接从 BLOB 存储部署支持框架（JDK、Tomcat 等），因此它们不必成为部署包的一部分。

对于选项 #2，您可以直接在 Eclipse 中更新插件。可以在此处找到说明：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh690946.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh690946.aspx)。

最新的发行说明在这里：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh694270.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh694270.aspx)

我希望这有帮助。

# wcf - IIS 7 上托管的 WCF 无法验证消息的安全性

> ID：15206088
> 
> 赞同：0
> 
> 时间：2013-03-04T16:20:18.747
> 
> 标签：wcf, ssl, iis-7, self-signed

我有一个托管在 IIS 7 上的 WCF 服务，它使用自签名证书来提供 HTTPS 连接。

服务器位于美国，但使用它的客户端位于中东。为了客户能够使用该服务，我必须将服务器的时间和时区更改为客户所在的国家/地区。此配置有效（现在已经快一年了），但从 2 天前开始，一些客户端停止工作并出现以下错误：

> 验证消息的安全性时出错。

如果我在不工作的客户端之前将服务器时间更改为一小时，这些客户端将能够使用该服务，但以前工作的客户端停止工作并收到相同的错误。

有谁知道我该如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:29:03.373

您可以从两个方面解决这个问题：如果您的 IIS 中安装了 AppFabric 或类似的东西，您可以开始为您的服务编写跟踪文件。这应该可以让您很好地了解服务器端出了*什么*问题。

在客户端，在不接触服务器的情况下，您可能想检查是否可以获得比 .NET 喜欢给出的“安全性不起作用”更具体的错误。尝试编写一个控制台应用程序调用您的服务并检查那里的 SSL 错误。

```
namespace ServiceTestConsole
{
  using System;
  using System.Net;
  using System.Net.Security;
  using System.Security.Cryptography.X509Certificates;

  internal class Program
  {
    internal static void Main()
    {
      ServicePointManager.ServerCertificateValidationCallback = ValidateServerCertificate;

      // add a service reference and call your service here

      Console.WriteLine("Press any key to continue");
      Console.ReadKey();
    }

    private static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslpolicyerrors)
    {
      Console.WriteLine("SSL Policy Error(s): " + sslpolicyerrors);

      return true;
    }
  }
} 
```

# java - 如何最好地清除大量对象中的变量？

> ID：15206089
> 
> 赞同：0
> 
> 时间：2013-03-04T16:20:21.117
> 
> 标签：java

如果我想清除很多对象上的特定布尔变量，并且这些对象之一应该在之后设置此变量，那么最有效的是：

*   迭代所有对象并设置 var = false
*   迭代所有对象，检查 var 并将其设置为 false 为 true

> ```
> class Foo {
>    boolean bar;  //false for most objects
> } 
> ```

然后使用：

```
for (Foo foo : fooList) {
   foo.setBar(false);
} 
```

或者：

```
for (Foo foo : fooList) {
    if (foo.isBar()) {
       foo.setBar(false);
    }
} 
```

然后设置一个 foo：

```
singleFoo.setBar(true); 
```

对于这两种实现来说，节省的时间可能都很小。但是我无法测量那个atm，所以我很想知道你认为更好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:22:55.907

我不确定编译器是否会将这两个示例调平。但是，如果这对您来说是性能瓶颈，我会感到非常惊讶。

只需使用这个：

```
for (Foo foo : fooList) {
   foo.setBar(false);
} 
```

因为它更容易阅读

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:37:21.933

我不知道您要做什么，正如您所说，时间差异将很小，即无法检测到。，但答案很简单：**仅更改值可能会“更快”**，并且正如 coulls 所说，更易于阅读，因此您应该选择：

```
for (Foo foo : fooList) {
   foo.setBar(false);
} 
```

**稍微解释一下：**

我假设您想计算其他程序的未来效率，所以我建议您计算最佳、最差和平均情况。在这种情况下，如果您必须更改所有布尔值或仅更改几个布尔值，您可以计算每个语句将花费多少时间。

例如，您可以说`foo.setBar(false)`需要`A`时间，而 `if (foo.isBar())`将需要`B`时间。

假设您只有 3 个`foos`，`foolist`您可以体验以下内容：

*   **最坏的情况：**你必须改变`bar`所有 3 `foos`。
*   **平均：**有时最多需要更改 1 或 2 个柱。
*   **最佳情况：**无需更改条形。

**只做`A`你将有所有 3 个案例的总时间执行`3A`**。**如果您使用`if`，它将需要：**

*   **最坏情况：** 3A + 3B
*   **平均：** (1-2)A + 3B
*   **最佳案例：** 3B

如果我们假设`B < A`，那么 if 选项只会在第三种情况下更快。如果`B<<A`那样的话，平均值会更好。但最坏的情况总是比只做作业更糟糕。在这种情况下，**可能 A 和 B 将相似或相等**，因此您将拥有 (A=B)：

*   **最坏情况：** 6A
*   **平均情况**: (4-5) A
*   **最佳情况：** 3A

因此，第一个选项（如开头所示）将是最好的。

这对于您面临的任何其他语言或性能问题都很有用。尽管如果您愿意，您可以查看官方[Java 文档](http://docs.oracle.com/javase/specs/)以检查是否有针对此的特殊 VM 改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:22:53.060

将它们全部设置为 false，然后将单个设置为 true。有一篇很棒的关于分支预测的帖子我会找到的。

[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array/11227902#11227902)

如果您有大量对象，简单的 if 语句可能会成为一个巨大的瓶颈。很难说它有多重要，因为它取决于如果添加检查将设置多少个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:24:40.960

这是更好的方法

```
for (Foo foo : fooList) {
   foo.setBar(false);
} 
```

因为它更清晰，并且您可以节省不编写和弄乱不清楚的代码的时间，例如，您可以花在使真正的慢代码运行得更快上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T16:26:45.497

最“有效”的方法是将它们全部设置为 false（您的第一个选项）。第二个需要两个方法调用，而不是一个。当然，效率上的差异几乎可以肯定是无关紧要的。如果有任何原因您可能想知道（或记录）在设置为假之前谁是假的，那么后一种方法显然是要走的路。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T16:29:40.867

您正在谈论的是 JIT 编译器级别的优化。在编写代码时不应该考虑它们。在优化之前，先配置文件。并从最慢的地方开始优化，然后往下走。

# python - ndimage 脚本行为不端

> ID：15206092
> 
> 赞同：1
> 
> 时间：2013-03-04T16:20:36.357
> 
> 标签：python, scipy, filtering

我有一个读取图像数据的脚本，然后使用 scipy.ndimage 中的中值滤波器迭代图像。从迭代中，我创建了新数组。

但是，当我尝试运行脚本时

```
run filtering.py 
```

过滤似乎不起作用。新数组 (month_f) 与旧数组相同。

```
import matplotlib.pyplot as plt
import numpy as numpy
from scipy import ndimage
import Image as Image

# Get images 

#Load images

jan1999 = Image.open('jan1999.tif')
mar1999 = Image.open('mar1999.tif')
may1999 = Image.open('may1999.tif')
sep1999 = Image.open('sep1999.tif')
dec1999 = Image.open('dec1999.tif')
jan2000 = Image.open('jan2000.tif')
feb2000 = Image.open('feb2000.tif')

#Compute numpy arrays

jan1999 = numpy.array(jan1999)
mar1999 = numpy.array(mar1999)
may1999 = numpy.array(may1999)
sep1999 = numpy.array(sep1999)
dec1999 = numpy.array(dec1999)
jan2000 = numpy.array(jan2000)
feb2000 = numpy.array(feb2000)

########### Put arrays into a list

months = [jan1999, mar1999, may1999, sep1999, dec1999, jan2000, feb2000]

############ Filtering = 3,3

months_f = []

for image in months:
    image = scipy.ndimage.median_filter(image, size=(5,5))
    months_f.append(image) 
```

任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-16T16:52:52.857

这是一个评论，但由于声誉限制，我无法写一个。

导入模块的方式有点奇怪。特别是带有同名的“import .. as”。我认为更pythonian的方式是

```
import matplotlib.pyplot as plt
import numpy as np
from scipy import ndimage
from PIL import Image 
```

然后打电话

```
image = ndimage.median_filter(image, size=(...)) 
```

当我使用 RGB 测试图像运行您的步骤时，它似乎可以工作。

jan1999.shape 返回什么？

# jquery - jQuery $.when 似乎没有返回结果列表

> ID：15206096
> 
> 赞同：2
> 
> 时间：2013-03-04T16:20:49.557
> 
> 标签：jquery, deferred

根据[$.when 的 jQuery 文档](http://api.jquery.com/jQuery.when/)，它将返回一个新的 deferred（实际上是一个 promise），在所有 deferred（传递给 $.when）没有错误地解决的情况下，它会使用传递的 deferreds 的结果列表来解析.

所以你会期望`$.when($.Deferred().resolve(1), $.Deferred().resolve(2))`返回一个可以用列表 [1, 2] 解析的延迟。但情况似乎并非如此。[这是一个 jsfiddle](http://jsfiddle.net/terrycojones/Dx3Jd/3/)，其中整体 $.when 结果是第一个延迟给 $.when 的结果。

我想我一定是误解或做错了什么，但我看不出是什么。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:24:11.953

使用`$.when`work 时传递给 done 处理程序的参数与 完全相同`$.when`，每个传入的 promise/deferred 对象都会得到一个参数。

[http://jsfiddle.net/Dx3Jd/4/](http://jsfiddle.net/Dx3Jd/4/)

```
$(function () {
    make = function (x) {
        return $.Deferred().resolve(x);
    };

    $.when(make(15), make(16), make(17)).done(
        function (result1, result2, result3) {
            $('#hey').text(result1 + "-" + result2 + "-" + result3); // "15-16-17"
        }
    );
}); 
```

如果您将 3 个参数传递给`$.when`，则生成的 promise 对象的`.done`方法将接收 3 个参数。

# java - CORBA 和 RMI 的区别

> ID：15206102
> 
> 赞同：1
> 
> 时间：2013-03-04T16:21:05.653
> 
> 标签：java, rmi, corba

我清楚地知道 CORBA 和 RMI 之间的区别，除了关于`in`, `out`, `inout`.

CORBA 使用 IDL 语言描述接口，定义的方法中的参数有关键字：`in`, `out`, `inout`. 它们的含义如下：

*   `in`：参数从操作的调用者传递给对象。
*   `out`：参数从对象传递给调用者。
*   `inout`: 参数双向传递。

我的问题：为什么在 CORBA 中关键字（和）是必需的`in`，而在 JAVA/RMI 中却不是必需的。`out``inout`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:40:29.297

> 但在 JAVA/RMI 中不是必需的。

它们在 Java 中不可用，更不用说 Java RMI。设计师决定通过价值传递一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:12:15.213

这只是一个设计决定。它们设计的主要区别在于 CORBA 被设计为独立于平台和编程语言，而 RMI 是专门为 Java 编程语言设计的。

许多编程语言都有自己的表达方式`in`或`out`参数`inout`方向，CORBA IDL 语言有其直接的等价物。在其他语言（例如 Java）中，这些结构必须使用复杂的包装器结构来实现。

Java 编程语言没有`out`或`inout`参数（虽然可以通过创建一个简单的值包装类来实现），所有参数都是通过`in`值（对于值类型）或引用（对于引用类型）传递的。而且由于 Java 本身不支持语言级别的参数方向，因此在 RMI 中也没有必要这样做。

# sql-server - 个性化 Dynamics AX 同步

> ID：15206105
> 
> 赞同：0
> 
> 时间：2013-03-04T16:21:29.787
> 
> 标签：sql-server, indexing, dynamics-ax-2012, axapta, ax

我需要你的帮助，这样我才能解决我工作中的一些问题。

我们有一些在 Sql Server Reporting Services 上运行的报告。对其 T-SQL 语言的查询，但报告真的很慢，所以我在 SQL Server Management Studio 上运行了“显示估计的执行计划”，它告诉我我需要以下查询索引：

```
CREATE NONCLUSTERED INDEX [InventJournalTable_JournalIdDataAreaId]
ON [dbo].[INVENTJOURNALTABLE] ([JOURNALID],[DATAAREAID])

CREATE NONCLUSTERED INDEX [InventTrans_InventTransOrigin]
ON [dbo].[INVENTTRANS] ([INVENTTRANSORIGIN],[DATAAREAID],[DATEPHYSICAL])
INCLUDE ([ITEMID],[QTY],[COSTAMOUNTPHYSICAL],[INVENTDIMID]) 
```

我创建了它们，查询（在 25 分钟或更长时间内执行之前）现在在两秒钟内运行。但是，每当在 AX 上运行同步时，显然必须删除创建的索引。

同步完成后是否有任何触发器或可以执行的操作，以便我可以再次创建我需要的索引或任何其他未来操作？

如果我在 AX 上创建它，它包含“分区”列，不适合我的外部查询，因为它仍然很慢。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:42:23.840

如果您需要在数据库同步时执行自定义 SQL 语句，您可以将代码添加到`Application.dbSychronize()`. 例如，您可以查看该函数以了解系统如何处理将存储过程添加到`ShipCarrierStaging`表中。

# python - 使用 ANTLR 在 Python 中解析时如何获取 AST 树而不是列表？

> ID：15206110
> 
> 赞同：1
> 
> 时间：2013-03-04T16:21:47.980
> 
> 标签：python, antlr, abstract-syntax-tree

我得到简单的 antlr3 语法[MicroXpath](http://www.antlr3.org/grammar/1210113624040/MicroXPath.g)并为 Python 构建词法分析器和解析器。

然后我写了一个简单的测试代码：

```
import antlr3
from XPathLexer import XPathLexer
from XPathParser import XPathParser

def print_level_order(tree, indent):
    print('{0}{1}'.format('   '*indent, tree.text, tree.getType()))
    for child in tree.getChildren():
        print_level_order(child, indent+1)

input = 'descendant::name[class/name[test="x"]="File"]'
char_stream = antlr3.ANTLRStringStream(input)
lexer = XPathLexer(char_stream)
tokens = antlr3.CommonTokenStream(lexer)
parser = XPathParser(tokens)
tree = parser.xPath().tree

print_level_order(tree, 0) 
```

结果：

```
None
   descendant
   :
   name
   [
   class
   /
   name
   [
   test
   =
   "x"
   ]
   =
   "File"
   ] 
```

树在哪里？这是一个线性列表！我究竟做错了什么？还是用ANTLR不能建树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:28:41.937

仅添加`output=AST;`是`options{...}`不够的：您必须告诉 ANTLR 哪些节点/令牌要从 AST 中排除（如果有），以及您希望哪些节点/令牌成为（子）树的根。正如您已经观察到的，不这样做会导致一棵扁平的树。

查看此问答以了解如何在树中创建层次结构：[如何输出使用 ANTLR 构建的 AST？](https://stackoverflow.com/questions/4931346/how-to-output-the-ast-built-using-antlr)

# objective-c - 以 NSString 格式打印 '%'

> ID：15206112
> 
> 赞同：0
> 
> 时间：2013-03-04T16:21:52.130
> 
> 标签：objective-c, nsstring, nslog

我需要一些响应，例如`100 %`但无法在数字后打印 % ，因为它带有 warning `incomplete Identifier`。 ![在此处输入图像描述](../Images/4b70f4bc23a2c93fb4ba97d3b901570f.png)

我试过搜索解决方案，使用了 \%, '%' 但没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:23:00.140

*`%`使用另一个字符*转义*特殊`%`字符：*

 *```
@"%2.0f%%" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:23:05.017

文字的格式说明符`%`是`%%`.*

# javascript - 如何抑制单行的 JSLint 警告？

> ID：15206115
> 
> 赞同：5
> 
> 时间：2013-03-04T16:22:00.710
> 
> 标签：javascript, jslint

我使用 nicEdit 编辑器，它有一个名为`nicEditor`.

JSLint 对它发出警告：

> 构造函数名称“nicEditor”应以大写字母开头。

它忽略了 `/*jslint newcap:false */`我在问题线之前放置的选项”

```
/*jslint newcap:false */
var nic_editor = new nicEditor({
    buttonList : ['bold', 'italic', 'underline', 'strikethrough', 'emoticonToolbar'],
    iconsPath : '/assets/nicEditorIcons.gif'
}),
/*jslint newcap:true */ 
```

我怎样才能抑制这个警告，但只针对这一行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:44:45.827

我不相信它可能比你现在更细。TBH，我认为您当前的解决方案很好。

如果您真的想避免`newCaps`设置，您可以使用局部变量来重命名构造函数：

```
var NicEditor = nicEditor;
var nic_editor = new NicEditor({
    buttonList : ['bold', 'italic', 'underline', 'strikethrough', 'emoticonToolbar'],
    iconsPath : '/assets/nicEditorIcons.gif'
}), 
```

# c# - 我应该打电话给 GC.Collect

> ID：15206119
> 
> 赞同：1
> 
> 时间：2013-03-04T16:22:07.997
> 
> 标签：c#, garbage-collection

我有一个作为 Windows 服务托管的 wcf 服务，具有以下功能：

```
public int SendMultipleMessages(List<Message> messages)
{
  foreach (var message in messages)
  {
     //Do some stuff with the messages ie. get an id to return, save info in a db.
  }

  //Would it make sence to collect here ??
  Gc.Collect();

  Task.Factory.StartNew(() =>
        {
            //very time demanding task
            _sendRequestHandler.SendMultipleMessages(BatchId);
        });

 return BatchId;
} 
```

List< Message > 对象（通常）最多使用 1 gb 内存，在这种情况下调用 GC.Collect 是否有意义，因为我不再使用列表，或者我应该让垃圾收集器自己处理这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:25:19.713

简短的回答：**不**。

如果你打电话`GC.Collect()`，你可能有问题。需要调用它是非常罕见的。

在您当前的示例中，**给定当前代码将无济于事**。除非您以物理方式*清除*对象列表`Message`，否则它们不会被垃圾回收*，因为调用者仍然具有*对该`List<T>`实例中对象的引用。

当然，该建议是基于每个`Message`对象不存在其他引用的假设。

您可以通过从处理过的消息对象中删除消息对象`List<T>`，或者通过切换到固有地体现此原则的数据结构（例如 a`Queue<T>`或`Stack<T>`取决于您的订购要求），为您的流程添加更多确定性。

```
public int SendMultipleMessages(Queue<Message> messages)
{
  while (messages.Count > 0)
  {
     var message = messages.Dequeue();
     // do something with message, and once you're done it is
     // probably eligible for garbage collection because it is
     // no longer in the Queue
  }

  Task.Factory.StartNew(() =>
        {
            //very time demanding task
            _sendRequestHandler.SendMultipleMessages(BatchId);
        });

 return BatchId;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:24:16.793

让 GC 自行管理，它将根据可用资源等在每台机器上进行不同的优化。您自己调用它可能会损害应用程序的性能。

# android - 如何更改 LinearLayout 的边距顶部？

> ID：15206121
> 
> 赞同：0
> 
> 时间：2013-03-04T16:22:18.137
> 
> 标签：android, android-linearlayout

我有一个 LinearLayout，我需要以编程方式更改元素的上边距。如何更改 LinearLayout 的边距顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:29:34.783

这样，您可以以编程方式设置所有 4 个边距。

```
LinearLayout ll = new LinearLayout(this);

LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
     LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);    
layoutParams.setMargins(10, 20, 30, 40);

ll.setLayoutParams(layoutparams); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:34:31.310

如果您在 layout.xml 中定义线性布局并希望动态设置线性布局的边距，您可以参考我的答案，如果您想动态创建线性布局也可以参考@RJ 答案。

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(15, 15, 15, 15);
LinearLayout mLayout = (LinearLayout) findViewById(R.id.layout_menu);
mLayout.setLayoutParams(layout_param); 
```

# apache - .htaccess 中没有重定向的代理子域

> ID：15206131
> 
> 赞同：0
> 
> 时间：2013-03-04T16:22:55.920
> 
> 标签：apache, .htaccess, proxy, subdomain

例如，需要将发送到子域 auto.domain.int 的请求重定向到 www.domain.int/doc/sample-rates。这是一个 Zend 应用程序，因此使用了 MVC。我的 .htaccess conf 中有以下内容：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^auto\.domain\.int$
RewriteRule ^.*$ /doc/sample-rates [PT,L] 
```

问题是，当我在文件系统上放置一个真实文件的名称作为 RewriteRule 替换时，可以说是“script.php”，一切正常。在 auto.domain.int 主机名下提供的 script.php 文件的内容。

另一方面，当我将 MVC 路由作为 RewriteRule 替换时，我从 apache 收到 500 错误，用于 '/doc/sample-rates' 路径和 400 错误，用于 ' [http://www.domain.int/doc/sample-rates](http://www.domain.int/doc/sample-rates) ' 路径和 apache 日志中的几行：

```
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d75058/initial] (3) [perdir /var/www/domain /base/www.domain.com/htdocs/] 去除每个目录前缀：/var/www/domain/base/www.domain.com/htdocs/ ->
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d75058/initial] (3) [perdir /var/www/domain /base/www.domain.com/htdocs/] 将模式 '^.*$' 应用于 uri ''
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d75058/initial] (2) [perdir /var/www/domain /base/www.domain.com/htdocs/] 重写 '' -> '/doc/sample-rates'
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d75058/initial] (2) [perdir /var/www/domain /base/www.domain.com/htdocs/] 强制“/do​​c/sample-rates”传递到下一个 API URI-to-filename 处理程序
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d75058/initial] (1) [perdir /var/www/domain /base/www.domain.com/htdocs/] 内部重定向与 /doc/sample-rates [内部重定向]
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d67018/initial/redir#1] (3) [perdir /var /www/domain/base/www.domain.com/htdocs/] 添加路径信息后缀：/var/www/domain/base/www.domain.com/htdocs/doc -> /var/www/domain/base/ www.domain.com/htdocs/doc/sample-rates
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d67018/initial/redir#1] (3) [perdir /var /www/domain/base/www.domain.com/htdocs/] 去除每个目录前缀：/var/www/domain/base/www.domain.com/htdocs/doc/sample-rates -> doc/sample-费率
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d67018/initial/redir#1] (3) [perdir /var /www/domain/base/www.domain.com/htdocs/] 将模式 '^.*$' 应用于 uri 'doc/sample-rates'
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d67018/initial/redir#1] (2) [perdir /var /www/domain/base/www.domain.com/htdocs/] 重写 'doc/sample-rates' -> '/doc/sample-rates'
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d67018/initial/redir#1] (2) [perdir /var /www/domain/base/www.domain.com/htdocs/] 强制“/do​​c/sample-rates”传递到下一个 API URI-to-filename 处理程序
127.0.0.1 - - [04/Mar/2013:10:50:19 --0500] [auto.domain.int/sid#b73cd9d8][rid#b6d67018/initial/redir#1] (1) [perdir /var /www/domain/base/www.domain.com/htdocs/] 内部重定向与 /doc/sample-rates [内部重定向]

```

更新：auto.domain.int 是使用 ServerAlias 的“主”www.domain.int 的别名。

谢谢，
尤金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:58:49.223

您必须添加一个附加项`RewriteCond`以防止无休止的重写

```
RewriteCond %{HTTP_HOST} ^auto\.domain\.int$
RewriteCond %{REQUEST_URI} !^/doc/sample-rates$
RewriteRule ^.*$ /doc/sample-rates [PT,L] 
```

# image - 使用 mvvmcross 和 mono 选择图像时出现问题

> ID：15206135
> 
> 赞同：3
> 
> 时间：2013-03-04T16:23:07.573
> 
> 标签：image, xamarin.ios, mvvmcross

我使用以下两种方法在用户图像文件夹中选择图像。但是我的问题是，每次调用 ChoosePhotoForEventItem() 之后，服务似乎都会记住提供的操作（UploadImage）。这意味着第二次调用ChoosePhotoForEventItem()，方法UploadImage被触发两次，第三次被触发三次。我试图将方法转换为属性并将其设置为 null，这样就不会改变任何事情。

```
 public void ChoosePhotoForEventItem()
    {
        var picChooser = this.GetService<IMvxPictureChooserTask>();

        picChooser.ChoosePictureFromLibrary(MaxPixelDimension, DefaultJpegQuality,this.UploadImage,delegate {/*Do nothing on cancel*/});

    }

    private void UploadImage(Stream stream)
    {
        this.UploadImage(stream, ItemID);
    } 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:35:40.423

查看插件，每次调用 GetService 都会为新实例注册任务

```
 this.RegisterServiceType<IMvxPictureChooserTask, MvxImagePickerTask>(); 
```

在[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Plugins/PictureChooser/Cirrious.MvvmCross.Plugins.PictureChooser.Touch/Plugin.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Plugins/PictureChooser/Cirrious.MvvmCross.Plugins.PictureChooser.Touch/Plugin.cs)

看起来每个 MvxImagePickerTask 实例在[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Plugins/PictureChooser/Cirrious.MvvmCross.Plugins.PictureChooser.Touch/MvxImagePickerTask.cs中创建了它自己的 UIImagePickerController](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Plugins/PictureChooser/Cirrious.MvvmCross.Plugins.PictureChooser.Touch/MvxImagePickerTask.cs)

所以我无法在插件中发现任何错误，尤其是当您的代码`var picChooser = this.GetService<IMvxPictureChooserTask>();`每次都在调用时。

* * *

你有一个简单的示例应用程序，人们可以尝试运行它来调试它吗？

如果没有，你可以尝试运行类似的东西：

```
private int _counter = 0;

public void ChoosePhotoForEventItem()
{
     _counter++;
     var localCounter =  _counter;
    var picChooser = this.GetService<IMvxPictureChooserTask>();

    picChooser.ChoosePictureFromLibrary(MaxPixelDimension, 
         DefaultJpegQuality,
         (stream) => this.SpecialUploadImage(stream, localCounter),
          delegate {/*Do nothing on cancel*/});
}

private void SpecialUploadImage(Stream stream, int theCounter)
{
    MvxTrace.Trace("Callback for localCounter {0}", theCounter);
    this.UploadImage(stream, ItemID);
} 
```

从中得到的痕迹将帮助我们弄清楚什么动作被调用了 3 次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:06:38.017

正如 Stuart 指出的那样，问题是我正在使用的服务是单例的，并且每次我使用该服务时都不会实例化它。因此，现在，我正在使用简单的布尔值进行快速修复，以避免任何不需要的上传。Stuart 告诉我我正在使用的 mvvm 版本已经很旧了。因此，在最近的将来切换到 vNext 似乎是唯一的出路。

# html - tiny_mce 插入/编辑图像自定义 html

> ID：15206137
> 
> 赞同：2
> 
> 时间：2013-03-04T16:23:09.120
> 
> 标签：html, image, tinymce

插入图像时如何更改html输出

由此：

```
<img title="?" src="?" alt="?" width="xxx" height="xxx" /> 
```

进入这个：

```
<a href="?" rel="?" title="?"> <img src="?" alt="?"></a> 
```

如何设置变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:26:32.180

我自己找到了答案。我编辑了 tiny_mce\plugins\advimage\js\image.js

```
ed.execCommand('mceInsertContent', false, tinyMCEPopup.editor.dom.createHTML('img', args), {skip_undo : 1}); 
```

进入

```
ed.execCommand('mceInsertContent', false, tinyMCEPopup.editor.dom.setHTML(tinyMCE.activeEditor.dom, '<a href="'+ foo +'" rel="lightbox[article]" title="'+ args['title'] +'"> <img src="'+ args['src'] +'" alt="'+ args['title'] +'"></a>'), {skip_undo : 1}); 
```

# knockout.js - 部分视图上的淘汰赛绑定问题

> ID：15206138
> 
> 赞同：1
> 
> 时间：2013-03-04T16:23:11.287
> 
> 标签：knockout.js

我创建了一个局部视图，可以将其包含在其他视图中以处理通知。

```
<div id="notifications">
    <!-- ko with: $root.currentNotification -->
    <span data-bind="text: notificationType"></span>
    <span data-bind="text: friendlyMessage"></span>
    <!-- ko if: $root.technicalMessageShown -->
    <span data-bind="text: technicalMessage"></span>
    <!-- /ko -->
    <button data-bind="click: $root.toggleTechnicalMessage, text: $root.technicalMessageButtonText"></button>
    <button data-bind="click: $root.dismissNotification">Dismiss</button>
    <!-- /ko -->

    <pre data-bind="text: ko.toJSON($root, null, 2)"></pre>

</div> 
```

使用父视图中的以下绑定将视图绑定到视图模型。

```
var notificationsViewModel = new NotificationsViewModel();
ko.applyBindings(notificationsViewModel, document.getElementById("notifications"));
var viewModel = new MainViewModel();
ko.applyBindings(viewModel); 
```

渲染时，'ko with: $root.currentNotification' 中的元素不包含在 DOM 中，即使 currentNotification 存在于视图模型上。

从局部视图的最后一行显示的视图模型：

```
{
  "allNotifications": [
    {
      "id": "0",
      "notificationType": "Error",
      "friendlyMessage": "Lorem ipsum dolor sit amet.",
      "technicalMessage": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque elit nulla, porta ac condimentum in, condimentum sed dui. Aliquam interdum."
    }
  ],
  "currentNotification": {
    "id": "0",
    "notificationType": "Error",
    "friendlyMessage": "Lorem ipsum dolor sit amet.",
    "technicalMessage": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque elit nulla, porta ac condimentum in, condimentum sed dui. Aliquam interdum."
  },
  "technicalMessageButtonText": "More Info"
} 
```

知道为什么淘汰赛没有看到当前的通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:51:37.913

您需要针对两个绑定，如果您只针对一个绑定，另一个将覆盖它。

# ajax - Primefaces 带有 ajax 事件的附加属性

> ID：15206139
> 
> 赞同：1
> 
> 时间：2013-03-04T16:23:11.240
> 
> 标签：ajax, spring, jsf, primefaces

我有这个 tabview 组件：

```
<p:tabView id="tabView"
        var="tab"
        dynamic="true"
        cache="true"
        value="#{integrationBean.tabs}">

        <p:ajax event="tabChange"
            listener="#{integrationBean.tabChanged}"
            update="tabContent"/> 
```

我需要将属性传递给 ajax 请求。就像是

```
<p:ajax event="tabChange"
                listener="#{integrationBean.tabChanged}"
                update="tabContent">
<f:param name="id" value="#{integrationBean.id}" />
<!-- OR -->
<f:attribute name="id" value="#{integrationBean.id}" />
<!-- Neither of this works -->
</p:ajax> 
```

所以我可以

```
@Value("#{request.getParameter('id')}")
protected Long id; 
```

在我的豆子上。如何将此参数传递给请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:53:31.020

使用`<p:remoteCommand>`.

```
<p:ajax event="tabChange" oncomplete="tabChangeCommand()" />
<p:remoteCommand name="tabChangeCommand" actionListener="#{integrationBean.tabChanged}" update="tabContent">
    <f:param name="id" value="#{integrationBean.id}" />
</p:remoteCommand> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T16:38:59.830

`<f:param/>`在你的 xhtml 中使用

```
<f:param name="id" value="#{integrationBean.id}" /> 
```

您可以使用[`ExternalContext#getRequestParameterMap()`](http://download.oracle.com/javaee/5/api/javax/faces/context/ExternalContext.html#getRequestParameterMap%28%29)从 backing bean 中检索它

```
Map<String, String> map = (Map<String, String>) externalContext.getRequestParameterMap();

String paramValue= map.get("paramName"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T07:51:53.787

通过将 id 放入 flash 范围并在 ajax 请求中取回它来解决它。这不是理想的解决方案，但它有效。

# php - MySQL转义线中断导出到CSV？

> ID：15206141
> 
> 赞同：2
> 
> 时间：2013-03-04T16:23:18.620
> 
> 标签：php, mysql, csv

我有一个问题，我有一个“文本”字段，其中包含一堆从单词等粘贴的“故事”，因此包括换行符和制表符之类的内容。我想导出到 CSV 来维护这些或能够将它们取回。

但我不知道如何逃脱它们所以它有效？当我导出 CSV 时，我得到一个 CSV，其中包含多行/列上的一堆单句。

我尝试用其他内容替换新闻行，但我一直在搞砸。有没有一种简单的方法可以在不破坏数据的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:27:29.880

CSV 不是任意文本的好格式，但您可以*尝试*

```
SELECT ... INTO OUTFILE '/tmp/text.csv'
   FIELDS ESCAPED BY '""' TERMINATED BY ','  OPTIONALLY ENCLOSED BY '"'
   LINES TERMINATED BY '\n' 
FROM yourtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:28:18.930

尝试这样的事情：

```
$line.=preg_replace("/\n\t/", ";", preg_replace("/,/", ";", $f['field5'])).','; 
```

或者

```
$line.=preg_replace("/\n/", ";", preg_replace("/,/", ";", $f['field5'])).','; 
```

最后你必须首先显示`$line`包括标题。

`$f['field5']`- 来自数据库的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T20:06:07.237

您可以尝试 a `SELECT`with a search and replace 之类的东西，在其中搜索换行符 of`'\n'`并将其替换为 nothing `''`。A`SELECT`实际上不会替换表本身中的任何内容，除非您执行了`UPDATE`. 请参见下面的查询示例。

```
(SELECT 'columnA', 'columnB', 'columnC')
UNION
(SELECT `columnA`, REPLACE(`columnB`, '\n', ''), `columnC`
FROM `yourtable`
INTO OUTFILE '/tmp/text.csv'
FIELDS OPTIONALLY ENCLOSED BY '"' TERMINATED BY ',' ESCAPED BY '"'
LINES TERMINATED BY '\n'); 
```

# eclipse - 使用新元素向导的活动

> ID：15206143
> 
> 赞同：0
> 
> 时间：2013-03-04T16:23:21.397
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在尝试使用`org.eclipse.activities`以启用/禁用新元素向导（例如，我想隐藏“新 java 类向导”）。当我将向导 ID 添加到活动时，我仍然可以从“选择向导”中选择新元素向导，并提示一个对话框询问我是否要启用此活动。如何从“选择向导”树中隐藏此向导或禁用“确认启用”对话框？

![在此处输入图像描述](../Images/aeb93dcac781770ae9884fc56eef445a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:04:32.610

我自己发现了问题。主要问题是当向导设置为“primaryWizard”时，它不会从树中删除。我一直在寻找主要的奇才，而不是类别中的那个。因此，如果您需要隐藏向导，您只需添加以下扩展名：

```
 <extension
         point="org.eclipse.ui.activities">
          <activity
              id="de.de.de.enableFeatureOne"
              name="Enable Feature">
          </activity>
          <activityPatternBinding
               activityId="de.de.de.enableFeatureOne"
               pattern="pluginID/elementID">
          </activityPatternBinding>
      </extension> 
```

# winapi - LookupAccountName 返回本地 PC 域，而不是登录的 AD 域

> ID：15206146
> 
> 赞同：0
> 
> 时间：2013-03-04T16:23:24.237
> 
> 标签：winapi

我一直在使用

```
LookupAccountName 
```

使用来自的返回值

```
GetUserName 
```

检索当前登录的 AD 域名。

这已经在许多具有许多不同基于 NT 的操作系统的机器上愉快地工作了一段时间

也就是说，直到今天，它没有返回登录的 AD 域，而是返回计算机名称作为域。

谁能解释为什么这种情况发生的概率不到 0.5%？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T13:43:41.187

如果本地计算机上有一个与 Active Directory 用户名同名的帐户，`LookupAccountName`则将返回本地计算机名称（即本地域名），而不是所需的 AD 域名。

相反，我应该使用`GetUserNameEx`with`NameUserPrincipal`返回当前用户的主体名称，可以将其输入`LookupAccountName`以返回登录的域。

# javascript - 类似 Python 的完整 Javascript 对象的酸洗

> ID：15206153
> 
> 赞同：24
> 
> 时间：2013-03-04T16:23:40.300
> 
> 标签：javascript, python, json, serialization, pickle

是否有任何 Javascript 序列化框架可以保留类和参考信息，如 Python 泡菜？即，可以直接获取一个原型继承类实例（不仅仅是类似 JSON 的数据）并将其序列化，如下所示：

```
 // Somehow add serialization metadata to classes first
 obj = new MyObject();
 obj.referred = new MyObject2();
 pickle = serializer.dump(obj) // Provides byte stream of the serialized object 
```

序列化程序可以处理

*   在泡菜中编码类信息 - 由于存在不同的 JS 类系统，这应该可以以某种方式定制

*   自动跟踪和序列化引用的对象

*   提供挂钩来为值添加自定义编码器/解码器（日期是最常见的情况）

这将使复杂数据结构的内部存储和传输变得更容易一些。我希望在游戏引擎中使用它。与 pickle 一样，如果没有提供类定义的原始 Javascript 代码，数据的反序列化是不可能的。

Javascript 已经存在什么样的此类框架，或者我将需要推出自定义系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:52:59.027

它并不完美，但您可以尝试使用[occamsrazor.js](https://github.com/sithmel/occamsrazor.js)。这样做可以使用 JSON 序列化：

```
// this is your costructor function
function Circle(attrs){
    this.radius = attrs.radius;
}
Circle.prototype.area = function (){
    return this.radius*this.radius*Math.PI;
}
Circle.prototype.perimeter = function (){
    return 2*this.radius*Math.PI;
}

// this is a validator
function hasRadius(obj){
    return radius in obj;
}

// this is your factory function
objFactory = occamsrazor().addContructor(hasRadius, Circle);

// this is your deserialized object
var json = '{"radius": 10}';

// circle now is a full fledged object
var circle = objFactory(JSON.parse(json)); 
```

缺点是您不会像使用 pickle 那样获得对象的快照，而是重新创建一个新对象。但在某些情况下可能会很方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:06:54.090

你可能想看看[hunterloftis/cryo](https://github.com/hunterloftis/cryo)。从自述文件：

> 专为 node.js 和浏览器构建。Cryo 的灵感来自 Python 的 pickle，其工作方式类似于 JSON.stringify() 和 JSON.parse()。Cryo.stringify() 和 Cryo.parse() 在以下情况下改进了 JSON：
> 
> *   不明确的
> *   日期
> *   无穷
> *   对象引用
> *   附加属性
> *   职能
> *   DOM 节点

在[r/programming](http://www.reddit.com/r/programming/comments/15w269/cryo_freeze_and_thaw_javascript_objects_including/)与作者进行了简短的讨论。

来源很简单，没有魔法。

我还没试过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:56:18.237

[http://nanodeath.github.com/HydrateJS/](http://nanodeath.github.com/HydrateJS/)（博客文章[http://blog.maxaller.name/2011/01/hydrajs-smarter-javascript-serialization](http://blog.maxaller.name/2011/01/hydratejs-smarter-javascript-serialization)）似乎符合您的一些要求，特别是通过[https://github.com/nanodeath/HydrateJS/blob/master/spec/HydrateSpec.js](https://github.com/nanodeath/HydrateJS/blob/master/spec/HydrateSpec.js)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:28:45.617

查看[msgpack](http://msgpack.org/)。虽然我没有将它用于 JavaScript 对象，但该示例似乎暗示它将适用于对象而不仅仅是 JSON。一个额外的好处：它是我用于序列化的最快的实现之一。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-23T15:08:50.397

这里有几个：

杰森：完全披露：我做了这个。但我使用它，它是我对完整 javascript 序列化的最高建议。与其他任何一个相比，使用它可能会减轻很多痛苦，如果它不符合您的需求，我会欣喜若狂地添加到库中！原型/构造函数信息，对同一对象的多次引用，具有用户定义类型的挂钩。保存原型的副本，除非您明确地将原型添加到“常量”列表中，在这种情况下，它在重建时使用已经存在的原型。具有 JSON 样式的替换器和引用解析时将存在的对象的方式。序列化 Date、RegExp、null、NaN、Infinity、-Infinity、函数、DOM 元素、事件和普通对象。仍然不是一个久经考验的库，但如果它不适合你，[https://github.com/johnlarson/Jason](https://github.com/johnlarson/Jason)

ResurrectJS：原型/构造函数信息，对同一个对象的多次引用，没有钩子。使用 'constructor' 属性来获取构造函数，并且构造函数的命名空间有一定的限制，您可以使用自定义命名空间解析器来解决。具有 JSON 样式的替换器。序列化 Date、RegExp、DOM 元素、NaN、Infinity、-Infinity 和普通对象。比 Jason 更成熟、更受使用测试，但更难正确使用。[https://github.com/skeeto/resurrect-js](https://github.com/skeeto/resurrect-js)

SnapShot：我没试过这个。它看起来很有希望，但最后一次更新是在 3 年前。据我所知，没有自动原型/构造函数信息，但它有一个钩子 api，用于定义类似于 JSON 的 toJSON 和 fromJSON 的自定义序列化/反序列化行为。处理对同一对象的多个引用。据我所知，没有 JSON 样式的替换器。序列化 Date、RegExp、null 和函数。[https://github.com/mixu/snapshot](https://github.com/mixu/snapshot)

JASON：另一个我没有尝试过的有前途的图书馆，最近一次更新是在 3 年前。我不知道它是否有原型/构造函数。处理对同一对象的多个引用。据我所知，它没有钩子。我不知道它是否有 JSON 样式的替换器。序列化“日期、正则表达式、布尔值等” 和“所有 JS 原语，包括未定义的”。[https://github.com/xk/JASON](https://github.com/xk/JASON)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-22T15:52:01.937

带有转储（即dangerousDump）和加载（即dangerousLoad）[的js-yaml 。](https://github.com/nodeca/js-yaml)我认为 YAML 是在大多数语言中实现的。

否则，您必须提供 JSON.stringify (replacer) 和 JSON.parse (reviver) 的序列化/反序列化方法。

I made a library based that that [https://github.com/patarapolw/any-serialize](https://github.com/patarapolw/any-serialize), and tested for Date, RegExp, Set, Function, Class constructor, Infinity, NaN, BigInt, Symbol, Undefined.

For custom Class instances, you will have to provide how-to.

# jquery - 检查 jQuery UI 调用

> ID：15206157
> 
> 赞同：5
> 
> 时间：2013-03-04T16:23:50.473
> 
> 标签：jquery, jquery-ui

我正在处理一个前同事的旧项目。在这个项目中，加载了整个 jQuery UI 1.8.18。

是否有一种简单的方法可以检查进行了哪些 jQuery UI 调用，以便我可以删除未使用的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:57:58.683

您可以使用[jQuery 的`.data("events")`](http://api.jquery.com/data/). 如果您知道选择器的类或 ID，请使用：

```
$(selector).data("events"); 
```

如果要搜索整个文档，请执行以下操作：

```
$("*").each(function(index, el){
    if($(el).data("events") != undefined){
        //do something
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/3/](http://jsfiddle.net/dirtyd77/SLGdE/3/)

希望这会有所帮助，如果您有任何问题，请告诉我！

# java - Hibernate：在案例中插入具有自定义 id 的实体：strategy = GenerationType.AUTO

> ID：15206158
> 
> 赞同：1
> 
> 时间：2013-03-04T16:23:52.557
> 
> 标签：java, hibernate, generated

如果该策略占据一席之地，Hib 会忽略 id 设置。

有什么方法可以避免这种情况并保存策略吗？

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "id")
public Long getId() {
     return id;
} 
```

...

```
Account account = new Account();
account.setId(1000L);
account.setSmth(smth);
...
//Tried to do so, but tomcat hangs on this string. 
session.createSQLQuery("ALTER TABLE account AUTO_INCREMENT = " + account.getId() + ";").executeUpdate();
session.save(account);
... 
```

斯帕西博！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:24:31.087

只需删除 GeneratedValue 的注释，如下所示，实体将使用分配的 id 值。它适用于我的网络应用程序。

```
@GeneratedValue(strategy = GenerationType.AUTO) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:12:29.450

如有必要，您可以使用以下策略存储具有分配 id 的实体：

```
@GeneratedValue(strategy="org.hibernate.id.Assigned")
public Long getId() {
    ...
} 
```

唯一的缺点是您必须包含一个版本字段，Hibernate 需要识别它是新实体还是现有实体：

```
@Version
public Long getVersion() {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T08:48:39.657

删除注释@GeneratedValue。Hibernate 将使用您分配的标识符。请参阅以下来自 Hibernate 文档的描述。

**分配**

**让应用程序在调用 save() 之前为对象分配一个标识符。如果未指定任何元素，这是默认策略。**

参考[https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)

# c# - WPF下载文件并同时保存

> ID：15206159
> 
> 赞同：2
> 
> 时间：2013-03-04T16:23:52.753
> 
> 标签：c#, .net, wpf

我用这种方法下载了一个文件：

```
WebClient webClient = new WebClient();
webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(webClient_DownloadProgressChanged);
webClient.DownloadDataCompleted += new DownloadDataCompletedEventHandler(client_DownloadDataCompleted);
webClient.DownloadDataAsync(new Uri(this.Url)); 
```

这就是我将它保存到磁盘的方式：

```
void client_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
    {
        try
        {
            if (e.Result != null)
            {
                string VideoFile = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Playtube\\VideoCache\\" + this.id + ".wmv";
                File.WriteAllBytes(VideoFile, e.Result);

                isDownloading = false;
                callbackFinish();
            }
        }
        catch (Exception ex)
        {
            //MessageBox.Show(ex.Message);
        }
    } 
```

而且我想知道是否可以下载文件并同时将其保存到磁盘，而不是等到文件完成下载才能保存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:35:33.513

您可以使用[DownloadFileAsync](http://msdn.microsoft.com/en-us/library/ms144196.aspx)将其直接下载到文件中。

# asp.net - 如何从phonegap接收aspx页面中的文件

> ID：15206164
> 
> 赞同：1
> 
> 时间：2013-03-04T16:24:06.147
> 
> 标签：asp.net, cordova, file-upload, file-transfer

想要帮助我尝试使用 Cordova 中的 FileTransfer API 从 windows phone 7 上传文件，我已经按照文档中的步骤进行了操作[。](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileTransfer)

但我使用 aspx 页面作为移动应用程序的服务我不知道如何在 aspx 页面中接收文件这个 encodeURI(" [http://some.server.com/upload.php](http://some.server.com/upload.php) ") 我有而不是 encodeURI(" [http://some.server.com/upload.aspx](http://some.server.com/upload.aspx) ")

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:35:13.623

您应该使用 Request.Files 集合：

```
HttpPostedFile file = Request.Files["file"]; 
```

# iphone - 自动布局和 ios5

> ID：15206166
> 
> 赞同：2
> 
> 时间：2013-03-04T16:24:12.397
> 
> 标签：iphone, objective-c, cocoa-touch

我正在使用故事板。我使用了自动布局，但它不适用于 ios5 并导致崩溃，所以我想删除它。但是，如何取消选中自动布局。但是如果我取消选中自动布局，我如何为 iPhone 4 和 5 设置我的屏幕

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:34:12.530

您可以在 IB 中禁用自动布局，但在视图控制器中以编程方式设置约束，具体取决于设备上的 iOS 版本是否支持，例如，检查是否可以找到 NSLayoutConstraint 类：

```
if (NSClassFromString(@"NSLayoutConstraint")) {
    //create constraints
} 
```

可以在此处找到有关创建实际约束的更多信息：[http ://www.techotopia.com/index.php/Implementing_iOS_6_Auto_Layout_Constraints_in_Code](http://www.techotopia.com/index.php/Implementing_iOS_6_Auto_Layout_Constraints_in_Code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:32:45.817

您可以从 Storyboard Utilities 选项卡中取消选中自动布局。如果您不使用自动布局，则可以使用字符串和结构或以编程方式进行调整。

![在此处输入图像描述](../Images/4961c437c6b0ecf7bbf6253dba0ce88e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:32:05.233

为了使用自动布局，请根据您要如何调整它们的大小，为每个视图使用故事板中的弹簧！你自然需要

```
 view.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth 
```

在 StoryBoard 中，当您设置字符串或支柱时，这意味着您正在固定该距离，例如：如果您选择底部弹簧，则视图与底部的距离是固定的，这与上面的 UIViewAutoresizingFlexibleTopMargin 相同。

# java - 在从 html 页面上传文件期间，控制权被转移到 servlet

> ID：15206171
> 
> 赞同：-3
> 
> 时间：2013-03-04T16:24:37.200
> 
> 标签：java, javascript, html, ajax, servlets

我正在尝试在我的应用程序中使用文件上传功能。我在我的 html 中使用以下代码

```
<form action="http://localhost:8080/demo/Upload/a" method="post" enctype="multipart/form-data">
<input type="text" name="description" />
<input type="file" name="file" />
<input type="submit" /> 
```

单击提交按钮时，servlet 的 URL 出现在我的浏览器的地址栏中。但是我不希望这样。我希望在单击提交后相同的页面出现在我的屏幕上..类似于 ajax 的页面没有发布数据后重新加载。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:33:31.730

实际上，使用纯 AJAX 无法上传文件，因为 JavaScript 无法直接访问文件系统。但是，有一些使用 iframe 的方法。所以有一个[jQuery 插件](http://jquery.malsup.com/form/)可以为你处理所有这些东西。

# c++ - 为什么我的 OpenMP C++ 代码比串行代码慢？

> ID：15206176
> 
> 赞同：1
> 
> 时间：2013-03-04T16:24:42.833
> 
> 标签：c++, openmp

```
#include <iostream>
#include <iomanip>
#include <fstream> 
#include <sstream>
#include <string>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <omp.h>
using namespace std;

void output(float a[], float X[], float Y[], int I, int J)
{
  ofstream ft;
  int i;

  ft.open("flow.dat");
  ft<<"variables=\"x\",\"y\",\"a\""<<"\n"
    <<"zone f=point"<<"\n"
    <<"I="<<I<<",J="<<J<<"\n"
    <<endl;

  for(int i=0;i<I*J;i++)
    {
    ft<<setiosflags(ios::scientific)
      <<X[i]<<" "<<Y[i]<<" "<<a[i]<<endl;
    }

  ft.close();

}

void set(float a[], float X[], float Y[], int I, int J, float hx, float hy)
{
  for(int j=0;j<J;j++)
    for(int i=0;i<I;i++)
      {
        int iC=j*I+i;
        X[iC]=i*hx;
        Y[iC]=j*hy;
        a[iC]=0.0;
        if(j==J-1) a[iC]=1.0;
      }
}

void difference_serial(float a[],  int I, int J, const float hx, const float hy)
{
  const float aC=(hx*hx+hy*hy)*2;
  const float aX=hy*hy;
  const float aY=hx*hx;
  for(int j=1;j<J-1;j++)
    for(int i=1;i<I-1;i++)
      {
        int iC=j*I+i;
        int iL=iC-1;
        int iR=iC+1;
        int iU=iC+I;
        int iD=iC-I;
        a[iC]=(aX*(a[iL]+a[iR])+aY*(a[iU]+a[iD]))/aC;
      }

}

void difference_omp(float a[],  int I, int J, const float hx, const float hy)
{
  const float aC=(hx*hx+hy*hy)*2;
  const float aX=hy*hy;
  const float aY=hx*hx;

  int i,j,iC,iL,iR,iU,iD;
#pragma omp parallel for private(i,j,iC,iL,iR,iU,iD) shared(a,I,J) schedule(dynamic) 
  for( j=1;j<J-1;j++)
    for( i=1;i<I-1;i++)
      {
        iC=j*I+i;
        iL=iC-1;
        iR=iC+1;
        iU=iC+I;
        iD=iC-I;
        a[iC]=(aX*(a[iL]+a[iR])+aY*(a[iU]+a[iD]))/aC;
      }
}

int main()
{
  const int I=129;
  const int J=129;
  const int N=I*J;
  const float hx=1.0/(I-1);
  const float hy=1.0/(J-1);

  float *a=new float[N];
  float *X=new float[N];
  float *Y=new float[N];

  //set the grid and flow
  set(a,X,Y,I,J,hx,hy);

  //iteation
  clock_t start=clock();
  for(int it=0;it<10000;it++)
    difference_serial(a,I,J,hx,hy);
  clock_t end=clock();
  printf("Serial time=%f\n",(float)(end-start)/CLOCKS_PER_SEC);

  set(a,X,Y,I,J,hx,hy);
  clock_t start2=clock();
  for(int it2=0;it2<10000;it2++)
    difference_omp(a,I,J,hx,hy);
  clock_t end2=clock();
  printf("Omp time=%f\n",(float)(end2-start2)/CLOCKS_PER_SEC);

  //output
  output(a,X,Y,I,J);

  //free memory
  delete[] a;
  delete[] X;
  delete[] Y;
} 
```

我写了一段代码来求解一个非常简单的二维拉普拉斯方程。尝试比较串口代码和 OpenMP 代码

我试图用 g++ tmp.cpp -fopenmp 编译代码

并得到非常奇怪的结果输出： Serial time=1.620000 Omp time=9.820000

有没有人可以帮助我弄清楚这背后的原因以及如何更正 OpenMP 代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T16:56:57.010

我遇到了有趣的结果。

```
luk32:~/projects/tests$ g++ -fopenmp -lgomp ./laplace.cpp 
luk32:~/projects/tests$ ./a.out 
Omp time=13.000000
Serial time=3.000000
luk32:~/projects/tests$ g++ -O3 -fopenmp -lgomp ./laplace.cpp 
luk32:~/projects/tests$ ./a.out 
Omp time=31.000000
Serial time=1.000000 
```

因此，`O3`随着时间的推移，OpenMP 变得更糟，而串行版本则下降了。我的猜测是问题实例是如此之小，以至于调用并行区域的实际开销在这里体现出来。

**您正在尝试在您的 PC 上并行化需要 1.5s / 10k = 0.15 毫秒的东西。**初始化线程池和调度**有**它的开销，尤其是在`schedule(dynamic)`

我会尝试做一些测试来确认。不确定随机碰撞`I`和`J`.

**测试后：**

好的，我切换`J=I=10240;`并设置了`for(int it=0;it<50;it++)`。我也用于`omp_get_wtime()`时间测量。下面是完整的差异文件。

结果如下：

```
Serial time=58.982189
Omp time=9.158118 
```

它是在 6 物理/12 逻辑核心机器上执行的。现在结果和预期的一样。您的示例问题太小`OpenMP`而无法高效，以至于开销比计算花费的时间更长。

差异：

```
luk32:~/projects/tests$ diff laplace.orig.cpp laplace.cpp
88,89c88,89
<   const int I=129;
<   const int J=129;
---
>   const int I=10000;
>   const int J=10000;
102,103c102,103
<   clock_t start=clock();
<   for(int it=0;it<10000;it++)
---
>   double start=omp_get_wtime();
>   for(int it=0;it<50;it++)
105,106c105,106
<   clock_t end=clock();
<   printf("Serial time=%f\n",(float)(end-start)/CLOCKS_PER_SEC);
---
>   double end=omp_get_wtime();
>   printf("Serial time=%f\n",(float)(end-start));
110,111c110,111
<   clock_t start2=clock();
<   for(int it2=0;it2<10000;it2++)
---
>   double start2=omp_get_wtime();
>   for(int it2=0;it2<50;it2++)
113,114c113,114
<   clock_t end2=clock();
<   printf("Omp time=%f\n",(float)(end2-start2)/CLOCKS_PER_SEC);
---
>   double end2=omp_get_wtime();
>   printf("Omp time=%f\n",(float)(end2-start2)); 
```

编辑：我只是将主要问题加粗，因此遇到此问题的任何人都会自动关注它。

# symfony - 如何使 twig 呈现具有与推进表单类型不同的主题块的表单元素

> ID：15206178
> 
> 赞同：1
> 
> 时间：2013-03-04T16:25:06.263
> 
> 标签：symfony, twig, symfony-2.1, propel

我试图使用 block_name 属性为某个表单输入选择不同的主题：

```
$builder->add('titleFragments', new Form\DerivedType\SortableCollectionType(), array( 
        'label' => ' ',
        'type' => new TitlefragmentType(),
        'allow_add' => true,
        'by_reference' => false,
        'block_name' => 'anotherThemeBlock',
)); 
```

但它没有按预期工作，我找不到任何关于 block_name 参数的文档。所以我的问题不是这个参数有什么好处，而是如何为某个表单输入定义另一个块主题。

# jquery - 如何在单击时切换 DOM 元素的文本

> ID：15206180
> 
> 赞同：2
> 
> 时间：2013-03-04T16:25:06.683
> 
> 标签：jquery, html

正如标题所说，我对 JQuery 编程相当陌生。这是我设置的一个小测试 JSFiddle：

[http://jsfiddle.net/LQNmK/10/](http://jsfiddle.net/LQNmK/10/)

```
 $(document).ready(function () {

     $("#testing1").show();
 });

 $(".testbutton").live("click", function () {
     $("#testing1 p").toggle("showorhide");
 }); 
```

在这里，我基本上是在做一个 showorhide 或一个 div。

我的问题是我希望按钮在隐藏时显示显示，反之亦然。什么是一个很好的简单方式来显示这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:28:45.230

最简单的方法是检查内容是否可见：

```
$(document).on("click", ".testbutton", function(ev) {
    var content = $("#testing1 p");
    content.toggle("showorhide");
    var text = content.is(":visible") ? "hide" : "show";
    $(this).val(text);
}); 
```

请注意，我已更改（弃用）`live`为`on`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:28:01.177

你可以这样做：

```
 $(".testbutton").on("click", function () {
     $("#testing1 p").toggle("showorhide");
     $(".testbutton").text($('#testing1 p').is(':visible') ? 'Hide' : 'Show');
 }); 
```

正如所指出的，使用“on”而不是“live”，因为它已从当前版本的 jQuery 中删除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:31:48.930

采用

```
var status = $("#testing1 p").is(":visible");
var btn  = $(".testbutton");
if(status === true) {
  btn.attr('value','hide');
} else {
btn.attr('value','show');
} 
```

更新小提琴：http: [//jsfiddle.net/LQNmK/20/](http://jsfiddle.net/LQNmK/20/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:30:05.917

我的建议是使用两个按钮，默认情况下隐藏`.toggle()`一个，单击其中一个按钮时它们都隐藏。这使您可以更轻松地调整您希望任一按钮向用户显示的方式——只需更改 HTML，而无需理会 JavaScript。

HTML：

```
<input class="testbutton btn" type="button" value="Hide"/>
<input class="testbutton btn" style="display:none" type="button" value="Show"/> 
```

JS：

```
 $(".testbutton").on("click", function () {
     $('.testbutton').toggle(); // flip them both
     $("#testing1 p").toggle("showorhide");
 }); 
```

[http://jsfiddle.net/mblase75/UeuQm/](http://jsfiddle.net/mblase75/UeuQm/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T16:34:52.560

```
 $(".testbutton").live("click", function () {
     $("#testing1 p").toggle("showorhide",function(){
         $(".testbutton").val($("#testing1 p").is(':visible')?'Hide':'Show');
     });
 }); 
```

[http://jsfiddle.net/LQNmK/24/](http://jsfiddle.net/LQNmK/24/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T16:35:06.867

我个人建议：

```
$("#testing1").show();

$(".testbutton").on("click", function () {
    $(this).val(function (i, v) {
        return v.toLowerCase() == 'show' ? 'Hide' : 'Show';
    });
    $('#testing1 p').toggle();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LQNmK/21/)。

# deployment - 如何配置 SSIS 2012 项目以在不同的环境配置下运行？

> ID：15206184
> 
> 赞同：25
> 
> 时间：2013-03-04T16:25:24.350
> 
> 标签：deployment, ssis, sql-server-2012

**使用项目部署模型**配置 2012 SSIS 项目的最佳逻辑方法是什么？

`MyImport-Project`考虑具有三个包的 SSIS 项目的场景

### 项目解决方案：

*   MyImport-项目
    *   Import-Package-01
    *   Import-Package-02
    *   导入包 03

### 项目变量：

*   Project-DBConnString ：所有包用于连接到单个数据库。
*   Project-FolderPath ：所有包都使用它来查找输入文件

### 环境：

该项目被部署在

*   质量检查服务器
*   登台服务器
*   生产服务器

是否有配置项目参数的标准方法？

我看过很多关于包的配置文件的文章。有没有办法根据部署环境配置项目参数？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-04T21:36:04.823

SSIS 2012 项目部署模型为创建环境和配置环境特定值提供了更大的灵活性，这些值可以映射到项目参数。这是一个示例，说明了如何*`Integration Services Catalog`*针对多个环境执行部署到的包。理想情况下，生产环境应该在自己的服务器上。为简单起见，此示例使用同一服务器上的所有环境。

### 具有环境特定值的 SSIS 2012 集成服务目录：

Let's assume that you have deployed a package to Integration Services Catalog with two project parameters named *`Environment`* and *`FilePath`*. To run the package under different environments, you can create multiple environments under **`Integration Services Catalogs \ SSIDB \ Folder name \ Environments`**

This sample has three Environment folders named **`DEV`**, **`PRD`** and **`TST`**

![Environment Folders](../Images/e4082ca0585eaf7958f538794bfd48ed.png)

To create variables that should later be mapped to the project parameters, double-click the environment under the Environments folder. This samples shows how to configure values in all environments.

Since, the package has two project parameters named *`Environment`* and *`FilePath`*, we will create two environment variables of the same name. All the environments are configured with *`same`* variable names but with *`different`* values.

![DEV Environment](../Images/e46292e345ead75d5f15e2442eaa15a2.png)

![TST Environment](../Images/a716cb7070c27df2ceda12a3c04209a9.png)

![PRD Environment](../Images/84db086d061c1f7ac13d36f35709a74d.png)

To map the environment variables to the project parameters, right-click on the project under the Integration Services Catalog and click **`Configure...`**

![Project Configure](../Images/465cce2eae17f60a312143326cec6f15.png)

On the *Configure* dialog, click **`References`** page and add each environment which should be associated with the project.

![Configure References](../Images/c248be03a0a5e78fe8e712b31f904041.png)

On the *Configure* dialog, click **`Parameters`** page. For each parameter listed under *`Parameters`* tab, you need to click the *`Ellipsis`* button to map the appropriate environment variable.

![Configure Parameters](../Images/5f2981ca018f46cc7d4d8cb2b704e59c.png)

On the Set Parameter Value dialog, select Use environment variable radiobutton and choose the appropriate variable. Here the parameter being mapped is *`[Practice.SSDT].[Environment]`*. Hence, it is being mapped against the environment variable **`Environment`**.

![Set Parameter Value](../Images/2b21fc0f73f8160d845510637f504d6a.png)

Once you have mapped the parameter against the appropriate environment variable, you can choose the correct environment during package execution. To execute the package, right-click on the package and click **`Execute...`**

![Execute Package](../Images/4bf786b090527bca97d1207e9e3481a7.png)

On the *Execute Package* dialog, check **`Environment`** box and select the appropriate environment from which the package should use the values for execution.

![Execute Package](../Images/61ed0164696d9d5820ea3b4e299d0c53.png)

The sample package *`SO_15206184.dtsx`* in this example simply inserts the values of project parameters *`Environment`* and *`FilePath`* into a table. Here are the results of the package execution against different environments, even the one including from within SSDT.

![Package Execution Results](../Images/a736c8ea78307a8237671ec579206d41.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-27T03:39:23.263

From my reading of your question, you have 3 separate servers to deploy to, each with it's own instance of the SSIS Catalog. You do not want a single server to execute for multiple environments. For that scenario, user756519's answer is of little use unfortunately - 10 out of 10 for effort though.

I would ignore the "Environments" setup in SSIS. This is for managing multiple environments on a single SQL Server instance.

Instead I would:

1.  set the Environment 1 Project Parameter values in the Visual Studio solution and deploy to Environment 1
2.  Deploy to Environment 2
3.  Use SSMS to connect to Environment 2, navigate Under Integration Services Catalogs to find your project, right-click it and choose Configure. Edit the parameters as required for Environment 2
4.  Deploy to Environment 3
5.  Use SSMS to connect to Environment 3, navigate Under Integration Services Catalogs to find your project, right-click it and choose Configure. Edit the parameters as required for Environment 3

You can now continue to develop and deploy your project to each environment. No further maintenance is required, unless you add/delete/rename a Project Parameter. When any package is executed on each Environment/server, it will follow the configuration set via SSMS

# php - SQL：如果一个表为空，为什么来自多个表的 Max() 对所有内容都返回 NULL？

> ID：15206190
> 
> 赞同：1
> 
> 时间：2013-03-04T16:25:46.343
> 
> 标签：php, mysql, sql, null, max

我有一个与 PHP 5.3.1 一起使用的 MySQL 5.1.44 数据库。

```
SELECT MAX(t1.tstamp) AS tstamp1, MAX(t2.tstamp) AS tstamp2 FROM table1 t1, table2 t2; 
```

如果两个表都包含内容，这将**非常有效**，但**即使只有一个表是空的，它也会为两个表返回 NULL (!)**。为什么它不简单地为 table1 返回正确的值而为 table2 返回 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:31:29.513

使用两个查询 - 与空表交叉连接将产生零行

像这样的东西应该做的工作

```
SELECT
    (SELECT MAX(tstamp) FROM table1) AS tstamp1,
    (SELECT MAX(tstamp) FROM table2) AS tstamp2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:33:54.147

因为您要交叉连接 2 个表。（中间）结果表有 ( `0 x N =`)`0`行。

您的查询是：

```
SELECT 
    MAX(t1.tstamp) AS tstamp1, 
    MAX(t2.tstamp) AS tstamp2 
FROM 
    table1 t1 CROSS JOIN table2 t2 ; 
```

您可以通过运行 2 个子查询然后`UNION`它们来解决该问题，这将返回 0、1 或 2 行：

```
SELECT 
    'table1' AS tablename, MAX(tstamp) AS tstamp
FROM 
    table1
UNION ALL 
SELECT 
    'table2' AS tablename, MAX(tstamp) AS tstamp
FROM 
    table2 ; 
```

或者，如果您想要严格地 1 行并`NULL`在表没有行时得到结果，您可以这样做：

```
SELECT 
    MAX(t1.tstamp) AS tstamp1, 
    MAX(t2.tstamp) AS tstamp2 
FROM 
    (SELECT 1) AS dummy
  LEFT JOIN table1 t1 ON TRUE 
  LEFT JOIN table2 t2 ON TRUE ; 
```

或这个：

```
SELECT 
    (SELECT MAX(tstamp) FROM table1)  AS tstamp1, 
    (SELECT MAX(tstamp) FROM table2)  AS tstamp2
FROM 
    dual ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:36:48.893

您观察到的行为可能是由于其中一张表为空。（如果其中一个表为空，则 JOIN 操作不会返回任何行。）

这是一个查询，它是解决此问题的一种方法：

```
SELECT d1.tstamp1, d2.tstamp2
  FROM ( SELECT MAX(t1.tstamp) AS tstamp1 FROM t1 ) d1
 CROSS
  JOIN ( SELECT MAX(t2.tstamp) AS tstamp2 FROM t2 ) d2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:28:51.273

1.  使用`left join`并找到表值的最大值
2.  使用单独的查询

如果表之间没有关系，则使用单独的查询并找到最大值

# c - Linux内核模块/协议注册

> ID：15206192
> 
> 赞同：3
> 
> 时间：2013-03-04T16:25:55.810
> 
> 标签：c, linux, module, kernel, protocols

我的问题是关于 Linux 内核模块编程、AF 注册和协议注册（例如 AF_INET 、 sock_stream）。

目标：

1.  我想创建一个新的地址族并将其注册到内核中（这在某种程度上是完整的）
2.  向该 AF 注册一个新协议，它将处理传入的数据包，并且我可以为其编写一个 API。

问题：

1.  我找不到一个很好的例子或文档来描述协议注册是如何发生的。
2.  内核协议代码对于每个协议都是不同的，这并没有给我一个具体的解决方案。

我所需要的只是一个很好的 AF 和协议注册的基本示例，如果可能的话，还有评论。

# c# - AutoMapper - 通过接口重用映射

> ID：15206193
> 
> 赞同：1
> 
> 时间：2013-03-04T16:26:02.550
> 
> 标签：c#, automapper

我有一个基类和各种派生类，我想使用 AutoMapper 映射到 TPH 结构中的 EF 实体。

例如，假设我有以下简单模型：

```
public abstract class VehicleBase
{
    public readonly VehicleType VehicleType;

    public readonly int NumWheels;

    protected VehicleBase(VehicleType vehicleType, int numWheels)
    {
        this.VehicleType = vehicleType;
        this.NumWheels = numWheels;
    }

    public int Id { get; set; }

    public int PolicyId { get; set; }

    public int Year { get; set; }

    public string Make { get; set; }

    public string Model { get; set; }
}

public class Cycle : VehicleBase
{
    public Cycle()
        : base(VehicleType.Cycle, 2)
    {
    }

    public bool HasJetKit { get; set; }
}

public class Truck : VehicleBase, IHasAntiLockBrakeSystem
{
    public Truck()
        : base(VehicleType.Truck, 4)
    {
    }

    public AntiLockBrakeSystem AntiLockBrakeSystem { get; set; }

    public bool AntiLockBrakeSystemIsStandard { get; set; }

    public bool IsCrewCab { get; set; }
}

public class Car : VehicleBase, IHasAntiLockBrakeSystem
{
    public Car()
        : base(VehicleType.Car, 4)
    {
    }

    public AntiLockBrakeSystem AntiLockBrakeSystem { get; set; }

    public bool AntiLockBrakeSystemIsStandard { get; set; }

    public int NumDoors { get; set; }
}

public class AntiLockBrakeSystem
{
    public int SomeValue { get; set; }
}

public interface IHasAntiLockBrakeSystem
{
    AntiLockBrakeSystem AntiLockBrakeSystem { get; set; }

    bool AntiLockBrakeSystemIsStandard { get; set; }
}

public enum VehicleType
{
    UNDEFINED = 0,
    Car = 1,
    Truck = 2,
    Cycle = 3
} 
```

有没有办法使用像上面的 IHasAntiLockBrakeSystem 这样的接口，让 AutoMapper 映射该接口的属性，而不必为每个实现该接口的类映射它们？那有意义吗？

我开始走这条路：

```
AutoMapper.Mapper.CreateMap<DomainModel.VehicleBase, DalModel.Vehicle>()
  .ForMember(dst => dst.VehicleTypeId, opt => opt.MapFrom(src => (byte)src.VehicleType))
  .ForMember(dst => dst.NumWheels, opt => opt.MapFrom(src => (byte)src.NumWheels))
  // include derived mappings
  .Include<DomainModel.Car, DalModel.Vehicle>()
  .Include<DomainModel.Truck, DalModel.Vehicle>()
  .Include<DomainModel.Cycle, DalModel.Vehicle>()

AutoMapper.Mapper.CreateMap<DomainModel.Car, DalModel.Vehicle>()
  .ForMember(dst => dst.NumDoors, opt => opt.MapFrom(src => (byte)src.NumDoors))
  .Include<DomainModel.IHasAntiLockBrakeSystem, DalModel.Vehicle>();

AutoMapper.Mapper.CreateMap<DomainModel.Truck, DalModel.Vehicle>()
  .Include<DomainModel.IHasAntiLockBrakeSystem, DalModel.Vehicle>();

AutoMapper.Mapper.CreateMap<DomainModel.Cycle, DalModel.Vehicle>(); 
```

但是我在尝试使用映射时遇到编译错误：

```
.Include<DomainModel.IHasAntiLockBrakeSystem, DalModel.Vehicle>(); 
```

**类型“AutoMapperTesting.DomainModel.IHasAntiLockBrakeSystem”不能用作泛型类型或方法“AutoMapper.IMappingExpression.Include()”中的类型参数“TOtherSource”。没有从“AutoMapperTesting.DomainModel.IHasAntiLockBrakeSystem”到“AutoMapperTesting.DomainModel.Car”的隐式引用转换。**

EF5 生成的实体如下所示：

```
 public partial class Vehicle
{
    public int Id { get; set; }
    public int PolicyId { get; set; }
    public byte VehicleTypeId { get; set; }
    public byte NumWheels { get; set; }
    public Nullable<bool> HasJetKit { get; set; }
    public Nullable<bool> IsCrewCab { get; set; }
    public Nullable<byte> NumDoors { get; set; }

    public virtual AntiLockBrakeSystem AntiLockBrakeSystem { get; set; }
    public virtual Policy Policy { get; set; }
    public virtual VehicleType VehicleType { get; set; }
}

public partial class AntiLockBrakeSystem
{
    public int VehicleId { get; set; }
    public int SomeValue { get; set; }
    public bool IsStandard { get; set; }

    public virtual Vehicle Vehicle { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:28:37.450

我看不到您所说的“车辆”类中直接包含什么，但您可以创建一个类似特征的地图，并省略任何您不想要的。

```
Mapper.CreateMap<VehicleBase, Vehicle>()
            .ForMember(dest => dest.firstProp, opt => opt.MapFrom(source => source.FirstProp))
            .ForMember(dest => dest.secondProp, opt => opt.MapFrom(source => source.secondProp)) 
```

如果您忽略特定于其他类和接口的属性，它将不会尝试映射它们。

# mysql - JDBC/MySQL：始终使用 UTC 保存时间戳

> ID：15206194
> 
> 赞同：5
> 
> 时间：2013-03-04T16:26:04.950
> 
> 标签：mysql, jdbc, timezone, timestamp, utc

我想将时间戳保存到数据库中，而不会被 jdbc 驱动程序转换为本地时区。目前只有 MySQL 和 PostgreSQL 对我很重要，但如果有独立于数据库的解决方案，我将不胜感激。

例子：

```
// i want that to be saved as 1970-01-01 00:00:00
TimeStamp ts = new java.sql.Timestamp(0);

// gets transformed to local time by jdbc driver (in my case to 1970-01-01 01:00:00)
st.setTimestamp(0, new java.sql.Timestamp(0));

// only works using postgres (mysql connector seems to ignore the calendar)
// postgres => 1970-01-01 00:00:00
// mysql => 1970-01-01 01:00:0
Calendar calutc = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
st.setTimestamp(0, new java.sql.Timestamp(0), utccal); 
```

我已经尝试计算转换为正确值的时间戳值（例如，我的时区中的 -3600000 => 1970-01-01 00:00:00），但这不适用于临近日期的 postgres光节约时间的变化。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T15:22:05.507

我找到了解决方案。MySQL 在其 JDBC 连接器中有一个错误，它忽略了提供给 setTimestamp/getTimestamp 的 Calendar 对象。他们修复了连接器版本 5.1.5 中的错误，但旧的（不正确的）行为仍然是默认行为。要使用正确的代码，您必须将参数“useLegacyDatetimeCode=false”传递给连接器 url。

更多信息： [http ://bugs.mysql.com/bug.php?id=15604](http://bugs.mysql.com/bug.php?id=15604)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:37:34.840

Java 中的日期和时间戳与时区无关。新的 Timestamp(0) 确实对应于 UTC 中的 1970-01-01 00:00:00。您必须使用 SimpleDateFormat 并在其上设置所需的时区以直观地检查您的日期。当使用 System.out.println 打印出来时，从时间戳中减去一个长常量以使其看起来“正确”是非常错误的。

使用数据库时，您可以选择日期/时间/时间戳的数据类型。其中一些支持时区信息，而另一些则不支持。如果您选择在数据库中使用时区处理，则必须详细了解它。如果您想绕过它，您可以选择将数据库中的日期/时间/时间戳存储为字符串，并在您的 Java 代码中进行所有格式化。

# c - 从字符串中删除空格

> ID：15206196
> 
> 赞同：0
> 
> 时间：2013-03-04T16:26:09.960
> 
> 标签：c

```
#include<stdio.h>
#include<string.h>

int main(){
    char array[]="Arijit Saha Student";
    spaceremover(array);
    getch();
    return 1;
}

int spaceremover(char a[]){
    int i;
   // printf("L=%d",strlen(a));
    char final[strlen(a)+1];
    int count=0;
    for(i=0;i<strlen(a);i++)
    {
        if(a[i]!=' ')
            final[count]=a[i];
        count++;
    }
    final[count]='\0';
    int j=0;
    for(j=0;j<strlen(final);j++)
    printf("%c",final[j]);
    // printf("\n%s",final);
    return 1;
} 
```

使用此示例代码，输出是`Arijit.Saha`，但我想要的输出是`ArijitSahaStudent`。为什么我得到错误的输出？哪里。是从哪里来的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:30:47.573

错误在这里：

```
if(a[i]!=' ')
    final[count]=a[i];
count++; 
```

`count++`应该包含在 中，`if`所以：

```
if(a[i]!=' ') {
    final[count]=a[i];
    count++;
} 
```

`if`注意：在语句后始终使用大括号被认为是一种良好的编程习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:34:38.373

在 for 循环中，即使`a[i] == ' '`.
因此，当`a[i] == ' '`您仅增加计数但未设置`final[count]`任何内容时。

我假设你要写：

```
if (a[i] != ' ')
{
    final[count] = a[i];
    count++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:32:23.577

您没有正确增加计数。它需要在 if 循环中。这可能更容易让您查看事物是否正确缩进。

```
#include<stdio.h>
#include<string.h>

int main(){
  char array[]="Arijit Saha Student";
  spaceremover(array);
  return 1;
}

int spaceremover(char a[]){
  int i;
  // printf("L=%d",strlen(a));
  char final[strlen(a)+1];
  int count=0;
  for(i=0;i<strlen(a);i++)
  {
    if(a[i]!=' ')
      final[count++]=a[i];
  }
  final[count++]='\0';
  int j=0;
  for(j=0;j<strlen(final);j++)
    printf("%c",final[j]);
  // printf("\n%s",final);
  return 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T17:12:58.643

在循环中，如果 a[i] 不等于空格，则计数应增加

`if(a[i]!=' ') final[count]=a[i]; count++;`

```
if(a[i]!=' ')
final[count++]=a[i];
//count++; 
```

# perl - Perl 继续从此脚本下载

> ID：15206197
> 
> 赞同：0
> 
> 时间：2013-03-04T16:26:12.067
> 
> 标签：perl, http-headers, download

我有这个基于 Perl 的下载脚本。我想知道如何确保当用户使用此脚本下载文件时，可以暂停和恢复下载（可恢复下载）。这是代码：

```
#!/usr/bin/perl
use XFSConfig;
use HCE_MD5;
use CGI::Carp qw(fatalsToBrowser);

my $code = (split('/',$ENV{REQUEST_URI}))[-2];

my $hce = HCE_MD5->new($c->{dl_key},"XFileSharingPRO");
my ($file_id,$file_code,$speed,$ip1,$ip2,$ip3,$ip4,$expire) = unpack("LA12SC4L", $hce->hce_block_decrypt(decode($code)) );
print("Content-type:text/html\n\nLink expired"),exit if time > $expire;
$speed||=500;
my $dx = sprintf("%05d",$file_id/$c->{files_per_folder});
my $ip="$ip1.$ip2.$ip3.$ip4";
$ip=~s/\.0$/.\\d+/;
$ip=~s/\.0\./.\\d+./;
$ip=~s/\.0\./.\\d+./;
$ip=~s/^0\./\\d+./;
print("Content-type:text/html\n\nNo file"),exit unless -f "$c->{upload_dir}/$dx/$file_code";
print("Content-type:text/html\n\nWrong IP"),exit if $ip && $ENV{REMOTE_ADDR}!~/^$ip/;
my $fsize = -s "$c->{upload_dir}/$dx/$file_code";
$|++;
open(my $in_fh,"$c->{upload_dir}/$dx/$file_code") || die"Can't open source file";

# unless($ENV{HTTP_ACCEPT_CHARSET}=~/utf-8/i)
# {
#    $fname =~ s/([^A-Za-z0-9\-_.!~*'() ])/ uc sprintf "%%%02x",ord $1 /eg;
#    $fname =~ tr/ /+/;
# }
print qq{Content-Type: application/octet-stream\n};
print qq{Content-length: $fsize\n};
#print qq{Content-Disposition: attachment; filename="$fname"\n};
print qq{Content-Disposition: attachment\n};
print qq{Content-Transfer-Encoding: binary\n\n};

$speed = int 1024*$speed/10;
my $buf;
while( read($in_fh, $buf, $speed) )
{
   print $buf;
   select(undef,undef,undef,0.1);
}

sub decode
{
        $_ = shift;
        my( $l );
        tr|a-z2-7|\0-\37|;
        $_=unpack('B*', $_);
        s/000(.....)/$1/g;
        $l=length;
        $_=substr($_, 0, $l & ~7) if $l & 7;
        $_=pack('B*', $_);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:46:47.247

要暂停和恢复下载，您应该处理 http 范围标头。看看[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)

# asp.net - 在 SSRS 2008 的 HttpWebRequest 中收到“未授权 (401)”错误

> ID：15206198
> 
> 赞同：1
> 
> 时间：2013-03-04T16:26:12.347
> 
> 标签：asp.net, httpwebrequest, ssrs-2008

我正在使用 HttpWebRequest 以编程方式以 PDF 格式导出 SSRS 2008 报告。然而，我的问题是我的 NetworkCredentials 似乎没有工作。我在尝试访问 SSRS 时收到未经授权的 (401) 错误。

我知道我提供的 NetworkCredentials 是正确的。如果我手动登录到我们的 SSRS Web 服务，这些就是我使用的确切凭据。此外，这在本地运行良好，只是在我们的服务器上不行。

该报告在我们的 asp.net 4.0 网站上运行。当用户单击“生成报告”按钮时，将执行以下代码（错误发生在我的第 2 行，在 WebRequest.Create 上）以尝试连接到我的 SSRS 2008：

```
string sTargetURL = "MY_REPORT_SERVER?/REPORT_NAME&rs:format=pdf&rs:command=render&rc:parameters=Collapsed";

HttpWebRequest req = (HttpWebRequest)WebRequest.Create(sTargetURL);
req.PreAuthenticate = true;

 req.Credentials = new NetworkCredential("Username", "Password", "Domain");

  HttpWebResponse HttpWResp = (HttpWebResponse)req.GetResponse();
  Stream fStream = HttpWResp.GetResponseStream();

 byte[] fileBytes = ReadFully(fStream);
 HttpWResp.Close();

 System.Web.HttpContext.Current.Response.Clear();
 System.Web.HttpContext.Current.Response.ContentType = "application/pdf";

 System.Web.HttpContext.Current.Response.AddHeader("content-disposition", "attachment; filename=\"" + reportName + ".pdf"\"");
 System.Web.HttpContext.Current.Response.BinaryWrite(fileBytes);
 System.Web.HttpContext.Current.Response.Flush();
 System.Web.HttpContext.Current.Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:46:47.540

在应用程序之外，您是否能够在本地和报表管理器/服务器中运行报表？如果是，报告使用什么类型的数据源？可能是数据源不接受来自报表服务器的双跳凭据。您可能需要创建一个具有必要读取权限的域帐户，并在报表服务器上配置数据源以模拟这些凭据。

# jquery - 我返回的 json 中的键是小写的

> ID：15206202
> 
> 赞同：2
> 
> 时间：2013-03-04T16:26:32.073
> 
> 标签：jquery, asp.net, asp.net-mvc, json

我有 2 个项目（几乎）相同。我将代码从第一个复制/粘贴到第二个。都是 ASP.NET MVC 解决方案。在这些项目中，我检索如下数据：

```
$.get("/api/mail", { folder: this.params.folder }, self.chosenFolderData); 
```

或者

```
$.get("/api/vehicle", { category: this.params.category }, self.chosenCategoryData); 
```

当我检查从第一个返回的 json 数据时，我得到了这个：

```
{"Folder":"Inbox","Mails":[{"MailId":4,"Folder":"Inbox","From":"XLN <basia@framehome.xyz>","To":"steve@example.com","Subject"... 
```

如您所见，我的键是大写的：文件夹，邮件，文件夹，收件箱，...

这是为第二个项目返回的相同类型的 json：

```
{"category":"Car","vehicles":[{"vehicleId":1,"category":"Car","model":"C220","brand":"Mercedes","registration":"AZE-123"}]} 
```

我所有的键都返回小写：类别，车辆，型号，品牌，...

知道为什么吗？

更新***_ _* __ *_* ___**

根据要求，以下是称为 Web API 的操作：

```
 // GET api/Vehicle
    public GetVehiclesViewModel GetVehicles(string category)
    {
        GetVehiclesViewModel viewModel = new GetVehiclesViewModel
        {
            Category = category,
            Vehicles = db.Vehicles.Where(x => x.Category == category).OrderByDescending(u => u.Model).AsEnumerable()
        };

        return viewModel;
    } 
```

这是视图模型：

```
public class GetVehiclesViewModel
{
    public string Category { get; set; }
    public IEnumerable<VehicleModel> Vehicles { get; set; }
} 
```

在我的 WebAPI 路由中，我也有这个：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

       // Use camel case for JSON data.
       config.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver(); 
```

好的，现在我终于发现，如果我删除它：

```
 config.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver(); 
```

然后我的财产钥匙是驼色的。有谁可以解释我为什么？

# database - 概括+价格历史

> ID：15206203
> 
> 赞同：1
> 
> 时间：2013-03-04T16:26:34.897
> 
> 标签：database, database-design, entity-relationship

假设我有一个由 3 个主要项目组成的产品。产品为Laptop，项目为：螺丝（id、code、description）按钮（id、code、description）覆盖范围（id、code、description、color）。

每台笔记本电脑都由这些项目的任意组合组成。

1.  我可以将所有内容放入一个表“材料”并添加一个名为“类型”的属性来区分每个项目，但是会有很多行具有空的“颜色”值。

    我想到了专业化：材料（id、代码、描述），然后都是它的子类。但是按钮和螺丝类与母类没有什么不同。

    那么你的想法是什么？

2.  我想添加单价属性。我需要实际价格，并且我想每月保留旧价格的历史记录（即每个价格都绑定到 MM/YYYY）。

    我可以创建一个价格表：

    ```
    prices (id, price, date) 
    ```

    但是我应该在材料表中保留实际价格=当前价格还是仅仅在价格表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:51:48.243

```
/* keep your general product specs here: */
PRODUCT
id primary key
type
code
description
standard_price

/* or add a subtype table for some of them: */
COVERAGE_PRODUCT
id pk fk PRODUCT
colour 

/* products are composed of other products: */
PRODUCT_STRUCTURE
part_of not null references product(id),
composed_of not null references product(id)
primary key (part_of, composed_of) 
```

您可以将历史定价保留在数据仓库中，或添加 product_price 表。在这种情况下，请从产品中删除“standard_price”。

```
PRODUCT_PRICE
product_id fk product(id)
from_date
price
to_date (nullable)
primary key (product_id, from_date) 
```

# access-token - 3 月重大更改，从新端点获取应用程序 access_token

> ID：15206204
> 
> 赞同：0
> 
> 时间：2013-03-04T16:26:34.937
> 
> 标签：access-token, facebook-access-token

[本月](https://developers.facebook.com/roadmap/)的重大变化是不再返回应用程序`/me/accounts`，我们不应该使用它`/me/applications/developer`来获取应用程序，但此端点不会返回应用程序的 access_tokens，但`/me/accounts`会返回。Graph API 参考文档[甚至没有列出](https://developers.facebook.com/docs/reference/api/user/) `/me/applications/developer`，所以我不知道如何实际替换 /me/accounts 因为我需要 access_token 应用程序来获取应用程序的洞察数据和其他[信息](https://developers.facebook.com/docs/reference/api/insights/)。

有谁知道在重大更改后如何为开发人员的应用程序获取 access_token？

所有这些端点都需要一个应用程序 access_token，如何获得一个？

[https://developers.facebook.com/docs/reference/fql/application](https://developers.facebook.com/docs/reference/fql/application)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:36:25.943

您仍在体验“旧/当前”端点的原因`/me/accounts`是`/me/applications/developer`您必须在准备好时启用这些更改。3 月 6 日，如果您还没有这样做，这些更改将自动启用。转到您的应用程序 -> 编辑设置 -> 高级并“启用”2013 年 3 月的更改。

就 REST API 而言，您不应再在其上进行构建，因为它会在未来被弃用。您现在应该只在 Graph API 上构建。

如果您在端点上找不到新功能的文档，您始终可以使用 Graph API Explorer 来获取示例响应。

# ios - UIRefreshControl 怪异

> ID：15206205
> 
> 赞同：2
> 
> 时间：2013-03-04T16:26:36.073
> 
> 标签：ios, ios6, interface-builder, uitableview, uirefreshcontrol

今天刚开始使用“UIRefreshControl”，发现了一些奇怪的东西。

如果我在 InterfaceBuilder 中创建了 UIRefreshControl，并将其全部连接起来，我的选择器永远不会被调用。IB 说控件应该触发“值已更改”消息，并且应该调用我的代码，但从不调用。

所以我放弃了在 Interface Builder 中执行此操作，而是决定在代码中执行此操作。没有太多的行。所以我把这段代码放在我的“viewDidLoad”例程中：

```
self.refreshControl = [UIRefreshControl new];
[self.refreshControl addTarget:self action:@selector(doStuff:) forControlEvents:UIControlEventValueChanged];
NSMutableParagraphStyle* paragraphStyle = [NSMutableParagraphStyle new];
paragraphStyle.alignment = NSTextAlignmentCenter;
self.refreshControl.attributedTitle = [[NSAttributedString alloc] initWithString:@"Pull to refresh" attributes:@{NSParagraphStyleAttributeName : paragraphStyle}]; 
```

它画得很好，但是当视图首次出现时刷新控件是可见的。我希望它在用户实际拉下桌子之前不可见。我正在调用 Web 服务，等待结果返回，然后填充表格。因此，您只能看到一两秒钟的控件。但它看起来很奇怪。

所以，问题是：
1\. 这是一个已知的错误，您不能单独从 Interface Builder 连接控件吗？
2\. 有没有办法将此控件添加到 table-view 控制器，直到用户真正想要看到它才出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:59:53.700

你不需要添加一个刷新控件，或者在你的 viewController 中声明一个。添加下拉刷新是一个两步过程。
第 1 步：在您的故事板中，转到您的 tableViewController，并在显示“刷新”的位置选择“启用”。
第 2 步：将以下代码添加到 tableViewController.m 文件的 viewDidLoad 中：

```
[self.refreshControl addTarget:self
                            action:@selector(refresh)
                  forControlEvents:UIControlEventValueChanged]; 
```

这就是整个过程，除了在你的 -refresh 方法中做一些事情。没有更多的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T07:35:21.307

是的，存在一个`UIRefreshControl`永远不会调用该操作的错误。[Keith Harrison 在他的博文 UIRefreshControl Fun and Games](http://useyourloaf.com/blog/2013/06/18/uirefreshcontrol-fun-and-games.html?utm_source=iOS%20Dev%20Weekly&utm_campaign=d888c696dd-iOS_Dev_Weekly_Issue_99&utm_medium=email&utm_term=0_7bda94b7ca-d888c696dd-298114649)中谈到了这一点：

> 使用调试器进行调查，似乎从未调用 refresh 方法。我只能假设由于某种原因故事板没有正确地将 UIRefreshControl 连接到我们的操作，或者与 UIControlEventValueChanged 事件进行了一些其他奇怪的交互。我已经向 Apple ( [rdar://14178445](http://openradar.appspot.com/14178445) ) 提交了错误报告，但您也可以使用一个简单的解决方法。

解决方法如@AMayes 所述。

# python - 在函数内连接numpy数组并返回它？

> ID：15206206
> 
> 赞同：2
> 
> 时间：2013-03-04T16:26:38.697
> 
> 标签：python, arrays, numpy, pass-by-reference

考虑到以下程序，如何在函数内连接两个 numpy 数组并返回它

```
#!/usr/bin/env python
import numpy as np

def myfunction(myarray = np.zeros(0)):
    print "myfunction : before = ", myarray    # This line should not be modified
    data = np.loadtxt("test.txt", unpack=True) # This line should not be modified
    myarray = np.concatenate((myarray, data))
    print "myfunction : after = ", myarray     # This line should not be modified
    return                                     # This line should not be modified

myarray = np.array([1, 2, 3])
print "main : before = ", myarray
myfunction(myarray)
print "main : after = ", myarray 
```

这段代码的结果是：

```
main : before =  [1 2 3]
myfunction : before =  [1 2 3]
myfunction : after =  [ 1\.  2\.  3\.  1\.  2\.  3\.  4\.  5.]
main : after =  [1 2 3] 
```

而且我要 ：

```
main : before =  [1 2 3]
myfunction : before =  [1 2 3]
myfunction : after =  [ 1\.  2\.  3\.  1\.  2\.  3\.  4\.  5.]
main : after =  [ 1\.  2\.  3\.  1\.  2\.  3\.  4\.  5.] 
```

如何修改提供的程序以获得预期的结果（标记的4行`# This line should not be modified`应该保持不变）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:35:16.407

你应该返回值

像这样修改函数：

```
def myfunction(myarray = np.zeros(0)):
    print "myfunction : before = ", myarray    # This line should not be modified
    data = np.loadtxt("test.txt", unpack=True) # This line should not be modified
    concatenated = np.concatenate((myarray, data))
    print "myfunction : after = ", myarray     # This line should not be modified
    return  concatenated 
```

然后你得到这样的结果

```
result = myfunction(myarray) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:27:52.610

您可以执行以下操作，但可能会出错：

```
def in_place_concatenate(arr1, arr2) :
    n = len(arr1)
    arr1.resize((n + len(arr2),), refcheck=False)
    arr1[n:] = arr2 
```

如您所料：

```
>>> a = np.arange(10)
>>> b = np.arange(4)
>>> in_place_concatenate(a, b)
>>> a
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3]) 
```

但：

```
>>> a = np.arange(10)
>>> b = np.arange(4)
>>> c = a[:5]
>>> c
array([0, 1, 2, 3, 4])
>>> in_place_concatenate(a, b)
>>> a
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3])
>>> c
array([         1, 1731952544,   71064376,          1,   67293736]) 
```

如果您尝试修改其中的任何数据，`c`则会出现分段错误...

如果您没有设置`refcheck`，`False`那将不会发生，但它也不会让您在函数内部进行修改。所以是的，它可以做到，但你不应该这样做：遵循 Entropiece 的方法。

# asp.net-mvc - 如何将表链接到 @Html.ActionLink

> ID：15206209
> 
> 赞同：0
> 
> 时间：2013-03-04T16:26:43.190
> 
> 标签：asp.net-mvc, razor

我在 mvc 中有程序，它从控制器中获取数据，然后在视图中显示。它制作了包含数据的动态表。在它里面有一个链接“查看详细信息”，但我不想将单个链接制作成一个链接，而不是单个链接：

```
 @Html.ActionLink("SEE DETAILS", "AppDetail", new { @id = item.id, appnameformp = item.AppNameForMP }, new { @style = "color:#C55000;font-size: 11px;text-decoration:none;" }) 
```

但我不知道该怎么做......任何帮助都非常感谢并提前感谢。

```
 <div class="grid_9.5 alpha">
         @foreach (var item in Model)
         {
            <div class="grid_4 alpha box_shadow" id="featured-subbillboard" style="margin-bottom:10px;"   >
               <table>
                    <tr >
                    <td><img height="140" width="130" src=@item.imgfile />
                    </td>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td class="table">
                        <h1  class="heading1" style="margin-top:10px; line-height: .4em;">@item.AppNameForMP </h1>
                        <h2 class="heading2">@item.DevName </h2>
                        <br />
                        <p class="para">
                        @if (item.AppDesc.Length > 50)
                            {@item.AppDesc.Remove(@item.AppDesc.Length -50)} 
                        else
                            { @item.AppDesc}
                        </p>
                        @Html.ActionLink("SEE DETAILS", "AppDetail", new { @id = item.id, appnameformp = item.AppNameForMP }, new { @style = "color:#C55000;font-size: 11px;text-decoration:none;" })
                     </td>

                     </tr>
                </table>
            </div>
         }
       </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:37:19.437

只需使用常规锚标记，并用于`@Url.Action()`获取 href：

```
<a href="@Url.Action("AppDetail")">
    <!-- table here -->
</a> 
```

另外，请注意，虽然 HTML5 现在支持块级链接，但浏览器支持甚至实现并不一致。有些人会很好地连接整个表，而另一些人会做各种奇怪的事情。只是需要注意的事情。

# java - 在经过的时间上取消 OnTouchListener

> ID：15206219
> 
> 赞同：0
> 
> 时间：2013-03-04T16:27:16.807
> 
> 标签：java, android

```
 image.setOnTouchListener(new OnTouchListener() {

             @Override
             public boolean onTouch(View arg0, MotionEvent arg1) {   
                String serverResponse = "";
                JSONObject responseToJSON = null;
                    try {
                        //if we have Internet connection
                        if(NetworkRequest.hasNetworkConnection(MyActivity.this)){
                            //download the server response
                            serverResponse = NetworkRequest.getUrlData(array.get(i));
                            responseToJSON = new JSONObject(serverResponse);
                            String individualDescription = responseToJSON.getString("Description");                 
                        }

                    } catch (Exception e) {
                         e.printStackTrace();
                    }

                 return false;
             } 
    }); 
```

我有上述代码。我在图像上设置 OnClickListener 的位置。因此，当我单击图像时，我会覆盖 onTouch 方法。然后我检查我是否有互联网连接。如果我有我尝试从互联网下载内容。我想做的是有一个计时器，并检查以下代码行

```
NetworkRequest.getUrlData(array.get(i)) 
```

下载内容需要 2 秒以上。如果需要超过 2 秒来下载内容，我想取消下载和 OnTouchListener。这可能吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T16:31:58.440

检查此[链接](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis%28%29)。将系统时间分配给一个变量，然后检查这个时间是否大于最后一个 + 2000，然后就可以了：-)。

干杯

# xaml - Phone 8 XAML：LongListSelector 中的水平对齐

> ID：15206221
> 
> 赞同：2
> 
> 时间：2013-03-04T16:27:19.893
> 
> 标签：xaml, windows-phone-8, alignment, longlistselector

我有一个很长的列表选择器。

我要做的就是对齐 ItemTemplate 中的两个元素： 1\. 右侧的按钮，具有给定的固定宽度 2\. 左侧的文本面板，填充显示的剩余空间。但不幸的是，文本面板没有拉伸，并且按钮与文本面板文本的右端对齐。:(

这是我的代码：

```
<DataTemplate x:Key="AddrBookItemTemplate">
  <StackPanel Orientation="Horizontal" Name="DummerContainer" HorizontalAlignment="Stretch">
    <TextBlock FontWeight="Bold" Text="{Binding Name}" HorizontalAlignment="Stretch"/>
    <Button HorizontalAlignment="Right" Width="120"/>
  </StackPanel>
</DataTemplate> 
```

和

```
<phone:LongListSelector
      HorizontalAlignment="Stretch"
      x:Name="AddrBook"
      JumpListStyle="{StaticResource AddrBookJumpListStyle}"
      Background="Transparent"
      GroupHeaderTemplate="{StaticResource AddrBookGroupHeaderTemplate}"
      ItemTemplate="{StaticResource AddrBookItemTemplate}"
      LayoutMode="List"
      IsGroupingEnabled="true"
      HideEmptyGroups ="true"/> 
```

所以，这是我的问题：如何正确对齐这两个元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T17:07:10.940

这是使用水平`StackPanel`...

在 DataTemplate 中使用 a`Grid`而不是 a 。`StackPanel`然后您可以根据`ColumnDefinitions`需要定义分配空间，即：

*   将第 0 列定义为`Width="*"`并将您`TextBlock`的放入其中
*   将第 1 列定义为`Width="Auto"`放入`Button`其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T13:01:08.583

Afaik，Stackpanel 比 Grid 快。所以，我决定找出问题的根源。我在这里找到了它：http: [//y2bd.me/blog/2013/08/16/fixing-alignment-issues-with-datatemplateselector/](http://y2bd.me/blog/2013/08/16/fixing-alignment-issues-with-datatemplateselector/)

对我来说很好。

# ruby-on-rails-3 - Delayed_job ActionMailer 缓存？

> ID：15206222
> 
> 赞同：0
> 
> 时间：2013-03-04T16:27:20.413
> 
> 标签：ruby-on-rails-3, actionmailer, delayed-job

我目前调用延迟作业（gem delayed_job_mongoid）发送确认电子邮件。但是，它似乎没有使用我传递的最新数据，而是使用缓存版本。见下文：

我的控制器：

```
...
_user.calculate_orders
_user.save
_user.reload
Mailer.delay.order_reported(_user)
... 
```

邮寄者

```
class Mailer < Devise::Mailer
  def order_reported(to_user)
    @to_user = to_user
    email_with_name = "#{@to_user.name} <#{@to_user.email}>"
    mail(:to => email_with_name, :subject => "Test email")
  end
end 
```

例如，如果属性`_user.total_orders`= 3 更新为 5 并保存。它正确反映在数据库中，延迟的作业数据库记录包含更新信息 5，但发送电子邮件时，它使用缓存信息 3。

我也尝试通过 rails 控制台调用该方法：

这有效并使用传递和更新信息的参数

```
Mailer.order_reported(u).deliver 
```

这不起作用并使用缓存数据

```
Mailer.delay.order_reported(u) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:52:13.750

[我最近在Sidekiq](http://sidekiq.org/)上遇到了一个非常相似的问题，与传入我的 User 对象的序列化版本而不仅仅是一个 ID 有关。

我会稍微重构一下，只在延迟方法中将简单对象作为参数传递。所以，你可以这样做：

```
Mailer.delay.order_reported(_user.id) 
```

然后将方法更新为如下所示：

```
class Mailer < Devise::Mailer
  def order_reported(to_user_id)
    @to_user = User.find(to_user_id)
    email_with_name = "#{@to_user.name} <#{@to_user.email}>"
    mail(:to => email_with_name, :subject => "Test email")
  end
end 
```

这将确保您在实际交付邮件时始终获得新的用户对象。

# c# - 在 VS2012 和 Win8 64bit 上查询 Crystal Server 2011 CMS？

> ID：15206224
> 
> 赞同：0
> 
> 时间：2013-03-04T16:27:31.797
> 
> 标签：c#, asp.net, vb.net, crystal-reports

无论出于何种原因，SAP 网站上都列出了许多不同的 SDK。我已经尝试了所有看起来合适的，但无论我安装哪个，我最终都会丢失连接到 Crystal Server CMS 和访问该数据库中的报告所需的程序集。

我特别想做的是重写一个旧的 VB ASP.NET 应用程序，它查询我们的 Crystal Server 11 CMS，它托管在 Windows Server 2003 机器上。我现在在 Windows Server 2008 R2 机器上安装了 Crystal Server 2011，我想将其切换到 C# 和 .NET 4.0，但由于缺少程序集，在该环境中使用代码时遇到了问题。

这是原始文件中的包含列表，因此您可以看到我要查找的内容：

```
Imports CrystalDecisions.Enterprise
Imports CrystalDecisions.ReportSource
Imports CrystalDecisions.Enterprise.Viewing
Imports CrystalDecisions.Enterprise.Dest
Imports CrystalDecisions.Enterprise.Desktop
Imports CrystalDecisions.ReportAppServer.Controllers
Imports CrystalDecisions.ReportAppServer.ClientDoc
Imports CrystalDecisions.ReportAppServer
Imports CrystalDecisions.Web
Imports CrystalDecisions.Shared
Imports CrystalDecisions.CrystalReports.Engine 
```

这是用于从 CMS 获取报告的原始代码的方法：

```
Dim mySessionMgr As SessionMgr = New SessionMgr
Dim myEnterpriseSession As EnterpriseSession = mySessionMgr.Logon("XX", "XX", 
      "XX", "secEnterprise")
Dim myEnterpriseService As EnterpriseService =
      myEnterpriseSession.GetService("InfoStore")
Dim myInfoStore As InfoStore = New InfoStore(myEnterpriseService)
myEnterpriseService = myEnterpriseSession.GetService("RASReportFactory")
Dim rrfObject As Object = myEnterpriseService.Interface
Dim myReportAppFactory As ReportAppFactory = CType(rrfObject, ReportAppFactory)
Dim queryString As String = "Select SI_ID From CI_INFOOBJECTS " _
      & "Where SI_PROGID='CrystalEnterprise.Report' " _
      & "And SI_NAME Like '" & ReportID & "'"

Dim myInfoObjects As InfoObjects = myInfoStore.Query(queryString)
Dim myInfoObject As InfoObject = myInfoObjects(1)
myReportClientDocument = New ReportClientDocumentClass
myReportClientDocument = myReportAppFactory.OpenDocument(myInfoObject.ID, 0) 
```

我不确定这种方法是否最适合与所涉及的软件的当前版本一起使用，或者是否有更好的方法来实现相同的效果。如果这种方法仍然正确，是否有人对我需要安装哪些 SDK 文件才能访问这些程序集提出建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:10:36.783

上面的代码有效，但为了正确解析引用，我必须先安装适用于 VS 的 Crystal Reports 2011 (13_0_5)，然后按顺序安装适用于 32 位的 Business Intelligence 14 SP04。两者的 64 位版本都没有成功。只安装一个或另一个也不起作用，也没有以相反的顺序安装它们。

# c# - 如何在现有数据库中添加表而不会丢失 Entity-framework Code first 5.0 中的数据？

> ID：15206226
> 
> 赞同：5
> 
> 时间：2013-03-04T16:27:39.910
> 
> 标签：c#, .net, sql-server, entity-framework, tsql

最近我更新了我的软件，我需要在我的数据库中添加一个新表。我在用

```
Update-Database -Force -Verbose 
```

在我的开发 PC 中更新我的数据库。但是当我在我的客户端机器上安装我的软件的更新版本时，它会抛出以下异常。

```
The model backing the ‘MyContext’ context has changed since the database was created. Consider using Code First Migrations to update the database (http://go.microsoft.com/fwlink/?LinkId=238269) 
```

如果我删除并重新创建数据库，那么它工作正常。

但是在我的客户端机器中删除现有数据库是完全不可能的。我必须添加我的新表而不会丢失任何数据。

请告诉我如何添加新表而不会丢失现有数据库中的数据。

我在用

```
Visual Studio 2012
Entity Framework 5.0
DotNet 4.0
MSSQL Server 2008 R2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:41:14.230

您需要使用[Code First Migrations](http://msdn.microsoft.com/en-us/library/hh770484%28v=vs.103%29.aspx)。当您设置 DbContext 时，它将如下所示：

```
Database.SetInitializer<dbContext>(new MigrateDatabaseToLatestVersion<dbContext, Configuration>()); 
```

# c++ - CString.Replace 替换多个字符

> ID：15206227
> 
> 赞同：1
> 
> 时间：2013-03-04T16:27:42.473
> 
> 标签：c++, mfc

我正在尝试使用 CString.replace 方法，但似乎没有替换字符串的其余部分。

```
tmpStr.Replace(_T('in.'), _T(' ')); 
```

是具体的线路。我想删除字符串“in”的所有实例。在 CString tmpStr 中。但它似乎只是为了替换“in”中的“i”。有一个空格。剩下的就不管了。

有没有办法用字符串替换字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T16:31:27.353

您没有调用您打算调用的重载。[`CString::Replace`](http://msdn.microsoft.com/en-US/library/ztyt5e9c%28v=vs.110%29.aspx)有一个需要两个字符的重载，这是您的函数调用调用的那个。更改`'in.'`为`"in."`（注意双引号而不是单引号）。同样，更改`' '`为`" "`。

`'in.'`是一个多字符文字，如何解释是实现定义的。似乎 VC 只是认为它与`i`.

# c# - 为什么需要双冒号 (::) 运算符来解决命名空间冲突？

> ID：15206228
> 
> 赞同：8
> 
> 时间：2013-03-04T16:27:43.207
> 
> 标签：c#, .net, namespaces

请参阅我下面的示例程序。我有两个名称空间包含相同的`struct`. 为了避免在使用 in 时发生冲突`Main()`，我给了命名空间别名。在调用`struct`from`Main()`时，我可以通过命名空间别名直接调用，例如`test.MyStruct`. 我还有另一个使用`::`运算符的选项，例如`test::MyStruct`.

为什么`::`需要运算符，我应该在哪里使用它而不是别名？

```
using System;
using test=counter;
using duplicatecounter;

namespace counter
{
    struct MyStruct
    {

    }
}

namespace duplicatecounter
{
    struct MyStruct
    {

    }
}

class Program
{
    public static void Main()
    {
        test.MyStruct a = new test.MyStruct();
        test::MyStruct a1 = new test::MyStruct();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T16:36:04.630

当有人编写代码而不考虑使用的代码时，主要需要它。即命名空间中的重复类预计将一起使用或隐藏命名空间。

MSDN 示例显示了[Use the Global Namespace Alias](http://msdn.microsoft.com/en-us/library/c3ay4x3d.aspx)中的一种情况：

```
class TestApp
{
    // Define a new class called 'System' to cause problems. 
    public class System { }

    // Define a constant called 'Console' to cause more problems. 
    const int Console = 7;
    const int number = 66;

    static void Main()
    {
        // The following line causes an error. It accesses TestApp.Console, 
        // which is a constant. 
        //Console.WriteLine(number);

        global::System.Console.WriteLine(number); // ok

    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T16:34:33.603

`::`运算符做同样的事情`namespace.` ，但`::`运算符用于查找标识符。它始终位于两个标识符之间

例子 ：

```
global::System.Console.WriteLine("Hello World"); 
```

这里解释了一个很好的例子：http: [//msdn.microsoft.com/en-us/library/c3ay4x3d.aspx](http://msdn.microsoft.com/en-us/library/c3ay4x3d.aspx)

# html - 创建一个底部固定的 div，用完剩余的空间

> ID：15206232
> 
> 赞同：1
> 
> 时间：2013-03-04T16:27:57.453
> 
> 标签：html

我正在制作一些移动 HTML 并希望有一个 div 使用它所拥有的 100% 的空间，但不使用它的容器，并且其中有 3 个 div 将它分成 3 个部分并具有以下布局：

![在此处输入图像描述](../Images/f3a63339bc04e3460990f077a34a3686.png)

我怎么能用 div 来做到这一点，我试过但是有百分比和固定高度的 div 令人困惑。我可以用水平对齐的来做到这一点，但垂直它让我感到困惑。我不希望它通过使底部的绝对值重叠。

***编辑***

剩余空间本质上只是一个大 div 有一个`overscroll-y`用完整个空间

我必须将布局放在标题栏下方的部分中，这就是我不能使用的`position: fixed`原因，因为它会干扰父容器。

![在此处输入图像描述](../Images/d6746492130f68d7747cf760375371dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:33:35.857

首先，您编辑的问题中的图像可能来自 JQuery Mobile。考虑使用 jQuery 移动。也可能是一种选择。

```
<style type="text/css">
    #container{position: relative; width: 100%; height: 100%;  background-color:#ddd; z-index:1;}
    #header{position: fixed; top:0; left:0; width:100%; height: 80px; background-color:#f30;z-index:3;}
    #footer{position: fixed; bottom:0; left:0; width:100%;  height: 80px;  background-color:#f30;z-index:4;}
    #content{width:100%; z-index:5; padding-top: 90px; padding-bottom: 80px;}
</style>

<div id="container">

<div id="header">

</div>

<div id="content">
    Put body content here...

</div>

<div id="footer">

</div>

</div> 
```

您可能需要 jQuery 来为这一切增添趣味。这应该给你基本的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:43:04.873

[http://jsfiddle.net/wy6rS/1/](http://jsfiddle.net/wy6rS/1/)

```
<div id="toolbar">This is fixed toolbar.</div>
  <div id="wrap">
    <div id="header">This is the header</div>
      <div id="content">Content will Expand with scripting. Notice the push.</div>
        <div id="push"></div>
  <div> <!--wrap ends here-->
<div id="footer">This is the footer</div> 
```

推动为粘性页脚腾出空间。注意#wrap 上相等的负边距。

```
#wrap { width:100%; min-height:100%; height:100% !important; margin-bottom:-80px; margin-top:50px; }
#toolbar { position:fixed; top:0; width:100%; height:50px; }
#header { height: 140px; }
#content { min-height:300px; height:100%; }
#push, #footer { height:80px; } /* Must be same height as footer */ 
```

然后你需要脚本来扩展内容。检查jsfiddle。它将在真实页面中工作。

# asp.net-web-api - ASP.NET WEBAPI 生产环境 | “该系统找不到指定的文件”

> ID：15206234
> 
> 赞同：2
> 
> 时间：2013-03-04T16:28:01.800
> 
> 标签：asp.net-web-api

`Local Environment { IIS 7.5 | Windows 7 | ASP.NET 4.0 | Integrated Pipeline}`

`Production Environment {IIS 8.0 | Windows 2012 Server | ASP.NET 4.x | Integrated Pipeline}`

WEBAPI 功能适用于本地环境，例如

`http://<domain>/api/towncity?startsWith=Marston`

但是在生产中，我收到了以下“钝”错误消息。

`{"Message":"An error has occurred.","ExceptionMessage":"The system cannot find the file specified","ExceptionType":"System.ComponentModel.Win32Exception","StackTrace":null}`

有什么办法可以改善错误信息？或者你知道解决办法吗？

非常感谢，戴夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:35:52.337

好的，经过一番调查，发布的 RELEASE web.config 没有更新 WEB.CONFIG 实体连接字符串。

因此，它使用实体连接字符串的本地设置。

```
 <add name="YourDatabaseNameEntities"
     connectionString="
          metadata=res://*/Model.YourDatabaseName.csdl|res://*/Model.YourDatabaseName.ssdl|res://*/Model.YourDatabaseName.msl;
          provider=System.Data.SqlClient;
          provider connection string=&quot;
              data source=<set datasource here>;
              initial catalog=<set catalog here>;
              persist security info=True;
              user id=<set user id here>;
              password=<set password here>;
              integrated security=False;
              MultipleActiveResultSets=True;
              App=EntityFramework&quot;
     "
     providerName="System.Data.EntityClient" /> 
```

我目前正在查看 Scott Hanselman 关于为 DEBUG、RELEASE 和 PRODUCTION 设置不同的 web.configs 的文章。

[小快乐功能](http://tinyurl.com/brl5tes)

# java - 在 Java 方法中收集错误，空 ArrayList 与 LinkedList

> ID：15206236
> 
> 赞同：5
> 
> 时间：2013-03-04T16:28:02.897
> 
> 标签：java, list, error-handling

我似乎偶尔会创建这两种方法：

```
// return null on errors, and append errors to 2nd param, otherwise return result
String fetchSomething(String parameter, List<String> errorMessagesOut);

// return empty list or null on no errors, otherwise list of errors
List<String> verifySomething(String parameter); 
```

然后调用这些的代码将使用适当的分隔符（例如简单的逗号、换行符、HTML 标记...）加入错误列表，通常使用 Apache Commons`Stringutils.join`方法。并且在正常情况下没有错误，并且列表将为空。

于是，我开始思考这两个问题：

1.  您是否看到将错误消息字符串作为列表返回的问题？如果是这样，有什么更好的选择？（不是异常，调用这些方法的代码会在需要时抛出异常。）

2.  *对于预计*保持为空的列表，并且当它不为空时通常应该只有顺序迭代器访问，是或`new LinkedList()`更好？`new ArrayList(0)``new ArrayList()`

 ** * *

编辑：示例用例：

```
List<String> verifyParameters(JSONObject params) {
    List<String> ret = new ArrayList<String>(0);

    if (!verifyKey(params.get("key"))) 
        ret.add("Invalid key: " + key);

    if (!verifyAccess(params.get("user"), params.get("pass"))) 
        ret.add("Authentication error");

   return ret;
} 
```

...

```
List<String> errors = verifyParameters(params);
if (!errors.isEmpty()) {

    connection.sendErrorListMessage(errors);
    logger.warn(StringUtils.join(errors, ", "));
    controlPanel.show("Errors: \n- " + StringUtils.join(errors, "\n- ") + '\n');
    throw new AbortException("invalid params); // or maybe return false/null;
}
// proceed with valid params 
```

通常处理错误列表不会包含所有这些，它只是试图说明错误列表是供人类查看的消息列表，与它的显示方式无关，也与处理无关/无用不同的错误不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:37:55.113

我认为对字符串使用列表很好。我倾向于`Result`至少为它创建一个专门的类`fetchSomthing`并使它像这样，特别是如果`errorMessagesOut`传递的除了一个新的空列表之外什么都不是：

```
Result result = fetchSomething(String parameter);
if (result.hasErrors()) {
    List<String> errors = result.getErrors();
} else {
    String fetched = result.getValue();
} 
```

然后，我还将在此类上放置任何处理错误字符串的方法，以便您可以执行以下操作：

```
String errorMessage = result.getErrorString(); 
```

这将错误数据及其格式封装在一个类中，这意味着在没有错误的情况下，您无需在 Result 实例内部创建任何列表。

我以上几点主要是关于代码设计。在没有分析和基准来比较任何更改的结果的情况下尝试微优化是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:37:08.317

这些错误是为了什么？您是否要根据方法返回的错误做出一些业务决策？否则，如果错误只是用于记录，一个简单的记录解决方案会建议在错误发生时立即记录。我说的是那些`logger.debug("Error message");`。

无论如何，你能给我们一个例子，说明这些错误返回后如何处理？

不过，我要指出一件事：如果您对处理结果和错误使用相同的数组/列表/集合，这往往会令人困惑。如果您的方法返回错误列表（或在没有错误的情况下为空/空列表）也会令人困惑，因为看起来错误是执行您的方法的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:37:28.510

尝试使用列表收集所有错误信息并没有错。使用 an`ArrayList`可以正常工作，无需担心...

如果你知道没有错误，你可以`return Collections.emptyList();`。

一般来说，集合避免返回两者`null`或空列表。我总是使用空列表，因为不会破坏循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T16:39:15.623

> 您是否看到将错误消息字符串作为列表返回的问题？如果是这样，有什么更好的选择？

不。如果列表可以解决您的问题，那么使用列表没有任何问题。

> 对于预计保持为空的列表，并且当它不为空时通常应该只有顺序迭代器访问，是或更好`new LinkedList()`？`new ArrayList(0)``new ArrayList()`

知道列表将存储多少元素并使用该容量实例化列表不会对性能有任何显着改善：

> 每个 ArrayList 实例都有一个容量。容量是用于存储列表中元素的数组的大小。它总是至少与列表大小一样大。随着元素被添加到 ArrayList，它的容量会自动增长。除了添加一个元素具有恒定的摊销时间成本这一事实之外，没有指定增长策略的细节。

`new ArrayList(0)`但是，如果列表通常为空，则您将节省一些内存，因为列表的大小`10`在未指定初始容量时被初始化。*

# scala - scala 文档工具 - 2012 年中期最先进的技术

> ID：15206238
> 
> 赞同：4
> 
> 时间：2013-03-04T16:28:14.890
> 
> 标签：scala

我喜欢 Clojure 世界中的 Marginalia。我是从谷歌搜索中发现的：http: [//blog.8-p.info/2011/02/03/scaladoc.html](http://blog.8-p.info/2011/02/03/scaladoc.html)。人们推荐什么？还是人们坚持使用 Scala Doc 以保持标准/人们习惯的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:34:07.580

API 的 Scaladoc 和[XRay](https://github.com/harrah/browse)（[示例](http://harrah.github.com/browse/samples/library/scala/collection/immutable/List.scala.html)）（生成可浏览的源代码；它已被废弃但仍然很棒）是 scala 文档 IMO 的两个乳牙。还有[pamflet](http://pamflet.databinder.net/Pamflet.html) ( [example](http://unfiltered.databinder.net/Try+Unfiltered.html) ) 和[port](http://circumflex.ru/api/2.0/circumflex-docco/src/main/scala/docco.scala.html) of [docco](http://jashkenas.github.com/docco/)，但据我所知后者并不那么受欢迎。

# c# - 来自主机的虚拟机屏幕截图

> ID：15206240
> 
> 赞同：0
> 
> 时间：2013-03-04T16:28:16.370
> 
> 标签：c#, api, vmware, virtual-machine, virtualbox

我正在从我的主机（windows vista）运行虚拟机（windows）。

我正在寻找一种方法来构建能够对虚拟机进行屏幕捕获并返回活动窗口标题但在主机中运行的应用程序。

Vmware 或 Virtualbox 无所谓。.Net 最好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:51:05.907

据我所知，Windows 没有用于获取屏幕截图的内置命令行方法，因此您必须在虚拟机上安装第 3 方程序才能进行屏幕截图。一些好的可能是[NirCmd](http://www.nirsoft.net/utils/nircmd.html)、[Screenshot-cmd](http://code.google.com/p/screenshot-cmd/)、[SnapIt](http://github.com/90kts/snapIt)或[DuckLink](http://www.ducklink.com/p/command-line-screen-capture/)。

使用 VMware 的 vmrun 实用程序，您可以使用[RunProgramInGuest](http://www.virtuatopia.com/index.php/How_to_Remotely_Run,_List_and_Kill_Programs_Running_in_a_VMware_Virtual_Machine#Running_a_Program_in_a_VMware_Guest_System)在 VM 上运行 ac# 程序，该程序将使用您选择的任何程序进行屏幕捕获，然后将其发送回您的主机。如果我知道 c# 那么我可以给你一个起点，但不幸的是我以前从未写过它。

# asp.net - 将字符串绑定到 CheckBox

> ID：15206247
> 
> 赞同：0
> 
> 时间：2013-03-04T16:28:41.843
> 
> 标签：asp.net, gridview, checkbox, eval, itemtemplate

我有一个网格视图，它绑定到在 page_load 加载的数据集。数据由七个字段组成，其中三个隐藏在网格上，另外四个可见。最后三列来自数据库作为字符串，将是“TRUE”或“FALSE”。使用绑定列时，它们绑定到复选框没有任何问题，但是由于在另一个问题之后对我的代码进行了一些更改，我已将它们更改为 TemplateFields 并且必须将控件的 Checked 属性更改为：

```
Checked='<%# Eval("FieldName").ToString().Equals("TRUE") %>' 
```

它有效，但只是想检查这是否是绑定这些字段的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:31:40.903

使用 TemplateField，我相信这很好。

# naming-conventions - 服务 vs 控制器 vs 提供者命名约定

> ID：15206251
> 
> 赞同：5
> 
> 时间：2013-03-04T16:28:47.033
> 
> 标签：naming-conventions

随着我职业生涯的发展，我认为命名约定非常重要。我注意到人们扔掉了控制器、`LibraryController`服务`LibraryService`和提供者，`LibraryProvider`并且在某种程度上可以互换使用它们。是否有任何具体的理由来使用一个与另一个？

如果有网站有更具体的定义，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-10-11T14:27:06.493

根据上下文，这些术语可以彼此同义，这就是为什么每个框架或语言创建者都可以自由地在他们认为合适的时候明确声明它们……想想函数/方法/过程或流程/服务，几乎都是一样的但在不同的上下文中略有不同。

只是脱离正式的英语定义：

*   提供者：提供某物的人或事物。
    *   即提供者通过控制某些进程来提供服务。
*   服务：帮助或为某人工作的行为。
    *   即通过控制一些工作流程来提供服务。
*   控制者：指挥或规范某事的人或事物。
    *   即控制器指示某物提供服务。

这些定义只是为了解释开发人员在定义框架或语言的术语时如何看待常见的英语含义；它并不总是一对一的，术语的相似性实际上为开发人员提供了一种命名非常相似但仍然略有不同的事物的方法。

例如，让我们以 AngularJS 为例。在这里，开发人员决定使用术语 Controller 来表示“HTML Controller”，一个 Service 来表示类似“Quasi Class”的东西，因为它们是用 New 关键字实例化的，而 Provider 实际上是 Service 和 Factory 的超集，它是也类似。您真的可以使用它们中的任何一个来编写任何应用程序，并且真的不会丢失任何东西；尽管在某些情况下一个可能比另一个好一点，但我个人认为这不值得额外的混乱......基本上他们都是提供者。Angular 的人可以将工厂、提供者和服务定义为一个单独的术语“提供者”，然后传入“静态”和“无效”之类的修饰符 像大多数语言一样，可以提供完全相同的功能；这本来是我的偏好，但是我学会了不要与你工作的框架的约定和术语作斗争，无论你多么不同意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-12-09T20:53:12.073

在**Java Spring**、 Spring Boot 和**.NET**中，您将拥有：

*   `Repository`：在数据库中持久化数据并执行 SQL 查询。
*   `Service`: 包含大部分业务逻辑
*   `Controller`：定义 REST 端点，其中包含尽可能少的逻辑。

从概念上讲，这意味着**WHAT （功能）与****HOW**（技术）尽可能地分开。这些服务试图保持技术中立。相比之下，控制器只想定义一个外部通信合同。最后，存储库只想方便访问数据库。

以这种方式组织代码可以使业务逻辑保持简短、干净和可维护。不幸的是，将它们分开并不总是那么容易。*例如，使用装饰器/注释形式的元数据来污染或丰富您的对象是很诱人的。（例如数据库列名和数据类型）。*

一些开发人员没有看到这样做的危害并侥幸逃脱。其他人将他们的对象严格分开并定义多组对象。

*   数据库的对象通常被称为“**实体**”或“**模型**”。
*   对于 REST 控制器，它们通常被称为[**DTO**，代表数据传输对象。](https://stackabuse.com/data-transfer-object-pattern-in-java-implementation-and-mapping/)

拥有多个对象意味着您需要**`Mappers`**将一种类型的对象转换为另一种。一些框架可以为您做到这一点（例如[`MapStruct`](https://mapstruct.org/)）。

声称严格总是一件好事很容易，但它会减慢你的速度。可以平衡一下。

* * *

在**Node.js中，****控制器和服务**的概念是相同的。但是，该术语`Repository`并不经常使用。相反，他们会称之为 a**`Provider`**或者有时他们会概括`Repositories`为一种`Service`。

[NestJS 对此](https://nestjs.com/)有更强烈的看法（这可能是件好事）。**NestJS** （一个 Node.js 框架）的命名约定受到 Angular 命名约定的强烈影响，Angular 的命名约定当然是一种完全不同的框架（前端）。

（为了完整起见，在 Angular 中， a`Provider`实际上只是可以作为依赖项注入的东西。大多数提供程序是`Services`，但不一定。（*它可能是 a`Guard`甚至是 a `Module`。A`Module`更像是一组工具/驱动程序或连接器。*） *PS：无论如何，这个术语`Module`的使用有点[混乱](https://angular.io/guide/ngmodule-vs-jsmodule)，因为还有“ES6模块”，这是完全不同的东西。*）

[ES6 和更现代的 javascript 版本（包括 typescript）在（反）构造](https://hacks.mozilla.org/2015/05/es6-in-depth-destructuring/)对象时非常强大。这使得**映射器变得不必要**。

话虽如此，如今大多数 Node.js 和 Angular 开发人员更喜欢使用 typescript，它在定义类型方面比 java 或 C# 具有更多功能。

* * *

因此，所有这些框架都在相互影响。他们几乎都同意**控制器**和**服务**是什么。主要是具有不同含义的 Repository 和 Provider 词。这实际上只是一个约定问题。如果你的框架有约定，那就坚持下去。如果没有，那就自己挑一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-05T11:39:47.610

我也在寻找一个比*Provider*更有意义的名字:)
并找到了这篇有用[的帖子](https://stackoverflow.com/questions/1866794/naming-classes-how-to-avoid-calling-everything-a-whatevermanager)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-24T02:01:42.327

这里的老开发人员偶然发现了这一点。我的观点以及我在过去 20 年中看到它的使用方式表明它因语言而异，但 Java C# 人群主要使用它们如下。

服务处理业务逻辑并处理域对象。您可以在控制器和其他服务中找到服务。

存储库不处理业务逻辑，而是充当域对象池（具有用于查找或持久化它们的辅助方法。服务通常包含存储库。存储库通常包含上下文并负责从基础设施形式的数据映射到域形式的数据如果定义已经分开。控制器通常还包含用于 crud 端点的存储库。

上下文处理域拥有的基础设施。大多数情况下，这是一个数据库，但上下文意味着任何接触此数据的东西都是通过（在）此上下文中进行的。上下文返回基础设施形状的数据。存储库通常包含上下文。直接在服务中的上下文有时是合适的。控制器中的上下文是一个硬性问题。

提供者提供对其他应用程序拥有的基础设施的访问。大多数情况下，这些是 rest api，但也可以是从其他人读取数据或将数据推送给其他人的 kafka 流或 rpc 类。如果您的某些域对象字段的真实来源发生更改，您可能会在存储库中的上下文旁边看到一个提供程序，并且您的存储库会处理将其余代码与该更改隔离开来。提供 rpc 功能的提供者经常出现在服务中。在微服务或网关或垂直切片架构中，您有时会直接在控制器中看到提供程序。

一位老人的意见，但我希望它有所帮助。

# javascript - 无限移动触摸滑块

> ID：15206252
> 
> 赞同：0
> 
> 时间：2013-03-04T16:28:47.187
> 
> 标签：javascript, mobile, slider

我正在使用[https://github.com/nolimits4web/Swiper](https://github.com/nolimits4web/Swiper)，它很流畅，一切都很好，但我无法管理以下内容：

我有一个无限列表我想要 1-2-3 并在我加载 3 时从 2 开始我将加载 4 并在一个加载 0 然后 -1 时在另一个方向卸载相同的东西但总是只有 3-加载了 5 张幻灯片，因为它们充满了繁重的内容。

这是我到目前为止所拥有的！非常感谢！

```
swiper = new Swiper('.swiper1',{   onSlideChangeEnd : function(e) {

   if(e.activeSlide == $('.swiper-slide').length -1){
    swiper.appendSlide("smth");
    swiper.removeSlide(0);
    //swiper.getSlide(2);
  }

  if(e.activeSlide == 0){
   swiper.prependSlide("smth");
   swiper.removeLastSlide();
 }

}
}); 
```

顺便说一句，我可以让它工作，直到我 swiper.removeSlide(0); 向后我似乎可以在不切换页面的情况下前置

# wordpress - Wordpress 寻求完整的托管绝对链接而不是域的路径

> ID：15206255
> 
> 赞同：0
> 
> 时间：2013-03-04T16:28:58.157
> 
> 标签：wordpress, hosting, broken-links

[http://jakeruesink.com/hermes/bosweb/web166/b1664/ipg.jakeruesinkcom/wp-content/uploads/et_temp/designfeature-23171_240x240.jpg](http://jakeruesink.com/hermes/bosweb/web166/b1664/ipg.jakeruesinkcom/wp-content/uploads/et_temp/designfeature-23171_240x240.jpg)

这个链接显然是不正确的，但如果你取出“hermes/bosweb/web166/b1664/ipg.jakeruesinkcom/”，它就可以工作。[出于某种原因，wordpress 在我的http://jakeruesink.com/project-page/](http://jakeruesink.com/project-page/)上获取这些图像的错误路径

以下是该页面的代码，但我不确定这是否需要修复。

```
<?php 
/*
Template Name: Filterable Portfolio
*/
?>
<?php get_header(); ?>

<?php get_template_part('includes/breadcrumbs', 'page'); ?>

<h1 class="page_title"><?php the_title(); ?></h1>

<div id="content-area" class="fullwidth clearfix">
<div class="post-content">
    <?php while ( have_posts() ) : the_post(); ?>
        <?php the_content(); ?>
        <?php wp_link_pages(array('before' => '<p><strong>'.esc_attr__('Pages','Flexible').':</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>
        <?php edit_post_link(esc_attr__('Edit this page','Flexible')); ?>
    <?php endwhile; ?>
</div>  <!-- end .post-content -->
<?php
    $et_ptemplate_settings = array();
    $et_ptemplate_settings = get_post_meta($post->ID,'et_ptemplate_settings',true);
    $et_ptemplate_projectcats = isset( $et_ptemplate_settings['et_ptemplate_projectcats'] ) ? (array) $et_ptemplate_settings['et_ptemplate_projectcats'] : array();

    $portfolio_args = array(
        'post_type' => 'project',
        'showposts' => -1,
        'tax_query' => array(
            array(
                'taxonomy' => 'project_category',
                'field' => 'id',
                'terms' => $et_ptemplate_projectcats,
                'operator' => 'IN'
            )
        )
    );
    if ( empty( $et_ptemplate_projectcats ) )  unset ( $portfolio_args['tax_query'] );

    $portfolio_query = new WP_Query( apply_filters( 'et_home_portfolio_args', $portfolio_args ) );

    $categories = get_terms( 'project_category', array( 'include' => $et_ptemplate_projectcats ) );
    if ( $categories ){
        echo '<ul id="et_portfolio_sort_links">';
            echo '<li class="active">' . '<a href="#" data-categories_id="all">' . __( 'All', 'Flexible' ) . '</a>' . '</li>';
            foreach ( $categories as $category ){
                echo '<li>' . '<a href="#" data-categories_id="' . esc_attr( 'project_cat_' . $category->term_taxonomy_id ) . '">' . esc_html( $category->name ) . '</a>' . '</li>';
            }
        echo '</ul>';
    }
?>
<div id="portfolio-grid" class="clearfix">
<?php
    while ( $portfolio_query->have_posts() ) : $portfolio_query->the_post();            
        get_template_part( 'includes/entry', 'portfolio' );
    endwhile; 
    wp_reset_postdata(); 
?>
</div> <!-- end #portfolio-grid --> 
```

这是投资组合页面的代码：

```
<?php 
/*
Template Name: Portfolio Page
*/
?>
<?php 
$et_ptemplate_settings = array();
$et_ptemplate_settings = maybe_unserialize( get_post_meta($post->ID,'et_ptemplate_settings',true) );

$fullwidth = true;
$et_ptemplate_showtitle = isset( $et_ptemplate_settings['et_ptemplate_showtitle'] ) ? (bool)       
$et_ptemplate_settings['et_ptemplate_showtitle'] : false;
$et_ptemplate_showdesc = isset( $et_ptemplate_settings['et_ptemplate_showdesc'] ) ? (bool)   
$et_ptemplate_settings['et_ptemplate_showdesc'] : false;
$et_ptemplate_detect_portrait = isset( $et_ptemplate_settings['et_ptemplate_detect_portrait'] ) ? (bool) 
$et_ptemplate_settings['et_ptemplate_detect_portrait'] : false;

$gallery_cats = isset( $et_ptemplate_settings['et_ptemplate_gallerycats'] ) ? (array)   
$et_ptemplate_settings['et_ptemplate_gallerycats'] : array();
$et_ptemplate_gallery_perpage = isset( $et_ptemplate_settings['et_ptemplate_gallery_perpage'] ) ? (int)  
$et_ptemplate_settings['et_ptemplate_gallery_perpage'] : 12;

$et_ptemplate_portfolio_size = isset( $et_ptemplate_settings['et_ptemplate_imagesize'] ) ? (int)  
$et_ptemplate_settings['et_ptemplate_imagesize'] : 2;

$et_ptemplate_portfolio_class = '';
if ( $et_ptemplate_portfolio_size == 1 ) $et_ptemplate_portfolio_class = ' et_portfolio_small';
if ( $et_ptemplate_portfolio_size == 3 ) $et_ptemplate_portfolio_class = ' et_portfolio_large';
?>

 <?php get_header(); ?>

<?php get_template_part('includes/breadcrumbs', 'page'); ?>

<div id="content-area" class="clearfix<?php if ( $fullwidth ) echo ' fullwidth'; ?>">
<div id="left-area">
    <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>               
        <article id="post-<?php the_ID(); ?>" <?php post_class('entry clearfix'); ?>>
            <h1 class="page_title"><?php the_title(); ?></h1>

            <?php
                $thumb = '';
                $width = apply_filters('et_blog_image_width',640);
                $height = apply_filters('et_blog_image_height',320);
                $classtext = '';
                $titletext = get_the_title();
                $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Blogimage');
                $thumb = $thumbnail["thumb"];
            ?>
            <?php if ( '' != $thumb && 'on' == et_get_option('flexible_page_thumbnails') ) { ?>
                <div class="post-thumbnail">
                    <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>  
                </div>  <!-- end .post-thumbnail -->
            <?php } ?>

            <div class="post-content">
                <?php the_content(); ?>

                <div id="et_pt_portfolio_gallery" class="clearfix responsive<?php echo $et_ptemplate_portfolio_class; ?>">
                    <?php $gallery_query = '';
                    $portfolio_count = 1;
                    $et_open_row = false;
                    if ( !empty($gallery_cats) ) $gallery_query = '&cat=' . implode(",", $gallery_cats);
                    else echo '<!-- gallery category is not selected -->'; ?>
                    <?php 
                        global $wp_embed;
                        $et_videos_output = '';
                        $et_paged = is_front_page() ? get_query_var( 'page' ) : get_query_var( 'paged' );
                    ?>
                    <?php query_posts("showposts=$et_ptemplate_gallery_perpage&paged=" . $et_paged . $gallery_query); ?>
                    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

                        <?php $width = 260;
                        $height = 170;

                        if ( $et_ptemplate_portfolio_size == 1 ) {
                            $width = 140;
                            $height = 94;
                            $et_portrait_height = 170;
                        }
                        if ( $et_ptemplate_portfolio_size == 2 ) $et_portrait_height = 315;
                        if ( $et_ptemplate_portfolio_size == 3 ) {
                            $width = 430;
                            $height = 283;
                            $et_portrait_height = 860;
                        }                       

                        $et_auto_image_detection = false;
                        if ( has_post_thumbnail( $post->ID ) && $et_ptemplate_detect_portrait ) {
                            $wordpress_thumbnail = get_post( get_post_thumbnail_id($post->ID) );
                            $wordpress_thumbnail_url = $wordpress_thumbnail->guid;

                            if ( et_is_portrait($wordpress_thumbnail_url) ) $height = $et_portrait_height;
                        }

                        $titletext = get_the_title();
                        $et_portfolio_title = get_post_meta($post->ID,'et_portfolio_title',true) ? get_post_meta($post->ID,'et_portfolio_title',true) : get_the_title();
                        $et_videolink = get_post_meta($post->ID,'et_videolink',true) ? get_post_meta($post->ID,'et_videolink',true) : '';

                        if ( '' != $et_videolink ){
                            $et_video_id = 'et_video_post_' . $post->ID;
                            $et_videos_output .= '<div id="'. esc_attr( $et_video_id ) .'">' . $wp_embed->shortcode( '', $et_videolink ) . '</div>';
                        }

                        $thumbnail = get_thumbnail($width,$height,'',$titletext,$titletext,true,'et_portfolio');
                        $thumb = $thumbnail["thumb"];

                        if ( $et_ptemplate_detect_portrait && $thumbnail["use_timthumb"] && et_is_portrait($thumb) ) {
                            $height = $et_portrait_height;
                        } ?>

                        <?php if ( $portfolio_count == 1 || ( $et_ptemplate_portfolio_size == 2 && (!$fullwidth && ($portfolio_count+1) % 2 == 0) ) || ( $et_ptemplate_portfolio_size == 3 && (($portfolio_count+1) % 2 == 0) ) ) {
                            $et_open_row = true; ?>
                            <div class="et_pt_portfolio_row clearfix">
                        <?php } ?>

                                <div class="et_pt_portfolio_item">
                                    <?php if ($et_ptemplate_showtitle) { ?>
                                        <h2 class="et_pt_portfolio_title"><?php echo $et_portfolio_title; ?></h2>
                                    <?php } ?>
                                    <div class="et_pt_portfolio_entry<?php if ( $height == $et_portrait_height ) echo ' et_portrait_layout'; ?>">
                                        <div class="et_pt_portfolio_image<?php if ($et_videolink <> '') echo ' et_video'; ?>">
                                            <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, ''); ?>
                                            <span class="et_pt_portfolio_overlay"></span>

                                            <a class="et_portfolio_zoom_icon fancybox" title="<?php the_title(); ?>"<?php if ($et_videolink == '') echo ' rel="portfolio"'; ?> href="<?php if ($et_videolink <> '') echo esc_url( '#' . $et_video_id ); else echo($thumbnail['fullpath']); ?>"><?php esc_html_e('Zoom in','Flexible'); ?></a>
                                            <a class="et_portfolio_more_icon" href="<?php the_permalink(); ?>"><?php esc_html_e('Read more','Flexible'); ?></a>
                                        </div> <!-- end .et_pt_portfolio_image -->
                                    </div> <!-- end .et_pt_portfolio_entry -->
                                    <?php if ($et_ptemplate_showdesc) { ?>
                                        <p><?php truncate_post(90); ?></p>
                                    <?php } ?>
                                </div> <!-- end .et_pt_portfolio_item -->

                        <?php if ( ($et_ptemplate_portfolio_size == 2 && !$fullwidth && $portfolio_count % 2 == 0) || ( $et_ptemplate_portfolio_size == 3 && ($portfolio_count % 2 == 0) ) ) {
                            $et_open_row = false; ?>
                            </div> <!-- end .et_pt_portfolio_row -->
                        <?php } ?>

                        <?php if ( ($et_ptemplate_portfolio_size == 2 && $fullwidth && $portfolio_count % 3 == 0) || ($et_ptemplate_portfolio_size == 1 && !$fullwidth && $portfolio_count % 3 == 0) || ($et_ptemplate_portfolio_size == 1 && $fullwidth && $portfolio_count % 5 == 0) ) { ?>
                            </div> <!-- end .et_pt_portfolio_row -->
                            <div class="et_pt_portfolio_row clearfix">
                            <?php $et_open_row = true; ?>
                        <?php } ?>

                    <?php $portfolio_count++; 
                    endwhile; ?>
                        <?php if ( $et_open_row ) { 
                            $et_open_row = false; ?>
                            </div> <!-- end .et_pt_portfolio_row -->
                        <?php } ?>
                        <div class="page-nav clearfix">
                            <?php if (function_exists('wp_pagenavi')) { wp_pagenavi(); }
                            else { ?>
                                 <?php get_template_part('includes/navigation'); ?>
                            <?php } ?>
                        </div> <!-- end .entry -->
                    <?php else : ?>
                        <?php if ( $et_open_row ) { 
                            $et_open_row = false; ?>
                            </div> <!-- end .et_pt_portfolio_row -->
                        <?php } ?>
                        <?php get_template_part('includes/no-results'); ?>
                    <?php endif; wp_reset_query(); ?>

                    <?php if ( $et_open_row ) { 
                        $et_open_row = false; ?>
                        </div> <!-- end .et_pt_portfolio_row -->
                    <?php } ?>

                    <?php if ( '' != $et_videos_output ) echo '<div class="et_embedded_videos">' . $et_videos_output . '</div>'; ?>
                </div> <!-- end #et_pt_portfolio_gallery -->

                <?php wp_link_pages(array('before' => '<p><strong>'.esc_attr__('Pages','Flexible').':</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>
                <?php edit_post_link(esc_attr__('Edit this page','Flexible')); ?>
            </div>  <!-- end .post-content -->
        </article> <!-- end .entry -->
    <?php endwhile; // end of the loop. ?>
</div> <!-- end #left_area -->

<?php if ( ! $fullwidth ) get_sidebar(); ?>
</div>  <!-- end #content-area -->

 <?php get_footer(); ?> 
```

这是entry.php的代码：

```
 <article id="post-<?php the_ID(); ?>" <?php post_class('entry clearfix'); ?>>
<h2 class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>

<?php
    $thumb = '';
    $width = apply_filters('et_blog_image_width',640);
    $height = apply_filters('et_blog_image_height',320);
    $classtext = '';
    $titletext = get_the_title();
    $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Blogimage');
    $thumb = $thumbnail["thumb"];
?>
<?php if ( '' != $thumb && 'on' == et_get_option('flexible_thumbnails_index') ) { ?>
    <div class="post-thumbnail">
        <a href="<?php the_permalink(); ?>">
            <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
        </a>    
    </div>  <!-- end .post-thumbnail -->
<?php } ?>

<div class="post-content">
    <?php 
        $index_postinfo = et_get_option('flexible_postinfo1');
        if ( $index_postinfo ){
            echo '<p class="meta-info">';
            et_postinfo_meta( $index_postinfo, et_get_option('flexible_date_format'), esc_html__('0 comments','Flexible'), esc_html__('1 comment','Flexible'), '% ' . esc_html__('comments','Flexible') );
            echo '</p>';
        }

        if ( 'on' == et_get_option('flexible_blog_style') ) the_content('');
        else echo '<p>' . truncate_post(360,false) . '</p>'; 
    ?>
    <a href="<?php the_permalink(); ?>" class="readmore"><?php esc_html_e( 'Read More', 'Flexible' ); ?></a>
</div>  <!-- end .post-content --> 
```

# silverlight - 在 Silverlight 中的样式内的 ContentTemplate 内的 DataBinding

> ID：15206260
> 
> 赞同：1
> 
> 时间：2013-03-04T16:29:08.653
> 
> 标签：silverlight, xaml, data-binding, styles

我在 XAML 中定义了以下样式：

```
 <Style TargetType="telerik:RadDiagramShape" x:Key="styleShapeBase">
    <Setter Property="Width" Value="120" />
    <Setter Property="Height" Value="60" />
    <Setter Property="IsResizingEnabled" Value="False" />
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBlock x:Name="lblName" Text="{Binding Name}" />
            </DataTemplate>
        </Setter.Value>
     </Setter>
</Style> 
```

然后在代码隐藏中**分配数据上下文**。我想绘制一个形状，其中包含来自对象的一些文本（如果这最终起作用，我将在那里放置更多信息）。我这样做是这样的：

```
var shape = new RadDiagramShape();
shape.Style = (Style)Resources["styleShapeBase"];
shape.DataContext = item.DataContext; 
```

具有类型属性的`item`简单 POCO在哪里（这部分有效，我已经对其进行了跟踪，即正确分配了 DataContext）。`Name``string`

但是**数据绑定**永远不会发生。是否是设计使然（即内容模板内没有数据绑定），如果不是有什么问题？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:11:32.330

您可以在 DataTemplates 中使用绑定。在这种情况下，绑定将在您设置为 RadDiagramShape 的内容的任何内容上查找名称属性。

你应该确保你的类有这个属性并且它是一个字符串。

如果这仍然不起作用，您能否发布有关如何设置 RadDiagramShape 的每个实例以及您尝试绑定的对象的样式和内容的详细信息？

* * *

在 RadDiagramShape 类的控制模板中的某处，会有一个 ContentPresenter，其 ContentTemplate 绑定到您定义的那个。问题是 ContentTemplate 仅在同时设置了 Content 属性时才使用。否则，不会将任何内容加载到该 ContentPresenter 中。

要使其工作，您必须在此元素的实例上设置 Content 属性。

[这是开始了解 DataContext 属性是什么的好地方](http://msdn.microsoft.com/en-gb/library/system.windows.frameworkelement.datacontext%28v=vs.95%29.aspx)

# iphone - 图像的全局唯一随机名称

> ID：15206262
> 
> 赞同：1
> 
> 时间：2013-03-04T16:29:15.773
> 
> 标签：iphone, ios, objective-c, amazon-web-services

我正在尝试编写代码来为用户从 iOS 应用程序上传到服务器的图像生成全局唯一名称。名称应该是随机生成的，并且应该是唯一的，这样图像就不会被覆盖/替换。

这是我生成随机和唯一字符串的代码：

```
+ (NSString *)generateRandNameWithLength:(int)len
{

    NSString *letters = [NSString stringWithFormat:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ%@0123456789", [HJUtilities generateUniqueApId]];
    NSMutableString *randomString = [NSMutableString stringWithCapacity: len];

    for (int i=0; i<len; i++) {
        [randomString appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
    }

    return randomString;
} 
```

在哪里：

```
+ (NSString *)generateUniqueApId
{
    NSString *appId = (__bridge NSString *) CFUUIDCreateString (NULL, CFUUIDCreate(NULL));

    return appId;
} 
```

返回一个 UUID。

现在我不确定这是否是生成全局唯一字符串的正确代码。我不知道如何验证这一点以确保没有用户会覆盖另一个用户的图像。

注意：我使用 Amazon Web 服务进行存储。所有用户的所有图像都将使用一个通用存储桶。因此，它要求图像名称应该是唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:33:40.420

不需要您拥有的代码。您所需要的只是`CFUUIDCreateString`功能。这在所有设备上的所有用户中都是唯一的。

从文档中`CFUUID`：

> UUID（通用唯一标识符），也称为 GUID（全局唯一标识符）或 IID（接口标识符），是保证唯一的 128 位值。UUID 在空间和时间上都是唯一的，方法是结合生成它的计算机的唯一值（通常是以太网硬件地址）和表示自 1582 年 10 月 15 日 00:00 以来 100 纳秒间隔数的值:00。

您现在拥有的代码绝对不能保证是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:34:42.273

你把它复杂化了。`CFUUIDCreateString`只需使用并使用该字符串获取 UUID 。添加额外的随机层不会有帮助。事实上，通过增加名称冲突的机会，这可能会使事情变得更糟。

反对直接使用 UUID 的唯一论点是，它可以识别上传的来源，因为 UUID 是（或可以）使用设备的 MAC 地址生成的，该地址特定于硬件。您将无法识别只有 UUID 的用户，但您可以说“此 UUID 集合来自同一设备”或“此 UUID 来自此设备”。（请参阅[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt)了解各种 UUID 格式以及第 4.5 节中对此问题的讨论。）

如果匿名是一个问题，通过散列函数（如 SHA1 或 MD5）运行 UUID 足以使其无法识别。

使用通过混合随机数来“添加随机性”的循环就像摇骰子几秒钟而不是一小时：唯一的区别是你在骰子上擦汗。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:37:20.527

iOS 6.0 新增了一个类

```
@interface NSUUID : NSObject <NSCopying, NSSecureCoding> 
```

为了简化内存管理，您肯定可以使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T00:21:04.050

至于本地唯一的字符串——您可以将其用作文件名的一部分——这很方便：

```
[[NSProcessInfo processInfo] globallyUniqueString] 
```

# sql - SQL文本中的神秘间距

> ID：15206263
> 
> 赞同：0
> 
> 时间：2013-03-04T16:29:17.617
> 
> 标签：sql, text, replace, spaces

我正在尝试替换我的 SQL 注释（文本）中的空格。

```
select REPLACE(cast(notes as varchar(8000)), ' ', '.') 
as notes from nTable 
where CaseID = '1449686' 
```

结果：

```
****  Topic:.Pre-sales.support  I.second.the.motion! 
```

为什么不是所有的空间都被替换？（如果我在替换中放了双空格-什么都没有被替换）..还能是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T16:32:30.793

CaseID 是 varchar 类型吗？试试不带单引号：

```
select REPLACE(cast(notes as varchar(8000)), ' ', '.') 
as notes from nTable 
where CaseID = 1449686 
```

# sql-server - MERGE 和匹配条件

> ID：15206264
> 
> 赞同：0
> 
> 时间：2013-03-04T16:29:22.113
> 
> 标签：sql-server

我有一个表类型，我将其作为存储过程中的变量发送。

```
CREATE TYPE OperationKeysTableType AS TABLE 
(
    [KeysId] [int] NOT NULL,                
    [OperationId] [int] NOT NULL,                
    [IsChecked] [bit] NOT NULL
) 
```

然后我想使用这个表进行搜索，如果它们匹配，插入或删除，但前提是它没有像这样检查：

```
MERGE INTO dbo.tblOperationKeys AS T
USING (SELECT VT.KeysId, VT.OperationId as OperationId FROM @ValuesTable AS VT) AS S
ON T.KeysId = S.KeysId AND T.OperationId = S.OperationId
WHEN MATCHED AND S.IsChecked = 0 THEN --DELETE
    DELETE 
WHEN NOT MATCHED THEN--INSERT
    INSERT (KeysId, OperationId) VALUES (S.KeysId, S.OperationId)   
OUTPUT $action AS ChangesMade, inserted.OperationKeysId AS new_OperationKeysId, deleted.OperationKeysId AS old_OperationKeysId; 
```

我的问题是 SQL 告诉我 IsChecked 无效。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:55:18.733

您没有选择 IsChecked。

在线：

```
USING (SELECT VT.KeysId, VT.OperationId as OperationId FROM @ValuesTable AS VT) AS S 
```

你需要：

```
USING (SELECT VT.KeysId, VT.OperationId as OperationId, VT.IsChecked as IsChecked FROM @ValuesTable AS VT) AS S 
```

# html - 我想将一行 html 文本推送到此通知列表，而用户不必刷新页面

> ID：15206266
> 
> 赞同：1
> 
> 时间：2013-03-04T16:29:30.877
> 
> 标签：html, ajax, asp.net-mvc, updatepanel, push

无法说出我想要的正确术语或语言，因此很难搜索。

问：从服务器端，将文本行推送给用户。

构建 MVC 4 (asp.net - c# .net4) 应用程序。一个页面将有一个“通知”列，这将是用户应该执行的新任务的列表。存储在数据库中的任务。

将新任务添加到数据库后，我想将一行 html 文本推送到此通知列表，而无需用户刷新页面。

这可能吗，还是我需要让用户客户端在计时器上运行以请求更新通知？

谢谢，请向我指出类似的问题或资源以及我正在寻找的 obiouse 资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:33:23.873

不幸的是，如果您需要支持各种浏览器，那么您正在查看计时器，但是您可以使用 Web 套接字将信息推送到具有支持的客户端上。检查网站[http://www.websocket.org/](http://www.websocket.org/)

这是关于网络套接字的基本教程：http:
[//www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

# google-fusion-tables - Google Fusion Map Info 窗口未格式化

> ID：15206272
> 
> 赞同：1
> 
> 时间：2013-03-04T16:29:43.380
> 
> 标签：google-fusion-tables, infowindow

我创建了一个 2 层的 Google Fusion Map。一切似乎都正常工作，但有 1 个例外。

我已经使用 Google Fusion Table 工具格式化了两个图层的信息窗口。但是，第 1 层上的信息窗口未按照以下代码的指定显示。它在 Google Fusion Table 工具本身中运行良好。

谁能发现我做错了什么？谢谢。

```
 <meta charset="UTF-8">
    <title>Smithfield Foods UK</title>
    <link rel="stylesheet" type="text/css" media="all" href="FusionMapTemplate.css" />

    <script type="text/javascript"
        src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">

        function initialize() {
            var defaultZoom = 10;
            var defaultCenter = new google.maps.LatLng(52.6500, 1.2800)
            var locationColumn = 'geometry'

            var map = new google.maps.Map(document.getElementById('map-canvas'), {
                center: defaultCenter,
                zoom: defaultZoom,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var infoWindow = new google.maps.InfoWindow();

            // Initialize the first layer
            var FirstLayer = new google.maps.FusionTablesLayer({
                query: {
                select: 'geometry',
                from: '1hpGzmMBg8bDgPOGrAXvc0_QVLSBqQ0O5vpLbfUE'
                },
                map: map,
                styleId: 3,
                templateID: 5,
                suppressInfoWindows: true
            });
            google.maps.event.addListener(FirstLayer, 'click', function(e) {windowControl(e, infoWindow, map);
            });

            // Initialize the second layer
            var SecondLayer = new google.maps.FusionTablesLayer({
                query: {
                    select: 'PostCode',
                    from: '1RrCcRC-1vU0bfHQJTQWqToR-vllSsz9iKnI5WEk'
                },
                map: map,
                styleId: 2,
                templateId: 2,
                suppressInfoWindows: true
            });
            google.maps.event.addListener(SecondLayer, 'click', function(e) {windowControl(e, infoWindow, map);
            });
        }   

        // Open the info window at the clicked location
        function windowControl(e, infoWindow, map) {
            infoWindow.setOptions({
                content: e.infoWindowHtml,
                position: e.latLng,
                pixelOffset: e.pixelOffset
            });
            infoWindow.open(map);
        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>

<body>
    <div id="map-canvas"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:54:20.107

问题：

```
templateID: 5,
//-------^ 
```

必须`D`是小写的

# c# - 在 WPF WebBrowser 中打开 Facebook eml 时断言失败

> ID：15206274
> 
> 赞同：0
> 
> 时间：2013-03-04T16:29:50.133
> 
> 标签：c#, wpf, browser, assertions, eml

我有一些保存的 eml 文件，并通过将文件扩展名重命名为 .mht 将它们显示在 WPF WebBrowser 控件中，IE（以及因此 WebBrowser 控件）将非常高兴地显示它们。

我在从 FaceBook 显示 eml 文件时遇到问题，我在 MessageBox 中收到这样的断言失败错误：-

```
Assertion failed!

Program:....bin\Debug\myApp.vshost.exe
File:../external/boost_1_31_0\boost/shared_ptr.hpp
Line: 254

Expression: px !=0 
```

它完全使应用程序崩溃。

我有数千个包含各种内容的 eml 文件，但我只在阅读 FaceBook 电子邮件时收到此错误（他们在您的 FB 帐户上的所有活动中自动发送的垃圾邮件）。

根据[这个](https://stackoverflow.com/questions/6138199/wpf-webbrowser-control-how-to-supress-script-errors)StackOverflow 帖子，我已经抑制了脚本错误，但错误仍然存​​在。

我对 wb.Navigate(Uri) 语句进行了尝试，但没有抓住它。

我怎样才能停止错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:43:20.890

好的，所以没有一个答案！我知道这有点远:-)

对于任何有类似问题的人，我最终放弃了 WPF WebBrowser 并使用了[awesomium](http://awesomium.com/)，它是一种开源 WPF WebBrowser 替代品，具有更多的功能和功能。

所有的错误都消失了，我现在很高兴。

# ajax - Ajax 在 ASP MVC3 站点上返回 404 错误

> ID：15206275
> 
> 赞同：1
> 
> 时间：2013-03-04T16:29:55.683
> 
> 标签：ajax, asp.net-mvc-3, jquery, iis

这个 Ajax 代码可以完美运行，因为我正在本地机器上运行该程序。但是，一旦我们将它放到 DEV 服务器上，我们就会收到 404 错误。该站点是一个与 SQL 数据库通信的 ASP MVC3 站点，站点的其余部分这样做没有问题。我是 Ajax 的新手，所以我不太确定去哪里找。这也可能是 IIS 的问题吗？

阿贾克斯代码

```
 var request = $.ajax({
        type: 'POST',
        url: '/BatchPrograms/PopDetails',
        data: { 'programName': pgmname },
        dataType: 'text',
        success: function (data) {
            console.log(data);
            alert(data);
            //$('#data').dialog('open');
        },
        error: function (data) {
            console.log(data)
            alert("Unable to process your resquest at this time.");
        }
    }); 
```

Chrome 的控制台错误消息：

```
POST http://insideapps.dev.symetra.com/BatchPrograms/PopDetails 404 (Not Found) 

send                                           jquery-1.8.3.js:8434
jQuery.extend.ajax                             jquery-1.8.3.js:7986
GetProgramDetails                              BatchDashboard:51
onclick                                        BatchDashboard:165 
```

Chome 的网络错误信息

```
Name (Path)      Method  Status (Text)    Type         Initiator             Size  Time (Latency)
PopDetails       POST    404 Not Found    Text/Html    jquery-1.8.3.js:8434  1.8KB 21ms
/BatchPrograms                                         Script                1.6KB 17ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:32:52.130

尝试修改 url 为

```
url: '@Url.Action("PopDetails", "BatchPrograms")' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:35:19.987

尝试使用`Url.Action()`帮助程序从应用程序中定义的表路由中获取路由。

```
 var request = $.ajax({
        type: 'POST',
        url: '@Url.Action("PopDetails", "BatchPrograms")',
        data: { 'programName': pgmname },
        dataType: 'text',
        success: function (data) {
          $('#data').dialog('open');
        },
        error: function (data) {
            alert("Unable to process your resquest at this time.");
        }
    }); 
```

# java - 同步块和变量范围

> ID：15206279
> 
> 赞同：1
> 
> 时间：2013-03-04T16:30:23.467
> 
> 标签：java, multithreading, thread-safety

谁能向我解释如果两个线程同时访问参数映射将如何在以下代码中受到影响。映射是否因为不在同步块内而暴露于线程安全问题？

```
public void fun(String type, String name, Map<String, Object> parameters) {
    parameters.put(Constants.PARM_TYPE, type);
    parameters.put(Constants.PARM_NAME, name);
    try {
        synchronized (launcher) {
            launcher.launch(type, bool, parameters);
        }
    } catch (Exception e) {
        logger.error("AHHHHH, the world has ended!",e);
    }
} 
```

我已经查看了以下内容，但我仍在质疑：[同步和可见性范围](https://stackoverflow.com/questions/14329064/synchronized-and-the-scope-of-visibility)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:38:42.697

如果多个线程拥有同一个`parameters`实例的句柄，并且它们使用非线程安全的映射实现调用此方法（修改映射），则可能/将会发生各种不好的事情（例如，可能/可能不会出现的映射损坏本身作为 NullPointerException 之类的异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:41:22.853

想象一下，如果你有一个共享地图。

```
private Map<String, Object> map = new HashMap<String,Object>(); 
```

如您的示例中所示，许多线程正在更新它。

```
new Thread(new Runnable(){
    public void run(){
        fun("a","b", map);
    }
}).start();
new Thread(new Runnable(){
    public void run(){
        fun("a","b", map);
    }
}).start(); 
```

每个线程可能同时更新地图，这可能会导致[美丽的比赛条件](http://mailinator.blogspot.com/2009/06/beautiful-race-condition.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T17:32:58.543

如果您的`parameters`实例是独立的**（正如您在上一条评论中提到的）**，那么此代码没有问题。

此外，方法参数`Map parameters`只有 2`String`秒，因此不存在关于它们的同步问题。

将`synchronized`块放在方法级别或上`launcher`：它们是不同的对象。如果你把方法，它会同步 on `this`，否则 on `launcher`。既然你想保护“发射器”，你必须尽可能地“建造围栏”——所以同步`launcher`是可以的。

还有另一种使用`Object lockObject = new Object()`, 并在该对象上进行同步的技术，但对于这个目的，我认为它是矫枉过正的，但你可以这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:38:18.797

假设多个线程正在访问该方法`fun()`，map 的工作方式是，如果您多次插入相同的键，那么每次都会覆盖该键的值。但这可能不是唯一的问题。也可能存在竞争条件和腐败问题。如果您想要一个隐式线程安全的数据结构，我认为 a`HashTable`将完成您的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T17:22:08.300

如果多个线程同时执行该代码并传递与参数映射相同的对象，那么您将遇到[竞争条件](http://en.wikipedia.org/wiki/Race_condition#Software)。

这肯定会导致线程安全问题，除非您：

*   根据您的要求和 Map 实现并发行为使用正确的 Map 实现（例如[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)，但这在很大程度上取决于您的应用程序的实际要求）

*   或自己编写线程安全代码（可能使用“同步”之类的同步原语）。

**重要提示：**请注意，仅将修改映射的代码行移动到同步块中不一定会消除竞争条件，因为您必须考虑应用程序中的哪些其他线程可能会尝试修改映射以及它们的对象将用于同步他们对它的访问。函数中的代码使用对“启动器”的引用进行同步。任何其他线程修改映射而不同步或在与“启动器”不同的对象上同步将导致竞争条件

# asp.net-mvc - ASP.NET MVC 3 中的 ViewBag.Title 与 Page.Title

> ID：15206280
> 
> 赞同：1
> 
> 时间：2013-03-04T16:30:26.737
> 
> 标签：asp.net-mvc

为什么有时`@ViewBag.Title`包含正确的页面标题而`@Page.Title`为空？我们正在调试我们的视图/布局代码，我们注意到了这种差异。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T19:56:31.930

当您使用 asp.Net MVC 时，您可以使用一些工具将数据获取到您的页面。

1.  您发送到视图的模型。
2.  视图包。
3.  临时数据。
4.  饼干。
5.  会议。

这些中的每一个都有自己的用例我们将使用的示例是一个基本的列表和更新视图，用于一组公司

**该模型**

每当您将**定义**的数据集发送到视图时都应该使用模型，并且应该包含页面的**主要**数据，并且通常模型**特定于页面或控制器**。

**查看包**

**每当您需要将一般**数据发送到**模型上未定义**的页面或**跨视图树使用的**数据时，都应该使用 ViewBag 。

**温度数据**

临时数据顾名思义就是临时数据的存储，**当您不确定数据是否会到达目的地**或者您想**在操作之间传递数据而不添加参数**时，应该使用它。

**饼干**

Cookie 就像**全局变量**一样，是整个应用程序中的主机数据。

**会议**

像 cookie 这样的会话是全局变量，但它们的生命周期不同会话可用于**在请求之间存储表单数据**之类的事情不要使用会话来执行此操作，而是使用诸如[http://garlicjs.org/之类的东西](http://garlicjs.org/)

让我们看一下示例我们有以下 ViewModel

```
public class Company 
{
  public int? id { get; set; }
  public string Name { get; set; }
  public string Description { get; set; }
} 
```

布局页面如下所示

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    //This looks for the Title property on the ViewBag and inserts it in the title tags
    <title>@ViewBag.Title</title>
</head>
<body>
   @Html.Action("Header", "PageElements")
   @RenderBody()
</body>
</html> 
```

PageElements 控制器上的 Header Action 看起来像这样

```
public PartialViewResult Header()
{
  ViewBag.CurrentLink = HttpContext.Current.Request.Cookies["CurrentLink"];

  return PartialView();
} 
```

标题部分视图如下所示

```
<header>
   <ul> 
      <li class="@(ViewBag.CurrentLink == "Home" ? "Current" : "")"> 
          @Html.ActionLink("Home", "Index", "Home")
      </li>
      <li  class="@(ViewBag.CurrentLink == "Companies" ? "Current" : "")"> 
          @Html.ActionLink("Companies", "Index", "Companies")
      </li>
   </ul>
</header> 
```

更新的控制器操作如下所示

```
public ViewResult Update(int id)
{  

  //Gets a company from the database
  var model = db.GetCompany(id);

  //Sets The Title property on the ViewBag to Update : CompanyName
  ViewBag.Title = String.Format("Update : {0}", model.Name);  

  //Sends the company to the view
  return View(model);
} 
```

更新视图如下所示

```
@model Application.Models.Company
@{
   Layout = "_layout.cshtml";
}

@using (Html.BeginForm())
{ 
   @Html.HiddenFor(model => Model.id)

   @Html.LabelFor(model => Model.Name)
   @Html.TextBoxFor(model => Model.Name)

   @Html.LabelFor(model => Model.Description)
   @Html.TextAreaFor(model => Model.Description)
   <button>Submit</button>
} 
```

更新的发布操作如下所示

```
[HttpPost]
public ActionResult Update(Company model)
{ 
  //Attempts to update the model 
  if (model.Update())
  {
     //Set the message to update succeeded
     TempData["Message"] = String.Format("{0} Successfully updated");
  }
  else   
  {
     //Set the message to update failed
     TempData["Message"] = String.Format("{0} filed to update");
  } 

  return RedirectToAction("Index");
} 
```

公司的控制器操作如下所示

```
public ViewResult Index()
{
  //Index is the entrypoint for companies so we set the currentlink to companies while we are in companies
  HttpContext.Current.Request.Cookies["CurrentLink"] = "Companies";      

  //Gets the success or failure message from the temp data
  ViewBag.Message = TempData["Message"]; 

  //Sets The Title property on the ViewBag to List of companies
  ViewBag.Title = "List of companies";

  var model = db.GetAllCompanies();

  return View(model);
} 
```

列表的视图如下所示

```
@model IEnumrable<Application.Models.Company>
@{
   Layout = "_layout.cshtml";
}
<span>@ViewBag.Message</span>
<ul>
@foreach (var company in Model) 
{
  <li>@company.Name : @company.Description @Html.AnchorLink("Edit", "Update", new { company.id}) </li>
}
</ul> 
```

让我们讨论一下这个应用程序的流程是如何工作的

1.  指数行动被公司触发。
2.  我们将当前链接设置到**Cookie中的公司**
3.  然后我们在**ViewBag中设置 Title**
4.  我们检查 TempData 中的消息并将它们放入**ViewBag**
5.  然后我们将公司的集合放入一个**模型**中，然后发送到页面。
6.  现在 razor 启动并开始首先渲染页面
7.  然后布局渲染并从**ViewBag中获取 Title 值**
8.  然后标题部分视图呈现并从**Cookie中获取 currentlink 值**
9.  我们点击一​​个公司的更新按钮
10.  更新操作运行
11.  从数据库中获取公司并将其发送到**模型中的视图**
12.  **我们在ViewBag**中更改标题以更新
***   页面首先呈现并将公司数据放在表单上，​​来自**模型***   然后布局渲染并从**ViewBag中获取 title 值***   **然后标题呈现并从cookie**中获取当前链接（值仍然是公司，我们不必更改它）*   然后我们提交表单并向**TempData添加一条消息***   现在我们回到了公司列表，我们可以从**TempData中获取成功或失败消息****

 **我们使用**模型**将**特定**数据发送到视图。我们使用**ViewBag**将**常规**数据发送到视图和布局。我们使用**TempData**在动作之间传递数据**而不使用参数**。我们使用**Cookie**来存储**暂时不会更改的数据**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:32:23.967

正确的是 using `ViewBag.Title`，因为它是在您的`ViewBag`财产的上下文中，`View`而您的财产`Page.Title`来自 asp.net webforms。这就是为什么`Page.Title`为空的原因，它没有上下文。**

# php - PHP 的 apache2 www 权限

> ID：15206282
> 
> 赞同：0
> 
> 时间：2013-03-04T16:30:29.243
> 
> 标签：php, permissions, apache2, debian

我用 apache2 和 php5 安装了一个新的 debian 6.0 x64 服务器。我需要像“parse_ini_file”、“mkdir”等功能，但不知何故，权限不适合我的 /var/www 文件夹。任何提示如何设置 /var/www 文件夹的权限？

这是我当前对 /var/www 文件夹的权限：

```
drwxr-xr-x  5 root root  4096 Mar  4 17:12 www 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:38:50.987

您必须更改您的所有者或权限才能响应用户，您已登录。例如，`root`可以更改`john's`文件，但是`john`，在分层下的用户`root`，**不能**更改他的文件。

*   更改文件夹/文件的所有者

    chown 用户：组 /var/www

*   更改文件夹/文件的权限

    chmod [xxx] /var/www

*您也可以添加 -R 参数以递归执行命令，它直接位于`chown`and之后`chmod`。

**[xxx] 通常使用 755，但要小心这个！

[http://en.wikipedia.org/wiki/Chmod](http://en.wikipedia.org/wiki/Chmod)

[http://linuxcommand.org/lts0070.php](http://linuxcommand.org/lts0070.php)

# javascript - PhoneGap 打开 PDF 错误“无法打开文档”

> ID：15206288
> 
> 赞同：2
> 
> 时间：2013-03-04T16:30:50.823
> 
> 标签：javascript, android, html, cordova, pdf

我目前正在使用PhoneGap。我使用 eclipse 作为我的 IDE。我正在开发的平板电脑是三星 Galaxy Tab 10.1，android 版本 4.0.4。

现在我正在尝试通过我的应用程序在设备上打开 PDF。但是它不起作用。我按照此页面上的教程进行操作，[https://github.com/markeeftb/FileOpener](https://github.com/markeeftb/FileOpener)。

这是我所做的更改。

-> 在 src 文件夹中，我创建了一个名为 com.phonegap.plugins.fileopener 的新文件夹 -> 我将 FileOpener.java 文件复制并粘贴到该文件夹​​中。-> 然后在位于 xml 文件夹中的 config.xml 文件中，我添加了该行

```
<plugin name="FileOpener" value="com.phonegap.plugins.fileopener.FileOpener"/> 
```

-> 我还加了一行

```
<script type="text/javascript" charset="utf-8" src="fileopener.js"></script> 
```

进入我的 index.html 文件

这是 index.html 的代码

```
<!DOCTYPE HTML>
<html>
    <head>
        <title> PhoneGap </title>
        <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="fileopener.js"></script>
    </head>
    <body>
        <h1>PDF Open Tester</h1>
        <a href="#" onclick="window.plugins.fileOpener,open('/sdcard/Course Content Files/1.pdf');">open</a>
    </body>
</html> 
```

作为进一步的信息，一旦我在我的电脑上连接了平板电脑，当我右键单击 1.pdf 并检查属性时，文件位置是 Computer\GT-P7510\Tablet

当我在平板电脑上运行这个项目并单击打开的链接时。adobe 阅读器应用程序在主页上打开，显示“无法打开文档”。出了什么问题，为什么 PDF 不能用 Adob​​e Reader 打开？如果可以，请提供帮助，我将不胜感激。

------------------------------------编辑后 1------------ -------------------------------------------------- ---------------------

我发现正在发生的特定错误。错误是 Object # has no method 'exec'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:04:31.110

FileOpener 插件需要一个 URI，而您正在向它传递一个文件路径。

改变：

```
'/sdcard/Course Content Files/1.pdf' 
```

到：

```
'file:///sdcard/Course Content Files/1.pdf' 
```

# coffeescript - Meteor：如何从模板助手返回模板？

> ID：15206293
> 
> 赞同：3
> 
> 时间：2013-03-04T16:31:07.840
> 
> 标签：coffeescript, meteor

n00b 在这里。我正在尝试将任意模板“注入”到另一个模板中。但似乎我做错了:)

不管什么.html：

```
<template name="parent">
    {{child}}
</template>

<template name="child1">
  I'm child 1
</template>

<template name="child2">
  I'm child 2
</template> 
```

不管什么咖啡

```
x = "child1"
Template.parent.child = -> Template[x](@) 
```

这将创建“带注释的 HTML”( [http://docs.meteor.com/#template_call](http://docs.meteor.com/#template_call) ) 作为结果，但 {{child}} 帮助程序的输出是 html 编码的，因此不会被解释。

我知道我可以使用 Template.myTemplate.rendered 事件使用 jQuery 将模板直接添加到 DOM。但这似乎是一个黑客恕我直言。如果可能的话，我宁愿让一个助手生成它。

这样做的“正确”方法是什么？是否可以取消模板中的结果？反应会起作用吗？

提前致谢！！1

问候

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T16:46:51.907

A`{{doubleBrace}}`转义 HTML，而 a`{{{tripleBrace}}}`不转义 HTML 并按原样呈现。

编辑：我以其他方式提到它。

来自 Handlebars 文档 -“Handlebars HTML 转义 {{expression}} 返回的值。如果您不希望 Handlebars 转义值，请使用“triple-stash”。”

# asp.net - SQL 检索数据 NOT IN

> ID：15206294
> 
> 赞同：0
> 
> 时间：2013-03-04T16:31:17.340
> 
> 标签：asp.net, sql

```
SELECT ID, Name
FROM dbo.AmenitiesList 
WHERE TypeID=@Type and Status = 'Available'
    AND ID NOT IN
    (SELECT AmenitiesID FROM dbo.ReservationList
     WHERE Status = 'Cancelled' AND StartDate between @Arrival and @Departure
     or EndDate between @Arrival and @Departure
     or @Arrival between StartDate and EndDate
     or @Departure between StartDate and EndDate) 
```

这是我的查询，我想显示状态为“已取消”且到达日期和离开日期不在数据库中的到达日期和离开日期之间的所有可用设施。但是在检索数据时，我没有得到可用的设施，因为当状态被取消时，它会触发关于日期之间的其他条件。如何避免这种情况？

我想显示已取消且不在 ArrivalDate 和 Departure Date 之间的设施

提前谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:35:30.593

对于性能和优化，请考虑表变量。

```
DECLARE @TABLE AS TABLE
(
  AmenityID INT PRIMARY KEY CLUSTERED
)
INSERT INTO @TABLE
SELECT AmenitiesID FROM dbo.ReservationList
--Your conditions

--Get values that exist
SELECT * FROM AmentitiesList al
INNER JOIN @Table t on al.AmenityID = t.AmenityID

--Get values that don't
SELECT * FROM AmentitiesList al
LEFT JOIN @Table t on al.AmenityID = t.AmenityID
WHERE t.AmenityID IS NULL 
```

仅仅因为代码更短，并不意味着它可以扩展。`Left Joins`也是一种痛苦……

您也可以通过使用表变量轻松摆脱它。

```
DECLARE @AmenityList AS TABLE
(
  AmenityID INT PRIMARY KEY CLUSTERED
  Matched BIT DEFAULT(0)
)
INSERT INTO @AmenityList
Select AmenityID FROM AmentitiesList

UPDATE @AmenityList SET Matched = 1
FROM @AmenitityList al
INNER JOIN @Table t on t.AmentityID = al.AmentityID

SELECT * FROM @AmentityList WHERE Matched = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:35:53.070

这个版本怎么样？

```
SELECT ID, Name
FROM dbo.AmenitiesList 
WHERE TypeID=@Type and Status = 'Available'
    AND ID NOT IN
    (SELECT AmenitiesID FROM dbo.ReservationList
     WHERE Status = 'Cancelled' AND (StartDate between @Arrival and @Departure
     or EndDate between @Arrival and @Departure
     or @Arrival between StartDate and EndDate
     or @Departure between StartDate and EndDate)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:10:43.797

```
SELECT ID, Name
FROM dbo.AmenitiesList 
WHERE TypeID=@Type and Status = 'Available'
    AND ID NOT IN
    (SELECT AmenitiesID FROM dbo.ReservationList
 WHERE Status != 'Cancelled' AND Status != 'Check Out' AND  ((@Arrival <= EndDate) AND (@Departure >= StartDate))) 
```

这解决了我的问题！顺便感谢你们花时间向我提供信息！上帝保佑！

# jquery - jQuery 每个函数都带有 if 语句

> ID：15206295
> 
> 赞同：0
> 
> 时间：2013-03-04T16:31:17.877
> 
> 标签：jquery, if-statement

我正在构建一个功能来验证表单，我可以将其用于即将进行的项目。第二个 if 语句不起作用，我不知道为什么。

```
$('.submit').click(function() {  

    var hasError = false,
        emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,
        form = $('form'),
        radio_check = $('.tick .test'),
        input = $('input:not(.submit)'),
        emailaddressVal = $("#email").val(),
        email = $('#email');

        $('form input:not(.submit)').each(function(){
            if ($(this).val() == '') {
                $(this).css('background-color', 'red');

                if(!email.val() == '') {
                        email.css('background-color', '#faa');
                }
            }

        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:33:28.863

我想您的意思是检查电子邮件字段是否为空，因此您应该这样做：

```
if(!email.val()) { } //-> not falsey 
```

或者

```
if(email.val() === '') { } //-> is empty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:35:09.923

采用

```
if(email.val() === '') {...} 
```

或者

```
if(!email.val()) {...} 
```

# sql - 如何覆盖 PrestaShop 的产品类以限制 SQL 查询中返回的产品数量？

> ID：15206303
> 
> 赞同：0
> 
> 时间：2013-03-04T16:31:49.360
> 
> 标签：sql, product, prestashop

第 2070 行有一个这样的 SQL：

```
SELECT product_shop.id_product, product_attribute_shop.id_product_attribute
FROM `'._DB_PREFIX_.'product` p
'.Shop::addSqlAssociation('product', 'p').'
LEFT JOIN  `'._DB_PREFIX_.'product_attribute` pa ON (product_shop.id_product = pa.id_product)
'.Shop::addSqlAssociation('product_attribute', 'pa', false, 'product_attribute_shop.default_on = 1').'
WHERE product_shop.`active` = 1
'.(($ids_product) ? $ids_product : '').'
AND p.`id_product` IN (
    SELECT cp.`id_product`
    FROM `'._DB_PREFIX_.'category_group` cg
    LEFT JOIN `'._DB_PREFIX_.'category_product` cp ON (cp.`id_category` = cg.`id_category`)
    WHERE cg.`id_group` '.$sql_groups.'
)
'.($front ? ' AND product_shop.`visibility` IN ("both", "catalog")' : '').'
AND (pa.id_product_attribute IS NULL OR product_attribute_shop.default_on = 1)
GROUP BY product_shop.id_product
ORDER BY RAND() 
```

我想知道我是否可以删除：

```
'.(($ids_product) ? $ids_product : '').' 
```

因为对于 16k 产品，我有 16k“或”，它太大了，从我的服务器上占用了太多资源。

我也加了一个“LIMIT 0, 200”，不知道好不好？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:41:49.540

`limit`应该工作。您的其他更改也可能会产生预期的结果。

最重要的是不要更改核心文件，因为这可能会导致对站点其他部分的意外更改。

Prestashop 为您提供了一种在不破坏所有内容的情况下覆盖核心文件的方法，并允许您快速恢复到原始文件。

将文件复制`products.php`到`overrides`目录并在那里进行更改。

您可以找到 Prestashop 覆盖的支持和文档@[覆盖默认行为](http://doc.prestashop.com/display/PS15/Overriding+default+behaviors?desktop=true)

# jquery - ie8斑马表行和悬停

> ID：15206305
> 
> 赞同：0
> 
> 时间：2013-03-04T16:31:57.067
> 
> 标签：jquery, internet-explorer-8

我需要一种更好的方法来执行以下操作。10 行之后的性能只会降级到无法使用。在 100+ 时，浏览器就会锁定。

这是一个内部网 ie8 环境，所以它必须在 ie8 中工作。

```
$('table.vgrid tr.xodd').hover(
    function(){ 
        $(this).removeClass('xodd');
        $(this).addClass('rowhover');           
    } 
    , 
    function(){             
        if ($(this).attr("class")=='rowhover')
        {
            $(this).removeClass('rowhover');
            $(this).addClass('xodd');
        }
    }
);
$('table.vgrid tr.xeven').hover(
    function(){ 
        $(this).removeClass('xeven');
        $(this).addClass('rowhover');           
    } 
    , 
    function(){ 
        if ($(this).attr("class")=='rowhover')
        {
            $(this).removeClass('rowhover');
            $(this).addClass('xeven');
        }
    }
); 
```

html 与表上的 vgrid 类和交替 tr 行上的奇数/偶数一样。

我尝试了几种不同的方法，但它们的表现都很糟糕。不仅仅是斑马效应，我还有其他 JS 关闭它的当前类，所以现在使用这些类是强制性的，因为担心不得不重新编码一半的网站。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:37:05.290

我怀疑是否有充分的理由删除现有的课程。如果你设置你的 CSS 以便在那些 for和`.rowhover`之后列出 的样式，它们自然会被覆盖。`.xeven``.xodd`

然后，您需要做的就是[`.toggleClass`](http://api.jquery.com/toggleClass)上课`rowhover`：

```
$('.vgrid tr').on('mouseenter mouseleave', function() {
    $(this).toggleClass('rowhover');
}); 
```

[http://jsfiddle.net/mblase75/JJ2qJ/1/](http://jsfiddle.net/mblase75/JJ2qJ/1/)

* * *

但是有一种更好的纯 CSS 方法：使用[`:hover`](http://caniuse.com/#search=hover)伪类。同样，`:hover`在其他样式`.xeven`和样式之后列出这些样式，`.xodd`以便它们覆盖。

（您可能需要将某些样式应用于`tr:hover td`孩子而不是其`tr`本身。尝试一下，看看什么最有效。）

示例：http: [//jsfiddle.net/mblase75/JJ2qJ/](http://jsfiddle.net/mblase75/JJ2qJ/)

```
.vgrid .xeven {
    background-color: #999;
}
.vgrid .xodd {
    background-color: #ddd;
}
.vgrid tr:hover {
    background-color: #9ff;
} 
```

# linux - 如何在 Linux KVM 实例中安装 SmartOS？

> ID：15206309
> 
> 赞同：1
> 
> 时间：2013-03-04T16:32:09.337
> 
> 标签：linux, kvm, smartos

我需要在 SmartOS 上测试一个程序。我没有任何备用系统，所以我想将它安装到我的 GNU/Linux 发行版上的 KVM 映像中。我已经以这种方式安装了 Solaris 11，而且效果很好。

我下载了 ISO 并在 KVM 中启动它，安装似乎工作正常。但是，当我启动虚拟机时，它总是开始出现并说：

```
Booting from harddisk ... 
```

然后它就坐在那里，与虚拟 CPU 挂钩，不再继续前进。没有按键似乎做任何事情（Ctrl-Alt-Del 除外，它再次启动启动，给出相同的结果）。

我使用“原始”磁盘格式从 virt-manager 创建了具有 2G RAM、2 个 CPU、50G 磁盘空间的 KVM，并选择“Solaris”/“OpenSolaris”作为操作系统类型。

我没有 VMWare 的副本，而且为 Linux 获得一个似乎真的很昂贵，所以我不认为使用 SmartOS VMWare 映像对我来说是一种选择。

有人有任何提示吗？Google 向我展示了很多关于在 SmartOS KVM 中创建 Linux 实例的信息，但没有以其他方式进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:05:33.567

我在邮件列表的帮助下想通了。SmartOS 是一个 PXE 引导操作系统：它实际上并不安装到硬盘上。当我的安装完成并且 VM 重新启动时，KVM 自动从我的虚拟 CDROM 中卸载了 ISO 文件，因此在启动时它正在寻找一个 PXE 映像来启动但找不到它。

我所要做的就是将 ISO 文件重新附加到虚拟 CDROM 上，然后它就可以正常工作了。啊。

# ios - 接收gestureRecognizer：shouldRecognizeSimultaneouslyWithGestureRecognizer当gestureRecognizerShouldBegin：返回NO

> ID：15206311
> 
> 赞同：2
> 
> 时间：2013-03-04T16:32:15.420
> 
> 标签：ios, uigesturerecognizer

我有一个视图，它有一个`UIPanGestureRecognizer`. 同一个视图还包含一个`UIScrollView`.

当用户平移 ScrollView 时，我返回 NO in `gestureRecognizerShouldBegin:`，以确保 ScrollView 的手势识别器接管手势。

但是，我仍然收到`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`消息。很容易解决，我只需要在中返回NO `gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`，但是我想知道在返回NO后收到这个消息是否正常`gestureRecognizerShouldBegin:`。

**代码**

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    NSLog(@"gestureRecognizerShouldBegin:0x%x - return NO", (int)gestureRecognizer);
    return NO;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    NSLog(@"gestureRecognizer:0x%x shouldRecognizeSimultaneouslyWithGestureRecognizer:0x%x", (int)gestureRecognizer, (int)otherGestureRecognizer);
    return YES;
} 
```

**输出**

```
2013-03-04 11:30:14.876 XXXX[99271:19d03] gestureRecognizerShouldBegin:0x9d6c380 - return NO
2013-03-04 11:30:14.876 XXXX[99271:19d03] gestureRecognizer:0x9d6c380 shouldRecognizeSimultaneouslyWithGestureRecognizer:0xbb75240 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T09:39:01.117

我认为这种行为是可以的。`gestureRecognizerShouldBegin:`来自官方文档讨论的以下方法参考：

> 当手势识别器尝试转换出`UIGestureRecognizerStatePossible`状态时调用此方法。返回 NO 会导致手势识别器转换到`UIGestureRecognizerStateFailed`状态。

这清楚地表明它不会阻止手势识别器，但会转换到`UIGestureRecognizerStateFailed`相应手势识别器的状态。所以其他委托方法将被正常调用。

# reporting-services - SQL Server 报告服务 (SSRS)

> ID：15206312
> 
> 赞同：1
> 
> 时间：2013-03-04T16:32:17.690
> 
> 标签：reporting-services, reportingservices-2005

我是 SSRS 的新手。我使用 SSRS 访问远程数据源。我可以使用下面显示的界面来构建和执行查询并生成报告：

![在此处输入图像描述](../Images/f2b8e34a6865d397c7aa3eaac512fe05.png)

有没有办法通过直接指定 SQL 而不是使用图形工具来构建报告。我花了一些时间在谷歌上搜索，并且浏览了一些教程。我无法找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:38:10.733

单击该`Edit as Text`窗口左上角的按钮并点击它。

![SSRS 查询设计器](../Images/1016e3f7379942b82c674124923ffe3e.png)

**编辑**如果您在查询窗口中只看到 XML，那么您使用的是[报表模型数据源](http://msdn.microsoft.com/en-us/library/dd239359.aspx)，而不是直接的数据库连接。无法直接使用 SQL 查询模型。

为了使用 SQL 进行查询，请使用直接指向数据库的连接字符串设置[数据源。](http://msdn.microsoft.com/en-us/library/ms156450.aspx)

# jquery-mobile - jQuery Mobile 在显示之前加载一些数据

> ID：15206313
> 
> 赞同：1
> 
> 时间：2013-03-04T16:32:22.323
> 
> 标签：jquery-mobile

我想用 ajax 加载一些数据并操作给定“详细信息页面”的 DOM。在显示页面之前。重要的是，在此页面的所有加载和操作完成之前，“详细信息页面”的任何内容都不可见。在加载过程中，加载小部件也应该出现。

我试过这个：

```
$( '#page_series_detail' ).live( 'pageinit',function(event)
{
    AjaxSeriesDetail();
}); 
```

但是在这种情况下，所有的加载和操作都发生在页面显示之后。有人给我提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:33:28.147

你应该试试 jQuery Mobile 的[pagebeforeshow](http://api.jquerymobile.com/pagebeforeshow/)事件。此事件将在向用户显示页面之前触发。

根据文档

> 在实际过渡动画开始之前，在我们过渡到的“toPage”上触发。

# jquery - 用不同的功能覆盖选择器回调

> ID：15206314
> 
> 赞同：1
> 
> 时间：2013-03-04T16:32:22.917
> 
> 标签：jquery

我有一组输入：

```
<input class="test"></input>
<input class="test"></input>
<input class="test"></input>
<input id="diff" class="test"></input> 
```

当用户单击这些输入时，一些 jQuery 会做一些事情：

```
$(function () {
    $(".test").on("click", function () {
        alert("test");
    });
    $("#diff").on("click", function () {
        alert("diff");
    });
}); 
```

目前，第 4 个文本框将显示两个警报。如何“覆盖”默认警报“测试”以仅说“差异”？

非常感谢。

小提琴：http: [//jsfiddle.net/G3PAy/](http://jsfiddle.net/G3PAy/)

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:40:13.813

我认为没有办法指定不同处理程序的优先级，因此您需要在第一次单击处理程序中明确排除它：

```
$(".test:not(#diff)").on("click", function () {
    alert("test");
}); 
```

第二个点击处理程序（for `#diff`）保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:42:36.787

让我感到震惊的是，您可能以错误的方式进行此操作。

我首先认为您应该尝试设计您的标签，使#diff 标签不具有相同的类。一种方法是将相同的 CSS 规则应用于新类，如下所示：

```
.test
{
/* CSS rules */
} 
```

变成

```
.text, .newClass
{
/* new CSS rules */
} 
```

但是，如果您不想这样做，您可以针对 jQuery 中的其他属性进行测试。

您可以使用以下代码来实现您想要的结果：

```
$(function () {
    $(".test").on("click", function () {
        if( !$(this).is("#diff"){
        alert("test");
        }
    });
    $("#diff").on("click", function () {
        alert("diff");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:43:27.927

有许多不同的方法可以做到这一点，具体取决于您要实现的逻辑细节。

我选择将其解释如下：

1.  每当单击输入时，运行测试
2.  如果是`#diff`，请提醒我们，或者
3.  如果是`.test`，请提醒我们

如此有效地进行了一系列测试，并且某些条件会覆盖其他条件。为此，您使用 jQuery 运行一个通用选择器，然后使用 else if 逻辑语句来确定操作过程。

此处修改代码：

```
$(function () {
    $("input").on("click", function () {
        if($(this).is('#diff')){
            alert("diff");
        }
        else if($(this).is('.test')){
            alert("test");
        }
    });
}); 
```

在这里演示：http: [//jsfiddle.net/barney/QkrbK/](http://jsfiddle.net/barney/QkrbK/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T17:09:01.333

**[尝试使用event.stopImmediatePropagation()](http://api.jquery.com/event.stopImmediatePropagation/)**进行内联点击事件

```
<input id="diff" class="test" onclick="show();event.stopImmediatePropagation();"></input> 
```

和

```
function show() {
    alert("diff");
} 
```

查看[示例](http://jsfiddle.net/G3PAy/2/)

# jquery - 在 JQuery 函数内部和外部使用变量。

> ID：15206319
> 
> 赞同：0
> 
> 时间：2013-03-04T16:32:31.610
> 
> 标签：jquery, variables

我有 2 个 JQuery 函数：

```
 $('.satnav').change(function() {
        $('#satnavadd').show();
        var price = "<?php echo $finalprice; ?>";
        //alert(price);
        var numofdays = "<?php echo $length->days; ?>";
        //alert(numofdays);
        var numberofsatnav = $(this).val();
        //alert(numberofsatnav);
        var satnavcost = Number(3) * Number(numofdays);
       //alert(satnavcost);
        var satnavtotal = Number(numberofsatnav) * Number(satnavcost);
        var newprice = Number(price) + Number(satnavtotal);
        $("input#satnavprice").val(satnavtotal);
        $("input#satnavnum").val(numberofsatnav);

    });

        $('.boostseat').change(function() {
            $('#boostseatadd').show();

            var price = "<?php echo number_format($finalprice, 2); ?>";
            //alert(price);
            var numberofboostseat = $(this).val();
            //alert(numberofboostseat);
            var numofdays = "<?php echo $length->days; ?>";
            //alert(numofdays);
            var boostcost = Number(3) * Number(numofdays);
            var boosttotal = Number(numberofboostseat) * Number(boostcost);
            var newprice = Number(price) + Number(boosttotal);
            $("input#hiddenboostprice").val(boosttotal);
            $("input#hiddenboostnum").val(numberofboostseat);

        }); 
```

正如您所看到的，它们都计算价格然后更新 HTML 元素，但是我还想将两个最终总数加在一起。

例如：

```
var extrastotal = Number(boosttotal) + Number(satnavtotal); 
```

但是我不能将变量移到函数之外，否则它将不起作用。有没有办法以某种方式解决这个问题，或者它是否涉及为两者编写另一个具有重复代码的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:36:31.100

在函数之外设置一个全局变量，然后让每个变量都执行 += 以添加到值中。

# c# - Winforms 空引用异常

> ID：15206321
> 
> 赞同：0
> 
> 时间：2013-03-04T16:32:34.513
> 
> 标签：c#, winforms, nullreferenceexception, vlc

目前我正在尝试使用[这个 VLC 库在 winform 应用程序中打开我的第一个视频文件](http://vlcdotnet.codeplex.com/documentation)

据我所知，我已经正确设置了所有内容。我遵循了示例项目提供的所有源代码，并以示例项目的样式创建了我的 winform。当我运行项目并打开我的文件时，我得到`Null Reference Exception`以下代码，即行`vlcControl.Media = media;`：

```
 if (openFileDialog.ShowDialog(this) == DialogResult.OK)
  {
     var media = new PathMedia(openFileDialog.FileName);
     vlcControl.Media = media;
  } 
```

我知道发生空引用错误是因为我没有初始化某些东西，但在我看来，媒体已经设置为一个新对象。那么为什么我的编译器会出错呢？

**更新** 我已经解决了这个问题。我不得不重建并重新添加一个修复此问题的 dll。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:34:51.493

有两种选择可能导致这种情况。

1.  `vlcControl`在那一点上为空（尚未构造或初始化）。这将导致发生异常，因为您正在尝试访问该`Media`属性。
2.  `vlcControl`引发异常，因为它的内部状态设置不正确。如果设置`Media`属性导致代码在内部运行，并且状态设置不正确，则可能引发异常。

您应该能够查看异常详细信息或本地窗口（以检查`vlcControl`存在`null`）以确定问题所在。

# regex - 两行之间所有文本的正则表达式

> ID：15206322
> 
> 赞同：0
> 
> 时间：2013-03-04T16:32:35.853
> 
> 标签：regex, grep

我想匹配这样的文字

```
my  begin line
not useful text that I cannot match because I don't know how it is composed
my end line 
```

我会匹配上面的所有文本，我现在的问题是我无法匹配所有文本，而只能匹配带有这样的正则表达式的第一行：

```
my begin line\n.*my end line 
```

所以我很困惑，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:45:50.077

要打印两个图案之间的线条，**不包括**包含图案本身的线条，请使用：

```
sed -n '/my begin line/,/my end line/ {/my begin line/n;/my end line/!p}' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:57:40.333

你可以用 sed 做到这一点：

```
sed -n '/my begin line/,/my end line/p' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T17:11:14.123

您在评论中提到了 awk：

这给了你所有的文本，（包括带开始、结束模式的行）

```
awk '/my  begin line/,/my end line/' file 
```

这只为您提供了开始/结束模式之间的线条（没有带开始、结束模式的线条）

```
awk '/my  begin line/{f=1;next;}/my end line/{f=0}f' file 
```

# xpages - 如何计算xpages的加载时间

> ID：15206325
> 
> 赞同：0
> 
> 时间：2013-03-04T16:32:41.283
> 
> 标签：xpages

尝试将日期存储在会话范围中并有所作为，但它根本不起作用

```
On click
sessionScope.StarTime=new Date()

On display
var wTime=new Date()
var wDiff=wTime-sessionScope.StartTime
"Temps de chargement " + wDiff + " ms" 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:23:59.503

没有“onDisplay”事件，所以我假设您将代码的第二部分添加到计算字段中。对于初学者，您的代码**StarTime** ws 中有错字。开始**时间**。如果您确实复制并粘贴以将代码放入问题中 - >那是您的问题。

您还想了解 XPages 生命周期，以便更好地衡量它。有一个免费的[大师班](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-95GFEX)。您还想看看[XPages Toolbox](http://www.openntf.org/Projects/pmt.nsf/ProjectLookup/XPages%20Toolbox)，它允许您分析您的应用程序。

最后：还要注意您的网络速度以及它对您的应用程序的影响。Firebug 或 Google Chrome 开发者工具有很大帮助。是有点过时了（从那时起进行了相当多的改进），但[这个演示文稿](http://www.slideshare.net/ddrschiw/ad109)提供了更多关于性能的信息

# c# - C#：字节到 UTF-8 字符串的转换。为什么它不起作用？

> ID：15206327
> 
> 赞同：5
> 
> 时间：2013-03-04T16:32:49.203
> 
> 标签：c#, encoding, utf-8, character-encoding, hex

有一个汉字在 UTF-8 中显示为 F0 A4 AD A2。这个字符在这里描述：[http ://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

U+24B62 F0 A4 AD A2

**当我在C#**中运行此代码时...

```
byte[] data = { 0xF0, 0xA4, 0xAD, 0xA2 };
string abc = Encoding.UTF8.GetString(data);
Console.WriteLine("Test: description = {0}", abc); 
```

...我将输出重定向到文本文件，然后使用 notepad.exe 选择 UTF-8 编码打开它。我希望得到输出，但确实得到两个问号 (??)。

字节序列是正确的。它**在 Perl 中**工作：

```
print "\xF0\xA4\xAD\xA2"; 
```

在输出中，我得到

**所以我的问题是：**为什么我会得到“？？” **而不是C#**中的“” ？

PS 这个字符没什么特别的：我对任何字符（2、3 或 4 字节长）都得到了相同的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T16:40:21.643

默认情况下，控制台无法显示 Unicode 字符。它只显示 ASCII。要使其显示 Unicode，请使用：

```
Console.OutputEncoding = System.Text.Encoding.Unicode 
```

在给它写信之前。

但**无论如何它在大多数操作系统上都会失败**，因为 Windows 命令行本身不支持 Unicode。

因此，出于测试目的**，最好将输出写入文件**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:46:48.480

您需要使用 UTF8 写入文件。下面的代码显示了您可以如何做到这一点。在记事本中打开生成的文件时，字符显示正确：

```
string c = "";
var bytes = Encoding.UTF8.GetBytes(c);
var cBack = Encoding.UTF8.GetString(bytes);
using (var writer = new StreamWriter(@"c:\temp\char.txt", false, Encoding.UTF8))
{
    writer.WriteLine(cBack);
} 
```

# c++ - 不同文件中的功能无法正常工作

> ID：15206332
> 
> 赞同：-2
> 
> 时间：2013-03-04T16:33:16.123
> 
> 标签：c++, function-call

我做了一个调用这个函数的程序。我知道这是因为“Int Strength 已被调用”出现在输出框中。但是，它不会改变我告诉它要做的值。我希望它从 main() 获取整数值，然后使用它们并返回新值。我正在使用一个只包含“int strength(int a, int s, int i)”的头文件

```
int strength(int a, int s, int i)
{
    using namespace std;
    cout << "Int Strength has been called" << endl;
    a = a + i;
    s = s - i;
    return a;
    return s;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T16:35:22.337

多个错误。首先，如果您希望修改参数（更准确地说，修改在函数范围之外有效），您必须通过引用传递值：

```
int strength(int &a, int &s, int &i) 
```

其次，您似乎担心`return a; return s;`返回两个值。它没有 - 第一个`return`遇到的立即退出该函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:35:29.767

值仅在函数内更改。变量通过值而不是引用传递。使用引用作为参数。

```
 int strength(int& a, int& s, int& i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:35:11.140

你是按价值传递的。您需要[将指针传递](http://www.cplusplus.com/forum/beginner/2260/)给调用者分配的包含您希望修改的数据的内存。

```
void strength(int *a, int *s, int i)
{
    using namespace std;
    cout << "Int Strength has been called" << endl;
    *a += i;
    *s -= i;
} 
```

然后这样称呼它：

```
a = 1;
s = 2;
i = 3;

strength(&a, &s, i); 
```

# mysql - Wireshark如何知道数据包是否加密？

> ID：15206345
> 
> 赞同：0
> 
> 时间：2013-03-04T16:33:37.587
> 
> 标签：mysql, networking, ssl, replication, wireshark

我有一个使用 SSL 的 mysql 复制设置我已经捕获了一些使用wireshark 发送到我的奴隶的数据包，并且想知道我将如何识别这个数据包是否使用 SSL 加密？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:55:42.003

由于 MySQL 将使用默认情况下不一定使用 SSL 的端口（例如 443 用于 HTTPS），因此您需要告诉 Wireshark 尝试首先将该流量解码为 SSL。您可以通过在该 TCP 连接中选择一个数据包并使用*右键单击*-> *Decode As...* -> *Transport* -> *SSL*来执行此操作。

如果您可以看到诸如`Client Hello`、`Server Hello`和之类的握手消息`Finished`，所有这些都紧随其后`Application Data`，这很好地表明 SSL/TLS 正在用于该连接。

是否正确使用 SSL/TLS 是另一回事。您应该确保您的客户端配置为验证服务器证书并且它与预期的主机名匹配。

# c# - 在用户控件中将参数传递给 XSLT 函数

> ID：15206348
> 
> 赞同：0
> 
> 时间：2013-03-04T16:33:54.837
> 
> 标签：c#, asp.net, .net, user-controls, c1-cms

在 Composite C1 中，如何将参数传递给在 Webforms 用户控件中呈现的 C1 函数？

就我而言，我想在我的用户控件中包含 SimpleSearch 结果：

```
<rendering:Function runat="server" id="fnSimpleSearch" >
    <f:function xmlns:f="http://www.composite.net/ns/function/1.0" name="Composite.Search.SimplePageSearch.SearchResults">      
        <f:param name="SearchQuery" value="<%= SearchTerm %>" /> 
        <f:param name="CurrentSite" value="False" /> 
        <f:param name="PageSize" value="10" /> 
        <f:param name="ShowSearchForm" value="True" />      
    </f:function> 
</rendering:Function> 
```

这是代码隐藏：

```
public string SearchTerm { get; set; }

protected override void OnLoad(EventArgs e)
{
    C1PageRoute.RegisterPathInfoUsage();
    string pathInfo = C1PageRoute.GetPathInfo();
    if(!string.IsNullOrWhiteSpace(pathInfo))
    {
        SearchTerm = pathInfo.Substring(1);
    }

    base.OnLoad(e);
} 
```

如果我这样做，函数将不会在最终页面中呈现，而只会呈现标记。如果我为 SearchQuery 参数输入一个静态值，它会被渲染。

如何从我的 CodeBehind 传递 SearchQuery 参数，以便正确呈现函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:58:00.743

你可以做两件事

1.  使用数据绑定语法，因此 SearchQuery 参数看起来像这样`<f:param name="SearchQuery" value="<%# SearchTerm %>" />`

2.  在 CodeBehind 中传递参数。这通常是最简单的，使您能够传递各种复杂的对象

    fnSimpleSearch.Parameters.Add(new Param("SearchQuery", SearchTerm));

# android - API级别15上的Android Wifi Direct WifiDirectServiceDiscovery？

> ID：15206349
> 
> 赞同：-2
> 
> 时间：2013-03-04T16:33:56.973
> 
> 标签：android, android-wifi

我需要在 4.0.3 (API 15) 上编译 android 4.2.2 (API 17) 的 WifiDirectServiceDiscovery 示例，可以吗？如果是，最好/最快的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:56:38.730

> 可能吗？

不，因为它需要仅在 API 级别 16 中引入的 API，例如`removeServiceRequest()`.

# asp.net - 链接按钮未显示为链接

> ID：15206350
> 
> 赞同：0
> 
> 时间：2013-03-04T16:33:57.673
> 
> 标签：asp.net, asplinkbutton

链接 btn 未按应有的方式显示

```
<th style="width:200px;">
              <asp:LinkButton id="linkBtn" runat="server" Text='<%# Eval("Title") %>' OnCommand="LoadCheckListRecordEntry"/>
       </th> 
```

“文本”内的数据不会显示为 btn 应该的链接，它只是普通文本，如果用户单击它，但它会执行它的意图......但对于视觉表示，它不会显示不同的 btn它和下一行？？

* * *

编辑：

```
<asp:Repeater id="rptChecklistRecords" runat="server">
    <HeaderTemplate>
        <table class="detailstable FadeOutOnEdit">
            <tr>   
              <th style="width:200px;">Title</th> 
              <th style="width:200px;">Timestamp</th>    
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
             <tr>                  
               <th style="width:200px;">

                              <asp:LinkButton id="linkBtn" runat="server" Text='<%# Eval("Title") %>' OnCommand="LoadCheckListRecordEntry"/>

               </th>  
               <th style="width:200px;"><%# Eval("Timestamp") %></th>  
             </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:40:57.403

有一种 CSS 样式正在改变链接的外观。使用 F12 工具或类似工具查看标签应用了哪些样式。

```
<th style="width:200px;">
              <asp:LinkButton id="linkBtn" runat="server" Text='<%# Eval("Title") %>' 
OnCommand="LoadCheckListRecordEntry"/>
       </th> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:56:52.017

尝试向它添加一个 CSS 类并设置它的样式

```
 <asp:LinkButton CssClass="linkBtn" id="linkBtn" runat="server" Text='<%# Eval("Title") %>' OnCommand="LoadCheckListRecordEntry"/> 
```

CSS

```
 a.linkBtn {
      text-decoration: underline; 
      color: blue
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T17:10:59.817

在网页上，“linkbutton”呈现为anchor（“<a/>”）标签，因此它不会显示为链接，直到您为其指定href或使用css设置样式使其看起来像一个链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T09:42:01.937

使用 CCS 作为背景图片，使用   作为链接文本并在 Click 事件上使用 Response.Redirect(YourPage)

享受 ;）

# java - 测试逻辑回归。不使用 1 或 0 收敛，但使用 logit

> ID：15206353
> 
> 赞同：0
> 
> 时间：2013-03-04T16:34:10.407
> 
> 标签：java, machine-learning, regression

我使用来自这里的线性回归代码使用梯度下降创建了一个简单的逻辑回归： [Java 中的梯度下降线性回归](https://stackoverflow.com/questions/14948503/gradient-descent-linear-regression-in-java)

现在，我只是通过添加 logit 变换来更改假设，使其适用于 Logistic 回归：1/(1+e^(-z))，其中 z 是原始的 Theta^T * X。而不是按人口缩放尺寸。

当试图测试我的结果时，我得到了一个令人困惑的行为：我将自变量（X）设置为随机数 * 预期权重，将因变量（Y）设置为它们总和的 logit，所以 y= logit(w0*1 + w1*x1 + w2*x2)。

现在在这种情况下，它收敛到正确的答案，我可以恢复预期的权重。但显然我应该将 Y 设为 0 或 1。但是当我向上或向下舍入时，我不再收敛。

我在这里生成训练数据：

```
@Test
public void testLogisticDescentMultiple() {
    //...

    //initialize Independent Xi
    //Going to create test data y= 10 + .5(x1) + .33(x2) 
    for( int x=0;x<NUM_EXAMPLES;x++) {
        independent.set(x, 0, 1); //x0 We always set this to 1 for the intercept
        independent.set(x, 1, random.nextGaussian()); //x1
        independent.set(x, 2, random.nextGaussian() ); //x2
    }

    //initialize dependent Yi
    for( int x=0;x<NUM_EXAMPLES;x++) {
        double val      = w0 +  (w1*independent.get(x,1)) + (w2*independent.get(x,2));
        double logitVal = logit( val );

        //Converges without this code block
        if( logitVal < 0.5 ) {
            logitVal = 0;
        }else {
            logitVal = 1;
        }
        //

        dependent.set(x, logitVal );
    }
    //...
}

public static double logit( double val ) {
    return( 1.0 / (1.0 + Math.exp(-val)));
}

//updated Logistic Regression
public DoubleMatrix1D logisticDescent(double         alpha,
                                      DoubleMatrix1D thetas,
                                      DoubleMatrix2D independent,
                                      DoubleMatrix1D dependent ) {
    Algebra algebra     = new Algebra();

    //hypothesis is 1/( 1+ e ^ -(theta(Transposed) * X))
    //start with theata(Transposed)*X
    DoubleMatrix1D hypothesies = algebra.mult( independent, thetas );

    //h = 1/(1+ e^-h)
    hypothesies.assign(new DoubleFunction() {
        @Override
        public double apply (double val) {
            return( logit( val ) );
        }
    });

    //hypothesis - Y
    //Now we have for each Xi, the difference between predicted by the hypothesis and the actual Yi
    hypothesies.assign(dependent, Functions.minus);

    //Transpose Examples(MxN) to NxM so we can matrix multiply by hypothesis Nx1
    DoubleMatrix2D transposed = algebra.transpose(independent);

    DoubleMatrix1D deltas     = algebra.mult(transposed, hypothesies );

    // thetas = thetas - (deltas*alpha)  in one step
    thetas.assign(deltas, Functions.minusMult(alpha));

    return( thetas );
} 
```

# carousel - 将价值从轮播传递到另一个轮播javascript？

> ID：15206357
> 
> 赞同：1
> 
> 时间：2013-03-04T16:34:21.167
> 
> 标签：carousel

有什么好的方法可以实现这一目标吗？

我的问题是，当我在轮播 1 中选择某些内容时，页面正在刷新，并且轮播 2 中的项目将根据我在轮播 1 中选择的内容进行选择。但是由于页面刷新，轮播1中的选定项目不再被选中..

有点捕获 22，因为如果我将代码设置为不刷新页面，我可以选择所有内容，但轮播 2 永远不会根据轮播 1 中选择的内容而更新。

有人遇到过类似的问题吗？

必须对此有一些解决方案=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:45:15.827

如果选择触发了链接，您可以添加一些 GET 参数来表达您刚刚选择的内容。页面重新加载后，您可以阅读它们并相应地构建页面的视图状态（例如：[http://mypage.tld/carousel.html?selected=1](http://mypage.tld/carousel.html?selected=1)）。

[http://papermashup.com/read-url-get-variables-withjavascript/](http://papermashup.com/read-url-get-variables-withjavascript/)

# asp.net - System.Web.HttpException：视图状态 MAC 验证失败

> ID：15206363
> 
> 赞同：1
> 
> 时间：2013-03-04T16:34:38.743
> 
> 标签：asp.net

每当我在我的应用程序中执行一项特定操作时，我都会收到以下错误。还：

*   我只在第一次点击时得到它，我所有的后续点击都有效
*   我只能在 IE 中获得它，在 Google Chrome 上运行良好
*   我没有在我的本地工作站上得到它，只有在 Dev/QA 服务器上
*   它是一个网络花园环境

**更新**

*   当我摆脱 Web Garden 时，它仍然会抛出错误
*   当我去服务器并尝试从那里运行应用程序时，我没有得到异常

**更多更新**

*   我不再看到 IE 版本 8.0.6001.18702 的错误
*   我看到错误的 IE 版本是：8.0.7601.17514、8.0.6001.18702IC、7.0.5730.13
*   在任何带有 ChromeFrame 23.0.1271.97（官方版本 171054）的 IE 版本上，我们都看不到此问题任何帮助将不胜感激！

System.Web.HttpException：视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。---> System.Web.UI.ViewStateException：无效的视图状态。

```
Client IP: XX.XXX.XX.XXXX
Port: XXXX
User-Agent: Mozilla/5.0 (Windows NT 5.1; chromeframe/25.0.1364.97) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22
ViewState: /wEPDwULLTIwMjAzMzA5NzcPZBYCZg9kFgRmD2QWAgIBDxUJNGh0dHA6Ly9zdGV3aWUyOjgwL3NvdmVyYS9zY3JpcHRzL2pxdWVyeS0xLjQuMi5taW4uanM3aHR0cDovL3N0ZXdpZTE6ODAvc292ZXJhL3NjcmlwdHMvanF1ZXJ5LmJnaWZyYW1lLm1pbi5qcy1odHRwOi8vc3Rld2llMTo4MC9zb3ZlcmEvc2NyaXB0cy96ZW5NYXN0ZXIuanMvaHR0cDovL3N0ZXdpZTE6ODAvc292ZXJhL3N0eWxlc2hlZXRzL2dsb2JhbC5jc3MyaHR0cDovL3N0ZXdpZTE6ODAvc292ZXJhL3N0eWxlc2hlZXRzL3plbk1hc3Rlci5jc3M+aHR0cDovL3N0ZXdpZTI6ODAvc292ZXJhL3NjcmlwdHMvanF1ZXJ5LXVpLTEuOC4yLmN1c3RvbS5taW4uanMyaHR0cDovL3N0ZXdpZTI6ODAvc292ZXJhL3NjcmlwdHMvZ3JpZC5sb2NhbGUtZW4uanM1aHR0cDovL3N0ZXdpZTE6ODAvc292ZXJhL3NjcmlwdHMvanF1ZXJ5LmpxR3JpZC5taW4uanMpaHR0cDovL3N0ZXdpZTI6ODAvc292ZXJhL3NjcmlwdHMvanNvbjIuanNkAgEPZBYIAgMPDxYCHghJbWFnZVVybAUcZ3JhcGhpY3MvaWNvbnMvYmFubmVyX3NtLmdpZmRkAgQPZBYCAgEPZBYCZg9kFgICBQ8PFgIeBFRleHQFCVN5c0FkbWluMWRkAgsPZBYGAgIPZBYCAgEPZBYCZg9kF... 
```

--- 内部异常堆栈跟踪结束 ---

```
 at System.Web.UI.ViewStateException.ThrowError(Exception inner, String persistedState, String errorPageMessage, Boolean macValidationError)
    at System.Web.UI.ViewStateException.ThrowMacValidationError(Exception inner, String persistedState)
    at System.Web.UI.ObjectStateFormatter.Deserialize(String inputString)
    at System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Deserialize(String serializedState)
    at System.Web.UI.Util.DeserializeWithAssert(IStateFormatter formatter, String serializedState)
    at System.Web.UI.HiddenFieldPageStatePersister.Load()
    at System.Web.UI.Page.LoadPageStateFromPersistenceMedium()
    at System.Web.UI.Page.LoadAllState()
    at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

# php - javascript附加代码的最佳位置

> ID：15206365
> 
> 赞同：0
> 
> 时间：2013-03-04T16:34:41.250
> 
> 标签：php, javascript, html

我的问题是 - 是否可以将 javascript 附加代码（`<script>...</script>`包含验证等简单内容的标签 - 不链接到任何外部源）放在该`<body>`部分的顶部某处？

`<head>`将它放在那里和将代码放在该部分内有什么区别吗？

我想创建一个带有一个头部的布局文件。每个模板都有不同的 js 代码部分——创建指向 .js 文件的外部链接将禁用添加 PHP 标记的可能性，所以我必须找到另一种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:36:24.397

不仅可以将`script`标签放入`body`元素中，除非您有充分的理由将其放入`head`，否则*最好*将其放入`body`元素中，最好是在结束`</body>`标签之前。这样，您的主要内容（您的标记）会尽快呈现给用户，而不是等待脚本文件加载/JavaScript 引擎启动并执行脚本。

参考：

*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)
*   [Google Closure 库工程师了解 DOM 元素何时可以使用](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)

* * *

关于您的评论的旁注：

> 每个模板都有不同的 js 代码部分——创建指向 .js 文件的外部链接将禁用添加 PHP 标记的可能性，所以我必须找到另一种方法。

理想情况下，尝试找到一种方法来只加载一个文件而不是一堆文件。每个 HTTP 请求都有大量开销。您将在上面的第一个链接中看到的建议之一是尽量减少 HTTP 请求的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:39:21.477

只要在您在页面上调用它之前包含了 javascript 代码，它在头部还是在正文的上半部分应该没有什么区别。如果您正在构建一个公共标头，最好将其分开。这样，您就不会调用未使用的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:38:31.167

事实上，将它放在顶部会降低性能，并且放置它是一个冒险的地方：

就在结束正文标记之前

[http://developer.yahoo.com/performance/rules.html#js_bottom](http://developer.yahoo.com/performance/rules.html#js_bottom)

> **将脚本放在底部** 标签：javascript 脚本导致的问题是它们阻止了并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。在某些情况下，将脚本移到底部并不容易。例如，如果脚本使用 document.write 插入部分页面内容，则不能将其移至页面下方。也可能存在范围问题。在许多情况下，有一些方法可以解决这些情况。经常出现的另一种建议是使用延迟脚本。DEFER 属性指示脚本不包含 document.write，并且是浏览器可以继续呈现的线索。不幸的是，Firefox 不支持 DEFER 属性。在 Internet Explorer 中，脚本可能会被延迟，但不会像期望的那样延迟。如果可以推迟脚本，也可以将其移至页面底部。这将使您的网页加载速度更快。

# spring - 使用 Spring MVC 检查用户订阅试用期是否过期

> ID：15206370
> 
> 赞同：2
> 
> 时间：2013-03-04T16:35:03.170
> 
> 标签：spring, spring-mvc, spring-security

我正在使用 spring MVC 并想检查用户的试用期是否已过期。

我正在使用以下方法使用 Spring Security 获取用户详细信息

```
 public User getUserDetail() {
    Authentication auth = SecurityContextHolder.getContext()
            .getAuthentication();   
    Object principal = auth.getPrincipal();
        if(principal instanceof User){
            User user = (User) principal;               
            return user;
        }
        return null;
} 
```

用户对象包含他第一次登录的日期。

我正在使用以下代码检查用户订阅

```
 UserBean userLoggedIn = (UserBean) userService.getUserDetail();

    Date dt =  userLoggedIn.getUserCreationDate();

    DateTime userCreated =  new DateTime(dt).plusDays(TRIAL_PERIOD);

    DateTime currentDateTime = new DateTime();

    if(currentDateTime.compareTo(userCreated) > 0 && userLoggedIn.getPackageType() == 0){
        return new ModelAndView("pricing","user",userLoggedIn);
    } 
```

现在我的问题是我不想在每个控制器中重复编写上面的代码。那么有什么常见的地方可以让我检查用户试用期是否到期并将他重定向到定价页面。

我有 CustomUserDetail 类，我在其中从数据库访问用户详细信息并将其放入 spring 安全会话中。所以我认为这应该是检查用户试用期是否到期的最佳地点，但我不知道如何将用户从此类重定向到定价页面。

我的 CustomUserDetail 类是

```
 @Service
  @Transactional(readOnly = true)
 public class CustomUserDetailsService implements UserDetailsService {

static final Logger logger = Logger.getLogger(CustomUserDetailsService.class);

@Resource(name="userService")
private UserService userService;

/* (non-Javadoc)
 * @see org.springframework.security.core.userdetails.UserDetailsService#loadUserByUsername(java.lang.String)
 */
@Override
public UserDetails loadUserByUsername(String email)
        throws UsernameNotFoundException, DataAccessException {
        try {

            boolean enabled = true;
            boolean accountNonExpired = true;
            boolean credentialsNonExpired = true;
            boolean accountNonLocked = true;

            UserBean domainUser = userService.getUserByName(email);     

            domainUser.isEnabled();
            domainUser.isAccountNonExpired();
            domainUser.isCredentialsNonExpired();
            domainUser.isAccountNonLocked();

    //Collection<? extends GrantedAuthority> roles =  getAuthorities((long) domainUser.getRoleId());

    return domainUser;

    } catch (Exception e) {
        logger.error("Invalid Login.",e);
        throw new RuntimeException(e);
    }
} 
```

**- -更新 - -**

我的 spring-security.xml 是

```
 <form-login login-page="/login.htm" 
                authentication-failure-url="/loginfailed.htm"
                authentication-failure-handler-ref="exceptionMapper"
                default-target-url="/index.htm" 
                always-use-default-target="true"/>

    <access-denied-handler error-page="/logout.htm"/>

    <logout invalidate-session="true" 
        logout-url="/logout.htm"
        success-handler-ref="userController"/>
 <remember-me user-service-ref="customUserDetailsService" key="89dqj219dn910lsAc12" use-secure-cookie="true"  token-validity-seconds="466560000"/>
 <session-management session-authentication-strategy-ref="sas"/>
</http>

<authentication-manager>
        <authentication-provider user-service-ref="customUserDetailsService">
                <password-encoder ref="customEnocdePassword" >
                    <salt-source user-property="email"/>
                </password-encoder>
        </authentication-provider>
</authentication-manager>   
<beans:bean id="customEnocdePassword" class="com.mycom.myproj.utility.CustomEnocdePassword" />

<beans:bean id="exceptionMapper" class="org.springframework.security.web.authentication.ExceptionMappingAuthenticationFailureHandler" >
<beans:property name="exceptionMappings">
    <beans:map>
        <beans:entry key="your.package.TrialPeriodExpiredException" value="/pricing"/>
    </beans:map>
</beans:property>
</beans:bean>

<beans:bean id="sas"
  class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
<beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
<beans:property name="maximumSessions" value="3" /> 
```

**- -更新 - -**

现在我所做的是

```
 <beans:bean id="authenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <beans:property name="userDetailsService" ref="customUserDetailsService"/>
    <beans:property name="passwordEncoder" ref="customEnocdePassword"/>
    <beans:property name="preAuthenticationChecks" ref="expirationChecker"/>
</beans:bean>

<authentication-manager>
    <authentication-provider user-service-ref="authenticationProvider">
        <password-encoder ref="customEnocdePassword" >
               <salt-source user-property="email"/>
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<!-- <authentication-manager>
        <authentication-provider user-service-ref="customUserDetailsService">
                <password-encoder ref="customEnocdePassword" >
                    <salt-source user-property="email"/>
                </password-encoder>
        </authentication-provider>
</authentication-manager> -->
<beans:bean id="expirationChecker" class="com.mycom.myproj.utility.UserTrialPeriodExpirationChecker" />
<beans:bean id="customEnocdePassword" class="com.mycom.myproj.utility.CustomEnocdePassword" /> 
```

现在我得到以下错误

```
 "Cannot convert value of type [org.springframework.security.authentication.dao.DaoAuthenticationProvider]
to required type [org.springframework.security.core.userdetails.UserDetailsService] 
for property 'userDetailsService': no matching editors or conversion strategy found" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:46:06.620

您可以在对用户进行身份验证之前验证到期日期的自定义`UserDetailsChecker`设置`DaoAuthenticationProvider`。

配置中的`<authentication-provider>`元素会生成一个`DaoAuthenticationProvider`，但该元素上没有允许您设置其属性的`preAuthenticationChecks`属性。为了解决命名空间配置的这个限制，您必须回退到将该提供程序定义为普通 bean：

```
<bean id="authenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <property name="userDetailsService" ref="customUserDetailsService"/>
    <property name="passwordEncoder" ref="customEnocdePassword"/>
    <property name="preAuthenticationChecks" ref="expirationChecker"/>
</bean> 
```

并通过配置中的 id 引用它`<authentication-manager>`：

```
<security:authentication-manager>
    <security:authentication-provider ref="authenticationProvider"/>
</security:authentication-manager> 
```

上面引用的`expirationChecker`bean 必须实现`UserDetailsChecker`一个接收对象的回调接口`UserDetails`，如果用户的试用期已过期，您可以在其中抛出特定异常：

```
public class UserTrialPeriodExpirationChecker implements UserDetailsChecker {
    @Override
    public void check(UserDetails user) {
        if( /* whatever way you check expiration */ ) {
            throw new TrialPeriodExpiredException();
        }

        if (!user.isAccountNonLocked()) {
            throw new LockedException("User account is locked");
        }

        if (!user.isEnabled()) {
            throw new DisabledException("User is disabled");
        }

        if (!user.isAccountNonExpired()) {
            throw new AccountExpiredException("User account has expired");
        }
    }
} 
```

请注意，最后三个检查与过期检查无关，但您必须在此处拥有它们，因为默认实现（即`AbstractUserDetailsAuthenticationProvider.DefaultPreAuthenticationChecks`）现在已被此类覆盖。由于默认实现是私有内部类，您不能简单地扩展它，而是需要从那里复制代码以防止锁定/禁用/等。用户从登录。

一切就绪后，配置一个`ExceptionMappingAuthenticationFailureHandler`将您映射`TrialPeriodExpiredException`到用户应该登陆的定价页面的 URL。

```
<form-login authentication-failure-handler-ref="exceptionMapper" ... />

...

<bean id="exceptionMapper" class="org.springframework.security.web.authentication.ExceptionMappingAuthenticationFailureHandler" >
    <property name="exceptionMappings">
        <map>
            <entry key="your.package.TrialPeriodExpiredException" value="/pricing"/>
        </map>
    </property>
</bean> 
```

# iis - 在 Windows Server 2012 中安装 TFS 2010 时出错

> ID：15206380
> 
> 赞同：2
> 
> 时间：2013-03-04T16:35:17.847
> 
> 标签：iis, windows-server-2012

当我尝试在 Windows Server 2012 上安装 Team Foundation Server 2010 时，出现以下错误：

*   错误 [应用程序层] TF255120：未启用 Internet 信息服务 (IIS) 6.0 的兼容模式。Team Foundation Server 在此操作系统上需要此功能。

*   错误 [应用程序层] TF255456：您必须配置 Internet 信息服务 (IIS) 才能使用静态内容组件。Team Foundation Server 需要 IIS 中的静态内容组件。

*   错误 [应用程序层] TF255397：Windows 身份验证尚未配置为 Internet 信息服务 (IIS) 中的角色服务。Team Foundation Server 要求将 Windows 身份验证安装为 IIS 中的角色服务之一。

*   错误 [应用程序层] TF255397：Windows 身份验证尚未配置为 Internet 信息服务 (IIS) 中的角色服务。Team Foundation Server 要求将 Windows 身份验证安装为 IIS 中的角色服务之一。

*   错误 [应用程序层] TF255397：Windows 身份验证尚未配置为 Internet 信息服务 (IIS) 中的角色服务。Team Foundation Server 要求将 Windows 身份验证安装为 IIS 中的角色服务之一。

我在 ISS 中找不到设置

# jquery - 滑动页面过渡，如 http://imakewebthings.com/jquery-waypoints

> ID：15206384
> 
> 赞同：0
> 
> 时间：2013-03-04T16:35:25.377
> 
> 标签：jquery, css, css-transitions, jquery-waypoints

今天我偶然发现了这个网站： http: [//imakewebthings.com/jquery-waypoints](http://imakewebthings.com/jquery-waypoints) 我喜欢当你点击顶部菜单时他们进行页面转换的方式。它似乎移动了整个身体，而不仅仅是我以前见过的一些 div。

我想知道他们是如何做到的，或者是否有任何现成的 jquery 插件？预先感谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:45:28.710

这是一组`div`s*移动*。不是全身。如果您对滚动条感到困惑并认为是页面在移动，则可以`overflow:scroll`在每个`div`组中使用 css 来完成。

# macos - Mac 上的 Firefox 19 和 Arial Narrow

> ID：15206392
> 
> 赞同：1
> 
> 时间：2013-03-04T16:35:38.833
> 
> 标签：macos, firefox, fonts

我无法弄清楚为什么 Arial Narrow 对 mac 上的某些 Firefox 用户而不是其他用户正确显示。这是链接：[http](http://teknikor.bethmotta.com/) ://teknikor.bethmotta.com/ （见导航字体）

我的代码是：

```
font-family: "Arial Narrow", Arial  sans-serif; font-weight:500; 
font-stretch:condensed; 
```

我什至尝试添加字体重置：

```
font-family: inherit; font-stretch:inherit; font-style:inherit;
font-family: "Arial Narrow", Arial  sans-serif; font-weight:500; 
font-stretch:condensed; 
```

我试图专门针对 Firefox：

```
@media screen and (-webkit-min-device-pixel-ratio:0){
ul.navcontainer li {
font-family: inherit; font-stretch:inherit; font-style:inherit; 
font-family:"Arial Narrow", Arial, Helvetica, sans-serif; font-stretch:condensed;}  
} 
```

我不确定为什么它适用于某些 Firefox mac 用户而不适用于其他用户。所有测试的计算机都运行 Firefox 19。在 Arial Narrow 不工作的计算机中，字体默认为 Times not Arial。

我确实注意到在正确显示的计算机上，Arial Narrow 安装在用户库和系统库中。在我看到 Times 的计算机上，Arial Narrow 仅在系统库中，而不是用户库中……但是，Arial 都安装在两者中，那么为什么导航默认为 Times？

一般来说，Firefox 是针对 mac 用户库还是系统库中的字体？

关于如何解决这个问题的任何其他建议？我错过了一些简单的东西吗？

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:10:28.563

好的，如果有人感兴趣，我想出了一些东西。我在样式表中添加了小写的“arial”，Firefox 默认使用 arial 而不是 Times。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:00:47.180

您可以尝试以下 CSS3 规则：

```
@font-face { font-family: Arial Narrow;
src: url('ArialN.ttf'),
     url('ArialN.eot'); /* IE9+ */ 
```

要使其工作，您需要**将字体文件（！）包含**到相应的文件夹中。

使用示例：

```
<!DOCTYPE html>
<html>
<head>
<style> 
@font-face { font-family: Arial Narrow;
    src: url('ArialN.ttf'),
         url('ArialN.eot'); /* IE9+ */
}
div{font-family:Arial Narrow;}
</style>
</head>
<body>

<div>
With CSS3, websites can finally use fonts other than the pre-selected "web-safe" fonts.
</div>

<p><b>Note:</b> Internet Explorer 9+ only supports fonts of type .eot. Internet Explorer 8 and earlier, do not support the new @font-face rule.</p>

</body>
</html> 
```

# ios - App Store 中禁止的音频/视频格式/编解码器

> ID：15206393
> 
> 赞同：1
> 
> 时间：2013-03-04T16:35:40.453
> 
> 标签：ios, audio, video, codec

App Store 禁止使用哪些音频/视频格式/编解码器？我只知道一个-aac。还有其他禁止的格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:55:42.877

我的印象是“较少支持”的格式实际上是 AC3 (aka A/52) 和其他[杜比编解码器](http://en.wikipedia.org/wiki/Dolby_AC-3)。

> “*由于杜比 (?) 的高额许可费用，几乎所有适用于 iOS 的视频播放器应用程序都删除了****AC3、E-AC3 和 TrueHD***支持”（通过[技术提示](http://iermolenko.wordpress.com/2012/12/19/ac3-e-ac3-and-truehd-support-has-been-removed-in-almost-all-video-player-apps-for-ios-due-to-high-licensing/)）

 *似乎 Cineplayer 是唯一获得这些编解码器许可的播放器。

不支持 AC3 的播放器：[It's Playing](http://www.itsplayingapp.com/faq.html#drawer_faqAudioPlayback)、OPlayer、[GoodPlayer](http://forums.macrumors.com/showpost.php?p=16260588&postcount=792)、AcePlayer、BuzzPlayer。（此处的链接指向应用发布者的评论）。

[AAC](http://en.wikipedia.org/wiki/Aac#iTunes_and_iPod)是[首选的替代编解码器](http://www.iphonelife.com/blog/87/tutorial-adding-future-proof-aac-audio-ac-3-only-video-files)。

抱歉，我无法快速找到与 IOS 相关的新闻稿，但我一路读到[黑莓选择](http://crackberry.com/rim-settles-patent-lawsuit-dolby-agrees-pay-royalties)在 2011 年以大约 1500 万美元的价格获得 AC3 的许可。我不认为许可证仍然是最新的。*

# c# - C# WinForms 以编程方式添加控件

> ID：15206396
> 
> 赞同：0
> 
> 时间：2013-03-04T16:35:43.417
> 
> 标签：c#, winforms, user-controls

有人可以建议实现我的目标的最佳方法吗？

所以，我有一个带有三个按钮的表单。我想要的是，根据面板上按下的按钮应该显示不同的控件（用户控件）。我以一种简单的方式做到了这一点：所有内容都是从一开始就添加的，我只是对可见性进行了更改。但是，如果有人可以提出更合适的方法，那就太好了，因为不需要从头开始创建对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:38:41.940

您始终可以创建适当的`UserControl`，并在运行时将其添加到[Panel.Controls](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)中。这将允许您根据需要创建控件，而不是在初始化表单时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:39:55.060

我确实会在设计时创建控件 - 如果动态创建它们没有优势的话。为什么要把事情复杂化？

如果有许多控件，我会将它们全部放在一个面板中（在您已经提到的面板中），因此您只需更改单个控件（面板）的可见性，而不是其中的每个控件。

当您按下相应的按钮时，显示相应的面板（并记住隐藏其他面板，以防您之前显示过它们）

# excel - 使用过滤器定义 Excel 宏范围

> ID：15206397
> 
> 赞同：0
> 
> 时间：2013-03-04T16:35:44.910
> 
> 标签：excel, vba

首先，我承认我对在 excel 中编写宏几乎一无所知。我设法通过拼凑来自其他各种帖子的其他宏来创建下面的宏。

下面的宏有效，但我需要它来做一件事，但我无法弄清楚。

基本上，宏的作用是允许用户选择一个文件夹位置，然后浏览一列并选择该列每一行中包含的链接，然后将该链接另一端的文件保存到所选文件夹路径具有定义的命名格式。

唯一我想不通的是，当我对 excel 表单应用过滤器时，它仍然会抓取所有文件，无论它们是否可见。

当前宏：

```
*Private Declare PtrSafe Function URLDownloadToFile Lib "urlmon" Alias _
  "URLDownloadToFileA" (ByVal pCaller As Long, ByVal szURL As String, ByVal _
    szFileName As String, ByVal dwReserved As Long, ByVal lpfnCB As Long) As Long
Sub Button1_Click()
Dim intranetLink As String
Dim mainBook As Workbook
Dim Counter As Integer
Dim saveDialog As FileDialog
Dim savePath As String
Dim filename As String
Counter = 4

    Set saveDialog = Application.FileDialog(msoFileDialogFolderPicker)
    With saveDialog
        .Title = "Select a Folder"              'sticks a title on the dialog so the user kind of knows what they're supposed to be doing
        .AllowMultiSelect = False               'prevents the user from selecting more than one item out the dialog.
        .InitialFileName = strPath              '
        If .Show <> -1 Then GoTo FolderBombed   'if the user does something funky or cancels, abort the rest of the macro.
        savePath = .SelectedItems(1)            'get the file path to the selected folder
    End With

    For Each vCell In Range("J4:J" & Cells(Rows.Count, "J").End(xlUp).Row)
    intranetLink = vCell.Text
    filename = Cells(Counter, 6)
        filename = "c:\Path\" + filename
        URLDownloadToFile 0, intranetLink, filename, 0, 0
        Counter = Counter + 1
    Next vCell

FolderBombed:
        MsgBox ("Completed")
End Sub* 
```

我需要修改的行如下：

```
 For Each vCell In Range("J4:J" & Cells(Rows.Count, "J").End(xlUp).Row) 
```

我试过把它改成这样：

```
For Each vCell In Range("J4:J" & Cells(Rows.Count, "J").CurrentRegion.SpecialCells(xlVisible).End(xlUp).Row). 
```

但这所做的只是选择一个被过滤掉的文件。

将不胜感激任何有助于做到这一点的帮助。

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:29:51.720

使用这个 - 循环遍历单元格并检查每个单元格：

```
For Each vCell In Range("J4:J" & Cells(Rows.Count, "J").End(xlUp).Row)
    If not vCell.EntireRow.Hidden Then
    [...] 
```

# internet-explorer-8 - KnockoutJS 与 IE8，Stringify 偶尔出现问题？

> ID：15206398
> 
> 赞同：6
> 
> 时间：2013-03-04T16:35:46.117
> 
> 标签：internet-explorer-8, knockout.js, stringify

我们的许多用户仍在使用 IE8。他们中的一些人在尝试将数据发布到我们的服务器时偶尔会报告问题（通过标有“保存”的大按钮）。

IE8显示有一个脚本错误，即：*Unexpected call to method or property access*，始终指向KnockoutJS 2.2.0 (debug, for now)库中的同一行，第450行，如下：

```
return JSON.stringify(ko.utils.unwrapObservable(data), replacer, space); 
```

我的代码中发生这种情况的堆栈跟踪根的方法是：

```
self.saveSingle = function (onSuccess, onFailure) {
        ko.utils.arrayForEach(self.days(), function (day) {
            day.close();
        });
        var jsonData = ko.toJSON(self);
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: applicationLocation + "/api/assignmentapi/save",
            data: jsonData,
            success: function (data) {
                self.status(data.Status);
                self._isDirty(false);
                ko.utils.arrayForEach(self.days(), function (day) {
                    day.clean();
                });
                if (onSuccess)
                    onSuccess();
            },
            error: function (data) {
                onFailure();
            },
            dataType: "json"
        });
    }; 
```

当我们使用这种方法将对象转换为 JSON 时，我们确实去除了一些 POST 不需要的属性：[http ://www.knockmeout.net/2011/04/controlling-how-object-is-converted -to.html](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html)

```
OurType.prototype.toJSON = function () {
    var copy = ko.toJS(this);

    delete copy.someUnneededProperty1;
    delete copy.someUnneededProperty2;
    delete copy.someUnneededProperty3;
    delete copy.someUnneededProperty4;

    return copy;
} 
```

*当*它失败时，它始终在线上失败

```
var jsonData = ko.toJSON(self); 
```

现在真正的混乱来了：

1.  它并非始终如一地发生
2.  并非所有 IE8 用户都会发生这种情况
3.  我们无法始终如一地重现它
4.  我们正在序列化的模型的结构似乎并不重要
5.  jscript.dll 是 IE8 的当前版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T07:23:13.487

我也遇到了这个问题。深入挖掘我发现了一些东西：

*   它只是偶尔失败，我通过在控制台中运行代码发现了这一点 ![在此处输入图像描述](../Images/6c43695793f3f87a4aec12e76e1285b4.png)
*   中的代码引发了异常，除了由于 IE8 在使用块（不带）`data-bind`时吞噬了消息而导致消息被吞下。`try {} finally {}``catch`
*   删除尝试最终显示无法解析绑定消息。

当我开始接近解决问题（深入挖掘淘汰代码）时，它似乎在我眼前消失了。这是它失败的代码部分，在代码末尾捕获异常：

```
ko.utils.extend(ko.bindingProvider.prototype, {
    'nodeHasBindings': function(node) {
        switch (node.nodeType) {
            case 1: return node.getAttribute(defaultBindingAttributeName) != null;   // Element
            case 8: return ko.virtualElements.virtualNodeBindingValue(node) != null; // Comment node
            default: return false;
        }
    },

    'getBindings': function(node, bindingContext) {
        var bindingsString = this['getBindingsString'](node, bindingContext);
        return bindingsString ? this['parseBindingsString'](bindingsString, bindingContext, node) : null;
    },

    // The following function is only used internally by this default provider.
    // It's not part of the interface definition for a general binding provider.
    'getBindingsString': function(node, bindingContext) {
        switch (node.nodeType) {
            case 1: return node.getAttribute(defaultBindingAttributeName);   // Element
            case 8: return ko.virtualElements.virtualNodeBindingValue(node); // Comment node
            default: return null;
        }
    },

    // The following function is only used internally by this default provider.
    // It's not part of the interface definition for a general binding provider.
    'parseBindingsString': function(bindingsString, bindingContext, node) {
        try {
            var bindingFunction = createBindingsStringEvaluatorViaCache(bindingsString, this.bindingCache);
            return bindingFunction(bindingContext, node);
        } catch (ex) {
            throw new Error("Unable to parse bindings.\nMessage: " + ex + ";\nBindings value: " + bindingsString);
        }
    }
}); 
```

但是，是的，它不再是可重现的了，所以我想出了一个我之前测试和工作的 hack，只是重试数据解析。所以这：

```
data-bind="value: ko.computed(function(){return ko.toJSON(appViewModel.model()[0])})" 
```

变成了这样：

```
data-bind="value: ko.computed(function(){while (true) { try { var json = ko.toJSON(appViewModel.model()[0]); return json; }catch(e){}}})" 
```

是的，这很糟糕，但它似乎可以解决问题，直到我们的用户不再需要 IE8 或修复了 Knockout 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:40:33.470

我不知道这是否会解决它，但您可以使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)在 JS 和 JSON 之间切换：

```
var mapping = {
    'ignore': ["propertyToIgnore", "alsoIgnoreThis"]
}
var viewModel = ko.mapping.toJS(data, mapping); 
```

取自我[对这个问题的回答](https://stackoverflow.com/questions/14988220/how-to-exclude-certain-properties-from-knockoutjs-tojs/14988353#14988353)

我会尝试一下，看看它是否有帮助，因为你的方法没有明显的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:46:48.573

你确定是 IE8 用户遇到了这个问题吗？[IE7 不支持 JSON.stringify](https://stackoverflow.com/questions/3326893/is-json-stringify-supported-by-ie-8)。您需要包含[json2.js 库](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)以支持 IE7 及更低版本。

# iphone - 具有多个视图控制器的方向

> ID：15206402
> 
> 赞同：0
> 
> 时间：2013-03-04T16:35:54.823
> 
> 标签：iphone, ios, objective-c, ios6

是否有可能拥有以下内容？

当我旋转我的 iOS 设备时，ViewController 会切换，就像我有 RandomViewControllerPortrait 和 RandomViewControllerLandscape 一样。我有一种感觉，如果我支持这两个方向，ViewController 类会变得相当“臃肿”。

这个想法有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:45:22.090

我认为有 2 个视图控制器用于不同的旋转会有点多余。我认为您要使用的是针对不同方向的 2 个不同的 UIView，并且您的 UIViewController 处理被调用的旋转方法。当您的应用程序旋转时，您可以将 self.view 设置为 PortraitView 或 LandscapeView。您甚至可以使用动画块为视图更改设置动画，因此过渡看起来更平滑。

# webforms - 我的 ASP.NET 4.5 WebForms 项目中这些额外的 javascript 文件是什么？

> ID：15206403
> 
> 赞同：6
> 
> 时间：2013-03-04T16:35:59.900
> 
> 标签：webforms, asp.net-4.5

我创建了一个新的 ASP.NET 4.5 WebForms 项目，发现了一堆与 GridView、DetailsView 和其他数据相关组件以及 MSAjax 相关的额外 javascript 文件。我认为它们是为了帮助处理数据组件的 AJAX，但我不知道如何使用它们。

我几乎阅读了所有 ASP.net 公告，但没有听说过有关这些文件的任何信息，并且搜索了 Google，也没有找到任何东西。

![Visual Studio 中脚本文件夹的屏幕截图](../Images/8a2e97e2802dc08033f5d19e82eec4aa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:50:47.830

这些文件属于 Microsoft Ajax Library，它是一个类似于 jQuery 的工具集合。MSDN 是这样描述的：

“Microsoft Ajax 功能使您能够快速创建提供丰富用户体验并包含响应式和熟悉的用户界面 (UI) 元素的 Web 页面。Microsoft Ajax 包括**包含**跨浏览器 ECMAScript (JavaScript) 和动态 HTML ( DHTML) 技术。通过使用 Microsoft Ajax，您可以提高 Web 应用程序的用户体验和效率。

您可以在此处查看参考：[Microsoft Ajax](https://msdn.microsoft.com/en-us/library/vstudio/ee341002%28v=vs.100%29.aspx)

# javascript - 从 HTML 生成 Emmet 代码 - 反向操作

> ID：15206411
> 
> 赞同：5
> 
> 时间：2013-03-04T16:36:16.450
> 
> 标签：javascript, emmet

我说的是 Emmet.io（前 Zen Coding）。

是否有反向执行此操作的 JavaScript 代码或 jQuery 插件？

例子：

```
emmet('ul > li*3') => '<ul><li></li><li></li><li></li></ul>' 
```

我想要这样的东西：

```
emmet('<ul><li></li><li></li><li></li></ul>') => 'ul > li*3' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-16T16:10:14.813

HTML.js 是您正在寻找的
[http://nbubna.github.io/HTML/](http://nbubna.github.io/HTML/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:51:06.980

我们有 Sizzle 选择器。我`.size()`想我们也许可以实现它。

检查这个问题（看起来很相似）：*[Reverse Zen Coding](https://stackoverflow.com/questions/4864261/reverse-zen-coding)*。

# c++ - 如何打印 R、G 和 B 矩阵

> ID：15206419
> 
> 赞同：0
> 
> 时间：2013-03-04T16:36:37.757
> 
> 标签：c++, visual-studio-2010, qt, opencv

我有以下代码，我的频道数是 3

```
IplImage* img_crop_mat = cvLoadImage("....", 1);
...
int b = 0;
uchar* rgb = (uchar*) img_crop_mat->imageData; 
```

我想在一个循环中使用`R`,`G`和`B`矩阵，浏览整个图像：

```
for (int y = b; y < height - b; y++)
{    
    ???
    for (int x = b; x < width - b; x++)
    {
        ????
    }
} 
```

以前关于我的问题的论坛处理 CvMat，但没有将指针作为我的代码。

我必须考虑哪些指标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:49:56.767

您可以使用以下宏访问 3 通道 8U 图像的任意像素：

```
CV_IMAGE_ELEM(myImage, unsigned char, y, x*3 + ChannelOfInterest) 
```

这是一个左值，因此您可以获取并使用它的值，或者您可以更改像素的值。

默认，

```
ChannelOfInterest = 0, blue
ChannelOfInterest = 1, green
ChannelOfInterest = 2, red 
```

实际的数据结构非常简单，查看 CV_IMAGE_ELEM 的定义。

# objective-c - 唯一标识应用程序并在由多个应用程序共享的文件中包含检查

> ID：15206420
> 
> 赞同：0
> 
> 时间：2013-03-04T16:36:38.310
> 
> 标签：objective-c, xcode, ipad

我有两个 iPad 应用程序，并且有一个共同项目使用了这两个应用程序。为了实现 UI 的特定任务，我需要处理正在共享的 Common 项目中的文件。但是，当我处理我的两个应用程序共享的那个项目中的这个文件时，我必须检查正在运行的应用程序并进行适当的更改。如果第一个应用程序当前正在运行，那么我应该执行一个函数，如果第二个应用程序正在运行，我不应该执行这个函数。有没有办法检查哪个应用程序正在运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:49:04.187

真的有必要在运行时这样做吗？您可以像这样使用预处理器宏：

```
//Somewhere, e.g in a config file, that is not shared by your applications
#define PROJECT_A

//In your shared file.
#ifdef PROJECT_A
//Specific code goes here
#endif 
```

否则，您可以使用捆绑标识符，然后将其与应用程序的标识符进行比较。

```
if ([[[NSBundle mainBundle] infoDictionary] valueForKey:@"CFBundleIdentifier"] isEqualToString:@"Your bundle identifier"]) {
    //Specific code goes here
} 
```

# android - onCreateView“调用自己”

> ID：15206429
> 
> 赞同：0
> 
> 时间：2013-03-04T16:37:09.120
> 
> 标签：android

我正在尝试使用 2 个片段、一排按钮和一个列表片段启动一个应用程序，但是当我启动它时，应用程序的 onCreateView 被调用，调用 getLayoutInflator 来获取一个布局充气器。这反过来又调用了 inflate，被传递给 int 根布局文件的名称。在这段代码中 onCreateView 被再次调用，导致无限递归。这是代码

```
@Override 
public View onCreateView(String name, Context context, AttributeSet attrSet) {
    Log.i(TAG, "onCreateView, name = " + name + " context " + context + " AttributeSet = " + attrSet);
    View v = null; //super.onCreateView(name, context, attrSet);
    try {
        LayoutInflater inflater = getLayoutInflater();
        v = inflater.inflate(R.layout.activity_shop2_drop,null);
        Log.i(TAG,"passed to LayoutInflater: " + R.layout.activity_shop2_drop);
    }
    catch(Exception e) {
        Log.e(TAG, "onCreateView failed: " + e.getMessage());
    }
    return v;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:50:27.097

这里的问题是我调用了 Fragment.onCreateView 并传入了包含视图的 id。这个包含视图是视图本身，因此代码自然会尝试将我的代码附加到它认为是包含视图的内容上，即它本身。因此无限递归。另一个问题是，膨胀代码在看到 activity_shop2_drop.xml 中的“fragment”标签时会返回 ClassNotFoundException，因此永远不会在片段上调用“onCreateView”。我还没有解决这个问题。这是 activity_shop2_drop.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?> 
    <LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/whole_app_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

    <fragment
        class="com.victorpreston.shop2drop.S2DButtonFragment"
        android:id="@+id/buttonFragmetLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
    <fragment
        class="com.victorpreston.shop2drop.S2DListFragment"
        android:id="@+id/listFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

这是button_fragment_layout.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/buttonFragmentLayout"
    android:layout_width="match_parent"
    android:layout_height="40dip"
    android:orientation="horizontal">

    <Button
        android:id="@+id/newItemButton"
        android:layout_width="0dip"
        android:layout_height="40dip"
        android:layout_weight="1"
        android:text="@string/newColumnButton" />

    <Button
        android:id="@+id/newColumnButton"
        android:layout_width="0dip"
        android:layout_height="40dip"
        android:layout_weight="1"
        android:text="@string/newItemButton" />

    <Button
        android:id="@+id/exitButton"
        android:layout_width="0dip"
        android:layout_height="40dip"
        android:layout_weight="1"
        android:text="@string/exitButton" />
    </LinearLayout> 
```

请注意，它们都创建和使用相同的 id。我尝试改变它，它没有任何区别，所以我认为这不是问题。

# iphone - ViewController 类型名称在一个类中无法识别，但在另一个类中？

> ID：15206437
> 
> 赞同：5
> 
> 时间：2013-03-04T16:37:25.670
> 
> 标签：iphone, ios, objective-c, nsoperation

当我尝试构建我的项目时，我在 XCode 中遇到构建语义错误。我`NSOperation`设置了 3 个类来从 Internet 下载信息，对其进行处理，并将其发送到父视图控制器，即`ViewController`. 这是工人阶级的代码：

```
#import <Foundation/Foundation.h>
#import "ViewController.h"

@interface ImageGetter : NSOperation

@property (nonatomic) int sid;
@property (nonatomic, retain) ViewController* pvc;

@end 
```

这是*不*工作的代码：

```
#import <Foundation/Foundation.h>
#import "ViewController.h"

@interface CurrentGetter : NSOperation

@property (nonatomic) int sid;
@property (nonatomic, retain) ViewController* pvc;

@end 
```

错误：

```
ERROR: Unknown type name 'ViewController'; did you mean 'UIViewController'? 
```

为什么我会收到此错误？我在两个文件中都导入了 ViewController.h，只有一个在工作。

视图控制器.h：

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <MediaPlayer/MediaPlayer.h>

#import "DataGetter.h"
#import "CurrentGetter.h"
#import "AppDelegate.h"

@interface ViewController : UIViewController <UITabBarDelegate>
{
    NSTimer* tmr;
}

@property (nonatomic) float max;
@property (nonatomic, retain) NSDictionary* plist;
@property (nonatomic, retain) NSArray* processingobj;

@property (nonatomic, retain) AVAudioPlayer* intro;
@property (nonatomic, retain) AVAudioPlayer* woop;

@property (nonatomic) float dataDone;
@property (nonatomic) BOOL introDone;
@property (nonatomic) BOOL currentDone;

@property (nonatomic) int newSid;
@property (nonatomic) int newPart;

@property (nonatomic, retain) NSMutableArray* views;

@property (nonatomic) int audioTab;
@property (nonatomic) int currentSid;
@property (nonatomic) BOOL isPlaying;

@property (nonatomic, retain) UIScrollView* partTab;
@property (nonatomic, retain) NSMutableArray* nowPlayingObj;
@property (nonatomic, retain) UINavigationBar* audioNav;

@property (nonatomic, retain) MPMoviePlayerController* player;
@property (nonatomic, retain) UILabel* elapsed;
@property (nonatomic, retain) UILabel* remaining;
@property (nonatomic, retain) UISlider* slider;
@property (nonatomic) BOOL sliderEditing;
@property (nonatomic, retain) UIButton* playBtn;

@property (nonatomic, retain) UITabBar* tabBar;

//Images

@property (nonatomic, retain) UIImage* announcement;
@property (nonatomic, retain) NSMutableArray* seriesBanners;
@property (nonatomic, retain) UIProgressView* prog;

- (void)plistDone;

@end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T16:44:28.960

尝试在 CurrentGetter 头文件中对类进行前向声明，如下所示：

```
@class ViewController;
@interface CurrentGetter : NSOperation 
```

这告诉编译器存在一个名为“ViewController”的类。当存在循环依赖时，例如当两个类具有彼此的实例时，使用类的前向声明可以解决由此产生的混乱。

# linux - 如何在运行 Linux 的 PowerPC CPU 上保留 RAM？

> ID：15206439
> 
> 赞同：-2
> 
> 时间：2013-03-04T16:37:28.983
> 
> 标签：linux, memory, embedded, powerpc, u-boot

我试图在使用 Canyonlands (PowerPC-460EX) CPU 的嵌入式单板计算机上从 2GB 板载 RAM 中保留 10MB。通过保留 RAM，我的意思是阻止 Linux 不会触及的一大块 RAM，以便在热重启时保留数据。我正在使用 U-Boot 引导程序，我尝试了以下方法：

1) 在 bootargs 环境变量中设置 mem=2038M 2) 在 U-Boot 中设置 'pram' 环境变量，然后在 bootargs 中设置 mem=\${mem}

两种方法都无法更改 Linux 看到的 RAM。我正在查看 /proc/meminfo 以了解 Linux 认为有多少 RAM 可用。在这两种情况下，/proc/meminfo 都会看到 2074876 kB 的可用 RAM（略低于 2GB）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:44:07.587

我没有足够的评论点，但这里有一些线索：

1) 检查您的 mem 参数是否正确传递给内核。[按照此处](https://askubuntu.com/questions/32654/how-do-i-find-the-boot-parameters-used-by-the-running-kernel)的建议，您应该可以`cat /proc/cmdline`在启动后使用。

2）尝试在参数周围使用引号，例如“mem = 2038M”。

# ruby - Ruby 和 Excel 数据提取

> ID：15206442
> 
> 赞同：1
> 
> 时间：2013-03-04T16:37:32.773
> 
> 标签：ruby, excel, spreadsheet

我正在学习 Ruby 并尝试操作 Excel 数据。

我的目标：

为了能够从 excel 文件中提取电子邮件地址并将它们放在一个文本文件中，每行一个，并在末尾添加一个逗号。

我的想法：

我认为我的答案在于使用电子表格和 File.new。

我要找的是方向。我想听听任何提示或提示来实现我的目标。谢谢

请不要发布仅寻找方向的确切代码想自己弄清楚...

谢谢，凯伦

更新：：

因此，正则表达式似乎能够找到所有匹配的字符串并将它们存储到一个数组中。我在设置它时遇到了一些麻烦，但应该能够弄清楚......但现在开始我将只提取标有“电子邮件”的列......我现在的问题是：

```
`parse_csv = CSV.parse(read_csv, :headers => true)` 
```

:skip_blanks 的默认值设置为 false .. 我需要将其设置为 true 但我找不到正确的语法来这样做...我假设类似

```
`parse_csv = CSV.parse(read_csv, :headers => true :skip_blanks => true)` 
```

但不是.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:40:47.320

将您的 excel 文件保存为 csv（逗号分隔值）并使用[Ruby 的库](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:38:14.217

除此之外[`spreadsheet`](http://rubygems.org/gems/spreadsheet)（可以读写），你可以用 . 读取 Excel 和其他文件类型[`RemoteTable`](https://github.com/seamusabshere/remote_table)。

```
gem install remote_table 
```

和

```
require 'remote_table'
t = RemoteTable.new('/path/to/file.xlsx', headers: :first_row) 
```

当您编写 CSV 时，正如@aug2uag 所说，您可以使用 ruby​​ 的标准库（无需安装 gem）：

```
require 'csv'
puts [name, email].to_csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:22:17.087

就个人而言，我会尽可能简单并使用`CSV`.

这是一些如何工作的伪代码：

```
read in your file line by line
extract your fields using regex, or cell count (depending on how consistent the email address location is), and insert into an arry
iterate through the array and write the values in the fashion you wish (to console, or file) 
```

您拥有的评论中的代码是一个很好的开始，但是，`puts`只会写入控制台，而不是文件。您还需要弄清楚您将如何知道您正在获取电子邮件地址。

希望这可以帮助。

# c++ - 并行任务使用 boost::thread 比使用 ppl 或 OpenMP 获得更好的性能

> ID：15206446
> 
> 赞同：12
> 
> 时间：2013-03-04T16:38:00.293
> 
> 标签：c++, openmp, boost-thread, ppl

我有一个可以并行化的 C++ 程序。我正在使用 Visual Studio 2010，32 位编译。

简而言之，程序的结构如下

```
#define num_iterations 64 //some number

struct result
{ 
    //some stuff
}

result best_result=initial_bad_result;

for(i=0; i<many_times; i++)
{ 
    result *results[num_iterations];

    for(j=0; j<num_iterations; j++)
    {
        some_computations(results+j);
    }

    // update best_result; 
} 
```

由于每个`some_computations()`都是独立的（读取了一些全局变量，但没有修改全局变量），我并行化了内部`for`循环。

我的第一次尝试是**boost::thread**，

```
 thread_group group;
 for(j=0; j<num_iterations; j++)
 {
     group.create_thread(boost::bind(&some_computation, this, result+j));
 } 
 group.join_all(); 
```

结果很好，但我决定尝试更多。

我尝试了**OpenMP**库

```
 #pragma omp parallel for
 for(j=0; j<num_iterations; j++)
 {
     some_computations(results+j);
 } 
```

结果比`boost::thread`'s'差。

然后我尝试了**ppl**库并使用了`parallel_for()`：

```
 Concurrency::parallel_for(0,num_iterations, [=](int j) { 
     some_computations(results+j);
 }) 
```

结果是最糟糕的。

我发现这种行为非常令人惊讶。由于 OpenMP 和 ppl 是为并行化而设计的，因此我预计会得到比`boost::thread`. 我错了吗？

为什么`boost::thread`给我更好的结果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T16:44:11.017

OpenMP 或 PPL 不做悲观的事情。他们只是按照他们的指示去做，但是当你尝试并行化循环时，你应该考虑一些事情。

如果没有看到你是如何实现这些东西的，很难说真正的原因可能是什么。

此外，如果每次迭代中的操作都依赖于同一循环中的任何其他迭代，那么这将产生争用，从而减慢速度。你还没有展示你的`some_operation`函数实际做了什么，所以很难判断是否存在数据依赖关系。

可以真正并行化的循环必须能够使每次迭代完全独立于所有其他迭代运行，并且在任何迭代中都不会访问共享内存。因此，最好将内容写入局部变量，然后在最后进行复制。

*并非所有*循环都可以并行化，它在很大程度上取决于正在完成的工作类型。

例如，有利于并行化的事情是在屏幕缓冲区的每个像素上完成的工作。每个像素完全独立于所有其他像素，因此，线程可以进行一次循环迭代并完成工作，而无需等待迭代之间循环内的共享内存或数据依赖关系。

此外，如果您有一个连续数组，该数组可能部分位于缓存行中，如果您在线程 A 中编辑元素 5，然后在线程 B 中更改元素 6，则可能会出现缓存争用，这也会减慢速度，因为它们将驻留在同一缓存行中。一种称为*虚假分享*的现象。

在进行循环并行化时需要考虑很多方面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T15:14:48.210

简而言之，`openMP`主要是基于共享内存，具有额外的任务管理和内存管理成本。`ppl`旨在处理常见数据结构和算法的通用模式，它带来了额外的复杂性成本。它们都有额外的 CPU 成本，但你简单的下降`boost`线程没有（`boost`线程只是简单的 API 包装）。这就是为什么它们都比你的`boost`版本慢。并且，由于示例计算彼此独立，没有同步，`openMP`应该接近`boost`版本。

它发生在简单的场景中，但是对于复杂的场景，具有复杂的数据布局和算法，它应该是上下文相关的。

# android - Android ActionBar NullPointerException

> ID：15206447
> 
> 赞同：6
> 
> 时间：2013-03-04T16:38:01.450
> 
> 标签：android, android-actionbar

我想启用 Android ActionBar，但它对我不起作用。

这是我的**MainActivity**：

```
public void onCreate(Bundle savedInstanceState) {

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        ActionBar actionBar = getActionBar();
        actionBar.show();
        //more code............ 
```

这是logcat：

```
03-04 16:31:09.423: E/AndroidRuntime(1441): FATAL EXCEPTION: main
03-04 16:31:09.423: E/AndroidRuntime(1441): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.salebook/com.example.salebook.MainActivity}: java.lang.NullPointerException
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.os.Looper.loop(Looper.java:137)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at java.lang.reflect.Method.invokeNative(Native Method)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at java.lang.reflect.Method.invoke(Method.java:511)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at dalvik.system.NativeStart.main(Native Method)
03-04 16:31:09.423: E/AndroidRuntime(1441): Caused by: java.lang.NullPointerException
03-04 16:31:09.423: E/AndroidRuntime(1441):     at com.example.salebook.MainActivity.onCreate(MainActivity.java:130)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.Activity.performCreate(Activity.java:5104)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-04 16:31:09.423: E/AndroidRuntime(1441):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-04 16:31:09.423: E/AndroidRuntime(1441):     ... 11 more 
```

第 130 行在哪里`anctionBar.show()`，我在**res/menu/menu.xml 中**：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/itemid_0"
        android:title="Action Item 0"
        android:icon="@drawable/ic_launcher"
        android:orderInCategory="0"
        android:showAsAction="ifRoom|withText" />
    <item android:id="@+id/itemid_1"
        android:title="Action Item 1"
        android:orderInCategory="0" />
    <item android:id="@+id/itemid_2"
        android:title="Action Item 2"
        android:orderInCategory="0" />
    <item android:id="@+id/itemid_3"
        android:title="Action Item 3"
        android:orderInCategory="0" />
</menu> 
```

我没发现问题。希望有人帮助我。

谢谢。

此外，在 appThem 样式中：

```
<style name="AppTheme" parent="AppBaseTheme">
        <item name="android:windowActionBar">true</item>
        <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    </style> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:46:44.860

你 Actionbar 返回 null 因为你没有 actionbar 但你正在使用 getActionbar()

确保您具有显示操作栏的窗口功能，这是显示操作栏所必需的。检查以下链接以获取更多详细信息。...检查此问题[getActionBar 返回 null](https://stackoverflow.com/questions/10031180/getactionbar-returns-null)并检查此链接以获取有关您的问题的更多信息[http://blog.perpetumdesign.com/2011/08/strange-case-of-dr-action-and-mr-bar .html](http://blog.perpetumdesign.com/2011/08/strange-case-of-dr-action-and-mr-bar.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-16T07:27:35.880

你删除

```
android:theme="@style/AppTheme" 
```

在 AndroidManifest.xml 的“应用程序”中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:40:30.807

如果您删除该行，您真的会看到一个操作栏`actionBar.show()`吗？如果不是，它可能与您的主题有关，例如`Theme.Light.NoActionBar`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T04:54:31.150

转到 AndroidManifest.xml 并替换

```
android:theme="@style/AppTheme" 
```

经过

```
android:theme="@android:style/Theme.Holo.Light.DarkActionBar" 
```

# android - 在 Kinvey (Android) 中创建集合

> ID：15206448
> 
> 赞同：1
> 
> 时间：2013-03-04T16:38:03.890
> 
> 标签：android, kinvey

我最近开始使用 Kinvey 作为我的 Android 应用程序的后端。该文档没有很多关于集合的信息。我想知道是否可以使用应用于 MySQL 表的相同概念来创建集合，例如：

一个名为 Users 的集合将包含一个用户 ID、用户名、用户电子邮件

另一个 Collection 叫做 Items 对应用户 -> Item ID, Item Name, User ID。

有没有人使用 Kinvey 成功创建过这样的收藏？

金维网

我还就此联系了他们的支持团队，但还没有回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:56:24.703

我是 Kinvey 的工程师，可以在这方面为您提供帮助。Kinvey 在后端使用 NoSQL 存储，因此这些概念与 MySql 等关系数据库系统的概念略有不同，但通常可以应用相同的思维过程。集合类似于表，尽管它是无模式的。这意味着可以根据需要动态添加属性（MySql 术语中的列）。您只需创建集合，然后开始将数据对象保存到其中。有关我们的 Android 库的更多信息，请查看我们的[数据存储用户指南](http://devcenter.kinvey.com/android/guides/datastore)。

# android - 阅读我的应用程序的“显示通知”设置（在 Android 4.2+ 上）

> ID：15206452
> 
> 赞同：1
> 
> 时间：2013-03-04T16:38:22.687
> 
> 标签：android, android-alertdialog, toast

是否可以阅读 Android 4.2 上的“显示通知”设置以检查用户是否为我的应用禁用了此设置？

如果用户选择启用此设置，我想显示一个警报对话框作为 toast 的后备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:40:03.197

经过大量搜索，正如 CommonsWare 所说，Android 似乎并没有将此设置公开给应用程序。

# javascript - jQuery 移动弹出窗口未关闭

> ID：15206455
> 
> 赞同：0
> 
> 时间：2013-03-04T16:38:37.777
> 
> 标签：javascript, jquery, jquery-mobile, popup

很抱歉没有提供小提琴，我无法在那里设置它。

但是，我使用以下代码以编程方式打开和关闭弹出窗口。只是它不会关闭并保持打开状态。我究竟做错了什么？

```
<!DOCTYPE html> 
<html> 
<head> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>

    <script>
    $(document).ready(function()
    {
        $("#initialpopup").popup("open");

        setTimeout(function()
        {
            $("#initialpopup").popup("close");
        }, 500);    

    });
    </script>
</head>
<body>

    <div data-role="page" data-theme="a" data-content-theme="c">

        <div data-role="popup" id="initialpopup" data-overlay-theme="a" data-theme="a">Foobar</div>

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T01:18:05.780

你可以试试

```
$('#initialpopup').popup('open', {transition: 'pop'});
window.setTimeout('$("#initialpopup").popup("close");', 500); 
```

# python - 在 Django 中比较两个相同的元素似乎不起作用

> ID：15206459
> 
> 赞同：2
> 
> 时间：2013-03-04T16:38:44.193
> 
> 标签：python, django

我正在尝试在我正在编写的 Django 模板中运行一些 if 语句。这是代码：

```
{% for object in managers %}
    {{ request.user.username }}
    {{ object.manager }}
    {% if request.user.username == object.manager %}
       You are on the list!
    {% endif %}
{% endfor %} 
```

当我以作为 objects.manager 成员的用户身份登录时运行此代码时，我看到以下内容：

用户名用户名

但是 if 语句中没有出现任何内容。如果两个值相同，为什么它不起作用？我知道这不是最优雅的方法，但目前我只能访问模板文件，我正试图快速完成一些事情:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:48:02.437

你的 object.manager 是一个外键（int），你的 request.user.username 是一个（str）。为了使其相等，请使用两个外键。

```
{% if request.user == object.manager %} 
```

您也可以使用 request.user.username。例如：

```
{% if request.user.username == object.manager.username %} 
```

图案：

```
(int) == (int)
('str') == ('str')
(FK or PK) == (int)
(FK or PK) == (FK or PK) 
```

# python - 如何将“x = y”字符串的元组解析为python中的字典？

> ID：15206460
> 
> 赞同：3
> 
> 时间：2013-03-04T16:38:44.660
> 
> 标签：python

我有一个字符串元组，我想通过使用分隔符拆分每个元素来将其转换为字典。这可以通过字典理解来实现吗？

```
>>> x = ('var1=abc', 'var2=xyz', 'var3=10')
>>> y = {k: v for (k, v) in ???}  # this is where I need your help
>>> print y
{ "var1": "abc", "var2": "xyz", "var3": "10" } 
```

这与任何事情一样都是一个学习练习——所以请不要用其他方法来回答（我有很多）——我想知道它是否可以通过字典理解来回答。

**[更新]**

有一个我没有先写下来的轻微修改 - 我需要从每个值的末尾删除一个无关的换行符。

```
>>> x = ('var1=abc\n', 'var2=xyz\n', 'var3=10')
>>> d = {k: v.strip('\n') for (k, v) in [e.split('=') for e in x]}
>>> d
{'var1': 'abc', 'var3': '10', 'var2': 'xyz'} 
```

（当然，现在顺序不同了——但我可以忍受。Grrr。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:40:16.387

您必须将每个字符串拆分两次，但是是的，可以这样做：

```
{elem.split('=', 1)[0]: elem.split('=', 1)[1].strip() for elem in x} 
```

结果：

```
>>> x = ('var1=abc\n', 'var2=xyz\n', 'var3=10')
>>> {elem.split('=', 1)[0]: elem.split('=', 1)[1].strip() for elem in x} 
{'var1': 'abc', 'var3': '10', 'var2': 'xyz'} 
```

为避免拆分两次，请改用生成器表达式和`dict()`构造函数：

```
dict(elem.strip().split('=', 1) for elem in x) 
```

因为它需要一个二值元组序列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:42:50.390

使用[`dict()`](http://docs.python.org/2/library/stdtypes.html#dict)构造函数

```
dict(elem.split('=', 1) for elem in x) 
```

在行动：

```
>>> x = ('var1=abc', 'var2=xyz', 'var3=10')
>>> dict(elem.split('=', 1) for elem in x)
{'var1': 'abc', 'var3': '10', 'var2': 'xyz'} 
```

*注意：*字典是未排序的，所以你不会得到你想要的*确切结果。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:41:59.033

```
>>> x = ('var1=abc', 'var2=xyz', 'var3=10')
>>> dict([element.split('=') for element in x])
{'var1': 'abc', 'var3': '10', 'var2': 'xyz'} 
```

# iphone - iPhone应用程序中的退出按钮？

> ID：15206461
> 
> 赞同：0
> 
> 时间：2013-03-04T16:38:47.163
> 
> 标签：iphone, ios6, exit

[https://itunes.apple.com/us/app/ccnv/id574345063?mt=8](https://itunes.apple.com/us/app/ccnv/id574345063?mt=8)
我从 Apple 应用商店下载此应用。

该应用程序也具有我想在我的应用程序中实现的相同形式。

注册表在其中打开并具有接受和取消按钮。

当我点击取消按钮时，会弹出一个警报，显示两个按钮是和否。

当点击是应用程序退出时。

所以这个应用程序在 Apple 应用程序商店中的表现如何。我想在我的 iPhone 应用程序中执行相同的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:43:59.327

根据苹果的指导方针，不应以编程方式关闭应用程序。仅当用户单击主页按钮时，应用程序才应退出。

# ruby - 使用正则表达式从 xml 字符串中获取节点

> ID：15206467
> 
> 赞同：0
> 
> 时间：2013-03-04T16:39:01.913
> 
> 标签：ruby, regex

我有如下字符串 xml：

```
<Query>
  <Code>USD</Code>
  <Description>United States Dollars</Description>
  <UpdateTime>2013-03-04 02:27:33</UpdateTime>
  <toUSD>1</toUSD>
  <USDto>1</USDto>
  <toEUR>2</toEUR>
  <EURto>3</EURto>
</Query> 
```

所有文本都在一行中，没有空格。我无法编写正确的正则表达式模式。我想要得到像`<to`. 例如`<toEUR>`，`<toUSD>`。

我应该如何写这个模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:46:20.390

使用 nokogiri 和 xpath 功能`starts-with`：

```
require 'nokogiri'
doc = Nokogiri::XML <<EOF
<Query>
  <Code>USD</Code>
  <Description>United States Dollars</Description>
  <UpdateTime>2013-03-04 02:27:33</UpdateTime>
  <toUSD>1</toUSD>
  <USDto>1</USDto>
  <toEUR>2</toEUR>
  <EURto>3</EURto>
</Query>
EOF

doc.search('//*[starts-with(name(),"to")]').map &:to_s
#=> ["<toUSD>1</toUSD>", "<toEUR>2</toEUR>"] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T22:48:22.097

虽然普遍的共识是用正则表达式解析 xml 等不是要走的路，但这样的事情应该可以解决问题：

```
<\s*(to[^>\s]+)[^>]*>([^<]+)<\s*/\s*\1\s*> 
```

红宝石格式：

```
/<\s*(to[^>\s]+)[^>]*>([^<]+)<\s*\/\s*\1\s*>/ 
```

匹配`<toWatever>value</toWhatever>`反向引用组 1 返回名称 (toWhatever)，反向引用组 2 返回值。

# mysql - MySQL - 将表合并为一个

> ID：15206468
> 
> 赞同：0
> 
> 时间：2013-03-04T16:39:04.577
> 
> 标签：mysql

我需要将一些数据从几个表移到一个表中。到目前为止，我已经得到了这个（不起作用）：

```
SELECT * INTO MainT FROM table1 WHERE MainT.sun=table1.sun 
```

`MainT`- 这个表有很多数据，如果值相同，
我想从中添加数据。列在每个表中。我已经从表中 创建了字段/列。`table1``MainT``sun``sun`
`table1``MainT`

这个查询给了我这个错误：

```
#1327 - Undeclared variable: MainT 
```

我也尝试运行这个：

```
SELECT * INTO `MainT` FROM table1 WHERE `MainT`.sun=table1.sun 
```

错误是一样的

**更新**

```
INSERT INTO `MainT` SELECT * FROM table1 WHERE `MainT`.sun=table1.sun;
#1054 - Unknown column 'MainT.sun' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:42:09.787

```
insert into MainT
select * from table1
where ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:44:02.667

如果我理解正确，请尝试类似

```
INSERT INTO MainT
SELECT * 
FROM table1 AS t
INNER JOIN MaintT AS mt ON mt.sun = t.sun 
```

# facebook - 从 iOS 应用程序中获取具有已知电子邮件地址的用户照片

> ID：15206470
> 
> 赞同：0
> 
> 时间：2013-03-04T16:39:10.630
> 
> 标签：facebook, image, email, facebook-graph-api, search

提供电子邮件时，我想从 iOS 应用程序中自动从 Facebook 下载用户的个人资料照片。我通过执行搜索来获取用户 ID 来做到这一点。

该应用程序将被很多人使用，因此不应该有登录用户，最终应用程序应该进行身份验证。

我的问题是`access_token`要做到这一点。在 Sparrow（OSX 和 iOS 的电子邮件客户端）中实现了类似的解决方案。

`access_token`我的猜测是通过使用此 url 发出请求来获取：

```
[NSString stringWithFormat:@"https://graph.facebook.com/oauth/access_token?client_id=%@&client_secret=%@&grant_type=search", appId, appSecret]; 
```

但作为回报，我得到了这个：

```
{"error":{"message":"Missing redirect_uri parameter.","type":"OAuthException","code":191}} 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:07:47.120

您需要一个用户访问令牌才能通过电子邮件地址进行搜索；请参阅[通过已知电子邮件地址查找 Facebook 用户（个人资料页面的 URL）](https://stackoverflow.com/q/5234651/441108)。

# c - 将非 ASCII 字符分配给宽字符并使用 printf 打印

> ID：15206490
> 
> 赞同：3
> 
> 时间：2013-03-04T16:40:21.743
> 
> 标签：c, utf-8, ascii, locale, wchar-t

如何将非 ASCII 字符分配给宽字符并将其打印到控制台？这段代码不起作用：

```
#include <stdio.h>
int main(void)
{
    wchar_t wc = L'ć';
    printf("%lc\n", wc);
    printf("%ld\n", wc);
    return 0;
} 
```

输出：

```
263
Press [Enter] to close the terminal ... 
```

我在 Windows 7 上使用 MinGW GCC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:42:36.740

您应该使用[`wprintf`](http://en.cppreference.com/w/c/io/fwprintf)打印宽字符串：

```
wprintf(L"%c\n", wc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:54:59.870

我认为你的调用`printf()`失败并返回一个«Illegal byte sequence»错误`errno`，至少这是在 MacOS X 上使用上面的示例代码（以及如果使用`wprintf()`而不是`printf()`）发生的情况。对我来说，当我在调用`setlocale(LC_ALL, "");`之前调用它时它会起作用，`printf()`以便它默认停止使用 C 语言环境：

```
#include <stdio.h>
#include <stdlib.h>
#include <locale.h>
int main(void)
{
    wchar_t wc = L'ć';

    setlocale(LC_ALL, "");
    printf("%lc\n", wc);

    return 0;
} 
```

目前还不清楚你在哪个平台/编译器上，所以 YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:52:44.467

使用 wprintf("%lc\n" ,wc); 你会得到你想要的输出

# python - python：测试子进程调用是否抛出预期的异常

> ID：15206491
> 
> 赞同：2
> 
> 时间：2013-03-04T16:40:22.987
> 
> 标签：python, unit-testing, exception, subprocess

我正在尝试使用 python2.7 的 unittest 模块测试调用不带参数的外部命令会引发 CalledProcessError 异常，如下所示：

```
import unittest

class MyTest(unittest.TestCase)
    def testCommand(self):
        cmd = 'MyCommand'
        gotLog = 'UndefinedGot'
        with self.assertRaises(CalledProcessError) as context:
            gotLog = subprocess.check_output(cmd, shell=True, stderr=subprocess.STDOUT).strip()
        expectedLog = 'some error'
        self.assertEqual(context.exception.message, expectedLog) 
```

但是，运行测试仍然给了我

```
Traceback (most recent call last):   File "MyTest.py", line 51, in testCommand
   gotLog = subprocess.check_output(cmd, shell=True, stderr=subprocess.STDOUT).strip()
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 544, in check_output:
    raise CalledProcessError(retcode, cmd, output=output)
CalledProcessError: Command 'MyCommand' returned non-zero exit status 2 
```

是不是unittest的异常测试无法处理外部命令，例如异常在别处被截获？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:53:43.803

我只能认为这个`CalledProcessError`名字被践踏了，也许明确说明它会有所帮助

```
with self.assertRaises(subprocess.CalledProcessError) as context: 
```

# java - RESTFB 返回的公开帖子很少

> ID：15206495
> 
> 赞同：1
> 
> 时间：2013-03-04T16:40:33.753
> 
> 标签：java, facebook-graph-api, restfb

我正在使用 restFB 并尝试搜索包含我想要的关键字的公共帖子。对于以下代码，该关键字是“flu”：

```
public class JavaApplication3 {    
    public static void main(String[] args) {
        FacebookClient facebookClient = new DefaultFacebookClient("ACCESS TOKEN");
        Connection<Post> publicSearch = facebookClient.fetchConnection(
            "search", Post.class,
            Parameter.with("q", "flu"), Parameter.with("type", "post")
        );
        int size=publicSearch.getData().size();
        for(int i=0;i<size;i++){
            System.out.println("Message: " + publicSearch.getData().get(i).getMessage());   
        }
    }
} 
```

但是这段代码返回的帖子很少，只有 3-4 个。每个关键字的情况都是如此。最多返回 25 个帖子。而已。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T12:53:56.743

您应该使用[https://graph.facebook.com/search?q=QUERY&type=OBJECT_TYPE](https://graph.facebook.com/search?q=QUERY&type=OBJECT_TYPE)代替以下问题

# haskell - 这两个非常相似的haskell状态计算之间有什么区别

> ID：15206497
> 
> 赞同：3
> 
> 时间：2013-03-04T16:40:40.737
> 
> 标签：haskell, state

我正在尝试学习haskell State monad。所以我写了一个函数来使用 State monad 生成一个随机数列表。

这是第一个版本。

```
rnds :: Int -> [Int]
rnds n = evalState (help (mkStdGen 007)) []
  where help prng = do s <- get
            let (a, nprng) = randomR (1,6) prng                                 
            put (a:s)
            if length s == n then (return s)
                             else (help nprng) 
```

这是第二个版本。

```
rnds1 :: Int -> [Int]
rnds1 n = evalState (help (mkStdGen 007)) []
  where help prng = do s <- get
            let (a, nprng) = randomR (1,6) prng                                 
            put (a:s)
            ns <- get
            if length ns == n then (return ns)
                              else (help nprng) 
```

对于相同的参数，它们都给出相同的输出。但是在第一个版本中，要检查列表的长度（顺便说一下，这是状态），我引用的是 list `s`。不过`s`是在我做之前得到的`put (a:s)`。所以当我检查长度时，我假设它会在我做之前给出's'的长度`put (a:s)`。但似乎并非如此，因为如果两个版本的参数相同，则第一个版本的输出与第二个版本相同。

第二个版本至少对我来说更容易理解。在检查列表的长度之前`ns`，我首先要做`ns <- get`的是获取新的更新状态。

有人可以告诉我发生了什么吗？我觉得我严重误解了 Haskell 的工作方式或 State monad 本身的一些东西。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:49:56.557

在`rnds`,

```
put (a:s)
if length s == n then (return s) 
```

您返回从 获得的列表`get`，而不是您`put`进入状态的列表，因此您生成的伪随机数比 in 多一个`rnds1`（然后您忽略），但返回相同的列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:54:51.600

正如丹尼尔所指出的，我认为这只是由于您使用的算法而造成的巧合。如果您使用更简单的程序，则在从隐藏状态中提取值后，更容易看到值不会“神奇地”发生突变：

```
module Main where
import Control.Monad.State

test = evalState comp 1
  where
    comp = do
     x <- get
     put 2
     y <- get
     return (x,y)

main = do
   print test 
```

这个程序打印出 (1,2)，表明一旦你得到`x`明确的“旧”值，即使你做了一个“放置”。

# ios - 选框效果 - UILabel / UITextView

> ID：15206499
> 
> 赞同：0
> 
> 时间：2013-03-04T16:40:43.683
> 
> 标签：ios, uilabel, uitextview, marquee

如何向 UILabel 添加选取框效果？

（如果不可能，`UITextView`也可以）

谢谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:42:17.757

根本不需要编码，你会在这里找到带有代码的运行实现：

[可可控件](http://www.cocoacontrols.com/controls/marqueelabel)

# spring - 使用 spring rest 模板执行获取请求并检查返回的状态代码是否正常

> ID：15206503
> 
> 赞同：2
> 
> 时间：2013-03-04T16:40:51.607
> 
> 标签：spring, http, rest, sitemap

到目前为止，它只是将站点地图提交给谷歌

```
RestTemplate restTemplate = new RestTemplate();
HttpEntity<?> responseEntity =  restTemplate.getForEntity("http://www.google.com/webmasters/tools/ping?sitemap={url}", String.class,"http://mySite.com/sitemap.txt); 
```

如何检查返回的服务器 HTTP 状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:48:08.690

[`restTemplate.getForEntity(String, Class<T>, String...)`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/client/RestTemplate.html#getForEntity%28java.lang.String,%20java.lang.Class,%20java.lang.Object...%29)返回一个[`ResponseEntity<T>`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/http/ResponseEntity.html)(extends `HttpEntity`)，它有一个检索状态码的方法。

[ResponseEntity.getStatusCode()](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/http/ResponseEntity.html#getStatusCode%28%29)

您应该使用它而不是`HttpEntity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-30T23:31:53.383

您需要执行请求并检查响应状态。

示例代码：

```
//when
ResponseEntity<Void> response = restTemplate.exchange(uri, HttpMethod.GET, HttpEntity.EMPTY, Void.class); 

//then 
assertEquals(HttpStatus.OK, response.getStatusCode()); 
```

# ios - UIGraphicsEndImageContext() 执行时间过长？

> ID：15206505
> 
> 赞同：1
> 
> 时间：2013-03-04T16:41:06.390
> 
> 标签：ios, objective-c, uiimage, screenshot

我正在通过以下代码对屏幕的一部分进行截图：

```
-(UIImage *) takePic {

UIGraphicsBeginImageContextWithOptions(self.view.bounds.size,YES, 0.0);

[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

        CGRect rect = CGRectMake(20,238 ,600 , 532);
        CGImageRef imageRef = CGImageCreateWithImageInRect([viewImage CGImage], rect);
        UIImage *img = [UIImage imageWithCGImage:imageRef];
        CGImageRelease(imageRef);
        return  img;

  } 
```

这很好用，但是需要太多时间，因为我先获取整个 Self.View.bounds 的 imageContext，然后再从中重新获取一个小的 CGRect。

如何改进我的代码以使方法运行得更快？谢谢。

# facebook - HTTP 标头错误响应代码：404。博客内容很好。文章生成 404

> ID：15206513
> 
> 赞同：0
> 
> 时间：2013-03-04T16:41:44.260
> 
> 标签：facebook, http, http-headers, http-status-code-404

我遇到了一个问题，即在我的文章内容节点中没有看到 HTTP 标头。在我的博客内容节点中，可以看到它们。

Facebook linter 给了我一个 404 Bad Response。

这是一个不起作用的文章链接：http: [//thesalinepost.com/article/saline-city-council-discuss-12-hour-days-spd-funding-safd-real-estate-services-contract](http://thesalinepost.com/article/saline-city-council-discuss-12-hour-days-spd-funding-safd-real-estate-services-contract)

这是一个有效的博客链接：http: [//thesalinepost.com/blog/editors-notes/upcoming-classes-and-activities-saline-community-education](http://thesalinepost.com/blog/editors-notes/upcoming-classes-and-activities-saline-community-education)

知道是什么原因造成的吗？我正在失去点击次数，因为我的 Facebook 链接没有图片、标题或摘要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:47:10.973

> Facebook linter 给了我一个 404 Bad Response。

您的服务器是响应此 HTTP 状态代码的服务器。

并使用像 fe 这样的服务：[http ://web-sniffer.net/?url=http://thesalinepost.com/article/saline-city-council-discuss-12-hour-days-spd-funding- safd-real-estate-services-contract](http://web-sniffer.net/?url=http://thesalinepost.com/article/saline-city-council-discuss-12-hour-days-spd-funding-safd-real-estate-services-contract)也显示 404 答案，所以这是您的站点/您的 CMS 配置的问题，所以开始寻找那里。

# javascript - jQuery 移动加载

> ID：15206515
> 
> 赞同：1
> 
> 时间：2013-03-04T16:41:56.740
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我想在我正在构建的网站的移动版本的图片库上拥有一些滑动功能，所以我一直在使用 jQuery，我想我会使用 jQuery Mobile`swipeleft`和`swiperight`事件。这一切都很好，但我注意到当页面加载时，我会在页面上看到加载这个词。

这是加载小部件吗？如果是这样，我该如何设置它以使其不显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:21:28.570

您可以使用以下命令将其关闭：

```
$( document ).bind( 'mobileinit', function(){
    $.mobile.loader.prototype.options.text = "loading";
    $.mobile.loader.prototype.options.textVisible = false;
    $.mobile.loader.prototype.options.theme = "a";
    $.mobile.loader.prototype.options.html = "";
}); 
```

还很高兴知道这个块必须在 jQuery Mobile 在 HEAD 中初始化之前进行初始化，如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>          
    <script>
        $( document ).bind( 'mobileinit', function(){
            $.mobile.loader.prototype.options.text = "loading";
            $.mobile.loader.prototype.options.textVisible = false;
            $.mobile.loader.prototype.options.theme = "a";
            $.mobile.loader.prototype.options.html = "";
        });     
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head> 
```

[在此处](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/loader.html)找到有关此功能的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:05:25.893

试试这个：

```
$(document).on("swiperight", "body", function() {
    $.mobile.changePage("#page1");
    $.mobile.hidePageLoadingMsg();
}); 
```

或者

```
$("body").on( "swipeleft swiperight", function( event ) {
    $.mobile.changePage("#page1");
    $.mobile.hidePageLoadingMsg();
}); 
```

不管你怎么做，重要的是

```
$.mobile.hidePageLoadingMsg(); 
```

# c# - 应用程序死亡时杀死外部进程

> ID：15206516
> 
> 赞同：0
> 
> 时间：2013-03-04T16:41:58.990
> 
> 标签：c#, process, unmanagedresources

我一直在研究一个调用外部可执行文件（在我的情况下为 ffmpeg）的小块然后我编写了一个测试并在调试模式下使用了测试运行器，现在如果我停止调试（终止）它仍然运行 ffmpeg。我试图终止终结器中的进程并使用 IDisposable - 它仍然运行。我怎样才能确保进程永远不会像那样离开，如果调用者死亡或失败或以任何方式停止，ffmpeg 可执行文件保证会被杀死。

我像往常一样运行这个过程（没什么特别的）

```
var processInfo = new ProcessStartInfo(ffmpegPath)
{
    UseShellExecute = false,
    Arguments = arguments,
    RedirectStandardOutput = true,
    RedirectStandardError = true,
    CreateNoWindow = true,
};

using (var ffmpegProc = new Process())
{
    ffmpegProc.EnableRaisingEvents = true;
    ffmpegProc.StartInfo = processInfo;
    ffmpegProc.Start();
    ffmpegProc.WaitForExit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:50:23.463

当您的进程终止时，您无能为力。在有人用[TerminateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)调用杀死它后，您的进程中没有代码运行。

在更优雅的情况下（即未处理的异常），您可能有全局处理程序来做一些接近您想要的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:52:24.007

你应该使用[JobObject](http://msdn.microsoft.com/en-us/library/ms682409%28VS.85%29.aspx)

使用 JobObject，您可以添加子进程。因此，如果主进程被杀死或关闭，操作系统将终止所有子进程。

来源：[http ://www.xtremevbtalk.com/showpost.php?p=1335552&postcount=22](http://www.xtremevbtalk.com/showpost.php?p=1335552&postcount=22)

另一种解决方案是将父 PID 传递给子对象。

任何孩子都必须检查父 PID 是否存在，如果没有找到就杀死自己

# sql - 如何在 SQL 2005 中将变量设置为使用变量作为表名的 sql 查询的结果

> ID：15206518
> 
> 赞同：1
> 
> 时间：2013-03-04T16:42:05.790
> 
> 标签：sql, tsql, sql-server-2005

我目前在编写存储过程并将 int 类型的变量的值设置为以变量作为表名的 select 语句的结果时遇到问题。我查看了旧线程并尝试了多种方法，但没有运气。如果我没有收到有关表名的错误，我最终会收到变量转换问题的错误。我已经为此工作了太久，任何帮助将不胜感激。下面是我的一部分代码。谢谢

```
DECLARE @BATCHNUMBER VARCHAR  --value set in earlier code
DECLARE @ETABLE VARCHAR(50); --the table name
DECLARE @FIRSTDOCID INT;      
SET @ETABLE = 'tablename_' + @BATCHNUMBER; --CREATE FIRST TABLE NAME

SELECT @FIRSTDOCID = MIN(D0CID) FROM @ETABLE 
```

我得到的错误是：必须声明表变量“@ETABLE”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:46:58.000

您正在尝试从 中选择`VARCHAR`，而不是从表中选择。完成这项工作的唯一方法是使用动态 SQL。

```
DECLARE @SQL NVARCHAR(250);
SET @SQL = 'SELECT @OUTPUT = MIN(D0CID) FROM ' + QuoteName(@ETABLE);
EXEC sp_executeSql @SQL, N'@output INT OUTPUT', @FIRSTDOCID OUTPUT;

SELECT @FIRSTDOCID; 
```

但是，我不建议使用动态 SQL，因为这通常会导致 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:47:50.070

`exec`如果您正在动态构建查询，您可能必须执行类似 use的操作：

```
SET @QUERY = "SELECT" + ...etc.
exec(@QUERY) 
```

因为`ETABLE`是 varchar，而不是预期的“表变量”。

# javascript - JQuery 悬停函数超时

> ID：15206521
> 
> 赞同：0
> 
> 时间：2013-03-04T16:42:15.013
> 
> 标签：javascript, jquery, hover, settimeout

我在 SO 上看到过其他类似的问题，但答案并不是我想要的。我对下面代码的问题是关于变量**hide**。

在它的当前形式下，第一个悬停函数将看不到**隐藏**，但我不想在更高的范围内声明它，因为它在那里没有用处。另外，在更高的范围内声明它需要为每个 li 创建一个不同的变量。

保持这个变量包含这两个函数之间的超时的解决方案是什么？

```
$('li').hover(function() {
    clearTimeout(hide);
    $('.menu', this).show();
}, function() {
    var menu = $('.menu', this);
    var hide = setTimeout(function() {
        menu.hide();
    }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:45:16.097

您可以将值存储为[`.data()`](http://api.jquery.com/data/)

```
$('li').hover(function() {
    clearTimeout($(this).data('hide'));
    $('.menu', this).show();
}, function() {
    var menu = $('.menu', this);
    $(this).data('hide', setTimeout(function() {
        menu.hide();
    }, 500));
}); 
```

# c++ - 在 C++ 中显示弹出的元素？

> ID：15206523
> 
> 赞同：-9
> 
> 时间：2013-03-04T16:42:17.883
> 
> 标签：c++

我在这个程序的最后一部分有问题。如何显示已弹出的元素？

我尝试更改循环，但不能..

```
#include<iostream.h>
typedef struct TINDANAN
{
    int atas;
    char senarai[4];
} tindanan;

void cipta(tindanan *t);
void push(tindanan *t);
void pop(tindanan *t);
int penuh(tindanan *t);
int kosong(tindanan *t);

void main()
{
    int pilihan,jawapan,i;
    tindanan t;
    cipta(&t);
    cout<<"\n1->Push\t\n 2->Pop \t\n 3-> Keluar \n pilihan =";
    cin>>pilihan;
    while(pilihan !=3)
    {
        switch (pilihan)
        {
            case 1: push(&t);
                break;
            case 2: pop(&t);
                break;
            default : cout<<"\nTidak Sah";
        }
        cout<<"\n1->Push\t\n 2->Pop \t\n 3-> Keluar \n pilihan =";
        cin>>pilihan;
    }
}

void cipta (tindanan *t)
{
    t->atas =-1;
}

int penuh (tindanan *t)
{
    if (t->atas ==3)
        return (1);
    else
        return (0);
}

void push (tindanan *t)
{
    int i;
    char data;
    if (penuh(t) ==1)
        cout<<"\nTindanan Penuh\n";
    else
    {
        cout<<"\nHuruf Character: ";
        cin>>data;
        t->atas++;
        t->senarai[t->atas]=data;
        cout<<"\nKandungan Timbunan :\nIndex | Data\n";
        for(i=t->atas;i>-1;i--)
            cout<<"| "<<i<< " | "<< t->senarai[i];
    }
    cout<<"\n";
}

int kosong (tindanan *t)
{
    if (t->atas ==-1)
        return (1);
    else
        return (0);
}

void pop (tindanan *t)
{
    int i;
    if(kosong(t) == 1)
        cout<<"\nTindanan Kosong\n";
    else
    {
        t->atas--;
        cout<<"\nkandungan Timbunan :\nIndex | data\n";
        for(i=t->atas;i>-1;i--)
            cout<<" | "<<i<< " | "<<( t->senarai[i]);
        cout<<"\nPop Item";
        for(i=3;i>t->atas;i--)
            cout<<"| "<<i<< " | "<< t->senarai[i];
    }
} 
```

对不起，我今年才学 c++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:45:19.537

使 pop 返回一个值并使该值等于您要弹出的元素（在我看来，这是您打印的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:52:58.933

我不确定你在 pop 函数中的第二个循环到底想做什么，但是这个修改后的 pop 应该显示弹出的值以及现有的内容。

```
void pop (tindanan *t)
{
  int i;
  if(kosong(t) == 1)
    cout<<"\nTindanan Kosong\n";
  else
  {
    cout<<"\nPop Item: " << (t->senarai[t->atas]);

    t->atas--;

    cout<<"\nkandungan Timbunan :\nIndex | data\n";
    for(i = t->atas; i > -1; i--)
      cout<<" | "<<i<< " | "<<( t->senarai[i]);
  }
} 
```

但总的来说，让 pop 返回该项目是有意义的，因为这是通常的工作方式。但是再推通常也需要将项目推。

或者，您可以像这样编写弹出窗口，它会返回弹出的项目，然后您可以根据需要显示它。

```
char pop (tindanan *t)
{
  char popped_item = -1;
  int i;
  if(kosong(t) == 1)
    cout<<"\nTindanan Kosong\n";
  else
  {
    cout<<"\nPop Item: " << (t->senarai[t->atas]);

    popped_item = t->senarai[t->atas];

    t->atas--;

    cout<<"\nkandungan Timbunan :\nIndex | data\n";
    for(i = t->atas; i > -1; i--)
      cout<<" | "<<i<< " | "<<( t->senarai[i]);
  }
  return popped_item;
} 
```

# knockout.js - 淘汰赛、剑道树视图、mvvm、HierarchicalDataSource：无法获取属性“toLowerCase”的值

> ID：15206531
> 
> 赞同：1
> 
> 时间：2013-03-04T16:42:56.573
> 
> 标签：knockout.js, treeview, kendo-ui, knockout-mvvm

我正在尝试使用视图模型填充我的树视图：

视图模型：

```
var vm = {
        dragAndDrop: ko.observable(true),
        dataSource: getDataAPI(),
        dataTextField: "FullName"
    }

    return vm;

function getDataAPI() {
        var serviceRoot = "http://demos.kendoui.com/service";
        var homogeneous = new kendo.data.HierarchicalDataSource({
            transport: {
                read: {
                    url: serviceRoot + "/Employees",
                    dataType: "jsonp"
                }
            },
            schema: {
                model: {
                    id: "EmployeeId",
                    hasChildren: "HasEmployees"
                }
            }
        });
        return homogeneous;
    } 
```

看法：

```
 <div data-bind="kendoTreeView: { dragAndDrop: dragAndDrop, dataSource: dataSource }"></div> 
```

错误：

无法获取属性“toLowerCase”的值

摘要：如果我使用静态 json 数据，使用这种剔除方法，我可以填充一棵树

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:15:36.510

问题可能是剑道认为您的数据是数字或其他类型时的字符串。

您可能需要在 HTML 中放置一个 data-field 属性。有关更多信息，请参阅[此线程](http://www.kendoui.com/forums/ui/grid/cannot-call-method-tolowercase-of-undefined-when-trying-to-filter-on-a-grid.aspx)。

# java - 我可以使用缓冲的 JGoodies 格式的文本字段接收属性更改事件吗？

> ID：15206535
> 
> 赞同：0
> 
> 时间：2013-03-04T16:43:15.623
> 
> 标签：java, swing, jtextfield, jgoodies, propertychangelistener

我有一个将我的 JTextField 绑定到 JGoodies 中的 bean 的方法

```
public static JTextField bindDoubleTextField(PresentationModel<?> adapter, String 

propertyName, boolean useBuffer)
{
   ValueModel valueModel = getValueModel(adapter, propertyName, useBuffer);
   DecimalFormat decimalFormat = new DecimalFormat("0.######");
   decimalFormat.setGroupingUsed(false);
   JTextField textField = BasicComponentFactory.createFormattedTextField(valueModel, decimalFormat);

   return textField;
} 
```

稍后在代码中，我将 propertyChangeListener 添加到 ValueModel，但它仅在我失去对 JTextField 的焦点时接收事件。是否可以在我输入时接收这些事件？我希望能够根据值是否与其原始值不同来设置 JTextField 的背景颜色。我不想在键入时提交值，我只想检测该值是否与上次提交的值不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:05:45.293

> 是否可以在我输入时接收这些事件？

请参阅[实现文档过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)或可能[的如何编写文档侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T00:49:12.683

使用 BasicComponentFactory.createTextField(ValueModel,boolean) 可能会更好。这允许您为第二个参数传递 false 并且提交将在您键入时发生。但是您必须自己进行格式化和验证，或者使用 JGoodies 验证 API。

JGoodies 将与您可能使用的任何文档或其他格式化程序发生冲突。

# javascript - 如何修改数组？

> ID：15206536
> 
> 赞同：0
> 
> 时间：2013-03-04T16:43:20.347
> 
> 标签：javascript, node.js, underscore.js

我目前有一个对象数组，其中每个对象都有几个属性。例子：

```
[
   { text: 'test1',
     id: 1
   },
   { text: 'test2',
     id: 2
   }
] 
```

将其转换为包含 from 值的字符串数组的最佳方法是`text`什么？我原以为我可以使用[underscore.js](http://underscorejs.org/#pick)做到这一点：

```
headerText = _.pick(headerRow, 'text'); 
```

但我认为，由于对象位于数组中，这将不起作用。我的下一个想法是循环遍历数组中的每个元素并将`text`值推送到一个新数组，但我很好奇是否有人知道更优雅的方法来做到这一点？建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:45:22.517

您正在寻找[`Array#map`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.19)：

```
var stringArray = headerRow.map(function(entry) {
    return entry.text;
}); 
```

[实例](http://jsbin.com/uvoroh/1)| [来源](http://jsbin.com/uvoroh/1/edit)

你甚至不需要 Underscore，`Array#map`它是 ES5 的一部分，并且完全支持 V8，Node 使用的 JavaScript 引擎。`Array#map`为数组中的每个条目调用一次您给它的函数，并根据该函数的返回值构建一个新数组。

或者，如果要更改*现有*数组，可以使用[`Array#forEach`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.18)：

```
headerRow.forEach(function(entry, index) {
    headerRow[index] = entry.text;
}); 
```

[实例](http://jsbin.com/uvoroh/2)| [来源](http://jsbin.com/uvoroh/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:45:03.820

使用`_.map(headerRow, function(row) { return row.text; })`. `Array.map`在 IE < 9 中不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:46:46.913

我会使用 foreach 并循环遍历它。

```
 var jamie = [
    { text: 'test1',
      id: 1
    },
    { text: 'test2',
      id: 2
    }
 ];

 var length = jamie.length,
     element = [];
 for (var i = 0; i < length; i++) {
   element[i] = jamie[i].id;
   // Do something with element i.
 }
   console.info(element); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T16:46:46.580

这是一个香草 javascript 版本，它避免使用不普遍支持的`Array.map`方法。

```
// assign the array to a variable
var a = [
   { text: 'test1',
     id: 1
   },
   { text: 'test2',
     id: 2
   }
];

// loop through each item in the array, reassigning with it's text value
// not like this: for(i in a) a[i] = a[i].text
// but with a for loop based on the array length
var i;
for(i=a.length; i; i--){ a[i-1] = a[i-1].text; }

// check the results
console.log(a);
// ["test1", "test2"] 
```

# java - ServletResponse#flushBuffer() 涵盖什么？

> ID：15206538
> 
> 赞同：8
> 
> 时间：2013-03-04T16:43:22.127
> 
> 标签：java, servlets, response, flush

如果我打电话[`ServletResponse.flushBuffer()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#flushBuffer())，

我需要打电话吗[`ServletResponse.getOutputStream().close()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getOutputStream())

**和/或** [`ServletResponse.getOutputStream().flush()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getOutputStream())

（对于[`ServletResponse.getWriter().close()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getWriter())

和/或[`ServletResponse.getWriter().flush()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getWriter())）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:54:10.133

两者`flush()`和`close()`都是完全不同的方法：

## 

冲洗（）...

该 `flush()`方法用于将缓冲的响应刷新到客户端。它还将导致提交响应标头。

默认情况下，如果到达内部缓冲区，服务器容器将自动调用它。

如果要以自定义块发送响应，则应显式调用。

## 

关（） ...

该`close()`方法用于关闭响应流，以便不再写入数据。

默认情况下，Server 容器会在 Servlet 生命周期结束时自动调用它。

如果您不想允许超出任何点的写入响应，则应显式调用。尝试这样做会引发 IOException。

# sql-server - 通过 vagrant 上的 chef-solo 时，SQL Server 设置失败并显示“无法生成临时类”

> ID：15206545
> 
> 赞同：6
> 
> 时间：2013-03-04T16:43:48.540
> 
> 标签：sql-server, powershell, chef-infra, vagrant, winrm

在过去的一周里，我一直在尝试解决[厨师 COOK-1172 的](http://tickets.opscode.com/browse/COOK-1172)问题，但没有取得多大成功。我正在尝试使用 Chef-Solo 配置程序通过 Vagrant 安装 SQL Server 2008 R2 开发人员版（在我的情况下）。

我已经能够通过直接通过 Ruby WinRM gem 在 Chef 之外重现该问题，然后使用自定义 PowerShell 脚本修复它，该脚本使用传递的凭据在来宾 Windows vagrant box 上启动 setup.exe 进程。换句话说，WinRM gem 调用一个远程 PS 脚本，该脚本在指定的凭据下启动 SQL Server setup.exe，这是有效的。

*但是，通过*chef-solo 在客户机上运行完全相同的脚本失败，并出现 InvalidOperationException：无法生成临时类。

我用于测试的 Ruby 脚本和嵌入式 PowerShell 脚本是从我的 OS X 主机调用的：

```
require 'winrm'

endpoint = 'http://localhost:5985/wsman'
user = password = 'vagrant'
ps = <<EOH

function ps-runas ([String] $cmd, [String] $arguments)
{
  Write-Host "ps-runas cmd: $cmd"
  Write-Host "ps-runas args: $arguments"

  $secpasswd = ConvertTo-SecureString "vagrant" -AsPlainText -Force

  $process = New-Object System.Diagnostics.Process
  $setup = $process.StartInfo
  $setup.FileName = $cmd
  $setup.Arguments = $arguments
  $setup.UserName = "vagrant"
  $setup.Password = $secpasswd
  $setup.Verb = "runas"
  $setup.UseShellExecute = $false
  $setup.RedirectStandardError = $true
  $setup.RedirectStandardOutput = $true
  $setup.RedirectStandardInput = $false

  # Hook into the standard output and error stream events
  $errEvent = Register-ObjectEvent -InputObj $process `
    -Event "ErrorDataReceived" `
    -Action `
    {
        param
        (
            [System.Object] $sender,
            [System.Diagnostics.DataReceivedEventArgs] $e
        )
        Write-Host $e.Data
    }
  $outEvent = Register-ObjectEvent -InputObj $process `
    -Event "OutputDataReceived" `
    -Action `
    {
        param
        (
            [System.Object] $sender,
            [System.Diagnostics.DataReceivedEventArgs] $e
        )
        Write-Host $e.Data
    }

  Write-Host "ps-runas starting: $cmd"

  if (!$process.Start())
  {
    Write-Error "Failed to start $cmd"
  }

  $process.BeginOutputReadLine()
  $process.BeginErrorReadLine()

  # Wait until process exit
  $process.WaitForExit()

  $process.CancelOutputRead()
  $process.CancelErrorRead()
  $process.Close()
}

EOH

cmd = ps

# Fails - Running through chef-solo fails - cannot compile a serialization assembly
cmd << "ps-runas \"c:\\opscode\\chef\\bin\\chef-solo.bat\" \"-c c:\\tmp\\vagrant-chef-1\\solo.rb -j c:\\tmp\\vagrant-chef-1\\dna.json\""

# Succeeds - Running setup directly works
#cmd << "ps-runas \"c:\\vagrant\\sql2008r2\\setup.exe\" \"/Q /ConfigurationFile=c:\\vagrant\\ConfigurationFile.ini\""

winrm = WinRM::WinRMWebService.new(endpoint, :plaintext, :user => user, :pass => password, :basic_auth_only => true)
winrm.set_timeout(60*20)

winrm.powershell(cmd) do |stdout, stderr|
  STDOUT.print stdout
  STDERR.print stderr
end

puts 'Done!' 
```

从 sql 安装日志：

```
013-03-03 22:44:50 Slp: Exception type: Microsoft.SqlServer.Chainer.Infrastructure.ChainerInfrastructureException
2013-03-03 22:44:50 Slp:     Message: 
2013-03-03 22:44:50 Slp:         Unable to generate a temporary class (result=1).
2013-03-03 22:44:50 Slp:         error CS0583: Internal Compiler Error (0xc0000017 at address 000007FEFD00AA7D): likely culprit is 'IMPORT'.
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'IMPORT' symbol 'System.Xml.Serialization.XmlSerializationReader'
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'IMPORT' symbol 'Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderClusterNodesStatusPublicConfigObject'
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderClusterNodesStatusPublicConfigObject'
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml.Serialization.GeneratedAssembly'
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml.Serialization'
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml'
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft'
2013-03-03 22:44:50 Slp:         error CS0584: Internal Compiler Error: stage 'PREPARE' symbol '<global namespace>'
2013-03-03 22:44:50 Slp:         error CS0586: Internal Compiler Error: stage 'PREPARE'
2013-03-03 22:44:50 Slp:         error CS0587: Internal Compiler Error: stage 'PREPARE'
2013-03-03 22:44:50 Slp:         error CS0587: Internal Compiler Error: stage 'BEGIN'
2013-03-03 22:44:50 Slp:         
2013-03-03 22:44:50 Slp:     Stack: 
2013-03-03 22:44:50 Slp:         at Microsoft.SqlServer.Chainer.Infrastructure.DataStoreService.DeserializeObject(String rootPath, Type type, String elementXPath)
2013-03-03 22:44:50 Slp:         at Microsoft.SqlServer.Chainer.Infrastructure.DataStoreService.DeserializeObject(String rootPath, Type type)
2013-03-03 22:44:50 Slp:         at Microsoft.SqlServer.Configuration.SetupExtension.FinalCalculateSettingsAction.ExecuteAction(String actionId)
2013-03-03 22:44:50 Slp:         at Microsoft.SqlServer.Chainer.Infrastructure.Action.Execute(String actionId, TextWriter errorStream)
2013-03-03 22:44:50 Slp:         at Microsoft.SqlServer.Setup.Chainer.Workflow.ActionInvocation.ExecuteActionHelper(TextWriter statusStream, ISequencedAction actionToRun)
2013-03-03 22:44:50 Slp:     Inner exception type: System.InvalidOperationException
2013-03-03 22:44:50 Slp:         Message: 
2013-03-03 22:44:50 Slp:                 Unable to generate a temporary class (result=1).
2013-03-03 22:44:50 Slp:                 error CS0583: Internal Compiler Error (0xc0000017 at address 000007FEFD00AA7D): likely culprit is 'IMPORT'.
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'IMPORT' symbol 'System.Xml.Serialization.XmlSerializationReader'
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'IMPORT' symbol 'Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderClusterNodesStatusPublicConfigObject'
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderClusterNodesStatusPublicConfigObject'
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml.Serialization.GeneratedAssembly'
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml.Serialization'
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft.Xml'
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'PREPARE' symbol 'Microsoft'
2013-03-03 22:44:50 Slp:                 error CS0584: Internal Compiler Error: stage 'PREPARE' symbol '<global namespace>'
2013-03-03 22:44:50 Slp:                 error CS0586: Internal Compiler Error: stage 'PREPARE'
2013-03-03 22:44:50 Slp:                 error CS0587: Internal Compiler Error: stage 'PREPARE'
2013-03-03 22:44:50 Slp:                 error CS0587: Internal Compiler Error: stage 'BEGIN'
2013-03-03 22:44:50 Slp:                 
2013-03-03 22:44:50 Slp:         Stack: 
2013-03-03 22:44:50 Slp:                 at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
2013-03-03 22:44:50 Slp:                 at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)
2013-03-03 22:44:50 Slp:                 at System.Xml.Serialization.TempAssembly..ctor(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, String location, Evidence evidence)
2013-03-03 22:44:50 Slp:                 at System.Xml.Serialization.XmlSerializer.GenerateTempAssembly(XmlMapping xmlMapping, Type type, String defaultNamespace)
2013-03-03 22:44:50 Slp:                 at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace)
2013-03-03 22:44:50 Slp:                 at Microsoft.SqlServer.Chainer.Infrastructure.DataStoreService.DeserializeObject(String rootPath, Type type, String elementXPath) 
```

我的第一个怀疑是我的临时目录遇到了某种权限问题，但是我尝试运行 ProcMon 并且在运行设置时没有发现任何 ACCESS DENIED 结果。此外，由于 PowerShell 脚本和 UAC 已关闭，我明确地以本地管理员 (vagrant) 身份运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:15:56.533

我可能会列出很多我为追踪它所做的事情，但最后我发现失败并不是特定于通过 Chef 甚至 Ruby 运行安装程序。本质上，每当我使用另一个进程*通过*WinRM 安装 SQL Server 时，它都会出错，即使是 PowerShell，也会在安装程序日志中产生 OutOfMemoryException。

这最终让我想知道通过 WinRM 执行安装程序有什么不同。然后我有了一个想法。如果我是 Microsoft，我可能会围绕 WinRM 拥有一些企业特性，从而限制服务器上的攻击面。显然 WinRM 有一个名为[Quota Management](http://msdn.microsoft.com/en-us/library/windows/desktop/ee309367%28v=vs.85%29.aspx)的功能。

简而言之，修改我的 Windows 来宾 VM 的本地组策略解决了这个问题，我终于能够通过 WinRM 和 Chef 成功安装 SQL Server（使用我上面的 PS 脚本）。以下是我使用的设置：

> 控制台根目录 | 本地计算机政策 | 电脑配置 | 管理模板 | Windows 组件 | Windows 远程外壳
> 
> *   最大并发用户数：100
> *   MaxMemoryPerShellMB: 0
> *   MaxProcessesPerShell：0
> *   MaxShellsPerUser：0

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-02T14:41:32.977

我在服务器 2016（可能还有旧版本）上通过 DSC 安装 sql server 时也遇到了这个问题

您也可以直接通过 powershell 设置此选项：

```
set-item WSMan:\localhost\Shell\MaxMemoryPerShellMB 2048 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T01:54:17.497

从那[张票 Chef COOK-1172](http://tickets.opscode.com/browse/COOK-1172)中，Julian C. Dunn [Chef] 添加了评论

我们相信微软现在在以下修补程序中修复了这个问题，这将恢复 WinRM 对 MaxMemoryPerShellMB 的尊重：http: [//support.microsoft.com/kb/2842230](http://support.microsoft.com/kb/2842230)

不幸的是，这对我不起作用。我仍然有同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T10:07:51.780

现在已经花了很多天来追逐这个，我发现在我的情况下，根本原因是当我在无人参与文件中包含任何类型的密码时，它在通过 WinRM 安装时失败。

这可以通过使用 CredSSP 来解决

# html - 动画 scrollTop 不适用于 iScroll

> ID：15206550
> 
> 赞同：2
> 
> 时间：2013-03-04T16:44:00.693
> 
> 标签：html, css, jquery-animate, scrolltop, iscroll

我已经就我正在处理的这个项目发布了一些问题，这是我最新的问题！

我在页面 A 上设置了一个单击事件，以将锚标记的 ID 传递到页面 B，因此我可以将其用作 scrollTop 动画的标记。我还设置了 iScroll 以允许在页面上滚动而不影响底部的固定导航。

iScroll 在页面 A 上工作正常，scrollTop 在页面 B 上工作正常。当我尝试将 iScroll 添加到页面 B 时，它会干扰 scrollTop 并导致它停止工作。我已经尝试过调试，它似乎是包装器 div 特别是导致问题的原因，这个或事实上它绝对定位。我尝试了几种不同的方法来修复它，但我似乎只是在绕圈子。有没有人能够看看他们是否能发现错误，因为它让我发疯？

代码如下！

```
<div id="wrapper">
   <div id="scroller">
      Content   
   </div>
</div>

<div id="footer">
    Content
</div>

#footer { 
    position: fixed;
    z-index: 2;
    bottom: 0; 
    left: 0; 
    width: 100%; 
    padding: 0;  
    height: 65px; 
}
#wrapper { 
    position: absolute; 
    z-index: 1; 
    top: 0; 
    bottom: 90px; 
    left: 0; 
    width: 100%; 
    overflow: auto; 
    color: #696868; 
}
#scroller {
   position:absolute; 
   paddding:0; 
   margin: 0 20px;
}

// Store div ID in local Storage
var storage = window.localStorage;
$("a.scroll_link").click(function(event) {
    event.preventDefault();

    var value = $(this).attr("id");
    storage.setItem("key",value);

    window.location=$(this).attr("href");
});

$(document).ready(function() {
//Retrieve ID from local storage
var value = window.localStorage.getItem("key");
console.info(value);

    //If null then re-define
    if (value != "" && value != "undefined" && value != null) {
        var storage = window.localStorage;
        storage.setItem("key",value);
        var scroll_type = "";

        if ($.browser.webkit) {
            scroll_type = "body";
        } else {
            scroll_type = "html";
        }

        //Scroll to position based on ID
        $(scroll_type)
            .stop()
            .animate({
            //get top-position of target-element and set it as scroll target
            scrollTop: ($("#" + value).offset().top - 25)
            //scrolldelay: 1.5 seconds
        }, {
            duration: 1500,
            complete: function () {
                storage.clear(); //Clear item from local storage
            },
        });
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:45:32.283

所以我终于找到了一种方法来做到这一点（花了我很长时间，但我到了那里！）下面更新，以防其他人遇到这个！

我没有使用 scrollTop 动画来滚动页面，而是遇到了 iScroll 自己的称为[ScrollToElement](http://cubiq.org/iscroll-3-5-adds-scrolltoelement)的函数，我一开始就让它工作，但后来意识到我的 localStorage 值正在影响代码并导致它中断。固定代码如下：

页面 A - 点击事件将锚点 ID 传递到下一页

```
// Local storage scrollTo
var storage = window.localStorage;
$("a.scroll_link").click(function(event) {
    event.preventDefault();

    var value = $(this).attr("id");
    storage.setItem("key",value);

    window.location=$(this).attr("href");
}); 
```

页面 B - 接收 ID 并滚动到具有相应 ID 的元素

```
//Retrieve ID from local storage
var value = window.localStorage.getItem("key");
value = value.replace(value, "a#" + value);

// Scroll to element after .5 second
setTimeout(function(){
    myScroll.scrollToElement(value, 1500);  
    return false;

}, 500)

// Clear local storage to prevent scrolling on page reload
localStorage.clear(); 
```

为了使用 localStorage 进行这项工作，我发现我必须稍微更改从 localStorage 传递的值，传递的值只是 ID 减去 # (#ID = ID) 并且 scrollToElement 需要 ID 采用以下格式#ID，使用简单的替换，我能够改变传递的值，然后让 scrollToElement 工作！

# android - Android：在 Eclipse 中重命名包

> ID：15206553
> 
> 赞同：4
> 
> 时间：2013-03-04T16:44:09.893
> 
> 标签：android, eclipse, package

有没有办法将 Eclipse 命令“Android 工具 -> 重命名应用程序包”作为 shell 脚本执行？

我想用不同的选项（例如免费和付费版本）多次编译我的 Android 应用程序，而无需手动执行某些操作。自动执行此操作很重要。像图书馆这样的所有解决方案都无济于事，因为有几件事必须手工完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:00:39.237

对的，这是可能的。您必须手动调用`aapt`工具来打包编译的项目，然后`aapt`再次调用以添加类，将其签名`jarsigner`并与`zipalign`. 通常，Eclipse ADT 插件会为您完成构建步骤链。

以下是步骤的示例调用。

1.  使用不同的包名打包应用程序：

    ```
    aapt package -f -M ./AndroidManifest.xml -S res/ \
        -I android.jar -F renamed_project.apk.unaligned \
        --rename-manifest-package "com.example.some_new_package" -v 
    ```

2.  然后添加类：

    ```
    aapt add -f renamed_project.apk.unaligned classes.dex -v 
    ```

3.  签字：

    ```
    jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 \
        -keystore "some_keystore_file" \ 
        renamed_project.apk.unaligned "key_name" 
    ```

4.  对齐它：

    ```
    zipalign -v 4 renamed_project.apk.unaligned renamed_project.apk 
    ```

例如，可以在[此处](http://spin.atomicobject.com/2011/08/22/building-android-application-bundles-apks-by-hand/)找到更多信息。

您也可以使用`Ant`. [在这里](http://www.evertrue.com/blog/2012/06/15/how-to-rename-package-name-using-ant-for-android/#.UTTgZ-tevzI)您可以找到更多信息。

# javascript - 如何专注于 HTML 表格中的行？

> ID：15206556
> 
> 赞同：0
> 
> 时间：2013-03-04T16:44:15.280
> 
> 标签：javascript, html, google-chrome, web, safari

是否可以在 Javascript 的帮助下专注于特定的 HTML 表格行/单元格？例如，如果该行在浏览器折叠之后，则浏览器将向下滚动到焦点所在的行。

我有一些 JS 代码在 HTML 表中搜索用户的字符串输入。然后，如果找到此词（Safari/Chrome 浏览器），我希望此代码专注于该词。

```
var targetTable = document.getElementById("accountTable");

for (var rowIndex = 1 + searchStart; rowIndex < targetTable.rows.length; rowIndex++)
{
    var rowData = '';
    rowData = targetTable.rows.item(rowIndex).cells.item(0).textContent;
    if (rowData.indexOf(str) != -1)
    {
                //focus on the row?
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:58:20.157

您可以为每一行提供一个与内容匹配的 HTML ID（动态或静态取决于您的需要），然后使用 URI 片段来关注它。您基本上可以使用您当前的代码并使用

```
location.hash = rowData; 
```

如果内容与用户输入匹配。如果您想要关注的行中有整个句子，这当然会很麻烦，但是对于一个简单的表格，它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:05:40.720

我能够通过使用[scrollIntoView()](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)来实现这一点。

# c++ - C ++读取具有多列的文件

> ID：15206559
> 
> 赞同：5
> 
> 时间：2013-03-04T16:44:22.353
> 
> 标签：c++

我想读取一个包含多列、不同变量类型的文件。列数不确定，但在 2 或 4 之间。例如，我有一个文件：

> *   字符串整数
> *   字符串 int 字符串双精度
> *   字符串 int 字符串
> *   字符串 int 字符串双精度

谢谢！

我进行了编辑以将列数更正为 2 或 5，而不是最初写的 4 或 5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:51:10.813

您可以先阅读该行[`std::getline`](http://www.cplusplus.com/reference/string/string/getline/)

```
std::ifstream f("file.txt");
std::string line;
while (std::getline(f, line)) {
...
} 
```

然后用[`stringstream`](http://www.cplusplus.com/reference/sstream/stringstream/)

```
std::string col1, col3;
int col2;
double col4;
std::istringstream ss(line);
ss >> col1 >> col2;
if (ss >> col3) {
    // process column 3
    if (ss >> col4) {
        // process column 4
    }
} 
```

如果列可能包含不同的类型，则必须先读入字符串，然后尝试确定正确的类型。

# linux - bash：遍历procces输出并终止进程

> ID：15206567
> 
> 赞同：4
> 
> 时间：2013-03-04T16:44:52.400
> 
> 标签：linux, bash, command, ubuntu-12.04, output

我需要以下帮助：

我使用 linux 编写发送到设备的命令。我需要向设备提交一个 grep logcat 命令，然后在生成它时迭代它的输出并查找特定的字符串。找到此字符串后，我希望我的脚本移至以下命令。

在伪代码中

```
for line in "adb shell logcat | grep TestProccess"
do 
    if "TestProccess test service stopped" in line:
       print line
       print "TestService finished \n"
       break
    else:
       print line
done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:49:15.793

```
adb shell logcat | grep TestProcess | while read line
do
  echo "$line"
  if [ "$line" = "TestProces test service stopped" ]
  then echo "TestService finished"
       break
  fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:56:19.033

```
adb shell logcat | grep -Fqm 1 "TestProcess test service stopped" && echo "Test Service finished" 
```

旗帜`grep`：

1.  `-F`- 按字面意思处理字符串，而不是正则表达式
2.  `-q`- 不要将任何内容打印到标准输出
3.  `-m 1`- 在第一场比赛后停止

只有在找到匹配`&&`项时才会执行该命令。`grep`只要您“知道”`grep`最终会匹配并希望在它返回后无条件地继续，只需不要`&& ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:34:25.467

您可以使用 until 循环。

```
adb shell logcat | grep TestProccess | until read line && [[ "$line" =~ "TestProccess test service stopped" ]]; do
 echo $line;
done && echo -n "$line\nTestService finished" 
```

# ruby - 如何水平合并多个 CSV 文件？

> ID：15206568
> 
> 赞同：1
> 
> 时间：2013-03-04T16:44:53.563
> 
> 标签：ruby, csv

我有大约 50 个 CSV 文件需要水平合并为一个 CSV。

标题可以忽略。稍微简化一下文件如下所示：

文件 1：

```
1,2,4,5,6
4,5,68,7,4,2
1,2

1,2,3 
```

文件 2：

```
1,2,4
4,5,6,4
3,4,5
3,4,5 
```

输出应如下所示：

```
1,2,4,5,6,1,2,4
4,5,68,7,4,2,4,5,6,4
1,2,3,4,5
3,4,5
1,2,3 
```

合并文件的顺序也不重要。我知道如何垂直合并它们，但我不知道如何水平合并。我想过这样的嵌套数组，但它不起作用，但我不知道为什么。数据阵列似乎不接受线阵列。

```
#!/usr/bin/env ruby
require 'csv'
data = Array.new
filecount=1
linecount=1

CSV.open("output.csv", "wb") do |output|
  Dir.glob('*.csv').each do |each|
    next if each == 'output.csv'
    file = CSV.read(each)
    file.each do |line|
      data[filecount][linecount] = line
      linecount=linecount+1
    end
    filecount=filecount+1
  end
end

puts data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:52:47.517

我准备了一个小脚本来解决您的问题，并添加了一些注释以便更好地解释。

主要思想是逐行捕获输入，因此您不必使用太多内存。

```
#!/usr/bin/env ruby
require 'csv'

# map "treats" each element of the array with the block
files = Dir.glob('csv/*.csv').map { |file| CSV.open file, 'r' }

CSV.open("output.csv", "wb") do |out|
    loop do
        # shift returns the next line
        # compact remove nil entries
        line = files.map { |file| file.shift }.compact
        # remove entry if file has no row
        line.reject! { |e| e.empty? }
        # break the endless loop if no input to handle
        break if line.empty?
        out << line.flatten
    end
end 
```

# java - 如何从 gui 中获取值并应用合适的构造函数或方法

> ID：15206570
> 
> 赞同：0
> 
> 时间：2013-03-04T16:45:06.097
> 
> 标签：java, swing, oop, inheritance, dynamic-programming

我是新手程序员，学习使用面向对象的编程概念（继承和重载构造函数方法）

现在我已经创建（主要是复制）一个代码，它将从用户那里获取 5 个输入并显示一个输出。现在使用方法重载它也可以接受 3 个输入并显示它们相同的输出。

现在如何在 Swing GUI 中实现它。图形用户界面是这样的

![图形用户界面图像](../Images/cba5ca434fb6ed14d24c1af2282b052e.png)

用户可以给出所有值，也可以只给出宽度、高度和深度中的一个。

主要代码是

`

```
class box
{
    private double width;
    private double height;
    private double depth;
    box(box ob)
    {
        width =ob.width;
        height=ob.height;
        depth =ob.depth;
    }
    box(double w,double h,double d)

    {
        width=w;
        height=h;
        depth=d;
    }
    box()
    {
        width=-1;
        height=-1;
        depth=-1;
    }
    box(double len)
    {
        width=height=depth=len;
    }
    double volume()
    {
        return width*depth*height;
    }

 }

class boxweight extends box
{
    private double weight;
    boxweight(boxweight ob)
    {
        super(ob);
        weight= ob.weight;
    }
    boxweight(double w,double h,double d,double m)
    {
        super(w,h,d);
        weight=m;
    }

    boxweight(double len,double m)
    {
        super(len);
        weight=m;

    }

    boxweight() 
    {
        super();
        weight=-1;
    }

    double weightcal()
    {
        return (volume()*weight);
    }

}

class shipment extends boxweight
{
    private double cost;

    shipment(shipment ob) 
    {
        super(ob);
        cost=ob.cost;

    }

    shipment(double w,double h,double d,double m,double c) 
    {
        super(w,h,d,m);
        cost=c;
    }
    shipment (double len,double m,double c)
    {
        super(len,m);
        cost=c;

    }

    shipment() 
    {
        super();
        cost=-1;
    }
    double costcal()
    {
        return(weightcal()*cost);
    }

}

public class Inheritanceallhere {

    public static void main(String[] args) {

        shipment o1=new shipment(10,20,30,40,50);
        shipment o3=new shipment(18.17122,40,50);
        double vol;
        vol = o1.volume();
        System.out.println("Volume of shipment1 is " + vol);
        System.out.println("Weight of shipment1 is "+ o1.weightcal());
        System.out.println("Shipping cost: $" + o1.costcal());
        System.out.println();
        vol =o3.volume();
        System.out.println("Volume of shipment2 is " + vol);
        System.out.println("Weight of shipment2 is "+ o3.weightcal());
        System.out.println("Shipping cost: $" + o3.costcal());

    }
} 
```

`

现在我想要什么，当我按下计算按钮时，它将采用可用值并为其分配适当的方法

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
       double a,b,c,d,e;
       firstsubclass o2=new firstsubclass();
       a=Double.parseDouble(jTextField1.getText());
       b=Double.parseDouble(jTextField2.getText());
       c=Double.parseDouble(jTextField4.getText());
       d=Double.parseDouble(jTextField5.getText());
       e=Double.parseDouble(jTextField6.getText());
       shipment o3=new shipment(a,b,c,d,e);

       jTextField3.setText(String.valueOf(o3.costcal())); 
```

}

我做了这段代码来获取所有五个输入然后计算。但我不能对三个值做同样的事情（其中任何一个宽度高度或深度字段都可用）。我知道我可以使用一些控制语句来确定哪种方法可以工作，但我想知道 java 中是否有任何动态控制，以便我可以直接执行此操作而无需任何额外代码。

注意：两个代码都在同一个包中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:31:28.333

> 我如何制作一个可以理解有多少输入可用的程序并基于此进行计算？

您单独测试每个字段。

```
if (!jTextField1.getText().trim().equals("")) {
    a = Double.parseDouble(jTextField1.getText().trim());
} 
```

然后测试 Double 值以查看已设置的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:06:34.153

我建议您查看 Java 集合框架，特别`ArrayList`是作为一个用于一般用途的好集合。

[http://docs.oracle.com/javase/7/docs/technotes/guides/collections/index.html](http://docs.oracle.com/javase/7/docs/technotes/guides/collections/index.html)

如果你的程序有 n 个东西，但在“编译时”你不知道有多少东西，你可以编写你的逻辑来期望一个东西列表，然后循环这个列表。

# json - 如何将数据框转换为嵌套列表？

> ID：15206576
> 
> 赞同：7
> 
> 时间：2013-03-04T16:45:19.957
> 
> 标签：json, r, list, dataframe

我有一个数据框，我想将其转换为具有自定义嵌套级别的嵌套列表。我就是这样做的，但我确信有更好的方法：

```
data <- data.frame(city=c("A", "A", "B", "B"), street=c("a", "b", "a", "b"), tenant=c("Smith","Jones","Smith","Jones"), income=c(100,200,300,400))

nested_data <- lapply(levels(data$city), function(city){
    data_city <- subset(data[data$city == city, ], select=-city)
    list(city = city, street_values=lapply(levels(data_city$street), function(street){
        data_city_street <- subset(data_city[data_city$street == street, ], select=-street)
        tenant_values <- apply(data_city_street, 1, function(income_tenant){
            income_tenant <- as.list(income_tenant)
            list(tenant=income_tenant$tenant, income=income_tenant$income)
        })
        names(tenant_values) <- NULL
        list(street=street, tenant_values=tenant_values)
    }))
}) 
```

JSON 中的输出如下所示：

```
library(rjson)
write(toJSON(nested_data), "")
[{"city":"A","street_values":[{"street":"a","tenant_values":[{"tenant":"Smith","income":"100"}]},{"street":"b","tenant_values":[{"tenant":"Jones","income":"200"}]}]},{"city":"B","street_values":[{"street":"a","tenant_values":[{"tenant":"Smith","income":"300"}]},{"street":"b","tenant_values":[{"tenant":"Jones","income":"400"}]}]}]

# or prettified:

[
  {
    "city": "A",
    "street_values": [
      {
        "street": "a",
        "tenant_values": [
          {
            "tenant": "Smith",
            "income": "100"
          }
        ]
      },
      {
        "street": "b",
        "tenant_values": [
          {
            "tenant": "Jones",
            "income": "200"
          }
        ]
      }
    ]
  },
  {
    "city": "B",
    "street_values": [
      {
        "street": "a",
        "tenant_values": [
          {
            "tenant": "Smith",
            "income": "300"
          }
        ]
      },
      {
        "street": "b",
        "tenant_values": [
          {
            "tenant": "Jones",
            "income": "400"
          }
        ]
      }
    ]
  }
] 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T17:43:40.000

使用`split`它来帮助您完成大部分工作，以及`rapply`最后一步：

```
nestedList <- rapply(lapply(split(data[-1], data[1]), 
                            function(x) split(x[-1], x[1])), 
                     f = function(x) as.character(unlist(x)), 
                     how = "replace") 
```

这是输出：

```
nestedList
# $A
# $A$a
# $A$a$tenant
# [1] "Smith"
# 
# $A$a$income
# [1] "100"
# 
# 
# $A$b
# $A$b$tenant
# [1] "Jones"
# 
# $A$b$income
# [1] "200"
# 
# 
# 
# $B
# $B$a
# $B$a$tenant
# [1] "Smith"
# 
# $B$a$income
# [1] "300"
# 
# 
# $B$b
# $B$b$tenant
# [1] "Jones"
# 
# $B$b$income
# [1] "400" 
```

和结构：

```
> str(nestedList)
List of 2
 $ A:List of 2
  ..$ a:List of 2
  .. ..$ tenant: chr "Smith"
  .. ..$ income: chr "100"
  ..$ b:List of 2
  .. ..$ tenant: chr "Jones"
  .. ..$ income: chr "200"
 $ B:List of 2
  ..$ a:List of 2
  .. ..$ tenant: chr "Smith"
  .. ..$ income: chr "300"
  ..$ b:List of 2
  .. ..$ tenant: chr "Jones"
  .. ..$ income: chr "400" 
```

该结构与您正在寻找的不完全匹配，但这可能有助于您开始使用另一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T13:33:28.913

我通过将函数更改为：

```
nestedList <- rapply(lapply(split(df[-1], df[1]),
                          function(x) split(x[-1], x[1])),
                   f = function(x) as.data.frame(as.list(split(x,x))),  how = "replace") 
```

# sql - 如何遍历表并在一个字段中查找具有相同值的相邻行并在 SQL 中有条件地更新另一列？

> ID：15206577
> 
> 赞同：1
> 
> 时间：2013-03-04T16:45:21.893
> 
> 标签：sql, sql-server, recursion

我有一个表，其中有一个名为“group_quartile”的字段，它使用 sql ntile() 函数根据他们的活动分数计算每个客户所在的四分位数。但是使用这个 ntile(0 函数我发现有一些客户具有相同的活动分数但在不同的四分位数。我需要修改'group-quartile'列以使具有相同活动分数的所有客户都位于同一个 group_quartile。

表值的视图：

```
Customer_id  Product Activity_Score Group_Quartile
 CH002          T         2328                 1
 CR001          T         268                  1
 CN001          T         178                  1
 MS006          T         45                   2
 ST001          T         21                   2
 CH001          T         0                    2
 CX001          T         0                    3
 KH001          T         0                    3
 MH002          T         0                    4
 SJ003          T         0                    4
 CN001          S         439                  1
 AC002          S         177                  1
 SC001          S         91                   2
 PV001          S         69                   3
 TS001          S         0                    4 
```

我使用了 CTE 表达式，但它不起作用。我的查询仅更新（来自上面的示例）：

```
 CX001          T         0                    3 
```

修改为

```
 CX001          T         0                    2 
```

所以只检查第一个重复活动分数，并且该行的 group_quartile 更新为 2。我还需要更新以下所有行。

```
 CX001          T         0                    3
 KH001          T         0                    3
 MH002          T         0                    4
 SJ003          T         0                    4 
```

我不能使用 DENSE_RANK() 而不是四分位数来分隔记录，因为将每个产品的客户安排在大约 4 个四分位数中是一项业务要求。据我了解，我需要遍历表格 -

1.  查找与其前身具有相同活动分数和相同产品但具有不同 group_quartile 的行
2.  将选定行的 group_quartile 更新为其前任的四分位数
3.  然后再次遍历**更新**的表以查找具有上述条件的任何行，并类似地更新该行。
4.  循环继续，直到具有相同活动分数（对于相同产品）的所有行都放在同一个 group_quartile 中。

--
这是我正在处理的表结构：

CREATE TABLE #custs
(
customer_id NVARCHAR(50),
PRODUCT NVARCHAR(50),
ACTIVITYSCORE INT,
GROUP_QUARTILE INT,
RANKED int,
rownum int
)
INSERT INTO #custs
-- 添加一列以为每一行提供行号（唯一 id）
SELECT customer_id, PRODUCT, ACTIVITYSCORE,GROUP_QUARTILE,RANKED,
Row_Number() OVER(partition by product ORDER BY activityscore desc) N
FROM
-- 基于“细分”列值从父表派生的行
（SELECT customer_id, PRODUCT, ACTIVITYSCORE,
DENSE_RANK( ) 超过（按产品顺序按 ActivitySCORE DESC 划分）排名，
NTILE(4) OVER(PARTITION BY PRODUCT ORDER BY ACTIVITYSCORE DESC) AS GROUP_QUARTILE
FROM #parent_score_table WHERE (SEGMENTATION = 'Large')
) as temp
ORDER BY PRODUCT

* * *

我用来部分实现此目的的方法如下：

-- 查询查找活动分数与其前一行相同但具有
不同 GRoup_Quartiel 值的行。
-- 我需要使用查询来更新这一行。
-- 接下来，在这个新更新的表中查找活动分数与其
前一行相同但具有不同 group_quartile 值的任何行。
-- 继续以上述方式更新表格，直到所有具有相同活动分数的行
都已更新为具有相同的四分位数

我设法仅找到活动分数与其前一行相同但具有不同 Group_Quartill 值的行但是无法循环查找可能与此更新行匹配的新行。

选择 t1.customer_id,t1.ACTIVITYSCORE,t1.PRODUCT, t1.RANKED, t1.GROUP_QUARTILE,
t2.GROUP_QUARTILE as modified_quartile
from #custs t1, #custs t2
where (
t1.rownum = t2.rownum + 1
and t1.ACTIVITYSCORE = t2.ACTIVITYSCORE
和 t1.PRODUCT = t2.PRODUCT
而不是(t1.GROUP_QUARTILE = t2.GROUP_QUARTILE))

任何人都可以帮助解决上述的 t-sql 语句吗？干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:26:05.517

假设您已经建立了`Group_Quartile`上述基础，您可以使用类似于以下内容的查询来更新表：

```
update a
set Group_Quartile = coalesce(topq.Group_Quartile, a.Group_Quartile)
from activityScores a
  outer apply
  (
    select top 1 Group_Quartile
    from activityScores topq
    where a.Product = topq.Product
      and a.Activity_Score = topq.Activity_Score
    order by Group_Quartile
  ) topq 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/35d32/3)。

**评论后编辑：**

我认为你已经通过工作完成了很多`Group_Quartile`工作。

对于表中的每一行，上面的语句将使用该`outer apply`语句连接另一行。`top 1`由于该子句，只有一行将连接回原始表。

因此，对于每一行，我们将再返回一行。额外的行将在`Product`和上匹配`Activity_Score`，并且将是具有最低`Group_Quartile`( `order by Group_Quartile`) 的行。最后，我们用这个最低值更新原始行，`Group_Quartile`因此每一行都具有相同的值`Product`，`Activity_Score`现在将具有相同的最低值`Group_Quartile`。

所以*SJ003*、*MH002 等都*将匹配到*CH001*并更新为*CH001*`Group_Quartile`的值，即*2*。

 **代码很难解释！另一件可能有帮助的事情是在没有更新语句的情况下查看连接：

```
select a.*
  , TopCustomer_id = topq.Customer_Id
  , NewGroup_Quartile = topq.Group_Quartile
from activityScores a
  outer apply
  (
    select top 1 *
    from activityScores topq
    where a.Product = topq.Product
      and a.Activity_Score = topq.Activity_Score
    order by Group_Quartile
  ) topq 
```

[SQL Fiddle 没有更新](http://sqlfiddle.com/#!3/35d32/6)。**

# python - python中2个程序之间的通信

> ID：15206580
> 
> 赞同：9
> 
> 时间：2013-03-04T16:45:23.057
> 
> 标签：python, sockets, inter-process-communicat

我有 2 个程序都在 python 中，一个是第 3 方并且已经制作好了。我想在前台运行一个，在后台运行一个。我想在两个程序之间建立通信，所以我可以告诉前台的程序做某事，然后它告诉另一个程序做某事。比如在前台程序上我按下一个按钮，然后告诉其他程序做某事。最好的方法是什么？

我知道我以前问过一个关于这个的问题，但我觉得人们可能觉得这个问题太具体了，所以我写了一个更简化的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T17:27:55.477

根据我的经验，rpyc 是迄今为止最简单、最优雅、最灵活的方式。[http://rpyc.readthedocs.org/en/latest/](http://rpyc.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:39:49.473

您可以使用[多处理](http://docs.python.org/2/library/multiprocessing.html#managers)模块中的管理器。

# php - 使用 jquery 缩放/缩放网站内容以适应浏览器区域

> ID：15206583
> 
> 赞同：0
> 
> 时间：2013-03-04T16:45:45.343
> 
> 标签：php, jquery, html, css, cross-browser

我编写了一个用 php 编写的小型网站，具有固定的 869px 宽度以在每个屏幕上正确显示。我也想把它整合到其他不同宽度的页面上，有时比原来的尺寸更宽。

我尝试了一些解决方案，但它们似乎都不能跨浏览器工作，或者不能缩放包装器中的内容。我也在尝试使用视口属性，但没有成功。

我正在寻找一些跨浏览器的 jquery 脚本，它使用浏览器的缩放效果来使内容适合浏览区域。我在主体中有一个名为 wrapper 的 div，我想缩放它和其中的内容，就像我在浏览器中使用 CTRL + 键一样。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T16:48:23.037

您可以使用 Bootstrap 来扩展您的内容 ( [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) )。如果您还想调整字体大小，您可以使用 LESS 构建或使用纯 JavaScript（例如使用 JQuery）。

您可以将页面包装成

```
<div class="container-fluid">
</div> 
```

在各种标准分辨率下自动缩放。您可以通过覆盖 bootstrap.min.css 来调整宽度。可以在此处找到有关如何启用响应式功能的指南：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

您可以添加`row-fluid`类 div 并使用`span`类来对齐您的内容。更多关于如何使用网格系统的信息：http: [//twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

对于 LESS，我可以推荐他们的主页： http: [//lesscss.org/](http://lesscss.org/)

这是一篇较旧的 StackOverflow 文章，说明了如何从 JavaScript 中插入变量：[Less 中的变量操作](https://stackoverflow.com/questions/8920131/variable-manipulation-in-less)

也许使用 LESS 已经足以满足您的需求。

# java - 获取“尝试改变通知”异常

> ID：15206586
> 
> 赞同：15
> 
> 时间：2013-03-04T16:45:55.863
> 
> 标签：java, swing, jtextpane

我的目标是实现用户在 JTextPane 中写入的关键字的蓝色。这就是我的代码的样子：

```
private class DocumentHandler implements DocumentListener {

        @Override
        public void changedUpdate(DocumentEvent ev) {
        }

        @Override
        public void insertUpdate(DocumentEvent ev) {
            highlight();
        }

        @Override
        public void removeUpdate(DocumentEvent ev) {
            highlight();
        }

        private void highlight() {
            String code = codePane.getText();
            SimpleAttributeSet defSet = new SimpleAttributeSet();
            StyleConstants.setForeground(defSet, Color.BLACK);
            doc.setCharacterAttributes(0, code.length(), defSet, true);
            SimpleAttributeSet set = new SimpleAttributeSet();
            StyleConstants.setForeground(set, Color.BLUE);
            for (String keyword : keywords) {
                Pattern pattern = Pattern.compile(keyword + "(\\[\\])*");
                Matcher matcher = pattern.matcher(code);
                while (matcher.find()) {

                    //Just for test
                    System.out.print("Start index: " + matcher.start());
                    System.out.print(" End index: " + matcher.end());
                    System.out.println(" Found: " + matcher.group());

                    doc.setCharacterAttributes(matcher.start(), keyword.length(), set, true);
                }
            }
        }
    } 
```

在窗格中输入任何内容后，我得到：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalStateException: Attempt to mutate in notification
    at javax.swing.text.AbstractDocument.writeLock(AbstractDocument.java:1338)
    at javax.swing.text.DefaultStyledDocument.setCharacterAttributes(DefaultStyledDocument.java:500)
    at jnotepad.MainPanel$DocumentHandler.highlight(MainPanel.java:121)
    at jnotepad.MainPanel$DocumentHandler.insertUpdate(MainPanel.java:108)
    at javax.swing.text.AbstractDocument.fireInsertUpdate(AbstractDocument.java:202)
    at javax.swing.text.AbstractDocument.handleInsertString(AbstractDocument.java:749) 
```

如何解决我的问题？也许我应该使用 DocumentListener 以外的东西？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-04T17:02:21.870

您需要从 Event Dispatcher Thread 调用对文档的更改。

尝试这个：

```
private void highlight() {

    Runnable doHighlight = new Runnable() {
        @Override
        public void run() {
            // your highlight code
        }
    };       
    SwingUtilities.invokeLater(doHighlight);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T01:52:42.947

我有同样的问题，我用这个解决了它：

```
expiration_timeTF.getDocument().addDocumentListener(
            new DocumentListener() {
                @Override
                public void removeUpdate(DocumentEvent e) {
                    System.out.println("remove");
                }

                private void assistDateText() {
                    Runnable doAssist = new Runnable() {
                        @Override
                        public void run() {
                            // when input "2013",will add to "2013-";when
                            // input "2013-10",will add to "2013-10-"
                            String input = expiration_timeTF.getText();
                            if (input.matches("^[0-9]{4}")) {
                                expiration_timeTF.setText(input + "-");
                            } else if (input.matches("^[0-9]{4}-[0-9]{2}")) {
                                expiration_timeTF.setText(input + "-");
                            }
                        }
                    };
                    SwingUtilities.invokeLater(doAssist);
                }

                @Override
                public void insertUpdate(DocumentEvent e) {
                    // System.out.println("insert");
                    assistDateText();
                }

                @Override
                public void changedUpdate(DocumentEvent e) {
                    // System.out.println("change");
                }
            }); 
```

# google-app-engine - 我应该多久重建一次 App Engine 搜索索引（全文搜索）？

> ID：15206589
> 
> 赞同：1
> 
> 时间：2013-03-04T16:46:03.273
> 
> 标签：google-app-engine, python-2.7, full-text-search, gae-search

看起来——至少现在是这样——我必须手动保持搜索索引与数据存储同步。如果我每次在数据存储中发生更改时都重建索引，我假设我会遇到配额问题，所以我认为创建一个 cron 作业来定期重建索引会更好。我应该多久重建一次索引以避免遇到配额问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:13:04.747

在`ndb`将[实体](https://developers.google.com/appengine/docs/python/ndb/entities#hooks)与`_post_put_hook`.

例如：

```
class MyModel(ndb.Model):
    title = ndb.StringProperty()

    def _post_put_hook(self, future):
        fields = [search.TextField(name='title', value=self.title)]
        doc    = search.Document(doc_id=self.key.id(), fields=fields)
        search.Index('index-name').put(doc)
        ... 
```

[https://developers.google.com/appengine/docs/python/ndb/modelclass#Model__post_put_hook](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model__post_put_hook)

# php - 如何在 jquery 自动完成文本框中显示 json 数据？

> ID：15206592
> 
> 赞同：0
> 
> 时间：2013-03-04T16:46:12.337
> 
> 标签：php, jquery, json

我有生成以下 json 数据的 php 文件

```
["Health Infoway","Canada Health Infoway","Infowiki","Info",......"Canada"] 
```

我在使用上述数据加载自动完成文本框时遇到问题。

下面是我的 jquery sript，它调用 getorgname.php 来获取上述数据

```
$("input[name=profileOrg]").keyup(function(){

    $( "input[name=profileOrg]" ).autocomplete({
        source: function(request, response) {
            $.getJSON('CHI_custom/customScripts/getorgname.php','user=' + $('#hiddenUser').val(), function(data){
                response($.map(data, function(item) {
            return item;
        }));

            }
        }
    }); }); 
```

以下是我生成 json 数据的 getorgname.php 文件

```
 $User = DekiUser::getCurrent();
 if($User->isAnonymous() || $User->getUserName() != $_REQUEST['user'])
 {
      scriptError("Inappropriate access");  
 }else{
    $ds = my_ldap_connect(CHI_LDAP_LOCATION, CHI_LDAP_PORT, CHI_LDAP_USE_TLS);
    $groups = get_all_groups($ds, CHI_LDAP_BASE_DN, CHI_LDAP_BIND_DIRECTORY, CHI_LDAP_BIND_PASSWORD);
    $sr = @ldap_search($ds, "ou=people,".CHI_LDAP_BASE_DN, "(uid=*)");
    $nt = ldap_get_entries( $ds, $sr );

    foreach( $nt as $each )
    {
        if( is_array( $each ) )
        {
            $json[] = $each['o'][0];

        }
    }

}

echo json_encode( $json ); 
```

我正在使用以下 jquery 文件来自动完成文本框

```
<script type="text/javascript" src="CHI_custom/customScripts/jquery.formwizard-3.0.5/js/jquery.min.js"></script>
<script type="text/javascript" src="CHI_custom/customScripts/jquery.formwizard-3.0.5/js/jquery-ui.min.js"></script> 
```

如何在我的自动完成文本框中显示这些 json 数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:59:05.757

更改您的代码，如下所示：

```
$.getJSON('CHI_custom/customScripts/getorgname.php','user=' + $('#hiddenUser').val(), function(data){
    $("input[name=profileOrg]").autocomplete({
        source: data
    });
}); 
```

并且无需将此代码包装在 keyup 事件中。所以删除那个。

这将解决您的问题。

# javascript - RSA 消息太长 Javascript JSBN

> ID：15206594
> 
> 赞同：4
> 
> 时间：2013-03-04T16:46:14.163
> 
> 标签：javascript, rsa, public-key-encryption, jsbn

我在 javascript 中使用 JSBN 来加密一组 facebook 数据字符串（消息），以安全地将它们发送到我的服务器（PHP）并在那里解密它们。

一些用户在类似的情况下遇到“消息太长”

```
"&fbemail='+fbemail+'&gender='+fbgender+'&birthday='+fbbirthday+'&name='+fbname+'&surname='+fbsurname+'&fbuser='+fbuserid" 
```

我通过以下方式生成了一个私钥：

```
$privateKey = openssl_pkey_new(array(
          'private_key_bits' => 1024,
          'private_key_type' => OPENSSL_KEYTYPE_RSA,
        )); 
```

为什么我会收到这条消息？消息不是那么长。

我看过以下帖子，但我不明白如何在 javascript 中使用 AES 而不会破坏 AES 密码。

[RSA 加密问题 [有效负载数据的大小]](https://stackoverflow.com/questions/5866129/rsa-encryption-problem-size-of-payload-data)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-24T13:05:18.023

不生成对称密钥并加密完整消息？使用更大的钥匙。1024 位密钥只能加密 117 个字节而无需某种填充，但 2048 位密钥最多可以处理 245 个字节，而 4096 位密钥最多可以处理 501 个字节。这可以使您的脚本处理更大的重音名称（非 ASCII 字符每个字符使用两个或更多字节）。

我最终遇到了类似的问题，但是 Thoman Pornin 对[RSA Encryption Problem [Size of payload data] 的](https://stackoverflow.com/questions/5866129/rsa-encryption-problem-size-of-payload-data "RSA 加密问题 [有效负载数据的大小]")回答很好地解释了这种限制的原因。

在阅读（相同的）Thomas Pornin 的回答后，也放弃了尝试将消息拆分为几个加密的块，[如果有效负载是，RSA 填充是否必须是不可预测的？](https://crypto.stackexchange.com/questions/1793/is-rsa-of-a-random-nonce-with-no-padding-safe/1799#1799 "如果有效载荷是，RSA填充是否必须是不可预测的？")

# ios - 在 iOS 上的 Objective-C 中查找几乎重复的字符串

> ID：15206596
> 
> 赞同：2
> 
> 时间：2013-03-04T16:46:23.093
> 
> 标签：ios, objective-c, cocoa-touch, nsstring

我有一个从 iTunes API 上传的歌曲列表。其中一些是重复的，但不是完美的重复。例如，有人可能会说“All 4 u”与“All for you”，或者“Some song”与“some song feat. some other artist”

我希望能够识别重复项。计算所有对的 Levenshtein 距离的最佳方法是什么？这似乎太过分了。

我正在使用 Cocoa Touch 框架进行 iOS 编程，所以如果有人知道任何有帮助的库的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:18:53.720

为什么您认为计算 Levenshtein 距离过大？如果您坐下来用铅笔和纸列出清单，您会使用什么算法？

也就是说，Levenshtein 可能是必要的，但还不够。我将从规范化字符串开始。在某些情况下，字符串可能会以多种方式规范化，您需要同时执行这两种方式。规范化看起来像：

*   转换为小写
*   去掉任何前导数字，后跟标点符号（“1.”、“1 -”等）
*   在“壮举”之后试探性地剥离任何东西。或“与”
    *   这是一个关于你的问题集的特殊知识的例子。你将不得不使用很多这样的特殊知识。
    *   “暂时”意味着您可能应该保留字符串的剥离和非剥离版本
    *   请记住，包括“壮举”在内的东西。可能是混音，所以你必须小心假设重复。这当然适用于几乎所有的重复数据删除尝试。经常有多个版本。
*   试扩展常用缩写（u=>you、4=>for、2=>two、w/=>with等）
*   试探性地去掉括号中的任何内容
*   去掉英文冠词（a, an, the）。甚至可能在第一次通过时去掉所有非常短的单词（3 个或更少的字符）。

做好这件事很复杂，需要大量的试验和错误。我过去做过很多联系人重复数据删除，还有一条建议：开始保守。很容易意外地重复重复数据太多。构建一个您手动删除重复数据的大列表，并在每次算法更改后进行测试、测试、测试。确保您的 UI 可以向用户呈现您不确定的任何内容，因为会有很多很多您无法确定的记录。（即使您手动操作也是如此。查看大量人工输入的标题并告诉我哪些是 100% 重复的，而无需听曲目。计算机在这方面不会比您做得更好.)

我不知道有任何公开可用的图书馆。很多人已经多次解决了这个问题（搜索“重复数据删除歌曲标题”或类似的东西）。但它通常是商业软件。

对此还有一条建议，因为这是一个巨大的 O(n^2) 或更糟的问题。寻找入桶机会。如果您可以先匹配艺术家，然后是专辑，然后是曲目，那么您可以在更短的时间内分而治之。

# macos - 在 Mac 上的 XAMPP 上设置虚拟主机

> ID：15206597
> 
> 赞同：4
> 
> 时间：2013-03-04T16:46:26.773
> 
> 标签：macos, apache, xampp

我正在尝试在本地主机上的苹果 mac 上设置一个虚拟主机。服务器由 XAMPP 提供，它将 Apache/MySQL/PHP 捆绑在一个包中。

这是我到目前为止所做的：

编辑 /private/etc/hosts 以包含 127.0.0.1 以指向 test.myserver.local

```
127.0.0.1       test.myserver.local 
```

编辑 /Applications/XAMPP/etc/extra/httpd-vhosts.conf 以包含我的虚拟主机详细信息

```
<VirtualHost *:80>
   DocumentRoot /Users/???/Documents/workspace/trunk/htdocs
   ServerName test.myserver.local
  <Directory "/Users/???/Documents/workspace/trunk/htdocs">
     AllowOverride All
  </Directory>
</VirtualHost> 
```

在其中放置了一个简单的 index.html，其中包含 test 一词。

我已经重新启动了服务器，然后浏览到测试 url 以迎接 Apache 的默认页面而不是我的测试页面。vhosts 文件适用于另一个虚拟主机，复制代码并更改相应的位（即文件夹路径），hosts 文件有效，当 Apache 关闭时，我的浏览器显示找不到服务器。

为什么 Apache 拒绝显示我的测试代码？我还需要更改其他文件吗？我想不出任何其他的，它通常只是那些在 linux/windows 上的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T19:21:30.460

在 xampp 上，您需要编辑 3 个文件来设置虚拟主机

/etc/hosts 和 /Applications/XAMPP/etc/extra/httpd-vhosts.conf 就像你做的那样。

但您还需要编辑 /Applications/XAMPP/xamppfiles/etc/httpd.conf 以包含 http-vhosts.conf

确保您已取消注释此行

```
# Virtual hosts
Include /Applications/XAMPP/etc/extra/httpd-vhosts.conf 
```

编辑

您是否尝试添加此行

```
Order allow,deny
Allow from all 
```

就在之前

```
AllowOverride All 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:19:52.607

尝试将“localhost”的设置留在文件“httpd-vhosts.conf”的末尾，即：

```
#
# Virtual Hosts
#
...

# others vhost
<VirtualHost *:80>
...
</VirtualHost>

# localhost
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "/Applications/XAMPP/xamppfiles/htdocs"
    <Directory "/Applications/XAMPP/xamppfiles/htdocs">
        Options Indexes FollowSymLinks Includes execCGI
        AllowOverride All
        Order Allow,Deny
        Allow From All
    </Directory>
</VirtualHost>
#end of httpd-vhosts.conf file 
```

为我工作，问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:13:16.697

您是否告诉 Apache 实际使用基于名称的虚拟主机？

```
# Use name-based virtual hosting.
#
NameVirtualHost *:80 
```

我不相信它在 Mac 上的 Xampp 中默认启用。

# c - aio_write 是否总是写入整个缓冲区？

> ID：15206599
> 
> 赞同：4
> 
> 时间：2013-03-04T16:46:31.673
> 
> 标签：c, linux, posix, aio

我知道`write`即使没有写入整个缓冲区（如果被信号中断），POSIX 函数也可以成功返回。您必须检查短写并恢复它们。

但是`aio_write`有同样的问题吗？我不认为它会发生，但文档中没有提到它，我找不到任何说明它不会发生的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:47:48.093

**简短的回答**

排除任何错误情况：实际是的，理论上不一定。

**长答案**

根据我的经验，调用者不需要`aio_write()`多次调用就可以使用`aoi_write()`.

然而，这并不能保证传入的整个缓冲区确实会被写入。最后的调用`aio_error()`给出了**整个**异步 I/O 操作的结果，这可能表示错误。

无论如何，文档*没有明确排除*最终调用`aio_return()`返回的值小于原始调用中*指定的要写出的字节数的情况*`aio_write()`，确实需要将其解释为不会发送整个缓冲区，在这种情况下，有必要`aio_write()`再次调用，传入前一次调用留下的要写入的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:57:14.503

[此](https://www.kernel.org/doc/man-pages/online/pages/man3/aio_return.3.html)页面上的错误代码列表不包括`EINTR`，这是`errno`表示“请再次调用以完成更多工作”的值。因此，不，您不需要`aio_write`再次调用要写入的同一条数据。

这并不意味着您可以依赖每次写入完成。例如，由于磁盘已满或类似情况，您仍然可以进行部分写入。但是您不需要检查`EINTR`并“重试”。

# css - 一行中的两个动态宽度 div：一个带有省略号，第二个接近第一个

> ID：15206600
> 
> 赞同：2
> 
> 时间：2013-03-04T16:46:35.353
> 
> 标签：css, html

假设我们有一个组列表，以及每个组的学员人数，例如：

```
Math (34)
Physics (22)
Lingvo (33)
... 
```

它们列在**JS**网格中，每个渲染器都可以是 css 样式的。问题是：我需要显示组列表，以便学员人数与组名相符，但是当调整窗口大小（变小）时，学员人数将停留在列的右侧，但长组名会被省略号截断，例如：

```
|Math (34)
|Physics (22)
|Veerryy l..(18) 
```

甚至更多：

```
|Math (34)
|Physics (22)
|Veerryy..(18) 
```

调整大小时，这两个 div（跨度）不应在彼此下方包裹。网格的最小宽度是已知的，所以最终会有一个 x 滚动。

恢复窗口大小后，组名将正常显示，学员人数仍与组名相同：

```
|Math (34)
|Physics (22)
|Veerryy long group name (18) 
```

我希望这可以用**CSS**完成，但尝试了很多但仍然没有成功。我不想在**JS**中重载渲染，所以最好使用**CSS**。请协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:54:39.507

将此用于省略号：

```
.ellipsis {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    display: block;
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:53:13.437

您可以使用`float:right`to 数字，并使用 , 和 使用to标题`min-width`名称。`white-space:nowrap``overflow:hidden``text-overflow:ellipsis`

**- 编辑 -**

此外，尝试使用`max-width`and`min-width`作为标题。查看演示：

[http://jsfiddle.net/DxzuG/](http://jsfiddle.net/DxzuG/)

...并且您始终可以使用宽度值来满足您的需求。

# java - socket.shutdownOutput() 的目的

> ID：15206605
> 
> 赞同：7
> 
> 时间：2013-03-04T16:46:47.903
> 
> 标签：java, sockets, groovy, tcp, tcpclient

我正在使用以下代码将数据发送到 tcp 服务器。我假设我需要使用`socket.shutdownOutput()`正确指示客户端已完成发送请求。我的假设正确吗？如果不是，请让我知道`shutdownOutput()`. 也感谢我可以做的任何进一步的优化。

**客户**

```
def address = new InetSocketAddress(tcpIpAddress, tcpPort as Integer)
clientSocket = new Socket()
clientSocket.connect(address, FIVE_SECONDS)
clientSocket.setSoTimeout(FIVE_SECONDS)

// default to 4K when writing to the server
BufferedOutputStream outputStream = new BufferedOutputStream(clientSocket.getOutputStream(), 4096)

//encode the data
final byte[] bytes = reqFFF.getBytes("8859_1")
outputStream.write(bytes,0,bytes.length)
outputStream.flush()
clientSocket.shutdownOutput() 
```

**服务器**

```
ServerSocket welcomeSocket = new ServerSocket(6789)

while(true)
{
    println "ready to accept connections"
    Socket connectionSocket = welcomeSocket.accept()
    println "accepted client req"
    BufferedInputStream inFromClient = new BufferedInputStream(connectionSocket.getInputStream())
    BufferedOutputStream outToClient = new BufferedOutputStream(connectionSocket.getOutputStream())
    ByteArrayOutputStream bos=new ByteArrayOutputStream()

    println "reading data byte by byte"  
    byte b=inFromClient.read()    
    while(b!=-1)
    {        
       bos.write(b)
       b=inFromClient.read()
    }
    String s=bos.toString()

    println("Received request: [" + s +"]")   

    def resp = "InvalidInput"
    if(s=="hit") { resp = "some data" }

    println "Sending resp: ["+resp+"]"

    outToClient.write(resp.getBytes());
    outToClient.flush()
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T17:32:03.713

> 我正在使用以下代码将数据发送到 tcp 服务器。我假设我需要使用 socket.shutdownOutput() 来正确指示客户端已完成发送请求。我的假设正确吗？

**是**的 你的假设是正确的。而这个输出 ShutDown 被称为***half close***。使用半关闭 TCP 使连接的一端能够终止其输出，同时仍从另一端接收数据。让我带您了解`socket.shutdownOutput()`方法的效果：

1.  在本地，本地套接字及其输入流在读取时表现正常，但对于写入目的，套接字及其输出流表现得好像套接字已在此结束时关闭：随后对套接字的写入将抛出一个`IOException`
2.  TCP 的正常连接终止序列（a - 由 ACK 确认的 FIN）排队等待在任何未决数据已发送并确认后发送。
3.  远程，远程套接字正常运行以用于写入目的，但对于读取目的，套接字的行为就好像它已在此结束时关闭：从套接字进一步读取返回 EOF 条件，即读取计数为 -1 或 an `EOFException`，具体取决于被调用的方法。
4.  当本地socket最终关闭时，连接终止序列已经发送，不再重复；如果另一端也已经完成了半关闭，那么套接字上的所有协议交换现在都已完成。

因此我们看到，当收到 EOF 时，可以确保另一端已完成输出关闭。而这个场景`socket.shutDownOutput()`在另一边完美地实现了。

资料来源：*Java 基础网络，* Esmond Pitt

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T17:04:11.517

[`Socket.shutdownOutput()`](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#shutdownOutput())表示客户端已完成通过 TCP 连接发送任何数据。它将发送剩余的数据，然后是一个终止序列，该序列将完全关闭其 OUTGOING 连接。无法发送任何进一步的数据，这也将向您的程序表明请求已完全完成。因此，如果您确定不必发送更多数据，建议您使用它。

但是不需要指示请求完成（如果您有多个请求，您不必一直打开/关闭输出），还有其他方法。

# html - 如何让 Express 路由与带有 HTML5 样式 URL 的 Angular 路由一起使用？

> ID：15206610
> 
> 赞同：4
> 
> 时间：2013-03-04T16:46:56.847
> 
> 标签：html, url, express, angularjs, url-routing

我想用 HTML5 样式的 URL 制作一个 AngularJS 应用程序（即 URL 中没有`#`片段）。因此，在我的 Angular 应用程序的路由控制器模块中，我得到了如下内容：

```
angular.module('app').config(['$routeProvider','$locationProvider',function($routeProvider,$locationProvider) {
    $locationProvider.html5Mode(true)
...
}

$routeProvider
.when('/1/:param', /* do something */)
.when('/2/:param', /* do something else */)
.when('/3/:param', /* do something else again*/); 
```

[AngularFun](https://github.com/CaryLandholt/AngularFun)等许多工作示例不使用 HTML5 模式。对于像这样的请求`http://localhost:3005/#/1/foo`，很明显

*   该部分由 Express在`http://localhost:3005/`服务器端处理。`/`Express 愉快地为我们的 Angular 提供服务`index.html`
*   路由由 Angular 的路由器在`/1/foo`客户端处理

说我们的`server.coffee`外观，作为标准，如下所示（我们提供`dist`包含我们编译的、缩小的 Angular 源代码的静态目录：

```
express = require 'express'
routes = require './routes'
dir = "#{__dirname}/dist"            # sources live here
port = process.env.PORT ? process.argv.splice(2)[0] ? 3005
app = express()

app.configure -> 
    app.use express.logger 'dev'
    app.use express.bodyParser()
    app.use express.methodOverride()
    app.use express.errorHandler()
    app.use express.static dir       # serve the dist directory
    app.use app.router
    routes app, dir                  # extra custom routes 
```

如果我们确实使用 HTML5 模式，我们的 URL`http://localhost:3005/#/1/foo`将变为`http://localhost:3005/1/foo`（不再有 hash `#`）。这一次，整个 URL 都被 Express 截取了，而且因为我们没有定义除`/`.

我们真正想说的是 URL ( `/1/foo`) 的后半部分应该“委托”给 Angular 进行处理。我们怎么能这么说呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T13:37:32.683

看来它确实有效。然而，我自己并没有做这项工作。我依靠这个骨架项目： [https ://github.com/thanh-nguyen/angular-express-seed-coffee](https://github.com/thanh-nguyen/angular-express-seed-coffee)

这允许您在一定程度上控制哪些路径由客户端处理，哪些由服务器处理。

# biopython - DBSeqRecord 无法访问注解，BioPython 下使用 BioSQL 的功能

> ID：15206612
> 
> 赞同：0
> 
> 时间：2013-03-04T16:47:10.620
> 
> 标签：biopython

使用 Python 2.7、最新的 BioPython 和 BioSQL 在 Ubuntu 12.10 上运行。

我已经成功地建立了基于 MySQL 的 BioSQL 服务器，并且我可以将序列正确地加载到系统中（或者它们似乎是正确的——在 MySQL 中正确填充了表并且事情通常没有错误）。

但是——当我通过“查找”检索时，我只能访问 DBSeqRecords 的 ID、名称和描述。注释和功能应该按需调用，但这会使事情崩溃。例如：

```
 File "/usr/lib/pymodules/python2.7/Bio/SeqRecord.py", line 595, in __str__
    lines.append("Number of features: %i" % len(self.features))
  File "/usr/lib/pymodules/python2.7/BioSQL/BioSeq.py", line 516, in __get_features
    self._primary_id)
  File "/usr/lib/pymodules/python2.7/BioSQL/BioSeq.py", line 280, in _retrieve_features
    feature.location = SeqFeature.FeatureLocation(start, end)
  File "/usr/lib/pymodules/python2.7/Bio/SeqFeature.py", line 561, in __init__
    raise TypeError(start)
TypeError: 0 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:49:54.037

我本周遇到了同样的错误。

一个特性的开始和结束位置从 MySQL 中检索为 long 类型（不是 int），但 SeqFeature.py 在实例化 FeatureLocation 时只期望 int 用于开始和结束。我不知道 mysql 服务器、MySQLdb、BioSeqDatabase 或 SeqFeature 发生了什么变化来引发问题。

希望其中一位 biopython 开发人员能够提供长期解决方案，但这些是临时修复的建议：

*   尝试访问 BioSeqDatabase 使用的 MySQLdb 连接，并使用其连接函数的 conv 关键字参数更改转换行为（我无法做到这一点）

*   hack BioSeqDatabase 以便在从 MySQL 获取值后将 start_pos 和 end_pos 转换为 int （我没有这样做）

*   hack SeqFeature.py 以在实例化 FeatureLocation 对象时允许长类型开始和结束（这就是我所做的）。改变这个：

    ```
    if isinstance(start, AbstractPosition):
        self._start = start
    elif isinstance(start, int):
        self._start = ExactPosition(start)
    else:
        raise TypeError(start)
    if isinstance(end, AbstractPosition):
        self._end = end
    elif isinstance(end, int):
        self._end = ExactPosition(end)
    else:
        raise TypeError(end) 
    ```

    对此：

    ```
    if isinstance(start, AbstractPosition):
        self._start = start
    elif isinstance(start, int) or isinstance(start, long):
        self._start = ExactPosition(start)
    else:
        raise TypeError(start)
    if isinstance(end, AbstractPosition):
        self._end = end
    elif isinstance(end, int) or isinstance(end, long):
        self._end = ExactPosition(end)
    else:
        raise TypeError(end) 
    ```

# angularjs - AngularJS - 将新创建的子项推送到主窗体的子项选择

> ID：15206614
> 
> 赞同：0
> 
> 时间：2013-03-04T16:47:21.183
> 
> 标签：angularjs

我有一个有两个选择的表格，（1）父母和（2）孩子。选择父项后，子项选择选项将分别动态填充。目前，两者都在父控制器中。每个选择旁边是一个添加新的。当添加一个新的父项时，会出现一个模态，输入一个新的父项，一旦单击提交，除非用户错误，数据库被更新，模态关闭，父控制器将新的父项推送到范围并显示在父选择中。

**孩子的选择是个问题。它打开了 ChildrenController 的模态，**虽然我可以将新创建​​的子项添加到数据库中，但我无法在模态关闭时将其推送到主窗体，因为子项选择位于父控制器下。

**如何将新创建的子项推送到主窗体的子项选择？**

主要形式：

```
 <div ng-controller="ParentController">
   <div id="ParentDiv">
   <select ng-model="parent" ng-options="parent.Name for parent in parents">
     <option value="" selected>Select Parent ..</option>  
   </select>
   <button class="addNew"  ng-click="openDialog()"><i class="icon-plus"></i> [ add new ]</button>
   </div>

   <div id ="ChildDiv">
  <select ng-model="child" ng-options="child.Name for child in parent.Childs">
     <option value="" selected>Select Child After Parent ..</option>  
   </select>
   <button class="addNew"  ng-click="openDialog()"><i class="icon-plus"></i> [ add new ]</button>
   </div>
 </div> 
```

**Blesh 在聊天中为我找到了解决方案：2 步**

```
 function ParentsCtrl($scope, $rootScope, $routeParams, $http, API, $location, $dialog) {

   // Step #1

    $scope.Parent = {};
    $scope.addModel = function (item) {
    $scope.Parent.Childs = $scope.Parent.Childs || [];
    $scope.Parent.Childs.push(item);
};
 .......
} 
```

函数 ChildrenCtrl($scope, $rootScope, $routeParams, $http, API, $location, $dialog) {

// 第2步

```
// Create

    var copy = angular.copy($scope.child);
    $http.post('/api/Childs/', copy)
        .success(function () {
            console.log('Copy Name 2: ' + copy.Name);
            $scope.addModel(copy);
        })
        .error(function (data) {
            alert(data);
        });
};
}; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:53:47.170

所以我们最终做的是向父控制器添加一个方法，该方法可以从子控制器调用以根据选择的内容执行添加：

```
function ParentCtrl($scope) {
   $scope.parentItems = [
        { name: 'foo', children: [] },
        { name: 'bar', children: [] }
        { name: 'test', children: [] }
   ];

   $scope.addChild = function(item) {
      $scope.selectedParent.children.push(item);
   };
}

function ChildCtrl($scope, $http) {
   $scope.doSomething = function () {
       var item = { childName: 'test child' };
        /* TODO: stuff here */
       $scope.addChild(item);
   };
} 
```

```
<div ng-controller="ParentCtrl">
   <select ng-model="selectedParent" ng-options="x.name for x in parentItems"></select>
   <div ng-controller="ChildCtrl">
      <a ng-click="doSomething()">do something and add child</a>
   </div>
</div> 
```

这个想法是子控制器可以调用父范围提供的添加函数。

# bluetooth - Peerfinder 在 WP8 中返回不存在的对等点

> ID：15206619
> 
> 赞同：0
> 
> 时间：2013-03-04T16:47:34.667
> 
> 标签：bluetooth, windows-phone-8, proximity

我在我的 WP8 应用程序中使用[PeerFinder.FindAllPeersAsync()](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.networking.proximity.peerfinder.findallpeersasync.aspx)来通过蓝牙接口发现运行相同应用程序的设备。

该函数必须返回范围内的对等点列表。但是，它也会返回最近与应用程序对等但不再在范围内的设备。即使通过卸载和安装应用程序，FindAllPeersAsync() 函数也会返回这些旧设备。

有什么办法可以防止这种事情发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T11:19:58.013

FindAllPeersAsync() 方法似乎总是返回之前配对的设备。我通过删除蓝牙设置中的配对设备解决了这个问题。

但作为一个好的解决方案，您的应用程序应该执行“在线”请求之类的操作，以确定对等点是否真的存在于您的范围内。

# iphone - 在 iOS 5.1 中创建具有不同样式文本的 UILabel，而不使用情节提要

> ID：15206620
> 
> 赞同：0
> 
> 时间：2013-03-04T16:47:41.773
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uilabel

我想创建一个内衬`UILabel`简单格式的文件，如下所示： ![在此处输入图像描述](../Images/25239e5caf5584c7b8421465b54d732e.png)

没关系下划线 - 这是Photoshop的东西。

我基本上有两部分的文本，左边一个有一个字体系列、大小和颜色，另一个有另一个。一个接一个地添加 2 个标签会使事情变得非常麻烦和复杂。任何想法你会如何将事情组合成一个简单的`UILabel`？提前致谢！

**编辑：**我不使用 Storyboard 或 XIB，我正在为 iOS 5.1 及更高版本构建

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:19:11.127

如果你想运行 iOS 5.0 及更高版本，你可以使用 mattt 的精彩[TTTAttributedLabel](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=https://github.com/mattt/TTTAttributedLabel&ei=Dtc0Uf7sEIyNrgex-IGgDA&usg=AFQjCNHczBjr4fveLTjywFZ6UncKqT-rdQ&sig2=0RgwB4M7-JZ_sL-v0Cr0ig&bvm=bv.43148975,d.bmk)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T17:16:41.493

我在 iOS 5+ 中运行的应用程序中使用了以下两个。

*   [https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)
*   [https://github.com/AliSoftware/OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T16:49:30.790

您可以使用自动布局使用两个`UILabel`相互对齐的 s，也可以使用[`attributedText`](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/attributedText)iOS6 中可用的属性

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T17:29:35.660

您可以使用`attributedText`属性来处理此问题。

NSMutableAttributedString* string = [NSMutableAttributedString attributesStringWithString:@"OneThing (AnotherThing)"];

//这设置整个字符串的字体

[字符串 setAttributes:@{NSFontAttributeName:[UIFont fontWithName:@"Helvetice-Neue"]}];

//在这里为“OneThing”写另一种字体

[string setAttributes:@{NSFontAttributeName:[UIFont fontWithName:@"Helvetice-Neue"]} range:NSMakeRange(0, 7)];

myLabel.attributedText = 字符串；

# c# - WPF 绑定到内容控件的内容属性

> ID：15206621
> 
> 赞同：0
> 
> 时间：2013-03-04T16:47:41.967
> 
> 标签：c#, wpf, binding

如何绑定到内容控件的内容属性？
我创建了自定义控件：

```
 public class CustomControl 
        {
         // Dependency Properties
public int MyProperty
        {
            get { return (int)GetValue(MyPropertyProperty); }
            set { SetValue(MyPropertyProperty, value); }
        }

        // Using a DependencyProperty as the backing store for MyProperty.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty MyPropertyProperty =
            DependencyProperty.Register("MyProperty", typeof(int), typeof(MainViewModel), new PropertyMetadata(0));
         } 
```

在 ViewModel 中，我创建了此自定义控件类型的属性：

```
 public CustomControl CustomControl { get; set; } 
```

在视图中，我将此属性绑定到内容控件：

```
 <ContentControl x:Name="Custom" Content="{Binding CustomControl}"></ContentControl> 
```

现在如何绑定到内容控件的内容属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:52:29.817

```
<ContentControl Content="{Binding ElementName=Custom, Path=Content}" /> 
```

我不确定这会产生什么影响。我怀疑它会抱怨 UI 元素已经有一个父元素或类似的东西。

### 更新

如果我认为我正确理解了您的问题，我认为您无法使用绑定做您想做的事。这是一种替代方法，它在内容更改时添加回调，以便您可以将新内容设置为 VM 的属性：

```
class CustomControl : Control
{
    static CustomControl()
    {
        ContentControl.ContentProperty.OverrideMetadata(typeof(CustomControl), new PropertyMetadata(null, UpdateViewModel));
    }

    private static void UpdateViewModel(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var control = d as CustomControl;
        var viewModel = control.DataContext as MyViewModel;
        viewModel.CustomControl = control;
    }
} 
```

您可能需要在那里进行一些错误处理。

# debugging - 无法自动进入服务器

> ID：15206623
> 
> 赞同：1
> 
> 时间：2013-03-04T16:47:42.330
> 
> 标签：debugging, visual-studio-2012, wcf-ria-services

我需要使用 RIA 服务调试 WPF 客户端。在 VS 2010 中它工作正常，现在我在 VS 2012 下，我面临这个错误。

任何线索如何返回调试？

![在此处输入图像描述](../Images/c5c0ce0a872e4af386f87fa73936d84b.png)

我已经检查了 web.config 并且它有 `<compilation debug="true" targetFramework="4.0" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:18:32.577

您是否尝试右键单击 devenv.exe 并选择疑难解答兼容性？并始终以管理员权限执行 VS。

# knockout.js - knockoutjs MVC 4 计算值

> ID：15206626
> 
> 赞同：2
> 
> 时间：2013-03-04T16:47:49.310
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-mvc

我有以下视图模型

```
 var viewModel = new myViewModel([{
            Name: "Name",
            price: 32,
            tax: 22,
        }, {
            Name: "Name",
            price: 32,
            tax: 22,
        }]); 
```

我有一个数据绑定到

```
 <tbody data-bind='foreach: personInfo'> 
```

并输入：

```
 <td>
        <input class='required' data-bind='value: Name'/>
        </td>
        <td>
        <input class='required' data-bind='value: Price'/>
        </td>
        <td>
        <input class='required' data-bind='value: Tax'/>
        </td> 
```

我想获得价格的计算值，然后是税收，但是我没有成功。:(

```
 self.totalSurcharge = ko.computed(function () {
        var total = 0;
        for (var i = 0; self.PersonInfo().length; i++)
        total += self.PersonInfo[i].price;
        return total;
        }); 
```

任何想法？

更新：

像这样的东西：http: [//jsfiddle.net/hamsaya/9XNDH/1/](http://jsfiddle.net/hamsaya/9XNDH/1/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:01:11.130

有趣的是，他们必须更新网站：

这是答案。

```
 self.totalSurcharge = ko.computed(function () {
    var total = 0;
    for (var i = 0; i < gifts.length; i++)
    total =total+ gifts[i].price;
    return total;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:29:32.703

根据文档，在使用索引器从中访问数据之前，您需要使用括号来访问 KO 包装的可观察数组：

[http://knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html)

尝试更换

```
self.PersonInfo[i].price 
```

和

```
self.PersonInfo()[i].price 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T06:58:44.303

我已经测试了下面的代码，它工作正常，

修改你的html如下：

```
 <tr>
     <td> Total of price here</td>
     <td data-bind="text:totalPrice"></td>
 </tr> 
```

在脚本中添加以下 Computed Observable 以计算总价：

```
self.totalPrice = ko.computed({
    read: function() {
    var totalAmount = null;
    for(var i=0 , j=self.gifts().length ; i < j ; i++ )
    {
         totalAmount =Number(totalAmount)+ Number(self.gifts()[i].price);
    }
    if(totalAmount == 0){
        totalAmount = '0.00'
        }
    return totalAmount;
}
}); 
```

# qt - QTcpSocket 写入变量

> ID：15206630
> 
> 赞同：0
> 
> 时间：2013-03-04T16:48:09.427
> 
> 标签：qt, sockets

我是 Qt 的新手，我正在尝试创建一个简单的 IRC 机器人。我连接到服务器，我可以读写。但我想写变量。

```
socket = new QTcpSocket(this);
//connection here
socket->write("I want to send a variable"); 
```

我尝试过类似 printf 的语法：

```
socket->("I want to send a %s", variable); 
```

但它不起作用。

是否可以在一行中发送变量？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:58:17.353

您可能希望将其包装在[QDataStream](https://qt-project.org/doc/qt-4.8/qdatastream.html)中并使用它来序列化您的消息。它会让你的生活轻松很多。您应该查看这些（完整）示例以获取详细信息：

*   [财富客户示例](https://qt-project.org/doc/qt-4.8/network-fortuneclient.html)
*   [财富服务器示例](https://qt-project.org/doc/qt-4.8/network-fortuneserver.html)

希望有帮助！

# c++ - 如何在 C++ 中生成以下排列树？

> ID：15206633
> 
> 赞同：2
> 
> 时间：2013-03-04T16:48:18.670
> 
> 标签：c++, tree, permutation

假设我们有字符串`ABCD`

我想创建以下树：

```
 ABCD             <------ level 1
 ABC ABD ACD BCD      <------ level 2
AB AC AD BC BD CD     <------ level 3
    A B C D           <------ level 4 
```

并按以下顺序将其保存在向量中：

```
ABCD->ABC->ABD->ACD->BCD->AB->AC->AD->BC->BD->CD->A->B->C->D 
```

所以从起点开始，我想生成下一层的节点，将它们存储在向量中，然后生成下一层的节点并对所有剩余的层做同样的事情

我创建了以下程序来从级别 1 生成级别 2。

```
void test(int dimensions, vector<string> & nodes, const char* currentNode){

     int i,j;

     for(i=dimensions-1;i>=0;i--){
         char *temp = new char[dimensions];
         int counter = 0;
         for(j=0;j<dimensions;j++){
             if(j!=i){
                temp[counter] = currentNode[j];
                counter++;
             }
          }
          temp[counter] = '\0';
          nodes.push_back(temp);
      }
} 
```

从 main 调用：

```
vector<string> nodes;
int dimension = 4;
nodes.push_back("ABCD");
test(dimension, nodes, "ABCD"); 
```

这给了我以下信息：

![在此处输入图像描述](../Images/27e302effba9e1afcc181c8451e38d67.png)

如您所见，级别 2 的节点已成功添加，但是如果我尝试在此处应用递归，例如节点“ABC”

结果我会得到：

`AB -> AC -> BC`

这些将成功保存，但是如果递归继续进行，例如对于 node `AB`now 它会找到`A -> B`

所以保存在向量中的节点的结果顺序不会是我一开始描述的方式。

代替

```
 ABCD->ABC->ABD->ACD->BCD->AB->AC->AD->BC->BD->CD->... 
```

这将是

```
ABCD->ABC->ABD->ACD->BCD->AB->AC->A->B->... 
```

最后，我希望将这棵树的计算推广到任意数量的维度。例如，初始节点可以是`ABCD`或`ABCDEFGHIJKLM`。

出于某种原因，我认为这很难做到，但是我不确定。请注意，我不想使用任何外部库来计算排列，我需要 100% 理解代码才能继续执行我想要实现的算法。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:11:10.267

正如评论中所述，我看不出这与排列有什么关系，但这是我认为你想要实现的代码：

```
#include <algorithm>
#include <iostream>
#include <string>
#include <vector>

typedef std::vector<std::string> Layer;

Layer getNextLayer(const Layer &);

int main()
{
   std::vector<Layer> layers;
   layers.push_back(Layer());
   layers[0].push_back("ABCDE");
   while ( layers.back().back().size() > 1 )
   {
       layers.push_back(getNextLayer(layers.back()));
       for ( size_t i = 0; i < layers.back().size(); ++i )
       {
          std::cout << layers.back()[i] << " ";
       }
       std::cout << "\n";
   }
}

Layer getNextLayer(const Layer &layer)
{
   Layer result;
   for ( size_t i = 0; i < layer.size(); ++i )
   {
      const std::string item = layer[i];
      for ( size_t j = 0; j < item.size(); ++j )
      {
         std::string new_item = item;
         new_item.erase(new_item.begin() + j); // erase j^th charachter from item
         result.push_back(new_item);
      }
   }
   std::sort(result.begin(), result.end());
   result.erase(std::unique(result.begin(), result.end()), result.end()); // erase duplicates
   return result;     
} 
```

这将基于最后一层创建每一层。要将其全部存储在一个向量中，您只需合并所有这些层。

# ios - 在 xcode 上管理视觉资产（参考、复制或两者兼而有之）？

> ID：15206636
> 
> 赞同：4
> 
> 时间：2013-03-04T16:48:28.793
> 
> 标签：ios, xcode, image, macos, assets

晚上好，我想知道在 xcode 中为 ios 或 mac os 项目管理资产（视觉、声音等）的最佳方法是什么。

我目前正在处理一个图像文件一直在变化的项目（设计仍在建设中），我想知道在将所有文件保存在项目目录中的同时保持所有文件更新的最佳方法。

因此，例如，我有一个名为“ic_action_gray_button@2x.png”的文件。这个按钮在设计上发生了变化，但仍然具有相同的名称。有没有一种神奇的方法来镜像更改并使其也处于源代码控制之下，而无需一直花费时间查找和替换文件？

当涉及到 50 个资产时，这很容易，但是当这些资产变成 100 或 500 个时，就很难跟上变化。

任何教程或任何指南可以帮助我完成这个过程？

如果我的问题不清楚，请放轻松，我不是以英语为母语的人 :)

亲切的问候，

Sonic555gr

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T14:29:23.867

您可以在项目文件夹中为您的资产创建一个单独的文件夹。然后您可以将资产文件夹拖到 Xcode 中的项目中，选择“为任何添加的文件夹创建文件夹引用”并取消选中“将项目复制到目标组的文件夹（如果需要）”。这应该符合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T11:11:31.793

我这样做的方式就是将 100 - 150 或许多资产粘贴到 Finder 中。

只要文件具有相同的名称，您只需在 XCode 项目文件夹内的 Finder 中进行覆盖。

任何新图像，您都可以像往常一样添加到 XCode，方法是拖放，然后选择复制并选择目标。之后可以在 Finder 中进行任何替换。

Git 还将检测文件修改，您可以将更改推送到您的存储库。对于文件/资产替换，无需通过 XCode 执行并再次添加新图像。

如果您为图像使用资产目录，只需替换特定文件夹中的文件，这很乏味，然后更容易在 XCode 中全部选择它们，从目录和项目中删除它们，以及然后只需将它们再次拖放到资产目录中即可。

# php - 注释上的 Symfony2 约束违规代码定义

> ID：15206637
> 
> 赞同：3
> 
> 时间：2013-03-04T16:48:31.163
> 
> 标签：php, symfony, error-handling, validation

由于我的项目要求，除了消息之外，我必须为每个约束违规添加一个数字代码。我查看了这个`ConstraintViolation`类，发现它确实实现了一个[`$code`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/ConstraintViolation.php#L59)属性，所以这对我的需求来说是完美的……除了我找不到简单的方法来在注释上指定这个代码。

例如，查看[`Email`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/Constraints/Email.php)约束或[其父类](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/Constraint.php)是如何实现的，任何地方都没有该代码的迹象，这使得注释无法定义它。

[验证器](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/Constraints/EmailValidator.php#L58)还禁止编码器设置`$code`，因为它们没有将第五个参数传递给`addValidation`代码本身。

```
$this->context->addViolation($constraint->message, array('{{ value }}' => $value)); 
```

所以，我的问题很简单：我错过了什么吗？有没有办法通过不痛苦的注释来设置约束违规代码？理想情况下，我想做这样的事情：

```
/**
 * @Assert\NotBlank(code=400)
 * @Assert\Email(code=401)
 */
protected $email; 
```

编辑`Constraint.php`以添加`$code`属性（作为有效的注释代码）和所有约束验证器以将第五个参数传递给`addviolation`似乎是一个糟糕的主意！

当然我可以实现我自己的验证器，但是拥有一组预定义的验证器有什么意义呢？这只是一条线的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:02:56.233

我认为你有一个小错误。验证器中的 code 属性不是您应该查看的。我认为您应该只创建自己的验证器约束，它们是非常简单的类： [https ://github.com/symfony/Validator/blob/master/Constraints/Choice.php](https://github.com/symfony/Validator/blob/master/Constraints/Choice.php)

只需添加一个公共代码属性，然后您就可以通过注释或 PHP 进行设置。您不需要新的验证服务，只需要那个额外的属性。构造约束时将自动添加此属性：

[https://github.com/symfony/Validator/blob/master/Constraint.php](https://github.com/symfony/Validator/blob/master/Constraint.php)

以下是有关如何创建自定义约束的更多信息：

[http://symfony.com/doc/2.1/cookbook/validation/custom_constraint.html](http://symfony.com/doc/2.1/cookbook/validation/custom_constraint.html)

# java - RAD 8.5 XPath 视图

> ID：15206638
> 
> 赞同：0
> 
> 时间：2013-03-04T16:48:35.437
> 
> 标签：java, eclipse, ibm-rad

我们正在测试 RAD 8.5，但我在使用新的 XML 透视图时遇到了一些问题：

当我打开 XML 透视图时，我在主窗口中查看源，右上方的大纲视图和右下方的模板视图（空）。这就是*我所*得到的。

上次我在标准 Eclipse 安装（我认为是 3.6）中使用此透视图时，左下角还有一个 XPath 视图，我可以在其中测试源代码上的 XPath 表达式，而 Templates 视图实际上有常见 XPath 的片段表达式（我认为）。像这样的东西：

![在此处输入图像描述](../Images/cdf128b52b028e9d47bcb5e0aebcff2a.png)

有没有办法让 XPath 视图进入 RAD 8.5？我尝试在“显示视图-> 其他...”下查看，但找不到此视图。我猜我们在安装过程中错过了包含此视图的功能，但我不知道它是什么。有谁知道我应该安装什么功能才能让这个视图正常工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T12:15:43.090

您是否尝试过打开菜单：

```
Window > Show View > Outline 
```

?

# facebook - 共享站点时忽略 og:image，尽管 Facebook 调试器没有显示任何错误

> ID：15206639
> 
> 赞同：0
> 
> 时间：2013-03-04T16:48:35.783
> 
> 标签：facebook, debugging

**我使用addthis 工具**在一个网站上开发了一个登陆平台，用于向 Facebook 分享动态内容。

例如，在[这个页面](http://www.dermaglos.com/mes-de-la-mujer-2013/galeria.aspx?id=17440)中，动态`og content`如下：

```
<meta property="og:title" content="Pequeña gran heroína – Ingresá a dermaglos.com y participá por importantes premios.">
<meta content="Mi pequeña gran heroína es: Prueba Heroina sin img - Lorem ipsum dolor sit amet, consectetur adipiscing elit." property="og:description">
<meta content="http://www.dermaglos.com/DesktopModules/Repository/MakeThumbnail.aspx?tabid=466&amp;mid=1941" property="og:image">
<meta content="http://www.dermaglos.com/Mes-de-la-Mujer-2013/Galeria.aspx?id=17440" property="og:url"> 
```

当我使用[调试器](http://developers.facebook.com/tools/debug)测试元信息的工作时，它不会显示错误：

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.dermaglos.com%2Fmes-de-la-mujer-2013%2Fgaleria.aspx%3Fid%3D17440](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.dermaglos.com%2Fmes-de-la-mujer-2013%2Fgaleria.aspx%3Fid%3D17440)

但是当分享页面时，FB 帖子会忽略`og:image`并显示`og:url`.

怎么了？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T08:42:19.073

看看这个页面：

[og：共享链接时忽略图像，尽管在 linter 中接受](https://stackoverflow.com/questions/9213912/ogimage-ignored-when-sharing-link-although-accepted-in-linter)

并在调试器中找到以下文本：

> Tiny og:image：所有 og:image 引用的图像在两个维度上都应至少为 200 像素。请检查给定 url 中带有标签 og:image 的所有图像，并确保它们符合最低规范（阅读更多[https://developers.facebook.com/blog/post/2013/04/03/platform-updates- -操作-开发者-爱/](https://developers.facebook.com/blog/post/2013/04/03/platform-updates--operation-developer-love/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T08:59:00.997

当您发布图像时，使用下面的属性来显示图像

```
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" /> 
```

注意：宽高不能超过200

# sql - Derby DB 插入错误 SQL 状态 21000

> ID：15206640
> 
> 赞同：2
> 
> 时间：2013-03-04T16:48:36.760
> 
> 标签：sql, database, derby, sql-insert

我正在尝试将数据插入数据库中的表中。我正在使用 Oracle Apache Derby DB。我有以下代码-

```
Insert into P2K_DBA.ODS_CNTRL
(ODS_LOAD_ID, ODS_STATUS, USR_WWID, USR_FIRST_NM, 
USR_LAST_NM, USR_DISPLAY_NM, USR_NT_ID,TOT_AMT, 
TOT_RCD_CNT, TOT_QTY, LAST_UPD_DT, ODS_ADJ_TYP, 
ODS_ADJ_DESC, APRV_WWID, APRV_FIRST_NM,APRV_LAST_NM, 
APRV_DISPLAY_NM, APRV_NT_ID, APRV_DT
)
values 
(6,'avail','64300339', 'Travis',
'Taylor', 'TT', '3339', 33,
15, 40, '7/10/2012', 'test',
'test', '64300337', 'Travis',
'Taylor', 'TT', '3339', '2/06/2013'); 
```

我运行此 SQL 命令并收到以下错误 -

“错误代码 -1，SQL 状态 21000：标量子查询只允许返回单行。第 1 行，第 1 列”

几天前我已经成功运行了这段代码。最重要的是，我尝试在此表中手动输入数据（使用 NetBeans）并让它自动生成代码，这导致了同样的错误。

是什么导致了这个错误，我该如何解决/绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T08:51:31.100

你可能会遇到这种情况的一种方法是做类似的事情

创建函数 F(...) ...

F（（从 T 中选择颜色））

但你可以改为写

... (SELECT F(COL) FROM T) 如果新上下文允许子查询，即。

# c# - 如何将 cookie 传递给 HtmlAgilityPack 或 WebClient？

> ID：15206644
> 
> 赞同：11
> 
> 时间：2013-03-04T16:48:59.387
> 
> 标签：c#, cookies, httpwebrequest, webclient, html-agility-pack

我使用此代码登录：

```
CookieCollection cookies = new CookieCollection();
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("example.com");
request.CookieContainer = new CookieContainer();
request.CookieContainer.Add(cookies);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
cookies = response.Cookies;

string getUrl = "example.com";
string postData = String.Format("my parameters");
HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create(getUrl);
getRequest.CookieContainer = new CookieContainer();
getRequest.CookieContainer.Add(cookies);
getRequest.Method = WebRequestMethods.Http.Post;
getRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0";
getRequest.AllowWriteStreamBuffering = true;
getRequest.ProtocolVersion = HttpVersion.Version11;
getRequest.AllowAutoRedirect = true;
getRequest.ContentType = "application/x-www-form-urlencoded";

byte[] byteArray = Encoding.ASCII.GetBytes(postData);
getRequest.ContentLength = byteArray.Length;
Stream newStream = getRequest.GetRequestStream();
newStream.Write(byteArray, 0, byteArray.Length);
newStream.Close();

HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
using (StreamReader sr = new StreamReader(getResponse.GetResponseStream(), Encoding.GetEncoding("windows-1251")))
{
        doc.LoadHtml(sr.ReadToEnd());
        webBrowser1.DocumentText = doc.DocumentNode.OuterHtml;
} 
```

然后我想使用 HtmlWeb (HtmlAgilityPack) 或 Webclient 将 HTML 解析为 HtmlDocument(HtmlAgilityPack)。

我的问题是，当我使用：

```
WebClient wc = new WebClient();
webBrowser1.DocumentText = wc.DownloadString(site); 
```

或者

```
doc = web.Load(site);
webBrowser1.DocumentText = doc.DocumentNode.OuterHtml; 
```

登录消失了，所以我想我必须以某种方式通过 cookie.. 有什么建议吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-05T06:47:26.297

检查[HtmlAgilityPack.HtmlDocument Cookie](https://stackoverflow.com/a/5683180/297114)

这是您正在寻找的示例*（语法未经过 100% 测试，我只是修改了一些我通常使用的类）*：

```
public class MyWebClient
{
    //The cookies will be here.
    private CookieContainer _cookies = new CookieContainer();

    //In case you need to clear the cookies
    public void ClearCookies() {
        _cookies = new CookieContainer();
    }

    public HtmlDocument GetPage(string url) {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Method = "GET";

        //Set more parameters here...
        //...

        //This is the important part.
        request.CookieContainer = _cookies;

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        var stream = response.GetResponseStream();

        //When you get the response from the website, the cookies will be stored
        //automatically in "_cookies".

        using (var reader = new StreamReader(stream)) {
            string html = reader.ReadToEnd();
            var doc = new HtmlDocument();
            doc.LoadHtml(html);
            return doc;
        }
    }
} 
```

以下是你如何使用它：

```
var client = new MyWebClient();
HtmlDocument doc = client.GetPage("http://somepage.com");

//This request will be sent with the cookies obtained from the page
doc = client.GetPage("http://somepage.com/another-page"); 
```

**注意：**如果你也想使用`POST`方法，只需创建一个`GetPage`与`POST`逻辑相似的方法，重构类等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T17:21:42.197

这里有一些建议：[Using CookieContainer with WebClient class](https://stackoverflow.com/questions/1777221/using-cookiecontainer-with-webclient-class)

但是，继续使用`HttpWebRequest`并在 cookie 中设置 cookie可能更容易`CookieContainer`：

*   [HTTPWebRequest 和 CookieContainer](https://stackoverflow.com/questions/10964177/httpwebrequest-and-cookiecontainer)
*   [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)

代码看起来像这样：

```
 // Create a HttpWebRequest
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(getUrl);

// Create the cookie container and add a cookie
request.CookieContainer = new CookieContainer();

// Add all the cookies
foreach (Cookie cookie in response.Cookies)
{
    request.CookieContainer.Add(cookie);
} 
```

第二件事是您不需要再次下载该站点，因为您已经从您的网络响应中获得了它并且您将它保存在这里：

```
HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
using (StreamReader sr = new StreamReader(getResponse.GetResponseStream(), Encoding.GetEncoding("windows-1251")))
{
        webBrowser1.DocumentText = doc.DocumentNode.OuterHtml;
} 
```

您应该能够只获取 HTML 并使用 HTML Agility Pack 对其进行解析：

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(webBrowser1.DocumentText); 
```

那应该这样做...... :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-05T12:41:51.190

尝试在本地缓存来自先前响应的 cookie，然后在每个 Web 请求中重新发送它们，如下所示：

```
private CookieCollection cookieCollection;

...

    parserObject = new HtmlWeb
                {
                    AutoDetectEncoding = true,
                    PreRequest = request =>
                    {
                        if (cookieCollection != null)
                            cookieCollection.Cast<Cookie>()
                                .ForEach(cookie => request.CookieContainer.Add(cookie));
                        return true;
                    },
                    PostResponse = (request, response) => { cookieCollection = response.Cookies; }
                }; 
```

# linux - 复制 openSUSE Linux 安装

> ID：15206646
> 
> 赞同：-1
> 
> 时间：2013-03-04T16:49:04.253
> 
> 标签：linux, installation, replication, opensuse

我正在寻找如何为多个系统复制 Linux 安装的解决方案。Linux 安装基于 openSUSE 12.2。所有系统都使用完全相同的硬件。

官方解决方案是使用 AutoYaST（参见[http://doc.opensuse.org/projects/autoyast/](http://doc.opensuse.org/projects/autoyast/)）。但是由于所有系统都使用相同的硬件，我正在考虑从安装中获取磁盘映像并将“dd”到所有新系统？你怎么看，有什么最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:22:44.103

尝试使用**parted**或**gparted**应用程序。gparted 是 parted 的 GUI。

[http://www.gnu.org/software/parted/manual/html_chapter/parted_8.html](http://www.gnu.org/software/parted/manual/html_chapter/parted_8.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:39:02.137

我相信有比`dd`. 大约十年前，我在相同的机器上尝试过，它确实有效，但速度很慢。我相信现在使用以下工具更有意义：

*   部分图像。我前段时间试过这个，效果很好。

*   克隆尼西拉。我只听说它可以完成这项工作，但没有我自己的观察。

有关更多信息，请查看[此链接](http://www.cyberciti.biz/open-source/linux-based-disk-cloning-imaging-software/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:33:27.187

dd 可以工作，但速度很慢，因为您必须复制整个磁盘，而不仅仅是数据。我一直安装数百个系统并使用[SALI](https://oss.trac.surfsara.nl/sali)和[System Imager](http://www.systemimager.org/)。我使用 SALI 来实际安装图像，使用 System Imager 来管理硬件和图像的变化。在 SALI 中有几种方法可以做到这一点，但标准方法是通过 pxeboot 加载程序。但这不是必需的。

# javascript - 可嵌套排序与可嵌套 JS 库

> ID：15206653
> 
> 赞同：3
> 
> 时间：2013-03-04T16:49:34.343
> 
> 标签：javascript, jquery, json, nested-forms, mptt

我正在尝试创建一个导航菜单编辑器，该编辑器由多个嵌套的、可排序的表单组成，这些表单最终将作为一个包含所有表单数据的巨型嵌套 JSON 数据块整体提交。

我正在检查的两个库是nestableSortable ( [https://github.com/mjsarfatti/nestedSortable](https://github.com/mjsarfatti/nestedSortable) ) 和 Nestable ( [https://github.com/dbushell/Nestable](https://github.com/dbushell/Nestable) )。这两个库似乎是此类工作最常用的项目，但似乎都没有用于序列化和嵌套这些表单的内置功能。现在我假设任何一个库都需要我自己以某种方式构建这个功能。

Nestable 似乎有点新，不依赖于 JQuery-UI，而 nestableSortable 似乎功能更丰富一些。我还想知道是否有人对嵌套表单有类似的问题，以及他们是否有关于如何让这些库中的任何一个轻松将嵌套表单序列化为 JSON 结构的提示，以及这些库中的任何一个是否更适合这样一个专案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:34:36.313

如果有人感兴趣，经过进一步检查，我发现 Nestable 需要这种格式才能工作：

```
<div class="dd">
    <ol class="dd-list">
        <li class="dd-item" data-id="1">
            <div class="dd-handle">Item 1</div>
        </li>
    </ol>
</div> 
```

我对 JS 库对必需的元素属性如此严格的想法并不特别满意，因为我觉得 Javascript 应该在某种程度上独立于标记来处理这个问题。因此，我最终选择了 nestedSortable 而不是 Nestable 库。

此外，nestedSortable 似乎具有树中节点的左/右/父属性的可用属性，这在服务器端执行树操作时可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T01:00:45.467

我从 nestedSortable 开始，然后切换到可嵌套。我现在切换回nestedSortable，因为它兼容IE7（项目要求）。是的，很容易理解更简约的可嵌套结构，但是，在使用这些（优秀的）实用程序中的任何一个之前，请务必使用您的目标浏览器进行测试。

顺便说一句，两者都具有序列化数据的能力（nestable 有一个，nestedSortable 有多个）。

# c# - 当复选框控件的 Visible 变为 true 时，comctl32.dll 使用过多的内存

> ID：15206654
> 
> 赞同：3
> 
> 时间：2013-03-04T16:49:44.143
> 
> 标签：c#, .net, memory, comctl32

我在 C# .NET 应用程序的运行时向 Windows 窗体添加控件。这些控件中的每一个都与特定信号交互并使用来自该信号的一些数据——信号名称、描述、来源、单位、值等。

这些控件上有一个复选框。当其中一个信号的复选框的 Visible 属性变为 true 时，我的应用程序的已提交内存将超过 800MB。其他数百个信号都没有问题。

我使用 DebugDiag 工具得知 comctl32.dll 正在分配 805.45 MBytes。尤其：

*   函数 comctl32_72380000!CCHeapAllocArraySize+3a
*   分配类型 堆分配
*   堆句柄 0xf37893cd
*   分配计数 1 个分配
*   分配大小 803.20 MB
*   泄漏概率 16%

我的下一个故障排除步骤应该是什么？哪些工具可以提供帮助？

**更新：** 我将问题跟踪到父控件上的 System.Windows.Forms.TrackBar。轨迹栏的最大值超过 200,000,000。当我将最大值降低到 100,000,000 时，它使用了大约一半的内存。将最大值设置为 1,000,000 左右会使用更合理的内存量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:34:40.600

我将问题跟踪到父控件上的 System.Windows.Forms.TrackBar。轨迹栏的最大值超过 200,000,000。当我将最大值降低到 100,000,000 时，它使用了大约一半的内存。将最大值设置为 1,000,000 左右会使用更合理的内存量。

checkbox.Visible 让我失望了。在 checkbox.Visible 变为真时，应用程序似乎正在为其创建控件和内存，但复选框本身与问题无关。

# vb.net - 每周查询分组 Visual Basic MS 访问

> ID：15206660
> 
> 赞同：0
> 
> 时间：2013-03-04T16:50:26.043
> 
> 标签：vb.net, vba, ms-access, grouping

我需要一些关于如何将我的数据分组到每周报告中的帮助。我在一个月前要求每月和每年，但我不知道如何以相同的方式制作每周报告。

我也不知道什么输出适合显示每周报告，但也许像这样？

```
Week_Sold           Total_Earnings
January 1 2013           1
January 8 2013           5 
```

还是像这样？

```
Week_Sold            Total_Earnings
January 1st Week          5
January 2nd Week          8 
```

还是像这样？

```
Week_Sold            Total_Earnings
January 1-7               5
January 8-15              8 
```

我不知道每周要做什么，所以有人可以推荐我一个好的每周报告格式吗？

顺便说一句，我的分组与这个[每年的答案相同，每月分组 Visual Basic](https://stackoverflow.com/questions/14886494/yearly-monthly-grouping-visual-basic)所以请尽量使程序接近这个，因为我在 Microsoft Access 或 Visual Basic 上不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:40:53.467

你有没有尝试过

```
 Format([YourDateColumn], "ww") 
```

?

这应该为您提供 ISO 标准中的周数。还有一些额外的开关；你应该很容易在 VBA 中找到它们。

# ruby-on-rails - Ruby On Rails - 如何重命名当前上传的文件？

> ID：15206663
> 
> 赞同：2
> 
> 时间：2013-03-04T16:50:35.187
> 
> 标签：ruby-on-rails, ruby, file-upload, file-rename

这是我上传文件的方法：

```
name = file.original_filename
directory = "images/"
path = File.join(directory, name)
File.open(path, "wb") { |f| f.write(file.read) } 
```

我需要重命名上传的文件 - 我想给它一个唯一的名称。但是如何获取文件名和扩展名呢？

如何重命名文件的一种方法是从文件名中删除扩展名（`.jpg`- 删除最后 4 个字符），重命名文件，然后合并名称+扩展名。

但这有点肮脏。有没有更干净、更优雅的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-30T19:25:40.240

有点晚了，但我为那些仍在寻找并到达这里的人提供了这个答案。

```
photo = params[:photo]
name = photo.original_filename
directory = "public/uploads/photos"
path = File.join(directory, name) 
uniq_name = (0...10).map { (65 + rand(26)).chr }.join
time_footprint = Time.now.to_formatted_s(:number)
File.open(path, "wb") do |file|
  file.write(photo.read)
  @uniq_path = File.join(directory, uniq_name + time_footprint + File.extname(file))
  File.rename(file, @uniq_path)
end 
```

我从[How to generate a random string in Ruby 中](https://stackoverflow.com/questions/88311/how-best-to-generate-a-random-string-in-ruby)获取随机字符串生成。并设置 @uniq_path 以在之后的创建函数上使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:00:18.010

这样做呢？

`File.rename(file, folder_path + "/" + new_name + File.extname(file))`

例如，在文件的同一文件夹中调用此脚本：

```
new_name = "TESTING"

File.open("test.txt") do |file|
  File.rename(file, new_name + File.extname(file))
end 
```

将文件重命名为：TESTING.txt

# xml - XSLT：如何忽略 xml 验证

> ID：15206664
> 
> 赞同：1
> 
> 时间：2013-03-04T16:50:40.407
> 
> 标签：xml, validation, xslt, xmlspy

我有一个格式不正确的 XML 文件。（它基本上是一个 DHTML 文件，用作内容工具的一部分，大多数 html 标签没有结束）。

现在这个 XML 文件是我们团队无法控制的。它来自不同的团队。

当我们试图对这些 XML 文件进行 XSLT 转换时，问题就出现了。

在进行 XSLT 转换之前，它会尝试验证 XML 文件并抛出一个错误，指出 XML 文档无效。

XSLT 中有没有一种方法可以说不验证您需要转换的 XML 文件。我们正在使用 XMLSpy 进行测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T17:26:34.843

> 我有一个格式不正确的 XML 文件。

没有这样的事情。如果它的格式不正确，那么它就不是 XML。

如果您必须处理这些数据，那么只需将“XML”从您的想法中删除。它不是 XML，忘记所有 XML 工具以及使用标准化格式所获得的所有好处。您正在处理一种专有的数据格式，并且您自己没有任何工具。

当然，它可能与 XML 足够接近，因此您最好的策略是在进行任何进一步处理之前将其转换为 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:55:40.910

您不能针对格式不正确的 XML 进行 XSLT 转换。您应该先将 DHTML 代码转换为 XML。为此，您可以像[这样使用一些 html 到 xml 转换器](https://sites.google.com/site/infivivek/resourse-centre/online-resources/html-to-xml-converter)

# c# - GCHandle.Free() 是否只是释放句柄？

> ID：15206665
> 
> 赞同：7
> 
> 时间：2013-03-04T16:50:41.057
> 
> 标签：c#, .net, garbage-collection

只是为了确保，假设我在这个固定数组上固定了字节数组和 GCHandle。

当调用 GCHandle.Free() 方法时，它是否只是简单地释放句柄并将原始字节数组的管理权交还给 GC，因此如果对该数组有活动引用，它还不会被释放?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T16:53:53.517

你说的对。`GCHandle`只是同一个对象的另一个句柄，只要你至少有一个，你的对象就不会被释放。

但是，您可以`GCHandle`使用类型进行分配，如果您是唯一指向它`Weak`的对象，这将允许 GC 收集您的对象（如果您也有“正常”引用，则不会发生任何不好的事情）。`GCHandle`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:54:47.770

是的。

> 当句柄超出范围时，您必须通过调用 Free 方法显式释放它；否则，可能会发生内存泄漏。当您释放固定句柄时，如果没有其他对它的引用，关联的对象将被取消固定并且将有资格进行垃圾回收。

-- [http://msdn.microsoft.com/en-us/library/khk3k17t.aspx](http://msdn.microsoft.com/en-us/library/khk3k17t.aspx)

# tfs - 在团队项目之间共享代码

> ID：15206666
> 
> 赞同：0
> 
> 时间：2013-03-04T16:50:46.673
> 
> 标签：tfs, branching-and-merging

我一直[在关注 TFS 2010 中的分支：](http://www.thecodeconnection.com/2011/11/branching-in-tfs-2010-part-v-sharing.html)关于在团队项目之间共享代码的第五部分（共享公共库）指南，但我在将我的公共代码项目中的 dll 共享到另一个项目时遇到问题。它指出我试图分支的项目也已经存在。如何将 dll 分支到另一个项目的 lib 文件夹中

# c# - 使用 TreeView 的主/详细视图

> ID：15206671
> 
> 赞同：3
> 
> 时间：2013-03-04T16:50:59.293
> 
> 标签：c#, wpf, mvvm

我正在使用 TreeView 和自定义详细信息视图控件在我的应用程序中实现主/详细信息视图。我也在尝试坚持 MVVM 模式。

现在 TreeView 绑定到包含所有详细信息的视图模型对象的集合，并且详细信息视图绑定到 TreeView 的选定项。

这很好用……直到其中一个 TreeView 节点有 5,000 个子节点并且应用程序突然占用了 500MB 的 RAM。

主窗口视图模型：

```
public class MainWindowViewModel
{
    private readonly List<ItemViewModel> rootItems;

    public List<ItemViewModel> RootItems { get { return rootItems; } } // TreeView is bound to this property.

    public MainWindowViewModel()
    {
        rootItems = GetRootItems();
    }

    // ...
} 
```

项目视图模型：

```
public ItemViewModel
{
    private readonly ModelItem item; // Has a TON of properties
    private readonly List<ItemViewModel> children;

    public List<ItemViewModel> Children { get { return children; } }

    // ...
} 
```

这是我绑定详细信息视图的方式：

```
<View:ItemDetails DataContext="{Binding SelectedItem, ElementName=ItemTreeView}" /> 
```

我对 WPF 和 MVVM 模式还很陌生，但是我想将 TreeView 绑定到一个较小的简化对象的集合，该对象仅具有显示项目所需的属性（如名称和 ID），这似乎是一种浪费，然后一旦选择它，就会加载所有详细信息。我将如何去做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:44:39.903

**概述**

这*应该*是一个简单的问题，将 TreeView 的 selected item 属性绑定到您的源上的某些东西。但是，由于 TreeView 控件的构建方式，您必须使用开箱即用的 WPF 编写更多代码来获得对 MVVM 友好的解决方案。

如果您使用的是香草 WPF（我假设您是），那么我建议您使用附加行为。附加的行为将绑定到主视图模型上的一个操作，当 TreeView 的选择更改时将调用该操作。您也可以调用命令而不是操作，但我将向您展示如何使用操作。

基本上，总体思路是使用细节视图模型的一个实例，该实例将作为主视图模型的属性提供。然后，您可以使用轻量级对象，而不是拥有数百个视图模型实例的 RootItems 集合，这些对象仅具有节点的显示名称，并且可能在它们后面具有某种 id 字段。当 TreeView 上的选择发生变化时，您希望通过调用方法或设置属性来通知您的详细信息视图模型。在下面的演示代码中，我在 DetailsViewModel 上设置了一个名为 Selection 的属性。

**代码演练**

这是附加行为的代码：

```
public static class TreeViewBehavior
{
    public static readonly DependencyProperty SelectionChangedActionProperty =
        DependencyProperty.RegisterAttached("SelectionChangedAction", typeof (Action<object>), typeof (TreeViewBehavior), new PropertyMetadata(default(Action), OnSelectionChangedActionChanged));

    private static void OnSelectionChangedActionChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var treeView = sender as TreeView;
        if (treeView == null) return;

        var action = GetSelectionChangedAction(treeView);

        if (action != null)
        {
            // Remove the next line if you don't want to invoke immediately.
            InvokeSelectionChangedAction(treeView);
            treeView.SelectedItemChanged += TreeViewOnSelectedItemChanged;
        }
        else
        {
            treeView.SelectedItemChanged -= TreeViewOnSelectedItemChanged;
        }
    }

    private static void TreeViewOnSelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        var treeView = sender as TreeView;
        if (treeView == null) return;

        InvokeSelectionChangedAction(treeView);

    }

    private static void InvokeSelectionChangedAction(TreeView treeView)
    {
        var action = GetSelectionChangedAction(treeView);
        if (action == null) return;

        var selectedItem = treeView.GetValue(TreeView.SelectedItemProperty);

        action(selectedItem);
    }

    public static void SetSelectionChangedAction(TreeView treeView, Action<object> value)
    {
        treeView.SetValue(SelectionChangedActionProperty, value);
    }

    public static Action<object> GetSelectionChangedAction(TreeView treeView)
    {
        return (Action<object>) treeView.GetValue(SelectionChangedActionProperty);
    }
} 
```

然后，在 TreeView 元素的 XAML 中，应用以下内容：`local:TreeViewBehavior.SelectionChangedAction="{Binding Path=SelectionChangedAction}"`. 请注意，您必须用 local 替换`TreeViewBehavior`类的命名空间。

现在，将以下属性添加到 MainWindowViewModel：

```
public Action<object> SelectionChangedAction { get; private set; } 
public DetailsViewModel DetailsViewModel { get; private set; } 
```

在 MainWindowViewModel 的构造函数中，您需要将 SelectionChangedAction 属性设置为某个值。`SelectionChangedAction = item => DetailsViewModel.Selection = item;`如果您的 DetailsViewModel 上有一个 Selection 属性，您可能会这样做。这完全取决于你。

最后，在您的 XAML 中，将详细信息视图连接到其视图模型，如下所示：

```
<View:ItemDetails DataContext="{Binding Path=DetailsViewModel}" /> 
```

这是使用直接 WPF 的 MVVM 友好解决方案的基本架构。现在，话虽如此，如果您使用像 Caliburn.Micro 或 PRISM 这样的框架，您的方法可能与我在这里提供的不同。要时刻铭记在心。

# audiojs - 音频播放器。如何通过 div 实现？

> ID：15206673
> 
> 赞同：0
> 
> 时间：2013-03-04T16:51:07.707
> 
> 标签：audiojs

我是 Javascript 的新手（我只用 php 编写代码）我想把这个播放器重新制作成 DIV。但我不明白如何将 DIV 块传递给 Audiojs 函数。请看播放器。需要一个建议。

[这是源 http://kolber.github.com/audiojs/demos/test6.html - 点击这里查看播放器](http://kolber.github.com/audiojs/demos/test6.html)

```
 <script>
  jQuery(document).ready(function($) { 
    // Setup the player to autoplay the next track
    var a = audiojs.createAll({
      trackEnded: function() {
        var next = $('#ol #li.playing').next();
        if (!next.length) next = $('#ol #li').first();
        next.addClass('playing').siblings().removeClass('playing');
        audio.load($('a', next).attr('data-src'));
        audio.play();
      }
    });

     var audio = a[0];

    // Load in a track on click
    $('#ol #li').click(function(e) {
      e.preventDefault();
      $(this).addClass('playing').siblings().removeClass('playing');
      audio.load($('a', this).attr('data-src'));
      audio.play();
    });

  });
</script>

    <div id="wrapper">
  <h1>wait what notorious xx <em>(2009)</em></h1>
  <audio preload></audio>

    <div id="ol">
            <span style="float: right;"><a onclick="alert('1')">add</a></span>
            <div id="li"><a data-src="http://s3.amazonaws.com/audiojs/04-islands-is-the-limit.mp3">play</a></div>

            <span style="float: right;"><a onclick="alert('2')">add</a></span>
            <div id="li"><a data-src="http://s3.amazonaws.com/audiojs/03-its-all-about-the-crystalizabeths.mp3">play 2</a></div>

            <span style="float: right;"><a onclick="alert('3')">add</a></span>
            <div id="li"><a data-src="http://s3.amazonaws.com/audiojs/04-islands-is-the-limit.mp3">play 3</a></div>
        </div>

    </div> 
```

问题是我想在里面放更多的 div 但是这个脚本需要下一个 DOM 元素。

我认为**var next = $('#ol #li.playing').next(); 的问题**

# javascript - 防止浏览器搜索 ctrl f 滚动我折叠的 div

> ID：15206675
> 
> 赞同：5
> 
> 时间：2013-03-04T16:51:18.627
> 
> 标签：javascript, html, css

我有一个“折叠”的面板，通过将包装器 div 的宽度设置为比内容的宽度小很多。但是，当我`ctrl f`用来搜索单词时，我折叠的面板会滚动，即。折叠面板的包装器 div的`scrollLeft`属性不再为 0。这是一个问题，因为我不希望它滚动，因为它弄乱了 UI。

有没有办法阻止搜索自动滚动折叠面板中的内容？我可以锁定某种事件（焦点？），以便`scrollLeft`每当浏览器的搜索激活时我可以重置为 0，或者我可以设置 CSS？

我没有使用 jQuery，所以任何与 jQuery 相关的东西都不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T11:02:54.980

这是任何浏览器的默认功能和用户期望的功能，删除或阻止它将使开发人员能够严重改变用户体验，通常是不可能的，也不是一个好主意。

话虽如此，我的第一个建议如下

1) 完全折叠后将对象或其内容的 CSS 显示设置为无。
2）折叠时删除内容并将其存储在内存中，以便在打开折叠内容时重新注入。
3) 在折叠元素打开时，将 scrollLeft 设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:27:37.817

Have you tried overflow:hidden on the div?

# javascript - 如果在下拉列表中使用 JavaScript 函数

> ID：15206676
> 
> 赞同：-5
> 
> 时间：2013-03-04T16:51:19.497
> 
> 标签：javascript, html

我正在尝试制作一个专家系统来检测网络问题。用户将有 4 个问题，每个问题有 3 到 4 个答案。用户输入后，用户点击按钮，检测并解决问题。我有点明白了，但我知道缺少一些东西。目前，我只添加了一些随机问题和答案，以检查是否确实有效。请帮助使用 java 脚本，因此它将根据答案提供有关网络问题的详细信息。提前致谢！:)

```
 1.Can you access to the internet? <BR>

<select id="internet">

  <option value="yes">yes</option>

  <option value="No">no</option>

  <option value="Yes, but at slow">Yes, but at slow</option>

  <option value="Yes/No, it workes but it suddenly it stops and start working again ">Yes/No, it workes but it suddenly it stops and start working again</option>

</select>

<br>

<br><p>

2.Is it just your computer?<BR> 

 <select id="computer">

  <option value="yes">yes</option>

  <option value="whole company">whole company</option>

  <option value="just my department">just my department</option>

  <option value="me and few staff">me and few staff</option>

</select>

<br>

<br><p>

<button onclick="myFunction()">Detect</button>

<p id="Solution"></p>

<script>
function myFunction()
{

if (internet=="no"||computer=="yes")
  {
  x="check your cable is not cut or loose";
  }
else if (internet=="no"||computer=="yes")
  {
  x="connection problem";
  }
else
  {
  x="other problems....";
  }
document.getElementById("Solution").innerHTML=x;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:04:44.857

```
function myFunction()
{
    var internetElem =  document.getElementById("internet");
    var internet = internetElem.options[internetElem.selectedIndex].value;
    var computerElem =  document.getElementById("computer");
    var computer= internetElem.options[internetElem.selectedIndex].value;

   if (internet=="no"||computer=="yes") {
      x="check your cable is not cut or loose";
   } else if (internet=="no"||computer=="yes") {
      x="connection problem";
   } else {
      x="other problems....";
   }
   document.getElementById("Solution").innerHTML=x;
} 
```

你需要类似上面的东西。只需通过其 id 找到一个元素，获取所选元素的索引并获取所选选项的值。请注意， value 将返回您放置的内容，`<option value="..."`并且字符串比较区分大小写，因此`internet == "no"`, 将不起作用，您应该将其更改为`internet == "No"`（或更改 HTML 标记中的值）

# eclipse - 从 Eclipse Juno 移除 MoreClipboard

> ID：15206679
> 
> 赞同：4
> 
> 时间：2013-03-04T16:51:30.020
> 
> 标签：eclipse, clipboard

具体来说，我在 mu Eclipse Juno 中安装了 More Clipboard 1.6。现在我发现自己无法舒适地使用它，所以决定将其删除。

所以我从 Eclipse 中卸载了它（帮助、关于等），但是当我单击 ctrl+c 时，Eclipse 继续向我显示阻止我输入的令人不安的对话框，即右下角的黄色 diwlog。

有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T09:11:42.410

1.  关闭 Eclipse。

2.  搜索并删除所有“moreclipboard”和“MoreClipboard”行：

    工作区/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi

3.  启动 Eclipse。

如果它不起作用，请关闭 Eclipse 并搜索并删除 ~/.eclipse 文件夹中的所有“moreclipboard”行。

# sql - 重复区域中的嵌套查询，需要更好的方法来做到这一点

> ID：15206682
> 
> 赞同：0
> 
> 时间：2013-03-04T16:51:52.640
> 
> 标签：sql, sql-server

好的，这是主要的选择查询：

```
 SELECT 
        tbl_equip_swl_unit.unit_name, 
        tbl_equipment.equipment_id, 
        tbl_equipment.e_serial, 
        tbl_equipment.e_description, 
        tbl_equipment.e_swl,  
        tbl_equipment.e_swl_unit_id, 
        tbl_Lifting_Gear.lifting_through, 
        tbl_Lifting_Gear.liftingNDT,
        tbl_Lifting_Gear.lifting_ref_no, 
        tbl_Lifting_Gear.liftingTest,
        tbl_Lifting_Gear.inspected 
 FROM tbl_equipment 
INNER JOIN tbl_equip_swl_unit ON tbl_equipment.e_swl_unit_id = tbl_equip_swl_unit.unit_id 
INNER JOIN tbl_Lifting_Gear ON tbl_equipment.equipment_id = tbl_Lifting_Gear.e_id
WHERE   lifting_loc = @loc AND tbl_Lifting_Gear.con_id = @con AND tbl_equipment.e_deleted = 'N' ORDER BY lifting_ref_no, e_swl, e_serial 
```

下面的查询当前嵌套在网页的重复区域中，该区域一直运行直到返回主查询中的所有结果。

```
SELECT TOP 1
        e_defects,
        con_id,
        lifting_loc,
        lifting_date,
        e_add_type

FROM dbo.tbl_Lifting_Gear 
WHERE e_id = @id ORDER BY lifting_date DESC 
```

@id 的值为 tbl_Lifting_Gear.equipment_id（来自父查询）

@con 和 @loc 是从浏览器传递的 2 个变量。

基本上，主查询返回正在检查的设备列表，对于返回的每一行，嵌套查询运行以查找先前检查的详细信息。它通过选择具有针对 lift_date 的值的最新结果来实现这一点，主查询中的设备 ID 是嵌套查询中用于 WHERE 的变量）

因此，它绝对会浪费页面的加载时间，我应该指出，我在这种状态下继承了这个项目，并试图在不改变数据库结构的情况下使站点上的所有数据库交互合理化。

因此，我将不胜感激有关如何最好地构造语句以在一个表中返回所有必需结果的任何想法，谢谢。

# android - 在应用程序中将 Youtube 集成到 Android

> ID：15206684
> 
> 赞同：0
> 
> 时间：2013-03-04T16:52:01.510
> 
> 标签：android, youtube-api, google-api-java-client

我正在尝试将 Youtube 集成到我的 android 应用程序中，我需要将视频上传到用户帐户。从 Youtube 开发人员看来，有两个版本可以这样做。

1.  3.0版（实验）
2.  2.0 版

那么我应该为生产应用程序使用 3.0 版本，因为它被标记为实验性的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:42:53.337

我强烈推荐使用[YouTube Data API v3](https://developers.google.com/youtube/v3/)。尽管它被归类为实验性的，但它非常稳定并且将得到强烈支持。V2 将被弃用，仅提供有限的支持。大多数开发人员都在使用 V3。

# php - 如果在移动设备（不是平板电脑）上重定向用户，但提供反向链接

> ID：15206685
> 
> 赞同：0
> 
> 时间：2013-03-04T16:52:02.133
> 
> 标签：php, jquery, redirect, mobile, back

这对我来说是全新的，不知道我在做什么，所以我真的更喜欢一个简单实施的解决方案（如果它存在的话）。

我需要将在移动设备（不是平板电脑）上访问 www.domain.co.uk（托管在 Wordpress 上）的用户重定向到这样的特定页面（使用 WP 的永久链接）：

www.domain.co.uk/mobile-home

从那个移动页面，我还需要提供一个链接返回到同一域上的桌面主页，如下所示：

www.domain.co.uk/desktop-home

我一直在我的 header.php 文件中使用与此类似的代码：

```
<script>if( 'ontouchstart' in window ) window.location = 'mobile.html';</script> 
```

但如果我直接链接到桌面页面，它只会将移动用户重定向回移动版本。如何获得我需要的功能？

**更新**

好的，我的第一步是将我的移动访问者引导到移动页面。因此，我已将以下代码粘贴到我的网站主页的页面模板中，并且经过测试似乎可以正常工作。我把它放在开头的“body”标签下面：

```
<script>
if( /Android|webOS|iPhone|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent) ) {
window.location = "176.32.230.17/domain.co.uk/m";
}
</script> 
```

现在我无法使用以下代码链接回主页。它带我回到主页，但主页上面有检测设备的代码，并不断带我回到移动网站。我是否将设备检测放在正确的位置？：

```
<a href="http://176.32.230.17/domain.co.uk/?ref=desktop">Link back to desktop website</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:23:07.727

因此，通过使用@Phillip 的代码，我设法为我的问题提出了一个完整的解决方案。

我将以下 JS 放置在我的 header.php 模板中以检测用户代理是否是移动设备，如果是则执行另一次检查以查看 URL 是否包含主题标签“#desktop”，如果包含，则不执行任何操作并让用户继续使用桌面版。如果没有，则重定向到移动网站：

**JS**

```
<script>
if( /Android|webOS|iPhone|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent) ) {

if(window.location.hash == "#desktop"){
    // Stay on desktop website
} else {
    window.location = "http://www.domain.co.uk/m";
}

}
</script> 
```

然后要完成循环，在移动网站上添加一个链接，将标签“#desktop”添加到 URL，确保它们不会自动重定向回移动版本：

```
<a href="http://www.domain.co.uk/#desktop">View desktop site</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:08:51.267

您可以使用 的用户代理属性检测移动浏览器`navigator`并将访问者重定向到移动页面。平板电脑和手机之间的差异并不可靠（iE 是平板电脑还是手机？）

```
if( /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent) ) {
    window.location = "yourmobileurl.com/?ref=desktop";
} 
```

在服务器上，您可以检查桌面的 ref var 并向访问者显示链接以返回并将选择存储在会话中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T17:08:54.657

```
var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i);
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
    }
}; 
```

请参考此链接：[http ://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)

它解释了如何使用 javascript 检测设备

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:55:16.957

一种解决方案是让返回桌面版本的链接具有 url 参数，并且仅在未设置该参数时从桌面转发到移动设备。

至于检测设备，您必须阅读用户代理并提供逻辑。 [这是检测 iPad 和 iPhone 的链接](http://www.htmlgoodies.com/beyond/webmaster/toolbox/article.php/3888106/How-Can-I-Detect-the-iPhone--iPads-User-Agent.htm)。类似的用户代理适用于其他人。没有灵丹妙药来识别平板电脑。

您可以通过了解他们的用户代理返回的内容来识别大多数特定设备，但这始终可以更改，并且您必须为每个可能的平板电脑执行此操作。

至于参数解决方案，这似乎很简单。您将链接到[http://www.mywebpage.com/MyDesktopHome?forwardToMobile=no](http://www.mywebpage.com/MyDesktopHome?forwardToMobile=no)。否则，您可以将其存储在会话或 cookie 中，具体取决于您希望将其保留多长时间。

# python - Sublime 文本编辑器插件，扫描 div id 和 classes

> ID：15206686
> 
> 赞同：0
> 
> 时间：2013-03-04T16:52:05.590
> 
> 标签：python, plugins, sublimetext2

我知道我应该显示一些起始代码，以便为您提供有关我正在尝试做什么的线索，但我真的处于基本水平，我找不到任何资源来向我展示我的内容追了 基本上，我正在尝试为 Sublime Text 编辑器编写一个插件，它选择所有 div ID，然后将它们输出到文件中。最好的方法是什么？看起来应该很容易，但我不太确定。

在此先感谢您的帮助，

伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:22:14.997

假设您对 python 有一定的了解，我将从本教程开始编写插件（[链接](http://net.tutsplus.com/tutorials/python-tutorials/how-to-create-a-sublime-text-2-plugin/)）。该教程的作者除其他外还写了包控制。当然，它适用于 ST2，但对于您正在尝试做的事情，我认为编写与 ST2 和 ST3 兼容的插件没有任何重大问题。

如何编写特定插件取决于您。一种方法可能是利用 view.find_all() 方法。这需要一个正则表达式并返回一组区域。从这些区域中，您可以获取文本，然后获取 div 的 ID。可能有更好的方法，但这可能会作为初步尝试。可以通过通常的 python 方式写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:38:22.997

查看[http://www.sublimetext.com/docs/2/api_reference.html](http://www.sublimetext.com/docs/2/api_reference.html)，但请注意 Sublime Text 3 目前处于测试阶段。它引入了对插件 api 的更改，以及支持 Python 3 的要求。请参阅[http://www.sublimetext.com/docs/3/porting_guide.html](http://www.sublimetext.com/docs/3/porting_guide.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:54:49.417

这看起来是一个不错的起点：[http ://www.sublimetext.com/docs/plugin-basics](http://www.sublimetext.com/docs/plugin-basics)

# javascript - 查找不在特定父级内的元素

> ID：15206688
> 
> 赞同：0
> 
> 时间：2013-03-04T16:52:15.330
> 
> 标签：javascript, jquery, jquery-selectors

我试图弄清楚如何找到不在特定父级内的元素。这是一个示例html：

```
<div class="id01">
<p>some text</p>
</div>

<p>some more text</p>

<p>some more more text</p> 
```

好的，现在我需要找到不在父项**#id01内的****第一段**，这就是我迷路的地方。我开始这样做

 **```
$('p:first').text(); //this way i would get the P inside DIV but I want to skip that one and count on next one that has no parent #01 
```

希望我说清楚了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:58:38.453

你可以很容易地使用[:not()](http://api.jquery.com/not-selector/)选择器，结合`:first`.

```
$("p:not(.id01 p):first").text() 
```

[JSF](http://jsfiddle.net/ypheH/1/)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:53:54.907

解决方案 1：

```
$('p').not('.id01 *').eq(0) 
```

解决方案 2：

```
$('p').filter(function(){ return $(this).closest('.id01').length==0 }).eq(0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:57:31.273

非常简单的方法，正如 adamb 所建议的那样，所有这些东西都在 jQuery 网站上，但是在这里

```
 $("p:first").not($(".id01 p")); 
```

应该给你你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T17:06:48.600

你可以使用 .next() 选择器

> $("div.id01").next('p')

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T16:55:52.490

使用 eq() 作为索引`<p>`

```
console.log($('p').eq(1).text()); //some more text
console.log($('p').eq(2).text()); //some more more text 
```**

# c# - Windows 8：如何使用内置的墨迹功能撤消和重做墨迹？

> ID：15206693
> 
> 赞同：2
> 
> 时间：2013-03-04T16:52:30.363
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, windows-store-apps

我已经根据 microsoft 的简化墨迹示例在我的应用程序中实现墨迹代码：http: [//code.msdn.microsoft.com/windowsapps/Input-simplified-ink-sample-11614bbf/view/SourceCode](http://code.msdn.microsoft.com/windowsapps/Input-simplified-ink-sample-11614bbf/view/SourceCode)

首先，我创建了一个类来保存操作（绘制/删除/清除）的数据，如下所示：

```
public enum eInkOperation
{
    Draw,
    Delete,
    None
}

public class InkOperation
{
    public InkStroke Stroke { get; set; } //requred for drawing from undo
    public eInkOperation Operation { get; set; }

    public InkOperation(InkStroke stroke, eInkOperation inkOperation)
    {
        Stroke = stroke.Clone(); //needs to be cloned for AddStroke to work
        Operation = inkOperation;
    }
} 
```

然后我做了一个堆栈用于撤消墨迹操作和一个用于重做操作

```
//stack of normal operations
Stack<InkOperation> _undoStack = new Stack<InkOperation>(); 
//Undo action will pop them off of the undo stack and push them onto the redo stack
Stack<InkOperation> _redoStack = new Stack<InkOperation>(); 
```

当用户撤消笔画时，我将其推送到重做堆栈并使用以下方法从 inkmanager 中删除它：

```
private void RedoStackPush(InkOperation inkOperation)
{
    inkOperation.Stroke = inkOperation.Stroke.Clone();
    _redoStack.Push(inkOperation);
}

  private void DeleteStroke(InkStroke stroke)
    {                            
        stroke = inkManager.GetStrokes().Last();
        stroke.Selected = true;
        inkManager.DeleteSelected();
    } 
```

然后，当用户单击重做时，笔划会从重做堆栈中弹出并使用以下方法绘制：

```
private void DrawStroke(InkStroke stroke)
{
        if (stroke!=null)
        {
            inkManager.Mode = InkManipulationMode.Inking;
            inkManager.AddStroke(stroke);
        }
        renderer.Clear(); //this renderer object smooths the strokes
        //and adds them as Path objects to the desired control (Grid, etc)
        renderer.AddInk(inkManager.GetStrokes());
} 
```

这一切都奏效了，笔画又显示在网格上。但是，当我尝试擦除新重绘的笔画时，我得到了这个异常：

```
AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

这发生在：

```
public void PointerMoved(PointerRoutedEventArgs e)
{
    try
    {
        var pointerPoint = e.GetCurrentPoint(_inkingArea);
        var pointerEventType = InkHelpers.GetPointerEventType(e);
        if (pointerId == (int)pointerPoint.PointerId)
        {
            switch (inkManager.Mode)
            {
                case InkManipulationMode.Inking:
                case InkManipulationMode.Selecting:
                    //process intermediate points
                    var intermediatePoints = e.GetIntermediatePoints(_inkingArea);
                    for (int i = intermediatePoints.Count - 1; i >= 0; i--)
                    {
                        inkManager.ProcessPointerUpdate(intermediatePoints[i]);
                    }
                    //live rendering
                    renderer.UpdateLiveRender(pointerPoint);
                    break;
                case InkManipulationMode.Erasing:
                    //check if something has been erased
                    //in erase mode InkManager.ProcessPointerUpdate returns an invalidate rectangle:
                    //if it is not degenerate, something has been erased
                    //in erase mode don't bother processing intermediate points

                    //If inkManager.ProcessPointerUpdate throws an exception, it crashes the app regardless of any catches
                    Rect invalidateRect = (Rect)inkManager.ProcessPointerUpdate(e.GetCurrentPoint(_inkingArea));
                    if (invalidateRect.Height != 0 && invalidateRect.Width != 0)
                    {
                        //we don't know what has been erased so we clear the render
                        //and add back all the ink saved in the ink manager
                        renderer.Clear();

                        var remainingStrokes = inkManager.GetStrokes();
                        renderer.AddInk(remainingStrokes);
                    }
                    break;
                default:
                    break;
            }
        }
    }
    catch (Exception) { }
} 
```

在这一行：

```
Rect invalidateRect = (Rect)inkManager.ProcessPointerUpdate(e.GetCurrentPoint(_inkingArea)); 
```

I think the problem lies in the process of adding strokes to the ink manager. I tried making a new stroke and even inheriting from the InkStroke to make it customizable but the InkStroke class is sealed and it doesn't have a constructor. The only was I found to copy it was to do inkStroke.Clone(). But even that has its problems when trying to redraw deleted ink (undo a deleted stroke).

I tried to make this question as clear as possible using the least amount of code to avoid confusion, so let me know if it's insufficient.

Also in this question I'm focusing on undoing a draw action. Undoing an erasing action (or even "clear all" action) has its own set of problems because I can't make a copy of the InkStroke object.

Thanks in advance for your time and consideration.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:59:08.003

请参阅MSDN 中的[此](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/782d0f5c-8e72-439d-986a-09b58c9ff44b)线程，它可能会有所帮助。

# android - Firefox 中的“阅读器模式”是如何触发的？

> ID：15206695
> 
> 赞同：15
> 
> 时间：2013-03-04T16:52:37.893
> 
> 标签：android, html, algorithm, firefox, user-experience

我在 Android 设备上使用 Firefox Mobile，我喜欢[“阅读器模式”功能](http://howto.cnet.com/8301-11310_39-57529304-285/how-to-enable-reader-mode-in-firefox-for-android/)。但是，该功能并不总是可用（例如[Bash Guide](http://mywiki.wooledge.org/FullBashGuide)）。所以我正在寻找有关此功能机制的信息，因为它仍然无法预测。

它是否在寻找一些语义、@ids/@class 值或其他东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T09:48:42.803

Android 上的 Firefox 使用 readability.js 作为其“阅读器模式”支持的基础。以下是制作易于提取内容的页面的内容指南： [http ://www.readability.com/developers/guidelines](http://www.readability.com/developers/guidelines)

Firefox 中使用的原始可读性代码来自： [http ://code.google.com/p/arc90labs-readability/](http://code.google.com/p/arc90labs-readability/)

请注意，并非所有页面都可以转换为阅读器模式，实际上，这不是本意。如果您遇到您认为应该由阅读器模式处理的页面，请在 github 问题跟踪器中提交问题：

[https://github.com/mozilla/readability/issues](https://github.com/mozilla/readability/issues)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T16:57:55.157

此功能的开发者只需[通过 Twitter 回复](https://twitter.com/lucasratmundo/status/308620041551740928)：

> @edouard_lopez 没有文档，抱歉。它根据许多事物（标签名称、类、id 等）查找页面的主要内容。

# android - 来自color.xml的android位图颜色

> ID：15206697
> 
> 赞同：0
> 
> 时间：2013-03-04T16:52:45.397
> 
> 标签：android, colors, bitmap

我想将位图颜色设置为`src`. 但我的颜色没有显示，只是空屏。我正在尝试做

```
mIcon11 = BitmapFactory.decodeResource(getResources(), R.color.grey); 
```

如果我写`R.drawable.imageName`它显示图像，为什么我的颜色没有显示？

我的颜色是：

```
<resources>
<color name="grey">#696969</color>
</resources> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:18:11.337

作为`Bitmap`：

```
int bitmapWidth = ...
int bitmapHeight = ....
Bitmap mIcon11 = Bitmap.createBitmap(bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
mIcon11.eraseColor(getResources().getColor(R.color.grey)); 
```

.
由于它是一种颜色，因此您实际上并不需要`Bitmap`. 您最好将其加载为`Drawable`：

```
Drawable mIcon11 = getResources().getDrawable(R.color.grey); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T17:05:31.720

你可以参考这个：[如何在android中获取位图的RGB值](https://stackoverflow.com/questions/5669501/how-to-get-rgb-values-of-bitmap-in-android)

或者

[http://www.java2s.com/Code/Android/2D-Graphics/Findcomponentsofcolorofthebitmapatxy.htm](http://www.java2s.com/Code/Android/2D-Graphics/Findcomponentsofcolorofthebitmapatxy.htm)

他们提到了如何获得位图颜色

# jquery - 在谷歌地图上点击 jquery 用纬度/经度值更新文本字段

> ID：15206699
> 
> 赞同：0
> 
> 时间：2013-03-04T16:52:47.073
> 
> 标签：jquery, google-maps-api-3

正如标题所说的鼠标点击我想在点击位置添加一个标记，然后在正确的文本字段中显示坐标，一切都很好，只有 JQuery 没有更新我的文本字段。

```
<script>
var map;
var markersArray = [];
function initialize() {
  var mapOptions = {
  zoom: 15,
  center: new google.maps.LatLng(-34.397, 150.644),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  disableDefaultUI: false,
  zoomControl: true,
  zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE
  }
};

  map = new google.maps.Map(document.getElementById('gmaps'),
  mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    var latitude = event.latLng.lat();
    var longitude = event.latLng.lng();
    deleteOverlays();
    addMarker(event.latLng);
    updateTextFields(latitude, longitude);
  });

  google.maps.event.addListener(marker, 'click', function(event) {
    showInfo(window);
  });

}

function updateTextFields(lati, longi) {
  $('#inputLatitude').change(function() {
    $('#inputLatitude').val(lati);
  });
  $('#inputLongitude').change(function() {
    $('#inputLongitude').val(longi);
  });
}

function addMarker(location) {
  marker = new google.maps.Marker({
    position: location,
    map: map
  });
  markersArray.push(marker);
}

function deleteOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
}

function loadScript() {
  var script = document.createElement('script');
  script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&' +
  'callback=initialize';
  document.body.appendChild(script);
}
$(document).ready(function() {
$(window).resize(function () {
    var h = $(window).height(),
        offsetTop = 190; // Calculate the top offset

    $('#gmaps').css('height', (h - offsetTop));
  }).resize();
});

window.onload = loadScript;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:02:12.797

jQuery change 用于检测输入的变化值。只需像这样重写你的函数：

```
function updateTextFields(lati, longi) {
  $('#inputLatitude').val(lati);
  $('#inputLongitude').val(longi);
} 
```

# css - 为什么这个 CSS 属性选择器不起作用？

> ID：15206702
> 
> 赞同：0
> 
> 时间：2013-03-04T16:52:58.480
> 
> 标签：css, css-selectors

```
<style>
div [data-endpoint="/one/two/three/"] {display:none}
</style>

<div data-endpoint="/one/two/three/">
    example text
</div> 
```

此处的实时代码示例：http: [//jsfiddle.net/DDUNp/2/](http://jsfiddle.net/DDUNp/2/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T16:54:35.330

因为`div`和`data-endpoint`属性之间的空格明确指定具有该属性的元素是 ; 的后代元素`div`。删除空间，它的工作原理：

```
div[data-endpoint="/one/two/three/"] {display:none} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DDUNp/3/)。

参考：

*   [CSS 选择器，位于 W3.org](http://www.w3.org/TR/selectors/#selectors)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T16:54:15.307

有很多空格：

```
div[data-endpoint="/one/two/three/"] {display:none} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:54:43.957

去掉 div 和 [ 之间的空格

```
div[data-endpoint="/one/two/three/"] {display:none} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T16:54:54.100

您需要删除 div 和 [data-endpoint="/one/two/three/"] 之间的空格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T16:56:00.787

正在工作中。只需删除空间。

[http://jsfiddle.net/DDUNp/4/](http://jsfiddle.net/DDUNp/4/)

```
div[data-endpoint='/one/two/three/'] {display:none;} 
```

# jakarta-ee - 如何找到分离 openjpa 实体时加载的字段

> ID：15206704
> 
> 赞同：1
> 
> 时间：2013-03-04T16:53:02.797
> 
> 标签：jakarta-ee, openjpa

我正在为我的公司构建一个审计框架，并试图获取从托管状态中删除时与实体一起分离的字段集合。我需要知道哪些字段设置为空客户端 -vs- 在实体分离时未加载，因此当我将其与托管实体进行比较时，我不会盲目地加载整个数据库。该实体有一个@DetachedState 字段。

有谁知道如何将 Detached State 值转换为实体上实际加载的字段的映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:24:17.027

在挖掘了一堆 OpenJPA 代码后，我设法解决了这个问题。它可能不是最优雅的代码，也没有它可能应该的安全检查，但它在这一点上完成了工作。

```
 final PersistenceCapable pc = ((PersistenceCapable) detachedEntity);
    final Object[] state = (Object[]) pc.pcGetDetachedState();
    final BitSet loadedFieldsOnDetach = (BitSet) state[1];

    final OpenJPAEntityManager oem = getEntityManager();
    final Broker _broker = ((EntityManagerImpl) oem).getBroker();
    final ClassMetaData meta = _broker.getConfiguration().getMetaDataRepositoryInstance()
            .getMetaData(ImplHelper.getManagedInstance(detachedEntity).getClass(), _broker.getClassLoader(), true);

    for (final FieldMetaData fmd : meta.getDefinedFields()) {
        if (loadedFieldsOnDetach.get(fmd.getIndex())) {
            System.out.println(fmd.getName() + " was loaded on detach.");
        }
    } 
```

希望这对其他人有帮助！

# c++ - 用boost读取json文件

> ID：15206705
> 
> 赞同：27
> 
> 时间：2013-03-04T16:53:03.390
> 
> 标签：c++, json

我有一个这样的文件：

[数据.json]

```
{
    "electron": {
        "pos": [0,0,0],
        "vel": [0,0,0]
    },

    "proton": {
        "pos": [1,0,0],
        "vel": [0,0.1,0]
    },

     "proton": {
        "pos": [-1,0,0],
        "vel": [0,-0.1,-0.1]
    }
} 
```

如何通过解析此文件创建粒子矢量。据我了解，我需要使用 boost 读取文件并将字符串（行）读入向量，然后解析向量的内容。

类粒子是这样的：

```
class Particle
{

    private:
    particle_type mtype; // particle_type is an enum
    vector<double> mPos;
    vector<double> mVel;
}; 
```

类中省略了其他获取/设置方法。

基本上我想帮助创建一个`vector<Particle>`正确的位置和速度数据以及解析到其中的粒子类型数据。提前致谢。

主要代码：

```
int main(){

    boost::property_tree::ptree pt;
    boost::property_tree::read_json("data.json", pt);
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-04T17:09:54.277

我稍微修改了你的 JSON。稍微未经测试的代码。

```
{
    "particles": [
        {
            "electron": {
                "pos": [
                    0,
                    0,
                    0
                ],
                "vel": [
                    0,
                    0,
                    0
                ]
            },
            "proton": {
                "pos": [
                    -1,
                    0,
                    0
                ],
                "vel": [
                    0,
                    -0.1,
                    -0.1
                ]
            }
        }
    ]
} 
```

...

```
#ifdef _MSC_VER
#include <boost/config/compiler/visualc.hpp>
#endif
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/foreach.hpp>
#include <cassert>
#include <exception>
#include <iostream>
#include <sstream>
#include <string>

int main()
{
    try
    {
        std::stringstream ss;
        // send your JSON above to the parser below, but populate ss first

        boost::property_tree::ptree pt;
        boost::property_tree::read_json(ss, pt);

        BOOST_FOREACH(boost::property_tree::ptree::value_type &v, pt.get_child("particles.electron"))
        {
            assert(v.first.empty()); // array elements have no names
            std::cout << v.second.data() << std::endl;
            // etc
        }
        return EXIT_SUCCESS;
    }
    catch (std::exception const& e)
    {
        std::cerr << e.what() << std::endl;
    }
    return EXIT_FAILURE;
} 
```

修改你认为合适的。

打印整个树以查看正在读取的内容。这有助于调试。

```
void print(boost::property_tree::ptree const& pt)
{
    using boost::property_tree::ptree;
    ptree::const_iterator end = pt.end();
    for (ptree::const_iterator it = pt.begin(); it != end; ++it) {
        std::cout << it->first << ": " << it->second.get_value<std::string>() << std::endl;
        print(it->second);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T17:04:14.730

您可以使用以下代码进行迭代：

```
boost::property_tree::basic_ptree<std::string,std::string>::const_iterator iter = pt.begin(),iterEnd = pt.end();
for(;iter != iterEnd;++iter)
{
     iter->first; // Your key, at this level it will be "electron", "proton", "proton"
     iter->second; // The object at each step {"pos": [0,0,0], "vel": [0,0,0]}, etc.
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-21T21:38:42.580

只是更正上面答案的问题，但我无法在评论中得到正确的格式：

```
#ifdef _MSC_VER
#include <boost/config/compiler/visualc.hpp>
#endif
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/foreach.hpp>
#include <cassert>
#include <exception>
#include <iostream>
#include <sstream>
#include <string>

void print(boost::property_tree::ptree const& pt)
{
    using boost::property_tree::ptree;
    ptree::const_iterator end = pt.end();
    for (ptree::const_iterator it = pt.begin(); it != end; ++it) {
        std::cout << it->first << ": " << it->second.get_value<std::string>() << std::endl;
        print(it->second);
    }
}

int main()
{
    try
    {
        std::stringstream ss;
        // send your JSON above to the parser below, but populate ss first

        ss << "{ \"particles\": [ { \"electron\": { \"pos\": [ 0, 0, 0 ], \"vel\": [ 0, 0, 0 ] }, \"proton\": { \"pos\": [ -1, 0, 0 ], \"vel\": [ 0, -0.1, -0.1 ] } } ]}";

        boost::property_tree::ptree pt;
        boost::property_tree::read_json(ss, pt);

        BOOST_FOREACH(boost::property_tree::ptree::value_type &v, pt.get_child("particles"))
        {
            assert(v.first.empty()); // array elements have no names
            print(v.second);
        }
        return EXIT_SUCCESS;
    }
    catch (std::exception const& e)
    {
        std::cerr << e.what() << std::endl;
    }
    return EXIT_FAILURE;
} 
```

# php - 将 jQuery 变量传递给 PHP - 500 内部服务器错误

> ID：15206714
> 
> 赞同：0
> 
> 时间：2013-03-04T16:53:32.507
> 
> 标签：php, jquery

我正在尝试将 jQuery 值传递给 PHP，如下所示：

```
var your_var_value=1200;

$.ajax({
    type: "POST",
    url: "scripts/php/controllers/tariff.fare.controller.php",
    data: { var_value: your_var_value},
    error:function(request){alert(request.statusText)},
    success:function(result){
        alert(your_var_value);
    }
}); 
```

到以下：

```
<?php

require_once('models/sql.php');
require_once('models/server.php');
require_once('models/journey.php');

class TariffFareController {

    // If there is no fixed fare, use route calc
    if ($fixed_fare_result == null) {

        $distance=$_POST['var_value'];

        if ($distance > 1100) {
            $fare = 222.00;
        }
        else {
            $fare = 111.00;
        }

        //MORE CODE

} 
```

但是当我这样做时，我得到一个`500 Internal Server Error`

我知道我传递给它的 URL 是正确的，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:35:58.723

您缺少一个结束括号，并且您的 if 语句需要在函数中。

# java - 可以假设 Java Concurrent Mark Sweep Garbage Collector 在 Linux 和 Mac 以及 Windows 上同样出色吗？

> ID：15206715
> 
> 赞同：2
> 
> 时间：2013-03-04T16:53:38.953
> 
> 标签：java, garbage-collection, operating-system, jvm, concurrent-mark-sweep

我一直在网上寻找有关使用 Java Concurrent Mark Sweep GC for Linux 和 Mac 或不同版本的 Java 的信息。我对 Oracle Java 1.6 和 1.7 的最新版本特别感兴趣。

我会假设它可以运行，因为我没有发现任何相反的东西，但是与 Windows 相比，包括 OpenJDK 在内的性能有什么明显的差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:59:01.580

这取决于 JVM 实现。**您没有指定**您感兴趣的 JVM**供应商/发行版**。我确信那里有 VM，您可以在其中看到取决于操作系统的性能差异。

但是，一般来说**只要只**关注 GC 算法，在任何平台上**都没有区别**，因为实现 GC 算法的代码是相同的。GC 算法正在访问实现内存分配/释放的低级系统例程的 API。此类 API 的实现取决于操作系统。

# objective-c - 如何在 Objective-C 中通过 JSON 发布 REST

> ID：15206716
> 
> 赞同：0
> 
> 时间：2013-03-04T16:53:42.700
> 
> 标签：objective-c, json, post

我的编程能力并不强，而且似乎面临着非常简单的问题。我不知道如何通过带有 json 的 REST 请求在服务器上发布数据。必须接受的格式是

```
{
    "date": "2012-12-20 12:00:00",
    "address": "asd",
    "name": "asdasdasdasdasd",
    "shipping_date": "2012-12-20 12:00:00",
    "receiver_phone": "123456789",
    "customer_phone": "123456789",
    "total_price": "1234",
    "items": {
        "1": {
            "item_id": "1",
            "quantity": "1",
            "type": "1",
            "color_id": "0"
        }
    }
} 
```

我发现一篇文章[Post data in Objective C using Json](https://stackoverflow.com/questions/9883081/post-data-in-objective-c-using-json)但无法正确格式化我的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:05:02.697

看起来那篇文章正是你想要的，减去了格式化位。[`JSONKit`是一个非常简单易用的](https://github.com/johnezang/JSONKit)类。我觉得它比`NSJSONSerialization`. 但为此，我将缝合`NSJSONSerialization`：

```
// create a dictionary with the structure you want
NSDictionary *dict = @{
    @"date":@"2012-12-20 12:00:00",
    @"address":@"asd",
    @"name":@"asdasdasdasdasd",
    @"shipping_date":@"2012-12-20 12:00:00",
    @"receiver_phone":@"123456789",
    @"customer_phone":@"123456789",
    @"total_price": @"1234",
    @"items": @{
        @"1": @{
            @"item_id": @"1",
            @"quantity": @"1",
            @"type": @"1",
            @"color_id": @"0"
        }
    }
};
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict options:nil error:&error];

if ( error ) {
    // handle accordingly
}
else if ( jsonData != nil ) {
    NSString *jsonRequest = [[NSString alloc] initWithData:jsonData encoding:NSUTF*Encoding];
    // build request like example
} 
```

现在您可以使用示例的其余部分。

**更新**：

我发现`JSONKit`比它强大得多`NSJSONSerialization`并且需要更少的步骤，但`NSJSONSerialization`应该产生相同的结果，并且不需要担心混合 ARC 和非 ARC 代码。

**更新 2**：

我建议`JSONKit`认真看一下，它不那么挑剔（即值可以是 an`NSNumber`而不是`NSString`）。它确实需要`-fno-objc-arc`在构建阶段为`JSONKit.m`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:10:07.990

如果您创建一个字典然后使用 NSJSONSerialization 将其转换为数据会更好。

```
NSDictionary *params = ...

NSError *error;
NSData *postdata = [NSJSONSerialization dataWithJSONObject:params 
                                                   options:0 
                                                     error:&error];
[request setHTTPBody:postData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-23T15:18:51.143

```
- (IBAction)registerclick:(id)sender 
```

{

```
if (_password.text==_repassword.text)
{
    [_errorlbl setHidden:YES];

NSString *requstUrl=[NSString stringWithFormat:@"http://iroidtech.com/fresery/index.php?route=api/fresery/registerCustomer"];

 NSString *postString=[NSString stringWithFormat:@"name=asd&email=sooraj&phonenumber=8111&password=soorajsnr&type=1&facebookid=&image_path="];
   // _name.text,_email.text,_mobile.text,_password.text

NSData *returnData=[[NSData alloc]init];

NSMutableURLRequest *request=[[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:requstUrl]];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%lu", (unsigned long)[postString length]] forHTTPHeaderField:@"Content-length"];
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
resp=[NSJSONSerialization JSONObjectWithData:returnData options:NSJSONReadingMutableContainers error:nil];

    c=[[resp valueForKey:@"status" ]objectAtIndex:0];
    b=[[resp valueForKey:@"message"]objectAtIndex:0]; 
```

# java - 方法paintComponent（图形g）不起作用

> ID：15206722
> 
> 赞同：0
> 
> 时间：2013-03-04T16:53:53.940
> 
> 标签：java, swing, jpanel, paintcomponent, event-dispatch-thread

我正在尝试在 JPanel 上显示 Mandelbrot 集，这是我的代码。我真的不明白为什么在 BufferedImage 上绘制的图像没有显示在我的 JPanel 上。任何人都可以告诉我我的代码中的问题吗？

```
public class MainPanel1 extends JPanel implements Runnable, MouseListener, MouseMotionListener{

BufferedImage image;// = new BufferedImage();
BufferedImage imageToSave; // off screen image for saving image
int number_of_iteration;
int width, height;    // current width and height of the drawing panel
int widthToSave, heightToSave; // off screen width and height for saving image
double real_portion_max, real_portion_min, imagin_portion_max, imagin_portion_min;
boolean dragging;
double zoom = 1, viewX = 0.0, viewY = 0.0;
private int mouseX, mouseY; // mouse position when the button was pressed
private int dragX, dragY; // current mouse position during dragging
Graphics graphics;    
Graphics graphicsToSave; // off screen graphics for saving image    
Thread thread;

public MainPanel1(){      
    this.setPreferredSize(new Dimension(500, 400));
    this.setBorder(BorderFactory.createLineBorder(Color.BLACK));                        
    this.imagin_portion_max = 1.6;
    this.imagin_portion_min = -1.6;
    this.real_portion_max = 2;
    this.real_portion_min = -2;
    this.number_of_iteration = 100;
    this.setDoubleBuffered(true);                                   
    this.thread = null;
    addMouseListener(this);
    addMouseMotionListener(this);
}

@Override
public void run() {
    while (thread != null) {
        while (draw());
        synchronized (this){
            try {
                    wait();
            }catch (InterruptedException exp){

            }
        }
    }
}    

public void start(){
    redraw();
}

private void redraw() {
    if (thread != null && thread.isAlive()) {
        thread.interrupt();
    } else {
        thread = new Thread(this);
        thread.setPriority(Thread.MIN_PRIORITY);
        thread.start();
    }
}

public boolean draw(){
    Dimension size = this.getPreferredSize();
    if(image == null || width != size.width || height != size.height){
        width = size.width;
        height = size.height;
        image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
        graphics = image.getGraphics();
    }

    for (int y = 0; y < height; y++){
        for (int x = 0; x < width; x++){
            double r = zoom / Math.min(width, height);
            double dx = (real_portion_max - real_portion_min) * ( x * r + viewX) + real_portion_min;
            double dy = (imagin_portion_max - imagin_portion_min) * (y * r + viewY) + imagin_portion_min;
            Color color = color(dx, dy);
            graphics.setColor(color);
            graphics.fillRect(x, y, 1, 1);                
        }            
    }                
    repaint();
    return false;
}

public Color color(double x, double y){
    double color_index;
    color_index = computeMaldenbrot(new Complex(0.0, 0.0), new Complex(x, y));
    float h = (float) (color_index/number_of_iteration);
    float b = 1.0f -h*h;           
return Color.getHSBColor((float) (0.1+h), 0.95f, b);
}

public double computeMaldenbrot(Complex number, Complex point){
    int iteration = 0;
    while (iteration < number_of_iteration && number.modulusSquared() < 4){
        number = number.square().add(point);
        iteration++;
    }
    return iteration;
}

@Override
public void paintComponent(Graphics g){        
    //super.paint(g);                
    g.drawImage(image, 0, 0, this);
    if (dragging) {//Draw dragging rectangular                    
        g.setColor(Color.green);
        g.setXORMode(Color.white);
        int x = Math.min(mouseX, dragX);
        int y = Math.min(mouseY, dragY);
        double w = mouseX + dragX - 2 * x;
        double h = mouseY + dragY - 2 * y;
        double r = Math.max(w / width, h / height);//make sure this rectangular self-similar to screen
        g.drawRect(x, y, (int) (width * r), (int) (height * r));
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:06:03.717

在`paintComponent()`方法中，您应该编写的第一行是：顺便说一下，当您在方法
`super.paintComponent(g);`
中的第一次迭代方法被返回时，您的线程会因为. 而且你无处可打电话。 正如@mKorbel 所建议的那样，在处理 Swing 组件时不要使用use **[javax.swing.Timer 。](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)**除此之外，**[javax.swing.SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)**也是执行长时间运行的复杂任务的一个选项。观看此**[官方教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)**以了解如何使用API。这里是API **[。](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)**`run()``draw()``wait``notify()`
`Thread``javax.swing.SwingWorker``javax.swing.Timer`

# r - 如何使用其中一列中的值过滤/子集 data.frame

> ID：15206728
> 
> 赞同：8
> 
> 时间：2013-03-04T16:54:18.173
> 
> 标签：r, dataframe

如何根据单列中的值“截断”data.frame？例如，如果我有这个矩阵

```
x <- c(5,1,3,2,4)
y <- c(1,5,3,4,2)
data <- data.frame(x,y) 
```

我想要所有大于或等于 x 的值的数据，我该怎么做？我知道我可以使用

```
addresses <- which(x>=2) 
```

但我不确定如何使用它来制作新矩阵。以下不起作用：

```
data2 <- data[x>=2]
data2 <- data[which(x>=2)] 
```

如果有人可以提供任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T16:57:30.577

您没有足够仔细地阅读错误消息。在这里，我们的错误消息告诉您您没有选择任何列。您已经指定了行的条件......

```
> data[which(x>=2)]
Error in `[.data.frame`(data, which(x >= 2)) : undefined columns selected 
```

由于您要返回所有列，只需在其中输入一个逗号（表示您希望返回所有列），您应该一切就绪。

```
> data[which(x>=2), ] # if x is in your workspace
  x y
1 5 1
3 3 3
4 2 4
5 4 2
> ## with(data, data[x >= 2, ] # if x is not in your workspace 
```

* * *

这里还有一点需要注意：你可以`data.frame`直接这样：

```
data <- data.frame(x = c(5,1,3,2,4), y = c(1,5,3,4,2)) 
```

这就是我建议这样做的原因。首先，您的工作区中没有不必要的对象。其次，你不会被愚弄，以为某事在正常工作，而实际上它不是。您写道：“*我知道我可以使用`addresses <- which(x>=2)`*”找到 x 值的地址。没错，但您可能没有意识到（因此这个问题）是您实际上并没有从您`data.frame`的工作空间中访问“x”，而是访问“x”向量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-04T16:57:40.000

首先，`data`不是矩阵，而是数据框。而且，您要做的是按行索引您的数据帧。这可以通过在`[`运算符的第一部分中指定条件来完成。像这样的东西：

```
data2 <- data[data$x>=2,] 
```

Note that you have nothing between the comma and the closing bracket, because this is the place for column indexing. And here nothing means "select all columns".

# javascript - 不能创建两个值的总和（2+2 不是*t 4 而是 22）？

> ID：15206729
> 
> 赞同：0
> 
> 时间：2013-03-04T16:54:23.333
> 
> 标签：javascript, jquery

抱歉，如果这是一个菜鸟问题，但是，我是菜鸟。我想将几个文本字段的值的总和放入另一个文本字段。我的代码如下所示：

```
$('.button').mouseup(function()  {
    var sum = $("#field1").val()+$("#field2").val();
    $("#result").val(sum);
}); 
```

当我单击按钮时，3+3 的总和不是 6，而是 33。它只是将所有数字添加到文本字段中。如果我将“+”更改为“*”，它可以工作，3*3 是 9。有人可以告诉我我做错了什么。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:57:33.517

`.val()`检索一个字符串，并添加字符串将它们连接起来。

首先使用[`parseInt(str,10)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)值将它们转换为以 10 为底的整数：

```
var sum = parseInt($("#field1").val(),10)+parseInt($("#field2").val(),10); 
```

如果您正在处理非整数值，请[`parseFloat()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:57:39.553

问题是 javascript 将`+`运算符解释为字符串连接操作而不是加法。这样做是因为 的左侧和右侧`+`都是字符串值。要获得加法，您需要将它们强制转换为`int`值

```
var left = parseInt($("#field1").val());
var right = parseInt($("#field2").val());
var sum = left + right; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:57:50.740

`.val()`返回一个字符串，而不是一个数字。你需要包裹`parseInt(...val(), 10);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:57:32.977

`$("#field1").val()`除非另有转换，否则您正在使用的值（即）是字符串。

该`+`运算符在应用于字符串时是一个连接运算符。

在添加之前使用`Number()`then 周围的函数转换为数字：

```
var sum = Number($("#field1").val())+Number($("#field2").val()); 
```

在`*`运算符的情况下，我怀疑这会自动转换为数字，或者因为`*`字符串上的运算符设置为自动执行此操作（因为`*`两个字符串没有逻辑意义），或者因为您的字符串被识别为数字，以便`*`操作符能够被应用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T16:58:39.337

运算符在用于字符串时，将`+`字符串连接起来，而不是像`*`运算符那样尝试将它们强制转换为数字。您可以使用`parseInt()`获取整数而不是字符串。

```
$('.button').mouseup(function()  {
    var sum = parseInt($("#field1").val()) + parseInt($("#field2").val());
    $("#result").val(sum);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T16:59:20.970

尝试使用`parseInt()`调用来处理数字的拉取值。

`parseInt($('#field1').val())`例如。

# android - 事后获取 LogCat

> ID：15206733
> 
> 赞同：-2
> 
> 时间：2013-03-04T16:54:40.010
> 
> 标签：android, debugging, logcat

所以我认为我与任何其他业余程序员没有什么不同：我喜欢使用自己的应用程序。在编码和调试时，很容易观察异常流并对其进行调试，但是**当你在野外发现一个崩溃案例时你会怎么做：当你不在你的工具附近时？**

更多上下文：

我的小应用程序今天在工作会议中崩溃了。我*大概*知道是什么原因造成的，但我担心当我回家在受控环境中进行测试时，我将无法重现它。哎呀，我对导致它的原因的倾向可能一开始就离题了。*我觉得我需要我的 LogCat，但至少*要再过 8 小时才能使用它。

有没有办法检索崩溃数据？是否有可靠的模式或功能可以出于此调试目的放入我的代码中？

我不想以这样一种方式编写我的程序，即用户在我的代码失败的边缘情况下受到堆栈跟踪数据的阻碍，但如果我没有插入 Eclipse 或我绝对不希望我的错误消失除此以外。

建议？指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:59:29.813

这是我的建议...

1.  覆盖应用程序类（在您的应用程序中）
2.  设置 UncaughtExceptionHandler (-> 应用程序类)
3.  出现任何“未捕获异常”时，您可以将其转储到预定义的文件中（在应用程序目录下）或通过电子邮件将其发送到某个地址（您可以将其烘焙到您的应用程序中。）

这样，您就可以保存/跟踪任何意外的崩溃。

希望这可以帮助。

# javascript - 如何在 Drupal7 页面中使用 jQuery 计算向左/向右滚动的像素？

> ID：15206741
> 
> 赞同：0
> 
> 时间：2013-03-04T16:54:56.157
> 
> 标签：javascript, jquery, drupal-7, scroll, scrolltop

和

```
$(window).scroll(function () {
    console.log($(this).scrollTop());

}); 
```

您可以计算向上或向下滚动的像素。但是我怎么能计算从左到右的滚动呢？

我可以想象观看隐藏的固定元素的偏移量，但没有像上面那样的另一种方式吗？

编辑：问题是当使用 Drupal 时，你需要将你的 jquery 封装在里面

```
jQuery(function($) {... 
```

我尝试了[在这里找到](http://www.bennadel.com/blog/1838-Wrapping-The-Window-Object-In-A-jQuery-Wrapper.htm)的解决方案，我将窗口对象的范围限定为

```
var thisWindow = window; 
```

在 jQuery-capsule 之外，但它使我的网站崩溃并且无法正常工作。

EDIT2：好的 - 可能还需要注意 #main-DIV 设置为 'overflow-y: hidden;' 其子 .region.content-DIV 设置为 'overflow-x: scroll;'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:57:43.247

我发现我需要直接与滚动差异对话。听起来逻辑...

```
$('#main .region-content').scroll(function() {
    console.log($('#a-special-div-id').offset().left);
}); 
```

成功了。足够的解决方法。thnx 的推动！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:05:58.037

您可以使用该`scrollLeft()`功能。[jQuery 文档](http://api.jquery.com/scrollLeft/)

# php - 从 Mysql 数据库中获取信息

> ID：15206744
> 
> 赞同：0
> 
> 时间：2013-03-04T16:55:00.360
> 
> 标签：php, mysql

我有一个数据库，其中包含数千个邮政编码，第二列显示一个级别（在红色、蓝色和黄色之间）。我已经成功添加了数据库并且可以连接到它，但是返回的信息只显示了数据库的第一行。

我的表格很基本：-

```
<body>
<form method="post" action="database.php">
  Postcode
  : 
  <input name="postcode" type="text" id="postcode" size="30"><?php echo $postcode ?>
  <br>
<br>
<br>
<input type="Submit" value="Submit">
</form>

</body> 
```

到目前为止，我的 php 代码是：-

```
<?php 
$con = mysql_connect("localhost","###","###"); 
if (!$con) { 
die('Could not connect: ' . mysql_error()); 
} 

mysql_select_db("###", $con); 

$result = mysql_query("SELECT * FROM `TABLE 1` LIMIT 0, 33546 ") 
or die(mysql_error());  

$row = mysql_fetch_array( $result );
// Print out the contents of the entry 

echo "Postcode: ".$row['postcode'];
echo "Level: ".$row['level'];
echo "Floodlevel: ".$row['floodlevel'];

if (!mysql_query($sql,$con)) { 
die('Error: ' . mysql_error()); 
} 
?> 
```

我正在寻找输入邮政编码，如果邮政编码在数据库中，则级别与邮政编码一起显示。如果数据库中没有邮政编码，则回显一条消息，指出未列出邮政编码。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:02:51.283

您要返回一行，您需要遍历结果并全部显示。

```
while($row = mysql_fetch_array($result)){
    echo "Postcode: ".$row['postcode'];
    echo "Level: ".$row['level'];
    echo "Floodlevel: ".$row['floodlevel'];
} 
```

此外，不推荐使用 mysql* 函数。[使用PHP 文档](http://php.net/mysql_query)中描述的 mysqli 或 PDO

* * *

如果用户邮政编码存在，则显示一条消息：

```
$postcode = "E9 7TR";
$result = mysql_query("SELECT * FROM `TABLE 1` WHERE postcode='$postcode' ") 
or die(mysql_error());  

$row = mysql_fetch_array( $result );
if(mysql_num_rows($row) >= 1) // display success message
else // display not found 
```

同样，这是使用不再推荐的旧样式 mysql* 查询，最好使用 PDO 样式语句。

# php - 如果 = 则匹配 2 个 sql 列，然后将不同的列更新 1

> ID：15206746
> 
> 赞同：3
> 
> 时间：2013-03-04T16:55:08.753
> 
> 标签：php, mysql

我想看看某人在一个表中提交的内容是否与数据库中的另一个表相匹配。我不太清楚如何设置它。我想要的是

```
 IF tableA column A = tableB column B then table A column C = Column C + 1\. 
```

我已经尝试过更新方法，但这似乎对我不起作用。任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:00:43.030

一般会是这样的：

```
UPDATE TABLE_A a JOIN TABLE_B b 
  ON a.join_col = b.join_col AND a.column_a = b.column_b
SET a.column_c = a.column_c + 1 
```

该`join_col`值可能是 user_id ，因此您只更新*同一用户*`TABLE_A`在中具有相同值的行。*`TABLE_B`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:59:57.787

我想你可以在mysql中做到这一点：

```
UPDATE TableA a, TableB b 
SET a.ColumnC = ColumnC + 1 
WHERE a.ColumnA = b.ColumnB; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T17:03:54.607

如果这是你想要的

```
update tableA set colA=(select (case when b.colB=colA then colC+1 else colC end) from tableB b) 
```*

# vb.net - 关于使用 System.DirectoryServices.AccountManagement 创建新用户的上下文选项的异常

> ID：15206747
> 
> 赞同：0
> 
> 时间：2013-03-04T16:55:10.637
> 
> 标签：vb.net, active-directory, directoryservices, account-management

我需要使用随机生成的密码在 AD 中创建新用户，该密码必须在首次登录时重置。我可以使用 DirectoryEntry 毫无问题地连接，但我想使用 System.DirectoryServices.AccountManagement。尝试通过 SSL 连接到服务器时，出现以下异常：

传递的 ContextOptions 对于此存储类型无效。必须指定 Negotiate 或 SimpleBind，并且它们不能组合。

使用 ContextOptions.SecureSocketLayer。

尝试设置用户密码时，Negotiate 和 SimpleBind 都会抛出异常，因为我必须通过 SSL 连接。

由于我可以通过 SSL 与 DirectoryServices 连接，因此我认为代码不是问题，但会发布任何可能有用的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T19:33:19.833

原来这是一个安全问题，代码或站点设置没有问题。

# asp.net - ASP.NET 页面和 Web 服务之间的 wcf wsDualHttpBinding 安全问题

> ID：15206752
> 
> 赞同：3
> 
> 时间：2013-03-04T16:55:27.817
> 
> 标签：asp.net, winforms, wcf, security

我完全被困住了。

我在一台机器上获得了网络服务。Web 服务有两个“服务”（或绑定？）一个普通的“basicHttpBinding”和一个“wsDualHttpBinding”。我只是添加了“wsDualHttpBinding”，因为我需要从 ASP.NET Web 表单发送的消息（布尔值）发送到我的 Winforms 应用程序。我只有一个使用网页的用户，但最多有 10 个 winforms 用户。

由于我正在重现生产环境，所以我被卡住了：网页无法连接到“wsDualHttpBinding”网络服务。我尝试了许多帮助页面，许多教程，但它不起作用。

事实上，我认为我的问题是我不明白为什么它需要任何类型的安全性......

我尝试使用不同的“clientCredentialType”，但它们都失败了。

更清洁的 TOPO：

1.  客户端 A：安装在服务器 AA 上的 ASP.NET 4.0 网络表单。当用户单击一个按钮时，它会向 Web 服务 2 发送一个布尔值，并传播到客户端 B。
2.  Web 服务 1：安装在服务器 BB 上。普通的 basicHttpBinding 用于获取和更新数据。
3.  Web 服务 2：在相同的项目中，然后是 Web 服务，在服务器 BB 1 上。这是一个“wsDualHttpBinding”用于在客户端 A 和多个客户端 B 之间（以及不同客户端 B 之间）发送消息。
    1.  客户端 B：ASP.NET winform。安装在多台计算机（XP 和七）上。在这种情况下，我们使用它来查看从客户端 A 发送的消息。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:48:21.473

您需要在服务器端配置文件中指定相同的绑定详细信息，

你已经这样做了吗？

请参考原始来源[链接](http://msdn.microsoft.com/en-us/library/system.servicemodel.wsdualhttpbinding.aspx)

我希望这可能会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:06:19.253

如果没有更具体的细节，例如错误消息，就很难提供帮助。我建议您将以下内容添加到所有应用程序的配置文件中，如[http://msdn.microsoft.com/en-us/library/ms733025.aspx中所述](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

```
<configuration>
   <system.diagnostics>
      <sources>
            <source name="System.ServiceModel" 
                    switchValue="Information, ActivityTracing"
                    propagateActivity="true">
            <listeners>
               <add name="traceListener" 
                   type="System.Diagnostics.XmlWriterTraceListener" 
                   initializeData= "c:\log\Traces.svclog" />
            </listeners>
         </source>
      </sources>
   </system.diagnostics>
</configuration> 
```

然后，这将为您提供大量有关正在发生的事情的跟踪数据。我发现这在诊断 WCF 问题时非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:25:38.387

这可能对您有所帮助，请尝试以下链接：-

***[http://dotnettechnicalquestion.wordpress.com/interview-questions/net/web-service-and-wcf/](http://dotnettechnicalquestion.wordpress.com/interview-questions/net/web-service-and-wcf/)***

***[http://www.codeproject.com/Articles/7062/An-introduction-to-Web-Service-Security-using-WSE](http://www.codeproject.com/Articles/7062/An-introduction-to-Web-Service-Security-using-WSE)***

***[http://geekswithblogs.net/nestor/archive/2007/03/06/108042.aspx](http://geekswithblogs.net/nestor/archive/2007/03/06/108042.aspx)***

# javascript - 在顺序 javascript 数组中查找范围的最有效方法

> ID：15206753
> 
> 赞同：1
> 
> 时间：2013-03-04T16:55:29.363
> 
> 标签：javascript

我有一系列顺序时间戳。我需要获取介于开始时间和结束时间之间的数组子集。一个简化的示例如下所示：

```
timestamps = [ 5,7,12,13,15,23 ];
startTime  = 6;
endTime    = 18; 
```

给定上面的例子，找到介于`startTime`和之间的第一个和最后一个时间戳的索引的最有效方法是`endTime`什么？

正确的脚本会发现并返回索引 1 和 4 ( `timestamps[1], timestamps[4]`)

我可以遍历数组并进行比较，但有没有更有效的方法？

* * *

## **编辑 :: 我的解决方案 - 二进制搜索：**

**（咖啡稿）**

```
 # Search ordered array for timestamps falling between 'start' & 'end'
 getRangeBorderIndexes = (stack, start, end) ->
  ar    = []
  ar[0] = getBorder( stack, start, "left" )
  ar[1] = getBorder( stack, end, "right"  )
  return ar

# Use bisection (binary search) to find leftmost or rightmost border indexes
getBorder = (stack, value, side ) ->
  mod1       = if side == "left"  then 0 else -1 
  mod2       = if side == "left"  then 1 else  0

  startIndex = 0
  stopIndex  = stack.length - 1
  middle     = Math.floor( (stopIndex+startIndex)/2 )

  while stack[middle] != value && startIndex < stopIndex
    if value < stack[middle]
      if value > stack[middle - 1] then return middle + mod1
      stopIndex = middle - 1

    else if value > stack[middle]
      if value < stack[middle + 1] then return middle + mod2
      startIndex = middle + 1

    middle = Math.floor( (stopIndex+startIndex)/2 )

  return if stack[middle] != value then -1 else middle

timestamps = [ 5,7,12,13,15,23 ]
startTime  = 6
endTime    = 18

getRangeBorderIndexes( timestamps, startTime, endTime) # returns [1,5] 
```

@kennebec 和 @Shanimal 给出了很好的回应，特别是如果您想要一种超级简单的方法来获取数组的子集。但是我需要子数组的索引而不是整个子数组。我做了一些测试，上面的示例始终需要大约 7 毫秒才能找到子数组的边界，即使在具有 1000 万个条目的数组上也是如此！

感谢@voithos 为我指明了正确的方向。我还修改[了这段代码](http://www.nczonline.net/blog/2009/09/01/computer-science-in-javascript-binary-search/)来创建上面的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:02:51.393

使用 lodash / underscore 库：

```
_.select(timestamps,function(i){
    return i>=startTime && i<=endTime;
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:11:08.160

循环是有效的，但 Array.filter 更容易 -

```
var timestamps = [ 5,7,12,13,15,23 ],

startTime  = 6,
endTime    = 18;

var selected=timestamps.filter(function(itm){
return itm>=startTime   && itm<=endTime;
}); 
```

/* 返回值：（数组）7,12,13,15 */

// 大多数浏览器都内置了过滤器，但如果你需要在#9 之前支持 IE，你可以填充它：

```
if(!Array.prototype.filter){
    Array.prototype.filter= function(fun, scope){
        var T= this, A= [], i= 0, itm, L= T.length;
        if(typeof fun== 'function'){
            while(i<L){
                if(i in T){
                    itm= T[i];
                    if(fun.call(scope, itm, i, T)) A[A.length]= itm;
                }
                ++i;
            }
        }
        return A;
    }
} 
```

# sql-server - 多对多关系中引用的重复记录

> ID：15206754
> 
> 赞同：0
> 
> 时间：2013-03-04T16:55:30.433
> 
> 标签：sql-server, sql-server-2008, tsql, duplicates

我目前正在编写一个存储过程，它创建一个现有对象的精确副本。该对象使用多个表，其中 2 个表使用多对多关系：

这是使用的架构：

```
---------------------------------------
          tbl_AssociationA
---------------------------------------
ID  |  ObjectID |    Description
---------------------------------------
1   |  12       |    'Some description'
2   |  12       |    'Some text here'
3   |  13       |    'Some words here'
               ...
---------------------------------------

---------------------------------------
          tbl_AssociationB
---------------------------------------
ID  |  ObjectID |    LabelText
---------------------------------------
1   |  12       |    'Foo'
2   |  12       |    'Foo foo'
3   |  13       |    'Some words...'
4   |  13       |    'Some other Foos'
5   |  14       |    'Some foos here'
6   |  12       |    'Some other words'
               ...
---------------------------------------

-------------------------
    tbl_RelationAB
-------------------------
ID_A      |  ID_B
-------------------------
1         |  1     
2         |  1    
2         |  2     
2         |  6     
3         |  4      
3         |  3      
          ...
------------------------ 
```

现在，假设我想创建一个`Object 12`（我们称之为`Object X`）的副本。我想从`tbl_AssociationA`和复制记录`tbl_AssociationB`，因为我不想对修改进行进一步`Object X`修改`Object 12`。

`tbl_AssociationA`所以，要在and中创建新记录`tbl_AssociationB`，我会使用这个：

```
INSERT INTO tbl_AssociationA
SELECT @NewId,Description FROM tbl_AssociationA WHERE ObjectID=@NewId;

INSERT INTO tbl_AssociationB
SELECT @NewId,LabelText FROM tbl_AssociationB WHERE ObjectID=@NewId; 
```

如何插入`tbl_RelationAB`使用那些新创建的记录。请注意，和中的列`ID`是。`tbl_AssociationA``tbl_AssociationB``IDENTITY`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:12:21.703

我正在重用同一张表并且没有插入。
但这显示了如何检索这两个标识并在语句中使用它们。

```
 set nocount on;
  declare @idenA SmallInt, @idenB SmallInt; 
  insert into Table_1(value) values('a');
  set @idenA = scope_identity();
  insert into Table_1(value) values('b');
  set @idenB = scope_identity();
  print @idenA;
  print @idenB;

  insert into Table_1 (value)
  OUTPUT inserted.* 
  select top 2 value from Table_1 
```

但我知道这不是您问题的完整答案。
我认为您将需要输出到临时表。
一旦你得到更好的答案，我会删除这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:55:47.613

好的，所以交易是：

> 我想将 Object X 复制到 Object Z。 Object X 被引用`tbl_AssociationA`并`tblAssociationB`带有外键`ObjectID`。第三个表 ,指定和`tbl_RelationAB`之间的多对多映射。`tbl_AssociationA.ID``tbl_AssociationB.ID`

在此解决方案中，对象 X 被引用，`@originalObjectID`对象 Z被引用`@copiedObjectID`。2 个临时表`@TempA`和`@TempB`用于保持 和 的新旧自动生成`ID`列`tbl_AssociationA`之间的映射`tbl_AssociationB`。

```
DECLARE @TempA AS TABLE (newID INT, oldID INT);
DECLARE @TempB AS TABLE (newID INT, oldID INT);

MERGE tbl_AssociationA AS tbl_a
USING (
    SELECT ID, ObjectID, Description
    FROM tbl_AssociationA WHERE ObjectID=@originalObjectID
) as old_tbl_a
ON 1=0
WHEN NOT MATCHED BY TARGET THEN 
    INSERT (ObjectID,Description) VALUES (@copiedObjectID,Description)
    OUTPUT INSERTED.ID,old_tbl_a.ID INTO @TempA;

MERGE tbl_AssociationB AS tbl_b
USING (
    SELECT ID, ObjectID, LabelText
    FROM tbl_AssociationB WHERE ObjectID=@originalObjectID
) as old_tbl_b
ON 1=0
WHEN NOT MATCHED BY TARGET THEN 
    INSERT (ObjectID,LabelText) VALUES (@copiedObjectID,LabelText)
    OUTPUT INSERTED.ID,old_tbl_b.ID INTO @TempB;

INSERT INTO tbl_RelationAB
SELECT a.newID,b.newID
FROM tbl_RelationAB tbl_ab
INNER JOIN @TempA a ON tbl_ab.ID_A = a.oldID
INNER JOIN @TempB b ON tbl_ab.ID_B = b.oldID; 
```

所以 table也会被复制新的自动生成的和`tbl_RelationAB`之间的关系。希望这可以帮助将来的人！`tbl_AssociationA.ID``tbl_AssociationB.ID`

# .htaccess - 使用 .htaccess 重定向时重复出现的 URL

> ID：15206759
> 
> 赞同：1
> 
> 时间：2013-03-04T16:55:46.573
> 
> 标签：.htaccess, redirect, http-status-code-302

我正在尝试在我的 .htaccess 文件中添加一条规则，以便如果我要更改我的网站，它会在用户尝试访问我的网站时将其重定向到“正在建设中”页面。

我在用着：

```
# SITE UNDER CONSTRUCTION REDIRECT
Redirect 302 / http://redsquirrelsoftware.co.uk/construction.html 
```

但这随后将我发送到[http://redsquirrelsoftware.co.uk/construction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.html](http://redsquirrelsoftware.co.uk/construction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.htmlconstruction.html)我显然得到了 404 错误。

如何停止网址上的递归尾部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:08:07.320

`Redirect`是一个`mod_alias`不能与指令混合的`mod_rewrite`指令，所以为了防止循环，你应该只使用这样的 mod_rewrite 指令：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !construction\.html   [NC]
RewriteCond %{REQUEST_URI} !folder_to_exclude    [NC]
RewriteRule .*           /construction.html      [R=301,L] 
```

这个答案假设`/construction.html`页面在同一个域中。如果不是，请替换：

```
RewriteRule .*             /construction.html         [R=301,L] 
```

和

```
RewriteRule .*   http://new_domain/construction.html  [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:59:19.673

尝试使用前提条件：

```
RewriteCond %{REQUEST_URI} !^/construction.html
Redirect 302 / http://redsquirrelsoftware.co.uk/construction.html 
```

# ruby-on-rails - 如何在没有语言环境文件的情况下让 I18n 属性与 Ransack 一起使用？

> ID：15206762
> 
> 赞同：2
> 
> 时间：2013-03-04T16:56:01.193
> 
> 标签：ruby-on-rails, internationalization, ruby-on-rails-3.2, ransack

我正在使用带有 Ransack 0.7 的 Rails 3.2 来搜索我的数据库，但在我的模型属性的显示名称方面遇到了问题。我在视图中的属性字段在标准条件字段中调用：

```
<%= f.attribute_fields do |a| %>
  <%= a.attribute_select( {}, { :class =>"formee-small" } ) %>
<% end %> 
```

在模型中，我的属性字段由以下定义：

```
UNRANSACKABLE_ATTRIBUTES = ["id"]

def self.ransackable_attributes auth_object = nil
  (column_names - UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
end 
```

现在假设我有一个名为“用户名”的属性，在我看来它将显示为“用户名”。现在，如果我想翻译它，我需​​要将翻译放在我的标准语言环境文件中，对于我的网站的英语版本和 de.yml 将是 en.yml 和德文版本。

**现在问题来了：**

只要我知道我的模型及其属性，此解决方案就可以正常工作。但是我有一个非常复杂的应用程序，它允许用户创建自己的 MVC（模型、视图和控制器）并使用他自己的翻译。在每种情况下，这都可以正常工作，除了在 Ransack 搜索表单中为用户创建的 MVC 显示的名称。

**因此，可能的解决方案是：**

1) 每次用户创建新的 MVC 以及每次更改属性的翻译之一时，我都会找到一种方法来更新我的语言环境文件。

2) 我绕过语言环境文件并直接告诉 Ransack 或 Rails 我的属性的正确名称。

无论哪种方式，我都没有找到任何方法来做到这一点，所以如果有人有解决方案，我将不胜感激。也欢迎其他解决方案。

感谢问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:58:46.043

如果有人想知道，我将 translate.rb 文件从 ransack 更改为

```
lib/ransack/translate.rb 
```

并更换了正常的

```
t("translation key") 
```

和

```
I18n.t("translation key") 
```

现在我可以从我的数据库中读取属性，如果它们具有以下键：

```
ransack.attributes.NAME_OF_THE_ATTRIBUTE 
```

也许不是最好的方法，但它对我来说很好！

# c# - Asp.net 中的析构函数

> ID：15206766
> 
> 赞同：4
> 
> 时间：2013-03-04T16:56:23.700
> 
> 标签：c#, asp.net, vb.net

当我们转到另一个页面时运行的事件是什么。是卸载吗？

```
Protected Sub Edit_Unload(sender As Object, e As EventArgs) Handles Me.Unload

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:59:20.690

`Unload`发生在请求的末尾^*。它与导航到其他页面没有任何关系。页面在单个请求的整个过程中“加载”和“卸载”；它出现的唯一原因是 Web 表单的东西在幕后发挥的魔力。

如果您想查看这是新加载还是回发，Page 类有一个`IsPostBack`属性，当页面中的某些内容触发对同一页面的回发时，该属性为真。如果它是假的，那么这是一个新的请求，应该得到适当的处理。

除此之外，除了跟踪会话中访问的最后一页之外，我不知道有什么方法可以判断某人何时专门转到*另一个*页面（而不是仅仅刷新当前页面）。

^(*（它被定义为页面生命周期中的最后一个事件，但如果请求因任何原因提前终止，则可能不会触发。重定向和传输是主要示例。）)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:58:50.380

`Unload`是[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)中的最后一个事件。

从[文档](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)：

> 为每个控件引发，然后为页面引发。在控件中，使用此事件对特定控件进行最终清理，例如关闭特定于控件的数据库连接。对于页面本身，使用此事件来完成最后的清理工作，例如关闭打开的文件和数据库连接，或者完成日志记录或其他特定于请求的任务。

但是，当重定向到另一个页面时，可能不会调用此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:59:34.483

此链接可能对您有用：[页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)。尽管您不能依赖正在运行的事件，但这是一个很好的指南，可以显示它们运行的​​顺序（和时间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:48:29.970

如果您希望在页面离开时捕获事件，您可以使用 javascript 调用服务器方法。尽管这可行，但您似乎无法在服务器代码中停止该进程。查看我开始的最后一个线程：

[防止页面被重定向](https://stackoverflow.com/questions/15205548/preventing-page-from-being-redirected)

在其中，我确实发布了一个示例，说明如何使用 javascript 检测页面即将离开并在此之前调用服务器方法。

# magento - 域更改后 Magento 存储空白屏幕

> ID：15206767
> 
> 赞同：1
> 
> 时间：2013-03-04T16:56:28.437
> 
> 标签：magento, dns, screen, switch-statement

在尝试*更改 Magento 商店*（版本 1.4.1.1）的域后，我在前端看到一个空白屏幕。站点没有移动，只是域更改。

在后端（管理面板）上，它确实允许我登录，但是，一旦进入面板，我得到的只是带有菜单选项和页脚的上部标题。但是，即使在单击管理选项加载后。内容区域是完全空白的。

到目前为止还没有错误报告，在经历了几个论坛之后，这些都是我解决问题的不成功尝试：

**1.** ...检查了数据库连接的local.xml文件。

**2.** ...在数据库中，在 core_config_data 下，我已经指出了安全和不安全的新域

**3.** ...增加 htaccess 中的内存大小

**4.** ...我在 .htaccess 中启用了 php 错误日志记录，如下所示：

```
    php_flag log_errors on
    php_value error_log /home/path/public_html/domain/PHP_errors.log

```

错误输出是 500 Internal Server Error

**5.** ..在 index.php 我改变了这一行

```
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ？$_SERVER['MAGE_RUN_CODE'] : '';

```

对这个

```
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ？$_SERVER['MAGE_RUN_CODE'] : '1';

```

这也没有做任何事情。

**6\. ...从***var/tmp*和*var/session*清除 var 下的缓存。

**任何可能导致此问题的帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:19:18.977

您将需要在数据库中更新您的商店域名。

看表：

```
core_config_data 
```

您应该查找带有路径的行：

```
path = web/unsecure/base_url
path = web/secure/base_url 
```

将它们更新为新域名，然后刷新您的 Magento 缓存，您可以清空 /var/cache 和 /var/session 目录。

请记住在您的 URL 上包含一个培训斜线：

```
http://www.newdomain.com/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-02T22:18:31.330

**强文本**

首先打开位于以下路径的“Validator.php”文件。供应商\magento\framework\View\Element\Template\File\Validator.php

找到函数：

```
protected function isPathInDirectories($path, $directories) 
```

现在在这个函数里面找到这行代码。

```
$realPath = $this->fileDriver->getRealPath($path); 
```

并用下面的代码替换这行代码。

```
$realPath = str_replace('\\', '/', $this->fileDriver->getRealPath($path)); 
```

现在使用命令编译你的 Magento：

```
php bin/magento setup:upgrade
php bin/magento setup:static-content:deploy -f
php bin/magento indexer:reindex
php bin/magento cache:flush 
```

# php - joomla 表单标记

> ID：15206768
> 
> 赞同：1
> 
> 时间：2013-03-04T16:56:29.693
> 
> 标签：php, joomla

我正在处理 Joomla 个人资料编辑表单。我想做的是更改使用的标记，主要是添加 CSS 类。基本上很简单的东西。问题是，表单字段由 Joomla 处理并在这样的循环中给出：

```
<?php foreach($this->form->getFieldsets() as $fieldset):?>
  <?php $fields = $this->form->getFieldset($fieldset->name);?>
  <?php foreach($fields as $field):?>
    <?php echo $field->label; ?>
    <?php echo $field->input;?>
  <?php endforeach;?>
<?php endforeach;?> 
```

扩展可能会将自己的字段添加到循环中，因此无法对默认输入进行硬编码。例如，我不知道如何将类添加到输入的标签中。要更改输入属性，我尝试过使用`JForm::setFieldAttribute`，但从覆盖中使用时似乎没有任何效果。有没有人有任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:59:50.267

配置文件插件的元素在文件中定义`profiles/profile.xml`。要将类添加到输入 - 您可以执行以下两项操作之一。首先编辑xml文件。大多数表单字段都接受一个类，例如在默认配置文件插件中

```
 <field
            name="address1"
            type="text"
            id="address1"
            description="PLG_USER_PROFILE_FIELD_ADDRESS1_DESC"
            filter="string"
            label="PLG_USER_PROFILE_FIELD_ADDRESS1_LABEL"
            message="PLG_USER_PROFILE_FIELD_ADDRESS1_MESSAGE"
            size="30"
            class="custom_class"
        /> 
```

你可以看到我刚刚在最后添加了类。请注意，您还可以包含没有循环的表单字段。有关此示例，请参阅 weblinks 组件（表单视图）。他们这样做：

```
 <div class="formelm">
            <?php echo $this->form->getLabel('address1'); ?>
            <?php echo $this->form->getInput('address1'); ?>
        </div> 
```

因此，您可以看到`address1`xml 文件中定义的字段名称 - 这只是回显了相关数据。这也是一种完全可以接受的添加类的方式。希望这可以帮助。

# android-emulator - 在 Android 上使用 GPX 进行路线模拟

> ID：15206769
> 
> 赞同：12
> 
> 时间：2013-03-04T16:56:33.050
> 
> 标签：android-emulator, android-location

我以前问过这个问题，但仍然没有解决方案。这就是我要找的东西。我正在开发 Android 上的 GPS 导航应用程序。为此，我希望能够在地图上模拟驾驶。我读到我可以使用 GPX 文件和 Android 模拟器来实现它。所以我在模拟器中添加了 GPS 支持并启动了它。然后我使用两个不同的站点创建了一个 GPX 文件：

1.  wtracks.appspot.com：我使用它创建的 gpx 文件，在将其加载到 DDMS 后，没有任何反应。也就是说，我什至没有看到正在加载的文件，所以播放按钮是灰色的

2.  Mapmyride.com：我使用它创建的 GPX 文件确实会加载到 DDMS 中，并在模拟器窗口的点数中显示 835 个点。绿色播放按钮已启用，但当我选择它时，它会显示暂停按钮一秒钟，然后返回绿色播放按钮。也就是说，它几乎就像文件运行了一秒钟然后停止。

所以真的，我想要的是，如果有人可以通过一些简单的方法（例如单击地图）向我展示能够创建 GPX 文件的确切步骤，然后一旦我有一个有效的 GPX 文件，就能够在 DDMS 中加载它并运行它来模拟地图上的汽车驾驶。如果有效，我将立即接受答案。

谢谢，

-维维克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-11T08:07:09.220

为了模拟在 gpx 文件中驾驶您的跟踪点和航点，您需要手动将时间参数添加到每个文件中。每个时间参数应逐秒增加。

这是一个 gpx 文件示例：（注意：如果您的 gpx 文件不兼容，请使用前三行）

GPX 文件示例：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<gpx xmlns="http://www.topografix.com/GPX/1/1" creator="MapSource 6.16.1" version="1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-

instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">

<trk>
<name>emulate</name>
<trkseg>
<trkpt lat="-33.91015" lon="151.16772"><ele>0.000000</ele><time>2014-03-05T20:00:01Z</time></trkpt>
<trkpt lat="-33.91014" lon="151.16770"><ele>0.000000</ele><time>2014-03-05T20:00:02Z</time></trkpt>
<trkpt lat="-33.90998" lon="151.16752"><ele>0.000000</ele><time>2014-03-05T20:00:03Z</time></trkpt>
<trkpt lat="-33.90998" lon="151.16752"><ele>0.000000</ele><time>2014-03-05T20:00:04Z</time></trkpt>
<trkpt lat="-33.90982" lon="151.16732"><ele>0.000000</ele><time>2014-03-05T20:00:05Z</time></trkpt>
<trkpt lat="-33.90982" lon="151.16732"><ele>0.000000</ele><time>2014-03-05T20:00:06Z</time></trkpt>
<trkpt lat="-33.90962" lon="151.16709"><ele>0.000000</ele><time>2014-03-05T20:00:07Z</time></trkpt>
<trkpt lat="-33.90962" lon="151.16709"><ele>0.000000</ele><time>2014-03-05T20:00:08Z</time></trkpt>
<trkpt lat="-33.90939" lon="151.16681"><ele>0.000000</ele><time>2014-03-05T20:00:09Z</time></trkpt>
<trkpt lat="-33.90939" lon="151.16681"><ele>0.000000</ele><time>2014-03-05T20:00:10Z</time></trkpt>
<trkpt lat="-33.90916" lon="151.16654"><ele>0.000000</ele><time>2014-03-05T20:00:11Z</time></trkpt>
<trkpt lat="-33.90916" lon="151.16654"><ele>0.000000</ele><time>2014-03-05T20:00:12Z</time></trkpt>
</trkseg>
</trk>
</gpx> 
```

请注意，我将时间中的秒数从 20:00:01 增加到 20:00:12

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-12-24T23:08:49.850

你可以使用这个网站可以为你创建一个 gpx 文件只需在谷歌地图上设置目的地并将链接复制到该网站并单击创建

[地图 GPX](http://mapstogpx.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:16:14.563

我的回答并不完整，因为我可以指导您直到您可以在 Eclipse 中将 .pgx 文件加载到 DDMS 透视图的步骤。

第 1 步。在您的 Firefox 浏览器中添加以下代码作为书签。

```
javascript:(function(){var%20script=document.createElement('script');script.src='http://www.elsewhere.org/GMapToGPX/gmaptogpx.js';document.getElementsByTagName('head')[0].appendChild(script);})() 
```

第 2 步。打开一个新选项卡并打开谷歌地图。单击获取方向并输入来源和目的地以获取路线。

第 3 步。单击书签，您将看到一个包含代码的新弹出窗口。您可以将此文件保存为 .gpx 文件。

步骤 4\. 打开 DDMS 透视图。单击模拟器控制选项卡。在位置控制上 在 GPX 选项卡下加载 gpx。

直到这里只有我工作过。如果有任何进一步的信息，我会更新我的答案。希望它有所帮助。

信息来源[链接](http://www.elsewhere.org/journal/gmaptogpx/)

*更新**

您可以启动 google api 模拟器并运行您的应用程序。每次单击播放按钮时，其位置都会更新。（基本上 onLocationChange() 如果你正在玩它会被调用。）。

# function - 如何在 bashrc 中创建一个函数来接受参数？

> ID：15206771
> 
> 赞同：18
> 
> 时间：2013-03-04T16:56:37.157
> 
> 标签：function, terminal, osx-mountain-lion, bash

我想在我的 bashrc 文件中有一个别名，以附加从终端传递给它的参数。例如：

```
$ lh300 
```

调用：

```
alias lh3000='open http://localhost:3000' 
```

但是，如果我输入：

$ lh8080 或 lh 后跟任意数字：

```
$ lh#### 
```

我想调用一个将#### 附加到别名中的函数，该别名将

```
'open http://localhost:####' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-04T17:01:48.153

您将无法使用别名，但您可以创建一个函数：

```
lh() { open http://localhost:$1; } 
```

然后就这样称呼它`lh 3000`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T18:45:56.560

一个可疑的黑客攻击涉及`command_not_found_handle`：

```
command_not_found_handle () {
    if [[ $1 =~ lh([[:digit:]]+) ]]; then
        open "http://localhost:$BASH_REMATCH[1]"
    fi
} 
```

我相信这需要`bash`4 或更高版本。

# ios - 如何在 iOS Titanium 模块中显示 UIViewController？

> ID：15206772
> 
> 赞同：0
> 
> 时间：2013-03-04T16:56:38.267
> 
> 标签：ios, uiview, module, titanium-mobile, titanium-modules

我想从 iOS Titanium 模块推送/显示视图控制器。

我尝试了下面的代码

```
- (id) OnMainUI {ENSURE_UI_THREAD(OnMainUI, nil);
   UIViewController *controller = [INITIALIZATION OF CONTROLLER];
   [[TiApp app] showModalController: controller animated: YES];
} 
```

但它显示错误 TiApp not found。

以及如何按照以下 URL [http://developer.appcelerator.com/question/138149/how-to-show-a-uiviewcontroller-in-a-ios-titanium-module中所述创建 UIView](http://developer.appcelerator.com/question/138149/how-to-show-a-uiviewcontroller-in-a-ios-titanium-module)

请帮助显示来自 iOS Titanium 模块的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:08:55.037

您需要将 TiApp.h 导入源

```
#import "TiApp.h" 
```

//其他模块开发常用的头文件：

```
#import "TiProxy.h"
#import "TiUtils.h"
#import "TiColor.h" 
```

# javascript - 问题循环使用链接的简单 javascript 幻灯片

> ID：15206775
> 
> 赞同：0
> 
> 时间：2013-03-04T16:56:42.003
> 
> 标签：javascript, html, slideshow

我有一个使用 javascript 的简单幻灯片。我想让图像链接和可点击。但是，在第一个循环之后，图像不会加载，我只能通过我的 css 获得一个带有边框的空白区域……我希望简单的幻灯片能够在每个图像中工作和加载。

这是HTML：

```
<div class="slides">
    <a href="http://www.google.de" target="_blank"><img src="images/sample_slides/test.jpg"alt="test"></a>
    <a><img src="images/sample_slides/test1.jpg" alt="test1"></a>
    <a><img src="images/sample_slides/test2.jpg" alt="test2"></a>
    <a><img src="images/sample_slides/test3.jpg" alt="test3"></a>
</div> 
```

这是我的Javascript：

```
<script type="text/javascript">
$(function(){$('.slides img:gt(0)').hide();
setInterval(function(){$('.slides :first-child').fadeOut('slow').next('img').fadeIn().end().appendTo('.slides');}, 7000);});
</script> 
```

感谢您的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:58:21.403

您需要隐藏和显示 a 标签，因为它们是 .slides 的新子代。就像是：

```
$(function(){
    $('.slides a:gt(0)').hide();

    setInterval(function(){
      $('.slides a:first-child')
        .fadeOut('slow').next('a').fadeIn().end().appendTo('.slides');
    }, 7000);
}); 
```

# box2d - 动态体和运动体碰撞

> ID：15206779
> 
> 赞同：0
> 
> 时间：2013-03-04T16:56:49.617
> 
> 标签：box2d, collision

如何使动态体与运动体不可碰撞。我仍然想检查是否会发生碰撞，但动态物体应该在碰撞时通过他移动。（而且我也喜欢通过调试绘制使运动体不可见；这可能吗）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:13:36.897

您可以设置`isSenor()`为`true`运动学体。

```
bodyDef.isSensor = true; 
```

> 设置`isSensor()`为`true`当您想知道对象何时会发生碰撞而不触发碰撞响应时。

# email - Magento AdvancedSmtp 发件人电子邮件

> ID：15206783
> 
> 赞同：0
> 
> 时间：2013-03-04T16:57:01.760
> 
> 标签：email, magento, smtp

我在 Magento 开发了一个 stie。要发送电子邮件，我需要一个 smtp 扩展，我已经安装了 AdvancedSmtp。我已经用我的服务器配置了我的 smtp，现在当我从联系人或其他形式发送电子邮件时，我的发件人电子邮件是 noreply@mydomain.com 但是如果我想更改发件人电子邮件，我该怎么做？我试图将其更改为：app/code/core/Mage/Core/Model/Email/Template.php 函数 sendTransactional （因为我已经看到它在联系人控制器中调用了这个函数）我已经改变了这个例如

```
$this->setSenderName(Mage::getStoreConfig('trans_email/ident_' . $sender . '/name', $storeId));
$this->setSenderEmail(Mage::getStoreConfig('trans_email/ident_' . $sender . '/email', $storeId)); 
```

到

```
$this->setSenderEmail('info@otherdomain.com');
$this->setSenderName('info@otherdomain.com'); 
```

但它总是通过 noreply@mydomain.com 发送

我在以下位置更改了它的控制器：app/code/community/Mage/Advancedsmtp/Model/Email/Template.php

```
$mail->setFrom($this->getSenderEmail(), $this->getSenderName()); 
```

到

```
$mail->setFrom('info@otherdomain.com', 'test'); 
```

它会更改邮件的名称，但不会更改发件人。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:07:51.523

据我所知 SMTP ( postfix ) 您需要确认/配置发件人电子邮件

所以需要查看服务器mail.log

例如，您可能会看到类似此错误的内容

> 无法解析发件人域。（回复 MAIL FROM 命令）

这意味着发件人电子邮件未经过验证，您需要在服务器上创建真实的电子邮件地址。

因此，我认为在您的情况下，后缀配置为使用 noreply@mydomain.com 发送所有电子邮件

它与代码和magento无关。

# java - JAVA 中的 ASCII 值

> ID：15206784
> 
> 赞同：-2
> 
> 时间：2013-03-04T16:57:02.213
> 
> 标签：java, ascii

当我运行下面的代码时，对于任何数字，它都会给出 ASCII 值。我的问题是 ASCII 值是 0-255，但是它如何返回 255 以上的 ASCII 值呢？

```
int i=345;
System.out.println((char)i); 
```

输出 ：

```
ř 
```

请指定如何将上述结果 (ie `ř`) 转换为适当的数字 (ie `345`)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:59:22.300

Java 不使用 ASCII。

`ř`是**Unicode**代码点 345。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:06:14.887

在回答您问题的第二部分时，将其转换`char`为`int`：

```
System.out.println("The code for 'ř' is " + (int)'ř'); 
```

给

```
The code for 'ř' is 345 
```

# ruby-on-rails-3 - Rails 不为生产或登台环境中的资产提供服务

> ID：15206789
> 
> 赞同：4
> 
> 时间：2013-03-04T16:57:19.270
> 
> 标签：ruby-on-rails-3, asset-pipeline

在调试[此问题](https://stackoverflow.com/questions/15177834/css-styles-not-being-compiled-for-rails-assets)的过程中，我尝试在本地以生产模式运行我的应用程序，但它没有提供任何资产。此外，我在 Heroku 应用程序（与我的生产 Heroku 应用程序分开）中有一个**暂存环境，它现在也显示没有任何资产的 HTML。**

要调试，我：

1.  杀死服务器
2.  清除 tmp/cache/assets
3.  删除公共/资产
4.  跑`rake assets:precompile`
5.  启动服务器`rails s -e production`
6.  访问该页面并打开网络检查器，当单击 application.css 链接的展开箭头时，它会显示`Reload the page to get source for: http://localhost:3000/assets/application-e1f3e0c864a153c7iu66f8772a886376.css`
7.  重新加载页面什么都不做。

**生产.rb**：

```
config.cache_classes = true
config.consider_all_requests_local       = false
config.action_controller.perform_caching = true
config.serve_static_assets = true
config.static_cache_control = "public, max-age=3600"
config.assets.compress = false
config.assets.compile = false
config.assets.digest = true 
```

**暂存.rb**：

```
config.cache_classes = true
config.consider_all_requests_local       = false
config.action_controller.perform_caching = true
config.serve_static_assets = true
config.static_cache_control = "public, max-age=3600"
config.assets.compress = false
config.assets.compile = false
config.assets.digest = true 
```

**应用程序.rb**：

```
config.assets.enabled = true
config.assets.version = '1.0'
config.assets.initialize_on_precompile = false 
```

下面是我如何在*layout/application.html.erb*中链接样式表和 javascript ：

```
<%= stylesheet_link_tag "application", :media => "screen, handheld" %>
<%= javascript_include_tag "application" %> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T17:48:44.080

所以问题是内存存储被设置为`config.cache_store = :dalli_store`导致错误并将其设置为`config.cache_store = :memory_store`解决它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T17:11:33.277

这是一种猜测，但不需要将编译资产设置为 true 吗？

```
config.assets.compile = true 
```

我认为你需要像这样编译资产：

```
rake assets:precompile RAILS_ENV='production' 
```

# iphone - CoreLocation/Mapkit 海拔高度

> ID：15206790
> 
> 赞同：0
> 
> 时间：2013-03-04T16:57:24.867
> 
> 标签：iphone, ios, mapkit, core-location, altitude

只是一个简单的问题，CoreLocation/Mapkit 是否测量海平面的高度（海拔）？

我正在使用以下代码

```
NSString *altitudeString = [NSString stringWithFormat: @"%.2f m", newLocation.altitude]; 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:05:44.230

是的，您可以像这样通过 locationManager 检查高度：

```
locationManager.location.altitude 
```

您还可以使用以下方法检查垂直精度：

```
locationManager.location.verticalAccuracy 
```

# amazon-web-services - 无法通过 ssh 访问 AWS EC2 实例

> ID：15206792
> 
> 赞同：-2
> 
> 时间：2013-03-04T16:57:27.313
> 
> 标签：amazon-web-services, amazon-ec2

我不小心更改了 publickey 的文件权限，现在我无法使用我的密钥对通过 ssh 访问。有没有办法恢复这个文件的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:08:56.207

您似乎可以在回答“更改 ec2 实例的密钥对”问题时找到解决方案：[https ://stackoverflow.com/a/11776183/179111](https://stackoverflow.com/a/11776183/179111)

# ruby-on-rails - rspec +carrierwave：不创建图像

> ID：15206795
> 
> 赞同：2
> 
> 时间：2013-03-04T16:57:30.397
> 
> 标签：ruby-on-rails, rspec, carrierwave

我有这个规格：

```
post :create, :room_id => @room.id, :image => Rack::Test::UploadedFile.new(path, 'text/jpg')
response.should redirect_to admin_room_path(@room)

@room.reload.pictures.count.should == 1
pic = @room.pictures.first

File.open(pic.image.url).should == File.open(path)
# Not working 
```

它失败并出现以下错误：

```
1) Admin::PicturesController should fail to upload a new picture
     Failure/Error: File.open(pic.image.url).should == File.open(path)
     Errno::ENOENT:
       No such file or directory - /uploads/picture/image/5134d0fa93ff007fcd000016/image1.jpg
     # ./spec/controllers/admin/pictures_controller_spec.rb:26:in `initialize'
     # ./spec/controllers/admin/pictures_controller_spec.rb:26:in `open'
     # ./spec/controllers/admin/pictures_controller_spec.rb:26:in `block (2 levels) in <top (required)>' 
```

未找到该文件，但`/uploads/picture/image/5134d0fa93ff007fcd000016/`已创建目录。

除文件外的所有内容都是正确的。

我的初始化程序：

```
if Rails.env.test? or Rails.env.cucumber?
  CarrierWave.configure do |config|
    config.storage = :file
    config.enable_processing = true
  end
end 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:10:56.610

`pic.image.url`是没有主机的 URL 路径。

尝试：

```
File.open(File.join(Rails.root, "public", pic.image.url)).should == File.open(path) 
```

或者，我的偏好是让carrierwave处理它：

```
File.open(pic.image.path).should == File.open(path) 
```

或比较内容：

```
pic.image.read.should == File.open(path).read 
```

# ruby-on-rails-3.2 - Ransack 和命名空间路由...缺少模板

> ID：15206804
> 
> 赞同：1
> 
> 时间：2013-03-04T16:57:49.360
> 
> 标签：ruby-on-rails-3.2, ransack

当我搜索任何东西时，我总是遇到错误：

> 缺少模板后台/用户/搜索，使用 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]} 的应用程序/搜索。在以下位置搜索：*“C:/RailsApps/novaxones/app/views”

我在**app/models中有一个用户模型**

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :remember_me, :created_by, :active, :blocked, :profile_attributes
  has_secure_password

  # relations
  has_one :profile, :dependent => :destroy, :inverse_of => :user
  accepts_nested_attributes_for :profile

 [...] 
```

还有一个控制器在**controllers/backstage/users_controller.rb**

```
class Backstage::UsersController < ApplicationController

  def index
    #@users = User.all
    @q = User.search(params[:q])
    @users = @q.result(:distinct => true).paginate(:per_page => 5, :page => params[:page])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

[...]

# Search
  def search
    index
    render :index
  end
end 
```

而且**routes.rb**文件是

```
Novaxones::Application.routes.draw do

  resources :sessions, only: [:new, :create, :destroy]

  resources :users, :controller => "frontend/users", only: [:new, :create] do
    member do
      get "activate"
    end
  end

  resources :forgotten_passwords, :controller => "frontend/forgotten_passwords", except: [:destroy, :show]
  resources :activation_requests, :controller => "frontend/activation_requests", only: [:new, :create]

  match '/forgotten_password_request', to: 'frontend/forgotten_passwords#new'
  match '/logout', to: 'sessions#destroy', via: :delete
  match '/login', to: 'sessions#new'
  match '/registration', to: 'frontend/users#new'
  match '/contact', to: 'frontend/base_pages#contact'
  match '/about', to: 'frontend/base_pages#about'
  match '/help', to: 'frontend/base_pages#help'
  match '/site-map', to: 'frontend/base_pages#sitemap', as: 'sitemap'

  namespace :backstage do
    match '', to: "dashboard#index", as: '/'
    get 'users/active' => 'users#active', :as => 'active_users'
    resources :users do
      collection do
        match 'search' => 'users#search', :via => [:get, :post], :as => :search
      end
      resources :profiles
    end
  end

  root to: 'frontend/base_pages#home' 
```

如您所见，我使用命名空间路由来拥有一个管理面板（称为后台）

**index.html.erb**是_

```
<div id="table-users-grid">
  <div id="grid-top-pagination" class="row">

    <div class="span4"><%= will_paginate %></div>
    <div class="span4 page-entries-info"><%= page_entries_info %></div>
    <div id="search-area" class="span4">
      <%= search_form_for @q, :url => search_backstage_users_path, :html => {:method => :post} do |sf| %>
          <div class="search-form-fields">
            <%= sf.text_field :email_cont, :placeholder => 'search users email contains' %>
          </div>
          <div class="actions"><%= sf.submit "Search" %></div>
      <% end %>
    </div>
  </div>
  <div id="management-area" class="row">
    <table id="users-grid" class="span10">
      <thead>
      <tr>
        <th><%= link_to 'UID', :sort => "id" %></th>
        <th><%= link_to 'Last name', :sort => "profiles.last_name" %></th>
        <th><%= link_to 'First name', :sort => "profiles.first_name" %></th>
        <th><%= link_to 'Email', :sort => "email" %></th>
        <th><%= link_to 'Country', :sort => "profiles.country" %></th>
        <th>active</th>
        <th>blocked</th>
        <th>created_at</th>
        <th>created_by</th>
      </tr>
      </thead>
      <tbody>
      <% @users.each do |user| %>
          <tr>
            <td><%= user.id %></td>
            <td><%= user.profile.last_name %></td>
            <td><%= user.profile.first_name %></td>
            <td><%= user.email %></td>
            <td><%= user.profile.country %></td>
            <td><%= user.active %></td>
            <td><%= user.blocked %></td>
            <td><%= user.created_at.strftime("%d %B %Y") %></td>
            <td><%= user.created_by %></td>
            <td><%= link_to 'Show', backstage_user_profile_path(user, user.profile) %></td>
            <td><%= link_to 'Edit', edit_backstage_user_profile_path(user, user.profile) %></td>
            <td><%= link_to 'Destroy', backstage_user_path(user), confirm: 'Are you sure?', method: :delete %></td>
          </tr>
      <% end %>
      </tbody>
      <tfoot></tfoot>
    </table>
    <aside id="switch-view-wrapper" class="btn-group btn-group-vertical span2" data-toggle="buttons-radio">
      <%= link_to 'All', backstage_users_path, :class => 'btn' %>
      <%= link_to 'Active', backstage_active_users_path, :class => 'btn' %>
      <%= link_to 'Inactive', backstage_active_users_path, :class => 'btn' %>
      <%= link_to 'Blocked', backstage_active_users_path, :class => 'btn' %>
      <%= link_to 'Not Blocked', backstage_active_users_path, :class => 'btn' %>
    </aside>
  </div>

  <div id="grid-bottom-pagination">
    <%= will_paginate %>
  </div>
</div> 
```

我可能遗漏或误解了某些东西，但找不到解决方法……我需要一些帮助和解释。预先感谢 干杯

**编辑并解决**

问题出在我的控制器的搜索操作中

从改变

```
 # Search
      def search
        index
        render :index
      end
    end 
```

至

```
# Search
  def search
    @q = User.search(params[:q])
    @users = @q.result(:distinct => true).paginate(:per_page => 5, :page => params[:page])
    render 'index'
  end 
```

现在一切都很好。

我也必须将它添加到范围中，对于那些对控制器中**活动**范围感兴趣的人，代码变为

```
def active
    @q = User.search(params[:q])
    @users = @q.result(:distinct => true).active.paginate(:per_page => 5, :page => params[:page])
    render 'index'
  end 
```

**并在用户模型**中定义如下

 **```
# scopes
  scope :active, joins(:profile).where(:active => true) 
```

希望这对其他人有帮助

干杯**

# sql - ActiveRecord - 从每个组中选择第一条记录

> ID：15206809
> 
> 赞同：8
> 
> 时间：2013-03-04T16:58:03.723
> 
> 标签：sql, ruby-on-rails-3, postgresql, activerecord

我想要每个用户发送的最新消息。这是示例数据

**表：对话**

```
sender  receiver message                        date
============================================================
    1   2   "hi"                            "2013-03-04 09:55:01.122074"
    2   1   "hello"                         "2013-03-04 09:55:32.903975"
    1   2   "have you done with the taks?"  "2013-03-04 09:57:46.383007"
    2   1   "almost..."                     "2013-03-04 09:58:55.783219"
    2   1   "should be able to finish 2day" "2013-03-04 09:59:28.950705"
    2   3   "shall we start?"               "2013-03-04 10:01:16.842725"
    3   2   "give me a minute"              "2013-03-04 10:01:41.994589"
    3   2   "let us start"                  "2013-03-04 10:02:14.04551" 
```

对于 id 为 2 的用户，我应该能够获得以下两条记录

```
1   2   "have you done with the taks?"  "2013-03-04 09:57:46.383007"        
3   2   "let us start"                  "2013-03-04 10:02:14.04551" 
```

这是我的解决方案

**型号：用户**

```
class User < ActiveRecord::Base
has_many :chats_received, class_name: 'Conversation', foreign_key: 'receiver_id',order: "created_at DESC"
end 
```

**型号 : 对话**

```
class Conversation < ActiveRecord::Base
  attr_accessible :message, :read

  belongs_to :sender, class_name: 'User'
  belongs_to :receiver, class_name: 'User'

  def most_recent_chat_received_from_connected_users
    connected_users_chats = . . . # Get all conversations which are sent to current user. e.g., user with id 2
    chats_grouped_by_senders = connected_users_chats.group_by { |conversation| conversation.sender_id }
    chats_grouped_by_senders.inject([]){|memo , (sender_id, conversations)| memo << conversations.first; memo}
  end
end 
```

**获取来自连接用户的最新消息：**

```
user = User.find 2
user.most_recent_chat_received_from_connected_users 
```

尽管此解决方案有效，但它会为两个用户之间的每次转换选择并创建模型。另外我觉得这不是获取所需行的方式。

我一直在使用postgresql。当我尝试在模式上使用组方法时出现以下错误。

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  column "conversations.id" must appear in the GROUP BY clause or be used in an aggregate function 
```

有没有更好的方法来获得相同的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T18:19:35.977

我不知道你如何可以调用`most_recent_chat_received_from_connected_users`，这是你的`Conversation`类的一个实例方法，在`User`没有得到错误的实例上，但我会在对话模型中添加一个自定义查找器：

```
class Conversation < ActiveRecord::Base
  # ...

  def self.most_recent_for(user_id)
    select('DISTINCT ON (sender_id) *').where(reciever_id: user_id).order("sender_id, created_at DESC")
  end

  # For MySQL you could have used:
  #
  # def self.most_recent_for(user_id)
  #   where(reciever_id: user_id).group("sender_id").order("created_at DESC")
  # end

  # ...
end 
```

现在您可以通过以下方式在控制器中获得所需的对话：

```
@conversations = Conversation.most_recent_for(current_user.id) 
```

# java - 二叉树，在前序遍历中返回下一个节点

> ID：15206810
> 
> 赞同：0
> 
> 时间：2013-03-04T16:58:03.937
> 
> 标签：java, binary-tree, preorder

我有一个任务，我需要一些方法方面的帮助。

所以我有一棵这样的树：

```
 A
              /   \
             B     C
           /   \ /   \
          D    E F     G
        /   \
       H      I
     /   \
   J       K 
```

我的方法是：

```
public BinaryTree preorderNext(BinaryTree t, BinaryTree v, BinaryTree prev) {       

    prev = t;

    if(t.getLeft() != null) {
        preorderNext(t.getLeft(), v, prev);
    }

    if(t.getRight() != null) {
        preorderNext(t.getRight(), v, prev);
    }

    if(prev == v) {
        return t;
    }

    return null;
} 
```

讲师给出了树的简单实现。该类称为 BinaryTree，如果您想创建一个节点链接到它，那么您指定左右子 BinaryTree 节点是什么。

一个节点有两个链接（一个在左边，另一个在右边子节点）并且没有到头的链接。

因此，使用当前方法，我能够成功地进行前序遍历，我通过编写存储在节点上的元素的打印语句来进行测试。

但是当我运行测试时，它告诉我来自 A 的下一个预购节点是 B，来自 K 的下一个预购节点抛出一个空异常，但应该是 I？

关于我哪里出错的任何想法？变量 prev 应该包含对访问的最后一个节点的引用，所以如果它等于节点 v（这是我指定的节点，返回 v 之后的节点），我不应该得到下一个节点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:54:50.073

我不确定递归地执行该任务是否那么容易。

使用堆栈以迭代方式解决任务可能是一种更好的方法：

```
public BinaryTree preOrderNext(BinaryTree toSearch) {

    Stack<BinaryTree> openList = new Stack<BinaryTree>();

    openList.push(root);

    while (openList.empty() == false) {
        BinaryTree curr = openList.pop();

        if (curr.getRight() != null)
            openList.push(curr.getRight());

        if (curr.getLeft() != null)
            openList.push(curr.getLeft());

        if (curr.equals(toSearch) && openList.empty() == false){
            return openList.pop();
        }
    }
    return null;
} 
```

此方法未经测试，但应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:23:26.397

这是 a 如何`preorder traversal`递归完成的实现。

```
public void preOrderTraversal(BinaryTree root){
    if(root == null) return;

    System.out.println(root);
    preOrderTraversal(root.getLeft());
    preOrderTraversal(root.getRight());
} 
```

笔记：

1.  我不确定你的方法；你为什么要返回一个节点？在任何情况下，当`root`使用这种方法时，您可以返回一个 " `emptyNode`" 并通过 if 语句处理它。
2.  如您所见，我只处理`root`, 任何级别的`root`更改。尝试通过贯穿来形象化这一点，您将理解这个概念。
3.  您在开始时缺少对空节点的检查（尤其是对于`t`）。

您可以继续调整结果以适应此情况。

最后一点是关于这种方法的运行时复杂性，我强烈建议您了解递归函数的运行时复杂性。将来会对你**有很大**帮助。检查[此维基百科文章](http://en.wikipedia.org/wiki/Recurrence_relation)以了解重复关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T04:45:53.593

我提供了一个在`O(h)`运行时运行的答案。

```
class Node {
    public int key;
    public Node l;
    public Node r;
    public Node p;

    public Node(int key) {
        this.key = key;
        this.l = null;
        this.r = null;
        this.p = null;
    }
}

public Node preorderNext(Node v) {
    if (v.l != null) {
        return v.l;
    } else if (v.r != null) {
        return v.r;
    } else {
        while (v.p != null) {
            if (v == v.p.l) {
                if (v.p.r != null) {
                    return v.p.r;
                } else {
                    v = v.p;
                }
            } else {
                if (v.p.p == null) {
                    return null;
                } else if (v.p == v.p.p.l) {
                    if (v.p.p.r != null) {
                        return v.p.p.r;
                    } else {
                        v = v.p;
                    }
                } else {
                    v = v.p;
                }
            }
        }
        return null;
    }
} 
```

# hibernate - 将某些值添加到集合后，实体未更新

> ID：15206813
> 
> 赞同：0
> 
> 时间：2013-03-04T16:58:18.483
> 
> 标签：hibernate, jakarta-ee

例如，我有实体用户，它有很多消息。

在这段代码中，我获取用户并将新消息添加到它的集合中，然后我使用简单的方法刷新更改：**session.flush();**

```
User activeUser = userDao.findById(userId);
                Set<Message> messages = activeUser.getMessages();
                messages.add(chatroomModel.getMessage());
                session.flush(); 
```

后来我希望通过某些标准获取所有消息，并且每条消息都有它的所有者（用户），但是最后插入的消息没有用户。

我希望注意到没有完成任何提交，所有逻辑都发生在同一个事务中。我正在学习休眠并尝试构建一些示例项目，因此不使用 spring 和其他“酷”的东西。你能帮我一个小费吗 - 我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:23:10.840

Message 是这里关系的所有者（它拥有数据库表中的用户 ID）。ORM 还不是魔法，仍然受到关系模型的限制，你必须在插入之前为消息指定用户，实际上只需添加

```
Message m = chatroomModel.getMessage();
m.setUser(activeUser);
messages.add(m) 
```

# php - PDO 多个查询不起作用

> ID：15206817
> 
> 赞同：0
> 
> 时间：2013-03-04T16:58:34.057
> 
> 标签：php, mysql, pdo

我正在使用 PDO 运行查询，但它没有按我的意愿工作。我围绕 pdo 写了一个包装器，这里是主要的查询方法：

```
<?php
public function query($query, $params = array())
{
    if(!is_array($params))
    {
        throw new Exception("Parameter 2 must be a key => value array.");
    }
    if(!$this->pdo)
    {
        $this->connect();
    }
    echo "
--------------------------------------------------------------------------------

$query

--------------------------------------------------------------------------------    
    ";
    $this->sql = $this->pdo->prepare($query);
    foreach($params as $key => $value)
    {
        $this->sql->bindParam($key, $value);
    }
    $sql = $this->sql->execute();
    if(!$sql)
        throw new Exception('[' . $this->sql->errorCode() . ']: ' . $this->sql->errorInfo());
} 
```

我无法显示整个查询，但这里是其中的一部分：

```
 $str = "SET @usapev = :usapev;
    SET @canpev = :canpev;
    SET @ven = :ven;
    SET @usa = :isUSA;
    SET @can = :isCAN;

    DROP TEMPORARY TABLE IF EXISTS T_MailingList;
    CREATE TEMPORARY TABLE T_MailingList
    (
        bsg_uk INT NOT NULL PRIMARY KEY,
        demog_id INT NOT NULL,
        procardnbr VARCHAR(12)
    );

    INSERT IGNORE INTO T_MailingList
    SELECT m.bsg_uk
    , m.demog_id
    , m.procardnbr
    FROM FROM bsg.member m;"; 
```

然后我像这样运行查询：

```
<?php
    $this->db->query($str, array(
        "ven"    => $ven,
        "usapev" => $usapev,
        "canpev" => $canpev,
        "isUSA"  => (int)$is_usa,
        "isCAN"  => (int)$is_can
    )); 
```

当查询在 echo in 中回显时，`query()`我将其复制到工作台并运行它，它在那里工作正常。没有错误，我得到了结果。在 pdo 中，当我运行另一个想要使用临时表的查询时，该表不存在。

为什么它在 PDO 中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:03:30.703

这可能与一次只能准备一个查询有关。以下是 afaik 准备好的语句的工作原理：首先将查询发送到 mysql，然后单独发送参数。由于您向 mysql 发送多个查询，这可能是您的问题的原因。

PS：我会建议您想要实现的存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:04:02.543

采用

```
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, 0); 
```

或用“;”展开查询 并循环运行每个查询

```
$queries = explode(";", $query);
foreach ($queries as $query) {
    $pdo->query($query, $attrs);
} 
```

# c++ - 错误“设置”未在此范围内声明

> ID：15206818
> 
> 赞同：3
> 
> 时间：2013-03-04T16:58:35.247
> 
> 标签：c++, compiler-errors, void, devkitpro

首先，这是我第一次编写代码，所以我是新手。

我正在使用 devkit pro 为 nds 写作，所以它都是用 c++ 编写的。我想要一个菜单​​，每个菜单屏幕都是一个空白，我需要有办法回到上一个菜单。

此外，我确保在实际代码中没有语法错误（除非未在此范围内声明被视为语法错误）。

**如果没有得到“错误'设置'未在此范围内声明”，**我该如何做到这一点。代码：

```
 //Headers go here

    void controls()
    {
                                 //Inits and what not go here
            if (key_press & key_down) 

    /*This is generally how you say if the down key has been pressed (This syntax might be wrong, but ignore that part)*/
            {
            settings(); //This part doesn't work because it can't read back in the code
            }

    }
    void settings()
    {
                                 //Inits and what not go here
            if (key_press & key_down) 
            {
            controls();
            }

    }
    void mainMenu()
    {
                 //Inits and what not go here
            if (key_press & key_down) 
            {
                    settings();
            }
    } 
```

**并且注意，在这段代码之外的某个地方，mainMenu() 会被激活。那么有人知道如何正确编码吗？**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:00:48.597

在你调用函数的那一刻，你的编译器对这个函数一无所知。有两种方法可以让编译器知道你的函数：*声明*和*定义*。

要声明函数，您必须像这样将函数概要（函数参数和返回值）放在编译模块的顶部。

```
void settings(void); 
```

要解决您的问题，您应该`settings()`在第一次调用它之前声明该函数。

在您的情况下，您可能应该在文件顶部声明该函数。通过这种方式，编译器将知道应该传入的函数和参数。

```
void settings();

void controls()
{
...
}
void settings()
{
...
}
void mainMenu()
{
...
} 
```

很好的文章开始并获得一些额外的细节：[声明和定义在msdn](http://msdn.microsoft.com/en-us/library/0e5kx78b.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:03:23.360

快速解决方法是为`settings()`before添加一个前向声明，`controls()`如下所示：

```
void settings() ; 
```

完整代码：

```
//Headers go here

void settings() ;

void controls()
{
                             //Inits and what not go here
        if (key_press & key_down) 

/*This is generally how you say if the down key has been pressed (This syntax might be wrong, but ignore that part)*/
        {
        settings(); //This part doesn't work because it can't read back in the code
        }

}
void settings()
{
                             //Inits and what not go here
        if (key_press & key_down) 
        {
        controls();
        }

}
void mainMenu()
{
             //Inits and what not go here
        if (key_press & key_down) 
        {
                settings();
        }
} 
```

另请参阅此先前的线程[C++ - 前向声明](https://stackoverflow.com/questions/4757565/c-forward-declaration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:03:28.397

问题是 settings() 是在 controls() 之后声明的，并且控件试图调用 settings()。但是，由于 settings() 尚不存在，因此无法这样做。

您可以将 settings() 的定义移到 controls() 之前，也可以在 controls() 之前执行 settings() 的前向声明。

```
void settings(); //forward declaration
void controls() { 
  .....
}
void settings() {
  .... 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T17:03:29.410

您是否首先在头文件中声明了 settings() ？此外，如果这些方法在头文件中声明，我看不到您将任何方法的范围限定为类名或命名空间。

如果您不需要头文件，无论出于何种原因，请更改您编写的顺序。在使用之前定义 settings() 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T17:02:39.523

`settings()`是局部函数。**只有在**定义之后才能调用它。移动上面的定义`controls()`或通过头文件使其可用。

# c - 我的 Mips 适合这个 forloop 吗？

> ID：15206823
> 
> 赞同：1
> 
> 时间：2013-03-04T16:58:43.243
> 
> 标签：c, assembly, mips

我试图将这个小的 c 代码转换为 mips，但我很好奇如果我做得正确，是否有人能够查看并查看它？尝试正确学习 mips。想看看我是否掌握了窍门。在这里使用 4 个寄存器。

```
for (i=0; i<a; i++)
a += b;

li $t0,0
loop:
bge $t0,$s0,exit_loop
addi $t0,$t0,1
add $s0,$s0,$s1
j loop

exit_loop: 
```

# ios - 更新视图 - 这是 tabbarapplication 的正确方法吗？

> ID：15206824
> 
> 赞同：0
> 
> 时间：2013-03-04T16:58:44.407
> 
> 标签：ios, refresh, reload

来自气象站的数据被保存到数据库中。我只对实时数据感兴趣。通过网络服务，我有这些 XML 格式的数据。并且这些值每 30 秒更新一次。我想让用户可以随时使用 updateButton 刷新值。

我做了一个如下的方法：

```
- (IBAction)buttonUpdate:(id)sender {

    [self viewDidLoad];
} 
```

到目前为止它正在工作，但这是正确的方法吗？苹果允许这样的方式吗？

最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:06:43.060

重复使用`viewDidLoad`不是一个好方法。这是你应该做的：

获取将天气加载到视图中的代码并将其从视图中删除`viewDidLoad`并将其放入类似

```
-(void)loadWeatherView {
    //Code Here
} 
```

然后，在 中`viewDidLoad`，用于`[self loadWeatherView];`在应用首次加载其视图时更新视图。

然后将 buttonUpdate 更改为：

```
- (IBAction)buttonUpdate:(id)sender {

    [self loadWeatherView];
} 
```

使用`viewDidLoad`可能不会导致问题，但通常您希望在那里执行更多不会经常更改的高内存加载。无论如何，每次视图加载时都会调用它，因此不断地从代码中调用它并不是最好的主意。现在在这种情况下，它可能不是非常重要，但作为一种习惯，我喜欢将尽可能少的实际代码放入`viewDidLoad`其中，而只是调用 from 的方法`viewDidLoad`，这样您就可以像我提供的那样加载单独的东西多于。

这使得您可以更新一件事，而不是重新加载不需要重新加载的内容。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:07:07.630

调用“viewDidLoad”方法是不好的风格。您应该创建一个新方法 [self updateData] 并调用它。将与更新本身相关的所有功能都放在那里，它应该会更好地工作。

# objective-c - Cocoa中的CMD+Option+D模拟

> ID：15206825
> 
> 赞同：2
> 
> 时间：2013-03-04T16:58:47.937
> 
> 标签：objective-c, cocoa, api, keyboard-shortcuts

我需要同时模拟 CMD+Option+D 按键。我已经做了各种寻找，到目前为止我见过的最好的方法是这样做：

```
CGEventSourceRef src =
    CGEventSourceCreate(kCGEventSourceStateHIDSystemState);

    CGEventRef cmdd = CGEventCreateKeyboardEvent(src, kVK_Command, true);
    CGEventRef cmdu = CGEventCreateKeyboardEvent(src, kVK_Command, false);
    CGEventRef optd = CGEventCreateKeyboardEvent(src, kVK_Option, true);
    CGEventRef optu = CGEventCreateKeyboardEvent(src, kVK_Option, false);
    CGEventRef dd = CGEventCreateKeyboardEvent(src, kVK_ANSI_D, true);
    CGEventRef du = CGEventCreateKeyboardEvent(src, kVK_ANSI_D, false);

    CGEventSetFlags(dd, kCGEventFlagMaskCommand); //NO idea why this is here.
    CGEventSetFlags(du, kCGEventFlagMaskCommand); //NO idea why this is here.

    CGEventTapLocation loc = kCGHIDEventTap; // kCGSessionEventTap also works
    CGEventPost(loc, cmdd); //Cmd down
    CGEventPost(loc, optd); //Option down
    CGEventPost(loc, dd);   //D down
    CGEventPost(loc, cmdu); //Cmd up
    CGEventPost(loc, optu); //Option up
    CGEventPost(loc, du);   //D up

    CFRelease(cmdd);
    CFRelease(cmdu);
    CFRelease(optd);
    CFRelease(optu);
    CFRelease(dd);
    CFRelease(du);
    CFRelease(src); 
```

但是，这样做不会像我使用键盘时那样切换扩展坞？为什么是这样？我究竟做错了什么？我导入了 Carbon.h，所以看起来这应该可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:20:46.087

你试过这个吗？

```
// as before ...
CGEventSetFlags(dd, kCGEventFlagMaskCommand ^ kCGEventFlagMaskAlternate); 
CGEventSetFlags(du, kCGEventFlagMaskCommand ^ kCGEventFlagMaskAlternate);
// continues... 
```

我认为您必须为 D 事件设置命令*和*备用（选项键）标志。

# ios - Xcode 命令行向/从 iOS 设备应用程序沙箱上传/下载文件

> ID：15206830
> 
> 赞同：9
> 
> 时间：2013-03-04T16:58:52.563
> 
> 标签：ios, xcode, automation, jenkins, continuous-integration

你们中有人知道，我如何从命令行管理我的应用程序数据的文件传输，比如 Organizer？我试图用 xcrun 或 Instruments 找到一种方法，但目前没有成功。

我的目标是通过 jenkins 在设备上运行验收测试。目前我可以上传我的应用程序的新版本并通过 Instruments 启动它。但是缺少一种重置客户端数据或推送修改后的数据以对其进行测试的方法。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-24T14:55:16.480

在 info.plist 中，您可以添加密钥：**应用程序支持 iTunes 文件共享**并将其设置为**YES**。然后您就可以使用 iTunes 管理您的应用程序数据。打开 iTunes，转到您的设备并打开应用程序选项卡。

在此页面下方转到文件共享部分，您可以在应用程序文档文件夹中传递所有数据。

我希望这个结果有用。

# java - RMI：如何将服务器端和客户端类放置到网络可访问的位置？

> ID：15206836
> 
> 赞同：1
> 
> 时间：2013-03-04T16:59:11.923
> 
> 标签：java, rmi

我是 RMI 新手

我理解 RMI 的意思，我已经尝试过这个[示例](http://www.java2all.com/1/5/22/114/Technology/RMI/RMI-Program/RMI-example)并且效果很好。当我尝试这个示例时，我以两种不同的方式进行了尝试。

*   **一个**文件夹
    所有相关文件（接口、客户端类和服务器类）都在一个文件夹中。

*   **两个**不同的文件夹（在同一台 PC 中） -*看看它们分开时会发生什么*
    一个文件夹包含：接口和客户端类。
    另一个文件夹包含：接口和服务器类。

两种方式都运作良好。

我打算在两台不同的 PC 上尝试这个示例。但是有人告诉我这个例子已经过时了，必须阅读[这个](http://docs.oracle.com/javase/tutorial/rmi/index.html)。

我读了它，我几乎理解了我所坚持的一切。
我到达了这个[页面](http://docs.oracle.com/javase/tutorial/rmi/compiling.html)

> 使用 javac 编译器构建服务器端或客户端类后，如果这些类中的任何一个需要由其他 Java 虚拟机动态下载，则必须确保它们的类文件放置在网络可访问的位置

我认为本教程假设读者对 Web 服务器问题有一定的了解。（我没有）
我读完了页面的末尾，但我不明白我必须将我的类文件放在哪里。

我正在使用 Windows 7 Ultimate 64 位。**我对网络可访问位置**
有两个猜测：（也许他们是愚蠢的猜测 - 抱歉）

 **1- 我的 PC 的名称是“S”，因此**网络可访问的位置**可能是“C:\Users\S”或其中的某个位置。

2- 我安装了[Apache](http://httpd.apache.org/download.cgi) “httpd-2.0.64-win32-x86-openssl-0.9.8o.msi”，我认为**网络可访问位置**与此 Apache 服务器相关。

所以我的问题是找到**网络可访问的位置**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:39:02.777

实际上，这意味着您必须将它们放在 HTTP 服务器中，以便可以通过 HTTP: URL 检索它们。最好将 JAR 文件放在那里，而不仅仅是 .class 文件的目录系统。

您可以使用网络共享和文件：URL，但它确实不能很好地工作。服务器和客户端的代码库条目中的 URL 必须/必须相同，因此即使文件在服务器文件系统上是本地的，您仍然需要具有客户端看到的相同共享驱动器。我不建议应用程序将共享驱动器用于*任何事情，*包括这个。**

# c - 如何编译使用 GNU C 扩展的 C 代码

> ID：15206839
> 
> 赞同：0
> 
> 时间：2013-03-04T16:59:15.007
> 
> 标签：c

我想使用`__sync_lock_test_and_set`ANSI c 中不可用的函数，但它是 GNU C 扩展。

编译一段使用此扩展的代码时，出现以下错误，

```
/tmp/cc7Iat9G.o: In function `main':
swap.c:(.text+0x40): undefined reference to `__sync_lock_test_set'
collect2: ld returned 1 exit status 
```

那么，我应该包含什么头文件，或者我应该给出什么编译器标志来编译带有 GNU C 扩展的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:48:53.560

我想你是按`__sync_lock_test_set`你的意思输入`__sync_lock_test_and_set`的。后者在[关于 atomic builtins 的 GCC 文档](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html%20GCC%20documentation%20on%20atomic%20builtins)中有所提及；前者不是。

# bash - 为什么 $@ 的 bash -n 和 -z 测试运算符不反转

> ID：15206840
> 
> 赞同：15
> 
> 时间：2013-03-04T16:59:17.563
> 
> 标签：bash, operators

```
function wtf() {
  echo "\$*='$*'"
  echo "\$@='$@'"
  echo "\$@='"$@"'"
  echo "\$@='""$@""'"
  if [ -n "$*" ]; then echo " [ -n \$* ]"; else echo "![ -n \$* ]"; fi
  if [ -z "$*" ]; then echo " [ -z \$* ]"; else echo "![ -z \$* ]"; fi
  if [ -n "$@" ]; then echo " [ -n \$@ ]"; else echo "![ -n \$@ ]"; fi
  if [ -z "$@" ]; then echo " [ -z \$@ ]"; else echo "![ -z \$@ ]"; fi
}

wtf 
```

生产

> ```
> $*=''
> $@=''
> $@=''
> $@=''
> ![ -n $* ]
>  [ -z $* ]
>  [ -n $@ ]
>  [ -z $@ ] 
> ```

尽管在我看来这`[-n $@]`应该是错误的，因为[7.3 其他比较运算符](http://tldp.org/LDP/abs/html/comparison-ops.html)表明`[ -n "$X" ]`应该是`[ -z "$X" ]`for all的倒数`$X`。

> # `-z`
> 
> 字符串为空，即长度为零
> 
> ```
> String=''   # Zero-length ("null") string variable.
> 
> if [ -z "$String" ]
> then
>   echo "\$String is null."
> else
>   echo "\$String is NOT null."
> fi     # $String is null. 
> ```
> 
> # `-n`
> 
> 字符串不为空。
> 
> 该`-n`测试要求在测试括号内引用该字符串。在测试括号中使用不带引号的字符串`! -z`，甚至只使用不带引号的字符串（参见示例 7-6）通常都可以，但是，这是一种不安全的做法。始终引用经过测试的字符串。[1]

我知道`$@`它很特别，但我不知道它特别到足以违反布尔否定。这里发生了什么？

* * *

```
$ bash -version | head -1
GNU bash, version 4.2.42(2)-release (i386-apple-darwin12.2.0) 
```

* * *

实际的数字退出代码是全部`1`或`0`按照

```
$ [ -n "$@" ]; echo "$?"
0 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T17:05:47.990

当`$@`为空时，`"$@"`不展开为空字符串；它被完全删除。所以你的测试不是

```
[ -n "" ] 
```

反而

```
[ -n ] 
```

Now`-n`不是一个运算符，而只是一个非空字符串，它总是测试为真。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:22:26.860

`"$@"`不符合您的预期。它不是 的不同形式`"$*"`，它扩展为传递给当前脚本的引用参数列表。

如果没有参数，它会扩展为空。如果有两个参数`a`and `b c`，那么它扩展为`"a" "b c"`（即它保留参数中的空格），同时`"$*"`扩展为`"a b c"`and`$*`将扩展为`a b c`（三个单词）。

# python - 根据参数绘制具有不同颜色的曲线

> ID：15206844
> 
> 赞同：3
> 
> 时间：2013-03-04T16:59:20.813
> 
> 标签：python, matplotlib

我想用一些测量数据绘制曲线。它可以作为包含表单项的数组使用`[t,b]`，其中 t 是我要绘制的参数，`b`是描述测量设备状态的字符串。我现在想绘制 的值`t`并根据 的值对线进行着色`b`。到目前为止我的代码是

```
import pylab as pl
measurements = [[0, "a"], [1, "b"], [2, "c"]]
times = pl.arange(0, 3, 1)
values = zip(*measurements)[0]
parameters = zip(*measurements)[1]
pl.plot(times, values)
pl.show() 
```

该行现在应该有不同的颜色，具体取决于`parameters`. 我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:06:07.320

最好的方法是使用 matplotlib 的`colormap`API。

```
from matplotlib import pyplot as pl
from matplotlib import cm

pl.scatter(times, values, c = cm.spectral(1.*values/max(values))) 
```

显然，您需要使用其他一些函数从数据中获取颜色。一般来说，`cm.spectral`([或任何其他`colormap`](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps?action=AttachFile&do=get&target=colormaps3.png)) 将返回一个颜色，给定一个介于 0 和 1 之间的浮点数，或者一个介于 0 和 255 之间的 int。

作为一般性评论，您最好使用 numpy 数组而不是尝试将`zip`您的数据放在一起。使用更复杂的数据结构可能比这个例子更容易。

```
import numpy as np
from matplotlib import pyplot as pl
from matplotlib import cm

measurements = np.array([[0, "a"], [1, "b"], [2, "c"]])
times = np.arange(3)
values = np.array(measurements[:,0], dtype=float)
parameters = np.array(measurements[:,1], dtype='S1')

pl.scatter(times, values, c = cm.spectral(values/max(values)))
pl.show() 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-03-04T17:01:57.130

绘制图表最简单的方法可能是使用谷歌的图表 API：[https ://developers.google.com/chart/](https://developers.google.com/chart/)

这根本不是纯粹的python，而是值得一看的资源。希望能帮助到你。

# javascript - 如何在 node.js 中执行 hello world javascript 文件

> ID：15206849
> 
> 赞同：36
> 
> 时间：2013-03-04T16:59:29.603
> 
> 标签：javascript, node.js, cmd

我`hello_world.js`的计算机上的文件位于以下位置 -

```
C:\Users\Ankur\Downloads\NodeJS\working 
```

它具有以下代码-

```
console.log("Hellow World"); 
```

[我在这里](http://www.nodebeginner.org/#hello-world)阅读初学者教程，它说我应该通过 node.js 执行我的 javascript 文件。现在我不知道该怎么办。我该怎么做。

当我这样做... ![在此处输入图像描述](../Images/4ceb84bb2474b8f9aacf705ff292ffa8.png)

我什么都得不到。我应该怎么做才能成功运行 hello world。这些教程似乎都没有显示需要做什么。

我对此很陌生，所以这对你们来说可能很明显。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-04T17:04:48.557

使用`Node.js command prompt`，然后输入`node C:\Users\Ankur\Downloads\NodeJS\working\hello_world.js`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-04T17:03:48.960

看起来您已经在节点控制台中。您输入`node`了正确启动的节点（因此您的路径很好）。现在你告诉节点解释

```
node C:\Users\Ankur\Downloads\NodeJS\working\hello_world.js 
```

作为它不喜欢的javascript。

您应该可以在`console.log('hello world');`此处键入并看到它出现。

要运行你的文件，退出节点解释器（我认为是 control-X，也许是 control-C），然后在你的 C:> 提示符下，然后输入

```
node C:\Users\Ankur\Downloads\NodeJS\working\hello_world.js 
```

交替，

```
cd C:\Users\Ankur\Downloads\NodeJS\working\
node hello_world.js 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T17:06:35.557

您已通过键入`node`命令提示符进入节点控制台，然后尝试从自身内部执行节点。只需`node c:\etc\...\`从命令提示符输入，而不是节点 shell。

按：[开始]->[运行]->[c][m][d]

并输入命令：`node C:\Users\Ankur\Downloads\NodeJS\working\hello_world.js`

或者，使用 sublime 编辑器，并安装一个 node js 构建系统，然后打开您要运行的文件，然后按构建快捷方式，在控制台中获取输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-03T18:05:27.880

1.  打开 CMD。
2.  输入“cd C:\Users\Ankur\Downloads\NodeJS\working”并按 Enter
3.  键入“node hello_world.js”并按 Enter

这应该解决！重要提示：不要在点号 3 之前键入节点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-11T15:16:49.393

请遵循以下三个简单步骤：

*   转到您的工作目录

    ```
    C:\Users\Ankur\Downloads\NodeJS\working 
    ```

*   在那里打开cmd并输入

    ```
    node hello_world 
    ```

*   按`Enter`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-27T21:47:24.470

选择。打开Nodejs“带有绿色图标的东西”。从您拥有的文件中复制您想要执行的代码

将其粘贴到nodejs中，然后按Enter

nodejs 理解 js 代码，因此它将执行您编写的内容并输出 hello world undefined

您所描述的内容会打开您拥有的文件，然后执行它。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-04T17:11:49.700

打开 Windows cmd 并键入

```
node C:\Users\Ankur\Downloads\NodeJS\working\hello_world.js 
```

您应该使用系统解释器（bash/DOS cmd）中的节点，您正在运行的是 C:\Program Files\nodejs\node.exe 没有任何参数。

# c# - 是否可以使用条件属性来创建类似的调试器和运行时方法？

> ID：15206853
> 
> 赞同：5
> 
> 时间：2013-03-04T16:59:42.190
> 
> 标签：c#, conditional-attribute

是否可以创建 2 个具有相同方法名称、传入值并使用条件属性和一些反条件返回的方法，例如

```
[Conditional("Debug")]
    private string StringGenerator()
    {
        Guid g = Guid.NewGuid();
        string guidString = Convert.ToBase64String(g.ToByteArray());
        guidString = guidString.Replace("=", "");
        guidString = guidString.Replace("+", "");
        return guidString;
    }

    [!Conditional("Debug")]// I know using '!' doesn't really work
    private string StringGenerator()
    {
        Guid g = Guid.NewGuid();
        string guidString = Convert.ToBase64String(g.ToByteArray());

        return guidString;
    } 
```

这样您就可以调用一个方法并根据是否定义了“调试”，编译器将选择哪种方法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:01:25.997

不，这是不可能的。该`Conditional`属性不控制方法是否在代码中定义，它只控制方法调用包含在调用代码中的条件。

此外，该`Conditional`属性可以多次应用于方法。因此，这里没有一个简单的`on / off`决定。考虑

```
[Conditional("DEBUG")]
[Conditional("TRACE")]
void Target() { ... } 
```

这里有 4 种组合需要考虑，而不仅仅是 2 种。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T17:03:05.007

您可以尝试使用如下`#if DEBUG`语法：

```
#if DEBUG
    private string StringGenerator()
    {
        Guid g = Guid.NewGuid();
        string guidString = Convert.ToBase64String(g.ToByteArray());
        guidString = guidString.Replace("=", "");
        guidString = guidString.Replace("+", "");
        return guidString;
    }

#else
    private string StringGenerator()
    {
        Guid g = Guid.NewGuid();
        string guidString = Convert.ToBase64String(g.ToByteArray());

        return guidString;
    }
#endif 
```

但是，使用它有一些不同之处。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/3788605/if-debug-vs-conditionaldebug)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T17:05:47.370

您不能拥有多个具有相同名称和相同签名的函数/方法。不过，您可以通过更改其签名来重载方法。例如：

```
Private Function myMethod() As String
    Return "D"
End Function
Private Function myMethod(ByVal myString As String) As String
    Return "D"
End Function 
```

与其尝试创建相同的完全相同的函数来做两件不同的事情，不如传入一个变量并根据值做两件不同的事情可能会更好。

```
Private Function myFunction(ByVal test As String) As String
     if(test.toUpper()= "QA") then
        'do one thing
     elseif(test.toUpper() = "LOCAL"
        'do another
     else
         'must be Prod
     end if
end Sub 
```

通常我所做的是在我的 web.config 文件中有一个键，它表示我正在使用的环境（本地、QA、Prod），并且根据该值，我会将不同的参数传递给我的函数/方法。然后，当我发布时，我更改了网络配置密钥

# ios - 如何模态呈现一个视图来选择 UIImagePicker sourceType？

> ID：15206855
> 
> 赞同：-1
> 
> 时间：2013-03-04T16:59:49.400
> 
> 标签：ios, xcode, uiimagepickercontroller, modalviewcontroller

我需要做的是在呈现 UIImagePicker 控制器之前呈现这个带有按钮的半模态视图，如下图所示：

![在此处输入图像描述](../Images/a5a1f451b96f384ce8c09dbed97456ef.png)

我相信世界上所有处理 UIImagePicker Controller 的应用程序都有这个“预览”，但我已经为此苦苦挣扎了 2 天，还没有找到实现这一目标的方法。

我已经在这方面搜索了很多，但仍然不知道这是添加到主视图的子视图、模态视图控制器还是 UIImagePicker 本身的某些属性，只要我拥有的几乎所有应用程序搜索具有完全相同的呈现方式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:02:09.473

您需要使用 UIActionSheet 组件。这是一个示例：

```
UIActionSheet * sheet = [[UIActionSheet alloc]     initWithTitle:NSLocalizedString(@"ADVICES_ADD_PICTURE", nil)
                                                        delegate:self
                                               cancelButtonTitle:NSLocalizedString(@"CANCEL", nil)
                                          destructiveButtonTitle:nil
                                               otherButtonTitles:NSLocalizedString(@"WITHOUT_PICTURE", nil),NSLocalizedString(@"TAKE_PICTURE", nil), NSLocalizedString(@"CHOOSE_PICTURE", nil), nil];

[sheet showInView:self.view]; 
```

# java - 将我的方法修改为 String 而不是 void

> ID：15206857
> 
> 赞同：0
> 
> 时间：2013-03-04T16:59:58.367
> 
> 标签：java, string, oop, public, void

我目前有一个名为**明天（）**的方法，它修改对象属性，在这种情况下是日，月，年（**这不是 java.util.Date**，我已经制作了自己的 Date 构造函数。）

因此，例如，如果我有一个名为 date1(30,12,2013) 的对象并且我运行 date1.tomorrow() 它将使 date1 = (1,1,2014) 注意：我们目前假设所有月份都有 30 天。

现在，如果我将其保留为 public void tomorrow() 并简单地写，这可以正常工作

```
date1.showDate(); // show original value
date1.tomorrow(); // add 1 to day, do some if statements if day > 30, etc, etc
date1.showDate(); // show modified value 
```

**但是**我希望**明天（）**也具有将修改后的日期打印为字符串的功能，显然我需要将我的方法**公开字符串明天（）**并有一个返回部分，但我不完全确定我要返回什么，我试过返回 showDate 但它不能正常工作。

任何帮助将不胜感激。

注意：这是我目前的明天（）方法

```
public void tomorrow()
{
        this.day++;
     if(this.day > 30)
        {
                this.day = 1;
                this.month++;
        }
        if(this.month > 12)
        {
                this.month = 1;
                this.year++;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:19:11.323

我不确定您是要打印日期还是返回字符串。如果你想打印它，你可以这样做：

```
System.out.println(day + ......); 
```

或者，**假设** `showDate()`打印

```
public void tomorrow()
{
     ....
     showDate();
 } 
```

但是如果你想返回它，你可以返回一个字符串，你可以从 showDate() 获得（**假设**它`public/private String showDate()`）

```
public String tomorrow()
{
     ....
     return showDate();
 } 
```

如果您没有将日期作为字符串获取的方法，因为`showDate()`yust 会打印它，我建议您实现它并在此处和中调用它`showDate`，因为如果您想更改格式，请添加。或者其中有一个错误，您不必多次编写/更正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:21:49.597

如果您的要求是在当前日期添加一天并将其作为字符串形式返回，您可以修改您的方法，如下所示：

```
public String getTomorrow(String today) throws ParseException {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd-MM-yyyy");
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(simpleDateFormat.parse(today));
        calendar.add(Calendar.DATE, 1);  // Adding one day to input date
        return simpleDateFormat.format(calendar.getTime());
    } 
```

请在下面找到示例测试结果以便更好地理解：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;

public class DateHelper {

    public String getTomorrow(String today) throws ParseException {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd-MM-yyyy");
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(simpleDateFormat.parse(today));
        calendar.add(Calendar.DATE, 1);  // Adding one day to input date
        return simpleDateFormat.format(calendar.getTime());
    }

    public static void main(String[] args) throws ParseException {
        DateHelper dateHelper = new DateHelper();
        System.out.println(dateHelper.getTomorrow("28-02-2013"));
        System.out.println(dateHelper.getTomorrow("04-03-2013"));
        System.out.println(dateHelper.getTomorrow("31-03-2013"));
    }

} 
```

它将产生输出：

```
01-03-2013
05-03-2013
01-04-2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:12:34.230

你`ShowDate()`必须只打印，不返回任何东西。因此，如果您尝试返回 ShowDate 并且您的返回类型为`tomorrow()`is `String`，它将给您编译时错误。所以，你可以做的是：

1.  进入你的`showDate()`方法，找到它正在打印的内容，然后返回`showDate()`在你的`tomorrow()`.

2.  `showDate()`从您的`tomorrow()`. 在这种情况下，您不必将`tomorrow()`方法修改为 return `string`。

3.  如果您不喜欢上述两个选项中的任何一个，并且无论如何都希望返回值`String`，请遵循上面 PremGenError 的答案。

4.  最后但并非最不重要的一点是，我建议您从明天开始返回 Date 对象本身，并在该对象上调用 showDate() 。

# javascript - JavaScript中的表格对齐

> ID：15206858
> 
> 赞同：-1
> 
> 时间：2013-03-04T17:00:14.167
> 
> 标签：javascript, html, css

这是一个两部分的问题，我已经在多个标签下搜索以找到无济于事的答案。

我有一个包含 4 列和 4 个块的表格，我试图让它们在页面加载时自动对齐，以便四列占据页面底部的整个宽度。无论用户是在 22" 宽​​屏幕还是 15" 屏幕上，我都希望它看起来一样：

1.  这最好由 JavaScript 完成，还是有更有效的方法？
2.  您将如何实现这一目标？

编辑：对不起，我应该更具体，这是我的代码：

```
 <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color:#c1bdb6;">
                <tbody>
                    <tr>
                        <td align="right" valign="top" id="col-1">
                            <div id="nugget1" align="right" style="height: 459px;">
                                <div id="nugget1-content" align="left">
                                    <h2 class="menutitle"> FAQ's </h2>

                                </div> 
                            </div>
                        </td>
                        <td valign="top" id="col-2">
                            <div id="nugget2" align="center" style="height: 459px;">
                                <h2 class="menutitle"> Contacts </h2>
                            </div>
                      </td>                                    
                      <td valign="top" id="col-3">
                            <div id="nugget3" align="center" style="height: 459px;">
                                 <h2 class="menutitle"> Calendar </h2>
                                    <ul class="vertmenu">  
                                        <li>
                                            <a href="http://www.youtube.com/watch?v=5F5v1EYaSTA"> Shared Calendars </a>
                                        </li>
                            </div>
                        </td>
                        <td valign="top" id="col-4">
                             <div id="nugget4" align="center" style="height: 459px;">
                                 <h2 class="menutitle"> Mail </h2>
                             </div>
                      </td>

                  </tr>
                </tbody>
             </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:04:53.030

假设金块是一个表格单元格，这可能就是您要查找的内容：

1.  这听起来像是 CSS 的工作。
2.  相关CSS：

    表{宽度：100%；}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:30:27.707

`valign`除非您使用这种过时的 HTML（用于布局的表格、HTML 中的和之类的使用等）有特殊原因，否则`align`实现您想要的最有效（关于页面加载）的方法是重组您的HTML 到更多类似于以下内容的内容：

```
<div id="nuggets">
  <div id="nugget1">
    <h2 class="menutitle"> FAQ's </h2>
  </div> 
  <div id="nugget2" class="col">
     <h2 class="menutitle"> Contacts </h2>
  </div>
  <div id="nugget3">
     <h2 class="menutitle"> Calendar </h2>
     <ul class="vertmenu">  
       <li>
         <a href="http://www.youtube.com/watch?v=5F5v1EYaSTA"> Shared Calendars </a>
       </li>
  </div>
  <div id="nugget4">
    <h2 class="menutitle"> Mail </h2>
  </div>
</div> 
```

然后，您可以按照以下方式使用 CSS：

```
#nuggets {
  height: 459px;
}

#nuggets > div {
  width: 25%;
  height: 459px;
  float: left;
  text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:06:35.307

您可以尝试将表格宽度设置为与屏幕分辨率相对应，也许使用这个？

```
<table width="100%" height="100%">
<tr>
<td align="center" valign="middle">
Body html here
</td>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T17:21:13.680

如果您`<table>`为表格使用实际的 HTML 标记，那么最简单的方法是使用`<colgroup>`标记。

在您的情况下，代码将是：

```
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color:#c1bdb6;">
    <colgroup width="25%" />
    <tbody>
        <tr>
            <td align="right" valign="top" id="col-1">
                <div id="nugget1" align="right" style="height: 459px;">
                    <div id="nugget1-content" align="left">
                        <h2 class="menutitle"> FAQ's </h2>
                    </div> 
                </div>
            </td>
            <td valign="top" id="col-2">
                <div id="nugget2" align="center" style="height: 459px;">
                    <h2 class="menutitle"> Contacts </h2>
                </div>
            </td>                                    
            <td valign="top" id="col-3">
                <div id="nugget3" align="center" style="height: 459px;">
                    <h2 class="menutitle"> Calendar </h2>
                    <ul class="vertmenu">  
                        <li>
                            <a href="http://www.youtube.com/watch?v=5F5v1EYaSTA"> Shared Calendars </a>
                        </li>
                </div>
            </td>
            <td valign="top" id="col-4">
                <div id="nugget4" align="center" style="height: 459px;">
                    <h2 class="menutitle"> Mail </h2>
                </div>
            </td>
        </tr>
    </tbody> 
```

中的任何属性都`<colgroup>`将应用于该组中的所有列。如果您想对任何单独的列进行特定的样式设置，您可以`<col>`在每个列中添加标签`<colgroup>`来定义它们。您还可以`<colgroup>`将标签相互嵌套。

# jboss - 如何检查和设置 JBoss 5 的 URL 和端口号？

> ID：15206859
> 
> 赞同：0
> 
> 时间：2013-03-04T17:00:15.187
> 
> 标签：jboss

如何检查和设置 JBoss 5 的 URL 和端口号？我在尝试使用的 zip 文件中有一个现有的 JBoss 安装。如何找出我需要在浏览器中输入的 URL 和端口号才能在浏览器运行时访问它？我将如何修改此设置以更改 URL 和端口号？

我在 Windows 7 中运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:38:33.820

我通过在文件 /jboss.5.1.0.ga/server/default/jbossweb.sar/server.xml 中找到 HTTP 连接器已被注释掉，因此它使用 AJP 连接器解决了我的问题。我启用了 HTTP 连接器，并且能够使用标准`http://localhost:8080`地址连接到 jboss。我相信您可以在同一区域更改端口号和 URL。

# linq - 如何使用 LINQ 在 Where 子句中使用 NHibernate 子查询？

> ID：15206860
> 
> 赞同：0
> 
> 时间：2013-03-04T17:00:17.673
> 
> 标签：linq, nhibernate, linq-to-nhibernate

我正在尝试在 where 子句中编写一个相关的子查询，如下所示：

```
var foo = from d in session.Query<Document>()
          where true == 
              ( from a in session.Query<ACLEntry>()
                where a.Id == d.Id || a.Id == null
                select a.Result
              ).FirstOrDefault()
          select d; 
```

[预期的 SQL 输出与SO 上未回答的问题](https://stackoverflow.com/questions/6220744/nhibernate-3-2-linq-with-correlated-subquery)非常相似。

我认为 Linq 语句本身很好，因为我可以让它在我进行原型设计的 LinqPad 中运行。但是 NHibernate 向我抛出了这些神秘的错误：

> 错误 NHibernate.Hql.Parser [(null)] - NoViableAltException(86@[])
> 
> 错误 NHibernate.Hql.Parser [(null)] - MismatchedTreeNodeException(72!=3)

这是 NHibernate LINQ 提供程序不受支持的场景吗？关于我如何能够重组此查询以解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:02:07.863

它可能在解析`true == ...`查询部分时遇到了一些问题。

可能想试试这个，

```
var foo = from d in session.Query<Document>()
    where (from a in session.Query<ACLEntry>()
           where a.Id == d.Id || a.Id == null
           select a.Result
          ).FirstOrDefault()
    select d; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:07:03.623

试试这个：

```
var foo = from d in session.Query<Document>()
          where (from a in session.Query<ACLEntry>()
                  where a.Id == d.Id || a.Id == null
                  select a.Result
                 ).FirstOrDefault() != null
          select d; 
```

希望这会有所帮助！

# javascript - 在标记边界数组上居中地图 [传单]

> ID：15206863
> 
> 赞同：0
> 
> 时间：2013-03-04T17:00:19.070
> 
> 标签：javascript, jquery, leaflet

我正在使用 Leaflet 来标记一系列标记。我正在使用 MarkerCluster 插件来创建集群。我现在正在做的是将地图视图设置为数组的第一个点。我想做的是将地图居中，以便用户在地图加载时可以看到所有点/集群。

我的数组看起来像`m = [L.Marker, L.Marker,...]`. 我将每个添加到我的集群组中，例如：

```
var markers = L.MarkerClusterGroup();
for(var i = 0; i < m.length; i++){
     markers.addLayer(m[i]);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T17:27:17.717

嗯，这很容易，我只需要多读一些。您所要做的就是`var bounds = markers.getBounds();`然后就`map.fitBounds(bounds);`完成了。

# facebook - 使用来自受信任 IP 地址的 FB API 的 Web 应用程序 - 安全挑战

> ID：15206864
> 
> 赞同：0
> 
> 时间：2013-03-04T17:00:30.177
> 
> 标签：facebook, security

我搜索了“公共 IP”并阅读了所有显示的文章。我有一个无法通过搜索回答的问题。

我们在一个国家景点安装的十几个信息亭上运行了一个 Web 应用程序。当用户想要将他们的个人照片（由我们的系统拍摄）发布到 FB 时，会调用 FB API。我们不允许用户以任何方式增加帖子，只能登录。

有什么方法可以将物理地址或 IP 地址注册为“受信任”，以便该景点的访客用户的持续流动不会遇到“未知 IP 地址”安全实例？我们允许客人持续向 FB 发布数以万计的照片。这一安全障碍导致 50% 的用户放弃在 FB 上发帖的努力。

我们有三年的历史，在相同的位置运行相同的硬件，运行在数百万想要发布到 FB 的访问者中。以某种方式解决这个安全障碍将使FB的帖子数量增加一倍。谢谢你。麦克风

# oracle-adf - 为什么绑定和数据控件之间有一个可执行文件，而不是两者之间的直接连接？

> ID：15206865
> 
> 赞同：1
> 
> 时间：2013-03-04T17:00:30.533
> 
> 标签：oracle-adf

在 ADF 中，为什么我们需要在绑定和数据控件之间有一个可执行文件。假设我有一个由 datacontrol(DC) 公开的分层数据模型。为什么我们不能直接与 DC 进行分层绑定，而不是通过一个名为 的额外层`executable`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:28:00.890

executable contains the declarations for iterators, variables, etc and bindings refers to those declarations in more than one binding. This is the modularization designed by Oracle. Just a design approach.

# c# - C#VS2008在记事本中打开file.exe时如何隐藏字符串值？

> ID：15206870
> 
> 赞同：3
> 
> 时间：2013-03-04T17:00:47.353
> 
> 标签：c#, visual-studio-2008

当在记事本中打开已编译的 .exe 文件时，所有字符串值都以纯文本形式显示，每个字母之间有一个空格，但任何人都可以轻松阅读。这不仅适用于字符串对象，也适用于任何在引号内包含数据的对象。我目前保护这些数据的方法是为可见值放置一个加密字符串，并在使用时对其进行解密。但是，这仍然会使加密文本及其解密密钥在记事本中可见，从而使其成为具有持久性的攻击者的漏洞。

有没有更好的方法来隐藏这些数据？如何使 .exe 文件在记事本中打开时没有或非常有限的可读文本？

# java - @Secured 函数获取授权用户的访问被拒绝

> ID：15206872
> 
> 赞同：6
> 
> 时间：2013-03-04T17:00:52.033
> 
> 标签：java, spring, spring-security

我已经跟踪了很多线程来为我的 rest API 实现 Spring Security。最初我被@Secured注释被忽略，现在我已经解决了，我被困在被拒绝访问。

感觉我的问题听起来非常类似于：[@secured with grant authoritys throws access denied exceptions](https://stackoverflow.com/questions/9302770/secured-with-granted-authorities-throws-access-denied-exception) - 但我仍然被拒绝访问。

这是我的设置：

**弹簧安全.xml**

```
<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder ref="passwordEncoder" />
    </authentication-provider>
</authentication-manager>

<beans:bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.PlaintextPasswordEncoder"/>

<user-service id="userDetailsService">
    <user name="john" password="john1" authorities="ROLE_USER, ROLE_ADMIN" />
    <user name="jane" password="jane1" authorities="ROLE_USER" />
    <user name="apiuser" password="apiuser" authorities="PERMISSION_TEST" />
</user-service> 
```

**控制器**：

```
@Controller
@RequestMapping("/secure")
public class SecureController
{
    private static final Logger logger = Logger.getLogger(SecureController.class);

    @Secured("PERMISSION_TEST")
    @RequestMapping(value = "/makeRequest", method = RequestMethod.GET)
    @ResponseBody
    public SimpleDTO executeSecureCall()
    {
        logger.debug("[executeSecureCall] Received request to a secure method");

        SimpleDTO dto = new SimpleDTO();
        dto.setStringVariable("You are authorized!");

        return dto;
    }

} 
```

现在 -**没有**适当的

```
<security:global-method-security secured-annotations="enabled"/> 
```

我的请求通过了（这是因为 @Secured 注释被忽略了）。当我将它放入并使用“apiuser”/“apiuser”访问它时，我一直被拒绝访问，调试日志：

```
11:42:43,899 [http-apr-8080-exec-4] DEBUG MethodSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@cc12af5d: Principal: org.springframework.security.core.userdetails.User@d059c8e5: Username: apiuser; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: PERMISSION_TEST; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: PERMISSION_TEST

11:42:43,899 [http-apr-8080-exec-4] DEBUG AffirmativeBased - Voter: org.springframework.security.access.vote.RoleVoter@2a9a42ef, returned: 0
11:42:43,900 [http-apr-8080-exec-4] DEBUG AffirmativeBased - Voter: org.springframework.security.access.vote.AuthenticatedVoter@75a06ec2, returned: 0

11:42:43,902 [http-apr-8080-exec-4] DEBUG AnnotationMethodHandlerExceptionResolver - Resolving exception from handler [com.test.webapp.spring.controller.SecureController@342d150f]: org.springframework.security.access.AccessDeniedException: Access is denied
11:42:43,905 [http-apr-8080-exec-4] DEBUG ResponseStatusExceptionResolver - Resolving exception from handler [com.test.webapp.spring.controller.SecureController@342d150f]: org.springframework.security.access.AccessDeniedException: Access is denied
11:42:43,906 [http-apr-8080-exec-4] DEBUG DefaultHandlerExceptionResolver - Resolving exception from handler [com.test.webapp.spring.controller.SecureController@342d150f]: org.springframework.security.access.AccessDeniedException: Access is denied
11:42:43,909 [http-apr-8080-exec-4] DEBUG DispatcherServlet - Could not complete request
org.springframework.security.access.AccessDeniedException: Access is denied 
```

想法？

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-04T17:06:58.973

我记得`@Secured`注释仅适用 `ROLE_`于默认开始的角色名称。

您可以切换到`@PreAuthorize("hasAuthority('PERMISSION_TEST')")`（使用`pre-post-annotations="enabled"`）或重命名您的角色。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T18:10:22.273

我想在 Michail Nikolaev 的回答中添加更多内容。我的回答是从源代码的角度。我希望您了解访问被拒绝的原因。

从文档：

> 当您使用命名空间配置时，会自动为您注册一个默认的 AccessDecisionManager 实例，并将用于根据您在拦截 URL 和保护切入点声明中指定的访问属性为方法调用和 Web URL 访问做出访问决策（如果您使用注释安全方法，则在注释中）。**默认策略是使用带有 RoleVoter 和 AuthenticatedVoter 的 AffirmativeBased AccessDecisionManager。**

`RoleVoter`使用`ROLE_`前缀（默认）来决定它是否可以投票。您可以使用方法更改该默认前缀`RoleVoter.setRolePrefix()`。

从源代码：

```
public class RoleVoter implements AccessDecisionVoter<Object> {

(...)

private String rolePrefix = "ROLE_";

(...)

public void setRolePrefix(String rolePrefix) {

   this.rolePrefix = rolePrefix;

}

(...)

public boolean supports(ConfigAttribute attribute) {

   if ((attribute.getAttribute() != null) &&
              attribute.getAttribute().startsWith(getRolePrefix())) {
       return true;
   } else {
       return false;
   }
}

(...)

public int vote(Authentication authentication, Object object, 
                       Collection<ConfigAttribute> attributes) {
    int result = ACCESS_ABSTAIN;
    Collection<? extends GrantedAuthority> authorities = 
                                            extractAuthorities(authentication);

    for (ConfigAttribute attribute : attributes) {
        if (this.supports(attribute)) {
            result = ACCESS_DENIED;

            // Attempt to find a matching granted authority
            for (GrantedAuthority authority : authorities) {
                if (attribute.getAttribute().equals(authority.getAuthority())) {
                    return ACCESS_GRANTED;
                }
            }
        }
    }

    return result;
} 
```

`PERMISSION_TEST`没有开始，`ROLE_`所以`RoleVoter`放弃决定。`AuthenticatedVoter`也弃权（因为您没有在注释中使用`IS_AUTHENTICATED_`前缀）。`@Secured`

最后，由于双方都投了弃权票，因此`AffirmativeBased`执行了`AccessDecisionManager`throws 。`AccessDeniedException``AccessDecisionVoters`

Java 文档`AffirmativeBased`：

> org.springframework.security.access.AccessDecisionManager 的简单具体实现，如果任何 AccessDecisionVoter 返回肯定响应，则授予访问权限。

# ios - 导航完成的项目不起作用

> ID：15206878
> 
> 赞同：0
> 
> 时间：2013-03-04T17:01:12.177
> 
> 标签：ios, objective-c, xcode

在我的视图控制器（最后一个表视图控制器）的顶视图中有一个添加导航项。我从对象库中添加了一个视图控制器对象，我 ctrl + 从加号按钮拖动到视图控制器。我尝试了该应用程序，它运行良好，但当我到达最后一个控制器时，我无法返回到前一个控制器。由于最后一个控制器（通过 segue）连接到加号按钮，我不能在顶部有导航栏。所以我添加了一个并添加了一个导航项，称为完成。我在具有以下代码的最后一个控制器子类的类中创建了一个 IBAction 方法：

`[self.navigationController popNavigationControllerAnimated:YES];`

但是，当我运行应用程序并按下完成按钮返回时，它不起作用，尽管我觉得我所做的完全合法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:04:39.033

您是否创建了条形按钮项并分配了它的“选择器”回调？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:24:17.280

如果您将最终的视图控制器设置为 Push segue，您仍然会拥有带有后退按钮的导航栏。这是有道理的，因为您要添加一条需要模式视图的记录。

您可以使用以下代码关闭当前模式视图：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

通常，您应该使用委托并将其从呈现视图控制器中解除。但是，如果您使用故事板、segues 和 ARC，我认为解雇自己是很好的。

# sql-server - 可搜索的文本在 2 个表中，如何设计全文索引？

> ID：15206885
> 
> 赞同：4
> 
> 时间：2013-03-04T17:01:37.833
> 
> 标签：sql-server, sql-server-2005, full-text-search

在论坛应用程序中，线程的实际名称存储在一个表中，然后回复存储在另一个表中。

```
Table_Thread 
 Subject varchar(255) e.g. "How to setup fulltext search"

Table_Replies (users replies here)
  ReplyText text(not null) 
```

现在我想在主题和回复列上创建一个全文搜索，但它们看起来非常相关，所以它们应该在同一个索引中。

是否有可能做到这一点？

我正在使用 sql server 2005。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T22:57:39.377

假设主题和回复之间存在关联，您可以创建一个视图`WITH SCHEMABINDING`，在该视图上创建一个`UNIQUE CLUSTERED`索引，然后将该视图添加到您的全文目录中，选择您想要包含的两列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:11:43.923

当巨大的并发查询请求到来时，RDBMS 无法通过 SQL 承担。此外，select SQL 对全文搜索的支持很差。因此，您需要 IR（信息检索）库，例如用于 java 的 Lucene。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:58:31.093

您可以创建一个索引视图，其中包含两个索引列的联合 + 表的 PK

例如

```
CREATE VIEW SearchText
WITH SCHEMABINDING
AS SELECT * FROM (
(Subject as Text, Table_Thread_ID as ID, 1 as Type FROM Table_Thread)
UNION ALL
(ReplyText as Text, Table_Replies_ID as ID, 2 as Type FROM Table_Replies)); 
```

我将类型 1 和 2 设置为任意类型，因为您需要一个唯一键来构建全文索引。然后在 (ID, Type) 上创建唯一索引，最后创建全文索引。

```
CREATE UNIQUE INDEX SearchText_UK ON SearchText (ID, Type);
CREATE FULLTEXT CATALOG ft AS DEFAULT;
CREATE FULLTEXT INDEX ON SearchText(Text) 
   KEY INDEX SearchText_UK 
   WITH STOPLIST = SYSTEM; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:43:40.110

我已经看到 NopCommerce（C# MVC 开源电子商务）在“产品”和“变体”上使用全文搜索做了什么，并且只返回“产品”。这与您的情况非常相似，因为您想搜索“线程”和“回复”，但显然您只想返回“线程”。我已将其更改为使用线程并为您回复：

首先，创建一个按表生成索引名称的函数（可选）：

```
CREATE FUNCTION [dbo].[nop_getprimarykey_indexname]
(
    @table_name nvarchar(1000) = null
)
RETURNS nvarchar(1000)
AS
BEGIN
    DECLARE @index_name nvarchar(1000)

    SELECT @index_name = i.name
    FROM sys.tables AS tbl
    INNER JOIN sys.indexes AS i ON (i.index_id > 0 and i.is_hypothetical = 0) AND (i.object_id=tbl.object_id)
    WHERE (i.is_unique=1 and i.is_disabled=0) and (tbl.name=@table_name)

    RETURN @index_name
END
GO 
```

然后，通过创建目录和索引来启用全文：

```
EXEC('
IF NOT EXISTS (SELECT 1 FROM sys.fulltext_catalogs WHERE [name] = ''myFullTextCatalog'')
    CREATE FULLTEXT CATALOG [myFullTextCatalog] AS DEFAULT')

DECLARE @create_index_text nvarchar(4000)
SET @create_index_text = '
IF NOT EXISTS (SELECT 1 FROM sys.fulltext_indexes WHERE object_id = object_id(''[Table_Thread]''))
    CREATE FULLTEXT INDEX ON [Table_Thread]([Subject])
    KEY INDEX [' + dbo.[nop_getprimarykey_indexname] ('Table_Thread') +  '] ON [myFullTextCatalog] WITH CHANGE_TRACKING AUTO'
EXEC(@create_index_text)

SET @create_index_text = '
IF NOT EXISTS (SELECT 1 FROM sys.fulltext_indexes WHERE object_id = object_id(''[Table_Replies]''))
    CREATE FULLTEXT INDEX ON [Table_Replies]([ReplyText])
    KEY INDEX [' + dbo.[nop_getprimarykey_indexname] ('Table_Replies') +  '] ON [myFullTextCatalog] WITH CHANGE_TRACKING AUTO'
EXEC(@create_index_text) 
```

然后，在通过关键字获取产品的存储过程中，构建一个临时表，其中包含与关键字匹配的产品 Id 列表。

```
 INSERT INTO #KeywordThreads ([ThreadId])
    SELECT t.Id
    FROM Table_Thread t with (NOLOCK)
    WHERE CONTAINS(t.[Subject], @Keywords)

    UNION
    SELECT r.ThreadId
    FROM Table_Replies r with (NOLOCK)
    WHERE CONTAINS(pv.[ReplyText], @Keywords) 
```

现在您可以使用临时表`#KeywordThreads`加入线程列表并返回它们。

我希望这有帮助。

# configure - Thinkaurelius Titan 配置 BerkeleyDB

> ID：15206887
> 
> 赞同：2
> 
> 时间：2013-03-04T17:01:45.570
> 
> 标签：configure, berkeley-db, graph-databases, titan

我正在尝试使用以下方法创建 Thinkaurelius Titan 数据存储：

```
TitanGraph graph = TitanFactory.open("/tmp/graph") 
```

该文档可以在[https://github.com/thinkaurelius/titan/wiki/Using-BerkeleyDB](https://github.com/thinkaurelius/titan/wiki/Using-BerkeleyDB)找到 但是每次我打开图表时都会创建一个新的数据存储。我什至尝试使用配置对象，但没有帮助。有没有人在这方面工作过？我想创建一个应该可重用的 Titan 数据存储，即它不应该在我每次打开它时都创建一个新的数据存储。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:31:04.693

听起来更改没有提交到数据库。更多地了解事务是如何工作的。

[https://github.com/thinkaurelius/titan/wiki/Transaction-Handling](https://github.com/thinkaurelius/titan/wiki/Transaction-Handling)

# java - 构造函数中的 super()

> ID：15206890
> 
> 赞同：30
> 
> 时间：2013-03-04T17:01:52.340
> 
> 标签：java, constructor, super

我正在阅读一些代码。在构造函数中它有 super() 但该类实现了当然没有构造函数的接口。那么它指的是哪个 super() 呢？

```
public class BoundingBox implements IBoundingVolume {

public BoundingBox() {
        super();
        mTransformedMin = new Number3D();
        mTransformedMax = new Number3D();
        mTmpMin = new Number3D();
        mTmpMax = new Number3D();
        mPoints = new Number3D[8];
        mTmp = new Number3D[8];
        mMin = new Number3D();
        mMax = new Number3D();
        for(int i=0; i<8; ++i) {
            mPoints[i] = new Number3D();
            mTmp[i] = new Number3D();
        }
}

public interface IBoundingVolume {
    public void calculateBounds(Geometry3D geometry);
    public void drawBoundingVolume(Camera camera, float[] projMatrix, float[] vMatrix, float[] mMatrix);
    public void transform(float[] matrix);
    public boolean intersectsWith(IBoundingVolume boundingVolume);
    public BaseObject3D getVisual();
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-04T17:02:42.477

`super()`指的是扩展的`class`（不是实现的接口）。在这种情况下是`Object`

所以它会调用构造函数`Object`（什么都不做）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-19T12:28:37.870

Super 是指扩展类。默认情况下，它是 Object 类。Object 中的构造函数什么都不做。换句话说，您可以删除此行，因为它不是必需的。

另请注意 Oracle 对此主题的看法：

> 如果构造函数没有显式调用超类构造函数，Java 编译器会自动插入对超类的无参数构造函数的调用。如果超类没有无参数构造函数，则会出现编译时错误。Object 确实有这样的构造函数，所以如果 Object 是唯一的超类，则没有问题。

来源：[http ://docs.oracle.com/javase/tutorial/java/IandI/super.html](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T17:09:43.300

`super`调用扩展类的构造函数。Java 中的所有类都派生自`Object`. 此外，如果类的作者没有为该类创建构造函数，则会创建一个不执行任何操作的默认构造函数。

在您的情况下，`super`正在调用`Object`.

如果你想了解更多`Object`，可以阅读`Object.java` [这里](http://www.docjar.com/html/api/java/lang/Object.java.html)的源代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-06-09T10:38:15.393

现在让我告诉你我们在这里使用 super() 的真正原因是如果我们想直接调用超类构造函数。当我们调用构造函数时，可能会在层次结构中调用许多构造函数，因此我们可以使用 super() 来消除这种情况。在测试用例期间，您可能会处理“除了问题陈述中要求的以外，不要提供任何其他构造函数”，因此，解决方案是在构造函数中使用 Super()。

# google-analytics - 为外部点击创建 dataLayer 自定义事件

> ID：15206894
> 
> 赞同：0
> 
> 时间：2013-03-04T17:02:07.113
> 
> 标签：google-analytics, google-tag-manager

我希望在任何时候单击任何外部链接时创建一个 dataLayer 推送事件 - 我计划将其用作触发 GTM 标记以进行外部链接跟踪的触发器。我设想它会是这样的：

```
<script>
Some code to detect clicks on any external links
dataLayer.push({'event': 'eventNameXYZ'});
</script 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:06:56.010

一个示例函数：

```
function pushToDataLayer() {
    var links = document.getElementsByTagName('a');
    for(var i=0,cnt=links.length;i<cnt;i++) {       
        var current = links[i];
        current.onclick = function() {
              dataLayer.push({
                'href': current.href, 
                'event': 'outbound' // event to trigger a rule in the tag manager
            });
        }
    }   
} 
```

（如果你使用 jQuery 或类似的东西，这会容易得多）。这会将点击事件附加到所有链接。单击会将带有单击的 href 的事件和变量推送到 dataLayer。

在跟踪代码管理器中，您需要创建一个在自定义事件“出站”上触发代码的新规则，以及一个捕获“href”数据层变量的 dataLayer 类型的宏。您可以在代码中使用此变量（例如，使用 GA 虚拟“网页浏览”）并使用规则“触发事件“出站”来触发代码。

该代码可能不适用于所有浏览器，并且是对原理的演示，而不是生产代码（此外，它将捕获所有链接，您需要测试建议出站链接的绝对 url 或域名或 css 类名）。我建议使用 jQuery 来查找链接和附加事件。

# google-analytics - 使用 Google Analytics 时如何调试？

> ID：15206895
> 
> 赞同：0
> 
> 时间：2013-03-04T17:02:07.383
> 
> 标签：google-analytics

我正在为 Chrome 使用[Google Analytics 调试器工具](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)。

实际上，我想要查看是否正在发出请求，然后在 Google Analytics 中查看我的自定义变量，我是在盲目编码。

我正在本地主机中尝试这个：

```
_gaq.push(['_setCustomVar', 1, 'city', 'delhi', 3]);
_gaq.push processing "_setCustomVar" for args: "[1,city,delhi,3]":  ga_debug.js:18
0

_gaq.push(['_trackPageview']);
_gaq.push processing "_trackPageview" for args: "[]":  ga_debug.js:18
Track Pageview ga_debug.js:18
Tracking beacon sent! 
```

在设置和发送变量之前，我也尝试过这个：

```
_gaq.push(['_setDomainName', 'none']);
_gaq.push processing "_setDomainName" for args: "[none]":  ga_debug.js:18
0 
```

但是在我的帐户页面中没有看到任何自定义变量的那一刻，它们需要时间吗？，多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:08:58.337

您应该将一个数组传递给`_gaq.push`-您的示例中缺少`[]`s

```
_gaq.push(['_setCustomVar', 1, 'city', 'delhi', 3]); 
```

# unity3d - Unity3D Resource.LoadAll 将类型添加到统一

> ID：15206899
> 
> 赞同：0
> 
> 时间：2013-03-04T17:02:13.410
> 
> 标签：unity3d

我试图找到一种方法让统一将我的 .ai 文件视为文本文件，以便 Resource.Load 和 LoadAll 将加载它们。我可以进行配置更改以允许这样做吗？现在它完全跳过 .ai 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:35:57.073

我们发现直接解决方案是不可能的，或者似乎没有人知道。为了解决这个问题，我们发现unity中有另一个文件夹允许添加资源并且它没有被压缩或损坏，并且可以枚举。

使用流媒体资产，问题就消失了。

# jquery-mobile - 切换标题 Jquery Mobile 时按钮浮动

> ID：15206900
> 
> 赞同：1
> 
> 时间：2013-03-04T17:02:16.993
> 
> 标签：jquery-mobile

我正在尝试在标题右侧添加一个主页按钮。我还在标题后面隐藏了一个工具栏。现在，当向标题添加主页按钮时，切换时它不会固定在标题上。

```
 <div data-role="header">
        <div data-role="navbar">
            <ul>
                <li><a href="a.html">Settings</a>

                </li>
                <li><a href="b.html">Whatever</a>

                </li>
            </ul>
        </div>
        <!-- /navbar -->
         <h1>Hide the Toolbar</h1>
         <a href="#Home" data-role="button" data-icon="home" data-iconshadow="false"
        data-direction="reverse" onclick="empty()" data-transition="slide"
        data-iconpos="notext"  class="ui-btn-right">home</a>
    </div>
    <!-- /header -->

$(document).bind('pageinit', function (event) {

    loadHomePage();

    $("#HomeHeader").on("click", function () {
        $("#navMainToolbar").slideToggle(200);
    });

    $("#navMainToolbar").on("click", function (e) {
        e.stopPropagation();
    });

}); 
```

这是该问题的[演示](http://jsfiddle.net/DMUwp/9/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:07:57.330

您需要将导航栏移到标题之外：

```
<div data-role="page">
    <div data-role="navbar">
        <ul>
            <li><a href="a.html">Settings</a>

            </li>
            <li><a href="b.html">Whatever</a>

            </li>
        </ul>
    </div>
    <!-- /navbar -->
    <div data-role="header">
         <h1>Hide the Toolbar</h1>
 <a href="#Home" data-role="button" data-icon="home" data-iconshadow="false"
        data-direction="reverse" onclick="empty()" data-transition="slide" data-iconpos="notext"
        class="ui-btn-right">home</a>

    </div>
    <!-- /header -->
    <div data-role="content">
        <p>Page content goes here.</p>
    </div>
    <!-- /content -->
    <div data-role="footer">
            <h4>Page Footer</h4>

    </div>
    <!-- /footer -->
</div>
<!-- /page --> 
```

例子：

*   [http://jsfiddle.net/DMUwp/11/](http://jsfiddle.net/DMUwp/11/)

# javascript - 用javascript获取标签

> ID：15206901
> 
> 赞同：0
> 
> 时间：2013-03-04T17:02:20.743
> 
> 标签：javascript, ruby-on-rails, label

我有一个嵌套表单，我想在上面应用一些 Javascript：

```
<label for="order_payments_attributes_1362416152585_Date :">Date :</label>
<input id="order_payments_attributes_1362416152585_date" type="text" size="7" name="order[payments_attributes][1362416152585][date]"> 
```

由于我无法添加静态 id（因为它是嵌套形式，所以 id 是动态的），我如何获取标签并使用 javascript 隐藏它？我可以用它的ID而不是标签来改变输入......

感谢您的帮助，从今天早上开始，我正在努力完成这一点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:05:23.350

如果您可以`input`通过它的 id 来定位，那么定位标签应该是可能的，因为它的`for`属性应该与输入的 id 匹配。

使用 jQuery，您可以像这样匹配它：

```
$('label[for=order_payments_attributes_1362416152585_date]') 
```

并隐藏它你可以简单地调用`.hide()`上面的选择器

```
$('label[for=order_payments_attributes_1362416152585_date]').hide(); 
```

生成字段/标签时，您似乎做错了什么，因为您的标签`for`属性不应显示为`order_payments_attributes_1362416152585_Date :`. 在这里，这`Date :`部分看起来是错误的。

# nosql - Cassandra：CL != ALL on write 会使集群过载

> ID：15206904
> 
> 赞同：0
> 
> 时间：2013-03-04T17:02:31.340
> 
> 标签：nosql, cassandra, replication, performance-testing

我正在使用 Cassandra 运行一系列基准测试。其中，我尝试了以下配置：1 个客户端节点，3 个服务器节点（同一个环）。所有实验都在清理服务器后运行：

```
pkill -9 java; sleep 2; rm -r /var/lib/cassandra/*; ./apache-cassandra-1.2.2/bin/cassandra -f 
```

然后我`cassandra-stress`从客户端节点运行（*3个副本*，一致性ANY/ALL）：

```
[stop/clean/start servers]
./tools/bin/cassandra-stress -o INSERT -d server1,server2,server3 -l 3 -e ANY
[224 seconds]
[stop/clean/start servers]
./tools/bin/cassandra-stress -o INSERT -d server1,server2,server3 -l 3 -e ALL
[368 seconds] 
```

人们会推断降低一致性级别会提高性能。但是，没有理由发生这种情况。瓶颈是服务器上的 CPU，它们**最终**都必须进行**本地写入**。事实上，仔细阅读服务器日志会发现已经发生了暗示的切换。重复这个实验，我有时会在客户端收到 UnavailableException，在服务器上收到“MUTATION messages dropped”。

此问题是否记录在案？CL != ALL 是否应该被认为对写入有害？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:59:23.843

我不太确定你的意思是什么。事情似乎按设计工作。

是的，如果您在 CL.ONE 写入，它将比在 CL.ALL 更快地完成写入 - 因为它只需要从一个节点获取 ACK - 而不是所有节点。

但是，您没有测量修复数据所需的时间。您将花时间排队和处理提示的切换 - 但是，节点只能等待一个小时。

最终，您必须运行 a`nodetool repair`来纠正一致性并删除墓碑。

# c++ - 用代码覆盖/隐藏/继承问题？

> ID：15206908
> 
> 赞同：-1
> 
> 时间：2013-03-04T17:02:34.090
> 
> 标签：c++, polymorphism, overriding

使用下面的代码，我有以下关于隐藏/覆盖的问题：

1) 如果我用 p 调用 DoStuff，将调用哪个 DoStuff 实现？

2) 如果我从 Drive 的 Prius 实现中删除“virtual”关键字，DoStuff(p) 是否仍然有效？

3) 同上，除了 DoStuff(t)？

4) 更改`Car* c`为`Toyota *t`

（欢迎任何不针对上述问题的一般性建议）

```
class Car
{
public:
    virtual void Drive();
};

class Toyota : public Car
{
public:
    virtual void Drive();
};

class Prius : public Toyota
{
public:
    virtual void Drive();
};

void DoStuff(Car* c)
{
    c->Drive();
}

int main()
{
    Car* c = new Car();
    Toyota* t = new Toyota();
    Prius* p = new Prius();

    DoStuff(c);
    DoStuff(t);
    DoStuff(p);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:16:27.670

> 1) 如果我用 p 调用 DoStuff，将调用哪个 DoStuff 实现？

[自己看看](http://ideone.com/a3ta3p)（我也修复了你的代码）

> 2) 如果我从 Drive 的 Prius 实现中删除“virtual”关键字，DoStuff(p) 是否仍然有效？

[一次是虚拟的，总是虚拟](http://ideone.com/Lo5G5R)的（也就是说，如果基类将函数声明为`virtual`，它总是`virtual`在派生类中，无论它们是否声明`virtual`）

> 3) 同上，除了 DoStuff(t)？

看上面。

> 4) 更改`Car* c`为`Toyota *t`

我将猜测我已经链接到回答这个问题的例子（希望，因为我不确定这个问题在问什么）。

> 5) 如果我`virtual`从中删除`Car`怎么办？

你没有问这个问题，但我希望你问过。前面的所有示例都必须处理覆盖。[如果你这样做，那么你会得到功能隐藏](http://ideone.com/h2fs2I)。[即使派生类说`virtual`，如果基类没有你得到函数隐藏](http://ideone.com/QbLWKv)。

# r - 用行索引替换矩阵中的行值

> ID：15206912
> 
> 赞同：3
> 
> 时间：2013-03-04T17:02:43.747
> 
> 标签：r, matrix, indexing, row

`[[0,0,0,1],[0,1,0,1],[1,0,0,0],[0,0,1,1]]`我使用表示栅格的 r 矩阵（例如）。我想用它的行索引值替换除 0 之外的每个值。有没有类似的东西

```
matrix[matrix==1] <- row_index 
```

这样我的结果会是什么样子`[[0,0,0,1],[0,2,0,2],[3,0,0,0],[0,0,4,4]]`？

我在 Mac (10.7.5) 和 RPY2 2.2.6 上使用 R 2.15.1 来启动 R-Methods。或者有没有其他方法可以为诸如等统计函数获得合理的`histogram`结果`chi_square`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T17:46:39.657

对于简洁、富有表现力的解决方案，我可能会使用这个：

```
m <- matrix(c(0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1), 
            nrow = 4, byrow = TRUE)

m[m!=0] <- row(m)[m!=0]
m
#      [,1] [,2] [,3] [,4]
# [1,]    0    0    0    1
# [2,]    0    2    0    2
# [3,]    3    0    0    0
# [4,]    0    0    4    4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T17:16:03.593

希望所有的地狱都不会因为建议一个 for 循环而崩溃，但我们会看到：

这是你的矩阵

```
mymat <- matrix(c(0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1), 
                nrow = 4, byrow = TRUE)
mymat
#      [,1] [,2] [,3] [,4]
# [1,]    0    0    0    1
# [2,]    0    1    0    1
# [3,]    1    0    0    0
# [4,]    0    0    1    1 
```

这是一个 for 循环，它使用基本子集来识别要替换的案例。

```
for (i in 1:nrow(mymat)) {
  mymat[i, ][mymat[i, ] != 0] <- i
} 
```

这是结果。

```
mymat
#      [,1] [,2] [,3] [,4]
# [1,]    0    0    0    1
# [2,]    0    2    0    2
# [3,]    3    0    0    0
# [4,]    0    0    4    4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T02:55:39.050

也许我错过了你问题的重点，但是怎么样

```
> m <- matrix(c(0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1),
+             nrow = 4, byrow = TRUE)
> m * 1:nrow(m)
     [,1] [,2] [,3] [,4]
[1,]    0    0    0    1
[2,]    0    2    0    2
[3,]    3    0    0    0
[4,]    0    0    4    4
> 
```

（ETA：R 按列填充矩阵，逐项乘积运算符通过逐列复制它们直到它们适合，从而使所涉及的两个矩阵一致。这里的 * 运算符最终将每个项乘以它所属的行。）

# c++ - 最大连续子数组（元素数量最多）

> ID：15206914
> 
> 赞同：4
> 
> 时间：2013-03-04T17:02:45.620
> 
> 标签：c++, c, algorithm, math

给定一个自然数数组和另一个自然数T，如何找到总和小于或等于T但该子数组中元素个数最大化的连续子数组？

例如，如果给定的数组是：

`{3, 1, 2, 1, 1}`和`T = 5`。那么最大连续子数组是`{1, 2, 1, 1}`因为它将包含 5 个元素并且总和等于 5。

另一个例子：`{10,1,1,1,1,3,6,7}`用`T = 8`. 那么最大连续子数组是`${1,1,1,1,3}$`

我可以通过`O(n^2)`手术做到这一点。但是我正在为这个问题寻找一个线性时间解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:12:31.717

应该可以用 O(n) 做到这一点。我没有对此进行测试，但它看起来不错：

```
int start = 0, end = 0;
int beststart = 0, bestend = 0;
int sum = array[0];

while (end + 1 < arraysize) {
  if (array[end + 1] + sum <= T)
    sum += array[end++];
  else
    sum -= array[start++];
  if ((end - start) > (bestend - beststart)) {
    beststart = start;
    bestend = end;
  }
} 
```

因此，基本上，它沿着数组移动一个滑动窗口并记录`end - start`最大的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:07:41.420

它似乎是最大子数组问题的上限版本：[http](http://en.wikipedia.org/wiki/Maximum_subarray_problem) ://en.wikipedia.org/wiki/Maximum_subarray_problem 我想您可以从现有算法中找到灵感。

# c# - 实体框架在抽象表和派生表之间创建不需要的关系

> ID：15206916
> 
> 赞同：1
> 
> 时间：2013-03-04T17:02:48.647
> 
> 标签：c#, sql-server, database, entity-framework, abstract

首先使用代码，我有一些抽象类和一些从这些抽象类派生的类。

```
// Abstracted Classes
public abstract class Brand
{
  [Key]
  public int Id { get; set; }
  public string Name { get; set; }
}

public abstract class Model
{
  [Key]
  public int Id { get; set; }
  public string Name { get; set; }

}

// Derived Classes
[Table("ComparisonBrand")]
public class ComparisonBrand : Brand
{
  public ComparisonBrand()
  {
    ComparisonValues = new List<ComparisonValue>();
    Models = new List<ComparisonModel>();
  }

  public virtual ICollection<ComparisonValue> ComparisonValues { get; set; }
  public virtual ICollection<ComparisonModel> Models { get; set; }
}

[Table("ComparisonModel")]
public class ComparisonModel : Model
{
  public int? BrandId { get; set; }
  public int? LogoId { get; set; }

  [ForeignKey("BrandId")]
  public virtual ComparisonBrand ComparisonBrand { get; set; }
  [ForeignKey("LogoId")]
  public virtual ComparisonLogo ComparisonBrand { get; set; }

  public virtual ICollection<ComparisonValue> ComparisonValues { get; set; }
} 
```

我的问题是迁移会为以下内容生成外键：

*   比较模型.Id > 模型.Id
*   ComparisonModel.BrandId > Brands.Id
*   比较模型.品牌 ID > 比较品牌. ID

由于 ComparisonBrand.Id 是 Brands.BrandId 的 FK，因此在删除品牌记录时出现错误。但是，如果我删除了 ComparisonModel.BrandId > ComparisonBrand.Id 关系，则删除工作正常。

如何防止在抽象表和派生表（品牌和比较品牌）之间形成关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:06:42.047

您正在使用 virtual 关键字，这会导致[延迟加载](http://entityframeworktutorial.net/lazyloading-in-entity-framework.aspx)。您正在告诉 EF 通过此功能为它们生成外键。删除虚拟，您将不再创建密钥

# hibernate - catalina.out 的大小迅速增加，使用 Hibernate

> ID：15206923
> 
> 赞同：0
> 
> 时间：2013-03-04T17:03:28.147
> 
> 标签：hibernate, tomcat, log4j, tomcat7, slf4j

不知何故，我的 catalina.out 的大小正在迅速增加。

在我的应用程序运行一次后，catalina.out 为 12MB，而我的 opendata.log 为 1MB。为什么不是所有内容都写入 opendata.log？我怎样才能阻止这些文件增长如此之快？

catalina.out 和我的 opendata.log 充满了 [TRACE] 消息。

这是我的 log4j.properties：

```
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=/home/dzimmermann/apache-tomcat-7.0.37/logs/opendata.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.rootLogger=info, file

log4j.logger.org.hibernate=info, file 
```

这是我的 hibernate.cfg.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
   "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
   "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
   <session-factory>
      <property name="connection.url">jdbc:postgresql://localhost:5432/postgis/public/</property>
      <property name="connection.username"></property>
      <property name="connection.password"></property>
      <property name="connection.driver_class">org.postgresql.Driver</property>
      <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
      <property name="dialect">org.hibernate.spatial.dialect.postgis.PostgisDialect</property>
      <property name="show_sql">false</property>
      <property name="hibernate.current_session_context_class">thread</property>      
      <property name="hibernate.hbm2ddl.auto">update</property>       

      <mapping resource="Car.hbm.xml"/>
      <mapping resource="CarDetail.hbm.xml"/>
      <mapping resource="District.hbm.xml"/>
   </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:29:56.013

很可能正在使用的日志记录配置不是您认为正在使用的配置。尝试从系统属性`log4j.debug`集开始，它会告诉你正在使用什么配置文件。

# javascript - ajax 请求后 Window.location 不起作用

> ID：15206930
> 
> 赞同：2
> 
> 时间：2013-03-04T17:03:39.627
> 
> 标签：javascript, jquery, ajax

Window.location 在调用 ajax 请求时成功响应后不起作用，它调用的成功函数。

当我在调试器上逐步执行 firefox 时，window.location 它可以工作。

```
function login(){

var jason ={"usuario":document.getElementById("inputusuario").value,
        "password": document.getElementById("inputpassword").value
           };
            json =JSON.stringify(jason);

          console.log(json);

var onSuccess = function (data) {
    console.log('Success');
    window.location ='salas.html'

};
var onError = function (jqXHR, textStatus, errorThrown) {
    console.log(jqXHR);
    console.log(textStatus);
    console.log(errorThrown);
    alert("no se conecto");

};

var onBeforeSend = function () {
    console.log("Loading");
};

var jason ={"usuario":document.getElementById("inputusuario").value,
        "password": document.getElementById("inputpassword").value
           };

            json =JSON.stringify(jason);
$.ajax({

    url: "../reservaciones/index.php/login",
    type:"POST",
     data: json,
    cache: false,
    async: false,
    beforeSend: onBeforeSend,
    error: onError,
    success: onSuccess
 });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:12:10.777

我完全复制了您的代码，添加了适当的元素，并且效果很好。

这是您的代码，原样：[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/yJsLY/)]]]

试试这些：

 **1.**尝试`window.location.assign()`。众所周知，这可以解决这个问题。

 **2.**尝试运行`async: true`。从您的代码中，我看不出您为什么要运行`false`，有时这会导致时间问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T02:40:29.950

你错过了尾随的';' 在

window.location ='salas.html'

# javafx-2 - Javafx 2 通知刷新

> ID：15206932
> 
> 赞同：1
> 
> 时间：2013-03-04T17:03:49.387
> 
> 标签：javafx-2, partial-page-refresh

我在 JavaFX 2 中要求在标题上显示通知。这些通知通过外部系统填充到数据库中。

当在数据库中插入新通知时，我的 JavaFX 应用程序应该监听并刷新标题。

我可以考虑的一种解决方案是实现一个时间线，该时间线触发代码以每固定时间段检索一次最新通知状态，可能是每 2 分钟一次。

除此之外，还有其他方法可以实现吗？对此的任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:34:42.517

您可以创建一个新`Task`的监听（或检查）数据库中的更改。这`Task`将以不同的方式运行，`Thread`以免阻止您的 UI。一旦发生更改，它就可以更新您的 UI。

您的代码可能如下所示：

```
//... initialize your variables.
task = new DatabaseWatcher();
executor = Executors.newSingleThreadExecutor();
executor.execute(task); 
```

你的`DatabaseWatcher`：

```
public class DatabaseWatcher extends Task<Object> {
    public DatabaseWatcher() {
        //initialize here
    }

    @Override
    protected Object call() throws Exception {
        //Get data from database
        //if new update :
        updateUI();
        return null;
    }

    private void updateUI() {

        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                //Set your new values in your UI
                //Call the method in your UI to update values.
            }
        });
    }
} 
```

这应该让你开始走上正确的道路。

### 也可以看看

*   [带有控制器的多个 FXML，共享对象](https://stackoverflow.com/questions/12166786/multiple-fxml-with-controllers-share-object/12167932#12167932)，更具体地说是[这个答案](https://stackoverflow.com/a/12167932/686036)
*   [javafx，从另一个线程更新 ui](https://stackoverflow.com/questions/11690683/javafx-update-ui-from-another-thread)
*   [JavaFX 中的并发](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)

# python - Python 64 位，Ctypes ReadProcessMemory ERROR_PARTIAL_COPY，Windows 7 64 位

> ID：15206934
> 
> 赞同：0
> 
> 时间：2013-03-04T17:04:00.020
> 
> 标签：python, windows-7, 64-bit, readprocessmemory

我的示例基于“Gray Hat Python”一书（[http://expect-us.net/files/Gray%20Hat%20Python%20=rwt911=.pdf](http://expect-us.net/files/Gray%20Hat%20Python%20=rwt911=.pdf)）

有一个小的示例应用程序 printf_loop：

```
from ctypes import *
import time

msvcrt = cdll.msvcrt
counter = 0

while True:
    msvcrt.printf("Loop iteration %d!\n" % counter)
    time.sleep(2)
    counter += 1 
```

现在我正在尝试获取此应用程序中使用的 printf 的地址。但是我的 ReadProcessMemory 调用总是返回 ERROR_PARTIAL_COPY。

```
def read_process_memory(self, address, length):
    data = ""
    read_buff = create_string_buffer(length)
    count = c_ulong(0)
    if not kernel32.ReadProcessMemory(self.h_process, address, read_buff, length, byref(count)):
        print "[*] Error Code: 0x%08x" % kernel32.GetLastError()
        print read_buff.raw
        return False
    else:
        data += read_buff.raw
        return data 
```

我在以下函数中获取地址，其中 dll='msvcrt.dll' 和 function='printf'：

```
 def func_resolve(self, dll, function):
    handle = c_void_p()
    kernel32.GetModuleHandleExA(GET_MODULE_HANDLE_EX_FLAG_UNCHANGED_REFCOUNT, dll, byref(handle))
    address = kernel32.GetProcAddress(handle, function)
    kernel32.CloseHandle(handle)

    return address 
```

为什么我无法读取内存，您有什么建议吗？

# python - 如何使用 Regex 从数据集中删除“Sensor_”？这是示例集，["Sensor_01", "Sensor_10"}

> ID：15206942
> 
> 赞同：0
> 
> 时间：2013-03-04T17:04:17.383
> 
> 标签：python, blender-2.61

如何使用 Regex 从数据集中删除“Sensor_”？这是示例集，["Sensor_01", "Sensor_10"}

??

我在理解所有符号时遇到了一些麻烦，（阅读障碍）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:08:15.913

像这样：

```
dataset = ['Sensor_01', 'Sensor_02', 'Sensor_03']
for i in range(len(dataset)):
    dataset[i] = dataset[i].replace('Sensor_', '')
print dataset 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:06:34.920

这里不需要正则表达式，只需用任何内容替换“Sensor_”的所有实例。[这应该会有所帮助。](http://docs.python.org/2/library/string.html#string.replace)

# perl - 将 perl 脚本的所有输出定向到文件和屏幕

> ID：15206943
> 
> 赞同：1
> 
> 时间：2013-03-04T17:04:18.147
> 
> 标签：perl, logging, stdout, stderr, log4perl

我有一个使用 log4perl 将所有输出记录到屏幕和文件的 perl 脚本。问题是，某些输出没有被定向到 log4perl。

脚本 -

```
use strict;
use warnings 'FATAL' => 'all';
use Log::Log4perl;
use File::Find;

my $log_conf = "log4perl.conf";
Log::Log4perl::init($log_conf);
my $logp       = Log::Log4perl->get_logger();
my $dirSource  = 'C:\box';

sub doFileList {
    $logp->info('doing dir compare');
    find( { wanted => \&process_file, no_chdir => 1 }, $dirSource);
}

sub process_file {
    if (-f $_) {
        print "This is a file: $_\n";
    } else {
        print "This is not file: $_\n";
    }
}

#main
$logp->info('start');
eval { doFileList(); };
if ($@) {
    $logp->error( 'error: ', $@ );
}
$logp->info('stop'); 
```

Log4perl 配置 -

```
log4perl.rootLogger              = DEBUG, screen, file

log4perl.appender.screen         = Log::Log4perl::Appender::Screen
log4perl.appender.screen.stderr  = 0
log4perl.appender.screen.layout  = Log::Log4perl::Layout::PatternLayout
log4perl.appender.screen.layout.ConversionPattern = %d [%M:%L] %p  %F{2} - %m%n

log4perl.appender.file          = Log::Log4perl::Appender::File
log4perl.appender.file.filename = log/compare.log
log4perl.appender.file.mode     = append
log4perl.appender.file.layout   = Log::Log4perl::Layout::PatternLayout
log4perl.appender.file.layout.ConversionPattern = %d [%M:%L] %p  %F{2} - %m%n 
```

这是屏幕/ide上的输出-

```
2013/03/04 11:56:28 [main:::29] INFO  DirCompare\DirCompare.pl - start
2013/03/04 11:56:28 [tools::dircompare::doFileList:16] INFO  DirCompare\DirCompare.pl - doing dir compare
This is not file: C:\box
This is a file: C:\box\test01.JPG
This is a file: C:\box\test02.JPG
2013/03/04 11:56:28 [main:::34] INFO  DirCompare\DirCompare.pl - stop 
```

这是日志文件中的输出 -

```
2013/03/04 11:56:28 [main:::29] INFO  DirCompare\DirCompare.pl - start
2013/03/04 11:56:28 [tools::dircompare::doFileList:16] INFO  DirCompare\DirCompare.pl - doing dir compare
2013/03/04 11:56:28 [main:::34] INFO  DirCompare\DirCompare.pl - stop 
```

我知道我使用的是打印语句而不是 log->info，但我希望 log4perl 配置使得脚本的所有输出，无论它是如何生成的，都被定向到 log4perl。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:21:48.923

sub process_file{} 被编译为主包的一部分。你只告诉这个打印到标准输出。在下面添加另一个语句以打印到日志。所以你有两个打印语句，一个用于屏幕，一个用于日志。

IO::Tee 模块为多个文件句柄创建一个文件句柄对象，因此您可以打印到其中一个，并且包含的​​所有句柄都将接收输出。但是传入一个打开文件句柄并将其打印到同样执行此操作的文件句柄的对象可能会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:45:54.823

我使用 'IPC::Run3' 来捕获 log->info/error 无法捕获的任何命令/函数的输出。然后我将这个捕获的输出打印到 log->info/error。

澄清一下，我上面试图做的是捕获在 perl 代码中执行的命令的输出，并将该输出重定向到日志。

# unit-testing - 为什么 `DefaultNancyBoostrapper` 找不到我的 NancyModule

> ID：15206947
> 
> 赞同：8
> 
> 时间：2013-03-04T17:04:31.877
> 
> 标签：unit-testing, nancy

我只是在南希弄湿了我的脚。在 Wiki 中看到测试过程我真的很兴奋，但是当我尝试以下操作时，我一开始无法通过测试。

使用VS2010

1.  创建`Empty ASP.NET Web Application Project`：Notify.App
2.  `Install-Package Nancy.Hosting.AspNet`
3.  创建了如下所列的简单模块：NotifyModule
4.  创建`Class Library`项目：Notify.UnitTests
5.  `Install-Package Nancy.Testing`
6.  `Install-Package XUnit`
7.  创建简单的第一个测试：BaseUrlSpec.cs

使用`DefaultNancyBootstrapper`测试失败，出现`HttpStatusCode.NotFound`.

如果我将`bootstrapper`定义替换为：

```
var bootstrapper = new ConfigurableBootstrapper(
                          with => 
                             with.Module<NotifyModule>()); 
```

**然后测试通过。** 我不明白为什么使用 DefaultNancyBootstrapper 的 SDHP 不起作用？我是否做错了什么让它崩溃，或者我在理解中遗漏了细节？

* * *

*通知模块*

```
using Nancy;
public class NotifyModule : NancyModule {
    public NotifyModule() {
        Get["/"] = _ => HttpStatusCode.OK;
    }
} 
```

*基本网址规范*

```
using Nancy;
using Nancy.Testing;
using Notify.App;
using Xunit;
public class BaseUrlSpec
{
    [Fact]
    public void ShouldRespondOk()
    {
        var bootstrapper = new DefaultNancyBoostrapper();
        var app = new Browser(bootstrapper);
        var response = app.Get("/", with => with.HttpRequest());
        var statusCode = response.StatusCode;
        Assert.Equal(HttpStatusCode.OK, statusCode);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T17:54:04.753

您需要确保已加载包含您的路线的程序集。从您的程序集中引用一个类型可以确保这一点，因此使用可配置引导程序的版本可以工作。要使另一个工作，只需从您的程序集中添加对某些类型的引用。无需实例化它。

# xcode - 如何从 TableViewCell 推送新视图？

> ID：15206948
> 
> 赞同：0
> 
> 时间：2013-03-04T17:04:34.980
> 
> 标签：xcode, uitableview, pushviewcontroller, xcode4.6

在我的应用程序中，我试图从 TableViewCell 导航到新视图，但我不知道如何。你能帮助伙计们吗？我正在使用 Xcode 4.6。和.xib，没有故事板。我对编码很陌生，所以请尽可能简单地解释它！这是我尝试过的，请纠正我：

```
- (void)viewDidLoad
{
tableData = [[NSArray alloc] initWithObjects:@"aaoversikt1", @"Paul", @"George", @"Ringo", nil];
[super viewDidLoad];
UILabel *nav_title1 = [[UILabel alloc] initWithFrame:CGRectMake(60, 10, 220, 25)];
nav_title1.font = [UIFont fontWithName:@"Arial-BoldMT" size:18];
nav_title1.textColor = [UIColor whiteColor];
nav_title1.adjustsFontSizeToFitWidth = NO;
nav_title1.textAlignment = NSTextAlignmentCenter;
nav_title1.text = @"Ålesund";
nav_title1.backgroundColor = [UIColor clearColor];
self.navigationItem.titleView = nav_title1;
}

#pragma mark - TableView Data Source methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:        (NSInteger)section;
{
return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
UITableViewCell *cell = nil;

static NSString *CellIdentifier = @"Cell";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

return cell;
}

#pragma mark - TableView Delegate methods

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
AAOversiktViewController *aaoversikt1 = [[AAOversiktViewController alloc] initWithNibName:@"AAOversiktViewController" bundle:nil];
[self.navigationController pushViewController:aaoversikt1 animated:YES];
} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:20:18.727

乍一看，我会说问题出在您的 [self.navigationController pushViewController] 方法中。您是否在应用程序委托或根视图控制器中启动了应用程序中的导航控制器？

如果不是，我会推荐：

```
 [self presentViewController:aaoversik1 animated:YES completion:NULL]; 
```

如果您想推动导航堆栈以便有一个后退按钮，那么我会考虑实现一个 UINaviationController。

否则，您可以创建一个自定义后退按钮并使用本文中的相同方法来呈现根视图控制器（不完全推荐使用 UINavigationController 更清洁）。

让我知道这是否有任何帮助，T

# javascript - 当其中的数据在运行时增加时，如何使 div 容器可扩展？

> ID：15206950
> 
> 赞同：0
> 
> 时间：2013-03-04T17:04:39.030
> 
> 标签：javascript, css, html

我在这个问题上挣扎了很长一段时间。我在一个 html 页面内创建了一个主容器，该页面还包含 3 个容器（左、中和右）。在中间容器中，有多个DIV，可以根据用户提交的文本增加。随着中间容器内的文本值增加，我希望每个容器（主、右、左和中间）都增加大小以适应内容。但它没有发生，发布的数据是从容器中出来的。

我将位置用作 CSS 中所有容器的绝对位置。

您能否建议完成它的方法。哪种方式会更好，CSS 还是 JavaScript？感谢您的帮助！[以下是我所面临的屏幕截图][10]

伙计们请看下面的html代码和css。这是我想做的事情。目前我将右容器保持为位置：相对，因此当右容器内的 div 增加时，右容器正在扩展。如果我将中间容器的位置保持为相对，那么它将根据其中的内容进行扩展。但是，我想要它，如果子容器（左、中或右）中的任何一个扩展，主容器也应该扩展。有没有办法使用 CSS 来实现这一点？如果没有，如何使用 JavaScript 和 JQuery 做到这一点？

```
.wrapper {
  position: relative;
  top:10px;
  width: 100%;
  border: 1px solid black;
}
.left{
  position:absolute;
  top:0px;
  left:0px;
  width: 300px;
  margin: 0 auto;
  background-color:red;
  border: 1px solid black;
}
.middle{
  position:absolute;
  top:0px;
  left:400px;
  width: 300px;
  background-color:blue;
  border: 1px solid black;
}
.right{
  position:relative;
  top:0px;
  width: 300px;
  left:800px;
  background-color:pink;
  border: 1px solid black;
}

<html>
<head>
<link rel="stylesheet" type="text/css" href="SampleCSS1.css">
</head>
<body>

<div class="wrapper">
  <div class="left">
  <div>div in left</div><div>div in left</div><div>div in left</div>
  <div>div in left</div><div>div in left</div><div>div in left</div>
  <div>div in left</div><div>div in left</div><div>div in left</div>
  <div>div in left</div><div>div in left</div><div>div in left</div>
  <div>div in left</div><div>div in left</div><div>div in left</div>
  <div>div in left</div><div>div in left</div><div>div in left</div>
  <div>div in left</div><div>div in left</div><div>div in left</div>
  <div>div in left</div><div>div in left</div><div>div in left</div>
</div>

<div class="middle">
  <div>div in middle</div><div>div in middle</div><div>div in middle</div>
  <div>div in middle</div><div>div in middle</div><div>div in middle</div><div>div    in middle</div><div>div in middle</div>
  <div>div in middle</div><div>div in middle</div><div>div in middle</div><div>div in middle</div><div>div in middle</div>
  <div>div in middle</div><div>div in middle</div><div>div in middle</div><div>div in middle</div><div>div in middle</div>

  </div>

<div class="right">
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>
  <div>div in right</div><div>div in right</div><div>div in right</div>

  </div>

  </div>

  </body>
  </html>

enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:13:22.827

由于您使用 position:absolute 容器的高度始终为 0 （或类似的东西，取决于浏览器）。

因此，如果您可以在没有 position:absolute 的情况下对主容器执行此操作，并且对于中间容器始终高于其他容器的情况，您可以这样做：

```
<div class="wrapper">
  <div class="main"></div>
  <div class="sub sub-left"></div>
  <div class="sub sub-right"></div>
</div>

.wrapper {
  position: relative;
  width: 960px;
}
.main {
  width: 760px;
  margin: 0 auto;
}
.sub {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100px;
}
.sub-left {
  left: 0;
}
.sub-right {
  right: 0
} 
```

如果没有 position:absolute 的所有容器并且它需要在 ie7 中工作，你就无法做到这一点，你必须使用 javascript 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:02:59.257

If you want all 3 divs to expand to the same height based on just what is in the middle table I think you will need Jquery to do that. If you don't care that the left and right divs do not expand with the dynamic data being entered into the middle div then you can simply add overflow to the middle div.

```
#middlediv {
   overflow:hidden;
) 
```

You would also need to add overflow to the parent container tag if there is one.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:09:07.070

您可以使用 css 表使您的容器在高度上扩展。例如：

你的包装：

```
.wrapper{
    display:table-row;
} 
```

您的 3 列（容器）：

```
.container{
    display:table-cell;
} 
```

这将确保每列的高度总是按照最高的扩展。

# android - 未在 onPostExecute 上创建 AsyncTask 和 Toast

> ID：15206951
> 
> 赞同：2
> 
> 时间：2013-03-04T17:04:39.290
> 
> 标签：android

我有一个 AsyncTask 类。当我遇到错误时，我想看到一条 toast 消息。这是我的 AsynTask 类：

```
private GetUtenti threadutenti;
threadutenti= (GetUtenti) new GetUtenti(this.getActivity()).execute(); 
```

这是我的课：

```
class GetUtenti extends AsyncTask<Void, Void, Void> {
    private Context context;
    private boolean errore = false; 
    private Database db;

    public GetUtenti(Context context){
        this.context=context;
    }
    @Override
    protected void onPostExecute(Void result) {
        db.disconnetti();
        if (errore) {
             Toast.makeText(context, "error!", Toast.LENGTH_SHORT)
              toast.show();
        }
        else{
            setListaUtenti();
        }
        bProgresso.dismiss();           
    }
    @Override
    protected void onPreExecute() {
        db = new Database(.....);
    }
    @Override
    protected Void doInBackground(Void... params) {
        db.connetti();
        if(!db.isConnesso()){           
            errore= true;               
        } else {
            utenti.clear();
            utenti = Utente.getUtenti(db);              
        }
    return null;
    }
} 
```

当我想查看我的 Toast 消息时，我有这个：

```
03-04 17:41:06.534: E/AndroidRuntime(13622): FATAL EXCEPTION: main
03-04 17:41:06.534: E/AndroidRuntime(13622): java.lang.RuntimeException: This Toast was not created with Toast.makeText()
03-04 17:41:06.534: E/AndroidRuntime(13622):    at android.widget.Toast.setText(Toast.java:282)
03-04 17:41:06.534: E/AndroidRuntime(13622):    at com.unipg.utente.ListUtente$GetUtenti.onPostExecute(ListUtente.java:145) 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T17:05:59.357

尝试类似：

```
if (errore) {
    Toast toast = Toast.makeText(context, "error!", Toast.LENGTH_SHORT);
    toast.show();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T17:09:40.270

此行有错误

```
 Toast.makeText(context, "error!", Toast.LENGTH_SHORT)  no semicolon 
```

无需使用双重步骤，即引用 toast 对象然后显示 . 你可以像这样直接调用

```
 Toast.makeText(context, "error!", Toast.LENGTH_SHORT).show(); 
```

# c# - 将 json 文件保存在文本文件中

> ID：15206953
> 
> 赞同：3
> 
> 时间：2013-03-04T17:04:46.260
> 
> 标签：c#, json

我有一个类似的链接`translate.google.com/translate_a/t?client=t&text=like&hl=en&sl=en&tl=bn&ie=UTF-8&oe=UTF-8&multires=1&otf=2&ssel=4&tsel=0&otf=1&ssel=4&tsel=0&sc=1`。

在这里`text=like`它会变成`text=book` `text=pen`，这意味着它将是我的输入单词，我将循环 1000 次。

我正在制作字典。上面的 url 输出 JSON 数据。

我想遍历 1000 个单词并将它们的 json 输出到一个文本文件中 - 我如何在 c# 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:06:51.920

看到这个[样本](http://james.newtonking.com/archive/2009/02/14/writing-json-to-a-file-using-json-net.aspx)也许是完整的

```
Person person = GetPerson();

    using (FileStream fs = File.Open(@"c:\person.json", FileMode.CreateNew))
    using (StreamWriter sw = new StreamWriter(fs))
    using (JsonWriter jw = new JsonTextWriter(sw))
    {
      jw.Formatting = Formatting.Indented;

      JsonSerializer serializer = new JsonSerializer();
      serializer.Serialize(jw, person);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:09:49.190

您将要查询 JSON 数据，并使用 c# JSON 对其进行解析。

[此问题](https://stackoverflow.com/questions/6620165/how-to-parse-json-in-c)包含有关如何解析 JSON 的大量信息。

[您可以使用WebClient ToString](http://msdn.microsoft.com/en-us/library/fhd1f0sw%28v=vs.80%29.aspx)通过查询该页面来下载 JSON 。然后，您可以将其传递给 JSON 解析器。

根据您想要对数据执行的操作（您对此不是很清楚），然后您可以使用 JSON 对象来操作它。

或者，**如果您只想将数据下载到文件**中，您可以使用[WebClient DownloadFile](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfile.aspx)。

# java - Maven：分叉一个多模块项目并设置自定义标签

> ID：15206960
> 
> 赞同：1
> 
> 时间：2013-03-04T17:05:11.890
> 
> 标签：java, maven, pom.xml

在从开源项目分叉模块时与 Maven 战斗。源代码是一个多模块 Maven 项目，具有以下结构：

```
.
 |-- module-a
 |   `-- pom.xml
 |-- module-b
 |   `-- pom.xml
 |-- module-c
 |   `-- pom.xml
 |-- module-...
 |   `-- pom.xml
 `-- parent
     `-- pom.xml 
```

分叉整个项目不是一种选择。我只需要 fork 几个模块，例如`module-a`和`module-b`.

版本控制应该跟踪原始数字，在末尾附加一个后缀：`-${org}-${inc}`，其中：

*   `${org}`是组织的名称（固定）
*   `${inc}`是一个序数，每次我们发布从同一个社区版本分叉的项目时，我们都会增加它。

我通过保留父引用来保留返回原始项目的链接。所以我的分叉继承自社区的父 POM。

出现问题是因为社区父 POM 声明内部依赖项将由所有子工件使用`<version>${project.version}</version>`.

因此，将我的 fork 版本设置为：`3.10.1-org-01`不起作用，因为构建需要其他相关的工件，我不需要 fork 与 version 一起出现`3.10.1-org-01`。

将 设置`finalName`为类似的东西`${project.artifactId}-${project.version}-${org}-${inc}`也无济于事，因为即使工件以正确的名称出现在构建输出目录 (target/) 中，它仍然会以旧名称安装到 Maven 存储库中，从而覆盖社区版本和创造一个不真实的现实。

在这种情况下，我也没有找到让分类器成为我朋友的方法。

除了分叉社区父 POM 和定制分叉模块的依赖版本号之外，还有什么想法吗？

谢谢！

# android - ImageView不显示在android中的Horizo ntalScrollView内部

> ID：15206962
> 
> 赞同：0
> 
> 时间：2013-03-04T17:05:16.710
> 
> 标签：android, imageview, scrollview, horizontalscrollview

我有一个 8000 像素长的图像，我想水平滚动。当我将图像作为 ImageView 插入到 Horizo​​ntalScrollView 并在物理设备（Samsung Galaxy nexus）上运行时，滚动条提示图像已加载，但没有显示图像。一切都在 android xml 查看器中正确显示。这是我的水平滚动视图的 xml：

```
<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/TableRow01"
    android:scrollbars="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="14dp"
            android:src="@drawable/longimage" />
    </LinearLayout>

</HorizontalScrollView> 
```

我曾尝试将图像包装在其他几种布局中并单独包装，但在设备上没有任何效果。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:08:55.537

您可以将 imageView 的参数更改为 match_parent。

# symfony - Symfony2：如何显示/下载 BLOB 字段

> ID：15206963
> 
> 赞同：16
> 
> 时间：2013-03-04T17:05:18.350
> 
> 标签：symfony, blob

对于我的客户，我必须对一些不同的文件使用 blob 存储。

所以我创建了一个独立的包，其中 Blob 类扩展了 Doctrine\DBAL\Types\Type。并在捆绑类中具有引导功能。

这工作得很好，我可以在数据库 Blob 数据中写入。

但之后我无法下载任何文件：/

我有：

```
public function downloadAction($id) {
    $em = $this->getDoctrine()->getManager();

    /* @var $entity Document */
    $entity = $em->getRepository('Lille3SapBundle:Document')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Document entity.');
    }

    $file = $entity->getFichier();

    $response = new \Symfony\Component\HttpFoundation\Response($file, 200, array(
        'Content-Type' => 'application/octet-stream',
        'Content-Length' => sizeof($file),
        'Content-Disposition' => 'attachment; filename="'.$entity->getNomDocument().'"',
    ));

    return $response;
} 
```

而且我有一个例外：响应内容必须是实现__toString（）的字符串或对象，给定的“资源”。

实际上，*$file*值不是预期的 BLOB，而是类似于*Resource id #123*

-> 我检查了 blob 数据字段值，它们在数据库中没问题

那么如何在控制器中强制使用 blob 行而不是*Resource id #111*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-10T09:29:23.897

您仍然可以按照最初的计划将**BLOB**字段用于 DB 中的字段。

在*createAction*中像往常一样存储数据（没有 base64_encode()）：

```
$stream = fopen($entity->getFichier(),'rb');
$entity->setFichier(stream_get_contents($stream)); 
```

并在*downloadAction*中使用：

```
$file = $entity->getFichier();
$response = new \Symfony\Component\HttpFoundation\Response(stream_get_contents($file), 
    200, 
    array(
        'Content-Type' => 'application/octet-stream',
        'Content-Length' => sizeof($file),
        'Content-Disposition' => 'attachment; filename="'.$entity->getNomDocument().'"',
    ));

return $response; 
```

**解释：**

**BLOB**字段被视为没有 __toString() 实现的*资源变量。*

```
gettype($file) -> "resource"
get_resource_type($file) -> "stream" 
```

**stream_get_contents($file)**在这里创造了奇迹：从资源变量中获取**STRING**内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:03:57.407

好的，我有一个（非常难看的）解决方案：

首先：我将文档实体的文件属性的数据类型**blob**更改为**文本**。

其次：在 createAction 中，我更改了 setFichier 调用：

```
$stream = fopen($entity->getFichier(),'rb');
$entity->setFichier(base64_encode(stream_get_contents($stream))); 
```

第三：在downloadAction中，我对文本base64文本字段进行解码：

```
$file = $entity->getFichier();              
$response = new \Symfony\Component\HttpFoundation\Response(base64_decode($file), 200, array(
        'Content-Type' => 'application/octet-stream',
        'Content-Length' => sizeof($file),
        'Content-Disposition' => 'attachment; filename="'.$entity->getNomDocument().'"',
));

return $response; 
```

现在我可以以 blob 方式保存和下载文件......

# javascript - 从 html“数组”到 javascript 数组

> ID：15206966
> 
> 赞同：0
> 
> 时间：2013-03-04T17:05:27.327
> 
> 标签：javascript, jquery, html

我有一个非常像这样的html页面：

```
<table id="all">
<tr><td><input type="text" name="search[id]" id="search[id]"></input></td></tr>
<tr><td><input type="text" name="search[name]" id="search[name]"></input></td></tr>
..........ecc ecc..........
</table> 
```

我想用 javascript 或 jquery 实现这样的数组：

```
{
id:"<value in search[id]>",
name:"<value in search[name]>",
....ecc ecc...
} 
```

数组的键不是静态的，所以我不能在代码中静态命名它们。我尝试使用 $("#search") 但我并不幸运 :( 非常感谢您的帮助！抱歉这个菜鸟问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:10:22.560

```
var obj = {};
$('#all [id^=search]').each(function() {
   obj[this.id.match(/\[(.*)\]/)[1]] = this.value;
}); 
```

[示范](http://jsbin.com/ekalir/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:14:45.513

jQuery`$(form).serializeArray()` [在他们的 API 站点上提供了文档](http://api.jquery.com/serializeArray/)（总是值得快速查看，那个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:36:28.507

这在*原生 JavaScript*中是可行的；假设你的 HTML

```
function nameToObj(queryName, nodes, context) { // `nodes`, `context` optional
    var o = {}, i, j = queryName.length; // var what we'll need
    context || (context = document);
        // if `context` falsy, use `document`
    nodes || (nodes = context.getElementsByTagName('input'));
        // if `nodes` falsy, get all <input>s from `context`
    i = nodes.length; // initial `i`
    while (i--) { // loop over each node
        if (nodes[i].name.slice(0,j) === queryName) { // test
            o[nodes[i].name.slice(j+1,-1)] = nodes[i].value;
                // match, append to object
        }
    }
    return o; // return object
}
nameToObj('search'); // Object {name: "", id: ""} 
```

# ios - YouTube 移动网站如何防止在 iOS 上跳过视频？

> ID：15206967
> 
> 赞同：1
> 
> 时间：2013-03-04T17:05:27.837
> 
> 标签：ios, html, mobile, video

当我`m.youtube.com`在我的 iPhone (Chrome) 上观看视频时，我假设 YouTube 正在使用 HTML5`<video>`标签来显示它们。

但是，当我观看带有广告的视频时，拖动搜索按钮会使其跳回到搜索前的原始位置。换句话说，不可能控制你在广告中的位置。

感觉像是违反了浏览器内容和浏览器之间的界限。这不是一个原生应用程序，它是一个网站。HTML 是如何操作 iOS 视频控制元素的？看起来这应该是不可能的，就像网页访问手机的照片或切换应用程序一样，应该是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:37:13.147

如果它在浏览器中内联运行，则该站点将具有对控件的完整脚本访问权限 - 现在，防止在广告期间跳过/更改播放头是非常标准的。有些甚至完全摆脱了控制。

虽然 HTML5 视频是原生浏览器功能，但它仍然受制于 javascript 挂钩。所要做的就是添加`return false`到 onChangePlayhead 事件以锁定控件。只有当您从内联网络中删除视频并将其带入本机 iOS 应用程序时，它才会被脚本无法触及。

# r - 在R中绘制椭圆

> ID：15206970
> 
> 赞同：1
> 
> 时间：2013-03-04T17:05:33.280
> 
> 标签：r

我想在 R 中制作椭圆。代码如下：

```
library(car)
A      <- matrix(c(2.2, 0.4, 0.4, 2.8), nrow=2)
ellipse(c(0, 0), shape=A, radius=0.98, col="red", lty=2) 
```

但是此代码会产生以下错误：

```
Error in plot.xy(xy.coords(x, y), type = type, ...) : 
  plot.new has not been called yet 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:17:31.677

提供参数`add=FALSE`，它将创建一个新图而不是尝试添加到现有图。`ellipse`如果您想要其他选择，我还使用了一个包。

# windows - Windows 自动多用户登录命令行

> ID：15206974
> 
> 赞同：7
> 
> 时间：2013-03-04T17:05:45.203
> 
> 标签：windows, powershell, command-line, login

我正在尝试让 Windows 管理员帐户自动登录脚本上的多个本地用户。这个想法是在每个用户会话中运行一组应用程序（测试）。
目前，我可以通过远程（RDC）登录到每个单独的用户帐户来做到这一点。如果只有几个这样的帐户就可以了，但是现在我有超过 30 台机器，每台平均有 6 个用户帐户，因此对每个帐户进行 RDPing 非常耗时。
相反，我希望能够以管理员身份登录，并拥有某种脚本来自动登录组内的本地用户，或者只是用户列表，这样我就可以使用 pstools 启动应用程序（应用程序需要桌面交互，因此需要会话）。
我发现您只能通过 Windows 用户帐户自动登录一个用户。

有谁知道通过命令行或以某种方式自动登录多个帐户的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-13T17:33:20.307

用于`Invoke-Command`对同样具有 Powershell 并已启用 WinRM 的远程计算机执行命令。 `Invoke-Command`也可以运行非 Powershell 命令。

```
# users stored in csv with "username, password" format
foreach ($user in $userlist) {
    Invoke-Command "runas /profile /credentials $creds /user:$user.username /password:$user.password *executable*
} 
```

使用`-asJob`参数将它们作为单独的作业运行，或者为了简单起见按顺序运行它们。如果您需要运行多个命令，远程 PSSession 是另一个需要考虑的可能性。研究将加密的凭据存储在文件中以供重复使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T14:28:28.113

它可以通过 3rd 方工具[http://www.logonexpert.com](http://www.logonexpert.com)通过其命令行工具来完成，方式如下：

le.exe /logon user1 pass1 domain1

le.exe /logon user2 pass2 domain1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T21:36:57.363

使用[runas](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/runas.mspx)打开新的 cmd。之后开始您的测试，他们将使用您的新凭据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T17:19:42.067

这实际上是不可能的，您不能在命令行中登录多个帐户。RDC 是唯一可行的方法。可能您可以使用其他自动化软件（如 auto it、WSH 脚本或一些宏记录器）为多个用户自动化 RDC。这可能有助于解决您工作中的一些问题。

# eclipse - 慢速eclipse远程调试连接

> ID：15206979
> 
> 赞同：0
> 
> 时间：2013-03-04T17:05:51.187
> 
> 标签：eclipse, linux-mint

我正在运行 linux mint 14、java 1.7.0_06-b24、eclipse 4.2。我正在构建一个大型 Web 应用程序并将其部署到本地 WebLogic 实例。当我尝试将远程调试会话连接到此应用程序以进行 Eclipse 调试时，连接需要相当长的时间 ~ 1 分钟。连接后，性能似乎很好。任何想法将不胜感激。当我运行 ubuntu 和 eclipse 3.8 时，一切似乎都运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T14:04:50.057

您是否在代码中设置了大量断点？附加到 JVM 需要更长的时间，因为那里有更多的断点。

# javascript - “this.model”在单击的视图上不起作用。骨干JS

> ID：15206980
> 
> 赞同：0
> 
> 时间：2013-03-04T17:05:55.463
> 
> 标签：javascript, jquery, backbone.js, model

**快速解释：** 我正在开发一个与 Fullcalendar JS 集成的主干应用程序。创建或编辑事件时，您可以单击日历，然后会弹出一个模式询问信息。问题是当模式弹出时，我需要使用“this.model”来`.get()`获取有关当前事件的`.set()`信息或有关新事件的信息。我不断收到错误：

未捕获的类型错误：无法调用未定义的方法“get”未捕获的类型错误：无法调用未定义的
方法“设置”

**我的问题：** 设置点击视图的当前模型的正确方法是什么？

以下是一些相关代码：

**型号及系列：**

```
 var Event = Backbone.Model.extend({
    methodToURL: {
        'create': addDayURL,
        'update': addDayURL,
        //'delete': '/user/remove'
    },
    sync: function(method, model, options) {
        options = options || {};
        options.url = model.methodToURL[method.toLowerCase()];

        Backbone.sync(method, model, options);
    }
});

var Events = Backbone.Collection.extend({
    model: Event,
    url: allDaysURL
}); 
```

**主视图**

```
 var EventsView = Backbone.View.extend({
    events: {
        'click #add_track' : "addTrack",
        'click th.fc-widget-header:not(.fc-first)' : 'updateTrack',
        'click .fc-button-next' : 'switchTracks',
        'click .fc-button-prev' : 'switchTracks'
    },
    initialize: function(){
        _.bindAll(this); 

        this.collection.on('reset', this.addAll);
        this.collection.bind('add', this.addOne);
        this.collection.bind('change', this.change);            
        this.collection.bind('destroy', this.destroy);

        console.log(this.collection.toJSON());
        console.log(JSON.stringify(this.options.collection2.toJSON()))

        this.trackCollection = JSON.stringify(this.options.collection2.toJSON());
        this.trackObject = jQuery.parseJSON(this.trackCollection);

        this.eventView = new EventView();
        this.trackView = new TrackView();         
    },
    render: function() {
        this.$el.fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'agendaDay',

            },
            defaultView: 'resourceDay',
            resources: this.trackObject,
            droppable: true,
            selectable: true,
            selectHelper: true,
            editable: true,
            ignoreTimezone: false,                
            select: this.select,
            eventClick: this.eventClick,
            eventDrop: this.eventDropOrResize,        
            eventResize: this.eventDropOrResize,
            drop: function(date, allDay, ev, ui, res) { // this function is called when something is dropped

                // retrieve the dropped element's stored Event Object
                var originalEventObject = $(this).data('eventObject');

                // we need to copy it, so that multiple events don't have a reference to the same object
                var copiedEventObject = $.extend({}, originalEventObject);

                // assign it the date that was reported
                copiedEventObject.start = date;
                copiedEventObject.allDay = allDay;

                // dropped event of resource a to a cell belonging to resource b?
                copiedEventObject.resourceId = res.id;

                //get title of event
                var eventTitle = copiedEventObject.title;

                // render the event on the calendar
                // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

                // is the "remove after drop" checkbox checked?
                if ($('#drop-remove')) {
                    // if so, remove the element from the "Draggable Events" list
                    $(this).remove();
                }
                var event = new Event();
                event.set({"title": eventTitle, "start_at": copiedEventObject.start, "color": null, "allday":copiedEventObject.allDay, "conference_id": conferenceID, "session_type_id": 1, "resource_Id": res.id});
                events.create(event);
            }
        });

        //Goto first event day on initialize
        var start_at = Date.parse(startDate);
        var year = $.fullCalendar.formatDate(start_at, 'yyyy');
        var month = $.fullCalendar.formatDate(start_at, 'M');
        var day = $.fullCalendar.formatDate(start_at, 'dd');

        this.$el.fullCalendar( 'gotoDate', year , month, day) 
        this.$el.prepend('<button id="add_track" class="btn large-btn green-btn pull-right">Add Track</button>');
    },
    addAll: function() {
        this.$el.fullCalendar('addEventSource', this.collection.toJSON());
    },
    addOne: function(event) {
        this.$el.fullCalendar('renderEvent', event.toJSON());
    }, 
    addTrack: function() {
        //get current day & format date
        date = this.$el.fullCalendar( 'getDate' );
        var formatDate = $.fullCalendar.formatDate(date, 'yyyy-MM-dd');

        //create new track
        var newTrack = new Track;
        newTrack.set({'name': 'Track 1', 'day_date': formatDate, 'conference_id': conferenceID, "session_type_id": 1});

        //save track to DB
        this.options.collection2.create(newTrack);
    },  
    updateTrack: function(track) {
        //var fcRes = this.$el.fullCalendar('clientEvents', event.get('id'))[0];
        //this.trackView.model = track.get('id');
        console.log(this.trackView.model)
        this.trackView.render();  
    },
    switchTracks: function(){
        //alert(this.$el.fullCalendar( 'getDate' ))
    },
    select: function(startDate, endDate, res) {
        this.eventView.collection = this.collection;
        this.eventView.model = new Event({start_at: startDate, end_at: endDate});
        this.eventView.render();            
    },
    eventClick: function(fcEvent) {
        this.eventView.model = this.collection.get(fcEvent.id);
        this.eventView.render();
    },
    change: function(event) {
        // Look up the underlying event in the calendar and update its details from the model
        var fcEvent = this.$el.fullCalendar('clientEvents', event.get('id'))[0];
        console.log(fcEvent);
        fcEvent.title = event.get('title');
        fcEvent.color = event.get('color');
        this.$el.fullCalendar('updateEvent', fcEvent);         
    },
    eventDropOrResize: function(fcEvent) {
        alert(fcEvent.id)
        // Lookup the model that has the ID of the event and update its attributes
        this.collection.get(fcEvent.id).save({start: fcEvent.start, end: fcEvent.end});            
    },
    destroy: function(event) {
        this.$el.fullCalendar('removeEvents', event.id);         
    }        
}); 
```

**事件弹出模式视图**

```
 var EventView = Backbone.View.extend({
    el: $('#eventDialog'),
    initialize: function() {
        _.bindAll(this);           
    },
    render: function() {
        var buttons = {'Ok': this.save};
        if (!this.model.isNew()) {
            _.extend(buttons, {'Delete': this.destroy});
        }
        _.extend(buttons, {'Cancel': this.close});            

        this.$el.dialog({
            modal: true,
            title: (this.model.isNew() ? 'New' : 'Edit') + ' Event',
            buttons: buttons,
            open: this.open
        });
        return this;
    },        
    open: function() {
        this.$('#title').val(this.model.get('title'));
        this.$('#color').val(this.model.get('color'));            
    },        
    save: function(startDate, endDate, res) {
        //copiedEventObject.resourceId = res.id;
        this.model.set({'title': this.$('#title').val(), 'color': this.$('#color').val(), 'conference_id': conferenceID, "session_type_id": 1, 'track_id': 1, /*'resourceId': res.id*/});
        if (this.model.isNew()) {
            this.collection.create(this.model, {success: this.close, wait: true});
        } else {
            this.model.save({}, {success: this.close});
        }
    },
    close: function() {
        this.$el.dialog('close');
    },
    destroy: function() {
        this.model.destroy({success: this.close});
    }        
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:10:43.480

看起来您的日历视图没有与之关联的模型。实例化模型时，您需要将模型传递到日历视图中。当您调用时，`this.eventView = new EventView();`您不会在主视图中为它提供对基础模型的引用。

# matlab - 向量化 Matlab 循环

> ID：15206984
> 
> 赞同：1
> 
> 时间：2013-03-04T17:06:03.637
> 
> 标签：matlab, for-loop, vectorization

我尽我所能不使用循环。但是我发现除了使用循环之外很难解决它。是否可以矢量化循环代码？谢谢

```
a=[0.1361,0.8530,0.0760;0.8693,0.6221,0.2399;0.5797,0.3510,0.1233;.5499,0.5132,0.1839; 0.1450,0.4018,0.2400];
b=[0.4173,0.4893,0.7803;0.0497,0.3377,0.3897;0.9027,0.9001,0.2417;0.9448,0.3692,0.4039;0.4909,0.1112,0.0965];
[m1,n1,l]=size(a);
awe=-0.5;
g = [81.2379 92.4675;92.4675 118.1451];
ver=inv(g);
p=zeros(m1,n1);
for i=1:m1
for j=1:n1
    CD=[a(i,j) ; b(i,j)]
    p(i,j)= CD'*ver* CD;
end
end
q = exp(awe*p); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:32:27.130

好吧，将矩阵`p`分解为多个组件允许您通过以下方式对计算进行矢量化：

```
p = a .^ 2 * ver(1, 1) + a .* b * (ver(1, 2) + ver(2, 1)) + b .^ 2 * ver(2, 2); 
```

或者，您可以像这样概括解决方案：

```
CD = [a(:), b(:)]';
p = reshape(diag(CD' * ver * CD), size(a)); 
```

请注意，这是一个稍慢的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:32:12.513

当然你可以做到。

```
CD = reshape(diag([a(:),b(:)]*ver*[a(:),b(:)]'),5,3); 
```

但只有对角线

```
[a(:),b(:)]*ver*[a(:),b(:)]' 
```

是需要的。

所以更换

```
diag([a(:),b(:)]*ver*[a(:),b(:)]') 
```

和：

```
sum(  [a(:),b(:)]'  .*  (ver*[a(:),b(:)]') , 1)' 
```

# c - 在 C 中连接两个矩阵

> ID：15206987
> 
> 赞同：2
> 
> 时间：2013-03-04T17:06:20.237
> 
> 标签：c, matrix

我正在尝试在 C 中连接相同的矩阵，我想到的唯一想法是加法，但它不起作用。例如，如果我有：`{1,1;2,2}`，我的新矩阵应该是`{1,1,1,1;2,2,2,2}`。我想将行数加倍。我用谷歌搜索，但我没有找到任何东西。

这是我的代码：

```
 matrix2=realloc(matrix1,sizeof(int*)*(row));
 int i,j;
 for(i=0;i<row;i++){
   for(j=0;j<col;j++){    
    matrix2[i][j]=matrix1[i][j]+matrix1[i][j];
   }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:17:43.110

使用我在下面提供的伪代码。请注意，对于 C99 之前的任何 C，您不能用`int matrix[2*W][H]`（如果 W 和 H 不是`#define`s）实例化数组

```
Given matrix1 and matrix 2 of equal W,H
make matrix3 of 2*W,H
for h to H
    for i to W
        matrix3[h][i] = matrix1[h][i]
        matrix3[h][i+W] = matrix2[h][i] 
```

制作矩阵需要每行 1 个 malloc，加上 1 个 malloc 来存储行指针数组。

请注意您将如何在循环中需要 2 个作业，而不是之前的作业。这是因为你设置在两个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:19:02.510

你听起来像你有像matlab这样的高级语言的背景。在 C 中，加号运算符不连接矩阵。这将添加矩阵中的值并将新值存储到新矩阵中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T17:37:35.700

这里我们将输入矩阵复制到一个新矩阵中两次

for(int i = 0; i < m; i++){for(int j = 0; j < n;j++) { mat2[i][j] = mat[i][j];}}

for(int i = 0 ; i < m ; i++){for(int j = n; j < (2*n) ; j++){ mat2[i][j] = mat[i][jn];}}

# objective-c - 如何在 Cocoa 编程中访问不同类的对象

> ID：15206990
> 
> 赞同：0
> 
> 时间：2013-03-04T17:06:31.227
> 
> 标签：objective-c, xcode, macos, cocoa, iboutlet

我有一个 NSTextField 子类（称为“txtField1”并在我的界面构建器中用作文本字段的自定义类），我希望能够从此类访问我的界面构建器中存在的 NSComboBox 对象。

这是我的代码：txtField1.h：

```
#import <Cocoa/Cocoa.h>

@interface txtField1 : NSTextField

@end 
```

txtField.m:

```
#import "txtField1.h"

@implementation txtField1

-(void)mouseDown:(NSEvent *)theEvent
{
    HERE I would like to be able to write something like:
    [combobox SetHidden:YES];
}

@end 
```

我希望能够在 mouseDown 事件中设置访问组合框 SetHidden 属性。你能告诉我怎么做吗？我尝试了在互联网上找到的不同解决方案，但根本没有得到任何东西！任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:09:39.873

这里有很多方法和答案：

[通过不同视图的按钮更新标签](https://stackoverflow.com/questions/11257848/update-a-label-through-button-from-different-view)

[Xcode - 从不同的视图更新 ViewController 标签文本](https://stackoverflow.com/questions/10052594/xcode-update-viewcontroller-label-text-from-different-view)

[在另一个类中设置标签文本](https://stackoverflow.com/questions/9332082/setting-label-text-in-another-class)

[将另一个视图上的标签设置为存储的 NSDate](https://stackoverflow.com/questions/9081042/set-label-on-another-view-to-stored-nsdate)

编辑：

```
-(void)mouseDown:(NSEvent *)theEvent
{
    HERE I would like to be able to write something like:
    [combobox SetHidden:YES];
    /*
        use the shared instance of comboBox here and make it hidden.
        Also, you can use binding to make it hidden
    */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:12:27.127

从我的角度来看，`txtField1`类并不是这段代码更好的地方。

您可以将`NSControlTextEditingDelegate`协议添加到您的`NSViewController`实现（已经包含`IBOutlet`s for `txtField1`and `combobox`）并在方法中`– control:textView:doCommandBySelector:`实现隐藏您的`NSComboBox`

# c# - 在皮肤文件中确定 Safari 浏览器？

> ID：15206997
> 
> 赞同：1
> 
> 时间：2013-03-04T17:06:39.520
> 
> 标签：c#, .net, css, dotnetnuke, skinning

我在 dnn6 门户中工作，并在我的 skinpage.ascx 中使用此代码。但它不会加载 SafariSkin.css。

```
 <!--[if Safari]>
     <link href="SafariSkin.css" rel="stylesheet" type="text/css" />
     <![endif]-->

     <!--[if !Safari]>
     <link href="Skin.css" rel="stylesheet" type="text/css" />
     <![endif]--> 
```

但如果我将条件更改为“IE”，它会起作用。为什么？

我还使用以下代码：

```
 <dnn:STYLES runat="server" ID="Stylesnotsafari" Name="notsafari" StyleSheet="SafariSkin.css" Condition="Safari" UseSkinPath="true"/> 
```

再次只是当条件是 IE 时它才能正常工作。任何想法？？

我应该怎么做才能有“野生动物园”条件？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:33:03.820

由于您在 ascx 文件中，您可以使用服务器代码来确定浏览器。

```
<link href="<%= Request.Browser.Browser == "Safari" ? "SafariSkin.css" : "NotSafari.css" %>" rel="stylesheet" type="text/css" /> 
```

为此，请确保皮肤的语言是 C#（第一行，其中显示 language="vb"，更改为 language="c#"），或将上面的代码修改为 VB.net。

此外，对于旧版本的 .NET，无法正确识别 Safari 浏览器。如果是这种情况，请阅读更多信息，例如在[http://www.velocityreviews.com/forums/t119465-asp-net-2-0-vs-safari-browser.html](http://www.velocityreviews.com/forums/t119465-asp-net-2-0-vs-safari-browser.html)以手动更新浏览器检测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:49:01.770

Safari 不能像 IE 那样通过条件来定位。

有一些[技巧](https://stackoverflow.com/questions/69440/what-safari-specific-pure-css-hacks-are-out-there)可以在您的标准样式表中使用，但实际上，最好通过调整 html/css 来支持 Safari（这项任务通常比 IE 中的劳动密集型任务要少得多）。