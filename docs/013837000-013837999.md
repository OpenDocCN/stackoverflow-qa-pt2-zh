# StackOverflow 问答 13837000-13837999

# c# - 如何将动态生成的组合框的值传递给下一个表单的组合框？

> ID：13837001
> 
> 赞同：1
> 
> 时间：2012-12-12T09:49:15.317
> 
> 标签：c#, winforms

我正在制作一个 Windows 窗体项目，并且在将动态生成的控件值传递给另一个窗体的正常控件值时遇到了困难。

我的代码是：

```
 int c = 0;
        int p = 0;
        private void button1_Click(object sender, EventArgs e)
        {
            panel1.VerticalScroll.Value = VerticalScroll.Minimum;
           // panel1.HorizontalScroll.Value = HorizontalScroll.Minimum;

            ComboBox txtRun3 = new ComboBox();
            txtRun3.Name = "txtDynamic" + c++ ;
            txtRun3.Location = new Point(30, 18 + (30 * c))
            panel1.Controls.Add(txtRun3);
           txtRun3.Focus();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Form4 f4 = new Form4();
        Button bt = sender as Button; 
       ComboBox cb2 = bt.Tag as ComboBox;
        f4.Combo.Text = bt.Text;
         } 
```

我收到错误消息：
“对象引用未设置为对象的实例。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:52:46.707

提供公共财产`Form4`

```
public ComboBox Combo
{
    get
    {
        return this.comboBox1;
    }
    set 
    {
        this.comboBox1 = value;
    }
} 
```

然后你可以通过这种方式访问​​它：

```
Form4 f4 = new Form4();
Button bs = (Button) sender;
f4.Combo.Text = bs.Text; 
```

# javascript - PDF hostContainer 回调

> ID：13837002
> 
> 赞同：10
> 
> 时间：2012-12-12T09:49:20.500
> 
> 标签：javascript, pdf, adobe, itextsharp, acrofields

[在此处](https://stackoverflow.com/questions/5934211/getting-notified-when-the-user-clicks-a-link-in-an-embedded-pdf)遵循此 SO 解决方案以通知客户端 PDF 文档中的单击事件，当客户端使用 this.myPDF.submitForm("localhost/Handler.ashx?r=2 ） 功能？

PDF 文件在用户控件中创建，然后呈现为 ​​HTML 对象：

```
string container = ("<object data='/myfile.pdf' type='application/pdf'></object>"); 
```

附加到 PDF 的 JS 文件是这样完成的：

```
 var webClient = new WebClient();
 string htmlContent = webClient.DownloadString(fileurl + "pdf_script.js");
 PdfAction action = PdfAction.JavaScript(htmlContnent, pdfstamper.Writer);
 pdfstamper.Writer.SetOpenAction(action); 
```

以及js文件的内容：

```
this.disclosed = true;
if (this.external && this.hostContainer) {

function onMessageFunc(stringArray) {
     try {
          this.myPDF.submitForm("http://localhost/Handler.ashx?EmpNo=12345" + "#FDF", false);

        }
        catch (e) {

        }
    }
    function onErrorFunc(e) {
        console.show();
        console.println(e.toString());
    }
    try {
        if (!this.hostContainer.messageHandler);
        this.hostContainer.messageHandler = new Object();
        this.hostContainer.messageHandler.myPDF = this;
        this.hostContainer.messageHandler.onMessage = onMessageFunc;
        this.hostContainer.messageHandler.onError = onErrorFunc;
        this.hostContainer.messageHandler.onDisclose = function () { return true; };
    }
    catch (e) {
        onErrorFunc(e);
    }
} 
```

进行 submitForm 调用后，PDF 内容（表单字段）将成功保存，并通过执行以下操作在 PDF 中显示警报：

```
message = "%FDF-1.2
                   1 0 obj
                   <<
                   /FDF
                   <<
                      /Status("Success!")
                   >>
                   >>
                   endobj
                   trailer
                   <</Root 1 0 R>>
           %%EOF");
return message; 
```

我想要做的是让 PDF 在从该客户端发送表单提交调用后回调客户端，这是一种确认客户端已提交表单的方式，而不是以警报的形式，而是，一种在主机（容器、iframe、对象...等）中触发功能的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:21:16.513

我不知道您使用的 FDF 响应，所以我从您的问题中学到了一些新东西。我研究了 PDF 参考中的 AcroJS 参考和 FDF 规范，现在我对您的代码的作用有了更好的理解。谢谢你。

我假设您已经知道如何使用来自 PDF 的 JavaScript 调用来触发 HTML 文件中的 JavaScript 消息。请参阅HTML 和 PDF 之间`createMessageHandler()`的[JavaScript 通信](http://www.javabeat.net/2011/04/javascript-communication-between-html-and-pdf-in-itext/)一文。

我将您的问题解释为：*“如何在成功提交数据后调用此方法？”*

如果有这个问题的解决方案，它将涉及 JavaScript。我看到可以在 FDF 文件中添加 JavaScript，但我不确定 JavaScript 是否可以“与”HTML 对话。我不确定您是否可以从 FDF 响应中调用初始 PDF 中的 JavaScript 函数。如果可能，您应该在 PDF 中添加一个类似于 /Status 条目的 JavaScript 条目。

该条目的值是一个字典，类似于：

```
<<
/Before (app.alert\("before!"\))
/After (app.alert\("after"\))
/Doc [/MyDocScript1, (myFunc1\(\)),
      /MyDocScript2, (myFunc2\(\))
>> 
```

在您的情况下，我会删除 /Before 和 /Doc 键。我认为您不需要它们，我会将字典简化为：

```
<<
/After (talkToHtml\(\))
>> 
```

`talkToHtml()`PDF中已经存在的方法在哪里：

```
function talkToHtml() {
    var names = new Array();
    names[0] = "Success!";
    try{
        this.hostContainer.postMessage(names);
    }
    catch(e){
        app.alert(e.message);
    }
} 
```

我不知道这是否会奏效。我自己从未尝试过。我的答案基于规格。

我不知道你是否真的需要使用 FDF。您是否尝试将 JavaScript 添加到您的 submitForm() 方法？就像是：

```
this.myPDF.submitForm({
    cURL: "http://localhost/Handler.ashx?EmpNo=12345",
    cSubmitAs: "FDF",
    oJavaScript: {
        Before: 'app.alert("before!")',
        After: 'app.alert("after")',
        Doc: ["MyDocScript1", "myFunc1()",
              "MyDocScript2", "myFunc2()" ]
    }
}); 
```

这仅在您以 FDF 形式提交时才有效。如果您提交 HTML 查询字符串，我认为没有解决方案。

如果您想知道什么`MyDocScript1`和`MyDocScript2`是：

> Doc 定义了一个数组，该数组定义了要添加到文档名称字典的 JavaScript 条目中定义的脚本的附加 JavaScript 脚本。该数组包含偶数个元素，成对组织。每对的第一个元素是名称，第二个元素是定义与该名称对应的脚本的文本字符串或文本流。每个已定义的脚本都被添加到名称字典中已定义的脚本中，然后在执行 Before 条目中定义的脚本之前执行。（ISO-32000-1 表 245）

我不确定所有这些在实践中是否可行。无论哪种方式，请让我知道。

# javascript - doctype 是如何破坏我的 JavaScript 的？

> ID：13837004
> 
> 赞同：4
> 
> 时间：2012-12-12T09:49:24.273
> 
> 标签：javascript, html, css, doctype

我做了一个菜单，刚才我添加了

```
<!DOCTYPE html> 
```

文件，并且它停止工作。但是代码仍在运行，仍然会在鼠标悬停时打印到控制台等。我尝试了其他文档类型，它们也破坏了它，它只是保持静态。

可能导致 JavaScript 无法工作的文档类型是怎么回事？

JS：

```
var total_width = "960";
var slide_width = "182";
var slide_margin = "10";
var expand_width = "374";
var icon_width = "32";
var icon_margin = "15";
var slide_number = "5";

function slideid(i) {
    var m = document.getElementById("slide"+i);
    var l = document.getElementById("slideimg"+i);
    var k = document.getElementById("slidetext"+i);
    var j = document.getElementById("slidediv"+i);
    return [m, l, k, j]
}

function compat() {
    if (window.opera) {
        for (var i=1;i<6;i++) {
            s = slideid(i);
            s[3].style.position="relative";
            s[3].style.bottom="46px";
        }
    }
    if (document.all && !(window.opera)) {
        for (var i=1;i<6;i++) {
            s = slideid(i);
            s[0].style.height="60px";
            s[1].style.display="none";
            var iecontents = s[2].innerHTML;
            s[0].innerHTML=iecontents;
            s[0].style.fontFamily="'astonishedregular',Impact,serif";
            s[0].style.fontSize="40px";
            s[0].style.color="#fff";
            s[0].style.textDecoration="none";
            s[0].style.padding="10px auto";
        }
    }
}

function expand(x) {
    if (document.all && !(window.opera)) {
        return
    }
    var shrink = new Array();
    for (var i=1;i<6;i++) {
        if (i === x) {
            var expander = i;
        }
        else {
            var d = shrink.length;
            shrink[d] = i;
        }
    }
    for (var i=0;i<4;i++) {
        s = slideid(shrink[i]);
        var slide_shrink = ((total_width-(5*slide_margin))-expand_width)/(slide_number-1);
        s[1].style.marginLeft=(slide_shrink-icon_width)/2;
        s[0].style.width=slide_shrink;
        s[2].style.display="none";
        s[3].style.width="0"
    }
    s = slideid(expander);
    s[1].style.marginLeft=icon_margin;
    s[0].style.width=expand_width;
    s[2].style.display="inline-block";
    s[3].style.width=expand_width-icon_width-icon_margin-7;
}

function shrink() {
    if (document.all && !(window.opera)) {
        return
    }
    for (var i=1;i<6;i++) {
        s = slideid(i);
        s[1].style.marginLeft=(slide_width-icon_width)/2;
        s[0].style.width=slide_width;
        s[2].style.display="none";
        s[3].style.width="0";
    }
} 
```

和 HTML：

```
<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="style.css" />
    <script src="menu.js"></script>
</head>
<body onload="compat()">

<div id="Menu" onMouseout="shrink()">
    <a href="#" class="slide" id="slide1" onMouseOver="expand(1)">
        <img id="slideimg1" src="home.png" />
        <div id="slidediv1">
            <h2 id="slidetext1">Home</h2>
        </div>
    </a>
    <a href="#" class="slide" id="slide2" onMouseOver="expand(2)">
        <img id="slideimg2" src="sound.png" />
        <div id="slidediv2">
            <h2 id="slidetext2">Music</h2>
        </div>
    </a>
    <a href="#" class="slide" id="slide3" onMouseOver="expand(3)">
        <img id="slideimg3" src="blog.png" />
        <div id="slidediv3">
            <h2 id="slidetext3">Blog</h2>
        </div>
    </a>
    <a href="#" class="slide" id="slide4" onMouseOver="expand(4)">
        <img id="slideimg4" src="note.png" />
        <div id="slidediv4">
            <h2 id="slidetext4">Bio</h2>
        </div>
    </a>
    <a href="#" class="slide" id="slide5" onMouseOver="expand(5)">
        <img id="slideimg5" src="way.png" />
        <div id="slidediv5">
            <h2 id="slidetext5">Links</h2>
        </div>
    </a>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T10:03:15.693

您需要`"px"`添加`marginLeft`和`width`。设置需要单位的 CSS 样式在没有单位的情况下将无法工作。而且您缺少`<html></html>`标签。

```
function expand(x) {
    if (document.all && !(window.opera)) {
        return
    }
    var shrink = new Array();
    for (var i=1;i<6;i++){
        if (i === x) {
            var expander = i;
        }
        else {
            var d = shrink.length;
            shrink[d] = i;
        }
    }
    for (var i=0;i<4;i++){
        s = slideid(shrink[i]);
        var slide_shrink = ((total_width-(5*slide_margin)) - expand_width) / (slide_number-1);
        s[1].style.marginLeft=(slide_shrink-icon_width)/2 +"px";
        s[0].style.width=slide_shrink +"px";
        s[2].style.display="none";
        s[3].style.width="0"
    }
    s = slideid(expander);
    s[1].style.marginLeft=icon_margin +"px";
    s[0].style.width=expand_width + "px";
    s[2].style.display="inline-block";
    s[3].style.width= (expand_width-icon_width-icon_margin-7) +"px";
}

function shrink() {
    if (document.all && !(window.opera)) {
        return
    }
    for (var i=1;i<6;i++){
        s = slideid(i);
        s[1].style.marginLeft=(slide_width-icon_width)/2 +"px";
        s[0].style.width=slide_width + "px";
        s[2].style.display="none";
        s[3].style.width="0";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:03:21.487

`document.all`是微软的东西，没有被标准涵盖（更多在[这个其他 Q/A](https://stackoverflow.com/q/2408424/157247)中）。删除所有使用它并`document.getElementById`根据需要使用它。

我的猜测是，如果您查看 JavaScript 控制台，您会看到与`document.all`不存在相关的错误，因为虽然您正在测试的任何浏览器都支持它在怪癖模式下，但当您将其切换到标准模式时（通过添加 doctype） ，它停止支持它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:04:31.840

添加 HTML5 DOCTYPE ( `<!DOCTYPE html>`) 会将浏览器置于“标准模式”。没有它，浏览器将处于“Quirks 模式”，这本质上是一种 IE5/旧版兼容模式。[MDN 提供了有关该主题的更多信息](https://developer.mozilla.org/en-US/docs/Quirks_Mode_and_Standards_Mode)，以及[Firefox 中行为差异的列表](https://developer.mozilla.org/en-US/docs/Mozilla_Quirks_Mode_Behavior)。

你的脚本最大的问题是使用`document.all`，这是一个非标准的微软东西。你会想要使用标准的 DOM 东西，比如`document.getElementById`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:04:35.157

在关闭正文标记之前包含您的计数脚本，并且不要忘记添加 html 的结束标记

```
<!DOCTYPE html>
<head>
<link rel="stylesheet" href="style.css" />
<script src="menu.js"></script>
</head>
<body onload="compat()">

<div id="Menu" onMouseout="shrink()">
<a href="#" class="slide" id="slide1" onMouseOver="expand(1)">
  <img id="slideimg1" src="home.png" />
<div id="slidediv1">
    <h2 id="slidetext1">Home</h2>
</div>
</a>
<a href="#" class="slide" id="slide2" onMouseOver="expand(2)">
<img id="slideimg2" src="sound.png" />
<div id="slidediv2">
    <h2 id="slidetext2">Music</h2>
</div>
</a>
<a href="#" class="slide" id="slide3" onMouseOver="expand(3)">
<img id="slideimg3" src="blog.png" />
<div id="slidediv3">
    <h2 id="slidetext3">Blog</h2>
</div>
</a>
<a href="#" class="slide" id="slide4" onMouseOver="expand(4)">
<img id="slideimg4" src="note.png" />
<div id="slidediv4">
    <h2 id="slidetext4">Bio</h2>
</div>
</a>
<a href="#" class="slide" id="slide5" onMouseOver="expand(5)">
<img id="slideimg5" src="way.png" />
<div id="slidediv5">
    <h2 id="slidetext5">Links</h2>
</div>
</a>
</div>
</body>
</html> 
```

# r - R中的ggplot错误

> ID：13837011
> 
> 赞同：1
> 
> 时间：2012-12-12T09:50:04.847
> 
> 标签：r, error-handling, ggplot2

我想使用 ggplot 在 R 中绘制时间序列数据，但我遇到了这个错误：

```
Error in continuous_scale(aesthetics, "date", identity, breaks = breaks,  : 
unused argument(s) (format = "%b-%Y") 
```

句法：

```
ggplot(p29, aes(dt, ambtemp)) + geom_line() +
    scale_x_date(format = "%b-%Y") + xlab("") + ylab("Tempreture") 
```

文件名：`p29`

```
 ambtemp                  dt surtemp
1   -1.14 2007-09-29 00:01:57  -2.712
2   -1.12 2007-09-29 00:03:57  -2.775
3   -1.33 2007-09-29 00:05:57  -2.712
4   -1.44 2007-09-29 00:07:57  -2.837
5   -1.54 2007-09-29 00:09:57  -2.775
6   -1.29 2007-09-29 00:11:57  -2.900 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:06:20.197

在函数中`scale_x_date()`你应该写`labels=date_format("%b-%Y")`. 列`dt`也应格式化为`Date`.

```
library(scales)
p29$dt=as.Date(p29$dt, format="%Y-%m-%d %H:%M:%S")    
ggplot(p29, aes(dt, ambtemp)) + geom_line() +
scale_x_date(labels=date_format ("%b-%Y")) + xlab("") + ylab("Tempreture") 
```

要显示小时和分钟，`scale_x_date()`您应该使用`scale_x_datetime()`和编写函数而不是函数`labels=date_format("%H:%M")`。使用控制中断参数`breaks=date_breaks()`。列`dt`也应格式化为`POSIXt`.

```
library(scales)
p29$dt=strptime(p29$dt, "%Y-%m-%d %H:%M:%S")
ggplot(p29, aes(dt, ambtemp)) + geom_line() +
scale_x_datetime(breaks = date_breaks("5 min"),labels=date_format("%H:%M")) + xlab("") + ylab("Tempreture") 
```

# spring - Spring RestTemplate 超时

> ID：13837012
> 
> 赞同：155
> 
> 时间：2012-12-12T09:50:07.133
> 
> 标签：spring, rest, timeout, resttemplate

我想为我的 Web 应用程序使用的休息服务设置连接超时。我正在使用 Spring 的 RestTemplate 与我的服务交谈。我做了一些研究，发现并使用了下面的 xml（在我的应用程序 xml 中），我相信它是为了设置超时。我正在使用 Spring 3.0。

我在这里也看到了同样的问题[Timeout configuration for spring webservices with RestTemplate](https://stackoverflow.com/questions/9158465/timeout-configuration-for-spring-webservices-with-resttemplate)但解决方案似乎不太*干净*，我更喜欢通过 Spring config 设置超时值

```
<bean id="RestOperations" class="org.springframework.web.client.RestTemplate">
    <constructor-arg>

      <bean class="org.springframework.http.client.CommonsClientHttpRequestFactory">
        <property name="readTimeout" value="${restURL.connectionTimeout}" />
      </bean>
    </constructor-arg>
</bean> 
```

似乎无论我将 readTimeout 设置为什么，我都会得到以下信息：

**网线断开：** 等待约20秒，报如下异常：

org.springframework.web.client.ResourceAccessException: I/O error: No route to host: connect; 嵌套异常是 java.net.NoRouteToHostException: No route to host: connect

**网址不正确，因此休息服务返回 404：** 等待大约 10 秒并报告以下异常：

org.springframework.web.client.HttpClientErrorException：404 未找到

我的要求需要更短的超时，所以我需要能够更改这些。关于我做错了什么的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2016-05-02T21:09:04.853

对于**Spring Boot >= 1.4**

```
@Configuration
public class AppConfig
{
    @Bean
    public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) 
    {
        return restTemplateBuilder
           .setConnectTimeout(...)
           .setReadTimeout(...)
           .build();
    }
} 
```

* * *

对于**Spring Boot <= 1.3**

```
@Configuration
public class AppConfig
{
    @Bean
    @ConfigurationProperties(prefix = "custom.rest.connection")
    public HttpComponentsClientHttpRequestFactory customHttpRequestFactory() 
    {
        return new HttpComponentsClientHttpRequestFactory();
    }

    @Bean
    public RestTemplate customRestTemplate()
    {
        return new RestTemplate(customHttpRequestFactory());
    }
} 
```

然后在你的`application.properties`

```
custom.rest.connection.connection-request-timeout=...
custom.rest.connection.connect-timeout=...
custom.rest.connection.read-timeout=... 
```

这是有效的，因为`HttpComponentsClientHttpRequestFactory`有 public setter `connectionRequestTimeout`,`connectTimeout`和`readTimeout`and`@ConfigurationProperties`为您设置它们。

* * *

对于**没有 Spring Boot 的 Spring 4.1 或 Spring 5，**使用`@Configuration`代替`XML`

```
@Configuration
public class AppConfig
{
    @Bean
    public RestTemplate customRestTemplate()
    {
        HttpComponentsClientHttpRequestFactory httpRequestFactory = new HttpComponentsClientHttpRequestFactory();
        httpRequestFactory.setConnectionRequestTimeout(...);
        httpRequestFactory.setConnectTimeout(...);
        httpRequestFactory.setReadTimeout(...);

        return new RestTemplate(httpRequestFactory);
    }
} 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-02-26T15:32:51.680

我终于得到了这个工作。

我认为我们的项目有两个不同版本的 commons-httpclient jar 并没有帮助。一旦我整理出来，我发现你可以做两件事......

在代码中，您可以输入以下内容：

```
HttpComponentsClientHttpRequestFactory rf =
    (HttpComponentsClientHttpRequestFactory) restTemplate.getRequestFactory();
rf.setReadTimeout(1 * 1000);
rf.setConnectTimeout(1 * 1000); 
```

第一次调用此代码时，它将`HttpComponentsClientHttpRequestFactory`为`RestTemplate`. 因此，所有后续调用都`RestTemplate`将使用上面定义的超时设置。

或者更好的选择是这样做：

```
<bean id="RestOperations" class="org.springframework.web.client.RestTemplate">
    <constructor-arg>
        <bean class="org.springframework.http.client.HttpComponentsClientHttpRequestFactory">
            <property name="readTimeout" value="${application.urlReadTimeout}" />
            <property name="connectTimeout" value="${application.urlConnectionTimeout}" />
        </bean>
    </constructor-arg>
</bean> 
```

我在代码中使用`RestOperations`接口并从属性文件中获取超时值。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2017-10-27T01:52:25.877

这个问题是 Spring Boot 搜索的第一个链接，因此，将[官方文档中推荐的解决方案](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-resttemplate.html#boot-features-resttemplate-customization)放在这里会很棒。Spring Boot 有自己的便利 bean [RestTemplateBuilder](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/client/RestTemplateBuilder.html)：

```
@Bean
public RestTemplate restTemplate(
        RestTemplateBuilder restTemplateBuilder) {

    return restTemplateBuilder
            .setConnectTimeout(Duration.ofSeconds(500))
            .setReadTimeout(Duration.ofSeconds(500))
            .build();
} 
```

手动创建 RestTemplate 实例是一种潜在的麻烦方法，因为其他自动配置的 bean 没有被注入手动创建的实例中。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2018-11-27T12:16:24.737

这是我的 2 美分。没什么新东西，但有一些解释、改进和更新的代码。

默认情况下，`RestTemplate`有无限超时。有两种超时：连接超时和读取超时。例如，我可以连接到服务器，但无法读取数据。应用程序挂起，您不知道发生了什么。

我将使用注解，现在它比 XML 更受欢迎。

```
@Configuration
public class AppConfig {

    @Bean
    public RestTemplate restTemplate() {

        var factory = new SimpleClientHttpRequestFactory();

        factory.setConnectTimeout(3000);
        factory.setReadTimeout(3000);

        return new RestTemplate(factory);
    }
} 
```

这里我们使用`SimpleClientHttpRequestFactory`设置连接和读取超时。然后将其传递给 的构造函数`RestTemplate`。

```
@Configuration
public class AppConfig {

    @Bean
    public RestTemplate restTemplate(RestTemplateBuilder builder) {

        return builder
                .setConnectTimeout(Duration.ofMillis(3000))
                .setReadTimeout(Duration.ofMillis(3000))
                .build();
    }
} 
```

在第二个解决方案中，我们使用`RestTemplateBuilder`. 还要注意这两个方法的参数：它们取`Duration`. 现在不推荐使用直接花费毫秒的重载方法。

**使用 Spring Boot 2.1.0 和 Java 11 进行**编辑测试。****

 *** * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-05-26T19:43:33.010

这是设置超时的一种非常简单的方法：

```
RestTemplate restTemplate = new RestTemplate(getClientHttpRequestFactory());

private ClientHttpRequestFactory getClientHttpRequestFactory() {
    int timeout = 5000;
    HttpComponentsClientHttpRequestFactory clientHttpRequestFactory =
      new HttpComponentsClientHttpRequestFactory();
    clientHttpRequestFactory.setConnectTimeout(timeout);
    return clientHttpRequestFactory;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-06-03T01:34:57.083

1.  使用 SimpleClientHttpRequestFactory 的 RestTemplate 超时 要以编程方式覆盖超时属性，我们可以自定义 SimpleClientHttpRequestFactory 类，如下所示。

使用 SimpleClientHttpRequestFactory 覆盖超时

```
//Create resttemplate
RestTemplate restTemplate = new RestTemplate(getClientHttpRequestFactory());

//Override timeouts in request factory
private SimpleClientHttpRequestFactory getClientHttpRequestFactory() 
{
    SimpleClientHttpRequestFactory clientHttpRequestFactory
                      = new SimpleClientHttpRequestFactory();
    //Connect timeout
    clientHttpRequestFactory.setConnectTimeout(10_000);

    //Read timeout
    clientHttpRequestFactory.setReadTimeout(10_000);
    return clientHttpRequestFactory;
} 
```

2.  使用 HttpComponentsClientHttpRequestFactory 的 RestTemplate 超时 SimpleClientHttpRequestFactory 有助于设置超时，但它的功能非常有限，在实时应用程序中可能不够用。在生产代码中，我们可能希望使用支持 HTTP 客户端库的 HttpComponentsClientHttpRequestFactory 以及 resttemplate。

HTTPClient 提供了其他有用的功能，例如连接池、空闲连接管理等。

阅读更多：[Spring RestTemplate + HttpClient 配置示例](https://howtodoinjava.com/spring-restful/resttemplate-httpclient-java-config/)

使用 HttpComponentsClientHttpRequestFactory 覆盖超时

```
//Create resttemplate
RestTemplate restTemplate = new RestTemplate(getClientHttpRequestFactory());

//Override timeouts in request factory
private SimpleClientHttpRequestFactory getClientHttpRequestFactory() 
{
    HttpComponentsClientHttpRequestFactory clientHttpRequestFactory
                      = new HttpComponentsClientHttpRequestFactory();
    //Connect timeout
    clientHttpRequestFactory.setConnectTimeout(10_000);

    //Read timeout
    clientHttpRequestFactory.setReadTimeout(10_000);
    return clientHttpRequestFactory;
} 
```

参考：[Spring RestTemplate 超时配置示例](https://howtodoinjava.com/spring-boot2/resttemplate/resttemplate-timeout-example/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-04T15:10:10.267

我有类似的情况，但也需要设置代理。我能看到的最简单的方法是扩展，`SimpleClientHttpRequestFactory`以便于设置代理（非产品与产品的不同代理）。即使您不需要代理，这仍然可以工作。然后在我的扩展类中，我使用与[source](http://grepcode.com/file/repository.springsource.com/org.springframework/org.springframework.web/3.0.5/org/springframework/http/client/SimpleClientHttpRequestFactory.java?av=f)`openConnection(URL url, Proxy proxy)`相同的方法覆盖该方法，但只是在返回之前设置超时。

```
@Override
protected HttpURLConnection openConnection(URL url, Proxy proxy) throws IOException {
    URLConnection urlConnection = proxy != null ? url.openConnection(proxy) : url.openConnection();
    Assert.isInstanceOf(HttpURLConnection.class, urlConnection);
    urlConnection.setConnectTimeout(5000);
    urlConnection.setReadTimeout(5000);
    return (HttpURLConnection) urlConnection;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-11T17:55:20.950

扩展[本斯卡比亚的](https://stackoverflow.com/users/3828228/benscabbia)答案：

```
private RestTemplate restCaller = new RestTemplate(getClientHttpRequestFactory());

private ClientHttpRequestFactory getClientHttpRequestFactory() {
    int connectionTimeout = 5000; // milliseconds
    int socketTimeout = 10000; // milliseconds
    RequestConfig config = RequestConfig.custom()
      .setConnectTimeout(connectionTimeout)
      .setConnectionRequestTimeout(connectionTimeout)
      .setSocketTimeout(socketTimeout)
      .build();
    CloseableHttpClient client = HttpClientBuilder
      .create()
      .setDefaultRequestConfig(config)
      .build();
    return new HttpComponentsClientHttpRequestFactory(client);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-05T03:28:08.740

```
private static RestTemplate restTemplate;

static {
    HttpComponentsClientHttpRequestFactory rf = new HttpComponentsClientHttpRequestFactory();
    rf.setReadTimeout(3 * 1000);
    rf.setConnectTimeout(2 * 1000);

    restTemplate = new RestTemplate(rf);
    restTemplate.getMessageConverters()
        .add(0, new StringHttpMessageConverter(StandardCharsets.UTF_8));
} 
```**

# tridion - 在 Tridion 2011 SP1 HR1 中模拟核心服务

> ID：13837015
> 
> 赞同：8
> 
> 时间：2012-12-12T09:50:13.470
> 
> 标签：tridion, tridion-2011

我正在尝试在 Tridion 2011 SP1 HR1 中模拟核心服务，但出现此错误：

> 无法处理该消息，因为操作“http://www.sdltridion.com/ContentManager/CoreService/2011/ISessionAwareCoreService/Impersonate”无效或无法识别。

为什么会这样？我必须是盲目的看不出它为什么不起作用......

关于服务器：全新安装 Tridion 2011 SP1 HR1

我的代码如下所示：

```
 client = Client.GetCoreService();

 if (string.IsNullOrEmpty(username)) username = HttpContext.Current.User.Identity.Name;
      client.Impersonate(username); 
```

这是 GetCoreService 方法：

```
public static SessionAwareCoreServiceClient GetCoreService()
{
       AppSettingsReader reader = new AppSettingsReader();

       string coreServiceUrl = (string)reader.GetValue("CoreServiceEndPoint", typeof(string));
       int dataSize = (int)reader.GetValue("DataSize", typeof(int));

       var quotas = new System.Xml.XmlDictionaryReaderQuotas
       {
           MaxStringContentLength = dataSize,
           MaxArrayLength = dataSize,
           MaxBytesPerRead = dataSize
       };

       var httpBinding = new WSHttpBinding
       {
           MaxReceivedMessageSize = 10485760,
           ReaderQuotas = quotas,
           Security = { Mode = SecurityMode.Message, Transport = { ClientCredentialType = HttpClientCredentialType.Windows } }
       };

       var endpoint = new EndpointAddress(coreServiceUrl);
       var result = new SessionAwareCoreServiceClient(httpBinding, endpoint);

       return result;
  } 
```

从 appsettings 中提取（将实际主机名替换为“主机名”）：

```
<add key="CoreServiceEndPoint" value="http://hostname/WebServices/CoreService.svc/wsHttp_2010" />
<add key="DataSize" value="41943040" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:20:54.147

查看来自开源项目的此示例以获取通知，它可以满足您的需要

[http://code.google.com/p/tridion-notification-framework/source/browse/NotificationService/NotificationService/CoreService/Client.cs](http://code.google.com/p/tridion-notification-framework/source/browse/NotificationService/NotificationService/CoreService/Client.cs)

这是模仿的工作线

```
public static SessionAwareCoreServiceClient GetCoreService()
{
    var result = GetNewClient<SessionAwareCoreServiceClient>();

    result.Impersonate(ConfigurationManager.AppSettings.Get("adminUser"));
    return result;
} 
```

还请查看在同一 CS 文件中的示例中创建客户端的方式，以及应用程序设置。我认为您使用的是旧的端点地址，它应该是`http://hostname/webservices/CoreService2011.svc/wsHttp`而不是`http://hostname/WebServices/CoreService.svc/wsHttp_2010`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T12:45:49.203

您正在连接到旧的核心服务 wsHttp 端点。

如果您使用的是 2011 SP1 客户端，则需要改为连接到以下端点：

`http://hostname/webservices/CoreService2011.svc/wsHttp`

# c# - 从数据库打印货物清单

> ID：13837016
> 
> 赞同：0
> 
> 时间：2012-12-12T09:50:15.020
> 
> 标签：c#, sql, database, file

```
 void Main()
    {
        string connString;
        connString = "Data Source=(local);Initial Catalog=Ochhi che guardano;Integrated Security=SSPI";

        String sqlString;
        try
        {
            SqlConnection conn = new SqlConnection(connString);
            conn.Open();
            sqlString = "SELECT Vare.varenavn";
            sqlString += " FROM vare";
            sqlString += " ORDER BY vare.varenavn";
            SqlCommand cmd = new SqlCommand(sqlString, conn);
            SqlDataReader reader =
            cmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection);
            if (reader.HasRows)
            {
                reader.Read();
                Console.WriteLine(reader.GetString(0));
            }
            reader.Close();
            conn.Close();
        }
        catch (System.Data.SqlClient.SqlException e)
        {
            Console.WriteLine(e.ToString());
        }
    }
} 
```

}

我有这个数据库，我有一个需要打印到文本文件并保存的商品清单和听到的驱动器。（变量 = 货物）。但是当我运行这段代码时，我得到一个错误。我的问题是我对这段代码做错了什么以及如何将列表保存在 .txt 文件中。我知道如何在 C# 中处理文件，但不知道如何将它与我的数据库集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:57:28.887

我怀疑你得到了多行，目前你只能显示一行。那是因为您没有遍历阅读器。尝试以下代替您的 if 块。

```
while (reader.Read())
{
    Console.WriteLine(reader.GetString(0));
} 
```

如果要将数据存储在文本文件中，可以将每个返回的字符串存储在列表中，然后将该列表写入文本文件。所以你的代码是：

```
try
{
    SqlConnection conn = new SqlConnection(connString);
    conn.Open();
    sqlString = "SELECT Vare.varenavn";
    sqlString += " FROM vare";
    sqlString += " ORDER BY vare.varenavn";
    SqlCommand cmd = new SqlCommand(sqlString, conn);
    SqlDataReader reader =
    cmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection);
    List<string> strList = new List<string>();
    while (reader.Read())
    {
        string temp = reader.GetString(0);
        strList.Add(temp);
        Console.WriteLine(reader.GetString(0));
    }
    reader.Close();
    conn.Close();
   //code to write list to text file
   File.WriteAllLines(Application.StartupPath + "\\text.txt", strList.ToArray());
}
catch (System.Data.SqlClient.SqlException e)
{
    Console.WriteLine(e.ToString());
} 
```

# rrdtool - rrd 图配置查询

> ID：13837020
> 
> 赞同：0
> 
> 时间：2012-12-12T09:50:30.297
> 
> 标签：rrdtool, rrd

我正在用一些计数更新我的 RRD 文件...

例如：

```
time:       value:
12:00       120
12:05       135
12:10       154
12:20       144
12:25       0
12:30       23
13:35       36 
```

这里我的 RRD 更新如下逻辑：

```
((current value)-(previous value))/((current time)-(previous time)) 
```

例如。 `((135-120))/5 = 15` 但我的问题是当它为 0 时，读数将为负数：

```
((0-144))/5 
```

这里“0”值仅伴随系统故障（从哪里获取数据）..它不能显示这个读数图。

我怎么能像0一样配置它不会更新“RRD图”（跳过这个阅读`(0-144/5))`，下次它会像阅读 `((23-0)/5)` 但不是`(23-144/10)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:33:14.517

在创建 RRD 时指定数据源时，您可以指定可接受的值范围。

`DS:data_source:GAUGE:10:1:U`将只接受大于 1 的值。因此，如果您在更新期间得到 0，rrd 将替换它，`unknown`并且我认为它可以找到丢弃它的方法。

# java - 动态添加面板

> ID：13837021
> 
> 赞同：0
> 
> 时间：2012-12-12T09:50:33.567
> 
> 标签：java, jpanel, swingx

我在我的表单`JList`组件中有，我希望当用户从中选择项目时，`JList`在现有的`JLayeredPanel`带有项目名称的面板上添加一个新面板。有我的面板：

```
package forme;

/**
 *
 * @author Administrator
 */

public class PanelProcesses extends javax.swing.JPanel {

    /**
 * Creates new form PanelProcesses
 */
public PanelProcesses() {
    initComponents();
}

PanelProcesses(String name) {
    initComponents();
    jlbProcess.setText(name);
}                    
} 
```

当用户点击项目时，主表单中有方法`JList`：

```
 private void jlProcessesMouseClicked(java.awt.event.MouseEvent evt) {

     Process p = (Process) jlProcesses.getSelectedValue();
    System.out.println(p.getName());
    PanelProcesses pp = new PanelProcesses(p.getName());
    pp.setOpaque(true);
   // pp.setVisible(true);
    jlpProcesses.add(pp);
    jlpProcesses.repaint();
    jlpProcesses.setVisible(true);
    //this.setVisible(true);
} 
```

问题是当我单击项目面板时未附加到`JLayeredPanel`（jlpProcesses）。有人知道我在哪里犯错吗？通过调试模式，我看到创建了新实例操作`PanelProcess`，并且可见属性为真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:41:45.077

我通过设置 BoxLayout 解决了这个问题，然后 Java 自动将新面板放在其他面板下方。

# excel - 日期值减法产生错误错误

> ID：13837023
> 
> 赞同：0
> 
> 时间：2012-12-12T09:50:35.853
> 
> 标签：excel, vbscript

我正在使用以下代码以 Day:Hour:Minute 格式显示日期差异。

```
 Function TimeSpan(dt1, dt2) 

    Dim seconds,minutes,hours,days

    If (isDate(dt1) And IsDate(dt2)) = false Then 
        TimeSpan = "00:00:00" 
        Exit Function 
    End If 

    seconds = Abs(DateDiff("S", dt1, dt2)) 
    minutes = seconds \ 60 
    hours = minutes \ 60 
    days  = hours \ 24
    minutes = minutes mod 60 
    seconds = seconds mod 60 
    days    = days    mod 24 

    if len(hours) = 1 then hours = "0" & hours 

    TimeSpan = days& ":" & _ 
        RIGHT("00" & hours , 2) & ":" & _ 
        RIGHT("00" & minutes, 2) 
End Function 
```

但在某些情况下，它不会产生预期值。

```
 D1=#9/24/2012  8:09:15 AM# and D2=#9/25/2012  8:09:15 AM# gives correct data like 1:24:00 whereas below are producing error when working with VBScript and Excel.
  D1=#9/5/2012  8:45:43 AM# and D2=#9/25/2012  8:45:43 AM# result=0.888888888888889
  D1=#9/6/2012  8:29:34 AM# and D2=#9/17/2012  8:59:36 AM# result=0.503125 
```

你能解释一下为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:16:16.640

尝试我在您的**UDF中**[较早的帖子](https://stackoverflow.com/questions/13815538/how-to-get-the-difference-in-minutes-between-two-dates-in-microsoft-excel/13816739#13816739)中的回答如下：此答案在**VBA中**

 ******请声明所有变量并通过添加选项来强制自己声明:)**

```
option explicit
Function TimeSpan(dt1 As Date, dt2 As Date) As String
Dim dtTemp As Date

    Application.ScreenUpdating = False
        If (IsDate(dt1) And IsDate(dt2)) = False Then
            TimeSpan = "00:00:00"
            Exit Function
        End If

        If dt2 < dt1 Then
            dtTemp = dt2
            dt2 = dt1
            dt1 = dt2
        End If
        '-- since you only had days, I have put up to days here. 
        '-- if you require months, years you may use yy:mm:dd:hh:mm:ss
        '-- which is pretty self-explainatory ;)
        TimeSpan = Application.WorksheetFunction.Text((dt2 - dt1), "dd:hh:mm:ss")

    Application.ScreenUpdating = False
End Function 
```

UDF 输出：

![在此处输入图像描述](../Images/ca96915798d5ca20142d4d4551c282c0.png)

**但如果你有自由和可能的话，我真的建议你使用 Excel 工作表函数。**

* * *

## 如果日期差异超过 31 天

然后使用[本文中的解决方案将](http://www.cpearson.com/excel/datedif.aspx) 合并`DateDiff`到 UDF 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:24:07.137

请注意，我更习惯于编写 VBA，因此您可能需要在这里和那里进行调整。

或者，您可以将两个日期从彼此中减去作为数值：

```
Dim dblDateDiff as Double
dblDateDiff = Abs(dt2 - dt1) 
```

现在时间跨度将是（不要使用“d”，因为这不包括可能过去的月份和年份）：

```
Timespan = Int(dblDateDiff) & ":" & Hour(dblDateDiff) & ":" & Minute(dblDateDiff) 
```

如果时间跨度的方向（正或负）相关，您可以将最后一行更改为：

```
Timespan = Sgn(dblDateDiff) * Int(dblDateDiff) & ":" & Hour(dblDateDiff) & ":" & Minute(dblDateDiff) 
```

对于您的时间格式问题：

1.  将输出单元格的数字格式设置为文本，或
2.  在字符串的其余部分前面添加一个单引号：

    ```
     Timespan = "'" & Sgn(dblDateDiff) * Int(dblDateDiff) & ":" & Hour(dblDateDiff) & ":" & Minute(dblDateDiff) 
    ```****

# php - 存储新创建的数据库凭据

> ID：13837025
> 
> 赞同：0
> 
> 时间：2012-12-12T09:50:45.897
> 
> 标签：php

我正在创建一个 php 应用程序，它为每个新注册用户创建一个新数据库。如何安全存储数据库凭据，以便在用户登录时检索它。

*   具有加密数据库凭据的核心数据库？
*   在webroot之外写文件？写权限呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:53:30.923

我认为您必须创建一个“全局”数据库来存储凭据以及与新数据库的关系。

# sql - Oracle查询将奇数行与偶数相邻

> ID：13837026
> 
> 赞同：1
> 
> 时间：2012-12-12T09:50:47.780
> 
> 标签：sql, oracle, oracle10g

我需要一些帮助来制定 Oracle 中的数据。我举个例子——

我有一个带有名称列的表客户。

```
Customer
  Name
  Ashish
  Amit
  Sunny
  Bob. 
```

我想以奇数名称与偶数名称相邻的格式输出；输出将是

```
Customer
Name1     Name2
Ashish    Amit
Sunny     Bob 
```

等等...

我尝试了以下查询，但它没有给我所需的输出。

```
select  name, 
  case Mod(rownum,2) 
    when 1  then  name
  end  col1,   
  case Mod(rownum,2) 
    when 0  then  name 
  end  col2
from Customer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:06:53.080

这基本上是`PIVOT`数据的一部分，但 Oracle10g 没有数据透视函数，因此您必须使用聚合和`CASE`语句来复制它。如果您也应用了 [`row_number() over()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions156.htm#i86310)，您可以将数据转换为您想要的结果。

```
select 
  max(case when col = 1 then name end) Name1,
  max(case when col = 0 then name end) Name2
from
(
  select name,  mod(rownum, 2) col,
    row_number() over(partition by mod(rownum, 2) order by name) rn
  from customer
) 
group by rn 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/500a5/18)

结果：

```
|  NAME1 | NAME2 |
------------------
| Ashish |  Amit |
|  Sunny |   Bob | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:03:19.910

您需要将 2 行 2 行分组，您可以试试这个：

```
SELECT MAX(decode(rn/2, floor(rn/2), NAME)) name1, 
       MAX(decode(rn/2, floor(rn/2), '', NAME)) name2
  FROM (SELECT c.*, rownum-1 rn 
          FROM Customer)
GROUP BY floor(rn/2) 
```

行在子查询中任意排序。您可以使用分析 ( [`row_number() OVER (ORDER BY ...)`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions156.htm#i86310)) 来获得有意义的订单。

# php - PHP注销需要解决方案

> ID：13837037
> 
> 赞同：0
> 
> 时间：2012-12-12T09:52:03.523
> 
> 标签：php, html

我要为我的一个项目编写一个后端。昨天我做了登录和注销功能。在Backed中有一个导航点叫logout：

```
 if (isset($_GET['act'])) {
$selection = $_GET['act'];

switch ($selection) {
    case "home":
    include("include/home.php");
    break;
    case "registration":
    include("include/registration.php");
    break;
    case "cusadm":
    include("include/cusadm.php");
    break;
    case "history":
    include("include/history.php");
    break;
    case "logout":
    include("include/logout.php");
    break;
    default:
    include("include/home.php"); 
```

注销.php

```
<?php 
$_SESSION = array();
header('Location:index.php');
?> 
```

我现在的问题是我的表单现在有链接，并且每个链接都会注销。

这是一个截图： [http ://s13.postimage.org/s4k7akc5j/problem.jpg](http://s13.postimage.org/s4k7akc5j/problem.jpg)

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:55:10.370

看起来你还没有关闭锚标签或类似的东西。

检查您的标记：http: [//validator.w3.org](http://validator.w3.org)

# sql - 加入不使用用户表处理 information_schema.tables

> ID：13837039
> 
> 赞同：3
> 
> 时间：2012-12-12T09:52:14.033
> 
> 标签：sql, sql-server, sql-server-2008

我在 sql server 中创建了一个表，其中包含数据库中表的名称和一些其他信息。当我运行这个查询

```
SELECT upper(TABLE_NAME) TABLE_NAME, ISNULL(syn_schema,'N') syn_schema, isnull(syn_data,'N') syn_data
FROM information_schema.tables 
left join sync_config on TABLE_NAME = TAB_NAME 
where table_type = 'BASE TABLE' 
ORDER BY TABLE_NAME 
```

这会从 information_schema.tables 中返回数据，但不会从 sync_config 表中返回数据。syn_schema 和 syn_data 列在 sync_config 表中。总而言之，join 不适用于两个表。我尝试将sync_config 表中tab_name 列的数据类型从VARCHAR 更改为SYSNAME。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:57:11.443

好吧，如果连接不起作用，则表明这`TABLE_NAME = TAB_NAME`绝不是真的。检查表名字段以查看它们是否真的包含您期望的内容。它们是否完全匹配，包括大小写（即使 SQL 在查询中引用表时不区分大小写，但表名的字符串比较*可能** 区分大小写）？

除此之外，发布表格的结构和示例数据以获得更多帮助。

*谢谢马丁史密斯。

# magento - 在 Magento 中导入导出可配置产品

> ID：13837049
> 
> 赞同：0
> 
> 时间：2012-12-12T09:52:38.877
> 
> 标签：magento, import, export, configurable-product

我正在进行一个紧急项目，我需要导入和导出可配置产品，并正确映射到简单产品和其他图像。

我首先从 Magento Connect 以 99 美元的价格购买了一个用于导入导出的插件，但它并没有像承诺的那样做。我们多次遵循推荐的程序。它可以映射可配置的简单但不能映射额外的图像。

然后我尝试使用自定义解决方案，但它无法映射数量以及其他图像..

接下来我偶然发现了这个很棒的工具，叫做 MAGMI。我尝试使用此工具导入，但尽管它正确导入，但它会为每个可配置产品显示警告：

> 未找到可配置 sku 的可配置属性：dress1 无法链接简单。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:31:37.467

我不能给你关于使用 Magmi 的建议，但我会为一个名为[ApiImport](https://github.com/danslo/ApiImport)的免费模块添加一个无耻的插件。它是基于 ImportExport 的，而且是免费的。

导入都是通过将数据作为数组提供来完成的。导入单个可配置产品非常简单：

```
<?php

require_once 'app/Mage.php';

Mage::init();

$entities = array(
    // Configurable product.
    array(
        'description'       => 'Some description',
        '_attribute_set'    => 'Default',
        'short_description' => 'Some short description',
        '_product_websites' => 'base',
        'status'            => Mage_Catalog_Model_Product_Status::STATUS_ENABLED,
        'visibility'        => Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH,
        'tax_class_id'      => 0,
        'is_in_stock'       => 1,
        'sku'               => 'some_configurable',
        '_type'             => Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE,
        'name'              => 'Some configurable',
        'price'             => rand(1, 1000),
        'weight'            => rand(1, 1000),

        // Link the first simple product:
        '_super_products_sku'     => 'my_red_blue_simple', 
        '_super_attribute_code'   => 'color',
        '_super_attribute_option' => 'blue'
    ),

    // Now optionally link some more simple products:
    array(
        '_super_products_sku'     => 'my_red_simple_product', 
        '_super_attribute_code'   => 'color',
        '_super_attribute_option' => 'red'
    )
);

// Start the import.
Mage::getModel('api_import/import_api')->importEntities(
    $entities, 
    Mage_ImportExport_Model_Export_Entity_Product::getEntityTypeCode()
); 
```

如果您在以编程方式生成这些实体方面需要更多帮助，可以查看[ApiImport 中的 Test helper](https://github.com/danslo/ApiImport/blob/master/code/Helper/Test.php)。它可以为所有产品类型和客户生成随机产品。

我还建议您在提出任何问题之前先阅读[常见问题](https://github.com/danslo/ApiImport/wiki/Frequently-Asked-Questions)解答 :)

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:12:23.867

要让 magmi 导入可配置项，您必须在 csv 中设置“configurable_attributes”列并将其填充为可配置类型行，并仔细阅读可配置插件[wiki 文档](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Configurable_Item_processor)，以指导您了解它提供的多种可能性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T10:59:07.667

MAGMI的创造者dweeves给出了很好的回答

问题是 magmi 使用特定的 CSV 来导入不同的功能。如果您需要列标题及其内容的示例，可以在此处查看它们[https://docs.google.com/spreadsheet/ccc?key=0AgOC3MxA5YaLdFFwTk9uY2RQbmthQmZZdmVYZ3FUOEE&usp=drive_web#gid=2](https://docs.google.com/spreadsheet/ccc?key=0AgOC3MxA5YaLdFFwTk9uY2RQbmthQmZZdmVYZ3FUOEE&usp=drive_web#gid=2)。

例如：

```
 type           configurable_attributes     super_attribute_pricing                                 
 configurable   size,color                  size::L:12;XL:15,color::red:10;green:15 
```

在这种情况下，它将动态生成从“configurable_attributes”和“super_attribute_pricing”列计算的所有可能的简单变体

此外，如果您正在考虑付费扩展，这里有一个很好的稳定模块[，](http://www.magelynx.com/shop/import-export-plugin.html)它是基于 MAGMI 的 UI 包装。它会自动形成列。

例如，您可以使用此扩展程序将您的可配置产品以 magmi 格式直接导出到 Google 电子表格中，然后使用此格式导入新产品。

# java - 如何仅将 csv 文件上传到 Java 中的服务器

> ID：13837053
> 
> 赞同：0
> 
> 时间：2012-12-12T09:52:51.653
> 
> 标签：java, file-upload, csv

我有一个需要上传 csv 文件的应用程序。

一切正常。我正在成功上传扩展名为**.csv**的文件。

现在问题来了。有人可能会尝试通过将扩展名更改为并上传到服务器来上传**exe文件。**`.csv`这是完美的上传。有人建议我使用`mimetype`. 我遵循[本](http://www.rgagnon.com/javadetails/java-0487.html)教程。

我正在获取`null`csv 文件的 mimetype。

所以你能帮我如何只上传csv文件吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:02:25.650

好吧，你是在正确的轨道上。您需要进行某种文件检查，而不仅仅是信任文件扩展名。

要么你必须自己编程，要么使用第三方库（这就是你正在做的）。

如果您继续使用第三方框架，则您必须遇到配置问题。问题是我无法从您的描述中看出，因为我不知道图书馆。

如果您只对识别 CSV 文件感兴趣，我会推荐一些至少您理解并可以控制的简单方法。比如这种方法：

假设 CSV 文件由 0..n 行具有相同数量的元素 pr 组成。行，由以下字符之一分隔：, ;

EXE 文件不太可能具有这种结构，除非有人在了解您的实现的情况下故意攻击您的系统。

阅读前几行。

在正则表达式 ([,;]) 上拆分它们。

检查结果是否具有相同数量的元素。

为了更加安全，请检查它们是否在同一个字符上分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:10:46.403

即使您设置了 mimetype，我猜这也只能由文件扩展名确定。所以设置`.csv`很可能仍然会绕过它。

如果您发现字符数据以外的任何内容引发错误或忽略文件，我会做的只是读取文件以获取 ASCII 数据。通过数字范围循环和比较，或者您可以将其读取为字符串并使用正则表达式，例如`[^\\p{ASCII}]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:13:25.423

据我所知，您无法阻止某人将任何文件类型上传到您的服务器，特别是由于您所说的更改扩展名等问题。您唯一的可能是在收到文件后尝试将其解析为 *.csv。如果成功解析它，则将其存储在存储库中并以​​成功消息响应，如果没有，则忽略该文件并以错误消息响应。

显然，您可以[使用 Javascript 解析 csv 文件客户端，](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)但您应该始终验证您的文件服务器端。

Myme type 仅告诉您的服务器预期的类型，但这不会阻止某人向您发送非 csv 文件。

# http - 在 weblogic 下运行 servlet 时找不到 HTTP PUT 请求的原始文件名

> ID：13837055
> 
> 赞同：2
> 
> 时间：2012-12-12T09:52:57.647
> 
> 标签：http, servlets, weblogic, filenames, put

我已经设置了一个简单的 servlet，旨在用作文件服务器。我使用 Weblogic 10.3.2 作为容器。

我想处理 PUT 请求，所以我实现了[doPut](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doPut%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)方法。由于它是一个 PUT 请求，我希望在标题中找到我推送到服务器的文件的名称。

我推送了一个名为 test.txt 的文件，其中包含“Hello World”。

```
curl -T test.txt http://xxxxxxx:71xxx 
```

使用 curl 和 netcat，这是请求。

```
PUT /test.txt HTTP/1.1
User-Agent: curl/7.19.0 (x86_64-suse-linux-gnu) libcurl/7.21.2 OpenSSL/0.9.8h zlib/1.2.3
Host: xxxxxxxxx:71xx
Accept: */*
Content-Length: 12
Expect: 100-continue

Hello World 
```

使用 servlet 和 weblogic 10.3.2，这里是[HTTPServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)。这是我在发送 curl 命令后停止打印 HTTPServletRequest java 对象的 doPut 方法时得到的。

```
weblogic.servlet.internal.ServletRequestImpl@17d11f0[
PUT /WebServer/FileServlet HTTP/1.1
User-Agent: curl/7.19.0 (x86_64-suse-linux-gnu) libcurl/7.21.2 OpenSSL/0.9.8h zlib/1.2.3
Accept: */*
Content-Length: 12
Expect: 100-continue

] 
```

如果我处理 HTTPServletRequest 的输入流，我会得到文件的内容，但会丢失文件名。

有没有办法在 HTTPServletRequest 中获取原始文件名？你能解释一下发生了什么吗？

编辑：实际上我不明白的是为什么 requestURL 和 requestURI 会改变并反映 servlet 映射而不是原始信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:06:59.577

文件名不作为文件的一部分传递。（因此，如果您从带有名为“bodyOnly”的文件输入的网页作为 POST 上传，您将从“bodyOnly”参数中获取文件名）

因此，您将不得不找到另一种传递文件名的方法 - 也许合适的方法是让您的服务器按照以下方式处理 url

```
http://xxxxxxx:71xxx/[filename] 
```

所以你上传文件

```
curl -T test.txt http://xxxxxxx:71xxx/test.txt 
```

# timezone - 将 TYPO3 安装移至不同时区的服务器 - 所有日期均已偏移

> ID：13837058
> 
> 赞同：0
> 
> 时间：2012-12-12T09:53:00.000
> 
> 标签：timezone, typo3

我将 TYPO3 4.7.7 (MySQL) 安装从 GMT+1 的服务器移动到 GMT+2 的服务器。

现在所有显示日期和时间的页面都有以下区别：

旧服务器：

```
<p>published: 03 Dec 2012 – 12:00</p> 
```

新服务器：

```
<p>published: 03 Dec 2012 – 13:00</p> 
```

我尝试通过更改时区偏移量`$TYPO3_CONF_VARS['SYS']['phpTimeZone']`，`$TYPO3_CONF_VARS['SYS']['serverTimeZone']`但即使在清除所有缓存后也没有任何反应。

请注意，显然我不想更改系统（linux）的时间或时区设置。

我接下来应该看哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-22T20:34:33.730

为 TYPO3 设置 PHP 时区。

$GLOBALS['TYPO3_CONF_VARS']['SYS']['phpTimeZone'] = '欧洲/柏林';

为 TYPO3 设置服务器时区。

$GLOBALS['TYPO3_CONF_VARS']['SYS']['serverTimeZone'] = '1';

修改 TYPO3 tt_content 和 TYPO3 扩展中字段 tstamp 的输出：

```
if (!empty($GLOBALS['TYPO3_CONF_VARS']['SYS']['serverTimeZone'])) {
    $row['tstamp'] += ($GLOBALS['TYPO3_CONF_VARS']['SYS']['serverTimeZone'] * 3600);
} 
```

这是在文件夹 /typo3/sysext/cms/tslib/content 中：

class.tslib_content_content.php 行前`$this->cObj->lastChanged($row['tstamp']);`

class.tslib_content_records.php 行前`$this->cObj->lastChanged($row['tstamp']);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:47:48.897

也许是这样的：

排版：

```
strftime.GMT = 2 
```

来自：[http ://www.typo3.net/forum/beitraege/extensions_schreiben/106541/](http://www.typo3.net/forum/beitraege/extensions_schreiben/106541/)

# php - 未为从 HTML2PDF 生成的文件保存 PDF 名称

> ID：13837059
> 
> 赞同：2
> 
> 时间：2012-12-12T09:53:00.253
> 
> 标签：php, mysql, pdf-generation, html2pdf

我面临一个非常令人沮丧的问题。我正在使用 html2pdf 生成一个 pdf 文件，它会在带有 pdf 插件的弹出屏幕中正确显示。当我尝试保存文件时，它没有使用我分配的文件名。它取而代之的是用于生成文件的页面的名称。

```
 $html2pdf = new HTML2PDF('P', 'A4', 'en', false, 'ISO-8859-15', array(6,6,6,6));
    $html2pdf->setDefaultFont('Arial');
    $html2pdf->writeHTML($content, isset($_GET['vuehtml']));
    $html2pdf->Output($filename.'.pdf'); 
```

非常感谢您的帮助。

谢谢并恭祝安康，

巴布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:21:13.753

什么html2pdf版本？尝试`$html2pdf->Output($filename.'.pdf', 'D');`强制下载并检查名称。也许您可以`error_reporting(-1);`在脚本顶部添加以检查最终警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:53:17.690

使用“D”进行下载时，文件名建议可以正常工作。不幸的是，当使用“O”打开时，它不建议在保存时使用变量名，而只是建议文件名。

# php - 致命错误：找不到类“CI_Pagination”... Codeigniter

> ID：13837061
> 
> 赞同：0
> 
> 时间：2012-12-12T09:53:01.570
> 
> 标签：php, codeigniter

我想在`CI_pagination`类中添加 ajax 分页，但为此我想创建一个`MY_Pagination`扩展 CI_Pagination 类的类，但是当我`$this->load->library('pagination');`在控制器中使用这个库时它会出错：并在新的 MY_Pagination 类中调用测试函数

`Fatal error: Call to undefined method CI_Pagination::test() ...`

我还在 config.php 中添加了一行`$config['subclass_prefix'] = 'MY_';`我更改了子类名称，`Please note that all native CodeIgniter libraries are prefixed with CI_ so DO NOT use that as your prefix.`因为[http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

这是我的代码

```
<?php
class MY_Pagination extends CI_Pagination {

    function __construct() {
        parent::__construct();
    }
    function test()
    {
       echo 'test';
    }
}
?> 
```

此代码保存在文件 MY_Pagination.php 中。

[我从https://www.codeigniter.com/user_guide/general/creating_libraries.html](https://www.codeigniter.com/user_guide/general/creating_libraries.html)阅读了文档，但这不起作用，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:58:29.757

`CI_Pagination`在尝试扩展之前加载类，所以

```
$this->load->library('pagination'); // base class
$this->load->library('ajax_pagination'); // custom derived class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:56:42.863

你为什么要为分页建立一个库。

Codeigniter 已经有一个分页库

参考这个

[http://ellislab.com/codeigniter/user-guide/libraries/pagination.html](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)

# node.js - Node.JS回调函数，监听输入对象事件

> ID：13837062
> 
> 赞同：1
> 
> 时间：2012-12-12T09:53:01.200
> 
> 标签：node.js, callback

以下是标准的 Node.js http get 请求。在回调函数中，我们监听响应“数据”和“结束”事件。

我的问题是：如果响应数据事件在回调执行之前触发怎么办？对我来说似乎是可能的。

```
var request = http.get(option, function(res) {
            res.setEncoding('utf8');
            var data = "";
            res.on('data', function(d) {
                data += d
            });

            res.on('end', function() {
                ...
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:16:13.230

`res`只是[**http.ClientResponse**](http://nodejs.org/api/all.html#all_http_clientresponse)类的一个实例，它[在](https://github.com/joyent/node/blob/3c293ba27250f1885efa8d8db8e75d3ea033c206/lib/http.js#L111)响应标头处理之后并且严格在 HTTP 响应正文之前*[神奇地](https://github.com/joyent/node/blob/3c293ba27250f1885efa8d8db8e75d3ea033c206/lib/http.js#L1183)* [进入](https://github.com/joyent/node/blob/3c293ba27250f1885efa8d8db8e75d3ea033c206/lib/http.js#L1483)回调。

# java - 通过控制台输入字符串

> ID：13837065
> 
> 赞同：-3
> 
> 时间：2012-12-12T09:53:03.557
> 
> 标签：java

我需要一个代码来在控制台中编写字符串并与数组进行比较。

```
String Array = {"skill"};
Console co=System.console(); 
```

然后将 Array 与 co 进行比较...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:26:10.670

这是一个从键盘读取字符串并将字符串与另一个字符串进行比较的示例

```
import java.util.Scanner;
public class Main
{
    public static void main(String args[])
    {
        String input = null;
        String compareString = "hello world";
        Scanner inputReader = new Scanner(System.in);
        System.out.println("please enter: hello world" );

        // here is how you take the input from keyboard

        input = inputReader.nextLine();
                // this is how you write to console
        System.out.println("You entered :" + input);

        //Here is how you compare two string
        if(compareString.equals(input))
        {
            System.out.println("input is: hello world");
        }
        else
        {
            System.out.println("input is not: hello world");
        }
    }
} 
```

执行1：

```
Please enter: hello world 
```

输入：

```
hello world 
```

输出：

```
You entered :hello world
input is: hello world 
```

执行2：

```
Please enter: hello world 
```

输入：

```
hello 
```

输出：

```
You entered :hello 
input is not: hello world 
```

# ruby-on-rails - 对象 ID 未保存

> ID：13837072
> 
> 赞同：0
> 
> 时间：2012-12-12T09:53:13.997
> 
> 标签：ruby-on-rails, ruby

我正在尝试更新 Photo 的 listing_id，但由于某种原因它不会保存 id。我传入一个包含 3 个或更多图像 ID 的数组，然后遍历每个图像 ID，这里是代码：

```
 def create
    @listing.landlord = current_landlord
    if @listing.save
      params[:listing][:images].each do |image|
        Photo.find_by_id(image).listing_id = @listing.id
        @listing.save
      end
      render :show, :status => 200
    else
      render :status => 403, :json => {:errors => @listing.errors}
    end
  end 
```

关于照片不保存列表 ID 的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:55:51.353

```
Photo.find_by_id(image).listing_id = @listing.id
@listing.save 
```

为什么`@listing.save`要保存照片时要打电话？此外，您正在设置`listing_id`一个无法访问的临时变量。你可能打算写这样的东西

```
photo = Photo.find_by_id(image)
photo.listing_id = @listing.id
photo.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:56:49.710

您需要在照片对象上调用保存而不是列出，

而不是这段代码

```
 Photo.find_by_id(image).listing_id = @listing.id
  @listing.save 
```

尝试

```
 photo=  Photo.find_by_id(image)
 photo.listing_id = @listing.id
 photo.save 
```

# java - 使用 JODA API 计算夏令时剩余天数

> ID：13837075
> 
> 赞同：1
> 
> 时间：2012-12-12T09:53:19.220
> 
> 标签：java, android, calendar, jodatime, android-calendar

我有一个要求，例如计算两个日期之间的天数，并通过将周/月添加到日期来计算未来日期。我使用了 java.util.Calendar；和 java.util.Date。这些都没有给出准确的结果，它在夏令时问题上失败了。所以我决定使用 JODA 日历 API。我对 JODA API 很陌生。请任何人提供示例代码来计算以下要求。

1).noOfDays(String currDate, String tarDate) 2).addMonths(String date, int months) 3).addDays(String date, int days) 4).futureDate(String date,int week)

谢谢 Ganesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:54:27.147

0) 要将字符串转换为日期，请使用
[DateTimeFormatter](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html)
例如，如果您的日期看起来像`"31/12/2012"`

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("dd/MM/yyyy");  
DateTime date = dtf.parseDateTime("31/12/2012"); 
```

此类[ISODateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html)包含基本日期格式的格式化程序。
1) 要计算两个日期之间的天数，例如使用 Days [#daysBetween方法](http://joda-time.sourceforge.net/apidocs/org/joda/time/Days.html#daysBetween%28org.joda.time.ReadableInstant,%20org.joda.time.ReadableInstant%29)

```
DateTime date1 = dtf.parseDateTime("31/12/2012");    
DateTime date2 = dtf.parseDateTime("15/11/2012");  
int daysbetween = Days.daysBetween(date1, date2); 
```

2) 添加月份日期使用[DateTime#plusMonths()](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#plusMonths%28int%29)

```
DateTime newDate = dtf.parseDateTime("31/12/2012").plusMonths(5); 
```

3）添加日期使用方法`DateTime#plusDays()`
4）添加星期日期使用方法如果您使用没有时间的日期，`DateTime#plusWeeks()`
您也可以使用[LocalDate](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html)类而不是[DateTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)

# wireshark - 如何随意编辑和篡改数据包？

> ID：13837077
> 
> 赞同：3
> 
> 时间：2012-12-12T09:53:23.980
> 
> 标签：wireshark, tcpdump

我有什么工具或选项，以便我可以以任何我想要的方式编辑或篡改 Wireshark/tcpdump 捕获 - 无论是 IP 标头、TCP 层、有效负载部分还是原始数据包？我看过[Scapy](https://www.secdev.org/projects/scapy/)和[libcrafter](http://code.google.com/p/libcrafter/)。[Netdude](http://netdude.sourceforge.net/)也很棒，但是这个项目不是作者维护的。

有什么更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:50:59.880

我发现了一个工具，虽然有点慢，但几乎可以满足上述要求。

它是[电源编辑 pcap](http://sourceforge.net/projects/powereditpcap/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:06:39.697

我尝试过的一些有用工具是[Editcap](http://www.wireshark.org/docs/man-pages/editcap.html)、[pktanon](http://www.tm.uka.de/software/pktanon/)、[tcprewrite](http://tcpreplay.synfin.net/wiki/tcprewrite)和[bittwist](http://bittwist.sourceforge.net/)。

# javascript - Javascript 闭包变量性能

> ID：13837083
> 
> 赞同：1
> 
> 时间：2012-12-12T09:54:04.453
> 
> 标签：javascript, jquery, performance

我有一个绑定不同表单输入的函数

```
function bindInputs() {
    $(".inputContainer").each(function(i){
        var inputContainer = $(this),
            input = $("input.input", inputContainer),
            inputType = inputContainer.attr("data-inputType"),
            input_Id = inputContainer.attr("id").replace("inputContainer_", "");

        if(inputType == "TextEditor") {
            input.unbind("change").bind("change", function() {
                inputContainer.removeClass("nullValue");
                var value = input.val();
                saveInputValue(input_Id, value);
            });

            return true;
        }

        if(inputType == "NumericEditor") {
            input.numeric({ allow: "." });
            input.unbind("change").bind("change", function() {
                inputContainer.removeClass("nullValue");
                var value = getNumericValue(input.val());
                saveInputValue(input_Id, value);
            });
        }

        // so on
    });
}; 
```

这个函数会造成内存泄漏吗？我担心的是我将所有共享变量放在最上面并在“更改”回调函数中使用它们。

如果我重新计算回调函数上的共享变量会有所不同吗？

```
if(inputType == "TextEditor") {
    input.unbind("change").bind("change", function() {
        var elem = $(this),
            inputContainer = elem.closest(".inputContainer"),
            input_Id = inputContainer.attr("id").replace("inputContainer_", "");

        inputContainer.removeClass("nullValue");
        var value = input.val();
        saveInputValue(input_Id, value);
    });

    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:56:20.677

它不会造成*泄漏*。只要这些函数在内存中，它就会将这些*变量保留在内存中。*

是否要这样做取决于您，这是一种权衡。对于`change`处理程序，重新查询 DOM 的开销很小，因此您可以使用第二个示例，尽管您在该示例中保留的实际内存影响相当小。在`mousemove`处理程序中，您可能会走另一条路，因为`mousemove`处理程序需要非常快速地完成他们的工作。

在下面的评论中重新提出您的问题：

> 说我会选择第二种方法，我将如何防止浏览器保存顶级变量？我在函数结束时将它们设置为 null 吗？

如果您要使函数不依赖函数中的*任何内容*，请在`bindInputs`函数之外完全定义它们。然后，您根本不会在调用的上下文中创建任何闭包`bindInputs`，并且该上下文可以是 GC'd（以及它包含的任何变量）。将变量设置为`null`or`undefined`只是将它们设置为`null`or `undefined`，它不会摆脱它们。（虽然在那个时候，包含它们的上下文非常小。只有三四个不特别引用任何东西的变量。）

这可能是这样的：

```
function bindInputs() {
    $(".inputContainer").each(function(i){
        var inputContainer = $(this),
            input = $("input.input", inputContainer),
            inputType = inputContainer.attr("data-inputType");

        if(inputType == "TextEditor") {
            input.unbind("change").bind("change", handleTextEditorChange);

            return true;
        }

        if(inputType == "NumericEditor") {
            input.numeric({ allow: "." });
            input.unbind("change").bind("change", handleNumericEditorChange);
        }

        // so on
    });
}

function handleTextEditorChange() {
    // ...implementation...
}

function handleNumericEditorChange() {
    // ...implementation...
} 
```

# c# - asp.net 中的自定义错误页面

> ID：13837085
> 
> 赞同：1
> 
> 时间：2012-12-12T09:54:06.990
> 
> 标签：c#, asp.net, custom-error-pages

我在 asp.net 中有 Web 应用程序。我必须实现自定义错误页面。表示是否发生任何错误（运行时）。我必须在 errorpage.aspx 上显示异常和堆栈跟踪，我应该从母版页还是在页面级别以及如何处理。

```
<customErrors mode="On" defaultRedirect="~/Error_Page.aspx"></customErrors> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:59:26.767

您可以在 global.asax 中处理它：

```
protected void Application_Error(object sender, EventArgs e)
{
   Exception ex = System.Web.HttpContext.Current.Error;
   //Use here
   System.Web.HttpContext.Current.ClearError();
   //Write custom error page in response
   System.Web.HttpContext.Current.Response.Write(customErrorPageContent);
   System.Web.HttpContext.Current.Response.StatusCode = 500;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:59:50.270

请不要使用重定向来显示错误消息，因为它会破坏 HTTP。如果发生错误，服务器返回适当的 4xx 或 5xx 响应而不是 301 重定向到 200 OK 响应是有意义的。我不知道微软为什么将这个选项添加到 ASP.NET 的自定义错误页面功能中，但幸运的是你不需要使用它。

我建议使用 IIS 管理器为您生成 web.config 文件。至于处理错误，打开你的`Global.asax.cs`文件并添加一个方法`Application_Error`，然后`Server.GetLastError()`从内部调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:59:42.737

使用[Elmah](http://code.google.com/p/elmah/) dll 以漂亮的 UI 显示您的错误。您可以使用此 DLL 维护日志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T10:02:50.597

在 Global.asax

```
void Application_Error(object sender, EventArgs e) 
{    
    Session["error"] = Server.GetLastError().InnerException; 
}
void Session_Start(object sender, EventArgs e) 
{      
    Session["error"] = null;
} 
```

在 Error_Page Page_Load 事件中

```
if (Session["error"] != null)
{
    // You have the error, do what you want
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:58:51.150

您可以使用 Server.GetLastError 访问错误；

```
var exception = Server.GetLastError();
  if (exception != null)
    {
       //Display Information here
    } 
```

更多信息：[HttpServerUtility.GetLastError 方法](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx)

# r - R 的命令行参数

> ID：13837089
> 
> 赞同：0
> 
> 时间：2012-12-12T09:54:14.637
> 
> 标签：r, command-line-arguments

> **可能重复：**
> [在 R 脚本中解析命令行参数](https://stackoverflow.com/questions/3433603/parsing-command-line-arguments-in-r-scripts)

这是我在这里的第一篇文章，如果我要问一些菜鸟问题或已经回答的问题，请客气。

我编写了一个 R 脚本，它将文件作为输入并计算第二列的连续数据点之间的差异，并绘制计算出的差异点的直方图。

一切都很好，但我希望该脚本将输入作为命令行参数。我尝试了 --args 和 --slave 但它不起作用！我如何实现它？而且该脚本非常慢，因为我使用 2 个 for 循环编写它，这需要 10 分钟来处理 50k 行文件，而 awk 在 30 秒内完成此操作。有什么技巧可以加快速度吗？？

数据如下所示：

```
CHROM   POS
chr01   925
chr01   929
chr01   981
chr01   1008
chr01   1012
chr01   1042
chr01   1065
chr01   1255
chr01   1260 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:17:05.990

您可以访问通过该`commandArgs()`函数传递给 R 的命令行参数。这将返回一个您可以以通常方式访问的列表。有关`?commandArgs`更多详细信息，请参阅。

# asp-classic - 执行直到 Recordset.Eof 未按预期工作（ASP 经典）

> ID：13837090
> 
> 赞同：0
> 
> 时间：2012-12-12T09:54:21.923
> 
> 标签：asp-classic, vbscript

我有一个活动服务器页面，显示当天的预订。

使用该代码，我从数据库中获取信息：

```
Do Until Recordset.Eof

      rsRaum.open "select raum_id, KOPPELBESTUHLUNG_ID from RESERVIERUNGRAUM where buchung_id = " & Recordset("buchung_id"), Connection
            raum_id = rsRaum("raum_id")
            KOPPELBESTUHLUNG_ID = rsRaum("KOPPELBESTUHLUNG_ID")
      rsRaum.close

      rsRaum.open  "SELECT NAME, FIRMA FROM TEILNEHMER WHERE BUCHUNG_ID =" & Recordset("buchung_id") & "and STATUS = 2 and DAILYPLAN = 1" , Connection
             if not rsRaum.EOF then
                    TeilnehmerNameExtern = rsRaum("NAME")
                    TeilnehmerFirmaExtern = rsRaum("FIRMA")
             end if
      rsRaum.close

      ' hole Raum Details
      rsRaum.open "select bezeichnung from Raum where ID = " & raum_id, Connection

          raumname = rsRaum("bezeichnung")

      rsRaum.close

    Recordset.MoveNext
    Loop 
```

到目前为止，它工作正常。我唯一的问题是那部分：

```
rsRaum.open  "SELECT NAME, FIRMA FROM TEILNEHMER WHERE BUCHUNG_ID =" & Recordset("buchung_id") & "and STATUS = 2 and DAILYPLAN = 1" , Connection
             if not rsRaum.EOF then
                    TeilnehmerNameExtern = rsRaum("NAME")
                    TeilnehmerFirmaExtern = rsRaum("FIRMA")
             end if
      rsRaum.close 
```

我的问题：

我有一个预订，我为该预订分配了三个参与者 (TEILNEHMER)。但是，如果我尝试显示参与者，则 ASP 仅显示我分配给该预订的三个参与者之一。

我应该怎么做才能获得分配给该预订的所有参与者？我是否还必须遍历代码的那部分？我已经尝试过，但没有任何效果。

有人能帮我吗？

编辑 ：

```
rsRaum.open  "SELECT NAME, FIRMA FROM TEILNEHMER WHERE BUCHUNG_ID =" & Recordset("buchung_id") & "and STATUS = 2 and DAILYPLAN = 1" , Connection
         if not rsRaum.EOF then

         do while not rsRaum.eof

                TeilnehmerNameExtern = rsRaum("NAME")
                TeilnehmerFirmaExtern = rsRaum("FIRMA")  

             rsRaum.movenext

          loop

         end if
  rsRaum.close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:12:47.237

因为您可以拥有多个 teilnehmer，所以您当然必须遍历该记录集。否则你只会得到第一条记录

# iphone - 在 iPhone 上查看联系信息

> ID：13837096
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:54:35.573
> 
> 标签：iphone, objective-c, contacts

嗨，我想创建一个按钮，按下时将在 iPhone 上查看电话号码。我不知道这是否可能，但如果是的话，我很想有人帮助我解决这个问题。我没有任何代码，所以需要有人从头到尾帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:57:13.393

这是一个指向 Apple Developer 网站的链接，可以帮助您入门：

[http://developer.apple.com/iphone/library/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/100-Introduction/Introduction.html](http://developer.apple.com/iphone/library/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/100-Introduction/Introduction.html)

它讨论了如何与地址簿数据库集成，以及如何仅使用类似地址簿的视图来列出联系信息。

[http://developer.apple.com/iphone/library/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/400-UI_Controllers/UI_Controllers.html#//apple_ref/doc/uid/TP40007744-CH5-SW1](http://developer.apple.com/iphone/library/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/400-UI_Controllers/UI_Controllers.html#//apple_ref/doc/uid/TP40007744-CH5-SW1)

# joomla1.5 - 在 jooma 1.5 中创建图像

> ID：13837101
> 
> 赞同：0
> 
> 时间：2012-12-12T09:54:46.093
> 
> 标签：joomla1.5, captcha

我正在使用以下代码在 joomla 1.5 中创建图像

```
 $session=JFactory::getSession();
    $randomnr = rand(1000, 9999);
    $session->set('randomr2',md5($randomnr));
    $im = imagecreatetruecolor(100, 38);

$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 150, 150, 150);
$black = imagecolorallocate($im, 0, 0, 0);

imagefilledrectangle($im, 0, 0, 200, 35, $black);

//path to font - this is just an example you can use any font you like:

$font = dirName(__FILE__).'/font/karate/Karate.ttf';

imagettftext($im, 20, 4, 22, 30, $grey, $font, $randomnr);

imagettftext($im, 20, 4, 15, 32, $white, $font, $randomnr);

//prevent caching on client side:
header("Expires: Wed, 1 Jan 1997 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

header ("Content-type: image/gif");
imagegif($im);
imagedestroy($im); 
```

但是当我们在 joomla 1.5 中运行它时它会返回一些奇怪的字符那么在 joomla 1.5 中有没有其他方法可以从文本创建图像。

或者我正在寻找为我的 artform joomla 1.5 组件创建验证码的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:27:00.353

我已经解决了自己添加`MIME ENCODING`图像的问题，

只需添加两行

```
$document =& JFactory::getDocument();
$document->setMimeEncoding('image/png'); 
```

你会找到自己的路。

# sqlalchemy - sqlalchemy 中的 tsvector

> ID：13837111
> 
> 赞同：7
> 
> 时间：2012-12-12T09:55:18.913
> 
> 标签：sqlalchemy, tsvector

我一直在寻找一种在 sqlalchemy 中使用 tsvector 的方法（就像 INTEGER 等其他方法一样），但到目前为止我还不清楚如何做到这一点。我读过 tsvector 可以使用[UserDefinedType](http://docs.sqlalchemy.org/en/rel_0_8/core/types.html#sqlalchemy.types.UserDefinedType)实现为类型。经过一些尝试，我一无所获，有人有一个简单的方法来做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-14T12:45:17.193

如果您希望 SQLAlchemy 能够创建具有 tsvector 类型的模式并仅在查询中检索序列化值，这就是您所需要的：

```
from sqlalchemy import types
class tsvector(types.TypeDecorator):
    impl = types.UnicodeText

@compiles(tsvector, 'postgresql')
def compile_tsvector(element, compiler, **kw):
    return 'tsvector' 
```

`tsvector`像常规类型一样工作，您可以在表定义中使用它。（我忘记了我在哪里找到的片段，可能是在 SQLAlchemy 邮件列表或 wiki 上。）

如果你需要实际解析 tsvector 数据，那就稍微复杂一点。最新版本的 hstore 支持可能是一个很好的例子。但是，您可能会发现以下代码段也很有用。这是已知可以工作的旧代码，并且是用 pyparsing 编写的：

```
from pyparsing import ParserElement, QuotedString, Regex, Group, Suppress, Group, delimitedList, ZeroOrMore, StringEnd
ParserElement.enablePackrat()
lexeme = QuotedString("'")
occurrence_marker = Regex('[1-9][0-9]*[A-D]?')
atom = Group(lexeme('lexeme') + Suppress(':') + Group(delimitedList(occurrence_marker))('markers'))('atom')
tsvector = ZeroOrMore(atom) + StringEnd()
parse_tsvector = tsvector.parseString 
```

**更新：**

要查询 tsvector 列，请使用如下`.op()`方法：

```
session.query(Model).filter(Model.tsvector.op('@@')(func.plainto_tsquery('search string'))) 
```

# c# - 递归扫描深层目录

> ID：13837113
> 
> 赞同：0
> 
> 时间：2012-12-12T09:55:25.417
> 
> 标签：c#, recursion, directory, stack-overflow, .net-4.5

我正在使用 C# 4.5，并且正在尝试扫描文件共享中的所有文件夹。我想跳过我无法访问的任何文件夹并继续。我所做的是递归地执行它，这会引发 stackoverflow。我明白为什么会这样。所以我的问题是：有什么解决方法吗？

既然我们不能使用递归搜索，你将如何实现这一点？我可以使用任何第三方库来简化此操作吗？`GetFolder`函数只是提取一些信息并返回一个自定义类，这很好用。

```
public void GetFoldersFromFS(string filePath)
{
   if (filePath == null)
   {
      return;
   }

   Directory.SetCurrentDirectory(filePath);
   try
   {
       foreach (var directory in Directory.EnumerateDirectories(Directory.GetCurrentDirectory()))
       {
           Resources.Add(GetFolder(new DirectoryInfo(directory)));
           GetFoldersFromFS(directory);
       }
   }
   catch (UnauthorizedAccessException e)
   {
      Log.Warn(e.Message);
   }
   catch (PathTooLongException e)
   {
      Log.Warn(e.Message);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:58:00.927

1.  列出您需要做的目录（待办事项列表）。
2.  最初，将单个目录（在共享上）添加到待办事项列表中。
3.  从列表中取出第一个目录并扫描它。
4.  扫描目录时，将所有子目录添加到待办事项列表（在列表末尾）。
5.  返回到 3，直到待办事项列表为空。

瞧，扫描没有递归。

伪代码（没有任何 try-catch）：

```
public List<string> ScanDirectory(string directory) {
    var toDoList = new Queue<string>();
    var result = new List<string>();
    toDoList.Enqueue(directory);

    // Keep going while there is anything to do
    while (toDoList.Count > 0) {
        // Get next directory-to-scan, and add it to the result
        var currentDir = toDoList.Dequeue();
        result.Add(currentDir);
        // Get sub directories
        var subDirectories = new DirectoryInfo(currentDir).GetDirectories();    // TODO: Add any other criteria you want to check
        // Add the sub directories to the to-do list
        foreach (var subDirectory in subDirectories) {
            toDoList.Enqueue(subDirectory);
        }
    }

    // Return all found directories
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:03:14.137

您可以检查您是否有权通过[Directory 的 ACL](http://msdn.microsoft.com/en-us/library/t1h6d4k4.aspx)访问该文件夹，而不是处理异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:04:18.877

您对 GetFoldersFromFS() 的递归调用是错误的。它不断将同一个文件夹传递给递归调用！

此外，您不应该调用 Directory.SetCurrentDirectory() 或 GetCurrentDirectory()。

相反，在您的递归调用中，只需执行以下操作：GetFoldersFromFS(directory)：

```
 foreach (var directory in Directory.EnumerateDirectories(filePath))
   {
       Resources.Add(GetFolder(new DirectoryInfo(directory)));
       GetFoldersFromFS(directory);
   } 
```

# php - 在“嵌套类别”函数中限制嵌套 UL

> ID：13837115
> 
> 赞同：0
> 
> 时间：2012-12-12T09:55:35.130
> 
> 标签：php, nested

我有一个这样的数组（$nested）（这是 print_r() 输出）

```
Array
(
    [1] => Array
        (
            [id] => 1
            [module] => 1
            [parent] => 0
            [name] => Audio
        )

    [20] => Array
        (
            [id] => 20
            [module] => 1
            [parent] => 5
            [name] => Mixer analogici
        )

    [16] => Array
        (
            [id] => 16
            [module] => 1
            [parent] => 4
            [name] => Videoproiettori
        )

    [11] => Array
        (
            [id] => 11
            [module] => 1
            [parent] => 2
            [name] => Strutture
        )

    ...

    [19] => Array
        (
            [id] => 19
            [module] => 1
            [parent] => 5
            [name] => Mixer digitali
        )

) 
```

以及创建嵌套菜单的递归函数：

```
function nmenu($module, $parent, $array) {
    $has_children = false;
    foreach($array as $key => $value) {
        if ($value['module'] == $module) {  
            if ($value['parent'] == $parent) {       
                if ($has_children === false && $parent) {
                    $has_children = true;
                    echo "<ul>\n";
                }
                echo '<li>';
                echo '' . $value['name'] . " \n";
                    nmenu($module, $key, $array);
                echo "</li>\n";
            }
        }
    }
    if ($has_children === true && $parent) echo "</ul>\n";
} 
```

我这样称呼：

```
<ul>
    <?php nmenu($row_rsNavModules['mod_id'], 0, $nested) ?>
</ul> 
```

一切都很好，递归函数按预期工作，它创建了一系列无限嵌套的 UL ......好吧，这是太多的“无限”：我想限制缩进级别（也就是缩进 ULS 的数量） ) 到 2，像这样：

```
Cat 1
    Subcat 1-1
    Subcat 1-2
    ...
Cat 2
    Subcat 2-1
    Subcat 2-2
    ... 
```

而不是这样结束：

```
Cat 1
    Subcat 1-1
            Sub-Subcat 1-1-1
                    Sub-Sub-Subcat 1-1-1-1
                    ... 
```

请问，我该如何编辑以前的功能来实现这一点？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:59:11.830

您只需要有一个计数器并在计数器达到您的限制后退出该功能。就像是：

```
//counter parameter added
function nmenu($module, $parent, $array, $counter) {
    $has_children = false;
    foreach($array as $key => $value) {
        if ($value['module'] == $module) {  
            if ($value['parent'] == $parent) {       
                if ($has_children === false && $parent) {
                    $has_children = true;
                    echo "<ul>\n";
                }
                echo '<li>';
                echo '' . $value['name'] . " \n";

                if($counter<2){  //added 
                    //counter parameter added
                    nmenu($module, $key, $array, $counter+1);
                } //added
                echo "</li>\n";
            }
        }
    }
    if ($has_children === true && $parent) echo "</ul>\n";
} 
```

并这样称呼它：

```
<ul>
    <?php 
       //counter parameter added 
       nmenu($row_rsNavModules['mod_id'], 0, $nested, 1) 
    ?>
</ul> 
```

# ios - MPMoviePlayerController：在控件元素后面添加子视图

> ID：13837118
> 
> 赞同：2
> 
> 时间：2012-12-12T09:55:46.283
> 
> 标签：ios, xcode, mpmovieplayercontroller, subviews, video-player

我根据当前播放时间将子视图添加到我的 MPMoviePlayerController 以实现交互式视频。此时一切正常，除了一件事：

`MPMoviePlayerController`当用户在视频内部触摸时，控件元素会出现在我的子视图下。

例如，一个子视图出现在 0:10 和 0:20 之间的点 (10/10)。如果用户想要向后或向前搜索，子视图会出现在播放器的控制元素前面并阻止它们。

我像这样添加子视图：

```
overlay.hidden = FALSE;
[self.player.view addSubview:overlay]; 
```

`overlay`UIView 的子类在哪里。

有没有办法控制控制元素的显示方式或在电影和控制元素之间添加子视图？

我试过：

`[self.player.backgroundView addSubview:overlay];` 但这是电影背后的子视图。

控制元素不是`MPMoviePlayerController`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:37:11.847

调试时，您应该递归打印 MPMoviePlayerController 的视图，这将向您显示该视图的整个子视图层次结构。像这样：

po [[[self player] view] recursiveDescription]

寻找具有 4 个子视图的 MPVideoContainerView。应该在 2 和 3 之间插入您的子视图，即绘制视频的 MPVideoView 和包含所有控件的 MPInlineVideoOverlay。

# c++ - cpp中splice()的作用

> ID：13837121
> 
> 赞同：6
> 
> 时间：2012-12-12T09:55:52.737
> 
> 标签：c++, list

拼接是如何工作的？[我在http://www.cplusplus.com/reference/list/list/splice/](http://www.cplusplus.com/reference/list/list/splice/)中读到了它

我无法从上面链接中的代码中理解这部分：

```
mylist1.splice ( mylist1.begin(), mylist1, it, mylist1.end()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:05:35.960

假设您有一个包含以下内容的整数列表：

```
[1, 2, 3, 4, 5] 
```

现在，您在名为的列表中创建一个迭代器，并将`it`其推进 3 个位置：

```
[1, 2, 3, 4, 5]
          ^
          'it' points here 
```

然后将列表拼接到自身，到列表的开头（第一个参数），在同一个列表（第二个参数）中，从`it`（第三个参数）指向的位置，到结尾（第四个参数），结果如下：

```
[4, 5, 1, 2, 3] 
```

因此，您有效地将两个元素的列表向右旋转。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T10:24:52.460

您需要提供源的原因`list`是，否则无法从中删除元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:06:56.960

splice 函数的第四个参数将您的范围移动（而不是复制）到您由第一个参数指定的位置。

在您的示例中，您将列表中的元素移动到列表中的另一个位置（更准确地说是列表的末尾到开头）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T10:27:01.630

```
void list<T,Allocator>::splice ( iterator position, list<T,Allocator>& x, iterator i );

void list<T,Allocator>::splice ( iterator position, list<T,Allocator>& x, iterator start, iterator finish ); 
```

仅通过查看很难看出，因为我们有 2 个列表和 2 个迭代器。

话`position`虽如此。它说明了在哪里执行`insert`.

`i`被移动的迭代器。在第二个重载中，范围 from`start`到`finish`但不是`finish`自身被移动。`finish`可能是列表的结尾。

`position`必须属于`this`列表。迭代器必须属于`x`列表。元素被插入`position`到源（this）列表的前面，同时从`x`列表中删除。

请注意，cplusplus.com 声明迭代器一旦拼接就会失效，但实际上并非如此，它们仍然有效。

cplusplus.com 是正确的，因为它`position`可能不是拼接元素之一（在列表相同的情况下）

在您的示例中：

```
mylist1.splice ( mylist1.begin(), mylist1, it, mylist1.end()); 
```

`it`必须是 mylist1 中的迭代器。看来它一定不是`mylist1.begin()`。

您的操作将所有元素从`it`列表的开头移动到开头。

# linux - Linux命令“kill”可以向线程发送信号

> ID：13837122
> 
> 赞同：2
> 
> 时间：2012-12-12T09:56:01.627
> 
> 标签：linux, multithreading, pthreads

`pthread_create`我使用实用程序创建了 3 个线程 。我可以使用
`kill -SIGUSR1 thread-id`.

我使用 `ps -eLF`命令（ LWP 字段）获得了线程 ID。

我想知道：

1.  为什么我们需要杀戮？

2.  如何使用 kill 命令向线程组 ID 发送信号？我如何找到组 id ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-12-22T08:18:51.077

线程组标识符（TGID）实际上是进程主线程的任务标识符。而主线程的任务标识就是整个进程的进程标识。这是*getpid()*从同一进程中的任何线程返回的值。换句话说，*gettid(* )在主线程中返回与*getpid()*相同的值。

使用该`ps`命令，线程组标识符通过*tgid*格式说明符获得。通过以下`ps`命令，我们可以看到*pid* = *tgid* = *tid*的行是进程的主线程：

```
$ ps -eLo pid,tgid,tid,comm
    PID    TGID     TID COMMAND
    890     890     890 rsyslogd     <-- Main thread = thread group id
    890     890     915 in:imuxsock
    890     890     916 in:imklog
    890     890     917 rs:main Q:Reg
    891     891     891 snapd        <-- Main thread = thread group id
    891     891     934 snapd
    891     891     935 snapd
    891     891     936 snapd
    891     891     937 snapd
    891     891     938 snapd
    891     891    1000 snapd
    891     891    1006 snapd
    891     891    1007 snapd
    891     891    1009 snapd
    891     891    1010 snapd
    891     891    1042 snapd
    891     891    1043 snapd
    891     891    1062 snapd
    891     891    1063 snapd
    891     891    1064 snapd
    891     891    1542 snapd
    891     891    1544 snapd
[...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:07:56.587

你需要`kill`，因为那是发送信号的命令。默认情况下，它会杀死一个进程，但你可以发送你知道的其他信号。

您可以使用`killall -s <signal number> <executable name>`向共享相同进程名称（而不是编号）的所有进程发送信号。

# python - 如何使用 Python 将 MySQL 中的可变数字数据相加？

> ID：13837127
> 
> 赞同：-2
> 
> 时间：2012-12-12T09:56:31.643
> 
> 标签：python, mysql

我想在列 users_count 中显示数据量，然后将结果添加到 1 (users_coun +1)。我使用这样的表：

```
mysql> SELECT id, name, users_count FROM data;
+----+--------+-------------+
| id | name   | users_count |
+----+--------+-------------+
|  1 | Jogjas |          10 |
|  2 | madang |           0 |
|  3 | udan   |           0 |
+----+--------+-------------+
3 rows in set (0.00 sec) 
```

**如果我在id = 1**上选择 users_count ，则结果为**10**。

我想要的结果是：**11**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:43:11.473

您只包含了 SQL 代码，所以不确定为什么将其标记为 python 问题。

你为什么不在你的 SQL 中做加法，即`SELECT id, name, users_count+1 as users_count FROM data;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:45:59.033

使用来自 web2py 的**Pymysql**或**(DAL)gluon 工具**在 python 中访问 mysql。

# php - 单击按钮时从 PHP 文件中保存呈现的 HTML 源代码？

> ID：13837128
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:56:37.047
> 
> 标签：php, html, function

我在一家出版社工作，我们的编辑从模板创建 HTML 电子邮件通讯。这充满了问题，因为他们会不断地修改模板代码，而不是仅仅将内容添加到正确的位置，这让我在发送与 Outlook 兼容的时事通讯时感到头疼。

我决定编写一个表单，从大量输入中提取编辑器的内容，而无需他们查看/触摸模板源代码。这是完整的，但是我希望编辑器能够通过简单的单击按钮来保存/下载呈现的 HTML 源代码，而不是 View Source Code > Select All > Copy and Paste in to new blank 。 txt 文档 > 保存并作为电子邮件附件发送。是否有具有此（或类似）功能的 PHP 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:05:13.660

没有任何`fopen`或`file_get_contents`黑客是可行的。使用 PHP 的输出缓冲，然后调用`ob_get_contents`并将其保存到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:04:29.057

我想你可以利用：

```
$sourceCode = file_get_contents('http://yourformsite.com/form/') 
```

然后用类似的东西保存它：

```
file_put_contents('/path/theme.txt',$sourceCode); 
```

# javascript - 我如何生成唯一标识符

> ID：13837129
> 
> 赞同：1
> 
> 时间：2012-12-12T09:56:41.163
> 
> 标签：javascript, sqlite

我在使用框架phonegap的地方开发应用程序移动，并使用将数据插入本地数据库我的问题是如何使用javascript为sqlite生成唯一标识符？

```
 CREATE TABLE foobar (id uniqueidentifier, foo text, bar text, PRIMARY 
    KEY (id)); 

    insert into foobar values (newid(), "Aaa", "Bbb"); 

    id                                        foo      bar 
    ___________________________________________________________ 

    {00000109-0000-0010-8000-00AA006D2EA4}    "Aaa"    "Bbb" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:06:17.133

您有不同的选择：

1.  采用 Broofa的[压缩版本](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)
2.  采用[这个版本](http://www.broofa.com/Tools/Math.uuid.js)，它将 uuid 方法添加到 Math 对象。然后只需调用 Math.uuid() 以生成随机 UUID，同样由 Broofa 提供。
3.  [一个完整的库](https://github.com/LiosK/UUID.js)，用于对 uuid 进行多项操作，例如，您可以使用版本 4（基于随机数）以及版本 1（基于时间）。

最后，正如评论中所说，有[340,282,366,920,938,463,463,374,607,431,768,211,456 个可能的 UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)，所以不要担心生成两倍，你将有更多机会赢得 10 亿次彩票。

# android - 使用 Trace 32 调试运行 Android（内核）的 Qualcomm FFA

> ID：13837131
> 
> 赞同：1
> 
> 时间：2012-12-12T09:56:48.167
> 
> 标签：android, debugging, linux-kernel, linux-device-driver, trace32

我想知道使用 Trace 32 为基于 a 的手机设置 Android 内核调试的过程`Qualcomm chipset.`

`cmm scripts`我同步的 Android 代码中有一些安静的可用`Code Aurora Forum`. 但是我不知道内核调试需要哪些。代码是从 同步的`msm7630 ICS branch`。

```
I would like to specifically debug the display driver that is using MDDI (Mobile Device Digital Interface). 
```

作为 Trace 32 调试的新手，我也希望得到一些帮助。非常感谢任何指针/帮助。

谢谢！

# .net - 发布的asp.net网站抛出无法打开连接reportname{} .rpt

> ID：13837134
> 
> 赞同：0
> 
> 时间：2012-12-12T09:56:53.753
> 
> 标签：.net, mysql, crystal-reports

我将我的 asp.net 4.0 应用程序发布到服务器机器但是每当我打开报告页面时都会抛出“无法打开连接报告名称 {} .rpt”。我正在使用 ODBC、.net 框架 4.0 和 DB 作为 MYSQL。

# python - Python：转换为当地时间

> ID：13837135
> 
> 赞同：0
> 
> 时间：2012-12-12T09:57:03.610
> 
> 标签：python

我`datetime`在数据库中有一个 python 对象，它存储在 UTC 时区：

`2012-10-24 14:10:00+00:00`

我可以将其转换为当地时间，使用

```
start_localtime = start.replace(tzinfo=tz.gettz('Europe/Zurich')) 
```

start_localtime 现在是：`2012-10-24 14:10:00+02:00`

从技术上讲，这很好。但我需要时区`+00:00`，所以小时为 16（+2 小时）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:18:15.613

您是否尝试过使用 datetime.astimezone()？

[http://docs.python.org/2/library/datetime.html#datetime.datetime.astimezone](http://docs.python.org/2/library/datetime.html#datetime.datetime.astimezone)

我想出了一种使用 pytz 库的方法：http: [//pypi.python.org/pypi/pytz/](http://pypi.python.org/pypi/pytz/)

```
>>> import pytz
>>> from pytz import timezone
>>> a = datetime.now(timezone("UTC"))
>>> b = a.astimezone(timezone("Europe/Zurich"))
>>> a
datetime.datetime(2012, 12, 12, 10, 39, 20, 158993, tzinfo=<UTC>)
>>> b
datetime.datetime(2012, 12, 12, 11, 39, 20, 158993, tzinfo=<DstTzInfo 'Europe/Zurich' CET+1:00:00 STD>)
>>> b.utcoffset()
datetime.timedelta(0, 3600) 
```

# .net - 从 .NET 连接到 Asterisk

> ID：13837136
> 
> 赞同：0
> 
> 时间：2012-12-12T09:57:03.513
> 
> 标签：.net, sockets, networking, network-programming, asterisk

我正在尝试从 .NET 应用程序连接到 Asterisk 服务器，但未建立连接。我正在使用以下代码连接到 Asterisk：

```
Socket clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse("192.168.0.35"), 5038);
clientSocket.Connect(serverEndPoint); 
```

我收到以下错误：

```
A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 192.168.0.35:5038 
```

有人可以告诉我我做错了什么或解决方案是什么？

问候， 塔玛什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:00:26.010

检查 manager.conf 中的 AMI。它应该是这样的：

```
 enabled = yes
 port = 5038
 bindaddr = 0.0.0.0 
```

# c# - 如何在运行时重建 Windows 应用程序

> ID：13837138
> 
> 赞同：1
> 
> 时间：2012-12-12T09:57:05.687
> 
> 标签：c#, sharpdevelop, rebuild

我将 Windows 应用程序构建为 POS 系统，并且我想添加一个功能，让用户在 Windows 中添加新按钮。因此，在用户输入商品名称和价格等信息后，应用程序将生成创建新按钮的代码，并将该代码添加到 MainForm.cs 和 MainForm.Designer.cs 中。

但是，在我停止应用程序并重新运行已编译的 exe 之前，源代码中的更改不会生效。是否可以在应用程序仍在运行时自行重建？（即用户在输入信息后可以立即看到新按钮出现在窗口上）

我试过使用 Application.Restart(); 和 this.Refresh();，但它没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T10:00:06.667

您在这里没有使用正确的方法。

您不应该根据用户输入修改应用程序的代码。
相反，将用户输入的数据保存在数据库或文件中，并使用此信息动态显示按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:01:56.010

我认为这是可能的……但也有局限性。您可以创建一个 AppDomain 并加载一个 dll 代码（此 dll 包含您的应用程序表单）。然后，您卸载应用程序域，构建 dll 并重新创建一个新的 AppDomain。

当然，您必须关闭您所在的窗口，并且拥有一个与简单的 WinForms 应用程序完全不同的 DLL 架构。

例如，这是我推荐用于自动更新的那种东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:03:19.010

总之，不——因为重建应用程序会替换其磁盘上的可执行映像文件，该文件通常被正在运行的进程锁定。

Visual Studio 和其他 IDE 支持“编辑并继续”，它允许在程序等待断点时在运行时替换代码，但仅限于少数情况（例如修改现有方法中的代码）。对于批发功能或 GUI 更改来说，它不够灵活（如果您使用的是 XAML 资源，那是完全不可能的）。

如果您想要您正在寻找的那种灵活性，那么您必须深入挖掘支持这些特性的老式大型机式系统（例如 IBM Z 系列）。

# windows - 运行 MapReduce 作业时出错：不是有效的 Inet 地址

> ID：13837142
> 
> 赞同：2
> 
> 时间：2012-12-12T09:57:12.643
> 
> 标签：windows, hadoop, mapreduce, azure-hdinsight

我想尝试在 Windows 上使用 Hadoop。我已将 Windows Azure HDInsight Preview 作为单个节点安装在我的 Windows 7 笔记本上。仪表板和节点已启动并运行，HDFS 正在运行。但是，当我运行 MapReduce 作业时，它会失败并显示错误消息“不是有效的 Inet 地址”：

```
c:\Hadoop\GettingStarted>powershell -ExecutionPolicy unrestricted /F runSamples.
ps1 w3c small java totalhits
Moved to trash: hdfs://localhost:8020/w3c/out
12/12/10 13:50:16 WARN mapred.JobClient: Use GenericOptionsParser for parsing th
e arguments. Applications should implement Tool for the same.
12/12/10 13:50:16 WARN util.NativeCodeLoader: Unable to load native-hadoop libra
ry for your platform... using builtin-java classes where applicable
12/12/10 13:50:16 WARN snappy.LoadSnappy: Snappy native library not loaded
12/12/10 13:50:16 INFO mapred.FileInputFormat: Total input paths to process : 1
12/12/10 13:50:17 INFO mapred.JobClient: Running job: job_201212101301_0001
12/12/10 13:50:18 INFO mapred.JobClient:  map 0% reduce 0%
12/12/10 13:50:27 INFO mapred.JobClient: Job complete: job_201212101301_0001
12/12/10 13:50:27 INFO mapred.JobClient: Counters: 0
12/12/10 13:50:27 INFO mapred.JobClient: Job Failed: Job initialization failed:
java.net.UnknownHostException: Marc_Red_Data is not a valid Inet address
        at org.apache.hadoop.net.NetUtils.verifyHostnames(NetUtils.java:569)
        at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:7
12)
        at org.apache.hadoop.mapred.JobTracker.initJob(JobTracker.java:4214)
        at org.apache.hadoop.mapred.JobInitializationPoller$JobInitializationThr
ead.initializeJobs(JobInitializationPoller.java:137)
        at org.apache.hadoop.mapred.JobInitializationPoller$JobInitializationThr
ead.run(JobInitializationPoller.java:108)

Exception in thread "main" java.io.IOException: Job failed!
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265)
        at microsoft.hadoop.w3c.TotalHitsForPage.main(TotalHitsForPage.java:79)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

当我查看作业日志时，我可以看到 Marc_Red_Data 存在是以下属性：

```
<property><name>mapreduce.job.submithost</name><value>Marc_Red_Data</value></property> 
```

不知何故，它得到了这个名字，但我不知道如何解决这个问题。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:59:53.977

如果机器的主机名中有下划线，Hadoop 不喜欢它。编辑 /etc/hostname 和 /etc/hosts 并将 Marc_Red_data 的两个实例更改为 MarcRedData，然后重新启动。

我一直在努力解决同样的问题，当我找到你的帖子时，我注意到你的主机名和我的一样有下划线。我更改了机器的主机名，现在它工作正常。我怀疑 hadoop 正在使用一些库来尝试像解析 URL 一样解析主机名，并且 URL 不能有下划线，所以它只会出错。

[编辑] 之前我没有注意到您说您正在运行 Windows，因此更改主机名的过程会有所不同。 [http://www.howtogeek.com/howto/windows-vista/change-your-computer-name-in-windows-vista/](http://www.howtogeek.com/howto/windows-vista/change-your-computer-name-in-windows-vista/)

# django - Django CSRF验证，当它没有打开时？

> ID：13837145
> 
> 赞同：0
> 
> 时间：2012-12-12T09:57:27.280
> 
> 标签：django, python-2.7, django-1.3

我正在尝试使用 urllib 将一些数据从一个 python 应用程序发布到 django 站点，因为它们是单独的程序。

现在我没有启用 CSRF 中间件，并且我在视图中专门添加了 @csrf_exampt。它仍然因 CSRF 验证失败而失败。

有什么办法可以完全删除csrf？（django 应用程序将离线，因此不需要）

# postgresql - Postgres 全局设置自动提交

> ID：13837146
> 
> 赞同：7
> 
> 时间：2012-12-12T09:57:28.043
> 
> 标签：postgresql, transactions, autocommit

如何在全局级别的 psql 8.4 中设置自动提交？是否有一个我可以更改的配置属性，它将为集群上的所有 dbs 引入此行为，以在关闭自动提交的情况下启动 db 会话？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-18T09:27:28.523

只需将以下内容添加到`~/.psqlrc`：

```
\set AUTOCOMMIT off 
```

请注意，这仅在使用`psql`shell 时有效！我想这就是你在说什么？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T11:21:43.863

如果您想要一个（打开的）事务，请使用事务：

```
BEGIN;
  INSERT ...;
  UPDATE ...;
COMMIT; -- when you're done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-01T22:41:33.010

就像 exhuma 说的，你可以在你的个人**~/.psqlrc**文件中将它设置为关闭。

```
\set AUTOCOMMIT off 
```

但是由于您要求全局级别，因此 Ubuntu 上的正确文件是**/etc/postgresql-common/中的 psqlrc （不带前导点）**

要评估系统上的正确目录，您可以使用：

```
pg_config --sysconfdir 
```

有一个示例 psqlrc 文件

```
/usr/share/postgresql/12/psqlrc.sample 
```

（显然是版本 12）但它不包含更多信息。

在您的系统上找到它

```
locate psqlrc 
```

我不能说，这些信息对于 12 之前的旧版本是否有效，但根据我的记忆，至少对于个人 rc 文件是有效的。

# c# - 怎样才能完整截屏

> ID：13837148
> 
> 赞同：3
> 
> 时间：2012-12-12T09:57:30.447
> 
> 标签：c#, windows-phone-8

我有一个包含更多 10 项的列表框，我编写了一个代码在 Windows Phone 8 上对其进行截图并共享，但它只是将所有内容都显示在屏幕上（3 项）而不是完整的列表框。如何截取完整的 Lisbox？这是我的代码。

```
var bmp = new WriteableBitmap(lbxDays, new TranslateTransform());
var width = (int)bmp.PixelWidth;
var height = (int)bmp.PixelHeight;
bmp.Render(lbxDays, new TranslateTransform());
using (var ms = new MemoryStream())
{
    bmp.SaveJpeg(ms, width, height, 0, 100);
    ms.Seek(0, System.IO.SeekOrigin.Begin);
    var lib = new MediaLibrary();
    var dateStr = DateTime.Now.Ticks;
    var picture = lib.SavePicture(string.Format("screenshot"+dateStr+".jpg"), ms);
    var task = new ShareMediaTask();
    task.FilePath = picture.GetPath();
    task.Show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:56:58.447

尝试使用此代码对您的控件进行快照。将 UIElement 传递给所需的此方法。希望这能解决您的问题

```
private WriteableBitmap RenderControlAsImage(UIElement element)
{
    element.UpdateLayout();
    element.Measure(new Size(element.Width, element.Height));
    element.Arrange(new Rect(0, 0, element.Width, element.Height));
    return new WriteableBitmap(element, null);
} 
```

# c++ - Visual Studio/C++：查找代码中的所有变量访问？

> ID：13837149
> 
> 赞同：1
> 
> 时间：2012-12-12T09:57:31.617
> 
> 标签：c++, visual-studio, variables

可以在 Visual Studio 中找到所有函数调用。但是有没有办法对变量做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:04:14.263

您可以使用该`Find all references`功能。在结果中，您将看到该行，因此您可以快速查看它是否是对变量的访问。

更多信息： http: [//www.blackwasp.co.uk/VSFindAllReferences.aspx](http://www.blackwasp.co.uk/VSFindAllReferences.aspx)

另一种肮脏的方式是临时注释变量的声明。Intellisense 将立即更新并显示使用变量的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:03:35.983

如果您右键单击一个变量，您可以执行`Find References`. 还有`Edit`> `Find and Replace`> `Find Symbol`。

# parsing - 如何在 lex/yacc 中去除我不关心的文本？

> ID：13837150
> 
> 赞同：0
> 
> 时间：2012-12-12T09:57:33.957
> 
> 标签：parsing, yacc, lex

我正在使用 python lex/yacc(PLY) 来分析文本文件。

基本上，我只需要关心整个文本中的部分文本。

例如，我只关心整个文本中的 a=a+NUM 之类的模式（表达式）。

```
 [JUNKS] a = a + 1; [JUNKS] a = a + 2; [JUNKS] 
```

真正的全文可能是这样的：

```
a;ldfjkadl;skfjas;lkfja; a = a+1; a;dfja;lkfja;ldfjadlf a = a + 12; a;kdfj;af 
```

我对我感兴趣的表达式的规则是：

```
my_expr : ID EQ ID PLUS NUM 
```

如何编写正确的 lex/yacc 规则来过滤掉这些垃圾字符串？请不要使用除“my_expr”规则之外的各种字符组成的任何字符串。我做了很多尝试，但还没有找到方法。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:38:17.687

我会建议在词法分析器中过滤掉它们，但 JUNKS 有点复杂。看看这样的语法是否适合你：-

```
stmt: ID stmt 
    | ';' stmt
    | expr
    ;

expr: ID '=' ID '+' NUM
    ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T21:52:20.680

我想出了办法做到这一点。

只需使用“状态”来跳过垃圾。

# objective-c - 分段控制不影响 -(IBaction) 方法中的 if 循环

> ID：13837151
> 
> 赞同：0
> 
> 时间：2012-12-12T09:57:33.970
> 
> 标签：objective-c, uibutton, uisegmentedcontrol, ibaction

我正在制作一个 IOS 应用程序，它在按下 UIButton 时播放 wav 文件。我正在尝试实现 UISegmentedcontrol，以便在突出显示不同的段时更改正在播放的样本。

这是我的 viewController.h 的代码：

```
@property (nonatomic, retain) IBOutlet UISegmentedControl *segmentedControl;
-(IBAction)playFile1;
-(IBAction)playFile2;
-(IBAction)playFile3;
@end 
```

和 viewController.m

```
@synthesize segmentedControl = segmentedControl;
-(IBAction)playFile1{
    if([segmentedControl selectedSegmentIndex] == 0){
    [rtcmixmanager playFile1];
    }
    else if([segmentedControl selectedSegmentIndex] == 1){
    [rtcmixManager playFile2];
    }
    else{
    [rtcmixManager playFile3];
    }
} 
```

我已经尝试了这两种方法，并在 -(IBaction) 方法本身下的 RTCMixManager.m 文件中添加了类似的 if 语句，但没有运气。该项目将编译，但似乎只播放文件 1，无论突出显示哪个段。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:08:02.193

尝试这个：

```
-(IBAction)segmentChanged:(id)sender{
    UISegmentedControl *segControl = ((UISegmentedControl *)sender);
    if([segControl selectedSegmentIndex] == 0){
        [rtcmixmanager playFile1];
    }else if([segControl selectedSegmentIndex] == 1){
        [rtcmixManager playFile2];
    }else{
        [rtcmixManager playFile3];
    }
} 
```

并将其连接到.xib文件中Segmented Control事件的“值改变”

编辑：您也可以在这样的代码中执行此操作：

```
[segmentedControl addTarget:self action:@selector(segmentChanged:) forControlEvents:UIControlEventValueChanged]; 
```

# ruby-on-rails-3 - 需要在控制器中的 ruby on rails 中多次更新数据库的属性

> ID：13837157
> 
> 赞同：0
> 
> 时间：2012-12-12T09:58:17.837
> 
> 标签：ruby-on-rails-3, update-attributes

出于某种原因，我需要多次运行更新数据库表。我在while循环中编写了逻辑。这样，直到达到数组长度，它才会将不同的属性值更新到数据库中。

```
if request.post?
  @user_new = Bookmark.new(params[:user_new])
  tags = @user_new.tags.split(",")
  i=0
  while i<tags.length
    @user_new.update_attributes(:title => @user_new.title, :url => @user_new.url, :tags => i)  
    i=i+1
  end 
```

但似乎并非如此。

仅执行最后一条更新语句。为什么？

我怎样才能相应地运行多个更新语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:21:44.280

您的表的列将更新`i`时间，因此最终值将是`tags.length`. 它不仅更新最后一个，而且按顺序更新所有这些。

# jquery - 动态添加 使用 PopUp 功能不起作用

> ID：13837158
> 
> 赞同：0
> 
> 时间：2012-12-12T09:58:21.863
> 
> 标签：jquery, jquery-mobile

我失败了，但我无法解决这个问题。我有这个代码：

```
<script>
    //Init Historyview
    $('#history').live('pageinit', function () {
        $.getJSON('../BackEnd/GetHistory.aspx', function (json) {
            $.each(json, function (titel, date) {
                if (date.status == "2") {
                    $('#historylist').find('ul.dynlist').append('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + date.titel + '" data-rel="popup" data-icon="alert" data-transition="slide">Details</a></li>');
                }
                else {
                    if (date.status == "3")
                        $('#historylist').find('ul.dynlist').append('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + date.titel + '" data-rel="popup" data-icon="delete" data-transition="slide">Details</a></li>');
                    else
                        $('#historylist').find('ul.dynlist').append('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + date.titel + '" data-rel="popup" data-icon="check" data-transition="slide">Details</a></li>');
                }
                $('#uList').listview("refresh");
                $(document).html('<div data-role="popup" id="" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px;">Hallo</div>');
                $.mobile.page();
            });
        });
    });        
</script> 
```

该列表效果很好，但我想`div`通过选择`li`元素来打开弹出窗口。如果我点击什么都不会发生。

它应该看起来像这个正在工作的示例：

```
<ul data-role="listview" data-split-icon="plus" data-split-theme="b">
    <li><a><img class="rotate" src="bilder/Rechnung.jpg"><h1>Krankenhaus Basel</h1><p>24.11.2008</p></a><a href="#rechnung" data-rel="popup"  data-icon="check" data-transition="slide">Details</a></li>
    <li><a><img class="rotate" src="bilder/rechnung-ausdruck.jpg"><h1>Praxis Fuchs</h1><p>11.04.2012</p></a><a href="#rechnung2" data-rel="popup" data-icon="alert" data-transition="slide">Details</a></li>
    <li><a><img class="rotate" src="bilder/RechnungBericht.jpg"><h1>Praxis Steinig</h1><p>12.11.2012</p></a><a href="#rechnung3" data-rel="popup" data-icon="delete" data-transition="slide">Details</a></li>
</ul>

<div data-role="popup" id="rechnung" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px;">
    <img src="bilder/Rechnung.jpg"><p>Rechnung wurde akzeptiert</p> 
</div>

<div data-role="popup" id="rechnung2" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px;">
    <img src="bilder/rechnung-ausdruck.jpg"><p>Rechnung in der Verarbeitung</p> 
</div>

<div data-role="popup" id="rechnung3" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px;">
    <img src="bilder/RechnungBericht.jpg"><p>Rechnung wurde noch nicht bearbeitet</p>   
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:06:44.693

因为您是动态附加的，所以`li`您需要手动调用`popup()`它们的方法。试试这个：

```
$.each(json, function (titel, date) {
    var $li;
    if (date.status == "2") {
        $li = $('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + date.titel + '" data-rel="popup" data-icon="alert" data-transition="slide">Details</a></li>');
    }
    else {
        if (date.status == "3")
            $li = $('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + date.titel + '" data-rel="popup" data-icon="delete" data-transition="slide">Details</a></li>');
        else
            $li = $('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + date.titel + '" data-rel="popup" data-icon="check" data-transition="slide">Details</a></li>');
    }
    $('#historylist').find('ul.dynlist').append($li.popup());
    $('#uList').listview("refresh");
    $(document).html('<div data-role="popup" id="" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px;">Hallo</div>');
    $.mobile.page();
}); 
```

[jQm API 中有关 popup() 的更多信息](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:19:34.807

现在我在这个位置：

```
<section id="popup_area">

</section>

<script>
    //Init Historyview
        $.getJSON('../BackEnd/GetHistory.aspx', function (json) {
            $.each(json, function (titel, date) {
                var $li;
                if (date.status == "2") {
                    $li = $('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + titel + '" data-rel="popup" data-icon="alert" data-transition="slide">Details</a></li>');
                }
                else {
                    if (date.status == "3")
                        $li = $('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + titel + '" data-rel="popup" data-icon="delete" data-transition="slide">Details</a></li>');
                    else
                        $li = $('<li><a><img class="rotate" src="' + date.beleg + '"><h1>' + date.titel + '</h1><p>' + date.date + '</p></a><a href="#' + titel + '" data-rel="popup" data-icon="check" data-transition="slide">Details</a></li>');
                }
                $('#historylist').find('ul.dynlist').append($li);
                $('#uList').listview("refresh");
                $pop = $('<div data-role="popup" id="' + titel + '" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px;"><img class="rotate" src="' + date.beleg + '"></div>');
                $('#popup_area').append($pop.popup());
            });
        });

</script> 
```

但它不起作用。该列表已正确创建，我在我的列表下看到了我的“弹出窗口”，位于我的“popup_area”部分中。如果我单击列表中的图标：

我的意思是这个部分->`<a href="#' + titel + '" data-rel="popup" data-icon="alert" data-transition="slide">Details</a>`

显示改变颜色有点白色（如弹出），但没有显示。所以我认为在创建动态部分 id="popup_area" 之后我必须激活弹出功能。

就像在创建动态列表元素之后一样 ->`$('#uList').listview("refresh");` 这是激活 typica 的必要条件！[在此处输入图像描述][1]l 的 Jquery 列表设计。

有人有想法吗？请帮忙

截图：http: [//image-upload.de/image/7oxg97/15b1b6d443.png](http://image-upload.de/image/7oxg97/15b1b6d443.png)

更新：

我自己解决这个问题。谢谢：-P

我替换 $('#popup_area').append($pop.popup()); with $('#popup_area').append($pop)trigger("create"); 而且效果很好

# objective-c - 用于创建 iOS Photostream 相册的 API

> ID：13837159
> 
> 赞同：0
> 
> 时间：2012-12-12T09:58:23.567
> 
> 标签：objective-c, ios, ios6, icloud, alassetslibrary

我们有一个照片捕捉应用程序。我们想使用我们应用程序中的照片流分享拍摄的照片。从 iOS 6 开始，Photos 应用支持照片流分享。我没有找到任何 API 来支持这一点。

我对照片流有以下疑问-

> 1.  是否有任何 API 可以创建照片流相册？
> 2.  将照片添加到照片流的 API。
> 3.  分享照片流相册的 API。

谁能帮我找到这些查询的灵魂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:21:18.407

目前，您只能使用 AssetsLibrary 显示 PhotoStream 相册的内容。您不能创建照片或将照片添加到 PhotoStream-Album。如果您想要该功能，请在[https://feedbackassistant.apple.com/填写请求](https://feedbackassistant.apple.com/)

# nhibernate - nHibernate：使用 QueryOver 的连接和析取

> ID：13837163
> 
> 赞同：4
> 
> 时间：2012-12-12T09:58:45.067
> 
> 标签：nhibernate, nhibernate-criteria, queryover

假设我有一个需要使用 nHibernate 呈现的 SQL 查询。SQL 查询的**WHERE**子句由三个**OR**语句组成，每个语句都包含一个条件列表。例如：

```
SELECT * 
FROM MyTable 
WHERE
    (OrderId = 1 and ItemId = 100) 
    OR
    (OrderId = 2 and ItemId = 200)
    OR
    (OrderId = 3 and ItemId = 300) 
```

使用 nHibernate 的**Criteria**语法，我可以使用析取来实现：

```
var disjunction = Restrictions.Disjunction();

foreach (var tuple in OrdersAndLineItems)
{
    var conjunction = Restrictions.Conjunction();
    var order = tuple.Item1;
    var lineitem = tuple.Item2;

    conjunction.Add(Restrictions.Eq("OrderId", order.Id));
    conjunction.Add(Restrictions.Eq("LineItemId", lineitem.Id));

    disjunction.Add(conjunction);
}

var result = Session.CreateCriteria<SomeClass>().Add(disjunction).ToList(); 
```

我将如何使用 nHibernate 3.x 中的**QueryOver**语法编写相同类型的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T09:16:07.497

至少在 NH 版本 3.0.0.4000 中有多个 Add 方法的重载。其中之一是具有可用于您的案例的通用参数，例如：

```
disjuction.Add<TypeinWhichPrimaryKeyPropertyExists>(x => x.PrimaryKey == 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T14:16:01.747

对于要测试相等性的限制，请使用“Where”，例如：

```
Restrictions.Where<SomeClass>(x => x.OrderId == order.Id) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-12T10:45:46.040

没关系——我在发布后不久偶然发现了[一篇较早的 StackOverflow 帖子](https://stackoverflow.com/a/11015948/165494)，该帖子提供了我正在寻找的答案。这是我使用**QueryOver**语法重写的原始示例：

```
var disjunction = Restrictions.Disjunction();

foreach (var tuple in OrdersAndLineItems)
{
    var conjunction = Restrictions.Conjunction();
    var order = tuple.Item1;
    var lineitem = tuple.Item2;

    conjunction.Add(Restrictions.On<SomeClass>(x => x.OrderId).Equals(order.Id));
    conjunction.Add(Restrictions.On<SomeClass>(x => x.LineItemId).Equals(lineitem.Id));

    disjunction.Add(conjunction);
}

var result = Session.CreateCriteria<SomeClass>().Add(disjunction).ToList(); 
```

# ruby-on-rails - jquery datatable rails 列排序无法与 rails helpers 一起正常工作

> ID：13837170
> 
> 赞同：2
> 
> 时间：2012-12-12T09:58:58.887
> 
> 标签：ruby-on-rails

我是 Rails 新手，使用 jquery 数据库 rails gem 对我的表数据进行排序和搜索。它工作正常，但是当我使用诸如 number_with_delimiter 之类的 rails 辅助方法来显示以逗号分隔的数字时，我没有得到正确的排序结果。

如果不使用 rails helpers，我会得到正确的结果，并且我的表数据排序正确。请问有人可以帮我吗？

这是我的代码：

脚本

```
 <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#d3').dataTable({
        "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
        "sPaginationType": "bootstrap",
         aaSorting : [[2, 'desc']],  
        });
    });
    </script> 
```

在我的部分表格数据是

```
 <table class="table table-striped table-bordered "  id="d3">
          <thead>      
           <tr>
             <th>Folder</th>
             <th>#Files</th>
             <th>Source Lines</th>
             <th>Contents</th>
             <th>Description</th>
           </tr>
          </thead>
          <tbody>
           <td>String data</td>
           <td>numeric data</td>
           <td>numeric data</td>
           <td>string data</td>
           <td>string data</td>

          </tbody>
       </table> 
```

这是我的结果（第三列数据）

```
SourceLines

 994
 98
 974
 .
 .
 . 
 101
 1,890
 1,674 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-15T01:35:24.710

我在使用复数助手将“Hour(s)”添加到一个值时遇到了这个问题。它发生的原因是因为数据表将值视为字符串，而不是数字，并将其排序为一个。

我的解决方案是在我的真实值之前添加一个隐藏的跨度，它可以作为字符串正确排序。隐藏的跨度值是前面有足够多的“0”的数字，以使其与该列中的其他值具有一致的长度。

```
def datatable_numeric_sort num
    content_tag(:span, number_with_precision(num, :precision => 2).to_s.rjust(10, '0'), :style => "display:none")
end 
```

给定一个 100.5 的数字，它将产生：

```
<span style="display:none">0000100.50</span> 
```

.to_s.rjust(10, '0') 说“将'0'附加到这个字符串直到它的长度为10”它可以是任何长度，我使用了10，因为我的字符串不应该更长。

就我而言， number_with_precision 是必要的，因为我的数字是小数，并且您需要字符串中小数点的位置一致。

要使用：

```
<td><%= datatable_numeric_sort record.value%><%= pluralize record.value, "Hour" %></td> 
```

# iphone - 如何在 .h 文件中转换 .obj 文件？

> ID：13837181
> 
> 赞同：0
> 
> 时间：2012-12-12T09:59:47.667
> 
> 标签：iphone, opengl

“我正在尝试开发像**水果杀手**这样的游戏。我有代码，但我想将水果替换为我们的对象，如何在 3d 中创建它们。” 水果 3d .h 文件，如：** static const TexturedVertexData3D GreenappleVertexData[] = { {/ *v:* /{0.896683, 0.257172, 30.407585}, / *n:* /{0.073519, 0.000000, 0.997284}, / *t:* /{0.307720, 0.987318}}, **

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:02:06.260

不！期，不讨论。

为您的 .obj 文件实现解析器/加载器并从中读取模型。您可以为 iOS 和 Android 应用程序捆绑文件。

# html - 更新推文无法在线工作

> ID：13837183
> 
> 赞同：0
> 
> 时间：2012-12-12T09:59:52.350
> 
> 标签：html, twitter

我在使用 Twitter“更新推文”小部件时遇到了一个奇怪的问题。**我在Settings -> Widgets -> Create new -> Enter settings**下设置了 twitter 帐户中所需的所有设置，并复制了 HTML 提供：

```
<a class="twitter-timeline" href="https://twitter.com/runegreen" data-widget-id="278794989184618498">Tweets by @runegreen</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

现在这在本地工作得很好，奇怪的是，当我在线查看网站时，因为它只显示一条文字，上面写着**@runegreen的推文**

但在本地它显示以下内容：

![在此处输入图像描述](../Images/6fe112893d9aa5534eda84c53e4cd44a.png)

所有文件都已上传，所以我真的想知道会出现什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:18:49.513

Juhana 给了我一个提示，让我在我的浏览器开发工具中查看控制台，看看是否有问题。

问题是：

*   在 Twitter 小部件设置中，您可以输入域。
*   我输入的域是真实域（例如：www.mywebsite.com）
*   但目前，该站点位于测试服务器上（例如：www.mywebsite.testserver.com）
*   所以我不得不在推特网站的小部件设置中输入测试服务器链接。

问题解决了 ：）

# samsung-smart-tv - 在没有三星 IDE 或 Eclipse 插件的情况下打包三星智能电视应用程序？

> ID：13837186
> 
> 赞同：0
> 
> 时间：2012-12-12T10:00:21.370
> 
> 标签：samsung-smart-tv

> **可能重复：**
> [如何在没有 IDE 的情况下构建和部署三星 SmartTV 应用程序](https://stackoverflow.com/questions/12766653/how-to-build-deploy-a-samsung-smarttv-app-without-the-ide)

有没有办法在不使用三星 IDE 工具的情况下打包智能电视应用程序 - 理想情况下，我想将构建集成到 Ant 或 Grunt.js 构建脚本中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:26:39.087

它们只是包含应用程序的 zip 文件，只要您将正确的文件放入其中（您可以在 IDE 的显示中看到示例，或者通过解压缩使用 IDE 创建的包），就没有明显的理由需要使用 IDE。

# zend-framework - 可继承 (?) 控制器、动作和模板

> ID：13837188
> 
> 赞同：0
> 
> 时间：2012-12-12T10:00:36.573
> 
> 标签：zend-framework, pimcore

当创建一个文档作为另一个文档子级时，它是使用默认控制器、操作和模板设置创建的。

我想设置它，以便控制器、操作和模板文件可以从父子结构中的相邻文档中获取值。

这个问题是否有开箱即用的解决方案，或者也许有人以其他方式做到了这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:32:04.370

“开箱即用”只能创建具有控制器、操作、模板值的命名（预定义）文档类型。这些类型在文档树中的“添加文档”上下文菜单中可用。

但我看到了两种可能的解决方案：

1.  您可以定义自定义`Document_Page`类和重载`create()`方法。

    ```
    public static function create($parentId, $data = array())
    {
        $document = static::create($parentId, $data = array());

        $parent = Document::getById($parentId);
        $document->setModule($parent->getModule());
        $document->setController($parent->getController());
        $document->setAction($parent->getAction());
        $document->setTemplate($parent->getTemplate());
        $document->save();

        return $document;
    } 
    ```

    然后你必须声明你的自定义类`classmap.xml`：

    ```
    <Document_Page>Website_Document_Page</Document_Page> 
    ```

2.  创建一个[插件](http://www.pimcore.org/wiki/display/PIMCORE/Example)并定义[`postAddDocument(Document $document)`钩子](http://www.pimcore.org/wiki/display/PIMCORE/Plugin+Backend+%28PHP%29)：

    ```
    public static function postAddDocument(Document $document)
    {
        $parent = $document->getParent();
        $document->setModule($parent->getModule());
        $document->setController($parent->getController());
        $document->setAction($parent->getAction());
        $document->setTemplate($parent->getTemplate());
        $document->save();

        return $document;
    } 
    ```

# regex - 负前瞻 - 如果在输入中找到两个单词，则失败

> ID：13837190
> 
> 赞同：3
> 
> 时间：2012-12-12T10:00:40.927
> 
> 标签：regex

我需要一个否定的前瞻表达式，但我不能让它工作:(我希望有人可以帮助我。我需要一个表达式，直到样本中的任何地方都不包含 2 个单词。例如 2 个单词`pie` `donuts`：

```
i sure like eating pie, but i love donuts very much
---> false
i sure like eating but i love donuts very much
---> true
i sure like eating pie, but i love hamburger very much
---> true
i sure like eating donuts, but i love pie very much
---> false
i sure like eating piedonuts very much
---> false 
```

我已经尝试过多种形式，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:05:29.447

比使用负前瞻简单得多，只需拥有两个正则表达式并检查它们是否不匹配。

您没有指定语言，但这是 Perl 中的一个简单示例：

```
use warnings;
use strict;

while (<DATA>)
{
    my $match = (/pie/ and /donuts/) ? 'false' : 'true';
    print $_;
    print "--> $match\n";
}

__DATA__
i sure like eating pie, but i love donuts very much
i sure like eating but i love donuts very much
i sure like eating pie, but i love hamburger very much
i sure like eating donuts, but i love pie very much
i sure like eating piedonuts very much 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T10:25:30.653

您可以使用嵌套在一个负数内的两个正向前瞻来做到这一点（全部从字符串的开头开始）：

```
^(?!(?=.*pie)(?=.*donuts)) 
```

所以内部的前瞻需要匹配*两个*词。如果他们这样做，否定前瞻的内容将匹配，因此前瞻本身将导致模式失败。

如果您的输入中可以有换行符，请确保使用`s`or`dotall`选项（否则，`.`与换行符不匹配）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T07:06:43.257

试试这个，当我使用 perl 兼容时它起作用了

```
.+(?=(.+(?<!.+?donuts.+?)\s\bpie\b(?!.+donuts.+))|(.+(?<!.+pie.+)\sdonuts(?!.+pie.+))).*$ 
```

# freebase - 如何获取用户在 freebase 中所做的编辑次数？

> ID：13837201
> 
> 赞同：0
> 
> 时间：2012-12-12T10:01:03.573
> 
> 标签：freebase, mql, freebase-acre

我正在尝试获取某些用户添加、编辑和删除的主题数量。

我可以使用以下查询获取主题数量：

```
[{
  "creator":     "/user/getsaurabhsaxena",
  "name":        null,
  "id":          null,
  "mid":         null,
  "type": [{
    "name": null,
    "id":   null
  }],
  "timestamp>=": "2012-11-11T00:00:00.0000Z",
  "timestamp<=": "2012-12-12T23:23:59.0000Z",
  "timestamp":   null,
  "sort":        "-timestamp"
}]​ 
```

我无法弄清楚获得编辑和删除数量的方法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:51:43.647

operation 属性具有三个值 insert、delete 和 update，通过它们可以获取添加、删除和更新的数量。:) 我正在使用以下查询。

```
[{
  "operation":     null,
  "source": {
  },
  "from:timestamp>=": "2012-11-12T00:00:00.000Z",
  "to:timestamp<": "2012-12-12T23:23:59.000Z",
  "attribution":   "/user/<username>",
  "timestamp":     null,
  "sort":          "-timestamp",
  "type":          "/type/link",
  "limit":         1000
}]​ 
```

# javascript - 下拉菜单按钮

> ID：13837202
> 
> 赞同：-3
> 
> 时间：2012-12-12T10:01:06.317
> 
> 标签：javascript, html

我有一个下拉菜单，当用户点击它时它会转发到链接[请点击这里查看](http://www.fedri.com)我不需要任何按钮，当用户选择类别时它会将其转发给他们。我想在用户希望单击菜单时删除该按钮，并且在选择时将其转发到域。请指导我。谢谢...

按钮代码是

```
<FORM name="mapform" method="POST">
<SELECT name="jump" size="1">
<OPTION value="" SELECTED>Select the Category</option>
<OPTION value="http://www.mydomain.com/posting.php?mode=post&f=1">Ask a Question</option>
<OPTION value="http://www.mydomain.com/posting.php?mode=post&f=4">Vehicle for Sale</option>
<OPTION value="http://www.mydomain.com/posting.php?mode=post&f=8">Housing for Rent</option>
</SELECT>
<INPUT type=button onClick= "location = '' + document.mapform.jump.options[ document.mapform.jump.selectedIndex ].value;" value="Place an Ad!">
</FORM> 
```

附加帮助:) 如果可能的话，你能告诉我如何让这个按钮看起来像漂亮的主题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:04:05.477

将`onclick`代码移动到下拉列表的`onchange`事件：

```
<SELECT name="jump" size="1" onchange="window.location = this.value;"> 
```

虽然，我建议创建一个函数，而不是在 inline 事件中抛出所有代码，因为您需要检查是否`Select the Category`选择了该选项，因此不要重定向。

```
<script>
function changeCategory(value)
{
    if(value != "")
    {
        window.location = value;
    }
}
</script>

<SELECT name="jump" size="1" onchange="changeCategory(this.value)"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:09:31.067

试试这个
**HTML**

```
<SELECT name="jump" id="jump" size="1">
<OPTION value="" SELECTED>Select the Category</option>
<OPTION value="http://www.mydomain.com/posting.php?mode=post&f=1">Ask a Question</option>
<OPTION value="http://www.mydomain.com/posting.php?mode=post&f=4">Vehicle for Sale</option>
<OPTION value="http://www.mydomain.com/posting.php?mode=post&f=8">Housing for Rent</option>
</SELECT> 
```

查询脚本

```
<script>
    $(function(){

      $('#jump').bind('change', function () {
          var url = $(this).val(); // get selected value
          if (url) { // require a URL
              window.location = url; // redirect
          }
          return false;
      });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:13:03.237

您必须在该下拉菜单的 onChange 时触发它。

在该下拉列表的 onChange 中，您可以调用 Javascript 函数，并在该函数中重定向它。

或者

您可以为此创建一个 id`<select>`并创建 onchange 事件：

```
<SELECT name="jump" size="1" id="category">
<script type="text/javascript">
   $(document).ready(function() {
      $("#category").onchange(function() {
        // do redirect here  ....................
      });
   });
</script> 
```

# listview - JavaFX2 可观察列表 dataModel 表示字符串

> ID：13837203
> 
> 赞同：0
> 
> 时间：2012-12-12T10:01:06.837
> 
> 标签：listview, javafx, datamodel

伙计们，我需要一些帮助：问题是我希望 ListView> 组件显示底层 dataModel 类的 .toString （或类似的东西）（ObservableList> tests = FXCollections.observableList(list)）

所以在Java中：

```
public class KinderNonStandard extends SeleneseTestCase {

@Before
public ... {}

@Test
public ... {}

@After
public ... {}

@Override
public String toString() {
 return "I want this string to be shown at presentation layer of listView<T>";
}
} 
```

然后我有：

```
 public class TestWindowController implements Initializable{

    @FXML private ListView<Class<? extends SeleneseTestCase>> availableTests;

    @Override
    public void initialize(URL location, ResourceBundle resources) {

 //list contains classes like KinderNonStandard (extends SeleneseTestCase...) 
    ObservableList<Class<? extends SeleneseTestCase>> tests  = Collections.observableList(list);
availableTests.setItems(tests);   
    }    
   } 
```

最后，当我运行应用程序时，在 ListView 中我看到类似“class package.subpackage.KinderNonStandard”的内容，而不是在该类的 toString 中被覆盖的内容。好吧，我不太习惯使用映射并将键作为字符串和值作为基础数据模型类。那么我可以以某种方式管理它以显示覆盖的 toString 方法吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:13:16.487

您`toString()`在`KinderNonStandard`NOT`Class<? extends SeleneseTestCase>`中，而您的列表包含`Class<? extends SeleneseTestCase>`. 要强制调用该`toString()`方法，首先需要实例化相应类的对象。前任：

```
for(Class<? extends SeleneseTestCase> testItem : tests) {
    System.out.printlin(Class.forName(testItem.getName()).newInstance().toString());
} 
```

# php - 使用 php 或 Codeigniter Helper 动态显示域图像

> ID：13837204
> 
> 赞同：0
> 
> 时间：2012-12-12T10:01:09.593
> 
> 标签：php, codeigniter, helper

我正在开发一个应用程序，其中有与不同域相关的不同用户。
在管理面板中，我正在添加一个域。
现在我需要显示每个域的徽标。
如何动态显示任何域的徽标？
有什么方法可以将域名作为字符串输入，并与图像一起返回域信息。
我知道我可以在添加域的同时上传徽标，但我希望它通过一个简单的辅助函数来完成。
我怎样才能实现它。假设我需要这样的功能

```
$autoload['helper'] = array('domain_helper'); 
```

并找到域

```
<img src = "<?php echo domain_image('https://www.google.com/'); ?>" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:43:59.710

使用 curl 从网站拉取图标并将其保存为 png。

[http://php.net/manual/en/curl.examples-basic.php](http://php.net/manual/en/curl.examples-basic.php)

```
<?php
$domain = "google.com";
$image_name = "favicon.ico";

touch("/var/www/domain_images/$domain.png");
$fp = fopen("/var/www/domain_images/$domain.png", "w");

$ch = curl_init("https://".$domain."/".$image_name);

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
?> 
```

* * *

## 编辑

**A word of caution**: if you are taking input from users to get the domain name, make sure you sanitize it before passing it along (as always)!

# mysql - 如何更正查询朋友表以获取没有不同或联合的用户和朋友数据

> ID：13837205
> 
> 赞同：1
> 
> 时间：2012-12-12T10:01:10.343
> 
> 标签：mysql, sql, join, inner-join

我有一张叫朋友的桌子和一张桌子照片。我正在尝试查询朋友照片或拥有朋友照片的用户。我想我需要为朋友表上的内部联接起别名，但不确定

```
Friends Table
user_id int
friend_id int 
[other attribute field]

Photos Table
id      int
user_id int
[other attribute field] 
```

例如，如果我想查询朋友的照片，我会运行

```
SELECT `photos`.`id` FROM `photos` LEFT JOIN `friends` ON (`friends`.`friend_id` = `photos`.`user_id`) WHERE `friends`.`user_id` = 1 
```

或者，如果我只想查询用户表 id

```
SELECT `photos`.`id` FROM `photos` WHERE `photos`.`user_id` = 1 
```

问题是当我尝试将两者都放在同一个结果集中时

```
SELECT  `photos`.`id` 
FROM  `photos` 
LEFT JOIN  `friends` ON (  `friends`.`friend_id` =  `photos`.`user_id` ) 
WHERE  `friends`.`user_id` =1
OR  `photos`.`user_id` =1
LIMIT 0 , 30 
```

由于左连接，这显然会得到错误的结果我为我拥有的每个朋友都得到了一个结果

我在想我需要为 OR 子句或其他东西内部加入一个别名表，但无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:15:46.627

如果您的第一个查询只使用 UNION 怎么办：

```
SELECT `photos`.`id` 
   FROM `photos` 
        LEFT JOIN `friends` ON (`friends`.`friend_id` = `photos`.`user_id`) 
   WHERE `friends`.`user_id` = 1
union all 
SELECT `photos`.`id` FROM `photos` WHERE `photos`.`user_id` = 1 
```

如果你不想使用 UNION 那么

```
SELECT `photos`.`id` 
   FROM `photos` where `photos`.`user_id`=1
                   or `photos`.`user_id` 
                       in (select `friends`.`friend_id` from `friends`
                                             where `friends`.`user_id` = 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:49:04.380

我认为联合是解决这个问题的最佳方法。

或者您可以尝试使用带有“OR”的子查询

```
SELECT photos.id FROM photos WHERE 
(photos.user_id = 1) or 
(photos.user_id in (select friends.friend_id from friends where friends.user_id=1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:15:22.467

对于您所展示的内容，您根本不需要`JOIN`。由于该`photos`表已经包含用户 ID，因此`friends`您所显示的任何内容都不需要该表。只需`photos`直接查询即可获取特定用户的照片。

也许您真的想要一些不同的东西，例如仅在某人实际上是朋友时才返回照片。在这种情况下，您需要`inner join`而不是左连接，您可以这样做：

```
SELECT  `photos`.`id` 
FROM  `photos` 
INNER JOIN  `friends` ON
  `friends`.`friend_id` =  `photos`.`user_id`  AND
  `friends`.`user_id` =1
LIMIT 0 , 30 
```

如果要返回 ID 为 1 的朋友的照片，以及用户 ID 2 的照片，无论该人是否为朋友，请执行以下操作：

```
SELECT  `photos`.`id` 
FROM  `photos` 
LEFT JOIN  `friends` ON
  `friends`.`friend_id` =  `photos`.`user_id`  AND
  `friends`.`user_id` = 1
WHERE
  `friends`.`friend_id` IS NOT NULL OR
  `photos`.`user_id` = 2
LIMIT 0 , 30 
```

# c# - C# Visual Studio 2010 - “无法加载类型”解析错误

> ID：13837206
> 
> 赞同：4
> 
> 时间：2012-12-12T10:01:12.603
> 
> 标签：c#, asp.net, visual-studio-2010

**解析器错误消息：无法加载类型“TestProject.Default”。**

* * *

*我已经检查了我能找到的关于这个问题的所有其他线程。到目前为止，我还没有找到适用于我的案例的解决方案。*

* * *

**源错误：**

```
Line 1:  <%@ Page Title="Home Page" Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="TestProject.Default" %>
Line 2:  
Line 3:  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

Source File: /testarea/default.aspx    Line: 1 
```

**默认.aspx.cs**

```
using System;
using System.Web;
using System.Web.UI;

namespace TestProject
{
    public partial class Default : System.Web.UI.Page
    { 
```

**相关说明**

*   /testarea 是服务器上不可编译文件所在的目录 /testarea/bin 包含已编译文件
*   项目已编译（使用 Build -> Build TestProject）
*   调试时在本地运行良好 - 问题仅在发布到 Web 时出现
*   我不/不能通过 VS 发布（没有首页扩展），所以复制文件（使用 Build -> Publish -> File System 后从 PackageTmp 文件夹）
*   我使用相同的方法将之前的项目放到了网络上，没有任何问题。
*   在所有其他线程和对这个问题的引用中，命名空间不准确、缺乏编译项目和项目属性似乎不适用于这种情况（我已经检查了很多次，并且所有看起来都是正确的）
*   项目属性中的输出路径为\bin，与服务器上的位置相同（/testarea/bin）
*   已尝试“转换为 Web 应用程序”，但之前和之后都存在问题
*   尝试了无数次构建->清理，然后再次构建，清理然后发布。没变。

**边注**

我是一名 PHP 开发人员，所以这些奇怪的 .NET / C# 问题很难追踪并找到逻辑，对我来说尤其困难。任何建议重新。如何正确调试 VS C# 应用程序将不胜感激。

这是我在这里的第一个问题。如果我可以通过更多信息帮助使这更容易，请问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T14:52:19.913

我遇到了类似的问题，不同之处在于我有时无法编译，有时我能够编译但在浏览器打开时收到错误，没有加载页面并声明它无法加载类型 xxxxyyyy .default 我之前所做的是手动导入一些类（将 .cs 文件放到项目标题中），昨天在另一台计算机上运行良好。现在我在另一台计算机上并收到此错误。一开始的一个问题是，当我导入这些类时，它们属于不同的命名空间。所以起初我决定改变所有类的命名空间来“规范化”这个问题。它碰巧适用于编写代码，但在运行时它返回错误。所以我最后做的是返回到原来的命名空间，只包括 ' 在 Default.aspx.cs 文件顶部使用 NameOfMyImportedNamespace'。与命名空间相关的新错误再次出现。因此，我最终通过将文件 Default.aspx.designer.cs 上的先前命名空间（原始）重命名为 NameOfMyImportedNamespace 来解决它，并且它起作用了！但是，当我今天收到这个新错误时，我发现 Default.aspx.designer.cs 文件上的命名空间已重命名回原来的名称。所以这次我重命名它时，我注意到 Visual Studio 在你更改的单词后面绘制的红色光标，并且有一个选项可以在整个项目本身中重命名该命名空间。所以我做到了，它终于奏效了。我想我的项目名称也会被重命名，但它没有，所以我认为它可能是解决您问题的合适方法。顺便一提，我昨天开始在 Windows 7 下运行的 VS2010 Ultimate 上编写此代码，错误发生并在我现在使用的另一台计算机上得到解决，在 Windows XP 下运行 VS2010 Enterprise。所以我想这不应该是操作系统或 VS 版本问题，因为它可以通过重命名命名空间来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:17:42.570

试试这条线，**`Line 1`**而不是你已经拥有的。

```
<%@ Page Title="Home Page" Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="TestProject._Default" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T04:24:55.587

你的第一行应该喜欢

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="Default" %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T14:47:28.453

我得到了 MyProject.csproj 文件的旧副本并将其替换并修复了它。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-10T10:02:45.110

您在页面参考上方缺少您的程序集参考：

```
<%@ Assembly Name="YOURASSEMBLY.NAME, Version=1.0.0.0, Culture=neutral, PublicKeyToken=YOURPUBLICKEYTOKEN" %> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-12T10:22:06.887

尝试从最后一部分中删除 .Default：Inherits="TestProject.Default"%>

# android - onPostExecute() 等待时间过长？

> ID：13837208
> 
> 赞同：1
> 
> 时间：2012-12-12T10:01:26.480
> 
> 标签：android, user-interface

我有一些控制，因此我做了一些线程。我想用 asycntask 将加载栏显示到另一个屏幕。我的问题是加载栏正在显示并快速消失，然后在没有加载栏的情况下等待同一个屏幕。并且过了一会儿，它会进入第二个屏幕。我认为后执行不适合我。有人可以帮助我吗？

这是我的代码：

```
private class ProgressBarAsync extends AsyncTask<Void, Integer, Void>{

        /** This callback method is invoked, before starting the background process */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            /** Creating a progress dialog window */
            mProgressDialog = new ProgressDialog(Login.this);

            /** Close the dialog window on pressing back button */
            mProgressDialog.setCancelable(true);

            /** Setting a horizontal style progress bar */
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

            /** Setting a message for this progress dialog
             * Use the method setTitle(), for setting a title
             * for the dialog window
             *  */
            mProgressDialog = ProgressDialog.show(Login.this, 
                    "Giriş yapıyorsunuz", "Lütfen bekleyin...");

        }

        /** This callback method is invoked on calling execute() method
         * on an instance of this class */
        @Override
        protected Void doInBackground(Void...params) {

            try {
                startMyApplication() ;
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }

        /** This callback method is invoked when publishProgress()
         * method is called */
        @Override
        protected void onProgressUpdate(Integer... values) {
            super.onProgressUpdate(values);
            mProgressDialog.setProgress(mProgressStatus);
        }

        /** This callback method is invoked when the background function
         * doInBackground() is executed completely */
        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            if (mid > 0) {
                Intent btn_login = new Intent(
                        getApplicationContext(), MainScreen.class);
                startActivity(btn_login);
            }
            else {
                AlertDialog.Builder alertDialog = new AlertDialog.Builder(Login.this);

                // Setting Dialog Title
                alertDialog.setTitle("GİRİŞ");

                // Setting Dialog Message
                alertDialog.setMessage("Kullanıcı adı veya Parola Hatalı Lütfen tekrar deneyin.");

                // Setting Icon to Dialog
                //alertDialog.setIcon(R.drawable.delete);

                // Setting Negative "NO" Button
                alertDialog.setNegativeButton("TAMAM", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {

                        dialog.cancel();
                    }
                });

                // Showing Alert Message
                alertDialog.show();         
            }

            //run();                    
            mProgressDialog.dismiss(); 
```

这是 startmyapp 主题：

```
public void startMyApplication() throws InterruptedException {

    ExecutorService executor = Executors.newFixedThreadPool(2);
    FutureTask<String> futureOne = new FutureTask<String>(
            new Callable<String>() {
                public String call() throws Exception {
                    if (isOnline()) {
                        // Call Login Web Service with username and password and get mid
                        mid = callLoginWS(username.getText().toString(), password.getText().toString());                            
                        if (mid > 0) {
                            //callPasswordGeneratorWS(mid);
                            // Insert mid and username into sqllite
                            dbInstance.insertMerch(mid,username.getText().toString());
                        }
                        Log.i("futureone", "futureone");

                    }
                    return "TEST";  
                }
            });

    FutureTask<String> futureTwo = new FutureTask<String>(
            new Callable<String>() {
                public String call() throws Exception {
                    // Get mid from database
                    mid = dbInstance.selectMerch(username.getText().toString());
                    return "TEST";
                }

            });

    // ... Dispatch
    // Check if user exists previously
    // ... Dispatch     
    mid = dbInstance.selectMerch(username.getText().toString());
    dbInstance.close();

    executor.execute(futureOne);
    while (!(futureOne.isDone())) {
        executor.execute(futureTwo);
    }
    Log.i("login","new login");
    //}
    executor.shutdown();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:19:23.733

此部分导致延迟。

```
while (!(futureOne.isDone())) {
        executor.execute(futureTwo);
    } 
```

在这里，您正在阻止当前线程完成。并等待 `futureOne`完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:18:58.503

如果我没记错的话。您已经在使用 AsyncTask 异步执行 startMyApplication() 那么为什么要创建 FutureTask。您已经在后台任务中。（考虑到中间很长）尝试像这样修改你的代码，

```
 public Long startMyApplication(){
       if (isOnline()) {
          // Call Login Web Service with username and password and get mid
          mid = callLoginWS(username.getText().toString(), password.getText().toString());                            
          if (mid > 0) {
                //callPasswordGeneratorWS(mid);
                // Insert mid and username into sqllite
                dbInstance.insertMerch(mid,username.getText().toString());
          }
          Log.i("futureone", "futureone");

          }
      mid = dbInstance.selectMerch(username.getText().toString()); //OR directly returning mid without fetching from db as it will be same.
      return mid;
    } 
```

现在在 doInBackground。

```
@Override
protected Long doInBackground(Void...params) {
            Long temp = -1l;
            try {
                temp = startMyApplication() ;
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return temp;
 }

@Override
protected void onPostExecute(Long mid) {
mProgressDialog.dismiss(); //First dismiss the progress bar.
//Rest of ur code will go same in this. Remember mid is now accessible correctly.
} 
```

更改以下行，

```
private class ProgressBarAsync extends AsyncTask<Void, Integer, Void> 
```

经过

```
private class ProgressBarAsync extends AsyncTask<Void, Integer, Long> 
```

据我了解，这可能对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:24:28.563

首先，尝试在没有*ExecutorService的情况下执行**startMyApplication*方法。当您在*doInBackground*中运行代码时，您已经在另一个线程中（如果我错了，请纠正我），因此请在不使用额外线程的情况下运行您的代码。这样做并检查一切是否正常。 另外，我注意到您没有在 doInBackground 方法的任何地方调用*publishProgress* ( *Progress... values)*方法。因此，您无法为进度条发布正确的值。

# java - 推土机：不支持数字到数字的映射

> ID：13837209
> 
> 赞同：1
> 
> 时间：2012-12-12T10:01:28.397
> 
> 标签：java, integer, dozer

为什么 dozer 不能将 Number 类型的 Source Class 变量映射到相同类型的 Destination Class 变量？

得到以下异常：

```
java.lang.IllegalArgumentException: argument type mismatch

Some more Info:
Dest parent class: XXX
Source field name: totalAccounts
Source field type: class java.lang.Integer
Source field value: 8
Dest parent class: XXX
Dest field name: totalAccounts
Dest field type: java.lang.Number 
```

在这里，源类和目标类都引用相同的类类型，比如 Transactions。两者都有 Number 字段，但是在从源类映射到目标类时，它会抛出这样的异常。

我不明白为什么它应该是具有相同数据类型的“参数不匹配”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:36:18.680

根据您的推土机消息，它不是同一类型。源字段是`Integer`，目的地是`Number`。

[Dozer 文档](http://dozer.sourceforge.net/documentation/simpleproperty.html)没有提到这样的内置转换器（至少，如果我没看错的话），所以您可能需要实现自己的`org.dozer.CustomConverter`. 既然你说它是同一个类和同一个字段，我不知道为什么一个是`Integer`，另一个是`Number`（至少，没有关于类和映射文件的更多信息）。最好仔细检查类和映射文件，并尝试将其`CustomConverter`作为解决方法。

# wpf - WPF，将 XAML 文件移动到另一个项目

> ID：13837213
> 
> 赞同：0
> 
> 时间：2012-12-12T10:02:00.677
> 
> 标签：wpf, user-controls, compiler-errors, prism-4

我刚刚将几个 WPF 用户控件从一个项目移动到另一个项目，现在我在编译时遇到所有这些错误，据说所有用户控件 CodeDom、Windows、Diagnostics 和 ComponentModel 都缺少相同的命名空间

```
Error   9   The type or namespace name 'CodeDom' does not exist in the namespace 'Brodit.Etikettsystem.Modules.System' (are you missing an assembly reference?) C:\Users\per\Desktop\Etikettsystem\Brodit.Etikettsystem.Modules\obj\Debug\Customers\CustomersView.g.cs  48  17  Brodit.Etikettsystem.Modules
Error   1   The type or namespace name 'Windows' does not exist in the namespace 'Brodit.Etikettsystem.Modules.System' (are you missing an assembly reference?) C:\Users\per\Desktop\Etikettsystem\Brodit.Etikettsystem.Modules\obj\Debug\Customers\CustomersView.g.cs  40  49  Brodit.Etikettsystem.Modules
Error   7   The type or namespace name 'Diagnostics' does not exist in the namespace 'Brodit.Etikettsystem.Modules.System' (are you missing an assembly reference?) C:\Users\per\Desktop\Etikettsystem\Brodit.Etikettsystem.Modules\obj\Debug\Customers\CustomersView.g.cs  47  17  Brodit.Etikettsystem.Modules 
```

移动后，我更改了所有命名空间以匹配新项目名称，我尝试删除 obj 文件夹并为所有 xaml 文件运行自定义工具。关于我应该做些什么来解决这个问题的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:06:34.977

这些是 .NET Framework 命名空间。目标项目中似乎缺少一些 WPF 和系统库。

您是否尝试将 XAML 文件复制到类库项目？如果是这样，您应该添加对目标项目的正确引用。

另一种可能性是您的项目以不包含 WPF 库的 .NET Framework 2.0 为目标。

大多数 System.Windows 类（包括[Window](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)）在 PresentationFramework.dll 中定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:42:02.597

我看起来问题是我的命名空间`Brodit.Etikettsystem.Modules.System`我将`System`部分更改为`SystemModules`现在它全部编译。

# c++ - Rapidjson 输出到字符串不起作用

> ID：13837214
> 
> 赞同：2
> 
> 时间：2012-12-12T10:02:03.027
> 
> 标签：c++, rapidjson

我正在尝试使用 rapidjson 将自身输出到字符串以保存到数据库，使用以下代码：

```
StringBuffer buffer;
Writer<FileStream> writer(buffer);
rest.Accept(writer);
string reststring = buffer.GetString(); 
```

其中 rest 是一个 rapidjson::Document。

但是我收到以下错误：

```
no matching function for call to ‘rapidjson::Writer<rapidjson::FileStream>::Writer (rapidjson::StringBuffer&)’. 
```

这很奇怪，因为 rapidjson 的作者在回答之前的 SO 问题时推荐了这种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T10:17:24.920

昨晚写这段代码的时候，我一定是累了。

改变

```
Writer<FileStream> writer(buffer); 
```

到

```
Writer<StringBuffer> writer(buffer); 
```

解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-11T10:29:38.320

尝试使用`rapidjson::StringBuffer`and`rapidjson::Writer`获取字符串输出。

```
rapidjson::StringBuffer buffer;
rapidjson::Writer<rapidjson::StringBuffer> writer(buffer);
rest.Accept(writer);
std::string str = buffer.GetString(); 
```

`string`在这里，您可以同时获得价值`std::string`。以上我用于`std::string`获取价值。这有效...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:10:22.407

正如您的编译器建议的那样，您必须在以下位置修改代码：

```
 StringBuffer buffer;
 Writer<FileStream> writer(&buffer); 
```

或者：

```
 StringBuffer* buffer;
 Writer<FileStream> writer(buffer); 
```

# c# - 添加元素时，xmlns 属性创建为空

> ID：13837220
> 
> 赞同：1
> 
> 时间：2012-12-12T10:02:09.520
> 
> 标签：c#, linq-to-xml

我有这个 xml 文件：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<S2SDDIdf:MPEDDIdfBlkDirDeb xmlns:S2SDDIdf="urn:S2SDDIdf:xsd:$MPEDDIdfBlkDirDeb"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="urn:S2SDDIdf:xsd:$MPEDDIdfBlkDirDeb MPEDDIdfBlkDirDeb.xsd">

  <S2SDDIdf:SndgInst>CHASDEFX</S2SDDIdf:SndgInst>
  <S2SDDIdf:RcvgInst>BOFIIE2D</S2SDDIdf:RcvgInst>
  <S2SDDIdf:pacs.003.001.01 xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.003.001.01">

  </S2SDDIdf:pacs.003.001.01>
</S2SDDIdf:MPEDDIdfBlkDirDeb> 
```

我在元素 S2SDDIdf:pacs.003.001.01 下添加了这个元素：

```
<DrctDbtTxInf>
    <PmtId>
        <EndToEndId>DDIE2EA00033</EndToEndId>
        <TxId>DDITXA00033</TxId>
    </PmtId>
</DrctDbtTxInf> 
```

这是代码：

```
// Read pacs.003.001.01 element
XElement bulk = XElement.Parse(File.ReadAllText("_Bulk.txt"));

// Read DrctDbtTxInf element
XElement tx = XElement.Parse(File.ReadAllText("_Tx.txt"));

// Add DrctDbtTxInf element to pacs.003.001.01 element
bulk.Element("{urn:S2SDDIdf:xsd:$MPEDDIdfBlkDirDeb}pacs.003.001.01").Add(tx); 
```

问题是元素 DrctDbtTxInf 获得一个空的 xmlns 属性：

```
<DrctDbtTxInf xmlns=""> 
```

如果是我该如何摆脱？我试图在 DrctDbtTxInf 元素中提供与 pacs.003.001.01 中相同的命名空间，但它只是停留在那里，这会破坏读取 xml 的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:15:56.857

是的，您需要为所有新元素递归地提供命名空间：

```
public static class Extensions
{
    public static XElement SetNamespaceRecursivly(this XElement root,
                                                  XNamespace ns)
    {
        foreach (XElement e in root.DescendantsAndSelf())
        {
            if (e.Name.Namespace == "")
                e.Name = ns + e.Name.LocalName;
        }

        return root;    
    }
}

XNamespace ns = "urn:iso:std:iso:20022:tech:xsd:pacs.003.001.01";

// Add DrctDbtTxInf element to pacs.003.001.01 element
bulk.Element("{urn:S2SDDIdf:xsd:$MPEDDIdfBlkDirDeb}pacs.003.001.01")
    .Add(tx.SetNamespaceRecursivly(ns)); 
```

这将产生以下 XML：

```
<S2SDDIdf:MPEDDIdfBlkDirDeb xmlns:S2SDDIdf="urn:S2SDDIdf:xsd:$MPEDDIdfBlkDirDeb" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:S2SDDIdf:xsd:$MPEDDIdfBlkDirDeb MPEDDIdfBlkDirDeb.xsd">
  <S2SDDIdf:SndgInst>CHASDEFX</S2SDDIdf:SndgInst>
  <S2SDDIdf:RcvgInst>BOFIIE2D</S2SDDIdf:RcvgInst>
  <S2SDDIdf:pacs.003.001.01 xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.003.001.01">
    <DrctDbtTxInf>
      <PmtId>
        <EndToEndId>DDIE2EA00033</EndToEndId>
        <TxId>DDITXA00033</TxId>
      </PmtId>
    </DrctDbtTxInf>
  </S2SDDIdf:pacs.003.001.01>
</S2SDDIdf:MPEDDIdfBlkDirDeb> 
```

# mysql - mysql查找插入时间戳

> ID：13837223
> 
> 赞同：0
> 
> 时间：2012-12-12T10:02:17.180
> 
> 标签：mysql

有没有办法通过插入时间戳对选择查询中的行进行排序，而没有时间戳列。所以我想找到最近插入的行，但是没有记录插入时间戳的列。这里有每一行的内部记录吗？

表没有主键，外键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:08:47.357

`No`，如果你有主键自动增量，你可以找出结果。但是有可能在不同的日/月/年插入了两个连续的行。所以，`only depending on the primary you can't find out the recent records.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:19:24.453

如果您有一个主键字段（并且该主键不必是自动增量），那么可以像这样实现

```
SELECT * FROM table ORDER BY _rowid DESC 
```

# php - PHP 中安全、唯一、编码的 URL/文件名？

> ID：13837225
> 
> 赞同：0
> 
> 时间：2012-12-12T10:02:26.103
> 
> 标签：php, url, encoding, proxy, security

我有一个 PHP 网站，它充当 Web 代理/匿名器，并且我设置了它，每个访问的页面都在我的服务器上缓存一段有限的时间。为了进一步确保安全，我想将 URL 编码为一组十六进制字符，**但它需要足够独特，以防止两个 URL 发生冲突**；缓存页面的文件名将反映编码的 URL，因此我不能允许它们被另一个页面的访问覆盖。

同时，我一直在使用这个：

```
$file = str_shuffle(preg_replace("/[^a-zA-Z0-9\s]/", "", urlencode($url))) .".html"; 
```

...但是这里的问题是它总是随机的并且不能保证是完全唯一的。我想这样做，以便用户可以为他们的 URL 添加书签（并在给定的时间段内重新访问它们，而无需重新导航到页面）。如何生成这样的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:10:26.097

如果您需要“安全”，例如 URL 的*不可逆*、唯一“编码”，这就是[*哈希*](http://en.wikipedia.org/wiki/Hash_function)的用途：

```
$hash = sha1('http://...'); 
```

每个 URL 的值都是唯一的，两个相同的 URL 将散列到相同的值，它们不可逆，并且对于大多数意图和目的来说都是随机值。

如果您正在谈论*编码*（从一种形式更改为另一种形式）或*加密*（使用*密钥*更改为另一种形式），那么您正在谈论可逆算法，在这种情况下，结果根据定义是唯一的。*编码*字符串不会是“安全的”，因为没有秘密。*加密*字符串与保守秘密一样安全。

所以你有三个选择：

1.  编码（例如`url_encode`，`base64_encode`），这是不安全和可逆的
2.  加密（例如 AES），它使用秘密并且是安全和可逆的
3.  散列（例如 SHA1），这是不可逆的，因此是安全的

所有这三个都会产生唯一值（好的散列在数学上具有足够高的概率来产生唯一值）。

# java - 如何在Java的谷歌应用引擎中生成唯一ID

> ID：13837227
> 
> 赞同：1
> 
> 时间：2012-12-12T10:02:39.270
> 
> 标签：java, google-app-engine

我试图在谷歌应用引擎中动态存储文件列表。我可以在数据存储查看器中查看文件列表，其中包含名称和默认 ID/名称（例如 id/name=4002），如果我想检索此 ID（id/name=4002）是否提供任何功能谷歌为此？我还可以使用一些独特的 id 生成器在查看器中手动添加吗？建议我一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:21:33.517

查看器只是一个有用的工具，不要开始将其用作直接创建实体的方式，因为某些类型您无法输入。建立一个前端。

如果您创建具有特定 ID 的模型：

```
new_Model = model(id="SomeValue") 
```

您稍后可以使用[get by id](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id)使用该 id 获取它。

```
m = get_by_id("SomeValue")
#get_by_id(id, parent=None, app=None, namespace=None, **ctx_options) 
```

GAE 生成的 ID 号保证唯一。您还可以生成和保留一系列唯一的[数字键](https://developers.google.com/appengine/docs/python/ndb/entities#numeric_keys)。

# java - 在 Android 中直接访问 SQL 数据库

> ID：13837231
> 
> 赞同：2
> 
> 时间：2012-12-12T10:02:53.327
> 
> 标签：java, android, sql, jdbc, jtds

我正在构建一个基本应用程序，它可以让我扫描 RFID 标签并将数据推送到 SQL 服务器。我终于把 NFC 部分破解了（第一个 Java/Android 应用程序），但是数据库有问题。我已经完成了搜索，但找不到答案。我知道直接连接到服务器是一种安全风险和不好的做法，但是这个应用程序只会安装在一部手机上，并且只用于演示/测试目的。任何实际部署都会获得一个 Web 界面，但现在这根本不是一个选项。

我正在使用 jtds 1.3.0 驱动程序和以下代码片段：

```
 import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.Statement;

    import net.sourceforge.jtds.jdbc.*;

    public void query2()
    {
    Log.i("Android"," MySQL Connect Example.");
    Connection conn = null;
    try {
    String driver = "net.sourceforge.jtds.jdbc.Driver";
    Class.forName(driver).newInstance();
    //test = com.microsoft.sqlserver.jdbc.SQLServerDriver.class;
    String connString = "jdbc:jtds:sqlserver://server_ip_address               
    :1433/DBNAME;encrypt=fasle;user=xxxxxxxxx;password=xxxxxxxx;instance=SQLEXPRESS;";
    String username = "xxxxxx";
    String password = "xxxxxxxxxx";
    conn = DriverManager.getConnection(connString,username,password);
    Log.w("Connection","open");
    Statement stmt = conn.createStatement();
    ResultSet reset = stmt.executeQuery("select * from TableName");

    //Print the data to the console
    while(reset.next()){
    Log.w("Data:",reset.getString(3));
    //              Log.w("Data",reset.getString(2));
    }
    conn.close();

    } catch (Exception e)
    {
    Log.w("Error connection","" + e.getMessage());
    }
    } 
```

目前，我的问题是，每当我到达

```
 Class.forname(driver).newInstance(); 
```

它直接跳到 catch 块。我不确定为什么。我一行一行地走了，但是当异常发生时找不到错误消息，也不知道为什么会这样。多谢你们。

编辑：我删除了 try/catch 块然后执行它并从 logcat 中获得分配。不确定它是否有帮助，但这是它给我的：

```
12-12 05:29:37.369: W/dalvikvm(1242): threadid=1: thread exiting with uncaught exception (group=0x4150a930)
12-12 05:29:37.389: E/AndroidRuntime(1242): FATAL EXCEPTION: main
12-12 05:29:37.389: E/AndroidRuntime(1242): java.lang.IllegalStateException: Could not execute method of the activity
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.view.View$1.onClick(View.java:3597)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.view.View.performClick(View.java:4202)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.view.View$PerformClick.run(View.java:17340)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.os.Handler.handleCallback(Handler.java:725)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.os.Looper.loop(Looper.java:137)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.reflect.Method.invokeNative(Native Method)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.reflect.Method.invoke(Method.java:511)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at dalvik.system.NativeStart.main(Native Method)
12-12 05:29:37.389: E/AndroidRuntime(1242): Caused by: java.lang.reflect.InvocationTargetException
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.reflect.Method.invokeNative(Native Method)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.reflect.Method.invoke(Method.java:511)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at android.view.View$1.onClick(View.java:3592)
12-12 05:29:37.389: E/AndroidRuntime(1242):     ... 11 more
12-12 05:29:37.389: E/AndroidRuntime(1242): Caused by: java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.Class.classForName(Native Method)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.Class.forName(Class.java:217)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.Class.forName(Class.java:172)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at com.nateapp.finalproject.MainActivity.sendData(MainActivity.java:261)
12-12 05:29:37.389: E/AndroidRuntime(1242):     ... 14 more
12-12 05:29:37.389: E/AndroidRuntime(1242): Caused by: java.lang.NoClassDefFoundError: net/sourceforge/jtds/jdbc/Driver
12-12 05:29:37.389: E/AndroidRuntime(1242):     ... 18 more
12-12 05:29:37.389: E/AndroidRuntime(1242): Caused by: java.lang.ClassNotFoundException: Didn't find class "net.sourceforge.jtds.jdbc.Driver" on path: /data/app/com.nateapp.finalproject-1.apk
12-12 05:29:37.389: E/AndroidRuntime(1242):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-12 05:29:37.389: E/AndroidRuntime(1242):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-12 05:29:37.389: E/AndroidRuntime(1242):     ... 18 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:06:18.563

经过一番搜索，有人建议这是 1.3.0 版本中的错误。我只是从我的项目（libs 文件夹）中删除了 1.3.0 版本，然后将 1.2.7 版本放入其中，它现在可以正常工作了。

# sql - 如何查找给定的日期范围是否存在于 SQL Server 存储过程中的日期范围列表中？

> ID：13837236
> 
> 赞同：0
> 
> 时间：2012-12-12T10:03:03.417
> 
> 标签：sql, stored-procedures, sql-server-2008-r2

我必须编写一个存储过程来查找给定的日期范围是否与表中的日期范围列表**重叠。**

前任）

数据库：SQL Server 2008 R2

```
SP Input: 2012-12-17 18:30:00.000       2012-12-19 18:29:59.000

SP Output(Out parameter): True/False 
```

**预订表样本数据：**

```
FromDate                    ToDate

2012-12-11 18:30:00.000     2012-12-12 18:29:59.000
2012-12-12 18:30:00.000     2012-12-13 18:29:59.000
2012-12-10 18:30:00.000     2012-12-11 18:29:59.000
2012-12-18 18:30:00.000     2012-12-19 18:29:59.000
2012-12-23 18:30:00.000     2012-12-28 18:29:59.000
2012-12-17 18:30:00.000     2012-12-18 18:29:59.000
2012-12-19 18:30:00.000     2012-12-22 18:29:59.000
2012-12-16 18:30:00.000     2012-12-17 18:29:59.000
2012-12-13 18:30:00.000     2012-12-14 18:29:59.000
2012-12-11 23:00:00.000     2012-12-12 22:59:59.000 
```

**存储过程：**

```
USE [BookingDB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[FindConflict]    
    @FromDate datetime,
    @ToDate datetime,
    @IsConflict bit OUT
AS

BEGIN

?????????????????????(what to write here)

END 
```

SQL：

```
USE [BookingDB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[BookingAdmin](
    [PK_BookingAdmin] [int] IDENTITY(1000,1) NOT NULL,
    [FromDate] [datetime] NOT NULL,
    [ToDate] [datetime] NOT NULL,
 CONSTRAINT [PK_BookingAdmin] PRIMARY KEY CLUSTERED 
(
    [PK_BookingAdmin] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[BookingAdmin] ON
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1048, CAST(0x0000A1240130DEE0 AS DateTime), CAST(0x0000A1250130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1049, CAST(0x0000A1250130DEE0 AS DateTime), CAST(0x0000A1260130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1050, CAST(0x0000A1230130DEE0 AS DateTime), CAST(0x0000A1240130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1051, CAST(0x0000A12B0130DEE0 AS DateTime), CAST(0x0000A12C0130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1052, CAST(0x0000A1300130DEE0 AS DateTime), CAST(0x0000A1350130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1053, CAST(0x0000A12A0130DEE0 AS DateTime), CAST(0x0000A12B0130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1055, CAST(0x0000A12C0130DEE0 AS DateTime), CAST(0x0000A12F0130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1056, CAST(0x0000A1290130DEE0 AS DateTime), CAST(0x0000A12A0130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1057, CAST(0x0000A1260130DEE0 AS DateTime), CAST(0x0000A1270130DDB4 AS DateTime))
INSERT [dbo].[BookingAdmin] ([PK_BookingAdmin], [FromDate], [ToDate]) VALUES (1058, CAST(0x0000A124017B0740 AS DateTime), CAST(0x0000A125017B0614 AS DateTime))
GO

CREATE PROCEDURE [dbo].[FindConflict]    
    @FromDate datetime,
    @ToDate datetime,
    @IsConflict bit OUT
AS
BEGIN
    if exists (select * from BookingAdmin where FromDate = @ToDate and ToDate = @FromDate)
        set @IsConflict = 1   
    else
        set @IsConflict = 0        
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:05:53.190

如果我正确理解了您的需求，并且您只需要检查表中是否有完全相同的范围，您可以试试这个

```
USE [BookingDB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[FindConflict]    
    @FromDate datetime,
    @ToDate datetime,
    @IsConflict bit OUT
AS
BEGIN
    if exists (select * from <your table> where FromDate = @FromDate and ToDate = @ToDate)
        set @IsConflict = 1   
    else
        set @IsConflict = 0
END 
```

**如果您想了解重叠范围，请**更新，试试这个****

 **```
 ...
    if exists (select * from <your table> where FromDate <= @ToDate and ToDate >= @FromDate)
        set @IsConflict = 1   
    else
        set @IsConflict = 0
 ... 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/b63b04/1)**

# spring - Spring+Hibernate ORM注解

> ID：13837237
> 
> 赞同：0
> 
> 时间：2012-12-12T10:03:08.567
> 
> 标签：spring, hibernate, orm, annotations, hql

我尝试在 Spring 中将 ORM 与 Hibernate 注释一起使用，但是当我想制作关节时它失败了。

我有两个表（根据java类）：

产品 (PK productId, FK productGroup) 产品组 (PK productGroupTri)

产品.java

```
@Entity
@Table(name="product")
public class Product implements Serializable{

@Id
@Column(name="product_id")
@GeneratedValue(strategy=GenerationType.IDENTITY)
private int productId;

@Column(name="product_name")
private String productName;

@OneToOne
@PrimaryKeyJoinColumn
private ProductGroup productGroup;

public void setProductId(int productId) {
    this.productId = productId;
} 

public int getProductId() {
    return this.productId;
} 

public void setProductName(String productName) {
    this.productName = productName;
} 

public String getproductName() {
    return this.productName;
} 

public void setProductGroup(ProductGroup productGroup) {
    this.productGroup = productGroup;
} 

public ProductGroup getProductGroup() {
    return this.productGroup;
}
} 
```

产品组.java

```
@Entity
@Table(name="product_grp")
public class ProductGroup {

@Id
@Column(name="grp_tri")
@GeneratedValue(strategy=GenerationType.IDENTITY)
private String productGroupTri;

@Column(name="grp_div")
private String productGroupDiv;

@OneToOne(mappedBy="productGroup", cascade=CascadeType.ALL)
private Product product;

public void setProductGroupTri(String productGroupTri) {
    this.productGroupTri = productGroupTri;
} 

public String getProductGroupTri() {
    return this.productGroupTri;
} 

public void setProductGroupDiv(String productGroupDiv) {
    this.productGroupDiv = productGroupDiv;
} 

public String getProductGroupDiv() {
    return this.productGroupDiv;
} 

public void setProduct(Product product) {
    this.product = product;
}

public Product getProduct() {
    return this.product;
}
} 
```

以及失败的 HQL 请求：

```
String hql = "from Product as p where p.productId = :id";
    Query query = sessionFactory.getCurrentSession().createQuery(hql);
    query.setInteger("id", productId);

    return (Product) query.uniqueResult(); 
```

我收到以下消息：

```
org.hibernate.TypeMismatchException: Provided id of the wrong type. Expected: class java.lang.String, got class java.lang.Integer 
```

我想访问产品的组名，我知道这是因为主键和外键的类型，但是尽管我已经在论坛上进行了搜索，但我没有发现任何问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:14:58.373

看起来你应该`integer`在课堂上有一个 id `ProductGroup.java`：

```
 @Entity
 @Table(name="product_grp")
 public class ProductGroup {

 @Id
 @Column(name="grp_tri")
 @GeneratedValue(strategy=GenerationType.IDENTITY)
 private int productGroupTri; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:14:44.897

@carbontax，我做了这个 HQL：

```
String hql = "select p from Product as p join p.productGroup as g where p.productId = :id"; 
```

然后，我找到了一个问题来纠正这个错误。事实上，我有这段代码可以访问我的 JSP 中的列：

```
<td class="GlobalInfoTitle">Group</td><td><c:out value="${model.product.grp_tri}"/></td> 
```

我纠正这个：

```
<td class="GlobalInfoTitle">Groupe</td><td><c:out value="${model.product.productGroup.grp_tri}"/></td> 
```

我还将 Product.java 中的基数修改为 ManyToOne，并将 ProductGroup.java 中的基数修改为 OneToMany。

主要问题是我访问了对象产品来获取我的属性而不是对象产品组。

如果有人遇到与我相同的问题，他可以向我寻求帮助，因为问题最终很容易......

# php - dompdf 图像溢出问题

> ID：13837251
> 
> 赞同：11
> 
> 时间：2012-12-12T10:03:41.687
> 
> 标签：php, pdf, image-processing, pdf-generation, dompdf

我在生成 PDF 时遇到了问题，目前我的系统正在使用 dompdf 将 HTML 转换为 PDF，这一切都很好。但是，如果用户插入的图像大于 A4 页面，则 PDF 会严重损坏，并且大图像下方的所有内容都会聚集在一起或根本不显示。

这里有两个 PDF 来展示这个问题的一个例子

这个不错

[https://dl.dropbox.com/u/65878041/OK.pdf](https://dl.dropbox.com/u/65878041/OK.pdf)

这个你可以看到，第一张图片比 A4 页面大，后面的所有内容都被搞砸了，当它应该与前一个相同时。

[https://dl.dropbox.com/u/65878041/Issue.pdf](https://dl.dropbox.com/u/65878041/Issue.pdf)

我最理想的做法是将图像分成几部分，并根据需要跨越多个页面。就像在这个[LaTeX 解决方案](https://tex.stackexchange.com/questions/22826/breaking-pictures-across-multiple-pages/22836#22836)中完成的一样。有没有可能用 dompdf 做到这一点？或任何其他用于将 HTML 转换为 PDF 的 PHP 库？

我自己研究过了，很明显，如果它比 A4 页面大，我可以切掉一张图片。但是问题在于这种方法需要事先知道页面上是否有文本或类似的东西，所以它不是那么简单。

谢谢大家。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T02:20:18.880

如果您发布 html 和 css，我会更有帮助...记住两件事：

**选项1**

尝试将图像包装在附加的 DIV 中并明确设置宽度和溢出规则。

**选项 #2**

在我是一个大粉丝之前，`dompdf`但在发现之后`wkhtmltopdf`再也没有回头。[`wkhtmltopdf`](http://code.google.com/p/wkhtmltopdf/)是一种出色的工具，可以正确完成工作。要尝试此解决方案，请执行以下操作：

1.  [从项目主页](http://code.google.com/p/wkhtmltopdf/)下载静态二进制文件，它是特定于架构的，所以选择正确的......你可以同时下载；在运行时检测架构并加载适当的二进制文件
2.  将文件放在项目可访问的某个目录中，例如
    `/path/to/my/proj/bin/wkhtmltopdf`
3.  运行您的脚本并生成 html 文档；将其保存到某个 tmp 文件中
    `file_put_contents('/tmp/myfile.html', $html);`
4.  运行转换命令
    `shell_exec('/path/to/my/proj/bin/wkhtmltopdf /tmp/myfile.html /tmp/myfile.pdf')`
5.  获取生成的 pdf 的内容，更改响应标头并服务器文件：
    `header('Content-Type: application/pdf');`

    `echo file_get_contents('/tmp/myfile.pdf');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:23:43.103

我不知道图像是如何显示的，但您可以告诉 dompdf 在某个元素之后或之前拆分页面。例如：

```
<div style='page-break-after:always;'>
    <img src="PATH_TO_IMAGE" />
</div> 
```

# android - Android：css不尊重粗体字体

> ID：13837252
> 
> 赞同：1
> 
> 时间：2012-12-12T10:03:42.033
> 
> 标签：android, css

我正在从服务器获取 html。我希望它具有 Helvetica 字体。我写了一个CSS来做到这一点。

```
_body = "<html><head><style>@font-face {font-family: 'HelveticaNeue_Thin';src: url('file:///android_asset/HelveticaNeue_Thin.ttf');}body {font-family: 'HelveticaNeue_Thin';color:black;text-align:left;font-size:17px;}</style></head><body>" +HTML+ "</body></html>"; 
```

它正在工作，但在我的 css 中不再尊重 html 中的粗体字体。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:11:25.173

要使用粗体，您需要使用粗体字体。我认为您不能合法地使用真正的 Helvetica 的粗体字体或任何字体作为可下载字体（网络字体），因此请考虑尝试找到一种合适的免费字体，该字体存在于您需要的字体粗细中.

# java - JList 设置为 ArrayList，显示预设标题

> ID：13837253
> 
> 赞同：2
> 
> 时间：2012-12-12T10:03:43.727
> 
> 标签：java, swing, jlist

我有一个`JList`设置为`ArrayList`天数的。

```
public void setCalender(ArrayList<Day> calender) {
    this.calender = calender;
    listDays.setListData(this.calender.toArray());
} 
```

每天包含一个日期/ID 和 3 个期间：

```
public class Day {
    private int date;
    private Period p1;
    private Period p2;
    private Period p3;

    public Day(int date) {
        this.date = date;
        p1 = new Period(1);
        p2 = new Period(2);
        p3 = new Period(3);
    }
} 
```

例如，当列表呈现时，它会将每个列表项显示为“kkbs.Day@4d182e1e”。有没有办法制作一个固定的字符串来显示用户（即第 1 天），同时仍将整个对象保留在列表中以进行检索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:06:56.117

为列表使用自定义[单元格渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)以根据需要格式化视图。或者，您可以`toString()`为对象定义 a，但渲染器更加通用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T10:07:53.673

您需要提供[`ListCellRenderer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ListCellRenderer.html)能够以您想要的方式描绘数据的能力

结帐[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)了解更多信息

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T10:09:14.437

覆盖 Day 类中的 toString 方法：

```
@Override
public String toString() {
    return "Day" + date.toString(); 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T10:06:53.080

我想您必须`toString()`在将 jList 扩展到您自己的列表后覆盖方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T10:07:06.477

只需按照以下方式覆盖该`toString()`方法

```
public String toString()
{
    return "whatever string representation of your day class it is you want to return";
} 
```

的默认实现`toString`将返回`objectName@hashCode`。

# fxcop - MSBuild 扩展包 FxCop - 使用规则集开关

> ID：13837254
> 
> 赞同：2
> 
> 时间：2012-12-12T10:03:47.573
> 
> 标签：fxcop, msbuildextensionpack

我正在尝试指定一个规则集而不是规则程序集作为 fxcop msbuild 任务的一部分，但它目前不起作用。文档说它确实支持这一点。

[http://www.msbuildextensionpack.com/help/3.5.11.0/html/a111be65-19a8-05e0-5787-c187c3ee65f2.htm](http://www.msbuildextensionpack.com/help/3.5.11.0/html/a111be65-19a8-05e0-5787-c187c3ee65f2.htm)

所以我已经声明了如下的构建任务......

```
<MSBuild.ExtensionPack.CodeQuality.FxCop
        TaskAction="Analyse"
        Ruleset="C:\FxCop\test.ruleset"
        Files="@(FXCopAssemblies)"
        OutputFile="$(PathCheckout)FXCop\fxcopreport.xml"
        LogToConsole="true"
        DependencyDirectories="@(DependencyDirectories)"/"> 
```

但 msbuild 输出返回以下错误

```
error MSB4064: The "Ruleset" parameter is not supported by the
"MSBuild.ExtensionPack.CodeQuality.FxCop" task. Verify the parameter exists   
on the task, and it is a settable public instance property. 
```

我有第 4 版的 MS Build Extension Pack 4.0，所以它应该已经包含以下 fxcop 任务。

# postgresql - 存储时区的合适数据类型是什么？

> ID：13837258
> 
> 赞同：32
> 
> 时间：2012-12-12T10:04:05.170
> 
> 标签：postgresql, datetime, timezone, sqldatatypes

我正在考虑简单地使用格式为“+hh:mm”（或“-hh:mm”）的字符串。这既必要又充分吗？

注意：我不需要存储日期或时间，只需要存储时区。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-12T11:34:21.067

不幸的是 PostgreSQL 不提供时区数据类型，所以你应该使用`text`.

`interval`乍一看似乎是一个合乎逻辑的选择，它*适用*于某些用途。但是，它没有考虑夏令时，也没有考虑相同UTC偏移量的不同区域具有不同DST规则的事实。

从 UTC 偏移到时区没有 1:1 映射。

例如，`Australia/Sydney`（新南威尔士州）的时区是`UTC+10`( `EST`)，或`UTC+11`( `EDT`) 在夏令时。是的，这`EST`与美国使用的首字母缩写词相同；时区首字母缩写词在 tzdata 数据库中不是唯一的，这就是 Pg 具有该`timezone_abbreviations`设置的原因。更糟糕的是，布里斯班（昆士兰）的经度几乎相同，并且在`UTC+10 EST`……但没有夏令时，所以有时在`-1`新南威尔士州的夏令时期间它与新南威尔士州有偏移。

（*更新*：最近澳大利亚采用了一个`A`前缀，因此它使用`AEST`东部各州 TZ 的首字母缩写词，但`EST`仍然`WST`常用）。

很困惑？

如果您只需要存储一个*UTC 偏移量*，那么 an`interval`是合适的。如果要存储*时区*，请将其存储为`text`. 目前验证并转换为时区偏移是一件痛苦的事，但至少它可以应对 DST。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-06T23:37:00.953

在理想世界中，您可以拥有一组已知时区的外键。您可以使用视图和域做一些与此类似的事情。

David E. Wheleer 的此[wiki 提示](http://postgres.cz/wiki/PostgreSQL_SQL_Tricks_III#Domain_for_time_zone)创建了一个域，该域已测试其作为时区的有效性：

```
CREATE OR REPLACE FUNCTION is_timezone( tz TEXT ) RETURNS BOOLEAN as $$
BEGIN
 PERFORM now() AT TIME ZONE tz;
 RETURN TRUE;
EXCEPTION WHEN invalid_parameter_value THEN
 RETURN FALSE;
END;
$$ language plpgsql STABLE;

CREATE DOMAIN timezone AS CITEXT
CHECK ( is_timezone( value ) ); 
```

拥有一个已知时区列表很有用，在这种情况下，您可以省去域，只需在包含已知时区名称（从视图中获得[`pg_timezone_names`](http://www.postgresql.org/docs/9.2/static/view-pg-timezone-names.html)）的一个表中强制执行约束，避免需要在其他地方公开域：

```
CREATE TABLE tzone
(
  tzone_name text PRIMARY KEY (tzone_name) CHECK (is_timezone(tzone_name))
);

INSERT INTO tzone (tzone_name)
SELECT name FROM pg_timezone_names; 
```

然后您可以通过外键强制执行正确性：

```
CREATE TABLE myTable (
...
tzone TEXT REFERENCES tzone(tzone_name)
); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-12T13:31:46.367

"+hh:mm" 和 "-hh:mm" 不是时区，它们是 UTC 偏移量。将这些保存为带符号整数的一种很好的格式，偏移量以分钟为单位。您也可以使用类似的东西，`interval`但只有在您想直接在 PostgreSQL 中进行日期计算时才会对您有所帮助，例如在查询等中。通常尽管您使用另一种语言进行这些计算，然后它取决于该语言是否支持类型好，`interval`是否有一个好的日期/时间库。但是将整数转换为某种类似的`interval`类型，比如 Python`timedelta`应该是微不足道的，所以我个人会将它存储为整数。

时区有名称，虽然时区没有标准化名称，但“tz”或“zoneinfo”数据库中有一个事实上的标准，即“Europe/Paris”、“Americas/New_York”或“美国/太平洋”。这些应该存储为字符串。

Windows 使用完全不同的名称，例如“浪漫时间”（不要问）。您可以存储它们以及字符串，但我会避免它，这些名称不在 Windows 之外使用，而且这些名称没有意义。此外，Windows 的翻译版本倾向于使用这些时区的翻译名称，这使得情况变得更糟。

像“PDT”和“EST”这样的缩写不能用作时区名称，因为它们不是唯一的。有四个（我认为，或者是五个？）不同的时区都称为“CST”，所以这是不可用的。

**简而言之：对于时区，将名称存储为字符串。对于 UTC 偏移量，将偏移量以分钟为单位存储为有符号整数。**

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-05-27T07:30:37.057

在 postgres 中，您已经可以将任何`TIMESTAMP`或`TIMESTAMPTZ`转换为指定时区或从指定时区转换，因此您无需从表中查找值。您可以直接在检查约束中使用此表达式，因此您也不需要为此创建函数：

```
CREATE TABLE locations (
    location_id SERIAL PRIMARY KEY,
    name TEXT,
    timezone TEXT NOT NULL CHECK (now() AT TIME ZONE timezone IS NOT NULL)
); 
```

如果您尝试插入一个不包含有效时区的值，您将收到一个实际上对用户友好的错误：

```
INSERT INTO locations (name, timezone) VALUES ('foo', 'Adelaide/Australia');
ERROR:  time zone "Adelaide/Australia" not recognized 
```

根据您的要求，您可能*需要*将错误采用正常约束违规为您提供的格式，但在许多情况下这已经足够了。

如果您使用的 Web 框架在下拉框中为您提供了时区列表，那么此验证就足够了，然后您的检查约束只是一个备份。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-12T10:53:56.253

也许是间隔

```
postgres=#选择间隔'01:30';
 间隔
----------
 01:30:00
(1 行)

postgres=#选择间隔'-01:30';
 间隔  
------------
 -01:30:00
(1 行)

```

# alfresco - 露天如何通过javascript获取类别名称

> ID：13837262
> 
> 赞同：0
> 
> 时间：2012-12-12T10:04:25.383
> 
> 标签：alfresco

首先，我可以通过 js 获取所有子类别，但我只能获取类别名称等`English`。我想获取js 中的类别名称。`/categories/General/Languages/English/American English`知道吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:06:09.467

只需使用路径并将 cm: 和*x0020*替换为适当的字符即可。

类别只是一个节点，因此在获取路径时，您将获得以下信息：

```
/cm:categoryRoot/cm:generalclassifiable/cm:Languages/cm:English/cm:American_x0020_English 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:43:48.227

通过我的实验，我发现了一个更好的主意，`categoryNode.displayPath`可以`/categories/General/Software Document Classification/Development Plans`直接取名字。谢谢！

# regex - 正则表达式 - 匹配 '?' 之后的字符串 并以“#”结尾

> ID：13837264
> 
> 赞同：0
> 
> 时间：2012-12-12T10:04:29.803
> 
> 标签：regex

我想写一个正则表达式，它应该匹配'？'之后的字符串 并以“#”结尾。

简单输入： somegarbage?Hello,world#garbage

简单输出：Hello,world#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:12:59.063

```
(?<=\?).*# 
```

`(?<=\?)`表示以 a 开头`?`但不包括它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:12:01.520

根据当前给出的信息，以下应该可以工作

```
.*\?(.*#).* 
```

该组包含有问题的值

# mongodb - Can Delayed Secondaries in MongoDB ever win an Election and become Primary?

> ID：13837267
> 
> 赞同：1
> 
> 时间：2012-12-12T10:04:34.507
> 
> 标签：mongodb, database-replication

在 MongoDB 副本集中，我们可以在辅助节点上强制设置一定的延迟。我无法理解的是，即使这些节点（延迟节点）参与了选举，他们还能成为 Primary 吗？如果他们可以，那么他们的延迟偏好会发生什么，它会自动发出警告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:30:58.347

它们可以成为主要的，因此它们的优先级应为 0 并设置为隐藏以防止它们成为主要的。

> 延迟成员必须将优先级设置为 0，以防止它们成为其副本集中的主要成员。此外，这些成员应该被隐藏，以防止您的应用程序看到或查询该成员。

来源：[延迟成员](http://docs.mongodb.org/manual/administration/replica-sets/#replica-set-delayed-members)。

[您可以在此链接](http://docs.mongodb.org/manual/core/replication-internals/#replica-set-election-internals)中找到有关选举内部机制的更多详细信息。

# jquery - 如何用 JQuery 包装 ul 列表中的未知单词？

> ID：13837272
> 
> 赞同：2
> 
> 时间：2012-12-12T10:04:47.660
> 
> 标签：jquery, html-lists, html

我有这个清单

```
<ul>
  <li>Unknown word: Text here</li>
</ul> 
```

我怎样才能做到`<li><span>Unknown word</span>: Text here</li>`？我只想以`<li>`a开头`<span>`并`</span>`在“ **:** ”字符之前放置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:09:19.353

```
$('li').html(function(i, h){
    var s = h.split(':');
    return '<span>' + s[0] + '</span>:' + s[1]
}) 
```

[http://jsfiddle.net/CvB8J/](http://jsfiddle.net/CvB8J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:12:04.603

你可以这样做：

```
var arr = $('#theli').text().split(':');
$('#theli').html( $('<span>'+arr[0]+'</span>') ).append(':'+arr[1]); 
```

请参阅工作[**演示**](http://jsfiddle.net/DQqnp/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:13:14.403

```
$("ul li").each(function() {
 var text = $(this).text().split(":")[0];
 var textNew = "<span>" + text + "</span>";
 $(this).html($(this).text().replace(text, textNew));
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T10:16:12.693

```
var a = $('li').text().split(':');
$('li').html("<span>" + a[0] + "</span>:" + a[1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T13:03:06.777

对于那些喜欢正则表达式的人..

```
$('li').html($('li').text().replace(/^([^:]*)(.*)/ig, '<span>$1</span>$2')); 
```

[http://jsfiddle.net/ygE4C/1/](http://jsfiddle.net/ygE4C/1/)

# php - 如何显示特定帖子的元值

> ID：13837273
> 
> 赞同：2
> 
> 时间：2012-12-12T10:04:50.797
> 
> 标签：php, wordpress

我试过这段代码：

```
<select name="productSize" id="productSize">
    <?php
        $metakey = 'size';
        $sizes = $wpdb->get_col($wpdb->prepare("SELECT meta_value FROM $wpdb->postmeta WHERE meta_key = %s ORDER BY meta_value ASC", $metakey) );
        if ($sizes) {
            foreach ($sizes as $size) {
                echo "<option value=\"" . $size . "\">" . $size . "</option>";
            }
        }
    ?>
</select> 
```

但它显示了所有帖子中带有“大小”键的所有值。我只想显示与每个帖子相关联的值。怎么做？

谢谢你，非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:49:45.260

如果需要，更改 $post->ID，但默认情况下它将加载当前加载的帖子 ID。

```
<select name="productSize" id="productSize">
    <?php
        global $post;
        $metakey = 'size';
        $sizes = get_post_meta($post->ID, $metakey, false);
        if (count($sizes) != 0) {
            foreach ($sizes as $size) {
            echo "<option value=\"" . $size . "\">" . $size . "</option>";
            }
        }
    ?>
</select> 
```

# string-comparison - 如何简单地检查两个词的接近度？

> ID：13837275
> 
> 赞同：4
> 
> 时间：2012-12-12T10:04:59.863
> 
> 标签：string-comparison, java

我想检查两个词是否*非常接近*。我的需求非常简单：我们允许用户通过回复电子邮件来执行操作，并且用户应该用一个单词（`APPROVED`、`REFUSED`等）来回答。可能的行动清单真的很短。现在，我必须解析这个答案，但我的比较必须是“*错字安全*”，即如果用户输入是`aproved`或`apporved`例如，它应该没问题。

当然，我可以创建自己*几乎没问题的*单词 ( `["Approved", "Aproved", "Apporved", ...]`) 并将用户输入与该数组的每个元素进行比较，但是定义所有可能的拼写错误真的很无聊……

我知道我可以使用 Lucene 来做到这一点，但对于我的需求来说似乎有点太多了，理想情况下我希望有一个类似`WordUtils.proximity("Approved", userInput)`. 此外，就我而言，语音比较不是强制性的。

有没有小型图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:08:48.463

您可以使用琴弦的[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)来指示它们的距离。

我想还有更多的字符串距离算法，但我以前用过这个，它对我有用。

这是一个您可以尝试的实现[算法实现/字符串/Levenshtein distance](http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance#Java)

此外，您可以使用来自[Apache Commons-Lang 的](http://commons.apache.org/lang)[StringUtils#getLevenshteinDistance()](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#getLevenshteinDistance%28java.lang.CharSequence,%20java.lang.CharSequence%29)

# c# - C#如何提取字符串的一部分

> ID：13837276
> 
> 赞同：1
> 
> 时间：2012-12-12T10:04:59.743
> 
> 标签：c#

如何从字符串中提取字符之间用“-”分隔的部分？例如，我想从“123-4567-9012”中提取“123”或从“123-4567-9012”中提取“4567”，甚至从同一字符串中提取9012

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T10:06:25.490

只需拆分`-`角色，稍后您就可以访问它们。使用[string.Split(char[])](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

```
string str  = "123-4567-9012";
string[] arr = str.Split('-'); 
```

这将导致：

```
arr[0] = "123";
arr[1] = "4567";
arr[2] = "9012" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T10:09:39.400

如果您只需要第一次出现，可能会更有效：

```
var str = "123-4567-9012";
var substr = str.Substring(0, str.IndexOf('-')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T10:12:42.100

如果您使用 String.Split，您可以根据分隔符将字符串分成单独的部分。例如，使用：

```
var input = "123-4567-9012";
var parts = input.Split('-');
foreach(var part in parts)
  Console.WriteLine(part); 
```

将输出：

```
123
4567
9012 
```

例如，您可以使用 String.Join- 做相反的事情。

```
var result = String.Join("-", parts);
Console.WriteLine(result); 
```

将输出：

```
123-4567-9012 
```

# hibernate - JPA：NamedQuery 中的时间戳比较：时间数据丢失

> ID：13837277
> 
> 赞同：5
> 
> 时间：2012-12-12T10:05:05.260
> 
> 标签：hibernate, jpa, oracle10g

我有一列注定要保存一个时间戳，该时间戳使用 java.util.Date 数据类型定义并存储在数据库中的 Oracle DATE 类型中。我已经验证了完整的日期和时间信息是否已保存并从数据库中正确检索，但是当我尝试在 NamedQuery 中对其进行比较时，时间信息似乎没有在比较中考虑在内。

该列定义如下（analyzeDate 的类型为 java.util.Date）：

```
@Basic(optional = false)
@Column(name = "ANALYZE_DATE")
@Temporal(TemporalType.TIMESTAMP)
private Date analyzeDate; 
```

还有我的命名查询：

```
@NamedQuery(name = "BOADocument.findByBeforeAnalyzeDate", 
    query = "SELECT b FROM BOADocument b WHERE b.companyId = :companyId AND b.analyzeDate < :analyzeDate") 
```

然后我执行它，传递 java.util.Date 类型的analyzeDate：

```
List<BOADocument> docs = em.createNamedQuery("BOADocument.findByBeforeAnalyzeDate") 
            .setParameter("companyId", clientRecord)
            .setParameter("analyzeDate", analyzeDate, TemporalType.TIMESTAMP)
            .getResultList() 
```

我得到了 Document 表中所有行的列表，尽管它们的 analyzeDate 值与我设置为 NamedQuery 的参数的值完全相同。

如果我反转比较，我没有得到任何线条，进一步说服我时间戳的时间部分在 b.analyzeDate 方面丢失，而不是 :analyzeDate 方面。

我将 JPA 1.0 与 Hibernate 3.5 一起使用。

这让我很难过，我几乎要放弃并使用本机查询，但这感觉就像在作弊！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:19:37.540

事实证明，底层的 Oracle 类型必须是 TIMESTAMP。

DATE 保存小时、分钟和秒信息。这对我的目的来说已经足够精确了，所以我打算使用它而不是 TIMESTAMP，它也保存毫秒。正如我之前提到的，从 DATE 到 DATE 的小时、分钟和秒信息的存储和检索工作正常，但不能在命名查询中基于时间数据进行比较。

我更改了数据库列类型，瞧，之前编写的代码有效。当然，我也节省了毫秒数，但这不会在我的代码中产生任何副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:30:39.047

修改查询如下

从 BOADocument b 中选择 b，其中 b.companyId = :companyId AND CAST(b.analyzeDate AS TIMESTAMP) < :analyzeDate"。

# mysql - phpmyadmin 导出错误 2006

> ID：13837281
> 
> 赞同：0
> 
> 时间：2012-12-12T10:05:20.207
> 
> 标签：mysql, phpmyadmin, mysql-error-2006

我们一直在使用 phpmyadmin 导出工具备份我们的网站。昨晚我们不得不从备份中恢复数据库，我们意识到大约前 40 个表已完全备份，但其余 20 个表报告为 0 行，经过调查，我们发现 phpmyadmin 导出功能打印了 #2006，MySQL 有导出转储中的所有这些表都消失了。由于创建了巨大的转储，我们永远不会注意到这一点。这非常令人沮丧和烦人，我们不得不依赖托管服务提供商的备份解决方案。

现在我的问题是，这是 phpmyadmin 的默认行为吗？导出不锁定表的 mysql 转储是否有任何可靠的解决方案？

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:57:41.587

解决方案在于编辑 MySQL 的`my.ini`文件。

在您的服务器中查找`my.ini`文件，然后在该文件中搜索`max_allowed_packet`并增加其值。在 WAMP 和 XAMPP 中，默认值为`1M, change it to 10M`.

它`my.ini`看起来像这样

```
# The MySQL server
[mysqld]
port        = 3306
socket      = /tmp/mysql.sock
skip-locking
key_buffer = 16M
max_allowed_packet = 1M
table_cache = 64 
```

保存 ini 文件并重新启动服务器。

# html - 如何获得比 span1 更窄的 Bootstrap 网格跨度？

> ID：13837287
> 
> 赞同：1
> 
> 时间：2012-12-12T10:05:30.930
> 
> 标签：html, css, twitter-bootstrap, grid

我有一个五列网格。我最初是这样设置它们的：

```
<div class="row">
    <div class="span1">...</div>
    <div class="span3">...</div>
    <div class="span1">...</div>
    <div class="span4">...</div>
    <div class="span1">...</div>
</div> 
```

第一列包含两个图标中的一个，两个图标的宽度相同：18px。然而，span1 解析为 60px，因此浪费了很多空间。

如何声明一个 18px 的列？

这只会影响我的应用程序的一页，因此自定义整个 Bootstrap CSS 是不够的，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:24:56.937

您可以添加自己的类：

```
...
.myspan {
    width:18px;
    margin-right:52px;
}
... 
```

然后将类添加到您的标签中：

```
<div class="row">
    <div class="myspan">...</div>
    <div class="span3">...</div>
    <div class="span1">...</div>
    <div class="span4">...</div>
    <div class="span1">...</div>
</div> 
```

甚至使用内联 css（但它不太干净）

```
<div class="row">
    <div class="span1" style="width:18px;margin-right:52px">...</div>
    <div class="span3">...</div>
    <div class="span1">...</div>
    <div class="span4">...</div>
    <div class="span1">...</div>
</div> 
```

每个包含“span”的类都将获得`margin-left`30px 并设置为，`float:left`因此您只需要指定 margin-right 和 width 属性。

这是因为`[class*="span"]`选择器在`bootstrap.css`

In this example, I set a margin-right of 52px to keep the grid system, but you can change it to 10px if you don't want wasted space.

# java - ClassNotFoundException，即使包含 JAR 是构建的一部分

> ID：13837293
> 
> 赞同：4
> 
> 时间：2012-12-12T10:05:56.060
> 
> 标签：java, android, eclipse, apache-poi

我正在获得一个包含在我的构建中的 JAR 中`ClassNotFoundException`的类 ( )。`HSSFWorkbook`JAR 列在此列表中（我使用的是 Eclipse）：

```
Project -> Properties -> Java Build Path -> Libraries 
```

我尝试删除并再次添加它，但无济于事。

我的代码如下：

```
// ...
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
// ...

public class XLSWorkbook {
    private HSSFWorkbook wb = null;

    // ...
    public XLSWorkbook() {
        wb = new HSSFWorkbook();
    }
} 
```

当我尝试实例化`XLSWorkbook`类时抛出异常。我使用的 JAR 是来自 Apache 的[POI 库](http://poi.apache.org/)（准确地说是：poi-3.8-20120326.jar）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T10:09:15.123

由于`ADT-18`（我不确定版本），`external jar libraries` 因此不必明确包含在内。你应该把它放在`libs`文件夹里面。ADT 将提供为您导入它们。所以你应该从`Project -> Properties -> Java Build Path -> Libraries`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:09:40.793

找不到什么类？看起来你正在为 Android 开发。这意味着运行时的类路径与构建时的类路径不同。您可以在编译时将所有 jar 放在适当的位置，而在运行时这可能会出错。

# jquery - JqueryUi 滑块在 iframe 中不起作用

> ID：13837297
> 
> 赞同：2
> 
> 时间：2012-12-12T10:06:16.770
> 
> 标签：jquery, jquery-ui

我有 iframe：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<link rel="stylesheet" type="text/css" href="jquery-ui-1.9.2.custom.css">
<div id="slider"></div>
</body>
</html> 
```

我有页面：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script src="jquery-ui-1.9.2.custom.js"></script>
<title></title>
</head>
<body>
<iframe id="frame" src="iframe.html" width="800" ></iframe>
<script type="text/javascript">
$(document).ready(function() {
    $('#frame').contents().find('#slider').slider({
        value:2,
        min: 0,
        max: 6,
        step: 1,
        animate: true,
        slide: function( event, ui ) {
        }
    });
});
</script>
</body>
</html> 
```

我只想要 iframe 中的自定义滑块，但这不起作用，我不知道为什么。这项工作在没有 iframe 的情况下完美。

更新：通过调用从 iframe 创建滑块的函数来修复问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T22:54:42.250

iframe 是一个单独的 html 页面（不同的文档），由于安全原因，无法访问父级的脚本等。

您需要在 iframe html 文档中包含 jQuery 和 jQuery UI，并在该文档中运行该函数。

这是一个全面的原因：http: [//javascript.info/tutorial/same-origin-security-policy](http://javascript.info/tutorial/same-origin-security-policy)

# jquery - jQuery UI 非 ajax 选项卡将整个网站加载到自身中？

> ID：13837304
> 
> 赞同：21
> 
> 时间：2012-12-12T10:06:34.830
> 
> 标签：jquery, jquery-ui, jquery-tabs

jQuery Tabs 有一个大问题。

我试图在我的网站产品页面上加载标签...当页面加载时，我看到标签内容一秒钟（标准 html 标签不是 ajax）然后突然我的整个网站加载到标签内。

我正在使用 jquery ui 选项卡演示页面中的标准代码。

```
<div id="productTabs">
    <ul>
        <li><a href="#tabDescription">Description</a></li>
        <li><a href="#tabSpecs">Specifications</a></li>
        <li><a href="#tabReviews">Reviews</a></li>
        <li><a href="#tabDownloads">Downloads</a></li>
    </ul>
    <div id="tabDescription">test</div>
    <div id="tabSpecs">test</div>
    <div id="tabReviews">test</div>
    <div id="tabDownloads">Sorry, no downloads available for this product.</div>
</div>
<script type="text/javascript">jQuery(document).ready(function(){jQuery("#productTabs").tabs();});</script> 
```

但是，我在网站周围有很多其他的 javascript，只是想知道是否有人以前看过这个。

非常感谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-31T15:51:25.057

你是对的，它是 BASE 元标记。这是您在使用最新版本的 jQuery UI (1.9) 时会遇到的问题，它适用于 1.8。Tabs API 进行了很多更改，但在您检查 jQuery 源代码之前，似乎没有什么会导致此问题。

1.  BASE 元标记指示浏览器将选项卡中的 href 属性（您用作选项卡内容的参考）从 hash+id 转换为完整的 URL（使用您的 BASE 标记值）。这是预期的行为。
2.  以前版本的选项卡 UI 会努力猜测 href 是否真的是远程的，拆分 href 选项卡值，然后将其与当前 URL**和**BASE 标记进行比较，然后确定它是否真的是本地的。
3.  最新版本的 jQuery 不检查 BASE 标记值。
4.  因此，最新版本与 BASE 元标记一起使用时，将尝试使用 Ajax 加载选项卡内容，重新加载自身（或 BASE URL 中的任何内容）。

这是 1.8.24 版本中使用的 jQuery UI 选项卡：

```
 this.anchors.each(function( i, a ) {
      var href = $( a ).attr( "href" );
      // For dynamically created HTML that contains a hash as href IE < 8 expands
      // such href to the full page url with hash and then misinterprets tab as ajax.
      // Same consideration applies for an added tab with a fragment identifier
      // since a[href=#fragment-identifier] does unexpectedly not match.
      // Thus normalize href attribute...
      var hrefBase = href.split( "#" )[ 0 ],
        baseEl;
      if ( hrefBase && ( hrefBase === location.toString().split( "#" )[ 0 ] ||
          ( baseEl = $( "base" )[ 0 ]) && hrefBase === baseEl.href ) ) {
        href = a.hash;
        a.href = href;
      } 
```

这是 jQuery UI Tabs 在 1.9.2 版本中使用的：

```
 function isLocal( anchor ) {
      return anchor.hash.length > 1 &&
        anchor.href.replace( rhash, "" ) ===
          location.href.replace( rhash, "" )
            // support: Safari 5.1
            // Safari 5.1 doesn't encode spaces in window.location
            // but it does encode spaces from anchors (#8777)
            .replace( /\s/g, "%20" );
     } 
```

由于 Tabs 代码的大量重写，代码的组织方式有所不同，但您可以理解（*$( "base" )[ 0 ]*是 BASE 元标记值）。

到目前为止，我还没有找到任何方法来使用普通的选项卡 API 告诉选项卡“这是本地的，不要使用 Ajax”。我可以为您提供的是我在此期间为快速修复它所做的事情（当我询问、重新检查并可能填写错误报告时）：一个 hack。

```
 function isLocal( anchor ) {
      return anchor.hash.length > 1 &&
        ( (anchor.href.replace( rhash, "" ) === location.href.replace( rhash, "" ).replace( /\s/g, "%20" )) ||
          (anchor.href.replace( rhash, "" ) === $( "base" )[ 0 ].href));
    } 
```

这是较新的版本加上在以前版本中完成的检查。

在最新 jQuery UI 的非缩小副本中，用它替换 isLocal 函数。然后缩小文件。替换原来的版本。测试。

它在 Firefox (17.0.1) 和 Chromium (18.0.1025.168) 中对我有用。

缺点是您不能使用第三方副本（来自 CDN）。对我来说这不是问题，因为我的大多数应用程序都在 Intranet 中使用。

如果有人找到更好的解决方案或知道如何在不破解 jQuery UI 代码的情况下做到这一点，请告诉我们。

更新：我发现了这个错误报告（有几个重复）：[http](http://bugs.jqueryui.com/ticket/7822) ://bugs.jqueryui.com/ticket/7822 我很想添加我自己的评论，但似乎 jQuery 开发人员不会“修复”他们认为问题出在其他地方。来自 bugtracker 的引用：

> 我不明白这是如何修复的...
> 
> 这是简单的动态 PHP 实现： 'http://' 。$_SERVER['HTTP_HOST'] 。$_SERVER['REQUEST_URI'] 。'#foo'。
> 
> 在 JavaScript 中修复此问题也相当简单，但我不会提供示例代码，因为这是修复此问题的错误位置，应该强烈建议不要这样做。链接的行为在所有浏览器中都有明确的定义和一致的。绝对没有理由人们应该使用不正确的 URL，然后在 JavaScript 中绕过它们。
> 
> 最后，重要的是要注意“修复”这将意味着破坏每个正确使用的人的正确行为。请记住，这是已修复的，因为具有正确 URL 的人遇到了旧代码中存在的真正错误。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-19T17:25:25.960

这是一个简单的解决方法，适用于您的 .js，因此您可以为 jquery.ui 使用第三方副本。
使用 Jquery UI 1.10.2 测试。
解决基本元标记问题以及可选尾随斜杠 n url 的问题。

```
$("#mytabs UL LI A").each(function() {
    $(this).attr("href", location.href.toString()+$(this).attr("href"));
});
$("#mytabs").tabs(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-29T21:34:56.250

正如@MV 提到的，问题在于 jquery 混淆了我网页顶部的基本标记。因此，我没有编辑 jQuery ui 文件女巫不在我的选项中，而是像这样使用 jQuery 删除了基本标记

```
<script>
    jQuery(function() {
        jQuery('base').remove();
        jQuery( "#tabs" ).tabs();                   
    });
</script> 
```

这似乎对我有用，因为我不介意为了该特定页面上的标签控制而临时删除基本标签。但是我也在考虑一种解决方案，以防万一需要这些定义，例如将这些基本标签收集到一个数组中，删除它们，然后在执行 tabs() 方法后，再次添加它们，这看起来有点 st..id 但应该可以工作tabs() 没有实现任何监听器模式。我还没有尝试过，我还不会。无论如何，看起来 jQuery ui 确实有一个错误！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-16T23:55:36.643

当归的答案对我有用。我在 requirejs 文件中将它用于任何将“选项卡”类作为选项卡选择器的页面。

```
jQuery(".tabs ul li a").each(function() {
    jQuery(this).attr("href", location.href.toString()+jQuery(this).attr("href"));
});
jQuery(".tabs").tabs(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T08:18:54.150

我的结论

```
var base=$('base').clone(true);

$("#selector").dialog({
    open: function( event, ui ) {
        $('base').remove(); //Delete the Basepath to solve the Problem by loading Content
        $('#tabs').tabs();//Create the Tabs   
    }
    close: function( event, ui ) {base.insertAfter("head");
}); 
```

也许看看这个，删除基本路径会很有帮助，而不是创建你的 tabs()，当你的 tabs 工作完成后，你必须追加到 head

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-14T11:18:49.023

弄乱`base`属性只是为了使标签工作。太多了

另一个hacky解决方法：

```
element.tabs({
  create: function(event, ui){
    var tabsData = $(event.target).data('ui-tabs');
    tabsData.anchors.each(function(idx, anchor){
      var contentId = $(anchor).attr('href');
      var $panel = $(tabsData.panels[idx]);
      $panel.html($(contentId).remove().html());
    });
  },
  beforeLoad: function(event, ui){
    event.preventDefault();
  }
});
```

用`jQuery UI - v1.11.1`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-16T19:26:43.413

我绝不是 JS 程序员，更多的是 Windows 上的 C++/C#，在帮助一位亲戚在 Joomla 上的网站上遇到了类似的问题，但由于**MV**链接到错误项目，解决方案很简单。底线-您不能使用“本地” href= ，所以..不要使用它们，例如对于 服务器**[http://www.example.com](http://www.example.com)****上的页面mypage.html** ，代码而不是原始代码：

```
<div id="productTabs">
    <ul>
        <li><a href="#tabDescription">Description</a></li>
        <li><a href="#tabSpecs">Specifications</a></li>
        <li><a href="#tabReviews">Reviews</a></li>
        <li><a href="#tabDownloads">Downloads</a></li>
    </ul>
    <div id="tabDescription">test</div>
    <div id="tabSpecs">test</div>
    <div id="tabReviews">test</div>
    <div id="tabDownloads">Sorry, no downloads available for this product.</div>
</div> 
```

你应该使用：

```
<div id="productTabs">
    <ul>
        <li><a href="http://www.example.com/mypage.html#tabDescription">Description</a></li>
        <li><a href="http://www.example.com/mypage.html#tabSpecs">Specifications</a></li>
        <li><a href="http://www.example.com/mypage.html#tabReviews">Reviews</a></li>
        <li><a href="http://www.example.com/mypage.html#tabDownloads">Downloads</a></li>
    </ul>
    <div id="tabDescription">test</div>
    <div id="tabSpecs">test</div>
    <div id="tabReviews">test</div>
    <div id="tabDownloads">Sorry, no downloads available for this product.</div>
</div> 
```

一切都会正常工作。当然，如果您使用一些代码生成，例如 Joomla 中的 PHP，则将 example() `echo JUri::getInstance() . '#tab<Name>'`放入代码生成中会变得更加容易

# php - php中默认打开下拉菜单

> ID：13837316
> 
> 赞同：0
> 
> 时间：2012-12-12T10:07:35.000
> 
> 标签：php

我有一个关闭的下拉框的脚本，直到用户单击向下箭头，显示选项。我想要它，以便从一开始就显示所有选项，因此他们不必选择向下箭头。有谁知道我需要改变什么才能实现这一目标？我在 .toggleClass 上尝试了“打开”“打开”，但这似乎并没有改变任何东西。

```
 <script type="text/javascript">
// <![CDATA[
// toggles the refine search field values
jQuery(document).ready(function($) {
    $('div.handle').click(function() {
        $(this).next('div.element').animate({
            height: ['toggle', 'swing'],
            opacity: 'toggle' }, 200
        );

        $(this).toggleClass('close', 'open');
        return false;
    });
    <?php foreach ( $_GET as $field => $val ) : ?>
    $('.<?php echo esc_js($field); ?> div.handle').toggleClass('close', 'open');
    $('.<?php echo esc_js($field); ?> div.element').show();
    <?php endforeach; ?>

});
// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:50:29.527

`multiple`在选择框中使用属性，如下所示：

```
<select name="xxx" multiple>
    <option value="1">value 1</option>
    <option value="2">value 2</option>
    <option value="3">value 3</option>
</select> 
```

这是一个[演示](http://jsfiddle.net/EnzA4/)，看看它是如何出现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:24:12.817

要在不使用下拉框的情况下显示所有项目，您可以使用 HTML 元素`<select size="3">`属性。

您能否向我们展示用于在页面上显示您的选择框的所有代码，以便我们建议如何执行此操作？我猜你正在使用某种框架。

```
<select size="3">
    <option>A</option>
    <option>B</option>
    <option>C</option>
</select> 
```

用户将看到所有选项都出现在一个垂直框中。它们可以`Ctrl`用来选择多个选项，在这种情况下，您需要附加`[]`到`select`元素的`name`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:18:58.480

PHP 不会这样做，您可以使用 Javascript 来玩表单的交互。

在 javascript 上使用 focus() 函数，下拉菜单应该自动聚焦。

```
<!-- Your form -->
<form>
<select id="mySelect">
  <option>...</option>
</select>
</form>

<!-- Your Javascript -->
<script type="text/javascript">
document.getElementById('mySelect').focus();
</script> 
```

# keyboard - Sublime Text (PC) - 键盘快捷键

> ID：13837317
> 
> 赞同：0
> 
> 时间：2012-12-12T10:07:35.563
> 
> 标签：keyboard, sublimetext2, shortcut

我是 Sublime Text 的新手。

如何选择文本文件中的所有匹配项？我是个人电脑用户。我知道通过`Ctrl`+`D`你可以选择下一个出现，并且通过多次点击`Ctrl`+你可以选择更多。`D`但是如何一次选择所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:17:58.417

要将光标置于 Windows 上的所有位置，请按`Alt`+`F3`或在 Mac 上按`Ctrl`+ `Cmd`+ `G`。

这是一个很好的 Sublime 功能集合：http: [//net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-tips-and-tricks/](http://net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-tips-and-tricks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T00:04:36.860

首先选择术语，然后按 ctrl+f，最后按按钮（查找全部）右侧的

# entity-framework - Entity Framework 4.1 类型和表拆分

> ID：13837322
> 
> 赞同：1
> 
> 时间：2012-12-12T10:07:54.320
> 
> 标签：entity-framework, mapping, code-first

我的数据库中有以下表结构：

**适应症**

*   ID
*   类型
*   实例名称
*   字符串值
*   整数值

我有这个班级结构

```
abstract class Indication  
{
    public int Id { get; set; }  
    public int Type { get; set; }
    public string InstanceName { get; set; }
}

class StringIndication : Indication  
{
    public string Value { get; set;}
}

class IntIndication : Indication  
{
    public intValue { get; set;}
} 
```

我想将我的表映射到这个结构取决于 Type 属性。所以，这很容易：

```
modelBuilder.Entity<Indication>()
    .Map<IntIndication>(m => m.Requires("Type").HasValue(1))
    .Map<StringIndication>(m => m.Requires("Type").HasValue(2));
modelBuilder.Entity<IntIndication>().Property(c => c.Value).HasColumnName("IntValue");
modelBuilder.Entity<StringIndication>().Property(c => c.Value).HasColumnName("StringValue"); 
```

它工作得很好，但现在我想做一件事。我想拥有 InstanceName 的字典。所以，我创建另一个表

**实例**

*   ID
*   姓名

，将指示表中的InstanceName更改为InstanceId。

但我不想要像这样的查找属性

```
public Instance Instance {get;set;} 
```

在我的适应症表中。相反，我想保留

```
 public string InstanceName { get; set; } 
```

并添加额外的

```
 public id InstanceId { get; set; } 
```

那么，我应该如何更改我的映射来完成这项工作？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T20:27:36.690

我相信这会有你的答案：

[http://msdn.microsoft.com/en-us/data/jj715646.aspx](http://msdn.microsoft.com/en-us/data/jj715646.aspx) 它涵盖了 EF 设计器 - 将实体映射到多个表（实体拆分）

# php - Wordpress 3.5：无法重新声明 wp_explain_nonce()

> ID：13837324
> 
> 赞同：1
> 
> 时间：2012-12-12T10:07:58.027
> 
> 标签：php, wordpress

升级到 Wordpress 3.5 后，我遇到了这个致命错误：

> 无法在第 3176 行的 /wp-includes/deprecated.php 中重新声明**wp_explain_nonce()**（之前在 wp-includes/functions.php:1858 中声明）

这是此版本不推荐使用的函数[wp_explain_nonce() 。](http://codex.wordpress.org/Function_Reference/wp_explain_nonce)

我能做些什么来解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:23:24.837

这通常发生在更新以某种方式中断或损坏时。以下是修复它的方法（通常）：

使用 FTP 客户端访问您的服务器并删除目录`/wp-admin`和`/wp-includes`目录中的所有文件 where`wp-admin`和`wp-includes`were，除了`wp-config.php`您可能在其中拥有的任何其他自定义文件。

然后手动上传所有文件 - 从[这里](http://wordpress.org/wordpress-3.5-no-content.zip)下载最新的 WP 版本，将其解压缩到您的计算机并将所有文件上传到您的服务器。

如果您不想删除旧文件（这总是一个好主意），只需创建一个虚拟目录，例如`/~backup`并将所有文件和目录移动到那里（`/wp-content/`目录和`/wp-config.php`文件除外）。

# drupal - 将密码加密算法添加到 drupal

> ID：13837331
> 
> 赞同：0
> 
> 时间：2012-12-12T10:08:09.777
> 
> 标签：drupal, password-encryption

我想将我当前的站点转移到drupal。为此，我必须对 drupal 进行一些更改。首先，我在drupal 的用户表中添加了一些列（我不知道这是否会损害drupal）。现在我想在 password.inc 文件中更改 drupal 的 _password_crypt 函数，因为我的用户密码是由 Mysql 的 PASSWORD() 函数加密的。我的问题是，我应该编辑 _password_crypt 函数还是有办法将我的新密码函数实现为插件并告诉 drupal 使用它，因为我不想更改 Drupal 核心。如果我更改 Drupal 的默认 _password_crypt 功能，我将在该功能中遇到什么问题。例如，我可以毫无问题地更新 Drupal 吗？

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:02:52.230

您不应该将列添加到 Drupal 的用户表中。Drupal 中的主要指令是不要直接干扰您不拥有的表。此类任意更改可能会在更新时产生问题。

如果要向用户实体添加字段，可以通过`Configuration » Account Settings » Manage Fields`.

你不应该破解 _password_crypt 函数。如果您想使用外部（Drupal 核心）表来存储密码和验证用户的方法，有一个很好的教程告诉您如何在[api.drupal.org上执行此操作](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_external_login_register/7)

# ajax - yii中的Ajax按钮发布

> ID：13837333
> 
> 赞同：4
> 
> 时间：2012-12-12T10:08:11.337
> 
> 标签：ajax, yii

谁能举例说明如何使用`CHtml::ajaxbutton`Yii 来发布没有表单的元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T10:49:04.757

快速示例

```
<?php
echo CHtml::ajaxSubmitButton('ButtonName',Yii::app()->createUrl('advert/LoadAdvertFromSay'),
                    array(
                        'type'=>'POST',
                        'data'=> 'js:{"data1": val1, "data2": val2 }',                        
                        'success'=>'js:function(string){ alert(string); }'           
                    ),array('class'=>'someCssClass',));
?> 
```

**[ajaxSubmitButton()](http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxSubmitButton-detail)**

你需要一个`data`参数里面`ajaxoptions`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T23:12:43.600

要传递数据，您需要将其添加到您的 ajax 数组中，例如：

```
<?php
echo CHtml::ajaxSubmitButton('ButtonName',Yii::app()->createUrl('advert/LoadAdvertFromSay'),
                    array(
                        'type'=>'POST',
                        'data'=> 'js:$("#dataContainer").serialize()',
                        'success'=>'js:function(string){ alert(string); }'           
                    ),array('class'=>'someCssClass',));
?> 
```

在这种情况下，带有 id 的元素中的所有输入类型元素都`dataContainer`将被提交，并且可以通过 $_POST 访问。

显然，JS 可能更复杂，你可以从某些元素中获取值，并构建你自己的对象，例如：

```
'data' => 'js:{"field1": $("#input1").val(), "pageTitle": $("title").text() }' 
```

然后，在您的控制器中，您可以访问`$_POST["field1"]`and `$_POST["pageTitle"]`，尽管我通常倾向于通过[CHttpRequest::getParam()](http://www.yiiframework.com/doc/api/1.1/CHttpRequest#getParam-detail)访问项目，因为那时我可以获得 POST 或 GET 值，例如`CHttpRequest::getParam('field1')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T15:31:29.440

[Yii ajax 按钮的](http://www.codexamples.com/88/chtml-ajaxbutton/)更多示例

```
echo CHtml::ajaxButton(
    $label = 'Click me', 
    $url = '/', 
    $ajaxOptions=array (
        'type'=>'POST',
        'dataType'=>'json',
        'success'=>'function(html){ jQuery("#your_id").html(html); }'
        ), 
    $htmlOptions=array ()
    );

//Output
<a href="#" id="yt0">Click me</a>

<script type="text/script">
    jQuery('body').on('click', '#yt0', function () {
        jQuery.ajax({
            'type': 'POST',
            'dataType': 'json',
            'success': function (html) {
                jQuery("#your_id").html(html);
            },
            'url': '/',
            'cache': false,
            'data': jQuery(this).parents("form").serialize()
        });
        return false;
    });
    });
</script> 
```

# c# - 录制语音直到用户停止说话？

> ID：13837336
> 
> 赞同：1
> 
> 时间：2012-12-12T10:08:24.250
> 
> 标签：c#, audio, speech-recognition, windows-phone

我正在尝试为 Windows Phone 提供基于命令的服务。我不希望为此使用 Windows Phone 8 中的内置语音功能，因为它也需要与 Windows Phone 7 兼容。此外，我现在不想使用任何外部库。

我希望能够记录用户的声音，直到他停止说话。但是我怎么能检测到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:26:13.187

WP7 没有简单或内置的方法，所以你必须开发自己的语音识别系统，我不建议任何人。您可能应该将语音功能限制在 WP8 上，否则您会发现自己正在为一个没有前途的垂死版本的 Windows Phone 重新发明轮子。

# c# - 检查现有事务范围是否处于活动状态

> ID：13837338
> 
> 赞同：9
> 
> 时间：2012-12-12T10:08:33.297
> 
> 标签：c#, transactions, transactionscope, nested-transactions

我在用：

```
public class TransactionUtils
{
    public static TransactionScope CreateTransactionScope()
    {
        var TransactionOptions = new TransactionOptions();
        TransactionOptions.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;
        TransactionOptions.Timeout = TimeSpan.MaxValue;
        return new TransactionScope(TransactionScopeOption.Required, TransactionOptions);
    }
} 
```

创建我的所有交易。我面临的问题是当我嵌套 2 时`TransactionUtils.CreateTransactionScope()`出现错误：`Time-out interval must be less than 2^32-2\. Parameter name: dueTm`. 我假设这是因为它试图将子事务附加到父事务，并且合并的超时时间很大。

有没有办法判断新创建的事务是否是嵌套事务，这样我就可以避免设置超时？

另一种方法是传递一个参数，`CreateTransactionScope()`这样我就可以告诉它它是嵌套的并且不设置超时，但我宁愿找到一种自动处理它的方法。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T20:45:30.767

有一个非常简单的答案：

```
System.Transactions.Transaction.Current != null 
```

这从 Framework 2.0 开始有效。

我不确定为什么其他答案会如此深入地创建链接到非公共领域的 IL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:15:39.000

是的，这是可能的。我有以下代码。我不是自己做的，但忘记了我从哪里得到的。感谢原作者，但我记得我只是在谷歌上搜索它。我将它用于.net 4.0，不知道它与其他版本的兼容性如何（它取决于特定程序集中的特定类）。

使用下面的代码，您可以检查代码中的某个点是否在“内部”事务范围内执行。

```
class TransactionScopeDetector {
    private Func<TransactionScope> _getCurrentScopeDelegate;

    public bool IsInsideTransactionScope {
        get {
            if (_getCurrentScopeDelegate == null) {
                _getCurrentScopeDelegate = CreateGetCurrentScopeDelegate();
            }

            TransactionScope ts = _getCurrentScopeDelegate();
            return ts != null;
        }
    }

    private Func<TransactionScope> CreateGetCurrentScopeDelegate() {
        DynamicMethod getCurrentScopeDM = new DynamicMethod(
          "GetCurrentScope",
          typeof(TransactionScope),
          null,
          this.GetType(),
          true);

        Type t = typeof(Transaction).Assembly.GetType("System.Transactions.ContextData");
        MethodInfo getCurrentContextDataMI = t.GetProperty(
          "CurrentData",
          BindingFlags.NonPublic | BindingFlags.Static)
          .GetGetMethod(true);

        FieldInfo currentScopeFI = t.GetField("CurrentScope", BindingFlags.NonPublic | BindingFlags.Instance);

        ILGenerator gen = getCurrentScopeDM.GetILGenerator();
        gen.Emit(OpCodes.Call, getCurrentContextDataMI);
        gen.Emit(OpCodes.Ldfld, currentScopeFI);
        gen.Emit(OpCodes.Ret);

        return (Func<TransactionScope>)getCurrentScopeDM.CreateDelegate(typeof(Func<TransactionScope>));
    }
} 
```

# android - 使用来自 sqlite 的数据运行应用程序的速度

> ID：13837342
> 
> 赞同：1
> 
> 时间：2012-12-12T10:08:38.767
> 
> 标签：android

我的应用程序将从服务器加载数据并显示在列表视图上，并将此数据保存到设备上的数据库 sqlite。当设备没有连接到互联网时，应用程序将从设备的数据库加载数据以使用。我的问题是当数据运行时有快速连接到服务器，但是当从数据库中离线加载数据时，我的应用程序运行缓慢、滞后和延迟。你能帮我解释为什么吗？源代码

```
public class Hoadon extends Activity {

private String IDDelivery;
private static String addresslocation = null;
private Geocoder geocoder;
private LocationManager mlocManager;
private Location loc;
private String provider = LocationManager.GPS_PROVIDER;
private ArrayList<String> phonenumberArray = new ArrayList<String>();
private ArrayList<String> codeInvoiceArray = new ArrayList<String>();
private ArrayList<String> nameArray = new ArrayList<String>();
private ArrayList<String> addressArray = new ArrayList<String>();
private ArrayList<String> urlArray = new ArrayList<String>();
private ListView listview;
private DB_Adapter mDb = new DB_Adapter(this);

// Resume ứng dụng
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    Toast.makeText(this, addresslocation, Toast.LENGTH_SHORT).show();
    super.onResume();
}

// Khởi tạo ứng dụng
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hoadon);

    // Nhận dữ liệu từ activity khác
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        IDDelivery = extras.getString("ID");
    }

    // hàm kiểm tra cài đặt gps trên thiết bị
    LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
    boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);
    if (!enabled) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Thông tin GPS!");
        builder.setMessage("Bạn có muốn bật GPS không?");
        builder.setPositiveButton("Có", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // Launch settings, allowing user to make a change
                Intent i = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                startActivity(i);
            }
        });
        builder.setNegativeButton("Không", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                finish();
            }
        });
        builder.create().show();
    }

    // Lấy thông tin vị trí hiện tại của thết bị
    geocoder = new Geocoder(getApplicationContext(), Locale.getDefault());
    mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new GPSLocationListener();
    mlocManager.requestLocationUpdates(provider, 10000, 5, mlocListener);

    // Khởi động service để chuyển thông tin vị trí về server
    Intent i = new Intent(Hoadon.this, GpsService.class);
    i.putExtra("IDgps", IDDelivery);
    startService(i);
    doTimerTask();

}

public void testNetwork()
{
    // Kiểm tra kết nối đến server
    TestConnectionNew test = new TestConnectionNew();
    try {
        String recieve = test.execute("http://longvansolution.tk/monthlytarget.php").get();
        if (recieve.equalsIgnoreCase("true") && isNetworkAvailable() == true)
        {
            new LoadData().execute();
        }
        else if (recieve.equalsIgnoreCase("false") || isNetworkAvailable() == false)
        {
            String mess="Không thể kết nối đến server hoặc thiết bị chưa có kết nối internet!Ứng dụng sẽ chuyển sang hoạt động offline";
            Toast.makeText(Hoadon.this, mess, Toast.LENGTH_SHORT).show();
            workoffline();

        }

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // return testInternet;
}

// Hàm kiểm tra kết nối mạng trên thiết bị
public boolean isNetworkAvailable() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = cm.getActiveNetworkInfo();

    // Nếu không có kết nối mạng thì network sẽ null
    // Nếu có kết nối mạng chúng ta sẽ kết nối
    if (networkInfo != null && networkInfo.isConnected()) {

        // Log.i("net status:", "Online...!!!");
        return true;
    }
    // Log.i("net status:", "offline...!!!");
    return false;
}

// Thông báo dạng Alert
public void showAlert(final String mess) {
    Hoadon.this.runOnUiThread(new Runnable() {
        public void run() {
            AlertDialog.Builder builder = new AlertDialog.Builder(
                    Hoadon.this);
            builder.setTitle("Thông báo!");
            builder.setMessage(mess)
                    .setCancelable(false)
                    .setPositiveButton("Đồng ý",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                }
                            });
            AlertDialog alert = builder.create();
            alert.show();

        }
    });
}

// restart ứng dụng
@Override
protected void onRestart() {
    // TODO Auto-generated method stub
    // load dữ liệu mỗi lần khởi động lại activity
    workoffline();
    super.onRestart();
}

// Khởi tạo menu
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    MenuInflater i = getMenuInflater();
    i.inflate(R.menu.menu_hoadon, menu);
    return true;
}

// Menu activity
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    super.onOptionsItemSelected(item);
    switch (item.getItemId()) {
        case R.id.bando:
            Intent i = new Intent(Hoadon.this, Bando.class);
            startActivity(i);
            break;

        case R.id.chamsockhachhang:
            Intent j = new Intent(Hoadon.this, Cskh.class);
            startActivity(j);
            break;

        case R.id.logout_hoadon:
            Intent k = new Intent(Hoadon.this, GpsService.class);
            stopService(k);
            System.exit(0);
            break;

        case R.id.update:
            testNetwork();
            break;

        default:
            break;
    }
    return true;
}

// thực hiện load data từ server về theo thời gian định sẵn
public void doTimerTask() {
    TimerTask mTimerTask;
    Timer t = new Timer();
    final Handler handler = new Handler();

    mTimerTask = new TimerTask() {
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    testNetwork();
                    Log.d("TIMER", "TimerTask run");
                }
            });
        }
    };
    // public void schedule (TimerTask task, long delay, long period)
    t.schedule(mTimerTask, 500, 300000); //
}

// xử lý phím back
@Override
public void onBackPressed() {
}

// Thông báo dạng Toast
public void thongbao(String mess)
{
    Toast.makeText(Hoadon.this, mess, Toast.LENGTH_SHORT).show();
}

// load dữ liệu lên listview
public void loaddatalistview()
{
    listview = (ListView) findViewById(R.id.listView1);
    listview.setAdapter(new DataAdapter(Hoadon.this, codeInvoiceArray
            .toArray(new String[codeInvoiceArray.size()]), nameArray
            .toArray(new String[nameArray.size()]), phonenumberArray
            .toArray(new String[phonenumberArray.size()]), addressArray
            .toArray(new String[addressArray.size()])));
    listview.setOnItemClickListener(new OnItemClickListener() {

        // xử lý sự kiện khi chọn item trên listview
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Intent j = new Intent(Hoadon.this, Menu_Main.class);

            // lấy thông tin thông qua vị trí của item được chọn
            String url = urlArray.get(position);
            String address = addressArray.get(position);
            String mahoadon = codeInvoiceArray.get(position);
            String phone = phonenumberArray.get(position);

            // chuyển thông tin này qua bên phần MENU
            j.putExtra("url", url);
            j.putExtra("address", address);
            j.putExtra("mahoadon", mahoadon);
            j.putExtra("phone", phone);
            j.putExtra("ID", IDDelivery);
            startActivity(j);
        }
    });

}

// Ứng dụng sẽ hoạt động data được lưu trong database khi thiết bị không có
// kết nối mạng
public void workoffline()
{
    codeInvoiceArray.clear();
    nameArray.clear();
    phonenumberArray.clear();
    addressArray.clear();
    urlArray.clear();
    try {
        mDb.openDB();
        Cursor mCursor = mDb.getAllInvoice(IDDelivery);
        if (mCursor.moveToFirst()) {
            do {
                codeInvoiceArray.add(mCursor.getString(1));
                nameArray.add(mCursor.getString(2));
                phonenumberArray.add(mCursor.getString(3));
                addressArray.add(mCursor.getString(4));
                urlArray.add(mCursor.getString(5));

            } while (mCursor.moveToNext());
            loaddatalistview();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    mDb.closeDB();
}

// class load data từ server về thiết bị
private class LoadData extends AsyncTask<Void, Void, Void> {
    private ProgressDialog progressDialog;
    private Boolean flag = false;
    private String phonenumber, name, address, url, code;
    private JSONArray jArray;
    private String result = null;
    private InputStream is = null;
    private StringBuilder sb = null;

    @Override
    // can use UI thread here
    protected void onPreExecute() {
        this.progressDialog = ProgressDialog.show(Hoadon.this, "",
                " Đang tải thông tin...");
    }

    @Override
    protected void onPostExecute(final Void unused) {
        this.progressDialog.dismiss();
        if (flag == true)
        {

            thongbao("Tải dữ liệu thành công");
        }
        else
        {
            thongbao("Hôm nay không có gì để giao!");
        }
        try {
            loaddatalistview();
        } catch (Exception e) {

            Toast.makeText(getApplicationContext(), e.toString(),
                    Toast.LENGTH_LONG).show();
        }
    }

    // lấy thông tin từ server về dưới dạng json, được chuyển thành chuỗi và
    // lưu vào các mảng
    @Override
    protected Void doInBackground(Void... params) {
        try {
            // Gửi thông tin id người giao hàng lên server để lấy danh sách
            // hóa đơn về
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://longvansolution.tk/monthlytarget.php");
            nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("user", IDDelivery));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

            // chuyển thông tin nhận được về dạng chuỗi
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "iso-8859-1"), 80);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), e.toString(),
                    Toast.LENGTH_LONG).show();
        }

        // kiểm tra thông tin nhận được từ server
        if (result.equalsIgnoreCase("null\n\n \n"))
        {
            flag = false;

            // làm sạch mảng trước khi muốn thêm các thành phần để tránh
            // tình trạng trùng lặp
            phonenumberArray.clear();
            codeInvoiceArray.clear();
            nameArray.clear();
            addressArray.clear();
            urlArray.clear();
        } else
        {
            flag = true;
            try {
                jArray = new JSONArray(result);
                JSONObject json_data = null;
                phonenumberArray.clear();
                codeInvoiceArray.clear();
                nameArray.clear();
                addressArray.clear();
                urlArray.clear();
                mDb.openDB();

                // sử dụng json lấy các giá trị thông qua các key
                // gán nó vào các mảng tương ứng
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    phonenumber = json_data.getString("phonenumber");
                    address = json_data.getString("address");
                    name = json_data.getString("name");
                    url = json_data.getString("url");
                    code = json_data.getString("code");
                    phonenumberArray.add(phonenumber);
                    codeInvoiceArray.add(code);
                    nameArray.add(name);
                    addressArray.add(address);
                    urlArray.add(url);
                    if (mDb.test(code) == true)
                    {
                        mDb.insert(code, name, phonenumber, address, url, "Chuagiao", IDDelivery);
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();

            } catch (ParseException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        mDb.closeDB();
        return null;
    }
}

// Lấy vị trí của thiết bị
public class GPSLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location)
    {
        // chuyển thông tin vị trí của thiết bị thành dạng địa chỉ để hiển
        // thị cho người dùng
        loc = mlocManager.getLastKnownLocation(provider);
        GoogleDataReader reader = new GoogleDataReader();
        addresslocation = reader.GetAddressFromLatLng(loc.getLatitude(), loc.getLongitude(),
                geocoder);
    }

    @Override
    public void onProviderDisabled(String provider)
    {
    }

    @Override
    public void onProviderEnabled(String provider)
    {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
    }
}

// Hàm trả về vị trí của thiết bị
public static String gettext() {
    // TODO Auto-generated method stub
    return addresslocation;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:15:59.067

您将两次调用 WorkOffline() 方法：首先在 testNetwork() 方法中，然后在 onCreate() else 语句中。

# .net - Log4net 到数据库不起作用

> ID：13837343
> 
> 赞同：0
> 
> 时间：2012-12-12T10:08:40.367
> 
> 标签：.net, tsql, logging, log4net

我通过 log4net 登录到数据库时遇到问题。

*   用户有权插入数据库
*   相同的插入语句在 Management Studio 中确实有效
*   log4net 确实记录到文件但不记录到数据库
*   连接字符串正确（在其他应用程序中相同）

得到以下配置：

```
<log4net debug="true">
    <appender name="FileAppender" type="log4net.Appender.FileAppender">
        <file type="log4net.Util.PatternString" value="Logs\JallaJalla (%date{yyyyMMdd HHmmss}).log" />
        <appendToFile value="true" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date %logger %-5level - %message%newline" />
        </layout>
    </appender>

    <appender name="ADONetAppender" type="log4net.Appender.AdoNetAppender">
        <threshold value="DEBUG"/>
        <bufferSize value="1" />
        <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <connectionString value="Data Source=xxx;Initial Catalog=xxx;User Id=xxx;Password=xxx;" />
        <commandText value="INSERT INTO [log].[tLogTable] ([Message],[Level]) VALUES (@message, @log_level)" />

        <parameter>
            <parameterName value="@message" />
            <dbType value="String" />
            <size value="4000" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%message" />
            </layout>
        </parameter>

        <parameter>
            <parameterName value="@log_level" />
            <dbType value="String" />
            <size value="50" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%level" />
            </layout>
        </parameter>

    </appender>

    <logger name="ADONetAppender">
        <level value="ALL" />
        <appender-ref ref="ADONetAppender" />
    </logger>

    <logger name="FileLogger">
        <level value="ALL" />
        <appender-ref ref="FileAppender" />
    </logger>
</log4net> 
```

数据库中的两列是：

*   消息 varchar(max) 不为空
*   级别 varchar(50) 不为空

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:13:27.867

我猜您忘记将以下内容添加到您想要启用日志记录的组件中：

```
[assembly: log4net.Config.XmlConfigurator()] 
```

或来自代码：

```
log4net.Config.XmlConfigurator.Configure(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:54:11.787

我自己发现了问题...

```
private static readonly ILog Logger = LogManager.GetLogger( "FileLogger" ); 
```

记录器的名称设置为“FileLogger”所以通过添加

```
<appender-ref ref="ADONetAppender" /> 
```

里面

```
<logger name="FileLogger">
    <level value="ALL" />
    <appender-ref ref="FileAppender" />
    <appender-ref ref="ADONetAppender" /> 
</logger> 
```

解决了问题！

不管怎么说，还是要谢谢你！

# javascript - 进行 API 调用时从函数返回（javascript）

> ID：13837345
> 
> 赞同：1
> 
> 时间：2012-12-12T10:08:42.047
> 
> 标签：javascript, api, soundcloud

我正在使用 soundcloud API。我有一个函数，我在其中调用 `SC.get('/tracks', { tags: geotags }, SearchTracks);`

它将响应对象和错误代码返回给名为 SearchTracks 的函数。调用 SearchTracks 后，如何回到我所在的 main 函数，如何将响应对象返回给它？

API 调用位于 plot_soundcloud 中：

`function plot_soundcloud(coor)
{ var geotags= "geo:lon="+SCQueryPoints.join(" geo:lon=");
SC.get('/tracks', { tags: geotags }, SearchTracks);
alert ("return here and do some more stuff"); //this line does not execute
}`

 `它调用了这个函数，但是我如何回到 plot_soundcloud 呢？` 

 ``````
var SearchTracks=function Search(tracks)<br>{
 // assign longitude and latitude<br>
 for (var key in tracks)
     {var lon=tracks[key].tag_list.match(/geo:lon=(.*?\.\d+)\s*/);
     tracks[key].lon=lon[1];      
     var lat=tracks[key].tag_list.match(/geo:lat=(.*?\.\d+)\s*/);
     tracks[key].lat=lat[1];
     }
 return tracks; //I want to be able to use tracks[key].lon in plot_soundcloud 
```` 

`}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:14:54.983

你没有。主要功能已经结束。如果您需要对结果做一些事情（或者只需要在 GET 完成后做），您必须在 SearchTracks 中进行。

如果 SearchTracks 需要访问 plot_soundcloud 的局部变量，只需在 plot_soundcloud 中声明 SearchTracks。

（还有一点提示：为函数选择一个命名标准并坚持下去。所以 SearchTracks 和 PlotSoundCloud，或者（最好）search_tracks 和 plot_soundcloud。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:15:53.057

简短的回答是，你不会回来。

实现更多的东西作为 SearchTracks 的一部分 实现一个函数来做更多的东西，并调用该函数而不是 SearchTracks``

# visual-c++ - 在 C++ 中使用计时器

> ID：13837348
> 
> 赞同：1
> 
> 时间：2012-12-12T10:08:53.190
> 
> 标签：visual-c++

我在互联网上搜索了一个可以“保存”我的程序的功能..

我看过这个函数`sleep()`，虽然它对我不起作用，说它是未声明的..（我已经包含了 stdlib.h/time.h/iostream）

我没有在旁边工作的parrel东西，所以即使我停止整个程序，也没关系..

例如 ：

`sleep(3000)` `cout << "Hello World";`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:13:43.900

如果您使用的是 c++11，您有一种可移植的方式来暂停您的线程： [http ://en.cppreference.com/w/cpp/thread/sleep_for](http://en.cppreference.com/w/cpp/thread/sleep_for)

否则你必须包含 Windows.h 才能使用睡眠：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:15:14.307

试试这个。

```
usleep(microseconds) 
```

一毫秒内 1000 微秒

您可能需要： `#include <unistd.h>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:20:44.323

尝试使用大写的 S ..... 和 #include winbase.h “睡眠”

# internet-explorer-7 - 如何停止文本中的文本 被下一个截断

> ID：13837349
> 
> 赞同：0
> 
> 时间：2012-12-12T10:09:06.803
> 
> 标签：internet-explorer-7, html-lists, internet-explorer-6

在此菜单中，最后一个字母的右侧边缘被“|”的“透明”背景切断 在下一个列表项中

```
<ul class="menu1">
<li>HOME</li><li>|</li><li>CONTACT</li><li>|</li><li>ABOUT</li><li>|<li><li>SERVICES</li>
</ul>
<div class="clear"></div> 
```

这至少会影响 IE 6 和 7，也可能会影响 8。我准备了一个小提琴[http://jsfiddle.net/zhirkovski/5LnRS/2/](http://jsfiddle.net/zhirkovski/5LnRS/2/) 所以你可以明白我的意思，如果你使用的是 IE9/10 那么你仍然可以通过点击“兼容性视图”来看到问题网址。

如果有人可以帮助使透明背景再次透明，我将不胜感激。

如果我将 li 更改为像 jsfiddle.net/zhirkovski/3KfYN/17 这样的跨度，它可以解决问题，但无论如何我可以做到并维护 li 的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:13:36.547

这是导致问题的字母间距。

不确定如何在 IE 中修复它并保持 -7px 字母间距，您可以将字母间距更改为 -3px 并摆脱它，但不确定这对您有多重要

# c# - C# - 使用正则表达式搜索字符串中的数字

> ID：13837354
> 
> 赞同：0
> 
> 时间：2012-12-12T10:09:20.903
> 
> 标签：c#, regex, int

我想从字符串中提取数字，格式如下：

```
string foo="something%4%something2%5%"; 
```

我如何用正则表达式写这个？

```
//pseudocode
foo.GetDigits("%"+{int}+"%").ToArray(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T10:11:21.650

```
var matches = Regex.Matches(foo, @"%(\d+?)%").Cast<Match>()
                   .Select(m => m.Groups[1].Value)
                   .ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T10:11:30.573

代替 Regex，您可以使用[char.IsDigit](http://msdn.microsoft.com/en-us/library/system.char.isdigit.aspx)方法从字符串中获取所有数字。

```
string str = "something%4%something2%5%";
string digitstr = new string(str.Where(r => char.IsDigit(r)).ToArray()); 
```

或更短：

```
string digitstr = new string(str.Where(char.IsDigit).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:38:47.617

您也可以使用此模式：

```
(\d+)(?=%) 
```

这是一个示例代码：（未经测试）

```
MatchCollection mcol = System.Text.RegularExpression.Regex.Matches(foo,"(\d+)(?=%)");

foreach (Match m in mcol)
{
   System.Diagnostic.Debug.Print(m.ToString());
} 
```

此模式将捕获所有数字，然后是`%`.

希望能帮助到你！

# ef-code-first - EF 代码首先指定如何存储标量属性

> ID：13837356
> 
> 赞同：0
> 
> 时间：2012-12-12T10:09:23.480
> 
> 标签：ef-code-first, entity-framework-5

我想知道 EF Code First 中是否有一种方法可以指定如何存储此示例的标量属性：

我有这个 POCO 对象：

```
public class MyObject
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public ICollection<Url> Urls { get; set; }
} 
```

有没有办法告诉 EF 使用带有地图或任何其他机制的 protobuff 将 Urls 存储为 byte[] ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:40:20.657

`byte[]`不，除非您直接在您的`MyObject`班级中创建第二个属性。然后您将映射一个新属性并忽略旧属性。一旦你有了这个映射，你是否将转换逻辑直接包含到类中（到 Urls 属性的 getter 和 setter），或者如果你使用覆盖`SaveChanges`和处理程序`ObjectContext.ObjectMaterialized`来在数据访问基础结构范围内进行转换，这取决于你。

如果您选择，您将无法通过 Urls 进行查询。EF 唯一可见的属性是新的字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:52:49.170

不，我认为不可能直接指示 EF 将项目集合存储为 byte[]，但您可以使用一些解决方法。

`NotMapped`向属性添加 属性`Urls`- 它从 EF 模型中排除属性，然后添加另一个属性`SerializedUrls`，该属性将包含序列化为 byte[] 的集合，并将其保存到 DB。最后通过 getter/setter同步`Urls`和属性。`SerializedUrls`

```
private byte[] _serializedUrls;
private ICollection<Url> _urls;

public byte[] SerializedUrls { 
  get { return _serializedUrls; }
  set {
    _urls = this.Deserialize(value);
    _serializedUrls = value;
  }
}

[NotMapped]
public ICollection<Url> Urls {
  get { return _urls; }
  set { 
    _urls = value;
    _serializedUrls = this.Serialize(value);        
  }
}

private byte[] Serialize(ICollection<Url> collection) {
  //call protobuf to serialize data
}

private ICollection<Url> Deserialize(byte[] data) {
  //call protobuf to deserialize data
}

public void UpdateSerializedValue() {
  serializedUrls = this.Serialize(_urls);
} 
```

注意：由于集合的二进制表示在您添加/删除/更改集合中的项目时会发生变化，因此请确保在集合`SerializedUrls`内容发生更改时进行更新。

# mysql - OTRS 性能慢的主队列列表

> ID：13837361
> 
> 赞同：0
> 
> 时间：2012-12-12T10:09:40.047
> 
> 标签：mysql, performance, otrs

我们有一个非常慢的队列列表的问题。如果单个队列中有超过 15 个工单，则创建视图最多需要 4-5 秒。

出现此问题是因为我们使用的是 OTRS 3.1 我们在虚拟化的 Ubuntu 10.04 LTS 上运行带有 KIX4OTRS 扩展的 OTRS 3.1.4。

我们尝试过：

*   手册中提供的已知性能调整。
*   创建额外的数据库索引
*   使用 Ubuntu 12.04 / 12.04.1 在物理机上安装（无积极影响）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:02:20.897

这是 Kix 的一种特殊行为......

尝试在 Sysconfig 的“Ticket -> Frontend::Agent::Ticket::MenuModulePre”中禁用一些模块。

这应该会提高性能...

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:34:07.150

您是否使用任何客户数据库？队列视图还会显示来自客户数据库的数据，因此如果您使用外部 LDAP 系统或数据库，这会很慢，这也会立即影响 OTRS 性能。

顺便说一句，我认为这更像是一个 ServerFault 问题而不是 StackOverflow 问题，因为它与编程无关。

# php - 将电子邮件正文中的 UTF-8 字符串替换为 HTML 实体

> ID：13837364
> 
> 赞同：0
> 
> 时间：2012-12-12T10:09:46.340
> 
> 标签：php, utf-8

我有一个数据库，里面装满了发送给客户的文本邮件正文，这些邮件通常用非英语语言编写或包含英镑/欧元符号。

是否有任何功能可以用实际的 UTF-8 字符或 HTML 实体自动替换它们？

以下是此类电子邮件字符串的示例：

```
Merci d'avoir choisi et f=C3=A9licitations pour vos gains !

D'apr=C3=A8s nos archives, une ou plusieurs demande(s) d'encaissement de votre part est (sont) en cours de traitement.

Les d=C3=A9tails de cet (ces) encaissement(s) sont les suivants : 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:22:43.487

使用功能[`quoted_printable_decode`](http://php.net/manual/en/function.quoted-printable-decode.php)：

```
$str = "Merci d'avoir choisi et f=C3=A9licitations pour vos gains ! D'apr=C3=A8s nos archives, une ou plusieurs demande(s) d'encaissement de votre part est (sont) en cours de traitement.Les d=C3=A9tails de cet (ces) encaissement(s) sont les suivants :";
echo quoted_printable_decode($str);
//Merci d'avoir choisi et félicitations pour vos gains ! D'après nos archives, une ou plusieurs demande(s) d'encaissement de votre part est (sont) en cours de traitement.Les détails de cet (ces) encaissement(s) sont les suivants : 
```

它们将采用 utf-8（在这种情况下），因此如果您将 charset 标头设置为 utf-8，则打印将按原样进行。

# java - 如何在 Java 项目中加载 .BIN 文件？

> ID：13837371
> 
> 赞同：0
> 
> 时间：2012-12-12T10:10:12.207
> 
> 标签：java, file, import, load

bin 文件（en-token.bin） 到我的 java 项目中。我将 .bin 文件放入资源文件夹。但是当我运行此加载时，它显示 NullpointerException。

```
 InputStream modelIn;
        try {
            modelIn = new FileInputStream("en-token.bin");
            } catch (FileNotFoundException ex) {
            return null;
         } 
```

我也试过把 .bin 文件的整个路径放上去，但还是不行。然后我尝试将 .bin 文件与这段代码所属的类放在同一个包中。它也没有用。这是加载 .bin 文件的正确方法吗？我不能使用本地路径，因为我必须将它放入项目中，以便它可以在其他机器上运行而无需下载相同的 .bin 文件。

# php - 如何在 PHP 中显示警告框？

> ID：13837375
> 
> 赞同：59
> 
> 时间：2012-12-12T10:10:29.720
> 
> 标签：php, javascript, html, alert

我想显示一个警告框，显示一条带有 PHP 的消息。

这是我的PHP代码：

```
<?php  
  header("Location:form.php");

  echo '<script language="javascript">';
  echo 'alert(message successfully sent)';  //not showing an alert box.
  echo '</script>';
  exit;
?> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-12-12T10:14:54.580

使用此代码

```
echo '<script language="javascript">';
echo 'alert("message successfully sent")';
echo '</script>'; 
```

问题是：

1.  你错过了`"`
2.  应该`alert`不是`alery`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-01-03T05:24:54.857

试试这个：

定义一个函数：

```
<?php
function phpAlert($msg) {
    echo '<script type="text/javascript">alert("' . $msg . '")</script>';
}
?> 
```

像这样称呼它：

```
<?php phpAlert(   "Hello world!\\n\\nPHP has got an Alert Box"   );  ?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T10:13:42.803

存在语法错误（错字）：

`alert`不是`alery`。_

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-09T06:54:12.910

```
echo "<script>alert('same message');</script>"; 
```

这可能会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-12T10:13:00.170

```
echo '<script language="javascript>'; 
```

似乎是一个简单的错字。你错过了一个双引号。

```
echo '<script language="javascript">'; 
```

这应该做。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-12T10:12:05.767

改变你的输出

```
 echo '<script language="javascript>'; 
```

到

```
 echo '<script type="text/javascript">'; 
```

你忘了双引号......并使用类型标签

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-12T10:15:47.550

```
echo '<script language="javascript">';
echo 'alert("message successfully sent")';
echo '</script>'; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-12T10:35:55.387

当我将其作为页面运行时

```
<?php
echo '<script language="javascript">';
echo 'alert("message successfully sent")';
echo '</script>';
exit; 
```

它工作正常。

你运行的是什么版本的PHP？

您能否尝试在以下内容后回显其他内容：`$testObject->split_for_sms($Chat);`

也许它没有到达代码的那部分？您也可以尝试使用其他函数调用来检查程序停止/到达的位置。

希望您对此有所了解。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-12T10:15:33.617

我不知道php，但我相信问题出在这个：

```
echo '<script language="javascript>';
echo 'alery("message successfully sent")';
echo '</script>'; 
```

尝试使用以下方法更改：

```
echo '<script language="javascript">';
echo 'alert("message successfully sent")';
echo '</script>'; 
```

# sql-server - 用于过滤结果集的 Sql 查询

> ID：13837379
> 
> 赞同：0
> 
> 时间：2012-12-12T10:10:45.117
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 中创建了这个现金表，我需要知道什么是纸币类型，什么是货币编号和总数。

```
1 = Amount Came
2 = Amount Gone 
```

我期待通过对 SQL 查询进行分组来获得结果。表示如果我有 1000 种货币并且货币票据的总数为 11 [认为来/给定为“1”]，则总共为 11000

同样，我有一张 20 纸币 [即 1 In 和 1 Given]，因此它不应该出现在所需的输出中，因为没有匹配或我没有任何 20 纸币。因为我有一张 20 纸币并给出返回 20

预期输出是

```
Currency No of Currency Total
1000 -- 11 - 11000
500  -- 1 -- 500
100 -- 1 - 100
50 -- 1 - 50 
```

![在此处输入图像描述](../Images/dd4d3ea5aaf5be6edd0b189d35f76209.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:17:37.450

```
create table currency(curr int,noc int,total int,cg int)

insert into currency 
Values(1000,10,10000,1),(1000,1,1000,1),(500,1,500,1),(100,1,100,1),(50,1,50,1),(20,1,20,1),(10,1,10,1),
(5,1,5,1),(2,1,2,1),(1,1,1,1),(20,1,20,2),(10,1,10,2),(5,1,5,2),(2,1,2,2),(1,1,1,2)

select a.curr,count(*),SUM(Total)
FROM
(
select x.curr curr,x.[no of currency],(x.curr*x.[no of currency]) as Total
From
(select a.curr,a.noc-isnull(b.noc,0) as [no of currency] from 

(select * from currency where cg=1) a

left join

(select * from currency where cg=2) b
on a.curr=b.curr
) x
) a
where a.[no of currency] <>0
group by curr 
```

# web-services - 无法在 JBoss 服务器上部署 Spring Web Service

> ID：13837387
> 
> 赞同：0
> 
> 时间：2012-12-12T10:11:21.637
> 
> 标签：web-services, spring, maven, jboss

我在我的 WS 工作正常的服务器上测试我的 Spring WS `VMWare vFabric`，现在我想迁移到`JBOSS 4.2.3.GA`并且在短时间内我遇到了我无法解决的问题。我在服务器启动时遇到这个异常：

```
11:07:01,828 WARN  [ServiceController] Problem starting service jboss:service=TransactionManager
java.lang.NoClassDefFoundError: org/apache/commons/logging/LogConfigurationException
    at com.arjuna.common.util.logging.LogFactory.setupLogSystem(LogFactory.java:392)
    at com.arjuna.common.util.logging.LogFactory.getLogNoi18n(LogFactory.java:190)
    at com.arjuna.ats.arjuna.logging.tsLogger.<clinit>(tsLogger.java:58)
    at com.arjuna.ats.internal.arjuna.objectstore.ShadowingStore.<init>(ShadowingStore.java:840)
    at com.arjuna.ats.internal.arjuna.objectstore.ShadowNoFileLockStore.<init>(ShadowNoFileLockStore.java:155)
    at com.arjuna.ats.internal.arjuna.objectstore.HashedStore.<init>(HashedStore.java:268)
    at com.arjuna.ats.internal.arjuna.objectstore.HashedActionStore.<init>(HashedActionStore.java:172)
    at com.arjuna.ats.internal.arjuna.objectstore.HashedActionStore.<init>(HashedActionStore.java:167)
    at com.arjuna.ats.internal.arjuna.objectstore.HashedActionStore.create(HashedActionStore.java:100)
    at com.arjuna.ats.internal.arjuna.objectstore.HashedActionStoreSetup.createVoid(HashedActionStoreSetup.java:49)
    at com.arjuna.ats.internal.arjuna.gandiva.inventory.StaticInventory.createVoid(StaticInventory.java:76)
    at com.arjuna.ats.arjuna.gandiva.inventory.Inventory.createVoid(Inventory.java:84)
    at com.arjuna.ats.arjuna.objectstore.ObjectStore.<init>(ObjectStore.java:128)
    at com.arjuna.ats.arjuna.coordinator.TxControl.getStore(TxControl.java:133)
    at com.arjuna.ats.arjuna.recovery.ActionStatusService.<init>(ActionStatusService.java:71)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:501)
    at java.lang.Class.newInstance0(Class.java:350)
    at java.lang.Class.newInstance(Class.java:303)
    at com.arjuna.ats.arjuna.recovery.TransactionStatusManager.start(TransactionStatusManager.java:149)
    at com.arjuna.ats.arjuna.recovery.TransactionStatusManager.<init>(TransactionStatusManager.java:78)
    at com.arjuna.ats.arjuna.coordinator.TxControl.<clinit>(TxControl.java:312)
    at com.arjuna.ats.jbossatx.jta.TransactionManagerService.startService(TransactionManagerService.java:139)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy4.start(Unknown Source)
    at org.jboss.deployment.SARDeployer.start(SARDeployer.java:304)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:766)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy5.deploy(Unknown Source)
    at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:482)
    at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
    at org.jboss.Main.boot(Main.java:200)
    at org.jboss.Main$1.run(Main.java:508)
    at java.lang.Thread.run(Thread.java:595) 
```

看起来服务器想要`org/apache/commons/logging`从自己的目录加载库，如下所示： ![在此处输入图像描述](../Images/555fe079ee9ff78c4a959f886e94a9ee.png)

和我的依赖：

```
<!-- ============ CORE DEPENDENCIES =============== -->
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>2.1.2.RELEASE</version>
        </dependency>
    <!-- ============ SPRINGFRAMEWORK DEPENDENCIES =============== -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring-version}</version>
        </dependency>

    <!-- ============ JAVAX DEPENDENCIES =============== -->        
        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0.2</version>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.2.7</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
            <version>1.1</version>
        </dependency>

     <!-- ============ HIBERNATE DEPENDENCIES =============== -->       
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.7.Final</version>
        </dependency>

    <!-- ============ c3p0 DEPENDENCIES =============== --> 
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>
    <!-- ============ POSTGRESQL DEPENDENCIES =============== -->
        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.1-901.jdbc4</version>
        </dependency>
    <!-- ============ LOGGING DEPENDENCIES =============== -->  
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
            <scope>provided</scope>
        </dependency> 
    <!-- ============ CAMEL DEPENDENCIES =============== -->        
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-core</artifactId>
            <version>${camel-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-jms</artifactId>
            <version>${camel-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-spring</artifactId>
            <version>${camel-version}</version>
        </dependency>
    <!-- ============ ACTIVEMQ DEPENDENCIES =============== --> 
        <dependency>
            <groupId>org.apache.activemq</groupId>
            <artifactId>activemq-camel</artifactId>
            <version>${activemq-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.activemq</groupId>
            <artifactId>activemq-pool</artifactId>
            <version>${activemq-version}</version>
        </dependency>
    <!-- ============ XBEAN DEPENDENCIES =============== -->        
        <dependency>
            <groupId>org.apache.xbean</groupId>
            <artifactId>xbean-spring</artifactId>
            <version>3.7</version>
        </dependency> 
    <!-- ============ SUN DEPENDENCIES =============== -->
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-xjc</artifactId>
            <version>2.1.6</version>
        </dependency> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:07:15.467

问题是`JBOSS 4.2.3.GA`他的基础包中已经包含了一些库。您遇到的错误与包版本不匹配有关，这并不奇怪，因为`4.2.3`它是旧版本，以及它附带的内容 - 它包含旧版本的包。检查`library`您的服务器上的方向，然后从那里删除您在应用程序中使用的包。

# javascript - 警告：无法验证 CSRF 令牌的真实性（rails 2 到 rails 3）

> ID：13837395
> 
> 赞同：0
> 
> 时间：2012-12-12T10:11:49.097
> 
> 标签：javascript, ajax, ruby-on-rails-3, jquery

将rails应用程序从升级`rails 2.3.14`到后`rails 3.2.6`，我在大多数情况下都出现以下错误`ajax post requests`。

```
WARNING: Can't verify CSRF token authenticity 
```

我尝试了一个解决方案...

```
$(document).ajaxSend(function(event, request, settings) {
    var token = $("meta[name='csrf-token']").attr("content");
    request.setRequestHeader("X-CSRF-Token", token);   
}); 
```

但它不工作。

任何想法来克服这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:34:14.423

你包括

```
jquery-rails 
```

gem ，它会自动为所有 ajax 请求设置 csrf 令牌。

# google-drive-api - ParentReference 或 Google_ParentReference

> ID：13837396
> 
> 赞同：2
> 
> 时间：2012-12-12T10:11:49.220
> 
> 标签：google-drive-api, google-api-client

在 Google 文档（[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)）中有以下代码片段：

```
$file = new Google_DriveFile();
  ...
$parent = new ParentReference(); 
```

我在`Fatal error: Class 'ParentReference' not found`. 我为*ParentReference搜索了**google-api-php-client*。

 *```
lib: grep -R ParentReference ./ | grep class
.../Google_DriveService.php:class Google_ParentReference extends Google_Model { 
```

似乎添加了一些前缀“Google_”并将*ParentReference*重命名为 *Google_ParentReference* 。

我的结论对吗？还有什么我无法理解的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:38:51.620

你是对的。

如果您要下载最新的[PHP](http://en.wikipedia.org/wiki/PHP) [SDK](http://en.wikipedia.org/wiki/Software_development_kit) ，您可以检查几乎所有的类都有前缀*Google_*。

 *例如，在文件夹中，`\src\contrib\Google_DriveService.php`您会找到 Google_ParentReference 的定义。

还要检查*[父母：插入](https://developers.google.com/drive/v2/reference/parents/insert)*（Google Drive SDK）。**

# c# - 从共享点下载文件会返回更大的文件大小

> ID：13837397
> 
> 赞同：0
> 
> 时间：2012-12-12T10:11:55.477
> 
> 标签：c#, sharepoint, download

我尝试在我的 ASP.NET 项目（C#）中使用以下方法从共享点下载文件。它总是返回更大的文件大小，有时它会返回损坏的文件。它出什么问题了 。我尝试了很多 ContentType 但还是一样。它必须提示用户下载对话框。

```
 //file is SPFile
            response.Buffer = true;
            response.ClearContent();
            response.ClearHeaders();
            response.ContentType = "application/octet-stream";
            //response.ContentType = "application/force-download";
            response.AddHeader("content-disposition", "attachment; filename= \"" + FileName + "\"");
            response.Cache.SetCacheability(HttpCacheability.Private);
            if (file.Length != 0)
            {
                response.BinaryWrite(file.OpenBinary());
            }
            response.Flush(); 
```

提前致谢。

# java - 如何使用 GWT 编辑器框架使用休眠验证器验证整数

> ID：13837400
> 
> 赞同：0
> 
> 时间：2012-12-12T10:12:01.090
> 
> 标签：java, gwt, hibernate-validator

我正在使用休眠验证器和编辑器框架来验证我的 GWT 项目中针对 DTO 的输入。

我遇到的问题是用户在文本框中输入了一个字符串，应该将其验证为整数。我试图应用 hibernate-validator 注释来自动让它工作，但似乎我遗漏了一些东西。

我的 DTO：

```
public class MyDto {  
   @Min(value = 1, message = "Radius must be at least 1 meter.")
   private int radius = 100;

   ...
} 
```

我正在使用 GWT IntegerBox 来读取半径值，并且在输入诸如 -1 之类的值时可以正常工作，但当我输入非整数值时（例如“hi”）则无法正常工作。

我发现验证这一点的唯一方法是在 IntegerBox 上发出 getValueOrThrow() ，然后手动设置错误。有没有办法直接使用 hibernate-validator 注释来表达这一点？

我尝试过使用整数和@NotNull、@NotEmpty、@Valid。

我当前的代码如下所示：

```
try {
    radiusBox.getValueOrThrow();
}
catch (final ParseException e) {
    radiusDecorator.setErrorText("Invalid radius value.");
    return;
}

final MyDto dto = editorDriver.flush();
final Set<ConstraintViolation<?>> violations = clientValidator.validate(dto);

if (!violations.isEmpty()) {
    editorDriver.setConstraintViolations(violations)
    return;
} 
```

# sql - 如何在通过土耳其测试的 Oracle 中进行不区分大小写的字符串比较？

> ID：13837401
> 
> 赞同：3
> 
> 时间：2012-12-12T10:12:02.840
> 
> 标签：sql, oracle, string-comparison, turkey-test

> **可能重复：**
> [使 Oracle SQL LIKE 查询不区分大小写](https://stackoverflow.com/questions/5391069/make-oracle-sql-like-query-case-insensitive)

我想在忽略大小写的 SQL 语句中进行字符串比较。目前我们使用类似`upper(field) like upper(anotherField)`的东西。然而，众所周知，这种方法无法通过[土耳其测试](https://stackoverflow.com/questions/796986/what-is-the-turkey-test)，不是吗？如何以正确的方式做到这一点？

# c++ - Qt::BackgroundRole 似乎被忽略了

> ID：13837403
> 
> 赞同：3
> 
> 时间：2012-12-12T10:12:04.617
> 
> 标签：c++, qt, qtableview

我正在使用从`QAbstractTableModel`.

我已经覆盖`headerData()`了，我可以通过返回颜色来更改单个行标题（或列标题，但我在这里只关注行）的字体颜色`Qt::ForegroundRole`

```
if(role == Qt::ForegroundRole)
   return Qt::green; 
```

但是如果我去`Qt::BackgroundRole`设置标题单元格的背景颜色，什么都不会发生。

```
if(role == Qt::BackgroundRole)
   return Qt::red; 
```

我在 上设置了一个断点，`return`然后就到达了。但什么也没发生:-(

关于我错在哪里的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:26:31.037

AFAIK角色颜色相当于设置调色板颜色，`QStyle`绘制标题单元格可以随意忽略它。

我在使用`QPalette`样式表在小部件上设置任意颜色时遇到了麻烦。文本往往会起作用，就像“窗口”彩色背景（`QPushButton`例如背景）一样，但文本输入字段背景不会（`QLineEdit`例如）。但是 AFAIK 取决于特定的`QStyle`实现，因此不仅会因小部件而异，而且会因平台而异。唯一*确定*的方法是重新实现`QStyle`（一项*艰巨*的工作），或者手动绘制它`paintEvent(..)`（很难遵循当前`QStyle`且仍然有很多代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-12T21:08:53.190

1）您也可以通过使用自己的项目委托来实现它 - 从 QStyledItemDelegate 或其他任何东西继承，重新实现一种方法并将其设置为查看。

2）对于特定的表格或标题视图，使用尊重画笔的样式：

```
//auto keys = QStyleFactory::keys();
if(auto style = QStyleFactory::create("Fusion")) {
    verticalHeader()->setStyle(style);
} 
```

# android - 如何从 sqllite 数据库中保存和检索图像

> ID：13837405
> 
> 赞同：0
> 
> 时间：2012-12-12T10:12:07.970
> 
> 标签：android, database, sqlite

> **可能重复：**
> [如何将图像存储在 sqlite 数据库中](https://stackoverflow.com/questions/9357668/how-to-store-image-in-sqlite-database)

这是我用于插入数据并保存在 sql lite 数据库中并显示显示的代码我如何创建新表来保存图像并在输出中使用此代码显示？这段代码工作正常我只想创建新表“IMAGETABLE”，它从用户上传图像中获取输入并保存到数据库

我的活动课。

```
 import android.app.Activity;
 import android.app.AlertDialog;
 import android.os.AsyncTask;
 import android.os.Bundle;
import android.view.View;
 import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;

 private EditText Donedate;
 private EditText Notes;
 private EditText Person;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.Address);
      capEt = (EditText) findViewById(R.id.Stage);
      codeEt = (EditText) findViewById(R.id.Dueby);

      Donedate = (EditText) findViewById(R.id.Donedate);

      Notes = (EditText) findViewById(R.id.Notes);
      Person = (EditText) findViewById(R.id.Person);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         Donedate.setText(extras.getString("Location"));  
         Notes.setText(extras.getString("Notes")); 
         Person.setText(extras.getString("Person")); 
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),
                  Donedate.getText().toString(),
                  Notes.getText().toString(),
                  Person.getText().toString()

                  );
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            Donedate.getText().toString(),
         Notes.getText().toString(),
          Person.getText().toString()

         );
      }
   }
} 
```

ListView 的 ListActivity

```
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.app.ListActivity;
  import android.content.Intent;
 import android.database.Cursor;
 import android.view.Menu;
 import android.view.MenuInflater;
  import android.view.MenuItem;
 import android.view.View;
 import android.widget.AdapterView;
   import android.widget.CursorAdapter;
  import android.widget.ListView;
 import android.widget.SimpleCursorAdapter;
  import android.widget.AdapterView.OnItemClickListener;

  public class CountryList extends ListActivity {

 public static final String ROW_ID = "row_id";
 private ListView conListView;
 private CursorAdapter conAdapter;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    conListView=getListView();
    conListView.setOnItemClickListener(viewConListener);

    // map each name to a TextView
    String[] from = new String[] { "name" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.country_list,  
   null, from, to);
    setListAdapter(conAdapter); // set adapter
 }

 @Override
 protected void onResume() 
 {
   super.onResume();  
   new GetContacts().execute((Object[]) null);
  } 

 @Override
 protected void onStop() 
 {
   Cursor cursor = conAdapter.getCursor();

   if (cursor != null) 
      cursor.deactivate();

   conAdapter.changeCursor(null);
   super.onStop();
 }    

   private class GetContacts extends AsyncTask<Object, Object, Cursor> 
   {
   DatabaseConnector dbConnector = new DatabaseConnector(CountryList.this);

   @Override
   protected Cursor doInBackground(Object... params)
   {
      dbConnector.open();
      return dbConnector.getAllContacts(); 
   } 

   @Override
   protected void onPostExecute(Cursor result)
   {
      conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
   } 
   } 

  @Override
 public boolean onCreateOptionsMenu(Menu menu) 
 {
   super.onCreateOptionsMenu(menu);
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.country_menu, menu);
   return true;
 }   

 @Override
 public boolean onOptionsItemSelected(MenuItem item) 
 {
   Intent addContact = new Intent(CountryList.this, AddEditCountry.class);
   startActivity(addContact);
   return super.onOptionsItemSelected(item);
 }

  OnItemClickListener viewConListener = new OnItemClickListener() 
 {
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
   {         
      Intent viewCon = new Intent(CountryList.this, ViewCountry.class);
      viewCon.putExtra(ROW_ID, arg3);
      startActivity(viewCon);
   }
   };    

  } 
```

我的数据库类：

```
 import android.content.ContentValues;
  import android.content.Context;
  import android.database.Cursor;
  import android.database.SQLException;
  import android.database.sqlite.SQLiteDatabase;

      public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String  
         LocationEd, String Notes, String Person) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("code", code);

              newCon.put("Location",LocationEd);
              newCon.put("Notes",Notes);
              newCon.put("Person",Person);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String  
    cap,String code,String LocationEd, String Notes, String Person) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("code", code);
              editCon.put("Location", LocationEd);
              editCon.put("Notes", Notes);
              editCon.put("Person", Person);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id",  
  "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null,  
     null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
}

           import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
 import android.database.sqlite.SQLiteOpenHelper;

      public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key  
  autoincrement,name text,cap text,code text,Location double,Notes text,Person  
      text);";              
    db.execSQL(createQuery);        
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

  }

            import android.app.Activity;
  import android.app.AlertDialog;
   import android.content.DialogInterface;
    import android.content.Intent;
     import android.database.Cursor;
import android.os.AsyncTask;
 import android.os.Bundle;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
   import android.widget.TextView;

       public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 

   private TextView Locationlb; 
   private TextView Noteslb; 
   private TextView Personlb; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);

       Locationlb = (TextView) findViewById(R.id.Location_lbl);

       Noteslb = (TextView) findViewById(R.id.Notes_lbl);
       Personlb = (TextView) findViewById(R.id.Person_lbl);

   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");

         int LocationIndex = result.getColumnIndex("Location");
         int NotesIndex = result.getColumnIndex("Notes");
         int PersonIndex = result.getColumnIndex("Person");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));
         Locationlb.setText(result.getString(LocationIndex));

         Noteslb.setText(result.getString(NotesIndex));
         Personlb.setText(result.getString(PersonIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());

            addEditContact.putExtra("Location", Locationlb.getText());

            addEditContact.putExtra("Notes", Noteslb.getText());

            addEditContact.putExtra("Person", Personlb.getText());

            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:15:35.417

只需在数据库中创建 blob 字段。

首先将图像或位图转换为 base64 字符串并将其插入到您数据库中的 blob 字段中。

然后从数据库返回时

获取base64字符串，然后转换成图像..

我试过这个概念它有效

# ios - iOS - UIRefreshControl 崩溃

> ID：13837406
> 
> 赞同：4
> 
> 时间：2012-12-12T10:12:14.643
> 
> 标签：ios, uitableview, uirefreshcontrol

如果我`UITableViewController`通过快速轻弹手指（而不是缓慢的拖动和释放）来“拉动刷新”，我的应用程序会因`EXC_BAD_ACCESS (code=1, address=0x30000008)`错误而崩溃。

以下是相关代码：

```
- (void)refreshView:(UIRefreshControl *)refresh
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self populateWhatsOn];
        dispatch_async(dispatch_get_main_queue(), ^ {
            [self.refreshControl endRefreshing];
        });
    });
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-18T12:44:55.637

检查是否`populateWhatsOn`使用`endRefreshing`. 如果是这样，请创建一个单独的队列并在此队列中执行任何常见更改。

# java - 为什么DatagramChannel关闭后仍然绑定地址

> ID：13837407
> 
> 赞同：0
> 
> 时间：2012-12-12T10:12:14.850
> 
> 标签：java, udp

> **可能重复：**
> [DatagramChannel.close() 在 Windows 上保持端口打开](https://stackoverflow.com/questions/12977164/datagramchannel-close-keeps-port-open-on-windows)

尝试使用 DatagramChanned 很好，但在关闭地址后仍然绑定地址，函数完成执行，如下例所示。

为什么这段代码会打印：

电话号码：2

java.net.BindException：地址已在使用：绑定

```
 public static void main(String[] args) {

            java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            recever(1);
            recever(2);
        }
    });
}

    static void recever(int c) {
     try {        
        DatagramChannel chdata = DatagramChannel.open();

            int uport = 3111;
            int bufsize = 10;
         chdata.configureBlocking(false);
         Selector selector = Selector.open();

         chdata.bind(new InetSocketAddress(uport));
         ByteBuffer  bytbuf = ByteBuffer.allocate(bufsize);      
            chdata.register(selector, SelectionKey.OP_READ);

     int th = 0;
     int sn;

    while (true) {

        if (selector.select(1000) == 0){
                     System.out.println("\nTimeout");
            break;
        }

        Set readyKeys = selector.selectedKeys();
        Iterator iterator = readyKeys.iterator();
        while (iterator.hasNext()) {
           iterator.next();
            iterator.remove();

               bytbuf.clear();
               chdata.receive(bytbuf);
               th++;
               bytbuf.flip();
       //   dealwithincomingbuffer(bytbuf);
          }
       }    
      //  chdata.bind(null);
        chdata.close();

    } catch (IOException ex) {
        System.out.println("Call num: "+c+" \n  "+ex);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:54:08.780

您没有在 finally 块中关闭您的套接字，并且您根本没有关闭您的 Selector。因此，在某些情况下套接字根本没有关闭。

# java - 无法初始化代理 - 没有会话，为什么更新有效而合并无效？

> ID：13837409
> 
> 赞同：0
> 
> 时间：2012-12-12T10:12:27.940
> 
> 标签：java, hibernate

尝试获取延迟加载的对象时出现“无法初始化代理 - 无会话”。我知道这是因为我的对象是分离的，我需要先更新它。我的问题是为什么会这样：

```
repo.update(object);
object.getSomeList(); 
```

当那些没有时：

```
object = repo.merge(object);
object.getSomeList();

repo.evict(object);
repo.get(objectClass,object.primaryKey());
object.getSomeList(); 
```

Repo 是我的存储库类，它引用了 Session 并运行 session.saveOrUpdate(...)、session.merge(...) 等

我以为所有版本都让我得到一个持久对象，所以它不再分离。真的吗？如果是，虽然我没有收到会话错误？如果没有，为什么没有？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:19:27.470

如果我理解你的问题，你应该初始化惰性属性

```
Hibernate.initialize(object.getSomeList()); 
```

# drawing - 素描工具——软件设计图（uml）

> ID：13837410
> 
> 赞同：3
> 
> 时间：2012-12-12T10:12:33.863
> 
> 标签：drawing, uml, diagram

我见过几次人们以一种手写草图的方式呈现软件设计图。有没有任何工具可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:14:26.767

是的。我喜欢[http://yuml.me](http://yuml.me)。另请查看此列表：[http ://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools](http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T21:04:49.627

试试“balsamiq”……我想是[http://www.balsamiq.com/](http://www.balsamiq.com/)

# django - Django 1.4：如何从 Bla.objects.filter 只获取真正的字符串

> ID：13837412
> 
> 赞同：0
> 
> 时间：2012-12-12T10:12:41.833
> 
> 标签：django, django-models, django-templates, django-views

我有一个

```
class Questions(models.Model):
    question = models.CharField(max_length=150)
    created_by = models.CharField(max_length=30)
    def __unicode__(self):
        return self.question 
```

现在我需要这样的输出（所以我可以像 djangos 一样使用它`{{ form.as_p }}`）：

```
<div id="question-1">The string in question"</div>
<div id="question-2">The string in another question"</div>
... 
```

随着`loq = Questions.objects.filter(created_by=user)`我`[<Questions: My first question!>,...]`进去`str(loq)`。

有比使用搜索更简单的方法`str(loq)`吗`.find()`？

编辑：

以这种方式解决它（感谢[Samuele Mattiuzzo](https://stackoverflow.com/users/754484/samuele-mattiuzzo)）：

模型.py：

```
class Questions(models.Model):
    question = models.CharField(max_length=150)
    created_by = models.ForeignKey(User)
    def __unicode__(self):
        return self.question 
```

视图.py：

```
def ViewQuestions(request):
    if request.user.is_authenticated():
        loq = Questions.objects.filter(created_by=request.user)

        return render(request, "main/questions.html", {'loq': loq})
    else:
        return HttpResponseRedirect("/") 
```

问题.html：

```
{% for q in loq %}
<div id="question-{{ forloop.counter }}">{{ q.question }}</div>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:23:43.153

像这样创建一个模板文件（比如 questions.html）：

```
{% for q in loq %}
    <div id="question-{{ forloop.counter }}">{{ q.question }}</div>
{% endfor %} 
```

在你的views.py中，你必须返回你的查询集（这是你的loq）

```
def view_questions(response, user):
    loq = Questions.objects.filter(created_by=user)
    return render_to_response(
        'questions.html',
        locals(),
        context_instance=RequestContext(request)
    ) 
```

locals() 是包含你的 loq 的字典。在这里我假设你已经知道 django 是如何工作的。我真的不明白你所说的“.find()”声明是什么意思。

您可能还想将 created_by 字段从 CharField 更改为 ForeignKey 指向 User 类

[检查有关查询集](https://docs.djangoproject.com/en/dev/ref/models/querysets/)和[视图](https://docs.djangoproject.com/en/dev/topics/http/views/)的文档以获取有关该主题的更多知识。

如果这没有回答，请提供更多解释，我将更新答案

# android - phonegap/android 中的语音到文本

> ID：13837415
> 
> 赞同：2
> 
> 时间：2012-12-12T10:12:52.943
> 
> 标签：android, cordova, speech-recognition, phonegap-plugins, speech-to-text

我正在开发一个 android/phonegap 应用程序。我有一张表格，由客户填写。我的客户希望我设计可以接受语音输入并将其转换为文本的表单。现在，我有以下一组问题/澄清，

1.  运行在 2.1 以上的每部安卓手机都有语音搜索功能，所以不需要在应用程序中添加该功能吗？

2.  如果我将该功能作为我的应用程序的一部分来实现，我应该在哪里实现 - 在 android 或 phonegap 中？. 我猜在 phonegap 中，因为我的 UI 在 phonegap 中。我有测试语音识别 phonegap 插件，它的工作就像一个魅力！[网址：http://www.raymondcamden.com/index.cfm/2011/12/2/Adding-voicebased-search-to-a-PhoneGap-app](http://www.raymondcamden.com/index.cfm/2011/12/2/Adding-voicebased-search-to-a-PhoneGap-app)

3.  如果我将该功能作为我的应用程序的一部分来实现，我是否需要安装任何支持的谷歌应用程序（特别是：GoogleServicesFramework 和语音搜索）？

希望我已经明确了我的观点，请按照急需的方式进行回复..

谢谢，

七无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:24:36.333

我采用第一种方法...感谢您的调查，

七无

# mysql - mysql语法返回最新的多行总数

> ID：13837421
> 
> 赞同：2
> 
> 时间：2012-12-12T10:13:09.997
> 
> 标签：mysql, delphi, delphi-xe2

这可能是我写过的最糟糕的标题！

我有一个表，其条目类似于：

```
1 ¦ ABC1 ¦ 21
2 ¦ DEF2 ¦ 43
3 ¦ DEF2 ¦ 44
4 ¦ XYZ9 ¦ 18
5 ¦ ABC1 ¦ 19 
```

我试图在 MySQL 中写一个语句，它只会返回：

```
ABC1 ¦ 19
XYZ9 ¦ 18
DEF2 ¦ 44 
```

...所以每个唯一代码的最新个人总数。我是该语言的新手，无法破解语法！

希望这是有道理的，但请随时提出任何澄清问题（当然！）。

非常感谢，

乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:15:37.990

假设表有`id`, `name`,`count`

```
SELECT * FROM <tablename> 
WHERE id IN (SELECT MAX(id) FROM <tablename> GROUP BY name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:24:04.067

mysql中有一个技巧可以做到这一点：

```
select code, num
from (select * from mytable
      order by id desc) x
group by code; 
```

虽然这不是其他 RDBMS 上的有效查询，但在 mysql 中，不聚合其他列的 group by 返回遇到的*第一*行（因此内部 order by 以获取最先排序的最新行）。

Unlike traditional queries using complicated sub queries, this will perform very well.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:16:40.350

试试这个：

```
select * 
from   <table> t
join   (
        select max(col1) as col1 ,col2
        from   <table>
        group by col2)a
on      t.col1=a.col1 
```

### [SQL Fiddle 演示](http://sqlfiddle.com/#!2/48111/2)

# wordpress - 在 wordpress 页面上获取 bbpress 论坛计数

> ID：13837423
> 
> 赞同：0
> 
> 时间：2012-12-12T10:13:10.833
> 
> 标签：wordpress, bbpress

我已将 bbpress 作为插件安装在 wordpress 站点中，并希望在 worpress 主页上显示论坛、主题和回复的总数，但似乎无法弄清楚这一点。

以下代码显示了一个类似于默认表单显示的表格，其中包含此信息，但似乎无法提取此信息。

```
bbp_set_query_name('load_forum_details');
if ( bbp_has_forums() ) :
    bbp_get_template_part( 'loop', 'forums' );
endif;
bbp_reset_query_name(); 
```

有人有什么想法吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T14:17:54.973

```
<?php $forum_id = 12; ?>
<?php bbp_forum_topic_count($forum_id); //Show topic count ?>
<?php bbp_show_lead_topic($forum_id) ? bbp_forum_reply_count($forum_id) : bbp_forum_post_count($forum_id); //Show reply count ?> 
```

此代码显示 id = 12 的论坛的主题数和回复数

希望对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-11T12:46:20.383

派对很晚了，但是（从 2.5 版开始）Wordpress 有一个功能`wp_count_posts()`可以计算任何（自定义）帖子类型。

所以你可以只使用`$forumCount = wp_count_posts('forum)->publish;`and `echo $forumCount;`。

在这篇文章的公认答案中找到：[https ://wordpress.stackexchange.com/questions/26559/counting-the-number-of-posts-custom-post-type-query-problem](https://wordpress.stackexchange.com/questions/26559/counting-the-number-of-posts-custom-post-type-query-problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:16:40.280

认为我已经设法做到这一点：

```
function bbpress_summary() {
    global $wpdb;
    return array(
        'forum_count' => $wpdb->get_var("SELECT COUNT(post_id) FROM $wpdb->postmeta WHERE meta_key = '_bbp_total_topic_count'"),
        'topic_count' => $wpdb->get_var("SELECT COUNT(post_id) FROM $wpdb->postmeta WHERE meta_key = '_bbp_topic_id' AND `post_id` = `meta_value`"),
        'thread_count' => $wpdb->get_var("SELECT COUNT(post_id) FROM $wpdb->postmeta WHERE meta_key = '_bbp_topic_id'"),
        'user_count' => $wpdb->get_var("SELECT COUNT(user_id) FROM $wpdb->usermeta WHERE meta_key = 'wp_user_level'")
    );
} 
```

# javascript - 如何使jquery按钮上的图标+文本居中

> ID：13837429
> 
> 赞同：1
> 
> 时间：2012-12-12T10:13:27.533
> 
> 标签：javascript, jquery, html, css, button

我为 UI 创建的按钮由一个图标和一些文本组成，因此：

```
 [ <icon> Some Text ] 
```

我正在使用 jQuery 创建按钮，其 HTML 如下：

```
<button class="myButton" type="button"/> 
```

和这样的JavaScript：

```
$('.myButton').button({
                    label: "Some Text",
                    icons: {
                        primary: "icon-custom",
                    }
                })
                .css({ width: '85px' }); 
```

设计团队已经指定了它的外观要求，所以我需要一个 85 像素宽的按钮（我已经管理了那个位），图标和文本之间有 5 像素的间隙，然后将图标+文本对居中按钮。

这可能吗？如果可以，怎么做？我一直无法弄清楚。

似乎默认是左对齐按钮上的图标，然后将文本居中在左边，但这看起来不太好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:43:13.743

是的，将图标居中有点困难，如果您设置它可以完成，`text: false`但您只会得到按钮图标，没有按钮文本。

但是你可以做一些 css 技巧来获得它：

```
.ui-button-icon-primary 
{
   left:5.5em !important;    // default it is 0.5, so it's always on left position...
}​ 
```

`left`根据您的要求修改该值。

[jsfiddle](http://jsfiddle.net/mvw6E/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:28:54.997

不是很优雅，但应该照顾你的要求。

```
$('.myButton').button({
    label: '<span class="ui-button-icon-primary ui-icon icon-custom"></span>text',
}).css({
    width: 85
}).find('.ui-icon').css({
    display:'inline-block',
    position:'relative',
    top:4, //top varies depending on button height / font-size, adapt as needed
    marginRight:5
}); 
```

[**小提琴**](http://jsfiddle.net/ByNuC/5/)

这样，图标是居中文本跨度的一部分。你只需要补偿垂直对齐。

# sql-server - 在加入查询中需要帮助

> ID：13837430
> 
> 赞同：0
> 
> 时间：2012-12-12T10:13:30.043
> 
> 标签：sql-server, join

我有两张桌子：

tbl_Invoice

![发票](../Images/6ab5fed3f0a035dbc46b0016cbf06997.png)

tbl_payment

![支付](../Images/12b87a317525a4f990600f805bc40314.png)

当我通过 client_Id = 时`5`，所需的输出应该是：

```
PSUM        IPRICE          Amt_Type
----------- -------------- ----------------
100.00      100.00         USD
  0.00      1000.00        GBP 
```

在哪里

`PSUM`是总付款的总和

`IPRICE`是发票总价格的总和

我尝试过的是：

```
Select SUM(P.Amt) as PSUM, SUM(I.Total_price) as IPRICE, I.Amt_Type  from
[tbl_payment] P left join [tbl_Invoice] I on P.invoice_Id = I.invoice_Id
    WHERE P.client_id = @Client_Id and I.client_id = @Client_Id
    group by I.Amt_Type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:23:54.673

以下似乎正在工作：

```
declare @client_id int = 5

select 
  IsNull(sum(p.amt), 0) PSUM,
  IsNull(sum(i.total_price), 0) IPRICE,
  i.amt_type
from tbl_invoice i
left join tbl_payment p
  on i.invoice_id = p.invoice_id
  and i.client_id = p.client_id
where i.client_id = @client_id
group by i.amt_type, i.invoice_id
order by i.invoice_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e7d37/8)

结果：

```
| PSUM | IPRICE | AMT_TYPE |
----------------------------
|  100 |    100 |      USD |
|    0 |   1000 |      GBP | 
```

# html - 使用动态 ID 处理 CSS

> ID：13837431
> 
> 赞同：0
> 
> 时间：2012-12-12T10:13:31.057
> 
> 标签：html, css

我的 html 页面类似于...

```
<a href="#" id="play_1">play1</a>
<a href="#" id="play_2">play2</a>
<a href="#" id="play_1">play3</a>
<a href="#" id="play_2">play4</a>
<a href="#" id="file_1">file1</a>
<a href="#" id="file_2">file2</a> 
```

我想为 play_"#" 和 file_"#" 定义通用的 CSS。我如何定义 CSS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:16:10.200

为标签添加一个类

```
<a href="#" class="play" id="play_1">play1</a>
<a href="#" class="play" id="play_2">play2</a>
<a href="#" class="play" id="play_1">play3</a> <!-- double ID -->
<a href="#" class="play" id="play_2">play4</a> <!-- double ID -->
<a href="#" class="file" id="file_1">file1</a>
<a href="#" class="file" id="file_2">file2</a> 
```

因为您有双重 ID，所以要么完全删除 ID，要么使它们唯一

```
<a href="#" class="play" id="play_1">play1</a>
<a href="#" class="play" id="play_2">play2</a>
<a href="#" class="play" id="play_3">play3</a> 
<a href="#" class="play" id="play_4">play4</a>
<a href="#" class="file" id="file_1">file1</a>
<a href="#" class="file" id="file_2">file2</a> 
```

在 css 中使用

```
.play {
  /* add your common play styles here */
}
.file {
  /* add your common file styles here */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:16:35.623

为每个链接添加一个类并改为定位它。

例如

```
<a href="#" id="play_1" class="play">play1</a>
<a href="#" id="play_2" class="play">play2</a>
<a href="#" id="play_1" class="play">play3</a>
<a href="#" id="play_2" class="play">play4</a>
<a href="#" id="file_1>file1</a>
<a href="#" id="file_2">file2</a> 
```

然后你的CSS看起来像：

```
.play {
   //Style here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:54:35.247

完成此任务的最简单方法是使用 css 属性选择器。在这种情况下，它将是：

```
a[id^="play_"] {
  /* your declarations */
} 
```

和

```
a[id^="file_"] {
  /* your declarations */
} 
```

这些属性选择器仅选择具有属性“id”的元素，该属性以指定的值开头，在本例中为“file_”或“play_”。此外，您应该摆脱重复的 id。无论哪种方式，这都会起作用，并且最新的浏览器版本可能会忽略您的重复 ID 并正确呈现页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:21:28.207

你写的地方有一点语法错误`id="Play_1"`

请遵循编程模式使用类，您可以在其中定义元素属性并将该类用于您想要该效果的所有元素。

```
<!DOCTYPE html>
<html>
<style>
.play_1 {
background-color : green;
}
.play_2 {
background-color : red;
}
</style>
<body>
<a href="#" class="play_1">play1</a>
<a href="#" class="play_2">play2</a>

<a href="#" class="play_1">play3</a>
<a href="#" class="play_2">play4</a>

<a href="#" class="play_1">file1</a>
<a href="#" class="play_2">file2</a>
</body>
</html> 
```

# svn - Jenkins 与 Maven3 和多个 SVN 模块。如何设置不同的父relativePaths？

> ID：13837434
> 
> 赞同：1
> 
> 时间：2012-12-12T10:13:41.710
> 
> 标签：svn, maven, jenkins, parent-pom

我正在为我们的 Jenkins 配置而苦苦挣扎。

我已经定义了一个包含多个 SVN 模块的 jenkins 作业，因为我想从**同一个**svn 存储库的不同位置签出。

我需要为每个结帐定义一个*可选的模块目录*，因为如果我没有设置一个，Jenkins 将在同一个目录中签出我的所有模块，并且将始终覆盖我的 .svn 目录（并随后删除所有文件，我之前检查过）。

所以**我为每个结帐设置了一个可选目录**。从这一点开始，它与我使用的文件夹结构不同，当我在我的 eclipse-workspace 中检出我的所有包以获取 exmaple 时。因为有一个**扁平的层次结构**。

因此，当jenkins 和开发之间的*relativePath*不同时，我不能在 pom.xml 中使用相同的*relativePath来定义父级。*

 *```
Example:

Jenkins (Tree-hierarchie): <relativePath>../<optionalModuleDir>/pom.xml</relativePath>

Eclipse-Workspace(Flat hierarchie): <relativePath>../pom.xml</relativePath> 
```

我尝试使用配置文件，但我只能在配置文件中设置*模块*，而不是父*relativePath*。

如何将相同的 pom.xml 与两个不同的父*relativePath*一起使用？或者我应该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:25:15.490

作为一种解决方法，如下修改您的 Maven 构建：

*   添加预构建步骤“执行 shell”/“执行 Windows 批处理命令”
*   在此添加一个脚本，其中包含将所有内容移动到位或创建符号链接以创建所需结构的命令。

当您的构建开始时，签出后源将被带入所需的结构，然后构建本身执行。*

# java - 自定义适配器 onClick 未注册点击

> ID：13837435
> 
> 赞同：1
> 
> 时间：2012-12-12T10:13:42.960
> 
> 标签：java, android, onclick

我有以下代码，当我单击每一行时，它没有注册 onclick 事件并且没有显示日志。

我可能正在做一些愚蠢的事情，所以任何帮助都将不胜感激。

```
public void loadTable(){
     File dbfile = new File(Global.currentDBfull); 
     SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);

     mItemName.clear();
     mItemID.clear();
     adapter.notifyDataSetChanged();

     String SQLStatement = "select * from assets where areaobjectid = '" + StationObjectID + "' and CriticalAsset = 'Y'";
     Log.e("SQLSTATEMENT", SQLStatement);

     String intCount = "0";

     Cursor c = db.rawQuery(SQLStatement, null);  
     if(c.getCount() != 0) {

     c.moveToFirst();
     while(!c.isAfterLast()) {

         mItemName.add(c.getString(c.getColumnIndex("Description")));
         mArrayClick.add(c.getString(c.getColumnIndex("StationObjectID")));
         mItemStatus.add(c.getString(c.getColumnIndex("ConditionID")));
         Log.e("MITEMSTATUS",c.getString(c.getColumnIndex("ConditionID")));

        c.moveToNext();

     }

     rowCount = mItemName.size();

     listView = (ListView) findViewById(R.id.lvAssets);
     adapter.notifyDataSetChanged();   
     int[] colors = {0, 0xFFFF0000, 0}; 
     listView.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
     listView.setDividerHeight(1);

     listView.setAdapter(adapter);

     listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

         @Override
         public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

             Log.e("TOMTEST", "Clicked");   

           }
       });

     } else {

        Log.e("Assessment", "No Results");  

     }

     db.close();
}

class CustomAdapter extends BaseAdapter
{

    @Override
    public int getCount() {

        return mItemName.size();
    }

    @Override
    public Object getItem(int arg0) {

        return null;
    }

    @Override
    public long getItemId(int arg0) {

        return 0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageButton btnAction;

        LayoutInflater inf=getLayoutInflater();
        View v=inf.inflate(R.layout.iconrow, arg2,false);
        ImageView ivStatus=(ImageView)v.findViewById(R.id.icon);
        TextView tv=(TextView)v.findViewById(R.id.text);
        btnAction = (ImageButton)v.findViewById(R.id.btnAction);

        final String itemID =  "Item ID";
        final String itemText =  "Item Text";
        final String itemStage = "Item Strage";

        tv.setText(mItemName.get(arg0).toString()); 

        String currentStatus = mItemStatus.get(arg0).toString();
        if(Functions.isNullOrEmpty(mItemStatus.get(arg0).toString())){
             ivStatus.setImageResource(R.drawable.ico_not_verified); 
        } else if(mItemStatus.get(arg0).toString() == "99") {
            ivStatus.setImageResource(R.drawable.ico_not_found); 
        } else {
            ivStatus.setImageResource(R.drawable.ico_found); 
        }

        return v;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:20:41.077

如果你正在`extends`学习`ListActivity`你应该`override`使用的`OnListItemClick`方法。这是你需要的。另外，如果我能给你一个建议，你的模式`getView`应该是这样的：

```
 if(arg1==null){
   LayoutInflater inflater=getLayoutInflater();
   arg1=inflater.inflate(R.layout.row, parent, false);
 } 
```

为了避免浪费内存，因为这`ListView`是您回收的方式，`View`以降低内存使用率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:56:13.490

你的代码很适合我。

```
listview.setOnItemClickListener(new AdapterView.OnItemClickListener() {

             @Override
             public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

                 Log.v("TOMTEST", "Clicked");   
                 Toast.makeText(getApplicationContext(), "Clicked : "+position, Toast.LENGTH_LONG).show();

               }
           }); 
```

它也会显示正确位置的 Toast。

不知何故，它无法在日志中打印消息。

希望它可以帮助你。

谢谢。

# java - 如何在html中的数字上应用点击事件？

> ID：13837437
> 
> 赞同：0
> 
> 时间：2012-12-12T10:13:43.543
> 
> 标签：java, javascript, html, jsp

在我的网站中，用户输入一个数字。当用户单击任何数字时，程序应搜索数据库中 key="user selected number" 的所有记录。

我的问题是如何在数字上应用点击事件以及如何点击该特定数字？

这是我的 numberch.jsp 代码

```
 <% 
 out.print("<div class=bs-docs-example style=width:400px>");

 out.print("<h3><b>Enter the list of Property Ids for Delete</b></h3>
<form action=numberch.jsp method=post><input type=text name=number><br/><br/><br/>    <input type=submit name=go value=Send></form>");
out.print("</div>");
String numbers = request.getParameter("number"); 
PreparedStatement ps=null;
Connection con = null;
DBManager db = new DBManager();
con=db.createConnection(); 
Statement statement = null;
//statement = con.createStatement();
ResultSet rs=null;      

    if(numbers!=null)
    {

        if(numbers.length()>0)
        {
            String tokens[]=numbers.split("[,]");

            out.print("<div class=list>");

            out.print("<div class=bs-docs-example style=top:-420px;left:600px;width:400px;height:145px;overflow:auto>");

            out.print("<ul style=list-style:none>");
            out.print("<table>");
            out.print("<th> Property Ids for Delete</th>");
                for(int i=0;i<tokens.length;i++)
                    {

                    ps=con.prepareStatement("insert into property_delete(property_id) values(?)");
                    ps.setString(1,tokens[i]);
                    ps.executeUpdate(); 

                        out.print("<tr><td><hr>");
                        out.print("<li>");  out.print(tokens[i]); out.print("</li>");
                        out.print("</td></tr>");    

                        out.print("<input type=\"hidden\"  name=\"delete_numbers\" value=\"delete\">");
                    }
                out.print("</table></ul>");

                out.print("</div></div>");
        }
    }

 %> 
```

在上面的代码列表中，出现在第二个 if 块中，其中 tokens[i] 打印该数字。我想在该数字上应用点击事件...

筛选

![在此处输入图像描述](../Images/f8b0e55371781bb91a027f77b50190f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:20:36.103

只需使用

```
out.print("<a href='#no_target' onclick='yourJSFunction(\""+tokens[i]+"\")'>" + tokens[i] +"</a>"); 
```

代替

```
out.print(tokens[i]); 
```

# c++ - DnsQuery 无法在某些特定 FQDN 上获取有效地址

> ID：13837439
> 
> 赞同：3
> 
> 时间：2012-12-12T10:13:45.053
> 
> 标签：c++, windows, winapi, dns

当我在这里使用此代码参考时：http: [//support.microsoft.com/kb/831226](http://support.microsoft.com/kb/831226)

我可以编译成功，但是当我用它做一些 dns 查询时，返回地址很奇怪，例如：176.20.31.0（这不应该是一个有效的地址）

这是我的输出：

```
C:\dnsq\Debug>dnsq.exe -n tw.media.blizzard.com -t A -s 8.8.8.8
The IP address of the host tw.media.blizzard.com is 176.20.31.0 
```

但实际上 tw.media.blizzard.com 应该是：（我通过 nslookup 查询）

```
# nslookup tw.media.blizzard.com 8.8.8.8
Server:         8.8.8.8
Address:        8.8.8.8#53

Non-authoritative answer:
tw.media.blizzard.com   canonical name = tw.media.blizzard.com.edgesuite.net.
tw.media.blizzard.com.edgesuite.net     canonical name = a1479.g.akamai.net.
Name:   a1479.g.akamai.net
Address: 23.14.93.167
Name:   a1479.g.akamai.net
Address: 23.14.93.157 
```

我的问题是为什么 dnsquery 在某些 FQDN 上不起作用？任何建议将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:51:20.210

我发现了问题。

对于那些导致地址无效的 FQDN，常见的是它们的 DNS 记录类型都是“DNS_TYPE_CNAME”，而不是 DNS_TYPE_A。

所以我们需要解析整个 PDNS_RECORD 来获取 DNS_TYPE_A 信息。

* * *

我将在这里发布我的更改：

来自MS的原始代码：

```
 if(wType == DNS_TYPE_A) {
        //convert the Internet network address into a string
        //in Internet standard dotted format.
        ipaddr.S_un.S_addr = (pDnsRecord->Data.A.IpAddress);
        printf("The IP address of the host %s is %s \n", pOwnerName,inet_ntoa(ipaddr));

        // Free memory allocated for DNS records. 
        DnsRecordListFree(pDnsRecord, freetype);
    } 
```

我在这里的改变：

```
 if(wType == DNS_TYPE_A) {
        //convert the Internet network address into a string
        //in Internet standard dotted format.
        PDNS_RECORD cursor;

        for (cursor = pDnsRecord; cursor != NULL; cursor = cursor->pNext) {
            if (cursor->wType == DNS_TYPE_A) {
                ipaddr.S_un.S_addr = (cursor->Data.A.IpAddress);
                printf("The IP address of the host %s is %s \n", pOwnerName,inet_ntoa(ipaddr));                 
            }
        }

        // Free memory allocated for DNS records. 
        DnsRecordListFree(pDnsRecord, freetype);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T05:58:55.757

```
PDNS_RECORD pQueryResults;

DNS_STATUS dResult = DnsQuery_A(
        "www.facebook.com",
        DNS_TYPE_A,
        DNS_QUERY_WIRE_ONLY, 
        NULL,
        (PDNS_RECORD*)&pQueryResults,
        NULL
    );

char* szActualHost = (char*) pQueryResults->Data.CNAME.pNameHost; 
```

非常感谢分享这个，但我想添加这个以进一步澄清；

*   即使您使用 DNS_TYPE_A 作为某些 FQDN 的 wType 调用 DNSQuery_A，它仍可能会返回您的 wType 记录为 (0x5) DNS_TYPE_CNAME。

*   在这种情况下，您可以通过检查 QueryResults 的实际 CNAME 部分来找到实际的主机名，当然也可以再次调用 DNSQuery_A() API 来获取新的主机名。检查上面的代码片段

# utf-8 - 愚蠢的单元测试邮件服务器不返回预期的邮件正文？

> ID：13837440
> 
> 赞同：3
> 
> 时间：2012-12-12T10:13:54.363
> 
> 标签：utf-8, character-encoding, jakarta-mail

我正在为电子邮件应用程序编写 junit，该应用程序将邮件发送到 gmail 等任何外部域。我正在使用哑元（假邮件服务器）api 来处理包括 SmtpMessage、SmtpServer 等类的应用程序。我正在编写我发送的 junit统一码体

```
 String unicodeBody = "TestBody\u0393" 
```

但是当我从假邮件服务器收到它时，我得到它像这样“TestBody = CE = 93”。接收邮件的 smtp 服务器的代码是

```
 SmtpMessage email=smtpServer.getReceivedEmail().next(); 
```

我不确定我在这里缺少什么？

只是为了提供信息，我将邮件作为 MimeMessage（其内容类型是多部分/替代）发送，其中内部包含两个 mimeBodyPart，即一个用于文本正文，另一个用于 html 正文。

**编辑：-** 完整的电子邮件正文是：-

```
MIME-Version: 1.0
Message-ID: <18805827.1.1355311147338.JavaMail.SMiles@INN-L-0019>
Subject: subject
Date: Wed, 12 Dec 2012 16:49:07 +0530 (IST)
To: to@email.com
Content-Type: multipart/alternative;
Reply-To: from@email.com
From: from@email.com

------=_Part_0_13986615.1355311147225Content-Type: text/plain; charset=UTF-8Content-Transfer-Encoding: quoted-printable
body=CE=93------=_Part_0_13986615.1355311147225Content-Type: text/html; charset=UTF-8Content-Transfer-Encoding: quoted-printable
body=CE=93------=_Part_0_13986615.1355311147225--

------=_Part_0_13986615.1355311147225Content-Type: text/plain; charset=UTF-8Content-Transfer-Encoding: quoted-printable
body=CE=93------=_Part_0_13986615.1355311147225Content-Type: text/html; charset=UTF-8Content-Transfer-Encoding: quoted-printable
body=CE=93------=_Part_0_13986615.1355311147225--
{MIME-Version=[1.0], Message-ID=[<18805827.1.1355311147338.JavaMail.Smiles@INN-L-0019>], Subject=[subject], Date=[Wed, 12 Dec 2012 16:49:07 +0530 (IST)], To=[to@email.com], Content-Type=[multipart/alternative;], Reply-To=[from@email.com], From=[from@email.com]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:43:06.363

这称为[Quoted Printable](http://en.wikipedia.org/wiki/Quoted-printable)编码，您可以使用[Apache Commons Codec](http://commons.apache.org/codec/download_codec.cgi)对其进行解码，例如：

```
public static void main(String[] args) {
    QuotedPrintableCodec a = new QuotedPrintableCodec("UTF-8");
    try {
        System.out.println(a.decode("TestBody=CE=93"));
        // prints "TestBodyΓ"
    } catch (DecoderException e) {
        e.printStackTrace();
    }
} 
```

它将首先变成`=CE=93`实际的字节值`0xCE 0x93`，然后将它们解码为 UTF-8（在构造函数中传递）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T22:40:55.863

今天我也遇到了这个问题。要回答这个问题，您不能将邮件正文与笨蛋一起使用。垃圾箱[坏了](http://sourceforge.net/p/dumbster/bugs/15/)。简单的答案是使用[greenmail](http://www.icegreen.com/greenmail/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:52:32.020

要读取返回消息中的数据，请使用接受 InputStream 的 MimeMessage 构造函数，然后使用 JavaMail API 以正常方式访问消息的各个部分。JavaMail 将为您解码消息的编码部分。

# android - 如何刷新绘制图表的活动？

> ID：13837451
> 
> 赞同：0
> 
> 时间：2012-12-12T10:14:28.393
> 
> 标签：android, bar-chart, achartengine

我是 Android 新手，我开发了以下代码来显示前 10 个旅游目的地的条形图。
我的问题是我需要刷新活动，以便每次刷新时都绘制一个新图表。请发布任何链接，我可以在其中学习如何刷新它。我在互联网上搜索过，但找不到合适的教程。

```
public class ChartActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        XYMultipleSeriesRenderer renderer = getBarDemoRenderer();
        setChartSettings(renderer);
        Intent intent = ChartFactory.getBarChartIntent(this, getBarDemoDataset(), renderer, Type.DEFAULT);
        startActivity(intent);
    }

    public void createIntent() 

     {

//    return ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
    }

    public XYMultipleSeriesRenderer getBarDemoRenderer() {
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
        renderer.setAxisTitleTextSize(16);
        renderer.setChartTitleTextSize(20);
        renderer.setLabelsTextSize(15);
        renderer.setLegendTextSize(15);
        renderer.setMargins(new int[] {10, 20, 0, 0});
        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
        r.setColor(Color.BLUE);
        renderer.addSeriesRenderer(r);
        r = new SimpleSeriesRenderer();
        r.setColor(Color.GREEN);
        renderer.addSeriesRenderer(r);
        return renderer;
      }

     private XYMultipleSeriesDataset getBarDemoDataset() {
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        final int nr = 5;
        Random r = new Random();
        int SERIES_NR = 2;
        for (int i = 0; i < SERIES_NR; i++) {
          CategorySeries series = new CategorySeries("Top 10 Destinations " );
          for (int k = 0; k < nr; k++) {
            series.add(800 + r.nextInt() % 100);
          }
          dataset.addSeries(series.toXYSeries());
        }
        return dataset;
      }

    private void setChartSettings(XYMultipleSeriesRenderer renderer) {
        renderer.setChartTitle("Top 10 Destinations Chart");
        renderer.setXTitle("Travel Destinations Around the World");
        renderer.setYTitle("Number of Visitors");
        renderer.setXAxisMin(0);
        renderer.setXAxisMax(6);
        renderer.setYAxisMin(0);
        renderer.setYAxisMax(1000);
      }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_chart, menu);
        return true;
    }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:31:44.457

为了更好地控制图表视图，最好创建 a`GraphicalView`而不是为 a 创建意图`GraphicalActivity`：

```
GraphicalView graphicalView = getBarChartView(this, getBarDemoDataset(), renderer, Type.DEFAULT); 
```

将此视图添加到活动的视图层次结构中。然后要显示新数据，首先修改数据集，然后使用以下方法安排重绘：

```
graphicalView.repaint() 
```

# azure-sdk-.net - 如何自动检测已安装 Azure SDK 的版本？

> ID：13837454
> 
> 赞同：6
> 
> 时间：2012-12-12T10:14:34.650
> 
> 标签：azure-sdk-.net

是否有一种简单（记录在案？）的方法来检测自动化脚本中实际安装的 Azure SDK 版本？我将根据这个版本定义条件行为。

目前，我只是查看`C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\`文件夹并查看其内容。但我发现它不可靠且不可自动化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T19:45:22.637

这是帮助我的提示：[http ://www.robblackwell.org.uk/2011/05/29/determining-the-windows-azure-sdk-version-at-runtime.html](http://www.robblackwell.org.uk/2011/05/29/determining-the-windows-azure-sdk-version-at-runtime.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T14:05:57.950

如果您使用 Windows Platform Installer 安装 SDK（我相信这是现在的标准方法），您可以使用 webpicmd.exe 来确定安装了哪个 SDK。例如：

```
webpicmd /List /ListOption:Installed 
```

[在http://msdn.microsoft.com/en-us/library/azure/gg433092.aspx](http://msdn.microsoft.com/en-us/library/azure/gg433092.aspx)上查看更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-31T10:14:50.353

对于仍在寻找此功能的用户，可以使用[Azure powershell cmdlet](https://msdn.microsoft.com/en-us/library/azure/jj156055.aspx)来实现。

```
Get-AzureDeployment -ServiceName "<service name>" -slot "<Production or Staging>" | Where-Object -Property SdkVersion | select SdkVersion 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T14:49:59.980

导航

```
C:\Program Files\Microsoft SDKs\Azure\.NET SDK 
```

版本将是此目录中包含的文件夹名称。

[![https://i.imgur.com/mZAELvy.png](../Images/8cfbc6577a1823dcc8a91ad45c81da4f.png)](https://i.stack.imgur.com/6wP38.png)

# c# - 为测试人员创建测试 UI

> ID：13837455
> 
> 赞同：2
> 
> 时间：2012-12-12T10:14:45.647
> 
> 标签：c#, unit-testing, testing, architecture, tdd

我有一组包含在他们自己的项目中的方法，这些方法正在一个相当大的（单片）应用程序中使用。因此，测试人员一直在抱怨没有简单的方法来测试它们。

因此，我建议创建一个简单的应用程序，该应用程序将在程序集上使用反射，并允许测试人员将自己的参数输入到每个单独的方法中（并检查结果）。我**确实**有一套完整的单元测试，但我认为最好让测试人员使用这些方法。

*   这听起来是个好主意吗？
*   有什么我可以使用的吗？

或者也许我错过了一些完全明显的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T10:36:41.867

> 我有一组包含在他们自己的项目中的方法，这些方法正在一个相当大的（单片）应用程序中使用。因此，测试人员一直在抱怨没有简单的方法来测试它们。

测试方法的唯一*方法*是通过单元测试，你说它已经有一整套了。

如果该项目纯粹是内部的（而且似乎是这样，因为您必须使用反射来公开它），测试人员甚至不应该知道它。

测试架构的内部结构不是测试人员的工作，而是开发人员的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:42:19.737

您提出的方法显然是解决您的问题的方法。在之前的评论中，有很多（我的也是）关于你想要这样做的原因的问题。但是由于您确定由于某些原因（我们知道企业界，对吗？）测试人员应该手动测试库中的每个方法并且您已经获得的单元测试还不够，那么您提出的建议应该可以在我的观点。

您遇到的问题似乎是对单元测试缺乏信任/决定测试人员应该检查库的人的错误方法。

# javascript - 如何在 iPhone 的 Phonegap 应用程序中从 Objective-C 中调用 JavaScript 函数？

> ID：13837456
> 
> 赞同：1
> 
> 时间：2012-12-12T10:14:46.850
> 
> 标签：javascript, objective-c, ios, cordova

我为 iPhone 创建了一个 Phonegap 应用程序，到目前为止效果很好。

现在我需要从我的 Objective-C 代码中调用一个 JavaScript 函数。

我该怎么做呢？我已经尝试了以下方法，但它不起作用：

在**AppDelegate.m**方法**“didFinishLaunchingWithOptions”中**：

```
[self.viewController.webView stringByEvaluatingJavaScriptFromString:@"test()"]; 
```

在我的**JavaScript**文件中：

```
function test(){
    alert("called");
} 
```

**结果：**什么都没有发生。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:00:13.813

尝试实现（如果尚未实现）其中一种 UIWebView 委托方法。在 didFinishLaunchingWithOptions 方法结束时，WebView 可能没有完全初始化。

在视图控制器的 .m 文件中，添加：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
         [webView stringByEvaluatingJavaScriptFromString:@"test()"];
   } 
```

编辑： webViewDidFinishLoad 委托方法实际上可能对此更有效。

# javascript - 在整个函数完成之前让部分 javascript 触发

> ID：13837458
> 
> 赞同：0
> 
> 时间：2012-12-12T10:14:52.777
> 
> 标签：javascript, jquery

我正在通过 jQuery 更改图像，但是图像需要几秒钟才能加载，因此看起来就像单击什么也没做，所以我需要输入一个临时的“正在加载”图像来向用户显示图像正在加载。

然而，正如我过去所经历的那样，JS 并没有真正在事情发生时触发事情，它会等到完整的功能完成后再发生事情；我记得过去想出了一个解决方案，但我就是不记得它是什么。

我有这个可以完成每项任务，但用户永远不会看到加载图像，因为它在用户看到任何东西之前就被新图像替换了。

```
function changeMainImage(image) {

    // Set temporary loading image
    jQuery('#main_image').attr('src', 'images/loading.jpeg');    

    // Set big image
    var big_image = image + '-big.png'

    // Update main image url
    jQuery('#main_image').attr('src', big_image);

} 
```

我尝试将以下内容放入单独的函数中：

```
// Set temporary loading image
jQuery('#main_image').attr('src', 'images/loading.jpeg'); 
```

..并像这样在其他函数之前调用它..

```
onclick="setLoadingIMage(); changeMainImage('images/ai');" 
```

但这并没有改变任何东西。

谁能告诉我我需要做什么才能达到我想要的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:23:30.517

```
<label id="label"> Loading </label>
<img src="src" id="image" style="display:none;"/> 
```

JS：

```
var image = document.getElementById('image');
var label = document.getElementById('label');

image.onload = function(){
    image.style.display = "block";
    label.style.display = "none";
} 
```

小提琴： http: [//jsfiddle.net/3x63F/](http://jsfiddle.net/3x63F/)（图片太大，加载可能需要几分钟）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:26:53.720

这将显示`loading.jpeg`直到图像被加载。

```
function changeMainImage(image) {

    jQuery('#main_image').attr('src', 'images/loading.jpeg');

    var img = new Image();
    img.src = image + "-big.png";

    img.onload = function( ) {
          jQuery('#main_image').attr('src', img.src );
    }
} 
```

如果图像保存在缓存中，`img.onload`则将立即触发。

演示[**在这里**](http://jsfiddle.net/bruno/3x63F/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:24:04.907

这是我为此使用的一个技巧：

1.  在 div 中嵌入图像
2.  保持加载图像作为 Div 的背景
3.  加载图像时，显示隐藏加载背景。

希望这对你有用。此外，您可以选择动画 gif 来加载图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:26:02.267

这是在后台加载图像时如何在前台显示微调器的教程

[图像加载微调器](http://jqueryfordesigners.com/image-loading/)

# php - 将基于 Magento 模型的脚本转换为 SQL

> ID：13837466
> 
> 赞同：0
> 
> 时间：2012-12-12T10:15:17.800
> 
> 标签：php, sql, magento

有没有办法在使用直接 SQL 的脚本中转换使用 magento 模型和集合的脚本。

我知道这一切都是可能的:)，问题是一种简单直观的方式，让我从脚本中获取查询，然后在直接数据库脚本中重用。

为什么 ？我希望有一个更快的脚本。

代码示例？

假设这个脚本：

```
function getProd() {

$collection = Mage::getModel('catalog/product')
        ->getCollection()
        ->addTierPriceData();

return $collection;
}
function getTier($prod) {

$t_1 = false;

$_tierPrices = $prod->getTierPrice();

if ($_tierPrices) {

    $_firstTier = array_slice($_tierPrices, 0, 1);

    if (isset($_firstTier[0]))
        $t_1 = $_firstTier[0]['price'];
}

return $t_1;
}

function exec() {

$collection = getProd();

$i = 0;

foreach ($collection as $prod) {

    $class = ($i % 2 == 0) ? '' : 'class="odd"';
    $t1 = 0;
    if ($t1 = getTier($prod)) {

            $prod = mage::getModel('catalog/product')->load($prod->getId());

            $prod->setPrice($t1);
            $prod->save();
            if ($safe)
                set_time_limit(60);
        }
    }
}

exec(); 
```

**基本上我想处理所有具有等级价格的产品，并将产品的主要价格替换为等级价格。**

该脚本在 12000 个产品上花费了 9 多个小时，所以我猜 SQL 方法会更快，但需要我研究数据库结构。

因此，如果有人有一种很好的方法可以在 PHP/SQL 脚本中进行转换，那就太好了（更多只打印集合查询的东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:18:53.260

如果您只需要一个简单的一次性解决方案来查看查询是什么，您应该能够执行类似`echo $collection->getSelect();`. 集合上的`getSelect`函数将返回一个`Zend_Select`对象。此类具有`__toString`返回当前构建查询的 sql 的函数。

# android - AndEngine gles2 正确的文档

> ID：13837470
> 
> 赞同：1
> 
> 时间：2012-12-12T10:15:26.850
> 
> 标签：android, android-layout, andengine, game-engine, social-gaming

我在哪里可以获得有关 Andengine GLES2 的正确文档，我正在制作一个社交游戏，需要在后台向服务器发送大量请求 AsynTask 似乎不起作用。此外，我在场景之间的类内切换布局时遇到问题。我试过用谷歌搜索它，但它最终在论坛中出现了一些未回答的问题。

也有人可以建议一个更好的 2-D 游戏引擎来制作使用 java 而不是 c 或 c++ 的大型 android 社​​交游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:43:46.213

据我所知，AndEngine GLES2 是 Android 最通用的引擎之一。但当然还有其他的：

*   [Angle](http://code.google.com/p/angle) （java写的2D引擎）
*   [Rokon](http://code.google.com/p/rokon) （更多的物理学，显然是好的文档）
*   [Libgdx](http://code.google.com/p/libgdx/)（基于HTML5的跨平台开发）

但是，除了 AndEngine，我从未测试过其中任何一个。是的，你是对的，在没有任何文档的情况下拥有这么多未知的功能有点烦人（但基本的例子，只展示了它是如何工作的，并没有解释任何东西......）。但是 AndEngine 会定期更新，而且效果很好！

对于您的其他问题，AndEngine 有 2 个主线程：uiThread 和 UpdateThread，因此如果您想启动 AsyncTask，您可能必须在其中一个线程上运行它：

```
 runOnUiThread(new Runnable() {
    @Override
    public void run() {
        new AsyncTaskLoader().execute(callback);
    }
 }); 
```

那么“在场景之间的类内切换布局”呢？在场景之间切换时，我也有问题。详细说明您的问题并添加一些代码，我相信会有人可以提供帮助（并且没有文档，这是唯一的进步方法：）

*   问候克里斯托夫

# mongodb - mongodb连接失败，通过mac端口安装

> ID：13837471
> 
> 赞同：2
> 
> 时间：2012-12-12T10:15:31.653
> 
> 标签：mongodb

这是我尝试运行 mongo 时遇到的错误

```
MongoDB shell version: 2.2.2
connecting to: test
Wed Dec 12 15:51:57 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed 
```

每当我在 shell 上运行 mongod 时，我都会得到这个：

```
Wed Dec 12 15:53:04 [initandlisten] MongoDB starting : pid=763 port=27017 dbpath=/data/db/ 64-bit host=rachitpuri.one97.delhi.net
Wed Dec 12 15:53:04 [initandlisten] 
Wed Dec 12 15:53:04 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Wed Dec 12 15:53:04 [initandlisten] db version v2.2.2, pdfile version 4.5
Wed Dec 12 15:53:04 [initandlisten] git version: nogitversion
Wed Dec 12 15:53:04 [initandlisten] build info: Darwin tensix-slave.macports.org 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64 BOOST_LIB_VERSION=1_49
Wed Dec 12 15:53:04 [initandlisten] options: {}
Wed Dec 12 15:53:04 [initandlisten] journal dir=/data/db/journal
Wed Dec 12 15:53:04 [initandlisten] recover : no journal files present, no recovery needed
Wed Dec 12 15:53:04 [websvr] admin web console waiting for connections on port 28017
Wed Dec 12 15:53:04 [initandlisten] waiting for connections on port 27017 
```

我对 mongod.conf 文件的一些看法是，系统在不同位置存在冲突，但它们都没有 dbpath=/data/db

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T06:51:07.687

mongoDB 有两个部分在这里交互。第一部分是`mongod`服务器进程本身。第二部分是`mongo`外壳。

shell 将连接到服务器进程，然后允许您发出命令、运行查询和所有其他通常与运行 MongoDB 相关的操作。因此，您将需要*两者* `mongod`并同时`mongo`运行。

您可以通过多种方式做到这一点。最简单的方法是打开终端窗口（或 Windows 下的命令提示符）并启动`mongod`进程。然后在*另一个*终端窗口中，启动该`mongo`过程。如果使用所有默认值，这将导致`mongo`进程连接到`mongod`进程并允许您与 MongoDB 交互。

您显示的日志末尾`mongod`表明它已准备好接受连接：

```
Wed Dec 12 15:53:04 [initandlisten] waiting for connections on port 27017 
```

这意味着您可以`mongo`在另一个终端窗口中启动一个进程并连接到端口 27017 上的服务器。该`mongod`进程仍需要运行，否则该`mongo`进程将无任何连接。

在您的操作系统`mongod`的[安装指南](http://docs.mongodb.org/manual/installation/#installation-guides)中有更多关于启动的信息。

[您可以在此处](http://docs.mongodb.org/manual/tutorial/getting-started/)找到有关使用 shell 的更多信息

# javascript - 多个 Bpopup 窗口和模态覆盖问题

> ID：13837477
> 
> 赞同：0
> 
> 时间：2012-12-12T10:15:43.820
> 
> 标签：javascript, jquery, bpopup

我对 JQuery Bpopup 有疑问。当用户已经打开了一个弹出窗口时；第二个也可以打开。这导致了问题：按下退出后，两个弹出窗口都关闭了，但模态覆盖仍然存在。该页面需要刷新才能再次运行。

我想到了两个解决方案：

1.  在打开新弹出窗口之前检查弹出窗口是否已经打开。我找不到正确的代码/检查这个。

2.  修复关闭弹出窗口时导致此奇怪行为的任何原因。

仅供参考：每个弹出窗口都是默认隐藏的 DIV。在这种情况下，DIV ID = popup_message

```
$('#popup_message').bPopup({appendTo:'form',zindex:999,modalClose:false}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T07:11:44.900

我通过将 Bpopup 库更新到最新版本解决了这个问题。我在 0.5

# c# - 使用 C# 以编程方式同步两个数据库

> ID：13837480
> 
> 赞同：3
> 
> 时间：2012-12-12T10:15:49.980
> 
> 标签：c#, database, sql-server-2008, synchronization

我需要更新现有数据或将来自客户端数据库的新数据插入`DB1`到中央数据库中，说`DB2`两者都持有相同的模式并且两个数据库都驻留在同一台机器上。
更新不是双向的。我只想将更改从客户端（`DB1`）反映到服务器（`DB2`）。
客户端数据库（`DB1`）只不过是.的备份数据库（由mdf和ldf文件组成的完整数据库备份）`DB2`。备份数据库（`DB1`）在同步时已经有修改的数据。

**那么我如何以编程方式使用 C# .NET？你能给出任何示例代码吗？**
我用谷歌搜索并看到了 Microsoft Syn Framework，但我不知道如何在 C# 中以编程方式使用它。你能帮我提供示例代码吗？对不起我的英语不好。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:18:53.267

使用下面的数据库镜像概念我提到了以下实现镜像的步骤是步骤

```
Step 1: Create encryption key, certificate and end-points on Principal Instance

/* Execute this against the Principal Instance */
USE MASTER
GO
CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'Password!'
GO
CREATE CERTIFICATE HOST_PRIN_cert
    WITH SUBJECT = 'HOST_PRIN certificate',
    START_DATE = '01/07/2009'
GO
CREATE ENDPOINT End_Mirroring
    STATE = STARTED
    AS TCP (LISTENER_PORT = 5022, LISTENER_IP = ALL)
    FOR DATABASE_MIRRORING
    (
        AUTHENTICATION = CERTIFICATE HOST_PRIN_cert,
        ENCRYPTION = REQUIRED ALGORITHM RC4,
        ROLE = ALL
    )
GO
BACKUP CERTIFICATE HOST_PRIN_cert
    TO FILE = 'D:\certificate\HOST_PRIN_cert.cer'
GO

Step 2: Create encryption key, certificate and end-points on Mirror Instance

/* Execute this against the Mirror Instance */
USE master
GO
CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'Password!'
GO
CREATE CERTIFICATE HOST_MIRR_cert
    WITH SUBJECT = 'HOST_MIRR certificate',
    START_DATE = '01/07/2009'
GO
CREATE ENDPOINT End_Mirroring
    STATE = STARTED
    AS TCP (LISTENER_PORT = 5023, LISTENER_IP = ALL)
    FOR DATABASE_MIRRORING
    (
        AUTHENTICATION = CERTIFICATE HOST_MIRR_cert,
        ENCRYPTION = REQUIRED ALGORITHM RC4,
        ROLE = ALL
    )
GO
BACKUP CERTIFICATE HOST_MIRR_cert 
    TO FILE = 'D:\certificate\HOST_MIRR_cert.cer';
GO

Step 3: Create login, user and associate certificate with user on Principal Instance

/* 
*  Execute this against the Principal Instance. The HOST_MIRR_cert.cer
*  needs to be copied on the Principal Server.
*/
USE MASTER
GO
/*
*  We are creating a SQL Login here. For Windows logins,
*  use the Grant Login instead of Create Login
*/
CREATE LOGIN HOST_MIRR_login WITH PASSWORD = 'Password!'
GO
CREATE USER HOST_MIRR_user FOR LOGIN HOST_MIRR_login
GO
CREATE CERTIFICATE HOST_MIRR_cert
    AUTHORIZATION HOST_MIRR_user
    FROM FILE = 'D:\certificate\HOST_MIRR_cert.cer'
GO
GRANT CONNECT ON ENDPOINT::End_Mirroring TO [HOST_MIRR_login]
GO

Step 4: Create login, user and associate certificate with user on Mirror Instance

/* 
*  Execute this against the Mirror Instance. The HOST_PRIN_cert.cer
*  needs to be copied on the Mirror Server.
*/
USE MASTER
GO
/*
*  We are creating a SQL Login here. For Windows logins, 
*  use the Grant Login instead of Create Login
*/
CREATE LOGIN HOST_PRIN_login WITH PASSWORD = 'Password!'
GO
CREATE USER HOST_PRIN_user FOR LOGIN HOST_PRIN_login
GO
CREATE CERTIFICATE HOST_PRIN_cert
    AUTHORIZATION HOST_PRIN_user
    FROM FILE = 'D:\certificate\HOST_PRIN_cert.cer'
    GO
GRANT CONNECT ON ENDPOINT::End_Mirroring TO [HOST_PRIN_login]
GO

Step 5: Create encryption key, certificate and end-points on Witness Instance

/* Execute this against the Witness Instance */
USE MASTER
GO
CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'Password!'
GO
CREATE CERTIFICATE HOST_WITT_cert
    WITH SUBJECT = 'HOST_WITT certificate',
    START_DATE = '01/07/2009'
GO
CREATE ENDPOINT End_Mirroring
    STATE = STARTED
    AS TCP (LISTENER_PORT = 5024, LISTENER_IP = ALL)
    FOR DATABASE_MIRRORING
    (
        AUTHENTICATION = CERTIFICATE HOST_WITT_cert,
        ENCRYPTION = REQUIRED ALGORITHM RC4,
        ROLE = Witness
    )
GO
BACKUP CERTIFICATE HOST_WITT_cert
    TO FILE = 'D:\certificate\HOST_WITT_cert.cer'
GO

Step 6: Create login, user and associate certificate with user on Principal Instance

/*
*  Execute this against the Principal Instance. The HOST_WITT_cert.cer
*  needs to be copied on the Principal Server.
*/
USE MASTER
GO
/*
*  We are creating a SQL Login here. For Windows logins,
*  use the Grant Login instead of Create Login
*/
CREATE LOGIN HOST_WITT_login WITH PASSWORD = 'Password!'
GO
CREATE USER HOST_WITT_user FOR LOGIN HOST_WITT_login
GO
CREATE CERTIFICATE HOST_WITT_cert
    AUTHORIZATION HOST_WITT_user
    FROM FILE = 'D:\certificate\HOST_WITT_cert.cer'
GO
GRANT CONNECT ON ENDPOINT::End_Mirroring TO [HOST_WITT_login]
GO

Step 7: Create login, user and associate certificate with user on Mirror Instance

/*
*  Execute this against the Mirror Instance. The HOST_WITT_cert.cer
*  needs to be copied on the Mirror Server.
*/
USE MASTER
GO
/*
*  We are creating a SQL Login here. For Windows logins,
*  use the Grant Login instead of Create Login
*/
CREATE LOGIN HOST_WITT_login WITH PASSWORD = 'Password!'
GO
CREATE USER HOST_WITT_user FOR LOGIN HOST_WITT_login
GO
CREATE CERTIFICATE HOST_WITT_cert
    AUTHORIZATION HOST_WITT_user
    FROM FILE = 'D:\certificate\HOST_WITT_cert.cer'
GO
GRANT CONNECT ON ENDPOINT::End_Mirroring TO [HOST_WITT_login]
GO

Step 8: Create login, user and associate certificate with user on Witness Instance

/*
*  Execute this against the Witness Instance. The HOST_PRIN_cert.cer
*  and HOST_MIRR_cert.cer needs to be copied on the Witness Server.
*/
USE MASTER
GO
/*
*  We are creating a SQL Login here. For Windows logins,
*  use the Grant Login instead of Create Login
*/
CREATE LOGIN HOST_PRIN_login WITH PASSWORD = 'Password!'
GO
CREATE USER HOST_PRIN_user FOR LOGIN HOST_PRIN_login
GO
CREATE CERTIFICATE HOST_PRIN_cert
    AUTHORIZATION HOST_PRIN_user
    FROM FILE = 'D:\certificate\HOST_PRIN_cert.cer'
GO
GRANT CONNECT ON ENDPOINT::End_Mirroring TO [HOST_PRIN_login]
GO
/*
*  We are creating a SQL Login here. For Windows logins,
*  use the Grant Login instead of Create Login
*/
CREATE LOGIN HOST_MIRR_login WITH PASSWORD = 'Password!'
GO
CREATE USER HOST_MIRR_user FOR LOGIN HOST_MIRR_login
GO
CREATE CERTIFICATE HOST_MIRR_cert
AUTHORIZATION HOST_MIRR_user
FROM FILE = 'D:\certificate\HOST_MIRR_cert.cer'
GO
GRANT CONNECT ON ENDPOINT::End_Mirroring TO [HOST_MIRR_login]
GO

Step 9: Create the Mirrored Database on the Mirror Server using backups from the Principal Server

/*
*  Execute this against the Principal Instance.
*/
USE MASTER
GO
BACKUP DATABASE MirrorDB
    TO DISK = 'D:\Backups\MirrorDB_FullBackup.bak'
GO
BACKUP LOG MirrorDB
    TO DISK = 'D:\Backups\MirrorDB_LogBackup.trn'
GO
/*
*  Copy MirrorDB_FullBackup.bak and MirrorDB_LogBackup.trn to the
*  Mirror Server.
*  Execute this against the Mirror Instance.
*/
USE MASTER
GO
RESTORE DATABASE MirrorDB
    FROM DISK = 'D:\Backups\MirrorDB_FullBackup.bak'
    WITH NORECOVERY
GO
RESTORE LOG MirrorDB
    FROM DISK = 'D:\Backups\MirrorDB_LogBackup.trn'
    WITH NORECOVERY
GO

Step 10: Setup Mirroring

/*
*  Execute this against the Mirror Instance.
*/
ALTER DATABASE MirrorDB
    SET PARTNER = 'TCP://<<your principal server name here>>:5022'
GO
/*
*  Execute this against the Principal Instance.
*/
ALTER DATABASE MirrorDB
    SET PARTNER = 'TCP://<<your mirror server name here>>:5023'
GO
ALTER DATABASE MirrorDB
    SET WITNESS = 'TCP://<<your witness server name here>>:5024'
GO

At this point your Database Mirroring should be up and running. You can use the Database Mirroring Monitor to verify the setup as well as to monitor the Synchronization status. 
```

使用下面的链接清楚地理解 [http://blogs.msdn.com/b/suhde/archive/2009/07/13/step-by-step-guide-to-configure-database-mirroring-between-sql-server-instances -in-a-workgroup.aspx](http://blogs.msdn.com/b/suhde/archive/2009/07/13/step-by-step-guide-to-configure-database-mirroring-between-sql-server-instances-in-a-workgroup.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:19:01.580

这应该向您展示如何在 Sync Framework 中执行此操作：[教程：同步 SQL Server 和 SQL Express](http://msdn.microsoft.com/en-us/library/ff928700.aspx)

但我并不完全说服您为什么必须以编程方式或单击按钮来完成此操作。

根据您可以承受多少延迟/延迟来使更改对其他数据库产生影响以及您需要它的用途，您可以查看其他选项，例如镜像、复制、触发器等...

# android-webview - 加载时关闭包含 WebView 的活动时启动 Android 浏览器

> ID：13837485
> 
> 赞同：1
> 
> 时间：2012-12-12T10:16:06.563
> 
> 标签：android-webview

我有一个具有 webview 控件的活动，当请求的 url 正在加载时，我通过按后退按钮关闭此活动并返回上一个活动，链接或请求响应在设备默认浏览器中打开。在完成包含 WebView 的活动之前，我在 WebView 控件上调用了 stopLoading 方法。有关如何停止打开浏览器的任何帮助？

# ruby-on-rails - 用于导入特殊荷兰语字符的 Rails 2 应用程序中的电子表格 gem 编码

> ID：13837490
> 
> 赞同：0
> 
> 时间：2012-12-12T10:16:17.357
> 
> 标签：ruby-on-rails, encoding, utf-8, spreadsheet

我正在研究 Rails 2 应用程序，我使用了电子表格 gem 并使用 UTF-8 编码进行导入。

我的代码如下。

```
Spreadsheet.client_encoding = 'UTF-8'     
xls = Spreadsheet.open file.path 
```

但问题是它不能很好地导入特殊的荷兰语字符。
请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:36:53.933

如果这来自 Windows，`.encode("utf-8", "iso-8859-1")`那么在字符串上使用可能会起作用（我在通过 ODBC 读取 Microsoft SQL Server 数据以获取德语字符时使用了它）。

否则，可能会发布一些详细信息和数据样本，您实际期望的内容以及它在输出中的实际外观。

# php - 使用 GROUP BY 的 SQL Server JOIN 查询

> ID：13837497
> 
> 赞同：1
> 
> 时间：2012-12-12T10:16:35.543
> 
> 标签：php, sql, join, group-by

我有这个查询，我想检索结果，只按 分组`Banksphere.servicio_id`，不做任何事情，`sum(XXX)`因为每个`Banksphere.servicio_id`都有自己的值，用`hora_id`,`peticion_id`和`valor`...

所以结果一定是这样的......

```
[servicio_id 1]
(hora_id 1) (hora_id 2) (hora_id 3)   ... 
(peticion_id 1) (peticion_id 2)    ...
(media 1) (media 1) ...    
(valor 1) (valor 1) ...    
...
[servicio_id 2]
(hora_id 1)    
(peticion_id 1) (peticion_id 2) ...    
(media 2)    
(valor 2)    
... 
```

到目前为止我的查询 -

```
$sqlQuery = sqlsrv_query($conn, "
    SELECT
        Umbrales.minimo as media,
        uok.minimo as media_ok,
        Banksphere.id as valor_id,
        Umbrales.id as umbral_id,
        Banksphere.servicio_id,
        Banksphere.peticion_id,
        Banksphere.hora_id,
        Banksphere.valor
    FROM
        Banksphere
    LEFT JOIN
        Umbrales
    ON Banksphere.hora_id = Umbrales.hora_id 
    AND Banksphere.dia_id = Umbrales.dia_id 
    AND Banksphere.servicio_id = Umbrales.servicio_id
    AND Banksphere.entidad_id = Umbrales.entidad_id 
    AND Banksphere.peticion_id = Umbrales.peticion_id
    LEFT JOIN
        Umbrales uok
    ON Banksphere.hora_id = uok.hora_id 
    AND Banksphere.dia_id = uok.dia_id 
    AND Banksphere.servicio_id = uok.servicio_id
    AND Banksphere.entidad_id = uok.entidad_id 
    AND uok.peticion_id = 0
    WHERE
        Banksphere.entidad_id = '$entidad_id'
    AND
        Banksphere.reconocido = 0
    AND
        Banksphere.fecha = '$fecha'
    ORDER BY
        Banksphere.servicio_id ASC,
        Banksphere.hora_id DESC,
        Banksphere.peticion_id ASC
"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:07:32.103

小故事：使用 ORDER BY，而不是 GROUP BY；使用 MySQL；或使用 PostgreSQL 并密切注意您的功能依赖关系。（我不确定 PostgreSQL 是否适用于您的情况。）

如果 Banksphere.servicio_id 在您的结果集中是唯一的，请使用 ORDER BY 而不是使用 GROUP BY。如果 Banksphere.servicio_id 在此上下文中是唯一的，则使用 ORDER BY 的结果集是确定的，但使用 GROUP BY 的结果集不是。

首先，看这个简单的表格。

```
create table test (
  column_1 integer,
  column_2 integer,
  column_3 integer 
  );

insert into test values
(1, 2, 3),
(1, 4, 5),
(1, 6, 7),
(1, 8, 9); 
```

按列分组会为该列中的每个值返回一行。

```
select column_1, column_2, column_3
from test
group by column_1 
```

此查询应返回一行。当然，“column_1”中的值将是 1。“column_2”和“column_3”会出现什么值？

你说不出来。事实上，这个查询在任何符合标准的 SQL dbms 中都会给你一个语法错误，因为你没有告诉它如何处理“column_2”和“column_3”。在兼容的 SQL dbms 中，“column_2”和“column_3”*必须*是 GROUP BY 的一部分或用于聚合函数。

MySQL*将*执行这种查询而不会出错，但[返回不确定的结果](http://dev.mysql.com/doc/refman/5.6/en/group-by-extensions.html)。“服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。” MySQL 将此称为功能。我称之为“按设计破坏”——*不确定性*不是 SQL dbms 中的一个可防御特性。

在稍微不同的条件下，兼容的 dbms*可以*返回非聚合列，而不会将它们显式包含在 GROUP BY 中。例如，PostgreSQL 会让你[GROUP BY the primary key](http://www.postgresql.org/docs/9.1/static/sql-select.html)。

> 当 GROUP BY 存在时，SELECT 列表表达式引用未分组列是无效的，除非在聚合函数中或未**分组列在功能上依赖于分组列**，否则将返回多个可能的值未分组的列。如果分组列（或其子集）是包含未分组列的表的主键，则存在功能依赖性。[重点补充]

因此，在 PostgreSQL 9.1+ 中，您可以查询具有这样主键的表。

```
create table test (
  column_1 integer,
  column_2 integer,
  column_3 integer,
  column_4 integer,
  primary key (column_1, column_2)
  );

insert into test values
(1, 1, 2, 3),
(1, 2, 4, 5),
(1, 3, 6, 7),
(1, 4, 8, 9);

select column_1, column_2, column_3, column_4
from test
group by column_1, column_2
order by column_1, column_2

COLUMN_1  COLUMN_2  COLUMN_3  COLUMN_4
--
1         1         2         3
1         2         4         5
1         3         6         7
1         4         8         9 
```

“column_3”和“column_4”列不属于 GROUP BY，也不属于任何聚合函数。但是 GROUP BY 中的列和选择列表中的非聚合列之间存在函数依赖关系，因此结果是确定的。

据我所知，PostgreSQL 是目前唯一实现这部分 SQL 标准的 SQL dbms。（该标准比 PostgreSQL 走得更远。）

# java - 架构位置偶数个 URI 的编组

> ID：13837498
> 
> 赞同：1
> 
> 时间：2012-12-12T10:16:36.667
> 
> 标签：java, xml, jaxb, xsd

我正在使用[以下模式](http://graphml.graphdrawing.org/xmlns/1.1/graphml-structure.xsd)来解析[GraphML XML](http://graphml.graphdrawing.org/)文件。

我设法从模式中绑定 java 类（使用 xjc），并且还解组了一些示例 XML 文件。

不幸的是，当我整理 XML 时，我收到以下错误：

> SchemaLocation: schemaLocation value = 'Graphml.xsd' 必须有偶数个 URI

据我所知，xsd 中唯一使用的 schemaLocation 如下：

```
<xs:import namespace="http://www.w3.org/1999/xlink"                
  schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/xlink.xsd">
  ... 
```

但我看不出它有什么问题。

有人可以提出什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:10:05.603

有两个部分，`schemaLocation`第一个是名称空间，第二个后面是空格是位置。类似以下内容将是有效的。

```
<foo 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0 http://graphml.graphdrawing.org/xmlns/1.0/xlink.xsd">
    ...
</foo> 
```

架构位置可以设置在`Marshaller`. 您是否可能正在执行以下操作？

```
Marshaller marshaller = jaxbContext.createMarshaller();
marshaller.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, "Graphml.xsd"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:35:53.170

您显示的模式片段在语法上是正确的；你是对的，在那里没有发现任何问题。错误消息似乎也不是在谈论架构`http://graphml.graphdrawing.org/xmlns/1.1/graphml-structure.xsd`——它是在谈论名为 GraphML.xsd 的东西。

没有看到 XML 实例很难确定，但也许在文档实例中存在表单的属性值规范，`xsi:schemaLocation = "GraphML.xsd"`并且验证器抱怨值“GraphML.xsd”需要改为包含偶数个的值URI：命名空间名称、模式位置对（如 Blaise Doughan 的回答中所述）。

# mysql - MySql - 使用表而不是枚举...如何在必须手动插入的值上创建外键？

> ID：13837503
> 
> 赞同：0
> 
> 时间：2012-12-12T10:17:09.930
> 
> 标签：mysql, database-design, foreign-key-relationship, enumerable

如果员工在部门“红色”中，我想创建一个子类别。由于我为此使用表而不是枚举，因此我必须手动插入静态部门字段值。如何使部门 red 成为引用表 red_object 的外键？或者有没有更好的设计来拥有这个子类别？

[http://sqlfiddle.com/#!2/83a2a](http://sqlfiddle.com/#!2/83a2a)

```
create table department(
  deptID int auto_increment primary key,
  deptName varchar(30)
  ) ENGINE = INNODB;

create table red_object(
  objectID int auto_increment primary key,
  objectName varchar(30)
  ) ENGINE = INNODB;

create table employees(
  userId int auto_increment not null primary key,
  firstName varchar(20) not null,
  lastName varchar(20) not null,
  phone tinyint unsigned,
  fax tinyint unsigned,
  position varchar(30),
  jpeg char(50),
  deptID int,
  unique(firstName, LastName, jpeg),
  foreign key (deptID) references department(deptID)
  ) ENGINE = INNODB;

insert into department (deptName) 
  values ('red'), ('white'), ('blue'), ('black');

insert into red_object (objectName) 
  values ('red_square'), ('red_circle'), ('red_octagon');

insert into employees (firstName, lastName) values ('jane' , 'doe');

insert into employees (firstName, lastname, deptID) values ('john', 'Doe', '3'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:12:43.967

发现我无法将外键添加到我正在尝试做的“值”中。

# mysql - mysql很慢而且崩溃！需要优化建议

> ID：13837505
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:17:19.120
> 
> 标签：mysql, database, optimization, database-performance

几个月前我推出了一个网站，随着并发用户数量的增加，我注意到我的服务器变慢了，有时 mysql 导致服务器崩溃（大约 7000 个并发用户）！

我有一个强大的服务器，有 32gb 的内存和一个专用于 1 个网站的至强四核 CPU，而且编程简洁轻巧，在 DB 端没有什么特别的......只是一些简单的表，没有触发器，没有复杂的关系.

你们能建议我能做些什么来提高mysql性能或用它来代替它吗？我希望你有一些相同的经验和案例研究。

*更新*降低性能的表之一是我收集和比较用户 IP 的地方，因此如果 IP 是新的，我会在此表上添加新记录并存储用户 IP ...我觉得我做错了.. .所以我对建设性的批评持开放态度:-D考虑到我在其中插入了很多（但不经常因为我在其中使用搜索......），在这个表中添加索引是否更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:31:05.413

这个问题有点模糊，因为这是您遇到的一般问题，但是您可以采取一些步骤来确定问题的根本原因。

**配置硬件：**

检查您的 CPU、内存和磁盘 io 统计信息以消除硬件问题。尤其是高磁盘 IO 会导致严重的性能问题。有几篇关于如何分析硬件的文章。去谷歌搜索你的平台。

**分析 SQL 查询：**

在 MySQL 服务器上启用慢查询日志检查此链接以获取更多信息：[http](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html) ://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html 。

确定运行时间最长的查询并对这些查询执行 EXPLAIN 语句。如果您发现大多数速度较慢的查询是 SELECT/read 类型语句，则您可能缺少索引。如果您发现 UPDATE/INSERT/DELETE(writes) 导致了问题，则可能是索引过多，或者您正面临磁盘上的 IO 瓶颈。

*请记住这条规则：*添加更多索引会减慢插入/删除/更新速度并加快选择速度。

底线是您需要对服务器和数据库进行概要分析，以确定您需要在哪里进行更改以提高性能和可伸缩性。一旦确定了问题区域，您就可以采取更具体的措施。

如果您需要根据您的发现优化您的服务器，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:19:18.777

将索引添加到数据库的表中。如果表是基于 id 的，则使该列成为记录的唯一索引。这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:22:24.667

看看[解释](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)。它会告诉您需要哪些索引。

# c# - WCF Web 服务身份验证 - 推荐方法？

> ID：13837509
> 
> 赞同：0
> 
> 时间：2012-12-12T10:17:34.157
> 
> 标签：c#, wcf

我正在开发我的第一个 WCF Web 服务，它应该与另外两个系统进行交互。我希望实现身份验证，但我不确定我有哪些选项，也不确定应该选择哪一个。

它仅用于机器对机器的通信，因此形式应该是不可能的。鉴于这种情况，推荐的身份验证方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:26:09.350

我认为基于证书的身份验证是这里的方法。由于机器对机器的通信不涉及用户输入，我想。

欲了解更多信息：http: [//msdn.microsoft.com/en-us/library/ff648360.aspx](http://msdn.microsoft.com/en-us/library/ff648360.aspx)

# java - json解析器在从json格式的Web服务获取时出现异常

> ID：13837514
> 
> 赞同：1
> 
> 时间：2012-12-12T10:17:47.270
> 
> 标签：java, android

我很困惑为什么会出现这些错误，实际上我创建的 GAE 应用程序中的 Web 服务返回的 JSON 格式应该是完全相同的。

你可以检查这个网址：

```
http://dashproapp.appspot.com/rest/user 
```

它正在返回 json 格式。

这是使用结果的代码：

```
JSONParser jParser = new JSONParser();
    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url_path);

    try {
        // Getting Array of users
        userlist = json.getJSONArray(TAG_USER);

        // looping through All USERS obtain from results
        for(int i = 0; i < userlist.length(); i++){
            JSONObject c = userlist.getJSONObject(i);

            // Storing each json item in variable
            String address = c.getString(TAG_ADDRESS);              
            String id = c.getString(TAG_ID);
            String age = c.getString(TAG_AGE);
            String fname = c.getString(TAG_FNAME);
            String lname = c.getString(TAG_LNAME);
            String username = c.getString(TAG_USERNAME);
            String password = c.getString(TAG_PASSWORD); 
```

这是错误：

```
Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject 
```

日志猫输出：

```
12-13 09:20:18.632: I/ApplicationPackageManager(32494): cscCountry is not German : XTC
12-13 09:20:32.289: D/dalvikvm(32494): GC_CONCURRENT freed 107K, 45% free 3155K/5639K, external 499K/517K, paused 4ms+15ms
12-13 09:20:32.632: E/JSON Parser(32494): Error parsing data org.json.JSONException: Value <html><body><h1>Server of type java.lang.String cannot be converted to JSONObject
12-13 09:20:32.640: D/AndroidRuntime(32494): Shutting down VM
12-13 09:20:32.640: W/dalvikvm(32494): threadid=1: thread exiting with uncaught exception (group=0x40018578)
12-13 09:20:32.640: E/AndroidRuntime(32494): FATAL EXCEPTION: main
12-13 09:20:32.640: E/AndroidRuntime(32494): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pruce.aps.estateportalconsume/com.pruce.aps.estateportalconsume.MainActivity}: java.lang.NullPointerException
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.os.Looper.loop(Looper.java:130)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at java.lang.reflect.Method.invokeNative(Native Method)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at java.lang.reflect.Method.invoke(Method.java:507)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at dalvik.system.NativeStart.main(Native Method)
12-13 09:20:32.640: E/AndroidRuntime(32494): Caused by: java.lang.NullPointerException
12-13 09:20:32.640: E/AndroidRuntime(32494):    at    com.pruce.aps.estateportalconsume.MainActivity.onCreate(MainActivity.java:54)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-13 09:20:32.640: E/AndroidRuntime(32494):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
12-13 09:20:32.640: E/AndroidRuntime(32494):    
... 11 more 
```

我使用在这里找到的教程[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/) 在我的 android 应用程序中使用 JSON。我正在尝试使用这种架构，即我将使用 GAE 作为我的服务器（接受数据，以 json 格式返回数据）。

这里是整个主要课程

```
private static String url_path = "http://dashproapp.appspot.com/rest/user/";
    private static final String TAG_USER = "user_list";
    private static final String TAG_ID = "id"; 
    private static String TAG_FNAME = "firstname";
    private static String TAG_LNAME = "lastname";
    private static String TAG_AGE = "age";
    private static String TAG_ADDRESS = "address";
    private static String TAG_USERNAME = "username";
    private static String TAG_PASSWORD = "password";

    //store in array first
    JSONArray userlist = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> userList = new ArrayList<HashMap<String, String>>();

        // instantiate json for parsing list obtain from above
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url_path);
        //ArrayList<JSONObject> arrays = new ArrayList<JSONObject>();

        try {
            // Getting Array of users
            userlist = json.getJSONArray(TAG_USER);

            // looping through All USERS obtain from results
            for(int i = 0; i < userlist.length(); i++){
                JSONObject c = userlist.getJSONObject(i);

                //arrays.add(c);                            
                // Storing each json item in variable
                String address = c.getString(TAG_ADDRESS);              
                String id = c.getString(TAG_ID);
                String age = c.getString(TAG_AGE);
                String fname = c.getString(TAG_FNAME);
                String lname = c.getString(TAG_LNAME);
                String username = c.getString(TAG_USERNAME);
                String password = c.getString(TAG_PASSWORD);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ADDRESS, address);
                map.put(TAG_ID, id);
                map.put(TAG_AGE, age);
                map.put(TAG_FNAME, fname);
                map.put(TAG_LNAME, lname);
                map.put(TAG_USERNAME, username);
                map.put(TAG_PASSWORD, password);

                // adding HashList to ArrayList
                userList.add(map);
            }
            //JSONObject[] jsons = new JSONObject[arrays.size()];
            //arrays.toArray(jsons);
            //System.out.print(arrays.get(1));
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

# algorithm - 某些排序可以是 P、NP 和 NP-Complete 吗？

> ID：13837518
> 
> 赞同：5
> 
> 时间：2012-12-12T10:18:06.737
> 
> 标签：algorithm, sorting, np-complete, np, p-np

我很困惑，这是我阅读后的想法：

P 在 NP 中，而 NP 在 NP-Complete 中。因此，所有 P 都可能是 NP 和 NP-Complete？

这是否意味着存在可能是 NP 和 NP-Complete 的排序算法？

希望这听起来不会太愚蠢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T11:04:08.263

首先要做的事情：

> P 在 NP 中；NP是NP-Complete。因此，所有 P 都可能在 NP 和 NP-Complete 中？

这是一个很好的声明，因为您所说的暗示*P=NP*。没有人能够证明这一点或其他。所以这是事态：

![在此处输入图像描述](../Images/76b15288da4465cd4b4e2edca70a3e60.png)

大多数人相信P!=NP。引用[维基百科](http://en.wikipedia.org/wiki/P_versus_NP_problem)：

> 在 2002 年对 100 名研究人员的民意调查中，61 人认为答案是否定的，9 人认为答案是肯定的，22 人不确定；8 认为这个问题可能独立于当前公认的公理，因此不可能证明或证伪。

一个简单的理解方法是：假设你得到了某个问题的解决方案。如果你能在多项式时间内验证解是否正确，那么问题就是NP。显然，可以在多项式时间内 (P) 解决的每个问题都在 NP 中（您可以自己解决问题并在 P 时间内与正确答案进行比较）。

现在我们有几个问题可以在多项式时间内验证，但不能同时解决。我们不确定是否**永远不会**有多项式时间解，或者我们现在还不能弄清楚。

* * *

***排序数字***

*   给定一个数字列表，您可以验证该列表是否在多项式时间内排序，因此问题显然是**NP**。

*   有已知的算法可以在多项式时间内对数字列表进行排序。（冒泡排序 O(n^2) 等）。因此问题是**P**。

希望这可以帮助。

考虑阅读[此博客](http://rjlipton.wordpress.com/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T10:30:25.077

P、NP、NP-hard 和 NP-complete 是问题的[复杂性类别](http://en.wikipedia.org/wiki/Complexity_class)；它们描述了一个问题，而不是算法。

# php - PDO 查询的结果未显示

> ID：13837520
> 
> 赞同：1
> 
> 时间：2012-12-12T10:18:33.850
> 
> 标签：php, zend-framework, pdo

我正在尝试进行 PDO 查询以显示数据。这是我到目前为止所做的：

在我的模型/pdo 中，我用这个创建了一个类：

```
<?php

class VengeanceUsers {

    public static function getNumbersOfregistered()
    {
      $connexion = new PDO("mysql:host=localhost ;dbname=databasetest", 'root', 'passe'); // connexion à la BDD

      $var_dump($connexion);
      exit();
      $resultats=$connexion->query("SELECT COUNT (*) FROM ope_tartine_nl "); // on va chercher tous les membres de la table qu'on trie par ordre croissant
      return $resultats;
    }

}

?> 
```

**在我的控制器中：**

```
$this->view->nb_users = VengeanceUsers::getNumbersOfregistered(); 
```

**在我看来：**

```
Nombre d'inscrits : <?php echo $this->nb_users; ?><br/> 
```

我没有显示任何内容...有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:22:38.620

```
 $resultats=$connexion->query("SELECT COUNT (*) FROM ope_tartine_nl "); // on va chercher tous les membres de la table qu'on trie par ordre croissant 
```

这只会为您提供查询的结果对象。

您必须实际从结果中获取行。

```
 $resultats=$connexion->query("SELECT COUNT (*) FROM ope_tartine_nl "); // on va chercher tous les membres de la table qu'on trie par ordre croissant
  $numRows = $resultats->fetchColumn();
  return $numRows; 
```

这应该解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:24:54.417

1.  你忘了注释掉`exit();`。
2.  在`$var_dump($connexion);`您需要`$`在开始时删除。
3.  您需要从语句中获取结果。

对于#3，您可以使用：

```
$sth = $connexion->query("SELECT COUNT (*) FROM ope_tartine_nl "); // get statement
$resultats = $sth->fetchColumn(); // get data
return $resultats; 
```

# asp.net-mvc-4 - MVC4 中的下拉列表

> ID：13837521
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:18:33.133
> 
> 标签：asp.net-mvc-4

我需要在我的页面上建立下拉列表。我的目的是根据所选货币更新我的页面上的价格，因此如果用户在 DDL 中选择 $，这会将页面上的价格更新为 $，如果用户选择 £，则会以 £ 显示价格。我的产品价格（以美元和英镑为单位）存储在数据库中。

有什么建议可以去哪里吗？

干杯伙计们

* * *

感谢@drywoods 的回复到目前为止我得到了这个：在索引文件中

```
@Html.DropDownList("Currency", 
                   new SelectList(ViewBag.CurrencyList, "Key", "Value"), 
                   new { Class = "ddlStyle" }
                   ) 
```

* * *

和控制器：

```
ViewBag.CurrencyList = new List<KeyValuePair<string, string>> 
                                  { 
                                      new KeyValuePair<string, string>("pound", "£")
                                      , new KeyValuePair<string, string>("dollar", "$")
                                      , new KeyValuePair<string, string>("euro", "€")
                                  };
            GetLoadedMVC.Models.CurrencyModel model = new GetLoadedMVC.Models.CurrencyModel();
            return View(); 
```

所以我在我的页面上得到了 ddl，但它还没有做任何事情。然后去哪儿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:49:37.737

好吧，对我来说这是一个简单的问题。让我们把它分解成小部分：

1 - 您需要一个组合框或其他东西让用户更改货币：

```
$("#CurrencyId").change( function() {..... } 
```

例如，在此 Jquery 代码中，您可以发布一个表单，其中您有一个接收 CurrencyId 的操作（控制器）。

2- 在此操作（控制器）中，您可以将此值保存在 cookie 或会话或用户数据库条目中。

3- 注意：“第一次”这个值需要用默认值初始化：例如：id 2 表示 €（欧元）。

4-现在，当您查询数据库以检索具有某些值的“对象”时。为了简化操作：在每个条目中保持相同的货币，并写下该条目中使用的货币：示例：

Name[TV LCD Philips]、Cost[100]、CurrencyId[1] 其中 1 表示 $

5 - 您需要一种可以将一种货币的金额转换为另一种货币的服务/方法。

6 - 现在，在控制器或服务或某个地方，您需要调用此服务/转换列表中每个元素的方法。

你明白吗？

# yii - 如何在 yiibooster gridview 中编辑标题？

> ID：13837525
> 
> 赞同：12
> 
> 时间：2012-12-12T10:18:42.927
> 
> 标签：yii, cgridview, yii-booster

我开始使用 yiibooster 在 gridview 简单添加上进行就地编辑

```
$columns[] = array(
            'name'  => $field->name,
            'value' => array($this, 'cellValue'),
            'class' => 'bootstrap.widgets.TbJEditableColumn',
            'jEditableOptions' => array(
                'type' => 'text',
                // very important to get the attribute to update on the server!
                'submitdata' => array('field_id'=>$field->id),
                'width' => '100%',
                'placeholder' => Yii::t('sms', 'click for edit'),
            )
        ); 
```

如何以相同的方式编辑表头？

**编辑：** 我的解决方案。这个对我有用。 [http://pastebin.com/0NzHMgEr](http://pastebin.com/0NzHMgEr)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T06:08:28.677

@topher，这是我的解决方案

```
<?php
/**
* XColumnWithDeleteLink
*
* Allows to delete column in CGridView column.
*
* @author Arthur Skobara <skobara.arthur@gmail.com>
* @version 0.1
*/
Yii::import('bootstrap.widgets.TbJEditableColumn');

class XColumnWithDeleteLink extends TbJEditableColumn
{
        public $editableCssClass = 'editable-header';
        public $canBeDeleteCssClass = 'can-be-delete';

        public $deleteURL = '/phone/deletecolumn';

        protected $defaultOptions = array(
                'method' => 'POST', // method to use to send edited content (POST or PUT)
                'callback' => null, // Function to run after submitting edited content
                'name' => 'value', // POST parameter name of edited content,
                'id' => null, // POST parameter name of edited div id (if null will be filled with htmlOptions['id'] or $this->id)
                'submitdata' => null, // Extra parameters to send when submitting edited content
                'type' => 'text', // text, textarea or select (or any 3rd party input type)
                'rows' => null, // number of rows if using textarea
                'cols' => null, // number of cols if using textarea
                'height' => '15px', // 'auto', 'none' or height in pixels,
                'width' => '70%', // 'auto', 'none' or width in pixels
                'loadurl' => null, // URL to fetch input content before editing
                'loadtype' => 'GET', // Request type for load url. Should be GET or POST.
                'loadtext' => null, //  Text to display while loading external content.
                'loaddata' => null, // Extra parameters to pass when fetching content before editing.
                'data' => null, // Or content given as paramameter. String or function.
                'indicator' => null, // indicator html to show when saving (will default to assets/img/loading.gif if null)
                'tooltip' => null, // optional tooltip text via title attribute
                'event' => 'click', // jQuery event such as 'click' of 'dblclick'
                'submit' => null, // submit button value, empty means no button
                'cancel' => null, // cancel button value, empty means no button
                'cssclass' => null, // CSS class to apply to input form. 'inherit' to copy from parent.
                'style' => null, //  Style to apply to input form 'inherit' to copy from parent.
                'select' => false, // true or false, when true text is highlighted
                'placeholder' => null, // Placeholder text or html to insert when element is empty.
                'onblur' => null, // 'cancel', 'submit', 'ignore' or function
                'onsubmit' => null, // function(settings, original) { ... } called before submit
                'onreset' => null, // function(settings, original) { ... } called before reset
                'onerror' => null, // function(settings, original, xhr) { ... } called on error
                'ajaxoptions' => null, // jQuery Ajax options. See docs.jquery.com.
                'cancelAttrs' => array('class' => 'btn'), /* custom property */
                'submitAttrs' => array('class' => 'btn'), /* custom property */
                //'mask' => '99/99/9999', /* configuration setting for masked plugin */
                //'dateformat' => 'yyyy/mm/dd', /* you can use this configuration when using the date plugin */
                //'colorformat' => 'rgb' /*  rgb | hex | rgba you can use this parameter when using color picker plugin @see www.eyecon.ro/bootstrap-colorpicker/ */

        );

        public function init()
        {
                parent::init();

                if (!$this->saveURL)
                {
                        $this->saveURL = Yii::app()->getRequest()->requestUri;
                }
                $this->registerCustomClientScript();
        }

        public function renderHeaderCell()
        {
                $this->headerHtmlOptions['id']=$this->id;
                $this->headerHtmlOptions['data-column-name']=$this->name;
                $this->headerHtmlOptions['class']=$this->canBeDeleteCssClass;
                echo CHtml::openTag('th',$this->headerHtmlOptions);
                $this->renderHeaderCellContent();
                echo "</th>";
        }

        protected function renderHeaderCellContent()
        {
                $sort = $this->grid->dataProvider->getSort();
                $label = isset($this->header) ? $this->header : $sort->resolveLabel($this->name);

                echo "<span class=\"{$this->editableCssClass}\">". $label .'</span><i class="right icon-trash"></i>';
        }

        public function registerCustomClientScript()
        {
                $cs = Yii::app()->getClientScript();
                $assetsUrl = Yii::app()->bootstrap->getAssetsUrl();
                $cs->registerScriptFile($assetsUrl . '/js/jquery.jeditable.js', CClientScript::POS_END);

                $deleteURL = Yii::app()->createUrl($this->deleteURL);

                $options = CJavaScript::encode(array_filter($this->defaultOptions));
                $cs->registerScript(__CLASS__ . '#' . $this->id, "
                        jQuery(document).on('{$this->event}','.{$this->editableCssClass}', function(){
                                var self = jQuery(this);
                                var name = self.parent().attr('data-column-name');
                                var oldValue = self.html();
                                var options = jQuery.extend(true, {$options}, {});
                                self.editable(function(value, settings) {
                                        selectedId = $(this).attr('id');
                                        $.ajax({
                                                url:'{$this->saveURL}',
                                                data:{
                                                        name:name,
                                                        oldvalue:oldValue,
                                                        editheader:'{$this->id}',
                                                        value:value,
                                                },
                                                type:'post',
                                                success: function(data) {
                                                        self.attr('data-column-name', data);
                                                        var label = $('.inline-input-item label[name=\"'+oldValue+'\"]');
                                                        label.attr('name', value);
                                                        label.html(value);
                                                },
                                        });
                                        return value;
                                }, options);
                        });
                ");

                $cs->registerScript(__CLASS__ . '#column-delete', "
                        $(document).on('click', '.icon-trash', function() {
                                var self = this;
                                var name = $(this).parent().attr('data-column-name');
                                $.ajax({
                                        url:'{$deleteURL}',
                                        data:{name:name},
                                        type:'post',
                                        success: function(data) {
                                                $.fn.yiiGridView.update('{$this->grid->id}');
                                                $('.inline-input-item').each(function(){
                                                        var self = $(this);
                                                        if (self.find('label').attr('name') == name) {
                                                                self.remove();
                                                        }
                                                });
                                        }
                                });
                        });
                ");
        }
} 
```

# c# - 如何在水晶报表中访问装订线

> ID：13837529
> 
> 赞同：0
> 
> 时间：2012-12-12T10:18:49.823
> 
> 标签：c#, winforms, crystal-reports, crystal-reports-server, gutter

我需要更改水晶报告中各部分的宽度。我知道，在 Crystal Reports 中，右键单击装订线并选择“显示短节名称”。但我不知道，排水沟在哪里？请告诉我，那在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:30:42.473

排水沟实际上是显示部分名称的区域。或者，您可以在晶体选项窗口中的短节名称和长节名称之间切换。

# scala - 使用 Scala ARM 库读取简单文件

> ID：13837533
> 
> 赞同：6
> 
> 时间：2012-12-12T10:19:00.163
> 
> 标签：scala

我正在使用[ARM 库](https://github.com/jsuereth/scala-arm)将资源文件读入字符串。我正在使用的代码是这样的：

```
def readResource(reosurceName: String): String = {
  val res = for (writer <- managed(new StringWriter);
                 is     <- managed(this.getClass.getClassLoader.getResourceAsStream(resourceName))) yield {
    IOUtils.copy(is, writer)
    writer.toString
  }
  res.acquireAndGet(identity)
} 
```

我觉得这有点奇怪，尤其是最后一部分`acquireAndGet`of `identity`。有没有更好的办法 ？

一般的问题是，你将如何使用这种风格来做这样的事情

```
val x: String=
  for (res1 <- managed(...);
       res2 <- managed(...);
       ...
       resn <- managed) yield {
      f(res1, res2, ..., resn)
  } 
```

行为是，如果 for 理解中的操作失败，我希望将异常传播到方法之外，并且应该关闭资源。

我看到 a 上的地图`ManagedResource`返回 an ，我可以使用该方法`ExtractableManagedResource`从中提取结果。只返回一个。是否有一个原因 ？`opt``flatMap``ManagedResource`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:23:05.217

我也觉得这很奇怪，`map`应该`flatMap`以稍微不同的方式表现。
也许映射操作提供了更多的自由来暴露通过 flatMap 无法获得的简化结果。

无论如何，您可以按如下方式构造代码以获得看起来更吸引人的东西

```
def readResource(resourceName: String): Option[String] = {
  val managedWriter = {
      managed(new StringWriter) and
      managed(this.getClass.getClassLoader.getResourceAsStream(resourceName))
    } map { case (writer, is) => 
        IOUtils.copy(is, writer)
        writer.toString
    }
  }
  managedWriter.opt
} 
```

*警告：代码未经测试*

# xaml - 在c#/xaml中自定义settingflyout（Callisto），如何在按下settingflyout的顶部后退按钮时不显示默认设置窗格？

> ID：13837535
> 
> 赞同：1
> 
> 时间：2012-12-12T10:19:05.143
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml

嗨，我正在以这种方式在我的 Windows 8 Metro 应用程序中使用 Callisto 中的设置飞出：-

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            SettingsPane.GetForCurrentView().CommandsRequested += MainPage_CommandsRequested;
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            SettingsPane.Show();

        }

        void MainPage_CommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
        {
            SettingsCommand storage = new SettingsCommand("SettingsW", "Settings Wide", (x) =>
            {
                SettingsFlyout settings = new SettingsFlyout();
                settings.FlyoutWidth = Callisto.Controls.SettingsFlyout.SettingsFlyoutWidth.Wide;
                settings.HeaderText = "Settings Wide";

                settings.Content = new CallistoSettings.SettingsViews.SettingsWide();
                settings.IsOpen = true;
            });
            args.Request.ApplicationCommands.Add(storage);

            // Settings Narrow
            SettingsCommand settingsNarrow = new SettingsCommand("SettingsNarrow", "Settings Narrow", (x) =>
            {
                SettingsFlyout settings = new SettingsFlyout();
                settings.FlyoutWidth = Callisto.Controls.SettingsFlyout.SettingsFlyoutWidth.Narrow;
                settings.HeaderBrush = new SolidColorBrush(Colors.Orange);
                settings.Background = new SolidColorBrush(Colors.Gray);
                settings.HeaderText = "Settings Narrow";

                settings.Content = new CallistoSettings.SettingsViews.SettingsNarrow();
                settings.IsOpen = true;
            });
            args.Request.ApplicationCommands.Add(settingsNarrow);

            // About
            SettingsCommand about = new SettingsCommand("About", "About", (x) =>
            {
                SettingsFlyout settings = new SettingsFlyout();
                settings.FlyoutWidth = Callisto.Controls.SettingsFlyout.SettingsFlyoutWidth.Narrow;
                settings.HeaderText = "About";

                settings.Content = new CallistoSettings.SettingsViews.About();
                settings.IsOpen = true;
            });
            args.Request.ApplicationCommands.Add(about);
        }
    } 
```

但我的疑问是：-

1）它打开了我按下的所需弹出按钮，但在顶部有一个返回按钮，如果我按下它会打开设置窗格，但我不想打开设置窗格（如果用户按下返回按钮存在于 settingflyout 之上，settingflyout 应该被关闭（如果我在设置窗格之外按下它会发生这种情况（灯光关闭））

我想要的是按下时我应该得到settingflyout，即使用户按下settingflyout后退按钮，它也应该关闭settingflyout而不是显示默认设置窗格。

请让我知道我怎样才能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:28:21.423

如果您要显示该按钮，那么它的行为应该与控件中的代码一样 - 用户会期望您现在看到的行为。如果您不想要这种行为，为什么不完全删除/禁用该按钮？但是，您将再次违反设计指南，即您应该拥有此控制权。

这里的信息是用户期望某些行为，如果你的应用没有按照他们的期望做，你的应用可能会惹恼他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T11:51:11.047

改为使用 `SettingsPane.ShowIndependent();`。

# java - 为什么我无法通过应用引擎将大于 100KByte 的文件上传到 Google Cloud Storage？

> ID：13837536
> 
> 赞同：6
> 
> 时间：2012-12-12T10:19:08.870
> 
> 标签：java, google-app-engine, google-cloud-storage

我的项目仅包含简单的文件上传表单和查看它的重定向。我可以上传任何小于 50 KB 的文件，但是当我上传一些大于 100 KB 的文件时，它会从应用引擎抛出 IO 异常。我不确定问题出在哪里。有谁知道如何通过应用引擎中的表单发布来增加我可以上传到谷歌云存储的文件大小？文件大小适当小于 10 MB 即可。任何代码片段将不胜感激。谢谢你。

```
java.io.IOException
    at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:615)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:588)
    at com.google.appengine.api.files.FileServiceImpl.append(FileServiceImpl.java:535)
    at com.google.appengine.api.files.FileServiceImpl.append(FileServiceImpl.java:289)
    at com.google.appengine.api.files.FileWriteChannelImpl.write(FileWriteChannelImpl.java:57)
    at com.google.appengine.api.files.FileWriteChannelImpl.write(FileWriteChannelImpl.java:46)
    at java.nio.channels.Channels.write(Channels.java:80)
    at java.nio.channels.Channels.access$000(Channels.java:64)
    at java.nio.channels.Channels$1.write(Channels.java:151)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
    at storefile.StorageService.storeFile(StorageService.java:46)
    at storefile.UploadServlet.doPost(UploadServlet.java:46)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

以下是我的代码：upload.html

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Hello App Engine</title>
</head>

<body>
    <h1>Hello App Engine!</h1>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <p>File<input type="file" name="file" /> </p>
        <p> <input type="submit"value="upload" /> <input type="reset" value="reset"/> </p>
    </form>
  </body>
</html> 
```

上传Servlet.java

```
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.fileupload.FileItemIterator;
import org.apache.commons.fileupload.FileItemStream;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

import com.google.appengine.api.blobstore.BlobKey;

public class UploadServlet extends HttpServlet{

   private static final long serialVersionUID = 1L;
  private StorageService storage = new StorageService();
  private static int BUFFER_SIZE =1024 * 1024* 10;
  @Override
   public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {

      resp.setContentType("text/plain");
      resp.getWriter().println("Now see here your file content, that you have uploaded on storage..");

      ServletFileUpload upload = new ServletFileUpload();
      FileItemIterator iter; 
   try {
    iter = upload.getItemIterator(req);
     while (iter.hasNext()) {
            FileItemStream item = iter.next();
            String fileName = item.getName();
            String mime = item.getContentType();

            storage.init(fileName, mime);
            InputStream is = new BufferedInputStream(item.openStream());

             byte[] b = new byte[BUFFER_SIZE];
            int readBytes = is.read(b, 0, BUFFER_SIZE);

            while (readBytes != -1) {
                storage.storeFile(b, readBytes);
                readBytes = is.read(b, 0, readBytes);
            }

             is.close();
            storage.destroy();

       resp.getWriter().println("File uploading done");

            // resp.getWriter().println("READ:" + storage.readTextFileOnly(fileName));
            BlobKey key = storage.getBlobkey(fileName);
            if (key != null) {
                resp.sendRedirect("/serve?blob-key=" + key.getKeyString());
            } else {
                resp.sendRedirect("/");
            }

      }
   } catch (Exception e) {
    e.printStackTrace(resp.getWriter());
    System.out.println("Exception::"+e.getMessage());
    e.printStackTrace();
   }
 }

} 
```

存储服务.java

```
import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.nio.channels.Channels;
import java.util.logging.Logger;

import com.google.appengine.api.blobstore.BlobKey;
import com.google.appengine.api.blobstore.BlobstoreService;
import com.google.appengine.api.blobstore.BlobstoreServiceFactory;
import com.google.appengine.api.files.AppEngineFile;
import com.google.appengine.api.files.FileReadChannel;
import com.google.appengine.api.files.FileService;
import com.google.appengine.api.files.FileServiceFactory;
import com.google.appengine.api.files.FileWriteChannel;
import com.google.appengine.api.files.GSFileOptions.GSFileOptionsBuilder;

public class StorageService {

public static final String BUCKET_NAME = "aaaa";  

private FileWriteChannel writeChannel = null;
FileService fileService = FileServiceFactory.getFileService();

private BufferedOutputStream bos = null;
private static final Logger log = Logger.getLogger(StorageService.class.getName());
private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
public void init(String fileName, String mime) throws Exception {
 System.out.println("Storage service:init() method:  file name:"+fileName+" and mime:"+mime);
 log.info("Storage service:init() method:  file name:"+fileName+" and mime:"+mime);

    GSFileOptionsBuilder builder = new GSFileOptionsBuilder()
            .setAcl("public_read")
            .setBucket(BUCKET_NAME)
            .setKey(fileName)
            .setMimeType(mime);  
    AppEngineFile writableFile = fileService.createNewGSFile(builder.build());

    boolean lock = true;
    writeChannel = fileService.openWriteChannel(writableFile, lock);
    bos = new BufferedOutputStream(Channels.newOutputStream(writeChannel));
}

public void storeFile(byte[] b, int readSize) throws Exception { 
    bos.write(b,0,readSize);
    bos.flush();
}

    public void destroy() throws Exception {
     log.info("Storage service: destroy() method");
        bos.close();
        writeChannel.closeFinally();
    }
    public BlobKey getBlobkey (String filename) {
        BlobKey bk = blobstoreService.createGsBlobKey("/gs/aaaa/"+filename);
        return bk;
    }

} 
```

文件服务.java

```
import java.io.IOException;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.blobstore.BlobKey;
import com.google.appengine.api.blobstore.BlobstoreService;
import com.google.appengine.api.blobstore.BlobstoreServiceFactory;

public class fileserve extends HttpServlet {
    private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

public void doGet(HttpServletRequest req, HttpServletResponse res)
    throws IOException {
        BlobKey blobKey = new BlobKey(req.getParameter("blob-key"));
        blobstoreService.serve(blobKey, res);
    }
} 
```

web.xml

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>upload</servlet-name>
        <servlet-class>storefile.UploadServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>upload</servlet-name>
        <url-pattern>/upload</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>serve</servlet-name>
        <servlet-class>storefile.fileserve</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>serve</servlet-name>
        <url-pattern>/serve</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T11:00:45.687

尝试从以下更改第二个`is.read`：

```
readBytes = is.read(b, 0, readBytes); 
```

至：

```
readBytes = is.read(b, 0, BUFFER_SIZE); 
```

如果在某些时候您阅读速度更快，那么数据可用，`readBytes`设置为`0`并且它永远保持在这个值，因为它基本上是在做`is.read(b, 0, 0)`.

更好的是 - 你应该检查是否有数据要写入：

```
while (readBytes != -1) {
    if(readBytes > 0)
        storage.storeFile(b, readBytes);
    readBytes = is.read(b, 0, BUFFER_SIZE);
} 
```

# sitecore - Sitecore IFrame 显示页面编辑器功能区

> ID：13837537
> 
> 赞同：0
> 
> 时间：2012-12-12T10:19:11.103
> 
> 标签：sitecore, sitecore6, page-editor

我正在努力将一个集成`iframe`到 Sitecore 模板。我已经创建了 ASPX 页面并将其添加到了`iframe`Sitecore 模板中。（例如`/sitecore/content/Custom Editors/SampleIFrameEditor`）

它工作正常，我可以看到我的 ASPX 页面在`iframe`控件中呈现。唯一的问题是它在顶部显示“页面编辑器”功能区控件（主页高级体验...），我不需要显示。（就像我在页面编辑器中打开它一样。）

如何在这种情况下隐藏“页面编辑器”选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:50:42.367

您可以将`?sc_mode=normal`查询字符串添加到您的`iframe` `src`URL。

# .htaccess - 从 htaccess 中排除文件夹

> ID：13837538
> 
> 赞同：14
> 
> 时间：2012-12-12T10:19:11.067
> 
> 标签：.htaccess

我有一个使用 htaccess 来使用漂亮 URL 的站点。但是我希望 htaccess 文件保留一个完整的文件夹并且它的内容完全。我的 htaccess 文件的内容是：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 
```

我应该如何完成上述代码以完全排除名为“admin”的文件夹

提前谢谢了！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-19T15:06:32.920

你也可以在你想忽略的文件夹中放一个新的 .htaccess 文件，说：

```
RewriteEngine Off 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-12T15:02:57.457

您要排除的文件夹在哪里，`/excluded-folder/`您将添加以下规则：

```
RewriteCond %{REQUEST_URI} !^/excluded-folder/.*$ 
```

在您列出的其他两个 RewriteConds 之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-22T23:36:47.357

我在 TYPO3 的子目录中遇到了 PhpMyAdmin 的问题。很长一段时间后，我在上面目录中的一个文件中发现了这个块，`.htaccess`导致 phpmyadmin 的一个文件出现故障：

```
# UTF-8 encoding
AddDefaultCharset utf-8
<IfModule mod_mime.c>
    AddCharset utf-8 .atom .css .js .json .manifest .rdf .rss .vtt .webapp .webmanifest .xml
</IfModule> 
```

原因是存在`phpmyadmin.css.php`由规则触发的文件。
更改规则后，如下 PhpMyAdmin 正常工作：

```
# UTF-8 encoding
AddDefaultCharset utf-8
<IfModule mod_mime.c>
    AddCharset utf-8 .atom .js .json .manifest .rdf .rss .vtt .webapp .webmanifest .xml

    #####
    ## This block is for the file phpmyadmin.css.php, where the suffix css is not the last one.
    ## @see https://httpd.apache.org/docs/current/mod/mod_mime.html#multipleext
    #####
    <FilesMatch "[^.]+\.css$">
      AddCharset utf-8 .css
    </FilesMatch>
</IfModule> 
```

仅当后缀位于文件名末尾时 `<FilesMatch "[^.]+\.css$">`才会触发条件。`css`

所以我的案例不是关于重写，而是关于一个类似的问题，重写似乎是我的首要解决方案。

# android - MediaStore：获取图像数据、缩略图和文件夹

> ID：13837539
> 
> 赞同：8
> 
> 时间：2012-12-12T10:19:12.630
> 
> 标签：android, uri, android-contentprovider, mediastore

我有两个清单。我们称它们为 AlbumsList 和 PicturesList。

*   第一个显示相册封面（其中一张图片）它的名称和其中的图片数量。
*   第二个显示所选相册中包含的所有图像。

我已经使用 File 类完成了它，但它工作得太慢了，当我只需要来自画廊的图像时，它会在设备上找到所有图像。我读过有关 MediaStore 内容提供程序的信息，但从未使用过它。所以我有两个问题：

1.  如何使用 MediaStore 类查找“相册”（图库中包含图片的文件夹）、缩略图以及其中的图片数量？我认为这类似于“如何查找图库中所有图像的文件路径和缩略图？”
2.  如何使用 MediaStore 类获取特定文件夹中所有图像的文件路径和缩略图？

编辑：似乎 MediaStore.Images.Media.DATA 列包含文件路径，所以我可以获得专辑文件夹。MediaStore.Images.Media.Display_NAME 看起来像一个文件名，但我不确定它是否总是正确的。我可以在不进行第二次查询的情况下将缩略图数据列添加到这些列中吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-16T09:36:33.993

这是我写的代码：

```
 Uri uri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
    String[] projection = { MediaStore.Images.Media._ID, MediaStore.Images.Media.BUCKET_ID,
            MediaStore.Images.Media.BUCKET_DISPLAY_NAME };

    Cursor cursor = getContentResolver().query(uri, projection, null, null, null);

    ArrayList<String> ids = new ArrayList<String>();
    mAlbumsList.clear();
    if (cursor != null) {
        while (cursor.moveToNext()) {
            Album album = new Album();

            int columnIndex = cursor.getColumnIndex(MediaStore.Images.Media.BUCKET_ID);
            album.id = cursor.getString(columnIndex);

            if (!ids.contains(album.id)) {
                columnIndex = cursor.getColumnIndex(MediaStore.Images.Media.BUCKET_DISPLAY_NAME);
                album.name = cursor.getString(columnIndex);

                columnIndex = cursor.getColumnIndex(MediaStore.Images.Media._ID);
                album.coverID = cursor.getLong(columnIndex);

                mAlbumsList.add(album);
                ids.add(album.id);
            } else {
                mAlbumsList.get(ids.indexOf(album.id)).count++;
            }
        }
        cursor.close(); 
```

它使用我的`ALbum`类和之前声明的 var`mAlbumsList`但我认为它很清楚可以理解它是如何工作的。也许它会帮助某人。

# c++ - 通过 qtcpsocket 发送 qimage：只接收到部分数据

> ID：13837544
> 
> 赞同：0
> 
> 时间：2012-12-12T10:19:41.983
> 
> 标签：c++, qt, qimage, qtcpsocket

我正在创建一个应用程序，我需要通过 tcp 发送一些图像。

发送部分是

```
QImage image;  
image.load("image.png", "PNG");  
image.setText("name", "color");  
QByteArray ba;  
QBuffer buffer(&ba);  
image.save(&buffer, "PNG");  
int bsize = ba.size();  
sendData(MESSAGE_BACKGROUND_COLOR, QString::number(ba.size()).toStdString());  
int bsent = m_tcpSocket->write(ba, ba.size());  
if(!m_tcpSocket->waitForBytesWritten(-1))  
{  
    qDebug() << "written Bytes error " << m_tcpSocket->errorString();  
}  
m_tcpSocket->flush(); 
```

和客户：

```
 QByteArray buffer;  
 buffer = m_ConnectedClients[i]->read(messageSize);  
 int bytesS = buffer.size();  
 QImage image;  
 image.loadFromData(buffer.data());  
 if (image.isNull())  
 {  
    qDebug("The image is null. Something failed.");  
 } 
```

问题是服务器似乎正在发送所有数据，客户端只收到标头......
（当然，程序崩溃了

> image.loadFromData(buffer.data());

tcp 通信正常，因为仅包含文本的其他消息通过正常...

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:19:14.880

...并回答我自己的问题，以防其他人有同样的问题...

我需要将接收端设置为从套接字读取，直到我得到所有数据......

就像是：

```
int bytesS = 0;
while(byteS < messageSize)
{
   buffer->append(m_ConnectedClients[i]->readAll());
   bytesS = buffer->size();
   if (bytesS == messageSize)
   {
      QImage image;
      image.loadFromData(*m_ConnectedClients[i]->buffer, "PNG");
      if (image.isNull())
      {
         qDebug("The image is null. Something failed.");
      }
   }
} 
```

# java - 如何使用 Cglib 通过读取 XML 配置在运行时更新类的字段？

> ID：13837546
> 
> 赞同：0
> 
> 时间：2012-12-12T10:19:50.323
> 
> 标签：java, cglib

考虑到我们项目的通用性和灵活性，我们需要将字段和相关的 get/set 方法添加到具有`XML`配置文件中的列数组的基本类中。我正在考虑 Cglib 并对其进行了研究。

我了解到如何使用 Cglib 在应用程序中实现 AOP 功能，如下所示：

```
public static SampleManager getSelectivityAuthInstance(AuthProxy auth) {
  Enhancer enhancer = new Enhancer();
  enhancer.setSuperclass(SampleManager .class);
  enhancer.setCallbacks(new Callback[] { auth, NoOp.INSTANCE });
  enhancer.setCallbackFilter(new AuthProxyFilter());

  return (SampleManager ) enhancer.create();
} 
```

互联网上学习和研究 Cglib 的资源不足。我想从这里得到帮助。以下是我的详细问题。

1，我有一个基本的 POJO 类`BasicUser`，它最初是空的。

2、应用程序应该能够从 中读取包含名称、数据类型、长度等信息的字段列表，`project.xml`并将这些字段添加到 BasicUser 类中，然后应用程序使用更新的新类`Cglib`来满足业务需求。

我曾经想过使用 Map 来实现它，但它不是技术性的。哪位专业人士可以给我指导一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T23:32:51.220

在 cglib 中实际上有一个用于此的类，`BeanGenerator`. 我在这里写了一些关于这个类的使用：http: [//mydailyjava.blogspot.no/2013/11/cglib-missing-manual.html](http://mydailyjava.blogspot.no/2013/11/cglib-missing-manual.html)

# php - 如何使用 PHP 收集网站元素数据

> ID：13837549
> 
> 赞同：0
> 
> 时间：2012-12-12T10:19:59.237
> 
> 标签：php, xpath, web-scraping

我是 Php 的新手，正在尝试复制我在 c# 中使用的类来进行网络抓取。我已经为下载页面等构建了一个标准的 Http Helper 类，但我寻求有关抓取元素的建议，因为我找不到不涉及仅输出所有内容的循环的简单示例。

这是开始

```
foreach ($nodes as $element) {
        if($element->hasAttribute('class') && $element->getAttribute('class') == "itemgroup"){

            $tempMessage = $element->getElementsByTagName('h3')->item(0)->nodeValue. "\n"; 
```

我不想像上面那样遍历所有内容或猜测元素数组中的项目顺序。我只想能够做一些轻微的混合：

与 dom 查询一样：`"//div[@id='travel-itemlist']/div[@class='itemgroup']"`

我希望能够通过属性和值获取单个元素来分配值：例如：一个非工作示例：

```
$title = 'Title: ' . $e->getElementsByTagName('p')->item('class[@id='thatstheOne'')->nodeValue. "\n"; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:53:06.397

简而言之，您不能在 1 行中这样做。

[DOMXPath::query](http://php.net/manual/en/domxpath.query.php)和[DOMElement::getElementsByTagName](http://php.net/manual/en/domelement.getelementsbytagname.php)都返回一个可以是空列表的[DOMNodeList对象。](http://php.net/manual/en/class.domnodelist.php)

为了真正精确地匹配到 DOM，当您期望一个结果时，我会使用 XPath 表达式，然后测试 xpath 函数的返回值并相应地分配一个变量，例如：

```
$items = $xpath->query("//div[@id='travel-itemlist']/div[@class='itemgroup']");
$title = ($items->length === 1) ? $items->item(0)->nodeValue : ''; 
```

在这里使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php)将有助于保持代码简短并避免 if-then-else 汤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:55:51.363

看看[PHP Nokogiri](https://github.com/b1rdex/php-nokogiri)。它允许您以 jQuery 样式查询 DOM，但如果您愿意，您仍然可以使用直接 xPath 查询。有了这个，你可以做类似的事情

```
$topicLinks = $saw->get('#sidebar dl.air-comment a.topic')->toArray() 
```

您可以轻松地扩展类以返回单个值。

# c# - 负数二进制并改变它的LSB

> ID：13837550
> 
> 赞同：0
> 
> 时间：2012-12-12T10:20:06.673
> 
> 标签：c#, image-processing, watermark

先生，我有一个问题。我找到了一个负数的二进制，它给了我 32 位。我修剪除了前 8 位之外的所有其他位。现在我改变它的 LSB。它给了我 125 作为答案。我必须将其嵌入灰度图像中。根据我的要求，我必须将这 125 添加到平均值中（四个相邻像素的总和）。当我将它添加到平均值时。我给我的答案超过 255。那么在修改 lsb 之后是否有可能。我的位仍然是负面的。

这是我的代码

```
string str1 = Convert.ToString(d[1, 1], 2);
str1 = str1.Substring(Math.Max(str1.Length - 8, 0)).PadLeft(8, '0');
char[] data = new char[str1.Length]; 

for (int m = 0; m < str1.Length; m++)
{
    data[m] = str1[m];
}

//data[0] = '0';
string s="";
data[0] = '0';

for (int m = 0; m < str1.Length; m++)
{
    s += data[m];
}

byte output = Convert.ToByte(s, 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:12:24.970

您的代码正在修剪除*最后*8 位之外的所有位。如果要修剪除*前*8 位以外的所有位，则应使用 str1.Substring(0, 8)。您正在更改最后 8 位的 MSB。如果你想改变 LSB，你应该使用 data[7] 而不是 data[0]。

# sql - 从三个表中选择的存储过程

> ID：13837552
> 
> 赞同：0
> 
> 时间：2012-12-12T10:20:19.730
> 
> 标签：sql, sql-server, stored-procedures

我有这三张桌子

**培训班**

```
course ID     course Name     course start time   course end time
1             Math            10:00:00            11:00:00
2             Science         11:00:00            12:00:00
3             geography       09:00:00            10:00:00 
```

**学生课程**

```
course ID     student ID      Final cost
1             2               100
2             3               200 
```

**学生**

```
student ID     student name
1              AAAA
2              BBBB 
```

我需要一个 select 语句放置在存储过程中，以仅返回学生未注册（已实现）的课程的 [Course ID]、[Course name] 列值

**并**检查学生当前课程的开始和结束时间，只返回学生可用的课程（没有课程）

我的选择声明只返回学生未注册的课程::

```
SELECT [Course ID], [Course name] 
FROM Courses
WHERE [Course ID] NOT IN 
 (SELECT Course ID from student_courses WHERE [student ID]=1) 
```

我如何编辑这个语句以包含可用的时间条件（知道我想把它放在一个存储过程中）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:48:22.727

这是您需要的查询：

```
SELECT [Course ID], [Course name] 
FROM Courses 
WHERE [Course ID] NOT IN 
 (SELECT Course ID from student_courses sc
  INNER JOIN Courses c ON sc.[course ID] = c.[course ID] 
  WHERE [student ID] = 1
  AND (c.[course start time] BETWEEN Courses.[course start time] AND Courses.[course end time]
  OR c.[course end time] BETWEEN Courses.[course start time] AND Courses.[course end time])) 
```

我看不出有什么理由，为什么这应该在`stored procedure`. A`view`可能是合理的。

阅读更多关于[`views`这里](http://msdn.microsoft.com/en-us/library/ms187956.aspx)。

# javascript - 如果未选中任何复选框，则显示 alert()

> ID：13837554
> 
> 赞同：0
> 
> 时间：2012-12-12T10:20:21.807
> 
> 标签：javascript, checkbox

单击“删除”按钮后，如果未选中任何复选框，如何显示警报。我的html表单

```
<form name="Delete" method="post" action="DeleteAdministrator">
                <table width="800px" cellpadding="5" style="color:black; border-top:1px solid #ccc;" border="0">
                </table>
                    <div id="container">
                    <div id="demo_jui">
                    <table id="adminList" class="display" cellpadding="0" cellspacing="0" border="0" style="font-size:12px;" >
                    <thead id="headed">
                    <tr>
                        <th  align="center" title="Select">Select</th>
                        <th align="center" title="Email Address">Email Address</th> 
                        </tr>
                    </thead>
                    <tbody></tbody>
                    </table>
                    </div>
                    </div>
                    <table id="footed">
                        <tr>
                            <td colspan="2">
                                <a href="#"><img src="images/Delete.png" style="border:none;" onClick="javascript:Go()"
                                onmouseover="this.src='images/Delete_Hover.png'" onmouseout="this.src='images/Delete.png'"/></a>
                                &nbsp;&nbsp;&nbsp;
                                <a href="#"><img src="images/Reset.png" style="border:none;" onClick="javascript:clearForm()"
                                onmouseover="this.src='images/Reset_Hover.png'" onmouseout="this.src='images/Reset.png'"/></a>
                            </td>
                        </tr>
                    </table>
                </form>
</body>
</html> 
```

复选框值将在表中检索。当我测试它时，当复选框被选中或未选中时，它仍然提醒“请选择删除管理员”

在功能`Go()`中，验证方式`document.Delete.delAdlist[i].checked`是否正确？谢谢

```
<script language="JavaScript">                      
    var running = 0;
    function Go() {
        var f = document.forms[0];
        for (i = 0; i < document.Delete.delAdlist.length) {
            if (!document.Delete.delAdlist[i].checked) {
                alert("Please select to delete admin.");
                return false;
            }
            else {
                f.submit();
                return true;
            }
        }  
        f.submit();
        running++;
    }                               
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:31:40.757

查找选中的项目会更合乎逻辑，当找到第一个项目时：提交表单并退出。如果没有找到检查，则显示警报。您还没有显示复选框 HTML，所以我假设您有一个名为`delAdlist[]`.

**纯 Javascript 解决方案**

```
function Go() {
    var f = document.forms["Delete"];

    for (i = 0; i < f.elements["delAdlist[]"].length; i++) {
       if (f.elements["delAdlist[]"][i].checked) {
            f.submit();
            return true;
        }
    }  

    alert("Please select at least one to delete");
} 
```

**jQuery 解决方案**

```
function Go() {
    if($('form[name=Delete] input[name=delAdlist\\[\\]]:checked').length > 0)
    {
        $('form[name=Delete]').submit();
    }
    else
    {
        alert("Please select at least one to delete");
    }
} 
```

**注意：**如果您的复选框是一个数组，上面的代码将起作用。如果您的复选框不是数组并且全部命名`delAdlist`（不带括号）`[]`，则从第一个解决方案中删除，并将第二个解决方案中的选择器更改为`form[name=Delete] input[name=delAdlist]:checked`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:34:16.980

```
<script language="JavaScript">                      
    var running = 0;
    function Go() {
    var f = document.forms[0];
   if( $("input[type='checkbox']:checked").length < 1)
        alert("Please select to delete admin.");
   else
     f.submit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:27:26.960

你应该检查这种格式

```
var notChecked=0;
for (i = 0; i < document.Delete.delAdlist.length) 
                {
                    if(!document.Delete.delAdlist[i].checked)
                         notChecked=1;

                }  

if(notChecked==1) {
      alert("Please select to delete admin.");
      return false;
}
else {
     f.submit();
} 
```

# php - SQL：不明确的列解析，而不更改 where 子句

> ID：13837556
> 
> 赞同：0
> 
> 时间：2012-12-12T10:20:35.257
> 
> 标签：php, mysql, sql, database

我有以下 SQL 查询：

```
SELECT call_type FROM INCOMING_CALLS, LIVE_CALLS 

WHERE LIVE_CALLS.status='INCALL' and INCOMING_CALLS.callerid = LIVE_CALLS.callerid

AND pbl_id in ('111','190','121','111','-','111','121','303','6730','-'); 
```

LIVE_CALLS 和 INCOMING_CALLS 这两个表都有 pbl_id 列。这显然会导致以下错误：

```
ERROR 1052 (23000): Column 'pbl_id' in where clause is ambiguous 
```

我知道通过更改来解决这个问题非常简单

```
pbl_id in ( 
```

至

```
INCOMING_CALLS.pbl_id in ( 
```

和

```
INCOMING_CALLS.pbl_id in ( 
```

但我不能这样做，因为下面的部分是动态构建的，我无法控制它。

```
AND pbl_id in ('111','190','121','111','-','111','121','303','6730','-'); 
```

我需要匹配两个表的 pbl_id。任何提示我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:25:39.650

您可以使用子查询：

```
select call_type
from INCOMING_CALLS ic
inner join (select distinct callerid from LIVE_CALLS
            where LIVE_CALLS.status='INCALL') lc
    on ic.callerid = lc.callerid
where 1 = 1
AND pbl_id in ('111','190','121','111','-','111','121','303','6730','-'); 
```

[在这里](http://www.sqlfiddle.com/#!2/60238/1)看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:23:16.783

如果添加语句：

```
INCOMING_CALLS.pbl_id = LIVE_CALLS.pbl_id 
```

然后将两者之一与 in 语句进行比较

```
AND INCOMING_CALLS.pbl_id in ('111','190','121','111','-','111','121','303','6730','-'); 
```

再想一想，你为什么不直接加入表格呢？

```
SELECT call_type FROM INCOMING_CALLS
LEFT JOIN LIVE_CALLS ON LIVE_CALLS.pbl_id = INCOMING_CALLS.pbl_id
WHERE LIVE_CALLS.status='INCALL' and INCOMING_CALLS.callerid = LIVE_CALLS.callerid
AND pbl_id in ('111','190','121','111','-','111','121','303','6730','-'); 
```

# jquery - Jquery移动滑块事件未触发

> ID：13837563
> 
> 赞同：0
> 
> 时间：2012-12-12T10:20:52.787
> 
> 标签：jquery, jquery-mobile, jquery-slider

我想使用 jquery 滑块（在移动设备上）更改 DIV 的比例。该代码非常简单，可以在 JS Fiddle ( [http://jsfiddle.net/gsjBC/1/](http://jsfiddle.net/gsjBC/1/) ) 上运行，但由于某种原因不能在普通的 html 页面上运行。谁能帮我确定为什么不呢？

这是html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Testing</title>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">      </script>
</head><body>

<div data-role="fieldcontain"><input type="range" name="slider" id="slider" value="60" min="0" max="100" /></div>

<script>
$("#slider").change(function() { 
sliderValue =    $(this).val();$("#proportion").width(sliderValue*3);
$("#proportion").height(300-sliderValue*3);});
</script>

<div id="proportion" style="border:1px solid #ccc; width:150px; height:150px;" /></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:27:02.520

放：

```
$("#slider").change(function() { 
```

在

```
$(document).ready(function() {
// here
}); 
```

# popup - Richfaces 4 弹出编辑器问题

> ID：13837564
> 
> 赞同：1
> 
> 时间：2012-12-12T10:20:58.740
> 
> 标签：popup, editor, richfaces

Richfaces 4.2.2

我在 rich:datatable 中添加了一个按钮，该按钮会导致出现 rich:popup 面板。弹出面板包含 a`<rich:editor/>`和 2 `<h:commandButton/>`s

数据表中的按钮调用backing bean中的一个方法来设置要编辑的String，编辑器映射到这个属性——我知道按钮是在backing bean中设置String。

我还在`<h:outputText/>`弹出面板中添加了一个以显示要编辑的字符串的值

问题是：

1.  当编辑器显示时，在源按钮被按下几次以使其进入和退出源模式之前，无法使用编辑面板
2.  支持 bean 属性的值未显示在编辑器中
3.  映射到支持 bean 中的方法的 commandButton 不调用该方法
4.  outputText 第一次显示正确的值，但是当使用数据表中的不同行时，它在后续使用弹出面板时不会改变

我尝试过以相同的形式和单独的形式使用弹出窗口和数据表，并在弹出面板内部和外部尝试了单独的形式

这是页面

```
 <h:html xmlns="http://www.w3c.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

 .
 .
 .
    <h:form id="blogForm" prependId="false">

      <rich:popupPanel  id="mp" minHeight="600" minWidth="450"  height="600" width="800" resizeable="true">
        <f:facet name="header">
            <h:outputText value="Modal Panel Title" />
        </f:facet>

        <rich:editor id="editor" toolbar="full" value="#{blogBean.currentEntry}" skin="office2003" viewMode="visual">
          <f:param name="auto_focus" value="editor" />
        </rich:editor>

        <h:outputText escape="false" value=")))#{blogBean.currentEntry}(((" />

        <h:commandButton value="Save" action="#{blogBean.save}">
          <rich:componentControl target="mp" operation="hide" />  
        </h:commandButton>
        <h:commandButton value="Cancel" >
          <rich:componentControl target="mp" operation="hide" />  
        </h:commandButton>
      </rich:popupPanel>

     <a4j:commandButton value="Add new post" rendered="true" >
       <rich:componentControl target="mp" operation="show" />
     </a4j:commandButton>

     <h:panelGrid columns="1">
       <a4j:outputPanel id="panel" layout="block">                
         <rich:dataTable value="#{blogBean.entries}" columns="1" var="entry" rows="20" id="repeat" >
                 <rich:column width="800">
                     <rich:panel>
                       <f:facet name="header">
                          <a4j:commandButton value="Edit" rendered="true" oncomplete="#{rich:component('mp')}.show()">
                            <f:setPropertyActionListener value="#{entry}" target="#{blogBean.currentEntry}" />
                          </a4j:commandButton>
                       </f:facet>
                       <h:outputText escape="false" value="#{entry}" />
                     </rich:panel>
             </rich:column>
         </rich:dataTable>            
       </a4j:outputPanel>            
    </h:panelGrid>   
    </h:form>
  </h:body>

</h:html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:00:54.880

(2) 和 (4) 很可能是因为您实际上并没有通过 ajax 更新它们的值。

1.  为您添加一个`id`属性，`<h:outputText/>`并将`<rich:editor/>`这些 id 包含在命令按钮的`render`属性中，如下所示：

    ```
     <a4j:commandButton value="Edit" render="editorId,outputTextId" rendered="true" oncomplete="#{rich:component('mp')}.show()">
        <f:setPropertyActionListener value="#{entry}" target="#{blogBean.currentEntry}" />
      </a4j:commandButton> 
    ```

    还要摆脱您在 中的标记`<h:outputText/>`并删除该`escape`属性以确保不会导致编辑器阻塞。

2.  将您的托管 bean 设置`@ViewScoped`为让您高枕无忧。

3.  您`<h:commandButton/>`在弹出窗口中使用 a 。除非这是设计使然，否则您在此处的选择会适得其反，因为此命令按钮将触发完整的生命周期请求/回发，并且您嵌套在其中的所有 javascript 都没有实际意义。将这些更改为`<a4j:commandButton/>`s。从长远来看，我建议您从该表单中删除弹出窗口，并**在弹出窗口中单独放置一个表单。**如果这没有改变，请在此处发布您的编辑，让我们准确了解您的操作方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-26T10:43:47.887

要修复第 (2) 点，请在示例中使用 domElementAttachment="parent"：

# r - 如何在ggplot中绘制一个变量？

> ID：13837565
> 
> 赞同：43
> 
> 时间：2012-12-12T10:21:02.513
> 
> 标签：r, plot, ggplot2

我正在搜索，但仍然找不到一个非常简单的问题的答案 - 我们如何在 R 中使用 ggplot2 生成一个变量的简单点图？

使用`plot`命令这很简单：

```
plot(iris$Sepal.Length, type='p') 
```

但是当我试图将一个变量传递给 qplot 并指定 geom="point" 时，我收到一个错误“UseMethod("scale_dimension") 中的错误”。

![简单的一变量图](../Images/3a94f05f17b58e62927678b731f3ed6c.png)

我们如何制作这样的情节但使用ggplot2？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-12T10:39:26.943

您可以使用 手动创建索引向量`seq_along`。

```
library(ggplot2)

qplot(seq_along(iris$Sepal.Length), iris$Sepal.Length) 
```

![在此处输入图像描述](../Images/040b08e1464f0f2d11d2c939e446689d.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-12T10:37:53.140

实际上，您绘制的不是一个变量，而是两个。X 变量是数据的顺序。根据您的示例，您想要的答案是：

```
library(ggplot2)
ggplot(iris, aes(y = Sepal.Length, x = seq(1, length(iris$Sepal.Length)))) + geom_point() 
```

你的问题的答案会更接近这个：

```
ggplot(iris, aes(x = Sepal.Length)) + geom_dotplot() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-04T06:12:51.637

使用`qplot`和不指定`data`参数的替代方法：

```
ggplot(mapping=aes(x=seq_along(iris$Sepal.Length), y=iris$Sepal.Length)) +
    geom_point() 
```

或者：

```
ggplot() +
    geom_point(aes(x=seq_along(iris$Sepal.Length), y=iris$Sepal.Length)) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-07T09:20:59.777

```
require(ggplot2)

x= seq(1,length(iris$Sepal.Length))
Sepal.Length= iris$Sepal.Length

data <- data.frame(x,Sepal.Length)

ggplot(data) + geom_point(aes(x=x,y=Sepal.Length)) 
```

![在此处输入图像描述](../Images/782a4873705d177032d23a191106e950.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-12T16:26:14.943

```
library(ggplot2)
qplot(1:nrow(iris), Sepal.Length, data = iris, xlab = "Index") 
```

或者

```
ggplot(data = iris, aes(x = 1:nrow(iris), y = Sepal.Length)) +
    geom_point() +
    labs(x = "Index") 
```

# actionscript-3 - 我的 AS3 hitTest 应该去哪里？

> ID：13837568
> 
> 赞同：0
> 
> 时间：2012-12-12T10:21:07.260
> 
> 标签：actionscript-3, flash, methods, scope, hittest

我正在用 AS3 制作游戏。

我的文档类有两个子类：

*   物理对象
*   地面

我想在 PhysObject 和 Ground 之间的每一帧都执行一次 hitTest，但我不知道把它放在哪里。

我知道让文档类尽可能小总是最好的，所以我想避免将 hitTest 方法放在那里。

我应该让子类直接相互交流吗？还是我应该使用单独的“实用程序”类来做到这一点？

我也不确定如何执行这些选项中的任何一个；我只知道如何在父类中执行 hitTests。

![在此处输入图像描述](../Images/ad16d67ae85984b3d6b16ca5a63db44b.png) 帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:29:42.487

您可以将此属性分配给任何一个对象。这是 hitTest 对象的链接。我想它会对你有所帮助。

[http://mnaresh.blogspot.in/2011/11/simple-puzzle-game-using-hittestobject.html](http://mnaresh.blogspot.in/2011/11/simple-puzzle-game-using-hittestobject.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:33:40.023

我通常将碰撞测试放在收集所有相关对象的类中。大多数功能齐全的游戏不会直接由其文档类处理世界模拟。毕竟，您还需要通常不想被物理模拟的菜单或评分屏幕或学分。我会构造类似的东西：

*   文档
    *   PlayScreen（hitTest 在此处，在 Document 每帧调用的更新函数中）
        *   物理对象
        *   地面
    *   其他画面

# ios - iOS SDK 中的 Facebook Places 无需身份验证

> ID：13837569
> 
> 赞同：0
> 
> 时间：2012-12-12T10:21:08.600
> 
> 标签：ios, facebook, location

我编写了一个 iPhone 应用程序，它允许用户通过 Facebook 登录并通过用户名/密码登录作为替代。在某些时候，用户可以将位置添加到他执行的某些操作中。我为此使用了 facebook 位置，但正如我发现的那样，只有在提供访问令牌时才能使用 facebook 位置。即：我的应用程序的所有非 Facebook 用户都无法选择 Facebook 位置。

我对吗？

如 FBPlacePickerViewController.m 第 341 行（iOS sdk 3.1.1）所述：

```
// Place queries require a session, so do nothing if we don't have one. 
```

如果是这样的话，我肯定要寻找另一个地方数据库......

比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:56:15.590

好的，根据 Facebook 文档，Token 确实是 neidend。我有三个选择：

1.  使用应用程序中的某个帐户始终获取令牌。这也可以是主页或应用程序帐户。这需要将您的应用程序密码放入应用程序中，即使 Facebook 也不推荐。

2.  在您自己的服务器上使用某个帐户。那里的帐户凭据更加安全（希望如此），但我必须在整个地方实施挑选东西并将其转发到应用程序。应该没那么难。

3.  使用其他框架和数据库，如 yelp、foursquare、google 等。Factual.com 似乎也是一个不错的来源。定价可能是个问题。

# android - 如何将自定义字体设置为 Actionbar Sherlock Tab？

> ID：13837570
> 
> 赞同：3
> 
> 时间：2012-12-12T10:21:08.987
> 
> 标签：android, actionbarsherlock

我想为操作栏 Sherlok 中的“视频”和“图像”选项卡设置字体。我已经使用以下代码来执行此操作。它在 ICS 中准确显示，但在较低版本的设备中显示不准确，但我通过设置 TYPE FACE 在此应用程序的其他部分中显示了准确的输出，例如：

```
a.settypeface("ab.tttf");
a.settext("VIDEO"); 
```

但是如何在此代码中的操作栏中设置字体：

```
mTabsAdapter.addTab(bar.newTab().setText("IMAGE"),
                    AFragment.class, null);

            mTabsAdapter.addTab(bar.newTab().setText("VIDEO"),
                    BFragment.class, null); 
```

# jquery - Maps v3 + jQuery - 在 for 循环中添加标记

> ID：13837575
> 
> 赞同：0
> 
> 时间：2012-12-12T10:21:27.750
> 
> 标签：jquery, maps

我试图在通过 AJAX 调用获取位置后向地图添加多个标记，但标记根本不会显示。我检查了纬度和经度，它们被正确检索。我尝试了两种添加它们的方法（传统的地图方式和通过我使用的名为 gmaps.js 的库），但它们都不起作用。

我需要一个闭包来简单地添加标记吗？我不需要添加事件和东西（还）。

我一直在寻找解决方案，但我发现的似乎都不起作用。请帮忙。

这是代码（内部注释）：

```
function mapInit( vID )
{ 
    // INIT MAP
    var map = new GMaps({
        div: '#map',
        lat: 0,
        lng: 0,
        zoom: 14,
        zoomControl: false,
        panControl: false,
        mapTypeControl: false,
        scaleControl: false
    }); 

    var vData = ''; 
    var club_centered = false;

    // get villa info via AJAX
    // single villa if vID = 0; else get all villas
    $.ajax({
        url: ajax_vars.ajax_url,
        type: 'POST',
        beforeSend: function( x ) 
        {
            if( x && x.overrideMimeType ) {
                x.overrideMimeType("application/json;charset=UTF-8");
            }
        },
        data: 'action=get_villa_data&id='+vID,
        success: function( response ) 
        { 
            vData = response;
        },
        complete: function()
        {
            for ( var i = 0; i < vData.length; i++ )
            {   
                if ( vData[i].lat )
                { 
                    console.log( vData[i].lat );
                    console.log( vData[i].lon );
                    // using gmaps.js
                    // map.addMarker({
                        // title: vData[i].title,
                        // lat: parseFloat( vData[i].lat ),
                        // lng: parseFloat( vData[i].lng )
                    // });
                    // traditional maps way
                    // I get an error if I uncomment the 'map:map' line
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng( parseFloat(vData[i].lat), parseFloat(vData[i].lon) ),
                        // map: map
                    });
    }
            }
        }
    });

    // add CLUB marker
    // this works perfectly
    var clubLat = 37.809750047720904;
    var clubLon = 20.875182151794434;
    // GMaps.geocode({
      // address: clubAddress,
      // callback: function(results, status){
        // if(status=='OK'){
          // var latlng = results[0].geometry.location;
          map.addMarker({
            title: 'The Club',
            lat: clubLat,
            lng: clubLon
          });
          // if ( club_centered )
            map.setCenter( clubLat, clubLon );          
        // }
      // }
    // });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:39:22.307

我认为您的问题出在创建地图时，因为您在 map:map 上遇到错误，因此可能未正确创建地图。

尝试改用这个：

```
var mapOptions = {
              center = new google.maps.LatLng(0,0),
                  zoom: 14,
                  zoomControl: false,
                  panControl: false,
                  mapTypeControl: false,
                  scaleControl: false
            }
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions); 
```

# vimeo - Vimeo seekTo 跳转到加上旧的 seekTo

> ID：13837581
> 
> 赞同：0
> 
> 时间：2012-12-12T10:21:53.527
> 
> 标签：vimeo, seek

我已将 seekTo 设置为 30 秒。当页面加载时，它会根据需要直接寻找 30 秒。

问题：

1.  它会在加载 30 秒时自动播放。（它应该寻求 30 秒，但默认情况下应该暂停）

2.  当我进一步拖动时播放时，视频从拖动的秒+ 30秒开始播放（它不应该在我拖动时添加旧的 seekTo 时间，而是应该从拖动的秒继续播放）（例如：当我将它拖动到 1min 20secs它只是通过添加较旧的 seekTo 参数跳转到 1 分 50 秒。它不应该发生）

花了很多时间在谷歌上搜索它，但还没有运气。请帮我修复它。

浏览器：IE 9、FF 17

链接：jsfiddle.net/w9ycw/5/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:37:02.973

现在应该解决这个问题。我们 (Vimeo) 不久前推出了解决此问题的更新。

该问题是由于管理位于缓冲区之外的搜索请求的偏移量，并且在基于视频的缓冲区的后续搜索请求之后未重置。

如果您在使用播放器时遇到任何其他问题，请告诉我们。

谢谢。

# node.js - 调试内存泄漏nodejs

> ID：13837586
> 
> 赞同：2
> 
> 时间：2012-12-12T10:22:10.583
> 
> 标签：node.js, memory-leaks

我正在尝试调试生产服务器中的内存泄漏。我正在寻找节点分析器，但我找到的所有解决方案都需要 v8-profiler（[https://github.com/dannycoates/v8-profiler](https://github.com/dannycoates/v8-profiler)），它似乎不适用于最新版本的节点（链接错误：[https://github.com/dannycoates/v8-profiler/issues/20](https://github.com/dannycoates/v8-profiler/issues/20)）。

你能推荐其他解决方案吗？（我意识到这是[Detecting memory leaks in nodejs](https://stackoverflow.com/questions/10577704/detecting-memory-leaks-in-nodejs)的副本，但建议的解决方案也没有更新......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:31:13.157

尝试[节点时间](http://nodetime.com)。它从保持器的角度显示堆，即属性、数组元素等。这篇文章[检测 Node.js 应用程序中的内存泄漏中的](http://blog.nodetime.com/2012/07/detecting-memory-leaks-in-nodejs-apps.html) 更多信息。要安装 nodetime，请参阅[说明](http://docs.nodetime.com/#installation-and-use)，这基本上是安装和需要 nodetime 包。

# html - 如何使用两个也居中对齐的按钮将文本输入居中居中

> ID：13837587
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:22:21.077
> 
> 标签：html, css

这是html

```
<form id="ContactForm" action="">
  <div>
     <div class="wrapper">
        <div class="bg"><input class="input" type="text"></div>Name:
     </div>
     <div class="wrapper">
        <div class="bg"><input class="input" type="text"></div>Email:
     </div>
     <div class="wrapper">
        <div class="bg"><input class="input" type="text"></div>Phone:
     </div>
     <div class = "wrapper"> <a href="#" class="button" onclick="document.getElementById('ContactForm').submit()">Submit</a></div>
     <div class="wrapper"> <a href="#" class="button" onclick="document.getElementById('ContactForm').reset()">Generate code</a>
  </div>
</form> 
```

CSS-

```
#ContactForm .button {
    margin: 0 auto;
    display:block;
    font-size:20px;
    font-weight:700;
    color:#fff;
    line-height:35px;
    width:90px;
    text-align:center;
    background:url(../images/button_form.gif) top repeat-x #308da2;
    border-radius:10px;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    behavior:url(js/PIE.htc);
    position:relative;
    text-decoration:none
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:31:08.060

申请

```
text-align: center 
```

到您的表单的 css。

这里[http://jsfiddle.net/cpFZM/](http://jsfiddle.net/cpFZM/)是基于您发布的代码的粗略示例。这将使所有内容居中对齐。如果您只想将某些元素居中对齐，那么您只需将样式应用于它们的包含`divs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:16:48.427

首先，没有必要用这么多`divs`来设计一个表格。改用`label`标签。

**HTML**

```
 <form id="ContactForm" action="">
     <label>Name:<input class="input" type="text"></label>    
     <label>Email: <input class="input" type="text"></label>                         
     <label>Phone:<input class="input" type="text"></label>                     
     <a href="#" class="button" onclick="document.getElementById('ContactForm').submit()">Submit</a>
     <a href="#" class="button" onclick="document.getElementById('ContactForm').reset()">Generate code</a>
</form>​ 
```

**CSS**

```
#ContactForm {width:90%; 
    margin:0 auto; 
    background:#e3f8f9; 
    border:#308da2 solid 1px; 
    text-align:center; 
    padding:10px 0}
label{display:block; margin:8px 0}
input{margin-left:15px}
#ContactForm .button {
    display:inline-block;
    font-size:20px;
    font-weight:700;
    color:#fff;
    text-align:center;
    background:url(../images/button_form.gif) top repeat-x #308da2;
    border-radius:10px;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    behavior:url(js/PIE.htc);
    text-decoration:none;
    padding:4px 15px
}​ 
```

**[现场演示](http://jsfiddle.net/AEv9Z/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:29:21.357

将此添加到您的CSS中：

```
#ContactForm div {margin: 0px auto; width:130px} 
```

# c++ - 是否有一种有效的标准算法来栅格包括其内部区域的多边形

> ID：13837589
> 
> 赞同：6
> 
> 时间：2012-12-12T10:22:34.330
> 
> 标签：c++, algorithm, graphics, 2d

> **可能重复：**
> [栅格化 2D 多边形](https://stackoverflow.com/questions/1341399/rasterizing-a-2d-polygon)

我需要对包括其内部区域的多边形进行栅格化（确定位于多边形内的网格的所有图块）。目前，我使用简单的 Bresenham 确定边界图块，但到目前为止我还没有有效的方法来栅格多边形的“内部”（也可能是凹面的）。到目前为止，我的方法是将平铺范围限制为包括多边形的矩形，然后使用多边形缠绕算法确定每个平铺中心是否位于内部或外部。这是低效的，因为它涉及检查每个图块的每个多边形边界段。从第一个角度来看，肯定应该有一个更快的方法，例如某事。就像使用光栅边界缠绕一样。是否有解决这个问题的标准算法，甚至可能是 C++ 中的库实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T10:57:06.103

网上有很多资源，例如：

*   [使用 C 代码示例的高效多边形填充算法](http://alienryderflex.com/polygon_fill/)；

# objective-c - Cocos2d：替换的场景仍然活跃

> ID：13837591
> 
> 赞同：0
> 
> 时间：2012-12-12T10:22:36.623
> 
> 标签：objective-c, xcode, cocos2d-iphone

我正在尝试处理 cocos2d，但遇到了问题。我会尽量简洁明了，我有一个包含 Level1.h 和 Level1.m 文件的场景 [http://pastebin.com/BdZqpXBb](http://pastebin.com/BdZqpXBb) 和我的下一个场景：[http://pastebin.com/1YPy0E9f](http://pastebin.com/1YPy0E9f) 当我从 Level1 切换时.m 到下一个场景或主菜单，似乎一切都发生了变化，我从 Level1.m 看不到任何东西，但精灵仍然处于活动状态，并且在我触摸它们时播放声音。为什么会这样？我怎样才能杀死他们并删除？这是我的图层和场景逻辑或内存管理的问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:52:36.243

这是一个内存管理问题。你的场景已经泄露，它还没有被释放。也许您在某处保留了对它的强烈引用？

所有这些变量，它们都放在大括号内的@interface 部分，而不是在@implementation 下面。因为它们现在的方式使它们成为全局变量，而不是每个实例的变量。由于它们是全局的，因此当您更改场景时，这些变量所保留的引用不会被释放。

# heroku - 在 Heroku 上运行多个不同的进程

> ID：13837595
> 
> 赞同：1
> 
> 时间：2012-12-12T10:22:43.120
> 
> 标签：heroku

我一直在互联网上搜索，但我似乎无法找到我确切问题的答案。

我有一个使用参数运行的 ruby​​ 脚本。例如追加.rb

如果我调用 ruby​​ Append.rb 0 - 这将启动一个线程并执行一些逻辑

如果我调用 ruby​​ Append.rb 2000 - 这将启动一个新线程并执行不同的逻辑

如果我设置了一个 Procfile，并使用“fromen start”在本地运行，则两个脚本会同时触发并且可以正常工作。

Procfile 看起来像这样：

工人：红宝石 Append.rb 0

工人：红宝石 Append.rb 1000

如果我在 Heroku 中做同样的事情，它将启动 2 个 dynos，但两者都会触发：

追加.rb 1000

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:23:52.407

除此之外的任何东西`web`都只是一个标识该进程的abritrary字符串，不需要调用它`worker`。但是，该字符串确实需要是唯一的。因此，只需将其称为不同的名称：

```
worker_0: ruby Append.rb 0
worker_1000: ruby Append.rb 1000 
```

然后，您可以在缩放命令中使用这些标识符：

```
heroku ps:scale worker_0+1
heroku ps:scale worker_1000=1 
```

等等。有关更多 Procfile 信息，请参见此处： [http ://neilmiddleton.com/the-procfile-is-your-friend/](http://neilmiddleton.com/the-procfile-is-your-friend/)

# c# - 将 EMGUCV VectorOfKeyPoint 保存到 XML 并再次加载

> ID：13837608
> 
> 赞同：0
> 
> 时间：2012-12-12T10:23:41.990
> 
> 标签：c#, .net, opencv, emgucv

使用 EMGUCV，对于 C#，可以将 Matrix 保存为 XML，以便以后读取。由于 VectorOfKeyPoint 是一个 Serializable 类，它也可以保存到 XML 文件中。尽管如此，当它打开时，这个 UnmanagedObject VectorOfKeyPoint 是空的，不能使用。

是否有可能以这种方式做某事，也就是说，为了从 XML 加载 VectorOfKeyPoint 并以相同的方式使用它？

如今，如 EMGU Wiki 中所述，工作代码已更改为 VectorOfKeyPoint：

[从/到 XML 解析](http://www.emgu.com/wiki/index.php/Working_with_Images#XML_Serialization)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:23:52.050

终于可以做到了。

可以序列化它的点，而不是序列化 VectorOfKeyPoint 本身（这不起作用）。

例如。

序列化：

```
VectorOfKeyPoint vectorOfKeyPoints = new VectorOfKeyPoint();
StringBuilder sb = new StringBuilder();
MKeyPoint[] keyPoints = vectorOfKeyPoints.ToArray();
(new XmlSerializer(typeof(MKeyPoint[]))).Serialize(new StringWriter(sb), keyPoints);
xmlKeyPoints = sb.ToString(); 
```

反序列化：

```
XmlReader xmlReader = XmlReader.Create(new StringReader(xmlStr)); 
MKeyPoint[] arrayOfKeyPoints = (MKeyPoint[])(new XmlSerializer(typeof(MKeyPoint[]))).Deserialize(xmlReader);
VectorOfKeyPoint vectorOfKeyPoints = new VectorOfKeyPoint();
vectorOfKeyPoints.Push(arrayOfKeyPoints); 
```

# java - 在 Java (Android) 中缓冲远程方法调用

> ID：13837610
> 
> 赞同：3
> 
> 时间：2012-12-12T10:23:42.643
> 
> 标签：java, android, method-call

我有一个客户端（android）-服务器应用程序，其中包含要分发给用户的任务。用户可以看到所有可用的任务，当他输入一个任务时，客户端会向服务器发送一个“READ”通知，表示该任务已被读取。

当android客户端上的连接断开时，我想缓冲服务器调用，并在连接恢复后执行它们。

用例：

连接中断，用户 A 打开 task1。客户端将在其服务层调用句柄，但该服务在连接恢复之前不会调用服务器上的 REST 句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:53:51.370

我会创建：

*   `Command`表示要执行的操作（与服务器交互）的类。在此对象中存储信息，例如`endpointUrl`、以及执行对服务器的调用所需的任何其他信息。使这个类可序列化。`httpMethod``parameters`

*   一个`Executor`类，给定 a `Command`，可以执行操作（使用正确的参数和所有内容调用服务器端点）。

当`Executor`收到由于服务器关闭而无法执行的命令时，它会序列化此命令。如果应用程序因挂起的命令而停止，则它需要位于永久存储（而不是内存）中。

当应用程序启动时，您应该添加逻辑以反序列化所有命令并执行它们。您还可以在网络状态上实现侦听器，当连接恢复时，执行与启动相同的操作：反序列化命令并执行它们。

# python - 在python中执行shell命令：字符串错误

> ID：13837612
> 
> 赞同：1
> 
> 时间：2012-12-12T10:23:57.437
> 
> 标签：python, cmd, windows-shell

我想在每个 Python 的 windows shell cmd.exe 上执行一个批处理文件和一个命令。它的这个命令：

`$cmd.exe /k ""C:\Program Files(x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 & msbuild ALL_BUILD.vcxproj"`

当我在命令提示符下手动输入此行时，它可以工作。它启动一个新的 shell，执行批处理文件`vcvarsall.bat`（带有参数 x86），然后在 shell 中执行 msbuild ALL_BUILD.vcxproj。引用路径是因为它包含空格。

现在，如果我尝试使用以下命令在 python 中执行此命令：

`subprocess.call(["cmd.exe", "/k", '"C:/Program Files (x86)/Microsoft Visual Studio 10.0/VC/vcvarsall.bat" x86 & msbuild ALL_BUILD.vcxproj'])`

我总是在控制台上收到此错误：

> 找不到命令 "\"C:/Program Files (x86)/Microsoft Visual Studio 10.0/VC/vcvarsall.bat\""。

为什么命令以 "\"C: 而不是我输入的 "C: ?? 开头？有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:15:26.033

我拥有的 Windows 命令行参考中的以下内容似乎相关：

> * 使用多个命令
> 
> 您可以使用命令分隔符**&&**分隔的多个命令用于字符串，但必须将它们括在引号中（例如，“command&&command&&command”）。
> 
> * 处理引号
> 
> 如果您指定 /c 或 /k，cmd 会处理字符串的其余部分，并且**仅当满足以下所有条件时才会保留引号**：
> 
> ```
> o   You do not use /s. 
> o   You use exactly one set of quotation marks. 
> o   You do not use any special characters within the quotation marks (for 
>     example: &<>( ) @ ^ |). 
> o   You use one or more white-space characters within the quotation marks. 
> o   The string within quotation marks is the name of an executable file. 
>     If the previous conditions are not met, string is processed by examining the first 
>     character to verify whether or not it is an opening quotation mark. If the first 
>     character is an opening quotation mark, it is stripped along with the closing 
>     quotation mark. Any text following the closing quotation marks is preserved. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:26:30.247

试试这个：

```
 '"C:\Program Files(x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 & msbuild ALL_BUILD.vcxproj' 
```

你不能在 "" - " 里面使用（它会被转义）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:42:18.040

on 命令行`"x x"`相当于一个`'x x'`in subprocess.call。最终你可以留下一些`"`。

但是..你试过`os.system`吗？

```
import os

os.system('cmd.exe /k ""C:\Program Files(x86)\Microsoft Visual Studio 10.0\VC vcvarsall.bat" x86 & msbuild ALL_BUILD.vcxproj"') 
```

# c# - 从 Windows 服务运行 Windows 窗体应用程序

> ID：13837614
> 
> 赞同：0
> 
> 时间：2012-12-12T10:24:02.693
> 
> 标签：c#, winapi, windows-services

我们有一个第三方遗留软件，我们需要从服务中运行，我们希望使用窗口消息来自动化它来点击按钮、抑制消息框等。

问题是我似乎无法在表单处于活动状态时启动进程，我可以使用`Process.GetProcessesByName("ProcessName");`但`MainWindowHandle`and`MainWindowTitle`为空来检索进程。

有没有办法从服务启动 Windows 客户端程序以便正确创建表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:56:32.177

服务在与用户桌面不同的会话中运行，即臭名昭著的会话 0。自 Vista 以来，由于破碎攻击的长期问题，它被隔离，谷歌“会话 0 隔离”以了解更多信息。

会话 0 仍然有一个桌面，您只是无法切换到它。获取 null MainWindowHandle 的最典型诊断方法是等待时间不够长以允许进程创建它。您至少需要 Process.WaitForInputIdle()。

这并不能完全保证解决方案，您仍然有一个非常严重的问题检测到程序行为不端。或者就此而言， MainWindowHandle 实际上是启动屏幕的句柄而不是主窗口，因此由于启动屏幕被关闭，因此为 null。或者该程序因使用不同的用户帐户或不常见的工作目录而无法正常工作而崩溃。等等，在您尝试将其作为服务运行之前，您需要先通过控制台模式程序来解决这些问题。

此时最好将其保留为控制台模式应用程序。因为故障是完全无法诊断的，所以当 IT 人员打电话给您时，您的后端将一直感到痛苦，因为它停止工作并且您也没有什么可看的。

# sql - SQL Server CE 应用程序

> ID：13837617
> 
> 赞同：0
> 
> 时间：2012-12-12T10:24:05.353
> 
> 标签：sql, vb.net, sql-server-2008, sql-server-ce

我编写了一个应用程序，我需要将它放在 SQL Server 上，该应用程序从 SQL Server 数据库中提取信息并将其放入 SQL Server CE 数据库中，但是当我尝试运行它时，我收到错误消息，即 dll 用于 SQL Server CE 不见了。

我需要在服务器上安装 SQL Server CE 还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:06:25.770

您可以在您的应用程序中包含所需的 DLL 文件，无需安装。

# hadoop - Hadoop：从其他 Datanode 读取非本地数据的成本

> ID：13837618
> 
> 赞同：2
> 
> 时间：2012-12-12T10:24:05.230
> 
> 标签：hadoop

默认情况下，Hadoop 在文件的块边界上拆分要由 Mapper 处理的文件。也就是说，这就是 FileInputFormat 实现对 getSplits() 所做的。然后，Hadoop 确保将要由 Mapper 处理的块复制到运行 Mapper 的 Datanode 上。

现在我想知道，如果我需要在此 InputSplit 之外读取（在 RecordReader 中，但这无关紧要），与在 InputSplit 内部读取相比，这会花费我什么 - 假设它之外的数据不存在于读数据节点？

**编辑：**

换句话说： **我是一个 RecordReader**并且被分配了一个**跨越一个文件块的 InputSplit**。我有这个文件块的本地副本（相反，我正在运行的数据节点有），但没有文件的其余部分。现在我**确实需要在 InputSplit 之外阅读**，因为我需要阅读最开始的**文件头**。然后我需要跳过文件中的记录（通过读取记录标题，它告诉我每条记录有多长，而不是跳过那个字节数）。我需要这样做，直到遇到 InputSplit 中的第一条记录。然后我可以开始阅读 InputSplit 中的实际记录。这是确保我将从有效记录边界开始的唯一方法。

**问题**：当我在 InputSplit 之外读取时，非本地文件块中的数据何时被复制？这是一次完成一个字节（即每次调用 InputStream.read() 一次），还是在我调用 InputStream.read() 直到遇到之前将整个文件块（当前 InputStream 位置的）复制到本地数据节点下一个非本地文件块等？我需要知道这一点，这样我才能估计跳过文件会产生多少开销。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:14:43.207

据我所知，如果数据不驻留在本地数据节点上 - 它不会参与读取它。HDFS 客户端将询问 NameNode 块所在的位置，并直接与相关数据节点对话以获取块。
所以成本将是 - 在远程数据节点上：从磁盘读取，计算 CRC，发送到网络，代码读取数据 - 从网络获取。
我认为集群明智的价格只是网络带宽和一些用于发送、接收的 CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:33:45.930

数据移动通常发生在两种情况下。首先，如果 InputSplit 的大小大于块大小。其次，如果持有该块的节点没有任何空闲槽来启动TaskTracker。在这种情况下，块将被移动到另一个具有空闲槽的节点（最好在同一个机架内）。

# c# - Crystal Report Control 中的垂直对齐

> ID：13837626
> 
> 赞同：0
> 
> 时间：2012-12-12T10:24:41.517
> 
> 标签：c#, crystal-reports

我对水晶报表很陌生。

我到处搜索如何垂直对齐水晶报表对象（例如：顶部、中间、底部），但找不到答案。

我发现我可以使用「horAlignment」属性来设置水平对齐设置。

但我无法设置垂直对齐设置。

我该怎么做才能设置垂直文本对齐。

带着敬意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:10:58.777

我一直在寻找一种方法来做到这一点。这个[论坛帖子](http://scn.sap.com/thread/992159)是我能找到的最接近答案的东西。Crystal Reports 似乎不直接支持它。

# notepad++ - 在 Notepad++ 中清除多个文件的内容

> ID：13837629
> 
> 赞同：1
> 
> 时间：2012-12-12T10:24:52.493
> 
> 标签：notepad++

我正在使用 notepad++ 中的 3 个日志文件。有没有办法一次或两次点击清除所有三个文件的内容？

我搜索了插件，但找不到任何东西。根据我的尝试，一个宏将活动记录在活动文件中，因此如果我更改文件，它不会记录该活动。

一个解决方案会对我有很大帮助，谢谢。

编辑：一旦文件被清除，保存文件也会很棒。记事本++中没有类似批处理命令的事情吗？（顺便说一句，我也尝试了批处理命令来清除文件，但后来我得知系统正在使用该文件，所以我得出结论，这只能从文本编辑器中使用）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T07:50:45.683

录制一个宏 ( `Macro --> Start Recording`)，您可以在其中执行以下步骤

*   打开`Search --> Replace...`
*   选择`Regular expression`
*   输入正则表达式`^.*(\r\n)*`
*   清除内容`Replace with`
*   点击`Replace All in All Opened Documents`
*   单击`Ok`并`Close`
*   点击`Save All`按钮

停止宏录制 ( `Macro --> Stop Recording`) 并保存 ( `Macro --> Save Current Recorded Macro`)。从保存对话框中，您可以为宏分配快捷方式。

现在，您可以随时使用您分配的快捷方式运行此宏。

我已经确认这适用于`Notepad++ 6.2.2`. 但是在 5.8.1 上，正则表达式不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:25:50.277

打开查找：检查使用正则表达式..

如果你想清除一切..

```
Find    :^.*$
Replace :(nothing) 
```

在所有打开的文档中单击替换。

（您也可以（小心地）将相同的概念与“在文件中查找”一起使用）

# python - 使用 Mod_WSGI 在 Apache 后面重新加载 CherryPy 应用程序的源代码

> ID：13837631
> 
> 赞同：2
> 
> 时间：2012-12-12T10:24:53.020
> 
> 标签：python, apache2, mod-wsgi, reload, cherrypy

我正在使用 mod_wsgi 在 Apache2 中提供 CherryPy 应用程序对象。从用户的角度来看，一切似乎都很好，这意味着他/她实际上可以访问应用程序并按预期使用它。但我面临的问题是由于新部署而发出代码更改的信号。

这是 Apache 中的应用程序配置：

```
WSGIDaemonProcess app-name user=someuser group=somegroup processes=4 maximum-requests=1000 inactivity-timeout=3600 umask=0007 python-path="path-to-sources:path-to-python-site-packages"
WSGIScriptAlias /app-url /location/of/wsgi/start/script/wsgi.py
<Directory "/location/or/sources">
  WSGIProcessGroup somename 
</Directory> 
```

wsgi 启动脚本包含以下内容：

```
import sys
import root.index

sys.stdout = sys.stderr

application = root.index.get_wsgi_app()
#which return an object of cherrypy.Application 
```

CherryPy 以“生产模式”运行，这意味着：

```
 'engine.autoreload_on': False,
    'checker.on': False,
    'tools.log_headers.on': False,
    'request.show_tracebacks': False,
    'request.show_mismatched_params': False,
    'log.screen': False, 
```

之后我手动覆盖 engine.autoreload_on 并将其设置为 True 因为我希望应用程序接收代码更改并重新启动，但这并没有预期的影响。我知道触摸 wsgi 脚本文件或重新启动 Apache 应该会产生我想要的结果，但是 CherryPy 应该自己检测这些更改并相应地重新启动，就像在运行本地开发服务器时一样。据我所知，唯一的区别是我在本地调用cherrypy.tree.mount，而在生产中我调用cherrypy.Application。

底线：如何让我的生产应用程序接受代码更改并重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:24:04.913

CherryPy 与任何其他 WSGI 框架一样具有请求处理程序（和 WSGI 应用程序）。但它也有一个*引擎*，它处理请求本身之外发生的所有事情。当你独立运行时，这包括很多进程管理：PID、守护进程等。当你在 Apache 中运行时，很多事情已经为你完成了，看起来你不需要运行引擎。不对。您仍然应该至少运行它来处理信号，以及记录任何后台任务，并可能将代码挂钩到线程启动和停止。在这种情况下，Autoreloader 依赖于正在运行的引擎。有关Engine 对象的更多信息，请参见[http://docs.cherrypy.org/stable/concepts/engine.html和](http://docs.cherrypy.org/stable/concepts/engine.html)[http://tools.cherrypy.org/wiki/ModWSGI](http://tools.cherrypy.org/wiki/ModWSGI)对于一些示例代码。

# php - 在 PHP 数组定义中显示重复键警告

> ID：13837636
> 
> 赞同：3
> 
> 时间：2012-12-12T10:25:00.550
> 
> 标签：php

是否有可能在以下代码中收到警告？

```
error_reporting(E_ALL);

  $s = array(
      'a' => '1',
      'a' => '1'
   );

var_export( $s ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:39:31.767

您唯一的希望（除了`count`-ing 自己）是您的编辑器足够聪明，可以突出显示错字。此屏幕截图来自 PHPStorm：

![在此处输入图像描述](../Images/a4da285a506fac73a9dc110e0a4a3a15.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:34:34.110

在这种情况下，您不能使用标准数组真正引发错误。但是，您可以查看扩展 SPL ArrayObject，并在更新/重新声明属性时在其中抛出错误。

更新：类似的东西：

```
class MyStrictArray extends ArrayObject
{
    public function offsetSet($index, $value)
    {
        if ($this->offsetExists($index)) {
            trigger_error("Can't redeclare a property", E_USER_ERROR);
            return;
        }

        return parent::offsetSet($index, $value);
    }
 }

 // and to use it.
 $array = new MyStrictArray();
 $array['a'] = 'foo';
 $array['a'] = 'bar'; // triggers error 
```

# android - 如何在 Android 4.0 和 4.1 上检测到 Android 设备是“手机”（UI 两栏样式）或“平板电脑”（UI 底部一栏样式）？

> ID：13837637
> 
> 赞同：2
> 
> 时间：2012-12-12T10:25:02.633
> 
> 标签：android, user-interface, tablet, handset

是的。我知道这是一个旧答案。先别打我。我检查了这些问题，总是轮到确定屏幕尺寸、密度等。或者有人可能会说平板电脑的定义还没有定义。

然后我可以给它一个“定义”。就是Android 3.x、4.0、4.1的System UI不同。（4.2已经统一）。

“HandSet”有两个栏：
状态栏：在屏幕顶部，wifi图标，时间等
导航栏：在屏幕底部，BACK，HOME，CURRENT_APPS按钮

“平板电脑”底部只有一个栏，即组合栏。

我不在乎其他 Android 版本的设备是手机还是平板电脑。它想知道的原因是“手机”可以而“平板电脑”不能的隐藏底栏。见[http://bin-liu.blogspot.hk/2012/03/how-to-hide-and-display-navigation-bar.html](http://bin-liu.blogspot.hk/2012/03/how-to-hide-and-display-navigation-bar.html)。我可以在“手机”上计算额外的屏幕空间`getRawWidth()`，`getRawHeight()`方法）。我也可以在“平板电脑”上做，但我不应该这样做，因为酒吧从不隐藏。

编辑：好的，我知道不能绝对确定手机必须是“两栏式”，平板电脑必须是“一底栏式”。我想检测 Android 设备在 Android 4.0 或 4.1 上是“两栏式”或“一个底栏式”的天气。

# javascript - 液体布局，JS解决方案

> ID：13837638
> 
> 赞同：2
> 
> 时间：2012-12-12T10:25:05.610
> 
> 标签：javascript, css, animation, layout

我有一个使用 CSS 浮动的居中液体布局。主要内容是相等的高度/宽度框，当浏览器窗口调整大小时，css 浮动重新定位。有没有一种简单的方法利用 JS/JQuery 或类似的方法来动画浮动重新定位时的移动？

我已经探索了 JQuery Masonry、Isotope 和其他一些，但我想知道是否有一种简单的轻量级方法可以做到这一点，而无需计算每次宽度变化时所有盒装的位置。

将不胜感激任何想法，搜索关键字等:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:48:19.017

查看 css 过渡和动画。你不需要javascript。

# asp.net - ASP.Net MVC4 中的 KnockoutJS

> ID：13837639
> 
> 赞同：0
> 
> 时间：2012-12-12T10:25:09.667
> 
> 标签：asp.net, asp.net-mvc-4, knockout.js

我在构建带有淘汰赛的 SPA 时遇到了问题！我为一个视图获得了多个视图模型！

在这个 jsFiddle 中，一切正常[http://jsfiddle.net/4A87x/11/](http://jsfiddle.net/4A87x/11/)

但是一旦我尝试在 ASP.NET 中使用这些，它就不再起作用了！

我试过这样：

```
<form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }"> 
              //Some Code
</form>

<form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }">
              //SOME CODE
</form>

<form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }"> 
              //Some Code
</form>

<script type="text/javascript">
    $(function () {
        var masterViewModel = {

            loginVM: ko.observable(),
            detailsVM: ko.observable(),
            projectStartVM: ko.observable()

        };

        var LoginVM = function () {
             //Some Code
        };

        var DetailsVM = function () {
          //Some Code

        };

        var ProjectStartVM = function () {
           //Some Code

        };

        masterViewModel.loginVM(new LoginVM());
        ko.applyBindings(masterViewModel);
    });
</script> 
```

有人知道这段代码有什么问题吗？

# jquery - 如何从 JQuery 调用 ac# Rest Service

> ID：13837642
> 
> 赞同：0
> 
> 时间：2012-12-12T10:25:25.137
> 
> 标签：jquery, rest, .net-4.0

我有一个用 .NET4 C# 代码编写的 REST 服务，帮助页面中显示以下 url 来调用该服务。

```
http://myservice/ALWebService/{ASS} 
```

尽管我没有例外，但我终生无法让我的 jQuery ajax 调用该服务，但它总是在回调中返回错误。

我用来调用这个东西的代码是：

```
function DoPost() {
        $.ajax({
                        cache: false,
                        url: ' http://myservice/',
                        dataType: "JSON",
                        type: 'POST',
                        contentType: "application/json",
                        data: 'ass{%22Id%22:10,%22Urn%22:%22AS1234%22,%22Description%22:%22Test%20Description%22,%22AssetStatusId%22:3,%22ExpiryDate%22:%220001-01-01T00:00:00%22,%22OwnerId%22:0,%22TeamId%22:0,%22ProductCode%22:null,%22Keywords%22:null}',      

                        success: function (transactionid, response, arguments) {
                            alert("entry successfully added");
                        },
                        error: function (transactionid, response, arguments) {
                            alert("add entry failed: " + response.responseText);
                        }

                    });

    } 
```

.NET 代码：

```
[WebInvoke(UriTemplate = "{ass}")]
    public int AddToLibrary(string ass)
    {

        return 1;
    } 
```

谁能看到我可能做错了什么，因为我似乎无法做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:28:45.460

URL 与建议的不匹配，试试这个：

```
url: 'http://myservice/ALWebService/', 
```

# asp.net-mvc-3 - 更改请求标头 - ASP.NET 中的接受编码和接受语言

> ID：13837649
> 
> 赞同：0
> 
> 时间：2012-12-12T10:25:51.520
> 
> 标签：asp.net-mvc-3, encoding, request-headers, http-accept-language

我希望我的 .html 文件以 utf-8 编码。我将元数据放在 html 文件和 Web.config 中的全球化设置中，但我仍然观察到我的 GET 请求包含请求标头，例如：

```
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8 
```

如何更改它们以添加 utf-8 和“tr”语言？这是我在服务器响应中看到奇怪字符的原因吗？像“ç”或“ö”这样的字符应该在我的 html 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:51:47.880

标`Accept-Encoding`头告诉服务器您可以处理哪些压缩算法，例如，服务器可能会发送压缩后的响应，因为您告诉它您可以处理它。

您可以处理的字符编码在`Accept-Charset`标头中发送给服务器。例如`Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3`

无论如何，如果您只是希望您的 html 文件以 UTF-8 编码，您需要做的就是以 UTF-8 编码保存这些文件。这取决于您的文本编辑器。

# android - 使用 USB 的 android 平板电脑之间的通信

> ID：13837651
> 
> 赞同：0
> 
> 时间：2012-12-12T10:25:54.487
> 
> 标签：android, usb

我想制作一个简单的应用程序，将 100 MP 文件从一台 android 平板电脑传输到另一台平板电脑。两者都有冰淇淋三明治和 USB 主机端口。如何执行此操作？我无法提交简单的代码以将文件从一个选项卡发送到另一个选项卡。

# css - 从原始和缩放框计算变换原点

> ID：13837655
> 
> 赞同：1
> 
> 时间：2012-12-12T10:26:03.360
> 
> 标签：css, transform

基于原始 rect1 (x1, y1, w1, h1) 和已知的缩放 rect2 (x2, y2, w2, h2) 找出使用什么变换原点的公式是什么？我需要一个可重复使用的公式，因为 rect2 可以放置在任何地方。

换句话说，我知道一个小矩形的边界，并希望它通过应用正确的变换原点坐标（以 px 或 % 为单位）过渡到更大的矩形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:32:36.490

在简单的比例尺中，变换原点的 x 坐标为 tx 的距离 x1 -> tx 和 tx -> (x1+w1) 之间的比率在比例尺后保持不变。用顺序的话：

(tx-x1)/w1 = (tx-x2)/w2

求解 tx，你得到：

tx = (w2/(w2-w1)) * (x1 - (x2 * w1)/w2)

类似的公式将产生您的 ty。

（请注意，如果您将透视与 az 变换一起使用，那么这个公式将是错误的，如果您也不知道透视原点，那么我相信结果将是不确定的，因为透视原点和变换将无限组合原点将产生相同的结果。如果您确实知道透视原点，那么数学仍然相当复杂。）

# java - 从 Struts2 的堆栈中删除拦截器

> ID：13837661
> 
> 赞同：4
> 
> 时间：2012-12-12T10:26:13.390
> 
> 标签：java, struts2, struts2-interceptors, interceptorstack

在`struts.xml`中，我`tokenSession`在我的拦截器堆栈中包含了拦截器，以验证每个请求的令牌。不幸的是，对于 AJAX 请求，同样的效果并不好。执行时我得到了`invalid.token`响应`actionInvocation.invoke()`。

因此，我想停止为 AJAX 请求（单独）执行 tokenSession 拦截器。我有一个自定义拦截器（日志记录），它在拦截器之前被调用`tokenSession`。`tokenSession`是否可以根据请求类型（如果是 AJAX 请求）从日志拦截器的堆栈中删除拦截器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:47:45.037

为您的动作使用不同的拦截器堆栈，或为不同的包使用不同的拦截器堆栈，并将所有动作分组到正确的包中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:43:50.763

令牌拦截器扩展`MethodFilterInterceptor`了这意味着您可以根据方法名称排除拦截器的执行。

在你的拦截器堆栈中配置它：

```
<interceptor-ref name="token">
   <param name="excludeMethods">your_ajax_methods_comma_separated</param>
</interceptor-ref> 
```

另一种解决方案是为您的 AJAX 操作使用不同的拦截器堆栈。

# c# - 如何开始一个列表 在平行下？

> ID：13837662
> 
> 赞同：17
> 
> 时间：2012-12-12T10:26:14.113
> 
> 标签：c#, task-parallel-library

我有一个返回 a 的对象`System.Threading.Tasks.Task`：

```
public class MyClass 
{
    public Task GetTask(object state, CancellationToken cancellationToken)
    {
        return new Task(Execute, state, cancellationToken);
    }

    public void Execute(object context)
    {
        //do stuff
    }
} 
```

在其他地方我有一个`List<MyClass>`，所以我执行以下操作来获得一个`List<Task>`：

```
var myTaskList = myClassList.Select(p => p.GetTask(null, cancellationToken)).ToList(); 
```

现在我有了 ，我`List<Task>`怎样才能并行启动它们？有没有更简洁的编码方式？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-12T10:33:53.663

“并行启动它们”是什么意思？当您运行 时`Task`，它会在另一个线程上执行，因此您的意思可能很简单：

```
foreach(var task in myTaskList)
{
    task.Start();
} 
```

但是，如果您有太多想要将启动逻辑移动到另一个线程，您可以在另一个线程/任务中调用上述代码（我正在使用`List<T>.ForEach`更短的代码）。

```
Task.Factory.StartNew(() => myTaskList.ForEach(task => task.Start())); 
```

或者您可以使用 TPL 的`Parallel.ForEach`. 这仍然会阻塞执行线程，直到所有任务都启动，但它会在内部线程池上执行启动操作，因此对于大量项目和一些空闲的 CPU 内核/线程，它可能会大大加快启动速度。

```
Parallel.ForEach(myTaskList, task => task.Start()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T10:28:47.860

我可能误解了你的问题，但不只是在每项任务上调用 Start 吗？

```
foreach(Task task in myTaskList) 
{
    task.Start();
} 
```

等待所有任务完成：

```
Task.WaitAll(myTaskList.ToArray()); 
```

# c++ - 在 static_assert() 编译时显示整数

> ID：13837668
> 
> 赞同：17
> 
> 时间：2012-12-12T10:26:41.293
> 
> 标签：c++, macros, c++11, integer, static-assert

这是我正在尝试做的简化版本

```
enum First
{
    a,
    b,
    c,
    nbElementFirstEnum,
};
enum Second
{
    a,
    b,
    c,
    nbElementSecondEnum,
};

static_assert(
    First::nbElementFirstEnum == Second::nbElementSecondEnum,
    "Not the same number of element in the enums.");
/*static_assert(  
    First::nbElementFirstEnum == Second::nbElementSecondEnum, 
    "Not the same number of element in the enums." + First::nbElementFirstEnum + " " + Second::nbElementSecondEnum);*/ 
```

但是我希望能够在断言消息中打印 First::nbElementFirstEnum 和 Second::nbElementSecondEnum 的值（就像在显然不起作用的注释版本中一样）。我尝试使用带有“#”的宏连接。我还尝试使用可变参数模板，使用 %10 检索每个数字并将“0”字符添加到检索到的值中，但我得到的只是一个 constexpr char[]。

所以我的问题是如何让我的枚举值打印在字符串文字中。

可能的重复：

[C++11 static_assert：参数化错误消息](https://stackoverflow.com/questions/11050511/c11-static-assert-parameterized-error-messages)

[在 static_assert 输出中集成类型名称？](https://stackoverflow.com/questions/6415186/integrate-type-name-in-static-assert-output)

最有趣的主题是这个： [在编译时打印 sizeof(T)](https://stackoverflow.com/questions/7931358/printing-sizeoft-at-compile-time) 但我不想有警告，也不想删除代码来了解这些值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T10:54:12.483

这基本上是可行的，尽管可以通过一点努力来打破（通过使 V1 和 V2 总和为 256 的倍数）。所以，我认为您的解决方案更丑陋但更强大。

```
template <int V1, int V2> struct AssertEquality
{
    static const char not_equal_warning = V1 + V2 + 256;
};

template <int V> struct AssertEquality<V, V>
{
    static const bool not_equal_warning = 0;
};

#define ASSERT_EQUALITY(V1, V2) static_assert( \
    AssertEquality<static_cast<int>(V1), \
                   static_cast<int>(V2)>::not_equal_warning == 0, \
    #V1 " != " #V2 );

// ...

ASSERT_EQUALITY(First::nbElementFirstEnum, Second::nbElementSecondEnum); 
```

输出看起来像：

```
g++ -std=c++0x -c chksz.cpp
chksz.cpp: In instantiation of ‘const char AssertEquality<3, 2>::not_equal_warning’:
chksz.cpp:40:124:   instantiated from here
chksz.cpp:5:53: warning: overflow in implicit constant conversion
chksz.cpp:40:1: error: static assertion failed: "First::nbElementFirstEnum != Second::nbElementSecondEnum" 
```

* * *

作为参考，这个原始版本依赖于 gcc 打印`static_assert`消息，即使布尔条件根本没有编译。

```
template <typename Enum1, int Max1, typename Enum2, int Max2>
struct AssertSameSizeEnums;

template <typename Enum1, int EnumMax, typename Enum2>
struct AssertSameSizeEnums<Enum1, EnumMax, Enum2, EnumMax> {};
// only define the special case where Max1 and Max2 have the same integer value

#define ASSERT_SAME_SIZE_ENUMS(E1, M1, E2, M2) static_assert( \
    sizeof(AssertSameSizeEnums<E1, E1::M1, E2, E2::M2>), \
    #E1 "::" #M1 " != " #E2 "::" #M2 );

enum class First {
    a, b, c, nbElementFirstEnum,
};
enum class Second {
    a, b, c, nbElementSecondEnum,
};

ASSERT_SAME_SIZE_ENUMS(First, nbElementFirstEnum, Second, nbElementSecondEnum); 
```

请注意，我将您的枚举更改为强类型，因为否则枚举的常量名称会发生​​冲突。如果你有弱类型枚举，传递给宏的 and 应该命名封闭范围`First`。`Second`

现在，如果我注释掉其中一个值（因此枚举的大小不同），我得到：

```
g++ -std=c++0x -c chksz.cpp
chksz.cpp:25:113: error: invalid application of ‘sizeof’ to incomplete type ‘AssertSameSizeEnums<First, 3, Second, 2>’
chksz.cpp:25:1: error: static assertion failed: "First::nbElementFirstEnum != Second::nbElementSecondEnum" 
```

看看整数值如何在不完整类型错误中显示，以及在静态断言中的符号名称？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-16T09:32:29.993

首先是在编译器输出中打印模板参数值的辅助类：

```
template<size_t A, size_t B> struct TAssertEquality {
  static_assert(A==B, "Not equal");
  static constexpr bool _cResult = (A==B);
}; 
```

然后你需要在哪里测试它：

```
static constexpr bool _cIsEqual = 
  TAssertEquality<First::nbElementFirstEnum, Second::nbElementSecondEnum>::_cResult; 
```

编译器错误消息如下所示：

> 注意：请参阅正在编译的类模板实例化 'TAssertEquality<32,64>' 的参考

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T12:36:13.930

这是我找到的解决方案，我们收到一条带有值和 static_assert 错误消息的警告消息。

```
template<int N>
struct TriggerOverflowWarning
{
    static constexpr char value() { return N + 256; }
};

template <int N, int M, typename Enable = void>
struct CheckEqualityWithWarning
{
    static constexpr bool value = true;
};

template <int N, int M>
struct CheckEqualityWithWarning<N, M, typename std::enable_if<N != M>::type>
{
    static constexpr bool value = (TriggerOverflowWarning<N>::value() == TriggerOverflowWarning<M>::value());
};

static constexpr int a = 9;
static constexpr int b = 10;

static_assert(CheckEqualityWithWarning<a, b>::value, "Mismatch."); 
```

这是 gcc 输出：

```
g++ -std=c++11 -c test.cpp
test.cpp: In instantiation of 'static constexpr char TriggerOverflowWarning<N>::value() [with int N = 10]':
test.cpp:18:112:   required from 'constexpr const bool CheckEqualityWithWarning<9, 10>::value'
test.cpp:24:51:   required from here
test.cpp:6:52: warning: overflow in implicit constant conversion [-Woverflow]
test.cpp: In instantiation of 'static constexpr char TriggerOverflowWarning<N>::value() [with int N = 9]':
test.cpp:18:112:   required from 'constexpr const bool CheckEqualityWithWarning<9, 10>::value'
test.cpp:24:51:   required from here
test.cpp:6:52: warning: overflow in implicit constant conversion [-Woverflow]
test.cpp:24:5: error: static assertion failed: Mismatch. 
```

它基于此解决方案：[在编译时打印 sizeof(T)](https://stackoverflow.com/questions/7931358/printing-sizeoft-at-compile-time)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-09T20:46:17.370

`C++11`和`decltype`：_

```
#define UTILITY_PP_STRINGIZE_(x) #x
#define UTILITY_PP_STRINGIZE(x)  UTILITY_PP_STRINGIZE_(x)

#define STATIC_ASSERT_TRUE(exp, msg)    static_assert(::utility::StaticAssertTrue<decltype(exp), (exp)>::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_TRUE1(exp, v1, msg) \
    static_assert(::utility::StaticAssertTrue<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_TRUE2(exp, v1, v2, msg) \
    static_assert(::utility::StaticAssertTrue<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)>, \
                  ::utility::StaticAssertParam<decltype(v2), (v2)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_TRUE3(exp, v1, v2, v3, msg) \
    static_assert(::utility::StaticAssertTrue<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)>, \
                  ::utility::StaticAssertParam<decltype(v2), (v2)>, \
                  ::utility::StaticAssertParam<decltype(v3), (v3)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_TRUE4(exp, v1, v2, v3, v4, msg) \
    static_assert(::utility::StaticAssertTrue<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)>, \
                  ::utility::StaticAssertParam<decltype(v2), (v2)>, \
                  ::utility::StaticAssertParam<decltype(v3), (v3)>, \
                  ::utility::StaticAssertParam<decltype(v4), (v4)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)

#define STATIC_ASSERT_FALSE(exp, msg)   static_assert(::utility::StaticAssertFalse<decltype(exp), (exp)>::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_FALSE1(exp, v1, msg) \
    static_assert(::utility::StaticAssertFalse<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_FALSE2(exp, v1, v2, msg) \
    static_assert(::utility::StaticAssertFalse<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)>, \
                  ::utility::StaticAssertParam<decltype(v2), (v2)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_FALSE3(exp, v1, v2, v3, msg) \
    static_assert(::utility::StaticAssertFalse<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)>, \
                  ::utility::StaticAssertParam<decltype(v2), (v2)>, \
                  ::utility::StaticAssertParam<decltype(v3), (v3)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
#define STATIC_ASSERT_FALSE4(exp, v1, v2, v3, v4, msg) \
    static_assert(::utility::StaticAssertFalse<decltype(exp), (exp), \
                  ::utility::StaticAssertParam<decltype(v1), (v1)>, \
                  ::utility::StaticAssertParam<decltype(v2), (v2)>, \
                  ::utility::StaticAssertParam<decltype(v3), (v3)>, \
                  ::utility::StaticAssertParam<decltype(v4), (v4)> >::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)

#define STATIC_ASSERT_EQ(v1, v2, msg)   static_assert(::utility::StaticAssertEQ<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " == " UTILITY_PP_STRINGIZE(v2) "\": " msg)
#define STATIC_ASSERT_NE(v1, v2, msg)   static_assert(::utility::StaticAssertNE<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " != " UTILITY_PP_STRINGIZE(v2) "\": " msg)
#define STATIC_ASSERT_LE(v1, v2, msg)   static_assert(::utility::StaticAssertLE<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " <= " UTILITY_PP_STRINGIZE(v2) "\": " msg)
#define STATIC_ASSERT_LT(v1, v2, msg)   static_assert(::utility::StaticAssertLT<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " < "  UTILITY_PP_STRINGIZE(v2) "\": " msg)
#define STATIC_ASSERT_GE(v1, v2, msg)   static_assert(::utility::StaticAssertGE<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " >= " UTILITY_PP_STRINGIZE(v2) "\": " msg)
#define STATIC_ASSERT_GT(v1, v2, msg)   static_assert(::utility::StaticAssertGT<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " > "  UTILITY_PP_STRINGIZE(v2) "\": " msg)

namespace utility
{
    template <typename T, T v>
    struct StaticAssertParam
    {
    };

    template <typename T, T v, typename ...Params>
    struct StaticAssertTrue;

    template <typename T, T v>
    struct StaticAssertTrue<T, v>
    {
        static const bool value = (v ? true : false);
    };

    template <typename T, T v, typename ...Params>
    struct StaticAssertTrue
    {
        static const bool value = (v ? true : false);
        static_assert(v ? true : false, "StaticAssertTrue with parameters failed.");
    };

    template <typename T, T v, typename ...Params>
    struct StaticAssertFalse;

    template <typename T, T v>
    struct StaticAssertFalse<T, v>
    {
        static const bool value = (v ? false : true);
    };

    template <typename T, T v, typename ...Params>
    struct StaticAssertFalse
    {
        static const bool value = (v ? false : true);
        static_assert(v ? false : true, "StaticAssertFalse with parameters failed.");
    };

    template <typename U, typename V, U u, V v>
    struct StaticAssertEQ
    {
        static const bool value = (u == v);
        static_assert(u == v, "StaticAssertEQ failed.");
    };

    template <typename U, typename V, U u, V v>
    struct StaticAssertNE
    {
        static const bool value = (u != v);
        static_assert(u != v, "StaticAssertNE failed.");
    };

    template <typename U, typename V, U u, V v>
    struct StaticAssertLE
    {
        static const bool value = (u <= v);
        static_assert(u <= v, "StaticAssertLE failed.");
    };

    template <typename U, typename V, U u, V v>
    struct StaticAssertLT
    {
        static const bool value = (u < v);
        static_assert(u < v, "StaticAssertLT failed.");
    };

    template <typename U, typename V, U u, V v>
    struct StaticAssertGE
    {
        static const bool value = (u >= v);
        static_assert(u >= v, "StaticAssertGE failed.");
    };

    template <typename U, typename V, U u, V v>
    struct StaticAssertGT
    {
        static const bool value = (u > v);
        static_assert(u > v, "StaticAssertGT failed.");
    };
} 
```

**用法：**

```
struct A
{
    int a[4];
};

#define Float1 1.1f
#define Float2 1.2f

int main()
{
    static const int a = 3;
    static const long b = 5;
    static const long c = 7;
    static const long d = 9;
    STATIC_ASSERT_TRUE4(a == b && c == d, a, b, c, d, "long_expression_with_multiple_integral_variables");

    #pragma message("----------------------------------------")

    STATIC_ASSERT_TRUE(Float1 == Float2, "expression_with_floats");

    #pragma message("----------------------------------------")

    STATIC_ASSERT_EQ(10, sizeof(A), "simple_integral_expression_1");

    #pragma message("----------------------------------------")

    STATIC_ASSERT_EQ(11, sizeof(A), "simple_integral_expression_2");
    return 0;
} 
```

**MSVC2017：**

```
source_file.cpp(72): error C2338: StaticAssertTrue with parameters failed.
source_file.cpp(148): note: see reference to class template instantiation 'utility::StaticAssertTrue<bool,false,utility::StaticAssertParam<const int,3>,utility::StaticAssertParam<const long,5>,utility::StaticAssertParam<const long,7>,utility::StaticAssertParam<const long,9>>' being compiled
source_file.cpp(148): error C2338: expression: "a == b && c == d": long_expression_with_multiple_integral_variables
----------------------------------------
source_file.cpp(152): error C2338: expression: "1.1f == 1.2f": expression_with_floats
----------------------------------------
source_file.cpp(95): error C2338: StaticAssertEQ failed.
source_file.cpp(156): note: see reference to class template instantiation 'utility::StaticAssertEQ<int,size_t,10,16>' being compiled
source_file.cpp(156): error C2338: expression: "10 == sizeof(A)": simple_integral_expression_1
----------------------------------------
source_file.cpp(160): error C2338: expression: "11 == sizeof(A)": simple_integral_expression_2 
```

**GCC 4.8.x：**

```
<source>: In instantiation of 'struct utility::StaticAssertTrue<bool, false, utility::StaticAssertParam<const int, 3>, utility::StaticAssertParam<const long int, 5l>, utility::StaticAssertParam<const long int, 7l>, utility::StaticAssertParam<const long int, 9l> >':
<source>:148:5:   required from here
<source>:72:9: error: static assertion failed: StaticAssertTrue with parameters failed.
         static_assert(v ? true : false, "StaticAssertTrue with parameters failed.");
         ^
<source>: In function 'int main()':
<source>:18:5: error: static assertion failed: expression: "a == b && c == d": long_expression_with_multiple_integral_variables
     static_assert(::utility::StaticAssertTrue<decltype(exp), (exp), \
     ^
<source>:148:5: note: in expansion of macro 'STATIC_ASSERT_TRUE4'
     STATIC_ASSERT_TRUE4(a == b && c == d, a, b, c, d, "long_expression_with_multiple_integral_variables");
     ^
<source>:150:63: note: #pragma message: ----------------------------------------
     #pragma message("----------------------------------------")
                                                               ^
<source>:4:41: error: static assertion failed: expression: "1.1f == 1.2f": expression_with_floats
 #define STATIC_ASSERT_TRUE(exp, msg)    static_assert(::utility::StaticAssertTrue<decltype(exp), (exp)>::value, "expression: \"" UTILITY_PP_STRINGIZE(exp) "\": " msg)
                                         ^
<source>:152:5: note: in expansion of macro 'STATIC_ASSERT_TRUE'
     STATIC_ASSERT_TRUE(Float1 == Float2, "expression_with_floats");
     ^
<source>:154:63: note: #pragma message: ----------------------------------------
     #pragma message("----------------------------------------")
                                                               ^
<source>: In instantiation of 'struct utility::StaticAssertEQ<int, long unsigned int, 10, 16ul>':
<source>:156:5:   required from here
<source>:95:9: error: static assertion failed: StaticAssertEQ failed.
         static_assert(u == v, "StaticAssertEQ failed.");
         ^
<source>:44:41: error: static assertion failed: expression: "10 == sizeof(A)": simple_integral_expression_1
 #define STATIC_ASSERT_EQ(v1, v2, msg)   static_assert(::utility::StaticAssertEQ<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " == " UTILITY_PP_STRINGIZE(v2) "\": " msg)
                                         ^
<source>:156:5: note: in expansion of macro 'STATIC_ASSERT_EQ'
     STATIC_ASSERT_EQ(10, sizeof(A), "simple_integral_expression_1");
     ^
<source>:158:63: note: #pragma message: ----------------------------------------
     #pragma message("----------------------------------------")
                                                               ^
<source>: In instantiation of 'struct utility::StaticAssertEQ<int, long unsigned int, 11, 16ul>':
<source>:160:5:   required from here
<source>:95:9: error: static assertion failed: StaticAssertEQ failed.
         static_assert(u == v, "StaticAssertEQ failed.");
         ^
<source>:44:41: error: static assertion failed: expression: "11 == sizeof(A)": simple_integral_expression_2
 #define STATIC_ASSERT_EQ(v1, v2, msg)   static_assert(::utility::StaticAssertEQ<decltype(v1), decltype(v2), (v1), (v2)>::value, "expression: \"" UTILITY_PP_STRINGIZE(v1) " == " UTILITY_PP_STRINGIZE(v2) "\": " msg)
                                         ^
<source>:160:5: note: in expansion of macro 'STATIC_ASSERT_EQ'
     STATIC_ASSERT_EQ(11, sizeof(A), "simple_integral_expression_2");
     ^ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-22T07:45:53.457

上述问题在于它们依赖于不同编译器上可能存在或不存在的警告，并且可能并非所有人都一直打开。（事实上​​，其中一个在所有警告打开的情况下都不会显示 Clang 的值。）

根据 C++ 标准，此解决方案借鉴了此处的其他解决方案，但利用了类型系统，因此始终是实际错误。不幸的是，这确实提前停止并且不会触发 static_assert 错误本身，这是一个缺点。这已经在 GCC 5.3 和 Clang 3.7 上进行了测试，没有打开任何警告。

```
template <long V1, long V2>
struct StaticAssertEquality
{
  static constexpr void* NotEqualError() { return V1 + V2; }
};

template <long V>
struct StaticAssertEquality<V, V>
{
  static constexpr bool NotEqualError = true;
};

#define STATIC_ASSERT_LONG_EQUALITY(V1, V2)                          \
  static_assert(                                                     \
    StaticAssertEquality<static_cast<long>(V1),                      \
                         static_cast<long>(V2)>::NotEqualError,      \
    #V1 " != " #V2)

// ...

STATIC_ASSERT_LONG_EQUALITY(1, 2); 
```

显然，它不适用于所有无符号长整数。作为一个额外的安全捕获，宏可以包含第二个直接`static_assert(V1 == V2, #V1 " != " #V2);`捕获类型转换中任何杂散的意外相等的方法。

Clang 的输出如下所示：

```
file.cpp: error: cannot initialize return object of type 'void *' with an rvalue of type 'long'
  static constexpr void* NotEqualError() { return V1 + V2; }
                                                  ^~~~~~~
file.cpp: note: in instantiation of member function 'StaticAssertEquality<1, 2>::NotEqualError' requested here
  STATIC_ASSERT_LONG_EQUALITY(1, 2);
  ^
file.cpp: note: expanded from macro 'STATIC_ASSERT_LONG_EQUALITY'
                              static_cast<long>(V2)>::NotEqualError,      \
                                                      ^
1 error generated. 
```

并使用 GCC 输出：

```
file.cpp: In instantiation of 'static constexpr void* StaticAssertEquality<V1, V2>::NotEqualError() [with long V1 = 1; long V2 = 2]':
file.cpp:   required from here
file.cpp: error: invalid conversion from 'long' to 'void*' [-fpermissive]
   static constexpr void* NotEqualError() { return V1 + V2; }
                                                        ^
g++.exe: failed with exit code 1 (00000001) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-06T17:56:05.383

另一种`C++11`仅查找深度嵌套类型或编译时间值的方法。

```
#include <vector>

// generates compilation error and shows real type name (and place of declaration in some cases) in an error message, useful for debugging boost::mpl like recurrent types
#define UTILITY_TYPE_LOOKUP_BY_ERROR(type_name) \
    using _type_lookup_t = decltype((*(typename ::utility::type_lookup<type_name >::type*)0).operator ,(*(::utility::dummy*)0))

// lookup compile time template typename value
#define UTILITY_PARAM_LOOKUP_BY_ERROR(static_param) \
    UTILITY_TYPE_LOOKUP_BY_ERROR(STATIC_ASSERT_PARAM(static_param))

#define STATIC_ASSERT_PARAM(v1) ::utility::StaticAssertParam<decltype(v1), (v1)>

namespace utility
{
    template <typename T>
    struct type_lookup
    {
        using type = T;
    };

    struct dummy {};

    template <typename T, T v>
    struct StaticAssertParam
    {
    };
}

struct test
{
    char a[123];
    double b[15];
    std::vector<int> c;
};

UTILITY_PARAM_LOOKUP_BY_ERROR(sizeof(test)); 
```

**MSVC2017**

```
error C2039: ',': is not a member of 'utility::StaticAssertParam<size_t,272>' 
```

**GCC 4.8.x：**

```
<source>:5 : 103 : error : 'using type = struct utility::StaticAssertParam<long unsigned int, 272ul>' has no member named 'operator,'
using _type_lookup_t = decltype((*(typename ::utility::type_lookup<type_name >::type*)0).operator ,(*(::utility::dummy*)0))
^
<source> : 9 : 5 : note : in expansion of macro 'UTILITY_TYPE_LOOKUP_BY_ERROR'
UTILITY_TYPE_LOOKUP_BY_ERROR(STATIC_ASSERT_PARAM(static_param))
^
<source> : 36 : 1 : note : in expansion of macro 'UTILITY_PARAM_LOOKUP_BY_ERROR'
UTILITY_PARAM_LOOKUP_BY_ERROR(sizeof(test));
^ 
```

# youtube-api - YouTube 播放器错误事件对应的是永久性问题还是暂时性问题？

> ID：13837672
> 
> 赞同：0
> 
> 时间：2012-12-12T10:26:54.110
> 
> 标签：youtube-api

是否有可能 YouTube 视频（在 YouTube API 的帮助下流式传输）可能暂时处于某种禁止状态，使其调度 errorEvents 与 errorCodes 100、101、150，只是最终回到正常状态，不会' t 调度错误事件？

在我的实现中，我将一些有关 youtube 视频的信息存储在数据库中。我删除了有关发送这些 errorEvents 的视频的信息，因为我不想展示那些不起作用的视频。现在，对我来说的问题是，如果有一个视频只在短时间内调度 errorEvents，因为它已从我的系统中删除，但实际上仍然有效。

视频临时或定期发送 errorEvents 是常见的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:44:30.137

[Player API 文档](https://developers.google.com/youtube/iframe_api_reference#onError)概述了可能触发 onError 的原因。您应该能够从中解释您描述的场景是否可能。

例如，`100`当视频是私有的时，可能会触发错误。视频的所有者显然有可能在私有和公共之间来回切换，因此您是否想在未来忽略该视频 ID 取决于您 — 这取决于您认为视频将再次公开。

`101`当视频未启用嵌入时触发错误。这是视频所有者可以随时更改的另一个选项。再次由您决定是否要考虑视频的当前状态并忽略该视频 ID，或者将其留在您的系统中，以防所有者将来使其可嵌入。

# jquery - Jquery ajax 响应提取部分 html - 在 IE8 中

> ID：13837673
> 
> 赞同：1
> 
> 时间：2012-12-12T10:26:54.350
> 
> 标签：jquery, ajax

我有一个返回 html 标记的 Ajax 函数。我需要从整个字符串中提取某个 div 并在我当前的 html 中替换相同的 div。这是代码的一部分：

```
$.ajax({
        type: "POST",
        url: postUrl,
        dataType: "HTML",
        data: "ddd"
        success: function(htmlResponse) {
                //replace the html code
                $('#somediv').html($('#somediv' htmlResponse).html());
            }
        }, 
```

在 Chrome 和 FF 中工作正常，而不是在 IE 8 中。IE 在 htmlResponse 中找不到 div。我试着提醒：

```
alert($(htmlResponse).find('#somediv').html()); 
```

并收到一条空白消息。这是 IE 中的错误，我的代码有什么问题吗？谢谢 8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:34:46.900

在您的 postUrl 中，添加“#divID”，这将只返回您正在寻找的 div。例如

```
var postUrl = "/something/target.htm #theDiv";
$.ajax({
    type: "POST",
    url: postUrl,
    dataType: "HTML",
    data: "ddd"
    success: function(htmlResponse) {
            //replace the html code
            $('#somediv').html($('somediv' htmlResponse).html());
        }
    }, 
```

我不记得这是否适用于 $.ajax 或 $.get，但我知道它适用于 $('#somediv').load()，这可能是一个替代方案，更短，方法：

```
$('#somediv').load("/something/target.htm #theDiv"); 
```

您显然可以在 URL 中插入一个查询字符串，只要 #divID 在末尾即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:43:46.427

关于`alert`，我想不出为什么 IE 会中断，`alert($(htmlResponse).find('#somediv').html());`除非被抓取的 html() 首先只是过大/太多空格/空。

但是，在这一行：

```
$('#somediv').html($('somediv' htmlResponse).html()); 
```

你的意思是：

```
$('#somediv').html($('#somediv', htmlResponse).html()); 
```

?

编辑：

`htmlResponse`分析 中的 HTML并确保其格式正确可能是个好主意。也许 a`<div>`没有关闭，或者 IE8 遇到的其他无效语法。

# java - 具有大量项目的 ListView 和 Adapter

> ID：13837674
> 
> 赞同：3
> 
> 时间：2012-12-12T10:26:56.180
> 
> 标签：java, android

我是android编程的新手。在对 ListView 和 ArrayAdapter 进行了一些研究之后，我决定编写一个简单的演示程序来练习。

我想显示我的自定义视图样式 ListView，所以我重写了 ArrayAdapter 的 getView() 函数。我知道为了防止内存泄漏，应该检查参数convertView，并且只有在convertView为null时才膨胀新对象。我还制作了一个 AsyncTask 以在后台（在 doInBackground 中）继续将数据添加到 ArrayAdapter 中，并将 notifyDataChanged 保留为 ListView（在 onProgressUpdate() 中）。

这是问题所在：当我设置 MAX_ITEM=50（这意味着我将在 AsyncTask 中添加多少数据）时，一切正常。但是当我设置 MAX_ITEM=500 时，logcat 显示错误消息：**“原因：android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸其视图。”** 和应用程序关闭。谁能告诉我问题出在哪里？以下是我的源代码“MyTest.java”和我的布局xml文件“main.xml”和“layout_row.xml”，感谢您的观看和帮助。

MyTest.Java：

```
public class MyTest extends Activity  { 

private static final String TAG="Tany";
private static final int MAX_ITEM = 50;
private MyArrayAdapter adapter;
private ListView listview;

private int addCounter = 0;

public class MyData implements Comparable<MyData>{

    public String str1;
    public String str2;
    public String str3;

    public MyData(String str1, String str2, String str3){                   
        this.str1 = str1;
        this.str2 = str2;
        this.str3 = str3;
    }

    @Override
    public int compareTo(MyData data) {
        // TODO Auto-generated method stub

        int result = this.str1.compareTo(data.str1);
        return result;
    }
}

public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     listview = (ListView)findViewById(R.id.listview);

     adapter = new MyArrayAdapter(this, R.layout.layout_row);

     //set adapter
     listview.setAdapter(adapter);
     listview.setOnItemClickListener(new AdapterView.OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // TODO Auto-generated method stub
            Log.d(TAG, "position "+position+" is clicked");                             
            Toast.makeText(parent.getContext(), adapter.getItem(position).str1+", "+adapter.getItem(position).str2, Toast.LENGTH_SHORT).show();                             
        }           
     });         

     listview.setTextFilterEnabled(true);

}

public void onStart(){
    super.onStart();                                
    MyTask newTask = new MyTask();
    newTask.execute();      
}

public class MyTask extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        for(int i = addCounter; i<MAX_ITEM; i++)
        {
            adapter.add(new MyData("str1="+i,"str2="+i,"str3="+i));
            addCounter++;               
            publishProgress();                              
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Void... progress ){         
        adapter.notifyDataSetChanged();
    }

    @Override
    protected void onPostExecute(Void result){                      
        Log.d(TAG, "AsyncTask MyTask finsish its work");                        
    }       
}

public class MyArrayAdapter extends ArrayAdapter<MyData>{       

    public MyArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        // TODO Auto-generated constructor stub                                     
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {         
        View row;                   
        if(convertView == null){
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.layout_row, parent, false);
        }else{
            Log.d(TAG,"recycle view, pos="+position);
            row = convertView;
        }

        TextView tv1 = (TextView) row.findViewById(R.id.textView1);         
        tv1.setText(    ((MyData)getItem(position)).str1    );

        TextView tv2 = (TextView) row.findViewById(R.id.textView2);
        tv2.setText(    ((MyData)getItem(position)).str2    );

        TextView tv3 = (TextView) row.findViewById(R.id.textView3);
        tv3.setText(    ((MyData)getItem(position)).str3    );

        return row;
    }                   
}   
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/vertical_container" 
android:orientation="vertical"
android:layout_width="fill_parent" 
android:layout_height="fill_parent">

<TextView 
        android:text="@string/list_title_start"             
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content">
</TextView>

<ListView 
    android:id="@+id/listview"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">        
</ListView>

<TextView 
        android:text="@string/list_title_end"           
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content">
</TextView>
</LinearLayout> 
```

layout_row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="vertical" >    

<LinearLayout 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:id="@+id/linearLayout1" 
    android:orientation="horizontal">
    <ImageView 
        android:layout_height="wrap_content"
        android:id="@+id/imageView1" 
        android:layout_width="wrap_content" 
        android:src="@drawable/ic_launcher">        
    </ImageView>
    <TextView 
        android:text="TextView1" 
        android:id="@+id/textView1" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_marginLeft="6dip"
        android:layout_marginTop="6dip" 
        android:textAppearance="?android:attr/textAppearanceLarge">
    </TextView>
</LinearLayout>
<LinearLayout 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:id="@+id/linearLayout1" 
    android:orientation="horizontal">
    <TextView 
        android:id="@+id/textView2" 
        android:text="TextView" 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content" 
        android:textAppearance="?android:attr/textAppearanceSmall">
    </TextView>
    <TextView 
        android:text="TextView" 
        android:id="@+id/textView3" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:textAppearance="?android:attr/textAppearanceSmall" 
        android:layout_marginLeft="6dip">
    </TextView>
</LinearLayout>    
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:21:57.713

正如 Selvin 正确地说的那样，您正在从在另一个线程上运行的方法中修改您`Views`的方法。`doInBackground`在 android 中这是被禁止的，相反你也应该从`onPostExecute`方法中修改视图。

# ruby-on-rails - carrierwave_backgrounder 初始化程序导致错误

> ID：13837675
> 
> 赞同：1
> 
> 时间：2012-12-12T10:27:01.103
> 
> 标签：ruby-on-rails, carrierwave

我正在尝试使用carrierwave_backgrounder、delayed_job 和fog 设置carrierwave，以便在AWS S3 上进行存储。

每当我尝试在控制台中执行任何操作（例如生成控制器）时，都会收到此错误：

```
ruby-1.9.3-p194/gems/carrierwave_backgrounder-0.0.9/lib/carrierwave_backgrounder.rb:19:in `backend': wrong number of arguments (1 for 0) (ArgumentError) 
```

罪魁祸首似乎是我的初始化文件backgrounder.rb，它是直接从carrierwave_backgrounder github复制而来的。

```
CarrierWave::Backgrounder.configure do |c|
  # :delayed_job, :girl_friday, :sidekiq, :qu, :resque, or :qc
  c.backend :delayed_job 
end 
```

如果我将其注释掉，我的生成器等就会开始工作。我相信我正确设置了delayed_job 和carrierwave。这也是我的gemfile：

```
gem 'rails', '3.2.8'

gem 'pg'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'devise'    
gem 'delayed_job_active_record'
gem 'carrierwave'
gem 'carrierwave_backgrounder'
gem 'fog'
gem 'rmagick' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:47:50.197

使用最新的 git 版本来实现这一点。

将此添加到您的 gemfile 中：

```
gem 'carrierwave_backgrounder', :git => "git://github.com/lardawge/carrierwave_backgrounder.git" 
```

# xml-serialization - 从 XML 文件更改记录字段的内容

> ID：13837683
> 
> 赞同：2
> 
> 时间：2012-12-12T10:27:29.540
> 
> 标签：xml-serialization, openerp

在 OpenERP 中，XML 字段用于加载模块数据。该`<record>`标签用于此目的。重新安装模块时，记录会用 XML 文件中的当前数据重写。

但是有没有办法只更改一个记录字段而不重写所有其他字段？

例如，在`addons/project_issue/project_issue_view.xml`我们有这个动作定义：

```
 <record id="project_issue_categ_action" model="ir.actions.act_window">
        <field name="name">Issue Categories</field>
        <field name="res_model">crm.case.categ</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="crm.crm_case_categ_tree-view"/>
        <field name="domain">[('object_id.model', '=', 'project.issue')]</field>
        <field name="context" eval="{'object_id': ref('model_project_issue')}"/>
    </record> 
```

是否可以仅更改`name`自定义模块的 XML 文件中的字段？

我已经尝试过：

```
 <record id="project_issue.project_issue_categ_action" model="ir.actions.act_window">
        <field name="name">Issue Categorization</field>
    </record> 
```

和

```
 <update id="project_issue.project_issue_categ_action" model="ir.actions.act_window">
        <field name="name">Issue Categorization</field>
    </update> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:33:48.610

```
<record id="project_issue.project_issue_categ_action" model="ir.actions.act_window">
    <field name="name">Issue Categorization</field>
</record> 
```

您给定的代码将更改名称，但不会影响菜单名称。您可以在表单和树视图中查看给定的操作名称。要更改菜单名称，您必须仅覆盖菜单而不是操作。

例如：

```
<record id="project_issue.menu_project_issue_category_act" model="ir.ui.menu">
    <field name="name">Issue Categorization</field>
</record> 
```

您甚至可以[在已创建的菜单上引用应用组](https://stackoverflow.com/questions/13450393/apply-groups-on-already-created-menu)

# c++ - InterlockedExchange 与 InterlockedExchangePointer

> ID：13837688
> 
> 赞同：2
> 
> 时间：2012-12-12T10:27:40.477
> 
> 标签：c++, atomic, visual-c++-6, interlocked

`InterlockedExchange`和 和有什么不一样`InterlockedExchangePointer`？

是

```
if( 0 != InterlockedCompareExchange( ( void** ) &_myVariable
                                   , temp
                                   , 0
                                   ) ) 
```

和

```
if( 0 != InterlockedCompareExchangePointer( ( void** ) &_myVariable
                                          , temp
                                          , 0
                                          ) ) 
```

相等的？

我必须将代码移植到不知道这些`Interlocked[...]Pointer`功能的 VC6 上。

**编辑：**

根据我自己的经验，我知道 VC6*漏洞*百出，不会有人再使用它了。

但是，我不是决策者，对原始问题的回答将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:32:02.780

`InterlockedCompareExchange`采用 32 位变量。

`InterlockedCompareExchangePointer`采用指针大小变量，该变量因目标体系结构而异。

如果您以 32 位和仅 32 位架构为目标，它会很好，但是每当您将目标架构更改为 64 位时，以下内容将编译并表现得很糟糕：

```
InterlockedCompareExchange( ( LONG volatile * ) _myPointer , 1, 0 ) ); 
```

# ios - 如果未关闭键盘，则使用搜索栏时的 segueing 会更改目标视图控制器布局

> ID：13837689
> 
> 赞同：0
> 
> 时间：2012-12-12T10:27:41.223
> 
> 标签：ios, uitableview, uisearchbar, uistoryboardsegue

我有一个`UITableView`显示聊天室列表的地方。我还使用搜索栏来查找特定的聊天室。当用户点击一个单元格时，它会进入聊天室对话，显示消息和一个用于发送消息的文本框。

但是，如果我使用搜索栏搜索聊天室，当我点击任何单元格时，segue 完成但聊天室的布局是错误的。对话视图（自定义`UITableView`）填满了整个屏幕，并且文本框（位于底部，就在 a 的顶部`TabBar`）不会出现。

尝试解决此问题时，我发现在搜索是否在点击任何单元格之前关闭键盘时，我能够正确地进行搜索，因此似乎只有在键盘存在时才会发生这种情况。

我想我可以在 segueing 之前以编程方式关闭键盘来解决这个问题，但我也担心我可能`UISearchBar`对 . 或`UITableView`.

我的目标项目是 iOS 5.1，我已经在运行 5.1 的 iPad 3、运行 6.01 的 iPad 2 和 iPhone 模拟器中重现了这个问题。

**编辑**

这是我用来segue的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (self.searchController.searchResultsTableView == tableView) {
        self.selectedItem = [self.filteredItems objectAtIndex:[indexPath row]];
    } else {
        self.selectedItem = [self.items objectAtIndex:[indexPath row]];
    }
    [self performSegueWithIdentifier:@"segueChatRoom" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [self.view endEditing:YES]; // This line solves the issue
    UIBarButtonItem *newBackButton = [[UIBarButtonItem alloc] initWithTitle: @"Custom title" style: UIBarButtonItemStyleBordered target: nil action: nil];
    [[self navigationItem] setBackBarButtonItem: newBackButton];
    if ([segue.identifier isEqualToString:@"segueChatRoom"]) {
        [segue.destinationViewController setItem:self.selectedItem];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:48:00.320

As you already pointed out you need to resign the first responder (lower the keyboard). Your [self.view endEditing:YES]; is essentially doing this.

# mysql - 如何计算每个城市最大订单的顶级客户

> ID：13837691
> 
> 赞同：0
> 
> 时间：2012-12-12T10:27:50.487
> 
> 标签：mysql

我创建了表名`customers` `orders`，`orderdetails`如下所示

```
CREATE TABLE `customers` (
  `customerNumber` int(11) NOT NULL,
  `customerName` varchar(50) NOT NULL,
  `contactLastName` varchar(50) NOT NULL,
  `contactFirstName` varchar(50) NOT NULL,
  `phone` varchar(50) NOT NULL,
  `addressLine1` varchar(50) NOT NULL,
  `addressLine2` varchar(50) default NULL,
  `city` varchar(50) NOT NULL,
  `state` varchar(50) default NULL,
  `postalCode` varchar(15) default NULL,
  `country` varchar(50) NOT NULL,
  `salesRepEmployeeNumber` int(11) default NULL,
  `creditLimit` double default NULL,
  PRIMARY KEY  (`customerNumber`)
)

CREATE TABLE `orders` (
  `orderNumber` int(11) NOT NULL,
  `orderDate` datetime NOT NULL,
  `requiredDate` datetime NOT NULL,
  `shippedDate` datetime default NULL,
  `status` varchar(15) NOT NULL,
  `comments` text,
  `customerNumber` int(11) NOT NULL,
  PRIMARY KEY  (`orderNumber`)
) 

CREATE TABLE `orderdetails` (
  `orderNumber` int(11) NOT NULL,
  `productCode` varchar(15) NOT NULL,
  `quantityOrdered` int(11) NOT NULL,
  `priceEach` double NOT NULL,
  `orderLineNumber` smallint(6) NOT NULL,
  PRIMARY KEY  (`orderNumber`,`productCode`)
) 
```

之后，我必须找出每个城市的订单最多的客户。我计算了每个客户的总订单量，如下所示，但我不知道如何从每个城市中选择最大订单的客户。所以问题是我怎么能做到这一点。

```
SELECT o.customerNumber, ROUND( SUM( od.priceEach * od.quantityOrdered ) , 2 ) AS totalOrder
FROM orders AS o
INNER JOIN orderDetails AS od ON o.orderNumber = od.orderNumber
GROUP BY o.customerNumber
ORDER BY totalOrder DESC 
```

我正在使用mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:36:36.040

试试这个：：

```
Select tempTable.custNum, MAX(tempTable.totalOrder), customers.city
from
(
SELECT 
o.customerNumber as custNum, 
ROUND( SUM( od.priceEach * od.quantityOrdered ) , 2 ) AS totalOrder,
city
FROM orders AS o
INNER JOIN orderDetails AS od ON o.orderNumber = od.orderNumber
GROUP BY o.customerNumber
ORDER BY totalOrder DESC) as tempTable
 inner join customers on (tempTable.custNum = customers.customerNumber)
group by tempTable.city 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:05:54.133

您可以按照[Sashi Kant](https://stackoverflow.com/users/961125/sashi-kant)的建议执行此操作，但需要对该答案进行一些编辑

```
SELECT x.customerName, MAX( p.totalOrder ) , x.city
FROM (

SELECT o.customerNumber, ROUND( SUM( od.priceEach * od.quantityOrdered ) , 2 ) AS totalOrder
FROM orders AS o
INNER JOIN orderDetails AS od ON o.orderNumber = od.orderNumber
GROUP BY o.customerNumber
ORDER BY totalOrder DESC
)p
INNER JOIN customers x ON p.customerNumber = x.customerNumber
GROUP BY city 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:05:18.180

```
select max(z.total),z.customerNumber,z.city,z.customerName from (select c.customerNumber,c.city,c.customerName, 
   sum(od.priceEach * od.quantityOrdered) as total 
   from customers c, orders o, orderdetails od 
   where c.customerNumber = o.customerNumber 
      and o.orderNumber = od.orderdetails 
   group by c.customerNumber) as z  group by z.customerNumber,z.city 
```

# c++ - 我可以安全地将 OpenMP 与 C++11 一起使用吗？

> ID：13837696
> 
> 赞同：45
> 
> 时间：2012-12-12T10:28:22.613
> 
> 标签：c++, c++11, openmp

OpenMP 标准仅考虑 C++ 98 (ISO/IEC 14882:1998)。这意味着在 C++03 甚至 C++11 下没有标准支持 OpenMP 的使用。因此，任何使用 C++ >98 和 OpenMP 的程序都在标准之外运行，这意味着即使它在某些条件下工作，它也不太可能是可移植的，但绝对不能保证。

对于具有自己的多线程支持的 C++11，情况更糟，这很可能会在某些实现中与 OpenMP 发生冲突。

那么，在 C++03 和 C++11 中使用 OpenMP 有多安全？

是否可以在同一个程序中安全地使用 C++11 多线程和 OpenMP 但不交错（即在传递给 C++11 并发特性的任何代码中都没有 OpenMP 语句，并且线程中没有 C++11 并发由 OpenMP 产生）？

我对首先使用 OpenMP 调用一些代码，然后在相同数据结构上使用 C++11 并发调用一些其他代码的情况特别感兴趣。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-12T12:24:11.750

Walter，我相信我不仅在[其他讨论](https://stackoverflow.com/questions/13197510/why-do-c11-threads-become-unjoinable-when-using-nested-openmp-pragmas)中告诉了您当前的情况，而且还直接从源头（即我的同事，他是 OpenMP 语言委员会的成员）为您提供了信息。

OpenMP 被设计为 FORTRAN 和 C 的轻量级数据并行补充，后来扩展到 C++ 习惯用法（例如，随机访问迭代器上的并行循环）和引入显式任务的任务并行性。它的目的是尽可能跨平台*移植*，并在所有三种语言中提供基本相同的功能。它的执行模型非常简单——单线程应用程序在并行区域中分叉线程团队，在内部运行一些计算任务，然后将团队重新加入串行执行。如果启用了嵌套并行，来自并行团队的每个线程都可以在以后派生出自己的团队。

由于 OpenMP 的主要用途是高性能计算（毕竟，它的指令和执行模型是从高性能 Fortran 借来的），任何 OpenMP 实现的主要目标是*效率*，而不是与其他线程范例的互操作性。在某些平台上，只有当 OpenMP 运行时是唯一控制进程线程的运行时，才能实现高效实现。此外，OpenMP 的某些方面可能无法与其他线程结构很好地配合使用，例如`OMP_THREAD_LIMIT`在分叉两个或更多并发并行区域时设置的线程数限制。

由于 OpenMP 标准本身并没有严格禁止使用其他线程范例，但也没有标准化与此类的互操作性，因此支持此类功能取决于实现者。这意味着某些实现可能会提供顶级 OpenMP 区域的安全并发执行，而某些实现可能不会。x86 实现者承诺支持它，可能是因为他们中的大多数也是其他执行模型的支持者（例如 Intel 的 Cilk 和 TBB，GCC 的 C++11 等），而 x86 通常被认为是一个“实验性”平台（其他供应商通常要保守得多）。

OpenMP 4.0 在其使用的 C++ 特性方面也没有比 ISO/IEC 14882:1998 更进一步（SC12 草案在[这里](http://www.openmp.org/mp-documents/OpenMP4.0RC1_final.pdf)）。该标准现在包括诸如可移植线程亲和性之类的东西——这绝对不能与其他线程范例很好地配合，这些范例可能会提供与 OpenMP 冲突的自己的绑定机制。OpenMP 语言再次针对 HPC（数据和任务并行的科学和工程应用程序）。C++11 结构针对通用计算应用程序。如果你想要花哨的 C++11 并发东西，那么只使用 C++11，或者如果你真的需要将它与 OpenMP 混合，那么如果你想保持可移植性，那么坚持使用 C++98 的语言特性子集。

> 我对首先使用 OpenMP 调用一些代码，然后在相同数据结构上使用 C++11 并发调用一些其他代码的情况特别感兴趣。

没有明显的原因可以说明您不希望发生什么，但这取决于您的 OpenMP 编译器和运行时。有使用 OpenMP 进行并行执行的免费和商业库（例如 MKL），但总是有警告（尽管有时隐藏在其用户手册中很深）可能与多线程代码不兼容，这些代码提供了有关何时何地可能的信息。与往常一样，这超出了 OpenMP 标准的范围，因此也超出了 YMMV 的范围。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T09:27:05.840

> 我实际上对高性能计算感兴趣，但 OpenMP（目前）并不能很好地满足我的目的：它不够灵活（我的算法不是基于循环的）

也许您真的在寻找[TBB](http://threadingbuildingblocks.org)？这提供了对基于循环和任务的并行性的支持，以及标准 C++ 中的各种并行数据结构，并且是可移植的和开源的。

（完全免责声明：我为与 TBB 密切相关的英特尔工作，尽管我实际上并不从事TBB 工作**，**而是从事 OpenMP 工作 :-)；我当然不是在为英特尔说话！）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T18:06:10.497

和 Jim Cownie 一样，我也是一名英特尔员工。我同意他的观点，即英特尔线程构建模块 (英特尔 TBB) 可能是一个不错的选择，因为它具有像 OpenMP 这样的循环级并行性，还有其他并行算法、并发容器和较低级别的功能。TBB 试图跟上当前的 C++ 标准。

为了向 Walter 澄清，英特尔 TBB 包括一个 parallel_reduce 算法以及对原子和互斥体的高级支持。

[您可以在http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/tbb_userguide/title.htm](http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/tbb_userguide/title.htm)找到英特尔® 线程构建模块的用户指南 。用户指南概述了图书馆。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-04T19:53:53.690

OpenMP 通常（我知道没有例外）是在 Pthread 之上实现的，因此您可以通过思考 C++11 并发如何与 Pthread 代码互操作来推断一些互操作性问题。

我不知道由于使用多线程模型导致的超额订阅对您来说是否是一个问题，但这对于 OpenMP 来说绝对是一个问题。在 OpenMP 5 中有一个解决这个问题的[建议](http://dx.doi.org/10.1007/978-3-319-45550-1_14)。在此之前，如何解决这个问题是实现定义的。它们是重锤，但您可以使用[`OMP_WAIT_POLICY`](https://gcc.gnu.org/onlinedocs/libgomp/OMP_005fWAIT_005fPOLICY.html)(OpenMP 4.5+)、[`KMP_BLOCKTIME`](https://software.intel.com/en-us/forums/intel-many-integrated-core/topic/338457)(Intel 和 LLVM) 和[`GOMP_SPINCOUNT`](https://gcc.gnu.org/onlinedocs/libgomp/GOMP_005fSPINCOUNT.html)(GCC) 来解决这个问题。我确信其他实现也有类似的东西。

真正关心互操作性的一个问题是内存模型，即原子操作的行为方式。这是目前未定义的，但您仍然可以推理它。例如，如果您使用具有 OpenMP 并行性的 C++11 原子，则应该没问题，但您有责任在 OpenMP 线程中正确使用 C++11 原子。

混合 OpenMP atomics 和 C++11 atomics 是个坏主意。我们（负责研究 OpenMP 5 基本语言支持的 OpenMP 语言委员会工作组）目前正试图解决这个问题。就个人而言，我认为 C++11 原子在各个方面都比 OpenMP 原子要好，所以我的建议是你使用 C++11（或 C11，或[`__atomic`](https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html)）作为你的原子，而留给`#pragma omp atomic`Fortran 程序员。

下面是一个将 C++11 原子与 OpenMP 线程结合使用的[示例代码。](https://github.com/jeffhammond/HPCInfo/blob/master/atomics/ping-pong/cxx11-ping-pong.cc)它在我测试过的任何地方都按设计工作。

全面披露：像吉姆和迈克一样，我为英特尔工作:-)

```
#if defined(__cplusplus) && (__cplusplus >= 201103L)

#include <iostream>
#include <iomanip>

#include <atomic>

#include <chrono>

#ifdef _OPENMP
# include <omp.h>
#else
# error No OpenMP support!
#endif

#ifdef SEQUENTIAL_CONSISTENCY
auto load_model  = std::memory_order_seq_cst;
auto store_model = std::memory_order_seq_cst;
#else
auto load_model  = std::memory_order_acquire;
auto store_model = std::memory_order_release;
#endif

int main(int argc, char * argv[])
{
    int nt = omp_get_max_threads();
#if 1
    if (nt != 2) omp_set_num_threads(2);
#else
    if (nt < 2)      omp_set_num_threads(2);
    if (nt % 2 != 0) omp_set_num_threads(nt-1);
#endif

    int iterations = (argc>1) ? atoi(argv[1]) : 1000000;

    std::cout << "thread ping-pong benchmark\n";
    std::cout << "num threads  = " << omp_get_max_threads() << "\n";
    std::cout << "iterations   = " << iterations << "\n";
#ifdef SEQUENTIAL_CONSISTENCY
    std::cout << "memory model = " << "seq_cst";
#else
    std::cout << "memory model = " << "acq-rel";
#endif
    std::cout << std::endl;

    std::atomic<int> left_ready  = {-1};
    std::atomic<int> right_ready = {-1};

    int left_payload  = 0;
    int right_payload = 0;

    #pragma omp parallel
    {
        int me      = omp_get_thread_num();
        /// 0=left 1=right
        bool parity = (me % 2 == 0);

        int junk = 0;

        /// START TIME
        #pragma omp barrier
        std::chrono::high_resolution_clock::time_point t0 = std::chrono::high_resolution_clock::now();

        for (int i=0; i<iterations; ++i) {

            if (parity) {

                /// send to left
                left_payload = i;
                left_ready.store(i, store_model);

                /// recv from right
                while (i != right_ready.load(load_model));
                //std::cout << i << ": left received " << right_payload << std::endl;
                junk += right_payload;

            } else {

                /// recv from left
                while (i != left_ready.load(load_model));
                //std::cout << i << ": right received " << left_payload << std::endl;
                junk += left_payload;

                ///send to right
                right_payload = i;
                right_ready.store(i, store_model);

            }

        }

        /// STOP TIME
        #pragma omp barrier
        std::chrono::high_resolution_clock::time_point t1 = std::chrono::high_resolution_clock::now();

        /// PRINT TIME
        std::chrono::duration<double> dt = std::chrono::duration_cast<std::chrono::duration<double>>(t1-t0);
        #pragma omp critical
        {
            std::cout << "total time elapsed = " << dt.count() << "\n";
            std::cout << "time per iteration = " << dt.count()/iterations  << "\n";
            std::cout << junk << std::endl;
        }
    }

    return 0;
}

#else  // C++11
#error You need C++11 for this test!
#endif // C++11 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-28T10:00:41.597

OpenMP 5.0 现在定义了与 C++11 的交互。但通常使用 C++11 中的任何内容，并进一步*“可能导致未指定的行为”*。

此 OpenMP API 规范将 ISO/IEC 14882:2011 称为 C++11。虽然 OpenMP 规范的未来版本预计将解决以下功能，但目前它们的使用可能会导致未指定的行为。

*   对齐支持
*   标准布局类型
*   允许移动构造投掷
*   定义移动特殊成员函数
*   并发
*   数据依赖排序：原子和内存模型
*   标准库的补充
*   线程本地存储
*   并发动态初始化和销毁
*   C++11 库

# android - ViewPager with Google Maps API v2：神秘的黑色视图

> ID：13837697
> 
> 赞同：95
> 
> 时间：2012-12-12T10:28:35.090
> 
> 标签：android, google-maps, android-viewpager

我已在视图寻呼机中集成了新的 google maps api v2 片段。从地图片段滚动时，黑色视图与相邻片段重叠。有人解决了吗？

编辑：截图

![在此处输入图像描述](../Images/a904db79cab1a8c44ce9c404ad79ac97.png)

```
public static class PagerAdapter extends FragmentPagerAdapter{

    public PagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    @Override
    public Fragment getItem(int position) {

        Fragment pageFragment;

        switch (position) {
        case 0:
            pageFragment = new TabAFragment();
            break;

        case 1:
            pageFragment = new TabBFragment();
            break;

        case 2:
            pageFragment = SupportMapFragment.newInstance();
            break;

        default:
            pageFragment = null;
            break;
        }

        return pageFragment;
    }
} 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-12-17T08:04:25.073

`ViewPager`通过在内部 a 的顶部放置另一个具有透明背景的视图，我能够停止在转换后留下黑色表面`FrameLayout`：

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.ViewPager
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </android.support.v4.view.ViewPager>

    <!-- hack to fix ugly black artefact with maps v2 -->
    <FrameLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:background="@android:color/transparent" />

</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-12-21T16:23:08.383

SlidingMenu 和 ViewPager 也有同样的问题。我注意到地图片段中的控制按钮在左侧工件中不是黑色的。我通过覆盖的`onCreateView()`方法解决了这个问题`MapFragment (SupportMapFragment)`

```
@Override
public View onCreateView(LayoutInflater inflater, 
                         ViewGroup view, 
                         Bundle savedInstance) {

    View layout = super.onCreateView(inflater, view, savedInstance);
    FrameLayout frameLayout = new FrameLayout(getActivity());
    frameLayout.setBackgroundColor(
        getResources().getColor(android.R.color.transparent));
    ((ViewGroup) layout).addView(frameLayout,
        new ViewGroup.LayoutParams(
            LayoutParams.FILL_PARENT, 
            LayoutParams.FILL_PARENT
        )
    );
    return layout;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-19T09:28:57.570

谷歌为此发布了一个修复程序，但仅适用于 4.1+（您不需要下载新版本的 PlayServices，他们使用了服务器端标志）

这是我用来绕过问题的方法 - 确保您不会在 >= 4.1 的设备上浪费任何 CPU 周期

```
public class FixMapFragment extends SupportMapFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, 
                             ViewGroup container, 
                             Bundle savedInstanceState) {

        View view = super.onCreateView(inflater, container, savedInstanceState);

        // Fix for black background on devices < 4.1
        if (android.os.Build.VERSION.SDK_INT < 
            android.os.Build.VERSION_CODES.JELLY_BEAN) {
            setMapTransparent((ViewGroup) view);
        }
        return view;
    }

    private void setMapTransparent(ViewGroup group) {
        int childCount = group.getChildCount();
        for (int i = 0; i < childCount; i++) {
            View child = group.getChildAt(i);
            if (child instanceof ViewGroup) {
                setMapTransparent((ViewGroup) child);
            } else if (child instanceof SurfaceView) {
                child.setBackgroundColor(0x00000000);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-14T11:14:05.910

我的解决方法：利用[GoogleMap 的新快照界面，](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.SnapshotReadyCallback)并在滚动页面时显示地图的快照。

这是我设置快照的代码（它与地图在同一个片段中，称为 FragmentMap.java）：

```
public void setSnapshot(int visibility) {
    switch(visibility) {
    case View.GONE:
        if(mapFragment.getView().getVisibility() == View.VISIBLE) {
            getMap().snapshot(new SnapshotReadyCallback() {
                @Override
                public void onSnapshotReady(Bitmap arg0) {
                    iv.setImageBitmap(arg0);
                }
            });
            iv.setVisibility(View.VISIBLE);
            mapFragment.getView().setVisibility(View.GONE);
        }
        break;
    case View.VISIBLE:
        if(mapFragment.getView().getVisibility() == View.GONE) {
            mapFragment.getView().setVisibility(View.VISIBLE);
            iv.setVisibility(View.GONE);
        }
        break;
    }
} 
```

其中“mapFragment”是我的 SupportedMapFragment，“iv”是一个 ImageView（使其成为 match_parent）。

在这里我控制滚动：

```
pager.setOnPageChangeListener(new OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            if(position == 0 && positionOffsetPixels > 0 || position == 1 && positionOffsetPixels > 0) {
                ((FragmentMap)adapter.getRegisteredFragment(1)).setSnapshot(View.GONE);
            } else if(position == 1 && positionOffsetPixels == 0) {
                ((FragmentMap)adapter.getRegisteredFragment(1)).setSnapshot(View.VISIBLE);
            }
        }
        @Override
        public void onPageScrollStateChanged(int arg0) {}
        @Override
        public void onPageSelected(int arg0) {}
    }); 
```

我的带有地图的片段（FragmentMap）位于位置 1，所以我需要控制从位置 0 到 1 以及从位置 1 到 2（第一个 if 子句）的滚动。“getRegisteredFragment()”是我的自定义 FragmentPagerAdapter 中的一个函数，其中我有一个名为“registeredFragments”的 SparseArray(Fragment)。

因此，每当您滚动到地图或从地图滚动时，您总会看到它的快照。这对我来说非常有效。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-22T09:48:50.947

我在滚动列表视图时遇到了同样的黑屏问题，我在同一屏幕中使用带有列表视图的地图片段我已经通过使用**xml**中的魔法属性解决了这个问题，我正在谈论列表视图，我们必须放置**android： scrollingCache="false"** .my 问题已修复尝试此属性以停止地图中的滞后和闪烁。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-12T10:39:23.107

你没有提供太多细节，所以我只能建议这么多。我有一个类似的问题，即屏幕在寻呼机的视图之间闪烁。第一次在页面之间交换时，原来是 mapView 膨胀。

需要明确的是，我的寻呼机中有 3 页，而我的地图是最后一页。

为了解决这个问题，我发现将屏幕外页面的数量设置为 2（这在上述情况下有效），当我的片段启动时，它会立即加载所有视图。

请参阅[http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit) (int)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-02T09:17:47.340

这个问题还有另一种解决方案。我在另一个片段中显示 MapFragment。MapFragment 被动态添加到 FrameLayout 中。

解决方案是在滑动菜单的打开和关闭事件上使用 frameLayout.setVisibility(View.Visible) 和 frameLayout.setVisibility(View.Gone)。它不需要添加额外的视图。黑色区域完全消失了。

```
getSlidingMenu().setOnOpenListener(
        new OnOpenListener() {
            @Override
            public void onOpen() {
                frameLayout.setVisibility(View.GONE);
            }
        });

getSlidingMenu().setOnClosedListener(
        new OnClosedListener() {

            @Override
            public void onClosed() {
                frameLayout.setVisibility(View.VISIBLE);
            }
        }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-29T22:32:18.873

上面的方法都不适合我，甚至我在别处找到的其他方法也不起作用。最后，我选择了部分解决方案。我通过 ViewPager 的 onPageChangeListener 监听页面更改，并在其页面开始滚动时隐藏地图，并在停止滚动时再次显示它。我还添加了滚动时显示的白色视图。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-09-26T07:16:38.020

[只需将我的自定义地图片段](https://github.com/Vladislav-Z/utilities/blob/master/projects/src/com/globalutiles/map/CustomMapFragment.java)复制到您的项目中即可。**如果您在顶部和底部设置了带有 ScrollView 的黑线，则设置为 ScrollView android:fadingEdge="none"**

```
public class CustomMapFragment extends SupportMapFragment {
private OnActivityCreatedListener onActivityCreatedListener;

public CustomMapFragment() {
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup view, Bundle savedInstance) {
    View layout = super.onCreateView(inflater, view, savedInstance);

    FrameLayout frameLayout = new FrameLayout(getActivity());
    frameLayout.setBackgroundColor(getResources().getColor(android.R.color.transparent));
    ((ViewGroup) layout).addView(frameLayout,
            new ViewGroup.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    return layout;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (getOnActivityCreatedListener() != null)
        getOnActivityCreatedListener().onCreated();
}

public OnActivityCreatedListener getOnActivityCreatedListener() {
    return onActivityCreatedListener;
}

public void setOnActivityCreatedListener(
        OnActivityCreatedListener onActivityCreatedListener) {
    this.onActivityCreatedListener = onActivityCreatedListener;
}

public interface OnActivityCreatedListener {
    void onCreated();
} 
```

}

# visual-studio-2010 - 如何在 EDMX 中创建索引

> ID：13837698
> 
> 赞同：0
> 
> 时间：2012-12-12T10:28:39.150
> 
> 标签：visual-studio-2010, indexing, edmx

我`edmx`在 Visual Studio 2010 中从头开始创建了一个模型。我可以选择将属性声明为，`Entity Key`但我没有看到任何在属性上创建索引的选项。

如何在非主键属性上创建索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:44:50.237

我相信 EF4，你不能在 edmx 中做到这一点。这个[答案](https://stackoverflow.com/a/3333895/1016474)可能会启发你。

# java - JList ArrayList 每个对象的 3 个项目

> ID：13837702
> 
> 赞同：0
> 
> 时间：2012-12-12T10:28:49.467
> 
> 标签：java, swing, jlist

我有这种方法可以将我的 JList 天数设置为 ArrayList 中的每个 Day 对象

```
public void setCalender(ArrayList<Day> calender) {
    this.calender = calender;
    listDays.setListData(this.calender.toArray());
} 
```

每天包含 3 个 Period 对象。目前该列表呈现为：

```
Day1
Day2
Day3 
```

但是我希望用户也能够通过渲染来选择一个时期

```
Day1: Period1
Day1: Period2
Day1: Period3
Day2: Period1
Day3: Period2
Day3: Period3 
```

..等等。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:34:23.360

假设您有一个`getPeriods()`返回特定日期的周期列表的方法，您可以使用以下代码：

```
ArrayList<Day> calender;

ArrayList<Period> periods = new ArrayList<Period>();

for(Day d: calender)
{
   for(Period p : d.getPeriods())
   {
       periods.add(p);
   }
}
listDays.setListData(periods.toArray()); 
```

# sql - 从结果查询中选择 count(*)

> ID：13837704
> 
> 赞同：48
> 
> 时间：2012-12-12T10:28:59.857
> 
> 标签：sql, sql-server, select

我需要你的帮助，这是我的 sql 查询：

```
select count(SID) 
from Test 
where Date = '2012-12-10' 
group by SID 
```

这是我的结果：

```
|2|
|3|
|4|
|3| 
```

现在我必须计算第一次查询的结果！

```
Expected result: 4 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-12T10:45:16.477

您可以将查询包装在另一个中`SELECT`：

```
select count(*)
from
(
  select count(SID) tot  -- add alias
  from Test 
  where Date = '2012-12-10' 
  group by SID
) src;  -- add alias 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/679e9/9)

为了使其工作，`count(SID)`需要一个列别名，并且您必须为子查询本身提供一个别名。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T10:33:35.660

这会计算内部查询的行数：

```
select count(*) from (
    select count(SID) 
    from Test 
    where Date = '2012-12-10' 
    group by SID
) t 
```

但是，在这种情况下，效果与此相同：

```
select count(distinct SID) from Test where Date = '2012-12-10' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:33:20.440

`select count(*) from(select count(SID) from Test where Date = '2012-12-10' group by SID)`select count(*) from(select count(SID) from Test where Date = '2012-12-10' group by SID)

应该有效

# javascript - 我可以知道图像在特定位置是否透明吗？

> ID：13837706
> 
> 赞同：6
> 
> 时间：2012-12-12T10:29:21.667
> 
> 标签：javascript, jquery, css, html, internet-explorer-10

我正在用 javascript (for IE 10) 制作一个游戏，它有一个 colision 系统。我只想在 2 个可见部分碰撞时才碰撞对象，我想忽略图像的透明部分。

有什么方法可以知道 < img > 中的位置是否透明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:35:53.967

将图像“刻录”到 HTML5 画布中，然后从画布中获取特定像素并检查其 Alpha ( [http://falcon80.com/HTMLCanvas/PixelManipulation/getImageData.html](http://falcon80.com/HTMLCanvas/PixelManipulation/getImageData.html) )。

我认为如果你只使用 HTML5 画布而不是在 DOM 段中移动会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:34:58.353

检查以下帖子：

您可以使用带有老式 <map> 和 <area> 标签的图像。

[仅悬停在图像的非透明部分](https://stackoverflow.com/questions/2689308/hover-only-on-non-transparent-part-of-image)

# javascript - HTML 中的弹出窗口

> ID：13837708
> 
> 赞同：0
> 
> 时间：2012-12-12T10:29:26.323
> 
> 标签：javascript, html

我创建了一个页面，我需要在弹出窗口中显示一个 div。我四处搜索，只找到了我个人讨厌的window.open，因为它是一个非常丑陋的解决方案，并导致跨浏览器问题。我在网上看到浮动弹出窗口，右上角有一个黑色十字。我认为您必须创建一个 div，JS 脚本将拾取 .该 div 并将其显示在浮动窗口中。我已经搜索了很多，但找不到解决方案。我使用 Tapestry 5.3.6 。谁能告诉我如何做到这一点..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:33:38.317

从您的描述看来，您可能正在寻找 FancyBox：

[http://fancybox.net/](http://fancybox.net/)

有很多关于如何使用这些基于 JavaScript 的覆盖类型弹出窗口的教程。FancyBox 主页显示了很多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:34:21.707

有很多 javascript 解决方案可以解决这个问题。

从查看 [Jquery UI开始](http://jqueryui.com/dialog/)

您想要的称为模态窗口或对话框

*   [厚箱](http://thickbox.net/)
*   [彩盒](http://www.jacklmoore.com/colorbox/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:45:29.530

[jQuery灯箱](http://leandrovieira.com/projects/jquery/lightbox/)

试试这个 jquery 灯箱插件我认为这就是你想要的......希望它有帮助......

# iphone - 是否可以在 iPhone 应用程序中获得当前方向，就像没有互联网的指南针一样？

> ID：13837710
> 
> 赞同：1
> 
> 时间：2012-12-12T10:29:50.450
> 
> 标签：iphone, get, compass-geolocation, direction

我想在我的 iPhone 应用程序中以 North-South-East-West [示例 - 117' SE] 的形式获取方向，而不使用 CLLocationManager 和 Internet。

或者我如何访问 Compass 应用程序以获取当前方向的度数值。

任何帮助将不胜感激。

iPhone 指南针应用程序在没有互联网的情况下工作，所以我认为它应该是可能的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:37:47.583

它与增强现实有关。您可以参考以下链接了解详情：

[http://www.raywenderlich.com/3997/introduction-to-augmented-reality-on-the-iphone](http://www.raywenderlich.com/3997/introduction-to-augmented-reality-on-the-iphone)

这可能会帮助你...

# c# - 如何在第二个线程上运行整个课程？

> ID：13837714
> 
> 赞同：1
> 
> 时间：2012-12-12T10:30:07.067
> 
> 标签：c#, multithreading

我正在研究多线程，找到了一些很好的教程，但我还有一些问题。

我想出了如何异步运行一个函数，（请参阅本[教程](http://www.dreamincode.net/forums/topic/246911-c#-multi-threading-in-a-gui-environment/)）有四个示例可以实现这一点。

但是在我正在开发的应用程序中，我想在单独的线程中运行整个类。我正在寻找这样的东西：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace multithread_test
{
    class Program
    {
        Program()
        { }
        RunInBackground RIB;

        void StartBackgroundWorker()
        {
            // how do  I get RIB to run in the background?
            RIB = new RunInBackground();
        }

        //somefunction to listen to the CallEventToUpdateGUI
    }

    //This class should run in a different thread than class Program
    class RunInBackground
    {
        void RunInBackground()
        { }

        void Function1()
        {
            //somefunction
        }

        void Function2()
        {
            // somefunction
        }

        void Function3()
        {
            Function1();
        }

        void CallEventToUpdateGUI()
        {
            //call a event to update gui
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:33:54.807

线程是关于代码的**执行**，而不是关于它的定义。你不可以做这个。您可以做的只是在其他线程上**运行代码。**

您也可以在另一个线程上*实例化*一个类，但顺便说一句，它不是定义它。

# vb.net - 如何为使用 SQL Server CE 4.0 和 .net framework 4.0 或 3.5 sp1 并通过 GAC 注册的 Visual Studio 2012 项目进行设置？

> ID：13837716
> 
> 赞同：1
> 
> 时间：2012-12-12T10:30:11.327
> 
> 标签：vb.net, visual-studio-2012, gac, sql-server-ce-4, stimulsoft

我在 VS 2012 中创建了一个 Windows 窗体应用程序项目，它使用 SQL Server CE 4.0（精简版）和 .NET 框架 3.5 sp1 以及未来的 4.0！

现在我不知道如何创建设置！因为除了不支持 SQL Server CE 4.0 先决条件的 Installshield LE 之外，VS 2012 不支持任何安装项目！

我还需要在 GAC 中注册一些 DLL（stimulsoft 报告）！

我知道如果我想确定 GAC，我必须构建一个 MSI，但我不知道如何包含 SQL Server CE 4.0！

我已经搜索了地球上的所有文档！请帮我 ：（

# javascript - 许多按钮，但一个导致 html 中的文本框

> ID：13837718
> 
> 赞同：-3
> 
> 时间：2012-12-12T10:30:23.760
> 
> 标签：javascript, html, button, textarea

如何创建一个带有许多按钮的 html，但结果应该显示在一个文本框中，并且文本应该是预定义的，即如果按下 Button1，它应该有一个预定义的文本应该显示在文本框中...

而且，如果您可以通过脚本在剪贴板中复制相同的文本....

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:53:23.073

查看以下内容， [http://jsfiddle.net/eHzwF/](http://jsfiddle.net/eHzwF/)

```
<html>
    <head>
        <script>
        function clickedIt(buttonValue){
            document.getElementById('txt').value = buttonValue;
        }
        </script>
    </head>
    <body>
        <input type='text' id='txt' value=''/>
        <input type='button' value='Button1' onclick='clickedIt("Button1")'/>
        <input type='button' value='Button2' onclick='clickedIt("Button2")'/>
        <input type='button' value='Button3' onclick='clickedIt("Button3")'/>        
    </body>
</html>​ 
```

这是你想要做的吗？

# android - android将媒体数据传递给另一个活动

> ID：13837720
> 
> 赞同：1
> 
> 时间：2012-12-12T10:30:25.327
> 
> 标签：android, android-camera, android-camera-intent

> **可能重复：**
> [将图像从一个活动传递到另一个活动](https://stackoverflow.com/questions/11519691/passing-image-from-one-activity-another-activity)

我的应用程序使用以下逻辑：在活动 A 中单击按钮启动手机摄像头，拍摄照片/视频后（用户在摄像头窗口中按下“保存”）活动 B 启动。该活动 B 包含拍摄的照片/视频的预览以及通过 http 请求上传媒体数据的可能性。我不确定如何将拍摄的图像/视频传递给活动 B.. 我无法在活动 A 中使用 StartActivityForResult 启动相机，因为结果必须传递给活动 B。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:59:03.460

有 3 个解决方案可以解决此问题。

1）首先将图像转换为字节数组，然后传递到意图，并在下一个活动中从捆绑中获取字节数组并转换为图像（位图）并设置为ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

2）首先将图像保存到 SDCard 中，然后在下一个活动中将此图像设置为 ImageView。

3) 将位图传递给 Intent 并从捆绑包中获取下一个活动中的位图，但问题是如果您的位图/图像大小当时很大，则图像不会在下一个活动中加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:49:36.780

一：首先将图像保存到 SDCard 中，然后在下一个活动中将此图像设置为 ImageView。

二：您也可以保存到字节数组中并将其传递给下一个活动：

```
 Intent A1 = new Intent(this, NextActivity.class);
    A1.putExtra("pic", byteArray);
    startActivity(A1); 
```

然后在第二个意图中从 Bundle 中获取字节数组并转换为位图图像。

# ruby - “如果/除非”等的类别是什么

> ID：13837722
> 
> 赞同：5
> 
> 时间：2012-12-12T10:30:28.913
> 
> 标签：ruby, oop, irb

考虑到 Ruby 中的一切都是一个对象，我们可以打开 irb 并输入类似的内容`4.class`并`"Text".class`查看对象来自哪个类，为什么不`if.class`给出`unless.class`返回值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T11:39:59.823

> 考虑到 Ruby 中的一切都是对象

这取决于您对“*对象*”和每个“*事物*”的定义。“*对象*”可以表示“*可以被程序操作的实体*”（从现在开始我将称之为**对象**），或者“*作为对象系统成员的值*”（从现在开始我将称之为`Object`）。

在Ruby 中，程序可以操作的所有东西（即每个**对象**）也是一个`Object`，即一个类的实例。这与 Java 不同，例如，*原语*可以由程序操作（即在这个词的意义上是**对象**），但不是`Objects`. 在 Ruby 中，不存在这种区别：每个**对象**都是一个对象`Object`，每个对象`Object`也是一个**对象**。

但是，语言中有些*东西**不能*被程序操作，也不是类的实例，即它们既不是**object**也不`Object`是 s。例如，这些是方法、变量、语法、参数列表、参数列表、关键字。

注意：你可以使用 Ruby 的反射 API 给你一个*代表*方法或参数列表的对象，但那个对象只是一个代理，它不是真实的东西。

所以，当我们说“*一切都是对象*”时，我们真正的意思是“每个**对象**都是一个`Object`”，即程序可以操作的一切都是对象系统的成员，或者换句话说，有在对象系统之外没有值（与 Java 中的原语不同）。我们*并不是*说该语言中存在的所有内容也可以在运行时由程序进行操作。

> 为什么不`if.class`给出`unless.class`返回值

好吧，首先，即使*是* `if` *一个*对象，它们也不会像你认为的那样做：当你`foo`在 Ruby 中说类似的话时，它的意思是“取消引用局部变量`foo`”或“以隐式接收者的身份调用`foo`方法`self`并且没有参数列表”。所以，

```
if.class 
```

要么给你局部变量*引用*的对象的类，要么给你方法*返回*`if`的对象的类，但*绝不*会给你本身的类。*`if`*`if`**

 **但`if`无论如何，控制流关键字不是对象（既不是**对象**也不是`Object`），因为关键字和控制流在 Ruby 中不是对象。

在[Matz 和 David Flanagan所著](http://Amazon.Com/dp/0596516177/)[*的 The Ruby Programming Language*](http://Amazon.Com/dp/0596516177/)一书中，它在第 2 页上说：

> 每个值都是一个对象

请注意，它并没有说明所有*内容*，只说明了每个*值*。

另请参阅问题[Is variable is object in ruby​​?](http://StackOverflow.Com/a/8385471/2988/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T10:36:08.583

因为它们是语言关键字而不是对象。通常，您可以分配给变量的所有内容都是对象。

从技术上讲是正确的：诸如`unless` *可能*具有编译器/解释器使用的类的关键字（取决于实际实现），但是作为语言用户，您甚至没有任何远程实际用途，因此不是暴露给你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:54:39.463

```
1.9.2-p320 :019 > def meth
1.9.2-p320 :020?>   'meth'
1.9.2-p320 :021?>   end
 => nil 
1.9.2-p320 :022 > 
```

如果您观察问号和缩进，当 IRB 检测到需要继续的内容时，它会缩进。

```
1.9.2-p320 :022 > if.class
1.9.2-p320 :023?>   ...
1.9.2-p320 :028?>   end
SyntaxError: (irb):22: syntax error, unexpected '.'
if.class
   ^
(irb):28: syntax error, unexpected keyword_end, expecting $end

1.9.2-p320 :045 > if.if
1.9.2-p320 :046?>   end
SyntaxError: (irb):45: syntax error, unexpected '.'
if.if
   ^

1.9.2-p320 :060 > str = 'abc'
 => "abc" 
1.9.2-p320 :061 > str.
1.9.2-p320 :062 >   length
 => 3 
1.9.2-p320 :063 >
1.9.2-p320 :083 > if
1.9.2-p320 :084 >     str
1.9.2-p320 :085?>   puts '>>>'
1.9.2-p320 :086?>   end
>>>
 => nil 
1.9.2-p320 :087 > 
```

如您所见，IRB 不会立即回复，即使存在明显错误，例如向保留字发送消息。这 ？是它正在等待语句的其余部分的标志。**

# android - OnClickEvents 自定义列表视图

> ID：13837725
> 
> 赞同：0
> 
> 时间：2012-12-12T10:30:41.007
> 
> 标签：android, android-listview, android-adapter

如何处理自定义列表行上的 onclick 事件？处理适配器上的事件是唯一/最佳选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:59:50.290

您可以将 onItemClickListener 用于您的 ListView 对象，但请注意，如果您的列表项（edittext，button..）中有可聚焦的对象，那么由于这些对象，该侦听器将不再收到通知。如果要将侦听器的引用传递给适配器，则应将其作为弱引用传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:42:44.960

你应该`override` `OnListItemClick`：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
} 
```

该`position`参数保持`Object`在您的内部的位置`Adapter`。因此，您可以按顺序使用它来检索它并进行计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:33:33.740

如果要点击列表行中的不同项目，最好在一行中的视图上定义不同的onClickListener，否则最好使用onItemClickListener

# python - b-tree 伪代码混淆

> ID：13837726
> 
> 赞同：0
> 
> 时间：2012-12-12T10:30:42.347
> 
> 标签：python, pseudocode

我正在尝试从伪代码实现 b-tree，这里是关于 b-tree 的一些解释：

[http://cs.utsa.edu/~dj/ut/utsa/cs3343/lecture17.html](http://cs.utsa.edu/~dj/ut/utsa/cs3343/lecture17.html) [http://www.di.ufpb.br/lucidio/Btrees.pdf](http://www.di.ufpb.br/lucidio/Btrees.pdf) [http://homepages.ius.edu/RWISMAN /C455/html/notes/Chapter18/BT-Basics.htm](http://homepages.ius.edu/RWISMAN/C455/html/notes/Chapter18/BT-Basics.htm)

所以我想用python实现代码，但只有一件事我不清楚，这段代码中“t”的目的是什么：

```
def bTreeInsert(T, k):              #k is the key
    r = T.root                      #r - root node
    if r.n == 2*t - 1:              #t = ???
        s = AlocateNode()
        T.root = s
        s.leaf = False
        s.n = 0
        s.c[1] = r                  
        bTreeSplitChildren(s, 1)
        bTreeInsertNonfull(s, k)
    else:
        bTreeInsertNonfull(r, l) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:37:40.453

`t`是树的最小度数，即树中每个节点必须拥有的最小子节点数（也是每个节点可能拥有的最大子节点数的一半）。

# php - 在php中使用反序列化时出错？

> ID：13837727
> 
> 赞同：0
> 
> 时间：2012-12-12T10:30:44.280
> 
> 标签：php

```
$info='a:1:{s:10:"2G Network";s:22:"GSM 900 / 1800 / 1900 ";}';
$info1 = unserialize($info);
print_r($info1); 
```

在 firebug 中运行代码时出现错误：

```
Notice: unserialize() [<a href='function.unserialize'>function.unserialize</a>]: Error at offset 0 of 65 bytes in... 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:34:59.817

`$info='a:38:{s:10:"2G Network";s:22:"GSM 900 / 1800 / 1900 ";}';`没有正确序列化。

数组的格式如下：

a：*项目数*：{*元素集合*}；

您阵列中的一个元素（2G 网络 => GSM 900 / 1800 / 1900）。其余的都很好，以下内容可以正确反序列化：

```
a:1:{s:10:"2G Network";s:22:"GSM 900 / 1800 / 1900 ";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:37:47.077

```
use utf8_encode and utf8_decode..
like..

$str = utf8_encode($str); 

$str= unserialize($str); 

$str= utf8_decode($str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:48:13.020

我认为这有助于解决您的问题：

```
<?php

$info = serialize(array('2G Network','GSM 900 / 1800 / 1900'));
(or)
$info='a:1:{s:10:"2G Network";s:22:"GSM 900 / 1800 / 1900 ";}';

$info1 = unserialize($info);
// Show the unserialized data;
print_r($info1);
?> 
```

例如，对于您的[功能参考](http://www.w3resource.com/php/function-reference/unserialize.php)，请单击此。

# tfs - 使用 Monodevelop 的 Team Foundation 服务和 Git 支持

> ID：13837728
> 
> 赞同：1
> 
> 时间：2012-12-12T10:30:47.167
> 
> 标签：tfs, monodevelop

**注意：这个问题是在 TFS 服务中发布 git 支持之前提出的，现在这个问题很好用。在此处阅读有关将 tfs 服务与 monodevelop 一起使用的更多信息：http: [//sviluppomobile.blogspot.se/2013/02/how-to-use-team-foundation-service-with.html](http://sviluppomobile.blogspot.se/2013/02/how-to-use-team-foundation-service-with.html)**

我们决定试用 Team Foundation Service（TFS 云版本），因为它支持 Git，这将（我们希望）帮助我们在一个地方管理 VisualStudio 和 MonoDevelop 代码。

问题是如何连接到 MonoDevelop 中的 TFS 服务？据我所知，我应该使用 HTTPS 协议，对于服务器，我只需输入 TFS 服务的名称，对于用户，我输入我的 live id user@live.com 并尝试连接。

问题是网址变成了这样

`https://user@live.com@projectname.visualstudio.com/`

请注意 url 中的两个 @ 符号。似乎在 MonoDevelop barfs 后面使用了任何 git 工具：

`NGit.Api.Errors.JGitInternalException: Exception caught during execution of fetch command ---> NGit.Errors.NotSupportedException: Invalid URL`

如果我尝试从对话框中省略用户名，则会收到另一个关于未经授权访问的错误。

有没有办法在 mac 或 MonoDevelop 的某处输入/存储 git 用户名和密码？我很确定这最终会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:38:23.533

Team Foundation Service（[`tfs.visualstudio.com`](http://tfs.visualstudio.com)以前称为`tfspreview.com`）不托管 git 存储库，仅托管 Team Foundation Server 存储库。

听起来您可能将两个不同的概念混为一谈：

*   Codeplex 是微软的开源软件托管站点，它确实支持[TFS 和 git 托管](http://blogs.msdn.com/b/codeplex/archive/2012/03/21/git-commit-m-codeplex-now-supports-git.aspx)，以及 Mercurial。

*   Microsoft 最近宣布了[git-tf](http://gittf.codeplex.com/)项目，该项目允许您创建一个本地 git 存储库来跟踪远程 Team Foundation Server 存储库。

git-tf 的设计考虑了跨平台用户，他们[使用的 IDE 不支持 Team Foundation Server 源代码控制](http://blogs.msdn.com/b/ethomson/archive/2012/08/20/team-foundation-server-and-xcode-projects-with-git-tf.aspx)。听起来使用 git-tf 可能最适合您。

# android - JSON解析使用URL读取android中的json属性

> ID：13837734
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:31:06.770
> 
> 标签：android, json

我正在使用 url 来获取文件进行解析。我想读取 url 属性并将它们放在 textview 中。下面是我的网址

[https://graph.facebook.com/fql?q=SELECT+app_id,namespace,category+FROM+application+WHERE+namespace=%22graffitiwall%22](https://graph.facebook.com/fql?q=SELECT+app_id,namespace,category+FROM+application+WHERE+namespace=%22graffitiwall%22)

这个怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:38:34.180

将您当前的 json 字符串解析为：

```
public  class JSONTask extends 
                  AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... arg) {
        String linha = "";
        String retorno = "";
        // Cria o cliente de conexão
        HttpClient client = new DefaultHttpClient();
        HttpGet get = new HttpGet("https://graph.facebook.com
                   /fql?q=SELECT+app_id,namespace,category+
                 FROM+application+WHERE+namespace=graffitiwall%22");

        try {
            HttpResponse response = client.execute(get);

            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();

            if (statusCode == 200) { // Ok
              BufferedReader rd = new BufferedReader(new 
              InputStreamReader(response.getEntity().getContent()));

              while ((linha = rd.readLine()) != null) {
                    retorno += linha;
              }
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return retorno; 
    }

    @Override
    protected void onPostExecute(String result) {
        // Create here your JSONObject...

    // getting JSON string from URL
    JSONObject json = new JSONObject(result);

     // Getting Array of data
    JSONArray userlist = json.getJSONArray("data");

    for(int i = 0; i < userlist.length(); i++){
         JSONObject c = userlist.getJSONObject(i);

         // Storing each json item in variable
          String str_app_id = c.getString("app_id");              
          String str_namespace = c.getString("namespace");
          String str_category = c.getString("category");
     }

    } 
```

# networking - 潘多拉夫斯监控

> ID：13837743
> 
> 赞同：0
> 
> 时间：2012-12-12T10:31:45.710
> 
> 标签：networking, network-monitoring, network-tools

我是网络监控的新手。我正在使用 pandorafms 4.0.2 免费版。我添加了大约 1,167 个代理和 5,831 个远程监视器。未知代理和未知监视器级别很高。未知监视器/代理的数量增加和减少，但未达到“0”。我随机检查了几个未知的监视器并从终端 ping 他们的 IP 地址。结果显示它们还活着，但 pandorafms 显示它们处于未知状态。我在大约 6 小时后检查了它们。但网络延迟仍然很高。需要帮助。（我使用 ubuntu 服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T09:15:26.310

您描述的行为可能是由于两个原因：

1.  服务器资源不足。通常一台 Pandora 服务器可以监控 2000 台设备，但这取决于托管 Pandora 的服务器的资源。您可以[在此处查看最低要求](http://wiki.pandorafms.com/index.php?title=Pandora:Documentation_en:Installing#Minimum_Hardware_Requirements)。

2.  这可能是一个错误 :-)，在 4.x 版本中检测到与网络监控相关的错误。此错误会导致使用 ping 进行一些随机故障监控。

我会将您的安装更新到新的 5.0 版本，如果未知模块仍然存在，您可以通过禁用某些代理来检查资源不足的问题。您还可以[在此处查看为大型环境配置 Pandora 的](http://wiki.pandorafms.com/index.php?title=Pandora:Documentation_en:Optimization)一些技巧。

希望能帮助到你。

# bash - 使用 tar 和 bash 脚本进行压缩：第 n 行是一个目录

> ID：13837744
> 
> 赞同：0
> 
> 时间：2012-12-12T10:31:51.690
> 
> 标签：bash, shell

我是 bash 脚本的新手，现在尝试使用它制作备份文件。我面临的是下面的脚本（我的 bash 文件中的第 47 行），

`$(tar -czvPf ${folder_backup}/rajal/backup.tgz -C /var/www/tmk/app .)`

总是给 shell 上的错误`./test: line 47: ./: Is a directory`，而它在终端上工作得很好。

仅供参考，文件夹应用程序是包含文件和子文件夹的文件夹。

有人可以帮我吗？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:01:01.350

```
$(command) 
```

意思是：执行`command`并返回它的输出。为了说明，它经常这样使用：

```
result=$(foo 4 123) 
```

评估后，`result`将保存任何命令`foo 4 123`输出。

如果您直接使用该构造 - 不是作为另一个命令的参数，或者在变量赋值中，shell 将尝试*执行命令的输出*。虽然有时需要这样做，但通常不是，这就是您所看到的。

因此，只需`$( )`从您的命令中删除并`tar`直接运行。如果要捕获 的输出`tar`，请将其重定向到文件或使用上面的构造。

* * *

请注意，`$(command)`并且`${env_var_name}`是完全不同的。语法很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:57:37.967

就像@Mat 一样`Why do you have $( ) around the tar?`，所以我刚刚删除了它，它现在可以工作了：D

# iphone - 多个 UIView 动画命中

> ID：13837748
> 
> 赞同：0
> 
> 时间：2012-12-12T10:32:07.680
> 
> 标签：iphone, objective-c, ios

我正在`uiviews`使用两个动画`CGAffineTransform`

对于第一个视图：

```
swingView.transform = CGAffineTransformRotate(swingView.transform, M_PI/2);

[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationOptionRepeat|UIViewAnimationOptionAutoreverse
                 animations:^{
                     swingView.transform = CGAffineTransformMakeRotation(M_PI);
                 } 
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }]; 
```

对于第二个视图

```
[UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:2.0];

    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    [UIView setAnimationBeginsFromCurrentState:YES];
    CGAffineTransform transform = CGAffineTransformMakeTranslation(touchLocation.x, touchLocation.y);

    CGAffineTransform transform1 = CGAffineTransformMakeTranslation(-120, 0);
     myview.transform = transform1;
    [UIView commitAnimations]; 
```

这里有两个在开始`views`时**击中**`animation`，我必须做的是不允许在这些之间击中`uiviews`。

# delphi - 在不同的函数 Delphi 中使用对象

> ID：13837749
> 
> 赞同：-2
> 
> 时间：2012-12-12T10:32:07.763
> 
> 标签：delphi, class, object, delphi-2010

这只是一个非常简单的问题，我找不到一个好的明确答案。由于时间紧迫，我没有时间阅读所有文档。

但在这里。

我在我的 TForm 类之上创建了一个新类，如下所示：

```
 Bucket = Class
   glass: Integer;
   steel: Integer;
 End; 
```

然后我在属于 TForm1 的方法中创建了几个对象

```
procedure TForm1.getMarbles;
var
  objPlastic: Bucket;
  objAlu: Bucket;

begin
  // Initialize objects
  objPlastic := Bucket.Create;
  objAlu := Bucket.Create;

  // Get Values from edtBox
  val(Edit1.Text, objPlastic.steel, code);
  val(Edit2.Text, objAlu.steel, code);
  val(Edit3.Text, objPlastic.glass, code);
  val(Edit4.Text, objAlu.glass, code);
end; 
```

我的问题是我不知道如何在其他方法中使用这些对象。我尝试在我想要使用它们的其他方法中以迄今为止我所知道的各种方式定义它们，但我无法让它发挥作用。

这是方法以及我当前设置的方法（始终返回 0）：

```
procedure TForm1.marbleDrop(kind: string);
var
  objPlastic: Bucket;
  I: Integer;
begin
  objPlastic := Bucket.Create;
  if kind= 'plastic' then // the function is receiving this parameter
  begin
    for I := 0 to objPlastic.glass do
    begin
      showmessage(inttostr(objPlastic.glass)); //returns 0
    end;
  end;

end; 
```

很抱歉这种问题，但我找不到更好的方法。

顺便说一句，这是我正在使用的代码的简化版本。我尽了最大努力消除任何拼写错误，因为它是我实际使用的翻译，但主要是关于这个想法。我在 delphi 的代码中没有拼写错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:52:25.910

在其他方法中访问对象，您必须：

1.  将对象声明为 Form 类的成员：

    ```
    type
      TForm1 = class(TForm);
      ...
      private
        objPlastic: Bucket;
        objAlu: Bucket;
      ...
      end;

    procedure TForm1.getMarbles;
    begin
      // Initialize objects
      if objPlastic = nil then objPlastic := Bucket.Create;
      if objAlu = nil then objAlu := Bucket.Create;

      // Get Values from edtBox
      objPlastic.steel := StrToIntDef(Edit1.Text, 0);
      objAlu.steel := StrToIntDef(Edit2.Text, 0);
      objPlastic.glass := StrToIntDef(Edit3.Text, 0);
      objAlu.glass := StrToIntDef(Edit4.Text, 0);
    end;

    procedure TForm1.marbleDrop(kind: string);
    begin
      if (kind = 'plastic') and (objPlastic <> nil) then
      begin
        ShowMessage(IntToStr(objPlastic.glass));
      end;
    end; 
    ```

2.  将它们作为方法本身的参数传递：

    ```
    procedure TForm1.getMarbles(objPlastic, objAlu: Bucket);
    begin
      // Get Values from edtBox
      if objPlastic <> nil then
      begin
        objPlastic.steel := StrToIntDef(Edit1.Text, 0);
        objPlastic.glass := StrToIntDef(Edit3.Text, 0);
      end;
      if objAlu <> nil then
      begin
        objAlu.steel := StrToIntDef(Edit2.Text, 0);
        objAlu.glass := StrToIntDef(Edit4.Text, 0);
      end;
    end;

    procedure TForm1.marbleDrop(objWhichKind: Bucket);
    begin
      if objWhichKind <> nil then
      begin
        ShowMessage(IntToStr(objWhichKind.glass));
      end;
    end;

    procedure TForm1.someMethod();
    var
      objPlastic: Bucket;
    begin
      objPlastic := Bucket.Create;
      getMarbles(objPlastic, nil);
      marbleDrop(objPlastic);
      objPlastic.Free;
    end; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:37:36.337

当然它返回零。这是另一个对象。您应该像传递任何其他参数变量一样传递它。你所做的类似于

```
procedure TForm1.Drop1(kind: string);
begin
   marbleDrop(); // here kind = "staal"
end;

procedure TForm1.marbleDrop();
var
  kind: string;
begin
  if kind = 'plastic' then // it is not !!! why ???
  begin
....
  end;
end; 
```

* * *

您还有另一个问题 -[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)

```
 val(Edit4.Text, objAlu.glass, code);
end; 
```

您刚刚创建了两个对象 - 并为它们分配了[堆内存](http://en.wikipedia.org/wiki/Heap_memory)。但是你**没有释放他们**。那是剩下的垃圾，它会不断增长，直到程序耗尽所有 Windows 内存并被杀死。

如果您想在没有任何准确性的情况下使用内存并且不“浪费”思考和学习时间 - 您最好使用一些在虚拟机中运行的托管语言，如 PHP、Python、Java 和其他基于 JVM、C# 和其他 .基于网络。

要编写好的 Delphi 代码，您至少应该对 CPU 的功能和原因有所了解。

* * *

特别是在您的代码中，您最好

1.  使用记录而不是类
2.  将它们作为`const-`或`var-`参数传递以避免冗余复制。

像那样：

```
type TBucket = Record  glass, steel: Integer; End;
type TForm1 = class (TForm) 
     .....
 private
   var objPlastic, objAlu: TBucket;
    (* making variables more global: now they are form-local not function-local *)
......

procedure TForm1.getMarbles;
begin
   objPlastic.steel := StrToIntDef(Edit1.Text, 0);
   objAlu.steel := ...
   Self.objPlastic.glass ...  (* adding Self - just for clarity where those variable are taken from *)
   Self.objAlu.glass ....
end; 

procedure TForm1.marbleDrop(kind: string);
var
  I: Integer;
begin
  if kind = 'plastic' then // the function is receiving this parameter
  begin
    for I := 0 to Self.objPlastic.glass do
    begin
      showmessage(inttostr(objPlastic.glass)); 
        //getting via common parent context - TForm1 object, referenced as Self pseudo-variable
      marbleTell(objPlastic); // passing as parameter
    end;
  end;
end;

procedure TForm1.marbleTell(const arg: TBucket);
// do not forget to use const to pass variable by-reference not by-value
begin
   showmessage(inttostr(arg.glass)); // getting via argument
end; 
```

# jquery - jQuery Mobile Multi-Page-方法指定捕获事件

> ID：13837753
> 
> 赞同：1
> 
> 时间：2012-12-12T10:32:28.707
> 
> 标签：jquery, jquery-mobile

jQuery Mobile Multi-Page-方法指定捕获事件

html:sub1.html , sub2.html , sub3.html + js:each_page.js

sub1.html

```
<!DOCTYPE HTML>
<HTML><head>
<link rel="stylesheet" href="../../jquery-mobile/jquery.mobile-1.2.0.min.css" />
<script src="../../jquery-mobile/jquery-1.8.2.min.js" ></script>
<script src="each_page.js" ></script>
<script>
function init(){
        now = new Date();
        $('#p1_content').html("John's event..."+ now.getMinutes() +":"+ now.getSeconds() );
}
function fun_a(){}
function fun_b(){}
</script>
<script src="../../jquery-mobile/jquery.mobile-1.2.0.min.js" ></script>
</head><BODY>
<div data-role=page id='p_sub1'>
<div data-role="header" data-theme="x" data-position="fixed" >
        <a data-role="button" id="prv" data-icon="false" data-rel="back">Back</a>
        <h1 id="title_name"> page_x </h1>
  </div>

 <div data-role="content" id="p1_content"> <h3>sub[1]</h3> </div>

<div data-role="footer" data-position="fixed" id="footer">
        <div data-role="navbar" data-iconpos="bottom">
          <ul>
            <li><a href="sub1.html" ><img src="../../images/m1.png"/></a></li>
            <li><a href="sub2.html" ><img src="../../images/m2.png"/></a></li>
            <li><a href="sub3.html" ><img src="../../images/m3.png"/></a></li>
          </ul></div>
        </div>
</div></BODY></HTML> 
```

sub2.html

```
...
    <script>
    function init(){
            now = new Date();
            $('#p1_content').html("Mary ....."+ now.getMinutes() +":"+ now.getSeconds() );
    }
    function fun_ii(){}
    function fun_jjj(){}
    </script>
... 
```

each_page.js

```
$(function() {
    var selector = ':jqmData(role=page)';
    $('body').on('pageinit', selector, function(e, data) {
        // initialize page
        var $page = $(this);
        var now = new Date();
        $('#'+$page.attr('id') +' #title_name').html(""+ $page.attr('id') +"--- now:"+ now.getMinutes() +":"+ now.getSeconds()  );
        //alert( $page.attr('id')  );
    }).on('pagebeforeshow', selector, function(e, data) {
        // showpage
        var $page = $(this);
        init();
    });

}); 
```

个别页面调用什么init()
或其他方法？！
因为很多页面，都有不同的javascript方法
上面只差点叫单
mobileinit touch sub1.html (v.sub1.html:init() ; x.sub2.html:init())

# vba - 将包含数据的所有单元格从一张表复制到另一张表

> ID：13837754
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:32:32.607
> 
> 标签：vba, excel

我有一个带有一些工作表的 excel 文件。我需要复制所有包含数据的单元格，并将其复制到工作表中名为“所有数据”的另一个 excel 文档中。然后我需要检查 H 列中的值是否为空或“0”我需要删除该值所在的所有行。我怎样才能做到这一点？

这是我从文件中获取数据的代码，但我不确定我是否只有数据（并且没有空单元格）

```
 Windows("Book1").Activate
 Sheets(1).Cells.Select
 Selection.Copy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:53:21.863

尝试这个。

```
Dim n as integer
Dim n1 as integer

n = 0
n1 = 0

While Sheet("Book1").Range("A1").Offset(n, 0) <> ""
    If Sheet("Book1").Range("H1").Offset(n, 0) <> null then     
       If Sheet("Book1").Range("H1").Offset(n, 0) <> 0 then
          Sheet("Book1").Range("A1:Z1").Offset(n, 0).Copy
          Sheet("All Data").Range("A1:Z1").Offset(n1, 0).Paste
          n1 = n1 + 1
       End If
    End If
    n = n + 1
Wend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:36:08.710

这会将数据复制到 Sheet2，将其更改为您的其他工作表/区域。然后它将过滤数据，删除可见行（基于条件的数据），然后删除过滤器：

```
Sheet1.Range("A1").CurrentRegion.Copy Sheet2.Range("A1")

With Sheet2
    .Range("A1").CurrentRegion.AutoFilter Field:=8, Criteria1:=0, Operator:=xlOr, Criteria2:="Null"
    .AutoFilter.Range.Offset(1, 0).Resize(.AutoFilter.Range.Rows.Count - 1) _
                                    .SpecialCells(xlCellTypeVisible).EntireRow.Delete Shift:=xlUp
    .AutoFilterMode = False
End With 
```

# android - 在 listView 中隐藏小部件

> ID：13837755
> 
> 赞同：0
> 
> 时间：2012-12-12T10:32:38.417
> 
> 标签：android

单击按钮后，如何在 listView 的所有行中隐藏/显示布局元素。我的代码

```
Button edit = (Button) findViewById(R.id.edit);
        edit.setOnClickListener(new Button.OnClickListener() {          
            public void onClick(View v) {

                LinearLayout ll = (LinearLayout)findViewById(R.id.hidden);
                if (ll.getVisibility() == View.GONE)
                    ll.setVisibility(View.VISIBLE);
                else 
                    ll.setVisibility(View.GONE);
            }
        }); 
```

但它只隐藏第一行中的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:40:53.540

您必须使用通过单击方法升高或降低的标志。然后在适配器的 getView 方法中使用此标志来隐藏或显示视图。在 click 方法结束时，调用 notifyDataSetChanged 来刷新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:41:41.073

```
 ListView lv = (ListView)findViewById(R.id.list);
   if (lv.getVisibility() == View.GONE)
                lv.setVisibility(View.VISIBLE);
   else 
                lv.setVisibility(View.GONE); 
```

隐藏您的 ListView 而不是隐藏整个布局。希望它会对您有所帮助。

# iphone - xcdatamodeld 的问题

> ID：13837757
> 
> 赞同：1
> 
> 时间：2012-12-12T10:32:45.403
> 
> 标签：iphone, core-data

我拥有`UserInfo.xcdatamodeld`并对应于实体 UserInfo 和 Department。因此，如果我更改或更新我的 xcdatamodeld 文件，即在其中添加新属性或更新关系，这些更改是自动反映在我的 NSManagedObject 类文件中还是我必须重新创建类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:47:00.560

每次更新模型文件时都需要创建 NSManagedObject 类。当您这样做时，您的类将使用最新的可用属性和关系进行更新。您也可以手动添加属性，但为了避免人为错误，更好的方法是删除旧类并动态添加它们。

# iphone - 重启游戏时游戏场景崩溃

> ID：13837758
> 
> 赞同：0
> 
> 时间：2012-12-12T10:32:49.570
> 
> 标签：iphone, ios, cocos2d-iphone

我正在为 IOS6 使用 cocos2D 游戏引擎开发游戏。我第一次使用以下代码启动游戏：

```
-(void)addGameScene

{

CCDirector *director = [CCDirector sharedDirector];
if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
    [CCDirector setDirectorType:kCCDirectorTypeMainLoop];
else {
    [CCDirector setDirectorType:kCCDirectorTypeDisplayLink];
}

// Init the View Controller
viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
viewController.wantsFullScreenLayout = YES;
if(!glView)
    glView = [[EAGLView alloc] initWithFrame:[window bounds]];
[director setOpenGLView:glView];

[director setOpenGLView:glView];
[director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
[viewController setView:glView];
[window setRootViewController:viewController];
[window addSubview: viewController.view];
[window makeKeyAndVisible];
[[CCDirector sharedDirector] runWithScene: [HelloWorldLayer scene]];
} 
```

当我离开游戏场景时，我并没有结束 cocos2D 游戏引擎，而是停止动画并隐藏 glView。我使用此代码。

```
 [[CCDirector sharedDirector] stopAnimation];
CATransition *animation3 = [CATransition animation];
[animation3 setDuration:0.5f];
[animation3 setType:kCATransitionFade];
[animation3 setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[[[CCDirector sharedDirector].openGLView layer] addAnimation:animation3 forKey:@"SwitchToView"];
[[CCDirector sharedDirector].openGLView setHidden:YES]; 
```

当我再次开始要玩的游戏时，我使用以下代码：

```
[[CCDirector sharedDirector].openGLView setHidden:NO];
[[CCDirector sharedDirector] replaceScene:[HelloWorldLayer scene]];
[[CCDirector sharedDirector] startAnimation]; 
```

它工作正常。

但是当我第一次启动游戏时，我从游戏场景返回，然后按设备的主页按钮退出应用程序，然后我再次启动应用程序，然后我重新启动游戏，我在这种情况下会崩溃。

控制台打印：

```
2012-12-12 15:53:24.847 CasinoApp[2856:12203] -[HelloWorldLayer init] : Screen width 480.00 screen height 320.00
2012-12-12 15:53:24.848 CasinoApp[2856:12203] 10.000000

2012-12-12 15:53:24.849 CasinoApp[2856:12203] -[CCTexture2D(Image) initWithImage:resolutionType:] : cocos2d: CCTexture2D. Can't create Texture. UIImage is nil
2012-12-12 15:53:24.850 CasinoApp[2856:12203] -[CCTextureCache addImage:] : cocos2d: Couldn't add image:lines in CCTextureCache

2012-12-12 15:53:24.850 CasinoApp[2856:12203] *** Assertion failure in -[CCDirectorTimer startAnimation], /Users/rakesh/Desktop/Ryan/Code/CasinoApp/CasinoApp/libs/cocos2d/Platforms/iOS/CCDirectorIOS.m:498 
```

谁能告诉我这是什么原因。将不胜感激.. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T12:51:40.793

当您可以使用 CCScene 类的场景方法时，该类将重新初始化并再次构建整个场景。因此，如果您用相同的场景替换场景，则不必再次启动动画，如果您隐藏了 glView，您可以尝试暂停导演并在取消隐藏 glView 之前再次恢复它。

```
[[CCDirector shareDirector]pause];
[[CCDirector sharedDirector].openGLView setHidden:YES]; 
```

和

```
[[CCDirector shareDirector]resume];
[[CCDirector sharedDirector].openGLView setHidden:YES];
[[CCDirector sharedDirector] replaceScene:[HelloWorldLayer scene]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:36:18.363

尝试

```
[[CCDirector sharedDirector] stopAnimation];
[[CCDirector sharedDirector] pause]; 
```

和

```
[[CCDirector sharedDirector] stopAnimation]; // call this to make sure you don't start a second display link
[[CCDirector sharedDirector] resume];
[[CCDirector sharedDirector] startAnimation]; 
```

希望这可以帮助！

# asp.net - 上传 Excel 文件，其中行包含日期时间格式但不显示

> ID：13837759
> 
> 赞同：0
> 
> 时间：2012-12-12T10:32:49.990
> 
> 标签：asp.net, c#-3.0

我有一个包含日期时间格式的一列数据的 excel 文件。当我上传文件时，日期时间格式与这些格式不匹配，无法上传文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:55:11.893

Hitesh 是否提到您可以检查 Column 并检查它是否是 DateColumn。确认后，我们可以检查接下来的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:50:35.820

您需要在 Excel 中格式化日期列。只需选择整列->右键单击->格式化单元格->日期->选择适当的格式。

# javascript - 如何构建 jquery/javascript 来完成事件/警报，如 SO 的“确认导航？”

> ID：13837762
> 
> 赞同：1
> 
> 时间：2012-12-12T10:33:00.990
> 
> 标签：javascript, jquery, navigation

> **可能重复：**
> [如何显示“您确定要离开此页面吗？” 何时提交更改？](https://stackoverflow.com/questions/1119289/how-to-show-the-are-you-sure-you-want-to-navigate-away-from-this-page-when-ch)

Stackoverflow 有一个非常有趣的功能：如果您开始写一个新问题，然后您尝试离开该页面，它会显示一个警告，要求您确认是否要离开此页面。无论您是输入新地址并在地址栏中输入它，使用前进/后退按钮等，这都有效。

这是如何运作的？我有兴趣了解有关警报本身的更少信息，更具体地了解触发警报的事件/代码。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:35:45.930

修改文本区域时设置一个标志。`unload()`在窗口事件上检查标志，并在`alert()`需要时显示。像这样的东西：

```
var textAmended = false;
$("textarea").change(function() {
    textAmended = true;
});

$(window).unload(function() {
    if (textAmended) {
        alert('You started writing a question...');
    }
}); 
```

[有关 unload() 的更多信息](http://api.jquery.com/unload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:46:46.567

这通常通过检查 textarea、input 等的值并更改 window.onunload 函数来完成，或者通过传递字符串或不传递任何内容，如下所示：

```
$('textarea').change(function() {
    if( this.value == "" ) {
        window.onbeforeunload = null;
    }else{
        window.onbeforeunload = "Are you sure you want to leave?";
    }
}); 
```

那应该触发内置确认！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:47:46.223

我认为您需要确认只是离开当前窗口或关闭它：

> **[http://jsfiddle.net/tLWZX/](http://jsfiddle.net/tLWZX/)**

```
$(window).on('beforeunload', function() {
    return 'You have unsaved changes.';
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:11:17.100

```
window.onbeforeunload = exit;
function exit() {
var t = 0;
$("textarea").each( function() {
var v = $(this).val();
if(v!="") {
t=t+1;
}
});
if(t>=1) {
return "You Have Some text written in textareas. Still you want to leave?";
}
} 
```

你想要的是最好和最纯粹的方式！

[http://jsfiddle.net/p4NPh/](http://jsfiddle.net/p4NPh/)

# android - 视差背景地线（轨迹）编辑器

> ID：13837763
> 
> 赞同：0
> 
> 时间：2012-12-12T10:33:03.870
> 
> 标签：android, andengine, parallax

我想创建与此类似的游戏：https: [//play.google.com/store/apps/details? id=com.fingersoft.hillclimb](https://play.google.com/store/apps/details?id=com.fingersoft.hillclimb)

我的问题是如何管理“地面”层，或者换句话说，“轨道层”。

如何描述它 - 我考虑某种定义文件（XML/JSON/CSV 等等），其中包含用于流动描述和活动元素放置的地面点数组（x，y） - 你有这方面的经验吗？

是否有任何用于快速设计的工具（如 TMX 编辑器） - 一切都比 Vi 好。

# c# - 等待任务中的进程

> ID：13837764
> 
> 赞同：0
> 
> 时间：2012-12-12T10:33:04.687
> 
> 标签：c#, winapi, task-parallel-library

我正在尝试执行以下操作：我有一个带有网格的窗口，并且在每个单元格中我想显示一台远程计算机（使用 VNC）。为此，我启动流程并将它们放入面板中。

我的问题是我必须等待该进程成为某个窗口（因为身份验证窗口会在我想要的真实窗口之前显示一小段时间）。

因此，对于我必须开始的每个过程，我都这样做：

```
Task t = Task.Factory.StartNew(() =>
{
    Process proc = Process.Start(@"C:\Program Files\RealVNC\VNC4\vncviewer.exe", name + " -Scaling AspectFit -Enabletoolbar=0");
    Thread.Sleep(4000); // Wait for real window
    this.BeginInvoke((MethodInvoker)delegate
    {
         AddProcessToTable(proc, name); // Adds the window in the panel
    });
}); 
```

它工作正常；但是如果我想`Thread.Sleep()`用这个替换：

```
while (!proc.MainWindowTitle.Contains(name))
    Thread.Sleep(10); 
```

但是当我这样做时，我的进程会启动，但它们不会进入面板。我下了断点检查，while和while后面的行都被执行了，所以不知道哪里出错了……应该是[这家伙](https://stackoverflow.com/a/6390261/860246)干的吧。

仅供参考，这是将进程添加到 TableLayoutPanel 的函数：

```
void AddProcessToTable(Process proc, string name)
{
    Control panel = null;
    // ...
    // Retrieving panel
    // ...

    SetParent(proc.MainWindowHandle, panel.Handle);
    SendMessage(proc.MainWindowHandle, 274, 61488, 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:48:43.427

而不是 Thread.Sleep，为什么不使用 proc.WaitForInputIdle()，它将等待进程进入其主窗口的消息循环并准备好输入。[http://msdn.microsoft.com/en-us/library/8d7363e2.aspx](http://msdn.microsoft.com/en-us/library/8d7363e2.aspx)上有文档，我在[http://www.akadia.com/](http://www.akadia.com/services/dotnet_process_handling.html)找到了（但没有测试）一篇关于如何使用它的文章[服务/dotnet_process_handling.html](http://www.akadia.com/services/dotnet_process_handling.html)

```
Process process = new Process();
    process.StartInfo.FileName = "Notepad";
    process.Start();

    process.WaitForInputIdle();

    Thread.Sleep(5000);
    if(!process.CloseMainWindow())
    {
        process.Kill();
    } 
```

# android - 网络提供商的 Android 定位有时会失败

> ID：13837772
> 
> 赞同：0
> 
> 时间：2012-12-12T10:33:26.057
> 
> 标签：android, ssl, location, certificate

有时在使用 Android 2.3.1 时，我在使用网络提供商获取我的位置时遇到问题。

这是日志：

```
I/System.out(  268): [INFO:2069833702]: LogSource: Running flush
I/System.out(  268): [INFO:2069833708]: LogSource: Sending payload [bytes=708]
I/System.out(  268): [SEVERE:2069834375]: LogSource: AsyncHttpRequestImpl.run(): exception thrown : No peer certificate: javax.net.ssl.SSLPeerUnverifiedException 
```

在这种情况下，wifi 网络正常，没有连接问题，所以问题似乎（也许？）与谷歌证书有关。

有谁知道发生了什么？还有其他方法可以调试这些错误吗？也许使用 ssl 命令？

# c# - GetHashCode 和桶

> ID：13837774
> 
> 赞同：1
> 
> 时间：2012-12-12T10:33:27.453
> 
> 标签：c#, arrays, collections, hashcode, buckets

我试图更好地理解散列集的内部结构，例如`HashSet<T>`，它们是如何工作的，以及为什么它们是高性能的。我发现了下面的文章，实现了一个带有存储桶列表的简单示例[http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)。

据我对这篇文章的理解（我之前也这么认为），桶列表本身对每个桶中的一定数量的元素进行分组。一个桶由哈希码表示，即`GetHashCode`在元素上调用它。我认为更好的性能是基于桶比元素少的事实。

现在我编写了以下幼稚的测试代码：

```
 public class CustomHashCode
    {
        public int Id { get; set; }

        public override int GetHashCode()
        {
            //return Id.GetHashCode(); // Way better performance
            return Id % 40; // Bad performance! But why?
        }

        public override bool Equals(object obj)
        {
            return ((CustomHashCode) obj).Id == Id;
        }

    } 
```

这里是探查器：

```
 public static void TestNoCustomHashCode(int iterations)
    {

        var hashSet = new HashSet<NoCustomHashCode>();
        for (int j = 0; j < iterations; j++)
        {
            hashSet.Add(new NoCustomHashCode() { Id = j });
        }

        var chc = hashSet.First();
        var stopwatch = new Stopwatch();
        stopwatch.Start();
        for (int j = 0; j < iterations; j++)
        {
            hashSet.Contains(chc);
        }
        stopwatch.Stop();

        Console.WriteLine(string.Format("Elapsed time (ms): {0}", stopwatch.ElapsedMilliseconds));
    } 
```

我天真的想法是：让我们减少桶的数量（使用简单的模数），这应该会提高性能。但这很糟糕（在我的系统上，50000 次迭代大约需要 4 秒）。我还认为，如果我只是将 Id 作为哈希码返回，性能应该会很差，因为我最终会得到 50000 个桶。但情况恰恰相反，我想我只是产生了所谓的碰撞音，而不是改进任何东西。但话又说回来，遗愿清单是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:39:36.143

`Contains`基本上是一张支票：

1.  获取项目的哈希码。
2.  找到对应的桶 - 这是基于项目哈希码的直接数组查找。
3.  如果存储桶存在，则尝试在存储桶中查找项目 - 这将遍历存储桶中的所有项目。

通过限制桶的数量，您增加了每个桶中的项目数，因此哈希集必须遍历的项目数，检查是否相等，以便查看项目是否存在。因此，查看给定项目是否存在需要更长的时间。

您可能已经减少了哈希集的内存占用；您甚至*可能*减少了插入时间，尽管我对此表示怀疑。你没有减少存在检查时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:54:24.803

减少桶的数量不会提高性能。实际上，返回整数值的`GetHashCode`方法`Int32`本身，这对于性能来说是理想的，因为它会产生尽可能多的桶。

提供哈希表性能的东西是从键到哈希码的转换，这意味着它可以快速消除集合中的大部分项目。它必须考虑的唯一项目是同一个桶中的项目。如果您的存储桶很少，则意味着它可以消除更少的项目。

最糟糕的可能实现`GetHashCode`将导致所有项目进入同一个存储桶：

```
public override int GetHashCode() {
  return 0;
} 
```

这仍然是一个有效的实现，但它意味着哈希表获得与常规列表相同的性能，即它必须遍历集合中的所有项目才能找到匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:07:20.167

可以像这样实现一个简单`HashSet<T>`的（只是一个草图，不编译）

```
class HashSet<T>
{
    struct Element
    {
        int Hash;
        int Next;
        T item;
    }

    int[] buckets=new int[Capacity];
    Element[] data=new Element[Capacity];

    bool Contains(T item)
    {
        int hash=item.GetHashCode();
        // Bucket lookup is a simple array lookup => cheap
        int index=buckets[(uint)hash%Capacity];
        // Search for the actual item is linear in the number of items in the bucket
        while(index>=0)
        {
           if((data[index].Hash==hash) && Equals(data[index].Item, item))
             return true;
           index=data[index].Next;          
        }
        return false;
    }
} 
```

如果您看一下，搜索成本`Contains`与存储桶中的项目数成正比。所以拥有更多的桶使得搜索成本更低，但是一旦桶的数量超过了项目的数量，额外的桶的收益就会迅速减少。

拥有不同的哈希码也可以尽早比较桶中的对象，避免潜在的昂贵`Equals`调用。

总之`GetHashCode`应该尽可能的多样化。工作是`HashSet<T>`将大空间减少到适当数量的桶，这大约是集合中的项目数（通常在两倍内）。

# iphone - 通过单击按钮将滑块值增加 1

> ID：13837778
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:33:37.913
> 
> 标签：iphone, objective-c, ios, xcode, ipad

当我单击按钮时，我有一个滑块，滑块值增加了一个，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:39:14.380

为滑块创建一个出口。并且每当您单击按钮时，获取滑块值，将其加 1，然后按插座更新滑块。

编辑：

.H 文件

```
#import "AppDelegate.h"

@implementation AppDelegate

- (IBAction)incSlider:(id)sender {
    [_slider setIntValue:[_slider intValue]+1];

}
@end 
```

.M 文件

```
#import "AppDelegate.h"

@implementation AppDelegate

- (IBAction)incSlider:(id)sender {
    [_slider setIntValue:[_slider intValue]+1];

}
@end 
```

.xib 的屏幕截图 ![在此处输入图像描述](../Images/3faa6dc393259c38ce5fd9c06390e03d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:41:42.707

可以使用`[setValue: animated:]` UISlider 的方法。您可以使用此方法设置滑块。[获取在 Github Here](https://github.com/domesticcatsoftware/DCFineTuneSlider)上共享的示例项目。

希望对你有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:32:54.177

将滑块的最大值设置为大于**1**。

采用：

```
float sliderValue = yourSliderOutlet.value;
[yourSliderOutlet setValue:sliderValue animated:YES]; 
```

# javascript - 关闭窗口后执行操作

> ID：13837782
> 
> 赞同：1
> 
> 时间：2012-12-12T10:33:55.947
> 
> 标签：javascript

我有一个打开一个新标签的 JS。我想刷新原始窗口，但只有在打开的选项卡关闭后。你会怎么做？

这是我现在拥有的代码（显然不起作用 - 它在打开新窗口后立即刷新）：

```
window.open( SOME_WINDOW );
window.location.reload(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:44:23.603

你可以用这样的东西来做。存储窗口句柄，并使用轮询计时器检查窗口的关闭属性。

```
var childwindow = window.open(SOME_WINDOW); 
var timer = setInterval(function() {   
  if(childwindow.closed) {  
    clearInterval(timer);  
    window.location.reload();
  }  
}, 1000); 
```

可以在[这里找到另一个解决方案（甚至更好）](https://stackoverflow.com/a/10792463/474535)

# java - Scala 2.10 宏与 Java 中可用的宏相比

> ID：13837784
> 
> 赞同：8
> 
> 时间：2012-12-12T10:34:04.527
> 
> 标签：java, scala, macros, scala-2.10

我不太了解这个领域。

与使用编译预处理器的 Java 和 CGLIB、ASM、Byteman 等工具相比，有人可以解释 Scala 2.10 中使用宏的可能性吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T10:47:51.433

**[更新]**：我尝试使用[Slick](http://slick.typesafe.com/)合并一个示例。对于 Java（非 Scala）观众来说，总结很多这些东西是很困难的。

Scala 2.10 中的宏作为一等公民将成熟的元编程带入了该语言本身。

```
// we often do this:
log("(myList++otherList).size: " + (myList++otherList).size)
// just to log the string:  
// "(myList++otherList).size: 42"

// Imagine log, if implemented as a macro:
log((myList++otherList).size)
// could potentially log both the EXPRESSION AND IT'S VALUE:
// "(myList++otherList).size: 42" 
```

像这样的功能*通常*可以通过文本预处理或字节码操作以安全和干净的方式实现吗？

元编程在某个阶段归结为代码生成，并且没有限定，它是各种技术的总称——为了“不必自己编写一点代码”——如果要列举一些这些技术以某种粗略的*阶段*顺序排列- 从预编译的原始源代码到执行代码，列表可能如下所示：

*   文本源预处理器 (C)
*   模板系统 (C++)
*   反射在某些动态语言（Ruby）中“自然可用”
*   静态类型语言 (Java) 中的运行时反射，它以类型安全为代价为语言提供了一些活力
*   字节码操作

*（请注意，我省略了**在编译时运行的**宏系统，下一段将详细介绍它们。）*

首先，考虑到上述所有技术本质上都是生成*代码*——无论是纯文本源代码的生成/操作，还是运行时字节码的生成/操作。

宏观系统呢？在编译时运行的宏*不是在文本源代码或编译字节码上运行，而是在更有价值的阶段*运行 - 它们在编译期间处理程序的*AST*以及那里可用的信息以及与编译过程的集成呈现他们有一些强大的优势。它们在动态语言（例如 Lisp 和 Dylan）和静态类型语言（*Template Haskell*和*Scala 2.10 的自清理宏）*中都可用。

关于 Scala 2.10 中的宏，我认为最重要的优势是：

**类型安全**：编译预处理器和字节码操作不能利用类型系统。使用宏——尤其是**编译时**宏——Scala 2.10 将拥有的那种宏语言是 Scala 本身，可以访问编译器的 API。任何类型的具有完整类型信息的源代码的静态分析/检查通常可能仅在编译时才可用于宏。

**（安全）语法扩展**：宏使调整语言结构以更好地实现 DSL 成为可能。[Slick](http://slick.typesafe.com/)就是一个很好的例子，它是一个数据库库，可让您将 SQL 查询表达为类型安全的 Scala 代码：

首先考虑简单的 Scala 列表处理 - 还没有谈论数据库或宏：

```
val coffees : List[Coffee] = // gotten from somewhere

// get from this list a list of (name, price) pairs also filtering on some condition
for {
  c <- coffees if c.supID == 101
  //                      ^ comparing an Int to an Int - normal stuff.
} yield (c.name, c.price)

// For Java programmers, the above is Scala's syntactic sugar for
coffees.filter(c => c.supId == 101).map(c => (c.name, c.price)) 
```

Slick，即使*是非宏*版本，也可以让您将数据库表视为 Scala 集合：这就*是非宏*版本（Slick 将其称为*提升的嵌入*API）实现相同`Coffee`的方式，而是作为 SQL 表：

```
// WITHOUT MACROS (using enough of Scala's other features):
// Generates a query "SELECT NAME,PRICE FROM COFFEES IF SUP_ID = 101" 
for {
  c <- Coffees if c.supID === 101
  //                      ^ comparing Rep[Int] to Rep[Int]!
  // The above is Scala-shorthand for
  //     c <- Coffees if c.supID.===(Const[Int](101))
} yield (c.name, c.price) 
```

足够接近！但是这里的`===`方法是用来模仿`==`不能使用的，原因很明显，你不能将*SQL 列的表示*与实际的`Int`.

如果您手边有 Scala 2.10，这可以在宏版本中解决：

```
// WITH MACROS:
// Generates a query "SELECT NAME,PRICE FROM COFFEES IF SUP_ID = 101" 
for {
  c <- coffees if c.supID == 101
  //                      ^ comparing Int to Int!
} yield (c.name, c.price) 
```

因此，这里利用宏为 SQL 和普通的 Scala 集合提供*相同的语法。**除了*Scala 中已经存在的表现力和组合性之外，类型安全和宏卫生的结合使宏具有吸引力。

另外，请从其他答案提供的链接中考虑此示例：

```
def assert(cond: Boolean, msg: Any) = macro impl

def impl(c: Context)(cond: c.Expr[Boolean], msg: c.Expr[Any]) =
  if (assertionsEnabled)
    // if (!cond) raise(msg)
    If(Select(cond.tree, newTermName("$unary_bang")),
        Apply(Ident(newTermName("raise")), List(msg.tree)),
        Literal(Constant(())))
  else
    Literal(Constant(()) 
```

这样就定义了一个宏`assert`，其用法类似于方法调用：

```
import assert
assert(2 + 2 == 4, "weird arithmetic") 
```

只是，因为`assert`是宏而不是方法，布尔表达式`2 + 2 == 4` **只有在启用断言时才会被计算**。*请注意，存在一种简写方式来帮助表达 AST，但这个例子希望通过这种方式更清晰*。

最后但并非最不重要 - Scala 2.10 宏将成为 Scala 的一部分 -**集成到标准发行版** 中 - 而不是由某些第三方库提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T11:39:21.433

除了 Faiz 提到的几点之外，Scala 宏是[卫生](http://en.wikipedia.org/wiki/Hygienic_macro)的：它们不会因意外捕获标识符而受到影响。特别是，Scala 宏是[自我清洁](https://docs.google.com/document/d/1O879Iz-567FzVb8kw6N5OBpei9dnbW0ZaT7-XNSa6Cs/edit)的：通过具体化来实现卫生，而具体化本身就是一个宏。要更深入地了解其工作原理[，请参阅技术报告 Scala 宏](http://scalamacros.org/talks/2012-07-09-MetaSlides.pdf)。

# php - 使用 PHP 文件进行 JQuery AJAX 缓存

> ID：13837789
> 
> 赞同：3
> 
> 时间：2012-12-12T10:34:15.600
> 
> 标签：php, javascript, jquery, ajax, caching

我目前正在尝试加快 ajax 请求的速度。基本上，该站点通过实时过滤工作。因此，当用户单击表单元素时，数据将相应加载。这一切都非常好，但它没有我想要的那么快。

我的 AJAX 看起来有点像这样（我显然省略了变量）：

```
$.ajax({
        type: "GET",
        url: 'URL NAME',
        data: {
            'Var1': Var1,
            'Var2': Var2
        },
        cache:true, // Set cache to TRUE
        success: function(data) {
            $('.content').html(data);
        },
        complete: function () {
            $("#loading_ajax").hide();
            $('.content').fadeIn();
        }   
    }).error(function (event, jqXHR, ajaxSettings, thrownError) {
        $('.content').html("<h2>Could not retrieve data</h2>");
        //alert('[event.status:' + event.status + '], [event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
}); 
```

在请求数据的另一端，PHP 中的第一行是这样的：

```
$seconds = 86400;

header("Cache-Control: private, max-age=$seconds");
header("Expires: ".gmdate('r', time()+$seconds)); 
```

然后我进入 Firebug 来检查缓存，它似乎根本不起作用。Firebug 打印出以下内容：

![第一个萤火虫图像](../Images/231c6de57ac5e9eee651efb12d34648d.png)

![第二个萤火虫图像](../Images/dd50a656107a009861ab62dabcc45190.png)

![在此处输入图像描述](../Images/a47c058a1118c7e51b73a4434fb4afa6.png)

那里的第二个屏幕截图显示请求实际上变慢了（我重复它以查看缓存是否会改善它并且它没有产生任何影响）。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:37:51.500

通过将文件压缩成更小的尺寸来优化您的网站加载时间。

将此添加到您的 .htaccess 文件中

AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript application/json

# php - 模板变量替换

> ID：13837793
> 
> 赞同：0
> 
> 时间：2012-12-12T10:34:20.173
> 
> 标签：php, mediawiki, wiki, mediawiki-templates

我有一个带有参数的**模板**`url`（这很好用，我可以输出它的值）。

我有一个带有参数的**插件**`path`（当我对值进行硬编码时效果很好）。

我想`{{{url}}}`将模板中的值传递给我的插件，但我无法实现。

这是我的模板的代码：

```
'''Source code: ''' <MyPlugin path="{{{url}}}" .../> 
```

在我的插件中，我转储了 $args 参数的内容：

```
function MyPluginRender( $input, $args, $parser )
{
    var_dump($args);
} 
```

它输出：

```
array(2) {
  ["path"]=>
  string(9) "{{{url}}}"
  ...
} 
```

实际上，在某些地方似乎禁用了替换。[我从这个页面http://en.wikipedia.org/wiki/Help:Template#Handling_parameters](http://en.wikipedia.org/wiki/Help:Template#Handling_parameters)尝试了几个东西，但没有成功。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:36:03.320

好的，似乎不可能让引擎自动替换`{{{template-parameter}}}`并将其传递给扩展参数。

但是，希望扩展函数的签名包含对 Parser 对象的引用，该对象或多或少是 MediaWiki 引擎。

然后，您可以评估变量的内容：

```
function MyPluginRender( $input, $args, $parser , $frame)
{
    $resolved =  $parser->recursiveTagParse( $args["template-parameter"], $frame );
    var_dump($resolved);
} 
```

HIH

# ios - Xcode 4.5 - 无法为 SVN 创建分支/主干/标签

> ID：13837798
> 
> 赞同：0
> 
> 时间：2012-12-12T10:34:28.720
> 
> 标签：ios, xcode, svn, xcode4.5

就像标题一样，我无法为 SVN 创建 Branches/Trunks/Tags，尽管我能够连接到 repo。在我输入 Trunks、Branches 等的屏幕中，它无法连接到它们（显示红色指示灯）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T07:20:24.877

转到Source Control->Project Name->CONFIE 那里，选择配置并更新主干、标签和分支的路径。现在连同信息和配置，您还将获得分支选项/从那里添加一个新分支，然后自动切换到该分支。

# django - 如何在扩展 UserAdmin 中添加字段

> ID：13837799
> 
> 赞同：1
> 
> 时间：2012-12-12T10:34:28.733
> 
> 标签：django

我正在尝试使用他们自己的管理员（`add`和`change`表单）创建自定义用户模型。我希望与原始用户管理员完全相同，只是在`add`和`change`表单中添加了额外的字段。

有人可以帮忙吗？

**模型.py**

```
from django.contrib.auth.models import User

class MyUser1(User):
    #add more fields specific to MyUser1

class MyUser2(User):
    #add more fields specific to MyUser2 
```

**管理员.py**

```
from django.contrib.auth.admin import UserAdmin

class MyUser1Admin(UserAdmin):
    # how can I add the "fields specific to MyUser1" both in the add
    # and the change forms?

admin.site.register(MyUser1, MyUser1Admin)

# same for MyUser2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:07:16.547

我不得不扩展 UserCreationForm 和 UserChangeForm：

**管理员.py**

```
from django.contrib.auth.models import User
from django.contrib.auth.forms import UserCreationForm, UserChangeForm
from django.contrib.auth.admin import UserAdmin
from django.contrib import admin
from django import forms

class MyUser1CreationForm(UserCreationForm):
    myuser1_field = forms.CharField()

    class Meta:
        model = User
        fields = ("username", "myuser1_field", "password1", "password2")

class MyUser1ChangeForm(UserChangeForm):
    myuser1_field = forms.CharField()

    class Meta:
        model = User

class MyUser1Admin(UserAdmin):

    form = MyUser1ChangeForm
    add_form = MyUser1CreationForm

    fieldsets = (
        (None, {'fields': ('username', 'password')}),
        (_('Personal info'), {'fields': ('myuser1_field', 'first_name', 'last_name', 'email')}),
        (_('Permissions'), {'fields': ('is_active', 'is_staff', 'is_superuser',
                                       'groups', 'user_permissions')}),
        (_('Important dates'), {'fields': ('last_login', 'date_joined')}),
    )

    add_fieldsets = (
        (None, {
            'classes': ('wide',),
            'fields': ('username', 'myuser1_field', 'password1', 'password2')}
        ),
    )

admin.site.register(MyUser1, MyUser1Admin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:37:33.517

```
from django.contrib.auth.forms import UserChangeForm

class MyUser1AdminForm(UserChangeForm):

    class Meta:
        model = MyUser1 
```

# eclipse - TEE 2012 不会自动检出文件

> ID：13837803
> 
> 赞同：3
> 
> 时间：2012-12-12T10:34:55.047
> 
> 标签：eclipse, team-explorer-everywhere

我有 TFS 服务器 2012 SP1。Eclipse 3.6.2（Helios 服务版本 2）。三通 11.0.0.201211191425

我看到一个完整的团队菜单，我可以手动签出和签入文件。但是，如果我只是开始编辑一个文件，它将不会被自动签出:(就像更新前的 2010 一样。

我试图将设置更改为“结帐时显示进度”和“结帐前提示” - 无效。

“检测更改...”功能也不起作用。

只有当我关闭项目然后再次打开它时，修改后的文件才会被自动检出（仅一次）。

**呜呜呜？？？**

**更新：** 如果我手动签出/签入同一项目中的另一个文件，修改后的文件也将被自动签出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:23:29.370

**发现问题**

如果 Visual Studio 2012 在同一台 PC 上打开并连接到同一 TFS 服务器，则 TEE 的行为如上所述：(

@Edward Thomson，我认为这是一个错误。TEE 至少应该显示错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T20:43:33.247

不确定您的特定 TFS 或 Visual Studio 版本，但是在 VS2010 中，您有：

文件 > 源代码管理 > 更改源代码管理

![在此处输入图像描述](../Images/e5a9110577f8226df0c886e5819d8f1f.png)

如果您的解决方案/项目如上所列，没有服务器名称、绑定等，请选择它并单击绑定。这可能会让事情再次发生

# python - Ubuntu Tornado 网络服务器模块 ImportError

> ID：13837808
> 
> 赞同：1
> 
> 时间：2012-12-12T10:35:21.637
> 
> 标签：python, tornado, importerror, easy-install

这些是我已经完成的步骤：

```
apt-get install libxml2-dev libxslt1-dev python-dev python-setuptools
easy_install mechanize lxml tornado 
```

这是脚本：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import lxml.html
import mechanize
import tornado.web 
```

运行脚本：

```
python tornado.py 
```

这是错误消息：

```
Traceback (most recent call last):
  File "tornado.py", line 6, in <module>
    import tornado.web
  File "/root/scripts/tornado.py", line 6, in <module>
    import tornado.web
ImportError: No module named web 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T01:15:57.750

您的源文件名为`tornado.py`. 因此 python 将它与`tornado`库混淆了。为您的文件使用另一个文件名，例如`mytornadoapp.py`.

# iphone - UINavigationBar中的UISearchBar，防止隐藏

> ID：13837809
> 
> 赞同：0
> 
> 时间：2012-12-12T10:35:26.803
> 
> 标签：iphone, ios, ipad, uinavigationbar, uisearchbar

我已经`UISearchBar`输入了`UINavigationBar`，但问题是当我点击时`UISearchBar`，`UINavigatioBar`隐藏，如何解决这个问题？

代码：

```
searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 250, 44)];

searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];

searchDisplayController.delegate = self;
searchDisplayController.searchResultsDataSource = self;

self.tableView.tableHeaderView = searchBar; 
```

-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar

```
-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar

{
    self.navigationController.navigationBar.hidden = NO;
} 
```

# c++ - seekg 无法正确处理 4294967295 字节的文件

> ID：13837810
> 
> 赞同：10
> 
> 时间：2012-12-12T10:35:31.923
> 
> 标签：c++, visual-studio-2010, seekg

我发现在VS2010中，当打开正好4294967295字节的文件时，seekg函数不能正常工作。

我正在使用简单的代码：

```
#include <iostream>
#include <fstream>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    std::ifstream file;

    // cmd: fsutil file createnew tmp.txt 4294967295
    file.open(L"c:/tmp.txt", ifstream::in | ifstream::binary);

    if(!file.is_open())
        return -1;

    file.seekg(0, std::ios::end);

    auto state = file.rdstate();

    // this condition shoots only when size of the file is equal to 4294967295
    if((state & ifstream::failbit)==ifstream::failbit)
    {
        std::cout << "seekg failed";
    }

    // after seekg failed, tellg returns 0
    std::streampos endPos = file.tellg();

    return 0;
} 
```

与 4294967294 和 4294967296 文件相同的代码可以正常工作。

有人知道这个问题的解决方案吗？

**更新：**

看起来问题出在这里：

```
template<class _Statetype>
class fpos
{
 __CLR_OR_THIS_CALL operator streamoff() const
 { // return offset
 return ((streamoff)(_Myoff + _FPOSOFF(_Fpos)));
 }
} 
```

正好在

```
_FPOSOFF(_Fpos) 
```

在哪里

```
#define _FPOSOFF(fp) ((long)(fp)) 
```

所以它需要 4294967295 并将其转换为 -1 ！

换句话说，这样的代码会失败

```
//returns -1, even if sizeof(fpos_t)=8
fpos_t pos = _FPOSOFF(4294967295); 
```

_Myoff、_Fpos、streamoffset 为 64 位

如果所有类型都是 64 位，他们为什么要进行这种转换！？我不知道 ））

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T11:51:18.427

在内部，流实现有一个等于 0xffffffff 的 const '_BADOFF'，它在查找失败时返回。在这种情况下，查找成功，但查找的返回值等于失败代码，这会导致流包装器错误地设置其失败代码。

_BADOFF 被定义为 64 位类型，它只是被分配了一个愚蠢的值。

作为一种解决方法，您可以查找 1 字节短，然后读取一个字节。

```
file.seekg(-1, std::ios::end);
char temp; file >> temp; 
```

但是请注意，此错误会在任何时候出现特定文件偏移量时出现，因此如果您在较大文件中搜索到随机位置，它仍然可能是一个问题。例如，如果您的文件大一个字节，则此 -1 搜索将失败，因此这不是通用解决方案。

OP已经扩展了他们的问题，所以我会扩展我的答案。是的，在比较之前使用不安全的转换来转换查找值。这似乎不会影响在文件中超出该点的搜索能力，因为它仅用于与错误值进行比较 - 流中仍然具有正确的偏移量。然而，它似乎确实是 _BADOFF 首先是可疑的根本原因，因为 _BADOFF 在源中设置为“-1”，并且将遭受相同的转换，截断为 0xffffffff。

所以对库的修复可能是修复演员表（假设这样做没有其他副作用），但为了解决这个问题，你只需要避免寻找底部 32 位的位置被设置。从我所见，它会寻求超越这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T18:41:32.590

这确实是Visual C++ 2010的一个bug。两年前在Microsoft Connect上报道过： [“ `std::fstream`use 32-bit int as pos_type even on x64 platform”](http://connect.microsoft.com/VisualStudio/feedback/details/627639/std-fstream-use-32-bit-int-as-pos-type-even-on-x64-platform)（这个bug的标题不正确；症状其实就是这个bug引起的中`_FPOSOFF`）。

此错误在 Visual C++ 2012 中已修复，其中`_FPOSOFF`定义为：

```
#define _FPOSOFF(fp)  ((long long)(fp)) 
```

如果可以的话，建议您升级到 Visual C++ 2012。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T18:43:42.387

目前有两个不是很好的解决方案

1.  在 stdio.h 中进行修复

    > #define _FPOSOFF(fp) ((long long)(fp))

2.  移到VS2012（这也很可悲）

    > 这是一个错误，已在 Visual Studio 2012 中修复：_FPOSOFF 现在转换为 long long，因此 > 避免了截断。——詹姆斯·麦克内利斯

# android - 在哪里关闭光标？

> ID：13837819
> 
> 赞同：2
> 
> 时间：2012-12-12T10:36:06.103
> 
> 标签：android, memory-leaks, cursor

我在以下代码中使用了一个光标。但是我想在使用后关闭光标并且不再需要它。问题是在return语句中使用了游标，但是在return语句之后我无法关闭它，因为那是无法访问的代码。它在 return 语句中使用，因此我无法在该行上方关闭它。如何关闭光标？这不像旧的 managedQuery，我假设你必须关闭它。

```
 public String getPath(Uri uri) {
    String[] projection = { MediaStore.Audio.Media.DATA };
    Cursor cursor = getContentResolver().query(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
      // cursor.close() <--- not possible because it is unreachable code after return
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:38:44.897

您可以将其分配给 String 对象，然后关闭光标并返回它。

```
cursor.moveToFirst();
String result = cursor.getString(column_index);
cursor.close();
return result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:39:23.477

使用 finally 块对你有用吗？我对您的特定问题没有经验，但是您能否将清理放在 finally 块中，否则会被 return 语句绕过：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

只是一个想法！没有就别拍我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:42:09.643

尝试 - 终于来救援了...

```
public String getPath(Uri uri) {

  Cursor cursor = null;

  try {
    String[] projection = { MediaStore.Audio.Media.DATA };
    cursor = getContentResolver().query(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
    cursor.moveToFirst();

    return   cursor.getString(column_index);
    }
    finally {
     if (cursor != null)
        cursor.close(); // close the cursor
    }

 } 
```

**笔记**

刚刚注意到下面的另一个答案.. 如果您在活动中，您可以调用`startManaginCursor()`并传递`cursor`实例，以便 Android 管理其生命周期。如果您无权访问 Android 应用程序上下文（例如：代码在实用程序类中），请使用上述方法。（并撒上一些错误处理；））

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:39:18.530

好吧，如果您每次都为同一个 Activity 创建一个新实例（尽管我不确定它是否是一个好的编程习惯）。您可以在完成遍历/迭代行/列后立即关闭光标。不要忘记使用：

```
 startManagingCursor(cursor); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T10:41:27.733

if (this.daoDatabase != null) {

```
 final Cursor genericCursor = this.daoDatabase.query(this.tableName, null, null, null, null, null, orderByCriteria);

        if (genericCursor != null) {
            if (genericCursor.moveToFirst()) {
                do {
                   // do stuff...
                } while (genericCursor.moveToNext());
            }
            genericCursor.close();
        }
    } 
```

# emacs - 使用 emacs 通过远程网关编辑代码

> ID：13837823
> 
> 赞同：0
> 
> 时间：2012-12-12T10:36:19.713
> 
> 标签：emacs, remote-server, gateway

我知道可以使用 emacs 和 scp 在远程服务器上编辑代码。我为此使用流浪汉。例如这里描述：http: [//jeremy.zawodny.com/blog/archives/000983.html](http://jeremy.zawodny.com/blog/archives/000983.html)

但是是否可以使用 emacs 通过远程网关编辑代码？这意味着要访问代码，必须先登录到网关服务器，然后再登录到其他服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:19:22.960

我认为您缺少的关键字是“多跳”。使用 TRAMP 可以做到这一点；您将在相关手册部分中找到所有详细信息：

*   [网关方法](https://www.gnu.org/software/tramp/#Gateway-methods)
*   [多跳](https://www.gnu.org/software/tramp/#Multi_002dhops)

例如：

```
;; ensure `tramp-default-proxies-alist' is defined before we append to it
(require 'tramp)

;; Add the proxy rule
(add-to-list 'tramp-default-proxies-alist
             '("server2\\.blabla\\.de" nil "/ssh:server1.blabla.de:")) 
```

# node.js - Azure 表存储只支持字符串作为数据类型？

> ID：13837833
> 
> 赞同：5
> 
> 时间：2012-12-12T10:36:53.387
> 
> 标签：node.js, azure, azure-table-storage

我正在尝试将数据插入 Azure 表，但所有内容都转换为字符串。

例如，我正在插入数字/布尔值

```
var test={ PartitionKey : '4', RowKey : '2', foo: 4, bar: true };
tableService.insertEntity('mytable', test, ...); 
```

但

```
tableService.queryEntity('mytable', '4', '2', ...); 
```

返回

```
{ id: 'http://127.0.0.1:10002/devstoreaccount1/identid(PartitionKey=\'4\',RowKey=\'2\')',
  link: 'identid(PartitionKey=\'4\',RowKey=\'2\')',
  updated: '2012-12-12T10:26:44Z',
  etag: 'W/"datetime\'2012-12-12T10%3A26%3A44.547Z\'"',
  PartitionKey: '4',
  RowKey: '2',
  Timestamp: '2012-12-12T10:20:44.897Z',
  foo: '4',
  bar: 'true' } 
```

如何指定数据类型？

* * *

好的，刚刚在 SDK 中看到您可以指定数据类型

```
var test={ PartitionKey : '4', RowKey : '2', 
  foo: { '@': { type: 'Edm.Int32' }, '#': 4 } }; 
```

但是是否有任何辅助函数可以自动添加类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:07:08.797

由于 SDK 似乎不包含任何有用的东西，我现在写了这些：

```
function azType(type, v) { return { "@": { type: type }, "#": v }; }
function azBool(v) { return azType("Edm.Boolean", v); }
function azBinary(v) { return azType("Edm.Binary", v); }
function azByte(v) { return azType("Edm.Byte", v); }
function azDateTime(v) { return azType("Edm.DateTime", v); }
function azDateTimeOffset(v) { return azType("Edm.DateTimeOffset", v); }
function azDecimal(v) { return azType("Edm.Decimal", v); }
function azDouble(v) { return azType("Edm.Double", v); }
function azGuid(v) { return azType("Edm.Guid", v); }
function azInt64(v) { return azType("Edm.Int64", v); }
function azInt32(v) { return azType("Edm.Int32", v); }
function azInt16(v) { return azType("Edm.Int16", v); }
function azSByte(v) { return azType("Edm.SByte", v); }
function azSingle(v) { return azType("Edm.Single", v); }
function azString(v) { return azType("Edm.String", v); }
function azTime(v) { return azType("Edm.Time", v); } 
```

如在

```
var test={ PartitionKey : '4', RowKey : '2', foo: azInt32(4) }; 
```

* * *

我不知道他们为什么要更改它，但从 0.6.10 开始，需要替换 azType 函数：

```
function azType(type, v) { return { "$": { type: type }, "_": v }; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T14:16:10.530

根据[这里](https://docs.microsoft.com/en-us/rest/api/storageservices/Understanding-the-Table-Service-Data-Model#property-types)，表服务数据模型仅支持这 8 种类型：

*   Edm.Binary
*   Edm.布尔
*   日期时间
*   Edm.Double
*   Edm.Guid
*   Edm.Int32
*   Edm.Int64
*   编辑字符串

请注意对象中的 id 属性：

`{ PartitionKey : '4', RowKey : '2', id: azInt32(4) };`

如果您尝试这样做，错误消息就不那么明显了：

`Error inserting : { [Error: [object Object]] code: 'PropertiesNeedValue', message:{ _: 'The values are not specified for all properties in the entity...','$': { 'xml:lang': 'en-US' } } }`

# javascript - ExternalInterface.call('window.location.href.toString()') 出现问题

> ID：13837834
> 
> 赞同：1
> 
> 时间：2012-12-12T10:37:08.503
> 
> 标签：javascript, actionscript

尝试获取显示我的 swf 文件的 URL 时遇到问题

```
 ExternalInterface.call('window.location.href.toString()') 
```

方法。

例如：**域 1：**包含 SWF，**域 2：**包含嵌入源代码的 html 文件。

因此，如果域 1 = 域 2 它可以完美运行，我会得到所需的 URL。如果不是 - 我得到“未定义”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:55:55.713

您需要将 embed/object HTML 标签的“ **allowScriptAccess** ”属性设置为“ **always** ”

# javascript - 没有页面刷新的jQueryMobile关闭对话框

> ID：13837837
> 
> 赞同：4
> 
> 时间：2012-12-12T10:37:17.930
> 
> 标签：javascript, jquery, jquery-mobile

虽然这个问题之前被问过，但他们没有建议解决方法。我有一个表单，在单击复选框时，我想打开一个弹出窗口/对话框并希望用户在弹出窗口/对话框中输入一些数据，但是当对话框/弹出窗口关闭时，我的父页面会丢失所有数据，因为它被重新加载. 你能帮我实现同样的目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T22:17:32.737

JQuery mobile 的弹出窗口小部件会将当前 url 与原始 URL 进行比较，如果不匹配则刷新页面。所以，如果你想阻止这种行为，你必须避免弹出窗口小部件影响历史。只需将 data-history="false" 添加到您的小部件。但是我不确定对话框小部件，因为它与弹出窗口完全不同。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:01:53.087

如果您使用 data-rel="back"，则需要将其删除。在此之后，我认为您需要将此操作添加到对话框的关闭按钮中。

```
$('yourButton').click(function(){
    $('yourDialog').popup('close');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:46:54.680

可以使用 SimpleDialog2 [http://dev.jtsage.com/jQM-SimpleDialog/](http://dev.jtsage.com/jQM-SimpleDialog/)来完成 ，但并不是那么先进，gui 似乎在某些分辨率上被扭曲了。

# php - 如何在 PHP 中减少图像加载时间

> ID：13837838
> 
> 赞同：4
> 
> 时间：2012-12-12T10:37:16.813
> 
> 标签：php, image, optimization, encoding

我目前正在用 PHP 开发一个站点，其中通过 AJAX 加载了 1000 页图像。所以这需要很多时间。是否有任何优化技术可以减少加载时间。我不想改变我们的图像质量。

图像编码会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:26:11.213

优化与微优化思路：

## 减小图像文件大小

这可能是真正减少加载时间的最重要因素（下载更少 -> 完成速度更快）

*   使用 SmushIt 等图像优化服务或 IrfanView 等本地软件
*   找出转换图像的最佳格式
*   尝试失去一些质量，你会惊讶地看到 1% 有时会做一些几乎无法察觉的损失
*   如果不需要，请去除图像 MetaData/EXIF

## 网络服务器和硬件

访问时间是另一个重要因素

*   Apache 很棒，但其他的可能在提供图像文件或小文件时表现更好（例如 Nginx/lightHTTPd）
*   调整网络服务器的配置以满足您的需求
*   选择一个非常快的存储（如果可能，使用 RAM）

## 网页

*   使用 NeverEndingPage/load-on-scroll 或“点击查看更多”
*   对图像集进行分页（可能按重要性）
*   使您的图像容器和链接更短，去除扩展名，因为浏览器将从文件的标题中获取文件类型，将您的文件重命名为 base(62) 计数器而不是常规的 1.jpg...20000.jpg（例如 <img src=Q8U>)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:54:50.180

查看页面的缓存逻辑。图像可能能够被 Web 服务器缓存。你使用 Apache 还是 IIS？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:04:10.487

最好先显示 50 张图像，然后在页面滚动时加载剩余的图像。[这是滚动时加载页面](http://demos.9lessons.info/load_data_scroll.php)的示例

# php - 在php中创建使用函数传递的值数组

> ID：13837839
> 
> 赞同：-2
> 
> 时间：2012-12-12T10:37:19.677
> 
> 标签：php, arrays, function

我正在尝试获取传递给函数的所有数字的总和，但遇到了一些问题。

我想在回显数组总和时显示结果 17，array('1','4','9','3');

```
result_time(1);
result_time(4);
result_time(9);
result_time(3);

$items = array(); 

function result_time($Num){

    $items[] = $Num;        
}

echo array_sum($items); 
```

谁能解释我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:41:40.067

这不是最好的方法，但您可以尝试添加`global $items;`到您的`result_time`函数中。

```
function result_time($Num)
{
    global $items;
    $items[] = $Num;        
} 
```

您可以在此处阅读有关变量范围的更多信息：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:44:48.897

`$items`函数内部和函数`$items`外部在两个不同的范围内，它们是完全不同的变量。每次调用时，函数内部`$items`都会重置为空，并且也不影响`$items`函数外部。本质上，您的函数什么都不做。真正正确的是，您应该使用一个类来执行此操作：

```
class Result {

    protected $items = array();

    public function add($num) {
        $this->items[] = $num;
    }

    public function getResult() {
        return array_sum($this->items);
    }

}

$r = new Result;
$r->add(1);
...
echo $r->getResult(); 
```

您还可以使用`static`变量使函数内的值累积：

```
function result_time($Num){
    static $items = array();
    $items[] = $Num;
    return $items;
}

result_time(1);
...
$result = result_time(3);

echo array_sum($result); 
```

不过，这并不是一个好主意。您也可以使用`global`关键字共享变量的范围，但这是一个坏主意，我不会宣传它。了解变量范围并正确构建代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:50:14.537

随着代码的进展，您似乎已经知道要求和的所有值。为什么不直接将它们添加到数组中？

```
<?php    
$result_times = array();
array_push($result_times, 1);
// some code
array_push($result_times, 4);
// other code
array_push($result_times, 9);

echo array_sum($result_times); 
```

# webgl - WebGL 绘制像素？

> ID：13837840
> 
> 赞同：0
> 
> 时间：2012-12-12T10:37:23.810
> 
> 标签：webgl, gldrawpixels

我有一个来自 gl.readPixels() 调用的像素数组。我可以将这些像素放回绘图缓冲区或帧缓冲区吗？即我想调用类似gl.drawPixels 的东西，但WebGL API 中没有。我是要使用纹理并将其渲染成平面，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:18:13.510

看看这个短线程：[http ://www.opengl.org/discussion_boards/showthread.php/168346-Best-Substitute-for-glDrawPixels-Under-OpenGL-ES](http://www.opengl.org/discussion_boards/showthread.php/168346-Best-Substitute-for-glDrawPixels-Under-OpenGL-ES)

> 金书告诉你的是正确的。上传纹理的最快方法是写入绑定到 FBO 的纹理。但是您需要做的是将像素生成为几何图形（尽可能优化），然后使用 Orth 矩阵、GL_POINTS 和 glDrawArrays 将它们绘制到 FBO。

最佳解决方案（WebGL 是 GL-ES 的一个分支）有点奇怪，但有一定意义，因为在浏览器中您不希望人们直接弄乱内存。让应用程序和驱动程序解决它，代价是 GL 代码中的一些类似巫术的结构。

# php - 如何在 ZF2 中为所有模块或选定模块调用默认布局？

> ID：13837841
> 
> 赞同：1
> 
> 时间：2012-12-12T10:37:25.277
> 
> 标签：php, zend-framework2

我在我的模块 Admin/view/layout/dashboard.phtml 中开发了dashboard.phtml

现在我已经开发了另一个模块，比如餐厅，现在我想在下面尝试的重新启动模块的所有操作中使用 dashboard.phtml。

我的 module.config.php

```
 'view_manager' => array(
    'template_map' => array(
        'layout/default' => __DIR__ . '/../../Admin/view/layout/dashboard.phtml'
    ),
    'template_path_stack' => array(
        'restaurants' => __DIR__ . '/../view',

    ), 
```

我对restaurantController.php 的索引操作

```
public function indexAction()
{

   $viewModel = new ViewModel();
   $viewModel->setTemplate('layout/default');
   $restaurant_info_array = array();
   $restaurant_info = $this->getRestaurantsTable()->fetchAll();
    $i = 0;
    foreach ($restaurant_info as $ri)
    {
        $restaurant_info_array[$i]['id'] = $ri->id;
        $restaurant_info_array[$i]['name'] = $ri->name;
        $restaurant_info_array[$i]['published'] = $ri->published;
        $restaurant_info_array[$i]['email'] = $ri->email;
        $is_menu_available = $this->getRestaurantsTable()->getRestaurantsMenu($ri->id);
        $restaurant_info_array[$i]['res_menu'] = count($is_menu_available);
        $i = $i+1;
    }

    $viewModel->setVariables(array(
            "restaurants"=>$restaurant_info_array
    )); 
```

它不起作用请帮助我，如果我将仪表板称为我的管理端模块的默认布局，那将很棒，因为它不符合逻辑相同的仪表板.phtml 位于我模块的所有文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:54:24.523

是的，我找到了解决方案，我在 module.php 中更改了我的代码，如下所示

```
public function onBootstrap(MvcEvent $e)
{ 
    $e->getApplication()->getServiceManager()->get('translator');
    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);
   //added lines for layout
    $eventManager->getSharedManager()->attach('Zend\Mvc\Controller\AbstractActionController', 'dispatch', function($e) {
    $controller = $e->getTarget();
    $controller->layout('layout/default');
    });
} 
```

我的 indexAction 的变化。

```
public function indexAction()
{
   $viewModel = new ViewModel();
   $restaurant_info_array = array();
   $restaurant_info = $this->getRestaurantsTable()->fetchAll();
   $i = 0;
   foreach ($restaurant_info as $ri)
   {
        $restaurant_info_array[$i]['id'] = $ri->id;
        $restaurant_info_array[$i]['name'] = $ri->name;
        $restaurant_info_array[$i]['published'] = $ri->published;
        $restaurant_info_array[$i]['email'] = $ri->email;
        $is_menu_available = $this->getRestaurantsTable()->getRestaurantsMenu($ri->id);
        $restaurant_info_array[$i]['res_menu'] = count($is_menu_available);
        $i = $i+1;
    }

    return $viewModel->setVariables(array(
            "restaurants"=>$restaurant_info_array
    ));

} 
```

# java - 包装器在内存不足时重新启动

> ID：13837843
> 
> 赞同：2
> 
> 时间：2012-12-12T10:37:30.260
> 
> 标签：java, java-service-wrapper

我需要配置包装器文件以在发生堆内存空间时重新启动包装器。我通过网络学到的东西做了一些事情。但 OutOfMemory 仍然存在。这是我的配置文件。

```
wrapper.java.command=./jre/bin/java.exe
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp

wrapper.java.classpath.1=./lib/wrapper.jar    
wrapper.java.classpath.2=./automatictester.jar

wrapper.java.library.path.1=./lib
wrapper.java.additional.1=

wrapper.java.initmemory=5
wrapper.java.maxmemory=64

wrapper.app.parameter.1= sample.automatic
wrapper.console.format=PM

wrapper.console.loglevel=INFO
wrapper.logfile=./logs/wrapper.log

wrapper.logfile.format=LPTM
wrapper.logfile.loglevel=INFO

wrapper.logfile.maxsize=1m
wrapper.logfile.maxfiles=2

wrapper.syslog.loglevel=INFO
wrapper.console.title=Sample Application for Testing

wrapper.ntservice.name=Automatic Tester
wrapper.ntservice.displayname=Automatic Tester

wrapper.ntservice.description=Automatic Tester 
wrapper.ntservice.dependency.1=

wrapper.ntservice.starttype=DEMAND_START
wrapper.ntservice.interactive=false

wrapper.filter.trigger.1=java.lang.OutOfMemoryError
wrapper.filter.action.1=RESTART

#wrapper.java.monitor.heap.threshold.percent=99 
#wrapper.java.monitor.heap.restart=true 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T06:34:32.883

您需要以下属性集：

```
wrapper.filter.trigger.1=java.lang.OutOfMemoryError
wrapper.filter.action.1=RESTART 
```

欲了解更多信息，请查看以下页面：

[http://wrapper.tanukisoftware.com/doc/english/prop-filter-xn.html#outofmemory](http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#outofmemory)

干杯，

# php - 重试失败的 MySQL 查询？

> ID：13837845
> 
> 赞同：4
> 
> 时间：2012-12-12T10:37:34.580
> 
> 标签：php, mysql

**背景**

我在 PHP`(5.2) 中有一个 PayPal IPN 处理程序，它处理事务并将日期存储在 MySQL 数据库中。该网站的活跃度很低。

有时 MySQL 查询会失败。（很少）我记录所有内容，如果无法处理 PayPal 消息，我可以查看我的日志文件并重新发送 PayPal 消息。

**想法/担忧**

但是我想知道我是否可以使该过程更加健壮，而是让处理程序在放弃之前重新尝试 mysql 查询。

我可能想稍等片刻——不要紧接着进行多次查询尝试。

我希望为此找到一些模式 - 搜索“php mysql query retry”之类的东西而没有取得太大成功。

**问题**

1.  有没有好的实践指南？

2.  现有的图书馆？

3.  一个简单的循环和`sleep`每次查询尝试之间是否可以，或者会产生不希望的副作用？太土了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:07:19.293

php 世界中良好的事务安全代码不是常态，但如果您查看 java 或 .net 代码示例，则有很多示例。

我见过的大多数优秀的数据库代码都将查询放在一个函数中，并在放弃和记录/排队之前立即重试大约 3 次。希望这会解决您的问题。

最佳实践是使用 innodb 表并将所有关键的 sql 语句放在已提交或回滚的事务中。这样，即使某个特定查询失败，您的数据也会处于一致状态。（请注意，如果您不小心，这也会加剧锁定问题）。

您不希望通过轮询长时间睡眠，因为这可能会挂起您的用户浏览器。他们需要立即回复以确认购买已通过。将作业与 cron 作业或服务器守护程序一起放入队列是另一种方法，但不会给用户立即反馈，并且为此目的可能是矫枉过正。

如果立即重试不起作用，则说明您遇到了其他类型的潜在锁定问题，以及您需要锻炼的失败原因。

# python - 在unicode字符串中转换字节字符串

> ID：13837848
> 
> 赞同：37
> 
> 时间：2012-12-12T10:37:35.947
> 
> 标签：python, string, unicode, python-3.x, type-conversion

我有这样的代码：

```
a = "\u0432"
b = u"\u0432"
c = b"\u0432"
d = c.decode('utf8')

print(type(a), a)
print(type(b), b)
print(type(c), c)
print(type(d), d) 
```

并输出：

```
<class 'str'> в
<class 'str'> в
<class 'bytes'> b'\\u0432'
<class 'str'> \u0432 
```

为什么在后一种情况下我看到的是字符代码，而不是字符？如何将 Byte 字符串转换为 Unicode 字符串，以防在输出中看到字符而不是其代码？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-12T10:47:40.997

在字符串（或 Python 2 中的 Unicode 对象）中，`\u`有一个特殊的含义，即“这里有一个由它的 Unicode ID 指定的 Unicode 字符”。因此`u"\u0432"`将产生字符в。

前缀告诉你这`b''`是一个 8 位字节的序列，而 bytes 对象没有 Unicode 字符，因此`\u`代码没有特殊含义。因此，`b"\u0432"`只是字节`\`、`u`、`0`、`4`和`3`的序列`2`。

本质上，您有一个 8 位字符串，其中不包含 Unicode 字符，而是包含 Unicode 字符的规范。

您可以使用 unicode 转义编码器转换此规范。

```
>>> c.decode('unicode_escape')
'в' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T23:29:35.820

喜欢伦纳特的回答。它使我走上了解决我所面临的特定问题的正确轨道。我添加的是为 \u?? 生成与 html 兼容的代码的能力？字符串中的规范。基本上，只需要一行：

```
results = results.replace('\\u','&#x') 
```

这一切都源于需要将 JSON 结果转换为在浏览器中显示良好的内容。以下是一些与云应用程序集成的测试代码：

```
# References:
# http://stackoverflow.com/questions/9746303/how-do-i-send-a-post-request-as-a-json
# https://docs.python.org/3/library/http.client.html
# http://docs.python-requests.org/en/v0.10.7/user/quickstart/#custom-headers
# http://stackoverflow.com/questions/606191/convert-bytes-to-a-python-string
# http://www.w3schools.com/charsets/ref_utf_punctuation.asp
# http://stackoverflow.com/questions/13837848/converting-byte-string-in-unicode-string

import urllib.request
import json

body = [ { "query": "co-development and language.name:English", "page": 1, "pageSize": 100 } ]
myurl = "https://core.ac.uk:443/api-v2/articles/search?metadata=true&fulltext=false&citations=false&similar=false&duplicate=false&urls=true&extractedUrls=false&faithfulMetadata=false&apiKey=SZYoqzk0Vx5QiEATgBPw1b842uypeXUv"
req = urllib.request.Request(myurl)
req.add_header('Content-Type', 'application/json; charset=utf-8')
jsondata = json.dumps(body)
jsondatabytes = jsondata.encode('utf-8') # needs to be bytes
req.add_header('Content-Length', len(jsondatabytes))
print ('\n', jsondatabytes, '\n')
response = urllib.request.urlopen(req, jsondatabytes)
results = response.read()
results = results.decode('utf-8')
results = results.replace('\\u','&#x') # produces html hex version of \u???? unicode characters
print(results) 
```

# javascript - Javascript - 无论如何为尚未创建的属性设置默认值？

> ID：13837849
> 
> 赞同：0
> 
> 时间：2012-12-12T10:37:36.697
> 
> 标签：javascript

假设我有一个名为 的对象，并且`cache`在我明确地将它们设置为. 有没有办法做到这一点？`cache.a``cache.b``cache.c``cache.whatever``VALUE``cache.a = 'FOOBAR'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:54:31.173

你可以这样做

```
function Cache(){
    this.GetValue = function(propertyName){
        if(!this[propertyName]){
            this[propertyName] = "Value";
        }
        return this[propertyName];
    }

    this.SetValue = function(propertyName, Value){
        this[propertyName] = Value;
    }
    return this;
} 
```

**编辑**：

你可以像...一样使用它

```
var cache = new Cache();
alert(cache.GetValue("a")); // It will alert "Value"

var newValueOfA = "New Value";
cache.SetValue("a", newValueOfA);

alert(cache.GetValue("a")); // It will alert "New Value" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:45:44.603

没有。最好的办法是引入一个额外的间接层：

```
var Cache = function(){
  this.values = {};
};

Cache.prototype.set = function(key, value) {
  this.values[key] = value;
};

Cache.prototype.get = function(key) {
  var result = this.values[key];
  if (typeof result === 'undefined') {
     return 'default';
  }
  return result;
}; 
```

# jquery - 首次访问站点时加载引导模式

> ID：13837857
> 
> 赞同：1
> 
> 时间：2012-12-12T10:37:59.297
> 
> 标签：jquery, twitter-bootstrap

我正在尝试实现一个订阅框，它会在您第一次访问该网站时激活。

目前，当您第一次访问该网站时，订阅模式没有加载，我不知道为什么？

```
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).load(function(){
         // load the overlay
        if (document.cookie.indexOf('visited=true') == -1) {
            var fifteenDays = 1000*60*60*24*15;
            var expires = new Date((new Date()).valueOf() + fifteenDays);
            document.cookie = "visited=true;expires=" + expires.toUTCString();
            jQuery.modal({width:"580px", inline:true, href:"#myModal"});
        }
    });
</script> 
```

我可以通过单击链接来加载模式，但我需要在用户首次访问时自动弹出。谁能看到我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:43:38.347

首先你指的是：

```
jQuery('#myModal') 
```

后来你指的是：

```
jQuery('.myModal') 
```

它是一个类还是一个id？可能那是你的错误。

在旁注中，您可能希望在脚本标签上指定语言属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:03:11.887

bootstrap 中的模态函数没有 href 选项。您要做的是定位实际的模态元素，然后在其上调用模态函数以将其激活为模态。像这样；

```
 jQuery('#myModal').modal(options) 
```

查看[文档](http://twitter.github.com/bootstrap/javascript.html#modals)以获取可用选项

[此外，这里](http://jsfiddle.net/n9bvJ/)的示例 jsfiddle

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T10:19:20.897

```
$(document).ready(function(){

    if (document.cookie.indexOf('visited=true') == -1) {
        var fifteenDays = 1000*60*60*24*15;
        var expires = new Date((new Date()).valueOf() + fifteenDays);
        document.cookie = "visited=true;expires=" + expires.toUTCString();
        $('#flag').trigger('click');
     $('#myModal').modal('toggle');
    }

}); 
```

这是我给你的剧本。

# ios - 如何在回归测试中模拟 UITouches？

> ID：13837860
> 
> 赞同：1
> 
> 时间：2012-12-12T10:38:13.660
> 
> 标签：ios, testing, uikit, regression

您将如何设置模拟 UITouches 的回归测试？

我正在开发一个 iOS 游戏，并希望对核心功能进行一些回归测试。对于固定的假触摸列表，我需要自动触发对 touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 等的调用，然后我可以自动评估测试结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:52:19.360

没有公共构造函数，但人们找到了一种方法，请参阅

[http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html](http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)

# mysql - 更新不是更新整个字符串

> ID：13837864
> 
> 赞同：7
> 
> 时间：2012-12-12T10:38:27.030
> 
> 标签：mysql, sql

以下是我的 SQL 小提琴： [http ://sqlfiddle.com/#!2/f9bae/1](http://sqlfiddle.com/#!2/f9bae/1)

在其中我试图检查整个名称是否正在通过查找表进行验证，如果有任何错误，那么它应该被正确的值替换，但我面临的问题是，如果任何名称包含多个错误values 然后查询只更新该名称的一部分，其余部分保持不变，请告诉我如何修改我的查询以进行更新，以便它会根据查找表的正确值更新整个名称。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:19:53.073

# 这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!2/578ff/1)

这个 UGLY 查询适用于一个字符串中最多 4 个替换。如果您需要更多替换，最好的方法是创建一个用户定义函数来替换一个字符串中的这些单词并使用它来更新。

```
 UPDATE table1 a 
  LEFT JOIN lookup b1 on a.username LIKE CONCAT('%', b1.`WRONG`, '%')
  LEFT JOIN lookup b2 on a.username LIKE CONCAT('%', b2.`WRONG`, '%') 
            and (b2.Wrong not in (b1.Wrong))
  LEFT JOIN lookup b3 on a.username LIKE CONCAT('%', b3.`WRONG`, '%') 
            and (b3.Wrong not in (b1.Wrong,b2.Wrong))
  LEFT JOIN lookup b4 on a.username LIKE CONCAT('%', b4.`WRONG`, '%') 
            and (b4.Wrong not in (b1.Wrong,b2.Wrong,b3.Wrong))

SET a.username = 
REPLACE(
  REPLACE(
      REPLACE(
           REPLACE(a.username, IFNULL(b1.`WRONG`,''), IFNULL(b1.`RIGHT`,''))
        , IFNULL(b2.`WRONG`,''), IFNULL(b2.`RIGHT`,''))
    , IFNULL(b3.`WRONG`,''), IFNULL(b3.`RIGHT`,''))
  , IFNULL(b4.`WRONG`,''), IFNULL(b4.`RIGHT`,'')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:50:22.607

通过您的设置，最多运行 3 次更新可能会更容易，这将处理重复。在旁注中，与 chodry 相比，chaudhary 或 choudhary 可能更正确:)

[http://sqlfiddle.com/#!2/2d4c6/1](http://sqlfiddle.com/#!2/2d4c6/1)

编辑：或者，如果您没有太多这样的条目，您可以摆脱查找表：-

[http://sqlfiddle.com/#!2/890ea/1](http://sqlfiddle.com/#!2/890ea/1)

# jquery - 如何使用 jquery 实现自定义网格

> ID：13837866
> 
> 赞同：0
> 
> 时间：2012-12-12T10:38:31.263
> 
> 标签：jquery, gridview, jqgrid

我正在使用 asp.net mvc3 razor 应用程序，在我开始使用 mvc3 之前，我想使用简单的 html 页面创建模型屏幕。所以我想使用 jquery 创建网格，这是从数据库表加载的网格中的列详细信息之一。编辑和保存按钮需要设计在网格的顶部。所以一旦我按下编辑，整个网格字段需要是可编辑的，不需要像那样显示弹出窗口。

一种想法是网格输入字段需要在保存到数据库之前进行验证..如何使用`Jquery`..来实现这一点？请建议最好的方法..

如果您需要有关我的案例的更多详细信息，请告诉我..

# c - 使用 fread 从文本文件读取时获取“�”或“@”符号

> ID：13837868
> 
> 赞同：1
> 
> 时间：2012-12-12T10:38:33.673
> 
> 标签：c, file, io, fread

我想从文本文件中读取 80 个字符，将它们保存为字符串，然后打印该字符串以进行验证。我正在使用 fread 并有以下代码：

```
char message[80];
size_t nread = fread(message, 1, sizeof(message), fp);
printf("Message received: \"__%s__\"\n", message); 
```

输出是：

> 收到的消息：“__我很想改变世界，但他们不会
> ��__”

当整个短语不在文件中时

和：

> __我很想改变世界，但他们不会给我源代码
> @__

当整个短语在文件中时。

我试过删除它并重写文本，但我再次得到相同的输出。

怎么了？字符集的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T10:39:44.107

[`fread()`](http://en.cppreference.com/w/c/io/fread)不为空终止缓冲区并`prinf("%s")`期望缓冲区为空终止。由于缓冲区不是空终止的`printf()`，它将继续读取，直到找到空终止符，并在此过程中打印出任何垃圾。

要么 null 终止缓冲区，请记住为 null 终止符留出空间：

```
char message[81]; /* Increased by 1 for null terminator. */
size_t nread = fread(message, 1, sizeof(message) - 1, fp);
message[nread] = 0;
printf("Message received: \"__%s__\"\n", message); 
```

或指示`printf()`仅打印使用`"%.*s"`格式说明符读取的字符数：

```
printf("Message received: \"__%.*s__\"\n", nread, message); 
```

# r - 主要结果

> ID：13837873
> 
> 赞同：1
> 
> 时间：2012-12-12T10:39:03.967
> 
> 标签：r

我正在对我的数据进行一些 PCA 分析。这是我第一次尝试这种类型的分析。我有一个包含一千列和几千行的矩阵，我试图通过删除相关变量（在我的例子中是列）来制作一个更小的矩阵。到目前为止一切都很好，但我无法进行下一步。这是一个显示我的数据的示例。

```
 a1    a2    a3    a4    ....    a1000
item1    10    NA     5     3    ....
item2    0.01  0.5    NA   0.07  ....
item3    0.7   0.2    0.8  0.9   ....
                   .
                   .
                   . 
```

我应用princomp并得到以下结果

```
 Comp.1     Comp.2     Comp.3     Comp.4     ...   Comp.1000
Standard deviation     24.1605431 7.31176669 5.96709553 3.56507807   ...
Proportion of Variance  0.7580933 0.06943108 0.04624186 0.01650621   ...
Cumulative Proportion   0.7580933 0.82752438 0.87376624 0.89027245   ...
                                       .
                                       .
                                       . 
```

现在我已经计算了所有内容......我的问题是：我应该使用什么命令来选择不相关的组件并将它们粘贴到一个新的矩阵中（或者干脆去掉相关的）？我如何指定我想要的相关范围？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:51:21.183

我相信你是追求的`scores`。根据 for 的帮助`?princomp`，生成的对象是一个包含元素的列表`scores`：

> 分数
> 
> 如果 score = TRUE，则提供的数据在主成分上的得分。仅当提供了 x 并且 covmat 是协方差列表时也提供了，这些才是非空的。对于公式方法，napredict() 用于处理 na.action 省略的值的处理。

让我们设置一个示例（基于示例中的示例`?princomp`）：

```
summary(pc.cr <- princomp(USArrests, cor = TRUE))
Importance of components:
                          Comp.1    Comp.2    Comp.3     Comp.4
Standard deviation     1.5748783 0.9948694 0.5971291 0.41644938
Proportion of Variance 0.6200604 0.2474413 0.0891408 0.04335752
Cumulative Proportion  0.6200604 0.8675017 0.9566425 1.00000000 
```

您可以使用以下方法调查结果对象`str()`：

```
str(pc.cr)
List of 7
 $ sdev    : Named num [1:4] 1.575 0.995 0.597 0.416
  ..- attr(*, "names")= chr [1:4] "Comp.1" "Comp.2" "Comp.3" "Comp.4"
 $ loadings: loadings [1:4, 1:4] -0.536 -0.583 -0.278 -0.543 0.418 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"
  .. ..$ : chr [1:4] "Comp.1" "Comp.2" "Comp.3" "Comp.4"
 $ center  : Named num [1:4] 7.79 170.76 65.54 21.23
  ..- attr(*, "names")= chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"
 $ scale   : Named num [1:4] 4.31 82.5 14.33 9.27
  ..- attr(*, "names")= chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"
 $ n.obs   : int 50
 $ scores  : num [1:50, 1:4] -0.986 -1.95 -1.763 0.141 -2.524 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:50] "Alabama" "Alaska" "Arizona" "Arkansas" ...
  .. ..$ : chr [1:4] "Comp.1" "Comp.2" "Comp.3" "Comp.4"
 $ call    : language princomp(x = USArrests, cor = TRUE)
 - attr(*, "class")= chr "princomp" 
```

现在提取分数：

```
head(pc.cr$scores)
               Comp.1     Comp.2      Comp.3       Comp.4
Alabama    -0.9855659  1.1333924 -0.44426879  0.156267145
Alaska     -1.9501378  1.0732133  2.04000333 -0.438583440
Arizona    -1.7631635 -0.7459568  0.05478082 -0.834652924
Arkansas    0.1414203  1.1197968  0.11457369 -0.182810896
California -2.5239801 -1.5429340  0.59855680 -0.341996478
Colorado   -1.5145629 -0.9875551  1.09500699  0.001464887 
```

# database - 动态创建视图

> ID：13837874
> 
> 赞同：0
> 
> 时间：2012-12-12T10:39:08.973
> 
> 标签：database, database-design, dynamic, views

我需要创建一个查询是动态的视图。

创建或替换视图 v_sample AS v_query；

问题是我不想向将提交动态查询以编译视图的用户提供授权。请提出一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:47:46.207

只是不要创建视图。使用动态 SQL。

# linq - 使用 LINQ 替换低于阈值的值

> ID：13837875
> 
> 赞同：0
> 
> 时间：2012-12-12T10:39:11.370
> 
> 标签：linq

我有

```
int[] source = new[]{ 1, 3, 8, 9, 4 }; 
```

为了用零替换源中低于某个阈值的所有值，我应该编写什么 linq 查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:40:33.503

```
int threshold = 2;
int[] dest = source.Select(i => i < threshold ? 0 : i).ToArray(); 
```

如果您不想创建新数组但使用旧数组：

```
for(int index=0; index < source.Length; index++)
{
    if(source[index] < threshold)
       source[index] = 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:42:49.860

如果您真的*在*（而不是）数组*中*进行替换，请不要使用 LINQ，只需

```
for(int i = 0; i < source.Length; i++)
    if (source[i] < threshold)
        source[i] = 0; 
```

# git - 带有索引过滤器的 Git 过滤器分支不起作用并按预期删除目录

> ID：13837878
> 
> 赞同：8
> 
> 时间：2012-12-12T10:39:17.140
> 
> 标签：git, git-filter-branch, git-rewrite-history

主分支中 Git repo foo 的结构

```
foo/refs/a.txt  
foo/bar/refs/b.txt 
```

在其他分支机构`refs/`可能在很多其他地方

### 目标

从 Git（历史）环境中删除目录引用（及其内容）的所有实例：使用 Git Bash 的 Windows 7

### 删除 refs（Git 不参与，尝试这个只是为了看看它自己工作）

```
find . -name refs -depth -exec rm -rf {} \; 
```

成功，所有`refs/`及其内容都被删除（如果我不使用`-depth`，find会报错，即使正确删除了dirs也不存在）。

### 从 Git 中删除 refs

```
git filter-branch --index-filter \
'find . -name refs -depth -exec git rm -rf --cached --ignore-unmatch {} \;' \
--prune-empty --tag-name-filter cat -- --all 
```

![通过重写 Git 历史记录从 Git 中删除目录引用](../Images/c5a5f906a2e3e4043022f976c58fadd5.png)

如图所示（认为`temp/a`as `temp/foo`），该命令运行并重写所有提交，但没有`refs/`被删除，因此 find 的输出不会`filter-branch --index-filter`按预期返回。

类似的事情似乎对其他人有用。
我错过了什么？

PS。是的，我已经阅读了数百篇关于此的帖子、文章等几个小时，但无论如何它对我不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-07T23:18:45.400

## 更新

虽然我的旧答案显然帮助原始发帖人部分解决了他的问题，但似乎我实际上可能不正确，`--index-filter`唯一适用于 Git 命令的，因为在[文档中`git filter-branch`](http://git-scm.com/docs/git-filter-branch#_examples)，它给出了一个过滤器与非 Git 一起使用的示例除了 Git 命令之外的 shell 命令：

```
git filter-branch --index-filter \
        'git ls-files -s | sed "s-\t\"*-&newsubdir/-" |
                GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
                        git update-index --index-info &&
         mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"' HEAD 
```

可能的情况是，如果您要使用带有 的非 Git 命令`--index-filter`，那么它们*必须*对存储库的索引进行操作，如文档中的上述示例所示。

所以基本上，*我不确定为什么*原始发布者的原始索引过滤器不起作用，但可能是他试图访问索引过滤器不允许访问的存储库的一部分，或者他使用的任何非 Git 命令实际上都没有修改索引。

此外，[正如我在评论中指出的那样](https://stackoverflow.com/questions/13837878/git-filter-branch-index-filter-not-working-does-not-remove-directories#comment38710792_13837878)，

> Git 实际上将其所有引用存储`.git/refs/`在非裸存储库中，在工作副本根目录中......因此该命令`find . -name refs -depth`实际上也会挖掘这些目录。

那么也许这会导致过滤器分支期间出现严重错误？

## 旧答案

我认为问题可能是您尝试使用带有`filter-branch --index-filter`选项而不是`--tree-filter`选项的非 Git shell 工具：

```
git filter-branch --index-filter \
'find . -name refs -depth -exec git rm -rf --cached --ignore-unmatch {} \;' \
--prune-empty --tag-name-filter cat -- --all 
```

不像`--tree-filter`，它为每个提交检查一个新的工作目录并在其上运行传递的 shell 脚本，`--index-filter`只对 Git 存储库本身的索引文件进行操作（它不检查工作副本以进行操作）......所以只有 Git 命令可以使用它。

这可能就是你运气更好的原因，因为它将 Git 命令传递给`filter-branch --index-filter`：

```
git filter-branch --index-filter \
'git rm -f --cached --ignore-unmatch *.zip && \
 git rm -rf --cached --ignore-unmatch refs' \
--prune-empty --tag-name-filter cat -- --all 
```

这是[git-filter-branch(1)](https://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html) `--tree-filter`的文档：

> 这是用于重写树及其内容的过滤器。该参数在 shell 中进行评估，工作目录设置为签出树的根目录。

这是`--index-filter`（强调我的）的文档：

> 这是用于重写索引的过滤器。***它类似于树过滤器，但不检查树***，这使它更快。经常与 一起使用`git rm --cached --ignore-unmatch ...`，请参见下面的示例。对于多毛的情况，请参阅[git-update-index(1)](https://www.kernel.org/pub/software/scm/git/docs/git-update-index.html)。

# javascript - 如果在 id 和 name 相同时选择了另一个单选按钮，如何启用/禁用一个单选按钮

> ID：13837880
> 
> 赞同：0
> 
> 时间：2012-12-12T10:39:17.237
> 
> 标签：javascript

我有一个广播组

```
<td valign="top" width="37.5%" colspan="3"> 
```

实际天数/月
仅工作日
仅工作日 + WH
仅工作日 + WH + PH

和另一个广播组

```
<td valign="top" width="37.5%" colspan="3"> 
```

日期之间
日历年
财政年
无叶适用

在这里，我的 id 和名称都相同，但值不同...我的要求是当我在第 1 组中仅选择工作日时，必须禁用第 2 组中的日期和日历年

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:48:10.123

```
selectedValue= ${radiogroup1:selected}.val();
if(selectedValue=='Only Working Days'){
  ${radiogroup2[value="Between Dates"]}.attr('disable','true');  
  ${radiogroup2[value="Calender Year"]}.attr('disable','true');
} 
```

这可能就是这种帮助。

# java - 在网站上使用 slick2d 实现 java 游戏

> ID：13837883
> 
> 赞同：1
> 
> 时间：2012-12-12T10:39:19.420
> 
> 标签：java, slick2d

我在网站上执行游戏时遇到问题。我试图在这个网站上做这样的事情：http: [//ninjacave.com/slickapplet](http://ninjacave.com/slickapplet)

我收到此错误：

```
ERROR:MainPackage.TGame
java.lang.InstantiationException: MainPackage.TGame
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at org.newdawn.slick.AppletGameContainer.init(AppletGameContainer.java:124)
at org.lwjgl.util.applet.AppletLoader.switchApplet(AppletLoader.java:766)
at org.lwjgl.util.applet.AppletLoader.run(AppletLoader.java:644)
at java.lang.Thread.run(Unknown Source)
Fatal error occured (8): Unable to create game container
java.lang.RuntimeException: Unable to create game container
at org.newdawn.slick.AppletGameContainer.init(AppletGameContainer.java:148)
at org.lwjgl.util.applet.AppletLoader.switchApplet(AppletLoader.java:766)
at org.lwjgl.util.applet.AppletLoader.run(AppletLoader.java:644)
at java.lang.Thread.run(Unknown Source) 
```

这是我的 MainPackage.TGame

```
package MainPackage;
import org.newdawn.slick.*;
import org.newdawn.slick.state.*;

public class TGame extends StateBasedGame {

        public TotalPunkty suma = new TotalPunkty();
        public static final int menu = 0;
        public static final int game = 1;
        public static final int high = 2;
        public static final int about = 3;
        public static final int howto = 4;
        public static final int over = 5;

        BasicGameState G = new Game(game, suma);
        public BasicGameState O = new Over(over, suma);

        public static String title = "TGame";

        public TGame(String name) {
                super(name);
                this.addState(new Menu(menu));
                this.addState(G);
                this.addState(new High(high));
                this.addState(new About(about));
                this.addState(new HowTo(howto));
                this.addState(O);
        }

        public static void main(String[] args) throws SlickException {
                AppGameContainer MainWindow;

                try {
                        MainWindow = new AppGameContainer(new TGame(title));
                        MainWindow.setDisplayMode(800, 600, false);
                        MainWindow.setShowFPS(true);
                        MainWindow.setTargetFrameRate(60);
                        MainWindow.start();
                } catch(SlickException se) {
                        se.printStackTrace();
                }

        }

        public void initStatesList(GameContainer gc) throws SlickException {
                this.getState(menu).init(gc, this);
                this.getState(game).init(gc, this);
                this.getState(high).init(gc, this);
                this.getState(about).init(gc, this);
                this.getState(howto).init(gc, this);
                this.getState(over).init(gc, this);
                this.enterState(menu);
        }

} 
```

如果有人可以帮助我或者只是给我一些如何解决这个问题的提示，我将不胜感激。:)

# javascript - 使用 jquery 获取屏幕大小包括源代码面板/调试面板

> ID：13837891
> 
> 赞同：0
> 
> 时间：2012-12-12T10:39:31.813
> 
> 标签：javascript, jquery

```
$(window).height();
$(window).width(); 
```

目前我正在使用这两个代码来获取屏幕大小，但是，如果源代码面板/调试面板处于打开状态。屏幕尺寸会排除，如何在屏幕尺寸结果中包含源代码栏？谢谢。

另外，有没有办法获得用户屏幕的实际屏幕分辨率？（如果用户没有最大化浏览器）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:42:46.823

`screen.height`并`screen.width`获取屏幕尺寸，至于调试面板，没有办法知道那是什么尺寸并将其从窗口尺寸等中排除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:41:59.513

采用

```
screen.height;
screen.width; 
```

获取屏幕分辨率

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:52:23.460

我认为这是重复的问题请检查您的问题类似于此

[jQuery屏幕分辨率高度调整](https://stackoverflow.com/questions/1271675/jquery-screen-resolution-height-adjustment)

请参阅工作示例以获取帮助 [http://jsfiddle.net/9mQ2b/13/](http://jsfiddle.net/9mQ2b/13/)

可能与

```
screen.height;
screen.width; 
```

# c# - 数据库登录失败

> ID：13837900
> 
> 赞同：-5
> 
> 时间：2012-12-12T10:39:52.927
> 
> 标签：c#, sql, login

当我尝试将一些数据从数据库复制到 .txt 文件时出现错误。

我的台词是：

```
string connString;
connString = "Data Source=(local);Initial Catalog=Ochhi che guardano;Integrated Security=SSPI"; 
```

但我收到此错误：“无法打开登录请求的数据库。登录失败。用户登录失败......等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:00:55.250

您正在使用集成安全性，这意味着运行您的程序的用户需要对数据库具有相关的访问权限。如果您以交互方式运行程序（例如，它不是服务），那么您需要访问权限，即您用于登录 Windows 的帐户需要获得数据库权限。如果您不控制数据库，请与负责的人交谈 - 通常是数据库管理员 (DBA)。

您还需要考虑将来谁将使用您的程序，例如，它何时上线。如果不是您，那么无论是谁都需要获得数据库权限，假设您继续使用集成安全性；如果您的程序作为服务运行，则需要为服务使用的帐户授予数据库权限。

# regex - 日志文件的正则表达式捕获确切的单词

> ID：13837902
> 
> 赞同：0
> 
> 时间：2012-12-12T10:39:55.277
> 
> 标签：regex

我正在尝试在日志文件中捕获确切的单词：

```
/Emergency|Critical|Error|BEA-000331/ 
```

问题是，例如我必须`Error`捕获，但这也是捕获`ErrorUnable`。我只想在空间看到它时捕捉它。我也在寻找，`BEA-000331` 但所有东西都`BEA`被捕获了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:44:02.667

如果您在 perl/ruby 中，请添加单词边界标记 \b 以仅匹配单词边界。此外，如果 BEA-000331 必须作为一个单元匹配，请尝试将其放在括号中：-

```
/\b(Emergency|Critical|Error|(BEA-000331))\b/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:47:19.727

使用`\b`：

> 匹配单词字符（由 \w 匹配的任何内容）和非单词字符（由 [^\w] 或 \W 匹配的任何内容）之间的位置以及字符串的开头和/或结尾（如果第一个）和/或字符串中的最后一个字符是单词字符。

`'\bEmergency\b|\bCritical\b|\bError\b|\bBEA-000331\b'`

根据您使用的工具，您可以执行以下操作：

```
grep -Ew 'Emergency|Critical|Error|BEA-000331' log 
```

该`-w`选项强制模式仅匹配整个单词。

# java - 以下路径之间的区别？

> ID：13837903
> 
> 赞同：2
> 
> 时间：2012-12-12T10:39:59.880
> 
> 标签：java, spring

我在属性文件中配置了以下路径。

```
C:/folder/file.xml
file:/folder/file.xml 
```

我在我的 spring 应用程序上下文文件中引用的上述两个路径之一。我的问题是什么`difference between these two paths`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:43:14.493

在 Windows 上，两者都指向同一个目录。在基于 *nix 的系统上，第一个不起作用。所以第二个更通用，应该用第一个代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:55:57.903

使用相对路径总是更好的做法。它使代码更有用，因为应用程序的相对文件夹结构不会改变，无论您使用的是哪个平台或计算机。但它只在相对路径正确时才有效，不像绝对路径只要路径正确就有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:56:21.707

`C:/folder/file.xml`是一个完全限定的文件名 `file:/folder/file.xml`是一个 URI，它应该`file:///`用于本地文件，而不是`file:/` `file://`在访问网络文件 URI 时使用

URI 不仅仅是 Java 的东西。`file://`表示资源是文件，而不是 HTTP 资源等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:52:10.607

文件前缀让 spring 知道正在寻找文件，而不是类路径资源、http 或 ftp 资源。

> UrlResource 包装了 java.net.URL，可用于访问通常可通过 URL 访问的任何对象，例如文件、HTTP 目标、FTP 目标等。所有 URL 都具有标准化的字符串表示，例如适当的标准化前缀用于指示一种 URL 类型与另一种 URL 类型。这包括file：用于访问文件系统路径，http：用于通过HTTP协议访问资源，ftp：用于通过FTP访问资源等。

# symfony - 渲染模板时如何在下划线js中获取日期格式？

> ID：13837905
> 
> 赞同：2
> 
> 时间：2012-12-12T10:40:11.733
> 
> 标签：symfony, twig, underscore.js

我正在使用`underscore.js`模板功能并完成了这样的模板：

```
<span class="msg-date"><% if (typeof(sent_date) != "undefined"){ %>
    <%= format(sent_date, 'd-m-Y') %><% } %>
</span>
<span class="msg-time"><% if (sent_date){ %><%= sent_date %><% } %></span> 
```

如您所见，我已将格式添加`sent_date`到`d-m-Y`. 但我无法得到正确的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:04:19.223

underscore.js template() 函数中没有特殊的日期修饰符。要格式化您的日期，您可以为此或 javascript Date 对象使用任何其他第三方库。有关更多详细信息和选项，请参阅[此](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:44:51.120

`format`不格式化树枝中的日期。它与 基本相同`printf()`。

要格式化要使用`date`修饰符的日期：

`sent_date|date('d-m-Y')`

# css - 如何将文本扩展到完整的 DIV 宽度

> ID：13837906
> 
> 赞同：2
> 
> 时间：2012-12-12T10:40:11.980
> 
> 标签：css

我有一个带有这样文本的 div：

```
<div class="somos-especialistas">
<p><span style="color: #ff7a00;">Especialistas en climatizaci&oacute;n</span> <span     style="color: #0092d4;">y deshumidificaci&oacute;n de piscinas</span></p>
</div> 
```

我希望**p**标签内的文本扩展到容器 div 的全宽。

div的CSS：

```
.somos-especialistas 
{
    width: 960px;
    font-stretch: expanded;
} 
```

我使用**了字体拉伸：扩展；**但它不起作用。我看到它在许多浏览器上都不支持。关于如何获得它的任何想法？

**JsFiddle：** [在这里检查代码](http://jsfiddle.net/sQ9ck/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:57:30.993

将以下样式添加到您的 CSS 类。

```
text-align:justify; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:50:23.287

如果里面没有动态文本，可以使用字母间距

```
letter-spacing:9px; 
```

[http://jsfiddle.net/sQ9ck/2/](http://jsfiddle.net/sQ9ck/2/)

或字间距

```
word-spacing:70px; 
```

[http://jsfiddle.net/sQ9ck/6/](http://jsfiddle.net/sQ9ck/6/)

或两者的结合

```
letter-spacing:5px;
word-spacing:44px; 
```

[http://jsfiddle.net/sQ9ck/10/](http://jsfiddle.net/sQ9ck/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-07T01:45:49.560

如果文本不是动态的，[Ashwin Singh 的答案](https://stackoverflow.com/a/13838094/4316314)就可以解决问题。

如果它是动态的，那么我们需要一个脚本来设置`letter-spacing`或`word-spacing`基于另一个元素的宽度。首先，计算两个元素之间的宽度差。然后将其除以需要更宽的元素的字符数。这是应该添加到每个字符的间距。

```
const diff = elementOne.offsetWidth - elementTwo.offsetWidth;
const letterSpacing = diff / elementTwo.innerHTML.length; 
```

这是一个例子：

```
const timeAndDate = () => {
  const dateElement = document.getElementById('date');
  const clockElement = document.getElementById('clock');
  const date = new Date();
  const time = `${getFakeHour()}:${getInitZero(date.getMinutes())}:${getInitZero(date.getSeconds())}`;

  clockElement.innerHTML = time;
  dateElement.innerHTML = `${weekDay(date.getDay())} ${date.getDate()} ${month(date.getMonth())}`;

  dateElement.removeAttribute('style');
  const widthDiff = clockElement.offsetWidth - dateElement.offsetWidth;
  const letterSpacing = widthDiff / dateElement.innerHTML.length;
  dateElement.style.letterSpacing = `${letterSpacing + 2}px`;

  setTimeout(timeAndDate, 1000); 
}

const getInitZero = (value) => {
    return value < 10 ? '0' + value : value;
}

const getFakeHour = () => {
    return Math.floor(Math.random() * 14);
}

const weekDay = (date) => {
    switch (date) {
        case 1:
            return 'Mon';
        default:
            return 'Fri';
    }
}

const month = (month) => {
    switch (month - 1) {
        case 1:
            return 'Jan';
        case 2:
            return 'Feb';
        default:
            return 'Dec';
    }
}

timeAndDate();
```

```
.flex-container {
  display: flex;
}
.date {
    display: inline-block;
    font-size: 3rem;
  margin: 0;
}

.time {
    font-size: 8rem;
}
```

```
<div class="flex-container">
  <div class="date-time">
    <p class="date" id="date">ds</p>
    <div class="time" id="clock"></div>
  </div>
</div>
```

.

# installscript - SYSINFO.NWinMajor 为 Windows 7 提供了错误的值

> ID：13837914
> 
> 赞同：2
> 
> 时间：2012-12-12T10:40:45.100
> 
> 标签：installscript, installshield-2012

我正在使用 InstallShield 2012 创建安装程序，并且正在使用 SYSINFO 主要和次要值检查操作系统。SYSINFO.nWinMajor 给出了正确的值，但 SYSINFO.nWinMinor 给出了 Windows 7 的 0。它应该是 1。

有人知道上面的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:58:23.527

MSI 中的自定义操作在`VistaRTMVersionLie`Windows 7 上进行了填充，因此 InstallShield 用于填充的 API`SYSINFO`声称可以在 Windows Vista 上运行。这不能被安装本身禁用，因此最好的办法是引用`VersionNT`或`VersionNT64`属性（在延迟操作的情况下可能间接引用），因为它们具有正确的版本信息。

有关其他详细信息，例如有关为何应用 shim 的信息，请参阅 Chris Jackson 的[Why Custom Actions get a Windows Vista Version Lie on Windows 7 。](http://blogs.msdn.com/b/cjacks/archive/2009/05/06/why-custom-actions-get-a-windows-vista-version-lie-on-windows-7.aspx)

# javascript - 从另一个函数调用时，phantom.exit(-1) 不起作用

> ID：13837916
> 
> 赞同：0
> 
> 时间：2012-12-12T10:40:51.040
> 
> 标签：javascript, callback, scope, phantomjs, exit-code

我正在使用 PhantomJS 来运行 JavaScript。有一个函数`phantom.exit()`接受退出代码作为第一个参数。

这是它的工作原理...

```
var page = require("webpage").create(),
    $ = require("jquery")

page.open("http://127.0.0.1:8081/", function (status) {
    var title = page.evaluate(function() {
        return $("title").text()
    })
    phantom.exit(-1)
}) 
```

返回的退出代码是预期的 -1 或 255。

我的问题是当我的函数被调用时我需要退出脚本。我的功能包含`phantom.exit(-1)`.

```
var page = require("webpage").create(),
    $ = require("jquery")

function foo() {
    phantom.exit(-1)
}

page.open("http://127.0.0.1:8081/", function (status) {
    var title = page.evaluate(function() {
        return $("title").text()
    })
    foo()
    phantom.exit()
}) 
```

问题是未调用函数中`phantom.exit(-1)`的那个`foo()`并且退出代码为0。

有一种解决方法可以检查我的函数中的返回值并`phantom.exit()`手动调用，但这不是我想要的......非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:58:43.873

有一种可能性是，您`foo`对输出的函数调用`phantom.exit`被`page.open`回调函数覆盖。

因此，调用`foo()`set exit code 为 -1。
然后，`phantom.exit`不带参数调用，将退出代码设置回0。

因为幻象本身可能会在所有内容执行完毕后返回退出代码，所以你得到了 0，没有 -1 的迹象。

# css - 在正文末尾添加空格

> ID：13837919
> 
> 赞同：1
> 
> 时间：2012-12-12T10:40:55.327
> 
> 标签：css

我有以下CSS

```
html {
margin: 0;
padding: 0;
position:relative;
}

body {
background-color: #fff;
border-top: solid 10px #000;
color: #333;
font-size: .85em;
font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
margin: 0;
padding: 0;
}

#content{
background-color: #efeeef;
clear: both;
padding-bottom: 35px;
} 
```

它是我的 HTML 页面

```
<html>
<body>
<div id="content">             
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server"/>
 </div> 
```

![在此处输入图像描述](../Images/7a65165bbecb48579d3870d1801e5e83.png)

如果正文的内容是小空格，则像上图一样添加空格（红色标记中添加了空格）。我怎样才能删除它？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:03:59.897

您需要设置`min-height`内容：-

```
#content{
background-color: #fffaaa;
clear: both;
padding-bottom: 35px;
min-height:600px;
}​ 
```

看[演示](http://jsfiddle.net/8KgWY/)

# objective-c - 我可以在目标 C 上复制“事件处理程序”吗？

> ID：13837920
> 
> 赞同：1
> 
> 时间：2012-12-12T10:40:59.440
> 
> 标签：objective-c, ios

这可能是一个愚蠢的问题，但我想知道我是否可以在目标 C 上复制控件的“事件处理程序”。例如，我有一个按钮“FIRST”，只要用户单击它，这个按钮就会触发方法“clickEventHandler”。现在我有一个按钮“SECOND”，我只需要第二个按钮的功能与第一个按钮的功能相似，无论第一个按钮做什么。

请给我一个解决方案。也欢迎任何推荐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:44:53.183

鉴于按钮的目标和操作通常是使用 Interface Builder 设置的，我认为最好的解决方案可能是拥有一个“路由”事件的通用方法。所以有两个按钮调用：

```
- (IBAction)eventRouter:(id)sender
{
    // Don't forget to set the button's tag in IB!
    NSInteger tag = [sender tag];

    switch (tag)
    {
    case BUTTON1_TAG:
        [self button1Method:sender];
        break;
    case BUTTON2_TAG:
        [self button2Method:sender];
        break;
    default
        break;
    }
} 
```

然后，您可以在运行时更改路由，而无需编辑 IB 中的按钮。

**编辑**（在 OP 提问后）：

为了以编程方式从按钮获取操作（和目标），`action`只需`target`访问`NSButtonCell`.

```
NSButton *button = (NSButton *)sender;    // Or perhaps from an IBOutlet
id target = button.cell.target;
SEL action = button.cell.action;

// Call the button's action selector
[target performSelector:action withObject:self];   // or withObject:sender 
```

# 32bit-64bit - PIC 编译 - 错误：创建共享对象时无法使用针对“vtable for hit”的重定位 R_X86_64_32S；使用 -fPIC 重新编译

> ID：13837922
> 
> 赞同：2
> 
> 时间：2012-12-12T10:41:30.953
> 
> 标签：32bit-64bit, relocation, fpic

我是 Linux 的新手，我在编译一个在 32 位机器上运行良好的 make 文件时遇到了麻烦。我没有编写这个程序，但我需要它来使用它的功能。我的机器是 64 位的，我收到以下消息错误：

```
cd pmtTools;    make 
make[1]: Entering directory `/home/daniel/Documents/Master_thesis/data_Daniel-Thomas/photondet/trace/PMTSignalsAnalysis/pmtTools'
g++ -shared  -L/home/root/root/lib -lCore -lCint -lRIO -lNet -lHist -lGraf -lGraf3d -lGpad -lTree -lRint -lPostscript -lMatrix -lPhysics -lMathCore -lThread -pthread -lm -ldl -rdynamic -o libPmtTools.so hit.o event.o waveform.o readLeCroyBinary.o pmtToolsDict.o
/usr/bin/ld: hit.o: relocation R_X86_64_32S against `vtable for hit' can not be used when making a shared object; recompile with -fPIC
hit.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[1]: *** [libPmtTools.so] Error 1
make[1]: Leaving directory `/home/daniel/Documents/Master_thesis/data_Daniel-Thomas/photondet/trace/PMTSignalsAnalysis/pmtTools'
make: *** [all] Error 2 
```

我一直试图通过使用这个网站来解决这个问题，但我没有让程序工作...... [http://www.gentoo.org/proj/en/base/amd64/howtos/index.xml？ part=1&chap=3](http://www.gentoo.org/proj/en/base/amd64/howtos/index.xml?part=1&chap=3) 我不习惯生成文件，这就是为什么我没有设法正确修改生成文件以 PIC 编译共享库。我在全局范围内添加了标志'export CXXFLAGS=$CXXFLAGS -fPIC'，但它没有用。我完全迷路了。

这是制作文件（两个制作文件和一个调用它们的文件）。

```
ROOTCONFIG = $(ROOTSYS)/bin/root-config
ROOTCINT = $(ROOTSYS)/bin/rootcint
DOXYGEN = doxygen

CXX = $(shell $(ROOTCONFIG) --cxx)
LD = $(shell $(ROOTCONFIG) --ld)

CFLAGS = $(shell $(ROOTCONFIG) --cflags) 
LIBS  = $(shell $(ROOTCONFIG) --libs)
SOFLAGS = -shared 

CINTSRCS = event.cc hit.cc
CINTINCS = event.h hit.h

OBJS = hit.o event.o waveform.o readLeCroyBinary.o pmtToolsDict.o

LIBPMTTOOLS = libPmtTools.so

all: $(LIBPMTTOOLS)
    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:~/Documents/Master_thesis/data_Daniel-Thomas/photondet/trace/PMTSignalsAnalysis/pmtTools

$(LIBPMTTOOLS): $(OBJS)
    $(LD) $(SOFLAGS) $(LIBS) -o $@ $(OBJS)

%.o: %.cc
    $(CXX) $(CFLAGS) -c -o $@ $<

pmtToolsDict.cc: $(CINTSRCS) $(CINTINCS) pmtToolsLinkDef.h
    @echo "Generating dictionary pmtToolsDict..."
    $(ROOTCINT) -f pmtToolsDict.cc -c -p $(CINTINCS) pmtToolsLinkDef.h

clean:
    rm -f pmtToolsDict.cc pmtToolsDict.h $(LIBPMTTOOLS) $(OBJS)

dox:
    rm -rf html
    $(DOXYGEN) pmtTools.dox 
```

-----------------------------------------2 -------- ------------

```
ROOTCONFIG = $(ROOTSYS)/bin/root-config

CXX = $(shell $(ROOTCONFIG) --cxx)
LD = $(shell $(ROOTCONFIG) --ld)

CFLAGS = $(shell $(ROOTCONFIG) --cflags) -I../pmtTools 
LIBS  = $(shell $(ROOTCONFIG) --libs)# -L../pmtTools -lpmtTools

OBJS = analysis.o
SHARED = ../pmtTools/libPmtTools.so
EXE = analysis.exe

all:  $(EXE)

$(EXE): $(OBJS) $(SHARED)
    $(LD) $(LIBS) -o $@ $(OBJS) $(SHARED)

$(SHARED):
    cd ../pmtTools; make

%.o: %.cxx
    $(CXX) $(CFLAGS) -c -o $@ $<

test: test.cxx $(SHARED)
    $(CXX) $(CFLAGS) -c -o test.o test.cxx
    $(LD) $(LIBS) -o test.exe test.o $(SHARED)

clean:
    rm -f $(EXE) $(OBJS) test.o test.exe 
```

----------------------3--------------

```
 all:
    cd pmtTools;    make 
    cd analysis;    make 

 clean:
    cd pmtTools;    make clean
    cd analysis;    make clean 
```

希望有人能帮助我。提前致谢！！丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T13:02:24.363

您的 makefile 正在使用`$CFLAGS`，而不是`$CXXFLAGS`. 您必须在生成文件中添加`-fPIC`全局 ( `export CXXFLAGS=$CXXFLAGS -fPIC`) 或右侧行 (例如`CFLAGS = $(shell $(ROOTCONFIG) --cflags) -I../pmtTools`)。

从错误消息中，我猜只添加到第二个 makefile 可能就足够了。

# c# - 为什么在客户端没有完全看到自定义尺寸报告

> ID：13837928
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:41:42.810
> 
> 标签：c#, crystal-reports

我在水晶报表中工作。报告完全显示在服务器端，但是当我在客户端查看报告时，它是不完整的。它只显示一半大小。我的自定义报告宽度为 20 英寸，高度为 15 英寸。请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:33:55.490

在报告中，页面设置是什么打印机配置？“取消关联”很重要，否则报告将根据连接到运行它的计算机的打印机而显示不同。

# android - Ant 未能在 Ubuntu 上构建

> ID：13837930
> 
> 赞同：1
> 
> 时间：2012-12-12T10:41:50.683
> 
> 标签：android, ant, build

我希望有人可以帮助我解决这个问题。我正在使用 Ant Build 编译我的 java 代码，但出现以下错误：

```
Buildfile: <PATH>

BUILD FAILED
<PATH>build.xml:55: sdk.dir is missing. Make sure 
    to generate local.properties using 'android update project' or to inject it
    through the ANDROID_HOME environment variable.

Total time: 345 milliseconds 
```

我正在使用日食。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T00:37:01.597

此问题有两种解决方案，如错误消息中所述：

1.  在您的 Android 项目的根目录`sdk.dir`中的文件中设置变量的值。`local.properties`这需要指向您的 Android SDK 安装位置。例如，我有以下行：

    sdk.dir=/usr/local/bin/android-sdk-linux

    您可以手动执行此操作，也可以使用`android update project`命令为您生成它。

2.  或者，您可以在主目录的文件中设置`ANDROID_HOME`环境变量。`.bashrc`您可以通过添加类似于以下行的内容来做到这一点：

    导出 ANDROID_HOME=/usr/local/bin/android-sdk-linux

    请注意，您需要获取 .bashrc 文件或关闭控制台窗口并重新打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:27:14.510

没有看到您的 build.xml 文件就无法判断。但是，该消息看起来非常详细。它说您需要生成一个“local.properties”文件，可能是为了设置*sdk.dir*所在的位置。

在 Ant 中，您可以有一个属性文件来设置您的 Ant`build.xml`文件使用的属性。它说你可以`android update project`用来创建这个文件。同样，如果不知道您的`build.xml`外观、您正在尝试构建的项目等，就很难说。

一个快速的谷歌向我指出了[这个页面](http://developer.android.com/tools/projects/projects-cmdline.html#UpdatingAProject)。

# ruby-on-rails - 在作用域或类方法中使用模型方法？

> ID：13837932
> 
> 赞同：0
> 
> 时间：2012-12-12T10:42:00.463
> 
> 标签：ruby-on-rails, activerecord

有没有办法在我的范围或我的类方法中使用模型的方法？

我的联系人类中有这两种方法，定义联系人是否处于活动状态

```
def active
 return no_of_activities_last_year > 0 ? true : false
end

def no_of_activities_last_year
  time_range = (Time.now - 1.year)..Time.now
  activities.where(:updated_at => time_range).count
end 
```

然后我希望能够通过范围或类方法返回所有活动联系人，如下所示：

```
scope :active_contacts, lambda {where(:active => true)} 
```

或者

```
def self.active_contacts
 where(:active => true)
end 
```

但是它们不起作用，因为活动不是数据库的一部分。

有什么聪明的方法可以通过这个吗？并且以可以与其他范围结合的方式更可取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:05:17.613

据我所知，没有。ActiveRecord 背后的整个想法是对数据库进行查询。你不能告诉数据库“让我得到这个 ruby​​ 代码逻辑为真的所有记录”，但是你可以告诉数据库“让我得到这个条件下的所有记录”。

所以你仍然可以使用内部选择，可能有更好的方法，但你可以这样做：

```
raw_data = User.connection.execute("select user_id from (SELECT count(*) as qty, user_id FROM activities f2 WHERE user_id is not null AND created_at > DATE_SUB(NOW(), INTERVAL 1 WEEK) GROUP BY user_id HAVING qty > 1) as f1")
User.where("id in (?)", raw_data.to_a.flatten) 
```

它不是最干净的解决方案，但速度很快，它会让您了解如何构建其他查询。

如果您不想编写原始 sql 并且想要以正确的方式进行操作，您可以随时了解 Arel 或使用 Squeel。

或者，您可以获取所有数据，然后通过 ruby​​ 代码进行过滤，但这与让 sql 引擎过滤结果相比效率低下。

# jquery - 一些 jQuery Animate 帮助？

> ID：13837936
> 
> 赞同：0
> 
> 时间：2012-12-12T10:42:25.007
> 
> 标签：jquery, jquery-ui, jquery-animate, wordpress

首先，我的 jQuery 真的很烂。我在 Wordpress 循环中有一个“ul”，它呈现以下输出——“li”标签是循环中的各个帖子。

```
<ul id="list">
<li class="box">
    <div class="front">
        <h3> Some Front Stuff </h3>
        <p> Some front paragraph...</p>
    </div>
    <div class="back">
        <h3> Some back Stuff </h3>
        <p> Some back stuff.. </p>
    </div>
</li>
<li class="box">
    <div class="front">
        <h3> Some Front Stuff </h3>
        <p> Some front paragraph...</p>
    </div>
    <div class="back">
        <h3> Some back Stuff </h3>
        <p> Some back stuff.. </p>
    </div>
</li>
etc...etc..etc 
```

我想要的是可以在这里查看的东西：[http ://www.aatsol.co.za/temp/some_jquery/](http://www.aatsol.co.za/temp/some_jquery/)

我只是希望用户单击“查看更多详细信息”并将第二个 div 滑过第一个以显示“后 div”上的联系方式

另一个问题是我只希望“X”出现在联系方式上 - 以允许用户关闭窗口并返回到第一个 div。我已经尝试过做某事，但我无法再进一步了——2 周的 3 行 jQuery 工作。非常感谢您的帮助。

我的 jQuery：

```
$(document).ready(function() {
$(".box").click(function(){    
    $(this).find('.inner').stop().animate({top:0});    
});

// to close back div - not even touched 
$("a.close").click(function(){
    alert("close");
    $(this).find('.inner').stop().animate({top:340});
});}); 
```

任何帮助家伙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:47:00.750

我最终来对了，不妨回答我自己的问题。我在以下 jquery 脚本中使用了“切换”来实现结果：

```
$(".box").toggle(function(){
$(this).find(".inner").stop().animate({top:0});
}, function() {
$(this).find(".inner").stop().animate({top:340});} ); 
```

祝你好运！！

# outlook - 查询 Exchange Web 服务时如何防止 Outlook 提醒对话框？

> ID：13837938
> 
> 赞同：1
> 
> 时间：2012-12-12T10:42:33.767
> 
> 标签：outlook, exchange-server, exchangewebservices

我正在编写一个 Delphi 应用程序，在该应用程序中，我使用（仅）SOAP 调用从 Exchange Web 服务中检索约会数据。
这是单独服务器上的 Exchange 2010。我正在使用的虚拟机有一个连接到 Exchange 的 Outlook 2003 副本。Outlook 未运行，任务列表中也没有 Outlook.exe。

令我惊讶的是：
当我向 EWS 查询约会详细信息（检索正文和其他一些数据的 GetItem SOAP 请求）时，如果有未完成的提醒，则会弹出 Outlook 对话框。

这可以防止吗？

谢谢
简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:29:04.793

虚惊！

在 Delphi 应用程序中，我使用的是 Developer Express 调度程序组件，警告来自那里，而不是来自 Outlook。

对不起 ;-）

# iphone - 应用程序不要求在应用程序中启用通知

> ID：13837940
> 
> 赞同：0
> 
> 时间：2012-12-12T10:42:40.047
> 
> 标签：iphone, objective-c, ios, push-notification

我正在尝试构建一个使用推送通知的应用程序。我完成了有关证书、应用程序 ID、配置文件的所有步骤。然后在我的应用程序中，我在 applicationsDidFinishWithLaunchingOptions 中添加了这段代码。

```
 NSLog(@"tille here");
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
     (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];
    UIRemoteNotificationType enabledTypes = [[UIApplication sharedApplication] enabledRemoteNotificationTypes]; 
```

但我没有得到要求它的弹出窗口。

有人可以帮忙吗？

亲切的问候

# ios - tabbarcontroller 之前的第一个屏幕

> ID：13837944
> 
> 赞同：-1
> 
> 时间：2012-12-12T10:42:46.287
> 
> 标签：ios, xcode, uitabbarcontroller

我是 obj-C 编程的新手。我对如何制作这样的应用程序很感兴趣：我运行它然后它显示带有按钮的视图控制器。我单击此按钮，它显示标签栏控制器。我应该将第一个屏幕显示为模式视图还是有其他变体？你能逐步解释这个过程吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:49:34.413

我这样做的方法是拥有一个`UINavigationController`. 那么`RootViewController`这是你的第一个视图。

然后从“第一个视图”你可以推`TabBarController`.

如果您不想要导航栏，您可以隐藏它，但使用 NavigationController 只会让在视图之间移动变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:03:20.037

您可以使用委托来实现该功能。创建 LoginViewControler 并在其中定义协议。在 AppDelegate.m 文件中实现该委托方法。以下是实现您想要的功能的 sude 代码。

**// AppDelegate.h**

```
 @interface AppDelegate : UIResponder <UIApplicationDelegate,LoginViewControllerDelegate>{

 LoginViewController *loginViewController; 
```

}

**// AppDelgate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
loginViewController = [[LoginViewController alloc]initWithNibName:@"LoginViewController" bundle:nil];
loginViewController.delegate = self;
self.window.rootViewController = loginViewController;

[self.window makeKeyAndVisible];

return YES; 
```

}

```
-(void)loginButtonPressed {
[self.window setRootViewController:nil]; 
```

self.window.rootViewController = self.viewController;

}

**//LoginViewController.h**

```
@protocol LoginViewControllerDelegate <NSObject> 
```

@required - (void) loginButtonPressed;

@结尾

@interface LoginViewController : UIViewController{ id delegate;

}

```
@property (retain) id delegate;

- (IBAction)loginButtonPressed:(UIButton *)sender; 
```

@结尾

**//LoginViewController.m**

```
- (IBAction)loginButtonPressed:(UIButton *)sender {
            [_delegate loginButtonPressed]; 
```

}

# nginx - 无法使用 nginx 获取文件

> ID：13837946
> 
> 赞同：0
> 
> 时间：2012-12-12T10:42:49.460
> 
> 标签：nginx

我正在尝试使用 nginx 获取 img。我的 nginx 配置在这里：听 80；server_name *.test.com;

```
 #charset koi8-r;

    #access_log  logs/host.access.log  main;

    location / {
            proxy_pass http://test_com;
    } 
    location ^~ /img {
         root /data/img;
    } 
```

我将 test.html 文件放入 /data/img 目录。但是当我请求[http://www.test.com/img/test.html](http://www.test.com/img/test.html)时，发生了 404

我的配置文件有问题吗？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:36:41.467

要服务的文件名是`root`+ `uri`，即`/data/img`+`/img/test.html`与您的配置。很可能你的意思是`/data/img/test.html`相反。改用这个：

```
location /img {
    root /data;
} 
```

有关详细信息，请参阅[http://nginx.org/r/root](http://nginx.org/r/root)。

# jsf - 如何为 prev / next 按钮实现自定义操作 & ?

> ID：13837947
> 
> 赞同：2
> 
> 时间：2012-12-12T10:42:49.360
> 
> 标签：jsf, primefaces

[我找到了一个解决方案来为 Fullcalendar 中的 prev 和 next 按钮实现自定义操作。](https://stackoverflow.com/questions/6788761/jquery-fullcalendar-calling-events-on-clicking-prev-and-next-button-in-fullcale)

但我不知道，我如何将它用于我的情况。`<p:calendar>`如果`<p:schedule>`切换到下个月/年，我想更改显示的日期范围，而另一个方向也相同。我的构造看起来像一个简单的 Outlook 日历。

![在此处输入图像描述](../Images/18410f068a7b6b5f0fe611b607a8ce08.png)

我提供了`<p:calendar>`更新`<p:schedule>`'s `initalDate`on的可能性`dateSelect`。所以计划跳到所选日期的日期范围。`<p:schedule>`但是，如果有“月”视图并且用户决定通过单击上一个/下一个按钮再过一个月，我该如何处理该事件？`<p:calenadar>`如果用户使用按钮和导航器，我会得到同样的结果。

我的第一个想法是创建一个`ManagedBean`保存当前日期范围的状态。如果单击上一个/下一个按钮或导航器，则调用自定义事件。此事件比较给定的范围并更新。但我认为这是不可能的，或者是吗？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-19T00:25:20.597

你必须使用 LazyScheduleModel 对象来做到这一点

```
ScheduleModel eventModel = new LazyScheduleModel() {

 @Override
            public void loadEvents(Date start, Date end) {
                handlePreviousNext(start, end);
            }
        }; 
```

# aptana - aptana studio 3 路径变量

> ID：13837951
> 
> 赞同：1
> 
> 时间：2012-12-12T10:43:11.030
> 
> 标签：aptana, aptana3

我需要在 Aptana Studio 3 中编辑项目的路径变量，但编辑按钮是灰色的。我错误地（不知不觉！）删除了 PARENT_LOC 和 WORKSPACE_LOC 路径变量指向的目录。现在 Apatana 在尝试自动保存时给了我一个错误。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:34:47.380

这两个位置会自动设置为项目工作区所在的任何位置。

要更改工作区的位置，您需要将 Aptana 设置为在启动时提示您输入工作区位置：

1.  在 Apatana 中：
    `Window > Preferences > General > Startup and Shutdown > Prompt for workspace on startup: Checked`
    您可以在搜索框中输入`workspaces`并点击`Enter`以更快地到达那里。
    ![Aptana 3 工作区首选项](../Images/ade83146b321decac69f84654ce80880.png)
2.  重新启动 Aptana，它会提示您选择工作区所在的位置。
3.  为工作区选择或创建一个新位置。

# jquery - 在页面加载时检查重复名称和单选按钮的值

> ID：13837953
> 
> 赞同：1
> 
> 时间：2012-12-12T10:43:11.060
> 
> 标签：jquery, html

我有两组相同的单选按钮，一组在表格顶部和表格底部（一些 UI 要求）

问题是当我设置检查单选按钮时，只有底部的单选按钮被选中

这是我的代码：

```
//Top Set of Radio Buttons
<input name="optField"  value="Male" type="radio">Male
<input name="optField"  value="Female" type="radio">Female

//Table Here

//Bottom Set of Radio Buttons
<input name="optField"  value="Male" type="radio">Male
<input name="optField"  value="Female" type="radio">Female 
```

jQuery代码：

```
 $(window).load(function(){

 var $radios = $('input[name=optField]');

 $radios.filter('[value="Male"]').attr('checked',true);

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:47:05.983

您应该为两个选项组指定不同的名称属性。

**HTML**

```
<input name="optField"  value="Male" type="radio">Male
<input name="optField"  value="Female" type="radio">Female

//Bottom Set of Radio Buttons
<input name="optField2"  value="Male" type="radio">Male
<input name="optField2"  value="Female" type="radio">Female 
```

**JavaScript**

```
$(window).load(function(){
    var $radios = $('input[name*="optField"]');
    $radios.filter('[value="Male"]').attr('checked',true);
}); 
```

# javascript - 选择iframe并用js全部复制

> ID：13837957
> 
> 赞同：0
> 
> 时间：2012-12-12T10:43:16.037
> 
> 标签：javascript, internet-explorer, select, iframe

是否可以选择 iframe 并将所有内容复制到剪贴板？我有以下代码要复制到剪贴板：

```
function CopyToClipboard()
{
    CopiedTxt = document.selection.createRange();
    CopiedTxt.execCommand("Copy");
} 
```

我想做的是选择 iframe 中的所有内容并使用上述方法将它们复制到剪贴板。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:46:17.113

不，如果 iframe 中加载的页面不是您控制的页面，这是不可能的。如果您控制正在加载的页面，则可以选择文本并将其传递给父窗口。但是脚本必须在 iframe 中的页面上下文中运行。这称为沙盒。

想象一下，你是一个坏人，制作了一个虚假的银行页面。您可以将真实的银行页面加载到 iframe 中并诱骗用户登录。然后您就可以复制他们所有的个人银行数据。沙盒可以防止这种情况。

# c# - RavenDB DeleteByIndex

> ID：13837958
> 
> 赞同：3
> 
> 时间：2012-12-12T10:43:20.390
> 
> 标签：c#, ravendb

我正在开发一个网络爬虫，保存到 Raven 的结果可能会因网站的大小而异。我正在尝试删除“每个会话的服务器限制为 30 个”的特定结果，我不想将其扩展到 1,000 个限制，但我确实想批量删除。

我写的我认为应该工作的代码是

```
 public void DeleteCrawledLinks(string baseUrl)
    {

        DocumentStore().DatabaseCommands.DeleteByIndex(
            "Auto/UrlContainers/ByBaseUrlAndUrl",
            new IndexQuery
            {
                Query = "BaseUrl:" + baseUrl // where BaseUrl contains baseUrl
            }, allowStale: false);
     } 
```

本示例中 Raven 中的 BaseUrl 让我们称其为“BaseUrl”：“http://localhost:2125/”，baseUrl 将是相同的，当我运行删除函数时，我收到此错误消息

网址：“/bulk_docs/Auto/UrlContainers/ByBaseUrlAndUrl?query=BaseUrl%253Ahttp%253A%252F%252Flocalhost%253A2125%252F&start=0&pageSize=128&aggregation=None&allowStale=False”

System.ArgumentException：字段“http”未编入索引，无法查询未编入索引的字段

是因为 : 在我的查询中，有没有办法解决这个问题还是有其他方法？我不想扩大限制，因为我抓取的网站可能返回 1,000 多个结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:37:18.483

自己构建查询时，请按如下方式转义搜索词：

```
Query = "BaseUrl:" + RavenQuery.Escape(baseUrl) 
```

# jakarta-ee - 一个 Web 应用程序中的两个 Struts2 过滤器

> ID：13837959
> 
> 赞同：1
> 
> 时间：2012-12-12T10:43:21.487
> 
> 标签：jakarta-ee, struts2

我想在一个应用程序中使用两个 struts2 过滤器。我在`web.xml`. “struts2”过滤器已经存在，我只是添加了“companion”过滤器。

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>*.abc</url-pattern>
</filter-mapping>

<filter>
    <filter-name>companion</filter-name>
    <filter-class>
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    </filter-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>companion.xml</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>companion</filter-name>
    <url-pattern>*.xyz</url-pattern>
</filter-mapping> 
```

我在类路径中创建了两个配置文件“struts.xml”和“companion.xml”。这些文件彼此完全独立。我还在每个配置文件中使用适当的值（struts2 -> abc 和同伴 -> xyz）定义了常量“struts.action.extension”。两个配置文件中也提供了一些操作及其映射。

现在，当我访问一个操作时，它会在我的浏览器上显示以下消息。

`Error 404: SRVE0190E: File not found: /fetchUserInfo.xyz`.

以下日志消息来自服务器日志。

```
12/12/12 15:48:24.846, ERROR, [WebContainer : 0], Dispatcher initialization failed
com.opensymphony.xwork2.inject.DependencyException: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=com.opensymphony.xwork2.ObjectFactory, name='default'] in public void com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.setObjectFactory(com.opensymphony.xwork2.ObjectFactory).
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMembers(ContainerImpl.java:144)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMethods(ContainerImpl.java:113)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectors(ContainerImpl.java:90)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectors(ContainerImpl.java:86)
at com.opensymphony.xwork2.inject.ContainerImpl$1.create(ContainerImpl.java:71)
at com.opensymphony.xwork2.inject.ContainerImpl$1.create(ContainerImpl.java:67)
at com.opensymphony.xwork2.inject.util.ReferenceCache$CallableCreate.call(ReferenceCache.java:150)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:284)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at com.opensymphony.xwork2.inject.util.ReferenceCache.internalCreate(ReferenceCache.java:76)
at com.opensymphony.xwork2.inject.util.ReferenceCache.get(ReferenceCache.java:116)
at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:483)
at com.opensymphony.xwork2.inject.ContainerImpl$6.call(ContainerImpl.java:523)
at com.opensymphony.xwork2.inject.ContainerImpl$6.call(ContainerImpl.java:521)
at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:521)
at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:203)
at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436)
at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.init(FilterInstanceWrapper.java:142)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager._loadFilter(WebAppFilterManager.java:465)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.loadFilter(WebAppFilterManager.java:379)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.getFilterInstanceWrapper(WebAppFilterManager.java:238)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.getFilterChain(WebAppFilterManager.java:296)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:721)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:673)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:688)
at com.ibm.ws.wswebcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:96)
at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.invokeFilters(DefaultExtensionProcessor.java:758)
at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:718)
at com.ibm.ws.wswebcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:113)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3252)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:264)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:811)
at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1439)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:112)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:454)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:383)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:263)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:195)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:743)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:873)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1469)

Caused by: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=com.opensymphony.xwork2.ObjectFactory, name='default'] in public void com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.setObjectFactory(com.opensymphony.xwork2.ObjectFactory).
at com.opensymphony.xwork2.inject.ContainerImpl.createParameterInjector(ContainerImpl.java:235)
at com.opensymphony.xwork2.inject.ContainerImpl.getParametersInjectors(ContainerImpl.java:225)
at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.<init>(ContainerImpl.java:287)
at com.opensymphony.xwork2.inject.ContainerImpl$3.create(ContainerImpl.java:117)
at com.opensymphony.xwork2.inject.ContainerImpl$3.create(ContainerImpl.java:114)
at com.opensymphony.xwork2.inject.ContainerImpl.addInjectorsForMembers(ContainerImpl.java:141)
... 51 more 
```

是否可以在一个应用程序中使用两个过滤器？如果是这样，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:58:24.220

通过定义`struts-default.xml`和`struts-plugin.xml`解决问题`companion.xml`。

```
<init-param>
    <param-name>config</param-name>
    <param-value>struts-default.xml,struts-plugin.xml,companion.xml</param-value>
</init-param> 
```

参考：[https ://stackoverflow.com/a/13839585/1307229](https://stackoverflow.com/a/13839585/1307229)

# php - 如何在 Zpanel 中设置 cron 作业

> ID：13837960
> 
> 赞同：0
> 
> 时间：2012-12-12T10:43:23.540
> 
> 标签：php, cron, cakephp-2.0

在 C 面板中，我们可以在 cron 作业中设置 url，例如

> > wget example.com/homes/action

或绝对路径

> > /usr/bin/php -q /home/mohanphp/www/quote_bot/sms_cron.php

但是 Zpanel 不支持完整的 url

我想调用一个动作（在 Cakephp 例如[http://abc.com/homes/corn_job/daily/](http://abc.com/homes/corn_job/daily/)）

在c面板中没有问题但是Zpenal怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T20:29:37.283

如果您尝试运行 URL，只是因为您想运行 cakephp 控制器的操作。然后您应该尝试使用调度程序，它可以让您从命令提示符执行控制器操作，然后您可以在 zpanel 中正常设置 cron。

关于 cron 调度程序的更多信息可以在这里找到： [http ://colorblindprogramming.com/cronjobs-in-cakephp-2-in-5-steps](http://colorblindprogramming.com/cronjobs-in-cakephp-2-in-5-steps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:46:28.827

您可以更好地检查[在 Zpanel 中设置 cron 作业的链接](http://planet.zpanelcp.com?id=zpanel_x%3aarticles%3ainstallation%3aubuntu_11.10_manual_installation#setup_the_cron_job_for_the_zdaemon)。

```
touch /etc/cron.d/zdaemon
echo "*/5 * * * * root /usr/bin/php -q /etc/zpanel/panel/bin/daemon.php >> /dev/null 2>&1" >> /etc/cron.d/zdaemon
chmod 644 /etc/cron.d/zdaemon 
```

# java - jsf 应用程序中的 OAuth 回调

> ID：13837967
> 
> 赞同：0
> 
> 时间：2012-12-12T10:43:47.020
> 
> 标签：java, jsf, oauth

在此 jsf Web 应用程序的某个时刻，系统会提示当前用户通过 OAuth 识别 Twitter。

用户在 Twitter 上识别后，OAUth 回调 url 重定向到我的应用程序：

[http://www.myJsfApp.com/successAuth.xhtml](http://www.myJsfApp.com/successAuth.xhtml)

但当然，如果没有会话 ID，这个 successAuth.xhtml 就不会连接到用户会话。该页面只是“原始”xhtml 文件（及其所有标签），没有 html。

如何使此回调 url 链接回当前会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:50:03.033

> *但当然，如果没有会话 ID，这个 successAuth.xhtml 就不会连接到用户会话。*

如果您的 servletcontainer 支持 URL 重写（默认情况下，它们都支持），那么您可以将会话 ID 作为 URL 路径片段传递。

```
HttpSession session = (HttpSession) externalContext.getSession();
String callbackURL = "http://www.myJsfApp.com/successAuth.xhtml;jsessionid=" + session.getId();
// ... 
```

### 也可以看看：

*   [socialauth - 您可以在重定向中使用相同的会话吗？](https://stackoverflow.com/questions/12307702/socialauth-can-you-use-same-session-across-a-redirect/12310858#12310858)

* * *

> *该页面只是“原始”xhtml 文件（及其所有标签），没有 html。*

当`FacesServlet`没有被调用时，就会发生这种情况。请求 URL 必须与 的 URL 模式匹配`FacesServlet`才能调用它。因此，如果您已将其配置为侦听例如`/faces/*`URL，那么您显然应该将 URL 更改为`faces/successAuth.xhtml`.

```
HttpSession session = (HttpSession) externalContext.getSession();
String callbackURL = "http://www.myJsfApp.com/faces/successAuth.xhtml;jsessionid=" + session.getId();
// ... 
```

或者，您也可以只映射`FacesServlet`on `*.xhtml`，这样您就不需要摆弄虚拟 URL。

### 也可以看看：

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why)

# python - 使用 | 创建动态对象 分隔符 python

> ID：13837970
> 
> 赞同：1
> 
> 时间：2012-12-12T10:43:53.527
> 
> 标签：python, django

我想要解决的是这样的

```
names = ['Aleister', 'Matovu']
args = (Q(name__contains=name[0])|Q(name__contains=name[1]))
queryset.complex_filter(args) 
```

问题是我有一个动态对象的名称，它的长度不固定。我想的是，如果我遍历名称并创建一个动态`args`对象，但我不确定那是什么类型的对象。我不确定该怎么做，所以我被卡住了。

如果您可以帮助解决这个问题，那将非常酷，或者如果您可以给我另一种方法来处理相同的场景，那将是很棒的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:17:37.440

```
import operator
names = [...]
query = reduce(operator.or_, [Q(name__icontains=name) for name in names])
results = queryset.complex_filter(query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:53:05.440

我不知道`Q`在这种情况下是什么，但也许

```
import operator
qq = [Q(name__contains=i) for i in name)]
args = reduce(operator.or_, qq) 
```

可能有帮助。但正如[蒂米所写](https://stackoverflow.com/a/13838553/296974)的一样，不要支持我，而是支持他。

如果没有，请在[此处查看此问题](https://stackoverflow.com/q/7088173/296974)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:08:58.223

这是一个非常令人满意的解决方案。如果它对任何人有任何帮助

[http://bradmontgomery.blogspot.com/2009/06/adding-q-objects-in-django.html](http://bradmontgomery.blogspot.com/2009/06/adding-q-objects-in-django.html)

```
q = Q(content__icontains=term_list[0]) | Q(title__icontains=term_list[0])
for term in term_list[1:]:
    q.add((Q(content__icontains=term) | Q(title__icontains=term)), q.connector)

stories = stories.filter(q) 
```

# jakarta-ee - 将请求链接到另一个命名空间上的 struts 操作

> ID：13837974
> 
> 赞同：0
> 
> 时间：2012-12-12T10:44:06.380
> 
> 标签：jakarta-ee, struts2, struts, struts-config

在我的 struts 应用程序中，我有 2 个名为“a”和“b”的命名空间，并为每个命名空间定义了操作“进程”。

现在，在某些情况下，我必须将请求从命名空间“a”中的操作“进程”链接到命名空间“b”中的操作“进程”。但是我不知道如何在 struts.xml 中执行此操作。如何将这些请求链接到另一个命名空间？

我的 struts 配置如下所示：

```
<package name="testa" extends="struts-default, json-default" namespace="/a">
    <action name="process" class="com.khoinguyen.action.ProcessAction" method="handleResponseA">
        <result type="chain" name="return_b">
            <param name="actionName">b/process</param>
        </result>
        <result name="success">completea.jsp</result>
    </action>
</package>
<package name="testb" extends="struts-default, json-default" namespace="/b">
    <action name="process" class="com.khoinguyen.action.ProcessAction" method="handleResponseB">        
        <result name="success">completeb.jsp</result>
    </action>
</package> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:50:52.663

使用`<param name="namespace">`内部`chain`类型结果。您可以在[Struts2 官方文档](http://struts.apache.org/2.1.6/docs/chain-result.html)中查看有关此类型结果的官方文档以查看有关它的更多信息。

在你的情况下：

```
<package name="testa" extends="struts-default, json-default" namespace="/a">
    <action name="process" class="com.khoinguyen.action.ProcessAction" method="handleResponseA">
        <result type="chain" name="return_b">
             <param name="namespace">/b</param>
             <param name="actionName">process</param>
        </result>
        <result name="success">completea.jsp</result>
    </action>
</package> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-13T10:01:48.683

请使用结果`type="redirectAction"`而不是结果`type="chain"`

# c++ - 覆盖的定时器中断不能正常工作

> ID：13837975
> 
> 赞同：0
> 
> 时间：2012-12-12T10:44:11.437
> 
> 标签：c++, timer, kernel, interrupt, context-switch

我正在为我的大学开发一个小内核作为项目。我已经覆盖（不确定这是否是正确的表达式）一个定时器中断例程。

在第一次上下文切换之前它运行良好。上下文切换在 dispatch() 中，当进程使用其所有指定时间（超时）时调用它。

我的例程在主进程开始之前被初始化，它应该在它完成后恢复（虽然我从来没有这样做过）。我还尝试在每次启动进程时初始化它，并在上下文切换或进程结束时恢复它。我尝试了这个，因为我有一个 2005 年完成的项目（略有不同），我期待它的想法，而不是复制粘贴。

定时器中断：

```
void interrupt System::timer(...){
intOff;
    cout << currentTime << "\n";
    currentTime++;

    if(System::runningTime){
        System::runningTime--;
        if(!System::runningTime) {
          dispatch();
        }
    }
    else asm int 60h;
intOn;
} 
```

初始化新程序和恢复旧程序：

```
void System::init(){
  cout << "init\n";
  oldTimer = getvect(0x1c);
  setvect(0x1c, &timer);
  setvect(0x60, oldTimer);
}
void System::restore(){
  cout << "restore " << System::running->getName() << System::running->getID() << "\n";
  setvect(0x1c, oldTimer);
} 
```

我运行的过程：

```
void run(){
            cout << "Test" << mod << " time:" << System::currentTime << "\n";
        while(System::currentTime < 100){
        br++;
        }
    } 
```

//mod 就像 id

当我运行程序时，我得到：

init Test1 time:0 //从进程一开始，表示已经开始，允许运行2个周期，当前时间为0

0 //定时器程序开始时的当前时间

1 //定时器程序开始时的当前时间

Test2 time:2 //从进程二开始，已经开始，允许运行2个周期，当前时间如预期为2

我已经把 cout << System::currentTime; 在 br++ 之后的 run() 中。我得到的是“2”被打印到无穷大。这表明 currentTime 没有增加，这意味着我的计时器例程不再被调用。

我从各个角度看待这个问题，尝试了各种方法，但都没有奏效。任何想法都值得赞赏。[：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:09:26.630

我没有考虑将 End-of-interrupt 信号发送到中断控制器。只需要添加

```
asm {
push ax
in al, 0x61
or al, 0x80 // 10000000b
out 0x61, al
and al, 0x7F // 01111111b
out 0x61, al
mov al, 0x20
out 0x20, al
pop ax
} 
```

现在就像一个魅力。

# java - 我想使用 ArrayList 在我的控制台中显示数据库中的所有数据

> ID：13837976
> 
> 赞同：1
> 
> 时间：2012-12-12T10:44:17.427
> 
> 标签：java, database, jakarta-ee

您好，我只想在控制台上显示我的数据库表的全部内容。我正在尝试首先从数据库中获取记录并存储在 ArrayList 中，但它没有显示任何内容，它显示以下内容：

```
[com.suven.java.EmployeeDTO@970c0e]
[com.suven.java.EmployeeDTO@970c0e, com.suven.java.EmployeeDTO@987197] 
[com.suven.java.EmployeeDTO@970c0e, com.suven.java.EmployeeDTO@987197, com.suven.java.EmployeeDTO@497904] 
```

我完全不知道该怎么做。我的代码是：

```
EmployeeDTO java file

public class EmployeeDTO 
{
    //private properties
    private int empNo;
    private String eName;
    private String jobTitle;
    //setters
    public void setEmpNo(int val){empNo=val;}
    public void setEName(String val){eName=val;}
    public void setJob(String val){jobTitle=val;}
    // getters
    public int getEmpNo(){return empNo;}
    public String getEName(){return eName;}
    public String getJob(){return jobTitle;}
} 
```

我的 EmployeeList java 代码是：

```
public class EmployeeList 
{

  public static void main(String argv[]) 
  {
   Connection conn=null;
   Statement stmt=null;
   ResultSet rs=null;      

   try 
   {
    // Load the JDBC driver  
    // This can be skipped for Derby, but derbyclient.jar has to be in the CLASSPATH   
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String accessFileName = "E:/Database/java";
    conn=DriverManager.getConnection("jdbc:odbc:DRIVER={Microsoft Access  Driver (*.mdb, *.accdb)};DBQ="+accessFileName+".accdb;");

    // Build an SQL String 
    String sqlQuery = "SELECT * from Employee"; 

    // Create a Statement object
    stmt = conn.createStatement(); 

    // Execute SQL and get obtain the ResultSet object
    rs = stmt.executeQuery(sqlQuery);  
    ArrayList<EmployeeDTO> employees = new ArrayList<EmployeeDTO>();
    // Process the result set - print Employees
    while (rs.next())
    { 
        EmployeeDTO currentEmp = new EmployeeDTO();

        currentEmp.setEmpNo(rs.getInt("EMPNO"));
        currentEmp.setEName(rs.getString("ENAME"));
        currentEmp.setJob(rs.getString("JOB_TITLE"));
        employees.add(currentEmp);
        System.out.println(employees);
    }       
   } 
   catch( SQLException se ) 
   {
      System.out.println ("SQLError: " + se.getMessage ()+ " code: " + se.getErrorCode ());
   }
   catch( Exception e )
   {
      System.out.println(e.getMessage());
      e.printStackTrace(); 
   }
   finally
   {
       // clean up the system resources
       try
       {
       rs.close();     
       stmt.close(); 
       conn.close();  
       }
       catch(Exception e)
       {
           e.printStackTrace();
       } 
   }
}
} 
```

我的数据库是：

```
Employee
EMPN     ENAME     JOB_TITLE
1        abc       xyz
2        pqr       mno
3        lmn       hij 
```

请帮助我，我已经发布了我的完整代码和数据库我哪里出错了如何在控制台中显示它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:46:39.890

你必须`toString()`在你的`EmployeeDTO`课堂上实施。如果您使用的是 Eclipse，您可以生成方法：右键单击类 -> 源 -> 生成 toString()...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:47:02.417

你需要`toString`在你的`EmployeeDTO`类中覆盖。您可以使用`String.format`进行格式化：

```
@Override
public String toString() {
   return String.format("%d\t%s\t%s", empNo, eName, jobTitle);
} 
```

要将每个打印`employee`在单独的行上，您可以使用：

```
for (EmployeeDTO employee : employees) {
    System.out.println(employee);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:48:37.450

```
ArrayList<EmployeeDTO> employees = new ArrayList<EmployeeDTO>();
// Process the result set - print Employees
while (rs.next())
{ 
    EmployeeDTO currentEmp = new EmployeeDTO();

    currentEmp.setEmpNo(rs.getInt("EMPNO"));
    currentEmp.setEName(rs.getString("ENAME"));
    currentEmp.setJob(rs.getString("JOB_TITLE"));
    employees.add(currentEmp);
    System.out.println(employees);
} 
```

在此代码中，您将 Object 放入 ArrayList，而不是实际的 String/Value 放入其中。这就是为什么你得到 com.suven.java.EmployeeDTO@970c0e

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:46:28.417

看起来你需要`toString()`在你的 DTO 中实现。您将实现它，使其返回一个由您的员工姓名、工作等组成的字符串......这是一个链接，指向[实现 toString() 的 10 个技巧](http://javarevisited.blogspot.com/2012/09/override-tostring-method-java-tips-example-code.html)。

我还注意到，您在阅读每个员工后打印员工*列表。*我怀疑您需要打印员工本身。

```
System.out.println(employees); // this is the list itself! 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T10:57:33.410

你做得很好，除了排队

```
System.out.println(employees); 
```

在while循环中。

如果没有在 EmployeeDTO 类中重载 toString() ，就不能像那样显示 ArrayList 。

相反，要显示数组列表，请在 while 循环之后执行此操作

```
for(EmployeeDTO emp : employees)
{
    System.out.println(emp.getEmpNo() + " " +  emp.getEName() + " " + emp.getJob());
} 
```

# ios - 如何更改 UITableView 单元格中的删除按钮字体？

> ID：13837977
> 
> 赞同：1
> 
> 时间：2012-12-12T10:44:20.413
> 
> 标签：ios

当显示红色删除按钮时，我想向 UITableViewCell 中的删除按钮添加自定义字体。

任何想法如何在 iOS 5 上实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:12:41.073

您可以更改文本：

```
- (NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath 
```

但不是字体。您必须创建一个完整的自定义按钮。

# apache - 一个 IP 地址的 Apache 多个子域

> ID：13837978
> 
> 赞同：25
> 
> 时间：2012-12-12T10:44:21.460
> 
> 标签：apache, subdomain, vhosts

这可能已经被问过了，但我找不到直接的答案，或者我发现的那些不起作用。

我有一个域**mydomain.com**，解析为 IP；我们称之为 8.8.8.8。DNS 设置还将两个子域指向具有 A 记录的该 IP 地址。它们是**dev.mydomain.com**和**staging.mydomain.com**。两者都有指向 8.8.8.8 的 A 记录。

在服务器（8.8.8.8）上，我有两个虚拟主机文件。这些如下：

**staging.mydomain.com.conf**

```
<VirtualHost *:80>
    ServerName  staging.mydomain.com
    DocumentRoot /var/www/html/mydomain.com/staging/
</VirtualHost> 
```

和...

**dev.mydomain.com.conf**

```
<VirtualHost *:80>
    ServerName  dev.mydomain.com
    DocumentRoot /var/www/html/mydomain.com/dev/
</VirtualHost> 
```

***问题是：***

无论我访问*[http://staging.mydomain.com](http://staging.mydomain.com)*还是*[http://dev.mydomain.com](http://dev.mydomain.com)*，我总是登陆*staging.mydomain.com*（Apache 提供这些文件）。

我已经重新启动了 Apache 甚至服务器。如果我更改 .conf 文件的顺序以使 dev 排在第一位，我总是会看到。任何建议将不胜感激。谢谢！

* * *

## **更新**

我发现自己又回到了这个问题！如果你*知道*你的语法是正确的，你可能有一个错误的符号链接。删除它并重新创建，中间重新启动 apache。我只是这样做了，它解决了几个小时令人头疼的问题。在`CentOS`你可以检查你可用的虚拟主机`httpd -S`

## **更新 2**

**当虚拟主机的 apache日志**文件不存在或不可写时，我还发现存在此问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-12T11:27:51.337

听起来您需要在配置中添加[`NameVirtualHost`指令](http://httpd.apache.org/docs/2.2/mod/core.html#namevirtualhost)。

```
NameVirtualHost         *:80 
```

在某些情况下，Apache 可能无法`*:80`正确处理 VirtualHost。在这些情况下，您应该将 VirtualHosts 直接映射到特定 IP。

```
NameVirtualHost         8.8.8.8:80

<VirtualHost 8.8.8.8:80>
    ServerName  staging.mydomain.com
    ServerAlias stage.mydomain.com
    DocumentRoot /var/www/html/mydomain.com/staging/
</VirtualHost>

<VirtualHost 8.8.8.8:80>
    ServerName  dev.mydomain.com
    ServerAlias development.mydomain.com
    DocumentRoot /var/www/html/mydomain.com/dev/
</VirtualHost> 
```

您还可以运行`apachectl -t -D DUMP_VHOSTS`以查看 Apache 如何解析 VirtualHost 配置。

更新：正如评论中提到的，通常你可以只使用`NameVirtualHost *:80`. 所以大多数时候你可以如下配置虚拟主机。

```
NameVirtualHost         *:80

<VirtualHost *:80>
    ServerName  staging.mydomain.com
    ServerAlias stage.mydomain.com
    DocumentRoot /var/www/html/mydomain.com/staging/
</VirtualHost>

<VirtualHost *:80>
    ServerName  dev.mydomain.com
    ServerAlias development.mydomain.com
    DocumentRoot /var/www/html/mydomain.com/dev/
</VirtualHost> 
```

# android - 在原生 OpenGL ES 2.0 中使用 libGDX 的一些代码

> ID：13837988
> 
> 赞同：0
> 
> 时间：2012-12-12T10:45:02.843
> 
> 标签：android, opengl-es-2.0, libgdx

我正在尝试使用原生 OpenGL ES 2.0 创建 3D 动态壁纸。但是不使用任何类型的框架就太长了。所以我决定使用 libGDX。我想使用一些类，如，`SpriteBatch`等。如何从本机 OpenGL 初始化它？我知道 libGDX - 动态壁纸插件，但是在暂停（大约 1 秒）后恢复线程太慢了。或者，也许有人知道如何加速它。`TextureRegion``OrthographicCamera`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:20:53.530

我不认为你可以有选择地只使用 libGDX 原语而不引入 libGDX 框架的其余部分。整个原语中使用的同步和全局变量取决于框架其余部分的初始化和设置。

我认为最好弄清楚动态壁纸恢复后什么是慢的。我认为 libGDX 在这条道路上做得并不多。（它将恢复所有丢失的 OpenGL 上下文，但无论如何您都必须手动执行此操作。）

# java - 如何在每个 HTTP 请求上自动添加参数？

> ID：13837989
> 
> 赞同：4
> 
> 时间：2012-12-12T10:45:05.400
> 
> 标签：java, javascript, http, share, alfresco

出于某些特定原因，当且仅当该参数自第一次请求以来已存在于 URL 中时，我需要在每个请求上自动添加或附加参数到 URL。换句话说，如果我有 URL `/share/page/site/sample/documentlibrary?embedded`，则每个请求都`/share/page/site/sample/[whatever]`必须包含嵌入参数以及原始请求可以添加的其他参数。

我正在使用 Alfresco Share (v4.2.b) 这意味着 Web 应用程序已经存在，尽管我可以执行自定义，但我有一些限制，因为我无法完全控制它。如果它是我从头开始创建的网络应用程序，那将不是问题。根据我的限制，理想情况下，解决方案应该尽可能减少干扰。同时，如果它是基于 JavaScript 的解决方案，使用 YUI 而不是其他库是一个加分项，但不是必需的。

我一直在寻找一种方法，之后我想到了下一个可能的解决方案：

1.  通过在每个页面卸载之前将参数添加到 URL 来使用 JavaScript。就像是：

    ```
     window.onbeforeunload = function(e) {
            // Add parameter to target URL
            }; 
    ```

    但我相信它在我阅读时并根据我所做的一些测试不起作用。似乎有一种安全限制（顺便说一句，这是有道理的）。

2.  一旦页面完成加载，也可以使用 JavaScript更新`href`每个链接 ( ) 的属性。`<a/>`例如，`/share/page/site/sample/document-details?nodeRef=workspace://SpacesStore/089acea3-3b37-403d-9a8d-ae484ddd2ccb`可以转换为`/share/page/site/sample/document-details?nodeRef=workspace://SpacesStore/089acea3-3b37-403d-9a8d-ae484ddd2ccb&embedded`. 这个解决方案的问题是，使用 JavaScript 触发的 GET 或 POST 和 href 表单都超出了范围......

3.  使用任何 URL 重写技术或库，如[UrlRewriteFilter](http://tuckey.org/urlrewrite/)（还没有时间测试它，抱歉）。

4.  创建一个 Alfresco Share[扩展模块](http://docs.alfresco.com/4.1/topic/com.alfresco.enterprise.doc/concepts/Surf_v4_components_Share.html)，它可能会在模块或子组件评估器的帮助下更改或更新每个请求。我不知道扩展模块是否可行，但我相信我在任何可以对请求执行更改的地方都读到过。

我必须添加（对于那些具有 Alfresco Share 知识的人）选项 1、2 和 4 将作为扩展模块实现。

好吧，我希望我已经很好地解释了我的问题。我非常感谢一些建议或可能的方法。无论如何，我会继续努力，我会提出任何更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:03:21.490

1.  如果它适用于每个请求，那么过滤器是最好的。Share 已经像您所说的那样使用了 urlrewrite，因此请更改默认值并将您的参数添加到其中。

2.  如果您了解共享，那么覆盖包含的模板会很好：覆盖`alfresco-template.ftl`模板/org/alfresco/include 中的覆盖。生成页面时始终加载此模板。它还为 Liferay Portlet 定义了 portletMode。

3.  我们嵌入文档库所做的是定义我们自己的共享自定义页面，因此我不再需要“始终”存在的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:59:45.740

如果通过 Apache HTTPd 代理连接，使用`mod_proxy`然后使用`mod_rewrite`重定向用户请求，如果它们还没有包含强制参数呢？使用该`RewriteRule`指令，您可以指定非常丰富的表达式，如果参数不存在则添加该参数（[文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:52:08.407

没有使用过 Alfresco，但另一种选择是使用自定义 JSP 标记。

让我们称之为 customlink 然后当您在页面上呈现链接时使用此自定义 jsp 标记而不是`<a>`标记。

例如

```
<mynamespace:customlink href="/somelink">My Content</mynamespace:customlink> 
```

然后，自定义 JSP 标记可以负责检查请求中的查询字符串参数，如果存在，则将其附加到 URL 并打印带有查询字符串的标记。

这样做的好处是不依赖于 JS 或将其中的任何内容暴露给客户端。它还允许将来进一步扩展。

# php - 来自用户的最新推文，包括标签

> ID：13837990
> 
> 赞同：0
> 
> 时间：2012-12-12T10:45:07.683
> 
> 标签：php, twitter, hashtag

我有以下代码将在我的页面上显示来自用户的最新推文。

```
<div id="last-tweet" class="grid_12">
<p><b>@user: </b> <?php
$username='username'; // set user name
$format='json'; // set format
$tweet=json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline/{$username}.{$format}")); // get tweets and decode them into a variable
echo $tweet[0]->text; // show latest tweet
?></p>
</div> 
```

有谁知道我如何可以为此添加“主题标签”约束，这样它只会显示来自该用户的带有特定主题标签的推文？

谢谢dvent

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:48:33.563

您可能想使用 Twitter 的搜索 API。获取结果后，只需使用第一条推文并忽略其他推文。

**示例：**
来自用户 @MusicMagic_TBS 的推文中的标签 #nowplaying（我通过快速 Twitter 搜索找到的随机示例）

**Twitter API v1.1：**
查询：[https](https://api.twitter.com/1.1/search/tweets.json?q=%23nowplaying%20from:MusicMagic_TBS)
://api.twitter.com/1.1/search/tweets.json?q=%23nowplaying%20from:MusicMagic_TBS 文档：[https ://dev.twitter.com/docs/api/ 1.1/获取/搜索/推文](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

**Twitter API v1.0（已弃用）：**
查询：[http](http://search.twitter.com/search.json?q=%23nowplaying%20from:MusicMagic_TBS)
://search.twitter.com/search.json?q=%23nowplaying%20from:MusicMagic_TBS 文档：[https ://dev.twitter.com/docs/api/1 /获取/搜索](https://dev.twitter.com/docs/api/1/get/search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:41:54.670

[您可以使用推文实体](https://dev.twitter.com/docs/platform-objects/entities)添加主题标签约束并检查主题标签

有关更多上下文，请参阅此问题和答案：[有什么方法可以从 Twitter API 请求中获取链接、主题标签和 @names？](https://stackoverflow.com/questions/11587730/is-there-any-way-to-get-links-hashtags-and-names-from-twitter-api-requests/11597887#11597887)

`latest`可以通过过滤掉仅包含主题标签的响应并查看响应堆栈的顶部来找到带有主题标签的推文。

# r - 集成 Java 和 R

> ID：13837991
> 
> 赞同：-3
> 
> 时间：2012-12-12T10:45:09.783
> 
> 标签：r, rjava, rserve, rcaller

我一直在寻找一些第三方 jar 来做一些高级的分析过程，比如 Java 中的 SQL 窗口函数，因为我们的数据库 mysql 不支持它。在谷歌的帮助下，我发现“R”虽然不是基于 java 的，但它可以解决我的大部分情况。我试过“RJava”和“Rcaller”接口来连接java。

对于性能、可扩展性和长期运行，这是在 Java 中连接 R 的最佳库。好心劝告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:29:42.540

Assuming that "R inside Java" means calling R from Java: JRI (part of rJava) embeds R in Java. It is the most efficient way since it is a direct JNI interface. (For a deployed example see JGR).

Another alternative is Rserve which is a client/server concept. It has the penalty of serializing data between the systems, but allows parallel connections (on unix) which is not possible with JRI since R is single-threaded so it can only be run in one thread per Java process.

RCaller is the least efficient one since it simply calls R process and thus has a cold-start problem (compared to Rserve) as well as less efficient serialization.

# ios - 如何在 NSDocument 目录中创建一个文件夹，我可以在其中保存所有照片并在需要时从同一文件夹中删除数据？

> ID：13837993
> 
> 赞同：1
> 
> 时间：2012-12-12T10:45:19.987
> 
> 标签：ios, ios5, nsdocument, nsdocumentdirectory

我有一个 tableView，对于每个单元格，我得到一个图像 url 字符串，并且我将所有数据保存在 NSDocument 目录中。

我想将所有数据存储在 NSDocument 目录中创建的文件夹中，并且我还想稍后删除该文件夹中的所有内容。怎么做？

这是我正在使用的方法

```
(void)setThumbnailTo :(UITableViewCell *)cell withRefString:(NSString *)string   {

   NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 

   NSString *documentsDirectory = [paths objectAtIndex:0]; 

   NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"patientPhotoFolder"];

   NSString *imgPath = [string stringByReplacingOccurrencesOfString:@"amp;" withString:@""];

   imgPath = [imgPath stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

   NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

   NSString *key = [self sha1:imgPath];

   NSString *fileToSave = [documentsPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.jpg",key]];

   BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:fileToSave];
   if (!fileExists)
   {
       dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0ul);
        dispatch_async(queue, ^{
            NSData *imageData=[NSData dataWithContentsOfURL:[NSURL URLWithString:imgPath]];

            UIImage *image = [[UIImage alloc] initWithData:imageData];

            NSData *jpegData = UIImageJPEGRepresentation(image,4);

            [[NSFileManager defaultManager] createFileAtPath:fileToSave contents:jpegData attributes:nil];

            dispatch_sync(dispatch_get_main_queue(), ^{
               patientPhoto.image = image;
            });
        });
        patientPhoto.image = [UIImage imageNamed:@"patientPhoto.png"];
    }else{
        UIImage *image = [UIImage imageWithContentsOfFile:fileToSave];
        if(!image) image = [UIImage imageNamed:@"patientPhoto.png"];
        patientPhoto.image = image;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T11:13:05.120

如何在 Documents 目录中懒惰地创建一个名为“patientPhotoFolder”的文件夹（例如，这可能是一个类别`NSFileManager`：

```
- (NSString *)pathToPatientPhotoFolder {
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                    NSUserDomainMask,
                                                                    YES) lastObject];
    NSString *patientPhotoFolder = [documentsDirectory stringByAppendingPathComponent:@"patientPhotoFolder"];

    // Create the folder if necessary
    BOOL isDir = NO;
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    if (![fileManager fileExistsAtPath:patientPhotoFolder
                           isDirectory:&isDir] && isDir == NO) {
        [fileManager createDirectoryAtPath:patientPhotoFolder
               withIntermediateDirectories:NO
                                attributes:nil
                                     error:nil];
    }
    return patientPhotoFolder;
} 
```

如何删除该文件夹的内容（假设您将其作为类别实现`NSFileManager`）：

```
NSString *patientPhotoFolder = [[NSFileManager defaultManager] pathToPatientPhotoDirectory];
NSArray *contents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:patientPhotoFolder error:nil];
for (NSString *filename in contents)  {
    [[NSFileManager defaultManager] removeItemAtPath:[patientPhotoFolder stringByAppendingPathComponent:filename] error:NULL];
} 
```

# php - 从 PHP json 编码接收数据时出现 JSON 解析错误

> ID：13837995
> 
> 赞同：1
> 
> 时间：2012-12-12T10:45:30.050
> 
> 标签：php, ajax, json

我目前正在开发一个应用程序，它可以注入用户通过表单输入的链接、图像和其他内容。按下提交按钮后，PHP 脚本会根据表单数据生成一个数组并将其编码为 JSON。但是，使用 AJAX 调用 (jquery AJAX) 的接收 javascript 文件给了我一个解析错误。消息如下：

```
xrs.status = 200
thrown error = parsererror
xhr.statusText=OK 
```

我已经使用 jsonlint 运行了由 PHP 编码的 JSON，并且得到了 Valid JSON。我问了我的朋友，似乎没有人知道问题是什么，所以我在这里。我希望你能帮忙。下面是我正在使用的文件的代码。顺便说一句，我正在使用会话，因为用户必须登录才能在表单中输入数据。我不认为这会导致解析错误......

PHP：

```
header('Content-Type:text/json;charset=utf-8');
session_start();
if (isset($_POST["emagLinkRecomandareaZilei"])) {
$_SESSION["emagLinkRecomandareaZilei"] = $_POST["emagLinkRecomandareaZilei"];
} else {
echo "<p>eMAG product link not set</p>";
}

if (isset($_POST["emagDefaultImg"])) {
$_SESSION["emagDefaultImg"] = $_POST["emagDefaultImg"];
} else {
echo "<p>eMAG default img not set</p>";
}

if (isset($_POST["imgLinkRecomandareaZilei"])) {
$_SESSION["imgLinkRecomandareaZilei"] = $_POST["imgLinkRecomandareaZilei"];
} else {
echo "<p>eMAG image link not set</p>";
}

if (isset($_POST["specsTitle1RecomandareaZilei"])) {
$_SESSION["specsTitle1RecomandareaZilei"] = $_POST["specsTitle1RecomandareaZilei"];
} else {
echo "<p>eMAG specs title 1 not set</p>";
}

if (isset($_POST["specsTitle2RecomandareaZilei"])) {
$_SESSION["specsTitle2RecomandareaZilei"] = $_POST["specsTitle2RecomandareaZilei"];
} else {
echo "<p>eMAG specs title 2 not set</p>";
}

if (isset($_POST["specsTitle3RecomandareaZilei"])) {
$_SESSION["specsTitle3RecomandareaZilei"] = $_POST["specsTitle3RecomandareaZilei"];
} else {
echo "<p>eMAG specs title 3 not set</p>";
}

if (isset($_POST["specsDescription1RecomandareaZilei"])) {
$_SESSION["specsDescription1RecomandareaZilei"] =      $_POST["specsDescription1RecomandareaZilei"];
} else {
echo "<p>eMAG description 1 not set</p>";
}

if (isset($_POST["specsDescription2RecomandareaZilei"])) {
$_SESSION["specsDescription2RecomandareaZilei"] =   $_POST["specsDescription2RecomandareaZilei"];
} else {
echo "<p>eMAG description 2 not set</p>";
}

if (isset($_POST["specsDescription3RecomandareaZilei"])) {
$_SESSION["specsDescription3RecomandareaZilei"] = $_POST["specsDescription3RecomandareaZilei"];
} else {
echo "<p>eMAG description 3 not set</p>";
}
$productDetailsTop = array(
"emagLink" => $_SESSION["emagLinkRecomandareaZilei"],
"emagDefaultImg" => $_SESSION["emagDefaultImg"],
"imgLink" => $_SESSION["imgLinkRecomandareaZilei"],
"specsTitle1" => $_SESSION["specsTitle1RecomandareaZilei"],
"specsTitle2" => $_SESSION["specsTitle2RecomandareaZilei"],
"specsTitle3" => $_SESSION["specsTitle3RecomandareaZilei"],
"descSpecs1" => $_SESSION["specsDescription1RecomandareaZilei"],
"descSpecs2" => $_SESSION["specsDescription2RecomandareaZilei"],
"descSpecs3" => $_SESSION["specsDescription3RecomandareaZilei"],
);

echo json_encode($productDetailsTop);
exit; 
```

接收 PHP 的 json_encode 字符串的 JavaScript 文件具有以下 AJAX 调用：

```
$.ajax({
               url: urlForPHPFile,
               cache: 'false',
               method: 'GET',
               contentType: 'application/json',
               dataType: 'json',
               success: function(data){
                   imgProduct.attr('src', data.imgLink);
                   imgProduct.attr('alt', data.productTitle);
                   //titleProduct.text(data.productTitle);
                   //titleProduct.append(data.completeEmagLink);
                   linkProductEmag.attr('href', data.emagLink);
                   defaultImgEmag.attr('src', data.emagDefaultImg);

                    h4s.each(function(indexH4s){//get all the elements of the h4s array - indexH4s is used as the variable i in a for(int i=0;i<h4s.lenght;i++)
                    switch(indexH4s){
                        case 0:
                            $(this).text(data.specsTitle1);

                        break;
                        case 1:
                            $(this).text(data.specsTitle2);
                        break;
                        case 2:
                            $(this).text(data.specsTitle3);
                        break;
                        }
                    });

                    descProduct.each(function(indexDescProduct){//the same applies for the descProduct array, where indexDescProduct is used as an index
                       switch(indexDescProduct){
                           case 0:
                               $(this).text(data.descSpecs1).css('fontWeight','bold');

                           break;
                           case 1:
                               $(this).text(data.descSpecs2).css('fontWeight','bold');
                           break;
                           case 2:
                              $(this).text(data.descSpecs3).css('fontWeight','bold');
                           break;
                          } 
                      });

               },
               error: function(xhr, thrownError){
                 alert('xrs.status = ' + xhr.status + '\n' + 
                        'thrown error = ' + thrownError + '\n' +
                        'xhr.statusText = '  + xhr.statusText + '\n' 
                        );
               }
           }); 
```

还有一件非常有趣的事情发生了——我创建了一个 PHP 文件，我在其中手动填充了数组，没有用户输入，没有会话等，而且它工作得很好......下面是代码：

```
$productDetailsTop = array(
"emagLink"=>"http://profitshare.emag.ro/click.php?ad_client=cd46de6acbcb391a744848cc31896fd0&add_id=225304&redirect=monitor-led-samsung-21-5-wide-full-hd-negru-lucios-s22b150n%2Fpd%2FENS1TBBBM%2F%3Fref%3Dnl%26emag_click_id%3D41d3bb84f4e1e68fb96afbbd346dff17%26ref%3Dafs",
"emagDefaultImg"=>"http://profitshare.emag.ro/link_track.php?ad_client=cd46de6acbcb391a744848cc31896fd0&add_id=225304' alt='' border='0' width='1' height='1' style='border:none !important; margin:0px !important;",
"imgLink"=>"http://s1.emagst.ro/poze/big/img231176_29052012135325_0.jpg",
//"productTitle"=>"Tableta Google Nexus 7 cu procesor NVIDIA® Tegra® 3 Quad-Core 1.2GHz, 7, 1GB DDR3, 16GB, Wi-Fi, Android 4.1, Brown",
"specsTitle1"=>"Display",
"specsTitle2"=>"Facilitati",
"specsTitle3"=>"Caracteristici generale",
"descSpecs1"=>"3D:Nu, Tip display:LED, Diagonala:21.5 inch, Timp de raspuns:5 ms, Rezolutie optima:1920 x 1080, Tip ecran:Wide, Reproducere culori:16.7 milioane, Contrast tipic:600:1, Contrast dinamic:Mega DCR, Iluminare:200 cd/mp, Aspect imagine:16:9, Standarde:EnergyStar 5.0",
"descSpecs2"=>"Facilitati - Tuner TV:Nu, Boxe integrate: Nu",
"descSpecs3"=>"Putere consumata:30 W, Customized Key, MagicAngle, Eco Saving, Multi Screen S/W, MagicTune, MagicBright3, MagicColor",
"completeEmagLink"=>"<a href='http://profitshare.emag.ro/click.php?ad_client=cd46de6acbcb391a744848cc31896fd0&add_id=225304&redirect=monitor-led-samsung-21-5-wide-full-hd-negru-lucios-s22b150n%2Fpd%2FENS1TBBBM%2F%3Fref%3Dnl%26emag_click_id%3D41d3bb84f4e1e68fb96afbbd346dff17%26ref%3Dafs'>Monitor LED Samsung 21.5&quot;, Wide, Full HD, Negru Lucios, S22B150N</a><img src='http://profitshare.emag.ro/link_track.php?ad_client=cd46de6acbcb391a744848cc31896fd0&add_id=225304' alt='' border='0' width='1' height='1' style='border:none !important; margin:0px !important;' />"
);
header('Content-Type:text/json');
echo json_encode($productDetailsTop);
exit; 
```

我已经比较了两个 PHP 文件的 json_encode 输出，jsonlint 为我提供了它们两个的有效 JSON。我已经尝试了我能想到的一切，现在已经被这个问题困住了 2 天......如果有人知道发生了什么，请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:43:48.033

jQuery ajax 脚本：

```
method: 'GET' <=== you should change the method by ==> method: 'POST' 
```

PHP 服务器响应。

```
if (isset($_POST <==== This is the error, choose which change ====>if (isset($_GET 
```

# java - Swing：移动JPanel

> ID：13837997
> 
> 赞同：0
> 
> 时间：2012-12-12T10:45:34.190
> 
> 标签：java, swing, location, jpanel

我有 2 个 jpanels，一个用作另一个的标题。我想隐藏带有内容的面板并在单击标题时将标题向下移动（例如最小化）。我可以隐藏面板，但不能更改另一个面板的位置。这是代码：

```
 private void dbStatsLabelMouseClicked(java.awt.event.MouseEvent evt)     {                                          
    if (report1Panel.isVisible()) {
        report1Panel.setVisible(false);
        Point p = reportHeaderPanel.getLocation();
        p.y = p.y + 100;
        reportHeaderPanel.setLocation(p);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:54:05.873

您可以删除（然后在必要时添加）`report1Panel`而不是隐藏它（然后重新验证父组件） - 行为现在取决于布局。如果您提供“自动调整大小”，则您的“标题”组件应扩展为父大小。

其他解决方案是将`report1Panel`水平或垂直的大小设置为零。再次在这里 - 您应该提供“自动调整大小”功能

正如@StanislavL 提到的，您可以`JSplitPane`在标题单击时使用事件：

```
splitPane.setDividerLocation(0); //or
splitPane.setDividerLocation(1.0); 
```

# javascript - 在 jQuery 中动态使用 JSON 变量

> ID：13837998
> 
> 赞同：0
> 
> 时间：2012-12-12T10:45:33.650
> 
> 标签：javascript, jquery, ajax, json, mouseenter

我有两个 DIV，#placeholder 和 #imageLoad。当用户单击特定拇指时，其较大的版本 (thumb2) 应出现在#imageLoad DIV 中。

这是需要修复的jQuery：

```
 $.getJSON('jsonFile.json', function(data) {
        var output="<ul>";
        for (var i in data.items) {
            output+="<li><img src=images/items/" + data.items[i].thumb + ".jpg></li>";
        }
        output+="</ul>";
        document.getElementById("placeholder").innerHTML=output;
  });

  //This is wrong!! Not working..
  $('li').on({
         mouseenter: function() {
             document.getElementById("imageLoad").innerHTML="<img src=images/items/" +
             data.items[i].thumb2 + ".jpg>";
         }
  }); 
```

这是下面的外部 JSON 文件 (jsonFile.json)：

```
{"items":[
    {
        "id":"1",
        "thumb":"01_sm",
        "thumb2":"01_md"
    },
    {
        "id":"2",
        "thumb":"02_sm",
        "thumb2":"02_md"
    }
]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:52:12.163

```
$.getJSON('jsonFile.json', function(data) {
    var output="<ul>";
    for (var i = 0; i < data.items.length; i++) {
        output += "<li><img thumb2='" + data.items[i].thumb2 + "' src='images/items/" + data.items[i].thumb + ".jpg'></li>";
    }
    output += "</ul>";
    $("#placeholder").html(output);

    $('li').on({
        mouseenter: function() {
            $("#imageLoad").html("<img src='images/items/" + $(this).find('img').attr('thumb2') + ".jpg'>");
        }
    });   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:48:29.470

您的变量数据仅在 getJSON 调用的回调函数中声明，因此在其他方法/事件处理程序中不可用。获取时将其存储到全局变量中。如下：

变量全局数据；

```
$.getJSON('jsonFile.json', function(data) {
    globalData = data;
    var output="<ul>";
    for (var i in data.items) {
        output+="<li id=\"listItem" + i + "\"><img src=images/items/" + data.items[i].thumb + ".jpg></li>";
    }
    output+="</ul>";
    document.getElementById("placeholder").innerHTML=output;
});

//This is wrong!! Not working..
$('li').on({
     mouseenter: function() {
         var index = parseInt($(this).attr('id').substring(8));
         document.getElementById("imageLoad").innerHTML="<img src=images/items/" +
         globalData.items[index].thumb2 + ".jpg>";
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:01:43.720

首先，是异步的，因此在附加事件处理程序时元素不存在`$.getJSON`，因此在 async 函数之后的 mouseenter 绑定将不起作用。`li`其次，将第二个图像源存储在每个 li 元素的数据属性中，然后在 mouseenter 函数中检索该数据属性：

```
$.getJSON('jsonFile.json', function(data) {
    var out = $("<ul />");
    for (var i in data.items) {
        $('<li />', {
            src: 'images/items/' + data.items[i].thumb + '.jpg'
        }).data('big', data.items[i].thumb2).appendTo(out);
    }
    $("#placeholder").html(out);
});

$('#placeholder').on('mouseenter', 'li', function() {
    var bigImg = $('<img />', {
        src: 'images/items/' + $(this).data('big') + '.jpg'
    });
    $("#imageLoad").html(bigImg);
});​ 
```