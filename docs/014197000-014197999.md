# StackOverflow 问答 14197000-14197999

# python - 如何在python中重定向函数的打印输出

> ID：14197009
> 
> 赞同：8
> 
> 时间：2013-01-07T13:31:06.100
> 
> 标签：python, function, printing, stdout

> **可能重复：**
> [我可以将 python 中的标准输出重定向到某种字符串缓冲区吗？](https://stackoverflow.com/questions/1218933/can-i-redirect-the-stdout-in-python-into-some-sort-of-string-buffer)

我在 python 中有一个函数，可以将某些内容打印到标准输出

```
def foo():
    print("some text") 
```

我想将在这个函数中打印的文本“重定向”到一个变量中，即“包装”这个函数或其他任何东西，以便将文本存储在一个变量中：

```
text = wrapper(foo) 
```

是否有一种可靠的方法来临时更改`sys.stdout`或将变量打开为 a`FileObject`或其他？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-07T13:35:09.743

对于 python3.4+，标准库中有一个上下文管理器。

```
with contextlib.redirect_stdout(file_like_object):
    ... 
```

* * *

*这部分答案已更新，但主要适用于仍然停留在 python2.x 世界中的人*

如果您被困在较旧版本的 python 上，那么您自己编写这个上下文管理器并不难。关键是您可以更新`sys.stdout`为您想要的任何类似文件的对象（这就是`print`写入的内容）：

```
>>> import sys
>>> import StringIO
>>> stdout = sys.stdout  # keep a handle on the real standard output
>>> sys.stdout = StringIO.StringIO() # Choose a file-like object to write to
>>> foo() 
>>> sys.stdout = stdout
>>> foo()
bar 
```

创建[上下文管理器](http://docs.python.org/2/reference/datamodel.html#context-managers)以在您进入上下文时将标准输出设置为您想要的任何内容，然后让上下文管理器在您进入上下文时重置标准输出`__exit__`。

`contextlib`这是一个用于创建上下文管理器的简单示例：

```
import contextlib
import sys

@contextlib.contextmanager
def stdout_redirect(where):
    sys.stdout = where
    try:
        yield where
    finally:
        sys.stdout = sys.__stdout__

def foo():
    print 'bar'

# Examples with StringIO
import StringIO

with stdout_redirect(StringIO.StringIO()) as new_stdout:
    foo()

new_stdout.seek(0)
print "data from new_stdout:",new_stdout.read()

new_stdout1 = StringIO.StringIO()
with stdout_redirect(new_stdout1):
    foo()

new_stdout1.seek(0)
print "data from new_stdout1:",new_stdout1.read()

# Now with a file object:
with open('new_stdout') as f:
    with stdout_redirect(f):
        foo()

# Just to prove that we actually did put stdout back as we were supposed to
print "Now calling foo without context"
foo() 
```

笔记：

在 python3.x 上，`StringIO.StringIO`已移至`io.StringIO`. 此外，在 python2.x 上，`cStringIO.StringIO`性能可能会稍高一些。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T13:36:28.397

在 Python 3.x 中，您只需重新定义`print`.

```
B = []

def print(str):
    global B
    B.append(str)

def A():
    print("example")

A()

>>> B
['example'] 
```

如果由于某种原因，您需要内置打印功能，只需执行以下操作：

```
from builtins import print 
```

# codeigniter - 使用ajax jquery的codeigniter分页

> ID：14197010
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:31:09.893
> 
> 标签：codeigniter, jquery, pagination

如何使用 Ajax 在 codeigniter 中创建分页？我知道如何创建简单的分页，但我正在努力如何使用 ajax 创建这个东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:51:10.830

我碰巧偶然发现了这个伟大的项目，它将您的分页转换为 Ajax，而无需对您的 PHP 文件进行太多编码。

如果你不介意“滚动加载”，你可以试试[http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin](http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin)

即使您不喜欢滚动加载，它也应该为您提供 ajax 分页背后的一些想法。

# ios - 如何使用 AddThis SDK 将 AddThis 集成到 iPhone 应用程序中？

> ID：14197011
> 
> 赞同：-2
> 
> 时间：2013-01-07T13:31:11.313
> 
> 标签：ios

请提供下载 AddThis SDK 的链接。请告诉我如何将 AddThis SDK 集成到 iOS 应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:39:21.387

这个[addThis Doku](http://support.addthis.com/customer/portal/articles/381270-addthis-for-ios-quick-start-guide#.UOrPvdf2Qcu)应该可以帮助你。第 3 部分应该回答您的问题。

# mysql - 选择获取mysql中的数据

> ID：14197018
> 
> 赞同：1
> 
> 时间：2013-01-07T13:31:34.137
> 
> 标签：mysql, sql, logic

我的表结构

```
id     name 

1      bhagi
1      user
1      amit
1      sumit
2      bhagi
2      chinmay
2      sumit
3      rashmi
3      RBS
4      sumit
4      amit
4      bhagi
4      rashmi
4      RBS 
```

我要结果

```
id     name     result

1      bhagi    1/4(position of bhagi for id 1(1) / no of time that id is present(4))
1      user     2/4
1      amit     3/4
2      bhagi    1/3
2      chinmay  2/3
3      rashmi   1/2
4      sumit    1/5
4      amit     2/5
4      bhagi    3/5
4      rashmi   4/5 
```

我的要求是获取结果列

示例：对于 ID 1

现在有 4 个 id bhagi、user、amit 和 sumit

对于 bhagi，结果将是 1/4（因为 bhagi 在 db 中的位置是 1，并且存在的 id 1 的编号是 4）对于其他人来说类似

当结果为 1 时我想忽略。

我试过但不知道要计算分母部分。表示 id 出现的次数。

[编辑]

我努力了

```
 select id,
   name,
   IF(@LAST=(@LAST:=id), @CURROW := @CURROW + 1, @CURROW:=1) AS ROW_NUMBER
 FROM FEEDBACK_STORE 
 JOIN (SELECT @CURROW := 0, @LAST:=0) R 
```

它的给出结果

```
id    name   row_number

1     bhagi    1
1     user     2
1     amit     3
1     sumit    4
2     bhagi    1
2     chinmay  2
2     sumit    3
3     rashmi   1
3     RBS      2
4     sumit    1
4     amit     2
4     bhagi    3
4     rashmi   4
4     RBS      5 
```

我只需要分母部分的 id 例如：对于 id 1-4 ，对于 id 2-3，对于 id 3-2，对于 id 4-5

[/编辑]

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:49:02.443

您可以使用子查询来计算具有相同 id 和较小或相等名称的行数：

```
select  t1.id
,       t1.name
,       concat(
        (
        select  count(*)
        from    Table1 t2
        where   t1.id = t2.id
                and t2.name <= t1.name
        ), '/', total.cnt)
from    Table1 t1
join    (
        select   id
        ,        count(*) as cnt
        from     Table1
        group by
                 id
        ) as total
on      t1.id = total.id
order by
        t1.id
,       t1.name 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/5b091/5/0)

或者，使用更快但更脏的变量技巧：

```
select  t1.id
,       t1.name
,       concat(
            if(@last=(@last:=t1.id), @cur:=@cur+1, @cur:=1),
            '/',
            total.cnt)
from    Table1 t1
join    (
        select @cur := 0, @last:=0
        ) r
join    (
        select   id
        ,        count(*) as cnt
        from     Table1
        group by
                 id
        ) as total
on      t1.id = total.id 
```

[同样在 SQL Fiddle。](http://sqlfiddle.com/#!2/5b091/9/0)

# ruby-on-rails - 如果我尝试制作计数器缓存，为什么会出现此错误？

> ID：14197021
> 
> 赞同：3
> 
> 时间：2013-01-07T13:31:38.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, counter-cache

我正在使用`Rails 3.2.6`. 当我尝试制作**计数器缓存**时，我以某种方式收到此错误。
我怎样才能解决这个问题？我在这个应用程序上做了同样的事情，但在这个模型上没有。
我的代码或关联有什么问题？

**命令** `bundle exec rake db:migrate`

**日志**

```
==  AddCommunityTopicsCountToCommunity: migrating =============================
-- add_column(:communities, :community_topics_count, :integer, {:default=>0})
   -> 0.0635s
rake aborted!
An error has occurred, all later migrations canceled:

community_topics_count is marked as readonly 
```

**模型/社区.rb**

```
...
has_many :community_topics
... 
```

**模型/community_topic.rb**

```
...
belongs_to :community, counter_cache: true
... 
```

**迁移文件**

```
class AddCommunityTopicsCountToCommunity < ActiveRecord::Migration
  def up
    add_column :communities, :community_topics_count, :integer, :default => 0

    Community.reset_column_information
    Community.all.each do |p|
      p.update_attribute :community_topics_count, p.community_topics.length
    end
  end

  def down
    remove_column :communities, :community_topics_count
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:48:37.687

```
class AddCommunityTopicsCountToCommunity < ActiveRecord::Migration
  def up
    add_column :communities, :community_topics_count, :integer, :default => 0

    Community.reset_column_information
    Community.all.each do |c|
      Community.reset_counters(c.id, :community_topics)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T13:34:06.180

添加 时`conter_cache`，无法使用 Rails 对其进行更新，默认情况下将其设置为只读。

你可以通过替换来绕过这个`updated_attribute`，`update_column`它会跳过任何验证或回调。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T13:42:13.897

`conter_cache`有自己的处理方法，查看[文档](http://api.rubyonrails.org/classes/ActiveRecord/CounterCache.html)了解详情。

在您的情况下，您可以使用类似的东西

```
Community.all.each do |p|
  Community.reset_counters(p.id, :community_topics)
end 
```

# android - 加速度计，方向无法启动：未知错误

> ID：14197026
> 
> 赞同：2
> 
> 时间：2013-01-07T13:32:08.583
> 
> 标签：android

我有**摩托罗拉 Milestone xt720 (android 2.1)**，其中方向不能自动工作，但如果我启用它并且屏幕处于横向模式，那么它会一直保持在横向模式..所以必须手动禁用它才能恢复正常模式。

使用**AndroSensor**检查它报告： **加速度计：启动失败：未知错误**

**方向：启动失败：未知错误**

那么这是硬件问题还是某些应用程序问题？

# xml - 忽略 xslt 模板内容中的空格

> ID：14197028
> 
> 赞同：1
> 
> 时间：2013-01-07T13:32:10.450
> 
> 标签：xml, xslt, msxsl

在使用 XSLT 时，有很多关于忽略源 XML 数据中的空格的问题，但我真正想要的是在 XSLT 模板中包含空格（为了便于阅读），但不让它输出。用空格编写模板，然后将其转换为没有空格的新模板会使事情变得非常复杂，我想要一个替代方案。作为澄清，当我有 XML 片段时

```
<CAInfo prefix="073" serial="12345675" orig="AMS" dest="BRU" issuedate="2012-12-20" currency="EUR">
    <RevisedWeight code="K" amt="140.5"/>
    <OriginalWeight code="K" amt="2"/>
</CAInfo> 
```

我想输出

PRE/114-12345675AMSBRU/K140.5/K2/2012-12-20/EUR

我现在正在使用

```
<xsl:template match="CAInfo">
PRE/<xsl:value-of select="@prefix"/>-<xsl:value-of select="@serial"/><xsl:value-of select="@orig"/><xsl:value-of select="@dest"/>/<xsl:value-of select="RevisedWeight/@code"/><xsl:value-of select="RevisedWeight/@amt"/>/<xsl:value-of select="OriginalWeight/@code"/><xsl:value-of select="OriginalWeight/@amt"/>/<xsl:value-of select="@issuedate"/>/<xsl:value-of select="@currency"/>
</xsl:template> 
```

我更愿意使用的是

```
<xsl:template match="CAInfo">
PRE/<xsl:value-of select="@prefix"/>-<xsl:value-of select="@serial"/>
<xsl:value-of select="@orig"/><xsl:value-of select="@dest"/>
/<xsl:value-of select="RevisedWeight/@code"/><xsl:value-of select="RevisedWeight/@amt"/>
/<xsl:value-of select="OriginalWeight/@code"/><xsl:value-of select="OriginalWeight/@amt"/>
/<xsl:value-of select="@issuedate"/>
/<xsl:value-of select="@currency"/>
</xsl:template> 
```

但这会给我额外的输出换行符。我该如何避免这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:43:06.803

怎么样：

```
<xsl:template match="CAInfo">
  <xsl:value-of select="concat('PRE/', @prefix, '-', @serial, '/', @orig, @dest, '/',
      RevisedWeight/@code, RevisedWeight/@amt, '/', OriginalWeight/@code, 
      OriginalWeight/@amt, '/', @issuedate, '/', @currency)"/>
</xsl:template> 
```

# php - 循环模板变量的逻辑

> ID：14197031
> 
> 赞同：0
> 
> 时间：2013-01-07T13:32:18.367
> 
> 标签：php, templates

我正在尝试开始在我的脚本中使用模板，但是我在循环遍历模板中的变量时遇到了问题。我创建了一个简单的模板脚本，我的问题是它只替换了我的 1 个变量而不是所有变量。如果我使用`.=`问题仍然存在（我当时只替换 1 个变量）。任何人都可以帮助我了解我的脚本逻辑吗？

我的 PHP

```
<?php
$data= array('uno'=>'1','dos'=>'2','tres'=>'3','cuatro'=>'4','cinco'=>'5');

function tpl ($data,$tpl = null) {

    foreach ( $data as $find => $replace ) {
            $return = str_replace('{'.$find.'}',$replace,$tpl);
    }

    return $return;
}

echo tpl($data, file_get_contents('tpl.tpl'));
?> 
```

我的 HTML 模板

```
<html>
<h1>{uno}</h1>
<h2>{dos}</h2>
<h3>{tres}</h3>
<h4>{cuatro}</h4>
<h5>{cinco}</h5>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:36:32.063

简单的问题，您总是从`$tpl`数据中的替换开始。总是重写变量内容：

```
function tpl ($data,$tpl = null) {

    $return  = $tpl; // this will be in foreach and will get rewritten.
    foreach ( $data as $find => $replace ) {
            $return = str_replace('{'.$find.'}', $replace, $return); // note $return from here
    }

    return $return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:40:28.437

代码中的问题是，您总是在 $tpl 变量的新副本中替换数据，这就是为什么您只看到一个变量被替换的原因。您必须在每次替换后更新 $tpl 变量，以便替换所有变量。

进行以下更改以解决此问题

```
foreach ( $data as $find => $replace ) {
        $tpl = str_replace('{'.$find.'}',$replace,$tpl);
}

return $tpl; 
```

这将解决您的问题。

# css - Ruby On Rails form_for 复选框太小

> ID：14197033
> 
> 赞同：2
> 
> 时间：2013-01-07T13:32:23.670
> 
> 标签：css, ruby-on-rails, ruby, twitter-bootstrap, form-for

`checkbox`我在我的表单中格式化 a 时遇到问题。

它目前在我的表格中看起来非常小，我不知道如何让它变大。

代码如下：

```
<%= f.label :email %>   <%= f.email_field :email %>

<%= f.label :password %>   <%= f.password_field :password %>

<%= f.label :remember_me %>     <%= f.check_box :remember_me %> 
```

也许这是一个我可以用 CSS 解决的问题，但目前我的其他字段没有使用任何..

只是更多信息，我正在使用 twitter bootstrap，因此任何使用它的解决方案都可以很好地工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:41:42.460

添加 CSS 类和样式选项。

```
<%= f.check_box :remember_me, :class => "css_class" %>

<%= f.check_box :remember_me, :style => "width: 50px; height: 50px;" %> 
```

可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:44:02.543

您可以使用 CSS 解决它。在您的 css 文件中添加：

```
input[type='checkbox'] {
   width: 50px;
   height: 50px;
} 
```

根据您的需要调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:52:14.997

如前所述，只需使用 css 更改复选框的默认大小 -

```
Checkbox code:

<%= f.check_box :remember_me, :class => "css_class" %>

CSS code:

<style type="text/css">
input.css_class
{
width: 30px;
height: 30px;
}
</style> 
```

# ios - 带有 PHP 脚本的 Apple 推送通知不起作用？

> ID：14197034
> 
> 赞同：1
> 
> 时间：2013-01-07T13:32:32.327
> 
> 标签：ios, apple-push-notifications

当我在终端上运行以下脚本时，它会给出错误：

```
Warning: stream_socket_client(): SSL operation failed with code 1\. OpenSSL Error messages:
error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure in
/Applications/MAMP/htdocs/SimplePush/simplepush.php on line 21

Warning: stream_socket_client(): Failed to enable crypto in /Applications/MAMP/htdocs/SimplePush/
simplepush.php on line 21

Warning: stream_socket_client(): unable to connect to ssl://gateway.push.apple.com:2195
(Unknown error) in /Applications/MAMP/htdocs/SimplePush/simplepush.php on line 21
Failed to connect: 0 
```

这是代码：

```
<?php

// Put your device token here (without spaces):
$deviceToken = '*******';

// Put your private key's passphrase here:
$passphrase = '***';

// Put your alert message here:
$message = 'Want more credits!';

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
'ssl://gateway.push.apple.com:2195', $err,
$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
'alert' => $message,
'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) .     $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:38:56.033

由于听起来您正在使用开发证书，因此您可能想尝试指向： `gateway.sandbox.push.apple.com:2195`. 该 URL`gateway.push.apple.com:2195`用于生产证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T07:16:37.347

老问题，但我遇到了同样的问题。我通过更改以下代码解决了这个问题：

```
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem'); 
```

至

```
stream_context_set_option($ctx, 'ssl', 'local_cert', '/Users/Ohemod/Desktop/ck.pem'); 
```

该脚本正在寻找 ck.pem 文件，但由于没有提供实际目录，我每次都收到错误消息。如果有人遇到同样的问题，请尝试第二个。记住你的文件目录和我的代码目录不一样。放置 ck.pem 文件的实际目录链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T09:47:43.160

[从https://curl.haxx.se/ca/cacert.pem](https://curl.haxx.se/ca/cacert.pem)下载 cacert.pem并将其保存在 PHP 脚本可用的同一文件夹中。

包括语句 stream_context_set_option($ctx, 'ssl', 'cafile', 'cacert.pem'); 在 $ctx = stream_context_create(); 之后

供参考：

语法：bool stream_context_set_option（资源 $stream_or_context ，字符串 $wrapper ，字符串 $option ，混合 $value ）

有关其他选项，请查看[http://php.net/manual/en/context.ssl.php](http://php.net/manual/en/context.ssl.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T21:11:25.687

我就这样使用了你的脚本，我找到的解决方案是在 php 脚本中从 CURL 调用中调用它：

这是对我有用的代码。记得通过 HTTPS 调用它

**脚本 1（通过 CURL 调用）：**

```
// set post fields
    $post = [
        'mensaje' => 'THE MESSAGE TO SEND',
        'device_id' => $device_id,
    ];

    $ch = curl_init('https://www.DOMAIN/push-curl-script.php');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    $response = curl_exec($ch);
    curl_close($ch); 
```

**推-卷曲-script.php：**

```
 $certificado_push   = "*****.pem";

    // Put your device token here (without spaces):
    $deviceToken        = $_POST["device_id"];

    // Put your private key's passphrase here:
    $passphrase         = '***';

    // Put your alert message here:
    $message            = $_POST["mensaje"];

    $ctx = stream_context_create();
    stream_context_set_option($ctx, 'ssl', 'local_cert', $certificado_push);
    stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

    // Open a connection to the APNS server
    $fp = stream_socket_client(
    'ssl://gateway.'.($sandbox ? 'sandbox.' : '').'push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

    if (!$fp) {
            echo "Failed to connect: $err $errstr" ;
    }else{    
            echo 'Connected to APNS'  ;

            // Create the payload body
            $body['aps'] = array(
            'alert' => $message,
            'sound' => 'default'
            );

            // Encode the payload as JSON
            $payload = json_encode($body);

            // Build the binary notification
            $msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) .     $payload;

            // Send it to the server
            $result = fwrite($fp, $msg, strlen($msg));

            if (!$result) {
                echo 'Message not delivered' ;
            }else{
                echo 'Message successfully delivered' ;
            }

            // Close the connection to the server
            fclose($fp);
     } 
```

# eclipse - 编译代码时Eclipse中的错误，但在验证时没有

> ID：14197037
> 
> 赞同：0
> 
> 时间：2013-01-07T13:32:34.560
> 
> 标签：eclipse, testing, helios

我有 Eclipse Java EE IDE Helios Service Release 2 Build id：20110218-0911；我正在尝试将它们与 SeleniumRC 一起使用，当我编译代码时出现下一条错误消息：

*   类型不匹配：无法从 DataProviderSites 转换为注释
*   注释类型 Test 的属性 DataProviderSites 未定义

但是，当我验证代码时，可以看到“验证完成且没有错误或警告”

DataProviderSites.java 中的代码是：

打包脚本；

```
import org.junit.Test;                   
import junit.framework.TestCase;

import com.thoughtworks.selenium.SeleneseTestBase;
import org.junit.AfterClass;
import org.openqa.selenium.server.SeleniumServer;
import org.testng.annotations.*;
import java.io.File;
import jxl.*; 

public class DataProviderSites extends SeleneseTestBase {

    @BeforeClass
    public void setUp() throws Exception {
        SeleniumServer seleniumserver=new SeleniumServer();
        seleniumserver.boot();
        seleniumserver.start();
        setUp("http://www.examinator.ws/", "*firefox");
        selenium.open("/");
        selenium.windowMaximize();
        selenium.windowFocus();
    }

    @DataProviderSites
    (name = "DPS1")
    public Object[][] createData1() throws Exception{
        Object[][] retObjArr=getTableArray("test\\Resources\\Data\\sitios.xls",
                "DataPool", "TestData");
        return(retObjArr);
    }

    @Test(DataProviderSites = "DPS1")

        public void testDataProviderSites(String nombre) throws Exception {    
        selenium.type("sitio", nombre);
        if (selenium.isTextPresent("examinator"))
            selenium.click("xpath=/descendant::button[@type='submit']");

        else

        selenium.waitForPageToLoad("30000");

        selenium.click("xpath=/descendant::a[text()='"+nombre+"']");

        }

    @AfterClass
    public void tearDown(){
        selenium.close();
        selenium.stop();
    } 

    public String[][] getTableArray(String xlFilePath, String sheetName, String tableName) throws Exception{
        String[][] tabArray=null;

            Workbook workbook = Workbook.getWorkbook(new File(xlFilePath));
            Sheet sheet = workbook.getSheet(sheetName); 
            int startRow,startCol, endRow, endCol,ci,cj;
            Cell tableStart=sheet.findCell(tableName);
            startRow=tableStart.getRow();
            startCol=tableStart.getColumn();

            Cell tableEnd= sheet.findCell(tableName, startCol+1,startRow+1, 100, 64000,  false);                

            endRow=tableEnd.getRow();
            endCol=tableEnd.getColumn();
            System.out.println("startRow="+startRow+", endRow="+endRow+", " +
                    "startCol="+startCol+", endCol="+endCol);
            tabArray=new String[endRow-startRow-1][endCol-startCol-1];
            ci=0;

            for (int i=startRow+1;i<endRow;i++,ci++){
                cj=0;
                for (int j=startCol+1;j<endCol;j++,cj++){
                    tabArray[ci][cj]=sheet.getCell(j,i).getContents();
                }
            }

        return(tabArray);
    }
} 
```

有人有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T07:44:13.750

只需单击错误并单击**“Convert to TestNG(Annotations)”**。

![解决方案列表](../Images/fdb658bd872018a461ed441a0c284995.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:46:33.277

验证不检查逻辑，就像它不检查代码的语法一样。但是当我们编译程序时，它会检查语法，所以你会遇到类型转换异常。

验证成功并不意味着程序是正确的。

我认为 annotations(@Test(DataProviderSites = "DPS1"), @DataProviderSites (name = "DPS1")) 会导致异常。

# windows-8 - Windows 8 \ Metro 风格的应用程序可以执行预定的操作吗？

> ID：14197038
> 
> 赞同：1
> 
> 时间：2013-01-07T13:32:36.550
> 
> 标签：windows-8, microsoft-metro

简短的概要是，我希望我的 Windows 8 应用程序能够启动并运行某些东西，而无需用户启动它。这甚至可能吗？

更详细一点：我刚刚开始进行 Windows 8 开发（我目前的背景是 C# 和 WPF\ASP.NET），而我想编写的应用程序的要求之一是自动代表执行任务以预先安排的时间间隔访问用户，无论用户是否打开了应用程序。它们在特定时间发生并不是那么重要，因此如果他们的设备关闭，它可以在重新打开时发生。当事件发生时，我希望它向用户提供事件发生的某种通知，并且进一步好奇我在这方面的选择是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:46:24.480

是的，您可以在 Windows 应用商店应用程序中安排后台任务。它们确实有一些限制，所以一定要仔细阅读。例如，Windows 8 将限制您的应用程序的处理时间，以及您的应用程序可以进行的联网数量。

在此处查看更多信息：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/05/24/being-productive-in-the-background-background-tasks.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/24/being-productive-in-the-background-background-tasks.aspx)

# jquery - jqGrid第一列数据未显示

> ID：14197039
> 
> 赞同：1
> 
> 时间：2013-01-07T13:32:38.033
> 
> 标签：jquery, jqgrid

我正在使用这个示例代码来创建一个网格。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SubGrid Real Data</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.2/css/ui.jqgrid.css" />
<style>
    .groupColumn {
            background-color: #E3E3D7 !important;
            border: 1px solid #F4F4e5;
            font-weight: bold; !important;
    }
    .lockedColumn {
            background-color: #E3E3D7 !important;
            border: 1px solid #F4F4e5;
    }
    .ui-jqgrid .ui-subgrid td.subgrid-data {
        border-top: 0 none !important;
        border-right: 0 none !important;
        border-bottom: 0 none !important;
    }

</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
<script type="text/javascript">
    $.jgrid.no_legacy_api = true;
    $.jgrid.useJSON = true;
</script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.src.js"></script>

<script type="text/javascript">
//<![CDATA[
    /*global $ */
    /*jslint browser: true, eqeq: true, plusplus: true */
    $(function () {
        "use strict";
        var colModelData =[{"classes":"groupColumn","name":"Name","frozen":true,"editable":false},{"width":"120","name":"24394","editable":false},{"width":"120","name":"24390","editable":false},{"width":"120","name":"24387","editable":false},{"width":"120","name":"24386","editable":false},{"width":"120","name":"24385","editable":false},{"width":"120","name":"24383","editable":false},{"width":"120","name":"24369","editable":false},{"width":"120","name":"24306","editable":false}],
            colNamesArray = ["Name","12/21/2012","12/10/2012","12/03/2012","11/27/2012","11/15/2012","11/12/2012","11/09/2012","10/15/2012"],
         myData = [{"id":"group1","subGridData":[{"id":"child1","24369":"","24387":"","24394":"138 lb 200 oz","24306":"138","24390":"138 lb 100 oz","name":"Weight","24385":"","24386":"138 lb 750 oz","24383":""},{"id":"child8","24369":"","24387":"","24394":"Test Note","24306":"","24390":"","name":"Notes","24385":"","24386":"","24383":""}],"name":"Miscellaneous"}];
        var mainGridPrefix = "s_";
        $("#list").jqGrid({
            datatype: "local",
            data: myData,
            colNames: colNamesArray,
            colModel: colModelData,
            gridview: true,
            height: "100%",
            width: "100%",
            caption: "Create subgrid from local data",
            subGrid: true,
             subGridOptions: {
                    reloadOnExpand: false
                    /*selectOnExpand: true,
                    openicon: ""*/
                },
            subGridRowExpanded: function (subgridDivId, parentRowId) {
                    var $subgrid = $("<table id='" + subgridDivId + "_t'></table>");
                    $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
                    var data = $(this).jqGrid("getLocalRow", parentRowId);
                    $subgrid.jqGrid({
                            datatype: "local",
                            data: $(this).jqGrid("getLocalRow", parentRowId).subGridData,
                            colModel:colModelData,
                            height: "100%",
                            autoencode: true,
                            gridview: true,
                            idPrefix: parentRowId + "_"
                    });
            $subgrid.closest("div.ui-jqgrid-view")
                    .children("div.ui-jqgrid-hdiv").hide();
        }   

        });

        //$("#list").jqGrid("toggleSubGridRow", 'm1');
        //$("#list").jqGrid("toggleSubGridRow", 'm3');
    });
//]]>
</script> 
```

除了第一列之外，其他列的值正在显示。它似乎有小问题，但它让我发疯。

输出：

![在此处输入图像描述](../Images/9669350560e4ce54bcba5add5eeff498.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:00:29.583

您只需更改`"name":"Name"`为`"name":"name"`in，`colModelData`因为您使用`name`数据中的属性 ( `"name":"Miscellaneous"`, `"name":"Weight"`, `"name":"Notes"`)。更改代码的一个字符的大小写后，问题将得到解决

![在此处输入图像描述](../Images/38dcefb2ec940890dec0bf4899d8dc9a.png)

（见[演示](http://www.ok-soft-gmbh.com/jqGrid/HardikMishra.htm)）

# c# - 如何检查用户是否更改了表单

> ID：14197044
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:33:07.780
> 
> 标签：c#, asp.net, textbox

我正在使用 Asp.Net 和 C# 以及`.aspx`用户应填写的不同文件中的多个表单。

用户保存表单后，它应该保持填写状态，以便用户有机会根据需要进行一些更改。

我想允许用户通过单击“保存”按钮进行更改，但如果案例（表单）已经保存，我想在数据库中相同的相应案例上覆盖它们。

但是，检查用户是否进行这些更改的最佳方法是什么？

1.  我应该将当前值与数据库中存储的值进行比较吗？
2.  我应该考虑每个文本框的 TextChanged 操作吗？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:45:45.087

将您拥有的数据与数据库数据进行比较是一种方法。

另一种方法是使用属性[How to: Set HTML Attributes for Controls in ASP.NET Web Pages](http://msdn.microsoft.com/en-us/library/7a9d6h4f%28v=vs.100%29.aspx)

因此，在您的代码中，您将执行以下操作：

```
myTextBox.Text = "ABC";
myTextBox.Attributes.Add("myTextBoxOriginalText", myTextBox.Text); 
```

现在，当您从客户端取回数据时，您可以使用新值检查属性值

```
if (myTextBox.Attributes["myTextBoxOriginalText"] != myTextBox.Text)
{
  // Do some work
} 
```

使用属性，您可以使用 JavaScript 在客户端检查更改，因为您有原始值和新值，如果有一些更改，则向服务器发送附加标志。

# c - 线性/非线性拟合正弦曲线

> ID：14197045
> 
> 赞同：16
> 
> 时间：2013-01-07T13:33:10.097
> 
> 标签：c, algorithm, curve-fitting

我看过[这个](https://stackoverflow.com/questions/11754006/finding-curves-in-a-dataset/11757065#11757065)和[这个](https://stackoverflow.com/questions/3484615/which-algorithm-will-be-required-to-do-this/3484635#3484635)。

但我有一个稍微不同的问题。我*知道*我的数据是一条正弦曲线，具有未知周期和未知幅度，具有加性非高斯分布噪声。

我正在尝试使用 C 中的[GSL](http://www.gnu.org/software/gsl/)非线性算法来拟合它，但拟合绝对是糟糕的。我想知道我是否（错误地）使用了非线性拟合算法，而我应该使用线性拟合算法？

如何判断特定数据集是否需要线性或非线性算法？

**编辑：**我的曲线*真的*很吵，所以用 FFT 来计算频率可能会导致误报和不合适的结果。我正在寻找一种更稳健的拟合方式。

![约 170 点的曲线](../Images/451393f480210ce7f52989291eb543cc.png)

如您所见，上面的图大约有 170 个点，下面的图有大约 790 个点。

![在此处输入图像描述](../Images/1e56d389f7ccbcc5e397ac102a8f0ece.png)

噪声明显是非高斯的，并且与数据的幅度相比很大。我已经在高斯分布的噪声上尝试过 FFT，我的配合非常好。在这里，它的失败非常严重。

**添加：**链接到[第一个](http://pastebin.com/PkzHL1Uz)时间序列数据。文件中的每一列都是不同的时间序列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T17:11:25.670

如果您知道您的数据是正弦曲线（可以表示为多个复指数），那么您可以使用 Pisarkenko 的谐波分解；[http://en.wikipedia.org/wiki/Pisarenko_harmonic_decomposition](http://en.wikipedia.org/wiki/Pisarenko_harmonic_decomposition)

但是，如果您可以访问更多数据点，我的方法仍然是使用 DFT。

**更新：**

我对您的数据使用了 Pisarenko 的谐波分解 (PHD)，即使您的信号非常短（每个只有 86 个数据点），如果有更多可用数据，PHD 算法肯定有潜力。下面包括 24 个信号中的两个（数据的第 11 和 13 列），用蓝色表示，红色的正弦曲线对应于 PHD 估计的幅度/频率值。（注意相移是未知的）

![第 11 列中的数据图](../Images/295d357e3957c555c6f664d7f8c47874.png) ![第 13 列中的数据图](../Images/efca6832ddb55df0d96a27ae15b90fd8.png)

我使用 MATLAB (pisar.m) 来执行 PHD： http: [//www.mathworks.com/matlabcentral/fileexchange/74](http://www.mathworks.com/matlabcentral/fileexchange/74)

```
% assume data is one single sine curve (in noise)
SIN_NUM = 1; 

for DATA_COLUMN = 1:24
    % obtain amplitude (A), and frequency (f = w/2*pi) estimate
    [A f]=pisar(data(:,DATA_COLUMN),SIN_NUM);

    % recreated signal from A, f estimate
    t = 0:length(data(:,DATA_COLUMN))-1;
    y = A*cos(2*pi*f*t);

    % plot original/recreated signal
    figure; plot(data(:,DATA_COLUMN)); hold on; plot(y,'r')
    title({'data column ',num2str(DATA_COLUMN)});

    disp(A)
    disp(f)
end 
```

这导致

```
1.9727     % amp. for  column 11
0.1323     % freq. for column 11
2.3231     % amp. for  column 13
0.1641     % freq. for column 13 
```

**验证博士：**

我还进行了另一项测试，我知道幅度和频率的值，然后添加噪声以查看 PHD 是否可以从噪声信号中正确估计值。该信号由两条添加的正弦曲线组成，频率分别为 50 Hz、120 Hz，幅度分别为 0.7、1.0。下图中，红色曲线是原始曲线，蓝色曲线是添加了噪点的曲线。（图被裁剪）

![PHD精度测试](../Images/9259bd3fde7e0cb72cc718d92feec5dd.png)

```
Fs = 1000; % Sampling frequency
T = 1/Fs; % Sample time
L = 1000; % Length of signal
t = (0:L-1)*T; % Time vector

% Sum of a 50 Hz sinusoid and a 120 Hz sinusoid
x = 0.7*sin(2*pi*50*t) + sin(2*pi*120*t);
y = x + 0.4*randn(size(t)); % Sinusoids plus noise

figure;
plot(Fs*t(1:100),y(1:100)); hold on; plot(Fs*t(1:100),x(1:100),'r')
title('Signal Corrupted with Zero-Mean Random Noise (Blue), Original (Red)')

[A, f] = pisar(y',2); 
disp(A)
disp(f/Fs) 
```

PHD 估计 amp/freq 值为：

```
0.7493    % amp wave 1  (actual 0.7)
0.9257    % amp wave 2  (actual 1.0)
58.5      % freq wave 1 (actual 50)
123.8     % freq wave 2 (actual 120) 
```

对于相当多的噪音来说还不错，而且只知道信号包含的波数。

**回复@亚历克斯：**

是的，这是一个很好的算法，我在 DSP 研究期间遇到了它，我认为它工作得很好，但重要的是要注意 Pisarenko 的 Harm.Dec。将任何信号建模为 N > 0 正弦曲线，从一开始就指定 N，并使用该值来忽略噪声。因此，根据定义，它仅在您大致了解数据由多少人正弦波组成时才有用。如果您不知道 N 的值，并且需要针对一千个不同的值运行算法，那么绝对推荐使用不同的方法。也就是说，此后评估很简单，因为它返回 N 个幅度和频率值。

多信号分类 (MUSIC) 是另一种算法，在 Pisarenko 停止的地方继续。[http://en.wikipedia.org/wiki/Multiple_signal_classification](http://en.wikipedia.org/wiki/Multiple_signal_classification)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T05:23:10.967

Kitchi：你能提供一些样本数据吗？您必须使用的典型信号多长时间？（就样本数和正弦波周期数而言） 信噪比以 dB 为单位是多少？

1.  在你知道什么算法会起作用之前，我建议你在 python/numpy/scipy（或 matlab/octave，或 R/S，或 Mathematica ......）中制作原型，无论你最喜欢什么原型语言/工具集，除了 C。它将节省大量时间，并且您将使用更丰富的工具。

2.  您确定噪声会严重影响 FFT 吗？这不一定是一个好的假设，特别是如果噪声相对“白”，并且分析窗口很长。如果正弦波的频率非常稳定，你可以做一个巨大的 FFT 并将信号从比信号强几个数量级的噪声中提取出来。尝试预期正弦波的几百到几百万个周期。

3.  曲线拟合正弦波效果不佳。我猜周期性会产生很多局部最小值，而相移变量也会使问题显着非线性。您可以从下面链接的遇到相同问题的其他人那里看到一些问题。你最好尝试几乎任何其他东西而不是非线性最小二乘拟合，除非你预先线性化问题，这让我......

4.  自相关非常适合这种事情。尝试一次计算整个信号的自相关（如果源频率稳定，数据越多越好）。正弦波周期作为自相关中的一个高峰应该非常明显，并且您可能会比使用 FFT 获得更准确的频率估计（除非您使用非常大的 FFT）。此外，您可以从第一个高自相关峰的高度计算平均幅度。

**编辑**：经过进一步研究，有更多的技术可能比 FFT 更适合您的问题。Pisarenko 的调和分解（下面 Fredrik Rubin 首次提出）是一个；另一个是[最小二乘谱分析](http://en.wikipedia.org/wiki/Least-squares_spectral_analysis)（LSSA），它与您最初的问题想法非常相似。LSSA 有许多变体，例如 Lomb-Scargle、基础追踪等，它们以各种方式处理我上面描述的拟合问题。但是我认为，如果您在大型 FFT 中绝对*看*不到任何信号，那么其他任何方法都不太可能找到任何东西:)

PS 有关无法很好地拟合正弦波的其他问题，请参阅：

*   [即使是正弦波，curve_fit 也会失败](https://stackoverflow.com/questions/8126001/curve-fit-failing-on-even-a-sine-wave)

*   [SciPy leastsq 适合正弦波失败](https://stackoverflow.com/questions/13405053/scipy-leastsq-fit-to-a-sine-wave-failing)

*   [我知道 scipy curve_fit 可以做得更好](https://stackoverflow.com/questions/12397412/i-know-scipy-curve-fit-can-do-better)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T14:21:56.363

如果您要对 sin 进行回归，则可以使用 FFT 应用傅立叶变换。

**编辑**

尝试使用过滤器去除噪音。如果您有传感器等物理源，请在传感器上放置低通滤波器。FFT 是相对较差的滤波器。

**EDIT2 - 这个测量是完全错误的**

可能是您进行了错误的测量。根据[Nyquist-Shannon 采样定理](http://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem)，您的采样频率太低，或者输入频率太高。这会导致错误的解决方案，因为如果您使用 5kHz 采样进行采样，例如 3kHz，您将根据该定理测量 2kHz。

我确信您无法通过这种测量来判断正确的输入频率。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T13:59:58.760

这实际上是一个谱估计问题。您正在尝试估计一个“线谱”，您知道您拥有的正弦波数量（在您的情况下是一个）。像[MUSIC](http://en.wikipedia.org/wiki/Multiple_signal_classification)或[ESPRIT](http://en.wikipedia.org/wiki/Estimation_of_signal_parameters_via_rotational_invariance_techniques)这样的方法应该能够解决这个问题。

作为参考，[Stoica](https://rads.stackoverflow.com/amzn/click/com/0132584190)的书会派上用场。本书的第 4 章是线谱的参数方法，其中包含用于查找所需信号的幅度、相位和频率的算法。这本书还附带了[在 MATLAB 中实现的算法](http://www2.ece.ohio-state.edu/~randy/SAtext/)，它们也很容易自己实现。

# android - 用于监控传入消息的android服务

> ID：14197046
> 
> 赞同：0
> 
> 时间：2013-01-07T13:33:14.200
> 
> 标签：android, service, android-service

刚开始做一个朋友圈的小聊天应用，客户端很简单，连登录都没有，每个人都会得到一个他已经登录的应用版本。我只是不知道如何使用服务监视传入的消息，因为我对该主题不太熟悉。基本思想与任何 Messenger 相同：永久运行的服务（在启动时启动）以一定的时间间隔连接到服务器并检查是否有任何消息发送给用户（如果网络不可用，该服务会重试几次次）。如果有一些，则会显示通知。我知道如何创建此类通知，但我不确定如何实施和注册服务。我不希望你为我写代码，如果有人指出我必须做的事情以使事情正常进行，我将不胜感激。提前致谢

**编辑**据我所知，最好的解决方案是在应用程序中实现谷歌云消息传递支持，然后创建一个负责使用 GCM 推送通知的 servlet？有人可以评论这个结论吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:34:31.690

您可以使用广播接收器来做到这一点......

看到这是你正在寻找的最好的例子@ [http://www.anddev.org/recognize-react_on_incoming_sms-t295.html](http://www.anddev.org/recognize-react_on_incoming_sms-t295.html)

在此链接中详细描述了发送和接收消息的另一个很好的指南。

[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:39:44.623

你应该阅读这个主题：

[推送通知](https://stackoverflow.com/questions/1378671/push-notifications-in-android-platform)

在我看来，创建聊天的最佳方式是使用 websocket（socket.io 或其他）或带有 tcp/ip 连接的套接字。

# windows-8 - 如何在注册后立即启动 Windows 应用后台任务？

> ID：14197049
> 
> 赞同：13
> 
> 时间：2013-01-07T13:33:37.010
> 
> 标签：windows-8, windows-runtime, .net-4.5, windows-store-apps, c#-5.0

我正在编写一个只能在 PC 上运行的 Metro 应用程序（因此不用担心电池寿命，或者至少不用担心）。当用户单击按钮时，我需要它来注册和运行后台任务。它注册得很好，但我发现没有办法让它在延迟 15 分钟后运行，这对这个应用程序来说毫无用处。有什么想法可以让它立即运行吗？

[我也在这里](https://stackoverflow.com/questions/8859139/for-win-8-metro-app-how-to-start-background-task-immediately-without-trigger "这里")发现了一个类似的问题，说不可能，但一定有人想出了办法。

***编辑：***

我要求这项任务的理由是这样的：

我的应用程序将读取和写入文件，因为它们会在很长一段时间内出现，从几分钟到几小时不等。在大多数时间里，应用程序不太可能出现在前台。因为我需要代码才能继续执行，所以似乎最好的方法是创建一个后台任务，但我找不到在 Visual Studio 之外手动启动此任务的方法，尽管在 Visual Studio 中它可以完美运行。如果有更合适的方式来处理这个执行，我愿意使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T11:26:46.717

**编辑**

由于来自 OP 的额外信息而进行的修订。

我认为您可以通过 Metro 应用程序做到这一点的唯一方法是要求您的用户将您的应用程序“捕捉”到桌面 - 在您捕捉的应用程序上，他们可以点击启动/停止并同时仅使用桌面进行携带两个应用程序都在前台运行。

* * *

我认为我的其他答案不完整，因此我将尝试提供更好的答案。

澄清一下：您声明使用后台任务的全部原因是即使您的应用程序被暂停，您的应用程序也将继续运行一些代码。

**后台任务：**

您无法触发 WinRT 后台任务立即运行。

请记住，默认情况下，后台任务每 2 小时有 1 秒的 CPU 使用时间，并且无法指定何时激活 - 您只能使用机会触发 - 在这种情况下对您没有好处。

此外，即使您的应用程序是锁屏应用程序，您也不能指定立即处理后台任务，除非您使用推送通知，这不适合您尝试执行的操作。对于锁屏应用程序，您通常每 15 分钟获得 2 秒的 CPU。

**挂起：**

但是，如果您的应用程序被暂停，您仍然有几秒钟（5，根据此：[http](http://www.redlist.ch/post/Time-limit-on-suspending-a-WinRT-app.aspx) ://www.redlist.ch/post/Time-limit-on-suspending-a-WinRT-app.aspx ）在您的应用程序被操作系统暂停之前进行整理。无论如何，此暂停宽限时间都比您在后台任务中的时间长！

因此，我建议不要使用后台任务，而是启动一个后台线程（根据我的其他答案）来执行您的按钮按下操作（使用本地状态来记录其进度）。现在，如果您还挂钩到 App onsuspending 事件，您可以使用它来查看按钮按下操作是否尚未完成并完成它。

希望这是有道理的。祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T14:52:07.123

我解决这个问题的方法是创建一个可以从应用程序和后台任务调用的通用函数。

在您的情况下，当用户单击注册按钮时，您可以注册任务，然后调用通用功能（从您的应用程序）。任务运行时，也可以调用相同的常用函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T14:24:36.020

如果您基于 UI 操作（按钮按下）运行任务，您也可以挂钩到按钮按下事件并在 UI 进程的新线程中启动您的任务。例如

```
new TaskFactory().StartNew(() => YourBackgroundTaskMethod()) 
```

您不会阻塞 UI，如果需要，您可以轻松地将后台线程的结果编组回 UI。

这样您就不必依赖您的应用程序被提升为锁屏应用程序 - 如果您想运行后台计时器任务，这是一项要求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T16:34:17.380

似乎您的用例最能从通知系统中受益。您可以在创建文件时向您的应用程序发送通知（从文件创建服务或通过云服务与您的应用程序通信的桌面端 .Net 4.5 应用程序）。

[关于一般的后台工作，您可以使用Windows.UI.Notifications.ScheduledTileNotification](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.scheduledtilenotification.scheduledtilenotification)安排每分钟更改一次磁贴通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-10T08:34:50.317

您可以订阅原始推送通知事件。当您想要启动该过程时，您可以请求您的服务器发送原始通知，这将激活您的后台任务。

# java - 首选项只更新一次

> ID：14197054
> 
> 赞同：0
> 
> 时间：2013-01-07T13:34:04.623
> 
> 标签：java, android

我制作了一个带有主要活动和偏好活动的小应用程序。这是 PrefsActivity：

```
public class PrefsActivity extends PreferenceActivity {

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs);
    }
} 
```

然后我通过菜单从主活动触发 Preference 活动，如果选中复选框，则要求将音量设置为 0：

这是整个主要活动：

```
package com.stressedmanasoft.clickcounter;

import android.os.Bundle;
import android.app.Activity;
import android.view.*;
import android.widget.*;
import android.graphics.*;
import android.media.*;
import android.content.*;
import android.preference.*;

public class MainActivity extends Activity {

ImageView counter;
MediaPlayer clicksnd;
MediaPlayer resetsnd;
int x=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    counter = (ImageView) findViewById(R.id.Counter);
    clicksnd = MediaPlayer.create(this, R.raw.clicksnd);
    resetsnd = MediaPlayer.create(this, R.raw.resetsnd);

    final TextView count = (TextView) findViewById(R.id.Count);
    Typeface face = Typeface.createFromAsset(getAssets(), "Bohemian_typewriter.ttf");
    count.setTypeface(face);
    count.setText(""+x);

    final Button countButton = (Button) findViewById(R.id.CountButton);
    countButton.setOnClickListener (new View.OnClickListener() {   
        public void onClick(View v) {
            clicksnd.start();
            x = x+1;
            count.setText(""+x);
        }
    });

    final Button resetButton = (Button) findViewById(R.id.ResetButton);
    resetButton.setOnClickListener (new View.OnClickListener() {   
        public void onClick(View v) {
            resetsnd.start();
            x = 0;
            count.setText(""+x);
        }
    });

    SharedPreferences myPreference = PreferenceManager.getDefaultSharedPreferences(this);
    if(myPreference.getBoolean("checkBox", true)) {
        clicksnd.setVolume(0, 0);}

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case R.id.menu_settings:
        Intent intent = new Intent(MainActivity.this, PrefsActivity.class);
        startActivity(intent);
        break;
    }
    return super.onOptionsItemSelected(item);
}

@Override
protected void onResume() {
super.onResume();

SharedPreferences myPreference = PreferenceManager.getDefaultSharedPreferences(this);
if(myPreference.getBoolean("checkBox", true)) {
    clicksnd.setVolume(0, 0);
    }

}

} 
```

当我启动应用程序时，音频打开并且未选中复选框。如果我选中它，音频会按预期关闭，但如果我取消选中它，音频将保持关闭状态。为什么？

我应该添加一个监听器吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:39:51.637

试试这个：

```
@Override
protected void onResume() {
    super.onResume();
    SharedPreferences myPreference = PreferenceManager.getDefaultSharedPreferences(this);
    if(myPreference.getBoolean("checkBox", true)) {
        clicksnd.setVolume(0, 0);
    } else {
        clicksnd.setVolume(100, 100);
    }
} 
```

唯一的区别是`onResume()`你将覆盖它，而不是`onStart()`.

# reporting-services - SSRS IIF 日期评估

> ID：14197057
> 
> 赞同：3
> 
> 时间：2013-01-07T13:34:12.000
> 
> 标签：reporting-services, reportingservices-2005

我有以下代码

```
=IIf(Fields!Freeze.Value, Fields!effectivedate.Value, IIF(Month(Fields!effectivedate.Value) <> Month(Now()), Format(Now(), “MM/dd/yyyy”) , Fields!effectivedate.Value)) 
```

A. 在第一个 IIF 语句中，我检查 Fields!Freeze.Value 是否为真，如果为真，则显示 Fields!effectivedate.Value (IIf(Fields!Freeze.Value, Fields!effectivedate.Value)

B. 在第二个 IIF 语句中，我检查 Fields!effectivedate.Value 是否为当前月份，如果是当前月份，则显示 Fields!effectivedate.Value，如果不是当前月份，则显示当前日期。

我需要以下方面的帮助。

在第一个 IIF 语句中，>>>`IIf(Fields!Freeze.Value, Fields!effectivedate.Value,` 我想评估一个新值 Fields!FreezeDate.value

1.  如果 Fields!Freeze.Value = true 则检查 Fields!effectivedate.Value 是否比 Fields!FreezeDate.value 少 30 天或更长时间。A. 如果其 29 天或小于 Fields!FreezeDate.value 则显示 Fields!effectivedate.Value B. 如果其 30 天或更短于 Fields!FreezeDate.value 则显示 Fields!FreezeDate.value

示例 1

```
 Fields!FreezeDate.value  = '12/30/2012'
 Fields!effectivedate.Value = '11/15/2010'

 then Display the Fields!FreezeDate.value 
```

示例 2

```
 Fields!FreezeDate.value  = '12/30/2012'
 Fields!effectivedate.Value = '12/15/2010'

 then Display the Fields!effectivedate.Value 
```

我将如何在 SSRS 代码中编写此代码？

如果我未能正确解释某些事情，请要求进一步澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:59:55.647

据我了解要求，您需要添加另一个 IIf() 部分来检查两个日期之间的天数差异，如果差异小于 30 天，则显示有效日期：

```
=IIf
(
  Fields!Freeze.Value
  , IIF
  (
    DateDiff(DateInterval.Day, Fields!effectiveDate.Value, Fields!FreezeDate.Value) < 30
    , Fields!effectiveDate.Value
    , Fields!FreezeDate.Value
  )
  , IIF
  (
    Month(Fields!effectivedate.Value) <> Month(Now())
    , Format(Now(), “MM/dd/yyyy”)
    , Fields!effectivedate.Value
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:00:24.713

我怀疑您缺少的是对该`DATEDIFF`功能的了解。

[http://msdn.microsoft.com/en-us/library/aa337092%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/aa337092%28v=sql.90%29.aspx)

```
IIF(
  DATEDIFF(DAY, Fields!FreezeDate.Value, Fields!effectiveDate.Value) => 30,
  Fields!FreezeDate.Value, 
  Fields!effectiveDate.Value ) 
```

上面，我们使用`DATEDIFF`.

第一个参数是我们要测量两者之间差异的时间测量。天。

例子：-

`DATEDIFF(DAY, '2013-01-01', '2013-01-15')`应该产生 14。

总而言之，我们正在计算 和 之间的日`FreezeDate`差`effectiveDate`。当该值超过 30 时，显示`effectiveDate`. 否则，显示`FreezeDate`.

您可能需要玩弄才能获得所需的结果。你对你的逻辑的英文描述不是很好。在这种情况下尽我所能。

# symfony - 树枝模板中的访问路由参数

> ID：14197060
> 
> 赞同：10
> 
> 时间：2013-01-07T13:34:18.800
> 
> 标签：symfony, routes

如何在不知道参数名称的情况下访问 twig 模板中的路由参数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-07T14:04:32.010

在 Twig 中可以通过以下方式访问路由参数：

```
{{ app.request.attributes }} 
```

您还可以使用该[`dump()`](http://twig.sensiolabs.org/doc/functions/dump.html)函数查看可用的方法：

```
<pre>
{{ dump(app.request.attributes) }}
</pre> 
```

这是所有参数的转储：

**请求网址**

```
http://example.com/test/3

Route = test
Slug = {param1} = 3 
```

**树枝代码**

```
{{ dump(app.request.attributes) }} 
```

**退货**

```
object(Symfony\Component\HttpFoundation\ParameterBag)[10]
  protected 'parameters' => 
    array (size=3)
      '_controller' => string 'MyTest\Bundle\Controller\TestController::indexAction' (length=61)
      'param1' => string '3' (length=1)
      '_route' => string 'test' (length=7) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-04T17:40:57.823

您可以通过以下方式获取所有路由参数：

```
{{ app.request.attributes.get('_route_params') }} 
```

如果你只想要一个参数：

```
{{ app.request.attributes.get('_route_params')['YOUR_PARAMETER_KEY'] }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-08T07:38:10.943

如果您想使用当前路由及其参数作为 url：

> {{ 路径(app.request.get('_route'),app.request.get('_route_params')) }}

当您想从 url 中删除任何连接的字符串时，这会很有帮助。

```
app.request.get('_route') gives you the route name from request bag.
app.request.get('_route_params') gives you the route parameters
{{ path(route_name, array of parameters) }} create the path 
```

# php - 重定向到php中的另一个页面

> ID：14197065
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:34:34.713
> 
> 标签：php, ajax

我有一个包含两个字段名称和电子邮件的表单，我需要在特定 url 上提交该表单值，如下所示

```
http://www.abc.co.uk/acy/xyzerequest&name='me'&email='me@gmail.com' 
```

为此，我制作了表单并将其发布到 php 文件中。我在哪里使用 $_POST 获取值，但我觉得卡住的地方是如何将这些值发送到特定的 URL，但用户不应该知道。

因此，最终用户只需输入姓名和他的电子邮件 ID，并使用他的值定向到该 URL..

请指导我如何实现..我从过去 3 小时开始尝试，但运气不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:43:14.870

正如其他人所说，您的问题不是很清楚。

如果我理解正确，您希望在用户单击提交按钮时显示该 URL。

在这种情况下，您应该使用 GET 而不是发布表单。请注意，如果您要传递诸如密码之类的信息，则不建议使用 GET，因为该信息将直接在 url 上可见。

此外，您不应该使用 get it 上述操作的结果是修改服务器端的某些资源，您只能查看而不修改资源。

编辑：似乎其他人对这个问题有了更好的理解，附加参数的标题（“Location：someurl”）似乎是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:47:50.193

您可以使用该函数通过设置`Location:`标题重定向到另一个页面。`header`一个例子：

```
header("Location: http://stackoverflow.com/"); 
```

正如@lampwins 指出的那样，通常这与`exit`. 这样页面的其余部分就不会被执行（因为这可能会导致异常的副作用和不必要的服务器负载）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:00:53.057

一种方法是使用诸如 form.php 之类的表单来显示您的表单，然后重定向到自身以处理该表单而不是 action=myphp 只需放置 form.php ，然后它将重定向到自身在顶部做你需要的。这样您就不需要在 URL 中发送密码。

```
<?php 
if(isset($_POST['submit'])) {
   $name  = $_POST['name'];
   $email = $_POST['email'];

   // do here whatever you wanted to do with the user and email in your form
   // you can show a different html page or redirect on, or login or whatever.
}  else {
   // the form html elements will only show if the form is not already submitted by the user.  This allows you to do what you need to do on one page without processing and then redirecting using the header.
?>
<!-- form.php -->
<form method=post action="form.php">
name <input name="name" value="" size="10" /><br />
email <input name="email" value="" size="25" /><br />
<input type="submit" name="submit" value="go" />
</form>
<?php
   }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T14:04:21.493

据我了解，您希望您的脚本收集用户名和电子邮件，创建一个 URL 并重定向用户。

所以脚本应该看起来像这样（这只是一个指导方针）。

```
 <?php
    if(isset($_POST['submit'])){
        $name = $_POST["name"];
        $email = $_POST["email"];

        //create the URL
        $url = "http://www.example.com/yourpage.php?name=" . urlencode($name) . "&email=" . urlencode($email);

        //send the header
        header("Location: " . $url);
        //exit the script
        exit();
    }
    ?>
    <html>
      <body>
        <form method="post" action="" name="name">
          Name:<input type="text" name="name">
          Email:<input type="text" name="name">
          <input type="submit">
        </form>
      </body>
    </html> 
```

就 URL 而言，`?`表示您的“变量”从哪里开始。

您永远不应该从原始用户数据创建 URL，尤其是当您将它们发送到您的其他脚本之一时。您应该始终使用`urlencode($data)`，这将使数据 URL 安全。您还应该研究数据验证和清理。

所以这个脚本首先检查是否有任何东西被发布到它，如果有，如果收集数据，创建 URL，发送标头进行重定向，然后退出。如果没有，它会提供一个表格供用户输入他们的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T14:15:25.513

让我把事情弄清楚，

1.  您在提交中获得两个值（姓名、电子邮件）。
2.  现在您将在另一个 url 中处理这两个。

如果我是对的，您可以使用 PHP“标头”函数，例如

```
<?php
    header("Location:http://www.abc.co.uk/acy/xyzerequest?name=".$_POST['name']."&email=".$_POST['email']);
?> 
```

在这种情况下，带有标头值的空白响应将发送到客户端或浏览器

```
<some header value>
Contet-Type:text/plain
Location:http://www.abc.co.uk/acy/xyzerequest?name=foo@email=foo@gmail.com
<some header value> 
```

这样，每个人都知道这些名称和电子邮件值。

由于 PHP 在向客户端呈现页面结束时会丢失变量范围。因此将值存储在变量中是没有用的。但是您还有另一种选择，通过使用 $_SESSION 变量，您可以实现这一点。

1.  在表单提交设置会话值如下，

    <?php $_SESSION['name'] = $_POST['name']; $_SESSION['email'] = $_POST['email']; ?>

然后重定向到特定的网址，

```
<?php
  header("Location:http://www.abc.co.uk/acy/xyzerequest");
?> 
```

2\. 现在在重定向 url 的处理程序中，您可以从会话中读取这些值，

```
<?php
  $name = $_SESSION['name'];
  $email = $_SESSION['email'];
?> 
```

因此，这些值是隐藏的，我们可以使用不同的页面处理程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T14:46:31.020

**正如一些人已经建议的那样，最简单的方法（如果您需要使用发布**数据重定向）是创建一个隐藏表单并自动提交：

```
$form = "<form name='autoForm' method='post' action='http://www.abc.co.uk/acy/xyzerequest'>
             <input type='hidden' name='name' value='{$_POST['name']}' />
             <input type='hidden' name='email' value='{$_POST['email']}' />
             <script type='text/javascript' language='javascript'>
                 document.autoForm.submit();
             </script>
         </form>";

echo $form; 
```

这将自动使用`post`数据创建您的表单并提交。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-07T13:45:39.520

```
<?php
$user = $_GET["user"];
$pass = $_GET["pass"];

   header( 'http://www.abc.co.uk/acy/xyzerequest&name=' . $user . '&email=' . $pass ) ;

?> 
```

# android - Android ActionBar 在点击时更改项目颜色

> ID：14197066
> 
> 赞同：0
> 
> 时间：2013-01-07T13:34:37.233
> 
> 标签：android, colors, android-actionbar

在操作栏中，我有以文本而不是图标显示的项目。单击时，我想将此文本的颜色从蓝色更改为白色。我不想用

```
<item name="selectableItemBackground"></item> 
```

只有文本颜色。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:08:40.233

```
<style name="AppTheme" parent="android:Theme.Holo">
    <item name="android:actionMenuTextColor">@color/action_item_text_color</item>
</style> 
```

`R.color.action_item_text_color`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#fff"/>
    <item android:color="#00f"/>
</selector> 
```

# jquery - SlickGrid问题中的jquery自动完成

> ID：14197067
> 
> 赞同：0
> 
> 时间：2013-01-07T13:34:37.590
> 
> 标签：jquery, autocomplete, slickgrid

col1我一直在尝试根据几个建议将 jquery 自动完成编辑器添加到我的 SlickGrid (2.0) 中，但我一直收到错误消息：

> **对象不支持此属性或方法**

这是我要开始的内容：

```
(function($) {

  // register namespace
  $.extend(true, window, {
    "Slick": {
      "Editors": {
        "Auto": AutoCompleteEditor,
        "SelectDD": SelectBoxEditor,
        "Select": SelectBoxEditor2,
        "Text": TextEditor,
        "Text2": IntegerCellEditor
      }
    }
  });

  var availableTags = [
                        "ActionScript",
                        "AppleScript",
                        "Asp",
                        "BASIC",
                        "C",
                        "C++",
                        "Clojure",
                        "COBOL",
                        "ColdFusion",
                        "Erlang",
                        "Fortran",
                        "Groovy",
                        "Haskell",
                        "Java",
                        "JavaScript",
                        "Lisp",
                        "Perl",
                        "PHP",
                        "Python",
                        "Ruby",
                        "Scala",
                        "Scheme"
                      ];

   function AutoCompleteEditor(args) {
     var $input;
     var defaultValue;
     var scope = this;
     var calendarOpen = false;

     this.init = function () {
       $input = $("<INPUT id='tags' class='editor-text' />");
       $input.appendTo(args.container);
       $input.focus().select();
       $input.autocomplete({
            source: availableTags
        });
     };

     this.destroy = function () {
       $input.autocomplete("destroy");
     };

     this.focus = function () {
       $input.focus();
     };

     this.loadValue = function (item) {
       defaultValue = item[args.column.field];
       $input.val(defaultValue);
       $input[0].defaultValue = defaultValue;
       $input.select();
     };

     this.serializeValue = function () {
       return $input.val();
     };

     this.applyValue = function (item, state) {
       item[args.column.field] = state;
     };

     this.isValueChanged = function () {
       return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
     };

     this.validate = function () {
       return {
         valid: true,
         msg: null
       };
     };

     this.init();
   } 
```

这是网格的相关部分：

```
var columns = [
{id:"col1", name:"test", field:"col1",  width:135, editable:true, cssClass:"pad-4-left", sortable:true, editor:Slick.Editors.Auto}, 
```

我已经包括了所谓的依赖项：

```
<link rel="stylesheet" type="text/css" href="css/jquery-ui.css" media="all" />
<script type="text/javascript" src="js/jquery/jquery-1.8.3.js"></script>
<script type="text/javascript" src="js/jquery/jquery-ui.js"></script> 
```

任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:03:22.667

更新 - 事实证明，我显然受到了这个 jquery 模块的干扰：jquery-ui-1.8.16.custom.min.js。
我做了一个解决方法，还需要使用早期版本的 jquery.min (jquery-1.7.2.min.js)，因为后来的 1.8.3 版本也在我现有的应用程序中引发错误。
两个“修复”都已实施，现在我正在运行。

# .htaccess - MAMP 起始页重定向循环

> ID：14197068
> 
> 赞同：2
> 
> 时间：2013-01-07T13:34:38.090
> 
> 标签：.htaccess, google-chrome, mamp, redirect-loop

我已经在我的 Mac 上使用 MAMP 开发 PHP 网站一段时间了，没有任何问题。今天早上，我注意到 MAMP 起始页，您可以从中访问 phpmyadmin（除其他外），不再在 Firefox 或 Safari 中加载并给出警告消息（发生了太多重定向）。

奇怪的是，开始页面在 Chrome 中运行良好，我可以很好地进入 phpmyadmin。此外，无论浏览器如何，我所有的 PHP 站点都可以正常工作。

apache 错误日志给了我这个消息： [Mon Jan 07 13:25:37 2013] [error] [client ::1] client denied by server configuration: /Applications/MAMP/htdocs/.DS_Store

我尝试删除 .ds_store 文件，但没有效果。任何人都可以建议这里可能导致问题的原因，我该如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-03-13T08:08:05.390

[在新的Jupyter](https://jupyter.org/)安装导致我的 MAMP 服务器抛出“重定向过多”错误后，我来到了这里。我通过[Anaconda](https://anaconda.org/anaconda/anaconda-navigator)安装了 Jupyter ，显然它们都在同一组端口上运行 - 8888 和 8889 都被 Jupyter 捕获，据说会导致错误（请注意，MAMP 默认使用 8888 用于 Apache，8889 用于 MySQL）。

我去了 MAMP -> 首选项 -> 端口，然后将端口 Apache 和 MySQL 端口更改为随机数。任何超过 10000 的东西都应该是安全的，但为了以防万一，我选择了 20000 的高点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T15:20:44.787

解决了。

这是由我在本地主机上用于另一个站点的 CMS 设置的冲突 cookie 引起的。

# c++ - Python C Api 和正确处理 C++ 类中的内存

> ID：14197069
> 
> 赞同：0
> 
> 时间：2013-01-07T13:34:40.470
> 
> 标签：c++, python, memory-leaks, python-c-api, reference-counting

我想知道如何应对以下问题。在我的 C++ 类中，我有一个辅助 PyObject 指针。

```
class Foo
{
     public:
     // Should I new the dictionary here in constructor?
     Foo()
     {

     }
     // Must decrease the reference count or explicitly delete the dictionary?
     ~Foo()
     {
         Py_DECREF(myDictionary);
     }

     void sync()
     {
          myDictionary = PyDict_New();
          for (int i=0; i<myInternalData.size(); i++)
          {
                  PyObject *key =  PyInt_FromLong(i);
                  PyObject *val = PyInt_FromLong(myInternalData.at(i));
                  PyDict_SetItem(dict,key,val);
                  Py_DecRef(key);
                  Py_DecRef(val);
          }
     }

     private:
     PyObject *myDictionary;
     std::vector<int> myInternalData;
} 
```

在我的 C++ 代码中，`myInternalData`结构偶尔会更新或调整大小，我想知道如何处理我的 python 字典的正确内存分配。

我不知道如何释放与其关联的内存，或者如何正确地保持它与我的内部同步，`std::vector`而不会破坏堆或引发内存泄漏。

对 Python C API 有帮助吗？我应该释放 PyDict`PyObject_Del`然后再重新分配它吗？有人建议另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:17:58.677

我不清楚为什么要在 Python 中使用字典，当您使用从 0 开始的连续整数集进行索引时。但是：在使用它之前，您必须`PyDict_New`先创建字典。之后，当你重新同步时，你应该在开始之前清除字典，使用 `PyDict_Clear`，而不是重新分配一个新的.. 没有其他必要了。（如果您重新分配一个新的，就像您在代码中所做的那样，您应该首先减少旧的引用计数。但是 Python 端的任何引用旧的代码将继续引用旧的；`PyDict_Clear`是可能是更好的解决方案。）

此外，您应该注意涉及临时 Python 对象的位置。目前，没有其他必要，因为您只在循环中使用 Python（以及 C）函数，它们不会触发 C++ 异常。稍微改变一下代码，这可能不再是这种情况。作为一般规则，我发现您应该将 包装`PyObject*`在析构函数调用的类中`Py_DecRef`，而不是显式调用它，并且可能由于异常而错过调用。

# c++ - 使用 scons 编译器编译 C++

> ID：14197070
> 
> 赞同：0
> 
> 时间：2013-01-07T13:34:41.327
> 
> 标签：c++, macos, x86-64, scons, i386

我正在使用 Mac OS X 10.8.2，并且正在使用 scons 编译器编译我的代码。我正在使用 32 位 xerces-c 数据库版本 2.8.0。

当我尝试构建时出现错误：

```
$scons

scons: 读取 SConscript 文件...
scons: 读完 SConscript 文件。
scons：建立目标......

ld：警告：忽略文件/usr/xerces-c_2_8_0-x86-macosx-gcc_4_0/lib/libxerces-c.dylib，文件是为不受支持的文件格式构建的（0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ）不是被链接的架构（x86_64）：/usr/xerces-c_2_8_0-x86-macosx-gcc_4_0/lib/libxerces-c.dylib

ld：未找到架构 x86_64 的符号
collect2: ld 返回 1 个退出状态
scons: *** [wntevo] 错误 1
scons：建筑因错误而终止。

```

我检查了我的 libxerces-c.28.0.dylib 文件：

```
$file libxerces-c.28.0.dylib
libxerces-c.28.0.dylib：Mach-O 动态链接共享库 i386

```

我应该在我的 SConstruct 文件中添加什么以使其在 x86_64 机器上的 i386 中构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:42:51.783

澄清一下，SCons**不是**编译器，而是*构建工具*。您正在使用 SCons 来调用编译器，并且您让 SCons 负责如何从您正在编辑的源代码构建应用程序的细节。

您现在的问题是 SCons 无法为您提供详细信息。您需要告诉 SCons 创建一个可以编译 32 位应用程序的环境。这是通过将 a 标志传递给编译器来完成的，编译器指示它编译 32 位应用程序。

我猜你的编译器是 gcc，它需要标志 -m32 才能正确编译。为此，您可以告诉 SCons 将其告诉编译器。

在 SConstruct 文件中的某处，您会找到创建`Environment()`或调用构建器的调用。`Program()`如果两者都找到，则您希望更改用于创建程序的环境。因此，如果您的代码说`env = Environment(...)`稍后`env.Program(...)`您想更改 Environment 行以添加此参数：

```
env = Environment(...other arguments..., CPPFLAGS=["-m32"]) 
```

你像这样调用程序生成器：

```
Program(...0 or more arguments...) 
```

您需要将其更改为：

```
Program(...0 or more arguments..., CPPFLAGS=["-m32"]) 
```

当您运行 SCons 时，此更改应该是可见的，因为您应该在 g++ 的参数中看到选项 -m32。

作为旁注，为了防止对编译器和构建工具产生更多混淆，我建议您阅读一些关于 SCons 的内容，一个好的开始可能是[手册页](http://www.scons.org/doc/production/HTML/scons-man.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T20:07:25.143

当我想在 scons 中编译时，这就是我用来在 32 位架构上编译的东西

`env = Environment(TARGET_ARCH = 'x86')`

# actionscript-3 - BitmapImage 和 Image 组件不显示加载的位图？

> ID：14197081
> 
> 赞同：1
> 
> 时间：2013-01-07T13:35:13.263
> 
> 标签：actionscript-3, apache-flex, air, flex4.5

```
[Bindable]
protected var bmp : Bitmap = new Bitmap();
...

var loader : Loader = new Loader();
    loader.contentLoaderInfo.addEventListener( Event.COMPLETE, onComplete );
    loader.load( new URLRequest( fileObj.url ) );

function onComplete( event : Event ) : void
{
    trace( Bitmap( LoaderInfo( event.target ).content ).bitmapData.height );

    bmp = ( new Bitmap( Bitmap( LoaderInfo( event.target ).content ).bitmapData ) ) ;

}
...

<s:BitmapImage id="cameraSource" width="100%" height="100%" source="{ bmp }" scaleMode="stretch" /> 
```

我正在使用此源代码来加载本地存储的图像文件。它加载正常，但由于某种原因没有显示。

*   为什么下面的源代码不显示加载的图像？

*// Flex 4.6 和 Flex 4.8 测试，移动 AIR 应用程序*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:21:11.777

最好的猜测是您的绑定没有触发更新，请尝试直接分配属性

```
cameraSource.source = bmp; //at the end of onComplete 
```

无论是这个还是 BitmapImage 的容器都在限制它的大小，您也可以尝试临时设置一个文字显式像素大小而不是百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:33:51.080

似乎是我没有充分解释情况的错。整个事情都被移到了一个视图中，但是一旦推送了一个浏览图片视图，它就会将数据破坏到当前视图中。

下面的代码行正在修复所有问题

```
destructionPolicy="never" 
```

# php - 打包 LAMP 应用程序以便于部署

> ID：14197083
> 
> 赞同：2
> 
> 时间：2013-01-07T13:35:29.410
> 
> 标签：php, linux, apache, deployment, lamp

我是我妈妈的小企业的常驻“计算机人”。大约一年前，我在商店的 LAN 上设置了一个备用的戴尔机器作为 Ubuntu 服务器，在其上设置了一个 LAMP 堆栈，并构建了一些内部网 Web 应用程序（主要使用 PHP 和 MySQL），用于管理客户奖励等事情数据、库存、员工时间日志等。我接着实现了一个自定义的条形码和烹饪说明标签生成器，它的前端可以在 Avery 模板上打印，以及一个成熟的收银机前端，带有条形码扫描、库存的自定义挂钩管理和一套会计报告。我的小型数据库应用程序已成为商店日常程序和商业模式的一部分。

最近，我妈妈告诉我，她有一个潜在的特许经营商想要获得商业模式的许可，并在另一个州开设一家姊妹店，并配备我的软件。

现在，我的代码很好而且很稳定，我有大量*使用*它的文档，但我不能帮助新人启动和运行它。更糟糕的是，它不仅仅是一个在 docroot 中有一些文件的简单 LAMP 堆栈，设置包括使用自定义 Apache 配置文件，设置 MySQL 数据库和用户，以及安装一些深奥的依赖项，如 ImageMagick 及其 PHP Imagick 扩展（我必须从源代码编译！）

有没有什么好方法可以制作某种一步安装脚本或包来安装我需要的依赖项、我的自定义 apache 配置并将我的 PHP 文件全部提取到位？在没有我帮助的情况下，我可以向从未配置过 Apache 的人展示一些东西吗？甚至可以通过某种方式轻松获取整个操作系统和堆栈的映像，他们可以在没有专业知识的情况下将其克隆到新驱动器上？

对不起，如果这是主观的，但我的谷歌让我失望了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:48:58.743

### 你检查[过 Server2Go](http://www.server2go-web.de/)吗？

> Server2Go 是一个开箱即用的 Web 服务器，无需任何安装，并且在写保护媒体上运行。这意味着基于 Server2Go 的 Web 应用程序可以直接从 cdrom、U 盘或硬盘上的任何文件夹中使用，而无需配置 Apache、PHP 或 MySQL。
> 
> Server2Go 允许您在 CD-ROM 上创建独立的工作网站或 PHP 应用程序。它的可能用途有很多例子，例如目录软件、计算程序、图像活动（基于 CMS）、基于计算机的培训课程或其他应用程序。大多数 PHP 软件，如内容管理系统 Joomla 或基于计算机的培训软件 Moodle 都可以在 Server2Go 的帮助下从 CD-ROM 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:24:13.563

你为什么不给他们一个安装和配置了所有软件的服务器呢？您可以将其作为特许经营要求的一部分，也可以将自己设置为技术提供商（特许经营许可证要求他们使用您的软件/硬件）。

# c - 递归数据结构出错 - 从类型 struct *l 分配 List 时类型不兼容

> ID：14197085
> 
> 赞同：0
> 
> 时间：2013-01-07T13:35:35.967
> 
> 标签：c, binary-tree, recursive-datastructures

我制作了一个二叉树，其中基本上有三层结构：

```
typedef struct l {
  char n[15];
  struct l *next;
} List;

typedef struct {
  char rname[20];
  char lname[20];
  List number;
} info;

typedef struct tree {
  info thisnode;
  struct tree *left;
  struct tree *right;
} Tree; 
```

在这行代码上

```
 t->thisnode.number = t->thisnode.number.next; 
```

我收到标题中提到的错误

通常使用递归数据结构，这些类型的分配工作，尽管接下来有类型 struct *l。谁能帮我弄清楚为什么在这种情况下它不起作用？

我也会本能地把上面的线作为

```
 t->thisnode.number = t->thisnode.number->next; 
```

但我的编译器似乎更不喜欢这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:37:45.917

好吧，这些类型肯定是不兼容的。

`next`in 字段的类型`number`是`struct l *`，但`number`in的类型`info`是`List`，它是 的别名`struct l`，即整个结构，而不仅仅是指向它的指针。所以你试图将一个指针分配到一个不会飞的整个结构中。

看来您缺少指针级别，也许中的`number`字段`info`应该是`List *`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:38:36.210

表达式`t->thisnode.number`是类型`List`(ie `struct l`)`t->thisnode.number->next`而是类型`struct l *`（好吧，如果它实际上是在您使用指针访问语法访问非指针成员时编译的）。

# python - 使用 Python 从 DataFrame 中的列溢出值

> ID：14197088
> 
> 赞同：2
> 
> 时间：2013-01-07T13:35:40.423
> 
> 标签：python, numpy, python-2.7, dataframe, pandas

我有一个有 4 列的数据框..

```
A    B     C      D
e    2     =     <0.1
e    2     =     <0.11
e    2     =      0.1
e    2     =      0.1
e    2     =      0.1
e    2     =     <0.14 
```

D 列有一些以“<”开头的浮点值，有些没有“<”。

对于前面有“<”的行，我想将其剪切并移到“=”符号之前的 C 列。

我该怎么做？

如果我使用普通切片，它将削减没有“<”符号的值。

并且`startswith`不适用于浮点值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:10:57.290

您可以创建一个函数，该函数在`df.D`列中输入一个条目并返回一个系列。然后您可以将 Series[`apply`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.apply.html)与此功能一起使用：

```
def f(d):
    try:
        if d[0] == '<':
            return pd.Series(['<=', float(d[1:])])
    except TypeError:
        return pd.Series(['==', d])

In [9]: df = DataFrame({'A': {0: 'e', 1: 'e', 2: 'e', 3: 'e', 4: 'e', 5: 'e'}, 'B': {0: 2, 1: 2, 2: 2, 3: 2, 4: 2, 5: 2}, 'C': {0: '=', 1: '=', 2: '=', 3: '=', 4: '=', 5: '='}, 'D': {0: '<0.1', 1: '<0.11', 2: 0.1, 3: 0.1, 4: 0.1, 5: '<0.14'}})

In [10]: df
Out[10]: 
   A  B  C      D
0  e  2  =   <0.1
1  e  2  =  <0.11
2  e  2  =    0.1
3  e  2  =    0.1
4  e  2  =    0.1
5  e  2  =  <0.14

In [11]: df[['C', 'D']] = df.D.apply(f)

In [12]: df
Out[12]: 
   A  B   C     D
0  e  2  <=   0.1
1  e  2  <=  0.11
2  e  2  ==   0.1
3  e  2  ==   0.1
4  e  2  ==   0.1
5  e  2  <=  0.14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:53:26.880

如果我理解正确的话，这样的事情应该可以做到。这是非常快速和肮脏的，未经测试。读取命名文件，打印到标准输出：

```
for l in open("file.txt").readlines():
  l = l.strip()
  fields = l.split(" ")
  if len(fields) != 4: continue
  if fields[3][0] == "<":
    fields[2] = "<"
    fields[3] = fields[3][1:]
  print "\t".join(fields) 
```

# android - 按下相机捕获按钮后如何更改活动的布局

> ID：14197089
> 
> 赞同：0
> 
> 时间：2013-01-07T13:35:41.520
> 
> 标签：android, android-layout, android-activity, android-camera, android-button

我正在编写一个程序，该程序具有使用手机相机拍照的活动。相机的 SurfaceView 下方有一个捕捉按钮。现在当用户按下捕获按钮时，我希望表面视图显示图片的预览，并且在此预览下应该有两个按钮（接受和取消）。如果用户按下取消，则程序应返回相机预览以拍摄另一张照片。

我假设我应该为此定义两种布局，但我不知道如何在活动中从一种布局更改为另一种布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:40:18.650

有多种方法可以实现这一目标。

1.  `ViewGroup`在你的layout.xml文件中`LinearLayout`定义你的按钮。`visibility="gone"`然后调用`myButtons.setVisibility(View.VISIBLE);`以使它们可见。要再次隐藏它们，请调用`myButtons.setVisibility(View.GONE);`。

2.  以编程方式创建按钮并在运行时将它们附加到 SurfaceView。

我更喜欢选项1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:40:30.323

您可以为此使用两个片段。

第一个片段有一个带有相机按钮的布局。第二个片段有预览和两个按钮接受/取消。

您可以使用 backstack，以便取消（或用户按回）将带您回到第一个片段。

这是片段教程 (http://developer.android.com/guide/components/fragments.html) 中的代码，展示了如何用另一个片段替换片段

```
// Create new fragment and transaction
Fragment newFragment = new ExampleFragment();
FragmentTransaction transaction = getFragmentManager().beginTransaction();

// Replace whatever is in the fragment_container view with this fragment,
// and add the transaction to the back stack
transaction.replace(R.id.fragment_container, newFragment);
transaction.addToBackStack(null);

// Commit the transaction
transaction.commit(); 
```

并且您的取消按钮可以使用 popBackStack() （模拟用户的 Back 命令）从返回堆栈中弹出片段。

还有另一种选择。如果您不需要预览的自定义布局，您可以跳过使用自定义摄像头，只需使用 startActivityForResult 作为意图打开摄像头。Intent 将允许用户拍照（在这种情况下，它会将生成的照片与您的主要活动通信），并且还有一个取消按钮，该按钮可以在不拍照的情况下返回您的应用程序。

# file-upload - 在jquery中验证上传文件的大小

> ID：14197090
> 
> 赞同：0
> 
> 时间：2013-01-07T13:35:43.377
> 
> 标签：file-upload, validation

我写了这段代码：html：

```
 <input type="file" id="Gfile_1" class="upfile"/> 
```

jQuery：

```
$(document).ready(function(){       
$('.upfile').bind('change', function() {
var a=(this.files[0].size);
alert(a);
if(a > 80000);
{
    alert('large');
}

})

}); 
```

“alert(a)” 正确显示文件大小，但如果始终为真。为什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:59:15.220

> ...但如果总是正确的。为什么？

因为你有一个分号阻止了条件的其余部分......

```
if(a > 80000); // <- remove the semicolon
{
    alert('large');
} 
```

应该...

```
if(a > 80000) {
    alert('large');
} 
```

建议/提示：使用适当的缩进和格式将使这些错误更容易被发现。

```
$(document).ready(function() {       
    $('.upfile').bind('change', function() {
        var a=(this.files[0].size);
        alert(a);
        if(a > 80000) {
            alert('large');
        };
    });
}); 
```

# java - 输入键 JTextField

> ID：14197098
> 
> 赞同：2
> 
> 时间：2013-01-07T13:35:59.803
> 
> 标签：java, swing, awt, actionlistener, jtextfield

我有一个带有 Actionlistener 的 JTextField。现在我希望它在我按 Enter 时执行某些操作。我正在使用一个共享的 ActionListener 所以试图在 JTextField 上做一个 getSource 但它不起作用！希望任何人都可以提供帮助。

```
JTextField txtProductAantal = new JTextField(String.valueOf(WinkelApplication.getBasket().getProductAmount(productdelete)));
            txtProductAantal.setBounds(340, verticalPosition + i * productOffset, 40, 20);
            txtProductAantal.addActionListener(this);
            add(txtProductAantal); 

public void actionPerformed(ActionEvent event) {

        if (event.getSource() == btnEmptyBasket) {
            WinkelApplication.getBasket().empty();
            WinkelApplication.getInstance().showPanel(new view.CategoryList());
        }

        if(event.getSource() == txtProductAantal){
            String productgetal = txtProductAantal.getText();
            txtProductAantal.setText(productgetal);
            WinkelApplication.getInstance().showPanel(new view.Payment());
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:47:59.130

*   必须创建一个临时`Object`的比较

例如

```
 public void actionPerformed(ActionEvent event) {
        Object source = event.getSource();
        if (source == btnEmptyBasket) {
           //...........
        } else if (source == txtProductAantal) {
           //........... 
        } else {

        }
    } 
```

*   或者只有`JTextFields`（避免`instanceof`内部`if - else`声明）您可以`JTextField`直接将 Object 转换为

`JTextField source = (JTextField) event.getSource();`

编辑，

*   `one from the next adviced 17 problems.`

*   `please to read suggestion by @Andrew Thompson, again`

    *   `1) For better help sooner, post an SSCCE.`

    *   `2) txtProductAantal.setBounds(..)`

    *   `Use layouts to avoid the next 17 problems.`

我的代码按预期工作

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class JTextFieldAndActionListener implements ActionListener {

    private JFrame frm = new JFrame("JTextFieldAndActionListener");
    private JTextField one = new JTextField(10);
    private JTextField two = new JTextField();
    private JTextField three = new JTextField();

    public JTextFieldAndActionListener() {
        one.addActionListener(this);
        two.addActionListener(this);
        three.addActionListener(this);
        frm.setLayout(new GridLayout());
        frm.add(one);
        frm.add(two);
        frm.add(three);
        frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frm.setLocation(400, 300);
        frm.pack();
        frm.setVisible(true);
    }

    public void actionPerformed(ActionEvent event) {
        Object source = event.getSource();
        if (source == one) {
            System.out.println("firing from JTextField one");
        } else if (source == two) {
            System.out.println("firing from JTextField two");
        } else if (source == three) {
            System.out.println("firing from JTextField three");
        } else {
            System.out.println("something went wrong");
        }
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTextFieldAndActionListener ie = new JTextFieldAndActionListener();
            }
        });
    }
} 
```

在 ENTER 键上打印我

```
run:
firing from JTextField one
firing from JTextField two
firing from JTextField three
BUILD SUCCESSFUL (total time: 15 seconds) 
```

# java - 带有 jdbc 池的 tomcat 上下文异常

> ID：14197099
> 
> 赞同：2
> 
> 时间：2013-01-07T13:36:14.477
> 
> 标签：java, jakarta-ee, tomcat, web-applications

我有一个使用 Tomcat 服务器部署的 Web 应用程序，但我有一个例外。

名称 jdbc/_UserRight 与 Context 无关

这是我的背景：

```
<Resource name="jdbc/_UserRight" auth="Container"
    type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000"
    username="XXXXX" password="XXXXX" driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost:3306/userright" /> 
```

这是我的连接类：

```
public class ConnectionUserRight {
private Connection cnx;
private ConnectionPool connectionPool;

public ConnectionUserRight() throws ConfigFileReaderException, IOException,
        SQLException {
    connectionPool = new ConnectionPool();
}

public Connection getCnx() throws SQLException, NamingException {
    if (null == this.cnx) {
        this.cnx = connectionPool.getConnection("jdbc/_UserRight");
    } else {
        // Connexion already open
    }

    return cnx;
}

public void closeCnx() {
    connectionPool.closeConnection(this.cnx);
    this.cnx = null;
}
} 
```

编辑：

这是我的日志（第一行例外是法语）：

javax.naming.NameNotFoundException: Le Nom jdbc/_UserRight n'est pas lié à ce org.apache.naming.NamingContext.lookup(NamingContext.java:820) at org.apache.naming.NamingContext.lookup(NamingContext.java :168) 在 org.apache.naming.SelectorContext.lookup(SelectorContext.java:158) 在 javax.naming.InitialContext.lookup(InitialContext.java:411) 在 fr.la.connection.ConnectionPoolSQL.getConnection(ConnectionPoolSQL.java: 30) 在 fr.la.juserright.dao.ConnectionUserRight.getCnx(ConnectionUserRight.java:23) 在 fr.la.juserright.dao.UserDAO 的 fr.la.jproductbase.dao.ConnectionPool.getConnection(ConnectionPool.java:67) .readAll(UserDAO.java:74) 在 fr.la.juserright.service.UserModule.getAllUser(UserModule.java:31) 在 fr.la.juserright.service.ServiceUserRight.getAllUser(ServiceUserRight.java:281) 在 fr。拉juserright.managedbean.utilisateurBean.refreshuserList(utilisateurBean.java:53) 在 sun.reflect.NativeConstructorAccessorImpl 在 sun.reflect.NativeConstructorAccessorImpl 在 fr.la.juserright.managedbean.utilisateurBean.(utilisateurBean.java:49) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) .newInstance(NativeConstructorAccessorImpl.java:57) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 在 java.lang.reflect.Constructor.newInstance(Constructor.java:525) 在 java.lang.Class.newInstance0( Class.java:372) 在 java.lang.Class.newInstance(Class.java:325) 在 com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188) 在 com.sun.faces.mgbean.BeanBuilder .build(BeanBuilder.java:102) 在 com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409) 在 com.sun.faces。mgbean.BeanManager.create(BeanManager.java:269) 在 com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244) 在 com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)在 com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) 在 com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) 在 org.apache.el.parser.AstIdentifier.getValue (AstIdentifier.java:72) 在 org.apache.el.parser.AstValue.getTarget(AstValue.java:94) 在 org.apache.el.parser.AstValue.getType(AstValue.java:82) 在 org.apache。 el.ValueExpressionImpl.getType(ValueExpressionImpl.java:172) 在 com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:98) 在 org.primefaces.component.datatable.DataTable.isLazy(DataTable.java:968) 在 org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:191) 在 org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:108) 在 javax.faces.component.UIComponentBase.encodeEnd (UIComponentBase.java:875) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764) 在 javax.faces.render.Renderer.encodeChildren(Renderer.java:168) 在 javax.faces.component.UIComponentBase。 org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45) at org.primefaces.renderkit.coreRenderer.renderChildren(CoreRenderer.java:45) at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:57) 上的 encodeChildren(UIComponentBase.java:845) .LayoutUnitRenderer.encodeEnd(LayoutUnitRenderer.java:51) 在 javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java) :1760) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) 在 com.sun.faces.application.view.FaceletViewHandlingStrategy。 renderView(FaceletViewHandlingStrategy.java:402) at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131) at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) at com .sun.faces.lifecycle.Phase.doPhase(Phase.java:101) 在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 在 javax.faces.webapp.FacesServlet。org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 的服务(FacesServlet.java:594) org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 的 org.apache .catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java :472) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) 在 org.apache.catalina.valves 的 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)。 AccessLogValve.invoke(AccessLogValve.java:936) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol. java:589) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent .ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)589) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor $Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)589) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor $Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:48:08.610

看起来您的 connectionPool 只是在没有上下文的情况下创建的。尝试类似的东西 -

```
Context initCtx = new InitialContext();
Context envCtx = (Context) initCtx.lookup("java:comp/env");
this.cnx = (DataSource) envCtx.lookup("jdbc/_UserRight").getConnection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:02:01.503

我解决了：

```
public Connection getCnx() throws SQLException, NamingException {
    if (null == this.cnx) {
        this.cnx = connectionPool.getConnection("java:comp/env/jdbc/_UserRight");
    } else {
        // Connexion already open
    }

    return cnx;
} 
```

# sql-server - 检查 SQL Server 实例是否在本地计算机上？

> ID：14197103
> 
> 赞同：3
> 
> 时间：2013-01-07T13:36:34.857
> 
> 标签：sql-server

我想确定我要连接的 SQL Server 是否在本地计算机上。我知道有很多方法可以在连接到 SQL Server 时识别它的服务器\实例名称，但是可以指定服务器名称的方式有很多，我不想自己在 IP 地址之间进行比较, 机器名称, `(local)`, `LocalHost`,`.`等

SQL Server（任何版本 2000+）中有什么东西可以检查实例是否在本地计算机上，而无需自己进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:17:45.373

```
SELECT Case when HOST_NAME()=
       Case When CharIndex('\',@@SERVERNAME)=0 then @@SERVERNAME else LEFT(@@SERVERNAME,CharIndex('\',@@SERVERNAME)-1) end
       then 'local' else 'remote' end 
```

因为@@SERVERNAME 是在安装时定义的，并且可能已经更改（甚至通过 sp_addserver），所以您更喜欢：

```
SELECT Case when HOST_NAME()=SERVERPROPERTY('MachineName') then 'local' else 'remote' end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T07:06:09.677

```
SELECT CASE WHEN CAST(SERVERPROPERTY('MachineName') AS VARCHAR(100)) = CAST(HOST_NAME() AS VARCHAR(100)) THEN 'LOCAL' 
ELSE 'REMOTE' 
END 
```

# c# - C# 多字替换问题

> ID：14197106
> 
> 赞同：0
> 
> 时间：2013-01-07T13:36:41.627
> 
> 标签：c#, string, replace

考虑一下我希望文章中出现的每个短语“hello world”都替换为“I love apple”的情况。我应该如何编写代码来进行替换？

我知道我可以简单地使用 Replace 函数进行替换，但这不是最理想的方法（如果我指定替换单词“or”，它也会替换单词“for”等） . 我还有其他方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:47:06.223

我认为你可以使用正则表达式

```
using System;
using System.Text.RegularExpressions;
public class Test
{
   public static void Main()
   {
       string input = "doin some replacement";
       string pattern = @"\bhello world'\b";
       string replace = "I love apple";
       string result = Regex.Replace(input, pattern, replace);        
    }
} 
```

以下链接可能会有所帮助

[让 String.Replace 只打“整个单词”的方法](https://stackoverflow.com/questions/6143642/way-to-have-string-replace-only-hit-whole-words)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:54:15.773

您可以尝试使用 [正则表达式](http://msdn.microsoft.com/en-us/library/hs600312.aspx)和lookbehind：

```
String urstring = Regex.Replace(urstring,"(?<=\W)or|^or","SS") 
```

这将替换所有前面没有字母或数字的“或”事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:45:26.040

使用正则表达式。上面已经介绍过了，请参考以下内容：

1.  [如何替换 C# 中的特定单词？](https://stackoverflow.com/questions/884759/how-can-i-replace-a-specific-word-in-c)

2.  [用 .net 正则表达式替换字符串中的文本](https://stackoverflow.com/questions/3902706/replace-text-in-a-string-with-net-regexp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T13:41:38.703

尝试在这里使用正则表达式：

[如何替换 C# 中的特定单词？](https://stackoverflow.com/questions/884759/how-can-i-replace-a-specific-word-in-c)

或在这里：

[如何用括号替换 c# 中的特定单词？](https://stackoverflow.com/questions/11439039/how-can-i-replace-specific-word-in-c-sharp-with-parenthesis)

# sql-server-2008 - 删除字符串中某个字符后的所有内容

> ID：14197107
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:36:47.273
> 
> 标签：sql-server-2008

例如，我想删除字符串中包含 'rr' 之后的所有内容

12345rr234 应该是 12345

我试过（rcs）是我正在使用的变量

```
 rtrim(rcs,'rr') 
```

但我得到了错误

```
The rtrim function requires 1 argument(s). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:42:43.050

```
SUBSTRING(rcs,1,CHARINDEX('rr',rcs)-1) 
```

可以，前提是`rcs`始终实际包含一个`rr`序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:47:45.740

检查 rr 是否存在，如果不存在则返回完整值：

```
DECLARE @rcs varchar(50)
SET @rcs='12345rr234'
SELECT 
CASE WHEN CHARINDEX('rr',@rcs) > 0 THEN
    LEFT(@rcs,CHARINDEX('rr',@rcs)-1) ELSE
    @rcs
END 
```

# android - 如何从 SD 卡中检索图像

> ID：14197110
> 
> 赞同：0
> 
> 时间：2013-01-07T13:36:53.403
> 
> 标签：android, android-sdcard

我有这段代码可以从 SD 卡中检索图像。但它没有显示任何图片`ImageView`。我确定图像在 SD 卡上。

```
File f = new File("/mint/sdcard/e.jpg");

Bitmap bitmap = BitmapFactory.decodeFile(f.getAbsolutePath());
Toast.makeText(this, bitmap + "", 3).show();
bmImage.setImageBitmap(bitmap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:44:09.850

它不是`mint`它的`mnt`。让你的线，

```
File f = new File("/mnt/sdcard/e.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:53:48.857

```
public Bitmap readImageFromExternalMemory(String name) throws IOException
{
    File file = new File(Environment.getExternalStorageDirectory().toString()+"/"+name, userId + ".jpg");
    FileInputStream inStream = new FileInputStream(file);

    Bitmap bitmap = BitmapFactory.decodeStream(inStream);
    inStream.close();

    return bitmap;
} 
```

您不必使用`"/mnt/sdcard/e.jpg"`. 您必须使用此方法：

```
Environment.getExternalStorageDirectory().toString() 
```

因为它将返回外部目录的正确路径。制造商可以将其重命名为其他名称，因此您必须使用上述方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:39:20.797

改成这样

```
File f = new File("/mnt/sdcard/e.jpg");   
Bitmap bitmap = BitmapFactory.decodeFile(f.getAbsolutePath());
bmImage .setImageBitmap(bitmap); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:54:58.540

最好的办法是使用这个：

```
File sdcard = Environment.getExternalStorageDirectory();

File f = new File(sdcard+"/e.jpg"); 
```

现在它适用于所有 Android 手机

# forms - Crm 2011：对托管解决方案的非托管更改形成陷阱

> ID：14197111
> 
> 赞同：3
> 
> 时间：2013-01-07T13:36:56.417
> 
> 标签：forms, dynamics-crm-2011, unmanaged, managed

这些天来，我学到了很多关于托管和非托管解决方案的知识，而且我肯定看到了在生产中使用托管解决方案的很多好处。

我看到推荐的模式是拥有一个开发环境，您可以在其中使用非托管解决方案，导出解决方案的非托管和托管版本，最后将托管解决方案部署到生产环境（可能首先部署到暂存环境进行测试）。

这一切都非常好和干净，但并非没有陷阱。我最近经历了以下场景：

## 1.

我们使用上述模式为帐户实体创建和部署托管解决方案，并为客户安装它。该解决方案包含一个表单和一些其他东西，用于与遗留系统集成

草图：

托管部分

* * *

字段 A 字段 B

字段 C 字段 D

## 2.

在我不知情的情况下，客户继续使用“自定义”菜单自定义了帐户表单。他所做的是创建一个新的表单部分，并将我们托管解决方案中包含的一些自定义字段从原始部分移动到新部分

草图：

非托管部分

* * *

字段 A 字段 B

托管部分

* * *

字段 C 字段 D

## 3.

由于这是一项非托管更改，因此它优先于我的托管更改，在我进行其他一些更改（删除一些其他字段并更改表单上某些字段的顺序）之后破坏了表单布局

## 解决尝试：

当然，我已经尝试重新安装解决方案，还使用“覆盖自定义”选项，该选项承诺覆盖实体的非托管自定义，但这不会改变任何东西。

我还尝试删除新部分和作为非托管自定义移动的字段（使用自定义菜单），然后重新安装托管解决方案，希望这会以某种方式“撤消”非托管更改，并且差异机制会检测到有问题的字段仅存在于托管解决方案中，这将导致它们出现在原始位置。但事实证明，我似乎只是在石头上刻下更多的变化——这一次是告诉系统从表单中完全删除字段。

**真的可以这样吗，一旦您对表单进行了非托管更改，您的托管表单就被搞砸了？**

**有没有办法强制托管表单再次优先？**

我当然可以对表单进行更多非托管自定义以将字段放回原来的位置，但这只会将问题推迟到下一次我想更改托管表单中字段的顺序 - 非托管更改上次还是有优先权。

看来我唯一的选择是重新从头开始，或者切换到帐户实体的非托管制度。

## 得到教训：

如果这看起来很糟糕，我可能应该使用托管属性来禁止对我的托管解决方案中的表单进行自定义。如果这是一个自定义实体，我会这样做，但我认为这对于像帐户实体这样的实体来说有点严格。另一个教训可能是永远不要给客户系统管理员/定制者权限......

希望有一些其他的想法和经验。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-13T18:52:55.307

我知道我在这里聚会迟到了，但是对于它的价值以及遇到这篇文章的任何人，我都会加两分钱。我们有一个几乎与@TMan 提到的完全一样的设置，除了我们有一个 Dev、QA 和生产站点，其中 Dev 是不受管理的，并且我们的定制源以及 QA 和生产都是受管理的。我在解决方案和自定义分层过程上花费的时间比我希望的要多得多，以了解所有内容如何组合在一起以获得最终结果。我还在组合中添加了第三方托管解决方案。看到所有这一切的最终结果，我得出的结论是托管解决方案绝对不是要走的路，除了第三方解决方案提供商，但恕我直言，目标系统都应该使用非托管更改进行定制。我发现的一个主要问题是，当我将第三方托管解决方案引入我们的开发环境时，一旦我们将自己的定制导出为托管解决方案以部署到 QA 和生产环境，我们将依赖于该解决方案中的组件。有趣的是，一旦您转到 QA 或生产托管站点，开发站点上的分层和依赖项就会以相反的顺序翻转，因为您自己的自定义项从非托管变为托管，并且托管的自定义项按安装顺序应用系统中的日期。在此处不详细介绍，总结是这些依赖项一旦引入其中一个托管环境，就永远不会消失，除非您想要丢失数据，否则您无法卸载自己的自定义，在某些情况下，即使由于依赖关系而导致数据丢失，您也可能无法卸载解决方案。我们所有的环境都是 CRM Online，所以我们没有选择直接在数据库中乱搞来摆脱我们不想要的东西。这里的关键是要知道，在大多数情况下，一旦部署了托管解决方案，它就会永远存在，并且您只能在现有的基础上应用额外的非托管更改，您将无法清理未使用或不需要的成分。我花了很多时间做自己的研究和测试，也花了很多时间与微软通电话。不想要。这里的关键是要知道，在大多数情况下，一旦部署了托管解决方案，它就会永远存在，并且您只能在现有的基础上应用额外的非托管更改，您将无法清理未使用或不需要的成分。我花了很多时间做自己的研究和测试，也花了很多时间与微软通电话。不想要。这里的关键是要知道，在大多数情况下，一旦部署了托管解决方案，它就会永远存在，并且您只能在现有的基础上应用额外的非托管更改，您将无法清理未使用或不需要的成分。我花了很多时间做自己的研究和测试，也花了很多时间与微软通电话。

**底线：** 多站点设置的托管解决方案（例如从开发到 QA 和/或生产）是一种非常糟糕的方法，您正在失去灵活性，并且在某些情况下可能会碰壁。你最好保持一切不受管理，并拥有你期望的灵活性来正确定制你的系统

# c# - 我们可以在单视图剃须刀中使用多个 html.begin 吗？

> ID：14197112
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:36:58.960
> 
> 标签：c#, razor, asp.net-mvc-4

我正在处理博客文章嵌套评论。

我已经习惯了 html.beginform 一个用于添加新评论，另一个用于回复。

我的观点：

```
 <fieldset class="new-comment">
            <legend class="title">@T("Blog.Comments.LeaveYourComment")</legend>
            @using (Html.BeginForm())
            {
                <div id="newcomment">
                    <div class="message-error">@Html.ValidationSummary(true)</div>
                    @{
                string result = TempData["nop.blog.addcomment.result"] as string;
                    }
                    @if (!String.IsNullOrEmpty(result))
                    {
                        <div class="result">@result</div>
                    }
                    <div class="forms-box">
                        <div class="inputs">
                            @Html.LabelFor(model => model.AddNewComment.CommentText)
                            <div class="input-box">
                                @Html.TextAreaFor(model => model.AddNewComment.CommentText, new { @class = "comment-text" })
                            </div>
                            @Html.ValidationMessageFor(model => model.AddNewComment.CommentText)
                        </div>
                        @if (Model.AddNewComment.DisplayCaptcha)
                        {
                            <div class="captcha-box">
                                @Html.Raw(Html.GenerateCaptcha())
                            </div>
                            <div class="clear">
                            </div>
                        }
                    </div>
                    <div class="clear">
                    </div>
                    <div class="buttons">
                        <input type="submit" name="add-comment" class="button-1 blog-post-add-comment-button" value="@T("Blog.Comments.SubmitButton")" />
                    </div>
                </div>

            }
        </fieldset> 
```

回复：

```
 <div class="container">

                @{//to set div id in comment list
            var Count = 0;
            var CommentParentID = 0;       }
                @using (Html.BeginForm())
                {

                    foreach (var commentlist in Model.Comments.Where(x => x.CommentParentID == 0))
                    {

                    <div class="nested-comments">

                        <div>
                            @if (commentlist.AllowViewingProfiles)
                            {
                                <a href="@Url.RouteUrl("CustomerProfile", new { id = commentlist.CustomerId })" class="username">@(commentlist.CustomerName)</a>
                            }
                            else
                            {
                                <span class="username">@(commentlist.CustomerName)</span>
                            }
                            <div class="avatar">
                                @if (!String.IsNullOrEmpty(commentlist.CustomerAvatarUrl))
                                {
                                    <img src="@(commentlist.CustomerAvatarUrl)" class="avatar-img" title="avatar" alt="avatar" />
                                }
                            </div>

                            <div class="comment-content">
                                <div class="comment-time">
                                    @T("Blog.Comments.CreatedOn"): <span class="stat-value">@commentlist.CreatedOn.ToString("g")</span>

                                        <div>
                                            <div id="div_@Count" style="display: none;">
                                                @{CommentParentID = commentlist.Id;
                                                  Model.AddNewComment.CommentParentID = CommentParentID;}

                                                <div>

                                                     <div class="message-error">@Html.ValidationSummary(true)</div>
                                                @{
                                              string strresult = TempData["nop.blog.addcomment.result"] as string;                                  
                                                }
                                                @if (!String.IsNullOrEmpty(strresult))
                                                {
                                                    <div class="result">@strresult</div>
                                                }
                                                    <div>
                                                        <div id="ChildComment_@Model.AddNewComment.CommentParentID">
                                                            @Html.HiddenFor(modelComment => modelComment.AddNewComment.CommentParentID)
                                                            @Html.Label("Reply Comment")
                                                            <div>
                                                                @Html.TextAreaFor(modelComment => modelComment.AddNewComment.ChildCommentText)
                                                            </div>
                                                             @Html.ValidationMessageFor(modelComment => modelComment.AddNewComment.ChildCommentText,"Please Enter Reply")
                                                        </div>

                                                        @if (Model.AddNewComment.DisplayCaptcha)
                                                        {
                                                            <div class="captcha-box">
                                                                @Html.Raw(Html.GenerateCaptcha())
                                                            </div>
                                                            <div class="clear">
                                                            </div>
                                                        }
                                                    </div>
                                                    <div class="clear">
                                                    </div>
                                                    <div class="buttons">
                                                        <input type="submit" name="reply-comment"  value="@T("Blog.Comments.ReplyButton")" />
                                                    </div>
                                                </div>
                                                <div class="clear">
                                                </div>

                                            </div>

                                            <input type="button" id="reply" class="reply-link" onclick="return showHide('div_@Count');" value="Reply" />
                                            @{Count++; }
                                        </div>

                                </div>
                                <div class="comment-body">
                                    @Html.Raw(Nop.Core.Html.HtmlHelper.FormatText(commentlist.CommentText, false, true, false, false, false, false))
                                </div>
                            </div>

                            <div class="clear">
                            </div>

                            @foreach (var cmt in Model.Comments.Where(x => x.CommentParentID == commentlist.Id))
                            {
                                <div class="comment">
                                    <div>
                                        <div class="user-info">
                                            @if (cmt.AllowViewingProfiles)
                                            {
                                                <a href="@Url.RouteUrl("CustomerProfile", new { id = cmt.CustomerId })" class="username">@(cmt.CustomerName)</a>
                                            }
                                            else
                                            {
                                                <span class="username">@(cmt.CustomerName)</span>
                                            }
                                            <div class="avatar">
                                                @if (!String.IsNullOrEmpty(cmt.CustomerAvatarUrl))
                                                {
                                                    <img src="@(cmt.CustomerAvatarUrl)" class="avatar-img" title="avatar" alt="avatar" />
                                                }
                                            </div>
                                        </div>
                                    </div>
                                    <div class="comment-content">
                                        <div class="comment-time">
                                            @T("Blog.Comments.CreatedOn"): <span class="stat-value">@cmt.CreatedOn.ToString("g")</span>
                                        </div>
                                        <div class="comment-body">
                                            @Html.Raw(Nop.Core.Html.HtmlHelper.FormatText(cmt.CommentText, false, true, false, false, false, false))
                                        </div>
                                    </div>

                                </div>
                            }
                            @Html.Widget("blogpost_page_inside_comment")

                        </div>
                    </div>

                    }

                }

            </div> 
```

当我单击回复按钮时，我无法获取 modelComment => modelComment.AddNewComment.ChildCommentText 的参数值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:40:55.597

是的，您可以在一个页面上拥有多个表单，只要其中一个不嵌套在另一个内即可。

调试时会发生什么？它是否进入了正确的 Action 而只是不传递任何值？

# visual-studio-2010 - Visual Studio - 如何在监视视图中列出数组的内容

> ID：14197113
> 
> 赞同：1
> 
> 时间：2013-01-07T13:37:00.737
> 
> 标签：visual-studio-2010

我知道在 Visual Studio 的监视视图中，有一种方法可以列出数组中的多个元素。我虽然是通过添加`,5`到表达式的末尾（例如查看前五个元素）。

现在在我的手表表达式中，我正在添加：

```
NetworkInterface.GetAllNetworkInterfaces()[0].GetIPProperties().UnicodeAddresses[0] 
```

查看网络适配器的第一个地址。我确信我能做到：

```
NetworkInterface.GetAllNetworkInterfaces()[0].GetIPProperties().UnicodeAddresses,5 
```

允许我扩展前五个条目，但我无法让它工作。关于实际语法的任何建议？

（如果 stackoverflow 是这个问题的最佳位置，我不肯定，但它似乎与编程相关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:51:19.883

它被称为**格式说明符**，我的事情取决于您使用的语言......

例如：[C++ 中的格式](http://msdn.microsoft.com/en-us/library/75w45ekt%28v=vs.80%29.aspx)说明符列表与[C# 中](http://msdn.microsoft.com/en-us/library/e514eeby.aspx)的格式说明符。

我不知道通过监视窗口自动展开前 n 个结果的选项

# python - OpenERP6.1中点击保存按钮时调用哪个函数

> ID：14197116
> 
> 赞同：3
> 
> 时间：2013-01-07T13:37:13.717
> 
> 标签：python, openerp

在 OpenERP6.1 中单击保存按钮（在随附的屏幕截图中标记为红色）时会调用哪个函数？

提前致谢！！！![开瓶器](../Images/3a041831ba77907c897d3f3d95008e10.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T17:33:19.870

为了详细说明 DReispt 的答案，您的屏幕截图似乎突出显示了现有记录表单的 One2Many 字段中可编辑[One2Many行的保存按钮。](http://doc.openerp.com/v6.1/developer/03_modules_2.html#relational-types)One2Many 行被视为其父记录的*子*记录，因此它们应该与其他记录数据一起以原子方式（在单个 RPC 调用中）保存。

从这个意义上说，屏幕截图上突出显示的保存按钮**不会**直接调用服务器上的任何方法，它只是将更改保存在浏览器的本地缓存中。**真正**调用（如果这`create`是一条新记录）或`write`（如果正在更新记录）只有在您之后单击父记录表单的主*保存按钮时才会完成。*

此时，该行的值将在提供给[`create`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.create)/的值映射中传递[`write`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.write)，在 One2Many 命令列表中。[`write`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.write)有关设置 One2Many 字段值的更多信息，另请参阅文档。

顺便说一句，在 OpenERP 中调查 RPC 调用非常简单：

*   在服务器端，您可以使用参数启动`openerp-server`进程`--log-level=debug_rpc_answer`以获取所有 RPC 调用的详细日志记录
*   在 Web 客户端，您可以简单地使用 Web 浏览器的调试器来监视所有 RPC 调用（在网络监控选项卡中）。大多数 JSON-RPC 调用对应于常规的 OpenERP [ORM 方法调用](http://doc.openerp.com/v6.1/developer/03_modules_2.html#orm-methods)，一旦您熟悉了 OpenERP RPC API，就可以轻松阅读。

注意：以上不是 OpenERP 6.1 特有的，它在 7.0 中的工作方式相同（尽管 6.0 和更早版本的 web 客户端对 one2many 字段有不同的行为）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T15:50:51.823

保存按钮将为该模型运行[ORM 方法。](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/methods.html#)对于新记录，这是`create()`方法，对于更新记录，它是`update()`方法。

这些标准方法可以在模型中被覆盖以实现附加功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T05:33:35.237

您的模型是`orm.Model'. There are methods in`类 BaseModel save``(BaseModel is inherited by Model) which will be call for the`记录的子类。这些方法是

```
def create(self, cr, user, vals, context=None) 
```

如果要更改任何模型的任何行为，则必须覆盖此方法。

# verilog - 算术移位充当逻辑移位，与有符号变量无关

> ID：14197117
> 
> 赞同：7
> 
> 时间：2013-01-07T13:37:18.007
> 
> 标签：verilog, bit-shift, system-verilog

我有一个这样声明的寄存器：

```
logic signed [15:0][2:0][15:0] registers; 
```

当我将 2 的补码数放入数组并算术移位该数字时，它会进行逻辑移位：

```
registers[0][0] = 16'b1000000000000000;
registers[0][0] = registers[0][0]>>>2; 
```

显然，如果数字没有符号，系统将进行逻辑移位而不是算术移位。但是，您可以清楚地看到，“寄存器”肯定是签名的。

有人知道我在这里可能会错过什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T13:50:09.277

使用 Verilog，一旦您进行部分选择，结果就是`unsigned`. 使用`$signed`部件选择上的系统任务使其签名。

```
res = $signed(registers[0][0]) >>> 2; 
```

# java - 如何使用 URL 编码器将“C\u9999”编码为 %22C\u9999%22

> ID：14197119
> 
> 赞同：0
> 
> 时间：2013-01-07T13:37:20.893
> 
> 标签：java, scala, url

标题几乎概括了它。

我需要设置一个查询参数，`"C\u9999"`其最终应为`%22C\u9999%22`. 我最接近的是在 URLEncoder 咀嚼它之后结束的`"C\\u9999"`。`%22C%25%5Cu9999%22`

编辑

我正在尝试对 couchdb 进行 Web 服务调用，我在其中设置 url，`contract?startkey="C"&endkey="C\u9999"`以便我可以进行部分键匹配。当我在浏览器中输入它时，一切正常，我可以在 CouchDB 的日志中看到请求 url 是`contract?startkey="C"&endkey="C\u9999"`. 我正在尝试以编程方式复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:50:08.877

Unicode 转义（\u9999 部分）是 Java 字符串中单字符表示的一种方法。它们允许您输入文本编辑器可能不支持的某些 Unicode 字符（例如，当您使用不支持 UTF-8 的文本编辑器时）。

URLs / URIs 不使用相同的字符表示方案。他们使用一系列 %xy 转义序列，而不是`\uXXXX`转义序列，因此您的字符串将始终在不保留 \u unicode 转义序列的情况下出现，并且永远不会出现，`%22C\u9999%22`因为该`\u9999`部分不能是有效 URL 的一部分。

当您选择编码时，`\\u9999`您并*没有*编码单个 Unicode 字符，因为您已经对首字母进行了双重转义，`\`这意味着您实际上编码了六个字符，而不是一个、一个`\`字符、一个`u`字符和四个`9`字符。

在任何情况下，实际使用支持 UTF-8 的编辑器几乎总是更好，并找出在不使用 Java Unicode 转义值的情况下实际输入相关字符的方法。它也将扩展为缺少 Java 字符串特定转义序列的内容，因为 URL 不是根据 Java 字符串的确切编码规则构造的。但是，通过使用支持 UTF-8 的编辑器，您不会觉得`\u9999`应该保留 UTF-8。因为，该表示首先不会出现在初始字符串中（实际的 unicode 字符将在那里）。

# algorithm - Merkle 树数据同步误报

> ID：14197136
> 
> 赞同：8
> 
> 时间：2013-01-07T13:38:34.193
> 
> 标签：algorithm, cassandra, probability, amazon-dynamodb, hashtree

Merkle 树（又名哈希树）用于“Cassandra”和“Dynamo”中的数据同步。

与任何散列函数一样，不同的数据有可能具有相同的散列值：

存在 x 和 y，其中 [y!=x] 但 [hash(x) = hash(y)]

随着 NOSQL 中“大数据”的增长，遇到此类数据的概率也越来越高。

这意味着随着数据集变得越来越大，几乎可以肯定 Merkle 树中的不同节点将产生相同的父哈希。

在这种情况下，当集群中的两台不同的机器遍历它们的默克尔树时，它们会得到一个误报，认为它们的数据是一致的。如果没有更多数据写入树的该分支，则机器将永远保持不同步。

这是如何处理的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T14:01:16.130

大多数系统不处理这个。为什么？因为具有相同哈希值的两个不同输入的概率非常非常低。使用良好的哈希函数（我认为您正在使用），这应该接近 1/2^{hash-bits}。并且由于用于这些目的的大多数哈希至少有 128 位长，因此您得到这种冲突的概率为 1/2^128。大约是 2.9387359e-39 (0.{38 zeroes}29387359)。

使用 160 位散列（这些系统中的大多数使用 SHA-1 散列）就足够了，当您的数据库中的对象与世界上的沙粒一样多时。你仍然有不到 1/2 的概率会发生这样的碰撞。因此，我不会担心发生碰撞的情况。发生这种情况的概率，实在是太低了。

# jquery - jQuery 从单击变为悬停

> ID：14197140
> 
> 赞同：0
> 
> 时间：2013-01-07T13:38:53.960
> 
> 标签：jquery, menu, hover

我对 jQuery 有疑问。我创建了一个具有该功能的菜单，`.click`但现在当我单击链接 COLLECTIONS 时，我需要在悬停菜单中转换此菜单。

这是 jQuery 代码：

```
$(document).ready(function(){
  $("div#toggle a.button").click(function () {
    $("div#toggle div.box").toggle("slow");
});
hidden = true;
$("div#custom a.button").hover(function () {
  if(hidden == false) {
    $("div#custom div.box").fadeOut();
    hidden = true;
  } else {
    $("div#custom div.box").fadeIn(100);
    hidden = false;
  }
}); 
```

这是CSS代码：

```
#custom {
  z-index:0;
}

.box {
  width:100%;
  height:20px;
  border:0px solid #999;
  background-color:rgb(128, 129, 132);
  display:none;
  position:fixed;
  left:0;
  margin-top:6px;
  z-index:0;
  font-family:Arial, Helvetica, sans-serif;
  font-size: 10px;
  color:#E6E4D7;
} 
```

该页面位于[http://www.mediaxsrl.it/web/loloey/forme/formeit.html](http://www.mediaxsrl.it/web/loloey/forme/formeit.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:45:43.293

尝试这个

```
$("#custom").hover(function() { 
    $(this).find("box").slideDown(); 
} , function() {  
    $(this).find("box").hide(); 
}); 
```

# web-services - Jersey 测试框架：集成测试通过一次运行一个，但在运行多个时失败

> ID：14197143
> 
> 赞同：0
> 
> 时间：2013-01-07T13:39:07.187
> 
> 标签：web-services, jersey, integration-testing, testng

正如标题所说，每当我使用 Jersey 测试框架运行集成测试时，当我一次进行一项测试时它们就会通过。当我在我的项目上进行清理和构建时，它通过了一些测试，但在两个或三个测试中失败了。

```
A message body reader for Java class com.foo.Result, and Java type class com.foo.Result, and MIME media type application/octet-stream was not found

com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
com.sun.jersey.core.impl.provider.entity.FileProvider
com.sun.jersey.core.impl.provider.entity.InputStreamProvider
com.sun.jersey.core.impl.provider.entity.DataSourceProvider
com.sun.jersey.core.impl.provider.entity.RenderedImageProvider */* ->
com.sun.jersey.core.impl.provider.entity.FormProvider
com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
com.sun.jersey.core.impl.provider.entity.StringProvider
com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
com.sun.jersey.core.impl.provider.entity.FileProvider
com.sun.jersey.core.impl.provider.entity.InputStreamProvider
com.sun.jersey.core.impl.provider.entity.DataSourceProvider
com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
com.sun.jersey.core.impl.provider.entity.ReaderProvider
com.sun.jersey.core.impl.provider.entity.DocumentProvider
com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader
com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader
com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader
com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy
com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General
com.sun.jersey.core.impl.provider.entity.EntityHolderReader 
```

我的 Web 服务资源在方法上有一个 @Produces 和 @Consumes 注释，不明白为什么当代码基本相同时它有些通过而有些失败。

网络资源的片段：

```
@Path("/data")
@RolesAllowed({"upload"})
@Component
@Scope("request")
public final class UploadData {

   @POST
   @Consumes("application/vnd.foo.data-v1.0.0+xml")
   @Produces("application/xml")
   public Response uploadData(final Data data) {
        // Processes the data and returns the response
        return getResponse(data, null);
   }
} 
```

我所有的集成测试都是这样的：

```
ClientResponse response = resource().path("123_10").entity(getData(), "application/vnd.foo.data-v1.0.0+xml").post(ClientResponse.class);
Result result = response.getEntity(Result.class); // Seems to fail on this line for some tests 
```

这是我的其他测试类继承自的主要测试类：

```
public abstract class AbstractRestTest {

    private static final String PACKAGE = UploadData.class.getPackage().getName();
    private static JerseyTest jerseyTest;
    private Data data;

    /**
     * Initializes the Jersey Test to use for testing.
     */
    @BeforeSuite
    public final void init() {
        jerseyTest = new JerseyTest(new WebAppDescriptor.Builder(PACKAGE)
                     .contextPath("rest").contextParam("contextConfigLocation",
                     "classpath:testApplicationContext.xml")
                     .servletClass(SpringServlet.class)
                     .contextListenerClass(ContextLoaderListener.class)
                     .requestListenerClass(RequestContextListener.class).build()) {
        };
    }

   /**
    * Gets the Jersey Test client.
    *
    * @return - the Jersey Test client.
    */
    public final Client client() {
        return jerseyTest.client();
    }

    /**
     * Gets the Jersey Test web resource.
     *
     * @return - the Jersey Test web resource.
     */
    public final WebResource resource() {
       return jerseyTest.resource().path("data");
    }

    /**
     * Sets up the necessary code to run the tests.
     *
     * @throws Exception if it cannot set up the test.
     */
    @BeforeTest
    public final void setUp() throws Exception {
        jerseyTest.setUp();
        data = new Data();
    }

    /**
     * Tears down the resources after the tests.
     *
     * @throws Exception if it cannot tear down the test.
     */
    @AfterTest
    public final void tearDown() throws Exception {
        jerseyTest.tearDown();
    }

    /**
     * Get the data.
     *
     * @return - the data.
     */
    public final Data getData() {
       return data;
    }

    /**
     * Set the data.
     *
     * @param theData - the data.
     */
     public final void setData(final Data theData) {
        this.data = theData;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:26:02.517

解决了！AbstractRestTest 的 setup 方法中不能有任何代码。一旦我删除它并且只调用 JerseyTest.setup() 我所有的单元测试都通过了。

```
/**
 * Sets up the necessary code to run the tests.
 *
 * @throws Exception if it cannot set up the test.
 */
@BeforeTest
public final void setUp() throws Exception {
    jerseyTest.setUp();
    data = new Data(); // Removed and set it in the tests I needed it to be in, this was the problem having this line before or after the jerseyTest.setup()
} 
```

# java - 在 Hibernate 返回的 List 上调用 List#toArray() 时出现 ArrayStoreException

> ID：14197149
> 
> 赞同：2
> 
> 时间：2013-01-07T13:39:25.597
> 
> 标签：java, arrays, hibernate

我正在尝试将`List`Hibernate 返回的转换为`UserDetails[]`数组，如下所示：

```
SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
Session session = sessionFactory.openSession();
session.beginTransaction();
List<UserDetails[]> oo = session.createSQLQuery("SELECT * FROM `userdetails` WHERE 1 ").list();
System.out.println(oo.size()); // Until here it works fine and it shows me the rows I asked in my query.
UserDetails[]us = oo.toArray(new UserDetails[oo.size()]); // Here it throws java.lang.ArrayStoreException
session.close(); 
```

但是，它会抛出一个`java.lang.ArrayStoreException`. 这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:46:18.630

您可以直接打印列表：

```
for(UserDetails list: oo){
    System.out.println("Result"+ list.toString());
} 
```

或获取具体数据

```
for(UserDetails list: oo){
    System.out.println("Result"+ list.getId());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:48:36.527

该错误表明已尝试将错误类型的对象存储到对象数组中。请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ArrayStoreException.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ArrayStoreException.html)

# asp.net-mvc - 将集合从 WCF 传递到控制器操作：它将一些导航对象作为“null”发送

> ID：14197155
> 
> 赞同：0
> 
> 时间：2013-01-07T13:39:45.187
> 
> 标签：asp.net-mvc, wcf, linq-to-entities

以下是我的表格的结构。

```
Table: Customer
Columns: Id, CityId, Name, IsActive

Table: City
Columns: Id, CityName 
```

我有一个返回客户集合 (IList) 的 WCF 方法当我在 WCF 客户端和调试模式下测试它时，该方法在客户集合中返回“City”对象，但是当结果从 WCF 服务传递到 MVC行动它发送一些城市为空。这很奇怪，因为我可以在 WCF 调用中的 return 语句处看到“City”对象被执行，但在 MVC 控制器动作中，对于集合中的某些客户来说，城市并不存在。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:40:39.873

所有非原始属性都必须标记为可序列化，以确保在 UI/中间层接收数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:53:39.813

定义为返回类型的类型需要“Serializable”属性。

# php - 如何在php中动态创建对象

> ID：14197161
> 
> 赞同：1
> 
> 时间：2013-01-07T13:40:12.853
> 
> 标签：php, class, object, dynamic

我有一个 X 类，我可以从那里访问我的应用程序的其余类。这种访问是动态完成的。下面的示例代码（[这里是演示](http://codepad.org/iyiB4vwx)）：

```
<?
class ClassX
{
    var $ClassA;
    var $ClassB;

    function __construct()
    {
        $this->ClassA = new ClassA();
        $this->ClassB = new ClassB();
    }
}

class ClassA
{
    function methodA($param)
    {
        echo $param;
    }
}

class ClassB
{
    function methodB($param)
    {
        echo $param + 1;
    }
}

/*I can do this for class A*/
$class = "ClassA";
$method = "methodA";
$param = array("some text");

/*or this for class B*/
//$class = "ClassB";
//$method = "methodB";
//$param = array(5);

$objX = new ClassX();
$chain = $objX->{$class};
call_user_func_array(array($chain, $method), $param);
?> 
```

我在想是否可以更进一步，摆脱 X 中的显式对象实例。

在上面的代码中，我“卡住”了 A 和 B。

我正在寻找一种方法来构建一个加载不同模块但不知道将首先加载哪些模块的应用程序。所以如果明天我有一个 C 模块，我不必更改 X。如果我不再支持 B，同样适用。

我在 X 中尝试过这样的事情：

```
 function __get($object)
    {
        $this->$object = new $object();
    } 
```

但后来我得到一个无效的回调错误，所以我猜 call_user_func_array 不在表中

有可能做我想要达到的目标吗？

**解决方案**：

[斯派瑞克成功](https://stackoverflow.com/users/1162625/spyric)了！我只需要在 __get() 中返回

```
function __get($object)
{
    $this->$object = new $object();
    return $this->$object;
} 
```

最终代码[在这里](http://codepad.org/SE0je6FT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:52:08.110

过去我需要类似于存储数据的东西。代码看起来很精简：

```
class ClassX
{
    var classes = array();

    function __construct()
    {
    }
} 
```

和吸气剂：

```
function __get($object)
{
    if(!isset($this->classes[$object]))
        $this->classes[$object] = new $object();
    return $this->classes[$object];
} 
```

**UPD：** 之后你可以使用

```
$class = "ClassC";
$method = "methodA";
$param = array("some text");

$objX = new ClassX();
$chain = $objX->{$class}; 
```

并且 $chain 将有来自 ClassC 的对象

如果您不需要为每个调用重置对象的值`$objX->{$class}`remove `if(!isset($this->classes[object]))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:49:28.387

似乎您需要动态构建这些对象。尝试反射扩展，这是一个示例：

```
$dateTimeRefl = new ReflectionClass('DateTime');
$dynamicallyBuildDateTime = $dateTimeRefl->newInstance('2013-01-01'); 
```

有两种方法：newInstance() 和 newInstanceArgs()，它们等效于 call_user_func() 和 call_user_func_array()。

为此，您需要 PHP 5.2 或更新版本。

# c# - C# long 类型的等效 SQL Server 类型是什么？

> ID：14197162
> 
> 赞同：85
> 
> 时间：2013-01-07T13:40:16.957
> 
> 标签：c#, sql-server

我想知道`long`C# 中的等效 SQL Server 类型是什么。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-01-07T13:43:47.150

[映射表](http://msdn.microsoft.com/en-us/library/cc716729.aspx)很清楚 -`BIGINT`相当于`Int64`（`long`在 C# 中）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-07T13:42:33.283

等效类型是[`bigint`](http://msdn.microsoft.com/en-us/library/ms187745.aspx)64 位数字类型。

它适合与[C#](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/long) [type](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/long)相同的范围 from `-2^63`to的数字。`2^63-1`[`long`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/long)

# android - Android 创建 Word (doc) 文件

> ID：14197164
> 
> 赞同：-2
> 
> 时间：2013-01-07T13:40:18.490
> 
> 标签：android, ms-word

我在 Web 服务器上有一个程序，它从用户输入的表单创建一个 .doc 文件。用户单击提交它立即要求用户查看或保存。它是用 asp.net (VB.net) 编写的，而且效果很好。我有一个 Android 应用程序，我正在尝试访问该表单并执行相同的操作。当我访问表单并单击提交时，它将表单页面保存为手机的文档部分中的 HTML。

有没有办法从 Web 服务器的用户表单创建 Word 文件，或者我可以重写它以从移动应用程序内部执行它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:55:21.830

正如您所说，表单是在 VB.Net(ASP.Net) 中，因此您的问题通常与 MS .Net 技术有关，而不是 Android。您最好使用[Word Object Model](http://msdn.microsoft.com/en-us/library/office/ee836186%28v=office.14%29.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T13:46:11.720

假设您在 Java 领域，那么您可以使用[**Apache POI**](http://poi.apache.org/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-18T10:33:01.230

你应该试试 Apache [POI 库。](http://poi.apache.org/) 该库支持读取、写入和获取所有 Microsoft Office 文档（如 doc、ppt 和 xls 文件）的属性。这是一个如何使用它的示例。希望能帮助到你。

# android - 渐变绘制不起作用

> ID：14197174
> 
> 赞同：0
> 
> 时间：2013-01-07T13:40:56.843
> 
> 标签：android, drawable

我正在尝试创建一个从中心向外的渐变。（或向内）。所以外面是相同的颜色，当你靠近中心时，它会变成红色或其他东西。

```
<?xml version="1.0" encoding="utf-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"
    >

    <gradient 
          android:startColor="#ffffff"
            android:endColor="#ff00ff00"
            android:centerX="50%"
            android:centerY="50%"
            android:gradientRadius="50%"
            android:type="radial"
        />
</shape> 
```

![在此处输入图像描述](../Images/a07509ddab88ebe9a3f842c7b520c927.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:43:43.543

尝试这样做

```
 <gradient android:type="radial" android:gradientRadius="50"
    android:startColor="#ffffff"
        android:endColor="#ff00ff00" /> 
```

基本上尝试不使用 gradientRadius 的百分比

# javascript - 在 JavaScript 中将字符串转换为日期

> ID：14197175
> 
> 赞同：4
> 
> 时间：2013-01-07T13:40:58.437
> 
> 标签：javascript, date

我有一个看起来像这样的字符串：

```
"2013/1/16" 
```

有什么方法可以快速将其转换为 javascript 中的日期对象，例如：

```
convertToDateTime("2013/1/16", "yyyy/MM/dd") 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-07T13:42:15.253

这很简单：

```
var myDate = new Date("2013/1/16"); 
```

这应该够了吧。
查看[Date 对象的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-09-18T02:45:51.627

var myDate = new Date("2013/1/16");

var str = "2013/1/16"; var strToDate = 新日期（str）；

# java - 使用 SimpleTable 数据填充 JCombobox

> ID：14197180
> 
> 赞同：0
> 
> 时间：2013-01-07T13:41:22.663
> 
> 标签：java, eclipse, swing, components

我有一张这样的桌子：

表角色：

```
super("ROLES", // Name
            true,   // Can insert
            true,   // Can modify
            true,   // Can delete
            true,   // Supports events
            "system_table_data/roles.dat",   // don't Journal to disk
            1, // Read Access Level
            1, // Write Access Level (controlled via GUI)
            // Field Info
            new Object[][] {// Key    Name               Type         Read  Write  Insert  Modify
                           {PK_FIELD, "ROLE_ID",         "ROLE_ID",   YES,  YES,    NO,     NO},  // 0 BYTE
                           {NM_FIELD, "ROLE_NAME",       "STRING_80", YES,  YES,    YES,    YES}, // 1 
                           {NM_FIELD, "SHIFT_PATTERN_ID","SHIFT_PAT", YES,  YES,    YES,    YES}, // 2 BYTE
                           {NM_FIELD, "START_DATE",      "CS_TIME",   YES,  YES,    YES,    YES}, // 3
                           }
           ); 
```

和

表移位模式：

```
super("PATTERNS", // Name
            true,   // Can insert
            true,   // Can modify
            true,   // Can delete
            true,   // Supports events
            "system_table_data/patterns.dat",   // don't Journal to diskmember_hna
            1, // Read Access Level
            1, // Write Access Level (controlled via GUI)
            // Field Info
            new Object[][] {// Key    Name               Type         Read  Write  Insert  Modify
                           {PK_FIELD, "NAME_ID",    "PATNAME_ID",     YES,  YES,    NO,     NO},  // 0
                           {NM_FIELD, "NAME",       "STRING_80",      YES,  YES,    NO,    YES},  // 1
                           }
           ); 
```

我正在使用 JTables 并弹出带有字段的对话框来填充表格并将信息存储在诸如这两个表格中。

这一切都在一个选项卡式窗格中：一个用于角色的选项卡和一个用于轮班模式的选项卡。

在 Roles 窗格中，对话框有一个组合框，应该由 Shift Patterns 的名称填充，我想知道一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:05:15.067

而不是直接为什么不拥有一个`Object[]`像方法一样的自定义类，然后只用? （[API 链接](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JComboBox.html#JComboBox%28java.lang.Object%5B%5D%29)）然后它将使用该方法将模式文本显示为选择，您可以获得选择并使用它做任何您需要的事情。`Pattern[]``toString()``JComboBox(Object[])``Pattern[]``toString()``Pattern`

# c# - nservicebus - 多个端点错误

> ID：14197184
> 
> 赞同：4
> 
> 时间：2013-01-07T13:41:25.160
> 
> 标签：c#, nservicebus

我收到这条消息：

> Host 不支持托管多个端点。找到端点类：foo.bar.Service.Endpoint.PublisherConfig、foo.bar.Service.Endpoint、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null、foo.bar.Service.Endpoint.PublisherConfig、foo.bar。 Service.Endpoint, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 您的运行时目录中可能有一些旧程序集。尝试右键单击您的 VS 项目，然后选择“清理”。

我曾尝试清理项目，但没有运气。如果我关闭 VS 并重建解决方案，它会工作一次，然后再次停止工作。这也是我在网上能找到的唯一解决方案。

我觉得奇怪的是，它似乎说它两次找到了相同的端点？

编辑：我查看了 bin 文件夹和创建的文件。我找到了这些文件：

> foo.bar.Service.Endpoint.dll foo.bar.Service.Endpoint.mm.dll

将此与同事的 bin 文件夹进行比较，他没有带有 .mm.dll 的文件，并且他的工作正常。系统不同，是我跑win8，他跑win7。都在 vs2012 上，以及相同的源代码等...

当我删除 .mm.dll 文件时，它可以工作并运行，但是在重建时它会再次出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:14:06.343

您的问题不是 NServiceBus 而是 Mighty Moose (ContinuousTests)。

MM 正在您的 bin/Debug 文件夹中创建一个名为 [assemblyname].mm.dll 的文件。禁用 MM，你应该没问题（只是暂停 MM 引擎是不够的）。

# c# - 从 Telerik Sitefinity 模块获取图像

> ID：14197191
> 
> 赞同：1
> 
> 时间：2013-01-07T13:41:40.627
> 
> 标签：c#, telerik, sitefinity, sitefinity-5

我正在使用 Telerik Sitefinity 5.1。我已经构建了一个模块，它有 3 个字段 {title, url, image} 标题和 url -> 字符串字段图像 -> '图像选择器'

。CS

```
protected void Page_Load(object sender, EventArgs e)
    {       
        var myCollection = GetDataItems();

        RadRotator1.DataSource = myCollection;
        RadRotator1.DataBind();
    }

    public IQueryable<DynamicContent> GetDataItems()
    {
        DynamicModuleManager dynamicModuleManager = DynamicModuleManager.GetManager();
        Type brandLogosType = TypeResolutionService.ResolveType("Telerik.Sitefinity.DynamicTypes.Model.BrandLogos.BrandLogos");         
        var myCollection = dynamicModuleManager.GetDataItems(brandLogosType).Where(i => i.Status == Telerik.Sitefinity.GenericContent.Model.ContentLifecycleStatus.Live && i.Visible == true);

        return myCollection;
    } 
```

ASP.X

```
<telerik:RadRotator ID="RadRotator1" runat="server" RotatorType="AutomaticAdvance"
BorderWidth="4px" Width="100px" Height="100px" ScrollDirection="Down">
<ItemTemplate>
    <asp:Image runat="server" ID="image1" />
    <%-- <asp:Label ID="lblTitle" runat="server" Text='<%# Eval("title") %>'></asp:Label>--%>
    <asp:Image ID="img1" runat="server" ImageUrl='<%# Eval("UrlWithExtension") %>' />
</ItemTemplate> 
```

获取`title`和`url`字段`Text='<%# Eval("title") %>'`但不知道如何获取这样的图像。有人可以给我看看吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:13:49.877

Image 字段使用 ContentLink 存储对 Sitefinity 图像的引用，此 ContentLink 是实际存储在属性中的内容。

您可以扩展内容链接以使用辅助方法获取图像，如下所述：[http ://www.sitefinity.com/blogs/joshmorales/posts/josh-morales-blog/2012/01/19/retrieving_data_from_dynamic_modules_using_the_module_builder_api](http://www.sitefinity.com/blogs/joshmorales/posts/josh-morales-blog/2012/01/19/retrieving_data_from_dynamic_modules_using_the_module_builder_api)

我希望这是有帮助的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T10:19:02.093

您好，我已经通过在我们的自定义控件的代码隐藏文件中创建一个函数解决了这个问题，并在 control.ascx 文件中调用了该方法，我在其中添加了一个转发器和 asp.net 图像控制字段来显示图像这里是解决方案在我的网站上的例子

[从自定义模块图像资产字段中获取自定义控件中的图像](http://ashfaqahmed.net/sitefinity-custom-module-loading-images/)

# javascript - 使用 CPU 速度从 Javascript 中检测 iPhone 5 DEVICE

> ID：14197193
> 
> 赞同：1
> 
> 时间：2013-01-07T13:41:42.137
> 
> 标签：javascript, iphone, uiwebview

我有一个悬而未决的[问题](https://stackoverflow.com/questions/14155907/get-device-height-in-javascript-from-non-full-screen-uiwebview)是关于在**非全屏** `UIWebview`中使用屏幕尺寸来检测 Javascript 中的 iPhone 5 设备。我开始相信这不是要走的路。

现在我正在调查更丑陋的黑客来做到这一点。引起我注意的是 iPhone 5 上的 Javascript 评估速度是 iPhone 4 上的两倍。也许我们可以运行一些计算并计算时间。如果它在 < x 毫秒内完成，我们可以说该设备是 iPhone 5。

有人知道这种测试的例子吗？哪些计算最适合作为基准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:49:09.853

无法以这种方式可靠地确定设备版本。有些 iPhone 可能比其他 iPhone 更快，如果新的 iPhone 4 可以比*频繁*使用的 iPhone 5 更快，我也不会感到惊讶。

但是，iPhone 5 是**唯一**支持 iOS 6.0.2+ 的 iPhone。获取手机的用户代理，并检查它正在运行的操作系统。由于 Apple 的更新有点咄咄逼人，我认为这是检查设备版本的最可靠方法。

（并不是说 UA 嗅探是可靠的，或者是一个好主意，因为 UA 很容易伪造，但这完全是另一回事）

# bash - 扩展的 glob 未按预期扩展

> ID：14197202
> 
> 赞同：4
> 
> 时间：2013-01-07T13:42:27.167
> 
> 标签：bash, glob

我有一个名为 except.sh 的 bash 脚本，它传递了一个文件/目录列表，如下所示：

```
$ ls
a b c d/
$ ./except.sh b c 
```

当以这种方式调用时，它应该扩展到`a d/`即除给定名称之外的所有文件/目录。

这是我尝试实现的方法：

```
#!/usr/bin/env bash

# enable extended globbing
shopt -s extglob

# set IFS to | so that $* expands correctly
IFS='|'

printf '%s' !("$*") 
```

作为`b c`参数，最后一行应该扩展为

```
printf '%s' !(b|c) 
```

导致`a d`被打印。但令我惊讶的是，

```
abcd 
```

被打印。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:48:32.933

问题是`$*`双引号，这意味着它的内容不会被视为一个模式，就像`echo "*"`不扩展星号一样。将外部模式与内部引用部分结合起来会自动转义后者，因此`!("b|c")`被视为`!(b\|c)`. 对不存在`b|c`文件的否定自然会扩展到目录中的所有文件。

`IFS`另一个问题是扩展的通配符被设置为 搞砸了`|`，所以你必须在扩展模式之前重置它。因此，您必须分两步进行扩展：首先，计算模式，然后重置`IFS`并扩展它：

```
#!/usr/bin/env bash

# enable extended globbing
shopt -s extglob

# temporarily set IFS to | so that $* expands to part an extended pattern
old_ifs=$IFS
IFS='|'
pattern="!($*)"
IFS=$old_ifs

printf '%s' $pattern 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T15:02:56.757

问题是由于`IFS`变量覆盖（覆盖此变量后，bash 模式匹配行为奇怪，例如，`ls -d !(b|c)`在设置之前和之后尝试`IFS`），以下应该工作：

```
#!/usr/bin/env bash

# enable extended globbing
shopt -s extglob

PARAMS=$(tr ' ' '|' <<< $*)
printf '%s' !($PARAMS) 
```

# iphone - 修改在 IB 中创建的 UIButton 在 iPhone 5 上的大小不正确

> ID：14197206
> 
> 赞同：0
> 
> 时间：2013-01-07T13:42:35.000
> 
> 标签：iphone, ios

我正在尝试以编程方式将渐变层添加到最初在 Interface Builder 中创建的 UIButton。我在 ViewController 的 viewDidLoad 方法中添加了新的渐变层。我在添加渐变方面没有问题。

```
 CAGradientLayer *gradientLayer = [CAGradientLayer layer];
    gradientLayer.frame = self.btn.layer.bounds;

    gradientLayer.colors = [NSArray arrayWithObjects:(id)[[UIColor topGradient] CGColor],(id)[[UIColor bottomGradient] CGColor], nil];
   [self.btn.layer insertSublayer:gradientLayer atIndex:0]; 
```

问题是：我从 IB 中创建的按钮获取框架，该按钮使用 iPhone 4 屏幕尺寸布局。所有调整大小的蒙版均已设置并正常工作，iPhone 5 模拟器屏幕上的按钮大小正确。

然而，渐变应用在应用于原始帧时仅部分填充按钮。在应用了 autoresizemasks 之后如何获取框架？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:13:27.610

必须在 viewWillAppear 中添加这个

# asp.net - 静态内容不应要求会话状态

> ID：14197207
> 
> 赞同：1
> 
> 时间：2013-01-07T13:42:35.577
> 
> 标签：asp.net, session-state

在我的应用程序中，我不希望图像、javascript 文件和 css 文件等静态内容需要会话状态。为了防止这种情况，我使用了

```
<Localization path="folder_containing_files">
  <system.web>
      <pages enableSessionState="false"/>
  </system.web>
</Localization> 
```

尽管我将该属性设置为 false，但仍会为静态内容调用会话状态（正在创建请求）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:03:41.850

谢谢大家的支持。

唯一创建请求的是

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

我删除了属性 runAllManagedModulesForAllRequests 这意味着我将值设置为 false 并且问题已解决。干杯:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T15:14:09.803

首先，只有在 IIS 中注册的扩展通过它们的处理程序进行处理。.net 运行时甚至不处理图像、文本文件、css。它们由 IIS 提供服务。

你想通过这样做在这里实现什么？

# mysql - 在日期时间字段中设置当前日期

> ID：14197208
> 
> 赞同：7
> 
> 时间：2013-01-07T13:42:39.697
> 
> 标签：mysql, datetime

MySQL 表中有一个 datetime 字段：

```
`mytime` datetime 
```

它包含像“2012-02-10 10:15”这样的条目。

如何将**日期部分**设置为当前日期？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T13:46:43.853

您可以使用 -

```
update table tblName set mytime = current_date() 
```

或者

```
update table tblName set mytime =concat(current_date(),' ',TIME(mytime)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-20T10:39:56.510

使用下面的查询..

```
update Table1 set mytime=now(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T13:48:27.613

```
UPDATE Table1
SET mytime = CONCAT_WS(' ',CURDATE(), TIME(myTime)) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/0b1ae/3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T13:51:44.543

```
UPDATE table SET mytime = CONCAT(CURDATE(), ' ' , time(mytime)) WHERE id = row; 
```

我认为这会起作用，我的语法可能会关闭。`time(mytime)`可能会给你`hour:minute:seconds`，而你只是在寻找`hour:minute`。我认为您还需要`' '`在那里，以便 MySQL 能够识别时间格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T14:10:49.590

```
UPDATE test
SET mytime = mytime + INTERVAL DATEDIFF(CURRENT_DATE(),DATE(mytime)) DAY  ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T13:56:29.383

假设您的表格如下

```
CREATE TABLE `table66` (
    `id` INT(10) NULL DEFAULT NULL,
    `mytime` DATETIME NULL DEFAULT NULL
) 
```

然后您可以使用以下查询来更新您的 mytime 列

```
update table66 set mytime=concat(date(now()),' ',time(mytime) ) 
```

# clearcase - ClearCase 注册表中的第一行是什么？

> ID：14197209
> 
> 赞同：1
> 
> 时间：2013-01-07T13:42:39.360
> 
> 标签：clearcase

我正在将一些 vobs 从服务器迁移到其他服务器。我在注册表文件的开头看到了这些信息：

```
-id=34f9591e.96994cf7.99b9.b6:2e:6e:0d:fe:d9
-dtm=153ae31e.3cec4c29.9bc4.45:3b:24:08:e0:0a  
-version=3 
```

谁能告诉我这些线是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:27:01.840

I am not sure of the exact meaning behind those lines, but I have done enough migration to tell you that you don't need to report those lines from one vob registry server to the next:

You only need to register again your vobs once migrated and available in their new vob storage path (as mentioned in "[Moving VOBs and relocating VOB data](http://www-01.ibm.com/support/knowledgecenter/SSSH27_8.0.1/com.ibm.rational.clearcase.cc_admin.doc/topics/c_relo_mv.htm?lang=en)").

The two first line *should* be specific to the registry server, in order for ClearCase to manage different registry server, and for [`rgy_switchover`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/rgy_switchover.htm) to work properly (between primary and backup registry server host).

# php - 我无法接收推送通知 - 我收到响应“资源 ID #3”

> ID：14197216
> 
> 赞同：3
> 
> 时间：2013-01-07T13:43:11.123
> 
> 标签：php, objective-c, ios, notifications, push

我正在尝试发送推送通知，但 APNS 向我发送了以下响应：资源 id #3，所以这意味着缺少主题，第二个苹果文档，对吗？什么是“话题”？我究竟做错了什么？我再次创建证书，但我认为这不是问题。我不知道什么是“主题”。

下面是我的服务器 php：

```
<?php

$deviceToken = $_POST["deviceToken"];

// Put your private key's passphrase here:
$passphrase = 'password';

// Put your alert message here:
$message = 'My first push notification!';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
        'ssl://gateway.push.apple.com:2195', $err,
        $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo $fp;
echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
        'alert' => $message,
        'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
{
    echo 'Message not delivered' . PHP_EOL;
    echo $fp;
}   
else
{
    echo 'Message successfully delivered' . PHP_EOL;
    echo $fp;
}

// Close the connection to the server
fclose($fp);

?> 
```

服务器成功发送消息，但就像我之前说的......我收到了APNS的响应：

资源 ID #3。

会是什么？

已编辑

我修复它。问题是网址......我改为 gateway.sandbox.push.apple.com。那是开发的URL！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:00:28.670

您收到资源错误，因为您回显了资源。

你做：

```
echo $fp; 
```

在这种情况下 $fp 是一个资源，而不是一个字符串

# delphi - 在delphi 6中找到无限循环

> ID：14197220
> 
> 赞同：2
> 
> 时间：2013-01-07T13:43:26.693
> 
> 标签：delphi, debugging, breakpoints, delphi-6

我目前拥有的程序有多个组件编译为 dll。在其中一个 dll 中，程序形成了一个无限循环。有没有办法查看程序循环的位置？即使它目前正在运行。我分别在每个 dll 中进行此检查没有问题，我已将错误限制为 6 个中的一个。

我在 Windows 7 上使用 Delphi 6。

所以简而言之，我想要一些方法来告诉我程序当前在哪里。通常你插入一个断点并等待程序到达那个位置。但我不知道循环在哪里或在哪个组件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T15:49:33.440

一旦您知道程序在调试器下运行时处于循环中，只需“暂停”它即可。查看调用堆栈，您将能够弄清楚它在做什么。您可以在 IDE 工具栏或“运行”菜单中找到“暂停”作为“程序暂停”。

# jquery - Google Earth Api 用颜色填充多边形

> ID：14197224
> 
> 赞同：1
> 
> 时间：2013-01-07T13:43:45.943
> 
> 标签：jquery, .net, google-earth

请看一下，下面的代码将在这里创建多边形 [检查](https://docs.google.com/open?id=0B0XGz1Ttx6wINWpmSklkTlFRakU) ，在这里我想用我需要做的一些颜色来填充它。请在这里提供帮助。我尝试了下面的代码，它对我来说工作正常，我只需要用一些颜色填充创建的多边形，这样它在谷歌地球中看起来就一样了。

```
 var ge;
    google.load("earth", "1");

    function init() {
        google.earth.createInstance('map3d', initCB, failureCB);
    }

    function initCB(instance) {

         ge = instance;
        ge.getWindow().setVisibility(true);
        ge.getNavigationControl().setVisibility(ge.VISIBILITY_SHOW);

        var alt = 10;
        var icons = ['http://maps.google.com/mapfiles/kml/pushpin/wht-pushpin.png', 'http://maps.google.com/mapfiles/kml/pushpin/ltblu-pushpin.png', 'http://maps.google.com/mapfiles/kml/pushpin/blue-pushpin.png'];

        var latitude = 40.30010;
        var longitude = -94.98570;
        for (var i = 0; i < 3; i++) {

            // Create the placemark and add it to Earth.
            var placemark = ge.createPlacemark('');

            // Set the placemark's location.
            var point = ge.createPoint('');
            point.setLatitude(latitude);
            point.setLongitude(longitude);
            point.setAltitudeMode(ge.ALTITUDE_ABSOLUTE);
            point.setAltitude(alt + i * 7000);
            placemark.setGeometry(point);
            placemark.setName("From Surface: " + (alt + i * 7000));

            // Define a custom icon.
            var icon = ge.createIcon('');
            icon.setHref(icons[i]);
            var style = ge.createStyle(''); //create a new style
            style.getIconStyle().setIcon(icon); //apply the icon to the style
            placemark.setStyleSelector(style); //apply the style to the placemark
            // Add the placemark to Earth.
            ge.getFeatures().appendChild(placemark);
        }
        var la = ge.createLookAt('');
        la.set(latitude, longitude, alt, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 0, 200000);       
    //@latitude,@longitude,@centerPointlatitude,@centerPointlongitude,@polygonType
        pm = new Polygon(latitude, longitude, 39.76010, -94.92555, 5);
          ge.getView().setAbstractView(la);
      }
var pi = Math.PI;

    function Polygon(lat, lon, lata, lona, sides) {
        var me = this;
        me.numsides = sides;
        me.cent = new PM(lat, lon, 'centre', 'ff00ffff');
        me.rad = new PM(lata, lona, 'outer', 'ff8080ff');
        me.setBearDist();

        var lineStringPlacemark = ge.createPlacemark('');
        me.lineString = ge.createLineString('');
        lineStringPlacemark.setGeometry(me.lineString);
  //   me.lineString.setTessellate(true);
        me.lineString.setExtrude(true);
        me.lineString.setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND);
        me.drawPolygon();

         lineStringPlacemark.setStyleSelector(ge.createStyle(''));
        me.lineStyle = lineStringPlacemark.getStyleSelector().getLineStyle();
        me.lineStyle.setWidth(3);
        me.lineStyle.getColor().set('9900ffff');  // aabbggrr format
        //fill color to polygon boundry
        var polyStyle = lineStringPlacemark.getStyleSelector().getPolyStyle();
        polyStyle.getColor().set('9900ffff');
        polyStyle.setFill(1);
        polyStyle.setOutline(1);
        lineStringPlacemark.getStyleSelector().getPolyStyle().getColor().set('9900ffff'); 
       //end
        ge.getFeatures().appendChild(lineStringPlacemark);

        google.earth.addEventListener(ge.getGlobe(), "mousemove", function (event) { me.movePMLoc(event); });
        google.earth.addEventListener(ge.getGlobe(), "mousedown", function (event) { me.completelyNewLoc(event); });
    }

    Polygon.prototype.setBearDist = function () {
        this.bear = bearing(this.cent.lat, this.cent.lon, this.rad.lat, this.rad.lon);
        this.dist = distance(this.cent.lat, this.cent.lon, this.rad.lat, this.rad.lon);
        document.getElementById('rad').innerHTML = this.dist.toPrecision(6).toString() + ' km';
        document.getElementById('bear').innerHTML = this.bear.toDeg().toPrecision(5).toString() + ' deg';
    }

    Polygon.prototype.setRad = function () {
        var latlon = destination(this.cent.lat, this.cent.lon, this.dist, this.bear);
        this.rad.setLoc(latlon[0], latlon[1]);
    }

    Polygon.prototype.colour = function (col) {
        this.lineStyle.getColor().set(col);
    }

    Polygon.prototype.drawPolygon = function () {    // Draw our Polygon
        var latlon;
        this.lineString.getCoordinates().clear();
        for (i = 0; i <= this.numsides; i++) {
            latlon = destination(this.cent.lat, this.cent.lon, this.dist, this.bear + i * 2 * pi / this.numsides);
            this.lineString.getCoordinates().pushLatLngAlt(latlon[0], latlon[1], 9000);
            //here we add altidue
        }
        this.areaCircum();
    }

    function PM(lat, lon, name, colour) {      // Create Placemark
        var me = this;
        me.active = false;
        me.name = name;
        me.placemark = ge.createPlacemark('');
        ge.getFeatures().appendChild(me.placemark);
        me.point = ge.createPoint('');
        me.placemark.setStyleSelector(ge.createStyle(''));
        var IconStyle = me.placemark.getStyleSelector().getIconStyle();
        IconStyle.getColor().set(colour);
        IconStyle.getHotSpot().setXUnits(ge.UNITS_FRACTION);
        IconStyle.getHotSpot().setYUnits(ge.UNITS_FRACTION);
        IconStyle.getHotSpot().setX(0.5);
        IconStyle.getHotSpot().setY(0.5);
        me.setLoc(lat, lon);
        me.placemark.setGeometry(me.point);
        google.earth.addEventListener(me.placemark, "mousedown", function (event) { me.draw(event); });
        google.earth.addEventListener(me.placemark, "mouseup", function (event) { me.undraw(event); });
    }

    PM.prototype.setLoc = function (lat, lon) {    // set location of placemark.
        this.lat = lat.toRad();
        this.lon = lon.toRad();
        this.point.setLatLng(lat, lon.fixLon());
        document.getElementById(this.name).innerHTML = lat.toPrecision(7).toString() + ' , ' + lon.toPrecision(7).toString();
    }

    Polygon.prototype.movePMLoc = function (kmlEvent) {
        if (!this.rad.active && !this.cent.active) {
            this.colour('9900ffff');
        }
        else {
            kmlEvent.preventDefault();
            this.colour('9900ffff');
            if (this.rad.active) {
                this.rad.setLoc(kmlEvent.getLatitude(), kmlEvent.getLongitude());
                this.setBearDist();
                this.drawPolygon();
            }
            else {    // only pick up centre placemark if vertex placemark not selected
                this.cent.setLoc(kmlEvent.getLatitude(), kmlEvent.getLongitude());
                this.setRad();
                this.drawPolygon();
            }
        }
    }

    Polygon.prototype.completelyNewLoc = function (kmlEvent) {

        if (kmlEvent.getAltKey()) {
            this.cent.active = false;
            this.rad.active = true;
            this.cent.setLoc(kmlEvent.getLatitude(), kmlEvent.getLongitude());
            this.rad.setLoc(kmlEvent.getLatitude(), kmlEvent.getLongitude());
            this.colour('9900ffff');
        }
    }

    PM.prototype.draw = function () {
        this.active = true;
    }

    PM.prototype.undraw = function () {
        this.active = false;
    }

    Polygon.prototype.fetchKML = function () {

        var URL = "http://www.barnabu.co.uk/cgi-bin/polyplot.cgi"
      + "?lt=" + this.cent.lat.toDeg().toString()
      + "&ln=" + this.cent.lon.toDeg().toString()
      + "&b=" + this.bear.toDeg().toString()
      + "&d=" + this.dist.toString()
      + "&s=" + this.numsides.toString();
        window.location = URL;
    }

    Polygon.prototype.areaCircum = function () {   // compute area and circumference of Polygon

        var area = 0;
        var circum = 0;
        var latlon;
        if (this.numsides == 25) {     // area of spherical circle = 2*pi*R^2*(1-cos(radius))
            area = 2 * pi * 6371 * 6371 * (1 - Math.cos(this.dist / 6371));
            circum = 2 * pi * 6371 * (Math.sin(this.dist / 6371));
        }
        else if (this.numsides != 2) { // Spherical Polygon of n sides, theta is sum of internal angles: area = (theta-(n-2)*pi)*R^2                
            var latlon = destinationr(0, 0, this.dist, pi);
            var latlon2 = destinationr(0, 0, this.dist, pi - 2 * pi / this.numsides);
            var ang = 2 * bearing(latlon[0], latlon[1], latlon2[0], latlon2[1]);
            area = ((this.numsides * ang) - (this.numsides - 2) * pi) * 6371 * 6371;
            circum = this.numsides * distance(latlon[0], latlon[1], latlon2[0], latlon2[1]);
        }
        document.getElementById('per').innerHTML = circum.toPrecision(6).toString() + ' km';
        document.getElementById('are').innerHTML = area.toPrecision(8).toString() + ' km<sup>2</sup>';
    }

    Number.prototype.toRad = function () {  // convert degrees to radians
        return this * pi / 180;
    }

    Number.prototype.toDeg = function () {  // convert radians to degrees
        return this * 180 / pi;
    }

    Number.prototype.fixLon = function () {  // keep longitude in range -180 to 180
        lon = this;
        while (lon < -180) { lon += 360; }
        while (lon > 180) { lon -= 360; }
        return parseFloat(lon);

    }

    ///////////////////////////////////////
    // 

    function distance(lata, lona, latb, lonb) {  // great circle distance (km)
        return Math.acos(Math.sin(lata) * Math.sin(latb) + Math.cos(lata) * Math.cos(latb) * Math.cos(lonb - lona)) * 6371;
    }

    function bearing(lata, lona, latb, lonb) {  // initial great circle bearing (rad)
        return Math.atan2(Math.sin(lonb - lona) * Math.cos(latb), Math.cos(lata) * Math.sin(latb) - Math.sin(lata) * Math.cos(latb) * Math.cos(lonb - lona))
    }

    function destination(lata, lona, dist, brng) { // destination along great circle.  returns values in degrees
        var latb = Math.asin(Math.sin(lata) * Math.cos(dist / 6371) + Math.cos(lata) * Math.sin(dist / 6371) * Math.cos(brng));
        var lonb = lona + Math.atan2(Math.sin(brng) * Math.sin(dist / 6371) * Math.cos(lata), Math.cos(dist / 6371) - Math.sin(lata) * Math.sin(latb));
        return [180 * latb / pi, 180 * lonb / pi]

    }

    function destinationr(lata, lona, dist, brng) { // destination along great circle.  returns value in radians
        var latb = Math.asin(Math.sin(lata) * Math.cos(dist / 6371) + Math.cos(lata) * Math.sin(dist / 6371) * Math.cos(brng));
        var lonb = lona + Math.atan2(Math.sin(brng) * Math.sin(dist / 6371) * Math.cos(lata), Math.cos(dist / 6371) - Math.sin(lata) * Math.sin(latb));
        return [latb, lonb]

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:25:33.530

This code example could be of help: [http://earth-api-samples.googlecode.com/svn/trunk/examples/polygon-style.html](http://earth-api-samples.googlecode.com/svn/trunk/examples/polygon-style.html)

# java - 使用 Java 向 MS Word 发送“双击”信号

> ID：14197229
> 
> 赞同：0
> 
> 时间：2013-01-07T13:43:58.057
> 
> 标签：java, automation, ms-word

我是某个公司和产品的自动化程序员。我需要用 MS Word 自动化一些事情（在所有版本上，但如果需要，我会在到达那里时越过那座桥）大部分工作已经完成，但我需要在自动化中添加一个特定的操作：Double - 单击“打开文件”窗口中的文件，将其打开。

到目前为止，我使用“发送密钥”来执行此操作，发送以下密钥信号：

```
"^o";{TAB};{TAB};{TAB};{TAB};{TAB};{TAB};{TAB};{TAB};{TAB};{TAB};{TAB};test;{ENTER} 
```

基本上选择了文件并打开它。事实证明这并不令人满意，因为我特别需要双击。

有没有办法我可以做到这一点？

我主要用 Java 编程，但如果您有其他语言的简单建议，请继续。
只需双击突出显示的组件就足够了，我可以使用上面的键来访问文件，将其突出显示，并让它获得 dbl.click 信号。

笔记：

> 我可以使用 Selenium 或 AutoIT，但我被要求尽可能不要这样做。

如果有任何不清楚的地方，请随时提问。

哦，是的，我忘了提一些非常重要的事情——这些自动化测试在远程系统上工作，使用 Tomcat 连接。

更新：

```
I put the idea on a back burner after wasting an entire day on this. I have found that     using JNA and User32 is fairly simple for mouse control, but I did not manage to     find the coordinates of the selection focus. 
If anyone has any idea, it is much appreciated! 
```

# php - 托管转移后 Opencart 商店无法正确加载

> ID：14197234
> 
> 赞同：0
> 
> 时间：2013-01-07T13:44:17.647
> 
> 标签：php, mysql, opencart

我已将我的网上商店从 1and1 转移到 123-reg，但现在无法加载。有问题的 URL 是[http://www.luof.co.uk/shop](http://www.luof.co.uk/shop)

静态 HTML 页面运行良好（例如主页）

这是我为转移商店所做的事情：

*   在 1and1 上备份数据库
*   下载所有文件并将它们上传到新服务器
*   相应地更改了“a”记录
*   将数据库导入 123-reg
*   更改了配置文件设置

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:53:46.850

99% 的时间 php 标签或代码显示在浏览器中，这意味着服务器没有启用 PHP，在管理界面中寻找设置打勾（我不熟悉 123 reg 托管）或联系 123 reg 支持

# objective-c - iOS App在调用方法时等待HTTP响应？

> ID：14197235
> 
> 赞同：1
> 
> 时间：2013-01-07T13:44:20.313
> 
> 标签：objective-c, ios, nsurlconnection

我正在尝试调用一个类方法，该方法接受一个字符串并将其发布到一个站点以接收 JSON 响应（在我存储在 DataClass 中的一些其他变量中）。我被困在试图以响应的形式返回数据，此时甚至无法 NSLog 返回的数据。问题是，既然我已经调用了我的类方法，那么类方法如何等待从 HTTP POST 返回响应以返回数据？返回 JSON 后，我可以将其扩展为字典并从那里进行处理。帮助表示赞赏:)

上课方法：

```
//
//  APISample.m
//
//  Created by Sam on 1/6/13.
//  Copyright (c) 2013 Sam. All rights reserved.
//
#import "APISample.h"
#import "DataClass.h"
@implementation APISample

@synthesize first_name = _first_name;
@synthesize last_name = _last_name;
@synthesize profile_pic_url = _profile_pic_url;
@synthesize responseData;
-(id)init
{
    self = [super init];
    return self;
    NSLog(@"Loaded APISample and fetching");
}
+(id)getDataAboutUser:(NSString *)user_request_id;
{  
    DataClass *userdata=[DataClass getInstance];
NSLog(@"Loaded APISample and fetching %@", user_request_id);
NSMutableURLRequest *user_fetch_details = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://10.0.23.161/users/user_fetch_details.php"]];
    [user_fetch_details setHTTPMethod:@"POST"];
    NSMutableString *postString = [NSMutableString stringWithString:@"id=123"];
    [postString appendString:@"&userrequest_id="];
    [postString appendString:[userdata.str_userid copy]];
    [postString appendString:@"&user_id="];
[postString appendString:[userdata.str_userid copy]];
    [postString appendString:@"&identifier="];
[postString appendString:[userdata.str_identifier copy]];
    [user_fetch_details setValue:[NSString stringWithFormat:@"%d", [postString length]] forHTTPHeaderField:@"Content-length"];
    [user_fetch_details setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *connection=[[NSURLConnection alloc] initWithRequest:user_fetch_details delegate:self];
NSMutableData *responseData=[NSMutableData data];
[responseData appendData:[NSURLConnection connection:didReceiveData];

if (connection) {
    // Create the NSMutableData that will hold
    // the received data
    // receivedData is declared as a method instance elsewhere
    NSMutableData *responseData=[NSMutableData data];
} else {
    // inform the user that the download could not be made
}

NSLog(@"Received Data %@", [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding]);
return [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[responseData appendData:data];
NSString *receivedDataString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    if ([receivedDataString isEqualToString: @"error"]) {
        UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                 message:@"An error has occured. The application will now exit. Unexpected Response!"
                                                                delegate:nil
                                                       cancelButtonTitle:@"Close"
                                                       otherButtonTitles:nil];
        [errorAlert show]; 
        exit(0);
    }else{
        NSError* error;
        NSDictionary* json = [NSJSONSerialization
                              JSONObjectWithData:responseData
                              options:kNilOptions
                              error:&error];
        NSString *firstnameResponse = [json objectForKey:@"first_name"];
        NSString *lastnameResponse = [json objectForKey:@"last_name"];
        NSString *profile_pic_urlResponse = [json objectForKey:@"profile_pic_url"];

        NSLog(@"didReceiveData %@ analysed " , firstnameResponse);
    }
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);
}
@end 
```

在“收到数据”之后，我在日志中没有收到任何数据，也没有看到我的错误消息。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:01:26.747

您描述的设计模式称为回调。您需要被通知在未来某个时间点发生的事件。在 Objective-C 中有 4 种主要的回调形式。

目标动作配对（这是与按钮一起使用的东西，以及类似的东西。“当按下这个按钮时通知我的*目标*，并告诉他们执行这个*动作*”）

委托（您在上面的代码中使用 NSURLConnection 的委托形式。当您看到“委托”这个词时，我希望您认为“帮助对象”。您是在说，“嘿，NSURLConnection，当重要事件发生时，我想你告诉*这个*委托（帮助对象）这些事件）

通知（在处理模型对象更改时经常使用这些通知）

最后...我会为您推荐的那个...

块。

块是一个非常酷的变量。大多数变量都保存数据。块是一个变量，它保存要在将来某个时间点执行的代码。因此，在您的情况下，您可以将完成块与您的方法 getDataAboutUser:(NSString *)user_request_id 一起传递。所以它看起来像这样。

getDataAboutUser:(NSString*)string withCompletion:(void(^)(NSData *finishedData))cBlock

将该 cBlock 存储为 instanceVar。然后，当您的 NSURLConnection 完成下载所有数据时，您将执行 cBlock，将完成的数据作为参数传入。

如果您以前没有使用过积木，那么积木是一件相当复杂的事情，所以我建议您花 20 分钟时间阅读[这篇](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:10:59.073

由于您需要您的方法在返回之前等待响应，因此您可以使用 NSURLConnection 的便捷类方法 sendSynchronousRequest 来执行同步请求，而不是异步创建和管理 NSURLConnection 实例。

因此，您可以执行以下操作，而不是您的 [[NSURLConnection alloc] init...] 行：

```
NSURLResponse *response = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:user_fetch_details returningResponse:&response error:&error]; 
```

之后，您可以立即从 responseData 解析 JSON，而不是在 connection:didReceiveData 委托中进行解析。

编辑：刚刚看到 user698846 建议修改您的方法签名以获取完成块。如果您可以随意更改您的方法签名（即没有人要求您的函数同步返回），这也是解决您的问题的一种很好且可能更清洁的方法。无论哪种方式，sendSynchronousRequest 都可能是最简单的出路，而且没有什么可耻的，尤其是在*您*的应用程序和用户在等待请求完成时无能为力的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T10:52:54.053

这是一些代码：

```
NSURLResponse *response = nil;

NSError *error = nil;

NSData *responseData = [NSURLConnection sendSynchronousRequest:user_fetch_details returningResponse:&response error:&error]; 
```

# joomla - 如何在模块中创建自定义表单字段类型？

> ID：14197236
> 
> 赞同：8
> 
> 时间：2013-01-07T13:44:26.693
> 
> 标签：joomla, joomla2.5, joomla-module

我使用 joomla 2.5，我想创建一个自定义表单字段类型`that stored in the same module.`

在 XML 中：

```
 <fieldset  name="basic" addfieldpath="/modules/mod_royalslider/fields"></fields>
      <fieldset name="basic">
           <field name="title" type="City" label="anythging" description=""   />
      </fieldset>
 </fields> 
```

在文件中`/modules/mod_royalslider/fields/city.php`

```
<?php
// Check to ensure this file is included in Joomla!
defined('_JEXEC') or die('Restricted access');

jimport('joomla.form.formfield');

class JFormFieldCity extends JFormField {

    protected $type = 'City';

    // getLabel() left out

    public function getInput() {
            return '<select id="'.$this->id.'" name="'.$this->name.'">'.
                   '<option value="1" >New York</option>'.
                   '<option value="2" >Chicago</option>'.
                   '<option value="3" >San Francisco</option>'.
                   '</select>';
    }
} 
```

现在它向我显示错误，当我删除时 `<fieldset name="basic" addfieldpath="/modules/mod_royalslider/fields"></fields>`

错误消失了，该字段显示为文本字段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T14:10:51.707

您忘记**在**`addfieldpath`

```
<fields name="params">
   <fieldset name="basic" addfieldpath="/modules/mod_royalslider/models/fields">

       <field name="title" type="City" label="anythging" description=""   />

   </fieldset>
</fields> 
```

只需将字段文件夹放在模型文件夹中，然后像上面一样放置路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:47:34.703

您只需使用您提供的代码即可，很简单：

```
 <fields>
      <fieldset name="basic" addfieldpath="/modules/mod_royalslider/fields">
           <field name="title" type="City" label="anythging" description=""   />
      </fieldset>
 </fields> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:26:14.907

在字段中使用`addfieldpath`，例如 ::

```
<fields name="params" addfieldpath="/modules/mod_royalslider/models/fields" >

       <fieldset name="basic">

         <field name="title" type="City" label="anything" description="" />

       </fieldset>
 </fields> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-20T07:05:04.933

您可以尝试使用此代码。我的这项工作

```
<fieldset addfieldpath="/modules/mod_royalslider/models/fields" name="basic">

   <field name="title" type="City" label="anything" description=""  />

</fieldset> 
```

# c++ - 在 dll 和 exe 中使用全局变量

> ID：14197237
> 
> 赞同：0
> 
> 时间：2013-01-07T13:44:27.457
> 
> 标签：c++, dll

我在一个公共头文件中有一个全局变量。例如

commonHeader.h

int commonInt = 0;

我有 3 个我想在其中使用它的 dll 项目，所以我包含上面的标题，但它给了我多次定义的错误符号，#pragma 一次也不起作用。

如果我在上面创建变量 extern 并在我的 exe 中定义它，我的 dll 中会出现链接器错误。

我所有的 dll 都需要上面的标题。我的一个 dll 需要其他 2 个 dll 的头文件（可能会包含多个符号）

我如何解决上述问题，我只想要一个跨 dll 和 exe 的变量。

我在 Windows 7 上使用 VS 2010 教授。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:46:40.093

您应该只在标头中*声明*全局变量。它们应该在实现（源）文件中*定义。*

在您的标题中，您应该有：

```
// commonHeader.h

extern int commonInt;    // global *declaration* 
```

然后在你的*一个*实现文件中你应该有：

```
// some_file.cpp

int commonInt = 0;       // global *definition* (and initialisation) 
```

当然，应尽可能避免使用全局变量——过度使用全局变量是一种“代码味道”，但有时无法避免。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:48:08.820

通过在头文件中定义全局变量，您违反了单一定义规则（第 3.2 节）。相反，您只在头文件中声明它`extern`然后在单个实现文件中定义它是正确的。

但是为了让这个工作与 dll 一起工作，您还必须将其声明为由 exe 导出并由 dll 使用 和 导入`__declspec(dllexport)`，`__declspec(dllimport)`使用适当的宏来`__declspec`根据您是编译 exe 还是 dll 来选择正确的。

# google-apps-script - 更改电子表格的权限

> ID：14197238
> 
> 赞同：0
> 
> 时间：2013-01-07T13:44:28.910
> 
> 标签：google-apps-script

我有一个脚本（电子表格脚本），他在电子表格中写入一系列数据，但电子表格的某些部分被锁定。

从电子表格运行此脚本的用户在某些区域被阻止，脚本有可能释放这些区域然后再次锁定它们或以电子表格的管理员身份运行？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:53:03.657

The user would need to have permission to edit sharing on the Spreadsheet, which would not be the case if it was locked.

Is the script an `onEdit` trigger? If so, you can add a trigger from the script editor that will run as yourself. Just make sure to rename `onEdit()` to something else so it doesn't try to run as the regular user as well.

If this isn't onEdit, I would suggest making the function they call add a specific value to a specific cell. Then you can have a timed trigger every minute running as yourself that watches this cell and does its work when the cell contains the specific word. Just make sure to clear the cell quickly so it doesn't run twice.

# c# - 从另一个 ASPX 页面显示 DIV？

> ID：14197243
> 
> 赞同：0
> 
> 时间：2013-01-07T13:45:11.750
> 
> 标签：c#, html, gis

我正在开发一个地图应用程序 ( `VS2008 C`#)，并在我的主 aspx 中显示我的地图窗口 (Esri ADF MapControl)。

我现在正在编译一个带有另一个 aspx 页面的打印模板，该页面将显示和打印来自主 aspx 的当前地图。

通常我会使用 Frame 标签在我的打印模板中显示主要的 aspx，但我只是对复制地图 DIV 感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:55:54.327

您可以尝试使用 jquery 进行操作：

```
<!DOCTYPE html>
<html>
<head>
    <style>
 body{ font-size: 12px; font-family: Arial; }
 </style>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<b>Footer navigation:</b>
<div id="mydiv"></div>

<script>
  $("#mydiv").load("mypage.html");
</script>

</body>
</html> 
```

来源：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

# shell - 如何冲洗当前运行的所有管道？

> ID：14197245
> 
> 赞同：2
> 
> 时间：2013-01-07T13:45:19.193
> 
> 标签：shell, pipe

我在后台运行了一些管道进程，这些进程已经运行了一天多。

```
$ cmd | cmd | cmd | cmd | cmd > file 
```

是否可以刷新所有管道，以便我可以看到文件中的当前状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:42:50.513

## 解决方案

编译

```
#include <stdio.h>
#include <unistd.h>
#include <sys/errno.h>
int main(int argc, char **argv){
  fflush(NULL);
  if (!errno) sync();
  return errno;
} 
```

比如说，`fflush`但是它在`~/bin`或`/opt/bin`或`/usr/local/bin`取决于你的个人偏好和权限，确保这个命令在你的路径中并简单地使用它。

## 讨论

这个（简单！）东西在通常的工具集中不存在的事实表明它很少有用：通常这会挫败操作系统变得聪明的尝试并使事情变慢。更糟糕的是，使用像您展示的那样的扩展管道，它可能会以“错误”的顺序冲洗管道，而不会比以前更确定当前的进度。

# c++ - GetLogicalDrives 以及附加信息 C++

> ID：14197247
> 
> 赞同：1
> 
> 时间：2013-01-07T13:45:38.503
> 
> 标签：c++, winapi

我的一个程序需要帮助，该程序可以提取系统上的可用驱动器并打印有关驱动器的各种信息。我正在使用 VC++，对 C++ 还很陌生，需要一些高级输入或经验丰富的程序员的示例代码。

***这是我当前的源代码：***

```
#include "stdafx.h"
#include Windows.h 
#include stdio.h 
#include iostream 

using namespace std; 

int main()
{
    // Initial Dummy drive
    WCHAR myDrives[] = L" A";  

    // Get the logical drive bitmask (1st drive at bit position 0, 2nd drive at bit position 1... so on)  
    DWORD myDrivesBitMask = GetLogicalDrives();  

    // Verifying the returned drive mask  
    if(myDrivesBitMask == 0)   
        wprintf(L"GetLogicalDrives() failed with error code: %d\n", GetLastError());  
    else  { 
        wprintf(L"This machine has the following logical drives:\n");   
        while(myDrivesBitMask)     {      
            // Use the bitwise AND with 1 to identify 
            // whether there is a drive present or not. 
            if(myDrivesBitMask & 1)    {     
                // Printing out the available drives     
                wprintf(L"drive %s\n", myDrives);    
            }    
            // increment counter for the next available drive.   
            myDrives[1]++;    
            // shift the bitmask binary right    
            myDrivesBitMask >>= 1;   
        }   
        wprintf(L"\n");  
    }  
    system("pause");   
} 
```

` **- 这是输出 -**

```
This machine has the following logical drives:
drive  C
drive  D
drive  E
drive  F
drive  G
drive  H
drive  I 
```

我需要输出关于每个驱动器的附加信息（也许一个例子会在更短的时间内讲述这个故事）：

驱动器 - C:\ 驱动器类型：固定驱动器就绪状态：真实卷标：引导驱动器文件系统类型：NTFS 可用空间：30021926912 总驱动器大小：240055742464

驱动器 – D:\ 驱动器类型：固定驱动器就绪状态：真实卷标：应用程序数据文件系统类型：NTFS 可用空间：42462507008 总驱动器大小：240054693888

我可以使用哪些方法、libs api 等来提取驱动器类型、驱动器状态、卷标、文件系统类型、可用空间和驱动器总大小？

*旁注，我注意到我的预处理器指令存在缺陷，特别是在标准 I/O 头文件中。我知道这不是使用 printf 的推荐方式，并且 cout 是类型安全的，并且是正确的路径，但我无法弄清楚如何在 cout 中格式化输出，就像你在`wprintf(L"drive %s\n", myDrives);.... so how would you do this with cout??`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:32:43.167

您想查看[GetVolumeInformation](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364993%28v=vs.85%29.aspx)等函数来检索可用空间和卷名等文件系统信息。

[GetDriveType](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364939%28v=vs.85%29.aspx)将为您提供有关驱动器类型的一些基本信息，但 USB 拇指棒和闪存阅读器可以提供令人惊讶的结果。

我不确定您所说的“就绪状态”是什么意思。如果您的意思是驱动器中是否有有效的卷，那么您可以尝试`CreateFile`使用“\\.\C:”的路径来尝试打开该卷。如果失败，则不存在卷（磁盘）。这将用于 SD 卡读卡器。要在不出现错误对话框的情况下执行此操作，您需要先调用`SetErrorMode(SEM_NOOPENFILEERRORBOX)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:02:02.753

要检查驱动器是否准备好，您还可以使用[GetDiskFreeSpaceEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364937%28v=vs.85%29.aspx)。如果此操作失败，则驱动器未准备好/不可用。

这是一些示例代码： http: [//pinvoke.net/default.aspx/coredll/GetDiskFreeSpaceEx.html](http://pinvoke.net/default.aspx/coredll/GetDiskFreeSpaceEx.html)

# phpmyadmin - PHPMyAdmin 行编辑

> ID：14197249
> 
> 赞同：1
> 
> 时间：2013-01-07T13:45:41.967
> 
> 标签：phpmyadmin

感谢您在此处指出的任何帮助:)

我在使用新版本的 PHPMyAdmin 时遇到问题。

先让我画图，

我离开圣诞节去工作，回来后发现所有版本的 PHPMyAdmin 都有更新。这个新版本看起来不错，但这是我的主要问题。自从我使用 PHPMyAdmin 以来，我一直能够单击表格行上的任意位置来选择它，现在它已被更改，因此如果我单击一行，它会自动打开内联编辑器！！！！哇！！！！我不想编辑它，我想选择它！这怎么能被关闭，因为这已经完成了，我从来没有使用过它。我无法控制使用的 PHPMyAdmin 版本，它们都是由 Fasthosts 安装的。

我确定我不是唯一遇到此问题的开发人员，有人可以帮助我吗？

我想如果不是我可以运行旧版本的 PHPMyAdmin，但这不是主意，因为旧版本中可能存在其他安全问题，这些问题已在新版本中修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:36:35.130

找到 /js/makegrid.js。

相关部分是find("td.data").click(function(c)，这里return false，防止编辑。

如果您还想在双击时启用此功能，只需替换： find("td.data").click(function(c) 与 find("td.data").dblclick(function(c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T18:14:35.383

对于 phpMyAdmin 4.0.5 版，您可以将网格编辑选项设置为禁用或双击（双击实际上是现在的默认设置）。

```
$cfg['GridEditing'] = 'double-click';
or
$cfg['GridEditing'] = 'disabled'; 
```

但是，要通过单击选择行，则需要编辑 makegrid.js 文件。在 initGridEdit 函数的第 1659 行之后添加以下代码

```
else {
// Custom code added to select row on single click
var $row = $cell.parent();
var $checkbox = $row.find('td input[type=checkbox]').first();
$checkbox.prop('checked',!$checkbox.prop('checked'));
$row.toggleClass('marked');
} 
```

添加代码后，它看起来像这样。请注意，我遗漏了一些代码来缩短这个答案。

```
$(t).find('td.data.click2')
.click(function(e) {
    $cell = $(this);
    // In the case of relational link, We want single click on the link 
    // to goto the link and double click to start grid-editing.
    var $link = $(e.target);
    if ($link.is('.grid_edit.relation a')) {
        // OMITTED CODE...
    } else {
        // Custom code added to select row on single click
        var $row = $cell.parent();
        var $checkbox = $row.find('td input[type=checkbox]').first();
        $checkbox.prop('checked',!$checkbox.prop('checked'));
        $row.toggleClass('marked');
    }
}) 
```

我只在将网格编辑设置为双击时测试了这个解决方案。如果禁用网格编辑，它很可能无法工作。

# css - css li 和 floats - 基本上是一个网格

> ID：14197252
> 
> 赞同：0
> 
> 时间：2013-01-07T13:45:50.003
> 
> 标签：css

基本上是一个产品网格，应该向左浮动。有时最后一项不向左浮动，为什么？

例如这里 [http://bartels-sondermaschinenbau.de/Regale/Fachbodenregale-Lager/Stecksystem/](http://bartels-sondermaschinenbau.de/Regale/Fachbodenregale-Lager/Stecksystem/) 和这里 [http://bartels-sondermaschinenbau.de/Regalbau/](http://bartels-sondermaschinenbau.de/Regalbau/)

有一些 js 正在均衡盒子的高度，这可能会破坏一些东西？

有问题，但我看不出来。它也不会在任何地方发生，只是为了让它混淆示例 - 一切正常 [http://bartels-sondermaschinenbau.de/Werkstatt/Hallen-Aussenanlage/Material-Lagercontainer/](http://bartels-sondermaschinenbau.de/Werkstatt/Hallen-Aussenanlage/Material-Lagercontainer/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:52:33.323

你的代码看起来不错。

正如@lnrbob 所指出的，您的文本看起来像是放大了。

在 Firefox 中按 CTRL + 0，或在每个浏览器中按照查看菜单并将缩放设置为 0，然后重试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:53:48.013

也不适用于 FF 17.0.1。添加`height: 201px`到`li`没有`oxEqualized`类。

# iphone - X/Y 像素到经度和纬度

> ID：14197253
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:45:50.330
> 
> 标签：iphone, ios, coordinates, latitude-longitude, pixels

嘿，我使用以下公式成功地将经度和纬度转换为 x/y 坐标：

```
// These should roughly box Germany - use the actual values appropriate to your image
double minLat = 54.8;
double minLong = 5.5;
double maxLat = 47.2;
double maxLong = 15.1;

// Map image size (in points)
CGSize mapSize = mapView.frame.size;

// Determine the map scale (points per degree)
double xScale = mapSize.width / (maxLong - minLong);
double yScale = mapSize.height / (maxLat - minLat);

// Latitude and longitude of city
double spotLat = 49.993615;
double spotLong = 8.242493;

// position of map image for point
CGFloat x = (spotLong - minLong) * xScale;
CGFloat y - (spotLat - minLat) * yScale; 
```

但现在我需要以另一种方式转换它。假设我得到 x = 83 和 y = 294。我怎样才能从中得到纬度和经度？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:49:27.687

如果...

```
x = (spotLong - minLong) * xScale; 
```

然后...

```
(x / xScale) + minLong = spotLong; 
```

一定要重新排列方程吗？

然后对纬度的 y 执行相同的操作。

# python - 谷歌应用引擎启动器启动错误

> ID：14197254
> 
> 赞同：1
> 
> 时间：2013-01-07T13:45:51.203
> 
> 标签：python, google-app-engine

我是 Python 新手，经验不足。我最近在 Windows 7（64 位）上安装了 Google App Engine Launcher，并且安装了 Python 2.7。当我启动 Google App Engine Launcher 时，出现错误：

```
 Traceback (most recent call last):
File "GoogleAppEngineLauncher.py", line 42, in <module>
File "wx\_core.pyc", line 7913, in __init__
File "wx\_core.pyc", line 7487, in _BootstrapApp
File "launcher\app.pyc", line 58, in OnInit
File "launcher\app.pyc", line 152, in _VersionCheck
File "urllib.pyc", line 82, in urlopen
File "urllib.pyc", line 190, in open
File "urllib.pyc", line 338, in open_http
File "urllib.pyc", line 351, in http_error
File "urllib.pyc", line 702, in http_error_407
File "urllib.pyc", line 714, in retry_proxy_http_basic_auth
File "urllib.pyc", line 773, in get_user_passwd
File "urllib.pyc", line 782, in prompt_user_passwd
EOFError: EOF when reading a line 
```

谁能帮帮我，我试过谷歌搜索，但没有得到任何令人满意的答案。

# javascript - 向下钻取 json 数据

> ID：14197262
> 
> 赞同：2
> 
> 时间：2013-01-07T13:46:18.223
> 
> 标签：javascript, jquery, json, api

我正在尝试使用 espn 公共 API，并尝试使用他们的 json 访问 NFL 球员信息。

json 即时访问成功看起来像：

```
{
"sports": [
    {
        "name": "football",
        "id": 20,
        "leagues": [
            {
                "name": "National Football League",
                "abbreviation": "nfl",
                "id": 28,
                "groupId": 9,
                "shortName": "NFL",
                "athletes": [
                    {
                        "id": 14466,
                        "firstName": "Isa",
                        "lastName": "Abdul-Quddus",
                        "fullName": "Isa Abdul-Quddus",
                        "displayName": "Isa Abdul-Quddus",
                        "shortName": "I. Abdul-Quddus",
                        "links": {
                            "api": {
                                "athletes": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/14466"
                                },
                                "news": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/14466/news"
                                },
                                "notes": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/14466/news/notes"
                                }
                            },
                            "web": {
                                "athletes": {
                                    "href": "http://espn.go.com/nfl/player/_/id/14466/isa-abdul-quddus?ex_cid=espnapi_public"
                                }
                            },
                            "mobile": {
                                "athletes": {
                                    "href": "http://m.espn.go.com/nfl/playercard?playerId=14466&ex_cid=espnapi_public"
                                }
                            }
                        }
                    },
                    {
                        "id": 8645,
                        "firstName": "Hamza",
                        "lastName": "Abdullah",
                        "fullName": "Hamza Abdullah",
                        "displayName": "Hamza Abdullah",
                        "shortName": "H. Abdullah",
                        "links": {
                            "api": {
                                "athletes": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/8645"
                                },
                                "news": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/8645/news"
                                },
                                "notes": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/8645/news/notes"
                                }
                            },
                            "web": {
                                "athletes": {
                                    "href": "http://espn.go.com/nfl/player/_/id/8645/hamza-abdullah?ex_cid=espnapi_public"
                                }
                            },
                            "mobile": {
                                "athletes": {
                                    "href": "http://m.espn.go.com/nfl/playercard?playerId=8645&ex_cid=espnapi_public"
                                }
                            }
                        }
                    },
                    {
                        "id": 11910,
                        "firstName": "Husain",
                        "lastName": "Abdullah",
                        "fullName": "Husain Abdullah",
                        "displayName": "Husain Abdullah",
                        "shortName": "H. Abdullah",
                        "links": {
                            "api": {
                                "athletes": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/11910"
                                },
                                "news": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/11910/news"
                                },
                                "notes": {
                                    "href": "http://api.espn.com/v1/sports/football/nfl/athletes/11910/news/notes"
                                }
                            } ........
                ]
            }
        ]
    }
],
"resultsOffset": 0,
"resultsLimit": 50,
"resultsCount": 3301,
"timestamp": "2013-01-06T19:30:17Z",
"status": "success" 
```

}

继承人的 html / javascript 我正在使用：

```
$(document).ready(function(){

    $.getJSON("http://api.espn.com/v1/sports/football/nfl/athletes?apikey=MY-API-KEY-HERE&_accept=application/json",
    function(data){
      $.each(data["sports"], function(i,item){
         $("#infoDiv").append( [i] + " - " + item.name + "<br>" );    
      });
    }); 
```

});

我可以让它显示 0 - 足球，但不能使用类似的东西

```
$.each(data["sports"]["leagues"]["athletes"], function(i,item){
  $("#infoDiv").append( [i] + " - " + item.firstName + "<br>" ); 
```

访问个人运动员数据，例如 item.firstName 等。

我不断收到以下错误：

```
TypeError: data.sports.leagues is undefined 
```

我错过了什么？我成功地将相同的代码结构与其他几个提供 json 的 API 一起使用。相比之下，ESPN json 稍微复杂一些。

感谢您为我提供的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:57:31.740

运动、联赛和运动员是数组，例如：sports[0] 是一个对象（名称='football'的对象）你应该像这样迭代每个对象（未测试）：

```
$.each(data.sports, function(i,sport) {
    $.each(sport.leagues, function(i,league) {
        $.each(league.athletes, function(i,athlete) {
            $("#infoDiv").append( [i] + " - " + athlete.firstName + "<br>" );
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:22:52.267

`sports`,`leagues`并且`athletes`是您需要迭代的数组。

```
for (var i=0; i<data.sports.length; i++) {
     var sport = data.sports[i];
     $("#infoDiv").append( [i] + " - " + sport.name + "<br>" );
     for (var j=0; j<sport.leagues.length; j++) {
          var league = sport.leagues[j];
          $("#infoDiv").append( [i,j] + " - " + league.name + "<br>" );
          for (var k=0; k<league.athletes.length; k++) {
               var athlete = league.athletes[k];
               $("#infoDiv").append( [i,j,k] + " - " + athlete.fullName + "<br>" );
          }
     }
} 
```

# android - 不滚动android？

> ID：14197263
> 
> 赞同：0
> 
> 时间：2013-01-07T13:46:26.007
> 
> 标签：android, xml, android-layout

我正在尝试使用 relative 和 LinearLayout 进行滚动，但不起作用？我是为 android 开发的新手，缺少一些参数

```
<LinearLayout
    android:id="@+id/contentSobre"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/imageContent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/structImageOne"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/exemple_sobre" />

        <ImageView
            android:id="@+id/structImageTwo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/exemple_sobre" />
    </RelativeLayout>

    <TextView
        android:id="@+id/titleSobre"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:textSize="20sp"
        android:textColor="#53390e" 
        android:text="SANTO GRÃO - OSCAR FREIRE" />

    <TextView
        android:id="@+id/numberContact"
        android:layout_marginTop="3dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10sp"
        android:textColor="#565656" 
        android:text="TELEFONE(s): (11) 3082-9969" />

    <TextView
           android:id="@+id/descriptionSobre"
           android:textSize="13sp"
           android:textColor="#4a4a4a"
           android:layout_marginTop="10dp"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:maxLines="200"
           android:singleLine="false"             
           android:text="it does not ghave any brea this is a very long text. so long that it does not it does not ghave any brea this is a very long text. so long that it does not it does not ghave any brea this is a very long text. so long that it does not it does not ghave any brea this is a very long text. so long that it does not it does not ghave any brea this is a very long text. so long that it does not it does not ghave any brea this is a very long text. so long that it does not ghave any brea this is a very long text. so long that it does not ghave any brea  this is a very long text. so long that it does not ghave any brea this is a very long text. so long that it does not ghave any brea this is a very long text. so long that it does not ghave any brea this is a very long text. so long that it does not ghave any brea this is a very long text. so long that it does not ghave any brea this is a very long text. so long that it does not ghave any brea" />

    <RelativeLayout
        android:id="@+id/buttonContent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp" >

        <ImageButton
            android:id="@+id/buttonCall"
            android:layout_width="97dp"
            android:layout_height="30dp"
            android:scaleType="fitEnd"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:background="@android:color/transparent"
            android:src="@drawable/button_call_sobre" />        

        <ImageButton
            android:id="@+id/buttonMaps"
            android:layout_width="97dp"
            android:layout_height="30dp"
            android:scaleType="fitEnd"
            android:layout_marginLeft="10dp"
            android:background="@android:color/transparent"
            android:layout_toRightOf="@+id/buttonCall"
            android:src="@drawable/button_maps_sobre" />

        <ImageButton
            android:id="@+id/buttonTwitter"
            android:layout_width="34dp"
            android:layout_height="34dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:background="@android:color/transparent"
            android:src="@drawable/button_twitter"
            android:onClick="onTouchMenu" />

        <ImageButton
            android:id="@+id/buttonFacebook"
            android:layout_width="34dp"
            android:layout_height="34dp"
            android:layout_toLeftOf="@+id/buttonTwitter"
            android:background="@android:color/transparent"
            android:src="@drawable/button_facebook"
            android:onClick="onTouchMenu" />

    </RelativeLayout>
</LinearLayout> 
```

我正在尝试使用 relative 和 LinearLayout 进行滚动，但不起作用？我是为 android 开发的新手，缺少一些参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:49:56.533

问题不清楚......但如果你需要滚动线性布局，你需要用scrollview包装它......这是你需要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:53:26.477

**您应该使用 ScrollView 作为 Top Wrapper Layout。ScrollView 仅支持垂直滚动。对于水平滚动，使用`HorizontalScrollView`.**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
> 
   <LinearLayout>
        <RelativeLayout>
        </RelativeLayout>
        <RelativeLayout>
        </RelativeLayout>
   </LinearLayout> 

</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:47:37.650

您需要在可滚动的内容周围添加一个 ScrollView。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:47:48.680

你没有错过一个参数。您应该使用 ScrollView。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T13:47:58.410

将顶部布局设置为**ScrollView**。**ScrollView**是一个视图层次结构的布局容器，可以由用户滚动，允许它比物理显示更大。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

    Your other layout goes here and remember it can take only one child

</ScrollView> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T13:55:25.440

只需将顶层布局**设为 ScrollView 即可**。**ScrollView**是一个视图层次结构的布局容器，可以由用户滚动，允许它比物理显示更大。

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

            <!-- Put everything you already have here -->

    </ScrollView> 
```

# android - 带有触摸事件的 Android SurfaceView

> ID：14197266
> 
> 赞同：1
> 
> 时间：2013-01-07T13:46:41.890
> 
> 标签：android, surfaceview

我有自定义 SurfaceView 包含一个圆圈。我想通过触摸事件旋转这个圆圈。一切都很好，除了触摸完成时我不能暂停 SurfaveView 的 run() 方法。这是我的观点和主题

```
public class CircleSurfaceView extends SurfaceView implements
    SurfaceHolder.Callback {

private Circle mCircle;
private DrawThread thread;
private float mRotation = 0;

long mLastMillis = 0L;

Paint clearPaint = new Paint();

public CircleSurfaceView(Context context) {
    super(context);
    mCircle = new Circle(0, 200, 200);

    getHolder().addCallback(this);

    this.setZOrderOnTop(true);
    this.getHolder().setFormat(PixelFormat.TRANSPARENT);
    clearPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
}

public void startDrawing() {
    if (thread == null) {
        thread = new DrawThread(this);
        thread.startThread();
    }
}

public void stopDrawing() {
    if (thread != null) {
        thread.stopThread();

        // Waiting for the thread to die by calling thread.join,
        // repeatedly if necessary
        boolean retry = true;
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
            }
        }
        thread = null;
    }
}

@Override
protected void onDraw(final Canvas canvas) {
    canvas.drawPaint(clearPaint);
    mCircle.init();
    mCircle.draw(canvas);

    super.onDraw(canvas);
}

float degrees;

public void rotateCircle() {
    mCircle.rotate(mRotation);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float currentX = event.getX();
    float currentY = event.getY();
    float deltaX, deltaY;
    switch (event.getAction()) {

    case MotionEvent.ACTION_MOVE:
        // Modify rotational angles according to movement
        deltaX = currentX - previousX;
        deltaY = currentY - previousY;
        mRotation += deltaX + deltaY;
    }
    // Save current x, y
    previousX = currentX;
    previousY = currentY;
    rotateCircle();
    return true; // Event handled
}

private float previousX;
private float previousY;

private static int SEG_COUNT = 62;
private static float SEG_IN_GRAD = (float) 360 / SEG_COUNT;

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    startDrawing();
}

@Override
public void surfaceDestroyed(SurfaceHolder arg0) {
    stopDrawing();
}

public class DrawThread extends Thread {
private boolean mRun = false;
private SurfaceHolder surfaceHolder = null;
private CircleSurfaceView circleSurfaceView = null;

public DrawThread(CircleSurfaceView circleSurfaceView) {
    this.circleSurfaceView = circleSurfaceView;
    this.surfaceHolder = circleSurfaceView.getHolder();
}

public void startThread() {
    if (mRun == false) {
        mRun = true;
        super.start();
    }
}

public void stopThread() {
    if (mRun == true) {
        mRun = false;
    }
}

@Override
public void run() {
    Canvas c = null;
    while (mRun) {
        c = null;
        try {
            c = surfaceHolder.lockCanvas();
            synchronized (surfaceHolder) {
                if (c != null) {
                    Log.i("run", "run");
                    circleSurfaceView.rotateCircle();
                    circleSurfaceView.onDraw(c);
                }
            }
        } finally {
            // do this in a finally so that if an exception is thrown
            // we don't leave the Surface in an inconsistent state
            if (c != null) {
                surfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
} 
```

}

# javascript - 正则表达式只允许 10 位以下的数字？

> ID：14197269
> 
> 赞同：8
> 
> 时间：2013-01-07T13:46:48.423
> 
> 标签：javascript, jquery, regex

我正在尝试编写一个正则表达式来验证输入是否为纯正整数（最多 10 位，但我在其他地方应用了该逻辑）。

现在，这是我正在使用的正则表达式（我从[这里](https://stackoverflow.com/questions/290513/regex-pattern-for-numeric-values)得到的）：

```
 ^(([1-9]*)|(([1-9]*).([0-9]*)))$ 
```

在这个函数中：

```
if (/^(([1-9]*)|(([1-9]*).([0-9]*)))$/.test($('#targetMe').val())) {
            alert('we cool')
        } else {
            alert('we not')
        } 
```

但是，我似乎无法让它工作，我不确定它是正则表达式还是函数。我需要禁止 %, 。和 ' 也是如此。我只想要数字字符。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-07T13:51:54.763

你可以这样做：

```
/^[0-9]{1,10}$/ 
```

## 代码：

```
var tempVal = $('#targetMe').val();
if (/^[0-9]{1,10}$/.test(+tempVal)) // OR if (/^[0-9]{1,10}$/.test(+tempVal) && tempVal.length<=10) 
  alert('we cool');
else
  alert('we not'); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/sVsfk/)**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T13:48:20.143

```
var value = $('#targetMe').val(),
    re    = /^[1-9][0-9]{0,8}$/;

if (re.test(value)) {
    // ok
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T13:50:15.637

你需要一个正则表达式吗？

```
var value = +$('#targetMe').val();
if (value && value<9999999999) { /*etc.*/ } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-19T06:10:09.300

```
 var reg      = /^[0-9]{1,10}$/;
  var checking = reg.test($('#number').val()); 

  if(checking){
    return number;
  }else{
    return false;
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T13:48:46.237

这就是盲目复制代码的问题。您复制的正则表达式适用于数字，包括具有任意位数的浮点数 - 它有问题，因为它不允许`0`小数点前的数字。

您需要以下正则表达式：

```
^[1-9][0-9]{0,9}$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-09T11:14:39.640

使用此正则表达式仅匹配十位数字：

```
@"^\d{10}$" 
```

要在字符串中的任意位置查找由十个连续数字组成的序列，请使用：

```
@"\d{10}" 
```

请注意，这还将找到 11 位数字的前 10 位数字。在字符串中的任意位置搜索正好 10 个连续数字。

```
@"(?<!\d)\d{10}(?!\d)" 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-17T14:54:16.233

在这里查看此站点，您可以了解 JS 定期过期。如何创建这个？

[https://www.regextester.com/99401](https://www.regextester.com/99401)

# javascript - 发布新帖子时需要动态移动/重新排列 SharePoint blogwebparts 到顶部

> ID：14197271
> 
> 赞同：0
> 
> 时间：2013-01-07T13:46:56.507
> 
> 标签：javascript, jquery, sharepoint-2010, web-parts

我在 SharePoint 起始页上有几个博客 Web 部件。需要使新的博文脱颖而出。正在考虑将新更新的博客 web 部件重新排列到页面顶部。排在第一位...

有任何想法吗？一直在玩弄在客户端/前端进行这项工作的想法，没有后端-> 不从 VS 解决方案进行部署。

所以那里有任何jquery幻影:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:54:55.093

假设您根本不想进行任何编码，您可以轻松地使用内容查询部分来获取最新的博客文章 - 有几个例子，包括这个：

[http://blog.henryong.com/2008/06/15/how-to-customize-the-content-query-web-part-xsl-to-aggregate-blog-posts/](http://blog.henryong.com/2008/06/15/how-to-customize-the-content-query-web-part-xsl-to-aggregate-blog-posts/)

也就是说，还有其他方法可以使用客户端对象模型和/或使用 REST 或 OOB Web 服务的沙盒解决方案。博客的工作方式，最新的帖子总是“头版”项目；您只需要从 POSTS 库中获取最新信息。现在，虽然沙盒解决方案需要 Visual Studio，但它是通过直接上传到站点（如 Office 365）来部署的——不需要访问服务器。

如果您想要更加“流畅”，请记住站点类型表明它是一个博客 - 因此您可以扫描当前站点并随时选择每个博客/最新帖子，从而自动汇总它们。

我有一个执行此操作的 Web 部件，我们将发布到 codeplex，但正如您所提到的，在那个环境中这对您没有任何帮助。

大卫斯特林 - [http://davidmsterling.blogspot.com](http://davidmsterling.blogspot.com) - [http://www.sterling-consulting.com](http://www.sterling-consulting.com)

# iphone - 如何使用 UIGesture 将 UIImage 添加到应用程序中的大多数视图。

> ID：14197273
> 
> 赞同：1
> 
> 时间：2013-01-07T13:47:02.700
> 
> 标签：iphone, objective-c, ios, xcode

我想在我的应用中制作广告横幅。有点像iAd的。

我打算通过在视图上有一个 UIImage 然后分配横幅图像来实现它。然后我会添加一个触摸手势，以便用户可以单击它并转到我的应用程序中的另一个视图。我知道我可以很容易地在一个视图上执行此操作，但我希望它出现在应用程序中的大多数视图上。将横幅添加到多个视图而无需多次编写相同代码的最佳方法是什么？

下面的设计显示了我之后的那种横幅。

谢谢

![赞助商横幅](../Images/66e185f0ee3cda07c43f3009df5b20ea.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:32:37.300

```
#import <UIKit/UIKit.h>
@class custom;

@protocol adDelegate
- (void)viewAd:(NSString *)adRate;
@end

@interface custom : UIView

@property (strong, nonatomic) UIImage *viewImage;
@property (assign) id <adDelegate> delegate;

@end 
```

// 主类

```
#import "custom.h"

@implementation custom

@synthesize viewImage;
@synthesize delegate;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
        imageView.image = viewImage;
        [self addSubview:imageView];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder 
{
    if ((self = [super initWithCoder:aDecoder])) 
    {

    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{

    [self.delegate viewAd:@"view"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:10:17.127

尝试从 UIView 创建一个父类，在其中使用 UIImageView 和手势识别器执行横幅的所有显示和处理。然后，无论哪个视图需要此功能，都从该父类派生它们，并覆盖方法中的默认处理，以便您可以自定义子类中的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T14:16:14.137

几点建议：

首先，为什么不直接使用 a`UIButton`而不是`UIImage`带有手势的 a 呢？毕竟，您真正要做的只是复制按钮功能......

其次，我可能会通过创建一个包含 UIButton 的类来解决整体问题，如下所示：

```
@interface YourSuperViewController : UIViewController

@property (nonatomic, strong) IBOutlet UIButton *adButton;

- (IBAction)adTouched:(id)sender;

@end 
```

在`viewDidLoad`此类中，创建按钮并将其添加到视图中，并将您的广告特定逻辑添加到`adTouched`操作中。

然后在您的应用程序中创建其余视图作为`YourSuperViewController`. 像这样：

```
@interface SomeOtherViewController : YourSuperViewController 
```

现在`SomeOtherViewController`将自动神奇地拥有广告按钮并正确响应触摸它。完毕！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T14:22:21.210

例如，您可以创建一个 UIView 类并将其称为 BannerView。// 在bannerView.h中

```
 #import <UIKit/UIKit.h>
@interface BannerView : UIView{ 
    UIImageView* bannerImage;
}
@property(nonatomic,retain) UIImageView* bannerImage;    
@end 
```

//在bannerView.m中

```
#import "BannerView.h"

@implementation BannerView
@synthesize bannerImage;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code

    bannerImage=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"banner-image.png"]];
    bannerImage.frame=CGRectMake(0, 0, 320, 100);
    [self addSubview:bannerImage];

// add a uibutton on top of the uiimageview and assign an action for it 
// better than creating an action recogniser

    UIButton* actionButton=[UIButton buttonWithType:UIButtonTypeCustom];
    actionButton.frame=CGRectMake(0, 0, 320, 100);
    [actionButton addTarget:self action:@selector(yourAction) forControlEvents:UIControlEventTouchUpInside];

    [self addSubview:actionButton];
}

-(void) yourAction{
// do what ever here like going to an other uiviewController as you mentionned 

}

@end 
```

现在您可以通过这种方式从任何视图控制器调用此视图

```
 BannerView* banner=[[BannerView alloc] initWithFrame:CGRectMake(0, 300, 320, 100)];
    [self.view addSubview:banner]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T15:52:13.550

其他人说的都是最好的方法。如果您需要自定义功能，子类化可能是要走的路。

我只是想添加一个迂腐的东西。重要的是要记住 UIImage 不是视图。屏幕上从来没有出现过 UIImage。UIImage 是一个模型对象。它只是数据的集合。UIImageView 是一个视图对象，因此，UIImageView 可以在屏幕上显示自己。

这可能看起来过于迂腐和吹毛求疵，但是为了有效地使用 MVC（模型、视图、控制器），将这些事情整理在我们的脑海中很重要

# javascript - 如何强制 window.location 发出 HTTP 请求而不是使用缓存？

> ID：14197276
> 
> 赞同：12
> 
> 时间：2013-01-07T13:47:24.403
> 
> 标签：javascript, firefox, browser

在我的网络应用程序中，我设置`window.location`导航到不同的页面，但由于某种原因，Firefox 显示了该页面的旧版本。

使用 Firebug，我检测到浏览器甚至没有发送 HTTP 请求，它只是使用该页面的旧版本（甚至不是最后一个）并显示它。

页面本身具有[所有常见的标题](https://stackoverflow.com/a/2068407/23368)，以防止缓存在我使用链接或手动输入浏览页面时完美运行。该问题仅在设置时出现`window.location`。

这是 Firefox 的问题还是任何浏览器都会出现的问题？这种行为可以改变吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-07T13:50:07.240

您可以在页面 URL 中添加一个随机参数，以便让浏览器发出新请求。

所以而不是使用

```
 window.location = "my.url/index.html"; 
```

利用

```
 window.location = "my.url/index.html?nocache=" + (new Date()).getTime(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T13:49:21.913

您可以将 location.reload 与 true 参数一起使用，这将始终绕过缓存。

```
window.location.reload(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:46:31.260

您必须验证 url 中是否存在任何现有的查询参数。如果存在任何查询参数，则应使用“&”附加时间戳。我写了一个可能对你有帮助的快速片段。

```
window.newLocation = function( location ) {
    var newLocation = ( typeof location === "string" ) ? location : window.location.href,
       appendType = ( newLocation.indexOf("?") < 0 ) ? "?" : "&";
    window.location = newLocation + appendType + "_t=" + (new Date()).getTime();
} 
```

用法：

```
newLocation("index.html") or window.newLocation("index.html") 
// opens "index.html?_t=<timstamp>"

newLocation("index.html?existingQuery=true") or window.newLocation("index.html?existingQuery=true") 
// opens "index.html?existingQuery=true&_t=<timstamp

newLocation() or window.newLocation() 
// opens existing window location with a timestamp 
```

您可以进一步修改代码段以删除查询参数中的现有时间戳以避免重复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:51:44.483

向 url 添加一些特定时间或随机查询字符串值。这将强制页面重新加载。

```
var yourNewLoc = "http://newlocation.com/";
document.location = yourNewLoc + "?c=" + (new Date()).valueOf(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T14:57:24.197

只需要告诉你的下载功能（在控制器中，在 Laravel 的情况下）不要通过设置标题来缓存它，对 Laravel 使用以下代码：

```
$headers =[
            'Content-Type' => 'application/text',
            'Cache-Control' => 'no-store, no-cache, must-revalidate, max-age=0',
            'Cache-Control' => 'post-check=0, pre-check=0, false',
             'Pragma' => 'no-cache',  ];
return response()->file($pathToFile, $headers); 
```

这段代码对于 PhP 非常适用，也只需要相应地传输代码。添加新日期可能会使链接无效，尤其是在您使用临时签名链接等时。

干杯

# asp.net-mvc - Rotativa 下载和另存为对话框

> ID：14197284
> 
> 赞同：6
> 
> 时间：2013-01-07T13:47:44.343
> 
> 标签：asp.net-mvc, rotativa

我正在使用 Rotativa 工具来显示 pdf。它适用于以下代码：

```
public ActionResult PreviewDocument()
{

     var htmlContent = Session["html"].ToString();
     var model = new PdfInfo { Content = htmlContent, Name = "PDF Doc" };
     return new ViewAsPdf(model);
} 
```

我想知道通过浏览器的“另存为”对话框在单击按钮时下载 pdf 的方法，而不是在某些 iframe 中显示。"new ViewAsPdf(model)" 只返回 pdf 数据。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-06T07:37:04.823

您可以像这样向 Rotativa 调用添加其他属性：

```
return new PartialViewAsPdf("PreviewDocument", pdfModel)
                   {
                       PageSize = Size.A4,
                       FileName = "PDF Doc.pdf"
                   }; 
```

它会为你创建文件。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T12:23:38.550

我终于有办法做到这一点。

实际上 rotativa 的方法“return new ViewAsPdf(model)”返回 HttpResponseStream。我们几乎无能为力的地方。但是我们可以在使用自定义属性执行操作后修改/更改响应。我们可以覆盖动作过滤器的 OnResultExecuted() 方法。

控制器的动作

```
[HttpGet]
[ActionDownload] //here a custom action filter added
public ActionResult DownloadDocument()
{   
    var htmlContent = "<h1>sachin Kumar</hi>";

    var model = new PdfInfo {FtContent = htmlContent, FtName = "Populate Form"};
    return new ViewAsPdf(model);
} 
```

自定义操作过滤器：

```
public class ActionDownloadAttribute : ActionFilterAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {   
            //Add content-disposition header to response so that browser understand to download as an attachment.   
        filterContext.HttpContext.Response.AddHeader("content-disposition", "attachment; filename=" + "Report.pdf"); 

            base.OnResultExecuted(filterContext);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-01T14:31:48.493

您可以使用返回新的 ActionAsPdf。无需自定义属性或其他任何东西。示例：[https ://github.com/webgio/Rotativa/](https://github.com/webgio/Rotativa/)

```
public ActionResult PrintPreviewDocument()
{
    return new ActionAsPdf("PreviewDocument") { FileName = "PDF Doc.pdf" };
}

public ActionResult PreviewDocument()
{

    var htmlContent = Session["html"].ToString();
    var model = new PdfInfo { Content = htmlContent, Name = "PDF Doc" };
    return View(model);
} 
```

# javascript - 如何使用 javascript 找到特定的子元素

> ID：14197294
> 
> 赞同：0
> 
> 时间：2013-01-07T13:48:11.490
> 
> 标签：javascript, html, jquery-selectors

我刚刚开始使用 javascript 并尝试执行以下操作：
我的 html 文档包含 div 和 span 元素，如下所示。我想创建一个变量来存储`my-new-id`特定 div 子元素的值。
我必须继续的唯一信息是，我总是知道跨度`text`将是什么，因为它基于用户名。因此，我将如何获得`my-new-id`for的价值`user1`？

我已经弄清楚如何使用 document.getElementById 方法导航到正确的 div 元素。然后我尝试使用 jquery 选择器，例如`:contains`，但卡住了。

非常感谢提前。

```
<div id=1>
<span my-new-id=x>user1</span>
<span my-new-id=y>user2</span>
<span my-new-id=z>user3</span>
</div>

<div id=2>
<span my-new-id=x>user10</span>
<span my-new-id=y>user1</span>
<span my-new-id=z>user30</span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:51:33.890

使用 jQuery：

```
var val = $('span:contains("user1")').attr('my-new-id'); 
```

还有几点：

*   不要使用以数字开头的 ID。这在 HTML4 规范中是不允许的，并且可能会导致某些浏览器出现意外行为。相反，在您的 ID 前加上一个字母字符串，如下所示：

    ```
    <div id="container1">
        ...
    </div> 
    ```

*   我建议您使用`data-*`属性而不是弥补不存在的属性。您可以制作`data`这样的属性：

    ```
    <span data-new-id="x">user1</span> 
    ```

    然后，您可以使用以下方法检索此值：

    ```
    $('span:contains("user1")').data('newId'); 
    ```

    请注意，属性名称已去除破折号和驼峰式大小写。

# android - 如何在应用内结算中更改成功购买产品后出现的 toast 消息

> ID：14197295
> 
> 赞同：10
> 
> 时间：2013-01-07T13:48:13.117
> 
> 标签：android, in-app-purchase, in-app-billing

用户购买产品后，我收到一条消息，例如“谢谢，您的商品将很快出现”。现在这条消息来自市场方面。但我想要一条自定义消息而不是这条消息。

如何做同样的事情，或者至少我怎样才能删除这个 toast 通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:32:49.523

> 正如其他用户所说，您**无法**从 Play 商店更改 toast。

您必须为此编辑 Play 商店应用程序。

> 你可以***做***的是检查购买是否成功，并展示你自己的吐司说“该物品现在可用”

此消息适用于 Play 商店显示的 toast。

# oracle - 在过程中使用 plsql 表

> ID：14197296
> 
> 赞同：1
> 
> 时间：2013-01-07T13:48:14.880
> 
> 标签：oracle, plsql, procedure

我在 oracle 数据库 9i 中使用 plsql 我有一个存储过程，带有一个称为数字的“数字表”的 in 参数。我现在想从表中选择所有行，其中名为：ID 的列等于“数字”中的数字，就像我可以做的一样`select * from table name where Id in (!,!,!,...)` 感谢您的帮助。

更新：为了澄清，我有一个名为 numbers 的用户定义类型， Number 定义为：数字表。所以在程序 decleration 我有“P_array in numbers”我需要`select * from a table where Id is found in p_array`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:23:14.440

像这样？

```
SQL> create type numbers as table of number;
  2  /

Type created.

SQL> create table foo (id number) ;

Table created.

SQL> insert into foo select rownum from dual connect by level <= 10;

10 rows created.

SQL> select * from foo;

        ID
----------
         1
         2
         3
         4
         5
         6
         7
         8
         9
        10

10 rows selected.

SQL> create procedure testnum(p_num in numbers)
  2  is
  3  begin
  4    for r_row in (select id
  5                    from foo f
  6                   where f.id in (select /*+ cardinality(t, 10) */ column_value
  7                                    from table(p_num) t))
  8    loop
  9      dbms_output.put_line(r_row.id);
 10    end loop;
 11  end;
 12  /

Procedure created.

SQL> set serverout  on
SQL> exec testnum(numbers(2, 6, 9));
2
6
9 
```

基数提示用于大致告诉 oracle 表中有多少元素。没有它，Oracle 将假定大约 8k 行，这可能太高并导致计划中不需要的完整扫描。

如果您愿意，也可以直接加入。

```
for r_row in (select /*+ cardinality(t, 10) */ f.id
                from foo f
                     inner join table(p_num) t
                             on t.column_value = f.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:54:31.950

try the following :-

```
select * from tableName where id in (select c.column_value from table(cast(p_array as numbers)) c); 
```

where numbers is table of number

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:51:13.813

```
SELECT * FROM A_TABLE WHERE ID IN (SELECT SAVED_NUMBERs FROM TABLE_NUMBER); 
```

你是这个意思吗？

# security - PEM 证书标头“-----BEGIN CERTIFICATE-----”的破折号数是多少

> ID：14197299
> 
> 赞同：1
> 
> 时间：2013-01-07T13:48:26.267
> 
> 标签：security, x509certificate

前后总是有5个破折号还是没有重要性？它是约定还是 RFC 的一部分？

谢谢

# drupal-7 - 创建与现有内容类型同名的新内容类型

> ID：14197305
> 
> 赞同：0
> 
> 时间：2013-01-07T13:48:38.807
> 
> 标签：drupal-7

我在 Drupal 7 中创建新内容类型时遇到问题。

我有一个现有的内容类型，比如“猫”。

我将 'cats' 重命名为 'cats_old' （人类可读的名称和机器名称），并试图创建一个名为 'cats' 的新的、不同的内容类型，但 Drupal 只是更新了 'cats_old' 并且不允许我创建了一个名为“猫”的新内容类型。

有没有已知的问题/解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:34:45.243

我复制了你的场景，它也发生在我身上。我发现“cats”内容类型未显示在内容类型列表或添加内容页面中，但“node_type”表中有一个“cats”内容类型条目。我不明白确切的问题是什么，但有一个[节点转换](http://drupal.org/project/node_convert)模块可以帮助您将节点从当前内容类型转换为另一种类型，并传输内容类型字段。

# django - pywhois 的 Django Buildout 配方（不在 pypi 上）

> ID：14197313
> 
> 赞同：1
> 
> 时间：2013-01-07T13:49:06.967
> 
> 标签：django, buildout, pypi, recipe, pywhois

我正在尝试在谷歌代码上为 pywhois 创建一个构建配方。

其网站在这里： [http ://code.google.com/p/pywhois/](http://code.google.com/p/pywhois/)

注意：如果您使用 easy_install pywhois，它会从 pypi（python 包索引）安装另一个包：http: [//pypi.python.org/pypi/pywhois/0.1](http://pypi.python.org/pypi/pywhois/0.1)

我正在关注关于构建配方的文档......（[http://pypi.python.org/pypi/djangorecipe/1.3](http://pypi.python.org/pypi/djangorecipe/1.3)）

我发现我可以从这里克隆源代码：

```
hg clone https://code.google.com/p/pywhois/ 
```

但我无法将它们全部放在一个有效的构建脚本中......（老实说，这是我的第一个构建脚本试验......对于所有其他包，我找到了一个现有的配方，通常我会尽量避免任何不在pypi上）

我在他们的网站上创建了 2 个问题......其中一个是使用 Python 包索引中的另一个名称，另一个是在那里获取他们的包。

有什么装修大师吗？

**编辑**

（已经有 2 个人试图帮助我，谢谢！）

我在 buildout.conf 中使用了它：

```
extensions = 
    buildout.dumppickedversions
    mr.developer
auto-checkout = pywhois 
```

并添加到我的开发列表中：develop = src/pywhois

并添加到我的鸡蛋列表中：

```
eggs =
    myproject
    pywhois 
```

并声明了回购的来源：

```
[sources]
pywhois = hg https://code.google.com/p/pywhois/ 
```

并且当然添加到鸡蛋中：pywhois

它正在下载它并创建一个鸡蛋......

**编辑2**

无论我做什么，我都会不断得到：现有包 'pywhois' 的源 URL 不同。应为“https://code.google.com/p/pywhois/”。”；

在我看来，如果谷歌代码包的包名要改变，这个问题就会得到解决......我已经在问题跟踪器上得到了关于这个的回复。

请参阅[http://code.google.com/p/pywhois/issues/detail?id=33](http://code.google.com/p/pywhois/issues/detail?id=33)

**编辑 3：现在在 PyPI：python-whois**

并且，开发人员 (Richard Penman) 的出色快速行动。所以这个包被重命名为 python-whois （他正在考虑另一个名字，但现在这个工作）。他把它放在pypi上！

所以这个问题对我来说已经解决了，但是 Martijn 和 Reinout 的回答让我学到了更多关于构建的知识，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:44:08.347

我会使用[`mr.developer`](http://pypi.python.org/pypi/mr.developer)本地结帐，并将其用作开发彩蛋：

```
[buildout]
extensions = mr.developer
auto-checkout = pywhois

[sources]
pywhois = hg https://code.google.com/p/pywhois/ 
```

现在`mr.developer`将检查，运行它以使其成为一个开发蛋，并告诉 buildout 它是可用的`pywhois`。现在 buildout 将使用该本地副本来满足任何要求。`src/``setup.py``pywhois`

# string - Bash：检查字符串子字符串

> ID：14197316
> 
> 赞同：0
> 
> 时间：2013-01-07T13:49:12.383
> 
> 标签：string, bash, equality

按照[superuser 中的这个答案](https://superuser.com/questions/39751/add-directory-to-path-if-its-not-already-there)，我在 bash 中编写了该函数：

```
_add_env()
{
    export $1
    if [[ ":\$$1:" != *":$2:"* ]]; then
            eval $1="\$$1:$2";
    fi
}; 
```

我这样称呼它：_merge_env PATH "/home/subway/land"

即使 PATH 包含给定的路径，条件似乎也是正确的。

这是相关的 bash -x 输出：

*   第579*章*
*   第580章

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:54:38.067

`"\$$1"`不评估为 $PATH 的内容，而是评估为`$PATH`. 使用变量间接：

```
[[ ":${!1}:" != *":$2:" ]] 
```

# iphone - 如何在ios的nsarray中声明常量值

> ID：14197322
> 
> 赞同：2
> 
> 时间：2013-01-07T13:49:28.893
> 
> 标签：iphone, ios

`NSArray`我已经像下面这样声明了常量。

```
static NSArray* const myArray = [NSArray arrayWithObjects:@"obj1",@"obj2",@"ibj3",@"obj4",@"obj5",nil]; 
```

但它显示错误“Initiliser 元素不是编译时间常数”。所以我这样声明。但我得到了错误。

请帮助这个案例。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T13:52:13.160

由于`NSArrays`是堆分配的对象，因此您不能在静态上下文中创建它们。您可以声明变量，然后在方法中对其进行初始化。

所以，你可以这样做： -

```
static NSArray *myStaticArray = nil;

- (void) someMethod
{
  if (myStaticArray == nil)
  {
    myStaticArray = [[NSArray alloc] init...];
  }
} 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T16:03:41.163

我不明白为什么你不能用它来解决你的问题。它是**100% 不变**的，因为它`NSArray`是不可变的，而且它也是**100% 静态**的。

* * *

**GlobalConstant.h**文件：

```
#import <Foundation/Foundation.h>

// EDITED : __unused static NSArray *_myGlobalArray;

@interface GlobalConstant : NSObject

+ (NSArray *)myGlobalArray;

@end 
```

* * *

**GlobalConstant.m**文件：

```
#import "GlobalConstant.h"

@implementation GlobalConstant

+ (NSArray *)myGlobalArray {

    static NSArray *_myGlobalArray = nil; // EDITED

    @synchronized (_myGlobalArray) {
        if (_myGlobalArray == nil) {
            _myGlobalArray = [NSArray arrayWithObjects:@"1", @"2", nil]; // here is your array...
        }
        return _myGlobalArray;
    }
}

@end 
```

* * *

...并且您的数组将在包含该`GlobalConstant.h`文件的每个类中可用，您可以像

```
NSArray *_globalArray = [GlobalConstant myGlobalArray]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T14:29:42.877

To create the static array you can make use of the `initialize` method. This is a special class method that every class has. It is called the first time a class is referenced in any way and before any other code in the class is executed.

```
static NSArray* myArray = nil;

@implementation SomeClass

+ (void)initialize {
    if (self == [SomeClass class]) {
        myArray = @[ @"obj1", @"obj2", @"obj3", @"obj4", @"obj5" ];
    }
}

// rest of methods

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T14:03:13.653

并且，为了节省打字，您可以使用`NSArray* myArray = @[ @"obj1", @"obj2", @"ibj3", @"obj4", @"obj5" ];`

# vb.net - 在线程运行时使用计时器

> ID：14197324
> 
> 赞同：3
> 
> 时间：2013-01-07T13:49:46.653
> 
> 标签：vb.net, multithreading, timer

好的，所以首先我使用的是 Visual Basic 2010，并且我有一个线程不断循环以检查来自远程客户端的网络请求。我想做的是，当客户端提交某个请求时，将触发计时器以在表单上开始倒计时，但由于某种原因，我无法在线程运行时启动计时器。我还尝试在启动计时器之前中止线程，但这也不起作用。任何帮助将不胜感激，因为自上周以来，我一直在为此苦苦挣扎。

```
Do While p1buzzedstatus = False Or p2buzzedstatus = False Or p3buzzedstatus = False
    'Download Communication File'
    Try
        Threading.Thread.Sleep(1)
        Dim Aclient As New Net.WebClient
        Aclient.Credentials = New Net.NetworkCredential(remote_buzzer_registration.FTPUserName, remote_buzzer_registration.FTPPassword)
        If Aclient.DownloadString(BuzzerCommandURL) = "" Then
            'Don't Do Anything'
        Else
            'Check For Buzz'
            keypressed = Aclient.DownloadString(BuzzerCommandURL)
            Aclient.UploadString(BuzzerCommandURL, "")
            buzzercode()
            answer_timer.Start()  ' <--- HERE
        End If
    Catch ex As Exception
    End Try
Loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:56:23.223

如果您`answer_timer`是 WinForm 计时器控件 ( `System.Windows.Forms.Timer`)，则不能从 UI 线程以外的任何线程启动它。从另一个线程启动 WinForm 计时器控件不会导致异常，但它也根本不起作用。

要正确启动计时器，您可以像这样调用 UI 线程上的方法：

```
Me.Invoke(New MethodInvoker(AddressOf answer_timer.Start)) 
```

或者，您可以使用`System.Timers.Timer`或`System.Threading.Timer`。其中任何一个都可以从任何线程正常工作。in`System.Timers`是与控件最接近的等效项。但是，由于这两个计时器通过新线程计时，因此在计时器计时时执行的代码在对 UI 执行任何操作之前仍需要调用回 UI 线程。因此，如果您的计时器滴答代码正在对表单或控件执行任何操作，那么坚持使用 WinForm 计时器控件可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:18:56.687

猜测一下：您的计时器位于 Windows 窗体上，而您正尝试使用另一个线程来更新它？当您尝试此操作时，将不会触发该事件（如果我没记错的话，该行为看起来很奇怪）。您遇到此问题是因为您的第二个线程无法直接更新 UI 线程。您应该尝试在您的第二个线程调用的 UI 线程上使用委托。

您只需将 Timer.start 包装到委托中即可。这是问题所在：如果您的计时器要在线程 2 上执行某些操作，您将再次遇到问题。因此，最好将计时器移动到线程 2（将计时器变暗为新 windows.forms.timer）并在那里运行它。在它的滴答事件中，它可以提出一个代表来更新倒计时......

# html - 使用 jquery 淡出一个表并用另一个表替换？

> ID：14197326
> 
> 赞同：0
> 
> 时间：2013-01-07T13:49:55.120
> 
> 标签：html, html-table, fadein, fadeout, replacewith

我在这里搜索了一些类似的主题，但我无法使它们适应我的确切情况。我有一个简单的单页网站（嗯，我希望它是一个单页），顶部附近有五个超链接。我为每个链接显示五个不同的表格，而不是为每个表格创建一个新页面并使用指向它们的常规链接我认为在同一页面上淡出一个表格并淡入其他表格会很好，具体取决于显然点击了哪个链接。

所以默认页面的顶部会有导航：

```
<a href="#" id="table1">Table 1</a>
<a href="#" id="table2">Table 2</a>
<a href="#" id="table3">Table 3</a>
<a href="#" id="table4">Table 4</a>
<a href="#" id="table5">Table 5</a> 
```

然后默认情况下 table1 将显示在页面上：

```
<table id="table1">
<tr>
<td>foo</td>
</tr>
<tr>
<td>bar</td>
</tr>
<table> 
```

其他四张桌子将被隐藏。然后，如果单击表 2 的链接，则表 1 淡出，表 2 淡入，其他四个表/链接相同

所以问题是，我需要什么 jQuery？我知道我需要使用淡入/淡出，`replaceWith`但我没有成功尝试修改我在这里找到的其他一些示例。一些具有多个表的具体示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:03:49.883

只需将slideDown 更改为fadeIn，将slideUp 更改为fadeOut。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script type="text/javascript">
        $(function(){
            var current, tbl = $(".tbl").hide(), speed = 1000, sliding = false;

            $(".hnd").click(function(e){
                e.preventDefault();

                if(sliding == true) return;

                sliding = true;

                var tblId = $(this).attr("href");

                if(!current){
                    $(tblId).fadeIn(speed, function(){
                        current = tblId;
                        sliding = false;
                    });

                } else {
                    $(current).fadeOut(speed, function(){
                        $(tblId).fadeIn(speed, function(){
                            current = tblId;
                            sliding = false;
                        });
                    });
                }
            });
        });
    </script>

    <style type="text/css">
        .tbl{
            border: 1px solid;
        }
    </style>
</head>
<body>

<a class="hnd" href="#table1">Table 1</a>
<a class="hnd" href="#table2">Table 2</a>
<a class="hnd" href="#table3">Table 3</a>
<a class="hnd" href="#table4">Table 4</a>
<a class="hnd" href="#table5">Table 5</a>

<div id="table1" class="tbl">
    <table>
        <tr>
            <td>foo</td>
        </tr>
        <tr>
            <td>bar</td>
        </tr>
    </table>
</div>

<div id="table2" class="tbl">
    <table>
        <tr>
            <td>foo 2</td>
        </tr>
        <tr>
            <td>bar 2</td>
        </tr>
    </table>
</div>

<div id="table3" class="tbl">
    <table>
        <tr>
            <td>foo 3</td>
        </tr>
        <tr>
            <td>bar 3 </td>
        </tr>
    </table>
</div>

<div id="table4" class="tbl">
    <table>
        <tr>
            <td>foo 4</td>
        </tr>
        <tr>
            <td>bar 4</td>
        </tr>
    </table>
</div>

<div id="table5" class="tbl">
    <table>
        <tr>
            <td>foo 5</td>
        </tr>
        <tr>
            <td>bar 5</td>
        </tr>
    </table>
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:08:43.187

首先，在不同的 HTML 元素上使用相同的标识符并不是一个好习惯：

```
<a href="#" id="table1">Table 1</a>`
<table id="table1">` 
```

您必须在导航上设置单击事件或将处理程序明确指定为属性：

```
<a href="#" id="tableLink1" onclick="ShowTable(1)">Table 1</a> 
```

然后定义处理程序：

```
function ShowTable(number)
{
    //fade out table that is shown
    $('table:visible').fadeOut('slow',function (){
        $('#table'+number).fadeIn('slow');
    });        
} 
```

编辑：让浏览器等到可见表淡出，然后再开始淡入另一个表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:08:27.243

不要重新发明轮子，使用 jQuery UI 之类的东西。查看`Effect`此处的示例：http: [//jqueryui.com/effect/](http://jqueryui.com/effect/)。请注意，它可以为您带来几种不同的效果。找到您喜欢的效果后，您可以单击“查看源代码”链接以获取代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T14:20:22.373

```
<!DOCTYPE html>
<html>
<head>
    <title></title>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script type="text/javascript">
        $(function(){
            var current, tbl = $(".tbl").hide(), speed = 1000, sliding = false;

            $(".hnd").click(function(e){
                e.preventDefault();

                if(sliding == true) return;

                sliding = true;

                var tblId = $(this).attr("href");

                if(!current){
                    $(tblId).slideDown(speed, function(){
                        current = tblId;
                        sliding = false;
                    });

                } else {
                    $(current).slideUp(speed, function(){
                        $(tblId).slideDown(speed, function(){
                            current = tblId;
                            sliding = false;
                        });
                    });
                }
            });
        });
    </script>

    <style type="text/css">
        .tbl{
            border: 1px solid;
        }
    </style>
</head>
<body>

<a class="hnd" href="#table1">Table 1</a>
<a class="hnd" href="#table2">Table 2</a>
<a class="hnd" href="#table3">Table 3</a>
<a class="hnd" href="#table4">Table 4</a>
<a class="hnd" href="#table5">Table 5</a>

<div id="table1" class="tbl">
    <table>
        <tr>
            <td>foo</td>
        </tr>
        <tr>
            <td>bar</td>
        </tr>
    </table>
</div>

<div id="table2" class="tbl">
    <table>
        <tr>
            <td>foo 2</td>
        </tr>
        <tr>
            <td>bar 2</td>
        </tr>
    </table>
</div>

<div id="table3" class="tbl">
    <table>
        <tr>
            <td>foo 3</td>
        </tr>
        <tr>
            <td>bar 3 </td>
        </tr>
    </table>
</div>

<div id="table4" class="tbl">
    <table>
        <tr>
            <td>foo 4</td>
        </tr>
        <tr>
            <td>bar 4</td>
        </tr>
    </table>
</div>

<div id="table5" class="tbl">
    <table>
        <tr>
            <td>foo 5</td>
        </tr>
        <tr>
            <td>bar 5</td>
        </tr>
    </table>
</div>

</body>
</html> 
```

# python - 当xaxis是日期时间时如何在python图形上放置一个文本框

> ID：14197334
> 
> 赞同：0
> 
> 时间：2013-01-07T13:50:17.240
> 
> 标签：python, datetime, textbox, matplotlib

我制作了一个 x 轴为`datetime`(2012-8-1, 2012-10,7....)

我想放一个文本框来标记这个数字

`id = ("(A)","(B)","(C)","(D)","(E)","(Average)")`

# X轴

```
months = mpl.dates.MonthLocator() # every month
days = mpl.dates.DayLocator(interval=5) # every 10 days
dateFmt=mpl.dates.DateFormatter('%m-%d')    
ax.xaxis.set_major_formatter(dateFmt)
ax.xaxis.set_major_locator(months)
#ax.xaxis.set_minor_locator(days)
ax.xaxis_date() 
```

# Y轴

```
ax.set_ylim(ymin[i],ymax[i])
ax.set_ylabel(ylabels)
ax.axhline(linewidth=0.5,color="k")
ax.yaxis.set_major_locator(tk.MaxNLocator(nbins=3))
ax.yaxis.set_minor_locator(tk.MaxNLocator(nbins=6))
[tickline.set_markersize(3) for tickline in ax.yaxis.get_ticklines(minor=True)]
[tickline.set_markersize(2.5) for tickline in ax.yaxis.get_ticklines(minor=True)] 
```

# 文本

```
ax.text(0.25,ymax[i],id[i],fontsize=15) 
```

但我根本看不到标签。

我怎样才能意识到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:35:20.123

您需要以与其他绘图方法相同的格式（日期）输入 x 坐标，或者*转换*坐标。如果您想坚持使用 x=.25，您可以使用：

```
ax.text(0.25,ymax[i],id[i], transform=ax.transAxes, fontsize=15) 
```

它将文本放置在斧头宽度的四分之一处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T14:11:22.460

一种方法是将日期转换为数字并在后续调用中使用该数字：

```
dates = matplotlib.dates.date2num([x])
ax.text(dates[0], y, message, color='red') 
```

其中 x 是您要转换的日期时间，假定 y 不是日期时间格式而是数字格式，并且 message 包含您要显示的字符串。

# java - 将 jquery-ajax 与 play 2.0 框架一起使用

> ID：14197339
> 
> 赞同：1
> 
> 时间：2013-01-07T13:50:50.723
> 
> 标签：java, jquery, playframework, playframework-2.0

我有一个问题，我必须在单击特定行按钮时获取行的特定数据，并且必须通过 ajax 在同一页面上显示该数据。

下面是 index.scala.html 的代码：

```
@(products: List[Products])

@import helper._
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<h1>@products.size() product(s)</h1>
<table border=1>
<tr>
<td>Product Name</td>
<td>Quantity</td>
<td>Price</td>
</tr>
@for(product <- products) {
    <tr>
        <td>
            @product.productname
        </td>
        <td>
            @product.quantity
        </td>
        <td>        
            @product.price
        </td>
        <td>        

            <input type="button" value="Add Product" name="@routes.Application.user(@product.product_id)" id="but"/>

        </td>
    </tr>
}
</table>

<div class="result" style="border: 1px solid black; padding: 5px;">not sent yet...</div>

<script type="text/javascript">
    jQuery("#but").click(
            function () {
                $.get(jQuery(this).attr("name"), function (data) {
                    $('.result').html(data);
                });
                return false;
            }
    )
</script> 
```

我的 Application.java 包含如下所示的方法：

```
public static Result user( id){
        return ok("Play's controller told that you're about to get data for user no. "+id);
    } 
```

我面临的问题是：

```
 **<input type="button" value="Add Product" name="@routes.Application.user(@product.product_id)" id="but"/>** 
```

**错误是**：编译错误非法启动简单表达式

任何人都可以帮助加载动态数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:54:24.590

请删除第二个`@`：

```
@routes.Application.user(product.product_id) 
```

第二个不需要，因为第一个表明您使用的是模板语言。

# database - 使用复合主键元素的 SELECT 性能

> ID：14197342
> 
> 赞同：1
> 
> 时间：2013-01-07T13:51:12.253
> 
> 标签：database, performance, postgresql, select, composite-primary-key

我正在使用 PostgreSQL 8.1，并且我有一个包含 3 个元素且没有其他索引的复合主键的表： PRIMARY KEY (el1, el2, el3)

如果我进行像 SELECT * FROM table WHERE el1 IN (...) 这样的选择操作，该操作会考虑到主键包含 el1 的事实，还是会因为没有索引可以提供帮助而变慢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:13:43.423

根据[PostgreSQL 文档](http://www.postgresql.org/docs/8.2/static/indexes-multicolumn.html)：

> 多列 B 树索引可用于涉及索引列的任何子集的查询条件，但当前导（最左侧）列存在约束时，索引效率最高。确切的规则是前导列上的等式约束，加上没有等式约束的第一列上的任何不等式约束，将用于限制扫描的索引部分。

您还可以尝试对查询运行解释计划以确定此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:13:13.300

Postgres——以及我所知道的每个 SQL 引擎——都可以使用多字段索引中的第一个或多个字段。在您的情况下，索引在（el1，el2，el3）上，它可以将索引用于“其中 el1=x”或“哪里 el1=x 和 el2=y”之类的查询。

如果你不给 el1 赋值，它就不能使用索引。就像“select ... where el2=y”一样，索引是没用的。

# c++ - 如何使用 Winsock 查询套接字保持活动值？

> ID：14197347
> 
> 赞同：0
> 
> 时间：2013-01-07T13:51:23.430
> 
> 标签：c++, winsock

我正在为需要设置 TCP Keep Alive 选项的值的 Java 应用程序编写 JNI 库。（它设置 Keep Alive Timeout 和 Interval 的值）在大多数情况下，我认为我可以正常工作，因为我可以从 Java 设置 Keep Alive 开/关，并在 C++ 代码中以正确的结果查询它。我可以设置其他两个选项，并且没有错误，但我不确定如何查询这些选项值。查询这些值以快速证明它们已被设置会很有用。

有任何想法吗？

唯一的限制是我使用的是 C++、Winsock 并且目标操作系统是 Windows XP 或更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:02:00.503

请参阅此处了解如何：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ee470551(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee470551(v=vs.85).aspx)

神奇的词是`getsockopt`,`setsockopt`和`SO_KEEPALIVE`。

您可能还需要 WSAIoctl：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/dd877220(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd877220(v=vs.85).aspx)

系统没有任何方法检查`tcp_keepalive`传递给`WSAIoctl`for的结构的当前值`SIO_KEEPALIVE_VALS`。您可以将它们设置为您想要的值，但您无法询问它们当前的值。

如果您想检查它们是否被兑现，您可以设置一个测试用例并使用 wireshark 或网络监视器，然后查看值是什么。但请注意，如果系统不遵守设置，您可能无能为力。

但是，如果试图用应用程序级别的含义重载 TCP keepalive，您可能希望看到我对这个问题的回答：

*   [异步套接字和“静默”断开连接](https://stackoverflow.com/questions/5338352/)

# asp.net-mvc - 我怎样才能拥有一个可以从不同控制器访问的对象？

> ID：14197349
> 
> 赞同：0
> 
> 时间：2013-01-07T13:51:25.603
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用 ASP.Net MVC4，我自定义我的登录，这没关系，我想保存这个对象 USER，我可以从不同的控制器和不同的区域访问。我试图将此对象定义为“静态”，但我无法访问对象的值：

```
if (Servicio.ValidarUsuario())
            {
                string Mensaje = "";
                Models.AdmUsuario oAdmUsuario = new Models.AdmUsuario();
                oAdmUsuario.Au_codusuario = login.UserName;
                Servicio.RetornaEntidad<Models.AdmUsuario>(ref Mensaje, "admsis.adm_usuario", oAdmUsuario.getPk(), oAdmUsuario);
                ***Models.AdmUsuario.UserWeb = oAdmUsuario;***
                FormsAuthentication.SetAuthCookie(login.UserName, false);                 
                Session["Modulo"] = null;
                Session["Menu"] = null;
                return RedirectToAction("index", "raMainReclamo", new { area = "Reclamos" });
            } 
```

在我定义的模型中：

```
public static AdmUsuario UserWeb; 
```

但我无法获得价值。你有什么想法，我怎么能从不同区域的不同控制器访问一个对象的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:02:36.733

您需要一种在请求之间存储对象的方法。您可以将对象放入会话内存中并将其拉回。

```
{
    // Other Code
    Session["AdmUsuario"] = oAdmUsuario;
    return RedirectToAction("index", "raMainReclamo", new { area = "Reclamos" });
} 
```

Reclamos 区域的控制器

```
public class raMainReclamoController : Controller
{
    public ActionResult Index() {
         var oAdmUsuario = Session["AdmUsuario"] as Models.AdmUsuario;

         // Other Code
    }
} 
```

但是，更标准的方法是将对象持久保存到数据库中，然后将其拉出。您可以阅读有关使用实体框架访问 sql 数据库的信息。我喜欢使用 RavenDB 进行存储，因为它使保存对象变得非常容易。

** 回应评论的更新 **

**这只是伪代码，因为我不知道您使用什么来连接到 postgres。**

```
{
    // Other Code
    oAdmUsuario = postgresContext.Store(oAdmUsuario);
    postgresContext.SaveChanges();
    return RedirectToAction("index", "raMainReclamo", new { area = "Reclamos", id = oAdmnUsuario.Id });
} 
```

Reclamos 区域的控制器

```
public class raMainReclamoController : Controller
{
    public ActionResult Index(int id) {
         var oAdmUsuario = postgresContext.GetById<Models.AdmUsuario>(id);

         // Other Code
    } 
```

# c - 如果行包含空格，C 中的回车将无法正常工作

> ID：14197355
> 
> 赞同：1
> 
> 时间：2013-01-07T13:51:50.723
> 
> 标签：c, carriage-return

我有一个非常奇怪的回车问题。我尝试多次重写一行，如果该行没有空格，它工作正常，如果它有空格，则不起作用。例如这段代码

```
printf("                                                                          ");
printf("\rtest test");
printf("                                                                          ");
printf("\rtest test");
printf("                                                                          ");
printf("\rtest test");
printf("                                                                          ");
printf("\rtest test"); 
```

将键入 4 行“测试测试”，而此代码

```
printf("                                                                          ");
printf("\rtest");
printf("                                                                          ");
printf("\rtest");
printf("                                                                          ");
printf("\rtest");
printf("                                                                          ");
printf("\rtest"); 
```

将键入一行“测试”。问题是什么？我希望能够重写任何行，不管它是否有空格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T13:56:35.680

`\r`将光标移动到 tty 上物理行的开头。如果上一次打印将光标换行到下一行（即空格数+“文本文本”中的字符数大于显示的宽度），则光标在下一个物理行上。你需要使用更复杂的转义序列来完成你想要的。（即，保存/恢复光标位置。）作为一个例子（这不是可移植的，但在许多情况下都有效），你可以这样做：

```
fputs( "\0337", stdout );  /* Save the cursor position */
printf( " ... " );
fputs( "\0338", stdout );  /* restore cursor position */ 
```

请注意，如果光标位于屏幕底部，这可能不会完全符合您的要求。位置将保存在屏幕底部，多行输出滚动，光标恢复到屏幕底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:21:46.517

要在新行上打印，请使用换行符 ('\n') 而不是回车。

'\r' 在控制台上的行为是返回到当前行的开头。在这种情况下，在第一个实例中强制换行的是大量的空间填充。

在某些情况下，终端可以配置为将 CR 转换为 CR+LF。严格来说，'\n' 只是一个 LF 字符，它向下移动一行而不返回到开头，但标准输出的正常行为是将其转换为 CR+LF。

# css - 为什么我的分页没有从新行开始？

> ID：14197358
> 
> 赞同：1
> 
> 时间：2013-01-07T13:52:03.500
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3

如您所见，分页紧挨着内容。
如何在新行开始？我的意思是内容的底部。

**HTML**

```
<% @communities.each do |community| %>  
    <%= render 'communities/community', :community => community %>
<% end %>

<div class='pagination-centered'>
    <%= paginate @communities, :window => 4, :outer_window => 5, :left => 2, :right => 2 %>
</div> 
```

![在此处输入图像描述](../Images/228cf2d94f1acad0d86b766766c8f4fc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:58:08.607

显然，您的社区容器使用`float:left`. 你应该使用`clear:both`分页容器

# spring - Spring Cache Abstraction VS interfaces VS key param（“为缓存操作返回空键”错误）

> ID：14197359
> 
> 赞同：10
> 
> 时间：2013-01-07T13:52:04.187
> 
> 标签：spring, caching, interface, key, illegalargumentexception

在实现时，我遇到了 Spring Cache Abstraction VS 接口的问题。假设我有以下界面：

```
package com.example.cache;

public interface IAddItMethod 
{   
    Integer addIt(String key);
} 
```

以及以下两个实现：

```
package com.example.cache;

import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Component;

@Component
public class MethodImplOne implements IAddItMethod 
{
    @Override
    @Cacheable(value="integersPlusOne", key="#keyOne")
    public Integer addIt(String keyOne) 
    {
        return new Integer(Integer.parseInt(keyOne) + 1);
    }
} 
```

.

```
package com.example.cache;

import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Component;

@Component
public class MethodImplTwo implements IAddItMethod 
{
    @Override
    @Cacheable(value="integersPlusTwo", key="#keyTwo")
    public Integer addIt(String keyTwo)
    {
        return new Integer(Integer.parseInt(keyTwo) + 2);
    }
} 
```

请注意，IAddItMethod 不是指定@Cacheable 的方法。我们可以有其他实现（例如 MethodImplThree）而没有 @Cacheable 注释。

我们有一个简单的 beans.xml：

```
context:component-scan base-package="com.example.cache" 
```

除此之外，还有两个 jUnit 测试用例：

```
package com.example.cache;

import static org.junit.Assert.assertEquals;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class) 
@ContextConfiguration(locations = {"classpath:beans.xml"})  
public class MethodImplOneTest 
{

    @Autowired
    @Qualifier("methodImplOne")
    private IAddItMethod classUnderTest;

    @Test
    public void testInit() 
    {
        int number = 1;
        assertEquals(new Integer(number + 1), classUnderTest.addIt("" + number));
    }

} 
```

.

```
package com.example.cache;

import static org.junit.Assert.assertEquals;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class) 
@ContextConfiguration(locations = {"classpath:beans.xml"})  
public class MethodImplTwoTest 
{

    @Autowired
    @Qualifier("methodImplTwo")
    private IAddItMethod classUnderTest;

    @Test
    public void testInit() 
    {
        int number = 1;
        assertEquals(new Integer(number + 2), classUnderTest.addIt("" + number));
    }

} 
```

当我单独运行测试时，它们会成功。但是，如果我同时运行它们（选择包，右键单击，运行方式），第二个（不一定是 MethodImplTwoTest，只是第二个运行）将失败，并出现以下异常：

```
java.lang.IllegalArgumentException：为缓存操作返回空键（也许您在没有调试信息的类上使用命名参数？） CacheableOperation[public java.lang.Integer com.example.cache.MethodImplOne.addIt(java.lang.String) ] 缓存=[整数加一] | 条件='' | 键='#keyOne'
    在 org.springframework.cache.interceptor.CacheAspectSupport.inspectCacheables(CacheAspectSupport.java:297)
    在 org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:198)
    在 org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:66)
    在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    在 org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    在 $Proxy16.addIt（未知来源）
    在 com.example.cache.ITMethodImplOneIntegrationTest.testInit(ITMethodImplOneIntegrationTest.java:26)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    在 org.junit.runners.model.FrameworkMethod.invokeExplosively（FrameworkMethod.java:42）
    在 org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    在 org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    在 org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    在 org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    在 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    在 org.junit.runners.ParentRunner.runChildren（ParentRunner.java:229）
    在 org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    在 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    在 org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    在 org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    在 org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

```

注意：我使用的是 Eclipse STS 3.0，并且启用了“将变量属性添加到生成的类文件”。

重要提示：如果我没有在 @Cacheable 注释中指定“键”，它会起作用。

有什么我忘记指定的吗？配置？注释？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T14:16:37.703

我的猜测是，对于 jdk 代理，参数名称是从接口方法中获取的，所以它是`key`而不是`keyTwo`。

**更新**：您可以尝试改用参数索引

> 如果由于某种原因名称不可用（例如：没有调试信息），参数名称也可以在 p<#arg> 下使用，其中 #arg 代表参数索引（从 0 开始）。

见[http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html#cache-spel-context](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html#cache-spel-context)

# hadoop - 我们可以在 Hadoop 中将图像转换为 Avro 格式吗？

> ID：14197361
> 
> 赞同：2
> 
> 时间：2013-01-07T13:52:08.270
> 
> 标签：hadoop, avro

是否可以在 Hadoop 中将图像转换为 Avro 格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:12:39.867

Avro 用于描述独立于平台的数据模式（“数据序列化系统”）。

图像本身可以以多种格式（PNG、JPEG、BMP、GIF 等）编码，所有这些都可以表示为字节序列。您还可以定义一些有关图像的元数据（无论如何可能以字节编码，但根据您的用例，提取它可能很有用。

原始模式可能如下（改编自[docs](http://avro.apache.org/docs/current/gettingstartedjava.html#Defining+a+schema)）：

```
{"namespace": "example.avro",
 "type": "record",
 "name": "Image",
 "fields": [
     {"name": "filename", "type": "string"},
     {"name": "type",  "type": "string"},
     {"name": "data", "type": "bytes"},
     {"name": "width", "type": "int"},
     {"name": "height", "type": "int"}
 ]
} 
```

# php - SQL 按问题排序 - 不能按指定的列排序

> ID：14197365
> 
> 赞同：0
> 
> 时间：2013-01-07T13:52:14.730
> 
> 标签：php, mysql, sql

我不是 SQL 专家，因此需要您的帮助。

我有这个由其他人编写的高级查询：

```
SELECT cms_product_bid.*,
    cms_products.*,
    cms_products_images.pd_image, 
    cms_products_images.pd_image_label,
    IF (cms_product_bid.pd_bid = 1,
        IF(cms_product_bid.pd_bid_start_date <= CURDATE(),
            IF(cms_product_bid.pd_bid_end_date >= CURDATE(),1,0)
        ,0)
    ,1)  AS bid_product_check
FROM cms_products
LEFT JOIN cms_products_images 
ON (cms_products.pd_id = cms_products_images.pd_id)
INNER JOIN cms_product_bid 
ON (cms_product_bid.product_id = cms_products.pd_id)
INNER JOIN cms_home_product_slider 
ON (cms_products.pd_id = cms_home_product_slider.pd_id)
WHERE cms_products.pd_status=1 
    AND cms_products.pd_visibility=1 
    AND cms_home_product_slider.cat_id='$featured_cat_id'
GROUP BY cms_products.pd_id 
HAVING(bid_product_check =1)
ORDER BY cms_products.pd_sort ASC 
```

我要做的只是排序，`cms_products.pd_sort`但它不是按该列排序，即使表中的列具有诸如 等的`1`值`2`。

谁能在这里指出这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:54:56.677

我的猜测是您的列是类型`VARCHAR`或*字符串*，您可以简单`CAST`地

```
SELECT...
FROM...
WHERE...
ORDER BY CAST(cms_products.pd_sort AS SIGNED) ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:55:39.110

这可能是一个错误...但尝试列出列而不是使用 .* 快捷方式...然后查看该列是否会被正确识别和排序。

顺便说一句 - 由于许多原因，使用 .* 并不是最佳实践。

# c++ - SWIG、Python 和 Visual Studio 2012 的内存泄漏

> ID：14197366
> 
> 赞同：2
> 
> 时间：2013-01-07T13:52:14.760
> 
> 标签：c++, python, memory-leaks, visual-studio-2012, swig

这是我第一次使用 Python，所以请耐心等待：当我引用一个包含 c++ 类的 SWIG 模块时，我遇到了 28 个字节的内存泄漏。所有这些都在 Visual Studio 2012 中构建和运行。我的模块的 .cpp 文件是空的，我的头文件如下：

```
class foo{
public:
  foo() {}
  virtual ~foo() {}
}; 
```

这是 SWIG 的 .i 文件：

```
%module SwigTest2
%{
  #define SWIG_FILE_WITH_INIT
  #include "SwigTest2.h"
%}
%include "SwigTest2.h" 
```

最后，这是我用来从 C++ 嵌入这个模块的代码：

```
 Py_Initialize();
  PyObject* pPath = PySys_GetObject((char*)"path");
  if(pPath)
  {
    CString csScriptFolder("C:\\Testing\\Debug");
    PyList_Append(pPath, PyUnicode_FromString(csScriptFolder));
    CString csPath("multiply");
    PyObject* pName = PyUnicode_FromString(csPath);
    if(pName != NULL)
    {
      PyObject* pModule = PyImport_Import(pName);
      Py_DECREF(pName);
      if (pModule != NULL)
      {
        Py_DECREF(pModule);
      }
    }
  }
  Py_Finalize(); 
```

当我运行它时，除了内存泄漏之外，一切都很好。如果我将真实代码放入模块中，它可以正常工作，但在退出时仍然会泄漏 28 个字节。如果我向模块添加另一个类，我会得到另一个 28 字节的泄漏。如果我运行该模块 3 次，我会得到 3 个泄漏，所以如果我在模块中有 2 个类，我最终会得到 6 个总泄漏，每个泄漏 28 个字节。

一种可能性（除了我对 Python 的一般无知之外）是我在构建我的 c++ 模块和 c++ 可执行文件的调试版本时链接到 Python 的发布版本。另一件事是，如果我删除类定义并使用普通的旧函数，内存泄漏就会消失，一切正常。

非常感谢任何建议或帮助。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:41:27.093

我可以通过将运行时库设置为“多线程 DLL”而不是“多线程调试 DLL”来解决这个问题。调试工作，但内存泄漏消失了。对不起，重复的帖子...

# cmake - SCons 或 CMake 而不是 qmake

> ID：14197372
> 
> 赞同：12
> 
> 时间：2013-01-07T13:52:50.470
> 
> 标签：cmake, scons, qmake

在以下问题上，我需要一些建议：

我有一个 QT 项目，目前已设置为与 qmake 很好地配合使用。但是，由于项目需求和未来方向的扩展，我需要更改它的构建系统，因为应用程序将需要对其构建方式进行一些更改。

现在每个源文件都被编译成一个相当大的可执行文件，它被（手动）打包并发送到下载区域。一切皆好。

但我的目标是模块化应用程序，将每个“功能”编译到共享库中，并且用户（开发人员）将能够选择他想要编译的组件。这些“功能”放置在源代码树的目录中（例如：query_builder、reverse_engineer、mysql_DB_support、version_managemen 目录等），当用户构建应用程序时，他只需告诉构建系统使用查询构建器编译应用程序, 和 mysql，但没有反向工程，在这种情况下，构建系统从指定目录添加源文件并从中创建一个库。

我还有其他要求，例如：

*   windows构建，linux构建
*   可选包构建（deb，rpm）
*   支持 QT 和可能的 QT5
*   多个可执行文件（GUI 客户端、CLI 客户端）

经过一些“市场调查”后，我最终将 CMake 和 SCons 作为我可能使用的两个可能的系统。我有一些 CMake 经验和一些 python 经验，但还没有 SCons。

但我不知道哪一个最适合我的情况，这是我需要你帮助的地方。你能详细说明我应该使用哪个吗？如果您认为我的要求可以通过 qmake 实现，请也告诉我，

干杯，F。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T14:25:40.827

这个问题没有正确答案，通常归结为个人喜好，有点像 vi 与 emacs（正确答案当然是 vi :)

您应该研究每种方法的优缺点，并评估它们如何满足您的要求和需求。

我偏爱 SCons，主要是因为我无法忍受 CMake 语法，但这是个人喜好。在我看来，以下是每种方法的一些优点和缺点：

***制作***

**优点：**

*   类似于 QMake，考虑到它是一个 makefile 生成器
*   CMake 被广泛使用，因此有很多参考资料和帮助可用
*   有一个 GUI（我自己不知道，基于下面的 Calvin1602 评论）

**缺点：**

*   CMake 有自己发明的语法，许多人（包括我自己）觉得这种语法不直观。
*   2步构建过程，首先创建Makefiles，然后实际执行编译
*   几乎不可能读取生成的 Makefile

***缺点***

**优点：**

*   语法是 Python，它被广泛使用并且相对容易学习。（而且 Python 很酷：）
*   构建过程是一步，只需执行 SCons，它就会编译。无需生成或维护中间构建文件。
*   过去 SCons 比 CMake 慢，但从那以后它要快得多，可能与 CMake 一样快或更快，因为它不必生成 makefile。
*   丰富的功能集，支持多种语言，而 CMake 专注于 C/C++
*   非常准确的隐式依赖系统：无需显式列出依赖的头文件、库等。如果需要，可以指定显式依赖。
*   可以使用 Eclipse 插件。Eclipse 也有可用于 Python 的插件。
*   [具有为 Qt 项目创建的工具，用于处理此处](http://www.scons.org/wiki/Qt4Tool)提到的 MOC 和其他相关代码生成。

**缺点：**

*   SCons 可能不像 CMake 那样广泛使用，但仍然有很多可用的支持。
*   根据项目的大小，SCons 可能会使用大量内存，因为它会在实际编译任何内容之前解析所有构建脚本并在内存中构建依赖关系树。然而，这确实允许更准确的依赖性检查。

# magento-1.7 - Magento 百分比从篮子总数

> ID：14197373
> 
> 赞同：1
> 
> 时间：2013-01-07T13:52:50.757
> 
> 标签：magento-1.7, magento

是否有可能制定一个购物车规则，让用户在不使用优惠券的情况下为整个购物篮提供 25% 的折扣？它必须是总价，而不是每件产品的 25% 折扣。

我们的网站正在运行 Magento 1.7.0.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:26:56.227

Yes, using **Promotions > Shopping Cart Price rules** you just set it to take 25% off the basket total, and set it to 'No Coupon'.

Shopping cart price rules are rules that effect the total of the cart, not the products individually. Catalog price rules are for individual product discounts.

# delphi - 我需要从 TTimer 事件中调用 Synchronize 吗？

> ID：14197376
> 
> 赞同：2
> 
> 时间：2013-01-07T13:53:00.753
> 
> 标签：delphi, synchronization, ttimer

当我从 a 访问全局变量或 VCL 时`TTimer`，我需要使用`Synchronize`吗？我使用 a 中的相同变量和对象`TThread`，我已经在其中使用了同步。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T14:04:09.940

TTimer 的 OnTimer 事件在主线程下执行。您不必在该事件中同步对 VCL 的访问

# java - 二进制搜索，计算重复项

> ID：14197378
> 
> 赞同：2
> 
> 时间：2013-01-07T13:53:14.013
> 
> 标签：java

我已经排序了数组

```
{1,2,3,5,5,5,7,8,8} 
```

我想计算仅在 longn 的数组中找到我发送的数字的次数。

例如：

```
public static int count(int[] array,5) 
```

会回复 3

```
public static int count(int[] array,8) 
```

会回复2

所以我的计划是：

1）进行二分查找以查找数字

2）二分查找上边框索引和下边框索引。

3) print (top index - bottom index) 会给我数组中目标数字的时间。

我的代码是 logn 吗？请帮忙！:)

```
 public class binarySearch
{
    public static void main(String[]args)
    {
        System.out.println("d");
        int[]data={1,1,2,3,1,1,1};
        System.out.println(count(data,1));
    }

    public static int count(int[] a, int x)
    {
        int low=0;
        int high = a.length-1;
        int count=0;

        while(low <=high)
        {
            int mid=((low+high)/2);         
            if(x>a[mid])
                low=mid+1;
            if(x<a[mid])
                high=mid-1;

            if(x==a[mid])            
            {
                int top=findTopIndex(a,x,mid);                
                int bottom=findBottomIndex(a,x,mid);
                return (top-bottom);

            }

        }    
        return 111111111;

    }

    public static int findTopIndex(int[] a, int x, int index)
    {
        int low=index;
        int high = a.length-1;    
        int mid;
        if(x==a[high])
        return high;

        while(low <= high)
        {            
           mid=((low+high)/2);         
           if(x<a[mid]&&x==a[mid-1])
           return mid-1;
           else if(x==a[mid])
                low=mid+1;
           else if(a[mid]>x && a[mid-1]!=x)
           high=mid-1;

        } 
        return 11111111;

    }
    public static int findBottomIndex(int[] a, int x, int index)
    {
        int low=0;
        int high = index-1;    
        int mid;
        if(x==a[low])
        return low-1;

        while(low <= high)
        {            
         mid=((low+high)/2);         
           if(x>a[mid]&&x==a[mid+1])
           return mid;
           else if(x==a[mid])
                high=mid-1;
           else if(a[mid]<x && a[mid+1]!=x)
           low=mid+1;

        } 
        return 111;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:01:09.893

您所写的内容非常接近您需要的解决方案。您首先进行二进制搜索以找到您正在搜索的数字的单个实例（假设它在 position 上找到`index`），然后您再进行两次二进制搜索 - 一次用于序列`0, index`，一次用于`index, size`查找两者中的位置序列是找到的数字。

所以我建议你简单地将索引传递给两者`findTopIndex`并`findBottomIndex`利用它。我可以编写整个解决方案，但你自己来解决会更好。

# vba - 如果其他列中的值匹配，则 VBA、循环列和复制单元格格式

> ID：14197382
> 
> 赞同：0
> 
> 时间：2013-01-07T13:53:28.677
> 
> 标签：vba, excel, excel-formula, xls

我有一张 2 张的 excel 表

![表 2](../Images/8e0cb07d13e026676ebd582ccc144c85.png)

我想要的是循环工作表1（A列）的所有行并搜索该值是否存在于工作表2列（e）['item_barcode']如果发现我想将相同的突出显示复制到工作表2！

![表 1](../Images/c75c4ec44b369955e4e60c38234b90f2.png)

我不擅长 vba，事实上我以前从未使用过它，但我必须为我的老板做这个，这个 excel 表包含超过 55k 的行！有没有办法用 vba 完成？否则我将不得不将 xls 转换为 mysql 和 php 处理它然后返回 xls .:D！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:17:37.203

这应该可以解决问题：

```
 Sub LoopAndHighlight()

  Dim cl As Range
  Dim RowNum As Integer

  On Error Resume Next

     For Each cl In Intersect(Sheets("Sheet1").Range("A:A"), Sheets("Sheet1").UsedRange)
        RowNum = 0
        RowNum = Application.WorksheetFunction.Match(cl.Value, Sheets("Sheet2").Range("E:E"), 0)

        If RowNum <> 0 Then
           cl.Interior.Color = Sheets("Sheet2").Range("E" & Application.WorksheetFunction.Match(cl.Value, Sheets("Sheet2").Range("E:E"), 0)).Interior.Color
        End If
     Next cl

  End Sub 
```

# html - 在两个浮动 div 之间具有浮动宽度：100%

> ID：14197383
> 
> 赞同：0
> 
> 时间：2013-01-07T13:53:28.990
> 
> 标签：html, css

我遇到了 3 个 div 彼此浮动的问题。左边是一个恒定的宽度。右边的那个具有动态宽度，因为它是购物车，每当有东西放入购物车时，它的宽度就会扩大。中间的那个是一个搜索栏，应该填补两个其他 div 之间的空白。

所有的 div 都是浮动的，我尝试给中间 div 宽度：自动和宽度：100%，但我无法弄清楚.. :(

这是问题的图片：http: [//ajytzler.dk/pics/width100problem.png](http://ajytzler.dk/pics/width100problem.png) 我希望搜索栏填写红色突出显示的区域。

# ruby-on-rails-3.2 - 如何从其“字符串名称”访问实例变量？

> ID：14197386
> 
> 赞同：10
> 
> 时间：2013-01-07T13:53:44.807
> 
> 标签：ruby-on-rails-3.2, metaprogramming, instance-variables

当我们只知道它的字符串名称时，有没有办法（元编程？）读/写实例变量？

例如，我在类方法中使用了一个 @my_var 实例变量。在此过程中，我将有一个字符串“my_var”告诉我更改@my_var 实例变量。

当然，我可以使用“if”语句，但我希望它更加动态，因为我的方法中可能有许多不同的实例变量。

我在想一些与**“my_var”.classify**和其他的东西......

有人有线索吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T14:58:51.807

使用`instance_variable_set`和`instance_variable_get`。请记住，字符串需要有前导`@`：

```
@foo = "bar"
# => "bar"
instance_variable_get("@foo")
# => "bar"
instance_variable_set("@foo", "baz")
# => "baz"
@foo
# => "baz" 
```

# unit-testing - 收到此错误：无法识别的选项 --skeleton-test using PHPUnit 3.7.10 using Netbeans 7.1.2

> ID：14197388
> 
> 赞同：3
> 
> 时间：2013-01-07T13:53:45.793
> 
> 标签：unit-testing, netbeans-7

我已经通过 pear 安装程序安装了 PHPUnit - 但是在使用工具 > 创建 PHPUnit 测试时我无法让它工作得到这个错误

![在此处输入图像描述](../Images/c5dd3f451c704e7c8d64516f2899b688.png)

输出错误是：Sebastian Bergmann 的 PHPUnit 3.7.10。无法识别的选项--skeleton-test

这是 Netbeans 中的单元测试选项卡：

![在此处输入图像描述](../Images/677d676939bdd93223f9b543b1771408.png)

在常规选项卡中尝试了不同的包含路径，但不确定如何包含类

任何想法有什么问题...？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:46:32.090

验证 phpunit-skelgen 文件是否存在于与 phpunit 二进制文件相同的目录中（安装中的 C:\wamp\bin\php\php5.3.5\）。

如果没有，请以与安装 PHPUnit 相同的方式安装 PHPUnit SkeletonGenerator，例如从 PEAR：

C:\wamp\bin\pear.exe 安装 phpunit/PHPUnit_SkeletonGenerator

# php - 在 Twig 中读取 PersistentCollections，就好像它们是一个数组一样

> ID：14197393
> 
> 赞同：2
> 
> 时间：2013-01-07T13:53:53.713
> 
> 标签：php, symfony, doctrine-orm, twig

我在两个类（协议和历史）之间有一个双向的一对多关系。在搜索特定协议时，我希望看到与该协议关联的所有历史条目。

在渲染我的模板时，我传递了以下内容：

```
return $this->render('FunarbeProtocoloAdminBundle:Protocolo:show.html.twig', array(
        'entity'      => $entity,
        'delete_form' => $deleteForm->createView(),
        'history' => $entity->getHistory(),
    )
); 
```

`entity->getHistory()`返回 PersistentCollection 而不是数组，这会导致以下内容呈现错误：

```
{% for hist in history %}
<tr>
    <td>{{ hist.dtOcorrencia|date('d/m/Y H:i') }}</td>
    <td>{{ hist.dtRetorno|date('d/m/Y H:i') }}</td>
</tr>
{% endfor %} 
```

如果不是`$entity->getHistory()`I pass `$em->getRepository('MyBundle:History')->findByProtocol($entity)`，它可以正常工作。但我认为建立双向关系的主要目的是避免打开存储库并明确打开新的结果集。

难道我做错了什么？我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:02:18.170

我所要做的就是在我的 TWIG 上调用以下命令：

```
{% for hist in entity.history %} 
```

其他答案都不适合我。我必须直接在我的树枝中调用该属性，而不是使用它的 getter。不知道为什么，但它奏效了。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:35:03.813

试试这个：

```
return $this->render('FunarbeProtocoloAdminBundle:Protocolo:show.html.twig'
    ,array(
          'entity'      => $entity,
         ,'delete_form' => $deleteForm->createView(),
         ,'history'     => $entity->getHistory()->toArray()
                                                ///////////
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:20:41.560

你的代码很好，我总是为自己省去麻烦，把我的收藏放在树枝上，而不是通过我的视图。你也可以试试这个。

**渲染代码更改**

```
return $this->render('FunarbeProtocoloAdminBundle:Protocolo:show.html.twig', array(
        'entity'      => $entity,
        'delete_form' => $deleteForm->createView(),
    )
); 
```

您想直接在树枝中访问历史记录。

**枝条**

```
{% for hist in entity.getHistory() %}
    <tr>
        <td>{{ hist.dtOcorrencia|date('d/m/Y H:i') }}</td>
        <td>{{ hist.dtRetorno|date('d/m/Y H:i') }}</td>
    </tr>
{% endfor %} 
```

如果更改后的结果相同，请尝试检查 hist 的数组，它可能是嵌套的！持久性集合倾向于这样做......

```
{% for history in entity.getHistory() %}
    {% for hist in history %}
        <tr>
            <td>{{ hist.dtOcorrencia|date('d/m/Y H:i') }}</td>
            <td>{{ hist.dtRetorno|date('d/m/Y H:i') }}</td>
        </tr>
    {% endfor %}
{% endfor %} 
```

# selenium - 如何使用 Selenium RC 在 Chrome 中附加文件？

> ID：14197395
> 
> 赞同：1
> 
> 时间：2013-01-07T13:53:54.390
> 
> 标签：selenium, selenium-rc

**HTML 代码：**

```
<tr>
<td>
Filename:
<br>
<input type="file" size="35" name="filename">
<input type="hidden" value="Hidden Field Value" name="hiddenField">
</td>
</tr> 
```

在 Chrome 中，此字段看起来像一个按钮，标签为选择文件。我正在尝试单击该按钮以附加文件，但我无法做到。也尝试使用 attachfile 命令。

没运气。谁能让我知道如何解决这个问题？

谢谢钱德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:32:17.130

Chrome 具有内置的安全限制，不允许您通过 javascripts 指定上传的文件。很遗憾，这个问题没有解决方法。

# meteor - 如何在流星中包含来自 CDN 的 JavaScript？

> ID：14197398
> 
> 赞同：22
> 
> 时间：2013-01-07T13:54:01.223
> 
> 标签：meteor

在包含我自己的客户端脚本之前，我想在 Meteor 中包含来自**CDN**的 JS，以便客户端脚本可以依赖它。

```
...
<script type="text/javascript" src="https://ajax.googleapis.com/..."></script>
...
<script type="text/javascript" src="/client/..."></script>
... 
```

我尝试通过 *.html 文件和`<head>`标签之间包含脚本。但似乎 *.html 文件中的标头内容将始终附加到 HTML 标头的末尾，无论我将它放在文件层次结构中的哪个位置（例如，将文件放在 lib 文件夹中或在客户端 JS 文件之前按字母顺序排序）不会有帮助）。

有什么想法可以在客户端脚本*之前*包含来自 CDN 的 JS而无需构建智能包？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T14:51:47.903

假设您不需要在 Meteor 包之前加载这些文件，请创建一个在其他任何文件之前加载的 JS 文件。Meteor 按字母顺序加载文件，因此它必须是第一个加载的文件。为此，命名它就`aaLoadCDN.js`足够了。`script src`通过向文档添加元素来动态加载 CDN 脚本`head`：

```
var script = document.createElement('script');
script.setAttribute('type', 'text/javascript');  // optional
script.setAttribute('src', 'url/to/the/cdn/script.js');
document.getElementsByTagName('head')[0].appendChild(script); 
```

以下是一些从 CDN 加载脚本的真实 Meteor 包：

*   [快照](https://github.com/mirageglobe/meteorsnapsvgcdn/blob/master/mirageglobe:snapsvgcdn.js)
*   [字体真棒](https://github.com/nate-strauser/meteor-font-awesome/blob/master/load.js)（CSS）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-27T03:16:12.040

您可以在呈现模板后附加脚本。所以你的脚本只会在每行加载后加载。例如，如果您直接将 jquery 插件添加到模板 html 文件中，您将收到“jquery not found”错误。但是这种方法可以防止：

```
Template.Main.onRendered(function () {

      $('head').append('<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-formhelpers/2.3.0/js/bootstrap-formhelpers.js"></script>');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T21:20:03.513

还有一个名为[meteor-external-fileloader](https://github.com/davidd8/meteor-external-file-loader)的废弃包，它给出了一个使用 Stripe.js 的示例。它自 2013 年 9 月以来就没有维护过，所以要小心。

# xml - Notepad++ 快捷方式.xml 文件在编辑后被清除

> ID：14197401
> 
> 赞同：3
> 
> 时间：2013-01-07T13:54:20.187
> 
> 标签：xml, windows-7, configuration, notepad++

我刚刚重新安装了 Notepad++。当 Notepad++ 关闭时，我从 C://Users/User/AppData/Roaming/Notepad++ 文件夹 (Windows7) 打开了 shortcuts.xml 并更改了以下行：

```
<Command name="Launch in Firefox" Ctrl="yes" Alt="yes" Shift="yes" Key="88">firefox &quot;http://localhost/redirect.php?file=$(FULL_CURRENT_PATH)&quot;</Command> 
```

在回答另一个 StackOverflow 问题时建议了此更改：[Configuring Notepad++ to run php on localhost?](https://stackoverflow.com/questions/7536238/configuring-notepad-to-run-php-on-localhost/14100246#14100246)

当我在更改后打开 Notepad++ 时，“运行”下拉菜单中没有任何项目，shortcuts.xml 被剥离为裸露的骨骼，如下所示：

```
<NotepadPlus>
    <InternalCommands />
    <Macros />
    <UserDefinedCommands />
    <PluginCommands />
    <ScintillaKeys />
</NotepadPlus> 
```

我进行全新安装的原因是我已经遇到了这个问题。尽管复制和粘贴原始文件似乎很简单，但每次我重新启动 Notepad++ 时，shortcuts.xml 文件都会被清除。我发现恢复shortcuts.xml 的唯一方法是全新安装，看起来没有办法在不清除它的情况下对其进行编辑。

我还尝试编辑 C://Program Files (x86)/Notepad++ 文件夹中的 shortcuts.xml。尽管那里的 XML 文件没有被清除，但在那里所做的任何更改似乎都被 Notepad++ 完全忽略了。根据我上面发布的链接中的答案，这也是要编辑的错误文件。

我尝试谷歌搜索问题，但我没有找到任何东西。

更新：

除了将 'Firefox' 更改为 'Mozilla' 之外没有做任何事情，它并没有清除该文件，但是一旦我对该行进行了其他更改，它就会再次清除它。一旦它被清除，我无法在不重新安装的情况下恢复它。

这似乎表明这取决于所做的编辑。但是，我看到其他人已经从 Notepad++ 成功地在 localhost 中启动了 PHP 文件，所以看起来这个版本在某些方面有点错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-03T07:23:25.397

记事本++在运行时使用shortcut.xml。当您通过设置->快捷方式映射器更改快捷方式时，notepad++ 将触摸快捷方式.xml。当notepad++ 关闭时，它会将键盘映射恢复到shortcut.xml。这看起来像是shortcut.xml 被清除了。

因此，您**不能通过 notepad** ++ 本身进行编辑。您可以使用任一方式手动修改shortcut.xml：

1.  先关闭notepad++，再用其他编辑器编辑shortcut.xml。
2.  在notepad++ 中编辑shortcut.xml 但保存为另一个名称，然后关闭notepad++。删除快捷方式.xml，然后将新保存的文件重命名为快捷方式.xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:15:40.260

我成功地修改了配置文件，但有时即使使用不同的编辑器也无法直接尝试这样做。根据文档（[http://npp-wiki.iwi.me/index.php/Configuration_File_Editing](http://npp-wiki.iwi.me/index.php/Configuration_File_Editing)），它并不意味着这样做并且可能很棘手。出于这个原因，我不能称它为错误，因为它根本不是故意的。

但是，我通过 Notepad++ 本身完成了同样的事情。在“运行”下拉菜单下，第一项是“运行...”，我点击了它，然后在我粘贴的文本字段中：

```
"firefox &quot;http://localhost/redirect.php?file=$(FULL_CURRENT_PATH)&quot;" 
```

然后我点击“保存”。出现一个新对话框，用于输入快捷方式和组合键的名称。我输入了“在 Mozilla 中启动”作为名称。单击“确定”后，它有点像 Twilight-Zonish。它要求另一个名字，输入它并单击“确定”后它会做同样的事情......等等......等等......永远永远......你可以参与这个无限循环如您所愿，但我发现您也可以简单地关闭对话框，一切正常。

最后，即使再次关闭和打开，我的配置文件仍然完好无损。

这就是好消息。坏消息是，该 hack 根本无法在 Firefox 中启动 PHP 文件。在浏览器中出现以下内容：

```
file:///C:/Program%20Files%20(x86)/Notepad++/&quot;http://localhost/redirect.php?file=C:/htdocs/acrilart/hello.php&quot; 
```

有一个空白屏幕。

然而，这是一个完全不同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T19:41:11.480

1.  关闭记事本++
2.  将 C:\Users\\AppData\Roaming\Notepad++\ 目录下的 shortcut.xml 文件重命名为 old_shortcut.xml。
3.  重启记事本++
4.  关闭 Notepad++（你应该有你开始使用的 shortcut.xml 文件。）
5.  再次尝试再次编辑它。
6.  重启记事本++

如果你幸运的话，这应该可以。我认为 Shortcut.xml 文件有大小限制或每个宏都有大小限制。如果它被执行，第 6 步将再次擦除文件。我遇到了同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:16:41.367

尝试以管理员身份运行 Notepad++（考虑到您使用的是 Windows 7）。

当我切换到 Win7 时，我很困惑为什么 N++ 不会保存对某些配置文件的更改：因为这些文件位于系统文件夹、程序文件等中。“以管理员身份运行”解决了这个问题。

另外：您是在 C:\Users\User... 或 C:\Users[UserName]... 中编辑 shortcuts.xml 文件吗？我的安装仅在后者中有一个 Notepad++ 文件夹。

# html - Html 点击事件未在页面上显示结果（通过使用 javascript）

> ID：14197403
> 
> 赞同：0
> 
> 时间：2013-01-07T13:54:25.127
> 
> 标签：html, javascript-events

单击按钮后，javascript 在新选项卡上显示结果。但我希望结果显示在按钮下方。

```
<html>
 <body>
    <input type="button" id="button1" value="Click Here" onclick="print();"/>

    <script type="text/javascript"> //script to do some task
    function print()
    {          

     document.write('My Text Goes here ');

    }
   </script>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:51:27.730

您只能在页面加载完成之前使用 document.write。

如果您想在页面加载后添加该文本，您必须使用一些本机 javascript 函数（appendChild、createElement 等）来更改 DOM，或者您可以使用 jQuery（或其他 javascript 框架）来实现这一点。第二个更容易，因为您不需要担心浏览器的兼容性。

jQuery 例如：

> $("#button1").after("我的文字在这里");

# jquery - 一个 Jquery 在第二次点击时不起作用

> ID：14197404
> 
> 赞同：0
> 
> 时间：2013-01-07T13:54:25.820
> 
> 标签：jquery

这是代码

```
jQuery(document).ready(function(){
    jQuery('.post_box').one('click', function(e) { 
        jQuery(this).find(".read_more").trigger("click");
    });

}); 
```

当我单击 div（post_box）时，它会触发一个链接（弹出灰色框），它位于（post_box）的子 div 中，它具有类（read_more），现在它工作得很好，但是当我关闭链接时出现问题（灰色框） ，然后在 div (post_box) 上再次单击它不起作用，我必须刷新页面才能单击它。

如果我把 on() 函数改为，在第一次点击时它会触发链接并被阻止，我认为它触发的链接不止一个，因为子 div 这是 html 代码

```
`
<div class="post_box" >
    <div class="post_box_top">
        <div class="post_box_center">
            <div class="post_box_content">

                <div class="post_date">

                </div>
                <div class="post_content">

              <?php   echo   $content_post = get_post(get_the_ID());?>

                </div>
                <div class="post_footer">
                    <a href="<?php the_permalink();?>" title="<?php the_title(); ?>" class="read_more"  rel="gb_pageset[search_sites]"  data-greybox-type="iframe">Read more</a>
               // this the link i should trigger when someone click on the <div class="post_box">   
               </div>
            </div>
        </div>
    </div>
</div>` 
```

## ec2-107-22-235-75.compute-1.amazonaws.com 请看这里，这个带有函数 one() 的站点，以防我在单击 div 时更改为 on()，它会阻止 haiders.imcserver。 ro/telugu 你可以在这里用 on() 看看第二种情况

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:55:27.440

这是该`one()`方法的正确行为 - 它只绑定事件一次。

`on()`如果您希望事件在页面的生命周期内绑定，则需要使用。

```
jQuery('.post_box').on('click', function(e) { 
    jQuery(this).find(".read_more").trigger("click");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:55:45.337

您正在使用一个，请改用 .on() ：

```
jQuery(document).ready(function(){
    jQuery('.post_box').on('click', function(e) { 
        jQuery(this).find(".read_more").trigger("click");
        return false;
    });

}); 
```

# wcf - 使用 wcf 方法将文件从 java 客户端发送到服务器？

> ID：14197405
> 
> 赞同：1
> 
> 时间：2013-01-07T13:54:26.553
> 
> 标签：wcf

我想构建一个 wcf Web 服务，以便客户端和服务器能够在彼此之间传输文件。你知道我怎么能做到这一点吗？我想我应该把它变成一个字节数组，但我不知道该怎么做。该文件也很大，所以我必须打开流式响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:16:07.490

听起来你在正确的轨道上。对 interwebz 的快速搜索产生了这个链接： http: [//www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

您的问题表明您希望将文件从 java 客户端发送到 WCFd 端点，但问题的内容表明这应该是双向功能。如果是这种情况，那么您还需要在客户端上实现服务端点。就这一点而言，我帮不上什么忙，但是有像这样的问题这样的资源：[In-process SOAP service server for Java](https://stackoverflow.com/questions/1792737/in-process-soap-service-server-for-java)

就实际实现而言，我认为使用这两个链接您应该能够为您的服务器和客户端生成一些代码。

至于读取文件的所有字节，您可以在 C# 中使用：[`File.ReadAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx) 它应该像以下代码一样工作：

```
//Read The contents of the file indicated
string fileName = "/path/to/some/file";
//store the binary in a byte array
byte[] buffer = File.ReadAllBytes(fileName);
//do something with those bytes! 
```

以后一定要使用搜索功能： ![半现象级、近乎宇宙级的 Stack Overflow 搜索功能](../Images/dac9b74b5bf174cc98c39306f6bc5fdf.png)

# mysql - mysql离开连接执行时间很长

> ID：14197407
> 
> 赞同：0
> 
> 时间：2013-01-07T13:54:32.870
> 
> 标签：mysql, left-join

我找到了一些例子，但仍然无法快速完成。

**歌曲表：**

```
song_id
song_name 
```

**投票表：**

```
vote_id
song_id
vote_ip 
```

**收藏夹表：**

```
favorite_id
song_id
favorite_owner 
```

**我的查询：**

```
SELECT * FROM songs as s 
LEFT JOIN votes as v ON v.song_id = s.song_id 
AND v.vote_ip='78.63.35.138' 
LEFT JOIN favorites as f ON f.song_id = s.song_id 
AND (f.favorite_owner='78.63.35.138' 
OR f.favorite_owner='1') WHERE s.song_id!='' 
LIMIT 100 OFFSET 1
; 
```

我得到了结果，但查询执行时间是 12 秒。

# jquery - 引导下拉菜单不起作用？

> ID：14197409
> 
> 赞同：2
> 
> 时间：2013-01-07T13:54:39.987
> 
> 标签：jquery, drop-down-menu, twitter-bootstrap

以下下拉列表不起作用：

[http://jsfiddle.net/xws2j/](http://jsfiddle.net/xws2j/)

```
<li id="fat-menu" class="dropdown open">
                  <a href="#" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown">Dropdown 3 <b class="caret"></b></a>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
                    <li><a tabindex="-1" href="#">Action</a></li>
                    <li><a tabindex="-1" href="#">Another action</a></li>
                    <li><a tabindex="-1" href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li><a tabindex="-1" href="#">Separated link</a></li>
                  </ul>
                </li> 
```

它激活了，但它看起来像是隐藏在什么东西后面。但我不确定是什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:00:54.490

我已经修改了你的 CSS。

[http://jsfiddle.net/xws2j/4/](http://jsfiddle.net/xws2j/4/)

这是导致此问题的语法。见下文。

```
 .collapse {
  position: relative;
  height: 0;
  overflow: hidden;
  overflow: visible \9;
  -webkit-transition: height 0.35s ease;
     -moz-transition: height 0.35s ease;
       -o-transition: height 0.35s ease;
          transition: height 0.35s ease;
} 
```

注意：

```
 overflow: hidden;
 overflow: visible \9; 
```

更正为：

```
 .collapse {
  position: relative;
  height: 0;
  overflow: visible;
  -webkit-transition: height 0.35s ease;
     -moz-transition: height 0.35s ease;
       -o-transition: height 0.35s ease;
          transition: height 0.35s ease;
} 
```

# magento - Magento：让用户在待付款状态下完成订单付款

> ID：14197410
> 
> 赞同：2
> 
> 时间：2013-01-07T13:54:44.477
> 
> 标签：magento, payment

我注意到，如果用户在支付宝表单之前完成结帐流程，然后出于某种原因退出页面，则此订单仍处于“待付款”状态，并且用户在其仪表板中不再可见。

我在这里找到了使这些订单在用户 Dashbord 中可见的方法：http://web.archive.org/web/20121026153121/http: [//blog.magestore.com/2012/09/11/how-to-前端显示待付款订单/](http://web.archive.org/web/20121026153121/http://blog.magestore.com/2012/09/11/how-to-show-pending-payment-order-on-front-end/)

现在我想为这些订单添加一个按钮，让用户完成付款过程。

你对如何做到这一点有什么建议吗？

谢谢！

# hbase - HBase 列族 - 在模式定义时声明 - 为什么？

> ID：14197414
> 
> 赞同：0
> 
> 时间：2013-01-07T13:54:58.157
> 
> 标签：hbase

[HBase 文档](http://hbase.apache.org/book/columnfamily.html)提到在模式定义时声明列族。我不明白为什么？我知道，列族继承了多个列（可以在运行时添加）并且它们被映射到存储文件。但是由于什么原因cf不能在运行时添加？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T05:47:36.543

列族是表架构的一部分。您可以通过在线模式更改在运行时添加它们。但是，如果这是您的想法，您不会像在 HBase 表中动态创建新“列”那样动态添加它们。

列族是架构的一部分并且需要更改架构的原因是它们深刻地影响了数据在磁盘和内存中的存储方式。每个列族都有自己的 HFile 集，以及 RegionServer 内存中的自己的数据结构集。动态创建或开始使用新的列族会非常昂贵。

仅当您需要对表的不同部分进行不同的配置时（例如，您希望某些列具有 TTL 而其他列不过期），或者当您想要控制访问的局部性（一起访问的东西应该更好）时，才需要列族如果您想要良好的性能，请在同一个列族中，因为操作成本随着列族的数量线性增长）。因此，同样，由于这些特殊原因，在运行时动态添加新的列族是没有意义的，就像在族中添加常规“列”一样。

# binary - 当我在十六进制查看器中打开 docx 时，有人可以解释我所看到的吗

> ID：14197415
> 
> 赞同：1
> 
> 时间：2013-01-07T13:55:07.133
> 
> 标签：binary, hex, docx

我想了解当我在十六进制查看器中打开 DOCX 文件时看到的内容。

例如：

![在此处输入图像描述](../Images/4b714edd994108c8137a90fbc9066a0b.png)

十六进制是基于 16 的 32 位（DWORD）文件？所以我假设从右到左你会这样做：

0*16^0 + 0*16^1 + 6*16^2 + 14*16^3 ......一直到504B。

但是当我最终得到这个巨大的数字时！这对我来说毫无意义。

所以我真的想我不明白我在看什么。为什么右边部分0->F的十六进制字符在每个下面显示有趣的字符-PK........!.ae

任何信息都会很有帮助。我从做位图开始，现在我想我可以玩一下 DOCX，看看我是否可以为文件编写一个搜索工具，但如果我不理解这个简单的概念，我就不可能破解它头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:57:44.470

.docx 文件是 .ZIP 文件。第一步对文件运行解压缩。

# php - YOUTUBE API 搜索功能无法正常工作

> ID：14197418
> 
> 赞同：0
> 
> 时间：2013-01-07T13:55:23.617
> 
> 标签：php, youtube-api

我的网页上有一个搜索功能，使用 youtube api 搜索音乐视频。稍后您可以在同一页面上观看它。但是，当我使用 api 并搜索其中包含空格的内容时，搜索功能将完全起作用。当我对字符串进行一些更改并用“/”替换所有空格时，例如 eminem lost yourself 变成： eminem/lose/yourself，当你搜索这个时，你不会得到正确的结果。这是我正在使用的代码的和平：这是我的代码：

```
<form method="post" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
<p>Search:
<input type="text" name="q" />
<input type="submit" name="submit" value="Search" style="margin-top:-30px"/>
</p>
</form> 
```

然后在我的php方面我有：

```
if (!isset($_POST['q']) || empty($_POST['q'])) {
        die ('ERROR: Please enter one or more search keywords');
} 
else {  
        $q = $_POST['q'];
    $q = str_replace(' ','/',$q);
        //echo $q; 
```

} $feedURL = "http://gdata.youtube.com/feeds/api/videos/-/{$q}?orderby=viewCount&max-results={$i}"; $sxml = simplexml_load_file($feedURL); // 从 opensearch 获取汇总计数： namespace $counts = $sxml-> children('http://a9.com/-/spec/opensearchrss/1.0/'); $total = $counts->totalResults; $startOffset = $counts->startIndex; $endOffset = ($startOffset-1) + $counts->itemsPerPage;

我尝试了不同的方法来使搜索功能正常工作。我使用了这个 $q = ereg_replace('[[:space:]]+', '/', trim($q))，它不起作用，然后我开始用“+”替换字符串，它不起作用再次。我想看看我怎样才能有一个可以很好地处理空格的搜索功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:07:19.783

尝试像这样格式化您的查询

```
https://gdata.youtube.com/feeds/api/videos?
q=football+-soccer
&orderby=published
&start-index=11
&max-results=10
&v=2 
```

API 的版本很重要 v=2 是最新的稳定版本

# jmeter - jMeter负载测试如何设置大量请求数据

> ID：14197432
> 
> 赞同：3
> 
> 时间：2013-01-07T13:56:27.603
> 
> 标签：jmeter, performance-testing

我想模拟几百个 http 请求，每个请求都具有我在数据库表中的不同令牌和 userId。

设置 jMeter 负载测试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:06:55.130

您可以使用[JDBC Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JDBC_Request)从 DB 中提取数据以创建 CSV 和[JSR223 Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler)，使用 groovy（在 jmeter/lib 文件夹中添加 groovy-all.jar）将提取的值写入 CSV 文件。

然后在实际计划中，使用生成的文件使用[CSV DataSet Config 。](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)

根据您希望如何使用数据集，您将使用共享模式属性。

如果您想在同一个计划中执行这两个步骤，您可以使用包含 JDBC 采样器部分的[设置线程组](http://jmeter.apache.org/usermanual/component_reference.html#setUp_Thread_Group)来编写 CSV 文件，这将使用 1 个线程，然后使用常规线程组中的另一个部分将使用数字您需要的用户数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:11:54.180

一种方法是将所有参数放入 csv 文件并在 jmeter 中使用 CSV Data Set Config。右键单击您创建的线程-添加-配置元素-CSV数据集配置。请记住，您需要设置线程数（用户数）以匹配 CSV 文件中的用户数。

# c++ - C++11：模板参数重新定义默认参数

> ID：14197436
> 
> 赞同：10
> 
> 时间：2013-01-07T13:56:43.227
> 
> 标签：c++, templates, c++11, default-value

使用 gcc 编译以下源代码时，没有错误/警告：

```
template< typename T = int > T func( );
template< typename T = int > T func( ); 
```

当我使用 clang++ 编译相同的源代码时，出现以下错误：

```
redeftempparam.cc:2:24: error: template parameter redefines default argument
template< typename T = int > T func( );
                       ^
redeftempparam.cc:1:24: note: previous default template argument defined here
template< typename T = int > T func( );
                       ^
1 error generated. 
```

编译命令

```
[clang++|g++] -Wall -Werror -std=c++11 redeftempparam.cc 
```

（版本信息：gcc 4.7.2，clang 3.3版（主干171722））

我的问题：

允许这种类型的重新定义吗？如果不是：您能否指出 C++ 标准中的适当点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T14:04:15.280

§14.1.12：

> 同一范围内的两个不同声明不应为模板参数提供默认参数。
> 
> [例子：
> 
> ```
> template<class T = int> class X;
> template<class T = int> class X { /∗... ∗/ }; // error 
> ```
> 
> —结束示例]

# jquery - FlexSlider 2 字幕在 chrome 上闪烁

> ID：14197437
> 
> 赞同：3
> 
> 时间：2013-01-07T13:56:45.447
> 
> 标签：jquery, flexslider

我在 chrome 上的字幕中有一些闪烁：http: [//tyni.cc/flexsliderissue](http://tyni.cc/flexsliderissue) 在 safari 中一切正常。

有谁知道出了什么问题？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:48:43.573

我经常使用 Flexslider，也发现了同样的问题。将“useCSS”属性设置为“false”为我修复了它。虽然没有深入了解为什么会发生这种情况。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:53:52.067

将这些 CSS 属性添加到您的列表项以修复它

```
-webkit-backface-visibility: hidden;
-moz-backface-visibility: hidden;
-ms-backface-visibility: hidden;
backface-visibility: hidden; 
```

# html - 创建网站时使用像素比调整大小

> ID：14197439
> 
> 赞同：4
> 
> 时间：2013-01-07T13:56:54.287
> 
> 标签：html, css, size, font-size, pixel-ratio

现在在我工作的公司里有一个争论，我们是否应该根据设备（计算机、智能手机等）的像素比来指定我们的模板（div、字体等）的尺寸，或者只是简单的像素。

您如何看待基于像素比而不是老式简单像素来指定 div 的宽度/高度？根据像素比率调整大小的最佳做法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:33:09.203

如果您正在创建一个适应移动设备的网站，百分比是理想的。

百分比非常适合基于适应屏幕尺寸的设计，因为页面会根据宽度的指定方式进行划分。但是，使用百分比来准确定位元素要困难得多，这就是像素更有用的地方。

像素有利于元素的精确定位，但它们不会像百分比一样缩放，因此当在较小的窗口大小中查看时，这将导致页面“截断”。

以下是比较两者的一些链接：

[http://kyleschaeffer.com/user-experience/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/user-experience/css-font-size-em-vs-px-vs-pt-vs/)

[http://webdesign.about.com/cs/typemeasurements/a/aa042803a.htm](http://webdesign.about.com/cs/typemeasurements/a/aa042803a.htm)

# jquery-mobile - jQuery移动刷新索引页面上的后退按钮

> ID：14197440
> 
> 赞同：1
> 
> 时间：2013-01-07T13:57:04.317
> 
> 标签：jquery-mobile, refresh

我有一个动态加载 json 对象的索引页面。如果我转到第二页，然后尝试使用后退按钮返回索引，我想重新加载索引页面，因此它会重新加载可以更改的 json 对象。这是我的`index.html`页面代码：

```
<html> 
<head> 
    <title>Test</title> 
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" /> 
    <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
    <script src="js/jquery-1.8.2.min.js"></script>      
    <script src="jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
</head>

<body>
<div data-role="page" id="pagina">
    <div data-role="header" data-position="fixed" data-theme="d">
        <h1 style="font-size:14px">test</h1>
    </div><!-- /header -->

    <div data-role="content" id="content">  
        <ul data-role="listview" id="ul_id" data-theme="b" data-inset="true">
        </ul>
    </div><!-- /content -->
</div>
</body>
</html>
<script>
    $.getJSON('http://www.test.com/test.php', function(data) {
    var items = [];
    $.each(data, function(key, val) {
    $('#ul_id').append($('<li><a href="' + val +'.cfm" id="'+ val +'"><h3>' + key + '</h3></a></li>'));
    });
    $('#ul_id').listview('refresh');
    });
</script> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:09:23.113

您可以像这样使用`pagebeforeshow`或`pageshow` [事件](http://jquerymobile.com/test/docs/api/events.html)：

```
$(document).on("pagebeforeshow", "#pagina", function() {
    //put your code here to manipulate the content
}); 
```

# javascript - 显示条形图的原始数据和更新数据

> ID：14197441
> 
> 赞同：0
> 
> 时间：2013-01-07T13:57:04.923
> 
> 标签：javascript, d3.js, bar-chart

我正在尝试修改在其中一个站点上找到的以下代码，以在图表中显示原始数据和更新数据。我希望更新的数据具有不同的颜色，并且仍然显示原始数据并查看更改。谁能指出我的错误。

```
<title>d3 example</title> 
<style>

.original{
 fill: rgb(7, 130, 180);
}

.updated{
 fill: rgb(7,200,200);
}

</style> 
```

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://d3js.org/d3.v2.min.js"></script>

<script type="text/javascript">
  // Suppose there is currently one div with id "d3TutoGraphContainer" in the DOM
  // We append a 600x300 empty SVG container in the div
  var chart = d3.select("#d3TutoGraphContainer").append("svg").attr("width", "600").attr("height", "300");

  // Create the bar chart which consists of ten SVG rectangles, one for each piece of data
  var rects = chart.selectAll('rect').data([1 ,4, 5, 6, 24, 8, 12, 1, 1, 20])
                   .enter().append('rect')
                   .attr("stroke", "none")
                   //.attr("fill", "rgb(7, 130, 180)")
                   .attr('class','original')
                   .attr("x", 0)
                   .attr("y", function(d, i) { return 25 * i; } )
                   .attr("width", function(d) { return 20 * d; } )
                   .attr("height", "20");

  // Transition on click managed by jQuery
  rects.on('click', function() {
    // Generate randomly a data set with 10 elements
    var newData = [1,2,3,4];

    //for (var i=0; i<10; i+=1) { newData.push(Math.floor(24 * Math.random())); }

    var newRects = d3.selectAll('rects.original');

    newRects.data(newData)
         .transition().duration(2000).delay(200)
         .attr("width", function(d) { return d * 20; } )
         //.attr("fill", newColor);
         .attr('class','updated');
});
</script> 
```

我想知道我是否可以使用**d3.selectAll('rects.original')来控制原始数据**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T10:19:16.367

如果您选择“rects.original”并将数据绑定到它，您将创建一个包含更新、退出和输入选择的连接。我不确定我是否完全理解您要实现的目标，但如果您希望独立于旧矩形和数据绘制新数据，则必须为其创建一个新选择：

```
 var newRects = chart.selectAll("rect.new")
                                  .data(newData)
                                  .enter()
                               (...) 
```

并画出来。请注意，SVG 中的重叠意味着基础元素将不再显示。

我不确定您所说的“控制原始数据”是什么意思，它仍然绑定到您绑定到的选择。如果要修改它，则必须修改数据，重新绑定它，然后在更新选择上应用过渡。

# service - OASIS 服务组件架构规范的当前状态是什么？

> ID：14197454
> 
> 赞同：1
> 
> 时间：2013-01-07T13:57:50.557
> 
> 标签：service, architecture, components, esb, sca

OASIS 服务组件架构 (SCA) 标准似乎被 Oracle、IBM 和 TIBCO 等几家成熟的 ESB 供应商使用，但是 WS02 和 Fuse ESB 等较新的 ESB 不使用它。该规范和对其的任何引用似乎已有 4-5 年的历史，并且 OASIS 站点上的一些规范链接已损坏，因此我担心该标准可能正在消亡。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:35:16.177

规范已经完成，等待两个实现声明符合性，然后再投票确定。这需要时间，因为声称符合性需要大量工作。更新的规范（大约一年前发布）应该可以公开获得。请注意，由于技术委员会的工作早已完成，因此在此等待期间情况不太可能发生变化。

Fabric3 (www.fabric3.org) 符合大会规范。新的 JBoss 集成平台 Switchyard 正在迁移到 SCA，但在查看文档后，它只实现了对该标准的部分支持。Apache Tuscany (http://tuscany.apache.org/) 和 Tentino (http://trentino.sourceforge.net/) 也支持 SCA，因此我知道有 4 个开源 SCA 实现。我相信托斯卡纳也声称符合组装和可能的其他规范，但我不能代表他们。

# c# - 实现扩展方法

> ID：14197455
> 
> 赞同：1
> 
> 时间：2013-01-07T13:57:54.680
> 
> 标签：c#, asp.net-mvc-3, extension-methods

我有这个代码：

```
 namespace Zinc.Web.Extensions.DataModel.Training
 {
   public static class TrainingModuleProgressStateDataModelExtentions
   { 
      public static string GetHintText(String aString)
      {

         //must still make up astring here
         return aString;
       }
   }
 }

 namespace Zinc.DataModels.Training
 {
    public class TrainingModuleProgressStateDataModel
    {
      public IEnumerable<UserTrainingPointsDataModel> UserTrainingPoints { get; set; }
    }
  }

  public class UserTrainingPointsDataModel
  {
    public virtual int InteractionType { get; set; }
    public virtual int Points { get; set; }
    public virtual string Name { get; set; }
    public virtual string IncentiveTrainingModuleOptionName { get; set; }
  } 
```

在我的存储库中，我添加到 UserTrainingPoints：

```
 string RawPoints = row["RawPoints"].ToString();
 string[] rawPoints = RawPoints.Split(new char[] { '|' });
 List<UserTrainingPointsDataModel> points = new List<UserTrainingPointsDataModel>();

 foreach (var RawPoint in rawPoints)
 {
   string[] entry = RawPoint.Split(new char[] { ',' });
   var point = new UserTrainingPointsDataModel();
   point.Name = entry[0];
   point.Points = Convert.ToInt32(entry[1]);
   point.InteractionType = Convert.ToInt32(entry[2]);
   point.IncentiveTrainingModuleOptionName = entry[3];
   points.Add(point);  

 }
 trainingModuleProgressState.UserTrainingPoints = points;
 data.Add(trainingModuleProgressState); 
```

在我看来，我需要调用扩展方法，该方法将采用 UserTrainingPoints 中的值来组成一个字符串，然后我将在工具提示中显示该字符串。

我的问题是如何实现扩展方法以便我可以在我的视图中调用它？

我的视图代码：

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Zinc.Models.Training.TrainingModuleProgressStateDataModelResults>" %>
 <%@ Import namespace="Zinc.Web.Extensions.DataModel.Training" %> //added this

  <% if (module.HasAssessment)
  { %>
     <div class="<%: moduleStateClass %>">&nbsp;</div>
     <div class="<%: moduleScoreClass %>"><%: module.ModuleScore %>%</div>
     <% Zinc.Web.Extensions.DataModel.Training.TrainingModuleProgressStateDataModelExtentions.GetHintText(module.UserTrainingPoints); %>  //still not correct here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:06:58.710

因为`UserTrainingPoints`是`IEnumerable<UserTrainingPointsDataModel>`我认为你的扩展方法签名应该是

```
public static string GetHintText(this IEnumerable<UserTrainingPointsDataModel> points)
{
    string aString;
    //must still make up astring here
    return aString;
} 
```

然后你可以这样称呼它

```
module.UserTrainingPoints.GetHintText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:04:46.840

访问扩展方法的方式与您通常的方式相同。但是，您应该注意使用 @using 关键字对添加了扩展的命名空间进行引用。

# type-conversion - 将十进制转换为字符报告服务 2005

> ID：14197456
> 
> 赞同：0
> 
> 时间：2013-01-07T13:57:55.580
> 
> 标签：type-conversion, reportingservices-2005

我正在 SSRS 2005 上开发一个报表服务器。在这个报表中有一些条款合同。只有其中一个子句不是恒定的，所以有时它会出现，有时不会。如果我的一个数据集上的列值不为空，它将出现，

每个子句前面必须有一个字符和一个括号。例如，第一个子句必须以**a)**开头，第二个子句前面必须是**b)**，第三个子句前面必须是**c)** ...

问题是，可以显示或不显示的子句，如果显示，必须是子句**a**并且其他常量子句必须跟在它后面。但是如果变量子句没有出现，那么第一个常量子句一定是**a**子句。

我坚持以下。在我的数据集的 sql 代码上，我在测试时做了一个案例，以检查指示子句是否出现的列，如果它为空，则子句不会出现，并且我在选择我的数据集时返回整数值 96，如果它不为空，则该子句将出现，并且我在选择我的数据集时返回整数值 97。

我想将此整数值转换为字符。所以 97 会变成**a**。

我正在使用报表服务器元素 TextBox 来接收这个整数值，所以我想做这样的事情。

```
=Convert.ToChar(First(Fields!FIRSTLETTER.Value, "DataSetAditionalInformation")) 
```

我在 C# 中使用**Convert.ToChar(value)**，我想知道在我的报表服务器上使用的等效命令。

在我的报告的第一个常量子句中，我想执行以下操作：

```
=Convert.ToChar(First(Fields!FIRSTLETTER.Value + 1, "DataSetAditionalInformation")) 
```

对于每个常量子句，我将加号信号后的数字加一。

因此，如果出现变量子句，FIRSTLETTER 将是 97，第二个子句将是 98，转换后这些数字将变为字母**a**和**b**。如果变量子句没有出现，FIRSTLETTER 将是 96，第一个和常量子句将是 97，转换后：**a**。

我什至不知道这是否可能，所以任何想法都可以解决这个问题。

提前致谢。

更新

合同条款如何运作的示例：

我有这个选择：

```
SELECT CASE WHEN ADDITIONAL_CLAUSE IS NULL THEN  96 ELSE 97 END AS FIRST_LETTER,
ADDITIONAL_CLAUSE
FROM TBLADDITIONALDATA
WHERE (NUMBER_CONTRACT = @NUMBER_CONTRACT) 
```

如果 select 返回 96（这意味着没有附加子句），则子句将如下所示：

> a) 每月考虑的金额将根据在会议组实现的相应月份的组信用责任确定。
> 
> b) 地块的总量不是常数，因为它们是根据标的价格的变化计算的

如果 select 返回 97（这意味着有一个附加子句），则子句将如下所示：

> a)*此子句的文本不是常量，它取决于存储在列 ADDITIONAL_CLAUSE 中的值*
> 
> b) 每月考虑的金额将根据在会议组实现的相应月份的组信用责任确定。
> 
> c) 地块的总量不是常数，因为它们是根据标的价格的变化计算的

我还有很多其他不变的从句，但我想它们没有必要举例说明。

所以我需要使子句之前的字母不是恒定的，所以每个字母都是一个文本框。

如果 ADDITIONAL_CLAUSE 不为空，则附加子句的文本框只会出现，这我已经在文本框的可见性表达式上做过。这个文本框接收 FIRST_LETTER 的值。

但是每个常量子句的其他文本框将收到 FIRST_LETTER 的值，第一个常量子句加 1，第二个常量子句加 2，第三个常量子句加 3，依此类推。但是FIRST_LETTER的值是一个整数，所以我需要把它转换成char。

再次感谢。

# winapi - Win32 TreeView AfterSelection

> ID：14197459
> 
> 赞同：2
> 
> 时间：2013-01-07T13:58:08.097
> 
> 标签：winapi, visual-c++

快速提问...

我正在使用 win32 (VC++) 中的树视图。

我想删除为树视图提供的选择工具。谁能告诉在树视图的AfterSelect 事件上发布了什么窗口消息。

电视也有复选框。所以禁用鼠标点击不是一个选项......

提前致谢...

- 瓦伦

*更多信息* 我被困在另一个点。我的 win32 应用程序本质上是一个无模式对话框 - 使用 CreateDialog 和 ShowWindow。获得 TVN_SELCHANGING 后，当我返回 1 时，它不起作用。我认为在绕过 Windows 消息之前会调用默认的 wndproc。我现在该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T22:08:03.980

我遇到了这个问题，一旦它已经发生，我就反转了选择。无论如何，如果您没有对此做出反应，那么应该不会有任何副作用。

```
case WM_NOTIFY:     
    {
        if(wParam == IDC_TREE_MC)
        {
            LPNMHDR lpnmh = (LPNMHDR) lParam;
            TVHITTESTINFO ht = {0};

            if ((lpnmh->code  == NM_CLICK) && (lpnmh->idFrom == IDC_TREE_MC)) // For Treeview Check Box Check Event
            {
                DWORD dwpos = GetMessagePos();

                ht.pt.x = GET_X_LPARAM(dwpos);
                ht.pt.y = GET_Y_LPARAM(dwpos);
                MapWindowPoints(HWND_DESKTOP, lpnmh->hwndFrom, &ht.pt, 1);

                TreeView_HitTest(lpnmh->hwndFrom, &ht);

                if(TVHT_ONITEMSTATEICON & ht.flags)
                    PostMessage(hDlg, UM_CHECKSTATECHANGE, (WPARAM)lpnmh->hwndFrom, (LPARAM)ht.hItem);
                else
                    TreeView_SelectItem(lpnmh->hwndFrom, NULL);
            }
            else if ((lpnmh->code  == TVN_SELCHANGED ) && (lpnmh->idFrom == IDC_TREE_MC))
                TreeView_SelectNode(lpnmh->hwndFrom, NULL);
        }
        break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:11:35.740

> 删除为树视图提供的选择工具

你能澄清一下吗？

您想阻止用户更改选择吗？

如果您真的想这样做，请在父窗口中插入 WM_NOTIFY 案例处理程序，检查 NMTREEVIEW 代码成员（lParam 是指向 NMTREEVIEW 的指针）。

如果代码是 TVN_SELCHANGING，如果您想阻止选择更改，则返回 1。返回 0 将导致选择更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:30:13.710

int CALLBACK WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) { hWndDialog = CreateDialog(hInstance, MAKEINTRESOURCE(IDD_MAIN), NULL, WndProc);

```
if (hWndDialog != NULL)
{
    ShowWindow(hWndDialog, SW_SHOW);
}

while(GetMessage(&Msg, NULL, 0, 0))
{
    if(!IsDialogMessage(hWndDialog, &Msg))
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
}
return 0; 
```

}

INT_PTR CALLBACK WndProc(HWND hDlg, UINT 消息, WPARAM wParam, LPARAM lParam) { UNREFERENCED_PARAMETER(lParam); switch (message) { case WM_INITDIALOG: return (INT_PTR)TRUE;

```
case WM_COMMAND:
    switch(LOWORD(wParam))
    {
    case IDC_BTN_REFRESH:
        RefreshButtonHandler();             
        break;
    case IDC_BTN_ADD_INSTALL:
        AddInstallBtnHandler();
        break;
    case IDOK:
    case IDCANCEL:
        DestroyWindow(hDlg);
        PostQuitMessage(0);
        return (INT_PTR)TRUE;
        break;  
    }
case WM_NOTIFY:     
    {
        if(wParam == IDC_TREE_MC)
        {
            LPNMHDR lpnmh = (LPNMHDR) lParam;
            TVHITTESTINFO ht = {0};

            if ((lpnmh->code  == NM_CLICK) && (lpnmh->idFrom == IDC_TREE_MC)) // For Treeview Check Box Check Event
            {
                DWORD dwpos = GetMessagePos();

                ht.pt.x = GET_X_LPARAM(dwpos);
                ht.pt.y = GET_Y_LPARAM(dwpos);
                MapWindowPoints(HWND_DESKTOP, lpnmh->hwndFrom, &ht.pt, 1);

                TreeView_HitTest(lpnmh->hwndFrom, &ht);

                if(TVHT_ONITEMSTATEICON & ht.flags)
                    PostMessage(hDlg, UM_CHECKSTATECHANGE, (WPARAM)lpnmh->hwndFrom, (LPARAM)ht.hItem);
                else
                    TreeView_SelectItem(lpnmh->hwndFrom, NULL);
            }
            else if ((lpnmh->code  == TVN_SELCHANGING ) && (lpnmh->idFrom == IDC_TREE_MC))
                return (INT_PTR)TRUE;
        }
        break;
    }
case UM_CHECKSTATECHANGE:
    {
        //Handle TreeView Check State Event
    }
    break;
}
return (INT_PTR)FALSE; 
```

}

抱歉格式不好...我睡眠不足:-)

# authorize.net - 授权 NET ARB 生成的交易

> ID：14197461
> 
> 赞同：1
> 
> 时间：2013-01-07T13:58:18.713
> 
> 标签：authorize.net

我正在与 Authorize.NET 集成我已经实施了退款和自动定期付款

但由于定期付款在授权服务器上执行，我需要将它们同步回来。ARB API 没有 QueryTransactions 函数。有没有办法在 Authorize.NET 中实现这个功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:26:21.153

您需要使用的是[Silent Post](http://www.johnconde.net/blog/all-about-authorize-nets-silent-post/)。就像 Paypal 的 IPN 一样，无论何时进行交易，您都会收到通知，其中包括通过 ARB 进行的订阅付款。

*（免责声明：我写了那篇文章）*

# session - 在 Yii 框架中设置会话

> ID：14197462
> 
> 赞同：3
> 
> 时间：2013-01-07T13:58:24.010
> 
> 标签：session, yii

我正在用 Yii 开发一个网站。

我在页面上有一个按钮。我需要在用户单击它时设置一个会话变量，并在用户单击另一个按钮时获取会话值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T14:08:10.317

使用[`CWebUser`](http://www.yiiframework.com/doc/api/1.1/CWebUser)状态方法

```
//set session variable
Yii::app()->user->setState("state_name", "value");

//check session variables
Yii::app()->user->hasState("state_name");

//get session variable
Yii::app()->user->getState("state_name");

//delete session variable (thanks @Kailas)
Yii::app()->user->setState("state_name", null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:05:21.710

你可以使用 CWebUser 的[setState](http://www.yiiframework.com/doc/api/1.1/CWebUser/#setState-detail)。

```
Yii::app()->user->setState('key', 'value'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T12:17:51.697

简单的

> Yii::app()->session['var'] = $encrypted_txt;

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-17T14:03:51.837

```
$session = Yii::$app->session; 
```

// 获取会话变量。以下用法是等效的：

```
$language = $session->get('language'); 
```

// 设置会话变量。以下用法是等效的：

```
$session->set('language', 'en-US'); 
```

// 删除会话变量。以下用法是等效的：

```
$session->remove('language'); 
```

// 检查会话变量是否存在。以下用法是等效的：

```
if ($session->has('language')) 
```

# android-listview - 我的客户列表视图未使用新数据更新

> ID：14197466
> 
> 赞同：0
> 
> 时间：2013-01-07T13:58:54.367
> 
> 标签：android-listview, notifydatasetchanged

您好，我创建了一个自定义列表视图并使用 notifyDataSetChanged() 方法进行更新，但我的列表未更新。请帮我。

这是我的源代码

```
public class fourthPage extends ListActivity {
ListingFeedParser ls;
List<Listings> data;
EditText SearchText;
Button Search;
private LayoutInflater mInflater;
private ProgressDialog progDialog;
private int pageCount = 0;
String URL;
ListViewListingsAdapter adapter;
Message msg;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Bundle b = getIntent().getExtras();
    URL = b.getString("URL");
    Log.i("Ran->URL", "->" + URL);
    MYCITY_STATIC_DATA.fourthPage_main_URL = URL;
    final ListingFeedParser lf = new ListingFeedParser(URL);
    Search = (Button) findViewById(R.id.searchButton);
    SearchText = (EditText) findViewById(R.id.search);
    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(SearchText.getWindowToken(), 0);
    this.getWindow().setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

    try {
        progDialog = ProgressDialog.show(this, "",
                "Loading please wait....", true);
        progDialog.setCancelable(true);
        new Thread(new Runnable() {

            @Override
            public void run() {

                try {
                    data = lf.parse();
                } catch (Exception e) {
                    e.printStackTrace();
                }

                msg = new Message();
                msg.what = 1;
                fourthPage.this._handle.sendMessage(msg);

            }
        }).start();

        Search.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                SearchText = (EditText) findViewById(R.id.search);
                if (SearchText.getText().toString().equals(""))
                    return;
                CurrentLocationTimer myLocation = new CurrentLocationTimer();
                LocationResult locationResult = new LocationResult() {
                    @Override
                    public void gotLocation(final Location location) {
                        Toast.makeText(
                                getApplicationContext(),
                                location.getLatitude() + " "
                                        + location.getLongitude(),
                                Toast.LENGTH_LONG).show();
                        String URL = "http://75.125.237.76/phone_feed_2_point_0_test.php?"
                                + "lat="
                                + location.getLatitude()
                                + "&lng="
                                + location.getLongitude()
                                + "&page=0&search="
                                + SearchText.getText().toString();
                        Log.e("fourthPage.java Search URL :->", "" + URL);
                        Bundle b = new Bundle();
                        b.putString("URL", URL);
                        Intent it = new Intent(getApplicationContext(),
                                fourthPage.class);
                        it.putExtras(b);
                        startActivity(it);
                    }
                };
                myLocation.getLocation(getApplicationContext(),
                        locationResult);
            }
        });

    } catch (Exception e) {
        Toast.makeText(getApplicationContext(),
                "No data available for this request", Toast.LENGTH_LONG)
                .show();
    }
}

private Handler _handle = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        progDialog.dismiss();
        if (msg.what == 1) {
            if (data.size() == 0 || data == null) {
                Toast.makeText(getApplicationContext(),
                        "No data available for this request",
                        Toast.LENGTH_LONG).show();
            }
            mInflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
            adapter = new ListViewListingsAdapter(getApplicationContext(),
                    R.layout.list1, R.id.title, data, mInflater);               
            setListAdapter(adapter);                
            getListView().setTextFilterEnabled(true);
            adapter.notifyDataSetChanged();
        } else {
            Toast.makeText(getApplicationContext(),
                    "Error in retrieving the method", Toast.LENGTH_SHORT)
                    .show();
        }

    }
};

public void onListItemClick(ListView parent, View v, int position, long id) {
    // remember i m going from bookmark list
    MYCITY_STATIC_DATA.come_from_bookmark = false;
    Log.i("4thPage.java -  MYCITY_STATIC_DATA.come_from_bookmark",
            "set false - > check" + MYCITY_STATIC_DATA.come_from_bookmark);
    Listings sc = (Listings) this.getListAdapter().getItem(position);
    if (sc.getName().equalsIgnoreCase("SEE MORE...")) {
        pageCount = pageCount + 1;
        final ListingFeedParser lf = new ListingFeedParser((URL.substring(
                0, URL.length() - 1)) + pageCount);
        try {
            progDialog = ProgressDialog.show(this, "",
                    "Loading please wait....", true);
            progDialog.setCancelable(true);
            new Thread(new Runnable() {
                @Override
                public void run() {

                    data.remove(data.size() - 1);
                    data.addAll(lf.parse());

                    Message msg = new Message();
                    msg.what = 1;
                    fourthPage.this._handle.sendMessage(msg);

                }
            }).start();
        } catch (Exception e) {
            pageCount = pageCount - 1;
            // TODO: handle exception
            Toast newToast = Toast.makeText(this, "Error in getting Data",
                    Toast.LENGTH_SHORT);
        }
    } else {
        Bundle b = new Bundle();
        b.putParcelable("listing", sc);
        Intent it = new Intent(getApplicationContext(),
                FifthPageTabbed.class);
        it.putExtras(b);
        startActivity(it);
    }
}

@Override
public void onBackPressed() {
    setResult(0);
    finish();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    Log.e("RESUME:-)", "4th Page onResume");
    try {           
        //adapter.notifyDataSetChanged();
        //setListAdapter(adapter);
        //getListView().setTextFilterEnabled(true);
    } catch (Exception e) {
        Log.e("EXCEPTION in 4th page",
                "in onResume msg:->" + e.getMessage());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:45:37.107

你的目标是什么版本的安卓？最新版本似乎修改了 notifyDataSetChanged() 的工作方式。如果您以 sdk 11 为目标，它可能会起作用吗？

此外，在另一篇文章中，这个问题似乎有一个不同的（而且非常彻底的答案）： [notifyDataSetChanged example](https://stackoverflow.com/questions/3669325/notifydatasetchanged-example/5092426#5092426)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:31:53.110

不要重新创建传递给适配器的 ArrayList 或 Array 对象，只需再次修改相同的 ArrayList 或 Array。并且当您修改适配器后数组或 arrylist 大小未更改时，在这种情况下 notifydatasetchange 将不起作用。

在镜头中，它仅在数组或数组列表大小增加或减少时才有效。

# bash - 在 Linux 上的 bash 中，trap / kill 如何工作？

> ID：14197470
> 
> 赞同：13
> 
> 时间：2013-01-07T13:59:22.607
> 
> 标签：bash

我的示例文件

陷阱测试.sh：

```
#!/bin/bash
trap 'echo trapped' TERM
while :
do
  sleep 1000
done 
```

$ 陷阱测试.sh &

> > [1] 4280

$ kill %1 <-- 按工作编号杀死有效

> > 终止
> > 
> > 被困

$ 陷阱测试.sh &

> > [1] 4280

$ kill 4280 <-- 按进程 ID 杀死不起作用？

> > （蟋蟀的声音，进程没有被杀死）

如果我完全删除陷阱语句，kill process-id 会再次起作用吗？

在工作中运行一些 RHEL 2.6.18-194.11.4.el5。我真的对这种行为感到困惑，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T14:55:53.260

```
kill [pid] 
```

将 TERM 信号专门发送到指定的 PID。

```
kill %1 
```

将 TERM 信号发送到作业#1 的整个进程组，在这种情况下发送到脚本 pid + his children (sleep)。

我已经在睡眠过程和脚本过程中使用 strace 验证了这一点

无论如何，有人在这里遇到了类似的问题（但使用 SIGINT 而不是 SIGTERM）：[http](http://www.vidarholen.net/contents/blog/?p=34) ://www.vidarholen.net/contents/blog/?p=34 。

引用最重要的一句话：

**kill -INT %1 将信号发送到作业的进程组，而不是后台 pid！**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T14:51:44.223

这是预期的行为。`kill`由is发送的默认信号`SIGTERM`，您正在被您的陷阱捕获。考虑一下：

```
#!/bin/bash
# traptest.sh

trap "echo Booh!" SIGINT SIGTERM
echo "pid is $$"

while :                 # This is the same as "while true".
do
    a=1
done 
```

（睡眠确实创建了一个新进程，并且我猜我的示例行为更清晰）。

因此，如果您`traptest.sh`在一个终端和`kill TRAPTEST_PROCESS_ID`另一个终端中运行，则运行 traptest 的终端中的输出将`Booh!`如预期的那样（并且该进程**不会**被终止）。如果您尝试发送`kill -s HUP TRAPTEST_PROCESS_ID`，它将终止 traptest 进程。

[这](https://superuser.com/questions/275433/what-does-1-in-kill-1-mean)应该可以消除`%1`混乱。

注意：代码示例取自[tldp](http://tldp.org)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-20T07:50:27.950

`kill %<jobspec>`Davide Berra 解释了和之间的差异`kill <PID>`，但没有*解释*这种差异如何导致您观察到的结果。毕竟，Unix 信号处理程序应该被立即调用，那么为什么`SIGTERM`单独向脚本发送 a 不会触发它的陷阱处理程序呢？

手册页在[**SIGNALS**](https://www.gnu.org/software/bash/manual/bashref.html#Signals)[部分](https://www.gnu.org/software/bash/manual/bashref.html#Signals)[的最后一段](https://www.gnu.org/software/bash/manual/bashref.html#Signals)`bash`解释了原因：[](https://www.gnu.org/software/bash/manual/bashref.html#Signals)

 **> 如果`bash`正在等待命令完成并接收到已设置陷阱的信号，则在命令完成之前不会执行陷阱。

因此，信号**被**立即传递，但处理程序执行*被推迟到`sleep`exited*。

因此，与`kill %<jobspec>`：

*   脚本和`sleep`收到的`SIGTERM`
*   `bash`注册信号，注意到`trap`为它设置了 a，并将处理程序排队以供将来执行
*   `sleep`立即退出
*   `bash`注意`sleep`的退出，并运行陷阱处理程序

而与`kill <script_PID>`：

*   只有收到的脚本`SIGTERM`
*   `bash`注册信号，注意到`trap`为它设置了 a，并将处理程序排队以供将来执行
*   `sleep`*1000 秒后*退出
**   `bash`注意`sleep`的退出，并运行陷阱处理程序*

 *显然，你不想看到最后一点。:)

* * *

如果您对血淋淋的细节感兴趣，请[下载`bash`源代码](https://ftp.gnu.org/gnu/bash/)并查看`trap.c`，特别是`trap_handler()`and`run_pending_traps()`函数。***

# html - 使用 :after 添加背景图片但没有内容

> ID：14197472
> 
> 赞同：1
> 
> 时间：2013-01-07T13:59:24.827
> 
> 标签：html, css, css-transitions, insertafter

我有一个使用图形并具有圆角的按钮。

为了使按钮 CSS 可重用，并且能够容纳任何长度的文本，同时仍然保持圆角，我想`:after`在主按钮之后添加结束圆角（因此第一个图像/文本可以增长并且圆角将始终固定在最后。）

当我添加内容（例如“测试”一词和一些背景颜色）时设法`:after`使其工作，但当样式上没有内容时无法使其工作。我只需要背景图像，仅此而已。

[JSFiddle 与按钮。](http://jsfiddle.net/s7KCv/)您可以看到`:after`代码，但由于某种原因，它没有显示。

```
#wizard-nav .paging:after
{ 
background-image:url("http://i.imgur.com/GDJgl.png");
height:22px;
width:7px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:21:53.663

使用`::before`和`::after`伪选择器时，您需要将值设置为`content`.

伪元素也是内联元素，因此如果要定义高度或宽度，则必须将其显示为`block`元素。

例如：

```
#wizard-nav .paging::after {
    content: "";
    display: block; 
    background-image:url("http://i.imgur.com/GDJgl.png");
    height:22px;
    width:7px;
} 
```

**工作示例：[http ://tinkerbin.com/GSO0HpD2](http://tinkerbin.com/GSO0HpD2)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T14:21:23.663

你有一个替代你的背景图像。例如，您可以使用[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)生成它，而不是应用一些边框半径，只要您喜欢和边框，您就可以比在背景周围工作更快地获得相同的效果-像这样的图像。例如：

```
border:red 1px solid;
border-radius:10px; 
```

顺便说一句 - 由于您的背景图像，它们没有出现。记下你的“。 [http://jsfiddle.net/WZywh/](http://jsfiddle.net/WZywh/)这是一个例子

# express - 如何使用 express 管理服务器端和客户端的翡翠模板？

> ID：14197473
> 
> 赞同：1
> 
> 时间：2013-01-07T13:59:26.160
> 
> 标签：express, pug

假设我正在编写一个用于比较比萨店的应用程序。我的披萨店列表有一个模板，如下所示：

```
table
    tr
        th Rank
        th Name
        th Date Ordered
        th Address
        each shop in shops
            tr 
                td= shop.rank
                td= shop.name
                td= shop.dateOrdered
                td
                    each line in shop.address
                        span #{line} <br/> 
```

每个页面的布局应该是这样的：

```
doctype 5
html
    head
        title Pizza Wars
        link(rel='stylesheet', href='/style/style.css')
    body
        #wrapper
            h1.main-title.section.group Pizza Wars
            div.section.group
                include side-menu
                block content 
```

当用户在“/shops”请求页面时，我想用页面的完整 html 进行响应。当用户已经在“/”并且他们在页面内导航到“/shops”时，我只想请求 JSON，并呈现模板客户端（我正在使用主干.js，如果有兴趣的话） .

由于 Express 不再支持布局，我怀疑我必须`extend`在我的 stores.jade 文件中添加 layout.jade，但这样做的问题是我的 stores.jade 文件会呈现整个页面的 html，因此没有用客户端，我只希望它呈现商店表。

我考虑过的另一种选择是在我的服务器代码中调用 res.render 两次，一次渲染商店列表，一次渲染以该列表作为内容的布局。该解决方案显然是次优的。

有没有人看到/找到一种使用玉来满足这两种情况的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:14:51.030

我正在使用的解决方案是在页面加载时在正文内不发送任何标记，并在该响应中包含客户端正在查看的任何页面的 json 数据。然后我让主干处理呈现 html。这似乎在主干应用程序中很常见。

# android - 在单个活动中通过数据库填充每个列表视图的 3 个选项卡？可以减慢手机速度吗？

> ID：14197474
> 
> 赞同：0
> 
> 时间：2013-01-07T13:59:32.070
> 
> 标签：android, listview, tabs, tabactivity

我打算那样做，我不知道如何使用标签活动或片段，我现在有点着急。这种建类方式会不会拖慢手机的速度？每个列表视图可能每个都有 30 个条目。谢谢

使用平台 2.2 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:08:27.367

这完全取决于要显示的内容。仅包含文本的 90 个列表项（同时不可见）根本不重，而 90 个包含图像的列表项会明显更重。

# java - Java中不必要的@SuppressWarnings("unused")

> ID：14197477
> 
> 赞同：0
> 
> 时间：2013-01-07T13:59:55.203
> 
> 标签：java, warnings

我有一个仅在调试模式下调用的函数。如果我不添加：

```
@SuppressWarnings("unused") 
```

我收到警告，因为在非调试模式下从未使用过该功能。如果我添加它会收到警告，因为对于`Unnecessary @SuppressWarnings("unused")`, 处于调试模式。

你通常会做什么来避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:28:07.270

You can make the flag which checks for debug mode not statically determined.

```
static final boolean DEBUG = Boolean.getBoolean("debug"); 
```

or

```
static final boolean DEBUG = LOGGER.isDebugEnabled(); 
```

or

```
static final boolean DEBUG = Boolean.parseBoolean("true"); 
```

This will stop the static analysis being about to determine whether you have debug enabled or not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:12:28.853

您可以尝试使该方法受到保护，这应该会删除警告。另一种选择是更改首选项。

# java - 如何以编程方式将项目添加到eclipse中的junit视图

> ID：14197480
> 
> 赞同：1
> 
> 时间：2013-01-07T13:59:57.530
> 
> 标签：java, junit, eclipse-plugin

我发现了如何在 Eclipse 中以编程方式打开 junit 视图

```
TestRunnerViewPart jViewPart = JUnitPlugin.showTestRunnerViewPartInActivePage(); 
```

现在我想做的是以编程方式在 junit 视图中添加一些类，以将它们作为 junit 测试运行。

我查看了 eclipse.jdt.junit 源代码，但只能找到一些可能有帮助的私有方法，但没有别的。

任何帮助或建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:05:52.210

也许您想看看[JUnit 运行配置源](http://kickjava.com/src/org/eclipse/jdt/junit/launcher/JUnitLaunchConfigurationDelegate.java.htm)代码。这是当您在 Eclipse 中以正常方式实际运行某些单元测试时执行的代码，最终会为您打开 Junit 视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T21:46:44.317

我喜欢 Bananeweizen 的答案的方向，但这只是一个指向源代码的链接，在这里几乎没有触及表面。

尝试阅读（[Eclipse 如何实际运行 Junit 测试？](https://stackoverflow.com/questions/7892070/how-does-eclipse-actually-run-junit-tests)）及其接受的答案，以更深入地解释 Eclipse JUnit 世界中正在发生的事情。

# .net - SVN 存储库结构建议

> ID：14197483
> 
> 赞同：0
> 
> 时间：2013-01-07T14:00:06.963
> 
> 标签：.net, svn

我在使用 subversion 方面有一些经验，但我首先需要一些建议来正确构建我的存储库。

我有多个不相关的小型项目，但我也有一些全球项目，其中许多较小的项目都依赖于这些项目。全局项目包含其他项目共有的可重用库等。

我是否只有一个存储库，但每个项目都有一个项目根（主干）（即每个项目一个，包括全局项目）？

我不想将所有项目放在同一个根目录中，因为除了全局项目之外，它们大多不相关。

目前所有小项目的解决方案都特别包含全局项目，这意味着他们可以更新源代码，但这意味着如果将某些内容提交到全局，所有项目都会受到影响。将其分开并仅在项目中包含全局dll会更好吗？这样我就可以确保该项目仅使用该版本的全局？

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:22:29.397

有两个相当实用的选择：

```
big_project
  trunk
  branches
  tags
little_project_1
  trunk
  branches
  tags
little_project_2
  trunk
  branches
  tags 
```

或者

```
trunk
  big_project
  little_project_1
  little_project_2
branches
  branch_x
    big_project
    little_project_1
    little_project_2
  branch_y 
```

等等。

如果这些项目除了共享一些通用的实用程序库或类似的工具库之外几乎没有任何关系，我会选择选项 1，因为它可以让它们更整齐地分开。如果它们紧密联系在一起，则选项 2 的优点是您可以通过一次结帐将它们全部结清。

我不认为这很重要。请注意，选项 2 并不强制您将所有项目一起更新：您可以在主干下只提交一个项目。

如果他们共享的唯一东西是一些实用程序库，我会考虑将这些库分解到他们自己的项目中，这样您就不必为了获得三个功能而吸收整个 big_project。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:38:33.877

我建议在小项目中使用外部指令从大项目中引入库。

SVN External 指令有一些功能在外部（大项目）在同一个存储库中时效果最好，所以我不建议使用单独的存储库。为每个项目使用单独的顶级文件夹。像杰伊的选项1。

当您使用外部指令链接到大项目中的特定修订时，对大项目的更改不会影响小项目。当一个小项目准备好利用大项目中的更改时，他们可以更改其外部指令以链接到新修订版。

# apache-flex - 播放错误后 Spark Video Player 空对象错误

> ID：14197486
> 
> 赞同：2
> 
> 时间：2013-01-07T14:00:22.563
> 
> 标签：apache-flex, flash-builder, video-player

我在使用 Spark VideoPlayer 时遇到问题。如果播放器遇到播放错误（可能是由于它无法播放文件），然后我尝试再次设置源，则会收到空对象错误。错误发生在这里：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at spark.components::VideoDisplay/cleanUpSource()
    E:\dev\4.y\frameworks\projects\spark\src\spark\components\VideoDisplay.as:1956] 
```

这指向

```
videoPlayer.displayObject.visible = true; 
```

`displayObject`在哪里`null`。

`VideoPlayer`除了放弃组件并创建自己的组件之外，我似乎找不到解决此问题的方法。

我看过一些与这个问题有关的帖子，但我还没有找到适合我的解决方案。

# php - 清除一张图片的缓存

> ID：14197493
> 
> 赞同：2
> 
> 时间：2013-01-07T14:00:34.980
> 
> 标签：php, caching

考虑一个最小的例子：使用 php 我有一个输入文本的表单，它会生成文本的图像。然后当我更改文本并更新时，我看不到新图像，因为我假设它正在被缓存。当我更新它时，是否有某种方法可以自动从缓存中删除这个图像文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T14:04:34.057

这通常通过向查询添加随机字符串或时间戳来处理。

IE`<img src="/images/image.jpg?timestamp=1357571065" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:08:31.017

典型的解决方案是 ceejazoz 在这个答案中给出的：添加一个额外的时间戳作为请求参数。这样 url 每次都不同，因此没有缓存或代理将提供缓存版本。

但是，尽管这可行，但它是一个丑陋的解决方法。

干净的解决方案是在交付图像时指定标头。这些标头注意不缓存图像。这就是标题的用途：定义资源的使用方式*。*缺点：当今用于传递静态图像的 http 服务器的开箱即用配置*不*提供指定此类标头。因为在 99,99% 的情况下，这是没有意义的。所以你必须编写一个自己的机制。难度不大，但还是很努力。使用上述解决方法当然更容易，也更少麻烦。

并准确回答您的实际问题：从单个缓存对象中清除“缓存”通常是不可能的。尽管这实际上取决于您正在谈论的缓存。如果它只是您开发（测试）时的浏览器缓存，那么只需进行“深度重新加载”（类似于 CTRL-SHIFT-R 或 CTRL-F5，具体取决于您的浏览器）。但这会清除当前页面的*所有*缓存对象。没有简单的方法来清除服务器端缓存甚至中间的代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:06:07.527

向可能包含朱利安时间 + 一个随机数的图像添加查询字符串，例如，您的图像 URL 变为：//.../myimage.jpg?112233445566-954967254

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T14:06:20.537

您可以重新验证缓存 `header("Cache-Control: no-cache, must-revalidate");`

# php - 在 Zend 框架 2 中无法路由除“/”之外的任何内容

> ID：14197500
> 
> 赞同：1
> 
> 时间：2013-01-07T14:00:58.950
> 
> 标签：php, apache, zend-framework2, zend-server

我将 Zend Framework 2 与 Zend Studio 10 和 Zend Server 一起使用。骨架应用程序运行良好，但除了“/”之外的任何内容都无法路由，它只返回“在此服务器上找不到请求的 URL”

这是module.config，除了我在路由“/lol”上添加了一个带有动作“lol”的控制器“Foo”之外，它几乎与骨架相同，但它不起作用。

```
<?php
/**
 * Zend Framework (http://framework.zend.com/)
 *
 * @link      http://github.com/zendframework/ZendSkeletonApplication for the canonical source repository
 * @copyright Copyright (c) 2005-2012 Zend Technologies USA Inc. (http://www.zend.com)
 * @license   http://framework.zend.com/license/new-bsd New BSD License
 */

return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ),
            // The following is a route to simplify getting started creating
            // new controllers and actions without needing to create a new
            // module. Simply drop new controllers in, and you can access them
            // using the path /application/:controller/:action
            'application' => array(
                'type'    => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/lol',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Foo',
                        'action'        => 'lol',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController',
            'Application\Controller\Foo'   => 'Application\Controller\FooController',

        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

同样的事情，如果我将路由“/”更改为“/asdf”（仅此而已）然后尝试运行 localhost/Test/asdf 而不是 localhost/Test/ 我会再次得到“找不到 URL”。

编辑：我检查了 apache2 中的错误日志，这就是它所说的：

```
[Mon Jan 07 14:45:58 2013] [error] [client 127.0.0.1] File does not exist: C:/Program Files (x86)/Zend/ZendServer/data/apps/http/__default__/0/Test/1.0.0/public/lol
[Mon Jan 07 14:46:03 2013] [error] [client 127.0.0.1] File does not exist: C:/Program Files (x86)/Zend/ZendServer/data/apps/http/__default__/0/Test/1.0.0/public/lol 
```

可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T15:10:25.220

I solved it, by configuring the Zend apache2 server and set "AllowOverride None" to "AllowOverride All". I do not know specifically why it helped though, would be glad if someone pointed that out.

# php - 如何使用 jquery 删除 wordpress 中菜单中的空链接？

> ID：14197505
> 
> 赞同：2
> 
> 时间：2013-01-07T14:01:24.957
> 
> 标签：php, jquery, html, wordpress

这是wordpress中菜单的html代码，当我响应我的主题时

菜单的 HTML 代码是：

```
<ul class="menu l_tinynav1" id="menu-headermenu">
<li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-20 current_page_item" id="menu-item-7365">
<span class="parent-nav-menu-span">
<a class="head_link" href="/">Home</a>
<a class="sub_link" href="/"></a>
</span></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom" id="menu-item-19">
<span class="parent-nav-menu-span"><a class="head_link" href="/pricing/">Pricing</a><a class="sub_link" href="/pricing/"></a></span></li>
<li class="spanarrow spanremove menu-item menu-item-type-custom menu-item-object-custom" id="menu-item-12">
<span class="parent-nav-menu-span"><a class="head_link" href="/financials" title=" Applications">Apps</a><a class="sub_link" href="/financials" title="Applications"></a></span>
<ul class="sub-menu sub-arrow2 access1024">
<li class="arr menu-item menu-item-type-post_type menu-item-object-page firstlist" id="menu-item-7370"><div class="top_arrow"> </div>
<span class="not-sub-nav-menu-span"><a class="head_link" href="/financials/" title="Software">Financials</a><a class="sub_link" href="/financials/" title=" Software"> expenses and more</a></span>
</li>
</ul>
</li>
</ul> 
```

空的没有包含在wordpress菜单设置中自定义的子链接，定价，应用程序是主菜单，财务是应用程序的子菜单，“费用和更多”是财务菜单的子链接，现在我需要删除主菜单和子菜单中的空子链接我们如何在jquery中做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:02:13.147

答案是

```
$(document).ready(function(){
     $("#menu-headermenu li span a.sub_link").each(function(){    
       var emty=$(this).text();      
       if(emty.length==0){          
           $(this).remove();           
       }
     })
 }) 
```

# c# - 关闭 PowerPoint 演示文稿

> ID：14197507
> 
> 赞同：1
> 
> 时间：2013-01-07T14:01:36.657
> 
> 标签：c#, office-interop, powerpoint-2010

我创建了一些 Office 加载项，用于跟踪文档/演示文稿是否已关闭，然后在关闭文档/演示文稿之前执行一些自定义代码。

所有这些代码在 Word 加载项中都没有任何问题，但在 PowerPoint 加载项中我得到一个

> “System.Runtime.InteropServices.COMException (0x80048240): Presentation (unknown member): Invalid request. This operation cannot be executed in this event handler.”-关闭 PowerPoint 应用程序时出错。被调用的方法是presentation.Close()。

如果作为 Ribbon 事件处理程序的一部分调用该方法，则该方法可以正常工作，但如果它由任何 Application-evens (或) 调用`PresentationClose`，则它无法执行.`PresentationBeforeClose``PresentationCloseFinal``presentation.Close()`

如前所述，我在没有此问题的 Word 加载项中有相同的代码。我知道这两种产品中的事件处理是不同的，但我仍然无法弄清楚为什么在 PowerPoint 中关闭应用程序或关闭演示文稿时会出现问题。

希望有人能提供一些好的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T13:54:57.773

我尝试了很多方法，但没有任何效果。所以最好搜索powerpoint进程并通过代码将其杀死。希望这就是你要找的。

```
Process[] pros = Process.GetProcesses();
  for (int i = 0; i < pros.Count(); i++)
   {
   if (pros[i].ProcessName.ToLower().Contains("powerpnt"))
        {
          pros[i].Kill();
        }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:36:09.573

我遇到了非常相似的东西；为了解决 PPT 中的一些错误或其他问题，我需要关闭然后重新打开当前演示文稿，但无法从事件处理程序中关闭演示文稿（我想这是有道理的，因为它仍在处理属于演示文稿的事件触发它）。

我通过让事件处理程序无模式地加载表单来解决这个问题。这允许事件处理程序中的代码继续到事件处理程序的 End Sub，因此您不再处于事件处理程序中。

表单中的初始化代码然后关闭当前文档并卸载表单。

无需显示表单，因此用户永远不会看到任何内容。

# php - 分页时的 DataTable 服务器请求

> ID：14197508
> 
> 赞同：2
> 
> 时间：2013-01-07T14:01:44.587
> 
> 标签：php, jquery, datatables, server-side

我正在使用数据表进行分页，因为它是客户端，所以获取整个数据（超过 50000）会使我的页面太忙而崩溃。这是我的代码。我该怎么办？

```
$q="select * from table";
$rs = $oAppl->query($q);
<table class="display" id="example">
            <thead>
                <tr>
                   <th class="th_title">ID</th>
                   <th class="th_title"> Name</th>
                  </tr>
            </thead>
            <tbody>
            <?php
             while ( $rw = $oAppl->row($rs) ) {
             ?>
                <tr class="item">
                    <td ><?php echo $rw["id"]; ?></td>
                   <td class="subject"><?php echo $rw["name"]; ?></td>
   </tr>
               <?php
               }
               ?>
            </tbody>
        </table>
 $(document).ready(function() {
$('#example').dataTable();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:16:21.250

不要将那么多数据加载到浏览器中。只是让用户去做。您可以将页码放在数据块下方，用户将单击该页码。例如，如果用户单击第 2 页，则调用一个`JQuery`函数，该函数`AJAX`调用服务器并从表中获取第二个 10 行（例如再次）。您可以将 50000 行数据划分为您想要的任意数量的页面，然后`page_number*minimum_row_count`从服务器加载行数。

**更新**：（评论后）

不幸的是，我现在不能给你代码示例，因为我正在开会；） Datatables 有一个键`bServerSide`，它基本上告诉构造函数“你要获取”。并且还通过指定`sAjaxSource`,`sServerMethod`和`iDisplayLength`在初始化程序中，您可以设置您想要的。这里有一些有用的链接。如果您还有任何问题，我可以在今晚晚些时候提供代码示例；）

[数据表服务器端的东西](http://www.datatables.net/release-datatables/examples/server_side/server_side.html)

[数据表自定义变量](http://www.datatables.net/release-datatables/examples/server_side/custom_vars.html)

# java - 如何将整数格式化为有两位小数？

> ID：14197512
> 
> 赞同：-1
> 
> 时间：2013-01-07T14:01:53.147
> 
> 标签：java

> **可能重复：**
> [如何将整数格式化为有两位小数？](https://stackoverflow.com/questions/14197319/how-to-format-an-integer-to-have-two-decimals)

我在这里为这段代码苦苦挣扎。

```
DecimalFormat df = new DecimalFormat("00.##");
df.setMinimumFractionDigits(2);
return df.format(Integer.valueOf(amount)); 
```

这是我需要的：

> 输入：2，输出：2.00
> 
> 输入 20，输出：20,00
> 
> 输入 1003，输出：100,30
> 
> 输入 120323，输出：1.203,23（一千二百零三二十三美分）

我不能使用 DecimalFormat，因为我没有“示例 ##.##”模式。

我应该总是有两位小数。如果金额小于100，那么我只需要自己取金额并添加“.00”如果大于100，则意味着最后两位数字是我需要的两位小数。他们是美分。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:08:29.240

如果你想添加两位小数（这总是`.00`有点多余。

```
return String.format("%.2f", amount > 100 ? amount/100.0 : (double) amount); 
```

我建议你保留一套单位。您应该能够始终使用美分。如果你不这样做，你很可能会感到困惑。例如，您有 100 和 10000，它们都是 100.00

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:10:32.027

> 如果金额小于100，那么我只需要自己取金额并添加“.00”如果它大于100，则意味着最后两位数字是我需要的两位小数。

首先你需要解决这个问题。一个类或本机类型应该只保存一种数据，而不应该让其他类或代码根据具体情况对如何处理该数据的详细知识造成*负担*。

让那个东西**在所有情况下**都返回便士的数字，或者让它返回一个支持小数点的数字。更好的解决方案是便士的数量。

这样你就不必在你的格式中加入逻辑，这在你第二次需要格式化相同的东西时肯定不会出现。

# c# - HttpClient 来自不同国家的一份回应

> ID：14197513
> 
> 赞同：1
> 
> 时间：2013-01-07T14:01:57.223
> 
> 标签：c#, .net, windows-8

我在 Windows Store 中有一个简单的应用程序。此应用程序从网站下载并解析 HTML。我使用[HttpClient 类](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)

现在我遇到了一个大问题，因为页面看起来与特定国家不同，而且我的解析不成功。

示例：当来自美国的人使用我的应用程序时，应用程序会下载不同的 HTML 内容，因为网页在特定国家/地区看起来不同。

如何在 http 客户端中设置默认位置？我希望在所有执行中都有相同的 HTML。

**编辑** 我调用这个页面：[LINK](http://www.livescore.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:36:03.720

**暂时忽略最初的问题**

请不要为任何功能编写依赖于任何类型的 HTML 解析的应用程序。您所调用的所有站点所要做的就是在“错误”的地方更改一两个 ID，并且您的应用程序将对每个用户都失败，直到您发布更新为止。

**回到答案**

好的，假设屏幕抓取是您想要使用您的应用程序的方式，并且当然假设您正在抓取的网站在其使用条款中允许此类行为（检查 - 这对您来说不会很有趣如果您没有阅读它们会被起诉）那么我会建议一种稍微不同的方法。

既然您不能保证对于您的用户访问您的应用程序的任何语言环境都获得相同的页面布局，为什么不设置一个为您执行解析工作的 Web 服务，并从您的应用程序询问该服务，而不是直接访问该站点?

您的应用程序 <--> 您的网络服务 <--> 提供数据的站点

这样，您始终知道您返回的数据的格式是一致的，就好像针对特定语言环境（您的 Web 服务器）一样，然后您只需维护一段代码即可对其进行解析。只要底层数据结构发生变化，这就会简单得多（相信我，会有变化）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:05:54.843

您需要在发出请求时设置默认语言标头和/或考虑将其设为用户可定义的设置。

[http://www.w3.org/TR/WCAG20-TECHS/SVR5](http://www.w3.org/TR/WCAG20-TECHS/SVR5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:05:57.413

暂时将设计缺陷考虑放在一边（您可能有或没有充分的理由进行屏幕抓取），以下是设置`Accept-Language`标题的方法：

```
var httpClient = new HttpClient();
var httpRequestMessage = new HttpRequestMessage(HttpMethod.Get, new Uri("http://www.livescore.com"));
httpRequestMessage.Headers.Add("Accept-Language", "en");
var response = await httpClient.SendAsync(httpRequestMessage);
string content = await response.Content.ReadAsStringAsync(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T14:08:31.183

这个问题的答案取决于网站如何实现默认语言选择。根据特定站点的工作方式，其他两个答案都可能是正确的。

如果您可以共享站点 URL，我们可以告诉您使用合适的策略。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-07T14:04:12.040

尝试始终使用cultureInfo 路径参数调用有问题的url，如果它有一个，例如说你的目标是microsoft.com，那么你会得到这样的东西：

*   [http://www.microsoft.com/](http://www.microsoft.com/) **en-us** /default.aspx 英文版
*   [http://www.microsoft.com/](http://www.microsoft.com/) **de-DE** /default.aspx 德语

等等。如果这适用于您，这将是一个想法。

# android - 如何优化此布局？

> ID：14197515
> 
> 赞同：1
> 
> 时间：2013-01-07T14:01:58.707
> 
> 标签：android, android-layout, optimization

我正在尝试通过扁平化视图层次结构来优化 Android 应用程序中的布局。这里有一个特别难的！

![一个非常低效的布局](../Images/0c645e3f7a90fa373f49ad822a17d404.png)

这个布局有一个主要的 LinearLayout 来保存顶行和底行（它们本身就是水平的 sub-LinearLayouts）。中间的四个项目中的每一个都是一个垂直的RelativeLayout（以容纳ImageView 和textView），使用layout_weights 展开。每行包含两个项目也是一个水平线性布局。

不用说，这种布局效率非常低，在绘制时会导致很多“Choreographer has skipped frames”的消息。我想消除这些嵌套的布局，但 AFAIK 的 RelativeLayout 无助于水平等间距排列的项目，以及垂直居中的两行。另外，我考虑将 ImageView 和 TextView 替换为复合可绘制对象，但我不知道如何控制可绘制对象的大小。

任何帮助表示赞赏！

**编辑**：这是布局的粗略描述。

```
<!-- The top bar -->
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="80dip"
android:background="@drawable/some_image">
    ...
</LinearLayout>

<!-- Central Layout -->
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="2"
android:orientation="vertical">

    <!-- First Row -->
    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:baselineAligned="false"
    android:layout_marginTop="10dp"
    android:layout_weight="1"
    android:weightSum="2">

        <!-- Item 1 -->
        <RelativeLayout
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center_vertical">

         <!-- ImageView and TextView here -->

        </RelativeLayout>

        <!-- Item 2 -->
        <RelativeLayout
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center_vertical">

         <!-- ImageView and TextView here -->

        </RelativeLayout>

    </LinearLayout>
    <!-- End of first row layout -->

    <!-- Second Row -->
    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:baselineAligned="false"
    android:layout_marginTop="10dp"
    android:layout_weight="1"
    android:weightSum="2">

        <!-- Item 3 -->
        <RelativeLayout
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center_vertical">

         <!-- ImageView and TextView here -->

        </RelativeLayout>

        <!-- Item 4 -->
        <RelativeLayout
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center_vertical">

         <!-- ImageView and TextView here -->

        </RelativeLayout>

    </LinearLayout>
<!-- End of second row layout -->

</LinearLayout>
<!-- End of central layout -->

<!-- Bottom bar -->    
<LinearLayout...>
....
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T20:00:58.193

您的示例看起来很像 Android 团队在此处提供的演示中显示的示例：http: [//developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)

我对 GridLayout 绝不是超级精通（在我让它工作之前进行了大量的试验和错误），但看看你拥有的东西应该可以解决问题（尤其是如果你将底部的所有按钮移动到顶部，并且有它们作为一个动作栏）。

摆脱 layout_weights 将改善一切，因为每次使用它们时都会一次又一次地测量它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T14:13:44.157

这样做的最佳方式是编写您自己的 custom `ViewGroup`。如果您了解 android 的布局方式，这将非常简单。

请参阅 Romain Guy 的这些幻灯片：

[https://docs.google.com/leaf?id=0B_VKZCqEnHblNDdiY2UxODgtYWNhNS00MmU4LWE4NDMtZjQ1OWI5MDMxZTVh&sort=name&layout=list&num=50](https://docs.google.com/leaf?id=0B_VKZCqEnHblNDdiY2UxODgtYWNhNS00MmU4LWE4NDMtZjQ1OWI5MDMxZTVh&sort=name&layout=list&num=50)。

# entity-framework - Sql Ce & EF 用法（自编码）

> ID：14197522
> 
> 赞同：0
> 
> 时间：2013-01-07T14:02:23.957
> 
> 标签：entity-framework, ef-code-first, sql-server-ce

我有一个 Windows 程序，应该在安装过程中不写入 AppData 来部署它，但我想要一个 Sql CE 数据库。

所以我有两个想法：将它部署到程序中，然后在第一次启动时复制，或者，我更喜欢，对所有内容进行编码。

所以我发现这个 Thread [Deploying VS2010 Database Projects without VSDBCMD?](https://stackoverflow.com/questions/10435739/deploying-vs2010-database-projects-without-vsdbcmd) 这基本上告诉我这是一个坏主意，但我不认为回答者是无所不知的，我有一个更好的主意。我在某处发现了那段代码：

```
string connStr = "Data Source = FooDatabase.sdf; Password = SomePassword";

if (File.Exists("FooDatabase.sdf"))
    File.Delete("FooDatabase.sdf");

SqlCeEngine engine = new SqlCeEngine(connStr);
engine.CreateDatabase();

using (var conn = new SqlCeConnection(connStr)) {
    conn.Open();

    SqlCeCommand cmd = conn.CreateCommand();
    cmd.CommandText = "CREATE TABLE FooTable(col1 int, col2 ntext)";
    cmd.ExecuteNonQuery(); 
```

从这里开始：以[编程方式创建 SQLCE 数据库](https://stackoverflow.com/questions/6196274/create-sqlce-database-programatically)

我要问的是，这是否适用于任何 PC 以及我必须做的代码才能使用实体框架。我在想类似的东西

```
public class FooContext : System.Data.Entity.DbContext 
{
    public FooContext() : base("Data Source = FooDatabase.sdf; Password = SomePassword") { }
    public DbSet<FooTable> FooTables { get; set; }
}

public class FooTable
{
    public int col1 { get; set; }
    public string col2 { get; set; }
} 
```

但我只是不让它工作。

可能只有连接字符串是错误的，但我如何避免使用它或正确的看起来如何？

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:30:39.683

尝试在您的启动逻辑中使用它

```
private static void InitializeDB()
{
   const string connectionString = "Data Source = FooDatabase.sdf; Password = 123";
   Database.DefaultConnectionFactory = new
      SqlCeConnectionFactory("System.Data.SqlServerCe.4.0", "", connectionString);
} 
```

看看这个[帖子](http://xosfaere.wordpress.com/2011/01/30/entity-framework-code-first-development-with-sql-ce-4-0/)

# c++ - C++11 中的所有/大多数 setter 函数是否应该编写为接受通用引用的函数模板？

> ID：14197526
> 
> 赞同：64
> 
> 时间：2013-01-07T14:02:54.490
> 
> 标签：c++, c++11, move-semantics, perfect-forwarding, universal-reference

考虑一个`X`具有`N`成员变量的类，每个变量都有一些可*复制*和*可移动*的类型，以及`N`相应的 setter 函数。在 C++98 中， 的定义`X`可能如下所示：

```
class X
{
public:
    void set_a(A const& a) { _a = a; }
    void set_b(B const& b) { _b = b; }
    ...
private:
    A _a;
    B _b;
    ...
}; 
```

上述类的 Setter 函数`X`可以绑定到左值和右值参数。根据实际参数，这*可能会*导致创建临时文件并*最终*导致复制分配；因此，此设计不支持*不可复制的类型。*

在 C++11 中，我们拥有移动语义、完美转发和通用引用（Scott Meyers 的术语），通过以下方式重写 setter 函数，可以更高效、更通用地使用它们：

```
class X
{
public:
    template<typename T>
    void set_a(T&& a) { _a = std::forward<T>(a); }

    template<typename T>
    void set_b(T&& b) { _b = std::forward<T>(b); }
    ...
private:
    A _a;
    B _b;
    ...
}; 
```

通用引用可以绑定到`const`/non- `const`、`volatile`/non-`volatile`和任何一般的可转换类型，避免创建临时变量并将值直接传递给`operator =`. 现在支持*不可复制*、*可移动的类型。*可以通过`static_assert`或 通过消除可能不需要的绑定`std::enable_if`。

所以我的问题是：作为*设计指南*，C++11 中的所有（比如说，大多数）setter 函数都应该写成接受通用引用的函数模板吗？

除了更繁琐的语法和在那些 setter 函数中编写代码时无法使用类似 Intellisense 的帮助工具之外，假设原则“*将 setter 函数编写为函数模板，尽可能接受通用引用*”是否有任何相关的缺点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-07T14:10:25.223

您知道 A 类和 B 类，因此您知道它们是否可移动，以及这种设计是否最终是必要的。对于类似的东西`std::string`，除非你知道你在这里有性能问题，否则更改现有代码是浪费时间。如果您正在处理 . `auto_ptr`，那么是时候将其撕掉并使用`unique_ptr`.

如果您不知道更具体的内容，现在通常首选*按值获取参数 - 例如*

```
void set_a(A a) { _a = std::move(a); } 
```

这允许使用任何构造函数，`A`除了可移动性之外不需要任何东西，并提供相对直观的界面。

# asp.net-mvc - 如何使用 WebSecurity + SimpleMembership 手动“登录用户”？

> ID：14197528
> 
> 赞同：5
> 
> 时间：2013-01-07T14:03:07.983
> 
> 标签：asp.net-mvc, simplemembership

我想使用 WebSecurity+SimpleMembership，但实现通过自定义/替代身份验证方法（可选）登录用户的能力。

WebSecurity.Login 只有一个方法签名，需要用户名和密码。我想跳过密码检查，例如：

```
if (MyCustomAuthenticationMethod.Authenticate(username, customData)) {
    WebSecurity.Login(username); // Login without password check, method doesn't exist though
} 
```

我假设自定义身份验证方法是可能的，因为 OAuthWebSecurity 存在，但我不知道如何去实现我自己的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-22T08:14:08.830

好吧，您可以简单地回到身份验证的根目录并直接调用

```
FormsAuthentication.SetAuthCookie 
```

这将创建 cookie 并验证您的用户。请参阅[无密码的 Asp.net 会员授权](https://stackoverflow.com/questions/1871010/asp-net-memebership-authorization-without-password)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:29:21.183

他们没有让没有密码的登录变得容易。一种方法是制作您自己的自定义 OAuth 插件，然后使用您自己的令牌简单地调用它，如下所示：

```
OAuthWebSecurity.Login("google", "token", true); 
```

您可以在此处找到如何创建自定义 OAuth 提供程序：http: [//www.codeguru.com/columns/experts/implementing-oauth-features-in-asp.net-mvc-4.htm](http://www.codeguru.com/columns/experts/implementing-oauth-features-in-asp.net-mvc-4.htm)

你可以在这里浏览代码：[https ://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/Microsoft.Web.WebPages.OAuth/OAuthWebSecurity.cs](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/Microsoft.Web.WebPages.OAuth/OAuthWebSecurity.cs)

这是来自 OAuthWebSecurity.cs 文件的片段，它显示了如何在没有密码的情况下对用户进行身份验证的内部结构：

```
 internal static bool LoginCore(HttpContextBase context, string providerName, string providerUserId, bool createPersistentCookie)
    {
        var provider = GetOAuthClient(providerName);
        var securityManager = new OpenAuthSecurityManager(context, provider, OAuthDataProvider);
        return securityManager.Login(providerUserId, createPersistentCookie);
    } 
```

也许有人已经制作了这个插件。

# android - Android 从许多活动中传递 Intent 信息

> ID：14197530
> 
> 赞同：0
> 
> 时间：2013-01-07T14:03:14.473
> 
> 标签：android, android-intent, android-activity

为了尝试帮助清楚地描述问题，我将使用活动 A、B 和 C。

活动 A 是应用程序主菜单。

TextViews 所在的活动 B

编辑视图所在的活动 C。

注意 Activity B 和 C 仅通过 Activity A 连接，即从 C 到 B 使用两个不同的意图 C 到 A 然后 A 到 B

问题; 是否可以将信息从活动 C（edittexts）传递到活动 B（将 textviews 设置为 editTexts）。我相信我可以使用意图，但我不确定这将如何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:44:31.913

`ActivityB.java:`

```
public void startActivityC() {
    Intent intent = new Intent(this, ActivityC.class);
    intent.putExtra("key1", "value1");
    intent.putExtra("key2", "value2");
    startActivity(intent);
} 
```

`ActivityC.java:`

```
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    Intent intentFromB = getIntent();
    String value1 = intentFromB.getStringExtra("key1");
    String value2 = intentFromB.getStringExtra("key2");

    // Do something with value1 & value2
} 
```

希望这可以帮助！

# sql - 如何仅从存储在 varchar 中的字符串中过滤日期

> ID：14197532
> 
> 赞同：1
> 
> 时间：2013-01-07T14:03:17.803
> 
> 标签：sql, sql-server

Ii 以下列方式将值存储在 SQL Server 中：`02-Jul-12 12:00:00 AM`这里是时间和分钟，秒可以是任何值`02-Jul-12 12:15:52 PM`，`02-Jul-12 6:02:12 AM`依此类推。

我想要一个 where 条件，它将省略时间并根据日期获取数据，如下所示`where some_Date='02-Jul-12'`

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:05:45.350

```
SELECT * FROM whatever WHERE some_Date LIKE '02-Jul-12%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:05:31.940

```
 SELECT * FROM dbo.tbl_MyTable
    WHERE 
 REPLACE(CONVERT(VARCHAR(9), DateTimeValueColumn, 6), ' ', '-')='02-Jul-12' 
```

或者

代码中的 chage 不是使用 getdate 函数 voncert 你日期时间格式的日期字符串，并比较这个后续查询对你有用

```
SELECT * FROM dbo.tbl_MyTable
WHERE 
CAST(CONVERT(CHAR(10), DateTimeValueColumn, 102) AS DATE) = 
            CAST(CONVERT(CHAR(10),GETDATE(),102) AS DATE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T14:06:02.753

如果您使用的是 SQL2008 或更高版本，则可以将您的`DATETIME`转换为`DATE`.

看到这篇文章：http: [//blog.sqlauthority.com/2012/09/12/sql-server-get-date-and-time-from-current-datetime-sql-in-sixty-seconds-025-video/](http://blog.sqlauthority.com/2012/09/12/sql-server-get-date-and-time-from-current-datetime-sql-in-sixty-seconds-025-video/)

但在 WHERE 子句中，最好在日期之间进行搜索，如下所示：

```
DECLARE @startDate DATETIME = '02-Jul-2012'
DECLARE @endDate DATETIME = DATEADD(DAY, 1, @startDate)

SELECT * FROM [table] WHERE [some_Date] BETWEEN @startDate AND @endDate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T14:12:03.693

如果您将日期存储为字符（不建议这样做），您至少应该使用 ISO 格式：YYYY-MM-DD hh:mm:ss。这使得日期对排序和比较有用（“<”有效，“>”有效，“between”有效以及等于）。

要提取日期，您可以使用`left(datestr, 10)`. 在您的格式中，您将使用：

```
where left(datestr, 9) = '01-Jan-13' 
```

如果您将字段存储为`datetime`or `smalldatetime`，您可能会认为它们存储为字符串。他们不是。它们存储为自某个特定日期以来的某些天数，而天数部分存储为小数天。如果您使用的是 SQL Server 2005 或更高版本，那么最好的方法是：

```
where cast(datetime as date) = '2013-01-01'  -- I recommend ISO formats, even for constants.  '20130101' is even better 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T14:12:19.977

选择具有今天日期（不是时间）的行

```
select * from myTable where datediff(dd, dateColumn, getdate()) = 0 
```

# iphone - 如何在 ViewController 的子视图中管理 UITextField 的键盘

> ID：14197535
> 
> 赞同：1
> 
> 时间：2013-01-07T14:03:27.263
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

我有一个**RootViewController**，其中有一个UIView 类型的**contentView**，我在其中添加一个 UIView 作为子视图。我的 RootViewController 尺寸为 768 x 1024，而我的 contentView 尺寸为 400 x 500，**在我的 contentView i'我添加了一个包含一些 UITextFields 的自定义 UIView**，我已经在这个视图类中编写了键盘管理代码，但是键盘出现在我的 RootViewController 类中，所以我的 activeTextField 的任何帧都与我的 subView 类和键盘帧有关，它是 RootViewController，在这种情况下**如何管理键盘隐藏文本字段？**提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:28:27.610

这是一种[在 SO 中经常被问到和回答](https://stackoverflow.com/questions/1126726/how-to-make-a-uitextfield-move-up-when-keyboard-is-present)的问题。您添加的扭曲是被键盘遮挡的文本字段在视图层次结构中更深。

但答案是一样的：当文本字段成为第一响应者时，需要移动它以便用户可以看到它。您可以移动文本字段，或者它的父视图或祖父视图等，但它需要移动。

*编辑*（[这里也是](https://stackoverflow.com/questions/1247113/iphone-keyboard-covers-text-field)。谷歌“ios键盘隐藏文本字段”并查看更多）

# android - 如果服务器关闭，如何避免 Jsoup 和 Asynctask 崩溃

> ID：14197538
> 
> 赞同：0
> 
> 时间：2013-01-07T14:03:34.407
> 
> 标签：android, crash, android-asynctask, jsoup

我需要一些帮助。我开发了一个解析网站的应用程序。现在一切都很好（也感谢你）。但是当我要解析的站点关闭时，我遇到了问题。该应用程序崩溃了......我试图改善超时连接，这在网站速度很慢时有效。但是我如何管理服务器关闭错误？我想在类似的文本视图中打印一个错误。这是我的代码的一部分

```
String result = "";
                Document doc = null;
                try {
                      Connection conn = Jsoup.connect(BLOG_URL).timeout(14000);
                        doc = conn.get();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:20:53.583

在服务器关闭时处理崩溃，如下所示。

```
private class doSomethingDelayed extends AsyncTask<Void, Integer, Void> {

    private int num_runs = 0;

    @Override
    protected Void doInBackground(Void... gurk) {

        try {
                   //stuffs...
         publishProgress(num_runs);
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
        serviceAvailable = true;                    
    } catch (Exception e) {
        e.printStackTrace();
    }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        if (serviceAvailable == true) {
            serviceAvailable = false;
            Toast.makeText(getApplicationContext(), "Service not available", Toast.LENGTH_SHORT).show();
            System.out.println("in onPostExecute method --");
        }
    }

    @Override
    protected void onProgressUpdate(Integer... num_runs) {
        try {

        } catch (JSONException e) {
            e.printStackTrace();

        }
    }
} 
```

# android - Android：使用 HTML 5 在 Webview 中播放视频

> ID：14197540
> 
> 赞同：1
> 
> 时间：2013-01-07T14:03:44.073
> 
> 标签：android, html, video, webview, sd-card

我想使用 html 页面在 webview 中播放视频。我创建了 html 页面并保存在资产文件夹中，视频存储在 sdcard 中。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:38:27.177

有关在 web 视图中播放视频的示例，请参阅[https://gist.github.com/3718414](https://gist.github.com/3718414)。它展示了如何将 HTML 作为 URL 引用或将其组装为内联。您需要确保您还注意到评论中提到的权限

# dynamics-crm-2011 - 包含分号的记录 URL，一旦删除就可以工作，它来自哪里？

> ID：14197545
> 
> 赞同：0
> 
> 时间：2013-01-07T14:04:17.627
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我有一个 CRM 工作流程，其中我在从流程发送的电子邮件中包含一个链接，这是它关注的自定义实体的快捷方式。

电子邮件中的超链接如下所示：

[http://myserver.com:1234/Test/userdefined/edit.aspx?etc=10011&id;edf6a969-c458-e211-ba79-005056950002](http://myserver.com:1234/Test/userdefined/edit.aspx?etc=10011&id;edf6a969-c458-e211-ba79-005056950002)

此页面无法加载，出现 http 异常。

我从“&id;=”中删除了分号，然后它就可以工作了！

我的问题是......这个分号来自哪里，我该如何摆脱它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:32:38.593

弄清楚了...

我将记录 URL 作为值单独插入到电子邮件中，而不是作为超链接的一部分。

我通过执行“插入超链接”然后适当地填写名称和值元素来修复它。

希望它可以帮助别人！

# php - 在 IE 中显示逗号 (,) 的 Ajax 数组

> ID：14197548
> 
> 赞同：-5
> 
> 时间：2013-01-07T14:04:33.407
> 
> 标签：php, javascript, ajax, internet-explorer

我不明白为什么会出现这个问题。在 Chrome 和 Firefox 中，我的 ajax 运行良好，并且有很多错误，但是，当我在 IE 中运行 Ajax 请求时，结果输出是数据，但在我的页面顶部有一系列逗号 (,)。

例子：

```
,
,
,
,
<tr> row1 </tr>
<tr> row2 </tr>
<tr> row3 </tr>
<tr> row4 </tr> 
```

我希望输出为：

```
 <tr> row1 </tr>
    <tr> row2 </tr>
    <tr> row3 </tr>
    <tr> row4 </tr> 
```

代码：index.php

```
function indexMostRecent(linkcode) {
            var lines = '';
                $.ajax( {
                type: 'POST',
                url:'http://site.test.co.uk/shortlinks/nextLines.php', 
                data: { 'indexLeft': 1 },
                cache: false,
            }).done( function(jsondata) {

            lines = jsondata; 

            var obj = jQuery.parseJSON( lines );

            $('#leftIndex').append( obj + '<tr id="less"><td> End </td></tr> ' );
            $('#indexLeft').remove();
        });
    };

    $('#indexLeft').click(indexMostRecent); 
```

nextlines.php

```
<?php
include ('connection.php');
//these are the queries for the index page
    if(isSet($_POST['indexLeft'])){

            $mostRec = "SELECT * FROM shortlink_analytics ORDER BY hitTime DESC LIMIT 11, 999999";

            $array=array();

            $loadRec = mysql_query($mostRec);

            while($row = mysql_fetch_array($loadRec))
            {
                $array[] = '<tr><td class="overflow"><a href = "info.php?link='. $row['shortlink'] .'">hud.ac/' . $row['shortlink'] . '</a> - ' . $row['hitTime'] . '</td></tr>';
            } 

            echo json_encode($array);

        }

?> 
```

这是什么原因造成的？我将如何解决它？它可能与在 AJAX 请求期间被调用的 PHP 有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:21:53.913

```
var obj = jQuery.parseJSON( lines ); 
```

这将产生一个数组。

```
... .append( obj + '<tr ... 
```

这会将*数组转换为*看起来非常像这样的字符串：`'...</tr>,<tr ...'`在添加新行之前。

如果你想在客户端连接字符串的元素（为什么不在服务器端呢？），你可以使用数组方法`join`：

```
... .append( obj.join('') + '<tr ... 
```

# mysql - 带有for循环的mysql标量函数

> ID：14197552
> 
> 赞同：0
> 
> 时间：2013-01-07T14:04:36.853
> 
> 标签：mysql, function, loops, for-loop, scalar

我有表'points_level'：

```
id | description | level
--------------------------
1  | noob        | 0
2  | rookie      | 50
3  | The boss    | 100 
```

我需要构建一个函数，以整数形式返回关卡的 id，例如：

```
select calc_level(12)
result: 1

select calc_level(90)
result: 2

select calc_level(300)
result: 3

select calc_level(100)
result: 3

select calc_level(-50)
result: 1 
```

我需要在 points_level 表中添加一些级别（在不久的将来），所以我不应该通过一些简单的“CASE WHEN”来计算结果，我会在 for 循环中考虑“CASE WHEN”，我找到了一些 SSQL 的示例但对于 MYSQL 来说什么都没有，我不知道创建这种函数的 MYSQL 语法:(

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:11:48.343

该算法相对简单 - 您需要提供的点大于或等于的 id `level`：

```
SELECT id
FROM points_level
WHERE 
  (<points_input> >= level)
  -- For negative input, return the lowest level
  OR (<points_input> < 0 AND level <= 0)
ORDER BY level DESC LIMIT 1 
```

[http://sqlfiddle.com/#!2/07601/4](http://sqlfiddle.com/#!2/07601/4)

查看[MySQL`CREATE FUNCTION`语法](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)以了解将其包装在函数中的正确方法（如果您觉得确实需要它）。

```
CREATE FUNCTION calc_level (in_points INT)
RETURNS INT
BEGIN
    DECLARE id_out INT;
    SET id_out = (
      SELECT id
      FROM points_level
      WHERE
        in_points >= level 
        OR (in_points < 0 AND level <= 0)
      ORDER BY level DESC LIMIT 1
    );
    RETURN id_out;
END 
```

# objective-c - iOS5 中的 GCD 崩溃

> ID：14197555
> 
> 赞同：0
> 
> 时间：2013-01-07T14:04:48.200
> 
> 标签：objective-c, ios, grand-central-dispatch

我正在开发一个静态库。我正在使用来自[这里](https://github.com/seancook/TWReverseAuthExample)的源代码在库中使用反向身份验证。在这个库中，以下内容在 iOS5 中崩溃，但在 iOS6 中运行良好。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) 
```

如果我们如下更改该行，它在所有操作系统版本中都可以正常工作。

```
dispatch_async(dispatch_get_main_queue() 
```

这种改变会在所有情况下都有效还是会产生任何问题？请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:46:56.120

如果不能看到您的代码就很难判断，但这听起来就像您正在向在该块之前创建的对象发送一条没有 GCD 块的消息，并且该对象在该块执行时不再存在。我建议将其设置为保留它的属性，这样 ARC 就不会收集它。

iOS版本之间的差异可能是由于模拟器和设备之间的差异（你说你在设备上运行iOS 6版本，在模拟器上运行5）。

# php - WORDPRESS：自定义字段 = 列表？

> ID：14197556
> 
> 赞同：-1
> 
> 时间：2013-01-07T14:04:58.570
> 
> 标签：php, wordpress

我目前正在进行一个基于 Wordpress 的项目。在这个项目中，我想要某种类型的帖子，假设帖子类型是“大学”，有一个特定的字段来包含一个列表或列表项。比如：某事1、某事2、某事3、某事4等。

我在任何插件或任何东西中都没有找到任何相关内容。自定义字段没有让我选择制作列表项或列表，只有复选框或单选按钮。

我想要可以在 a 中使用的东西：

```
<ul>
    <li>Something</li>
    <li>Something</li>
    <li>Something</li>
    <li>Something</li>
</ul> 
```

如果绝对没有解决方案，那么我想我必须自己用 PHP 编写代码，但如果我可以跳过那部分，那就太棒了！

谢谢！

尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:32:54.383

您可以使用 ACF 插件 www.advancedcustomfields.com

然后添加 snap 重复[http://www.advancedcustomfields.com/add-ons/repeater-field/](http://www.advancedcustomfields.com/add-ons/repeater-field/)

# java - Gson：无法解析日期

> ID：14197557
> 
> 赞同：2
> 
> 时间：2013-01-07T14:05:08.387
> 
> 标签：java, json, gson

我的 json 输入看起来像：

```
{ user: "sample-user", date : 1225864800 } 
```

我的 DateDeserializer 类是：

```
private class DateDeserializer implements JsonDeserializer<Date>
{
    public Date deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
        throws JsonParseException
    {
        System.out.println("Deserializer...");
        return new Date(json.getAsJsonPrimitive().getAsLong());
    }
}

GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(Date.class, new DateDeserializer());
gson.fromJson(new FileReader("input.json"), MyType.class); 
```

即使在设置完所有内容后，我也会得到

```
java.text.ParseException: Unparseable Date: "1225864800" 
```

我在这里做错什么了吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:31:54.147

您正在尝试将整个 Json 结构反序列化为日期，而不仅仅是日期字段。你需要类似的东西：

```
 User user = jsonElement.getAsJsonObject().get( "user" ).getAsString();
  Date date = new Date(jsonElement.getAsJsonObject().get( "date" ).getAsLong()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T23:00:29.343

您可以为整个`MyType`班级编写一个适配器，以便您可以在其他地方（如果有）保留标准日期反序列化，并将您的特定反序列化限制在`MyType`.

为了更好地解释我的意思，这是您可以复制&粘贴&运行的代码：

```
package stackoverflow.questions.q14197557;

import java.lang.reflect.Type;
import java.util.Date;

import com.google.gson.*;

public class Q14197557 {

    public static class MyType {

        String user;
        Date date;
        @Override
        public String toString() {
            return "MySample [user=" + user + ", date=" + date + "]";
        }

    }

    public static class MySampleDeserializer implements JsonDeserializer<MyType> {
        public MyType deserialize(JsonElement json, Type typeOfT,
                JsonDeserializationContext context) throws JsonParseException {

           if (json == null)
               return null;
           else {
               MyType s = new MyType();
               s.user = json.getAsJsonObject().get("user").getAsString();
               s.date = new Date(json.getAsJsonObject().get("date").getAsLong());
               return s;

           }

        }
    }

    public static void main(String[] args) {

        String json = "{ user: \"sample-user\", date : 1225864800 }";
        GsonBuilder gsonBuilder = new GsonBuilder();
        gsonBuilder.registerTypeAdapter(MyType.class, new MySampleDeserializer());
        MyType s = gsonBuilder.create().fromJson(json, MyType.class);

        System.out.println("My Type: " + s);
    }

} 
```

# sql - 出现所有数据库表字段名称的问题

> ID：14197560
> 
> 赞同：-1
> 
> 时间：2013-01-07T14:05:12.680
> 
> 标签：sql, sql-server

我有这段代码，我使用它来显示数据库表的所有名称。

它曾经可以工作......但突然它不会出现任何东西......你能看看吗？我正在使用 SQL。

```
$section = "SELECT * FROM forma";
$res = odbc_exec($connection, $section) or die(odbc_error());   
    $firstrow = false;
while ($row = odbc_fetch_array($res)){
    if (!$firstrow) {
        foreach ($row as $column => $value) {
            echo "<label> " . $column . "</label>";
        echo "<input type='checkbox' name='data[]' value='" . $column . "' /><br/><br/>"; 
        }
$firstrow = true;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:40:57.473

这是检索表的列名的一种相当讨厌的方式。它所做的是读取表中的所有数据，忽略结果集并仅将其用于列名。然而，发生的事情是桌子是空的，所以根本没有返回任何东西。

您需要修改查询以查看元数据而不是表本身。您将需要对其进行返工。此 SQL 将为您检索该表的列名...

```
Select Columns.Name
  From Sys.Columns
 Where Object_Name(Columns.Object_id) = 'forma'
 Order By Columns.Column_Id; 
```

之后，您将需要重新调整您的代码以利用它。

# salesforce - 限制用户在 salesforce 的“订单”（已关闭）阶段直接创建新机会

> ID：14197562
> 
> 赞同：1
> 
> 时间：2013-01-07T14:05:13.957
> 
> 标签：salesforce

我坚持创建一个验证规则，我想限制我的用户直接在“订单”（已关闭）阶段创建新机会。我们确实有一个当前正在运行的验证规则，它限制用户将机会阶段更改为订单（从任何其他阶段）（只有某些特定用户可以将状态更改为订单）。

看起来当他们直接在舞台上创建一个新的 opp 作为 'order/closed won' 时，他们能够这样做。我想限制这一点。任何帮助将不胜感激。谢谢，普里扬卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:58:33.837

我认为您的问题是 PRIORVALUE 仅适用于更新。以下公式可能有效：

```
OR(<current_rule>, AND(ISNEW(), ISPICKVAL(StageName, 'Order'))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:52:03.537

您可以使用现有规则或创建新规则来检查记录是否是新的 (ISNEW())，并且绝不允许使用“订单/已关闭赢”阶段创建新记录。

# selenium - 等待在 selenium webdriver 中不起作用

> ID：14197579
> 
> 赞同：0
> 
> 时间：2013-01-07T14:06:14.323
> 
> 标签：selenium, selenium-webdriver

我需要有关 Selenium webdriver 中的等待功能的帮助。
我有以下代码等待“Progressing Pop up”消失。它似乎只等待几秒钟并终止脚本。请让我知道其他选择是什么？

```
public static void ProcessingData() throws Exception {
    WebDriverWait wait1 = new WebDriverWait( driver , 180 ); 

    wait1.until(ExpectedConditions.invisibilityOfElementLocated(By.xpath("//div[@class='dijitDialogPaneContent']/div/p/b[contains(text()='Processing ...']")));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:10:51.487

我会仔细看看你的 xpath 选择器......你正在提供

`...b[contains(text()='Processing ...']`

如果您知道文本等于处理，那么您应该使用

`...b[text()='Processing ...']`.

如果您知道文本包含，`Processing ...`那么您应该使用，

`...b[contains(text(), 'Processing ...']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:18:08.340

您将超时设置`180`为**180 毫秒**。你的意思可能是 180**秒**？所以使用`180000`.

# linux - 搜索和存储文件的特定部分

> ID：14197581
> 
> 赞同：0
> 
> 时间：2013-01-07T14:06:44.187
> 
> 标签：linux, string, file, shell, search

我在搜索文件的特定部分并将其存储到 bash shell 中的变量中时遇到问题。

这是我的文件的一个示例：

```
From root@machine2.com  Mon Jan  7 16:56:50 2013
Return-Path: <root@machine2.com>
X-Original-To: smsto+9121403571@machine2.com
Delivered-To: smsto+9121403571@machine2.com
Received: by machine2.com (Postfix, from userid 0)
        id 43C191A1ECE; Mon,  7 Jan 2013 16:56:50 +0330 (IRST)
Date: Mon, 07 Jan 2013 16:56:50 +0330
To: smsto+9121403571@machine2.com
Subject: =?us-ascii?Q?Testing\=08?=
User-Agent: Heirloom mailx 12.5 7/5/10
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-Id: <20130107132650.43C191A1ECE@machine2.com>
From: root@machine2.com (root)

My note ..
blah blah ... 
```

我需要做的是将其中一些字段存储到变量中（参数如 FROM、SUBJECT 和 EMAIL BODY）

对于 FROM 和 SUBJECT 字段，搜索和获取数据很容易。但是对于 EMAIL BODY，如您所见，没有任何标签可以搜索它......所以我在想获取电子邮件正文的一种可能方法是搜索 FROM 标签，然后使用它的行号从中获取 EMAIL BODY文件末尾的下一行。

不幸的是，我不太熟悉 linux 命令来做这样的事情。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:18:41.000

您可以使用`sed`从空白行打印到文件末尾：

```
$ sed -n '/^\s*$/,$p' file

My note ..
blah blah ...

# Command substitution to store into a variable  
$ body=$(sed -n '/^\s*$/,$p' file)

$ echo $body
My note .. blah blah ...

# Remember to quote variables to respect newlines
$ echo "$body"

My note ..
blah blah ... 
```

如果您不想包含第一个空行，请使用：

```
$ sed -n '/^\s*$/,$ {/^.*[^ ]\+.*/,$p}' file 
```

或者去掉正文中的所有空行：

```
$ sed -n '/^\s*$/,$ {/^.*[^ ]\+.*/p}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:17:11.247

解决该问题的另一种方法是查找第一个空行（它出现在您所说的“发件人：”行之后）并在此之后打印所有内容。您可以使用`awk`并设置空记录分隔符来执行此操作。例如：

```
BODY=$(awk 'NR>1' RS= file) 
```

但是，上述的优点/问题是空白行将被丢弃。如果这是不可取的，这是一个应该满足的方法：

```
BODY=$(awk 'i==1; /^$/ { i=1 }' file) 
```

然后：

```
echo "$BODY" 
```

结果：

```
My note ..
blah blah ... 
```

# javascript - 如何将导航变成大型菜单？

> ID：14197582
> 
> 赞同：-3
> 
> 时间：2013-01-07T14:06:47.140
> 
> 标签：javascript, jquery, css, menu, navigation

我对 JS/jQuery 没用，所以需要一些帮助将我的菜单变成浏览器兼容/响应式的大型菜单。我真的不想为此使用大型插件，因为我想要的非常简单，并且不想影响页面加载变得更糟。

在页面加载时，我只想看到“打开菜单”，单击“打开菜单”时，我想显示`ul#expanded`并隐藏“打开菜单”链接。然后，当单击“关闭菜单”时，我希望它再次隐藏`ul#expanded`并显示“打开菜单”。一点都不花哨。

我一直在玩jQuery `toggle`，但没有成功。我把我的 HTML/CSS 放在这里：http: [//jsfiddle.net/YrTMm/](http://jsfiddle.net/YrTMm/)

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:22:02.567

好吧，我会扔给你一根骨头，因为看起来你确实尝试了几件事。您可以通过附加单击处理程序并使用 jQuery`show()`和`hide()`方法轻松地做到这一点。

```
$(document).ready(function(){
    //Set up a quick reference to the element.
    var el = $("#expanded");
    //Hide the element by default.
    el.hide();
    //Add a click handler to the 'open' link.
    $("#open").click(function(){
        //Check if the expanded menu is visible.
        if(el.is(":visible")){
            //If it is, hide it.
            el.hide();
        }else{
            //If not, show it.
            el.show();
        }
    });
}); 
```

[工作 JSFiddle](http://jsfiddle.net/YrTMm/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:36:36.177

这是您可以完成此任务的另一种方法。（使用 css 和一点 jquery）

[http://jsfiddle.net/CSmg7/](http://jsfiddle.net/CSmg7/)

首先，您可以简化一些导航（是的，我知道您需要 UL 中的真实内容），此外，将锚点作为 ul 的直接子项是无效的，它应该包含在列表项中，或者在ul。您最好的选择可能是使用或作为您的菜单

```
<nav id="nav">
    <ul>
        <li>
          <a href="#" class="open toggleMenu">Open Menu</a><a href="#" class="closed toggleMenu">Close Menu</a>
            <ul>
                <li>something</li>
                <li>something</li>
            </ul>
        </li>
    </ul>
</nav> 
```

只需使用js向父级添加一个类：

```
$("#nav")
.on("click", ".toggleMenu", function(event){
 event.preventDefault();
 $(this)
  .parent()
   .toggleClass("open");
}); 
```

并添加一点 css 使您的 jquery 工作：

```
#nav li ul,
#nav li .toggleMenu.closed,
#nav li.open .toggleMenu.open{
display: none;
}
#nav li.open ul,
#nav li.open .toggleMenu.closed{
display: block; /*or whatever you need*/
} 
```

那么你可以有多个菜单，如果你需要的话，那就行了

# android - Android - 设置 ProgressDialog 的大小

> ID：14197583
> 
> 赞同：0
> 
> 时间：2013-01-07T14:06:49.127
> 
> 标签：android, android-layout, android-webview, android-dialog

我需要在加载 WebView 时显示 ProgressDialog，以便用户无法在后台看到页面加载。我只能让我的对话框显示为一个小框，我希望对话框填满操作栏下方的所有空间。

我怎样才能做到这一点？我已经使用了该方法`progressDialog.setProgressStyle()`，但没有任何运气。

如果还有其他更好的方法可以实现这一点，请告诉我。我的最终目标是让该应用程序的行为类似于 Facebook（原生）应用程序，在页面完成加载之前，“正在加载”指示器是可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:12:50.120

我自己解决了这个问题。我使用了不同的方法来达到相同的效果。我不确定这是否是最佳实践，但我的 webview 布局现在看起来像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <!-- WebView progress -->

    <LinearLayout
        android:id="@+id/webProgress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_gravity="center"
        android:gravity="center_horizontal"
        android:orientation="vertical"
        android:visibility="gone" >

        <ProgressBar
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="8dp" />

        <TextView
            android:id="@+id/login_status_message"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:text="Loading"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:visibility="visible" />

</LinearLayout> 
```

并显示和隐藏我使用的进度：

```
View webProgress = findViewById(R.id.webProgress); 
```

...

```
public void showWVProgress() {
    webProgress.setVisibility(View.VISIBLE);
    isWVProgressShowing = true;     
}

public void hideWVProgress() {
    webProgress.setVisibility(View.GONE);
    isWVProgressShowing = false;
} 
```

# android - 从android应用程序将数据保存到sql server中的数据库的步骤？

> ID：14197588
> 
> 赞同：1
> 
> 时间：2013-01-07T14:07:14.063
> 
> 标签：android, sql-server, database

我已经将我的数据库从 sql server 连接到我的 android 应用程序并获得输出，一切运行正常。我只需要注册页面的帮助，我想将已输入到编辑文本框中的数据保存到数据库但看不到得到正确的方法。非常感谢任何帮助或指导方针thanx :-D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:24:12.887

哦，忘了我的邮件上有一些文件:)。
这是一个小例子：
Java（android）：

```
nameValuePairs.add(new BasicNameValuePair("Username","%"));

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("location php file");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity(); 
```

php：

```
 mysql_query("INSERT INTO Persons (UserName) VALUES '".$_REQUEST['Username']."'"); 
```

我以为是这样的。您可能需要稍作更改，但您可以从这里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:09:52.513

看看 DBHelper 类，希望它能解决你的问题

# php - 当您可以将对象存储在数据库中时，将它们存储在内存中的意义何在？

> ID：14197593
> 
> 赞同：0
> 
> 时间：2013-01-07T14:07:35.573
> 
> 标签：php

对于我的基于 PHP 的作业，我相信我必须使用对象（包括集合类、集合迭代器等项目）以及 MySQL 数据库。

我的问题是，为什么我需要将项目创建为对象，将它们存储在数据库中，然后在从数据库中拉出时再次将它们创建为对象，而我可以直接将项目放入和取出数据库并使用它们我需要什么？

或者也许更好的措辞，如果有的话，将对象存储在 PHP 内存中（无论 PHP 在哪里存储东西）以及将它们存储在数据库中而不是仅仅将它们存储在数据库中会有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:11:18.320

将数据作为对象存储在内存中只是数据库中数据的一种表示形式——两者并不相同。内存中的 PHP 对象根本不是持久的，你的 MySQL 存储是。让它们“在内存中”只是为了“简单”的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:09:33.870

从数据库（或其他基于磁盘的存储）存储和检索对象与从内存中存储和检索相比具有相当大的开销。尝试创建一个简单的基准测试应用程序，您会注意到不同之处。

# json - 使用 JSON 数据在 d3 中绘制频率图

> ID：14197594
> 
> 赞同：1
> 
> 时间：2013-01-07T14:07:54.677
> 
> 标签：json, graph, d3.js, frequency-distribution

我正在 d3 中做一个项目，对于如何绘制频率图来绘制推文，我束手无策。所以，基本上，我有一个 JSON 文件，它的格式是这样的

```
{
    "text": "这里有一些文字",
    "time": "这里的时间戳",
    "timezone": "这里的时区",
    “retweet_count”：一些数字，
    “hashtags”：“这里有一些文字”
}

```

所以，现在我需要在 d3 中绘制一个图表，显示特定时间段内的推文数量。例如，在日期 X 和日期 Y 之间，图表显示每天有多少条推文。

有人可以帮我解决这个问题吗？我对d3真的很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:54:14.940

您应该能够使用[d3 时间尺度](https://github.com/mbostock/d3/wiki/Time-Scales)和[间隔](https://github.com/mbostock/d3/wiki/Time-Intervals)来为您进行分箱。就像是：

```
var data= [
  {time: 'Jan. 1, 2012 13:00', name:"test", value:2},
  {time: 'Jan. 2, 2012 9:00', name:"test", value:2},
  {time: 'Jan. 3, 2012 14:00', name:"test", value:2},
  {time: 'Jan. 1, 2012 12:30', name:"test", value:2},
  {time: 'Jan. 3, 2012 1:00', name:"test", value:2},
  {time: 'Jan. 3, 2012 1:10', name:"test", value:2},
  {time: 'Jan. 3, 2012 1:20', name:"test", value:2},
  {time: 'Jan. 3, 2012 2:00', name:"test", value:2},
  {time: 'Jan. 1, 2012 3:00', name:"test", value:2},
];

// Get the date range from the data - could also be hardcoded
var dateRange = d3.extent(data, function(d) { return new Date(d.time); });
console.log("Data range", dateRange); // This will output your data's time range

// This will compute time bins
var binner = d3.time.scale();

// Pick the interval I want to bin on
var interval = d3.time.day; // Use hour, or minute, etc.      

// I will compute the number of the time intervals I want  
var allIntervals = interval.range(interval.floor(dateRange[0]), interval.ceil(dateRange[1]));
console.log("Intervals", allIntervals); // This will output an array of all the days/hours/whatever between min and max date

// Input domain mapped to output range
binner.domain([allIntervals[0], allIntervals[allIntervals.length - 1]]);
binner.range([0,allIntervals.length - 1]);

// Make sure we only output integers - important because we will fill an array
binner.interpolate(d3.interpolateRound);

// Empty histogram
var hist = [];
for(var i=0; i < allIntervals.length; i++) hist[i] = 0;

data.forEach(function(d) {
  // Compute the hour index
  var tid = binner(interval.floor(new Date(d.time)));
  console.log("Map " + d.time + " to " + tid);

  if(!hist[tid]) {
    hist[tid] = 1;
  } 
  else { 
    hist[tid]++;
  }
});

// Here is the histogram.
console.log("Hist:",hist); 
```

我把它和一个非常基本的直方图放在[一起](http://jsfiddle.net/PcGYx/)

请注意，您可能可以用一些毫秒数学替换 interval.range(...) 调用来提高性能，但是如果您想做工具提示，那么拥有所有值可能会很有用。

# zurb-foundation - 像 zurb 基础的基础文档网站中的垂直选项卡？

> ID：14197599
> 
> 赞同：0
> 
> 时间：2013-01-07T14:08:09.377
> 
> 标签：zurb-foundation

如何像我们在 zurb 基础文档网站中那样制作垂直标签：http://foundation.zurb.com/docs/javascripts.php[在](http://foundation.zurb.com/docs/javascripts.php)单击项目时我们有标签和子菜单，例如“javascript”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:25:51.847

这是他们页面中的代码，它只是主导航列表元素之一中的无序列表

```
<ul class="tabs vertical hide-on-phones">
  <li><a href="index.php">Getting Started</a></li>
  <li><a href="compass.php">Compass</a></li>
  <li><a href="rails.php">Rails</a></li>
  <li><a href="sass.php">Sass</a></li>
  <li><a href="quickstart.php">CSS Quickstart</a></li>
  <li class="active"><a href="components.php">Components</a>
    <ul>
      <li><a href="components.php">Overview</a></li>
      <li><a href="grid.php">The Grid</a></li>
      <li><a href="media-queries.php">Media Queries</a></li>
      <li><a href="typography.php">Typography</a></li>
      <li><a href="buttons.php">Buttons</a></li>
      <li><a href="forms.php">Forms</a></li>
      <li class="active"><a href="navigation.php">Navigation</a></li>
      <li><a href="tabs.php">Tabs</a></li>
      <li><a href="elements.php">Elements</a></li>
    </ul>
  </li>
  <li><a href="javascripts.php">Javascripts</a></li>
  <li><a href="support.php">Support</a></li>
</ul> 
```

# php - 成功 AJAX 调用后更新元素

> ID：14197615
> 
> 赞同：0
> 
> 时间：2013-01-07T14:08:43.403
> 
> 标签：php, javascript, jquery, ajax

**问题**

AJAX 调用成功后，我想更新页面上的元素。但是，它没有被更新。

**代码 [Javascript]**

```
$(function()
{
    $(".upvote").click(function()
    {
        var id = $(this).parent().find("input").val();
        $.ajax(
        {
            type: "GET",
            url: "process.php",
            data: "id=" + id +"&f=u",

            success: function(results)
            {
                $(this).parent().parent().find("span.ups").empty().append("Upvotes: " + results);
                console.log(results);
            }
        });
        return false;
    });
}); 
```

**代码 [HTML]**

此代码由 PHP 生成。

```
<div class="post">
    <h2>$title</h2>
    <p>$body</p>
    <span class="ups">Upvotes: $upvotes</span>
    <span class="downs">Downvotes: $downvotes</span>
    <span class="total">Total votes: $t_votes</span>
    <div id="links">
        <input type="hidden" id="id" name="id" value="$id">
        <a href="process.php?id=$id&f=u" class="upvote"><button>Upvote!</button></a>
        <a href="process.php?id=$id&f=d" class="downvote"><button>Downvote!</button></a>
    </div>
</div> 
```

**由 PHP 返回**

更新的赞成票数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T14:12:07.100

`this`不是你想的那样。它的值取决于它出现的函数的调用方式（并且在不同的函数中会改变）。

我不知道它在 jQuery 成功回调中会是什么，但它不会是 HTML 元素。

如果您希望它成为被点击的元素，那么您需要在`this`该元素时存储它。

```
$(".upvote").click(function() {
    var clicked_element = this; 
```

然后您可以稍后使用该变量：

```
$(clicked_element).parent().etc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T14:12:20.533

你不能使用`this`这样的关键字。

```
var that = null;

$(function()
{
    $(".upvote").click(function()
    {
        var id = $(this).parent().find("input").val();
        that = $(this);
        $.ajax(
        {
            type: "GET",
            url: "process.php",
            data: "id=" + id +"&f=u",

            success: function(results)
            {
                that.parent().parent().find("span.ups").empty().append("Upvotes: " + results);
                console.log(results);
            }
        });
        return false;
    });
}); 
```

我没有对此进行测试，但它应该可以工作。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T14:12:18.233

`$(this)`回调内部`success`不是您可能认为的元素。改为缓存父对象并从那里遍历可能会更好：

```
var $post = $('.post');

//... $.ajax etc

success: function() {
    $post.find('.ups').etc //... 
```

# iphone - 我可以从 iphone 本机函数调用 javascript 函数吗？

> ID：14197619
> 
> 赞同：0
> 
> 时间：2013-01-07T14:09:21.467
> 
> 标签：iphone, ios, cordova

我正在使用 phonegap/cordova 开发 iPhone/iPad 应用程序。

现在我必须集成一些支持 xcode 的 SDK 的设备。我面临的问题是我想从我的本机函数调用 javascript 函数。我知道如何从 javascript 调用本机功能，但反之亦然。

我在互联网上搜索了很多，但他们都在描述如何使用 webview 来做到这一点。我不想使用 webview，因为我不熟悉 Objective-c 编码，而且我必须将我的 HTMl 代码更改为 webview，因为我的代码是通过使用 cordova 插件在 HTML5 和 javascript 中完全开发的。

如果还有其他方法可用，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:46:56.417

您可以像这样从本机代码调用 javascript 函数：

```
 [self.webview stringByEvaluatingJavaScriptFromString:@"myfunc();"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T02:22:33.280

老问题，但我第一次点击谷歌。所以我试一试。你必须打电话`self.commandDelegate evalJS`。其他方法如`writeJavascript`已弃用。

在您的插件代码调用中

```
[self.commandDelegate evalJs:@"console.log('Greetings from Native');"]; 
```

# python - 向 inlineformset_factory 添加额外参数

> ID：14197624
> 
> 赞同：0
> 
> 时间：2013-01-07T14:09:31.713
> 
> 标签：python, django

经过几个小时的搜索，我必须承认我被打败了。

我已经阅读了 Django 文档，但我真的找不到解决问题的方法。

考虑以下代码行：

```
EmploymentFormSet = inlineformset_factory(Profile, Employment, form=EmploymentForm, extra=3) 
```

此代码位于基于类的视图中，该视图继承自`UpdateView`该方法并进一步位于该方法中`get_context_data(self, *args, **kwargs):`

这非常简单，因为 inlineformset_factory 创建了一个就业表单集。

现在考虑这个

```
queryset = Employment.objects.filter(profile__pk=self.kwargs['pk']).values()
context['emp_formset'] = EmploymentFormSet(prefix='emp_form', initial=queryset, auto_id=True) 
```

我认为通过提供`initial=queryset`仅适用于未绑定实例 IIRC 的 ，它将填充我的表单集，其中包含查询集所包含的数量。

因此，在我的情况下，查询集将返回 4 `Employments`，但是在使用该`extra`参数时，我正在构建的表单集仅填充了该参数定义的数量，在我的示例中只有 3 个，因为我只定义了 3 个附加项。增加额外的将逐渐填充表单。

我试过子类化，`BaseInlineFormSet`但我还没有真正突破这堵墙。

我的问题是我将如何使用查询集包含的尽可能多的表单来填充表单集，我并不是真的想要一个精确的解决方案，而是更多的指向正确方向的指针！:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:23:44.483

我通过构造这个方法解决了它

```
def set_extra_forms(extra_forms, **kwargs):
    EmploymentFormSet = inlineformset_factory(Profile, Employment, form=EmploymentForm, extra=extra_forms)
    return EmploymentFormSet(**kwargs) 
```

现在我确实相信这是要走的路，但我必须重构代码以使其现在更具动态性，它只连接到一个类和一个类，但它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-14T17:56:32.523

# 在视图中定义表单集

```
def employment_view(request, pk=None):
  #Define extra forms variable
  extra_forms = Employment.objects.filter(profile__pk=self.kwargs['pk']).count()
  #Define formset inside the view function
  EmploymentFormSet = inlineformset_factory(Profile, Employment, form=EmploymentForm, extra=extra_forms)
  #Use this in context
  context['emp_formset'] = EmploymentFormSet() 
```

# c# - 通过AJAX读取在C#客户端选择的CSV文件？

> ID：14197625
> 
> 赞同：1
> 
> 时间：2013-01-07T14:09:32.813
> 
> 标签：c#, jquery, asp.net, ajax, jqgrid-asp.net

我有一个要求，用户将在本地选择一个 CSV 文件，我必须读取文件内容并将它们转储到 JQGrid 上。是的，浏览器是 IE :)..我应该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:12:16.107

实际上，您可以使用所有新的 HTML5 功能来做到这一点，所以如果您要使用 IE9+

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

看一下这个。

基本上，您需要 FileReader 组件 ( `FileReader.readAsText(Blob|File, opt_encoding)`)，然后只需使用正则表达式或任何让您的山羊漂浮的东西来解析所有内容。

如果您确实需要在客户端和较旧的 IE 中执行此操作，也许 ActiveX 是一个解决方案：

[ActiveX 文件系统对象](http://msdn.microsoft.com/en-us/library/z9ty6h50%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:12:00.823

除非您不能使用 HTML 5（较低版本的 ie 等）：

Javascript 无法直接访问文件系统，因此您将不得不使用文件上传标签并在服务器上对其进行解析：[http ://webdesign.about.com/od/htmltags/p/input-file-tag .htm](http://webdesign.about.com/od/htmltags/p/input-file-tag.htm)

然后，您可以使用 AJAX 查询内容并将其拉回网格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:21:03.347

我会在服务器端做。

[http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)

(FileUploadControl.OpenFile)

# rtc - 为什么接受变更集时找不到所有变更集？

> ID：14197628
> 
> 赞同：1
> 
> 时间：2013-01-07T14:09:45.613
> 
> 标签：rtc

有时，当我接受我更改设置时，我会收到以下消息：

![在此处输入图像描述](../Images/7a90f3c890f05b0c62cea391c8f5d434.png)

为了解决这个问题，我将更改作为补丁应用，然后“合并到工作区”更改为什么找不到所有更改集？我的代码是否存在与流目标不同步的危险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:22:04.443

危险不是不同步，而是结果代码的*完整性*，一旦应用了补丁：
您正在接受基于未交付的*其他更改集的更改集。*
不能保证它有效。

如[该线程](https://jazz.net/forum/questions/28853/issue-accepting-change-sets-from-flow-target)中所述：

> 在 S1 中，假设有两个更改集修改了 file `foo.java`:`CS-23`和`CS-35`.
> 你有要求`CS-35`，但没有`CS-23`。
> 但是文件`foo.java`中的状态`CS-35`包含来自...的更改所以除非您也有（即“导致此更改集的更改集”），否则您`CS-23`无法获得。`CS-35``CS-23`

开发人员 A 可以*不*交付他/她的所有变更集，只要他/她交付*所有*变更集到某一点。

在部分交付的情况下出现警告（开发人员交付`B`，基于变更集`A`，但不*交付*变更集`A`）

这可能不是问题，如果[`git cherry-pick`](https://stackoverflow.com/questions/881092/how-to-merge-a-specific-commit-in-git/881112#881112)两个变更集之间没有功能依赖（类似于 ）（例如，如果`B`不依赖代码`A`进行编译）。

# java - 在 Hibernate Search 中建立索引时出错（在事务完成之前）

> ID：14197633
> 
> 赞同：2
> 
> 时间：2013-01-07T14:10:08.580
> 
> 标签：java, spring-mvc, transactions, spring-batch, hibernate-search

我厌倦了解决这个问题所以如果有人能建议我哪里错了，我将不胜感激。

问题是我在我的 Spring MVC 项目中使用[Spring-Batch](http://static.springsource.org/spring-batch/)和[Hibernate Full-Text Search](http://www.hibernate.org/subprojects/search.html)。所以从批处理作业 Tasklet 我调用以下代码：

```
 A a=aDao.merge(a);
 b.setA(a);
 bDao.save(b); 
```

在对这些实体进行保存更新时，我遇到了一个异常，堆栈跟踪如下：

```
org.springframework.orm.hibernate3.HibernateSystemException: Error while indexing in Hibernate Search (before transaction completion); nested exception is org.hibernate.HibernateException: Error while indexing in Hibernate Search (before transaction completion)
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:690)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:147)
    at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:264)
    at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:76)
    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:367)
    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:214)
    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:143)
    at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:250)
    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:195)
    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:135)
    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:61)
    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:60)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:144)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:124)
    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:135)
    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:281)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:120)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.HibernateException: Error while indexing in Hibernate Search (before transaction completion)
    at org.hibernate.search.backend.impl.EventSourceTransactionContext$DelegateToSynchronizationOnBeforeTx.doBeforeTransactionCompletion(EventSourceTransactionContext.java:175)
    at org.hibernate.engine.ActionQueue$BeforeTransactionCompletionProcessQueue.beforeTransactionCompletion(ActionQueue.java:543)
    at org.hibernate.engine.ActionQueue.beforeTransactionCompletion(ActionQueue.java:216)
    at org.hibernate.impl.SessionImpl.beforeTransactionCompletion(SessionImpl.java:571)
    at org.hibernate.jdbc.JDBCContext.beforeTransactionCompletion(JDBCContext.java:250)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:138)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    ... 21 more
Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
    at org.hibernate.search.util.HibernateHelper.unproxy(HibernateHelper.java:62)
    at org.hibernate.search.engine.DocumentBuilderIndexedEntity.buildDocumentFields(DocumentBuilderIndexedEntity.java:394)
    at org.hibernate.search.engine.DocumentBuilderIndexedEntity.buildDocumentFields(DocumentBuilderIndexedEntity.java:481)
    at org.hibernate.search.engine.DocumentBuilderIndexedEntity.buildDocumentFields(DocumentBuilderIndexedEntity.java:481)
    at org.hibernate.search.engine.DocumentBuilderIndexedEntity.getDocument(DocumentBuilderIndexedEntity.java:379)
    at org.hibernate.search.engine.DocumentBuilderIndexedEntity.createAddWork(DocumentBuilderIndexedEntity.java:317)
    at org.hibernate.search.engine.DocumentBuilderIndexedEntity.addWorkToQueue(DocumentBuilderIndexedEntity.java:295)
    at org.hibernate.search.engine.WorkPlan$PerEntityWork.enqueueLuceneWork(WorkPlan.java:445)
    at org.hibernate.search.engine.WorkPlan$PerClassWork.enqueueLuceneWork(WorkPlan.java:246)
    at org.hibernate.search.engine.WorkPlan.getPlannedLuceneWork(WorkPlan.java:150)
    at org.hibernate.search.backend.WorkQueue.prepareWorkPlan(WorkQueue.java:134)
    at org.hibernate.search.backend.impl.BatchedQueueingProcessor.prepareWorks(BatchedQueueingProcessor.java:124)
    at org.hibernate.search.backend.impl.PostTransactionWorkQueueSynchronization.beforeCompletion(PostTransactionWorkQueueSynchronization.java:89)
    at org.hibernate.search.backend.impl.EventSourceTransactionContext$DelegateToSynchronizationOnBeforeTx.doBeforeTransactionCompletion(EventSourceTransactionContext.java:172)
    ... 27 more 
```

我没有弄错。我正在使用`org.springframework.orm.hibernate3.HibernateTransactionManager`，我的 Spring 版本是 3.2 Hibernate 核心版本是 3.6 final。

注意：这个异常经常发生，但是当我创建一个新表或使用新数据库时，它就像魅力一样工作，所有修改/插入都在数据库中正确反映。有人可以解释一下这种行为还是我做了一些可疑的事情。

如果您需要更多详细信息，请告诉我。

谢谢你。

**代码更新：**

```
<batch:job-repository id="jobRepository"
                          data-source="myJNDI"
                          transaction-manager="transactionManager"
                          isolation-level-for-create="READ_COMMITTED"
                          max-varchar-length="2500"
                          lob-handler="defaultLobHandler"
    />

  <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="safeSessionFactory" />
    </bean> 
```

像这样，我在 applicationContext.xml 中为 Spring-Batch 配置事务管理器。我尝试通过手动提交事务手动打开和关闭会话，但异常保持不变。是的，我已将我的方法注释为 @Transactional。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T09:15:13.017

我发现问题的根本原因是[Spring 的声明式事务管理](http://docs.spring.io/spring/docs/2.0.8/reference/transaction.html#transaction-declarative)。Spring Batch in Action 参考：

> *   为您的批处理应用程序禁用 Spring 的声明性事务——不要使用 tx:annotation-driven 元素或任何与声明性事务管理相关的 XML 配置。
>     
>     
> *   如果声明性事务开启，请小心使用传播级别——如果您从 Spring Batch 作业调用事务类，由于传播级别，Spring 的事务传播可能会干扰 Spring Batch 事务。REQUIRES_NEW 传播级别通常会导致问题，因为应用程序代码在其自己的事务中运行，独立于 Spring Batch 事务。

以下是避免 Spring Batch 管理的事务和 Spring 管理的事务之间发生冲突的指南：

![交易图](../Images/c450519801d2c8557d8ada8226208b6f.png)

# apache-camel - Apache Camel JMS 到 MySql

> ID：14197644
> 
> 赞同：0
> 
> 时间：2013-01-07T14:10:57.773
> 
> 标签：apache-camel

每当 JMS 队列中有新条目时，我需要编写代码，我希望将该条目保留在 MySql 数据库中。我读到这可以使用 Apache Camel 项目。任何人都可以指出示例或与之相关的一些文档。

洛克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:01:18.220

是的，这很简单。至少 JMS 和数据库部分。

```
from("jms:queue:someQueue")
 .bean(SomeTransformerBean.class) // transform the message, custom code etc in 
 .to("sql:insert into FOO X VALUES(#)"); // need to enter some valid SQL statement here 
```

在这里阅读更多

[http://camel.apache.org/sql-component.html](http://camel.apache.org/sql-component.html)

在这里 [http://camel.apache.org/jms](http://camel.apache.org/jms)

# nservicebus - 将 FullControll 授予与当前主机相关的 MSMQ 队列

> ID：14197646
> 
> 赞同：0
> 
> 时间：2013-01-07T14:11:02.990
> 
> 标签：nservicebus

在我的组织中，我们正在使用 Microsoft TFS 部署我们的组件。NServiceBus 组件由 BuildPortal 部署为 Windows 服务。它通常创建自动化的 MSI 包并将其部署在目标服务器上。要部署 MSI 包，构建门户使用服务帐户（管理员/超级用户）。NServiceBusHost 不会使用相同的服务帐户运行，它会使用系统帐户或不同的服务帐户，该服务帐户在服务器上具有受限权限，并且该帐户不会是管理员组的一部分。

简而言之，Host /install 命令使用与实际 NServiceBusHost 执行不同的帐户运行。在安装过程中，所有必需的队列都由安装程序创建（通过使用 NServiceBus.Integration 配置文件）。现在，问题是，由于与原始服务帐户不同的帐户创建的队列，它会引发以下错误。

```
Message:Could not create queue error@xxxxxxx01 or check its existence. Processing will still continue. 
NServiceBus.Utils.MsmqUtilities.CreateQueueIfNecessary(:0) 
System.Messaging.MessageQueueException (0x80004005): Access to Message Queuing system is denied. 
at System.Messaging.MessageQueue.SetPermissions(AccessControlList dacl) 
at NServiceBus.Utils.MsmqUtilities.SetPermissionsForQueue(String queue, String account) 
at NServiceBus.Utils.MsmqUtilities.CreateQueueIfNecessary(Address address, String account) 
```

为了解决上述错误，我们尝试使用 INeedToInstallSomething。但是，没有关于如何使用或在 Install() 方法中使用什么的适当文档/示例。当我们调用**Configure.Instance.ForInstallationOn().Install()**时，安装程​​序没有按预期创建队列。我们想要的是，获取当前安装程序的依赖队列列表并设置类似这样的权限>> ***messageQueue.SetPermissions(serviceAccount, MessageQueueAccessRights.FullControl)***

这是否可以获取当前主机的所有依赖队列并仅在主机安装期间分配权限。

笔记：

*   我们暂时不想将此逻辑移到主机之外。是的，拥有一个简单的 PSS 可能有助于解决这个问题。
*   我们必须使用受限帐户来运行不能是管理员的主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:09:39.420

我会尝试其中一个`INeedToInstallInfrastructure<T>`并在那里设置权限，或者这可能就像使用`IWantToRunBeforeConfigurationIsFinalized`. 您可能需要后者，我不确定如果有什么顺序用于`INeedToInstallInfrastructure<T>`.

# xml - Apache Wink 可以忽略不可打印的 xml 字符吗？

> ID：14197647
> 
> 赞同：1
> 
> 时间：2013-01-07T14:11:03.647
> 
> 标签：xml, jaxb, control-characters, apache-wink

我的应用程序使用 Wink 和 JDK (1.6) 中内置的 JAXB 提供程序支持 REST API。有时我会收到包含控制字符的 PUT 请求。

就我的应用程序而言，控制字符构成了有效且有意义的输入。但是，应用程序抛出了一个臭名昭著的异常，说它无法消化这些字符：

```
Message: An invalid XML character (Unicode: 0x13) was found in the element content of the document.]
at org.apache.wink.common.internal.providers.entity.xml.JAXBXmlProvider.readFrom(JAXBXmlProvider.java:107)
at org.apache.wink.server.internal.registry.ServerInjectableFactory$EntityParam.getValue(ServerInjectableFactory.java:190)
at org.apache.wink.common.internal.registry.InjectableFactory.instantiate(InjectableFactory.java:67)
at org.apache.wink.server.internal.handlers.CreateInvocationParametersHandler.handleRequest 
```

可能没有办法告诉 JAXB 提供者忽略这些字符（因为在某些时候我将不得不解析 Xml，并且非法就是非法的......）。我怎样才能使这项工作？有没有办法指示 Rest 客户端在发送这些字符之前对其进行转义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:10:41.887

[XML 中不允许使用](http://www.w3.org/TR/2008/REC-xml-20081126/#charsets)控制字符，因此您的数据不是 XML。除了 Y 之外，它的问题*就像 X 一样*，很难定义一个 API，其中 Y 可以是个人认为应该是的任何东西。JAXB 不太可能容纳您。如果可以接受，您可以使用过滤器去除非法字符；否则，您将不得不对合法字符数据中的数据进行编码或转义（例如使用[Base64](http://en.wikipedia.org/wiki/Base64)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T15:45:57.827

有问题的字符不是“不可打印的 XML 字符”。它们是不可打印的非 XML 字符。

# hardware - 画半加器电路

> ID：14197648
> 
> 赞同：-2
> 
> 时间：2013-01-07T14:11:15.653
> 
> 标签：hardware, digital-logic

我正在使用加法器单元，特别是半加法器。

目前，我在数字作品中制定了标准的半加器单元（如下图所示）。

![在此处输入图像描述](../Images/7b6a5c88ead8621dd6f52a3184d36b36.png)

但是，我被要求使用选择的门来绘制半加器单元电路，例如 AND OR XOR NOT。

那么绘制半加器还有哪些其他方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:22:25.090

您可以重新分解 S 和 C 输出的布尔逻辑，例如

```
S = A^B
  = A.B'+A'.B
  = (A.B)'.(A'.B')'
  = (A.B+A'B')'

C = A.B
  = (A'+B')' 
```

然后使用上述任何重构表达式绘制电路。

# c# - XNA for WP7 和多点触控更新每一帧

> ID：14197651
> 
> 赞同：2
> 
> 时间：2013-01-07T14:11:36.893
> 
> 标签：c#, windows-phone-7, xna, xna-4.0, multi-touch

我在触摸/多点触控输入方面遇到问题。

我想在用户按下的任何地方（任务完成）绘制一个尺寸为 100x100 的小矩形，但我也希望它们在用户移动手指时移动（这不会在 atm 发生）。

除了不动的部分，我的行为也很奇怪，假设我先用拇指触摸，然后用中指触摸。每个手指下方出现两个立方体，但如果我移开我首先放置的手指（在这种情况下是拇指），我放置的第二个手指（中指）下方的立方体将消失，而我拇指所在的那个仍然存在。我想这个问题会在我得到它以在有运动时正确更新后自行解决。

这是绘制和更新片段。任何帮助表示赞赏：

```
protected override void Update(GameTime gameTime)
    {
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        this.Exit();

    TouchCollection touchLocations = TouchPanel.GetState();
    i = 0;

    foreach (TouchLocation touchLocation in touchLocations)
    {
        if (touchLocation.State == TouchLocationState.Pressed)
        {
            pos[i] = touchLocation.Position;
        }
        i++;
    }
    base.Update(gameTime);
}

protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    spriteBatch.Begin();
    for (j = 0; j < i; j++)
    {
        spriteBatch.Draw(whiteRectangle, new Rectangle(((int)pos[j].X - 50), ((int)pos[j].Y - 50), 100, 100), Color.Chocolate);
    }
    spriteBatch.End();
    base.Draw(gameTime);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:56:05.590

我在这方面有点晚了，但是这就是问题所在以及我如何解决它...

```
foreach (TouchLocation touchLocation in touchLocations)
{
    if (touchLocation.State == TouchLocationState.Pressed)
    {
        pos[i] = touchLocation.Position;
    }
    i++;
} 
```

我想当我写这部分代码时我很困（凌晨 2 点之后没有什么好事发生……甚至不是好的代码）我不知道为什么我要检查位置状态是否被按下……这就是为什么它没有'当我移动时不要移动......第一帧确实被按下了但是一旦你开始移动它它就是.Moved......总而言之，删除了它，它就像一个魅力......

```
foreach (TouchLocation touchLocation in touchLocations)
{
    pos[i] = touchLocation.Position;
    i++;
} 
```

总而言之，现在它的行为符合预期。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:07:37.640

假设您要将触摸位置与其位置相关联，我建议您使用字典。关键应该是 TouchLocation.Id

对于给定的交互，TouchLocation.Id 将保持不变。无法保证从一帧到另一帧的 TouchLocations 顺序相同，因此您必须使用它们的 ID 而不是它们在集合中出现的顺序。

# javascript - 了解 iframe 中的跨域问题

> ID：14197653
> 
> 赞同：9
> 
> 时间：2013-01-07T14:11:40.900
> 
> 标签：javascript, html, iframe

这个问题可能看起来很傻，但为了清楚起见，我需要理解这一点。

根据我的理解，跨域问题是当包含 IFRAME 的网页的域与在 IFRAME 中打开的网页的域不同时。

按照这种逻辑，IFRAME 中不应该打开任何东西。

当我在网页“top:9700”的 IFRAME 中嵌入网页“bottom:10700”时，出现错误。我无法看到 IFRAME 中的内容。错误是`Access denied in accessing property 'constructor'`

访问构造函数（_1.contructor）时出现错误

```
isc.A.Function=function isc_isA_Function(_1){
  if(_1==null) return false;
  if(isc.Browser.isIE&&typeof _1==this.$a7) return true;
  var _2=_1.constructor;
  if(_2&&_2.$k!=null){
    if(_2.$k!=1)return false;
    if(_2===Function)return true
  } 
```

当底部的主页在顶部包含的 iframe 中打开时运行此脚本。

有什么办法，我可以完成这项工作。我的意思是我可以将两个域设置为相同。我无权访问远程站点的脚本。

在跨域场景重新渲染框架后调整框架大小。如果不是，那么肯定是远程站点正在尝试访问 IFRAME 元素。我该如何调试呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T14:26:04.100

跨域问题是关于 iframe 之间的通信。您始终可以嵌入任何 iframe，但如果域不同，iframe 无法相互交互，例如执行 JS、修改 DOM 等。

HTML5 提供了重新启用跨域 iframe 交互的特定功能的[`sandbox`属性。](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe#attr-sandbox)小心，这可能很危险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T14:25:50.857

在 abc.com 上托管的 iframe 中加载页面 xyz.com 是正常行为。但是，您不能通过父 abc.com 的代码更改任何内容或访问其内容。

希望这有帮助。

# matlab - 在 imagesc 上使用透明度值

> ID：14197656
> 
> 赞同：5
> 
> 时间：2013-01-07T14:11:50.870
> 
> 标签：matlab, plot

当我在使用 imagesc (Matlab R2012a) 创建的图像上绘制透明度 < 1 的补丁时，我得到的东西看起来像很多“刻度标签”，或者图像上沿轴的数字。以下代码重现了该问题：

```
imagesc(rand(10,20))
hold on
patch([5 5 15 15],[3 7 7 3],'r','facealpha',.5) 
```

这是一个错误，还是有办法正确地做到这一点？

**编辑** 如果我设置数字消失`set(gca,'xtick',[],'ytick',[])`，所以它确实与刻度有关。我当然更喜欢在我的身材上有刻度。

![上面有数字的图像](../Images/603588f24ff918db47028bc04c5f9995.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:42:29.223

这种图形工件通常与渲染器有关。特别是 OpenGL 渲染器似乎在 Matlab 版本、显卡和操作系统的某些组合上搞砸了。

标准的解决方法是[在图形属性中将渲染器从OpenGL更改为zBuffer](http://www.mathworks.com/help/matlab/ref/figure_props.html)，这是通过命令实现的

```
set(gcf,'renderer','zbuffer') 
```

不幸的是，OpenGL 是唯一支持透明度的渲染器，所以这个解决方案对你不起作用。

作为一种可能的替代解决方法，您可以通过以下命令从硬件切换到软件 OpenGL 渲染器

```
opengl software 
```

查看[opengl 的帮助](http://www.mathworks.com/help/matlab/ref/opengl.html)以了解如何在 *nix 环境中进行设置。

# c# - 如何在 keydown 事件后在文本框中按 enter 删除虚拟键盘

> ID：14197657
> 
> 赞同：0
> 
> 时间：2013-01-07T14:11:51.117
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

```
private void tbox_KeyDown_1(object sender, System.Windows.Input.KeyEventArgs e)
{
    if (e.Key == Key.Enter)
        //do something

} 
```

我想要的是在名为 tbox 的文本框中的上述 keydownevent 之后。当我单击 Enter 按钮时，我希望手机屏幕上可见的虚拟键盘消失。这怎么可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:28:07.970

您只需要将焦点设置到页面而不是文本框。

```
private void tbox_KeyDown_1(object sender, System.Windows.Input.KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        this.Focus();
    }
} 
```

资料来源： http: [//www.jstawski.com/archive/2011/02/16/programmatically-hiding-the-keyboard-in-windows-phone-7-wp7.aspx](http://www.jstawski.com/archive/2011/02/16/programmatically-hiding-the-keyboard-in-windows-phone-7-wp7.aspx)

# facebook - 谁在 Facebook 上与你聊天最多的应用程序？

> ID：14197660
> 
> 赞同：1
> 
> 时间：2013-01-07T14:12:02.457
> 
> 标签：facebook, facebook-graph-api, facebook-chat

Facebook上有一个应用程序可以告诉用户他与谁聊天最多。如何通过 facebook graph api 访问消息数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:42:51.590

好的，问题已解决

我在 FQL 中实现了“SELECT message_count FROM thread WHERE folder_id = 0”

我的应用程序现在正在运行。

# xml - 嵌套的 XSD 定义

> ID：14197662
> 
> 赞同：1
> 
> 时间：2013-01-07T14:12:05.960
> 
> 标签：xml, xsd

我在嵌套 XSD 时遇到问题。我有我的文档结构的 MAIN 文件，它具有相同的 HEADer（我想将它分开 - 效果很好）并且我想要有几个主体，这取决于它的内容。我的问题是如何以正确的方式连接它？

主.XSD：

```
<xs:schema id="MAIN" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns=""> 
  <xs:include schemaLocation="HEAD.xsd"/>

  <xs:element name="MAIN">
    <xs:complexType>
      <xs:sequence minOccurs="1" maxOccurs="1">
        <xs:element name="HEAD" type="HEADType"/>
        <xs:element name="BODY" type="BODYType"/>
      </xs:sequence> 
    </xs:complexType> 
  </xs:element>
</xs:schema> 
```

头.XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="HEAD" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="" >
  <xs:complexType name="HEADType">
    <xs:all minOccurs="1" maxOccurs="1">
      <xs:element name="USER"> 
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:pattern value="[A-Z_]+"></xs:pattern>
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
    </xs:all>
  </xs:complexType>
</xs:schema> 
```

我的想法是：

1.  将 MAIN.xsd 中的“MAIN”元素作为 MAINTYPE 的类型，然后将 MAIN.XSD 包含到已定义 BODYType 的 BODY_CUSTOMER 中。
2.  分别加载 MAIN.xsd 和 BODY_CUSTOMER.xsd，然后它会找到 BODYType 的定义。

但是，我认为这不是“正确”的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:11:25.010

根据您的描述，您尝试实现的内容通俗地称为“悬空定义”。

这种方法最常见的问题是典型的 XSD 模式编辑器会在您尝试编辑 Main.xsd 时抱怨缺少定义

您的第一个想法有点令人困惑；不过，我认为不需要仅仅因为第二个确实是你需要做的。我认为虽然`separately`指的是不同的文件，但您必须同时加载它们。你将如何做到这一点取决于需要使用 XSD 的工具，所以我无法真正帮助你。

[假设 .NET，如果您在XmlSchemaSet](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.aspx)对象中一次加载 3 个 XSD 文件（Main、Head 和 Body_Customer），它将完全按照您的意愿工作。

As to "proper".... it is all depending on what is accepted or not as an XSD practice in your organization. As far as I am concerned, dangling types is a perfectly valid XSD design pattern.

# xcode - XCode 4 - 所有选项卡中的相同调试窗口

> ID：14197664
> 
> 赞同：1
> 
> 时间：2013-01-07T14:12:11.057
> 
> 标签：xcode, macos, xcode4

有没有办法在所有选项卡（甚至是新选项卡）中保持相同的调试窗口（具有相同的表达式和变量）？

被迫返回一个选项卡来查看表达式的结果很烦人。

# php - 如何在 yii 中创建自定义自动完成文本字段

> ID：14197669
> 
> 赞同：2
> 
> 时间：2013-01-07T14:12:24.627
> 
> 标签：php, jquery, ajax, autocomplete, yii

我是 yii 的新手。我需要编写自定义 yii 自动完成。我知道 CJuiAutocomplete 在那里。但我需要实现自己的自定义自动完成。任何人都可以指导我或帮助我开发自定义自动完成文本字段。在文本字段中显示名称时获取 id。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T01:02:46.567

这是站点控制器中的一个动作...

```
public function actionAutoComplete($term){

    $query = Yourmodel::model()->findallbyattributes( array('somecolumn'=>$term));
    $list = array();        
    foreach($query as $q){
        $data['value']= $q['id'];
        $data['label']= $q['name'];

        $list[]= $data;
        unset($data);
    }

    echo json_encode($list);
} 
```

在您看来，这是一个搜索表单：

```
$form=$this->beginWidget('CActiveForm', array(
'id'=>'searchform',
'enableAjaxValidation'=>false,
'action' => '/'
)); ?>

    <fieldset>
        <div class="input-append">
        <?php

        echo CHtml::hiddenField('selectedvalue','');

         $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
            'name'=>'searchbox',
            'value'=>'',
            'source'=>CController::createUrl('/site/autoComplete'),
            'options'=>array(
            'showAnim'=>'fold',         
            'minLength'=>'2',
            'select'=>'js:function( event, ui ) {
                        $("#searchbox").val( ui.item.label );
                        $("#selectedvalue").val( ui.item.value );
                        return false;
                  }',
            ),
            'htmlOptions'=>array(
            'onfocus' => 'js: this.value = null; $("#searchbox").val(null); $("#selectedvalue").val(null);',
            'class' => 'input-xxlarge search-query',
            'placeholder' => "Search...",
            ),
            ));
            echo '<button class="btn" type="submit">Submit</button>';   

        ?>
        </div>
    </fieldset>

<?php $this->endWidget(); ?>    
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T17:22:36.507

因为这个条件

```
array('somecolumn'=>$term) 
```

只有当您编写完整的字符串时，它才会显示结果。例如，您有 ['coffee', 'cake']。当您在搜索框中输入时，它不会显示 coff、cof、co、ca、cak 等的结果。只有当您输入全字咖啡时才会显示结果，您将得到 ['coffee'] 作为结果。

所以你需要类似的东西：

```
$match = $_GET['term'];
$tags = Tags::model()->findAll(
   'tag_name LIKE :match',
   array(':match' => "%$match%")
); 
```

这将显示 coff、cof、co、ca、cak 等的结果。

# sql-server - ASP.NET MVC 4 成员数据库

> ID：14197670
> 
> 赞同：1
> 
> 时间：2013-01-07T14:12:25.243
> 
> 标签：sql-server, asp.net-mvc-4, membership

我有一个 ASP.NET MVC 4 应用程序。我的数据库托管在 Windows Azure 上。我的解决方案有一个新的 SQL Server 数据库项目。我想首先将 ASP.NET 成员资格功能添加到此数据库 [项目]。我的问题是，我该怎么做？

我认为这将是一个直接的拖放操作。但是，我无法弄清楚如何完成这项基本任务。我找到的所有在线视频都演示了如何通过 ASP.NET MVC 端实现登录。但是，我没有看到任何显示设置成员资格表/存储过程/视图并将它们放入 SQL Server 数据库项目的内容。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:41:00.203

您可以使用`aspnet_regsql`框架文件夹（通常`%windows%\Microsoft.NET\Framework\v4.0.30319\`）获取将成员资格添加到数据库所需的脚本。生成 .sql 文件的示例用法是：

```
...\v4.0.30319>aspnet_regsql -sqlexportonly MembershipScript.sql 
```

从那里，针对您的数据库运行该脚本。您可能还需要使用`-d <database>`标志，但所有选项都可以使用`aspnet_regsql -?`. （这包括为会话状态和其他选项导出必要的表）。

*我希望这就是您要问的，但是如果我误解了这个问题，请澄清一下，我会尽力修改答案*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:53:53.367

使用基于表单的身份验证创建 MVC 4 Internet 应用程序的模板既使用了传统的 ASP.NET 成员资格数据库，又使用了一个名为 SimpleMembership 的附加层，该层具有自己的数据库。SimpleMembership 数据库使用实体框架代码优先模型，该模型在您第一次启动应用程序时自动创建数据库。由于 SimpleMembership 使用代码优先，因此可以通过更改 AcccountModels.cs 中的 UserProfile 类来修改数据库架构。您将应用程序处理的这些数据库放入单独的数据库项目的目标是什么？除非您打算绕过 SimpleMembership，否则任何解决方案都必须处理两个数据库。

# yii - 如何在 yii 中获取或创建角色

> ID：14197673
> 
> 赞同：0
> 
> 时间：2013-01-07T14:12:36.920
> 
> 标签：yii, yii-components

我是yii的新手。我一直坚持使用 yii-tutorials 在 yii 中创建角色。但我不知道如何在 yii 中创建角色。意味着我想创建两个角色`admin`，`staff`并且我想给他们不同的特权。
我已经`role`在用户表中创建了一个，但我不知道如何创建角色并为他们分配特权，请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T05:19:40.567

这个源非常适合初学者。我到现在都在使用这个方法： [YII 中的简单 RBAC](http://www.yiiframework.com/wiki/328/simple-rbac/)

只需按照给出的说明进行所需的修改即可。

具体示例：

**WebUser.php** (/components/WebUser.php)

```
<?php 
class WebUser extends CWebUser
{
    /**
     * Overrides a Yii method that is used for roles in controllers (accessRules).
     *
     * @param string $operation Name of the operation required (here, a role).
     * @param mixed $params (opt) Parameters for this operation, usually the object to access.
     * @return bool Permission granted?
     */
    public function checkAccess($operation, $params=array())
    {
        if (empty($this->id)) {
            // Not identified => no rights
            return false;
        }
        $role = $this->getState("evalRoles");

        if ($role === 'SuperAdmin') {
            return 'SuperAdmin'; // admin role has access to everything
        }
        if ($role === 'Administrator') {
            return 'Administrator'; // admin role has access to everything
        }
        if ($role === 'Professor') {
            return 'Professor'; //Regular Teaching Professor, has limited access
        }
        // allow access if the operation request is the current user's role
        return ($operation === $role);
    }
} 
```

只需将它与您的**components/UserIdentity.php**和**config/main.php**连接起来：

```
'components' => array(
// ...
'user' => array(
    'class' => 'WebUser',
), 
```

就是这样..

检查登录的角色：

```
Yii::app->checkAccess("roles");
where checkAccess is the name of your function in WebUser... 
```

> 请注意，evalRoles 是您表中的一列，它将提供帐户的角色（在我提供的链接上，这将是主要部分片段中使用的单词**角色）**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T05:01:35.753

在你的 copenents/UserIdentity.php

```
class UserIdentity extends CUserIdentity{
private $_id;

public function authenticate()
{
    $record=Members::model()->findByAttributes(array('username'=>trim($this->username)));

    if($record===null)
    $this->errorCode=self::ERROR_USERNAME_INVALID;

    else if($record->password!==md5(trim($this->password)))
    $this->errorCode=self::ERROR_PASSWORD_INVALID;

    else
    {
        $this->_id=$record->id;
        $this->setState('username', $record->username);
        $this->setState('name', $record->name);
        $this->setState('type', $record->role);
        $this->errorCode=self::ERROR_NONE;

    }
    return !$this->errorCode;
}

public function getId()
{
    return $this->_id;
}

public function setId($id)
{
    $this->_id = $id;
}
} 
```

您可以创建一个新的列名称作为“角色”。将成员类型“admin”或“staff”设置为角色列。

小心那条线。

```
$this->setState('type', $record->role); 
```

创建一个新的帮助文件。/protected/helpers/RoleHelper.php

```
class RoleHelper {

public static function GetRole(){

    if (Yii::app()->user->type == "admin"){
        //set the actions which admin can access
        $actionlist = "'index','view','create','update','admin','delete'";
    }
    elseif (Yii::app()->user->type = "staff"){
        //set the actions which staff can access
        $actionlist = "'index','view','create','update'";
    }
    else {
        $actionlist = "'index','view'";
    }

    return $actionlist;

}

} 
```

并在您的控制器中-> accessRules 功能

```
public function accessRules()
{

    return array(
        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions'=>array(RoleHelper::GetRole()),
            'users'=>array('@'),
        ),

        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
} 
```

并且不要忘记将 'application.helpers.*' 添加到 /config/main.php

```
'import'=>array(
    'application.models.*',
    'application.components.*',
    'application.helpers.*',
), 
```

# javascript - jQuery 的 next() 的原生 JavaScript 替代方案

> ID：14197675
> 
> 赞同：3
> 
> 时间：2013-01-07T14:12:40.270
> 
> 标签：javascript, jquery

我有这个代码：

```
$.each(this.items, function(key, item) {
    item = $(item);
    item.css('background', 'red');
    item.next().css('display', 'none');
} 
```

现在，我需要用纯 JavaScript 重写它，所以我正在这样做

```
document.getElementById(aItems[iCount].id).style.background = 'red';
document.getElementById(aItems[iCount].id).style.display = 'none'; 
```

问题是`display:none`必须为`next()`项目设置，而不是这个，我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T14:14:28.857

试试这个：

```
item.nextSibling.style.display = 'none' 
```

请记住，[可能会选择元素旁边的文本内容](https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling#Example)，因此您可能需要使用：[`nextSibling`](https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling)

```
item.nextSibling.nextSibling.style.display = 'none' 
```

* * *

[`nextElementSibling`](https://developer.mozilla.org/en-US/docs/DOM/Element.nextElementSibling)正如Bergi 建议的那样，另一种选择是使用。但是，并非所有浏览器都支持这一点。不过，您可以自己创建函数：

```
function nextElementSibling(element) {
    do { 
        element = element.nextSibling;
    } while (element && element.nodeType !== 1);
    return element;
} 
```

在这种情况下：

```
nextElementSibling(item).style.display = 'none'; 
```

* * *

最后但并非最不重要的一点是，如果您想用原生 JS替换 jQuery ，我建议您查看[Palash 的答案。](https://stackoverflow.com/a/14198040/1835379)`$.each()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:15:43.077

您可以使用所选 DOM 节点的[`nextElementSibling`属性](https://developer.mozilla.org/en-US/docs/DOM/Element.nextElementSibling)：

```
var item = document.getElementById(aItems[iCount].id);
item.style.background = 'red';
item.style.display = 'none';
if (item.nextElementSibling)
    item.nextElementSibling.style.display = 'none'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T14:37:05.313

你也可以试试这个：

```
for(var iCount = 0; iCount < aItems.length;i++)
{
     var current = aItems[iCount].id;
     var next = aItems[iCount + 1].id;
     if ( next != null ) {
          document.getElementById(current).style.background = 'red';
          document.getElementById(next).style.display = 'none';
     }
} 
```

# nhibernate - Fluent Nnihbernate 一对一引用

> ID：14197676
> 
> 赞同：0
> 
> 时间：2013-01-07T14:12:40.960
> 
> 标签：nhibernate, fluent-nhibernate, mapping, one-to-one

我有两个表，我想使用一对一的关系。

```
class ParentMap{
    public ParentMap(){
        References(x => x.ChildMap, "parent_id").Cascade.All();
    }
} 
```

孩子没有相关的映射。

问题是该`parent_id`列是在父级而不是在子级创建的。

我可以工作，但逻辑上不正确。**什么是与引用进行一对一**
映射的最佳方法 ，我真的搜索过 (-;

 **谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:04:45.323

您可以`HasOne`在父级上使用将其映射为`one-to-one`关系。这意味着连接发生在表的主键上，并且在保存时主键将同步。

如果这对您不起作用，那么另一种方法是映射：

**家长**

```
public ParentMap()
{
    HasOne(x => x.Child)
        .PropertyRef(x => x.Parent)
        .Cascade.All();
} 
```

**孩子**

```
public ChildMap()
{
    References(x => x.Parent, "parent_id");
} 
```

这将要求您对孩子拥有财产`Parent`。一对一的关系是双向的。**

# terminal - 从终端运行 java：NoClassDefFoundError

> ID：14197677
> 
> 赞同：0
> 
> 时间：2013-01-07T14:12:41.193
> 
> 标签：terminal, ubuntu-12.04

我一直在从`NetBeans`界面编码，但我想从`ubuntu`终端学习，我几乎无法使用。

我要运行的文件是`TabRemover.java`. 我从终端到达它的目录并写下：

```
simone@Pargolo:~/NetBeansProjects/TabRemover/src/tabremover$ java TabRemover 
```

但我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: TabRemover (wrong name: tabremover/TabRemover)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:787)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:447)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:480) 
```

我应该怎么做才能从 Ubuntu 终端运行 Java 程序？我看到网上有关于这个主题的不同主题，但它们看起来不像帮助......

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:15:49.413

您需要在命令行中设置类路径 -cp 选项，当然您需要在使用 javac 之前对其进行编译

```
$cd ~/NetBeansProjects/TabRemover/src
$java -classpath . org.tabremover.TabRemover 
```

-classpath 和 -cp — 提供保存效果。

请检查位于 ~/NetBeansProjects/TabRemover/src/org/tabremover/TabRemover.java 中的 TabRemover.java

org/tabremover 应该是等效的包名 org.tabremover

# google-apps-script - 如何仅重命名电子表格中的第二张工作表？

> ID：14197678
> 
> 赞同：7
> 
> 时间：2013-01-07T14:12:50.663
> 
> 标签：google-apps-script, google-sheets

无论当前工作表名称是什么，如何创建脚本来重命名工作簿中的第二个工作表？

我有一个脚本可以删除除第一张和第二张之外的所有工作表。

然后我想用今天的日期重命名第二张纸。除了重命名，我拥有其他一切。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T15:42:42.530

```
function myFunction() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var tz = ss.getSpreadsheetTimeZone();
  var sheets = ss.getSheets();
  var date = Utilities.formatDate(new Date(), tz, 'MM-dd-yyyy');
  sheets[1].setName(date);  // Rename second
} 
```

[参考](https://developers.google.com/apps-script/class_sheet)

# ms-access - 在 access 2010 中访问其他窗体上的控件的值

> ID：14197687
> 
> 赞同：0
> 
> 时间：2013-01-07T14:13:23.580
> 
> 标签：ms-access, vba

我有一个 Listbox 对象，它位于访问中选项卡式表单的子表单中。当我使用以下命令在新窗口中打开另一个表单时，我希望访问其中的选定值：

```
DoCmd.OpenForm "New form", , , , , acDialog 
```

假设我的带有选项卡界面的主表单称为“主页”，子表单称为“按项目搜索”，列表框对象称为“filteredList”，我希望在加载期间从“新表单”中的过滤列表中获取值表格。我对在线提供的各种语法感到困惑，因为它们似乎对我不起作用。我可以知道什么是正确的语法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:21:23.757

有很多方法可以做到这一点。假设您打开第二个表单的代码在主页上，并且您有一个简单的，不是多选的列表框，您可以使用 OpenArg：

```
DoCmd.OpenForm "New form", , , , , acDialog, _
    Me.[NameOfSubformControlNotFormContained].Form.filteredList 
```

如果代码在子表单中，你说：

```
DoCmd.OpenForm "New form", , , , , acDialog, Me.filteredList 
```

要从另一个表单引用子表单：

```
Forms![Main Form]![NameOfSubformControlNotFormContained].Form!filteredList 
```

或者

```
Forms![Main Form].[NameOfSubformControlNotFormContained].Form.filteredList 
```

另见：[http ://access.mvps.org/access/forms/frm0031.htm](http://access.mvps.org/access/forms/frm0031.htm)

# php - 使用 php 解析 XML 文档时出现奇怪的结果

> ID：14197694
> 
> 赞同：0
> 
> 时间：2013-01-07T14:13:47.187
> 
> 标签：php, xml, amazon

我正在尝试使用 PHP 来解析 XML 文档。它基本上可以正常工作，只是我遇到了一个非常奇怪的错误，我看不出有什么原因。第一个 ASIN 的 XML 是这样的：

```
 <?xml version="1.0"?>
<GetLowestOfferListingsForASINResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetLowestOfferListingsForASINResult ASIN="1580230032" status="Success">
<AllOfferListingsConsidered>true</AllOfferListingsConsidered>
<Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Identifiers>
  <MarketplaceASIN>
    <MarketplaceId>ATVPDKIKX0DER</MarketplaceId>
    <ASIN>1580230032</ASIN>
  </MarketplaceASIN>
</Identifiers>
<LowestOfferListings>
  <LowestOfferListing>
    <Qualifiers>
      <ItemCondition>New</ItemCondition>
      <ItemSubcondition>New</ItemSubcondition>
      <FulfillmentChannel>Merchant</FulfillmentChannel>
      <ShipsDomestically>True</ShipsDomestically>
      <ShippingTime>
        <Max>0-2 days</Max>
      </ShippingTime>
      <SellerPositiveFeedbackRating>95-97%</SellerPositiveFeedbackRating>
    </Qualifiers>
    <NumberOfOfferListingsConsidered>2</NumberOfOfferListingsConsidered>
    <SellerFeedbackCount>221</SellerFeedbackCount>
    <Price>
      <LandedPrice>
        <CurrencyCode>USD</CurrencyCode>
        <Amount>10.12</Amount>
      </LandedPrice>
      <ListingPrice>
        <CurrencyCode>USD</CurrencyCode>
        <Amount>6.13</Amount>
      </ListingPrice> 
```

第二个 ASIN 的 XML 是：

```
 <GetLowestOfferListingsForASINResult ASIN="0870714376" status="Success">
  <AllOfferListingsConsidered>true</AllOfferListingsConsidered>
  <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Identifiers>
  <MarketplaceASIN>
    <MarketplaceId>ATVPDKIKX0DER</MarketplaceId>
    <ASIN>0870714376</ASIN>
  </MarketplaceASIN>
</Identifiers>
<LowestOfferListings>
  <LowestOfferListing>
    <Qualifiers>
      <ItemCondition>New</ItemCondition>
      <ItemSubcondition>New</ItemSubcondition>
      <FulfillmentChannel>Merchant</FulfillmentChannel>
      <ShipsDomestically>True</ShipsDomestically>
      <ShippingTime>
        <Max>0-2 days</Max>
      </ShippingTime>
      <SellerPositiveFeedbackRating>98-100%</SellerPositiveFeedbackRating>
    </Qualifiers>
    <NumberOfOfferListingsConsidered>2</NumberOfOfferListingsConsidered>
    <SellerFeedbackCount>1416</SellerFeedbackCount>
    <Price>
      <LandedPrice>
        <CurrencyCode>USD</CurrencyCode>
        <Amount>18.49</Amount>
      </LandedPrice>
      <ListingPrice>
        <CurrencyCode>USD</CurrencyCode>
        <Amount>14.50</Amount>
      </ListingPrice> 
```

如您所见，每一个的金额都不同，但是当我运行程序时，我只从第一个 ASIN 获得金额。这是我获取结果的 PHP 代码：

```
 $parsed_xml = amazon_xml($isbn);

$current = $parsed_xml->ListMatchingProductsResult->Products->Product;
$asin = $current->Identifiers->MarketplaceASIN->ASIN;

// get information based on the items ASIN
$price_xml = amazonPrice_xml($asin, $ItemCondition);
$currentPrice = $price_xml ->GetLowestOfferListingsForASINResult->Product->LowestOfferListings->LowestOfferListing;

// check to see if there are values
if(!empty($currentPrice))
{  

    foreach($currentPrice as $offer){
            $totalFeedback = $offer->SellerFeedbackCount;
        //if ($totalFeedback >99) {
            $condition = $offer->Qualifiers->ItemSubcondition;

                //amazon condition matching algorithm (so we can match our condition up against amazons conditions)
                switch ($condition) {
                case "New":
                    $amazonCondition = 5;
                    break;
                case "Mint":
                    $amazonCondition = 4;
                    break;
                case "VeryGood":
                    $amazonCondition = 3;
                    break;
                case "Good":
                    $amazonCondition = 2;
                    break;
                case "Acceptable":
                    $amazonCondition = 1;
                    break;
                default:
                    $amazonCondition = 0;
                }

            $lowestAmazonPrice = 0;

                            $currentPrice = $price_xml ->GetLowestOfferListingsForASINResult->Product->LowestOfferListings;
             foreach($currentPrice->LowestOfferListing as $offer){
                                if( ($ourCondition = $amazonCondition) /*&& ($totalFeedback >= 5000)*/) {
                    $offerArray[$y] = str_replace('$','',$offer->Price->ListingPrice->Amount);
                    $y++;
                                }   
            }
            $lowestAmazonPrice = min($offerArray);
    }

                    if ($fillzPrice > $lowestAmazonPrice ) {
                        $avgPrice = ($lowestAmazonPrice - ($lowestAmazonPrice * .08));
                         $source = "Adjusted Fillz Price";
                    } else {
                        $avgPrice = $fillzPrice;
                        $source = "Original Price";
                    }
    // check to make sure we are not going below established floor for prices
            if($avgPrice < ($follettPrice * 2.37)){
        $avgPrice = $follettPrice * 2.37;
        $source = "Follett Pricing";
    }
    if($avgPrice < ($row['cost'] * 2)){
        $avgPrice = $row['cost'] * 2;
        $source = "Double Cost";
    }
    /*if($avgPrice < 5.50){
        $avgPrice = 5.50;
        $source = "Lowest Base Cost";
    }*/
            //update fillzPrice
    $conn->query("UPDATE inventory SET ourPrice = $avgPrice, upload = '1' WHERE sku=" . $row['sku']);

    $pricedSKU[$n] = array('sku' => $row['sku'],
                            'new price' => number_format($avgPrice, 2, '.', ''),
                            'price source' => $source,
                                                            'Fillz' => $fillzPrice,
                                                            'Amazon'=> $lowestAmazonPrice,
                                                            'asin'=> $asin,
                                                            'condition'=>$ourCondition
                            );

    $n++;

}

} 
```

正如我之前所说，除了这个问题之外，大部分输出都是正确的。我收到了一封包含 ASIN 和金额的电子邮件，以便我查看结果。关于我做错了什么以及如何纠正它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:42:50.483

如果其他人有这个问题，解决办法是添加这行代码：

```
 $offerArray = array(); 
```

在第一个 while 语句之后。现在一切正常。

# ios - 无需用户登录即可访问 Google Drive

> ID：14197698
> 
> 赞同：1
> 
> 时间：2013-01-07T14:14:05.143
> 
> 标签：ios, google-drive-api

我正在为 iPhone 制作一个应用程序，所有用户都可以访问同一个谷歌驱动器文件夹来上传文件。此 google drive 帐户由公司而非用户管理。在那里我想跳过谷歌登录表单，只给用户访问权限。理想的用户甚至不知道他/她正在使用谷歌驱动器。

我查看了 drEdit 示例并查看了 oauth 文档。是否可以为所有用户使用一个 refresh_token 来访问？所以我登录一次，访问权限，以某种方式将 refresh_token 和硬代码存储在应用程序中以供将来使用，以便所有用户都使用该 refresh_token 进行访问。还是有更好的想法来做到这一点？

亲切的问候，

斯蒂金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:55:54.807

以为有一个类似的问题，但找不到我正在寻找的问题。简短的回答是您需要非常小心如何执行此操作。像这样在你的应用程序中嵌入刷新令牌会招致滥用，特别是如果它被授权进行写访问。一旦聪明的用户或攻击者发现了该值，他们就可以使用该令牌以任意方式调用 API。如果授权全盘范围，那就意味着还可以恶意修改或删除文件，偷偷存储自己的内容等等……

如果您确实需要匿名或共享访问存储在云端硬盘中的内容，最好通过自己的服务器代理请求，以便控制与云端硬盘的交互。

# sql - SQL Server 2005 - 在一个语句中从单个表中多次查找值

> ID：14197699
> 
> 赞同：0
> 
> 时间：2013-01-07T14:14:09.777
> 
> 标签：sql, sql-server

需要帮助，请看下表结构：

```
Table: MainData (see fields below)

ID  TypeId  TypeName
0   0   MAIN
1   4   Test1
2   4   Test2
3   4   Test3
4   4   Test4
7   7   File1
8   7   File2
9   7   File3
10  7   File4
14  8   Database1
15  8   Datebase2
16  8   Database3
17  8   Database4 
```

现在请参阅下面的查询，我正在努力

插入到临时表（Field1、Field2、Field3）值（Test1、File4、Database3）

Test1，File4，Database3 - 我已经将这些作为字符串值传递给函数，现在必须获取需要插入到 temptable 中的 ID

那么下面的查询应该变成

插入到临时表 (Field1, Field2, Field3) 值 (1, 10, 16)

```
1 - Test1
10 - File4
16 - Database3 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:29:38.947

```
insert into temptable
    select (select id from Maintable mt where mt.typename = 'test1'),
           (select id from Maintable mt where mt.typename = 'File4'),
           (select id from Maintable mt where mt.typename = 'Database3') 
```

注意：这仅适用于任何给定值的 Maintable 中恰好有 0 个或 1 个条目。您可能想使用 typeid，但您的问题并不清楚。

# c# - 带有按钮的列表选择器选项

> ID：14197700
> 
> 赞同：0
> 
> 时间：2013-01-07T14:14:14.937
> 
> 标签：c#, windows-phone-7, listpicker

我是一名学生，目前在窗口电话上做一个项目。基本上，我正在创建一个库应用程序。问题是，当我使用 listpicker 作为我要浏览的房间的选项时，每个选项都使用一个集成按钮。我希望每个按钮都能引导我进入不同的肖像页面。例如，当我按下选择“房间 101”的按钮时，它会将我带到“第 101 页”，如果选择“房间 102”，则打开“第 102 页”。这是我的 C# 代码

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Net;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Navigation;
    using Microsoft.Phone.Controls;
    using Microsoft.Phone.Shell;

    namespace Library
{
public partial class location : PhoneApplicationPage
{
    public class SampleData
    {   
        public string Floor
        {
            get;
            set;
        }
        public string Room
        {
            get;
            set;
        }

    }
    public location()
    {
        InitializeComponent();
        List<SampleData> dataSource = new List<SampleData>();
        dataSource.Add(new SampleData() { Floor = "First",Room = "101" });
        dataSource.Add(new SampleData() { Floor = "First",Room = "102" });
        dataSource.Add(new SampleData() { Floor = "First", Room = "103" });
       this.listPicker.ItemsSource = dataSource;
    }

          private void Button_Click(object sender, RoutedEventArgs e)
    {
        SampleData data = (sender as Button).DataContext as SampleData;
        ListPickerItem pressedItem =
        this.listPicker.ItemContainerGenerator.ContainerFromItem(data) as ListPickerItem;
           if (pressedItem != null )
        {
            this.NavigationService.Navigate(new Uri("/Room.xaml", UriKind.Relative));
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:56:24.087

由于您的问题不太清楚，我假设您知道如何按下该项目，而您的问题是如何仅导航到正确的页面。

在点击处理程序中执行以下操作

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    SampleData data = (sender as Button).DataContext as SampleData;
    this.NavigationService.Navigate(new Uri("/Room.xaml?roomId=" + data.Room.ToString(), UriKind.Relative));
} 
```

在您的房间页面的 OnNavigatedTo 处理程序中，您可以执行以下操作：

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
         base.OnNavigatedTo(e);

        int roomId = (int)NavigationContext.QueryString["roomId"];

        if(roomId == 101)
        {
            //Modify page content for room 101
        }
        else if(roomId == 102)
        {
            //Modify page content for room 102
        }
        //...
    } 
```

如果你真的想导航到一个完全不同的页面，你只需要修改 Navigation Uri

```
this.NavigationService.Navigate(new Uri(string.Format("/Room{0}.xaml", data.Room), UriKind.Relative) 
```

**注意**：但通常你只想根据传递给它的数据来调整页面的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:22:47.417

一旦您有了基于 SelectionChanged 事件的 SelectedItem 或 SelectedIndex，您就可以导航到相应的页面。

# html - 锚链接没有到达预期的地方

> ID：14197701
> 
> 赞同：0
> 
> 时间：2013-01-07T14:14:19.493
> 
> 标签：html

我的页面中有一些锚标签，它们链接到页面中的段落标签

```
 <a href="#Win">Win Summary</a>
            <a href="#Client">Client</a>
            <a href="#Overview">Project Overview</a> 
```

同样在我的页面顶部，我有两个 div。

问题是，当我单击锚标记时，段落标记中的内容从页面顶部开始，这使得一些文本位于页面顶部的两个 div 后面。

这是我不希望发生的事情。

我创建了一个示例页面来解释我的问题，代码如下：

```
 <html>

<head>
<style> 
#masthead {
    background-color: #131623;
    border-bottom: 4px solid #FFFFFF;
    border-top: 0 none;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
}
#masthead {
    border-bottom: 0 none;
    border-top: 4px solid #171A23;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 900;
}
#masthead {
    border-bottom: medium none;
    border-top: 0 none;
    box-shadow: none;
    overflow: visible;
    position: fixed;
}
#masthead {
    background-color: #131623;
    border-bottom: 4px solid #FFFFFF;
    border-top: 1px solid #666666;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 900;
}

div, p, span, a, li, strong {
    font-family: Arial,sans-serif;
}

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, li, fieldset, form, label, legend {
    border: 0 none;
    font-size: inherit;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
}
</style>
</head>
<body>
<div id="masthead">
  <div id="universal-nav" style="height:40px; background-color:#eaeaea;" >

  </div>
  <div class="menu-subtabs" style="height:30px; background-color:#fafafa;"">
        <h2>SalesOne</h2>

  </div>
</div>
</br></br></br></br></br>
<table border="0" summary="Content Block">
    <tr>
        <td>
            <p xmlns="">
                <a href="#Win">Win Summary</a>
                <br/>
                <a href="#Client">Client</a>
                <br/>
                <a href="#Overview">Project Overview</a>
                <br/>
            </p>
            <p xmlns="" id="Win">
                <strong>
                    <font color="#008000">Win Summary</font>
                </strong>
            </p>
            <p xmlns="">
                Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.</p>

            <p xmlns="" id="Client">
                <font color="#008000">
                    <strong>Customer</strong>
                </font>
            </p>
            <p xmlns="">
                <a href="http://www.yara.com/">Yara International ASA</a>Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.
            </p>

            <p xmlns="" id="Overview">
                <strong>
                    <font color="#008000">Project Overview</font>
                </strong>
            </p>
            <p xmlns="">
                ITS Enterprise Services - security services will provide hosted and managed services as part of SO project for data center hosting and management. The security components include:</p>

        </td>
    </tr>
</table>
</body>
</html>
</html> 
```

对于这么长的文字，我很抱歉，但它需要显示我面临的问题。

提前致谢。泽山

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:09:11.550

这是纯 HTML/CSS 无法实现的。您将需要某种 JavaScript。

# security - js 客户端应用程序中的 HttpOnly cookie、ajax 请求和服务器端安全性

> ID：14197702
> 
> 赞同：2
> 
> 时间：2013-01-07T14:14:22.063
> 
> 标签：security, ajax-request, cookie-httponly

我有一个 js 客户端应用程序，它使用仅 http 的 cookie 来存储当前经过身份验证的用户的凭据。应用程序使用 cookie 中的数据来执行每个请求的身份验证。

但是，应用程序确实会发出不包含 cookie 的 ajax 请求。当服务器来处理这些请求时，它认为它没有cookie，因此没有经过身份验证的用户并执行重定向到登录页面。尽管如此，cookie 仍然存在，并且所有标准的 http 请求都按预期工作。

这个问题有什么简单的解决方法吗？在这种情况下，推荐的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:23:58.150

该问题是由于`zepto`正在使用的库引起的，该库具有不传递 cookie 的特殊问题（库的一些已知问题）。当使用 jQuery 时，一切都按预期工作。

# java-7 - 在 java 7 中使用 SyntheticaBlackEye

> ID：14197703
> 
> 赞同：1
> 
> 时间：2013-01-07T14:14:22.690
> 
> 标签：java-7, look-and-feel, uimanager, synthetica

我想在我的 java 应用程序中使用名为 SyntheticaBlackEye 的外观，所以我从[这里](http://www.jyloo.com/synthetica/themes/)下载了外观的 jar 文件，然后将 jar 文件放在项目的库文件夹中，然后我将外观设置为如下：

```
UIManager.setLookAndFeel(new SyntheticaBlackEyeLookAndFeel()); 
```

我添加了该导入：

```
import de.javasoft.plaf.synthetica.SyntheticaBlackEyeLookAndFeel; 
```

问题是编译器拒绝并告诉我`no suitable method found for setLookAndFeel(de.javasoft.plaf.synthetica.SyntheticaBlackEyeLookAndFeel)`

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:56:53.697

使用这一行：

```
UIManager.setLookAndFeel("de.javasoft.plaf.synthetica.SyntheticaBlackEyeLookAndFeel"); 
```

代替：

```
setLookAndFeel(de.javasoft.plaf.synthetica.SyntheticaBlackEyeLookAndFeel); 
```

块内`try catch`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T05:38:48.343

[首先，您必须从这是您必须注册的 Synthetica 主 Jar](http://jyloo.com/synthetica/download/)说明下载所需的 Jar，并且有**评估**和**被许可方**链接（选择您项目的任何套件）。

现在您必须从这里的许多[Themes for Synthetica](http://jyloo.com/synthetica/themes/%3Bjsessionid%3D1dbbc119692c36023becab78c60d)下载主题 Jar 。

将这两个 Jar 文件添加到您的项目类路径中，然后执行以下操作：

```
import de.javasoft.plaf.synthetica.SyntheticaPlainLookAndFeel;

try {
        javax.swing.UIManager.setLookAndFeel(new SyntheticaPlainLookAndFeel());

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# javascript - 使用 Jquery 为仅包含指定文本的 html 列表元素提供背景颜色

> ID：14197704
> 
> 赞同：2
> 
> 时间：2013-01-07T14:14:26.463
> 
> 标签：javascript, jquery

我有以下 html 脚本：

```
<ul>
<li class="container">
<div class="age">24</div>
<div class="married">no</div>
</li>

<li class="container">
<div class="age">27</div>
<div class="married">yes</div>
</li>

<li class="container">
<div class="age">56</div>
<div class="married"><!--empty--></div>
</li>

<li class="container">
<div class="age">34</div>
<div class="married">no</div>
</li>
</ul> 
```

我希望只有`li`包含 a 的元素`no`才能`div.married`使用 Jquery 获得绿色背景。

我不明白为什么[这段代码](http://jsbin.com/urodit/144/edit)不起作用。我如何获得预期的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T14:18:14.197

试试这个：

```
$(".container .married").filter(function() {
    return $(this).text() == "no";
}).closest('.container').css('background-color', 'green'); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/dQNvU/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:18:57.560

试试这个：

```
$(function(){
  $(".married").each(function() {
    if ($(this).text() === 'no') {
      $(this).closest('li').addClass('highlight')
    }

  });   
}); 
```

和 CSS 类

```
.highlight {
   background: green;
} 
```

只要有可能，最好始终远离 javascript 的 css

示例：http: [//jsbin.com/irubap/1/edit](http://jsbin.com/irubap/1/edit)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T14:19:44.803

你有一个错误的`;`后，`"green"`虽然你仍然不会得到你想要的。

你也可以；

```
$(".married:contains(no)").parent().css(...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T14:21:14.573

用这个 ：

```
$("li:contains('no')").css('background-color', 'green'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T14:19:34.837

```
var mar = $(".married").filter( function( index, element ) { 
  return $( element ).text().match( /no/g );
}).css( 'background-color', 'green' ); 
```

# c# - 确定 Editorfor 或 TextBoxFor

> ID：14197706
> 
> 赞同：1
> 
> 时间：2013-01-07T14:14:41.813
> 
> 标签：c#, asp.net-mvc, textbox, editorfor

我是 MVC/C# 的新手，并且在 CSHTML 文件中有以下代码。基本上，它确定正在执行的操作（插入或更新），并根据结果决定该字段应显示为只读还是可编辑。

```
@if (Model.DatabaseOperationFlag == DatabaseOperation.Update)
{
@Html.TextBoxFor(model => model.BmUnit.BMU_ID, new {@readonly = "readonly"})
}
else
{
@Html.EditorFor(model => model.BmUnit.BMU_ID)
} 
```

整个应用程序都需要该代码，但我不确定在哪里/如何编写某种控件，以便可以使用类似的代码：

```
@Html.ReadOnlyOnUpdate(model => model.BmUnit.BMU_ID, model.DatabaseOperation); 
```

然后，ReadOnlyOnUpdate 将执行第一个代码部分中的逻辑。

提前致谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:31:26.830

你可以创建一个助手来为你做这件事。使用从 HtmlHelper 扩展的方法创建一个类：

```
public static class Helpers
{
    public static IHtmlString ReadOnlyOnUpdate(this HtmlHelper helper, int BMU_ID, DatabaseOperation operation)
    {
        var attrs = new Dictionary<string, object>();
        if (operation == DatabaseOperation.Update)
        {
            attrs.Add("readonly", "readonly");
        }
        return helper.TextBox("BMU_ID", BMU_ID, attrs);
    }
} 
```

通过使用泛型，您可能可以设置一个扩展方法，如果不使用模型和 BMU_ID，您可以这样做。创建类似于 EditorFor 的内容：

```
public static IHtmlSTring ReadOnlyOnUpdateFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<TModel, TProperty>> expression, DatabaseOperation operation) 
```

您只需将 TModel 替换为您的模型类型，将 TProperty 替换为我相信的 BMU_ID 类型。

希望这会有所帮助。

# css - 现在使用标签已经过时了吗？如果是这样，我应该改用什么？

> ID：14197709
> 
> 赞同：16
> 
> 时间：2013-01-07T14:14:58.857
> 
> 标签：css, html

现在使用标签已经过时了吗？如果是这样，我应该改用什么？
对于新行，我这样编码。这些天不应该这样做吗？

```
<br />
<br />
<br />
<br /> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T14:22:43.063

`<br />`旨在用于表示所述内容的中断，一个常见的示例是地址：

```
<p>
    20 street name<br />
    City Name<br />
    etc.
</p> 
```

正如您在上面的示例中看到的，地址都是一组内容，中断仅用于演示目的。

简而言之：`<p>`标签应该用于将内容分成块，并且`<br />`标签应该用于该内容中所需的任何中断（用于演示目的，如上例所示）

该`<br />`标签是完全有效的，它也在当前的 HTML5 规范中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-07T14:16:16.547

HTML 5 只需要`<br>`但是`<br/>`仍然可以。

如果您使用的是 XHTML 之类的东西，无论如何您都希望它是这样`<br />`的。

这个问题可能会告诉您您需要知道的一切：[HTML 5：是 <br>、<br/> 还是 <br />？](https://stackoverflow.com/questions/1946426/html-5-is-it-br-br-or-br)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-07T14:17:14.887

（从最初的问题，在它被编辑之前）：“换行结束标记”应该只在 XHTML 中使用 XML 内容类型（即几乎从不），即使那样你仍然可以使用`<br />`.

* * *

单独处理已编辑的问题：

如果您想要换行符，请使用`<br>`（或`<br />`在 XHTML 中）。HTML 5 也允许`<br />`，但这只是 XML 上瘾和糟糕的语法荧光笔的语法糖。

换行元素并没有过时，但与任何其他元素一样，它只能在适当的地方使用。适合换行的地方并不多，王子想到的最常见的是邮政地址和诗歌。在大多数情况下，a`<p>`更合适。在出现多个连续换行符的地方，添加填充或边距的样式表通常是正确的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T14:30:01.000

我将以不同的方式回答这个问题：

您可以使用`<br />`but 来回答我认为您要问的问题...是您可以使用 padding 元素来控制`<p>`或`<div>`控制间距。所以不要`<br />`只在 p 或 div 元素上添加填充。但正如人们提到`<p>`的那样：）

# cucumber - 在 ruby 1.9.3 中使用 capybara-firebug “停止并让我调试”

> ID：14197711
> 
> 赞同：1
> 
> 时间：2013-01-07T14:15:06.520
> 
> 标签：cucumber, ruby-debug

我刚刚从使用 rails 2.X 升级到 ruby​​ on rails 3.0.9。我一直在用 cucumber 编写功能测试，并使用 capybara-firebug gem，特别是`stop and let me debug`经常包含的步骤来调试。

但是更新后我不断收到错误消息：

```
When stop and let me debug          # capybara-firebug-1.2.3/lib/capybara/firebug.rb:52
  cannot load such file -- ruby-debug (LoadError) 
```

到目前为止，我的研究使我发现问题与我目前使用的 ruby​​ 1.9.3 不兼容的 ruby​​-debug gem 有关。

我尝试了一个替代方案，调试器，但现在我在运行测试时遇到了一个问题，即使在卸载调试器之后我读到 ruby​​-debug19 应该是一个更好的替代方案。

这是我现在运行测试时遇到的错误：

```
uninitialized constant Debugger::LocalInterface::Readline (NameError) 
```

我该如何摆脱它并让调试再次正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:13:14.280

不确定您是否正在使用`rvm`。但我认为你可能错过了一个`gem`. 如果使用`rvm`，请确认`readline`已安装：

```
% rvm pkg install readline 
```

接下来确认`ruby-debug19`安装正确：

```
% gem install ruby-debug19
% gem install linecache19
% gem install ruby-debug-base19 
```

**来源：**这个 SO 问题/答案：[调试 rails 3.1.1 应用程序](https://stackoverflow.com/questions/7802124/debug-rails-3-1-1-application)

# alloy - 合金规格问题

> ID：14197713
> 
> 赞同：0
> 
> 时间：2013-01-07T14:15:26.760
> 
> 标签：alloy, model-checking

下面是我最近为手机短信完成的一个马马虎虎的合金规格。这只是基本的发短信要求，因为这是一种做法，我没有严格的要求要坚持。但是，我有一些尴尬的问题，例如为什么我不能获得超过 1 对 Name-Mobile 对？为什么 2 个 MessageSets 坚持指向一个 Name？除了问题之外，事实和谓词非常直截了当。请随意批评，因为我需要反馈来学习合金本身。

我在做以下事情时的想法；

一个 Message Box 有 0 个或多个 MessageSet。一套只属于一个人，没有一套是免费的。每组有 1 个或多个消息，由消息行、开始和结束键和行以及光标位置组成。多条消息可以属于同一个人，但一条消息不能同时属于 2 个人。每行有 1 个或多个键，并有它们的开始键和结束键。此外，一行可能有也可能没有新行。每个键可能有也可能没有下一个键。通过触摸板按下按键。每个名字都有一个手机号码，并记录在 ContactList 中。没有两个名字可以有相同的手机，但一个人可以有多个电话号码。

谢谢。

```
 sig Lines{
formedOfKeys:some Keys,
lineStartKey:one Keys,
lineEndKey:one Keys,
nextLine: lone  Lines,
    }

one sig TouchPad{  pressed: set Keys }

sig Keys{ nextKey: one Keys, }

one sig MessageBox{}

    sig MessageSet{
isIn:one MessageBox,
isSetOf: one Name
    }

     sig Messages{
belongsToSet:  one MessageSet,
firstLine: one Lines,
lastLine:one Lines,
lastKey:one Keys,
firstKey: one Keys,
curserLoc: one Keys,
formedOfLines: set Lines,
sentFrom : one Name
   }

sig Name,Mobile {}

    one sig ContactList {
contact: Name, 
mobile: contact -> one Mobile
}

    fact No2NamesBelongingToMessageSetsSame{
//  all ms1,ms2:MessageSet| ms2 = ms1 implies ms1.isSetOf != ms2.isSetOf
    }

    //make it more than 2
fact NameAndMobileNumbersMatchedAndEqual{
//  #Name>2 and #Mobile>2
#Name=#Mobile
    }

    fact MessageSetBelongsToName{
all  ms:MessageSet, m:Messages |ms.isSetOf=m.sentFrom
    }

    fact AllNamesInContactList{
all c:ContactList| #c.contact =#Name
}

    fact NoLastMessageLineWithNextLine{
no l:Lines | l.nextLine not in (Messages.lastLine +Messages.firstLine)
    }

    fact NoNextKeyisSelf{
all k: Keys| k !in k.nextKey
    }

    fact NoNextLineisSelf{
all l: Lines | l !in l.nextLine
    }
    fact No2WayConnectionsBetweenLines{
all disj l1, l2: Lines | l2 in l1.nextLine implies l1 !in l2.nextLine
    }

    fact No2WayConnectionsBetweenKeys{
all disj k1, k2: Keys| k2 in k1.nextKey implies k1 !in k2.nextKey
    }

    fact MessageHasMoreThan1LineHasNextLine{
all m:Messages|#m.formedOfLines>1 implies #m.formedOfLines.nextLine>0
    }

fact LineStartInMessageLines{ all l:Lines| l.lineStartKey in l.formedOfKeys }
fact LineEndInMessageLines{ all l:Lines| l.lineEndKey in l.formedOfKeys }
fact CurserLocInMessageKeys{ all m:Messages| m.curserLoc in m.formedOfLines.formedOfKeys  }
fact FirstKeyInMessageKeys{ all m:Messages| m.firstKey in m.formedOfLines.formedOfKeys  }
fact firstLineInMessageLines{ all m:Messages| m.firstLine in m.formedOfLines }
fact MessageNextLineInMessageLines{ all m:Messages| m.formedOfLines.nextLine in m.formedOfLines }

fact MessageFirstKeyisInLineStartKeySet{ all m:Messages , l:Lines | m.firstKey in l.lineStartKey }

fact MessageLastKeyisInLineEndKeySet{ all m:Messages , l:Lines | l in m.lastLine && l.lineEndKey in m.lastLine.lineEndKey }

fact allKeysArePressed { all k:Keys | k in TouchPad.pressed }

fact NoMessageSetsWithoutMessages{ no ms:MessageSet| ms not in Messages.belongsToSet }

fact NoMessageSetWithoutBox{ no mb:MessageBox| mb not in MessageSet.isIn }

    pred nonReturnKeyPress[k: Keys, l,l':Lines, t:TouchPad]{
//key pressed in message, cursor and line info (new state =original state+1letter)
 l'.formedOfKeys= l.formedOfKeys++(t.pressed)
}

    pred deleteKeyPressed[k: Keys, l,l':Lines, t:TouchPad]{
//key deleted from line. cursor and line info (new state =original state-1key)
l'.formedOfKeys = l.formedOfKeys - (t.pressed)
}

    pred returnKeyPressed[k: Keys, l,l':Lines, t:TouchPad]{
//TODO return key pressed. cursor loc is new line's cursor loc
 l'.formedOfKeys= l.nextLine.formedOfKeys
}
    assert keyPressWorks {
    //TODO check if key press works properly
    }
    pred pressThenDeleteSame {
    all l1,l2,l3: Lines,  t:TouchPad, k: Keys|
    nonReturnKeyPress [k,l1,l2,t] && deleteKeyPressed [k,l2,l3,t]
        => l1.formedOfKeys = l3.formedOfKeys
}

    pred ReceiveThenSendSame {
all ms1,ms2,ms3, m: Messages|
    receive [m,ms1,ms2] && send [m,ms2,ms3]
        => ms1 = ms3
}

    pred findCursorLoc [l:Lines, k:lone Keys]{
//TODO I have a line and a key...How can i check where i am
}

    pred send[m, mS,mS':Messages]{
//final message set is one less than previous
mS'= mS - (m)
}

    pred receive[m, mS,mS':Messages]{
//final message set is one more than previous
mS'= mS++ (m)
}

pred AddContact [cl, cl': ContactList, n: Name, m: Mobile] {
   cl'.mobile = cl.mobile ++ (n->m)
    }

    pred RemoveContact [cl, cl': ContactList, n: Name] {
cl'.mobile = cl.mobile - (n->Mobile)
}

    pred FindContact [cl: ContactList, n: Name, m: Mobile] {
m = cl.mobile[n]
}

    assert AddingContact {
all cl, cl': ContactList, n: Name, m,m': Mobile |
    AddContact [cl,cl',n,m] && FindContact [cl',n,m'] => m = m'
}

    assert AddingThenDeleteSame {
all cl1,cl2,cl3: ContactList, n: Name, m: Mobile|
    AddContact [cl1,cl2,n,m] && RemoveContact [cl2,cl3,n]=> cl1.mobile = cl3.mobile
}

    assert pressThenDeleteSame {
all l1,l2,l3: Lines,  t:TouchPad, k: Keys|
    nonReturnKeyPress [k,l1,l2,t] && deleteKeyPressed [k,l2,l3,t]=> l1.formedOfKeys = l3.formedOfKeys
}

   assert ReceiveThenSendSame {
all ms1,ms2,ms3 , m: Messages|
    receive [m,ms1,ms2] && send [m,ms2,ms3]=> ms1 = ms3
}

//check AddingContact  expect 0
//check AddingThenDeleteSame  expect 1
//check pressThenDeleteSame  expect 0
//check ReceiveThenSendSame  expect 0

pred show{ }

run show 

//for exactly 3 Name,3 Mobile, 4 MessageSet,6 Messages, 5 Lines, 6 Keys  
//for exactly 4 MessageSet,14 Messages, 20 Lines, 40 Keys 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:52:28.460

> 为什么我不能得到超过 1 对 Name-Mobile 对？

要调试这样的问题，您可以使用“unsat core”功能。首先，我添加`#Name > 1`到`show`谓词，然后从“选项”菜单中选择“MiniSat with Unsat Core”求解器，最后执行“显示”谓词。该模型是不可满足的（如预期的那样），因此返回的不是一个实例，而是一个未满足的核心，即一组相互不一致的最小公式。换句话说，未饱和核心为您提供了模型不可满足的原因，而且，如果您删除未饱和核心中的任何一个公式，模型应该变得可满足。

在您的具体示例中，未饱和核心包含以下几行：

```
 contact: Name // field declaration inside the ContactList sig

  all c:ContactList| #c.contact =#Name

  #Name > 1 
```

这应该会立即告诉您模型无法满足的原因：该`contact`字段被声明为正好指向一个`Name`；下一个强制该字段的基数等于`Name`原子数的约束意味着只能有 1 个`Name`原子，因此当您明确要求更多`Name`原子时（`#Name > 1`），您会遇到矛盾。

要解决此问题，您可以将`contact`字段声明更改为`contact: set Name`.

> 为什么 2 个 MessageSets 坚持指向一个 Name？

为了测试这一点，我在`show`谓词中添加了以下约束（在修复了`contact`如上所述的声明之后）

```
some disj ms1, ms2: MessageSet | ms1.isSetOf != ms2.isSetOf 
```

事实上，这个模型是不能令人满意的。核心包含以下几行

```
 all  ms:MessageSet, m:Messages | ms.isSetOf = m.sentFrom

  no ms:MessageSet | ms not in Messages.belongsToSet 

  some disj ms1, ms2: MessageSet | ms1.isSetOf != ms2.isSetOf 
```

同样，很明显问题出在哪里。您希望并非所有`MessageSet`s 都指向相同`Name`（第 3 行），但在您的模型中，您有一个事实（第 1 行）正好相反，即对于所有`ms: MessageSet`和`m: Messages`， 的值`ms.isSetOf`必须相同且等于`m.sentFrom`。满足这些约束的唯一方法是使用 0 `Messages`（因此全称量词微不足道），但在这种情况下，无法满足来自未饱和核心的第二行。

# javascript - 如何修复 Google 美化处理 HTML 转义序列

> ID：14197714
> 
> 赞同：2
> 
> 时间：2013-01-07T14:15:35.963
> 
> 标签：javascript, html, pretty-print, google-code-prettify

[google-code-prettify](http://code.google.com/p/google-code-prettify/)通过“美化”转义字符本身而不是转义序列来处理代码块中的 HTML 转义。例如：

原始 HTML`<code class="prettyprint lang-sql"> ... &gt; ... </code>`被美化为：

```
<span class="pun">&amp;</span><span class="pln">gt</span><span class="pun">;</span> 
```

有明显错误的渲染。我无法在内部返回未转义的 HTML，`<code>`因为它不是来自受信任的来源，并且可以用作 XSS 向量。

我的问题是，是否有任何方法可以强制 google-pretty-print 做正确的事情，并将其内容`<code>`视为 HTML（转义），而不是原始文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:28:40.553

> 我的问题是，是否有任何方法可以强制 google-pretty-print 做正确的事情，并将其内容`<code>`视为 HTML（转义），而不是原始文本。

它应该，而且确实如此。[C 示例](http://google-code-prettify.googlecode.com/svn/trunk/tests/prettify_test.html#C)演示了这一点

```
#include &lt;stdio.h&gt; 
```

被美化为

```
<span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span><span class="pln"> 
```

我将您的示例代码粘贴到测试页面并得到

```
<span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span> 
```

我认为您的问题可能是其他层的结果。我会研究在浏览器之前看到您的 HTML 的任何内容管理系统、模板或博客发布软件。

# vb.net - 为什么说从 Web 服务返回 DataTables 特别糟糕？

> ID：14197719
> 
> 赞同：2
> 
> 时间：2013-01-07T14:15:48.677
> 
> 标签：vb.net, web-services, datatable, dataset

使用不支持 JSON 的 VB.Net Web 服务（或实际上任何一般的 Web 服务），我听说返回 DataTables 非常糟糕。我已经阅读了关于为什么它不好的解释，但所有这些解释似乎都有一个严重的共同缺陷：它们说明了为什么返回 DataSets 而不是 DataTables 是不好的。

这显然是两种不同的东西。DataTable 主要是数据（尽管不完全如此），而据我了解，DataSet 更“支持操作”。不过，这两种方式都存在差异。

因此，抛开 DataSet 不谈，为什么从 Web 服务返回 DataTable 是不好的，尤其是不支持 JSON 的 VB.Net 服务？这样做真的有任何失误吗，还是只是使用数据集？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:19:01.247

就像您不应该返回 a`DataSet`因为客户端可能不理解它一样，客户端可能不理解 a `DataTable`。为什么它*应该*被不运行.NET 的东西所理解？

# events - 使用 SDL 操纵杆处理程序，我想在按下帽子时继续做某事

> ID：14197720
> 
> 赞同：0
> 
> 时间：2013-01-07T14:15:49.810
> 
> 标签：events, sdl, joystick

目前，当我在 d-pad（sdl 中的帽子）上按住一个方向时，我的代码只执行一次，这是我的代码：

```
while (SDL_PollEvent( &event )) 
{
    switch (event.type)
    {
    case SDL_QUIT:
        exitapp = 1;
        break;
    case SDL_KEYDOWN:
        if (event.key.keysym.sym == SDLK_ESCAPE) 
        {
            exitapp = 1;
            // find other keys here: http://sdl.beuc.net/sdl.wiki/SDLKey
        }
        game->KeyDown( event.key.keysym.scancode );
        break;
    case SDL_KEYUP:
        game->KeyUp( event.key.keysym.scancode );
        break;
    case SDL_MOUSEMOTION:
        game->MouseMove( event.motion.x, event.motion.y );
        break;
    case SDL_MOUSEBUTTONUP:
        game->MouseUp( event.button.button );
        break;
    case SDL_MOUSEBUTTONDOWN:
        game->MouseDown( event.button.button );
        break;
    case SDL_JOYHATMOTION:  /* Handle Hat Motion */
        if ( event.jhat.value & SDL_HAT_UP )
        {
            game->HatUp();
        }

        if ( event.jhat.value & SDL_HAT_LEFT )
        {
            game->HatLeft();
        }

        if ( event.jhat.value & SDL_HAT_RIGHT )
        {
            game->HatRight();
        }
        if (event.jhat.value & SDL_HAT_DOWN )
        {
            game->HatDown();
        }
        break;
    default:
        // more info on events in SDL: http://sdl.beuc.net/sdl.wiki/SDL_Event
        break;
    }
} 
```

理想情况下，当我按下 d-pad 时，它会继续调用 game->HatUp()。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:01:14.570

在事件轮询之间保存帽子状态。

像这样的东西：

```
map< Uint8, bool > HatStatus; 

while( running )
{
    while (SDL_PollEvent( &event )) 
    {
        switch (event.type)
        {
        ...
        case SDL_JOYHATMOTION:  /* Handle Hat Motion */
            HatStatus[ SDL_HAT_UP    ] = ( true == event.jhat.value & SDL_HAT_UP    );
            HatStatus[ SDL_HAT_LEFT  ] = ( true == event.jhat.value & SDL_HAT_LEFT  );
            HatStatus[ SDL_HAT_RIGHT ] = ( true == event.jhat.value & SDL_HAT_RIGHT );
            HatStatus[ SDL_HAT_DOWN  ] = ( true == event.jhat.value & SDL_HAT_DOWN  );
            break;
        ...
        }
    }

    if( HatStatus[ SDL_HAT_UP    ] )    game->HatUp();
    if( HatStatus[ SDL_HAT_LEFT  ] )    game->HatLeft();
    if( HatStatus[ SDL_HAT_RIGHT ] )    game->HatRight();
    if( HatStatus[ SDL_HAT_DOWN  ] )    game->HatDown();

    ...
} 
```

# android - 如何解决非活动 InputConnection 上的 showStatusIcon

> ID：14197721
> 
> 赞同：22
> 
> 时间：2013-01-07T14:15:51.533
> 
> 标签：android

当我关闭我的应用程序时，我在 LogCat 上收到此消息 `showStatusIcon on inactive InputConnection`

我在某处读过，但我不确定，这是否意味着我没有发布与内存使用有关的东西。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T11:52:10.237

**从文档**

InputConnection 接口是从 InputMethod 返回到接收其输入的应用程序的通信通道。它用于执行诸如读取光标周围的文本、将文本提交到文本框以及向应用程序发送原始键事件等操作。

**此外，进一步阅读显示**

getExtractedText()：如果输入连接无效（例如其进程崩溃）或客户端响应文本的时间过长（有几秒钟的时间返回），此方法可能会失败。在任何一种情况下，都会返回 null。

它似乎还监视对此类文本的更改，并警告更改。

要找出问题所在，您必须探索您所做的任何查询，可能是围绕 listViews 或布局中的列表。

如果您没有任何视图，例如它在后台随机发生，那么我建议它不是 UI 元素问题，因此请忽略文本字段等。它可能是在游标中存储信息或请求游标的后台服务。

另外，问题是否来自您的应用程序？或者也许是您最近安装的其他人。列出完整的 logCat 跟踪。有人可能会认识到这个问题。

我会冒险猜测，如果你没有写一些具体的内容，那就是它的其他人的日志消息，或者你使用的库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T19:35:43.147

当上一页（或类）中的输入连接尚未关闭时，就会出现此类问题。检查您是否关闭了上一课中的输入连接（通过给`connection.close()`）。

从

[Android输入连接错误](https://stackoverflow.com/questions/9633188/android-input-connection-error)

# php - PHPMailer 给我“无名”附件

> ID：14197722
> 
> 赞同：2
> 
> 时间：2013-01-07T14:15:56.033
> 
> 标签：php, phpmailer, email-attachments

[我的问题和这个](https://stackoverflow.com/questions/12062939/phpmailer-noname-attachment)完全一样，我得到的附件没有扩展名，如果我手动将扩展名放到文件中，文件仍然无法识别。什么可能导致这种情况？

这是附件添加部分，其余为标准：

```
 foreach($_FILES['uploads']['name'] as $key => $file){
    $mail->attachment[] = array($_FILES['uploads']['tmp_name'][$key], $_FILES['uploads']['name'][$key]);
    $mail->boundary = "_b" . md5(uniqid(time()));
  } 
```

编辑：

在每个附件的开头我得到这个：

```
name="phpmailer.inc.php"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="phpmailer.inc.php" 
```

这是正常的吗？

编辑：另外，我将文件复制到服务器并从那里将它们添加到附件中，但所有文件都是“noname”并且大小正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:18:53.013

我认为您不能像临时文件那样使用`$_FILES['uploads']['tmp_name'][$key]`文件作为附件`$_FILES['uploads']['tmp_name']`。

首先，您需要将该文档/文件上传到服务器，然后将其附加到邮件中。不仅仅是它会起作用。

# c# - Linq - 哪个查询更快？

> ID：14197726
> 
> 赞同：-1
> 
> 时间：2013-01-07T14:16:03.697
> 
> 标签：c#, linq

我想知道这两个中哪一个更好用：

1：`context.Threads.Where(thread => thread.Id == threadId).Select(thread => thread.Posts).(...)`

或者

2：`context.Posts.Where(post=> post.thread.Id == threadId).Select().(...)`

两者有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:26:00.280

除了有多少线程和帖子之外，您还需要检查两个查询生成的 SQL 以及它们各自在 SQL Profiler 中花费的时间。

在旁注中，我质疑你的两个问题。我假设您正在使用实体框架（基于我看到您提出的其他问题），因此您的 Post 类应该在该表上已经有一个 ThreadID（基于我在这里看到的导航属性，您应该在数据库的 Post 表上有一个 ThreadID 字段）。在这种情况下，以下查询可能更适合您的需求：

```
context.Posts.Where(p => p.threadID == threadId); 
```

通过这样做，您将删除对 Threads 表的任何提及，这意味着 EF 将不必使用任何连接语句来获取您请求的信息。由于它不会包含该 Threads 表，因此这应该是从单个线程获取所有帖子的最快方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:20:29.533

这取决于有多少线程和有多少帖子。

# java - 更改使用 Outlook 电子邮件发送的字符串颜色

> ID：14197728
> 
> 赞同：0
> 
> 时间：2013-01-07T14:16:08.447
> 
> 标签：java, email, html-email

我正在尝试使用电子邮件服务更改作为电子邮件的一部分发送的字符串的颜色，但我找不到任何好的资源。这是我现在拥有的代码：

```
String message = "hello world";
emailObject.setBody(message);
emailService.sendEmail(emailObject); 
```

我希望“hello world”以红色文本出现，而不是默认的黑色文本。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:19:06.973

尝试这样的事情：

```
String message = "<span style=\"color: #FF0000\">hello world</span>"; 
```

您只需要在文本中使用 HTML 标记。

要使 HTML 正常工作，您需要将内容类型更改为“text/html”，告诉您的电子邮件客户端内容应该重新呈现为 HTML，而不是纯文本。

**编辑。**

您将需要使用 MimeMailMessage、MimeMessage 和 MimeMessageHelper 在您的消息中使用 HTML。下一次，试着解释更多你的问题，说你正在使用的 API，显示更多代码等。

您可以在文档中找到一些示例。

*   [哑剧消息](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeMessage.html)
*   [MimeMailMessage](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/mail/javamail/MimeMailMessage.html)
*   [MimeMessageHealper](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/mail/javamail/MimeMessageHelper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:18:45.753

尝试...

```
String message = "<span style='color:red;'>hello world</span>"; 
```

# ios - iOS 6 中不同的 UITextField 键盘解除行为

> ID：14197732
> 
> 赞同：0
> 
> 时间：2013-01-07T14:16:20.083
> 
> 标签：ios, ios6, resignfirstresponder, becomefirstresponder

我有一些简单的代码，通过依次在每个字段上调用“becomeFirstResponder”来移动 UITextFields 之间的“firstResponder”。

在 iOS 5 中，键盘一直显示，直到显示 resignFirstResponder 的最终文本字段。

但是，在 iOS 6 中，每次移动第一响应者时，键盘都会执行关闭和重新出现动画。在调用 becomeFirstResponder 以移动响应者（或在任何相关方法中）时，我绝不会调用 resignFirstResponder - 这似乎是 iOS 6 中的新默认行为。

这是令人分心的，也是不受欢迎的。

我查看了 Apple 文档，找不到任何关于如何管理键盘动画的更改。

任何人都可以向我推荐这些更改的文档吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:56:33.857

发现了问题。

我的代码也在调用，

```
[self.tableView reloadData]; 
```

...当调用 becomeFirstResponder 时。

因此，在重绘发生时键盘被关闭。

这肯定会导致 iOS 5 和 6 之间的键盘行为不同。尽管考虑到 6 中的行为似乎并非完全不合理。

感谢@Fogmeister 的帮助。

# iphone - 如何实现像 instagram 这样的粘性标题功能？

> ID：14197734
> 
> 赞同：2
> 
> 时间：2013-01-07T14:16:20.897
> 
> 标签：iphone, ios, ipad

我在 Iphone 中有一个应用程序，我想在其中添加像 instagram 这样的粘性标题功能。我正在搜索一段时间，但是每个人都在谈论 CSS 设计。有人可以帮助我如何在我们的 tableview 中实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:22:24.983

你是指 Instagram 上的名字吗？

如果是这样，那么它看起来只是普通样式的标准标题`UITableView`。

他们似乎所做的是给每张照片一个表格的一部分（而不是一行），然后在每个部分中是照片的一行，评论的行，喜欢的行等。

如果您使用`UITableViewStylePlain`而不是，`UITableViewStyleGrouped`那么它当前正在做的就是标准行为。

# sql - TSQL 从 xml 值中删除选项卡和换行符

> ID：14197735
> 
> 赞同：3
> 
> 时间：2013-01-07T14:16:29.613
> 
> 标签：sql, sql-server-2008, tsql, xquery-sql

我正在尝试使用以下查询从 xml 列字段中选择一个值：

```
SELECT LTRIM(LocalData.value('(/root/questionphrase[@ln="nl"]/xhtml/p)[1]', 'nvarchar(max)'))
FROM Question 
```

我的xml的结构：

```
<root>
  <questionphrase ln="nl">
    <xhtml>
      <p>
         Data I want to select</p>
    </xhtml>
  </questionphrase>
</root> 
```

我正在取回预期值，但它们都以 2 个空格开头。经过一番调查，结果发现在字符串的开头有一个制表符`char(9)`和一个换行符。`char(10)`有没有一种通用的方法可以在不手动替换它们的情况下从输出中去除这些字符？我希望 LTRIM 和 RTRIM 能做到这一点，但到目前为止还没有运气。

**注意：**我只想替换字符串开头和结尾的字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:40:47.457

您可以创建单独的修剪功能：

修剪功能：

```
CREATE FUNCTION dbo.LTrimE(@str VARCHAR(MAX)) RETURNS VARCHAR(MAX)
AS
BEGIN
    DECLARE @trimchars VARCHAR(10)
    SET @trimchars = CHAR(9)+CHAR(10)+CHAR(13)+CHAR(32)
    IF @str LIKE '[' + @trimchars + ']%' SET @str = SUBSTRING(@str, PATINDEX('%[^' + @trimchars + ']%', @str), 8000)
    RETURN @str
END
GO
CREATE FUNCTION dbo.RTrimE(@str VARCHAR(MAX)) RETURNS VARCHAR(MAX)
AS
BEGIN
    DECLARE @trimchars VARCHAR(10)
    SET @trimchars = CHAR(9)+CHAR(10)+CHAR(13)+CHAR(32)
    IF @str LIKE '%[' + @trimchars + ']'
    SET @str = REVERSE(dbo.LTrimX(REVERSE(@str)))
    RETURN @str
END
GO
CREATE FUNCTION dbo.TrimE(@str VARCHAR(MAX)) RETURNS VARCHAR(MAX)
AS
BEGIN
    RETURN dbo.LTrimE(dbo.RTrimE(@str))
END
GO 
```

您的查询将如下所示

```
SELECT dbo.TRIME(LocalData.value('(/root/questionphrase[@ln="nl"]/xhtml/p)[1]',
'nvarchar(max)'))
FROM Question 
```

[修剪功能的原始来源](http://blog.sqlauthority.com/2008/10/10/sql-server-2008-enhenced-trim-function-remove-trailing-spaces-leading-spaces-white-space-tabs-carriage-returns-line-feeds/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:44:15.000

您可以尝试构建一个 CLR 函数，它将字符串值作为参数。

然后在 c# 中做你想做的事，并返回正确的修剪值，如下所示：

```
 [Microsoft.SqlServer.Server.SqlFunction(DataAccess=DataAccessKind.None)]
    [return: SqlFacet(MaxSize = -1)]
    public static SqlString TrimValue([SqlFacet(MaxSize = -1)] SqlString value) {
        if(value.IsNull || value.Value.Length == 0) return value;

        string trimmedValue = value.Trim();
        return new SqlString(trimmedValue);
    } 
```

# apache - htaccess 中的特定 301 重定向问题

> ID：14197737
> 
> 赞同：1
> 
> 时间：2013-01-07T14:16:35.040
> 
> 标签：apache, .htaccess, mod-rewrite

我遇到了 URL 格式的问题。

我需要发送 /en 到 /

问题是我只需要 /en（确切地说），而不是 /en/foo...

我知道如何使用以 .html 结尾的字符串，但在这里我有其他具有 /en/stuff 的 URL，它们也匹配。

非常感谢帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:21:53.347

您需要在`RewriteCond`例如指定字符串的结尾

```
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/en$
RewriteRule ^(.*)$  / [L,R=301] 
```

请注意，条件模式和重写规则模式是 perl 兼容的正则表达式（有一些补充）：

对于锚：

*   **^** - 起点锚
*   **$** - 行尾锚

**编辑**

顺便说一句，在[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)有一个非常好的*htaccess 测试器*，您可以使用它来测试规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:39:59.950

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^en/?$ / [L,R=301,NC] 
```

这将重定向`/en`或`/en/`还要`/`注意，`/EN`由于此处使用了 NC（忽略大小写）标志，这也将被处理。

# java - 通过保持不同屏幕分辨率的纵横比计算图像大小

> ID：14197740
> 
> 赞同：6
> 
> 时间：2013-01-07T14:17:04.003
> 
> 标签：java, image, aspect-ratio

我正在尝试通过保持纵横比来调整图像大小。它应该足够大以填充屏幕而没有空白空间，如果需要，一些图像应该在屏幕外。

下图显示了如何根据黑色屏幕大小调整黄色图像的大小。

![在此处输入图像描述](../Images/cb0ca3c1461c2bbb19c7c5e290e86eee.png)

这是我实际使用的代码，有没有更好的方法来做到这一点？

```
if(bwidth > bheight) {
    if(bwidth > swidth && bheight > sheight) {
        new_height = sheight;
        new_width = (int) ((double) (bwidth/100)*(sheight/((double) (bheight)/100)));

    } else if(bwidth > swidth && bheight < sheight) {
        new_height = sheight;
        new_width = (int) ((double) (bwidth/100)*(sheight/((double) (bheight)/100)));

    } else if(bwidth < swidth && bheight < sheight) {
        new_height = sheight;
        new_width = (int) ((double) (bwidth/100)*(sheight/((double) (bheight)/100)));

    } else if(bwidth < swidth && bheight > sheight) {
        new_height = sheight;
        new_width = (int) ((double) (bwidth/100)*(sheight/((double) (bheight)/100)));

    } else if(bwidth >= swidth && bheight >= sheight) {
        new_width = swidth;
        new_height = (int) ((double) (bheight/100)*(swidth/((double) (bwidth)/100)));
    }

} else if(bwidth < bheight) {
    if(bwidth > swidth && bheight > sheight) {
        new_width = swidth;
        new_height = (int) ((double) (bheight/100)*(swidth/((double) (bwidth)/100)));

    } else if(bwidth < swidth && bheight > sheight) {        
        new_width = swidth;
        new_height = (int) ((double) (bheight/100)*(swidth/((double) (bwidth)/100)));

    } else if(bwidth < swidth && bheight < sheight) {
        new_width = swidth;
        new_height = (int) ((double) (bheight/100)*(swidth/((double) (bwidth)/100)));

    } else if(bwidth < swidth && bheight < sheight) {
        new_width = swidth;
        new_height = (int) ((double) (bheight/100)*(swidth/((double) (bwidth)/100)));

    } else if(bwidth >= swidth && bheight >= sheight) {
        new_width = swidth;
        new_height = (int) ((double) (bheight/100)*(swidth/((double) (bwidth)/100)));

    }
} 
```

*   swidth = 屏幕宽度
*   高度 = 屏幕高度
*   bwidth = 图像宽度
*   bheight = 图像高度

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T14:27:50.327

**Compare ratios.**

If the width to height ratio of the image is more than the width to height ratio of the screen, then you know you'll be using the screen width and calculating the height. Otherwise you'll be using the screen height and calculating the width. Just make sure none of the heights are zero!

Note that the code here will resize the image so that it will always fill the screen. This effectively crops off any additional part of the image. To make the image as large as possible while being entirely visible, change the `<` to a `>` in the first line.

```
if (bwidth / bheight < swidth / sheight) {
    new_width = swidth;
    new_height = (int) Math.floor((double) bheight
                                  * (double) swidth / (double) bwidth);
} else {
    new_height = sheight;
    new_width = (int) Math.floor((double) bwidth
                                 * (double) sheight / (double) bheight);
} 
```

I also made a couple more improvements:

*   Simplified the equations. Dividing a numerator and denominator both by 100 doesn't do anything.
*   Simplified the typecasting. I don't know the type of each variable, but they all need to be doubles.
*   Used `Math.floor` instead of just a typecast to `int` to make sure it doesn't round up.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-07T14:43:10.433

好吧，谢谢@Erick Robertson 改变了一点，但现在可以了！

这是更改后的代码：

```
if (bwidth / swidth <  bheight / sheight) {
    new_width = swidth;
    new_height = (int) Math.floor((double) bheight 
                                  * (double) swidth / (double) bwidth);
} else {
    new_height = sheight;
    new_width = (int) Math.floor((double) bwidth 
                                 * (double) sheight / (double) bheight);
} 
```

# ruby-on-rails-3.2 - cap deploy:web:disabled 不存在

> ID：14197743
> 
> 赞同：1
> 
> 时间：2013-01-07T14:17:11.500
> 
> 标签：ruby-on-rails-3.2, capistrano

以下是来自 cap -T 的内容

```
cap bundle:install                    # Install the current Bundler environment.
cap delayed_job:restart               # Restart the delayed_job process
cap delayed_job:start                 # Start the delayed_job process
cap delayed_job:stop                  # Stop the delayed_job process
cap deploy                            # Deploys your project.
cap deploy:assets:clean               # Run the asset clean rake task.
cap deploy:assets:precompile          # Run the asset precompilation rake task.
cap deploy:check                      # Test deployment dependencies.
cap deploy:cleanup                    # Clean up old releases.
cap deploy:cold                       # Deploys and starts a `cold' application.
cap deploy:create_symlink             # Updates the symlink to the most recen...
cap deploy:migrate                    # Run the migrate rake task.
cap deploy:migrations                 # Deploy and run pending migrations.
cap deploy:pending                    # Displays the commits since your last ...
cap deploy:pending:diff               # Displays the `diff' since your last d...
cap deploy:restart                    # Blank task exists as a hook into whic...
cap deploy:rollback                   # Rolls back to a previous version and ...
cap deploy:rollback:code              # Rolls back to the previously deployed...
cap deploy:setup                      # Prepares one or more servers for depl...
cap deploy:start                      # Blank task exists as a hook into whic...
cap deploy:stop                       # Blank task exists as a hook into whic...
cap deploy:symlink                    # Deprecated API.
cap deploy:update                     # Copies your project and updates the s...
cap deploy:update_code                # Copies your project to the remote ser...
cap deploy:upload                     # Copy files to the currently deployed ...
cap imagemagick:install               # Install the latest release of Imagema...
cap invoke                            # Invoke a single command on the remote...
cap libcurl:install                   # Install the latest release of libcurl
cap libxml:install                    # Install the latest release of libxml
cap multistage:prepare                # Stub out the staging config files.
cap nginx:install                     # Install latest stable release of nginx
cap nginx:restart                     # restart nginx
cap nginx:setup                       # Setup nginx configuration for this ap...
cap nginx:start                       # start nginx
cap nginx:stop                        # stop nginx
cap nodejs:install                    # Install the latest relase of Node.js
cap postgresql_client:create_database # Create a database for this application.
cap postgresql_client:dump            # Dump database
cap postgresql_client:duplicate       # Duplicate database
cap postgresql_client:get             # Get database
cap postgresql_client:import          # Import database
cap postgresql_client:install         # Install dev libraries PostgreSQL.
cap postgresql_client:restore         # Restore from ftp
cap postgresql_client:setup           # Generate the database.yml configurati...
cap postgresql_client:symlink         # Symlink the database.yml file into la...
cap postgresql_server:install         # Install the latest stable release of ...
cap production                        # Set the target stage to `production'.
cap rbenv:install                     # Install rbenv, Ruby, and the Bundler gem
cap rbenv:install_ruby                # Install ruby
cap rbenv:upgrade                     # Upgrade rbenv
cap shell                             # Begin an interactive Capistrano session.
cap staging                           # Set the target stage to `staging'.
cap unicorn:restart                   # restart unicorn
cap unicorn:setup                     # Setup Unicorn initializer and app con...
cap unicorn:start                     # start unicorn
cap unicorn:stop 
```

如您所见，没有 cap deploy:web:disabled 任务。它在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:56:04.660

该功能最近被提取到一个[单独的 gem](https://github.com/tvdeyen/capistrano-maintenance)中：

通过 ruby​​gems 安装 gem：

```
gem install capistrano-maintenance 
```

并将这一行放入您的 deploy.rb 文件中：

```
require 'capistrano/maintenance' 
```

# android - Android Emulator 没有安装我的应用程序

> ID：14197747
> 
> 赞同：1
> 
> 时间：2013-01-07T14:17:23.980
> 
> 标签：android, android-emulator, avd

这是我的问题：我使用 eclipse 创建了一个应用程序，并且已经在我的 Galaxy Ace 上对其进行了测试。一切正常。我也需要让它在模拟器上工作，所以我创建了一个新的 AVD 并启动了我的应用程序。模拟器一出现，我就将其解锁，并且没有我的应用程序的痕迹。我已经在每个菜单中进行了搜索。所以，我尝试了一个简单的“Hello World”项目，但它是一样的。我还尝试停止 adb.exe 进程，并尝试使用“kill-server”/“start-server”组合但没有成功。

奇怪的是，LogCat 窗口中没有显示错误，并且 DDMS 透视图无法识别任何虚拟设备。

另外，我尝试在控制台中输入“adb -e devices”（当然，在我启动新模拟器之后），但似乎找不到任何设备。

有人知道如何解决吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:19:32.957

解决了！

这里的步骤：

1.启动虚拟设备

2.打开DDMS透视图

3.打开控制台，在“platform-tools”目录下输入“adb kill-server”

4.现在，输入“adb devices”

5.检查您的 DDMS 透视图，现在您应该看到虚拟设备

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:32:37.547

更改您的工作区，创建一个新的...这对我有帮助.. 或者如果仍然没有，请重新安装 eclipse 和插件..

另外，我会遇到我没有安装的问题，因为我更改了启动器活动清单中的 android:name .. 不要更改它保留它

```
 <application
        android:icon="@drawable/logo"
        android:label="@string/app_name"  
        >
        <activity
            android:name=".Splash"
            android:label="@string/app_name" 
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity> 
```

# mysql - 它没有在查询中显示任何结果

> ID：14197749
> 
> 赞同：0
> 
> 时间：2013-01-07T14:17:38.457
> 
> 标签：mysql, sql

```
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer, r.ReplyType, 
q.QuestionMarks
FROM Answer an 
INNER JOIN Question q ON q.QuestionId = an.QuestionId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 
```

我上面的查询显示了一组空的结果，即使它应该显示一些结果。假设显示每个不同的问题（我的意思是它应该清楚地显示行，以便没有重复的行在所有列中包含完全相同的数据）任何人都可以修复查询以便输出它应该的结果输出？以下是表格：

会话表：

```
SessionId  SessonName
3          ANDES 
```

问题表：

```
QuestionId  SessionId   QuestionNo  QuestionContent       NoofAnswers   ReplyId     QuestionMarks   OptionId
1           3           1           What is 2+2?          1                 1           5               2
2           3           2           What is 2+2?          1                 1           5               2
3           3           3           Name these 2 flowers  2                 2           5               4 
```

答案表：

```
AnswerId (Auto)  QuestionId  Answer
1                1           A
2                1           B
3                2           A
4                2           D
5                3           C 
```

回复表：

```
ReplyId  ReplyType
1        Single
2        Multiple 
```

选项表：

```
OptionId OptionType
1        A-C
2        A-D
3        A-E
4        A-F 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:53:29.653

我稍微改变了你的查询，我得到了结果。首先，我改为使用 a `LEFT JOIN`，然后如果在附加表中没有答案等，您将收到问题返回。其次，由于您使用的是聚合函数`GROUP_CONCAT()`，因此需要使用`GROUP BY`：

```
SELECT
  q.QuestionContent, 
  o.OptionType, 
  q.NoofAnswers, 
  GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer, 
  r.ReplyType, 
  q.QuestionMarks
FROM Question q
LEFT JOIN Answer an
  ON q.QuestionId = an.QuestionId
LEFT JOIN Reply r 
  ON q.ReplyId = r.ReplyId 
LEFT JOIN Option_Table o 
  ON q.OptionId = o.OptionId 
group by q.QuestionContent 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/4bb52/12)

这将返回结果：

```
|      QUESTIONCONTENT | OPTIONTYPE | NOOFANSWERS | ANSWER | REPLYTYPE | QUESTIONMARKS |
----------------------------------------------------------------------------------------
| Name these 2 flowers |        A-F |           2 |      C |  Multiple |             5 |
|         What is 2+2? |        A-D |           1 |    ABD |    Single |             5 | 
```

# c# - c# winforms事件

> ID：14197752
> 
> 赞同：2
> 
> 时间：2013-01-07T14:17:57.833
> 
> 标签：c#, .net, winforms, events, button

在我的 c# winform 应用程序中，我有一个按钮，单击该按钮时，它会执行一些可能需要一些时间的计算。

我也有一个`label.visible = false`我想`label.visible = true`在单击按钮后立即执行的操作，以便用户可以看到该应用程序正在运行。

事情是，即使`label.visible = true`是方法中的第一件事`button1_Click(object sender, EventArgs e)`，它也只会在执行计算后在最后切换到可见。

如何在 button_click 之后立即显示标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:18:54.117

如果您需要应用程序在处理应用程序时保持响应，请查看[Background Worker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

您可以通过以下方式强制您的表单更新和处理任何后台消息：

```
Application.DoEvents(); 
```

就在您更改标签之后 - 尽管这可能是一个有点骇人听闻的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:20:12.810

您的计算正在 UI 线程上执行。这意味着在您设置标签的可见性后，它会阻止 UI 刷新。您应该考虑使用任务在另一个线程上进行计算。这将允许 UI 在看似可以在后台运行的长时间操作期间做出响应。

例如

```
var taskCalc = Task.Factory.StartNew(() => //Do Calculation ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T14:21:00.133

有几种方法可以解决这个问题。

一种方法（最简单的）是调用

```
this.Refresh(); 
```

在您将标签设置为可见之后。

另一种是在后台线程中进行计算。最简单的方法是使用`BackgroundWorker`. 然后，您的主线程可以在后台工作线程执行计算的同时继续为 UI 提供服务（刷新表单、响应按钮等）。

有关后台工作线程的更多信息，请参见[http://www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T14:54:32.837

就像其他人所说：您正在 UI 线程上执行您的工作。我正在向您展示另一种实现您需要的有效方法。您可以使用匿名委托将您的工作移至单独的线程。

```
(new System.Threading.Thread(() =>
        {
            dowork(); // What ever work you need put here.
        })).Start(); 
```

# android - Android 视频编辑器类

> ID：14197757
> 
> 赞同：9
> 
> 时间：2013-01-07T14:18:27.950
> 
> 标签：android, java-native-interface

我正在尝试创建一个 Android 视频编辑应用程序。我注意到在 SDK 源代码中，“android.media.videoeditor”包中有许多类似乎可以满足我的需要；但是，当我尝试将它们导入我的 Java 项目时，我不能，因为根据 Eclipse，它们不存在！我检查了“android.jar”的内容，果然，这些类丢失了。

该包中的一个类 - MediaArtistNativeHelper.java - 使用 JNI 调用它需要的任何本机方法，据我所知，这些方法是用 C++ 实现的（这是否意味着我需要单独构建它们？）

我的问题是，如何在我的项目中使用这些类？

我正在 Mac 上使用 Eclipse 开发应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T10:03:38.197

**[android.media.videoeditor](https://github.com/android/platform_frameworks_base/tree/master/media/java/android/media/videoeditor)包是一个内部/隐藏包**，因为它上面的类/接口的 Javadoc 包含 {@hide} 或 @hide 注释**。**

**您不能在应用程序中使用它，**并且正如您所见，该 API 不存在于包含可用公共 API 的 android.jar 中。仅供参考，包的 javadoc 可以在[这里](http://developer.oesf.biz/em/developer/reference/eggplant/android/media/videoeditor/package-summary.html)看到。

要向您的应用程序添加媒体功能，请改用[android.media 包](https://developer.android.com/reference/android/media/package-summary.html)，它：

> 提供管理音频和视频中各种媒体接口的类。
> 
> 媒体 API 用于播放和在某些情况下录制媒体文件。这包括音频（例如，播放 MP3 或其他音乐文件、铃声、游戏音效或 DTMF 音调）和视频（例如，播放通过网络或本地存储流式传输的视频）。
> 
> 包中的其他特殊类提供了在位图中检测人脸的能力（FaceDetector），控制音频路由（到设备或耳机）和控制警报，如铃声和电话振动（AudioManager）。

android.jar 的内容显示了 android.media 包包含的内容：

（取自 adt-bundle-linux/sdk/platforms/ **android-17** / android.jar）

![在此处输入图像描述](../Images/1df6343db8e0547d7b1158a62f6f9462.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:01:13.160

在编译时无法访问内部和隐藏的包，因为 android sdk 没有它们。

解决这个问题并不容易。但是，您可以尝试本教程[http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-2-hacking-around/](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-2-hacking-around/)

本教程解释了如何从设备中提取“完整”的 android.jar，以便您可以在编译时获取隐藏的包。一旦你在编译时有了“隐藏”的包，你就可以用它们来构建你的应用程序。这听起来像是灵丹妙药，但它有很大的缺点。一旦你使用了非标准的 API，所有的赌注都没有了。如果在未来的操作系统升级中更改/修改“隐藏”包，它会破坏您的产品。在生产环境中，这种方法会破坏交易，但对于为个人/学术用途开发的应用程序，它可能是你的事。

注意：我没有亲自尝试过，但是在遇到与您类似的问题时发现它（我的答案在其他一些隐藏的包中）。

# javascript - jQuery检测父元素边缘的最佳方法

> ID：14197758
> 
> 赞同：3
> 
> 时间：2013-01-07T14:18:29.750
> 
> 标签：javascript, jquery

我在一个框架内开发了一个小弹出框元素，目的是让这个框架位于一个 facebook 应用程序中。这意味着该应用程序被限制为 810 像素，并且不会出现出血。在我的应用程序中，您可以悬停一个元素，该元素将创建一个带有稍大元素的小弹出框，并在其中发出号召性用语。

然而，这不起作用，因为出血会切断图像。所以我正在玩弄检测父边缘并在应用程序窗口中偏移或居中弹出框的想法。你认为会是：

a) 最好的选择 b) 最快的选择 c) 为什么

真的很感谢对此的一些意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:27:43.757

```
$(elem).position() 
```

检测左上角元素的位置。要获得右下角，您可以使用

```
$(elem).width()
$(elem).height() 
```

返回元素的大小，以便您可以计算底部和右侧位置。

我会创建一个 ui 函数，它将一次返回所有 4 个值

```
function get_position(e) {
    var res = new Object();
    var pos = e.position();
    res.left = pos.left;
    res.top = post.top;
    res.right = res.left + e.width();
    res.bottom = res.top + e.height();
    return res;
} 
```

并为父元素调用它`get_position($('#id').parent())`

请注意，如果您使用边距、内边距和边框，这些值可能会出乎意料。在这种情况下，您可以使用`outerWidth()`jquery 函数。

# java - Grails：使用控制器中的java类

> ID：14197763
> 
> 赞同：0
> 
> 时间：2013-01-07T14:18:38.873
> 
> 标签：java, grails

*更新

我是 grails 和 stack 的新手。我正在尝试在控制器中实例化一个 java 类。我的 .java 文件位于 /src 文件夹中。我已经在 grails 之外测试了这个类，它工作正常。但是，当我尝试从控制器实例化它时，我得到一个空指针异常。我的相关代码：

```
package matrices

import org.springframework.dao.DataIntegrityViolationException

class MFController {

    static allowedMethods = [save: "POST", update: "POST", delete: "POST"]

    def index() {
        MatrixFactorization m = new MatrixFactorization()
        def answer = m.getAnswer().toString()
        return answer
    } 
```

我的踪迹：

```
Message: null
    Line | Method
->>   45 | run       in matrices.MatrixFactorization
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     36 | <init>    in     ''
|     10 | index . . in matrices.MFController$$ENtqy0Aa
|    195 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread 
```

矩阵分解类 35-45

```
public MatrixFactorization() {

double[] l1 = { 5, 3, 0, 1 };

double[] l2 = { 4, 0, 0, 1 };

double[] l3 = { 1, 1, 0, 5 };

double[] l4 = { 1, 0, 0, 4 };

double[] l5 = { 0, 1, 5, 4 }; //45 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:01:51.770

如堆栈跟踪的第一行所示，问题出在类`run`方法的第45行。`MatrixFactorization`该类正在实例化，但它在内部失败。调用之前是否缺少一些配置或设置`getAnswer()`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:12:35.273

很高兴这对你有用。这也是作为答案发布的评论。

Java 类是否在包中？我假设矩阵是因为您的代码片段没有显示导入。我在访问默认包中的类时遇到了问题。如果还没有的话，试着把它放在一个测试包下，然后把它导入你的控制器。

# java - 使用 CDT 的抽象语法树 API 生成/编写 C 代码？

> ID：14197771
> 
> 赞同：7
> 
> 时间：2013-01-07T14:18:57.520
> 
> 标签：java, eclipse, eclipse-cdt, abstract-syntax-tree

我已经能够使用 CDT 的 AST API 成功解析源代码。我的问题正好相反：如何以编程方式构建 C AST，然后告诉它自己写入文件？我已经看过 ASTWriter 类（但那是内部的）并且找不到任何关于构建实际 AST 的教程或文档。

我找到了一篇论文，涵盖了我想做的事情：[生成可重写抽象语法树](http://jeff.over.bz/papers/2008/sle2008.pdf)，如果我可以构造树并说“自己写”，那么生成代码看起来会很容易。这在 CDT 中是否可行，我该如何开始（最好没有弃用/内部方法？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-21T13:52:52.687

您需要的是使用 ASTWriter：

```
ASTWriter writer = new ASTWriter()
String code = writer.write(myAST); 
```

然后，您可以将字符串转储到 Eclipse 资源插件上下文中的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:57:03.140

我建议您从探索[CRefactoring](https://github.com/eclipse/cdt/blob/master/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/refactoring/CRefactoring.java)及其子类（例如[ExtractFunctionRefactoring](https://github.com/eclipse/cdt/blob/master/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/refactoring/extractfunction/ExtractFunctionRefactoring.java)）开始。

CDT 重构框架试图解决许多问题：

1.  让用户在实际将更改提交到源代码之前预览更改。
2.  对未保存的文件错误进行操作（例如在未保存的源代码编辑器中重构代码）
3.  在新生成的代码中遵守用户代码格式设置。
4.  跨越多个源文件的可撤销事务。

我很确定即使您不需要所有这些功能，这两个类也应该是一个很好的起点。

# java - Android - 第二次加载文件时出现 java.lang.NullPointerException

> ID：14197776
> 
> 赞同：0
> 
> 时间：2013-01-07T14:19:24.147
> 
> 标签：java, android, file-io, io

在我的应用程序中，我必须加载文件夹中不同文件中包含的数据。第一次运行良好，但第二次我想加载文件时它会强制关闭（在我修改它们之后）

```
01-07 14:55:51.034: W/dalvikvm(3650): threadid=1: thread exiting with uncaught exception (group=0x40018560)
01-07 14:55:51.044: E/AndroidRuntime(3650): FATAL EXCEPTION: main
01-07 14:55:51.044: E/AndroidRuntime(3650): java.lang.NullPointerException
01-07 14:55:51.044: E/AndroidRuntime(3650):     at com.hangin.around.Modele.<init>(Modele.java:27)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at com.hangin.around.MainActivity$5.onClick(MainActivity.java:386)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at android.view.View.performClick(View.java:2506)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at android.view.View$PerformClick.run(View.java:9112)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at android.os.Handler.handleCallback(Handler.java:587)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at android.os.Looper.loop(Looper.java:130)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at android.app.ActivityThread.main(ActivityThread.java:3835)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at java.lang.reflect.Method.invokeNative(Native Method)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at java.lang.reflect.Method.invoke(Method.java:507)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
01-07 14:55:51.044: E/AndroidRuntime(3650):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我在 MainActivity 中加载代码的地方：

```
...
    @Override
    protected void onCreate(Bundle savedInstanceState) {

    ...

        startButton.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {

                ...

                // Checking if storage is available
                String storageState = Environment.getExternalStorageState();

                if (storageState.equals(Environment.MEDIA_MOUNTED)){
                    // Listing the files contained in the folder
                    listFiles = listFiles(new File(Environment.getExternalStorageDirectory(), "HanginAround" + File.separator + "modeles" ));

                    // Creating models
                    if (!(listFiles == null)){
                        listeModeles = new Modele[NB_MODELES];
                        for (int i = 0; i < listFiles.length ; i++){
                            listeModeles[i] = new Modele(listFiles[i]); 
                        } // for
                    }// if (listFiles != 0)
                }// if (MEDIA_MOUNTED)
                else {
                    // If storage is unavailable, then show a popup indicating it's not available
                    ...
                }

                ...

            }
        });

        ...

    }

    public File[] listFiles(File directory) {
        // This function return all *.csv files contained in the folder specified in the parameters

        // Listing all files in the folder
        File[] list = directory.listFiles();
        ArrayList<File> arrayListOfFiles = new ArrayList<File>();

        if(!(list == null)) {
            for (int i = 0; i < list.length; i++) 
            {
               if (list[i].isFile() && ( (list[i].getName().endsWith(".csv")) || (list[i].getName().endsWith(".CSV")) ) ) 
               {
                   Log.d(TAG, "MainActivity : " + list[i].getName());
                   arrayListOfFiles.add(list[i]);
                   NB_MODELES += 1;
               } // if ( *.csv )
            } // for ( i < list.length )
        } // if (!(list == null))

        if (NB_MODELES == 0){
            // Showing a popup indicating there's no models in the directory
            ...
        }
        else {
            File[] listOfFiles = new File[NB_MODELES];

            Iterator<File> it =  arrayListOfFiles.iterator();
            int i = 0;

            while (it.hasNext()){
                listOfFiles[i] = (File) it.next();
                i++;
            }

            return listOfFiles; 
        }
        return null;
    } 
```

这是我的班级 Modele ：

```
package com.hangin.around;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.LinkedList;
import java.util.Queue;
import java.util.StringTokenizer;

import android.util.Log;

public class Modele {

    private  String nom;

    private Queue<double[]> fifo = new LinkedList<double[]>();

    private File file ;
    private final static String TAG = "Modele";

    public Modele(File parFile)
    {
        file = parFile;
        // Cutting off the extention from the file name
        String strLine = file.getName();
        StringTokenizer string = new StringTokenizer(strLine, ".");
        nom = string.nextToken();

        // Reading the file
        try{
            // Open the file that is the first 
            // command line parameter
            FileInputStream fstream = new FileInputStream(file);
            // Get the object of DataInputStream
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            strLine = "";
            //Read File Line By Line
            while ((strLine = br.readLine()) != null)   {
                // Add each value into a table
                StringTokenizer stringTokenizer = new StringTokenizer(strLine, ";");
                double values[] = new double[3];
                int i=0;

                while (stringTokenizer.hasMoreTokens()) {
                    values[i]= Double.parseDouble(stringTokenizer.nextToken());                 
                    i++;        
                }
                // Adding the tab into the Queue
                fifo.add(values);               
            }

            // Close the input stream
            in.close();
        }catch (Exception e){// Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }

    }

    // Class's getters and setters
    public void setNom(String parNom)
    {
        nom=parNom;
    }

    public void setFifo(Queue<double[]> parFifo)
    {
        fifo=parFifo;
    }

    public void setFile(File parFile)
    {
        file=parFile;
    }

    public String getNom()
    {
        return nom;     
    }

    public Queue<double[]> getFifo()
    {
        return fifo;        
    }

    public File getFile()
    {
        return file;        
    }

} 
```

我看不到错误来自哪里，你能帮我吗？提前致谢 ;）

**编辑 ：**

Modele.java 中的第 27 行是

```
String strLine = file.getName(); 
```

MainActivy.java 中的第 386 行是

```
listeModeles[i] = new Modele(listFiles[i]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:31:44.180

似乎您在重新读取文件之前没有将 NB_MODELES 重置为 0，因此您的文件数组太大（最后为 null）。

请注意，有一些简单的方法可以从列表中创建数组。见[这里](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28%29)。

# exception - 在 Java Play 1.2.3 中上传文件然后将文件存储为字节数组会导致 PersistenceException

> ID：14197779
> 
> 赞同：0
> 
> 时间：2013-01-07T14:19:42.647
> 
> 标签：exception, file-upload, h2, playframework-1.x

我正在创建一个允许管理员用户将图像上传到 Play 的 POST 服务！应用程序，当我测试它时，我正在使用内置的 H2 文件系统数据库。根据

[https://gist.github.com/1256286#file-picture-java-L3](https://gist.github.com/1256286#file-picture-java-L3)

在 Play 中存储这些图像的好方法！是一个字节数组，然后使用`Controller#renderBinary(...)`.

此函数中的`Campaign`对象存储有关活动的所有数据并具有`Banner`对象列表，每个对象基本上是一个图像文件和一些元数据。自定义下的以下方法`Controller`应该接收要上传的图像：

```
public static void putCampaignBanner (Upload bannerFile) {
    Campaign campaign = findCampaignByIdOrNew();

    if(campaign.banners == null) {
        campaign.banners = new LinkedList<Banner>();
    }

    String name = params.get("name", String.class);
    int width = 0;
    int height = 0;
    try {
        BufferedImage image = ImageIO.read(bannerFile.asFile());
        width = image.getWidth();
        height = image.getHeight();
    } catch (IOException e) {
        //it's not a picture.  die gracefully.
        e.printStackTrace();
        renderJSON(new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create().toJson(campaign));
        return;
    }
    if(name==null||name.length()==0) {
        //no name.  die gracefully.  like a swan.
        renderJSON(new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create().toJson(campaign));
        return;
    }

    Banner banner=null;

    for(Banner b: campaign.banners) {
        if(b.name.equals(name)) {
            banner = b;
            break;
        }
    }
    if(banner==null) {
        banner=new Banner();
        banner.name=name;
        banner.campaign = campaign;
        banner.save();
        campaign.banners.add(banner);
    }

    //validate file and populate banner

    //__ vv THIS LINE CAUSES THE EXCEPTION__
    banner.file = bannerFile.asBytes();
    //__ ^^ REMOVING THIS LINE PREVENTS THE EXCEPTION__

    banner.contenttype = bannerFile.getContentType();
    banner.width = width;
    banner.height = height;
    banner.url = getRouterUrlWithId("ImageService.getById", banner.id);

    //__ vv THIS LINE THROWS THE EXCEPTION__
    campaign.save();
    banner.save();

    renderJSON(new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create().toJson(campaign));

} 
```

我正在等待另一个开发人员完成上传表单，所以我正在使用 curl 进行测试：

```
curl http://[ourserver]:9000/TemplatePopulationController/putCampaignBanner -i -F campaignPrimaryId=44 -F name=headerBanner -F bannerFile=@tempimages/pissybiscuit.png 
```

显然我需要存储图像。如何防止 PersistenceException？

更新我尝试将@Lob 注释添加到，`byte[]`并将参数类型更改为`Blob`并因此持久化对象。两者都没有奏效。

检查日志显示服务器遇到了 GenericJDBCException：

```
Caused by: org.h2.jdbc.JdbcBatchUpdateException: Hexadecimal string with odd number of characters: "c73e69c8-3443-489a-b5f0-ef40af99673f|image/jpeg"; 
```

错误实例的日志是：

```
@6d0npdn4l
Internal Server Error (500) for request POST /TemplatePopulationController/putCampaignBanner

Execution exception (In /app/controllers/TemplatePopulationController.java around line 285)
PersistenceException occured : update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=?

play.exceptions.JavaExecutionException: update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=?
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:229)
    at Invocation.HTTP Request(Play!)
Caused by: javax.persistence.PersistenceException: update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=?
    at play.db.jpa.JPABase._save(JPABase.java:50)
    at play.db.jpa.GenericModel.save(GenericModel.java:184)
    at controllers.TemplatePopulationController.putCampaignBanner(TemplatePopulationController.java:285)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:546)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:500)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:476)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:471)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:159)
    ... 1 more
16:06:36,553 INFO  ~ campaignPrimaryId=8
16:06:36,571 WARN  ~ SQL Error: 90003, SQLState: 90003
16:06:36,571 ERROR ~ Hexadecimal string with odd number of characters: "363438fc-f232-401e-9f69-7db499a24ba4|application/octet-stream"; SQL statement: update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=? [90003-170]
16:06:36,572 WARN  ~ SQL Error: 90003, SQLState: 90003
16:06:36,572 ERROR ~ Hexadecimal string with odd number of characters: "363438fc-f232-401e-9f69-7db499a24ba4|application/octet-stream"; SQL statement: update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=? [90003-170]
16:06:36,572 ERROR ~ Could not synchronize database state with session org.hibernate.exception.GenericJDBCException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException (SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:185)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:345)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:795)
    at play.db.jpa.JPABase._save(JPABase.java:47)
    at play.db.jpa.GenericModel.save(GenericModel.java:184)
    at controllers.TemplatePopulationController.putCampaignBanner(TemplatePopulationController.java:285)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:546)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:500)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:476)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:471)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:159)
    at play.server.PlayHandler$NettyInvocation.execute(PlayHandler.java:220)
    at play.Invoker$Invocation.run(Invoker.java:265)
    at play.server.PlayHandler$NettyInvocation.run(PlayHandler.java:200)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.h2.jdbc.JdbcBatchUpdateException: Hexadecimal string with odd number of characters: "363438fc-f232-401e-9f69-7db499a24ba4|application/octet-stream"; SQL statement: update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=? [90003-170]
    at org.h2.jdbc.JdbcPreparedStatement.executeBatch(JdbcPreparedStatement.java:1121)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:1723)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 29 more
16:06:36,591 ERROR ~

@6d0npdn4m
Internal Server Error (500) for request POST /TemplatePopulationController/putCampaignBanner

Execution exception (In /app/controllers/TemplatePopulationController.java around line 285)
PersistenceException occured : update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=?

play.exceptions.JavaExecutionException: update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=?
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:229)
    at Invocation.HTTP Request(Play!)
Caused by: javax.persistence.PersistenceException: update Banner set campaign_id=?, file=?, height=?, name=?, url=?, width=? where id=?
    at play.db.jpa.JPABase._save(JPABase.java:50)
    at play.db.jpa.GenericModel.save(GenericModel.java:184)
    at controllers.TemplatePopulationController.putCampaignBanner(TemplatePopulationController.java:285)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:546)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:500)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:476)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:471)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:159)
    ... 1 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:57:31.517

这是由 Play 和 H2 之间的交互问题引起的。我感谢这篇文章的部分答案：

[http://www.lunatech-research.fr/playframework-file-upload-blob](http://www.lunatech-research.fr/playframework-file-upload-blob)

看来玩！实际上并没有将`Blob`对象作为二进制大对象放入数据库，而是将其作为文件存储在名为“附件”的文件夹中（其路径是可配置的）。此文件夹中的文件都具有 UUID 作为文件名，事实上，我查看了一个渲染为`.png`我试图通过我的服务上传的文件。玩什么！然后存储在数据库中的是文件名和内容类型，例如

```
c73e69c8-3443-489a-b5f0-ef40af99673f|image/jpeg 
```

但是，这里`c73e69c8-3443-489a-b5f0-ef40af99673f`不是十六进制数字，而是文件名。H2 可能会假设它*是*一个十六进制数并尝试对其进行转换，或者播放！可能正在调用 H2 以便它*期望*一个十六进制数存储为`String`. 不管怎样，玩！实际上并没有将 a 存储`Blob`为 SQL BLOB，`String`而是将它尝试存储的值解释为十六进制值。

```
Caused by: org.h2.jdbc.JdbcBatchUpdateException: Hexadecimal string with odd number of characters: "c73e69c8-3443-489a-b5f0-ef40af99673f|image/jpeg"; 
```

切换播放！数据库到 MySQL 数据库（无论如何都计划在测试后）使它工作。我不确定这是否可以在仍然使用 H2*而不实际重写 H2 或 Play*的情况下修复，但如果有人知道修复，我会将其标记为答案。

# python - win32api & pyhook - 如何获取用户的输入语言？

> ID：14197782
> 
> 赞同：1
> 
> 时间：2013-01-07T14:19:46.750
> 
> 标签：python, winapi, multilingual, keyboard-events, pyhook

我安装了[pyHook](http://pyhook.wiki.sourceforge.net)并成功地将处理程序附加到键盘事件，但现在我需要确定用户是在输入英文布局还是其他布局。我在事件对象中找不到此信息。

如何在 Windows 上找到焦点窗口中的输入语言是什么？我尝试使用*GetKeyboardLayout*没有成功（无论我输入英语还是其他语言，它总是返回相同的值 - 在我的情况下是希伯来语）。

谢谢

感谢 BrendanMcK 的参考解决。

Python代码：

```
from ctypes import windll, c_ulong, byref, sizeof, Structure
user32 = windll.user32

class RECT(Structure):
    _fields_ = [
        ("left", c_ulong),
        ("top", c_ulong),
        ("right", c_ulong),
        ("bottom", c_ulong)];

class GUITHREADINFO(Structure):
    _fields_ = [
    ("cbSize", c_ulong),
    ("flags", c_ulong),
    ("hwndActive", c_ulong),
    ("hwndFocus", c_ulong),
    ("hwndCapture", c_ulong),
    ("hwndMenuOwner", c_ulong),
    ("hwndMoveSize", c_ulong),
    ("hwndCaret", c_ulong),
    ("rcCaret", RECT)
    ]

def get_layout():
    guiThreadInfo = GUITHREADINFO(cbSize=sizeof(GUITHREADINFO))
    user32.GetGUIThreadInfo(0, byref(guiThreadInfo))
    dwThread = user32.GetWindowThreadProcessId(guiThreadInfo.hwndCaret, 0)
    return user32.GetKeyboardLayout(dwThread) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:16:14.000

检查[this answer](https://stackoverflow.com/a/12383335/660175) to a similar question；似乎您需要使用 GetGUIThreadInfo 来确定桌面上当前的活动线程，然后将其传递给 GetKeyboardLayout。

# editor - 单元格编辑后的 SlickGrid 样式

> ID：14197784
> 
> 赞同：2
> 
> 时间：2013-01-07T14:20:04.503
> 
> 标签：editor, styling, slickgrid

我正在使用带有 slick.editors 的 SlickGrid (2.0) dataView。在网格中，用户可以编辑任意数量的单元格，然后修改底层网格数据，以便在网格滚动时保持编辑。这很好用。但我也想为所有编辑提供视觉反馈，因为在用户点击“保存编辑”按钮之前，这些编辑不会保存到数据库中。

问题是编辑器方法在读回更改的网格数据后会重置单元格。我需要保持背景颜色的变化以表明它已被编辑。有没有人能够做到这一点？

这是相关代码（简单的整数编辑器）：

```
function IntegerCellEditor(args) {
    var $input;
    var defaultValue;
    var scope = this;
    this.init = function() {
        $input = $("<input type=text class='edited' type=text style='font:normal 12px arial; width:95px; text-align:right; border:none;' />");
        $input.bind("keydown.nav", function(e) {
            if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {
                e.stopImmediatePropagation();
            }
        });
    $('#saveChanges').removeAttr("disabled");   // remove disabled attribute from "Save Changes" btn
        $input.appendTo(args.container);
        $input.focus().select();
    };
    this.destroy = function() {
        $input.remove();
    };
    this.focus = function() {
        $input.focus();
    };
    this.loadValue = function(item) {
        defaultValue = item[args.column.field];
        $input.val(defaultValue);
        $input[0].defaultValue = defaultValue;
        $input.select();
    };
    this.serializeValue = function() {
        return parseInt($input.val(),10) || 0;
    };
    this.applyValue = function(item,state) {
        item[args.column.field] = state;
    };
    this.isValueChanged = function() {
        return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
document.getElementsByClassName('ui-widget-content slick-row')[row].className += 'edited';
        };
        this.validate = function() {
            if (isNaN($input.val()))
                return {
                   valid: false,
                   msg: "Please enter a valid integer"
               };
            return {
                valid: true,
                msg: null
           };
        };
        this.init();
    } 
```

这条线什么都不做，我不知道该怎么做：

```
document.getElementsByClassName('ui-widget-content slick-row')[row].className += 'edited'; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T23:44:34.403

我不是 SlickGrid 方面的专家，但请看一下[示例 14](http://mleibman.github.com/SlickGrid/examples/example14-highlighting.html)，我认为它有类似的信息可以帮助您。

我的想法是这样的：

*   订阅 grid.onCellChange 事件
*   存储对象的变化
*   使用 grid.setCellCssStyles('highlight',changes) 更新 CSS 或 grid.addCellCssStyles

希望至少有一点帮助。

# iphone - NSPredicate 和 NSDate

> ID：14197785
> 
> 赞同：1
> 
> 时间：2013-01-07T14:20:11.607
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有两个`NSDate`，开始日期和结束日期。我想找到开始日期和结束日期之间的所有日期。我尝试了下面的代码，但出现以下错误：

```
-[__NSDate length]: unrecognized selector sent to instance 0xa484b30

self.m_maEventsForMonth = [NSMutableArray array];
NSPredicate * sPredicate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", start, end];
[self.m_maEventsForMonth setArray:[m_maEvents filteredArrayUsingPredicate:sPredicate]]; 
```

我也尝试如下制作开始和结束字符串，但我得到了错误的结果：

```
NSString * sDateStart = [self dateToString:start format:@"M/d/yyyy"];
NSString * sDateEnd = [self dateToString:end format:@"M/d/yyyy"];

self.m_maEventsForMonth = [NSMutableArray array];
NSPredicate * sPredicate = [NSPredicate predicateWithFormat:@"(date BETWEEN %@)", @[sDateStart, sDateEnd]];

[self.m_maEventsForMonth setArray:[m_maEvents filteredArrayUsingPredicate:sPredicate]]; 
```

我不明白出了什么问题。任何帮助，将不胜感激。

更新：

我的 m_maEvents 是一个 NSMutableArray，我的自定义 EventObjects 定义如下：

```
@interface EventObject : NSObject
{
    NSString    * title;
    NSString    * date;
    NSString    * starttime;
    NSString    * endtime;
    NSString    * location;
    NSString    * url;
    NSMutableArray  * m_EventTypes;
    NSDate      * dtDate;
}

@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * date;
@property (nonatomic, retain) NSString * starttime;
@property (nonatomic, retain) NSString * endtime;
@property (nonatomic, retain) NSString * location;
@property (nonatomic, retain) NSString * url;
@property (strong, nonatomic) NSMutableArray * m_EventTypes;
@property NSDate * dtDate; 
```

我用字符串初始化这些对象，并在 init 方法中创建 NSDate 对象。这些都不重要，我的问题是我不知道如何定义谓词来过滤两个日期之间的日期。我可以使用 NSDate 对象和字符串，但不确定如何定义谓词。我认为它使用字符串进行比较，这就是我得到长度错误的原因。

我需要自定义比较方法吗？如果是这样，我还没有做过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:59:59.040

我的错……我所需要的只是在谓词语句中使用正确的属性。正确的属性是：dtDate，而不是日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:37:02.253

希望这对你有用：

```
NSMutableArray dates = [NSMutableArray array];
NSDate *curDate = startDate;
while([curDate timeIntervalSince1970] <= [endDate timeIntervalSince1970]) //you can also use the earlier-method
{
    [dates addObject:curDate];
    curDate = [MSDate dateWithTimeInterval:86400 sinceDate:curDate];
} 
```

（请注意：86400 = 60*60*24（1 天））。

希望对你有效。

# c# - unity3d c++ 插件

> ID：14197789
> 
> 赞同：4
> 
> 时间：2013-01-07T14:20:15.320
> 
> 标签：c#, plugins, header, unity3d, .lib

我目前正在开发一个 Unity3d 4.0 Pro 项目，我正在尝试将 tngaming 背心与统一联系起来。我唯一可用的SDK ( [http://tngames.com/pages/Developers ) 是 C++ .h 和 .lib 文件。](http://tngames.com/pages/Developers)据我从文档（[http://docs.unity3d.com/Documentation/Manual/Plugins.html](http://docs.unity3d.com/Documentation/Manual/Plugins.html)）了解，我应该简单地将两个 tngaming.h 和 tngaming.lib 放入我的资产文件夹并执行以下代码：

```
[DllImport("tngaming")]
private static extern int SetUpJacket(); 
```

这将允许我调用该函数`SetUpJacket()`。但是我得到了`DllNotFoundException: tngaming error.`

任何获得一些信息做类似事情的人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:36:52.260

谢谢大家的帮助。实际目标是找到一种方法将非托管 c++ 代码（.h 和 .lib 文件）更改为非托管 .dll，然后创建 ac# 包装器。

进行了很多非常晦涩的搜索，但我设法找到了一个页面，该页面完全符合我在指南表单中的需要。

[http://waterhobo.com/?p=28](http://waterhobo.com/?p=28)

在页面底部，“这是我制作的源代码”行中有一个链接，供那些想要跳过编程部分而只使用 C# 中的 TN Gaming Vest 的人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:26:06.240

来自[http://docs.unity3d.com/Documentation/Manual/PluginsForDesktop.html](http://docs.unity3d.com/Documentation/Manual/PluginsForDesktop.html)

> 构建完成后，bundle 应该放在 Unity 项目的 Assets->Plugins 文件夹中。然后 Unity 将通过名称找到它。

MacOS 库是`.lib`，Windows 库是`.dll`，Linux 库是`.so`。其他评论者不正确；插件不必*是*.dll 格式。我相信（不确定）.dll 也可以在 Mac 上运行。

# oracle - Oracle 读表和条件

> ID：14197795
> 
> 赞同：0
> 
> 时间：2013-01-07T14:20:34.410
> 
> 标签：oracle, oracle10g

我有一个包含几个表的数据库。我想构建一个查询，检查一个表中是否存在记录，并根据记录是否存在执行或不执行另一个表的条件。我将如何构建这样的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:41:49.343

您没有详细说明您需要执行的测试，但看起来您需要构建一个 PL/SQL 块来实现您的目标。

就像是

```
DECLARE
  pnum_cnt NUMBER;
BEGIN
  SELECT COUNT(*) INTO pnum_cnt FROM YOUR_TABLE;

  IF (pnum_cnt > 0) THEN
    -- Perform the other test
  END;
END; 
```

# php - 如何使用 Apache 重写 URL

> ID：14197796
> 
> 赞同：-4
> 
> 时间：2013-01-07T14:20:39.353
> 
> 标签：php, .htaccess, url-rewriting, vanity-url

我有一个简单的问题，但在我的脚本中找不到解决方法。

而不是这个：

```
http://www.mySite.com/player.php?id=3773 
```

我需要这个：

```
http:/www.mySite.com/europe/spain/real-madrid/cristiano-ronlado/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:33:26.000

网上有很多例子和教程，你只需要搜索正确的关键字。一些例子：

1.  虚荣网址
2.  干净的网址
3.  `.htaccess`重写
4.  SEO友好的URL

在学习`.htaccess`重写时，我发现一个有用的网站是这个：

[http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

还有一个更友好的：

[http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

它教你基本的东西，但也涉及更深更复杂的东西。

**有用的提示**

一件非常重要的事情，否则你会遇到链接文件的问题，那就是在你的 HTML 中使用绝对链接。

所以代替这个：

`<link rel="stylesheet" href="/css/stylsheet.css" />`

您需要像这样指定整个地址：

`<link rel="stylesheet" href="//example.net/css/stylsheet.css" />`

上述必要的原因是因为您告诉服务器解释`example.net/blah/blah/blah/`为`example.net/blah.php?id=123`，但浏览器仅将其视为`example.net/blah/blah/blah`，因此相关链接被破坏。

**更新**

还要提到的另一件事是，虽然这是在服务器端处理的，但处理重写的不是 PHP，而是 Apache。

# android - 什么时候使用和不使用android Application 类？

> ID：14197800
> 
> 赞同：6
> 
> 时间：2013-01-07T14:20:56.220
> 
> 标签：android, android-context

我正在考虑使用 android [Application](http://developer.android.com/reference/android/app/Application.html)类作为存储临时状态和应用程序中其他（片段）活动共享的公共代码的地方。

我想获得更多关于它是否是一个好地方的反馈：

1.  共享常量，如 ID、首选项键名等。
2.  反映当前 UI 状态、导航、选定片段以及通常不需要持久化的临时数据的全局变量（即 setter/getter）。
3.  触发某些条件时用于持久化数据的挂钩。
4.  偏好更改后更新 UI。
5.  提供一种从应用程序中的任何位置访问上下文的简单方法，包括`getApplication()`不可用的代码，例如通过静态 getter，例如`MyApp.getApp()`.
6.  需要全局状态变量可见性的常用方法，并且会变得过于繁琐而无法转移到专用类。

在活动课上还有什么合适/有用/方便的？保留什么不是一个好主意，最好的选择是什么？最后，您发现应用程序最适合在您的应用程序中使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:40:21.060

> 共享常量，如 ID、首选项键名等。

我通常为此创建一个名为 C 的常量文件，因为它的可读性更好。`C.SHARED_PREFS`恕我直言，更容易理解`Application.SHARED_PREFS`。

> 反映当前 UI 状态、导航、选定片段以及通常不需要持久化的临时数据的全局变量（即 setter/getter）。

这在它所关注的 Activity 或组件中会更好（例如，Activity 的 UI 状态可能应该存储在 icicle 包中，或在 Activity 的该实例中）。

> 触发某些条件时用于持久化数据的挂钩。

这应该没问题。

> 偏好更改后更新 UI。

同样，我觉得这在相应的组件中会更好。

> 提供从应用程序中的任何位置访问上下文的简单方法，包括 getApplication() 不可用的代码，例如通过 MyApp.getApp() 等静态 getter。

这会起作用，但要小心内存泄漏。当从 Activity 或 Service 或其他任何地方调用方法时，通常应该将上下文作为参数传递。内存泄漏的可能性较小。

> 需要全局状态变量可见性的常用方法，并且会变得过于繁琐而无法转移到专用类。

我觉得做专门的类会更好，因为当你的应用程序的功能和大小增加时，这将变得难以维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:40:55.723

它可能是可以连接某些挂钩的地方。

例如，如果您使用[ACRA](http://acra.ch/)崩溃报告库，您只需要使用 Application 类，因为这是附加 ACRA 的地方。这迫使我开始使用这个类；我以前从来不需要那个。

# sql-server-2008 - 如何将Sqlcmd连接到服务器？

> ID：14197802
> 
> 赞同：35
> 
> 时间：2013-01-07T14:20:57.737
> 
> 标签：sql-server-2008, sqlcmd

我刚刚安装了 SQL Server 2008，我想使用命令编辑器来执行查询。

为此，我打开了命令提示符，然后输入

```
Sqlcmd -S Serverinstance 
```

但我收到一条错误消息：

> *命名管道提供程序：无法打开与 SQL Server [53] 的连接。
> Sqlcmd：erreur：Microsoft SQL Server Native Client 10.0：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。
> Sqlcmd：erreur：Microsoft SQL Server Native Client 10.0：登录超时已过期*

我应该怎么做才能将它连接到服务器以便我可以继续？

谢谢你：D。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-10-26T23:26:06.813

（这听起来很傻）我的问题是我没有使用大写“S”

例如：

```
C:\> SQLCMD -S localhost\sqlexpress 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-07T16:42:00.167

您需要**使用**Windows 凭据的*集成安全*方法通过指定`-E`选项连接到 SQL Server：

```
C:\> SQLCMD -S Serverinstance -E 
```

或者你需要定义一个用户/密码集来实现 SQL Server 登录：

```
C:\> SQLCMD -S Serverinstance -U (login in) -P (password) 
```

所有许多`SQLCMD`参数都在[MSDN SQL Server 联机丛书中进行了详细记录！](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:31:16.197

找不到或无法访问您指定的服务器。所以要么服务器错误（你拼写是否正确），要么你没有正确指定它，或者你的机器无法访问它。

正确设置后，您需要为可信连接指定用户名/密码或 -E 命令限定符。您可能还需要使用 -d 限定符指定数据库。

您可以通过键入获得帮助

```
Sqlcmd -? 
```

# java - 如何添加新的活动和布局 eclipse

> ID：14197809
> 
> 赞同：-1
> 
> 时间：2013-01-07T14:21:30.937
> 
> 标签：java, android, eclipse, android-activity, menu

几天前我开始用 eclipse 为 android 编程但是，我现在被卡住了。

我想添加一个新活动，以便我可以添加一个具有新布局的新屏幕（有关应用程序的信息屏幕）

这样做是为了当您按下特定的菜单按钮（帮助）时，它会启动 help.xml 活动并显示一个带有一些新词的新屏幕。

这成功了一次，但我无法再次做到这一点。

以下是指向活动的代码，由 main.java 生成：

```
 @Override
public boolean onCreateOptionsMenu (Menu menu) {

    getMenuInflater().inflate (R.menu.menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) 
{

    case R.id.help:
        Intent intent = new Intent(this, help.class);
        startActivity(intent);

    case R.id.quit:
        System.exit(0);  
    break; 
```

我在 help.java 中没有代码，我在 help.xml 中做了一些按钮

“退出”按钮工作正常，但帮助没有。我也很不确定它链接到哪里，因为上次我必须同时进行 help.java 和 help.xml 活动。

我已经注意到 manifest.xml 中的帮助活动

帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:23:19.940

开始新 Activity 后忘记写 break。这就是问题所在。

替换此代码：

```
 case R.id.help:
        Intent intent = new Intent(this, help.class);
        startActivity(intent);
    case R.id.quit:
        System.exit(0);  
    break; 
```

和

```
 case R.id.help:
        Intent intent = new Intent(this, help.class);
        startActivity(intent);
    break;
    case R.id.quit:
        System.exit(0);  
    break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:44:25.660

你忘了休息，然后在你的帮助课上

公共类帮助扩展 Activity { protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.help); } }

# php - 如何使用正确时区的 php 代码显示时间

> ID：14197818
> 
> 赞同：10
> 
> 时间：2013-01-07T14:21:57.887
> 
> 标签：php, datetime, timezone

我需要在我所在城市伊朗/德黑兰的网站上显示当前时间

我正在使用这段代码：

```
 <?php echo date('H:i'); ?> 
```

但它没有显示正确的时间。

我的国家时区：伊朗/德黑兰

我现在的城市时间是：17:45

但在网站上它显示我：23:15

我不知道我的服务器在哪个时区，我无法更改，请帮助我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T14:25:01.893

尝试像这样更改代码中的时区：

```
date_default_timezone_set('you/timezone'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T14:25:22.173

您可以使用`date_default_timezone_set`或`DateTimeZone`

例子

```
echo date('H:i'),PHP_EOL;

date_default_timezone_set('Iran');
echo date('H:i'),PHP_EOL;

//Or

$date = new DateTime("now", new DateTimeZone("Asia/Tehran"));
echo $date->format("H:i"),PHP_EOL; 
```

输出

```
14:24 
17:54
17:54 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:26:03.493

您可以通过在您网站的文档根文件夹中添加或编辑 .htaccess 文件并添加此行 php_value date.timezone （此处为您的时区）来设置它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T14:27:47.270

有一种非常优雅的处理方式，即：`DateTimeZone::getOffset`. [您可以在这里找到详细的使用示例： http](http://php.net/manual/en/datetimezone.getoffset.php) ://php.net/manual/en/datetimezone.getoffset.php

# android - 绘制带孔的路径（android）

> ID：14197823
> 
> 赞同：12
> 
> 时间：2013-01-07T14:22:23.133
> 
> 标签：android, canvas, svg

有人对以下问题有提示吗？

我想绘制一条填充路径（画布），其中有一个洞。在 SVG 中，路径定义如下：

```
M 100 100 L 200 100 L 200 200 L 100 200 L 100 100 z
M 125 125 L 175 125 L 175 175 L 125 175 L 125 125 z 
```

我想在没有路径减去路径的情况下绘制这条路径（形状）（因为特定的软件设计）

我对 java 的尝试给我画了一个没有洞的完整正方形。我想知道，为什么 SVG 查看器会使用 Mentoined 定义绘制洞而 Java 画布没有？区别在哪里？我怎样才能做到这一点？

```
 Path p=new Path();
        p.moveTo(100, 100);
        p.lineTo(200,100);
        p.lineTo(200,200);
        p.lineTo(100,200);
        p.close();
        p.moveTo(150, 150);
        p.moveTo(180, 150);
        p.moveTo(180, 180);
        p.moveTo(150, 180);
        p.close();
        canvas.drawPath(p, paint); 
```

有什么提示吗？

问候

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-07T14:42:03.587

你应该使用`Path.setFillType(Path.FillType.EVEN_ODD)`：

```
final Path path = new Path();
final Paint paint = new Paint();

paint.setColor(Color.RED);
paint.setAntiAlias(true);
paint.setStyle(Paint.Style.FILL_AND_STROKE);

path.moveTo(100, 100);
path.lineTo(200, 100);
path.lineTo(200, 200);
path.lineTo(100, 200);
path.close();

path.moveTo(150, 150);
path.lineTo(180, 150);
path.lineTo(180, 180);
path.lineTo(150, 180);
path.close();

path.setFillType(Path.FillType.EVEN_ODD);
canvas.drawPath(path, paint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:45:31.910

SVG 使用[fill-rule](http://www.w3.org/TR/SVG/painting.html#FillProperties)确定路径内部/外部的内容。Java 还允许设置缠绕规则。对于 Android 路径，还有一个类似的[fillType](http://developer.android.com/reference/android/graphics/Path.FillType.html)。也许您为 java 或 SVG 代码设置了不同的规则？

# javascript - 从主网格获取数据以填充子网格

> ID：14197830
> 
> 赞同：2
> 
> 时间：2013-01-07T14:22:37.617
> 
> 标签：javascript, jquery, json, jqgrid, subgrid

我需要填充我的子网格，它显示了主网格中的一些列，而实际上并没有使用 URL 再次获取数据？示例：主网格正在使用 jsonReader 从服务器（10 列）获取数据。其中我想在父行中显示 7 列，在子网格行中显示 3 列。我可以这样做吗？（或者其他方式来实现这个扩展概念？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T03:37:47.037

一种可能的解决方法是将子网格用作 1-1 与主网格，而不是作为父子网格：在父网格中正常查询所有列，但将主行中不需要的列设置为隐藏。然后在子网格加载事件中，使用“父”行 ID 访问这些字段并将它们创建为自定义字段或简单地发出自定义 html。但是，这确实会导致字段重复，因为即使隐藏了原始主网格字段仍然存在。html id 将被重复，如果您不处理它们可能会导致冲突。

也许有比这更干净的方法（我相信@Oleg 现在随时都会向我们展示！）但我希望 jqgrid 有一个文档化的功能来更容易地处理这种事情。它非常有用，因为您可以在子网格中获得完全内联编辑的好处，因此您可以设计出比仅限于一条直线时更好的编辑表单（例如多行文本区域）。

请注意此功能在其他网格中的存在。

[Jquery EasyUI Datagrid 演示](http://www.jeasyui.com/demo/main/index.php?plugin=DataGrid&theme=default&dir=ltr&pitem=Master%20Detail)

[Telerik 网格编辑演示](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/templateformupdate/defaultcs.aspx)

# plugins - 如何使用 Joomla! 检测错误的 URL！系统插件？

> ID：14197831
> 
> 赞同：0
> 
> 时间：2013-01-07T14:22:41.220
> 
> 标签：plugins, joomla, http-status-code-404, joomla2.5

我开发了一个 Joomla！系统插件。我想在执行该插件时检测错误的 URL。

**例如**：

如果我输入一个 URL“ ***http://localhost/wrong-url*** ”，我想在系统插件中捕获该错误。

我怎么知道系统会显示错误页面（404）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:41:19.330

在要捕获的系统插件中，`404`您必须从插件中添加一个函数作为对 JError 错误处理程序数组的回调。

我会看看`com_redirect`它的系统插件是怎么做的。例如

```
function __construct(&$subject, $config)
{
    parent::__construct($subject, $config);

    // Set the error handler for E_ERROR to be the class handleError method.
    JError::setErrorHandling(E_ERROR, 'callback', array('plgSystemRedirect', 'handleError'));
}

static function handleError(&$error)
{
    // Get the application object.
    $app = JFactory::getApplication();

    // Make sure we are not in the administrator and it's a 404.
    if (!$app->isAdmin() and ($error->getCode() == 404))
    {
        // Do cool stuff here
    }
} 
```

唯一的问题是 JError 已*贬值*，所以我不确定它何时会中断，例如它在 3.0、3.1、3.2 和 3.5 中应该没问题，但在那之后谁知道呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:50:47.257

您可以使用以下技术执行此操作

**检查网址功能**

```
function checkURL($URL){
    $ch = curl_init($URL);
    curl_setopt($ch, CURLOPT_TIMEOUT, 5);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $data = curl_exec($ch);
    $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    if ($httpcode != 200) {
        return false;
    }else{
        return true;
    }
} 
```

**CheckURL 函数的使用**

```
/*URL May be a Joomla OR Non Joomla Site*/

if(checkURL("http://adidac.github.com/jmm/index.html")){
echo "URL Exist";
}else{
echo "URL NOT Exist";
//JError::raiseWarning(500,$URL. " is not exists");
}

if(checkURL("http://adidac.github.com/jmm/indexsdadssdasaasdaas.html")){
echo "URL Exist";
}else{
echo "URL NOT Exist";
//JError::raiseWarning(500,$URL. " is not exists");
} 
```

**注意：检查您是否安装了 PHP curl 库**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-10T12:55:25.533

我知道这是一个老问题，但我今天需要一个解决方案并找到了这个问题，所以将我的解决方案留在下面以帮助其他人在未来进行搜索。

在插件文件中：

```
/**
 * The global exception handler registered before the plugin was instantiated
 *
 * @var    callable
 * @since  3.6
 */
private static $previousExceptionHandler;

/**
 * Constructor.
 *
 * @param   object  &$subject  The object to observe
 * @param   array   $config    An optional associative array of configuration settings.
 *
 * @since   1.6
 */
public function __construct(&$subject, $config) {
    parent::__construct($subject, $config);

    // Register the previously defined exception handler so we can forward errors to it
    self::$previousExceptionHandler = set_exception_handler(array('PlgSystemVmsreporting', 'handleException'));
}

public static function handleException($exception) {
    // Wrap in try/catch to prevent any further exceptions being raised
    try {
        // Do whatever you need with the error
    } catch (Exception $e) {
        //Don't make a fuss - fail silently
    }

    // Proxy to the previous exception handler if available, otherwise use the default Joomla handler
    if (self::$previousExceptionHandler) {
        call_user_func_array(self::$previousExceptionHandler, array($exception));
    } else {
        ExceptionHandler::render($exception);
    }

} 
```

# ios - 在 XCode 4 中创建两个目标

> ID：14197833
> 
> 赞同：3
> 
> 时间：2013-01-07T14:22:44.717
> 
> 标签：ios, xcode

我想为我的应用程序 iphone 和 ipad 版本创建两个目标。我的问题是：我是否需要将所有文件从一个目标复制到另一个目标，因为我发现我的项目中有两个 AppDelegate 文件，资源和库文件呢？这是我第一次尝试设置多目标项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:24:36.097

不，不需要复制源文件。您可以单击每个文件并告诉 Xcode 它们属于哪个目标（右侧窗格中*File Inspector选项卡的**Target Membership*部分）。

 *任何意味着不同的文件（例如您提到的委托类）显然都不会添加到两个目标中。*

# qt - QUrl 和 YouTube (Qt 4.8)

> ID：14197835
> 
> 赞同：0
> 
> 时间：2013-01-07T14:22:49.693
> 
> 标签：qt, video, youtube, qt4.8, qurl

我有一个编码的 YouTube 网址（直接指向视频），例如：

```
http%253A%252F%252Fr7---sn-xjpm-q0nl.c.youtube.com%252Fvideoplayback%253Fgcr%253Dde%2526ratebypass%253Dyes%2526newshard%253Dyes%2526source%253Dyoutube%2526fexp%253D920704%25252C912806%25252C928001%25252C922403%25252C922405%25252C929901%25252C913605%25252C929104%25252C929109%25252C913546%25252C913556%25252C908493%25252C908496%25252C920201%25252C913302%25252C919009%25252C911116%25252C901451%25252C902556%2526ipbits%253D8%2526key%253Dyt1%2526id%253De4b675c403014739%2526mv%253Dm%2526cp%253DU0hUTFVTVV9LUENONF9NTVlFOlVHOGtlTmJ2WWpt%2526mt%253D1357567034%2526itag%253D46%2526ms%253Dau%2526expire%253D1357587466%2526sparams%253Dcp%25252Cgcr%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Cratebypass%25252Csource%25252Cupn%25252Cexpire%2526ip%253D46.59.194.67%2526upn%253DVaZiTmBJt0Y%2526sver%253D3%26quality%3Dhd1080%26itag%3D46%26fallback_host%3Dtc.v19.cache5.c.youtube.com%26type%3Dvideo%252Fwebm%253B%2Bcodecs%253D%2522vp8.0%252C%2Bvorbis%2522%26sig%3D6C3258197CB246FA9531E056083053B1B7EAA9C2.758C7B46E77C4B5CF5C7B0C5CBEDCB5F675559D7 
```

上面的 url 在 QString 变量“str”中，我怎样才能将它设置为 QUrl？

```
QUrl url = QUrl::fromPercentEncoding(str.toUtf8()); 
```

不工作！一个

```
qDebug() << url.toString(); 
```

将（上面）编码的 url 返回，而不是人类可显示的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:26:18.493

您的网址被编码两次。`%25`是 的编码版本`%`。这就是为什么你也必须打`fromPercentEncoding`两次电话的原因。

`http%253A%252F%252F``http%3A%2F%2F`在第一轮之后和第二轮之后变为`http://`。

例子：

```
#include <QApplication>
#include <QDebug>
#include <QUrl>

int main(int argc, char *argv[]) {

  QApplication app(argc, argv);
  QString str="http%253A%252F%252Fr7---sn-xjpm-q0nl.c.youtube.com%252Fvideoplayback%253Fgcr%253Dde%2526ratebypass%253Dyes%2526newshard%253Dyes%2526source%253Dyoutube%2526fexp%253D920704%25252C912806%25252C928001%25252C922403%25252C922405%25252C929901%25252C913605%25252C929104%25252C929109%25252C913546%25252C913556%25252C908493%25252C908496%25252C920201%25252C913302%25252C919009%25252C911116%25252C901451%25252C902556%2526ipbits%253D8%2526key%253Dyt1%2526id%253De4b675c403014739%2526mv%253Dm%2526cp%253DU0hUTFVTVV9LUENONF9NTVlFOlVHOGtlTmJ2WWpt%2526mt%253D1357567034%2526itag%253D46%2526ms%253Dau%2526expire%253D1357587466%2526sparams%253Dcp%25252Cgcr%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Cratebypass%25252Csource%25252Cupn%25252Cexpire%2526ip%253D46.59.194.67%2526upn%253DVaZiTmBJt0Y%2526sver%253D3%26quality%3Dhd1080%26itag%3D46%26fallback_host%3Dtc.v19.cache5.c.youtube.com%26type%3Dvideo%252Fwebm%253B%2Bcodecs%253D%2522vp8.0%252C%2Bvorbis%2522%26sig%3D6C3258197CB246FA9531E056083053B1B7EAA9C2.758C7B46E77C4B5CF5C7B0C5CBEDCB5F675559D7";
  qDebug() << QUrl::fromPercentEncoding(str.toUtf8());
  qDebug() << QUrl::fromPercentEncoding(QUrl::fromPercentEncoding(str.toUtf8()).toUtf8());
  return app.exec();
} 
```

# android - 如何在我的 Android ListView 中选择一个值并将此信息发送到其他活动？

> ID：14197836
> 
> 赞同：0
> 
> 时间：2013-01-07T14:22:49.367
> 
> 标签：android, listview, android-intent, android-activity, galaxy

嗨，我想用 ListView 构建一个 android 应用程序，如果我在这个 ListView 中选择一个值，我想用这个值启动另一个活动。问题是我不知道如何单击 ListView 中的值而其他活动获取信息。这是我的代码：

我的第一个活动：

```
package de.android.shilfe;

import de.android.shilfe.DatenbankManager;
import de.android.shilfe.R;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;

import android.app.ListActivity;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

public class MainActivity extends ListActivity {

    private SQLiteDatabase mDatenbank;
    private DatenbankManager mHelper;

    private static final String KLASSEN_SELECT_ROW = 
            "SELECT _id, name FROM Stundenplan";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mHelper.STUNDENPLAN_CREATE = "CREATE TABLE Stundenplan(" +
                "_id INTEGER PRIMARY KEY AUTOINCREMENT, "+
                "name TEXT NOT NULL)";

       mHelper = new DatenbankManager(this);

       //what I must do here ??? :(
    }

    @Override
    protected void onPause() {
        super.onPause();

        mDatenbank.close();

        Toast.makeText(this, 
                getResources().getString(R.string.db_close),
                Toast.LENGTH_SHORT).show(); 
    }

    @Override
    protected void onResume() {     
        super.onResume();

        mDatenbank = mHelper.getReadableDatabase(); //Datenbank öffnen

        Toast.makeText(this, 
                getResources().getString(R.string.db_open),
                Toast.LENGTH_SHORT).show(); 

        ladeDaten();
    }

    private void ladeDaten() {
        Cursor KlassenCursor = mDatenbank.rawQuery(KLASSEN_SELECT_ROW, null); // Gibt ein Index zurück
        startManagingCursor(KlassenCursor); //Durchläuft diesen

        android.widget.SimpleCursorAdapter KlassenAdapter = new android.widget.SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_1, 
                KlassenCursor, 
                new String[] {"name"},
                new int[] {
                android.R.id.text1
                });

        setListAdapter(KlassenAdapter);

    }

    public void onButtonClick(View view){

        EditText et =(EditText) findViewById(R.id.editText1);

        ContentValues werte = new ContentValues();
        werte.put("name",et.getText().toString());

        mDatenbank.insert("stundenplan", null, werte);

        ladeDaten();
        et.setText("");
    }

} 
```

我的第一个活动布局 xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="5">

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/create_defaulttext">

            <requestFocus />
        </EditText>

        <Button
        android:id="@+id/sf_daten_datenbanken_einfuegen"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/sf_daten_datenbanken_einfuegen"
        android:onClick="onButtonClick" />

    </LinearLayout>

    <LinearLayout 
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">

        <ListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    </ListView>

        <TextView
        android:id="@+id/android:empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/tx_daten_datenbank_leer"/>

    </LinearLayout>

</LinearLayout> 
```

我使用以下代码在其他应用程序中尝试它：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        List valueList = new ArrayList<String>(); 

        for(int i=0;i<10;i++)
        {
            valueList.add("value" + i); 
        }

        ListAdapter adapter = new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_list_item_1,valueList); 

        final ListView lv = (ListView)findViewById(R.id.listview1);
        lv.setAdapter(adapter); 

        lv.setOnItemClickListener(new OnItemClickListener() { 

             public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3){  
                 Intent intent = new Intent();
                 intent.setClassName(getPackageName(), getPackageName() + ".Show_Activity"); 
                 intent.putExtra("selected",lv.getAdapter().getItem(arg2).toString()); 
                 startActivity(intent); 

             }

         });

    } 
```

但在另一个应用程序中，我通过 EditText 控件填充 ListView

![在此处输入图像描述](../Images/41489852e0bd4bd5b0f60c491b094d07.png)

我需要帮助 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:38:30.973

```
lv.setOnItemClickListener(new OnItemClickListener() { 

     public void onItemClick(AdapterView<?> parent, View view, int position, long id){  
         Intent intent = new Intent(context, Show_Activity.class);
         intent.putExtra("selected", (String) lv.getItemAtPosition(position)); 
         startActivity(intent); 
     }
}); 
```

您已经将值传递给另一个活动`putExtra`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:29:59.040

Hey You question is not complete but I am giving this answer as per what I understand. In the onListItemClick() method last parameter of long datatype is id of a row selected. in your case, it will _id of table. If you have 10 rows in your table with id 10 to 20 and displayed the same in listview. Now if you click on 5 item then its id will be 15 which was stored in database. Pass this value to next intent and fetch the details of that row and display in the next activity.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:09:24.860

When you use a ListActivity so you can use [onListItemClick method.This](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29) method will be called when an item in the list is selected.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T14:29:29.097

You can to create a custom list adapter and handle the onClick event in the getView method of the adapter. The item will be available in this method.

```
public class AccountListAdapter extends ArrayAdapter<Account> {

    @Override
    public View getView(int position, View convertView, ViewGroup parent){

        final Account item = this.getItem(position);

        // item = the particular list item you clicked      

           // layoutItem = layout view passed into the adapter
           layoutItem.setOnClickListener(new View.OnClickListener() {           
               @Override
               public void onClick(View v) {
                   callActivity(item);
               }
            });

    }

} 
```

While handling the event, create an intent with extras and pass the value(s) you desire via the extras. You can use a simplelistadapter, but this way gives you considerably more control and power!

# mobile - 带有 cloudControl 的 gzip

> ID：14197838
> 
> 赞同：0
> 
> 时间：2013-01-07T14:23:06.140
> 
> 标签：mobile, extjs, gzip, cloudcontrol

我正在使用 cloudControl 为使用 Sencha Touch 的移动设备开发和部署一个复杂的 Web 应用程序。即使在缩小和修剪所有脂肪后，CSS 和应用程序 JS 的重量也各约为 250KB。我想显着减少这种情况（特别是因为它必须通过粗略的移动连接快速加载）。有谁知道 cloudControl 是否提供 gzip 压缩作为附加组件？如果没有，任何人都可以推荐一个提供压缩的基于 PHP 的云主机吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:56:41.970

Gzip 默认启用。如果相应地设置了请求中的 Accept-Encoding 标头，则使用它。

```
curl --verbose --header "Accept-Encoding: gzip" http://phpinfo.cloudcontrolled.com | gunzip 
> GET / HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-redhat-linux-gnu) libcurl/7.24.0 NSS/3.13.5.0 zlib/1.2.5 libidn/1.24 libssh2/1.4.1
> Host: phpinfo.cloudcontrolled.com
> Accept: */*
> Accept-Encoding: gzip
> 
< HTTP/1.1 200 OK
< Content-Type: text/html
< Server: Apache
< Vary: Accept-Encoding
< Content-Encoding: gzip
< Content-Length: 12405
< Accept-Ranges: bytes
< Date: Mon, 07 Jan 2013 18:51:45 GMT
< X-Varnish: 1115551696
< Age: 0
< Via: 1.1 varnish
< Connection: keep-alive
< X-varnish-cache: MISS
< 
```

您始终可以使用 .htaccess 文件根据需要对其进行配置。有关更多详细信息，请参阅[mod_deflate 文档](http://httpd.apache.org/docs/current/mod/mod_deflate.html)。

# mysql - [mysql]SQL 检索树数据但顺序不同

> ID：14197845
> 
> 赞同：0
> 
> 时间：2013-01-07T14:23:39.427
> 
> 标签：mysql, tree

这是我需要表达的 IA。（树模型）

```
about us
    company
        history
        location
    ceo
product
    mobile
        iphone
        galaxy 3 
```

这是我需要制作的 HTML DOM。如您所见，`depth2`并且`depth3`（最多 5 或 6 个）位于同一级别的 DOM 中，并且 depth1 将它们作为子级。（由于 CSS，我必须这样做）

```
<div class="depth1"><span>about us</span>

    <div class="depth2">company</div>   
    <div class="depth2">ceo</div><!--CEO is here! not below "location" -->

    <div class="depth3">history</div>   
    <div class="depth3">location</div>

</div>

<div class="depth1"><span>product</span>

    <div class="depth2">mobile</div>

    <div class="depth3">iphone</div>    
    <div class="depth3">galaxy 3</div>

</div> 
```

并且数据是`mysql`这样插入的。（`p_id`表示父母的身份证）

```
id(pk)  p_id    level   order   name
------------------------------------------
1       root        0       0       -
2       1       1       100     about us
3       7       2       100     mobile
4       5       3       200     location
5       2       2       100     company
6       5       3       100     history
7       1       1       200     product
8       3       3       100     iphone
9       3       3       200     galaxy
10      2       2       200     ceo 
```

我试过`order by level, order`但结果不正确。（顺序应与 HTML DOM 顺序相同）

```
id(pk)  p_id    level   order   name
------------------------------------------
1       root        0       0       -
2       1       1       100     about us
7       1       1       200     product
3       7       2       100     mobile
5       2       2       100     company
10      2       2       200     ceo
8       3       3       100     iphone
6       5       3       100     history
4       5       3       200     location
9       3       3       200     galaxy 
```

我如何订购与 HTML 订单相同的订单？

最难的部分是`depth2`或`depth3`在其父级（深度1）下方（作为一个组）。

```
id(pk)  p_id    level   order   name
------------------------------------------
1       root        0       0       -
2       1       1       100     about us
5       2       2       100     company
10      2       2       200     ceo
6       5       3       100     history
4       5       3       200     location
7       1       1       200     product
3       7       2       100     mobile
8       3       3       100     iphone
9       3       3       200     galaxy 3 
```

我做了一个`jQuery`代码来解决我的问题。但我不能申请`jQuery`，因为实际数据太大（数百），重新排列 HTML 元素需要一些烦人的时间。我不能负担客户端。

我搜索了如何[提高 jQuery 性能](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)。但我必须考虑禁用用户的 javascript。

请分享您的不同观点或新鲜想法甚至技巧。（表达语言是JSP）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:40:28.903

如您所见，可以通过一个简单的查询从数据库中提取数据，然后编写代码以使用该数据填充树结构。

我不确定你为什么认为唯一的选择是在流程的最末端——数据库和表示层。

你没有说你在中间层使用的是什么编程语言——我猜它不是带有 jQ​​uery 的 JavaScript。不管是什么，执行数据库查询的中间层服务器端语言肯定比客户端 JavaScript 更适合创建树结构。

如果您出于某种原因确实必须在数据库中执行此操作，我建议您使用存储过程。

另请注意，其他一些数据库为此目的具有分层查询语法（如 Oracle 的“CONNECT BY”）。

# verification - 合金映射关系

> ID：14197851
> 
> 赞同：0
> 
> 时间：2013-01-07T14:24:26.197
> 
> 标签：verification, alloy

我几乎开始研究合金来做一些验证。我正在尝试练习制作一些代表编程语言的简单结构。

> 映射实体具有程序和依赖关系
> 
> 程序具有功能
> 
> 函数有几行代码
> 
> 依赖关系是一个实体，将程序中某个函数中的两行代码相互映射

这是我尝试做的，但输出图显示了一行代码，它链接到依赖元组但与函数不匹配。我需要所有代码行都在一个函数中，它们可以是依赖关系，也可以不是......

```
abstract sig mapping{}

sig Dependency extends mapping {dep0,dep1: one line}

one sig Program extends mapping{ F: some function, D: some Dependency }

//mapping entity is composed of Dependency pairs 2 lines of code 
//and one program which has functions and dependency pairs

sig function { Line : some line}
//Function is made of line of code

abstract sig line{}

run {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:04:02.983

您应该添加一些事实来强制执行您为模型考虑的约束。

例如，要强制每一行都有相应的功能，您可以编写类似的内容

```
fact LinesBelongToFunctions {
  all ln: line | 
    one f: function | 
      ln in f.Line
} 
```

这一事实表明，对于每一行，都`ln`存在一个`f`包含`f.Lines`line的函数`ln`。

# vim - 如何确定 InsertLeave 是否是更改的结果

> ID：14197852
> 
> 赞同：4
> 
> 时间：2013-01-07T14:24:29.750
> 
> 标签：vim

在 Vim 中，基本上有两种类型的命令可以使其进入插入模式：

只添加一些内容的命令，例如：`i`, `I`, `a`, `A`（除了使用退格）。或者，也删除一段文本，例如：`c[motion]`, `C`, `s`, `v[motions]s`。

我想挂钩该`InsertLeave`事件，但在我的代码中，我需要知道它是哪种类型的更改（插入类似`i`，或改变类似`cw`）。有什么办法可以找出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:02:11.530

`i<BS><BS><BS>bar`算作插入还是更改？如果是后者，您可以`:undo`更改`InsertLeave`，存储受它影响的行（即`'[,']`）`:redo`，然后比较两组。如果有“只是更多的文字”，那就是插入，否则就是改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:39:57.257

您可能可以利用一个差异：更改命令都修改寄存器（除非通过前置明确指定黑洞寄存器`"_`），而插入不会（好吧，除了`".`）。

如果您之前拍摄默认寄存器的“快照”（例如使用`CursorMoved,CursorHold`组合）并比较 上的内容`InsertLeave`，您可以找到。

# iphone - UIAutomation - 来自仪器和命令行的不同结果

> ID：14197854
> 
> 赞同：5
> 
> 时间：2013-01-07T14:24:31.900
> 
> 标签：iphone, command-line, instruments, ui-automation, ios-ui-automation

当我在 Instruments 中运行 UIAutomation 脚本时，一切正常，但是当我从命令行运行完全相同的脚本时，出现以下错误： `Cannot perform action on invalid element: UIAElementNil from target.frontMostApp().mainWindow().tableViews()[0].cells()["ID number, Required"].textFields()[0]`

这是我用来启动测试的 Instruments 命令

```
instruments -t /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate /Users/johan/Library/Developer/Xcode/DerivedData/Brokers-etvmwznhcjprybdekgtixzzsnbrw/Build/Products/Release-iphonesimulator/MyApp -e UIASCRIPT /Users/johan/Desktop/Script.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:10:32.130

原因可能是 Instruments 下的 UIAutomation 比从命令行运行时慢得多。所以可能是在仪器下元素 target.frontMostApp().mainWindow().tableViews()[0].cells()["ID number, Required"].textFields()[0]
存在，即有效，但从控制台还没有。
也许您应该尝试等待元素变为有效，然后再对其执行操作，以检查其有效性（isValid）并记录它以确保其状态。

# c# - 在 C# 中编写多播委托 - 我应该使用运算符还是 Action.Combine？

> ID：14197857
> 
> 赞同：8
> 
> 时间：2013-01-07T14:24:46.447
> 
> 标签：c#, delegates, accessor

阅读文档我可以看到`+`运算符可用于组合/组合相同类型的委托。

以同样的方式，我可以看到我可以使用`-`运算符从组合委托中删除 a 。

我还注意到该`Action`类型具有静态`Combine`和`Remove`方法，可用于连接两个委托的调用列表，并分别从另一个委托的调用列表中删除委托的调用列表的最后一次出现。

```
 Action a = () => Debug.WriteLine("Invoke a");
        Action b = () => Debug.WriteLine("Invoke b");
        a += b;
        a.Invoke(); 

        //Invoke a
        //Invoke b

        Action c = () => Debug.WriteLine("Invoke c");
        Action d = () => Debug.WriteLine("Invoke d");
        Action e = Action.Combine(c, d);
        e.Invoke();

        //Invoke c
        //Invoke d

        a -= b;
        a.Invoke();

        //Invoke a

        e = Action.Remove(e, d);
        e.Invoke(); 

        //Invoke c 
```

就它们如何从调用列表中组合/删除而言，它们似乎产生了相同的结果。

我已经在 SO 和其他代码的各种示例中看到了这两种方式。是否有理由让我使用一种或另一种方式？有坑跌吗？例如 - 我可以在该行中看到一条警告，`a -= b;`说明`Delegate subtraction has unpredictable results`- 所以我应该通过使用 Remove 来避免这种情况吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T14:26:46.113

The delegate operators (`+` and `-`) are shorthand for the static methods.
There is no difference at all.

`a += b` compiles to `a = (Action)Delegate.Combine(a, b)`

# search - 在二叉树中查找元素

> ID：14197858
> 
> 赞同：0
> 
> 时间：2013-01-07T14:24:51.077
> 
> 标签：search, haskell, tree, find, binary-tree

假设我有一个二叉树：

```
data Bst a = Empty | Node (Bst a) a (Bst a) 
```

我必须编写一个函数来搜索一个值并返回其子项的数量。如果没有具有此值的节点，则返回 -1。我试图同时编写 BFS 和 DFS，但我都失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:41:37.487

模式匹配是你的朋友。您`Bst`可以是`Empty`或 a `Node`，因此在顶层，您的`search`功能将是

```
search Empty = ...
search (Node left x right) = ... 
```

一`Empty`棵树可能包含目标值吗？`Node`目标值（如果存在）将是节点值（上`x`图）、`left`子树中、`right`子树中——或者可能是这些的某种组合。

`Bst`通过“返回 [ing] 其子项的数量”，我假设您是指以 a 为目标的子节点的总数`Node`，这是一个有趣的问题组合。您将需要*另一个*函数，例如`numChildren`，其定义使用上述模式匹配。注意事项：

1.  `Empty`一棵树有几个后代？
2.  在这种`Node`情况下，`x`不算数，因为您想要*后代*。如果你有一个函数来计算子树`left`和`right`子树中的孩子的数量……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:33:22.710

这是一种方法。呼吸优先搜索实际上可能有点难以实现，而且这个解决方案 (findBFS) 非常复杂（附加到列表是 O(n)），但你会明白要点的。

首先，我决定拆分查找函数以返回节点元素匹配的树。这简化了拆分计数功能。此外，返回元素的数量比返回后代的数量更容易，如果找不到则返回 -1，因此`numDesc`函数依赖于 numElements 函数。

```
data Tree a = Empty
            | Node a (Tree a) (Tree a)

numElements :: Tree a -> Int
numElements Empty        = 0
numElements (Node _ l r) = 1 + numElements l + numElements r

findDFS :: Eq a => a -> Tree a -> Tree a
findDFS _ Empty                         = Empty
findDFS x node@(Node y l r) | x == y    = node
                            | otherwise = case findDFS x l of 
                                            node'@(Node _ _ _) -> node'
                                            Empty              -> findDFS x r

findBFS :: Eq a => a -> [Tree a] -> Tree a                                                                
findBFS x []                              = Empty
findBFS x ((Empty):ts)                    = findBFS x ts
findBFS x (node@(Node y _ _):ts) | x == y = node
findBFS x ((Node _ l r):ts)               = findBFS x (ts ++ [l,r])

numDescDFS :: Eq a => a -> Tree a -> Int
numDescDFS x t = numElements (findDFS x t) - 1

numDescBFS :: Eq a => a -> Tree a -> Int
numDescBFS x t = numElements (findBFS x [t]) - 1 
```

# wordpress - Wordpress - 如何从 HTML 编辑器写入外部数据库

> ID：14197862
> 
> 赞同：0
> 
> 时间：2013-01-07T14:25:06.897
> 
> 标签：wordpress

我制作了一个 wordpress 插件，用于显示存储在外部数据库中的化学品信息。我希望能够使用 wordpress 编辑器编辑此信息。有没有办法通过过滤器或动作挂钩来做到这一点？使用 the_editor_content 过滤器，我可以将外部数据库中的数据加载到编辑器文本区域，但我需要将其提交到外部数据库而不是 wordpress db。

编辑：我发现每次创建或更新帖子时都会调用一个自定义函数的 save_post 操作挂钩。我可以用它来写入外部数据库，我只需要弄清楚如何阻止 wordpress 也将帖子提交到 wordpress db。

# java - SqlSessionFactoryBean 上的 MalformedParameterizedTypeException

> ID：14197866
> 
> 赞同：1
> 
> 时间：2013-01-07T14:25:26.817
> 
> 标签：java, spring, mybatis

你好我的问题是配置mybatis-spring

## 这是我春天的调度servlet

```
<!-- Enable annotation style of managing transactions -->
<tx:annotation-driven transaction-manager="transactionManager" />

<context:component-scan base-package="com.aieap" />
<context:component-scan base-package="com.aieap.model" />
<context:component-scan base-package="com.aieap.services" />
<context:component-scan base-package="com.aieap.dao" />
<context:component-scan base-package="com.aieap.dao.impl" />

<!-- Declare a transaction manager -->
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager" p:dataSource-ref="dataSource" />

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations" value="/WEB-INF/db.properties" />
</bean>

<bean id="sqlMap" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation" value="classpath*:com/aieap/conf/configuration.xml" />
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driver}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="comuniDao" class="com.aieap.dao.impl.ComuniDAO">
    <property name="sqlSessionFactory" ref="sqlMap" />
</bean>

<!-- SPRING MVC STUFF -->
<!-- Enables POJO @Controllers (like CartController) -->

<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

<!-- Enables annotated methods on POJO @Controllers (like CartController) -->
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

<!-- Configurazione Spring MVC View Resolver -->
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>

<!-- Flow Handler Adapter -->
<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
</bean>

<!-- Flow Handler Mapping -->
<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <property name="flowRegistry" ref="flowRegistry" />
</bean>

<!-- Flow Executor -->
<webflow:flow-executor id="flowExecutor" />

<!-- Flow Registry -->
<webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices">
    <!-- nonaut -->
    <webflow:flow-location id="home-nonaut" path="/WEB-INF/flows/nonaut/home-nonaut.xml" />
    <webflow:flow-location id="logout" path="/WEB-INF/flows/nonaut/logout.xml" />

    <!-- aut -->
    <webflow:flow-location id="aut/home-aut" path="/WEB-INF/flows/aut/home-aut.xml" />
    <webflow:flow-location id="aut/nuova-domanda" path="/WEB-INF/flows/aut/nuova-domanda.xml" />
    <webflow:flow-location id="aut/invia-domanda" path="/WEB-INF/flows/aut/invia-domanda.xml" />
    <webflow:flow-location id="aut/nuovo-operatore-rer" path="/WEB-INF/flows/aut/nuovo-operatore-rer.xml" />

</webflow:flow-registry>

<webflow:flow-builder-services id="flowBuilderServices" view-factory-creator="viewFactoryCreator" />

<bean id="viewFactoryCreator" class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
    <property name="viewResolvers">
        <list>
            <ref bean="viewResolver" />
        </list>
    </property>
    <property name="useSpringBeanBinding" value="true" />
</bean> 
```

这是错误：

```
GRAVE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlMap' defined in ServletContext resource [/WEB-INF/dispatch-servlet.xml]: Initialization of bean failed; nested exception is java.lang.reflect.MalformedParameterizedTypeException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:480)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
at java.security.AccessController.doPrivileged(Native Method)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:423)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1190)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1103)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5284)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5279)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

你能帮我么？

# javascript - Is this a good scenario for using nodejs?

> ID：14197870
> 
> 赞同：2
> 
> 时间：2013-01-07T14:25:44.920
> 
> 标签：javascript, django, node.js, web-applications, v8

A couple of my friends and me are planning to make a time tracking web application. Between us we have experience in Java, C++, Django and Backbone.js, though we have never made any full fledged commercial application. This is our first real project and we wanted a bit more clarity before learning nodejs.

More about the app:

*   Users will use this application through out the day to log various tasks (sort of like a task management application)
*   Track the time spent on these tasks (time tracking)
*   Users do not interact with each other's tasks.
*   We expect users to use this app continuously throughout the day

So we want the app to have high Performance. We also foresee making native mobile applications (ios & Android) in the future, which can work with the same API used for the web. JSON and javascript are very appealing due to this. We also don't want to re-write code on the client and server.

I have already checked out this answer: [How to decide when to use Node.js?](https://stackoverflow.com/questions/5062614/how-to-decide-when-to-use-nodejs) but would really like some more clarity.

Is node.js a good fit for this scenario? What advantages would it have over, say Django+Backbone.js?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:37:01.990

在处理 HTTP 请求的同一层中实现应用程序逻辑是一种相当危险的方法，特别是当您处理基于事件的服务器时，其中单个处理程序的行为可能会影响整个服务器 - 更不用说异步 I 的复杂性了/O（这确实需要一个关系数据库后端 - 因此需要衍生线程）。您可以简单地使用 node.js 作为网络服务器或网络缓存，并将应用程序逻辑分离到一个 FastCGI 进程中。

您对使用 Node.js 的描述没有令人信服的理由，但有很多复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:45:31.277

您可以使用 Node.JS 来服务和处理应用程序逻辑，背后有一个数据库。只要有一个公共数据库或会话存储，您最终可能会产生多个进程或在多个位置部署。

就个人而言，我没有看到那么多并发症。如果它可以有条不紊地完成工作，Node.JS 是可以的。

您实际上应该使用 Node.JS + Backbone.js。

有点离题：你描述应用程序的方式让我想起了 TinyPM。您可能想在上路之前检查一下:)

# php - PHPMailer 更改发件人姓名

> ID：14197873
> 
> 赞同：5
> 
> 时间：2013-01-07T14:25:53.320
> 
> 标签：php, phpmailer

我无法设置使用 PHPMailer 类发送邮件的名称。

我编写了以下函数，以便可以以与 php 的内置`mail()`函数类似的方式使用它。

```
function pmail($to, $subject, $message, $headers = "", $attachments = "")
{
    date_default_timezone_set('Europe/London');

    require_once($_SERVER['DOCUMENT_ROOT']."/lib/inc/class.phpmailer.php");
    //include($_SERVER['DOCUMENT_ROOT']."/lib/inc/class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

    $defaultEmail = "reply@example.com";
    $defaultEmailName = "Web Mailer";

    $mail = new PHPMailer();

    $mail->IsSMTP();                                // telling the class to use SMTP
    $mail->Host       = "mail.example.com";         // SMTP server
    $mail->SMTPDebug  = false;                      // enables SMTP debug information (for testing, 1 = errors and messages, 2 = messages only, false = off)
    $mail->SMTPAuth   = true;                       // enable SMTP authentication
    //$mail->SMTPSecure = "tls";                    // sets the prefix to the servier
    $mail->Host       = "mail.example.com";         // sets the SMTP server
    $mail->Port       = 25;                         // set the SMTP port for the GMAIL server
    $mail->Username   = "###";                      // SMTP account username
    $mail->Password   = "###";                      // SMTP account password
    $mail->SetFrom( ($headers['fromEmail'] != "" ? $headers['fromEmail'] : $defaultEmail), ($headers['fromName'] != "" ? $headers['fromName'] : $defaultEmailName) );
    $mail->AddReplyTo( ($headers['replyToEmail'] != "" ? $headers['replyToEmail'] : $defaultEmail), ($headers['replyToName'] != "" ? $headers['replyToName'] : $defaultEmailName) );
    $mail->AddAddress($to);
    $mail->Subject = $subject;
    $mail->AltBody = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
    $mail->MsgHTML($message);

    foreach($attachments as $attachment) {
        //$mail->AddAttachment("images/phpmailer.gif");      // attachment example
        $mail->AddAttachment($attachment);
    }

    if(!$mail->Send()) {
        //echo "Mailer Error: ".$mail->ErrorInfo;
        return false;
    } else {
        //echo "Message sent!";
        return true;
    }
} 
```

当用这样的东西进行测试时；

`pmail("test@test.com", "test email", "test message here");`

一切正常，发件人地址`reply@example.com`按预期显示在标题中，但是我在收件人的收件箱中看到的名称不是`Web Mailer`其与用于发送电子邮件的凭据的用户关联的默认帐户。在标题中，发件人名称确实显示为 Web Mailer，但它是我想要查看的收件箱

我们无法在我们的系统上设置更多用户帐户，以允许我们使用所需的名称和电子邮件创建一个新帐户，因此我们必须通过现有用户帐户发送。在这种情况下是我的，电子邮件会附上我的名字，但我们希望这个名字显示为 Web Mailer。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-05-11T19:55:26.980

如果您使用 GitHub 的 PHP Mailer API，您可以使用它来设置发件人名称：

```
$mail->SetFrom("$youremail ", "Your Name"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T14:31:44.360

原来我的功能确实按预期工作。因为我从这个系统接收到内部地址的电子邮件，他们都自动将我放在他们的地址簿中，因此由于用于发送电子邮件的地址与我的个人地址相关联，他们看到我的名字而不是“Web Mailer”。

使用外部电子邮件帐户进行测试时，发件人姓名会正确列出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T14:42:16.410

我曾经使用过这个 php 代码，它运行良好：（它显示了下面的内容，而不是我的 gmail 凭据）

```
$headers = "From: Cartrader UK <noreply@cartrader.co.uk"; 
```

. . .

```
if (mail($to, $subject, $msg, $headers)) {
echo "Mail sent successfully";
} else {
echo "There was some problem sending the E-Mail";
} 
```

也许它可以帮助你。

编辑：我会尝试将您的行与 SetFrom 更改为：

```
$mail->SetFrom($defaultEmail,$defaultEmailName); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-09-06T15:04:45.877

你可以在你的mail.php中设置

```
$headers = "From: Your Name <yourname@example.com>"; 
```

# arrays - 需要保存一对多关系VB6

> ID：14197875
> 
> 赞同：0
> 
> 时间：2013-01-07T14:26:01.013
> 
> 标签：arrays, sorting, vb6

所以我必须从有两种类型 ID 的网格中保存。线路 ID 和客户 ID。每个 LineId 可以有多个 CustId。数据示例如下：

```
LineId     CustId
1          33
2          98
7          101
1          51
3          28
7          02
1          35 
```

我需要使用一个保存过程来保存代码，该过程接受每个 Line id 的以 null 分隔的 CustIds 字符串。我为每个要保存的 LineId 调用一次保存过程。我无法更改保存过程的工作方式。

到目前为止，我一直在将网格添加到具有 line id 和 cust id 的类型数组中。

```
Dim typeRows(gridRows - 1) As Ids 'gridRows is rowcount of grid
For i = 0 To grid.Rows - 1
    typeRows(i).LineId = grid.TextMatrix(i, GridColumns.colLineId)
    typeRows(i).CustId = grid.TextMatrix(i, GridColumns.colCustId)
Next 
```

但我有点坚持下一步应该做什么。我应该对网格进行排序吗？那么我将如何通过排序网格并为每个 lineid 组合 cust id？

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:50:20.907

如果不对网格进行排序，您还必须遍历数组以检查之前是否已经找到了 id，这也可以完成，但可能需要一些时间，具体取决于数据的大小

```
'1 form with :
'    1 flexgrid control : name=grid
Option Explicit

Private Type Ids
  LineId As String
  CustId As String
End Type

Private Sub Form_Click()
  'export to delimited string
  Dim intRow As Integer
  Dim intId As Integer
  Dim intBound As Integer
  Dim udtIds() As Ids
  Dim blnThere As Boolean
  Dim intCount As Integer
  With grid
    intBound = .Rows - 1
    ReDim udtIds(intBound) As Ids
    intCount = 0
    For intRow = 1 To intBound
      'loop through all rows
      blnThere = False
      For intId = 0 To intBound
        'check if lineid was already found before
        If udtIds(intId).LineId = .TextMatrix(intRow, 0) Then
          blnThere = True
          Exit For
        End If
      Next intId
      If blnThere Then
        'if lineid was already found before, just add the custid
        udtIds(intId).CustId = udtIds(intId).CustId & "," & .TextMatrix(intRow, 1)
      Else
        'if lineid is new, then create new lineid with custid in udt
        udtIds(intCount).LineId = .TextMatrix(intRow, 0)
        udtIds(intCount).CustId = .TextMatrix(intRow, 1)
        intCount = intCount + 1
      End If
    Next intRow
  End With 'grid
  'now you can save the udt
End Sub

Private Sub Form_Load()
  With grid
    'fill grid with example values
    .Cols = 2
    .Rows = 8
    .FixedRows = 1
    .FixedCols = 0
    .TextMatrix(0, 0) = "LineId"
    .TextMatrix(0, 1) = "CustId"
    .TextMatrix(1, 0) = "1"
    .TextMatrix(2, 0) = "2"
    .TextMatrix(3, 0) = "7"
    .TextMatrix(4, 0) = "1"
    .TextMatrix(5, 0) = "3"
    .TextMatrix(6, 0) = "7"
    .TextMatrix(7, 0) = "1"
    .TextMatrix(1, 1) = "33"
    .TextMatrix(2, 1) = "98"
    .TextMatrix(3, 1) = "101"
    .TextMatrix(4, 1) = "51"
    .TextMatrix(5, 1) = "28"
    .TextMatrix(6, 1) = "02"
    .TextMatrix(7, 1) = "35"
  End With 'grid
End Sub 
```

# objective-c - Get a NSString encrypted from an original NSString

> ID：14197879
> 
> 赞同：0
> 
> 时间：2013-01-07T14:26:21.557
> 
> 标签：objective-c, ios, nsstring, encryption

I found a lot of subjects about encryption and AES/DES but I didn't found a way to get a NSString encrypted from an original NSString. Is there a way to have a NSString instead of getting NSData ?

I want to use my NSString encrypted in order to create an URL. I want to transform something like : `http://test.fr/143` in something like `http://test.fr/AydgzeifgzZEH239c2390304kdjlad` and have the possibility to decrypt this in order to get my 143 string again.

# javascript - 如何从对象构建查询字符串？

> ID：14197880
> 
> 赞同：0
> 
> 时间：2013-01-07T14:26:23.880
> 
> 标签：javascript, query-string

> **可能重复：**
> [javascript 对象的查询字符串编码](https://stackoverflow.com/questions/1714786/querystring-encoding-of-a-javascript-object)

我正在尝试向网站发出请求并`iframe`使用 javascript 将结果作为页面嵌入。我需要将请求中的许多参数作为查询字符串变量传递，并且我希望能够将参数指定为对象，将它们传递给函数以生成查询字符串，以便它们易于阅读、维护和操作。

如何从具有简单值的 JSON 对象构造 URL 的查询字符串？我希望这个例子：

```
{
    h:300,
    w:300,
    skip:500,
    count:50
} 
```

生成以下查询字符串：

```
h=300&w=300&skip=500&count=50 
```

是否有任何现有的库函数可以做到这一点，或者最好自己循环属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:30:53.460

jQuery为此提供了一个内置方法：[`jQuery.param()`](http://api.jquery.com/jQuery.param/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:43:41.570

我推荐你使用 jQuery 的 param()。这是文档[http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/)

你会像这样传递你的对象：

var myObj = { h:300, w:300, skip:500, count:50 }

console.log('=>', $.param(myObj) ); // 打印 => h=300&w=300&skip=500&count=50

# windows-phone-7 - WP7 Background Audio - Memory Leak or Not?

> ID：14197881
> 
> 赞同：2
> 
> 时间：2013-01-07T14:26:26.270
> 
> 标签：windows-phone-7, mediastreamsource, background-audio

I'm creating an app that plays background audio.

Here's the RAM usage of my background audio playing process:

![MSS-Memory.png](../Images/bb67682923a06661094ebaaad093e82a.png)

Is this a memory leak or no?

I'm concerned because if / when it exceeds 15MB, the OS will silently kill my player, which is undesirable.

Is there a way to view what occupies that memory? My MediaStreamSource implementation only allocates single 512kb buffer on the startup, and never allocates a single byte while playing. BTW, the stream bitrate is 96 kbit/sec, which is the same as memory allocation rate of the app.

Is there a way to make the GC to be less lazy, and sleep for less then 8 minutes? I don't really like those spikes…

**Update 2013-04-21:** looks like some OS update (most likely the 7.8) has fixed the issue. Thanks for that, Microsoft! However, next time please note it in [the update history](http://www.windowsphone.com/en-gb/how-to/wp7/basics/update-history) :-)

# css - 解决浏览器兼容性问题的选项？

> ID：14197882
> 
> 赞同：2
> 
> 时间：2013-01-07T14:26:26.597
> 
> 标签：css, cross-browser, javascript, compass-sass, css3pie

我正在使用 css3 设计一个 Web 应用程序。每个人都知道许多 css3 属性，如渐变、边框半径、框阴影、动画、边框图像、背景 rgb、last-child、nth-child 等。在早期的 IE 版本（如 IE8）中不起作用， 7,6。一些像[css3 pie](http://css3pie.com/)这样的 java 脚本库可用于使 Internet Explorer 6-9 能够呈现几个最有用的 CSS3 装饰功能，如渐变、边框半径、边框阴影、边框图像（不是 Last-child ，第 n 个子属性），但我的一些朋友遇到了这个问题，并告诉我它不可靠。

是否有任何其他 js 库或 polyfill 将支持大多数 css3 装饰功能，包括子属性，而不使用像[compass](http://compass-style.org/)这样的过滤器？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:31:26.233

PIE css3 与 ie 的问题不是信任问题，在某些情况下 Pie 框架无法工作，因为它没有以下先决条件之一：
1- pie 的初始化路径或其前缀 ie 用于背景不正确。
在这种情况下，您应该检查路径。最佳做法是将 pie.htc 放在您的主页/框架或母版页旁边。
2-您在 IE 中的最终结果以怪异模式呈现。
3- 页面文档类型未定义或不是 XHTML（过渡或严格）或 html5。

对于上述任何问题，它都可能有一整本书的条件和情况。
但是一旦你使用它 3-4 次它就变得自然了，虽然我个人不建议在 IE 上使用 css3 框架，因为在大多数情况下 IE 比其他浏览器自然慢，而这些框架使它更慢。而且这通常对我个人没有好处，我更喜欢我的网站的向后兼容性。内容比好的地方更正确。

# php - 如何从数据库中获取两个字段的总和

> ID：14197883
> 
> 赞同：0
> 
> 时间：2013-01-07T14:26:26.783
> 
> 标签：php, mysql

```
$query = "SELECT agent_id, SUM(amount) FROM bill WHERE YEAR(date)  = YEAR(CURDATE()) AND MONTH(date) = MONTH(CURDATE()) GROUP BY agent_id"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result)){
    echo "Total ". $row['agent_id']. " = $". $row['SUM(amount)'];
    echo "<br />";
} 
```

数据库结构图像：

![数据库结构](../Images/84c706a2b7188fea32db535efbad7d28.png)

我想知道如何显示支票和金额的总和目前仅作为金额的总和

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:28:23.370

试试这个（我从你的问题中理解） -

```
SELECT agent_id, (SUM(amount)+sum(cheque)) As total FROM bill WHERE YEAR(date)  = YEAR(CURDATE()) AND MONTH(date) = MONTH(CURDATE()) GROUP BY agent_id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:28:35.273

当然可以，您的查询将如下所示：

```
SELECT agent_id, SUM(amount + cheque) 
FROM bill 
WHERE YEAR(date) = YEAR(CURDATE()) 
AND MONTH(date) = MONTH(CURDATE()) 
GROUP BY agent_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:32:05.637

```
SELECT agent_id, (SUM(amount) + SUM(cheque)) AS total_amount
FROM bill WHERE YEAR(date)  = YEAR(CURDATE()) AND MONTH(date) = MONTH(CURDATE()) 
GROUP BY agent_id 
```

# c# - Select a row of DataGridView based on a string item

> ID：14197887
> 
> 赞同：0
> 
> 时间：2013-01-07T14:26:49.327
> 
> 标签：c#, datagridview

Using : **VS2010, .Net 3.5.** I apologize for my poor Title.

I have a **string item** which, i am sure, is available in a **datagridview**. Now i want to select the row, where the item belongs.

```
 tableName = tmp._Table;     //I have my table_name here 
```

//This following code shows what my dgvtablelist have.

```
 dgvTablesList.DataSource = CS.getAllTables(serverName, dbName, authenticationType, logIn, passWord); 
```

SO, how would I select my **tableName** in the **DataGridVIew**?

**I dont have any **index**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:30:57.597

首先找到搜索值的gridview行索引：

```
String searchValue = "your_table_name";
int rowIndex = -1;
foreach(DataGridViewRow row in DataGridView1.Rows)
{
    if(row.Cells[1].Value.ToString().Equals(searchValue))
    {
        rowIndex = row.Index;
        break;
    }
} 
```

然后选择那个..

```
dataGridView1.Rows[rowIndex].Selected = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:16:14.280

您应该尝试这样做以选择 DataGridView 行。

```
DataGridView1.CurrentCell = DataGridView.Rows[rowIndex].Cells[0]; 
```

希望这可以帮助。

# oop - 什么时候应该使用单独的类来表示一个空容器？

> ID：14197890
> 
> 赞同：1
> 
> 时间：2013-01-07T14:26:58.053
> 
> 标签：oop, containers

我最近一直在阅读“Scala by Example”一书，其中作者创建了一个抽象类来表示一组具有两个子类（EmptySet 和 NonEmptySet）的整数“IntSet”，如下所示：

```
abstract class Stack[A] { 
  def push(x: A): Stack[A] = new NonEmptyStack[A](x, this)
  def isEmpty: Boolean
  def top: A
  def pop: Stack[A]
}

class EmptyStack[A] extends Stack[A] {
  def isEmpty = true 
  def top = error("EmptyStack.top")
  def pop = error("EmptyStack.pop")
}

class NonEmptyStack[A](elem: A, rest: Stack[A]) extends Stack[A] {
  def isEmpty = false
  def top = elem
  def pop = rest
} 
```

我的问题是：这种将空容器表示为自己的类而不是创建一个具体类来处理空容器和非空情况的范例有多大用处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:29:45.670

每个*实现都更简单且更具可读性*，因为不必在实现中进行 is-empty-check。这也会导致更好的代码度量值（如圈复杂度）。

此外，它通常使实现*稍微快一些*，因为空和非空之间的区别不必在运行时完成。据我所知，Scala`Set`应用了这种技术并实现了不同类型的集合（根据它们的大小使用）来优化性能。

显然，这仅适用于不可变数据结构。

# magento - 显示图标而不是 magento 网格动作标签

> ID：14197895
> 
> 赞同：0
> 
> 时间：2013-01-07T14:27:10.737
> 
> 标签：magento, grid, icons

如何在 magento 管理网格中显示图标而不是操作标签。例如：我需要在网格中显示图像图标而不是“编辑”/“删除行”

谢谢， 壁画

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:10:29.667

我通过使用 css.Simply Add to action array 你的新类完成了这个问题

```
$this->addColumn('action',
            array(
                'header'    =>  Mage::helper('mymodule')->__('Action'),
                'width'     => '100',
                'type'      => 'action',
            'align'     =>'center',
                'getter'    => 'getAnswerId',

         'actions'   => array(          
           array(
                        'caption'   => Mage::helper('mymodule')->__('Delete'),
                        'url'       => array('base'=> '*/*/delete'),
                'confirm'  => Mage::helper('mymodule')->__('Are you sure?'),
                       'class'     => 'addm',

                    )
             ),
                'filter'    => false,
                'sortable'  => false,
                'index'     => 'store',
                'is_system' => true,

        )); 
```

并使用以下代码编写您的新 css：

```
.addm{
    background-image:url('delete.png');
    background-repeat:no-repeat;
     text-indent:-9999px !important;
     font-size:0px;
     display:block;
    margin-left:5px;

    }. 
```

你已经做到了。

# ruby-on-rails - Rails: categories and sub-categories model rails

> ID：14197897
> 
> 赞同：20
> 
> 时间：2013-01-07T14:27:19.627
> 
> 标签：ruby-on-rails, model, ruby-on-rails-3.2, categories

Without using any gems how do I do this in rails?

Main Category
 Sub Category
 Sub Category
 Sub Category

Main Category
 Sub Category
 Sub Category
 Sub Category

Main Category
 Sub Category
 Sub Category
 Sub Category

I have a table that consists of | id | level1 | level2 |

Level 1 being the main category and Level 2 being the subcategory

I would like it displayed in the view like above.

After looking around on the internet everyone seems to recommend using acts-like-a-tree gem, but i want to avoid using them as I'm fairly new to rails and I would like to understand how to do things rather than turn to gems.

Your help is much apreciated

Model:

```
class Category < ActiveRecord::Base
belongs_to :catalogue
    has_many :subcategories, :class_name => "Category", :foreign_key => "parent_id", :dependent => :destroy
belongs_to :parent_category, :class_name => "Category"
end 
```

Controller:

```
class CataloguesController < ApplicationController
  layout 'main'
  def index
   @cats = Catalogue.all
  end

  def categories
   @cat = Catalogue.find(params[:id])
  end

end 
```

View:

```
<ul class="unstyled-list">

    <% @cat.categories.order([:level1]).each do |cat|%>
        <li><%=  cat.level1 %></li>
        <li><%= cat.level2 %></li>
    <% end %>
</ul> 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-07T14:36:45.500

为子类别（或子子类别等）创建一个对其[自身](https://guides.rubyonrails.org/association_basics.html#self-joins)具有引用的模型：

```
class Category < ActiveRecord::Base
  has_many :subcategories, :class_name => "Category", :foreign_key => "parent_id", :dependent => :destroy
  belongs_to :parent_category, :class_name => "Category", :optional => true
end 
```

*   `has_many`定义`subcategories`模型类型的关联`Category`。即它使用同一张表。
*   `belongs_to`定义了与父类别的关系，可通过以下方式访问`@category.parent_category`

有关模型关联的更多信息，`has_many`或者`belongs_to`，请阅读[关联基础指南](http://guides.rubyonrails.org/association_basics.html)。

要创建表，请使用此迁移：

```
class CreateCategories < ActiveRecord::Migration
  def self.up
    create_table :category do |t|
      t.string      :text
      # table name should be in plural 
      t.references  :parent_category, foreign_key: { to_table: :categories }
      t.timestamps
    end
  end
end 
```

*注意*：此表格格式与您建议的（略有）不同，但我想这不是一个真正的问题。

[迁移指南](http://guides.rubyonrails.org/migrations.html)包含有关数据库迁移的更多信息。

在您的控制器中使用

```
def index
  @category = nil
  @categories = Category.find(:all, :conditions => {:parent_id => nil } )
end 
```

查找没有父类的所有类别，即主要类别

要查找任何给定类别的所有子类别，请使用：

```
# Show subcategory
def show
  # Find the category belonging to the given id
  @category = Category.find(params[:id])
  # Grab all sub-categories
  @categories = @category.parent_category
  # We want to reuse the index renderer:
  render :action => :index
end 
```

要添加新类别，请使用：

```
def new
  @category = Category.new
  @category.parent_category = Category.find(params[:id]) unless params[:id].nil?
end 
```

它创建一个新类别并设置父类别，如果提供的话（否则它成为主类别）

注意：我使用了旧的 rails 语法（由于懒惰），但对于现代版本的 Rails，原理是相同的。

在你的`categories/index.html.erb`你可以使用这样的东西：

```
<h1><%= @category.nil? ? 'Main categories' : category.text %></h1>
<table>
<% @categories.each do |category| %>
<tr>
  <td><%= link_to category.text, category_path(category) %></td>
  <td><%= link_to 'Edit', edit_category_path(category) unless category.parent.nil? %></td>
  <td><%= link_to 'Destroy', category_path(category), :confirm => 'Are you sure?', :method => :delete unless category.parent.nil? %></td>
</tr>
<% end %>
</table>
<p>
  <%= link_to 'Back', @category.parent_category.nil? ? categories_path : category_path(@category.parent_category) unless @category.nil? %>
  <%= link_to 'New (sub-category', new_category_path(@category) unless @category.nil? %>
</p> 
```

它显示所选类别（或主类别）及其所有子类别的名称（在一个漂亮的表中）。它链接到所有子类别，显示类似的布局，但针对子类别。最后，它添加了一个“新子类别”链接和一个“返回”链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-17T05:35:15.010

```
class CreateCategories < ActiveRecord::Migration
  def self.up
    create_table :category do |t|
      t.string      :text
      t.references  :parent
      t.timestamps
    end
  end 
```

# iphone - 如何更改 UITableView 的弹跳范围

> ID：14197898
> 
> 赞同：5
> 
> 时间：2013-01-07T14:27:23.953
> 
> 标签：iphone, ios, uitableview, uiscrollview

我有一个 UITableView 隐藏了它下面的视图。当您将 tableview 滚动到结束时，您可以滚动更多，然后您会看到 tableview 下的视图。您可以额外滚动的范围是固定的，当您到达它时，tableview 会弹回原来的位置..

有没有办法设置这个范围？我想增加它以便在 tableview 下显示一个长视图，大约一半的屏幕，并且 tableview 可以额外滚动少一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:11:47.897

看起来没有办法设置 tableview 的弹跳范围。另一种方法是将平移手势识别器添加到模拟弹跳。当然你首先需要设置tableview的属性反弹为NO。

# c# - 绘制大量矩形的最有效方法

> ID：14197900
> 
> 赞同：0
> 
> 时间：2013-01-07T14:27:31.463
> 
> 标签：c#, .net, silverlight

我有一个普遍的问题。

我目前正在构建一个需要生成大量矩形对象的 Silverlight 应用程序。一个示例场景是 25 x 25 x 128（存储在矩形 [,,] 内）。矩形的外观可以根据相同大小的 int 数组的内容而改变。

然后将矩形绘制到画布上。可以更改当前图层，以便获得一组不同的矩形（由多维数组的“z”轴控制）

这似乎很明显，所以如果是这种情况，我提前道歉。但是，在一个操作中在一个大的 rectangle[,,] 内生成所有这些矩形，还是根据用户的请求将每一层生成一个 rectangle[,] 是否更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:33:31.060

> 在一个操作中在一个大矩形[,,] 内生成所有这些矩形或根据用户请求将每一层生成一个矩形[,] 是否更有效？

这完全取决于。您可以对其进行基准测试，因为您正在构建应用程序，我们不知道您之前和之后做了什么以及您想要存储什么。

我想说：创建一个`Layer`拥有自己`Rectangle[,]`引用的类，这样你就可以在一个地方承担所有责任，然后遍历一个`List<Layer>`. 然后，您可以存储、检索和编辑单个图层，而其他矩形保持不变。

这样，如果需要，您还可以轻松加载一层。

# windows - 如何将服务 SID 添加到服务？

> ID：14197908
> 
> 赞同：1
> 
> 时间：2013-01-07T14:28:07.013
> 
> 标签：windows, service, windows-services, windows-security

我有一个内置 TCP/IP 服务器的 Windows 服务。客户端和连接以及分发一些信息等。通常安装该服务以作为网络服务登录。

有一些数据存储在 ProgramData 下的文件夹中，因此在安装期间向服务授予对该文件夹的读/写访问权限。但是，因此通常使用网络服务帐户授予所有服务访问权限。我知道可以使用带有 SERVICE_CONFIG_SERVICE_SID_INFO的[ChangeServiceConfig2添加特定的服务 SID。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681988%28v=vs.85%29.aspx)然而，从那里开始，根本不清楚如何进行，如果这甚至可以解决我的问题。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:28:25.127

这称为[服务隔离](http://msdn.microsoft.com/en-us/library/windows/desktop/bb203962%28v=vs.85%29.aspx)。[使用具有 SID 类型的SERVICE_SID_INFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685987%28v=vs.85%29.aspx)结构的SERVICE_CONFIG_SERVICE_SID_INFO 参数指定指示 SCM 将服务 SID 添加到服务的进程令牌，从而允许服务访问您可能已配置为仅允许访问您的特定服务的资源。你也可以使用 sc 命令

```
sc <server> sidtype [service name] [type]

OPTIONS:
 type = <none|unrestricted|restricted>

sc <server> qsidtype [service name] 
```

# perl - 在 for 循环范围内声明的 Perl 标量在迭代之间保留其值

> ID：14197909
> 
> 赞同：6
> 
> 时间：2013-01-07T14:28:14.383
> 
> 标签：perl, for-loop

这是我关于 SO 的第一个问题，如果它很愚蠢，很抱歉，但是当我最近在生产代码中遇到它时，这真的让我感到困惑。我把我的问题归结为两个代码块，我希望它们做同样的事情，即为每次迭代产生一个随机数：

```
for my $num (0 .. 5) {
    my $id = int rand 10;
    print "$id\n";    
} 
```

和

```
for (0 .. 5) {
    my $tmp;
    my $id = $tmp if $tmp;

    $id = int rand 10 unless $id;
    print "$id\n";
} 
```

第一个做我期望它做的事情，但第二个给任意数量的迭代提供相同的数字。`$tmp`在这种简化中始终未定义，因此它仅用于显示行为，因为省略`= $tmp if $tmp`会产生我期望的结果。

我很感激任何关于为什么会发生这种情况的见解。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T14:42:45.940

出现这种奇怪行为的原因是，您已经对 的*声明*以及`$id`对它的赋值以 的真实性为条件`$tmp`，这使得 Perl 失败了。[`perldoc perlsyn`](http://perldoc.perl.org/perlsyn.html#Statement-Modifiers)有话要说

> 注意：使用语句修饰符条件或循环构造（例如，my $x if ...）修改的 my、state 或 our 的行为是未定义的。my 变量的值可以是 undef、任何先前分配的值，或者可能是其他任何值。不要依赖它。未来版本的 perl 可能会做一些与您尝试使用的 perl 版本不同的事情。这里是龙。

如果您按如下方式更改代码，您可以自己演示这一点，效果很好。

```
for (0 .. 5) {
    my $tmp;
    my $id;
    $id = $tmp if $tmp;

    $id = int rand 10 unless $id;
    print "$id\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T14:40:17.033

语句修饰符的行为在 a 之后是未定义的`my ...`（参见[perlsyn](http://perldoc.perl.org/perlsyn.html#Statement-Modifiers)）。所以不要用那个...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T16:24:55.490

您偶然发现了一个长期以来故意未修复的错误，因为它很有用。线

```
my $id = $tmp if $tmp; 
```

将语句修饰符 (the `if`) 应用于变量声明 (the `my`)。有条件地定义一个变量没有多大意义，但是因为`my`同时具有编译时和运行时行为，这有效地创建了一个状态变量：即一个在词法上限定为封闭块但在执行之间保持其值的变量。堵塞。

（故意）调用您所看到的行为的通常形式是

```
my $x if 0; 
```

自 Perl 5.10 以来，此行为已被弃用，它添加了`state`变量以干净地执行此操作。现代版本的 Perl (5.10+) 将发出警告

```
Deprecated use of my() in false conditional 
```

即使在 5.10 版之前，使用这种形式也有点糟糕，因为可以通过添加封闭块并在那里声明变量来干净地（虽然不是那么简洁）完成模拟状态变量。例如：

```
{
  my $n = 0;
  sub increment { return $n++; }
} 
```

# excel - office 2007 macro - find cell in one sheet and copy row to sheet 2

> ID：14197913
> 
> 赞同：0
> 
> 时间：2013-01-07T14:28:33.570
> 
> 标签：excel, excel-2007, vba

i need help writing the following macro.

sheet 1 has the following cells in column A 0001 0002 0003 0004 0005

sheet 2 has the following cells in Column A 0001 0003 0004

i need a macro to find the number from sheet 2 cell A1 in sheet 1, then copy the row A1 - G1 from sheet 2 to the corresponding number's row in sheet 1\.

the numbers in sheet 2 will differ daily so i need the macro to search for whatever is typed in cell A1\. i have tried everything i know for a macro to search for the contents of a cell with no luck.

the only way i can think of is to bring up a search box during the macro and type in the contents manualy

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:38:25.423

尝试这个：

```
Sub CopyCells()

Dim rnSource As Range, rnDest As Range, rnTempSource As Range, rnTempDest As Range

Set rnDest = Sheet1.Range("A1", Sheet1.Range("A60000").End(xlUp).Address)
Set rnSource = Sheet2.Range("A1", Sheet2.Range("A60000").End(xlUp).Address)

'Loop through Sheet2 column A, find value in Sheet1 and copy cells across

For Each rnTempSource In rnSource
    If rnTempSource.Value <> "" Then
        Set rnTempDest = rnDest.Find(rnTempSource.Text) 'Used .text to ignore unusual number format 0001
        Sheet1.Range(rnTempDest, rnTempDest.Offset(0, 6)).Value = Sheet2.Range(rnTempSource, rnTempSource.Offset(0, 6)).Value
    End If
Next

End Sub 
```

# java - Spring - 我如何调整 SoapEnvelopeLoggingInterceptor 以比标准输出更正式地记录数据到日志文件

> ID：14197918
> 
> 赞同：0
> 
> 时间：2013-01-07T14:28:43.630
> 
> 标签：java, web-services, spring, spring-mvc, interceptor

我正在尝试对我的 Spring Web 服务请求/响应进行正式审计。

我在我的 Spring 配置中有这个：

```
<ws:interceptors>   
   <bean class="org.springframework.ws.soap.server.endpoint.interceptor.SoapEnvelopeLoggingInterceptor"/>
</ws:interceptors> 
```

这很好，并将请求和响应记录到我的 JBoss 日志文件中。不过，我想要的是能够适应这一点并更清晰地记录这些请求/响应，以及如何获取数据，以便我可以写入数据库中的审计记录。

如何在上面进行调整，以便我可以映射到我的一个 bean 或类似的并获取请求和响应中的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:32:04.970

您应该能够创建一个子类`SoapEnvelopeLoggingInterceptor`并覆盖 `logMessage(String)`以执行您想要的操作。例子：

```
<ws:interceptors>   
   <bean class="org.mypackage.SysErrLoggingInterceptor"/>
</ws:interceptors>

package org.mypackage;

public class SysErrLoggingInterceptor extends SoapEnvelopeLoggingInterceptor {
    @Override
        protected void logMessage(String message) {
        System.err.println(message); 
        /* Example, here you could be logging to DB or whatever you want */
    }

} 
```

# matlab - 更改单元格数组中的每个字符串并将其转换为没有循环的数字？

> ID：14197920
> 
> 赞同：1
> 
> 时间：2013-01-07T14:29:08.167
> 
> 标签：matlab, for-loop, vectorization

我有以下字符串单元格数组：

```
daycell = 

'd100'
'd104'
'd105' 
```

我想从中制作一个数字数组，如下所示：

```
array =

100   104   105 
```

**我可以使用循环来完成它：**

```
daycell = {'d100';'d104';'d105'}
array = [];
for g = 1:1:length(daycell)
    array(g) = str2double(daycell{g}(2:end));
end 
```

**没有循环可以做到吗？**没有循环使用它会更好吗？`daycell`实际上有更多的行。

* * *

到目前为止，我可以`d`使用以下方法消除这封信：

```
daym = cell2mat(daycell);
daynoD = daym(:,2:end);

daynoD =

100
104
105 
```

但我不知道如何处理字符矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:48:11.577

一种方法是使用`cellfun`

```
cellfun(@(x)str2double(x(2:end)),daycell); 
```

# magento - 如何将产品设置为某些项目的产品选项

> ID：14197934
> 
> 赞同：2
> 
> 时间：2013-01-07T14:30:22.063
> 
> 标签：magento, product

我想为客户提供将配件添加到购物车以及他们正在查看的产品的机会。最好的方法是作为选项，问题是不能将 Magento 配置为设置作为产品的选项，这些选项在选择时会添加到购物车中。

这是我想要实现的一个例子。

我有一个产品，可以说它是笔记本电脑。

我还有其他产品，如手提包、USB 鼠标和 VGA 电缆。

在笔记本电脑产品页面上，我想以与提供产品选项相同的方式提供这些配件。

如何才能做到这一点？

我正在考虑重新定位相关产品框，使其靠近添加到购物车按钮，但这相当困难，而且对于我认为非常简单的东西来说似乎很多。

我感谢任何人可以提供的任何帮助。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:46:31.660

Magento 中已经提供了执行此操作的方法 - 您需要创建一个“捆绑产品”。在创建捆绑产品时的“关联产品”选项卡中，您可以添加额外的东西，例如包等，作为下拉选项或复选框。

在 Magento 演示商店中查看此类似产品：http: [//demo.magentocommerce.com/computer.html](http://demo.magentocommerce.com/computer.html) - 这是捆绑产品。请记住，主要产品（笔记本电脑）也需要创建一个简单的产品并以相同的方式关联到捆绑包。

# haskell - 如何在 Haskell 中使用 hedis 通过 Unix 域套接字连接到 redis 服务器？

> ID：14197935
> 
> 赞同：9
> 
> 时间：2013-01-07T14:30:28.293
> 
> 标签：haskell, redis, connection-string, unix-socket

我正在寻找如何使用[hedis](http://hackage.haskell.org/package/hedis)通过Unix域套接字连接到redis服务器，如hackage页面中所宣传的那样：

> **通过 TCP 或 Unix 域套接字连接：**
> TCP 套接字是连接到 Redis 服务器的默认方式。对于到同一台机器上的服务器的连接，Unix 域套接字提供比标准 TCP 连接更高的性能。

从 和 的构造函数看来，我们应该填写，[`ConnectInfo`](http://hackage.haskell.org/packages/archive/hedis/0.6.2/doc/html/Database-Redis.html#t:ConnectInfo)因为它的类型有一个名为 的构造函数。但它只显示是一个，没有格式等细节。[`defaultConnectInfo`](http://hackage.haskell.org/packages/archive/hedis/0.6.2/doc/html/Database-Redis.html#v:defaultConnectInfo)`connectPort``PortID``UnixSocket``UnixSocket``String`

那么如何填写`connectPort`to connect via Unix domain socket呢？谢谢。

* * *

**更新：**我试过了，发现它并不难。下面是我的hello world。

```
{-# LANGUAGE OverloadedStrings #-}
import Control.Monad.Trans
import Database.Redis

myConnectInfo :: ConnectInfo
myConnectInfo = defaultConnectInfo { connectPort = UnixSocket "/tmp/redis.sock" }

main :: IO ()
main = do
    conn <- connect myConnectInfo
    runRedis conn $ do
        set "hello" "hello"
        set "world" "world"
        hello <- get "hello"
        world <- get "world"
        liftIO $ print (hello,world) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T15:45:56.480

我根本不是 Haskell 用户，我无法测试它，但我想说你只需要在这个字符串中提供套接字文件的路径。

代替：

```
connectPort           = PortNumber 6379 
```

你将会拥有：

```
connectPort           = UnixSocket "/tmp/redis.sock" 
```

当然，/tmp/redis.sock 应该在服务端 Redis 配置文件中声明，使用如下参数：

```
# Specify the path for the unix socket that will be used to listen for
# incoming connections. There is no default, so Redis will not listen
# on a unix socket when not specified.
#
unixsocket /tmp/redis.sock
unixsocketperm 755 
```

请注意，默认情况下，unix 域套接字参数被注释掉。

# vim - 如何用 vimscript 换行一段文本？

> ID：14197936
> 
> 赞同：0
> 
> 时间：2013-01-07T14:30:30.257
> 
> 标签：vim

我正在编写一个 vimscript 函数来将当前选定的行（可视模式）包装在 Ruby begin-rescue 块中。我有一些奇怪的行为。这是我的功能：

```
function! BeginRescueWrap()
  execute "normal! gvd"
  let head = "begin\<CR>"
  let body = @"
  let tail = "rescue StandardError =>e\<CR>binding.pry\<CR>end\<CR>"
  execute "normal! i" . head . "\<CR>" . body . "\<CR>" . tail
endfunction 
```

它*几乎*可以工作——出于某种原因，它只产生了头部和尾部的两个副本。例如，在选择此文本时运行该函数：

```
Oh lord won't you buy me a Mercedes Benz
My friends all drive Porsches, I must make amends 
```

产生这个输出：

```
begin

  begin

  rescue StandardError =>e
  binding.pry
  end

  Oh lord won't you buy me a Mercedes Benz
  My friends all drive Porsches, I must make amends

  rescue StandardError =>e
  binding.pry
  end 
```

我不在乎缩进（以后可以解决）。请注意，有一个外包装，其中包括一个空的内包装，后跟目标行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T15:04:49.287

问题是 Vim 会执行你的方法两次，因为你选择了 2 行。如果将`range`参数添加到方法中，它将只执行一次，并且您将获得所需的效果：

```
function! BeginRescueWrap() range
  execute "normal! gvd"
  let head = "begin\<CR>"
  let body = @"
  let tail = "rescue StandardError =>e\<CR>binding.pry\<CR>end\<CR>"
  execute "normal! i" . head . "\<CR>" . body . "\<CR>" . tail
endfunction 
```

请注意，尽管出于此特定目的，这样的映射可能会更简洁：

```
vnoremap ,q sbegin<cr><C-R>1rescue StandardError =>e<cr>binding.pry<cr>end<cr> 
```

此映射`,q`删除当前选定的文本，写入`begin`语句，然后放入刚刚删除的内容，然后写入您的结尾结尾。

# java - amqp 和骆驼错误：路由没有输入

> ID：14197937
> 
> 赞同：0
> 
> 时间：2013-01-07T14:30:39.787
> 
> 标签：java, spring, apache-camel, amqp, spring-amqp

我对骆驼的溃败遇到了一些问题。这是我的配置文件，很简单：

```
<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="brokerURL" value="tcp://10.211.55.20:5672"/>
</bean>

<camel:camelContext xmlns="http://camel.apache.org/schema/spring">

    <jmxAgent id="agent" createConnector="false" disabled="true"/>

    <camel:route>
        <route>
            <from uri="activemq:hello?destination.consumer.exclusive=true&amp;destination.consumer.prefetchSize=50"/>
            <to uri="stream:out"/>
        </route>
    </camel:route>
</camel:camelContext> 
```

在这种情况下，我使用的是 RabbitMQ，hello 是队列名称。

运行它，我收到以下错误消息：

```
Invocation of init method failed; nested exception is java.lang.IllegalArgumentException:  Route has no inputs: Route[[] -> [Route[[From[activemq:hello?destination.consumer.exclusive=true&destination.consumer.prefetchSize=50]] -> [To[stream:out]]]]] 
```

任何想法？我在哪里可以获得 Camel + RabbitMQ 的示例或教程？

- - 更新 - -

按照以下评论的建议，我修复了配置，并且已经完成了一小步。现在它似乎能够连接到队列但是，如果我尝试写我得到“camelContext must be specified”异常

```
<bean id="messageConverter" class="amqp.spring.converter.XStreamConverter"/>

<rabbit:connection-factory id="connectionFactory" host="10.211.55.20" port="5672" />
<rabbit:template id="amqpTemplate" connection-factory="connectionFactory" message-converter="messageConverter" exchange="amq.fanout" />
<rabbit:admin connection-factory="connectionFactory"/>
<rabbit:queue name="hello"  />

<camel:camelContext xmlns="http://camel.apache.org/schema/spring">
    <camel:route>
        <camel:from uri="file:src/data?noop=true" />
        <camel:log message="Log!"/>
        <camel:to uri="spring-amqp:amq.fanout:hello"/>
    </camel:route>
</camel:camelContext> 
```

谢谢，
安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:18:13.250

有两个错误。首先，XML 似乎在路由上缺少命名空间：

```
<camel:route>
   <route>
        <from uri="activemq:hello?destination.consumer.exclusive=true&amp;destination.consumer.prefetchSize=50"/>
        <to uri="stream:out"/>
    </route> 
```

应该：

```
<camel:route>
   <camel:route>
        <camel:from uri="activemq:hello?destination.consumer.exclusive=true&amp;destination.consumer.prefetchSize=50"/>
        <camel:to uri="stream:out"/>
    </camel:route> 
```

那么，目前 RabbitMQ 与 ActiveMQ 并不真正兼容。ActiveMQ 5.8 版似乎支持 RabbitMQ 使用的 AMQP 协议，但是否会在 Camel 组件中支持或是否与 RabbitMQ 兼容是另一个问题。我不知道。

Camel 中也有一个 AMQP 组件。它使用的是 Apache QPID 客户端，我没有任何运气使用 RabbitMQ 运行它。如果您深入研究使用某些特定版本等（http://www.rabbitmq.com/interoperability.html），它可能会在某种程度上起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T14:25:59.787

我遇到过同样的问题。原来我把`route`s叠起来了。所以，而不是拥有

```
<camel:route>
   <route>
        <from uri="activemq:hello?destination.consumer.exclusive=true&amp;destination.consumer.prefetchSize=50"/>
        <to uri="stream:out"/>
    </route> 
```

只需跳过封闭的`<route>`.

# javascript - 如何在运行时从 javascript 更改 CKEditor 语言？

> ID：14197943
> 
> 赞同：1
> 
> 时间：2013-01-07T14:30:56.987
> 
> 标签：javascript, ckeditor

在我的应用程序语言环境中可以动态设置，因此我希望在 CKEditor 中具有相同的行为，例如，如果在我的应用程序中我将语言环境从 EN 更改为 DA，我希望在 CKEditor 中进行相同的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:35:17.040

不幸的是，在运行时没有办法做到这一点。唯一的方法是`destroy()`先创建实例，然后创建另一个具有不同`config.language`设置的实例。

这就是官方[UI 语言](http://ckeditor.com/demo#localization)演示的工作方式。

# java - 将 -D 参数作为文件传递给 Java 命令行

> ID：14197949
> 
> 赞同：1
> 
> 时间：2013-01-07T14:31:15.927
> 
> 标签：java, command-line, command-line-arguments

我想将 -D 参数传递给 Java 程序，该程序会将这些变量设置为系统属性。但是我有 3 到 4 个 -D 参数并且列表可以动态增长，所以是否可以将所有这些参数添加到文件中并将其作为参数传递？

默认方法

```
-Dproperty=value
Set a system property value. If value is a string that contains spaces, you must enclose the string in double quotes:
            java -Dfoo="some string" SomeClass 
```

我想这样做

```
variables.dat
-Dfoo="some String"
-Dbar="some string"
      ....
      ....

java -SOME_OPTION variables.dat SomeClass 
```

有可能做到这一点吗？我从网上得到任何帮助的地方。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:36:27.527

实现起来非常简单。假设文件是

```
-Dkey1=value1
-Dkey2=value2 
```

您只需阅读此文件；并在循环中做 System.setProperty(key1.substring(2), value1) ；因为这最终是 -D 选项的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:35:20.303

不，`java`可执行文件不会读取此文件来解析属性。您将不得不依靠您的 shell 来执行类似的操作，例如将文件中的属性作为参数的一部分回显给 JVM 调用。

# asp.net - How to genrate the AES encryption value for the machinekey in C# 3.5

> ID：14197958
> 
> 赞同：0
> 
> 时间：2013-01-07T14:31:40.227
> 
> 标签：asp.net

I need to decrypt/encrypt based on the machine key. How can we generate the key and IV values? Is there any tool to do like this?

I am using .NET Framework 3.5

To tell what is required Ex:

```
//24 byte or 192 bit key and IV for AES
private static byte[] KEY_192 = { ... };
private static byte[] IV_192 = { ... }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:49:07.003

I guess you could *technically* hack this by leveraging the [FormAuthentication](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx) class, it uses the same encryption under the hood e.g.

```
var dataTicket = new FormsAuthenticationTicket(1, String.Empty, DateTime.UtcNow, DateTime.UtcNow.AddDays(1), true, "encrypt me!");
var encryptedData = FormsAuthentication.Encrypt(dataTicket);
...
dataTicket = FormsAuthentication.Decrypt(encryptedData);
Console.WriteLine(dataTicket.UserData); // "encrypt me!" 
```

A better solution would be to upgrade to .NET 4 and use the [MachineKey](http://msdn.microsoft.com/en-us/library/system.web.security.machinekey%28v=vs.100%29.aspx) class directly.

# database - 在表格中插入行并跟踪列表顺序

> ID：14197962
> 
> 赞同：0
> 
> 时间：2013-01-07T14:32:03.660
> 
> 标签：database

我有下表：

```
- id (PK, int, Autoincrement)
- fk (foreign key, int)
- somedata (whatever)
- list_order (int) 
```

我需要按 list_order 为给定 fk 定义的顺序返回一些数据。没问题：`SELECT somedata FROM myTable WHERE fk=123 ORDER BY list_order`。

我的问题涉及如何最好地添加一条记录，如果我希望它成为给定 FK 的最后一条记录。我是否首先需要对给定的 fk 查询执行 MAX(list_order)，然后再执行一个单独的查询来插入新行，或者我可以在一个查询中以某种方式执行此操作吗？请注意，记录的顺序可能会更改，因此我不能简单地摆脱 list_order 并使用 ORDER BY id。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:49:43.903

你可以做一个查询：

```
INSERT INTO tableX
  ( fk, somedata, list_order)
SELECT
    fk, @somedata, MAX(list_order) + 1
FROM tableX
WHERE fk = @fk ; 
```

不利的一面是，如果您有许多并发插入语句，则两个（或更多）可能会尝试将相同的值插入到`fk`和`list_order`列中。因此，由于您可能`UNIQUE`在组合中受到限制，因此`(fk, list_order)`除了其中一个之外，所有这些都将失败。

# javascript - JS中的折线图：每个数据点的标签

> ID：14197964
> 
> 赞同：0
> 
> 时间：2013-01-07T14:32:04.213
> 
> 标签：javascript, jquery, jqplot, flot

我们希望从我们的数据中生成折线图，其中每个数据点都应该有一个标签。我们已经用[flot](http://code.google.com/p/flot/)和[jqplot](http://www.jqplot.com/)进行了尝试，但没有成功。

你知道用这些库中的一个或者其他能够做到这一点的 JS / jQuery 库来做到这一点的方法吗？

# eclipse - HBase--REST web-service--Eclipse--RESTeasy

> ID：14197966
> 
> 赞同：0
> 
> 时间：2013-01-07T14:32:07.313
> 
> 标签：eclipse, rest, hbase, resteasy

我需要一些关于如何编写 REST Web 服务以在 HBase 中插入数据的指导？只是一个指导方针，我的意思是我的步骤应该是什么，仅此而已。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:53:00.077

如果你真的想这样做，你可以编写一个 HBaseDAO 层来访问 hbase，然后在上面编写 resteasy 代码。但这应该只是您的客户端使用 hbase 数据和服务器而不是在单个集群中的情况。这将失去 hbase + hadoop 进程所具有的数据局部性优势......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:35:36.780

HBASE已经有休息服务了。

[http://wiki.apache.org/hadoop/Hbase/Stargate](http://wiki.apache.org/hadoop/Hbase/Stargate)

在 centos 上安装

sudo yum 安装 hbase-rest

服务 hbase-rest 启动

您可能想要更改它正在运行的端口。

# c - How to read an unknown number of bytes from an input stream that may contain null characters?

> ID：14197976
> 
> 赞同：2
> 
> 时间：2013-01-07T14:32:47.767
> 
> 标签：c, linux, binarystream

I'm having some trouble reading an **unknown** amount of bytes (raw data, **may contain NULLs**) from a device using c in Linux. How can I read the device for "as long as it's ready to be read"? (hopefully without reading 1 byte at a time).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:37:03.473

Well if you're using [read](http://linux.die.net/man/2/read) you'll either block if there's no data, or succeed if there was data to read. If there was data to read you'll get either the amount you wanted, or an amount less if there's no more to read. Look at the return value of read to determine how much you have. You could make it non-blocking but the approach of checking reads return value holds true regardless.

Just chunk through the data in whatever size chunks you want to deal with, one character at a time, or more, if you're more aware of the kind of bursts of data you'll have.

# jquery - 使用 jQuery insertBefore 悬停不正确

> ID：14197982
> 
> 赞同：2
> 
> 时间：2013-01-07T14:33:20.920
> 
> 标签：jquery, css, hover

我正在开发一个交互式元素，该元素要求用户通过单击一个段落将段落排序为正确的顺序，然后单击第二个段落以在第二个段落之前或之后插入第一个段落（取决于他们是否在移动段落在列表中向上或向下）

[http://jsfiddle.net/5ZQkz/2/](http://jsfiddle.net/5ZQkz/2/)

我的问题是，当一个段落被移动到不同的地方时，单击的第二个段落的悬停状态保持活动状态 - 即使该段落没有被悬停。这种情况一直发生，直到鼠标移动，此时正确的段落显示悬停状态。

例如，单击第 1 段，然后单击第 2 段。段落切换位置，但悬停状态在第 2 段仍处于活动状态，尽管鼠标悬停在第 1 段上。**注意 - 此问题不会出现在 Firefox 中。**

有任何想法吗？

```
function swapParas(node1, node2) {
if (node1.index() > node2.index()) node1.insertBefore(node2);
else node1.insertAfter(node2);
node1.hide().fadeIn();
node1.removeClass('selected');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:39:49.420

```
.selected:hover {
  background:green;
} 
```

试试上面的代码。

希望这是你想要的。

这是一个IE修复。看起来很奇怪，但这是你能得到的最好的：

```
function swapParas(node1, node2) {
  if (node1.index() > node2.index()) node1.insertBefore(node2);
  else node1.insertAfter(node2);
  node1.removeClass('selected');
  node2.after("<div class='para'>" + node2.html() + "</div>");
  node2.remove();
} 
```

# r - 在 by 和 drop 内更新

> ID：14197987
> 
> 赞同：2
> 
> 时间：2013-01-07T14:33:32.627
> 
> 标签：r, data.table

大家好，新年快乐，我想知道是否`data.table`可以处理基于每个组的选择执行的更新。

```
R) a=data.table(x=c("a","a","b","b","c","c"),y=c(1,2,3,3,2,1))
R) a
   x y
1: a 1
2: a 2
3: b 3
4: b 3
5: c 2
6: c 1 
```

如果我想更新每个分组中的条件，我需要在中进行选择`j`，但这更像是一`i`件事（选择）。

```
R) a[,c:=ifelse(y==max(y),"yes","no"),by=x]
R) a
   x y   c
1: a 1  no
2: a 2 yes
3: b 3 yes
4: b 3 yes
5: c 2 yes
6: c 1  no 
```

我可以使用类似 `a[y==max(y),c:="yes",by=x,within.by=TRUE]`我认为会快得多的选项来做同样的事情吗

第二个问题，它是否计划在 中进行 drop 参数`data.table`，能够做到 `DT[drop="x,y,z"]`这一点本质上是`DT[,':='(x=NULL,y=NULL,z=NULL)]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:15:31.713

这只是一个猜测，关注并建立在评论之上：`which.max(x)`可能比`x==max(x)`.

来自`?which.max`：

> **`which.min`和的值`which.max`** 长度为 1 或 0 的整数（仅当 x 没有非 NA），分别给出 x 的第一个最小值或最大值的索引。`which(x == min(x))`如果此极值是唯一的（或为空），则结果与或分别相同（但效率更高）`which(x == max(x))`。

所以，也许是这样的：

```
DT[,c:="no"]
w = DT[,list(IDX=.I[which.max(y)]),by=x]$IDX
DT[w,c:="yes"] 
```

`i`这可能是你得到的用途。结果`w`是每组只有一个项目，而不是`.N`每组，因此它也可能因此更快。不仅仅是`which.max`一个人本身。但是当然，如​​果可以绑定最大值，那么`which.max`只会返回第一个，因此根据您的数据可能不合适。

如果您进行基准测试，请确保使数据变大（1GB+），并将 keyed by 与 unkeyed by 进行比较。

# android - Android Google 地图：更改地图标记的颜色

> ID：14197991
> 
> 赞同：0
> 
> 时间：2013-01-07T14:34:01.323
> 
> 标签：android, google-maps, google-maps-markers, google-maps-android-api-2

长话短说; 我在蓝牙设备上测量了该地区其他设备的信号强度，然后我在 Android 应用程序上记录了 GPS 位置。

我将位置放在我的应用程序中的谷歌地图上，但我希望标记根据信号强度（0-255）的值从红色变为绿色或类似的东西改变颜色。

我想我需要在应用程序中制作自己的 Drawable 或更改以下内容：

```
Drawable drawable = this.getResources().getDrawable(R.drawable.marker); 
```

但我找不到在 android 应用程序中绘制标记的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:49:47.137

你在用`GoogleMap`吗？如果你关闭了 Drawable-generation，你所要做的就是通过以下`MarkerOptions.icon`方法连接它：

```
BitmapDescriptor bitmap = BitmapDescriptorFactory.fromResource(R.drawable.resource);
MarkerOptions opts = new MarkerOptions().icon(descriptor);
this.getMap().addMarker(opts); 
```

这将在地图上绘制您的可绘制对象。

如果需要，[您可以替换](http://developer.android.com/reference/com/google/android/gms/maps/model/BitmapDescriptorFactory.html#fromBitmap%28android.graphics.Bitmap%29)`fromResource`为。`fromBitmap`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T13:22:48.763

我认为您必须尝试下面的类似代码，但它仅适用于默认标记，颜色会根据色调值而改变，这是来自`Google Maps API Demos`：

```
 // Creates a marker rainbow demonstrating how to create default marker icons of different
    // hues (colors).
    int numMarkersInRainbow = 12;
    for (int i = 0; i < numMarkersInRainbow; i++) {
        mMap.addMarker(new MarkerOptions()
                .position(new LatLng(
                        -30 + 10 * Math.sin(i * Math.PI / (numMarkersInRainbow - 1)),
                        135 - 10 * Math.cos(i * Math.PI / (numMarkersInRainbow - 1))))
                .title("Marker " + i)
                .icon(BitmapDescriptorFactory.defaultMarker(i * 360 / numMarkersInRainbow)));
    } 
```

# java - 在Scala中将非ascii连字符转换为ascii

> ID：14197992
> 
> 赞同：0
> 
> 时间：2013-01-07T14:34:04.787
> 
> 标签：java, scala, non-ascii-characters

在我的 Scala 网络应用程序中，我正在解析一个通常包含连字符的 URL 参数。在某些情况下，参数带有非 ascii 连字符，即

```
11157â€‘007â€‘9120â€‘9 
```

代替

```
11157-007-9120-9 
```

这导致下游系统爆炸......

转换这些非 ascii 字符的最佳方法是什么？还有其他非ASCII字符以及连字符...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:44:33.350

如果你只想替换连字符，你可以使用 replaceAll。

```
val strangeHyphen:Char = '\u1234' //replace this with the non-ASCII hyphen character
val newStr = str.replaceAll(stangeHyphen, '-') 
```

# version-control - Mercurial - 推动子回购头

> ID：14197995
> 
> 赞同：2
> 
> 时间：2013-01-07T14:34:18.713
> 
> 标签：version-control, mercurial, mercurial-subrepos

我怎样才能只从父仓库中推送子仓库所需的 HEADS。

我已经开始对 mercurial 中的本地功能分支使用书签样式流程。到目前为止，它工作得很好，只需提交、添加书签并切换到该头部即可工作。`hg push -r master-bookmark`我可以通过指定只推我的主头而不是任何功能分支来很好地推拉。

当我在子存储库中使用带有书签的多个头时，问题就出现了。因为这意味着我不能只使用`hg push -r master-bookmark`它，因为它会尝试推动子回购的**所有**负责人。在我准备好之前，我不希望这些头公开，但我需要在父级内部进行一些其他更改，所以我不会强迫他们。

我已经尝试放入子存储库并推送我需要的东西，但是父母仍然会尝试推送所有内容，无论它是否在“.hgsubstate”的祖先中。

有人对哪种工作流程最适合这个有任何想法吗？我宁愿不必禁用子回购，推送，然后重新启用，这会变得非常混乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:40:26.760

您可以利用`phases`使这种工作流程变得非常简单的功能。

[https://www.mercurial-scm.org/wiki/Phases](https://www.mercurial-scm.org/wiki/Phases)

当您进行分支/书签/提交阶段`secret`时，除非您明确这样做，否则它不会被推送。这是标记尚未准备好共享的工作的好方法。

# c - C: typedef 联合

> ID：14197998
> 
> 赞同：7
> 
> 时间：2013-01-07T14:34:25.330
> 
> 标签：c, typedef, microcontroller, unions, microchip

在相关问题中没有找到任何内容。很可能它是超级菜鸟，但无论如何我都会问/我的 .h 文件中有以下内容：

```
typedef union _API_Packet_0x90{
    uint8_t packet[26];
    struct _pack_struct {
        uint8_t start;
        uint8_t length[2];
        uint8_t addr64[8];
        uint8_t addr16[2];
        uint8_t options;
        uint8_t rfData[4];
        uint8_t chksum;
    };
} API_Packet_0x90;

API_Packet_0x90 ap90; 
```

这是微控制器的代码，我使用的是 xc8 工具链（以前的 Hi Tech C）。编译器说：

> xbee_api.h:19：警告：缺少基本类型；int 假定
> xbee_api.h:19: 错误: ";" 预期
> xbee_api.h:19：警告：缺少基本类型；int 假定
> xbee_api.h:21：警告：缺少基本类型；int 假定

，然后继续（错误太多）

我以为是 uint8_t，所以我添加了`#include <ctypes.h>`. 没有。我以为是名字的问题，所以我尝试了各种玩法，例如

```
typedef union {
    uint8_t packet[26];
    struct _pack_struct {

    };
} API_Packet_0x90; 
```

或者

```
typedef union {
    uint8_t packet[];
    struct _pack_struct {

    };
} API_Packet_0x90; 
```

或其他。没有什么帮助。我被困住了，因为我相信我正确地遵循了语法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T14:41:29.157

`uint8_t`位于`stdint.h`，而不是`ctype.h`（也不存在 ctypes.h，不存在这样的头文件）。您必须使用遵循 C 标准较新版本的编译器才能找到此标头（C99 或 C11 标准）。