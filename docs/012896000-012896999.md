# StackOverflow 问答 12896000-12896999

# git - 在推送到中央存储库之前进行反转

> ID：12896001
> 
> 赞同：2
> 
> 时间：2012-10-15T12:48:57.110
> 
> 标签：git

我不小心将更改从我的开发存储库的错误分支推送到我的中央存储库，然后继续将这些拉到我发布的存储库。

使用`git reset --hard [SHA1]`我已将发布的回购返回到正确的位置。我也尝试对原点执行此操作，现在当我进入`git log`中央仓库时；我得到：`fatal:bad default revision 'HEAD'`

我想知道如何解决 HEAD 的情况，以及如何在从我的开发仓库推送之前回到正题，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:29:19.190

当您尝试`git log`远程存储库时，该错误是正常的，因为它们通常是裸存储库。[这](https://stackoverflow.com/a/6311945/390522)是一个很好的解释。

既然您已经`reset --hard`将本地存储库设置为正确的状态，那么您现在想要的似乎是在远程存储库中复制此状态。如果是这样，只需强制将您的分支推到原点。

```
git push -f origin <branch-name> 
```

请注意，如果某些人已经从遥控器中提取了错误的修订版，那么强制推送可能会导致问题。

# javascript - Coffeescript 中的类和继承

> ID：12896004
> 
> 赞同：2
> 
> 时间：2012-10-15T12:49:09.077
> 
> 标签：javascript, oop, coffeescript

这到底是怎么回事？
-class如何`Daughter`包含已设置的数据，`Brother`我应该如何确保兄弟类中的数据集不会相互干扰？

```
class Parent 
  data: {}

class Child extends Parent
  age: 10

Son = new Child
Son.data.name = "John Doe"

Daughter = new Child
console.log Daughter.data # => { name: 'John Doe' } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:13:16.127

问题似乎是，您没有使用构造函数`data`为每个实例进行初始化。相反，你给它一个初始值，这个初始值恰好`Animal`是可变的。每当您分配给 时`instance.data.attribute`，您实际上是在修改该共享对象。如果您改用了 an `data: 1`，您将不会看到这种共享行为。

这解决了您的问题：

```
class Parent 
  constructor: () ->
    @data = {} 
```

免责声明：我对 JavaScript 的原型继承不是很熟悉，所以我提供的技术细节可能不正确，但对现象的描述似乎是准确的。

## 编译时的区别

```
class Parent 
  staticD: {}
  constructor: ->
    @data = {} 
```

编译为：

```
Parent = (function() {

  Parent.prototype.staticD = {};

  function Parent() {
    this.data = {};
  }

  return Parent;

})(); 
```

如您所见`staticD`，在“类”创建时仅`data`初始化一次，另一方面，在构造函数中初始化并在每次创建实例时分配一个新的空对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:56:02.273

如果您将您的 CS 代码放入 CoffeeScript 网站 (http://coffeescript.org/) 的并排编辑器中，您会看到它`data`位于`Parent`“类”的原型上。将该原型视为您创建的新功能（类）的模板。该原型要么包含其他函数，要么包含可用于所有实例的变量（如 OO 静态变量）。

您正在添加`name`一个“静态”变量`data`。然后它将可供所有“派生”自`Parent`.

我不确定那里的内部运作，但来自一个面向对象的世界，这就是我解释它的方式。我希望这有帮助。

**通过 COFFEESCRIPT 网站生成的代码**

```
var Child, Daughter, Parent, Son,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Parent = (function() {

  function Parent() {}

  Parent.prototype.data = {};

  return Parent;

})();

Child = (function(_super) {

  __extends(Child, _super);

  function Child() {
    return Child.__super__.constructor.apply(this, arguments);
  }

  Child.prototype.age = 10;

  return Child;

})(Parent);

Son = new Child;

Son.data.name = "John Doe";

Daughter = new Child;

alert(Daughter.data.name); 
```

**更新** 刚刚注意到 CS 并排窗口具有链接功能。这是并排代码的[链接。](http://coffeescript.org/#try%3aclass%20Parent%20%0A%20%20data%3a%20%7B%7D%0A%0Aclass%20Child%20extends%20Parent%0A%20%20age%3a%2010%0A%0ASon%20=%20new%20Child%0ASon.data.name%20=%20%22John%20Doe%22%0A%0ADaughter%20=%20new%20Child%0Aalert%20Daughter.data.name)

**更新#2**

针对您在评论中提出的问题，我不确定您到底想做什么，但您可以执行以下操作：

```
class Parent 
  #data: {}

class Child extends Parent
  constructor: (@name) ->
  age: 10
  sayHi: -> alert "Hi " + @name

Son = new Child "John Doe"

Daughter = new Child "Sarah Jane"

Son.sayHi()
Daughter.sayHi() 
```

也许将`name`变量（或整个`data`变量）保留在父级别并通过构造函数设置它并通过父函数访问它。

# sql - Oracle IN 与存在差异？

> ID：12896007
> 
> 赞同：14
> 
> 时间：2012-10-15T12:49:28.670
> 
> 标签：sql, oracle

我对 oracle`IN`和`EXISTS`. 我有以下要求。

我需要找到所有姓名在-

```
select * from emp where ename in('smith','brown','john','johnson'); 
```

我可以在这里使用`EXISTS`吗？Also`IN`子句有 1000 个限制。`EXISTS`也有这样的限制吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-04T04:02:00.840

`IN`选择匹配值的列表。`EXISTS`返回布尔值，如 true 或 false。Exists 比 in 快。

例子

在

```
select ename from emp e where mgr in(select empno from emp where ename='KING'); 
```

存在

```
select ename from emp e 
  where exists (select 1 from emp where e.mgr = empno and ename = 'KING'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:53:44.177

简单地说，`EXISTS`通常用于检查符合条件的行是否存在于另一个（或同一个）表中。

您的 SQL 使用`EXISTS`如下所示：

```
select *
from   emp e
where  exists(select * from emp e2 where e.empno = e2.empno and e2.ename in ('smith', 'brown', 'john', 'johnson')) 
```

所以你可以看到这不是你需要的

# c# - 按钮单击的回发不适用于 <%= %>

> ID：12896011
> 
> 赞同：0
> 
> 时间：2012-10-15T12:49:49.387
> 
> 标签：c#, c#-4.0

我正在使用以下方法在javascript中调用按钮的点击事件。

```
__doPostBack('<%= btn_hid.UniqueID %>'); 
```

但这导致我犯另一个错误

> 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。

您能否建议我在回发期间以其他方式在 javascript 中调用按钮的单击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:52:11.413

您可以尝试使用`click method`基于`GetElementById`方法

```
document.GetElementById('<%= btn_hid.ClientID %>').click() 
```

# sql - 在 MDX 查询中组合关系数据和 OLAP 数据

> ID：12896019
> 
> 赞同：6
> 
> 时间：2012-10-15T12:50:08.670
> 
> 标签：sql, sql-server, ssas, mdx, olap

我有一个 SSAS 2008 多维数据集，用于存放股票市场的日终财务数据。该多维数据集仅在市场收盘后每天处理一次，因此它永远不会包含有关当前日内交易数据的任何信息。我还有一个关系数据库，其中包含股票当前的日内交易信息。我正在尝试找到一种方法来组合这两个数据源，以便我可以执行计算，例如基于当前价格的股票的 30 天移动平均线以及前 29 天的历史数据。我使用的是 SSAS 标准版，因此我无法访问诸如主动缓存或多个分区等功能来帮助我近乎实时地处理当前数据。

对于单个查询的上下文，有什么方法可以以某种方式动态地将我的 SQL 数据库中的行包含到我的事实表中？本质上只是暂时将一小部分数据引入多维数据集以处理某个计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:17:43.443

不，您应该创建一个映射到您的 OLTP 表的度量值组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:41:42.913

您应该能够为当天的数据创建分区并将 ROLAP 指定为存储模式。

为了简化维护，我可能会为事实表创建一个视图，并在定义中在 where 子句中使用日期函数。就像是：

```
CREATE VIEW CurrentTrades AS

SELECT * FROM factTrades 
    WHERE TradingDate BETWEEN DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) AND DATEADD(dd, 1, DATEDIFF(dd, 0, GETDATE())) 
```

然后，您可以将该视图用作 ROLAP 分区的数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:32:23.037

您可以在一天中的特定时间间隔内增量处理多维数据集的数据，具体取决于处理新数据所需的时间。（当然如果延迟是可以接受的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T13:56:02.390

可以编写自己的 DLL 并从 MDX 中调用它。这不是非常优雅，但我过​​去做过。

对于 1000 行数据来说不是一个好主意，但如果您需要少于 100 行，您的函数调用可以将一个值从 MDX 传递给 DLL，后者可以调用 SQL 数据库以返回数字。然后，您的结果将与来自 OLAP 的数字一起显示在单元集中。

# java - 使用自定义视图设置布局

> ID：12896022
> 
> 赞同：0
> 
> 时间：2012-10-15T12:50:25.647
> 
> 标签：java, android, android-layout, android-view

我有一个自定义视图类（用于绘图的画布）。当我希望它占据整个屏幕时，我实例化该类并像这样调用 setContentView：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        drawingPanel = new DrawingPanel(this);
        setContentView(drawingPanel);
} 
```

但是，当我希望屏幕基于 xml 布局 (activity_make.xml) 并带有 2 个元素、一个按钮和一个用于绘图画布的占位符时，如何将我的自定义视图“粘贴”到视图占位符中？

```
public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_make); // the layout which has a button and a placeholder view
      drawingPanel = new DrawingPanel(this); // instantiating my canvas
      View drawPanelPlaceholder = (View) findViewById(R.id.drawingview);
      // how do i stick the drawingPanel into the drawPanelPlaceholder?
} 
```

还是有更好的方法来解决这个问题？也感谢有关此文档的链接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:55:13.360

您可以直接在 XML 布局中实例化您的自定义视图。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
  <com.mypackage.DrawingPanel 
      android:id="@+id/drawin_panel"
      android:layout_width="fill_parent" 
      android:layout_height="wrap_content" />
</LinearLayout> 
```

开发人员指南中有关[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)的一些文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:55:54.053

如果你的 DrawingPanel 类扩展 View 你可以做这样的事情，

在您的 xml 中使用其包名称声明此自定义组件，

```
<com.myview.DrawingPanel android:id="@+id/drawingview" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" > 
```

请注意，com.myview.DrawingPanel 只是我用来演示的名称。但请确保使用与 DrawingPanel.class 相同的包名称。

现在在你的 onCreate 中，

```
public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_make); 
      drawingPanel = (DrawingPanel) findViewById(R.id.drawingview);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:54:26.140

如果您想将您的drawingPanel 添加到drawPanelPlaceholder，drawPanlePlaceholder 应该扩展ViewGroup。所以它可以是 ViewGroup、RelativeLayout、LinearLayout 或其他。然后你只需这样做

```
drawPanelPlaceholder.addView(drawingPanel);
drawPanelPlaceholder.invalidate(); 
```

# sphinx - think_sphinx 属性中的 has 有什么作用？

> ID：12896025
> 
> 赞同：0
> 
> 时间：2012-10-15T12:50:36.157
> 
> 标签：sphinx, thinking-sphinx

有人可以在这里详细说明在thinking_sphinx的属性部分中“已经”实际做了什么吗？我已经阅读了[Thinking sphinx](http://freelancing-god.github.com/ts/en/indexing.html#attributes)的文档。但是，无法得到它的实际作用。

请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:28:51.320

[源代码](https://github.com/pat/thinking-sphinx/blob/master/lib/thinking_sphinx/index/builder.rb)有解释。滚动到第 112 行。

# r - Java方式的逻辑组合：如果第一个已经为假，则不要测试第二种情况

> ID：12896031
> 
> 赞同：1
> 
> 时间：2012-10-15T12:51:14.660
> 
> 标签：r, logic

我知道在 Java 中做这样的事情通常很方便

```
if(a!=0 && b/a>1){
  ...;
} 
```

当第一部分已经为假时，Java 停止。R 不这样做，有时会产生错误。所以：是否有可能使这段代码更短：

```
if(exists("user_set_variable")){
   if(user_set_variable < 3){
      ...
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:56:52.633

当不需要评估第二个参数时， R 还会使`&&`and运算符短路。`||`例如（这里`x`不存在）

```
> if (exists('x') && x < 3) { print('do this') } else { print ('do that') }
[1] "do that" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:02:11.523

从`?'&&'`你可以找到

```
& and && indicate logical AND and | and || indicate logical OR.
The shorter form performs elementwise comparisons in much the same
way as arithmetic operators. The longer form evaluates left to right 
examining only the first element of each vector. Evaluation proceeds
only until the result is determined. The longer form is appropriate
for programming control-flow and typically preferred in if clauses. 
```

所以可能你正在寻找`&`而不是`&&`. 请参阅以下示例，其中评估了两个条件：

```
# Case 1
a<- 2
b <- 4

 if(a!=0 &  b/a>1){
   print('Hello World')
 } else{
   print("one or both conditions not met")
 }
[1] "Hello World"

# Case 2
a<- 2
 b <- 1

 if(a!=0 & b/a>1){
   print('Hello World')
 } else{
  print("one or both conditions not met")
 }
[1] "one or both conditions not met"

 # Case 3
 a<- 0
 b <- 1

 if(a!=0 &  b/a>1){
   print('Hello World')
 } else{
  print("one or both conditions not met")
 }
[1] "one or both conditions not met" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:38:28.930

如果它们足够清楚，请使用短路语句，或者您可以将多个 if 语句行包装到一个函数中。这是视觉效果的一些伪代码。

> if(exists("user_set_variable")){ if(user_set_variable < 3){ ... } }

那么可能是：

```
var<- "user_set_variable" 'let var be your variable for this
if(exists(var) && var < 3)
{ 'do stuff } 
```

或这样做：

```
'function definition
Function boolean IsValidVar(variable)
{
     if(exists(var))
     {
         if(var < 3)
         { return true; }}
     return false;
} 
```

那么你的程序看起来像这样：

```
var<- "user_set_variable" 'let var be your variable for this
if(IsValidVar(var))
{ 'do stuff } 
```

这真的只是你的电话看起来很简单。

# apache - 通过证书授权

> ID：12896040
> 
> 赞同：0
> 
> 时间：2012-10-15T12:51:39.253
> 
> 标签：apache, redirect, ssl

服务器包含证书 (*.crt)。并且有两个不同的用户。一个是在浏览器证书（*.p12）中设置的，它签署了服务器证书。用户输入文件夹**example.com/a**

没有证书的用户进入**example.com/b**

如何使用设置 apache 来做到这一点？重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:37:39.540

```
SSLVerifyClient optional
SSLOptions +StdEnvVars

SSLCACertificateFile path/to/file

RewriteEngine on
RewriteCond   %{SSL_CLIENT_VERIFY} SUCCESS
RewriteRule   ^/(.*) /a/(.*) [L]

RewriteCond   %{SSL_CLIENT_VERIFY} FAILED
RewriteRule   ^/(.*) /b/(.*) [L] 
```

# ruby-on-rails - 在 Rails 中扩展控制器

> ID：12896042
> 
> 赞同：0
> 
> 时间：2012-10-15T12:51:45.410
> 
> 标签：ruby-on-rails, ruby, actioncontroller

我有一个调用另一个类的控制器。

```
class BlahController < ActionController
  def index
    OtherClass.get_stuff
  end
end 
```

在这个类中，我希望能够编写控制器样式代码。

例如：

```
class OtherClass
  def self.get_stuff
    @foo = bar
  end
end 
```

但是，我也希望`@foo`在我的视图中存在，但由于它是一个单独的类，因此这些变量不会返回到控制器分配中 - 所以问题是，我怎么能做到这一点？

*（忽略为什么我必须调用一个单独的类，我试图让这段代码与遗留代码库相匹配，而不需要太多的屠杀）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:33:09.683

```
class BlahController < ActionController
  def index
    OtherClass.get_stuff(self)
  end
end

class OtherClass
  def self.get_stuff(that)
    that.instance_variable_set(:@foo, bar)
  end
end 
```

请注意，我不同意这种方法。我只是按照你所说的那样回答问题。

我更愿意通过 mixins 来完成这个功能，从而减少上面代码中存在的参数耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:52:09.887

像这样结构的代码将难以阅读和维护。只要有可能，就让控制器*直接*设置视图需要的所有变量：

```
class BlahController < ActionController
  def index
    @foo = OtherClass.get_stuff
  end
end

class OtherClass
  def self.get_stuff
    # return the value that should be assigned to @foo  
  end
end 
```

# xslt - 来自分组转换的 XSLT Concat html 文档

> ID：12896046
> 
> 赞同：0
> 
> 时间：2012-10-15T12:51:57.997
> 
> 标签：xslt, xslt-1.0

转换（http://stackoverflow.com/questions/12862902/how-to-do-xslt-muenchian-grouping-with-some-null-attributes/12871809#12871809）基于属性（@group）分组，并且属性为空。最初这仅用于连接字符串，但我现在需要扩展它，以便它使用字符串作为文件位置并连接文档（如果它们被分组） - 如果没有分组，它应该使用字符串作为它获取但没有的文件不需要加入其他任何东西。变换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:key name="modules" match="module[@group]" use="concat(generate-id(..), '|', @group)"/>

<xsl:template match="root">
    <AllSections>
        <xsl:apply-templates />
    </AllSections>
</xsl:template>

<!-- NON GROUPED PART -->
<xsl:template match="module[not(@group)]">
    <page>
        <content>
            <xsl:value-of select="comp"/>
        </content>
    </page>
</xsl:template>

<!--GROUPED PART -->
<xsl:template match="module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]">
    <xsl:variable name="modules" select="key('modules', concat(generate-id(..), '|', @group))"/>
    <page>
        <content>
            <xsl:apply-templates select="$modules/comp/text()"/>
        </content>
        <count>
            <xsl:value-of select="count($modules)" />
        </count>
    </page>
</xsl:template>

<xsl:template match="module"/>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

和样本输入：

```
<root>
<section>
<subsection>
    <module>
        <comp>111</comp>
    </module>
    <module group='group01'>
        <comp>222</comp>
    </module>
    <module group='group01'>
        <comp>333</comp>
    </module>
    <module>
        <comp>444</comp>
    </module>
    <module>
        <comp>555</comp>
    </module>
</subsection>
</section>
<section>
<subsection>
    <module group ="group02">
        <comp>666</comp>
    </module>
    <module group ="group02">
        <comp>777</comp>
    </module>
    <module>
        <comp>888</comp>
    </module>
    <module group ="group03">
        <comp>999</comp>
    </module>
    <module group ="group03">
        <comp>101010</comp>
    </module>
</subsection>
<subsection>
    <module group ="group04">
        <comp>11111</comp>
    </module>
    <module group ="group04">
        <comp>121212</comp>
    </module>
    <module group ="group05">
        <comp>131313</comp>
    </module>
    <module group ="group05">
        <comp>141414</comp>
    </module>
    <module group ="group06">
        <comp>151515</comp>
    </module>
    <module group ="group06">
        <comp>161616</comp>
    </module>
    <module>
        <comp>171717</comp>
    </module>
</subsection> 
```

如果它们属于同一组，则此时的转换会连接 comp 字符串......对未分组的部分执行此操作，以便将字符串用作文件位置：

```
 <!-- NON GROUPED PART -->
<xsl:template match="module[not(@group)]">
    <page>
        <content>
            <xsl:variable name="var">
               <xsl:value-of select="comp"/>
            </xsl:variable>
            <xsl:copy-of select="document(concat('../myfile/', string($var)))"/>
        </content>
    </page>
</xsl:template> 
```

目前 GROUPED PART 将输出：

...

```
<page>
        <content>strgin1string2</content>
        <count>2</count>
</page> 
```

...

我需要：

...

```
<page>
        <content>
         TEXT FROM FILE CALLED string1
         TEXT FROM FILE CALLED string2
        </content>
        <count>2</count>
</page> 
```

...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:41:15.703

假设您只想提取完整的 XML 文档，您可以将代码更改为

```
<xsl:template match="module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]">
    <xsl:variable name="modules" select="key('modules', concat(generate-id(..), '|', @group))"/>
    <page>
        <content>
            <xsl:copy-of select="document($modules/comp)"/>
        </content>
        <count>
            <xsl:value-of select="count($modules)" />
        </count>
    </page>
</xsl:template> 
```

`comp`[编辑] 如果元素包含完整的 URL ，我认为我的上述建议有效。但是，您的评论表明您希望将一个常量与 each 连接起来`comp`，在这种情况下，您需要使用 XSLT 1.0

```
<xsl:template match="module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]">
    <xsl:variable name="modules" select="key('modules', concat(generate-id(..), '|', @group))"/>
    <page>
        <content>
            <xsl:for-each select="$modules/comp">
              <xsl:copy-of select="document(concat('../myfile/', .))"/>
            </xsl:for-each>
        </content>
        <count>
            <xsl:value-of select="count($modules)" />
        </count>
    </page>
</xsl:template> 
```

使用 XSLT 2.0，您可以编写一个紧凑的行，`<xsl:copy-of select="document($modules/comp/(concat('../line/', .))"/>`但使用 XSLT 1.0，for-each 应该这样做。

# asp.net-mvc - 值“x”对 latitute 无效。（对于双类型）？

> ID：12896047
> 
> 赞同：0
> 
> 时间：2012-10-15T12:51:59.533
> 
> 标签：asp.net-mvc, validation, double, data-annotations

我的模型中的变量

```
[Display(Name = "Enlem")]
public double Latitute { get; set; } 
```

我的一部分观点

```
<div class="editor-label">
     @Html.LabelFor(m => m.Latitute)
</div>
<div class="editor-field">
     @Html.TextBoxFor(m => m.Latitute)<br />
     @Html.ValidationMessageFor(m => m.Latitute)
</div> 
```

和错误：

![在此处输入图像描述](../Images/53e168b80c1d3479bbb073bac5dacfad.png)

用逗号，错误：

![在此处输入图像描述](../Images/b570b89305131474162fb0d140592626.png)

我该如何解决？我找不到问题所在。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:18:46.413

这似乎是 jQuery 中客户端验证和本地化的问题。

[简短的解决方案](https://mfranc.com/javascript/jquery-valdiator-modyfing-decimal-separator/)

更长的解决方案需要与[jQuery Globalize](https://github.com/jquery/globalize)集成 本文[描述](http://www.campusmvp.net/asp-net-mvc-3-and-the-coma-in-decimals/)了如何更改 jQuery 数字验证器以按照您的方式执行验证。

所有这些都适用于逗号问题，我不太了解点的第二个问题，所以我在这里无能为力。尝试调试幕后发生的事情，并提供更多关于失败的信息 - 客户端/服务器端以及实际发生的事情。

# windows-phone-7 - 我如何划分和使用我的网格相等的部分？

> ID：12896048
> 
> 赞同：1
> 
> 时间：2012-10-15T12:52:00.620
> 
> 标签：windows-phone-7, xaml, layout

我正在使用网格并在我的页面中。页面应该像冰块托盘一样均匀划分。

每个网格列包含一个图像。

为了分成 3 个相等的部分，我使用以下代码：

```
 <ListBox SelectionChanged="listBox1_SelectionChanged" HorizontalContentAlignment="Stretch" Height="720" HorizontalAlignment="Left" Margin="1,5,0,0" Name="listBox1" VerticalAlignment="Top">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid HorizontalAlignment="Center" VerticalAlignment="Top" Margin="3" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width="1*" />
                            </Grid.ColumnDefinitions>

                            <Border CornerRadius="6" BorderBrush="Gray" BorderThickness="2" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="border1">

                                <toolkit:WrapPanel x:Name="wp">
                                        <Image Source="{Binding ImagePicture}"  Margin="0,10,0,0" Height="110" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        <TextBlock  Margin="0,0,0,5" TextAlignment="Center" Text="{Binding categoryname}" Foreground="Black" FontStyle="Normal" Height="Auto" Width="140" HorizontalAlignment="Center" VerticalAlignment="Stretch"/>
                                    </toolkit:WrapPanel>
                                </Border>

                            </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

现在，当我使用它时，有时图像很小，我遇到了这个问题。

这就是我要的：

![这就是我要的](../Images/574b3d7be7916396cc39079a6bf7876b.png)

这是我的问题：

![这是我的问题](../Images/a31d0778e6e1d25f81eb7e1014332f97.png)

你能分享这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:39:56.877

这个 xaml 将起作用-

```
 <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*" />
                            <ColumnDefinition Width="1*" />
                            <ColumnDefinition Width="1*" />
                        </Grid.ColumnDefinitions> 
```

# remote-debugging - 通过 KGDB 调试代码

> ID：12896049
> 
> 赞同：2
> 
> 时间：2012-10-15T12:52:10.760
> 
> 标签：remote-debugging

我想调试我的代码，它也有一些内核模块。我能够在内核和我的代码中设置断点。执行操作会命中内核代码中设置的断点，但不会命中我代码中的断点。

目标机器：要在其上调试代码的机器主机：用于调试代码的机器

遵循的步骤：在主机上：

```
$ gdb vmlinux
(vmlinux copied  from target machine )                                                                                                                                                         
$ gdb> target remote /dev/ttyS1   
$ cont
 continuing 
```

在目标上： $ insmod mymodule.ko $ cd /sys/module/mymodule/sections/ $ cat .data $ cat .rodata $ cat .bss $ cat .text

```
$ echo "g" > /proc/sysrq-trigger 
```

在主机上：

```
 $ add-symbol-file <module_name> <address> \
 -s .bss    <address> \
 -s .rodata <address> \
 -s .data   <address>   
$ b file_name //set break points    
$ c
 continuing 
```

在目标上：执行命令（程序）......但它没有达到断点......在没有达到断点的情况下完成执行。

但是，当我尝试为 vfs_read() 之类的内核函数设置断点时，就会遇到断点。

# html - HTML/CSS 页脚问题

> ID：12896052
> 
> 赞同：0
> 
> 时间：2012-10-15T12:52:24.757
> 
> 标签：html, css, footer

我看过以前的 SO 帖子和 tuts，但我自己的代码没有任何运气。我的页脚不会粘在页面底部（不是窗口）。我不希望内容在我的页脚中滚动。页面大小的长度差异很大，并且希望始终在底部有一个页脚。

leftcol、rightcol 和 footer 都在容器中。任何帮助都是极好的。

我的 HTML 结构如下：

```
<body>
 <div id = "container">
  <div id = "leftcol">
      <h2></h2>
       </p>
  </div>
  <div id = "rightcol">
      <h2></h2>
      </p>
   </div>
   <div id ="footer">
       <p>...........</p>
   </div>
 </div>
</body> 
```

这是我的CSS：

```
body {
    font-family: 'Rokkitt', Georgia, serif;
    font-size: 16px;
    background-color: #FFFFFF;
    line-height: 1.3em;
    height: auto;
    color: #252525;
    }

#container {
    display: block;
    width: 1024px;
    min-height: 100%;
    margin-left: auto;
    margin-right: auto;
    }

#leftcol {
    display: block;
    float: left;
    margin: 20px 5px 5px 15px;
    width: 660px;
    position: absolute;
    height: auto;
    padding-bottom: 20px;
    }

#rightcol {
    display: block;
    float: right;
    margin: 30px 5px 5px 780px;
    position: absolute;
    width: 275px;
    height: auto;
    }

#footer {
    position: fixed;
    bottom: 0;
    width: 1024px;
    height: auto;
    margin-left: auto;
    margin-right: auto;
    margin-top: 150px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:11:22.517

This is the BEST solution out there

[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:23:28.953

您需要将页脚移到容器元素和正文元素之外并使用位置：绝对；和底部：0；始终将其固定到 html 元素的底部。

我说在 body 之外，虽然 body 标记主要占用 html 元素的高度，但在某些版本的 IE 中情况并非如此。由于您尚未粘贴 HTML，我显然无法向您显示修改后的 html，但您的 css 应该如下所示：

```
#footer {
    position: absolute;
    bottom: 0;
    width: 1024px;
    height: auto;
    margin-left: auto;
    margin-right: auto;
    margin-top: 150px;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T12:54:31.370

你看了吗？

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

这对我有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T13:13:30.623

检查这个小提琴：http: [//jsfiddle.net/9Wy8G/13/](http://jsfiddle.net/9Wy8G/13/)

这是你想要的吗？

**更新：**
检查[这个 SO 帖子](https://stackoverflow.com/questions/12893031/sticky-footer-under-floated-content/12893353#12893353)。您可能会发现它很有用。

# java - Bluecove 中的身份验证 - Linux x64 无法正常工作

> ID：12896056
> 
> 赞同：2
> 
> 时间：2012-10-15T12:52:38.463
> 
> 标签：java, linux, bluecove

我在尝试使用带有 64 位 JVM 的 Linux x64 中的 Bluecove（bluecove 和 bluecove-gpl 2.1.1 SNAPSHOT 库）的配对过程中验证 BT 设备时遇到了麻烦。虽然发现似乎很好，但在尝试使用已知 PIN 进行身份验证时，恐怕大多数情况下它永远不会这样做，因为这个功能从未实现过。

这是实际进行配对的方法：

```
public Boolean pairingDevice()
{
    //check if authenticated already
    if (remoteDevice.isAuthenticated()){
        return true;
    }
    else{

        LOG.info("--> Pairing device");

        try {
            PIN = "111111";
            boolean paired = RemoteDeviceHelper.authenticate(remoteDevice, PIN);                
            //LOG.info("Pair with " + remoteDevice.getFriendlyName(true) + (paired ? " succesfull" : " failed"));
            devicePaired = paired;
            if (devicePaired)
                LOG.info("--> Pairing successful with device " + remoteDevice.getBluetoothAddress());
            else
                LOG.info("--> Pairing unsuccessful with device " + remoteDevice.getBluetoothAddress());
        } 
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            LOG.info("--> Pairing unsuccessful with device " + remoteDevice.getBluetoothAddress());
            devicePaired = false;
        }
        LOG.info("--> Pairing device Finish");
        return devicePaired;
    }
} 
```

现在调用

```
 boolean paired = RemoteDeviceHelper.authenticate(remoteDevice, PIN); 
```

最后调用 BluetoothStackBlueZ.authenticateRemoteDevice(long address, String passkey)：

```
 /*
 * (non-Javadoc)
 * 
 * @see com.intel.bluetooth.BluetoothStack#authenticateRemoteDevice(long, java.lang.String)
 */
public boolean authenticateRemoteDevice(long address, String passkey) throws IOException {
    return false;
} 
```

如您所见，这总是返回 FALSE，这会导致未定义的行为。问题是......我可以做些什么来使用 Bluecove 在 Linux 中验证 remoteDevice？

Bluecove 有什么替代品吗？我听说同样的代码在 Windows 中工作，但我真的不想因为这个原因切换到 Windows...

提前致谢， 亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:00:10.817

对于遇到同样问题的其他人，我在几个平台上尝试过这段代码：Linux x64、Windows 7 64 位，但从未奏效。

我全新安装了 Ubuntu 12.04 32 位，安装：

libbluetooth-dev 和 bluez-utils

工作得很好......所以我的答案是......如果你需要使用 Bluecove，请使用 32 位。不管是什么原因，这在我的 Linux-Windows 64 机器上都不起作用……我不知道，但不能花更多时间在这上面

# java - 直接使用返回 spring security 的内置表达式的方法

> ID：12896061
> 
> 赞同：3
> 
> 时间：2012-10-15T12:52:50.883
> 
> 标签：java, spring, spring-security

我想在我的控制器中使用一些（Java）方法，这些方法类似于[Spring Security 提供的内置表达式，](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)例如 hasRole([role]) 或 isFullyAuthenticated()。

你知道我在哪里可以找到这些方法以及如何在控制器的 Java 方法中调用它们（我不想使用 Spring EL，我想使用纯 Java）？例如像

```
SomeStaticSpringSecutityClass.isFullyAuthenticated(); 
```

编辑：

```
SecurityContextHolder.getContext().getAuthentication().isAuthenticated() 
```

其实真的不行。如果用户通过“匿名”身份验证，此方法也会返回 true。请参阅上面的 spring 安全文档的链接：

> isAuthenticated() 如果用户不是匿名的，则返回 true

相反，您必须使用类似的东西：

```
public boolean isAuthenticated() {
    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
    return !(authentication == null || authentication instanceof AnonymousAuthenticationToken);
} 
```

但无论如何：我真的不想再次实现逻辑，这已经在 Spring Security 的某个地方实现了。此外

```
SecurityContextHolder.getContext().getAuthentication() 
```

没有提供 isFullyAuthenticated() 或 hasRole() 等方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:03:13.477

看看[org.springframework.security.core.contex.SecurityContextHolder](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/context/SecurityContextHolder.html)。例如检查当前用户是否经过身份验证：

```
SecurityContextHolder.getContext().getAuthentication().isAuthenticated() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T17:42:06.503

我发现`SecurityContextHolderAwareRequestFilter`使用接口的：

```
AuthenticationTrustResolver.isAnonymous(Authentication authentication); 
```

如果要使用 Spring 源代码，可以检查`SecurityContextHolderAwareRequestWrapper`实例化此接口的类，如下所示：

```
private final AuthenticationTrustResolver authenticationTrustResolver = new AuthenticationTrustResolverImpl();

public Authentication getAuthentication() {
    if (!authenticationTrustResolver.isAnonymous(auth)) {
        return auth;
    }
    return null;
} 
```

我查看了文档，但没有找到一个实用程序类来做到这一点。

# python - cookie 问题并发送 POST/GET 以在 Python 中获取 Web 内容

> ID：12896063
> 
> 赞同：1
> 
> 时间：2012-10-15T12:52:56.867
> 
> 标签：python, post, cookies, get

> **可能重复：**
> [如何使用 Python 登录网页并检索 cookie 以供以后使用？](https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage)

我想从以某种不寻常方式处理 cookie 的服务下载整个网页源。我写了一个实际工作的脚本，似乎很好，但是在某些时候它返回了这样的错误：

`urllib2.HTTPError: HTTP Error 302: The HTTP server returned a redirect error that would lead to an infinite loop. The last 30x error message was: Found`

我的脚本循环工作，并更改了我有兴趣下载内容的子页面的链接。

我得到一个 cookie，发送一个数据包，然后我可以访问 porper 链接，然后下载 html。

脚本如下所示：

```
import urllib2
data = 'some_string'
url = "http://example/index.php"
url2 = "http://example/source"  
req1 = urllib2.Request(url)
response = urllib2.urlopen(req1)
cookie = response.info().getheader('Set-Cookie')
## Use the cookie is subsequent requests
req2 = urllib2.Request(url, data)
req2.add_header('cookie', cookie)
response = urllib2.urlopen(req2)
## reuse again
req3 = urllib2.Request(url2)
req3.add_header('cookie', cookie)
response = urllib2.urlopen(req3)
html = response.read() 
```

我一直在使用这个 lib 阅读 sth ab cookiejar/cookielib coz 我应该摆脱上面提到的这个错误但是我不知道如何重新编写我的代码以供以下人员使用：`http.cookiejar, urllib.request`

我试过这样的：

```
import http.cookiejar, urllib.request
cj = http.cookiejar.CookieJar()
opener = urllib.request.build_opener( urllib.request.HTTPCookieProcessor(cj) )
r = opener.open(url)  # now cookies are stored in cj
r1 = urllib.request(url, data)  #TypeError: POST data should be bytes or an iterable of bytes. It cannot be str.
r2 = opener.open(url2)
print( r2.read() ) 
```

但它不能作为我的第一个脚本。

附言。对不起我的英语，但我不是本地人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:56:53.193

@Piotr Dobrogost 感谢您的链接，它解决了这个问题。

TypeError 通过使用`data=b"string"`而不是解决`data="string"`

由于移植到python3，我仍然遇到一些问题，但问题将被关闭。

# sql - Rails - 从非索引表中删除行

> ID：12896064
> 
> 赞同：2
> 
> 时间：2012-10-15T12:52:57.210
> 
> 标签：sql, ruby-on-rails

我有一个连接表，连接 2 个表。它有 2 列：user_id 和 course_id。表的名称是：course_sub_managers。此表没有索引。那么，如何删除满足 course_id = 某个变量条件的所有行？至于现在我使用：

```
sql = "DELETE FROM course_sub_managers WHERE course_id = " + @course.id.to_s
ActiveRecord::Base.connection.execute(sql) 
```

有 Rails 的写法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:59:09.887

我怀疑您有一个课程模型，其中您编写了以下内容：

```
has_many :course_sub_managers
has_many :users, through => :course_sub_managers 
```

在这种情况下，您可以使用：

```
@course.course_sub_managers.delete_all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:20:29.413

听起来您只想处理课程的删除？使用 :dependent => :destroy 来处理你的关系。

```
has_many :course_sub_managers, :dependent => :destroy 
```

当您销毁课程时，它将自动删除相关的表格项目。

# java - 读入一个整数

> ID：12896066
> 
> 赞同：-3
> 
> 时间：2012-10-15T12:53:21.370
> 
> 标签：java

我需要有人给我一个关于如何解决这个问题的线索。

用 Java 构建应用程序以：

`Read in an integer number (will always be between 1 - 25) and print the times table corresponding to this number.`

`Input = 8`

预期输出应低于。

`1 * 8 = 8, 2 * 8 = 16`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:55:55.900

读一个数：用途`new Scanner(System.in)`及其方法`nextInt`。

打印乘法表：使用 for 循环和内部使用`System.out.println`。

此外，如果还没有，请务必使用Eclipse 等**IDE 执行此操作。****不要尝试在记事本中编写 Java 代码**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:59:10.427

步骤1：

构建一个 Java 应用程序，该应用程序接受任何输入并将该输入打印回来。

第2步：

验证输入以确保它是一个 int，然后将其打印出来，如果不是，则打印出适当的警告。

第 3 步：

添加检查以查看您的输入 int 是否在您的范围内，如果没有打印适当的警告。

第4步：

创建一个循环并打印出乘法的每个结果。

第 5 步：

用字符串连接或类似的东西格式化你的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:00:01.620

我有点犹豫是否给你这个问题的现成代码，所以我会为你分解它的步骤：

1.  从命令行读取整数——签出`System.In`
2.  验证输入确实是整数 ( `Integer.parseInt`)
3.  有一个`for`从 1-9 迭代的循环，并将每个数字乘以您的输入数字
4.  在每次循环迭代时输出结果乘法 ( `System.out.println`)

我意识到您可能是初学者，但是如果您尝试分别对每个单独的部分进行推理，我认为您不仅可以更轻松地解决问题，而且还可以了解一般代码的编写方式。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:00:36.300

不要害怕谷歌，那里有成千上万的答案

```
public static void printTable()
   {
        int n, c;
          System.out.println("Enter no.");
          Scanner in = new Scanner(System.in);
          n = in.nextInt();
          System.out.println("Multiplication table of "+n+" is :-");

          for ( c = 1 ; c <= 25 ; c++ )
             System.out.println(n+"*"+c+" = "+(n*c));
   } 
```

# java - 读取自定义 ant 任务的源文件

> ID：12896067
> 
> 赞同：1
> 
> 时间：2012-10-15T12:53:23.990
> 
> 标签：java, io, classloader

我想为我的自定义 ant 任务打开一个源文件。我认为这很容易，因为类加载器获取资源肯定会立即为我找到源文件。错误的！

这是我的代码：

```
//build the name of the template
StringBuilder sb = new StringBuilder(VersionTemplate.class.getName());
sb.append(".java");
String templateName = sb.toString();
//find the template
InputStream inputStream = VersionTemplate.class.getResourceAsStream(templateName); 
```

inputStream 始终为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:57:16.027

尝试：

```
 templateName = templateName.replaceAll(".","/");
   InputStream inputStream = VersionTemplate.class.getClassLoader().
                              getResourceAsStream(templateName); 
```

请确保“.java”文件与编译“.class”文件存在于同一个包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:00:41.773

在 getResource() 查找类路径之后，我突然想到，这不是源代码所在的位置。我最终只是简单地编写了代码的相对路径。

谢谢您的帮助。

# c++ - std::deque - 下标超出范围

> ID：12896069
> 
> 赞同：1
> 
> 时间：2012-10-15T12:53:33.663
> 
> 标签：c++, std, deque

我正在编写一个基于 AMX 的 SA-MP 插件，但出现了一个烦人的问题。我正在使用一个双端队列和一个函数来查找和删除一个元素。（像下面这个）

```
enum PARAM_TYPE {
    PARAM_TYPE_CELL,
    PARAM_TYPE_ARRAY,
    PARAM_TYPE_STRING,
};

struct params_s {
    enum PARAM_TYPE type;
    struct params_s * next;
    cell free;
    cell numData;
    cell arrayData[0];
};

struct timer_s {
    AMX * amx;
    int id, func, interval, repeat;
    long long unsigned int trigger;
    struct params_s * params;
};

std::deque<struct timer_s *> gTimers;

void DestroyTimer(struct timer_s * t) {
    for (int i = 0; i != gTimers.size(); ++i) {
        if (t == gTimers[i]) {
            gTimers.erase(gTimers.begin() + i);
            break;
        }
    }
} 
```

每当我调用 DestroyTimer() 时，我都会收到此错误：

```
Debug Assertion Failed!
Expression: deque subscript out of range 
```

我可以添加元素、读取和修改它们，但我不能删除它们。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:01:02.860

您应该使用[擦除删除成语](http://en.wikipedia.org/wiki/Erase-remove_idiom)：

```
void DestroyTimer(struct timer_s * t)
{
  gTimers.erase(remove(gTimers.begin(), gTimers.end(), t), gTimers.end()); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:01:19.843

在不查看实际错误的情况下，惯用的方法是：

```
gTimers.erase(std::remove(gTimers.begin(), gTimers.end(), t), 
              gTimers.end()); 
```

这将比您现在所做的更安全、更快（捕获重复项，无需重新分配）。

这称为 [Erase-Remove idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom)。

对于实际的调试断言：调试迭代器是标准扩展，在某些情况下可能会损坏。

`delete`注意：如果它由双端队列拥有，您想调用计时器，以防止内存泄漏。

# tfs - 如何在 TFS 2010 中为特定用户提供\限制签入和签出权限？

> ID：12896070
> 
> 赞同：1
> 
> 时间：2012-10-15T12:53:35.843
> 
> 标签：tfs

有什么方法可以在不创建组的情况下授予特定用户签入和签出权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:06:34.153

是的，您可以`Add Windows user or group`直接选择当前权限级别：在“项目安全”对话框中，在“添加用户和组”部分中选择“Windows 用户或组”。然后单击“添加”以添加 Windows 用户/组。

![在此处输入图像描述](../Images/450b5566b2c788eb01b648554a6513b0.png)

# batch-file - WinRar 的批处理命令

> ID：12896071
> 
> 赞同：0
> 
> 时间：2012-10-15T12:53:37.400
> 
> 标签：batch-file, winrar

我有一个名为“MainFolder”的文件夹。在这个文件夹中，我有很多文件夹和文件。但在“MainFolder”中，我有一个特殊文件夹（该文件夹的名称是“ABC”），其中包含几个 *.aspx 文件。同样在这个文件夹中，我还有很多其他随机名称的文件夹。

**问题是**：我如何制作包含所有数据的存档 MainFolder.rar，除了 ABC 文件夹，其中只有 *.aspx 文件而不包括子文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:08:15.290

您首先需要使用`FOR`命令构建要包含的文件列表。阅读`HELP FOR`并尝试这个简单的代码，让你开始......

```
FOR %%a in (*.*) do (
  echo %%a >>%temp%\list.txt
)
FOR /d %%a in in (*.*) do (
  if /I NOT %%a==ABC (
    FOR %%b in (%%a\*.*) do (
      echo %%b >>%temp%\list.txt
  )
) 
```

然后在命令行中将其传递给 Winrar

```
rar a -r %temp%\files.rar @%temp%\list.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:03:36.067

我会分两步做，它应该是这样的：

```
rar a -r MainFolder.rar MainFolder -xABC
rar a MainFolder.rar ABC -n.aspx 
```

说明：第一个命令添加除 ABC 文件夹之外的所有文件夹（-r 表示递归，-x 表示排除）。第二个命令将 ABC 文件夹中的 aspx 文件添加到同一存档中。

* * *

更新： -n 似乎与 -x 相反 - 这是否符合您的要求？

# javascript - 使用 python 抓取 dechtech 网站

> ID：12896075
> 
> 赞同：0
> 
> 时间：2012-10-15T12:53:49.137
> 
> 标签：javascript, python, screen-scraping

我正在寻找一种从该网站上抓取数据的方法：http: [//www.dectech.org/football/index.php](http://www.dectech.org/football/index.php)最好使用 Python。我似乎遇到的困难是数据没有硬编码到网站的 HTML 中，并且似乎被包裹在一个叫做 mochi-kit ( [http://mochi.github.com/mochikit/](http://mochi.github.com/mochikit/) )的东西中.

我做了一些研究，似乎类似的东西`BeautifulSoup`可能对我有用，但我认为我可能没有正确使用它。我也尝试过`urllib`毫无乐趣地解析网站。

我的最终目标是拥有一个监控 dectech 网站的程序，并在发布新预测时自动选择使用`Betfair API`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:02:09.780

看起来数据是由 javascript 从这个 url 加载的

> [http://www.dectech.org/cgi-bin/new_site/GetUpcomingGames.pl?divID=0](http://www.dectech.org/cgi-bin/new_site/GetUpcomingGames.pl?divID=0)

返回

```
{
   "games" : [
      {
         "apct" : 0.377838,
         "dpct" : 0.263445,
         "expGoalDiff" : -0.04086,
         "awayID" : "6",
         "homeID" : "17",
         "date" : "20/10/2012",
         "away" : "Chelsea",
         "home" : "Tottenham",
         "hpct" : 0.358717
      },
      {
         "apct" : 0.237829,
         "dpct" : 0.250146,
         "expGoalDiff" : 0.594234,
         "awayID" : "1",
         "homeID" : "8",
         "date" : "20/10/2012",
         "away" : "Aston Villa",
         "home" : "Fulham",
         "hpct" : 0.512025
      }, /* shortened for brevity */ 
```

所以你非常幸运，你不需要抓取数据（这很棘手），你只需要检索它并解析它，就像他们对 mochi 所做的那样。

Python 的[simplejson](http://simplejson.readthedocs.org/en/latest/)模块将能够解析它...

# android - 是否可以在 android 中使用 GPS 获得 DEPTH

> ID：12896087
> 
> 赞同：0
> 
> 时间：2012-10-15T12:54:25.187
> 
> 标签：android

> **可能重复：**
> [Android：如何获得准确的高度？](https://stackoverflow.com/questions/9361870/android-how-to-get-accurate-altitude)

我正在创建应用程序，其中有两部电话.. 假设.. 有 3 层楼的建筑物... 一部电话在 2 楼，假设它的名字是**A**，另一部电话在 1 楼，假设它是名字**B**

现在**A正在向****B**发送 GPS 位置，并且来自该电话**B**的某些值可以知道电话**A**在**B****的**上方或下方......就像电话可以发送**+3M（米）**这样的值，所以它高于**B**和**-3M（米）**它低于**B**是否可以使用 GPS？

# jira - 我可以使用 FishEye 智能提交解决问题的子任务吗？

> ID：12896094
> 
> 赞同：4
> 
> 时间：2012-10-15T12:54:52.767
> 
> 标签：jira, jira-plugin, atlassian-fisheye

## 语境

我有一个功能请求，表示为带有**PRJ-11**句柄的 JIRA 问题。**我的问题有一个带有PRJ-23**句柄的子任务。JIRA 安装了最新的 FishEye 和 FishEye 插件并启用了智能提交。

## 问题

如果我要使用日志消息进行 SVN 提交：

> PRJ-11 #resolve #time 1w #comment 完成完整功能的工作

FishEye 将解决父问题（并且可能是子任务）。

如果我尝试对子任务做同样的事情：

> PRJ-23 #resolve #time 1w #comment 完成子任务

FishEye 检测到 SVN 提交并针对子任务记录活动，**但**它既不推进子任务的工作流，也不针对它或父问题记录任何时间。

我是否遗漏了提交消息语法或 FishEye 配置中的某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:37:48.053

您呈现的提交消息应该将子任务转换为 Resolved 状态，假设它处于 Resolve 转换可用的状态，并且您不需要子任务在解决时指定 Resolution。

如果这不起作用，我看到几个可能的原因：

1.  子任务处于没有可用的 Resolve 转换的状态。
2.  子任务没有默认分辨率，需要在分辨率中指定一个
3.  子任务有一个或多个未由 SmartCommit 设置的必填字段
4.  子任务需要您的 SmartCommit 用户无需解决的权限
5.  [建议的鱼眼中存在错误|https://answers.atlassian.com/questions/96530/can-i-resolve-an-issue-s-sub-task-using-a-fisheye-smart-commit ] 在 Atlassian Answers 论坛上。

快速评论您在问题中所说的其他内容：

> FishEye 将解决父问题（并且可能是子任务）。

这不是 JIRA 工作流的默​​认行为。如果您希望在解决父任务时解决子任务，则必须自定义工作流程。

虽然在我认为在某些情况下合适的行为中解决了所有子级时解决父级，但我完全不确定在解决父级时解决子任务是否合适。

# osx-lion - Apple script-get cpu usage as integer value

> ID：12896097
> 
> 赞同：0
> 
> 时间：2012-10-15T12:55:04.610
> 
> 标签：osx-lion, applescript

在终端我们可以使用

```
top -l 2 -F -R | awk '/CPU usage/ && NR>5 {printf "%d", $7+0}' 
```

要获取 cpu 使用的值，我如何在苹果脚本中将值作为整数获取？我试过这个

```
set usedSpace to (do shell script "top -l 2 -F -R | awk '/CPU usage/ && NR>5 {printf "%d", $7+0}'") as integer 
```

并找出错误

> 应为“，”但发现未知标记

然后像这样尝试

```
set usedSpace to (do shell script "top -l 2 -F -R | awk '/CPU usage/ && NR>5 '; printf $5}") as integer 
```

并得到这样的错误

> 错误“无法将“CPU 使用率：6.40% 用户、5.41% 系统、88.17% 空闲}\”转换为整数类型。” 数字 -1700 从“CPU 使用率：6.40% 用户，5.41% 系统，88.17% 空闲}”到整数

谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:55:58.823

尝试：

```
set usedSpace to (do shell script "top -l 2 -F -R | awk '/CPU usage/ && NR>5 {printf \"%d\", $7+0}'") as integer 
```

或者

```
set usedSpace to (do shell script "top -l 2 -F -R | awk '/CPU usage/ && NR>5 '; printf $5}") as text 
```

# c# - 在 DataGridView Winform 中执行文本框自动完成时出错

> ID：12896101
> 
> 赞同：0
> 
> 时间：2012-10-15T12:55:31.350
> 
> 标签：c#, .net, winforms, datagridview, autocomplete

我`specified cast is not valid`在尝试`autocomplete`为`datagridviewtextboxcell`.. 执行此操作时遇到此错误。我附上了代码的快照以及`stack trace`. 我在这里错过了什么吗？

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        TextBox prodCode = e.Control as TextBox;
        if (dataGridView1.CurrentCell.ColumnIndex == 0)
        {
            var source = new AutoCompleteStringCollection();
            String[] stringArray = newDB.CustomerTbls.Where(s => s.Status == "Active" & s.Type == "Customer").Select(s => s.Name).ToArray<string>();
            source.AddRange(stringArray);

            if (prodCode != null)
            {
                prodCode.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
                prodCode.AutoCompleteCustomSource = source;
                prodCode.AutoCompleteSource = AutoCompleteSource.CustomSource;

            }
        }
        else
            prodCode.AutoCompleteCustomSource = null;
    } 
```

![DataGridView 文本框单元格自动完成代码](../Images/2cab4c40a235ae1b10b2864800a823e0.png)

![堆栈跟踪](../Images/50d0b89946dad10dffe2ca4805e17a71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:27:11.603

正如 decyclone 在此线程[问题中所建议的那样，在 TextBox 的 AutoComplete 代码中面临问题](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/9b5e8680-27e2-4431-a256-612df9a519c7/)，在新解决方案中创建一个新的 Windows 应用程序项目，创建一个新表单并使用该表单尝试以下代码，即创建一个行数`String[]`大小的`DataTable`然后将其添加到`AutoCompleteStringCollection`对象

```
AutoCompleteStringCollection data = new AutoCompleteStringCollection ();
data.AddRange(new string[]
   {
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
   });

// Create and initialize the text box
var prodCode = new TextBox
{
   AutoCompleteCustomSource = data,
   AutoCompleteMode = AutoCompleteMode.SuggestAppend,
   AutoCompleteSource = AutoCompleteSource.CustomSource,
   Location = new Point(20, 20),
   Width = ClientRectangle.Width - 40,
   Visible = true
}; 
```

看看它是否有效。如果它不起作用，那么您可以尝试本文中概述的替代解决方案[AutoCompleteCustomSource – Specified Cast is Not Valid](http://techblogs.wordpress.com/tag/vsnet/)，即`TextBox`用 a替换`ComboBox`并将其设置`DropDownStyle`为`DropDown`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:53:31.180

我自己弄清楚了这个问题。我试图做的形式`Datagridview Autocomplete`是`Child Form`. 我上面发布的代码在`new Form`. 所以我打开了`Child Form`一个新的`Thread`并尝试运行代码并且它有效！感谢您对@chridam 的所有帮助。

# php - 如何处理这些 PHP 对象？

> ID：12896105
> 
> 赞同：0
> 
> 时间：2012-10-15T12:55:38.993
> 
> 标签：php, object

我正在使用谷歌地图 API V3 使用 lat/lng 发出请求，期望得到返回的完整地址数据。但是，我的 PHP 程序有时无法获取例如返回的邮政编码。我对返回的内容做了一个 var_dump。我看到一个额外的对象元素，这可能是我不确定的原因。我完全有可能对 PHP 中的对象如何工作一无所知。这是感兴趣区域的 var_dump 输出。第一个示例确实将邮政编码返回到发出请求的我的 PHP 程序，而第二个示例未能这样做并给出“尝试获取非对象的属性...”的错误。提前感谢您查看此内容和您的有用评论。

这是从 Google Map API V3 返回的 $xml 的 var_dump，它不起作用并且无法正确返回邮政编码：

```
object(SimpleXMLElement)#1 (1) {
  ["Response"]=>
  object(SimpleXMLElement)#2 (3) {
    ["name"]=>
    string(24) "40.74005999,-73.99718229"
    ["Status"]=>
    object(SimpleXMLElement)#3 (2) {
      ["code"]=>
      string(3) "200"
      ["request"]=>
      string(7) "geocode"
    }
    ["Placemark"]=>
    object(SimpleXMLElement)#4 (5) {
      ["@attributes"]=>
      array(1) {
        ["id"]=>
        string(2) "p1"
      }
      ["address"]=>
      string(38) "136 W 17th St, New York, NY 10011, USA"
      ["AddressDetails"]=>
      object(SimpleXMLElement)#5 (2) {
        ["@attributes"]=>
        array(1) {
          ["Accuracy"]=>
          string(1) "8"
        }
        ["Country"]=>
        object(SimpleXMLElement)#8 (3) {
          ["CountryNameCode"]=>
          string(2) "US"
          ["CountryName"]=>
          string(3) "USA"
          ["AdministrativeArea"]=>
          object(SimpleXMLElement)#9 (2) {
            ["AdministrativeAreaName"]=>
            string(2) "NY"
            ["SubAdministrativeArea"]=>
            object(SimpleXMLElement)#10 (2) {
              ["SubAdministrativeAreaName"]=>
              string(8) "New York"
              ["Locality"]=>
              object(SimpleXMLElement)#11 (2) {
                ["LocalityName"]=>
                string(8) "New York"
                ["DependentLocality"]=>
                object(SimpleXMLElement)#12 (3) {
                  ["DependentLocalityName"]=>
                  string(9) "Manhattan"
                  ["Thoroughfare"]=>
                  object(SimpleXMLElement)#13 (1) {
                    ["ThoroughfareName"]=>
                    string(13) "136 W 17th St"
                  }
                  ["PostalCode"]=>
                  object(SimpleXMLElement)#14 (1) {
                    ["PostalCodeNumber"]=>
                    string(5) "10011"
                  }
                }
              }
            }
          }
        }
      }
      ["ExtendedData"]=>
      object(SimpleXMLElement)#6 (1) {
        ["LatLonBox"]=>
        object(SimpleXMLElement)#8 (1) {
          ["@attributes"]=>
          array(4) {
            ["north"]=>
            string(10) "40.7414089"
            ["south"]=>
            string(10) "40.7387109"
            ["east"]=>
            string(11) "-73.9958332"
            ["west"]=>
            string(11) "-73.9985312"
          }
        }
      }
      ["Point"]=>
      object(SimpleXMLElement)#7 (1) {
        ["coordinates"]=>
        string(24) "-73.9971822,40.7400599,0"
      }
    }
  }
} 
```

上面有这些错误：

```
PHP Notice:  Trying to get property of non-object in try.php on line 38
PHP Notice:  Trying to get property of non-object in try.php on line 41 
```

以下是这些行的 PHP 代码：

```
$status = $xml->Response->Status->code;
// Country
$country = $xml->Response->Placemark->AddressDetails->Country;
$country_code = $country->CountryNameCode;
$country_name = $country->CountryName;

// Address
$address_line = $xml->Response->Placemark->address;

// Street address
$Locality = $country->AdministrativeArea->Locality;
// var_dump($Locality);
$street = $country->AdministrativeArea->Locality->Thoroughfare->ThoroughfareName;
$city = $country->AdministrativeArea->Locality->LocalityName;
$state = $country->AdministrativeArea->AdministrativeAreaName;
$zip_code = $country->AdministrativeArea->Locality->PostalCode->PostalCodeNumber; 
```

第 41 行是带有 $zip_code 的最后一行代码，第 38 行是以 $street 开头的代码行。

您会注意到上面包含一个 ["SubAdministrativeArea"]=> ，下面的工作示例没有。这有关系吗？

```
object(SimpleXMLElement)#1 (1) {
  ["Response"]=>
  object(SimpleXMLElement)#2 (3) {
    ["name"]=>
    string(24) "40.74445606,-73.97495072"
    ["Status"]=>
    object(SimpleXMLElement)#3 (2) {
      ["code"]=>
      string(3) "200"
      ["request"]=>
      string(7) "geocode"
    }
    ["Placemark"]=>
    object(SimpleXMLElement)#4 (5) {
      ["@attributes"]=>
      array(1) {
        ["id"]=>
        string(2) "p1"
      }
      ["address"]=>
      string(38) "317 E 34th St, New York, NY 10016, USA"
      ["AddressDetails"]=>
      object(SimpleXMLElement)#5 (2) {
        ["@attributes"]=>
        array(1) {
          ["Accuracy"]=>
          string(1) "8"
        }
        ["Country"]=>
        object(SimpleXMLElement)#8 (3) {
          ["CountryNameCode"]=>
          string(2) "US"
          ["CountryName"]=>
          string(3) "USA"
          ["AdministrativeArea"]=>
          object(SimpleXMLElement)#9 (2) {
            ["AdministrativeAreaName"]=>
            string(2) "NY"
            ["Locality"]=>
            object(SimpleXMLElement)#10 (3) {
              ["LocalityName"]=>
              string(8) "New York"
              ["Thoroughfare"]=>
              object(SimpleXMLElement)#11 (1) {
                ["ThoroughfareName"]=>
                string(13) "317 E 34th St"
              }
              ["PostalCode"]=>
              object(SimpleXMLElement)#12 (1) {
                ["PostalCodeNumber"]=>
                string(5) "10016"
              }
            }
          }
        }
      }
      ["ExtendedData"]=>
      object(SimpleXMLElement)#6 (1) {
        ["LatLonBox"]=>
        object(SimpleXMLElement)#8 (1) {
          ["@attributes"]=>
          array(4) {
            ["north"]=>
            string(10) "40.7458050"
            ["south"]=>
            string(10) "40.7431070"
            ["east"]=>
            string(11) "-73.9736017"
            ["west"]=>
            string(11) "-73.9762997"
          }
        }
      }
      ["Point"]=>
      object(SimpleXMLElement)#7 (1) {
        ["coordinates"]=>
        string(24) "-73.9749507,40.7444560,0"
      }
    }
  }
} 
```

这是用于输出 $zip_code 对于第一个示例为空的代码行，而对于第二个示例，它确实按预期工作。

```
echo "===================================\n";
echo "Status code is: " . $status . "\n";
echo "address line is:" . $address_line . "\n";
echo "=+=+=" . "\n";
echo "street is: " . $street . "\n";
echo "city is: " . $city . "\n";
echo "state is: " . $state . "\n";
echo "zip code is: " . $zip_code . "\n";
echo "country code is: " . $country_code . "\n";
echo "country name is: " . $country_name. "\n"; 
```

此示例中使用的不同位置均位于纽约市。我不知道为什么一个在工作而另一个不在工作，希望我看到它正在返回 ["SubAdministrativeArea"]。Google map API V3 不应该为同一区域返回相同格式的信息吗？这甚至是我遇到问题的一个因素吗？我没有正确处理对象和元素吗？如果是这样，请赐教，因为我被困在这一点上。

或者我应该检查谷歌地图 API V3 可能返回（或更多？）的两种不同情况？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:31:19.567

> 您会注意到上面包含一个 ["SubAdministrativeArea"]=> ，下面的工作示例没有。这有关系吗？

是的，这很重要。

> Google map API V3 不应该为同一区域返回相同格式的信息吗？

答案的某些元素将始终出现在结果树中的同一位置，但其他一些元素取决于请求。在这方面我无法为您提供更多帮助，因为我不明白为什么即使请求非常相似，有时也会有更多的子级别......

> 这甚至是我遇到问题的一个因素吗？

是的，因为您不能依赖固定的结果结构。

> 我是否应该检查 Google 地图 API V3 可能返回（或更多？）的两种不同情况？

另一种解决方案是使用 SimpleXML 以外的其他库来处理结果，例如[DOM](http://www.php.net/manual/en/book.dom.php)，它具有通过树查找子项的功能，例如[DOMElement::getElementsByTagName](http://www.php.net/manual/en/domelement.getelementsbytagname.php)。与 SimpleXML 相比，获取值需要更多的编码，但这样您就不需要检查是否存在`SubAdministrativeArea`关卡。

我希望它有所帮助。

# c# - 首先在EF代码中急切加载集合关系

> ID：12896107
> 
> 赞同：1
> 
> 时间：2012-10-15T12:55:51.720
> 
> 标签：c#, .net, entity-framework, ef-code-first, code-first

我在 c# 中首先使用实体​​框架代码 4.3

我有以下课程：

```
Class A
{
public string Name { get; set; }
public List<B> Bs { get; set; }
}

Class B
{
public string Name { get; set; }
} 
```

从 A 到 B 有一对多的关系。当我尝试从 A 加载 B 列表时。我只从列表中获取第一个元素。

当我执行以下代码时，我希望 a2 包含两个 b，但实际上它只包含一个。有没有人可以帮助发现问题？

```
B b = new B() {Name = "b"};
A a = new A() {Name = "a", 
Bs = new List<B>() { new B() {Name = "b1"}, new B() {Name = "b2"} };

using (var context = new MyContext())
{
context.As.Add(a);
context.SaveChanges();
}
using (var context = new MyContext())
{
var a2 = (from a in context.As.Include(a => a.Bs)
        where a.Name == "a"
        select a).Single();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:14:31.343

您可以发布您的实际代码吗-您发布的代码无法编译，但是对您的一些括号和变量命名进行了一些小的更改-但我得到的结果与您不同，a2 正如预期的那样包含两个 B，所以问题可能出在其他地方。这是整个控制台应用程序：

```
public class A
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<B> Bs { get; set; }
}

public class B
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Model : DbContext
{
    public DbSet<A> As { get; set; }
    public DbSet<B> Bs { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var b = new B() { Name = "b" };
        var a1 = new A()
            {
                Name = "a",
                Bs = new List<B>() { new B() { Name = "b1" }, new B() { Name = "b2" } }
            };

        using (var context = new Model())
        {
            context.As.Add(a1);
            context.SaveChanges();
        }
        using (var context = new Model())
        {
            var a2 = (from a in context.As.Include(a => a.Bs)
                      where a.Name == "a"
                      select a).Single();

            Console.WriteLine(a2.Bs.Count);
        }

        Console.ReadLine();
    }

} 
```

# c# - 外国约束例外

> ID：12896112
> 
> 赞同：1
> 
> 时间：2012-10-15T12:56:01.910
> 
> 标签：c#, sql-server, entity-framework

我有一个表 StaffLevelMapping，它有一个外键列，这是另一个表 AcademicLevel 的主键。它引发了一个异常，即 Insert 语句与外键冲突，并且它在外键和作为主键的表上具有引用。我知道如果您插入的值在其原始表中不存在，通常会发生这种情况。但这确实存在。我尝试将它直接插入 SQL Server 并且效果很好。但是通过我的代码它不起作用。最让我吃惊的是我对我的其余表使用了相同的插入逻辑，并且我没有问题将这个与这张表一起保存。由于这个错误，我需要一个非常快速的帮助，我已经两天没有睡觉了。

下面是我的插入代码：

```
public static StaffLevelMapping AddStafflevel(int staffId, int levelId, bool isEnabled)
    {
        var context = ObjectContextHelper.CurrentObjectContext;
        var staffLevel = context.StaffLevelMappings.CreateObject();

        staffLevel.StaffID = staffId;
        staffLevel.ID = levelId;
        staffLevel.IsEnabled = isEnabled;
        context.StaffLevelMappings.AddObject(staffLevel);
        context.SaveChanges();

        return staffLevel;
    } 
```

非常感谢那个可以让我摆脱这种痛苦的特别的人。

# mysql - 同一查询中的多个 max()

> ID：12896118
> 
> 赞同：3
> 
> 时间：2012-10-15T12:56:27.213
> 
> 标签：mysql, sql

大家好，

我有 ：-

```
 SELECT MAX(register_number) AS "Next-6-months-register-number" 
    FROM gypsum WHERE test_frequency ='6' 
```

我想在同一个查询中返回 和 的值。`test_frequency ='3'`这`'12'`可能吗？谢谢GWS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:57:56.820

是的，这是可能的。用于`GROUP BY`获取每组的最大值：

```
SELECT test_frequency, MAX(register_number) AS "Max-register-number"
FROM gypsum
WHERE test_frequency IN ('3', '6', '12')
GROUP BY test_frequency 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:07:16.757

在这里，您添加测试频率..('3','12).. 或从查询中选择，例如：

```
SELECT test_frequency, MAX(register_number) AS "Max-register-number"
FROM gypsum
WHERE test_frequency IN ('3','12')
GROUP BY test_frequency 
```

* * *

```
SELECT test_frequency, MAX(register_number) AS "Max-register-number"
FROM gypsum
WHERE test_frequency IN (select frequency_colname from tablename where colname=value)
GROUP BY test_frequency 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:58:22.157

```
SELECT 
  MAX(CASE WHEN test_frequency = '3' THEN register_number END) 
      AS "Next-3-months-register-number",
  MAX(CASE WHEN test_frequency = '12' THEN register_number END) 
      AS "Next-12-months-register-number",
  MAX(CASE WHEN test_frequency = '6' THEN register_number END) 
      AS "Next-6-months-register-number",
  MAX(register_number) AS "Next-6-months-register-number" 
FROM gypsum 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:58:30.620

尝试这个

```
SELECT MAX(CASE 
                WHEN test_frequency ='6' THEN register_number 
           ELSE NULL END) AS "Next-6-months-register-number" ,
      MAX(CASE 
                WHEN test_frequency ='3' THEN register_number 
           ELSE NULL END) AS "Next-3-months-register-number" ,
     MAX(CASE 
                WHEN test_frequency ='12' THEN register_number 
           ELSE NULL END) AS "Next-12-months-register-number" 
FROM gypsum 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T12:58:59.987

获取所有 test_frequency 的最大值

```
SELECT test_frequency ,MAX(register_number) AS "Next-6-months-register-number" 
FROM gypsum 
group by test_frequency 
```

或者

```
SELECT MAX(register_number) AS "Next-6-months-register-number" 
FROM gypsum WHERE test_frequency in('6','3','12')
group by test_frequency 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T12:59:13.283

您应该能够使用**OR**关键字添加额外的参数。

```
SELECT MAX(register_number) AS "Next-6-months-register-number" FROM gypsum 
WHERE test_frequency ='6'
or 
test_frequency ='3'
or
test_frequency ='12' 
```

# forms - 保存动态 HTML 表单的最佳实践

> ID：12896120
> 
> 赞同：0
> 
> 时间：2012-10-15T12:56:35.030
> 
> 标签：forms, xhtml

我正在寻找保存动态 HTML 表单的最佳实践。表单的字段通过 AJAX 添加到页面中。每个字段类似于：

```
<input type="text" name="field_12" /> 
```

其中，在这种情况下，“12”是数据库中字段的主键。

我计划通过 POST 将这些字段发送回服务器进行保存。到了保存的时候，我不知道`name`会过来的属性。

我可以想到两种方法来做到这一点。

1.  有一个带有字段 ID 列表的隐藏项目。然后我可以在插入之前解析它。
    `<input type="hidden" name="fieldIds" value="1,2,12,14" />`

2.  在数据库中查询预期的字段 id，然后根据它进行插入。

我可以看到这两种情况的优缺点。在这种情况下，最佳做法是什么？

我在 IIS 服务器上使用经典的 ASP，不过，我认为这不是一个因素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:00:10.957

使输入字段像

```
<input type="hidden" name="field[]" value="12" />
<input type="hidden" name="field[]" value="13" />
<input type="hidden" name="field[]" value="14" />
... 
```

它将成为服务器端的数组

并循环它，然后插入

# magento - Magento 运输方式错误

> ID：12896123
> 
> 赞同：1
> 
> 时间：2012-10-15T12:56:38.680
> 
> 标签：magento, methods, shipping

我正在尝试更改配置的运输方式部分中的一些设置，但是每当我单击时，都会出现以下错误：

> 致命错误：在 /usr/local/pem/vhosts/178410/webspace/httpdocs/furniturefair.ie/app/code/core/Mage/Adminhtml/Block/System/ 中的非对象上调用成员函数 toOptionArray()第 385 行的 Config/Form.php

关于可能导致此问题的原因或如何解决的任何想法？

我正在使用**Magento Community** Magento 版本。1.4.1.0

# c# - 地理坐标转换器

> ID：12896139
> 
> 赞同：4
> 
> 时间：2012-10-15T12:57:53.563
> 
> 标签：c#, python, gis

我想要一个可以将一个系统转换为另一个系统的类。

我在 python 中找到了一个源代码，并试图将其移植到 C# 中。

这是python源码。[从这里](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)

```
import math

class GlobalMercator(object):

    def __init__(self, tileSize=256):
        "Initialize the TMS Global Mercator pyramid"
        self.tileSize = tileSize
        self.initialResolution = 2 * math.pi * 6378137 / self.tileSize
        # 156543.03392804062 for tileSize 256 pixels
        self.originShift = 2 * math.pi * 6378137 / 2.0
        # 20037508.342789244

    def LatLonToMeters(self, lat, lon ):
        "Converts given lat/lon in WGS84 Datum to XY in Spherical Mercator EPSG:900913"

        mx = lon * self.originShift / 180.0
        my = math.log( math.tan((90 + lat) * math.pi / 360.0 )) / (math.pi / 180.0)

        my = my * self.originShift / 180.0
        return mx, my

    def MetersToLatLon(self, mx, my ):
        "Converts XY point from Spherical Mercator EPSG:900913 to lat/lon in WGS84 Datum"

        lon = (mx / self.originShift) * 180.0
        lat = (my / self.originShift) * 180.0

        lat = 180 / math.pi * (2 * math.atan( math.exp( lat * math.pi / 180.0)) - math.pi / 2.0)
        return lat, lon

    def PixelsToMeters(self, px, py, zoom):
        "Converts pixel coordinates in given zoom level of pyramid to EPSG:900913"

        res = self.Resolution( zoom )
        mx = px * res - self.originShift
        my = py * res - self.originShift
        return mx, my

    def MetersToPixels(self, mx, my, zoom):
        "Converts EPSG:900913 to pyramid pixel coordinates in given zoom level"

        res = self.Resolution( zoom )
        px = (mx + self.originShift) / res
        py = (my + self.originShift) / res
        return px, py

    def PixelsToTile(self, px, py):
        "Returns a tile covering region in given pixel coordinates"

        tx = int( math.ceil( px / float(self.tileSize) ) - 1 )
        ty = int( math.ceil( py / float(self.tileSize) ) - 1 )
        return tx, ty

    def PixelsToRaster(self, px, py, zoom):
        "Move the origin of pixel coordinates to top-left corner"

        mapSize = self.tileSize << zoom
        return px, mapSize - py

    def MetersToTile(self, mx, my, zoom):
        "Returns tile for given mercator coordinates"

        px, py = self.MetersToPixels( mx, my, zoom)
        return self.PixelsToTile( px, py)

    def TileBounds(self, tx, ty, zoom):
        "Returns bounds of the given tile in EPSG:900913 coordinates"

        minx, miny = self.PixelsToMeters( tx*self.tileSize, ty*self.tileSize, zoom )
        maxx, maxy = self.PixelsToMeters( (tx+1)*self.tileSize, (ty+1)*self.tileSize, zoom )
        return ( minx, miny, maxx, maxy )

    def TileLatLonBounds(self, tx, ty, zoom ):
        "Returns bounds of the given tile in latutude/longitude using WGS84 datum"

        bounds = self.TileBounds( tx, ty, zoom)
        minLat, minLon = self.MetersToLatLon(bounds[0], bounds[1])
        maxLat, maxLon = self.MetersToLatLon(bounds[2], bounds[3])

        return ( minLat, minLon, maxLat, maxLon )

    def Resolution(self, zoom ):
        "Resolution (meters/pixel) for given zoom level (measured at Equator)"

        # return (2 * math.pi * 6378137) / (self.tileSize * 2**zoom)
        return self.initialResolution / (2**zoom)

    def ZoomForPixelSize(self, pixelSize ):
        "Maximal scaledown zoom of the pyramid closest to the pixelSize."

        for i in range(30):
            if pixelSize > self.Resolution(i):
                return i-1 if i!=0 else 0 # We don't want to scale up

    def GoogleTile(self, tx, ty, zoom):
        "Converts TMS tile coordinates to Google Tile coordinates"

        # coordinate origin is moved from bottom-left to top-left corner of the extent
        return tx, (2**zoom - 1) - ty

    def QuadTree(self, tx, ty, zoom ):
        "Converts TMS tile coordinates to Microsoft QuadTree"

        quadKey = ""
        ty = (2**zoom - 1) - ty
        for i in range(zoom, 0, -1):
            digit = 0
            mask = 1 << (i-1)
            if (tx & mask) != 0:
                digit += 1
            if (ty & mask) != 0:
                digit += 2
            quadKey += str(digit)

        return quadKey 
```

这是我的 C# 端口。

```
public class GlobalMercator {
    private Int32 TileSize;
    private Double InitialResolution;
    private Double OriginShift;
    private const Int32 EarthRadius = 6378137;
    public GlobalMercator() {
        TileSize = 256;
        InitialResolution = 2 * Math.PI * EarthRadius / TileSize;
        OriginShift = 2 * Math.PI * EarthRadius / 2;
    }
    public DPoint LatLonToMeters(Double lat, Double lon) {
        var p = new DPoint();
        p.X = lon * OriginShift / 180;
        p.Y = Math.Log(Math.Tan((90 + lat) * Math.PI / 360)) / (Math.PI / 180);
        p.Y = p.Y * OriginShift / 180;
        return p;
    }
    public GeoPoint MetersToLatLon(DPoint m) {
        var ll = new GeoPoint();
        ll.Longitude = (m.X / OriginShift) * 180;
        ll.Latitude = (m.Y / OriginShift) * 180;
        ll.Latitude = 180 / Math.PI * (2 * Math.Atan(Math.Exp(ll.Latitude * Math.PI / 180)) - Math.PI / 2);
        return ll;
    }
    public DPoint PixelsToMeters(DPoint p, Int32 zoom) {
        var res = Resolution(zoom);
        var met = new DPoint();
        met.X = p.X * res - OriginShift;
        met.Y = p.Y * res - OriginShift;
        return met;
    }
    public DPoint MetersToPixels(DPoint m, Int32 zoom) {
        var res = Resolution(zoom);
        var pix = new DPoint();
        pix.X = (m.X + OriginShift) / res;
        pix.Y = (m.Y + OriginShift) / res;
        return pix;
    }
    public Point PixelsToTile(DPoint p) {
        var t = new Point();
        t.X = (Int32)Math.Ceiling(p.X / (Double)TileSize) - 1;
        t.Y = (Int32)Math.Ceiling(p.Y / (Double)TileSize) - 1;
        return t;
    }
    public Point PixelsToRaster(Point p, Int32 zoom) {
        var mapSize = TileSize << zoom;
        return new Point(p.X, mapSize - p.Y);
    }
    public Point MetersToTile(Point m, Int32 zoom) {
        var p = MetersToPixels(m, zoom);
        return PixelsToTile(p);
    }

    public Pair<DPoint> TileBounds(Point t, Int32 zoom) {
        var min = PixelsToMeters(new DPoint(t.X * TileSize, t.Y * TileSize), zoom);
        var max = PixelsToMeters(new DPoint((t.X + 1) * TileSize, (t.Y + 1) * TileSize), zoom);
        return new Pair<DPoint>(min, max);
    }
    public Pair<GeoPoint> TileLatLonBounds(Point t, Int32 zoom) {
        var bound = TileBounds(t, zoom);
        var min = MetersToLatLon(bound.Min);
        var max = MetersToLatLon(bound.Max);
        return new Pair<GeoPoint>(min, max);
    }
    public Double Resolution(Int32 zoom) {
        return InitialResolution / (2 ^ zoom);
    }
    public Double ZoomForPixelSize(Double pixelSize) {
        for (var i = 0; i < 30; i++)
            if (pixelSize > Resolution(i))
                return i != 0 ? i - 1 : 0;
        throw new InvalidOperationException();
    }
    public Point ToGoogleTile(Point t, Int32 zoom) {
        return new Point(t.X, ((Int32)Math.Pow(2, zoom) - 1) - t.Y);
    }
    public Point ToTmsTile(Point t, Int32 zoom) {
        return new Point(t.X, ((Int32)Math.Pow(2, zoom) - 1) - t.Y);
    }
}
public struct Point {
    public Point(Int32 x, Int32 y)
        : this() {
        X = x;
        Y = y;
    }
    public Int32 X { get; set; }
    public Int32 Y { get; set; }
}
public struct DPoint {
    public DPoint(Double x, Double y)
        : this() {
        this.X = x;
        this.Y = y;
    }
    public Double X { get; set; }
    public Double Y { get; set; }
    public static implicit operator DPoint(Point p) {
        return new DPoint(p.X, p.Y);
    }
}
public class GeoPoint {
    public Double Latitude  { get; set; }
    public Double Longitude { get; set; }
}
public class Pair<T> {
    public Pair() {}
    public Pair(T min, T max) {
        Min = min;
        Max = max;
    }
    public T Min { get; set; }
    public T Max { get; set; }
} 
```

我有两个问题。

1.  我是否正确移植了代码？（我故意省略了一种方法，因为我不使用它并添加了一种我自己的方法）

2.  这里我有坐标

```
WGS84 基准面（经度/纬度）：
-123.75 36.59788913307022
-118.125 40.97989806962013

球形墨卡托（米）：
-13775786.985667605 4383204.9499851465
-13149614.849955441 5009377.085697312

像素
2560 6144 2816 6400

谷歌
x:10, y:24, z:6

经颅磁刺激
x:10, y:39, z:6

四叉树
023010
```

我应该如何链接这些方法，以便从谷歌的平铺坐标（10、24、6）中获得球形墨卡托米？

**更新**

为我的第二个问题找到答案对我来说更重要。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T08:39:48.340

你的班级至少有一个错误：

```
 public Double Resolution(Int32 zoom) {
        return InitialResolution / (2 ^ zoom); // BAD CODE, USE Math.Pow, not ^
    } 
```

您将二进制 XOR 运算符误认为指数运算符的地方。

我重写了代码，将大多数函数设为静态，并添加了一些相关函数：

```
/// <summary>
/// Conversion routines for Google, TMS, and Microsoft Quadtree tile representations, derived from
/// http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/ 
/// </summary>
public class WebMercator
{
    private const int TileSize = 256;
    private const int EarthRadius = 6378137;
    private const double InitialResolution = 2 * Math.PI * EarthRadius / TileSize;
    private const double OriginShift = 2 * Math.PI * EarthRadius / 2;

    //Converts given lat/lon in WGS84 Datum to XY in Spherical Mercator EPSG:900913
    public static Point LatLonToMeters(double lat, double lon)
    {
        var p = new Point();
        p.X = lon * OriginShift / 180;
        p.Y = Math.Log(Math.Tan((90 + lat) * Math.PI / 360)) / (Math.PI / 180);
        p.Y = p.Y * OriginShift / 180;
        return p;
    }

    //Converts XY point from (Spherical) Web Mercator EPSG:3785 (unofficially EPSG:900913) to lat/lon in WGS84 Datum
    public static Point MetersToLatLon(Point m)
    {
        var ll = new Point();
        ll.X = (m.X / OriginShift) * 180;
        ll.Y = (m.Y / OriginShift) * 180;
        ll.Y = 180 / Math.PI * (2 * Math.Atan(Math.Exp(ll.Y * Math.PI / 180)) - Math.PI / 2);
        return ll;
    }

    //Converts pixel coordinates in given zoom level of pyramid to EPSG:900913
    public static Point PixelsToMeters(Point p, int zoom)
    {
        var res = Resolution(zoom);
        var met = new Point();
        met.X = p.X * res - OriginShift;
        met.Y = p.Y * res - OriginShift;
        return met;
    }

    //Converts EPSG:900913 to pyramid pixel coordinates in given zoom level
    public static Point MetersToPixels(Point m, int zoom)
    {
        var res = Resolution(zoom);
        var pix = new Point();
        pix.X = (m.X + OriginShift) / res;
        pix.Y = (m.Y + OriginShift) / res;
        return pix;
    }

    //Returns a TMS (NOT Google!) tile covering region in given pixel coordinates
    public static Tile PixelsToTile(Point p)
    {
        var t = new Tile();
        t.X = (int)Math.Ceiling(p.X / (double)TileSize) - 1;
        t.Y = (int)Math.Ceiling(p.Y / (double)TileSize) - 1;
        return t;
    }

    public static Point PixelsToRaster(Point p, int zoom)
    {
        var mapSize = TileSize << zoom;
        return new Point(p.X, mapSize - p.Y);
    }

    //Returns tile for given mercator coordinates
    public static Tile MetersToTile(Point m, int zoom)
    {
        var p = MetersToPixels(m, zoom);
        return PixelsToTile(p);
    }

    //Returns bounds of the given tile in EPSG:900913 coordinates
    public static Rect TileBounds(Tile t, int zoom)
    {
        var min = PixelsToMeters(new Point(t.X * TileSize, t.Y * TileSize), zoom);
        var max = PixelsToMeters(new Point((t.X + 1) * TileSize, (t.Y + 1) * TileSize), zoom);
        return new Rect(min, max);
    }

    //Returns bounds of the given tile in latutude/longitude using WGS84 datum
    public static Rect TileLatLonBounds(Tile t, int zoom)
    {
        var bound = TileBounds(t, zoom);
        var min = MetersToLatLon(new Point(bound.Left, bound.Top));
        var max = MetersToLatLon(new Point(bound.Right, bound.Bottom));
        return new Rect(min, max);
    }

    //Resolution (meters/pixel) for given zoom level (measured at Equator)
    public static double Resolution(int zoom)
    {
        return InitialResolution / (Math.Pow(2, zoom));
    }

    public static double ZoomForPixelSize(double pixelSize)
    {
        for (var i = 0; i < 30; i++)
            if (pixelSize > Resolution(i))
                return i != 0 ? i - 1 : 0;
        throw new InvalidOperationException();
    }

    // Switch to Google Tile representation from TMS
    public static Tile ToGoogleTile(Tile t, int zoom)
    {
        return new Tile(t.X, ((int)Math.Pow(2, zoom) - 1) - t.Y);
    }

    // Switch to TMS Tile representation from Google
    public static Tile ToTmsTile(Tile t, int zoom)
    {
        return new Tile(t.X, ((int)Math.Pow(2, zoom) - 1) - t.Y);
    }

    //Converts TMS tile coordinates to Microsoft QuadTree
    public static string QuadTree(int tx, int ty, int zoom)
    {
        var quadtree = "";

        ty = ((1 << zoom) - 1) - ty;
        for (var i = zoom; i >= 1; i--)
        {
            var digit = 0;

            var mask = 1 << (i - 1);

            if ((tx & mask) != 0)
                digit += 1;

            if ((ty & mask) != 0)
                digit += 2;

            quadtree += digit;
        }

        return quadtree;
    }

    //Converts a quadtree to tile coordinates
    public static Tile QuadTreeToTile(string quadtree, int zoom)
    {
        int tx= 0, ty = 0;

        for (var i = zoom; i >= 1; i--)
        {
            var ch = quadtree[zoom - i];
            var mask = 1 << (i - 1);

            var digit = ch - '0';

            if ((digit & 1) != 0)
                tx += mask;

            if ((digit & 2) != 0)
                ty += mask;
        }

        ty = ((1 << zoom) - 1) - ty;

        return new Tile(tx, ty);
    }

    //Converts a latitude and longitude to quadtree at the specified zoom level 
    public static string LatLonToQuadTree(Point latLon, int zoom)
    {
        Point m = LatLonToMeters(latLon.Y, latLon.X);
        Tile t = MetersToTile(m, zoom);
        return QuadTree(t.X, t.Y, zoom);
    }

    //Converts a quadtree location into a latitude/longitude bounding rectangle
    public static Rect QuadTreeToLatLon(string quadtree)
    {
        int zoom = quadtree.Length;
        Tile t = QuadTreeToTile(quadtree, zoom);
        return TileLatLonBounds(t, zoom);
    }

    //Returns a list of all of the quadtree locations at a given zoom level within a latitude/longude box
    public static List<string> GetQuadTreeList(int zoom, Point latLonMin, Point latLonMax)
    {
        if (latLonMax.Y< latLonMin.Y|| latLonMax.X< latLonMin.X)
            return null;

        Point mMin = LatLonToMeters(latLonMin.Y, latLonMin.X);
        Tile tmin = MetersToTile(mMin, zoom);
        Point mMax = LatLonToMeters(latLonMax.Y, latLonMax.X);
        Tile tmax = MetersToTile(mMax, zoom);

        var arr = new List<string>();

        for (var ty = tmin.Y; ty <= tmax.Y; ty++)
        {
            for (var tx = tmin.X; tx <= tmax.X; tx++)
            {
                var quadtree = QuadTree(tx, ty, zoom);
                arr.Add(quadtree);
            }
        }
        return arr;
    }
}

/// <summary>
/// Reference to a Tile X, Y index
/// </summary>
public class Tile
{
    public Tile() { }
    public Tile(int x, int y)
    {
        X = x;
        Y = y;
    }

    public int X { get; set; }
    public int Y { get; set; }
} 
```

要解决您的第二个问题，请使用以下顺序：

```
 int zoom = 6;
        Tile googleTile = new Tile(10,24);
        Tile tmsTile = GlobalMercator.ToTmsTile(googleTile, zoom);
        Rect r3 = GlobalMercator.TileLatLonBounds(tmsTile, zoom);
        var tl = GlobalMercator.LatLonToMeters(r3.Top, r3.Left);
        var br = GlobalMercator.LatLonToMeters(r3.Bottom, r3.Right);

        Debug.WriteLine("{0:0.000}  {1:0.000}", tl.X, tl.Y); 
        Debug.WriteLine("{0:0.000}  {1:0.000}", br.X, br.Y);

        // -13775787.000  4383205.000
        // -13149615.000  5009376.500 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:11:04.583

将坐标从一个投影转换为另一个的最佳开源解决方案是 Proj4，它最初是用 c 语言编写的，但已移植到多种编程语言中。我尝试并使用的 c# 端口是在 CodePlex 上找到的[DotSpatial Projections](http://dotspatial.codeplex.com/wikipage?title=DotSpatial.Projections)。根据示例很容易找到如何使用它。您唯一需要知道的是您的案例的转换参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-08T22:55:15.917

[CoordinateSharp](https://www.nuget.org/packages/CoordinateSharp/)在 NuGet 上可用。它重量轻，可以真正实现坐标转换。它不是为制图而设计的，但如果这是一个因素，那么它是为海峡向上转换（和基于位置的天体信息）而设计的。

例子

```
 Coordinate c = new Coordinate(myLat,myLong);
 c.UTM; //Outputs UTM string
 c.UTM.Easting //UTM easting property 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-18T13:23:06.793

对于任何想要使用 Oybek 优秀代码的人来说，有几点建议：

`using System.Windows`您还需要添加`Add a Reference`到`WindowsBase`程序集中，否则 VS 不会找到`Point`和`Rect`.

请注意，**只是不能**使用`System.Drawing`

这是一个新功能，可以将 Zoom lat/lng 转换为 Google Tile：

```
 public static Tile LatLonToGoogleTile(Point latLon, int zoom)
    {
        Point m = LatLonToMeters(latLon.Y, latLon.X);
        Tile t = MetersToTile(m, zoom);
        return ToGoogleTile(t, zoom);
    } 
```

# iphone - 通过单击按钮从 Internet 检索图像并将其显示在另一个视图中

> ID：12896140
> 
> 赞同：-1
> 
> 时间：2012-10-15T12:57:55.150
> 
> 标签：iphone, ios, facebook

我在**第二个视图中有一个名为****loginwith facebook**的按钮。

 **如果我点击那个按钮，我使用的**facebook api应该从互联网上检索图像，并应该在第****5 个视图**中显示它。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:15:26.920

你有很多选择。将图像保存在 nsuserdefaults 中或将其保存在本地将是一个不错的选择。**

# objective-c - 如何在越狱的 iOS 设备上监控应用程序的 API 调用？

> ID：12896146
> 
> 赞同：19
> 
> 时间：2012-10-15T12:58:13.700
> 
> 标签：objective-c, ios, c, jailbreak, cydia

我正在对一个我没有源代码的 iOS 应用程序进行审查。为了更好地控制环境，我在越狱的 iPad 上运行该应用程序。

我希望能够监控应用程序正在进行的 API 调用......理想情况下，我想找到类似 Rohitab 的基于 MS Windows 的[API Monitor](http://www.rohitab.com/apimonitor)的东西，而不是 iOS。

我做了一些研究，发现 KennyTM 的一个名为“ [Subjective-C](http://networkpx.blogspot.com/2009/09/introducing-subjective-c.html) ”的项目似乎可以满足我的需要。实际上，我一直在使用 cycript 脚本以及[Google 代码站点上提供的 libsubjc.dylib](http://code.google.com/p/networkpx/downloads/detail?name=libsubjc.dylib)。

但是，我一直无法弄清楚如何正确地让它开始记录应用程序的调用。这是由Subjective-C (libsubjc)[的作者编写的 cycript 脚本的链接。](http://networkpx.googlecode.com/svn/etc/libsubjc.cy)我也粘贴了下面的脚本。

```
/*

libsubjc.cy ... Use libsubjc in cycript.
Copyright (C) 2009  KennyTM~ <kennytm@gmail.com>

[...GPL3...]
*/

dlopen("libsubjc.dylib", 10);
if (!dlfun) {
    function dlfun(fn, encoding, altname) { var f = new Functor(dlsym(RTLD_DEFAULT, fn), encoding); if (f) this[altname || fn] = f; return f; }
}

dlfun("SubjC_start", "v");
dlfun("SubjC_end", "v");

dlfun("SubjC_set_file", "v^{sFILE=}");
dlfun("SubjC_set_maximum_depth", "vI");
dlfun("SubjC_set_print_arguments", "vB");
dlfun("SubjC_set_print_return_value", "vB");
dlfun("SubjC_set_print_timestamp", "vB");

SubjC_Deny = 0, SubjC_Allow = 1;

dlfun("SubjC_clear_filters", "v");
dlfun("SubjC_filter_method", "vi#:");
dlfun("SubjC_filter_class", "vi#");
dlfun("SubjC_filter_selector", "vi:");
dlfun("SubjC_default_filter_type", "vi");
dlfun("SubjC_filter_class_prefixes", "viI^*");
dlfun("SubjC_filter_class_prefix", "vi*");

dlfun("fopen", "^{sFILE=}**");
dlfun("fclose", "i^{sFILE=}"); 
```

我已经能够加载 libsubjc cycript 脚本，并调用 SubjC_start 函数。但是，如何为以**dlfun("SubjC_set_file", "v^{sFILE=}");开头的行指定输入文件句柄**

有没有人成功使用带有 Subjective-C 库 (libsubjc.dylib) 的“libsubjc.cy”cycript 脚本来监控应用程序的 API 调用？

## 更新

这至少会生成输出文件，但我没有看到输出文件（/tmp/test.txt）中填充的任何信息。

```
cycript -p SpringBoard libsubjc.cy; cycript -p SpringBoard
f = fopen("/tmp/test.txt", "w");

SubjC_set_file(f);
SubjC_set_maximum_depth(15);
SubjC_set_print_arguments(YES);
SubjC_set_print_return_value(YES);
SubjC_set_print_timestamp(YES);
SubjC_default_filter_type(SubjC_Deny);
SubjC_start();
//do stuff
SubjC_end(); 
```

或者，如果有人知道在越狱设备上监控 API 调用（无源代码）的另一种方法，请告诉我！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2020-08-11T07:00:26.640

在您的计算机上设置代理服务器以重定向和跟踪所有 API 调用。这是进入 iOS 网络流量峰值的常用方法，您不需要越狱设备。

# sql-server-2008 - 我可以将变量传递给选择语句作为 SQL Server 中的列名吗

> ID：12896147
> 
> 赞同：26
> 
> 时间：2012-10-15T12:58:15.127
> 
> 标签：sql-server-2008

> **可能重复：**
> [SQL：根据变量选择动态列名](https://stackoverflow.com/questions/5637983/sql-select-dynamic-column-name-based-on-variable)

我有以下简单的`select`陈述：

```
 DECLARE @value varchar(10) 
 SET @value = 'intStep' 

 SELECT @value FROM dbo.tblBatchDetail 
```

我努力了

```
 SELECT CAST(@value AS varchar(10)) FROM dbo.tblBatchDetail 
```

我得到了一份清单`intstep`

**问题**：我可以将变量作为列名传递给该语句吗？或者这样做的最佳方法是什么

我正在使用 SQL Server 2008 (9.0 RTM)

这将是一个存储过程

提前致谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-15T13:04:07.490

不能使用变量名绑定列或其他系统对象，需要动态sql

```
DECLARE @value varchar(10)  
SET @value = 'intStep'  
DECLARE @sqlText nvarchar(1000); 

SET @sqlText = N'SELECT ' + @value + ' FROM dbo.tblBatchDetail'
Exec (@sqlText) 
```

# sharepoint - 更改字段类型会导致该字段从编辑表单中消失

> ID：12896154
> 
> 赞同：1
> 
> 时间：2012-10-15T12:58:31.940
> 
> 标签：sharepoint, sharepoint-2010

我试图从 Elements.xml 文件中更改列表列的类型。该字段的原始类型是 Note，新的是 LookupMulti。但之后该字段不会出现在编辑表单上。当我从库设置中删除该字段然后将其再次添加到列表中时，就像现有列一样，它可以正常工作。

谁能帮我？我做错了什么？很高兴知道这是一个共享点 wiki 站点，并且包含此字段的页面基于内容类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:17:18.853

这是您编辑 element.xml 时的默认设置。我们不能做任何事情来纠正它。

如果您在 Visual Studio 中编辑文件并有列表定义和其他内容，那么我认为这应该不是问题。

但是当您尝试编辑布局文件夹中的文件时，您必须手动重新创建它。正如您在使用 UI 执行相同操作时可能已经注意到的那样，SP 会警告您该字段中的信息丢失并为您删除/添加列

# javascript - JQgrid虚拟滚动不加载新行

> ID：12896155
> 
> 赞同：3
> 
> 时间：2012-10-15T12:58:36.913
> 
> 标签：javascript, jquery, jqgrid, scroll

我正在尝试修改我的 jqgrid 表添加虚拟滚动功能。我找不到问题的原因：我滚动到底部并且没有出现新行。这是我的js代码：

```
$(document).ready(function()
{
    var page;
    $("#visual").click(function()
    {
        $("#list").jqGrid(
        {
            url:'PrendiTutto',
            datatype: "json",
            height: 400,
            width:600,
            colNames:['id','model','cc','nation','prod'],
            colModel:[
                      {name:'id', index:'id', jsonmap:"id", width:25},
                      {name:'model', index:'model', jsonmap:"model", width:50},
                      {name:'cc', index:'cc', jsonmap:"cc", width:25},
                      {name:'nation', index:'nation', jsonmap:"nation", width:50},
                      {name:'prod', index:'prod', jsonmap:"prod", width:50}
                     ],
            rowNum: 40,
            rowTotal: 2000,
            rowList: [20,30,50],
            scrollrows: false,
            hoverrows: false,
            scroll: 10,
            pager: false,
            loadonce: true,
            mtype: 'GET',
            rownumbers: true,
            rownumWidth: 40,
            gridview: true,
            pager: '#pager',
            sortname: 'id',
            viewrecords: true,
            sortorder: "asc",
            caption: "Elenco delle Moto",
            jsonReader: {root: 'rows',page: 'page',total: 'total',records: 'records',repeatitems: false,id: 'id'},
        });
        $("#list").jqGrid('navGrid','#pager',{del:false,add:false,edit:false},{},{},{},{multipleSearch:true});
        $("#visual").fadeOut();
        $("#next").fadeIn();
        $("#add").fadeIn();
        $("#remove").fadeIn();
        page = $("#list").getGridParam("page");
    });
    $("#next").click(function()
        {
            page = $("#list").getGridParam("page");
            total = $("#list").getGridParam("lastpage");
            if(total != page)
                {
                    page ++;
                    $("#list").setGridParam({page:page}).trigger("reloadGrid");
                    $("#prev").fadeIn();
                }
            if((total) <= page)
                $("#next").fadeOut();
        });
    $("#add").click(function()
            {
                row = $("#list").getGridParam("rowNum");
                if(8 > row)
                    {
                        row++;
                        $("#list").setGridParam({rowNum:row}).trigger("reloadGrid");
                    }
            });
    $("#remove").click(function()
            {
                row = $("#list").getGridParam("rowNum");
                if(row > 1)
                    {
                        row--;
                        $("#list").setGridParam({rowNum:row}).trigger("reloadGrid");
                    }
            });
    $("#prev").click(function()
        {
            page = $("#list").getGridParam("page");
            if(page > 1)
                {
                    page --;
                    $("#list").setGridParam({page:page}).trigger("reloadGrid");
                    $("#next").fadeIn();
                }
            if(page <= 1)
                $("#prev").fadeOut();
        });
}); 
```

以及从数据库读取数据的 servlet：

```
public class PrendiTutto extends HttpServlet
{
    private static final long serialVersionUID = 1L;

    public PrendiTutto()
    {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        response.setContentType("text/json");
        MotoBeanManager moma = new MotoBeanManager();
        Collection<MotoBean> m = moma.loadMotos();
        PrintWriter out = response.getWriter();
        int page = Integer.parseInt(request.getParameter("page"));
        int row = Integer.parseInt(request.getParameter("rows"));
        int j = 0, k = 0;
        int pagine = m.size()/row;
        if((m.size()%row) != 0)
        pagine++;
        String json = "{\"total\": \"" + pagine + "\",\"page\":\"" + page + "\",\"records\" :\"" + m.size() + "\", \"rows\":";
        json += "[";
        for(Iterator<MotoBean> i = m.iterator(); i.hasNext(); j++)
        {
            MotoBean moto = i.next();
            if((j < page*row)&&(j >= (page - 1)*row))
            {
                k++;
                json += "{";
                json += "\"id\": \"" + moto.getId() + "\",";
                json += "\"model\": \"" + moto.getModel() + "\",";
                json += "\"cc\": \"" + moto.getCc() + "\",";
                json += "\"nation\": \"" + moto.getNation() + "\",";
                json += "\"prod\": \"" + moto.getProd() + "\"";
                json += "}";
                if((k != row)&&(i.hasNext()))
                    json += ",";
            }
        }   
        json += "]}";
        out.print(json);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        doGet(request,response);
    }

} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T23:03:17.493

你有

```
loadonce: true 
```

那应该是：

```
 loadonce: false 
```

# algorithm - 最大嵌套区间集

> ID：12896156
> 
> 赞同：3
> 
> 时间：2012-10-15T12:58:38.817
> 
> 标签：algorithm, sorting, nested, complexity-theory, intervals

这是一个基于查找最大嵌套间隔集大小的问题。

有许多区间，每个区间由包含起点和终点 (si, ei) 的对定义。如果 i2 完全位于 i1 之内，则两个区间 i1 和 i2 称为嵌套。示例：- (2,6) 和 (3,4) 是嵌套的，因为 (3,4) 是 (2,6) 的一部分。类似地，如果 i2 位于 i1 内，i3 位于 i2 内，则 k 间隔 i1、i2、i3....ik 被称为嵌套，...依此类推。从给定的间隔中确定最大间隔集的大小，以便该集中的所有间隔都可以产生嵌套。

我是这样想的：-让我们举个例子-（0,7）（0,5）（1,21）（1,9）（2,8）（2,4）（3,20）（ 4,16) (5,15) (6,21) 对它进行排序，使得 a[i-1]<=a[i] && b[i-1]>=b[i] 比从第一个开始间隔我们开始一个链表..如果下一个间隔在一个间隔内，我们向下移动节点并遍历沿节点创建的图（主列表除外）..我们将最大级别节点的指针存储在此图中新的区间可以适合哪个..并在链表中进一步遍历以查看当前区间来自谁..最后我们有一个指向我们必须附加当前区间的节点的指针..并比较这个的级别具有我们已经拥有的最大级别的节点.....最大级别的最终值是最大嵌套间隔集的大小..

上述解决方案的复杂性可能是：- O(n(k+l) + nlogn)

我想这样很难得到它，但我别无选择......如果有人有任何其他算法来解决它..请发布，因为我的算法需要更长的时间来实现（涉及很多数据结构）。 .. 谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T05:59:52.660

*[编辑：这里](http://codeforces.com/blog/entry/5541)发布了一些问题的解决方案，包括两个声称是 O(n lg n)。但是，我认为 O(n lg n) 解决方案不起作用。我在该页面上发表了评论，说明了原因。如果有人有 O(n lg n) 解决方案，我很想听听。*

**二次解**

这个问题可以使用动态规划在 O(n^2) 时间内解决：

1.  计算每个区间包含多少个区间（可以用两个嵌套循环来完成）
2.  按包含区间数的升序对区间进行排序
3.  使用递归`MaxNestedIntervals`来解决问题

*注意：步骤 1 可以使用此处的解决方案在 O(n lg n) 时间内完成：[用于计算嵌套间隔的 Sub O(n^2) 算法？](https://stackoverflow.com/questions/12946497/sub-on2-algorithm-for-counting-nested-intervals) 步骤 2 可以使用任何基于比较的最佳排序算法在 O(n lg n) 时间内完成。可能有一种方法可以优化第 3 步，但我还没有找到。

* * *

**复发**

```
MaxNestedIntervals(i) =
    max {j = 0 to i-1} :
        1 + MaxNestedIntervals(j)    if interval i contains interval j
        0                            if interval i doesn't contain interval j 
```

**基本情况**

```
MaxNestedIntervals(i) =
    0    if interval i contains 0 intervals
    1    if interval i contains 1 interval 
```

* * *

**示例代码**

```
import java.util.*;

public class MaxNestedIntervals {
    public static void main(String[] args) {
        Interval[] intervals = new Interval[10];
        intervals[0] = new Interval(0, 7);
        intervals[1] = new Interval(0, 5);
        intervals[2] = new Interval(1, 21);
        intervals[3] = new Interval(1, 9);
        intervals[4] = new Interval(2, 8);
        intervals[5] = new Interval(2, 4);
        intervals[6] = new Interval(3, 20);
        intervals[7] = new Interval(4,16);
        intervals[8] = new Interval(5,15);
        intervals[9] = new Interval(6,21);

        int n = intervals.length;
        AugmentedInterval[] augmentedIntervals = new AugmentedInterval[n];

        for (int i = 0; i < n; i++) {
            augmentedIntervals[i] = new AugmentedInterval(intervals[i]);
        }

        for (int i = 0; i < n; i++) {
            AugmentedInterval outerInterval = augmentedIntervals[i];

            for (int j = 0; j < n; j++) {
                if (i == j) {
                    continue;
                }

                AugmentedInterval innerInterval = augmentedIntervals[j];

                if (outerInterval.contains(innerInterval)) {
                    outerInterval.numContainedIntervals++;

                    if (outerInterval.childInterval == null) {
                        outerInterval.childInterval = innerInterval;
                    }
                }
            }
        }

        Arrays.sort(augmentedIntervals, new Comparator<AugmentedInterval>() {
            public int compare(AugmentedInterval i, AugmentedInterval j) {
                return i.numContainedIntervals - j.numContainedIntervals;
            }
        });

        int maxNestedIntervals = 0;
        AugmentedInterval parentInterval = null;

        for (int i = 0; i < n; i++) {
            AugmentedInterval currentInterval = augmentedIntervals[i];

            if (currentInterval.numContainedIntervals == 0) {
                currentInterval.maxNestedIntervals = 0;
            } else if (currentInterval.numContainedIntervals == 1) {
                currentInterval.maxNestedIntervals = 1;
            } else {
                int maxNestedIntervalsForCurrentInterval = 0;

                for (int j = 0; j < i; j++) {
                    AugmentedInterval candidateNestedInterval = augmentedIntervals[j];
                    int maxNestedIntervalsForCurrentCandidate = candidateNestedInterval.maxNestedIntervals + 1;

                    if (currentInterval.contains(candidateNestedInterval) && maxNestedIntervalsForCurrentCandidate >= maxNestedIntervalsForCurrentInterval) {
                        maxNestedIntervalsForCurrentInterval = maxNestedIntervalsForCurrentCandidate;
                        currentInterval.childInterval = candidateNestedInterval;
                    }
                }

                currentInterval.maxNestedIntervals = maxNestedIntervalsForCurrentInterval;

                if (maxNestedIntervalsForCurrentInterval >= maxNestedIntervals) {
                    maxNestedIntervals = maxNestedIntervalsForCurrentInterval;
                    parentInterval = currentInterval;
                }
            }
        }

        if (n == 0) {
            System.out.println("The largest set of nested intervals is the empty set.");
        } else if (maxNestedIntervals == 0) {
            System.out.println("The largest set of nested intervals has 1 interval.\n");
            System.out.println("That interval is:");
        } else {
            System.out.println("The largest set of nested intervals has " + (maxNestedIntervals + 1) + " intervals.\n");
            System.out.println("Those intervals are:");
        }

        for (AugmentedInterval currentInterval = parentInterval; currentInterval != null; currentInterval = currentInterval.childInterval) {
            System.out.println(currentInterval);
        }

        System.out.println();
    }

    private static class Interval implements Comparable<Interval> {
        public int start = 0;
        public int end = 0;

        public Interval(int start, int end) {
            this.start = start;
            this.end = end;
        }

        public int size() {
            return this.end - this.start;
        }

        public boolean contains(Interval other) {
            return (this.start <= other.start && this.end >= other.end);
        }

        public int compareTo(Interval other) {
            return this.size() - other.size();
        }

        public String toString() {
            return "[" + this.start + ", " + this.end + "]";
        }
    }

    private static class AugmentedInterval extends Interval {
        public int numContainedIntervals = 0;
        public int maxNestedIntervals = 0;
        public AugmentedInterval childInterval = null;

        public AugmentedInterval(Interval interval) {
            super(interval.start, interval.end);
        }
    }
} 
```

# java - 更新 JPA 实体中的所有对象

> ID：12896162
> 
> 赞同：1
> 
> 时间：2012-10-15T12:59:01.063
> 
> 标签：java, google-app-engine, jpa

我正在尝试更新我的所有 4000 个对象，`ProfileEntity`但出现以下异常：

```
javax.persistence.QueryTimeoutException: The datastore operation timed out, or the data was temporarily unavailable. 
```

这是我的代码：

```
public synchronized static void  setX4all() 
{

    em = EMF.get().createEntityManager();

    Query query = em.createQuery("SELECT p FROM ProfileEntity p");
    List<ProfileEntity> usersList = query.getResultList();

    int a,b,x;
    for (ProfileEntity profileEntity : usersList) 
    {
        a = profileEntity.getA();
        b = profileEntity.getB();
        x = func(a,b);
        profileEntity.setX(x);

        em.getTransaction().begin();        
        em.persist(profileEntity);        
        em.getTransaction().commit();

    }

    em.close();

} 
```

我猜我需要很长时间才能从`ProfileEntity`. 我该怎么做？

*   我正在使用 Google App Engine，因此无法进行 UPDATE 查询。

**18/10 编辑**
在这 2 天里，我尝试了：
按照 Thanos Makris 的建议使用后端，但走到了死胡同。[你可以在这里](https://stackoverflow.com/questions/12921874/google-app-engine-backend-servlet-not-responding)看到我的问题。
阅读有关 Map-Reduce 的 DataNucleus 建议，但真的迷路了。

我正在寻找不同的方向。由于我只打算进行一次更新，也许我可以每 200 个左右的对象手动更新一次。
是否可以查询前 200 个对象，然后查询第二个 200 个对象，依此类推？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:09:42.943

鉴于您的情况，我建议运行本机更新查询：

```
 Query query = em.createNativeQuery("update ProfileEntity pe set pe.X = 'x'");
 query.executeUpdate(); 
```

请注意：这里的查询字符串是`SQL`ie`update **table_name** set ....`

这会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:10:50.413

更改更新过程以使用类似[Map-Reduce 的内容](http://code.google.com/p/appengine-mapreduce/)。这意味着一切都在数据存储中完成。唯一的问题是 appengine-mapreduce 尚未完全发布（尽管您可以轻松地自己构建 jar 并在您的 GAE 应用程序中使用它 - 许多其他人已经这样做了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:07:03.107

您的类的行为不太好 - JPA 不适合以这种方式进行批量更新 - 您只是快速启动大量事务并在数据库上产生大量负载。对于您的用例，更好的解决方案是设置所有对象的标量查询，而无需先将它们加载到 JVM 中（取决于您的对象结构和惰性，您将加载更多的数据，如您所想）

请参阅休眠参考： [http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html#batch-direct](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html#batch-direct)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T00:34:06.773

将事务置于循环之外：

```
em.getTransaction().begin();        
for (ProfileEntity profileEntity : usersList) {
...
}
em.getTransaction().commit(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T11:50:38.867

也许您应该考虑使用[Task Queue API](https://developers.google.com/appengine/docs/java/taskqueue/overview)，它可以让您执行长达 10 分钟的任务。如果您想更新任务队列不适合您的大量实体，您还可以考虑使用[Backends](https://developers.google.com/appengine/docs/java/backends/overview)的用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T13:04:30.700

如果您想为所有对象设置（x），最好使用 JPA 实体管理器用户更新语句（即本机 SQL），而不是获取所有对象并一一更新。

# android - Android Admob 不刷新广告 - 重复相同的广告

> ID：12896166
> 
> 赞同：0
> 
> 时间：2012-10-15T12:59:23.000
> 
> 标签：android, admob

我花了 2 天时间分析为什么我的程序总是提供相同的横幅。Admob 大部分时间都返回相同的横幅。它每天更换 3-4 次，然后再重复横幅数百次。在对 Admob 站点选项进行大量实验后 - 我制作了第二个程序，里面有相同的发布者 ID。一切都很好！请求广告的代码相同。相同的发布者 ID。唯一的区别是包名。

由于这个问题，更改包名称不是一个好主意。但我每天可以提供 4-5 个不同的横幅 :( 有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:39:09.903

即使我停止上网 - 我的广告继续显示在屏幕上。sdk 重复缓存在设备某处的最后一个横幅。在 20-30 的广告请求中，我收到一次：“没有广告可以为您服务”或类似的内容。因此，当 Google 没有连接或没有新广告时，Admob 会重复最后的横幅。虚惊一场，花了2天时间解决不存在的问题。

# iphone - Apple“避免将缓存文件写入磁盘。” - 我应该在哪里保存缓存？

> ID：12896173
> 
> 赞同：0
> 
> 时间：2012-10-15T13:00:07.217
> 
> 标签：iphone, ios, xcode, cocoa-touch

在[Apple 的 Performance Tuning Guide](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html)中有这样一段文字：

> 避免将缓存文件写入磁盘。此规则的唯一例外是当您的应用退出时，您需要编写可用于在下次启动时将应用恢复到相同状态的状态信息。

我在 Library/Cache 目录中保存了很多缓存文件，因为我的应用程序处理 Web 服务，没有人喜欢白屏。这个声明是什么意思？我不应该这样做还是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:06:52.033

好吧，“避免”的意思是“尽可能避免，因为写/读相对较慢”。如果通过缓存少量数据（我假设从某个地方检索到的 Web 服务的定义？），您可以提高应用程序*启动*的性能，无论如何都要这样做。如果您仅将此数据用于应用程序的一次运行，并且下一次运行将重新获取此数据，请使用内存缓存。

`Library\Caches`基本上旨在存储您从某处获取的数据，从而在本地存储时提供性能提升。

如果您不需要将数据从应用程序的一次运行持续到另一次运行，那么来自 Apple 的文本更像是防止*过度使用存储的一般指南。*

# java - 文件内容在android java的/data/data/package/files文件夹中被删除

> ID：12896180
> 
> 赞同：1
> 
> 时间：2012-10-15T13:00:33.980
> 
> 标签：java, android

从我的 apk 我将一些内容写入 /data/data/package/files/settings.data 文件，当我重新启动系统文件仍然存在但文件中的内容为空。

有人可以帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:34:30.943

仅当您不关闭 Streams 时才会发生这种情况。并且`../files`目录不能自动删除。

[此链接可能会对您有所帮助。](https://stackoverflow.com/questions/12509762/is-clearing-application-cache-its-deleted-data-data-package-name-files-fil)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:36:07.337

检查您的应用程序是否总是在退出之前关闭文件，即使它由于异常而退出。推荐的 Java 习惯用法是这样的：

```
 OutputStream os = // open it.
  try {
      // write stuff to os
  } finally {
      try {
          os.close();
      } catch (IOException ex) {
          // log error ... file not written completely
      }
  } 
```

# powerbuilder - 将值字符串转换为百分比

> ID：12896183
> 
> 赞同：1
> 
> 时间：2012-10-15T13:00:45.317
> 
> 标签：powerbuilder

使用 powerbuilder 脚本，将字符串“0.5”转换为“50%”的最简单方法是什么？

我尝试先转换为 Double，但 Double("0.5") 返回 0..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:01:59.097

`.`除了or之外，您有任何特定的小数分隔符`,`吗？

在 PB 中，从字符串值到另一种类型的转换使用区域设置。转换日期或时间等其他类型也会出现同样的问题。

谨防双（或浮点）类型：除科学计算外的浮点是一条痛苦的道路。首选十进制类型。

在这里（用逗号作为小数分隔符）以下代码似乎可以满足您的需求：

```
dec value

value = dec("0,5")
value *= 100
value = int(value) //intermediate cast to integer to remove the decimal part

messagebox("percent", string(value)+"%") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:10:12.810

你试过 Double("0,5") insteed 吗？这可能是一个地区性错误。

# c# - 如何一次删除多个 XML 节点？

> ID：12896184
> 
> 赞同：2
> 
> 时间：2012-10-15T13:00:49.153
> 
> 标签：c#, xml

我可以使用删除 xml 节点

```
 XmlNode node = newsItem.SelectSingleNode("XYZ");
 node.ParentNode.RemoveChild(node); 
```

但是，例如，如果我想一次删除多个节点`XYZ,ABC,PQR`怎么办？

有没有办法一次删除所有这些节点，还是我必须一个一个地删除它们？

**注意：** `XYZ,ABC,PQR`处于同一级别（即他们都有相同的父级）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:06:22.830

使用 API 时没有内置任何内容`XmlDocument`，但您可以编写实用程序扩展方法，例如：

```
public static void Remove(this XmlNode node, string xpath)
{
    var nodes = node.SelectNodes(xpath);
    foreach (XmlNode match in nodes)
    {
        match.ParentNode.RemoveChild(match);
    }
} 
```

然后调用：

```
newsItem.Remove("XYZ|ABC|PQR"); 
```

如果您可以更改为`XDocument`API，那么情况可能会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:05:51.843

认为您可以使用 linq to xml 执行类似的操作。

```
var listOfNodesToRemove = new[]{"XYZ", "ABC", "PQR"};

var document = XDocument.Load(<pathtoyourfile>);
document.Descendants
        .Where(m => listOfNodesToRemove.Contains(m.Name.ToString())
        .Nodes()
        .Remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:04:14.487

这在很大程度上取决于结构（嵌套）等。

但基本上是的，对于少数不相关的元素，一次选择并删除它们。

您可以在某种程度上将它们结合起来：

```
List<string> RemoveNames = ...
var toBeRemoved = doc.Descendants().Where(d => RemoveNames.Contains(d.name));
foreach (var element in toBeRemoved.ToList()) ... 
```

# objective-c - Grand Central Dispatch 延迟执行设计模式

> ID：12896191
> 
> 赞同：0
> 
> 时间：2012-10-15T13:01:38.607
> 
> 标签：objective-c, macos, cocoa, design-patterns, grand-central-dispatch

我正在编写一个带有插件系统的应用程序。插件必须在主线程上工作（这不是问题的一部分，我不是在寻找一堆说我应该删除这个要求的答案）。

插件异步初始化，因此 UI 在启动时不会挂起几秒钟，但其他代码会在启动后立即开始与插件交互。这显然需要延迟到插件完成加载。

这是我到目前为止所得到的......

```
// Create operation queue
dispatch_queue_t queue = dispatch_queue_create(...);
dispatch_suspend(queue);

// Load the plugins
dispatch_group_t group = dispatch_group_create();
for each plugin {
    dispatch_group_async(group, dispatch_get_main_queue(), ^{
        load...
    });
}
dispatch_group_notify(group, dispatch_get_main_queue(), ^{
    dispatch_resume(queue);
});

// Add operations that interact with the plugins
dispatch_async(queue, ^{
    dispatch_async(dispatch_get_main_queue(), ^{
        operation...
    });
}); 
```

这意味着在插件完成加载之前提交的任何操作都不会开始，但是，任何新操作在实际处理之前都将经过两个队列。这是一个很大的开销吗？是否值得一开始就排队，然后在准备好一个不需要排队的方法实现时换掉方法实现？这将更加棘手，我不知道这是否值得。

最后，对于这类问题是否有更好的设计模式？也许我应该使用具有依赖关系的 NSOperations 和 NSOperationQueues？或者他们会比基本的 GCD 操作有更高的开销吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:54:09.550

“双重开销”实际上非常低，但是您可以使用一种更好的设计模式，它也更直观。创建您的操作队列，然后使用`dispatch_set_target_queue(queue, dispatch_get_main_queue())`它使其本质上是主队列的子队列。这将确保它在主线程上执行，而不需要您进行交叉提交——您只需将插件操作直接提交到操作队列。

# java - 从 Swing GUI 编译和运行 Java 代码

> ID：12896193
> 
> 赞同：3
> 
> 时间：2012-10-15T13:01:46.223
> 
> 标签：java, swing, user-interface, executable-jar

我正在用 Java (Swing) 构建一个 GUI，我必须从中执行 Java 代码。为了测试简单的代码，比如用 Java 打印 HelloWorld 就可以了。

我看过论坛的问题，我只知道我必须调用操作系统（我使用的是 Windows7）来执行该编译任务。

谢谢你。

PS：我尝试过 Runtime.getRuntime().exec() 命令，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:05:13.787

您可能想查看编译代码部分的[java 编译器 api](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)，runtime.exec() 应该使用正确的命令来启动应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:09:48.363

如果您使用的是 IDE，则不需要调用这些命令。

编译：

*   javac HelloWorldSwing.java

跑：

*   java HelloWorldSwing

……

如果你想使用 Runtime.getRuntime().exec()。下面是一个使用 Runtime.getRuntime().exec() 的例子。

```
import java.io.*;  
public class TestExec {  
    public static void main(String[] args) {  
        try {  
            Process p = Runtime.getRuntime().exec("cmd /C dir");  
            BufferedReader in = new BufferedReader(  
                                new InputStreamReader(p.getInputStream()));  
            String line = null;  
            while ((line = in.readLine()) != null) {  
                System.out.println(line);  
            }  
        } catch (IOException e) {  
            e.printStackTrace();  
        }  
    }  
} 
```

“这只是运行 dir 命令，捕获其输出并将其复制到程序 stdout。不是很令人兴奋，但它显示了使用 Runtime.exec() 的基本部分。您还可以打开进程的输出和错误流。“

所以你可以使用 Runtime.getRuntime().exec() 发送命令，你可以使用我上面写的 javac 或 java 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:07:24.957

要进行编译，您需要安装包含 Java 编译器的 JDK `javac`。您可以通过 Runtime.getRuntime().exec() 调用 javac 来编译 Java 源代码，然后加载它。

或者，您可以使用 Java 编译器 API。可以通过以下方式检索主编译器 API [`javax.tools.ToolProvider.getSystemJavaCompiler();`](http://docs.oracle.com/javase/7/docs/api/javax/tools/ToolProvider.html#getSystemJavaCompiler%28%29)

另请参阅这篇文章：[Java 6.0 编译器 API](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:46:15.367

[在SSCCE 基于文本的编译器 (STBC)](http://pscode.org/stbc/)中有一个使用`JavaCompiler`API 的示例。请务必阅读与在运行时类路径上获取 a 相关的页面。`tools.jar`

STBC 是[开源](http://pscode.org/stbc/stbc.zip)的。

# android - 使用清除按钮清除多个 EditText 字段

> ID：12896202
> 
> 赞同：0
> 
> 时间：2012-10-15T13:02:13.453
> 
> 标签：android, android-layout, android-intent

我已经查看了有关此问题的其他问题，但解决方案对我不起作用。我在页面上有许多编辑文本字段，并且希望能够通过一键重置它们。我从[这个线程](https://stackoverflow.com/questions/5740708/android-clearing-all-edittext-fields-with-clear-button)实现了解决方案，但我有嵌套的线性布局，它只清除作为主容器的直接子级的 edittext。我怎样才能找到所有的edittext字段，或者我必须引用每个字段？

我的xml文件结构如下：

```
<ScrollView>
    <LinearLayout android:id="@+id/MainParent">
        <LinearLayout>
            TextView
            EditText
        </LinearLayout>
        <LinearLayout>
            TextView
            EditText
        </LinearLayout>
        <LinearLayout>
            TextView
            EditText
        </LinearLayout>
        EditText
        <LinearLayout>
            Button1
            Button2
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

Java文件的片段：

```
ViewGroup group = (ViewGroup)findViewById(R.id.MainParent);
       for (int i = 0, count = group.getChildCount(); i < count; ++i) {
           View view = group.getChildAt(i);
               if (view instanceof EditText) {
                   ((EditText)view).setText("");
       } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:36:28.537

如果您对具体引用每个 EditText 不感兴趣，我会创建一个递归函数来处理层次结构。

```
public void clearAll(ViewGroup root) {
    for (int i = 0, j = root.getChildCount(); i < j, i++) {
        View view = root.getChildAt(i);
        if (view instanceof ViewGroup) {
            clearAll((ViewGroup) view);
            continue;
        }
        if (view instanceof EditText) {
            ((EditText) view).setText("");
            continue;
        }
    }
} 
```

然后你只需调用：

```
clearAll((ViewGroup) findViewById(R.id.MainParent)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:09:35.057

在任何操作的 onClick 之后执行以下步骤：

```
EditText firstEditText = (EditText) findViewById(R.id.yoursXmlId);
firstEditText.setText(""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:16:57.237

```
LinearLayout group = (LinearLayout)findViewById(R.id.MainParent);
       for (int i = 0, count = group.getChildCount(); i < count; ++i)
         {
           View view = group.getChildAt(i);
               if (view instanceof EditText) {
                   ((EditText)view).setText("");
       } 
```

# .net - 遍历 GridViewColumn 中的组合框

> ID：12896209
> 
> 赞同：0
> 
> 时间：2012-10-15T13:02:48.750
> 
> 标签：.net, wpf, combobox

编辑：发布后我意识到我在装订中犯了一个简单的错误。解决了。

我有一个由以下 XAML 定义的 GridViewColumn：

```
...
               <GridViewColumn Width="120">
                  <GridViewColumn.CellTemplate>
                     <DataTemplate>
                        <ComboBox ItemsSource="{Binding Path=extensions, RelativeSource={RelativeSource AncestorType=Window}}"
                                  Width="105" IsEditable="True" HorizontalAlignment="Center" Margin="0,0,0,0" BorderThickness="0"
                                  SelectedItem="{Binding Path=selectedExtension, Mode=TwoWay}">
                           <ComboBox.Resources>
                              <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">15</sys:Double>
                           </ComboBox.Resources>
                        </ComboBox>
                     </DataTemplate>
                  </GridViewColumn.CellTemplate>
               </GridViewColumn>
... 
```

无论如何，使 SelectedItem 绑定功能正常是行不通的。是否可以遍历 ComboBoxes 并手动设置 SelectedItem？

# spring - Heroku 与 H2 数据库

> ID：12896210
> 
> 赞同：8
> 
> 时间：2012-10-15T13:02:48.777
> 
> 标签：spring, heroku, h2, spring-social

这与在 Heroku 上运行 Craig Walls Spring Social Showcase 有关。此应用程序使用内存数据库中的 H2 在本地运行良好。但是，当我部署到 Heroku 时，数据库不再工作。是否需要在 Heroku 服务器上配置其他内容才能运行内存数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-28T17:31:23.373

据我所知，Heroku 服务器上没有 H2 支持。因此，您不能将 H2 用作内存数据库。

您可以[在此处获取支持的数据库列表](https://addons.heroku.com/#data-stores)

我建议您使用 Postgres 作为数据库。[这](https://devcenter.heroku.com/articles/getting-started-with-java#introduction)是一个很好的起点。

# java - 如何使用java创建docx文件？

> ID：12896212
> 
> 赞同：5
> 
> 时间：2012-10-15T13:03:08.233
> 
> 标签：java, file, docx

我正在尝试使用 java 创建一个 .docx 文件，但由于某种原因我无法打开该文件。错误来自“文件内容问题”。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T13:25:05.190

尝试了多个库

这个是免费的。 [http://www.docx4java.org/trac/docx4j](http://www.docx4java.org/trac/docx4j)

还要检查 aspose（不是免费的） [http://www.aspose.com/categories/java-components/aspose.total-for-java/default.aspx](http://www.aspose.com/categories/java-components/aspose.total-for-java/default.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T13:07:20.423

您可以使用[http://poi.apache.org/](http://poi.apache.org/)创建此类文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T13:18:58.593

Microsoft Word 的 docx 文件是包含特定内容的 zip 文件。简单地在 Java 中创建一个文件并向其中写入一些文本不会创建 Word 可以识别的有效 docx 文件，即使您给它一个 .docx 扩展名。

要从 Java 创建它们，您可以使用[Apache POI XWPF 库](http://poi.apache.org/hwpf/index.html)。这将为您提供一些 Java 类，它们将创建内容并将其写入可与 Word 一起使用的 docx 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T05:18:33.467

听起来您正在生成损坏的文档。如果它确实是 DOCX 格式，则使用 ZIP 工具打开它并检查 XML 文件的上下文 - 您很可能只是生成了无效的 XML，因此使用浏览器或 XML 编辑器查看它会对您有所帮助。

您可能需要说明您是如何生成 DOCX 文件的，以便人们可以提出更好的建议。

如果您正在寻找更多选择，我会查看[docx4j](http://www.docx4java.org/trac/docx4j)和[Docmosis](http://www.docmosis.com)。请注意，我为创建 Docmosis 的公司工作。

# android-emulator - 未创建数据库文件夹

> ID：12896213
> 
> 赞同：1
> 
> 时间：2012-10-15T13:03:12.747
> 
> 标签：android-emulator

我创建了只有可读数据库的应用程序。早些时候他们运行良好。但现在他们给出了错误。该**错误**是由于**数据库**文件夹。在从**Assets**文件夹、**数据库文件夹中****复制**应用程序中的数据库时，它没有被创建吗？直到我的包文件夹被创建。

 ****“/data/data/com.example.test/**数据库**/”

那么该怎么做呢？如何在我的包中创建数据库文件夹？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:52:37.567

清理您的项目并重新启动 Eclipse。那么问题就解决了。****

# php - PHP - 启动会话后缺少会话文件

> ID：12896214
> 
> 赞同：0
> 
> 时间：2012-10-15T13:03:11.713
> 
> 标签：php, session

我使用[session_start](http://php.net/manual/en/function.session-start.php) () 开始一个会话，我可以将数据保存在`$_SESSION`. 当我尝试从会话中检索数据时，在回帖中，`$_SESSION`数据为 NULL。我正在发布会话 id，然后调用[session_id](http://www.php.net/manual/en/function.session-id.php) (passsedSessionID)，然后调用，`session_start()`但是该会话中的数据已经消失。假设要写入[session_save_path](http://php.net/manual/en/function.session-save-path.php)的会话文件不存在。

我猜这与未写入会话文件有关。

**更新**发现了问题。我没有授予 php 进程对存储会话数据的目录的写入权限。：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:19:36.907

只要`$_SESSION`全局变量只返回**当前用户**会话的数据，就不需要`session_id`每次都传递。正如@Brian 在评论中提到的那样，不要忘记确保它`session_start()`位于代码的顶部，然后不要关心会话标识。

好的，我希望这对你有意义。在不同的浏览器中尝试此代码并刷新页面几次：

```
<?php
session_start();
echo session_id();
?> 
```

这将返回会话 ID，并且在不同的浏览器中它们会有所不同，但在页面刷新后它们将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:07:44.537

我猜你正在以`session` 不同的方式解释用法。您只需要`session_start()`在每个页面的开头调用，这将同步页面之间的数据。

### page1.php

```
session_start()
-- store some session data
-- Some form with action page2.php
-- Submit button 
```

### page2.php

```
session_start()
-- fetch the session data
-- fetch the form data 
```

请看一下这个[coredogs 教程](http://coredogs.com/lesson/php-sessions)。

希望这可以帮助

# tomcat - 当 Webapp 在不同的服务器上运行时，Solr 结果会有所不同。编码问题？

> ID：12896217
> 
> 赞同：0
> 
> 时间：2012-10-15T13:03:15.813
> 
> 标签：tomcat, jsf-2, encoding, utf-8, solr

我有以下情况：

我刚刚将我开发的 web 应用程序移动到我们的生产服务器上，看起来，当我执行搜索时，搜索结果与我在开发服务器上获得的结果不同，尽管我将完全相同的请求发送到完全相同的 SOLR 服务器。我不知道如何描述这一点，我只是注意到，在结果文本上，特殊字符没有正确显示。我的页面文本中到处都出现了德语变音符号等，并且一切正常，除了我从 SOLR 返回的 JSON 对象中读取的那些。在我的开发服务器上，这些也可以正常工作，因此问题显然似乎是生产服务器之一。

由于我不知道从哪里开始寻找，我没有包含任何代码/配置文件，但我会很高兴地提供一切有用的东西。

提前感谢您提供的任何提示。干杯!

细节：

*   两种环境中的 Tomcat 7
*   JSF 2.0/春天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:14:55.007

查看两台服务器的`$TOMCAT_HOME/conf/server.xml`文件并检查它们在这一行中是否不同：

```
<Connector port="8080" ... URIEncoding="UTF-8" /> 
```

# symfony - Symfony 2.1 验证器看不到 mime-type

> ID：12896222
> 
> 赞同：3
> 
> 时间：2012-10-15T13:03:47.343
> 
> 标签：symfony, symfony-forms

我正在使用 Symfony 2.1 将图像添加到默认的 fosUserBundle 用户实体。在我的实体之上，我有这个：

```
use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\HttpFoundation\File\UploadedFile;

/**
* @ORM\Entity
* @ORM\HasLifecycleCallbacks
* @ORM\Table(name="users")
*/
class User extends BaseUser 
```

接下来是相关字段：

```
/**
* @ORM\Column(nullable=true)
* @Assert\File(maxSize="5M", mimeTypes={"image/gif", "image/jpeg", "image/png"})
*/
protected $promo; 
```

我得到的错误是`The mime type of the file is invalid (""). Allowed mime types are "image/gif", "image/jpeg", "image/png".`.

奇怪的是，当我 var_dump`$this->promo->getClientMimeType()`我巧妙地得到`image/jpeg`......所以由于某种原因验证器正在寻找错误的位置？

有谁知道可能导致这种情况的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:38:50.603

事实证明，`php_fileinfo`在你的 php.ini 中安装扩展是至关重要的。`guessExtion()`没有它，验证器可以在使用来自 的方法时验证您的文件`uploadedFile`。

这解决了我的问题。但是，在共享主机上，这可能会导致麻烦，因为您可能无法启用 php_fileinfo。

# javascript - 处理文件时动态显示多个 JSON 响应

> ID：12896224
> 
> 赞同：1
> 
> 时间：2012-10-15T13:04:05.587
> 
> 标签：javascript, php, json, dom-events

让我试着解释一下我的问题：

我正在尝试上传一个包含 10k+ 行的 scv 文件。无论如何，在这些行中可能会发生一些错误。

是否有可能为在文件仍在处理以导入数据库时​​发生的每个错误返回 JSON？

//编辑
好的，这是我的阅读代码

```
 if (($handle = fopen('main_class/kur/'.$fileName, "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 30000, ";")) !== FALSE) {
        $row++;

        foreach ($data AS $columns=>$val){
            $data[$check->numberToColumnName($columns+1)]=$val;
            unset($data[$columns]);
        }

        $FormtedData = $check->FormatAllData($data);

        foreach ($FormtedData['vars'] AS $key=>$value){
            $column_type = $check->CheckType($value,$key);     

            switch ($column_type){
                case 'int' : $type=' int(11) unsigned NOT NULL ';
                    break;
                case 'float' : $type=' FLOAT NOT NULL ';
                    break;
                case 'TEXT' : $type=' TEXT NOT NULL ';
                    break;
                case 'varchar' : $type=' VARCHAR( 255 ) NOT NULL ';
                    break;

                default : ' int(11) unsigned NOT NULL ';
            }
            if ($row<3){
                $check->addColumnIfItDoesNotExist($key,$type); 
            }

            if ($column_type=='TEXT'){
                $PreviousType = $check->SingleColumnType($key);
                if ($PreviousType=='varchar(255)'){
                    $check->ChangeCoolumnType($key,$type);
                }    
            }                
        }

        $check->InsertValue($FormtedData['vars']);

        /*
        //$num = count($data);

        //echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;

        for ($c=0; $c < $num; $c++) {
        //echo $data[$c] . "<br />\n";
        }*/

        $column++;

        if ($check->numberToColumnName($num+1)==$column){
            $column='A';
        }

        //end of while for each row    
    }
    fclose($handle);
    //end of open
} 
```

这是我的上传者：

```
function createUploader(){
    var uploader = new qq.FileUploader({
        element: document.getElementById('file-uploader-demo1'),
        action: '?func=FileUpload',
        debug: false,
        onProgress : function(a,b,c,d,e,f){
            // dunno what is this :D    
        },
        onComplete : function (a,b,json){
            $.each(eval(json), function(i, item) {
                console.log(i,'---',item,'<-');
            });
        },
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:22:05.250

如果您不关心 IE < 9 的兼容性，您可以使用 JavaScript FileReader API。

[http://www.w3.org/TR/FileAPI/#FileReader-interface](http://www.w3.org/TR/FileAPI/#FileReader-interface)

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

您将使用 JavaScript 读取选定的上传 csv 文件，并将每个 Ajax 请求发送 1 行到 PHP 脚本。PHP 将处理该行并返回成功或您的错误消息。

# mysql - 如何从两个不同的表中获取两个不同的列值反过来一个值表依赖于另一个表值

> ID：12896226
> 
> 赞同：1
> 
> 时间：2012-10-15T13:04:11.713
> 
> 标签：mysql

以下查询是我以前使用的查询...但我想将这两个查询结合起来以提高性能

```
select a, b, c
  from table1
 where d LIKE 'xxx'
   and f like 'yyyy'
 order by b desc; 
```

我正在执行上述查询并读取值。

对于上面查询中的每个 b 值，再次在循环中执行下面的查询。

```
select count(*) 
  from table2 where b=? AND js_email_id IN 
(
  select js_email_id 
    from js_initialsignup 
   where UCase(jsaccountstatus) LIKE UCase('live') 
     AND UCase(js_status) LIKEUCase('accepted')
) 
```

如何结合两个查询并一次获取计数和值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:09:37.613

试试这个：

```
SELECT t1.a, t1.b, t1.c, COUNT(t2.*) 
FROM table1 t1
INNER JOIN table2 t2 ON t1.b = t2.b
INNER JOIN js_initialsignup j ON t2.js_email_id  = j.js_email_id 
WHERE t1.d LIKE 'xxx' 
  AND t1.f like 'yyyy'
  AND UCase(j.jsaccountstatus) LIKE UCase('live') 
  AND UCase(j.js_status) LIKE UCase('accepted'))" 
GROUP BY t1.a, t1.b, t1.c
ORDER BY by t1.b DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:09:49.117

```
select a,b,c,
       (select count(*) 
from table2 where b=a.b AND js_email_id IN 
(
  select js_email_id 
  from js_initialsignup 
  where UCase(jsaccountstatus) LIKE UCase('live') 
    AND UCase(js_status) LIKEUCase('accepted')
)) as cnt

from table1 a 
```

# url - 带有 div ID 通配符的 href URL

> ID：12896229
> 
> 赞同：1
> 
> 时间：2012-10-15T13:04:26.310
> 
> 标签：url, html, anchor, href, wildcard

当只有部分 ID 已知时，有没有办法打开页面并跳转到 div ID？

```
eg: http://wp-site.com/webpage.php#div-id-name-xxxx 
```

其中“xxxx”是一组在页面加载之前不可能知道的数字。

我正在使用一个简码，它在 div 中生成一个页面元素，其中 ID 的开头是标准的（例如：tabs-bottom、contact-form 等），然后是每次页面加载时随机生成的唯一编号。

我希望能够从另一个页面链接到该页面上的 div，但是由于部分 ID 是动态的，所以我在这样做时遇到了麻烦。我认为在 URL 中传递通配符可能是要走的路...

有任何想法吗？

**ps：如果有帮助，这些页面是基于 Wordpress 的网站的一部分。**

# wolfram-mathematica - Mathematica：重新定义乘法，使 0*(-Inf) = 0

> ID：12896231
> 
> 赞同：2
> 
> 时间：2012-10-15T13:04:28.397
> 
> 标签：wolfram-mathematica, undefined, logarithm, infinity, entropy

在我的 Mathematica 程序中，我做了一些熵计算，我想使用这个约定：`Log[0]*0 = 0.`有没有一种干净的方法可以做到这一点，或者我必须编写自己的函数？

受[http://tinyurl.com/9d8r4rt](http://tinyurl.com/9d8r4rt)的启发，我尝试了这样的事情：

```
Unprotect[Times];
Times[0,  -Infinity] := 0;
Protect[Times]; 
```

但这似乎不适用于我的情况。有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:32:31.650

我支持上述高性能标志的声明。然而，这是一个有趣的问题，因为答案很重要。

你需要：

```
Unprotect[DirectedInfinity];

DirectedInfinity /: Log[0] 0 := 0 
```

你需要`DirectedInfinity`因为：

```
Log[0] // FullForm 
```

> ```
> DirectedInfinity[-1] 
> ```

并且您需要使用 , 制作的 UpValue`TagSet`来覆盖对 的默认反应`-∞ * 0`，因为在其他定义之前尝试了 UpValues。

# ios - 找不到 ScriptingBridge.framework

> ID：12896234
> 
> 赞同：0
> 
> 时间：2012-10-15T13:04:35.427
> 
> 标签：ios, xcode, scripting-bridge

我是 Objective-C 的新手。

在过去的 2 个月里，我编写了我的第一个应用程序。我现在正在尝试访问**iTunes 信息**，编码似乎很简单，但我找不到`ScriptingBridge.framework`.

我正在使用 Xcode 4.5。我曾尝试在构建阶段的“将二进制文件与库链接”部分中使用“+”按钮，`ScriptingBridge.framework`但未出现在列表中。我尝试在 Finder 中打开框架目录，但没有成功。我找不到独立于安装 Xcode 下载文件的方法。

我已经尝试卸载并重新安装 Xcode。有什么建议么？

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:17:32.363

`ScriptingBridge.framework`不适用于 Cocoa Touch。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:22:37.110

我认为您不能将 scriptingBridge 框架与 iOS 项目一起使用。您只能将它与可可应用程序项目一起使用。在可可应用程序项目中，您可以在下添加框架

> 目标 -> 构建阶段 -> 将二进制文件与库链接 -> +

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html)

# haskell - 如何为 Criterion 基准创建数据？

> ID：12896235
> 
> 赞同：10
> 
> 时间：2012-10-15T13:05:08.557
> 
> 标签：haskell, criterion

我正在使用[标准](http://hackage.haskell.org/package/criterion)来对我的 Haskell 代码进行基准测试。我正在做一些需要随机数据的繁重计算。我已经像这样编写了我的主要基准文件：

```
main :: IO ()
main = newStdGen >>= defaultMain . benchmarks

benchmarks :: RandomGen g => g -> [Benchmark]
benchmarks gen =
   [
     bgroup "Group"
     [
       bench "MyFun" $ nf benchFun (dataFun gen)
     ]
   ] 
```

我将基准和数据生成器保存在不同的模块中：

```
benchFun :: ([Double], [Double]) -> [Double]
benchFun (ls, sig) = fun ls sig

dataFun :: RandomGen g => g -> ([Double], [Double])
dataFun gen = (take 5 $ randoms gen, take 1024 $ randoms gen) 
```

这行得通，但我有两个担忧。首先，生成随机数据所需的时间是否包含在基准测试中？我发现[了一个涉及该主题的问题，](https://stackoverflow.com/questions/6637968/how-to-use-criterion-to-measure-performance-of-haskell-programs)但老实说，我无法将其应用于我的代码。为了检查这是否发生，我编写了一个包含在 IO monad 中的数据生成器的替代版本。我将基准列表放在 main 中，称为生成器，用 <- 提取结果，然后将其传递给基准函数。我没有看到性能上的差异。

我的第二个问题与生成随机数据有关。现在生成器一旦创建就不会更新，这会导致在一次运行中生成相同的数据。这不是一个主要问题，但是如果能正确地完成它会很好。是否有一种巧妙的方法可以在每个 data* 函数中生成不同的随机数据？“整洁”的意思是“不让数据函数在 IO 内获取 StdGen”？

编辑：正如下面评论中所述，我并不真正关心数据随机性。对我来说重要的是生成数据所需的时间不包含在基准测试中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T13:37:37.350

> 这行得通，但我有两个担忧。首先，生成随机数据所需的时间是否包含在基准测试中？

是的。所有的随机生成都应该是惰性发生的。

> 为了检查这是否发生，我编写了一个包含在 IO monad 中的数据生成器的替代版本。我将基准列表放在 main 中，称为生成器，用 <- 提取结果，然后将其传递给基准函数。我没有看到性能上的差异。

这是预期的（如果我明白你的意思）；`randoms gen`在需要它们之前（即在您的基准循环中），不会生成随机值。

> 是否有一种巧妙的方法可以在每个 data* 函数中生成不同的随机数据？“整洁”的意思是“不让数据函数在 IO 内获取 StdGen”？

您需要使用您提供的整数种子，`IO`或者使用.`StdGen``mkStdGen`

关于。您应该如何从基准测试中获取 pRNG 的主要问题，您应该能够在您的东西*之前*完全评估随机输入，例如：`defaultMain (benchmarks g)``evaluate``force`

```
import Control.DeepSeq(force)
import Control.Exception(evaluate)
myBench g = do randInputEvaled <- evaluate $ force $ dataFun g
               defaultMain [
                    bench "MyFun" $ nf benchFun randInputEvaled
                    ... 
```

where`force`将其参数评估为正常形式，但这仍然会延迟发生。因此，为了在外部对其进行评估，`bench`我们使用`evaluate`了单子排序。`seq`如果您想避免导入，您还可以执行诸如调用元组中每个列表的尾部等操作。

这种事情应该可以正常工作，除非您需要在内存中保存大量测试数据。

**编辑**：如果您想从 IO 获取数据，例如从磁盘读取数据，并且不希望将其混入您的基准测试中，则此方法也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:11:36.633

您可以尝试从磁盘文件中读取随机数据。（事实上​​，如果你在一些类 Unix 操作系统上，你甚至可以使用`/dev/urandom`.）

但是，根据您需要多少数据，I/O 时间可能会使计算时间相形见绌。这取决于您需要多少随机数据。

（例如，如果您的基准测试读取随机数并计算它们的总和，那么它将受到 I/O 限制。如果您的基准测试读取一个随机数并仅基于该数字进行一些巨大的计算，那么 I/O 几乎不会增加任何开销。）

# c - x86 中 C math.h 和 string.h 的代价模型

> ID：12896238
> 
> 赞同：0
> 
> 时间：2012-10-15T13:05:28.290
> 
> 标签：c

是否有 C 操作的成本模型？我正在寻找类似的东西，[但](http://scripts.mit.edu/~6.006/fall08/wiki/index.php?title=Python_Cost_Model)对于 C`math.h`和`string.h`x86？有关于他的学术论文，请参见[此处](http://hal.inria.fr/hal-00702665)，但与我指向的页面中的内容不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:09:30.463

在 C 中，基本上所有不是函数调用的东西都只能有固定数量的 CPU 操作。这是因为 C 只有整数内置类型。

与 C++ 不同，不能有隐藏的（如非显而易见的）函数调用，即没有构造函数、析构函数或运算符重载。

**编辑**

* * *

正如@cHao 和@nneonneo 指出的那样，有一个例外，如果平台不支持浮点，甚至不支持整数除法，这些可能会触发编译器提供的库函数的隐藏执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:08:35.237

不，C 没有这样的东西。C 操作的“成本模型”*完全*取决于编译器、CPU、操作系统等。有些可能没有列出操作；有些人可能需要做额外的工作来转换整数、乘法/除法等。

# spring - 如何使用 SpEL 在 @PostAuthorize 中访问模型内 的对象

> ID：12896240
> 
> 赞同：1
> 
> 时间：2012-10-15T13:05:34.240
> 
> 标签：spring, spring-mvc, spring-security, spring-el, spelevaluationexception

我创建这个方法只是为了解释这个场景。我想评估模型对象内的用户域对象。

我知道我可以评估返回对象和方法参数。但是当我尝试使用模型对象时出现以下错误，**不能在 PostAuthorize / PreAuthorize 中使用模型对象吗？**

### 错误

*[请求处理失败；嵌套异常是 java.lang.IllegalArgumentException: 无法评估表达式 '#model.user.userName != 'ramesh''] 根本原因 org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 7): Field or property在“org.springframework.validation.support.BindingAwareModelMap”类型的对象上找不到“用户”*

### 代码

```
@PostAuthorize("#model.user.userName != 'ramesh'")
@RequestMapping(value="/createusername", method = RequestMethod.GET)
public String getCreateUserNamePage(ModelMap model) {
    User user = new User();
    String username = SecurityContextHolder.getContext().getAuthentication().getName();
    if(username!=null)
        user = customUserDetailsService.getUserByUsername(username);
    else
        user.setUserName(username);
    model.put("user", user);
    return "createusername";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:15:40.850

您的模型对象没有名为“用户”的属性，而是您像这样访问它`model.put("user", user)`：看来您的模型（ModelMap）是某种类型的地图。

**它会延长`java.util.Map`吗？**
如果是这样，您可以像这样使用拼写映射语法：`#model[user].username`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-12T16:54:12.267

两者都有效：

```
@PostAuthorize("#model[user].userName != 'ramesh'")    
 or     
@PostAuthorize("#model.asMap().get('user').getUserName() != 'ramesh'") 

public String getSomething(Model model) {
    User user = new User();        
    (...)

    model.put("user", user);
    return "view/page";
} 
```

# asp.net-mvc-3 - 如何在 MVC3 的 ActionResult 中添加多个下拉列表

> ID：12896244
> 
> 赞同：0
> 
> 时间：2012-10-15T13:05:54.567
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor

我想添加另一个下拉列表。下面的代码适用于一个下拉列表，但我如何为类别添加一个？

```
public  ActionResult Create()
        {
            var ddl = new Users();
            ddl.DropDowns = userRepository.Getddl("Departments").Select(c => new SelectListItem
                                                                    {
                                                                        Value = c.DropdownID.ToString(),
                                                                        Text = c.DropdownText
                                                                    });

            ViewData["ListofProfiles"] = new SelectList(ListofProfiles, "Value", "Text");

            return View(ddl);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:14:24.127

尽量避免使用这种`ViewData`方法。切换到强类型的方法。将另一个属性添加到您的视图模型以携带更多下拉项

```
public class User
{
  public int SelectedCountry { set;get;}
  public int SelectedProfile { set;get;}
  public List<SelectListItem> Countries  {set;get;}
  public List<SelectListItem> Profiles {set;get;}

  public User()
  {
     Countries =new List<SelectListItem>(); 
     Profiles =new List<SelectListItem>(); 
  }
} 
```

`GET`现在在您的操作中设置集合

```
public ActionResult Create()
{
  var vm=new User();
  vm.Countries=GetCountryItems();
  vm.Profiles=GetProfileItems();  
  return View(vm);
} 
```

Where`GetCountryItems`和`GetProfileItems`are 2 方法从 db 返回国家和配置文件的 SelectListItem 对象列表。

***不要让你的控制器发胖。只要保持简单和干净。将您从存储库中获取数据的代码移到不同的层。易于阅读和维护:)***

在你的强类型视图中，

```
@mode User
@using(Html.BeginForm())
{
  @Html.DropDownListFor(m => m.SelectedCountry,
                     new SelectList(Model.Countries, "Value", "Text"), "Select")
  @Html.DropDownListFor(m => m.SelectedProfile,
                     new SelectList(Model.Profiles, "Value", "Text"), "Select")
 <input type="submit" />
} 
```

# linux - 空格作为 ksh 脚本的参数

> ID：12896248
> 
> 赞同：1
> 
> 时间：2012-10-15T13:06:02.607
> 
> 标签：linux, escaping, whitespace, ksh

假设您有以下脚本：

```
#!/usr/bin/ksh

for element in $@
    do
            echo $element
done 
```

然后您使用以下命令执行脚本：

```
./myscript.ksh "my element" 
```

预期的输出应该是：

```
my element 
```

但空格被视为每个参数的分隔符，获得：

```
my
element 
```

我应该如何逃避空白？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:09:42.117

你必须加上`$@`双引号：

```
#!/usr/bin/ksh

for element in "$@"
do
    echo $element
done 
```

您可以通过全部省略来获得相同的输出`in "$@"`：

```
#!/usr/bin/ksh

for element
do
    echo $element
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:11:41.390

您必须引用`$@`，或不使用任何内容：

```
for element in "$@" 
```

或者

```
for element 
```

两者都可以。

# google-app-engine - App Engine：是否放置（java.lang.Iterable 实体）减少写操作的数量？

> ID：12896249
> 
> 赞同：0
> 
> 时间：2012-10-15T13:06:04.453
> 
> 标签：google-app-engine, google-cloud-datastore

与调用n 次相比，调用`put(java.lang.Iterable<Entity> entities)`which 执行实体列表的批量放置是否会将数据存储写入操作的数量减少到仅**一次？**`put(Entity entity)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:39:33.407

不，它不会影响写入操作。如App Engine 文档中的[可计费资源单位成本](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs)中所述，写入操作计数存储在数据存储区中的每个实体。

不同之处在于执行所有操作所需的总时间，因为在批处理操作中，与一系列独立操作相比，数据存储的响应时间最小化。

希望这可以帮助！

# mysql - Wordpress 在哪里存储页面信息

> ID：12896261
> 
> 赞同：4
> 
> 时间：2012-10-15T13:06:46.337
> 
> 标签：mysql, wordpress

我找不到哪个 mysql 表存储了“页面”记录，例如页面名称。我知道帖子记录存储在`wp_posts`表中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T13:08:24.090

WordPress 将页面数据视为 DB 的发布数据。所以，请检查你的`wp_posts`数据库也有页面数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:28:55.597

在带有 post_type=page 的 wp_posts 中，额外的 postdata 存储在 wp_postmeta 中，如缩略图和其他自定义字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-13T10:30:50.407

检查具有长**文本**类型的数据库表**wp_post**和字段**post_content**。检查**ping_status**字段是否应该**打开**。

 ********post_content**包含特定页面和帖子的所有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-23T21:20:20.490

页面的标题将存储在`wp_posts`表中

但是，如果您正在查找该页面正在使用的页面模板，您将在`wp_postmeta`表格中`_wp_page_template`查找`meta_key`列******

# javascript - 我如何在地理自动完成中传递价值

> ID：12896266
> 
> 赞同：-1
> 
> 时间：2012-10-15T13:07:07.060
> 
> 标签：javascript, asp.net, google-maps

我正在使用显示街道、州、国家等的地理自动完成功能。但问题是，当用户开始键入任何显示结果的任何内容时，都会显示整个单词 street 或 state 。因此，我在我的 html 页面上放置了两个下拉列表，一个用于 Country，一个用于 State，我希望在所选国家和州上的地理自动完成查找值意味着不会显示所有国家/地区结果。

[从这里我下载谷歌的地理代码](https://code.google.com/p/geo-autocomplete/)

我在我的代码中使用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:09:32.450

使用`geocoder_region`按国家或州过滤的选项。

# java - 如何让我的 Java 程序终止？

> ID：12896279
> 
> 赞同：2
> 
> 时间：2012-10-15T13:08:06.140
> 
> 标签：java, data-structures, linked-list, priority-queue

我正在做一个模拟正在处理的 CPU 作业的项目。基本上，用户将输入一个作业，其长度将被处理和一个优先级键（从-20 到 19，从 -20 开始以获得更高的优先级）。到目前为止，除了程序正确终止之外，我已经完成了所有这些工作。基本上，当我的优先级队列中的所有作业都已处理完毕时，我需要程序终止。当每个作业被处理时，它会从长度中减去，直到它为 0。当它为 0 时，它将从优先级队列中删除。当没有剩余作业时（优先队列为空），程序应在输入 n 后终止，因为没有新作业。但是由于某种原因，我完成代码的方式并没有终止。相反，当我输入 n 时，它给了我一个空指针错误，而没有工作要输入。谁能指出我可能在哪里犯了错误？谢谢。

示例输入-输出过程如下所示，格式如下（作业名称、长度、优先级）：

> 输入要处理的作业：
> I:job1 3 0
> O:job1
> 
> 输入要处理的新工作：
> I:n
> O:job1
> 
> 输入要处理的新工作：
> I:job2 1 -3
> O:job2
> 
> 输入要处理的新工作：
> I:n
> O:job1
> 
> 输入要处理的新工作：
> I:n

这是我的代码：

```
import java.util.Scanner;
import java.lang.Integer;

public class PQScheduler {
String command = "";
String process = "";
String[] inputParts = null;
SLPQueue Q;
boolean empty = false;

PQScheduler(String inputCommand) {
    Q = new SLPQueue();
    Scanner comReader = new Scanner(System.in);
    this.command = inputCommand;
    this.inputParts = command.split("\\s");     // will split input at whitespace and store parts into array

    while (empty == false) {        // will loop until priority queue becomes empty
        if (this.inputParts[0].equals("n")) {       // input of no new jobs, will continue processing previous jobs however
            if (Q.isEmpty()) {
                System.exit(0);
            }
            else {
                this.process(Q.entries.getHead(), Q.entries.getHead().getValue());
            }
        }
        else {
            int value = Integer.parseInt(inputParts[1]);    // parses value of length into an integer
            int key = Integer.parseInt(inputParts[2]);      // parse value of key into an integer

            try {
                Q.insert(inputParts[0], key, value);        // inserts job, length, and key into priority queue
            } catch (InvalidKeyException e) {
                e.printStackTrace();
            }
            this.process(Q.entries.getHead(), Q.entries.getHead().getValue());      // processes the highest priority job
        }
        System.out.println("Enter new job to be processed: ");
        command  = comReader.nextLine();
        inputParts = command.split("\\s");
    }
}

public void process(Node n, int value) {
    if (value == 0) {
        try {
            Q.removeMin();      // removes the finished job
            if (Q.isEmpty()) {
                empty = true;
            }
            else {
                process(Q.entries.getHead(), Q.entries.getHead().getValue());   // processes next highest priority job
            }

        } catch (EmptyPriorityQueueException e) {
            e.printStackTrace();
        }
    }
    else {
        n.setValue(value - 1);      // decrements job length by 1 when processed
        process = n.getElement();
        System.out.println(process);
    }
}

public static void main(String[] args) {
    String inputCommand = "";
    Scanner mainReader = new Scanner(System.in);

    System.out.println("Enter the job to be processed: ");      // takes in user input of job, length, and priority
    inputCommand = mainReader.nextLine();

    PQScheduler scheduler = new PQScheduler(inputCommand);
} 
```

}

```
public class SLPQueue implements PQueue {
protected SLList entries;
protected int size;

public SLPQueue() {
    entries = new SLList();     // creates a new linked list to store elements
    size = 0;
}

public String min() throws EmptyPriorityQueueException {
    if(entries.isEmpty()) throw new EmptyPriorityQueueException("Priority Queue is empty.");
    else
        return entries.getHead().getElement();      // gets the first node in priority queue
}

public Node insert(String e, int k, int v) throws InvalidKeyException {
    Node tempNode = new Node(e, k, v, null);
    insertEntry(tempNode);
    return tempNode;        // insertion method to add values to node and then insert into priority queue
}

protected void insertEntry(Node n) {        // insertion method to add into priority queue
    if (entries.isEmpty()) {        // checks if it is empty, if so, it will make it head of list
        entries.addFirst(n);
        size++;
    }
    else if (compare(n.getKey(), entries.getTail().getKey()) > 0) {     // checks to see if lower priority key inserted
        entries.addLast(n);     // adds last if key inserted is lower priority than the current tail of list
        size++;
    }
    else if (compare(n.getKey(), entries.getHead().getKey()) < 0) {
        entries.addFirst(n);        // adds first if key inserted is higher priority than the current head of list
        size++;
    }
    else {
        Node temp1 = entries.getHead();     // starts traversal from beginning of list
        Node temp2 = temp1;     // creates a second temporary node to "capture" node for node n to be inserted after
        while (compare(n.getKey(), temp1.getKey()) > 0 ) {      // loop to see if keys are of lower priority
            if (temp1.equals(entries.getHead())) {      // if statement created to set back temp2 by one node
                temp1 = temp1.getNext();
            }
            else {
                temp2 = temp2.getNext();        // gets the node value before temp1
                temp1 = temp1.getNext();        // gets the next temp1 value
            }
        }
        temp2.setNext(n);       // loop will break when key has higher priority than temp1 key found
        n.setNext(temp1);
        size++;
    }
}

public int compare(int k1, int k2) {        // comparator method to check for key priorities
    int compare = 0;
    if (k1 >= k2) {
        compare = 1;        // returns 1 if first key is of lower priority than second key
    }
    else if (k1 < k2) {     // returns -1 if first key is of higher priority than second key
        compare = -1;
    }
    return compare;
}

public Node removeMin() throws EmptyPriorityQueueException {        // removal method to remove from head of list
    if (entries.isEmpty()) throw new EmptyPriorityQueueException("Priority Queue is empty.");
    else {
        return entries.removeFirst();
    }
}

public int size() {     // returns size of priority queue list
    return size;
}

public boolean isEmpty() {      // checks to see if priority queue list is empty
    return size == 0;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:18:16.107

我敢打赌，`Q.isEmpty()`它的行为不像你想要的那样。看起来它正在`size`队列中运行，但您的`removeMin`方法并没有减少这个值。

尝试添加`size--;`到您的`else`块`SLPQueue.removeMin`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:24:37.113

你`SLPQueue()`永远不会降低它的`size`价值。它只是在这里和那里增加。因此，`isEmpty()`永远不会返回 true，`empty`在主循环中永远不会得到`true`，因此您的程序永远不会结束。

所以`removeMin()`改为

```
public Node removeMin() throws EmptyPriorityQueueException {        // removal method to remove from head of list
    if (entries.isEmpty()) throw new EmptyPriorityQueueException("Priority Queue is empty.");
    else {
        size--;
        return entries.removeFirst();
    }
} 
```

# objective-c - 在离开视图之前触发的 NSObject 类的自定义委托

> ID：12896284
> 
> 赞同：0
> 
> 时间：2012-10-15T13:08:28.273
> 
> 标签：objective-c, ios, ipad

我正在使用一个 NSobject 类，并且正在编辑一个表，我需要一个在离开视图之前触发的委托方法，它要求保存或取消..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:14:44.197

您可以从[Key-Value Observing开始](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)

我认为这是这样做的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:23:25.487

您可以使用使用块的 UIAlertView 类别

[https://github.com/jivadevoe/UIAlertView-Blocks](https://github.com/jivadevoe/UIAlertView-Blocks)

这可以帮助您避免委托，您可以在一个范围内完成所有工作。

# android - 2分钟后持续通知android

> ID：12896285
> 
> 赞同：0
> 
> 时间：2012-10-15T13:08:34.403
> 
> 标签：android, service, notifications

我想在我的应用程序中显示连续通知。

目前我可以在 4 秒后自动发出通知，但我想要的是它应该在特定时间间隔后连续发出。

以下是我的代码。

我的 xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
>
<Button android:id="@+id/notify"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content" 
  android:layout_weight="1"
  android:text="Raise a notification"
  android:onClick="notifyMe"
  />
  <Button android:id="@+id/cancel"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content" 
  android:layout_weight="1"
  android:text="Clear the notification"
  android:onClick="clearNotification"
  />
 </LinearLayout> 
```

这是我的活动文件

```
package com.vimaltuts.android.notificationexample;

import java.util.Timer;
import java.util.TimerTask;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

      public class NotificationExampleActivity extends Activity {

  private static final int NOTIFY_ME_ID=1987;
  private int count=0;
  private NotificationManager mgr=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mgr=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    Timer timer = new Timer();
    timer.schedule(new TimerTask()
    {
       public void run()
       {
           View v = new View(getApplicationContext());
           notifyMe(v);
       }},4000);
    }

  @SuppressWarnings("deprecation")
  public void notifyMe(View v) 
  {
    @SuppressWarnings("deprecation")
    Notification note=new Notification(R.drawable.stat_notify_chat,"Status message!",System.currentTimeMillis());
    PendingIntent i=PendingIntent.getActivity(this,0,new Intent(this, NotificationMessage.class),0);
    note.setLatestEventInfo(this, "New Email","Unread Conversation", i);
    note.number=++count;
    note.vibrate=new long[] {500L, 200L, 200L, 500L};
    note.flags|=Notification.FLAG_AUTO_CANCEL;      
    mgr.notify(NOTIFY_ME_ID, note);
  }

  public void clearNotification(View v) {
    mgr.cancel(NOTIFY_ME_ID);
  }
} 
```

请告诉我我应该在哪里获得额外的代码（如果有的话）？

也有可能与服务..如何？

* * *

我尝试遵循代码敌人测试目的，但它没有用......谁能告诉我哪里出错了

以下是我的活动代码

```
 Intent i= new Intent(NotificationExampleActivity.this,NotificationService.class);
    PendingIntent pi=PendingIntent.getService(NotificationExampleActivity.this, 0, i, 0);
    AlarmManager alarmMgr=(AlarmManager)getSystemService(ALARM_SERVICE);
    alarmMgr.cancel(pi);
    alarmMgr.setRepeating(alarmMgr.ELAPSED_REALTIME_WAKEUP, System.currentTimeMillis(),(10*1000), pi);
    Toast.makeText(this, "Alarm set", Toast.LENGTH_LONG).show(); 
```

以下是我的广播接收器

```
 Toast.makeText(context, "Repeating Alarm worked.", Toast.LENGTH_LONG).show(); 
```

我想在一段时间后显示 msg="Repeating Alarm working"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:14:40.987

尝试将[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)与通知一起使用。

您可以在`Activity`. 然后创建一个扩展`BroadcastReceiver`. 覆盖`onReceive`可以为通知编写代码的方法。

[这方面的教程在这里](http://smartandroidians.blogspot.in/2010/04/alarmmanager-and-notification-in.html)得到了很好的解释。

# html-table - 邮件模板渐变

> ID：12896288
> 
> 赞同：2
> 
> 时间：2012-10-15T13:08:41.303
> 
> 标签：html-table, html-email, gradient

我想要内容行旁边的渐变阴影。渐变必须相对于内容扩展。我现在正在做的是在我的内容旁边有 9 个带有右边框的 td。这适用于 Thunderbird，但不适用于 Outlook：

```
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #cbcbcb;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #c9c9c9;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #c6c6c6;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #c2c2c2;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #bdbdbd;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #b6b6b6;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #afafaf;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #a7a7a7;"></td>
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #9e9e9e;"></td> 
```

我在 Thunderbird 中得到了一个很好的渐变阴影，但在 Outlook 中我得到了左边框为白线。我也试图让 td 像：这个：

```
<td style="width: 1; bgcolor: #cbcbcb"></td> 
```

这在 Outlook 中有效，但 Thunderbird 似乎根本不渲染没有内容的 td。

最后我尝试制作这样的左右边框：

```
<td style="border: collapse; border-spacing: 0; border-right: 1px solid #cbcbcb; left-border: #c9c9c9;"></td> 
```

这在 Thunderbird 中有效，但在 Outlook 中无效。

你能帮我么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:38:54.073

我通过使用像这样的透明 1x1px gif 来解决它：

```
<td rowspan="6" width="1" bgcolor="#9e9e9e"><img src="http://www.blabla.com/new_mail_template/spacer.gif"></td> 
```

Thunderbird 没有显示空单元格，所以我不得不在其中放入一些东西

# asp.net - 用于 URL 重写 + 会话和应用程序变量的自定义 HTTP 处理程序

> ID：12896289
> 
> 赞同：1
> 
> 时间：2012-10-15T13:08:45.447
> 
> 标签：asp.net, url-rewriting, httpmodule, vanity-url

目前我的产品页面网址是

[http://www.localhost:80/products/default.aspx?code=productCode](http://www.localhost:80/products/default.aspx?code=productCode)

我想访问产品页面

[http://www.localhost:80/productCode](http://www.localhost:80/productCode)

我为此使用了 HTTP 模块。

```
public class UrlRewritingModule : IHttpModule

{

        public void Dispose()
        {

        }
        public void Init(HttpApplication context)
        {
            context.PreRequestHandlerExecute += new EventHandler(context_PreRequestHandlerExecute);

           context.AuthorizeRequest += new EventHandler(context_AuthorizeRequest);

        }  
        void context_AuthorizeRequest(object sender, EventArgs e)
        {
             HttpContext context = ((HttpApplication)sender).Context;
            if (some condition)
            {
               context.RewritePath(url);
             }
        }
        void context_PreRequestHandlerExecute(object sender, EventArgs e)
        {
            //We set back the original url on browser
            HttpContext context = ((HttpApplication)sender).Context;

            if (context.Items["originalUrl"] != null)
            {
                context.RewritePath((string)context.Items["originalUrl"]);
            }
        }
} 
```

我已经在 web.config 中注册了它，它工作正常。但是当我在 IIS 中部署它时，会话和应用程序变量不会抛出空引用异常。

谁能帮我？

编辑：是否需要额外的代码来访问重写 URL 的会话/应用程序变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:20:12.377

您是否尝试过使用 HTTPContext.Current？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:13:06.030

*通过在 web.config 的模块中添加runAllManagedModulesForAllRequests="true"*属性，我能够解决问题（访问由自定义处理程序重写的后续页面中的会话和应用程序变量） 。

# php - 用 jquery 指定 div id

> ID：12896290
> 
> 赞同：0
> 
> 时间：2012-10-15T13:09:03.213
> 
> 标签：php, jquery, ajax

我有按钮和 div，在每个部分中我都有相同的 ID 我想获取按钮的 ID 并将其用于刷新 div html。我应该如何编写 * 部分？

```
 $(function() {
         $(".button").click(function(){ 
         var id=$(this).attr('id');
         var dataString = 'id='+ id ;
        $.ajax({
           type: "POST",
           url: "download_number.php",
           data: dataString,
           cache: false,
           success: function(html)
           {
          *********I HAVE PROBLEM HERE**************
            $('how to get the id of the div from var id of button above?').html(html);
          } 
           });

         });
              }); 
```

分区：

```
 Downloaded:<div id="<?php echo $id; ?>" ><?php echo $downloadcount;?></div> 
```

按钮：

```
 <input type = "button" value="Download" class="button" id="<?php echo $id; ?>" name="dl"> 
```

**如果我上课它会更新整个 div 我只想更新按钮的 div**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:16:17.470

您不能`id`在按钮和 div 上使用相同的值，`id`值在文档中**必须**是唯一的。

我可能会做的是将 div`id`作为`data-divid`属性放在按钮上（所有带有[前缀`data-`](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)的属性对 HTML5 的所有元素都有效，并且在早期版本的 HTML 中无害），如下所示：

```
<input type="button" value="Download" class="button" data-divid="<?php echo $id; ?>" name="dl"> 
```

然后改变

```
var id=$(this).attr('id'); 
```

到

```
var id=$(this).attr('data-divid'); 
```

...然后`id`在您的回调中使用该 var `success`（因为回调是在`id`定义的上下文中创建的闭包，因此回调可以访问`id`）。

这是一个简单的例子：[Live copy](http://jsbin.com/arujiw/1) | [来源](http://jsbin.com/arujiw/1/edit)

HTML：

```
<div id="div1">This is div1</div>
<div id="div2">This is div2</div>
<div>
  <input type="button" data-divid="div1" value="Update div1">
  <input type="button" data-divid="div2" value="Update div2">
</div> 
```

JavaScript：

```
jQuery(function($) {
  $("input[type=button]").click(function() {
    var id = $(this).attr("data-divid");

    // I'll use setTimeout to emulate doing an ajax call
    setTimeout(function() {
      // This is your 'success' function
      $("#" + id).html("Updated at " + new Date());
    }, 10);

    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:11:47.087

尝试类似：

```
$('.button').attr('id'); 
```

获取按钮的 id，然后更改它：

```
$('.button').attr('id',''); //delete previous id if existing
$('.button').attr('id','yourNewId'); //set new id 
```

然后使用新的ID：

```
$("#yourNewId").doSomething(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:12:20.603

将您的 html 更改为：

```
Downloaded:<div id="<?php echo $id; ?>" class="downloaded" ><?php echo $downloadcount;?></div> 
```

然后做类似的事情：

```
var element_id = $(".downloaded").prop("id");
if(element_id = this.id){
   $("#"+element_id).html(/* ... */);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:14:02.510

```
$(function() {
    $(".button").click(function(){ 
        var id=$(this).attr('id');
        var dataString = 'id='+ id ;
        $.ajax({
        type: "POST",
        url: "download_number.php",
        data: dataString,
        cache: false,
        success: function(html)
        {
            $('.count-' + id).html(html); // for class
        } 
        });

    });
}); 
```

`<div class="count-<?php echo $id; ?>" ><?php echo $downloadcount;?></div>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T13:14:49.340

使用 id 但为其添加前缀，然后建立名称...

```
<div id="div_<?php echo $id; ?>" ><?php echo $downloadcount;?></div> 
```

按钮：

```
<input type = "button" value="Download" class="button" id="<?php echo $id; ?>" name="dl"> 
```

然后在您的代码中，您已经在按钮中使用了 id（而且它也将是 div_），因此您可以在“成功”中执行以下操作：

```
$("#div_"+id).html(html); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T13:14:59.340

首先避免使用相同的IDS。
然后你可以使用 CSS 选择器：

```
$('div.class') //div
$('input[type="button"].youridclass') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T13:18:23.520

您不能为此目的使用 id 属性，id 不能是数字（有效的 html），因此 id 需要是唯一的。请改用数据属性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-15T13:21:22.347

首先，`ids`应该是唯一的，你会遇到问题，特别是在使用 jQuery 时，如果你有相同的`id`.

如果没有看到你的标记，很难给你一个有效的例子。但是您可以通过遍历 DOM来获取与单击`id`的`div`对应的。`button`

示例标记：

```
<div id="example-div">
  <input type="button" value="Example" />
</div> 
```

**jQuery**

```
$('input[type="button"]').click(function() {
  console.log($(this).parent('div').prop('id'));
}); 

// outputs 'example-div' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-15T13:25:58.097

供您参考，请查看以下链接，了解可用于选择给定父元素的 dom 元素的各种方法。
jsperf.com/jquery-selectors-context/2

# java - request.getParameter 字符串值作为日期传递给java

> ID：12896295
> 
> 赞同：0
> 
> 时间：2012-10-15T13:09:20.040
> 
> 标签：java, jsp, date, oracle10g

在我的 JSP 页面中，我有一个字段，它是日期，当我得到 as 时`request.getParameter("dateVal");`给了我

```
15-Dec-2012 12:21. 
```

我想将此值传递给我的数据库过程并插入/更新到表中。如何将值作为`setDate`使用传递`prepareCall`给数据库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:13:48.417

第一步将使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将其解析为[`java.util.Date`](http://docs.oracle.com/javase/7/docs/api/java/util.Date.html)控制器中的完整实例：

```
Date date = new SimpleDateFormat("dd-MMM-yyyy HH:mm.", Locale.ENGLISH).parse(dateVal); 
```

然后你可以[`java.sql.Date`](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)在数据库层创建一个它的时间：

```
statement.setDate(1, new java.sql.Date(date.getTime())); 
```

* * *

**与具体问题无关**，请注意`java.sql.Date`不记得时间部分。如果您实际上在数据库中有一个`DATETIME`or`TIMESTAMP`字段而不是一个`DATE`字段，那么宁可使用`setTimestamp()`with a`java.sql.Timestamp`代替。这样时间部分也将被存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:49:41.527

@BalusC 的答案是完美的。但作为替代解决方案，您可以使用数据库提供的函数在查询时将字符串转换为日期。例如（如果您使用 Oracle），

```
to_date(date_in_String, format) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T13:13:52.870

试试这个 ：

`new SimpleDateFormat("dd-MM-yyyy HH:mm").parse(mydate);`

# hive - hive-0.8.1-cdh4.0.1 中的 MapReduce 作业失败。

> ID：12896300
> 
> 赞同：1
> 
> 时间：2012-10-15T13:09:34.167
> 
> 标签：hive

**hive-0.8.1-cdh4.0.1**中调用 Reducer 的查询会导致任务失败。具有 MAPJOIn 的查询工作正常，但 JOIN 给出错误。

例如：

```
 hive> select count(*) from table1;    
       Total MapReduce jobs = 1    
       Launching Job 1 out of 1
       Number of reduce tasks determined at compile time: 1        
       12/10/15 23:07:02 WARN conf.Configuration: mapred.job.name is deprecated. Instead, use mapreduce.job.name     
       12/10/15 23:07:02 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir    
       12/10/15 23:07:02 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir   
       12/10/15 23:07:02 WARN conf.HiveConf: hive-site.xml not found on CLASSPATH    
       WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.    
       Execution log at: /tmp/XXXX    
       /XXXX_20121015230707_c93521d0-4a97-4972-92b9-0fdd3ab42e5f.log    
       SLF4J: Class path contains multiple SLF4J bindings.    
       SLF4J: Found binding in [jar:file:/home/XXXX/hadoop-2.0.0-cdh4.0.1/share/hadoop/common/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]    
       SLF4J: Found binding in [jar:file:/home/XXXX/hive-0.8.1-cdh4.0.1/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]    
       SLF4J: See <http://www.slf4j.org/codes.html#multiple_bindings> for an explanation.
       Job running in-process (local Hadoop)     
       Hadoop job information for null: number of mappers: 0; number of reducers: 0    
       2012-10-15 23:07:04,721 null map = 0%,  reduce = 0%    
       Ended Job = job_local_0001 with errors    
       Error during job, obtaining debugging information...    
       **Execution failed with exit status: 2**    
       Obtaining error information    
       **Task failed!**    
       Task ID:    
       Stage-1    
       Logs:    
       /tmp/XXXX/hive.log    
       FAILED: Execution Error, return code 2 from      org.apache.hadoop.hive.ql.exec.MapRedTask 
```

日志文件显示这是由于 Java 堆空间问题。

```
**java.lang.Exception: java.lang.OutOfMemoryError: Java heap space**
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:400)
Caused by: java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:912)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:334)
    at org.apache.hadoop.mapred.LocalJobRunner$Job$MapTaskRunnable.run(LocalJobRunner.java:232)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:23:31.437

对于 hadoop 2.0.0 +，

```
in etc/hadoop/mapred-site.xml 
```

放：

```
<property>
  <name>mapreduce.task.io.sort.mb</name>
  <value>1</value>
</property> 
```

它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:31:21.850

地图连接将需要更多内存。

增加文件中的 mapreduce jvm 内存大小`conf/mapred-site.xml`。[mapreduce 配置](http://hadoop.apache.org/docs/r1.0.4/mapred_tutorial.html#Task+Execution+&+Environment)

```
<property>
    <name>mapred.child.java.opts</name>
    <value>-Xmx1024m -server</value>
</property> 
```

# python - 在 Glade/PyGTK 对话窗口中设置标签

> ID：12896303
> 
> 赞同：0
> 
> 时间：2012-10-15T13:09:35.617
> 
> 标签：python, user-interface, pygtk, glade

使用 Glade 快速编写一个简单的 GUI，我正在尝试创建一个通用错误对话框，我可以在其中将标签的文本设置为任何错误。在典型的 GUI 开发中非常简单（获取子表单、设置标签的标题属性等）。

不过，我似乎无法弄清楚如何在 PyGTK/Glade 中控制该标签。

这是我的对话框的 XML...

```
<object class="GtkMessageDialog" id="dError">
    <property name="can_focus">False</property>
    <property name="border_width">5</property>
    <property name="type_hint">dialog</property>
    <property name="skip_taskbar_hint">True</property>
    <property name="message_type">error</property>
    <property name="buttons">close</property>
    <child internal-child="vbox">
      <object class="GtkVBox" id="dialog-vbox">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="spacing">2</property>
        <child internal-child="action_area">
          <object class="GtkHButtonBox" id="dialog-action_area">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="layout_style">end</property>
            <child>
              <placeholder/>
            </child>
            <child>
              <placeholder/>
            </child>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="pack_type">end</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkLabel" id="lblError">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
          </object>
          <packing>
            <property name="expand">True</property>
            <property name="fill">True</property>
            <property name="position">2</property>
          </packing>
        </child>
      </object>
    </child>
  </object> 
```

这是我正在尝试的相关 Python 代码，尝试了 2 次。第一个我试图设置错误对话框的文本字段，第二个我添加了一个标签并尝试首先获取并设置它。

```
dError = self.builder_.get_object("dError") # get dialog

# Attempt 1 - setting the text field of the error dialog
# dError.set_text("Attempt 1")  
    #-- AttributeError: 'gtk.MessageDialog' object has no attribute 'set_text'

# Attempt 2 -setting an added label
# dLbl = dError.get_object("lblError")
    #-- AttributeError: 'gtk.MessageDialog' object has no attribute 'get_object'
# dlbl.set_text("Attempt 2")  

dError.show()
return True 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:03:34.317

对于您提供的 xml，您可以使用

```
dError.label.set_text("test") 
```

您的问题是您访问的是 MessageDialog 而不是标签本身。以上是一个捷径，更一般地说，您可以访问标签（应该很容易通过与您的 xml 比较来跟踪它是如何工作的）：

```
vbox = dError.get_child()
hbox, label1, hbuttonbox = vbox.get_children()
label1.set_text("Test1")
im, vbox2 = hbox.get_children()
label2, label3 = vbox2.get_children()
label2.set_text("Text2")
label3.set_text("Text3") #This one is invisible as default 
```

# android - 如何将 en EditText 设置为密码和数字键盘

> ID：12896306
> 
> 赞同：0
> 
> 时间：2012-10-15T13:09:36.897
> 
> 标签：android, android-edittext, android-softkeyboard

我有以下 EditText，它的字符需要隐藏，因为它是密码。我可以通过以下方式做到这一点。

```
 <EditText
        android:id="@+id/password"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="Please Enter Password/Pin"
        android:inputType="textPassword"

         > 
```

我想将键盘设置为数字，因为所有密码都是数字，但是当我执行以下操作时，会显示数字。我怎样才能实现两者？

```
passwordPin = (EditText)findViewById(R.id.password);
        passwordPin.setInputType(InputType.TYPE_CLASS_NUMBER); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:15:06.147

试试这个。

```
android:inputType="textPassword|number" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:19:57.520

尝试以下行`EditText`

```
android:inputType="textPassword|number" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T13:43:35.643

查看 Eclipse，您还可以使用以下内容，但不确定它的向后兼容性如何。

```
android:inputType="numberPassword" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T07:56:00.147

**解决了。**

```
android:inputType="textPassword|number"
android:password="true" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-17T09:49:17.437

只要现在不推荐使用密码，您就可以通过编程方式进行操作。试试这个：

```
passwordPin = (EditText)findViewById(R.id.password);
passwordPin.setInputType(InputType.TYPE_CLASS_NUMBER);
editText.setTransformationMethod(PasswordTransformationMethod.getInstance()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-24T16:31:10.660

我遇到了同样的要求并以这种方式解决了它：

在 XML 中：

```
android:inputType="number|numberPassword" 
```

以编程方式：

```
editText.setInputType(InputType.TYPE_CLASS_NUMBER || InputType.TYPE_NUMBER_VARIATION_PASSWORD) 
```

希望这会有所帮助：D

# c# - 未在我的本地主机中显示的实时服务器中显示图像

> ID：12896310
> 
> 赞同：0
> 
> 时间：2012-10-15T13:09:43.060
> 
> 标签：c#, asp.net

我正在使用 C# 开发 VS2010 中的邮箱模块

我用 ascx 页面制作了一个控件，并在该页面中为 Inbox、SentItems 和 Deleted Items 创建了三个不同的网格视图。

在所有三个网格视图中，我为回复和转发消息的图像添加了两列，显示用户回复或转发消息的位置。

该功能在我的本地主机中完美运行。

但是今天我已经将它部署在实时服务器上。

我发现我没有显示图像的地方。

当我通过萤火虫检查元素时，我在 HTML 源代码中发现它显示“无法加载给定 URL”，而对于其他图像，它显示图像。

谁能告诉我为什么会这样并帮助我..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:20:23.877

**检查 url 是否指向实时服务器上的正确物理路径。**

请参阅此 - **[ASP.NET Web 项目路径](http://msdn.microsoft.com/en-us/library/ms178116%28v=vs.100%29.aspx)**

**ASP.NET 将 ~ 运算符解析为当前应用程序的根。**您可以将 ~ 运算符与文件夹结合使用，以指定基于当前根目录的路径。

以下示例显示使用 Image 服务器控件时用于指定图像的根相对路径的 ~ 运算符。在此示例中，图像文件是从位于 Web 应用程序根目录下的 Images 文件夹中读取的，无论网页在网站中的位置。

```
<asp:image runat="server" id="Image1"
  ImageUrl="~/Images/SampleImage.jpg" /> 
```

您可以在服务器控件中的任何与路径相关的属性中使用 ~ 运算符。**~ 运算符仅在服务器控件和服务器代码中被识别。您不能将 ~ 运算符用于客户端元素。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T09:46:43.133

我找到了这个错误的解决方案。基本上在帮助台设置权限红色并写下你托管网站的位置。然后解决这个解决方案。

第二件事：您检查文件夹图像文件夹路径，您将图像保存在帮助台中

# java - Java中自定义结构的解析

> ID：12896311
> 
> 赞同：1
> 
> 时间：2012-10-15T13:09:44.027
> 
> 标签：java, jaxb

我需要使用描述结构的 JAXB 解析 XML。例如，它可以是这样的：

```
<structure name="s1">
 <integer value="15" name="i1" />
 <structure name="s1_1">
   <string value="hello" />
 </structure>
</structure> 
```

如您所见，结构可以嵌套。所以我的问题是：

1.  在 Java 中表示这种结构的最佳实践是什么
2.  如何使用 JAXB 解析它？

**UPD：结构可以包含几个不同的项目（整数、字符串、浮点数、数组/等），我不能假设它的内容。我只知道可能的字段类型，但不知道它们的数量或顺序。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:20:58.537

怎么样：

```
class Structure
{
    String name;
    Integer value;
    Structure child;
    // or 
    Set<Structure> children;
} 
```

使用 JAXB 进行解析几乎可以简化为在上面的类中使用 JAXB 工具并生成适当的存根/代理/任何东西并将适当的 XML 馈送到编组器中——在 SO 和其他地方有很多示例。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:21:42.197

创建类`Structure`。使用 JAXB 注释标记它：

```
@XmlRootElement(name = "structure")
public class Structure {
    @XmlElement(name = "integer")
    private IntegerValue integer;
    @XmlElement(name = "string")
    private StringValue string;

    // add default constructor, getters and setters
} 
```

创建类`IntegerValue`并`StringValue`包装 int 和 string 并使用`@XmlAttribute`.

现在您已准备好将它与 JAXB 一起使用。

这是一个如何将对象序列化为 XML 的示例：

```
Structure s = new Structure();
//...............
JAXBContext ctx = JAXBContext.newInstance("com.yourcompany.yourpackage");
ctx.createMarshaller().marshal(s, System.out); 
```

反序列化使用`Unmarshaller`.

# php - SQL WHERE 中的嵌套 AND/OR

> ID：12896312
> 
> 赞同：0
> 
> 时间：2012-10-15T13:09:45.883
> 
> 标签：php, sql, pdo

我正在尝试使用一些条件来根据开始和结束日期选择记录。基本上我想要任何没有结束日期或在给定期间开始或在同一给定期间结束的东西。任何关于如何实现这一点的帮助或指导将不胜感激。我包括下面查询的 WHERE 部分和参数绑定，但如果需要可以包括更多。

```
$periodsCxn->bindParam(':PositionID',$PositionID);
$periodsCxn->bindParam(':Start',$firstPayPeriod);
$periodsCxn->bindParam(':End',$lastPayPeriod);
$periodsCxn->bindParam(':Start2',$firstPayPeriod);
$periodsCxn->bindParam(':End2',$lastPayPeriod);

WHERE
        POSITION_PERIOD.PositionID = :PositionID AND
        (
            (
                POSITION_PERIOD.EndDate = '1900-01-01'
                OR
                POSITION_PERIOD.EndDate IS NULL
            )
            OR
            (
                POSITION_PERIOD.StartDate BETWEEN :Start AND :End
                OR
                POSITION_PERIOD.EndDate BETWEEN :Start2 AND :End2
            )
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:46:24.133

令我惊讶的是，您想要任何没有结束日期的记录，但在其他情况下要比较开始日期。

通常，使用此类数据，您想知道给定期间是否与另一个期间重叠，即使该期间可能没有结束日期。重叠的逻辑是：

```
where POSITION_PERIOD.PositionID = :PositionID AND
      POSITION_PERIOD.StartDate <= :End and
      (POSITION_PERIOD.EndDate >= :Start or
       POSITION_PERIOD.EndDate = '1900-01-01' or
       POSITION_PERIOD.EndDate IS NULL
      ) 
```

这假定变量具有有效日期。

# django - 提交表单时 url 不应更改

> ID：12896315
> 
> 赞同：1
> 
> 时间：2012-10-15T13:09:47.527
> 
> 标签：django

我有这个 Django 应用程序，当用户请求“localhost:8000/time/”时，它显示为 html 表单 input.html。

```
<head>

<!-- paste this in your footer -->
<script type="text/javascript"> 
$(document).ready(function() {
        $('#myForm').submit(function() { // catch the form's submit event
            $.ajax({ // create an AJAX call...
                data: $(this).serialize(),
                type: $(this).attr('POST'), // "post"
                url: $(this).attr('/poi/'), //  "/poi/"
                success: function(response) { 
                    // do something here
                }
            });
        return false;
    });
});
</script>
<!-- add jquery or it won't work -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>

<body>
        <form action="/poi/" method = "post">

        <!---------
        first name :<input type ="text" name ="fname">
        last name:<input type ="text" name ="lname">
        ------>

        enter a days :<input type ="text" name ="days">
        <br>
        <input type=submit name="submit" onclick="submit_function(); return false;">
        </form>

</body> 
```

提交表单时，用户看到 response.html 页面并且 URL 更改为“localhost:8000/poi/ 显示有

网址.py

```
urlpatterns = patterns('',
                            (r'^hello/$', hello),   
                            ('^time/$', current_datetime),
                            ('^poi/$', next_datetime),

                        ) 
```

视图.py

```
def current_datetime(request):  
    return render_to_response('input.html')

def next_datetime(request):

    now = datetime.datetime.now()
    now_day = now.day
    now_month = now.month
    now_year = now.year

    return render_to_response('response.html', {'now_day': now_day, 'now_month'}} 
```

现在我必须做同样的事情，但 url 不应从“localhost:8000/time/”更改为“localhost:8000/poi/”但它应该是“localhost:8000/time/

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:16:56.857

你必须使用 ajax 来完成这个使用 jquery 它看起来像

```
<form id="myForm"> ... </form> <!-- add an id to your form -->

<!-- paste this in your footer -->
<script type="text/javascript"> 
$(document).ready(function() {
        $('#myForm').submit(function() { // catch the form's submit event
            $.ajax({ // create an AJAX call...
                data: $(this).serialize(),
                type: $(this).attr('method'), // "post"
                url: $(this).attr('action'), //  "/poi/"
                success: function(response) { 
                    // do something here
                }
            });
        return false;
    });
});
</script>
<!-- add jquery or it won't work -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

它应该开箱即用

这是一个匿名函数，但您可以将代码放在一个命名函数中，然后将其添加到按钮中：

```
<input type="submit" onclick="submit_function(); return false;" /> 
```

基本上是一样的

# javascript - getComputedStyle 在 FF3.6 中返回 auto，有什么解决方法吗？

> ID：12896318
> 
> 赞同：0
> 
> 时间：2012-10-15T13:10:04.883
> 
> 标签：javascript, dom

我需要对页面中的列进行一些对齐，因此需要子像素宽度。我正在使用以下内容：

```
float_width = parseFloat(getComputedStyle(el, null).width) 
```

所以这在最近的 FF 中运行良好，但在 FF3.6 中总是“自动”。我真的很想让它也能在 FF3 中工作，因为我们正在部署 RHEL6 系统，不幸的是，它带有一个旧的 FF。

那么在较旧的 Geckos 中，宽度的计算是否以不同的方式完成，还是存在 synatx 问题？有什么方法可以在旧 FF 中获得 td 的子像素宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:21:05.407

尝试：

> float_width = parseFloat(document.defaultView.getComputedStyle(el, null).getPropertyValue('width'));

# c# - 什么是 System.Reactive.Linq.Observαble？（注意阿尔法）

> ID：12896320
> 
> 赞同：11
> 
> 时间：2012-10-15T13:10:10.290
> 
> 标签：c#, .net, system.reactive

不管是`System.Reactive.Linq.Observαble`什么？

注意希腊字母 'alpha' 代替了 'a'。可观察的 不可观察的

`internal`在程序集中的这个命名空间中找到大约一百个类（全部）

> // C:\Program Files (x86)\Microsoft SDKs\Reactive Extensions\v2.0\Binaries.NETFramework\v4.0\System.Reactive.Linq.dll // System.Reactive.Linq, Version=2.0.20823.0,文化=中性，PublicKeyToken=31bf3856ad364e35

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T13:14:51.653

根据[Bart de Smet 的评论](http://channel9.msdn.com/Shows/Going+Deep/Bart-De-Smet-Inside-Rx-V2-Beta#c634675182066113791)：

> 您会看到一个名称中带有希腊字母的内部命名空间，以使调用堆栈看起来与您编写的方法完全相同。我们不能在 Observable 中嵌套诸如 Where 之类的内部类，因为已经有一个具有该名称的方法。因此，最接近的近似值是一个 Observαble 命名空间，其中包含诸如 Where 之类的类。
> 
> 不幸的是，由于 IDE 处理 InternalsVisibleTo 的一些复杂性，此时命名空间出现在 IntelliSense 中。我们已经意识到这个问题并正在调查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:14:50.887

它是 的`internal`命名空间`System.Reactive.Linq DLL`，因此不打算暴露给外界。

# android - Creating an Internet Calling (SIP) account programmatically?

> ID：12896326
> 
> 赞同：3
> 
> 时间：2012-10-15T13:10:32.327
> 
> 标签：android, sip

Is it possible to create an Internet Calling account programmatically?

I want to be able to add my own SIP account to that list of long lasting accounts rather than using the SipProfile & SipManager classes for short lived sessions so that I can still receive VoIP calls once the app has closed.

I could launch the SipSettings intent, but it's not very user friendly, having logged in to my app once, they shouldn't have to enter yet more user details.

# continuous-integration - 在 TDS CI 部署结束时自动发布 Sitecore 内容

> ID：12896332
> 
> 赞同：7
> 
> 时间：2012-10-15T13:11:04.493
> 
> 标签：continuous-integration, sitecore, sitecore6, tds

我正在使用 Teamcity 自动（单击）部署到我们的 QA 环境中。目前正在部署内容项，但 QA 人员必须手动触发重新发布该站点。

无论如何使用 TDS、Sitecore Rocks 或其他工具在部署过程结束时自动重新发布。

我知道我可以将 Sitecore 配置为每 x 分钟自动发布一次，但我宁愿将其停用，因为 QA 也将执行负载测试，我不希望调度程序妨碍。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T13:49:37.697

我们通过在我们的日常构建和 QA 网站上设置一个触发发布的 ASPX 来做到这一点。然后构建有一个 Powershell 调用来触发它。我们已经使用 CruiseControl、TeamCity 和 Team Build 完成了这项工作。

## TeamCity 配置

部署文件和 TDS 后，TeamCity 的配置使用额外的构建步骤：

1.  **跑步者类型：** Powershell
2.  **步骤名称：**触发器发布到 Web DB
3.  **Powershell运行模式：** x64
4.  **工作目录：** [无价值]
5.  **脚本：**源代码
6.  **脚本来源：**

    $r = [System.Net.WebRequest]::Create('http://myqasite/SomePath/Publish.aspx'); $resp = $r.GetResponse();

7.  **脚本执行模式：** 使用“-Command -”参数将脚本放入Powershell stdin

## 发布.aspx

我们发布页面的代码是这样的：

```
 string full = Request.QueryString["full"];

    // Set up the publish mode
    PublishMode publishMode = PublishMode.Smart;
    if (!string.IsNullOrWhiteSpace(full) && (full == "1" || full.Equals("true", StringComparison.InvariantCultureIgnoreCase)) ) {
        publishMode = PublishMode.Full;
    }

    using (new Sitecore.SecurityModel.SecurityDisabler()) {
        //We need the target database
        var webDb = Sitecore.Configuration.Factory.GetDatabase("web");

        //source db
        var masterDb = Sitecore.Configuration.Factory.GetDatabase("master");

        try {
            foreach (Language language in masterDb.Languages) {
                //loops on the languages and do a full republish on the whole sitecore content tree
                var options = new PublishOptions(masterDb, webDb, publishMode, language, DateTime.Now)
                              {RootItem = masterDb.Items["/sitecore"], RepublishAll = true, Deep = true};
                        var myPublisher = new Publisher(options);
                        myPublisher.Publish();
            }
        }
        catch (Exception ex) {
            Sitecore.Diagnostics.Log.Error("Could not publish the master database to the web", ex);
        }

    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T11:14:12.430

在等待答案时，我在 twitter 上分享了这个问题，结果得到了 Stephen Pope 的指导（**[他的回应](https://twitter.com/stephenpope/status/257840440156512256)**）他建议使用Sitecore Rocks 提供的[PowerShell 增强功能](http://vsplugins.sitecore.net/Sitecore-PowerShell.ashx)，这需要一段时间（文档很少）但是我已经达到了我想要的结果:)

作为我发现的记录，以下内容作为我自己问题的潜在答案提供，但非常感谢 Jay S，如果不是这个我会使用的解决方案。

无论如何..在 Teamcity 构建中使用额外的构建步骤，我有以下内容：

*   **跑步者类型：** Powershell
*   **步骤名称：**发布网站
*   **Powershell运行模式：** x64
*   **脚本：**源代码
*   **脚本执行模式：**使用“-Command -”参数将脚本放入powershell stdin
*   **附加命令行参数：** -ExecutionPolicy Unrestricted
*   **脚本来源：**

    导入模块 '.\build-modules\sitecore\sitecore.psd1';
    new-psdrive -name "rocks" -psp SitecoreRocks -root "" -host "%QA.Url%" -usr "%QA.sitecore.user%" -pwd "%QA.sitecore.password%" -databasename "master " -scope "脚本";
    设置位置岩石：
    Publish-SCDatabase；

魔法发生在 Publish-SCDatabase 命令行开关中，当您运行 Get-Help 时会显示一堆参数，事实证明只有两个参数可用*-Name*和*-Mode*

在上面的 vs-plugins 链接之外找到文档是不可能的，所以一点 .net 反射和大量的耐心表明参数具有以下选项：

*   **-Name**要运行发布的数据库的名称（默认为 psdrive 数据库
*   **-Mode**使用以下可用选项设置命令的发布模式：
    *   0：重新发布
    *   1：增量
    *   2：聪明
    *   3：重建

当然，更好的文档，以及可能通过 Get-Help 命令行开关提供的附加信息会很好。如果 Rocks 项目是开源的，我可能会分叉该项目以生成附加帮助。

既然这个问题有两个很好的解决方案，我会让人们投票决定哪个是最佳答案，几天后我会检查投票并将投票最多的标记为接受的答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-31T11:23:19.420

虽然这些都是很好的解决方案（自定义 aspx 和通过 Rocks 的 Powershell 之一），但它们都有一些缺点。

1.  自定义 aspx 页面。除非你在你的 C# 解决方案上“去城里”进行发布，否则提供一种非常复杂的方式来更改发布目标、根节点和其他选项（例如智能、增量），并允许以尽可能灵活的方式调用这些选项，您将面临不得不定期更改代码以更改部署策略的风险。Richard R 在 Rocks 答案下方的评论承认了这一点。将其与某种脚本解决方案进行对比。它不会被编译代码的事实使其本身被砍掉和改变，甚至为了不同的目的而扩散成许多不同的脚本。

2.  Powershell 通过 Rocks。在定制方面再次存在缺点。您仅限于该特定实现支持的命令行开关（以及最终的 CRUD 操作）。更不用说它是封闭源代码并且文档有限。

我可能需要详细说明我想到的可能需要满足的用例。如果在部署时仅发布部分内容树（如 /templates、/system、/layouts 等方面）对我们来说特别重要，该怎么办？在我们的部署中，我们有巨大的 /content 和 /media 库部分，因此更精细地了解为某些部署发布的内容对于加快部署至关重要。现在，虽然创建您自己的 /Publish.aspx 页面是完全可行的，该页面将指定根项目并为您执行这些（深度）发布，但通过某种脚本来完成它会更加优雅。不仅如此，还要考虑您可能希望在脚本部署和环境设置上自动化的无数其他操作，例如添加内容、应用工作流等

将这两者与 Adam Najmanowicz 的 Powershell Console/Extensions 进行对比。通过允许您在 sitecore 中开发 powershell 脚本，您可以通过脚本解决方案有效地创建您想要的任何内容，甚至可以从外部工具调用它，以便在 CI 服务器或协调器中执行该步骤： [http:// blog.najmanowicz.com/2011/12/19/continuous-deployment-in-sitecore-with-powershell/](http://blog.najmanowicz.com/2011/12/19/continuous-deployment-in-sitecore-with-powershell/)

# c++ - 双向模板类依赖 C++

> ID：12896336
> 
> 赞同：0
> 
> 时间：2012-10-15T13:11:20.703
> 
> 标签：c++, templates, dependencies, forward-declaration

问题是 A 类依赖于 B 类，反之亦然。编译器会抱怨未知类型。通常的解决方案是前向声明类。但是如何声明模板类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:11:20.703

我花了一段时间才找到解决方案，所以我想我可以通过在此处发布“模板”来让别人的生活更轻松。

```
// Header A.h
template<class z, class w = float>
class B;

template<class x, class y = double>
class A
{
    B mb;
}

// Header B.h
template<class x, class y = double>
class A;

template<class z, class w = float>
class B
{
    A mA;
} 
```

此外，您可以更改模板声明中的可选参数。

# php - 对具有严重 DB 依赖性的遗留 PHP 类进行单元测试

> ID：12896342
> 
> 赞同：0
> 
> 时间：2012-10-15T13:11:26.030
> 
> 标签：php, unit-testing, dependencies, legacy-code

我正在尝试在遗留 PHP 应用程序中实现一些单元测试。

这方面存在许多挑战，但特别是对于这个问题，我目前正在研究一个管理应用程序配置的小类。

类接口非常简单；它执行以下操作：

*   构造函数调用 Populate 方法，该方法使用我们的 Recordset 类从数据库中加载所请求模块的配置。
*   Get 方法，返回指定的配置值。
*   Set 方法，设置内存中的配置值。
*   保存方法，它将配置更新写回数据库。

测试 Get/Set 方法很简单；它们直接映射到私有数组，并且几乎可以按照您的预期工作。

我遇到的问题是测试数据库处理。该类使用配置表上的许多字段（模块名称、语言等）来确定要加载哪些配置项以及优先级。为此，它构造了一系列复杂的 SQL 字符串，然后直接调用 DB 以获取正确的配置数据。

我不知道如何为此编写单元测试。除了 Get/Set 方法之外，该类几乎完全由构建 SQL 字符串和运行它们组成。

如果没有针对真实数据库实际运行它，我看不到一种明智地测试它的方法，以及随之而来的所有问题——如果不出意外的话，配置加载器的复杂性意味着我至少需要七个或八个测试数据库填充了稍微不同的配置。看起来它会变得难以管理和脆弱，这会在某种程度上破坏这一点。

谁能建议我应该如何从这里开始？甚至可以对这种类进行单元测试吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:24:02.647

我必须说我不确定我是否同意如果不在这里访问数据库，单元测试会毫无意义。我的目标是在不涉及您的数据库的情况下获得生成被测 SQL 的业务逻辑。这是我正在谈论的一个例子：

```
class Foo {

    // ... Getters and setters for your config ...

    public function doSomeBusinessLogicThenHitDb()
    {
        $sql = 'SELECT * FROM mytable WHERE ';
        $sql .= $this->_doSomethingComplicatedThatInvolvesParsingTheConfig();
        $this->_queryDb($sql);
    }

    protected function _queryDb($sql)
    {
        // Do something with a PDO or whatever
    }
} 
```

将该`_queryDb()`位抽象为一个单独的函数后，您可以编写以下测试：

```
 public function testMyClassUnderSomeCircumstances()
    {
        // Set up config
        $exampleConfig = // whatever

        // Set up expected result
        $whatTheSqlShouldLookLikeForThisConfig = 'SELECT ... WHERE ...';

        // Set up a partial mock that doesn't actually hit the DB
        $myPartialMockObject = $this->getMock('Foo', array('_queryDb'), array(), '');
        $myPartialMockObject->expects($this->once())
                            ->method('_queryDb')
                            ->with($whatTheSqlShouldLookLikeForThisConfig);

        // Exercise the class under test
        $myPartialMockObject->setConfig($exampleConfig);
        $myPartialMockObject->doSomeBusinessLogicThenHitTheDb();
    } 
```

该测试的重点是测试*生成*SQL 的业务逻辑，而不是测试数据库本身。通过期望生成的 SQL 必须看起来像它必须看起来的样子，你可以确保如果无辜的重构`_doSomethingComplicatedThatInvolvesParsingTheConfig()`意外地破坏了你的代码，你的测试将会失败，因为它会产生与过去不同的 SQL。

如果测试整个应用程序（包括其数据库）是您的目标，请尝试使用适当的集成测试套件，例如 Selenium。单元测试监视各个类并告诉您它们何时停止按应有的行为。如果您让它们超出范围，您将面临执行速度和错误本地化的问题（即错误甚至在代码中，更不用说被测试的类，还是数据库的东西？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:16:55.343

更好地测试这些东西的一个直接方法是为您的配置类提供一个对象来访问数据库，这样您就可以使用真实数据库运行任何配置，或者只是一些模拟写入内存而不是写入内存的模拟，如果您需要持久性，甚至可以运行轻量级文件例如。

这可以通过创建具有定义接口的适配器来完成。您编写的第一个适配器用于您的数据库。

创建配置对象时，您传入适配器。由于它具有定义的接口，因此配置类可以与具有该接口的任何适配器一起使用。首先是数据库。

然后你要么模拟一个适配器，要么为你的测试编写一个自己的适配器。在您的测试中，您不使用数据库适配器，而是使用测试适配器。

然后，您可以独立于数据库对配置类进行单元测试。

# android - 垂直布局，2个元素，让上一个填满剩余空间（下一个有wrap_content）

> ID：12896343
> 
> 赞同：3
> 
> 时间：2012-10-15T13:11:35.883
> 
> 标签：android, android-layout, height, xml-layout

我有以下两难境地。两个元素，一个在彼此之上。底部有`wrap_content`高度。我希望顶部元素填充剩余空间而不使两个元素重叠（例如，如果我使用就会发生这种情况`FrameLayout`）。

宽度适用`match_parent`于所有元素。

这是一个模型（为清楚起见，截断了一些属性）：

```
<LinearLayout android:layout_height="match_parent">

  <CustomView android:layout_height="???????" /> 

  <TextView android:layout_height="wrap_content">

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T13:16:20.073

```
<CustomView 
    android:layout_height="0dp"
    android:layout_weight="1"
    .../> 
```

# c - fscanf() seg fault Program received signal EXC_BAD_ACCESS

> ID：12896345
> 
> 赞同：1
> 
> 时间：2012-10-15T13:11:39.190
> 
> 标签：c, file, segmentation-fault, exc-bad-access, scanf

> ```
>  16     char* input = (char*) argv[1];
>  17     FILE *fp = fopen (input, "r");
>  18     if( fp == NULL)
>  19     {
>  20         printf(" reading input file failed");
>  21         return 0;
>  22     }
>  23     fseek(fp,0,SEEK_END);
>  24     int file_size = ftell(fp);
>  29     rewind(fp);
>  30     int i;
>  31     int totalRun;
>  32     char * temp;
>  33     char* model;
>  34     char* example;
>  36     fscanf(fp,"%d",&totalRun);
>  37     fscanf(fp,"%s",model); 
> ```

Above is my code I get this error at line 37 "fscanf(fp,"%s".model)"

Program received signal EXC_BAD_ACCESS, Could not access memory. Reason: KERN_PROTECTION_FAILURE at address: 0x00007fff5fc00730 0x00007fff8db20bcb in __svfscanf_l ()

What can cause this ?? I looked into *fp in gdb. before reading totalRun _offset = 0 and after reading _offset = 4096\. content of totalRun was correct ("3"). I only read one line and why is offset 4096? Also what is _blksize referring to in FILE.

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:13:24.207

您需要为 分配内存`model`，它是一个未初始化的指针。还要确保`fscanf()`不会读取超出分配给的数组`model`。如果`model`不需要动态分配，则只需使用本地数组。例如：

```
char model[1024];
if (1 == fscanf(fp, "%1023s", model))
{
} 
```

*始终*检查 的返回值，它返回成功分配的数量，否则如果调用失败`fscanf()`，程序将处理未初始化的变量。`fscanf()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:18:10.833

变量`model`未初始化。您必须先为其分配内存，然后才能在该`fscanf()`方法中使用它。您可以通过两种方式进行：

1.  静态 -`char model[1024];`
2.  动态 -完成后`char * model = (char*) malloc(1024);`不要忘记使用`free()`释放缓冲区。

# git - Git and Github: How to Restructure Our Github and Individual Team Member Repos to Fit Our Newly Desired Workflow?

> ID：12896346
> 
> 赞同：0
> 
> 时间：2012-10-15T13:11:39.720
> 
> 标签：git, github, git-workflow

**Background:**

1) We are a team of six beginners trying Git and Github for the first time.

2) We created a repo on Github and then all of us cloned it.

3) We then each made our own local feature branches and started working on our first features.

4) **Now we have discovered a workflow that uses TWO permanent branches ("master" and "develop") and an arbitrary number of feature branches that come off of "develop" (and go back to it when they are done).**

**Question:**

A) What is the best way to get Github and team repos from the current state of affairs ("master") to what we want ("master" and "develop")?

B) What tracking should each member of the team setup? I.e., we are all interested in staying current with "develop" on Github so we can rebase our feature branches often, for example.

Thanks and sorry if this is a "dumb" question. I feel like the answer is staring me in the face, but I don't have the confidence and would like some help from an experienced Git user, ideally one who uses a workflow similar to what I am taking about. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:17:25.863

阅读[这篇文章](https://nvie.com/posts/a-successful-git-branching-model/)，它精美地解释了如何与多个开发人员一起使用 git 管理您的项目。我相信这篇文章的摘要可以用这张图来呈现：

[![git 工作流程](../Images/e09f018408a2b6a2b893ad783da356dc.png)](https://i.stack.imgur.com/UxTwq.png)
[（来源：[nvie.com](http://nvie.com/img/2009/12/Screen-shot-2009-12-24-at-11.32.03.png)）]

> A) 将 Github 和团队存储库从当前状态（“master”）变为我们想要的（“master”和“develop”）的最佳方式是什么？

这很容易。您当前`master`的分支相当于`develop`上图中的分支。因此，您只需要分支一个`develop`分支并让您的开发人员使用*它*而不是`master`.

> B) 团队的每个成员应该设置什么跟踪？即，我们都对在 Github 上保持最新的“开发”感兴趣，因此我们可以经常重新设置我们的功能分支，例如。

因此，就`develop`分支而言，您威胁它的方式与您过去威胁的方式相同`master`。几乎没有任何区别。现在`master`分支将变得特别。它应该始终稳定并可供其他人下载。因此，您应该`master`只向可信数量的人授予推送权限（我不确定这是否`git`适合您，或者您只需要告诉人们并希望他们服从）。一个可以推送到 master 的人将负责`master`分支中的任何更改。

请注意，开发人员仍然可以发布`hotfixes`和合并它们`develop`，但他们应该让有特权的人将它们合并到`master`.

`release`分支机构可以采用与`master`.

至少强制执行权限的一种方法是拥有另一个存储库`master`，开发人员可以在其中发出“拉取请求”，而有权限的人可以接受拉取。这实际上是 Linux 内核的管理方式。在 Linux 内核中，有一个`master`由 Linus 自己管理的存储库。`develop`他的副手维护着几个分支机构，他们不时地向他发送“拉取请求”。

# graphviz - graphviz中的边缘布局用于固定节点位置

> ID：12896348
> 
> 赞同：4
> 
> 时间：2012-10-15T13:11:41.483
> 
> 标签：graphviz, dot

我试图为图形布局编写自己的[小算法](https://github.com/stoerr/annealingDottyLayout)，该算法仅创建节点布局但不定义边缘路线。当我使用 Graphviz 将生成的点文件转换为图形时，边缘是穿过节点甚至相互重叠的直线。有没有办法使用 Graphviz 像点算法一样布局边缘，但节点在预定的固定位置？

例如，您可以在下图中看到效果：

```
digraph test {
  "a" [pos="0.0,0.0"];
  "b" [pos="50.0,50.0"];
  "c" [pos="100.0,100.0"];
  "a" -> "b";
  "a" -> "c";
  "b" -> "c";
} 
```

当`dot -Knop -Tpng -otest.png test.dotty`a 和 c 之间的线与 b 相交时。我想要的是所有节点都保持它们的位置，但是 a 和 c 之间的线围绕 b。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:33:12.537

只需添加：

```
splines=true; 
```

到你的图表 - 结果是：

![graphviz 线边](../Images/712102131101ddb3e1c531b748b8ac44.png)

# java - Why ScheduledExecutorService doesn't print stack trace?

> ID：12896351
> 
> 赞同：5
> 
> 时间：2012-10-15T13:11:55.383
> 
> 标签：java, exception-handling, scheduled-tasks

Why we can't see the stacktrace in this example ?

```
public class NoStackTraceTester implements Runnable  {
    private static final ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();

    private ScheduledFuture<?> lifeCheckFuture;

    @Override
    public void run() {
        lifeCheckFuture = startLifecheck();
    }

    private ScheduledFuture<?> startLifecheck()
    {
        Runnable lifeCheck = new Runnable()
        {
            @Override
            public void run()
            {
                System.out.println("sending lifecheck ...");
                throw new RuntimeException("bang!");
            }
        };
        return scheduler.scheduleAtFixedRate(lifeCheck, 1000, 1000, TimeUnit.MILLISECONDS);
    }

    public static void main(String[] args) {
        new NoStackTraceTester().run();
    }
} 
```

If you try to comment the exception you will the the repeative task of the lifecheck function. But if an exception is thrown, thread stop but with no detail :(

Do you have an idea why ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:18:55.773

ExecutorService 将任何捕获的 Throwable 放置在 Future 对象中。如果你检查这个，你可以看到抛出了什么异常。这并不总是可取的，因此您可能必须在 run() 方法中捕获并处理或记录任何异常。

注意：一旦异常逃逸，该任务将不再重复。

```
Runnable lifeCheck = new Runnable() {
    @Override
    public void run() {
        try {
            System.out.println("sending lifecheck ...");
            throw new RuntimeException("bang!");
        } catch(Throwable t) {
            // handle or log Throwable
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:15:11.853

如果你想要一个异常报告，你必须自己插入处理代码。ExecutorService 不会自动将异常跟踪发送到标准输出，这很好，因为这在生产代码中很少需要。

基本上，这是一种方法：

```
public void run()
{
   try {
     System.out.println("sending lifecheck ...");
     throw new RuntimeException("bang!");
   } catch (Throwable t) { t.printStackTrace(); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-05T13:58:42.397

ThreadPoolExecutor 中的 afterExecute() 方法可以被覆盖：

```
class MyThreadPoolExecutor extends ThreadPoolExecutor {
    public MyThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime,
            TimeUnit unit, BlockingQueue<Runnable> workQueue) {
        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);
    }

    @Override
    public void afterExecute(Runnable r, Throwable t) {
        super.afterExecute(r, t);
        // If submit() method is called instead of execute()
        if (t == null && r instanceof Future<?>) {
            try {
                Object result = ((Future<?>) r).get();
            } catch (CancellationException e) {
                t = e;
            } catch (ExecutionException e) {
                t = e.getCause();
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
        if (t != null) {
            // Exception occurred
            System.err.println("Uncaught exception is detected! " + t
                    + " st: " + Arrays.toString(t.getStackTrace()));
        }
        // ... Perform cleanup actions
    }
}

final class MyTask implements Runnable {
    @Override public void run() {
        System.out.println("My task is started running...");
        // ...
        throw new ArithmeticException(); // uncatched exception
        // ...
    }
}

public class ThreadPoolExecutorHandler {
    public static void main(String[] args) {
        // Create a fixed thread pool executor
        ExecutorService threadPool = new MyThreadPoolExecutor(10, 10, 0L, TimeUnit.MILLISECONDS,
                new LinkedBlockingQueue<>());
        threadPool.execute(new MyTask());
        // ...
    }
} 
```

来源：[https](https://medium.com/@aozturk/how-to-handle-uncaught-exceptions-in-java-abf819347906) ://medium.com/@aozturk/how-to-handle-uncaught-exceptions-in-java-abf819347906 （请注意，我将此处发布的代码修改为不重新执行，因为问题只要求堆栈跟踪印刷）

# php - How do I display only images from a folder that start with letter A?

> ID：12896352
> 
> 赞同：0
> 
> 时间：2012-10-15T13:12:03.340
> 
> 标签：php

> **Possible Duplicate:**
> [Displaying Images from a folder using PHP](https://stackoverflow.com/questions/8794369/displaying-images-from-a-folder-using-php)

This code display all my images from uploadedImages folder, but If I want to display only images from uploadedImages folder that start with letter A, how do I do that?

```
<?php 
        $files = glob("../uploadedImages/*.*");
        for ($i=0; $i<count($files); $i++)
        {
            $num = $files[$i];
            echo '<img src="'.$num.'" alt="Lunda-Bilder" />'."<br/><br/><br/><br/>";
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:14:09.940

就像

```
$files = glob("../uploadedImages/A*.*"); 
```

如果您想对其进行更多改进以便返回图像，您可以使用

```
$files = glob("../uploadedImages/[aA]*.{jpg,png,gif,bmp}", GLOB_BRACE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:16:48.060

```
<?php 
$files = glob("../uploadedImages/{A,a}*.*", GLOB_BRACE);
for ($i=0; $i<count($files); $i++)
{
    $num = $files[$i];
    echo '<img src="'.$num.'" alt="Lunda-Bilder" />'."<br/><br/><br/><br/>";
}
?> 
```

# c - Runtime typechecking for pointers

> ID：12896353
> 
> 赞同：4
> 
> 时间：2012-10-15T13:12:14.807
> 
> 标签：c, c-libraries

I want to know how scanf function is implemented. (Just for fun of course) Number of arguments is variable, so it's certainly implemented by `va_list`, `va_arg` macros.

It also throws some warnings, when number of arguments does not match with format string. This could be done by parsing format string and comparing it with number of arguments. No magic.

The only thing that I can't see how implemented, is type checking. When type of an argument (pointer to a data) does not match corresponding declaration in format literal, `scanf` produces a warning. How can one check type of data that a pointer points to?

Example:

```
#include<stdio.h>
int main()
{
    char buffer1[32], buffer2[32];
    int n; 
    double x;
    scanf("%s %s %d",buffer1, buffer2, &x); // warning
    scanf("%s %s %d",buffer1, buffer2, &n); // ok
} 
```

Output:

```
warning: format ‘%d’ expects argument of type ‘int *’,
but argument 4 has type ‘double *’ [-Wformat] 
```

AFAIK the C library is not a part of C language/Compiler, so there is nothing language-related in `<stdio.h>`. I'm assuming the warning is produced by implementation of `scanf`, not by compiler [?]. (Maybe using `#warning`)

If I want to do something similar in some code, how do I know which data type a pointer is pointing to?

**Note**: I have downloaded source code of GNU C library and looked at `scanf.c`. I can't find my way through the very complicated code. There is a lot of `#ifndef` s and calls to other functions with strange names and structure...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:17:16.343

此检查由 gcc 编译器处理，特别是针对 scanf/printf 函数。

这是一个非常常见的错误，值得为这些函数在编译器中添加特殊情况代码。

在此处查看 GCC -WFormat 标志：http: [//gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Warning-Options.html)

> -Wformat ：检查对 printf 和 scanf 等的调用，以确保提供的参数具有适合指定格式字符串的类型，并且格式字符串中指定的转换有意义。这包括 printf、scanf、strftime 和 strfmon（X/Open 扩展，不在 C 标准中）系列中的标准函数和格式属性指定的其他函数（请参阅函数属性）。

并非所有编译器都实现了这些检查，因此它当然不是可以依赖的。

使用 GCC，您可以使用[函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)'format' 和 'format-arg' 告诉编译器对您的函数应用相同的检查。

> format (archetype, string-index, first-to-check) format 属性指定函数采用 printf、scanf、strftime 或 strfmon 样式参数，这些参数应根据格式字符串进行类型检查。例如，声明：

```
extern int my_printf (void *my_object, const char *my_format, ...)  
 __attribute__ ((format (printf, 2, 3))); 
```

> ...导致编译器检查对 my_printf 的调用中的参数是否与 printf 样式格式字符串参数 my_format 保持一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:15:53.490

警告由编译器生成。你声明`x`为 a `double`，所以它知道`&x`是 a `double*`。然后它扫描格式字符串并看到格式需要一个`int*`那里，因此它发出警告。

# c++ - Any differentiated base on the place const used

> ID：12896356
> 
> 赞同：0
> 
> 时间：2012-10-15T13:12:30.580
> 
> 标签：c++

> **Possible Duplicate:**
> [C++: const reference, before vs after type-specifier](https://stackoverflow.com/questions/3694630/c-const-reference-before-vs-after-type-specifier)

Any different between these two definitions.

```
 1\.   void foo(Animal const& dog){}

 2\.   void foo(const Animal& dog){} 
```

# c# - 我可以使用 Reporting Services 从标准的多表 Excel 模板生成 Excel 报告吗？

> ID：12896357
> 
> 赞同：2
> 
> 时间：2012-10-15T13:12:44.120
> 
> 标签：c#, .net, sql

我目前开发的 SQL 查询可以从我的共享数据源中获取所需的数据。使用报告服务，我正在使用这些数据显示 Web 报告。

我的要求是将这些数据填充到一个空的 Excel 模板中，然后将这些报告自动邮寄到特定的邮件 ID，而无需单击“导出到 Excel”。这些报告每天生成。

我该怎么做呢？这甚至可以**通过**Reporting Services 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:16:22.163

您可以将报表服务中的报表格式附加到报表服务器链接的末尾。例如，对于 PDF，您可以执行以下操作：

`rs:format=PDF`

示例链接是：

`http://myreportSERVER/reportserver/NameOfReport&rs:Command=Render&rs:format=PDF`

对于excel，它将是`rs:format=EXCEL`

对于电子邮件，您可以使用 rs Web 服务通过电子邮件发送报告，或者使用报告服务对象模型通过“订阅”部分发送报告。这篇文章对你来说可能是一个好的开始：http: [//msdn.microsoft.com/en-us/magazine/cc188712.aspx](http://msdn.microsoft.com/en-us/magazine/cc188712.aspx)

# database - 使用 Fuseki 联合不同的 SPARQL 端点

> ID：12896359
> 
> 赞同：4
> 
> 时间：2012-10-15T13:12:50.793
> 
> 标签：database, sparql, semantic-web, federated-queries

我为一个大型组织工作，该组织拥有许多包含重叠信息的不同关系数据存储。我们正在寻找一种解决方案，可以一次对所有数据进行集成查询。为此，我们正在考虑使用语义网技术。具体来说，我们计划：

*   创建统一的本体
*   将每个数据库映射到这个本体
*   为每个数据库创建一个 SPARQL 端点
*   使用联合引擎将它们统一到一个端点。

我现在正在为这个计划的最后阶段寻找合适的工具。我听说 Fuseki 适合这种情况，但找不到任何相关文件。

您能否就 Fuseki 对这项任务的适当性发表您的意见，或者更好地指出一些适当的文档？

提前致谢！

奥伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:38:09.650

[http://jena.apache.org/](http://jena.apache.org/)

您想阅读有关 Fuseki 的信息，但也想了解 SPARQL 基本联合查询。Fuseki 本身就是一个查询服务器，查询引擎是 ARQ。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:37:46.997

这是最简单的联合查询示例，由 ARQ 引擎（fuseki 的后端）支持：http: [//jena.sourceforge.net/ARQ/service.html](http://jena.sourceforge.net/ARQ/service.html)

您将此查询提交到您的 fuseki 端点，它将关闭并查询“服务 <>”括号中的端点。这当然适用于我，使用带有 fuseki 0.2.6 的 ARQ 2.9.4

# javascript - 我们如何解析 cronExpression 以获取 Javascript 中的下一个触发日期？

> ID：12896363
> 
> 赞同：1
> 
> 时间：2012-10-15T13:13:20.680
> 
> 标签：javascript, cronexpression

我想解析像 ('0 0 8 13 * ?) 这样的 cronExpression 以获取 javascript 中的下一个触发日期。

例如。Cron String (0 0 10 ? * MON-FRI) 上课时间为周一至周五上午 10 点。我需要以 (dd-mm-yyyy) 15-10-2012 格式计算下一个触发日期。

请分享上述问题的代码片段或算法？

# sql - Pro*C：如何实现动态 SQL 插入数据

> ID：12896366
> 
> 赞同：3
> 
> 时间：2012-10-15T13:13:29.003
> 
> 标签：sql, c, dynamic-sql

我是 pro*c 编码和 oracle 的新手。我需要根据特定条件在运行时将数据插入到各种表中。如果我可以使用`dynamic sql method4`. 阅读文档我真的很困惑。

Oracle doc 提供了一些非常好的示例，但确实令人困惑。任何人都可以指出任何易于理解的简单文档或站点或任何易于理解的示例代码。

我是这个论坛的新手，如果我问的太多，请原谅我。和谷歌，我一整天都在这样做，我迷路了。

此外，method4 中有两种类型的实现，`ORACLE`& `ANSI`。ANSI 似乎是一种简单的方法。对此有何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:34:02.177

这是立即执行查询的简单 Pro*C 片段。希望您已经了解创建上下文。

```
int OraExecQuery(sql_context *sql_ctx, char *sql_query)
{
    /* Error Handling formalities */

    EXEC SQL WHENEVER SQLERROR GOTO OracleError;  

    EXEC SQL CONTEXT USE :sql_ctx;  

    EXEC SQL EXECUTE IMMEDIATE :sql_query; 

    EXEC SQL COMMIT; 

    return (/*Success*/);

OracleError:
    /* Handle errors using struct sqlca */
    return (/*Failure*/);
} 
```

我也阅读了 Oracle 提供的必要版本的手册并进行了试用。另一方面，OCI 更难掌握。

# python - 从 setup.py 中获取“build”目录的可靠方法

> ID：12896367
> 
> 赞同：6
> 
> 时间：2012-10-15T13:13:33.600
> 
> 标签：python, numpy, setuptools, distutils, setup.py

在 setup.py 脚本中，我需要为安装创建一些临时文件。放置它们的自然位置是“build/”目录。

如果通过 pypi 从源代码、easy_install、pip 安装，是否有办法检索其路径？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:10:25.873

默认情况下 distutils`build/`在当前工作目录中创建，但可以通过参数更改`--build-base`。似乎 distutils 在执行时解析它`setup`并且解析的参数无法从外部访问，但您可以自己剪切它：

```
import sys
build_base_long = [arg[12:].strip("= ") for arg in sys.argv if arg.startswith("--build-base")]
build_base_short = [arg[2:].strip(" ") for arg in sys.argv if arg.startswith("-b")]
build_base_arg = build_base_long or build_base_short
if build_base_arg:
    build_base = build_base_arg[0]
else:
    build_base = "." 
```

这个朴素的解析器版本仍然比`optparse`' 的版本短，对未知标志进行了适当的错误处理。您也可以使用`argparse`具有`try_parse`方法的解析器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-09-10T18:48:09.057

distutils/setuptools 提供了一个抽象`Command`类，用户可以使用该类将自定义命令添加到其包的设置过程中。这是与内置设置命令类似的同一类，`build`并且`install`是其子类。

作为抽象类的子类的每个类都`Command`必须实现`initialize_options`、`finalize_options`和`run`方法。这些方法名称所指的“选项”是从用户提供的命令行参数派生的类属性（它们也可以具有默认值）。`initialize_options`方法是定义类的选项的地方，方法`finalize_options`是分配类的选项值的地方，`run`方法是使用类的选项值来执行命令功能的地方。

由于命令行参数可能影响多个命令，因此某些命令类可能与其他命令类共享选项。例如，所有 distutils/setuptools 构建命令（`build`、`build_py`、`build_clib`、`build_ext`和`build_scripts`）和`install`命令都需要知道构建目录在哪里。不是让这些命令类中的每一个都定义和解析相同的命令行参数到相同的选项中`build`，而是命令，它是所有这些命令中的第一个要执行的命令，它定义和解析命令行参数和选项，并且所有其他类在其方法中从`build`命令中获取选项值。`finalize_options`

例如，`build`该类在其方法中定义[`build_base`](https://github.com/python/cpython/blob/bb3e0c240bc60fe08d332ff5955d54197f79751c/Lib/distutils/command/build.py#L57)和[`build_lib`](https://github.com/python/cpython/blob/bb3e0c240bc60fe08d332ff5955d54197f79751c/Lib/distutils/command/build.py#L62)选项，然后从其[方法](https://github.com/python/cpython/blob/bb3e0c240bc60fe08d332ff5955d54197f79751c/Lib/distutils/command/build.py#L72)`initialize_options`中的命令行参数计算它们的值。这些类还在其方法中定义了和选项，但它从其方法[中的](https://github.com/python/cpython/blob/17a1b3e63a5db4e581c0ef52751df2314f7249fa/Lib/distutils/command/install.py#L389)[命令](https://github.com/python/cpython/blob/17a1b3e63a5db4e581c0ef52751df2314f7249fa/Lib/distutils/command/install.py#L389)中获取这些选项的值。[`finalize_options`](https://github.com/python/cpython/blob/bb3e0c240bc60fe08d332ff5955d54197f79751c/Lib/distutils/command/build.py#L72)`install`[`build_base`](https://github.com/python/cpython/blob/17a1b3e63a5db4e581c0ef52751df2314f7249fa/Lib/distutils/command/install.py#L224)[`build_lib`](https://github.com/python/cpython/blob/17a1b3e63a5db4e581c0ef52751df2314f7249fa/Lib/distutils/command/install.py#L225)`initialize_options`[`build`](https://github.com/python/cpython/blob/17a1b3e63a5db4e581c0ef52751df2314f7249fa/Lib/distutils/command/install.py#L389)`finalize_options`

您可以使用相同的模式将自定义子命令添加到`build`命令中，如下所示（类似于`install`）

```
import setuptools
from distutils.command.build import build

class BuildSomething(setuptools.Command):

  def initialize_options(self):
    # define the command's options
    self.build_base = None
    self.build_lib = None

  def finalize_options(self):
    # get the option values from the build command
    self.set_undefined_options('build',
                               ('build_base', 'build_base'),
                               ('build_lib', 'build_lib'))

  def run(self):
    # do something with the option values
    print(self.build_base)  # defaults to 'build'
    print(self.build_lib)

build_something_command = 'build_something'

class Build(build):

  def has_something(self):
    # update this to check if your build should run
    return True

  sub_commands =  [(build_something_command, has_something)] + build.sub_commands

COMMAND_CLASS = {
  build_something_command: BuildSomething,  # custom command
  'build': Build  # override distutils/setuptools build command
}

setuptools.setup(cmdclass=COMMAND_CLASS) 
```

或者，如果您只想扩展它的功能并且它已经具有您需要的选项，您可以只继承 distutils/setuptools 类之一

```
import setuptools
from setuptools.command.build_py import build_py

class BuildPy(build_py):

  def initialize_options(self):
    pass

  def finalize_options(self):
    pass

  def run(self):
    # do something with the option values
    print(self.build_lib)  # inherited from build_py
    build_py.run(self)  # make sure the regular build_py still runs

COMMAND_CLASS = {
  'build_py': BuildPy  # override distutils/setuptools build_py command
}

setuptools.setup(cmdclass=COMMAND_CLASS) 
```

Unfortunately, none of this is very well documented anywhere. I learned most of it from reading the [distutils](https://github.com/python/cpython/tree/17a1b3e63a5db4e581c0ef52751df2314f7249fa/Lib/distutils/command) and [setuptools](https://github.com/pypa/setuptools/tree/1ba66c1d79bf2e89d1d7be426bde60298c9439cd/setuptools/command) source code. Any of the `build*.py` and `install*.py` files in either repository's `command` directory is informative. The abstract `Command` class is [defined in distutils](https://github.com/python/cpython/blob/17a1b3e63a5db4e581c0ef52751df2314f7249fa/Lib/distutils/cmd.py).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-06T00:09:26.913

也许是这样的？在我的情况下适用于 python 3.8

```
...
from distutils.command.build import get_platform
import sys
import os
...
def configuration(parent_package='', top_path=None):

    config = Configuration('', parent_package, top_path)
    # add xxx library
    config.add_library('xxx',['xxx/src/fil1.F90',
                            'xxx/src/file2.F90',
                            'xxx/src/file3.F90'],
                            language='f90')

    # check for the temporary build directory option
    _tempopt = None
    _chkopt = ('-t','--build-temp')
    for _opt in  _chkopt:
        if _opt in sys.argv:
            _i = sys.argv.index(_opt)
            if _i < len(sys.argv)-1:
                _tempopt = sys.argv[_i+1]
                break
    # check for the base directory option
    _buildopt = 'build'
    _chkopt = ('-b','--build-base')
    for _opt in  _chkopt:
        if _opt in sys.argv:
            _i = sys.argv.index(_opt)
            if _i < len(sys.argv)-1:
                _buildopt = sys.argv[_i+1]
                break    

    if _tempopt is None:
        # works with python3 (check distutils/command/build.py)
        platform_specifier = ".%s-%d.%d" % (get_platform(), *sys.version_info[:2])
        _tempopt = '%s%stemp%s'%(_buildopt,os.sep,platform_specifier)

    # add yyy module (wraps fortran code in xxx library)
    config.add_extension('fastpost',sources=['yyy/src/fastpost.f90'],
                          f2py_options=['--quiet'],
                          libraries=['xxx'])

    # to access the mod files produced from fortran modules comppilaton, add 
    # the temp build directory to the include directories of the configuration
    config.add_include_dirs(_tempopt)
    return config

setup(name="pysimpp",
      version="0.0.1",
      description="xxx",
      author="xxx",
      author_email="xxx@yyy",
      configuration=configuration,) 
```

# java - OneToMany/ManyToOne 关系的休眠条件

> ID：12896376
> 
> 赞同：4
> 
> 时间：2012-10-15T13:14:11.997
> 
> 标签：java, many-to-one, hibernate-criteria, hibernate-onetomany

我在两个对象之间有 OneToMany/ManyToOne 关系，例如：

```
public class Company {
    private Long compid;
    private String companyName;

    @OneToMany(mappedBy = "company", cascade = CascadeType.ALL)
    @LazyCollection(LazyCollectionOption.FALSE)
    private List<Employee> employees;
}

public class Employee {
    private Long empid;
    private String fstName;
    private String lstName;
    private String sal;

    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    @NotFound(action = NotFoundAction.IGNORE)
    @JoinColumn(name = "compid", nullable = true)
    private Company company;
} 
```

我想得到拥有`company.companyName like xxxx%`. 我试过类似的东西：

```
Criteria criteria = session.createCriteria(Employee.class);
criteria.createAlias("company", "company");
criteria.add(Restrictions.like("company.companyName ", "xxxx%"));
return criteria.list(); 
```

但我得到错误：

```
could not resolve property: company.companyName of: Employee 
```

这段代码的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:09:24.040

你应该使用`criteria.createCriteria`而不是`criteria.createAlias`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:20:18.307

您已经添加了一个空格，例如`"company.companyName "`在第 3 行标准中。是错字吗？如果不是，那么它就是问题的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:17:17.803

我找到了问题的根源，这是我的一个愚蠢的错误，在我的原始代码中我输入了 compny.companyName，我忘记了公司中的“a”，它工作得很好。

# mercurial - 我们如何在进行 hg pull 时删除临时历史记录？

> ID：12896377
> 
> 赞同：0
> 
> 时间：2012-10-15T13:14:20.167
> 
> 标签：mercurial, history, pull

如果我想将更改从本地分支拉到我的主流分支，并且不希望主分支中本地分支的临时变更集历史记录。我们怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:07:38.590

由于推送时不可能省略变更集，因此您可以尝试此解决方案，完全不清楚，但您可以这样做。想象一下你的本地 hg 日志是这样的：

*   5：顶部（您希望在主分支中拥有此变更集）
*   4：（本地变更集）
*   3：（本地变更集）
*   2：（本地变更集）
*   1：更改集已经在主分支中的内容，应该是从本地新推送的更改集的父级

如果我有这个问题，我会更新到 1，然后从 5 恢复所有更改（所以我将拥有与 5 相同的工作目录）然后临时提交（6），这个临时提交（与更改集 5 相同）我会推送进入主要。在您的本地，您可以合并 5 和 6 并继续，但总会有从本地到 main 的传出变更集。命令如下所示：

1.  汞上升 1
2.  hg revert -r 5 -a （现在您的工作目录与 5 相同）
3.  hg ci -m "将在主分支中显示的提交名称"
4.  hg push -r 6 main_branch_path

但是正确的解决方案是，当我们以这种方式使用它时，将所有开发变更集也保留在 main 中。高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:27:46.200

1.  您无法在**推送到**服务器时重写变更集历史记录
2.  您可以在推送之前在本地存储库中重写本地历史记录
3.  您可以执行部分​​推送并仅发送特定的分支`hg push -b ...`，而不是整个回购

1-3个手段的巩固

*   你必须有新的、单独的可推送分支
*   您将合并到此分支并折叠它的历史记录（MQ 补丁，添加扩展名：histedit|collapse）
*   只推送这个分支

# android - 如何在使用 WebView 查看文档时从 Google Doc 中隐藏下载选项？

> ID：12896379
> 
> 赞同：4
> 
> 时间：2012-10-15T13:14:24.377
> 
> 标签：android, google-docs

以下代码在页面上有下载选项。我想删除此选项，并且只授予访问者阅读而不是下载的权限。

```
WebView mWebView = (WebView) findViewById( R.id.WebView01);
String pdfurl = ""; // Url of pdf or doc file.

String weblink="http://docs.google.com/gview?embedded=true&url="+pdfurl;    
mWebView.loadUrl(weblink); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T12:43:27.490

使用 jsoup 使用 http 连接解析 html ....捕获下载链接所在的标签并禁用它...解析需要几秒钟，但可以有效地工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T12:42:14.290

```
webview.setWebViewClient(new WebViewClient() { 
            @Override 
            public void onReceivedError(WebView view, int errorCode,
                                        String description, String failingUrl) {

            } 

            @Override 
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true; 
            } 

            @Override 
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);
                webview.loadUrl("javascript:(function() { " + 
                        "document.getElementsByClassName('ndfHFb-c4YZDc-GSQQnc-LgbsSe ndfHFb-c4YZDc-to915-LgbsSe VIpgJd-TzA9Ye-eEGnhe ndfHFb-c4YZDc-LgbsSe')[0].style.display='none'; })()"); 
            } 

            @Override 
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);

            } 
        }) 
```

# objective-c - 放大滚动视图ios6

> ID：12896381
> 
> 赞同：0
> 
> 时间：2012-10-15T13:14:28.090
> 
> 标签：objective-c, ios, uiscrollview, ios6, autoresizingmask

我正在尝试在滚动视图中实现一个简单的 ImageView 来显示图像。我想特别实现捏缩放功能。我实现了以下代码（取自苹果网站上的一个 Objective C 示例代码）。我在 ios 5 上彻底测试了缩放，似乎没有问题。但是，当我将代码移植到 ios 6 并测试缩放功能时，一段时间后我收到以下错误消息，并且我的应用程序因缩放结果倾斜而崩溃。

无法同时满足约束。以下列表中的至少一个约束可能是您不想要的。试试这个：（1）查看每个约束并尝试找出您不期望的；(2) 找到添加了一个或多个不需要的约束的代码并修复它。（注意：如果您看到不理解的 NSAutoresizingMaskLayoutConstraints，请参阅 UIView 属性 translatesAutoresizingMaskIntoConstraints 的文档）

NSAutoresizingMaskLayoutConstraint:0x8808360 h=--- v=--- V:[UIWindow:0x744db00(480)], NSLayoutConstraint:0x71286d0 UIView:0x71222c0.bottom == UIWindow:0x744db00.bottom, NSLayoutConstraint:0x7128650 V:|-(20) -[UIView:0x71222c0] (名称: '|':UIWindow:0x744db00), NSLayoutConstraint:0x7120c50 UIImageView:0x7451630.bottom == UIScrollView:0x71206f0.bottom, NSLayoutConstraint:0x7120c90 V:|-(0)-[UIImageView:0x7451630] （名称：'|':UIScrollView:0x71206f0），NSLayoutConstraint:0x7120bd0 UIImageView:0x7451630.centerY == UIScrollView:0x71206f0.centerY, NSLayoutConstraint:0x7122a50 V:|-(10)-[UIScrollView:0x71206f0] （名称：'|' :UIView:0x71222c0), NSLayoutConstraint:0x7122940 V:[UIScrollView:0x71206f0]-(38)-| （名称：'|':UIView:0x71222c0）

将尝试通过打破约束来恢复

中断 objc_exception_throw 以在调试器中捕获它。中列出的 UIView 上的 UIConstraintBasedLayoutDebugging 类别中的方法也可能会有所帮助。

我试着用谷歌搜索这个问题，但我没有得到好的结果。我正在使用的代码如下。非常感谢帮助

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // set the tag for the image view
    [self.imageView setTag:ZOOM_VIEW_TAG];

    // calculate minimum scale to perfectly fit image width, and begin at that scale
    NSLog(@"[imageScrollView frame].size.width : %f",[self.scrollVIew frame].size.width);
    NSLog(@"[imageView frame].size.width : %f",[self.imageView frame].size.width);

    NSLog(@"[imageScrollView frame].size.height : %f",[self.scrollVIew frame].size.height);
    NSLog(@"[imageView frame].size.height : %f",[self.imageView frame].size.height);

    float minimumScale = [self.scrollVIew frame].size.width  / [self.imageView frame].size.width;
    minimumScale = 300.0/1200.0;

    NSLog(@"minimumScale : %f",minimumScale);

    [self.scrollVIew setMinimumZoomScale:minimumScale];
    [self.scrollVIew setZoomScale:minimumScale];

    NSLog(@"imageScrollView.zoomScale : %f",self.scrollVIew.zoomScale);
    NSLog(@"imageScrollView.minimumZoomScale = minimumScale : %f",self.scrollVIew.minimumZoomScale = minimumScale);

    self.scrollVIew.contentSize = CGSizeMake(1200.0, 800.0);
    self.scrollVIew.delegate = self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [self.scrollVIew viewWithTag:ZOOM_VIEW_TAG];
} 
```

维韦克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:13:22.703

您需要以编程方式创建您的`UIImageView`，并添加您的`UIScrollView`. 但是你必须在 viewDidAppear 里面做这个。

只是你的 UIScrollView 可以在 StoryBoard 中制作！

您将设置`scrollView.contentSize`“ `viewDidAppear:(BOOL)animated`”的内部，而不是 viewDidLoad 的内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:24:20.330

在您的 XIB 文件中禁用自动布局。它将位于右侧属性部分中最左侧的选项卡下。您可能在不知情的情况下使用它。如果您有意使用它，请尝试整理您的约束，以免它们相互冲突。

# android - 如何从控制台创建 snapshots.img？

> ID：12896388
> 
> 赞同：5
> 
> 时间：2012-10-15T13:14:48.190
> 
> 标签：android, android-emulator, avd

通过 AVD 管理器创建新的 AVD 时，只需在“创建新的 AVD”窗口中选中正确的选项即可启用快照功能。

![在此处输入图像描述](../Images/7a4402ba0a8ae47e04ed81df864c76ff.png)

创建 AVD 后，您可以找到一个名为`snapshots.img`. `<user-home>/.android/avd/<avd-name>/`它是新 AVD 的快照存储文件。

有人知道如何使用命令行工具获得相同的结果吗？

我已经尝试使用`android create avd`命令以及在 AVD 中设置选项来创建新`snapshot.present=true`的 AVD `config.ini`，但没有创建快照存储。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T12:28:43.333

我终于设法创建了快照存储文件。

要考虑的文档是 QEMU 文档。特别是在 Linux 下，您可以使用该`qemu-img`工具（[此处](http://manpages.ubuntu.com/manpages/lucid/man1/kvm-img.1.html)的文档）。

我`snapshots.img`使用以下命令创建了文件：

`qemu-img create -f qcow2 snapshots.img 500M`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:53:18.707

您也可以这样做`android create avd --snapshot`将为您创建 snapshots.img 文件并设置`snapshot.present=true`标志。

# file - 未创建或复制文件

> ID：12896391
> 
> 赞同：1
> 
> 时间：2012-10-15T13:14:53.633
> 
> 标签：file, vbscript, creation

我有一个长文件名，其中包含许多无关字符，需要减少并在其中附加昨天的日期。我想出了那部分——感谢谷歌。然后我需要将文件从其当前位置移动到另一个网络位置 - 这是我反复失败的部分。我相信这是由于实际上并未创建文件，而只是定义了一个变量。我已经看了这么久，但我没有看到错误。谁能指出我忽略了什么？

我相信您需要的所有部分都在下面发布-

```
Set objFSO = CreateObject("Scripting.FileSystemObject") 
Set objMessage = CreateObject("CDO.Message") 
Set objShell = WScript.CreateObject("WScript.Shell") 
Set objshell = CreateObject("Wscript.shell") 

'On Error Resume Next 

'Get current date 
'----------------------- 
strMonth = Month(Date) 
If len(strMonth) = 1 Then 
        strMonth = "0" & strMonth 
End if 

strDay = Day(Date) 
If Len(strDay) = 1 Then 
        strDay = "0" & strDay 
End if 

strYear = Year(Date) 

'strHour = Hour(Time) 

'strMinute = Minute(Time) 

'strSecond = Second(Time) 

strDate = strYear & strMonth & strDay 

strPastDay = strDate -1 
'----------------------- 

'Specify variables for Emails 

'----------------------------- 
strScriptServer = "TECHOPSPC01" 
strScriptPath = "\\TECHOPSPC01\C$\Scripts\CSI\Capture\..." 
strScriptName = "DFX_Loans_Past_Due file Move to FSCHAUNI01" 
'strToEmail = "" 
'strCCEmail = 
strProcessID = "[LPDR-01]" 
strCustomerImpact = "LOW" 
strCorporateImpact = "LOW??" 
'------------------------------- 

'Specify variables for File Paths 
'strFromPath1 = "\\techopspc01\C$\CSIeSafeDFX\receive" 
'strToPath1 = "\\fschauni01\group_share\special assets retail\special assets\past due report\"
 strFromPath1 = "C:\CSIeSafeDFX\receive" 
strToPath1 = "c:\treasury\Public funds\" 
'Specify variable for File 
strFile1 = "DFX_Loans Past Due by PDR*.xls" 
strNewFile1 = "DFX_LoansPastDueByPDR" 
'#######################' 

If Right(strFromPath1, 1) <> "\" Then 
        strFromPath1 = strFromPath1 & "\" 
End If 

        objShell.Run "cmd /c move ""C:\CSIeSafeDFX\receive\DFX_Loans Past Due by PDR*.xls"" C:\CSIeSafeDFX\receive\DFX_LoansPastDueByPDR"
         Wscript.Sleep 4000 
        strNewFile2 = "DFX_Loans Past Due By PDR" & strPastDay & ".xls" 
        strNewFile2 = strNewFile1 & strPastDay & ".xls" 
        objFSO.CopyFile strFromPath1 & strNewFile2, strToPath1, True 
'        objFSO.DeleteFile strFromPath1 & NewFile1 
        blnEmailNotification = true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:34:48.473

`Copy`在 ASP File 对象上尝试方法，如下所示：

```
dim fs,f
set fs=Server.CreateObject("Scripting.FileSystemObject")
set f=fs.GetFile("c:\test.txt")
f.Copy("c:\new_test.txt",false)
set f=nothing
set fs=nothing 
```

# javascript - Websocket 替换？

> ID：12896397
> 
> 赞同：0
> 
> 时间：2012-10-15T13:15:05.863
> 
> 标签：javascript, web-applications, web

我正在开发一个页面，需要能够根据服务器的状态保持更新。

我喜欢 websockets，因为它们为我提供了一种从服务器推送消息的方式，但可用性是一个问题。

我需要通用的方式在网络服务器和浏览器客户端之间进行双向通信。

我希望能够在我的服务器上容纳大量客户端，因此忙于等待客户端不是一个好的解决方案。

我看过长池，但这就像忙于等待客户端部分一样——如果我需要 IE 支持，这是唯一的方法吗？

这个问题仅与交易的客户端有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:24:21.353

您需要双向通信吗？如果不是，您应该使用[SSE](http://en.wikipedia.org/wiki/Server-sent_events)（服务器发送事件）。它们也更容易在 IE 中模拟（因为 SSE 实际上在旧系统上优雅地降级为长轮询）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:38:06.550

是的，你是对的，长轮询存在问题，它往往会消耗大量资源。

您需要的是我可以看到的解决方案，该解决方案具有回退到 HTTP longopolling 的老而不是 Websockets API 的浏览器。SSE 是一种替代方案，但 Websockets 感觉更方便

如果您在 .NET 平台上运行 XSockets.NET 可以作为替代方案，它支持 Websockets（RFC6544 和 Hybi00）并在需要时回退 HTTP Longpolling（即 IE）

看看[http://xsockets.net](http://xsockets.net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:17:23.177

您查看过[http://signalr.net/](http://signalr.net/)吗？基于 websockets，但会优雅地降级到最近的可用组件以支持套接字类型连接。

文档可以在这里找到：[https ://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

# asp.net-mvc-3 - 使用 MVC 3 Membership 时出现编译错误：'Models' 不存在于'System.Web.Security.Membership' 类型中

> ID：12896401
> 
> 赞同：1
> 
> 时间：2012-10-15T13:15:21.990
> 
> 标签：asp.net-mvc-3, asp.net-membership

我正在尝试遵循一些关于在 MVC 3 中使用标准 ASP.NET 成员资格的教程，只要我在 Visual Studio 2010 中创建 MVC 3 Web 应用程序（Internet 应用程序）并运行示例解决方案并单击“日志”在生成的模板上出现错误：

```
Compiler Error Message: CS0426: The type name 'Models' does not exist in the type 'System.Web.Security.Membership'

Line 28:     
Line 29:     public class _Page_Views_Account_LogOn_cshtml : System.Web.Mvc.WebViewPage<Membership.Models.LogOnModel> { 
```

我四处搜寻，但似乎找不到任何解决方案。这显然是微不足道的，有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:43:35.470

你的项目名称是什么？是会员吗？

发生错误，因为 System.Web.Security.Membership 和 Membership （项目命名空间）之间混淆更改项目名称

# meteor - 在 Spark 中，Landmark 和 Branch Label 有什么区别？

> ID：12896403
> 
> 赞同：0
> 
> 时间：2012-10-15T13:15:31.323
> 
> 标签：meteor

在此处阅读不同的 Spark 注释类型：[https ://github.com/meteor/meteor/wiki/Spark](https://github.com/meteor/meteor/wiki/Spark)

我仍然对需要放置地标和分支标签的位置感到困惑。两者有什么区别，Handlebars 什么时候调用它们？我是[Blade 模板引擎](https://github.com/bminer/node-blade)的作者，我正在尝试将 Blade 与 Spark 集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:11:18.843

在 Handlebars 中，每个模板和每个 {{#constant}}...{{/constant}} 区域都用地标包裹。当 DOM 的一个区域被响应式更新时，为了 DOM 保存、生命周期回调（创建/销毁）和地标本地状态，旧地标和新地标被匹配。

地标由包含它们的分支标签形成的“路径”标识。（地标本身对路径没有贡献。）在同一条路径上有两个地标是非法的。计算将进入标记区域或从函数参数主体到 labelBranch 或 createLabel 的地标的 HTML 也很重要。这是因为当您调用这些函数时，Spark 实际上已经与 DOM 匹配，因此它知道在运行之前是否调用“created”（因为这是一个新的地标）（因为它是对旧地标的重新渲染）计算 HTML 的函数。

Handlebars 在几个地方调用 labelBranch 来区分任何应该不同的模板（地标）调用。基本上，标签应该确定导致模板调用的“调用堆栈”。模板源 ({{> someTemplate}}) 中的每个模板调用都会获得一个标签，并且还会检测循环，根据所讨论对象的 _id 或其他一些启发式方法（如果没有的话）标记循环的每次迭代. （请注意，Meteor 模板中的循环有两种代码路径，一种用于数据库中的可观察游标，另一种用于其他所有内容，例如普通数组。）

在这个包含多次“foo”模板的模板片段中，“foo”的每次调用（包括循环的每次迭代）都是在不同的分支标签中完成的：

```
{{> foo}}
{{> foo}}
{{#each collection}}
  {{> foo}}
{{/each}}
{{> foo}} 
```

如果助手直接调用模板函数怎么办？

```
var myHelper = function () {
  return Template.foo() + " " + Template.bar();
} 
```

在这种情况下，这一天被保存下来，因为模板包还将每个模板包装在一个标签中，如“Template.foo”或“Template.bar”（标签很便宜）。但是，如果一个助手用不同的参数多次调用同一个模板，就会出现重复的地标问题；在这种情况下，由助手删除额外的分支标签以消除歧义。

由模板包（在 deftemplate.js 中）生成的 Template.foo 的实现使用以下嵌套注释，从外部到内部：标签、数据、地标、事件、隔离。这个顺序很受限制。例如，包含事件注释的地标用于查找数据。隔离注释故意在内部。

车把和模板包的当前因素可能不适合添加额外的模板包！这对我们来说是一个新的领域。不过，我们对拥有更多模板语言非常感兴趣，并且很高兴您正在为此努力。

# html - 带有清单的 html5 缓存办公文档

> ID：12896407
> 
> 赞同：1
> 
> 时间：2012-10-15T13:16:09.033
> 
> 标签：html, caching, ms-office, manifest

我正在尝试使用 html5 缓存来存储本地办公文档。我用 ：

*   服务器端的 ASP.NET MVC 4
*   客户端的 Chrome / PC 和 Android 浏览器 / Galaxy Tab (Android 3.1)。

这是我的（测试）页面（我正在处理的页面有点复杂）：

```
<!DOCTYPE html>
<html manifest="/HandlerManifest.ashx">
<head>
<meta name="viewport" content="width=device-width" />
<title>TestCache</title>
</head>
<body>
<a href="/Data/test1.jpg">test1.jpg</a>
<a href="/Data/test.docx">test.docx</a>
</body>
</html> 
```

这是我的清单：

```
CACHE MANIFEST
# v1.0.2.0 du 15/10/2012 14:57:58
CACHE:
/Data/test1.jpg
/Data/test.docx 
```

这在 Chrome/PC 上运行良好。在 Galaxy Tab 上，即使断开连接，我也可以访问 jpg 文件。但是当我访问 docx，连接或断开连接时，出现以下错误：网页不可用

当我删除清单时，一切正常。

你知道我是否只能在 Android Web Browser 上存储某种文件（图像、css、js）吗？或者如果我正在做的事情有问题？

# mysql - 数据库设计 - 数据库中的存储选择

> ID：12896415
> 
> 赞同：2
> 
> 时间：2012-10-15T13:16:26.830
> 
> 标签：mysql, database, database-design

我正在开发一个 Web 应用程序，在实现数据库之前我需要做一些研究。我希望你能在我开始编码之前帮助我做出一些好的决定。

今天我有一个数据库，其中在一个表中包含大约 200 万个联系人

**联系方式：** cid、姓名、电话、地址等...

该应用程序的用户可以根据不同的条件搜索联系人表，并获取联系人列表。

用户存储在单独的数据库表中

**用户：** uid、姓名、电子邮件等...

现在我想让用户能够将搜索结果存储为选择。选择必须是一个 cid 列表，代表用户获得的搜索结果中的每个联系人。当存储选择时，用户可以打开选择并将注释、状态等添加到选择中的不同联系人。

我的第一个想法是制作一个选择表和一个选择联系映射表，如下所示：

**选择：** sid、name、description、uid等

**SelectionContactMap：** sid、cid、status、note等...

平均选择大小在 1 000 到 100 000 个联系人之间，并且有数千名用户存储了许多选择，我看到 SelectionContactMap 表将变得非常大非常快。

数据库是 MySql，应用程序是用 PHP 编写的。我的预算有限，所以我不能在任务上投入无限的硬件。

我在这里走错路了吗？

你有什么建议可以以最好的方式解决这个问题吗？

*   其他数据库？
*   MySql 具体建议，表类型等？
*   其他数据库设计？
*   任何意见和建议表示赞赏。

提前致谢 ：）

——托尔英格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:21:04.333

问题：如果查询结果发生变化——例如：选定的联系人不再具有选定的属性或添加了新联系人，会发生什么情况？

如果答案是“应该更新结果集” - 那么您希望将标准存储在数据库中，而不是结果本身。

如果您需要将结果缓存一段时间，这可能由应用程序而不是数据库更好地处理。

# codeigniter - Smarty - 分配太多变量？

> ID：12896417
> 
> 赞同：0
> 
> 时间：2012-10-15T13:16:30.213
> 
> 标签：codeigniter, smarty, smarty3

我正在使用 Smarty 并尝试在我的 CodeIgniter 网站上实现多语言支持。是否可以将所有可能的语言变量分配在一个位置，以便所有页面都可以使用它，而不管是否使用了语言变量？这种方法很简单，但我担心在 Smarty 中分配太多变量会影响性能。

或者我应该经历只分配每页所需的语言变量的麻烦吗？实施和维护会很痛苦，但对 Smarty 来说可能不会那么昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:14:19.287

答案取决于您是否愿意在上面花费内存。

就性能而言，它不会产生明显的影响（除非您正在加载许多 MB 的文本......我认为这不太可能）。通过一次分配所有变量，内存将略微增加。

我不知道您的服务器设置是什么样的，但是如果您使用的是 PHP-FPM 之类的东西，它会增加每个子进程的内存，所以要记住这一点。不过，根据您存储的数量，它可能几乎为零。

# objective-c - 如何在 iOS 中验证美国或加拿大的邮政编码？

> ID：12896418
> 
> 赞同：4
> 
> 时间：2012-10-15T13:16:31.560
> 
> 标签：objective-c, ios, regex

我想知道有什么方法可以验证美国的邮政编码或加拿大的邮政编码吗？我尝试使用正则表达式。喜欢美国

```
- (BOOL)validateZip:(NSString *)candidate {
    NSString *emailRegex = @"(^{5}(-{4})?$)|(^[ABCEGHJKLMNPRSTVXY][A-Z][- ]*[A-Z]$)";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 

    return [emailTest evaluateWithObject:candidate];   
} 
```

但它不起作用。请任何人对此验证有任何想法。是否有任何其他 api 用于验证？如果可能，请指导我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T14:39:07.427

对于美国，您的量词 ( `{5}`, `{4}`, `?`) 是正确的，但忘记具体说明您要量化的内容。你要：

```
(^[0-9]{5}(-[0-9]{4})?$) 
```

对于加拿大，根据维基百科，格式是`A0A 0A0`，所以我会这样做：

```
(^[a-zA-Z][0-9][a-zA-Z][- ]*[0-9][a-zA-Z][0-9]$) 
```

现在，我会像这样编写完整的表达式，启用不区分大小写：

```
@"^(\\d{5}(-\\d{4})?|[a-z]\\d[a-z][- ]*\\d[a-z]\\d)$" 
```

坦率地说，我实际上并不熟悉 Objective C 或 iOS，遗憾的是我还没有测试过上述内容。但是，以前我看到过这样的帖子提到`NSRegularExpression`，您的代码中缺少它，但也许没有必要。看看其他人的例子，看看你可能犯的其他简单错误。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T01:04:35.370

我们使用了它，但它仅用于英国邮政编码。请参阅@acheong87 答案以更改正则表达式以适合您的标准和其他好的答案。

```
NSString *postcodeRegex = @"[A-Z]{1,2}[0-9R][0-9A-Z]?([0-9][ABD-HJLNP-UW-Z]{2}";//WITH SPACES
NSPredict *postcodeValidate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", postcodeRegex];

if ([postcodeValidate evaluateWithObject:postcodeField.text] == YES) {  
     NSLog (@"Postcode is Valid");  
} else {  
     NSLog (@"Postcode is Invalid");    
} 
```

我建议您首先使用这个很棒的工具[http://www.regexr.com测试正则表达式](http://www.regexr.com)

编辑

经过进一步测试，当前的正则表达式不支持邮政编码中的空格。这将解决该问题。

```
NSString *postcodeRegex = @"[A-Z]{1,2}[0-9R][0-9A-Z]?(\s|)([0-9][ABD-HJLNP-UW-Z]{2}";//WITH SPACES 
```

# ios - iOS 5：tabBarItem setTitleTextAttributes 选择与未选择状态

> ID：12896419
> 
> 赞同：1
> 
> 时间：2012-10-15T13:16:32.467
> 
> 标签：ios, ios5, uitabbaritem

为 UITabBarItem UIControlStateNormal 设置的属性覆盖了 UIControlStateSelected！

```
[navigationCtrl.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [Util colorFromHex:@"474747"], UITextAttributeTextColor, [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0], UITextAttributeTextShadowColor, [NSValue valueWithUIOffset:UIOffsetMake(1.0, 1.0)],  UITextAttributeTextShadowOffset, nil] forState:UIControlStateNormal];

[navigationCtrl.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [Util colorFromHex:@"FCFCFC"],UITextAttributeTextColor, nil]  forState:UIControlStateSelected]; 
```

为什么？

# nsis - 如何检测Windows系统是否安装了DDS？

> ID：12896424
> 
> 赞同：0
> 
> 时间：2012-10-15T13:16:52.850
> 
> 标签：nsis, data-distribution-service

我想使用 nsis 脚本安装 OpenSplice DDS，但我必须知道系统（Windows）中是否安装了 OpenSplice DDS。

根据注册密钥，我们如何检查是否安装了 OpenSplice DDS？

任何人都可以提供 nsis 脚本来根据注册密钥检查 DDS 安装吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:32:34.610

标准的 OpenSplice 安装不会对注册表进行任何更改，因此，您不能使用检查注册表项来发现是否已安装 OpenSplice。只有在安装过程中选中将 OpenSplice 安装为 Windows 服务的选项时，才会将信息插入到注册表中——就像任何 Windows 服务在注册表中都有一个条目一样。由于由用户决定是否选择此选项，因此这不是一个可靠的检查机制。

更好的方法可能是检查是否`%OSPL_HOME%`设置了环境变量。此变量通常由 OpenSplice 安装程序添加到环境中；它指向它的安装目录。

此答案基于以前使用该产品的经验。我无权访问任何当前版本，因此安装过程可能已更改。

# google-maps - 全屏地图未正确显示

> ID：12896426
> 
> 赞同：1
> 
> 时间：2012-10-15T13:16:56.437
> 
> 标签：google-maps, google-maps-api-3

我希望全屏打开地图。我试过这个：

```
<div class="b-firm-map-content" id="map"></div>
<a href="#" onclick="test2();return false;" >full screen</a>

    function test2(){
    var width  = $(window).width()-3;
    var height = $(window).height();

    $('#map').css({
        'width': width,
        'height': height - 40 ,
        'position': 'absolute  ',
        'z-index'   : '900'
    });

 } 
```

但它导致：

*   [http://pixs.ru/showimage/Snimokpng_5811285_6065704.png](http://pixs.ru/showimage/Snimokpng_5811285_6065704.png)
*   [http://pixs.ru/showimage/Snimok1png_4265065_6065745.png](http://pixs.ru/showimage/Snimok1png_4265065_6065745.png)

我的地图没有完全显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:41:57.543

显示地图时触发[google.maps.Map](https://developers.google.com/maps/documentation/javascript/reference#Map) resize 事件（在您设置将显示的 div 的大小之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:35:01.197

像这样更新您的 test2() 函数：

```
function test2(){
  var width  = $(window).width()-3;
  var height = $(window).height();

  $('#map').css({
    'width': width,
    'height': height - 40 ,
    'position': 'absolute  ',
    'z-index'   : '900'
  });

  google.maps.event.trigger(your_map, 'resize');
} 
```

将**your_map**替换为包含地图对象的变量名称。

这是解决 API 不知道您何时以编程方式调整地图容器大小这一事实的解决方案。从文档中：

> 当 div 更改大小时，开发人员应在地图上触发此事件： google.maps.event.trigger(map, 'resize') 。

# windows - 访问 Windows 8 Metro 应用程序中的文件时出现超出范围异常

> ID：12896433
> 
> 赞同：0
> 
> 时间：2012-10-15T13:17:23.617
> 
> 标签：windows, microsoft-metro

下面是我用来访问我正在开发的 Metro 应用程序的资产文件的代码。

```
 async void readFileFromDisk (string fileName, string fileType)
    {
        string fileContent;

        StorageFile file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(fileName);
        using (IRandomAccessStream readStream = await file.OpenAsync(FileAccessMode.Read))
        {
            using (DataReader dataReader = new DataReader(readStream))
            {
                UInt32 numBytesLoaded = await dataReader.LoadAsync((UInt32)readStream.Size);
                fileContent = dataReader.ReadString(numBytesLoaded);
            }
        } 
```

此代码在页面的 Loaded 事件的处理程序中运行。**我目前收到一个例外，说“价值不在范围内”。**错误发生在第一行本身，我尝试从安装文件夹中获取 storagefile 句柄。

调试时，fileName 字符串为 Null。我想，我应该将代码移动到在页面生命周期的后期触发的某个事件，但似乎无法弄清楚最好的地方是什么。建议？？

PS 我需要在用户进行任何交互之前读取此文件，因为它会读取该级别的数据，该用户将与之交互。

编辑：

错过了几件事。从加载事件的处理程序调用以下函数。

```
void Game_Loaded(object sender, RoutedEventArgs e)
    {
        //read all level files to the strings
        readFileFromDisk("//Assets/Levels/Start" + selectedLevel + ".txt", "Start"); 
```

这个处理程序基本上以类似的方式为不同的文件路径调用上述函数。所选级别的字符串是静态变量，而 fileName 字符串是从中创建的。

编辑2：

找到了问题，但距离解决方案还很遥远。readFileFromDist 方法的返回类型引起了麻烦。将其更改为任务，这部分工作正常，但我得到“对象引用未设置为实例”错误。尝试将 Game_Loaded 事件处理程序也转换为异步，以使用 await 运算符，但这给了我“错误返回类型”的编译器错误。

所以，我尝试完全删除异步，但我想我不能这样做。不使用异步功能就无法打开文件。因此，我基本上需要一种方法来调用 readFileFromDisk 函数，使用 await，并在任务完成后继续执行其余代码。类似于函数等待调用的“IsCompleted”事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:18:28.477

解决了！需要使用“ms:appx///Assets/filename.txt”而不是“//Assets/filename.txt”。

# java - 喜欢在 oracle 中搜索？

> ID：12896439
> 
> 赞同：2
> 
> 时间：2012-10-15T13:17:48.110
> 
> 标签：java, sql, oracle, hibernate

我现在有以下代码。我从 UI 中获取字符串列表，如下所示。该列表有 3 个字符串，如下所示。

```
happy%
%hai
%hello% 
```

现在我正在遍历所有 3 个字符串并获取匹配的字符串并将它们添加到最终列表中，如下所示。

```
for(int i=0;i<list.size;i++){
//query to perform like search...
} 
```

我的问题是，我如何将它们包含在单个查询中，而不是触发单独的查询？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:18:41.073

您可以将`OR`运算符与您得到的三个字符串一起使用

`where name like 'happy%' or name like '%appy' or name like '%ppy%'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:46:33.627

您可以根据要求执行多个查询。如果所有三个都需要在结果中，那么您可以`AND`这样使用：

```
SELECT st 
FROM SampleTable st 
WHERE ( st.col1 LIKE 'happy%' ) AND ( st.col2 LIKE '%hai' )
AND ( st.col3 LIKE '%hello%' ) 
```

您也可以使用`OR`，也可以将两者混合搭配。在编写复杂查询时，其`OR`工作方式与`AND`上一个结果中的相同，括号有助于。

此外，您可以使用`NOT`关键字排除某些结果，如下所示：

```
SELECT st 
FROM SampleTable st 
WHERE ( st.col1 LIKE 'happy%' ) AND ( st.col2 NOT LIKE '_hai' ) 
```

*注意：* `_`是一个字符匹配，`%`而是多个。

# z3 - Z3 是否支持 Real-to-Int 转换？

> ID：12896440
> 
> 赞同：4
> 
> 时间：2012-10-15T13:17:48.827
> 
> 标签：z3

在 Z3 中，您必须 to_real 才能获得 Int 的 Real 等价物。是否支持逆转换，即截断、舍入等？在否定的情况下，如果有的话，最适合 Z3 的定义它们的方式是什么？非常感谢大家会回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:08:38.413

是的，Z3 有一个`to_int`将 Real 转换为整数的函数。的语义`to_int`在[SMT 2.0 标准](http://smtlib.cs.uiowa.edu/theories/Reals_Ints.smt2)中定义。这是一个例子：[http ://rise4fun.com/Z3/uJ3J](http://rise4fun.com/Z3/uJ3J)

```
(declare-fun x () Real)

(assert (= (to_int x) 2))
(assert (not (= x 2.0)))

(check-sat)
(get-model) 
```

# jquery - 根据div宽度实时更新jquery变量值

> ID：12896445
> 
> 赞同：0
> 
> 时间：2012-10-15T13:17:57.157
> 
> 标签：jquery, variables, real-time

我正在使用 JQMap Route Calc 插件，它必须设置宽度才能正确显示。为了根据设备屏幕分辨率显示自定义宽度，我使用 $(".locationmap").width() 值根据其父 div 计算其宽度。现在我想知道如何实时更新该值并重新加载该 div，以防用户将屏幕从纵向模式切换到横向模式。有谁知道这是怎么做到的吗？谢谢。

完整的调用如下所示：

```
$('.locationmap').JQMap({
    jqm_Height : 450,
    jqm_Width : $(".locationmap").width(),
    jqm_StartOpacity : 7,              
    jqm_OverlayColor : '#000',
    jqm_Fixdestination : '[[*Map Location]]',
    jqm_ZoomStartPoint : 14
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:22:07.267

尝试这个：

```
$('.locationMap').resize(function() {
     //Your code in here
}); 
```

每次调整具有类 locationMap 的 div 大小时都会调用此方法

# java - 时间作为 SQL 的关键导致错误

> ID：12896446
> 
> 赞同：2
> 
> 时间：2012-10-15T13:17:58.363
> 
> 标签：java, android, sql

我正在尝试修复有关 SQL 的错误（在 Android 中使用），该语句基本上如下所示：

```
INSERT INTO log (time, message) VALUES (datetime('now'),<a_message>); 
```

"datetime(now)" 似乎是数据库的关键，问题是它可以在一毫秒内调用 2 次。如果发生这种情况，将引发 SQL 错误，因为键不是唯一的。

我可以使用 REPLACE 进入，但这会覆盖一个（或多个）条目。我也可以检查错误代码，睡一会儿再试一次。我只是想知道是否有人对这个问题有更好的解决方案？我对 SQL 不是很有经验。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:23:52.387

无论如何，由于时区、闰秒以及许多其他会让您感到惊讶的事情的狂野和毛茸茸的世界，您应该更加犹豫是否将日期时间用作主键。绝对不能保证`a1 = datetime('now')`总是小于或等于下一次调用`a2 = datetime('now')`

阅读这篇文章，大约在他开始谈论日期、时间和时区的 1/3 处。这应该让你相信你不应该尝试做你在这个问题中要求的事情：

[https://msmvps.com/blogs/jon_skeet/archive/2009/11/02/omg-ponies-aka-humanity-epic-fail.aspx](https://msmvps.com/blogs/jon_skeet/archive/2009/11/02/omg-ponies-aka-humanity-epic-fail.aspx)

如果我想要一个快速而肮脏的 hack 解决方法，我会将插入放入一个 while 循环并在插入失败时捕获错误，然后在 1 毫秒后重试。这很糟糕，就像在卧室里弄得一团糟，但有时这是必要的，因为重新设计表以拥有一个合理的主键会花费太长时间。

但是，如果您这样做，请准备好让代码处于该 while 循环中，耐心地尝试并等待数十毫秒，当它最终找到一个开放的插槽时，它并没有达到您的预期，因为它出现了在将来发生的另一个条目之前（实际上是过去）。想到这我就头疼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:24:12.527

简单的。您不使用时间值作为主键。而是使用一个自动递增的额外列（代理键）创建表。

```
CREATE TABLE log (
  id         INTEGER PRIMARY KEY AUTOINCREMENT,
  time       REAL,
  message    TEXT
) 
```

然后，您现有的 INSERT 应该可以正常工作。

如果您需要根据时间字段优化记录检索，您仍然可以这样做；只需为该字段添加索引。请注意，如果您在该字段上使用联接，则具有特定时间并不等于单个特定记录。

# c - 为什么双对齐到 8 字节边界而不是 4 字节

> ID：12896450
> 
> 赞同：1
> 
> 时间：2012-10-15T13:18:18.370
> 
> 标签：c, structure

> **可能重复：**
> [为什么 C 中的 double 是 8 个字节对齐的？](https://stackoverflow.com/questions/10913120/why-double-in-c-is-8-bytes-aligned)

```
structure s{
    char a;
    double b;
    int c;
}d; 
```

d 的 sizeof 是 24。结果是 double 与 8 字节边界对齐。任何人都可以解释为什么它与 8 字节边界而不是 4 字节边界对齐。我读到一些所有元素都对齐到那里的大小？为什么会这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:20:11.523

对齐是实现定义的。

当对象类型有对齐要求时，它是一个小于或等于对象类型大小的值。类型的对齐方式通常与类型的大小相同。

遵循 IEEE-754 时`double`通常对应`IEEE-754` `binary64`8 字节大小的类型。

# vb.net - 如何在页面上呈现用户控件的内部属性？

> ID：12896451
> 
> 赞同：0
> 
> 时间：2012-10-15T13:18:20.980
> 
> 标签：vb.net, user-controls

我正在设计一个用户控件，它试图根据下面的示例标记在页面上创建一个带有各种 TextBox 或 DropDownList 元素的过滤器栏：

```
<gf:GridFilterBar runat="server">
    <filters>
        <filter Label="Field1" Type="TextBox" />
        <filter Label="Field2" Type="DropDownList" />
    </filters>
</gf:GridFilterBar> 
```

使用另一篇文章的灵感，我创建了正确解析此标记并读取每个预期子控件的属性的代码。我遇到的问题是何时在屏幕上实际呈现此信息。我从“Filter”类的“New”子中初始化的每个控件都不会出现在屏幕上。当我在“新”子中放置一个断点并跟踪正在发生的事情时，我可以看到 Filter.New 子被遍历两次并且值被读入，但我从该子中初始化的其他任何内容都没有对页面产生任何影响尽管如此，据我所知，这一切都已成功创建。以下是仅读取 Label 属性的代码示例：

```
Imports System
Imports System.Collections
Imports System.Web
Imports System.Web.UI
Imports System.Web.UI.WebControls

Public Class GridFilterBar
Inherits System.Web.UI.UserControl

Private _Filters As New FiltersClass(Me)

<PersistenceMode(PersistenceMode.InnerProperty)> _
Public ReadOnly Property Filters() As FiltersClass
    Get
        Return _Filters
    End Get
End Property

Private Sub Page_Init(sender As Object, e As System.EventArgs) Handles Me.Init
    DDL.Visible = True
End Sub
End Class

Public Class FiltersClass
Inherits ControlCollection

Public Sub New(ByVal owner As Control)
    MyBase.New(owner)
End Sub

Public Overrides Sub Add(ByVal child As System.Web.UI.Control)
    MyBase.Add(New Filter(child))
End Sub

End Class

Public Class Filter
Inherits HtmlGenericControl

Public Sub New(ByVal GenericControl As HtmlGenericControl)
    Label = GenericControl.Attributes("Label")
    Dim lit As New Literal
    lit.Text = Label.ToString
    Me.Controls.Add(lit)
End Sub

Public Property Label As String = String.Empty

Public Overrides Function ToString() As String
    Return Me.Label
End Function

End Class 
```

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T14:00:44.500

我能够回答我的问题。我在主类中为 CreateChildControls 添加了一个覆盖子，并使用 For Each 循环从每个新初始化的“过滤器”中获取属性集

```
Protected Overrides Sub CreateChildControls()

    For Each filter In Filters

        Dim lit As New Literal
        lit.Text = filter.Label
        Controls.Add(lit)

    Next filter

End Sub 
```

这将 Filter.New 降级为简单地获取属性：

```
Public Sub New(ByVal GenericControl As HtmlGenericControl)
    Label = GenericControl.Attributes("Label")
End Sub 
```

# android - 使用不可点击的 MapView

> ID：12896453
> 
> 赞同：0
> 
> 时间：2012-10-15T13:18:24.883
> 
> 标签：android, click, android-mapview

对于我的应用程序的需要，我需要一个 Mapview 应该像 ImageView 一样工作。

没有默认行为的小地图（用户不允许移动它），我需要在点击它时启动谷歌地图。

我曾尝试使用这样的代码：

```
mapView.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        Intent intent = new Intent(Intent.ACTION_VIEW,
            Uri.parse("geo:<lat>,<long>?q=<lat>,<long>(Label+Name)"));
        startActivity(intent);
    }
}); 
```

但似乎从未调用过 OnClickListener，而且我还没有找到如何禁用地图视图滚动。

感谢您的帮助。

编辑：我已经尝试使用 clickable=false，这是一件好事，因为地图现在已“禁用”并且用户无法移动它，但我无法在单击时启动 GMaps...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:48:44.710

当你设置`clickable(false)`你不能使用`onClick`时，当你设置`clickable(true)`then`onTouch`将成为焦点。`onTouch`因此，如果您的地图视图不可点击，并且如果它不可点击 => 启动活动，请覆盖并检查其内部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:51:09.903

要启动 Google 地图，请使用 onTouchListener，因为单击 mapview 时永远不会调用 onClickListenere。我试过这样：

```
mapView.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            Toast.makeText(getApplicationContext(), "Hello", Toast.LENGTH_SHORT).show();
            Intent intent = new Intent(CurrentActivity.this, NextActivity.class);
            startActivity(intent);
            return false;
        }
    }); 
```

其中 NextActivity 是另一个扩展 MapActivity 的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-30T20:19:12.857

您需要在 mapView 准备好后设置 onClick 侦听器

```
mapView?.getMapAsync {googlemap->

     googlemap. setOnMapClickListener(object : GoogleMap.OnMapClickListener {
         override fun onMapClick(p0: LatLng?) {
            //...
         }

}) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-15T13:30:12.180

在你的 xml 文件中制作`android:clickable="false"`可以帮助你

# python - ZipFile 无法提取带有目录的 zip

> ID：12896454
> 
> 赞同：0
> 
> 时间：2012-10-15T13:18:26.877
> 
> 标签：python, zip

我正在尝试用 Python 解压缩文件。我正在使用以下功能：

```
def unzip(source_filename, dest_dir):
    zf = zipfile.ZipFile(source_filename)
    for member in zf.infolist():
        # Path traversal defense copied from
        # http://hg.python.org/cpython/file/tip/Lib/http/server.py#l789
        words = filter(None, member.filename.split('/'))
        path = dest_dir
        for word in words[:-1]:
            drive, word = os.path.splitdrive(word)
            head, word = os.path.split(word)
            if word in (os.curdir, os.pardir): continue
            path = os.path.join(path, word)
        zf.extract(member, path) 
```

使用名为“gui”的目录解压缩 .zip 时，出现以下错误：

```
Traceback (most recent call last):
  File "MCManager.py", line 137, in add
    unzip(addedFilepath, dirUnzipped)
  File "MCManager.py", line 19, in unzip
    zf.extract(member, path)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/zipfile.py", line 928, in extract
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/zipfile.py", line 962, in _extract_member
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/os.py", line 157, in makedirs
OSError: [Errno 20] Not a directory: '/Users/student/Library/Application Support/minecraft/temp/unzipped/gui/gui' 
```

这是 ZipFile() 的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:54:41.770

检查方法的[文档](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.extract)`extract`，您会发现`path`您的方法通过变量接收的变量`dest_dir`必须是您希望将迭代的 zip 文件的内容提取到的目录的路径。

正如您在问题中所述，`gui`是文件，而不是目录。老实说，你声明

> 使用名为“gui (...)”的文件解压缩 .zip 时

没有多大意义。

此外，您可能想查看该[`os.mkdir`](http://docs.python.org/library/os.html#os.mkdir)方法，以便您可以按需创建目录。

# python - UNIX - Tkinter Window 总是在第一个计划中

> ID：12896456
> 
> 赞同：1
> 
> 时间：2012-10-15T13:18:39.620
> 
> 标签：python, macos, tkinter

> **可能的重复：**
> [让 Tkinter 跳到前面](https://stackoverflow.com/questions/1892339/make-tkinter-jump-to-the-front)

我正在寻找一种解决方案，将 Tkinter 窗口放在前面的计划中......但是当我启动其他程序时，它们会首先出现，隐藏我的窗口。

这只是关于创建一个始终放在第一个计划中的窗口

我尝试了一些技巧，但没有任何效果！谢谢 ！

编辑：

```
from Tkinter import *

def quit():
    fen = Toplevel(root)
    fen.grab_set()
    fen.focus_set()
    b = Button(fen, text = "Ok", command = root.quit).pack()

root = Tk()
bouton = Button(root, text = "Quit", command=quit).pack()
root.mainloop() 
```

但不工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:54:35.683

尝试使用`topmost`参数来`wm_attributes`. 例如：

```
fen.wm_attributes("-topmost", True) 
```

这可能不适用于所有平台；它在某种程度上取决于您正在使用的窗口管理器。

# hibernate - 在使用休眠的集合中交换后不提交

> ID：12896458
> 
> 赞同：1
> 
> 时间：2012-10-15T13:18:41.617
> 
> 标签：hibernate, collections

使用休眠 4.1.7，我有一个带有集合（附件）的类，在映射文件中定义为：

```
<list lazy="false" table="news_attachment" name="attachments">
      <cache usage="nonstrict-read-write"/>
      <key column="news"/>
      <index column="index_attachment"/>
      <many-to-many class="mypackage.Archive" column="attachment" unique="true"/>
</list> 
```

我正在尝试将两个元素交换为：

```
 Archive archive0 = news.getAttachments().get(0);
   Archive archive1 = news.getAttachments().get(1);
   news.getAttachments().set(0, archive1);
   news.getAttachments().set(1, archive0); 
```

但是，在提交时间，我得到了一个可怕的

```
org.hibernate.exception.ConstraintViolationException: Duplicate entry '163703' for key 'attachment' 
```

而且，令我惊讶的是，mysql 更新是：

```
 479 Query     update news_attachment set attachment=163703 where news=53306 and index_attachment=0
          479 Query     update news_attachment set attachment=163703 where news=53306 and index_attachment=0 
```

（令人惊讶的是 id 和 index 总是相同的）。

但是，如果我创建一个新列表，按新顺序设置对象并执行设置器，一切正常。

```
List<Archive> list = new ArrayList<Archive>();
list.add(news.getAttachments().get(1));
list.add(news.getAttachments().get(0));
news.setAttachments(list); 
```

mysql.log 按我的预期输出插入，不同的 id 和索引。

原列表上的操作，不推荐吗？

# asp.net - 无法在 VB.Net 的映射驱动器中上传文件

> ID：12896462
> 
> 赞同：0
> 
> 时间：2012-10-15T13:18:54.460
> 
> 标签：asp.net, vb.net, networking, file-upload

我已尝试多次在网络映射驱动器中远程上传文件，但它引发异常

**找不到路径“X:\test\testing.wav”的一部分。**

我走过互联网/博客/微软帮助网站。更改了一些配置以获得解决方案。最后我失败了。

那么，实际上那里的任何人都可以给我确切的解决方案吗？

问候， 纳兹穆尔哈桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:00:33.647

我要说你不能在文件名中使用“。这可能是一个简单的错字，但你不能在文件名中使用”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:18:37.130

由于这适用于一台机器而不是另一台机器，因此您面临两个问题之一。

1.  生产箱的权限不同于开发/登台箱。验证托管您的应用程序的用户帐户对目标路径具有读/写访问权限。
2.  您的生产框看不到该路径上的文件。这很可能是驱动器映射的问题。而不是指向“x”指向\server\share\。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T06:37:59.123

我有解决办法。创建了一个应用程序池并为池定义了一个用户，该用户可以完全控制共享文件夹并使用 UNC 路径

# java - JPA Eclipselink 继承：更新不起作用

> ID：12896467
> 
> 赞同：1
> 
> 时间：2012-10-15T13:19:07.947
> 
> 标签：java, inheritance, jpa, eclipselink

我在使用 Eclipselink 2.2.0 映射继承时遇到问题。这是我的抽象实体：

```
@Entity
@Inheritance(strategy= InheritanceType.SINGLE_TABLE)
public abstract class Feature extends TenantPossession {

    private FeatureType featureType;

    @Enumerated(EnumType.STRING)
    public FeatureType getFeatureType() {
        return featureType;
    }

    public void setFeatureType(FeatureType featureType) {
        this.featureType = featureType;
    }
} 
```

子类如下所示：

```
@Entity
public class RecordingFeature extends Feature {
    // here some attributes
} 
```

当我第一次保存该功能时，它工作正常。但是当我尝试设置特征类型并保存它时，什么也没有发生。

```
Feature feature = new RecordingFeature();
feature.setType(FeatureType.RECORDING);
feature = featureService.save(feature); // works fine 
```

...提交交易并开始另一笔交易...

```
feature.setType(FeatureType.UNKNOWN);
feature = featureService.save(feature); // seems to work, but type is not set in DB 
```

跟继承有关系吗？我在没有继承的代码中还有其他情况可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:43:40.233

保存（）做什么？确保您更改的是对象的托管版本，而不是分离的对象。

您是否启用了编织？如果禁用编织（更改跟踪）会发生什么？

# android - android 4.0中主线程异常的网络

> ID：12896469
> 
> 赞同：-2
> 
> 时间：2012-10-15T13:19:15.123
> 
> 标签：android

我开发了在 android 4.0.0 版本之前运行良好的应用程序。但在 android 4.0.0 + 版本中，它会强制关闭。它说主线程异常上的网络

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T13:37:21.243

您的应用程序在上面崩溃`Android versions 3.0`但运行良好的`Android 2.x`原因是因为***HoneyComb*** ***Ice Cream Sandwich***和**Jelly Bean**对 UI 线程的滥用更加严格。例如，当运行`HoneyComb`或以上的Android设备在UI线程上检测到网络访问时，`NetworkOnMainThreadException`会抛出a：

```
E/AndroidRuntime(673): java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.example/com.example.ExampleActivity}:android.os.NetworkOnMainThreadException 
```

Android 开发人员的网站上有详细记录为什么会发生这种情况的解释：

`NetworkOnMainThreadException`当应用程序尝试在其主线程上执行网络操作时抛出A。这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。和`` 不允许您在 UI 线程上执行的其他操作`JellyBean`的一些示例是：`ICS``HoneyComb`

1.  **打开一个 Socket 连接（即 new Socket()）。**
2.  **HTTP 请求（即 HTTPClient 和 HTTPUrlConnection）。**
3.  **尝试连接到远程 MySQL 数据库。**
4.  **下载文件（即 Downloader.downloadFile()）。**

If you are attempting to perform any of these operations on the UI thread, you must wrap them in a worker thread. The easiest way to do this is to use of an `AsyncTask`, which allows you to perform asynchronous work on your user interface. An AsyncTask will perform the blocking operations in a worker thread and will publish the results on the UI thread, without requiring you to handle threads and/or handlers yourself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:20:23.730

“主线程异常的网络”似乎是自言自语，不是吗？

```
 new Thread(new Runnable() {
        public void run() {
            yourNetworkStuff();
        }
    }).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:28:38.463

错误本身表示您正在编写连接到主线程上的网络（url 连接）的代码。您可以编写扩展 AsyncTask 的 Async 类。它将执行其他线程。

# java - 如何通过 Internet 对服务器进行 Java RMI 调用

> ID：12896471
> 
> 赞同：3
> 
> 时间：2012-10-15T13:19:26.407
> 
> 标签：java, rmi

我尝试了一个简单的 java rmi 程序，其中客户端对服务器进行远程调用，服务器返回一个字符串。它与通过局域网连接的两台计算机完美配合。如何实现客户端的远程调用，该客户端未通过局域网连接到服务器但服务器和客户端都连接到互联网？我通过将 Client.java 中的 'localhost' 更改为服务器的 IP 地址来尝试以下简单代码。没用。我需要什么才能进行这样的远程调用？

//远程接口 -> MyInterface.java

```
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface MyInterface extends Remote
{
    public String SaySomething() throws RemoteException;
} 
```

//客户端.java

```
import java.rmi.*;
import java.rmi.registry.*;

public class Client
{
    public static void main(String []args)
    {
        System.setProperty( "java.security.policy", "client.policy" );
        if (System.getSecurityManager() == null)
                    System.setSecurityManager(new RMISecurityManager());
        try {
                        String name = "MyInterface";
                        Registry registry = LocateRegistry.getRegistry("localhost",4501);
                        MyInterface mi = (MyInterface) registry.lookup(name);
            System.out.println(mi.SaySomething());
                } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

//服务器.java

```
import java.rmi.*;
import java.rmi.registry.*;
import java.rmi.server.UnicastRemoteObject;

public class Server implements MyInterface
{
    public Server()
    {
        super();
    }
    public String SaySomething()
    {
        return "Server Speaking";
    }
    public static void main(String []args)
    {
        System.setProperty( "java.security.policy", "server.policy" );
        if(System.getSecurityManager() == null)
           System.setSecurityManager(new RMISecurityManager());
            try {
                        String name = "MyInterface";
                        MyInterface mi = new Server();
                        MyInterface stub =(MyInterface) UnicastRemoteObject.exportObject(mi,4501);
                        Registry registry = LocateRegistry.createRegistry(4501);
                        registry.rebind(name, stub);
                        System.out.println("Server bound");
            } catch (Exception e) {
            System.out.println("oops");
                }
    }
} 
```

**我得到以下异常：** java.security.AccessControlException：在 java.security.AccessController.checkPermission 的 java.security.AccessControlContext.checkPermission(AccessControlContext.java:366) 的访问被拒绝 ("java.net.SocketPermission" "xxxx:4501" "connect,resolve") (AccessController.java:555) 在 java.lang.SecurityManager.checkPermission(SecurityManager.java:549) 在 java.lang.SecurityManager.checkConnect(SecurityManager.java:1051) 在 java.net.Socket.connect(Socket.java: 574) 在 java.net.Socket.connect(Socket.java:528) 在 java.net.Socket.(Socket.java:425) 在 java.net.Socket.(Socket.java:208) 在 sun.rmi。位于 sun.rmi.transport.proxy.RMIMasterSocketFactory 的 transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)。createSocket(RMIMasterSocketFactory.java:146) 在 sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613) 在 sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216) 在 sun.rmi .transport.tcp.TCPChannel.newConnection(TCPChannel.java:202) 在 sun.rmi.server.UnicastRef.newCall(UnicastRef.java:340) 在 sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source) 在 Client.main (Client.java:14)爪哇：14）爪哇：14）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T01:12:28.010

除非您使用代码库功能，否则您不需要 RMI 的安全管理器。去掉它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T14:25:13.173

您可能应该检查您的访问权限。

如果您的服务器是您的家用 PC，您应该检查以确保您的路由器允许传入连接（默认情况下它被阻止）。

如果您的服务器是办公室 PC，则它可能被防火墙阻止。

# vb.net - 无法保存；当前被其他用户锁定。OledbException 未处理

> ID：12896475
> 
> 赞同：1
> 
> 时间：2012-10-15T13:19:52.090
> 
> 标签：vb.net, multithreading

我有一个后台工作人员为我做一些数据库工作。我之所以使用后台工作者，是因为数据库工作占用了大量时间。所以代码第一次工作，但是当你继续更新数据库时，你会得到“无法保存；当前被另一个用户锁定。OledbException 未处理”。是解决这个问题的一种方法。这是我的代码

```
 Private Sub DoSaveUsersAuditForUpdate_Click()
    Dim myConn As OleDbConnection = frmLogIn.Conn
    SyncLock myConn
        'Insert Previous data before the Update
        'myConn = frmLogIn.Conn
        Dim cmdInsert As OleDbCommand = New OleDbCommand("Insert INTO UsersAudit (Reference,Comment) VALUES (?,?)", myConn)
        cmdInsert.Parameters.Add("@Reference", OleDbType.WChar).Value = txtReference.Text
        cmdInsert.Parameters.Add("@Comment", OleDbType.WChar).Value = "Update Existing Users Details"
        myConn.Open()
        cmdInsert.ExecuteNonQuery()
        myConn.Close()

    End SyncLock

    Dim myKonn As OleDbConnection = frmLogIn.Conn
    SyncLock myKonn
        'Insert Current data after the Update
        'myKonn = frmLogIn.Conn
        Dim cmdInsertOriginal As OleDbCommand = New OleDbCommand("Insert INTO UsersAudit (Reference,Comment) VALUES (?,?)", myKonn)
        cmdInsertOriginal.Parameters.Add("@Reference", OleDbType.WChar).Value = txtReference.Text
        cmdInsertOriginal.Parameters.Add("@Comment", OleDbType.WChar).Value = "New User"
        myKonn.Open()
        cmdInsertOriginal.ExecuteNonQuery()
        myKonn.Close()
    End SyncLock
End Sub 
```

我是这样称呼它的

```
 Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As        System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    DoSaveUsersAuditForUpdate_Click()
End Sub 
```

这一切都聚集在一起

```
 Private Sub btnUpdate_Click(sender As System.Object, e As System.EventArgs)Handles  btnUpdate.Click 
```

BackgroundWorker1.RunWorkerAsync() '将 workerThread 作为新线程（AddressOf DoSaveUsersAuditForUpdate_Click）'workerThread.Start() DoUpdateUsers_Click(sender, e) UsersGridViewGridFormating() End Sub

```
 Private Sub UsersGridViewGridFormating()
    Dim myConn As OleDbConnection = frmLogIn.Conn

    SyncLock myConn
        Dim iSql As String = "SELECT *   FROM  Users WHERE UserDeleted =@UserDeleted"

        Dim da As New OleDbDataAdapter(iSql, myConn)
        da.SelectCommand.Parameters.AddWithValue("@UserDeleted", False)
        dTable.Clear()
        da.Fill(dTable)
        myConn.Close()
        Dim dv As DataView = New DataView(dTable)
        dv.Sort = "UserName asc"
        dTable = dv.ToTable

        UsersMasterGridview.DataSource = dTable                                  

        UsersMasterGridview.Visible = True

        UsersMasterGridview.Focus()

        lblNumberofRecords.Text = dTable.Rows.Count & " Records"

    End SyncLock

End Sub 
```

任何帮助我正在使用的所有代码

# r - igraph 中有向图的派系

> ID：12896477
> 
> 赞同：4
> 
> 时间：2012-10-15T13:20:01.237
> 
> 标签：r, igraph, directed-graph, clique

我正在开发一个基于 R 中的追随者关系的 Twitter 网络。在这个网络中，我想确定每个人都可以在他或她的时间线中阅读彼此推文的最大派系的规模。因此我需要最大的.cliques。但是这个函数忽略了方向性。我知道它没有集成在 igraph 包中，但是有没有办法在有向网络中找到派系，每个节点都主动和被动地相互连接？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T13:31:46.423

对于这个问题，您可以将问题的有向实例转换为无向实例。考虑任何两个节点，如果它们之间只有一个有向边，您知道它们不能成为您定义的集团的一部分。因此，如果没有对应的 (v,u)，我们可以忽略任何边 (u,v)。否则，如果我们同时拥有 (v,u) 和 (u,v)，则它等价于无向边。

换句话说，当且仅当存在有向边 u -> v 和 v -> u 时，我们创建一个边在 u 和 v 之间的无向图 G'。在 G' 中找到一个派系应该会在 G 中找到等效的派系。

# c# - 单元测试和构造函数依赖注入

> ID：12896480
> 
> 赞同：7
> 
> 时间：2012-10-15T13:20:11.057
> 
> 标签：c#, unit-testing, dependency-injection, ninject

我有一个关于如何设计适合单元测试的应用程序的问题。

我正在尝试实施 SRP（单一职责原则），据我了解，这涉及将大多数功能拆分为单独的专用类，以使代码更有条理。例如，我有这个特定的场景。

一个类`RecurringProfile`，它有一个方法`.ActivateProfile()`。此方法的作用是将状态标记为已激活，并为下一个到期日创建下一个（第一次）定期付款。例如，我将拆分功能以在单独的类中创建下一次定期付款`RecurringProfileNextPaymentCreator`。我的即时想法是让这个类`'RecurringProfile'`在它的构造函数中作为参数：

```
RecurringProfileNextPaymentCreator(IRecurringProfile profile) 
```

但是，我认为这对于单元测试来说是有问题的。我想创建一个测试`ActivateProfile`功能的单元测试。此方法将通过依赖注入 (Ninject) 获取一个实例`IRecurringProfileNextPaymentCreator`，并调用该方法`.CreateNextPayment`。

我创建单元测试的想法是创建一个 , 的模拟`IRecurringProfileNextPaymentCreator`并替换它，以便我可以验证`.ActivateProfile()`实际调用的方法。但是，由于构造函数参数，这不适合作为 NInject 的默认构造函数。必须为这种情况创建一个自定义的 NInject 提供程序（我可以在整个解决方案中拥有许多这样的类）会有点矫枉过正。

任何想法/最佳实践将如何去做？

-- 下面是关于上述示例的示例代码：（请注意，代码是手写的，在语法上并非 100% 正确）

```
public class RecurringProfile
{
    public void ActivateProfile()
    {
        this.Status = Enums.ProfileStatus.Activated;
        //now it should create the first recurring payment
        IRecurringProfileNextPaymentCreator creator = NInject.Get<IRecurringProfileNextPaymentCreator>();
        creator.CreateNextPayment(this); //this is what I'm having an issue about 
    }
} 
```

和一个示例单元测试：

```
public void TestActivateProfile()
{   
    var mockPaymentCreator = new Mock<IRecurringProfileNextPaymentCreator>();
    NInject.Bind<IRecurringProfileNextPaymentCreator>(mockPaymentCreator.Object);

    RecurringProfile profile = new RecurringProfile();
    profile.ActivateProfile();
    Assert.That(profile.Status == Enums.ProfileStatus.Activated);
    mockPayment.Verify(x => x.CreateNextPayment(), Times.Once());

} 
```

转到示例代码，我的问题是，将 RecurringProfile 作为参数传递给`creator.CreateNextPayment()`方法是否是一种好习惯，或者`RecurringProfile`在获取`IRecurringProfileNextPaymentCreator`，考虑到`IRecurringProfileNextPaymentCreator`将始终对 an`IRecurringProfile`进行操作以创建下一笔付款。希望这能让问题更清楚一些。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T07:22:58.200

在此类单元测试期间，您不应该使用您的 DI 容器（Ninject）。在更新被测类时，您将手动注入模拟对象。然后验证调用是在模拟上进行的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T11:53:55.847

因为你没有显示任何代码我猜你想做这样的事情

```
public class RecurringProfile
{
  private readonly DateTime _dueDate;
  private readonly TimeSpan _interval;
  public RecurringProfile(DateTime dueDate, TimeSpan interval)
  {
    _dueDate = dueDate;
    _interval = interval;
  }
  public bool IsActive { get; private set; }
  public DateTime DueDate
  {
    get { return _dueDate; }
  }
  public TimeSpan Interval
  {
    get { return _interval; }
  }
  public RecurringProfile ActivateProfile()
  {
    this.IsActive = true;
    return new RecurringProfile(this.DueDate + this.Interval, this.Interval);
  }
} 
```

这还不够简单吗？

* * *

**更新**

不要滥用 DI 容器作为 ServiceLocator。您将支付创建者作为 ctor 参数注入的想法是正确的方法。[ServiceLocator 被认为是现代应用程序架构中的反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。类似下面的代码应该可以正常工作。

```
[TestClass]
public class UnitTest1
{
  [TestMethod]
  public void TestMethod1()
  {
    var mock = new Mock<INextPaymentCreator>();
    DateTime dt = DateTime.Now;
    var current = new RecurringProfile(mock.Object, dt, TimeSpan.FromDays(30));
    current.ActivateProfile();
    mock.Verify(c => c.CreateNextPayment(current), Times.Once());
  }
}
public class RecurringProfile
{
  private readonly INextPaymentCreator _creator;
  private readonly DateTime _dueDate;
  private readonly TimeSpan _interval;
  public RecurringProfile(INextPaymentCreator creator, DateTime dueDate, TimeSpan interval)
  {
    _creator = creator;
    _dueDate = dueDate;
    _interval = interval;
  }
  public bool IsActive { get; private set; }
  public DateTime DueDate
  {
    get { return _dueDate; }
  }
  public TimeSpan Interval
  {
    get { return _interval; }
  }
  public RecurringProfile ActivateProfile()
  {
    this.IsActive = true;
    var next = this._creator.CreateNextPayment(this);
    return next;
  }
}

public interface INextPaymentCreator
{
  RecurringProfile CreateNextPayment(RecurringProfile current);
} 
```

# c++ - 包含 boost::numeric::ublas::matrix 的类的运算符重载

> ID：12896482
> 
> 赞同：1
> 
> 时间：2012-10-15T13:20:11.247
> 
> 标签：c++, boost, operator-overloading, class-template

我有一个类模板，它有一个提升矩阵作为私有成员变量。矩阵数据类型由构造时的类类型决定。这个类有一个成员函数，应该向成员矩阵添加一个常量。该常数与矩阵数据类型一致。我在编写一个重载运算符时遇到问题，它将为任意常量值返回一个更新的成员矩阵。目前，另一个成员函数执行此添加。我的代码如下；

```
/*content from main.cpp compiled with `g++ -o main main.cpp` */
#include <iostream>
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>

using namespace boost::numeric::ublas;
using namespace std;

template <typename T>
class MTool
{
private:
matrix<T> m_ME;

public: 
MTool(int N, int M) { m_ME.resize(M, N); } // constructor
~MTool() { m_ME.clear(); } // destructor
void PutMatValues(); // insert values into member matrix
void AddConst(const T &k) { m_ME+=k; } // add a constant to member matrix 
void PrintMat() { cout << "The ME " << endl << m_ME << endl; } // print the member matrix

// overloaded operator function
matrix<T> operator+ <> (const T& kvalue) { return (m_ME+kvalue); }  
};

template<typename T>
void MTool<T>::PutMatValues()
{
    for (unsigned row=0; row<m_ME.size1(); row++)
        for (unsigned col=0; col<m_ME.size2(); col++)   
            m_ME(row,col)=static_cast<T> (row*col);
} 

int main()
{
    MTool<double> mymat(5, 3); 
    double dk=123.67001;

    mymat.PutMatValues();   
    mymat.PrintMat();
    mymat.AddConst(dk);
    mymat.PrintMat();

    return 0; 
} 
```

我得到的一些编译器错误是

> 错误：主模板声明中的模板 ID 'operator+<>'
> 
> 错误：'((MTool*)this)->MTool::m_ME += k'中的'operator+='不匹配</p>

我对 C++ 模板和类相当陌生，并且确信我的方法中缺少一些基本的东西。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:20:45.110

第一个只是一个语法错误，这个成员 operator+ 将被写为

```
MTool<T> operator+ (const T& kvalue) const { ... 
```

尽管将二进制加号运算符视为成员函数有点不寻常：它几乎总是作为非成员实现，因此您可以编写表达式`c + M`以及`M + c`.

第二个错误只是指出`boost::numeric::ublas::matrix`没有`operator+=`采用标量参数。也没有`operator+`可以添加矩阵和标量的，因此`m_ME+kvalue`您的 operator+ 中的表达式也不会编译。

加法只在形状相同的矩阵之间定义。如果要将标量添加到矩阵的每个元素，则需要编写如下内容：

```
void AddConst(const T &k) {
    for(auto& element : m_ME.data())
           element += k;
} 
```

# cordova - Sencha touch 2 和黑莓

> ID：12896488
> 
> 赞同：0
> 
> 时间：2012-10-15T13:20:21.933
> 
> 标签：cordova, blackberry, sencha-touch

由于我不知道我新编辑的、1 个月大的未回答问题是否会出现在第一页，所以我将针对这个痛苦的主题发布另一个问题。

如[本](https://stackoverflow.com/q/12384017/692507)问题所述，我尝试为黑莓添加特定的视口。现在我正在 BB 7 模拟器和**BB 6 TORCH** (TOUCH YEAH) 上测试该应用程序。

然而，这一次，我被困在启动画面中。即使我可以看到全尺寸的启动画面，设备/模拟器的浏览器和应用程序本身都无法通过启动画面。

现在可能是什么问题？我被卡住的原因是我似乎无法以任何方式进行**调试**。至少任何这样做的方式都是一个开始，一个很大的开始。

非常感谢您的帮助。

**编辑**

感谢@Anzor 的调试答案。到目前为止，问题是：我发现如果对于 BB 来说太重，应用程序会崩溃。意思是，Chrome 和 Safari 不会告诉你它是否能在 BB 上运行良好。

为此，我最小化了我的应用程序，但它仍然崩溃。再说一次，我无法调试。我开始失去希望，但是，是的，你永远不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:06:03.773

RIM 为 OS 7.0+ 版本中的 WebWorks 应用程序引入了一个很棒的调试器。你有很多选择。

1.  您可以使用 7.x+ 设备或模拟器并使用 Web Inspector 连接到它。
2.  使用支持 Apache PhoneGap 2.0 的 Ripple 模拟器。运行应用程序时，您可以在 Chrome 开发控制台中看到红色错误。

有关 Web Inspector 的更多信息，请访问此处[https://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html](https://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html)

提示：控制台选项卡内 Web 检查器中的 CTRL+R 将刷新它所连接设备上的应用程序。我用它来调试初始化问题，因为通常不可能手动计时以开始在应用程序初始化时捕获。

编辑：这是考虑到您正在使用 WebWorks 来打包应用程序。

# c# - UIElement 上的多个几何剪辑

> ID：12896493
> 
> 赞同：0
> 
> 时间：2012-10-15T13:20:32.587
> 
> 标签：c#, geometry, clip, uielement

我正在为 Windows Phone 7 使用 C#、Silverlight、Visual Studio。

有没有办法提供`UIElement`多个几何剪辑？相当于：

```
Path myPath = new Path();
myPath.Data = myRectangle; // say of size 100x100
myPath.Clip = myClipRect; // smaller rectangle, say of size 20x20, located at (0,0)
myPath.Clip = myClipEllipse; // circle of radius 30, centered on myRectangle 
```

现在，myClipEllipse 将覆盖 myPath.Clip 中的 myClipRect，因此只会显示 myClipEllipse。我正在寻找用这两个剪辑正确绘制 myRectangle 的结果（即，不倒置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:38:48.103

我最终使用一个`GeometryGroup`类（[此处的文档](http://msdn.microsoft.com/en-us/library/system.windows.media.geometrygroup(v=vs.95).aspx)）解决了这个问题。只需将所有几何图形作为 的子级`GeometryGroup`，并将其提供给`GeometryGroup`Clip。

# c# - 复杂的布局 GUI

> ID：12896494
> 
> 赞同：0
> 
> 时间：2012-10-15T13:20:33.613
> 
> 标签：c#, wpf, winforms

我正在为我的公司开发一些 AutoCAD 插件，并且正在考虑一些布局。但是，我不能在应用程序的外观上花费大量时间。我需要一些相当快的东西来交付，以改善全球用户体验。也就是说，我认为我不能离 Winforms 或 WPF 太远（Winform 是我的舒适区，但我知道 WPF 的优势，可能不得不扩大我的舒适区）。

我要实现的主要目标是“浮动”多面板界面，您可以在其中“滑出”附加选项等。想象一个表单，它在列表视图或网格视图中有一个项目列表，当您选择一个时，一个面板会在表单的左侧滑动，其中包含该项目中涉及的所有项目的列表。这几乎就是我想要做的，但会有不止一个这样的面板。

我在 Winforms 中尝试了不同的方法，例如：

*   拆分面板 - 我发现布局限制太高而无法使用
*   使用单独的表格而不是面板 - 维护将成为一场噩梦......

是否有另一种 Winform 替代方案，或者我应该继续使用 WPF 吗？如果我继续使用 WPF，我应该寻找什么功能来实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:17:14.073

似乎普遍同意 WPF 更灵活，但要通过适度的工作量来实现广泛的定制，就需要一个 UI 库。此外，似乎没有很多“好的”免费框架，我需要购买[DevExpress](http://www.devexpress.com/)、[Component One](http://www.componentone.com/)或[Telerik之类的东西](http://www.telerik.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T23:03:36.590

您也可以尝试[DockPanel Suite](http://dockpanelsuite.sourceforge.net/)以获得类似于 IDE 的效果。它支持浮动和停靠面板，包括隐藏嵌套和保存布局。

相对容易使用，但文档并不令人惊奇，并且可以作为 NuGet 包使用。

# javascript - 如何替换具有无限字符子串的字符串？

> ID：12896497
> 
> 赞同：0
> 
> 时间：2012-10-15T13:20:43.950
> 
> 标签：javascript, regex, replace

我正在尝试替换字符串

```
var url = "www.fnord.com/foo/bar/btn_close_white.gif"; 
```

简单的逐字逐字替换效果很好：

```
var newUrl = url.replace(/btn_close_white.gif/g,"btn_close_black.gif"); 
```

然而，由于我不知道当前设置了什么颜色，我需要正则表达式来忽略颜色部分并替换整个段。所以理论上，`btn_close_pink.gif`还是`btn_close_someOtherFancyColor.gif`全部换成`btn_close_black.gif`.

我试过这个，但它失败了，我不知道为什么：

```
var newUrl = url.replace(/btn_close_*.gif/g,"btn_close_black.gif"); // this fails 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:23:53.207

试试这个：

```
var url = "www.fnord.com/foo/bar/btn_close_white.gif";
var newUrl = url.replace(/btn_close_[\w\d]*\.gif/g,"btn_close_black.gif"); 
```

Regexp`[\w\d]*`表示任意数量的字母或数字。如果您允许 url 中的任何字符，请执行以下操作：

```
var newUrl = url.replace(/btn_close_.*\.gif/g,"btn_close_black.gif"); 
```

编辑：当您编写`"/btn_close_*\.gif/"`正则表达式时，这意味着您的字符串应包含“btn_close”字符串+任意数量的“_”字符+“.gif”字符串。

当您编写`"/btn_close_.*\.gif/"`正则表达式时，这意味着您的字符串应包含“btn_close”字符串+任意数量的任何字符+“.gif”字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:35:03.930

当您可以简单地连接字符串时，是否有理由使用相当繁琐的替换操作？如果没有，我建议这样做：

```
var url = "www.fnord.com/foo/bar/btn_close_white.gif";
var newUrl = url.substring(url.lastIndexOf('/')+1,-1)+"btn_close_black.gif" 
```

它所做的只是找到最后一个斜杠并删除所有后续字符，因此您可以轻松附加文件名。

# java - Manifest.mf 文件查看器？

> ID：12896499
> 
> 赞同：6
> 
> 时间：2012-10-15T13:20:50.407
> 
> 标签：java, jar, osgi, manifest

是否有任何可用的工具可以从 jar 中获取 manifest.mf 文件并很好地显示内容？

特别是在使用 OSGi 包时，Export-Package 和 Import-Package 条目可能会变得非常大，并且很难完全弄清楚发生了什么。添加到这个简单的关键字文本搜索不是 100% 可靠，因为换行符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:51:29.070

[我相信BND 工具](http://bndtools.org/)的 eclipse 插件做得很好。它有一个用于查看 jar 文件的编辑器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T02:34:33.873

这是清单文件的在线漂亮打印机，带有可选排序：

[https://robinst.github.io/jar-manifest-formatter/](https://robinst.github.io/jar-manifest-formatter/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-26T20:48:38.863

这是一个在线漂亮的清单打印机； [https://apinx.dk/javamanifest/](https://apinx.dk/javamanifest/)

您可以拖放 .jar 文件或复制粘贴 manifest.mf 本身。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T08:33:28.780

bnd 本身可以从命令行运行，并将打印所有详细信息：

```
 java -jar biz.aQute.bnd.run.jar xx.jar 
```

您还可以单击 bndtools 中的 jar 并选择打印选项卡，这会为您提供比您可能需要的更多详细信息。

bnd 可以从[https://bndtools.ci.cloudbees.com/job/bnd.master/lastSuccessfulBuild/artifact/dist/bundles/biz.aQute.bnd/biz.aQute.bnd-latest.jar下载](https://bndtools.ci.cloudbees.com/job/bnd.master/lastSuccessfulBuild/artifact/dist/bundles/biz.aQute.bnd/biz.aQute.bnd-latest.jar)

键入 bnd help 以获取有关命令的信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-29T13:16:27.013

用 javascript 解析它；）这是一个**JSFiddle**，可以漂亮地打印一个 OSGi MANIFEST.MF 文件：

[http://jsfiddle.net/scotch/5WJwd/embedded/result/](http://jsfiddle.net/scotch/5WJwd/embedded/result/)

```
var sectionsText = text.split(/\n\n\n/),
    sections = {},
    sectionText,
    name,
    body,
    packagesText,
    packages,
    packageName,
    packageBody;

for (var i in sectionsText) {
    sectionText = sectionsText[i];
    name = sectionText.substr(0, sectionText.indexOf(": "));
    body = sectionText.substr(sectionText.indexOf(": ") + 2);
    sections[name] = body;

    if (name.indexOf("Package") != -1) {
        body = body.replace(/[\n\r] /g, '');
        body = body.replace(/(,)(?=(?:[^"]|"[^"]*")*$)/g, "$1\n");
        packagesText = body.split(/\n/);
        packages = {};
        for (var i in packagesText) {
            packageBody = packagesText[i];
            packageName = packageBody.substr(0, packageBody.indexOf(";"));
            packageBody = packageBody.substr(packageBody.indexOf(";")+1);

            if (collapse) {
                packageBody = packageBody.replace(/uses:="[^"]*"/g, 'uses:="..."');
            }

            packages[packageName] = packageBody;//.replace(/;/g, ';\n');
        }
        sections[name] = packages;
    }
} 
```

它也按字母顺序对条目进行排序，因此您可以比较它们。希望它对某人（尤其是在 Eclipse 之外开发的人）有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-09T19:23:45.733

我从 Maven Central 下载了 bnd.jar。
[http://repo1.maven.org/maven2/biz/aQute/bnd/bnd/2.2.0/bnd-2.2.0.jar](http://repo1.maven.org/maven2/biz/aQute/bnd/bnd/2.2.0/bnd-2.2.0.jar)

是的，我可以运行它，它会漂亮地打印清单：

```
java -jar bnd-2.2.0.jar example.jar 
```

打印命令显示 Import-Package 和 Export-Package 更好：

```
java -jar bnd-2.2.0.jar print example.jar 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T13:47:52.237

如果您使用的是 eclipse，则可以使用由配置的插件清单编辑器

![在此处输入图像描述](../Images/aef9adb853bcf3740e88bb726d20791b.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-10T20:52:23.040

[我在7-Zip](https://www.7-zip.org/)中打开了我的 jar （任何解压缩器/解压缩器都可以），然后您可以选择将 MANIFEST.MF 文件复制到计算机的其他位置。我将它复制到我的桌面，然后用 Visual Studio Code 打开。任何文本编辑器都可以工作。

[或者，我用Atom](https://atom.io/)打开罐子。它显示了我的罐子的整个树结构。我双击了 MANIFEST.MF 文件，它就在 Atom 中打开了。

# java - 记录域对象更改

> ID：12896501
> 
> 赞同：1
> 
> 时间：2012-10-15T13:21:00.040
> 
> 标签：java, spring, hibernate, jpa, spring-aop

我正在寻找一种优雅的方式来完成下一个任务：我有一个名为 Ticket 的实体，它有一些字段，例如：owner、createdTs、body....，还有一个 List 实体，它将跟踪执行的所有更改一张票。
我的应用程序是使用 Strus2、Spring 3、Jpa + Hibernate 构建的，并且我有一个服务类 TicketService，它具有方法 save/updateTicket(Ticket ticket)。
我试图实现一个方面 @Before 保存/更新方法，但我的问题是我无法访问票证的旧值以检测更改并根据这些更改创建 TicketHistory 对象。
我尝试了切面方法，因为我从许多其他方法访问此方法，并且现在这些对象（Ticket 和 TicketHistory）是紧耦合的。

任何的想法 ？谢谢，
阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:28:35.897

由于您使用的是 Hibernate，因此有一个非常好的声明式解决方案：

[恩弗斯](http://www.jboss.org/envers)

Envers（用于**En** tiy **Vers** ions）自动检测带有注释的实体上的更改`@Audited`并在数据库中创建历史记录。您甚至可以将自定义信息添加到修订中，例如进行更改的用户。

有关详细信息，请参阅[Envers 快速入门](http://docs.jboss.org/envers/docs/index.html#quickstart)。

缺点是您必须更改一些代码，因为不再需要`TicketHistory`了。通过[AuditReader](http://docs.jboss.org/envers/api-new/org/hibernate/envers/AuditReader.html)类访问实体的旧版本。

另请注意，使用 Envers 时，您的程序直接依赖于 Hibernate，而不再只是 JPA。如果你想改变你的持久化提供者（不是经常发生这种情况），你还有更多的工作要做。

# javascript - javascript | 用换行符保存 textarea 值

> ID：12896504
> 
> 赞同：20
> 
> 时间：2012-10-15T13:21:02.930
> 
> 标签：javascript, html, forms, textarea, save

我有一个代码，它将多个 textarea 值保存在一个文本文件中。但是，它不显示我保存后指示的换行符。它仅标识手动放置在文本区域中的换行符 w/c。下面是代码。请帮忙。

```
<script>
    var TestVar = new Array(); 
    var i = 0;
    function save()
    {
        TestVar[i] = document.getElementById("text1").value + "\n" + document.getElementById("text2").value;
        mydoc = document.open();
        mydoc.write(TestVar);
        mydoc.execCommand("saveAs",true,"TicketID.txt");
        mydoc.close();
    }
</script>
</head>
<body>
    <form id=formtest>
        <textarea name="textarea" id="text1"></textarea>
        <textarea name="textarea" id="text2"></textarea>
        <input type="button" value="save" onclick="save()">
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-15T13:23:39.393

```
text = text.replace(/\n\r?/g, '<br />'); 
```

text 是来自 textarea 的值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-15T13:22:38.870

问题源于换行符 ( `\n`) 与 HTML`<br />`标记不同。

尝试这个：

```
var text = document.forms[0].txt.value;
text = text.replace(/\n\r?/g, '<br />'); 
```

**编辑**，试试这个作为js：

```
var text = document.forms[0].txt.value;

if (text === true) { text = text.replace(/\n\r?/g, '<br />'); } 

var TestVar = new Array(i); 
var i = 0;
function save()
{
TestVar[i] = document.getElementById("text1").value + "/n" + document.getElementById("text2").value;
mydoc = document.open();
mydoc.write(TestVar);
mydoc.execCommand("saveAs",true,"TicketID.txt");
mydoc.close();
} 
```

# php - CodeIgniter - 搜索结果 - 如何从多个表中返回特定单词的搜索结果？

> ID：12896508
> 
> 赞同：0
> 
> 时间：2012-10-15T13:21:10.917
> 
> 标签：php, codeigniter

在我从表格中得到一个特定的词之后。我想从数据库中的多个表中得到类似这个词的结果。

```
function search(){
    $search = $this->input->post('searchword');
    $this->db->select('articles.title, articles.post');
    $this->db->select('files.name, files.desc');
    $this->db->select('news.title, news.post');
    $this->db->select('projects.title, projects.desc');
    $this->db->from('articles, files, news, projects');

    // I think problem is here
    $like = array('articles.title' => $search,'articles.post' => $search,
    'files.name' => $search,'files.desc' => $search,
    'news.title' => $search,'news.post' => $search,
    'projects.title' => $search, 'projects.desc' => $search);
    $this->db->like($like);

    return $this->db->get();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:34:05.827

CI的加入是废话...

我总是会创建一个正确的带有连接的 sql 语句，然后执行它。

```
$query = $this->db->query("BUILD A PROPERLY JOINED QUERY!"); 
```

如果您不能自己做...在 PHPMyAdmin 或 MySQL Workbench 中构建查询，并确保您获得预期的结果。

此外，虽然我不是 CI 的 Active Record 的粉丝，但请查看这篇文章以调整它正在创建的连接 -http://codeigniter.com/forums/viewthread/93198/

# bash - 强制“日期”使用机器默认以外的区域设置

> ID：12896509
> 
> 赞同：30
> 
> 时间：2012-10-15T13:21:17.030
> 
> 标签：bash, unix, date

有没有办法强制 *nix 命令“date”以独立于本地的特定格式输出？例如，如果我今天在美国机器上调用“date -u”，我会得到：

```
Mon Oct 15 13:15:29 UTC 2012 
```

但在德国机器上我得到：

```
Mo 15\. Okt 13:15:31 UTC 2012 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-15T13:34:25.963

当然，您始终可以自己指定格式：

```
date +%a, %b %d 
```

或者您可以使用临时环境变量：

```
:~$ LC_ALL=de_DE.utf8 date
Mo 15\. Okt 15:34:11 CEST 2012
:~$ date
Mon Oct 15 15:33:24 CEST 2012 
```

如您所见，只有第一个命令使用德语语言环境运行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-15T13:35:19.440

你可以修改`date`运行的环境。我不知道这是否是最好的方法（语言环境处理中使用的变量很多），但以下工作：

```
$ LANG=de_DE date
Mo 15 Okt 2012 09:34:12 EDT 
```

（January 在这个答案上领先我一分钟左右，但我会留下我的答案，希望有人能澄清哪个变量（`LC_ALL`, `LANG`, other ）是最“合适的”。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T13:28:32.927

您是否尝试过以下操作？（我从日期手册页中得到）

```
# date -u +"%a %b %d %T %Z %Y" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-16T18:58:48.820

# 安装`language-pack-xx`

首先，确保安装了目标语言环境的语言包。在 Debian 派生的 GNU/Linux 发行版上，荷兰语支持安装如下：

```
$ sudo apt-get install language-pack-nl 
```

该命令也将自动安装`language-pack-nl-base`。这是我通过指定`LC_TIME`. 这比使用更具体`LC_ALL`。（指定`LANG`在 Xubuntu LTS 上不起作用。）

```
$ date '+%A %e %B %Y'
Friday 16 October 2015

$ LC_TIME='nl_BE.UTF-8' date '+%A %e %B %Y'
vrijdag 16 oktober 2015 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-03-31T01:38:19.197

`LC_TIME`够了，你可以用这个。

```
LC_TIME="de_DE.UTF-8"  date 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-09T21:04:10.407

世界标准时间：

```
date -u -R 
```

当地的：

```
date -R 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-21T07:37:40.987

首先，取消注释您想要的语言环境行，`/etc/locale.gen`然后运行`locale-gen`（均以 root 身份）。确保您的终端支持所需的编码，以便显示字符。

然后，您可以为一个命令的运行时指定“临时”语言环境，如下所示：

```
LC_ALL="de_DE.UTF-8" date 
```

# php - str_replace 不会替换从表单的 textarea 获取的换行符

> ID：12896518
> 
> 赞同：0
> 
> 时间：2012-10-15T13:21:44.453
> 
> 标签：php, xhtml, newline, str-replace

我有一个用 html 编写的文本区域。我想用 PHP 获取它的文本，但我想用 <br/> 标签替换换行符。然后将生成的字符串写入文本文件。

```
$puhdas['arvostelu'] = str_replace(array("\r\n", "\n", "\r"), '<br />', strip_tags($_POST['arvostelu'])); 
```

为什么这不能取代它们？我仍然可以在 PHP 创建的 txt 文件中看到换行符将文本分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:23:04.230

PHP 已经有了[nl2br](http://php.net/manual/en/function.nl2br.php)

```
$puhdas['arvostelu'] = nl2br(strip_tags($_POST['arvostelu'])); 
```

请注意，它们也可能`\t`代替`\n`

# javascript - Window.open 使页面变成一个弹出块

> ID：12896519
> 
> 赞同：1
> 
> 时间：2012-10-15T13:21:45.870
> 
> 标签：javascript, jquery, popupwindow, window.open

下面是我将按钮打开到新页面的代码，但点击功能更加复杂。这里也发生了后期处理，这使得 window.open 在弹出块中。

我试图删除发布功能并尝试过，新页面运行良好。任何人都可以在这个问题上提供帮助。

```
$('#catalog_demo_button a').click(function(e) {         
        var curEmailId = $('#field-email').val();           
        var validemail = validateEmail(curEmailId);
        if (validemail) 
        {   
        RSUI.util.setCookie("curEmailIdsc", curEmailId);
        $.post($("#targetform").val(), 
        {
            email : $('#field-email').val(),
            demo_lang : $('#selectedLang').val(),
            cis_name : $("#cis_name").val(),
            website : $("#website").val(),
            form_type : "demo",
            demo_type : $("#form_type").val(),
            form_url : $("#form_url").val(),
            cid : $.trim(RSUI.util.getCookie('affiliate'))
        },function(data) 
        {
            if (data != "")
            {
                data = eval("("+data+")");
                if (data[0].cisFlag == "true")                                  
                {                           
                    s.events="event19";
                    s.t();
                    delete s.events;
                    s.sendFormEvent('s', s.pageName, "Demo Email Form");
                    adconionConversionCall();   

                    var demolangid = $("[name=language_code]").val();
                    URL= 'url'+demolangid; 
                        if(demolangid == 'ENG' || demolangid == 'ESC' || demolangid == 'ESP' || demolangid == 'DEU' || demolangid == 'FRA' || demolangid == 'ITA' || demolangid == 'SVE')   
                            $('#demo').overlay().load();
                        else
                            window.open(URL,'_blank')
                            $("#demoform a.close").click();
                    }
                else {
                    s.sendFormEvent('e', s.pageName, "Demo Email Form", "Email Submission Failed");
                }
            }   
        }, "");
    }
        else 
        {
            $("#field-email").val(errorEmailText);
            $('#field-email').css('border', '1px solid red');
            s.sendFormEvent('e', s.pageName, "Demo Email Form", "field-email");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:29:39.243

当用户操作未调用弹出窗口时，弹出窗口将被阻止。您的 window.open 不在用户操作中，而是在 POST 成功回调中。

您应该使帖子同步并从 POST 成功之外执行 window.open（未经测试，但听起来合乎逻辑），或者首先打开弹出窗口并稍后填写。

# c# - 有没有在析构函数中使用托管字段的安全方法？

> ID：12896522
> 
> 赞同：1
> 
> 时间：2012-10-15T13:21:52.560
> 
> 标签：c#, .net, file, destructor, managed

我有一个类在构造函数中创建一个隐藏文件并保持`FileStream`打开状态直到`Dispose()`被调用。调用`Dispose()`关闭流并删除隐藏文件。

如果程序在没有调用`Dispose()`. 我想我可以检查它是否仍然存在并`File.Delete(path)`在析构函数中调用它，但是在调用析构函数时已经可以收集保存文件路径的字符串字段，对吗？

有没有从析构函数访问该字段的安全方法？
如果没有，我还有其他方法可以确保删除该文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:24:37.403

> 但是保存文件路径的字符串字段在调用析构函数时已经可以收集，对吗？

不会。那个字符串仍然存在并且可以安全使用。

但是您必须谨慎操作，如果文件仍处于打开状态，请先关闭文件。

> 如果程序在没有调用 Dispose() 的情况下关闭，我需要确保删除该文件

这是最大的挑战。这里没有太多保证。确保客户端代码*始终*调用 Dispose()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:24:26.817

我相信您可以简单地覆盖`Finalize()`您正在使用的类的方法。根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/66x5fx1b.aspx)：

> 析构函数隐式调用对象基类的 Finalize。因此，前面的析构函数代码被隐式翻译成如下代码：

```
protected override void Finalize()
{
    try
    {
        // Cleanup statements...
    }
    finally
    {
        base.Finalize();
    }
} 
```

在使用该`Finalize()`方法时，您还可以确保尚未“收集”任何字段，因此您可以安全地使用对象的所有字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:28:13.743

如果您的进程将崩溃或被终止，则不会调用 Dispose() 方法。您应该测试某个文件是否被其他进程锁定，而不是在文件存在时休息

# javascript - 寻找 JavaScript XML diff 工具

> ID：12896524
> 
> 赞同：1
> 
> 时间：2012-10-15T13:21:56.297
> 
> 标签：javascript, xml, diff

我现在面临的任务如下：我有两个 XML 文件，它们的结构和内容可能略有不同。两个 XML 都由同一个 XSD 验证。我需要创建另一个 XML 文件，它将作为 XSL 转换的基础，并允许在 XSL 转换输出中提供元素的新旧值。

这个想法是创建一个新的 xml，它将包含`@diff`属性中的旧元素值。所以我尝试使用 XSL 来实现它，但失败了，因为我不知道如何处理缺少元素的情况。

现在我决定回退到可以为我生成这个新 XML 的 JavaScript。所以我正在寻找一个可以根据我的需要使用或修改的 XML 差异库。我正在考虑使用 XSD 作为比较任务的基础。（在这种情况下是否可以摆脱它？）

如果您对如何以不同的方式解决此问题有任何想法，我也会很高兴看到它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:06:23.813

尝试查看[Pretty Diff](http://prettydiff.com/)。它声称可以识别语言并支持 XML。

# java - 如何将参数传递给 Java 线程？

> ID：12896529
> 
> 赞同：0
> 
> 时间：2012-10-15T13:22:09.730
> 
> 标签：java, multithreading

我在抽象类中有一个代码：

```
public abstract class Job implements Runnable{  
    public void start(Integer jobId) {                      
        try {
            new Thread(this).start();
        } catch (Exception e) {
            e.getMessage();
        }       
    }
} 
```

班级代码：

```
public class Test extends Job {

    @Override
    public void run() {
        for(int i = 0; i < 5; i++) {
            try {
                Thread.currentThread();
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("TEST");
        }       
    }
} 
```

主要我有：

```
public static void main (String[] args) throws MessagingException  
  {
      Test test = new Test();
      test.start(74); 
  } 
```

那么如何将参数（jobId）从 start 方法传递给 run()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:25:26.443

在`Job.start()`方法中，将值存储在成员变量中，以便`run()`稍后在线程启动时在方法中访问它。

```
public abstract class Job implements Runnable {
    protected Integer jobId;

    public void start(Integer jobId) {
        this.jobId = jobId;
        try {
            new Thread(this).start();
        } catch (Exception e) {
            e.getMessage();
        }       
    }
}

public class Test extends Job {
    @Override
    public void run() {
        System.out.println(jobId);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:23:36.240

您应该将其更改为构造函数参数，并将其存储在派生类的字段中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:25:08.347

`jobId`作为抽象类的成员变量，并在方法`start`中设置该变量。
现在这个变量将可以在`run()`方法中访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:26:44.330

将构造函数的参数传递给线程：

```
public class MyThread implements Runnable {

   public MyThread(int parameter) {
   // store parameter for later user
   }

   public void run() {
   }
} 
```

并像这样调用：

```
Runnable r = new Thread(new MyThread(param_value)).start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T13:30:00.157

最简单的方法。但我确信这不是最好的。正如我之前所说，这是最简单的方法。:)

```
public abstract class Job implements Runnable{  
    public void start(Integer jobId) {                      
        try {
            // passing jobID
            Test.jobID = this.jobId;
            new Thread(this).start();
        } catch (Exception e) {
            e.getMessage();
        }       
    }
} 
```

和其他类..

```
public class Test extends Job {

   public static Integer jobID;

    @Override
    public void run() {
        for(int i = 0; i < 5; i++) {
            try {
                Thread.currentThread();
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            // print jobID
            System.out.println(this.jobID);
        }       
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T13:35:03.143

我认为你做对了。

只是改变

```
 test.start(74); 
```

在你`main`的

```
 test.start(new Integer(74)); 
```

`jobId`您可以通过在类的`start`方法中打印来验证它`Job`。

**如果要访问方法中的字段，请`run`在“作业运行”方法中定义一个类变量`class and use the same in`。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T13:35:37.380

我是否可以建议您重新考虑生成作业 ID 的方式。您很可能只需要每个新工作的唯一 ID。生成该 id 的问题应该存在于您的 Job 类中：

```
public abstract class Job implements Runnable {
  private static final AtomicInteger nextId = new AtomicInteger();
  public final int id = nextId.getAndIncrement();

  ... the rest of your class's code ...
} 
```

# php - 在 mysql 中使用 LIKE，其中数据是带有分隔符的字符串

> ID：12896532
> 
> 赞同：0
> 
> 时间：2012-10-15T13:22:17.863
> 
> 标签：php, mysql

我有一个多项选择，其中选项进入带有分隔符的表格，`***`因此该字段`s_industry`中的数据如下所示：

```
Social Care***Healthcare***Nursing*** 
```

我的 SQL 查询是这样的：

```
SELECT * FROM `jobs` 
LEFT JOIN `employers` ON `jobs`.`user_id`=`employers`.`user_id`
WHERE (`jobs`.`primary_sector` LIKE '%pr%' OR `jobs`.`secondary_sector` LIKE '%pr%') 
OR (`jobs`.`primary_sector` LIKE '%dentist%' OR `jobs`.`secondary_sector` LIKE '%dentist%') OR (`jobs`.`primary_sector` LIKE '%marketing%' OR `jobs`.`secondary_sector` LIKE '%marketing%') 
AND `jobs`.`location` LIKE '%Manchester%' 
AND `jobs`.`archived`='0' 
AND `jobs`.`featured`='0' ORDER BY `jobs`.`job_id 
```

我可以说 % pr % 两边都有一些空间，但这不会忽略`***`. 有没有办法让我将`***`其视为空间或其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:26:16.367

不是开玩笑，但这表明底层数据库设计不好。你有机会修改它吗？这种查询正是我们规范化数据库内容的原因，即拆分成表，其中**t_sector**将是一个查找表，作业将通过**t_job_sector**链接到它，每个扇区映射一个条目。

# c# - 使用 XPath 查询获取具有不同命名空间的嵌套节点到根

> ID：12896538
> 
> 赞同：1
> 
> 时间：2012-10-15T13:23:02.987
> 
> 标签：c#, .net, xml, xpath

我正在努力从与文档其余部分具有不同名称空间的 XML 文档中检索节点。

这是 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<epp xmlns="urn:ietf:params:xml:ns:epp-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.nominet.org.uk/epp/xml/epp-1.0 epp-1.0.xsd">
    <response>
        <result code="1000">
            <msg>Command completed successfully</msg>
        </result>
        <resData>
            <domain:infData xmlns:domain="urn:ietf:params:xml:ns:domain-1.0" xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0 domain-1.0.xsd">
                <domain:name>danielormisher.co.uk</domain:name>
                <domain:roid>50798439-UK</domain:roid>
                <domain:registrant>10DBFAD79B81CCDE</domain:registrant>
            </domain:infData>
        </resData>
        <extension>
            <domain-nom-ext:infData xmlns:domain-nom-ext="http://www.nominet.org.uk/epp/xml/domain-nom-ext-1.0" xsi:schemaLocation="http://www.nominet.org.uk/epp/xml/domain-nom-ext-1.0 domain-nom-ext-1.0.xsd">
                <domain-nom-ext:reg-status>Registered until expiry date.</domain-nom-ext:reg-status>
                <domain-nom-ext:auto-bill>30</domain-nom-ext:auto-bill>
            </domain-nom-ext:infData>
        </extension>
    </response>
</epp> 
```

在上面的 XML 中，如果我尝试选择`<domain:infData>`与根元素共享命名空间的元素，如下所示：

```
namespaces.AddNamespace("domain", "urn:ietf:params:xml:ns:domain-1.0");
var children = doc.SelectSingleNode("/ns:epp/ns:response/ns:resData/domain:infData", namespaces); 
```

节点选择得很好。但是，如果我尝试选择`<domain-nom-ext:infData>`与 root 具有不同命名空间的 node ，如下所示：

```
namespaces.AddNamespace("domain", "urn:ietf:params:xml:ns:domain-1.0");
namespaces.AddNamespace("domain-nom-ext", "http://www.nominet.org.uk/epp/xml/domain-nom-ext-1.1");
children = doc.SelectSingleNode("/ns:epp/ns:response/ns:extension/domain-nom-ext:infData", namespaces); 
```

我只是得到一个空响应。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:52:00.510

您的 XML 示例有`http://www.nominet.org.uk/epp/xml/domain-nom-ext-1.0`，您的代码使用稍微不同的命名空间`http://www.nominet.org.uk/epp/xml/domain-nom-ext-1.1`（即`1.1`代替`1.0`. 这足以使您的代码不选择任何元素，因为您需要使用完全相同的命名空间名称。

# xna - PC XNA 开发

> ID：12896541
> 
> 赞同：1
> 
> 时间：2012-10-15T13:23:06.007
> 
> 标签：xna, game-engine

几年前我第一次接触 XNA，当时它同时支持 PC 和 Xbox 开发。现在我看到发展方向是Xbox和Windows Phone。PC 部分是消失了还是自动包含在 Xbox 开发中。我们只想为 PC 开发一款游戏。我是否有足够的支持或最新版本的 XNA 将其关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:18:00.407

如果您也想为 Windows 8 开发，那么我建议您研究[MonoGame](http://monogame.codeplex.com/)项目。这是他们网站上的一个片段：

> MonoGame 是 Microsoft XNA 4 框架的开源实现。我们的目标是允许 Xbox 360、Windows 和 Windows Phone 上的 XNA 开发人员将他们的游戏移植到 iOS、Android、Mac OS X、Linux 和 Windows 8 Metro。PlayStation Mobile 的开发目前正在进行中。

develop3d 分支是您想要查看的分支。它仍处于开发阶段，但已经有不少游戏使用它。

如上所述，微软对 XNA 的未来一直守口如瓶。这是关于将 XNA 移植到 monogame 的系列文章的[链接](http://blogs.msdn.com/b/bobfamiliar/archive/2012/08/01/windows-8-xna-and-monogame-part-1-overview.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:42:25.310

由于 Windows 8，尤其是 Windows Phone 8 的到来，Windows Phone 产品与 Xbox 360 产品分离。在这个过程中，微软把[create.msdn.com](http://create.msdn.com/)网站弄得一团糟。

XNA 的 PC 产品（以及一些 WP7 产品）仍然​​与 Xbox 产品同在。

XNA 的最新版本是 4.0。它仍然“有效”。我正在使用它制作PC游戏。在 PC 上，您基本上可以将其视为 DirectX 9 的非常好的 C# 包装器（加上内容管道）。它适用于 Windows 8 的桌面，但不适用于新的 Metro 风格 UI。

自从 XNA 开始炫耀 Windows 8 以来，微软一直对它表现出非常非常少的喜爱。他们对 XNA 的未来*只字未提。*也许下一个 Xbox 会有一个新版本。或者也许 4.0 将是最后一个版本。我认为微软以外的任何人都不知道。

# objective-c - viewWillAppear 和 viewWillLayoutSubviews 之间的子视图框架有何变化？

> ID：12896543
> 
> 赞同：0
> 
> 时间：2012-10-15T13:23:12.717
> 
> 标签：objective-c, ios, uiviewcontroller, subview

这是一个非常简单的设置，日志让我感到困惑：

我有一个 UIViewController 子类。没什么特别的。它的视图有一个子视图。我想在变换上做一些动画来缩放视图。在调试过程中，我发现了这一点：

```
----- VIEWDIDLOAD <UIView: 0x9d77bc0; frame = (10 57; 300 206)...
----- VIEWWILLAPPEAR <UIView: 0x9d77bc0; frame = (10 57; 300 206)...
----- VIEWWILLLAYOUTSUBVIEWS <UIView: 0x9d77bc0; frame = (10 57; 460 206)...
----- VIEWDIDLAYOUTSUBVIEWS <UIView: 0x9d77bc0; frame = (10 57; 460 206)...
----- VIEWDIDAPPEAR <UIView: 0x9d77bc0; frame = (10 57; 460 206)... 
```

此子视图的框架在 -viewWillAppear 和 -viewWillLayoutSubviews 的调用之间发生变化。我希望子视图的框架在 -viewWillLayoutSubviews 和 -viewDidLayoutSubviews 之间变化。

willAppear 和 willLayout 之间发生了什么？

Xcode 4.5.1，iOS 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:37:59.113

我不知道确切的答案，但你应该能够通过子类化视图并实现一个覆盖来找出`setFrame:`它只是调用它的`super`. 设置断点并查看调用堆栈。

# vb.net - vb.net：W7 Snap 功能不适用于 formborderstyle = none

> ID：12896544
> 
> 赞同：1
> 
> 时间：2012-10-15T13:23:14.243
> 
> 标签：vb.net, formborderstyle

我制作了一个带有面板的自定义表单，用自定义控件框表示顶部栏，并将 FormBorderStyle 设置为 None。

现在我注意到 W7 Snap 功能在我的表单上不起作用。我不知道如何解决这个问题，而谷歌这次并没有真正提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:26:29.203

您应该能够通过使表单的某些部分表现得像标题栏来解决此问题。

为此，请处理[`WM_NCHITTEST`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645618.aspx)并返回`HTCAPTION`。

```
protected override void WndProc(ref Message m) {
    base.WndProc(ref m);
    switch (m.Msg) {
        case 0x84: //WM_NCHITTEST
            var point = new Point(m.LParam.ToInt32());
            if (point is somewhere)
                m.Result = new IntPtr((int)HitTest.Caption);

            break;
    }
}

enum HitTest {
    Caption = 2,
    Transparent = -1,
    Nowhere = 0,
    Client = 1,
    Left = 10,
    Right = 11,
    Top = 12,
    TopLeft = 13,
    TopRight = 14,
    Bottom = 15,
    BottomLeft = 16,
    BottomRight = 17,
    Border = 18
} 
```

# iphone - 从另一个类获取的 NSString 导致崩溃

> ID：12896551
> 
> 赞同：0
> 
> 时间：2012-10-15T13:23:28.730
> 
> 标签：iphone, memory-management, nsstring

*我的 iPhone 应用程序是`Tab based`. 在一个选项卡中，假设`Security Tab`我有三个视图控制器`First, Second, Third`。我正在将字符串值`Third`从视图控制器传递给`Second`视图控制器。selectedAlertDesc 是我的`Third`视图控制器的 NSString 对象。*

在`Third`视图控制器中：

```
@property (nonatomic,retain) NSString *selectedAlertDesc;
@synthesize selectedAlertDesc = _selectedAlertDesc; 
```

在`Second`视图控制器中：

```
Third *controller = [[Third alloc] init];
[controller setSelectedAlertDesc:[[alertArray objectAtIndex:indexPath.row] objectForKey:@"alertDesc"]];
[self.navigationController pushViewController:controller animated:YES];
[controller release]; 
```

*它工作正常，直到我更改选项卡。如果我将安全选项卡留在`Third`视图控制器页面并在访问其他选项卡后返回，它会崩溃。它指出， selectedAlertDesc 变成了僵尸。*

```
-[CFString stringByReplacingOccurrencesOfString:withString:]: message sent to deallocated instance 0xeb3d760 
```

*我该如何解决这个问题？我相信我们不应该初始化合成对象。我在这里忘记了什么吗？*

**编辑：**

*正如建议的那样，我使用工具来检查分配/保留历史。我得到了以下内容： - 所以在使用之后`selectedAlertDesc`，我保留了它。这是正确的做法吗？？它工作正常！*

```
_selectedAlertDesc = [_selectedAlertDesc stringByReplacingOccurrencesOfString:@"opentag" withString:@"<"];
_selectedAlertDesc = [_selectedAlertDesc stringByReplacingOccurrencesOfString:@"closetag" withString:@">"];
[txtTxtVw setText:_selectedAlertDesc]; 
```

![在此处输入图像描述](../Images/45da730a50031f4f517c610fadf9d8c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:31:04.610

从评论：

事实证明，该错误是由直接将新值分配给实例变量的代码引起的，而不是使用`set...`相关属性的方法（或其相应的点表示法）。这会绕过属性属性并导致分配自动释放的字符串。

（主要线索是仪器保留历史中缺少的条目。）

# java - 在 GridLayout 中重新调整文本字段的大小

> ID：12896556
> 
> 赞同：1
> 
> 时间：2012-10-15T13:23:41.790
> 
> 标签：java, swing, layout, resize, grid-layout

我对java swing有点陌生，我正在尝试手动练习。在下面的示例中，我有一个设置，其中我有一个 GridLayout 以按我想要的方式显示字段。但是我需要重新调整文本字段的大小，因为我不希望它们都保持不变的大小。我需要一些更大或更小的。有没有办法做到这一点？还有一种方法可以去除标签后的一些填充物吗？

```
public void setupFrame() {
    pnlTop.setLayout(new GridLayout(3, 4, 10, 10));

    lblClosetLoc.setText("Closet location:");
    lblPhone1.setText("Phone 1:");
    lblJackPaired.setText("Jack paired:");
    lblPhone2.setText("Phone 2:");
    lblCubicle.setText("Cubicle:");
    lblJackType.setText("Jack type:");      
    txtClosetLoc.setEditable(false);
    txtClosetLoc.setText("");       
    txtPhone1.setEditable(false);
    txtPhone1.setText("");      
    txtJackPaired.setEditable(false);
    txtJackPaired.setText("");      
    txtPhone2.setEditable(false);
    txtPhone2.setText("");      
    txtCubicle.setEditable(false);
    txtCubicle.setText("");     
    txtJackType.setEditable(false);
    txtJackType.setText("");        

    pnlTop.add(lblClosetLoc);
    pnlTop.add(txtClosetLoc);
    pnlTop.add(lblPhone1);
    pnlTop.add(txtPhone1);
    pnlTop.add(lblJackPaired);
    pnlTop.add(txtJackPaired);
    pnlTop.add(lblPhone2);
    pnlTop.add(txtPhone2);
    pnlTop.add(lblCubicle);
    pnlTop.add(txtCubicle);
    pnlTop.add(lblJackType);
    pnlTop.add(txtJackType);

    getContentPane().add(pnlTop);       

    setTitle("Test");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocation(300, 300);
    pack();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:31:15.763

> 在 GridLayout 中重新调整文本字段的大小

的基本属性[`GridLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)是在两个方向上调整其子级的大小和`fills`/`schrinks`所有可用区域都来自其父级

> 还有一种方法可以去除标签后的一些填充物吗？

填充由中[`.... 10, 10)`](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html#GridLayout%28int,%20int,%20int,%20int%29)定义`pnlTop.setLayout(new GridLayout(3, 4, 10, 10));`

> 我需要一些更大或更小的。有没有办法做到这一点？

必须看[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)或[`SpringLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:01:46.273

对于任何感兴趣的人，这是我在使用 SpringLayout 制作表单后得到的。如果我在某处出错，请纠正我：

```
public void setupFrame() {
    SpringLayout layout = new SpringLayout();

    pnlTop.setLayout(layout);

    lblClosetLoc.setText("Closet location:");
    lblPhone1.setText("Phone 1:");
    lblJackPaired.setText("Jack paired:");
    lblPhone2.setText("Phone 2:");
    lblCubicle.setText("Cubicle:");
    lblJackType.setText("Jack type:");

    txtClosetLoc.setEditable(false);
    txtClosetLoc.setText("");

    txtPhone1.setEditable(false);
    txtPhone1.setText("");

    txtJackPaired.setEditable(false);
    txtJackPaired.setText("");

    txtPhone2.setEditable(false);
    txtPhone2.setText("");

    txtCubicle.setEditable(false);
    txtCubicle.setText("");

    txtJackType.setEditable(false);
    txtJackType.setText("");

    pnlTop.add(lblClosetLoc);
    pnlTop.add(txtClosetLoc);
    pnlTop.add(lblPhone1);
    pnlTop.add(txtPhone1);
    pnlTop.add(lblJackPaired);
    pnlTop.add(txtJackPaired);
    pnlTop.add(lblPhone2);
    pnlTop.add(txtPhone2);
    pnlTop.add(lblCubicle);
    pnlTop.add(txtCubicle);
    pnlTop.add(lblJackType);
    pnlTop.add(txtJackType);

    layout.putConstraint(layout.WEST, lblClosetLoc, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblClosetLoc, 1, layout.NORTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, txtClosetLoc, 5, layout.EAST, lblClosetLoc);
    layout.putConstraint(layout.NORTH, txtClosetLoc, 5, layout.NORTH, pnlTop);

    layout.putConstraint(layout.WEST, lblPhone1, 10, layout.EAST, txtCubicle);
    layout.putConstraint(layout.NORTH, lblPhone1, 1, layout.NORTH, txtPhone1);

    layout.putConstraint(layout.WEST, txtPhone1, 5, layout.EAST, lblJackType);
    layout.putConstraint(layout.NORTH, txtPhone1, 5, layout.NORTH, pnlTop);

    layout.putConstraint(layout.WEST, lblJackPaired, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblJackPaired, 1, layout.NORTH, txtJackPaired);

    layout.putConstraint(layout.WEST, txtJackPaired, 22, layout.EAST, lblJackPaired);
    layout.putConstraint(layout.NORTH, txtJackPaired, 5, layout.SOUTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, lblPhone2, 10, layout.EAST, txtCubicle);
    layout.putConstraint(layout.NORTH, lblPhone2, 1, layout.NORTH, txtPhone2);

    layout.putConstraint(layout.WEST, txtPhone2, 5, layout.EAST, lblJackType);
    layout.putConstraint(layout.NORTH, txtPhone2, 5, layout.SOUTH, txtPhone1);

    layout.putConstraint(layout.WEST, lblCubicle, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblCubicle, 1, layout.NORTH, txtCubicle);

    layout.putConstraint(layout.WEST, txtCubicle, 47, layout.EAST, lblCubicle);
    layout.putConstraint(layout.NORTH, txtCubicle, 5, layout.SOUTH, txtJackPaired);

    layout.putConstraint(layout.WEST, lblJackType, 10, layout.EAST, txtCubicle);
    layout.putConstraint(layout.NORTH, lblJackType, 1, layout.NORTH, txtJackType);

    layout.putConstraint(layout.WEST, txtJackType, 5, layout.EAST, lblJackType);
    layout.putConstraint(layout.NORTH, txtJackType, 5, layout.SOUTH, txtPhone2);

    layout.putConstraint(layout.EAST, pnlTop, 5, layout.EAST, txtPhone1);
    layout.putConstraint(layout.SOUTH, pnlTop, 5, layout.SOUTH, txtJackType);

    getContentPane().add(pnlTop, BorderLayout.CENTER);

    setTitle("Test");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setLocation(300,300);
    pack();
} 
```

# shell - 动态通配符

> ID：12896563
> 
> 赞同：3
> 
> 时间：2012-10-15T13:24:08.870
> 
> 标签：shell, sh

```
set +f; rm *; touch a; for i in *; do touch b; echo $i; done 
```

在我尝试过的所有 shell（dash、ksh、zsh、bash）中，上面的代码片段只输出“a”。在 C 中实现相同的（opendir/loop on readdir 创建文件）也只输出“a”。但是，如果目录包含足够多的文件（~4096），C 实现通常也会输出“b”。（即，readdir 返回在 opendir 之后创建的文件的结果）。我在 shell 标准中看不到任何东西表明 shell 在这种情况下应该如何响应。一个符合标准的 shell 可以进入 glob 之后创建的文件的循环吗？这将是一个非常理想的特性，因为这意味着 shell 在执行任何操作之前不会将整个 glob 读入内存。在预期目录包含许多文件的情况下，通常需要几秒钟才能将 glob 读入内存，

是否有任何 shell 实现在进入循环之前不会将整个 glob 读入内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:18:42.817

不。 glob 扩展的上下文与普通的命令扩展上下文基本相同，其中所有扩展都被处理，生成的单词以不可变的方式保存以进行迭代。for-in 循环没有惰性迭代器。当然，扩展可能会产生副作用并与 glob 混合，因此必须热切地评估它们。这就是为什么`find -exec [+;]`在可以同时做事情的情况下仍然如此频繁地推荐使用 globstar。

关于这个 4096 问题，我真的无话可说。我觉得这两者真的没有可比性。Shell for..in 只是扩展单词并迭代它们。

一个相关的常见问题解答是您是否可以执行诸如提前读取要分配的下一个值之类的操作。据我所知，没有类似 bourne 的 shell 可以额外访问单词列表。您必须为此使用数组。基本上所有的限制`for..in`都可以通过数组来克服。

这是我为 Bash 编写的一个有趣的惰性 coproc 生成器。这很没用。

```
coproc x { while :; do find . -type f -maxdepth 1 -exec sh -c 'read; echo "$1"' -- {} \;; done; };

while :; do
    echo 1 >&"${x[1]}"
    read -ru "${x[0]}" file
    echo "$file"
    sleep 1
done 
```

还有一个`for..in`与问题无关的花絮——在 ksh93 和 Bash 的 git devel 分支中，可以以一种有趣的方式使用“控制变量”。

```
function f {
    nameref x # Chet may decide not to emulate the typeset -n aliases

    for x; do
        x=hi
    done
}

typeset -a arr
f 'arr['{0..3}']'
typeset -p arr # arr=(hi hi hi hi) 
```

每次迭代都会将给定对象的引用分配给 x。当然，在 ksh 中，它可以是任意复杂的数据类型。我想这可能会被滥用以某种方式模拟懒惰。不幸的是，这种模式似乎不适用于 mksh。

**编辑**忘记写这篇文章后，我发现很多 shell 实际上优化了`for x`语法。我假设至少是写时复制，并且仅在循环中使用或`for x in`时复制位置参数。`shift``set`

# graphviz - Graphviz---如何使边不交叉；选择自环边缘位置

> ID：12896565
> 
> 赞同：10
> 
> 时间：2012-10-15T13:24:14.133
> 
> 标签：graphviz

我有以下点文件：

```
digraph finite_state_machine {                                                                                                                                                                                  
    pad=0.2;
    {
        rank=same;
        node [shape = doublecircle]; q_3;
        node [shape = circle];
        q_1 [ label = <<b><i>q<sub>1</sub></i></b>> ];
        q_2 [ label = <<b><i>q<sub>2</sub></i></b>> ];
        q_3 [ label = <<b><i>q<sub>3</sub></i></b>> ];
        q_1 -> q_1 [ label = <<b><i>^a</i></b>> ];
        q_1 -> q_2 [ label = <<b><i>a</i></b>> ];
        q_2 -> q_2 [ label = <<b><i>^b</i></b>> ];
        q_2 -> q_3 [ label = <<b><i>b</i></b>> ];
    }
} 
```

我得到以下输出：![输出图像](../Images/d05c822ceb2a702d4064f3868b13e232.png)

我希望自循环位于节点之上，而不是越过其他边缘。并且，如果可能的话，更多的循环。我怎样才能做到这一点？

我希望它看起来像这样：![](../Images/866054c9bcbd83211219d89b084b25c5.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T16:43:00.717

您可以使用[端口/指南针点](https://graphviz.gitlab.io/_pages/doc/info/attrs.html#k:portPos)：

```
q_1:e -> q_1:w [ label = <<b><i>^a</i></b>> ];
q_2:e -> q_2:w [ label = <<b><i>^b</i></b>> ]; 
```

![带有循环循环的graphviz](../Images/e4c3e2b48588a3e732092396a7449a4a.png)

或使用`nw`/`ne`作为罗盘点：

![事件循环器循环](../Images/ec92dd428a72fd9b63c80015c8b97f44.png)

# php - 检查是否使用 TOR 客户端拨打电话

> ID：12896568
> 
> 赞同：1
> 
> 时间：2012-10-15T13:24:21.827
> 
> 标签：php, dns, tor

> **可能重复：**
> [阻止 TOR 服务器](https://stackoverflow.com/questions/10294244/block-tor-servers)

我想知道是否可以查看对我的 PHP 页面的调用是否由 TOR 客户端完成（这意味着调用是通过 TOR 项目网络传入的）。今天我调用了一堆从[https://check.torproject.org/cgi-bin/TorBulkExitList.py](https://check.torproject.org/cgi-bin/TorBulkExitList.py)获得的 IP 地址，但如果我可以欺骗发送回窃取我 API 的窃贼的数据会更有趣。

反正我也想不出来，有可能吗？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:30:05.563

[该类](http://www.phpclasses.org/package/7214-PHP-Check-if-an-IP-is-TOR-network-exit-address.html)可能只是希望您需要.. 它检查`ip-port.exitlist.torproject.org`DNS 信息并确定用户是否正在使用 Tor 网络访问站点。

例子

```
$tor = Tor::getInstance(); 

// check current users ip and 
// return true or false 
var_dump($tor->isTorActive()); 

// check ip of another user 
var_dump($tor->setTarget('1.2.3.4')->isTorActive()); 
```

[查看完整课程](http://www.phpclasses.org/package/7214-PHP-Check-if-an-IP-is-TOR-network-exit-address.html)

# c# - Microsoft ServiceBus - 参数 entityName 为 null 或为空

> ID：12896570
> 
> 赞同：2
> 
> 时间：2012-10-15T13:24:27.217
> 
> 标签：c#, wcf, azure, servicebus, azureservicebus

我使用 Servicebus 作为 Web 应用程序和 BizTalk 之间的链接。在 web 应用程序中，我之前在 web.config 中定义了整个端点，但端点必须是动态的，所以我尝试通过代码设置端点。

更改后，我仅在尝试向队列发送消息时出现异常。（ArgumentException - 参数 entityName 为 null 或空）

以下是将消息发送到队列的代码：

```
string queuename = Company.GetQueueName(O.companyId);
var factory = new ChannelFactory<IOrder>("requestQueueClientEndpoint", new EndpointAddress(ServiceBusEnvironment.CreateServiceUri("sb", queuename, string.Empty)));
var OrdRspChannel = factory.CreateChannel();

OrdRspChannel.Order(O); 
```

这是配置：

```
<system.serviceModel>
<behaviors>
  <endpointBehaviors>
    <behavior name="securityBehavior">
      <TransportClientEndpointBehavior>
        <tokenProvider>
          <sharedSecret issuerName="owner" issuerSecret="SECRET REMOVED" />
          <serviceCertificate>
            <authentication revocationMode="NoCheck"/>
          </serviceCertificate>
        </tokenProvider>
      </TransportClientEndpointBehavior>
    </behavior>
  </endpointBehaviors>
</behaviors>

<bindings>
  <netMessagingBinding>
    <binding name="netMessagingBinding" sendTimeout="00:10:00" receiveTimeout="00:10:00" openTimeout="00:10:00" closeTimeout="00:10:00" sessionIdleTimeout="00:10:00" prefetchCount="-1">
      <transportSettings batchFlushInterval="00:00:01" />
    </binding>
  </netMessagingBinding>
</bindings>

<client>
  <!-- Invoke BizTalk via Service Bus Queue -->
  <endpoint address="ADDRESS REMOVED" behaviorConfiguration="securityBehavior" binding="netMessagingBinding" bindingConfiguration="netMessagingBinding" contract="Procurement_MVC3.IOrder" name="requestQueueClientEndpoint" />
</client>
</system.serviceModel> 
```

这是堆栈跟踪：

```
{System.ArgumentException: The argument entityName is null or empty.
Parameter name: entityName

Server stack trace: 
   at Microsoft.ServiceBus.Messaging.MessagingFactory.CheckValidEntityName(String entityName, Int32 maxEntityNameLength, Boolean allowSeparator, String paramName)
   at Microsoft.ServiceBus.Messaging.MessagingFactory.<>c__DisplayClass1d.<BeginCreateMessageSender>b__1b(AsyncCallback c, Object s)
   at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1.BeginOpenCompleted(IAsyncResult result)
   at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1.BeginOpen()
   at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1..ctor(OpenOnceManager openOnceManager, TimeSpan openTimeout, AsyncCallback callback, Object state, Func`3 beginOperation, EndOperation`1 endOperation)
   at Microsoft.ServiceBus.Messaging.OpenOnceManager.Begin[T](AsyncCallback callback, Object state, Func`3 beginOperation, Func`2 endOperation)
   at Microsoft.ServiceBus.Messaging.MessagingFactory.BeginCreateMessageSender(String entityPath, TimeSpan timeout, AsyncCallback callback, Object state)
   at Microsoft.ServiceBus.Messaging.Channels.ServiceBusOutputChannel.OpenMessagingFactoryAndMessageSenderAsyncResult.CreateFactoryComplete(IAsyncResult result)
   at Microsoft.ServiceBus.Messaging.Channels.ServiceBusOutputChannel.OpenMessagingFactoryAndMessageSenderAsyncResult..ctor(ServiceBusOutputChannel outputChannel, TimeSpan timeout, AsyncCallback callback, Object state)
   at Microsoft.ServiceBus.Messaging.Channels.ServiceBusOutputChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Procurement_MVC3.IOrder.Order(Order Order)
   at Procurement_MVC3.Controllers.HomeController.ViewOrder(String id, Nullable`1 date, Nullable`1 confirmqty, String orderrowid, String supplierorderId, Boolean confirm) in c:\Projects2\trunk\Procurement_MVC3\Procurement_MVC3\Controllers\HomeController.cs:line 229} 
```

我在 Google 和 StackOverflow 上都搜索过类似的场景，但一无所获。我还必须使用此代码更新生产环境，这是拼图的最后一块，所以它开始拖延。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T00:47:08.200

[ServiceBusEnvironment.CreateServiceUri](http://msdn.microsoft.com/en-us/library/windowsazure/dd628639.aspx) API采用三个参数，协议、命名空间和服务路径（对于您正在使用的绑定，它们映射到队列名称）。在您提供的示例中，您将队列名称作为命名空间传递，并且您缺少实体名称，从而导致缺少实体名称异常。

尝试将您的代码段切换为以下内容：

```
var factory = new ChannelFactory<IOrder>("requestQueueClientEndpoint", new EndpointAddress(ServiceBusEnvironment.CreateServiceUri("sb", namespaceName, queuename))); 
```

# php - Yii：如何从另一个控制器动作中调用一个控制器动作？

> ID：12896575
> 
> 赞同：1
> 
> 时间：2012-10-15T13:24:45.710
> 
> 标签：php, yii

当我删除“类型”时，我设置 isActive = 0;

每个“类型”“有很多”“因果”

因此，当禁用一种类型时，我想禁用所有因果关系

在**类型**控制器中我正在尝试这个

```
$model = $this->loadModel($id);
$model->isActive = 0;

foreach ($model->causalsObj as $key => $causal ) {
   $causal = CausalController::delete($causal->id);
}

$model->save(); 
```

这不起作用（ajax 调用期间的 PHP 错误）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:58:31.540

那应该进入模型，而不是控制器，我会使用[afterSave](http://www.yiiframework.com/doc/api/1.1/CActiveRecord/#afterSave-detail)。所以在 CasualType 中：

```
public function afterSave(){
   if(!$this->isActive){
       Casual::model()->deleteAll('type_id = '.$this->id);
   }

   return parent::afterSave();
} 
```

[如果您实际上不是指“删除”而是停用，您仍然可以使用CActiveRecord::updateAll](http://www.yiiframework.com/doc/api/1.1/CActiveRecord/#updateAll-detail)在一个查询中执行此操作：

```
public function afterSave(){
   if(!$this->isActive){
       Casual::model()->updateAll(array('isActive' => 0), 'type_id = '.$this->id);
   }

   return parent::afterSave();
} 
```

在另一个控制器中实例化一个控制器是没有意义的，控制器是用来处理用户请求的，而不是用来保存你的业务逻辑的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:56:52.697

看起来问题出在你的 foreach 循环中，如果你已经设置了一个关系，你应该能够使用 $model->causal 访问它。如果这不起作用，请检查您的关系是否正常工作

```
$model = $this->loadModel($id);
$model->isActive = 0;
foreach ($model->causal as $item){
   $item->delete();
}
$model->save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:02:41.027

您的代码顶部是否有以下内容？

```
Yii::import('application.models.CausalController'); 
```

这应该使它成为可能。

同样使用 SuVeRa 的方式删除项目会更好：

> foreach ($model->causalsObj as $key => $causal ) {
> 
> ```
>  $causal->delete(); 
> ```
> 
> }

或者您可以在 CausalController 中创建一个函数，该函数删除给定 id 的所有因果关系。

# python - 将两个查询集组合成一个模板标签

> ID：12896577
> 
> 赞同：1
> 
> 时间：2012-10-15T13:24:58.840
> 
> 标签：python, django, django-templates

我有两个模型news.article 和portfolio.entry。两个模型都有一个用于将“is_campaign”设置为 true 的 BooleanField。

我正在尝试编写自定义模板标签，以便获取最新的广告系列文章（应该只有一篇）

这是我的模板标签：campaign_article.py

```
from itertools import chain
from django import template

from news.models import Article
from portfolio.models import Entry

register = template.Library()

def get_campaign():
        #Get the newest news article with is_campaign=True
        article = Article.objects.filter(is_campaign=True).order_by('-pub_date')[:1]

        #Get the newest portfolio entry with is_campaign=True
        portfolio = Portfolio_entry.objects.filter(is_campaign=True).order_by('-pub_date')[:1]

        #combine article, and entry and display only the newest
        campaign_article = list(chain(article, portfolio))[:1]

        return {'campaign_article': campaign_article}

register.tag('campaign', get_campaign) 
```

我在我的模板中试过这个：

```
{% load campaign_article %}
{% for campaign_article in campaign %}

{{ campaign_article.id }}

{% endfor %} 
```

但我没有得到任何输出。这是错误的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:03:38.057

您会想要创建[`assignment_tag`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#assignment-tags)而不是通用标签。因此，您可以将标签更新为：

```
def get_campaign():
    #your stuff
    ....

    return campaign_article

register.assignment_tag(get_campaign, name='campaign') 
```

并将模板更新为：

```
{% load campaign_article %}
{% campaign as campaign_list %} {# loads the tags and creates campaign_list context variable #}
{% for campaign_article in campaign_list %}
    {{ campaign_article.id }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:29:25.483

你不需要创建模板标签来做你想做的事。阅读[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)：

```
def get_campaign(request): # this is your context processor            
        # ...    
        return {'campaign_article': campaign_article} 
```

在您看来：

```
def some_view(request):
    # ...
    c = RequestContext(request, {
        'foo': 'bar',
    }, [get_campaign]) # attach your context processor to template context
    return HttpResponse(t.render(c)) 
```

**UPD：**如果您需要在每个页面上显示数据，您可以在您的设置文件中将您的上下文处理器注册为全局。请参阅[模板上下文处理器](https://docs.djangoproject.com/en/1.4/ref/settings/#template-context-processors)设置。

```
TEMPLATE_CONTEXT_PROCESSORS = (..., "myapp.context_processors.get_campaign") 
```

`campaign_article`Django 会自动为每个模板渲染添加变量。

# c# - 有没有比静态实例属性更好的方法？

> ID：12896585
> 
> 赞同：1
> 
> 时间：2012-10-15T13:25:22.700
> 
> 标签：c#, static, singleton, instance

我对 C# 很陌生，目前我正在使用这种方式来始终使用相同的实例：

```
public class Sample{
    private Sample(){
        //initialize sth.
    }

    private static Sample _instance;
    public static Sample Instance{
        get{
            if(_instance == null)
                _instance = new Sample();
            return _instance;
        }
    }
} 
```

你知道更好的方法吗，因为它对我来说似乎不太面向对象......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:30:36.903

您的问题的答案取决于您打算如何使用该物业。通常，在整个应用程序中使用单个静态属性被认为是一个*坏*主意，因为当涉及到多线程环境/单元测试等问题时，它可能会引起很多麻烦。但是，在某些情况下，它实际上是正确的方法，例如记录。

或者，您可以使用另一种方法，将实例传递给需要它的任何人——通常称为[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:28:20.087

如果你想要一个 Singleton 类，没关系。这种模式用于只有一个此类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:29:47.467

是的，这种方法是完全有效的。`getter`但是，在初始化属性中的单例实例时要小心`Instance`——尤其是在创建所述对象需要很长时间的情况下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:30:25.250

当然，使用[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx)并让框架处理避免您的实现产生的竞争条件。

```
private static Lazy<Sample> _instanceLazy = new Lazy<Sample>(() => new Sample());
public static Instance{get {return _instanceLazy.Value;} } 
```

绝对值得记住[单例很糟糕](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T13:32:21.627

要创建 Singleton，您可以使用多种方法。

如果你明确地写它，我发现的最好的实现方法（很好的线程安全）是：

```
public sealed class Singleton
{
    Singleton()
    {
    }

    public static Singleton Instance
    {
        get
        {
            return Nested.instance;
        }
    }

    class Nested
    {
        // Explicit static constructor to tell C# compiler
        // not to mark type as beforefieldinit
        static Nested()
        {
        }

        internal static readonly Singleton instance = new Singleton();
    }
} 
```

但另一种方法是使用控制反转框架，例如 Unity 或 Castle Windsor，然后您可以将其配置为将您的类视为单例。

# neo4j - 在 appharbor 上使用 neo4j

> ID：12896587
> 
> 赞同：2
> 
> 时间：2012-10-15T13:25:30.343
> 
> 标签：neo4j, appharbor

好奇为我的由 neo4j 数据库支持的 web api 使用 app Harbor。如果我在亚马逊 ec2 实例上托管 neo4j 实例，我如何确保该 ec2 实例与我的应用程序港口工作人员之间的连接？我可以在应用程序港口应用程序上设置地理区域以最小化数据库和应用程序之间的网络延迟吗？

是否有我应该与 app Harbor 应用程序一起使用的 neo4j 推荐或托管实例？我知道 heroku 很快就会有一个托管的 neo4j 解决方案，如果我的应用程序港口应用程序使用 heroku 托管的 neo4j 服务会有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:58:44.320

您可以想象在 Heroku 上创建一个应用程序并[在那里配置 Neo4j 插件](https://addons.heroku.com/neo4j)，然后复制粘贴连接字符串并从您的 AppHarbor 应用程序中使用 neo4j 实例。

或者，您可以自己运行 Neo4J，并打开 AppHarbor 应用程序服务器。说明在这里：http: [//support.appharbor.com/kb/tips-and-tricks/application-server-ips-ec2-configuration](http://support.appharbor.com/kb/tips-and-tricks/application-server-ips-ec2-configuration)

# javascript - 在 JavaScript 中检查会话超时

> ID：12896588
> 
> 赞同：-1
> 
> 时间：2012-10-15T13:25:31.273
> 
> 标签：javascript, jquery

有什么方法可以通过 JavaScript 检查会话是否超时？如果可以在javascript中使用，任何人都可以帮助我处理代码片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:28:32.713

如果您的意思是服务器会话，那么不 - 它无法正确完成。

您可以将计时器初始化为与服务器会话相同的值 - 如果计时器执行，则用户在同一页面上停留的时间足够长，服务器会话会过期，但这实际上并不能检查会话是否过期，它只是试图猜测。

或者，您可以对服务器上的 URL 进行异步调用，但在大多数服务器上，这将自动扩展会话 - 如果调用成功，则会话处于活动状态......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:28:41.583

如果 JavaScript ping 服务器，它将刷新会话。所以它不能只是打电话和检查。它通常通过客户端上运行一段时间的计时器来完成。如果计时器触发，您知道会话可能已过期。

如果用户使用多个窗口，计时器将失败。在这种情况下，您需要使用 localstorage/cookies 运行一些东西来说明上次服务器被击中的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:29:12.830

会话取决于您在后端使用的框架（.net、php 等），javascript 是一个水平堆栈，与任何这些服务器端框架都没有紧密耦合。

仅使用 javascript 无法确定会话是否处于活动状态。

# gawk - 与 LANG=C 相比，将 LANG 设置为 UTF-8 时 gawk 慢十倍

> ID：12896590
> 
> 赞同：2
> 
> 时间：2012-10-15T13:25:35.517
> 
> 标签：gawk

我有两台硬件（实际上是虚拟机）相同的服务器，一台在 RHEL 4.7，一台在 RHEL 6。

在 RHEL6 上 gawk 非常慢。我做了一个简单的测试，涉及处理 370 万行文本，使用一个简单的 gawk 命令。

在 RH4.7 上，gawk 3.1.3 我得到：

`time gawk '/^pat1/&&/pat2/ {x++};END {print "x="x}' file`

 `x=40874` 

`real 0m7.266s user 0m6.809s sys 0m0.460s`

在 RH6，gawk 3.1.7 我得到相同的 x 结果，时间：

`real 1m28.138s user 1m27.657s sys 0m0.453s`

7s 对 1m28s ！最初我认为升级后 vm 发生了一些事情，但是其他 CPU 测试（例如 gzips，perl 中的相同程序）在每个测试中产生了类似的结果。所以这似乎是愚蠢的。不确定这是要问的正确地方，但是 RH 6 上的 gawk 3.1.7 是否存在已知的性能问题？如果不是在这里，最好的地方在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:35:57.137

我从 gawk bugs 邮件列表中得到了答案。

这完全取决于语言环境设置。在我的 RH6 机器上，LANG 设置为 en_US.UTF-8，在 RH4 上是 C。在 RH6 上更改它可以修复性能。

绝对值得记住 - 与 C 相比，将 LANG 设置为 UTF-8 时 gawk 的速度要慢 10 倍

# java - apache shiro saltedauthentication.hashProvidedCredentials 未给出预期哈希时遇到问题

> ID：12896592
> 
> 赞同：0
> 
> 时间：2012-10-15T13:25:47.163
> 
> 标签：java, spring, security, shiro, saltedhash

这是我第二次`apache shiro`在项目中使用，但第一次是`salting`密码。这次我使用`apache shiro 1.2.0`. 我在使用 jsp、spring、JPA(spring-data-jpa) 的 Web 应用程序中使用 shiro，然后在保存到数据库之前使用它`SHA256`进行加密。`base64`我有一个`SaltedJPARealm`，`Sha256CredentialMatcher`它实现了一个 HashedCredentialMatcher。我就是这样做的

**在我的控制器中创建用户**

```
RandomNumberGenerator rng = new SecureRandomNumberGenerator();
ByteSource salt = rng.nextBytes(10);              
        String hashedPasswordBase64 = new Sha256Hash(signupForm.getPassword(),salt).toBase64();

userService.createUser(signupForm.getFullName(), signupForm.getEmail(), hashedPasswordBase64, salt.toBase64()); 
```

所以假设我的密码是`password1234`并且生成的盐`/ZFfGOcSxYhy+g==`在我的数据库中所以我有密码：`whb+0AihIGJ4n8QwULj1tR6qSwCrA+1BUvnoe4q4Cy4=`盐`salt field in the database`是相同的。

在我春天的配置中是：

```
<!--....-->
 <bean id="saltedJPARealm" class="bla.bla.webapp.security.SaltedJPARealm">
    <constructor-arg  ref="credMatcher"/>
</bean>

    <bean id="credMatcher" class="bla.bla.webapp.security.Sha256CredentialMatcher">
        <property name="storedCredentialsHexEncoded" value="false" />
        <property name="hashAlgorithmName" value="SHA-256" />
        <!--<property name="hashIterations" value="1024" />-->
    </bean>
<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager" depends-on="userRepository">
    <property name="realm" ref="saltedJPARealm" />
</bean>
<!--....--> 
```

**登录用户**

```
 Subject currentUser = SecurityUtils.getSubject();
 if (!currentUser.isAuthenticated()) {
            UsernamePasswordToken token = new UsernamePasswordToken(loginForm.getEmail(), loginForm.getPassword(), loginForm.isRememberMe());
  SecurityUtils.getSubject().login(token);
        } 
```

从数据库中获取用户后的`SaltedJPARealm's doGetAuthenticationInfo(AuthenticationToken at)`返回：`SaltedAuthenticationInfo`

```
ByteSource salt = ByteSource.Util.bytes(user.getSalt());           
return new SimpleAuthenticationInfo(user, user.getPassword().toCharArray(),salt,this.getName()); 
```

Sha256CredentialMatcher`doCredentialsMatch`看起来像：

```
 Object tokenfromSubmition = hashProvidedCredentials(token.getCredentials(),((SaltedAuthenticationInfo)info).getCredentialsSalt(),0);
    Object passwordFromStorage =this.getCredentials(info);

    Boolean match = equals(tokenfromSubmition, passwordFromStorage);
    return match; 
```

完整的代码可[在 paste 上找到](http://pastie.org/5061920)，但身份验证失败。但是当我更改代码不加盐密码（创建帐户时）并返回 AuthenticationInfo 而不是 SaltedAuthenticationInfo。它适用于同一类。我想知道到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:21:57.730

这`PasswordService`是一个 POJO（带有嵌套属性），它的嵌套属性也可以使用 Spring 进行配置：

```
<bean id="passwordService" class="org.apache.shiro.authc.credential.DefaultPasswordService">
  <property name="hashService.hashAlgorithmName" value="SHA-512"/>
  <property name="hashService.hashIterations" value="500000"/>
</bean>

<bean id="myRealm" class="...">
  <property name="credentialsMatcher">
    <bean class="org.apache.shiro.authc.credential.PasswordMatcher">
      <property name="passwordService" ref="passwordService"/>
    </bean>
  </property>
</bean> 
```

这允许实例在登录尝试期间`myRealm`使用 PasswordService 进行凭据*检查。*

要在最终用户*设置*密码时（即在帐户注册或密码重置期间）使用 PasswordService 加密密码，您可以注入`PasswordService`bean 然后使用它：

```
String encryptedPassword = passwordService.encryptPassword(signupForm.getPassword());

userService.createUser(signupForm.getFullName(), signupForm.getEmail(), encryptedPassword); 
```

我认为您会发现 Spring 配置和代码使用比较低级别的随机数生成器和 HashService + Hash API 更好/更干净。

！

# vb.net - 在 vb 2010 中使用射频扫描仪

> ID：12896595
> 
> 赞同：2
> 
> 时间：2012-10-15T13:26:01.757
> 
> 标签：vb.net

让我首先说我是 vb 的新手，就脚本而言，我只真正使用过 matlab。

无论如何，我正在 vb2010 中编写一个脚本，它允许我从 mysql 读取和写入。一切都处于测试模式。我能够让它读取和写入，但是对于这项工作的下一阶段，我希望脚本能够在从扫描仪读取条形码数字后从 mysql 读取。一旦它可以做到这一点，我就有信心完成代码。

就射频扫描器脚本而言，我什至不知道从哪里开始。

这是我已经拥有的：

```
Imports MySql.Data.MySqlClient
Imports System.Data

Public Class TEST

    Inherits System.Windows.Forms.Form

    Dim conn As New MySqlConnection
    Dim myCommand As New MySqlCommand
    Dim reader As MySqlDataReader
    Dim par As MySqlParameter
    Dim result As String

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        TextBox4.Text = Now.ToString()

        'Dim str As String
        'Dim num As Integer
        'str = ComboBox1.Text
        'num = CInt(str)
        conn = New MySqlConnection
        conn.ConnectionString = "Server=localhost;Database=test;Uid=root;Pwd=****;"

        Try
            conn.Open()
            MessageBox.Show("Connection Opened Successfully")
            myCommand.CommandText = "INSERT INTO this (workorderno, Datein, operator) values ('" & TextBox1.Text & "', '" & TextBox2.Text & "', '" & combobox1.Text & "')"
            myCommand.Connection = conn
            myCommand.ExecuteNonQuery()        
            conn.Close()
        Catch myerror As MySqlException
            MessageBox.Show("Error Connecting to Database: " & myerror.Message)
        Finally
            conn.Dispose()
        End Try

        Try
            conn.Open()
            MessageBox.Show("Connection established")         
            myCommand = New MySqlCommand("Select number From this Where workorderno = @textbox1.text", conn)
            par = New MySqlParameter
            par.ParameterName = "textbox1.text"
            par.Value = TextBox1.Text
            myCommand.Parameters.Add(par)
            reader = myCommand.ExecuteReader()
            If reader.Read() Then
                result = reader.GetString(0)
            End If
            ''//output to textbox
            TextBox3.Text = result

            conn.Close()

        Catch ex As Exception
        Finally
            conn.Dispose()
        End Try

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:24:28.803

假设您的扫描仪通过串行接口与您的计算机通信，您的程序可以通过 COM 端口读取它，您可以先添加`SerialPort`到您的项目中，输入`Port Name`，我猜您可以在设备管理器中找到它。然后您可以开始打开端口，`SerialPortDataDidReceived`从操作中添加功能`SerialPort`。

作为参考，这个来自 youtube 的视频应该对你有所帮助：]

[Visual Basic 串行 COM 端口教程 (Visual Studio 2010)](http://www.youtube.com/watch?v=wsMMHaSvvRU)

您应该找到一些带有关键字的教程，`Serial Port`希望对您有所帮助！=]

# javascript - 带有多个指针的 Javascript 仪表或如何构建它（如何旋转）？

> ID：12896599
> 
> 赞同：0
> 
> 时间：2012-10-15T13:26:17.127
> 
> 标签：javascript, charts, gauge

我试图找到一个使用多个指针的仪表，因为我需要同时显示多个对象的信息。似乎没有，但也许只是隐藏在网络中。（注：作为衡量我的意思是[这个](http://bernii.github.com/gauge.js/)）

无论如何，如果以前没有人构建过它，我可以自己编写它，但我最大的问题是如何在所有浏览器中使指针“旋转”（不使用画布）。我能想到的只是 css3 旋转，但这不支持旧浏览器。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:52:36.583

您可以查看我们的[Perfect Widgets](http://perfectwidgets.com)。这个纯 JavaScript SVG 库允许您设计任何您想要的仪表并将其添加到 HTML 页面。例如，您可以在[此处](http://perfectwidgets.com/demo/index.html#Gauges/0)看到带有两个点的仪表。

# objective-c - 具有动态宽度的 UILabel - 水平对齐

> ID：12896600
> 
> 赞同：3
> 
> 时间：2012-10-15T13:26:22.450
> 
> 标签：objective-c, ios, xcode, uilabel

我在 UITableView 的自定义单元格类中有一个 UILabel ，我使用以下代码根据其内容动态增加标签的宽度：

```
CGSize sizeToMakeLabel = [cell.cellResult.text sizeWithFont:cell.cellResult.font];

cell.cellResult.frame = CGRectMake(cell.cellResult.frame.origin.x, cell.cellResult.frame.origin.y, sizeToMakeLabel.width, sizeToMakeLabel.height); 
```

使用上面的代码出现的问题是我不能再让标签右对齐（将它的宽度增加到左边而不是右边）。

如果我不使用上面的代码并在 IB 中将对齐设置为右，则对齐有效。但在这种情况下，我失去了动态宽度。

我试过：

```
cell.cellResult.textAlignment = UITextAlignmentRigth;
cell.cellResult.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin; 
```

但什么也没发生。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:31:18.680

您无法右对齐标签，因为您为其框架设置了实际宽度。

如果您希望它是动态的但右对齐，您可以执行以下操作：

```
CGSize sizeToMakeLabel = [cell.cellResult.text sizeWithFont:cell.cellResult.font];

cell.cellResult.frame = CGRectMake(cell.cellResult.frame.origin.x + cell.cellResult.frame.size.width - sizeToMakeLabel.width, cell.cellResult.frame.origin.y, sizeToMakeLabel.width, sizeToMakeLabel.height); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:30:03.070

那是因为您在设置标签的框架时更改了标签的原点：`cell.cellResult.frame.origin.x,`

您可以更改边界以仅管理宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-05T06:58:35.890

您可以为标签设置框架，例如：

```
[self.lblTitle setFrame: CGRectMake(self.lblTitle.frame.origin.x,
                                    self.lblTitle.frame.origin.y,
                                    [self.lblTitle.text sizeWithAttributes:
                                     @{NSFontAttributeName:
                                           self.lblTitle.font}].width,
                                    self.lblTitle.frame.size.height
                                    )]; 
```

它会起作用的

# memcached - Memcached：如何跟踪存储在服务器中的密钥

> ID：12896601
> 
> 赞同：0
> 
> 时间：2012-10-15T13:26:23.043
> 
> 标签：memcached

我正在使用在两台服务器中配置的 Xmemcached-1.3.5，用于我们的高流量网站。

我的 Application 中的一些代码片段。

```
String location = "localhost:11211,10.1.2.1:11211";
MemcachedClientBuilder builder = new XMemcachedClientBuilder(
AddrUtil.getAddressMap(location)); 
```

我看到每个服务器都充当唯一的数据存储来存储密钥，我的问题是**是否可以跟踪服务器 1 和服务器 2 中包含哪些特定密钥**？

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:20:44.663

一般来说，Memcached 并不是为此而构建的。它使用 2 个哈希函数（在客户端和服务器上）来避免为每个对象存储一个引用。话虽如此，很少有不错的工具可以离线转储 Memcached 内容，请[在此处查看更多详细信息](http://www.dctrwatson.com/2010/12/how-to-dump-memcache-keyvalue-pairs-fast/)

# iphone - 我从 php 服务器收到 Null 响应

> ID：12896602
> 
> 赞同：0
> 
> 时间：2012-10-15T13:26:26.270
> 
> 标签：iphone, objective-c, ios, nsurlrequest

```
NSURL *URL = [NSURL     URLWithString:@"http://"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];
request.HTTPMethod = @"POST";

NSString *params = @"json=deepak";
NSData *data = [params dataUsingEncoding:NSUTF8StringEncoding];

[request addValue:@"8bit" forHTTPHeaderField:@"Content-Transfer-Encoding"];
[request addValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request addValue:[NSString stringWithFormat:@"%i", [data length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:data];

NSURLResponse *responce;
NSError *error;
NSData *returnData = [ NSURLConnection sendSynchronousRequest:request returningResponse:&responce error:&error];
NSString *content = [NSString stringWithUTF8String:[returnData bytes]];
NSLog(@"responseData: %@", content); 
```

大家好，我正在使用stackOverflow本身的代码，并且写的答案是有效的，但是我得到了

来自 php 服务器的“响应数据 = null”

我的简单服务器代码是

$json = CJSON::decode($_POST['json'],TRUE); 回声 CJSON::encode($json);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:18:45.733

是的，我终于解决了我的问题.....要生成密钥对值，我必须以数组方式发送数据。IE

```
 @"{\"user\":\"deepak\",\"password\":\"1234\"}"; 
```

这是 json 键的值。

然后你可以在php服务器上使用解码

$json = CJSON::decode($_POST['json'],TRUE); 回声 CJSON::encode($json);

**就像这样，它就像魅力一样**

# .net - 本地化 - 如何在 asp.net mvc 中获取客户端语言环境？

> ID：12896613
> 
> 赞同：6
> 
> 时间：2012-10-15T13:27:10.197
> 
> 标签：.net, asp.net-mvc, localization

我的问题是我的标题。

```
 Localization - how to get the client locale in asp.net mvc ? 
```

我看到一些关于基于 url 路由的帖子，有什么方法可以从浏览器或从请求到服务器和进程获取数据。有什么方法可以从 asp.net 获取浏览器语言环境。我正在创建自定义显示属性来处理本[答案](https://stackoverflow.com/questions/2431333/displayname-attribute-from-resources)中提到的本地化。

这是因为我使用 DB 来保存我的本地化值。我的计划是获取数据并使用`Display Attribute`，它将显示本地值。我需要浏览器的语言环境。那么是否有可能在基于浏览器的渲染之前获取浏览器的语言环境和查询。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T13:31:14.767

您可以使用：`HttpRequest.UserLanguages Property`：获取客户端语言首选项的排序字符串数组。

参考：

[如何检测浏览器语言](http://forums.asp.net/t/1052219.aspx/1)

# database - 将展开表连接到一个模式

> ID：12896614
> 
> 赞同：0
> 
> 时间：2012-10-15T13:27:13.613
> 
> 标签：database, database-connection, database-schema

我有表（它的模式）：工厂、仓库、商店。我在每个地方雇佣员工（工人、清洁工、卖家），我想给他们添加一个社会安全号码，所以我创建了一个新表“Emlo”，其中包含“Social Security num”字段，我不知道如何分配给每位员工一个社交号码。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:12:19.877

确切的语法取决于您的 dbms。没有什么可以保护您免于两次使用两个不同的 ID 号和两个不同的 SSAN 进入同一个人。

```
create table employees (
  employee_id integer primary key,
  employee_full_name varchar(35) not null,
  employee_ssan char(11) not null unique
); 
```

主键约束为**每个员工 ID 号提供一个 SSAN**。名称不是唯一的；除非在非常小的应用程序中，否则每个名称不能有一个 SSAN。

employee_ssan 的 UNIQUE 约束保证没有两个员工具有相同的 SSAN。一些应用程序*必须*允许重复的 SSAN，但您的可能不是其中之一。

# c# - 我可以在按钮单击时淡化每个文本块吗？

> ID：12896615
> 
> 赞同：2
> 
> 时间：2012-10-15T13:27:14.440
> 
> 标签：c#, windows-phone-7, xaml

我在 xaml 中有一个页面指向另一个页面。但我想平滑过渡到另一个页面，所以我怎样才能将每个文本块和该页面淡化为 0 alpha 并且与一个图像相同（徽标，名称属性是“徽标”）。

我不想淡化背景，因为它与其他屏幕中的一样:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:36:11.810

查找 StoryBoard 动画，特别是 DoubleAnimation，并将 target 属性设置为 Opacity。您可以在 Xaml 或代码隐藏中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:12:10.383

听起来是一个很好的机会来介绍 Opacity Mask 的精彩世界！它可能非常方便，这是一个不错的[教程](http://www.windowsphonegeek.com/articles/Creating-theme-friendly-UI--in-WP7-using-OpacityMask)，可以帮助您入门。您可以只在您的内容上放置一个并使用具有不透明度属性的情节提要修补程序，而不必单独与元素交互。希望这可以帮助。

# html - 页面选项卡 - 就像使用显示错误站点名称的 Open Graph 元标记一样。

> ID：12896617
> 
> 赞同：1
> 
> 时间：2012-10-15T13:27:18.700
> 
> 标签：html, facebook, facebook-like, facebook-opengraph

我正在实现一个页面选项卡应用程序，并且在该应用程序中我喜欢。我正在使用[开放图形协议](http://developers.facebook.com/docs/opengraphprotocol/)来定义当一个人喜欢一个页面时显示的内容。这是我的标签的样子：

```
<meta property="og:title" content="My apps title" runat = "server"/>
<meta property="og:type" content="article" runat = "server"/>
<meta  property="og:url" content="current/page/url" runat = "server"/>
<meta  property="og:image" content="path/to/image.png" runat = "server"/>
<meta property="og:site_name" content=" The name of the site" runat = "server"/>
<meta property="og:description" content="The description" runat = "server"/> 
```

在大多数情况下，这按预期工作，当我运行调试器时，Facebook 会很好地解析 url，并且所有返回的数据都按顺序排列。正如我之前提到的，我在页面选项卡中运行它，画布指向我正在托管但我不想与选项卡关联的站点。也就是说，我只打算通过页面选项卡查看应用程序，并且我不希望在有人喜欢页面选项卡中的某些内容时显示它托管的域。

问题是这样的，当有人喜欢站点内的某些内容时，我会得到以下输出：应用程序的标题 - 正确的 www.mydomain.com - 不是我想要的！应用程序描述 - 正确

我为站点名称定义了一个 Open Graph 标记。当我通过调试器运行我的网址时，我在响应中的任何地方都看不到我的域（我想要的）但是当我们真正喜欢某些东西时，我得到了域！

有谁知道我在这里做错了什么或如何解决它？我做了一些谷歌搜索，但找不到答案，但我敢肯定，我不是唯一一个遇到过这个问题的人。任何建议将不胜感激，谢谢！

# node.js - node.js node-cassandra-client 请求失败

> ID：12896621
> 
> 赞同：11
> 
> 时间：2012-10-15T13:27:39.213
> 
> 标签：node.js, cassandra, cql

当我尝试查询 Cassandra 服务器时，我一直遇到同样的问题。我已经 npm 安装了 node-cassandra-client 版本 0.9.5。

```
var Connection = require('cassandra-client').PooledConnection;

var hosts = ['host1:9160','host2:9160'];
var cassandra = new Connection({'hosts': hosts, 'keyspace': 'keyspace'});
cassandra.on('log', function(level, message, obj) {
  console.log('log event: %s -- %j', level, message);
});
var cql = "SELECT * FROM columnFamily LIMIT 1";

cassandra.execute(cql, function(err, rows) {
  if(err) console.log("erreur à la requete");

  console.log(rows);
  cassandra.shutdown(function() {
    console.log("connectoin pool shutdown");
  });
}) 
```

看来连接成功了。但我一直遇到以下错误：

```
log event: info -- "connecting host:9160(1)"
log event: cql -- "SELECT * FROM columnFamily LIMIT 1"
DEBUG: 
DEBUG: /PATH/cassandra-client/node_modules/thrift/lib/thrift/connection.js:90
DEBUG:         throw e;
DEBUG:               
DEBUG: ^
DEBUG: TypeError: undefined is not a function
  at /PATH/node_modules/cassandra-client/lib/driver.js:701:5
  at /PATH/node_modules/cassandra-client/lib/driver.js:716:15
  at /PATH/node_modules/cassandra-client/lib/driver.js:453:9
  at/PATH/node_modules/cassandra-      client/node_modules/thrift/lib/thrift/connection.js:80:11
  at Object.recv_execute_cql_query (/PATH/node_modules/cassandra-client/lib/gen-nodejs/Cassandra.js:6219:12)
  at /PATH/node_modules/cassandra-cli ent/node_modules/thrift/lib/thrift/connection.js:83:37
  at Socket.<anonymous> (/PATH/node_modules/cassandra-client/node_modules/thrift/lib/thrift/transport.js:69:9)
  at Socket.emit (events.js:67:17)
  at TCP.onread (net.js:347:14)
DEBUG: Program node app.js exited with code 1 
```

无论请求是什么，我都会遇到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:54:47.397

我知道这有点晚了，但是您`cassandra.execute`使用两个参数（查询和回调）进行调用，而它接受三个参数（查询、查询参数列表和回调）。

尝试改变：

```
 cassandra.execute(cql, function(err, rows) {
     if(err) console.log("erreur à la requete");

     console.log(rows);
     cassandra.shutdown(function() {
         console.log("connectoin pool shutdown");
     });
 }) 
```

至

```
 cassandra.execute(cql, [], function(err, rows) {
     if(err) console.log("erreur à la requete");

     console.log(rows);
     cassandra.shutdown(function() {
         console.log("connectoin pool shutdown");
     });
 }) 
```

# jquery - jQuery - 表单提交

> ID：12896623
> 
> 赞同：0
> 
> 时间：2012-10-15T13:27:55.803
> 
> 标签：jquery

我有一个打算使用 jQuery 提交的表单。以下代码第一次可以正常工作。

如果返回的数据等于“更新”，我会在 #cart-content 元素中重新创建表单。换句话说：如果我提交表单并且它更新了我的购物车，我的网站上有一个新表单（具有相同的类、相同的输入等）。

如果我再次点击提交，它不会触发我的 jQuery 代码。我猜这是因为它是一个新表单，在页面加载时不存在，所以 jQuery 没有绑定到它的事件，并且在我提交表单时它不会被触发。

我必须改变什么才能让它工作？提前致谢！

```
$("form.update-cart").on("submit", function(event){
        $.post(link + "create_order/update_cart",  $(this).serialize(),  
        function(data){  
            if(data == 'updated')
            {
                var csrf_cookie = $.cookie('csrf_cookie_name');
                $("#cart-content").load(link + "create_order/display_cart", {"csrf_test_name": csrf_cookie});
            }
            else if(data == 'nothing-to-update')
            {
                return false;
            }
            else
            {  
                alert("Couldnt update cart!");  
            }  
        });  
        return false; 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:30:28.807

尝试一下：

`$("form.update-cart").live("submit", function(event){`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:35:33.653

作为对您和 Catalin Ene 的回应，**[jQuery 的“live”功能正在从 jQuery 中弃用](http://api.jquery.com/live/)**。

`on`如果你使用**jQuery 1.7.x**或更高版本，你应该使用 " " 函数：

```
$("form.update-cart").on("submit", function(event) { 
```

`delegate`如果您的**jQuery**版本低于 1.7 ，您可以使用“ ”：

```
$("form.update-cart").delegate("submit", "#submit_btn", function(event) { 
```

**另外，一个建议**：使用服务器端脚本的 XML 或 JSON 输出是一种很好的做法。

*   [为什么需要在 php 和 AJAX 中使用 JSON](https://stackoverflow.com/questions/4881876/why-need-to-use-json-in-php-and-ajax)

*   [http://borkweb.com/story/the-case-for-json-what-is-it-and-why-use-it](http://borkweb.com/story/the-case-for-json-what-is-it-and-why-use-it)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T13:37:11.903

我已经想通了，但我会尽快接受答案。谢谢！

```
$(document).on("submit", "form.update-cart", function(event) {
        $.post(link + "create_order/update_cart",  $(this).serialize(),  
        function(data){  
            if(data == 'updated')
            {
                var csrf_cookie = $.cookie('csrf_cookie_name');
                $("#cart-content").load(link + "create_order/display_cart", {"csrf_test_name": csrf_cookie});
            }
            else if(data == 'nothing-to-update')
            {
                return false;
            }
            else
            {  
                alert("Konnte Warenkorb nicht aktualisieren!");  
            }  
        });  
        return false; 
}); 
```

# zend-form - 从控制器设置 Zend\Form 错误消息

> ID：12896624
> 
> 赞同：6
> 
> 时间：2012-10-15T13:28:01.463
> 
> 标签：zend-form, zend-framework2

这可能是一个非常简单的任务，但目前我在这方面失败了。当我的身份验证失败时，我只想在我的表单中添加一个自定义错误。

**我试过的**

```
$form->setMessages(array(
    array('password' => $this->failedLoginMessage)
)); 
```

**意外的结果**

```
\Zend\Debug\Debug::dump($form->getMessages());
array(0) {} 
```

如果我正确理解代码，这应该在密码元素中附加一条错误消息。实际上看着 setMessages 我认为附加一个单维数组应该就足够了，但它也需要第二维：S 我只是坚持这个简单的任务，叹息:)

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T10:13:29.077

根据您的要求，我的评论作为答案：

您还可以使用以下方法直接将错误消息设置到元素：

```
$form->get('elemName')->setMessages(array('message1', 'message2', ...)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:49:03.233

简单的解决方案，正确阅读代码...正确用法如下：

```
$form->setMessages(array(
    'formElementName' => array(
         // multiple error messages possible...
    )
)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-25T07:28:49.373

使用这行代码。

```
$form->getElement('controlname')->setErrors(array('Your custom error')); 
```

如果消息未显示在您的页面中，请检查 zend 表单中使用的 removeDecorator 方法。如果在编写错误消息代码行之前使用 addDecorator 方法。

# android - 通知具有来自先前通知的数据

> ID：12896634
> 
> 赞同：2
> 
> 时间：2012-10-15T13:28:36.653
> 
> 标签：android, notifications, android-notifications

我正在使用一些数据设置通知以打开我的一项活动。如果尚未确认通知，我将覆盖它，因为我正在使用相同的 ID 调用通知。

我看到通知值发生了变化，但是，我注意到我在 putExtra 调用中放入 ReceiveMessage 键的额外值实际上具有陈旧信息。NOtificaitonManager.notify 应该覆盖具有该 ID 的现有通知，那么为什么我要在通知的 Intent 中处理陈旧的信息？

```
Intent notificationIntent = new Intent(context, MyActivity.class);
notificationIntent.setAction(MyActivity.CustomInternalAction);
notificationIntent.putExtra(MyActivity.ReceiveMessage, rawMessageText);

notificationIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
Notification notification = new Notification.Builder(context)
//......
mNotificationManager.notify(myId, notification); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:40:25.443

`PendingIntent.FLAG_UPDATE_CURRENT`在您的呼叫中使用`getActivity()`.

# sql-server - 如果记录已存在，如何签入 ssis

> ID：12896638
> 
> 赞同：1
> 
> 时间：2012-10-15T13:28:41.167
> 
> 标签：sql-server, ssis

如果目标表中已存在特定记录（主键列），如何检查 SSIS，如果存在则更新，否则插入。

我在网上搜索了几个小时，但找不到确切的解决方案。请提出解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T20:54:22.417

来自互联网的一些例子： [增量负载剖析](http://sqlblog.com/blogs/andy_leonard/archive/2007/07/09/ssis-design-pattern-incremental-loads.aspx)

[另一个例子](http://www.sqlservercentral.com/articles/Stairway+Series/76390/)

这些应该给你详细的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:21:56.493

这是另一种选择 - 代码少得多并且运行速度非常快。

首先使用缓存转换加载查找缓存，其中包含要从目标表中保留的任何列（至少是代理键和业务键）。然后截断目标表。然后在主数据流结束时，使用缓存添加查找，加入您的业务密钥，并返回您要保留的所有列。匹配输出转到带有保持身份检查的 OLE DB 目标（以保留您的代理键）。无匹配输出转到单独的 OLE DB 目标。两个目的地都必须取消选中表锁（以避免死锁），但可以使用快速加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-14T05:04:02.663

首先，我们需要使用查找转换检查 Destination 中的记录是否可用。如果接收记录与现有数据不匹配，则为新记录，否则为旧记录。

# php - pecl 扩展 php-amqp 是否会导致内存泄漏？

> ID：12896644
> 
> 赞同：2
> 
> 时间：2012-10-15T13:28:54.863
> 
> 标签：php, rabbitmq

假设我们必须创建交换和队列。第一个脚本将使用 pecl 扩展

pastebin.com/2vzQBjtQ

第二个脚本将使用 php-aqmp 库[http://github.com/videlalvaro/php-amqplib](http://github.com/videlalvaro/php-amqplib)

pastebin.com/WurFfDSE

脚本相同，它们只是通过循环声明交换和队列并演示系统内存。

运行第一个脚本，我们得到

```
php /home/www/application/controllers/rabbit_memory_test.php
100 Memory usage is 23277568
200 Memory usage is 39096320
300 Memory usage is 56262656
400 Memory usage is 74784768
500 Memory usage is 94380032
600 Memory usage is 115019776
700 Memory usage is 135467008
800 Memory usage is 156147712
900 Memory usage is 177041408
It took 2.9051361083984 seconds for php. 
```

运行第二个脚本，我们得到

```
php /home/www/application/controllers/rabbit_memory_test2.php
100 Memory usage is 9306112
200 Memory usage is 9342976
300 Memory usage is 9342976
400 Memory usage is 9342976
500 Memory usage is 9342976
600 Memory usage is 9342976
700 Memory usage is 9342976
800 Memory usage is 9342976
900 Memory usage is 9342976
1000 Memory usage is 9342976
It took 2.7014260292053 seconds for php. 
```

使用 pecl 扩展时是内存泄漏还是我以错误的方式使用扩展 api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:20:52.887

我解决了问题，将第一个脚本的代码移到循环的开头

```
$connection = new AMQPConnection();
$connection->connect();

// Open Channel
$channel    = new AMQPChannel($connection);
$exchange   = new AMQPExchange($channel);
$queue      = new AMQPQueue($channel); 
```

# tumblr - 有没有办法让 Tumblr 上的每个标签都有不同的颜色？

> ID：12896645
> 
> 赞同：1
> 
> 时间：2012-10-15T13:28:55.490
> 
> 标签：tumblr

所以，我想在我的 Tumblr 主题上制作三种颜色作为标签背景，但如果我相乘

```
<a href="{TagURL}">{Tag}</a> 
```

我只是得到更多的标签。

我希望第一个标签背景是红色的，第二个是蓝色的，第三个是绿色的，然后第四个又是红色的，依此类推，依此类推……这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:07:10.820

[您可以使用CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)设置页面内容的样式。通常你会使用`class`or`id`选择器来为每个标签设置不同的样式。但是因为 Tumblr 上的标签没有唯一的类/ID，所以你可以使用伪类`nth-child`。您可以在此处找到规范：[http](http://www.w3.org/TR/selectors/#nth-child-pseudo) ://www.w3.org/TR/selectors/#nth-child-pseudo （也包含一些示例）。

css-tricks.com 上的相关博客文章：nth- [​​child 的工作原理](http://css-tricks.com/how-nth-child-works/)

* * *

~~您还可以编辑您的主题并将类添加到您的标签。请参阅问题[在 tumblr 中对类别使用不同的样式？](https://stackoverflow.com/q/10183010/1591669)以及解释它的[答案。](https://stackoverflow.com/a/10190328/1591669)~~啊不，这会将类添加到整个帖子的容器中。因此，如果使用特定标签标记帖子，您可以采用不同的样式。但这不是你想要的。不过，您可能可以将变量[`{Tag}`](http://www.tumblr.com/docs/en/custom_themes#tags)（即标签名称）添加到标签的标记中。使用这种方法，您必须手动定义哪些标签应该获得哪种颜色，这可能不是您想要的。

# debugging - 是否可以在运行时显示 Struts2 中所有加载的映射和配置？

> ID：12896648
> 
> 赞同：0
> 
> 时间：2012-10-15T13:29:08.243
> 
> 标签：debugging, struts2, runtime, struts2-config-browser

我经常对各种 Struts2 配置不正确的情况感到困惑。比如修改包或者类之后。

Struts2 的引导日志几乎没有显示加载映射的任何细节。

我想在运行时列出所有加载的配置。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:07:50.347

使用[配置浏览器](http://struts.apache.org/2.x/docs/config-browser-plugin.html)。

一个很好的例子是[here](http://www.brucephillips.name/blog/index.cfm/2009/6/28/Struts-2-Config-Browser-Plugin--Get-Information-About-Your-Applications-Configuration)。

请确保使用与其他 Struts2 依赖项相同的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:44:38.603

或者，您可以将 config-browser 插件添加到您的开发环境中。我一直都在使用它 - 它让查看 Struts 认为已配置的内容变得轻而易举。

# windows-phone-7 - 要提交的 WP7 应用程序的简单清单

> ID：12896651
> 
> 赞同：2
> 
> 时间：2012-10-15T13:29:14.367
> 
> 标签：windows-phone-7

我有一个应用程序编码并准备提交，但似乎无法找到一个简单的清单来将应用程序提交到 Windows 市场。[这个来源](http://msdn.microsoft.com/en-us/library/hh184843%28v=VS.92%29.aspx)非常冗长和复杂。我希望从这里的回复中生成一个简单的清单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:02:52.110

你可以在这里有一个简短的清单[提交你的应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/help/jj206724%28v=vs.105%29.aspx)

[您还可以使用Marketplace 测试工具包](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394032%28v=vs.92%29.aspx)从您的 Visual Studio 本身测试您的应用程序提交

更新：

根据修改后的市场要求，一个 300*300 的图标就足够了。

在[4.5 Windows Phone Marketplace 图标](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184844%28v=vs.92%29)部分查看它

它说 -

```
A tile icon (required), 300 x 300 pixels in size. This icon is automatically
resized for use in Windows Phone Marketplace. 
```

# facebook - 是否可以通过 Android 应用程序在不使用 Web 视图的情况下点赞 Facebook 页面？

> ID：12896652
> 
> 赞同：1
> 
> 时间：2012-10-15T13:29:23.457
> 
> 标签：facebook, facebook-graph-api, android-webview, facebook-like

是否可以通过 Android 应用程序在不使用 Web 视图的情况下点赞 Facebook 页面？

我知道这是一个老问题，但我仍然找不到解决它的方法。我想通过单击我的 Android 应用程序中的按钮来喜欢 Facebook 页面。

页面示例：[https ://www.facebook.com/120676358039573](https://www.facebook.com/120676358039573)

很多帖子都告诉我[Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)不能喜欢一个页面，我不想使用 WebView 因为用户可能需要在框架中再次登录。（用户之前已经通过 SSO 使用他们的 Facebook 帐户登录到我的应用程序）。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:12:19.887

您可以使用将它们发送到您的页面使用`fb://page/[Page ID]`

希望这可以帮助

例子`fb://page/454477637925610`

# java - 关闭未完成编辑的 JFrame 时保存 JTable 的内容

> ID：12896657
> 
> 赞同：1
> 
> 时间：2012-10-15T13:29:52.960
> 
> 标签：java, swing, user-interface, jtable, tablemodel

我遇到以下问题：我有一个 JTable，它的 on tablemodel 位于 JFrame 上。tablemodel 使用自己的 hashmap 备份以存储内容。该表有两列，其中右侧是可编辑的。

通常，用户更改右侧的一些值，然后按下回车按钮，该按钮触发调用我的保存函数的 tabledatachanged 事件。然后可以关闭框架。

但是，有些用户只是简单地编辑单元格，然后他们关闭窗口而不按 Enter，所以我没有机会保存表格。我知道如何在框架即将关闭时编写事件，但我不知道如何在完成编辑的同时检索“未完成”编辑的内容。

我想这与单元编辑器有关，我什至尝试使用应该返回活动的 table.getCellEditor() 但它返回 null。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T14:15:31.907

最简单的措施是配置表格以在失去焦点时尽最大努力：

```
table.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE); 
```

不幸的是，在某些情况下，它的最大努力不够好（当用户单击框架的关闭按钮时）。在那些情况下，除了钩入可能会丢失编辑的每条车道并手动强制停止编辑外，别无他法

```
if (table.isEditing()) {
    boolean stopped = table.getCellEditor().stopCellEditing();
    if (!stopped) {
        // here goes error handling and/or cancelling the edit
    }
} 
```

根据您对问题的描述，

> 一些用户只是简单地编辑单元格，然后他们关闭窗口而不按 Enter

我对第一个工作正常感到有些惊讶*，*本来预计您需要在 WindowListener 中执行第二个。

另请参阅 Rob 的[博客条目](http://tips4java.wordpress.com/2008/12/12/table-stop-editing/)

# c - 在“make clean”之后“make target”不起作用

> ID：12896665
> 
> 赞同：1
> 
> 时间：2012-10-15T13:30:11.913
> 
> 标签：c, makefile, gnu-make

我正在尝试为小型 C 程序编写 Makefile。它的结构是

项目根

*   src（源文件）
*   测试（测试文件）
*   构建（程序二进制）

我的make文件在下面。

```
CFLAGS = -g -Wall -Isrc $(OPTFLAGS)
LDLIBS = $(OPTLIBS)

PREFIX ?= /usr/local/
OPTVALGRIND="valgrind --track-origins=yes --log-file=tests/valgrind.log"

TARGET_SRC = src/hello_make.c
TARGET = build/hello_make

SOURCES := $(wildcard src/*.c)
SOURCES := $(filter-out $(TARGET_SRC),$(SOURCES))

OBJECTS = $(patsubst %.c,%.o,$(SOURCES))

TEST_SRC = $(wildcard tests/*_tests.c)
TESTS = $(patsubst %.c,%,$(TEST_SRC))
TEST_FILE ?= hello_make_tests

all: $(TARGET) tests

$(TARGET): build $(OBJECTS)
    $(CC) $(CFLAGS) $(TARGET_SRC) $(OBJECTS) $(LDLIBS) -o $@ 

.PHONY: compile_tests tests test testv valgrind build clean
compile_tests: LDLIBS += -lrt -lm
compile_tests: CFLAGS += $(OBJECTS)
compile_tests: build $(OBJECTS) $(TESTS)
    @echo "TARGET=$(TARGET), TESTS=$(TESTS)"
    @echo "compile_tests done"

tests: compile_tests
    sh ./tests/run_tests.sh

test: compile_tests
    sh ./tests/run_test.sh tests/$(TEST_FILE)

testv: compile_tests
    sh ./tests/run_test.sh tests/$(TEST_FILE)

valgrind:
    VALGRIND=$(OPTVALGRIND) $(MAKE) -s

clean:
    rm -rf $(OBJECTS)
    rm -rf $(TARGET)
    rm -rf $(TESTS)
    rm -rf build
    rm -rf tests/*.log

build:
    @mkdir -p build 
```

我有一个目标测试和 testv（对应于使用 valgrind 运行）。所以当我这样做时，

```
make test TEST_FILE=hello_make_tests 
```

它应该构建此测试所需的任何东西。然后运行测试/hello_make_tests。

我有大部分 Makefile 工作。它构建并将源文件编译为 .o 链接到测试程序。$\

> 我的问题是，这只有在我先使用**make all**然后再使用**make test**时才有效。当我**make clean**之后是**make test**。我收到以下错误。

```
cc -g -Wall -Isrc  src/get_one.o src/get_three.o src/get_two.o   -c -o src/get_one.o src/get_one.c
cc: error: src/get_one.o: No such file or directory
cc: error: src/get_three.o: No such file or directory
cc: error: src/get_two.o: No such file or directory
make: *** [src/get_one.o] Error 1 
```

> cc 调用似乎与作为源的目标文件有误？我很陌生，无法弄清楚这一点。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:02:13.467

这条线

```
compile_tests: CFLAGS += $(OBJECTS) 
```

将所有对象添加到 CFLAGS 变量中，该变量将在编译时被隐式规则（内置于 make 中）使用。

尝试将源文件、编译器标志和生成的目标文件在你的 makefile 中分开，以避免这种混淆。

如果您不确定它们的用法，请快速查看 makefile 标志的文档。

# ruby-on-rails - 从模型中获取值到链接

> ID：12896666
> 
> 赞同：0
> 
> 时间：2012-10-15T13:30:17.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

这些是我现在用来过滤一些广告系列的链接：

```
 <ul>
                <li><%= link_to "Owner", :role_id => "1" %></li>
                <li><%= link_to "Manager", :role_id => "2" %></li>
                <li><%= link_to "Agent", :role_id => "3" %></li>
                <li><%= link_to "Participant", :role_id => "4" %></li>
            </ul> 
```

角色 ID 在campaign_membership.rb 中指定

```
ROLE = {'owner' => 1, 'manager' => 2, 'agent' => 3, 'participant' => 4} 
```

我建立链接的方式可能不是正确的方式，它们是硬编码的，我怎样才能以另一种更合适的方式分配这个 role_id？

像使用

```
CampaignMembership::ROLE::owner
CampaignMembership::ROLE::manager
CampaignMembership::ROLE::agent
CampaignMembership::ROLE::participant 
```

链接里面。

谢谢你。

细节：

2 个表格，`users`并由`campaigns`3-d 表格链接`campaign_membership`，在我拥有的活动会员资格中`user_id`，`campaign_id`和`role_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:38:03.643

```
# in your config
ROLE = {'owner' => 1, 'manager' => 2, 'agent' => 3, 'participant' => 4}

# in your view:
<ul>
  <% ROLE.each do |k,id| %>
  <li><%= link_to t("roles."+k), :role_id => id %></li>
  <% end %>
</ul>

# in your config/locales/en.yml
en:
  roles:
    owner: Owner
    manager: Manager 
```

# java - 使用struts时在jsp中写入ServletOutputStream

> ID：12896667
> 
> 赞同：1
> 
> 时间：2012-10-15T13:30:23.067
> 
> 标签：java, jsp, servlets, struts2

我正在使用 struts2 Web 应用程序。我面临这样一种情况，当他/她单击链接时，我想在用户浏览器中显示文件（可能是 excel、pdf 文件或 html）。

并且响应必须是浏览器中打开/保存对话框的形式。

为此，我到目前为止所做的是

1) 在 struts.xml 文件中创建一个动作映射。

2）动作类方法的内容如下

```
ServletOutputStream outputStream = null;
outputStream = response.getOutputStream();
                byte[] output = (byte[])content;
                response.setContentType(getContentType(format));
                response.setContentLength(output.length);
                outputStream.write(output, 0, output.length);
                outputStream.flush();
                outputStream.close(); 
```

此代码部分将设置内容类型、内容长度，并且 atlast 将写入内容。

我的问题是我需要在jsp页面中写什么来显示这个内容。？

任何人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:50:13.683

您要么显示一个 JSP 页面作为操作的结果，**要么**让浏览器下载一个文件。你不能两者都做。可以这么说，它们是在同一个频道上发送的。

关于如何实现文件下载的典型示例，请参见[`StreamResult`](http://struts.apache.org/2.x/docs/stream-result.html)。

但在这种情况下，您可能只想返回`ActionSupport.NONE`或`null`从您的操作中返回，因为您正在设置标题并自己编写输出，请参阅[http://struts.apache.org/2.x/docs/result-configuration.html](http://struts.apache.org/2.x/docs/result-configuration.html)

如果你打电话

```
response.setHeader("Content-Disposition","attachment; filename=\"rfc2616-quoted-string\"");` 
```

用户将看到一个下载对话框，但如果您调用

```
response.setHeader("Content-Disposition","inline");` 
```

如果可能，内容将显示在浏览器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:43:46.663

我建议使用[StreamResult](http://struts.apache.org/2.2.3/struts2-core/apidocs/org/apache/struts2/dispatcher/StreamResult.html)

这是一个[例子](http://www.mkyong.com/struts2/struts-2-download-file-example/)

此外，您可以在您的操作类而不是 struts.xml 文件中设置 StreamResult 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:33:30.347

没什么，您还需要将响应标头设置`context-disposition`为“附件”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:35:55.963

将此添加到您的 servlet 代码中

```
 response.setHeader("Content-Disposition","attachment;filename=myfilename.pdf"); 
```

# facebook - 在没有用户交互的情况下发布到 Facebook 页面

> ID：12896669
> 
> 赞同：1
> 
> 时间：2012-10-15T13:30:26.423
> 
> 标签：facebook

我有一个要求，我需要将更新发布到客户页面。此更新由来自 Web 应用程序的操作触发，对页面的更新将在服务器上完成，无需用户交互和 Web 浏览器，并且如果页面的管理员/用户已注销，则仍应能够发布.

我已经阅读了许多文章和文档页面，所有答案似乎都指向“不，你不能这样做”，但实际上并没有承诺说不。谁能告诉我这是否真的可能？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T15:34:52.610

我有一个类似的问题。

文档和找到的示例还不错，并说明了如何通过其 API 与 FB 交互。

唯一非常令人困惑的事情是如何获得强大的 access_token 以及如何在它过期而无需单个用户交互的情况下对其进行更新。

[一切都在https://developers.facebook.com/docs/facebook-login/access-tokens/](https://developers.facebook.com/docs/facebook-login/access-tokens/)页面上得到了很好的描述，除了你需要阅读每一个单词并理解每一个句子才能找到你的答案。如果您先阅读目录，然后阅读段落标题，您将不会感觉到您在搜索关键词的正确方式。

对我来说重要的关键信息位于“扩展页面访问令牌”标题下。问题是我不想扩展令牌，我需要更永久的东西。完成我的谜题的单词在该部分的最后一段。他们是这样说的：

> 要获得一个长期存在的页面访问令牌，请将用户访问令牌交换为一个长期存在的令牌，如上所述，然后请求页面令牌。生成的页面访问令牌**将没有任何到期时间**。

看到之后，我使用 FB Graph Tools 生成了永久访问令牌，使用 Graph 调试器对其进行了检查，将其添加到应用程序设置中，就是这样。

**获得该访问令牌一次后，您可以在没有用户交互的情况下发布到页面。**

快乐的时光...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:36:26.937

这**是**可能的，但您需要在某些时候进行*一些用户交互*`manage_pages`才能获得用户的许可。获得该权限后，您将能够查询`/me/accounts`端点并提取页面访问令牌。

您使用该页面访问令牌发布到页面，一旦您拥有有效的页面访问令牌，您将不需要任何用户交互。确保进行一些错误处理以处理访问令牌无效的情况。

参考 -

*   [脸书权限](https://developers.facebook.com/docs/reference/api/permissions/)
*   [作为页面进行身份验证](https://developers.facebook.com/docs/authentication/pages/)

# c++ - boost::condition_variable::notify_one() 上的并发

> ID：12896670
> 
> 赞同：1
> 
> 时间：2012-10-15T13:30:27.817
> 
> 标签：c++, boost, synchronization, race-condition, condition-variable

我有一个异步处理任务的“引擎”，对于一个任务，我想等到该任务处理完毕。

```
boost::condition_variable cvWorkDone;

DoSomeWork()
{
   PostAsyncJob(DoWorkAsync)   // is a boost::asio::post

   boost::mutex::scoped_lock lock(mtxWorkDoneCv);
   cvWorkDone.wait(lock);
}

DoWorkAsync()
{
   // do some work ...

   cvWorkDone.notify_one();
} 
```

问题是上面的代码有一个竞争条件。如果`DoWorkAsync()`通知`boost::condition_variable`之前`DoSomeWork()`等待呢？

我看到它`boost::condition_variable::wait`有第二个参数，一个布尔值，可以用来实现这样的东西

```
bool bWait;

DoSomeWork()
{
   bWait = true;
   PostAsyncJob(DoWorkAsync)   // boost::asio::post

   boost::mutex::scoped_lock lock(mtxWorkDoneCv);
   cvWorkDone.wait(lock, bWait);
}

DoWorkAsync()
{
   // do some work ...
   boost::mutex::scoped_lock lock(mtxWorkDoneCv);
   cvWorkDone.notify_one();      
   bWait = false;
} 
```

但并发性仍然存在......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:38:54.260

由于条件变量不维护它们是否已发出信号的状态，因此您需要维护状态，因为无论条件变量单独发出信号的原因是什么（在某些情况下，例如队列，原因要发出信号的条件变量可以异步消失）。所以你的代码中可能有这样的东西：

```
boost::condition_variable cvWorkDone;
bool workdone = false;

DoSomeWork()
{
   PostAsyncJob(DoWorkAsync)   // is a boost::asio::post

   boost::mutex::scoped_lock lock(mtxWorkDoneCv);
   while (!workdone) {
      cvWorkDone.wait(lock);
   }
}

DoWorkAsync()
{
   // do some work ...

   {   
      boost::mutex::scoped_lock lock(mtxWorkDoneCv);
      workdone = true;
   }
   cvWorkDone.notify_one();
} 
```

请注意，这也可以防止来自`boost::condition_variable::wait()`. 来自 boost 文档`boost::condition_variable::wait()`：

> 当调用 this->notify_one() 或 this->notify_all()**或 spuriously**时，线程将解除阻塞。

# mysql - 上述语句中该 %value% 符号的确切用途是什么

> ID：12896672
> 
> 赞同：-5
> 
> 时间：2012-10-15T13:30:31.670
> 
> 标签：mysql, sql

我在 mysql 中遇到过 % 符号。这是我的 mysql_query 语句。

```
SELECT `permAddr`, `Name` FROM `persons` WHERE `idCardNo` LIKE '%".$_POST['value']."%' LIMIT 1 
```

我现在的问题是上述语句中该符号的确切用途是什么。不是模数符号吗？? ? 有人有答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:31:14.757

与它一起使用`LIKE`时意味着它被用作通配符。`%`这意味着只要在查询中可见，它将匹配任何内容。

例如，如果`$_POST['value']`是`bird`，该查询将返回`idCardNo`匹配`bluebird`和的行`birdhouse`。

您可以在此处阅读有关此运算符和其他运算符的更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

稍微偏离主题但相关的是您的代码容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，您应该在项目中使用[PDO](http://php.net/book.pdo.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:31:40.170

它是一个通配符，使用时`LIKE`将匹配任意数量的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:33:04.793

更多关于：[http ://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

# android - Android AwesomePlayer：意外中止准备。通知侦听器错误

> ID：12896675
> 
> 赞同：0
> 
> 时间：2012-10-15T13:30:38.860
> 
> 标签：android, android-videoview, android-video-player

尝试在 Sony Ericsson Xperia ray OS 版本上使用 VideoView 启动视频时出现此错误。2.3.4。视频播放在 Galaxy Nexus 4.1.1 和 Nexus 7 4.1.1/4.1.2 上都可以正常播放。有什么想法吗 ？谢谢 ！

LE：它也适用于 Nexus S 4.1.1。

LE2：我刚刚用 2.3.4 的 Galaxy S 进行了尝试。它仍然不起作用。结果如下。

LE3：同样的错误适用于 xx.mp3 文件。:|

LE4：当我将相同的文件放在 SD 卡上并从那里播放时，它运行得很好……

索尼爱立信 Xperia 2.3.4 结果：

```
10-15 16:09:05.269: D/VideoActivity(4509): onCreate
10-15 16:09:05.269: W/Resources(4509): Converting to boolean: TypedValue{t=0x1/d=0x7f0b0065 a=1 r=0x7f0b0065}
10-15 16:09:05.319: D/VideoActivity(4509): onResume
10-15 16:09:05.599: D/MediaPlayer(4509): Couldn't open file on client side, trying server side
10-15 16:09:05.609: I/StagefrightPlayer(138): setDataSource('https://xxxx.mp4')
10-15 16:09:05.629: I/AwesomePlayer(138): Unexpected abortPrepare. Notify listener of error.
10-15 16:09:05.629: E/MediaPlayer(4509): error (1, -2147483648)
10-15 16:09:05.649: D/dalvikvm(4509): GC_CONCURRENT freed 254K, 45% free 4092K/7367K, external 10147K/12195K, paused 3ms+6ms
10-15 16:09:05.659: I/ActivityManager(250): Displayed com.xx.yy/.view.activity.VideoPlayerActivity: +450ms
10-15 16:09:05.659: E/ResourceType(4509): Style contains key with bad entry: 0x01010300
10-15 16:09:05.659: E/ResourceType(4509): Style contains key with bad entry: 0x01010300
10-15 16:09:05.669: W/KeyCharacterMap(4509): No keyboard for id -1
10-15 16:09:05.669: W/KeyCharacterMap(4509): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-15 16:09:05.709: E/MediaPlayer(4509): Error (1,-2147483648)
10-15 16:09:05.709: D/VideoView(4509): Error: 1,-2147483648 
```

Galaxy S 2.3.4 结果：

```
10-15 17:20:47.329: D/VideoPlayerActivity(7086): onCreate
10-15 17:20:47.356: W/ResourceType(7086): Entry identifier 0xcc is larger than entry count 0xac
10-15 17:20:47.372: D/VideoPlayerActivity(7086): onResume
10-15 17:20:47.454: D/dalvikvm(7086): GC_EXTERNAL_ALLOC freed 633K, 52% free 3637K/7431K, external 14286K/14649K, paused 25ms
10-15 17:20:47.513: I/MediaPlayer(7086): uri is:https://xx.mp4
10-15 17:20:47.513: I/MediaPlayer(7086): path is null
10-15 17:20:47.513: D/MediaPlayer(7086): Couldn't open file on client side, trying server side
10-15 17:20:47.517: V/ANDROID_DRM_TEST(84): Client(105) constructor
10-15 17:20:47.517: V/ANDROID_DRM_TEST(84): Create new client(105) from pid 7086, url=https://xx.mp4, connId=105, audioSessionId=133
10-15 17:20:47.517: V/ANDROID_DRM_TEST(84): setDataSource(https://xx.mp4)
10-15 17:20:47.517: V/ANDROID_DRM_TEST(84): player type = 1
10-15 17:20:47.517: V/ANDROID_DRM_TEST(84):  create PVPlayer
10-15 17:20:47.528: V/PlayerDriver(84): PVSuspensionState struct constructor
10-15 17:20:47.528: V/PVPlayer(84): PVPlayer constructor
10-15 17:20:47.528: V/PVPlayer(84): construct PlayerDriver
10-15 17:20:47.540: V/PlayerDriver(84): constructor
10-15 17:20:47.540: V/PlayerDriver(84): OpenCore hardware module not found
10-15 17:20:47.540: V/PlayerDriver(84): start player thread
10-15 17:20:47.540: V/PlayerDriver(84): startPlayerThread
10-15 17:20:47.540: V/PlayerDriver(84): InitializeForThread
10-15 17:20:47.540: V/PlayerDriver(84): OMX_MasterInit
10-15 17:20:47.544: I/ActivityManager(129): Process com.android.vending (pid 7297) has died.
10-15 17:20:47.548: V/PlayerDriver(84): OsclScheduler::Init
10-15 17:20:47.548: V/PlayerDriver(84): CreatePlayer
10-15 17:20:47.634: V/PlayerDriver(84): AddToScheduler
10-15 17:20:47.634: V/PlayerDriver(84): PendForExec
10-15 17:20:47.634: V/PlayerDriver(84): OsclActiveScheduler::Current
10-15 17:20:47.634: V/PlayerDriver(84): StartScheduler
10-15 17:20:47.634: V/PVPlayer(84): send PLAYER_SETUP
10-15 17:20:47.638: V/PlayerDriver(84): Send player code: 2
10-15 17:20:47.638: V/PlayerDriver(84): CommandCompleted
10-15 17:20:47.638: V/PlayerDriver(84): Completed command PLAYER_SETUP status=1
10-15 17:20:47.638: V/AudioSink(84): AudioOutput(133)
10-15 17:20:47.638: V/ANDROID_DRM_TEST(84):  setDataSource
10-15 17:20:47.638: V/PVPlayer(84): setDataSource(https://xx.mp4)
10-15 17:20:47.642: I/PlayerDriver(84): PlayerDriver::isProtectedFile(https://xx.mp4)
10-15 17:20:47.642: V/PlayerDriver(84): File EXT is : .mp4
10-15 17:20:47.642: E/PlayerDriver(84): PlayerDriver::it is a not Protected file
10-15 17:20:47.642: V/ANDROID_DRM_TEST(84): [105] setVideoSurface(0x33c00)
10-15 17:20:47.642: V/PVPlayer(84): setVideoSurface(0x33c00)
10-15 17:20:47.642: V/ANDROID_DRM_TEST(84): [105] setVideoSurface(0x396f8)
10-15 17:20:47.642: V/PVPlayer(84): setVideoSurface(0x396f8)
10-15 17:20:47.642: V/ANDROID_DRM_TEST(84): [105] setAudioStreamType(3)
10-15 17:20:47.642: V/ANDROID_DRM_TEST(84): [105] prepareAsync
10-15 17:20:47.642: V/PVPlayer(84): prepareAsync
10-15 17:20:47.642: V/PVPlayer(84):   data source = https://xx.mp4
10-15 17:20:47.653: V/PlayerDriver(84): Send player code: 3
10-15 17:20:47.653: V/PlayerDriver(84): handleSetDataSource
10-15 17:20:47.661: V/PlayerDriver(84): handleSetDataSource- scanning for extension
10-15 17:20:47.661: E/OsclDirectFileIO(84): [LargeFileSupport] OsclDirectFileIO::OpenFileOrSharedFd Error = -1
10-15 17:20:47.665: V/PlayerDriver(84): HandleInformationalEvent: 26
10-15 17:20:47.665: V/PlayerDriver(84): HandleInformationalEvent: type=26 UNHANDLED
10-15 17:20:47.665: V/ANDROID_DRM_TEST(84): [105] notify (0x6aff0, 200, 1, 26)
10-15 17:20:47.665: W/MediaPlayer(7086): info/warning (1, 26)
10-15 17:20:47.665: V/PlayerDriver(84): CommandCompleted
10-15 17:20:47.665: V/PlayerDriver(84): Completed command PLAYER_SET_DATA_SOURCE status=-4
10-15 17:20:47.665: E/PlayerDriver(84): Command PLAYER_SET_DATA_SOURCE completed with an error or info -4
10-15 17:20:47.665: V/ANDROID_DRM_TEST(84): [105] notify (0x6aff0, 100, -4, -4)
10-15 17:20:47.665: E/MediaPlayer(7086): error (-4, -4)
10-15 17:20:47.665: V/PVPlayer(84): run_init s=-2147483648, cancelled=0
10-15 17:20:47.665: V/PlayerDriver(84): HandleInformationalEvent: 27
10-15 17:20:47.665: W/PlayerDriver(84): PVMFInfoErrorHandlingComplete
10-15 17:20:47.696: E/ResourceType(7086): Style contains key with bad entry: 0x01010300
10-15 17:20:47.700: E/ResourceType(7086): Style contains key with bad entry: 0x01010300
10-15 17:20:47.700: W/KeyCharacterMap(7086): No keyboard for id -1
10-15 17:20:47.700: W/KeyCharacterMap(7086): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-15 17:20:47.771: I/MediaPlayer(7086): Info (1,26)
10-15 17:20:47.774: E/MediaPlayer(7086): Error (-4,-4)
10-15 17:20:47.774: D/VideoView(7086): Error: -4,-4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:19:45.347

问题是由于各个视频使用的是 HTTPS 链接。切换到纯 HTTP 后，他们工作了。

Also, I observed that using empty spaces in the video link instead of %20 also caused an error. This also happened only on 2.3.4 and not on 4.1.1\. So be sure to look for that as well.

# ios - Facebook iOS SDK 3.1.1“closeAndClearTokenInformation”方法不起作用

> ID：12896676
> 
> 赞同：14
> 
> 时间：2012-10-15T13:30:41.353
> 
> 标签：ios, facebook, authentication, sdk, logout

我刚刚从 Facebook iOS SDK 3.0.X 升级到 3.1.1，并重写了一些代码......

根据注销工作流程的 Facebook 文档（https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/#step3），我正在调用**FBSession.activeSession**对象的**closeAndClearTokenInformation**方法。

 **这似乎对 Facebook 会话状态没有影响，因为在调用后立即检查它仍然会返回一个打开的会话。

就目前而言，一旦我的应用程序使用 Facebook 登录，它就不会注销。

**[更新 1]**

根据要求，这是我用来检查会话状态的代码：

```
if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded && FBSession.activeSession.isOpen)
 //logged in
else
 //not logged in 
```

**[更新 2]**

稍微改变了我的逻辑......将我的原始代码更改为：

```
if (FBSession.activeSession.isOpen)
 //logged in
else
 //not logged in 
```

因为**FBSession.activeSession.state**返回**FBSessionStateOpen**，而不是**FBSessionStateCreatedTokenLoaded**。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-18T20:07:18.520

也许这会有所帮助。 [https://developers.facebook.com/bugs/497294866962479?browse=search_507cb8ebc4f025673237228](https://developers.facebook.com/bugs/497294866962479?browse=search_507cb8ebc4f025673237228)

我将所有这些方法一起调用以确保它确实是注销。疯狂的虫子。

```
[FBSession.activeSession closeAndClearTokenInformation];
[FBSession.activeSession close];
[FBSession setActiveSession:nil]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T23:31:38.953

我知道这可能会迟到，但在 Android（3.0 SDK）上，如果您不在创建它的同一上下文中（或者如果应用程序已关闭并且会话没有以某种方式获取，则 Session.getActiveSession() 可能会返回 null恢复）。它发生了，它由 SDK 处理，所以你真的无能为力。

在这些情况下，调用 closeAndClearTokenInformation() 并没有多大作用（如果您查看源代码，您就会明白为什么）。对我来说，解决方案是这样的（在 Java 中）：

```
Session session = Session.getActiveSession();
if (session != null) {
   Session.getActiveSession().closeAndClearTokenInformation();
   Session.getActiveSession().close();
   Session.setActiveSession(null);
} else {
   // construct a new session (there are different ways to do this, this is how I do it because I need to pass the FACEBOOK_API_KEY programmatically).
   session = new Session.Builder(MyApp.getInstance()).setApplicationId(Constants.FACEBOOK_API_KEY).build();
   if (session != null) {//to be safe
     //beware with the case of Session vs sesssion.
     Session.setActiveSession(session); 
     session.closeAndClearTokenInformation();
     session.close();
     Session.setActiveSession(null);
   }
} 
```

这实际上使我的会话如下：

```
{Session state:CREATED, token:{AccessToken token: permissions:[]}, appId:xxxxx} 
```

请记住，created 与 Closed（或 Open）不同。在该状态下，您可以毫无问题地重新打开会话。

希望这可以帮助。**

# c++ - 如何在非模板类中使用模板特化？C++

> ID：12896679
> 
> 赞同：0
> 
> 时间：2012-10-15T13:30:47.217
> 
> 标签：c++, templates, visual-c++

我有一个不是模板类的类，我需要向这个类添加一个函数，它是一个模板函数。问题是我在类中调用了一个需要字符串作为参数的函数，因此我需要制作此模板的专用版本，这样我才能仅在参数为 a 时调用此函数`const char*`或在函数内部进行条件检查仅在参数为 a 时才调用该函数，`const char*`但这似乎也不起作用。任何帮助，将不胜感激！

```
template<class myType> __declspec(nothrow)
std::string GetStrVal(int row, int col, myType default) {

    try {
        CheckColumnType(col, String);
    }
    catch(DatatableException e){
        return default;
    }
    return this->m_rows[row][col];
}

template<class myType> 
std::string GetStrVal(int row, const char* col, myType default) {

    unsigned int columnIndex = this->GetColumnIndex(col);
    return GetStrVal(row,columnIndex, default);
} 
```

`GetColumnIndex()`只需要一个`const char*`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:52:56.077

你不需要专门化任何东西；你可以只提供一个或两个重载：

```
 template<class myType> __declspec(nothrow)
    std::string GetStrVal(int row, int col, myType default);  // template

    __declspec(nothrow)
    std::string GetStrVal(int row, int col, std::string default); // overload

    __declspec(nothrow)
    std::string GetStrVal(int row, int col, const char *default); // overload 
```

# tapestry - Tapestry 不会给出描述性错误

> ID：12896681
> 
> 赞同：1
> 
> 时间：2012-10-15T13:31:02.987
> 
> 标签：tapestry

我开始使用 Tapestry，其他一切似乎都运行良好。我从 Eclipse 运行码头，并在 Ubuntu 上的 Eclipse 中运行我的开发环境。当我做错事时，它不会像 Tapestry 教程中所说的那样给出详细的错误报告。运行码头时是否必须添加任何参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:37:42.433

默认是生产模式，没有详细的异常报告。覆盖它的最简单方法是在服务器启动脚本中添加系统属性：`-Dtapestry.execution-mode=DevelopmentMode`.

[文档中](http://tapestry.apache.org/configuration.html#Configuration-tapestry.productionmode)的配置部分详细介绍了可以指定此参数的其他位置。

# c# - 在构建列表中显示“信息”项

> ID：12896682
> 
> 赞同：2
> 
> 时间：2012-10-15T13:31:05.343
> 
> 标签：c#, asp.net, build

有没有办法在构建时注释我的代码部分以生成“消息”项？我的代码中有一些地方我想标记为在即将到来的修订中需要更改的地方。

有什么工具或功能可以给我类似的东西吗？我在考虑书签，但我发现它们在 VS2010 中有点笨重。

![留言项目](../Images/3f0a53459aca949d7879dae05f535579.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:39:31.007

在您的代码中设置注释，如下所示：

```
//TODO: Make much better someday (probably never)
if (i != null)
{
    this.DoSomething();
} 
```

注释是 Visual Studio的`//TODO:`内置扩展，给定的注释显示在 IDE 的“任务列表”-控件中。通过双击“任务列表”中的项目，您可以跳转到代码中设置注释的位置。

阅读本文以获取更多信息：[如何：创建任务列表](http://msdn.microsoft.com/en-us/library/zce12xx2%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:49:16.550

您是否计划在 Visual Studio 中包含这些通知，或者您希望它们成为自动化或命令行构建过程的一部分？

如果是前者，Jan P. 的回答是一个很好的起点，向您展示如何与 Visual Studio 的任务列表界面交互。

如果是后者，并且您确实希望在构建输出中显示一行，则可以*使用*C# 的[Preprocessor Directives](http://msdn.microsoft.com/en-us/library/ed8yd1ha%28v=vs.100%29.aspx)来实现，特别是 #warning 指令。但是，这将输出一个*警告*，并且我不知道输出*信息*行的方法。这是如何完成的：

```
 public void Test()
    {
#warning This is silly.
    } 
```

这是VS中的结果：

![在此处输入图像描述](../Images/3cbe74effcdfba0524687582a2e02a64.png)

# javascript - javascript 创建内容

> ID：12896684
> 
> 赞同：1
> 
> 时间：2012-10-15T13:31:13.007
> 
> 标签：javascript, loops

我有一个文本区域（从中获取一个数字）和按钮来提交值，并且我正在尝试将内容添加到由此循环生成的段落中：

```
var countNum = document.getElementById(num).value;
var entNum = parseInt(countNum);

for(i=1;i<=entNum;i++){
    if(i%3!==0 && i%7!==0){
       document.write(i + "<br>");
    }
} 
```

现在当我使用`document.write`当然整个以前的内容被覆盖，但我想在按钮下有一个段落，它接收来自循环和它们的生成数字。正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:37:20.343

假设您的按钮下方有一个容器，您可以将您的东西放入其中：

```
<button [...] />
<div id="myContainer"></div> 
```

然后你可以通过调用填充容器

```
var myContainer = document.getElementById("myContainer");
var paragraph = document.createElement("p");
paragraph.appendChild(document.createTextNode("YourNumberOrTextHere"));
myContainer.appendChild(paragraph); 
```

你会发现剩下的！;)

* * *

编辑：根据您的评论，添加以下内容：

要删除一个元素，您需要一个对它的引用。

**按 ID：**

```
//Create element and give it a unique ID
var paragraph = document.createElement("p");
paragraph.id = "element1";
//Now you can get it like this
var paragraph = document.getElementById("element1"); 
```

**按标签名：**

```
//Request all elements with a certain tag name
var paragraphs = document.getElementsByTagName("p");
//or only those of our container:
var paragraphs = document.getElementById("myContainer").getElementsByTagName("p");
//Now you can mess with all of them like this:
var paragraph = paragraphs[0] 
```

**引用：**

```
//Just reuse the variable you used when you created your element
var paragraph = document.createElement("p");
//use paragraph 
```

**更多信息：**

```
;) 
```

**现在：删除它：**

您必须告诉 parentContainer 它应该删除一个子元素。幸运的是，每个元素都保存了对其父元素的引用：

```
paragraph.parentElement.removeChild(paragraph); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:37:26.397

做这样的事情：

```
var countNum = document.getElementById(num).value;
var entNum = parseInt(countNum);
var html = ''

for(i=1;i<=entNum;i++){
    if(i%3!==0 && i%7!==0){
       html += i + "<br>";
    }
} 
```

然后在任何你需要的地方插入 html...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:37:51.223

您可以设置容器元素的 innerHTML，例如。

```
<button>Click Me</button>
<div id="container"></div>

document.getElementById('container').innerHTML = content; 
```

另一种选择是使用 DOM API 构建段落

# sql - 复杂的 SQL 子查询

> ID：12896685
> 
> 赞同：-1
> 
> 时间：2012-10-15T13:31:13.143
> 
> 标签：sql

我有 2 张桌子：

```
orders
customers 
```

我需要获得“VIP 客户”——即自注册后每月至少订购一次的客户（在 上有一`[subscription_date]`列`customers`）

我想不通:(有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:37:49.800

此查询计算每个客户订购的月数，并将其与客户订阅的月数进行比较。
两者具有相同价值的客户是您的 VIP 客户。

```
SELECT T1.CUSTOMERID AS VIP_CUSTOMERS 
FROM   (SELECT Count(*) AS NUM_MONTHS, 
               CUSTOMERID 
        FROM   (SELECT DISTINCT Month(ORDERDATE), 
                                Year(ORDERDATE), 
                                CUSTOMERID 
                FROM   ORDERS 
                GROUP  BY CUSTOMERID)T 
        GROUP  BY CUSTOMERID)T1 
       INNER JOIN (SELECT CUSTOMERID, 
                          Datediff(MONTHS, SUBSCRIPTION_DATE, Getdate()) AS 
                          NUM_MONTHS 
                   FROM   CUSTOMERS)T2 
               ON T1.CUSTOMERID = T2.CUSTOMERID 
                  AND T1.NUM_MONTHS = T2.NUM_MONTHS 
```

[如果你在SQL Fiddle](http://sqlfiddle.com/)上设置了一些示例数据，我会尝试根据数据重新编写查询。

# java - 由于运行线程，应用程序在关闭 Fragment 时崩溃

> ID：12896696
> 
> 赞同：1
> 
> 时间：2012-10-15T13:31:40.620
> 
> 标签：java, android, multithreading, user-interface, listener

我的 Fragmant 包含一个 SensorEventListener，它应该评估 LightSensor 的一些输入。

LightDisp 是我的观点。我认为它崩溃是因为 Fragment 已经关闭但 LightSensor 触发了 Fragment 以执行这个仍在工作的方法：

```
private void setBackground(int Backgroundcolor) {
    Resources r = getResources();
    Drawable[] layers = new Drawable[2];
    layers[0] = new ColorDrawable(Color.rgb(Backgroundcolor,
            Backgroundcolor, Backgroundcolor));
    layers[1] = r.getDrawable(R.drawable.screen);
    LayerDrawable layerDrawable = new LayerDrawable(layers);
    LightDisp.setBackgroundDrawable(layerDrawable);
    LightDisp.invalidate();
} 
```

如何避免这种情况？使用 LightDisp.post() 方法也没有解决问题。PS：我将延迟设置到 sensorListener 的速度越慢，崩溃就越少。使用 SENSOR_DELAY_FASTEST 几乎每次都会崩溃。

**日志猫：**

```
10-15 15:36:46.361: D/SensorManager(10304): registerListener :: handle = 3  name= GP2A Light Sensor delay= 10000 Listener= ch.steff_94.morseapp_beta.Input_lightsensor$1@418d52d8
10-15 15:36:46.366: E/SensorManager(10304): thread start
10-15 15:36:46.366: E/SensorManager(10304): =======>>> Sensor Thread Running <<<========
10-15 15:36:52.436: D/dalvikvm(10304): GC_CONCURRENT freed 390K, 4% free 14754K/15367K, paused 1ms+4ms
10-15 15:36:58.971: D/SensorManager(10304): unregisterListener:: handle = 3 Listener= ch.steff_94.morseapp_beta.Input_lightsensor$1@418d52d8 name = GP2A Light Sensor
10-15 15:37:06.711: D/AndroidRuntime(10304): Shutting down VM
10-15 15:37:06.711: W/dalvikvm(10304): threadid=1: thread exiting with uncaught exception (group=0x40c5d1f8)
10-15 15:37:06.756: E/AndroidRuntime(10304): FATAL EXCEPTION: main
10-15 15:37:06.756: E/AndroidRuntime(10304): java.lang.IllegalStateException: Fragment Input_lightsensor{418d4c00} not attached to Activity
10-15 15:37:06.756: E/AndroidRuntime(10304):    at android.app.Fragment.getResources(Fragment.java:741)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at ch.steff_94.morseapp_beta.Input_lightsensor.setBackground(Input_lightsensor.java:133)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at ch.steff_94.morseapp_beta.Input_lightsensor.access$2(Input_lightsensor.java:132)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at ch.steff_94.morseapp_beta.Input_lightsensor$1.onSensorChanged(Input_lightsensor.java:281)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at android.hardware.SensorManager$ListenerDelegate$1.handleMessage(SensorManager.java:635)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at android.os.Looper.loop(Looper.java:137)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at android.app.ActivityThread.main(ActivityThread.java:4511)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at java.lang.reflect.Method.invokeNative(Native Method)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at java.lang.reflect.Method.invoke(Method.java:511)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-15 15:37:06.756: E/AndroidRuntime(10304):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:06:27.597

你得到一个“片段未附加到活动”异常，所以我的猜测是你在创建`Fragment`之前实例化了你的东西`Activity`。弄清楚这可能是什么，然后将其移至您的`onActivityCreated()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:38:07.030

刚刚发现问题：我必须在我提交之前取消注册，`Listener`而`FragmentTransaction`不是在`onPause()`方法中；）

# android - 如何控制 android.R.layout.simple_spinner_dropdown_item 的宽度

> ID：12896697
> 
> 赞同：2
> 
> 时间：2012-10-15T13:31:45.267
> 
> 标签：android, android-spinner

我有许多由长文本字符串填充的微调器。如何控制下拉视图的宽度，以使显示接近于可选项目的长度？

# javascript - 如何使用 Javascript 禁用输入字段？

> ID：12896698
> 
> 赞同：20
> 
> 时间：2012-10-15T13:31:46.020
> 
> 标签：javascript, html, disabled-input

我从 Javascript 开始，我写了这个函数：

```
function disableField() {
  if( document.getElementById("valorFinal").length > 0 ) ) {
    document.getElementById("cantidadCopias").disabled = true; 
  }
} 
```

如果第一个字段已填充，它将禁用名为 cantidadCopias 的第二个字段。

```
<label> <span>Valor final:</span>
  <input type="text" class="input_text" name="valorFinal" id="valorFinal" onkeydown="disableField()"/>
</label>
<label> <span>Cantidad de Copias:</span>
  <input type="text" class="input_text" name="cantidadCopias" id="cantidadCopias"/>
</label> 
```

但是当第一个字段被填充时，它不会禁用第二个字段。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-15T13:38:06.590

你看控制台了吗？

*   Uncaught SyntaxError: Unexpected token )
*   未捕获的 ReferenceError：未定义 disableField

第一次出现拼写错误，现在你的代码多了一个`)`

```
function disableField() {
  if( document.getElementById("valorFinal").length > 0 ) ) {  <-- extra )
    document.getElementById("cantidadCopias").disabled = true; 
  }
}​ 
```

现在下一个问题是您没有查看值的长度。

```
if( document.getElementById("valorFinal").length > 0 )  <-- you are looking at the length of the HTML DOM Node. 
```

所以代码应该看起来像

```
function disableField() {
  if( document.getElementById("valorFinal").value.length > 0 ) { 
    document.getElementById("cantidadCopias").disabled = true; 
  }
}​ 
```

但是现在是怎么写的，一旦禁用，就不会重新启用了。

```
function disableField() {
    var isDisabled = document.getElementById("valorFinal").value.length > 0; 
    document.getElementById("cantidadCopias").disabled = isDisabled;
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:48:04.090

最好使用`onkeyup()`而不是`onkeydown()`. 问题是输入的值没有在 keydown 事件上更新。

[小提琴](http://jsfiddle.net/5LVg7/)

```
<label> 
  <span>Valor final:</span>
  <input type="text" class="input_text" name="valorFinal" id="valorFinal" onkeyup="disableField(this.value)"/>
 </label>
<label> 
  <span>Cantidad de Copias:</span>
  <input type="text" class="input_text" name="cantidadCopias" id="cantidadCopias"/>
</label> 
```

javascript

```
function disableField(val) {
    var cantidadCopias = document.getElementById("cantidadCopias");
    cantidadCopias.disabled = ( val.length > 0  );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:43:19.790

的JavaScript：

```
var disableField = function () {
  var state = document.getElementById("valorFinal").value.length > 0;
  document.getElementById("cantidadCopias").disabled = state;
}​;​ 
```

的HTML：

```
<label> <span>Valor final:</span>
  <input type="text" class="input_text" name="valorFinal" id="valorFinal" onkeyup="disableField()"/>
</label>
<label> <span>Cantidad de Copias:</span>
  <input type="text" class="input_text" name="cantidadCopias" id="cantidadCopias"/>
</label>​ 
```

当输入长度再次为 0 时，您还应该再次启用它。

除此之外，您应该挂钩 onkeyup 而不是 onkeydown。

你可以在这里试试：[jsfiddle.net/DBJfN/](http://jsfiddle.net/DBJfN/)

# nan - 子弹物理和 NAN 值

> ID：12896706
> 
> 赞同：2
> 
> 时间：2012-10-15T13:32:10.243
> 
> 标签：nan, bulletphysics

有时，某些对象会在使用 Bullet Physics 模拟的世界中获得 NAN 值。（非常罕见）正确的处理方法是什么？是否有内置子弹物理功能来检测此类物体以避免 NAN 病毒效应。为什么有些对象正在获取 NAN。我不施加 NAN 力量或冲动。我认为这可以通过在相同坐标下创建 2 个对象来解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:41:01.540

两件事情：

1）这样的夹紧速度应该可以防止任何身体立即加速

```
btScalar speed = velocity.length();
if(speed > speedLimit) {
    velocity *= speedLimit/speed;
    body->setLinearVelocity(velocity);
} 
```

2）自己检查NaN值，并使用最安全的默认值或以前的值

```
if (isnan(someValue))
{
    someValue = fallbackValue;
} 
```

# php - 为什么 smarty 不考虑会话变量？

> ID：12896708
> 
> 赞同：1
> 
> 时间：2012-10-15T13:32:17.760
> 
> 标签：php, codeigniter, smarty

为什么 smarty 3 不考虑 codeIgniter 会话变量：

```
$this->session->set_userdata('userId', $res['id']);  // this doesn't work 

$_SESSION['userId']=$res['id']; // this works. 
```

我在 smarty 中访问它：

```
{$smarty.session.userId} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:42:57.073

CI (!!!) 不使用 PHP 超全局 $_SESSION...

在此处阅读有关将 CI 的会话公开给 Smarty 的好方法。

[http://ellislab.com/codeigniter/forums/viewthread/110540/#571279](http://ellislab.com/codeigniter/forums/viewthread/110540/#571279)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:36:15.600

在代码点火器中

```
$this->session->set_userdata() 
```

功能将数据保存在cookie中，因此您无法通过会话获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T13:54:43.930

你可以这样做：

1.  在你的控制器中是这样的：

    $data['session']=$this->session->userdata;
    $this->smarty_parser->parse("smarty.php", $data);

或者，如果您不想每次都在控制器中执行此操作，则可以将其移至 smarty 包装器类。

2.  在您的 smarty 包装器 (smarty_parser.php) 中，如下所示：

    函数解析($template, $data, $return = FALSE) {
    if ($template == '') return FALSE; $CI =& get_instance();

    ```
     /* here it goes */
        $data['session']=$CI->session->userdata;

       ...
    } 
    ```

然后，您可以使用模板访问所有会话数据

```
{$session.session_id} 
```

# jsf - JSF 渲染浏览器依赖

> ID：12896709
> 
> 赞同：-2
> 
> 时间：2012-10-15T13:32:18.423
> 
> 标签：jsf, html-rendering

是否存在用于呈现 JSF 组件的浏览器依赖项？与 IE 6 相比，使用 chrome 插件和 google chrome，JSF 页面的渲染速度似乎要快得多，这有什么具体原因吗？我知道 html 在网络浏览器中运行.. jsf 在服务器上运行并创建 html... 我的问题是某些浏览器是否更适应 jsf 呈现 html 的方式（标签和 html 组件名称、id、脚本等的方式被创建有利于某些浏览器）让他们更快！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:37:10.743

不。

所有 JSF 组件都呈现为 HTML 组件

只是 Chrome 比 IE 6 快得多，仅此而已

* * *

[5 大 Web 浏览器中哪一个是最好的？（审查）](http://www.zdnet.com/blog/networking/which-of-the-big-five-web-browsers-is-the-best-review/1612)

上面的链接有点过时，但总结了大致的思路（IE很慢）

> JSF 不在网络浏览器中运行。JSF 在网络服务器中运行并生成 HTML (BalusC)

这意味着浏览器只获取 HTML，甚至不知道 HTML 是 JSF 组件之前......

# regex - 是否可以在 Notepad++ 中编写多个正则表达式搜索和替换命令？

> ID：12896711
> 
> 赞同：1
> 
> 时间：2012-10-15T13:32:21.007
> 
> 标签：regex, notepad++

我最近在 Notepad++ 的搜索和替换框中成功地使用了正则表达式。

但是，我现在有一个冗长的搜索和替换的简短列表，我想稍后再对另一个文件执行这些操作，而不是再次手动输入它们，我希望我可以将它们粘贴在某个脚本中并将其指向我的下一个文件。

Notepad ++中是否有可能发生这样的事情？

*如果没有*，请推荐一些支持这种方案的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:54:17.983

Notepad++ 可能不是自动化操作的最佳工具。我建议使用具有强大正则表达式引擎（如 perl）的脚本语言来进行此用途。请注意，尽管您的 notepad++ 正则表达式可能无法立即与其他引擎一起使用。

如果您不想为此学习一门新语言，也许您可​​以为此使用宏录制。我从未使用过该功能，但我想这就是它的设计目的；）

# sql - 从 sql 子句调用函数：返回可变数量的列

> ID：12896714
> 
> 赞同：0
> 
> 时间：2012-10-15T13:32:50.740
> 
> 标签：sql, oracle

是否可以调用从 SELECT 语句返回 REF 游标的游标？

**编辑** 我需要可变数量的返回字段，因此流水线表对我的目的没有用。

IE。

```
SELECT GetFields('field1, field2', flh_tout_name)
     FROM ENI_FLUSSI_HUB c
    WHERE flh_id_messaggio = '1' 
```

函数GetFields（字段，vFlhToutName）；vQuery := 'SELECT' || 字段 || '来自' || vFlhToutName;

```
 return EXECUTE IMMEDIATE (vQuery); 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:05:08.857

我不这么认为。您可以创建一个可以从选择中调用的流水线表函数。在此处查看我的答案[循环值，创建动态查询并添加到结果集](https://stackoverflow.com/questions/12604291/looping-on-values-creating-dynamic-query-and-adding-to-result-set/12605178#12605178)

另见[http://psoug.org/reference/pipelined.html](http://psoug.org/reference/pipelined.html)

基本上，您需要创建一个代表结果每一行的类型。然后你创建一个表类型，它是你的行类型的表。

```
CREATE TYPE MyRowType AS OBJECT(ID NUMBER, VALUE VARCHAR2(10));

CREATE TYPE MyTableType AS TABLE OF MyRowType; 
```

然后你的函数应该返回 MyTableType：

```
CREATE FUNCTION TestTableFunctions (lookup_Value VARCHAR2) 
RETURNS MytableType
AS
    TYPE r_cursor IS REF CURSOR;
    query_results r_cursor;
    results_out MyRowType := MyRowType(NULL, NULL);
BEGIN

OPEN query_results FOR
SELECT
    ID,
    Value
FROM
    MyTable
WHERE
    LookupValue = Lookup_Value;

LOOP
    FETCH query_results INTO 
        results_out.ID,
        results_out.Value;
    EXIT WHEN query_results%NOTFOUND;

    PIPE ROW(results_out);
END LOOP;

CLOSE query_results;
END TestTableFunctions; 
```

然后你可以打电话：

```
SELECT * FROM TABLE(TestTableFunctions('abcd')) 
```

# c# - C# out 关键字不能分配给局部变量

> ID：12896715
> 
> 赞同：2
> 
> 时间：2012-10-15T13:32:57.227
> 
> 标签：c#, out

我的一种方法接受 a`out int i`作为参数。我需要获取此变量的值并将其分配给局部变量。

考虑以下演示该问题的简单控制台应用程序：

```
class Program
    {
        static void Main(string[] args)
        {
            Other o = new Other();
            int i = 5; 
            o.Demo(out i);
            Console.WriteLine(i);
            Console.ReadKey();
        }
    }

    class Other
    {
        public void Demo(out int i)
        {
            // i = 10; Uncomment this to fix it (although this would not be an option)
            int k = i;            
        }
    } 
```

我无法将变量 i 分配给 k（在 Demo 方法中）。有没有人有解释（和解决方法:)）。

**编辑**

以上只是我正在尝试做的一个人为的例子：在现场，问题是我正在重写代码，在这个阶段，我无法更改“out”，因为它是其中之一许多其他项目引用的构造函数的参数！我想这可能意味着我吃饱了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:38:43.367

如果我们改为：

```
Other o = new Other();
int i;
o.Demo(out i);
Console.WriteLine(i); 
```

您会注意到在通话*之前*`i`不是“明确分配”的，而是在通话*之后*“明确分配”的。更一般地，因此，参数在进入方法体时不是“明确分配”的。您必须为参数分配一个值：**`out`**

 ***   在你尝试阅读之前（如果有的话）
*   退出前（不包括例外）

如果您还想传递一个值*，*请使用`ref`而不是`out`.

请注意，在*技术上* `ref`和`out`在实现方面是相同的；明确赋值的特殊处理是一个*编译器特性*，旨在避免我们必须使用虚拟值进行初始化，例如：

```
int i = 0; // why zero? this zero is useless and never used!
if(int.TryParse(s, out i)) {...} 
```

更好的：

```
int i;
if(int.TryParse(s, out i)) {...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:35:47.913

关键`out`是您**必须**为传入的`out`变量赋值。

如果正如您的评论所暗示的那样，这**不是**一个选项，那么您不应该使用`out`它。

为了分配值，只需像往常一样传入值：

```
class Other
{
    public void Demo(int i)
    {
        int k = i;            
    }
} 
```

* * *

现在您已经阐明了用例，我想说您仍然需要`out`从构造函数中重构。首先，查看构造函数的重载 - 有一个可以不使用的重载，`out`然后开始将调用站点更改为带`out`参数的调用站点，直到您将它们全部清除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T13:38:15.957

好吧，`out`意味着变量进入方法*uninitialized*，所以在使用它之前必须对其进行初始化。

的含义`out`是变量由过程设置。对于您的代码，它基本上与

```
int Demo()
{
    return ...;
} 
```

请注意，返回上面示例中的值通常优于通过`out`参数返回。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T13:39:16.217

关键`out`是该值来自*方法*，而不是进入。c#编译器阻止您这样做的原因与它阻止以下编译的原因完全相同 -`i`未初始化

诠释我; 诠释 k = 我;

如果您想使用此参数将值传递给此方法，那么您需要使用`ref`（以便将值传入*和*传出），或者只是`out`完全删除（以便仅将值传递给此方法）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T13:39:39.820

这就是全部的*意义*。您*必须*在函数返回之前为其赋值。如果你不喜欢这种行为，要么完全跳过它，要么使用*ref*关键字。**

# java - 用于阅读 PDF 的 Android API

> ID：12896716
> 
> 赞同：0
> 
> 时间：2012-10-15T13:33:02.047
> 
> 标签：java, android, api, pdf

> **可能重复：**
> [Android 的 PDF 解析库？](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android)
> [如何在我的 android 应用程序中阅读 pdf？](https://stackoverflow.com/questions/10299839/how-to-read-pdf-in-my-android-application)

我必须制作一个可以阅读 PDF 文档的应用程序。我不想使用外部应用程序来阅读 PDF 文档。

是否有可以在我的应用程序中实现的用于阅读 PDF 的 API？一个 API，可以让我从 PDF 文档中搜索和提取文本。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T13:36:33.607

您可以使用 ITextPDf 工具库工具[示例](http://www.vogella.com/articles/JavaPDF/article.html)

或者您可以创建一个空白文件并将其作为字节码写入此[示例](http://www.androidchennai.blogspot.in/2012/06/creating-and-writing-into-pdf-file.html)

# c# - 如何动态调用事件

> ID：12896717
> 
> 赞同：0
> 
> 时间：2012-10-15T13:33:02.097
> 
> 标签：c#, delegates

我有一个项目，在那个项目中我动态加载了一个 dll。看起来像：

```
 AssemblyPart assemblyPart = new AssemblyPart();
 WebClient downloader = new WebClient();
 string path = string.Format("../ClientBin/{0}.xap", "AgileTax");
 downloader.OpenReadCompleted += (e, sa) =>
        {
getdllinStream = GetStream(sa.Result, _CurReturnType.PackageName + "ERC", true);
_formsAssembly = assemblyPart.Load(getdllinStream);
 foreach (var item in _formsAssembly.GetTypes())
                    {
                        if (item.FullName == _CurReturnType.PackageName + "ERC.State.StateMain")
                        {
                            ATSpgm = item;
                        }
                    }
  var class_instance = _formsAssembly1.CreateInstance(PackageName + "ERC.State.StateMain");
if (class_instance != null)
            {

                MethodInfo[] infomem = ATSpgm.GetMethods();
                MethodInfo SetVarDllNG1 = ATSpgm.GetMethod("ProcessERC");
                SetVarDllNG1.Invoke(class_instance, parametersArray);
          }
         }
 downloader.OpenReadAsync(new Uri(path, UriKind.Relative)); 
```

现在我的问题是在.dll中我有如下代码：

```
 public event ERCErrorHandling OnERCErrorHandler;
  public delegate string ERCErrorHandling(Exception ex); 
```

现在我的问题是如何调用这个 ERCErrorHandling 事件，上面我调用了类似 ProcessERC 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:28:54.247

事件只是 MulticastDelegate 类型的字段。这意味着您可以通过以下说明获得它：

```
 FieldInfo anEvn = item.GetType().GetField("OnERCErrorHandler",
           System.Reflection.BindingFlags.Instance |
           System.Reflection.BindingFlags.NonPublic) as FieldInfo;
        if (anEvn != null)
            MulticastDelegate mDel = anEvn.GetValue(item) as MulticastDelegate; 
```

然后，您可以使用 GetInvokationList() 获取附加到事件的单个委托。每个委托都有一个 Target（将执行该方法的对象）和 Method。您可以循环执行它们。当然，您必须知道预期的参数才能将它们传递给 Invoke：

```
 Delegate[] dels = mDel.GetInvocationList();
                object[] parms = new object[1];
                parms[0] = null; // you must create the Exception you want to pass as argument here
                foreach (Delegate aDel in dels)
                    aDel.Method.Invoke(aDel.Target, parms); 
```

# exception - 客户端的 GWT 异常更改

> ID：12896720
> 
> 赞同：0
> 
> 时间：2012-10-15T13:33:07.323
> 
> 标签：exception, gwt, serialization

我想将在服务器端引发的异常发送到客户端。ATM 它部分工作。

当我的方法`DatabaseServerConnectionImpl`失败时，我保存异常，然后客户端检测（onFailure）该方法失败并返回先前保存的异常并进一步回调。

此异常现在包含一条消息和一个堆栈跟踪。该消息是正确的，但堆栈跟踪是错误的。我在返回命令之前检查了服务器端的堆栈跟踪，它是正确的。例如（在服务器端）：

```
org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2077) 
```

在客户端，稍后的异常如下所示：

```
com.google.gwt.user.client.rpc.core.java.lang.Exception_FieldSerializer.instantiate(Exception_FieldSerializer.java:16) and it has a different length 
```

当我创建异常时，我只是设置了消息和堆栈跟踪。而且 afaik 异常是默认序列化的。服务器端的另一种方法正在运行，没有任何问题。编辑：添加一些源代码：来自 DatabaseServerConnectionImpl 的示例方法 lastexception 是一个成员值！...

```
try {
        database.doStuff(obj);
    } catch (SQLException e) {
        Logger.getInstance().log(e); // Logs the Errors
         lastException = new Exception(e.getMessage());
        StackTraceElement[] tmp = new StackTraceElement[e.getStackTrace().length];
        for (int i = 0; i < tmp.length; i++) {
            tmp[i] = e.getStackTrace()[i];
        }
        lastException.setStackTrace(tmp);
        throw new IllegalArgumentException();
    } 
```

当客户端异步回调失败时，我在服务器端调用以下方法：

@Override public final SerializableException getLatestException() {

```
 return  lastException; 
    } 
```

我也用 try and catch 块尝试了上面的方法，但没有捕获到异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:19:39.783

异常说，您的 rpc-dto 的一个元素无法序列化。

这可能是捕获的异常。异常有无参数构造函数吗？如果不是，则无法序列化。

我认为将完整的 stcktrace 发送给客户端并不是一个好主意。一个简单的错误代码对您的用例来说还不够吗？

# c# - 在 NCrunch 中运行但不在 Resharper 中的单元测试

> ID：12896726
> 
> 赞同：5
> 
> 时间：2012-10-15T13:33:59.227
> 
> 标签：c#, unit-testing, resharper, signalr, ncrunch

我有一组单元测试，它们曾经在 NCrunch 和 Resharper 7（在 VS2012 中）测试运行程序中运行得非常好。我通过 NuGet 添加了 SignalR 和 SignalR.Ninject，现在我的单元测试在 NCrunch 中工作，但不再在 Resharper 中运行。

TestFixtureSetUp 失败并出现以下错误：

```
SetUp : System.IO.FileLoadException : Could not load file or assembly 
'Ninject, Version=2.2.0.0,    Culture=neutral, PublicKeyToken=c7192dc5380945e7' 
or one of its dependencies. The located assembly's manifest definition does 
not match the assembly reference. (Exception from HRESULT: 0x80131040)

at ProjectName.Infrastructure.SiteResolver.BindSignalR(IKernel kernel)
at ProjectName.Infrastructure.SiteResolver.RegisterServices(IKernel kernel) in SiteResolver.cs: line 29
at ProjectName.Tests.Unit.DataTests.Init() in DataTests.cs: line 48 
```

在 App.Config 中，我有

```
<runtime>
  <assemblyBinding>
    <dependentAssembly>
      <assemblyIdentity name="Ninject" publicKeyToken="c7192dc5380945e7" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

Web.Config 中的等效项适用于实际的 MVC 项目。

任何想法如何解决它？

**更新**

我试过打开和关闭影子复制，结果没有区别。

**更新**

Jim Skim 的回答生成的日志文件的输出：

```
*** Assembly Binder Log Entry  (15/10/2012 @ 16:43:47) ***

The operation failed.
Bind result: hr = 0x80131040\. No description available.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  C:\Program Files (x86)\JetBrains\ReSharper\v7.0\Bin\JetBrains.ReSharper.TaskRunner.CLR4.MSIL.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = ######\simon
LOG: DisplayName = Ninject, Version=2.2.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7
 (Fully-specified)
LOG: Appbase = file:///Z:/ProjectName/ProjectName.Tests.Unit/bin/Debug
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = ProjectName.Tests.Unit
Calling assembly : ProjectName.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: Z:\ProjectName\ProjectName.Tests.Unit\bin\Debug\ProjectName.Tests.Unit.dll.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Ninject, Version=2.2.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///Z:/ProjectName/ProjectName.Tests.Unit/bin/Debug/Ninject.DLL.
LOG: Assembly download was successful. Attempting setup of file: Z:\ProjectName\ProjectName.Tests.Unit\bin\Debug\Ninject.dll
LOG: Entering run-from-source setup phase.
LOG: Assembly Name is: Ninject, Version=3.0.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7
WRN: Comparing the assembly name resulted in the mismatch: Major Version
ERR: The assembly reference did not match the assembly definition found.
ERR: Run-from-source setup phase failed with hr = 0x80131040.
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T13:43:47.983

我没有具体的答案，但在追踪此类问题时，我使用了 Fusion 日志查看器。打开 Visual Studio 命令提示符并运行`fuslogvw.exe`

如果您在禁用日志记录之前尚未执行此操作，请进入设置并将其设置为`Log binding failures to disk`. 如果您发现它最初没有显示任何日志，请尝试在管理员模式下启动命令提示符。

我最近遇到了这样的问题，正是这个工具为我解决了这个问题，尽管有趣的是它通常总是在 Resharper 中工作。

解决方案几乎总是一个绑定问题，所以你来对地方了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T12:09:48.637

VS2012 中似乎存在一个错误，除非您使用的是测试设置文件[http://youtrack.jetbrains.com/issue/RSRP-329746 ，否则它不会获取绑定重定向](http://youtrack.jetbrains.com/issue/RSRP-329746)

无论您使用哪种测试框架，只需右键单击解决方案并添加一个新的 testsettings 文件。默认情况下，这是空的，这是您需要的。从那里您需要做的就是将其标记为活动测试设置（工具 -> 测试 -> 选择活动测试设置 -> 文件名）

更新：

根据此链接：http: [//youtrack.jetbrains.com/issue/RSRP-329567](http://youtrack.jetbrains.com/issue/RSRP-329567)似乎人们已经能够解决此问题以使用 R# 7.1

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T13:21:56.577

从[这个链接](http://youtrack.jetbrains.com/issue/RSRP-329567#comment=27-387675)（最初由@bryanbcook 提到），虽然 Resharper 7.1 升级不起作用，但其中一位评论者发布了一些代码来强制解决。我已经在我的单元测试基类中填写了空白：

```
public class UnitTestBase
{
    static DataTests()
    {
        AppDomain.CurrentDomain.AssemblyResolve += CurrentDomainAssemblyResolve;
    }

    public static Assembly CurrentDomainAssemblyResolve(
        object sender, ResolveEventArgs args)
    {
        var name = new AssemblyName(args.Name);
        return name.Name == "Ninject" 
            ? typeof(KernelBase).Assembly : null;
    }
} 
```

# c++ - 为什么我们可以直接复制指针，但是我们不能在c++中直接复制数组

> ID：12896727
> 
> 赞同：6
> 
> 时间：2012-10-15T13:34:00.490
> 
> 标签：c++

定理说我们不能将一个数组初始化为另一个数组的副本。但是我们可以将指针初始化为指向另一个数组的第一个元素的指针的副本：

```
int a[] = {0, 1, 2}; 
int a2[] = a;       //error
int *a3 = a;        //OK 
```

为什么`int a2[] = a;`是错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T14:13:51.567

数组不能在 C++ 中分配给另一个数组对象或从另一个数组对象初始化，因为它们不能在 C 中，并且由于不再真正相关的历史原因，它们不能在 C 中。

`int a[] = {0}; int b[] = {0}; a = b;`在非常早期的 proto-C 中，是否应该将数组的内容复制`b`到`a`或重新放置`a`要引用的名称，会有一些混淆`b`。与初始化类似，是否`a`应该是副本`b`或别名。这种模糊性已经存在了 40 年：很快就很清楚，如果允许它，那么*C*（和 C++）中的合理含义就是它应该复制，但 C 中的数组从未被制成“正确”的值类型。

没有技术原因不可能，例如，您可以分配具有数组作为数据成员的结构类型。该标准根本没有将您的代码定义为正确的 C++。

指针的行为与此没有直接关系。初始化指针（指向数组的第一个元素）与初始化数组及其内容是不同的操作，并且该语言允许在 RHS 上进行不同的操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T14:13:56.320

数组不是指针，所以你不能指望像指针一样使用它们而不会遇到麻烦。访问[https://blogs.oracle.com/ksplice/entry/the_ksplice_pointer_challenge](https://blogs.oracle.com/ksplice/entry/the_ksplice_pointer_challenge)，参加一项有助于您了解差异的活动。

如果将数组包装在结构中，则可以将数组初始化为另一个数组的副本。

```
struct myarray {
  int a[3];
}; 
```

如果你的编译器允许 GNU C++ 风格的指定初始化器：

```
myarray a = {a: {0, 1, 2}}; 
```

这会复制结构，包括 a 的数组到 a2 的数组。

```
myarray a2 = a; 
```

数组将位于内存中的不同位置：

```
bool is_different_array = a2.a != a.a; // true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:51:49.903

如果你这样做

```
int *a3 = a; 
```

你不复制值，只是内存地址，称为指针

如果您不想复制数组的值，则必须定义一个复制构造函数。

[http://en.wikipedia.org/wiki/Copy_constructor](http://en.wikipedia.org/wiki/Copy_constructor)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:53:25.647

让我们以不同的方式来看待它。数组适用于 C/C++ 中的静态分配。所以我们必须确保编译器能够在编译时自己计算出数组的大小，这是数组的强制性条件，因为有很多该死的原因。因此，每当编译器遇到“[]”符号时，它就希望可以从代码本身中计算出内存大小（需要在运行时分配）。

当我们在 C/C++ 中定义一个数组时，会分配数组的内存（当我说数组时，我指的是要存储数组元素的单元格）。现在当你说喜欢

```
int a[] = {3,4,5,6}; 
```

它将分配一些内存，例如 16 个字节用于 4 个元素，这可以由编译器在编译时计算出来。

现在当你说

```
int a2[] = a; 
```

编译器看到数组符号“[]”，但无法确定需要为数组单元分配多少内存，这会给您一个错误。

当我们谈论一个数组时，它总是关于由一个常量指针指向的被取消引用的单元格，而当我们谈论一个指针时，它可以不引用任何东西而存在，这就是所谓的悬空指针。希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T13:39:17.093

可以将一个数组分配给另一个数组——但只能通过将第一个数组的基础数据复制到第二个数组（例如，使用循环）。您问题中的代码行：

```
int *a3 = a; 
```

只是将调用的指针分配为指向`a3`数组的第一个元素的地址`a`，但它不会更改这两个变量引用的基础数据（在本例中为整数）。

此外，请查看[此](https://stackoverflow.com/questions/3959705/arrays-are-pointers)内容以了解数组和指针之间的关系。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T13:40:38.017

数组不仅仅是一个指针，在您的示例中，该数组`a[]`表示已在内存中保留了 3 个整数大小的连续内存地址。如果您要尝试“复制”该数组，它还必须保留 3 个整数大小的连续内存地址并复制`0 1 2`到它们。原语的赋值运算符不会被期望做这么多的工作。

但是，当您创建一个指针时，您只是在命名`a[]`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-15T14:04:28.103

当您要声明将分配到堆栈上的数组时，编译器需要知道元素的数量，这就是您必须声明的原因：

```
int a[] = {x,y,etc..}; 
```

或者

```
int a[NUMELEMENTS]; 
```

虽然可以接受指向已经存在的数组的指针，但不能从指向已经存在的数组的指针创建新的堆栈数组，这`int a2[]= a;`是试图做的事情。编译器不知道要为 a2 分配多少元素。

通常，将一个数组复制到另一个数组的最佳方法是使用`std::copy`.

# apache - 将 https://subdomain.example.com 重定向到 https://example.com/subdomain

> ID：12896732
> 
> 赞同：1
> 
> 时间：2012-10-15T13:34:13.280
> 
> 标签：apache

我正在尝试重定向流量，并且我已经设法使它`HTTP`与此一起工作：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^wiki\.example\.com
RewriteCond %{HTTPS} !=on
RewriteRule (.*) http://example.com/wiki/$1 [L]
RewriteCond %{HTTP_HOST} ^db\.example\.com
RewriteCond %{HTTPS} !=on
RewriteRule (.*) http://example.com/db/$1 [L] 
```

到目前为止，我还没有使用它`HTTPS`。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:50:55.603

您需要复制代码，`HTTPS`但将 SSL 重定向设置`RewriteCond`为`%{HTTPS} =on`。我还将设置`RewriteBase`选项以及`R=301`在重定向上设置标志。`RewriteCond`此外，您可以通过使用`%N`对 wiki/db的反向引用来简化一些事情-

```
RewriteEngine On
RewriteBase /

# HTTP Redirects
RewriteCond %{HTTP_HOST} ^(wiki|db)\.example\.com
RewriteCond %{HTTPS} !=on
RewriteRule (.*) http://example.com/%1/$1 [R=301,L]

# HTTPS Redirects
RewriteCond %{HTTP_HOST} ^(wiki|db)\.example\.com
RewriteCond %{HTTPS} =on
RewriteRule (.*) https://example.com/%1/$1 [R=301,L] 
```

如果您的域名将来可能会更改，并且您想确保基于匹配进行重定向，您还可以在您的`RewriteCond`-

```
# HTTPS Redirects
RewriteCond %{HTTP_HOST} ^(wiki|db)\.(example\.com)
RewriteCond %{HTTPS} =on
RewriteRule (.*) https://%2/%1/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:39:53.340

如果您希望对 HTTP 和 HTTPS 进行重定向，只需在 HTTPS 环境变量设置为 on 时取出阻止应用重写的重写条件。

# iphone - iPhone 上的大小容器 Twitter Bootstrap

> ID：12896734
> 
> 赞同：0
> 
> 时间：2012-10-15T13:34:16.390
> 
> 标签：iphone, html, twitter-bootstrap, responsive-design

我使用 Twitter Bootstrap 制作了一个响应式网站，如果我使用网络上的 iPhone 模拟器或新 Firefox 中内置的响应式设计查看器，则布局在调整到 iPhone 尺寸时非常适合。

在 iPhone 上观看[此](http://www.volleykrant.be/)网站时，我对容器的大小有很大的问题，似乎将其更改为最大 20px。调整浏览器窗口大小时怎么没有这个问题？

对于那些没有 iPhone 的人，这里是截图：

[![苹果手机视图](../Images/6cf1ded02b1eeb08a4a153c5b7869325.png)](https://i.stack.imgur.com/CJhsS.png)

# sql - 如何管理具有大量插入和选择的大表？

> ID：12896735
> 
> 赞同：2
> 
> 时间：2012-10-15T13:34:19.397
> 
> 标签：sql, database, oracle, indexing

我有一个表，即 X，有大约 64 列存储在线金融交易。每天有数百万条记录被插入到 X 中。大约有 16 列 X 是可查询的，也就是说很多系统报表需要根据这 16 列的值来过滤 X 的数据。

拥有所有这 16 列的数据库索引会使插入操作太慢。另一方面，在某些列上没有索引也会使某些报告太慢。

所以，这就是问题所在。我如何设计表 X 及其索引以获得最佳的插入和报告性能？我使用 oracle 11g DBMS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:49:22.820

尝试对表进行分区。与其创建一个巨大的表，不如每天、每周或每月创建一个，并创建一个将所有这些表连接起来以进行查询的视图。或者，Oracle 支持分区表（但是否可用取决于您的 Oracle 版本）。

插入数据时，插入正确的分区。这样，要更新的索引会小得多。缺点是您将需要更多的索引空间，因为索引值将被复制。

从积极的方面来说，查询可能会快得多，因为数据库可以在不同磁盘上并行读取表。

另请注意，SQL 数据库不会扩展到任何大小。请考虑使用集群或云数据库。它们还有其他缺点，但它们可以处理任意数量的记录（只要您有足够的物理空间供服务器使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:45:09.977

建议：

1.  如果可能，尝试规范化表格。
2.  如果不存在则创建聚集索引。（INT64 会在你的情况下）
3.  如果索引列的大小很大并且遵循某种模式，请尝试将不同的数据移动到单独的查找表并替换为代理键引用，这将减少索引大小。
4.  创建具有多个键的索引。（减少索引数量）
5.  对表进行分区，因为一年内您将获得大约 3.6 亿条记录。

# picasa - 是否有任何公共论文/算法可以将相似的人脸分类到不同的群体，如谷歌 Picasa 所做的？

> ID：12896736
> 
> 赞同：1
> 
> 时间：2012-10-15T13:34:21.660
> 
> 标签：picasa, face-recognition

是否有任何公共论文/算法可以将相似的人脸分类到不同的群体，如谷歌 Picasa 所做的？

例如，我有很多人脸照片，我没有对它们进行标记，算法可以从这些人脸中提取一些特征，它计算相似度分数或特征向量距离之类的东西，并将相似的人脸分组。

搜索了一下，似乎 Picasa 的算法是不公开的。谁能分享我一些光？非常感谢。

# javascript - 如何从 Django 加载模型管理文件中的静态文件？

> ID：12896739
> 
> 赞同：3
> 
> 时间：2012-10-15T13:34:30.430
> 
> 标签：javascript, python, django, static, amazon

我在亚马逊服务器中有我的 Django 静态文件，我试图将这些文件加载​​到我的模型管理文件中，但它只适用于绝对 URL。

在我的 Django 模板中，我加载并调用我的静态文件

```
{% load admin_static %}
<script type="text/javascript" src="{% static "js/myfile.js" %}"></script> 
```

在 settings.py 我设置了这个

```
STATIC_URL = 'https://s3.mydomain.com/static/' 
```

在我的模型管理员中，它只适用于

```
class Media:
    js = ("https://s3.mydomain.com/static/myfile.js",
          "https://s3.mydomain.com/static/myfile2.js",) 
```

如何仅使用静态文件名加载这些文件？我尝试

```
class Media:
    js = ("{% static "js/myfile.js" %}",
          "{% static "js/myfile2.js" %}",) 
```

但不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:38:14.027

这个怎么样：

在您的设置文件中：

```
STATIC_URL = "https://aws.domain.com/" 
```

这是[标准设置](https://docs.djangoproject.com/en/1.4/ref/settings/#static-url)。**请注意**，如果设置为非空值，它必须以斜线结尾。

```
from django.conf import settings

class Media:
    js = (settings.STATIC_URL + "js/myfile.js",
          settings.STATIC_URL + "js/myfile2.js") 
```

# iphone - UITableViewController 类中未调用 cellForRowAtIndexPath 方法

> ID：12896741
> 
> 赞同：0
> 
> 时间：2012-10-15T13:34:41.567
> 
> 标签：iphone, ipad, uitableview

这是我用来重新加载表的代码。我正在尝试将 facebook 朋友列表显示到这个 tableview 中，一旦我得到列表，我就会向这个班级发布通知，我正在尝试重新加载 tableview。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadTable) name:@"reload" object:nil];

- (void)reloadTable
{
    [self.tableView reloadData];
} 
```

所有其他方法都被调用，但只有`cellForRowAtIndexPath`不被调用。

# wpf - 在自定义控件模板中找不到资源

> ID：12896747
> 
> 赞同：2
> 
> 时间：2012-10-15T13:35:01.407
> 
> 标签：wpf, xaml, custom-controls

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:local="clr-namespace:CuratioCMS.Client.UI.Controls">
<Style BasedOn="{StaticResource {x:Type Button}}" TargetType="{x:Type local:ImageButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:ImageButton}">
                <StackPanel Height="Auto" Orientation="Horizontal">
                    <Image Width="20"
                           Height="20"
                           Margin="10,4,0,4"
                           Source="{Binding Path=Image,
                                            RelativeSource={RelativeSource TemplatedParent}}"
                           Stretch="Fill" />
                    <TextBlock Margin="5,0,10,0"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Center"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="{TemplateBinding Foreground}"
                               Text="{TemplateBinding Label}" />
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是 ImageButton 自定义控件的 Generic.xaml 中的代码。whit 按预期工作，但我不能从 Base button stale 继承，所以不是从 Button 继承所有基本样式，这种样式只创建没有任何基本样式的自定义控件，并且尽可能

```
BasedOn="{StaticResource {x:Type Button}}" 
```

在 VS 内部，一行显示错误，显示**找不到 Resource '{x:Type System.Windows.Controls.Button}'**

我不知道如何实现所需的样式以及为什么此错误消息会出现在 Visual Studio 编辑器中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:52:35.243

您正在基于通用按钮样式（位于 Generic.xaml 中）定义样式，然后重新定义样式的模板。这样基本样式将被覆盖。

如果你想稍微改变一下风格，你有两个选择：

选项1：

1.  为通用按钮样式提供一个键（找到在 Generic.xaml 中定义的样式`TargetType="{x:Type Button}"`并添加`x:Key="someName"`到它的属性中）
2.  将所有其他按钮（ImageButtons 除外）的样式设置为`{StaticResource someName}`
3.  将 ImageButton 样式的 BasedOn 属性设置为`{StaticResource someName}`

选项2：

1.  您可以复制通用按钮样式
2.  通过将其 TargetType 设置为 ImageButton 并“不”为其设置任何键来使其通用
3.  更改所需的部分。

选项 2 通常是一个更好的解决方案，因为它不需要进行大量更改，但是我已经完成了您前一段时间想要做的事情，但我没有找到任何方法来避免重复的样式代码。

# performance - Oracle 性能 - JDBC Oracle Thin 驱动程序：是否使用参数？

> ID：12896752
> 
> 赞同：1
> 
> 时间：2012-10-15T13:35:09.640
> 
> 标签：performance, oracle, jdbc

我有 20 年的 SQL 经验，但不是专门使用 Oracle 的。一位“Oracle 专家”向我保证，构建一个没有参数的 SQL 查询（像这样）：

```
SELECT t.ID, t.Name, t.Address ... FROM Table1 t WHERE t.ID = 'someID' AND t.Name = 'someName'... 
```

至少和使用参数一样快（像这样）

```
SELECT t.ID, t.Name, t.Address ... FROM Table1 t WHERE t.ID = ? AND t.Name = ? 
```

代码在循环中执行。

在我使用过的大多数其他数据库中，使用参数可以提高速度。它允许数据库缓存与 SQL 语句匹配的编译计划。由于 SQL 不会在每次调用时更改（尽管参数会更改），因此可以提高性能。数据库简单地绑定参数并继续。

“甲骨文专家”表示这没有必要。但显然，Oracle 需要“解析”参数，将剩余的字符串与缓存的执行计划相匹配，然后重新绑定参数，就好像它们最初是作为参数传递的一样。

我在这里有正确的心理图景吗？Oracle 是否有一些“神奇”之处，它真的不会影响我们如何处理参数传递/SQL 构建策略？

是否有关于 Java / JDBC / Oracle 瘦驱动程序的想法我不知道我应该在这里知道？

我希望加强我的理解或扩展我的知识。

（除了安全问题，我知道构建 SQL 字符串允许 SQL 注入攻击，我正在寻找更直接的弹药来反对专家的意见 - 如果它存在的话）。

其他详情：`Oracle 11gR2, Java 1.6`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:44:55.653

直言不讳——你说得对，你的 Oracle 专家似乎根本不是专家（除非他想出售昂贵的咨询时间来加快你​​的应用程序投入生产后的速度）。

如果您构建不带参数的 SQL 语句（在 Oracle 中称为绑定变量），则会强制数据库在每次执行该语句时对其进行硬解析。

请参阅[AskTom 关于软/硬解析和绑定变量](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2588723819082)以获得更好的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:49:52.963

使用参数几乎总是可取的。如果您使用文字（版本一），数千条略有不同的 SQL 语句将访问数据库，导致硬解析并填满 Oracle 的语句缓存。

这是该规则的一个例外：如果您要查询的列的值分布非常不均匀，则带有文字的版本可能允许查询优化器找到更好的计划。

例如，假设绝大多数 slashdot 读者是男性（*），

```
select * from slashdot_readers where gender='MALE'; 
```

可能会导致查询优化器忽略索引`gender`并执行全表扫描，而

```
select * from slashdot_readers where gender='FEMALE'; 
```

可能会导致它使用索引。使用变量，查询优化器将不知道要使用哪个版本，因此它可能总是进行全表扫描。

(*) 只是为了这个例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:41:56.203

我没有做过任何性能测量，但我认为你的图片是正确的。无论如何，即使它们同样快，我总是更喜欢使用参数/绑定变量的变体来防止 SQL 注入。在您的 where 子句中固定字符串的示例中，这可能不是问题，但在实际应用程序中，这些字符串通常来自外部某个地方。（我想你在我写这个答案时编辑了你的问题:-)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:03:51.537

做一些测量。获取数据。

从我对甲骨文的了解来看——你应该是对的。显然，请确保它是否在循环中，您正在重新执行相同的操作`PreparedStatement`，而不是每次都重新准备它。仅此一项就可以降低查询的成本。

需要注意的一件事 -与简单的测试用例相比，您的实际应用程序可能从绑定变量中受益*更多*，因为在实际应用程序中，Oracle 将在其缓存中包含各种其他 SQL 语句（我忘记了不同内存区域的术语并缓存在 Oracle 中）并且随着它的填满，发送新 SQL 的成本一直上升很多。

# java - java中带有invokeAll()和Future的ExecutorService

> ID：12896755
> 
> 赞同：9
> 
> 时间：2012-10-15T13:35:12.357
> 
> 标签：java

手头有以下代码：

```
 ExecutorService executor = Executors.newFixedThreadPool(10);
    Collection collection = new ArrayList();
    for (int n=1; n<100; n++)
        collection.add(new MyThread(n));

    try {
        List<Future<Boolean>> futures = executor.invokeAll(collection);

        for(Future<Boolean> future : futures){
            future.get();
            if (future.isDone()) {
                System.out.println("true");
            }
            else
                System.out.println("false");
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

如果以上是正确的？
如果一切`future.isDone()`都是真的，那么所有的线程都已经完成了吗？
我怎样才能制作一面旗帜，以确保所有这些都完成了？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-05T13:01:51.917

作为对vainolo回复的评论，但我没有足够的声誉点：

`isDone`也是多余的，因为`invokeAll`返回一个`isDone`为真的期货列表。javadocs[提到了这一点](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection))。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T13:39:00.530

要检查所有内容是否正确，您可以执行以下操作：

```
boolean works=true;
  for(Future<Boolean> future : futures){
        future.get();
        if (future.isDone()) {
            System.out.println("true");
        }
        else{
            System.out.println("false");works=false;
        }
    }
if(works)System.out.println("yea it works") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T13:38:40.887

通常，您将 Runnable 任务添加到线程池。将线程添加到线程池不会按照您的想法进行。

当 future.get() 为每个任务返回时，所有任务都已完成。运行任务的线程仍将运行。

如果您想在任务完成后停止所有线程，您可以使用`executor.shutdown();`和`executor.awaitTermination`

* * *

我会写它的方式是

```
ExecutorService executor = Executors.newFixedThreadPool(10);
List<Future<Boolean>> futures = new ArrayList<>();
for (int n = 0; n < 100; n++)
    futures .add(executor.submit(new MyTask(n));

for(Future<Boolean> future : futures) {
    boolean result = future.get();
    // do something with the result.
} 
```

如果你不需要结果来输入`Future<Void>`或`Future<?>`或只是`Future`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T13:46:17.907

使用布尔变量是了解所有线程都已完成的最简单方法。另一种方式可以是使用原语，例如整数。您可以简单地增加/减少计数器以查看是否所有线程都已完成。

另一种方法可能是检查对象`awaitTermination()`调用的返回值。`ExecutorService`

```
 int counter = 0;

  for(Future<Boolean> future : futures)
  {
        future.get();            
        if (future.isDone())
            System.out.println("true");
        else
        {
            counter++;
            System.out.println("false");
        }
   }

   if(counter != 0)
       System.out.println("DONE!");

   // Another way of checking all threads are done.
   if(executor.awaitTermination(100, TimeUnit.SECONDS))
       System.out.println("DONE!"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T13:38:51.370

使用 value =1 初始化变量 check 并更新 else 中的值。然后在循环执行后检查 check 的值

```
 if (future.isDone()) {
             System.out.println("true");
        }
        else
            {System.out.println("false");
             check=0;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T13:38:40.380

如果方法`future.get`返回，那么future完成的计算就完成了，所以调用`isDone`是多余的。是的，在所有期货都完成之后，`ThreadPool`应该可以使用所有线程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-20T04:38:56.590

Invokeall 调用此方法等待完成所有获取然后 CPU 执行到达 for 循环以检查是否完成或者我们需要 do .. While 循环来检查任务的完成

# c++ - 获取当前目录下的所有文件

> ID：12896764
> 
> 赞同：1
> 
> 时间：2012-10-15T13:35:48.697
> 
> 标签：c++, winapi

我尝试编写返回字符串数组的函数（位于某个目录中的所有文件和文件夹）。代码如下。当我使用此代码将信息输出到控制台时（使用下面的注释代码），它工作得很好，但是当我尝试返回指向指针的指针时，`wchar_t`我获得了每个元素都等于 enother 的数组（所有元素都相同）。我做错了什么？

```
wchar_t path[SIZE];
    wchar_t *PathCreator(wchar_t *dir, wchar_t *fileName)
    {
        int j = 0;
        while(j < SIZE)
        {
            path[j] = '\0';
            j++;
        }
        int i;
        i = 0;
        while(*dir != '*' && *dir != '\0')
        {
            path[i] = *dir;
            i++;
            dir++;
        }
        wchar_t *t = fileName;  
        while(*t != '\0')
        {
            path[i] = *t;
            i++;
            t++;
        }
        path[i] = '\0';
        return path;
    }
wchar_t* allFlsArr[SIZE];
int i = 0;
wchar_t **GetAllFiles(wchar_t* dir)
{
    WIN32_FIND_DATA file;
    HANDLE search_hendle = FindFirstFile(dir, &file);
    if(search_hendle)
    {
        do
        {
            wchar_t *p = PathCreator(dir,file.cFileName);
            //std::wcout << p << std::endl;
            allFlsArr[i++] = p;
            std::wcout << i << std::endl;
        }
        while(FindNextFile(search_hendle, &file));
        allFlsArr[i] = '\0';
    }
    CloseHandle(search_hendle);
    return allFlsArr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:41:26.593

我怀疑您没有为 PathCreator 的返回分配内存。这意味着您在每个条目处设置相同的指针。当您更改指针位置的数据时，它会更改，并且每个条目都在查看该数据时，所有内容都会“更改”。

最好使用 std::wstring ...

```
std::wstring PathCreator(const std::wstring& dir, wchar_t *fileName)
{
    return dir.substr( 0, dir.size() - 1 ) + fileName;
} 

std::vector< std::wstring > GetAllFiles( const std::wstring& dir)
{
    std::vector< std::wstring > allFlsArr;
    WIN32_FIND_DATA file;
    HANDLE search_handle = FindFirstFile(dir.c_str(), &file);
    if(search_handle)
    {
        do
        {
            std::wstring path = PathCreator(dir,file.cFileName);
            //std::wcout << path << std::endl;
            allFlsArr.push_back( path );
            std::wcout << i << std::endl;
        }
        while(FindNextFile(search_handle, &file));
    }
    CloseHandle(search_handle);
    return allFlsArr;
} 
```

您还需要更改 PathCreator 中的相应代码以使用 std::wstring。

***编辑***：如果您真的不会使用 STL，那么您需要修改 PathCreator 以执行以下操作：

```
wchar_t *PathCreator(wchar_t *dir, wchar_t *fileName)
{
    wchar_t* path = new wchar_t[SIZE];
    int j = 0;
    while(j < SIZE)
    {
        path[j] = '\0';
        j++;
    }
    int i;
    i = 0;
    while(*dir != '*' && *dir != '\0')
    {
        path[i] = *dir;
        i++;
        dir++;
    }
    wchar_t *t = fileName;  
    while(*t != '\0')
    {
        path[i] = *t;
        i++;
        t++;
    }
    path[i] = '\0';
    return path;
} 
```

完成后不要忘记删除[]字符串！

然而，不使用 STL 函数和它们提供的 RAII 奖励，你确实是在给自己制造痛苦。我的方法不需要记住删除之后使用的内存，因为当它超出范围时，内存将被自动释放。

我真的认为第一种方法更容易。

# php - 通过 PHP 使用 maxlength 标签检查表单输入长度

> ID：12896766
> 
> 赞同：1
> 
> 时间：2012-10-15T13:35:56.443
> 
> 标签：php, forms, input, maxlength

我的问题很简单：如果我在 HTML 表单中有一些带有 maxlength 标签的输入字段，我也必须通过 PHP 检查输入长度吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T13:38:01.043

您应该这样做，因为任何人都可以“复制”您的表单并使用它。服务器端检查比客户端检查好。（它是安全的）

例如，您的表格：

```
<form method='post' action='/pay.php'>
<input type='text' maxlength='10' name='addres'>
</form> 
```

我可以轻松地做这样的事情：（并将其上传到一些免费的服务器或类似的东西）

```
<form method='post' action='http://www.yourdomain.com/pay.php'>
<input type='text' name='addres'><!--no maxlength='10' for me-->
</form> 
```

现在我有点“超越”你的限制。

但是，您可以编辑`pay.php`文件：

```
$addres = clean_input($_POST['addres']); //A custom function to make sure it's a clean string
if(strlen($addres) > 100)
{
  //Something weird
}
else
{
  //We're good
} 
```

# php - 在 DUPLICATE KEY 更新错误时插入

> ID：12896769
> 
> 赞同：1
> 
> 时间：2012-10-15T13:36:13.447
> 
> 标签：php, mysql

我使用 php 表单向导来更新表单上的 mysql 数据库。PHP 表单向导只执行 INSERT INTO 但是所以我搜索了互联网并找到了 DUPLICATE KEY UPDATE 命令。但是，对于我的查询，我无法获得正确的语法。请注意 INSERT INTO 完美运行。只是试图在更新部分工作。任何帮助将不胜感激。查询如下

```
@$pfw_strQuery = "INSERT INTO  `client`(`client_id`,`email`,`first_name`,`last_name`,`first_time`,`password`)VALUES (\"$client_id\",\"$email\",\"$first_name\",\"$last_name\",\"$first_time\",\"$textfield\") ON DUPLICATE KEY UPDATE `email` = VALUES(\"$email\"),`first_name` = VALUES(\"$first_name\"),`last_name` = VALUES(\"$last_name\"),`first_time` = VALUES (\"$first_time\"),`password` = VALUES (\"$textfield\") "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:39:59.260

查看[有关`ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html). 如果要在该子句中使用 PHP 变量，请删除该子句中的`VALUES()`附件。`ON DUPLICATE KEY`

```
$pfw_strQuery = "INSERT INTO  `client` (`client_id`,`email`,`first_name`,`last_name`,`first_time`,`password`)
  VALUES ('$client_id','$email','$first_name','$last_name','$first_time','$textfield')
  ON DUPLICATE KEY UPDATE
    `email` = '$email',
    `first_name` = '$first_name',
    `last_name` = '$last_name',
    `first_time` = '$first_time',
    `password` = '$textfield' "; 
```

如果您确实使用了`VALUES()`附件，则它是*列名*，而不是属于里面的输入*变量*。

> 您可以在 UPDATE 子句中使用 VALUES(col_name) 函数来引用来自 INSERT ... UPDATE 语句的 INSERT 部分的列值

```
$pfw_strQuery = "INSERT INTO  `client` (`client_id`,`email`,`first_name`,`last_name`,`first_time`,`password`)
  VALUES ('$client_id','$email','$first_name','$last_name','$first_time','$textfield')
  ON DUPLICATE KEY UPDATE
    `email` = VALUES(`email`),
    `first_name` = VALUES(`first_name`),
    `last_name` = VALUES(`last_name`),
    `first_time` = VALUES(`first_time`),
    `password` = VALUES(`textfield`) "; 
```

请注意，我已用单引号替换了所有转义的双引号。虽然 MySQL 支持字符串文字的双引号，但单引号在其他 RDBMS 中更加标准和可移植。

我们假设所有这些变量都已经针对 SQL 注入进行了正确转义。最后，您可能知道，旧`mysql_*()`功能计划弃用。建议切换到支持预处理语句和参数化查询的更新 API，如 MySQLi 或 PDO，完全避免转义和引用问题。

# c++ - 为什么在 std::vector 中使用索引超出范围的运算符 [] 时没有异常？

> ID：12896773
> 
> 赞同：9
> 
> 时间：2012-10-15T13:36:25.723
> 
> 标签：c++, stl

为什么当我使用下面的代码时，我没有得到超出范围的异常？

```
std::vector<int> v;
v.resize(12);
int t;
try {
    t = v[12];
} catch(std::exception  e){
    std::cout<<"error:"<<e.what()<<"\n";
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-15T13:44:39.260

通过使用`operator[]`，您实际上是在告诉编译器“我知道我在做什么。相信我。” 如果您访问数组之外​​的某些元素，那是您的错。你违反了这种信任；你不知道你在做什么。

另一种方法是使用该`at()`方法。在这里，您要求编译器对您的访问进行完整性检查。如果他们超出范围，你会得到一个例外。

这种健全性检查可能很昂贵，特别是如果它是在一些深度嵌套的循环中完成的。*如果您知道*索引将始终在界限内，则没有理由进行这些健全性检查。拥有一个不进行这些健全性检查的界面真是太好了。

不执行检查的原因`operator[]`是因为这正是`[]`原始数组和指针的工作方式。C/C++ 中没有用于访问原始数组/指针的完整性检查。你有责任检查它是否需要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T13:37:38.567

`operator[]`不会抛出异常。使用该`at()`行为的功能。

# c# - 使用可能在命名空间中的多余名称预先添加类名

> ID：12896777
> 
> 赞同：2
> 
> 时间：2012-10-15T13:36:32.567
> 
> 标签：c#

我想看看这是否会以我没有预料到的方式再次咬我。现在我有 3 个类（示例类），它们位于同一个命名空间中。

```
 SqlServer.SqlServerConnectionSettings
 SqlServer.SqlServerCredentials
 SqlServer.SqlServerInstance 
```

后来我还计划让其他人像下面这样。

```
 SqlLite.SqlLiteConnectionSettings
 SqlLite.SqlLiteCredentials
 SqlLite.SqlLiteInstance 
```

我开始认为这会更容易

```
 SqlServer.ConnectionSettings
 SqlServer.Credentials
 SqlServer.ServerInstance 
```

只有在模棱两可的情况下才处理冲突，方法是附加上面的命名空间。

我唯一担心的是，我看到的大多数代码都像我的第一个示例一样预先设置。有没有人从他们的代码库中删除了前置文本并发现它提高或降低了可读性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:52:20.930

我一直在使用您建议的方法一段时间，并且更喜欢它而不是您所指的前置样式。我认为它使代码更易于阅读，并且在我们的项目中没有遇到任何冲突。我还认为让你的命名空间非常具有描述性而不是多余的很重要...... *DataAccess.Database.SqlServer.ConnectionSettings*。

# jquery - 用于表单验证的 jquery.validate.js 的 jQuery 替代品

> ID：12896778
> 
> 赞同：0
> 
> 时间：2012-10-15T13:36:32.917
> 
> 标签：jquery, forms

我目前正在使用 jQuery validate.js，我正在寻找更高级且视觉上更美观的东西

我正在寻找其他一些基于 jQuery 的表单验证器来检查和验证 1\. 数字 2\. IP 地址 3\. 日期、
4\. 时间、
5\. 文本字符等或任何东西

任何人都可以推荐一些易于使用的基于 jQuery 的表单验证，而且还具有丰富的界面和易于定制以及大量示例以在需要时参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T14:58:27.177

[欧芹](http://parsleyjs.org/)可能是一种尝试。上面的答案有点过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:44:04.773

检查出来....

[10 个有用的表单验证器](http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/)

[jquery 自动验证](http://phrogz.net/tmp/FormAutoValidate/formautovalidate_docs.html)

# git - composer.lock 应该致力于版本控制吗？

> ID：12896780
> 
> 赞同：582
> 
> 时间：2012-10-15T13:36:42.760
> 
> 标签：git, version-control, composer-php

我对`composer.lock`在带有存储库的应用程序中使用感到有些困惑。

我看到很多人说我们不应该`.gitignore` `composer.lock`从存储库。

如果我在我的开发环境中更新我的库，我将有一个新的`composer.lock`，但我将无法将它们更新到生产环境中，对吗？

它不会在这个文件上产生冲突吗？

* * *

## 回答 #1

> 赞同：742
> 
> 时间：2012-10-15T13:39:22.363

如果你更新你的库，你也想提交锁文件。它基本上表明您的项目已锁定到您正在使用的那些特定版本的库。

如果您提交了更改，并且有人提取了您的代码并更新了依赖项，则锁定文件应该未被修改。如果它被修改，这意味着你有一个新版本的东西。

将它放在存储库中可以确保每个开发人员都使用相同的版本。

* * *

## 回答 #2

> 赞同：221
> 
> 时间：2014-06-16T15:41:47.467

**对于应用程序/项目**：绝对是的。

[作曲家文档](https://getcomposer.org/doc/01-basic-usage.md#commit-your-composer-lock-file-to-version-control)对此进行了说明（强调）：

> 将应用程序的 composer.lock（连同 composer.json）提交到版本控制中。

就像@meza 说的那样：您应该提交锁定文件，以便您和您的合作者在同一组版本上工作，并防止您说“但它在我的电脑上工作”之类的说法。;-)

**对于图书馆**：可能不是。

作曲家文档说明了这个问题：

> 注意：对于库，不一定建议提交锁定文件 (...)

并[在这里](https://getcomposer.org/doc/02-libraries.md#lock-file)声明：

> 对于您的库，如果您愿意，您可以提交 composer.lock 文件。这可以帮助您的团队始终针对相同的依赖项版本进行测试。但是，这个锁文件不会对其他依赖它的项目产生任何影响。它只对主项目有影响。

对于图书馆，我同意@Josh Johnson 的回答。

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2014-02-05T21:59:28.573

在为几个项目做这两种方式之后，我的立场是`composer.lock`不应该作为项目的一部分提交。

`composer.lock`是不属于项目的构建元数据。依赖关系的状态应该通过您如何控制它们（手动或作为自动构建过程的一部分）来控制，而不是由最后一个开发人员任意更新它们并提交锁定文件。

如果您担心作曲家更新之间的依赖关系会发生变化，那么您对版本控制方案缺乏信心。版本（1.0、1.1、1.2 等）应该是不可变的，并且您应该避免在初始功能开发之外使用“dev-”和“X.*”通配符。

提交锁定文件是您的依赖管理系统的回归，因为依赖版本现在已经回到隐式定义。

此外，您的项目永远不必在每个环境中重新构建或重新获取其依赖项，尤其是 prod。您的可交付成果（tar、zip、phar、目录等）应该是不可变的，并且可以在不更改的情况下通过环境进行升级。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2015-10-02T21:32:58.207

1.  您不应该直接在生产上更新您的依赖项。
2.  您应该对*composer.lock*文件进行版本控制。
3.  您不应该对实际依赖项进行版本控制。

**1\. 你不应该直接在 Production 上更新你的依赖**，因为你不知道这会如何影响你代码的稳定性。新的依赖项可能会引入错误，它可能会改变代码的行为方式影响您自己的行为，它可能与其他依赖项不兼容等。您应该在开发环境中执行此操作，然后进行适当的 QA 和回归测试等.

**2\. 您应该对您的*composer.lock*文件**进行版本控制，因为它存储了有关您的依赖项以及您的依赖项的依赖项的信息，这将允许您复制代码的当前状态。这很重要，因为您的所有测试和开发都是针对特定代码完成的。不关心您拥有的代码的实际版本类似于将代码更改上传到您的应用程序而不进行测试。如果你正在升级你的依赖版本，这应该是一个自愿的行为，你应该采取必要的措施来确保一切仍然有效。失去一两个小时的正常运行时间来恢复到以前的版本可能会花费你很多钱。

您将看到不需要*composer.lock的一个论点是，您可以在**composer.json*文件中设置您需要的确切版本，这样，每次有人运行`composer install`时，它都会安装相同的版本代码。这不是真的，因为您的依赖项有它们自己的依赖项，并且它们的配置可能以允许更新子版本甚至整个版本的格式指定。

这意味着即使您在*composer.json*中指定 Laravel 4.1.31 ，其*composer.json*文件中的 Laravel 也可能有自己的依赖项，如 Symfony event-dispatcher: 2.*。使用这种配置，您最终可能会使用带有 Symfony event-dispatcher 2.4.1 的 Laravel 4.1.31，而您团队中的其他人可能会使用带有 event-dispatcher 2.6.5 的 Laravel 4.1.31，这完全取决于何时是您最后一次运行作曲家安装。

因此，将您的*composer.lock*文件放在版本系统中将存储此子依赖项的确切版本，因此，当您和您的队友进行 composer install 时（这是您将基于*composer.lock 安装依赖项的方式。 lock* ) 你们都会得到相同的版本。

如果要更新怎么办？然后在你的开发环境中运行：`composer update`，这将生成一个新的*composer.lock*文件（如果有新的东西），在你测试它之后，QA 测试和回归测试它等等。您可以将其推送给其他人以下载新的*composer.lock*，因为它可以安全升级。

**3\. 你不应该对你的实际依赖进行版本控制**，因为它没有意义。使用*composer.lock*您可以安装依赖项的确切版本，而无需提交它们。当您不应该更新它们时，为什么要添加到您的 repo 10000 个依赖文件。如果您需要更改其中的一项，则应将其分叉并在那里进行更改。如果您担心每次构建或发布时都必须获取实际的依赖项，composer 有不同的方法来缓解这个问题，缓存、zip 文件等。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-02-10T12:00:04.857

> 然后，您将其提交`composer.json`到您的项目，团队中的其他人都可以运行 composer install 来安装您的项目依赖项。
> 
> 锁定文件的重点是记录已安装的确切版本，以便重新安装它们。这意味着如果您的版本规范为 1.* 并且您的同事运行 composer update 安装 1.2.4，然后提交 composer.lock 文件，当您安装 composer 时，您也将获得 1.2.4，甚至如果 1.3.0 已经发布。这可确保从事该项目的每个人都具有相同的确切版本。
> 
> 这意味着，如果自上次完成 composer 安装以来已经提交了任何内容，那么在**没有锁定文件的情况下，您将获得新的第三方代码被拉下**。
> 
> 同样，如果您担心代码破坏，这将是一个问题。这也是将 Composer 视为以 composer.lock 文件为中心很重要的原因之一。

资料来源：[作曲家：这都是关于锁定文件的](https://blog.engineyard.com/2014/composer-its-all-about-the-lock-file)。

* * *

> 将应用程序的 composer.lock（连同 composer.json）提交到版本控制中。这很重要，因为 install 命令检查是否存在锁定文件，如果存在，它会下载那里指定的版本（不管 composer.json 说什么）。这意味着任何设置项目的人都将下载完全相同版本的依赖项。您的 CI 服务器、生产机器、团队中的其他开发人员，所有事物和每个人都运行在相同的依赖项上，这减少了仅影响部分部署的错误的可能性。即使您独自开发，在六个月后重新安装项目时，您可以确信安装的依赖项仍然有效，即使您的依赖项从那时起发布了许多新版本。

资料来源：[作曲家 - 基本用法](https://getcomposer.org/doc/01-basic-usage.md#composer-lock-the-lock-file)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-26T12:43:00.830

如果您担心代码被破坏，您应该将其提交`composer.lock`到您的版本控制系统，以确保您的所有项目合作者都使用相同版本的代码。如果没有锁定文件，您每次都会获得新的第三方代码。

例外情况是当您使用元应用程序时，应在安装时更新依赖项的库（如[Zend Framework 2 Skeleton App](https://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)）。因此，目标是每次您想要开始开发时都获取最新的依赖项。

^(资料来源：[作曲家：一切都与锁定文件有关](https://blog.engineyard.com/2014/composer-its-all-about-the-lock-file))

另请参阅：[作曲家更新和作曲家安装有什么区别？](https://stackoverflow.com/q/33052195/55075)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-08T11:49:14.613

是的，很明显。

这是因为本地安装的 composer 会优先选择 composer.lock 文件而不是 composer.json。

如果锁定文件在 vcs 中不可用，composer 将指向 composer.json 文件以安装最新的依赖项或版本。

文件 composer.lock 更深入地维护依赖关系，即它指向我们在软件中包含的包版本的实际提交，因此这是更精细地处理依赖关系的最重要文件之一。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-29T20:47:41.507

对此没有确切的答案。

一般来说，composer 不应该做构建系统应该做的事情，也不应该将 composer.lock 放在 VCS 中。Composer 可能会奇怪地把它倒过来。最终用户而不是生产者不应该使用锁定文件。通常，您的构建系统会保留快照、可重用目录等，而不是每次都保留一个空目录。人们从 composer 签出一个 lib 可能希望该 lib 使用锁，以便对 lib 加载的依赖项进行测试。

另一方面，这显着增加了版本管理的负担，您几乎可以肯定需要每个库的多个版本，因为依赖项将被严格锁定。如果每个库的版本可能略有不同，那么您需要一些多库版本支持，并且您还可以快速查看所需的依赖项的大小，因此建议将其保留在叶子上。

考虑到这一点，我真的不认为锁定文件对库或您自己的工作目录有用。它只对我有用的是在我的构建/测试平台中，它保留任何外部获取的资产，仅在请求时更新它们，为测试、构建和部署提供可重复的构建。虽然它可以保存在 VCS 中，但它并不总是与源树一起保存，构建树要么位于 VCS 结构中的其他位置，要么由其他系统管理。如果它存储在 VCS 中，是否将其保存在与源代码树相同的存储库中是有争议的，因为否则每次拉取都会带来大量构建资产。除了生产/敏感凭证和膨胀之外，我非常喜欢将所有东西都放在一个安排良好的仓库中。

SVN 可以比 git 做得更好，因为它不会强迫您获取整个 repo（尽管我怀疑 git 实际上也不是严格需要它，但对它的支持是有限的，并且不常用）。简单的构建存储库通常只是您将构建树合并/导出到的覆盖分支。有些人将外部资源合并到他们的源代码树中，或者进一步分离外部、构建和源代码树。它通常有两个目的，构建缓存和可重复构建，但有时至少在某种程度上将其分开也允许新/空白构建和多个构建。

有很多策略可以解决这个问题，除非你在源代码树中保留外部源代码，否则它们都不能很好地持久化源代码列表。

他们还有文件中的哈希值之类的东西，当两个人更新包时如何合并？仅此一项就应该让您认为这可能被误解了。

人们为锁定文件提出的论点是他们对问题采取了非常具体和限制性的观点。想要可重复的构建和一致的构建？在 VCS 中包含供应商文件夹。然后，您还可以加快获取资产的速度，并且在构建过程中不必依赖可能损坏的外部资源。除非绝对必要，否则我创建的构建和部署管道都不需要外部访问。如果您确实必须更新外部资源，则只需更新一次。composer 试图实现的目标对于分布式系统来说是有意义的，除非前面提到它没有任何意义，因为它最终会导致库更新的库依赖地狱，因为库更新会发生常见的冲突，并且更新的速度与更新包最慢的速度一样慢。

另外我更新得很厉害。每次我开发时，我都会更新和测试一切。有一个非常非常小的窗口可以让重要的版本漂移潜入。实际上，当支持语义版本控制时，这往往是作曲家的，你不应该有那么多的兼容性问题或破坏。

在 composer.json 你放置你需要的包和它们的版本。您可以在那里锁定版本。然而，这些包也具有不会被 composer.json 锁定的动态版本的依赖项（尽管我不明白为什么如果你确实希望它们被版本锁定，你也不能自己把它们放在那里）所以其他人运行 composer install没有锁会得到不同的东西。你可能不太在乎，或者你可能在乎，这取决于。你应该关心吗？可能至少有一点点，足以确保您在任何情况下都意识到它和潜在的影响，但如果您总是有时间先 DRY 运行并修复任何更新的内容，这也可能不是问题。

麻烦作曲家试图避免有时只是不存在，而拥有作曲家锁定文件的麻烦很重要。他们绝对没有权利告诉用户他们应该或不应该做什么关于构建与源资产（是否加入 VCS 中的单独），因为这不关他们的事，他们不是你或我的老板。“作曲家说”不是权威，他们不是你的上级官员，也没有在这个问题上给任何人任何优势。只有您知道您的真实情况以及最适合您的情况。但是，他们可能会为不了解事情如何运作的用户建议默认的行动方案，在这种情况下你可能想要遵循这一点，但我个人认为不会 真正替代了解事物的运作方式并能够正确地满足您的要求。最终，他们对这个问题的回答是一个最好的猜测。制作 composer 的人不知道你应该把 composer.lock 放在哪里，他们也不应该。他们唯一的责任是告诉你它是什么以及它做了什么。除此之外，您需要决定什么是最适合您的。

将锁定文件保留在可用性方面是有问题的，因为作曲家对于它是否使用锁定或 JSON 非常保密，而且将两者一起使用并不总是很好。如果你运行 install 它只使用它会出现的锁文件，所以如果你添加一些东西到 composer.json 那么它不会被安装，因为它不在你的锁中。操作的真正作用以及它们对 json/lock 文件所做的操作根本不直观，有时似乎甚至没有意义（帮助说 install 需要一个包名称，但在尝试使用它时说不）。

要更新锁或基本上应用 json 中的更改，您必须使用 update 并且您可能不想更新所有内容。锁优先选择应该安装的内容。如果有一个锁定文件，它就是使用的。您可以在一定程度上限制更新，但系统仍然一团糟。

更新需要很长时间，需要大量 RAM。我还怀疑，如果您选择了一个有一段时间没有被触及的项目，它会从它拥有的版本中查看，随着时间的推移会有更多的版本，而且它可能不会有效地做到这一点，这只会扼杀它。

当涉及到你不能期望是复合的秘密复合命令时，它们非常非常狡猾。默认情况下，composer remove 命令似乎映射到 composer update 和 composer remove 。

您真正需要问的问题不是您是否应该将锁保留在源代码树中，或者是否应该以某种方式将其保留在某个地方，而是您应该问它实际上做了什么，然后您可以自己决定当你需要坚持它和在哪里。

我要指出的是，当您拥有强大的外部依赖持久性策略时，拥有锁定的能力会非常方便，因为它会跟踪您对跟踪（来源）和更新有用的信息，但如果您不这样做那么它既不在这里也不在那里。当它被迫作为强制选项让它污染源树时，它就没有用了。在遗留代码库中很常见，人们对 composer.json 进行了大量更改，这些更改尚未真正应用，并且在人们尝试使用 composer 时被破坏。没有 composer.lock，没有异步问题。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-07-16T14:16:01.150

对于 Heroku 上的任何人来说，答案是明确的“是的，应该提交”：

> 如果在其部分`composer.json`中指定了任何类型的依赖项，则通过运行生成的对应项也必须提交到存储库，否则推送将被拒绝。`require``composer.lock``composer update`

来源：[Heroku PHP 支持：激活](https://devcenter.heroku.com/articles/php-support#activation)。

# oracle11g - 使用 Oracle Advanced Queue 的 Windows 服务出列

> ID：12896781
> 
> 赞同：0
> 
> 时间：2012-10-15T13:36:45.650
> 
> 标签：oracle11g

我认为这可能是一个远景，但无论如何我都会尝试一下。

我们已经确定了我们在使用 Oracle 高级队列时遇到的问题，但是似乎还没有找到使用 Oracle 的解决方案，所以我想我会在这里发布它。

这是问题：

• 我们编写了一个多线程Windows 服务，该服务通过一个名为IVRSD1 的Oracle 数据库实例使用一个特定的数据库连接到一个名为schema_X 的Oracle 模式。• 测试服务时，测试人员使用 TOAD 通过名为 IVRSD2 的不同 Oracle 实例连接到相同的模式 (schema_x)。• 测试人员更新表格。• 此 UPDATE 触发对存储过程的调用，该存储过程将相应更新的记录复制到队列中。• 我们的windows 服务（使用IVRSD1 实例）应该看到队列条目并将其出列并处理它。• 由于测试仪连接到 IVRSD2 实例，而服务连接到 IVRSD1 实例，所以它没有。• 如果测试人员规定了 IVRSD1 实例（并依次连接到 IVRSD1 实例），

这似乎是 Oracle 的一个问题，我们有一个 Oracle 支持的开放票，但仍然找不到解决方案。

提前感谢您的帮助

道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:25:46.770

Oracle Advanced Queues Do Not Work With RAC

Oracle Bug 3830972

Bug 3830972 - DBMS_AQ.LISTEN ON RAC CLUSTER DOES NOT SEE NEW ENQUEUE MESSAGES Fixed in 10.2 ...

## PROBLEM:

Using 2 node RAC configuration. When using dbms_aq.listen() any enqueue made to a queue after the listen has started is not noticed. Enqueue happens on cluster node 1. Both cluster nodes are listening to the queue where enqueue happened. If the listen is started after the message have been queued, they are noticed almost instantly.

## DIAGNOSTIC ANALYSIS:

I believe dbms_aq.listen is not supported in RAC if the enqueue and listen happen on different nodes because a listen call will not be posted by enqueue happening on another node.

## WORKAROUND:

If the listen is started after the messages have been queued, they are noticed almost instanly. ... Rediscovery Information: To be seeing this bug the following must be true : 1\. Running under a RAC environment 2\. DBMS_AQ.LISTEN() on one node doesn't detect new messages enqueued on other nodes.

Workaround: None, other than to have a "heartbeat" dummy message posted on each node every now and then. This obviously requires application support and is therefore unlikely to be of use. Another alternative is to always ensure that messages are enqueued at the node that performs the listen call.

# forms - twitter bootstrap 块级表单

> ID：12896782
> 
> 赞同：4
> 
> 时间：2012-10-15T13:36:50.507
> 
> 标签：forms, twitter-bootstrap

我正在尝试获取全宽登录表单。基本上，用户名、密码和按钮的输入字段都应该具有相同的长度。现在我可以很容易地使用 spans 得到这个，问题是当我在用户名和密码前添加一个图标时，输入字段超出 spans（如果我将 input-block-level 应用于输入）并且按钮 spans只是外部跨度变短（如果我尝试 btn-block）。如何让所有元素仅拉伸到包含的跨度宽度？

这是我的小提琴。

[http://jsfiddle.net/sujesharukil/EP83X/21/](http://jsfiddle.net/sujesharukil/EP83X/21/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T03:50:07.047

您可以使用 display: table 和 display: table-cell 来获取输入以正确填充跨度中的剩余空间或使用流体宽度。这是第一种方法的小提琴：

[http://jsfiddle.net/EP83X/22/](http://jsfiddle.net/EP83X/22/)

或者在基于固定图标宽度 (28px) 和跨度宽度 ((300-28) / 300 * 100) 的输入上使用 width: 90.666%。

# javascript - 正则表达式替换 HTML 文档中的空格

> ID：12896787
> 
> 赞同：1
> 
> 时间：2012-10-15T13:37:09.083
> 
> 标签：javascript, asp.net, html, regex

我看到很多类似的问题，但仍然没有找到答案。
应该如何看待需要替换 HTML 中的所有空格（包括换行符）但忽略标签的正则表达式？

目前我使用`Regex.Replace(content, @"\s+", "");`但删除页面上存在的 JavaScript 中的空格，而不是页面不起作用。

谢谢你。

**编辑**：在回答一些问题后，这里有更多细节：我正在做的是 HTTP 模块，它“缩小”我们网站上的 HTML 输出。我们有一个网站，其中包含来自许多不同来源的非常动态的内容。最终目标是减小页面大小并减少网络流量。这是一个高负载的网站，所以完成它对我们很重要。

实际上我们正在使用 MbCompression 库进行 JS 和 CSS 缩小，但它不支持缩小 HTML 输出（至少我没有找到）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:38:46.233

真的没有办法编写一个（合理的）正则表达式来做到这一点。如果您想支持 javascript 和 css，尤其如此。你需要一个真正的解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:47:28.500

你的目标是什么？浏览器在渲染页面时会忽略很多空白，所以我猜你想清理你的源代码。如果是这样，请检查您使用的程序是否提供了一些解决方案。例如，Dreamweaver 有一个重新格式化源代码的工具。

[Tidy](http://www.w3.org/People/Raggett/tidy/)可能是一种选择，但它看起来不仅仅是一个简单的代码格式化工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:48:22.737

如果你能找到一个不错的 HTML 解析器，我会通过 DOM 操作来实现。如果你不能，那么像

```
Regex.Replace(content, "(?i)(<script(?:[^>\"']|\"[^\"]*\"]|'[^']*')*>)\s+</script\\s*>|<style(?:[^>\"']|\"[^\"]*\"]|'[^']*')*>)\s+</style\\s*>|<textarea(?:[^>\"']|\"[^\"]*\"]|'[^']*')*>)\s+</textarea\\s*>|</?[a-z](?:[^>\"']|\"[^\"]*\"]|'[^']*')*>|\\S+)|\\s+", "$1"); 
```

应该这样做。它不会删除标签内或嵌入的 JS、CSS 或文本区域内的空格，但会删除文本节点中的换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:40:15.147

```
Regex.Replace(document.body.innerHTML, @"\s+", ""); 
```

改用`document.body.innerHTML`可能会起作用。我不确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T13:41:22.690

当然，您至少应该用空格替换它，而不仅仅是完全删除空格。对于应该没问题的 HTML，但是如果您正在谈论在 javascript 中使用多个空格不折叠的字符串，那么您需要考虑另一种方法，因为无论您是在脚本中还是在字符串中，正则表达式都不会轻易解决.

话虽如此，我不确定这样做的充分理由。如果您担心文件的大小，那么只需告诉您的服务器使用压缩，我怀疑现在每个浏览器都支持得足够好，并且页面基本上将由服务器压缩并在客户端解压缩。它为服务器做更多的工作，所以这取决于你是否更关心带宽或 CPU。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T16:40:54.793

```
Regex.Replace(html, "\s*(<[^>]+>)\s*", "$1", RegexOptions.SingleLine); 
```

存在与标签、未封闭标签等相关的风险。我希望您对您所说的“来自不同来源的动态内容”有一定的控制权。我也希望你已经尝试了其他所有方法，这是最后的手段。

# javascript - Node.js 作为长轮询客户端

> ID：12896792
> 
> 赞同：1
> 
> 时间：2012-10-15T13:37:24.163
> 
> 标签：javascript, node.js

我想创建一个 node.js 服务器，它实际上是另一个服务器的中继。node.js 服务器必须能够长轮询其他服务器并解析返回的 xml 响应。

关于这种类型的实施有什么建议吗？我可以使用什么库来长轮询该服务器？

只是为了解释更多细节，会有客户端通过 socket.io 连接到节点服务器。一旦节点服务器接收并解析来自其他服务器的 xml 响应，它将为客户端发出和事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:41:19.300

我相信您正在破坏 node.js 提供的目的/功能，node.js 将帮助您进行长轮询，并且理想情况下不需要轮询其他服务器。在这种情况下，提供 xml 的其他服务器也应该允许长轮询。

为什么不在 node.js 本身上实现 xml 响应生成的逻辑，以便至少减少从不同服务器获取的时间

# asp.net - 在 SQL Server 中按日期排序

> ID：12896800
> 
> 赞同：-1
> 
> 时间：2012-10-15T13:37:41.027
> 
> 标签：asp.net, sql-server, tsql

我想按日期按升序对表格进行排序。该表还包含空值。

我想在 Gridview 中显示数据。我想首先显示包含日期字段的所有行，然后将日期显示为空白字段。

我使用了以下查询：

```
select * from TempTable order by convert(datetime, Date,101) asc 
```

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:39:22.550

然后你应该检查`null`值：

```
Select * FROM TempTable 
ORDER BY CASE WHEN datetime IS NULL THEN 1 ELSE 0 END ASC 
,  Date ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:40:46.817

```
select * from TempTable 
order by case when [Date] is null then 1 else 0 end, [Date] 
```

# objective-c - 无法理解目标 c 中的 setter 和 getter

> ID：12896803
> 
> 赞同：0
> 
> 时间：2012-10-15T13:37:46.380
> 
> 标签：objective-c, setter, getter

我正在通过一些在线教程学习目标 c，我有一个问题。在这个视频中：[http](http://www.youtube.com/watch?v=Nb9-1rRjO_8&feature=player_detailpage#t=367s) ://www.youtube.com/watch?v=Nb9-1rRjO_8&feature=player_detailpage#t=367s你可以看到我在这里写的代码：

```
@synthesize width, height; //setters and getters

-(void) setWH:(int) w:(int) h{
    width = w;
    height = h
} 
```

如果他已经使用@synthesize 获得了宽度和高度的设置器和获取器，我不明白他为什么要编写 setHW 方法。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:43:29.383

他正在合成宽度和高度，但是您所询问的方法`setWH`看起来是一种名称不好的便捷方法，可以将宽度和高度设置在一个位置。

实际上，它看起来很糟糕，除了不使用`self.width`和`self.height`他应该做的那样，拥有一个`set`不是属性的东西看起来很奇怪。

在哪里`init`？

找一个更好的老师。

如果你喜欢看视频 - 启动 iTunes，去 iTunesU 查找 C193P，这是斯坦福 iPhone 编程课程的视频集。你会在那里学到更多正确的东西。

**编辑添加**

iTunes 上本课程的链接是[https://itunes.apple.com/gb/itunes-u/ipad-iphone-application-development/id473757255](https://itunes.apple.com/gb/itunes-u/ipad-iphone-application-development/id473757255)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:44:43.253

我看过链接的视频，我认为它不是学习 Objective-C 的一个很好的资源。

您推测的“setWH”方法是不必要的，并且声明非常混乱。

```
-(void) setWH:(int) w:(int) h 
```

是`w`和`h`参数变量还是`w:`方法名的一部分。如果`w:`是方法名称的一部分，那么为什么要调用参数变量`h`。如果`w`是参数变量，那么方法名称实际上是`setWH::`.

事实上`w`和`h` ***都是***参数变量，这意味着您可以按如下方式调用此方法：

```
[obj setWH:10 :10]; 
```

这不是惯用的 Objective-C。

# c# - 读取具有多个命名空间的 XML 文件

> ID：12896804
> 
> 赞同：3
> 
> 时间：2012-10-15T13:37:48.490
> 
> 标签：c#, xml

我有一个带有多个名称空间的 XML 文件。但我无法从任何节点获取值/文本。

```
<?xml version="1.0" encoding="UTF-8"?>
<!--XML file created by Microsoft Dynamics C5-->
<Invoice xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
         xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
         xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2"
         xmlns:ccts="urn:un:unece:uncefact:documentation:2"
         xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"
         xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2">
  <cbc:UBLVersionID schemeAgencyID="320" schemeAgencyName="urn:oioubl:id:profileid-1.1">2.0</cbc:UBLVersionID>
  <cbc:CustomizationID>OIOUBL-2.02</cbc:CustomizationID>
  <cbc:ProfileID schemeID="urn:oioubl:id:profileid-1.2" schemeAgencyID="320">Procurement-BilSim-1.0</cbc:ProfileID>
  <cbc:ID>88481</cbc:ID>
  <cbc:IssueDate>2012-05-21</cbc:IssueDate>
  <cbc:InvoiceTypeCode listID="urn:oioubl:codelist:invoicetypecode-1.1" listAgencyID="320">380</cbc:InvoiceTypeCode>
  <cbc:DocumentCurrencyCode>DKK</cbc:DocumentCurrencyCode>
  <cbc:AccountingCost></cbc:AccountingCost>
  <cac:OrderReference>
    <cbc:ID>ZZ</cbc:ID>
    <cbc:SalesOrderID>36433</cbc:SalesOrderID>
    <cbc:IssueDate>2012-05-21</cbc:IssueDate>
  </cac:OrderReference>
</Invoice> 
```

我正在尝试读取一些节点，但我不能。这是一个例子。

```
XmlDocument doc = new XmlDocument();
doc.Load(@"C:\temp\88481.xml");

XmlNamespaceManager manager = new XmlNamespaceManager(doc.NameTable);
manager.AddNamespace("cbc", "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2");
manager.AddNamespace("cac", "urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2");
manager.AddNamespace("qdt", "urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2");
manager.AddNamespace("xsd", "http://www.w3.org/2001/XMLSchema");
manager.AddNamespace("udt", "urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2");
manager.AddNamespace("ccts", "urn:un:unece:uncefact:documentation:2");
manager.AddNamespace("ext", "urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2");
manager.AddNamespace("", "urn:oasis:names:specification:ubl:schema:xsd:Invoice-2");
XmlNodeList list = doc.SelectNodes("//Invoice/cbc:ID", manager); 
```

但是节点列表没有元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:50:37.903

鉴于评论，我将假设您可以改用 LINQ to XML：

```
XDocument doc = XDocument.Load("...");
XNamespace cbcNs = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2";
XNamespace cacNs = "urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2";
// etc
XNamespace topNs = "urn:oasis:names:specification:ubl:schema:xsd:Invoice-2";

var ids = doc.Elements(topNs + "Invoice")
             .Elements(cbc + "ID"); 
```

或者因为顶部只是根元素，最后的语句可以是：

```
var ids = doc.Root.Elements(cbc + "ID"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-26T10:04:09.720

你第一次真的很亲近。

就像 Jon Skeet 提到的，“Invoice”是根元素，所以你不需要声明一个新的命名空间。

```
XmlDocument doc = new XmlDocument();
doc.Load(@"C:\temp\88481.xml");

XmlNamespaceManager manager = new XmlNamespaceManager(doc.NameTable);
manager.AddNamespace("cbc", "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2");
manager.AddNamespace("cac", "urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2");
manager.AddNamespace("qdt", "urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2");
manager.AddNamespace("xsd", "http://www.w3.org/2001/XMLSchema");
manager.AddNamespace("udt", "urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2");
manager.AddNamespace("ccts", "urn:un:unece:uncefact:documentation:2");
manager.AddNamespace("ext", "urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2");
//manager.AddNamespace("", "urn:oasis:names:specification:ubl:schema:xsd:Invoice-2");

XmlNodeList list = doc.SelectNodes("//cbc:ID", manager); 
```

# android - Android中的透明布局

> ID：12896820
> 
> 赞同：0
> 
> 时间：2012-10-15T13:38:18.637
> 
> 标签：android, android-layout, android-imageview

我的RelativeLayout里面有类似的东西：

```
<ImageView android:id="@+id/picture"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:scaleType="centerCrop"
           android:src="@drawable/pic"/>

    <LinearLayout android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:background="@color/black"
                  android:orientation="vertical">

        <ImageView android:layout_width="fill_parent"
                   android:layout_height="fill_parent"
                   android:layout_margin="50dp"
                   android:background="@color/transparent"
                   android:id="@+id/ivSelection"/>
</LinearLayout> 
```

我希望 LinearLayout 是黑色的，而 ivSelection 是透明的；并通过 ivSelection 我想看到 ivPicture 的图像。ivSelection 的边距是可变的，当然，这个“窗口”也必须是可变的（可调整大小的）。类似的东西：http: [//img818.imageshack.us/img818/8382/selm.jpg](http://img818.imageshack.us/img818/8382/selm.jpg)

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:19:41.597

可能的解决方案：再创建一个 ImageView 并将可调整大小的 ivSelection 的颜色设置为透明：

```
<ImageView android:id="@+id/picture"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:scaleType="centerCrop"
           android:src="@drawable/pic"/>

<ImageView android:id="@+id/drawSelection"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" />

<LinearLayout android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:background="@color/transparent"
              android:orientation="vertical">

        <ImageView android:layout_width="fill_parent"
                   android:layout_height="fill_parent"
                   android:layout_margin="50dp"
                   android:background="@color/transparent"
                   android:id="@+id/ivSelection"/>
</LinearLayout> 
```

更改 ivSelection 的边距时，我们需要执行以下操作：

```
Bitmap bmp = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(bmp);
Paint p = new Paint();
p.setColor(R.color.black);
c.drawRect(0, 0, w, h, p);

Xfermode mode = new PorterDuffXfermode(PorterDuff.Mode.CLEAR);
p.setXfermode(mode);
p.setColor(0xFFFFFFFF);
c.drawRect(sel.leftMargin,
           sel.topMargin,
           w - sel.rightMargin,
           h - sel.bottomMargin, p);

drawSelection.setImageBitmap(bmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:42:52.463

尝试这个，

```
 <ImageView android:layout_width="fill_parent"
                   android:layout_height="fill_parent"
                   android:background="@color/black" 
                   android:src="@drawable/pic"
                   android:padding="10dp"
                   android:id="@+id/ivSelection"/> 
```

# android - 如何在Android的后台每秒调用一段代码

> ID：12896821
> 
> 赞同：1
> 
> 时间：2012-10-15T13:38:26.440
> 
> 标签：android, android-intent

我想每秒调用以下代码部分？我尝试了以下方法-但不知道如何每秒调用一次？

我怎样才能继续调用 **new checkNWConnectivity().execute("Test");** 每秒从哪里调用我的android程序？？？

```
private class checkNWConnectivity extends AsyncTask<String, Integer, String> {
    @Override
    protected String doInBackground(String... params) {

                ConnectivityManager manager = (ConnectivityManager)getSystemService(MainActivity.CONNECTIVITY_SERVICE);

                //  3G confirm
                Boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();

                // wifi confirm 
                Boolean isWifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting();

                if(is3g){
                    tvNWConnectivity.setText("   Connected to 3G");
                }else if(isWifi){
                    tvNWConnectivity.setText("   Connected to wifi");
                }else{
                    String text = "   No Network Connectivity."+"\n" + "   Uploading will be resumed from streamlet "+countStreamletUploaded.toString();
                    tvNWConnectivity.setText(text);
                 }    

        return null;
    }

} 
```

**所以我的问题是**如何每秒调用它？ **实际上我想继续运行 doInBackground(String... params) { ... } 中的代码部分**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:57:42.953

您想使用 ScheduledExecutorService

```
ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
exec.scheduleAtFixedRate(command, initialDelay, period, unit); 
```

创建活动的执行程序 OnCreate，启动执行 onResume 并停止执行 onPause。

然后您可以调用`runOnUiThread(action);`将操作发布回 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:55:57.480

您可以使用[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)、[Timer](http://developer.android.com/reference/java/util/Timer.html)和[Handler](http://developer.android.com/reference/android/os/Handler.html)来执行此操作：

```
 public void toCallAsynchronous() {

   TimerTask doAsynchronousTask;
   final Handler handler = new Handler();
   Timer timer = new Timer();

   doAsynchronousTask = new TimerTask() {
            @Override
            public void run() {
                // TODO Auto-generated method stub
                handler.post(new Runnable() {
                    public void run() {
                        try {
                          checkNWConnectivity performBackgroundTask = new checkNWConnectivity();
                          performBackgroundTask.execute();

                           } catch (Exception e) {
                              // TODO Auto-generated catch block
                           }

                     }
                });
                timer.schedule(doAsynchronousTask, 0,30000); //put the time you want

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:55:38.527

1.  从您的代码来看，您似乎正在尝试显示网络状态。轮询信息不是一个好主意。最好使用 BroadcastReceiver 来监听网络状态的变化。检查这些问题：[Android - Network State broadcast receiver does not receive intent](https://stackoverflow.com/q/6615245/1321873) , [Broadcast Intent when network state has changed](https://stackoverflow.com/q/2676044/1321873)
2.  如果您必须执行定期操作，您可以使用[`Timer`](http://developer.android.com/reference/java/util/Timer.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:52:14.810

起初你不能使用来自非 UI 线程的视图，所以你不能`TextView.setText`从`AsyncTask.doInBackground`方法调用。您可以简单地使用[Handler](http://developer.android.com/reference/android/os/Handler.html)并使用每秒提交一条消息`Handler.sendMessageDelayed`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T13:54:50.277

我这样做的方法是将线程放入服务中

该服务会从一个非常大的数字开始倒计时，所以它永远不会归零，但这只是我的应用程序的一个用例，你可能需要一些永远存在的东西

然后是操纵UI线程的困境。我在服务中的循环将编辑 SharedPreferences 中的一个变量，并且我的 Activity 有一个循环检查 SharedPreferences 并在 SharedPreferences 返回某个值时更新 UI 对象，问题已解决。

您也许可以对广播接收器做类似的事情

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T13:55:37.577

使用处理程序。

```
 private class MyHandler extends Handler{
        @Override
        public void handleMessage(Message message){

            YourAsyncTask task = new YourAsyncTask(...);
            task.execute();
                    this.sendMessageDelayed(new Message(), 1000);}
} 
```

然后，当您想开始时，请执行此操作

```
MyHandler handler = new MyHandler();
handler.sendMessageDelayed(new Message(), 1000); 
```

# c++ - 用于序列化/反序列化目的的标准 C++ 代码

> ID：12896824
> 
> 赞同：11
> 
> 时间：2012-10-15T13:38:33.260
> 
> 标签：c++, serialization, buffer, allocator

我使用硬件 API 已经有很长时间了，而且我一直在使用的几乎所有 API 都有一个 C 接口。所以，很多时候我都在使用裸`new`s、不安全的缓冲和许多用 C++ 代码包装的 C 函数。最后，C 纯代码和 C++ 纯代码之间的边界在我的脑海中被搞乱了（我不知道澄清这个边界是否有用）。

现在，由于一些新的编码风格要求，我需要将所有怀疑不安全的代码重构为用 C++ 编写的更安全的代码（假设 C++ 代码会更安全），最终目标是使用C++ 带来的工具。

因此，为了摆脱我所有的困惑，我正在寻求有关 C/C++ 几个主题的帮助。

### `memcpy`对比`std::copy`

AFAIK`memcpy`是 C 库中的一个函数，所以它不是 C++ 语言；另一方面`std::copy`是 STL 中的一个函数，所以它是纯 C++。

*   但是，这是真的吗？毕竟，如果数据可以轻松复制，`std::copy`则将调用`std::memcpy`（到`cstring`标题中）。
*   `memcpy`将所有调用重构为`std::copy`调用会使代码更“纯 C++”？

`memcpy`毕竟，为了处理新的代码风格要求，我决定继续重构，关于`memcpy`and有一些问题`std::copy`：

`memcpy`是类型不安全的，因为它与原始 void 指针一起工作，可以管理任何类型的指针，无论其类型如何，但同时非常灵活，`std::copy`缺乏确保类型安全的这种灵活性。乍一看，`memcpy`是使用序列化和反序列化例程的最佳选择（这确实是我的真实使用案例），例如，通过自定义串行端口库发送一些值：

```
void send(const std::string &value)
{
    const std::string::size_type Size(value.size());
    const std::string::size_type TotalSize(sizeof(Size) + value.size());
    unsigned char *Buffer = new unsigned char[TotalSize];
    unsigned char *Current = Buffer;

    memcpy(Current, &Size, sizeof(Size));
    Current += sizeof(Size);

    memcpy(Current, value.c_str(), Size);

    sendBuffer(Buffer, TotalSize);

    delete []Buffer;
} 
```

上面的代码运行良好，但看起来很糟糕；我们正在摆脱`std::string`通过该方法访问它的内部内存的封装`std::string::c_str()`，我们需要处理动态内存的分配和释放，使用指针并将所有值视为无符号字符（参见下一部分），问题是：有更好的方法吗？

我试图解决上述问题的第一次尝试`std::copy`并不完全让我满意：

```
void send(const std::string &value)
{
    const std::string::size_type Size(value.size());
    const std::string::size_type TotalSize(sizeof(Size) + value.size());

    std::vector<unsigned char> Buffer(TotalSize, 0);

    std::copy(&Size, &Size + 1, Buffer.begin());
    std::copy(value.begin(), value.end(), Buffer.begin() + sizeof(Size));

    sendBuffer(Buffer.data(), TotalSize);
} 
```

使用上述方法，内存管理不再是问题，它`std::vector`负责在范围末尾分配、存储和最终释放数据，但是`std::copy`与指针算术和迭代器算术混合的调用非常烦人，而且在最后，我毕竟忽略了调用中的`std::vector`封装。`sendBuffer`

在之前的尝试之后，我用`std::stringstream`s 编写了一些代码，但结果更糟，现在，我想知道是否：

*   有一种方法可以安全地序列化对象和值，而不会破坏封装，不会过度或混淆指针/迭代器算术，也没有动态内存管理，或者这只是一个不可能的目标？（是的，我听说过`boost::serialization`，但现在我不允许集成它）。

和：

*   `std::copy`序列化/反序列化的最佳用途是什么？（如果有的话）。
*   复制容器或数组的`std::copy`理由是有限的，并且将其用于原始内存是一个糟糕的选择？

### `alloc`/`free`对`new`/`delete`对`std::allocator`

另一个大话题是内存分配。AFAIK尽管`malloc`/`free`函数来自 C，但它们并没有被禁止进入 C++ 范围。`new`/`delete`运算符来自 C++ 范围，它们不是 ANSI C。

*   我是正确的？
*   `new`/`delete`可以在ANSI C中使用吗？

假设我需要将所有 C 风格的代码重构为 C++ 代码，我将摆脱一些遗留代码周围的所有`alloc`/`free`传播，我发现保留动态内存非常令人困惑，void 类型不携带任何有关大小的信息，因此不可能使用 void 作为类型来保留数据缓冲区：

```
void *Buffer = new void[100]; // <-- How many bytes is each 'void'? 
```

由于缺少纯原始二进制数据指针，创建指向`unsigned char`. `char`为了等于元素的数量和大小。并且`unsigned`为了避免在数据复制过程中出现意外的有符号-无符号转换。也许这是一种常见的做法，但它是一团糟......`unsigned char`不是`int`也不`float`是，`my_awesome_serialization_struct`如果我被迫选择某种指向二进制数据的虚拟指针，我会更喜欢`void *`而不是`unsigned char *`.

因此，当我需要一个用于序列化/反序列化目的的动态缓冲区时，我无法避免这些`unsigned char *`东西以重构为类型安全缓冲区管理；`alloc`但是当我将所有/`free`对重构为`new`/`delete`对时，我读到了关于`std::allocator`.

允许以类型安全的`std::allocator`方式保留内存块，乍一看我敢打赌它会很有用，但我认为使用`std::allocator<int>::allocate`or`new int`或左右分配并没有太大区别，对于`std::allocator<int>::deallocate`and 也是如此`delete int`。

现在，我对动态内存管理失去了兴趣，这就是我要问的原因：

*   有一个很好的 C++ 实践涉及用于序列化/反序列化目的的动态内存管理，它授予类型安全管理？
*   是否可以避免使用`const char *`用于序列化/反序列化的内存缓冲区？
*   序列化/反序列化范围的基本原理`std::allocator`和用途是什么？（如果有的话）。

感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:19:42.307

我的经验是，C++ 中的类型安全不仅意味着编译器会抱怨类型不匹配。这意味着您通常不必关心数据的内存布局。事实上，C++ 标准对某些数据类型的内存布局只有很少的要求。

您的序列化基于直接内存访问，因此，恐怕不会有一个简单的“纯”C++ 解决方案，尤其是没有通用的编译器/平台独立解决方案。

# node.js - 关于 Underscore.js 算法复杂性的任何数据

> ID：12896825
> 
> 赞同：1
> 
> 时间：2012-10-15T13:38:35.947
> 
> 标签：node.js, underscore.js, time-complexity

我找不到任何有关`underscore`'s 函数复杂性的数据，至少在 Underscore.js 官方网站上找不到任何数据；网上搜索也是空的。除了费力地阅读源代码之外，还有什么有用的提示吗？

PS 为其他 node.js 库提供此类信息会很好（但目前没有必要）。

PPS 感谢@generalhenry，找到了一个替代品（`lo-dash`）。尽管它似乎更快，但其渐近复杂性（以及 的`underscore`）的细节仍然未知。

# objective-c - 没有 TabBar 控制器的 TabBar

> ID：12896826
> 
> 赞同：1
> 
> 时间：2012-10-15T13:38:39.027
> 
> 标签：objective-c, ios, uiviewcontroller, uitabbarcontroller

我正在编写一个 iPhone 应用程序，它就像一个 5-6 级的 DrillDown 应用程序。我几乎完成了我的应用程序的编写，现在提出了一个新要求，即从第 3 个屏幕开始添加一个 TabBar（JQuery 中的导航栏）。

我在应用程序中的所有场景中都使用 UINavigationController。

我已经在我的应用程序中编写了所有场景。这是我的故事板的样子：

![故事板](../Images/c895affb01b9ac0f1028c2f79bfa8b4e.png)

现在，因为我需要第三级 uinavigation 的标签栏（如在故事板中）。如果我只是将这些视图嵌入标签栏中，它会开始工作吗？

注意：视图 2 有按钮，如果按下它们会进入不同的视图，我在标签栏中需要这些相同的按钮。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:46:15.653

您也可以在没有 tabBarController 的情况下使用 tabbar，您只需要在其中添加视图而不是视图控制器。这将得到自动管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:47:25.903

是的你可以。Yu 可以制作自己的标签栏对象并将其连接到标签栏委托。在委托对象，你必须有方法：

```
– tabBar:didSelectItem:  required method 
```

完成此操作后，您将拥有自己的标签栏，其中包含您自己的行为。您也可以将其连接到导航控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:18:23.937

您需要标签栏还是工具栏可以完成相同的工作？

tabBar 通常是一个顶级组件，然后每个选项卡都有自己的 UINavigationController 和视图控制器堆栈。

正如您所说，您需要在第 3 层使用它，对我来说，这听起来像是收费栏的一个很好的用途，里面有子视图。

希望这可以帮助。

# objective-c - NSImage 到 NSBitmapImageRep

> ID：12896831
> 
> 赞同：15
> 
> 时间：2012-10-15T13:38:44.267
> 
> 标签：objective-c, macos, bitmap, nsimage, nsbitmapimagerep

如何将 NSImage 转换为 NSBitmapImageRep？我有代码：

```
- (NSBitmapImageRep *)bitmapImageRepresentation
{
    NSBitmapImageRep *ret = (NSBitmapImageRep *)[self representations];

    if(![ret isKindOfClass:[NSBitmapImageRep class]])
    {
        ret = nil;
        for(NSBitmapImageRep *rep in [self representations])
            if([rep isKindOfClass:[NSBitmapImageRep class]])
            {
                ret = rep;
                break;
            }
    }

    if(ret == nil)
    {
        NSSize size = [self size];

        size_t width         = size.width;
        size_t height        = size.height;
        size_t bitsPerComp   = 32;
        size_t bytesPerPixel = (bitsPerComp / CHAR_BIT) * 4;
        size_t bytesPerRow   = bytesPerPixel * width;
        size_t totalBytes    = height * bytesPerRow;

        NSMutableData *data = [NSMutableData dataWithBytesNoCopy:calloc(totalBytes, 1) length:totalBytes freeWhenDone:YES];

        CGColorSpaceRef space = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);

        CGContextRef ctx = CGBitmapContextCreate([data mutableBytes], width, height, bitsPerComp, bytesPerRow, CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB), kCGBitmapFloatComponents | kCGImageAlphaPremultipliedLast);

        if(ctx != NULL)
        {
            [NSGraphicsContext saveGraphicsState];
            [NSGraphicsContext setCurrentContext:[NSGraphicsContext graphicsContextWithGraphicsPort:ctx flipped:[self isFlipped]]];

            [self drawAtPoint:NSZeroPoint fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0];

            [NSGraphicsContext restoreGraphicsState];

            CGImageRef img = CGBitmapContextCreateImage(ctx);

            ret = [[NSBitmapImageRep alloc] initWithCGImage:img];
            [self addRepresentation:ret];

            CFRelease(img);
            CFRelease(space);

            CGContextRelease(ctx);
        }
    }

    return ret;
} 
```

它可以工作，但会导致内存泄漏。至少当我将它与 ARC 一起使用时。使用`initWithData:[nsimagename TIFFRepresentation]`它无法正常工作。某些图像的表示效果不佳。我认为这取决于图像的格式和色彩空间。还有其他方法可以实现吗？

* * *

***mrwalker***建议解决方案的结果：

原图：
![在此处输入图像描述](../Images/89b2936485801cd3c0400da87aab8aa4.png)

转换为 bitmapimagerep 并返回图像 1 次：
![在此处输入图像描述](../Images/c1044e820dd7f37e502e719c855add20.png)

转换为 bitmapimagerep 并返回图像 3 次：
![在此处输入图像描述](../Images/8a3975601fe54e3bd4cab7974dfeb73e.png)

如您所见，每次转换为 NSBitmapImageRep 后图像都会变暗

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T09:20:19.950

@Julius：您的代码太复杂了，并且包含几个错误。我将仅对第一行进行更正：

```
- (NSBitmapImageRep *)bitmapImageRepresentation
{
   for( NSImageRep *rep in [self representations] )
      if( [rep isKindOfClass:[NSBitmapImageRep class]] ) return rep;
   return nil;
} 
```

如果它是表示中的成员，这将提取第一个`NSBitmapImageRep`，如果没有，则返回 nil `NSBitmapImageRep`。我将为您提供另一种解决方案，该解决方案将始终适用`NSImageReps`于表示中的任何内容：`NSBitmapImageRep`, `NSPDFImageRep`or `NSCGImageSnapshotRep`or ...

```
- (NSBitmapImageRep *)bitmapImageRepresentation
{
   CGImageRef CGImage = [self CGImageForProposedRect:nil context:nil hints:nil];
   return [[[NSBitmapImageRep alloc] initWithCGImage:CGImage] autorelease];
} 
```

或者为了避免 NSImage 的子类化，您可以编写：

```
NSImage *img = [[[NSImage alloc] initWithContentsOfFile:filename] autorelease];
CGImageRef CGImage = [img CGImageForProposedRect:nil context:nil hints:nil];
NSBitmapImageRep *rep = [[[NSBitmapImageRep alloc] initWithCGImage:CGImage] autorelease]; 
```

`NSBitmapImageRep`如果图像包含多个表示（例如，`NSBitmapImageRep`来自 TIFF 文件的大量 s），这只会返回一个可能不够好的单个。但是添加一些代码很简单。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-15T14:18:44.950

您可以尝试这种改编自[Mike Ash 的“获取和解释图像数据”博客文章的](http://www.mikeash.com/pyblog/friday-qa-2012-08-31-obtaining-and-interpreting-image-data.html)方法：

```
- (NSBitmapImageRep *)bitmapImageRepresentation {
  int width = [self size].width;
  int height = [self size].height;

  if(width < 1 || height < 1)
      return nil;

  NSBitmapImageRep *rep = [[NSBitmapImageRep alloc]
                           initWithBitmapDataPlanes: NULL
                           pixelsWide: width
                           pixelsHigh: height
                           bitsPerSample: 8
                           samplesPerPixel: 4
                           hasAlpha: YES
                           isPlanar: NO
                           colorSpaceName: NSDeviceRGBColorSpace
                           bytesPerRow: width * 4
                           bitsPerPixel: 32];

  NSGraphicsContext *ctx = [NSGraphicsContext graphicsContextWithBitmapImageRep: rep];
  [NSGraphicsContext saveGraphicsState];
  [NSGraphicsContext setCurrentContext: ctx];  
  [self drawAtPoint: NSZeroPoint fromRect: NSZeroRect operation: NSCompositeCopy fraction: 1.0];
  [ctx flushGraphics];
  [NSGraphicsContext restoreGraphicsState];

  return [rep autorelease];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-16T19:47:28.800

也许派对迟到了，但这是来自@mrwalker 回复的 Swift 3 版本：

```
extension NSImage {
    func bitmapImageRepresentation(colorSpaceName: String) -> NSBitmapImageRep? {
        let width = self.size.width
        let height = self.size.height

        if width < 1 || height < 1 {
            return nil
        }

        if let rep = NSBitmapImageRep(bitmapDataPlanes: nil, pixelsWide: Int(width), pixelsHigh: Int(height), bitsPerSample: 8, samplesPerPixel: 4, hasAlpha: true, isPlanar: false, colorSpaceName: colorSpaceName, bytesPerRow: Int(width) * 4, bitsPerPixel: 32)
        {
            let ctx = NSGraphicsContext.init(bitmapImageRep: rep)
            NSGraphicsContext.saveGraphicsState()
            NSGraphicsContext.setCurrent(ctx)
            self.draw(at: NSZeroPoint, from: NSZeroRect, operation: NSCompositingOperation.copy, fraction: 1.0)
            ctx?.flushGraphics()
            NSGraphicsContext.restoreGraphicsState()
            return rep
        }
        return nil
    }
} 
```

# javascript - 三.js加载顺序

> ID：12896836
> 
> 赞同：1
> 
> 时间：2012-10-15T13:38:52.807
> 
> 标签：javascript, three.js

我的 Three.js Json-Loader 有问题。我有一些对象，它们的路径保存在一个数组中。现在我想加载它们并将它们排序在一个列表中，以便我可以选择它们。但是加载它们的顺序与加载后它们在我的数组中的顺序不同，因为它们的大小不同，所以小的在第一个，大的在最后。所以加载它们后，我不知道对象的名称（名称是路径）。
我的代码：

```
for(var j=0;j<21;j++){
        var path = objPath[j];
        loader.load( path, function( geometry ) { save(geometry, path); } );
    } 
```

使用此代码，将路径提供给保存方法，但始终存在最后一个 (objPath[20]) 路径，因为 for 循环比加载方法快。我该怎么做才能使路径正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:54:19.117

您被涉及 JavaScript 闭包规则的一个相当常见的错误所困扰，请参阅[此链接](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures#Creating_closures_in_loops.3A_A_common_mistake)。简而言之，要获取传递给保存函数的正确路径，需要将其包装到辅助函数工厂中，如下所示：（或如上面的链接所示）

```
function saveHelper(path) {
    return function(geometry) {
        save(geometry, path);
    }
}

for(var j=0;j<21;j++){
    var path = objPath[j];
    loader.load( path, saveHelper(path) );
} 
```

# tfs - 如何在 tfs 的 dropfolder 中仅部署/复制 _PublishedWebsites？

> ID：12896837
> 
> 赞同：1
> 
> 时间：2012-10-15T13:38:53.300
> 
> 标签：tfs, tfsbuild

谁能帮我在构建服务器的dropfolder中仅部署_PublishedWebsites，因为我有解决方案，其中它引用了Web应用程序和类库，在构建服务器中，当我检查drop文件夹时，它包含重复的程序集如下所示。

*   _发布网站
*   ClassLib1.dll
*   ClassLib2.dll
*   网站.dll

我不想在 dropfolder 中再次创建这些程序集（classlib1.dll、classlib2.dll 和 website.dll），因为它们已经存在于 _publishedWebSite/website/bin 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:16:23.730

我已经通过编辑我在下面的链接中发布的 xaml 来解决这个问题。

[http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/1c6af252-d714-4daf-837d-9e1a4fca794c](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/1c6af252-d714-4daf-837d-9e1a4fca794c)

# sql - 查询与自身的联合生成不同的计划

> ID：12896838
> 
> 赞同：6
> 
> 时间：2012-10-15T13:38:55.163
> 
> 标签：sql, oracle, query-optimization, union-all

下面这个查询：

**查询一：**

```
SELECT * FROM DUAL 
```

等效于并产生相同的结果：

**查询 2：**

```
SELECT * FROM DUAL 
UNION
SELECT * FROM DUAL 
```

在运行这两个查询之前，这很明显，只需查看它们即可。

然而，甲骨文似乎并不理解这个非常简单的事实，并产生了两个不同的计划：

**计划一：**

```
Execution Plan
----------------------------------------------------------
Plan hash value: 272002086

--------------------------------------------------------------------------
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |      |     1 |     2 |     2   (0)| 00:00:01 |
|   1 |  TABLE ACCESS FULL| DUAL |     1 |     2 |     2   (0)| 00:00:01 |
-------------------------------------------------------------------------- 
```

**计划二：**

```
Execution Plan
----------------------------------------------------------
Plan hash value: 646475286

----------------------------------------------------------------------------
| Id  | Operation           | Name | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |      |     2 |     4 |     6  (67)| 00:00:01 |
|   1 |  SORT UNIQUE        |      |     2 |     4 |     6  (67)| 00:00:01 |
|   2 |   UNION-ALL         |      |       |       |            |          |
|   3 |    TABLE ACCESS FULL| DUAL |     1 |     2 |     2   (0)| 00:00:01 |
|   4 |    TABLE ACCESS FULL| DUAL |     1 |     2 |     2   (0)| 00:00:01 |
---------------------------------------------------------------------------- 
```

这是为什么？两个 UNION-ed 块的简单比较不是比同时执行`UNION-ALL`and`SORT UNIQUE`操作成本更低吗？或者有没有办法，一个提示，强制 Oracle 在这两种情况下生成相同的计划？

谢谢！

**更新**

Tnoy 的回答迫使我做更多的实验。结果如下： **当查询与自身进行 UNION 时，较大的查询不一定等同于原始查询。**

例如，我创建了一个非常简单的`test`表，它只有一列并加载了两个相同的行。

现在，我对这张表的第一个查询是：

```
SELECT * FROM TEST 
```

返回此结果：

```
 A
-----
  2
  2 
```

而我的联合查询：

```
SELECT * FROM TEST
UNION
SELECT * FROM TEST 
```

返回此结果：

```
 A
-----
  2 
```

这意味着 Oracle 优化器正在做正确的事情。

谢谢托尼！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:48:50.647

我不是 Oracle 开发人员，但我的猜测是数据库引擎必须先“查看”所有行（`UNION ALL`查询的结果），然后才能通过执行唯一排序来计算出有多少重复项。

在你的问题结束时你说

> ...有没有办法，一个提示，强制 Oracle 在这两种情况下生成相同的计划？

我不这么认为，因为您正在尝试执行两个*不同的*查询。第一个查询是“表中的所有行”，您的第二个查询是要求“表中的所有*唯一*行”，

即使您没有任何重复，数据库也不知道这一点，并且必须执行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:01:01.300

对于查看查询的人来说显而易见的东西对优化器来说不一定是显而易见的。

该`UNION`语句执行 a`UNION ALL`后跟 a `DISTINCT`。尽管数据库优化器*可以*搜索这种特殊情况（在完全相同的表之间进行联合的查询），但开发人员/经理必须根据优先级做出决定。

在这种情况下确定优化的优先级大概很低。在您的特定示例中，执行计划可能不同，但两者基本上都是即时的（除非您要在循环中为数百万个示例执行此操作）。

# php - xampp中的phpmyadmin加载错误

> ID：12896839
> 
> 赞同：-2
> 
> 时间：2012-10-15T13:38:57.187
> 
> 标签：php, apache, phpmyadmin, xampp, localhost

我正在使用 windows xp sp2 和 xampp 版本 1.8.0。apache 和 mysql 服务正在运行，但我无法访问 localhost/phpmyadmin 出现此错误：

无法在没有错误的情况下启动会话，请检查您的 PHP 和/或网络服务器日志文件中给出的错误并正确配置您的 PHP 安装。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:42:50.523

这可能是由于客户端的 cookie 问题，或与存储会话文件的临时目录的权限有关的服务器端问题。客户端解决方案

此错误可能只是您的 Web 浏览器中的 cookie 的问题，因此，如果您的浏览器允许，请删除所有存储的 cookie 或仅针对 phpMyAdmin 所在的域/目录选择性地删除它们。

例如，在撰写本文时，在当前版本的谷歌浏览器中，您可以进入首选项，然后选择幕后 -> 内容设置 -> 所有 Cookie 和站点数据，然后在“搜索 cookie”中键入域"输入框。然后将鼠标悬停在相关域上并单击 X 删除按钮。（或者，您可以通过开发人员工具执行此操作）。

# iphone - 在iOS中的触摸点区域设置图像模糊效果

> ID：12896844
> 
> 赞同：5
> 
> 时间：2012-10-15T13:39:02.427
> 
> 标签：iphone, objective-c, ios, uiimage, blur

我提出了一份申请。在这个应用程序中，我可以在 UIImageView 中设置一个图像。

现在，当用户触摸图像时，在同一像素上，我想在触摸部分设置模糊效果。

所以请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:43:21.177

1.  设置模糊效果的区域
2.  制作一个效果矩阵（示例矩阵：[http](http://en.wikipedia.org/wiki/Gaussian_blur) ://en.wikipedia.org/wiki/Gaussian_blur ）
3.  将效果矩阵应用于区域中的每个像素

你完成了:)

# c++ - TinyXml：从 XML 文件中读取 wstring

> ID：12896846
> 
> 赞同：0
> 
> 时间：2012-10-15T13:39:11.920
> 
> 标签：c++, xml, sqlite, unicode

Unicode 字符再次引起了严重的头痛。这是我正在尝试做的事情：1）我正在将 Sqlite 表（包括 unicode 字符）导出到 xml 文件（效果很好并且 unicode 字符不会丢失）2）尝试再次导入这些 XML 表，因为它们已经被编辑- 工作正常，但 unicode 字符丢失。

这是读取 xml 文件的代码：

```
wstring input;
TiXmlElement* root = doc.FirstChildElement();
// count number of rows in xml file
TiXmlElement* counter = root->FirstChildElement();
int totalRows = 0;

while(counter != NULL) {
    totalRows += 1;
    counter = counter->NextSiblingElement();
}

// import data
wchar_t firstChar;
int check, length;
wstring finalInput;
TiXmlElement* rowElement = root->FirstChildElement();
for (int a = 1; a <= totalRows; a++) {
TiXmlElement* columnElement = rowElement->FirstChildElement();
// clear insert statement
insert = start;

for (int b = 1; b <= columns; b++) {
    node = columnElement->FirstChild();
    text = node->ToText();
    // !!! here we have the problem data gets imported as a string !!!
    input = text->Value(); 
```

问题是 Value(); （来自 tinyxml 文件的函数）返回 const char* 而不是 const wchar_t。我试图修改 TinyXml 文件以返回 wchar_t ，但这导致了一些令人讨厌的错误。

我现在的问题是：有谁知道如何使用 tinyxml 从 xml 文件中读取数据而不会丢失 unicode 字符？

在此先感谢您的帮助，一如既往地非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:10:15.190

我有 tinyxml2 库的 wchar_t（或 WCHAR）版本（我为我的项目转换了它）

[http://pastebin.com/VrgNknaa](http://pastebin.com/VrgNknaa) .cpp

[http://pastebin.com/NEy2jjM0](http://pastebin.com/NEy2jjM0) .h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:23:29.660

SQLite 始终使用 UTF-8，因此请确保您的 XML 文件在编辑时保持为 UTF-8 编码。

要强制 TinyXml 以 UTF-8 格式读取 XML 文件，请使用`LoadFile(filename, TIXML_ENCODING_UTF8)`.

# hadoop - 自动设置多节点 Hadoop 集群

> ID：12896852
> 
> 赞同：2
> 
> 时间：2012-10-15T13:39:30.210
> 
> 标签：hadoop, amazon-ec2, configuration-management

我有一个安装了 Hadoop 的 EC2 映像。但是，我在实例化时将其设置为无角色（它不是从属或主控）。为了启动 Hadoop 集群，我在 EC2 上启动了所需数量的实例（节点），然后我必须对每个节点执行以下 3 项操作：

1.  更新 /etc/hosts 以包含必要的 IP 地址。
2.  如果是主节点，更改 $HADOOP_HOME/conf/masters 和 $HADOOP_HOME/conf/slaves
3.  启用节点之间的 SSH 访问。

我希望能够找到一种自动执行此操作的方法，以便对于任意数量的节点，我不必进入并在每个节点上设置所有这些设置。

其他人如何处理自动设置 Hadoop 集群？有没有办法自动化网络部分？

我不确定这是否可能，因为 IP 地址每次都会不同，但我想知道其他人尝试过什么或常用什么。有没有一种好方法可以自动化这些过程，所以每次我设置一个集群进行测试时，我不必为每个节点都做这些？我对Linux脚本不太了解，这可以通过脚本实现吗？还是我只需要手动配置每个节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:58:23.970

我没有使用 Hadoop 的经验，但总的来说，您的任务称为“配置管理”。通常，您编写一些“收据”并为您的服务器定义“角色”（主，从）。这样的角色可能包含服务的配置文件、要安装的包、主机名更改、SSH 密钥等。在服务器初始启动后，您可以告诉它们应该是哪个角色，它们将自动安装。

这些任务有不同的工具可用，例如[Puppet](http://puppetlabs.com/)或[Salt](http://saltstack.org/)。[Wikipedia 上](http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software)有一个比较。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-25T23:16:59.730

我打算通过查看是否存在此类实用程序但找不到任何实用程序。

因此，我使用 python、salt 和 fabric 为“Hadoop 配置自动化”构建了一个自动化实用程序。

准备好 hadoop 集群涉及很多步骤。

*   由 EC2 实例启动。
*   创建安全组。
*   设置 ssh 密钥，以便实例主机可以 ssh 到从机。
*   安装 JDK。
*   安装hadoop。
*   将节点指定为namenode，辅助namenode，slaves - 使hadoop配置文件更改..
*   启动服务

为 4 个节点做所有这些事情需要 1 个小时。对于我想做的工作，我需要重复且经常使用大量节点进行这些操作，因此需要自动化。

对于需要在每个节点中完成的步骤（例如：jdk 安装、hadoop 包安装等），我使用 salt 进行配置管理。Salt 提供类似 puppet 和 chef 的功能。

请随时查看 [https://github.com/varmarakesh/aws-hadoop](https://github.com/varmarakesh/aws-hadoop)

如果您已经有一个 aws 帐户，它的设计目的是便于设置和运行。

# input - MapReduce 中输入拆分的主要原因是什么？

> ID：12896855
> 
> 赞同：4
> 
> 时间：2012-10-15T13:39:43.150
> 
> 标签：input, split, mapreduce

在[MapReduce 论文](http://www.usenix.org/event/osdi04/tech/full_papers/dean/dean.pdf)中描述了输入文件被划分为 M 个输入分割。我知道 Hadoop 中的 HDFS 会自动分区为 64 MB（默认）的块，然后将这些块复制到集群中的几个其他节点以提供容错。我想知道 HDFS 中文件的这种分区是否意味着提到的 MapReduce 论文中描述的输入拆分。容错是这种分裂的单一原因还是有更重要的原因？

如果我在没有分布式文件系统的节点集群上使用 MapReduce（数据仅在具有通用文件系统的本地磁盘上）怎么办？我需要在映射阶段之前拆分本地磁盘上的输入文件吗？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:17:42.490

*想添加一些缺失的概念（ans 让我感到困惑）*

* * *

* * *

**高密度文件系统**

文件存储为块（*故障/节点容限*）。块大小（64MB-128MB）64MB。所以一个文件被分成块，块存储在集群上的不同节点上。一个块被复制因子复制（默认=3）。

**Map-Reduce**

已经存储在 HDFS 中的文件在逻辑上分为**INPUT-SPLITS**。分割大小可以由用户设置

```
Property name           Type   Default value 
```

* * *

```
mapred.min.split.size   int     1
mapred.max.split.sizea  long    Long.MAX_VALUE. 
```

然后通过以下公式计算拆分大小：

**最大（最小尺寸，最小（最大尺寸，块尺寸））**

**注意：：**拆分*是合乎逻辑的*

* * *

* * *

希望现在回答您的问题

```
 I'd like to know if this partitioning of files in HDFS means the input splitting described in mentioned MapReduce papers. 
```

不，根本不是 HDFS 块和 Map-Reduce 拆分是一回事。

```
Is fault tolerance single reason of this splitting or are there more important reasons? 
```

不，分布式计算将是原因。

```
And what if I have MapReduce over cluster of nodes without distributed file system (data only on local disks with common file sytem)? Do I need to split input files on local disk before map phase? 
```

在您的情况下，我猜，是的，您必须将输入文件拆分为 Map Phase，并且您还必须将中间输出（来自 Mapper）拆分为 Reduce Phase。其他问题：数据一致性、容错性、数据丢失（在 hadoop 中 =1%）。

*Map-Reduce 是为分布式计算而设计的，因此在非分布式环境中使用 Map-Reduce 是没有用的。*

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:49:44.920

```
I'd like to know if this partitioning of files in HDFS means the input splitting described in mentioned MapReduce papers. 
```

不，MapReduce 中的输入拆分是为了在 reduce 阶段利用多个处理器的计算能力。映射器接收大量数据并将数据拆分为逻辑分区（大多数时间由程序员自定义映射器实现指定）。然后，这些数据进入各个节点，在这些节点中，称为 reducer 的独立进程执行数据处理，然后最终对结果进行整理。

```
Is fault tolerance single reason of this splitting or are there more important reasons? 
```

不，这不是这样做的唯一原因。您可以将其与文件系统级别的块大小进行比较，以确保将数据传输到块中、按块压缩数据以及分配 I/O 缓冲区。

# memory - 如何使用 .NET CF 3.5 获取进程的内存使用情况？

> ID：12896857
> 
> 赞同：0
> 
> 时间：2012-10-15T13:39:52.363
> 
> 标签：memory, process, windows-mobile, compact-framework

我正在寻找一种方法来读取 Windows Mobile 进程的当前内存使用情况。

我开始访问实际的进程对象。为了`processId`被传递给`Process.GetProcessById(int processId)`我遵循[这个](http://alexmogurenko.com/blog/programming/windows-cemobile-get-process-list-c/)解决方案的方法。

不幸的是，.NET CF 3.5 API`System.Diagnostics.Process`没有提供任何使用进程内存的属性/方法。

必须有办法做到这一点，因为诸如*FDCSoft 任务管理器之*类的工具会显示每个 WM 进程的内存使用情况以及更多的进程数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:03:14.713

CF BCL 中没有任何内容可以为您提供该信息。您需要 P/Invoke [Toolhelp Functions](http://msdn.microsoft.com/en-us/library/aa914815.aspx)并建立一个堆列表，然后将它们相加以获得总进程使用情况。通常，调用顺序如下所示：

*   打电话`CreateToolhelp32Snapshot`，确保你通过`TH32CS_SNAPHEAPLIST`标志
*   调用`Heap32ListFirst`第一个`HEAPLIST32`结构
*   继续调用`Heap32ListNext`更多结构，直到它返回 FALSE
*   调用`Call`CloseToolhelp32Snapshot`

# c# - 如何使用命名方法

> ID：12896862
> 
> 赞同：0
> 
> 时间：2012-10-15T13:40:01.703
> 
> 标签：c#, entity-framework, entity-framework-4, linq-to-entities, dbcontext

我正在使用以下代码并尝试在 Linq-To-Entities 中使用命名方法

```
Customer FindCustomerByLastName(string lastname)  
{  
    DataContext MyContext = new DataContext();  
    return MyContext.Customers.Where(c => GetByCustomerByLastName(c,lastname) == true).FirstOrDefault();  
}  

bool GetByCustomerByLastName(Customer Cust, string LastName)  
{  
    if (Cust.LastName == LastName)  
        return true;  
    else  
        return false;  
} 
```

但这在运行时给了我以下错误。

> LINQ to Entities 无法识别方法 'Boolean GetByCustomerByLastName(Customer, System.String)' 方法，并且此方法无法转换为存储表达式。

如果我将方法更改为使用 lambda，如下所示，一切正常。

```
Customer FindCustomerByLastName(string lastname)  
{  
    DataContext MyContext = new DataContext();  
    return MyContext.Customers.Where(c => c.LastName == lastname).FirstOrDefault();  
} 
```

在我尝试做的上下文中，是否可以在 Linq-To-Entities 中使用命名方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:47:26.710

Linq 表达式中的代码必须可转换为实际执行的环境。这就是这部分错误消息的含义。

> 此方法无法转换为商店表达式。

Linq-to-Entities 的“实体”部分对您的方法一无所知。我在使用 Linq-to-SQL 时遇到了同样的问题，您必须使用 SQL 理解的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:46:39.623

我不是 100% 确定，但我认为问题是，您（显然）在使用 Linq2SQL。因此，您的查询将转换为失败的 SQL 语句，因为 SQL 无法调用您的某些方法。另一方面，lambda 表达式可以转换为 SQL 语句。

# jquery - 不支持 jQuery 对象

> ID：12896866
> 
> 赞同：0
> 
> 时间：2012-10-15T13:40:23.057
> 
> 标签：jquery, internet-explorer

在 IE7 和 8 中检查网站时出现以下问题（9 很好）

对象不支持此属性或方法

当我签入控制台时，它指向：

```
 call_1 = $('.call_1 span'), 
```

我没有看到任何错误，这可能与使用变量“call_1”的函数有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:48:57.610

`;`之前更改`form = $('.form')`为`,`

另外，用分号替换最后一个逗号。

# python - 我正在尝试使用 xmpppy 连接到 gtalk。如何进行身份验证？我在很多地方找到的简单代码不起作用

> ID：12896868
> 
> 赞同：2
> 
> 时间：2012-10-15T13:40:27.677
> 
> 标签：python, google-talk, xmpppy

我使用的代码：

```
import xmppy
jid = xmpp.JID('user@gmail.com')
cl = xmpp.Client(jid.getDomain())
cl.connect(server=('talk.google.com',5222))
cl.auth('user@gmail.com', 'password','something') 
```

它似乎一直工作到连接，我得到'tls'作为连接的回报。在那之后，`cl.auth`失败了。我尝试使用带有和不带有 @gmail.com 的用户名。我尝试过使用不同的用户，所以我的密码没有错。我尝试使用 5223 而不是 5222，在这种情况下，我会得到 'ssl' 作为回报。

这是我得到的调试输出：

```
DEBUG: socket       got   <stream:stream from="gmail.com" id="960A4092BC8F9722" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
  <stream:features>
  <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
  <mechanism>PLAIN</mechanism>
  <mechanism>X-GOOGLE-TOKEN</mechanism>
  <mechanism>X-OAUTH2</mechanism>
  </mechanisms>
  </stream:features>
DEBUG: dispatcher   warn  Unknown stanza: features
DEBUG: dispatcher   ok    Dispatching unknown stanza with type-> props->[u'urn:ietf:params:xml:ns:xmpp-sasl'] id->None
DEBUG: sasl         start Plugging <xmpp.auth.SASL instance at 0x2f22998> into <xmpp.client.Client instance at 0x2f19bd8>
DEBUG: dispatcher   info  Registering handler <bound method SASL.SASLHandler of <xmpp.auth.SASL instance at 0x2f22998>> for "challenge" type-> ns->(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: dispatcher   warn  Registering namespace "urn:ietf:params:xml:ns:xmpp-sasl"
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: dispatcher   warn  Registering protocol "challenge" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: dispatcher   info  Registering handler <bound method SASL.SASLHandler of <xmpp.auth.SASL instance at 0x2f22998>> for "failure" type-> ns->(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: dispatcher   warn  Registering protocol "failure" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: dispatcher   info  Registering handler <bound method SASL.SASLHandler of <xmpp.auth.SASL instance at 0x2f22998>> for "success" type-> ns->(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: dispatcher   warn  Registering protocol "success" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-sasl)
DEBUG: socket       sent  <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="PLAIN">Y3MxMGIwNTlAZ21haWwuY29tQGdtYWlsLmNvbQBjczEwYjA1OUBnbWFpbC5jb20AcHZ6bXZoN3FjYzE=</auth>
DEBUG: socket       error Socket error while receiving data
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/xmpppy-0.5.0rc1-py2.7.egg/xmpp/transports.py", line 153, in receive
    try: received = self._recv(BUFLEN)
SSLError: [Errno 8] _ssl.c:1359: EOF occurred in violation of protocol
DEBUG: client       stop  Disconnect detected
DEBUG: socket       error Socket operation failed
DEBUG: sasl         stop  Plugging <xmpp.auth.SASL instance at 0x2f22998> out of <xmpp.client.Client instance at 0x2f19bd8>. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:27:54.580

解决了这个问题，这是最愚蠢的事情。Gmail 阻止访问，因为它认为我的应用程序活动“可疑且不寻常” 我必须从浏览器登录我的帐户，告诉他们是我，然后在 10 分钟内从应用程序登录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:43:26.747

出于某种奇怪的原因，它（对于某些用户）仅适用于域 googlemail.com。也许你想试试这个。所以你的用户名没有@或任何域，服务器是 googlemail.com

# c++ - IO 流是否可移植

> ID：12896873
> 
> 赞同：1
> 
> 时间：2012-10-15T13:40:52.900
> 
> 标签：c++, iostream, portability

我想知道 IO 流是否真的是可移植的（我认为它们应该是但要确定）？特别是在处理 unix 和 windows 中使用的文件时。

具体来说，如果我将一个双精度值转储到 Windows 中的文件中，然后使用 iostreams 从文件中读取 unix 上的相同值，是否不会因为两个操作系统的字节序变化而导致问题？

格式化的 io 呢？我在某个地方读到，不确定在哪里，当涉及到处理格式化数据时，windows 和 unix 处理相同的方式存在一些差异。任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:24:37.960

C++ 标准是抽象的，没有提到任何特定的操作系统（AFAIK）。因此，iostream 库是可移植的。话虽如此，C++ 标准允许某些实现细节，包括一些对用户可见的（而不仅仅是隐藏在标准 C++ 库中）依赖于实现的细节。这允许操作系统和/或编译器的提供者选择他们首选的方式来实现 C++ 标准。

任何依赖于实现相关行为的代码显然是不可移植的，即使在同一操作系统和/或编译器的不同版本中也是如此。换句话说，应该避免这样的代码。

注意：有时需要编写依赖于实现的代码。在这种情况下，必须保护代码不破坏假定的依赖于实现的行为。例如，一个程序可能假设`sizeof(long unsigned)==8`. 在这种情况下，至少`static_assert(sizeof(long unsigned)==8,"long unsigned not 8 bytes")`应该停止编译无效代码，但理想情况下应该存在替代版本，并通过模板魔术（或 C 风格的宏）来选择。C++11 标准实际上为类型提供了`std::uint64_t`保证*（* `sizeof(std::uint64_t)==8`和类似的）以避免此类问题。但是，`sizeof(ostream)`仍然依赖于实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:49:47.320

文件输入输出：是的，它们是兼容的。Unix 中的比特流与 Windows 中的比特流相同。Unix 中的 double 值与 Windows 相同，都遵循[标准](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。

格式：我不知道任何二进制格式（在双精度示例中），您可能正在谈论文本。Windows 中的文本格式与 Unix 不同，这是导致许多问题的原因。

二进制接口/代码可移植性：如果您使用 IO 函数，那么它是不可移植的。std::input/output 流，即 f/o/stream 实现不是可移植的，也不是为可移植而设计的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:24:51.773

它是可移植的，如果您从一个系统写入特定的字节序列，将该序列传输到另一个系统（通过文件或套接字，这并不重要），您可以在另一边。如果您以文本模式而不是二进制模式编写或阅读，那么行尾（我认为理论上其他实现定义的特殊字符）可能会被重新解释。

*不可*移植的是作为字节序列的精确表示，`double`无论是二进制的*还是*格式化的。二进制是因为例如字节序，而格式化是因为运行时库中的细微差异，这可能意味着当一个系统编码为字符串并由另一个系统编码为字符串时，您的结果可能与 ulp（或有时更多）不同`double`，即使您输出应该足够精确的十进制数字。NaN 值的字符串表示也留给实现。

就 C++ 标准而言，`double`不需要是 IEEE 双精度值。因此，理论上二进制表示之间可能没有任何共同点，并且在可以表示哪些值以及因此在执行格式化 I/O 时输出/接受哪些字符串方面也存在很大差异。在实践中，IEEE 是常用的，字符串通常不会引入比您在浮点运算中预期的更多的错误。

# c++ - 遍历指定文件夹的目录？Qt & C++

> ID：12896875
> 
> 赞同：3
> 
> 时间：2012-10-15T13:41:07.693
> 
> 标签：c++, qt, directory

我有一个具有以下结构的目录。

```
Name-
   -Year1
      -Month1
        -Day1
          -file1
        -..
      -...
   -Year2
      -Month1
      -...
   -... 
```

现在我有 2 个日期 2009-01-02 和 2010-02-03。

我想问是否有人知道我如何在给定时间内列出文件夹中的所有文件，而无需构建巨大的 if-else 结构。如果可能的话，除了 Qt 之外没有任何其他框架。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T14:01:29.800

查看[QDir::entryList()](http://qt-project.org/doc/qt-4.8/qdir.html#entryList)，它将列出文件夹中的所有文件。您可以像这样构造目录路径：

```
QString path = QDir::currentPath() + "/" +
               QString::fromNumber(year) + "/" +
               QString::fromNumber(month) + "/" +
               QString::fromNumber(day); 
```

然后做

```
QDir dir(path);
QStringList files = dir.entryList(); 
```

您可以对另一个日期执行相同的操作，然后合并两个 QStringList。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:24:27.223

您可以创建一个迭代器并像这样扫描目录树：

```
QDir dir("YOUR_PATH_BASE"); //"Name"
if (dir.exists())
{
    foreach(QFileInfo info, dir.entryInfoList(QDir::NoDotAndDotDot | QDir::Files | QDir::AllDirs ))
    {
        if (info.isFile())
        {
            //do something
        }
        if (info.isDir())
        {
            //scan again
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:01:40.133

您可以使用[QDir](http://doc.qt.digia.com/4.6/qdir.html)类来执行此操作。在那里，您可以递归地遍历所有子文件夹。为此，您可以使用[entryInfoList](http://doc.qt.digia.com/4.6/qdir.html#entryInfoList)方法。它返回目录中所有文件和目录的[QFileInfo对象列表。](http://doc.qt.digia.com/4.7-snapshot/qfileinfo.html)对于此列表中的每个条目，您可以检查它是[目录](http://doc.qt.digia.com/4.7-snapshot/qfileinfo.html#isDir)还是[文件](http://doc.qt.digia.com/4.7-snapshot/qfileinfo.html#isFile)。如果它是一个目录，那么你必须更深入。

希望这对您有所帮助。

# php - 设置间隔无法正常工作

> ID：12896880
> 
> 赞同：-1
> 
> 时间：2012-10-15T13:41:17.067
> 
> 标签：php, jquery

如果我将 setinterval 与字符串一起使用，那么它可以正常工作，但它也会加载与 onclick 设置的 prvious id(cityid) 相关的聊天。并且在新点击时与新 id（cityid）相关的聊天和以前的 id 之间的聊天每秒后屏幕会随机播放。如果计时器由以前的 id 运行，我想停止计时器，并且只获取与新 id 相关的聊天，以便只进行新的聊天将显示与新 ID 相关的 b。

请帮助，任何替代方法也将不胜感激。

PHP onclick 在这里

```
 echo "<A href='#'  onclick=allccityid('$comid','$comname',$cityid,'$cities');>$cities</A><br> "; 
```

Jquery 代码在这里。

```
function all(comid,comname,cityid,cname){
//clearInterval(si);

 setInterval('chatcom_load('+ comid +','+ cityid +');', 1000)

 }

 function chatcom_load(idi, cityida) {

$.post('sendchat2.php', {option:'chatcom_load', tocom:idi, tocity:cityida}, function(data) {
    $('#chatcom #commid #commidwin').html(data);

});
} 
```

但是我也尝试通过这种方式设置间隔，但它不起作用（刷新）。我必须将两个参数传递给 chatcom_load 函数。

```
setInterval(chatcom_load(comid, cityid), 1000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:43:40.107

```
setInterval(chatcom_load(comid, cityid), 
```

*这会立即*调用该`chatcom_load`函数，然后将结果传递给.*`setInterval`*

 *您需要将函数传递给`setInterval`，如下所示：

```
setInterval(function() { chatcom_load(comid, cityid); }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:45:30.227

`setInterval()`只需要一个函数调用，您的代码正在执行该方法并传递结果。您需要将方法包装在`function(){}`. 您还需要引用当前间隔并取消它，如果它已设置为防止以前的值继续加载：

```
var si;
function all(comid,comname,cityid,cname){
    if (si) clearInterval(si);
    si = setInterval(function(){ chatcom_load(comid, cityid); }, 1000);
} 
```*

# asp.net-mvc - 通过 AdditionalMetadata 将值从模型传递到视图

> ID：12896883
> 
> 赞同：0
> 
> 时间：2012-10-15T13:41:21.233
> 
> 标签：asp.net-mvc, attributes, data-annotations, scaffolding

在我的模型中，我有一个用 AdditionalMetadata 属性装饰的属性，用于传递我想要呈现的帮助文本：

```
[AdditionalMetadata("HelpText", "help text goes here")] 
```

然后在我的 EditorTemplate (/views/shared/editorTemplates/Object.ascx) 中检查是否设置了此值：

```
<% if (ViewData.ModelMetadata.AdditionalValues.ContainsKey("HelpText"))
{ %>
  <span class='editor-help'>
    <%= ViewData.ModelMetadata.AdditionalValues["HelpText"].ToString()%>
  </span>
<% } %> 
```

但是，当我在 ViewData.ModelMetadata.AdditionalValues 上放置断点时，它始终为空，即使我在正确的字段上打断并且属性已明确设置。我正在使用 MVC4，以防自 MVC3 以来行为发生变化？

为了将自定义值从模型传递到视图，我还需要做任何其他步骤吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:19:22.357

最终设法解决了这个问题。最终我不得不打电话

```
prop.AdditionalValues["HelpText"]) 
```

其中 prop 是 ModelMetadata 类型，同时枚举集合：

```
<% foreach(var prop in ViewData.ModelMetadata.Properties.Where(md => md.ShowForEdit && !ViewData.TemplateInfo.Visited(md))){ %> 
```

不知道为什么它们没有显示在 ViewData.ModelMetadata 对象上。

# matlab - 使用回调而不是循环？

> ID：12896889
> 
> 赞同：0
> 
> 时间：2012-10-15T13:41:49.020
> 
> 标签：matlab, user-interface, time, timer, callback

一位智者曾经告诉我：“伙计，停止思考循环，开始做回调。” - 我已经被这个问题困扰了三天。

我尝试使用回调转换循环，但我不清楚我可以使用哪种回调。问题是制作一个图形，并在其中制作一个执行以下操作的循环：

X 次做：

1.  在图的中心显示一些无关紧要的文本（'X'）几秒钟。
2.  加载随机选择的图像并将其放置在图形中心 Y 秒。
3.  测量用户的响应时间。响应可以是按下的特定键（比如说 F）或根本没有响应。如果有响应，最终返回 A。

我已经尝试了一堆东西：使用暂停，使用`get(figurehandle,'character');`，使用计时器，使用`while tic(toc)<y seconnds`，直到现在，没有任何效果。

有任何想法吗？

到目前为止，我的代码的几个版本是：[没有计时器](https://docs.google.com/document/d/1Q83Us8kpUKApliBNhuKyPdaWDc1DTwAUy8pMPfYqJjA/edit)，[这里有计时器](https://docs.google.com/document/d/11FQOIAA6c9Szo5GdkPsXVyvxoHYUiR4L3cXBKHzi1QQ/edit)。

# mysql - Perl DBI MySQL - '字段列表'中的未知列

> ID：12896894
> 
> 赞同：1
> 
> 时间：2012-10-15T13:41:59.807
> 
> 标签：mysql, perl, dbi

我已经看到这`unknown column in 'field list'`是一个经常发生的问题，并且通常有一个简单的解决方案。在我的情况下，我唯一能想到的是我的一些变量需要引号，但考虑到我从数组中提取数据，我最初的反应是那是错误的。我正在尝试在 Perl 中创建表，因此得到了结果。

我可以使用以下方法创建一个表（`$table`之前声明过）：

```
$dbh->do("create table if not exists $table ( id int(5) not null auto_increment, 
                                              time int(2) default null, 
                                              result_1 varchar(30), 
                                              result_2 varchar(30), 
                                              result_3 varchar(30), 
                                              rating int(2) default null, 
                                              primary key (id))"); 
```

但是当涉及到插入我的“结果”时：

```
my @results = ('abc','def','ghi');
my $r_1 = $results[0];
my $r_2 = $results[1];
my $r_3 = $results[2]; # (these results print out fine)
my $time = time;
my $insert = $dbh->prepare("insert into $table values(id,$time,$r_1,$r_2,$r_3,'')");
$insert->execute; 
```

我得到错误：

`DBD::mysql::st execute failed: Unknown column 'abc' in 'field list' at ...`

从数组中插入结果时是否需要添加额外的引号？或者还有其他我没见过的问题（可能很简单！）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:49:49.523

正如您所怀疑的，您的问题在于引用。但是，您不应该在字符串中手动插入引号。相反，这是正确的方法：

```
my @results = ('abc','def','ghi');
my $r_1 = $results[0];
my $r_2 = $results[1];
my $r_3 = $results[2]; # (these results print out fine)
my $time = time;
my $insert = $dbh->prepare("insert into $table values(id,?,?,?,?,'')");

$insert->execute($time,@results); 
```

这样做的好处是：

*   您不必处理引用，甚至不必知道变量是否需要被引用。
*   Perl 中未定义的内容在数据库中自动变为空。
*   它更有效，因为您可以`execute`多次使用不同的值。你只需要`prepare`一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T13:49:28.860

您应该始终在 DBI 的准备或[引用](http://search.cpan.org/~timb/DBI/DBI.pm#quote)变量时使用[占位符。](https://metacpan.org/module/DBI#Placeholders-and-Bind-Values)永远不要把它们直接放在你的 SQL 字符串中！

```
$dbh->do(
  'insert into $table values(?, ?, ?, ?, ?)', 
  undef,
  $time, $r_1, $r_2, $r_3, '',
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T13:49:27.457

您需要在 SQL 插入语句中引用字符串文字（'abc' 等）。如所写，您的 SQL 语句将扩展 $r_1 等未加引号，从而产生类似： `insert into my_table values(id,abc ...)`当您需要时`insert into my_table values(1,"abc",...)`

也许下面的例子可以说明这个问题：

```
 DB<1> $foo = 'abc'
  DB<2> x "hello $foo"
0  'hello abc'
  DB<5> x "hello \"$foo\""
0  'hello "abc"' 
```

# objective-c - 始终使用指定的初始化器

> ID：12896896
> 
> 赞同：1
> 
> 时间：2012-10-15T13:42:01.760
> 
> 标签：objective-c

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW55](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW55)声明应该有一个设计的初始化程序，并且其他初始化程序应调用设计的初始化程序。

1\. 造成这种情况的主要原因是什么？我的意思是，每个辅助初始化器都可以自己调用 [super init]（因此成为设计的初始化器）。

2\. 一个后续问题：辅助节点和设计的初始化程序之间的每次调用都会生成一个消息传递步骤，还是编译器有什么办法可以避免这种情况？由于初始化程序毕竟在同一个文件中......如果引入了消息传递步骤，我认为问题 1 更相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:29:25.163

具有指定初始化程序的两个主要原因是简单性和子类化。如果您有许多初始化程序，每个初始化程序都必须完成所有工作，这意味着您必须将初始化代码复制到每个初始化程序中。由于所有辅助初始化程序都调用相同的指定初始化程序，大部分初始化代码可以放在一个地方，而其他每个只需要进行小的更改。

对于子类化，请考虑具有许多初始化程序的类 A 和作为 A 的子类的类 B 的情况。如果 A 具有指定的初始化程序，则 B 只需覆盖该方法即可捕获每个初始化。但是如果 A 的初始化器不调用单个方法，那么 B 必须覆盖每个方法，否则它不会总是有机会初始化它的对象。

是的，当您调用指定的初始化程序时，会发送一条消息。虽然编译器*可以*直接调用该方法，但由于语言的动态特性以及子类化的可能性，它不会。在上面的例子中，如果 A 使用了指定的初始化器但没有发送消息，那么 B 的指定初始化器仍然不会被调用。传递消息允许运行时找到具有该方法的第一个类。此外，由于语言是动态的，因此指定的初始化程序的地址可能会在运行时更改，方法是加载重新定义它的类别，或者使用运行时调用直接更改它。

# objective-c - 如何在文本中找到一个单词并读取相应的两行？

> ID：12896898
> 
> 赞同：0
> 
> 时间：2012-10-15T13:42:07.473
> 
> 标签：objective-c, parsing, nsstring

我想找到一个特定的单词并阅读相应的两行。

前任 ：

> 苹果
> 
> xxxxxxxxxxxxxxxxxx
> 
> yyyyyyyyyyyyyyyyyy
> 
> 三星
> 
> qqqqqqqqqqqqqqqq
> 
> wwwwwwwwwwwwwwww
> 
> 诺基亚
> 
> tttttttttttttttt
> 
> zzzzzzzzzzzzzzzzz

如果我搜索“apple”，我想得到`apple`第二行也是 ( `yyyyyyyy`) 。我尝试使用下面的代码，但它不起作用：

```
NSString *contentString = [NSString stringWithContentOfFile:path/to/your/file.txt encoding:textEncoding error:&error];

if (!error) {
    NSRange range = [contentString rangeOfString:yourKeyword];

...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:08:36.900

以字符串形式获取文件，并用换行符分隔它。然后，找到您想要的行并获得接下来的两行。如果我想搜索`Dian007`，类似-

```
// for myfile.txt
NSString* path = [[NSBundle mainBundle] pathForResource:@"myfile" ofType:@"txt"];
NSString *content = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL];
NSArray *myArray = [content componentsSeparatedByString:@"\n"];

// since we want two lines more, don't count last two elements
for(int i = 0; i < ([myArray count] - 2); ++i) { 
  if([[myArray objectAtIndex:i] isEqualToString:@"Dian007"]) {
    // get i-th, (i + 1)th and (i + 2)th lines here

    // For example, to print the lines...
    NSLog(@"first item := \"%@\"", [myArray objectAtIndex:i]);
    NSLog(@"second item := \"%@\"", [myArray objectAtIndex:(i + 1)]);
    NSLog(@"third item := \"%@\"", [myArray objectAtIndex:(i + 2)]);
  }
} 
```

# jquery - 如何在图表中加粗多条 y 轴线？

> ID：12896901
> 
> 赞同：0
> 
> 时间：2012-10-15T13:42:32.403
> 
> 标签：jquery, flot

我正在使用浮动图表。我有多个 y 轴。如何使所有y轴加粗？

```
$(function () {
    function generate(start, end, fn) {
    var res = [];
    for (var i = 0; i <= 100; ++i) {
        var x = start + i / 100 * (end - start);
        res.push([x, fn(x)]);
    }
    return res;
}

var data = [
    { data: generate(0, 10, function (x) { return Math.sqrt(x)}), xaxis: 1, yaxis:1 },
    { data: generate(0, 10, function (x) { return Math.sin(x)}), xaxis: 1, yaxis:2 },
    { data: generate(0, 10, function (x) { return Math.cos(x)}), xaxis: 1, yaxis:3 },
    { data: generate(0, 10, function (x) { return Math.tan(x)}), xaxis: 1, yaxis: 4 }
];
var plot = $.plot($("#placeholder"),
                  data,
                  {
                      xaxis: [
                          { position: 'bottom' },
                      ],
                      yaxes: [
                          { position: 'left', labelWidth : 18},
                          { position: 'right', tickColor:'black', labelWidth : 18, tickDecimals: 0},
                          { position: 'right' , tickColor:'black', labelWidth : 18, tickDecimals: 0},
                          { position: 'right', tickColor:'black', labelWidth : 18}
                      ],

                grid: {
                    clickable: true,
                    borderWidth: 0,
                    hoverable: true,
                    aboveData: true,
                    markings: [ { yaxis: { from: 0, to: 0 }, color: "#000" },
                        { xaxis: { from: 0, to: 0 }, color: 'black' }, { xaxis: { from: 0, to: -1 }, color: "green" }]
                },
                zoom: {
                    interactive: true
                 },
                  });

function getBoundingBoxForAxis(plot, axis) {
    var left = axis.box.left, top = axis.box.top,
        right = left + axis.box.width, bottom = top + axis.box.height;

    // some ticks may stick out, enlarge the box to encompass all ticks
    var cls = axis.direction + axis.n + 'Axis';
    plot.getPlaceholder().find('.' + cls + ' .tickLabel').each(function () {
        var pos = $(this).position();
        left = Math.min(pos.left, left);
        top = Math.min(pos.top, top);
        right = Math.max(Math.round(pos.left) + $(this).outerWidth(), right);
        bottom = Math.max(Math.round(pos.top) + $(this).outerHeight(), bottom);
    });
    return { left: left, top: top, width: right - left, height: bottom - top };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:40:08.967

上面代码中的技术使用 flot 的“标记”api 在轴上覆盖一条线。看来这不适用于多个 y 轴，因为附加轴不在图上。起作用的只是直接在绘图的画布上绘制“更粗”的线条。例如添加绿色 y 轴线：

```
ctx = plot.getCanvas().getContext('2d'); //assuming your plot is stored in a variable named plot variable
ctx.strokeStyle = "green";
ctx.lineWidth = 7;
$.each(plot.getYAxes(), function(){    
    var axesDim = this.box;
    ctx.beginPath();
    xPos = axesDim.left;
    if (this.position == 'left')
    {
        xPos += axesDim.width;
    }
    ctx.moveTo(xPos,axesDim.top);
    ctx.lineTo(xPos,axesDim.top+axesDim.height);
    ctx.closePath();
    ctx.stroke();
}); 
```

在上面的代码上执行时，会产生：

![在此处输入图像描述](../Images/93142e3b23345eff339bfa10625d8862.png)

[这里](http://jsfiddle.net/4Emr9/3/)的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:50:31.873

请参阅这篇关于[在 flot 中创建粗体轴的帖子](https://stackoverflow.com/questions/7433154/display-x-axis-and-y-axis-lines-with-out-the-grid-lines-using-flot)

如果您需要更多帮助，请告诉我

# android - Android通过java代码prob将wrap_content设置为ImageView

> ID：12896919
> 
> 赞同：1
> 
> 时间：2012-10-15T13:43:31.747
> 
> 标签：android, imageview, classcastexception, layoutparams

我已将位图设置为 ImageView，然后想为宽度和高度设置 wrap_content。

```
imgSubsegment = (ImageView) findViewById(R.id.subsegment);

ViewGroup.LayoutParams imageViewParams = new ViewGroup.LayoutParams(
                ViewGroup.LayoutParams.WRAP_CONTENT,
                ViewGroup.LayoutParams.WRAP_CONTENT);

......................................

imgSubsegmentSensor.setImageBitmap(bmpSubsegmentSensor);
imgSubsegmentSensor.setLayoutParams(imageViewParams); 
```

它在给`java.lang.ClassCastException: android.view.ViewGroup$LayoutParams cannot be cast to android.view.ViewGroup$MarginLayoutParams`

我的代码有什么问题？怎么解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:47:47.363

```
 imgSubsegment = (ImageView) findViewById(R.id.subsegment);

    ViewGroup.MarginLayoutParams imageViewParams = new ViewGroup.MarginLayoutParams(
        ViewGroup.MarginLayoutParams.WRAP_CONTENT,
        ViewGroup.MarginLayoutParams.WRAP_CONTENT);

    ......................................

    imgSubsegmentSensor.setImageBitmap(bmpSubsegmentSensor);
    imgSubsegmentSensor.setLayoutParams(imageViewParams); 
```

试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:42:14.233

```
FrameLayout.LayoutParams imageViewParams = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.WRAP_CONTENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);

.................

imgSubsegmentSensor.setImageBitmap(bmpSubsegmentSensor);
    imgSubsegmentSensor.setLayoutParams(imageViewParams); 
```

有用。

# uitableview - UISearchDisplayController 中的 searchResultsTitle 不起作用

> ID：12896924
> 
> 赞同：2
> 
> 时间：2012-10-15T13:43:45.880
> 
> 标签：uitableview, uiviewcontroller, nsstring, uisearchbar, uisearchdisplaycontroller

我想在`UISearchDisplayController`. 在文档中，您可以找到我认为应该更改此字符串`UISearchDisplayController`的属性`searchResultsTitle`，但它不起作用。
请帮助在 iOS 5 及更高版本中自定义“无结果”字符串。为什么`searchResultsTitle`不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:16:38.750

的`searchResultsTitle`属性`UISearchDisplayController`实际上并不控制*No Results*文本。如果您查看实例变量，`UISearchDisplayController`您将同时看到`_resultsTitle`和`_noResultsMessage`。这`_noResultsMessage`是控制*无结果*文本但不幸的是没有公共财产的东西。

不过，您可以使用未记录的实例变量使用此代码设置自定义消息：

```
@try
{
    [self.searchDisplayController setValue:@"No Results, try again later." forKey:[@[@"no", @"Results", @"Message"] componentsJoinedByString:@""]];
}
@catch (NSException *exception) {} 
```

至于`searchResultsTitle`，文档太稀缺了，我不知道它控制什么！

# java - JSF 项目中的 CDI 功能需要什么？

> ID：12896930
> 
> 赞同：2
> 
> 时间：2012-10-15T13:44:05.457
> 
> 标签：java, jsf-2, websphere, java-ee-6, cdi

我有一个针对 WebSphere Application Server 8 的 JSF 项目，我尝试使用 CDI 概念。我有一个`/WEB-INF/beans.xml`赞：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee " title="http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">" class="link">http://java.sun.com/xml/ns/javaee/beans_1_0.xsd"> (http://java.sun.com/xml/ns/javaee/beans_1_0.xsd)
</beans> 
```

这是我的托管 bean：

```
@ConversationScoped
@Named("systemParameter")
public class SystemParameter implements Serializable {

    @EJB
    private ConfigFacade parameterFacade; 
```

这是 Xhtml 页面的一个片段：

```
<h:commandButton action="#{systemParameter.doSave}"/> 
```

如果我尝试单击按钮，则会出现以下异常。

```
javax.el.PropertyNotFoundException: /systemParameters.xhtml at line 99 and column 99 action="#{systemParameter.doSave}": Target Unreachable, identifier 'systemParameter' resolved to null 
```

我还需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T12:26:29.590

在 WAS 8.x 上，确保您使用 Apache MyFaces 2.x 实现来实现 EJB（以及与此相关的 CDI）的依赖注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T11:10:02.803

我相信你应该使用

```
@Inject
private ConfigFacade parameterFacade 
```

而不是`@EJB`注解将会话 bean 注入 Web 控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:44:35.343

实际上，再想一想，我至少可以分享一个片段，可以帮助您找出问题所在。

使用以下

```
@PostConstruct
private void test() {
    Bean<?> bean = (Bean) manager.resolve(manager.getBeans("systemParameter"));
        System.out.println(bean);

} 
```

现在如果经理打印 null 你可能有问题。尝试调试，

在 println 处放置一个断点并检查管理器获取了多少个 bean。在 Eclipse 悬停管理器中单击 beans，检查底层数组，它有多大？回来报告。

# grails - Grails - 管理视图 URL

> ID：12896932
> 
> 赞同：0
> 
> 时间：2012-10-15T13:44:14.040
> 
> 标签：grails, urlmappings.groovy

这是问题：

我有一个网站项目（grails）我正在使用一堆无控制器视图（这是在 grails 中请求的临时站点重写，没有真正的功能（因此没有控制器））并且视图通过下列的：

```
"/**/$view"{
controller: 'staticViewController'
action: 'view'
} 
```

其中“staticViewController”将视图输出为 HTML，无论它在哪里。

因此我的问题。

[site.com/about/something/dog.html] 呈现与 [site.com/about/dog.html] 呈现相同 [site.com/stinkybutt/dog.html]

从最后一个示例中，更大的问题变得明显，因为显然我没有（或不想要）名为“stinkybutt”的目录结构。

我可以在 HTTPD 中编写大量重定向来解决这个问题，但我猜有一个本地解决方案，因为其他使用 grails 的站点没有这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:48:32.170

如果我正确理解您的问题 - 您正在寻找一种方法来对 url 映射的 '**' 部分应用约束。我还没有尝试过，但是从[docs](http://grails.org/doc/latest/guide/theWebLayer.html#urlmappings)中，您可以捕获通配符路径并将其存储在变量中。我知道你可以对变量应用约束，所以有了这些知识，我假设这样的事情可能会起作用：

```
"/$name**/$view"{
  controller: 'staticViewController'
  action: 'view'
  constraints {
    name(matches: /about/)
  }
} 
```

上面应该只提供 about/dog.html 并为其他所有内容返回 404。另一方面，如果您希望除某些 url 之外的所有内容都提供 dog.html，您可以使用以下内容来否定匹配：

```
name(matches: /?!*(stinkybutt|smellybutt)/) 
```

注意：我的正则表达式真的生锈了，所以你可能不得不摆弄它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:56:06.270

所以......看起来视图对于控制器来说是平坦的（因为我没有控制器，所以都堆叠在“视图”下）。因此，我正在创建特定于我希望存在的每个 URL 的 URL 映射。

# java - `Eclipse/Project/Clean...` 和 `Eclipse/Project/Refresh (F5)` 有什么区别？

> ID：12896934
> 
> 赞同：11
> 
> 时间：2012-10-15T13:44:24.707
> 
> 标签：java, eclipse

有什么区别

```
"Eclipse/Project/Clean..." 
```

和

```
"Eclipse/Project/Refresh (F5)" 
```

我经常不得不“重建”我的工作区，其中包含几个相互依赖的项目，我不确定哪种方法是重新开始的最佳方式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T13:45:46.963

[正如这里](http://www.coderanch.com/t/104846/vc/Eclipse-refresh-vs-clean)提到的

`Refresh`分析源文件以检查是否从 Eclipse 外部进行了任何更改，如果是，则编译已更改的文件。

`Clean`另一方面，删除**所有已**编译的类并强制重新编译整个项目（或工作区）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:48:18.023

**Clean**删除了生成的资源，例如已编译的类，并确保再次重新编译最新的代码库，其中

**刷新**从实际文件夹结构同步 eclipse 项目，确保对文件和/或文件夹结构所做的任何更改都可用于 eclipse...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:35:29.690

**Clean**将清除所选项目中的所有编译文件。**如果启用自动生成**（在项目菜单中），它将触发重建。

**刷新**将从文件系统重新加载项目中的文件。

对于您的问题，**Clean**将是答案。确保您已选中**自动生成。**

# r - 扩展包含本地存储库包的实际子目录的路径

> ID：12896935
> 
> 赞同：2
> 
> 时间：2012-10-15T13:44:29.210
> 
> 标签：r, path, repository, cran

是否有一个函数可以将路径扩展到包含包二进制文件的实际子目录（或在 Linux 和 Mac OS 下调用的任何等效项），给定以与**操作系统无关的**方式到本地存储库的根目录的类似 URL 的路径？

## 尽职调查

**相关链接**

*   [所以发帖](https://stackoverflow.com/questions/2905650/creating-a-local-cran-repository)
*   [R 手册](http://cran.r-project.org/doc/manuals/R-admin.html#Setting-up-a-package-repository)

假设您在以下有一个存储库`L:/my_repo`：

```
path.repo <- "L:/my_repo" 
```

MS Windows 需要一定的子目录结构：

```
path.sub  <- file.path("bin/windows/contrib", paste(version$major, 
    gsub("(?<=\\d)\\.\\d", "", version$minor, perl=TRUE), sep=".")
) 
```

实际创建存储库：

```
dir.create(file.path(path.repo, path.sub), recursive=TRUE, showWarnings=FALSE) 
```

一旦存储库中存在软件包二进制文件，就需要创建存储库的索引：

```
setwd(file.path(path.repo, path.sub))
tools::write_PACKAGES(".", type="win.binary") 
```

之后，存储库就可以使用了，您可以通过以下方式安装其软件包

install.packages("mypackage", repos=file.path("file://", path.repo))

到现在为止还挺好。我想创建一个函数，在构建包二进制文件后自动将包二进制文件复制到我的本地存储库。为此，我想我需要检索包含二进制文件和两个索引文件（`PACKAGES' and`PACKAGES.gz`）的实际目录的路径。这应该以**独立于操作系统的**方式发生，以使其尽可能通用。

当然我可以通过搜索索引文件

```
unique(dirname(grep("PACKAGE*", list.files(path.repo, recursive=TRUE, 
    full.names=TRUE), value=TRUE))) 
```

但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:42:12.230

这就是我到目前为止提出的。它借用了以下代码`contrib.url()`：

```
expandPathRepos=function(
    path,
    type="win.binary",
    vsn=paste(version$major, gsub("(?<=\\d)\\.\\d", "", 
        version$minor, perl=TRUE), sep="."), 
    ...
) {
    if (!type %in% c("source", "mac.binary", "win.binary")) {
        stop(paste("Invalid type: '", type, "'", sep=""))
    }
    out <- switch(unlist(type), 
        source=paste(gsub("/$", "", path), 
            "src", "contrib", sep = "/"), 
        mac.binary=paste(gsub("/$", "", path), "bin", "macosx", 
            mac.subtype, "contrib", ver, sep="/"), 
        win.binary=paste(gsub("/$", "", path), 
            "bin", "windows", "contrib", vsn, sep = "/")
    )
    return(out)
}

expandPathRepos(path="L:/R")
[1] "L:/R/bin/windows/contrib/2.14" 
```

还有其他想法吗？

# .net - 是否有可能获得相当于 .net 对象的“内存地址”？

> ID：12896936
> 
> 赞同：4
> 
> 时间：2012-10-15T13:44:30.677
> 
> 标签：.net, memory-address, object-identity

我们正在将自定义序列化工具滚动到我们的项目中，并且遇到了通过原始值类型唯一标识每个对象的需求，该原始值类型可用作其“身份”的同义词。该值不需要有任何意义或组织，只需至少在序列化例程期间它是唯一且持久的。理想情况下，.net 会在内部维护一个唯一且持久的对象 ID，我们可以将其存储为对象的 ID。我知道每个对象都有一个`GetHashCode`方法，但我们对值的全局唯一性没有信心。访问此类 ID 的另一个标准是该方法必须非常有效。

我已经看过`GetHashCode`，垃圾收集器和编组的想法，还没有得到任何可靠的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:46:35.317

您正在寻找[`ObjectIDGenerator`课程](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.objectidgenerator.aspx)，这正是您想要做的事情。

# javascript - 如何防止单个对象上的多个事件侦听器？

> ID：12896939
> 
> 赞同：0
> 
> 时间：2012-10-15T13:44:35.810
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

`$object`我需要检查jQuery mobile上是否有事件侦听器。有没有可行的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:47:59.540

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"  type="text/javascript"></script>
<script>
    $(function() {
        $("#textDiv").click(function() {
            //Event Handling
        });
        var events = $._data(document.getElementById('textDiv'), "events");
        var eventBound = false;
        if(events != null) {
            var eventBound = true;
        }
    });
</script>
</head>
<body>
<div id="textDiv">Text</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:20:46.080

对我有用的是仅使用 ON 添加事件，然后在离开应用程序状态时使用[OFF() 方法](http://api.jquery.com/off/)删除所有事件。

# matlab - 如何计算具有不变属性的氡变换

> ID：12896940
> 
> 赞同：0
> 
> 时间：2012-10-15T13:44:37.357
> 
> 标签：matlab, transform, transformation, invariants

我尝试进行 R 转换，根据科学文章“通过深度轮廓识别人类家庭活动和智能家居的 R 转换”中所写的内容，以这种方式计算：

![在此处输入图像描述](../Images/87a2b9e625ce78052f7a198d2118f8b7.png)

在哪里

![在此处输入图像描述](../Images/0ee4a4672684d16e9f08db6726aa64d9.png)

在 Matlab 中，我得到氡变换：

```
[R,xp] = radon(Silhouette,theta); 
```

然后，根据本文所写的内容，我通过添加，对于每个角度（即 R 的列），氡变换值的平方（即，设置列，在 R 的行上）来计算 R 变换. 但是对于每一列，这个总和是相同的。我哪里错了？

谢谢你的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:16:10.093

根据提供的证据，我只能推测可能是错误的事情。

如果在积分（求和）后得到相同的值，您可能需要检查 i）定义角度 theta（范围、度数或弧度等）的方式是否存在错误值（或提供详细信息/示例）。ii）您的`Silhouette`数据。

使用 MATLAB 的`radon`函数示例，您的配置文件的提取方式应类似于：

```
% input image
I = zeros(100,100); I(25:75, 25:75) = 1;

theta = 0:180;
[R,xp] = radon(I, theta);

Rt = sum(R.^2, 1);
figure; plot(theta, Rt); 
```

# function - 如何将函数指定为 PowerShell 函数中脚本块参数的默认值？

> ID：12896944
> 
> 赞同：2
> 
> 时间：2012-10-15T13:44:54.007
> 
> 标签：function, powershell, parameters, block, defaults

鉴于这些 powershell 函数，其中 foo 将脚本块作为参数：

```
function bar($name)
{
    "Hello World $name"
}

function foo([scriptblock]$fun={})
{
    &$fun "Bart"
} 
```

是否可以在函数 foo 中将函数 bar 指定为 $fun 而不是 {} 的默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:08:32.627

对的，这是可能的。例如，这种方式适用于传递函数：

```
foo ((get-command bar).scriptblock) 
```

在您的情况下，它会打印

```
Hello World Bart 
```

因此，为了将其用作默认参数：

```
function foo([scriptblock]$fun=(get-command bar).scriptblock)
{
    &$fun "Bart"
} 
```

现在只是打电话

```
foo 
```

得到相同的结果。

# linux - JBoss 7 正在尝试从 JBoss bin 加载模块库

> ID：12896950
> 
> 赞同：3
> 
> 时间：2012-10-15T13:45:17.420
> 
> 标签：linux, module, jboss7.x

我有一个模块，描述如下：

```
<?xml version="1.0" encoding="UTF-8"?>  
<module xmlns="urn:jboss:module:1.0" name="com.mymodule">  
  <resources> 
    <resource-root path="myFirstJar.jar" />
    <resource-root path="mySecondJar.jar" />
    <resource-root path="Lib/linux" />
  </resources>
</module> 
```

在我的 jboss-deployment-structure.xml 中：

```
<jboss-deployment-structure><deployment>
  <dependencies>
    <module name="com.mymodule" />
  </dependencies>
</deployment></jboss-deployment-structure> 
```

找到了 jar 文件，但其中一个文件尝试访问 .so 库。该库存在于“Lib/linux”文件夹中。但是 JBoss 会调查 %JBOSS_HOME%/bin/mylib.so 。我尝试遵循命名约定（参见[jboss.org](https://docs.jboss.org/author/display/MODULES/Native+Libraries)），得到同样的错误：

*引起：java.lang.UnsatisfiedLinkError：无法加载库：/usr/local/jboss/jboss-as-7.1.1.Final/bin/mylib.so*

我究竟做错了什么？

**编辑** 如果我将 .so 文件放入我的 JBoss/bin 文件夹中，那么 JVM 会在 JNI 调用中崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:30:15.693

我想，这应该可以解决你的问题。

在你`module.xml`的模块中`com.mymodule`

```
<?xml version="1.0" encoding="UTF-8"?>  
<module xmlns="urn:jboss:module:1.0" name="com.mymodule">  
  <resources> 
    <resource-root path="myFirstJar.jar" />
    <resource-root path="mySecondJar.jar" />
    <resource-root path="Lib/linux" />
  </resources>
 <dependencies>
 <module name="javax.api"/>
 <module name="THE JAR IT IS TRYING TO LOOK OUTSIDE"/>
 </dependencies>

</module> 
```

您需要在它所依赖的 jar 上添加模块的依赖项才能使其工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:10:02.913

尝试将 Lib/linux 重命名为 lib/linux-i686/ 和/或 lib/linux-x86_64/。我们似乎在我们为 org.hornetq 和 org.jboss.as.web 模块提供的模块设置中使用了它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T10:48:24.363

我所追求的库是随程序一起安装的。我结束了用 JAR 的相对路径编写模块，直接在程序 lib 文件夹中找到它们。对于图书馆，我不必参考它们。它们被加载到系统中，因为程序在机器上作为服务运行。我得到的错误更多是关于那个程序的问题，而不是 JBoss 的问题。

# java - 如何重现 hs_err_pid*.log 文件？

> ID：12896952
> 
> 赞同：0
> 
> 时间：2012-10-15T13:45:26.323
> 
> 标签：java, jvm-crash

重新启动 HSQLDB 时出现错误。
我收到热点错误日志。
我想在我的本地机器上重现该错误。
谁能帮我重现 hs_err_pid*.log 文件？
如果是这样，有哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T01:21:55.023

不管你用哪个 JRE 编译下面的代码，如果你在 JRE1.7 下运行它，你会得到错误。

**编码：**

```
import java.sql.DriverManager;
import java.sql.SQLException;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
public class TestFileChooser{
    public static void main(String[] args){ 
        try{
            //If you comment the code below, no error will occur
            DriverManager.getConnection(
            "jdbc:hsqldb:file:C:/DB_Test/DB_Test", 
            "userAdmin", "pass");
        }catch(SQLException e){
            JOptionPane.showMessageDialog(null,e.getMessage());
        }   
        JFileChooser chooser = new JFileChooser("C:");  
        chooser.showOpenDialog(null);   
        System.exit(0);
    }
} 
```

**测试（重现错误）：**

1.  使用 JRE1.7 编译并运行以下代码
2.  它将打开一个 JFileChooser
3.  单击按钮以列出文件的详细信息（在右上角）
4.  它将显示文件及其详细信息的表格
5.  点击表格标题
6.  程序将突然退出并创建一个文件 hs_err_pid

# asp.net-mvc - 无法为淘汰赛和 MVC 获得正确的语法

> ID：12896955
> 
> 赞同：0
> 
> 时间：2012-10-15T13:45:31.073
> 
> 标签：asp.net-mvc, knockout.js

我是第一次尝试 Knockout，我正在努力让它发挥作用。基本场景是我想使用自动完成将员工添加到列表中。我也希望能够删除。当用户满意时，他可以单击提交，这会将 id 列表发布到服务器，我将在该服务器上进入流程的下一部分。目前我正在尝试让添加的员工先工作。

我有一个服务器端视图模型类；

```
public class TrainingListEmployeesViewModel : BaseTrainingViewModel
{
    public TrainingListEmployeesViewModel()
    {
        this.EmployeeList = new List<int>();
        this.ClientEmployeeSelector = new ClientEmployeeSelector();
    }

    public TrainingListEmployeesViewModel(List<int> employeeList, string trainingName, string trainingDescription)
        : base(trainingName, trainingDescription)
    {
        this.EmployeeList = employeeList;
        var dates = new CalendarDates(Utility.GetToday(), Utility.GetToday().AddYears(1));
        this.Cvm = new CalendarViewModel(employeeList.ToList(), dates);
    }

    public List<int> EmployeeList { get; set; }

    public ClientEmployeeSelector ClientEmployeeSelector { get; set; }
} 
```

}

控制器看起来像这样；

```
[HttpPost]
        [Authorize(Roles = "Administrator, Trainer, ManagerAccounts, ManagerIT")]
        [ValidateAntiForgeryToken]
        [ValidateOnlyIncomingValuesAttribute]
        public ActionResult Training(TrainingViewModel tvm)
        {
            SessionObjects.TrainingName = tvm.TrainingName;
            SessionObjects.TrainingDescription = tvm.TrainingDescription;
            return this.RedirectToAction("Training", new { employeeId = tvm.EmployeeSelector.SearchTextId });
        }

        [HttpGet]
        [Authorize(Roles = "Administrator, Trainer, ManagerAccounts, ManagerIT")]
        public ActionResult BulkTraining()
        {
            return this.View(new TrainingListEmployeesViewModel());
        } 
```

视图看起来像这样；

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<SHP.Models.TrainingListEmployeesViewModel>" %>
<%@ Import Namespace="System.Web.Script.Serialization" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Bulk Training
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<form class="employeeListEditor">
    <h3>Allocate or cancel training for the selected employees</h3>
    <table>
        <tr>
            <td style="text-align: right;">Course Name</td>
            <td><%: Html.EditorFor(model => model.TrainingName) %></td>
        </tr>
        <tr>
            <td style="text-align: right;">Description (optional)</td>
            <td><%: Html.TextAreaFor(
               model => model.TrainingDescription, new { maxlength = "255", style = "width:400px;height:100px;" }) %></td>
        </tr>
    </table>
    <%: Html.EditorFor(model => model.ClientEmployeeSelector) %>
    <button data-bind="click: addEmployee">Add</button>
    <div id="displayEmployees" style="margin-top:10px;display: block">
        <table id="employeeDataTable" class="groupBorder">
            <thead>
                <tr>
                    <th></th>
                    <th>Employee</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: employees">
                <tr>
                    <td>
                        <a href="#" data-bind="click: function() { viewModel.removeEmployee($data) }">Remove</a>
                        <input type="hidden" data-bind="value: searchTextId"/>
                    </td>
                    <td><span data-bind="value: searchText"></span></td>
                </tr>               
            </tbody>
        </table>
    </div>
</form>

    <script type="text/javascript">
        function Employee(id, text) {
            var self = this;
            self.searchId = id;
            self.searchText = text;
        }

        var initialData = <%= new JavaScriptSerializer().Serialize(Model) %>;
        function ViewModel() {
            var self = this;
            self.employees = ko.observableArray(initialData.EmployeeList);
            self.searchText = ko.observable(initialData.SearchText);
            self.searchTextId = ko.observable(initialData.SearchTextId);
            self.removeEmployee = function(employee) {
                this.employees.remove(employee);
            };
            self.addEmployee = function() {
                alert(self.searchText);
                this.employees.push(new Employee(self.searchTextId, self.searchText));
            };
            self.save = function() {
                ko.utils.postJson(location.href, { employees: self.employees });
            };
        }
        ko.applyBindings(new ViewModel());
    </script>
</asp:Content> 
```

编辑器模板看起来像包含自动完成的 ClientEmployeeSelector；

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<SHP.Models.ClientEmployeeSelector>" %>

        <table class="groupBorder">
            <tr>
                <th colspan="2">Enter 2 or more characters for "<%: Html.LabelFor(model => model.SearchText)%>" and select from the list.</th>
            </tr>
            <tr>
                <td><%: Html.LabelFor(model => model.SearchText)%></td>
                <td><%: Html.AutocompleteFor(model => model.SearchText, controller: "Payroll",
                                            minLength: 2, maxResults: 10,
                                            htmlAttributes: new { style = "color:purple; width:500px;" })%>
                                <%: Html.HiddenFor(model => model.SearchTextId)%>
                                <%: Html.HiddenFor(model => model.SearchText)%>
                </td>
            </tr>
        </table> 
```

我收到一条错误消息；searchTextId 未定义。当我查看 IE 开发人员工具中发生的情况时，searchTextId 存在正常，但无法找到它的值。那么我怎样才能让它工作呢？我怀疑我需要做一些改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:11:42.170

在我看来，您绑定了错误的属性。如果要显示包含员工的表格，则应在`foreach`绑定中使用员工的属性。此外，最好在绑定中使用`$parent`or`$root`对象而不是使用`viewModel`对象：

```
 <tbody data-bind="foreach: employees">
        <tr>
            <td>
                <a href="#" data-bind="click: $parent.removeEmployee">Remove</a>
                <input type="hidden" data-bind="value: searchId"/>
            </td>
            <td><span data-bind="text: searchText"></span></td>
        </tr>               
    </tbody> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/yXvDB/2/](http://jsfiddle.net/vyshniakov/yXvDB/2/)

但是如果你真的想`searchTextId`在员工表中显示视图模型的属性，你应该使用`$parent`对象：

```
<input type="hidden" data-bind="value: $parent.searchTextId"/> 
```

# actionscript-3 - 如何在 AS3 中从常量中提取 @Embed 字符串的一部分？

> ID：12896960
> 
> 赞同：0
> 
> 时间：2012-10-15T13:46:04.320
> 
> 标签：actionscript-3, flash

基本上假设您在 MXML 中有以下行：

```
<s:Image left="0" top="0" source="@Embed(source='images/outline.png')" width="100%" height="100%" horizontalAlign="center" verticalAlign="middle" id="img" alpha="0.2"/> 
```

如果您希望从常量中提取有关“images/”的部分而不是直接硬编码怎么办？有没有办法做到这一点？如果有怎么办？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:51:35.440

从技术上讲，您将无法在`Embed`语句中使用常量。

您可以做的是使用`-compiler.source-path`添加顶级`assets`文件夹作为资产文件夹。

# indentation - 在 SublimeText2 中粘贴代码使用奇数缩进

> ID：12896965
> 
> 赞同：1
> 
> 时间：2012-10-15T13:46:24.110
> 
> 标签：indentation, sublimetext2, sublimetext

如果我有一些代码，例如：

```
function foo() {
  doStuff()
} 
```

我将它粘贴在下面“X”之前的位置：

```
 function foo() {
       X
     } 
```

Sublime 最终粘贴了类似的东西

```
 function foo() {
       function foo() {
  doStuff()
}
     } 
```

而不是 textmate 所做的：

```
 function foo() {
      function foo() {
        doStuff()
      }
    } 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:27:25.007

根据@Joachim 的建议，这种行为是由“粘贴和缩进”提供的。通过在 Preferences -> Keybindings 中交换“paste”和“paste and indent”快捷方式，可以将其设为默认操作。

```
{ "keys": ["super+shift+v"], "command": "paste" },
{ "keys": ["super+v"], "command": "paste_and_indent" }, 
```

# doctrine - 无法使用 PEAR 安装 Doctrine DBAL

> ID：12896967
> 
> 赞同：1
> 
> 时间：2012-10-15T13:46:31.677
> 
> 标签：doctrine, pear, dbal

当我尝试使用 pear 安装 DoctrineDBAL 时，例如：

```
C:\wamp\pear>pear install doctrine/DoctrineDBAL 
```

我收到以下错误消息：

> 没有可用于包“pear.doctrine-project.org/DoctrineDBAL”的版本安装失败

我也无法运行`pear remote-list -c doctrine`命令。我收到一条安全错误消息（可能的符号链接攻击）

任何帮助表示赞赏。

PS：频道“pear.doctrine-project.org”已经初始化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:35:25.020

尝试**清除缓存**

```
pear clean-cache 
```

然后验证您是否**检测到可用版本**：

```
pear remote-list -c doctrine 
```

如果您在**清理临时文件**时遇到安全错误， 您可以使用[crapcleaner](http://www.filehippo.com/download_ccleaner/)来执行此操作。

在此之后**再试一次**：

```
pear install doctrine/DoctrineDBAL 
```

或者在您指定版本时（2.3.0 是撰写本文时的最新版本）：

```
pear install doctrine/DoctrineDBAL-2.3.6 
```

它一直对我有用，希望它对你有用

# android - 使用 kSOAP 连接到 .Net Web 服务时出错

> ID：12896968
> 
> 赞同：0
> 
> 时间：2012-10-15T13:46:32.733
> 
> 标签：android, web-services, android-intent, ksoap2, android-ksoap2

这是我的代码，它将尝试连接到我的网络服务......如何解决这个问题？您可以在此处查看我的 Web 服务示例代码：[How to insert and get .NET web-service data Object to My Android App](https://stackoverflow.com/questions/12893638/how-to-insert-and-get-net-web-service-data-object-to-my-android-app)

```
 private static final String SOAP_ACTION = "http://www.mywesite.com/GetDetails";
        /* your webservice web method */
        private static final String METHOD_NAME1 = "GetDetails";
        private static final String NAMESPACE = "http://www.mywesite.com/";
        private static final String SOAP_ADDRESS = "http:///www.mywesite.com/webservice/service.asmx";
        String STR1 = "2F5B1900-07F6-0801-323B-0F10020B1803";

        //Code inside On-click
                SoapObject request = new SoapObject(NAMESPACE,
                        METHOD_NAME1);
    /*          PropertyInfo propertyInfo = new PropertyInfo();
                propertyInfo.type = PropertyInfo.STRING_CLASS;
                propertyInfo.name = "STR1";*/
                //use this to add parameters
                request.addProperty(METHOD_NAME1, STR1);
                //Declare the version of the SOAP request
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(request);  

                try {
                    HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
                    //this is the actual part that will call the webservice
                    /*Here is some Problem*/
                    httpTransport.call(SOAP_ACTION, envelope);
                    // Get the SoapResult from the envelope body.
                    SoapObject resultGD=(SoapObject)envelope.bodyIn;
                    if(resultGD!=null)
                    {
                        System.out.println("The SOAP Object Received is: "+resultGD.getPropertyCount());
                        System.out.println("The SOAP Object Received is: "+resultGD.getProperty(0));
                    }
                    else
                    {
                        Toast.makeText(getApplicationContext(), "No Response", Toast.LENGTH_SHORT).show();
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }

While Executing this Code i'm Getting the Following Error:

        10-15 18:50:28.673: W/System.err(515): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@2:44 in java.io.InputStreamReader@44f65758) 
        10-15 18:50:28.673: W/System.err(515):  at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
        10-15 18:50:28.673: W/System.err(515):  at org.kxml2.io.KXmlParser.require(KXmlParser.java:1431)
        10-15 18:50:28.673: W/System.err(515):  at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:127)
        10-15 18:50:28.684: W/System.err(515):  at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
        10-15 18:50:28.684: W/System.err(515):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
        10-15 18:50:28.684: W/System.err(515):  at com.tareta.FAM.FamHomePage.onClick(FamHomePage.java:128)
        10-15 18:50:28.684: W/System.err(515):  at android.view.View.performClick(View.java:2408)
        10-15 18:50:28.684: W/System.err(515):  at android.view.View$PerformClick.run(View.java:8816)
        10-15 18:50:28.684: W/System.err(515):  at android.os.Handler.handleCallback(Handler.java:587)
        10-15 18:50:28.693: W/System.err(515):  at android.os.Handler.dispatchMessage(Handler.java:92)
        10-15 18:50:28.693: W/System.err(515):  at android.os.Looper.loop(Looper.java:123)
        10-15 18:50:28.693: W/System.err(515):  at android.app.ActivityThread.main(ActivityThread.java:4627)
        10-15 18:50:28.693: W/System.err(515):  at java.lang.reflect.Method.invokeNative(Native Method)
        10-15 18:50:28.703: W/System.err(515):  at java.lang.reflect.Method.invoke(Method.java:521)
        10-15 18:50:28.703: W/System.err(515):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
        10-15 18:50:28.703: W/System.err(515):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
        10-15 18:50:28.703: W/System.err(515):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:56:00.633

在下面的行中删除“METHOD_NAME1”并添加 STR1 的密钥而不是那个。request.addProperty(METHOD_NAME1, STR1);

“STR1”应该是您的方法的参数打开 WSDL 并检查参数。

# objective-c - Xcode 和 WebView：如果没有 Internet 连接，则加载本地 html（后备）

> ID：12896971
> 
> 赞同：6
> 
> 时间：2012-10-15T13:46:35.250
> 
> 标签：objective-c, ios, c, xcode

目前我正在使用 UIWebView 为 iOS 编写一个应用程序。我的目标是使用 WebView 显示一个 php 站点（来自我的网络服务器）。我很擅长 HTMl、CSS、JS 和 PHP，但 Object C 不是我的强项。但是我设法实现了一切，我的目标是（当 iOS 没有互联网连接时）在错误警报后显示本地文件而不是服务器上的文件。使用谷歌后，我设法独立完成，但不是作为后备。

现在它显示警报，但在点击确定后，用户会得到一个空白页面。不是很用户友好:(在本地html文件中，我可以实现一种“刷新按钮”。如果你有（更好的？）解决方案，我会很高兴。谢谢！

我的系统：OS X 10.8.2 上的 Xcode 4.5.1

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIWebViewDelegate>
@property (strong, nonatomic) IBOutlet UIWebView *webView;
@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *loadingSign;
- (void)loadSite;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize webView;
@synthesize loadingSign;

-(void) webViewDidStartLoad:(UIWebView *)webView {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    [self.loadingSign startAnimating];
    self.loadingSign.hidden = NO;
}

-(void) webViewDidFinishLoad:(UIWebView *)webView {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    [self.loadingSign stopAnimating];
    self.loadingSign.hidden = YES;
}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
    [self.loadingSign stopAnimating];
    self.loadingSign.hidden = YES;
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Keine Internetverbindung" message:@"Bitte verbinde dich mit dem Internet." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
}

- (void)loadSite
{
    NSString *fullURL = @"http://website.com";
    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
    webView.scrollView.bounces = NO;
    webView.delegate = self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self loadSite];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:42:25.210

您可以实现以下 UIAlertViewDelegate 方法：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

当 alertView 被解除时调用此方法，因此您可以在他的正文中加载本地资源作为后备。

在 ViewController 的界面中，您应该添加：

```
@interface ViewController : UIViewController <UIWebViewDelegate,UIAlertViewDelegate> 
```

当你分配你的 alertView 时，将委托设置为 self。

我的意思是：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Keine Internetverbindung" message:@"Bitte verbinde dich mit dem Internet." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil]; 
```

# magento - 将所有地址详细信息加入客户集合

> ID：12896976
> 
> 赞同：1
> 
> 时间：2012-10-15T13:47:02.883
> 
> 标签：magento, collections

我希望将所有客户地址属性加入到完整的客户集合中。

```
$collection = Mage::getModel('customer/customer')->getCollection()->addAttributeToSelect('*');
$collection->joinField('is_active', 'customer/address', 'is_active','parent_id=entity_id'); 
```

给了我致命的错误：

```
Mage_Core_Exception: Can't retrieve entity config: customer/address in /app/Mage.php on line 563 
```

由于我使用的是Enterprise，我们可以添加客户地址属性，因此使用加入特定地址属性的方法并不令人满意，如下代码片段：

```
$collection->addNameToSelect()
    ->joinAttribute('billing_postcode', 'customer_address/postcode', 'default_billing', null, 'left')
    ->joinAttribute('billing_city', 'customer_address/city', 'default_billing', null, 'left')
    ->joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')
    ->joinAttribute('billing_region', 'customer_address/region', 'default_billing', null, 'left')
    ->joinAttribute('billing_country_id', 'customer_address/country_id', 'default_billing', null, 'left') 
```

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:46:46.930

我设法找到了一种方法，虽然它不是超级优雅，但它对我有用。基本上，我们可以循环遍历所有的地址属性并`joinAttribute()`以这种方式添加我们的 s。

```
$addressCollection = Mage::getModel('customer/address')->getCollection()->addAttributeToSelect('*');
$addressCollection->getSelect()->limit(1);
$address = $addressCollection->getFirstItem();
foreach ($address->getAttributes() as $attribute) {
    if (is_null($attribute->getAttributeID()) || is_null($attribute->getFrontendLabel()) || ($attribute->getFrontendLabel() == '')) {
        continue;
    }
    $collection->joinAttribute($attribute->getName(), 'customer_address/' . $attribute->getName(), 'default_billing', null, 'left');
} 
```

请注意，我们忽略没有标签的属性，因为我只想要“真实”的客户地址信息。

# jquery - 使用 Jquery 清除 5 个空 TD

> ID：12896979
> 
> 赞同：0
> 
> 时间：2012-10-15T13:47:11.050
> 
> 标签：jquery

我有一个动态表正在填充，我知道我不应该这样做，但是你将如何连续找到 5 个空的 TD 并隐藏它们？因此，如果行包含 5 个空 TD，则不显示 TD。

我想删除`<td></td><td></td><td></td><td></td><td></td>`DOM 中的每个实例。不只是第一个。

我只希望 5 个空 TD 消失，而不是所有空 TD

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:54:36.923

您可以使用`:empty`选择器：

```
$('#yourtable tr td').filter(':empty').hide(); 
```

如果要删除`tr`具有 5 个空`td`元素的元素，可以使用`filter`方法：

```
$('#yourtable tr').filter(function(){
   return $(this).find('td:empty').length === 5
}).remove() 
```

* * *

如果只想删除前 5 个空 td 元素，可以使用`slice`方法：

```
$('#yourtable tr td').filter(':empty').slice(0, 5).remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:02:05.997

以下是我如何解决这个奇怪的请求：http: [//jsfiddle.net/5ZGgx/](http://jsfiddle.net/5ZGgx/)

```
$(function()
{  
    $("table tr").each(function()
    {
        var emptyCells = $(this).find("td").filter(function()
        {
            return $.trim($(this).text()).length === 0;
        });

        if(emptyCells.length === 5)
        {
            emptyCells.hide();                
        }
    });
})​; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:56:19.680

```
// Grab every row in your table
$('table#yourTable tr').each(function(){
  if($(this).children('td:empty').length === $(this).children('td').length){
    $(this).remove(); // or $(this).hide();
  }
}); 
```

# android - 使用 Android SurfaceView 拍照不使用 ICS 及更高版本刷新

> ID：12896980
> 
> 赞同：1
> 
> 时间：2012-10-15T13:47:11.563
> 
> 标签：android, camera, android-camera

我创建了一个应用程序，它使用来自 Android 开发网站的代码拍摄照片并添加到画廊。 [http://developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

它会拍摄一张照片，然后应该重新加载相机预览，以便您可以拍摄更多照片并将其添加到图库中。它在 Android v3 上运行良好。

在 Android v4 上，相同的软件会在第一张照片之后冻结相机，因此无法拍摄第二张照片。

可能导致这种情况的版本是否有任何变化？

它在 ACER A510 平板电脑上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:04:09.883

已解决 - 我必须在我的 PictureCallback 中的 onPictureTaken 方法中再次调用 startPreview()。我还不确定这会对旧版本产生什么影响。

# php - JavaScript中的正则表达式修饰符/ u？

> ID：12896985
> 
> 赞同：19
> 
> 时间：2012-10-15T13:47:26.747
> 
> 标签：php, javascript, regex, unicode

最近我为我的 PHP 代码创建了一个正则表达式，它只允许使用字母（包括特殊字符和空格），但现在我在将它（？）转换为 JavaScript 兼容的正则表达式时遇到了问题，这里是`/^[\s\p{L}]+$/u`：问题是`/u`正则表达式模式末尾的修饰符，因为 JavaScript 不允许这样的标志。

我怎样才能重写它，所以它也可以在 JavaScript 中工作？

有什么东西只允许波兰语字符：`Ł`, `Ą,` `Ś`, `Ć`, ...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-15T13:59:07.807

`/u`修饰符用于**unicode**支持。ES2015中的**JavaScript**添加了对它的支持。

阅读[http://stackoverflow.com/questions/280712/javascript-unicode](http://stackoverflow.com/questions/280712/javascript-unicode)以了解有关使用 JavaScript 的正则表达式中的 unicode 的更多信息。

* * *

### 波兰语字符：

```
Ą \u0104
Ć \u0106
Ę \u0118
Ł \u0141
Ń \u0143
Ó \u00D3
Ś \u015A
Ź \u0179
Ż \u017B
ą \u0105
ć \u0107
ę \u0119
ł \u0142
ń \u0144
ó \u00F3
ś \u015B
ź \u017A
ż \u017C 
```

所有特殊的波兰字符：

```
[\u0104\u0106\u0118\u0141\u0143\u00D3\u015A\u0179\u017B\u0105\u0107\u0119\u0142\u0144\u00F3\u015B\u017A\u017C] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T13:54:45.033

JavaScript 没有任何 UTF-8 字符串的概念，因此您不太可能需要该`/u`标志。（您的字符串可能已经采用通常的 JavaScript 格式，每个“字符”一个 UTF-16 代码单元。）

更大的问题是 JavaScript 不支持`\p{L}`，也不支持任何等价的符号；JavaScript 正则表达式不知道 Unicode 字符属性。有关近似它的一些方法，请参阅[此 StackOverflow 问题](https://stackoverflow.com/q/280712/978917)的答案。

* * *

**编辑补充：**如果你只需要支持波兰字母，那么你可以写`/^[\sa-zA-ZĄĆĘŁŃÓŚŹŻąćęłńóśźż]+$/`. 和部分覆盖 ASCII 字母`a-z`，`A-Z`然后将其余字母单独列出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-03T03:31:32.697

从 ES2015 开始， JavaScript 支持*/u*。看：

*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode)
*   [https://www.ecma-international.org/ecma-262/6.0/#sec-get-regexp.prototype.unicode](https://www.ecma-international.org/ecma-262/6.0/#sec-get-regexp.prototype.unicode)

# makefile - 通过命令提示符将参数传递给 CMAKE

> ID：12896988
> 
> 赞同：72
> 
> 时间：2012-10-15T13:47:32.557
> 
> 标签：makefile, cmake

我的项目有一个生成文件，并且我正在传递一些参数，并基于该参数设置一些标志。我能够做到这一点。但现在我想用 cmake 做同样的事情。我已经创建`cmakelist.txt`但我不知道如何传递参数并检查`cmakelist.txt`.

我的makefile示例：

```
ifeq "$(FAB)" "po"
      //setting some flags
else
      //setting some iother flag
endif 
```

从命令提示符获取参数并基于此设置标志的方法是什么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-15T15:33:24.363

在 CMakeLists.txt 文件中，创建一个缓存变量，如此处所述：

```
SET(FAB "po" CACHE STRING "Some user-specified option") 
```

来源：[http ://cmake.org/cmake/help/v2.8.8/cmake.html#command:set](http://cmake.org/cmake/help/v2.8.8/cmake.html#command:set)

然后，要么使用 GUI（ccmake 或 cmake-gui）设置缓存变量，要么在 cmake 命令行上指定变量的值：

```
cmake -DFAB:STRING=po 
```

来源：[http ://cmake.org/cmake/help/v2.8.8/cmake.html#opt:-Dvar:typevalue](http://cmake.org/cmake/help/v2.8.8/cmake.html#opt:-Dvar:typevalue)

如果实际上您的选项是布尔值，请将您的缓存变量修改为布尔值。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2019-04-19T08:42:03.817

**Ubuntu 16.04 上的 CMake 3.13**

这种方法更灵活，因为它不会将 MY_VARIABLE 限制为类型：

```
$ cat CMakeLists.txt 
message("MY_VARIABLE=${MY_VARIABLE}")
if( MY_VARIABLE ) 
    message("MY_VARIABLE evaluates to True")
endif()

$ mkdir build && cd build

$ cmake ..
MY_VARIABLE=
-- Configuring done
-- Generating done
-- Build files have been written to: /path/to/build

$ cmake .. -DMY_VARIABLE=True
MY_VARIABLE=True
MY_VARIABLE evaluates to True
-- Configuring done
-- Generating done
-- Build files have been written to: /path/to/build

$ cmake .. -DMY_VARIABLE=False
MY_VARIABLE=False
-- Configuring done
-- Generating done
-- Build files have been written to: /path/to/build

$ cmake .. -DMY_VARIABLE=1
MY_VARIABLE=1
MY_VARIABLE evaluates to True
-- Configuring done
-- Generating done
-- Build files have been written to: /path/to/build

$ cmake .. -DMY_VARIABLE=0
MY_VARIABLE=0
-- Configuring done
-- Generating done
-- Build files have been written to: /path/to/build 
```

# iphone - NSData dataWithContentsOfURL：在 iOS 6 中停止工作

> ID：12896990
> 
> 赞同：0
> 
> 时间：2012-10-15T13:47:37.070
> 
> 标签：iphone, objective-c, ios, ios6, nsdata

[这个问题与这个](https://stackoverflow.com/questions/12531558/datawithcontentsofurl-error-256-in-ios-6)问题非常相似。

但是，接受的答案（也是唯一的答案）并不能解决我的问题。

我有一个“混合”iOS 应用程序，其中包含一个 UITabView 和一组 UIWebViews，显示来自 Web 服务器的 HTML5 中的一些应用程序内容。引擎盖下有一个自制的缓存引擎，可以在后台缓存内容。此缓存引擎使用此行填充其数据

```
[NSData dataWithContentsOfURL:request.URL options:NSDataReadingUncached error:&error]; 
```

到目前为止，该应用程序运行良好，没有任何问题，但在 iOS 6 中，它不再工作了。使用调试器我得出的结论是上面的行不起作用。当我跨过上述行时，它只是无法加载页面，过了一会儿我收到错误 256。当我切换到 iOS 5 时，它工作得很好。

我已经打印了 NSURL-object request.URL，它看起来应该并且确实包含“http://”-part，如下所示：

```
http://app.customername.com/.mvc/MobileApp/Index 
```

我还尝试加载一个与应用程序网站无关的测试页面，一个我自己制作的非常简单的 html 页面，以及[http://www.google.com](http://www.google.com)

它们都在 iOS 5.1 中工作，但在 iOS 6 中这些页面出现了同样的问题。

我也尝试使用没有像这样的“Uncached”选项的方法，但仍然没有运气：

```
[NSData dataWithContentsOfURL:request.URL] 
```

iOS 6 中的方法数据 dataWithContentsOfURL: 是否发生了一些变化，其他人看到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:53:02.433

所以，我遇到了同样的问题，我不知道确切的原因。

我假设它与 NSURLCache 线程与 dataWithContentsOfURL 不兼容有关。如果有人知道为什么，请插话。

最重要的是，我的项目中已经有 ASIHTTP，所以我替换了这个：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]]; 
```

有了这个：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:url]];
[request startSynchronous];        
NSData *data = [request responseData]; 
```

现在一切都很好。

# unit-testing - Moles 框架：它是如何钻透的？

> ID：12896993
> 
> 赞同：0
> 
> 时间：2012-10-15T13:47:52.353
> 
> 标签：unit-testing, moles

当使用 Moles 框架时，它允许模拟任何函数调用。这是来自这里的报价：http: [//msdn.microsoft.com/en-us/library/ff798308.aspx](http://msdn.microsoft.com/en-us/library/ff798308.aspx)

> 当执行进入一个方法时，例如 DateTime.Now 属性 getter，Moles 框架会检查测试类是否为该方法定义了一个绕行。如果定义了 detour，则框架会将调用重定向到 detour 委托。如果未定义绕行，则调用将定向到该方法的实际实现。

我的问题是：*你如何定义测试类中的弯路？*

仅供参考： [这个](https://stackoverflow.com/questions/3021797/how-moles-isolation-framework-is-implemented)问题解决了 Moles 是如何在内部实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:56:54.273

您必须创建一个包含您希望绕行的方法的程序集的 moles 程序集。有多种方法可以做到这一点，其中最简单的方法是在您的测试项目中右键单击对您希望“痣”的程序集的引用，然后单击“创建痣程序集”选项。如果这不起作用，则所有内容都有命令行选项。这个 moled 程序集将具有允许您在它们上定义弯路的类。例如，假设您有典型的静态数据访问层。定义绕道看起来像这样：

```
MEmployeeDAL.GetEmployeeGuid = (id) => return new MockEmployee(); 
```

查看此博客文章了解更多详细信息：http: [//blogs.msdn.com/b/kristol/archive/2010/03/07/unit-testing-with-microsoft-moles.aspx](http://blogs.msdn.com/b/kristol/archive/2010/03/07/unit-testing-with-microsoft-moles.aspx)

# c# - 在 Visual Sourcesafe 2005 中我的项目中缺少新文件

> ID：12896994
> 
> 赞同：0
> 
> 时间：2012-10-15T13:47:57.183
> 
> 标签：c#, visual-studio-2010, visual-sourcesafe

我有一个 Visual Studio 2010 项目，我保留在 VSS 2005 中。我最近添加了一些新代码（在 C# 中工作），其中包括带有一些新类的新文件、一个带有一些枚举类型的文件以及一个带有几个静态字符串的文件。我已经递归地检查了我的项目几次，但文件仍然不在 VSS 中。在项目仍然签入的情况下，我在 Visual Studio 中打开项目，它们都显示为已锁定（无法编辑），但这些新文件（我认为如果文件不是 VSS 中的一部分，应该会发生这种情况）。有什么想法吗？如何使我的新文件成为 VSS 项目的一部分？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:05:13.260

没关系，将新文件拖放到它应该去的 VSS 文件夹中。

# cluster-computing - 如何在 Ganglia 上设置警报？

> ID：12896998
> 
> 赞同：2
> 
> 时间：2012-10-15T13:48:01.143
> 
> 标签：cluster-computing, monitoring, distributed-computing, ganglia

如何设置 Ganglia，以便在集群中的机器使用（例如，超过 95% 的物理 RAM）时收到电子邮件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:48:20.823

googlecode 上有一个名为 ganglia-alert 的开源项目。该工具连接 gmetad 并获取数据。您可以根据发送警报的要求配置规则。

我打算使用这个工具。

[http://code.google.com/p/ganglia-alert/](http://code.google.com/p/ganglia-alert/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:40:07.457

最简单的方法在这里：http: [//sourceforge.net/apps/trac/ganglia/wiki/ganglia_nagios_integration](http://sourceforge.net/apps/trac/ganglia/wiki/ganglia_nagios_integration)

您需要使用 nagios 作为警报系统。