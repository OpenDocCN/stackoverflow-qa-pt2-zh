# StackOverflow 问答 13018000-13018999

# javascript - Twitter Bootstrap 的响应式背景？

> ID：13018000
> 
> 赞同：1
> 
> 时间：2012-10-22T19:02:48.710
> 
> 标签：javascript, css, html, twitter-bootstrap

我想在网站上对背景进行响应式图像排列。

例如，基于不同的屏幕分辨率，我想加载不同的背景图像。此外，如果我可以定义不同的行为，那将很有用；例如，分辨率较高的桌面将具有较大的拉伸背景图像，而上网本可能具有缩小的较小版本以适应，或者而 3GS iPhone 将具有较小的平铺图像。

你将如何实现这样的场景？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:07:56.763

我相信这将帮助您解决您的问题。我今天在一次无关的 Google 探险中遇到了以下库：[eCSSential](https://github.com/scottjehl/eCSSential)。好像是车票。您可以使用该库来检测屏幕尺寸，并加载适当的 CSS 文件，同时考虑当前视口和当前设备的屏幕尺寸。很漂亮。

结合我上一部分的回答，相信你会有一个很好的方法来处理你的问题。

* * *

下面只是您可以查询的屏幕尺寸的一个示例，但您明白了。可以为每个场景设置背景样式。

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
    /* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
    /* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
    /* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
    /* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
    /* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
    /* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
    /* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
    /* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
    /* Styles */
} 
```

对于任何分辨率，背景都可以设置不同的样式，例如：

```
@media only screen 
and (min-device-width : [width]) 
and (max-device-width : [width]) {

    body {
        background-image: url('../img/image.png');
        -webkit-background-size: cover;
           -moz-background-size: cover;
             -o-background-size: cover;
                background-size: cover;
                // or you could just center the image if it's bigger than the current viewport
                // background-position: center center;
    }
} 
```

信用：大部分来自[CSS Tricks](http://css-tricks.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:08:03.550

您可以投资一点 jquery 来根据屏幕大小更改背景。这是您可以执行的操作的示例：

```
if ( $(window).width() < 1000 ) {
    $('body').css('background','url("yourimage")';
} else {
    $('body').css('background','url("yourimage")';
} 
```

如果您有时间，介意告诉我们您尝试过什么吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:10:08.143

[本文](http://css-tricks.com/perfect-full-page-background-image/)讨论了几种方法。最后一种方法可能正是您正在寻找的。它包括一个用于检查窗口大小和设置背景的 JavaScript 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T19:14:02.927

[您可以使用CSS-Tricks](http://css-tricks.com/perfect-full-page-background-image/)上解释的 CSS3 整页背景图像，然后在必要时使用 jQuery Fallback。[Gaya 设计博客](http://www.gayadesign.com/diy/jquery-plugin-fullscreen-background/)上有一篇关于 jQuery 方法的好文章

CSS：

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

使用`@media`@apttap 指定的查询方法和这个 CSS 片段，您可以使用每个设备像素比的多个背景图像。

# objective-c - 无法更新单例属性

> ID：13018003
> 
> 赞同：1
> 
> 时间：2012-10-22T19:03:00.767
> 
> 标签：objective-c, xcode, singleton

我遇到了一个愚蠢的问题，我几乎尝试了所有东西（买了 3 本书，浏览了整个谷歌 :)）但没有任何帮助。在我看来，解决方案应该非常简单......

我需要在 Objective-C 中声明一个单例（对于 iOS 应用程序，如果这很重要的话），它应该有一些我需要从其他类更新的属性。但我不能这样做 - 属性不会更新，它们在“init”方法中设置了相同的值。

我创建了一个简单的应用程序来测试这个问题。这就是我所做的：

首先，我声明了一个示例类及其子类，我将用作单例的属性：

```
@interface Entity : NSObject

@property (nonatomic, strong, readwrite) NSMutableString * name;

@end

@implementation Entity
@synthesize name;

@end

@interface Company : Entity

@property (nonatomic, strong, readwrite) NSMutableString * boss;
@property (nonatomic) int rating;

@end

@implementation Company
@synthesize boss, rating;

@end 
```

然后我根据“iOS Programming Guide by Big Nerd Ranch”一书中描述的方法声明了单例本身。为了清楚起见，我同时使用我的自定义类和标准 NSMutableString 作为属性：

```
@class Company;

@interface CompanyStore : NSObject
{
     NSMutableString * someName;
}

@property (nonatomic, strong, readwrite) Company * someCompany;
@property (nonatomic, strong, readwrite) NSMutableString * someName;

+ (CompanyStore *) store;
- (void) modifyCompanyProperties;

@end

@implementation CompanyStore
@synthesize someCompany, someName;

// Declaring the shared instance
+ (CompanyStore *) store
{
    static CompanyStore * storeVar = nil;

    if (!storeVar) storeVar = [[super allocWithZone:nil] init];

    return storeVar;

}

// Replacing the standard allocWithZone method
+ (id) allocWithZone:(NSZone *)zone
{
    return [self store];
} 
```

然后我用初始值初始化所有属性：

```
- (id) init
{
    self = [super init];
    if (self) {
        someCompany = [[Company alloc] init];
        [someCompany setBoss:[NSMutableString stringWithFormat:@"John Smith"]];
        [someCompany setName:[NSMutableString stringWithFormat:@"Megasoft"]];
        [someCompany setRating:50];

        someName = [[NSMutableString alloc] initWithString:@"Bobby"];
    }
    return self;
} 
```

从另一个类（在视图中显示内容的视图控制器）：

**1.**我得到了单例属性的值。一切都好——我的 int 值得到了“John Smith”、“Megasoft”、“Bobby”和 50。我的**init**方法中的值。

**2.**我从该视图控制器更改单例的属性（使用多种方式 - 我现在不确定哪一种是正确的）：

```
- (IBAction)modify2Button:(id)sender {

    CompanyStore * cst = [CompanyStore store];

    NSMutableString * name = [[NSMutableString alloc] initWithString:@"Microcompany"];
    NSMutableString * boss = [[NSMutableString alloc] initWithString:@"Larry"];

    [[[CompanyStore store] someCompany] setName:name];
    cst.someCompany.boss = boss;

    NSMutableString * strng = [[NSMutableString alloc] initWithString:@"Johnny"];
    [cst setSomeName:strng];
} 
```

...然后我试图再次获得这些值。我仍然得到旧的集合 - “John Smith”，“Megasoft”等，即使当我在其中一个字符串上设置断点时，我可以看到单例的 name 属性是“Microcompany”而不是“Megasoft”休息时间……不过好像没有分配。

**3.**然后我在尝试另一件事——我从视图控制器调用一个单例的私有方法，它为属性分配另一组值。这是单例中的方法：

```
- (void) modifyCompanyProperties
{
    NSMutableString * boss = [[NSMutableString alloc] initWithString:@"George"];
    NSMutableString * name = [[NSMutableString alloc] initWithString:@"Georgeland"];

    [someCompany setBoss:boss];
    [someCompany setName:name];
    [someCompany setRating:100000];

    [someName setString:@"Nicholas"];

} 
```

**4.**我试图再次从视图控制器中获取更新的属性值......仍然得到那些“John Smith”、“Megasoft”......没有任何变化。

似乎单例的属性只设置了一次，然后我无法更改它们，即使它们的属性被声明为“读写”。

看起来我不明白一些简单的事情。如果有人能解释如何正确声明和更新单例中的属性，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:03:48.447

我注意到的第一件事是您在`store`方法的主体中声明了“storeVar”。这对我来说似乎是非常错误的，因为每次调用它都会重新初始化单例。您应该像这样声明变量：

```
static CompanyStore * storeVar = nil;
    @implementation CompanyStore
    @synthesize someCompany, someName;

    // Declaring the shared instance
    + (CompanyStore *) store
    {

        if (!storeVar) storeVar = [[super allocWithZone:nil] init];

        return storeVar;

    } 
```

此外，您的 init 方法并不完全完整，因为您不想在初始化单例后再次调用 init ，因此您必须检查这一点，如果它已被初始化，您应该简单地返回它：

```
- (id) init
{
if (storeVar!=nil) {
return storeVar;
}

    self = [super init];
    if (self) {
        someCompany = [[Company alloc] init];
        [someCompany setBoss:[NSMutableString stringWithFormat:@"John Smith"]];
        [someCompany setName:[NSMutableString stringWithFormat:@"Megasoft"]];
        [someCompany setRating:50];

        someName = [[NSMutableString alloc] initWithString:@"Bobby"];
    }
    return self;
} 
```

此外，这不是一个错误，只是一个建议——你可以放弃@synthesize，因为从 ios 6 开始，编译器会自动生成它。但同样，使用它并不是一个错误。希望能帮助到你

# in-app-purchase - 在应用程序中 - 从付费到免费

> ID：13018007
> 
> 赞同：1
> 
> 时间：2012-10-22T19:03:08.377
> 
> 标签：in-app-purchase, iad

我有一个问题，我在应用商店有 1 年的付费应用，现在我想将应用转换为带有 iAd 的免费应用，并且可以通过应用内购买删除 iAd……问题是我想为已购买该应用程序的用户禁用 iAd。

有办法做到这一点吗？

# java - JFrame 组件有时无法加载

> ID：13018010
> 
> 赞同：1
> 
> 时间：2012-10-22T19:03:15.530
> 
> 标签：java, swing, event-handling, jframe

正如标题所说，我有一个在单击按钮后更新的 JFrame。该框架有一个菜单栏、一些图像和一个按钮。大多数情况下一切正常，但有时框架显示时没有按钮和图像（10% 的时间）。该程序不显示错误。我完全不知道为什么没有加载组件，特别是因为它不经常发生。我究竟做错了什么？

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.GridLayout;
import java.util.Random;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class FirstScreen extends JFrame {
    private static final long serialVersionUID = 1L;
    int counter;
    private JButton highcharts, fusioncharts, googleAPI, visualizationAPI, easyCharts, jqplot, bfo, chartfx;
    private JButton btn;
    private JMenuBar menuBar;
    private JMenu menu;
    private JMenuItem exit;

    public FirstScreen(Model model, int round) {
        ImageIcon h = new ImageIcon("images/highcharts"+model.getElements()[model.getCounter()]+".jpg");
        ImageIcon f = new ImageIcon("images/fusioncharts"+model.getElements()[model.getCounter()]+".jpg");
        ImageIcon g = new ImageIcon("images/googleAPI"+model.getElements()[model.getCounter()]+".jpg");
        ImageIcon v = new ImageIcon("images/visualization"+model.getElements()[model.getCounter()]+".jpg");
        ImageIcon ec = new ImageIcon("images/easycharts"+model.getElements()[model.getCounter()]+".jpg");
        ImageIcon j = new ImageIcon("images/jqplot"+model.getElements()[model.getCounter()]+".jpg");
        ImageIcon b = new ImageIcon("images/bfo"+model.getElements()[model.getCounter()]+".jpg");
        ImageIcon c = new ImageIcon("images/chartfx"+model.getElements()[model.getCounter()]+".jpg");

        highcharts = new JButton(h);
        fusioncharts = new JButton(f);
        googleAPI = new JButton(g);
        visualizationAPI = new JButton(v);
        easyCharts = new JButton(ec);
        jqplot = new JButton(j);
        bfo = new JButton(b);
        chartfx = new JButton(c);

        Random rand=new Random();
        int min = 0;
        int max = 9;
        int randomNum = rand.nextInt(max - min + 1) + min;     

        JPanel panelContent = new JPanel(new GridLayout(0,1));
        switch(randomNum) {
        case 0:         
            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(wrap(visualizationAPI));
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));
            panelContent.add(wrap(highcharts));
            break;
        case 1:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        case 2:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        case 3:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        case 4:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        case 5:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        case 6:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        case 7:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        case 8:

            panelContent.add(wrap(fusioncharts));
            panelContent.add(wrap(googleAPI));            
            panelContent.add(visualizationAPI);
            panelContent.add(wrap(easyCharts));
            panelContent.add(wrap(jqplot));            
            panelContent.add(wrap(bfo));
            panelContent.add(wrap(chartfx));panelContent.add(wrap(highcharts));
            break;
        }
        JScrollPane scrollpane = new JScrollPane(panelContent);
        setTitle("Onderzoeksprogramma grafische libraries Dashboard 2.0");
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            e.printStackTrace();
        }
        menuBar = new JMenuBar();
        menu = new JMenu("Options");
        //menu.setForeground(Color.WHITE);
        menuBar.add(menu);              
        exit = new JMenuItem("Exit");
        menu.add(exit);
        setJMenuBar(menuBar);
        menuBar.setBackground(Color.BLACK);
        menuBar.setForeground(Color.WHITE);

        Container contents = getContentPane();
        JPanel jp = new JPanel();

        btn = new JButton("Ga verder");
        //jp.add(btn);
        //jp.add(scrollpane);
        jp.setOpaque(false);

        contents.add(scrollpane, BorderLayout.CENTER);  
        contents.add(btn, BorderLayout.SOUTH);  

        setUndecorated(true);
        setExtendedState(FirstScreen.MAXIMIZED_BOTH);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
    }    
    public JButton getHighcharts() {
        return highcharts;
    }
    public void setHighcharts(JButton highcharts) {
        this.highcharts = highcharts;
    }
    public JButton getFusioncharts() {
        return fusioncharts;
    }
    public void setFusioncharts(JButton fusioncharts) {
        this.fusioncharts = fusioncharts;
    }
    public JButton getGoogleAPI() {
        return googleAPI;
    }
    public void setGoogleAPI(JButton googleAPI) {
        this.googleAPI = googleAPI;
    }
    public JButton getVisualizationAPI() {
        return visualizationAPI;
    }
    public void setVisualizationAPI(JButton visualizationAPI) {
        this.visualizationAPI = visualizationAPI;
    }
    public JButton getEasyCharts() {
        return easyCharts;
    }
    public void setEasyCharts(JButton easyCharts) {
        this.easyCharts = easyCharts;
    }
    public JButton getJqplot() {
        return jqplot;
    }
    public void setJqplot(JButton jqplot) {
        this.jqplot = jqplot;
    }
    public JButton getBfo() {
        return bfo;
    }
    public void setBfo(JButton bfo) {
        this.bfo = bfo;
    }
    public JButton getChartfx() {
        return chartfx;
    }
    public void setChartfx(JButton chartfx) {
        this.chartfx = chartfx;
    }
    public JButton getBtn() {
        return btn;
    }

    public void setBtn(JButton btn) {
        this.btn = btn;
    }
    public JMenuItem getExit() {
        return exit;
    }

    public void setExit(JMenuItem exit) {
        this.exit = exit;
    }

    public int getCounter() {
        return counter;
    }
    public void increaseCounter() {
        counter++;      
    }
    public void disableAll() {
        highcharts.setEnabled(false);
        fusioncharts.setEnabled(false);
        jqplot.setEnabled(false);
        visualizationAPI.setEnabled(false);
        googleAPI.setEnabled(false);
        easyCharts.setEnabled(false);
        bfo.setEnabled(false);
        chartfx.setEnabled(false);
        btn.setEnabled(true);       
    }

    public static JComponent wrap(JComponent comp)
    {
        JPanel panel = new JPanel();
        panel.add(comp);
        return panel;
    }
} 
```

控制器：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.UnsupportedLookAndFeelException;

public class Controller implements ActionListener {
    private Model model;
    private StartScreen startScreen;
    private FirstScreen firstScreen;
    private FinalScreen finalScreen;
    private Score score;

    public Controller(Model model) throws ClassNotFoundException, InstantiationException, IllegalAccessException, UnsupportedLookAndFeelException {
        this.model = model;
        startScreen = new StartScreen();
        startScreen.getButton().addActionListener(this); 
        startScreen.getExit().addActionListener(this); 
        startScreen.setVisible(true);
        score = new Score();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if(e.getSource().equals(startScreen.getExit()) || (firstScreen != null && e.getSource().equals(firstScreen.getExit()))) {           
            if(firstScreen != null) {
                firstScreen.setVisible(false);
                firstScreen.dispose();
            }
            else {
                startScreen.setVisible(false);
                startScreen.dispose();
            }
        }       
        else if (finalScreen!=null && (e.getSource().equals(finalScreen.getBtn()))) {
            System.exit(0);
        }
        else if(e.getSource().equals(startScreen.getButton())) {
            startScreen.setVisible(false);
            startScreen.dispose();
            firstScreen = new FirstScreen(model, 0);
            firstScreen.setVisible(true);

            firstScreen.getBtn().addActionListener(this);
            firstScreen.getExit().addActionListener(this);
            firstScreen.getHighcharts().addActionListener(this);
            firstScreen.getFusioncharts().addActionListener(this);
            firstScreen.getGoogleAPI().addActionListener(this);
            firstScreen.getVisualizationAPI().addActionListener(this);
            firstScreen.getEasyCharts().addActionListener(this);
            firstScreen.getJqplot().addActionListener(this);
            firstScreen.getBfo().addActionListener(this);
            firstScreen.getChartfx().addActionListener(this);
            firstScreen.getBtn().setEnabled(false);
        }
        else if (e.getSource().equals(firstScreen.getBtn())) {  
            model.increaseCounter();
            if(model.getCounter() >= 9) {
                finalScreen = new FinalScreen(score);
                finalScreen.getBtn().addActionListener(this);
                firstScreen.getExit().addActionListener(this);
                firstScreen.setVisible(false);
                firstScreen.dispose();
            }
            else {
                int temp = model.getCounter();
                firstScreen.setVisible(false);
                firstScreen.dispose();
                firstScreen = null;
                firstScreen = new FirstScreen(model, temp);
                firstScreen.setVisible(true);
            }
            firstScreen.getBtn().addActionListener(this);
            firstScreen.getExit().addActionListener(this);
            firstScreen.getHighcharts().addActionListener(this);
            firstScreen.getFusioncharts().addActionListener(this);
            firstScreen.getGoogleAPI().addActionListener(this);
            firstScreen.getVisualizationAPI().addActionListener(this);
            firstScreen.getEasyCharts().addActionListener(this);
            firstScreen.getJqplot().addActionListener(this);
            firstScreen.getBfo().addActionListener(this);
            firstScreen.getChartfx().addActionListener(this);
            firstScreen.getBtn().setEnabled(false);

            if(model.getCounter() == 8) {
                firstScreen.getBtn().setText("Finish");
            }

        }   
        else if(e.getSource().equals(firstScreen.getHighcharts())) {
            if(firstScreen.getCounter() == 0) {
                score.setHighcharts(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setHighcharts(2);
            }
            else {
                score.setHighcharts(1);
            }   
            firstScreen.getHighcharts().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
        else if(e.getSource().equals(firstScreen.getFusioncharts())) {
            if(firstScreen.getCounter() == 0) {
                score.setFusioncharts(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setFusioncharts(2);
            }
            else {
                score.setFusioncharts(1);
            }
            firstScreen.getFusioncharts().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
        else if(e.getSource().equals(firstScreen.getGoogleAPI())) {
            if(firstScreen.getCounter() == 0) {
                score.setGoogleAPI(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setGoogleAPI(2);
            }
            else {
                score.setGoogleAPI(1);
            }
            firstScreen.getGoogleAPI().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
        else if(e.getSource().equals(firstScreen.getVisualizationAPI())) {
            if(firstScreen.getCounter() == 0) {
                score.setVisualization(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setVisualization(2);
            }
            else {
                score.setVisualization(1);
            }
            firstScreen.getVisualizationAPI().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
        else if(e.getSource().equals(firstScreen.getEasyCharts())) {
            if(firstScreen.getCounter() == 0) {
                score.setEasyCharts(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setEasyCharts(2);
            }
            else {
                score.setEasyCharts(1);
            }
            firstScreen.getEasyCharts().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
        else if(e.getSource().equals(firstScreen.getJqplot())) {
            if(firstScreen.getCounter() == 0) {
                score.setJqplot(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setJqplot(2);
            }
            else {
                score.setJqplot(1);
            }
            firstScreen.getJqplot().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
        else if(e.getSource().equals(firstScreen.getBfo())) {
            if(firstScreen.getCounter() == 0) {
                score.setBfo(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setBfo(2);
            }
            else {
                score.setBfo(1);
            }
            firstScreen.getBfo().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
        else if(e.getSource().equals(firstScreen.getChartfx())) {
            if(firstScreen.getCounter() == 0) {
                score.setChartfx(3);
            }
            else if(firstScreen.getCounter() == 1) {
                score.setChartfx(2);
            }
            else {
                score.setChartfx(1);
            }

            firstScreen.getChartfx().setEnabled(false);
            firstScreen.increaseCounter();
            if(firstScreen.getCounter()==3) {
                firstScreen.disableAll();
            }           
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:54:31.793

确保在您的 main 方法中，您正在事件调度线程的上下文中加载主框架

```
public static void main(String args[]) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            //.. Create UI
        }
    });
} 
```

此外，我会在创建任何 UI 组件之前设置 LookAndFeel。它不太可能产生任何重大影响，但它并不是真正设计为在中游切换

# sql - 插入关系结构

> ID：13018016
> 
> 赞同：1
> 
> 时间：2012-10-22T19:03:49.410
> 
> 标签：sql, sql-server, database, insert, relational-database

我们应该创建关系数据库，而不是平面结构。您创建与其他表有关系的表。您进行规范化以删除重复，并进行反规范化以提高性能。这一切都说得通。但是，我很难找到一个好的机制来插入关系结构。是否没有将记录插入关系结构的良好机制。有没有类似的东西：

`INSERT INTO x LEFT JOIN y ON x.id = y.id VALUES(...)?`

我能想到的最好的方法是一个存储过程：

```
INSERT INTO x
SELECT id FROM x (or @@id)
INSERT INTO y 
```

这似乎与整个关系模型背道而驰......

它相当于没有连接的插入。我们会忍受不得不进行多项选择并将结果自己连接在一起吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:39:16.153

> 您进行规范化以删除重复，并进行反规范化以提高性能。

您进行规范化以删除某些类型的更新异常。您进行非规范化以提高 SELECT 性能，通常以牺牲更新性能和更新异常为代价。

关系模型本身不仅支持可更新视图，它还*需要*可更新视图。但据我所知，这仍然是一个研究领域；技术问题很严重，尤其是在大多数情况下您必须支持对视图的更新时。

当前的 SQL 产品充其量只能提供有限的支持。（而且 SQL 离关系型还有很远的距离。）多年来，我认为如果我们想要可更新的视图，我们都已经开始期望必须编写触发器。

在某些时候，无论您是在应用程序代码、触发器还是存储过程中执行此操作，您都会发现自己卡在事务中包含多个 INSERT 语句。

# asp.net-web-api - mvc webapi 跨域发帖

> ID：13018020
> 
> 赞同：15
> 
> 时间：2012-10-22T19:03:58.380
> 
> 标签：asp.net-web-api, cors

> **可能重复：**
> [CORS 与 WebAPI for XmlHttpRequest](https://stackoverflow.com/questions/12732147/cors-with-webapi-for-xmlhttprequest)

我正在尝试将跨域 ajax 发布到我的 webApi 项目。我对此几乎没有什么问题：
1\. 在更改我的 webapi 操作之前，我总是收到 204 错误

```
public void submit(Submission model) 
```

至

```
public bool submit(Submission model) 
```

不知道为什么，但现在我得到`200 OK`状态

2。仍然是我的 ajax 触发错误回调。

3.很久以前我通过添加解决了这种跨域发帖的错误

```
HttpContext.Response.AddHeader("Access-Control-Allow-Origin", "*"); 
```

到我的控制器。但现在在 webApi 中，我是天生的`: ApiController` ，这个技巧不起作用。`Error an object reference is required for the non-static field, method, or property"System.Web.HttpContext.Response.get"`

向我展示了我尝试发布的编译器，`dataType: 'JSONP'`但我得到了空模型。

这是Javascript请求：

```
变种模型 = {
        "类型": $("#model-type").val(),
        "主题": $("#subject-text").val(),
        "正文": $("#body-text").val()
    };

    $.ajax({
        类型：“发布”，
        数据类型：'JSONP'，
        url: $("#submit-url").val(),
        数据：模型，
        成功：函数（）{
            alert("提交成功");
        },
        错误：函数（）{
            alert("错误...");
        }
    });

```

我做错了什么？

## 解决了

感谢大家帮助我。我在其中一个评论链接中找到了解决方案。我使用了以下方法，我觉得这很简单。

资料来源：
[在 ASP.NET Web API 中实现 CORS 支持](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)

我做了什么：

1\. 在我的项目中创建了新类：`CorsHandler.cs`并复制粘贴以下代码：

```
 public class CorsHandler : DelegatingHandler
    {
        const string Origin = "Origin";
        const string AccessControlRequestMethod = "Access-Control-Request-Method";
        const string AccessControlRequestHeaders = "Access-Control-Request-Headers";
        const string AccessControlAllowOrigin = "Access-Control-Allow-Origin";
        const string AccessControlAllowMethods = "Access-Control-Allow-Methods";
        const string AccessControlAllowHeaders = "Access-Control-Allow-Headers";

        protected override Task SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            bool isCorsRequest = request.Headers.Contains(Origin);
            bool isPreflightRequest = request.Method == HttpMethod.Options;
            if (isCorsRequest)
            {
                if (isPreflightRequest)
                {
                    return Task.Factory.StartNew(() =>
                    {
                        HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.OK);
                        response.Headers.Add(AccessControlAllowOrigin, request.Headers.GetValues(Origin).First());

                        string accessControlRequestMethod = request.Headers.GetValues(AccessControlRequestMethod).FirstOrDefault();
                        if (accessControlRequestMethod != null)
                        {
                            response.Headers.Add(AccessControlAllowMethods, accessControlRequestMethod);
                        }

                        string requestedHeaders = string.Join(", ", request.Headers.GetValues(AccessControlRequestHeaders));
                        if (!string.IsNullOrEmpty(requestedHeaders))
                        {
                            response.Headers.Add(AccessControlAllowHeaders, requestedHeaders);
                        }

                        return response;
                    }, cancellationToken);
                }
                else
                {
                    return base.SendAsync(request, cancellationToken).ContinueWith(t =>
                    {
                        HttpResponseMessage resp = t.Result;
                        resp.Headers.Add(AccessControlAllowOrigin, request.Headers.GetValues(Origin).First());
                        return resp;
                    });
                }
            }
            else
            {
                return base.SendAsync(request, cancellationToken);
            }
        }
    } 
```

2.  打开我的`Global.asax`并修改 `Application_Start`：

```
 protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            GlobalConfiguration.Configuration.MessageHandlers.Add(new CorsHandler());
        } 
```

注意最后一行。

这种方法与 MVC3 和 .NET 4.0 兼容。效果很好，现在我可以在 ajax 中处理“成功”和“错误”回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:02:54.027

分别回答你的问题：

1.  状态 204 不是错误，这意味着没有要返回的内容，但一切都很好。[这是RFC2616](https://www.rfc-editor.org/rfc/rfc2616#section-10.2.5)中 204 的定义

> 10.2.5 204 无内容

> 服务器已完成请求，但不需要返回实体主体，并且可能希望返回更新的元信息。响应可能包括实体头形式的新的或更新的元信息，如果存在，应该与请求的变体相关联。
> 
> 如果客户端是用户代理，它不应该改变导致请求被发送的文档视图。这个响应主要是为了允许输入动作发生而不导致用户代理的活动文档视图发生变化，尽管任何新的或更新的元信息应该应用于当前在用户代理的活动视图中的文档。
> 
> 204 响应不能包含消息体，因此总是由头字段之后的第一个空行终止。

2.  你能说出你遇到的错误是什么吗？ASP.NET Web API 当前没有开箱即用的 JSONP 格式化程序。这是一些第三部分的实现：

*   [http://www.west-wind.com/weblog/posts/2012/Apr/02/Creating-a-JSONP-Formatter-for-ASPNET-Web-API](http://www.west-wind.com/weblog/posts/2012/Apr/02/Creating-a-JSONP-Formatter-for-ASPNET-Web-API)
*   [http://www.nuget.org/packages/WebApi.JsonP](http://www.nuget.org/packages/WebApi.JsonP) 我希望他们有所帮助。

3.  在 Web API 中，您引用响应的方式不是通过 HttpContext。有多种访问方式。

第一种选择是直接定义动作返回 HttpResponse。

```
 public HttpResponseMessage Get(int id)
    {
        var response = this.Request.CreateResponse();
        response.StatusCode = HttpStatusCode.OK;
        response.Headers.Add("Access-Control-Allow-Origin", "*");

        return response;
    } 
```

第二种选择是使用 ActionFilter：

```
// define action filter for cross domain
public class CrossDomainActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        bool needCrossDomain = true;

        if (needCrossDomain)
        {
            actionExecutedContext.Response.Headers.Add("Access-Control-Allow-Origin", "*");
        }

        base.OnActionExecuted(actionExecutedContext);
    }
}

// At Controller
// GET api/values/5
[CrossDomainActionFilter]
public string Get(int id)
{
    return "value";
} 
```

最后一个选项是使用[MessageHandler](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)：

```
public class CrossDomainMessageHandler : DelegatingHandler
{
    protected async override Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request, 
        CancellationToken cancellationToken)
    {
        var response = await base.SendAsync(request, cancellationToken);
        response.Headers.Add("Access-Control-Allow-Origin", "*");

        return response;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:18:32.280

如果您想从 ajax 向另一个域发送信息，那么您需要使用 jsonp（注意这仅适用于 get 请求而不是 post 请求）。另一种选择（如果您控制两个域）是使用 ARR（应用程序请求路由）来欺骗浏览器认为请求是本地的，然后使用 ARR 将请求重写到另一个域。使用这种技术，您可以像平常一样使用简单的 ajax 获取和发布。

# python - 将我的 python 脚本从 lxml 转换为 xml.etree

> ID：13018024
> 
> 赞同：1
> 
> 时间：2012-10-22T19:04:25.647
> 
> 标签：python, lxml, odf, elementtree

我正在尝试将我的脚本（https://github.com/fletchermoore/n2c2）转换为使用默认包 xml.etree 而不是 lxml。这是我的疏忽，但现在我意识到让我的目标受众在他们的 Mac 上设置 lxml 是不可能的。

我认为大多数代码应该只通过切换导入来工作，但是当我尝试它时，我发现 xml.etree 以不同的方式处理命名空间（我不明白）。具体来说，在这里转换 setTagNames 函数的最简单方法是什么。`xml`是从`.fromstring()`方法创建的。

```
def setTagNames(self, xml):
    officens = xml.nsmap['office']
    textns = xml.nsmap['text']
    drawns = xml.nsmap['draw']
    xlinkns = xml.nsmap['xlink']
    stylens = xml.nsmap['style']
    fons = xml.nsmap['fo']

    names = {}
    names['body'] = '{%s}body' % officens
    names['text'] = '{%s}text' % officens
    names['auto-styles'] = '{%s}automatic-styles' % officens
    names['list'] = '{%s}list' % textns
    names['list-item'] = '{%s}list-item' % textns
    names['p'] = '{%s}p' % textns
    names['line-break'] = '{%s}line-break' % textns
    names['tab'] = '{%s}tab' % textns
    names['span'] = '{%s}span' % textns
    names['frame'] = '{%s}frame' % drawns
    names['image'] = '{%s}image' % drawns

    names['href'] = '{%s}href' % xlinkns
    names['name'] = '{%s}name' % stylens
    names['style-name'] = '{%s}style-name' % textns
    names['font-weight'] = '{%s}font-weight' % fons
    names['text-underline-style'] = '{%s}text-underline-style' % stylens
    names['font-style'] = '{%s}font-style' % fons
    names['font-size'] = '{%s}font-size' % fons
    names['background-color'] = '{%s}background-color' % fons
    names['color'] = '{%s}color' % fons

    names['style'] = '{%s}style' % stylens
    names['text-properties'] = '{%s}text-properties' % stylens
    self.names = names
    self.builder.names = names 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:34:04.957

我在另一篇文章中找到了答案：[Accessing XMLNS attribute with Python Elementree？](https://stackoverflow.com/questions/1953761/accessing-xmlns-attribute-with-python-elementree)

我使用 deancutlet 编写的函数来创建 nsmap。我的代码中的其他所有内容似乎无需修改即可工作。

# linq - 哪个查询表达式等效于以下 LINQ 查询？

> ID：13018026
> 
> 赞同：2
> 
> 时间：2012-10-22T19:04:30.267
> 
> 标签：linq, linq-to-objects

> **可能重复：**
> [这两个 LINQ 查询可以互换使用吗？](https://stackoverflow.com/questions/13017642/can-these-two-linq-queries-be-used-interchangeably)

```
var query =  from c_1 in collection_1
             select c_1.collection_2 into c_2
             select c_2.collection_3 into c_3
             select c_3; 
```

相当于

```
 var query = collection_1
            .Select(c_1 => c_1.collection_2)
            .Select(c_2 => c_2.collection_3)
            .Select(c_3 => c_3); 
```

a) 但是哪个查询表达式等同于以下 LINQ 查询：

```
var query = collection_1
            .Select(c_1 => c_1.collection_2
            .Select(c_2 => c_2.collection_3.Select(c_3 => new { c_1, c_2, c_3 } ))); 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:24:20.593

```
var query = from c_1 in collection_1
            select from c_2 in c_1.collection_2
                   select from c_3 in c_2.collection_3
                          select  new { c_1, c_2 c_3 }; 
```

# opencv - 查找三对 2D/2D 通信者的 Homography

> ID：13018028
> 
> 赞同：2
> 
> 时间：2012-10-22T19:04:48.757
> 
> 标签：opencv, computer-vision, homography

我在一张图像中有三个特征点，在另一张图像中有它们的匹配项。

我的问题是如何找到将这些匹配相互关联的单应性？我知道我应该解决 P3P 问题。但我不知道为此目的究竟如何规范化点集。解决 P3P 后，我应该如何获得 Homography 矩阵。

假设我的相机内在参数是已知的。之后，我想计算 6DOF 刚性变换并将图像 1 中的每个任意点映射到图像 2。

值得一提的是，我不想使用像 cv::findHomography() 这样的 OpenCV 原生函数

如果您回答清楚完整，我将不胜感激。因为我按照[此处](http://nghiaho.com/?page_id=671)和[此处](http://iplimage.com/blog/p3p-perspective-point-overview/#comment-60)的说明进行操作，但没有得到正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:11:00.063

我假设您指的是转型。如果是这种情况，请参见下文。

可以使用solvePnP找到从物体（目标板）到cmaera坐标系的旋转（R）和（t）。基于这个想法，可以分别为图像 1 和 2 找到 R1, t1 和 R2, t2。可以如下计算相对变换（从图像 2 到图像 1）。

相对旋转 = inv(R1) * R2 相对平移 = inv(R1) * (t2 - t1)

# java - JAXB 和 Jersey - 返回扩展抽象类的对象列表

> ID：13018029
> 
> 赞同：1
> 
> 时间：2012-10-22T19:04:56.730
> 
> 标签：java, rest, jakarta-ee, jaxb, jersey

我正在创建一个 REST 服务，我想返回一个对象列表。所以我得到了这样的东西：

```
@GET    
@Produces(MediaType.APPLICATION_XML)
@Path("items/")
@XmlElementWrapper(name = "items")
public List<AClass> getItems() {            

    List<AClass> list = db.getItems();      
    return list;

} 
```

其中 db.getItems() 返回一个对象列表，这些对象是 AClass 的一种子类。AClass 是一个抽象类。对象添加了更多字段。但是这些附加字段不是在 XML 中生成的。我怎样才能让它们出现在结果中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:45:58.523

你看过[XmlSeeAlso](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlSeeAlso.html)吗？该注释将允许您绑定子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T15:39:14.427

// 客户

```
package com.project.rest.model;

import java.util.HashSet;
import java.util.Set;

public class Client {

    private Long id;
    private String email;
    private String lang;

    public Client() {
    }

    public Client(Long id) {
    this.id = id;
    }

    public Client(Long id, String email, String lang) {
    this.id = id;
    this.email = email;
    this.lang = lang;
    }

    public Long getId() {
    return id;
    }

    public void setId(Long id) {
    this.id = id;
    }

    public String getEmail() {
    return email;
    }

    public void setEmail(String email) {
    this.email = email;
    }

    public String getLang() {
    return lang;
    }

    public void setLang(String lang) {
    this.lang = lang;
    }

    @Override
    public String toString() {
    return "Client [id=" + id + ", email=" + email + ", lang=" + lang + "]";
    }

} 
```

//客户服务

```
package com.project.rest;

import java.util.List;

import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

import com.project.rest.model.Client;

@Path("/client")
public class ClientService {

    @POST
    @Path("/sendList")
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response consumeJSONList(List<Client> clientList) {

        String output = "consumeJSONList Client : " + clientList.toString() + "\n\n";

        return Response.status(200).entity(output).build();
    }

} 
```

//JerseyClient

```
package com.project.rest;

import java.util.ArrayList;
import java.util.List;

import javax.ws.rs.core.MediaType;

import com.project.rest.model.Client;
import com.project.rest.model.Device;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;
import com.sun.jersey.api.json.JSONConfiguration;

public class JerseyClient {

public static void main(String[] args) {

try {

    List<Client> clientList = new ArrayList<Client>();
    clientList.add(new Client(1L, "pruebas@pruebas.com", "es"));
    clientList.add(new Client(2L, "pruebas@pruebas.com", "es"));
    clientList.add(new Client(3L, "pruebas@pruebas.com", "es"));

    ClientConfig clientConfig = new DefaultClientConfig();

    clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);

    com.sun.jersey.api.client.Client c = com.sun.jersey.api.client.Client.create(clientConfig);

    WebResource webResource = c.resource("http://localhost:8080/project_rest/rest/client/sendList");

    ClientResponse response = webResource.accept("application/json").type("application/json").post(ClientResponse.class, clientList);

    if (response.getStatus() != 200) {
    throw new RuntimeException("Failed sendClientList: HTTP error code : " + response.getStatus());
    }

    String output = response.getEntity(String.class);

    System.out.println("sendClientList... Server response .... \n");
    System.out.println(output);

} catch (Exception e) {

    e.printStackTrace();

}
}
} 
```

//POM.xml

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.8.2</version>
    <scope>test</scope>
</dependency>

<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-bundle</artifactId>
    <version>1.10-b01</version>
</dependency>

<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.17.1</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-core</artifactId>
    <version>1.17.1</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-servlet</artifactId>
    <version>1.17.1</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.18.1</version>
</dependency>
<dependency>
  <groupId>com.owlike</groupId>
  <artifactId>genson</artifactId>
  <version>0.99</version>
</dependency> 
```

# .htaccess - Htaccess 从子目录重定向到根目录

> ID：13018031
> 
> 赞同：0
> 
> 时间：2012-10-22T19:04:57.953
> 
> 标签：.htaccess, redirect

我正在寻找一个 htaccess 代码来重定向我的网址，如下所示：

```
http://01.mydomain.com/subdir/xyz [OR]
http://www.01.mydomain.com/subdir/xyz [OR]
http://02.mydomain.com/subdir/xyz [OR]
http://www.02.mydomain.com/subdir/xyz
TO : http://www .mydomain.com/xyz 
```

在这种情况下`xyz`是动态的，可以是任何值。并且`subdir`是恒定的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:08:40.020

假设`subdir`是常数，下面是一种方式：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^01.mydomain.com [OR]
RewriteCond %{HTTP_HOST} ^www.01.mydomain.com [OR]
RewriteCond %{HTTP_HOST} ^02.mydomain.com [OR]
RewriteCond %{HTTP_HOST} ^www.02.mydomain.com
RewriteRule ^subdir/(.*)$ http://www.mydomain.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:08:15.943

```
RewriteRule ^/subdir/(.*)/?$ /$1 [R=301,L] 
```

# twig - Twig- 包含来自其他目录的模板

> ID：13018034
> 
> 赞同：7
> 
> 时间：2012-10-22T19:05:04.323
> 
> 标签：twig

是否可以包含一个模板，`{% include %}`该模板位于以下定义的模板路径之外：

```
$template = $twig->loadTemplate('example.tpl'); 
```

我问它是因为这条线不起作用：

```
{% include '.../example/navbar_left.tpl' %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T03:11:11.523

不，使用 是不可能的`Twig_Loader_Filesystem`，因为它明确拒绝包含`..`在内部的模板名称。这可以通过`validateName($name)`file 内部函数的定义来验证`Twig/lib/Twig/Loader/Filesystem.php`。

如果您需要访问路径之外的模板，我能想到的唯一干净的解决方案是[创建自己的 loader](http://twig.sensiolabs.org/doc/api.html#create-your-own-loader)。

一个可行的解决方法是在实际注册的文件夹中定义一个符号链接`Twig_Loader_Filesystem`，指向您要访问的目录。小心**使用**这种方法，将链接指向一个安全的地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T19:28:47.100

您可以将路径添加到 Twig 加载程序（文件系统加载程序），请参阅 Fabien 的最后回复（您需要 addPath 方法） [https://github.com/symfony/symfony/issues/1912](https://github.com/symfony/symfony/issues/1912)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-10T14:45:48.213

您可以通过以下方式添加更多路径： [https ://symfony.com/doc/3.4/templating/namespaced_pa​​ths.html](https://symfony.com/doc/3.4/templating/namespaced_paths.html)

**配置.yml**

```
# Twig Configuration
twig:
  paths:
    '%kernel.root_dir%/../src/AppBundle/Resources/views': AppBundle
    '%kernel.root_dir%/../web/': 'WEB_DIR_DIST' #your new custom path 
```

**someFile.html.twig**

```
<script>{{ source('@WEB_DIR_DIST' ~ 'custom.js') }}</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-05T10:27:37.600

您可以将第二条路径添加到您的 twig.yaml (symfony 4.4)

```
twig:
    paths:
        - '%kernel.project_dir%/templates'
        - '%kernel.project_dir%/example' 
```

然后只需使用名称`{% include 'navbar_left.tpl' %}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-07T18:37:47.677

可以通过符号链接。

# Symfony3 的示例

从`src/AppBundle/Resources/views/Admin`

Ubuntu：

```
ln -s ./../../../../../web/admin/_index-import-body.html index-import-body.html.twig 
```

视窗：

```
mklink index-import-body.html.twig ./../../../../../web/admin/_index-import-body.html 
```

然后像往常一样将它包含`index-import-body.html.twig`在树枝文件中

```
{% include '@App/Admin/index-import-body.html.twig' %} 
```

# iphone - iPhone App - 使用和存储联系人照片最佳实践

> ID：13018039
> 
> 赞同：0
> 
> 时间：2012-10-22T19:05:32.417
> 
> 标签：iphone, ios6

我想知道是否有人对在应用程序中使用联系人照片有任何最佳做法或建议。本质上，我正在构建一个模仿给定联系人应用程序的应用程序，除了我的应用程序将提供联系人及其照片 - 这样用户就不必添加联系人等。

我可以让我的应用程序读取联系信息的 XML 文件，尽管我可以将其更改为从 Web 服务器提供的 JSON 内容 - 现在 XML 在应用程序中用于测试目的，我必须阅读 JSON。此 XML 文件仅包含联系信息，我还显示了支持文件中的联系人照片以用于测试目的。

什么是服务器联系人照片的好方法？任何最佳实践或建议？我应该将照片存储在用户手机上并仅引用它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:10:54.137

嗨，对于这种情况，请使用延迟加载

签出这个[LazyloadingSample](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/index.html)

# macos - Mac OS zsh 上的 Disown、nohup 或 & ……没有按预期工作

> ID：13018041
> 
> 赞同：2
> 
> 时间：2012-10-22T19:05:48.710
> 
> 标签：macos, sleep, zsh, background-process

你好。我是 shell 新手，正在编写我的第一个组合脚本。我已经阅读了整个 intertube 和 SO，并且有很多很多地方`disown`解释了`nohup`,`&`和`return`，但有些东西对我不起作用。

我想要一个更简单的计时器。该脚本要求用户输入小时、分钟等，然后：

```
echo "No problem, see you then…"
sleep $[a*3600+b*60+c] 
```

此时（在第一行或第二行，不确定）我希望脚本或脚本中的特定命令成为后台进程。也许是一个守护进程？这样计时器仍然会按计划进行，即使

*   该终端窗口已关闭*   终端应用程序完全退出*   计算机进入睡眠状态（我意识到我可能还需要一些不同的代码来唤醒 Mac 本身）

同样在“没问题”行之后，我想要一个`return`命令，以便现有的 shell 窗口在此期间仍然有用。

终端通知器命令（定时器唤醒）在上述某些用法下立即被调用（我现在不记得是哪个），然后在正确的时间发出第二个通知。在任何地方使用该`return`命令基本上似乎退出了脚本。

我不清楚的一件事是 , 等是否/如何`disown`适用`nohup`于命令进程与脚本进程，即它们中的任何一个是否只能在脚本中的命令上正常工作（如果不是，如何将脚本初始化为仍然要求输入的后台进程）。

也许我应该使用一些替代方法`sleep`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T23:07:27.063

无需使用单独的脚本或让脚本自行运行以使其一部分在后台运行。

一个更简单的方法是将您想要作为背景的部分（睡眠和后续命令）放在括号内，并在它们后面加上一个＆符号。

所以脚本的结尾看起来像：

```
(
  sleep $time
  # Do whatever
)& 
```

这将导致该部分代码在放置在后台的子shell中运行，因为在此之后没有代码，第一个shell将立即退出，将控制权返回给您的交互式shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:14:19.833

当您的脚本运行时，它实际上是通过启动一个新的 shell 来执行它来运行的。为了让您的脚本进入后台，您需要将该 shell 发送到后台，您不能这样做，因为您需要与其父 shell 进行通信。

您可以做的是让您的脚本使用特殊参数调用自身，以指示它应该完成工作：

```
#! /bin/zsh
if [ "$1" != '--run' ] ; then
    echo sending to background
    $0 --run $@ &
    exit
fi
sleep 1
echo backgrounded $@ 
```

该脚本首先检查其第一个参数是否为`--run`. 如果不是，那么它`$0`使用该参数和它`$@`在后台接收的所有其他参数 () 调用自身 ()，然后退出。您可以使用类似的方法，在您想进入后台时执行测试，并可能发送您需要的数据而不是每个参数。例如，仅发送秒数：

```
$0 --run $[a*3600+b*60+c] & 
```

# django - Django模型继承使用mptt

> ID：13018042
> 
> 赞同：2
> 
> 时间：2012-10-22T19:05:49.523
> 
> 标签：django, models, mptt

我正在构建一个具有嵌套树分类的模型。词汇表`Entity`继承自抽象基类`TreeVocabulary`。还有一个类`SpecialEntity`，它继承自`Entity`. `SpecialEntity`里面应该有几个额外的字段。

`Entity`并且`SpecialEntity`都应该是树，为此我使用 mptt [http://django-mptt.github.com/django-mptt/](http://django-mptt.github.com/django-mptt/)。其中`Entity`应该有一个记录，其中有子`SpecialEntity`元素（这些子元素是 中的根元素`SpecialEntity`）。

这就是我的想象：

```
class Vocabulary(models.Model):
    name= models.CharField(max_length=300)
    order= models.IntegerField(default=100)
    class Meta:
        abstract= True

class SpecialType(Vocabulary):

class TreeVocabulary(MPTTModel):
    parent= TreeForeignKey('self', null=True, blank=True,
        related_name='children', limit_choices_to=Q(parent__isnull=True))
    class MPTTMeta:
        order_insertion_by= ('name',)
    class Meta:
        abstract= True

class Entity(TreeVocabulary):

class SpecialEntity(Entity):
    code= models.CharField(max_length=50)
    type= models.ForeignKey(SpecialType)
    class Meta:
        ordering= ('code',) 
```

现在，问题是由于某种原因`SpecialEntity`转义了 mptt:`sqlall`显示了一个没有其中的普通表`parent_id`。虽然它存在于 中`Entity`，但它直接继承自`TreeVocabulary`.

它是 django-mptt 中的错误吗？或者也许这是一个糟糕的设计？我不是要求为我设计它，而是指出正确的方向

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:43:42.423

好的，经过简短调查后回答我自己的问题。

在 mptt 中可以进行多表继承，但任何子项的所有 mptt 字段（父、lft、rght、级别等）都应存储在一个（显然是父）表中。

考虑到Modified Preorder Tree Traversal的原理，是合理的。

对于我在数据库中的问题中的示例，将创建：

*   特殊类型（普通表）

*   entity - 具有 mptt 字段的树结构，包含模型 Entity 和 SpecialEntity 的数据

*   specialentity - 具有实体外键的普通表，仅包含特定于 SpecialEntity 的字段

# vb.net - 请解释 ChangeUICues

> ID：13018045
> 
> 赞同：2
> 
> 时间：2012-10-22T19:05:54.760
> 
> 标签：vb.net

Microsoft MSDN 中的以下“解释”对我来说在语义上是无效的：

在焦点或键盘用户界面 (UI) 提示更改时发生。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.changeuicues.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.changeuicues.aspx)

任何人都可以提供实质性定义......或描述此事件的资源吗？

即使来自 MSDN 的以下参考资料也无济于事：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.uicues.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.uicues.aspx)

或者

[http://msdn.microsoft.com/en-us/library/system.windows.forms.uicueseventargs.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.uicueseventargs.aspx)

所有这些都假设读者知道 UI Cue 是什么……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:21:08.123

当控件的 UICues 更改时会触发此事件。

什么是 UI 提示？看看[UICuse 枚举文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.uicues.aspx)：

> 此枚举用于指定将显示或更改哪些用户界面提示。例如，当用户按下 ALT 键时，菜单上的键盘快捷键会通过在相应字符下划线来显示。此示例的 UICues 的按位组合是 ShowKeyboard 和 ChangeKeyboard。

换句话说，UI Cue 是软件内部状态用户的视觉指示器，否则可能不明显。例如（与上面不同），当一个按钮具有“焦点”（意味着按下*Enter*或*Return*键将启动相关`Click`事件）时，操作系统会提供一个“UI Cue”，通常是一个围绕按钮边缘的虚线矩形，表示该特定按钮（而不是屏幕上的其他按钮之一）具有键盘焦点。

如果没有这些 UI 提示，用户可能无法确定软件的内部状态，从而导致行为不可预测（例如，当我按下*Enter*时，我不知道会“单击”哪个按钮）。

根据文档（按照上面的链接），WinForms 控件支持以下提示（可以使用按位逻辑组合）：

*   **ShowFocus**焦点矩形在更改后显示。
*   **ShowKeyboard**键盘提示在更改后带有下划线。
*   **显示**的焦点矩形在更改后显示，键盘提示带有下划线。
*   **ChangeFocus**焦点提示的状态已更改。
*   **ChangeKeyboard**键盘提示的状态已更改。
*   **Changed**焦点提示和键盘提示的状态已更改。
*   **无 未**进行任何更改。

# recaptcha - 验证码 IP 地址

> ID：13018047
> 
> 赞同：4
> 
> 时间：2012-10-22T19:05:56.450
> 
> 标签：recaptcha

好的，所以我们在生产中实现了 Recaptcha。我们收到错误是因为它无法到达使用该服务所需的 IP 地址。我们为 IP 地址打开一个端口以访问 Google。没问题。我们这样做并明确配置该 IP 地址以使其正常工作。它工作得很好。然后，第二天，我们又开始收到错误，因为 Recaptcha 使用了*不同*的IP 地址。我也可以允许来自该 IP 地址的请求，但现在我很不安。这些地址来自哪里？如何配置它以可靠地工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:40:24.623

来自 Google 的 Recatpcha 可以使用任何 Google IP 地址，并且有很多。

从 Windows 运行这个：

_netblocks.google.com 文本 = nslookup -type=TXT _netblocks.google.com "v=spf1 ip4:216.239.32.0/19 ip4:64.233.160.0/19 ip4:66.249.80.0/20 ip4:72.14.192.0/18 ip4 :209.85.128.0/17 ip4:66.102.0.0/20 ip4:74.125.0.0/16 ip4:64.18.0.0/20 ip4:207.126.144.0/20 ip4:173.194.0.0/16 ?all"

这就是谷歌目前使用的所有网络。这些可能会发生变化，因此请经常检查它们。

谷歌建议允许端口 80 到所有 IP 出站，这是非常不安全的。他们建议通过代理服务器，但如果您的网络服务器是 DMZ，这又是非常不安全的。代理感知木马确实存在。只需利用漏洞执行任意代码，您可以通过代理服务器在端口 80 上创建反向连接以下载有效负载。然后升级权限并拥有盒子是微不足道的。我不仅指 Windows 服务器，还指 Linux。我已经在实验室环境中完成了安全性。这真的很容易做到。

这是我从谷歌网站得到的：

[http://code.google.com/p/recaptcha/wiki/FirewallsAndRecaptcha](http://code.google.com/p/recaptcha/wiki/FirewallsAndRecaptcha)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-03T18:13:30.793

我想用更多最新信息附加到这个答案。[Chris](https://stackoverflow.com/users/2300531/chris)所指的文档不包括挖掘所需的所有 TXT 记录（感谢 Google）：

*   _netblocks2.google.com（IPv6 子网）
*   _netblocks3.google.com（附加 IPv4 子网）

在我的特殊情况下，_netblocks3 条目包含 2 个大 /19，这使我的初始规则无效

（我在这里找到了其他参考资料： https: [//support.google.com/a/answer/60764?hl=en](https://support.google.com/a/answer/60764?hl=en)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:08:45.290

也许您应该使用主机名而不是 IP

# ruby - 比较匹配字符串的数组

> ID：13018048
> 
> 赞同：2
> 
> 时间：2012-10-22T19:06:00.630
> 
> 标签：ruby, arrays, string, compare, telnet

我有一个脚本可以远程登录到一个盒子里，运行一个命令，然后保存输出。之后我运行另一个脚本，该脚本解析输出文件，将其与位于另一个文件中的关键字进行比较以进行匹配。如果匹配了一行，它应该将整行（从原始 telnet 输出）保存到一个新文件中。

这是处理解析文本的脚本部分：

```
def parse_file
    filter = []
    temp_file = File.open('C:\Ruby193\scripts\PARSED_TRIAL.txt', 'a+')
    t = File.open('C:\Ruby193\scripts\TRIAL_output_log.txt')
    filter = File.open('C:\Ruby193\scripts\Filtered_text.txt').readlines
    t.each do |line|
        filter.each do |segment|
            if (line =~ /#{segment}/)
                temp_file.puts line
            end
        end
    end
    t.close()
    temp_file.close()
end 
```

目前，它只保存位于数组中的最后一个运行字符串`filter`并将其保存到`temp_file`. 看起来循环没有运行数组中的所有字符串，或者没有全部保存。我在文本文件中放置了五个字符串`Filtered_text.txt`。它只会将我最后匹配的行打印到`temp_file`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:27:50.593

这个（未经测试的代码）将复制原始代码，只是更简洁和惯用：

```
filter = Regexp.union(File.open('C:\Ruby193\scripts\Filtered_text.txt').readlines.map(&:chomp))
File.open('C:\Ruby193\scripts\PARSED_TRIAL.txt', 'a+') do |temp_file|
  File.foreach('C:\Ruby193\scripts\TRIAL_output_log.txt') do |l|
    temp_file.puts l if (l[filter])
  end
end 
```

为了让您了解正在发生的事情：

```
Regexp.union(%w[a b c])
=> /a|b|c/ 
```

这为您提供了一个正则表达式，它将遍历字符串以查找任何子字符串匹配项。这是一个区分大小写的搜索。

如果要关闭这些孔，请使用以下内容：

```
Regexp.new(
  '\b' + Regexp.union(
    File.open('C:\Ruby193\scripts\Filtered_text.txt').readlines.map(&:chomp)
  ).source + '\b',
  Regexp::IGNORECASE
) 
```

其中，使用与上面相同的示例输入数组将导致：

```
/\ba|b|c\b/i 
```

# c# - WPF 应用程序启动时的 System.Windows.Markup.XamlParseException

> ID：13018049
> 
> 赞同：1
> 
> 时间：2012-10-22T19:06:00.730
> 
> 标签：c#, wpf

> **可能重复：**
> [.NET 应用程序无法启动和接收 XamlParseException](https://stackoverflow.com/questions/7802176/net-application-cannot-start-and-receive-xamlparseexception)

我有一个 WPF 应用程序，已安装在几台计算机 PC1 和 PC2 上。它是在另一台计算机上开发的。PC1 和 PC2 都已经运行了这个程序的一个副本几个月了，没有任何问题。然后，我在两台 PC 上安装了该程序的新版本，它适用于 PC1，但不适用于 PC2。

在 PC2 上，应用程序甚至无法启动，我不得不使用 Window 的事件查看器来获取错误消息。虽然我不知道如何解释它......

```
Application: Raptor.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Windows.Markup.XamlParseException
Stack:
   at System.Windows.Markup.XamlReader.RewrapException(System.Exception, System.Xaml.IXamlLineInfo, System.Uri)
   at System.Windows.Markup.WpfXamlLoader.Load(System.Xaml.XamlReader, System.Xaml.IXamlObjectWriterFactory, Boolean, System.Object, System.Xaml.XamlObjectWriterSettings, System.Uri)
   at System.Windows.Markup.WpfXamlLoader.LoadBaml(System.Xaml.XamlReader, Boolean, System.Object, System.Xaml.Permissions.XamlAccessLevel, System.Uri)
   at System.Windows.Markup.XamlReader.LoadBaml(System.IO.Stream, System.Windows.Markup.ParserContext, System.Object, Boolean)
   at System.Windows.Application.LoadBamlStreamWithSyncInfo(System.IO.Stream, System.Windows.Markup.ParserContext)
   at System.Windows.Application.LoadComponent(System.Uri, Boolean)
   at System.Windows.Application.DoStartup()
   at System.Windows.Application.<.ctor>b__1(System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(System.Object)
   at System.Threading.ExecutionContext.runTryCode(System.Object)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object)
   at System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.Dispatcher.InvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(System.Windows.Interop.MSG ByRef)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(System.Object)
   at System.Windows.Application.RunInternal(System.Windows.Window)
   at System.Windows.Application.Run(System.Windows.Window)
   at System.Windows.Application.Run()
   at Raptor.App.Main() 
```

我尝试删除此应用程序的新版本并安装旧版本（可在 PC2 上运行）但现在它不想为我工作......

我还尝试使用 PC1 和 PC2 的登录名在第三台 PC 上安装该应用程序。它适用于 PC1 的登录，但同样不适用于 PC2……我完全不知道是什么原因导致的……

# wpf - 在 XAML 中找不到资源时

> ID：13018050
> 
> 赞同：1
> 
> 时间：2012-10-22T19:06:06.337
> 
> 标签：wpf, wpf-controls

好的，我正在阅读 Josh Smith 在 CodeProject 上发布的一篇文章，当然还包括通过添加 XAML、资源等来完成它。我再次看到了我有时在 VS 中看到的内容！

我已经在目录中物理添加了“资源”文件夹，然后将其导入到项目及其内容中，甚至它运行良好，但 VS 一直在唠叨（查找源字典“Resources/RaceHorseDataTemplate.xaml”时出错）

```
<Grid.Resources>
     <ResourceDictionary>
         <ResourceDictionary.MergedDictionaries>
            <!-- this line always has a red line underneath -->
            <ResourceDictionary Source="Resources/RaceHorseDataTemplate.xaml" /> 
         </ResourceDictionary.MergedDictionaries>
... 
```

我是否遗漏了什么或者这是与 VS 相关的问题？我假设应该是我没有做过的事情。任何帮助将不胜感激。

谢谢。

# javascript - javascript canvas：镀铬触摸屏不工作

> ID：13018051
> 
> 赞同：2
> 
> 时间：2012-10-22T19:06:09.827
> 
> 标签：javascript, google-chrome, canvas, html5-canvas, touchscreen

我有一个用画布创建的项目。这个项目在我的 iMac（Safari、Chrome、Opera、IE、Mozilla）上的每个浏览器上都能正常工作。为此，我创建了一个正常的点击功能：

```
$('#canvas').click(function(e) {} 
```

在 Windows7 SmartBoard（使用 Multisync s521-p nec）上打开此项目时，它也可以正常工作，除了在 Chrome 上，您无法触摸它。如果您在 SmartBoard 上用鼠标单击，那根本不是问题，但您只是不能用手指触摸它。因为我的项目将只在这个 SmartBoard 上使用，并且最好在 Chrome 上使用，所以我真的需要解决这个问题，但我不知道如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:18:39.300

使用 Javascript 触摸事件而不是*click*：

[https://developer.mozilla.org/en-US/docs/DOM/Touch_events#Setting_up_the_event_handlers](https://developer.mozilla.org/en-US/docs/DOM/Touch_events#Setting_up_the_event_handlers)

*click*是鼠标操作，因为设备有“鼠标”，所以它是为它保留的。

# objective-c - navigationController.view.superview 到底是什么？

> ID：13018055
> 
> 赞同：0
> 
> 时间：2012-10-22T19:06:39.613
> 
> 标签：objective-c, ios

我的项目在它使用的几个地方都有现有代码，`navigationController.view.superview.frame`并`navigationController.view.superview.center`在当前视图的顶部调整和居中模式视图。当然，我可以将它们用作样板，但老实说，我不知道`navigationController.view.superview`真正指的是什么。是特别的`UINavigationControllers`吗？任何想法/意见将不胜感激。

[编辑] 这是代码：

```
UIStoryboard *sb = self.storyboard;
MyViewController *vc = (MyViewController *)[sb instantiateViewControllerWithIdentifier:@"MyLoginViewController"];
vc.delegate= self;
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:vc];
navController.modalPresentationStyle = UIModalPresentationFormSheet;

[self.navigationController presentModalViewController:navController animated:YES];

navController.view.superview.frame = CGRectMake(
                                                navController.view.superview.frame.origin.x,
                                                navController.view.superview.frame.origin.y,
                                                400.0f,
                                                400.0f
                                                );
navController.view.superview.center = self.view.center; 
```

如果我不为新的模态视图使用导航控制器，我就不必使用“superview”。即，

```
UIStoryboard *sb = self.storyboard;
MyViewController *vc = (MyViewController *)[sb instantiateViewControllerWithIdentifier:@"MyLoginViewController"];
vc.delegate= self;

[self.navigationController presentModalViewController:vc animated:YES];

vc.view.frame = CGRectMake(
                                                vc.view.frame.origin.x,
                                                vc.view.frame.origin.y,
                                                400.0f,
                                                400.0f
                                                );
vc.view.center = self.view.center; 
```

但是，我将无法在后台查看呈现的 vc ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:12:21.423

*   `navigationController`- 这很可能是一个`UINavigationController`. 我说可能是因为您没有提供任何上下文，所以我只能从名称中假设。

*   `navigationController.view`- 导航控制器的视图。

*   `navigationController.view.superview`- 导航控制器的视图的超级视图。即导航控制器视图所在的视图。

*   `navigationController.view.superview.frame`- 导航控制器的视图的超级视图的框架。即导航控制器的视图所在的视图的框架（位置和大小）。

*   `navigationController.view.superview.center`- 导航控制器视图的超级视图中心。即导航控制器视图所在视图的中心（中心点的位置）。

像这样直接使用这些属性是**很难看的。**我无法想象你为什么要像那样深入到视图层次结构的深处来做任何事情。这对我来说是一种[难闻的气味](http://en.wikipedia.org/wiki/Code_smell)。我建议找到解决问题的正确方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:12:43.490

在大多数情况下，这可能是指您的`UIWindow`. 如果您想在屏幕上居中，您可以使用`[UIScreen mainScreen].applicationFrame`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:12:20.400

正如[UIView 的文档中](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/superview)所解释的，该方法`-superview`返回视图层次结构中的视图的超级视图。也就是说，超级视图是包含导航控制器视图的视图。这不是特定于 UINavigationController。

# matlab - 从矩阵中提取行并在 MATLAB 中创建一个新矩阵

> ID：13018057
> 
> 赞同：0
> 
> 时间：2012-10-22T19:06:58.490
> 
> 标签：matlab

我有一个矩阵

```
X = [1 1;2 2;3 3;4 4];
Y = [2 4]; 
```

我希望得到的矩阵`z`只有第 2 行和第 4 行（中的值`Y`）`X`。那是，

```
Z = [2 2;4 4]; 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T19:11:11.930

```
Z = X(Y,:); 
```

在我看来，这是一个很容易研究的问题：“MATLAB 矩阵索引”的[第一个结果](http://www.mathworks.com/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)回答了您的问题，并且有更多关于选择部分 MATLAB 矩阵的一般信息。

# java - 如何在 Java 中设置 AccessControlContext？

> ID：13018059
> 
> 赞同：5
> 
> 时间：2012-10-22T19:07:09.123
> 
> 标签：java, security, unit-testing, mocking

我对 Java 安全性的东西还很陌生，我很难弄清楚如何在谷歌上找到正确的答案。

我有一行代码读取`AccessController.getContext()`.

我想运行一个测试来模拟这个结果。不幸的是，我不知道我在做什么。

如何设置`AccessControlContext`返回者`AccessController.getContext()`？

**更新**

澄清一下，我知道如何模拟接口。AccessController 是一种 Java 安全功能。我无法找出如何设置自己的上下文，以便在调用方法`AccessController.getContext()`时返回我选择的 AccessControlContext。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:56:52.720

好的，我已经想通了。基本上我想做的是：

```
Subject subject = Subject.getSubject(AccessController.getContext()); 
```

为了创建`AccessControlContext`包含 a 的`Subject`，您必须调用尝试获取主题的方法，如下所示：

```
Subject subject = new Subject();  //Set Principles here
Subject.doAs(subject, new PrivilegedAction<Void>()
{
    public Void run()
    {
        Foo.methodThatCaresAboutSubject();
    }
}); 
```

# html - 重复的可移动模式？

> ID：13018065
> 
> 赞同：2
> 
> 时间：2012-10-22T19:07:31.017
> 
> 标签：html, canvas

我已经开始在 HTML5 中学习 Canvas 并且我有一个问题。

我想创建一个重复的可移动模式。（类似于 CSS 中的 background-position 和 background-repeat 。）

我怎样才能做到这一点？

我需要这个来为我的项目创建动画背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:54:12.593

您可以使用几种方法来实现这一点，`putImageData`但您会遭受一些性能损失，最好的方法是使用`drawImage`. 另请注意，第二种方法具有使其从左到右或从右到左的代码。

[http://www.somethinghitme.com/projects/bgscroll/scrolldrawimage.html](http://www.somethinghitme.com/projects/bgscroll/scrolldrawimage.html)

```
var ctx = document.getElementById("canvas").getContext("2d"),
    canvasTemp = document.createElement("canvas"),
    scrollImg = new Image(),
    tempContext = canvasTemp.getContext("2d"),
    imgWidth = 0,
    imgHeight =0,
    imageData = {},
    canvasWidth = 600,
    canvasHeight = 240,
    scrollVal = 0,
    speed =2;

    scrollImg.src = "citybg.png";
    scrollImg.onload = loadImage;

function loadImage(){
    imgWidth = scrollImg.width,
    imgHeight = scrollImg.height;
    canvasTemp.width = imgWidth;
    canvasTemp.height =  imgHeight;    
    render();                
}

function render(){
    ctx.clearRect(0,0,canvasWidth,canvasHeight);

    if(scrollVal >= canvasWidth){
        scrollVal = 0;
    }

    scrollVal+=speed;                   
    ctx.drawImage(scrollImg,canvasWidth-scrollVal,0,scrollVal,imgHeight, 0, 0, scrollVal,imgHeight);
    ctx.drawImage(scrollImg,scrollVal,0,imgWidth, imgHeight);

     // To go the other way instead
     ctx.drawImage(scrollImg,-scrollVal,0,imgWidth, imgHeight);
     ctx.drawImage(scrollImg,canvasWidth-scrollVal,0,imgWidth, imgHeight);

    setTimeout(function(){render();},10);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:37:02.303

你可以做这样的事情。首先创建一个用于移动的函数，并使用 setInterval() 触发该函数 setInterval 方法是定时事件的窗口对象。它在指定的毫秒数内一遍又一遍地执行一个函数或一个表达式。

您可以参考帖子。我使用 html5 画布和音频创建了示例蛇游戏。 [http://www.arungudelli.com/2012/10/html5-canvas-example-snake-game.html](http://www.arungudelli.com/2012/10/html5-canvas-example-snake-game.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:10:40.093

您可以使用 CSS3 为背景图案设置动画。您可以在动画顶部覆盖其他画布元素，并通过切换类使用 JavaScript 控制动画。

[示例 jsfiddle](http://jsfiddle.net/pxfunc/UKwxy/)（[全屏](http://jsfiddle.net/pxfunc/UKwxy/show)）

```
body {
    background:url('http://pattern8.com/images/pattern-thumbs/pattern8-pattern-61c.png');    
}

body.scrollbg {
    -webkit-animation: scrollbg   6s cubic-bezier(.4,0,.2,1) infinite;
    ...(moz,ms,o vendor prefixes)...
    animation: scrollbg   6s cubic-bezier(.4,0,.2,1) infinite;
}

@-webkit-keyframes scrollbg {
      0% { background-position: left  top,    left  top; }
     25% { background-position: right top,    left  bottom; }
     50% { background-position: right bottom, right bottom; }
     75% { background-position: left  bottom, right top; }
    100% { background-position: left  top,    left  top; }
} 
```

也可以看看：

*   [http://thecodeplayer.com/walkthrough/pure-css3-animated-clouds-background](http://thecodeplayer.com/walkthrough/pure-css3-animated-clouds-background)
*   [http://lab.simurai.com/space-cacss/](http://lab.simurai.com/space-cacss/)
*   [http://www.mightymeta.co.uk/demos/css3-animated-vignette-buttons/](http://www.mightymeta.co.uk/demos/css3-animated-vignette-buttons/)
*   [http://twitter.github.com/bootstrap/components.html#progress](http://twitter.github.com/bootstrap/components.html#progress)
*   [http://www.red-team-design.com/wp-content/uploads/2011/11/css3-slick-progress-bars-demo.html](http://www.red-team-design.com/wp-content/uploads/2011/11/css3-slick-progress-bars-demo.html)

[支持广泛可用（无 IE < 10）](http://caniuse.com/#search=keyframe)

对于 IE 支持，您可以使用类似这样的[画布动画模板](http://www.html5canvastutorials.com/advanced/html5-canvas-animation-stage/)

# javascript - javascript方法在本地工作，但不在服务器上

> ID：13018066
> 
> 赞同：0
> 
> 时间：2012-10-22T19:07:35.350
> 
> 标签：javascript, asp.net

以下 JavaScript 方法在本地机器上运行良好，但在将其上传到 GoDaddy 服务器后返回错误：

```
//add to saved profiles
function addFav() {
    /* opens a dialog */
    $("#addFavourite").dialog("open");
    /* error occurs in the next line */
    var profileName = document.getElementById("MainContent_lblMainName").textContent;
    SendMessageWebService.saveProfile(profileName);
}; 
```

我正在使用 google chrome 浏览器进行调试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:47:17.020

尝试使用标签的 innerHTML 属性。您是否引用了正确的 javascript 文件？如果您以编程方式引用 lblMainName 会更好：

```
var profileName = document.getElementById("<%= lblMainName.ClientID %>").InnerHTML; 
```

# android - 如何更改 Android 源代码中的 ro.build.version.release？

> ID：13018071
> 
> 赞同：0
> 
> 时间：2012-10-22T19:08:07.190
> 
> 标签：android, properties

我为熊猫板构建了自定义 ROM。我想更改/自定义`ro.build.version.release`.

1.  我换`PLATFORM_VERSION := 4.0.4.0.4.0.4`了**`build/core/version_defaults.mk`**。正确更新构建时打印的构建版本。但是在重新刷新引导映像后，`ro.build.version.release`熊猫板上的那个仍然是旧的。
2.  我添加`BOARD_KERNEL_CMDLINE += androidbuild.version.release=4.0.4.0.19`到**`device/ti/panda/Boardconfig.mk`**，但这并没有成功。
3.  我最终添加`setprop ro.build.version.release 4.0.4.0.19`了规则**`init.omap4pandaboard.rc`**，`post-fs-data`但这绝对不干净......

有谁知道这个android属性可以在哪里更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:40:49.137

好吧，我的错。**`boot`**尽管 ro.build.version.release 似乎在图像中，但我重新刷新了**`system`**图像。所以上面的解决方案1是正确的......

# css - 使用 CSS 和 DIV，你如何在一个大内容框旁边堆叠两个小内容框

> ID：13018072
> 
> 赞同：-2
> 
> 时间：2012-10-22T19:08:13.547
> 
> 标签：css, css-float

如何使用 CSS 将我的三个 div 标签排列成这样？

两个小内容框相互堆叠，一个大内容框（右侧）之间（左侧）有一个小空间

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:11:44.770

使用 div 在左侧包含您的两个小并制作此 div `float:left;`。您可能还想给这个 div 一个固定的宽度。然后你可以把你的大 div 放在右边，使用`margin-right:x;`x 作为你必须根据情况调整的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:32:43.443

我通常将左侧 div 包装在另一个 div 中以保持一切整洁。你可以使用这个 CSS：

```
#left{
    float:left;
    width: 45%;
}
#left1{
    background-color:#ff0;    
    height: 100px;
}
#left2{
    background-color:#f0f;    
    height: 100px;  
}
#right{
    background-color:#0ff;    
    width: 50%;
    height: 200px;
    float:right;
 } 
```

这个HTML：

```
​&lt;div id="left">
    <div id="left1">stuff</div>
    <div id="left2">more stuff</div>
</div>
<div id="right">even more stuff</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

查看[http://jsfiddle.net/XnBe9/](http://jsfiddle.net/XnBe9/)

# jpa-2.0 - 使用batoo而不在persistence.xml中声明类

> ID：13018073
> 
> 赞同：0
> 
> 时间：2012-10-22T19:08:15.283
> 
> 标签：jpa-2.0

我想尝试新的 Batoo JPA api。但我想知道 Batoo 是否也可以在没有在 persistence.xml 中定义实体类的情况下工作。如果您从 persistence.xml 中删除标签（例如： org.batoo.jpa.community.test.t1.Service ），测试用例 org.batoo.jpa.community.test.t1.T1 将失败，尽管此 Service 类已正确注释@Entity 注释！我认为后者对于 JPA 规范应该足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:16:44.750

不，不能保证在 Java SE 环境中使用 @Entity 进行注释就足够了。在 JPA 2.0 规范中，这是用以下词语来说明的：

> 必须在 Java SE 环境中指定所有命名的托管持久性类的列表以确保可移植性。可移植 Java SE 应用程序不应依赖此处描述的其他机制来指定持久性单元的托管持久性类。持久性提供者可能要求必须在 Java SE 环境中的每个 persistence.xml 文件中完全枚举要管理的实体类和类集。

# c# - 通用 Linq 数据方法

> ID：13018076
> 
> 赞同：1
> 
> 时间：2012-10-22T19:08:20.087
> 
> 标签：c#, linq, dynamic, reflection

我想创建一个通用方法，根据给定的参数从 Linq 获取数据，例如：table、field1 和 field2。

将使用一种方法代替这两种特定方法，例如：

```
public void DistributeCB(ComboBox cb)
    {
        BooksDBDataContext db = new BooksDBDataContext();
        Type T = db.GetType();

        //Authors table
        var data =db.Authors.Select(author => new
        {
            Id = author.AuthorId, //field 1
            Value = author.AuthorName //field 2
        });
        cb.ValueMember = "Id";
        cb.DisplayMember = "Value";
        cb.DataSource = data;
    }

    public void DistributeCB2(ComboBox cb)
    {
        BooksDBDataContext db = new BooksDBDataContext();

        //Publishers table
        var data = db.Publishers.Select(publisher => new
        {
            Id = publisher.PublishingId, //field 1
            Value = publisher.PublishingName //field 2
        });
        cb.ValueMember = "Id";
        cb.DisplayMember = "Value";
        cb.DataSource = data;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:24:47.380

好吧，如果您不介意将实体作为泛型类型而不是字符串参数传递，您可以尝试：

对于 Linq 到实体：

```
public void Distribute<TEntity>(ComboBox cb, 
                                DbContext db, 
                                string valueField, 
                                string displayField) 
                        where TEntity : class
{

    //Publishers table
    var data = db.Set<TEntity>() as IEnumerable;

    cb.ValueMember = valueField;
    cb.DisplayMember = displayField;
    cb.DataSource = data;
} 
```

对于 Linq-to-SQL：

```
public void Distribute<TEntity>(ComboBox cb, 
                                DataContext db, 
                                string valueField, 
                                string displayField) 
                        where TEntity : class
{

    //Publishers table
    var data = db.GetTable<TEntity>() as IEnumerable;

    cb.ValueMember = valueField;
    cb.DisplayMember = displayField;
    cb.DataSource = data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:33:56.340

我尝试了一些东西并且它有效，但我确定它的代码：

```
 public void Distribute<TEntity>(ComboBox cb, BooksDBDataContext db, string valueField, string displayField)
                    where TEntity : class
    {

        var data = db.GetTable<TEntity>();

        cb.ValueMember = valueField;
        cb.DisplayMember = displayField;
        cb.DataSource = data;
    } 
```

# asp.net - WCF & ASP.NET 并发问题

> ID：13018081
> 
> 赞同：0
> 
> 时间：2012-10-22T19:08:42.467
> 
> 标签：asp.net, wcf

我有一个在 ASP.NET 3.5 上运行的 REST 服务，并且我有多个来自客户端的并发异步调用命中 WCF 服务。它们都被序列化（顺序）而不是并行调用。这是我的设置

`InstanceContextMode = InstanceContextMode.PerSession`

`ConcurrencyMode = ConcurrencyMode.Multiple`

web.config - 限制值

`<serviceThrottling maxConcurrentCalls="64" maxConcurrentInstances="64" maxConcurrentSessions="64"/>`

代码中没有会话写入。

为了使我的 WCF 并发，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:55:07.353

我遇到了类似的问题，但我使用的是普通的旧 .aspx 页面。无论我打了多少电话，IIS 都只是以串行方式而不是并行方式处理它们。

事实证明，问题在于当前页面锁定了会话，因此一次只有一个页面可以访问会话，因此是串行的。

我不知道您的问题是否是由同一问题引起的，但我认为这可能是一个不错的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:44:45.147

假设它发生，导致 PerSession 模式。尝试从不同的客户端调用服务我认为你会有并行调用。

对于每会话服务，Max Instances 既是并发活动实例的总数，也是并发会话数。

您可以使用 per-call 类型的服务，实例数实际上与并发调用数相同。或者您可以在客户端上使用异步方法，例如*'Begin...()'*。

# javascript - 外部脚本失败时站点未完全加载

> ID：13018083
> 
> 赞同：1
> 
> 时间：2012-10-22T19:08:49.167
> 
> 标签：javascript, html, load, external

我的网站上有一个来自 easypolls.net 的脚本，它基本上是一个投票投票，但如果他们的网站关闭，或者加载脚本时出现问题，那么我网站上的其余内容就不会加载。

这是脚本：

```
<script type="text/javascript" src="http://www.easypolls.net/ext/scripts/emPoll.js?p=5075b1e0e4b08bb807c01061"></script><a class="OPP-powered-by" href="http://www.objectplanet.com/opinio/" style="text-decoration:none;"><div style="font: 9px arial; color: gray;"></div></a> 
```

那么我该如何解决这个问题，这是正常的javascript问题吗？还是我做错了什么？该脚本位于正文部分的 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:24:36.050

[Steve Souders](http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/)提供了一些关于这个问题的好信息

您是否尝试在 IE 中加载您的网站？因为当脚本文件无法正确加载时，IE 有时会中断。

也试试这个：

```
<script type="text/javascript" src="http://www.easypolls.net/ext/scripts/emPoll.js?p=5075b1e0e4b08bb807c01061"></script> 
```

在脚本末尾添加一个右括号。这是一个很好的做法，可能会解决一些问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:14:33.123

如果您当前在`HEAD`文档中引用此脚本，那么您可以尝试在结束标记之前添加该脚本`BODY`标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:20:22.380

我会使用[yepnope.js 之](http://yepnopejs.com/)`errorTimeout`类的 js 库对属性设置为 2-4 秒的 js 文件进行异步调用？如果无法检索，您可以随时在相应的回调函数中通知用户。显示消息，隐藏投票？或者你想要的 js/jQuery 或类似的东西。

# httpclient - 使用 HttpClient 的打开的套接字太多？

> ID：13018085
> 
> 赞同：0
> 
> 时间：2012-10-22T19:08:53.357
> 
> 标签：httpclient, apache-httpclient-4.x

我在 http-client 4.2.1 的客户端中有以下代码

```
 PoolingClientConnectionManager mgr = new PoolingClientConnectionManager();
    mgr.setMaxTotal(20);
    HttpClient httpclient = new DefaultHttpClient(mgr); 
```

然后我试一试……最后，在每次发帖后调用 httpPost.reset 。

出于某种原因，我看到该程序占用了与我的服务器的 110 个 ESTABLISHED http 连接，并在 CLOSE_WAIT（不是 TIMED_WAIT）中占用了 235 个连接。

我究竟做错了什么？这周围有错误吗？最大连接数应该是 20 还是我弄错了？

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:15:20.620

好吧，没关系....有人在代码中创建了很多 DefaultHttpClient，我错过了。它现在似乎正在工作，除了现在它不断为同一主机（同一主机上的不同 url）创建新的套接字，导致吞吐量非常缓慢的性能噩梦:(....grrrrrr.

# unix - 如何将文本从 rlogin 控制台传递到 cygwin 中的本地 vim？

> ID：13018086
> 
> 赞同：0
> 
> 时间：2012-10-22T19:08:53.700
> 
> 标签：unix, vim, cygwin

我的 Windows 机器上运行了一个 cygwin 控制台，并且安装了 vim 并且工作正常。但是当我对服务器（运行 unix 的 rlogin server.at.com）进行 rloging 时，我的 vim 命令正在我的远程机器上启动 vi。有没有办法告诉 cygwin 将我尝试在 rlogin 会话中打开的文本文件“隧道”到本地 vim 会话，就像它对本地文件所做的那样（也适用于我在远程机器中没有的 nedit但我在当地做）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:20:33.870

我不确定它如何或是否可以与 rlogin 一起使用，但[bcvi](http://sshmenu.sourceforge.net/articles/bcvi/)是基于 SSH 的，允许您`$ vim filename`在服务器上执行操作并在本地计算机上打开 GVim 窗口。

您还可以使用 Vim 的默认插件，该插件`netrw`可让您使用以下协议管理和编辑远程文件`rcp`：

```
" manage files
:e rcp://[username@]machinename/path/to/directory/

" edit file
:e rcp://[username@]machinename/path/to/directory/filename 
```

但是……有理由使用`rlogin`而不是`ssh`吗？

# objective-c - 如何循环遍历数组并在 UITableView 中将文本变灰

> ID：13018089
> 
> 赞同：1
> 
> 时间：2012-10-22T19:08:57.217
> 
> 标签：objective-c, ios, uitableview

我有一个`array`在其中创建的`viewWillAppear`，控制台中的结果如下所示

```
data SecArray........... (
        (
        "<NSIndexPath 0x7f17630> 2 indexes [0, 0]"
    ),
        (
        "<NSIndexPath 0x7f96430> 2 indexes [1, 0]",
        "<NSIndexPath 0x7f99c70> 2 indexes [1, 1]",
        "<NSIndexPath 0x7f091a0> 2 indexes [1, 2]"
    ),
        (
        "<NSIndexPath 0xe43e8d0> 2 indexes [2, 0]"
    )
) 
```

我正在尝试使用以下代码将`secArray`我中出现的项目的文本变灰`cellForRowAtIndexPath`

```
 if ([self.secArray count] > 0) {

        NSLog( @"GrayText Statement...1...");

        if ([self.secArray containsObject:indexPath]) {

            cell.textLabel.textColor = [UIColor grayColor];
            NSLog( @"GrayText Statement...2...");

        } 

    } 
```

不明白为什么第二个`if-statement`没有被击中......我错过了什么？获取 secArray 中的每个 indexPath 并将其变灰的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:28:03.827

猜测您的意图是存储一组“无效”索引。不会问为什么，但可能有一种更简单的方法可以实现您的意图。

几乎可以肯定，`NSIndexPath`您存储的对象的实际实例与传递给您的对象`secArray`不同。`cellForRowAtIndexPath`（`cellForRowAtIndexPath`将创建 的新实例`NSIndexPath`；您正在存储“旧”实例。）

您需要比较它们是否相等，而不是检查数组是否包含特定实例：

```
for (NSIndexPath *path in self.secArray) {
  if ([path compare:indexPath] == NSOrderedSame) {
    cell.textLabel.textColor = [UIColor grayColor];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:27:34.320

尝试在`tableView:willDisplayCell:forRowAtIndexPath:`方法中实现这一点。从[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)中：

> 表格视图在使用单元格绘制一行之前将此消息发送给其委托人，从而允许委托人在单元格对象显示之前对其进行自定义。此方法使委托有机会覆盖先前由表视图设置的基于状态的属性，例如选择和背景颜色。委托返回后，表格视图仅设置 alpha 和 frame 属性，然后仅在为滑入或滑出的行设置动画时。

# javascript - 将我的简单 JS 数组更改为具有键/值

> ID：13018090
> 
> 赞同：0
> 
> 时间：2012-10-22T19:09:20.013
> 
> 标签：javascript, jquery, json

我目前使用 jQuery 来构建`Array`这样的：

```
var arr = new Array();
   $('#some-form .some-input').each(function() {
   arr.push($(this).val());                                                                                                                    
}); 
```

它构建了类似的东西：

```
arr[0] = 'bar'
arr[1] = 'foo' 
```

现在我想要一个数据结构（一个“地图”？一个 JSON 数组？）来做这样的事情：

```
{ 'key1' : 'foo'
  'key2' : 'bar' } 
```

因为我现在要从`$('#some-form .some-input')`.

在`C`中，我认为这可能是一个链表，因为您事先不知道数据结构有多大，因此您不会使用数组。但是，我在这里使用一个数组，这可能不是最好的主意？我需要什么样的结构？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:12:48.570

使用 javascript，您可以为对象动态添加属性，因此您可以执行以下操作：

```
var arr = {};
$('#some-form .some-input').each(function() {
    var $this = $(this);
    arr[$this.attr('id')] = $this.val();
}); 
```

你可以访问它们`arr.key1; // foo`

编辑：正如下面的注释所指出的，您还可以使用`[]`符号访问值，例如`arr['key2'] // bar`（感谢您提醒我 :)）

# linux - Ogre 动态链接库

> ID：13018091
> 
> 赞同：0
> 
> 时间：2012-10-22T19:09:21.233
> 
> 标签：linux, ogre, dynamic-library

我正在尝试动态链接食人魔库。除了示例浏览器之外，我能够获取示例的链接库。

这是日志..

```
Linking CXX shared library ../../lib/Sample_SSAO.so
[100%] Built target Sample_SSAO
Scanning dependencies of target SampleBrowserDummy
[100%] Building CXX object Samples/Browser/CMakeFiles/SampleBrowserDummy.dir/dummy.cpp.o
Linking CXX shared module ../../lib/libSampleBrowserDummy.so
Updated and renamed default.properties to project.properties
Updated local.properties
No project name specified, using Activity name 'NativeActivity'.
If you wish to change it, edit the first line of build.xml.
Added file /home/mihir/workspace/ogre_3d/build_dynamic/SampleBrowserNDK/build.xml
Added file /home/mihir/workspace/ogre_3d/build_dynamic/SampleBrowserNDK/proguard-project.txt
make[3]: warning: jobserver unavailable: using -j1\. Add `+' to parent make rule.
Compile++ thumb : OgreSampleBrowser <= FileSystemLayerImpl_Android.cpp
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:28:33: error: FileSystemLayerImpl.h: No such file or directory
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:32: error: 'FileSystemLayerImpl' has not been declared
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:36: error: 'FileSystemLayerImpl' has not been declared
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:36: error: ISO C++ forbids declaration of 'Ogre' with no type
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:36: error: expected ',' or '...' before '::' token
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:40: error: 'FileSystemLayerImpl' has not been declared
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:40: error: ISO C++ forbids declaration of 'Ogre' with no type
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:40: error: expected ',' or '...' before '::' token
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:40: error: non-member function 'bool OgreBites::fileExists(int)' cannot have cv-qualifier
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp: In function 'bool OgreBites::fileExists(int)':
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:42: error: 'path' was not declared in this scope
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:42: error: 'access' was not declared in this scope
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp: At global scope:
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:45: error: 'FileSystemLayerImpl' has not been declared
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:45: error: ISO C++ forbids declaration of 'Ogre' with no type
/home/mihir/workspace/ogre_3d/Samples/Browser/src/FileSystemLayerImpl_Android.cpp:45: error: expected ',' or '...' before '::' token
make[3]: *** [obj/local/armeabi-v7a/objs/OgreSampleBrowser/FileSystemLayerImpl_Android.o] Error 1
make[2]: *** [lib/libSampleBrowserDummy.so] Error 2
make[1]: *** [Samples/Browser/CMakeFiles/SampleBrowserDummy.dir/all] Error 2
make: *** [all] Error 2 
```

它抱怨丢失的头文件存在于我的工作目录中。我还尝试手动复制它抱怨的头文件，这就是我得到的。

```
/home/mihir/workspace/lab126/ogre_3d/build_dynamic/Samples/include/SampleBrowser‌_Android.h:332: error: expected '>' before 'AndroidEGLWindow'
/home/mihir/workspace/lab126/ogre_3d/build_dynamic/Samples/include/SampleBrowser‌_Android.h:332: error: expected '(' before 'AndroidEGLWindow' 
/home/mihir/workspace/lab126/ogre_3d/build_dynamic/Samples/include/SampleBrowser‌​_Android.h:332: error: 'AndroidEGLWindow' was not declared in this scope 
/home/mihir/workspace/lab126/ogre_3d/build_dynamic/Samples/include/SampleBrowser‌​_Android.h:332: error: expected primary-express 
```

# javascript - Ember.js 绑定不触发更改

> ID：13018092
> 
> 赞同：1
> 
> 时间：2012-10-22T19:09:46.587
> 
> 标签：javascript, ember.js

我有一个包含 3 个项目的容器对象。每个项目都有一些文本字段（例如：text1、text2、text3、text4）。除此之外，我还有一个计算属性，它基于一个名为 currentItemIndex 的属性返回当前项目。

所以，基本上，这是“项目模型”：

```
App.Item = Ember.Object.extend({
    text1: null,
    text2: null,
    text3: null,
    text4: null
}); 
```

这是计算的属性

```
App.currentItemIndex = 0;
App.currentItem = function () {
    return App.containerObject[App.get('currentItemIndex')];
}.property('App.currentItemIndex'); 
```

模拟数据源可能如下所示：

```
App.containerObject.pushObject(App.Item.create({text1:'Text 1', text2:'Text 2', text3:'Text 3', text4:'Text 4'}));
App.containerObject.pushObject(App.Item.create({text1:'Text 1', text2:'Text 2', text3:'Text 3', text4:'Text 4'}));
App.containerObject.pushObject(App.Item.create({text1:'Text 1', text2:'Text 2', text3:'Text 3', text4:'Text 4'})); 
```

因此，正如您所见，每个项目都具有相同的文本值，并且当我将 App.currentItemIndex 更改为任何值 0、1 或 2**时，绑定不会触发某些内容已更改的通知。**，因为当然属性没有改变，但对象是一个新的。

所以问题是： **如何强制触发此通知以相应地更新视图？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:58:29.053

我想知道你如何改变`App.currentItemIndex`. 您必须在此处使用 set 方法，例如：

```
 App.set('currentItemIndex', 1) 
```

请注意，您可以使用`App.containerObject.objectAt(App.get('currentItemIndex'))`而不是访问`App.containerObject[App.get('currentItemIndex')]`

编辑：这是一个工作 jsfiddle：http: [//jsfiddle.net/Sly7/c4bA2/69/](http://jsfiddle.net/Sly7/c4bA2/69/)

我总是使用 get/set 来访问属性，并在应用程序中声明它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:18:11.623

小提琴：[这里](http://jsfiddle.net/arturgrigor/c4bA2/86/)

问题是由`removeClass('btn-success btn-danger')`通话引起的。这很奇怪，因为在[jQuery Docs](http://api.jquery.com/removeClass/)上它说您可以一次删除多个类。

所以，如果我只是使用`removeClass('btn-success')`或`removeClass('btn-danger')`然后一切正常。

# xslt - XSLT 按唯一元素值分组？

> ID：13018096
> 
> 赞同：0
> 
> 时间：2012-10-22T19:10:06.537
> 
> 标签：xslt

对于我的原始 XML，我有类似的东西：

```
<Data>
  <Statistic>
    <Title>Total Values</Title>
    <Type>Type A</Type>
    <Key>Cases</Key>
    <Value>3</Value>
   </Statistic>
   <Statistic>
    <Title>PHYSICIAN DETAIL TOTAL</Title>
    <Type>Type A</Type>
    <Key>Percentage</Key>
    <Value>75.0%</Value>
   </Statistic>
   <Statistic>
    <Title>Total Values</Title>
    <Type>Type B</Type>
    <Key>Cases</Key>
    <Value>1</Value>
   </Statistic>
   <Statistic>
    <Title>Total Values</Title>
    <Type>Type B</Type>
    <Key>Percentage</Key>
    <Value>25.0%</Value>
   </Statistic>
</Data> 
```

基本上，对于每种类型，只有一个“案例”和一个“百分比”。最终的 XML 将如下所示：

```
<Data>
  <Statistic>
    <Title>Total Values</Title>
    <Type>Type A</Type>
    <count>
      <Case>1</Case>
      <Percentage>75%</Percentage>
    </count>
  </Statistic>
  <Statistic>
    <Title>Total Values</Title>
    <Type>Type B</Type>
    <count>
       <Case>1</Case>
       <Percentage>25%</Percentage>
    </count>
  </Statistic>
</Data> 
```

实现这一目标的最佳方法是什么？XSLT 分组依据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:41:55.737

OP 似乎是在说每个统计数据恰好有一个 Case 孩子，每个统计数据恰好有一个 Percentage 孩子。在这种情况下，分组是不必要的，解决方案变得微不足道。

**此 XSLT 1.0 样式表（也适用于 XSLT 2.0）...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
  <xsl:copy>
     <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Statistic[Key='Percentage']" />

<xsl:template match="Statistic">
  <xsl:copy>
     <xsl:apply-templates select="@*|node()[not(self::Key|self::Value)]"/>
     <count>
       <Case><xsl:value-of select="Value" /></Case>
       <Percentage><xsl:value-of select=
         "../Statistic[Type=current()/Type][Key='Percentage']/Value" />
       </Percentage>
     </count>   
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于此文档时...**

```
<Data>
  <Statistic>
    <Title>Total Values</Title>
    <Type>Type A</Type>
    <Key>Cases</Key>
    <Value>3</Value>
   </Statistic>
   <Statistic>
    <Title>PHYSICIAN DETAIL TOTAL</Title>
    <Type>Type A</Type>
    <Key>Percentage</Key>
    <Value>75.0%</Value>
   </Statistic>
   <Statistic>
    <Title>Total Values</Title>
    <Type>Type B</Type>
    <Key>Cases</Key>
    <Value>1</Value>
   </Statistic>
   <Statistic>
    <Title>Total Values</Title>
    <Type>Type B</Type>
    <Key>Percentage</Key>
    <Value>25.0%</Value>
   </Statistic>
</Data> 
```

**...产量...**

```
<Data>
  <Statistic>
    <Title>Total Values</Title>
    <Type>Type A</Type>
    <count>
      <Case>3</Case>
      <Percentage>75.0%</Percentage>
    </count>
  </Statistic>
  <Statistic>
    <Title>Total Values</Title>
    <Type>Type B</Type>
    <count>
      <Case>1</Case>
      <Percentage>25.0%</Percentage>
    </count>
  </Statistic>
</Data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:05:40.193

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:output indent="yes"/>

    <xsl:key name="stat-key" match="/Data/Statistic" use="Type"/>

    <xsl:template match="/">
        <Data>
            <xsl:apply-templates select="/Data/Statistic[generate-id()=generate-id(key('stat-key',Type)[1])]">
                <xsl:sort select="Type"/>
            </xsl:apply-templates>
        </Data>
    </xsl:template>

    <xsl:template match="Statistic">
        <xsl:copy>
            <xsl:copy-of select="Title|Type"/>
            <count>
                <Case>
                    <xsl:value-of select="key('stat-key', Type)[Key='Cases']/Value"/>
                </Case>
                <Percentage>
                    <xsl:value-of select="key('stat-key', Type)[Key='Percentage']/Value"/>
                </Percentage>
            </count>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

它为每个组选择`Title`第一个。`Statistic``Type`

**输出**

```
<?xml version="1.0" encoding="utf-8"?>
<Data>
   <Statistic>
      <Title>Total Values</Title>
      <Type>Type A</Type>
      <count>
         <Case>3</Case>
         <Percentage>75.0%</Percentage>
      </count>
   </Statistic>
   <Statistic>
      <Title>Total Values</Title>
      <Type>Type B</Type>
      <count>
         <Case>1</Case>
         <Percentage>25.0%</Percentage>
      </count>
   </Statistic>
</Data> 
```

# ios - 如何准确检测iDevice型号？

> ID：13018097
> 
> 赞同：4
> 
> 时间：2012-10-22T19:10:06.443
> 
> 标签：ios, xcode, model, uidevice

我想检测`iDevice`用户拥有什么，然后将其`device name`放入`UILabel`. 使用以下代码，应用程序仅检测我喜欢的 iPhone/iPad/iPod iPhone 4/iPod 3G/iPad 1G... 或确切名称（iPhone 3.1/iPod 2.0/ iPad 2.4）...

这是我的代码：

```
iDevice.text = [UIDevice currentDevice]. localizedModel; 
```

我试过这个

```
iDevice.text = [UIDevice currentDevice]. model; 
```

但小巷里写着 iPhone，我喜欢 iPhone 3.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:20:01.063

好的，听起来您要使用的方法是使用 Erica Sadun 创建的类别，该类别位于[https://github.com/erica/uidevice-extension/](https://github.com/erica/uidevice-extension/)

在我了解如何使用它之前，我将传递一些关于类别的信息。Apple 在此处提供有关类别的文档[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

> 您可以通过在接口文件中以类别名称声明它们并在实现文件中以相同名称定义它们来将方法添加到类。类别名称表明这些方法是对在别处声明的类的添加，而不是新类。但是，您不能使用类别将其他实例变量添加到类中。

从 github 下载项目，并将这两个文件添加到您的项目中：

```
UIDevice-Hardware.h
UIDevice-Hardware.m 
```

您将使用的方法将是以下之一：

```
- (NSString *) platform;
- (NSString *) hwmodel;
- (NSUInteger) platformType;
- (NSString *) platformString; 
```

因此，您需要将 UIDevice-Hardware.h 导入到要使用该方法的文件中。您将使用该方法返回一个 NSString 值并将该值分配给标签，因此您将执行类似于

```
mylabel.text = [[UIDevice currentDevice] platformString] 
```

这是另一个很好地介绍类别的链接：http: [//mobile.tutsplus.com/tutorials/iphone/objective-c-categories/](http://mobile.tutsplus.com/tutorials/iphone/objective-c-categories/)

编辑：使用设备模拟器的示例屏幕截图： 注意：在我的@interface 行上方![在此处输入图像描述](../Images/f65369fa3b10b413502aa049459b5b5c.png) 也有。`#import "UIDevice-Hardware.h"`

# java - Execute jar file with multiple classpath libraries from command prompt

> ID：13018100
> 
> 赞同：60
> 
> 时间：2012-10-22T19:10:15.900
> 
> 标签：java, maven, jar, classpath

I have a Maven project which generates a jar file and copies all dependencies to `target/lib` folder. I want to execute this project on client's machine (windows). So, I copied `myproject.jar` to `C:\xyz` folder and all dependencies to `C:\xyz\lib` folder. How do I execute this project from client's command prompt? I tried to use `java -cp lib\*.jar -jar myproject.jar` from `C:\xyz` folder but it throws following error.

```
Exception in thread "main" java.lang.NoClassDefFoundError: lib\commons-codec-1/3/jar
Caused by: java.lang.ClassNotFoundException: lib\commons-codec-1.3.jar
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: lib\commons-codec-1.3.jar.  Program will exit. 
```

I think if I specify all dependencies in classpath (like `java -cp lib\dep1.jar;dep2.jar`), it will get rid of the problem but I don't want to do this as I have 40 libraries already and it might grow in future releases. Is there a better way to do this?

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-22T19:18:11.097

You cannot use both `-jar` and `-cp` on the command line - see [the java documentation](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html#-jar) that says that if you use `-jar`:

> the JAR file is the source of all user classes, and other user class path settings are ignored.

You could do something like this:

`java -cp lib\*.jar;. myproject.MainClass`

Notice the `;.` in the `-cp` argument, to work around a Java command-line bug. Also, please note that this is the Windows version of the command. The path separator on Unix is `:`.

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-08-06T08:55:37.320

Using java 1.7, on UNIX -

```
java -cp myjar.jar:lib/*:. mypackage.MyClass 
```

On Windows you need to use ';' instead of ':' -

```
java -cp myjar.jar;lib/*;. mypackage.MyClass 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-22T19:21:41.757

Let maven generate a batch file to start your application. This is the simplest way to this.

You can use the [appassembler-maven-plugin](http://www.mojohaus.org/appassembler/appassembler-maven-plugin/index.html) for such purposes.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-05-19T06:50:26.687

Regardless of the OS the below command should work:

```
java -cp "MyJar.jar;lib/*" com.mainClass 
```

Always use quotes and please take attention that **lib/*.jar** will not work.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-29T20:18:35.370

You can use maven-assembly-plugin, Here is the example from the official site: [https://maven.apache.org/plugins/maven-assembly-plugin/usage.html](https://maven.apache.org/plugins/maven-assembly-plugin/usage.html)

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
                <manifest>
                    <mainClass>your main class</mainClass>
                </manifest>
            </archive>
        </configuration>
        <executions>
            <execution>
                <id>make-assembly</id> <!-- this is used for inheritance merges -->
                <phase>package</phase> <!-- bind to the packaging phase -->
                <goals>
                    <goal>single</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-22T19:17:46.057

a possible solution could be

create a batch file

there do a loop on lib directory for all files inside it and set each file unside lib on classpath

then after that run the jar

source [for loop in batch file](http://www.robvanderwoude.com/for.php) for info on loops

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-22T19:14:00.113

There are several options.

The easiest is likely the [exec plugin](http://mojo.codehaus.org/exec-maven-plugin/).

You can also generate a jar containing all the dependencies using the [assembly plugin](https://maven.apache.org/plugins/maven-assembly-plugin/).

Lastly, you can generate a file with the classpath in it using the `dependency:classpath` goal.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-17T14:29:45.880

I was running into the same issue but was able to package all dependencies into my jar file using the [Maven Shade Plugin](http://www.avajava.com/tutorials/lessons/how-do-i-build-a-jar-file-that-contains-its-dependencies.html "Maven Shade pluging")

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-10-22T19:13:24.333

This will not work `java -cp lib\*.jar -jar myproject.jar`. You have to put it jar by jar.

So in case of `commons-codec-1.3.jar`.

`java -cp lib/commons-codec-1.3.jar;lib/next_jar.jar` and so on.

The other solution might be putting all your jars to `ext` directory of your JRE. This is ok if you are using a standalone JRE. If you are using the same JRE for running more than one application I **do not** recommend doing it.

# java - 不同类型的 Web 服务

> ID：13018104
> 
> 赞同：0
> 
> 时间：2012-10-22T19:10:34.410
> 
> 标签：java, ajax, wcf, web-services

我使用 PhoneGap 开发了一个移动应用程序，通过 Web 服务连接到数据库。因为，我熟悉 .NET 环境，所以我使用了 WCF 服务，或者更具体地说是启用 Ajax 的 WCF 服务，这样我就可以通过 Ajax 调用来调用 Web 服务。

现在，我是 Web 服务的绝对初学者，我什至不知道 REST 和 SOAP Web 服务之间的区别，以及这个 Ajax Enable WCF 服务是 SOAP 还是 REST Web 服务。另外，我可以使用 Java 开发相同的 Web 服务吗？

你能推荐一本书或教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:28:43.977

Web 服务只是对两个在逻辑上或以其他方式分离的系统如何通信的定义。REST 和 SOAP 只是可以进行这种通信的两种协议。把它想象成一种人类语言，其中一种语言需要大约 100 个音节才能将信息传达给听众，而另一种语言则允许您在 75 个或更少的音节内传递相同的信息。

从上面的比喻来看，REST 将是更纤细的 75 音节语言，而 SOAP 将是更精细的 100+ 音节语言。请注意，传输机制保持不变（口头或口语），这与 Web 服务的情况相同，即可以通过不同的传输通道 http、低级套接字、SMTP 等传输相同的协议（REST 或 SOAP）。您可以[在这里](http://www.w3schools.com/webservices/ws_intro.asp)有一个概述

归根结底，Web 服务的基本原则是互操作性，使不同的和技术上不同的系统能够通过开放协议以与平台无关的方式进行通信。这意味着您的基于 WCF 的服务将基本上能够与 java（JAX-WS 或 RS）Web 服务执行相同的操作，尽管它们会以不同的方式进行。

# jquery - 基于图像alt标签向父元素添加类？

> ID：13018106
> 
> 赞同：1
> 
> 时间：2012-10-22T19:10:39.717
> 
> 标签：jquery

检查其他一些帖子，找到了我需要的代码，但并没有完全按照我的需要去做。

我想根据图像的 alt 标签向父元素添加一个类。

所以从这里：

```
<div class="img-wrap">
   <div class="img-icon">
      <a href="">
         <img alt="home" />
      </a>
   </div>
</div> 
```

对此：

```
<div class="img-wrap home">
   <div class="img-icon">
      <a href="">
         <img alt="home" />
      </a>
   </div>
</div> 
```

这是我正在使用的代码：

```
$('img').each(function() {
$(this).parent().addClass( $(this).attr('alt') );
}); 
```

虽然这添加了所需的类，但它会将其添加到“a”......但是我希望它添加到#img-wrap。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:13:34.880

ID 应该是唯一的。你不应该这样重复 ID。尝试将其更改为 class`class="img-wrap"`并查看以下代码。

**HTML：**

```
<div class="img-wrap">
   <div class="img-icon">
      <a href="">
         <img alt="home" />
      </a>
   </div>
</div> 
```

**代码：**

```
$('img').each(function () {
   $(this).closest('.img-wrap').addClass(this.alt);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:12:40.620

```
$('img').each(function() {
$(this).parents('#img-wrap').addClass( $(this).attr('alt') );
}); 
```

或者

```
$('img').each(function() {
    $(this).parent().parent().parent().addClass( $(this).attr('alt') );
    });
//to make it more obvious why it is not selecting the #img-wrap <div> 
```

是的，#IDs 应该只使用一次，如果重复出现，请使用一个类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:12:46.063

使用 .closest() 选择你想要的父元素 [http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:13:57.233

尝试使用`.closest()`

请注意， HTML 页面中的**ID**应该是唯一的。尝试给 div 一个**类**而不是一个**ID**

```
 $('img').each(function() {
       $(this).closest('.img-wrap').addClass( $(this).attr('alt') );
    });

<div class="img-wrap">
  <div class="img-icon">
     <a href="">
       <img alt="home" />
     </a>
  </div> 
```

# c# - 从 Silverlight 打印位图 - 图像模糊

> ID：13018107
> 
> 赞同：0
> 
> 时间：2012-10-22T19:10:44.433
> 
> 标签：c#, .net, silverlight, printing

我正在尝试从 Silverlight 应用程序打印图像。我的扫描质量非常好（TIFF），分辨率为 1696x2200

当我打印时 - 我从那里得到`PrintableArea`，`PrintDocument`它是 816x1056

我所做的 - 我将位图的大小调整为可打印区域（以使文档适合页面），我得到的结果是模糊的图像。我知道这是缩放问题（很可能），但是如何正确缩放以使其看起来不错？当我在 Image 中显示文档并设置图像大小时 - 它看起来不错。

为了调整大小，我使用 WriteableBitmapEx 扩展并尝试了两种类型的调整大小（最近邻和双线性）

代码：

```
var printDocument = new PrintDocument(); 

            printDocument.PrintPage += (s, ea) =>
                {
                    var printableArea = ea.PrintableArea;

                    var bitmap = this.currentPreviewPage.FullBitmap.Resize((int)printableArea.Width, (int)printableArea.Height, WriteableBitmapExtensions.Interpolation.Bilinear);

                    var image = new Image { Source = bitmap };
                    var canvas = new Canvas { Width = bitmap.PixelWidth, Height = bitmap.PixelHeight };
                    canvas.Children.Add(image);

                    ea.PageVisual = canvas; 
                    ea.HasMorePages = false;
                }; 

            printDocument.PrintBitmap("Silverlight Bitmap Print"); 
```

文档在屏幕上的外观（图片内）

![在此处输入图像描述](../Images/fa3bb553da2f83fc6d9857acb5f2d20f.png)

这是打印出来的：

![在此处输入图像描述](../Images/2533608dd8b76294506556349ddbdd0e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:15:41.697

在声明元素时，不要使用 WriteableBitmapEx 扩展，而是`Image`尝试设置[Stretch](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.stretch%28VS.95%29.aspx)属性，使其根据指定的最大尺寸进行拉伸：

```
var image = new Image { Source = bitmap, Stretch = Stretch.UniformToFill }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T21:35:46.153

在我的情况下，设置 UseLayoutRounding="True" 就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:19:36.923

Blilinear 过滤器往往会模糊图像。您可能想尝试 WriteableBitmapExtensions.Interpolation.NearestNeighbor 来查看是否获得更好的结果

# c - 在函数中初始化数组

> ID：13018112
> 
> 赞同：0
> 
> 时间：2012-10-22T19:11:06.947
> 
> 标签：c, arrays, pointers

我对 C 完全陌生，我试图在函数中初始化一个数组。

但它不起作用，因为如果我想在 main 方法中打印值，我总是会遇到分段错误。

```
 static void array(int *i)
{
    int j = 0;
    i = (int *) malloc(5 * sizeof (int));
    for (j = 0; j < 5; j++) {
        i[j] = j;
    }

    for (j = 0; j < 5; j++) {
        printf("Hello: %d\n", i[j]);
    }
}

/* Main entry point */
int main(int argc, char *argv[])
{
    int j;
    int *i = NULL;

    array(i);
    for (j = 0; j < 5; j++) {
        printf("Hello: %d\n", i[j]);
    }
    return 0;
} 
```

如果有人可以修复代码并解释它是如何工作的，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:14:18.490

```
static void array(int **i)
{
    int j = 0;
    *i = malloc(5 * sizeof (int));
    for (j = 0; j < 5; j++) {
        (*i)[j] = j;
    }

    for (j = 0; j < 5; j++) {
        printf("Hello: %d\n", (*i)[j]);
    }
}

/* Main entry point */
int main(int argc, char *argv[])
{
    int j;
    int *i = NULL;

    array(&i);
    for (j = 0; j < 5; j++) {
        printf("Hello: %d\n", i[j]);
    }
    return 0;
} 
```

您正在将指针按值传递到数组中，因此您需要做的是将指针传递给您的指针，然后设置/使用它。

* * *

至于为什么不应该转换 malloc 的结果，请参阅：[我要转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)具体来说， [强制转换 malloc 的结果有什么危险？](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:13:42.273

为了从函数中为变量分配内存，您必须将指向指针的指针作为函数参数传递，取消引用指针，然后分配内存。

或伪代码

```
function(int **i)
{
    *i = malloc...
}
int *i = NULL;
function(&i); 
```

这是做到这一点的方法之一。您还可以返回 malloc 返回的指针。而且，从我读过的材料来看，最好不要强制转换 malloc 的返回类型。

# python - matplotlib savefig 图像大小与 bbox_inches='tight'

> ID：13018115
> 
> 赞同：20
> 
> 时间：2012-10-22T19:11:20.910
> 
> 标签：python, matplotlib

我必须制作一个矢量图，我只想看到没有轴、标题等的向量，所以这就是我尝试这样做的方法：

```
pyplot.figure(None, figsize=(10, 16), dpi=100)
pyplot.quiver(data['x'], data['y'], data['u'], data['v'], 
              pivot='tail', 
              units='dots', 
              scale=0.2,
              color='black')

pyplot.autoscale(tight=True)
pyplot.axis('off')
ax = pyplot.gca()
ax.xaxis.set_major_locator(pylab.NullLocator())
ax.yaxis.set_major_locator(pylab.NullLocator())
pyplot.savefig("test.png", 
               bbox_inches='tight', 
               transparent=True,
               pad_inches=0) 
```

尽管我努力获得 1000 x 1600 的图像，但我还是得到了 775 x 1280 的图像。如何使其成为所需的尺寸？谢谢你。

**更新**提出的解决方案有效，除了在我的情况下，我还必须手动设置轴限制。否则，matplotlib 无法找出“紧密”的边界框。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T19:54:38.460

```
import matplotlib.pyplot as plt
import numpy as np

sin, cos = np.sin, np.cos

fig = plt.figure(frameon = False)
fig.set_size_inches(5, 8)
ax = plt.Axes(fig, [0., 0., 1., 1.], )
ax.set_axis_off()
fig.add_axes(ax)

x = np.linspace(-4, 4, 20)
y = np.linspace(-4, 4, 20)
X, Y = np.meshgrid(x, y)
deg = np.arctan(Y**3-3*Y-X)
plt.quiver(X, Y, cos(deg), sin(deg), pivot='tail', units='dots', color='red')
plt.savefig('/tmp/test.png', dpi=200) 
```

产量

![在此处输入图像描述](../Images/66214c7fd563728adc0a222ce6726514.png)

您可以通过将图形设置为 5x8 英寸来使结果图像为 1000x1600 像素

```
fig.set_size_inches(5, 8) 
```

并保存`DPI=200`：

```
plt.savefig('/tmp/test.png', dpi=200) 
```

删除边框的代码取自[这里](https://stackoverflow.com/q/8218887/190597)。

（上面发布的图片不是按比例绘制的，因为 1000x1600 相当大）。

# android - Android：加速度计传感器中的z值范围在不同设备上是不同的

> ID：13018119
> 
> 赞同：3
> 
> 时间：2012-10-22T19:11:29.483
> 
> 标签：android, accelerometer, sensors

我想检测设备是否朝上。（不成角度，但朝上与地面平齐）。
在某些面向上的设备上，z 值将返回 9~10 之间的值。（大多数设备）
但是，在 Nexus 7 上，对于朝上，z 值将返回 6~8 之间的值。

我的代码是：

```
if(z_value > 9.0) {
    // device facing up
}
else {
    // device is in angled
} 
```

但是，上面的代码不再起作用。由于 Nexus7 没有达到 z_value 9。

如何检测设备是否（完全）朝上。（不问 z_value > 0）

我的完整代码如下：

```
@Override
protected void onStart() {
    super.onStart();
    try {
        sensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
        List<Sensor> sensorList = sensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER);
        if(sensorList.size() > 0){
            accelerometerPresent = true;
            accelerometerSensor = sensorList.get(0);  
        }
        else{
            accelerometerPresent = false;  
        }
        if(accelerometerPresent){
            sensorManager.registerListener(accelerometerListener, accelerometerSensor, SensorManager.SENSOR_DELAY_UI);
        }
    } catch(Exception e) {}
}

private SensorEventListener accelerometerListener = new SensorEventListener(){

            @Override
            public void onAccuracyChanged(Sensor arg0, int arg1) {}

            @Override
            public void onSensorChanged(SensorEvent arg0) {
                float z_value = arg0.values[2];
                Log.d("test", "z:" + z_value);
            }}; 
```

**注意 #1**
arg0.sensor.getMaximumRange() 为 Nexus 7 返回 19.6133。哪个传感器永远不会返回。

**注意#2**
如果你摇动设备，z_value 往往会稍微高一点（有时是 8~8.5）。如果您稳定地倾斜设备，z_value 不会达到 8（最大值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:35:58.830

显然该设备校准不佳。经过良好校准的设备应返回 9.81m/s^2，即重力加速度。

您可以做什么：将 z 值与 x 和 y 值进行比较。如果 z 值占主导地位，则设备朝上。例如：

```
if (z/sqrt(x^2+y^2+z^2+1.0e-6) > 0.9) { // Facing up 
```

我添加了这个术语`1.0e-6`，这样你就不会不小心被零除。

这种启发式需要测试和调整，但我想你明白了。祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T19:28:00.030

关于这种传感器的总体思路是避免使用它们，或者不以您的应用程序依赖真正精确测量的方式滥用它们。

这个传感器的问题基本上是它们的值范围确实不同，而且它们真的很嘈杂，所以它们需要由编码人员进行归一化，并且它们在准确性方面不能那么可靠。

我忘记了这次公开演讲的确切名称，但即使是 Google 和 Android 团队也建议不要在小数方面过分依赖它，或者不要期望很高的准确性；还要记住，这款智能手机和平板电脑的每一小部分都非常便宜，我们谈论的是通常不超过 1 美元的传感器。

尝试以您的代码只需要一般方向或轴的方式进行编码，如果您想要一个值，请确保它是一个整数并且始终进行粗略计算并且不要期望精度或小数。

还要记住，Android 不提供对这些值的规范化方法，因此您必须在代码中处理它。

# java - 搜索 HashMap > 或 HashMap >

> ID：13018123
> 
> 赞同：0
> 
> 时间：2012-10-22T19:11:51.513
> 
> 标签：java, arraylist, hashmap

我需要搜索`HashMap`包含一个`String, ArrayList<Users>`或`String, HashSet<Users>`一个给定值的键/值。我不确定如何在java中编写代码来做到这一点。

我宣布..

```
private HashMap<String, ArrayList<Users>> cm = new HashMap<>(); 
```

我需要调用搜索的方法看起来像这样......

```
public void doSomething(User u, String product) {

} 
```

所以我不确定方法中的代码是如何工作的。

```
if (cm.containsKey(product) {
   //This is where I'm unsure if I find the key on how to check if the ArrayList has a 
   particular user. And then if not how to add them.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:17:35.297

我不确定该怎么做，但几天前我问了一个关于地图条目集和使用“？”的问题。允许多种类型。我接受的答案得到了很好的解释，并附有一个例子。可能会帮到你。

[无法理解 Java 映射条目集](https://stackoverflow.com/questions/12983478/trouble-understanding-java-map-entry-sets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:07:41.893

您的`User`添加方法可能如下所示：

```
public void doSomething(User user, String product) {
   if (cm.containsKey(product)) {
      List<User> list = cm.get(product);
      if (!list.contains(user)) {
         list.add(user);
      }
   }
} 
```

这假设您`HashMap`使用单一`User`类型定义您的：

```
HashMap<String, ArrayList<User>> cm = new HashMap<>(); 
```

# jsrender - 如何避免在jsrender中重复渲染DOM元素

> ID：13018124
> 
> 赞同：0
> 
> 时间：2012-10-22T19:11:57.110
> 
> 标签：jsrender

渲染 jsrender.template 时是否可以检查重复的 Dom 元素？

例如：

1.  如果元素不存在使用这个：

    ```
    <li id="liv_{{:nid}}">
        <div class="qwqw"><a href="#"></a></div>
        <div class="">
            <p class="we">{{:spd}} <span>mph (todo)</span></p>
        </div>

        <div class="clear"></div>
      </li> 
    ```

2.  如果元素“liv1”存在，则更新视图并且不执行步骤 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:58:22.493

尝试使用[辅助函数](http://borismoore.github.com/jsrender/demos/step-by-step/09_helper-functions.html)

模板伪代码：

```
{{if ~domElementExists(id)}}
...
{{/if}} 
```

助手的伪代码

```
$.views.helpers({

    domElementExists: function( id ) {

        return $("#liv_" + id).length > 0;

    }
}); 
```

# .net - 是否有适用于 WinRT 的 EventBroker？

> ID：13018131
> 
> 赞同：1
> 
> 时间：2012-10-22T19:12:14.053
> 
> 标签：.net, windows-runtime, windows-store-apps, winrt-xaml, c#-5.0

我试图找到一些已移植到 WinRT 的事件代理实现，而不是自己编写。我希望 Prism 的 IEventAggregator 或 bbvEventBroker 之类的东西已经被移植到 WinRT，但是我还没有找到任何东西。因此，我希望得到一些提示，有人看到任何可用于 WinRT 的东西吗？

干杯；）

**编辑**

迄今为止的结果基金：

[Caliburn.Micro.EventAggregator](http://nugetmusthaves.com/Package/Caliburn.Micro.EventAggregator)

[MVVM Toolkit Messenger](http://mvvmlight.codeplex.com/SourceControl/changeset/view/b922e8ccf674#GalaSoft.MvvmLight/Win8RP/GalaSoft.MvvmLight.Win8/Messaging/Messenger.Win8.cs)（感谢 Filip Skaun）

[事件聚合器.NET](https://github.com/staxmanade/EventAggregator.Net)

[基于 Rx 框架的 EventAggregator](http://joseoncode.com/2010/04/29/event-aggregator-with-reactive-extensions/)（Rx 在 RT 上工作）

继续前进，让我们看看还有什么:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:30:02.537

MVVM Light 有 Messenger 的东西。唯一的问题是它尚不支持弱事件跟踪，因此您需要 Unregister() 从您 Register() 编辑的事件到您的类不再使用时。

[http://mvvmlight.codeplex.com/SourceControl/changeset/view/b922e8ccf674#GalaSoft.MvvmLight%2fWin8RP%2fGalaSoft.MvvmLight.Win8%2fMessaging%2fMessenger.Win8.cs](http://mvvmlight.codeplex.com/SourceControl/changeset/view/b922e8ccf674#GalaSoft.MvvmLight%2fWin8RP%2fGalaSoft.MvvmLight.Win8%2fMessaging%2fMessenger.Win8.cs)

# python - 强制日期符合熊猫中的给定频率

> ID：13018134
> 
> 赞同：1
> 
> 时间：2012-10-22T19:12:19.997
> 
> 标签：python, pandas

假设我们有一个每月的时间序列，可能缺少月份，并且在将数据加载到带有 DatetimeIndex 的 pandas Series 对象时，我们希望确保每个日期观察都标记为月末日期。但是，原始输入日期可能会落在该月的任何地方，因此我们需要强制它们进行月末观察。

我的第一个想法是做这样的事情：

```
import pandas as pd
pd.DatetimeIndex([datetime(2012,1,20), datetime(2012,7,31)], freq='M') 
```

但是，这只是将日期保留为 [2012-01-20,2012-07-31]，并且不会强制它们为月末值 [2012-01-31,2012-07-31]。

我的第二次尝试是：

```
ix = pd.DatetimeIndex([datetime(2012,1,20), datetime(2012,7,31)], freq='M')
s = pd.Series(np.random.randn(len(ix)), index=ix)
s.asfreq('M') 
```

但这给出了：

```
2012-01-31        NaN
2012-02-29        NaN
2012-03-31        NaN
2012-04-30        NaN
2012-05-31        NaN
2012-06-30        NaN
2012-07-31    0.79173
Freq: M 
```

在引擎盖下，该`asfreq`函数正在调用`date_range`DatetimeIndex。

如果我使用`PeriodIndex`而不是，这个问题很容易解决`DatetimeIndex`；但是，我需要支持一些当前不支持的频率，`PeriodIndex`据我所知，没有办法用我自己的`Period`频率扩展 pandas。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:35:51.353

这是一种解决方法，但无需使用即可`periodindex`：

```
from pandas.tseries.offsets import *

In [164]: s
Out[164]: 
2012-01-20   -1.266376
2012-07-31   -0.865573

In [165]: s.index=s.index+MonthEnd(n=0)

In [166]: s
Out[166]: 
2012-01-31   -1.266376
2012-07-31   -0.865573 
```

# youtube-api - Youtube 分析 API 的延迟

> ID：13018142
> 
> 赞同：2
> 
> 时间：2012-10-22T19:12:44.473
> 
> 标签：youtube-api

这个页面 ( [http://apiblog.youtube.com/2012/03/keeping-things-fresh.html](http://apiblog.youtube.com/2012/03/keeping-things-fresh.html) ) 很好地解释了使用 Youtube API 2.0 版获得的结果的延迟。Youtube Analytics API 是否有相同的解释？

我今天观看并喜欢了一个之前没有操作的视频，然后使用 Analytics API 检索了统计数据（开始日期和结束日期都等于今天）并且我的操作没有得到反映 - 所有指标仍然为零。我需要等到明天才能计算今天的总数吗？如果是，有没有办法获得当天的分析？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T01:48:00.557

YouTube 分析 API 使用与 YouTube 分析网站相同的后端，适用于该网站的有关数据新鲜度的公共信息也适用于该 API。有一些相关信息在

[http://support.google.com/youtube/bin/static.py?hl=en&guide=1714169&page=guide.cs](http://support.google.com/youtube/bin/static.py?hl=en&guide=1714169&page=guide.cs)

具体来说，页面底部显示（截至目前）：

> YouTube 分析数据每天更新，这意味着这些报告中显示的数字可能与观看页面、频道页面、视频管理器或其他来源上显示的公开值不同。

我不认为我们具体保证数据更新的时间，但可以安全地假设前一天的数据是在太平洋时间午夜（这是用于 YouTube 分析的时区）之后的某个时间处理的。

# asp.net - 用于 ASP 的 Datagrid 上的复选框

> ID：13018143
> 
> 赞同：0
> 
> 时间：2012-10-22T19:12:44.230
> 
> 标签：asp.net, vb.net, datagridview, checkbox

我的项目中有一个数据网格，其中一个复选框作为模板字段；但我无法访问该`checkbox.checked`属性。有人有什么主意吗？

我的 ASP 代码：

```
<asp:GridView ID="GVP" runat="server" AutoGenerateColumns="False" DataSourceID="DSP">
     <Columns>
          <asp:TemplateField HeaderStyle-Width="5%" ItemStyle-Width="5%" FooterStyle-Width ="5%">
               <ItemTemplate>
                    <asp:CheckBox ID="SelectCb" runat="server"></asp:CheckBox>
               </ItemTemplate>
               <FooterStyle Width="5%"/>
               <HeaderStyle Width="5%"/>
               <ItemStyle Width="5%"/>
          </asp:TemplateField>
          <asp:BoundField DataField="Answers" HeaderText="Options" SortExpression="Answers" />
     </Columns>
</asp:GridView> 
```

我背后的VB代码：

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles buttonNext.Click
    Dim SelectedBox As Boolean = False
    For Each row As GridViewRow In GVP.Rows
        Dim cb As CheckBox = row.FindControl("SelectCb")
        If cb IsNot Nothing AndAlso cb.Checked Then
            SelectedBox = True
            Dim RID As Integer = Convert.ToInt32(GVP.DataKeys(row.RowIndex).Value)
        Else
            ShowMessage("You did not select anything")
        End if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:02:29.840

很难说出您在这里尝试做什么以及如何进行测试，但我猜这是因为您没有检查行类型。所以第一行实际上是标题，因此根本没有复选框（你会收到消息）。

```
For Each row As GridViewRow In GVP.Rows
    If row.RowType = DataControlRowType.DataRow Then
        Dim cb As CheckBox ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:24:01.827

尝试这个：

```
For Each row As GridViewRow In gvTest.Rows
    Dim cb As CheckBox = row.FindControl("SelectCb")
    If (CType(row.FindControl("SelectCb"), CheckBox)).Checked = True Then
       SelectedBox = True
       Dim RID As Integer = Convert.ToInt32(gvTest.DataKeys(row.RowIndex).Value)
    End If    
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:08:03.873

问题确实存在于`Page_Load`我将网格绑定到数据源的位置。我删除了它，问题就解决了。

# python - Django Social Auth中的AuthAlreadyAssociated异常

> ID：13018147
> 
> 赞同：16
> 
> 时间：2012-10-22T19:12:59.043
> 
> 标签：python, django, django-socialauth

在我使用 Facebook（比如说 fbuser）或 Google（googleuser）创建用户之后。如果我通过普通 django 管理员（普通用户）创建另一个用户，并在第三个用户（普通用户）登录时尝试使用 Facebook 或 Google 再次登录，则会引发错误异常 AuthAlreadyAssociated。

1.  理想情况下，它应该抛出一个错误，称为您已经以用户 normaluser 身份登录。

2.  或者它应该注销普通用户，并尝试与已经与 FB 或 Google 关联的帐户关联，视情况而定。

如何实现上述两个功能之一？欢迎所有建议。

此外，当我尝试自定义 SOCIAL_AUTH_PIPELINE 时，无法使用 FB 或 Google 登录，它会强制登录 URL /accounts/login/

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T14:36:39.430

DSA 目前不会注销帐户（或刷新会话）。`AuthAlreadyAssociated`突出显示当前用户未关联到当前尝试使用的社交帐户的场景。有几个解决方案可能适合您的项目：

1.  定义一个子类`social_auth.middleware.SocialAuthExceptionMiddleware`并覆盖默认行为 ( `process_exception()`) 以按照您喜欢的方式重定向或设置您喜欢的警告。

2.  `social_auth.backend.pipeline.social.social_auth_user`添加注销当前用户而不是引发异常的管道方法（替换）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-05T18:09:51.040

想知道如何在 python-social-auth 版本 3+ 下覆盖 social_user 管道的人的解决方案

**在您的 settings.py 中：**

```
SOCIAL_AUTH_PIPELINE = (
    'social_core.pipeline.social_auth.social_details',
    'social_core.pipeline.social_auth.social_uid',
    'social_core.pipeline.social_auth.auth_allowed',
    # Path to your overrided method
    # You can set any other valid path.
    'myproject.apps.python-social-auth-overrided.pipeline.social_auth.social_user',
    'social_core.pipeline.user.get_username',
    'social_core.pipeline.user.create_user',
    'social_core.pipeline.social_auth.associate_user',
    'social_core.pipeline.social_auth.load_extra_data',
    'social_core.pipeline.user.user_details',
) 
```

**在您覆盖的 social_user 中**：

```
from django.contrib.auth import logout

def social_user(backend, uid, user=None, *args, **kwargs):
    provider = backend.name
    social = backend.strategy.storage.user.get_social_auth(provider, uid)
    if social:
        if user and social.user != user:
            logout(backend.strategy.request)
        elif not user:
            user = social.user
    return {'social': social,
            'user': user,
            'is_new': user is None,
            'new_association': False} 
```

如果需要，您可以删除注释行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-08T19:33:17.133

我解决这个问题的方法有点不同，我没有在管道中解决这个问题，而是首先确保用户永远不会被传递到管道中。这样，即使 social_auth.user 与登录用户不匹配，social_auth.user 也会在当前登录用户之上登录。

我认为这就像覆盖`complete`动作一样容易。

网址.py

```
url(r'^complete/(?P<backend>[^/]+)/$', 'account.views.complete', name='complete'), 
```

帐户/views.py

```
from social.actions import do_complete
from social.apps.django_app.utils import strategy
from social.apps.django_app.views import _do_login

@csrf_exempt
@strategy('social:complete')
def complete(request, backend, *args, **kwargs):
    """Override this method so we can force user to be logged out."""
    return do_complete(request.social_strategy, _do_login, user=None,
                       redirect_name=REDIRECT_FIELD_NAME, *args, **kwargs) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-27T21:28:17.240

我所做的是：

1.  定义一个继承自的类`SocialAuthExceptionMiddleware`

2.  实现方法`process_exception`，

3.  将实现的类添加`MIDDLEWARE`到**`settings.py`**.

在**`middleware.py`**中，它应该在您的应用程序的目录中，即`views.py`与您的应用程序关联的文件的同一目录中，定义以下类：

```
from django.shortcuts import redirect
from django.urls import reverse

from social_core.exceptions import AuthAlreadyAssociated

class FacebookAuthAlreadyAssociatedMiddleware(SocialAuthExceptionMiddleware):
    """Redirect users to desired-url when AuthAlreadyAssociated exception occurs."""
    def process_exception(self, request, exception):
        if isinstance(exception, AuthAlreadyAssociated):
            if request.backend.name == "facebook":
                message = "This facebook account is already in use."
                if message in str(exception):
                    # Add logic if required

                    # User is redirected to any url you want
                    # in this case to "app_name:url_name"
                    return redirect(reverse("app_name:url_name")) 
```

在**`settings.py`**中，将实现的类添加到`MIDDLEWARE`列表中：

```
MIDDLEWARE = [
    # Some Django middlewares
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.locale.LocaleMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
    "social_django.middleware.SocialAuthExceptionMiddleware",

    # the middleware you just implemented
    "app_name.middleware.FacebookAuthAlreadyAssociatedMiddleware",
] 
```

`AuthAlreadyAssociated`这解决了我的问题，并且在引发异常时我能够处理控制流。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-14T13:35:43.613

我遇到了同样的问题。我通过在设置中插入以下代码来解决它

```
AUTHENTICATION_BACKENDS = (
    '...',
    'social_core.backends.facebook.FacebookOAuth2',
    '...',
)
SOCIAL_AUTH_PIPELINE = (
    '...',
    'social_core.pipeline.user.user_details',
    '...',
) 
```

# itext - 带图像的 IText Pdf 阅读器

> ID：13018148
> 
> 赞同：-1
> 
> 时间：2012-10-22T19:13:01.260
> 
> 标签：itext, pdf-reader

我有 2 列格式的 pdf。我能够将其解析为简单的文本，但这些 pdf 之间也有图像。结果，对于中间有图像的pdf的特定页面，我的文本输出变得混乱。

例如，考虑 2 列页面格式

图像文本2

图像图像

图片文字3

文本 1 图像

```
 Text4 
```

输出是 Text4 Text3 Text2 Text1 而不是 Text1 Text2 Text3 Text4

有什么解决方案可以按正确的顺序阅读文本吗？

我正在使用以下代码

```
public void parsePdf(String pdf, String txt) throws IOException {

    PdfReader reader = new PdfReader(pdf);
    PdfReaderContentParser parser = new PdfReaderContentParser(reader);
    PrintWriter out = new PrintWriter(new FileOutputStream(txt));
    TextExtractionStrategy strategy;
    for (int i = 76; i <= reader.getNumberOfPages(); i++) {
       strategy = parser.processContent(i, new SimpleTextExtractionStrategy());
        out.println(strategy.getResultantText());
    }
    out.flush();
    out.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:48:08.443

您正在使用 SimpleTextExtractionStrategy。此策略假设页面内容中的字母组已经处于合理的顺序。尝试使用 LocationTextExtractionStrategy 来对这些字母组进行排序。

不过，您似乎更喜欢有趣的顺序。根据你的问题，你想得到*Text1 Text2 Text3 Text4* for

```
Image Text2
Image Image
Image Text3
Text1 Image
      Text4 
```

但是，LocationTextExtractionStrategy 将主要从上到下排序，其次是从左到右。因此，您将获得*Text2 Text3 Text1 Text4*。根据您的要求，您应该复制 LocationTextExtractionStrategy 并将其更改为按照您需要的方式对文本片段进行排序。

但是，如果所需的顺序是由于内容被解释为两列，您可能希望通过过滤策略输入来分别解析列：

```
Rectangle rect = new Rectangle(x1, y1, x2, y2);
RenderFilter filter = new RegionTextRenderFilter(rect);
TextExtractionStrategy strategy = new FilteredTextRenderListener(
    new LocationTextExtractionStrategy(), filter); 
```

授予 iText in Action，第 2 版示例[ExtractPageContentArea](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter15/ExtractPageContentArea.java)。

问候，迈克尔

# c++ - 在 Linux C++ 上检测 keydown 和 keyup 事件

> ID：13018150
> 
> 赞同：2
> 
> 时间：2012-10-22T19:13:07.110
> 
> 标签：c++, linux, events, keydown, keyup

> **可能重复：**
> [访问 C 中的击键](https://stackoverflow.com/questions/8276394/access-keystrokes-in-c)
> [监视 Ubuntu 中的键盘键](https://stackoverflow.com/questions/12746869/monitoring-keyboard-keys-in-ubuntu)

我想检测程序中的每个 keydown 和 keyup 事件并为其加上时间戳（是的，我的意思是*keydown*和*keyup*而不仅仅是 keypress）以及按下了什么键。我可以通过使用诸如 GTK 之类的 APi 来做到这一点，但我希望尽可能简单和低级，以避免库的开销影响时间以及编写更少的代码。

我已经在谷歌上搜索了一段时间，到目前为止已经找到了大量关于如何在 Windows 上执行此操作的内容，这对我没有帮助，因为我使用的是 Linux 系统，以及如何检测 Linux 上的按键，但是不是keyup keydown。

谁能告诉我需要使用什么系统调用、库等，以便使用 C++ 中的命令行程序在 Linux 系统上捕获 keydown 和 keyup 事件？如果您有教程或代码示例的链接，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:28:25.617

您可以阅读原始设备，我没有尝试过，但这篇博文看起来很有希望： [https ://web.archive.org/web/20180108194231/http://www.thelinuxdaily.com/2010/05/grab- raw-keyboard-input-from-event-device-node-devinputevent/](https://web.archive.org/web/20180108194231/http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/)（是~~[http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/](http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/)~~但那个网站下线了）

所以本质上你是直接从 /dev/input/*

您可以通过运行`sudo cat /dev/input/eventX`其中 X 是该目录中列出的事件设备之一（其中一个将是您的键盘。我确信有一种以编程方式查找哪个事件设备的好方法，但您可以快速找出通过查看 /dev/input/by-id/ 或直接从其中一个符号链接中读取。）

* * *

*注意：这将让您一直使用*键盘输入，而不仅仅是在您的窗口处于焦点时..（您的程序甚至不需要在 xterm 中运行，甚至不需要在 pty 中运行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:25:42.787

实际上，如果没有库，您将无法做到这一点。如果您想要一些开销很小的东西，我建议您使用[ncurses](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/intro.html#WHATIS)。如果您绝对必须在没有库的情况下执行此操作，请查看 ncurses 如何实现它。当然，它会非常复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:13:03.533

我会考虑看看 OIS（面向对象的输入系统）库。它非常易于使用，具有良好的 OO 设计并且是跨平台的。有关教程和一些代码，请查看[http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Using+OIS](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Using+OIS)。

# c++ - 分段错误 11：gdb 原因 13

> ID：13018151
> 
> 赞同：0
> 
> 时间：2012-10-22T19:13:10.323
> 
> 标签：c++, memory

这是我的代码：

```
int main(){

long userInput;
long placeArray[userInput +1];
long divisionPlace, modPlace;
long number = userInput;
long two = 2;

cout << "enter: ";
cin >> userInput;

for (int i = 1; i < userInput; i++) {
    divisionPlace = number / two;
    modPlace = number % two;
    placeArray[number - i ] = modPlace;
}

for (int i = 0; i < userInput; i++) {
    cout << placeArray[i] << " ";
}
cout <<endl;

return 0;
} 
```

有人可以指出我在代码中的错误，为什么我处理错误的内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:17:52.947

正如评论中提到的，您在`userInput`此处初始化之前正在使用它：

```
long placeArray[userInput +1]; 
```

因此`placeArray`，当您在下面的循环中访问它时，它不会具有您期望的大小。这将导致写入您未分配的内存，并且会弄乱您的堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:18:47.060

您的数组分配不正确。

```
long userInput;

cout << "enter: "; 
cin >> userInput; 

if (userInput <= 0)
{
   cerr << "error" << endl;
   exit(1);
}

long* placeArray = new long[userInput +1]; 

long divisionPlace, modPlace; 
long number = userInput; 
long two = 2; 

for (int i = 1; i < userInput; i++) { 
    divisionPlace = number / two; 
    modPlace = number % two; 
    placeArray[number - i ] = modPlace; 
} 

for (int i = 0; i < userInput; i++) { 
    cout << placeArray[i] << " "; 
} 
cout <<endl; 

delete [] placeArray; 
```

# php - 通过映射推导出验证约束

> ID：13018153
> 
> 赞同：0
> 
> 时间：2012-10-22T19:13:20.543
> 
> 标签：php, symfony

我正在使用 Symfony 2.0（不是 2.1），我想知道是否有办法通过其他相关信息（例如 Doctrine mapping）自动推断验证约束。

我想要做的具体事情是添加到映射为`string`验证约束的所有属性`MaxLength`，其`limit`参数对应`length`于 Doctrine 映射中指定的参数。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:48:55.870

我将扩展默认的断言注释映射，然后通过 DI 注入教义映射。检查从学说的映射，如果它是字符串添加这两个提到的断言。

# c - 我可以在哪里放置数组下标？

> ID：13018154
> 
> 赞同：4
> 
> 时间：2012-10-22T19:13:21.890
> 
> 标签：c

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

[这个问题](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)问为什么

```
a[5] == 5[a] 
```

它在所有方面都得到了回答，除了...

为什么首先允许在整数之后放置数组下标？为什么不允许写类似的东西

```
[a]5 
```

或者

```
[5]a 
```

还是放在`[]`其他奇怪的地方？

换句话说，允许数组索引运算符的定义是什么？

**编辑 I：** 我收到的引用标准的答案起初有点难以掌握。但在响应者的帮助下，我现在明白了。在指针或整数之后允许使用数组下标（方括号）。如果它跟随一个指针，那么括号内的内容必须是一个整数。如果它跟随一个整数，那么括号内的内容必须是一个指针。

我接受了不那么赞成的答案，因为他在让我理解标准引用方面做了更多的帮助。但是严格引用标准的答案也是正确的。只是一开始更难理解。

**编辑二：** 我不认为我的问题是重复的。我的问题是关于数组下标运算符的允许语法。它是由标准中的引用来回答的，这些引用从未出现在我应该重复的问题中。它是相似的，是的，但不是重复的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:16:34.550

在此处 C 标准的数组下标运算符部分定义：

> (C99, 6.5.2.1p2) "后缀表达式后跟方括号 [] 中的表达式是数组对象元素的下标指定。下标运算符 [] 的定义是 E1[E2] 等同于(*((E1)+(E2)))。”

以及关于 and 的允许`E1`类型`E2`：

> （C99, 6.5.2.1p1）“其中一个表达式应具有类型''指向对象类型的指针''，另一个表达式应具有整数类型，并且结果具有类型''type''。”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T19:28:06.007

来自 C11 标准的后缀表达式语法：

```
postfix-expression:
    primary-expression
    postfix-expression [ expression ]
    postfix-expression ( argument-expression-listopt )
    postfix-expression . identifier
    postfix-expression -> identifier
    postfix-expression ++
    postfix-expression --
    ( type-name ) { initializer-list }
    ( type-name ) { initializer-list , } 
```

来自 C11 标准的主要表达式语法：

```
primary-expression:
    identifier
    constant
    string-literal
    ( expression )
    generic-selection 
```

等等。5 是一个整数常量，所以 5[a] 匹配这个：

```
postfix-expression [ expression ] 
```

希望这就是你的意思。

编辑：我忘了提到这一点，但其他评论已经做了：

*其中一个表达式应具有类型“指向完整对象类型的指针”，另一个表达式应具有整数类型，并且结果具有类型“类型”。*

需要这种“整数类型”来禁止无意义的浮点常量下标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:16:48.720

`a[5]`转换为`*(a+5)`。加法是可交换的，所以`a+5 = 5+a`可以翻译回`5[a]`。我同意这是一个相当无用的功能，但是地狱，为什么不呢？

# ios - FW 和 TW 的自定义登录

> ID：13018156
> 
> 赞同：1
> 
> 时间：2012-10-22T19:13:28.690
> 
> 标签：ios, facebook, sharekit

我在 FB iOS SDK 和 ShareKit 上进行了搜索，似乎不可能拥有自己的自定义登录屏幕。我说的对吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:43:44.217

是的，不幸的是。他们使用 OAuth，用户必须在他们的网页或 iPhone 的设置中输入凭据。

# python - 从脚本自动提交和推送

> ID：13018157
> 
> 赞同：1
> 
> 时间：2012-10-22T19:13:28.700
> 
> 标签：python, macos, mercurial, build-automation

我想要的是运行一个脚本来自动检查已提交到特定目录的新资产（不是代码的文件），然后每隔一段时间自动提交这些文件并推送它们。

我可以制作一个通过命令行执行此操作的脚本，但我很好奇 mercurial 是否为此提供了任何特殊功能，特别是我真的很想要某种返回错误代码，以便我的脚本知道进程是否在任何一点，以便我可以向特定开发人员发送包含错误的电子邮件。例如，如果由于某种原因推送失败，因为首先需要拉取，我希望脚本获取代码，以便它知道这一点并可以正确处理它。

我已经尝试对此进行研究，但只能找到诸如在提交后自动推送之类的东西，而这并不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:01:38.460

您可以随时检查已使用命令的退出代码

*   `hg add`（如果 WC 中出现了新的、未版本化的文件）“如果所有文件都成功添加，则返回 0”：非零表示“这里有些麻烦，不是所有文件都添加了”
*   `hg commit`“成功返回 0，如果没有改变则返回 1”：1 表示“无提交，无推送”
*   `hg push`“如果推送成功返回 0，如果没有推送则返回 1”

# android - 单击时播放随机语音文件

> ID：13018161
> 
> 赞同：2
> 
> 时间：2012-10-22T19:13:47.663
> 
> 标签：android, audio, random, resources, playback

我有这个非常基本的应用程序，它有 1 个按钮和 X 个语音文件。语音文件位于 raw/ 下的 res/ 文件夹中。

点击按钮后，我希望应用程序播放随机语音文件。这是我到目前为止所拥有的：

```
Button playNasr = (Button) findViewById(R.id.button1);
    playNasr.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            rand = randomGenerator.nextInt(6) + 1;
            // here's where I'm at a loss, I want to be able to concatenate
            // the random number to the "voice00" string to form
            // "voice001/2/3/etc..." in correspondence to how my voice files
            // are named.
            mp = MediaPlayer.create(Main.this, R.raw.voice00) + rand;
            mp.start();
        }
    }); 
```

任何帮助表示赞赏，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:24:56.060

你应该尝试这样的事情：

```
String voiceStr = "voice00";
MediaPlayer mp = new MediaPlayer();
Resources res = getResources();
String pkgName = getPackageName();

playNasr.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        rand = randomGenerator.nextInt(6) + 1;
        // "voice00x"
        String id = voiceStr + rand;
        // Get raw resource ID
        int identifier = res.getIdentifier(id, "raw", pkgName);
        AssetFileDescriptor afd = res.openRawResourceFd(identifier);

        // Reuse MediaPlayer or else you will exhaust resources
        mp.reset();
        mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength();
        mp.prepare();
        mp.start();
    }
} 
```

这样您就可以重用您的`MediaPlayer`实例（如果您还没有遇到错误，请尝试反复点击您的按钮 - 您最终*会*收到错误）并且可以动态设置数据源。您可能希望对其进行优化以将整数格式化为“001”、“001”等，并且也能够处理“010”，但我只是为了示例而对其进行了硬编码。

# asp.net - 如何使用 XPath 和 ASP.NET 中继器来模拟外键？

> ID：13018169
> 
> 赞同：1
> 
> 时间：2012-10-22T19:14:09.723
> 
> 标签：asp.net, xpath, webforms

我正在学习 Web 表单，并且正在尝试转换我一直在构建的订单表单。我了解了 XmlDataSource 来获取我的 XML 文件，并了解了 Repeater 来构建模板来呈现数据，而且一切都很好。

首先是我的 XML 如何工作的示例，然后是问题：

```
<items>
    <item id="sheet-1">
        <name>Sheet the First</name>
        <price id="single" />
    </item>

    <item id="sheet-2">
        <name>Sheet the Second</name>
        <price id="double" />
    </item>
</items>

<costs>
    <cost id="single">.10</cost>
    <cost id="double">.20</cost>
    <cost id="triple">.30</cost>
</costs> 
```

通过我的预 Web 表单设置，我创建了一个`foreach`循环来将所有成本 ID 和值存储在一个数组中，然后当我遍历每个项目时，我将价格 ID 与成本 ID 匹配，然后输出相应的值。

我想在中继器中创建相同的效果。我怎么在脑海中看到它是这样的......

```
<p class="cost-line">
<%#XPath("../../costs/cost[@id='XPath("price/@id")']") %>
</p> 
```

但我知道这种语法不太可能奏效。

我不完全确定如何措辞这个问题。我相信我想要做的是将外键与 XPath 和中继器一起使用。这可能吗？如果没有，有什么替代方法可以到达我想去的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:38:08.097

假设您正在使用 XDocument 并且您以这种方式绑定：

```
yourRepeater.DataSource = yourXDocument.Root.Element("items").Elements("item").ToList();
yourRepeater.DataBind(); 
```

你可以有一个 getCost 方法：

```
protected String getCost(XElement xel) 
  {
   return xel
            .Parent
            .Parent
            .Element("costs")
            .Elements("cost")
            .Where(x=>x.Attribute("id").Value==xel.Element("price").Attribute("id").Value)
            .First().Value;
  } 
```

然后尝试这样的事情：

```
 <p class="cost-line">
    <%#this.getCost((XElement)Container.DataItem) %>
 </p> 
```

希望这会有所帮助

# r - R中两个列表的元素组合

> ID：13018173
> 
> 赞同：15
> 
> 时间：2012-10-22T19:14:16.420
> 
> 标签：r, elementwise-operations

假设我有两个列表：

```
list.a <- as.list(c("a", "b", "c"))

list.b <- as.list(c("d", "e", "f")) 
```

我想递归地组合这些列表，这样结果将是一个组合元素的列表，作为一个向量，如下所示：

```
[[1]]
[1] a d

[[2]]
[1] a e

[[3]]
[1] a f

[[4]]
[1] b d 
```

等等。我觉得我在这里错过了一些相对简单的东西。有什么帮助吗？

干杯。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T19:18:33.060

`expand.grid(list.a, list.b)`在 a 中为您提供所需的结果`data.frame`。这往往是在 R 中处理数据最有用的格式。但是，您可以通过调用`apply`and获得您要求的确切结构（保存排序） `lapply`：

```
result.df <- expand.grid(list.a, list.b)
result.list <- lapply(apply(result.df, 1, identity), unlist) 
```

如果您希望此列表按第一个元素排序：

```
result.list <- result.list[order(sapply(result.list, head, 1))] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-25T20:29:45.037

您想要`mapply`（如果“递归”是指“并行”）：

```
mapply(c, list.a, list.b, SIMPLIFY=FALSE) 
```

或者，这可能是您想要的更多：

```
unlist(lapply(list.a, function(a) lapply(list.b, function (b) c(a, b))), recursive=FALSE) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-27T12:56:15.817

很惊讶没有人提到这个简单的单行：

```
as.list(outer(list.a,list.b, paste))

[[1]]
[1] "a d"

[[2]]
[1] "b d"

[[3]]
[1] "c d"

[[4]]
[1] "a e" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-22T19:40:43.913

这会让你得到你正在寻找的东西：

```
unlist(lapply(list.a, function(X) {
    lapply(list.b, function(Y) {
        c(X, Y)
    })
}), recursive=FALSE) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-22T22:37:27.833

这是一个您可以将列表传递给以展开的函数

```
expand.list <- function(...){
   lapply(as.data.frame(t((expand.grid(...)))),c, recursive = TRUE, use.names = FALSE)}

 expand.list(list.a, list.b) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T19:52:16.117

这是一种有点蛮力的方法，考虑到它们是相同的维度，使用 append 函数递归地将 list.b 附加到 list.a。

```
# CREATE LIST OBJECTS 
  list.a <- as.list(c("a", "b", "c"))
  list.b <- as.list(c("d", "e", "f"))

# CREATE AN EMPTY LIST TO POPULATE      
list.ab <- list()

# DOUBLE LOOP TO CREATE RECURSIVE COMBINATIONS USING append
    ct=0    
      for( i in 1:length(list.a) ) {    
        for (j in 1:length(list.b) ) {
          ct=ct+1
           list.ab[[ct]] <- append(list.a[[i]], list.b[[j]])     
         } 
       }

# PRINT RESULTS
list.ab 
```

# iis-7.5 - 安装 WEBmatrix 后，VS2012 和 Webmatrix 都无法正常工作

> ID：13018177
> 
> 赞同：1
> 
> 时间：2012-10-22T19:14:33.967
> 
> 标签：iis-7.5, visual-studio-2012, iis-8, webmatrix-2

我认为这是您遇到的问题。

这在我身上发生过两次。我已经安装了 VS 2012，它会在我的机器上自动安装 IIS 8。然后，当我安装 Webmatrix 时，它会安装 IIS 7.5，并且任何程序都无法正常工作。在 VS 2012 中，我无法在 localhost 中运行 MVC Web 项目，也无法在 WebMatrix 中创建项目。上次我做了系统备份。所以，我不得不离开 Webmatrix 来保存 VS2012。

[然后我再次安装了 IIS 7.5，检查这](http://www.iis.net/learn/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)两个东西。但同样的问题仍然存在。

我想知道这个问题的准确答案以及克服这个问题的可靠答案。Web Matrix 依赖于 IIS7.5，VS2012 使用的是 IIS8。如何在同一台机器上同时使用这两个应用程序。

是否可以在同一台机器上运行 2 个 IIS 版本？

但是在安装 IIS 7.5 之后，我的本地主机正在工作，但我的 VS 和 Webmatrix 都没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:48:43.983

我有同样的问题。似乎当我安装 VS 2012 时，IIS 8 随包一起安装了。安装 Webmatrix 2 安装了 IIS 7.5。不知道为什么当系统有 IIS 8 时会安装 IIS 7.5。
无论如何，当我尝试从 Visual Studio (Selected IIS Express) 或 WebMatrix 运行我的网站时，我收到了 HTTP 500 错误。
我通过卸载 IIS 7.5、修复 IIS 8.0 解决了这个问题，然后使用 IIS 7.5 的密钥清除了我的注册表。请参阅以下网站了解分步过程。

[http://www.latringo.me/post/2012/05/30/IIS-75-Express-kills-IIS-80-Express.aspx](http://www.latringo.me/post/2012/05/30/IIS-75-Express-kills-IIS-80-Express.aspx)

我的网站现在运行良好:)。

# python - Pygame：显示移动次数、计时器和获胜/失败屏幕

> ID：13018180
> 
> 赞同：0
> 
> 时间：2012-10-22T19:14:39.190
> 
> 标签：python, pygame

我正在制作一种益智游戏，有人建议我使用 Pygame。我看过一些教程，但我无法展示某些东西。

*   移动次数 - 我基本上是在寻找可以计算数字 1 - 6 被按下的次数的东西。
*   计时器 - 我希望它在有人按下键时启动，并在满足条件后停止。
*   获胜/失败屏幕 - 我希望根据是否满足某些标准来弹出用户获胜或失败的信息。

任何有关显示这些内容的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:46:43.897

首先熟悉 pygame 字体模块：[http](http://www.pygame.org/docs/ref/font.html) ://www.pygame.org/docs/ref/font.html 您需要一种向用户显示字符串和数字的方法。只需创建一个字体对象，并使用字符串渲染表面，以便稍后像您拥有的任何其他位图一样对它们进行 blit。

我还建议查看时间模块：pygame 文档真的很有帮助：[http](http://www.pygame.org/docs/ref/time.html) ://www.pygame.org/docs/ref/time.html 。在这里，您将使用该模块创建一个小类 Timer，并带有一个 Clock 对象来停止和重置，以及更新功能。在更新函数中，您可以将增量（最后一次和最近一次调用 tick() 之间的差异）添加到总时间，或者简单地依赖于时间模块中给出的函数。满足条件时可以调用停止。

最后，对于屏幕，您可能希望将游戏/应用程序划分为多个状态，其中游戏状态仅在播放标志 == true 时才会呈现和循环。游戏结束后，您可以将状态切换为赢/输状态以显示信息，并且可能会提示玩家是否想再次玩游戏。

# database - 我应该使用 sqlite 还是 NTFS 进行图片存储

> ID：13018181
> 
> 赞同：3
> 
> 时间：2012-10-22T19:14:39.097
> 
> 标签：database, sqlite, ntfs

我的情况取决于情况。我正在编写一个类似于 iTunes、Windows Media Player 和 Winamp 的音乐库管理器/播放器。我已经让所有的 ID3 标签代码都在工作，现在我已经为数据库做好了准备。据我发现，读取数据库、检查文件的 MD5 哈希值并将其与存储的哈希值进行比较并在歌曲更改时更新数据库比直接读取每首歌曲的 ID3 标签要快得多。 . 话虽如此，我刚刚启动并运行了一个 sqlite 数据库。

现在我不确定是否应该将专辑封面存储在数据库或文件系统中。我的代码可以自动将专辑封面重新调整为 300x300 像素，因此所有图片的文件大小通常在 15-30 KB 左右。这对于普通大小的图像和 14.8 MB 大小的图像都是如此。所以平均而言，我需要存储 22.5 KB 大小的图片。

这是取决于情况的部分；我需要决定在包含 100 首歌曲和 20,000 首歌曲的音乐库中保持高效。假设所有歌曲都有专辑封面，哪种方法更好：使用子目录的 sqlite 数据库或 NTFS 文件系统以加快加载时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:36:12.227

通常，数据库在存储 BLOB 方面并不是那么出色，但您已经在显着减小 BLOB 的大小，从而减少问题。

另外，请记住，为每首歌曲存储一个 blob 可能会完全浪费空间，因为您很可能处于多首歌曲共享同一个 blob 的情况。

由于图像尺寸较小，我会将它们存储在数据库中并调整架构以确保您不会在其中存储具有相同图像的多个 blob。这也使得确保数据一致变得更加容易，因为您没有将部分数据放在一个地方（数据库）和文件系统上的一些其他数据，用户可能会意外删除它。

一旦您谈论更大的 blob，您可能应该将它们存储在磁盘上而不是数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:38:41.117

当您将图像放入包含其他歌曲数据的同一张表中时，所有对歌曲数据的查询也必须从磁盘加载一些图像数据。

如果将图像放入与主歌曲表具有 1:1 关系的另一个表中，则可以避免这种影响。如果您将该表放入一个单独的数据库中，您可以将图像数据进一步分离[`ATTACH`](http://www.sqlite.org/lang_attach.html)到主数据库中；这甚至允许您以不同的方式配置缓存。这与存储在磁盘上的图像应该没有速度差异。

如果您经常需要将图像导出到文件（以便在外部程序中编辑或显示），那么首先将图像存储在文件系统中可能会更容易。
此外，将图像作为文件将使增量备份更容易（如果这是一个问题）。

# hungarian-notation - `m_` 变量前缀是什么意思？

> ID：13018189
> 
> 赞同：186
> 
> 时间：2012-10-21T14:54:04.333
> 
> 标签：hungarian-notation

我经常在主要与游戏开发相关的教程、示例和其他代码中看到**`m_`用于变量**（`m_World`、 、...）的前缀。`m_Sprites`

为什么人们`m_`要为变量添加前缀？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-10-21T14:56:08.367

这是定义作为成员变量的变量的典型编程实践。因此，当您稍后使用它们时，您无需查看它们的定义位置即可知道它们的范围。如果您已经知道范围并且正在使用诸如*intelliSense 之*类的东西，这也很棒，您可以开始`m_`并显示所有成员变量的列表。匈牙利符号的一部分，请参阅[此处示例](http://en.wikipedia.org/wiki/Hungarian_notation#Examples)中有关范围的部分。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2014-10-25T15:20:24.580

在**Clean Code: A Handbook of Agile Software Craftsmanship**中，明确建议不要使用此前缀：

> 您也不再需要为成员变量添加前缀`m_`。你的类和函数应该足够小以至于你不需要它们。

还有一个例子（C#代码）：

不良做法：

```
public class Part
{
    private String m_dsc; // The textual description

    void SetName(string name)
    {
        m_dsc = name;
    }
} 
```

好习惯：

```
public class Part
{
    private String description;

    void SetDescription(string description)
    {
        this.description = description;
    }
} 
```

在显式歧义（*即*`description`成员和`description`参数）的情况下，我们使用语言结构来引用成员变量`this`：

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-01-14T18:24:37.257

这是 C++ 中的常见做法。这是因为在 C++ 中，成员函数和成员变量不能有相同的名称，而且 getter 函数的命名通常不带“get”前缀。

```
class Person
{
   public:
      std::string name() const;

   private:
      std::string name; // This would lead to a compilation error.
      std::string m_name; // OK.
}; 
```

* * *

> ```
> main.cpp:9:19: error: duplicate member 'name'
>       std::string name;
>                   ^
> main.cpp:6:19: note: previous declaration is here
>       std::string name() const;
>                   ^
> 1 error generated. 
> ```
> 
> [http://coliru.stacked-crooked.com/a/f38e7dbb047687ad](http://coliru.stacked-crooked.com/a/f38e7dbb047687ad)

“m_”表示“成员”。前缀“_”也很常见。

您不应该在通过使用不同约定/语法来解决此问题的编程语言中使用它。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-21T22:25:43.623

`m_`前缀通常用于成员变量 - 我认为它的主要优点是它有助于在公共属性和支持它的私有成员变量之间建立明显的区别：

```
int m_something

public int Something => this.m_something; 
```

为支持变量建立一致的命名约定会有所帮助，而`m_`前缀是这样做的一种方式——一种适用于不区分大小写的语言的方式。

这有多有用取决于您使用的语言和工具。具有强大重构工具和智能感知的现代 IDE 对此类约定的需求较少，这当然不是这样做的唯一方法，但无论如何都值得了解这种做法。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-06-15T08:39:07.190

如其他答案所述，`m_`前缀用于指示变量是类成员。这与匈牙利表示法不同，因为它不表示变量的类型，而是表示它的上下文。

我`m_`在 C++ 中使用，但在其他一些必须使用“this”或“self”的语言中不使用。我不喜欢看到'this->' 与 C++ 一起使用，因为它会使代码混乱。

另一个答案`m_dsc`是“不良做法”和“描述”；是“好的做法”，但这是一个红鲱鱼，因为问题是缩写。

另一个答案说键入`this`会弹出 IntelliSense，但任何好的 IDE 都会有一个热键来为当前类成员弹出 IntelliSense。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-10-25T15:47:28.153

Lockheed Martin 使用 3 前缀命名方案，使用起来非常棒，尤其是在阅读其他人的代码时。

```
 Scope          Reference Type(*Case-by-Case)   Type

   member   m     pointer p                       integer n
   argument a     reference r                     short   n
   local    l                                     float   f
                                                  double  f
                                                  boolean b 
```

所以...

```
int A::methodCall(float af_Argument1, int* apn_Arg2)
{
    lpn_Temp = apn_Arg2;
    mpf_Oops = lpn_Temp;  // Here I can see I made a mistake, I should not assign an int* to a float*
} 
```

拿走它的价值。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-04T09:16:38.377

正如许多其他回复中所述，m_ 是表示成员变量的前缀。它在/曾经在 C++ 世界中普遍使用，并且也传播到其他语言，包括 Java。

*在现代 IDE 中，它是完全多余的，因为语法突出显示哪些变量是本地*变量以及哪些是*成员*变量是显而易见的。然而，到 90 年代后期出现语法高亮时，该约定已经存在多年并且已经牢固确立（至少在 C++ 世界中）。

我不知道您指的是哪些教程，但我猜他们使用约定是由于以下两个因素之一：

*   它们是 C++ 教程，由习惯于 m_ 约定的人编写，和/或...
*   他们用纯文本（等宽）编写代码，没有语法高亮，因此 m_ 约定有助于使示例更清晰。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-22T12:21:33.427

为了完成当前的答案并且由于问题不是特定于语言的，一些 C 项目使用前缀`m_`来定义特定于文件`g_`的全局变量 - 以及范围大于它们定义的文件的全局变量。
在这种情况下，使用前缀定义的全局变量`m_` 应定义为`static`.

有关使用此约定的项目示例，请参阅[EDK2（一种 UEFI 开源实现）编码约定。](https://edk2-docs.gitbooks.io/edk-ii-c-coding-standards-specification/content/4_naming_conventions/43_identifiers.html#4332-any-variable-with-file-scope-or-better-shall-be-prefixed-by-an-m-or-g)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-15T21:17:34.327

我还没有看到的一个论点是`m_`可以使用诸如前缀之类的前缀来防止名称与`#define`'d 宏's 冲突。

正则表达式从 curses/ncurses`#define [a-z][A-Za-z0-9_]*[^(]`中搜索。`/usr/include/term.h`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-07T05:31:40.843

其他人提到它意味着一个班级成员。Qt 是一个流行的 C++ 框架，它使用这种表示法，所以很多 C++ GUI 教程都使用`m_`. 你可以看到他们几乎所有的例子都`m_`用于班级成员。就个人而言，我使用`m_`它是因为它比它短`this->`并且感觉紧凑。

# sql - 如何在 SQL 中编写查询？

> ID：13018192
> 
> 赞同：1
> 
> 时间：2012-10-22T19:15:19.903
> 
> 标签：sql

我已经在 SQL 中创建了一些表，它们如下：

```
CREATE TABLE Courses(
    CourseNo INTEGER CHECK(CourseNo>=100 AND CourseNo<=999) PRIMARY KEY,
    Title VARCHAR(100) NOT NULL,
    )

CREATE TABLE CourseSections(
    CourseNo INTEGER CHECK(CourseNo>=100 AND CourseNo<=999),
    SectionNo INTEGER,
    InstructorNo INTEGER NOT NULL,
    Year INTEGER,
    Semester INTEGER,
    RoomNo INTEGER NOT NULL,
    Weekday INTEGER NOT NULL,
    StartTime INTEGER NOT NULL,
    FinishTime INTEGER NOT NULL,
    Capacity INTEGER NOT NULL,
    PRIMARY KEY(CourseNo, SectionNo, Year, Semester)
    )

CREATE TABLE Instructor(
    InstructorNo INTEGER PRIMARY KEY,
    FirstName VARCHAR(40) NOT NULL,
    LastName VARCHAR(40) NOT NULL
    )

CREATE TABLE Students(
    StudentNo INTEGER PRIMARY KEY,
    FirstName VARCHAR(40) NOT NULL,
    LastName VARCHAR(40) NOT NULL,
    Year INTEGER,
    GPA REAL
    )

CREATE TABLE Enrollments(
    CourseNo INTEGER CHECK(CourseNo>=100 AND CourseNo<=999),
    Year INTEGER,
    Semester INTEGER,
    SectionNo INTEGER,
    StudentNo INTEGER,
    Grade REAL,
    PRIMARY KEY(CourseNo, Year, Semester, SectionNo, StudentNo)
    )

CREATE TABLE Areas(
    AreaName VARCHAR(40) PRIMARY KEY
    )

CREATE TABLE AreasOfCourse(
    CourseNo INTEGER CHECK(CourseNo>=100 AND CourseNo<=999),
    AreaName VARCHAR(40),
    PRIMARY KEY(CourseNo, AreaName)
    )

CREATE TABLE AreasOfInstructor(
    InstructorNo INTEGER,
    AreaName VARCHAR(40),
    PRIMARY KEY(InstructorNo, AreaName)
    ) 
```

现在，我想找到每门课程的标题，以及每学期该课程的总入学人数，我必须为此写一个查询。所以我的工作如下：

```
SELECT c1.Title, COUNT(e1.SectionNo), e1.Semester
FROM Courses c1, Courses c2, Enrollments e1, Enrollments e2
WHERE c1.CourseNo = c2.CourseNo AND e1.Semester = e2.Semester AND 
                  e1.SectionNo <> e2.SectionNo 
```

执行此查询时出现错误。错误是：

> 选择列表中的“Courses.Title”列无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

谁能帮我弄清楚如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:20:04.480

如果我没听错，您的查询有点过于复杂

```
 select
    C.Title,
    E.Semester,
    count(*) as Enrollment
from Courses as C
    left outer join Enrollments as E on E.CourseNo = C.CourseNo
group by
    C.Title,
    E.Semester 
```

[http://sqlfiddle.com/#!6/efa4b/1](http://sqlfiddle.com/#!6/efa4b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:25:56.953

函数 COUNT() 计算元组/行的数量并显示结果。如果您想计算结果中的所有行，那将为您提供单值结果，并且与您的其余结果不兼容。它会将单个结果放在哪里，对每一行重复它？

因此，您需要添加一个 GROUP BY 子句。通过这样做，您可以将多个元组组合在一起，然后它可以按每个组对它们进行计数，并显示每个组计数的单个结果。

```
SELECT c1.Title, COUNT(e1.SectionNo), e1.Semester
FROM Courses c1, Courses c2, Enrollments e1, Enrollments e2
WHERE c1.CourseNo = c2.CourseNo 
    AND e1.Semester = e2.Semester 
    AND e1.SectionNo <> e2.SectionNo
GROUP BY c1.Title, e1.Semester 
```

如错误消息所述，count 是一个聚合函数，仅显示 1 个结果，不能与具有多个元组的 SELECT 组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:18:23.187

错误消息实际上非常简单：您缺少一个`GROUP BY`子句

```
SELECT c1.Title, COUNT(e1.SectionNo), e1.Semester
FROM Courses c1, Courses c2, Enrollments e1, Enrollments e2
WHERE c1.CourseNo = c2.CourseNo AND e1.Semester = e2.Semester AND 
                  e1.SectionNo <> e2.SectionNo
GROUP BY c1.Title, e1.Semester 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:19:33.530

好吧，您需要按`c1.Title`and分组`e1.Semester`：

```
SELECT c1.Title, COUNT(e1.SectionNo), e1.Semester
FROM Courses c1, Courses c2, Enrollments e1, Enrollments e2
WHERE c1.CourseNo = c2.CourseNo 
    AND e1.Semester = e2.Semester 
    AND e1.SectionNo <> e2.SectionNo
GROUP BY c1.Title, e1.Semester 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T19:20:46.397

```
SELECT c1.Title, COUNT(e1.SectionNo), e1.Semester
    FROM Courses c1,
         Courses c2,
         Enrollments e1,
         Enrollments e2
     WHERE     c1.CourseNo = c2.CourseNo
           AND e1.Semester = e2.Semester
           AND e1.SectionNo <> e2.SectionNo 
```

无法保证 c1.Title 与不同的 e1.SectionNo 保持相同，因此 SQL 不知道该回答什么。

您必须按标题对结果进行分组（`GROUP BY c1.Title`在查询中添加 a），您将获得*行*数，而不是不同 SectionNo 的总数。

如果您想按 Title、SectionNo 和 Semester 计算总数，则必须对所有三列进行 GROUP BY：

```
SELECT c1.Title, e1.SectionNo, e1.Semester, COUNT(*) AS total
    FROM Courses c1,
         Courses c2,
         Enrollments e1,
         Enrollments e2
     WHERE     c1.CourseNo = c2.CourseNo
           AND e1.Semester = e2.Semester
           AND e1.SectionNo <> e2.SectionNo
     GROUP BY c1.Title, e1.SectioNo, e1.Semester; 
```

或者，如果您想要按标题和学期划分的部分，

```
SELECT c1.Title, e1.Semester, COUNT(e1.SectionNo) AS total
    FROM Courses c1,
         Courses c2,
         Enrollments e1,
         Enrollments e2
     WHERE     c1.CourseNo = c2.CourseNo
           AND e1.Semester = e2.Semester
           AND e1.SectionNo <> e2.SectionNo
     GROUP BY c1.Title, e1.Semester; 
```

# navigation - 在 Sencha Touch 中隐藏然后取消隐藏导航栏

> ID：13018195
> 
> 赞同：1
> 
> 时间：2012-10-22T19:15:34.080
> 
> 标签：navigation, touch, extjs, navbar

我知道这在 iOS 中是可能的，方法是将属性设置`navigationviewcontroller.navigationBar.hidden`为`YES`. 我在导航控制器中有一个登录视图。在这个视图中，我需要隐藏导航栏，并且已经隐藏了。问题是：当我推送另一个视图时，我需要显示导航栏。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T21:36:01.487

您可以使用这行代码简单地隐藏导航栏：

```
myNavigationView.getNavigationBar().hide(); 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T13:11:14.350

当我尝试以下操作时效果很好

隐藏;

```
myNavigationView.getNavigationBar().setHidden(true); 
```

再次展示；

```
myNavigationView.getNavigationBar().setHidden(false); 
```

# networking - 什么数据结构/算法将允许我使用最少的位发送键/值字典列表？

> ID：13018201
> 
> 赞同：6
> 
> 时间：2012-10-22T11:09:10.417
> 
> 标签：networking, multiplayer, client-server, data-structures, compression

我有具有相应客户端对象的服务器对象。要保持同步的数据位于服务器对象的键/值字典中。为了使客户端对象与服务器对象保持同步，我希望服务器在每个对象的每一帧都发送键/值字典。

什么数据结构/算法将允许我使用最少的位发送键/值字典列表？

额外约束 1：对于每种类型的对象，某些键的值比其他键的值更频繁地更改。奖励约束 2：服务器端的内存使用相对昂贵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:17:05.017

**您不需要发送整个字典。**相反，只发送更改的内容。

**您不需要每帧都发送它。**相反，定期发送它与帧速率无关。

第二点要记住的一个重要思想是客户端可以*预测*游戏状态的变化——游戏可以在从服务器接收信息之间继续进行模拟，然后只需要在收到权威信息后*纠正*错误再次从服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:35:59.790

没有特殊的数据结构或算法。传输分隔数据就足够了。

示例数据（作为 C 字符串，注意“\\”实际上是“\”）：`key1;value1;key2;value2;key3\\;with delimiter inside it;value3;\0`

您可以选择要发送的密钥，它易于读取*和写入**，占用很少的内存，甚至可以压缩（因为它只是一个字节流）。

*-读：

```
while( peekbyte() != 0 )
{
    key = readuntil( ';' ); // checks if previous byte isn't "\" while looking for char.
    value = readuntil( ';' );
    add( key, value );
} 
```

**-写：

```
foreach( key in keylist )
{
    write( replace( ';', '\\;', key ) );
    write( replace( ';', '\\;', dict[ key ] ) );
}
write( '\0' ); 
```

# maven - 使用 Jersey（REST 资源）、OSGi（Apache Felix）和 Maven（构建和部署）的示例？

> ID：13018204
> 
> 赞同：2
> 
> 时间：2012-10-22T19:16:15.453
> 
> 标签：maven, jersey, osgi

我似乎真的在这里挣扎。我想做的（按此顺序）是：

1) 使用 Jersey 应用程序和带注释的资源构建 RESTful 资源（这不是问题）。

2) 将该捆绑包打包、安装并启动到 Felix OSGi 容器中，作为 HTTP 服务，包括依赖项。

3) 在 OSGi 容器中打包、安装和启动一个 WAR，它可以将 #2 作为依赖项合并。

我希望能够使用 Maven 完成所有这些工作。

我似乎找不到一个工作示例，即使是单个步骤，尤其是涉及 Maven，更不用说这些步骤的组合了。我尝试将来自网络的各种问答拼凑在一起，取得了不同程度的成功，但还不是一个端到端的工作示例。

任何指针将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:44:09.787

我没有泽西岛的示例，但我有一个[使用 Apache Karaf](http://www.liquid-reality.de/x/EoBk)（使用 Felix）的 CXF 教程。它展示了如何创建一个 Rest 服务并使用 maven 构建它。然后，您可以使用 Apache Karaf 直接从 maven 存储库部署包。将其移至 Jersey 可能只是意味着交换 lib 并使用另一个蓝图配置来初始化其余服务。

Apache Karaf 还允许部署战争和 wab，但我还没有测试过它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:57:43.020

[Apache Stanbol](http://stanbol.apache.org/)完成了大部分或所有这些工作（不确定是否包含开箱即用的 war 包）来实现其 RESTful 服务。

您必须深入研究它的[代码库](http://svn.apache.org/repos/asf/stanbol/trunk)，但在其中搜索 Jax-RS 注释应该会将您指向正确的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-18T00:07:35.907

我也确实在为您正在尝试做的事情而苦苦挣扎。到目前为止，我似乎真的很接近，但可惜不是在那里，这就是我一直在做的事情：

1.  与定义我的泽西资源的 Maven 进行战争
2.  将其与 maven 捆绑插件捆绑在一起（请参阅[将 OSGi 元数据添加到现有项目而不更改打包类型](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)部分）。这允许我在 Tomcat 中运行 restlets 并进行测试。
3.  在 Eclipse 中定义一个目标，其中包括来自我使用 p2-maven-plugin 插件创建的本地定义的 p2 站点的资源。通过这种方式，我可以将 WAR 项目中的任何依赖项收集到一个 p2 站点中，我可以将其部署到 Eclipse 定义的目标
4.  我被困的地方是试图将泽西资源注册为服务，为此我尝试过：
5.  使用[JAX-RS OSGI 连接器](http://eclipsesource.com/blogs/2012/01/23/an-osgi-jax-rs-connector-part-1-publishing-rest-services/)，我最终放弃了，因为它使用 glassfish jersey，当 Jersey 甚至还没有定义版本 2 API 时，它似乎导出了 Jersey 的版本 2 API。当我想使用 Jersey 库的 1.17 版时，这会导致包解析问题。
6.  使用 Whiteboard a la [Apache Felix HTTP Service](http://felix.apache.org/documentation/subprojects/apache-felix-http-service.html)注册资源，我目前的方法似乎还不起作用。
7.  最后，如果前面的方法不起作用，我会尝试[Amdatu](http://amdatu.org/howto/createwebapp.html)
8.  我可能会尝试的另一条路线来自[Jersey 项目 OSGI 章节](https://jersey.java.net/nonav/documentation/latest/user-guide.html#osgi)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-29T08:57:37.413

我尝试了这种组合并使它运行起来-

1-模块化规范-->OSGi规范

2- OSGi 实现-->Apache Felix 4.4.0

3- OSGi 运行时-->Apache Karaf 3.0.3

4- REST 的软件架构规范 – JAX-RS

5- JAX-RX 实现-->Apache CXF – 2.7.5

您可以参考这个不错的教程 - [http://java.dzone.com/articles/building-cxf-rest-service-osgi](http://java.dzone.com/articles/building-cxf-rest-service-osgi)

现在，我还计划从 CXF 迁移到 Jersey，因为 Jersey 是 JAX-RS 的轻等待参考实现。现在我打算将 Jersey 与 Apache Felix/Apache Karaf 一起使用。您可以在 Karaf 中安装 Jersey 并将您的 Jersey Rest Web 服务部署为 Bundle。您可以参考本教程 - [https://vzurczak.wordpress.com/2014/09/30/web-applications-with-osgi-working-with-jersey/](https://vzurczak.wordpress.com/2014/09/30/web-applications-with-osgi-working-with-jersey/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-29T13:12:23.133

这是 github 上的一个很好的例子：[https ://github.com/ddragosd/jax-rs-on-karaf](https://github.com/ddragosd/jax-rs-on-karaf)

# python - 在python中访问时在列表中重复出现字符串格式

> ID：13018211
> 
> 赞同：0
> 
> 时间：2012-10-22T19:16:46.523
> 
> 标签：python, list, string-formatting

在 python 中，是否可以在访问列表中的项目时重复发生字符串格式化操作？

例如：

```
>>>from random import randint
>>>a = ["The random number is: {0}".format(randint(0,10))]
>>>print a[0]
The random number is: 3
>>>print a[0]
The random number is: 3 
```

显然，它正在获取一个随机整数，格式化字符串并在首次定义列表时将其保存在列表中。抛开性能不谈，我想知道是否可以覆盖此行为。

我知道如果我看到这个问题，我会回答“你做错了”之类的回答，并会提供类似于以下答案的内容......

```
>>>a = ["The random number is: {0}"]
>>>print a[0].format(randint(0,10)) 
```

但是让我们假设这不是这个问题的解决方案。我真的很想定义格式并在列表本身中进行（如果可能的话）。

另一个例子：

```
a = ["The some sweet string: {0}".format(someFunction),
     "Another {0} different string {1}".format(someFunctionTwo, someFunctionThree)] 
```

其中 someFunction* 在每次调用时提供“随机”结果。

我知道这有点牵强，我可能不得不依赖已经提供的方法（感谢您的反馈）但是，我想我会试一试。

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:19:40.753

最好为此使用一个函数：

```
In [1]: from random import randint

In [2]: def func():
   ...:     return "The random number is: {0}".format(randint(0,10))
   ...: 

In [3]: func()
Out[3]: 'The random number is: 7'

In [4]: func()
Out[4]: 'The random number is: 2'

In [5]: func()
Out[5]: 'The random number is: 3' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T19:20:32.137

您可以创建一个类并覆盖`__str__`：

```
>>> from random import randint
>>> class Foo(object):
...     def __str__(self):
...        return "The random number is: {0}".format(randint(0,10))
... 
>>> a = [Foo()]
>>> print a[0]
The random number is: 8
>>> print a[0]
The random number is: 10
>>> print a[0]
The random number is: 5 
```

但你是对的，我的第一个倾向是说你*可能*做错了......

* * *

这是另一个想法——在列表中保留格式字符串：

```
a = ["The some sweet string: {func1}",
     "Another {func2} different string {func3}"]

for item in a:
   print item.format(func1=func1(),func2=func2(),func3=func3()) 
```

显然这效率不高（当您不一定需要它们时调用函数......），但它可以工作。

# google-maps - 在一张地图上添加和查看 MySql 数据

> ID：13018216
> 
> 赞同：1
> 
> 时间：2012-10-22T19:16:58.887
> 
> 标签：google-maps, google-maps-api-3

在过去的几天里，我一直在研究可以通过 InfoWindow 将数据添加到 MySQL DB 的地图。[我通过使用这个](https://developers.google.com/maps/articles/phpsqlinfo_v3)（ ）成功地做到了`phpsqlinfo_v3`。

现在我需要能够将所有添加的标记加载到同一张地图上。我按照此[链接](https://developers.google.com/maps/articles/phpsqlajax_v3)（`phpsqlajax_v3）的说明进行操作。

我也成功地让它工作了。我遇到的问题是我无法将两者放在一起。我能让它们工作的唯一方法是拥有单独的地图。在第一个链接的底部，它指出如果您`phpsqlajax_v3`跳到*创建地图*部分，您可以将它们放在一起。我已经尝试过似乎在阳光下的一切，但根本没有运气。有人可以为我指出正确的方向或列出我需要做的事情以使其在同一张地图上正常工作。

# mysql - 如何加入表以正确返回所有行以及空行？

> ID：13018220
> 
> 赞同：1
> 
> 时间：2012-10-22T19:17:05.453
> 
> 标签：mysql, join, null

我有两张表，一张是零件列表，另一张是属性列表。我想要实现的是列出所有部分及其属性，以及基本行本身：

```
Part   Attribute
----------------
Cake   Batman
Cake   Princess
Cake   Spiderman
Cake   NULL

QUERY
----------------
SELECT p.Name, pa.Name
FROM PartsTbl p
LEFT JOIN PartAttrib pa ON p.Name= pa.BaseName
WHERE p.Name = 'Cake' 
```

目前，这只返回除最后一行之外的所有内容。如何生成最后一行作为同一查询的一部分，而不是通过运行第二个查询？

更新 - - - - - - - -

```
Table Structure
PartsTbl - Name
PartAttrib - BaseName (To PartsTbl.Name), Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:23:49.017

一个简单的联合是你的朋友:o)

```
SELECT p.Name, pa.Name
FROM PartsTbl p
LEFT JOIN PartAttrib pa ON p.Name= pa.BaseName
WHERE p.Name = 'Cake'
UNION
SELECT Name, NULL
FROM PartsTbl
WHERE Name = 'Cake' 
```

# c# - 如何获取组合框的内容并将它们添加到数组中？

> ID：13018222
> 
> 赞同：3
> 
> 时间：2012-10-22T19:17:07.817
> 
> 标签：c#, arrays, combobox

我已经看到很多关于将 a 的内容添加`Array`到 a的内容`ComboBox`，但反之则不然。我想把a中的内容`ComboBox`加到a`Array`中，再发给另一个方法进行处理。

我已经`.Items.Count`确定了 的大小`Array`，但我不知道如何循环浏览`ComboBox`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T19:25:27.393

通过查看您对问题的评论，您可能想要：

```
var arr = ingredientComboBox.Items.Cast<Object>()
          .Select(item => item.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T19:26:23.350

```
 string[] items = new string[currentComboBox.Items.Count];

   for(int i = 0; i < currentComboBox.Items.Count; i++)
   {
       items[i] = currentComboBox.Items[i].ToString();
   } 
```

# c - C：尝试从 .dat 文件中读取 int 时访问权限不佳

> ID：13018224
> 
> 赞同：0
> 
> 时间：2012-10-22T19:17:14.520
> 
> 标签：c, scanf

我正在尝试读取整数文件并在读取它们时打印它们。但是，我在通过循环的第一次迭代中获得了不好的访问权限。任何想法为什么？

```
#include <stdio.h>

int main(int argc, const char * argv[])
{

    FILE *fr = fopen("testdata1.dat","r");
        int output;
        do {
            fscanf(fr, "%d", &output);

            printf("%d", output);
        }
        while(output != EOF); // check to make sure user has input
} 
```

.dat 的前几行是

```
1000 0 100 2 90 2 80 3 70 2 60 2 10 -99
1001 8 80 2 80 2 50 3 70 2 40 2 10 -99 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:36:05.637

```
#include <stdio.h>

int main(int argc, char *argv[]){
FILE *fr = (FILE*) fopen("test.dat","r");

// ERROR HERE: fr=fopen("test.dat","r");
int output;
if(!feof(fr)){
 do {
    fscanf(fr, "%d", &output);

    printf("%d", output);
  }
   while(!feof(fr)); // check to make sure user has input
 fclose(fr);
 return 0;
} 
```

使用此代码重试。

除了不正确的权限，找不到文件之外，我想不出任何问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:32:01.613

问题是我使用 Xcode 来开发我的程序。将文件拖到项目中并没有将它放在与可执行文件相同的文件夹中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T15:05:16.153

试试这个：</p>

```
enter code here

#include <stdio.h>

int main(int argc, char *argv[]){
int output;
FILE *fr = fopen("test.dat","rb");

if(ferror(fr)!=0){
    fprintf(stderr,"Error in reading file.\n");
    exit(EXIT_FAILURE);
}
while(feof(fr) == 0){
    fread(&output,sizeof(int),1,fr);
    printf("%d\n",output);
}

fclose(fr);
return 0;
} 
```

# jquery - 如何获取键值对中的json值？

> ID：13018226
> 
> 赞同：1
> 
> 时间：2012-10-22T19:17:16.633
> 
> 标签：jquery, json

我从自定义 wordpress 帖子类型中回显了以下内容`get-client-logos.php`

```
[{
    "name": "One",
    "url": "http://localhost/wp-content/uploads/2012/10/random04-128x84.jpg"},
{
    "name": "Two",
    "url": "http://localhost/wp-content/uploads/2012/10/chuck_norris_random_fact_generator_6_3957_2224_image_2578-128x84.jpg"
}]​ 
```

我正在尝试从每个 json 对象中提取 url，如下所示：

```
$.getJSON('get-client-logos.php/', function (data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<img src ="' + val + '"/>');
  });

  console.log(items);
}); 
```

在 console.logging 中，我得到以下信息：

`["img src ="[object Object]"/", "img src ="[object Object]"/"]`

如何返回值而不是 typeOf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:19:56.357

你所拥有的是一个对象数组，因此`$.each`将传递`index`和`object`.. 试试下面的代码。

```
$.each(data, function(idx, val) {
 items.push('<img src ="' + val.url + '"/>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:19:42.723

`val`是一个对象，你知道这个对象有一个名为`url`. 使用点表示法，您可以从对象中获取值。

```
$.getJSON('get-client-logos.php/', function (data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<img src ="' + val.url + '"/>');
  });

  console.log(items);
}); 
```

具体行是

```
items.push('<img src ="' + val.url + '"/>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:20:11.490

JSON 包含一个对象数组，因此在 中`each`，键是数组索引，值是对象。要获取值，请使用：

```
items.push('<img src ="' + val.url + '"/>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T19:20:14.587

试试这个

尝试`val.url`

```
$.each(data, function(key, val) {
    items.push('<img src ="' + val.url + '"/>');
  }); 
```

这里在第一次迭代中 val 是一个对象

```
{"name": "One","url": "http://localhost/wp-content/uploads/2012/10/random04-128x84.jpg"} 
```

你需要`url`这里..所以使用`val.url`Or`val["url"]`应该可以解决问题..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T19:20:26.510

数组包含对象，需要获取对象的url属性

```
$.getJSON('get-client-logos.php/', function (data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<img src ="' + val.url + '"/>');
  });

  console.log(items);
}); 
```

# mysql - 重现 MySQL 错误：服务器关闭连接（node.js）

> ID：13018227
> 
> 赞同：17
> 
> 时间：2012-10-22T19:17:22.773
> 
> 标签：mysql, node.js, node-mysql

[我正在尝试使用node mysql 库](https://github.com/felixge/node-mysql)重现我在 EC2 上的 node.js 应用程序中看到的 MySQL 错误：

> 连接丢失：服务器关闭了连接。

我无法在本地重现该错误-我的代码可以很好地处理杀死数据库-它只是每隔几秒钟重新检查一次，并在重新启动后重新连接到数据库。在 EC2 上，它发生在太平洋时间凌晨 4 点左右，但数据库仍然正常运行。

我想

1.  用我的本地 mysql 重现崩溃
2.  在我的 mysql helper 模块中添加我需要的任何逻辑来处理这个

* * *

这是我的 node.js 应用程序中的错误：

> 2012-10-22T08:45:40.518Z - 错误：uncaughtException 日期=2012 年 10 月 22 日星期一 08:45:40 GMT+0000 (UTC)，pid=14184，uid=0，gid=0，cwd=/home/ec2 -user/my-app, execPath=/usr/bin/nodejs, version=v0.6.18, argv=[/usr/local/bin/node, /home/ec2-user/my-app/app.js, - -my-app], rss=15310848, heapTotal=6311392, heapUsed=5123292, loadavg=[0.0029296875, 0.0146484375, 0.04541015625], uptime=3238343.511107486, trace=/[column=13, file=/ app/node_modules/mysql/lib/protocol/Protocol.js，function=Protocol.end，line=63，method=end，native=false，column=10，file=stream.js，function=Socket.onend，line= 80，方法=onend，native=false，column=20，file=events.js，function=Socket.emit，line=88，method=emit，native=false，column=51，file=net.js，function= TCP.onread, line=388, method=onread, native=false], stack=[错误：连接丢失：服务器关闭了连接。,
> 在 Protocol.end (/home/ec2-user/my-app/node_modules/mysql/lib/protocol/Protocol.js:63:13)，在 Socket.onend (stream.js:80:10)，在 Socket。在 TCP.onread (net.js:388:51) 处发出 (events.js:88:20)]

这是我的代码（mysql帮助模块）：

```
module.exports = function (conf,logger) {
  var mysql = require('mysql');

  var connectionState = false;
  var connection = mysql.createConnection({
    host: conf.db.hostname,
    user: conf.db.user,
    password: conf.db.pass,
    database: conf.db.schema,
    insecureAuth: true
  });

  function attemptConnection(connection) {
    if(!connectionState){
      connection = mysql.createConnection(connection.config);
      connection.connect(function (err) {
        // connected! (unless `err` is set)
        if (err) {
          logger.error('mysql db unable to connect: ' + err);
          connectionState = false;
        } else {
          logger.info('mysql connect!');
          connectionState = true;
        }
      });
      connection.on('close', function (err) {
        logger.error('mysqldb conn close');
        connectionState = false;
      });
      connection.on('error', function (err) {
        logger.error('mysqldb error: ' + err);
        connectionState = false;

        /*
        if (!err.fatal) {
          return;
        }
        if (err.code !== 'PROTOCOL_CONNECTION_LOST') {
          throw err;
        }
        */
      });
    }
  }
  attemptConnection(connection);

  var dbConnChecker = setInterval(function(){
    if(!connectionState){
      logger.info('not connected, attempting reconnect');
      attemptConnection(connection);
    }
  }, conf.db.checkInterval);

  return connection;
}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-04T16:28:58.797

查看[node-mysql中的 mysql 池功能](https://github.com/felixge/node-mysql/blob/master/Readme.md#pooling-connections)

```
var mysql = require('mysql');
var pool  = mysql.createPool({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret'
});

pool.getConnection(function(err, connection) {
  // connected! (unless `err` is set)
  connection.end();
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T15:19:17.010

我遇到了类似的问题，并创建了一个 getConnection() 包装函数，该函数在将 mysql 连接返回给调用者之前检查其运行状况并根据需要重新建立连接。在我的测试中，它为应用程序透明地处理了致命和非致命的连接问题。如果连接只是超时，应用程序会恢复而不会出现任何错误。如果存在暂时但致命的数据库连接问题，一旦数据库连接再次可用，应用程序将自动恢复运行。

至于重现问题进行测试，将以下两行添加到`[mysqld]`块下的 my.ini 或 my.cnf 文件中：

```
interactive_timeout=30
wait_timeout=30 
```

这是我命名为“database.js”的文件的内容：

```
var mysql = require("mysql");
var CONFIG = require(__dirname + "/configuration");

module.exports.getConnection = function() {
    // Test connection health before returning it to caller.
    if ((module.exports.connection) && (module.exports.connection._socket)
            && (module.exports.connection._socket.readable)
            && (module.exports.connection._socket.writable)) {
        return module.exports.connection;
    }
    console.log(((module.exports.connection) ?
            "UNHEALTHY SQL CONNECTION; RE" : "") + "CONNECTING TO SQL.");
    var connection = mysql.createConnection({
        host     : CONFIG.db.host,
        user     : CONFIG.db.user,
        password : CONFIG.db.password,
        database : CONFIG.db.database,
        port     : CONFIG.db.port
    });
    connection.connect(function(err) {
        if (err) {
            console.log("SQL CONNECT ERROR: " + err);
        } else {
            console.log("SQL CONNECT SUCCESSFUL.");
        }
    });
    connection.on("close", function (err) {
        console.log("SQL CONNECTION CLOSED.");
    });
    connection.on("error", function (err) {
        console.log("SQL CONNECTION ERROR: " + err);
    });
    module.exports.connection = connection;
    return module.exports.connection;
}

// Open a connection automatically at app startup.
module.exports.getConnection();

// If you've saved this file as database.js, then get and use the
// connection as in the following example:
// var database = require(__dirname + "/database");
// var connection = database.getConnection();
// connection.query(query, function(err, results) { .... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T11:36:17.910

这是我最终使用的，效果很好。在偶尔的连接丢失/重新启动时，它恢复得很好。我有一个 database.js 文件，它建立连接并定期检查它们。

提出请求：

```
var conn = require('./database');
var sql = 'SELECT foo FROM bar;';
conn.query(sql, [userId, plugId], function (err, rows) {
   // logic
} 
```

这是我的 database.js

```
var mysql = require('mysql');
var Common = require('./common');
var conf = Common.conf;
var logger = Common.logger;

var connectionState = false;
var connection = mysql.createConnection({
  host: conf.db.hostname,
  user: conf.db.user,
  password: conf.db.pass,
  database: conf.db.schema,
  insecureAuth: true
});
connection.on('close', function (err) {
  logger.error('mysqldb conn close');
  connectionState = false;
});
connection.on('error', function (err) {
  logger.error('mysqldb error: ' + err);
  connectionState = false;
});

function attemptConnection(connection) {
  if(!connectionState){
    connection = mysql.createConnection(connection.config);
    connection.connect(function (err) {
      // connected! (unless `err` is set)
      if (err) {
        logger.error('mysql db unable to connect: ' + err);
        connectionState = false;
      } else {
        logger.info('mysql connect!');

        connectionState = true;
      }
    });
    connection.on('close', function (err) {
      logger.error('mysqldb conn close');
      connectionState = false;
    });
    connection.on('error', function (err) {
      logger.error('mysqldb error: ' + err);

      if (!err.fatal) {
        //throw err;
      }
      if (err.code !== 'PROTOCOL_CONNECTION_LOST') {
        //throw err;
      } else {
        connectionState = false;
      }

    });
  }
}
attemptConnection(connection);

var dbConnChecker = setInterval(function(){
  if(!connectionState){
    logger.info('not connected, attempting reconnect');
    attemptConnection(connection);
  }
}, conf.db.checkInterval);

// Mysql query wrapper. Gives us timeout and db conn refreshal! 
var queryTimeout = conf.db.queryTimeout;
var query = function(sql,params,callback){
  if(connectionState) {
    // 1\. Set timeout
    var timedOut = false;
    var timeout = setTimeout(function () {
      timedOut = true;
      callback('MySQL timeout', null);
    }, queryTimeout);

    // 2\. Make query
    connection.query(sql, params, function (err, rows) {
      clearTimeout(timeout);
      if(!timedOut) callback(err,rows);
    });
  } else {
    // 3\. Fail if no mysql conn (obviously)
    callback('MySQL not connected', null);
  }
}

// And we present the same interface as the node-mysql library!
// NOTE: The escape may be a trickier for other libraries to emulate because it looks synchronous
exports.query = query;
exports.escape = connection.escape; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:32:58.810

使用[generic-pool](https://github.com/coopernurse/node-pool)，我写了一些在本地工作的东西。我想我会测试它，看看它是否不会在服务器端以奇怪的方式崩溃。

```
// Test node connection pool stuff

// Create a MySQL connection pool with
// a max of 10 connections, a min of 2, and a 30 second max idle time
var poolModule = require('generic-pool');
var pool = poolModule.Pool({
    name     : 'mysql',
    create   : function(callback) {
        var Client = require('mysql').Client; // use node-mysql library in all it's dubious glory
        var c = new Client();
        c.user     = 'root';
        c.password = 'xxx';
        c.database = 'test';
        c.on('close', function (err) {
          console.log('mysqldb conn close');
        });
        c.on('error', function (err) {
          console.log('mysqldb error: ' + err);
        });

        // parameter order: err, resource
        // new in 1.0.6
        callback(null, c);
    },
    destroy  : function(client) { client.end(); },
    max      : 10,
    // optional. if you set this, make sure to drain() (see step 3)
    min      : 2, 
    // specifies how long a resource can stay idle in pool before being removed
    idleTimeoutMillis : 30000,
     // if true, logs via console.log - can also be a function
    log : true 
});

var http = require('http');
http.createServer(function (req, res) {

  // Get db conn
  pool.acquire(function(err, client) {
      if (err) {
          // handle error - this is generally the err from your
          // factory.create function 
          console.log('pool.acquire err: ' + err);
          res.writeHead(500, {'Content-Type': 'application/json'});
          out = {
            err: err
          }
          res.end(JSON.stringify(out));
      }
      else {
          client.query("select * from foo", [], function(err, results) {

              if(err){
                res.writeHead(500, {'Content-Type': 'application/json'});
                out = {
                  err: err
                }
                res.end(JSON.stringify(out));
              } else {
                res.writeHead(500, {'Content-Type': 'application/json'});
                out = {
                  results: results
                }
                res.end(JSON.stringify(out));
              }

              // return object back to pool
              pool.release(client);
          });
      }
  });
}).listen(9615); 
```

漂亮请不要无缘无故在凌晨 4 点死去！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-05-01T15:32:02.893

解决方案是使用池连接！

您可以编写代码来手动处理连接，它可以工作。但是池是为此设计的，使用池连接解决了连接丢失错误。

```
var mysql = require('mysql');
var pool  = mysql.createPool({
    connectionLimit : 10,
     host            : 'example.org',
    user            : 'bob',
     password        : 'secret',
      database        : 'my_db'
    });

   pool.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
            if (error) throw error;
            console.log('The solution is: ', results[0].solution);
         }); 
```

[池化mysql连接](https://github.com/mysqljs/mysql)

# javascript - 编写自定义验证规则

> ID：13018230
> 
> 赞同：1
> 
> 时间：2012-10-22T19:17:28.273
> 
> 标签：javascript, jquery, validation, jquery-validate

我需要编写自己的 javascript 规则来验证表单。

我有一个名为的字段`code`，我需要对其进行特殊验证：该字段正好有 13 个位置。第一个和第二个是字母，最后一个和倒数第二个也是字母。其他位置（3-11）是数字。那么，如何使用这些条件验证该字段？

```
<html>
  <head>
    <script type="text/javascript" 
      src="javascript/jquery-1.8.2.min.js" >
    </script>
    <script type="text/javascript" 
      src="javascript/jquery.validate.min.js" >
    </script>
  </head>
  <body>
    <form id="meu_form" action="" method="post" >
      Code:<br />
      <input type="text" name="code" id="code" /><br />
      <input type="submit" value="Save" />
    </form>
  </body>
  <script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery('#meu_form').validate({
            rules:{
                code:{
                    required: true,
                    minlength: 13
                    maxlength: 13
                }
            },
            messages:{
                code:{
                    required: "Required field.",
                    minlength: "Exactly 13 length."
                }
            }

        });
    });
  </script>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:22:17.413

使用正则表达式：

```
/^[A-Z]{2}[0-9]{10}[A-Z]$/i 
```

# objective-c - 使用点语法调用方法可以吗？

> ID：13018231
> 
> 赞同：2
> 
> 时间：2012-10-22T19:17:28.983
> 
> 标签：objective-c, ios, cocoa-touch, variables

我正在尝试学习如何使用目标 C 进行开发，我在这本书上读到，要使用点语法（obj.var）从类中访问 ivar，您必须使用 @properties 实现这些变量，但是我尝试过使用它没有为这些变量定义@properties 的访问，它似乎工作正常。

这种访问如何工作？像在 Java 中一样使用它是一个好习惯吗？

例子：

```
ComplexNumber *c1 = [[ComplexNumber alloc]init];
c1.realPart = 3;
c1.imaginaryPart = 2; 
```

ComplexNumber 的方法：

```
- (double)modulus;
-(void)setRadius:(double)aRadius phase:(double)aPhase;
-(void)print;
-(double)realPart;
-(double)imaginaryPart;
-(void)setRealPart:(double)value;
-(void)setImaginaryPart:(double)value; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:32:23.793

属性只是类实现某些方法的承诺。点语法被简单地转换为对具有适当名称的方法的调用，具体取决于代码正在执行的操作：

```
b = a.foo;          // becomes 'b = [a foo];'
a.foo = b;          // becomes '[a setFoo:b];' 
```

因此，即使这些方法不是属性，您实际上也可以使用点语法来调用方法。如果该方法表示像属性一样工作的东西，例如访问`length`数组的方法，那可能还不错：

```
len = myArray.length // becomes 'len = [myArray length];' 
```

但大多数情况下你不应该这样做。它需要一些*不是*属性的东西，使它看起来像一个属性。它可能会起作用，但它会让查看代码的人（包括未来的你）感到困惑。您绝对不应该使用它来调用具有副作用的方法，因为预计属性访问器不会有副作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T19:23:22.017

不，这不是一个好习惯，从技术上讲，您可以使用点语法访问零参数方法，但现在 Xcode 会警告您这样做。这违反了 Apple 的编码准则。

方括号语法应该用于调用方法。

# javascript - 如何检查嵌套的 $.getJSON 请求何时完成运行？

> ID：13018233
> 
> 赞同：1
> 
> 时间：2012-10-22T19:17:35.527
> 
> 标签：javascript, jquery

> **可能重复：**
> [等到所有 jquery ajax 请求完成？](https://stackoverflow.com/questions/3709597/wait-until-all-jquery-ajax-request-are-done)
> [each() 函数中的多个 ajax 调用.. 然后在所有这些都完成后执行一些操作？](https://stackoverflow.com/questions/8726046/multiple-ajax-calls-inside-a-each-function-then-do-something-once-all-of-the)

下面的函数在文档准备好时运行所有这些代码，但是当来自这些的所有数据完成时，我正在尝试运行其他函数。

```
function loadZonesDistrictsStoresData(){
        $.getJSON('/CampaignMgmt/GetZonesByClient', { 'clientid': clientid }, function (zones){
            $.each(zones, function(index, zoneid){
                var li_tag = '<li id="'+ zoneid +'"> <label><input id="'+zoneid+'" data-id="'+zoneid+'" onchange="zones.selectZone(this.value)" type="checkbox" name="zone_'+zoneid+'" value="'+ zoneid +'"><span>' + zoneid +'</span> </label></li>';
                $("ul.zones").append(li_tag);
                $.getJSON('/CampaignMgmt/GetDistrictsByZone', {'clientid': clientid, 'zone': zoneid }, function(data){
                    zone_object[zoneid] = data;
                    $.each(data, function(index, districtid){
                        $.getJSON('/CampaignMgmt/GetStoresByDistrict', {'clientid': clientid, 'district': districtid }, function(stores){
                            districts_object[districtid] = stores;
                        });
                    });
                });
            });
        });
    } 
```

# database - 如何使用 Ext.Net 用数据库中的数据填充 GridPanel？

> ID：13018238
> 
> 赞同：0
> 
> 时间：2012-10-22T19:17:51.727
> 
> 标签：database, connection-string, ext.net, gridpanel

我找到[了这个例子](http://examples.ext.net/#/GridPanel/DataSource_Controls/SqlDataSource/)，但对这个完全陌生，所以它对我来说太高级了......我明白视图中发生了什么，但是我应该如何以及在哪里实际连接到数据库，使用用户名和密码和全部？我的 connectionString 在 Web.config 中应该是什么？什么是“NorthwindConnectionString”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:44:11.910

`NorthwindConnectionString`您链接到的示例中的`Web.config`. 以下 MSDN 文档应帮助您逐步连接到 SQLDataSource，请参阅

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.connectionstring.aspx)

如上面的链接所述，连接字符串被添加到`<connectionStrings>`Web.config 的节点中。此连接字符串保存您的数据库凭据。

**例子**

```
<connectionStrings>
  <add name="MyNorthwind" connectionString="server=foehammer;database=Northwind;user=north;password=north;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:14:35.960

[这个链接](http://msdn.microsoft.com/en-us/library/ms178303%28v=vs.80%29.aspx)实际上帮助了我很多。我没有尝试连接到 ODBC 数据库，但我不知道有一个向导可以引导我完成这些步骤！它为我解决了一切。

# jquery - Django：JSON 和 Internet Explorer 的问题

> ID：13018246
> 
> 赞同：2
> 
> 时间：2012-10-22T19:18:22.337
> 
> 标签：jquery, python, django, json, internet-explorer-9

JSON 无法与 Internet Explorer (IE9) 一起使用时遇到问题。我已经在网上搜索了很多，并尝试了不同的解决方案，但似乎没有什么对我有用。所以认为是时候创建一个 SO 帐户并问我的第一个问题了。

我正在使用 JSON 和 jQuery/AJAX 创建一个简单的上传进度指示器 该指示器在 Firefox 和 Chrome 中运行良好

这是我的视图功能：

```
@never_cache
@admin_required
@render_to("editor/edit_file.html")
def edit_file(request, file_id=None):
    if file_id:
        try:
            file = Document.objects.get(pk=file_id)
            form = DocumentForm(request.POST or None, files=request.FILES or None, instance=file)
        except Document.DoesNotExist:
        form = DocumentForm(request.POST or None, files=request.FILES or None)
    else:
        dir_id = request.GET.get("dir")
        if dir_id:
            try:
                dir = Directory.objects.get(pk=dir_id)
                form = DocumentForm(request.POST or None, files=request.FILES or None, initial ={"directory":dir_id, "available_to":dir.available_to})
            except:
                form = DocumentForm(request.POST or None, files=request.FILES or None)
        else:
            form = DocumentForm(request.POST or None, files=request.FILES or None)

    result = {}
    response = locals()

    if request.method == "POST":
        if form.is_valid():
            file = form.save()
            result["status"] = "ok"
            result["href"] = reverse("portal.editor.views.files_list", args=[file.directory.pk])
            if not request.is_ajax():
                response = HttpResponseRedirect(reverse("portal.editor.views.files_list", args=[file.directory.pk]))
        else:
            result[status] = "error"
        if request.is_ajax():
            response = HttpResponse(json.dumps(result), mimetype="text/plain")
            add_never_cache_headers(response)
    return response 
```

这是我的 jQuery 代码：

```
if ($("#id_edit_form").length > 0) {
    $("#id_edit_form").ajaxForm({
        type: "POST",
        cache: false,
        dataType: "json",
        beforeSubmit:  function (formData, jqForm, options) {
            $("#id_overlay").height($(document).height()).show();
        },
        success: function (response, status, xhr, $form) {
            $("#id_overlay").hide();
            if (status === "success") {
                if (response.status === "ok") {
                    location.href = response.href;
                } else if (response.status === "error") {
                    for (var item in response.form) {
                        $("#id_" + item).parent("p").next("p.js_form-error").html(response.form[item][0]);
                    }
                } else { alert(response.result); }
            } else { alert("Error status:", status); }
        }
    });
} 
```

我觉得我什么都试过了。还尝试将 mimetype 更改为“text/plain”，但仍然无效。我在 nginx 服务器上使用 Django 1.3、Python 2.6 和 jQuery 1.6.1。

nginx/mime.types 中的 mimetype 怎么样？我应该在这个文件中添加 json 吗？我真的需要帮助，因为我一直因为这个问题而头疼！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:10:54.757

语法错误可能是最后一个逗号}

```
success:       function(response, status, xhr, $form){
            $("#id_overlay").hide();
                if( status == "success" ){
                    if( response.status == "ok"){
                        location.href = response.href;
                    }else
                    if(response.status == "error" ){
                        for(var item in response.form){
                            $("#id_"+item).parent("p").next("p.js_form-error").html(response.form[item][0]);
                        }
                    }else
                        alert(response.result);
                }else
                    alert("Error status:", status);
        }, 
```

最后一个逗号。IE 对这类东西非常挑剔。

我阅读了一些有关您正在使用的 ajaxForm 的信息。这是那个： http: [//malsup.com/jquery/form/](http://malsup.com/jquery/form/)？在我看来，您可以更轻松地使用它或完全忘记它并像这样使用 jquery ajax：

```
$('a.submit').live('click', function(event){
    event.preventDefault();
    var f = $(this).parents('form');
    data = f.serialize();
    if (contactIsWorking == false){
        $.ajax({
            'type':'POST',
            'url': '/contactform/',
            'data': data,
            'datatype':'json',
            'beforeSend':function(){
                contactIsWorking = true;
            },
            'success':function(data, textStatus){
                postHandler(f, data);
            },
            'error':function(jqXHR, textStatus, errorThrown){

            },
            'timeout':function(data){
            },
            'complete':function(data){
                contactIsWorking = false;
                spinner.fadeOut(500);
            }
        });
    }
}); 
```

从我的一个项目中快速获取此代码 - 它可能包含太多信息，但我想您可以过滤掉需要的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T22:00:34.103

仅供参考，当我升级到 Django 1.5 时，这个错误就消失了。

似乎 django 1.3 在 mimetypes/content-types 和 JSON 上有一些问题（现在我也使用内置的 json 而不是 simplejson）

# objective-c - 如何避免 xcode 4.5 w/o ARC 出现僵尸错误？

> ID：13018251
> 
> 赞同：6
> 
> 时间：2012-10-22T19:18:32.203
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting

当我在启用了僵尸的 xcode 4.5.1 (LLDB) 调试器中运行不使用 ARC 的应用程序时，在调用 -[super dealloc] (-[NSObject dealloc]) 时出现两次此错误 (2)：

*** -[V2APIClient 类]：发送到已释放实例 0x9d865c0 的消息 *** -[V2APIClient 类]：发送到已释放实例 0x9d865c0 的消息

当我在 xcode 4.4.1 (LLDB) 调试器中运行相同的应用程序时，我会收到一次错误消息 (1)。当我在 XCode 4.3.2 中运行同一应用程序的稍早版本时，我根本没有收到错误消息 (0)。我将使用相同/最新的代码重试。

仅供参考 - 这似乎与其他帖子完全相同，尚未得到回答： [-[Foo class]: message sent to deallocated instance on [super dealloc]](https://stackoverflow.com/questions/12841172/foo-class-message-sent-to-deallocated-instance-on-super-dealloc)）

我试图避免两次重新发布相同的问题，但建议我继续： [https ://meta.stackexchange.com/questions/152226/avoiding-asking-a-question-thats-already-been-asked](https://meta.stackexchange.com/questions/152226/avoiding-asking-a-question-thats-already-been-asked)

另外，我也刚刚在 Apple 开发者论坛中问了同样的问题： [https ://devforums.apple.com/thread/171282](https://devforums.apple.com/thread/171282)

最后，这是我的课的精髓：

```
@interface ASIHTTPRequestHandler : NSObject {
  id _error;
}
@property (nonatomic,retain) id error;
@end

@implementation ASIHTTPRequestHandler
@synthesize error = _error;
-(id)init
{
    self = [super init];
    if (self)
    {
        self.error = nil;
    }
    return self;
 }

 -(void)dealloc
 {
     self.error = nil;
     [super dealloc];// this is the line that appears to cause the problems
  }
  @end 
```

请帮我解决这个问题。我不相信我违反了任何内存管理规则，但这个错误似乎暗示了其他情况。在解决这个问题之前，我很犹豫要不要签入任何新代码。

谢谢，查克

ps 为了记录，这里是调用代码：

```
PanoTourMgrAppDelegate *ptmAppDlgt = [PanoTourMgrAppDelegate getApplicationDelegate];
Settings *settings = ptmAppDlgt.settings;
Identification *identification = ptmAppDlgt.identification;
V2APIClient *v2ApiClient = [[V2APIClient alloc] initWithSettings:settings identification:identification];
NSDictionary *result = [v2ApiClient get_application_status];
BOOL success = [v2ApiClient callWasSuccessful:result];
if (!success)
{
    id error = v2ApiClient.error;
    NSString *mbTitle = nil;
    NSString *mbMessage=nil;
    if ([error isKindOfClass:[NSString class]])
    {
        mbTitle = @"Application version no longer suppported";
        mbMessage = (NSString*)error;
        [MessageBox showWithTitle:mbTitle message:mbMessage];
    }
}
[v2ApiClient release]; // This is the line that indirectly causes the messages above 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:38:10.377

如果您正在向已释放的实例发送消息，那是因为您没有正确管理内存。你有没有被保留平衡的释放；过度释放。

首先，对您的代码进行“构建和分析”。修复发现的任何问题。

接下来，在启用了僵尸检测的 Instruments 下运行并打开引用计数跟踪功能。然后，当它崩溃时，检查相关对象的所有保留/释放事件。你会发现一个额外的版本。挑战在于将保留插入正确的位置以平衡释放。

（正如 Rob 正确指出的那样，这可能只是额外调用释放的情况。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:41:09.407

这是某些 Xcode 版本的调试器中的错误。

我刚刚在 Xcode 4.4.1 中拥有它，但它不在 Xcode 4.6 中。为了解决这个问题，我创建了一个新的“单一视图应用程序”项目，在方案对话框中打开“启用僵尸对象”，并在视图控制器中运行以下代码，并在最后一行设置断点。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSObject *object = [[NSObject alloc] init];
    [object release];

} 
```

这会在调试器中产生以下消息：

> -[NSObject 类]：发送到已释放实例 0x6a7e330 的消息

您还可以看到调试器的变量部分中的对象现在将其类描述为`_NSZombie_`. 如果删除断点，则不再显示消息。`class`正确释放对象后，调试器会调用该方法。

# java - 如何使用自定义选项卡式窗格设计基于 Java 的用户界面并提供类似浏览器的设计？

> ID：13018256
> 
> 赞同：1
> 
> 时间：2012-10-22T19:19:14.620
> 
> 标签：java, jpanel, jtabbedpane

我已经开始研究我朋友开发的基于 java 的工具。现在我们正在共同努力。他使用过定制的 jpanels，并在 jtabed 窗格中使用它们，就像时尚一样。它是这样的，（检查屏幕截图的链接，因为我是新用户，我不能在这里发布图片）

[https://www.dropbox.com/s/5wnrmxiraywlg7p/tab2.png](https://www.dropbox.com/s/5wnrmxiraywlg7p/tab2.png)

问题是，我们想实现一个浏览器显示标签，当打开的标签数量多于面板宽度时，它会被隐藏。所以我们的想法是开发一个类似于 web 的左右浏览标签按钮broswer .这是怎么做到的？

有关当前布局和设计的更多信息：

画布面板被创建，标签面板被创建并最终在主显示面板中调用。stagetab 面板包含选项卡面板（模仿选项卡式窗格的外观）。此外，已经有基于用户按下选项卡面板显示各种画布面板（不同选项卡）的功能。所以所有这些都运行良好。一直在寻找解决此问题的各种解决方案。one sch 正在开发一种类似于 jscroll 窗格的自定义视图端口，可以在此处使用。

这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:21:32.547

一个很好的可能性是使用[SCROLL_TAB_LAYOUT](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTabbedPane.html#SCROLL_TAB_LAYOUT)作为 tabLayoutPolicy。这将在 JTabbedPane 的角落显示两个箭头。当然，您可以重新设计组件以根据需要显示它。

[您可以在此处](http://www.javadrive.jp/tutorial/jtabbedpane/img/p9-1.png)找到使用它的表格图像。

# ruby - 我如何知道具有默认值的参数是否有明确的参数？

> ID：13018258
> 
> 赞同：3
> 
> 时间：2012-10-22T19:19:26.553
> 
> 标签：ruby, default

我有一个带有默认值的参数的方法。我需要知道该值是来自用户还是默认值。用户也可以发送默认值。我怎么知道这些值来自哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T19:21:29.980

您可以使用 Nobu Nakada 在 2004 年提出的技巧：

```
def some_method( a=(implicit_value=true; 1) )
    puts "a=#{a}; was set #{ implicit_value ? :im : :ex }plicitly"
end

> some_method
a=1; was set implicitly

> some_method 1
a=1; was set explicitly

> some_method 2
a=2; was set explicitly 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T20:10:38.657

这也将起作用并且看起来不那么难看：

```
def my_method(a = implicit = 1)
  p a
  p implicit
end

# when calling without parameters then a = implicit = 1 is run, hence implicit is assigned a value 
> my_method
1
1

# when calling with a parameter then a = 1 statement is run. implicit will become nil here
> my_method 1 
1
nil 
```

# joomla - Joomla 1.5 错误 JHTMLlist 不支持。文件未找到

> ID：13018262
> 
> 赞同：0
> 
> 时间：2012-10-22T19:19:38.387
> 
> 标签：joomla, joomla1.5

不幸的是，当我回到旧的 Joomla 1.5 站点时，我看到了这个错误。

```
JHTMLlist not supported. File not found. 
```

这个问题有什么解决办法吗？

请注意，它没有更新。这是`1.5.23`

这是与主机相关的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:39:36.740

我认为，当您上次更新网站时，它一定错过了该文件。

首先，下载[Joomla 1.5.0 - 1.5.26补丁](http://joomlacode.org/gf/download/frsrelease/16891/73383/Joomla_1.5.0_to_1.5.26-Stable-Patch_Package.tar.gz)，上传到你Joomla站点的根目录，解压。这可能会解决问题，但如果没有，请继续下载完整的[Joomla 1.5.26 包](http://joomlacode.org/gf/download/frsrelease/16890/73390/Joomla_1.5.26-Stable-Full_Package.zip)，解压缩“库”文件夹，然后将其压缩，通过 FTP 上传到 Joomla 站点的根目录，然后解压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:47:57.573

检查文件是否`ROOT/libraries/joomla/html/html/list.php`存在。如果没有，那么您需要从 1.5.23 包中上传一个。如果这不能解决您的问题，您最好的办法是将网站升级到最新版本的 Joomla，看看是否能解决问题。

如果您升级站点，它应该会自动添加 - 但我猜测您的帖子出于任何原因想要坚持使用 1.5.23（注意 1.5.26 之前的所有版本都有一个在 1.5 中修复的密码安全漏洞。 26)。

# python - Cronjob 定期刷新 django 视图的缓存

> ID：13018266
> 
> 赞同：4
> 
> 时间：2012-10-22T19:19:43.450
> 
> 标签：python, django, cron, memcached

我在尝试每小时为特定的 django 视图重置缓存时遇到了一些麻烦。

现在，我正在使用 cache_page 装饰器来使用 Memcached 缓存我的视图。但是缓存会在一段时间后过期，并且某些用户的请求未缓存。

@cache_page(3600)
def my_view(request):
...

如何编写自己的 django manage.py 命令以每小时从 cron 刷新此视图的缓存？

换句话说，我在此处的答案中提到的 refresh_cache.py 文件中放入了什么： [Django 缓存 - 可以先发制人地完成吗？](https://stackoverflow.com/questions/797773/django-caching-can-it-be-done-pre-emptively?rq=1)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:35:31.067

在您的应用程序中，您可以创建一个名为的文件夹`management`，其中包含另一个文件夹`commands`和一个空`__init__.py`文件。在内部`commands`创建另一个`__init__.py`和一个文件，您可以在其中编写自定义命令。让我们称之为`refresh.py`：

```
# refresh.py

from django.core.management.base import BaseCommand, CommandError
from main.models import * # You may want to import your models in order to use  
                          # them in your cron job.

class Command(BaseCommand):
    help = 'Posts popular threads'

    def handle(self, *args, **options):
    # Code to refresh cache 
```

现在您可以将此文件添加到您的 cron 作业中。您可以查看本[教程](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)，但基本上您使用 crontab -e 来编辑您的 cron 作业和 crontab -l 来查看哪些 cron 作业正在运行。

[您可以在Django 文档](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)中找到所有这些以及更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T16:51:05.317

我想扩展罗伯茨的答案以填写`# Code to refresh cache`

Timezome+location 使缓存很难使用，在我的情况下，我只是禁用了它们，我也不确定在应用程序代码中使用测试方法，但它似乎工作得很好。

```
from django.core.management.base import BaseCommand, CommandError
from django.test.client import RequestFactory
from django.conf import settings

from ladder.models import Season
from ladder.views import season as season_view

class Command(BaseCommand):
    help = 'Refreshes cached pages'

    def handle(self, *args, **options):
        """
        Script that calls all season pages to refresh the cache on them if it has expired.

        Any time/date settings create postfixes on the caching key, for now the solution is to disable them.
        """

        if settings.USE_I18N:
            raise CommandError('USE_I18N in settings must be disabled.')

        if settings.USE_L10N:
            raise CommandError('USE_L10N in settings must be disabled.')

        if settings.USE_TZ:
            raise CommandError('USE_TZ in settings must be disabled.')

        self.factory = RequestFactory()
        seasons = Season.objects.all()
        for season in seasons:
            path = '/' + season.end_date.year.__str__() + '/round/' + season.season_round.__str__() + '/'
            # use the request factory to generate the correct url for the cache hash
            request = self.factory.get(path)

            season_view(request, season.end_date.year, season.season_round)
            self.stdout.write('Successfully refreshed: %s' % path) 
```

# javascript - 日期

> ID：13018268
> 
> 赞同：-2
> 
> 时间：2012-10-22T19:19:48.693
> 
> 标签：javascript

我有这个代码

```
function myFunction(){
    alert( new Date(getAllTime(2012,12,24)).toString());
}
function getAllTime(y,m,d){
    return getDaysMilisec(getDaysFromYear(y))+getDaysMilisec(getDaysFromMonth(m,y))+getDaysMilisec(d);
}
function getDaysMilisec(d){
    return d*24*60*60*1000;
}
function getDaysFromYear(y){
    return (bisect(y) ? 366 : 365);
}
function bisect(y){ 
    if( (y%4==0 && y%100!=0) || (y%400==0)) return true;
    return false;
}
function getDaysFromMonth(m,y){ 
    if(m==2 && bisect(y)) return 28; 
    if(m==2 && !bisect(y))return 27; 
    if(m==1||m==3||m==5||m==7||m==8||m==10||m==12) return 31; 
    return 30;
} 
```

为什么 myFunction() 打印

> 1971 年 2 月 26 日星期五 02:00:00 GMT+0200（GTB 标准时间）？

为什么不是 24.12.2012？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:25:38.297

该`Date.prototype.toString`方法完全返回该格式。JS 的行为符合预期。如果您希望以您所追求的格式返回日期：

```
var someDate = newDate();
console.log(d.getDate() + '.' + (d.getMonth()+1) + '.' + d.getFullYear()); 
```

JavaScript 的 Date 对象起初有点令人困惑（嗯，它总是在某种程度上令人困惑 IMO）。但是[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)可以很快清理很多东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:29:18.567

您`new Date(X).toString()`将返回从 1970 年 1 月 1 日开始 X 毫秒后的日期。

您的其他函数返回不正确的值，因为它们从不考虑实际日期（例如`getDaysFromYear(y)`，只是一年中的天数，与自 1971 年以来的年数无关）。

# android - Android ViewPager 或 Horizo ntalScrollViewer 还是什么？

> ID：13018276
> 
> 赞同：2
> 
> 时间：2012-10-22T19:20:14.400
> 
> 标签：android, android-viewpager, horizontal-scrolling, horizontalscrollview

请你帮我解决一个问题：

我应该选择什么方式来实现一个具有类似快照效果`ViewPager`但具有多个视图的水平滚动视图组件？

（例如，在 Google App 上，当您点击“屏幕预览”时，会有不同宽度的屏幕，但它们都会向左侧对齐。）

所以我需要（关于宽度的外形尺寸）：

```
[     page1           ][      page 2      ][       page 3     ]

[ smartphone screen ]

[                  Tablet PC screen                                ] 
```

我阅读了文章[http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html) 但我觉得应该有更好的方法。

到目前为止，我看到的唯一选择是`ViewPager`和`Horizontal ScrollView`with`ScrollSmoothly`方法。（`Gallery`已弃用。）

虽然我意识到`ViewPager`自动处理“快照”，但我正在寻找一个看似连续`View`的更像`HorizontalScroll`.

`View`我应该在为 Horizo​​ntalScroll 组件膨胀可见 s 时手动实现“捕捉”和内存控制吗？

你能推荐任何其他可能有用的组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:26:57.453

`ViewPager``Fragment`每页取一个。一个`Fragment`可以由多个视图组成。看起来`ViewPager`会满足您的需求。

# c# - 返回第 N 个斐波那契数列？

> ID：13018278
> 
> 赞同：8
> 
> 时间：2012-10-22T19:20:16.990
> 
> 标签：c#, iteration, fibonacci

我有一个关于课堂作业的问题，我需要知道如何使用迭代返回第 n 个斐波那契数列（不允许递归）。

我需要一些关于如何做到这一点的提示，这样我才能更好地理解我做错了什么。我在我的 program.cs 中输出到控制台，因此它在下面的代码中不存在。

```
 // Q1)
    //
    // Return the Nth Fibonacci number in the sequence
    //
    // Input: uint n (which number to get)
    // Output: The nth fibonacci number
    //

    public static UInt64 GetNthFibonacciNumber(uint n)
    {

    // Return the nth fibonacci number based on n.

    if (n == 0 || n == 1)
        {
            return 1;
        }

        // The basic Fibonacci sequence is 
        // 1, 1, 2, 3, 5, 8, 13, 21, 34...
        // f(0) = 1
        // f(1) = 1
        // f(n) = f(n-1) + f(n-2)
        ///////////////
        //my code is below this comment

        uint a = 0;
        uint b = 1;

        for (uint i = 0; i < n; i++)
        {
            n = b + a;
            a = b;
            b = n;
        }
        return n; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T19:33:47.670

:)

```
static ulong Fib(int n) 
{
    double sqrt5 = Math.Sqrt(5);
    double p1 = (1 + sqrt5) / 2;
    double p2 = -1 * (p1 - 1);

    double n1 = Math.Pow(p1, n + 1);
    double n2 = Math.Pow(p2, n + 1);
    return (ulong)((n1 - n2) / sqrt5);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:03:27.133

只是为了一点乐趣，您可以使用无限的斐波那契列表和一些 IEnumerable 扩展来做到这一点

```
public IEnumerable<int> Fibonacci(){
   var current = 1;
   var b = 0;
   while(true){
       var next = current + b;
       yield return next;
       b = current;
       current = next;
   }
}

public T Nth<T>(this IEnumerable<T> seq, int n){
    return seq.Skip.(n-1).First();
} 
```

获得第 n 个数字将是

```
Fibonacci().Nth(n); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-13T21:14:25.880

```
 public static int GetNthFibonacci(int n)
    {
        var previous = -1;
        var current = 1;
        int index = 1;
        int element = 0;

        while (index++ <= n)
        {
            element = previous + current;
            previous = current;
            current = element;
        }

        return element;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T19:26:41.383

我认为这应该可以解决问题：

```
 uint a = 0;
    uint b = 1;
    uint c = 1;

    for (uint i = 0; i < n; i++)
    {
        c = b + a;
        a = b;
        b = c;
    }
    return c; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T20:20:21.730

这是您作业的解决方案，您应该从 3 开始，因为您已经有了 f1 和 f2 的数字（前两个数字）。请注意，获得第 0 个斐波那契数是没有意义的。

```
public static UInt64 GetNthFibonacciNumber(uint n)
    {

    // Return the nth fibonacci number based on n.

if (n == 1 || n == 2)
    {
        return 1;
    }

    uint a = 1;
    uint b = 1;
    uint c;

    for (uint i = 3; i <= n; i++)
    {
        c = b + a;
        a = b;
        b = c;
    }
    return c; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-07T14:53:09.970

```
 public static UInt64 GetNthFibonacciNumber(uint n)
    {
        if (n == 0 || n == 1)
        {
            return 1;
        }
        UInt64 a = 1, b = 1;
        uint i = 2;
        while (i <= n)
        {
            if (a > b) b += a;
            else a += b;
            ++i;
        }
        return (a > b) ? a : b;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T19:56:02.887

```
 public IEnumerable<BigInteger> FibonacciBig(int maxn)
    {
        BigInteger Fn=1;
        BigInteger Fn_1=1;
        BigInteger Fn_2=1;

        yield return Fn;
        yield return Fn;

        for (int i = 3; i < maxn; i++)
        {
            Fn = Fn_1 + Fn_2;

            yield return Fn;

            Fn_2 = Fn_1;
            Fn_1 = Fn;
        }

    } 
```

你可以通过

```
 FibonacciBig(100000).Skip(n).First(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-17T16:49:00.223

```
 public static List<int> PrintFibonacci(int number)
        {
            List<int> result = new List<int>();
            if (number == 0)
            {
                result.Add(0);
                return result;
            }
            else if (number == 1)
            {
                result.Add(0);
                return result;
            }
            else if (number == 2)
            {
                result.AddRange(new List<int>() { 0, 1 });
                return result;
            }
            else
            {
                //if we got thus far,we should have f1,f2 and f3 as fibonacci numbers
                int f1 = 0,
                    f2 = 1;

                result.AddRange(new List<int>() { f1, f2 });
                for (int i = 2; i < number; i++)
                {
                    result.Add(result[i - 1] + result[i - 2]);
                }
            }
            return result;

        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-03T07:03:46.530

只需要 2 个变量（在 for 循环计数中也声明一个）。

```
public int NthFib(int n)
{
    int curFib = 0;
    int nextFib = 1;
    while (--n > 0)
    {
        nextFib += curFib;
        curFib = nextFib - curFib;
    }
    return curFib;
} 
```

如果您想查看 n 的序列，请将其更改为：

```
public IEnumerable<int> NthFib(int n)
{
    int curFib = 0;
    int nextFib = 1;
    while (n-- > 0)
    {
        yield return curFib;
        nextFib += curFib;
        curFib = nextFib - curFib;
    }
} 
```

# php - 处理来自 JSON 提要的数据以显示它

> ID：13018280
> 
> 赞同：0
> 
> 时间：2012-10-22T19:20:24.863
> 
> 标签：php, json

```
{
  "Group": [
    {
      "name": "HolderOne",
      "operators": [
          {
           "username": "ken",
           "status": 3
          },
         .....etc..... 
```

我试图操作的 JSON 提要必须采用上述格式。

我希望能够显示用户名和状态。

```
$json = file_get_contents("urlhere");
$obj=json_decode($json);
echo $obj->username;
echo $obj->status; 
```

这显然不起作用，因为它们嵌套在提要中（？）...我尝试过：

```
$obj->Group[0]->name->operators->username 
```

和

```
$obj->Group[0]->name->username 
```

无济于事（以及带有 ,true 和 ['name'] 的 json_decode 等）。

我是不是特别昏暗？

当我进行 var 转储时，可以从提要中收集数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:25:47.657

解决这个问题的最好方法是迭代地做`print_r`：

```
print_r($obj)
//prints what you see above
print_r($obj['Group']
//prints the Group Object
print_r($obj['Group'][0])
//prints first element in Group Object
print_r($obj['Group'][0]['operators'])
//etc..... 
```

如果我有点卡住，这就是我如何找到这些*深层元素的方法。*虽然在我看来你想要：

`$obj->Group[0]->operators[0]->username`

# sockets - Windows 7 多播接收在几分钟后停止接收

> ID：13018282
> 
> 赞同：3
> 
> 时间：2012-10-22T19:20:26.593
> 
> 标签：sockets, multicast

这是 Windows 7 上的 C++ ......我有点像新手 Multicast Socket 人，并从其他人那里继承了这段代码。

我有这个系统，我有多台计算机在 ADDR 225.1.1.2 创建/加入多播套接字（为什么不），一旦套接字连接，它们会定期“聊天”彼此发送各种消息。如果我在网络上仅启动一台计算机（称为“A”）并让它每秒定期发送一次“keepalive”消息，但没有收到任何内容（没有其他人连接到多播地址），然后让它坐大约3分钟，然后启动另一台计算机B，第一台计算机A没有看到计算机B的广播消息！B 在发送数据包时没有出错，而 A 在接收任何内容时没有出错（从不调用接收）。如果某些东西正在关闭接收部分，我不知道如何获取通知，或者我如何注册此类信息。

如果我启动两台机器相对较近，每台机器都会看到对方的keepalive数据包。接收发生在两台机器上。但是，同样，如果我在启动第一台计算机 3 分钟后启动第二台计算机，第一台计算机的 Receive 方法似乎已经进入睡眠状态，或者消失了，或者处于昏迷状态，或者其他什么。没有产生错误，但是普通的不会看到机器 B 的数据包。（另外，我看到调试器输出中退出了 3 个线程，但它们不是我创建的线程，它们是系统线程）。但是最近启动的机器 B 确实看到了来自机器 A 的保活数据包。

这是套接字调用：

```
hSock = WSASocket(
    AF_INET,
    SOCK_DGRAM,
    0,
    NULL,
    0,
    WSA_FLAG_MULTIPOINT_C_LEAF | WSA_FLAG_MULTIPOINT_D_LEAF | WSA_FLAG_OVERLAPPED);

setsockopt(hSock,SOL_SOCKET,SO_REUSEADDR,(char *) &bVal,sizeof(bVal));
srcIP.sin_family=AF_INET;

// Need to bind to local interface
srcIP.sin_addr.s_addr=inet_addr(("225.1.1.2"); // htonl(INADDR_ANY);
srcIP.sin_port=htons(5555);
bind( hSock,(struct sockaddr FAR *) &srcIP,sizeof(srcIP) );

nIP_TTL=36;
setsockopt(hSock,IPPROTO_IP,IP_MULTICAST_TTL,(char *) &nIP_TTL,sizeof(int));

mreq.imr_multiaddr.s_addr=inet_addr("225.1.1.2");
mreq.imr_interface.s_addr=inet_addr("225.1.1.2");
setsockopt(hSock,IPPROTO_IP,IP_ADD_MEMBERSHIP,(char *) &mreq,sizeof(mreq)); 
```

以下是我在网上看到的：

1.  接收缓冲区可能已满。（我不这么认为，因为计算机 A 是网络上唯一使用多播的计算机）
2.  防火墙可以设置为在几分钟后关闭多播接收。（我不相信这个）
3.  WinSock 协议可能会在 X 分钟不活动后关闭多播接收。（这个我也不信）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-21T22:34:32.100

我认为上面的代码有错误。我认为您必须为 imr_interface 指定计算机网络接口的本地 IP 地址（通常是计算机的 IP 地址，而不是多播地址）。也就是说，您要在其上发送/接收多播流量的接口。我假设您的代码根本没有加入多播组，它只是偶然工作了一段时间。

即使您根本没有调用 IP_ADD_MEMBERSHIP，它也可能会工作几分钟。

奇怪的 3 分钟行为听起来完全像是非工作连接或 IGMP 侦听问题。

IPv4 多播非常微妙，主机、操作系统和硬件组件之间的行为也非常微妙。

当您的应用程序处理多播时，操作系统会发送和接收 IGMP 消息。这是自动的，依赖于对 IP_ADD_MEMBERSHIP 等的正确调用，但除此之外，您无法控制它。中间的硬件组件（WLAN 路由器、交换机、电力线适配器……）都可以使多播工作变魔术，而这种魔术往往会隐藏问题并制造问题。

一个例子：如果您的进程为多播地址 X 调用 IP_ADD_MEMBERHIP，那么机器上的所有其他进程也将看到来自地址 X 的多播流量，即使它们未能调用 IP_ADD_MEMBERSHIP。

丢失（或伪造）ADD_MEMBERSHIP 的典型症状是：它工作几分钟（通常为 3 到 5 分钟），然后突然停止工作，就好像电缆被拉了一样。在接下来的 3-5 分钟内，重新启动其中一个程序会再次解决问题。但即使使用 100% 正确的 ADD_MEMBERSHIP，您在穿越电力线适配器等重要网络组件时也会出现此类症状。那么这是您正在使用的操作系统与您正在使用的路由器/交换机/适配器之间的某种不兼容。

要对此进行调试，请尝试检查主机操作系统的 IGMP 状态。我不知道如何在 Windows 上执行此操作。

# php - 通过 OpenEdge ODBC 和 PHP 交叉加入进度数据库

> ID：13018288
> 
> 赞同：0
> 
> 时间：2012-10-22T19:20:38.600
> 
> 标签：php, odbc, progress-4gl, openedge

我目前在我的 Web 服务器上设置了 2 个 ODBC 连接。一个连接到我们的企业 QAD 数据库，另一个连接到用于扩展我们的数据库的自定义数据库。在这个特定的示例中，我在 QAD 数据库中有我的员工记录，然后在自定义数据库的另一个表中有一个员工编号。

有什么方法可以让我在 php 中的两个 odbc 连接之间建立交叉连接，这样我就不必遍历第一个查询的结果并根据返回的结果发送多个查询来将我的记录绑定在一起一个php数组？

我能想到的最好的方法是从我的自定义数据库的第一个查询中构建一个 IN 子句，将第二个查询发送到 QAD 数据库，然后在 php.ini 中进行数组合并。但是，与普通的 SQL 连接相比，这是一个极其缓慢的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:44:48.300

不确定您是否已经找到了解决方案，但有一篇关于如何做到这一点的进度文章。

[设置多数据库 ODBC 连接的快速指南](http://knowledgebase.progress.com/articles/Article/P119452)

我有一个类似的要求——我想在主 QAD 数据库中的一个表和我们自定义数据库中的一个自定义表之间创建一个连接。我已经对此进行了测试，尽管我的设置略有不同，但效果很好。我需要从 Microsoft SSRS 连接到 QAD 以针对 QAD 数据创建报告 - 我需要创建一些标准 QAD 报告设计器无法处理的报告。

我已经在 Progress 10.1c 上对此进行了测试（此方法仅在 10.1b+ 中受支持）。

所以我采取的步骤是：

1.  根据与主数据库和自定义数据库相关的文章创建 oesql.properties 配置文件。
2.  在客户端机器上创建 ODBC 系统 DSN（在我的情况下是运行带有 SSRS 的 SQL Server 2008 R2 的 Windows Server 2008 R2 机器），并根据文章附加数据库引用。
3.  通过 ODBC DSN 在 SQL Server 中创建链接服务器
4.  创建一个视图，该视图使用 OpenQuery 语法通过链接服务器从 QAD 中提取数据（在我的例子中，这是在 ReportServer 数据库中创建的）。
5.  使用第 3 点中的视图作为数据源创建标准 T-SQL 查询。这最终是我的 SSRS 报告的数据源。

我认为操作系统/数据库和 ODBC 驱动程序的位版本匹配很重要，但尚未确认这一点。

虽然我的要求与您的最终不同，但关键是 QAD 服务器配置和 ODBC 设置。只要您的 PHP 客户端可以在 OpenQuery 命令方面执行类似的功能，那么您就可以使用它。我对 PHP 没有任何经验，因此无法帮助您。

这看起来有点令人费解，但实际上效果很好，并且在很多情况下实际上优于使用 QAD 浏览器查询数据！

希望这可以帮助。

**编辑：** 这是一个 OpenQuery 命令的示例 - 您可以看到表连接以正常方式工作，但只需要表引用中的附加部分。

```
CREATE VIEW [dbo].[vQADData] AS SELECT * FROM OPENQUERY(LinkedServerName,
'
SELECT custTable.item_date AS DESP_DATE, so_mstr.so_site AS SITE, so_mstr.so_po AS PO_NO, so_mstr.so_inv_nbr AS INV_NO,
      ad_mstr.ad_name AS ADNAME, ad_mstr.ad_city AS ADCITY, ad_mstr.ad_state AS ADSTATE
FROM customdbname.pub.customtable custTable
INNER JOIN pub.so_mstr ON so_mstr.so_nbr = custTable.so_nbr
INNER JOIN pub.ad_mstr ON ad_mstr.ad_addr = so_mstr.so_ship
INNER JOIN pub.sod_det ON sod_det.sod_nbr = custTable.so_nbr
WHERE so_mstr.so_site = ''SiteName'' AND so_mstr.so_shipvia = ''SHIPPER'' AND custTable.item_date IS NULL
') 
```

然后只需使用普通 SQL 语法访问视图。

```
SELECT * FROM vQADData 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T20:31:31.007

感谢 Tiran 提出的解决方案。对于那些像 Tiran 那样尝试通过 SQL 服务器引用多个表的人，我有额外的输入。

我正在尝试同时从多个源（进度）、相同的表结构中提取数据并将其插入我们的数据仓库（SQL Server）。所以我只是想在不同的数据库中合并多个相同的结构化表。Tiran 的解决方案让我走上了同样的道路，但 Progress 数据库的链接是一个繁琐的过程，需要我找到一个有 2-3 天空闲时间的 Progress DBA（他的报价）来把它放在一起。当我直接与 Progress 的人交谈时，他们还指出，如果我在 Progress 端创建一个带有 union 的视图，它将按顺序从视图中的每个源中提取数据，而不是同时提取。然而，这让我发现了另一个发现，它看起来可以解决我们的需求，并且完全跳过了处理进度方面的链接表。

这是一个包含三个源的示例，相同的表（这也适用于跨源连接的不同表）。此处提供的所有名称只是为了在示例中清晰起见。

```
Source 1 - Table_A
Source 2 - Table_A
Source 3 - Table_A 
```

*   创建到名为 source1 的源 1 的 ODBC 连接。
*   创建到名为 source2 的源 2 的 ODBC 连接。
*   创建到名为 source3 的源 3 的 ODBC 连接。（注意，您通常希望确保将连接设置设置为未提交读取）。

在 SQL Server 中，创建到每个 Source 的链接服务器连接。

```
ls_source1
ls_source2
ls_source3 
```

在您需要引用 Progress 数据库的 SQL Server 数据库中，创建一个使用联合将三个不同的链接服务器连接连接在一起的视图。每个链接服务器引用都需要使用 openquery。此示例使用 select * from each 链接服务器源假定所有列的命名和结构都与每个源相同。

```
CREATE VIEW table_name_v as 
SELECT *
FROM 
(SELECT *
FROM OPENQUERY(ls_source1,
'select *
from source1.dbo.Table_A
')
union
SELECT *
FROM OPENQUERY(ls_source2,
'select *
from source2.dbo.Table_A
'
union
SELECT *
FROM OPENQUERY(ls_source3,
'select *
from source3.dbo.Table_A
'
)
) x 
```

创建视图后，您现在可以同时查询不同进度源中的所有三个表。不需要在 Progress 端进行额外设置。

我目前正在努力解决一个重要的警告。如果您在使用 64 位 SQL Server 的 64 位计算机上，则需要使用 64 位驱动程序通过链接服务器选项连接到 Progress 数据库。我的需求要求我在同一台机器上同时拥有 32 位和 64 位驱动程序，并且遇到了问题，因为显然它们在同一台机器上不能很好地协同工作。我已经能够在同一台机器上安装 64 位和 32 位驱动程序（Progress 网站出现故障，本应向我发送该驱动程序的链接，但我能够让某人将我引导到正确的位置检索 64 位 odbc 驱动程序。普通人不需要两个驱动程序，可以只使用 64 位。作为替代解决方法，如果我 我无法让两个驱动程序在同一台机器上共存，我发现并确认 Connx 公司提供了一个驱动程序，该驱动程序提供了一个 64 位/32 位桥接器，可以为我解决这个问题。但理想情况下，不需要第三方软件。

不幸的是，现在出现了一个新问题，因为我设置和使用的链接服务器不再正常运行。前进两步，后退一步……

只是想我会分享我的发现，因为我确信还有其他人在寻找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:50:33.117

**简短回答：**您不能`JOIN`在两个连接之间建立表格。

**场景：（**所有这些都在一个连接中）

*   默认情况下，在大多数数据库中，您可以通过在表前添加模式名称前缀来连接不同模式中的表，如下所示：

`(...) FROM defaultDB.TableA INNER JOIN extensionDB.TableA ON ({Condition}) (...)`

*   根据您的数据库（我不太了解 Progress DB），您可能无法加入属于不同服务器中模式的表。

*   连接不同数据库中的表（例如：Progress x MySQL）更加复杂。我听说过[Oracle Gateway](http://www.oracle.com/technetwork/database/gateways/index.html)，一个专有的解决方案（不太确定）可以实现最后一个场景。

**总之：**

如果您的情况不适合第一种情况（这指向最明显的方法），我想最短的解决方案是分析您的代码并优化可能的性能瓶颈。调整代码以进行[并行处理](http://www.php.net/manual/en/function.curl-multi-exec.php)可能是一个更大胆的改进。

# java - 是否可以通过指定 GC 标志来修复 OutOfMemory 错误？

> ID：13018289
> 
> 赞同：1
> 
> 时间：2012-10-22T19:20:43.537
> 
> 标签：java, garbage-collection, jvm, out-of-memory

指定 GC 标志是解决 OutOfMemory 异常的可能解决方案，还是没有影响或程序是否会耗尽内存？

有问题的 GC 标志是： -`XX:+UseConcMarkSweepGC`和`-XX:+CMSIncrementalMode`

我之所以问，是因为我认为上述标志（以及一般的 GC 标志）可以调整 JVM 性能（与其响应/速度相关），但它们对降低程序的最低内存要求没有影响。换句话说，如果没有足够的内存让程序运行完成（例如运行到 OutOfMemory 异常），那么再多的 JVM 调整也无法解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:23:29.273

如果你得到`OutOfMemoryError: heap space`了，你无能为力。在 GC 将最后一个字节从堆中取出之前，JVM 永远不会抛出这个。

但是，如果你得到`OutOfMemoryError: GC overhead limit exceeded`，那么你仍然可以做一些事情，因为这是一个“软”错误，并且可能有一个配置设置会减少 GC 开销。我必须补充一点，这不太可能，但至少在理论上是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:22:45.567

如果您的代码中存在内存泄漏，则这些标志没有用。

根据[虚拟机垃圾收集调整](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#available_collectors.selecting)：

> 除非您的应用程序有相当严格的暂停时间要求，否则首先运行您的应用程序并允许 VM 选择收集器。如有必要，调整堆大小以提高性能。如果性能仍未达到您的目标，则使用以下指南作为选择收集器的起点。
> 
> 如果应用程序有一个小数据集（最多大约 100MB），那么
> 
> *   用 选择串行收集器`-XX:+UseSerialGC`。
> 
> 如果应用程序将在单个处理器上运行并且没有暂停时间要求，那么
> 
> *   让 VM 选择收集器，或者
> *   用 选择串行收集器`-XX:+UseSerialGC`。
> 
> 如果 (a) 峰值应用程序性能是第一要务，并且 (b) 没有暂停时间要求或一秒或更长时间的暂停是可以接受的，那么
> 
> *   让 VM 选择收集器，或者
> *   选择并行收集器，`-XX:+UseParallelGC`并（可选）启用并行压缩`-XX:+UseParallelOldGC`。
> 
> 如果响应时间比总体吞吐量更重要，并且垃圾收集暂停必须保持在大约一秒以内，那么
> 
> *   选择并发收集器`-XX:+UseConcMarkSweepGC`。如果只有一个或两个处理器可用，请考虑使用增量模式，如下所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:24:26.230

唯一重要的调整参数是最大内存。即`-Xmx`，或者`-mx` 如果您的程序由于内存泄漏而耗尽内存，即使提高它也无济于事。

顺便说一句：设置内存调整实际上可以减少您在用完之前可以使用的内存量。例如，如果您设置 NewSize，这可以限制 JVM 可以调整代大小以使用所有内存的程度。

通常，如果您想使用所有内存，则使用的选项越少越好。

# excel - Microsoft Jet 数据库引擎找不到 xls 的对象，但与 xlsx 相同的工作表工作正常

> ID：13018290
> 
> 赞同：0
> 
> 时间：2012-10-22T19:20:45.097
> 
> 标签：excel, jet

我有一个工作表名称“测试（测试）”。当我使用工作簿时，我可以很好地访问此工作表，`xlsx`但是当工作簿采用`xls`格式时，我收到以下错误：

```
System.Data.OleDb.OleDbException (0x80040E37): The Microsoft Jet database engine could not find the object ''Test [testing]$'_'.  Make sure the object exists and that you spell its name and the path name correctly.
   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
   at System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet) 
```

该错误似乎正在寻找“测试[测试]”。Jet 是否进行了一些我不知道的转换？这个错误还有其他原因吗？请注意，工作簿完全相同，只是文件格式不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:39:34.217

我必须过滤掉以结尾的表格`$_`并`$'_`让它工作。

[这篇](http://www.officekb.com/Uwe/Forum.aspx/excel-prog/115466/The-Microsoft-Jet-database-engine-could-not-find-the-object)文章引导我进行修复。`$'_`未在帖子中列出，但导致问题以及`$_`.

# linux - 带有 grep 脚本的循环

> ID：13018294
> 
> 赞同：0
> 
> 时间：2012-10-22T19:21:16.117
> 
> 标签：linux, bash, grep

我将其作为一个新问题提出，因为人们似乎不理解我原来的问题。

我可以弄清楚如何查找一个单词是否以大写字母开头，后跟 9 个带有代码的字母：

```
echo "word" | grep -Eo '^[A-Z][[:alpha:]]{8}' 
```

所以这是我应该做的第 1 部分。我的实际脚本应该遍历作为第一个也是唯一一个参数给出的文本文件中的每个单词，然后检查这些单词中是否有任何单词以大写字母开头并且长度为 9 个字母。

我试过了：

```
cat textfile | grep -Eo '^[A-Z][[:alpha:]]{8}' 
```

和

```
while read p
do echo $p | grep -Eo '^[A-Z][[:alpha:]]{8}' 
done < $1 
```

无济于事。

虽然：

```
cat randomtext.txt 
```

输出：

```
The loud Brown Cow jumped over the White Moon. November October tesTer Abcdefgh Abcdefgha 
```

所以它正确输出了文件 randomtext.txt 中的所有单词

那为什么不

```
cat randomtext.txt | grep -Eo '^[A-Z][[:alpha:]]{8}' 
```

工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:25:03.477

问题出在锚点上。您的模式以与`^`行首匹配的开头，但您想要返回的单词位于行的中间。您可以将其替换为`\b`以匹配单词边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:27:10.883

单词都是一个接一个，但你的`grep`表达是指一*整行*。

您应该将文件拆分为单词：

```
sed -e 's/\s*\b\s*/\n/g' < file.txt | grep ... 
```

或者更好，因为你只对字母数字序列感兴趣，

```
sed -e 's/\W\W*/\n/g' < file.txt | grep -E '^[A-Z][[:alpha:]]{8}$' 
```

$（行尾）是必要的，否则 'Supercalifragilisticexpialidocious' 将匹配。

（我在 {9} 中修改了 {8}，因为您指定了“并且后跟*9*个字母”，但后来我看到您还声明“并且是 9 个字母长”）

顺便说一句，如果您使用 {8} 和 -o，您可能会认为匹配项存在于它不存在的地方。“-o”表示“只打印与我的模式匹配的部分”。

因此，如果您将“Supercalifragilistic”输入“^[AZ][[:alpha:]]{8}”，*它将接受它作为匹配*项并打印“Supercali”。这不是我想你问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:24:01.293

你应该做这个 ：

```
$ cat file.txt
The loud Brown Cow jumped over the White Moon. November October tesTer Abcdefgh Abcdefgha
$ printf '%s\n' $(<file.txt) | grep -Eo '^[A-Z][[:alpha:]]{8}$' 
Abcdefgha 
```

如果要在同一源代码行上工作，则需要删除`^`字符（表示行首）：

```
grep -Eo '\b[A-Z][[:alpha:]]{8}\b' file.txt 
```

（`\b`像 choroba 解释的那样添加）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:25:22.263

如果你 cat 整条线立即喂给 grep。您应该在喂给 grep 之前拆分单词。

你可以试试：

```
cat randomtext | awk '{ for(i=1; i <= NF; i++) {print $i } }' | grep -Eo '^[A-Z][a-z]{8}' 
```

# soap - 如何添加 Web 参考 Visual Studio 2012

> ID：13018295
> 
> 赞同：33
> 
> 时间：2012-10-22T19:21:25.213
> 
> 标签：soap, visual-studio-2012, web-reference

是否可以在 Visual Studio 2012 中为我的项目添加 Web 引用？在 Visual Studio 2010 中，可以通过单击“添加服务引用”对话框中的“高级”按钮，如本页所述： [在 Visual Studio 2010 中添加 Web 引用](http://www.c-sharpcorner.com/uploadfile/anavijai/add-web-reference-in-visual-studio-2010/)

但在 Visual Studio 2012 中，“服务引用设置”中没有“兼容性”部分，此对话框中也没有“添加 Web 引用”按钮。我想使用 SOAP Web 服务，但只有当我将其添加为 Web 参考时它才能正常工作（在 .NET Framework 2.0 兼容模式下。如果我将它作为常规服务参考添加，我在使用此服务时会出现异常）。

如何向我的项目添加旧式 Web 引用？
或者如何将我的 Web 服务与新的服务引用样式一起使用？

谢谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-22T19:32:03.280

检查下面的链接

[MSDN 链接](http://msdn.microsoft.com/en-us/library/bb628649.aspx)

向项目添加 Web 引用

> 1 在解决方案资源管理器中，右键单击要将服务添加到的项目的名称，然后单击添加服务引用。
> 
> 出现添加服务引用对话框。
> 
> 2 在添加服务引用对话框中，单击高级按钮。
> 
> 3 出现服务参考设置对话框。
> 
> 4 在“服务引用设置”对话框中，单击“添加 Web 引用”。
> 
> 将出现“添加 Web 引用”对话框。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T09:46:42.660

解决了。复选框“始终生成消息合同”帮助。谢谢大家。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T19:32:04.863

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb628649.aspx)：

> 1.  在解决方案资源管理器中，右键单击要将服务添加到的项目的名称，然后单击“添加服务引用”。出现添加服务引用对话框。
>     
>     
> 2.  在添加服务引用对话框中，单击高级按钮。将出现“服务引用设置”对话框。
>     
>     
> 3.  在“服务引用设置”对话框中，单击“添加 Web 引用”。将出现“添加 Web 引用”对话框。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T06:04:08.237

Visual Studios 2013 使用较新版本的 .NET Framework 4.5.1，它不适用于此 Web 服务[http://wsf.cdyne.com/weatherws/weather.asmx](http://wsf.cdyne.com/weatherws/weather.asmx)等。但是使用 .NET 3.5 可以！

因此，如果您开始一个新项目，请从下拉菜单中选择 .NET Framework 3.5，或者如果您已经在一个项目中并且想要更改 Framework

```
1 Click [DEBUG] > '<YOUR_PROJECT_NAME>' Properties

2 Click [Build] and change target Framework

3 Click [OK] 
```

# javascript - 将 case 切换为 img src 的加载值

> ID：13018296
> 
> 赞同：-2
> 
> 时间：2012-10-22T19:21:28.707
> 
> 标签：javascript

大家好，我正在尝试测试一个案例

```
switch(condition){
case 1:dom.byId("showImage").value = "../img/working.png";
break;
default: alert("nothing met");
} 
```

请记住，我有很多图像要加载，具体取决于条件，这样的功能会更有效吗？

```
function(imgValue){

} 
```

?

更新：

我有 10 张不同的图像需要根据条件加载。最好说我的问题应该是如果“案例”匹配我将如何在名为“showImage”的 id 上显示它，我希望这能澄清一点。问题的第二部分是一个函数，如果案例匹配，我所要做的就是将 url 插入到图像中更有效？案例：grabImage('../img/working.png')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:31:29.660

您的更新列出的实际问题的答案：

```
document.getElementById('showImage').src = "yourpicture.png"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:13:12.123

我最终使用了类似的东西......

```
 function getImage(url){
                dom.byId("showCertainImage").src = url;
               //dom.byId is a dojo selector I should have mentioned this sorry                   
             }

   switch(condition){
                case 1: getImage("img/img1.png");//there are 15 others just like this                
                break;
                case 2: getImage("img/img2.png");                
                break;
                default: getImage("img/default.png");
    } 
```

# python - 无法在 Windows 上使用带有 Python 2.7.3 的 SQLAlchemy 连接到内存中的 SQLite DB

> ID：13018298
> 
> 赞同：4
> 
> 时间：2012-10-22T19:21:29.620
> 
> 标签：python, sqlite, sqlalchemy

我正在尝试在 Windows 上使用 SQLAlchemy 和 Python 2.7.3 使用内存 SQLite 数据库。我可以连接到引擎，但是当我尝试执行第二条语句时，我收到以下错误：

```
>>>    engine=create_engine('sqlite:///memory:',echo=True)
>>>    engine.execute("select 1").scalar()

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "C:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 2445, in execute
connection = self.contextual_connect(close_with_result=True)
File "C:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 2489, in contextual_connect
self.pool.connect(),
File "C:\Python27\lib\site-packages\sqlalchemy\pool.py", line 236, in connect
return _ConnectionFairy(self).checkout()
File "C:\Python27\lib\site-packages\sqlalchemy\pool.py", line 401, in __init__
rec = self._connection_record = pool._do_get()
File "C:\Python27\lib\site-packages\sqlalchemy\pool.py", line 822, in _do_get
return self._create_connection()
File "C:\Python27\lib\site-packages\sqlalchemy\pool.py", line 189, in _create_connection
return _ConnectionRecord(self)
File "C:\Python27\lib\site-packages\sqlalchemy\pool.py", line 282, in __init__
self.connection = self.__connect()
File "C:\Python27\lib\site-packages\sqlalchemy\pool.py", line 344, in __connect
connection = self.__pool._creator()
File "C:\Python27\lib\site-packages\sqlalchemy\engine\strategies.py", line 80, in connect
return dialect.connect(*cargs, **cparams)
File "C:\Python27\lib\site-packages\sqlalchemy\engine\default.py", line 281, in connect
return self.dbapi.connect(*cargs, **cparams)
sqlalchemy.exc.OperationalError: (OperationalError) unable to open database file
None None 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T19:47:52.487

文件名应该是`:memory:`，而不是`memory:`。（请参阅[内存数据库的文档](http://www.sqlite.org/inmemorydb.html)）。相关的[SQLAlchemy 文档](http://docs.sqlalchemy.org/en/rel_0_7/dialects/sqlite.html#connect-strings)提到这是默认路径，因此您应该使用：

```
engine=create_engine('sqlite://',echo=True) 
```

您收到的错误可能是因为`memory:`它不是 Windows 上的有效文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-17T03:24:18.340

以下对我有用：

```
from sqlalchemy import create_engine
from sqlalchemy.pool import StaticPool

engine = create_engine("sqlite://", poolclass=StaticPool) 
```

# c# - 子类应该使用父类的 ToString()

> ID：13018302
> 
> 赞同：0
> 
> 时间：2012-10-22T19:21:50.290
> 
> 标签：c#, oop, inheritance

我有一个基类`Sport`定义为：

```
public class Sport
{
   public int Id {get; set;}
   public string Name {get; set;}

   public Sport() {}

   public override string ToString()
   {
     string objectState = string.Format("[Id: {0}; Name: {1};]", Id, Name);
     return objectState;
   }
} 
```

我有第二个继承类的`Sport`类：

```
public class Basketball : Sport
{
   public string PointTerm {get; set;}
   public Basketball() {}      

   //overriding ToString()??
} 
```

如何`ToString`使用附加属性覆盖我的基础 Sport 类`PointTerm`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:32:31.420

你可以在你的`Basketball`类中添加一个新的覆盖：

```
public override string ToString()
{
    return string.Format("[Id: {0}; Name: {1}; PointTerm: {2};]",
                         Id, Name, PointTerm);
} 
```

**编辑：**

如果你想与基类的实现保持同步，你可以这样做，**但在大多数情况下，上面更简单的方法可能更好**：

```
public override string ToString()
{
    char[] openingBracket = new char[] { '[' };
    char[] closingBracket = new char[] { ']' };     

    string trimmedBaseString = (base.ToString() ?? string.Empty)
                               .TrimStart(openingBracket).TrimEnd(closingBracket);
    return string.Format("[{0} PointTerm: {1};]", trimmedBaseString, PointTerm);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:32:15.720

我不确定这对于您的情况（或在*任何情况下）是否是一个好的解决方案，但当然可以使用***反射**找到在您的类型（无论是 还是其他派生类型）上定义的`Sport`所有`Basketball`属性。

 **Maybe if you write like this inside your `Sport` class:

```
public sealed override string ToString()
{
    var allStrings = GetType().GetProperties()
        .Select(p => p.Name + ": " + p.GetValue(this, null));
    return "[" + string.Join("; ", allStrings) + ";]";
} 
```

Then `Sport` and all types deriving from it will have `ToString` defined the same way, and it will use reflection to find all (public) properties.**

# javascript - 当我将文本复制到具有 maxlength 属性的输入框中时，如何判断文本是否被截断

> ID：13018303
> 
> 赞同：4
> 
> 时间：2012-10-22T19:22:01.827
> 
> 标签：javascript, html, input, paste, maxlength

HTML input 元素有一个 maxlength 属性，可以防止输入超过 maxlength 的文本。将文本粘贴到输入框中后，如果文本长度超过 maxlength，则会将其截断为 maxlength 的确切长度。请问如何判断文本是否被截断？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:24:25.873

假设您想知道输入元素的值的长度是否与该元素的最大长度相同，您可以执行类似的操作（使用 JQuery）。

```
var $el =  $("#myInputElement")
var l = $el.val().length;
var ms = $el.attr("maxlength");
var m = parseInt(ms, 10);

// at this point m and l are maxlength and actual length 
```

然而，这与截断值不同，它可能只是那个确切的长度。

如果您想知道用户在达到最大长度后是否仍在写作，您可以使用查看 keyup 事件以及输入是否聚焦。但是，要将剪贴板与您的输入进行比较，您可能不得不求助于 Flash。

简而言之，没有好的解决方案。

# powershell - mkdir 和 mkdir -p 的区别？

> ID：13018305
> 
> 赞同：11
> 
> 时间：2012-10-22T19:22:17.497
> 
> 标签：powershell, command-line

我一直在关注 Learn Code the Hard Way 的学习如何在 PowerShell 中使用命令行界面的教程。在[这篇](http://cli.learncodethehardway.org/book/cli-crash-coursech8.html)文章中，它告诉我使用 command `mkdir -p i\like\icecream`。在底部，它解释了“`mkdir -p`即使所有目录都不存在，也会创建完整的路径。”

我很困惑，因为`mkdir i\like\icecream`没有`-p`争论仍然会做同样的事情。我已经尝试并完成了诸如创建一个“一”目录，然后创建“一\二\三”之类的`mkdir`东西，它会自动创建一个两个目录来放置三个。PowerShell会自动假设`-p`或类似的情况这？我对这个论点的作用感到茫然。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T19:29:26.337

PowerShell 会尽力确定您所指的参数，即使您没有完全给出它。因此，如果您使用`-p`参数，您实际上是在使用`-path`.

对于 mkdir 函数，`-path`参数告诉函数要创建的路径。`-path`如果没有提供显式参数，默认情况下也是函数的第一个参数。因此，就函数而言，使用`-p`( `-path`) 和不调用函数`-p`是完全相同的。

有关更多信息，请在 shell 类型中：

```
Get-Help mkdir 
```

我还要澄清一下，当您调用 mkdir 时，您真正在做的是调用 New-Item cmdlet 并将 -ItemType 参数指定为 Directory。这就是您在运行该命令时看到 New-Item 帮助的原因。如果您想查看 mkdir 函数的实际代码以了解它是如何执行此操作的，请执行以下操作：

```
(get-command mkdir).ScriptBlock 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T12:57:24.147

如果我们使用创建目录，

*   mkdir，如果目录已经存在，mkdir会抛出异常，所以我们需要在同路径创建目录之前检查

然而

*   mkdirp, mkdirp 总是自动检查目录是否存在于指定路径上，因此不需要执行任何检查。

# objective-c - iOS 6 UIInterfacePortrait 仅视图控制器被呈现并卡在横向中......当从导航堆栈中的横向视图控制器返回时

> ID：13018308
> 
> 赞同：5
> 
> 时间：2012-10-22T19:22:29.347
> 
> 标签：objective-c, xcode, ios6, uiinterfaceorientation, autorotate

因此，像许多其他人一样，我遇到了一个问题，即只有一个或两个视图控制器支持纵向和横向界面方向，否则只能在纵向应用程序中。在 iOS 6 之前一切正常，但突然自动旋转停止工作。多亏了这里的一些好问题，我能够通过让初始 navController 返回单个 topViewController 对 shouldAutorotate 的偏好来解决该问题：

```
 - (BOOL)shouldAutorotate
{
    return  self.topViewController.shouldAutorotate;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

但是，我偶然发现了一个新问题。根 vc (viewController A) 不应该自动旋转并且应该只支持纵向。导航堆栈中的 ViewController B 支持纵向和横向。如果我在viewController B中，并且在横向中，然后触摸“返回”以将视图弹出回viewController A ... vc A加载横向，它甚至不应该支持，并且不会旋转回纵向，因为vc A 的 shouldAutorotate 设置为 NO...

任何有关如何处理此问题的想法将不胜感激。我最初的想法是用手动方法覆盖vc B的“后退”按钮，如果视图处于横向状态，首先强制旋转回纵向......然后将视图控制器弹出回vc A......但我不知道如何以编程方式强制旋转。有任何想法吗？

以下是vc A中的接口方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
}

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

这是它们在 vc B 中的内容：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:35:24.937

在 vcA 集中

```
-(BOOL)shouldAutorotate
{
  return YES;
} 
```

但保持

```
-(NSUInteger)supportedInterfaceOrientations
{
  return UIInterfaceOrientationPortrait;
} 
```

然后，当您从 vcB 返回时，视图将旋转回（仅）支持的方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:43:31.977

问题是所有容器视图控制器（选项卡栏控制器、导航控制器等）都支持您在 plist 文件中提供的所有界面方向。当系统要求支持的界面方向时，根视图控制器的设置和方法实现会覆盖它的子视图。

在这种情况下，导航控制器支持横向和纵向，当 B 视图控制器弹出时，尽管系统要求 A 的界面方向，它也会询问它的根视图控制器，这将是“赢家”，因为导航控制器支持横向，尽管 A 仅支持纵向，但它仍保持横向。

一种解决方案是，您将根视图控制器子类化并根据需要动态更改其旋转方法。当只需要 portait 时，root 的实现应该只返回 portait 并且当两个方向都可用时，那么你的 root 应该返回两者。

# javascript - 如何在javascript中合并多个对象？

> ID：13018312
> 
> 赞同：2
> 
> 时间：2012-10-22T19:22:59.940
> 
> 标签：javascript, jquery

我在 javascript 中有以下 JSON 对象数组：

```
 [{ "AuthorName" : "Abc", "BookName" : "book-1" }]
  [{ "AuthorName" : "Abc", "BookName" : "book-2" }]
  [{ "AuthorName" : "Abc", "BookName" : "book-3" }]
  [{ "AuthorName" : "Abc", "BookName" : "book-4" }] 
```

现在我想从上面的 JSON 对象数组中创建一个 JSON 对象。新创建的单个 JSON 对象包含 2 个属性：`AuthorName`和`BooKName`数组。我正在尝试实现这样的目标：

```
{ "AuthorName" : "Abc", "Book" : ['book-1', 'book-2', 'book-3', 'book-4'] } 
```

现在我的问题是，我怎样才能有效地实现这一目标并在 javascript 中编写最少的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:27:06.710

```
var obj = {};
for(var i=0; i<myArray.length; i++) {
    if(obj[myArray[i].AuthorName] == null)
        obj[myArray[i].AuthorName] = [];
    obj[myArray[i].AuthorName].push(myArray[i].BookName)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:36:25.707

希望这会有所帮助：

```
var bookSort = function (bookarray) {
    var i, 
        book,
        authorArray = [],
        il = bookarray.length,
        j,
        jl,
        authorInArray;
    for (i = 0; i < il; i++) {
        authorInArray= false;
        jl = authorArray.length;
        book = bookArray[i];
        for (j = 0; j < jl; j++) {
            if (book.AuthorName = authorArray[j].AuthorName) {
                authorInArray= true;
                authorArray[j].BookName.push(book.BookName);
                break;
            }
        }
        if (!authorInArray) {
            authorArray.push({AuthorName: book.AuthorName, BookName: [book.BookName]});
        }
    }
    return authorArray;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:07:56.573

似乎您需要一个组合多个对象的函数。

如果您创建一个通用功能来执行此操作，则可以重用它。我不鼓励您创建一个包含诸如`authorArray`硬编码之类的解决方案的解决方案。

让我们创建一个接收多个对象并将它们组合起来的函数。让我们保持简单，并假设对象看起来像您问题中的对象。换句话说，要组合的对象将只是名称值对的平面列表。这些值将是一个字符串或一个字符串数组。

## [jsFiddle 演示](http://jsfiddle.net/pajtai/AqR4Z/)

```
// A function that combines multiple object.
//   The original objects are made of name value pairs where the values are strings.
// If - for a key - the values are the same, the value is kept
// If - for a kye - the values are different, and array is created and the values pushed to it
//   after this all new values are added to the array if not already there.
var combineObjects = function() {

                 // see how many object are to be combined
    var length = arguments.length,
        i,
        // Create a new empty object that will be returned
        newObject = {},
        objectIn,
        prop,
        temp,
        ii,
        alreadyExists;

    // Go through all passed in object... combinging them
    for (i = 0; i < length; ++i) {

        objectIn = arguments[i];

        for (prop in objectIn) {
            if (objectIn.hasOwnProperty(prop)) {

                // Check if the prop exisits
                if (newObject[prop]) {

                     // Check if the prop is a single or multiple (array)
                    if (Object.prototype.toString.call( newObject[prop] ) === '[object Array]') {
                        // Multiple

                        // Check if element is in array
                        alreadyExists = false;
                        for (ii = 0; ii < newObject[prop].length; ++ii) {
                            if (newObject[prop][ii] === objectIn[prop]) {
                                alreadyExists = true;
                                break;                                    
                            }
                        }

                        if (! alreadyExists) {
                            newObject[prop].push(objectIn[prop]);
                        }

                    } else {
                        // Single   
                        if (newObject[prop] !== objectIn[prop]) {
                            temp = newObject[prop];
                            newObject[prop] = [temp, objectIn[prop]];                               
                        }
                    }
                } else {
                    newObject[prop] = objectIn[prop];
                }
            }
        }                
    }  

    // Alert for testing
    alert(JSON.stringify(newObject));

    return newObject;        
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:10:02.607

不知道你在追求什么。也许这对你有用：

```
var books = [ 
  [{ "AuthorName" : "Abc", "BookName" : "book-1" }],
  [{ "AuthorName" : "Abc", "BookName" : "book-2" }],
  [{ "AuthorName" : "Abc", "BookName" : "book-3" }],
  [{ "AuthorName" : "Abc", "BookName" : "book-4" }]
];    

// First book in the array
var first = books[0][0];

// Add BookName property to the first book object (BookNames would be a better name)
first.BookName = books.map(function(book, n) {
  return book[0].BookName;
});

/*
  Or, use jQuery.map if you got a older browser that don't support the Array.map function
  $.map(books, function(book, n) {
     return book[0].BookName;
  });
 */

// first is now:
{ AuthorName : "Abc", BookName : ['book-1', 'book-2', 'book-3', 'book-4'] } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T20:10:15.667

看起来这些只是四个包含对象的单独数组。

如果将这四个单独的数组放在另一个数组中，以便可以迭代它们，如下所示：

```
var a = [
        [{ AuthorName : 'Abc', BookName : 'book-1'}],
        [{ AuthorName : 'Abc', BookName : 'book-2'}],
        [{ AuthorName : 'Abc', BookName : 'book-3'}],
        [{ AuthorName : 'Abc', BookName : 'book-4'}]
        ]; 
```

我只是这样做：

```
var new_array = [],
    temp_obj = {};

$.each(a, function(i,e) {
    var author = e[0].AuthorName,
        book   = e[0].BookName;
    temp_obj[author] ? temp_obj[author].push(book) : temp_obj[author] = [book];
});

$.each(temp_obj, function(author,books) {
    var obj = {AuthorName: author, BookName : books};
    new_array.push(obj);
});

//new_array is now = [{ AuthorName : 'Abc', BookName : ['book-1', 'book-2', 'book-3', 'book-4'] }] 
```

[**小提琴**](http://jsfiddle.net/6UG4c/1/)

它还会整理出更多的作者和书籍等吗？

[**证明**](http://jsfiddle.net/6UG4c/2/)

# ios - 从管道中读取 AV 资产

> ID：13018316
> 
> 赞同：3
> 
> 时间：2012-10-22T19:23:26.940
> 
> 标签：ios, cocoa, posix, avfoundation, pipe

我正在尝试哄骗 AV Foundation 从内存中的 mp4 文件中读取（不使用中间写入磁盘解决方案）。我尝试了自己的自定义 URL 协议，但失败了，因为 AV Foundation 并没有真正使用 URL 加载系统。我的下一个解决方案是尝试构建一个 POSIX 管道并让 AV Foundation 层从命名管道文件加载资产（即从 url “file:///path/path/.../path/mp4file.pipe”）它是用 mkfifo() 创建的。这在尝试通过通常的 fopen() 调用读取文件但使用 AVURLAsset initWithURL: 调用失败（崩溃）时有效。

正如任何人设法让 AVFoundation 从管道中读取，或者更一般地说，让 AVFoundation 与内存中的 mp4 文件一起工作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:06:51.837

读取 MP4 文件时，AVFoundation 将使用搜索，这就是为什么您显然不能使用管道的原因。恐怕您唯一的选择实际上是将文件放入磁盘或使用小型 HTTP 服务器并利用 HTTP Live Streaming。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:13:52.077

我为此目的使用了[猫鼬。](http://code.google.com/p/mongoose/)它是一个小型、易于适应的 HTTP 服务器，基本上只位于一个文件中。

# c++ - 从基于 Window 的应用程序远程运行 Linux 命令

> ID：13018319
> 
> 赞同：0
> 
> 时间：2012-10-22T19:23:34.617
> 
> 标签：c++, windows, linux

我想以编程方式从基于 Window 的 Qt C++ 应用程序远程运行 Linux 命令。最**简单**的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:26:58.160

一种方法是，拥有客户端-服务器模型，服务器驻留在 linux 中，客户端可以是您的计算机。这样您就可以向服务器发送命令并将其输出扔给您。这是我思考这个问题的一种方式。

使用 UPnP 绕过防火墙（或使用 NAT 穿越或 UDP/TCP 打孔）。否则（不转发端口）将无法访问服务器。

第二种是编写自己的 RSH 和 SSH 实用程序。（或使用 putty 或其他预先存在的软件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:29:05.463

您需要在 Linux 机器上安装某种服务器，而您的 Windows 机器将成为客户端。我想说最简单的方法就是制作一个 php 脚本来运行您的命令并将其放在您的 www 根目录中，然后让您的 Windows 机器获取该 URL。

归根结底，如果不知道您对安全性的要求是什么，以及您将要运行什么样的命令，就很难对这个问题给出明确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:30:00.720

只需使用套接字连接到 linux 上的 telnet 服务器，然后发送命令。

这实际上只需要很少的代码。在此处检查 Java 版本：

[发送 telnet 命令并使用 Java 读取响应](https://stackoverflow.com/questions/3763511/sending-telnet-commands-and-reading-the-response-with-java)

你也可以用 Qt/C++ 做类似的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T19:31:01.243

简单**的服务器端程序**女巫将处理请求，然后使用 ex system() 函数将成为解决方案的“远程”部分。

而在**客户端**，由功能女巫处理的简单文本字段将能够连接到服务器以发送命令运行请求。

在这个解决方案中最重要的是要注意**安全性**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-10T20:28:01.807

如果您在 Windows 上使用任何版本，您都可以使用 Plink。如果你可以运行 PuTTY，那么你可以运行 PLink。[PuTTY Plink 文档](http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter7.html)。使用它，您可以使用可执行文件，并使事情自动化。否则，如果您正在寻找一种特定的编程语言，它们仍然依赖于一些 SSH 库。如果您正在编写自己的安装程序，您可以在安装程序中包含 PLink.exe，并将其与您的应用程序一起分发。

从文档页面：

> Z:\sysosd>plink login.example.com 'echo "Hello World"'

# php - 减少 JavaScript 中的刷新余量？

> ID：13018322
> 
> 赞同：0
> 
> 时间：2012-10-22T19:23:40.557
> 
> 标签：php, javascript, page-refresh

> **可能重复：**
> [防止 PHP 脚本被淹没](https://stackoverflow.com/questions/10155339/prevent-php-script-from-being-flooded)

我的某些“朋友”按住刷新键一直在我的网站上乱搞。这使得他们的内容的页面浏览量不切实际地增加，并且它还增加了服务器负载到 PHP 停止运行的点。

我希望是否有一种方法可以防止使用 PHP 或 JavaScript 进行如此强烈的刷新（其中一个在 1 1/2 小时内收到 3 万个请求）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:25:37.230

您始终可以计算用户从某个 IP 地址发出的请求数，并在达到某个限制后停止返回除 Unauthorized 以外的任何内容。

这是一个非常简单的解决方案，但可能会完成这项工作。您可以通过请求/时间间隔将其切断，或者在两分钟内不超过 100 个页面请求或其他内容。然后，您可以禁止 IP，或在指定的时间内返回错误代码。该指定的时间量可能是硬编码的，例如 5 小时，或者您可以等待他们的请求/时间间隔自然下降。

```
function isIpBlocked($ip)
{
    //do mysql query to check if column is true
}

function shouldIpBeBlocked($ip)
{
    //do mysql query to check if number of request over a certain interval is too high
}

if(isIpBlocked($ip))
{
    header('HTTP/1.0 401 Unauthorized');
}
else
{
   if(shouldUserBeBlocked($ip))
   {
       //do sql update/insert to indicate user is blocked in ip_block table or something
       header('HTTP/1.0 401 Unauthorized');
   }
   else
   {
      //update number of requests from this ip address INSERT INTO ip_history (ip, ...) VALUE (:ip, ....);
      //do your web site code

      //maybe do a mysql query to clean out ip_history table for requests that happened a long time ago and check to see if you should unban people
   }
} 
```

您将该代码放在网站的每个页面上，它将确保用户没有违反您预定的安全规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:38:26.753

为此，请使用类似[fail2ban](http://www.fail2ban.org/)的工具。

您可以创建一个规则来阻止请求者的 IP 地址，例如，当他们在给定时间内对同一 URL 发出过多请求时。并且您可以配置它们被阻止的时间跨度。

优点是这种阻塞方式已经发生在网络级别，从而降低了服务器负载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:38:58.020

阅读 apache/nginx 手册以限制来自单个 ip 的连接尝试等。

部分内容如下：

[https://serverfault.com/questions/325317/nginx-prevent-dos-by-limiting-worker-processes-connections](https://serverfault.com/questions/325317/nginx-prevent-dos-by-limiting-worker-processes-connections)

[如何使用 Apache 实现速率限制？（每秒请求数）](https://stackoverflow.com/questions/131681/how-can-i-implement-rate-limiting-with-apache-requests-per-second)

# ios - UIBarButtonItem 代码不起作用

> ID：13018324
> 
> 赞同：1
> 
> 时间：2012-10-22T19:23:45.347
> 
> 标签：ios, uibarbuttonitem

我尝试使用普通的大尺寸图标，根本没有调整大小，并且 UIBarButtonItemStyleBordered 有效：

```
UIBarButtonItem *compassButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"compass.png"] style:UIBarButtonItemStyleBordered target:self action:@selector(compassButtonPressed:)];
compassButtonItem.enabled = YES;
self.navigationItem.rightBarButtonItem = compassButtonItem; 
```

![UIBarButtonItem initWithImage](../Images/e094816fbe7686bf2b2e0b1005d9cc80.png)

然后我尝试使用 UIButton 和 CGRectMake 将图像大小调整为 20x20，边框不起作用：

```
UIButton *compassButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];
UIImage *compassImage = [UIImage imageNamed:@"compass.png"];
[compassButton addTarget:self action:@selector(compassButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
[compassButton setImage:compassImage forState:UIControlStateNormal];
[compassButton setImage:compassImage forState:UIControlStateSelected];
UIBarButtonItem *compassButtonItem = [[UIBarButtonItem alloc] initWithCustomView:compassButton];
compassButtonItem.style = UIBarButtonItemStyleBordered;
compassButtonItem.enabled = YES;
self.navigationItem.rightBarButtonItem = compassButtonItem; 
```

![UIButton setImage](../Images/0d19268655677058078bf909a36f0d12.png)

任何想法如何使用 UIBarButtonItemStyleBordered 和 UIImage 调整大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:19:09.880

怎么样：

```
UIImage *image = [UIImage imageNamed:@"compass.png"];
CGSize newSize = CGSizeMake(20.0f, 20.0f); 
UIGraphicsBeginImageContext(newSize);
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
UIImage *thumbnail = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIBarButtonItem *compassButtonItem = [[UIBarButtonItem alloc] initWithImage:thumbnail style:UIBarButtonItemStyleBordered target:self action:@selector(refreshSection)];  
self.navigationItem.rightBarButtonItem = compassButtonItem; 
```

# assembly - 如何通过 I/O 端口（在 DOS 中）直接访问键盘？

> ID：13018331
> 
> 赞同：0
> 
> 时间：2012-10-22T19:24:14.707
> 
> 标签：assembly, input, keyboard, dos

我正在为 DOS 编写程序，我想获得键盘输入。问题是我不想使用 BIOS 或 DOS 获得该输入。在不使用 DOS 或 BIOS 的情况下获取键盘输入的正确方法是什么？我的意思是使用 I/O 端口在最低级别的编程中获得键盘输入的方法是什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:29:45.590

您需要`inb`在端口 0x60 上执行指令才能从键盘读取扫描码。

```
 static inline uint8_t inportb(uint16_t port)
{
    uint8_t ret;
    asm volatile ("inb %1, %0" : "=a" (ret) : "dN" (port));
    return ret;
}
scancode = inportb(0x60); 
```

如果您想知道何时有新输入，您需要设置一个中断处理程序来监听 PS/2 中断或根据您的键盘使用 USB 轮询。

# php - 登录脚本给空白屏幕

> ID：13018340
> 
> 赞同：0
> 
> 时间：2012-10-22T19:24:42.203
> 
> 标签：php, mysql, login

我有一个登录脚本，当表单重定向时它只是显示一个空白屏幕，有什么想法吗？我对 PHP 很陌生，所以一般对脚本的任何评论都会很棒。

非常感谢您的帮助！

```
<?php
session_start(); //must call session_start before using any $_SESSION variables
$username = $_POST['username'];
$password = $_POST['password'];
//connect to the database here

require_once('../Connections/PropSuite.php');
mysql_select_db($database_PropSuite, $PropSuite);

$username = mysql_real_escape_string($username);
$query = "SELECT password, salt
        FROM users
        WHERE username = '$username';";
$result = mysql_query($query);
if(mysql_num_rows($result) < 1) //no such user exists
{
    header('Location: index.php');
    die();
}
$userData = mysql_fetch_array($result, MYSQL_ASSOC);
$hash = hash('sha256', $userData['salt'] . hash('sha256', $password) );
if($hash != $userData['password']) //incorrect password
{
    header('Location: index.php');
    die();
}
else
{
    validateUser(); //sets the session data for this user
}
//redirect to another page or display "login success" message

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:28:26.773

您的代码中可能存在解析错误，并且您关闭了错误报告。

解决方案：

把它放在你的标题中，看看错误，纠正它们。完成后将其删除——在生产环境中这是不可取的。

```
error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:15:26.037

我认为你错过了重定向，除非你在 validateUser() 函数中有它。如果没有，您可以执行以下任一操作：

```
else
{
   validateUser(); //sets the session data for this user
}
//redirect to another page or display "login success" message
header('Location: your-desired-login-location.php');
die();
?> 
```

或者..

```
else
{
   validateUser(); //sets the session data for this user
   header('Location: your-desired-login-location.php');
   die();
}
//redirect to another page or display "login success" message

?> 
```

# node.js - 来自智能包的 Meteor 项目路径

> ID：13018350
> 
> 赞同：6
> 
> 时间：2012-10-22T19:25:16.243
> 
> 标签：node.js, meteor

我正在寻找一种从智能包中查找流星项目路径的方法（例如：获取 .meteor 文件夹所在的目录的路径......）。我无法使用节点的 __dirname 和 __filename 来做到这一点，因为在流星中它们不可用。有小费吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-30T13:32:02.573

从 Meteor 0.6.0 开始，这将是：

```
var path = Npm.require('path');
var basepath = path.resolve('.'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-18T11:54:57.200

从智能包（0.6.5+）：

```
var path = Npm.require('path');
var base = path.resolve('.'); 
```

`base`在这种情况下，您可以获得包裹的位置..

`/User/username/projects/project/.meteor/local/programm/server/...`

..甚至可能更深

但我们想要

`/User/username/projects/project/`

.. 所以分裂在 .meteor

```
base = base.split('.meteor')[0]; 
```

* * *

* * *

或作为双线

```
var path = Npm.require('path');
var base = path.resolve('.').split('.meteor')[0];; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:46:03.490

这在 Meteor 0.5.0 中对我有用：

```
var require = __meteor_bootstrap__.require;
var path = require('path');
var basepath = (path.resolve('.')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T03:26:28.210

您实际上可以访问节点：

```
var __dirname = __meteor_bootstrap__.__dirname; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-07T10:11:01.230

您可以尝试（仅在服务器端）

`process.env.PWD`它为我返回类似的东西（OSX）：

`'/Users/myusername/Desktop/myproject'`

使用该命令，您将获得流星项目的根目录。

# xcode4.5 - “使用未声明的标识符”错误

> ID：13018356
> 
> 赞同：1
> 
> 时间：2012-10-22T19:25:42.203
> 
> 标签：xcode4.5, iphone-5, appdelegate, undeclared-identifier

我知道这个错误很常见，但我正在努力让我的应用程序 iPhone 5 准备好！我更喜欢为 iPhone 5 使用新的故事板文件 .. 但我被这个错误困住了，有人可以帮帮我吗？这是我的 appdelegate.m

[appdelegate.m(1)](http://i.imgur.com/cGJ1g.png) [appdelegate.m(2)](http://i.imgur.com/D3NDV.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:52:14.993

问题解决了..`}`最后有一个缺失

# jquery - 为什么 .fadeOut() 不起作用，但在 jquery 中隐藏附加的 div 时 .hide() 工作正常？

> ID：13018359
> 
> 赞同：4
> 
> 时间：2012-10-22T19:25:42.623
> 
> 标签：jquery

我想显示一个 div 并在几秒钟后将其删除。就是这么简单。所以在我的html中我有：`<div id="msg"></div>`

我有这个功能：

```
function showWarning(text) {
            $('<div>'+text+'</div>').appendTo('#msg').hide().fadeIn('fast').delay(1000).queue(function() {
                $(this).fadeOut();
        });
    } 
```

我找不到任何方法来完成这项工作。`fadeOut()`被调用但屏幕上没有任何反应。如果我改变`fadeOut()`它`hide()`工作正常。但是......如果我尝试`hide(500)`那么它将无法正常工作。

我认为这是微不足道的-初学者错误-但我找不到。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:27:58.147

`fadeIn()`不能完成运行，在执行淡出之前使用回调函数。

```
$('<div>'+text+'</div>').appendTo('#msg').hide().fadeIn('fast', function () {
    $(this).fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:32:43.010

```
function showWarning(text) {
    $('<div />', {text: text}).fadeIn('fast', function() {
        $(this).delay(1000).fadeOut(600);
    }).appendTo('#msg');
} 
```

[**小提琴**](http://jsfiddle.net/qNuPZ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:30:01.457

像这样：http: [//jsfiddle.net/b7EV8/](http://jsfiddle.net/b7EV8/)

```
function showWarning(text) {
    $('<div id="msgtext">' + text + '</div>').appendTo('#msg').hide().fadeIn('fast', function() {
        $('#msgtext').delay(1000).fadeOut();
    });
}

showWarning('hello') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T19:40:56.283

```
function showWarning(text) {
  $('<div>').text(text).appendTo('#msg').hide().fadeTo(400,1,function(){
      $(this).delay(1000).fadeOut();
  });
} 
```

## *[演示](http://jsbin.com/ataqoy/1/edit)*

# java - 使用 Switch 方法的 java 元音计数器

> ID：13018361
> 
> 赞同：2
> 
> 时间：2012-10-22T19:25:55.360
> 
> 标签：java, switch-statement

我应该编写一个简单的 java 应用程序，计算用户输入的字符串中的每个元音，并输出每个元音出现的次数。

我不明白为什么我的代码会检查字符串中的每个单词。我为每个单词获得了适量的元音。这是我所拥有的：

```
import java.util.Scanner;

public class VowelAnalyst
     {
//
//

public static void main (String[] args)
{
String userString;
int aCount = 0, eCount = 0, iCount = 0, oCount = 0, uCount = 0;
char vowels;

Scanner scan = new Scanner (System.in);

System.out.println ("enter string:");
userString = scan.nextLine();

for (int count = 0; count < userString.length(); count++)
{

vowels = userString.charAt(count);

    switch (vowels)
    {
    case 'a':
        aCount++;
        break;

    case 'e':
        eCount++;
        break;

    case 'i':
        iCount++;
        break;

    case 'o':
        oCount++;
        break;

    case 'u':
        uCount++;
        break;

    default:
        System.out.println ("Please enter valid string.");

    }

            System.out.println ("a: " +aCount);
            System.out.println ("e: " +eCount);
            System.out.println ("i: " +iCount);
            System.out.println ("o: " +oCount);
            System.out.println ("u: " +uCount);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:28:42.247

可能您应该将下面的打印语句移出 for 循环，否则它们将在比较每个字符后打印计数：-

```
System.out.println ("a: " +aCount);
System.out.println ("e: " +eCount);
System.out.println ("i: " +iCount);
System.out.println ("o: " +oCount);
System.out.println ("u: " +uCount); 
```

**更新**： -

`Map<Character, Integer>`虽然你正在做的方式不是一个坏方法，但如果你保持 a来存储 each 的计数，你会更好`Vowel`。您需要使用每个字符的初始计数 0 来初始化 Map，然后在读取的每个字符上，如果在 Map 中找到匹配项，只需增加计数。

这是一个示例片段： -

```
// This is `double-braces` initialization. 
// You can rather initialize your Map in a way you are comfortable with
Map<Character, Integer> vowels = new HashMap<Character, Integer>() {
    {
        put('a', 0);
        put('e', 0);
        put('i', 0);
        put('o', 0);
        put('u', 0);
    }
}; // Note the semi-colon here 
```

然后你在 for 循环中从字符串中读取每个字符的代码： -

```
for (int count = 0; count < userString.length(); count++)
{
    char ch = userString.charAt(count);
    ch = Character.toLowerCase(ch);

    if (vowels.containsKey(ch)) {
        vowels.put(ch, vowels.get(ch) + 1); 
    }
}

System.out.println(vowels);  // Will print each vowels with respective count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:14:53.633

你们真的需要创建地图来存储一些角色吗？

```
public static void main(String[] args)
{
    char[] vowels = "aeiouAEIOU".toCharArray();
    String text = "I am a Java programmer";
    int[] vowelsCount = new int[vowels.length];

    for (char textChar: text.toCharArray())
    {
        for (int i = 0; i < vowels.length; i++)
        {
            char vowel = vowels[i];

            if (vowel == textChar)
            {
                vowelsCount[i]++;
                break;
            }
        }
    }

    for (int i = 0; i < vowelsCount.length; i++)
    {
        System.out.println(vowels[i] + " - " + vowelsCount[i]);
    }
} 
```

输出：

```
a - 5
e - 1
i - 0
o - 1
u - 0
A - 0
E - 0
I - 1
O - 0
U - 0 
```

# vba - 从字符串转换日期和/或时间时，从 Access 2002 到 Access 2010 转换失败

> ID：13018364
> 
> 赞同：1
> 
> 时间：2012-10-22T19:25:56.603
> 
> 标签：vba, ms-access, ms-access-2010

我正在研究这个 Access 2002 数据库。它使用连接到 SQL Server 2008 的服务器。我在加载主表单时遇到问题，它会执行 DLookup 并查看日期。

```
EndDate = Nz(DLookup("End_Date", "Employee", "EmpID= " & EmpID & " AND End_Date IS NOT NULL AND End_Date < #" & Now & "#"), "") 
```

现在这在 Access 2002 中工作正常，但在 Access 2010 中我得到：从字符串转换日期和/或时间时转换失败

不过，这里是最重要的，它在 Access 2010 中适用于一个用户：我自己。没有其他用户可以使用它，Windows 7 和 Access 2010 运行时的其他安装也可以正常工作。在同一台机器上，MDB 也可以正常工作。如果我用 SQL Server 中的单引号替换英镑符号，它在 2010 机器上运行良好，但在 2002 机器上不再工作（duh）。

它一直在破坏我的大脑，通常我已经能够通过卸载所有 Office 然后重新安装并确保最后安装 Access Runtime 的 SP1 来使其工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:33:05.537

与其将 的值转换为`Now()`中的字符串`DLookup`，不如让数据库引擎`Now()`自己确定。

```
EndDate = Nz(DLookup("End_Date", "Employee", _
"EmpID= " & EmpID & " AND End_Date IS NOT NULL AND End_Date < Now()"), "") 
```

该方法不依赖于日期/时间和字符串之间的转换并再次返回，因此可以避免您报告的问题。

如果您想检查原件如何`DLookup`给出不同的结果，请在不同的机器上尝试这样的操作：

```
Dim strCriteria As String
strCriteria = "EmpID= " & EmpID & " AND End_Date IS NOT NULL" & _
    " AND End_Date < #" & Now & "#"
Debug.Print "strCriteria: " & strCriteria
EndDate = Nz(DLookup("End_Date", "Employee", strCriteria), "") 
```

运行该代码后，转到立即窗口 ( `Crtl`+ `g`) 并检查`strCriteria`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:55:53.410

请注意，您在 SQL Server 中使用的日期/时间字段的类型可能会导致问题，这可以解释版本之间的差异。

> Access 2010 为 SQL Server 2008 中添加的四种新日期/时间数据类型提供有限支持：
> 
> 时间
> DATE
> DATETIME2
> DATETIMEOFFSET

-- [http://office.microsoft.com/en-us/access-help/create-an-access-project-HA010341589.aspx#_Toc257281378](http://office.microsoft.com/en-us/access-help/create-an-access-project-HA010341589.aspx#_Toc257281378)

> 如果您在 SQL Server 中将日期存储为数据类型“Date”或“Date2”，请尝试将它们更改为“DateTime” 我在将数据从 SQL Server 2008R2 链接到访问 97 时遇到此问题，访问没有将其视为日期，并且像文本一样对待它

-- [MS-Access 前端不能识别来自 SQL Server 的日期](https://stackoverflow.com/questions/3702089/ms-access-front-end-does-not-recognise-dates-from-sql-server)

顺便说一句，不需要`End_Date IS NOT NULL`, 一旦你添加了另一个标准，空值将被排除，除非你特别包含它们。

# json - 我应该如何处理 JSON 中的 HATEOAS 链接和引用？

> ID：13018366
> 
> 赞同：34
> 
> 时间：2012-10-22T19:25:57.977
> 
> 标签：json, rest, hateoas

我正在设计一个 REST api 并尽可能地 RESTful。我想将[HATEOAS](https://en.wikipedia.org/wiki/HATEOAS)合并到 json 响应中。

将 URL 添加到相关资源很容易，但对用于这些链接的结构进行了一些讨论。

[我发现很多文章都使用了从ATOM](https://en.wikipedia.org/wiki/Atom_(standard))提要中借用的结构：

```
"links": [ 
    {"rel": "self", "href":"http://example.org/entity/1"},
    {"rel": "friends", "href":"http://example.org/entity/1/friends"}, ... 
] 
```

这提出了一些问题：

*   **为什么使用数组作为容器？**根据我认识的一位 javascript 开发人员的说法，将链接作为对象的属性访问链接会更容易。例如：

    ```
    "self":    { "href":"http://example.org/entity/1" }, /* (facebook uses this) */  
    "friends": { "href":"http://example.org/entity/1/friends", "type": "..."} 
    ```

*   **是否有一个通用的 json 结构**（除了再次适应 atom）**来描述资源属性中的引用吗？**（例如消息的发送者）。

    引用可能应该再次解析为 url，但是包含简单 id 会很糟糕吗？有一些像：

    ```
    "sender": { 
        "id": 12345,
        "href": "resource-uri"
    } 
    ```

我的想法是，虽然 HATEOAS 使客户不需要很多知识来使用 API，但我有点不愿意消除使用这些知识的可能性（比如通过构建链接来访问个人资料图片客户端而不首先查找用户）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-25T06:46:28.973

我在 API-Craft google group 上重新启动了这个话题，并得到了一些很好的回应。

阵列设计的主要优点是：

*   同一关系的多个链接
*   同一链接的多个关系而无需再次编写链接
*   订购链接的能力

原因地图具有更好的可访问性。

就结构而言，有很多可能性：

*   JSON-HAL： http: [//blog.stateless.co/post/13296666138/json-linking-with-hal](http://blog.stateless.co/post/13296666138/json-linking-with-hal)或[http://stateless.co/hal_specification.html](http://stateless.co/hal_specification.html)
*   JSON-LD： http: [//json-ld.org/](http://json-ld.org/)（可选择使用[Hydra](http://www.markus-lanthaler.com/hydra/)词汇表）
*   JSON-Schema： http: [//json-schema.org/](http://json-schema.org/)（页面底部的Hyper Meta-Schema）
*   集合+JSON：[http ://amundsen.com/media-types/collection/](http://amundsen.com/media-types/collection/)

我想我会选择 HAL，因为它是最干净的解决方案，其余的看起来有点……对 json 来说很奇怪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T05:47:39.067

就结构而言，您可以尝试查看 HAL ( [http://stateless.co/hal_specification.html](http://stateless.co/hal_specification.html) ) 或 JSON-LD: ( [http://json-ld.org/](http://json-ld.org/) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-09T17:41:19.187

我认为这样您就可以基于 http 方法提供多个链接。

例如

```
"links": [ 
    {"rel": "sender", "method":"post", "href":"http://example.org/entity/1"},
    {"rel": "sender", "method":"put", "href":"http://example.org/entity/1"}, ... 
] 
```

也许你可以适应你的想法

```
"sender": { 
     "href":"http://example.org/entity/1",
     "methods": ["put","post"]
} 
```

# java - AWS DynamoDB Java BatchWriteItem Connect 重置错误

> ID：13018368
> 
> 赞同：2
> 
> 时间：2012-10-22T19:26:04.417
> 
> 标签：java, amazon-web-services, amazon-dynamodb

```
com.amazonaws.AmazonClientException: Unable to execute HTTP request: Connection reset
    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:324)
    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:164)
    at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.invoke(AmazonDynamoDBClient.java:985)
    at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.batchWriteItem(AmazonDynamoDBClient.java:365)
    .
    .
    . 
```

尝试运行以下[代码示例](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/batch-operation-lowlevel-java.html)时捕获了上述异常。

```
BatchWriteItemResult result;
BatchWriteItemRequest batchWriteItemRequest = new BatchWriteItemRequest();
do {
    System.out.println("Making the request.");                         
    batchWriteItemRequest.withRequestItems(requestItems);
    result = client.batchWriteItem(batchWriteItemRequest);

    // Print consumed capacity units
    for(Map.Entry<String, BatchWriteResponse> entry : result.getResponses().entrySet()) {
        String tableName = entry.getKey();
        Double consumedCapacityUnits = entry.getValue().getConsumedCapacityUnits();
        System.out.println("Consumed capacity units for table " + tableName + ": " + consumedCapacityUnits);
     }

  // Check for unprocessed keys which could happen if you exceed provisioned throughput
    System.out.println("Unprocessed Put and Delete requests: \n" + result.getUnprocessedItems());
    requestItems = result.getUnprocessedItems();
} while (result.getUnprocessedItems().size() > 0); 
```

我设置了 1 个表，配置了 8 个写入单元。

在我的`BatchWriteItemRequest`我有 9 `PutRequestItems`。

当第一次在 while 循环中时，处理了 9 个 PutRequestItems 中的 8 个。因此，再次进入循环，试图处理剩下的一个请求。

但是，代码会挂起 `result = client.batchWriteItem(batchWriteItemRequest);`大约 149 秒。之后，抛出上述异常。

绕过这一点的唯一方法似乎是设置更高的写入配置单元。但是，while-do 循环难道不是一种处理我们超出预置写入单元的情况的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:09:59.250

There was one release of the AWS SDK for Java which broke retry behavior in the way you're describing. Basically, the input stream for the request wasn't getting reset between attempts, so each retry would immediately fail. DynamoDB does 10 retries with exponential backoff by default, resulting in the very long delays that you saw. Update your SDK to get around this issue:

[http://aws.amazon.com/sdkforjava/](http://aws.amazon.com/sdkforjava/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:04:01.680

It seems to be a bug on the Java Driver v. 1.3.21 (or maybe including older versions).

1.3.21.1 was released just to take care of that:

> Resolved Issues
> 
> SocketException During Request Retries
> 
> Fixes an issue where retries caused by service error responses (i.e. not IO error retries) aren't able to correctly resend the request payload for services like Amazon DynamoDB that utilize request payloads.

see [http://aws.amazon.com/releasenotes/Java/5659251433242996](http://aws.amazon.com/releasenotes/Java/5659251433242996)

# python - 如何从中间件内部的请求和烧瓶请求中访问 wsgi 参数而没有副作用？

> ID：13018375
> 
> 赞同：5
> 
> 时间：2012-10-22T19:26:39.487
> 
> 标签：python, python-2.7, flask, wsgi, webob

在加载我的烧瓶应用程序之前，我需要从 wsgi 请求中读取一些值。如果我从 wsgi 请求中读取 url，一旦加载了烧瓶应用程序（在中间件运行之后），我就可以毫无问题地访问该文件。

但是，如果我尝试访问参数，一旦加载烧瓶应用程序，它似乎会删除发布数据。我什至用一个特殊的 Webob 请求来包装 wsgi 请求，以防止这种“读取一次”问题。

有谁知道如何从中间件中的 wsgi 请求访问值，而不会对请求造成任何副作用伤害，以便您可以在烧瓶应用程序中获取发布数据/文件数据？

```
from webob import Request

class SomeMiddleware(object):

    def __init__(self, environ):
        self.request = Request(environ)
        self.orig_environ = environ

    def apply_middleware(self):
        print self.request.url #will not do any harm
        print self.request.params #will cause me to lose data 
```

这是我的烧瓶视图

```
 @app.route('/')
    def hello_world():
        from flask import request
        the_file = request.files['file']
        print "and the file is", the_file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T02:53:49.007

据我所知，这是 WSGI 工作方式的限制。流只需消耗*一次*（[PEP 333](http://www.python.org/dev/peps/pep-0333/)和[3333](http://www.python.org/dev/peps/pep-3333/)只要求流支持`read*`调用，`tell`不需要支持）。一旦流用尽，它就不能进一步“向内”重新传输到其他 WSGI 应用程序。查看 Werkzeug 文档的这两部分以获取更多信息：

1.  [http://werkzeug.pocoo.org/docs/request_data/](http://werkzeug.pocoo.org/docs/request_data/)
2.  [http://werkzeug.pocoo.org/docs/http/#module-werkzeug.formparser](http://werkzeug.pocoo.org/docs/http/#module-werkzeug.formparser)

避免此问题的方法是将**输入流**( `wsgi.input`) 包装在实现`read`and`readline`方法的对象中。然后，只有当链中的最终应用程序实际尝试耗尽流时，您的方法才会运行。有关此模式的示例，请参阅[Flask 的有关生成请求校验和的文档。](http://flask.pocoo.org/docs/patterns/requestchecksum/)

话虽如此，您确定中间件是解决问题的最佳方法吗？*如果您需要根据请求正文*的内容执行某些操作（调度、日志记录、身份验证），则最好将其作为应用程序的一部分，而不是自己的独立应用程序。

# c# - 检查什么类型的枚举进入通用方法

> ID：13018378
> 
> 赞同：2
> 
> 时间：2012-10-22T19:26:54.793
> 
> 标签：c#, generics, enums

我现在想检查传入的列以查看它是什么类型的枚举，并基于此，我为该列返回正确的数据库类型。我无法让它工作，不知道如何：

```
 public DbType GetColumnDbType<T>(T column) where T: IComparable, IFormattable, IConvertible
        {
            if (!typeof(T).IsEnum) throw new ArgumentException("the object passed in must an enum type");

            switch (column)
            {
                case (Enums.MemberColumn)column: 
                    switch (Enums.MemberColumn)
                    {
                        case Enums.MemberColumn.Address1:
                            return DbType.String;
                            break;
                        case Enums.MemberColumn.City:
                            return DbType.String;
                            break;
                        case Enums.MemberColumn.State:
                            return DbType.String;
                            break;
                    }
            }
   ..... 
```

更新

这是我尝试过的，但编译器在第一行抱怨说“预期积分类型的值”

```
 switch(typeof(T))
    {
        case (typeof (Enums.MemberColumn)):
            switch ((Enums.MemberColumn) column)
            {
                case Enums.MemberColumn.Address1:
                    return DbType.String;
                    break;
                case Enums.MemberColumn.City:
                    return DbType.String;
                    break;
                case Enums.MemberColumn.State:
                    return DbType.String;
                    break;
                default:
                    throw new ArgumentException("Unsupported enum type.", "MemberColumn");
                    break;
            }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:34:10.077

你的 switch 语句对我来说似乎有点好笑。试试这个：

```
 if (typeof(T) == typeof(Enums.MemberColumn))
        {
            switch ((Enums.MemberColumn)column)
            {
                case Enums.MemberColumn.Address1:

         .... 
```

正如其他人所建议的那样，如果您要根据其类型进行切换，那么拥有通用方法有什么意义呢？只需这样做：

```
public DbType GetColumnDbType(Enums.MemberColumn column)
{
     switch(column)
     {
         case (Enums.MemberColumn.Address1):

         ....

} 
```

然后为其他枚举类型创建另一个重载方法：

```
public DbType GetColumnDbType(Enums.OtherMemberColumn column)
{
     switch(column)
     {
          .....
     }

} 
```

或者......我会这样做的方式：

```
[AttributeUsage(AttributeTargets.Field, AllowMultiple = false)]
public class DbTypeAttribute : Attribute
{
    public DbType DbType { get; private set; }

    public DbTypeAttribute(DbType dbType)
    {
        this.DbType = dbType;
    }
}

public static class DbHelper<T> where T : IComparable, IFormattable, IConvertible, struct
{
    private static Dictionary<long, DbType> _dbTypeLookup = CreateLookup();

    public static DbType GetColumnType(T column)
    {
        return _dbTypeLookup[(long)(object)column];
    }

    private static Dictionary<long, DbType> CreateLookup()
    {   
        if (!typeof(T).IsEnum)
            throw new InvalidOperationException("T must be an enum type.");

        var dbTypeLookup = new Dictionary<long, DbType>();

        foreach (var name in Enum.GetNames(typeof(T)))
        {
            var enumMember = typeof(T).GetMember(name).Single();
            var dbTypeAttr = (DbTypeAttribute)enumMember.GetCustomAttributes(typeof(DbTypeAttribute), false).Single();

            dbTypeLookup.Add((long)Enum.Parse(typeof(T), name), dbTypeAttr.DbType);
        }

        return dbTypeLookup;
    }
} 
```

使用上面的代码，我现在可以这样做：

```
public enum MemberColumn
{
    [DbType(DbType.String)] Address1,
    [DbType(DbType.String)] Address2,
    [DbType(DbType.String)] FirstName,
    [DbType(DbType.String)] LastName,
    [DbType(DbType.DateTime)] DateOfBirth,
}

// ... later, in some method somewhere:

MemberColumn c = MemberColumn.Address1;

DbType dbType = DbHelper<MemberColumn>.GetColumnType(c); // sets dbType to DbType.String 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:27:36.323

由于您无法打开 type 的表达式`Type`，因此您可以像这样构造方法：

```
public DbType GetColumnDbType<T>(T column) where T: IComparable, IFormattable, IConvertible, struct // Note you can add struct constraint here as well.
{
    if (!typeof(T).IsEnum) throw new ArgumentException("the object passed in must an enum type");

    var type = typeof(T);
    if (t == typeof(Enums.MemberColumn))
    {
       switch((Enums.MemberColumn)column)
       {
              // case statements
       }
    }
    else if (t == typeof(Enums.OtherColumn))
    {
    }
    else
    {
       throw new NotSupportedException();
    }       

} 
```

但是，我认为每种`enum`类型的重载会更具可读性和可维护性。如果您需要将其他元数据与每个`enum`值相关联，我认为更好的设计将使用对象。您可以通过制作单例来为对象提供类似语义的枚举：

```
public class MemberColumn
{
    private MemberColumn(DbType columnType) { ColumnType = columnType; }

    public DbType ColumnType { get; private set; }

    private readonly static MemberColumn _address1 = new MemberColumn(DbType.String);
    public static Address1 { get { return _address1; } }

    private readonly static MemberColumn _city = new MemberColumn(DbType.String);
    public static City { get { return _city; } }

    private readonly static MemberColumn _state = new MemberColumn(DbType.String);
    public static State { get { return _state; } }

} 
```

示例用法：

```
DbType addressColumnType = MemberColumn.Address1.ColumnType; 
```

现在可能唯一缺少的是将对象转换为可以轻松添加的唯一字符串表示形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T10:26:43.340

在这种情况下，我最终使用了“if”而不是“switch”（很好的双关语*拍拍自己的背*）。switch/case 控件本质上是一种处理可能相等情况列表的好方法，它的引入是为了减少重复代码。但是，如果您不比较兼容的类型，那么它只是回到旧方法：

```
var memberColumnEnum = column as Enums.MemberColumn
if(memberColumnEnum != null)
{
    switch (memberColumnEnum)
    {
        case Enums.MemberColumn.Address1:
            return DbType.String;
        case Enums.MemberColumn.City:
            return DbType.String;
        case Enums.MemberColumn.State:
            return DbType.String;
        default:
            throw new ArgumentException("Unsupported enum type.", "MemberColumn");
    }
} 
```

# c++ - IShellDisptach：为什么 FolderItemVerbs::Release() + CoUninitialize() 会崩溃？

> ID：13018389
> 
> 赞同：4
> 
> 时间：2012-10-22T19:27:26.323
> 
> 标签：c++, winapi, shell, com, access-violation

**IShellDispatch** COM 接口，更具体地说是**FolderItemVerbs**对象，我遇到了一个非常奇怪的问题，这让我抓狂！

调用*FolderItemVerbs::Release()*后跟*CoUninitialze()*将导致崩溃。这显然是可重现的，但只会发生 10 次中的 1 次。

崩溃是“0xC0000005：访问冲突”错误。在循环中运行有问题的代码 100% 迟早会重现崩溃:-(

请看示例程序：

```
static int TestProc(const TCHAR *pcDirectoryName, const TCHAR *pcFileName)
{
    int iSuccess = 0;

    IShellDispatch *pShellDispatch = NULL;
    Folder *pFolder = NULL; FolderItem *pItem = NULL;
    FolderItemVerbs *pVerbs = NULL;

    HRESULT hr = CoCreateInstance(CLSID_Shell, NULL, CLSCTX_INPROC_SERVER, IID_IShellDispatch, (void**)&pShellDispatch);
    if(FAILED(hr) || (pShellDispatch ==  NULL))
    {
        iSuccess = -3;
        return iSuccess;
    }

    variant_t vaDirectory(pcDirectoryName);
    hr = pShellDispatch->NameSpace(vaDirectory, &pFolder);
    if(FAILED(hr) || (pFolder == NULL))
    {
        iSuccess = -4;
        pShellDispatch->Release();
        return iSuccess;
    }

    variant_t vaFileName(pcFileName);
    hr = pFolder->ParseName(vaFileName, &pItem);
    if(FAILED(hr) || (pItem == NULL))
    {
        iSuccess = -5;
        pFolder->Release();
        pShellDispatch->Release();
        return iSuccess;
    }

    hr = pItem->Verbs(&pVerbs);
    if(FAILED(hr) || (pVerbs == NULL))
    {
        iSuccess = -6;
        pItem->Release();
        pFolder->Release();
        pShellDispatch->Release();
        return iSuccess;
    }

    /* Here we would do something with the FolderItemVerbs */

    pVerbs->Release(); pVerbs = NULL; //If this line is commented out, we don't get a crash, but a massive memory leak!
    pItem->Release(); pItem = NULL;
    pFolder->Release(); pFolder = NULL;
    pShellDispatch->Release(); pShellDispatch = NULL;

    iSuccess = 1;
    return iSuccess;
}

//-----------------------------------------------------------------------------

static unsigned __stdcall ThreadProc(void* pArguments)
{
    HRESULT hr = CoInitialize(NULL);
    if((hr == S_OK) || (hr == S_FALSE))
    {
        threadParam_t *params = (threadParam_t*) pArguments;
        params->returnValue = TestProc(params->pcDirectoryName, params->pcFileName);
        CoUninitialize();
    }
    else
    {
        if(threadParam_t *params = (threadParam_t*) pArguments)
        {
            params->returnValue = -10;
        }
    }

    return EXIT_SUCCESS;
} 
```

请在此处下载*完整*的示例代码：http: [//pastie.org/private/0xsnajpia9lsmgnlf2afa](http://pastie.org/private/0xsnajpia9lsmgnlf2afa)

另请注意，我明确地追踪到崩溃到**FolderItemVerbs**，因为如果我从未创建过*FolderItemVerbs*对象，崩溃会立即消失。

*此外，如果我在CoUninitialize()*之前从未调用过“pVerbs->Release()”，那么崩溃也会消失，但这显然会导致大量内存泄漏。

另一个奇怪的事情是，如果我在调试器下运行程序，崩溃不会发生！但我可以运行程序，等待崩溃，然后让调试器处理崩溃。

不幸的是，我得到的堆栈跟踪并没有多大帮助：http: [//pastie.org/private/cuwunlun2t5dc5lembpw](http://pastie.org/private/cuwunlun2t5dc5lembpw)

我不认为我在这里做错了什么。在过去的两天里，我一遍又一遍地检查了代码。所以这一切似乎都是 FolderItemVerbs 中的一个错误！

有没有人遇到过这个问题和/或可以确认这是 FolderItemVerbs 中的一个错误？另外，有没有解决这个问题的方法？

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:52:28.507

谢谢大家！

这是执行显式消息调度的“更正”代码：

```
void DispatchPendingMessages(void)
{
    const DWORD uiTimeout = GetTickCount() + 10000;
    const HANDLE hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    unsigned int counter = 0;
    if(hEvent)
    {
        for(;;)
        {
            MSG Message;
            while(PeekMessage(&Message, NULL, WM_NULL, WM_NULL, PM_REMOVE))
            {
                TranslateMessage(&Message);
                DispatchMessage(&Message);
            }
            const DWORD nWaitResult = MsgWaitForMultipleObjects(1, &hEvent, FALSE, 250, QS_ALLINPUT | QS_ALLPOSTMESSAGE);
            if((nWaitResult == WAIT_TIMEOUT) || (nWaitResult == WAIT_FAILED) || (GetTickCount() >= uiTimeout)) break;
        }
        CloseHandle(hEvent);
    }
}

//-----------------------------------------------------------------------------

static int TestProc(const TCHAR *pcDirectoryName, const TCHAR *pcFileName)
{
    int iSuccess = 0;

    IShellDispatch *pShellDispatch = NULL;
    Folder *pFolder = NULL; FolderItem *pItem = NULL;
    FolderItemVerbs *pVerbs = NULL;

    HRESULT hr = CoCreateInstance(CLSID_Shell, NULL, CLSCTX_INPROC_SERVER, IID_IShellDispatch, (void**)&pShellDispatch);
    if(FAILED(hr) || (pShellDispatch ==  NULL))
    {
        iSuccess = -3;
        return iSuccess;
    }

    variant_t vaDirectory(pcDirectoryName);
    hr = pShellDispatch->NameSpace(vaDirectory, &pFolder);
    if(FAILED(hr) || (pFolder == NULL))
    {
        iSuccess = -4;
        pShellDispatch->Release();
        return iSuccess;
    }

    variant_t vaFileName(pcFileName);
    hr = pFolder->ParseName(vaFileName, &pItem);
    if(FAILED(hr) || (pItem == NULL))
    {
        iSuccess = -5;
        pFolder->Release();
        pShellDispatch->Release();
        return iSuccess;
    }

    hr = pItem->Verbs(&pVerbs);
    if(FAILED(hr) || (pVerbs == NULL))
    {
        iSuccess = -6;
        pItem->Release();
        pFolder->Release();
        pShellDispatch->Release();
        return iSuccess;
    }

    /* Here we would do something with the FolderItemVerbs */

    pVerbs->Release(); pVerbs = NULL;
    pItem->Release(); pItem = NULL;
    pFolder->Release(); pFolder = NULL;
    pShellDispatch->Release(); pShellDispatch = NULL;

    iSuccess = 1;
    return iSuccess;
}

//-----------------------------------------------------------------------------

static unsigned __stdcall ThreadProc(void* pArguments)
{
    HRESULT hr = CoInitialize(NULL);
    if((hr == S_OK) || (hr == S_FALSE))
    {
        threadParam_t *params = (threadParam_t*) pArguments;
        params->returnValue = TestProc(params->pcDirectoryName, params->pcFileName);
        DispatchPendingMessages(); //This is required before CoUninitialize() to avoid crash with certain Shell Extensions !!!
        CoUninitialize();
    }
    else
    {
        if(threadParam_t *params = (threadParam_t*) pArguments)
        {
            params->returnValue = -10;
        }
    }

    return EXIT_SUCCESS;
} 
```

到目前为止无法使用*该代码重现崩溃:-)*

# knockout.js - 跟踪 Knockout 模型中的更改并在输入更改时触发 CSS 中的更改

> ID：13018391
> 
> 赞同：3
> 
> 时间：2012-10-22T19:27:38.623
> 
> 标签：knockout.js

我有一个包含大约 50 个各种输入的 Knockout View。我已经通过以下代码跟踪了对模型进行更改的时间

```
self.Changed = ko.computed(function() {
    return ko.toJS(self.Outing);
}); 
```

然后订阅 Changed 函数将模型保存回服务器。我想要完成的是，当用户更改单个输入时，它会触发对该输入的 css 绑定以突出显示它，以便用户知道他/她更改了什么。如果不单独订阅每个可观察属性，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T01:46:21.070

有几种方法可以处理这样的事情。一种方便的方法可能是自定义绑定，它获取原始值并针对查看原始值与当前值的计算设置 css 绑定。

也许是这样的：

```
ko.bindingHandlers.changedCss = {
    init: function(element, valueAccessor, allBindings) {
        var original, isDirty, data, cssClass, binding;

        data = allBindings().value;
        original = ko.utils.unwrapObservable(data);
        isDirty = ko.computed({
            read: function() {
                return ko.utils.unwrapObservable(data) !== original;
            },            
            disposeWhenNodeIsRemoved: element
        });

        cssClass = ko.utils.unwrapObservable(valueAccessor());
        binding = { css: {} };
        binding.css[cssClass] = isDirty;

        ko.applyBindingsToNode(element, binding);       
    }                          
}; 
```

你会像这样使用它：`<input data-bind="value: first, changedCss: 'changed'" />`

因此，我们的想法是，我们寻找`value`绑定绑定的对象，并即时设置计算的 observable 为我们提供此属性的脏标志。然后，使用传递给绑定的类名以编程方式添加`css`绑定。

[http://jsfiddle.net/rniemeyer/PCmma/](http://jsfiddle.net/rniemeyer/PCmma/)

或者，您可以创建一个扩展，让您从视图模型端添加此脏跟踪。这会给你一些额外的灵活性，比如重置跟踪的能力（考虑当前值是干净的）。对于初学者，您可以执行以下操作：

```
ko.subscribable.fn.trackDirtyFlag = function() {
    var original = this();

    this.isDirty = ko.computed(function() {
        return this() !== original;
    }, this);

    return this;    
}; 
```

然后，像这样使用它：`this.first = ko.observable("John").trackDirtyFlag();`

[http://jsfiddle.net/rniemeyer/JtvWd/](http://jsfiddle.net/rniemeyer/JtvWd/)

然后你可以做一些事情，比如添加一个`reset`设置`original`等于当前值的方法。

如果您的目标只是能够为脏字段着色，那么自定义绑定可能是一个不错的选择，因为您根本不需要更改视图模型。

# asp.net - asp.net中的表格格式问题

> ID：13018392
> 
> 赞同：0
> 
> 时间：2012-10-22T19:27:42.110
> 
> 标签：asp.net, html, css

请原谅我包罗万象的无知，但我就是无法让我的表格在我的网络表单中看起来正确。

我声明一个表：

```
<table>
</table> 
```

它没有边界。边框有一个属性，例如：

```
<table border="1">
</table> 
```

但是 asp.net 告诉我边框属性是“过时的”。我尝试在 CSS 中添加它...

```
.table{ border: 1px solid black; border-collapse: collapse; } 
```

...但这只是在整个表格周围设置边框，而不是单个单元格。

我想要的只是一个正常的表格，每个单元格周围都有线条。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:28:30.373

用这个：

```
table, table th, table td { border: 1px solid black; border-collapse: collapse; } 
```

（也需要将边框应用于表格单元格）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:32:42.373

上面的代码不起作用...

```
.table{ border: 1px solid black; border-collapse: collapse; } 
```

正在寻找一类“表格”而不是表格元素。要么将表类更新为“表”...

```
<table class="table"> 
```

...或更改您的 CSS 以查找表格元素本身。

```
table{ border: 1px solid black; border-collapse: collapse; } 
```

You will also need to style `th` and `td` elements to have the border.

# php - 写入文件和搜索文件 php

> ID：13018400
> 
> 赞同：0
> 
> 时间：2012-10-22T19:28:11.437
> 
> 标签：php, fwrite

我有一个调用此 URL 的 Java 小程序，该 URL 链接到应该写入文件但...没有骰子的 php 脚本。我收到一个 http 500 错误。有什么线索吗？

`http://127.0.0.1/DBoperations.php?operation=write&UserId=james&Score=10`

```
#DBoperations.php
<?php
$operation = $_REQUEST["operation"]
$UserId = $_REQUEST["Userid"];
$Score = $_REQUEST["Score"];

if (operation =="write"){
write();
}
if (operation =="read"){
read();
}

function write()
{
$myFile = "testsroce.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "$UserId - $Score";
fwrite($fh, $stringData);
fclose($fh);
}

function read()
{
$file = new SplFileObject('testscores.txt');
$file->setFlags(SplFileObject::DROP_NEW_LINES);
$match = false;
foreach($file as $line){
if( false !== stripos( $line, $UserId ) ){
    $match = true;
    break;
}
}
if( true === $match ){
echo $file;
} else {
echo "No Match Found";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:37:27.407

您在此行之后缺少一个分号：

```
$operation = $_REQUEST["operation"] 
```

应该

```
$operation = $_REQUEST["operation"]; 
```

您还缺少`$`一些地方的标志，例如

```
if (operation =="write"){ 
```

应该：

```
if ($operation =="write"){ 
```

# html - 如何在 href 中识别路径/文件/url

> ID：13018406
> 
> 赞同：1
> 
> 时间：2012-10-22T19:28:29.267
> 
> 标签：html, ruby, html-parsing, nokogiri

我正在尝试使用 Nokogiri 获取 HTML 标记中的`href`值。`<a>`

我想确定它们是路径、文件、URL 还是`<div>`id。

我目前的工作是：

```
hrefvalue = []
html.css('a').each do |atag|
        hrefvalue << atag['href']
end 
```

a 中的可能值`href`可能是：

```
somefile.html
http://www.someurl.com/somepath/somepath
/some/path/here
#previous 
```

是否有一种机制来识别该值是否是有效的完整 URL、文件、路径或其他？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:39:08.887

尝试 URI：

```
require 'uri'

URI.parse('somefile.html').path
=> "somefile.html"

URI.parse('http://www.someurl.com/somepath/somepath').path
=> "/somepath/somepath"

URI.parse('/some/path/here').path
=> "/some/path/here"

URI.parse('#previous').path
=> "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:40:32.103

Nokogiri 通常与 ruby​​ 的 URI 或 open-uri 一起使用，因此如果您遇到这种情况，您将可以访问它的方法。您可以使用它来尝试解析 URI（使用`URI.parse`）。`URI.join(base_uri, retrieved_href)`如果您已经存储了 base_uri，您通常也可以使用它来构建完整的 url。

（编辑/旁注：有关使用`URI.join`的更多详细信息可在此处获得：[https](https://stackoverflow.com/a/4864170/624590) ://stackoverflow.com/a/4864170/624590 ；请注意，`URI.join`这将字符串作为参数，而不是 URI 对象，因此在必要时强制执行）

基本上，回答你的问题

> 是否有一种机制来识别该值是否是有效的完整 url、文件、路径或其他？

如果 retrieved_href 和 base_uri 格式正确，并且 retrieved_href == 连接对，那么它是绝对路径。否则它是相对的（同样，假设输入格式良好）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:44:22.897

如果您使用 URI 来解析 href 值，然后对结果应用一些启发式方法，您可以找出您想知道的内容。这基本上是浏览器在发送对页面或资源的请求时必须做的事情。

使用您的示例字符串：

```
%w[
  somefile.html
  http://www.someurl.com/somepath/somepath
  /some/path/here
  #previous
].each do |u|
  puts URI.parse(u).class
end 
```

结果是：

```
URI::Generic
URI::HTTP
URI::Generic
URI::Generic 
```

唯一被 URI 识别为真正 HTTP URI 的是“http://www.someurl.com/somepath/somepath”。所有其他人都缺少方案“http://”。（您可能会遇到更多方案。有关更多信息，请参阅[规范](http://www.ietf.org/rfc/rfc2396.txt)。）

在通用 URI 中，您可以使用一些规则对它们进行排序，以便在必须打开它们时知道如何做出反应。

如果您通过抓取页面收集 HREF 字符串，则可以假设如果相关 URI 不提供相同的方案和主机是安全的。因此，如果您最初加载了“http://www.someurl.com/index.html”，则可以使用“http://www.someurl.com/”作为进一步请求的基础。

从那里，查看字符串内部以确定它们是锚点、绝对路径还是相对路径。如果字符串：

1.  从它开始`#`是一个锚点，将应用于当前页面而无需重新加载它。
2.  不包含路径分隔符`/`，它是一个文件名，将添加到当前检索的 URL，替换文件名并检索。进行替换的一个好方法是使用[`File.dirname`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-dirname),[`File.basename`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-basename)并[`File.join`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-join)针对字符串。
3.  以路径分隔符开头，它是绝对路径，用于替换原始 URL 中的路径。[`URI::split`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html#method-c-split)并且[`URI::join`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html#method-c-join)是你这里的朋友。
4.  不以路径分隔符开头，它是一个相对路径，并类似于#2 添加到当前 URI。

关于：

```
hrefvalue = []
html.css('a').each do |atag|
        hrefvalue << atag['href']
end 
```

我会改用这个：

```
hrefvalue = html.search('a').map { |a| a['href'] } 
```

但这只是我。

最后一点：URI 存在一些年龄问题，需要更新。这是一个有用的库，但对于重型 URI 撕裂，我强烈建议考虑使用[Addressable/URI](http://addressable.rubyforge.org/)。

# joomla - 不显示模块

> ID：13018409
> 
> 赞同：0
> 
> 时间：2012-10-22T19:28:38.697
> 
> 标签：joomla, joomla2.5

我正在做一个 joomla 2.5 项目

我放了这个`<jdoc:include type="modules" name="izquierdo" style="none"/>`，它什么也没显示。

我的模板中的职位是这样的：

```
<positions>
    <position>izquierdo</position>
    <position>extranet</position>
    <position>menuPrincipal</position> 
```

该模块的状态是公开的。

任何想法，我错过了什么吗？

我发现了一些奇怪的东西。如果我输入我的路线并在最后添加`?tp=1`它会显示我的所有位置并显示我的模块（我看到图像和其他想法），但是使用普通路由器（没有？tp = 1）我什么都看不到.

这是我的 xml 模板：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE install PUBLIC "-//Joomla! 1.6//DTD template 1.0//EN" "http://www.joomla.org/xml/dtd/1.6/template-install.dtd">
<extension version="2.5" type="template" client="site">
    <name>arquero</name>
    <creationDate>10/10/09</creationDate>
    <author>Ron Severdia</author>
    <authorEmail>mpiedra@edosoftfactory.com</authorEmail>
    <authorUrl>http://www.kontentdesign.com</authorUrl>
    <copyright>Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.</copyright>
    <license>GNU General Public License version 2 or later; see LICENSE.txt</license>
    <version>2.5.0</version>
    <description>ARQUERO_XML_DESCRIPTION</description>
    <files>
        <folder>html</folder>
        <folder>css</folder>
        <folder>images</folder>
        <folder>js</folder>
        <filename>index.php</filename>
        <filename>index.html</filename>
        <filename>templateDetails.xml</filename>
        <filename>ajax.php</filename>
        <filename>component.php</filename>
    </files>

    <positions>
        <position>izquierdo</position>
        <position>extranet</position>
        <position>menuPrincipal</position>
        <position>carrusel</position>
        <position>noticias</position>
        <position>footer</position>
        <position>debug</position>
    </positions>
</extension> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:45:52.183

您的模板似乎很好。但是在您的 jdoc 语句中尝试 style="xhtml"。

另一个猜测是请再次从后端检查模块的页面分配。您很可能会为模块分配选择“无页面”。

谢谢你。

# c++ - 在不使用动态内存分配的情况下声明可变大小的数组

> ID：13018413
> 
> 赞同：3
> 
> 时间：2012-10-22T19:28:46.573
> 
> 标签：c++, dynamic, scope

我想在不使用 new 运算符的情况下在函数中分配可变大小的 2D 数组，以便该 2D 数组可用于同一文件中的其他函数。

```
 void draw(int i)
    {   size=i;   }

    void assign(char symbol)
    {
        char one[size][size];
        /// ... Assigning values to one  ...
    }
    void display()
    {   /// Displaying values of one[size][size]
        for(int i=0;i<size;i++)
        {
            for(int j=0;j<size;j++)
            cout<<one[i][j];
            cout<<endl;
        }
    } 
```

函数的执行顺序是draw -> assign -> display

这个问题之前可能已经问过了。但我的问题是.. -> 我无法在全局分配函数之外声明数组，因为大小的值是未知的。-> 我不能在“显示”函数中使用“一个”数组，因为它的范围仅限于“分配”函数。

而且我也不想使用 new 或 malloc 运算符。如果有任何替代方案，请提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:34:02.463

C++ 不支持堆栈分配的可变长度数组，例如 C99。你应该`std::vector<T>`改用。如果你真的想使用堆栈分配，你可以使用`alloca()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:38:52.480

没有办法做到这一点。数组“one”是分配函数中堆栈上的临时变量。每当您离开分配功能时，它都会被销毁。

所以你需要以某种方式分配内存。

如果您一次只使用“一个”数组的一个副本，您可以在全局范围内声明它，并且空间足够大以提供舒适的上限。并在每次使用它时检查静态全局数组是否足够大。

是你关心的表现吗？还是您在无法进行内存分配的平台上？

其他一些选项：在系统外部静态分配数组，并将其作为参数传递给每个函数。

或者，如果可以从单个更高级别的“所有者”函数调用所有函数，则可以使用“alloca”在堆栈上动态分配数组。

例如

```
system()
{
   char one = alloca( size );
   draw( one, ... );
   assign( one, ...);
   display( one, ... );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-07T13:24:45.187

如果您不想使用动态内存分配，那么您必须支付分配一些超出所需内存的成本。您将数组的大小定义为足够大以处理手头的数据。像，

`int arr[my_limit];`

注意`my_limit`必须是一个常量表达式。

在问题中提到的程序中，**数组“one”的内存需求仅在运行时确定**，因此使用动态内存分配是一个好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:36:04.693

我在 C++ 方面并不完美，实际上我和你一样是新手。但是我认为你可以通过使用来做到这一点

```
"*pointer" 
```

我的意思是你应该显示你的数组的引用。然后你可以在函数之外使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T19:37:13.667

```
const int MAX_SIZE = 1000;
char one[MAX_SIZE][MAX_SIZE];
int size = 0; // needs to be smaller than MAX_SIZE

void draw(int i) {
    if(i < MAX_SIZE) size=i; 
}

void assign(char symbol, i, j)
{
    char one[i][j] = symbol;
}

void display()
{
    for(int i=0; i<size; i++) {
        for(int j=0; i<size; j++) {
            cout<<one[i][j];
        }
        cout<<endl;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T19:45:45.913

您是否尝试过在函数之外但在文件中定义数组？
例如：

```
static unsigned int my_array[16][32];
void my_func()
{
    /*...*/
}

int another_func()
{
  /*...*/
} 
```

# grails - Tomcat Context 停止了 Grails GGTS Cloudfoundry 插件

> ID：13018415
> 
> 赞同：0
> 
> 时间：2012-10-22T19:29:04.140
> 
> 标签：grails, grails-plugin, cloud-foundry

我正在使用云代工插件。我已经在 Config.groovy 中设置了我的凭据。你能告诉我更多关于我得到的错误吗？

```
Application Deployed URL: 'sqr-gb-ks.cloudfoundry.com'
> 
Would you like to create and bind a mysql service?[y,n] > Invalid input. Must be one of [y,n] y
Service 'mysql-8a02c10' provisioned.
> 
Would you like to create and bind a postgresql service?[y,n] > Invalid input. Must be one of [y,n] y
Service 'postgresql-d6ab9c9' provisioned.
| Creating application sqr-gb-ks at sqr-gb-ks.cloudfoundry.com with 1024MB and services [mysql-8a02c10, postgresql-d6ab9c9]: OK
| Uploading Application:
|   Checking for available resources: OK
|   Processing resources: OK
|   Packing application: OK
|   Uploading (50K): OK
| Trying to start Application: 'sqr-gb-ks'.....
| Error ERROR - Application 'sqr-gb-ks' failed to start, logs information below.
==== logs/stderr.log ====

Oct 22, 2012 4:57:47 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-25918
Oct 22, 2012 4:57:47 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 403 ms
Oct 22, 2012 4:57:47 PM org.apache.catalina.realm.JAASRealm setContainer
INFO: Set JAAS app name Catalina
Oct 22, 2012 4:57:47 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Oct 22, 2012 4:57:47 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Oct 22, 2012 4:57:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
Oct 22, 2012 4:58:10 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Oct 22, 2012 4:58:10 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [] startup failed due to previous errors
Oct 22, 2012 4:58:10 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.
Oct 22, 2012 4:58:10 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [net.sf.ehcache.CacheManager@403525a2] but has failed to stop it. This is very likely to create a memory leak.

==== logs/stdout.log ====

[  Envjs/1.6 (Rhino; U; Linux amd64 2.6.38-15-virtual; en-US; rv:1.7.0.rc2) Resig/20070309 PilotFish/1.2.13  ]
[  Envjs/1.6 (Rhino; U; Linux amd64 2.6.38-15-virtual; en-US; rv:1.7.0.rc2) Resig/20070309 PilotFish/1.2.13  ]
[  Envjs/1.6 (Rhino; U; Linux amd64 2.6.38-15-virtual; en-US; rv:1.7.0.rc2) Resig/20070309 PilotFish/1.2.13  ]
[  Envjs/1.6 (Rhino; U; Linux amd64 2.6.38-15-virtual; en-US; rv:1.7.0.rc2) Resig/20070309 PilotFish/1.2.13  ]
Stopping Tomcat because the context stopped. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:21:32.043

如果它是一个 Grails 应用程序，您应该使用[http://grails.org/plugin/cloud-foundry](http://grails.org/plugin/cloud-foundry)插件而不是 STS，因为它可以识别用于 JDBC、MongoDB、Redis 等的 Spring bean，并且会自动重新配置它们以用于你在部署。请参阅此处的文档：http: [//grails-plugins.github.com/grails-cloud-foundry/docs/manual/index.html](http://grails-plugins.github.com/grails-cloud-foundry/docs/manual/index.html)

另外——你真的想要一个 MySQL 和一个 PostgreSQL 数据库吗？您可能应该选择一个:)

您可以通过查看服务器上的 tomcat/logs 目录中的 stacktrace.log 和“localhost”日志来查看实际问题 - 这是真正的堆栈跟踪和错误消息所在的位置，而不是您在部署时看到的标准输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:30:28.503

感谢来自 odelia Technologies 的朋友 bertrand，我成功地将我的应用程序推送到了云端。我关闭了我添加的一个插件并运行了命令：grails cf-bind-service mysql-f1 ..（我没有这样做！）然后我不得不修改我的DataSource.groovy；

```
 production {
            dataSource {
                dialect= org.hibernate.dialect.MySQLInnoDBDialect
                driverClassName = "com.mysql.jdbc.Driver"
                    dbCreate = "update"
                username = "n/a"
                password = "n/a"
                url = "n/a"            
             }
     } 
```

# dependency-injection - 是否有用于 ASP.NET Web API 的 HttpControllerBuilder？

> ID：13018417
> 
> 赞同：13
> 
> 时间：2012-10-22T19:29:06.943
> 
> 标签：dependency-injection, asp.net-mvc-4, asp.net-web-api

如果我想为 ASP.NET MVC 控制器实现依赖注入，我可以使用`IControllerFactory`接口创建一个工厂类，然后在 Global.asax.cs 中注册它，例如：

```
ControllerBuilder.Current.SetControllerFactory(controllerFactory) 
```

（参考：[http](http://www.dotnetcurry.com/ShowArticle.aspx?ID=786) ://www.dotnetcurry.com/ShowArticle.aspx?ID=786 ）

现在我的问题是：

如何为`IHttpControllerActivator`派生类设置工厂？

**我们在 ASP.NET MVC 4.0 中是否有类似的东西：**

```
HttpControllerBuilder.Current.SetApiControllerActivator(httpControllerActivator) 
```

**?**

* * *

**更新：**

我想添加我当前的代码，理解这个案例可能会有所帮助：

我自定义的 HttpControllerActivator：

```
public class MyCustomApiActivator : DefaultHttpControllerActivator 
                                    //or IHttpControllerActivator ?
{
    private readonly Dictionary<string, Func<HttpRequestMessage, IHttpController>> _apiMap;

    public MyCustomApiActivator(IMyRepository repository)
    {
        if (repository == null)
        {
            throw new ArgumentException("repository");
        }
        _apiMap = new Dictionary<string, Func<HttpRequestMessage, IHttpController>>();
        controllerMap["Home"] = context => new HomeController();
        _apiMap["MyCustomApi"] = context => new MyCustomApiController(repository);
    }

    public IHttpController Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)
    {
        if(_apiMap.ContainsKey(controllerType.Name))
            return _apiMap[controllerType.Name](request);
        return null;
    }
} 
```

我的作文根：

```
public class CompositionRoot
{
    private readonly IHttpControllerActivator _apiControllerActivator;

    public CompositionRoot()
    {
        _apiControllerActivator = CompositionRoot.CreateHttpControllerActivator();
    }

    public IHttpControllerActivator ApiControllerActivator
    {
        get { return _apiControllerActivator; }
    }

    private static IHttpControllerActivator CreateHttpControllerActivator()
    {
        string defaultRepositoryTypeName = ConfigurationManager.AppSettings["DefaultRepositoryTypeName"];
        var defaultRepositoryType = Type.GetType(defaultRepositoryTypeName, true);
        var defaultRepository = (IMyRepository)Activator.CreateInstance(defaultRepositoryType);

        var apiController = new MyCustomApiActivator(defaultRepository);
        return apiController;
    }
} 
```

最后这是在 my 里面`Global.asax.cs`，我需要一个技巧：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        var root = new CompositionRoot();
        //The following line raise this compile-time error:
        // cannot convert from 'System.Web.Http.Dispatcher.IHttpControllerActivator' 
        //                to 'System.Web.Mvc.IControllerFactory'
        ControllerBuilder.Current.SetControllerFactory(root.ApiControllerActivator);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T20:52:46.947

Mark Seemann 是 .NET 中的依赖注入的作者，他有一个关于 DI 和 ASP.NET WebAPI 的简短系列。

他把作曲根放在一个`IHttpControllerActivator`

1.  [使用 ASP.NET Web API 进行依赖注入和生命周期管理](http://blog.ploeh.dk/2012/09/28/DependencyInjectionAndLifetimeManagementWithASPNETWebAPI.aspx)
2.  [ASP.NET Web API 中的依赖注入与 Castle Windsor](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)

也许这有帮助。

* * *

**更新**

```
GlobalConfiguration.Configuration.Services.Replace(
  typeof(IHttpControllerActivator),
  new PoorMansCompositionRoot()); 
```

`HttpControllerActivator`在全球范围内注册您的自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:53:05.147

在 ASP.NET 中，Web API[`HttpControllerDispatcher`](http://msdn.microsoft.com/en-us/library/system.web.http.dispatcher.httpcontrollerdispatcher%28v=vs.108%29.aspx)负责构造控制器。默认情况下它与 DependecyResolver 一起使用，但如果你想扩展它的功能，你需要重写它的 SendAsync 方法并重新注册它。

例子：

```
public class MyCustomDispatcher : HttpControllerDispatcher {

    protected override Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request, 
        CancellationToken cancellationToken) {

        // Do your stuff here

        // According to your requirements, either run its default functionality 
        // or return your own stuff
        return base.SendAsync(request, cancellationToken);
    }
} 
```

> **笔记：**
> 
> 但是，我无法找到一种优雅的方式来全局替换默认的方式。您可以通过将此自定义调度程序附加到路由来轻松替换每个路由的默认值，但似乎无法在全局范围内执行此操作。我在项目站点上对此进行了讨论：http: [//aspnetwebstack.codeplex.com/discussions/400366](http://aspnetwebstack.codeplex.com/discussions/400366)

# android - 从操作栏中删除或覆盖某些项目

> ID：13018425
> 
> 赞同：0
> 
> 时间：2012-10-22T19:29:30.073
> 
> 标签：android, android-actionbar

下面是运行 4.0.3 android ICS 的三星 Tab2 操作栏上的操作栏图像

![在此处输入图像描述](../Images/1e3d8e608c2339210c0e26527fd14546.png)

从左到右，我们有“返回、主页、最近的应用程序、屏幕截图、迷你应用程序启动器和系统菜单”按钮。我确定我没有为所有这些使用正确的名称，这就是为什么我将它们与上图一起从左到右列出。

我知道我可以使用以下方法覆盖“返回”的功能：

```
@Override
    public void onBackPressed() {
          // Do something custom here
    } 
```

我也知道我不能覆盖或删除主页按钮，但我想知道我是否可以删除或覆盖“最近的应用程序”、“截屏”和“迷你应用程序启动器”

如果我能把背部也去掉就好了。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:38:06.890

我们刚刚推出了近 100 台 GTab2，并订购了另外 1,000 台。这是我们已经广泛研究的内容，尤其是在屏幕截图和 minitab 膨胀方面。您不能删除屏幕截图按钮，也不能删除 minitab，除非您根设备并修改系统映像。（简而言之：你不能）。您可以通过实现自己的启动器并摆脱 touchwiz 来“删除”主页按钮。

FWIW，三星的 B2B 人员在支持我们的努力方面非常有帮助，即使我们的数量相对较少。例如，如果您正在围绕 GTab2 构建一个信息亭应用程序，您也许可以让他们为您提供一个不那么臃肿的图像。

```
static public final String[] pkgs_GT_P3113_LH2 = new String[] { "com.kobobooks.samsung.android", 
                                                                "com.netflix.mediaclient",
                                                                "com.nim.discovery",
                                                                "com.osp.app.signin",
                                                                "com.peel.app",
                                                                "com.samsung.mediahub",
                                                                "com.samsung.music",
                                                                "com.sec.android.app.gamehub",
                                                                "com.sec.android.app.minimode.res",
                                                                "com.sec.android.app.music",
                                                                "com.sec.android.app.readershub",
                                                                "com.sec.android.app.samsungapps",
                                                                "com.sec.android.app.sns3",
                                                                "com.sec.android.daemonapp.ap.yahoonews",
                                                                "com.sec.android.daemonapp.ap.yahoostock.stockclock",
                                                                "com.sec.android.widgetapp.ap.yahoonews",
                                                                "com.sec.android.widgetapp.at.yahoostock.stockclock",
                                                                "com.sec.android.widgetapp.minipaper",
                                                                "com.sec.chaton",
                                                                "com.sec.minimode.music",
                                                                "com.sec.pcw",
                                                                "com.tgrape.android.radar",
                                                                "com.zinio.samsung.android" }; 
```

# rss - 如何使用 SyndicationFeed 和 ServiceStack 改进我的 Rss/Atom 解决方案？

> ID：13018426
> 
> 赞同：2
> 
> 时间：2012-10-22T19:29:32.437
> 
> 标签：rss, servicestack, atom-feed, syndicationfeed

我成功地`System.ServiceModel.Syndication.SyndicationFeed`从我的 ASP.NET 3.5 网站添加了一些 Atom10 输出。这是我第一次在生产环境中使用 ServiceStack，一切正常。

我的第一次尝试导致了 UTF-16 而不是 UTF-8，这对于除 IE 之外的所有浏览器都可以。所以我不得不创建`XmlWriterResult`类来解决这个问题。我的解决方案有效，但我应该怎么做？

```
public class AsStringService : IService<AsString>
{
    public object Execute(AsString request)
    {
        SyndicationFeed feed = new SyndicationFeed("Test Feed " + request.Name, "This is a test feed", new Uri("http://Contoso/testfeed"), "TestFeedID", DateTime.Now);
        SyndicationItem item = new SyndicationItem("Test Item", "This is the content for Test Item", new Uri("http://localhost/ItemOne"), "TestItemID", DateTime.Now);

        List<SyndicationItem> items = new List<SyndicationItem>();
        items.Add(item);
        feed.Items = items;
        Atom10FeedFormatter atomFormatter = new Atom10FeedFormatter(feed);

        return new XmlWriterResult(xmlWriter => atomFormatter.WriteTo(xmlWriter));
    }
} 
```

`XmlWriterResult`是：

```
public delegate void XmlWriterDelegate(XmlWriter xmlWriter);

/// <summary>
/// From https://groups.google.com/forum/?fromgroups=#!topic/servicestack/1U02g7kViRs
/// </summary>
public class XmlWriterResult : IDisposable, IStreamWriter, IHasOptions
{
     private readonly XmlWriterDelegate _writesToXmlWriter;

     public XmlWriterResult(XmlWriterDelegate writesToXmlWriter)
     {
         _writesToXmlWriter = writesToXmlWriter;
         this.Options = new Dictionary<string, string> {
              { HttpHeaders.ContentType, "text/xml" }
         };
     }

     public void Dispose()
     {
     }

     public void WriteTo(Stream responseStream)
     {
         using (XmlWriter xmlWriter = XmlWriter.Create(responseStream))
         {
             _writesToXmlWriter(xmlWriter);
         }
     }

     public IDictionary<string, string> Options { get; set; }
} 
```

（是的，我喜欢delegate，我也做很多F#）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:41:20.050

由于这不是一个没有明确答案的问题，我只想告诉你我会怎么做。

假设**SyndicationFeed**是一个干净的 DTO / POCO，你应该在你的服务中返回它：

```
public class AsStringService : IService
{
    public object Any(AsString request)
    {
        SyndicationFeed feed = new SyndicationFeed("Test Feed " + request.Name, 
           "This is a test feed", new Uri("http://Contoso/testfeed"), 
           "TestFeedID", DateTime.Now);
        SyndicationItem item = new SyndicationItem("Test Item", 
           "This is the content for Test Item", 
            new Uri("http://localhost/ItemOne"), 
           "TestItemID", DateTime.Now);

        List<SyndicationItem> items = new List<SyndicationItem>();
        items.Add(item);
        feed.Items = items;

        return feed;
    }
} 
```

这个例子使用了更好[的 ServiceStack 的 New API ，你应该尝试在未来的服务中使用它。](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)

这将允许您在所有 ServiceStack 注册的 Content-Types 中获得 Content Negotiation。

## 注册自定义媒体类型

然后，您可以注册一个自定义媒体类型，如[ServiceStack 的 Northwind v-card 示例所示](http://www.servicestack.net/ServiceStack.Northwind/vcard-format.htm)：

```
private const string AtomContentType = "application/rss+xml";

public static void Register(IAppHost appHost)
{
    appHost.ContentTypeFilters.Register(AtomContentType, SerializeToStream, 
        DeserializeFromStream);
}

public static void SerializeToStream(IRequestContext requestContext, 
    object response, Stream stream)
{
    var syndicationFeed = response as SyndicationFeed;
        if (SyndicationFeed == null) return;

    using (XmlWriter xmlWriter = XmlWriter.Create(stream))
    {
            Atom10FeedFormatter atomFormatter = new Atom10FeedFormatter(feed);
            atomFormatter.WriteTo(xmlWriter);
    }
}

public static object DeserializeFromStream(Type type, Stream stream)
{
    throw new NotImplementedException();
} 
```

现在`rss+xml`格式应该出现在`/metadata`页面中，ServiceStack 将允许您在所有支持的 Content-Negotation 模式下请求格式，例如：

*   `Accept: application/rss+xml`HTTP 标头
*   使用预定义的路线，例如：`/rss+xml/syncreply/AsString`
*   或附加`/route?format=rss+xml`到 QueryString

*注意：您可能需要对“+”字符进行 url 编码*

# python - 使用 tkinter 选择目录的路径

> ID：13018427
> 
> 赞同：2
> 
> 时间：2012-10-22T19:29:33.480
> 
> 标签：python, user-interface, widget, tkinter

我正在尝试使用 Tkinter 获取目录的完整路径，但只显示目录名称。

例如，当我选择“C:\Python27\Doc”时，不会显示完整路径，而只显示“Doc”。

```
class Actions:

    def openfile(self): #open the file  
        directory = tkFileDialog.askdirectory()
        print(directory)

    def body(self):
        Label (text='Please select a directory').pack(side=TOP,padx=10,pady=10) 
```

我找到了这个[http://tkinter.unpythonic.net/wiki/tkFileDialog](http://tkinter.unpythonic.net/wiki/tkFileDialog)，但除非我误解它，否则我看不到任何完整路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:53:44.550

您是否尝试过 initialdir 关键字？例如`tkFileDialog.askdirectory(initialdir='.')`。那你得到什么？

# knockout.js - 无法显示基本的 kogrid（使用 jsfiddle）

> ID：13018428
> 
> 赞同：1
> 
> 时间：2012-10-22T19:29:36.830
> 
> 标签：knockout.js, kogrid

我正在尝试我的第一个 kogrid，我正在尝试用它来显示一个简单的数据网格。代码运行，但没有显示任何内容。jsfiddle 在[http://jsfiddle.net/z5Pdy/6/](http://jsfiddle.net/z5Pdy/6/)

HTML 是

```
 <div style="height: 300px; width:600px;"
    data-bind="koGrid: { data: brokerCommissions.list,
                           isMultiSelect: false,
                           selectedItem: selectedBroker,
                           columnDefs: [
{ field: 'broker', displayName: 'First Name' }
]}"></div> 
```

javascript是

```
 function AppViewModel() {
    var self = this;
    self.brokerCommissions = ko.observableArray([
        {
        "broker": "y",
        "c": 0},
    {
        "broker": "x",
        "c": 0}
    ]);
    self.selectedBroker = ko.observable();
}

function initializeKO() {
    VM = new AppViewModel();
    ko.applyBindings(VM);
}
initializeKO(); 
```

谁能告诉我为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:06:39.227

您的主要问题是您没有正确包含 koGrid JS 文件（如果您查看浏览器的开发工具，您将看到在请求脚本时返回 404）。

您的另一个问题是您正在使用`brokerCommissions.list`，它不存在。试试`brokerCommissions`吧：

```
<div style="height: 300px; width:600px;"
    data-bind="koGrid: { data: brokerCommissions,
                           isMultiSelect: false,
                           selectedItem: selectedBroker,
                           columnDefs: [
{ field: 'broker', displayName: 'First Name' }
]}"></div>​ 
```

**更新小提琴：http:** [//jsfiddle.net/z5Pdy/8/](http://jsfiddle.net/z5Pdy/8/)

# .htaccess - 如何在代码点火器中删除应用程序文件夹名称

> ID：13018431
> 
> 赞同：0
> 
> 时间：2012-10-22T19:29:48.617
> 
> 标签：.htaccess, codeigniter, url-rewriting, codeigniter-url

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^main.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]

    RewriteCond %{HTTP_HOST} .

RewriteCond %{HTTP_HOST} !^www.domain.com [NC]

RewriteRule (.*) http://www.domain.com/$1 [R=301,L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

目前 URL 显示为[http://www.domain.com/main/home](http://www.domain.com/main/home)但我宁愿它显示为[http://www.domain.com/home](http://www.domain.com/home)。我该如何改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:04:05.043

尝试在规则顶部附近添加：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?main/(.*)$ /$1 [L,R] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:44:41.837

Codeigniter 内置了对您的情况有帮助的路线。在 routes.php 中：

```
 $route['home'] = 'main/home'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:33:51.920

应该只是这些行（对第一行不肯定，但第二行肯定）：

```
RewriteRule (.*) http://www.domain.com/main/$1 [R=301,L]

RewriteRule ^(.*)$ /main/index.php?/$1 [L] 
```

# c# - 在这种情况下传递参数不起作用

> ID：13018438
> 
> 赞同：0
> 
> 时间：2012-10-22T19:30:13.900
> 
> 标签：c#, asp.net

我有以下内容，它似乎工作正常：

在我的 .cs 文件中：

```
 protected void menu_ItemClick(object sender, Telerik.Web.UI.RadMenuEventArgs e)
 {
    string value = (e.Item.Value).ToString();
    WtrClientDS.SelectCommand = "SELECT * from Prog where  ProgId = " + value;
 } 
```

在 .aspx 文件中：

```
<asp:SqlDataSource ID="WtrClientDS" runat="server" ConnectionString="<%$ ConnectionStrings:ProgSQL %>">

</asp:SqlDataSource> 
```

如前所述，我上面的工作正常，但我认为这不是最佳实践。

喜欢做的事情是我在 .aspx 文件中有 select 命令，如下所示，但不起作用：

.cs 文件内部

```
 protected void menu_ItemClick(object sender, Telerik.Web.UI.RadMenuEventArgs e)
     {

          string value = (e.Item.Value).ToString();
          // changed below per input from user but still does not work. 
          WtrClientDS.SelectParameters.Add(new Parameter("LocId", System.TypeCode.String, value)); 
     } 
```

.aspx 文件内部：

```
 <asp:SqlDataSource ID="WtrClientDS" runat="server" ConnectionString="<%$ ConnectionStrings:ProgSQL %>" 
      SelectCommand =  "SELECT * from Prog where  ProgId = @LocId">

    <SelectParameters> 
       <asp:Parameter Name="LocId" Type="String"  /> 
    </SelectParameters>
 </asp:SqlDataSource> 
```

我上面的内容根本行不通。不会给出错误，但根本不起作用。我还想知道哪种方法更受欢迎/更理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:41:30.383

尝试使用新的`SQLDataSource`：

```
protected void menu_ItemClick(object sender, Telerik.Web.UI.RadMenuEventArgs e)
 {
      string value = (e.Item.Value).ToString();
      string strConn = ConfigurationManager.ConnectionStrings["ConnectionStrings:ProgSQL"].ConnectionString; 

      SqlDataSource WtrClientDS = new SqlDataSource(); 
      WtrClientDS.ConnectionString = strConn;
      WtrClientDS.SelectCommand = "SELECT * from Prog where ProgId = @LocId"
      WtrClientDS.SelectParameters.Add(new Parameter("LocId", System.TypeCode.String, value));

      //refresh your control
      WtrClients.DataSource = WtrClientDS.Select(DataSourceSelectArguments.Empty);
      WtrClients.Rebind();
 } 
```

# java - jsp：包含参数数组

> ID：13018440
> 
> 赞同：9
> 
> 时间：2012-10-22T19:30:26.213
> 
> 标签：java, jsp, jstl

我想将数组作为参数传递给`jsp:include`. 下面的代码不起作用：

```
<jsp:include page="header.jsp">
    <jsp:param name="stylesheets" value="login.css" />
    <jsp:param name="stylesheets" value="login2.css" />
</jsp:include> 
```

这样做的正确方法是什么`${param.stylesheets} = "login.css, login2.css"`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T19:32:56.943

您需要改为访问它`${paramValues.stylesheets}`。它返回一个`String[]`.

# ruby-on-rails - 另一个带有nested_attributes 的质量分配错误

> ID：13018443
> 
> 赞同：0
> 
> 时间：2012-10-22T19:30:44.667
> 
> 标签：ruby-on-rails, nested-attributes

我不确定为什么在尝试使用复选框更新用户位置的布尔属性时仍然收到此批量分配错误（布尔属性为“is_visible”）：

这是质量分配错误：

```
'Can't mass-assign protected attributes: position' 
```

一个用户拥有多个职位。位置具有属性“is_visible”，它是布尔值。

你会注意到我在我的用户模型中包含了“accepts_nested_attributes_for”。我还在我的用户模型中包含“positions_attributes”作为可访问属性。

我的用户模型的摘录：

```
class User < ActiveRecord::Base

attr_accessible :position_ids, :positions_attributes

has_many :positions, dependent: :destroy
accepts_nested_attributes_for :positions

end 
```

我的职位模型：

```
class Position < ActiveRecord::Base
  attr_accessible :is_visible

  belongs_to :user  
end 
```

摘自我的观点：

```
<%= form_for(@user) do |f| %>
  <% @positions.present? and @positions.each do |position| %>
    <%= f.fields_for position do |p| %>
      <%= p.check_box :is_visible %>
    <% end %>
    Make this positions visible
<% end %> 
```

现在从我的用户控制器：

```
 def edit_profile
    @user = current_user
    @preferred_venue = @user.preferred_venues.last if @user.preferred_venues
    @positions = @user.positions
    @educations = @user.educations
  end

  def update
    @user = User.find(params[:id])

    if @user.update_attributes(params[:user])
      flash[:success] = "Profile saved"
      redirect_to @user
    end

  end 
```

将不胜感激任何反馈/帮助。谢谢！

# ruby-on-rails - 编译 CSS 资源时出错（Compass + Sass + Heroku）

> ID：13018445
> 
> 赞同：1
> 
> 时间：2012-10-22T19:31:06.363
> 
> 标签：ruby-on-rails, heroku, sass, compass-sass

我有一个使用 Compass 和 Saas 在 Heroku 上运行的站点，运行良好（在推送到 Heroku 时编译资产似乎很好）。

我在 assets 中添加了一个新文件夹来命名其他样式，就像这样

```
/app/assets/stylesheets/site/site1.css
/app/assets/stylesheets/site/site2.css
/app/assets/stylesheets/site/common/base.css.saas
/app/assets/stylesheets/site/site/site1.css.saas
/app/assets/stylesheets/site/site/site2.css.saas
... 
```

问题是当我访问使用`site1.css`样式的页面时，出现以下错误

```
Error compiling CSS asset
Sass::SyntaxError: File to import not found or unreadable: ../compass/css3/text-shadow.
Load path: /app
  (in /app/app/assets/stylesheets/site/common/base.css.sass)

  /app/app/assets/stylesheets/site/common/base.css.sass) 
```

错误所指的行是这个

```
/app/assets/stylesheets/site/common/base.css.sass
@import "../compass/css3/text-shadow" 
```

我都试过了`"../compass/css3/text-shadow"`和`"compass/css3/text-shadow"`。在这两种情况下，我都遇到了同样的错误。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:56:12.153

解决了。

我需要在`production.rb`文件中指定要编译的附加文件

```
config.assets.precompile +=
  Dir["#{Rails.root}/app/assets/stylesheets/site/site/*.*"].collect {|s| "site/" + File.basename(s).gsub(/.scss|.sass/, '') } 
```

现在工作正常。

# java - tomcat7不会在启动时运行

> ID：13018446
> 
> 赞同：1
> 
> 时间：2012-10-22T19:31:10.347
> 
> 标签：java, tomcat, ubuntu, amazon-ec2, amazon-web-services

尝试了一切，但它不起作用，我在 EC2 实例（亚马逊 AWS）上运行 tomcat7。我可以通过启动startup.sh手动启动tomcat7，但不能在启动时自动启动。我在 logs/catalina.out 中收到的错误消息如下：

```
/etc/apache-tomcat-7.0.32/bin/catalina.sh: 1: eval: /etc/jdk1.7.0_07/bin/java: not found 
```

我的环境变量也设置正确：

```
echo $JAVA_HOME -> /etc/jdk1.7.0_07/bin/java
echo $PATH -> /usr/local/sbin:/usr/local/bin:/usr/sbin/:/usr/bin:/sbin:/bin:/usr/games:/etc/jdk1.7.0_07/bin 
```

我也可以在 shell 中键入“java -version”以获得正确的输出，但是“/etc/jdk1.7.0_07/bin/java -version”不起作用，只会返回“ *No such file or directory* ”。

我真的不知道现在该怎么办，感觉我什么都试过了，希望有人能帮助我！该实例也正在运行**Ubuntu server 12.04**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:10:18.287

我并不特别了解 EC2 上的 ubuntu+tomcat7 的细节。所以我的回答可能有点漏掉了。它是从通用 ubuntu 的角度给出的。

如果您在 ubuntu 上使用 apt-get 管理 tomcat 和 java，可能会更容易管理。在这种情况下，tomcat 将在启动时自动启动。以下命令在 ubuntu 12.10 上进行了测试，但也适用于一些早期版本。

要安装 Java，您需要以下内容：

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

如果第一个命令失败，请使用以下命令：

```
sudo apt-get install software-properties-common 
```

然后使用以下命令安装tomcat7：

```
sudo apt-get install tomcat7 
```

之后，您需要告诉 tomcat 使用已安装的 java 7。为此，可以手动修改 /etc/default/tomcat7 文件，也可以使用如下命令：

```
cat /etc/default/tomcat7 | sed 's/#JAVA_HOME=\/usr\/lib\/jvm\/openjdk-6-jdk/JAVA_HOME=\/usr\/lib\/jvm\/java-7-oracle/' >/tmp/tomcat7-updated
sudo cp /tmp/tomcat7-updated /etc/default/tomcat7 
```

之后，tomcat 应该在启动时加载。您只需要调整端口和其他配置信息。请注意，这个 tomcat 使用 /var/lib/tomcat7/webapps/ 来存储 Web 应用程序。您还可以使用以下命令手动启动或停止 tomcat：

```
sudo /etc/init.d/tomcat7 start 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:38:49.920

执行`sudo su vi /etc/bash.bashrc`并复制以下内容

```
JAVA_HOME=/etc/jdk1.7.0_07 //you have to only specify path until java dir not bin
export JAVA_HOME
PATH=$PATH:$JAVA_HOME/bin
export PATH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:49:10.247

对于tomcat的自动启动，它应该只在启动时启动。

为此，您需要编写一个启动 tomcat 的脚本并将此文件放在 etc/init.d 中，或者您可以将其用于不同的运行级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-13T09:32:03.243

对我的提示是修改 shell 脚本文件（设置 JAVA_HOME 变量），这解决了问题。

tomcat脚本文件一般在***/etc/init.d/***目录下

# c# - 任何 Cpu 都无法识别命名空间

> ID：13018447
> 
> 赞同：2
> 
> 时间：2012-10-22T19:31:17.320
> 
> 标签：c#, .net, visual-studio-2010

我最近遇到了 VS2010、C# 和 .Net 4 的问题，我无法使用引用程序集中的命名空间（称为 AssemblyA）。它与[这里](https://stackoverflow.com/questions/4228992/namespace-not-recognized-even-though-it-is-there)的问题类似。

我可以通过将 AssemblyA 设置为目标 x86 平台而不是 Any Cpu 来解决问题。

我的问题是为什么将平台目标更改为 x86 允许我在项目中使用来自 AssemblyA 的命名空间？

我想指出，我能够在其他项目中引用 AssemblyA 而无需更改平台目标。此外，我所有的参考资料都是项目参考资料。

### 编辑：显然我错了。即使更改为 x86 也无法正常工作。有什么想法可能导致这种情况吗？

*更新：我所有的项目都使用完整的 .NET 4 配置文件。*

## 编辑：

在做了一些测试后，我有更多的信息。当我在调试/发布版本之间切换（与我切换的顺序无关）并在 AssemblyA 上进行清理时，我可以毫无问题地使用命名空间。一旦我重建了 AssemblyA，我就不能再使用命名空间了。我的目标平台似乎并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:55:40.213

我不确定这里的交易是什么，但为了解决问题，我刚刚创建了一个全新的项目并复制了代码。新项目的设置与给我问题的项目相同。但是我可以毫无问题地在我的其他项目中引用新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:57:02.573

您需要确保引用程序集的项目设置为“.NET 4 Full Profile”，而不是默认的“Client Profile”。如果您的 DLL 使用完整配置文件中的类并且您的程序集设置为客户端配置文件，则它无法引用 DLL。

因此，只需右键单击您的项目，然后单击`Properties`。然后在`Application`选项卡下，查看`Target Framework`. 确保它没有设置为`.NET Framework 4 Client Profile`

# iis - 保持 IIS 响应长时间运行的请求 - 调整队列优先级/位置？

> ID：13018448
> 
> 赞同：2
> 
> 时间：2012-10-22T19:31:25.963
> 
> 标签：iis, iis-7.5, asp.net-4.0

我的网站上有一些页面/soap 调用，它们与许多其他系统远程交互以获取数据、处理数据、进行一些同步数据库调用，然后将响应发回。这些调用在负载下通常需要超过 10 秒，并且往往会阻塞 IIS 上的请求。

在这种情况下是否有可能选择性地终止请求或让它们处于等待状态（在峰值负载下将它们进一步推到队列中）？如果是，是否可以不通过 InetManager 来执行此操作（如编写访问工作进程并按首选顺序或其他方式对队列中的请求进行排序的代码）？

**更新：**无论如何，终止请求是不可能的（即使归结为那个），因为它将回收应用程序池。

# php - AJAX PHP 标头 401

> ID：13018454
> 
> 赞同：1
> 
> 时间：2012-10-22T19:32:22.443
> 
> 标签：php, html, ajax, redirect, header

因此，我在主页上使用 ajax 将表单数据提交到将所有数据插入数据库的 php 脚本。完成后虽然我想重定向到某个地方。所以这是我的ajax：

```
$('#form').submit(function() {
    if(val.form()) { 
    var $this = $(this);
        $.ajax({
            data: $this.serialize(), // get the form data
            type: "POST",
            url: "scripts/insert.php",
            complete: function(response){
                var redirect = response.getHeader('Location');
                alert(redirect);
            }
        });
    }
    return false;
}); 
```

在 php 文件的末尾，我有：

```
header("Location: http://www.google.com", true, 401);
exit(); 
```

我使用 chromephp 进行调试，因此在执行控制台时会输出以下内容：

```
POST http://www.domain.com/Folder/scripts/insert.php 401 (Authorization Required) jquery.min.js:2

Uncaught TypeError: Object #<Object> has no method 'getHeader' /Folder/:320 
```

那么，当我使用 ajax 时，如何在脚本末尾重定向？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:39:58.267

试试看：

```
<?php  
ini_set('display_errors', false);  
echo ('Location: http://www.google.com');
?> 
```

它对我有用。

JavaScript：

```
 $.ajax({
  type: 'POST',
  url: "http://localhost/test.php",
  data: {name: name },
  success: function(output){ window.location = output; }
  dataType: dataType
}); 
```

# jsf - HttpSession 在页面刷新时过期

> ID：13018458
> 
> 赞同：2
> 
> 时间：2012-10-22T19:32:31.307
> 
> 标签：jsf, scope, managed-bean, httpsession

我是 JSF 的新手，我正在做一些关于 Scopes 和 Http 会话生命周期的研究，但我不清楚一件事。

我知道可以使用 ExternalContext 中的 sessionMap 来存储变量，并且它曾经可以很好地满足我的需要。我也知道，当会话无效时，存储在地图上的所有数据都会丢失。

但是，我不知道的是：刷新页面时会话无效？

当我不得不在我的 Web 应用程序中的一个按钮上发出下载请求时，我的问题就出现了。显然无法通过 Ajax 发出下载请求，因此必须刷新整个页面。下载正常进行，但在那之后，地图上存储的所有数据都消失了，包括所有托管的 bean。用户数据本身并不重要，因为我可以存储它，然后将其再次放在新的会话地图上。但是托管 bean 呢？我应该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:12:30.330

假设行为不端的不是网络浏览器，只有当服务器端代码实际上通过调用`ExternalContext#invalidateSession()`or使会话无效时才会发生这种情况`HttpSession#invalidate()`。

如果您似乎无法确定它，那么创建一个`HttpSessionListener`并在方法上放置一个调试断点，`sessionDestroyed()`并调查启动它的调用堆栈以及原因。

# html - Jinja2 模板 html 表单 - 更新选择

> ID：13018463
> 
> 赞同：1
> 
> 时间：2012-10-22T19:32:45.417
> 
> 标签：html, google-app-engine, jinja2, html-select, partial-page-refresh

我编写了一个将事件列表添加到 Google 日历的应用程序。我使用 Jinja2 作为我的模板框架。我在模板中有一个选择框，让用户可以选择他们想要将约会上传到哪个日历，它看起来像这样：

```
<form method="post" action="/succes">
<select name="calendarsummary">
{% for calendar_list_entry in calendar_list['items'] %}
    <option value={{ calendar_list_entry['id'] }}>{{ calendar_list_entry['summary'] }    
</option>
{% endfor %}
</select> 
```

因此，在初始加载时，它会显示所有用户日历。但是，我也提供了动态创建新日历的选项。由于表单所在的页面正在处理上传的数据，我不能简单地重新加载整个页面来刷新`<select>`.

是否可以通过 a`<input type="text">`和- 按钮创建额外的日历以`submit`即时刷新`select`？如果是这样，我需要在哪里寻找解决方案？

现在我有一个正在监听的处理程序`action="/succes"`。但是，在创建一个显示操作结果的新页面的帖子上，即上传的约会。如何实现另一个不会触发 succeshandler 的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:08:27.987

您可以向表单添加更多按钮。因此，您可以添加一个输入（日历名称）和一个提交按钮（添加新日历），用于发布/添加新日历并显示更新的页面。

在您的 /succes 后处理程序中，您可以找出提交页面的按钮。

您还可以使用 jquery 来更新页面 dom 并添加日历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:52:54.633

如果我理解正确，当您创建新日历时，您将执行 POST 以保存它并对同一页面执行 GET 请求，以便 jinja 模板重新加载新数据。

# c# - 为 WebGrid MVC 3 上的单个列提供格式

> ID：13018466
> 
> 赞同：2
> 
> 时间：2012-10-22T19:32:58.063
> 
> 标签：c#, asp.net, razor, styles, webgrid

我的数据库中有一个存储过程，并在我的 Web 应用程序中将其转换为 WebGrid。问题是，由于我从存储过程中获得的列是动态的（这意味着我不知道有多少列和每个人的名字）我没有在 grid.GetHtml() 函数中指定列变量，我有像这样的东西：

```
@grid.GetHtml(fillEmptyRows: false,
        tableStyle: "table table-hover",
        mode: WebGridPagerModes.All,
        firstText: "<< First",
        previousText: "< Back",
        nextText: "Next >",
        lastText: "Last >>"
        ) 
```

就是这样！

所以，问题是，如何只为一列赋予样式？例如，我知道至少一列是“名称”，我希望它具有“宽度：100px”，因为如果我只指定一列，它将只显示该列！请我希望你们能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:42:15.820

您可以使用 Javascript 来做到这一点——我不确定是否有办法使用严格的 WebGrid / CSS 来做到这一点。

首先，使用客户端 ID 渲染 WebGrid 表，以便您可以定位它：

```
 @grid.GetHtml(
     // code here
     htmlAttributes: new { id = "mygrid" }
 ) 
```

现在使用带有选择器的 JQuery 添加样式[`:contains`](http://api.jquery.com/contains-selector/)：

```
<script>
    // select the column named "Name" and update its width
    var idx = $("#mygrid th:contains('Name')").attr("width", 100);
</script> 
```

# matrix - 在 Octave 的目录中加载所有数据文件

> ID：13018470
> 
> 赞同：3
> 
> 时间：2012-10-22T19:33:30.750
> 
> 标签：matrix, directory, octave

我需要将目录中的所有数据加载到 octave 中（无论它们的文件名是什么），以便将来自单独文件的数据加载到单独的矩阵中。我怎样才能做到这一点？

我尝试使用`dir`然后`glob`使用`for`循环，但我不知道如何从单元格中获取矩阵。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T18:15:44.683

我不是 100% 确定你的问题。当您提到从单元格中获取矩阵时，我猜您的问题是从`readir`and的输出中提取文件名`glob`。如果是这样，您可以获取名称`filenames(1)`（如果您使用`{}`索引单元格数组，您将获得另一个单元格数组）。

```
filelist = readdir (pwd)
for ii = 1:numel(filelist)
  ## skip special files . and ..
  if (regexp (filelist{ii}, "^\\.\\.?$"))
    continue;
  endif
  ## load your file
  load filelist{ii}
  ## do your maths
endfor 
```

`load`如果文件名很好，您可以在行上使用结构`data.(filelist{ii}) = load filelist{ii}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T09:23:24.277

carandraug 的回答很好，我只想说明在某些 Octave 版本中，负载线可能需要写成：

```
load (filelist{ii}) 
```

# asp.net-mvc-4 - 阻止 401 上的浏览 器身份验证对话框

> ID：13018472
> 
> 赞同：5
> 
> 时间：2012-10-22T19:33:45.287
> 
> 标签：asp.net-mvc-4, iis-6, authorization, asp.net-web-api

我在启用 MVC4 Forms 身份验证的网站内运行 web-api webservice。Forms 身份验证应用程序使用 web-api web 服务。我已经使用 [Authorize] 属性保护了 web-api。*现在，当我在授权票证过期时*从 MVC4 应用程序调用 web-api时，我得到了一个丑陋的浏览器类型的登录对话框（不适用于表单身份验证）。我没有在我的开发机器（IIS7.5）上得到这个，我不太明白！如何防止出现此对话框？我只需要收到401。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:56:06.160

[John Galloway 在他的ASP.NET Web API - Authorization](http://weblogs.asp.net/jgalloway/archive/2012/03/23/asp-net-web-api-screencast-series-part-6-authorization.aspx)截屏视频中很好地解释了这一点（*强烈推荐观看*）

对于像下面这样的一些 api 控制器，您在其中使用了一个`Authorize`属性。

```
[Authorize] 
public class CommentsController : ApiController  
{ 
...
} 
```

他说，如果客户端发出未经授权的请求，AuthorizationFilter 会做唯一对 HTTP API 有意义的事情 - 它返回 HTTP 状态代码 401，需要授权。再次，我们回到了使用 HTTP 作为 API 的价值——我们不需要安排任何事情，任何平台上的任何客户端都会知道 HTTP 401 响应的含义。

由客户端决定当他们收到 401 时该怎么做。在这个基于 JavaScript / 浏览器的示例中，我们将重定向到客户端上的登录页面。

```
$(function () { 
$("#getCommentsFormsAuth").click(function () { 
    viewModel.comments([]); 
    $.ajax({ url: "/api/comments", 
        accepts: "application/json", 
        cache: false, 
        statusCode: { 
            200: function(data) { 
                viewModel.comments(data); 
            }, 
            401: function(jqXHR, textStatus, errorThrown) { 
                self.location = '/Account/Login/'; 
            } 
        } 
    }); 
}); 
}); 
```

在此示例中，如果遇到 401，则由您决定必须做什么。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:13:16.820

将站点移动到 IIS8 服务器，现在问题已经消失了......

# asp.net-mvc - 程序化对象创建

> ID：13018475
> 
> 赞同：1
> 
> 时间：2012-10-22T19:33:52.383
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我有以下硬编码对象：

```
data.Add(New Object() {"Date", "Minutes"}) 
```

如何从一个 for each 创建一个这样的对象？例如：

```
For each item in group

    ' do something

Next 
```

*（当“组”包含“日期”和“分钟”时。）*

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:35:24.130

您可以使用 LINQ 来执行此操作：

```
data = group.Select(Function(item) new YourObject() With {.Date = item.Date, .Minutes = item.Minutes }).ToList() 
```

如果您真的想`For Each`循环执行，可以使用：

```
For Each item In group
    data.Add(new YourObject() With {.Date = item.Date, .Minutes = item.Minutes })
Next 
```

# compiler-construction - 将源信息放入 LLVM 位码文件以调试编译器错误

> ID：13018481
> 
> 赞同：4
> 
> 时间：2012-10-22T19:34:28.160
> 
> 标签：compiler-construction, f#, code-generation, llvm, llvm-fs

我正在制作一个基本的编译器，并希望将源代码行放在为便于调试而生成的 llvm 代码附近的某个位置。例如：

```
proc f(a:Int, b:Int):Int {
    return a + b;
}

start {
    print f(1,2);
    return 0;
} 
```

应该以某种方式用源注释，如下所示：

```
@numFmt = internal constant [4 x i8] c"%d\0A\00"

declare i32 @printf(i8*, ...) nounwind

define i32 @main() {
entry:
  %print.0 = call i32 @f(i32 1, i32 2)     ; print f(1,2) maybe using a comment
  %tmp.3 = call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([4 x i8]* @numFmt, i32 0, i32 0), i32 %print.0)
"return 0    - or perhaps using a basic block":
  ret i32 0
}

define i32 @f(i32 %a, i32 %b) {
entry:
  "return a + b" = <or the result of some dummy operation that doesn't get stripped away"
  %return.0 = add i32 %a, %b
  ret i32 %return.0
} 
```

有什么解决方案/方法吗？（顺便说一句，我正在使用 llvm-fs 绑定，但我只想要一种适用于 IR 的方法）

# php - 多个选择字段的最佳实践？

> ID：13018482
> 
> 赞同：0
> 
> 时间：2012-10-22T19:34:29.077
> 
> 标签：php, database, drop-down-menu

我还不想发布 PHP 代码，因为我真的不认为我有最好的方法来做到这一点。

无论如何，这是我想要完成的。

我有一个“班级列表”表，其中包含讲师指导的班级信息——包括地区和班级类型。

我有“区域”表和“类类型”表。现在人们可以从下拉列表中选择他们的地区或班级类型——效果很好。

但是他们想要选择多个区域和类类型的选项 - 这些必须是可搜索/可排序的。因此，当有人登录时，默认情况下他们只会看到他们所在地区的课程。

我创建了一个辅助表“regionhelper”，其中包含字段 - regionhelperid、regionid 和 classlistid。我能够将多个区域添加到一个类中——效果很好。

但我希望最终用户能够看到一个包含所有区域的选择框，并且通过他们选择 12 个区域中的 3 个，他们将更新 regionhelper 表上的 3 行。正确的？

如果我背后的过程是正确的，我如何在不同的表上一次更新多行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:31:25.640

您不必有一个区域帮助表来存储额外的区域。您可以用逗号分隔数据库中的区域，然后使用[explode()](http://php.net/manual/en/function.explode.php)迭代它们并获取每个区域。这节省了不必要地拥有多个表的复杂性。

例如巴黎、内罗毕、蒙得维的亚

要在数据检索期间获取各个区域，您可以简单地使用：

```
 //Query to fetch region's field data for that user

     $data = explode(',', $regions);

    //The $data then stores the values in a numerically indexed array
    //So $data[0] = Paris
    //$data[1] = Nairobi
    //$data[2] = Montevideo 
```

# python - 有没有更好的方法来表示 uint8 数据

> ID：13018483
> 
> 赞同：1
> 
> 时间：2012-10-22T19:34:37.943
> 
> 标签：python, arrays, numpy, uint, usrp

我对 uint8 数据的表示有疑问。

我有一个保存 uint8 数据的 MATLAB MAT 文件。

MAT 文件正在使用 Python 读入`scipy.io.loadmat()`并形成字典。MAT文件的数据字段对应的数组是从字典中提取出来的。数组看起来像：

```
array[[162],[122],...[135],dtype:uint8] 
```

之后，将该数组保存为 txt 格式，以供以后读取文件。但是，txt文件中的数据是双精度的。例如，`uint8`数据`162`保存为`1.620000000000000000e+02`. 这不是我想要的，因为它会占用太多内存。

我需要的是每一个字节`source_file.read()`对应一个`uint8`数据。

有没有更好的方法来表示 uint8 数据？将 uint8 转换为字符串是可能的，但仍需要 2-3 个字节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T19:55:47.803

您可能正在使用[`numpy.savetxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)，它具有默认`fmt`参数`'%.18e'`，意思是“具有 18 位精度的指数格式”。

您可以将其更改为会输出整数的内容（例如`fmt='%d'`），但这在文件空间使用方面仍然非常低效（因为它是 ASCII 编码的整数）。

[`numpy.save`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.save.html)[是一种更有效的二进制格式，虽然它包含一些标题（格式描述](https://github.com/numpy/numpy/blob/master/doc/neps/npy-format.txt#L152)），但它更接近您的要求。如果您只想要二进制数据，那么`tostring` [按照 dbaupp 的建议是要走](https://stackoverflow.com/a/13018843/344821)的路：

```
with open('outfile', 'wb') as f:
    f.write(the_array.tostring()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T19:57:38.443

Numpy在数据结构[`tostring()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tostring.html)和二进制字符串[`fromstring()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromstring.html)之间进行转换。`ndarray`例如

```
> a = numpy.array([162,122,135], dtype=numpy.uint8)
> a.tostring()
'\xa2z\x87' 
```

（那个字符串是`['\xa2', 'z', '\x87']`，`\x..`代表一个字节。）

# django - Django中的Send_mail，在shell中工作，在本地工作，不在视图中

> ID：13018484
> 
> 赞同：6
> 
> 时间：2012-10-22T19:34:38.677
> 
> 标签：django, email, send

我什至不确定如何调试它：我在 Django 的一个视图中使用 send_mail。它在本地使用应用程序时工作正常（使用我在生产中使用的相同 SMTP 设置），并且在生产环境中从 shell 工作正常（再次，使用相同的设置）。但是当我实际在生产中使用该应用程序时，消息不会发送。知道如何排除故障吗？

我不会粘贴整个视图，但这里是相关部分。

```
if request.method == 'POST':
    message, form = decideform(request.POST)
    if form.is_valid():
        invitation.status = form.cleaned_data['status']
        invitation.save()
        message, form = decideform(request.POST)
        update = 'Thank you for updating your status.'

        # Send an email confirming their change
        subject = 'Confirming your RSVP [%s %s]' % (invitation.user.first_name, invitation.user.last_name)
        body = message + ' Remember, the URL to update or change your RSVP is http://the.url%s.' % invitation.get_absolute_url()
        send_mail(subject, body, 'rsvp@mydomain.com', ['rsvp@mydomain.com', invitation.user.email], fail_silently=True) 
```

这是我的 local_settings 文件中的相关位，为了安全起见，对重要的细节进行了更改：

```
EMAIL_HOST = 'mail.mydomain.com'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'rsvp@mydomain.com'
DEFAULT_FROM_USER = 'rsvp@mydomain.com'
EMAIL_HOST_PASSWORD = 'p4ssw0rd' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:38:25.693

检查权限。可能是您有权运行 send_mail，但应用程序没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-03T11:56:22.050

您可以尝试 django-sendgrid 代替，它非常容易配置。使用这样的设置

```
EMAIL_BACKEND = "sgbackend.SendGridBackend"
SENDGRID_USER = 'xxxxxx'
SENDGRID_PASSWORD = 'xxxxxx'
EMAIL_PORT = 1025 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T12:42:07.487

我有同样的问题。3年后:)复制send_mail inline的代码修复了它，但我仍然不知道为什么

```
 connection = django.core.mail.get_connection(username=None, password=None, fail_silently=False)
        mail = django.core.mail.message.EmailMessage('hello', 'world', 'test@gmail.com', ['test@gmail.com'],                                              connection=connection)
        mail.send() 
```

# java - 并发：缓存一致性问题还是编译器优化？

> ID：13018486
> 
> 赞同：1
> 
> 时间：2012-10-22T19:34:48.697
> 
> 标签：java, multithreading, concurrency, pthreads, javac

据我了解，如果硬件在多处理器系统上支持缓存一致性，那么对共享变量的写入将对其他处理器上运行的线程可见。为了测试这个，我用 Java 和 pThreads 编写了一个简单的程序来测试这个

```
public class mainTest {

    public static int i=1, j = 0;
    public static void main(String[] args) {

    /*
     * Thread1: Sleeps for 30ms and then sets i to 1
     */
    (new Thread(){
        public void run(){
            synchronized (this) {
                try{
                       Thread.sleep(30);
                       System.out.println("Thread1: j=" + mainTest.j);
                       mainTest.i=0;
                   }catch(Exception e){
                       throw new RuntimeException("Thread1 Error");
                }
            }
        }
    }).start();

    /*
     * Thread2: Loops until i=1 and then exits.
     */
    (new Thread(){
        public void run(){
            synchronized (this) {
                while(mainTest.i==1){
                    //System.out.println("Thread2: i = " + i); Comment1
                    mainTest.j++;
                }
                System.out.println("\nThread2: i!=1, j=" + j);
            }
        }
    }).start();

   /*
    *  Sleep the main thread for 30 seconds, instead of using join. 
    */
    Thread.sleep(30000);
    }
}

/* pThreads */

#include<stdio.h>
#include<pthread.h>
#include<assert.h>
#include<time.h>

int i = 1, j = 0;

void * threadFunc1(void * args) {
    sleep(1);
    printf("Thread1: j = %d\n",j);
    i = 0;
}

void * threadFunc2(void * args) {
while(i == 1) {
        //printf("Thread2: i = %d\n", i);
        j++;
    }
}

int main() {
    pthread_t t1, t2;
    int res;
    printf("Main: creating threads\n");

    res = pthread_create(&t1, NULL, threadFunc1, "Thread1"); assert(res==0);
    res = pthread_create(&t2, NULL, threadFunc2, "Thread2"); assert(res==0);

    res = pthread_join(t1,NULL); assert(res==0);
    res = pthread_join(t2,NULL); assert(res==0);

    printf("i = %d\n", i);
    printf("Main: End\n");
    return 0;
} 
```

我注意到 pThread 程序总是结束。（我测试了 thread1 的不同睡眠时间）。然而，Java 程序只结束了几次；大多数时候都不会结束。如果我在 java 程序中取消注释 Comment1，那么它会一直结束。此外，如果我使用 volatile，那么它在所有情况下都以 java 结束。

所以我的困惑是，

1.  如果缓存一致性是在硬件中完成的，那么除非编译器优化了代码，否则其他线程应该可以看到“i=0”。但是如果编译器优化了代码，那么我不明白为什么线程有时会结束而有时不会。还添加 System.out.println 似乎会改变行为。

2.  任何人都可以看到导致这种行为的 Java 所做的编译器优化（C 编译器没有完成）吗？

3.  即使硬件已经支持它，编译器是否还需要做一些额外的事情来获得缓存一致性？（如启用/禁用）

4.  我应该默认对所有共享变量使用 Volatile 吗？

我错过了什么吗？欢迎任何其他意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:47:59.400

> 如果缓存一致性是在硬件中完成的，那么除非编译器优化了代码，否则其他线程应该可以看到“i=0”。但是如果编译器优化了代码，那么我不明白为什么线程有时会结束而有时不会。还添加 System.out.println 似乎会改变行为。

注意：`javac`几乎没有优化，所以不要考虑静态优化。

您正在锁定与您正在修改的对象无关的不同对象。由于您正在修改的字段不是`volatile`JVM 优化器，因此无论您的硬件可以提供何种支持，JVM 优化器都可以自由选择动态地对其进行优化。

由于这是动态的，它可能会或可能不会优化您在该线程中未更改的字段的读取。

> 任何人都可以看到导致这种行为的 Java 所做的编译器优化（C 编译器没有完成）吗？

优化很可能是读取缓存在寄存器中或代码被完全消除。此优化通常需要大约 10-30 毫秒，因此您正在测试此优化是否在程序完成之前发生。

> 即使硬件已经支持它，编译器是否还需要做一些额外的事情来获得缓存一致性？（如启用/禁用）

您必须正确使用模型，忘记编译器会优化您的代码的想法，并理想地使用并发库在线程之间传递工作。

```
public static void main(String... args) {
    final AtomicBoolean flag = new AtomicBoolean(true);
    /*
    * Thread1: Sleeps for 30ms and then sets i to 1
    */
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                Thread.sleep(30);
                System.out.println("Thread1: flag=" + flag);
                flag.set(false);
            } catch (Exception e) {
                throw new RuntimeException("Thread1 Error");
            }
        }
    }).start();

    /*
    * Thread2: Loops until flag is false and then exits.
    */
    new Thread(new Runnable() {
        @Override
        public void run() {
            long j = 0;
            while (flag.get())
                j++;
            System.out.println("\nThread2: flag=" + flag + ", j=" + j);
        }
    }).start();
} 
```

印刷

```
Thread1: flag=true

Thread2: flag=false, j=39661265 
```

> 我应该默认对所有共享变量使用 Volatile 吗？

几乎从不。如果您仅设置一次，则如果您有一个 since 标志，它将起作用。但是，使用锁定通常更有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:00:31.477

您的具体问题是第二个线程需要在`i`第一个线程设置为 0 后同步内存。因为两个线程都在同步`this`，正如@Peter 和@Marko 所指出的那样是不同的对象。第二个线程有可能在第一个线程集之前进入`while`循环`i = 0`。`while`循环中没有越过额外的内存屏障，因此该字段永远不会更新。

> 如果我在 java 程序中取消注释 Comment1，那么它会一直结束。

这是有效的，因为底层`System.out` `PrintStream`是`synchronized`导致跨越[内存屏障的。](http://en.wikipedia.org/wiki/Memory_barrier)内存屏障强制线程和中央内存之间的同步内存，并确保内存操作的顺序。这是`PrintStream.println(...)`来源：

```
public void println(String x) {
    synchronized (this) {
        print(x);
        newLine();
    }
} 
```

> 如果缓存一致性是在硬件中完成的，那么 'i=0' 应该对其他线程可见，除非编译器优化了代码

您必须记住，每个处理器都有一些寄存器和大量每个处理器的高速缓存。缓存内存是这里的主要问题，而不是编译器优化。

> 任何人都可以看到导致这种行为的 Java 所做的编译器优化（C 编译器没有完成）吗？

缓存内存的使用和内存操作重新排序都是显着的性能优化。处理器可以自由更改操作顺序以改进流水线，并且除非跨越内存屏障，否则它们不会同步其脏页。这意味着线程可以使用本地高速内存异步运行以[显着]提高性能。Java 内存模型允许这样做，并且与 pthreads 相比要复杂得多。

> 我应该默认对所有共享变量使用 volatile 吗？

如果您希望线程#1 更新一个字段并且线程#2 看到该更新，那么是的，您需要将该字段标记为`volatile`. `Atomic*`如果要增加共享变量（`++`是两个操作） ，通常建议使用类，并且是必需的。

如果您正在执行多项操作（例如遍历共享集合），`synchronized`则应使用关键字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:48:42.207

如果线程 2 在线程 1 已经将 i 设置为 0 之后开始运行，则程序将结束。使用`synchronized(this)`可能会在某种程度上促成这一点，因为在同步块的每个入口处都有一个内存屏障，无论获取的锁是什么（你使用不同的锁，所以不会发生争执）。

除此之外，在您的代码被 JITted 和线程 1 写入 0 的那一刻之间可能还有其他复杂的交互，因为这会改变优化级别。优化的代码通常只会从全局变量中读取一次，并将值缓存在寄存器或类似的线程本地位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T20:25:38.977

缓存一致性是硬件级别的功能。操作变量如何映射到 CPU 指令并间接映射到硬件是语言/运行时特性。

换句话说，设置一个变量并不一定会转化为写入该变量内存的 CPU 指令。编译器（离线或 JIT）可以使用其他信息来确定不需要将其写入内存。

话虽如此，大多数支持并发的语言都有额外的语法来告诉编译器您正在使用的数据是用于并发访问的。对于许多人（如 Java）来说，它是可选的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T07:10:11.467

如果预期的行为是线程 2 检测变量的变化并终止，那么肯定需要“Volatile”关键字。它允许thead 能够通过 volatile 变量进行通信。编译器通常会优化从缓存中获取，因为它比从主内存中获取更快。

看看这篇很棒的帖子，它会给你答案：http: [//jeremymanson.blogspot.sg/2008/11/what-volatile-means-in-java.html](http://jeremymanson.blogspot.sg/2008/11/what-volatile-means-in-java.html)

我相信在这种情况下，它与缓存一致性无关。如前所述，它是一种计算机架构特性，对 ac/java 程序应该是透明的。如果未指定 volatile，则行为未定义，这就是为什么有时其他线程可以获得值更改而有时却不能。

volatile 在 C 和 java 上下文中具有不同的含义。 [http://en.wikipedia.org/wiki/Volatile_variable](http://en.wikipedia.org/wiki/Volatile_variable)

根据您的 C 编译器，该程序可能会得到优化并具有与您的 java 程序相同的效果。所以总是推荐使用 volatile 关键字。

# php - 如何更改magento admin url和port，magento running varnish

> ID：13018487
> 
> 赞同：6
> 
> 时间：2012-10-22T19:35:02.727
> 
> 标签：php, zend-framework, magento, e-commerce, mage

我已经在使用 magento 的服务器上安装了清漆。

端口已更改，因此 varnish 现在在端口 80 上运行，magento 在 8080 上运行，

由于 URL 为 www.mystore.com/admin，因此某些功能在后端无法使用

但实际上商店的网址是 www.mystore.com:8080/admin

谁能帮我更改后端端口。

不起作用的功能是打印装箱单，我在前端的 javascript 中更改端口，它可以工作。但是有很多功能，所以我需要的不仅仅是快速修复

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T16:52:00.497

要更改您转到后端的管理员 URL，请转到 `System > Configuration > Admin > Admin Base URL`并将设置更改 `Use Custom Admin URL`为是并填写`Custom Admin URL`URL，包括端口[http://myDomain.com:8080/](http://myDomain.com:8080/)

如果你想要自己的路径，你可以用`Use Custom Admin Path`and做同样的事情`Custom Admin Path`

之后不要忘记在 magento 目录中的 var/cache 上执行 rm -rf 。

正如其他人已经提到的，不要在管理区域使用清漆，也许你想为用户停用报告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T19:46:07.063

您可能需要考虑为管理页面禁用 Varnish。该站点的管理员可能不会产生足够的流量来对数据库做任何严重的事情，他们应该拥有最新的信息。在我们的 Varnish 中，我们告诉 varnish 通过（不要缓存）页面`/admin`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T00:10:07.610

这是我们的 varnish.vcl 的摘录：

```
# Don't cache pages for Magento Admin
# FIXME: change this rule if you use custom url in admin
if (req.url ~ "^/(index.php/)?admin") {
    return(pass);
}

# Don't cache checkout/customer pages, product compare
if (req.url ~ "^/(index.php/)?(checkout|customer|catalog/product_compare|wishlist)") {
    return(pass);
} 
```

它可以作为你的一个例子。

# android - 背景重复图像不起作用

> ID：13018489
> 
> 赞同：0
> 
> 时间：2012-10-22T19:35:10.163
> 
> 标签：android, android-layout

我想创建一个带有重复背景图像的布局。我搜索并找到[了本教程](http://androidforbeginners.blogspot.com/2010/06/how-to-tile-background-image-in-android.html) ，但似乎对我不起作用！下面显示了activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/backrepeat"
android:gravity="center_horizontal"
android:orientation="vertical" >
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/app_name" />

</LinearLayout> 
```

这是 backrepeat.xml

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:dither="true"
android:src="@drawable/bg"
android:tileMode="repeat" /> 
```

还将 backrepeat.xml 放在 drawable 文件夹中。我应该添加或删除一些代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:47:52.827

好的，这就是我的应用程序中的内容。它包括一个 hack 来防止 ListView 在滚动时变黑。

可绘制/app_background.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/actual_pattern_image"
        android:tileMode="repeat" /> 
```

值/样式.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="app_theme" parent="android:Theme">
        <item name="android:windowBackground">@drawable/app_background</item>
        <item name="android:listViewStyle">@style/TransparentListView</item>
        <item name="android:expandableListViewStyle">@style/TransparentExpandableListView</item>
    </style>

 <style name="TransparentListView" parent="@android:style/Widget.ListView">
  <item name="android:cacheColorHint">@android:color/transparent</item>
 </style>

 <style name="TransparentExpandableListView" parent="@android:style/Widget.ExpandableListView">
  <item name="android:cacheColorHint">@android:color/transparent</item>
 </style>

</resources> 
```

AndroidManifest.xml：

```
<application android:theme="@style/app_theme"> 
```

# c# - 获取某个xml节点并保存值

> ID：13018492
> 
> 赞同：2
> 
> 时间：2012-10-22T19:35:18.040
> 
> 标签：c#, xml

考虑以下 XML：

```
<Stations>
 <Station>
  <Code>HT</Code>
  <Type>123</Type>
  <Names>
    <Short>H'bosch</Short>
    <Middle>Den Bosch</Middle>
    <Long>'s-Hertogenbosch</Long>
  </Names>
  <Country>NL</Country>
</Station>
</Stations> 
```

有多个节点。我需要每个节点的值。我从网页（http://webservices.ns.nl/ns-api-stations-v2）获得了 XML

登录 (--) 通过 (--)

目前我将 XML 作为字符串并将其解析为 XDocument。

```
var xml = XDocument.Parse(xmlString);
foreach (var e in xml.Elements("Long"))
{
   var stationName = e.ToString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:42:56.690

您可以使用 XPath 检索“Station”节点，然后使用更多 XPath 获取每个后续​​子节点。此示例未使用 Linq，看起来您可能正在尝试从您的问题中执行此操作，但它是：

```
XmlDocument xml = new XmlDocument();
xml.Load(xmlStream);
XmlNodeList stations = xml.SelectNodes("//Station");

foreach (XmlNode station in stations)
{
    var code = station.SelectSingleNode("Code").InnerXml;
    var type = station.SelectSingleNode("Type").InnerXml;
    var longName = station.SelectSingleNode("Names/Long").InnerXml;
    var blah = "you should get the point by now";
} 
```

**注意：如果您的`xmlStream`变量是 a `String`，而不是 a `Stream`，请使用`xml.LoadXml(xmlStream);`第 2 行，而不是`xml.Load(xmlStream)`. 如果是这种情况，我还鼓励您将变量命名为更准确地描述您正在使用的对象（又名。`xmlString`）。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:39:10.120

这将为您提供每个 Station 元素的所有“Long”值。

```
var xml = XDocument.Parse(xmlStream);
var longStationNames = xml.Elements("Long").Select(e => e.Value); 
```

# jsf - 配置 Web Flow 以与 JSF 一起使用

> ID：13018493
> 
> 赞同：0
> 
> 时间：2012-10-22T19:35:18.613
> 
> 标签：jsf, spring-mvc, spring-webflow

我正在尝试配置 Web Flow 以与 JSF 一起使用。从以下网站

[http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch13s04.html](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch13s04.html)

但我收到以下错误：

```
Description Resource    Path    Location    Type
The prefix "si" for attribute "si:schemaLocation" associated with an element type "beans" is not bound. flowwithjsf.xml /WebFlowWithJSFIntegration/src/main/webapp/WEB-INF/spring   line 12 XML Problem 
```

这是我的 XML，它看起来就像网站：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:webflow="http://www.springframework.org/schema/webflow-config"
    xmlns:faces="http://www.springframework.org/schema/faces"
    si:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/webflow-config
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
        http://www.springframework.org/schema/faces
        http://www.springframework.org/schema/faces/spring-faces-2.2.xsd">

    <!-- Executes flows: the central entry point into the Spring Web Flow system -->
    <webflow:flow-executor id="flowExecutor">
        <webflow:flow-execution-listeners>
            <webflow:listener ref="facesContextListener"/>
        </webflow:flow-execution-listeners>
    </webflow:flow-executor>

    <!-- The registry of executable flow definitions -->
    <webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF">
        <webflow:flow-location-pattern value="**/*-flow.xml" />
    </webflow:flow-registry>

    <!-- Configures the Spring Web Flow JSF integration -->
    <faces:flow-builder-services id="flowBuilderServices" />

    <!-- A listener maintain one FacesContext instance per Web Flow request. -->
    <bean id="facesContextListener" 
        class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener" />  

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:55:27.557

尝试更改我认为这就是您遇到此错误的`si:schemaLocation="...`原因`xsi:schemaLocation="...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T07:48:57.183

“要使用此模式，请将其包含在您的基础设施层 bean 文件之一中”10.2 [Spring 文档](http://docs.spring.io/spring-webflow/docs/2.4.0.BUILD-SNAPSHOT/reference/pdf/webflow-reference.pdf)

# domain-driven-design - CQRS 中的非域模型更新

> ID：13018502
> 
> 赞同：0
> 
> 时间：2012-10-22T19:36:06.440
> 
> 标签：domain-driven-design, cqrs

为了理解 CQRS，我创建了一个具有命令执行器和事件源的小型应用程序。据我了解，域模型的变化是通过命令触发的。然后域模型生成事件以使用非规范化器更新读取模型。

但在许多情况下，可能会有一些对域来说并不重要的更新。就像用户更改自己的个人资料图片一样。对于这样的需求，最好的实现方式是什么？

我相信使用命令将是矫枉过正，因为这样的域模型不会改变。

我试图搜索这个问题，但没有找到答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:24:08.440

不要混合 CQRS 和 CRUD。有界上下文要么适合 CQRS，要么不适合。你的宠物项目可能不是。但是一旦你决定应用 CQRS 架构风格，你就应该坚持下去。

命令是微不足道的。而且由于您已经在使用事件溯源（顺便说一句，这不是 CQRS 的先决条件。）您不应该在单个用例中绕过它。一旦你有多种理念，事情很快就会变得非常混乱。

就直接写入读取模型而言：如果您的读取模型不同步、损坏或必须修改并且您必须重建它怎么办？如果没有相关事件，Read Model 怎么知道当时发生了什么事？

如果没有域行为，您可以绕过一件事：您可以在命令处理程序中使用事务脚本 ( [POAA](http://martinfowler.com/eaaCatalog/transactionScript.html) ) 并从那里发布事件而不调用域。

长话短说：您可以在应用程序的多个隔离部分中愉快地混合样式（即，一个 BC 中的 CQRS，另一个中的 CRUD）但在单个 BC 中您应该保持一致。

# ajax - 原型 AJAX 更新程序多个请求

> ID：13018507
> 
> 赞同：1
> 
> 时间：2012-10-22T19:36:24.133
> 
> 标签：ajax, prototypejs

我刚刚开始学习 AJAX，并且正在尝试构建一个从数据库中提取信息的级联下拉列表。我的 AJAX.Updater 代码有效，但不仅适用于其中一个下拉菜单。如何进行多个 AJAX.Updater 调用？

```
<script type="text/javascript" src="jQuery/jquery-latest.js"></script>
<script type="text/javascript" src="jQuery/prototypejs.js"></script>
<script language="javascript">
jQuery(document).ready(function()
{
  jQuery('#regiondropdown').change(function() {
  dropdowns(jQuery(this).val(),"foo");
  });

  jQuery('#foodropdown').change(function() {
  dropdowns(jQuery(this).val(),"bar");
  });

}
);

function dropdowns(str,type)
  {
      if (type=="foo") {
        new Ajax.Updater('foo', 'foo_dropdown.php', { method: 'get', parameters: {foo: str} });
      } else if (type=="bar") {
        new Ajax.Updater('bar', 'bar_dropdown.php', { method: 'get', parameters: {bar: str} });
      }
  }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:56:23.150

我看不出它是什么，所以我建议你启动你的调试器。
1) 检查两种情况下 jQuery(this).val() 的值。“this”可能不是您在 Javascript 中所相信的。
2) 检查如果您在下拉菜单中切换 if.. 和 else... 会发生什么。也许有一个 (, { 或 ; 不合适。

高温高压

# wix - 如何在 WIX Bundle 中使用 CustomAction？

> ID：13018511
> 
> 赞同：11
> 
> 时间：2012-10-22T19:36:29.327
> 
> 标签：wix, wix3.6, burn

给你一个背景 - 我有一个来自我们供应商的 4 个 MSI，这必须发送到我们公司的服务器（我们正在查看大约 3500 个服务器）。截至目前，我的同行正在使用 vbs、ps1 脚本来管理它。但是脚本的问题在于，每次更新到来时，我们都必须担心在运行新包之前卸载现有包和大量的硬编码。

我想通过设置一个 WIX 脚本将所有 4 个 MSI 打包在一起来自动化整个过程（使用非常少的硬编码）。我阅读了 WIX 捆绑包并使用它来创建单个 MSI。但是现在有很多变量要传递给 4 个 MSI，所以我想使用自定义操作根据运行 MSI 的环境/机器来设置这些变量。但我不能让自定义动作起作用？我错过了什么吗？

谷歌搜索了一下，我看到 Bundle 中没有 CustomActions 之类的东西？有人可以确认吗？

另外，如果没有 CA，我有什么选择？如何操纵要传递给 4 MSI 的变量？其中大多数需要根据正在运行的机器进行设置（如安装路径、用户 ID、应用程序池 ID 等）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-12-05T22:28:03.827

还有第四个选项，一个有用的轻量级 hack，由 Vijay Kotecha 确定（参见[http://vijayskotecha.blogspot.com/2013/07/wix-bootstrapper-custom-action.html](http://vijayskotecha.blogspot.com/2013/07/wix-bootstrapper-custom-action.html)），...

本质上，`<ExePackage>`围绕传递的 .bat 或 .cmd 批处理文件构建一个。批处理/命令文件包含单行“ `%*`”，它将所有命令行参数作为第一类命令重新执行。

因此：

```
<ExePackage ... SourceFile="SourcePath\WixCustomAction.cmd"
    InstallCommand="my_custom_action.exe my_custom_parameters" />
<ExePackage ... SourceFile="SourcePath\WixCustomAction.cmd"
    InstallCommand="my_next_action.exe my_next_parameters" /> 
```

`WixCustomAction.cmd`仅包含“”的文件在哪里`%*`。

这些可以根据需要使用不同的 s 依次`<ExePackages>`放入。`<Bundle><Chain>``InstallCommand`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T15:55:54.177

在我看来，您有三个选择：

1.  根据您需要的信息，您可以使用 WixUtilExtension 执行简单的任务，例如读取注册表项和执行文件搜索，然后您可以将结果作为属性传递给您的安装包。

2.  在各个安装包本身（而不是捆绑包中）中实施自定义操作。

3.  编写您自己的自定义引导程序应用程序以确定您需要设置的所有属性，然后将它们传递给您的安装包。这比 #1 和 #2 更复杂，但如果您感兴趣，以下链接应该可以帮助您入门： [介绍托管引导程序应用程序](http://blogs.msdn.com/b/heaths/archive/2011/10/28/introducing-managed-bootstrapper-applications.aspx)并 [编写 wpf wix 安装程序](https://stackoverflow.com/questions/9570134/write-a-wpf-wix-installer/9572763#9572763)

# ruby-on-rails - Rails number_to_phone：从电话号码中删除国家代码

> ID：13018512
> 
> 赞同：2
> 
> 时间：2012-10-22T19:36:53.917
> 
> 标签：ruby-on-rails, ruby

我有一个将电话号码存储为`'+11231231234'`. 为了方便用户，我将其转换为：`+1(123) 123-1234`在视图中。我使用`number_to_phone`rails中的助手来做到这一点：

```
<%= number_to_phone(call.From, :area_code => true) %> 
```

我也想`+1`从视图中删除。如果前两个字符是，我需要写什么来删除电话号码的前两个字符`+1`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T19:41:11.077

```
number_to_phone(call.From, :area_code => true).gsub(/^\+\d/, '') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:54:13.143

另一种方式：

```
number_to_phone(call.From, :area_code => true)[2..-1] 
```

当然，这仅在您总是想删除前两个字符时才有效，但在 cpu 上更容易:)

# css - 图片不会进入div

> ID：13018521
> 
> 赞同：0
> 
> 时间：2012-10-22T19:37:37.790
> 
> 标签：css, html

我制作了一个带有文本 div 和一个浮动到右侧的图像 div 的包装器 div。一个简单的任务，是的，但今晚似乎不适合我。我无法让它工作并卡住了。

这是它现在的样子：http: [//bit.ly/RNinCm](http://bit.ly/RNinCm)

CSS：

```
introwrapper {
    width: 938px;
    background-color: white;
    margin-bottom: -20px;
    padding-left: 5px;
}

.introtekst {
    font-size: 30px;
    text-transform: uppercase;
    font-family: Arial, Verdana, sans-serif;
    color: #a81c11;
}

.gammeltbilde {
    float: left;
} 
```

HTML：

```
<div id="introwrapper">
        <div class="introtekst">
            <p>Some text here.</p>
        </div>
        <div class="gammeltbilde">
            <img src="bilder/kjiptbilde.jpg" alt="bilde fra parken"/>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:44:45.667

像这样更改您的CSS：

```
.introtekst {
    font-size: 30px;
    text-transform: uppercase;
    font-family: Arial, Verdana, sans-serif;
    color: #a81c11;
    display:inline;
    width: 80%; /* or dependent on what you like */
    float: left;
} 

.gammeltbilde {
    float: right;
    display:inline;
    width: 20%; /* relative to width for introtekst */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:40:06.460

图片比容器大，尝试在图片上设置尺寸：

```
<img src="bilder/kjiptbilde.jpg" alt="bilde fra parken" width="800" /> 
```

（800 使其适合，但您可能需要根据需要进行更改。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:45:09.213

您可以`width="800px"`在 img 上放置一个标签，但我建议尽可能远离它，并在 Photoshop 或其他类似程序中实际缩小图像的大小。如果您的页面包含大量使用标签缩小的图像，`width`您的页面加载时间可能会变得非常长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:52:54.853

你可以删除`<img src="bilder/kjiptbilde.jpg" alt="bilde fra parken">`

# php - PHP - 填写表格 i$ 后尝试在 SQL 代码中为多个玩家执行循环

> ID：13018525
> 
> 赞同：0
> 
> 时间：2012-10-22T19:37:52.133
> 
> 标签：php, mysql, sql, loops

填写表格 i$ 后，尝试在 SQL 代码中为多个玩家执行循环。

网上好像找不到答案。感谢您为我提供的任何帮助。

```
<?php
$con = mysql_connect("localhost","username","password");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}    
mysql_select_db("mbbcom1_rfhl", $con);

for ($i=1; $i<=6; $i++)
{       
    $sql="UPDATE `mbbcom1_rfhl`.`_statbu`
        SET gp= gp + '$_POST[gp$i]', g= g + '$_POST[g$i]', a= a + '$_POST[a$i]', shot=    shot + '$_POST[s$i]', pm= pm + '$_POST[pm$i]', ppg= ppg + '$_POST[ppg$i]', shg= shg + '$_POST[shg$i]', bs= bs + '$_POST[blk$i]', gwg= gwg + '$_POST[gwg$i]', sog= sog + '$_POST[sog$i]', soa= soa + '$_POST[soa$i]', pim= pim + '$_POST[pim$i]' WHERE `season` =9 AND `_statbu`.`player_id` = $i ORDER BY `_statbu`.`player_id` ASC";
}

if (!mysql_query($sql,$con))
{
    die('Error: ' . mysql_error());
}
mysql_close($con)
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:42:26.630

考虑到您实际上并没有提到问题所在，我将假设您的数据库实际上也没有按照您想要的方式进行更新。我认为这是因为在你的 for 循环中你实际上并没有执行你的 sql 语句。如果您仔细观察，您所做的就是生成 sql 字符串。您需要将以下语句放在您的 for 循环中，而不是像现在这样放在它之外。

```
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:42:09.987

当您在代码中添加一些不错的缩进时，很明显您是在 for 循环之外运行查询，因此它只能运行最后一次更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:43:12.197

您的更新查询是错误的，它不能有一个订单。您需要在循环内执行查询：

```
for ($i=1; $i<=6; $i++)
{       
    $sql = "UPDATE `mbbcom1_rfhl`.`_statbu`
    SET gp= gp + '$_POST[gp$i]', g= g + '$_POST[g$i]', a= a + '$_POST[a$i]', shot= shot + '$_POST[s$i]', pm= pm + '$_POST[pm$i]', ppg= ppg + '$_POST[ppg$i]', shg= shg + '$_POST[shg$i]', bs= bs + '$_POST[blk$i]', gwg= gwg + '$_POST[gwg$i]', sog= sog + '$_POST[sog$i]', soa= soa + '$_POST[soa$i]', pim= pim + '$_POST[pim$i]' 
    WHERE `season` =9 AND `_statbu`.`player_id` = $i"; 
    // ORDER BY `_statbu`.`player_id` ASC";

  if (!mysql_query($sql,$con))
  {
      die('Error: ' . mysql_error());
  }
} 
```

此外：

*   您的代码对 SQL 注入开放
*   您正在使用已弃用的 mysql_* 函数

# maven - Maven 部署问题

> ID：13018528
> 
> 赞同：1
> 
> 时间：2012-10-22T19:38:09.080
> 
> 标签：maven, maven-3

我有一个使用原型站点构建的 Maven 项目。

我保留了默认目录结构并为我的文件添加了一个目录，所以我当前的结构是这样的：

```
MyProject
     -> src
     -> pages
     -> target
     -> pom.xml 
```

pages 目录是我添加的目录，其中包含各种 HTML/CSS/JS 文件。

我在 pom.xml 上定义了一个远程存储库，并将凭据添加到 maven 的 settings.xml 文件中的相关部分。

我在尝试部署时遇到以下错误，我不明白。谷歌搜索也没有帮助。

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project MyProject: Failed to deploy artifacts: Could not find artifact MyProject:MyProject:jar:1.0-20121022.153807-1 in MyProject (https://bitbucket.org/MyApp/MyProject) -> [Help 1] 
```

# selenium - 在 webdriver 中找到两个元素中的任何一个

> ID：13018530
> 
> 赞同：18
> 
> 时间：2012-10-22T19:38:10.620
> 
> 标签：selenium, webdriver, selenium-webdriver

在我的应用程序中，当我打开页面 XI 时，希望看到元素 A 或元素 B。它们位于 DOM 中的不同位置，可以使用它们的 id 找到，例如`driver.findElement(By.id("idA"))`

如何让 webdriver 找到 A 或 B？

`driver.findElements(By)`当找到至少一个元素时，有一种方法会停止等待，但是这种方法迫使我对 A 和 B 使用相同的定位器。

可靠地找到 A 或 B 的正确方法是什么，这样我就不必等待隐式超时？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T10:18:58.273

id 为 I1 的元素或 id 为 I2 的元素

路径：`//E1[@id=I1] | //E2[@id=I2]`

CSS：`css=E1#I1,E2#I2`

```
driver.findElement(By.xpath(//E1[@id=I1] | //E2[@id=I2]))
driver.findElement(By.cssSelector(E1#I1,E2#I2)) 
```

不要忘记fluentWait机制：

```
public WebElement fluentWait(final By locator){

        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(org.openqa.selenium.NoSuchElementException.class);

        WebElement foo = wait.until(
                new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                    }
                }
        );
        return  foo;
}; 
```

[您可以在此处](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)获取有关 fluentWait 的更多信息

恕我直言，您的问题的解决方案如下：

```
fluentWait(By.xpath(//E1[@id=I1] | //E2[@id=I2]));
fluentWait(By.cssSelector(E1#I1,E2#I2)) 
```

仅供参考：[这](http://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/)是不错的 xpath，cssSelector 手册

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T08:08:02.967

我为此写了一个 ExpectedCondition 可以随意使用它。

```
public static ExpectedCondition<By> titleIs(final By[] selectors) {
    return new ExpectedCondition<By>() {
        public By apply(WebDriver driver) {
            WebElement el=null;
            for (By selector:selectors) {
                try {
                    el = driver.findElement(selector);
                } catch (NoSuchElementException ex) {
                    // ignore as we are waiting for that to stop
                }
                if (el!=null) return selector; 
            }
            return null;
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T14:54:35.653

这是我的解决方案，它像其他人建议的那样使用流利的等待。您需要用驱动程序对象或您自己的获取它的方法替换对 getDriver() 的任何调用或对驱动程序的引用。

```
/**
 * Waits for any one of a given set of WebElements to become displayed and
 * enabled.
 * 
 * @param locators
 *            An array of locators to be sought.
 * @param timeout
 *            Timeout in seconds.
 */
protected void waitForOneOfManyToBePresent(By[] locators, int timeout) {
    try {
        (new WebDriverWait(getDriver(), timeout))
            .until(somethingIsPresent(locators));
    } catch (TimeoutException timeoutEx) {
        // Do what you wish here to handle the TimeoutException, or remove
        // the try/catch and let the TimeoutException fly. I prefer to
        // rethrow a more descriptive Exception
    }
}

/**
 * Condition for presence of at least one of many elements.
 * 
 * @param locators
 *            An array of By locators to be sought.
 * @return Boolean T if at least one element is present, F otherwise.
 */
protected ExpectedCondition<Boolean> somethingIsPresent(By[] locators) {
    final By[] finalLocators = locators;
    return new ExpectedCondition<Boolean>() {
        public Boolean apply(WebDriver driver) {
            boolean found = false;
            for (By locator : finalLocators) {
                if (isElementPresent(locator)) {
                    found = true;
                    break;
                }
            }
            return new Boolean(found);
        }
    };
}

/**
 * Similar to does element exist, but also verifies that only one such
 * element exists and that it is displayed and enabled.
 * 
 * @param by
 *            By statement locating the element.
 * @return T if one and only one element matching the locator is found, and
 *         if it is displayed and enabled, F otherwise.
 */
protected boolean isElementPresent(By by) {
    // Temporarily set the implicit timeout to zero
    driver.manage().timeouts().implicitlyWait(0, TimeUnit.MILLISECONDS);
    // Check to see if there are any elements in the found list
    List<WebElement> elements = driver.findElements(by);
    boolean isPresent = (elements.size() == 1)
            && elements.get(0).isDisplayed() && elements.get(0).isEnabled();
    // Return to the original implicit timeout value
    driver.manage().timeouts()
                .implicitlyWait(Properties.TIMEOUT_TEST, TimeUnit.SECONDS);
    // Properties.TIMEOUT_TEST is from other personal code, replace with your 
    // own default timeout setting.
    return isPresent;
} 
```

我的版本还检查以确保找到的任何元素都是单一的、可见的和启用的，但如果您只想检查是否存在或者您不关心您的定位器是否找到多个匹配元素，则可以轻松删除它。通过抑制默认超时然后调用 findElements() 来检查元素的存在可能看起来很笨拙，但这显然是 Selenium API 中推荐的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-28T23:22:11.943

我也遇到了这个问题，所以我为它做了一个方法。请注意，该方法位于一个包含 webdriver 作为“self._driver”的类中。代码在 Python 中。

调用方法的一个例子是：

self.MES(3, ('name', 'name_of_element1'), ('id', 'id_of_element2'))

```
from selenium.common.exceptions import NoSuchElementException
import time

def MES(self, wait_time, element1, element2):
    '''
    A function to check a website for multiple elements at the same time
    MultiElementSearch. Returns the element if found, or False if neither
    are found.
    It will also throw a ValueError is the element locator type is not
    valid.

    MES(int, (str, str), (str, str)) -> Element or bool
    '''
    time1 = time.time()
    while time.time() < (time1 + wait_time):
        try:
            if element1[0] == 'id':
                selection1 = self._driver.find_element_by_id(element1[1])
            elif element1[0] == 'name':
                selection1 = self._driver.find_element_by_name(element1[1])
            elif element1[0] == 'xpath':
                selection1 = self._driver.find_element_by_xpath(element1[1])
            elif element1[0] == 'link_text':
                selection1 = self._driver.find_element_by_link_text(element1[1])
            elif element1[0] == 'partial_link_text':
                selection1 = self._driver.find_element_by_partial_link_text(
                    element1[1])
            elif element1[0] == 'tag_name':
                selection1 = self._driver.find_element_by_tag_name(element1[1])
            elif element1[0] == 'class_name':
                selection1 = self._driver.find_element_by_class_name(
                    element1[1])
            elif element1[0] == 'css_selector':
                selection1 = self._driver.find_element_by_css_selector(
                    element1[1])
            else:
                raise ValueError(
                    'The first element locator type is not vaild')
            return selection1

        except NoSuchElementException:
            pass

        try:
            if element2[0] == 'id':
                selection2 = self._driver.find_element_by_id(element2[1])
            elif element2[0] == 'name':
                selection2 = self._driver.find_element_by_name(element2[1])
            elif element2[0] == 'xpath':
                selection2 = self._driver.find_element_by_xpath(element2[1])
            elif element2[0] == 'link_text':
                selection2 = self._driver.find_element_by_link_text(element2[1])
            elif element2[0] == 'partial_link_text':
                selection2 = self._driver.find_element_by_partial_link_text(
                    element2[1])
            elif element2[0] == 'tag_name':
                selection2 = self._driver.find_element_by_tag_name(element2[1])
            elif element2[0] == 'class_name':
                selection2 = self._driver.find_element_by_class_name(
                    element2[1])
            elif element2[0] == 'css_selector':
                selection2 = self._driver.find_element_by_css_selector(
                    element2[1])
            else:
                raise ValueError(
                    'The second element locator type is not vaild')
            return selection2
        except NoSuchElementException:
            pass
    return False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T09:51:35.100

@pavel_kazlou，关于你关于 FluentWait 的问题：基本上有两种等待： **显式等待**

```
WebDriverWait.until(condition-that-finds-the-element) 
```

**隐式等待**

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

区别是

*   明显 - 隐式等待时间适用于脚本中的所有元素，但仅适用于特定元素
*   在显式中，您可以配置检查条件的频率（而不是 500 毫秒）。
*   在 Explicit 中，您还可以配置为在超时之前忽略除“NoSuchElement”之外的其他异常。使用与 WebDriverWait 类似的 FluentWait（实际上扩展了 FluentWait），但为您提供了更多的灵活性。

这是 WebDriverWait 使用示例（使用不同的 WebDriverWait 构造函数来指定元素轮询间隔（以毫秒为单位）。）：

```
new WebDriverWait(webDriver(), 10, 50).until(ExpectedConditions.elementToBeClickable(By.xpath(menuItemXpath))); 
```

使用与 WebDriverWait 类似的 FluentWait（实际上扩展了 FluentWait），但为您提供了更多的灵活性：特别是选择要忽略的 WebDriver 异常的能力。用法示例：

```
new FluentWait(webDriver())
.withTimeout(timeout, TimeUnit.SECONDS)
.pollingEvery(50, TimeUnit.MILLISECONDS)
.ignoring(NoSuchElementException.class)
.until(ExpectedConditions.elementToBeClickable(By.xpath(menuItemXpath))); 
```

总结一下我的说明：fluentWait 是一种显式等待类型，您可以显式选择要忽略的 WebDriver 异常类型，因为任何隐式等待都包括等待任何 webElement 的固定时间。从这个角度来看，恕我直言 fluentWait 方法更加稳健。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-18T23:31:31.553

**对于任何希望在 Python 中执行此操作的人**

这是一个对我有用的非常简单的方法，首先我使用该`implicitly_wait`方法，以便驱动程序自动等待给定的时间，直到它可以找到元素：

`driver.implicitly_wait(30) #driver constantly tests for 30 seconds before complaining`

现在，如果我想找到两个不同元素之一（或以不同方式找到相同元素），我只需执行以下操作：

```
#We see if either is present, we only need one for the if statement to be true
if driver.find_element_by_class_name('dir') or driver.find_element_by_class_name('dirSel'):

    #Set wait time to 0 so we can try both fast (since we know one was found but not which)
    driver.implicitly_wait(0) 

    try:
        ele = driver.find_element_by_class_name('dir')
    except: 
        ele = driver.find_element_by_class_name('dirSel')

    driver.implicitly_wait(30) #reset the driver's wait time. 
```

这可以很容易地转换为一个函数并缩放以搜索两个以上的元素，只是想避免这种情况，因为原始帖子在 Java 中寻求帮助。尽管如此，selenium 命令在各种语言中都是非常统一的，所以我帮助这可以帮助那些不使用 python 工作的人:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-14T23:30:30.910

这是一个`Java 8`解决方案。

包装对象：

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.Wait;
import org.openqa.selenium.support.ui.WebDriverWait;

public class SelectorWebElement
{
    private WebElement webElement;
    private By by;

    private SelectorWebElement(WebElement webElement, By by)
    {
        this.webElement = webElement;
        this.by = by;
    }

    public By getBy()
    {
        return by;
    }

    public WebElement getWebElement()
    {
        return webElement;
    }

    private static ExpectedCondition<SelectorWebElement> findFirstElement(By... selectors)
    {
        return driver ->
        {
            for (By selector : selectors)
            {
                try
                {
                    assert driver != null;
                    WebElement webElement = driver.findElement(selector);
                    if (webElement.isDisplayed())
                    {
                        return new SelectorWebElement(webElement, selector);
                    }
                } catch (Exception ignored)
                {

                }
            }

            return null;
        };
    }

    public static SelectorWebElement waitForFirstElement(WebDriver driver,
                                                         long timeout,
                                                         By... selectors)
    {
        Wait wait = new WebDriverWait(driver, timeout);
        return (SelectorWebElement) wait.until(findFirstElement(selectors));
    }
} 
```

示例代码：

```
By badPasswordSelector = By.cssSelector("...");
By myAccountPage = By.cssSelector("...");
SelectorWebElement selectorWebElement = SelectorWebElement.waitForFirstElement(driver, 5, badPasswordSelector, myAccountPage);

By matchedSelector = selectorWebElement.getBy();

if (matchedSelector.equals(badPasswordSelector))
{
    System.out.println("Bad password");
} else if (matchedSelector.equals(myAccountPage))
{
    System.out.println("Successfully logged in");
} 
```

# wcf - 如何检查是否存在在 WCF 中将 isRequired 设置为 true 的字段

> ID：13018535
> 
> 赞同：1
> 
> 时间：2012-10-22T19:38:21.763
> 
> 标签：wcf, datamember

我有一个 DataMember(isRequired:=True)，该属性称为 FillerInd。现在您如何判断该字段是否为空或不存在？我在网上阅读，如果需要的字段丢失，则必须对 XML 进行一些序列化和反序列化，否则会抛出异常 MissingMethodException。我不知道如何实现这一点，或者这是否是最佳途径。任何能让我走上正确道路的帮助，我都会非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:37:32.167

DataMember 属性`IsRequired`告诉您该属性是否*在线路上是必需的*：它是否应该出现在消息中。这会导致异常的典型情况是当服务通过添加属性来更新 DataContract 时`IsRequired = true`，而不通知客户端。客户端将发送不包含该属性的序列化对象，从而引发异常。

使用基本类型的属性重现此问题的一种不太常见但简单的方法是将[EmitDefaultValue](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.emitdefaultvalue.aspx)属性显式设置为 false。如果您这样做，然后尝试使用该 DataContract 的对象调用操作，则可能会引发异常。考虑这个例子：

```
// Data Contract
[DataContract]
public class Animal
{
    [DataMember(IsRequired = true, EmitDefaultValue = false)]
    public string Name;
}

// IService
[OperationContract]
int GetIdentifier(Animal animal);

// Client operation
int id = client.GetIdentifier(new Animal()); // Causes exception 
```

这将导致[SerializationException](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.serializationexception.aspx)（进而导致 CommunicationException）并带有以下消息：

> 类型中的成员名称 ....Animal 无法序列化。此异常通常是由于在不允许使用空值的情况下尝试使用空值引起的。'Name' 成员设置为其默认值（通常为 null 或零）。成员的 EmitDefault 设置为“false”，表示该成员不应被序列化。但是，该成员的 IsRequired 设置为 'true'，表示必须对其进行序列化。此冲突无法解决。考虑将“名称”设置为非默认值。或者，您可以将 DataMemberAttribute 特性上的 EmitDefaultValue 属性更改为 true，或将 IsRequired 属性更改为 false。

请注意，如果您绕过此问题客户端（例如，通过为生成的服务引用编辑reference.cs，以便客户端不再需要DataMember），则服务将在反序列化时遇到异常，这将导致错，我相信。

* * *

谈到你的具体评论和问题。

您无需执行任何操作来判断该字段是否为空：WCF 框架会为您处理。如果需要，我想您可以挂钩（反）序列化以了解此问题，甚至在处理消息之前检查消息。

正如我所说，这种情况会导致 SerializationExceptions 和 CommunicationExceptions，而不是[MissingMethodException](http://msdn.microsoft.com/en-us/library/system.missingmethodexception.aspx)。

我不知道您是否需要“IsRequired”以及它是否是“最佳途径”。当然，这取决于您的情况。

# mysql - 将可变数量的参数传递给sql查询

> ID：13018538
> 
> 赞同：0
> 
> 时间：2012-10-22T19:38:41.137
> 
> 标签：mysql, sql

我想将可变编号参数传递给 sql 查询。举个例子：

```
select column1  
from Table    
where column2 in ( '0080','0010')    
group by column1    
having count(distinct column2) >= 2 
```

在 where 子句中，使用了 2 个参数`0080`和`0010`。但是这个参数的数量可能会根据用户的输入而有所不同。例如，它可能是这样的：

```
select column1  
from Table    
where column2 in ( '0080','0010', '0020', '0050', '0060')    
group by column1    
having count(distinct column2) >= 5 
```

因此，这个参数数量不是固定的，它将由用户从*`.xml`*文件中传递。

我们如何将可变数量的参数传递给查询？由于参数的数量不固定，并且可以不时更改，我们可以使用数组或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:46:48.517

我建议您尝试将参数加载到临时表中，并在子查询的 where 子句中使用它。特别是如果您的参数列表变得非常大，这将更具可扩展性。

# api - YouTube 上传 API 端点

> ID：13018539
> 
> 赞同：1
> 
> 时间：2012-10-22T19:38:45.593
> 
> 标签：api, video, upload, youtube, endpoint

一段时间以来，我一直在寻找 YouTube API，但我有点新手。

无论如何，是否可以为推特机器人提供一个端点，允许将视频上传到我的 youtube 帐户？这只是一段时间的想法。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-05-06T14:31:04.903

YouTube 贬低了使用其 API 的 V2 上传的能力

# android - 适用于 Android/Java 的“Time since/Ago”库

> ID：13018550
> 
> 赞同：56
> 
> 时间：2012-10-22T19:39:38.050
> 
> 标签：android

有什么建议可以为 Android/Java 提供一个好的库来显示时间吗？

（例如 10 分钟前、5 天前）

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-22T19:45:33.353

来自 Google I/O 2012 应用程序：

```
/*
 * Copyright 2012 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

private static final int SECOND_MILLIS = 1000;
private static final int MINUTE_MILLIS = 60 * SECOND_MILLIS;
private static final int HOUR_MILLIS = 60 * MINUTE_MILLIS;
private static final int DAY_MILLIS = 24 * HOUR_MILLIS;

public static String getTimeAgo(long time, Context ctx) {
    if (time < 1000000000000L) {
        // if timestamp given in seconds, convert to millis
        time *= 1000;
    }

    long now = getCurrentTime(ctx);
    if (time > now || time <= 0) {
        return null;
    }

    // TODO: localize
    final long diff = now - time;
    if (diff < MINUTE_MILLIS) {
        return "just now";
    } else if (diff < 2 * MINUTE_MILLIS) {
        return "a minute ago";
    } else if (diff < 50 * MINUTE_MILLIS) {
        return diff / MINUTE_MILLIS + " minutes ago";
    } else if (diff < 90 * MINUTE_MILLIS) {
        return "an hour ago";
    } else if (diff < 24 * HOUR_MILLIS) {
        return diff / HOUR_MILLIS + " hours ago";
    } else if (diff < 48 * HOUR_MILLIS) {
        return "yesterday";
    } else {
        return diff / DAY_MILLIS + " days ago";
    }
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-10-22T19:43:17.050

查看[DateUtils.getRelativeTimeSpanString()](http://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString%28android.content.Context,%20long,%20boolean%29)，它从 API 级别 3 开始就存在了。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-02-11T08:15:29.687

来自 jquery timeago 插件

这为您提供了比上述答案更多的选项和格式。

```
public static Date currentDate() {
    Calendar calendar = Calendar.getInstance();
    return calendar.getTime();
}

public static String getTimeAgo(Date date, Context ctx) {

    if(date == null) {
        return null;
    }

    long time = date.getTime();

    Date curDate = currentDate();
    long now = curDate.getTime();
    if (time > now || time <= 0) {
        return null;
    }

    int dim = getTimeDistanceInMinutes(time);

    String timeAgo = null;

    if (dim == 0) {
        timeAgo = ctx.getResources().getString(R.string.date_util_term_less) + " " +  ctx.getResources().getString(R.string.date_util_term_a) + " " + ctx.getResources().getString(R.string.date_util_unit_minute);
    } else if (dim == 1) {
        return "1 " + ctx.getResources().getString(R.string.date_util_unit_minute);
    } else if (dim >= 2 && dim <= 44) {
        timeAgo = dim + " " + ctx.getResources().getString(R.string.date_util_unit_minutes);
    } else if (dim >= 45 && dim <= 89) {
        timeAgo = ctx.getResources().getString(R.string.date_util_prefix_about) + " "+ctx.getResources().getString(R.string.date_util_term_an)+ " " + ctx.getResources().getString(R.string.date_util_unit_hour);
    } else if (dim >= 90 && dim <= 1439) {
        timeAgo = ctx.getResources().getString(R.string.date_util_prefix_about) + " " + (Math.round(dim / 60)) + " " + ctx.getResources().getString(R.string.date_util_unit_hours);
    } else if (dim >= 1440 && dim <= 2519) {
        timeAgo = "1 " + ctx.getResources().getString(R.string.date_util_unit_day);
    } else if (dim >= 2520 && dim <= 43199) {
        timeAgo = (Math.round(dim / 1440)) + " " + ctx.getResources().getString(R.string.date_util_unit_days);
    } else if (dim >= 43200 && dim <= 86399) {
        timeAgo = ctx.getResources().getString(R.string.date_util_prefix_about) + " "+ctx.getResources().getString(R.string.date_util_term_a)+ " " + ctx.getResources().getString(R.string.date_util_unit_month);
    } else if (dim >= 86400 && dim <= 525599) {
        timeAgo = (Math.round(dim / 43200)) + " " + ctx.getResources().getString(R.string.date_util_unit_months);
    } else if (dim >= 525600 && dim <= 655199) {
        timeAgo = ctx.getResources().getString(R.string.date_util_prefix_about) + " "+ctx.getResources().getString(R.string.date_util_term_a)+ " " + ctx.getResources().getString(R.string.date_util_unit_year);
    } else if (dim >= 655200 && dim <= 914399) {
        timeAgo = ctx.getResources().getString(R.string.date_util_prefix_over) + " "+ctx.getResources().getString(R.string.date_util_term_a)+ " " + ctx.getResources().getString(R.string.date_util_unit_year);
    } else if (dim >= 914400 && dim <= 1051199) {
        timeAgo = ctx.getResources().getString(R.string.date_util_prefix_almost) + " 2 " + ctx.getResources().getString(R.string.date_util_unit_years);
    } else {
        timeAgo = ctx.getResources().getString(R.string.date_util_prefix_about) + " " + (Math.round(dim / 525600)) + " " + ctx.getResources().getString(R.string.date_util_unit_years);
    }

    return timeAgo + " " + ctx.getResources().getString(R.string.date_util_suffix);
}

private static int getTimeDistanceInMinutes(long time) {
      long timeDistance = currentDate().getTime() - time;
      return Math.round((Math.abs(timeDistance) / 1000) / 60);
} 
```

在您的 string.xml 文件中添加以下字符串

```
<!-- Date Util -->
<string name="date_util_term_less">less than</string>
<string name="date_util_term_a">a</string>
<string name="date_util_term_an">an</string>

<string name="date_util_unit_second">second</string>
<string name="date_util_unit_seconds">seconds</string>
<string name="date_util_unit_minute">minute</string>
<string name="date_util_unit_minutes">minutes</string>
<string name="date_util_unit_hour">hour</string>
<string name="date_util_unit_hours">hours</string>
<string name="date_util_unit_day">day</string>
<string name="date_util_unit_days">days</string>
<string name="date_util_unit_month">month</string>
<string name="date_util_unit_months">months</string>
<string name="date_util_unit_year">year</string>
<string name="date_util_unit_years">years</string>

<string name="date_util_prefix_lt">less than a</string>
<string name="date_util_prefix_about">about</string>
<string name="date_util_prefix_over">over</string>
<string name="date_util_prefix_almost">almost</string>

<string name="date_util_suffix">ago</string> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-22T19:43:02.063

您可以将内置的[DateUtils](http://developer.android.com/reference/android/text/format/DateUtils.html)类与`getRelative...()`方法一起使用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-16T17:24:33.883

您还可以使用像 libray PrettyTime 这样的 moment.js，它还为您提供翻译的内容。[http://www.ocpsoft.org/prettytime/](http://www.ocpsoft.org/prettytime/)

简单的例子：

```
PrettyTime p = new PrettyTime();
System.out.println(p.format(new Date()));
//prints: “moments from now”

System.out.println(p.format(new Date(System.currentTimeMillis() + 1000*60*10)));
//prints: “10 minutes from now” 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-03T11:07:25.597

如果您需要“n 周前”和@kaderud 的答案，试试这个。

```
/*
 * Copyright 2012 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

private static final int SECOND_MILLIS = 1000;
private static final int MINUTE_MILLIS = 60 * SECOND_MILLIS;
private static final int HOUR_MILLIS = 60 * MINUTE_MILLIS;
private static final int DAY_MILLIS = 24 * HOUR_MILLIS;
private static final int WEEK_MILLIS = 7 * DAY_MILLIS;

public static String getTimeAgo(long time) {
    if (time < 1000000000000L) {
        // if timestamp given in seconds, convert to millis
        time *= 1000;
    }

    long now = System.currentTimeMillis();
    if (time > now || time <= 0) {
        return null;
    }

    // TODO: localize
    final long diff = now - time;
    if (diff < MINUTE_MILLIS) {
        return "just now";
    } else if (diff < 2 * MINUTE_MILLIS) {
        return "a minute ago";
    } else if (diff < 50 * MINUTE_MILLIS) {
        return diff / MINUTE_MILLIS + " minutes ago";
    } else if (diff < 90 * MINUTE_MILLIS) {
        return "an hour ago";
    } else if (diff < 24 * HOUR_MILLIS) {
        return diff / HOUR_MILLIS + " hours ago";
    } else if (diff < 48 * HOUR_MILLIS) {
        return "yesterday";
    } else if (diff < 7 * DAY_MILLIS) {
        return diff / DAY_MILLIS + " days ago";
    } else if (diff < 2 * WEEK_MILLIS) {
        return "a week ago";
    } else {
        return diff / WEEK_MILLIS + " weeks ago";
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-15T18:41:46.557

你可以试试我的库[Time4A](https://github.com/MenoData/Time4A)，它是 Time4J 的 Android 版本。演示：

```
Locale uk = Locale.UK;
TZID paris = EUROPE.PARIS; 
ChronoFormatter<Moment> f = 
    ChronoFormatter.ofMomentPattern("d. MMMM uuuu h:mm B", PatternType.CLDR, uk, paris);
PrettyTime pt = PrettyTime.of(uk);

// => examples for relative formats
Moment moment = f.parse("4\. January 2016 5:45 in the afternoon");
System.out.println(pt.printRelative(moment, paris)); 
// output: 1 week ago

Moment now = SystemClock.currentMoment();
System.out.println(pt.printRelative(now, paris)); 
// output: now

Moment shortTimeAgo = now.minus(15, SI.SECONDS);
System.out.println(pt.printRelative(shortTimeAgo, paris)); 
// output: 15 seconds ago

TimeUnit precision = TimeUnit.DAYS;
System.out.println(pt.printRelative(shortTimeAgo, Timezone.of(paris), precision)); 
// output: today

// => examples for list formats     
Duration<?> duration = // this way for getting duration requires extra range-module
    MomentInterval.between(moment, now).getNominalDuration(
      Timezone.of(paris), 
      DAYS, HOURS, MINUTES);

System.out.println(pt.print(duration)); 
// output: 11 days, 1 hour and 26 minutes

System.out.println(pt.print(duration, TextWidth.ABBREVIATED)); 
// output: 11 days, 1 hr, 26 min 
```

实际上支持**72 种语言**（v3.18-2016c），包括**本地化复数规则**（对奴隶语言或阿拉伯语很重要）和**三种不同的文本宽度**：

> af am ar az be bg bn bs ca cs da de el en es et fa fi
> 
> fil fr ga gu he hi hr hu hy id is it ja ka kk km kn ko
> 
> ky lo lt lv mk mn mr ms my nb ne nl nn pa pl pt ro ru
> 
> si sk sl sq sr sv sw ta te th tk tr uk ur uz vi zh zu

**支持从年到秒的**所有单位（甚至列表格式的毫秒、微米、纳米）。

为了`java.util.Date`从/到 time4j 类型转换或长时间戳（表示自 Unix 纪元以来的毫秒数），您可以使用：

```
java.util.Date d = TemporalType.JAVA_UTIL_DATE.from(moment);
long epochMillis = TemporalType.MILLIS_SINCE_UNIX.from(moment);
Moment m1 = TemporalType.JAVA_UTIL_DATE.translate(d);
Moment m2 = TemporalType.MILLIS_SINCE_UNIX.translate(epochMillis); 
```

**2019-06-06 更新：**

具有 gradle-dependency 的较新版本 Time4A-4.4-2019a

```
dependencies {
    implementation group: 'net.time4j', name: 'time4j-android', version: '4.4-2019a'
} 
```

支持[94 种语言](http://time4j.net/tutorial/i18n.html#x2)，现在还包括“下周日”等相关模式。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-30T08:11:44.140

我检查了这篇文章中提到的所有答案，但无法从任何答案中获得正确且格式化的输出。终于找到了我在这篇文章中寻找的答案， http: [//memorynotfound.com/calculate-relative-time-time-ago-java/](http://memorynotfound.com/calculate-relative-time-time-ago-java/)

```
import java.util.Date;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.concurrent.TimeUnit;

public class TimeAgo {

    public static final Map<String, Long> times = new LinkedHashMap<>();

    static {
        times.put("year", TimeUnit.DAYS.toMillis(365));
        times.put("month", TimeUnit.DAYS.toMillis(30));
        times.put("week", TimeUnit.DAYS.toMillis(7));
        times.put("day", TimeUnit.DAYS.toMillis(1));
        times.put("hour", TimeUnit.HOURS.toMillis(1));
        times.put("minute", TimeUnit.MINUTES.toMillis(1));
        times.put("second", TimeUnit.SECONDS.toMillis(1));
    }

    public static String toRelative(long duration, int maxLevel) {
        StringBuilder res = new StringBuilder();
        int level = 0;
        for (Map.Entry<String, Long> time : times.entrySet()){
            long timeDelta = duration / time.getValue();
            if (timeDelta > 0){
                res.append(timeDelta)
                        .append(" ")
                        .append(time.getKey())
                        .append(timeDelta > 1 ? "s" : "")
                        .append(", ");
                duration -= time.getValue() * timeDelta;
                level++;
            }
            if (level == maxLevel){
                break;
            }
        }
        if ("".equals(res.toString())) {
            return "0 seconds ago";
        } else {
            res.setLength(res.length() - 2);
            res.append(" ago");
            return res.toString();
        }
    }

    public static String toRelative(long duration) {
        return toRelative(duration, times.size());
    }

    public static String toRelative(Date start, Date end){
        assert start.after(end);
        return toRelative(end.getTime() - start.getTime());
    }

    public static String toRelative(Date start, Date end, int level){
        assert start.after(end);
        return toRelative(end.getTime() - start.getTime(), level);
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-05T08:17:59.483

您可以使用 android-ago 模块[https://github.com/curioustechizen/android-ago](https://github.com/curioustechizen/android-ago)

在您的 XML 中添加组件

```
<com.github.curioustechizen.ago.RelativeTimeTextView
android:id="@+id/timestamp"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
app:relative_time_prefix="Completed "
android:layout_marginTop="@dimen/margin_primary" /> 
```

设置时间参考视图代码

```
RelativeTimeTextView v = (RelativeTimeTextView)findViewById(R.id.timestamp); //Or just use Butterknife! 
```

v.setReferenceTime(new Date().getTime());

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-03-24T18:30:05.757

只需输入时间戳编号并获得您的问题的答案。输出根据您的位置来。

```
public static String getTimeAgo(long timestamp) {

    Calendar cal = Calendar.getInstance();
    TimeZone tz = cal.getTimeZone();//get your local time zone.
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy hh:mm a");
    sdf.setTimeZone(tz);//set time zone.
    String localTime = sdf.format(new Date(timestamp * 1000));
    Date date = new Date();
    try {
        date = sdf.parse(localTime);//get local date
    } catch (ParseException e) {
        e.printStackTrace();
    }

    if(date == null) {
        return null;
    }

    long time = date.getTime();

    Date curDate = currentDate();
    long now = curDate.getTime();
    if (time > now || time <= 0) {
        return null;
    }

    int timeDIM = getTimeDistanceInMinutes(time);

    String timeAgo = null;

    if (timeDIM == 0) {
        timeAgo = "less than a minute";
    } else if (timeDIM == 1) {
        return "1 minute";
    } else if (timeDIM >= 2 && timeDIM <= 44) {
        timeAgo = timeDIM + " minutes";
    } else if (timeDIM >= 45 && timeDIM <= 89) {
        timeAgo = "about an hour";
    } else if (timeDIM >= 90 && timeDIM <= 1439) {
        timeAgo = "about " + (Math.round(timeDIM / 60)) + " hours";
    } else if (timeDIM >= 1440 && timeDIM <= 2519) {
        timeAgo = "1 day";
    } else if (timeDIM >= 2520 && timeDIM <= 43199) {
        timeAgo = (Math.round(timeDIM / 1440)) + " days";
    } else if (timeDIM >= 43200 && timeDIM <= 86399) {
        timeAgo = "about a month";
    } else if (timeDIM >= 86400 && timeDIM <= 525599) {
        timeAgo = (Math.round(timeDIM / 43200)) + " months";
    } else if (timeDIM >= 525600 && timeDIM <= 655199) {
        timeAgo = "about a year";
    } else if (timeDIM >= 655200 && timeDIM <= 914399) {
        timeAgo = "over a year";
    } else if (timeDIM >= 914400 && timeDIM <= 1051199) {
        timeAgo = "almost 2 years";
    } else {
        timeAgo = "about " + (Math.round(timeDIM / 525600)) + " years";
    }

    return timeAgo + " ago";
}

public static Date currentDate() {
    Calendar calendar = Calendar.getInstance();
    return calendar.getTime();
}

private static int getTimeDistanceInMinutes(long time) {
    long timeDistance = currentDate().getTime() - time;
    return Math.round((Math.abs(timeDistance) / 1000) / 60);
} 
```

# javascript - 使用 jquery 和动态变量名设置全局变量

> ID：13018552
> 
> 赞同：1
> 
> 时间：2012-10-22T19:39:38.423
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 和动态变量名称设置一个 javascript 全局变量，如下所示：

```
var home_phone_number // located outside of any functions
.
.
.
function setPhoneVars(phone){
// do stuff here to determine the correct prefix
thePrefix = 'home_phone_'
$(thePrefix + "number").val(phone.number);

} 
```

当我这样做时， home_phone_number 的值是未定义的。

但是，当我手动设置电话号码时，如下所示：

```
home_phone_number = phone.number 
```

变量按预期设置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T19:41:22.850

全局变量是`window`对象的属性，因此可以这样访问：

```
window[thePrefix+'number'] = phone.number; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:41:44.773

您可以通过`window`对象访问全局变量，例如

```
var home_phone_number = "value";

function setPhoneVars(phone) {
    var thePrefix = "home_phone_";
    window[thePrefix + "number"] = phone.number;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:42:51.293

而不是拥有这么多全局变量..您可以使用单个对象..

```
var globals = {
   home_phone_number: 0 // located outside of any functions
} 

function setPhoneVars(phone){
  // do stuff here to determine the correct prefix
  thePrefix = 'home_phone_'
  globals[thePrefix + "number"] = phone.number;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:53:18.050

我认为您对 JQuery 的使用不合适；.val() 旨在设置 HTML 元素的值，即 DOM 中的 HTML 对象。

要简单地设置动态 JavaScript 变量，您可以使用 eval()，它是一个 JavaScript 函数，将字符串视为可执行代码；

```
thePrefix = "home_phone_";
eval(thePrefix + "number = phone.number;"); 
```

# ssms - 使用 Management Studio 将查询字母转换为大写

> ID：13018556
> 
> 赞同：8
> 
> 时间：2012-10-22T19:39:59.860
> 
> 标签：ssms

我可以使用 SQL Server Management Studio 将查询语法转换为大写吗？我有一堆用小写字母编写的查询，我想将它们全部转换为大写字母。我正在寻找一个内置的编辑器功能。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T19:47:17.450

选择所有查询。然后转到*编辑 > 高级 > 使大写*或简单地点击`Ctrl+Shift+U`使查询大写。
请注意，它将使所有内容都大写。（即，表名、字段名、字符串等）

**编辑：**
如果您能够安装加载项，您还可以使用[SSMS 工具包](http://www.ssmstoolspack.com)仅将关键字大写。

# gwt - GXT 3，网格编译问题

> ID：13018559
> 
> 赞同：2
> 
> 时间：2012-10-22T19:40:06.833
> 
> 标签：gwt, gxt

我正在尝试运行 GXT 3 Grid，但在运行 GWT 编译表单 Eclipse 时出现以下异常：

```
java.lang.NullPointerException
at com.sencha.gxt.data.rebind.ModelKeyProviderCreator.getObjectType(ModelKeyProviderCreator.java:40) 
```

启动网格并使其可见的代码：

```
DataProperties dp = GWT.create(DataProperties.class);
List<ColumnConfig<MyGridData, ?>> css = new LinkedList<ColumnConfig<MyGridData, ?>>();
css.add(new ColumnConfig<MyGridData, String>(dp.name(), 200, "Name"));      
css.add(new ColumnConfig<MyGridData, String>(dp.value(), 200, "Value"));

ColumnModel<MyGridData> cm = new ColumnModel<MyGridData>(css);
ListStore<MyGridData> s = new ListStore<MyGridData>(dp.key());
s.add(new MyGridData("name1","value1"));
s.add(new MyGridData("name2","value2"));
s.add(new MyGridData("name3","value3"));
s.add(new MyGridData("name4","value4"));
Grid<MyGridData> g = new Grid<MyGridData>(s, cm);
addToDisplay(g); 
```

网格数据 bean：

```
public class MyGridData{
    private String name;
private String value;

public MyGridData(String name, String value) {
        super();
    this.name = name;
        this.value = value;
}

public void setName(String name) {
    this.name = name;
}

public String getName() {
    return this.name;
}

public void setValue(String value) {
    this.value = value;
}

public String getValue() {
        return this.value;
}

 } 
```

支持的 DataProperties 类：

```
import com.google.gwt.editor.client.Editor.Path;
import com.sencha.gxt.core.client.ValueProvider;
import com.sencha.gxt.data.shared.ModelKeyProvider;
import com.sencha.gxt.data.shared.PropertyAccess;

public interface DataProperties extends PropertyAccess {

    @Path("name")
ModelKeyProvider key();

ValueProvider<MyGridData, String> name();
ValueProvider<MyGridData, String> value();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:42:40.073

从您的代码：

```
public interface DataProperties extends PropertyAccess {

  @Path("name")
  ModelKeyProvider key();

  ValueProvider<MyGridData, String> name();
  ValueProvider<MyGridData, String> value();
} 
```

你在这里遇到了一个错误——没有泛型，编译器无法弄清楚你需要什么。您的 IDE 应该警告您对 ProperyAccess 和 ModelKeyProvider 的原始使用。这两个都需要参考 MyGridData。试试这个：

```
public interface DataProperties extends PropertyAccess<MyGridData> {//here

  @Path("name")
  ModelKeyProvider<MyGridData> key();// and here

  ValueProvider<MyGridData, String> name();
  ValueProvider<MyGridData, String> value();
} 
```

# windows-runtime - WinRT：如何获取处理器类型（c#）

> ID：13018564
> 
> 赞同：3
> 
> 时间：2012-10-22T19:40:16.357
> 
> 标签：windows-runtime, winrt-xaml

我需要确定处理器类型是否为 ARM 处理器（用于桌面应用程序）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:49:38.547

调用[`GetNativeSystemInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724340.aspx)并测试返回是否`wProcessorArchitecture`为`PROCESSOR_ARCHITECTURE_ARM`.

# html - 在R中将字符转换为html

> ID：13018570
> 
> 赞同：18
> 
> 时间：2012-10-22T19:40:32.233
> 
> 标签：html, r

R中将包含非ASCII字符的字符（向量）转换为html的首选方法是什么？例如，我想转换

```
 "ü" 
```

到

```
 "&uuml;" 
```

我知道这可以通过巧妙地使用`gsub`（但有没有人一劳永逸地做到这一点？）并且我认为 R2HTML 包可以做到这一点，但事实并非如此。

编辑：这是我最终使用的；它显然可以通过修改字典来扩展：

```
char2html <- function(x){
  dictionary <- data.frame(
    symbol = c("ä","ö","ü","Ä", "Ö", "Ü", "ß"),
    html = c("&auml;","&ouml;", "&uuml;","&Auml;",
             "&Ouml;", "&Uuml;","&szlig;"))
  for(i in 1:dim(dictionary)[1]){
    x <- gsub(dictionary$symbol[i],dictionary$html[i],x)
  }
  x
}

x <- c("Buschwindröschen", "Weißdorn")
char2html(x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-12-10T20:15:56.410

这个问题很老了，但我找不到任何直接的答案......所以我想出了这个简单的函数，它使用数字 html 代码并适用于[LATIN 1 - Supplement](https://unicode-table.com/en/#latin-1-supplement)（整数值 161 到 255）。可能（当然？）某个包中的一个函数可以更彻底地完成它，但接下来的内容可能对许多应用程序来说已经足够好了......

```
conv_latinsupp <- function(...) {
  out <- character()
  for (s in list(...)) {
    splitted <- unlist(strsplit(s, ""))
    intvalues <- utf8ToInt(enc2utf8(s))
    pos_to_modify <- which(intvalues >=161 & intvalues <= 255)
    splitted[pos_to_modify] <- paste0("&#0",  intvalues[pos_to_modify], ";")
    out <- c(out, paste0(splitted, collapse = ""))
  }
  out
}

conv_latinsupp("aeiou", "àéïôù12345")
## [1] "aeiou"   "&#0224;&#0233;&#0239;&#0244;&#0249;12345" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:06:25.883

为此使用`XML`了一种方法`insertEntities`，但该方法是内部的。因此，您可以自行承担使用它的风险，因为无法保证它在未来的版本中仍会像这样运行。

现在，您的代码可以使用

```
char2html <- function(x) XML:::insertEntities(x, c("ä"="auml", "ö"="ouml", …)) 
```

使用命名列表而不是 data.frame 感觉有点优雅，但不会改变事物的核心。在后台，`insertEntities`调用`gsub`方式与您的代码大致相同。

如果数字 HTML 实体在您的环境中有效，那么您可能会将所有文本转换为使用的文本`utf8ToInt`，然后将可安全打印的 ASCII 字符转换回未转义的形式。这将为您省去为实体维护字典的麻烦。

# visual-studio-2010 - 是否有相当于 Eclipse 的本地历史的 Visual Studio？

> ID：13018575
> 
> 赞同：30
> 
> 时间：2012-10-22T19:40:49.573
> 
> 标签：visual-studio-2010, visual-studio

Eclipse IDE 有一个[很好的功能](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-55.htm)，可以自动记录文件修订，您可以随时通过右键单击文件并单击`Compare With`->来查看它们`Local History...`。

Visual Studio 2010 中是否有与此等价的功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-18T01:45:21.640

一些更新的选项：

每个保存都存储在 git 存储库中。您可以使用现有的 git 工具查看历史记录：

[自动](http://visualstudiogallery.msdn.microsoft.com/45a3d62b-955e-43cb-9d91-255a837d5f35)

这个扩展提供了一个自定义的本地历史查看器：

[Visual Studio 的本地历史记录](http://visualstudiogallery.msdn.microsoft.com/226c2108-9da9-407d-b90d-9783040d27b8)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-13T04:18:22.533

[Visual Studio 的本地历史记录](http://visualstudiogallery.msdn.microsoft.com/226c2108-9da9-407d-b90d-9783040d27b8)类似于 Eclipse 或 IntelliJ 的本地历史记录功能。它适用于 Visual Studio 2012 和 2013。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T20:48:14.047

Visual Studio 中没有本机，但是[Visual Local History](http://vlh2005.codeplex.com/)呢。它具有“与上一个版本比较”的选项。它应该适用于 VS 2005、2008 和 2010 的一些额外配置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T19:49:12.863

本地历史没有等效的特征。

但是，如果您使用的是 TFS，IDE 中支持获取文件的历史记录（尽管这是提交/检查的历史记录）。

许多其他版本控制系统也具有提供此类功能的 Visual Studio 插件。例如，[VisualHG](http://visualhg.codeplex.com/documentation)提供了一个“HG History”命令，它显示 Mercurial 存储库中的版本历史记录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-03T13:36:31.453

对于 Visual Studio [2015、2017、2019 VSHistory](https://marketplace.visualstudio.com/items?itemName=KenCross.VSHistory)扩展：每次保存时维护 Visual Studio 项目中文件的历史记录。可以查看任何保存的版本，或者可以显示与当前版本的差异

# ios - 我应该从头开始在 iOS 6 上学习 iOS 吗？旧的“好”学习材料呢？

> ID：13018578
> 
> 赞同：3
> 
> 时间：2012-10-22T19:40:58.483
> 
> 标签：ios, ios6

我想学习在 iOS 上编程，我发现亚马逊和其他讨论网站推荐的最好的书都属于旧的 iOS 版本。我的问题是：

*   iOS 6 中是否有如此巨大的变化（就像 Java SE 5 与旧版本相比发生的变化），同时将它与旧版本进行比较，这改变了我们的编程方式，值得通过 iOS 学习材料从头开始学习 iOS 开发而不是专注于旧的（好的）学习资源？
*   您推荐哪些教程书作为 iOS 编程的起点？

我看到了这个链接： [https ://stackoverflow.com/questions/3403049/best-book-resources-for-learning-ios-programming](https://stackoverflow.com/questions/3403049/best-book-resources-for-learning-ios-programming)

但看起来，它已在 2 年前被问到，并且自几个月前以来一直没有更新，并且显然甚至不包括 iOS 5 学习资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:48:40.173

老实说，入门任何介绍性书籍就足够了。您不需要最新的 iOS 6 风格的教程即可开始学习。

阅读 Apple 文档以开始使用：[Apple Developer Portal](http://developer.apple.com/ "苹果开发者门户")

尝试一些教程：[Ray Wenderlich](http://raywenderlich.com "雷·温德利希")

你会通过实践学得最快。所以，就自己想出一些小项目，试着在网上找资源来完成吧

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T19:50:46.967

对于大多数类型的编程（例如 ARC），从 iOS4 到 5 的跳跃比从 5 到 6 的跳跃更大。我遇到的最大问题是 [UIViewController viewDidUnload:] 现在已弃用，您应该将清理代码放在 dealloc 中。但通常情况下，95% 的代码仍然以相同的方式工作。

我的 iOS 5 代码被重新编译到 iOS 6 并且运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-02T05:20:13.797

我建议您首先联系**Stephen G.Kochan 撰写**的“Objective-C 编程”一书，如果您想快速学习，请阅读**Lynda iOS 6 基本**教程或**第一个**iPhone 开发书第 3 版 (os6)。如果您想要强大的学习能力，请从 iTunes U 中的**斯坦福大学** iPhone 视频（2013 年冬季）开始并完成作业。

# vector - 从参数方程确定矢量方程

> ID：13018580
> 
> 赞同：0
> 
> 时间：2012-10-22T19:41:00.023
> 
> 标签：vector, equation

我现在真的在努力解决一个问题。问题是找到通过点 (1,1,1) 并平行于 x - 3y - 2z - 4 = 0 的平面的方程。

我已将方向向量确定为 (1, -3, -2)，然后我计算了以下参数方程：

```
x(t) = t + 1
y(t) = 1 - 3t
z(t) = 1 - 2t 
```

但现在我不知道如何从这些方程中确定平面方程。任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:46:57.263

这是一道数学题，不是编程题。您应该在 math.stackexchange.com 上询问。

不过既然这么简单，我就在这里告诉你怎么解决。

你从平面方程开始`x - 3y - 2z - 4 = 0`。任何具有方程的平面`x - 3y - 2z + C = 0`（对于任何实数`C`）都平行于您的原始平面。

所以如果你想通过一个平行平面的方程`(1,1,1)`，只需插入`(1,1,1)`方程，`C`然后求解`C`。

```
1 - 3*1 - 2*1 - C = 0
C = 3 + 2 - 1 = 4 
```

所以平行平面的方程为`x - 3y - 2z + 4 = 0`。

# sql - 如何在 oracle 中进行插入，并获取插入行的 ID？

> ID：13018588
> 
> 赞同：1
> 
> 时间：2012-10-22T19:41:25.780
> 
> 标签：sql, oracle

> **可能重复：**
> [获取oracle db中最后插入记录的ID](https://stackoverflow.com/questions/3131064/get-id-of-last-inserted-record-in-oracle-db)

我是 Oracle 的新手，过去使用过 SQL Server。我有一个存储过程，我正在尝试一个接一个地执行两个 INSERT。第二个 INSERT 需要第一个 INSERT 的 ID。有人可以解释怎么做吗？

我看到了关于`SEQUENCE`s 和`nextvalue/curval`?

我想在 SQL Server 中我只是声明一个变量，然后使用`SCOPE_IDENTITY`，所以我希望这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:46:15.050

有两种可能性。如果您使用序列来生成数字（并且您可能是，因为 Oracle 没有自动编号字段，如 MySQL），您可以从序列中获取值，如下所示：

```
select SequenceName.currval into AVariable from dual 
```

另一种选择是使用这样的`returning`子句：

```
declare
  AVariable int;
begin
  insert into yourtable(columns) 
  values (values) 
  returning id into AVariable;

  insert into anotherTable(columns)
  values(AVariable, othervalues);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:47:25.053

有几种方法。一种选择是使用该`RETURNING`子句，即

```
DECLARE
  l_generated_id INTEGER;
BEGIN
  INSERT INTO table_name( <<column list>> )
    VALUES( <<values list>>
    RETURNING <<name of primary key column>>
         INTO l_generated_id;
  INSERT INTO other_table( <<column list>> )
    VALUES( l_generated_id, <<other values>> );
END; 
```

如果您知道主键是通过序列（有或没有触发器）填充的并且您知道该序列的名称，则可以`sequence_name.currval`在第二个`INSERT`语句`INSERT`中使用`sequence_name.nextval`生成新的主键）。

# perl - 从 CGI 脚本生成外部进程

> ID：13018595
> 
> 赞同：1
> 
> 时间：2012-10-22T19:41:45.350
> 
> 标签：perl, apache2, cgi

我已经搜索并发现了几个与我非常相似的问题，但这些答案中没有任何东西对我有用。

我有一个接受文件上传的 perl CGI 脚本。它查看文件并确定应如何处理它，然后调用第二个非 CGI 脚本进行实际处理。至少，它*应该*是这样工作的。

这是在带有 Apache 2.0.59 和 ActiveState Perl 5.8.8 的 Windows 上运行的。文件上传部分工作正常，但我似乎无法让*`upload.cgi`*脚本运行执行实际处理的第二个脚本。第二个脚本不以任何方式与发送文件的用户进行通信（除了在完成时发送电子邮件）。我希望 CGI 脚本运行第二个脚本（在单独的进程中），然后“离开”。

到目前为止，我已经尝试过`exec`，system（传递 1 作为第一个参数），system（不使用 1 作为第一个参数并调用' *`start`*'）和 Win32::Process. 使用带有 1 作为第一个参数的 system 在 Apache 日志中出现错误：

> *'1' 未被识别为内部或外部命令，\r，引用者：http: [//my.server.com/cgi-bin/upload.cgi](http://my.server.com/cgi-bin/upload.cgi)*

没有其他任何东西给我任何错误，但它们似乎不起作用。第二个脚本将一条消息记录到 Windows 事件日志中，这是它首先要做的事情之一。没有创建日志条目。

它在 Omni webserver 下的本地机器上运行良好，但在运行 Apache 的实际服务器机器上却不行。是否有可能影响此的 Apache 配置？该*`upload.cgi`*脚本位于*`d:\wwwroot\test\cgi-bin`*dir 中，但另一个脚本位于同一台机器上的其他位置 ( *`d:\wwwroot\scripts`*)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:31:20.920

可能存在与安全相关的问题，但在日志中应该很明显。这不会完全回答您的问题，但它可能会为您提供其他实现想法，您不会面临潜在的安全和性能问题。

我不太喜欢将我的 Web 服务器环境与 system() 调用混合在一起。相反，我创建了一个应用程序服务器（通常带有[POE](http://search.cpan.org/~rcaputo/POE-1.354/lib/POE.pm)），它接受来自 Web 服务器的相关参数，处理作业，并在完成时通知 Web 服务器。（好吧，通知部分可能并不简单，但这是另一个话题。）

# objective-c - 无法在视图中添加阴影，CALayer

> ID：13018604
> 
> 赞同：3
> 
> 时间：2012-10-22T19:42:11.153
> 
> 标签：objective-c, ios, calayer, shadow

我正在通过以下方式为我的视图添加阴影

```
- (void)viewDidLoad{
    [super viewDidLoad];

    self.view.layer.shadowColor = [UIColor blackColor].CGColor;
    self.view.layer.shadowOffset = CGSizeMake(0.0f, 0.0f);
    self.view.layer.shadowOpacity = 1.0f;
    self.view.layer.shadowRadius = 4.0f;
    self.view.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.view.bounds].CGPath;
} 
```

但是，我得到一个完全没有阴影的视图，如下所示

![在此处输入图像描述](../Images/0e5ee54ca4dba37538bc8f76cf7c21c9.png)

我是否在中途错过了一些要点。请就这个问题给我建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-09T14:14:10.803

您需要将 layer.masksToBounds 设置为 NO 并将 clipsToBounds 设置为 YES。

```
self.view.layer.masksToBounds = NO;
self.view.clipsToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:48:38.973

使偏移量为 0，将对视图产生 nil 效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:09:36.443

对不起大家，这是我的愚蠢错误。我拥有的视图结构是

```
view(UIView) ( in white color )
    |
    |
    aView (UIView) ( in orange color ) 
```

我所做的就是展示`view`not的影子`aView`。刚刚更正了如下代码

```
(void)viewDidLoad{
    [super viewDidLoad];

    self.aView.layer.shadowColor = [UIColor blackColor].CGColor;
    self.aView.layer.shadowOffset = CGSizeMake(0.0f, 0.0f);
    self.aView.layer.shadowOpacity = 1.0f;
    self.aView.layer.shadowRadius = 4.0f;
    self.aView.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.view.bounds].CGPath;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T19:50:49.063

你根本没有抵消你的影子。尝试：

```
self.view.layer.shadowOffset = CGSizeMake(0.0f, 1.0f); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T03:45:37.993

您应该使偏移量具有一定的值而不是 0。例如：

```
self.view.layer.shadowOffset = CGSizeMake(3, -1); 
```

这样您的视野中就会形成阴影。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T06:57:42.163

你可以试试这个：

```
-(void)makeShadow
{
      self.layer.shadowOpacity = 0.7f;
      self.layer.shadowOffset = CGSizeMake(5.0f,3.0f);
      self.layer.shadowColor =[[UIColor blackColor] CGColor];
//    UIBezierPath *path = [UIBezierPath bezierPathWithRect:self.bounds];
//    layer.shadowPath = path.CGPath;
//    layer.shadowRadius = 5.0f;
}
-(void)makeCornerRadius:(CGFloat)_cornerRadius
{
   self.cornerRadius = _cornerRadius;
   [self.layer setMasksToBounds:NO];
   [self.layer setCornerRadius:_cornerRadius];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-09T03:34:45.490

确保 `self.clipsToBounds = NO;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-23T05:51:55.443

您的视图看起来与您提供的代码无关。确保您将阴影应用到正确的视图，您没有将视图遮盖到其边界，并且颜色正确。下面的代码显示了一个工作示例：

```
UIView *pointView = [[UIView alloc] initWithFrame:pointLabel.frame];
pointView.backgroundColor = [UIColor whiteColor];
pointView.layer.shadowColor = [UIColor lightGrayColor].CGColor;
pointView.layer.shadowOffset = CGSizeMake(2.0f, 2.0f);
pointView.layer.shadowOpacity = 1.0f;
pointView.layer.shadowRadius = 5.0f;
pointView.layer.shadowPath = [UIBezierPath bezierPathWithRect:pointView.bounds].CGPath; 
```

# bing-maps - 如何摆脱 Bing 地图中的导航栏？

> ID：13018606
> 
> 赞同：3
> 
> 时间：2012-10-22T19:42:17.643
> 
> 标签：bing-maps

如何摆脱 Bing 地图顶部的导航栏？该栏有道路和自动选择器以及鸟瞰和空中选择器。![我想摆脱的](../Images/756673fe1674591127010a98bae566a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:04:00.923

```
Microsoft.Maps.loadModule('Microsoft.Maps.Themes.BingTheme', { callback: function() 
{
    map = new Microsoft.Maps.Map(document.getElementById('SDKmap'), 
    { 
         credentials: 'Your Bing Maps Key', 
         theme: new Microsoft.Maps.Themes.BingTheme(),
         showMapTypeSelector:false
    }); 
}}); 
```

# python - 扭曲的 HTTP/TCP 协议

> ID：13018619
> 
> 赞同：2
> 
> 时间：2012-10-22T19:43:16.863
> 
> 标签：python, twisted

我正在尝试创建一个扭曲的服务器，该服务器将接受一个 http post 请求，然后将该 post 请求的信息写入 tcp 连接。现在我刚刚修改了教程中给出的多重回显服务器/客户端：

```
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor

class MultiClientEcho(Protocol):
    def __init__(self, factory):
        self.factory = factory

    def connectionMade(self):
        self.factory.clients.insert(self.factory.id, self)
        self.factory.id += 1
        self.ip = self.transport.getPeer()

    def dataReceived(self, data):
        self.factory.clients[0].transport.write(data)

    def connectionLost(self, reason):
        self.factory.clients.remove(self)

class MultiClientEchoFactory(Factory):
    def __init__(self):
        self.clients = []
        self.id = 0

    def buildProtocol(self, addr):
        return MultiClientEcho(self)

reactor.listenTCP(8000, MultiClientEchoFactory())
reactor.run() 
```

我被引导了解 Twisted 可以处理这些事情。如果是这样，有人可以用一些代码或一个简单的例子指出我正确的方向吗？有一段时间我一直在用头撞墙。

谢谢

# asp.net - #评估图像数据

> ID：13018623
> 
> 赞同：3
> 
> 时间：2012-10-22T19:43:44.923
> 
> 标签：asp.net, image, eval

如何使用 Eval 将 sql varbinary 数据（图像）绑定到图像？像这样的东西：

```
 <image src = <%# Eval("imageBinaryData") %> /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:52:41.637

您需要使用 HttpHandler 来获取数据并将其流回。然后，您将从 ASPX 页面链接到处理程序。

```
<img class="mainEventsImage" 
    src='<%# Eval("MainImagePath").ToString().Replace("\\", "/") %>' 
        alt='<%# Eval("Title") %>' runat="server" />

if (reader.Read())
{
    int bufferSize = 100;
    byte[] bytes = new byte[bufferSize];
    long bytesRead;
    long readFrom = 0;

    do
    {
        bytesRead = reader.GetBytes(0, readFrom, bytes, 0, bufferSize);
        context.Response.ContentType = "image/jpeg";
        context.Response.BinaryWrite(bytes);
        readFrom += bufferSize;
    }
    while (bytesRead == bufferSize);
}
reader.Close(); 
```

# maven - 如何从 Maven 中的一个组中排除所有工件？

> ID：13018625
> 
> 赞同：49
> 
> 时间：2012-10-22T19:43:49.237
> 
> 标签：maven, maven-3

我正在使用配置了 Enforcer 插件以强制版本收敛的 maven 3。我正在使用 Spring 3.1.2 和 Spring Security 3.1.3。

问题是 Spring 3.1.3 POM 声明了对 Spring 3.0.7 的依赖，因为这是 Spring 安全性所需的最低版本。这意味着强制插件会抱怨，因为传递依赖图同时包含 Spring 3.1.2 和 Spring 3.0.7。

修复是明确排除 spring 3.0.7 作为 spring security 的依赖项，以便执行器插件快乐。

下面的代码片段就是这样做的，它的问题是我必须一遍又一遍地重复相同的片段以获得每个 jar 的 spring security，这很乏味并且使 pom 难以阅读，有没有办法告诉行家的东西。

对于依赖 org.springframework.security 不管什么 artificatId 都忽略了安全框架对spring框架的依赖？

```
<dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-acl</artifactId>
            <version>${spring.security.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-tx</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-asm</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>

                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-jdbc</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-expression</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.security.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-expression</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>aopalliance</artifactId>
                    <groupId>aopalliance</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-web</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-jdbc</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-tx</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-23T01:33:22.870

这可能不会对您有太大帮助，但是有一个功能请求允许在排除项中使用通配符，但是它不在当前的 Maven 发行版（3.0.4）中。（编辑：这个特性现在出现在 Maven 3.2.1 中）

[https://issues.apache.org/jira/browse/MNG-3832](https://issues.apache.org/jira/browse/MNG-3832)

有趣的是对此 JIRA 问题的评论：

> 不知道发生了什么，但这似乎在 Maven 3.0.3 中工作，使用这个：

```
<exclusion>
    <groupId>*</groupId>
    <artifactId>*</artifactId>
</exclusion> 
```

> 但是，这会产生以下警告：
> 
> [警告] my.groupid:my.artifactid:ejb-client 的“dependencies.dependency.exclusions.exclusion.groupId”值为“*”与有效的 id 模式不匹配。@ 第 31 行，第 30 列
> 
> [警告] my.groupid:my.artifactid:ejb-client 的“dependencies.dependency.exclusions.exclusion.artifactId”值为“*”与有效的 id 模式不匹配。@ 第 32 行，第 33 列
> 
> 所以我可能不应该这样做，但它确实有效。

因此，您可能能够在 Maven 3.0.3 或更高版本中使用 artifactId 通配符并使其正常工作，但会出现警告并且不保证与更高版本的兼容性。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-05-18T11:12:20.813

这对我有用，不包括 groupId 的所有工件`org.springframework`：

```
<exclusions>
    <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>*</artifactId>
    </exclusion>
</exclusions> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-18T07:37:45.907

我遇到了同样的问题。我认为您应该在 pom.xml 中显式包含 Spring 3.2.x 以在 Maven 解决冲突 jar 时强制执行级别 0 的 Spring 版本。请参考： [http ://www.baeldung.com/spring-security-with-maven](http://www.baeldung.com/spring-security-with-maven)

# excel - 如何从多行/列 Excel 电子表格生成格式化的 Word 报告

> ID：13018627
> 
> 赞同：4
> 
> 时间：2012-10-22T19:43:50.563
> 
> 标签：excel, vba, ms-word, auto-generate, word-template

我正在尝试从多个团队使用的 Excel 模板自动构建格式化的 Word 报告。例如，如果我有以下 Excel 结构：

......A.... |....B.... |....C....
1 **姓名**| **身高**| **重量**
2 杰森 | 74 | 170
3 格雷格 | 70 | 160
4 山姆 71 | 200

我想将该数据和格式提取到具有以下格式的 Word 文件中：

2.1 杰森
身高：74
体重：170

2.2 格雷格
身高：70
体重：160

2.3 Sam
身高：71
体重：200

有没有一种使用 VBA 的快速方法，并且能够遍历任何特定 Excel 文件中可能存在的尽可能多的行？（可能从几到几百不等）真正的 excel 文件包含大约十二列，其中对于每条记录（行），需要使用标准模板（字体大小/颜色、缩进、对齐方式等）提取和格式化数据。 ..) 但我很想让提取物正常工作，以后可以使用格式。

作为参考，我尝试研究已知的解决方案，但大多数都集中在命名书签和相对静态的内容上，而不是通过动态数量的行进行交互并为每个行解析相同的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:40:53.167

如果您最终使用 VBA，您可以使用以下从 word 文档开始的代码。确保在 VBE 中的工具 > 参考下签入 Microsoft Excel XX 对象库的参考。

正如您所知，将字符串放入 Word 的部分可能会写得更好。就知识而言，Word 是我所有 MS Office 产品中最薄弱的。

```
Sub XLtoWord()

Dim xlApp As Excel.Application
'Set xlApp = CreateObject("Excel.Application")
Set xlApp = GetObject(, "Excel.Application") '-> assumes XL is open, if not use CreateObject

Dim wkb As Excel.Workbook
Set wkb = xlApp.Workbooks("Book5.xlsm") '-> assumes xl is open, if not use .Workbooks.Open(filename)

Dim wks As Excel.Worksheet
Set wks = wkb.Sheets(1) '-> assumes data is in sheet 1

With wks

    Dim lngRow As Long
    lngRow = .Range("A" & .Rows.Count).End(xlUp).Row

    Dim cel As Excel.Range
    Dim i As Integer

    i = 1

    For Each cel In .Range("A2:A" & lngRow) 'assumes data is filled from top left cell of A1 including headers

        strLabel = "2." & i & " " & cel.Text
        strHeight = "Height " & cel.Offset(, 1).Text
        strWeight = "Weight " & cel.Offset(, 2).Text

        Dim myDoc As Word.Document
        Set myDoc = ThisDocument

        myDoc.Range.InsertParagraphAfter
        myDoc.Range.InsertAfter strLabel & Chr(11) & strHeight & Chr(11) & strWeight

        i = i + 1

    Next

End With

End Sub 
```

# c++ - 如何为 QWidget 设置用户数据？

> ID：13018628
> 
> 赞同：23
> 
> 时间：2012-10-22T19:43:51.323
> 
> 标签：c++, qt, qwidget

我想设置一个整数存储在 a`QWidget`中，我认为`setUserData`成员函数可以解决问题，但我找不到任何文档。有什么提示吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-22T19:51:11.280

您可能正在寻找[`QObject::setProperty()`](http://qt-project.org/doc/qt-5/qobject.html#setProperty)（当然是由 继承的[`QWidget`](http://qt-project.org/doc/qt-5/qwidget.html)）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-22T19:49:39.837

我不是 QT 专家，但为什么不创建一个继承自`QWidget`整数并具有整数的类？像这样：

```
class MyDerivedWidget : public QWidget
{
    public:
  MyDerivedWidget();

    private:
  Data *myUserData;
}; 
```

或者，如果您坚持使用[此处](http://www.qtforum.org/article/27363/qwidget-user-data.html)`setUserData`的最后一个帖子结帐。

# c# - DevExpress 编辑掩码

> ID：13018630
> 
> 赞同：0
> 
> 时间：2012-10-22T19:44:18.607
> 
> 标签：c#, regex, devexpress

我正在使用 Dev Express `RepositoryItemTextEdit`，我希望设置 Edit Mask 以帮助确保用户输入的格式正确。

期望的行为是让用户输入一个或多个 6 位数字，或者使用逗号分隔，或者使用连字符来指定范围。

例如：

```
000002, 000005-000025, 000029-00200, 999999 
```

我确信我应该能够使用 RegEx 的 MaskType 来做到这一点，但我很难想出正确的 RegEx。

是否有任何 RegEx 专家知道如何将其组合在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:30:19.923

如果您可以访问完整的 POSIX 正则表达式引擎（例如，如果您使用 Perl 或 Python），您的目标很容易实现：

```
'\d{6}((,\s|-)\d{6})*$' 
```

因此，DevExpress 编辑器不支持[此支持中心线程](http://www.devexpress.com/Support/Center/Question/Details/Q319168)结尾的字符串锚点，但它们不是必需的，因此您可以尝试：

```
'\d{6}((,\s|-)\d{6})*' 
```

看看它是否适合你（我不能自己测试它，因为我不使用 DevExpress 编辑器）。

# delphi - 如何在运行时获取包名称/版本

> ID：13018631
> 
> 赞同：2
> 
> 时间：2012-10-22T19:44:17.500
> 
> 标签：delphi, delphi-xe2

我在运行时通过`LoadPackage()`. 假设加载后我想检查包的版本以确保它是最新的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T19:47:36.387

一个包只是一种特殊类型的dll，所以可以使用[`GetFileVersion`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.GetFileVersion)SysUtils单元中定义的函数，该函数返回版本号的最高32位。所以不包括发行版和/或内部版本号。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

 Var
   FileVersion : Cardinal;
begin
  try
    FileVersion:=GetFileVersion('C:\Bar\Foo.bpl');
    Writeln(Format('%d.%d',[FileVersion shr 16, FileVersion and $FFFF]));
    Readln;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

如果您想检索完整的版本号（包括版本号和内部版本号），您可以使用和[`GetFileVersionInfoSize`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647005%28v=vs.85%29.aspx)WinApi函数。[`VerQueryValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647464%28v=vs.85%29.aspx)[`GetFileVersionInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003%28v=vs.85%29.aspx)

```
function GetFileVersionStr(const AFileName: string): string;
var
  FileName: string;
  LinfoSize: DWORD;
  lpdwHandle: DWORD;
  lpData: Pointer;
  lplpBuffer: PVSFixedFileInfo;
  puLen: DWORD;
begin
  Result := '';
  FileName := AFileName;
  UniqueString(FileName);
  LinfoSize := GetFileVersionInfoSize(PChar(FileName), lpdwHandle);
  if LinfoSize <> 0 then
  begin
    GetMem(lpData, LinfoSize);
    try
      if GetFileVersionInfo(PChar(FileName), lpdwHandle, LinfoSize, lpData) then
        if VerQueryValue(lpData, '\', Pointer(lplpBuffer), puLen) then
          Result := Format('%d.%d.%d.%d', [
            HiWord(lplpBuffer.dwFileVersionMS),
            LoWord(lplpBuffer.dwFileVersionMS),
            HiWord(lplpBuffer.dwFileVersionLS),
            LoWord(lplpBuffer.dwFileVersionLS)]);
    finally
      FreeMem(lpData);
    end;
  end;

end; 
```

# asp.net-mvc-3 - Webgrid 中的下拉列表

> ID：13018632
> 
> 赞同：3
> 
> 时间：2012-10-22T19:44:22.023
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, webgrid, html.dropdownlistfor, html-select

有人可以帮助我如何在我的 webgrid 列中放置一个下拉列表。

我需要将我的下拉列表绑定到模型中的列表。并且需要从列表中为网格中的每个对应记录选择一个项目。

而且我应该能够将 selcetd 值发布到控制器。

我已经在 mvc3 中的几个链接[Dropdownlist propbelm](https://stackoverflow.com/questions/9378208/problems-with-mvc-3-dropdownlist-in-webgrid)和其他几个链接中尝试了解决方案。

我正在粘贴我的示例代码。

模型：

```
public class AllocateToStore
    {
        public IList<OrderLine> FailureAllocations { get; set; }
        public IList<SelectListItem> AllocationStatus
        {
            get
            {
                // code to fetch list.
            }
        }
    }

 public class OrderLine
    {
        public long Id { get; set; }
        public DateTime Date { get; set; }
        public int Status { get; set; }
    } 
```

控制器：

```
public ActionResult AutoAllocate()
        {
// This action will load the view with data.
// Get model data and send it to view.

            return View("Allocated",model);
        }

        [HttpPost]
        public ActionResult ResolveUnallocatedOrders(AllocateToStore coll)
        {
// When user changes the selection in grid and post the page I need to get the selection // here. So that I can update that record.
            return null;
        } 
```

观点是

```
@model AllocateToStore
@{
    ViewBag.Title = "Orders";
}
@{
    var grid = new WebGrid(Model.FailureAllocations, rowsPerPage: 100);
}

@using (Html.BeginForm("ResolveUnallocatedOrders", "OrderProcessing", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    if (Model.FailureAllocations.Any())
    {

    <div>
        @grid.GetHtml(
                columns: grid.Columns(
                    grid.Column(columnName: "Order date", header: "Order Date", format: item => item.Order.Date),
                    grid.Column("dropdown", header: "Resolution", format:
                                                            @<span>
                                                                @{ var index = Guid.NewGuid().ToString(); }
                                                                @Html.Hidden("Status.Index", index)
                                                                @Html.DropDownList("Status[" + index + "].SelectedValue", Model.AllocationStatus)
                                                            </span>
                    )
                ),
                tableStyle: "expandable-table",
                htmlAttributes: new { id = "gridFailureAllocations" }
            )
        <br />
        <input type="submit" value="Resolve" id="resolve-button" />
    </div>
    }

} 
```

谢谢，纳雷什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:50:20.093

以下应该有效：

```
<div>
    @grid.GetHtml(
            columns: grid.Columns(
                grid.Column(columnName: "Date", header: "Order Date"),
                grid.Column("dropdown", header: "Resolution", format:
                    @<span>
                        @{ var index = Guid.NewGuid().ToString(); }
                        @Html.Hidden("FailureAllocations.Index", index)
                        @Html.Hidden("FailureAllocations[" + index + "].Id", (long)item.Id)
                        @Html.DropDownList("FailureAllocations[" + index + "].Status", Model.AllocationStatus)
                    </span>
                )
            ),
            tableStyle: "expandable-table",
            htmlAttributes: new { id = "gridFailureAllocations" }
        )
    <br />
    <input type="submit" value="Resolve" id="resolve-button" />
</div> 
```

然后在您的`ResolveUnallocatedOrders`控制器操作中，您可以使用它`coll.FailureAllocations`来检索相应的值：

```
[HttpPost]
public ActionResult ResolveUnallocatedOrders(AllocateToStore coll)
{
    // coll.FailureAllocations will contain the necessary data
    ...
} 
```

备注：如果您想在 POST 操作中检索其值，您可以为 Order.Date 字段添加一个额外的隐藏字段。

# php - Symfony2 自定义初始化代码在哪里？

> ID：13018633
> 
> 赞同：0
> 
> 时间：2012-10-22T19:44:37.193
> 
> 标签：php, symfony, dependency-injection

假设我有两个服务：

```
get('my_first_service')
get('my_second_service') 
```

我想做这样的事情：

```
$this->get('my_first_service')->doSomething($this->get('my_second_service')); 
```

这是一些必须在项目中任何地方都处于活动状态的初始化代码。据我所知，我有几个选择（这两种服务都来自供应商目录（我自己没有写过它们））：

1.  在 app.php 和/或 app_dev.php 中添加上面的代码（有一些修改）
2.  将上述代码添加到每个控制器操作
3.  以服务作为参数创建一个服务，并在构造函数中添加上述代码

第一个选项似乎有点“不寻常”，因为我没有链接编辑 app.php 文件以获取链接。第二个选项效率太低，因为我需要为数十个操作执行此操作。第三个动作似乎更好，但我仍然需要从某个地方调用此服务才能执行构造函数，对吗？

我觉得我错过了一种可能性......这种初始化代码一定有更好的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:40:54.620

如果你真的想在每一个动作之前执行你的代码，你可以监听事件 kernel.controller。

检查食谱中的[这个例子](http://symfony.com/doc/current/cookbook/event_dispatcher/before_after_filters.html)。

您的侦听器是一项服务，因此您可以在需要时注入您的两个服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:51:26.053

[这看起来与setter injection](http://symfony.com/doc/current/components/dependency_injection/types.html#setter-injection)非常相似。您可以将 doSomething 添加为调用，并将 my_second_service 作为参数。这样，当您获得 first_service 时，将自动调用该方法，并传入正确的参数，并避免您遭受丑陋的黑客攻击。

我假设您已经在配置中定义了服务。

例如在 YAML 中：

```
services:
   my_second_service:
       # ...
   my_first_service:
       class: MyFirstServiceClassName
       calls:
           - [ doSomething, [ @my_second_service ] ] 
```

如果 doSomething 返回一个您需要使用的不同对象，那么它听起来像一个工厂，您也可以对其进行配置。通读[此](http://symfony.com/doc/current/components/dependency_injection/factories.html)。

# mysql - 忽略模型中的模块

> ID：13018635
> 
> 赞同：0
> 
> 时间：2012-10-22T19:44:41.930
> 
> 标签：mysql, ruby-on-rails-3, api, activerecord

我的应用程序中有一些我想用作 api 的控制器。在这个 api 中我需要使用版本控制。

在我`routes.rb`使用这个：

```
require 'api_constraints' 
```

(...)

```
 scope '/:target/:version', :module => :api, :constraints => { :version => /[0-z\.]+/ } , :defaults => { :format => 'json' } do
    scope :module => :v1, :constraints => ApiConstraints.new(:version => 1, :default => true) do
      match '/list' => 'sample#list'
    end
  end 
```

我的`api_constraints.rb`：

```
class ApiConstraints

  def initialize(options)
    @version = options[:version]
    @default = options[:default]
  end

  def matches?(req)
    @default || req.headers['Accept'].include?("application/waytaxi.api.v#{@version}")
  end

  def self.version
    @version
  end

end 
```

在我的`SampleController.rb`：

```
module Api
  module V1
    class SampleController < ApiBaseController

      def list
        render json: Model.find_by_id(params[:id])
      end

    end    
  end
end 
```

`ApiBaseController`：_

```
module Api
  class ApiBaseController < ApplicationController
    before_filter :authenticate
    skip_before_filter :verify_authenticity_token

  private

    def authenticate
      # if params[:target] == "ios"
      #   render :json => {status: 404}
      #   return false        
      # end
    end
  end  
end 
```

问题是：

每当我尝试打电话时，`Model`我都会收到此错误：

```
uninitialized constant Api::V1::SampleController::Model 
```

如果我使用：`::Model`我收到此错误：

```
uninitialized constant Model 
```

是的，我的数据库中确实有这个模型。如果我`Model.all`在外面使用，`SampleController`我会得到对象。

PS：我正在使用rails 3.2.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:36:44.737

发现了我的问题。

我的模型是复数形式，在我的控制器上我用单数形式调用它

# javascript - javascript按钮onclick不会触发

> ID：13018636
> 
> 赞同：1
> 
> 时间：2012-10-22T19:44:43.590
> 
> 标签：javascript, html, button, onclick

所以我完成了这个简单的任务，但我不明白为什么这不起作用？同一个人可以看到并告诉我吗？我看到问题是按钮没有调出功能，但为什么？

```
<html>
<head>
    <title>Task count</title>
    <script>
        var over21 = 6.19;
        var under21 = 5.19;

        // Getting data from a user connecting variables with textboxes by ID
        var age = document.getElementById('age');
        var hours = document.getElementById('hours');

        // function wich does all of the calculation
        function magic(){    
            //cheking if he is under or over 21 
            if(age < 21){
                alert("You will make " + (age*under21));
            }else{
                alert("You will make " + (age*over21));                            
            };
        };

        // function that does everything and is connected to the button
        function myFunction(){
            // Validation checking that entered number is not more than 150 
            // And also if age is correct
            if((hours < 150 && hours > 0) && (age < 150 && age > 12)){
                magic();
            }else{
                alert("Wrong!");
            };
        };
  </script>
</head>
<body>
    <label>Enter your age.(12-150)</label>
    <input type="text" class="textBox" id="age"><br>
    <label>Enter how long will you work.(1-150)</label>
    <input type="text" class="textBox" id="hours"><br>
    <button onclick="myFunction()" >How much will i make ?</button>
</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:46:52.030

```
var age = document.getElementById('age').value;
var hours = document.getElementById('hours').value; 
```

你得到的 HTML 元素对象不是它们包含的“值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:55:50.743

我建议不要使用这么多的全局变量。

移动：

```
var age = document.getElementById('age');
var hours = document.getElementById('hours'); 
```

进入`myFunction()`.

然后你需要做这两个：

```
var age = parseInt(document.getElementById('age').value);
var hours = parseInt(document.getElementById('hours').value); 
```

我们使用`parseInt`将值作为字符串并将其转换为整数值。

由于`age`和`hours`现在定义在 中`myFunction`，您需要传递`age`给`magic()`

```
 var over21 = 6.19;
    var under21 = 5.19;

    // function wich does all of the calculation
    function magic(age){

      //cheking if he is under or over 21 
       if(age < 21){
             alert("You will make " + (age*under21));
       }else{
             alert("You will make " + (age*over21));                            
       };
    };
    // function that does everything and is connected to the button
    function myFunction(){

    var age = parseInt(document.getElementById('age').value);
    var hours = parseInt(document.getElementById('hours').value);
     // Validation checking that entered number is not more than 150 // And also if age is correct
     console.log(age + " : " + hours)   
        if((hours < 150 && hours > 0) && (age < 150 && age > 12)){
           magic(age);
        }else{
            alert("Wrong!");
        };
    }; 
```

**另外**，如果你想要 (1-150)，你需要修改这个`if`语句：

```
if((hours < 150 && hours > 0) && (age < 150 && age > 12)){ ... } 
```

到：

```
if((hours <= 150 && hours > 0) && (age <= 150 && age > 12)){ ... } 
```

**最后**，我相信函数中的数学可能不正确`magic()`：

```
function magic(age, hours){

  //cheking if he is under or over 21 
   if(age < 21){
         alert("You will make " + (hours*under21));
   }else{
         alert("You will make " + (hours*over21));                            
   };
}; 
```

我相信你想要`hours*under21`和`hours*over21`。请注意，`hours`现在也作为参数传入。

**[例子](http://jsfiddle.net/J8Tde/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:47:37.827

在`getElementById`您尝试获取的元素甚至存在之前运行调用。

您可以将它们移动到函数内部，也可以将它们移动`<script>`到`<body>`.

然后，要访问值本身，请使用`age.value`and `hours.value`。您还应该运行它们`parseInt(...,10)`以确保它们是数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:58:46.677

如果这是代码，我可以发现 3 个错误：

1.  您在加载 dom 之前访问它，并且只有一次，请尝试在需要时分配 var。
2.  您正在为 var 分配 dom 对象而不是它们的值，请使用 getElementById("mycoolid").value
3.  您没有将类型分配给按钮元素，不同的浏览器为此属性分配不同的默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T20:02:12.417

您设置年龄和小时变量的代码仅运行一次，因此它们是这些文本框的空/默认值。您应该在函数范围之外声明它们，然后在“myFunction”函数中重新设置它们。或者，您只能在“myFunction”函数中声明/设置它们，然后将它们作为参数传递给“magic”函数。最后，您的脚本应该看起来像这样：

```
<html>
<head>
    <title>Task count</title>
    <script>
        var over21 = 6.19;
        var under21 = 5.19;

        // function wich does all of the calculation
        function magic(age, hours){    
            //cheking if he is under or over 21 
            if(age < 21){
                alert("You will make " + (age*under21));
            }else{
                alert("You will make " + (age*over21));                            
            };
        };

        // function that does everything and is connected to the button
        function myFunction(){
            // Getting data from a user connecting variables with textboxes by ID
            var age = document.getElementById('age').value;
            var hours = document.getElementById('hours').value;

            // Validation checking that entered number is not more than 150 
            // And also if age is correct
            if((hours < 150 && hours > 0) && (age < 150 && age > 12)){
                magic(age, hours);
            }else{
                alert("Wrong!");
            };
        };
  </script>
</head>
<body>
    <label>Enter your age.(12-150)</label>
    <input type="text" class="textBox" id="age"><br>
    <label>Enter how long will you work.(1-150)</label>
    <input type="text" class="textBox" id="hours"><br>
    <button onclick="myFunction()" >How much will i make ?</button>
</body>
</html>​ 
```

作为附加说明，您将年龄乘以 21 岁以下或 21 岁以上。我很确定您想将小时数乘以 under21 或 over21。

# delphi - Delphi中数组的幂集

> ID：13018641
> 
> 赞同：8
> 
> 时间：2012-10-22T19:44:48.483
> 
> 标签：delphi, set, combinations

我正在尝试编写一个函数，该函数将在输入上获取一个数组并返回数组数组，其中包含输入数组的所有可能子集（没有空元素的幂集）。例如对于输入：`[1, 2, 3]`结果将是`[[1], [2], [3], [1, 2], [1, 3], [2, 3], [1, 2, 3]]`.

这个函数在 python 中完成了这项工作：

```
def list_powerset(lst):
    result = [[]]
    for x in lst:
        result += [subset + [x] for subset in result]
    result.pop(0)
    return result 
```

但我正在寻找在 Delphi 中实现它。这有可能以这种方式完成还是我应该寻找其他东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:54:33.797

```
type
  TIdArray = array of Integer;
  TPowerSet = array of TIdArray;

function PowerSet(Ids: TIdArray): TPowerSet;
// Implementation loosely based on the explanation on
// http://www.mathsisfun.com/sets/power-set.html
var
  TotalCombinations: Integer;
  TotalItems: Integer;
  Combination: Integer;
  SourceItem: Integer;
  ResultItem: Integer;
  Bit, Bits: Integer;
begin
  TotalItems := Length(Ids);

  // Total number of combination for array of n items = 2 ^ n.
  TotalCombinations := 1 shl TotalItems;

  SetLength(Result, TotalCombinations);

  for Combination := 0 to TotalCombinations - 1 do
  begin
    // The Combination variable contains a bitmask that tells us which items
    // to take from the array to construct the current combination.
    // Disadvantage is that because of this method, the input array may contain
    // at most 32 items.

    // Count the number of bits set in Combination. This is the number of items
    // we need to allocate for this combination.
    Bits := 0;
    for Bit := 0 to TotalItems - 1 do
      if Combination and (1 shl Bit) <> 0 then
        Inc(Bits);

    // Allocate the items.
    SetLength(Result[Combination], Bits);

    // Copy the right items to the current result item.
    ResultItem := 0;

    for SourceItem := 0 to TotalItems - 1 do
      if Combination and (1 shl SourceItem) <> 0 then
      begin
        Result[Combination][ResultItem] := Ids[SourceItem];
        Inc(ResultItem);
      end;
  end;

end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:13:51.260

我的另一个答案是我不久前在 Delphi 2007 中需要时创建的一段代码。为了使其更通用，您可以使用泛型。现在我以前实际上没有使用过泛型，但它似乎是这样工作的。我必须承认我不得不在[这里偷看](http://interactiveasp.net/blogs/spgilmore/archive/2009/12/23/using-generics-in-delphi.aspx)以检查语法。如果有更简单的方法，我希望其他人可以发布它。

除了输入参数的名称外，代码实际上并没有改变。（是的，泛型！）

```
type
  TGenericArray<T> = array of T;
  TGenericPowerSet<T> = array of array of T;

  TPowerSet<T> = class(TObject)
  public
    class function Get(a: TGenericArray<T>): TGenericPowerSet<T>;
  end;

class function TPowerSet<T>.Get(a: TGenericArray<T>): TGenericPowerSet<T>;
var
  TotalCombinations: Integer;
  TotalItems: Integer;
  Combination: Integer;
  SourceItem: Integer;
  ResultItemIncluded: Integer;
  Bit, Bits: Integer;
begin
  TotalItems := Length(a);

  // Total number of combination for array of n items = 2 ^ n.
  TotalCombinations := 1 shl TotalItems;

  SetLength(Result, TotalCombinations);

  for Combination := 0 to TotalCombinations - 1 do
  begin
    // The Combination variable contains a bitmask that tells us which items
    // to take from the array to construct the current combination.
    // Disadvantage is that because of this method, the input array may contain
    // at most 32 items.

    // Count the number of bits set in Combination. This is the number of items
    // we need to allocate for this combination.
    Bits := 0;
    for Bit := 0 to TotalItems - 1 do
      if Combination and (1 shl Bit) <> 0 then
        Inc(Bits);

    // Allocate the items.
    SetLength(Result[Combination], Bits);

    // Copy the right items to the current result item.
    ResultItemIncluded := 0;

    for SourceItem := 0 to TotalItems - 1 do
      if Combination and (1 shl SourceItem) <> 0 then
      begin
        Result[Combination][ResultItemIncluded] := a[SourceItem];
        Inc(ResultItemIncluded);
      end;
  end;

end; 
```

并像这样使用：

```
var
  p: TPowerSet<String>;
  a: TGenericArray<String>;
  r: TGenericPowerSet<String>;
begin
  SetLength(a, 2);
  a[0] := 'aaa';
  a[1] := 'bbb';
  r := p.Get(a);

  ShowMessage(IntToStr(Length(r)));
  ShowMessage(r[1][0]); 
```

# c# - Mac 上的 Jay 解析器生成器生成 Java 而不是 C#

> ID：13018651
> 
> 赞同：1
> 
> 时间：2012-10-22T19:45:51.807
> 
> 标签：c#, java, parser-generator, jay-parser-generator

我正在尝试运行 Jay 解析器生成器（使用 jar 文件）。我这样运行它：

```
Java -jar Jay.jar -cv < ./../jay/skeleton.cs parser.jay > jay-tmp.out && mv jay-tmp.out parser.cs 
```

这在我的 Windows 机器上运行良好。但是，当在我的 Mac OSX 机器上运行它时，我不断获得 Java 源文件而不是请求的 C# 源文件。有想法该怎么解决这个吗？

# c++ - 从文件分段错误中读取字符串（核心转储）

> ID：13018652
> 
> 赞同：0
> 
> 时间：2012-10-22T19:45:52.840
> 
> 标签：c++, string, constructor, stream

```
class BPP
{
    unsigned            n;                  /* nº de instancias */
    vector<string>      nombre_instancia;   /* nombre de la instancia*/ 
```

在构造函数中，当以下情况出现分段错误（核心转储）时：

```
file1.open(fich1);
    if (file1.is_open()){
        file1 >> (unsigned &) n;
        for (unsigned k = 0 ; k < n ; ++k){
            getline(file1, nombre_instancia[k]); #gives the segmentation fault 
```

fich1 中的前 2 行是：

```
10
 P_0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:48:26.860

您需要先用元素填充向量，*然后再*通过[`vector::operator[]`](http://en.cppreference.com/w/cpp/container/vector/operator_at). 在以下代码中，向量为空：

```
for (unsigned k = 0 ; k < n ; ++k){
    getline(file1, nombre_instancia[k]); 
```

所以调用`nombre_instancia[k]`是越界的。您可以使用[`vector::resize()`](http://en.cppreference.com/w/cpp/container/vector/resize)创建元素：

```
if (file >> n) // Ensure 'n' correctly assigned.
{
    nombre_instancia.resize(n);
    for (unsigned k = 0 ; k < n ; ++k){
        getline(file1, nombre_instancia[k]);
} 
```

另一种方法是在[`vector::push_back()`](http://en.cppreference.com/w/cpp/container/vector/push_back)不预先知道元素数量的情况下使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:48:54.890

我猜您没有将 nombre_instancia 的大小调整为超出其原始大小 0。试试这个：

```
 file1 >>  n;
  nombre_instancia.resize(n);     
    for (unsigned k = 0 ; k < n ; ++k){
        getline(file1, nombre_instancia[k]); #gives the segmentation fault 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:51:54.923

如果你想使用 getline，我认为你需要在向量中保留空间。通过给出 nombre_instancia[k]，程序有一个未初始化的向量。使用保留，或 push_back(null)

# php - 如何让我的网站在提交时从我的地址向某人发送电子邮件？

> ID：13018653
> 
> 赞同：0
> 
> 时间：2012-10-22T19:45:52.740
> 
> 标签：php, email

网站我希望我的网站在客户单击提交按钮时自动生成发送给客户的电子邮件。

我添加了以下 php：

```
$subject = "Thank You";
$message = "Thank you .........";
$from = "info@mywebsite.com";
$headers = "From:" . $from;
mail($email, $subject, $message, $headers); 
```

该变量`$email`是之前定义的。我还编辑了我*`php.ini`*的内容以包括以下内容：

```
SMTP = smtp.mywebsite.com
smtp_port = 25
username = info@mywebsite.com
password = password
sendmail_from = info@mywebsites.com 
```

显然我做得还不够。我还需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T14:06:01.597

这个问题与[Sending email with PHP from an SMTP server重复](https://stackoverflow.com/questions/14456673/sending-email-with-php-from-smtp-server)

PHP 邮件功能与 smtp 有一些问题。[（不支持 smtp 用户名和密码）使用Swift mailer](http://swiftmailer.org/)、[PHPMailer](https://github.com/PHPMailer/PHPMailer)等第三方邮件库...

# ruby-on-rails - Rails 模型数据转换

> ID：13018654
> 
> 赞同：0
> 
> 时间：2012-10-22T19:45:55.913
> 
> 标签：ruby-on-rails

我是 Rails 的新手，不想在 Excel 中制作同样乏味的报告，而是创建一个营销分析仪表板。

我有一个用户模型，其中包含 created_at、marketing_source、购买和收入。

我想在 sql 中做的是

```
select marketing_source, weekofyear(created_at), count(id), sum(revenue) 
from User 
where weekofyear(created_at) between # and #
group by marketing_source, weekofyear(created_at) 
```

然后将其作为表格打印到我的页面。

我只是不确定在哪里以及如何进行转换。我把这个通过

```
sql.execute 
```

在控制器代码中？我应该创建一个 rake 任务来制作一个 csv，然后使用 javascript 来读取 csv 并打印出表格吗？

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:46:33.227

欢迎来到轨道

如果您是 Rails 新手，请查看[railscasts.com](http://railscasts.com)和[http://guides.rubyonrails.org/](http://guides.rubyonrails.org/)

在 Rails 中，您不必编写这样的 sql 语句。

我假设您已完成数据库迁移并在数据库中拥有所有必要的列

在您的 users_controller 中，我认为这可以满足您的要求。

```
def index
 @users = User.where
 (["created_at >= ? AND created_at <= ?", yesterday.beginning_of_day, yesterday.end_of_day]).
 group("marketing_source")
end 
```

然后在你对应的视图/views/users/index.html.erb

```
<table>
  <tr>
    <th>Name</th>
    <th>revenue</th>
    <th>Marketing source</th>
  </tr>

<% @users.each do |user| %>
  <tr>
    <td><%=h user.name %></td>
    <td><%=h user.revenue %></td>
    <td><%=h user.marketing_source %></td>
    <td><%= link_to 'Show', user %></td>
    <td><%= link_to 'Edit', edit_user_path(user) %></td>
    <td><%= link_to 'Destroy', user, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table> 
```

# perl - Perl 正则表达式标记整个术语

> ID：13018656
> 
> 赞同：-2
> 
> 时间：2012-10-22T19:46:05.773
> 
> 标签：perl

我正在尝试使用注释列表来标记术语。我特别想实现的是，如果 Perl 正则表达式从句子中识别出一个术语，它应该用标签标记这个术语。

例如：

```
This drug has adverse effect on Lymphocytes, Lymphnodes, Lymph and pre-lymphocytes. 
```

我的列表中有 Lymph 这个词，我正在尝试以下脚本。

```
open IN, "clean_cells.txt" or die "import file absent";
@array=<IN>;
foreach $words(@array)  
{
    @cells=split/\t/,$words;
    $value=$cells[0];
    $replace=$cells[1];
    foreach my $fp (glob("$Directory/*.txt")) 
    {
        @id=split('/',$fp);
        $id[1]=~s/.txt//ig; 
        $Pub=$id[1];
        open FILE, "<",$fp or die "Can't open $fp: $!";
        open OUT, ">C:\\Users\\Desktop\\TM\\Files\\$Pub" or die "Check      output status";
        while(<FILE>)
        {
            chomp $_;
            $line=$_;
            s/\b[\w\-]*$value[\w\-]*\b/<$replace>$&<\\$replace>/gi;
            # $string[$i]=$line;
            # while(($string[$i]=~m/\Q$value\E/i)||                                      ($string[$i]=~m/\Q$value(\w+)\E/i)||($string[$i]=~m/\Q(\w+)$value\E/i))
            # # if ($string[$i] =~ m/\b\w*$value\w*\b/i)
            # {
                # $value=~s/$value/<$replace>$value<\$replace>/i;
            # }
            print OUT "$line\n";
        }
        last;

    }   
    last;
} 
```

我希望最后一句话应该是这样的：

```
This drug has adverse effect on tag Lymphocytes tag, tag Lymphnodes tag, tag Lymph tag and tag pre-lymphocytes tag. 
```

tag：代表上面脚本中的$replace。

该程序标记基本词 lymoh 而不是整个术语 Lymphocytes, pre-lymphocytes。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:32:35.473

你需要保持你的话。棘手的部分是确定哪些字符可以组成单词。一种更简单的方法（但可能不那么精确）是确定分隔符的组成部分。例如，您可以使用`\S+`来匹配连续的非空白字符：

```
use strict;
use warnings;

while (<DATA>) {
    for (split /(\S+)/) {    # The parens make the split keep the delimiters
        $_ = "<tag>$_</tag>" if /lymph/i;
        print;
    }
}

__DATA__
Lymphocytes, Lymphnodes, Lymph and pre-lymphocytes. 
```

**输出：**

```
<tag>Lymphocytes,</tag> <tag>Lymphnodes,</tag> <tag>Lymph</tag> and <tag>pre-lymphocytes.</tag> 
```

请注意，这是一种非破坏性方法，因为拆分正则表达式中的括号将捕获并返回字符串的所有部分。

这个简单的代码将保留您的空格，尽管如您所见，它会将逗号和其他此类分隔符放入您的标签中。这可以通过使用另一个字符类来解决，例如`[^\s,.!?]+`（不是空格、逗号、句点、感叹号或问号）。

如果替换`<DATA>`为`<>`，则可以将此脚本与重定向一起使用，并跳过有关打开输入和输出文件的代码。

```
perl script.pl input > output 
```

我个人更喜欢这样的功能，而不是硬编码的文件路径，这通常是 *nix 程序的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:01:01.777

尝试这样做（脚本重写）：

```
use strict; use warnings;

my $pub = "SOMETHING I HAVE TO CHANGE FOR THE SCRIPT TO WORK";
my $fp = "clean_cells.txt";
my $of = "C:\\Users\\Hrishi\\Desktop\\TM\\Files\\$Pub";
my $replace = 'tag';
my $word = "Lymph";

open FILE, "<", $fp or die "Can't open $fp: $!";
open OUT,  ">", $of or die "Check output status";

while (<FILE>) {
    chomp;
    s/\b[\w\-]*$word[\w\-]*\b/<$replace>$&<\\$replace>/gi;
    print OUT $_; print;
} 
```

**编辑**：

*   `\b`表示[词边界](http://www.regular-expressions.info/wordboundaries.html)
*   `$&`表示*最后一个正则表达式的完全匹配部分*
*   `[\w\-]`是一类字符：*字母数字*+`_`和`-`
*   最后的`gi`修饰符分别表示*所有*出现和*不区分大小写*

# java - 从 SoapMessage 对象获取方法签名、用户名和密码

> ID：13018659
> 
> 赞同：0
> 
> 时间：2012-10-22T19:46:08.870
> 
> 标签：java, xml, soap

我有一个包含肥皂消息的 SoapMessage (javax.xml.soap.SOAPMessage) 对象类型。我会在那个肥皂中检索被调用操作的名称。

我尝试了 getChildElements 或 getChildNodes，但我不喜欢这种方式，因为我必须迭代并检查节点何时等于 Node.ElementType。

我可以以某种方式使用像 getMethod() 或 getMethodSignature() 这样的方法或方法吗？

并且有一种方法可以从该类型的对象中以简单的方式（getUsername、getPassword）从身份验证令牌中获取用户名和密码？

建议？

谢谢

# mysql - 在 MySQL Workbench 中导出数据库

> ID：13018663
> 
> 赞同：2
> 
> 时间：2012-10-22T19:46:22.653
> 
> 标签：mysql, database, backup, mysql-workbench

我想在 MySQL Workbench 中导出我的数据库，但我只希望 INSERT 语句出现在文本文件中。但是我得到了一堆我不知道是为了什么的东西。我怎样才能删除这样的东西：

```
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T12:40:12.187

当您导出数据库时，这些注释行定义了您的数据库、表和列以及数据库的其他属性的编码。

如果您在导出后，则通过 phpmyadmin 或 MySQL Work Bench 或 SQLYog 再次导入您的数据库。它将忽略所有这些注释值。但是如果你想删除那么你需要努力并通过notepad plus plus轻松删除。

在 Notepad Plus Plus 中，按 Ctrl+F，单击替换。选择在整个文件中重复的那些值，而不是只需单击一下空白即可替换。然后您将手动清除文件....

谢谢。

# php - 联系表。我如何获得姓名和电子邮件？

> ID：13018664
> 
> 赞同：0
> 
> 时间：2012-10-22T19:46:22.667
> 
> 标签：php, forms, contact, contact-form

这是我第一次尝试制作联系表。而且我遇到了一些问题它的工作原理，我收到了电子邮件，但我没有在电子邮件中的姓名字段中获得姓名。

HTML：

```
<form method="post" name="contactform" action="scripts/contact.php">
<h3>Name</h3>
<input type="text" name="name">
<h3>Email Address</h3>
<input type="text" name="email">
<h3>Message</h3>
<textarea name="message"></textarea>
<br/><input class="submit" type="submit" value="Send Form">
</form> 
```

PHP：

```
<?php
$to = "name@domane.com";
$subject = "Contact Us";
$name = $_POST['name'];
$email = $_POST['email'] ;
$message = $_POST['message'] ;
$headers = "From: $email";
$sent = mail($to, $subject, $message, $name, $headers) ;
if($sent)
{print "Your mail was sent successfully"; }
else
{print "One of the field are not filled as requirred"; }
?> 
```

**$name**是我的问题。我有它，电子邮件来自 hostmaster@domane.com，如果我删除它，一切正常。但我不想把名字发给我。如何？还是我应该完全不同？

此外，如果您将所有字段留空，“用户”不会收到任何错误消息，并且会向我发送一封空白电子邮件。

希望您能够帮助我。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:52:02.677

迈克尔·伯科夫斯基是正确的。您需要做的是将名称添加到您的邮件正文（不是输入`name=`属性的意义上，而是电子邮件的正文）。

像这样的东西：

```
<?php
$to = "name@domane.com";
$subject = "Contact Us";
$name = $_POST['name'];
$email = $_POST['email'] ;
$message = $_POST['message'] ;
$headers = "From: $email";

$body = "Name: $name\r\n";
$body .= "Message: $message";

$sent = mail($to, $subject, $body, $headers) ;
if($sent)
{print "Your mail was sent successfully"; }
else
{print "One of the field are not filled as requirred"; }
?> 
```

**修改：**

HTML：

```
<form method="post" name="contactform" action="scripts/contact.php">
<label for="name">Name</label>
<input type="text" name="name" id="name" />
<label for="email">Email Address</label>
<input type="text" name="email" id="email" />
<label for="message">Message</label>
<textarea name="message" id="message"></textarea>
<br/><input class="submit" type="submit" value="Send Form" />
</form> 
```

PHP：

```
<?php
$name = $_POST['name'];
$email = $_POST['email'] ;
$message = $_POST['message'] ;

$body = "Name: $name\r\n";
$body .= "Message: $message";

$to = "name@domane.com";
$from = "automailer@mydomainname.com (Website Automailer)";
$subject = "Contact Us";
$headers =  "From: $from\r\n" .
        "Reply-To: $email ($name)";
$sent = mail($to, $subject, $body, $headers) ;
if($sent) { echo "Your mail was sent successfully"; }
else { echo "One of the field are not filled as requirred"; }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:56:24.903

您应该阅读[`mail`](http://php.net/mail)php.net 上的函数文档。

看一下函数签名：

```
bool mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] ) 
```

现在您将`$name`作为 " `$additional_headers`" 参数放置。您应该在参数中传递`$name`任何额外的相关数据`$message`。

话虽如此，这是发送消息的正确代码：

```
$sent = mail($to, $subject, "A message from $name: $message", $headers); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T19:52:14.983

您应该阅读更多关于如何构建电子邮件的信息。除了将用户定义的消息放在那里，您可能还想指定一些电子邮件标题，包含更漂亮`FROM:`的标题等等......

# css - 如何使用最新的 Bootstrap 和 SASS 升级 Web 项目

> ID：13018665
> 
> 赞同：0
> 
> 时间：2012-10-22T19:46:23.957
> 
> 标签：css, twitter-bootstrap, sass

我正在开发一个 ASP .NET Web 项目，它使用：jQuery、jQuery UI、重置/规范化 css 样式表。大部分 CSS 都是废话，所以我要重写它 + 我会有预算 :)

我遇到了两个我想学习的奇特解决方案：

*   [SASS](http://sass-lang.com/)
*   [引导程序](http://twitter.github.com/bootstrap/index.html)

我想知道，如何将我现有的应用程序与这些解决方案“混合”。当谈到 SASS 时，在我看来很明显 - 只需重写 CSS 并为新的干净元 CSS 感到自豪，但我不确定 Bootstrap。如果我不想更改网站的布局，它有什么优势？

另一件事：在我的网站中包含 Bootstrap / SASS 时，我会遇到可能的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:43:36.303

Twitter Bootstrap (TBS) 是一个 CSS 框架，其最初目的是用于网站和 Web 应用程序原型。因此，如果您想从头开始使用非常彻底且样式良好的 CSS，那么 bootstrap 非常棒。

如果您想保留现有 UI 的大部分内容，Twitter Bootstrap 不一定是正确的解决方案，特别是如果您现有的 UI 与其脚手架、网格系统和其 UI 样式的其他元素（表单输入、按钮）不能很好地匹配，排版等）。你会发现自己不得不重写很多框架的属性，这有悖于目的。

正如@Nathron 提到的，如果您尝试将 TBS 与现有代码混合使用，您可能会遇到冲突。创建仅包含您想要的框架元素的 TBS 自定义构建将是那里的最佳方法：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)。

关于 SASS，如果您想与 TBS 结合使用，请查看[https://github.com/jlong​​/](https://github.com/jlong/sass-twitter-bootstrap) sass-twitter-bootstrap 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:54:03.113

来自他们的网站：Boostrap JS 用于“用于工具提示、弹出框、模式等的交互式组件”。因此，如果您使用其中任何一个，请确保您没有冲突的 JS 函数。

如果您的类名与 Bootstrap 使用的类名相同，您可能会遇到 CSS 问题。其中许多像“darkwell”一样晦涩难懂，但其中一些像“dropdown”一样常见，因此您只需要留意即可。

最简单的查看方法是下载并使用它:)

# sql-server - 从 SQL Server 将数据加载到列表视图控件

> ID：13018666
> 
> 赞同：0
> 
> 时间：2012-10-22T19:46:25.143
> 
> 标签：sql-server, vb.net

我正在尝试将 SQL Server 中的数据检索到我的表单中。我正在尝试使用以下代码。当我运行它时，我得到第一个项目或行，但我无法将其余项目加载到我的 listview 中。有人可以帮助解决我的问题吗？

```
Sub GetInvoiceDetails()
    Dim Inv As New petClass
    Dim dt As DataTable = Inv.GetInvoiceDetailsbyNo(txtInvoiceNo.Text)
    If dt.Rows.Count > 0 Then
        For Each row In dt.Rows
            srno += 1
            Dim lstitem = Lstview.Items.Add(srno)
            lstitem.SubItems.Add(dt.Rows(0).Item("ItemName").ToString)
            lstitem.SubItems.Add(dt.Rows(0).Item("SellingPrice".ToString)).ToString()
        Next
    End If
    'clearcontrols
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:50:13.577

我看到的第一件事是您仅引用数据表的第一行。尝试这个：

```
Sub GetInvoiceDetails()
    Dim Inv As New petClass
    Dim dt As DataTable = Inv.GetInvoiceDetailsbyNo(txtInvoiceNo.Text)
    If dt.Rows.Count > 0 Then
        For Each row In dt.Rows
            srno += 1
            Dim lstitem = Lstview.Items.Add(srno)
            lstitem.SubItems.Add(row.Items("ItemName").ToString)
            lstitem.SubItems.Add(row.Items("SellingPrice".ToString)).ToString()
        Next
    End If
    'clearcontrols
End Sub 
```

接下来，我对您在这里尝试做的事情感到有些困惑：

```
 lstitem.SubItems.Add(row.Items("SellingPrice".ToString)).ToString() 
```

你不应该需要第二个 ToString()，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:51:08.590

您始终将 DataTable 中的第一行与`dt.Rows(0)`.

反而：

```
For Each row As DataRow In dt.Rows
    srno += 1
    Dim lstitem = Lstview.Items.Add(srno)
    lstitem.SubItems.Add(row.Field(of String)("ItemName"))
    lstitem.SubItems.Add(row.Field(Of String)("SellingPrice"))
Next 
```

# iphone - 在 Core Data 中保存一对多关系的问题

> ID：13018667
> 
> 赞同：0
> 
> 时间：2012-10-22T19:46:30.743
> 
> 标签：iphone, objective-c, ios, core-data

我一直在尝试将 Core Data 实现到我的应用程序中，并且最近尝试设置一对多关系。我在下面设置关系

```
NSMutableSet *todoObjects = [[NSMutableSet alloc] init];
for (int i = 0; i < [allTodolistsData count]; i++) {
    NSDictionary *dictionary = [allTodolistsData objectAtIndex:i];
    TodolistObject *tempTodolist = [[TodolistObject alloc] initWithDict:dictionary];
    [todoObjects addObject:[Todolists newTodolist:tempTodolist withContext:appDelegate.context]];
    [tempTodolist release];
}

[project setTodolists:todoObjects]; 
```

项目变量是`NSManagedObject`，并且该`setTodolists:`方法是自动生成的以设置项目的待办事项列表。由于该项目与待办事项列表集具有一对多关系，因此我传入了一个 NSMutableSet。但是，当我这样做时，我收到以下错误：

**-[__NSArrayM isEqualToSet:]：无法识别的选择器发送到实例 0xa325d60**

我似乎找不到遇到这个问题的人。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:06:53.213

您必须从 NSManagedObject 获取关系的可变集并将新对象添加到其中，因此：

```
NSMutableSet *todoObjects = (NSMutableSet*)[project mutableSetValueForKey:@"todoLists"];

// Switch your for loop to use fast-enumaration
for (NSDictionary *dictionary in allTodolistsData) {
    TodolistObject *tempTodolist = [[TodolistObject alloc] initWithDict:dictionary];
    [todoObjects addObject:[Todolists newTodolist:tempTodolist withContext:appDelegate.context]];
    [tempTodolist release];
}

// Save project in the same context where you created the object 
```

# jquery-ui - Jquery UI 自动完成。如何使用 innerHTML 在 div 中写入结果？

> ID：13018669
> 
> 赞同：3
> 
> 时间：2012-10-22T19:46:37.457
> 
> 标签：jquery-ui, html, autocomplete, innerhtml

我的网站中有一个自动完成字段。我只想在 -div- 标记内显示结果，而不是插件本机打开的弹出窗口。

我已经在其他帖子中搜索过解决方案，但他们所做的是改变“弹出”窗口的位置，我想要的是用结果替换 -div- 的内容，而不是放置弹出窗口超过它。

任何建议将不胜感激。

这是我拥有的代码：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
</head>
<body>

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</body>
</html> 
```

.

![例子](../Images/336e06e7954372a3bd27dbef94a4192f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T21:58:04.950

正如 j08691 所说，您必须处理小部件的[打开](http://api.jqueryui.com/autocomplete/#event-open)事件。但是，由于您还想选择`#results`元素中的项目，因此复制它们是不够的。

我建议您`#results`改为在元素下重新设置整个自动完成菜单，并将其[位置](https://developer.mozilla.org/en-US/docs/CSS/position)样式属性重置为`static`，使其保持原位：

```
$("#tags").autocomplete({
    source: availableTags,
    open: function() {
        $(this).autocomplete("widget")
               .appendTo("#results")
               .css("position", "static");
    }
}); 
```

[您可以在fiddle 的此更新](http://jsfiddle.net/BdZPX/7/)中看到结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T20:04:26.810

**[在这个jsFiddle 示例](http://jsfiddle.net/j08691/BdZPX/6/)**中使用自动完成的打开事件。

```
 open: function(e, ui) {
        var list = '';
        var results = $('ul.ui-autocomplete.ui-widget-content a');
        results.each(function() {
            list += $(this).html() + '<br />';
        });
        $('#results').html(list);
    } 
```

# wpf - 使用 TextDecorations 下划线的 WPF 单选按钮样式

> ID：13018677
> 
> 赞同：1
> 
> 时间：2012-10-22T19:46:55.383
> 
> 标签：wpf, styles, radio-button, underline

我想更改 WPF RadioButton 的样式，以便不显示 Bullet，当 IsSelected 为 true 时文本为粗体，当 IsSelected 为 false 时，文本不加粗，带下划线，光标为手。我几乎可以使用它，但我无法在文本中加下划线。到目前为止，这是我的 XAML。

```
<Style TargetType="{x:Type RadioButton}">
  <Setter Property="Foreground" Value="DarkBlue" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type RadioButton}">
        <Border SnapsToDevicePixels="True">
          <ContentPresenter VerticalAlighment="Center" />
        </Border>
        <ControlTemplate.Triggers>
          <Trigger Property="IsChecked" Value="True">
            <Setter Property="TextBlock.FontWeight" Value="UltraBold" />
          </Trigger>
          <Trigger Property="IsChecked" Value="False">
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="TextBlock.TextDecorations" Value="Underline" />
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

任何人都可以提供任何可以解释为什么当 IsSelected 为 False 时 RadioButton 的文本没有下划线的建议，我们将不胜感激。

编辑：好的，根据提供的链接，我能够将样式更改为以下内容。

```
<Style TargetType="{x:Type RadioButton}">
  <Setter Property="Foreground" Value="DarkBlue" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type RadioButton}">
        <TextBlock x:Name="TextBlock" Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type RadioButton}}, Path=Content}" />
        <ControlTemplate.Triggers>
          <Trigger Property="IsChecked" Value="True">
            <Setter Property="TextBlock.FontWeight" Value="UltraBold" />
          </Trigger>
          <Trigger Property="IsChecked" Value="False">
            <Setter Property="Cursor" Value="Hand" />
            <Setter TargetName="TextBlock" Property="TextDecorations" Value="Underline" />
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

然后使用具有这种样式的 RadioButton。

```
<RadioButton Content"New" IsChecked="True" />
<RadioButton Content="Filter" /> 
```

现在显示两个没有 Bullet 的 RadioButton，当 IsSelected 为真时，其内容为粗体，当 IsSelected 为假时，它不加粗，加下划线并显示手形光标。

我现在唯一的评论是，如果我将 TextBlock 的 Text 属性绑定到 RadioButton 的 Content 属性，如果 RadioButton 的内容不是字符串，那会失败吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:20:48.877

是的，它会失败，因为内容不会显示，相反，您会得到`ToString()`内容的结果，但是由于您想要为您的收音机添加下划线/粗体文本，这似乎正是您想要的？

# javascript - JavaScript setInterval 只会运行一次 jQuery

> ID：13018683
> 
> 赞同：0
> 
> 时间：2012-10-22T19:47:24.990
> 
> 标签：javascript, jquery

我在这里有一个小提琴：http: [//jsfiddle.net/justinboyd101/4nrbb/](http://jsfiddle.net/justinboyd101/4nrbb/)

这是我的问题：

为什么我的 console.log 函数和将 html 添加到 div 的语句正常工作，而它没有在我的其他循环 jQuery 函数上运行？

欲了解更多详情，请阅读以下内容：

我正在尝试使用 setInterval 创建一个新闻行情。动画应该从屏幕右侧滑入文本，然后将内容向下推，然后重置回其原始位置。由于某种原因，它只会运行一次动画。我已经设置了一个简单的函数，interval 将从数组中收集信息并将其添加到一个空的 div 中。

如果您不想使用 jsfiddle，这是我的代码：

HTML

```
<div id="newsValueText" class="newsValueText floatLeft darkBlue">
    <ul id="newsTicker" class="newsTicker">
        <li name="tick" ph="tick1">We have in-store technical support.</li>
        <li name="tick" ph="tick2">Option 2</li>
        <li name="tick" ph="tick3">Option 3</li>
        <li name="tick" ph="tick4">Option 4</li>
        <li name="tick" ph="tick5">Option 5</li>
        <li name="tick" ph="tick6">Option 6</li>
    </ul>
</div>
<div id="log"></div> 
```

JS

```
//Get the ticker elements
var tickText = document.getElementById('newsTicker').getElementsByTagName('li');
var tickNum = tickText.length;
//New Array to clear empty data
var tickArry = [];
//Loop through list items and add non-void data to new loop
for(var a = 0; a < tickNum; a++) {
    if ($(tickText[a]).html() != '') {
        tickArry.push($(tickText[a]));
    }
}
//Loop int
var i = 0;
var log = document.getElementById('log');
//Self-invoking function for ticker animation
function animTick() {
    console.log($(tickArry[i]));
    log.innerHTML += $(tickArry[i]).html();
    //Make current tick item fall down
        $(tickArry[i]).animate({'padding-top' : '+=50px'}, 500,
            function() {
                //Once tick item is off screen, reset values
                $(this).css({'margin-left' : '9999px', 'padding-top' : '0'});
            });
        //Increment item
        i++;
        //If the tick has reach its length then reset
        if (i === tickNum) {
            i = 0;
        //Else call the animation for the next tick
        }
    }
    //Immediately animate in first list item
    $(tickArry[i]).animate({'margin-left' : '0px'}, 2000);
    //Add a delay
    setInterval(animTick, 3000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:58:32.123

`setTimeout()`如果您正在递归调用相同的函数，请使用。

您的`setInterval()`替代方案是：

```
function animTick() {
    // Function definition
}

setInterval(animTick, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:11:38.277

如果你包含`$(tickArry[i]).animate({'margin-left' : '0px'}, 2000);`在你的 animTick 函数中呢？

演示：[小提琴](http://jsfiddle.net/4nrbb/2)

# linux - linux内核ip_options_build()函数

> ID：13018690
> 
> 赞同：1
> 
> 时间：2012-10-22T19:47:50.683
> 
> 标签：linux, tcp, linux-kernel, linux-device-driver, tcp-ip

下面是 linux kernel 3.4 第 51 和 52 行中的 ip_options_build()：

```
51        if (opt->srr)
52                memcpy(iph+opt->srr+iph[opt->srr+1]-4, &daddr, 4); 
```

我知道这两行说，如果存在源路由选项，请将目标地址复制到选项的末尾，这表明 iph[opt->srr+1] 是源路由选项的长度，但我不知道不明白为什么？

```
31/*
32 * Write options to IP header, record destination address to
33 * source route option, address of outgoing interface
34 * (we should already know it, so that this  function is allowed be
35 * called only after routing decision) and timestamp,
36 * if we originate this datagram.
37 *
38 * daddr is real destination address, next hop is recorded in IP header.
39 * saddr is address of outgoing interface.
40 */
41
42void ip_options_build(struct sk_buff *skb, struct ip_options *opt,
43                      __be32 daddr, struct rtable *rt, int is_frag)
44{
45        unsigned char *iph = skb_network_header(skb);
46
47        memcpy(&(IPCB(skb)->opt), opt, sizeof(struct ip_options));
48        memcpy(iph+sizeof(struct iphdr), opt->__data, opt->optlen);
49        opt = &(IPCB(skb)->opt);
50
51        if (opt->srr)
52                memcpy(iph+opt->srr+iph[opt->srr+1]-4, &daddr, 4);
53
54        if (!is_frag) {
55                if (opt->rr_needaddr)
56                        ip_rt_get_source(iph+opt->rr+iph[opt->rr+2]-5, skb, rt);
57                if (opt->ts_needaddr)
58                        ip_rt_get_source(iph+opt->ts+iph[opt->ts+2]-9, skb, rt);
59                if (opt->ts_needtime) {
60                        struct timespec tv;
61                        __be32 midtime;
62                        getnstimeofday(&tv);
63                        midtime = htonl((tv.tv_sec % 86400) * MSEC_PER_SEC    
+           tv.tv_nsec / NSEC_PER_MSEC);
64                        memcpy(iph+opt->ts+iph[opt->ts+2]-5, &midtime, 4);
65                }
66                return;
67        }
68        if (opt->rr) {
69                memset(iph+opt->rr, IPOPT_NOP, iph[opt->rr+1]);
70                opt->rr = 0;
71                opt->rr_needaddr = 0;
72        }
73        if (opt->ts) {
74                memset(iph+opt->ts, IPOPT_NOP, iph[opt->ts+1]);
75                opt->ts = 0;
76                opt->ts_needaddr = opt->ts_needtime = 0;
77        }
78} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:16:28.080

如果我没记错的话，iph + opt->srr 基本上就是 srr 选项的第一个字节的地址。选项本身的格式如下：

类型（1 字节） | 长度（1 字节）| 偏移量（1 字节） | ...然后是一些地址，每个地址 4 个字节

LENGTH“字段”指定整个选项的字节长度，这就是为什么 iph[opt->srr+1] 是选项的长度。

# php - PHP substr 不回显任何内容

> ID：13018695
> 
> 赞同：0
> 
> 时间：2012-10-22T19:48:14.740
> 
> 标签：php, substring, substr

我遇到了这段代码的问题，并且 PHP 方法“substr”正在播放。我只是不明白。这是我想要实现的快速介绍。我有来自 Joomla 的电子邮件订阅者的大量 XML 文档。我正在尝试将其导入 Mailchimp，但 Mailchimp 对将电子邮件导入列表的方式的语法有一些规则。所以目前的语法是这样的：

```
<subscriber>
    <subscriber_id>615</subscriber_id>
    <name><![CDATA[NAME OF SUBSCRIBER]]></name>
    <email>THE_EMAIL@SOMETHING.COM</email>
    <confirmed>1</confirmed>
    <subscribe_date>THE DATE</subscribe_date>
</subscriber> 
```

我想制作一个简单的 PHP 脚本，它接收所有这些电子邮件并像这样输出它们：

```
 [THE_EMAIL@SOMETHING.COM] [NAME OF SUBSCRIBER]
  [THE_EMAIL@SOMETHING.COM] [NAME OF SUBSCRIBER]
  [THE_EMAIL@SOMETHING.COM] [NAME OF SUBSCRIBER]
  [THE_EMAIL@SOMETHING.COM] [NAME OF SUBSCRIBER] 
```

如果我能做到这一点，那么我可以将它复制粘贴到 Mailchimp 中。

现在这是我的 PHP 脚本，到目前为止：

```
$fileName = file_get_contents('emails.txt');

foreach(preg_split("/((\r?\n)|(\r\n?))/", $fileName) as $line){

  if(strpos($line, '<name><![CDATA[')){
      $name = strpos($line, '<name><![CDATA[');
      $nameEnd = strpos($line, ']]></name>', $name);
      $nameLength = $nameEnd-$name;
      echo "<br />";
      echo " " . strlen(substr($line, $name, $nameLength));
      echo " " . gettype(substr($line, $name, $nameLength));
      echo " " . substr($line, $name, $nameLength);

  }
  if(strpos($line, '<email>')){
    $var1 = strpos($line, '<email>');
    $var2 = strpos($line, '</email>', $var1);
    $length = $var2-$var1;
    echo substr($line, $var1, $length);

  }
} 
```

第一个 if 语句正常工作。它识别，如果行上有一个''-标签，如果有，那么它会找到结束标签并使用 substr 方法输出电子邮件。

第二个 if 语句让我很烦。If 应该和第一个 if 语句做同样的事情，但事实并非如此。长度是正确的长度（我已经检查过）。类型是正确的类型（我已经检查过）。但是当我尝试回应它时，什么也没有发生。该脚本仍然运行，但它不写任何东西。

我已经玩了很多次并且似乎已经尝试了所有方法 - 但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:54:49.620

> **警告**
> 此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

你应该使用`if(strpos($line,'...') !== false) {`

除此之外，您的文件似乎是 XML，因此您应该使用 XML 解析器，以免您落入[他来的小马](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

`DOMDocument`是一个很好的。你可以这样做：

```
$dom = new DOMDocument();
$dom->load("emails.txt");
$subs = $dom->getElementsByTagName('subscriber');
$count = $subs->length;
for( $i=0; $i<$l; $i++) {
    $sub = $subs->item($i);
    echo $sub->getElementsByTagName('email')->item(0)->nodeValue;
    echo " ";
    echo $sub->getElementsByTagName('name')->item(0)->nodeValue;
    echo "\n";
} 
```

这将以您描述的格式输出姓名和电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:18:47.497

所以这有一些问题，包括如果它在行首找到标签时`strpos`实际返回的命令`0`，这似乎不是你想要的。

此外，如果 XML 的格式与您的格式不完全相同，每个开始和结束标记都在一行，那么您的逻辑也会失败。

出于这个原因，重新发明 XML 处理并不是一个好主意……

正如其他人所建议的那样，这是解决问题的更好方法*。

```
$xml = simplexml_load_file('emails.txt');
foreach( $xml->subscriber as $sub ) 
{
  // Note that SimpleXML is aware of CDATA, and only outputs the text
  $output = '[' . $sub->name . ']' . ' ' . '[' . $sub->email . ']'; 
} 
```

**这假设您的 XML 是有效的，即“订阅者”块包含在顶层的单个父级中。您当然可以使用[simplexml 文档](http://docs.php.net/manual/en/book.simplexml.php)来调整您的用例。*

# r - data.table “关键索引”或“组计数器”

> ID：13018696
> 
> 赞同：44
> 
> 时间：2012-10-22T19:48:15.737
> 
> 标签：r, data.table

在 data.table 上创建键后：

```
set.seed(12345)
DT <- data.table(x = sample(LETTERS[1:3], 10, replace = TRUE),
                 y = sample(LETTERS[1:3], 10, replace = TRUE))
setkey(DT, x, y)
DT
#       x y
#  [1,] A B
#  [2,] A B
#  [3,] B B
#  [4,] B B
#  [5,] C A
#  [6,] C A
#  [7,] C A
#  [8,] C A
#  [9,] C C
# [10,] C C 
```

我想获得一个整数向量，为每一行提供相应的“键索引”。我希望`i`下面的预期输出（列）将有助于澄清我的意思：

```
#       x y i
#  [1,] A B 1
#  [2,] A B 1
#  [3,] B B 2
#  [4,] B B 2
#  [5,] C A 3
#  [6,] C A 3
#  [7,] C A 3
#  [8,] C A 3
#  [9,] C C 4
# [10,] C C 4 
```

我考虑过使用类似的东西，`cumsum(!duplicated(DT[, key(DT), with = FALSE]))`但希望有更好的解决方案。我觉得这个向量可能是表格内部表示的一部分，也许有办法访问它？即使不是这样，你有什么建议？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-22T20:44:59.583

更新： From `v1.8.3`，您可以简单地使用内置的 special `.GRP`：

```
DT[ , i := .GRP, by = key(DT)] 
```

请参阅历史以获取较早的答案。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-22T20:20:19.900

我可能会这样做，因为我相当有信心在调用中没有可用的索引计数器`[.data.table()`：

```
ii <- unique(DT)
ii[ , i := seq_len(nrow(ii))]
DT[ii]
#     x y i
#  1: A B 1
#  2: A B 1
#  3: B B 2
#  4: B B 2
#  5: C A 3
#  6: C A 3
#  7: C A 3
#  8: C A 3
#  9: C C 4
# 10: C C 4 
```

您可以将其设为单行，但需要额外调用`unique.data.table()`：

```
DT[unique(DT)[ , i := seq_len(nrow(unique(DT)))]] 
```

# django - Django 1.4.1 报错不要给我发邮件

> ID：13018697
> 
> 赞同：7
> 
> 时间：2012-10-22T19:48:15.130
> 
> 标签：django, django-1.4

这个问题可能是一个重复的问题，对此感到抱歉。

我正在使用和在我设置为`Django 1.4.1`的生产服务器上。有时用户会收到异常并且服务器显示模板但不发送在.`DEBUG``False``500.html``ADMINS``settings.py`

在应用程序中发送电子邮件已正确配置，因为在注册过程中我可以收到欢迎电子邮件。

我的片段`settings.py`：

```
DEBUG = False
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    ('example', 'example@example.com'), # this changed but my email is correct
)

MANAGERS = ADMINS

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
    'django.middleware.transaction.TransactionMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
)
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-18T00:57:10.637

这已经让我发疯了一段时间。刚刚想通了：

```
ADMINS = (
    ('Your Name', 'your_email@example.com'),
                                         *****
) 
```

最后那个逗号是我忘记的，这足以打破它。以为我会分享它，以便像我这样的其他可怜的白痴可以为自己节省一些宝贵的头发，否则他可能会拔掉……

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-20T17:45:57.260

您是否在设置中设置了 SERVER_EMAIL。那是用于发送错误邮件的发件人地址。默认为 root@localhost，它可能会在 SMTP 处被阻止。可能希望将其设置为与 DEFAULT_FROM_EMAIL 相同

# sql - 使用两列对查询结果进行排序

> ID：13018713
> 
> 赞同：4
> 
> 时间：2012-10-22T19:49:19.790
> 
> 标签：sql, sql-server

我有这张桌子：

```
Reply_ID | Fk_Post_ID
   10    |    5
   9     |    6
   8     |    5
   7     |    9
   6     |    5
   5     |    9
   4     |    7 
```

我需要一个查询以以下顺序模式检索记录。它搜索具有最高reply_ID 的记录，然后检索具有相同Fk_Post_ID 的所有记录。像这样的东西：

```
Reply_ID | Fk_Post_ID
   10    |    5
   8     |    5
   6     |    5
   9     |    6
   7     |    9
   5     |    9
   4     |    7 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:01:11.867

```
CREATE TABLE #YourTable (
    Reply_ID INT,
    fk_Post_ID INT
)

INSERT INTO #YourTable VALUES (10, 5)
INSERT INTO #YourTable VALUES (9, 6)
INSERT INTO #YourTable VALUES (8, 5)
INSERT INTO #YourTable VALUES (7, 9)
INSERT INTO #YourTable VALUES (6, 5)

SELECT
    t1.Reply_ID, 
    t1.fk_Post_ID
FROM
    #YourTable t1 JOIN (
    SELECT 
        MAX(Reply_ID) AS Max_Reply_ID,
        fk_Post_ID
    FROM #YourTable
    GROUP BY fk_Post_ID
) t2 ON t2.fk_Post_ID = t1.fk_Post_ID
ORDER BY 
    t2.Max_Reply_ID DESC, 
    t1.Reply_ID DESC 
```

[Sql 小提琴在这里](http://sqlfiddle.com/#!3/e7d65/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:58:34.093

您可以使用 a`CASE`在`ORDER BY`：

```
....
ORDER BY CASE WHEN Fk_Post_ID=(
                   SELECT MIN(Fk_Post_ID)
                   FROM dbo.Table
                   WHERE Reply_ID=(SELECT MAX(Reply_ID)FROM dbo.Table)
               ) THEN 0 ELSE 1 END ASC
,  Reply_ID DESC
,  Fk_Post_ID ASC 
```

这是小提琴：[http ://sqlfiddle.com/#!3/45f20/7/0](http://sqlfiddle.com/#!3/45f20/7/0)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T20:28:29.943

如果您的 DBMS 具有窗口函数，那么这也将解决它：

```
Select
  Reply_ID,
  FK_Post_ID
From 
  yourTable a
Order By 
  Max(Reply_ID) Over (Partition By FK_Post_ID) Desc,
  Reply_ID Desc 
```

[http://sqlfiddle.com/#!3/4be0c/9/0](http://sqlfiddle.com/#!3/4be0c/9/0)

# java - 使用 java 和 Atmosphere 的基本聊天应用程序

> ID：13018717
> 
> 赞同：2
> 
> 时间：2012-10-22T19:49:45.303
> 
> 标签：java, websocket, atmosphere

我正在尝试获取一个使用 Glassfish 和 Jersery 的 Atmosphere 聊天程序的简单[示例。](https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-The-Atmosphere-Framework-and-WebSocket)

到目前为止，我有一个基本的 maven webapp 原型，其结构如下：

![项目设置](../Images/a801976ddfce8ceb72cd6bdfe8abc568.png)

聊天资源文件只是一个使用 Atmosphere 注释的简单 REST 服务：

```
package core;

import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

import org.atmosphere.annotation.Broadcast;
import org.atmosphere.annotation.Suspend;

@Path("/")
public class ChatResource {

    @Suspend(contentType = "application/json")
    @GET
    public String suspend() {
        return "";
    }

    @Broadcast(writeEntity = false)
    @POST
    @Produces("application/json")
    public Response broadcast(Message message) {
        return new Response(message.author, message.message);
    }
} 
```

消息和响应类只是简单的 POJO 包装器。index.jsp、application.js、jquery.atmosphere.js 和 jquery.js 直接从示例项目中复制（在[此处](https://github.com/Atmosphere/atmosphere/tree/master/samples/rest-chat)找到）。

我的 web.xml 设置为以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:j2ee="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Archetype Created Web Application</display-name>
    <servlet>
        <description>AtmosphereServlet</description>
        <servlet-name>AtmosphereServlet</servlet-name>
        <servlet-class>org.atmosphere.cpr.AtmosphereServlet</servlet-class>
        <load-on-startup>0</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>AtmosphereServlet</servlet-name>
        <url-pattern>/chat/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

导航到该页面时，我收到以下错误：

> 抱歉，您的套接字有问题或服务器已关闭

如果我导航到页面尝试访问的路径 ( [http://localhost:8080/.../chat](http://localhost:8080/.../chat) )，我会收到以下消息：

> org.atmosphere.cpr.AtmosphereMappingException：未找到 AtmosphereHandler。确保在 META-INF/atmosphere.xml 中定义它或使用 @AtmosphereHandlerService 进行注释

我一定是缺少文件或设置配置，但我似乎找不到在哪里（上面的消息说气氛.xml 丢失，但这没有出现在示例中）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:59:51.327

默认情况下，Glassfish 中未启用 Web 套接字协议。

您可以使用以下命令启用它：

```
asadmin set configs.config.server-config.network-config.protocols.protocol.http-listener-1.http.websockets-support-enabled=true 
```

这是我需要让我的连接正常工作。

# objective-c - 我可以在 128 KB 中存储多少个 obj-c/ios 中的字符？

> ID：13018719
> 
> 赞同：-6
> 
> 时间：2012-10-22T19:49:54.127
> 
> 标签：objective-c, ios

我想将我的数据对象的数据存储在一个长字符串中。我的字符串限制是 128k，所以我想知道我可以输入多少个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:53:59.470

取决于编码要求。

• 你真的需要一个 NSString 兼容的字符串吗？

• 您的数据是真正的原始、8 位数据还是有自己的编码？

如果没有答案，假设是任意数据的输入和可以被视为有效的输出`NSString`。到那时，典型的答案是使用 base64 编码，其中 Google 将揭示多个 NSData -> NSString 解决方案。

对于大多数编码器，结果的大小可能会因输入格式而异。即某些事物编码为比其他事物更少的字节。因此，“最大值”可能会根据所采用的输入格式和编码算法而有所不同。

# javascript - 动态 HTML 电子表格，Substring()，我如何获取特定值？

> ID：13018724
> 
> 赞同：0
> 
> 时间：2012-10-22T19:50:27.950
> 
> 标签：javascript, html

这是情况，实际上与之前的问题有关。
我创建了一个电子表格，它将由用户输入的值填充。输入这些值后，我需要能够获取用户将输入到文本框中的坐标以添加这些值。对于此示例，某些人将输入的公式仅限于简单的 =SUM(1,1,2,1)。所以这就是我到目前为止所得到的

```
function calculate() {
    var row1;
    var row2;
    var col1;
    var col2;

    var row = document.getElementById("row");
    var col = document.getElementById("col");
    var value = document.getElementById(row + "_" + col);
    var formula = document.getElementById("inputText");

    formula = formula.value; //=SUM(1,2,2,1)
    formula1 = formula;

    row = row.value;
    col = col.value;

    col1 = formula1.substr(5, 5); //row 1
    col2 = formula1.substr(6, 8); //column 1
    row1 = formula1.substr(7, 10); //row 2
    row2 = formula1.substr(10, 12); // column2
} 
```

从这里我将使用从输入字段中提取的坐标来确定单元格值，然后从那里将它们加在一起并覆盖或将其输入到新单元格中。

所以基本上我遇到了一个障碍，试图了解如何获取 int 值以使它们像坐标一样可用。我想我在正确的路线上，但他遇到了路障。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:02:49.573

除非您确定您的坐标永远只会是 0-9，否则您可能需要重新考虑您的解析算法。

对于您的问题，如何在 Javascript 中将字符串转换为整数，请尝试以下操作：

```
formula1 = "=SUM(1,2,2,1)";   
col1 = parseInt(formula1.substr(5, 1));

alert(typeof(col1)); // Type is now number, not string
alert(col1); // So you can see the value... 1 
```

# perl - 在 xml-twig 中使用 parse 来解析 xml 字符串有什么限制

> ID：13018726
> 
> 赞同：1
> 
> 时间：2012-10-22T19:50:34.077
> 
> 标签：perl, xml-twig

我正在尝试使用 $twig->parse($xmlstring) 将 id 属性添加到字符串中的所有 xml 元素。每个字符串都是数组的一个元素，类似于：

```
<classes name="Test::Class">
  <public_methods>
    <members const="no" kind="function" name="RegisterDefinition" volatile="no">
      <parameters declaration_name="name" type="std::string"/>
      <parameters declaration_name="description" type="std::string"/>
    </members>
  </public_methods>
</classes> 
```

在脚本中，我使用 foreach 循环来获取每个元素并创建 id 属性。

```
foreach my $str (@newonly) {
   $twig->parse( $str );
} 
```

我创建了调用例程的 twig 对象和 TwigHandler ，它仅在我使用 parsefile 并指定 xml 文件时才有效。如果我使用 parse 来解析作为数组元素的 xml 文件的一部分，则不起作用。我正在使用的例程是：

```
my $twig = XML::Twig->new(
 TwigHandlers => {
   '_all_' => \&add_id,
 },
);

sub add_id 
 { my($twig, $element)= @_;
   $element->set_id($id++);
   $twig->purge;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:54:57.563

从[文档](http://p3rl.org/XML%3a%3aTwig)中：

> 解析 ($source)
> 
> $source 参数应该是一个包含整个 XML 文档的字符串，或者它应该是一个开放的 IO::Handle（又名文件句柄）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:10:38.400

`$twig->purge`我对处理程序末尾的使用感到困惑。当你这样做时，你会失去你刚刚建立的所有结构。我认为您确实创建了 id，但是当您清除树枝时会丢失它们。

您可能应该删除对 的调用`purge`并添加一个处理程序`classes`，该处理程序将使用树枝来完成您需要使用的任何事情，然后在完成后将其清除。

# jquery - 使用 jQuery 突出显示/取消突出显示菜单项

> ID：13018727
> 
> 赞同：2
> 
> 时间：2012-10-22T19:50:34.873
> 
> 标签：jquery, jquery-ui

在页面加载时，我想突出显示一个菜单项并在一秒钟后再次取消突出显示它。我想完成一种骑士骑士的效果，但仅限于一个方向。从左到右，它应该在遍历所有菜单项后停止。这样我想把更多的注意力放在我的菜单栏上。

我的 HTML：

```
<div id="header">
    <ul class="menu">
        <li class="menu-item"><a class="menu-item-link">Stage1</a></li>
        <li class="menu-item"><a class="menu-item-link">Stage2</a></li> 
    </ul>
</div> 
```

我的 CSS：

```
.highlight { color: #FFFFFF; }

$(document).ready(function () {
$(".menu-item a").each(function () {
        $(this).addClass('highlight').delay(1000).removeClass('highlight');
    });
}); 
```

我已经尝试了以下建议，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:59:40.670

您可能想尝试递归/回调模式，以便在删除前一个元素的类后立即添加下一个元素的类。

```
var runner = function (el) {

    var next = el.addClass('highlight').next('.menu-item a');

    setTimeout(function () {
        el.removeClass('highlight');
        next && runner(next);
    }, 1000)        
};

runner($('.menu-item a:first')); 
```

未经测试的代码。我会看看我是否可以在一段时间内掀起一个 jsFiddle。

### 编辑

[干得好。](http://jsfiddle.net/richardneililagan/evwYe/)

### 编辑 2

...这就是为什么您还要发布相关的 HTML 代码的原因。

因此，考虑 HTML 如下：

```
<div id="header">
    <ul class="menu">
        <li class="menu-item"><a class="menu-item-link">Stage1</a></li>
        <li class="menu-item"><a class="menu-item-link">Stage2</a></li> 
    </ul>
</div> 
```

改用这个：

```
var items = $('.menu-item a'),
    runner = function (el) {

        var next = items.eq(items.index(el) + 1).addClass('highlight');

        setTimeout(function () {
            el.removeClass('highlight');
            !!next.length && runner(next);
        }, 1000);
    };

runner(items.first()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:02:48.213

```
$(document).ready(function () {
  $(".menu-item a").each(function () {
    $(this).addClass("error").delay(1000).queue(function(next){
    $(this).removeClass("error");
   next();
  });
}); 
```

# xml - Chrome 开发者工具响应/预览选项卡“Pretty Print”或“Formatting”

> ID：13018730
> 
> 赞同：48
> 
> 时间：2012-10-22T19:50:39.073
> 
> 标签：xml, json, google-chrome

有谁知道 chrome 开发人员工具的工具或扩展，如果它是 XML 或 JSON，它将接受请求的响应并将其格式化。我已经做了很多查找，但找不到任何类型的工具来正确格式化给定 xml 或 json 响应文本的响应选项卡。

![在此处输入图像描述](../Images/ed3e15e018430419e8308f6f4c844ae0.png)

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-16T21:29:28.907

在您的屏幕截图中，您只需选择“预览”选项卡。无论如何，对我有用。也许您没有正确设置 Content-Type 响应标头？

如果响应代码是 200，它就可以工作。（也许是 2xx）。不过，我发现如果响应代码为 500，它就不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-15T22:33:31.067

另一种处理方法是右键单击开发人员工具的网络选项卡中的请求并选择“复制响应”。然后在控制台窗口中输入以下内容：

```
var a = 
```

然后粘贴并回车。

接下来输入以下内容：

```
a 
```

然后再次按回车键，整个 JSON 响应将以可展开/可折叠的形式显示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T19:48:16.057

它可能不是一个确切的。[但是我观察请求并使用jsonview](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc)打开我需要的关于 json 的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-07T22:36:36.767

我希望即使没有 Content-type 标头，Chrome 也会尝试解析响应。但是，幸运的是[Firebug](http://getfirebug.com/)会。您必须使用 Firefox，但在处理 XML 时它是值得的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T13:44:59.337

尝试在源代码中对其进行格式化。对于 PHP 和 DomDocument：

```
$doc = new DomDocument('1.0');
$doc->formatOutput = true; 
```

似乎 Chrome 没有提供简单的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-02T14:56:44.500

我保证这已经足够好了......

*   安装[JSON 查看器](https://chrome.google.com/webstore/detail/json-viewer/gbmdgpbipfallnflgajpaliibnhdgobh?hl=en-US)。
*   在 Network > Fetch/XHR 上查找请求
*   在左侧 名为**Name**的侧面板中双击您感兴趣的请求

*它将打开一个新选项卡，但速度超快，而且格式原始...*

# java - java.util.zip.ZIPException：不是 GZIP 格式

> ID：13018732
> 
> 赞同：8
> 
> 时间：2012-10-22T19:50:48.200
> 
> 标签：java, compression, jsoup, gzip, gzipinputstream

除了最有经验的 JAVA 用户之外，我什么都不是，但是，我对自己的问题感到非常绝望。每次执行以下代码时，都会收到以下错误：

```
 java.util.zip.ZipException: Not in GZIP format
 at java.util.zip.GZIPInputStream.readHeader(Unknown Source)
 at java.util.zip.GZIPInputStream.(init)(Unknown Source)
 at java.util.zip.GZIPInputStream.(init)(Unknown Source)
 at DidYouMean.executeGet(DidYouMean.java:56)
 at DidYouMean.didYouMean(DidYouMean.java:11)
 at DidYouMean.main(DidYouMean.java:39)
 Exception in thread "main" java.lang.IllegalArgumentException: String input must not be null.... 
```

我的一个朋友（使用 Mac，而不是我使用 windows 7 64）能够执行该程序。所以这似乎不是代码本身的问题（无论如何它是由 Github 上的某个人开发的）。我真的很感激任何帮助！尽管错误并不罕见，但我对解决方案的搜索并不是很成功。

```
import java.io.*;
import java.net.*;
import org.jsoup.*;
import java.util.zip.*;
import org.jsoup.nodes.*;
import org.jsoup.examples.HtmlToPlainText;
public class DidYouMean {
    public static String didYouMean(String s){
        String word="";
        String url="http://www.google.co.in/search?hl=en&q="+URLEncoder.encode(s);
        String html=executeGet(url,"www.google.co.in",'i');
        Document content=Jsoup.parse(html);
        Element submitted=null;
        try{
            submitted=content.getElementById("topstuff").clone();
            HtmlToPlainText h=new HtmlToPlainText();
            word=h.getPlainText(submitted);
            int q,p=word.indexOf("Did you mean:");
            if(p>=0){
                word=word.substring(p+"Did you mean:".length());
                p=word.indexOf("<>");
                if(p>0) word=word.substring(0,p);
                word=word.trim();
            }
            else{
                p=word.indexOf("Showing results for");
                if(p>=0){
                    word=word.substring(p+"Showing results for".length());
                    p=word.indexOf("<>");
                    if(p>0) word=word.substring(0,p);
                    word=word.trim();
                }
                else return "No results";
            }
        }catch(Exception e){e.printStackTrace();}   
        return word;
    }
    public static void main(String args[]){
        System.out.println(didYouMean(args[0]));
    }
    public static String executeGet(String targetURL,String host,char ch){
        URL url;
        HttpURLConnection connection=null;  
        try{
          url=new URL(targetURL);
          connection=(HttpURLConnection)url.openConnection();
          connection.setRequestMethod("GET");
          connection.setRequestProperty("Host",host);
          connection.setRequestProperty("Accept-Encoding", "gzip,deflate,sdch");
          connection.setRequestProperty("Accept-Language","en-US,en;q=0.8");
          if(ch=='c') connection.setRequestProperty("User-Agent","Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5");
          if(ch=='i') connection.setRequestProperty("User-Agent","Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; ShopperReports 3.1.22.0; SRS_IT_E879047EB0765B5336AF90)");
          connection.setUseCaches (false);
          connection.setDoInput(true);
          connection.setDoOutput(true);
          GZIPInputStream gzis=new GZIPInputStream(connection.getInputStream());
          InputStreamReader reader=new InputStreamReader(gzis);
          BufferedReader in=new BufferedReader(reader);
          String line;
          StringBuffer response=new StringBuffer(); 
          while((line=in.readLine())!=null) {
              response.append(line);
              response.append('\r');
          }
          in.close();
          return response.toString();
        } catch (Exception e) {e.printStackTrace();return null;}
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:00:50.180

```
 connection.setRequestProperty("Accept-Encoding", "gzip,deflate,sdch" 
```

您的请求表明它愿意接受以下任何编码格式`gzip`：`deflate`和`sdch`. 一种方法是查看`response-headers`服务器使用的编码类型并对其进行适当的解码。

另一种方法是只接受`gzip`

# wpf - 部分数据为红色字体

> ID：13018734
> 
> 赞同：0
> 
> 时间：2012-10-22T19:50:48.770
> 
> 标签：wpf, datagrid

我有一个使用 Caliburn.Micro 的 WPF 应用程序。我有一个数据网格：

```
 <DataGrid x:Name="WeatherStations"
            Grid.Row="0"
            AutoGenerateColumns="False"
            BaseControls:DataGridExtension.Columns="{Binding WeatherStationColumns}"
            CanUserAddRows="False" IsReadOnly="True"
            SelectedIndex="{Binding SelectedIndex, Mode=TwoWay}"
            SelectedItem="{Binding Path=SelectedWeatherStation, Mode=TwoWay}">
    </DataGrid> 
```

由于某些神秘原因，其中一列的某些单元格中的数据以红色前景显示。我找不到可能导致这种情况的原因，并且我看不到这些特定单元格中的数据有什么特别之处，因为相邻的单元格包含相似的数据，但该数据是黑色的。
更奇怪的是，最初我只有几个具有红色前景的单元格，但在我向下滚动后，该特定列中的大多数单元格都变成了红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:44:17.180

当您滚动时，DataGrid 将重用单元格来显示新数据。这是一个称为“虚拟化”的过程。如果您通过行为或在代码隐藏中设置单元格的前景色，则即使通过虚拟化替换单元格值，该前景色也会保留在单元格中。

我有一种预感，`BaseControls:DataGridExtension.Columns`你的某个地方正在设置前景色。当页面加载和滚动之前，红色单元格的值可能都有一些共同点（全为负数、低于某个阈值、错误等）。找到在您的代码中设置的位置（代码隐藏或标记），这将为您解决问题提供一个良好的开端。

# spring - Spring Roo 文件上传

> ID：13018735
> 
> 赞同：0
> 
> 时间：2012-10-22T19:50:53.577
> 
> 标签：spring, file, file-upload, spring-roo

大家好！

我正在尝试使用 Spring roo 实现文件上传。文件路径将持久化在数据库中，文件将保存在文件系统中。根据spring dveloper board上的信息，我修改了input.tagx和create.tagx文件。（信息：[https](https://jira.springsource.org/browse/ROO-442) ://jira.springsource.org/browse/ROO-442）input.tagx：

```
<jsp:root xmlns:c="http://java.sun.com/jsp/jstl/core"             xmlns:fn="http://java.sun.com/jsp/jstl/functions"      xmlns:spring="http://www.springframework.org/tags" xmlns:form="http://www.springframework.org/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
<jsp:output omit-xml-declaration="yes" />

<jsp:directive.attribute name="id" type="java.lang.String" required="true" rtexprvalue="true" description="The identifier for this tag (do not change!)" />
<jsp:directive.attribute name="field" type="java.lang.String" required="true" rtexprvalue="true" description="The field exposed from the form backing object" />
<jsp:directive.attribute name="label" type="java.lang.String" required="false" rtexprvalue="true" description="The label used for this field, will default to a message bundle if not supplied" />
<jsp:directive.attribute name="labelCode" type="java.lang.String" required="false" rtexprvalue="true" description="Key for label message bundle if label is not supplied" />
<jsp:directive.attribute name="required" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicates if this field is required (default false)" />
<jsp:directive.attribute name="disabled" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Specify if this field should be enabled" />
<jsp:directive.attribute name="validationRegex" type="java.lang.String" required="false" rtexprvalue="true" description="Specify regular expression to be used for the validation of the input contents" />
<jsp:directive.attribute name="validationMessageCode" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the message (message property code) to be displayed if the regular expression validation fails" />
<jsp:directive.attribute name="validationMessage" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the message to be displayed if the regular expression validation fails" /> 
```

```
<c:if test="${empty render or render}"
   <c:when test="${disableFormBinding}">
   <input id="_${field}_id" name="${field}" type="${type}"/>
    </c:when>
    <c:otherwise>
<!-- currently (spring 3.0.3), form:input doesn't support type attribute -->
<!-- <form:input id="_${field}_id" path="${field}" disabled="${disabled}"/> -->
<input id="_${field}_id" name="${field}" type="${type}"/>
<br/>
<form:errors cssClass="errors" id="_${field}_error_id" path="${field}"/>
</c:otherwise>    
    <c:if test="${empty disabled}">
      <c:set value="false" var="disabled" />
    </c:if>

<c:if test="${empty label}">
  <c:if test="${empty labelCode}">
    <c:set var="labelCode" value="${fn:substringAfter(id,'_')}" />
  </c:if>

    <spring:message code="label_${fn:toLowerCase(labelCode)}" var="label" htmlEscape="false" />
    </c:if>

    <c:if test="${empty validationMessage}">
      <c:choose>
        <c:when test="${empty validationMessageCode}">
          <spring:message arguments="${fn:escapeXml(label)}" code="field_invalid" var="field_invalid" htmlEscape="false" />
        </c:when>
        <c:otherwise>
          <spring:message arguments="${fn:escapeXml(label)}" code="${validationMessageCode}" var="field_invalid" htmlEscape="false" />
        </c:otherwise>
      </c:choose>
    </c:if>

    <c:if test="${empty required}">
      <c:set value="false" var="required" />
    </c:if>

    <c:set var="sec_field">
      <spring:escapeBody javaScriptEscape="true" >${field}</spring:escapeBody>
    </c:set>

    <div id="_${fn:escapeXml(id)}_id">
      <label for="_${sec_field}_id">
        <c:out value="${fn:escapeXml(label)}" />
        :
      </label>
      <c:choose>
        <c:when test="${disableFormBinding}">
          <input id="_${sec_field}_id" name="${sec_field}" type="${fn:escapeXml(type)}" />
        </c:when>
        <c:otherwise>
          <c:choose>
            <c:when test="${type eq 'password'}">
              <form:password id="_${sec_field}_id" path="${sec_field}" disabled="${disabled}" />
            </c:when>
            <c:otherwise>
              <form:input id="_${sec_field}_id" path="${sec_field}" disabled="${disabled}" />
            </c:otherwise>
          </c:choose>
          <br />
          <form:errors cssClass="errors" id="_${sec_field}_error_id" path="${sec_field}" />
        </c:otherwise>
      </c:choose>
      <c:choose>
        <c:when test="${required}">
          <spring:message code="field_required" var="field_required" htmlEscape="false" />
          <spring:message argumentSeparator="," arguments="${label},(${field_required})" code="field_simple_validation" var="field_validation" htmlEscape="false" />
        </c:when>
        <c:otherwise>
          <spring:message argumentSeparator="," arguments="${label}, " code="field_simple_validation" var="field_validation" htmlEscape="false" />
        </c:otherwise>
      </c:choose>
      <c:set var="sec_field_validation">
        <spring:escapeBody javaScriptEscape="true">${field_validation}</spring:escapeBody>
      </c:set>
      <c:set var="sec_field_invalid">
        <spring:escapeBody javaScriptEscape="true" htmlEscape="true">${field_invalid}</spring:escapeBody>
      </c:set>
      <c:set var="sec_field_required">
        <spring:escapeBody javaScriptEscape="true">${field_required}</spring:escapeBody>
      </c:set>
      <c:set var="sec_validation_regex" value="" />
      <c:if test="${!empty validationRegex}">
        <c:set var="sec_validation_regex" value="regExp : '${validationRegex}', " />
      </c:if>
      <script type="text/javascript">
        Spring.addDecoration(new Spring.ElementDecoration({elementId : '_${sec_field}_id', widgetType : 'dijit.form.ValidationTextBox', widgetAttrs : {promptMessage: '${sec_field_validation}', invalidMessage: '${sec_field_invalid}', required : ${required}, ${sec_validation_regex} missingMessage : '${sec_field_required}' }})); 
      </script>
    </div>
    <br />
  </c:if>
</jsp:root> 
```

创建.tagx：

```
<jsp:root xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:form="http://www.springframework.org/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:spring="http://www.springframework.org/tags" version="2.0">
  <jsp:output omit-xml-declaration="yes"/>

  <jsp:directive.attribute name="id" type="java.lang.String" required="true" rtexprvalue="true" description="The identifier for this tag (do not change!)"/>
  <jsp:directive.attribute name="modelAttribute" type="java.lang.String" required="true" rtexprvalue="true" description="The name of the model attribute for form binding"/>
  <jsp:directive.attribute name="path" type="java.lang.String" required="true" rtexprvalue="true" description="Specify the relative URL path (wit leading /)" />
  <jsp:directive.attribute name="compositePkField" type="java.lang.String" required="false" rtexprvalue="true" description="The field name of the composite primary key (only used if a composite PK is present in the form backing object)" />
  <jsp:directive.attribute name="multipart" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicate if this is a multipart form (default: false)" />
  <jsp:directive.attribute name="label" type="java.lang.String" required="false" rtexprvalue="true" description="The label used for this object, will default to a message bundle if not supplied"/>
  <jsp:directive.attribute name="render" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicate if the contents of this tag and all enclosed tags should be rendered (default 'true')" />
  <jsp:directive.attribute name="openPane" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Control if the title pane is opened or closed by default (default: true)"/>
  <jsp:directive.attribute name="z" type="java.lang.String" required="false" description="Used for checking if element has been modified (to recalculate simply provide empty string value)"/>
  <jsp:directive.attribute name="enctype" type="java.lang.String" required="false" description="Used to set the enctype, e.g. multipart/form-data for file upload support. "/>
  <c:if test="${empty render or render}">
    <c:if test="${empty label}">
      <spring:message code="label_${fn:toLowerCase(fn:substringAfter(id,'_'))}" var="label" htmlEscape="false" />
    </c:if>

    <!--<c:set var="enctype" value="application/x-www-form-urlencoded"/> -->
    <form:form action="${form_url}" method="POST" modelAttribute="${modelAttribute}" enctype="${enctype}">
    </form:form>
    <c:if test="${multipart}">
      <c:set var="enctype" value="multipart/form-data"/>
    </c:if>
    <spring:message arguments="${label}" code="entity_create" var="title_msg" htmlEscape="false" />
    <util:panel id="${id}" title="${title_msg}" openPane="${openPane}">
      <spring:url value="${path}" var="form_url"/>
      <c:set var="jsCall" value=""/>
      <c:if test="${not empty compositePkField}">
        <c:set var="jsCall" value="encodePk()" />
      </c:if>
      <form:form action="${form_url}" method="POST" modelAttribute="${modelAttribute}" enctype="${enctype}" onsubmit="${jsCall}">
        <form:errors cssClass="errors" delimiter="&lt;p/&gt;"/>
        <c:if test="${not empty compositePkField}">
          <form:hidden id="_${fn:escapeXml(compositePkField)}_id" path="${fn:escapeXml(compositePkField)}" />
          <script type="text/javascript">
          <![CDATA[
            dojo.require("dojox.encoding.base64");
            function encodePk() {
              var obj = new Object();
              dojo.query("input[name^=\"${compositePkField}.\"]").forEach(function(node, index, nodelist){
                obj[node.name.substring('${compositePkField}'.length + 1)] = node.value;
              });
              var json = dojo.toJson(obj);
              var tokArr = [];
              for (var i = 0; i < json.length; i++) {
                tokArr.push(json.charCodeAt(i));
              }
              var encoded = dojox.encoding.base64.encode(tokArr);
              dojo.byId('_${fn:escapeXml(compositePkField)}_id').value = encoded;
            }
          ]]>
          </script>
        </c:if>
        <jsp:doBody />
        <div class="submit" id="${fn:escapeXml(id)}_submit">
          <spring:message code="button_save" var="save_button" htmlEscape="false" />
          <script type="text/javascript">Spring.addDecoration(new Spring.ValidateAllDecoration({elementId:'proceed', event:'onclick'}));</script>
          <input id="proceed" type="submit" value="${fn:escapeXml(save_button)}"/>
        </div>
      </form:form>
    </util:panel>
  </c:if>
</jsp:root> 
```

我的问题是我得到了休闲错误：

```
javax.servlet.jsp.JspTagException: Illegal use of &lt;when&gt;-style tag without &lt;choose&gt; as its direct parent
    at org.apache.taglibs.standard.tag.common.core.WhenTagSupport.doStartTag(WhenTagSupport.java:95)
    at org.apache.jsp.tag.web.form.fields.input_tagx._jspx_meth_c_005fwhen_005f0(input_tagx.java:519)
    at org.apache.jsp.tag.web.form.fields.input_tagx.doTag(input_tagx.java:325)
    at org.apache.jsp.WEB_002dINF.views.pphotoes.create_jspx._jspx_meth_field_005finput_005f0(create_jspx.java:172)
    at org.apache.jsp.WEB_002dINF.views.pphotoes.create_jspx.access$2(create_jspx.java:157) 
```

我究竟做错了什么？（我认为我的控制器和实体文件很好，如果需要我可以发布它们）

感谢您的帮助。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:09:41.640

As the error message clearly states, you need to have a `<c:choose>` as a direct parent tag before the `<c:when>` tag - possibly in the following first few lines of your `input.tagx` file. Additionally, the `<c:if>` tag is not closed properly.

```
<c:if test="${empty render or render}"
    <c:when test="${disableFormBinding}"> 
```

Cheers.

# perl - Perl 脚本不能分叉超过 10 次

> ID：13018741
> 
> 赞同：3
> 
> 时间：2012-10-22T19:51:10.820
> 
> 标签：perl, fork, perl-module

我的 perl 代码不允许超过 10 个分叉。对于下面的 perl 代码，每当我在读入脚本的机器列表中使用超过 10 台机器时，perl 脚本只会为 10 台机器分叉 10 个进程，其余的则因错误而死：

SSHProcessError ssh 进程已终止。在 serverLogin.pl 44 它死在它说 $ssh->waitfor('主机的真实性*',15); 的那一行。

PERL 脚本：

```
#!/usr/bin/perl -w

use Net::SSH::Expect;
use Term::ReadKey;

print "please enter filename:\n";
$filename = ReadLine;
chomp $filename;

print "please enter user ID:\n";
$userID = ReadLine;
chomp $userID;

print "please enter password:\n";
ReadMode 'noecho';
$passwordforuser = ReadLine 0;
chomp $passwordforuser;
ReadMode 'normal';

open READFILE,"<","$filename" or die "Could not open file listofmachines\n";

my @listofmachines = <READFILE>;

foreach $machine (@listofmachines)
{
    my $pid=fork();

    if ($pid){
        push(@childprocs,$pid);
    }
    elsif ( $pid == 0 ) {
        my $ssh = Net::SSH::Expect->new (
            host => "$machine",
            user => "$userID",
            password=> "$passwordforuser",
            timeout => 25,
            raw_pty => 1,
        );

        my $login_output = $ssh->run_ssh or die "Could not launch SSH\n";

        $ssh->waitfor('The authenticity of host*',15);

        #print "This output for machine $machine\n";

        $ssh->send("yes");
        $ssh->waitfor('password: ', 15);
        $ssh->send("$passwordforuser");
        $ssh->waitfor('$ ', 10);
        my @commresult=$ssh->exec("uptime");

        print $login_output;
        print @commresult;

        exit 0;
    }
    else {
        die "Could not Fork()\n";
    }
}

foreach(@childprocs){
    waitpid($_, 0)
} 
```

请帮忙。谢谢，蓝蓝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:38:55.843

您的脚本使用[Net::OpenSSH::Parallel](https://metacpan.org/module/Net%3a%3aOpenSSH%3a%3aParallel)而不是 Net::SSH::Expect。

同时连接的数量限制为 10，以克服脚本中发生的任何资源耗尽问题（可能是 PTY）：

```
#!/usr/bin/perl -w

use Net::OpenSSH::Parallel;
use Term::ReadKey;

print "please enter filename:\n";
$filename = ReadLine;
chomp $filename;

print "please enter user ID:\n";
$userID = ReadLine;
chomp $userID;

print "please enter password:\n";
ReadMode 'noecho';
$passwordforuser = ReadLine 0;
chomp $passwordforuser;
ReadMode 'normal';

open READFILE,"<","$filename" or die "Could not open file listofmachines\n";

my @listofmachines = <READFILE>;
chomp @listofmachines;

my $pssh = Net::OpenSSH::Parallel->new(connections => 10);
$pssh->add_host($_,
                user => $userID, password => $passwordforuser,
                master_opts => [-o => 'StrictHostKeyChecking=no'])
    for @listofmachines;

sub do_ssh_task {
    my ($host, $ssh) = @_;
    my $output = $ssh->capture('uptime');
    print "$host: $output";
}

$pssh->all(parsub => \&do_ssh_task);
$pssh->run;

for my $host (@listofmachines) {
    if (my $error = $pssh->get_error($host)) {
        print STDERR "remote task failed for host $host: $error\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T22:13:42.237

默认情况下，远程 ssh 守护进程将并发 ssh 连接数限制为每个用户标识 10 个。如果这对您来说是个问题，您将需要更改服务器配置...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:45:46.730

也许您对可以创建的进程数量有限制？您可以在孩子们只是睡觉（60）的循环中创建30个或更多进程吗？

如果实际上您一次可以执行多少个限制，请尝试使用[Parallel::ForkManager](http://p3rl.org/Parallel%3a%3aForkManager)。

如果这是由于达到了伪终端的限制，那么您如何设置取决于内核版本；uname -a 说什么？还取决于代码是使用 BSD 还是 SysV/UNIX98 ptys。如果你看到它打开像 /dev/ptyXY 这样的文件，其中 X 是 ae 或 pz 之一，它是前者，你将在系统范围内有 256 个硬限制。

`usermod`您可以在没有伪终端的情况下使用而不是更改密码`passwd`，但这会暂时暴露进程列表中的加密密码；在您的情况下这可能是可以接受的。

# c++ - 为什么 cin 会将一个浮点值分成两部分？

> ID：13018742
> 
> 赞同：0
> 
> 时间：2012-10-22T19:51:15.633
> 
> 标签：c++, iostream

我有一个关于cin的问题。

```
int main(void)
{
    int a;
    float b;
    cin >> a >> b;
} 
```

当我给出一个浮点数（如 3.14）作为输入时，既没有`a`也没有`b`得到完整的值（3.14）：输出为 a=3，b=0.14。

我知道这`cin`会按空格、制表符或回车分割输入，但“点”不会，对吧？

为什么下面的代码会起作用？

```
int main(void)
{
    int i=0;
    int k=0;
    float j=0;

    cin >> i >> k >> j;    // i =3, j=k=0
} 
```

还有一个问题，编译器这样做对我们有什么好处？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T19:54:12.543

您已声明`a`为 type `int`，在这种情况下，您希望它与“.”做什么？

> failbit 获得的输入无法解释为适当类型的元素。请注意，某些 eofbit 案例也会设置 failbit。

你提到的另一个问题很好，你问的是什么问题？您已经`cin`编辑了 3 个变量，您在这里期望什么？0 对 float 或 int 有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:57:19.093

```
cin >> a >> b; 
```

给定输入 3.14，第一次解析点（句点），因为点不适合整数的语法。第二个解析使用 .14，解析得很好。

```
cin >> i >> k >> j; 
```

这对于输入 3.14 是有问题的。第一次解析再次停在该点上。第二个解析不能以点重新开始，因此它将输入流标记为失败。

在执行 I/O 时始终检查状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:04:28.593

格式化输入函数的工作非常简单：

1.  如果有的话，它们会跳过前导空格。
2.  他们尝试读取与给定类型匹配的格式。
3.  如果由于数据与所需格式不匹配而导致读取值失败，则设置`std::ios_base::failbit`. 如果读取失败，则输入不应更改尝试读取的变量（标准输入运算符遵循此规则，但用户定义的输入运算符可能不会）。

您尝试读取的第一个值是`int`. 读取 an`int`意味着读取可选的前导符号后跟一系列数字（根据您的设置和给定的值，流可能读取八进制或十六进制数字而不是十进制数字）。也就是说，`int`接收值`3`并且读取在 . 前面停止`.`。

根据您接下来阅读的内容，下一次阅读是否失败：

*   在第一个代码中，您尝试读取以可选符号开头的浮点值，然后是可选的整数部分，然后是可选的千位分隔符，然后是可选的小数部分，然后是可选的指数。整数部分或小数部分至少需要一位数字。在您的示例中，只有数千个单独的后跟小数部分。
*   尝试读取整数时，`.`发现 a 不是 a 的有效部分`int`并且读取失败。

尝试读取值后，应始终尝试读取操作是否成功并报告潜在错误：

```
if (in >> value) {
    std::cout << "successfully read '" << value << "'\n";
}
else {
    std::cerr << "failed to read a value from input\n";
} 
```

请注意，在读取失败后，您可能还需要清理，例如，使用

```
in.clear();
in.ignore(); 
```

这首先清除错误标志（没有这个，流将忽略任何进一步读取数据的尝试），然后忽略下一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T19:57:04.947

`cin`正在读取输入“3.14”，您要求将其放入一个整数，然后放入一个浮点数。

所以`cin`开始阅读，找到“3”，然后找到“。” 这不是整数。将 3 存储到`a`并继续。".14" 是有效的浮点数并将其放入 b。

然后你要求阅读`int`, `int`, `float`. 第二个整数不匹配并`cin`停止，但它*似乎*只是在工作。实际上，它*失败了*。

编译器无法警告您正在执行的操作不起作用，因为在编译时输入是未知的。

# android - 带有 App Widget 的 TouchDelegate？

> ID：13018743
> 
> 赞同：2
> 
> 时间：2012-10-22T19:51:16.403
> 
> 标签：android, android-layout, android-appwidget

是否可以将 TouchDelegate 与 App Widget 一起使用，即与 RemoteViews 一起使用？目的是通过扩大点击区域来更轻松地点击小部件上的某些按钮，但不会使图像占用更多空间，因为这会影响布局。

我发现的 TouchDelegate 示例要求您查找和使用有问题的视图 ID `Activity.findViewById()`，我认为这些视图 ID 无法通过 AppWidgetProvider 工作。如果不可能，是否有任何替代方案可以实现相同的目标？我也尝试将图像放在带有填充的框架布局中，但由于填充占用空间，这无济于事。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:37:53.570

> 是否可以将 TouchDelegate 与 App Widget 一起使用，即与 RemoteViews 一起使用？

不，对不起。

> 我也尝试将图像放在带有填充的框架布局中，但由于填充占用空间，这无济于事。

摆脱填充并`PendingIntent`为`FrameLayout`. 的所有子类`View`都有点击事件，尽管我们倾向于主要关注`Button`和`ImageButton`。通过将您的图像放在一个容器中，该容器的大小和位置都在您希望触摸事件注册的位置，并`PendingIntent`为图像和该容器使用相同的位置，您可以创建一个更大的触摸目标。

# coq - 迷失在这个练习中

> ID：13018748
> 
> 赞同：1
> 
> 时间：2012-10-22T19:51:50.773
> 
> 标签：coq, theorem-proving

我必须证明这一点：

```
Variable A : Set.
Variable P : A -> Prop.
Variables R : A -> A -> Prop.

Lemma pool : (forall x:A, ~P x) -> ~(exists x:A, ~ P x). 
```

到目前为止，我已经完成了：

```
intros.
unfold not.
intros.
elim H0.
destruct H0.
intros.
exact x0. 
```

然后我必须证明 False。我不知道该怎么做。这是不可证明的吗？你能把我引向正确的方向吗？或者我在这里错过了什么？

编辑：Ptival，你帮了大忙……我注意到问题上有一个错误，当我尝试编辑问题时，我不小心点击了删除按钮，惊慌失措并按下退格键。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:47:41.650

（哦，好吧，再次回答：P）

我相信你的定理仍然有缺陷（除非 A 是一个空集......）。

你的意思是：

```
Lemma pool : (forall x:A, ~P x) -> ~(exists x:A, P x). 
```

在这种情况下，这是可行的，您可以从以下方式开始：

```
Proof.
  intros A E.
  destruct E as [x P]. 
```

其余的很容易，由您决定是否这确实是您最初想要的目标。

# php - 在 javascript 中包含 php

> ID：13018751
> 
> 赞同：-4
> 
> 时间：2012-10-22T19:51:58.107
> 
> 标签：php, mysql

I have a photo application, where when a photo is selected, a popout javascript window opens.

现在我编写了一个 PHP/Mysql 注释框，我想将其包含在 javascript 脚本中。你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:56:21.923

你以错误的方式接近这个。

这是应该发生的工作流程：

1.  用户点击照片。
2.  JavaScript 向服务器发送一个 AJAX 请求（请求一个特定的文件，它将处理这个请求），请求弹出窗口所需的任何数据。
3.  服务器（即`process.php`文件）接收到这个请求，查询 MySQL 数据库，并将`echo`数据返回给客户端。
4.  服务器的响应被 JavaScript 作为 AJAX 请求的结果捕获。
5.  JavaScript 处理这个结果，以便产生正确的弹出窗口。

PHP 和 MySQL 在与 JavaScript（客户端）不同的级别（服务器）上工作。因此，它们不能一起运行。JavaScript 可以**调用**服务器上的页面（使用 AJAX）并获取结果。这是你应该依赖的原则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:55:52.487

您可以使用 ajax 请求加载 php 生成的基于 html 的评论内容，也可以将其包含在动态生成的 javascript 中。

# jquery - 引导工具提示不起作用？

> ID：13018754
> 
> 赞同：2
> 
> 时间：2012-10-22T19:52:00.757
> 
> 标签：jquery, css, tooltip

您好，我阅读了有关工具提示的所有内容，它是 JS。

1.  bootstrap 从未包含 bootstrap-tooltip.js 的下载，因此我只是链接了 bootstrap.js 文件。

我的JavaScript：

```
 <script type="text/javascript">
$('.link').tooltip()
</script> 
```

我的 HTML

```
<a href="#" class="link" data-original-title="first tooltip">Hover me for a tooltip</a>! 
```

我尝试将 js 移动到页脚，在 div 下，到头部，到顶部，但它不起作用.. javascript 甚至没有启动。它甚至不显示默认工具提示。

我的页面：http: [//justxp.plutohost.net/jonydesigns/tos.php](http://justxp.plutohost.net/jonydesigns/tos.php)

我的整个 tos.php 页面： [http ://pastebin.com/qSe9NES7](http://pastebin.com/qSe9NES7)

有人可以找出为什么工具提示不显示吗？我也包含了引导 css，整个网站实际上都是用它构建的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:44:09.927

1：您没有在`bootstrap-tooltip.js`任何地方链接所需的内容。（至少我在你的代码中找不到它。）

2：你的 JavaScript 代码应该被包围`$(document).ready( ... )`：

```
$(document).ready(function() {
    $('.link').tooltip();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:13:45.290

[文档](http://twitter.github.com/bootstrap/javascript.html#tooltips)中定义了此问题的修复：

> 出于性能原因，工具提示和弹出框数据 API 是可选的，这意味着您必须自己初始化它们。

但是，我发现这个描述很模糊，应该包括一个例子。工具提示需要“初始化”。在这种情况下，您可以在准备好的文档上执行此操作：

**jQuery**

```
$('.link').tooltip(); 
```

然后您提供的**标记**将在鼠标悬停时显示工具提示。

`<a href="#" class="link" data-original-title="first tooltip">Hover me for a tooltip</a>!`

另请注意，bootstrap.js 确实包含 bootstrap-tooltip.js。要查看这个打开的 bootstrap.js 并查找：

```
/* ===========================================================
 * bootstrap-tooltip.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame 
```

* * *

在相关说明中，弹出窗口也需要“初始化”。例如

**标记**

```
<a id="somePopoverId" href="#" rel="popover" class="btn btn-large btn-danger" data-content="Hello world!" title="" data-toggle="popover" data-original-title="A whatever" data-container="body">Popover</a> 
```

**jQuery**

```
$("a[rel='popover']").popover({
                placement: "top",
                trigger: "hover"
            }); 
```

或者更简单...

```
 $("#somePopoverId").popover({
                placement: "top",
                trigger: "hover"
            }); 
```

# cakephp - CakePHP 2.0 / Stripe 支付集成

> ID：13018756
> 
> 赞同：3
> 
> 时间：2012-10-22T19:52:10.257
> 
> 标签：cakephp, cakephp-2.1, stripe-payments

我对蛋糕很陌生。我正在 2.1 中构建一个站点并尝试实现 Stripe 支付网关。

我找到了几个插件/组件，但他们的文档对我来说并不是很清楚。

这是一个：[https ://github.com/jeremyharris/stripe/blob/master/README.md](https://github.com/jeremyharris/stripe/blob/master/README.md)

我已将该文件夹添加到我的插件文件夹中，通过 bootstrap.php 加载插件，配置 database.php 文件，并使用自述文件中的代码创建了一个名为 Authorize.php 的新模型。

我现在卡住了，不知道该怎么办。我在测试页面中添加了一个非常基本的表单，但我不确定从这里去哪里。

这是我的 Pages 控制器中的 testpayment.ctp：

```
echo $this->Form->create('Authorize');
echo $this->Form->input('Card Number');
echo $this->Form->input('Expiration');
echo $this->Form->input('CCV');
echo $this->Form->end('Send'); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:10:44.927

我在尝试上述插件时也很挣扎。我把它设置得很好，它一直抛出各种各样的警告和错误。您需要了解的一件事是 Stripe 支付流程。我很幸运找到[了这个简单的插件](https://github.com/chronon/CakePHP-StripeComponent-Plugin)，它花了我不到半小时的时间让 Stripe 工作。如果您对 Cake 还不熟悉，请阅读[Stripe](https://stripe.com/)和[CakePHP](http://book.cakephp.org/2.0/en/index.html)的官方文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-15T13:09:17.750

现有的组件对我来说都不够好，所以我刚刚完成了包含所有方法的组件

[https://github.com/hashmode/CakePHP-Stripe-Component-Full](https://github.com/hashmode/CakePHP-Stripe-Component-Full)

用法非常简单，如果您阅读 Stripe 文档，例如让我们考虑添加信用卡：根据[API 文档](https://stripe.com/docs/api?lang=php#create_card)，我们需要客户的 id 和卡数据作为数组或令牌。所以，用法将是

```
$customerId = 'cus_asdfasdfasdf';
$cardData = array('number' => '1111111111111', 'exp_month' => '10',
    'exp_year' => 2022, 'cvc' => 123);
$response = $this->Stripe->createCard($customerId, $cardData); 
```

其余方法使用相同的逻辑。

# jmeter - 如何获得在循环中花费的时间

> ID：13018762
> 
> 赞同：2
> 
> 时间：2012-10-22T19:52:38.613
> 
> 标签：jmeter

我已经为 Web 应用程序编写了负载测试。测试脚本通过 HTTP 向服务器提交请求，然后使用一个小计时器在 While 循环中轮询服务器，以查看请求何时被处理。我遇到的问题是，在所有侦听器（聚合图、表格等）中，JMeter 仅显示每个请求所花费的时间，而不是处理作业的总时间，即从发送初始请求到包含预期响应的时间“完成”消息。

如何添加诸如“分析点”之类的东西，它将数据获取到侦听器图表中？还是有另一种通常处理的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:16:44.643

你需要一个[事务控制器](http://jmeter.apache.org/usermanual/component_reference.html#Transaction_Controller)。将要聚合的元素时间放在它下面。然后事务控制器将出现在您的所有侦听器中。它的加载和延迟时间将是其嵌套元素的这些参数的总和。

> 请注意，默认情况下，此时间包括控制器范围内的所有处理，而不仅仅是样本，这可以通过取消选中“在生成的样本中包含计时器和前置处理器的持续时间”来更改。

# wordpress - 使用 NextGen Gallery for Wordpress 为图像创建过滤器系统

> ID：13018764
> 
> 赞同：0
> 
> 时间：2012-10-22T19:52:41.567
> 
> 标签：wordpress, nextgen-gallery

使用最新版本的 Wordpress 和 NextGen Gallery 插件...我正在尝试为图像创建过滤系统。例如：如果您点击一个名为“假期”的链接，所有带有假期标签/alt 的图像都会出现，其余的则会消失，依此类推。有没有我可以使用的插件，或者 NextGen 有内置的东西吗？

谁能带领我朝着正确的方向发展这个过滤器？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:05:52.433

这个插件有效：[http ://wordpress.org/extend/plugins/nextgen-gallery-powertags/](http://wordpress.org/extend/plugins/nextgen-gallery-powertags/)

它是 NextGen 插件的扩展。激活后，请务必先在 NextGen 的选项中“激活永久链接”。

您可以使用 [nggpowertags] 短代码，它将显示您的图库 + 可点击的标签过滤器。请注意，没有标签的图像**不会**显示（至少默认情况下不会）。即，确保您的所有图像都被标记。

如果您不想标记所有图像，也可以使用默认的 [nggallery] 短代码并将 [tagcloud] 放在其上方。这会得到大致相同的结果。

# c# - 阻止的自定义消息框

> ID：13018776
> 
> 赞同：0
> 
> 时间：2012-10-22T19:53:29.790
> 
> 标签：c#, windows-phone-7, silverlight-4.0, messagebox

如何在 WP7.1 中重新实现模态消息框以显示自定义设计？

我在 SO 和 Internet 上都看到了许多带有答案的问题。

但是，到目前为止我看到的所有解决方案都是非阻塞的。在我的应用程序中，我有时会使用消息框来确认某些内容，因此我需要像系统提供的 MessageBox 类一样阻塞 UI 线程的解决方案，即

```
if( CustomMessageBox.confirm( "orly?" ) ) { ... 
```

更新：从模拟器图像中反编译 System.Windows.dll 显示 MessageBox 类只是 agcore.dll 中 MessageBox_ShowCore 的一个薄包装器，它显然从 coredll.dll 调用 MessageBoxW ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:12:20.320

您可以使用弹出窗口来设计自己的消息框。就像上面提到的@MengMeng，你可以深入到coding4Fun 中MessagePrompt 的源代码，然后你就可以找到如何实现它。

# java - 尝试在 servlet 引擎之外使用连接池

> ID：13018780
> 
> 赞同：2
> 
> 时间：2012-10-22T19:53:44.617
> 
> 标签：java, tomcat, jdbc, connection-pooling

我在 servlet 引擎（在本例中为 Tomcat）中运行了一系列方法，使用连接池访问以这种方式编写的数据库：

```
// Gets an RSS_Feed.
public static RSS_Feed get(int rssFeedNo) {
    ConnectionPool_DB pool = ConnectionPool_DB.getInstance();
    Connection connection = pool.getConnection();
    PreparedStatement ps = null;
    ResultSet rs = null;

    String query = ("SELECT * " +
                    "FROM RSS_Feed " +
                    "WHERE RSSFeedNo = ?;");

    try {
        ps = connection.prepareStatement(query);
        ps.setInt(1, rssFeedNo);
        rs = ps.executeQuery();
        if (rs.next()) {
            return mapRSSFeed(rs);
        }
        else {
            return null;
        }
    }
    catch(Exception ex) {
        logger.error("Error getting RSS_Feed " + rssFeedNo + "\n", ex);
        return null;
    }
    finally {
        Database_Utils.closeResultSet(rs);
        Database_Utils.closeStatement(ps);
        pool.freeConnection(connection);
    }
} 
```

是否可以在 servlet 引擎之外调用这样的方法？我想在从命令行而不是在 servlet 引擎中执行的批处理中执行此操作。我知道我可以简单地重写查询而不使用连接池，但这是该过程中涉及的众多查询之一。

连接池是通过 Apache Common DBCP 实现的。

**`ConnectionPool_DB.getInstance();`阅读：**

```
private ConnectionPool_DB() {
    try {
        InitialContext ic = new InitialContext();
        dataSource = (DataSource) ic.lookup(PropertiesFile.getProperty("myApp", "DATASOURCE"));
        // dataSource = (DataSource) ic.lookup("java:/comp/env/jdbc/myApp");
    }
    catch(Exception ex) {
        logger.error("Error getting a connection pool's datasource\n", ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:00:52.463

我在一个项目中有这样的事情：

```
Context ctx = new InitialContext(); 
DataSource ds = (DataSource) ctx.lookup("DbConnection");
ConnectionPool connectionPool = new ConnectionPool(ds) 
```

在上下文 xml 中，我像这样定义资源

```
<Resource name="DbConnection" 
auth="SERVLET" 
type="javax.sql.DataSource"  
scope="Shareable"            
driverClassName="**driverClassName**" 
url="**url**" 
username="**username**" 
password="**password**" 
maxActive="10" 
maxIdle="10" 
maxWait="1000"
/> 
```

所以我假设你有类似的东西如果你需要编写代码来自己创建数据源。

这应该可以帮助您解决 [http://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:05:10.017

您的意思是要在您的 servlet 引擎和批处理作业之间共享一个连接池吗？或者您想在批处理作业中使用连接池？

至于在 Tomcat 和批处理作业之间共享一个池：嗯，我不明白你会怎么做。Tomcat 和批处理作业都有自己的 Java 虚拟机实例。他们不共享内存、课程等，所以我不知道这样一个公共池会放在哪里。

如果您的意思是在批处理作业中：当然。我认为这样的事情很少需要。在批处理作业中，我通常在程序开始时打开一个连接并在最后关闭它。创建连接池没有太大价值。桌面应用程序有点棘手。我经常在应用程序启动时创建一个连接，并在它们退出时关闭它，但可以说，当用户只是盲目地盯着屏幕时（就像我经常在午餐前一个小时左右做的那样），这会建立一个连接，所以其他时候每次用户单击导致某些事情发生的键时，我都会打开一个连接，然后在返回“等待”模式之前释放它。同样，池化也没什么意义，因为在桌面应用程序中，没有其他用户可以共享池。

但是能做到吗？当然。我已经在桌面应用程序中完成了它，其中许多事情可能在不同时间发生，因此传递单个连接很尴尬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:10:19.323

当然，它可以通过稍微修改 JNDI 连接来使用。但是Tomcat应该运行。

# python - Reportlab [鸭嘴兽] - 图像不呈现

> ID：13018786
> 
> 赞同：3
> 
> 时间：2012-10-22T19:54:04.463
> 
> 标签：python, reportlab

我正在编写一份包含表格和图像混合的报告。图像 [ 实际上是图形 ] 以 .png 格式保存到文件系统中。

实际呈现 PDF 的方法是：

```
def _render_report(report_data):
    file_name = get_file_name() # generate random filename for report
    rpt = Report(settings.MEDIA_ROOT + os.sep + file_name)
    Story = []    
    for (an, sam, event), props  in report_data.iteritems():
        Story.append(Paragraph("%s - sample %s results for %s" % (an.name, sam.name, event.name), styles["Heading2"]))
        data_list = [['Lab', 'Method', 'Instrument', 'Unit', 'Raw Result', 'Converted Result', 'Outlier']]
        for (index, series) in props['frame'].iterrows():
            data_list.append(_format([
                Paragraph(Lab.objects.get(pk=series['labs']).name, styles['BodyText']),
                Paragraph(Method.objects.get(pk=series['methods']).name, styles['BodyText']),
                Paragraph(Instrument.objects.get(pk=series['instruments']).name, styles['BodyText']),
                Paragraph(Unit.objects.get(pk=series['units']).name, styles['BodyText']),
                series['raw_results'],
                series['results'],
                series['outlier']
            ]))
        table = Table(data_list, colWidths=[45 * mm, 35 * mm, 35 * mm, 25 * mm, 35 * mm, 35 * mm, 35 * mm], repeatRows=1)
        Story.append(table)
        Story.append(PageBreak())

        if props['graph'] is not None:
            Story.append(Image("/tmp/%s" % props['graph'], width=10 * inch, height=6 * inch))
            Story.append(PageBreak())
    rpt.draw(Story, onFirstPage=setup_header_and_footer, onLaterPages=setup_header_and_footer)
    return file_name 
```

**背景资料**

*   页面设置为 A4，横向
*   我的开发环境是virtualenv；PIL 1.1.7 和 reportlab 2.6 已安装并正常运行
*   上面使用的“报告”类只是一个简单的包装器，`SimpleDocTemplate`它设置了一些默认值，但委托给 SimpleDocTemplate 的`build`实现。它的代码是：

    ```
    class Report(object):
        def __init__(self, filename, doctitle="Report", docauthor="<default>",
            docsubject="<default>", doccreator="<default>", orientation="landscape", size=A4):
            DEFAULTS = {
                'leftMargin' : 10 * mm,
                'rightMargin' : 10 * mm,
                'bottomMargin' : 15 * mm,
                'topMargin' : 36 * mm,
                'pagesize' : landscape(size) if orientation == "landscape" else portrait(size),
                'title' : doctitle,
                'author' : docauthor,
                'subject' : docsubject,
                'creator' : doccreator
            }
            self.doc = SimpleDocTemplate(filename, **DEFAULTS)

        def draw(self, flowables, onFirstPage=setup_header_and_footer, onLaterPages=setup_header_and_footer):
            self.doc.build(flowables, onFirstPage=setup_header_and_footer,
                onLaterPages=setup_header_and_footer, canvasmaker=NumberedCanvas) 
    ```

**我已经看过的**

*   我已经确认图像存在于磁盘上。这些路径是完全限定的路径。
*   PIL 已安装，并且能够正确读取图像
*   分配给图像的空间足够；我已经通过计算证实了这一点。此外，如果我增加图像大小，ReportLab 会抱怨 Image Flowable 太大。当前尺寸应该适合。
*   我已经测试过分页符和不分页符；他们似乎没有任何区别

**问题**

表格、标题和页面模板呈现正常，但图像为空白。今天早些时候，我在设置此报告使用的模板时遇到了[这个问题。](https://stackoverflow.com/questions/13010930/reportlab-canvas-image-not-showing)解决方法是使用`canvas.drawInlineImage(...`. `canvas.DrawImage(...`因此，我的设置似乎存在问题；我可以使用一些关于如何调试它的指针。

**更新**

我能够应用[此链接问题](https://stackoverflow.com/questions/13010930/reportlab-canvas-image-not-showing)中使用的相同解决方法的变体（使用`canvas.drawInlineImage`代替`canvas.drawImage`。我将“图像”子类化如下：

```
class CustomImage(Image):
"""
Override - to use inline image instead; inexplicable bug with non inline images
"""
def draw(self):
    lazy = self._lazy
    if lazy>=2: self._lazy = 1
    self.canv.drawInlineImage(self.filename,
        getattr(self,'_offs_x',0),
        getattr(self,'_offs_y',0),
        self.drawWidth,
        self.drawHeight
    )
    if lazy>=2:
        self._img = None
        self._lazy = lazy 
```

“股票”图像类的唯一变化是一行 - 使用`self.canv.drawInlineImage`以前的位置`self.canvas.drawImage`。从图像最终在我的 PDF 中可见的意义上说，这“有效”。不工作的原因`drawImage`仍然是个谜。

我已经尝试过@PedroRomano 的建议（以确保图像 RGBA ），甚至尝试使用 JPEG 图像而不是 PNG。这些并没有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:19:29.623

我最终通过使用自定义`Image`子类结束了这件事：

```
class CustomImage(Image):
"""
Override - to use inline image instead; inexplicable bug with non inline images
"""
def draw(self):
    lazy = self._lazy
    if lazy>=2: self._lazy = 1
    self.canv.drawInlineImage(self.filename,
        getattr(self,'_offs_x',0),
        getattr(self,'_offs_y',0),
        self.drawWidth,
        self.drawHeight
    )
    if lazy>=2:
        self._img = None
        self._lazy = lazy 
```

将图形保存为矢量图形格式，例如 EPS、保存为 JPEG、保存为带有和不带有 alpha 通道的 PNG 似乎都没有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:28:12.003

最佳解决方案是以矢量格式（如reportlab[支持的 postscript）生成图表。](http://www.reportlab.com/apis/reportlab/dev/graphics.html#module-reportlab.graphics.renderPS)许多 UNIX 软件开箱即用，您可以在 Windows 上使用出色的[PDFCreator](http://www.pdfforge.org/)。

如果您的图形必须使用光栅图像，请尝试将图像转换为 JPEG 格式。这些可以使用[DCTDecode](http://en.wikipedia.org/wiki/Portable_Document_Format#Raster_images)过滤器轻松嵌入到 PDF 文件中。（这就是[jpeg2pdf](http://sourceforge.net/projects/jpeg2pdf/) [所做的](http://jpeg2pdf.svn.sourceforge.net/viewvc/jpeg2pdf/Jpeg2PDF.c?revision=4&view=markup)。）

# php - 没有竞争条件的安全唯一文件名

> ID：13018787
> 
> 赞同：1
> 
> 时间：2012-10-22T19:54:05.960
> 
> 标签：php

这是根据竞争条件移动上传文件的安全方法吗？

```
do { 
    $file = $path . "/" . uniqid() . '.' . $ext; 
    $fh = @fopen($file, 'x'); 
} while( ! $fh);
move_uploaded_file($src, $file); 
```

**UPD**除了学习解决问题的其他方法外，我想知道这段代码是否受制于竞争条件。AFAIU、带有“x”模式的 fopen 和 move_uploaded_file 是原子的，因此不可能发生冲突。

最重要的是，关于“uniqid 就足够了”，[几个](http://www.php.net/manual/en/function.tempnam.php#98232) [人](http://www.php.net/manual/en/function.tempnam.php#97086)在对 tempnam 的[评论](http://www.php.net/manual/en/function.tempnam.php#37762)中表示有必要将 fopen 与 'x' 模式一起使用以避免竞争条件。他们是否过于偏执？我认为，如果它不会使代码变得非常复杂，那么拥有更安全的解决方案会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:02:23.247

PHP 的[tempnam](http://php.net/manual/en/function.tempnam.php)函数保证了唯一性。或者您可以使用基于微时间戳的文件名（在 MS-Windows 下不起作用......）。

# c - C MPI 数组传递

> ID：13018790
> 
> 赞同：1
> 
> 时间：2012-10-22T19:54:09.530
> 
> 标签：c, arrays, mpi

为什么我不能从底部访问 muhray 8 行？以“！！”开头的打印行 工作正常，但我似乎无法在最后得到正确的值。

这是我的输出：

```
[computer@node01 ~]$ mpiexec -n 8 ./presum 1000
!! proc0's array is size 125 and goes from 1 to 1
proc0's array is size 125 and goes from 4693173 to 1819307369
!! proc2's array is size 125 and goes from 1 to 1
proc2's array is size 125 and goes from 4693173 to 1819307369
!! proc3's array is size 125 and goes from 1 to 1
proc3's array is size 125 and goes from 4693173 to 1819307369
!! proc1's array is size 125 and goes from 1 to 1
proc1's array is size 125 and goes from 4693173 to 1819307369
!! proc4's array is size 125 and goes from 1 to 1
proc4's array is size 125 and goes from 4693173 to 1819307369
!! proc5's array is size 125 and goes from 1 to 1
proc5's array is size 125 and goes from 4693173 to 1819307369
!! proc6's array is size 125 and goes from 1 to 1
proc6's array is size 125 and goes from 4693173 to 1819307369
!! proc7's array is size 125 and goes from 1 to 1
proc7's array is size 125 and goes from 4693173 to 1819307369 
```

这是有问题的代码：

```
 #include "mpi.h"
    #include <stdio.h>
    #include <stdlib.h>
    #include <math.h>

    //max size of the data array to split up
    #define MAXSIZE 1000000

    //methods
    int checkInput(int nprocs, int argc, char *argv[], int id);

    //mpi send & rec tags
    int ARSIZE = 0;     //array size
    int ARR = 1;        //array
    int MSM = 2;        //slave sum

    int main(int argc, char *argv[]) {

        int     ARsize;             /*size of the array to pre-sum*/
        int     id;                 /*process id number*/
        int     nprocs;             /*number of processors*/
        int     i, j, k;            /*counters*/
        int     muhsize;            /*size of personal array to calculate*/
        int     * muhray;           /**/

        //MPI framework
        MPI_Status status;
        MPI_Init(&argc, &argv);
        MPI_Comm_size(MPI_COMM_WORLD, &nprocs);
        MPI_Comm_rank(MPI_COMM_WORLD, &id);
        MPI_Barrier(MPI_COMM_WORLD);

        //pull input, check values, return ARsize
        ARsize = checkInput(nprocs, argc, argv, id);

        //set up array, serial run, send out chunks
        if (!id) {      

            //variables only the zero node needs
            int     data[ARsize];               /*full original array of numbers*/
            int     chunkSize, upper, lower;    /*vars to determine cunksize to send out*/
            int     smoothCount = 0;            /*BOOL for uneven division chunksize*/

            //fill array with numbers
            for (i = 0; i < ARsize; i++) {
                data[i] = 1;
            }

            //sequential solution here      

            //determine chunkSize
            chunkSize = (int) (ARsize/nprocs);  
            if (ARsize % nprocs != 0) {
                chunkSize = chunkSize + 1;
                smoothCount = 1;
            }

            //send chunks of data to procs
            for (i = 0; i < nprocs; i++) {          
                lower = i * chunkSize;
                upper = ((i+1) * chunkSize) - 1;
                if (i == nprocs-1 && smoothCount == 1) {
                    upper = ARsize-1;
                }
                int intarray[(upper-lower)];
                for (k = lower, j = 0; k <= upper; k++, j++) {
                    intarray[j] = data[k];   
                    }
                if(i > 0) {
                    //send array size
                    MPI_Send(&j, 1, MPI_INT, i, ARSIZE, MPI_COMM_WORLD);
                    //send actual array
                    MPI_Send(intarray, j, MPI_INT, i, ARR, MPI_COMM_WORLD); 
                }
                //zero no send to self, this data used later for all nodes calc
                else {
                    muhsize = j;
                    int muhray[muhsize];
                    for (j = 0; j <= chunkSize; j++) {
                        muhray[j] = intarray[j];
                    }   
                    printf("!! proc%d's array is size %d and goes from %d to %d\n", id, muhsize, muhray[0], muhray[(muhsize-1)]);
                }
            }       
        }
        else {

            MPI_Recv(&muhsize, 1, MPI_INT, 0, ARSIZE, MPI_COMM_WORLD, &status);
            int muhray[muhsize];
            MPI_Recv(muhray, muhsize, MPI_INT, 0, ARR, MPI_COMM_WORLD, &status);
            printf("!! proc%d's array is size %d and goes from %d to %d\n", id, muhsize, muhray[0], muhray[(muhsize-1)]);
            fflush(stdout);
        }

        printf("proc%d's array is size %d and goes from %d to %d\n", id, muhsize, muhray[0], muhray[muhsize]);
        fflush(stdout);
        //MPI_Send(&muhsize, 1, MPI_INT, 0, MSM, MPI_COMM_WORLD);       

        MPI_Finalize();

    }

//pull input, check values, return ARsize
int checkInput(int nprocs, int argc, char *argv[], int id) {

    int size;

    if (nprocs % 2 != 0 || nprocs == 6 || nprocs > 8) {
        if (!id) printf("run with 2^k procs, (1 >= k <= 3)\n");  
        fflush(stdout);
        MPI_Finalize();
        exit(1);
    }
    if (argc != 2) {
        if (!id) printf("Usage: presum [array size (max: %d)]\n", MAXSIZE);
        fflush(stdout);
        MPI_Finalize();
        exit(1);        
    }
    size = atoi(argv[1]);
    if (size <= nprocs) {
        if (!id) printf("search range must be greater than processor count\n");
        fflush(stdout);
        MPI_Finalize();
        exit(1);
    }
    if (size > MAXSIZE) {
        if (!id) printf("array size must be less than or equal to %d\n", MAXSIZE);
        fflush(stdout);
        MPI_Finalize();
        exit(1);
    }
    return size;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:05:32.180

您遇到的问题很可能与变量范围有关。例如这里：

```
...
else {
    MPI_Recv(&muhsize, 1, MPI_INT, 0, ARSIZE, MPI_COMM_WORLD, &status);
    int muhray[muhsize];
    MPI_Recv(muhray, muhsize, MPI_INT, 0, ARR, MPI_COMM_WORLD, &status);
    printf("!! proc%d's array is size %d and goes from %d to %d\n", id, muhsize, muhray[0], muhray[(muhsize-1)]);
    fflush(stdout);
}

printf("proc%d's array is size %d and goes from %d to %d\n", id, muhsize, muhray[0], muhray[muhsize]); 
```

您在构造`int muhray[muhsize];`范围内声明。`else`当您退出时，此范围`muhray`被破坏，因为它是一个局部变量。您最后使用的`printf`似乎是`int * muhray;`在 main 之后立即声明的未初始化。

请注意，虽然它们具有相同的名称，但这两个是**不同**的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:05:24.820

看来您要打印两次“muhray[(muhsize-1)]”，最后打印“muhray[muhsize]”。您应始终打印“muhray[(muhsize-1)]”的值。

带有两个 MPI_Recv 调用的 else 部分使用了一个名为“muhray”的本地定义变量，它与最初在主函数中定义的变量不同（它实际上隐藏了在主函数开头定义的 muhray）。因此 "printf("!!..." 使用的变量与上一次 "printf("proc..." 调用完全不同。

# android - menu.xml 中的 ActionbarSherlock SearchView 给出 Resources$NotFoundException

> ID：13018794
> 
> 赞同：8
> 
> 时间：2012-10-22T19:54:14.930
> 
> 标签：android, actionbarsherlock

当我尝试将 ActionbarSherlock 添加`SearchView`到我的 ActionBar 时，应用程序会在应显示活动时立即崩溃。作为这个原因，我在 LogCat 中发现了以下内容：

```
10-22 21:22:51.070: W/MenuInflater(21873): Cannot instantiate class: com.actionbarsherlock.widget.SearchView
...
10-22 21:22:51.070: W/MenuInflater(21873): Caused by: java.lang.reflect.InvocationTargetException
10-22 21:22:51.070: W/MenuInflater(21873):  at java.lang.reflect.Constructor.constructNative(Native Method)
10-22 21:22:51.070: W/MenuInflater(21873):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-22 21:22:51.070: W/MenuInflater(21873):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
10-22 21:22:51.070: W/MenuInflater(21873):  ... 32 more
10-22 21:22:51.070: W/MenuInflater(21873): Caused by: android.content.res.Resources$NotFoundException: Resource is not a ColorStateList (color or path): TypedValue{t=0x2/d=0x7f01001f a=-1}
10-22 21:22:51.070: W/MenuInflater(21873):  at android.content.res.Resources.loadColorStateList(Resources.java:2035)
10-22 21:22:51.070: W/MenuInflater(21873):  at android.content.res.TypedArray.getColorStateList(TypedArray.java:342)
10-22 21:22:51.070: W/MenuInflater(21873):  at android.widget.TextView.<init>(TextView.java:768)
10-22 21:22:51.070: W/MenuInflater(21873):  at android.widget.TextView.<init>(TextView.java:442) 
```

当我使用常规`android.widget.SearchView`时，`android:actionViewClass`一切正常。我按照Android 网站上的[教程进行操作。](http://developer.android.com/guide/topics/search/search-dialog.html)

这是我的菜单 xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/menu_search"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
        android:icon="@drawable/ic_action_search"
        android:showAsAction="ifRoom|collapseActionView"
        android:title="@string/menu_search"/>

    <item android:id="@+id/menu_add_page"
        android:title="@string/menu_add_page"
        android:icon="@drawable/ic_action_add"
        android:showAsAction="always" />

    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:showAsAction="never" />
</menu> 
```

这是相关的代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_overview, menu);

    // Get the SearchView and set the searchable configuration
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

    return true;
} 
```

这是一个（已知的）错误，还是我在这里遗漏了其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:56:13.600

此问题是由于 v-14 版本的 Sherlock Theme 中缺少某些属性引起的。

我通过添加来修复它

```
<item name="textColorPrimary">@color/abs__primary_text_holo_light</item>
<item name="textColorPrimaryInverse">@color/abs__primary_text_holo_dark</item> 
```

到夏洛克主题，它又运行得很漂亮。不确定是否理想的解决方案，但现在它可以工作:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:56:21.257

`SearchView`in `ActionbarSherlock`is / 是一个已知问题。该`dev`分支包含支持，但它并不完整，并且似乎他们仍然对建议有问题。

请参阅此处和[此处的](https://github.com/JakeWharton/ActionBarSherlock/issues/659)[github](https://github.com/JakeWharton/ActionBarSherlock/issues/70#issuecomment-7913573)以供参考。

这是指向`ActionBarSherlock`>`SearchView` [来源的链接](https://github.com/JakeWharton/ActionBarSherlock/blob/dev/library/src/com/actionbarsherlock/widget/SearchView.java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:09:41.577

正如*hahnjo在*[这里](https://github.com/JakeWharton/ActionBarSherlock/issues/685)提到的：

> 如果您使用主题`Theme.Sherlock.Light.DarkActionBar`并使用 创建视图`new SearchView(this)`，它将无法正常工作... 可以使用的组合： `Theme.Sherlock.Light.DarkActionBar`with`new SearchView(getSupportActionBar().getThemedContext())` `Theme.Sherlock.Light`或`Theme.Sherlock.Light`with`new SearchView(this)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:13:58.127

我也收到了这个错误，但这是因为我没有`android:theme`在. `<application>``AndroidManifest.xml`

一旦我`android:theme="@style/Theme.Sherlock"`在`<application>`节点上设置，问题就解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-29T07:29:28.393

我发现我必须执行以下所有操作才能使其正常工作：

确保在 AndroidManifest.xml 中设置了应用程序主题：

`<application android:name="com.xxx.MyApplication" android:theme="@style/AppTheme">`

我将“缺失”设置添加到基本样式中：

```
<style>
    <item name="textColorPrimary">@color/abs__primary_text_holo_light</item>
    <item name="textColorPrimaryInverse">@color/abs__primary_text_holo_dark</item>
    <item name="searchDropdownBackground">@drawable/abs__search_dropdown_dark</item>
    <item name="searchViewTextField">@drawable/abs__textfield_searchview_holo_dark</item>
    <item name="searchViewTextFieldRight">@drawable/abs__textfield_searchview_right_holo_dark</item>
    <item name="searchViewCloseIcon">@drawable/abs__ic_clear</item>
    <item name="searchViewSearchIcon">@drawable/abs__ic_search</item>
    <item name="searchViewGoIcon">@drawable/abs__ic_go</item>
    <item name="searchViewVoiceIcon">@drawable/abs__ic_voice_search</item>
    <item name="searchAutoCompleteTextView">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>
 </style> 
```

然后更新我的 Activity.onCreateOptionsMenu() 以将“主题上下文”传递给菜单充气器，例如：

```
@Override
public boolean onCreateOptionsMenu(final Menu menu)
{
    final MenuInflater inflater = new MenuInflater(this.getSupportActionBar().getThemedContext());
    inflater.inflate(R.menu.main_menu, menu);
    this.initSearchView(menu);
    return true;
} 
```

然后将相同的主题上下文传递给 SearchView 创建/初始化：

```
private void initSearchView(final Menu menu)
{
    final SearchManager searchManager = (SearchManager) this.getSystemService(Context.SEARCH_SERVICE);
    final MenuItem searchViewMenuItem = menu.findItem(R.id.menu_search);

    final SearchView searchView = new SearchView(this.getSupportActionBar().getThemedContext());
    searchView.setSearchableInfo(searchManager.getSearchableInfo(this.getComponentName()));
    searchView.setIconifiedByDefault(false);
    searchView.setOnQueryTextFocusChangeListener(new View.OnFocusChangeListener()
    {
        @Override
        public void onFocusChange(final View v, final boolean hasFocus)
        {
            if (!hasFocus)
            {
                // Collapse the searchbox on ActionBar
                searchViewMenuItem.collapseActionView();
            }
        }
    });
} 
```

我希望这对某人有所帮助，或者它得到“修复”，这样就可以了。

# networking - 我可以 DNS 记录点到任何 IP 吗？

> ID：13018795
> 
> 赞同：-1
> 
> 时间：2012-10-22T19:54:21.863
> 
> 标签：networking

1)

是否有可能让 DNS A 记录指向一个不存在/应该是不存在的 IP？

本质上是否有任何东西可以*阻止*DNS 记录链接到任何东西？

前任。有人可以进入 DNS 记录并将其更改为指向恶意内容。前任。有人可以指出 www.company.com --> 1.1.1.1 是恶意攻击者的 IP 吗？

2)

由此：

前任。[http://www.team-cymru.org/Services/Bogons/http.html](http://www.team-cymru.org/Services/Bogons/http.html)

那些笨蛋。是否有可能让 DNS 记录指向其中一个，并且有些人认为它们是这个 IP 有多“假”？我认为是通过 IP 欺骗？网站是否可以通过 DNS 和 IP 欺骗的组合来模拟它实际上是一个不同的 IP 地址？

*   是什么阻止了某人说某个 DNS 链接到任何 IP。有什么检查吗？
*   是否可以使用 DNS 隐藏实际的服务提供商并以某种方式从 IP (A) 提供服务，但“说”它是从 IP (B) 提供服务。我相信，由于 DNS 只应该告诉您要连接的 IP，我认为这是不可能的，但我不确定。

谢谢，

请求重新开放：为什么这不是一个有效的问题？从我的角度来看，这是我面临的一个有效的网络安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:58:37.713

IP 地址始终存在。它们只是数字。可能发生的情况是名称被解析为地址，因为有一个 dns 记录这样做，而该地址没有列出服务器。甚至没有系统使用该地址。

如果可以将这种情况“使用”到取决于一百万件事的任何事情上，那么没有明确的问题就无法给出答案。

# python - Cherrypy 和解析来自多个文件的 XML 数据

> ID：13018799
> 
> 赞同：0
> 
> 时间：2012-10-22T19:54:34.953
> 
> 标签：python, xml, xml-parsing, cherrypy

所以这是我有的另一个问题的附带帖子。我已经成功地从多个 xml 文件中提取数据，并且能够使用打印功能在终端中显示数据，但是当我尝试使用返回函数在浏览器中显示数据时，我只能从第一个文件。关于为什么我只从第一个文件而不是所有文件中获取数据的任何想法？谢谢！

```
from xml.dom.minidom import parse, parseString
import os, glob, re
import cherrypy
class Root(object):
    def index(self):
        path = 'C:\Vestigo\XML'

        TOTALXML = len(glob.glob(os.path.join(path, '*.xml')))
        print TOTALXML
        i = 0

        for XMLFile in glob.glob(os.path.join(path, '*.xml')):
            xmldoc = parse(XMLFile)
            order_number = xmldoc.getElementsByTagName('Extrinsic')[0].firstChild.data
            order_name = xmldoc.getElementsByTagName('DeliverTo')[0].firstChild.data
            street1 = xmldoc.getElementsByTagName('Street1')[0].firstChild.data
            state = xmldoc.getElementsByTagName('State')[0].firstChild.data
            zip_code = xmldoc.getElementsByTagName('PostalCode')[0].firstChild.data
            OUTPUTi = order_number+' '+order_name+' '+street1+' '+state+' '+zip_code
            i += 1
            print OUTPUTi
        return (OUTPUTi, """<br><br><a href="/exit">Quit</a>""")
    index.exposed = True

    def exit(self):
        raise SystemExit(0)
    exit.exposed = True

def start():
    import webbrowser
    cherrypy.tree.mount(Root(), '/')
    cherrypy.engine.start_with_callback(
        webbrowser.open,
        ('http://localhost:8080/',),
        )
    cherrypy.engine.block()

if __name__=='__main__':
    start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:00:43.917

您没有在任何地方收集数据；您将所有内容存储在名为 的变量中`OUTPUTi`，然后仅返回该变量的最后一次迭代。Python 不会神奇地使该变量使用`i`计数器。

使用列表收集字符串：

```
 TOTALXML = len(glob.glob(os.path.join(path, '*.xml')))
    print TOTALXML
    OUTPUT = []

    for XMLFile in glob.glob(os.path.join(path, '*.xml')):
        xmldoc = parse(XMLFile)
        order_number = xmldoc.getElementsByTagName('Extrinsic')[0].firstChild.data
        order_name = xmldoc.getElementsByTagName('DeliverTo')[0].firstChild.data
        street1 = xmldoc.getElementsByTagName('Street1')[0].firstChild.data
        state = xmldoc.getElementsByTagName('State')[0].firstChild.data
        zip_code = xmldoc.getElementsByTagName('PostalCode')[0].firstChild.data
        OUTPUT.append(order_number+' '+order_name+' '+street1+' '+state+' '+zip_code)
        print OUTPUT[-1]

    OUTPUT = ''.join(OUTPUT)
    return (OUTPUT, """<br><br><a href="/exit">Quit</a>""") 
```

# php - Symfony 2 AvalancheImagineBundle 图像过滤器

> ID：13018803
> 
> 赞同：1
> 
> 时间：2012-10-22T19:54:50.387
> 
> 标签：php, symfony, twig

输入：

```
{% for car in closet %}
<img src="{{ asset('images/') }}{{ car.photo1 }}" />
{% endfor %} 
```

html输出：

```
<img src="/images/1bb8cee7cd58403ba84daee67d82fa869ec6052d.jpeg" /> 
```

如何从 AvalancheImagineBundle 应用它：

```
<img src="{{ '/relative/path/to/image.jpg' | apply_filter('my_thumb') }}" /> 
```

我无法正常工作，因为路径和文件名是分开的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:00:40.130

简单地：

`<img src="{{ (asset('images/') ~ car.photo1) | apply_filter('my_thumb') }}" />`

# javascript - 从嵌套函数中获取返回值

> ID：13018804
> 
> 赞同：0
> 
> 时间：2012-10-22T19:55:01.223
> 
> 标签：javascript, jquery-plugins, google-visualization, html5-filesystem

脚本新手，请善待。
尝试使用 jquery-csv 解析器从本地文件创建图表。使用谷歌即。
这部分代码我似乎无法从中获得返回值。要求选择的已解析文件的返回值。

使用回调更好吗？我将如何实施？已经尝试过，但似乎无法做到。

```
 function chartData(fileToParse) {
var reader = new FileReader();
reader.readAsText(fileToParse);
reader.onload = function(){
  var csv = event.target.result;
 var parsedData = $.csv.toArrays(csv,{onParseValue:$.csv.hooks.castToScalar});
 return parsedData
};
return reader.onload.value;

reader.onerror = function(){ alert('Unable to read ' + file.fileName); }; 
```

}

我已经使用此代码修改以在屏幕上以表格形式显示数据，但在将其发送到谷歌服务器时遇到了困难。

非常感谢任何建议或指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:00:11.333

> *“使用回调更好吗？”*

是的，这将是正确的解决方案

> *“我将如何实施？”*

1.  `chartData`为您的函数定义第二个参数。

2.  调用时`chartData`，将回调作为第二个参数传递。

3.  在事件处理程序中，以与调用任何函数相同的方式调用回调，但将所需的数据传递给它。

* * *

```
 // receive it-----v
 function chartData(fileToParse, callback) {
     var reader = new FileReader();
     reader.readAsText(fileToParse);
     reader.onload = function () {
         var csv = event.target.result;
         var parsedData = $.csv.toArrays(csv, {
             onParseValue: $.csv.hooks.castToScalar
         });
         callback(parsedData); // call it
     };

     reader.onerror = function () {
         alert('Unable to read ' + file.fileName);
     };
 } 
```

所以你会像这样调用它：

```
chartData('file/path', function(parsed) {
    console.log(parsed);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:01:19.740

首先，请不要要求我们友善，因为这是您的“不友善”假设

通常，您不能从异步函数返回值。您应该考虑为什么要返回一个值，看看是否可以从另一个角度看待它。例如，你需要用 parsedData.. 填充一个 textarea 做什么？，将一些元素附加到 Dom？.. 然后就在那里做！

让我们知道您从 parsedData 中需要什么，我们可以提供帮助。

最后，在绝望中，您可以将响应附加到全局对象，例如窗口，但这会产生许多其他问题

# c# - 如何在 XP 和 7 之间使用不同的浏览器或 CredentialCache.DefaultCredentials 等代理

> ID：13018805
> 
> 赞同：8
> 
> 时间：2012-10-22T19:55:24.347
> 
> 标签：c#, .net-3.5, proxy, credentials

我能够解决客户端无法通过代理进行身份验证的问题，执行以下操作：

```
 var proxy = WebRequest.GetSystemWebProxy();
    proxy.Credentials = CredentialCache.DefaultNetworkCredentials;
    service.Proxy = proxy; 
```

这适用于 Windows XP，但是在 Windows 7 上我得到一个 407（代理未经过身份验证的异常）。有谁知道有什么区别，更重要的是，我需要做什么才能让它在两个操作系统上工作？

**更新**

我让用户检查以下内容：

1.  在注册表编辑器中，您可以转到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon 并让我知道 CachedLogonsCount 的值是多少。F
2.  在开始框中，输入组策略，然后会弹出一个编辑组策略的选项，单击它。然后转到计算机配置\管理模板\系统\用户配置文件\删除漫游配置文件的缓存副本，让我知道它是否已配置，如果是，它设置了什么？

**赏金更新**

所以，我添加了赏金。我可以从这里采取解决方案，或者只是通过 Windows 7 上的代理的替代方法......

**另一个更新**

我不确定这是否有用，但我们也在做以下事情：

```
service.PreAuthenticate = true;
service.Url = "myurl";
service.Credentials = new NetworkCredential(txt_UserName.Text, txt_Password.Text); 
```

**我的临时解决方案**

这不是一个真正的解决方案，但现在有效。我正在使用 app.config 并将代理设置为默认值，并使用 ByPassList 以便甚至不使用代理。这只是可行的，因为代理目前没有强大的防火墙。对于其他客户，我需要让上述工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T03:33:24.377

实际上看起来他们在 Win7 中“修复”了它 :) 你能确认客户端和服务器都指定了 http 1.1

> 现在让我们讨论一下为什么浏览器会在这种情况下工作。IE 在后台使用 WinINet 而不是 WinHTTP。如果我们查看网络跟踪，我们会看到 IE 发送 HTTP/1.1，但代理以 HTTP/1.0 回复。IE 仍然接受这种行为，因为在互联网场景中有无数的客户端和服务器仍然使用 HTTP/1.0。
> 
> WinHTTP 严格要求符合 HTTP/1.1 以保持连接处于活动状态，并且 HTTP/1.0 协议不支持 HTTP Keep-Alives。HTTP Keep-Alive 功能是根据 RFC 2616 在 HTTP/1.1 协议中引入的。期望 keep-alive 的服务器或代理也应该正确实现该协议。Windows 7、Windows 2008 R2 上的 WinHTTP 在安全性 wrto 协议合规性方面非常严格。理想的解决方案是更改服务器/代理以使用正确的协议并符合 RFC。

[http://blogs.msdn.com/b/httpcontext/archive/2012/02/21/changes-in-winhttp-on-windows-7-and-onwards-wrto-http-1-0.aspx](http://blogs.msdn.com/b/httpcontext/archive/2012/02/21/changes-in-winhttp-on-windows-7-and-onwards-wrto-http-1-0.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T01:45:35.590

这段代码适用于 XP、Win7 和 2008

```
var webProxy = new WebProxy(WebRequest.DefaultWebProxy.GetProxy(new Uri({TheURLoftheService})));
webProxy.Credentials = CredentialCache.DefaultCredentials;
webProxy.UseDefaultCredentials = true;
service.Proxy = webProxy; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T20:44:23.407

这行得通吗？

我正在使用它来设置代理，到目前为止我们在所有windows平台上都没有遇到错误

```
Uri address = new Uri("http://your-webservice-address");

//Get User current network credential
ICredentials credentials = CredentialCache.DefaultCredentials;
NetworkCredential credential = credentials.GetCredential(address, "Basic");

//Get HttpWebRequest
HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;

//Network Credential should be included on the request to avoid network issues when requesting to the web servic
request.Proxy = WebRequest.DefaultWebProxy;
request.Credentials = new NetworkCredential(credential.UserName, credential.Password, credential.Domain); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T21:27:00.943

根据您提供的代码很难说。我怀疑它是您的 IE 设置或您的代理变量。

检查[http://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/61b71194-1758-4c7b-89fe-91be7363db13](http://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/61b71194-1758-4c7b-89fe-91be7363db13)它*可能会*有所帮助。

# asp.net - ASP.net 此实现不是 Windows 平台 FIPS 验证的加密算法的一部分

> ID：13018808
> 
> 赞同：2
> 
> 时间：2012-10-22T19:55:33.063
> 
> 标签：asp.net, cryptography, standards-compliance, pci-compliance, fips

嘿，我在尝试使用我的 ASP.net 页面比较数据库中的密码时遇到此错误。

**此实现不是 Windows 平台 FIPS 验证的加密算法的一部分。**

代码如下所示：

```
Public Shared Function UserAuthentication(ByVal user As String, ByVal pass As String) As WebUserSession
  Dim strSQL As String = ""
  Dim strForEncryption As String = pass
  Dim result As Byte()
  Dim sHA1Managed As SHA1 = New SHA1Managed()
  Dim encryptedString As New System.Text.StringBuilder()

  result = sHA1Managed.ComputeHash(ASCIIEncoding.ASCII.GetBytes(pass))

  For Each outputByte As Byte In result
    'convert each byte to a Hexadecimal upper case string
    encryptedString.Append(outputByte.ToString("x2").ToUpper())
  Next

  strSQL &= "SELECT email, name, id, permission_id, username FROM (user) INNER JOIN user_per ON user.id = user_per.user_id "
  strSQL &= "WHERE(username = '" & user & "' And password = '" & encryptedString.ToString() & "')" 
```

我们最近不得不更新/锁定我们的服务器以符合安全漏洞等。但是这样做会导致我们在同一服务器上托管的其中一个网站出现此错误。在所有这些安全设置之前，网站运行良好。

**奇怪的是，我能够在 VS 2010 中本地运行网站（调试模式），而且效果很好。完全没有错误。**

在我们添加所有这些安全设置以进行投诉之前，是否有人对如何解决此问题以使网站再次运行有任何提示？我们不能只是禁用它，因为这会导致我们的其他网站不合规。

我已经尝试过这些页面上的建议：http: [//blogs.msdn.com/b/brijs/archive/2010/08/10/issue-getting-this-implementation-is-not-part-of-the -windows-platform-fips-validated-cryptographic-algorithms-exception-while-building-outlook-vsto-add-in-vs-2010.aspx](http://blogs.msdn.com/b/brijs/archive/2010/08/10/issue-getting-this-implementation-is-not-part-of-the-windows-platform-fips-validated-cryptographic-algorithms-exception-while-building-outlook-vsto-add-in-in-vs-2010.aspx)

[http://social.msdn.microsoft.com/Forums/en/clr/thread/7a62c936-b3cc-4493-a3cd-cc5fd18b6b2a](http://social.msdn.microsoft.com/Forums/en/clr/thread/7a62c936-b3cc-4493-a3cd-cc5fd18b6b2a)

[http://support.microsoft.com/kb/935434](http://support.microsoft.com/kb/935434)

[http://blogs.iis.net/webtopics/archive/2009/07/20/parser-error-message-this-implementation-is-not-part-of-the-windows-platform-fips-validated-cryptographic-算法-当-net-page-has-debug-true.aspx](http://blogs.iis.net/webtopics/archive/2009/07/20/parser-error-message-this-implementation-is-not-part-of-the-windows-platform-fips-validated-cryptographic-algorithms-when-net-page-has-debug-true.aspx)

[http://blog.aggregatedintelligence.com/2007/10/fips-validated-cryptographic-algorithms.html](http://blog.aggregatedintelligence.com/2007/10/fips-validated-cryptographic-algorithms.html)

谢谢。

**也尝试使用此代码**

```
Dim p As String = Password.Text.ToString
Dim data(p) As Byte
Dim result() As Byte
Dim sha As New SHA1CryptoServiceProvider()

result = sha.ComputeHash(data) 
```

错误是：

**从字符串“S51998Dg5”到类型“Integer”的转换无效。**

并且该错误在线：**Dim data(p) As Byte**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:15:21.477

根据[this](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1managed.sha1managed%28v=vs.85%29.aspx) sha1managed 不符合fips。它会抛出 InvalidOperationException，因为此类不符合 FIPS 算法。

您需要禁用 FIPS 合规性或使用 FIPS 合规实施。[sha1cryptoserviceprovider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1cryptoserviceprovider.aspx)我认为是 FIPS 投诉。

# java - mockito 模拟验证

> ID：13018809
> 
> 赞同：0
> 
> 时间：2012-10-22T19:55:39.100
> 
> 标签：java, mockito

```
//Let's import Mockito statically so that the code looks clearer
import static org.mockito.Mockito.*;

//mock creation
List mockedList = mock(List.class);

//using mock object
mockedList.add("one");
mockedList.clear();

//verification
verify(mockedList).add("one");
verify(mockedList).clear(); 
```

我不明白这个结构的意义何在？它有什么帮助？它与仅调用函数有什么不同？
文档相当薄。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:03:04.660

当您`mockedList.add("one");`在同一时间执行操作`mocked object`时，它会记住您的操作。因此，当您这样做时`verify(mockedList).add("one");`，它会验证`add`被调用`mockedList`的参数`one`。

希望你能有所作为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T22:06:34.553

您希望测试`Foo`A 类的某个方法调用`Bar`B 类对象的某个方法。换句话说，您正在测试 A 类。在测试期间，您模拟了 B 类。然后将此模拟对象传递给A 类（取决于 A 类的实际工作方式）。当您的测试运行`Foo`类 A 的方法时，您期望在`Bar`类 B 的模拟上调用该方法。通过调用`verify`该`Bar`方法，在该`Foo`方法测试之后，您可以检查该`Foo`方法是否实际工作正常——即它调用`Bar`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T03:15:27.337

mockito 的 verify 方法是验证方法调用次数，如果调用时间为 1，我们可以省略这个参数，见 Mockito 源码 1473 行

```
public static <T> T verify(T mock) {
    return MOCKITO_CORE.verify(mock, times(1));
} 
```

所以你编码

```
verify(mockedList).add("one");
//is the same as
verify(mockedList,times(1)).add("one"); 
```

确实是验证 add 方法执行一次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:45:10.550

实际上，在您的示例中，这很明显，但验证方法调用的主要思想出现在实际代码测试期间 - 想象一些代码执行方法调用，例如：

```
class A{
 ....
 service.doSomething(<some arguments>)
 ....
} 
```

为了测试它，您将传递模拟服务对象，但有时您想验证为该调用（或调用次数）传递的特定参数值，因此您将像在示例中一样使用验证。

# objective-c - 如何在 Objective-C 中生成 pi 的所有数字

> ID：13018816
> 
> 赞同：-6
> 
> 时间：2012-10-22T19:55:54.697
> 
> 标签：objective-c, xml, ipad, nsarray

我想创建一个名为“我在 Pi 中吗？”的 iPad 应用程序。用 Pi 数字检查生日数字并显示数字。我的问题是如何生成所有数百万个 pi 3.1415.... 等。Objective-C 或 XML 文件或函数中是否有任何库可以用于我的实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T20:03:30.707

与其生成 pi 并搜索特定的数字序列，不如一直简单地说“是”。没有证据表明任何序列*不在*pi 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T20:25:07.917

为 pi 获取 1 兆字节的文本。

编写脚本，所有 1、2、3 和 4 位数字序列都存在于该文件中。只有以下 5 位序列不存在于 pi 的前 1M 位中：

```
!!! 14523 not found
!!! 17125 not found
!!! 22801 not found
!!! 33394 not found
!!! 36173 not found
!!! 39648 not found
!!! 40527 not found
!!! 96710 not found 
```

不是每次都扫描文本文件，而是索引所有“#”、“##”、“###”、“####”字符串的位置。

如果您希望在字符串中找到所有 5 个或更长的数字，请包含更大版本的 pi 数字。

当数据文件不是那么大时，计算 ipad 上 pi 的前 N ​​百万位是浪费 CPU 和电池。

# jquery - 将内容添加到 jQuery UI 日期选择器

> ID：13018817
> 
> 赞同：0
> 
> 时间：2012-10-22T19:55:55.953
> 
> 标签：jquery, jquery-mobile, jquery-ui-datepicker

客户在日历中的某些日子需要蓝色和黄色“点”。我已经掌握了点（简单的 CSS），但我正在寻找有关将这些添加（以及在何处）添加到日期选择器的最佳方法的指导。我已经修改了移动日期选择器（仅供参考）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:33:28.837

弄清楚了：数字天数位于标签内，因此人们只需找到您需要的天数（例如 15）并添加 css

```
$("td > a:contains('15')").addClass('yellowDot'); 
```

# authentication - 用于 nginx 的 auth_tkt？

> ID：13018821
> 
> 赞同：1
> 
> 时间：2012-10-22T19:56:13.383
> 
> 标签：authentication, module, nginx

我正在为**Nginx寻找**[mod_auth_tkt](http://www.openfusion.com.au/labs/mod_auth_tkt/)？我有多个使用 auth_tkt 兼容 cookie 的应用程序，并希望拥有 SSO。我不想使用 apache2 mod_auth_tkt，因为我已经运行了 nginx。是否有适用于 nginx 的 auth_tkt 兼容模块？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:58:51.630

我今天遇到了这个挑战（使用 Nginx 的多域 SSO），所以我想迟到总比没有好。

我来自使用 auth_tkt 和 Apache2。

最终，我完成了[Pubcookie](http://www.pubcookie.org/)的实现，有人为此编写并记录了[Nginx 模块](http://www.vitki.net/book/page/pubcookie-module-nginx)。

设置非常相似：

1.  CGI 脚本拦截请求并使用配置的任何机制为用户执行登录过程

2.  认证成功后：

    一个。cookie 被设置在`enterprise_domain`

    湾。用户被重定向到最初请求的资源

不过有一些警告，我不得不对 pubcookie 和 nginx 模块的源代码进行一些修改，以使其与非 SSL 站点一起工作——它似乎是用 SSL 作为固定假设编写的。**

# jakarta-ee - 如何在 Apache Click 中使用表格控件

> ID：13018825
> 
> 赞同：2
> 
> 时间：2012-10-22T19:56:29.270
> 
> 标签：jakarta-ee, controls, rich-client-platform, click-framework

我想知道如何在[Apache Click](https://click.apache.org/)中使用 Table 控件。我真正需要知道的是如何填充表格控件。到目前为止，我看到的示例涉及使用示例中未定义的方法。在下面的示例中，方法 getCustomerService() 和 getCustomersSortedByName(10) 没有定义，这使得该示例难以理解。有人知道填充表格控件的简单方法吗？一个完整的例子会很棒。

```
public class SimpleTablePage extends Page {
    @Bindable protected Table table = new Table();

    // Constructor ------------------------------------------------------------
    public SimpleTablePage() { 
        table.setClass(Table.CLASS_ITS);
        table.addColumn(new Column("id"));
        table.addColumn(new Column("name"));            
        table.addColumn(new Column("email"));
        table.addColumn(new Column("investments"));
    }

    // Event Handlers ---------------------------------------------------------
    /** * @see Page#onRender() */
    @Override
    public void onRender() { 
        List list = getCustomerService().getCustomersSortedByName(10); 
        table.setRowList(list);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T16:46:20.347

我意识到这个问题已经存在几个月了，但它没有任何答案，我觉得它值得一个。

我也对这个例子感到失望。没有迹象表明该列表应该是什么。我不记得我是如何找到这个答案的。也许是盯着表格的代码太久了。数据的实际呈现位于 Column 类的 render 方法中。

应该在 setRowList 函数中传递给 Table 的 List 应该是 List<Map<String,Object>>。每个 Map 代表一行，其中 Map 以表的列名为键。该行单元格的内容将是 Maps 值的 toString() 方法的结果。

```
private List<Map<String,Object>> getCustomersSortedByName( final int count )
{
    final List<Map<String,Object>> toReturn = new LinkedList<Map<String,Object>>();
    //I call all my return variables "toReturn" so I know what's going to come out.

    final Customer customers[count];

    //populate your customer array and sort it here

    for( final Customer customer : customers )
    {
        final Map<String,Object> customerMap = new HashMap<String,Object>();
        customer.put( "id", customer.getId() );
        customer.put( "name", customer.getName() );
        customer.put( "email", customer.getEmail() );
        customer.put( "investments", customer.getInvestments() );

        toReturn.add( customerMap );
    }

    return toReturn;
} 
```

这不是剪切和粘贴代码，可能会产生错误。它仍然是 Table.setRowList(List) 的演示。

还有 Table.setDataProvider(DataProvider) 方法，但在我看来，这似乎是一种更长的方法来做 setRowList 已经做的事情。DataProvider 也需要一个返回 Map<String,Object> 的迭代器。我还没有发现使用这种方法的优势，但我已经在示例代码中使用了它。

```
public TestPage extends Page
{
    private Table table = new Table( "table" );

    @Override
    public void onInit()
    {
        table.addColumn( new Column( "property", "property" ) );
        table.addColumn( new Column( "value", "value" ) );
        table.setDataProvider( new DataProvider(){
                                                  public List getData(){
                                                          return someList();
                                                  }
                                                  } );
        addControl( table );
    }

    private List<Map<String,String>> someList()
    {
        final List<Map<String,String>> toReturn = new LinkedList<Map<String,String>>();
        final Enumeration e = System.getProperties().propertyNames();
        while( e.hasMoreElements() )
        {
            final String prop = (String) e.nextElement();
            final Map<String,String> property = new TreeMap<String,String>();
            property.put( "property", prop );
            property.put( "value", System.getProperty( prop, "N/A" ) );
            toReturn.add( property );
        }
        return toReturn;
    }
} 
```

这只是昨天编写的概念验证代码，所以我没有费心清理它。我不确定这里有什么优势，因为无论您使用哪种方法，渲染所有这些所需的时间都是相同的。使用这种方法，数据处理发生在渲染而不是初始化时。似乎这是一种惰性初始化模式，因为在渲染之前没有对数据进行任何处理。

# c++ - C++类成员作为数组，打包失败案例

> ID：13018827
> 
> 赞同：0
> 
> 时间：2012-10-22T19:56:35.403
> 
> 标签：c++, gcc, memory-alignment

我想知道是否存在使用指针迭代相同类型的成员变量会失败的具体情况？我知道成员打包/填充是实现定义的，但在我尝试过的实现（gcc、clang 和 Visual Studio）中，我不能让它失败。

即使是可能失败的情况，例如以下情况，也都成功了：

```
#pragma pack(16)

struct MyStruct 
{
    char firstChar;
    char mySecondChar;
    char thirdChar;
};

class MyContainerStruct
{
public:
    uint64_t big;
    MyStruct z1;
    MyStruct z2;
} gStruct;

main()
{
    MyStruct *pStruct = &(gStruct.z1); // Start with gStruct.z1
    pStruct++;                        // Iterate to gStruct.z2
    cout << pStruct->myThirdChar;
} 
```

谁能找到迭代相同类型的类成员失败的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:00:07.380

如果它们具有不同的可见性，编译器可能会重新排序字段。它还可以出于任何它想要的任意原因用它喜欢的任意数量的空间填充字段（但是，许多编译器具有可用于控制此行为的扩展）。

一个可见性说明符中的字段保证按照它们在定义中出现的顺序。可见性部分不一定按任何顺序排列，即使它们与另一个部分具有相同的可见性。

```
class A
{
public:
    int someField;      // will always be in the same order WRT someOtherField
    int someOtherField;
private:
    int anotherField;   // may be before or after someField
    int moreFields;
}; 
```

# maven - 如何在 Maven 中定义一组命名的相关依赖项？

> ID：13018828
> 
> 赞同：3
> 
> 时间：2012-10-22T19:56:38.893
> 
> 标签：maven, maven-3

我有几个独立的项目（它们没有相同的父项目），但它们使用相同的库集。例如

*   项目A
*   项目 B
*   项目 C

所有这些项目都使用 Spring、Postgres、Hibrenate 和 tomcat。我想要做的是按照以下几行介绍一个命名的依赖集合的概念：

*   TSHP 1.0 - 可能由 tomcat 6.0.35、Spring 3.0.7、Hibernate 3.6.8 ... 等组成
*   TSHP 2.0 - 可能包含 tomcat 7.0.32、Spring 3.1.2、Hibernate 4.1.7 .. 等

我希望能够说项目 A 依赖于 TSHP 1.0，项目 B 依赖于 TSHP 2.0 ......等等。我看到的这种设置的价值是

*   很容易对一组与公司一起使用的通用库进行标准化，因此跨项目审计很容易，如果你知道它是，你不必深入研究项目的 pom 来查看其中的内容使用一组命名的依赖项
*   使用标准类路径启动一个新项目可能非常容易，因为它应该可以只包含对命名组的单个依赖项并获得该类型应用程序所需的一切，只需要一个人弄清楚并验证组合命名类路径中的 jar 确实可以很好地相互配合。

这种类型的设置可以用maven3完成吗？如果有怎么办？

**更新：**我在父 pom 设置中看到的问题是 POM 只能有一个父级，但我可能有几个标准的命名类路径，例如：

*   WEB_SECURITY - 可能是用于防止常见 Web 安全问题的 jar 集合，因此 Web 应用程序可能包含 TSHP + WEB_SECURITY，而批处理应用程序可能仅包含 TSHP。组合比继承更好，而且更灵活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:48:59.900

为“平台”创建一个新项目，即要一起使用的一组依赖项。其包装类型应为：`pom`.

```
<project>
    <groupId>…&lt;/groupId>
    <artifactId>tshp-platform</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>
    <dependencies>
      <!-- Dependencies for TSHP 1.0 -->
    </dependencies>
… 
```

pom 的 1.0 版本。然后更新 TSHP 2.0 的版本和依赖项。然后释放它。

现在，您的项目可以简单地声明对 pom 项目的依赖，并将传递平台。

但是，请注意，明确声明每个单独项目直接依赖的工件通常被认为是一种好的做法。但是，这不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:12:16.973

我认为您在谈论的是“公司POM”的概念。[Sonatype 给出](http://www.sonatype.com/people/2008/05/misused-maven-terms-defined/)
的定义是：

### 企业舞会

> Corporate Pom 是位于公司继承结构顶部的父 Pom。这是集中某些配置的推荐最佳实践，例如 Enforcer 规则配置、默认插件版本等。这也可以称为“组织 Pom”。“Super Pom”这个词经常被误用在企业 Pom 上。

也可以看看 ：

### 家长绒球

> 父 pom 只是一个 pom，其他 pom 通过一个部分从它继承。从父代继承的 Pom 有时被称为“子代”或“子代”。</p>

# android - Android通知栏构建方法错误

> ID：13018836
> 
> 赞同：2
> 
> 时间：2012-10-22T19:57:05.783
> 
> 标签：android, android-notifications

我需要一些帮助，因为我是 Android 新手。我似乎无法掌握如何构建一个新的 Notification.Builder 实例。可悲的是，我正在关注的教程使用了一个较旧的构造函数，在仔细阅读了 android 参考文档之后清楚地说明了它。我创建了一个按钮，当您按下它时，它只会提供一个简单的通知。找到其他示例后，所有代码似乎都可以，但是在构建方法下的 Eclipse 中出现红线错误。任何帮助将非常感激：

```
Button b = (Button) findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {

    Context context = Main.this;
    Intent intent = new Intent(context, Main.class);
    PendingIntent pending = PendingIntent.getActivity(Main.this, 0, intent, 0);

    Notification noti = new Notification.Builder(Main.this)
    .setTicker("This is important!")
        .setContentTitle("PLEASE READ!")
        .setContentText("Important message from me!")
        .setSmallIcon(android.R.drawable.stat_notify_more)
        .setWhen(System.currentTimeMillis())
        .setContentIntent(pending)
        .build();

    NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    nm.notify(0, noti);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:03:13.543

`Notification.Builder.build()`是 API 级别 16。您可能尚未将目标设置为 v16 和/或下载 v16 android 开发工具包，因此 Eclipse 不知道该方法，因此将其标记为无效。

查看[Notification.Builder的文档](http://developer.android.com/reference/android/app/Notification.Builder.html#build%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:11:09.913

如果您使用的是 android.support.v4，请使用[Android v4 Support中的 NotificationCompat](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)

# xcode - 让 Photoshop 读取我的多层 CGImageRef tiff

> ID：13018839
> 
> 赞同：1
> 
> 时间：2012-10-22T19:57:17.313
> 
> 标签：xcode, photoshop, tiff, cgimageref, multi-layer

Photoshop让我很困惑。

我能够从 Photoshop 创建多层 tif 图像并将其读入我的程序（可可构建）

我可以在我的程序中创建一个多层 tif 并让 tiffutil 读取它。

但是，photoshop 不会将我的文件识别为多层 tif。只有第一张图片进来。

我需要包含哪些信息？我该怎么做呢？当我写出 gif (kUTTypeGIF) 而不是 tif (kUTTypeTIFF) 时，一切都很好。

* * *

这里有一些代码来展示我在做什么......（使用 Xcode 4.1 CoreFoundation）下面的代码应该采用 3 个 JPEG 图像并创建单独的层，写出一个多层 tiff 文件。它适用于 GIF，但不适用于 TIFF

```
// create CFURLRef for 3 separate images.
NSString *filePath1 = [[NSBundle mainBundle] pathForResource:@"1image" ofType:@"jpg"];
CFURLRef url1 = (CFURLRef)[NSURL fileURLWithPath:filePath1];

NSString *filePath2 = [[NSBundle mainBundle] pathForResource:@"2image" ofType:@"jpg"];
CFURLRef url2 = (CFURLRef)[NSURL fileURLWithPath:filePath2];

NSString *filePath3 = [[NSBundle mainBundle] pathForResource:@"3image" ofType:@"jpg"];
CFURLRef url3 = (CFURLRef)[NSURL fileURLWithPath:filePath3];

// setup to write to data object
NSMutableData          * finalImageData = [NSMutableData data];
CGImageSourceRef       imageSourceRef = nil;
// this one does not work
CGImageDestinationRef  imageDestRef = CGImageDestinationCreateWithData((CFMutableDataRef)finalImageData, kUTTypeTIFF, 3, nil);
// This one works
// CGImageDestinationRef  imageDestRef = CGImageDestinationCreateWithData((CFMutableDataRef)finalImageData, kUTTypeGIF, 3, nil);

// build the final image
imageSourceRef = CGImageSourceCreateWithURL(url1, nil);
CGImageDestinationAddImageFromSource(imageDestRef, imageSourceRef, 0, nil);

imageSourceRef = CGImageSourceCreateWithURL(url2, nil);
CGImageDestinationAddImageFromSource(imageDestRef, imageSourceRef, 0, nil);

imageSourceRef = CGImageSourceCreateWithURL(url3, nil);
CGImageDestinationAddImageFromSource(imageDestRef, imageSourceRef, 0, nil);

CGImageDestinationFinalize(imageDestRef);
CFRelease(imageDestRef);
CFRelease(imageSourceRef);

// write out the final image data
[finalImageData writeToFile:@"outfile.tif" atomically:YES];
// [finalImageData writeToFile:@"outfile.gif" atomically:YES]; 
```

# c# - 在 .NET 中将 double 转换为字符串不如 C++ 精确？

> ID：13018845
> 
> 赞同：3
> 
> 时间：2012-10-22T19:58:11.063
> 
> 标签：c#, floating-point, double, ieee

以下 C++ 程序预期输出`0.300000000000000040000`：

```
cout << setprecision(40) << (0.1 + 0.2) << endl; 
```

但是下面的 C# 代码：

```
System.Console.WriteLine("{0:F40}", 0.1+0.2); 
```

...意外输出`0.3000000000000000000000000000000000000000`，而它（预期）评估`0.1+0.2 == 0.3`为`False`。

“4”在哪里，我如何输出它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T20:03:59.343

*目前尚不清楚*您是否想要4 后跟零，但我有[一些代码](http://pobox.com/~skeet/csharp/DoubleConverter.cs)可以让您打印出 any 的确切十进制值`double`。

所以作为一个测试应用程序：

```
using System;

class Test
{
    static void Main(string[] args)
    {
        double d1 = 0.1;        
        double d2 = 0.2;
        Console.WriteLine(DoubleConverter.ToExactString(d1 + d2));
        Console.WriteLine(DoubleConverter.ToExactString(0.3));
    }
} 
```

结果：

```
0.3000000000000000444089209850062616169452667236328125
0.299999999999999988897769753748434595763683319091796875 
```

我怀疑内置的 .NET 格式化程序拒绝给你“4”，理由是那时数字不能被“信任”。它们只是与哪个值恰好最接近您真正目标的值有关的噪音。

从文档中[`System.Double`](http://msdn.microsoft.com/en-us/library/system.double.aspx)：

> 默认情况下，Double 值包含 15 位精度的十进制数字，但内部维护最多 17 位数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:53:47.523

如果你说你会得到什么

```
System.Console.WriteLine("{0:R}", 0.1+0.2); 
```

像这样的[格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)`"F40"`只会在字符串的末尾添加零。与 just 相比，它不会为您提供额外的精度`"G"`。另一方面，如果（且仅当）有必要将数字与更接近字符串的数字区分开来，`"R"`则 , 将显示两个额外的数字（如果两个数字中的最后一个是 ，则显示一个） 。`0``"G"`

**另外：**为了更好地理解格式字符串在 .NET 中的工作方式，请尝试运行以下代码：

```
double a = BitConverter.ToDouble(new byte[] { 49, 51, 51, 51, 51, 51, 211, 63, }, 0);
double b = BitConverter.ToDouble(new byte[] { 50, 51, 51, 51, 51, 51, 211, 63, }, 0);
double c = BitConverter.ToDouble(new byte[] { 51, 51, 51, 51, 51, 51, 211, 63, }, 0);
double d = BitConverter.ToDouble(new byte[] { 52, 51, 51, 51, 51, 51, 211, 63, }, 0);
double e = BitConverter.ToDouble(new byte[] { 53, 51, 51, 51, 51, 51, 211, 63, }, 0);

Console.WriteLine("using G:");
Console.WriteLine(a.ToString());
Console.WriteLine(b.ToString());
Console.WriteLine(c.ToString());
Console.WriteLine(d.ToString());
Console.WriteLine(e.ToString());
Console.WriteLine("using F40:");
Console.WriteLine(a.ToString("F40"));
Console.WriteLine(b.ToString("F40"));
Console.WriteLine(c.ToString("F40"));
Console.WriteLine(d.ToString("F40"));
Console.WriteLine(e.ToString("F40"));
Console.WriteLine("using R:");
Console.WriteLine(a.ToString("R"));
Console.WriteLine(b.ToString("R"));
Console.WriteLine(c.ToString("R"));
Console.WriteLine(d.ToString("R"));
Console.WriteLine(e.ToString("R")); 
```

在这里，`a`, `b`, `c`, `d`, 和`e`是“邻居”作为`System.Double`s 从字节数组中可以明显看出。您应该看到格式字符串仅在,和,`"R"`的情况下提供额外的数字。对于，不需要额外的数字，但很明显，**如果**要使用 17 个数字编写，则 17 个数字中的最后两个不会是（另请参阅 Jon Skeet 对 .NET 中内置方法的完整十进制扩展的回答不会轻易给你）。`a``b``d``e``c`**`c``00`**

# android - 无法从 Android 手机访问 Apache 服务器

> ID：13018846
> 
> 赞同：7
> 
> 时间：2012-10-22T19:58:12.973
> 
> 标签：android, apache, wamp

我有一个 WAMP 服务器在我的 Windows 7 PC 上运行。我希望从我的安卓手机浏览器访问它。示例：我的服务器上的 HTML 页面 ( `localhost/example.html`) 应该可以在 Android 手机的网络浏览器 ( `192.168.1.xx/example.html`)上访问

1.  两台设备都在同一IP范围内`192.168.1.xx`
2.  对于`httpd.conf`我的 Apache 包含`Listen 80`
3.  可从同一网络（家庭 LAN）上的其他 PC 访问
4.  Windows 防火墙已关闭。

编辑：哇！它适用于我的办公室 WLAN。谁能解释这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:08:47.710

我在我的 Windows 7 上使用 IIS，并且成功地从我的 Android 手机调用了一个页面。网址是这样的：

[http://192.168.1.xx/example.html](http://192.168.1.xx/example.html)

我遇到了同样的问题，我关闭了 Windows 7 上的所有防火墙，并且我让每个人都可以访问我的虚拟目录的物理文件夹，现在可以了......

# cloud-foundry - 无法针对 VMC 中的任何 CloudFoundry 云 - 错误 (JSON 404)： 在过去的几个小时里，我一直在尝试连接到任何（我的微云实例以及简单的 api.cloudfoundry.com）云，但没有成功。我看到其他人询问连接问题，但似乎我的特殊情况从未得到解决。 当我尝试连接到我的微云实例或 api.cloudfoundry.com 云时，我总是收到此错误： 主机不可用或无效：“[CLOUD_URL]” 您想 问问题 问问题 2012-10-22T19:58:15.040 368 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在过去的几个小时里，我一直在尝试连接到任何（我的微云实例以及简单的 api.cloudfoundry.com）云，但没有成功。我看到其他人询问连接问题，但似乎我的特殊情况从未得到解决。 当我尝试连接到我的微云实例或 api.cloudfoundry.com 云时，我总是收到此错误： 主机不可用或无效：“[CLOUD_URL]” 您想查看响应吗？[yN]：是的 错误 (JSON 404): <soap-env:envelope xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema"><soap-env:header><sapsess:session xmlns:sapsess="http://www.sap.com/webas/630/soap/features/session/"><enablesession>true</enablesession></sapsess:session></soap-env:header> <soap-env:body></soap-env:body></soap-env:envelope>cloud-foundry 4 2 回答 2 This answer is useful 1 你搞清楚这个了吗？听起来您的公司网络可能使用 HTTP 代理。如果是这样，您需要设置http_proxy环境变量以使 vmc 工作。您的网络管理员应该有关于如何设置环境变量的详细信息。 于 2012-10-25T22:34:44.657 回答 This answer is useful 0 you can use vmc -t to see the http trace. This will help you diagnose the problem I guess. 于 2012-10-23T10:01:25.403 回答 Related 2 xslt - 禁用输出转义后如何遍历 2 sql - sql语句根据另一个故事中的记录删除表1中的行 2 ruby - 浮点除以零 1 javascript - NodeList的原型扩展 1 mysql - INNER JOIN 限制为 1 1 python - 姜戈。Q 分类查询 1 ios6 - 完全删除连接/故事板 1 sql - 如何获取触发触发器的操作名称？ 4 awk - awk 多个变量用于多个文件处理 1 c# - 清单资源 (Assembly.GetManifestResourceStream) 的资源名称是什么？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13018847
> 
> 赞同：0
> 
> 时间：
> 
> 标签：cloud-foundry

在过去的几个小时里，我一直在尝试连接到任何（我的微云实例以及简单的 api.cloudfoundry.com）云，但没有成功。我看到其他人询问连接问题，但似乎我的特殊情况从未得到解决。

当我尝试连接到我的微云实例或 api.cloudfoundry.com 云时，我总是收到此错误：

**主机不可用或无效：“[CLOUD_URL]”
您想查看响应吗？[yN]：是的**

**错误 (JSON 404): <!DOCTYPE HTML PUBLIC "-//IETF/...**

附加信息：

*   坐在公司防火墙后面
*   将微云配置为使用代理设置
*   我可以ping我的微云的域并得到响应，IP与微云实例中配置的相同
*   我试图修改我的主机文件以将 *.[micro_cloud_name].cloudfoundry.me 指向指定的 IP。没有成功。
*   尝试访问 api.[micro_cloud_name].cloudfoundry.me/info 时收到有效响应

有人知道我在这里缺少什么吗？或者至少我怎么能看到整个未截断的错误响应？

任何一点信息将不胜感激。提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:34:44.657

你搞清楚这个了吗？听起来您的公司网络可能使用 HTTP 代理。如果是这样，您需要设置`http_proxy`环境变量以使 vmc 工作。您的网络管理员应该有关于如何设置环境变量的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:01:25.403

you can use `vmc -t` to see the http trace. This will help you diagnose the problem I guess.

# ruby-on-rails - Rails 开发日志文件 - 撰写时间

> ID：13018848
> 
> 赞同：2
> 
> 时间：2012-10-22T19:58:20.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging

在我的 Rails 项目中，我注意到有时操作不会在完成后立即写入日志文件`development.log`，而是在完成其他一些操作之后（或者可能只是在一段时间后，我不确定。）`development.log`文件写了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:06:31.160

### 针对 Rails 3.2 更新

~~Rails 的默认日志记录是缓冲的，因此日志消息不会立即写入，而是分批发生。您可以强制记录器使用以下命令刷新缓冲区：~~

这是旧的方式，[从 3.2](http://guides.rubyonrails.org/3_2_release_notes.html)开始，文件系统在写入日志之前处理缓冲：

> ActiveSupport::BufferedLogger#auto_flushing 已弃用。像这样在底层文件句柄上设置同步级别。或者调整你的文件系统。FS 缓存现在控制刷新。

您可以将*config/environments/development.rb*更改为自动刷新每条日志消息：

```
config.autoflush_log = true 
```

[bootstrap.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/application/bootstrap.rb)使用它来强制同步日志（*例如* `f.sync = true`）。这将显着影响性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:40:18.487

你为什么不使用log4r？

1.  它非常快
2.  它支持时间戳
3.  您可以根据需要自定义输出格式。

使用方法请参考：[https ://stackoverflow.com/a/5959013/445908](https://stackoverflow.com/a/5959013/445908)

# youtube-api - 带有批处理请求的 Youtube api“无效条目 ID/Uri”

> ID：13018857
> 
> 赞同：0
> 
> 时间：2012-10-22T19:58:46.427
> 
> 标签：youtube-api

我正在使用 youtube-api 并发出以下批处理 POST 请求：

[https://gdata.youtube.com/feeds/api/users/batch?v=2.1](https://gdata.youtube.com/feeds/api/users/batch?v=2.1)

与身体：

```
<feed xmlns='http://www.w3.org/2005/Atom'
      xmlns:media='http://search.yahoo.com/mrss/'
      xmlns:batch='http://schemas.google.com/gdata/batch'
      xmlns:yt='http://gdata.youtube.com/schemas/2007'>
  <batch:operation type="query"/>
  <entry>
    <batch:operation type="query"/>    <id>http://gdata.youtube.com/feeds/api/videos/h5jKcDH9s64</id>
  </entry>
</feed> 
```

但是在响应中出现错误。部分回应：

```
<title>Error</title>
<content>Invalid entry Id/Uri</content>
<batch:operation type='query'/>
<batch:status code='400' reason='Invalid entry Id/Uri'/> 
```

单个 GET 请求： http: [//gdata.youtube.com/feeds/api/videos/h5jKcDH9s64](http://gdata.youtube.com/feeds/api/videos/h5jKcDH9s64)

工作正常。

有人知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:04:51.643

您没有发布到正确的 URL。要批量请求视频条目，您需要 POST 到`https://gdata.youtube.com/feeds/api/videos/batch?v=2`

请求正文应如下所示

```
<feed xmlns='http://www.w3.org/2005/Atom'
      xmlns:batch='http://schemas.google.com/gdata/batch'>
  <batch:operation type="query"/>
  <entry>
    <id>http://gdata.youtube.com/feeds/api/videos/VIDEO_ID</id>
  </entry>
  <entry>
    <id>http://gdata.youtube.com/feeds/api/videos/VIDEO_ID</id>
  </entry>
</feed> 
```

# javascript - 如何使用 onload 事件转换按钮单击？

> ID：13018861
> 
> 赞同：0
> 
> 时间：2012-10-22T19:59:34.500
> 
> 标签：javascript, html, jquery, html-lists, jquery-events

如何转换此脚本以使其触发`onload`而不是使用按钮单击？我试图理解这一点，但它并没有陷入困境。

```
<script type="text/javascript"> 
jQuery(function($){
    // unordered list
    $('button.item').click(function(){
        $('ul').foo();
    });

});
</script>
</head>     
<body>
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
</ul>
<button class="item">foo</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:00:46.197

使用[load](http://api.jquery.com/load-event/)函数在 onload 事件上执行函数：

```
<script type="text/javascript"> 
$(window).load(function(){
       $('ul').foo();    
});
</script> 
```

请注意，如果您不需要加载所有内容（例如子元素，主要是图像），通常最好在 dom 准备好后立即使用[$(callback)](http://api.jquery.com/jQuery/#jQuery3)执行您的函数：

```
<script type="text/javascript"> 
$(function(){
       $('ul').foo();    
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:02:24.607

```
 <script type="text/javascript">
function abc() {
    alert('ok');
}
window.onload = abc;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:07:24.617

你可以使用这样的东西：

```
<body>
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
  <li>5</li>
  <li>6</li>
</ul>
<script type="text/javascript"> 
$(document).ready(function() {
  $('ul').foo();
});
</body> 
```

如果您在文件末尾调用它会更好，就在关闭`<body>`标签之前。

该功能`$(document).ready(function(){...`是您在页面加载时需要做某事时使用的功能。

我建议你查看 w3schools 中的 jQuery 教程：http: [//www.w3schools.com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp)

Document.ready 比 window.onLoad 反应更快

# jquery - 引导模式使用 jQuery Tablesorter 选择错误的项目

> ID：13018863
> 
> 赞同：1
> 
> 时间：2012-10-22T19:59:39.103
> 
> 标签：jquery, django, twitter-bootstrap, tablesorter

当我触发此引导模式时，它会选择表中最顶层的条目作为 e.entry 而不是行上的条目。如果我对列进行排序，模式将再次选择最顶部的条目。

关于可能是什么问题的任何想法？

谢谢！

```
 <script >
                $(document).ready(function(){
                   $("#EntryTable").tablesorter(
                    {sortList: [[1,0]]}
                    );
                 });
            </script>
            <table class="table" id="EntryTable">
                <thead>
                    <tr>                                
                        <th>Idea</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody>

            {% for e in projects.entries.all %}
            <tr class="info">
                <td>{{ e.entry }}</td>
                <td><a href="#EditModal" role="button" data-toggle="modal" class="open-EditEntryDialog label label-info" data-id="{{ e.entry }}">Edit</a>

                    <div class="modal hide fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="EditModalLabel" aria-hidden="true">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h3 id="EditModalLabel">Edit an Entry</h3>
                      </div>
                      <div class="modal-body">
                            <form action="{{ projects.get_absolute_url }}" method="post">
                            {% csrf_token %}
                            <input type='hidden' name='entry_id' value='{{ e.id }}'>
                            <input type='hidden' name='project_id' value='{{ projects.id }}'>
                            <input type='text' id='entry' name="entry" placeholder="{{ e.entry }}"> 

                        </div>

                      <div class="modal-footer">
                        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                        <button type='submit' name="edit_entry" value='Edit Entry' class="btn btn-primary">Edit Entry</button>
                        </form>
                      </div>
                    </div>
                </td>
                </tr>
            {% endfor %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:24:06.037

这是一个工作的分叉小提琴：

[http://jsfiddle.net/technotarek/9KsxW/4/](http://jsfiddle.net/technotarek/9KsxW/4/)

重要提示：您的模式停止工作的原因是因为您 (1) 加载了错误版本的 jQuery 并且 (2) 在 DOM 中有多个具有完全相同 ID 的元素（例如，#EditModal）。ID 应该是唯一的。当您有多个具有相同 ID 的元素时，模态插件不知道要与哪些元素交互。出于小提琴的目的，我只是制作了 ID #EditModal、#EditModal2 和 #EditModal3。显然，您需要使用服务器端代码动态地执行此操作。

在相关说明中，我还删除了您的一些 javascript。我不确定您到底想通过以下方式完成什么：

```
$(document).on("click", ".open-EditEntryDialog", function() {
    var EntryId = $(this).data('id');
    console.log($(this));
    $(".modal-body #entry").val(EntryId);
    $('#EditModal').modal('show');
});​ 
```

...但它使模态行为不正确。它正在启动所有三种模式，而不仅仅是选定的模式。同样，这可能是因为您对 ID 和类的使用松散——也就是说，您没有使用正确的选择器来选择准确/正确的元素。

在任何情况下，您都会看到小提琴现在排序并启动了正确的模态（我更改了每个模态的标题以帮助确认这一事实）。

# ios - 具有活动和非活动区域的 UIScrollView

> ID：13018865
> 
> 赞同：0
> 
> 时间：2012-10-22T19:59:43.197
> 
> 标签：ios, uiview, uiscrollview, scroll

我有一个`UIScrollView`占据我的整个屏幕的一侧有一个垂直工具栏，我需要限制滚动行为，以便用户只能通过拖动工具栏来滚动。如果他们尝试从屏幕上的任何其他位置拖动，则不应发生滚动。

我尝试过覆盖`touchesBegan`,`touchesShouldCancelInContentView`和 ，`touchesShouldBegin`因此如果触摸不是源自我调用的工具栏`setScrollEnabled:NO`，如果是我调用`setScrollEnabled:YES`，但似乎一旦禁用滚动，方法就不再触发并且我陷入僵局。还尝试将工具栏设置为按钮并启用滚动`touchDown`和禁用`touchUpInside`和`touchUpOutside`。这也行不通。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:08:45.213

使用第二个滚动视图来控制主滚动视图。我添加了一个渐变以便能够看到滚动。

```
#import <QuartzCore/QuartzCore.h>

@implementation ScrollViewController {
    UIScrollView *mainScrollView;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect mainScrollViewRect = CGRectMake(0, 0, self.view.bounds.size.width - 100, self.view.bounds.size.height);
    mainScrollView = [[UIScrollView alloc] initWithFrame:mainScrollViewRect];
    mainScrollView.scrollEnabled = NO;
    mainScrollView.contentSize = CGSizeMake(self.view.bounds.size.width - 100, 1000);
    [self.view addSubview:mainScrollView];

    CAGradientLayer* gradientLayer = [CAGradientLayer layer];
    gradientLayer.startPoint = CGPointMake(0, 0);
    gradientLayer.endPoint = CGPointMake(1, 1);
    gradientLayer.frame = CGRectMake(0, 0, mainScrollView.contentSize.width, mainScrollView.contentSize.height);
    gradientLayer.colors = @[(id)[[UIColor blackColor] CGColor], (id)[[UIColor whiteColor] CGColor]];
    [mainScrollView.layer insertSublayer:gradientLayer atIndex:0];

    CGRect toolbarRect = CGRectMake(self.view.bounds.size.width - 100, 0, 100, self.view.bounds.size.height);
    UIScrollView *toolbarScrollView = [[UIScrollView alloc] initWithFrame:toolbarRect];
    toolbarScrollView.delegate = self;
    toolbarScrollView.contentSize = CGSizeMake(0, 1000);
    toolbarScrollView.backgroundColor = [UIColor yellowColor];
    [self.view addSubview:toolbarScrollView];
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    mainScrollView.contentOffset = scrollView.contentOffset;
}

@end 
```

# jquery - TypeError：无法使用hammer.js将未定义转换为对象

> ID：13018867
> 
> 赞同：0
> 
> 时间：2012-10-22T19:59:45.157
> 
> 标签：jquery, hammer.js

我正在尝试使用hammer.js，当我将其导入时出现此错误。

> TypeError: can't convert undefined to object
> element.style[prop] = css_props[p];

```
 <script type="text/javascript" src="js/hammer.js"></script>
    <script type="text/javascript" src="js/jquery.hammer.js"></script>

$(function(){

$(window).hammer({}).bind("hold swipe dragstart drag dragend swipe", function(event) {
      event.preventDefault();
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:39:58.780

利用

```
$("body").hammer()... 
```

代替

```
$(window).hammer()... 
```

我也很难让锤子正常工作，它似乎错过了很多标准用例（使用窗口而不是“body”、Backbone 事件、jQuery 委托），如果你不这样做，也不会给你带来很多好处不要完全按照他们的意愿使用它。

# filter - 如何在数据表列标题的过滤框中添加占位符文本

> ID：13018868
> 
> 赞同：2
> 
> 时间：2012-10-22T19:59:57.497
> 
> 标签：filter, datatable, primefaces, jquery-tooltip

我有一个包含几列的主要面孔数据表，并且所有列都有 filteryBy 属性。如何添加占位符或水印为用户提供提示。任何建议，将不胜感激谢谢！

```
<p:dataTable var="dt" widgetVar="widgetUserRecords"
                             value="#{userBean.result}"
                             id="userRecordTable" paginator="true"
                             paginatorAlwaysVisible="false" rows="10"
                             height="300" >
<p:column sortBy="#{dt.course.name}" filterStyle="width:50px;"
                              filterBy="#{dt.course.name}" headerText="Course Name" style="text-align:bottom">
    <h:outputText value="#{dt.course.name}"/>
</p:column>
.
. 
.
  (other columns)
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-02T20:18:16.870

我意识到这个问题早在 2012 年就被问到了，但我希望这个答案可以帮助那些希望在数据表中按字段向过滤器添加水印的人。我尝试使用其他答案中建议的解决方案，`forElement`但无法显示水印。相反，我找到了两个使用`for`属性的解决方案，第一个使用元素`styleClass`上的属性`p:column`，第二个使用属性中的 jQuery 选择器`for`。我还发现该`p:watermark`元素需要位于`f:facet`用于标题的元素内。

我在这两个解决方案中使用的代码如下：

```
<h:form id="myForm">
    <p:dataTable id="myTable">

        <p:column id="column1" filterBy="column1" styleClass="watermark1">
            <f:facet name="header">
                <p:watermark for="@(.watermark1)" value="Watermark 1" />
                <h:outputText value="Column1" />
            </f:facet>
        </p:column>

        <p:column id="column2" filterBy="column2">
            <f:facet name="header">
                <p:watermark for="@(#myForm\\:myTable\\:column2\\:filter)"
                    value="Watermark 2" />
                <h:outputText value="Column2" />
            </f:facet>
        </p:column>

    </p:dataTable>
</h:form> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T05:24:40.963

首先为您的列提供和 ID 并添加一个`p:watermark`组件：

```
<h:form id="tableForm">
...    
    <p:dataTable var="dt" widgetVar="widgetUserRecords"
                     value="#{userBean.result}"
                     id="userRecordTable" paginator="true"
                     paginatorAlwaysVisible="false" rows="10"
                     height="300" >

        <p:column id="column1" sortBy="#{dt.course.name}" filterStyle="width:50px;"
                      filterBy="#{dt.course.name}" headerText="Course Name" style="text-align:bottom">
            <h:outputText value="#{dt.course.name}"/>
            <p:watermark forElement="tableForm:userRecordTable:column1" value="hint..."/>
        </p:column>

    </p:dataTable>
...
</h:form> 
```

不要忘记将`tableForm`id替换为`p:dataTable`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T05:00:52.123

根据[PrimeFaces 论坛上的这个帖子](http://forum.primefaces.org/viewtopic.php?f=3&t=14068&sid=8e7a048ddb8366c52d2ca816af4e5b7f)，应该可以使用这样的东西：

```
<h:form id="form">
    <p:dataTable id="dataTable">
        <p:row>
            <p:column id="column" filterBy="....">
                <p:watermark forElement=":form:dataTable:column" value="Filter..."/>
            ...
            </p:column>
        </p:row>
    </p:dataTable>
</h:form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-23T22:31:09.737

如果有人需要在具有动态列的数据表中使用占位符，也许这可以帮助你......

```
<p:dataTable id="generalReportTable" value="#{generalReportController.reports}" var="report"
         filteredValue="#{generalReportController.filteredReports}"
         rowKey="#{report.rowKey}" >
<p:columns id="dynamicColumns" value="#{generalReportController.columns}" var="column" columnIndexVar="colIndex" 
           sortBy="#{report[column.property]}" filterBy="#{report[column.property]}" filterMatchMode="contains"
           styleClass="dynamic-cols-width-#{colIndex}">
    <f:facet name="header">
        <p:watermark for="@(.dynamic-cols-width-#{colIndex})" value="#{column.header}" />
        <h:outputText value="#{column.header}" />
    </f:facet>
    <h:outputText value="#{report[column.property]}" />
</p:columns> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-25T18:24:33.660

您可以通过转到**jquery.dataTables.js**第 2701 行并替换来更改此设置而不覆盖占位符属性

.`attr( 'placeholder', language.sSearchPlaceholder )`

和

`.attr( 'placeholder', 'Search table...' )`

您还可以找到可能位于语言文件中的 sSearchPlaceholder 变量并将其替换。

# mysql - Ruby on Rails MySQL 到 SQLite 导出/转储

> ID：13018881
> 
> 赞同：1
> 
> 时间：2012-10-22T20:00:48.550
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, sqlite

是否可以导出或转储可以轻松导入 SQLite 的 MySQL 数据库？导出将由应用程序的登录用户启动，因此命令行脚本在这里可能不可行。任何可以实现这一目标的建议或宝石？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:18:13.207

试试[yaml_db](https://github.com/ludicast/yaml_db)宝石。

使用此 gem，您可以从 MySQL 转储数据并加载到 SQLite。

# php - mysql - 排序后选择

> ID：13018882
> 
> 赞同：1
> 
> 时间：2012-10-22T20:00:48.773
> 
> 标签：php, mysql, sql-server, database

我有一张看起来像的桌子

```
 ID |value
 --------
 1  |  10
 --------
 2  |  30
 --------
 3  |  20
 --------
 4  |  20
 --------
 5  | 10 
 -------- 
```

我按降序排序并使用 LIMIT 选择前两行。

所以选择查询返回：

```
 --------
 2  |  30
 --------
 3  |  20
 -------- 
```

现在我想以相同的排序方式选择后两行，所以结果应该是：

```
 --------
 4  |  20
 --------
 1  |  10
 -------- 
```

我怎样才能做到这一点 ？

*查询必须是动态查询* ，我的意思是在选择这两行之后，我应该选择接下来的两行，依此类推，直到表格结束。

*重要声明*

查询必须从上一个选择中获取最后一个 ID，并自动生成接下来的两个。抱歉，我在第一次发布问题时忘记说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:02:51.037

利用`LIMIT 2, 2`

在此处阅读有关 LIMIT 的更多信息：http: [//php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:03:10.860

您可以使用子句的`OFFSET`部分：[`LIMIT`](http://dev.mysql.com/doc/refman/5.0/en/select.html)

```
LIMIT 2 OFFSET 2; 
```

这将允许您限制在指定偏移量之后开始的结果，在这种情况下 - 在第二行之后。

**更新**（动态查询？）
要使选择/偏移动态，您需要在 PHP 中处理该部分。我假设你正在拉记录，用它们做点什么，然后拉下一组？如果这是正确的，你可以只保留一个计数器来记录你已经完成了多少次迭代：

```
$offsetCounter = 0;
// start your loop, based on whatever you need (for, while, etc.)
    $limit = 'LIMIT 2 OFFSET ' . (2 * $offsetCounter++);
    // append `$limit` to the end of your query
    $query = 'SELECT ID, value FROM yourTable ORDER BY value DESC ' . $limit; 
```

**UPDATE #2**（动态查询，没有`OFFSET`）
如果你不能使用`OFFSET`，或者至少一个计数器来实现它，但是你*可以*使用检索到的最后一条记录的 ID，你可以将它添加到你的`WHERE`子句中（我也建议排序在这种情况下也通过 ID 字段）。

像下面这样的东西应该可以工作（如有必要，更新以使用准备好的语句）：

```
$lastIdSelected = 0;
// start your loop
    $query = 'SELECT ID, value FROM yourTable';
    $query .= (($lastIdSelected != 0) ? ' WHERE id > ' . $lastIdSelected : '');
    $query .= ' ORDER BY value DESC, id ASC LIMIT 2';
    // execute query, do your work, etc.

    // on your last record, do:
    $lastIdSelected = $row['ID']; 
```

当然，这也遵循我第一次使用`OFFSET`变量更新的格式。您可以将其修改为*不*使用临时变量来存储最后一个 ID，但无论哪种方式，它最终的工作量都可能相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:06:14.210

您可以使用偏移量

```
$sql = 'SELECT ID, value FROM myTable LIMIT 0, 2 ORDER BY value DESC; 
```

以上将为您提供前两行。

```
$sql = 'SELECT ID, value FROM myTable LIMIT 2, 2 ORDER BY value DESC; 
```

这将为您提供接下来的两行

更多关于 LIMIT 的信息可以在[这里找到](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# xcode - 从零开始的主视图和详细视图

> ID：13018886
> 
> 赞同：-1
> 
> 时间：2012-10-22T20:00:58.193
> 
> 标签：xcode, uitableview, detailview

我是 Xcode 的新手，我正在做一个简单的项目。我正在使用和清空应用程序，我想创建一个 RSS 阅读器。问题是如何从零开始创建 MasterView 和 Detail View？我应该使用哪些子类？大师的 UITableView？和细节视图？有没有例子请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:08:21.963

当您创建一个新的 iOS 项目时，XCode 有一个主从模板。只需按照向导操作，它就会为您生成代码。

# ios - 推送通知服务器端数据模型

> ID：13018889
> 
> 赞同：2
> 
> 时间：2012-10-22T20:01:13.640
> 
> 标签：ios, database-design, webserver, push-notification

我正在创建一个 C# .NET 网络服务器应用程序，当他们感兴趣的 HTML 页面有新数据时，它将通知 iOS 用户。我想让用户能够通过电子邮件和/或推送通知获得通知。这是我目前在 SQL Server 数据库中的“用户”表的内容：

**userID**（唯一 int 值）
**deviceToken**（苹果在设置新通知时提供的唯一 varchar 值）
**isActive** (bool)
**createDate**（创建日期/时间记录）

您认为还有哪些其他领域是必要的？我研究了 Parse 推送通知服务，但我不确定我将如何实现它，或者为什么我自己发送推送通知会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:15:54.810

您可能还想添加环境字段（以区分沙盒和生产环境）。如果您计划扩展以支持 Android C2DM，您可能需要创建一个“区域”字段，用于识别客户端类型（通知传递方法）。

如果您需要限制发送给用户的通知数量，发送给给定设备的最后一个通知的时间戳可能是个好主意。

# wcf - 每次进行更改时是否需要更新服务引用？

> ID：13018891
> 
> 赞同：2
> 
> 时间：2012-10-22T20:01:21.420
> 
> 标签：wcf

我已经构建了一个简单的客户端-服务器应用程序。当我对服务器进行更改时，我会删除服务引用并重新创建它以反映我对服务器应用程序所做的更改。

每次更改服务器应用程序时都必须重新创建它，还是有什么方法可以自动更新服务引用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:58:18.820

基本答案可能是：是的。

WCF 和分布式应用程序的美妙之处在于客户端和服务器可以分开发展。更新客户端以利用更新版本的服务应该是一个有意识的选择。

当然，在开发过程中，这可能会很痛苦。有几种方法可以缓解这个问题，这里有一些我能想到的：

*   [使用 Visual Studio 管理您的服务引用](http://msdn.microsoft.com/en-us/library/bb628652.aspx)。如果您已经更新了服务，只需右键单击并选择“更新服务参考”，这应该不会花费太多精力。
*   使用测试驱动的方法来创建您的服务。这使您可以专注于完成服务中的业务逻辑，而无需客户端访问它。一旦你有了“绿灯”，你就创建了客户端。这种方法可以最大限度地减少您需要更新客户端的次数。
*   自动使用[svcutil](http://msdn.microsoft.com/en-us/library/aa347733.aspx)在您需要/需要时创建新的客户端代码。

当然还有更多（甚至可能更好）的方法，但这些方法可能已经对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:10:20.607

这取决于，

如果您所做的只是在不更改现有功能的情况下添加功能，并且客户端不需要新功能，那么答案是否定的。

这就是“IsRequired”DataMember 属性背后的想法。如果您将新字段添加到数据合约但将其标记为 IsRequired = false 则现有系统仍可以使用旧合约与服务器交互。

显然添加新方法也不会破坏旧合同，客户不会知道新方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T07:01:35.533

目前我在我的项目中遇到了同样类型的问题。

当我在服务中添加一些方法或更改数据成员的属性时，我必须更新服务引用，否则我的客户端无法使用更新的内容。

Basically if you add any method in the service and you are not updating the service reference then its fine your code will not crash, it will work as it did previously, but if you change a property (data member) you are bound to take a update of the service reference otherwise your code will break.

# joomla - Joomla 2.5 组件更新

> ID：13018895
> 
> 赞同：1
> 
> 时间：2012-10-22T20:01:36.820
> 
> 标签：joomla, components, upgrade, joomla2.5

我已经在 joomla 2.5 中构建了一个自定义组件，并且想知道如何以通过 joomla 2.5 安装程序安装的上传包的形式发布更新，或者如果已安装主组件上传包中的触发器以升级到新版本即时上传. 我假设我还需要在我的组件中创建版本号。显然，如果升级我只想要我想要更改替换的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:18:17.517

你有2个选择。您可以使用 Joomla Update Manager 方法，也可以使用[Akeeba Release System](https://www.akeebabackup.com/downloads/akeeba-release-system/ars-2-0-6.html)。就个人而言，我会使用 Akeeba 扩展，因为它更加灵活并且包含更多功能。对于新版本，您需要压缩完整的扩展名，而不仅仅是您编辑的文件。

# iphone - 移动地图/表单应用问题

> ID：13018898
> 
> 赞同：2
> 
> 时间：2012-10-22T20:02:09.993
> 
> 标签：iphone, ipad, mobile, mapping, kml

我是一个新手移动程序员，有一个移动映射表格的想法。我在编写其他基于 Web 的应用程序方面拥有丰富的经验，但还没有做过任何移动设备。在没有详细介绍该应用程序的情况下，我希望能得到对以下一般性问题的一些答复。我更喜欢使用 HTML5、CSS 和 Javascript 进行开发以简化在多个平台上的部署，但我愿意在其他环境中进行开发以实现我需要的结果。

1.  我需要能够通过 GPS 收集和在屏幕上绘制地图来创建空间数据，并且能够导出以供其他桌面 GIS 程序使用。我知道这基于其他已经做到的应用程序是可能的，但我不确定他们是如何完成它的。我认为他们只是记录位置点并将这些点写入 XML 文件。这个对吗？有谁知道我可以被引导到的任何在线文档？如果它只是在移动设备上创建的 KML，我相信通过转换为 CSV 并导入其他程序来导出会相当容易。

2.  关于数据收集/创建，我还需要离线收集/创建的能力。我相信我可以使用 Bad Elf GPS 之类的东西进行离线数据收集（www.bad-elf.com），所以我的问题更多是关于存储的。如果离线创建数据，是否可以使用 sqlLite 将其本地存储在移动设备上，然后在重新上线时导出到 SQL 数据库？如果是这样，这是否允许我在创建数据时在屏幕上实时查看我创建的数据？

最后，对使用 HTML5/CSS/Javascript 进行开发有什么想法吗？我也考虑过使用 Flash Builder，但还没有拥有当前副本 (4.6)，仍在 4.0 上。

如果有人知道任何可以让我深入了解移动数据收集/创建的在线文档，那将非常有帮助。

提前感谢您的回复。

扎克

# bing-maps - 如何删除 Bing 地图图例？

> ID：13018900
> 
> 赞同：0
> 
> 时间：2012-10-22T20:02:19.193
> 
> 标签：bing-maps

如何删除 Bing 地图图例？

![我不想要的](../Images/805376444dc15464e671d99d6263aab9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:47:14.487

If you are using the v7.0, you can hide the scalebar by setting the property showScalebar to false in the constructor of the map (in the mapOption parameter), see the MSDN:

[http://msdn.microsoft.com/en-us/library/gg427603.aspx](http://msdn.microsoft.com/en-us/library/gg427603.aspx)

And here is an example:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>

      <script type="text/javascript">

         function GetMap()
         {

            // Set the map and view options, setting the map style to Road and
            //    removing the user's ability to change the map style
            var mapOptions = {credentials:"Bing Maps Key",
                              height: 400,
                              width: 400,
                              showScalebar: false};

            // Initialize the map
            var map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), mapOptions); 

         }

      </script>
   </head>
   <body onload="GetMap();">
      <div id='mapDiv' style="position:relative;"></div>       
   </body>
</html> 
```

# windows-phone-7 - WP7后台服务

> ID：13018908
> 
> 赞同：0
> 
> 时间：2012-10-22T20:02:45.317
> 
> 标签：windows-phone-7

我是一名 Winform/Webforms 开发人员，对 WP7 比较陌生。我正在申请，我对以下内容感到困惑。

我的应用程序将安装在 WP7 上，它将与 Web 服务通信以获取一些数据。应用程序需要在后台运行，以便在特定时间以小部件或通知的形式向用户显示一些数据。用户只会打开已安装的应用程序来更改常规设置。

1- 如何在 WP7 中制作小部件？它支持吗？

2-在android中，我们可以创建一个在后台运行的服务。我们怎么能在这里做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:37:57.230

在 WP7 中，您可以使用[磁贴](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948%28v=vs.92%29.aspx)来显示您的数据，磁贴就像 Android 平台中的小部件。此外，您可以使用[推送通知](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402537%28v=vs.92%29.aspx)来显示您的数据，就像 Android 中的通知一样。

对于 Q2，您可以使用[后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.92%29.aspx)使您的服务在后台运行，例如，您可以使用 PeriodicTask 通过后台 Web 服务获取您的数据。

# c++ - 关于 C++ 中自动变量效率的大小的实际限制是什么？

> ID：13018916
> 
> 赞同：2
> 
> 时间：2012-10-22T20:02:59.473
> 
> 标签：c++, memory-management

我有以下变量（简化情况）：

```
std::array<std::array<float, 4>, 4> matrix; 
```

我需要从程序中的函数返回这个变量。我可以使用`std::unique_ptr`或将其作为值返回（自动与动态内存）

由于我平台上浮点数的大小为 4 个字节，并且有 16 个位置，因此大小为`16 * 4 = 64`字节。

没有自定义分配器等的动态内存除了通常很慢之外还会导致内存碎片，所以我想知道作为自动内存与动态内存传递数据的实际限制可能是什么？我应该开始使用什么大小的动态内存？这个问题无法回答吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:40:54.920

如果您担心由于 init 函数返回这样的结构的大小，那么我不会（对该声明的警告（如果您不确定，您可以随时测量））。

所有现代编译器都已经在进行 RVO 和 NRVO 优化。因此，即使您按值返回，也不会制作副本。编译器已经计算出结果将发送到特定的目的地，并删除了副本并在目的地构建它。

因此，尺寸限制并不是真正的问题。

同样在 C++11 中引入了移动语义的概念。所以你不需要按值返回，而是通过移动返回。在大多数 std 容器中，这仅意味着交换几个指针（不幸的是，这对 std::array 没有帮助），但在一般情况下它运行良好。

所以对我来说，这可能是价值回报。尽管我可以将该结构包装在一个类中。这样一来，如果现实很糟糕并且确实花费了很多，我可以在内部更改类以进行补偿，而无需更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:09:29.757

我认为分配 64 字节不会导致任何碎片。根据我在 32 位环境中使用大型应用程序的经验，大于 16 MB 的分配可能会由于碎片问题而失败。对于导致碎片的分配，它们应该存在很长时间。对于服务器代码，这超过了几天。在 64 位环境中，碎片不太可能发生。

按值传递参数意味着创建一个副本。这可能效率不高。推荐的解决方法是使用引用。大小没有众所周知的限制。

根据我的经验，我会为 PC 等平台推荐以下内容：

*   变量的大小小于 100 字节 - 按值传递；
*   var 的大小大于 1 KB - 使用引用并避免复制；

中间的值是灰色区域，两个决定都可以。再一次，这些数字没有神奇的意义。只是一些合理的参考。

我建议您考虑使用引用而不是堆分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:17:34.117

您是否真的观察到了性能下降，然后追溯到这段代码？因为如果这只是一个理论问题，那么我建议您实际上以看起来直观和自然的方式编写代码。

完成这些并解决所有问题后，您可以运行程序并查看您实现的性能是否可以接受；如果不是，*那么*您可以着手优化*实际*瓶颈，而不是*想象中*的瓶颈。

Donald Knuth 说得最好：“我们应该忘记小的效率，比如大约 97% 的时间：过早的优化是万恶之源。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:39:32.357

在堆栈上复制 64 个字节很便宜。它几乎肯定比分配 64 字节便宜。如果您将 unique_ptr 用于在堆上分配的短期变量，您几乎肯定会失去效率。

如果你只是调用你的函数并立即使用返回值，它会很快。只有当您计划通过一系列矩阵返回函数传播矩阵时，您的效率损失才会变得显着。分配内存和使用 unique_ptr 的可行性取决于数据被重新返回的次数，而不是取决于数据的实际大小。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-22T20:16:37.483

为此使用动态数组太过分了。您不只是分配 64 个字节来保存 16 个浮点数。您正在为数组分配 4 个内存块，每个内存块都有一个用于堆管理的标头，以及每个 c++ 的数组大小，并且内部内存分配器通常会使用比您要求的更大的块，通常在块边界上对齐。

然后你就有了保存每个数组的结构的开销。例如。每个 std::array 是一个包含指向您的对象的指针的类，它至少为 8 个字节（指针为 4，数组长度为 4）x5。

而且您没有参考位置。矩阵中的每一行在内存中可能彼此相距很远。如果它们都彼此相邻，它们将在单个缓存行中被读取。

你最好只使用：

```
float matrix[4][4[ 
```

如果您需要它面向对象，请将其包装在一个类中：

```
class Matrix44 
{
    float matrix[4][4];
} 
```

这样会更有效率。

# sed - 不匹配时的 Sed 打印模式空间

> ID：13018918
> 
> 赞同：0
> 
> 时间：2012-10-22T20:03:01.140
> 
> 标签：sed

我正在编写一个脚本来转换一些代码。我有一个执行正确转换的 sed 命令，但是我需要使用 -n 命令来防止自动打印图案空间以抑制双重打印。然而，这会阻止打印我想要输出的任何其他行。这是我正在使用的脚本。

```
sed -i -r 's/^[ ]*Class[(]"(I((.([A-Za-z]+)))+)"[ ]*,[ ]*(I((.[A-z]+)+)),[ ]*\{/ class \4 extends \5 { /p
/^[ ]*Class[(]"(I((.([A-Za-z]+)))+)"[ ]*,/ {
N
s/ *\n/ /
s/^[ ]*Class[(]"(I((.([A-Za-z]+)))+)"[ ]*,[ ]*(I((.[A-z]+)+)),[ ]*\{*/ class \4 extends \5 { \
/p
}
' 
```

可以在此处找到测试输入文件： [https](https://www.dropbox.com/s/h9vly1hwtqtl8te/TestText.txt) ://www.dropbox.com/s/h9vly1hwtqtl8te/TestText.txt 在脚本中有/没有 -n 开关的两个不同结果可以在这里找到：https:// /www.dropbox.com/s/f0g8horafwial1x/TestText.txt.ts_result1.txt 和这里：[https://www.dropbox.com/s/ekualxj7foapgml/TestText.txt.ts_result2.txt](https://www.dropbox.com/s/ekualxj7foapgml/TestText.txt.ts_result2.txt) 在这里找到所需的结果：[https://www.dropbox.com/s/3510oh899fh0ji2/TestText.txt.ts_resultdesired.txt](https://www.dropbox.com/s/3510oh899fh0ji2/TestText.txt.ts_resultdesired.txt)

是否有可能获得想要的结果？

我正在运行 $ sed --version GNU sed 版本 4.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:22:57.310

另一种防止重复打印的方法是`d`在最后一个打印命令之后放置一个（允许您删除`-n`）。此外，因为您在打印之后有一个条件，所以您可以使用该`t`命令，当前一个替换成功时（即它已经打印了一些东西），它将分支到一个标签（在这种情况下是命令`done`之前的标签`d`）。

```
sed -i -r 's/^[ ]*Class[(]"(I((.([A-Za-z]+)))+)"[ ]*,[ ]*(I((.[A-z]+)+)),[ ]*\{/ class \4 extends \5 { /p
/^[ ]*Class[(]"(I((.([A-Za-z]+)))+)"[ ]*,/ ! t done
/^[ ]*Class[(]"(I((.([A-Za-z]+)))+)"[ ]*,/ {
N
s/ *\n/ /
s/^[ ]*Class[(]"(I((.([A-Za-z]+)))+)"[ ]*,[ ]*(I((.[A-z]+)+)),[ ]*\{*/ class \4 extends \5 { \
/p
: done
d
}
' 
```

（注意：虽然没有测试过......）

# java - Java中的两种for循环

> ID：13018919
> 
> 赞同：1
> 
> 时间：2012-10-22T20:03:02.033
> 
> 标签：java, for-loop

效率方面有区别吗

```
int[] numbers = {1,2,3,4,5,6,7,8,9,10};
for (int item : numbers) {
   System.out.println("Count is: " + item);
} 
```

和

```
int[] numbers = {1,2,3,4,5,6,7,8,9,10};
for (int i = 0; i < 10; i++) {
   System.out.println("Count is: " + numbers[i]);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:04:54.527

它们对于数组是相同的。如果你有一个数字的订单列表，你应该使用

```
for(int i = min; i <= max; max += stride) 
```

或者

```
for(int i = min; i < max+stride; max += stride) 
```

例如

```
for(int i = 1; i < 11; i++) 
```

或者

```
for(int i = 1; i <= 10; i++) 
```

或者如果增加 10

```
for(int j = 0; j <= 100; j += 10) 
```

如果您使用预定义的值列表，则可以使用数组。

我经常这样写

```
for (int item : new int[] {1, 2, 5, 10, 20, 50, 100}) 
   System.out.println("Count is: " + item); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:04:23.153

实际上，为您的两个代码片段生成的字节码几乎完全相同。您可以使用 javap 之类的工具来检查它，甚至可以在 Eclipse 的反编译类查看器中查看它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T20:08:36.900

对于`Array []`, 它相似，但对于`Collections`诸如`ArrayList`，它会有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T20:12:29.407

除非你在循环中做一些非常奇怪的事情，否则性能上的差异是无法察觉的。无论问题的答案是什么，这都是“一分钱一分货”的优化。应该根据您需要哪些功能以及哪些代码更清晰做出决定。（IMO，选项 1 更简单明了，但有时您需要选项 2）

在程序的整个生命周期中，您输入问题和阅读答案所花费的时间可能比在循环中花费的时间要多。:-)

不知道在哪里问这个，但我认为应该有一些“过早的优化”标签我们可以添加到这样的问题中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T20:07:12.143

它的性能将非常相似，因此您可以选择自己喜欢的。对我来说，for-each 总是更优雅，但每个程序员都不一样^^

# javascript - 未定义 Apache Cordova Android Javascript 回调

> ID：13018921
> 
> 赞同：1
> 
> 时间：2012-10-22T20:03:04.493
> 
> 标签：javascript, android, cordova

也许我在某个地方犯了一个愚蠢的错误。我在 Apache Cordova 2.1.1 上运行，我在一个名为的文件中有一个函数，该函数`upload.js`基本上显示相机视图，并在通过 AJAX 请求上传照片完成后调用回调函数。

方法是：

```
 var Upload = {
      // The callback function that will be invoked with either link or error
      callback_func: null,
      // file is from a <input> tag or from Drag'n Drop
      upload: function(file, callback_func) {

         // Set up the callback first
         Upload.callback_func = callback_func;
         // Checking if the file selected 
         if(!file || file.length < 1) {
            console.log("Error no File");
            Upload.callback_func(null, WRONG_FILE_FORMAT_ERROR);
         } else {
            // Upload the file
            // Callup the callback
            Upload.callback_func(img_url, "Success!!");
         } 
```

现在在浏览器中测试时它会正确调用回调，但是在**android**设备中测试时它说 callback_func 是`undefined`.

有人对此有想法吗？

我称这个函数为`Upload.upload(self.image_data, self.onImageUploaded);`

# .net - 带有实现的框架程序集

> ID：13018922
> 
> 赞同：0
> 
> 时间：2012-10-22T20:03:06.697
> 
> 标签：.net, windows-phone-7, .net-reflector

反射器显示 WP7 程序集的空实现。

AFAIK 的原因 - "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71\" 文件夹包含没有实现的程序集，只有引用。

**带有**实现的程序集在哪里，以便我可以反编译它们？

如果它们不在我的 PC 上，我可以从模拟器或开发人员解锁的 WP7 设备中提取它们吗？

提前致谢。

PS我住在美国以外，这里是合法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:49:46.387

'Reference Assemblies' 文件夹中的程序集仅用于 Visual Studio 中的智能。要获得真正的程序集，您必须从模拟器的图像中提取它们。NKBin 工具集是此操作常用的工具：[http ://www.t-hack.com/wiki/index.php/NK.BIN_toolset](http://www.t-hack.com/wiki/index.php/NK.BIN_toolset)

# visual-studio-2010 - 存储过程不适用于“允许多个值”，但直接查询在 Visual Studio Reporting Services 中有效？

> ID：13018930
> 
> 赞同：0
> 
> 时间：2012-10-22T20:03:35.137
> 
> 标签：visual-studio-2010, visual-studio-2008

我正在 Visual Studio 2010 中处理一个简单的报告，最初我有一个直接查询：

```
SELECT     
   DOCDATE, DOCID, CUSTNMBR, CUSTNAME, DOCAMNT
FROM         
   SOP30200
WHERE     
   (DOCDATE BETWEEN @Fromdate AND @Todate)
GROUP BY 
   DOCDATE, DOCID, CUSTNMBR, CUSTNAME, DOCAMNT
HAVING 
   (CUSTNAME = @Custname OR @Custname IS NULL) AND (DOCID IN (@DocID)) 
```

将`DOCID`参数设置为“允许多个值”，效果很好。

但是，当我创建存储过程时：

```
CREATE Procedure [dbo].[Jae_EraSales]  
   @Custname nVARCHAR(MAX),
   @DocID nVARCHAR(50),
   @Fromdate datetime,
   @Todate datetime
as
   SELECT     
      DOCDATE, DOCID, CUSTNMBR, CUSTNAME, DOCAMNT
   FROM         
      SOP30200
   WHERE     
      (DOCDATE BETWEEN @Fromdate AND @Todate)
   GROUP BY 
       DOCDATE, DOCID, CUSTNMBR, CUSTNAME, DOCAMNT
   HAVING      
       (CUSTNAME = @Custname) AND (DOCID IN (@DocID))
GO 
```

并将存储过程用作我的数据集……SSRS 报告不会提取任何内容。它只提取具有单个`DOCID`值的数据。

谁能解释为什么会这样？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:05:31.123

当您使用`IN`它时，它会查看一组而不是单个字符串表达式。因此，您需要实现诸如 CsvToInt 之类的函数来返回表。

`IN`期望数组不是变量，有人问了一个非常相似的问题，这肯定会对您有所帮助： [tsql IN not working proper if passing as parameter](https://stackoverflow.com/questions/12803231/tsql-in-not-working-properly-if-passed-as-parameter)

它的要点只是编写一个返回表的函数。

# software-design - 从一个不同的狭窄需求规范创建不同的软件设计

> ID：13018931
> 
> 赞同：1
> 
> 时间：2012-10-22T20:03:35.587
> 
> 标签：software-design, system-design

我正在帮助一位朋友完成他的课程作业。基本上，项目要求是创建一个软件系统，以使销售乐器的音乐商店计算机化。本质不过是一个带有一些报告和销售捕获组件的 CRUD 系统。然而，他需要记录三种不同的设计规范，他将从中选择要开发的一种。他有他希望继续进行的设计，但我们正在努力创造两种替代设计。

我的困难是，需求范围如此之窄，以至于改变它是一个挑战，以至于不会创建一个单纯的副本。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:18:58.920

听起来你朋友的教授在教室里待得太久了。本质上为学生创造了太多毫无意义的工作，但收益有问题。但是，如果我理解你朋友的挑战——创建三种架构方法——我建议选择三个起点并从那里开始构建。例如：

> 1）设计一个系统，重点是音乐记录、流媒体等
> 
> 2) 设计一个强调用户/客户输入、交互和丰富用户界面的系统。
> 
> 3) 设计一个强调购买体验和以产品为中心的数据模型的系统。

在每种情况下，您都可以有意地对音乐商店的其他两个组件进行欠建、欠设计，以创造一些区别 - 事实上，我们知道理想的解决方案应该包含所有 3 个架构和设计组件。

希望这可以帮助。祝你好运。

# ruby-on-rails - 为什么我不能覆盖我的 Rails 邮件程序中的布局？

> ID：13018933
> 
> 赞同：0
> 
> 时间：2012-10-22T20:03:51.320
> 
> 标签：ruby-on-rails, actionmailer

我在我的 OrderMailer 顶部指定了布局“email_no_padding”，但它似乎总是在寻找布局/电子邮件。如何正确覆盖此模板？

**错误：**

```
ActionView::MissingTemplateError
Missing template layouts/email with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :haml]}. 
Searched in: 
* "/Users/macuser/github/railsapp/app/views" 
* "/Users/macuser/.rvm/gems/ruby-1.9.3-p194/gems/devise_invitable-1.0.1/app/views" 
* "/Users/macuser/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.0.4/app/views" 
* "/Users/macuser/.rvm/gems/ruby-1.9.3-p194/bundler/gems/kaminari-eb1c080b9999/app/views" 
```

**邮寄者：**

```
class OrderMailer < BaseMailer

  layout 'email_no_padding'

  helper Members::OrdersHelper

  def notify_member_and_expert_of_birthday_gift_delivery(order_id)
    @order = Order.find(extract_id(order_id))
    @member = @order.member
    @expert = @order.andand.expert || @member.andand.expert
    mail(
      :subject  => "An Elephant Never Forgets...",
      :to       => @member.email,
      :cc       => @expert && @expert.email,
      :tag      => 'birthday_delivery-notification'
    )
  end
end 
```

# css - 两个div并排，右div固定宽度，左div占用剩余空间

> ID：13018937
> 
> 赞同：0
> 
> 时间：2012-10-22T20:03:58.700
> 
> 标签：css, html

*** 感谢大家对此进行检查。看来我有一个单独的索引页面模板文件，我忘了编辑它。我为此工作了 2 个小时，感觉很愚蠢！很抱歉浪费您的时间。***

我试图让`div id="right-sidebar"`与页面的右侧对齐，而`div id="right-main"`将剩余的空间填充到左侧。对齐得`div id="right-main"`很好并填充了空间，但是找不到右侧的边栏。谁能弄清楚我在这里做错了什么以使右侧边栏显示在右侧`div id="right-main"`？

**这是我的html：**

```
<div id="page-wrap"align="center">
  <div class="main" align="center">
    <div id="header" align="left"></div>
    <div id="subheader" align="bottom"></div>
    <div id="right-sidebar"></div>
    <div id="right-main"></div>
    <div id="footer"></div>

  </div>

</div> 
```

**这是我的CSS：**

```
#page-wrap {
    padding:10px 10px 10px 10px;
    background:#FFFFFF;
}

.main {
    /*min-width: 780px;*/
    max-width: 1260px;
    position: relative;
    text-align:left;
    padding:10px 10px 10px 10px;
    border:1px solid #777777;

    /* Gradient background */
    background:#FFF;
    background: -moz-linear-gradient(top, #5e99d4, #c4d7ea);
    background: -webkit-gradient(linear, 0% 0%, 0% 75%, from(#5e99d4), to(#c4d7ea));

    /* Rounded Corners */
    -moz-border-radius: 5px 5px 5px 5px;
    -webkit-border-radius: 5px 5px 5px 5px;
    border-radius: 5px 5px 5px 5px;
}

#header {
    padding:10px 20px 10px 10px;
    width: 90%;
    }

#sitepic {
    height: 80px;
    margin: 0 auto;
    padding: 5px;
    float: left; 
}
#p

#subheader {
    margin-left: 10px;
    margin-top: 20px;
    padding: 0px 10px 0px 10px;
    }

#wrapper {

}

#right-sidebar {
    float: right;
    width: 200px;
    min-height: 300px;
    background: #CCCCCC;
    text-align:left;
    padding:10px 5px 10px 5px;
    border:1px solid #777777;
    /* Rounded Corners */
    -moz-border-radius: 5px 5px 5px 5px;
    -webkit-border-radius: 5px 5px 5px 5px;
    border-radius: 5px 5px 5px 5px;
}

#right-main {
    height: auto;
    min-height: 300px;
    margin-right: 210px;
    background: #FFFFFF;
    text-align:left;
    padding:10px 5px 10px 5px;
    border:1px solid #777777;
    /* Rounded Corners */
    -moz-border-radius: 5px 5px 5px 5px;
    -webkit-border-radius: 5px 5px 5px 5px;
    border-radius: 5px 5px 5px 5px;
    }

#footer {
    height: auto;
    margin-top: 10px;
    min-height: 40px;
    background: #5e99d4;
    position: relative;
    text-align:left;
    padding:10px 5px 10px 5px;
    border:1px solid #777777;
    /* Rounded Corners */
    -moz-border-radius: 5px 5px 5px 5px;
    -webkit-border-radius: 5px 5px 5px 5px;
    border-radius: 5px 5px 5px 5px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:12:42.090

它也适用于我。是什么让你觉得你看不见？尝试将边框设置为 10 像素，看看右侧是否变厚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:12:24.553

我看不出有什么不对。“右侧边栏” div 就在“右侧主” div 旁边。你使用的是什么浏览器？在 Firefox 上看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:09:27.690

从 jsFiddle 使用 Chrome 和 IE8，右侧栏似乎可以正常工作。你用什么浏览器看这个？

# macos - 如何将 yank 寄存器发送到外部命令

> ID：13018946
> 
> 赞同：1
> 
> 时间：2012-10-22T20:04:22.753
> 
> 标签：macos, vim, tmux

我想制作一个样式命令/宏来将我当前的未命名的 yank 寄存器（或者如果我必须的话，一个特定的）粘贴到一个外部命令中。

我当前的用例是将行发送到剪贴板。尽管将来我想使用相同的技术将文本发送到其他程序。

对于剪贴板，作为 Mac 用户，我通常只会将其添加`*`到剪贴板，但我也是 Tmux 用户，所以这不起作用。我必须改为使用该`reattach-to-user-namespace`命令。我想要发生的事情是将 yank 寄存器通过管道输出到`reattach-to-user-namespace -l bash -c pbcopy`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:13:50.850

正如 romainl 所说，通过将命名空间命令放在 tmux.conf 中，您不需要这样做，但如果您确实想将寄存器的内容通过管道传输到外部命令，您可以使用`getreg()`它来检索其内容并`exe`执行命令。例如...

```
:exe "!pipereg ".getreg('"')." | pbcopy" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:11:30.777

如果您通过`reattach-to-user-namespace`包装器启动您的 shell（正如我在包装器文档中所描述的那样），它们的所有子级都将附加到用户引导命名空间，因此您不必在对 (eg)`pbcopy`和`pbpaste`.

或者，您可以通过包装器只运行您的 Vim 实例，以使其（及其子级）访问引导命名空间。那样的话，你应该可以使用`*`寄存器（如果你有使用该`+clipboard`特性编译的 Vim 7.3，即除了 OS X 附带的之外几乎任何版本的 Vim）。

```
reattach-to-user-namespace vim …
# use "* inside Vim to access the OS X clipboard. 
```

如果你真的想避免运行包装器，除了需要它的最终进程（例如`pbcopy`），那么你可以使用 Vim 的`system()`函数。这也是您通常将一些内部到 Vim 数据发送到任何（非交互式）外部命令的方式：

```
:call system('reattach-to-user-namespace pbcopy', getreg('')) 
```

您可能希望将其打包为新命令（以便您可以更轻松地将其与不同的寄存器一起使用）：

```
command -bar -register Pbcopy call system('reattach-to-user-namespace pbcopy', getreg(<q-reg>)) 
```

这个新命令可以这样使用（参数是寄存器名称）：

```
:Pbcopy "
:Pbcopy a 
```

您可以更进一步，制作一个调用该命令的映射：

```
nnoremap <F3> :<C-u>execute 'Pbcopy ' . v:register<CR> 
```

您可以通过键入`F3`或来使用它`"``a``F3`（即带有寄存器前缀，就像任何其他使用寄存器的正常模式命令一样）。

# php - 从其他两个变量定义一个变量

> ID：13018949
> 
> 赞同：0
> 
> 时间：2012-10-22T20:04:28.113
> 
> 标签：php, mysql

我是 PDO 和 PHP 的新手，我想知道如何从表中提取的信息中定义变量。

我有以下内容：

```
$UID = $_GET['id'];
$sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' AND ID = '$UID'");
$sth->execute();

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
    echo $row['First_Name'] . ' ' . $row['Surname'] . "\n";
    echo '<img src="http://maps.google.com/maps/api/staticmap?center=' . $row["Location_Postcode_Last_Seen"] . '&amp;zoom=1
    4&amp;size=200x200&amp;maptype=roadmap&amp;markers=color:ORANGE|label:A|' . $row["Location_Postcode_Last_Seen"] . '&amp;sensor=true">';
    echo $row["Nicknames"];
    echo $row["Age"];

} 
```

如果我尝试添加：

```
var $name = echo $row['First_Name'] . ' ' . $row['Surname']; 
```

在我的`while`循环中，代码无法向我的浏览器输出任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:05:57.567

分配一个变量是这样完成的，

```
$name = $row['First_Name'] . ' ' . $row['Surname']; //defining variable $name 
```

并回显/显示它，应该这样做，

```
echo $name; //this will display whatever is in $name 
```

`echo`问题中给出的while循环应该可以正常工作，只要结果集中存在这些键，就会显示您尝试输出的所有内容。

```
 while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
echo $row['First_Name'] . ' ' . $row['Surname'] . "\n";
echo '<img src="http://maps.google.com/maps/api/staticmap?center=' . $row["Location_Postcode_Last_Seen"] . '&amp;zoom=1
4&amp;size=200x200&amp;maptype=roadmap&amp;markers=color:ORANGE|label:A|' . $row["Location_Postcode_Last_Seen"] . '&amp;sensor=true">';
echo $row["Nicknames"];
echo $row["Age"];
} 
```

**编辑：（根据评论）**

```
//assign all that you want to display to a variable $map, the equality operator '=' is used for assigning the right-hand side value to the left-hand side variable.
$map = '<img src="maps.google.com/maps/api/staticmap?center=' . $row["Location_Postcode_Last_Seen"] . '&amp;zoom=1 4&amp;size=200x200&amp;maptype=roadmap&amp;markers=color:ORANGE|label:A|' . $row["Location_Postcode_Last_Seen"] . '&amp;sensor=true">'; 

echo $map; //display $map 
```

**注意：**变量需要被多次访问时才需要赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:08:22.040

`var`是仅用于在类中声明变量的关键字。那可能是它的问题：

```
echo $row['First_Name'] . ' ' . $row['Surname']; 
```

或者

```
$name = $row['First_Name'] . ' ' . $row['Surname'];
echo $name; 
```

此外，您使用的 preprared statmemnts 错误。它们的部分好处是自动引用您的参数。它应该类似于以下内容之一：

```
// position placeholders
$sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' AND ID = ?");
$sth->execute(array($UID)); 
```

或者

```
// names palceholders
$sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' AND ID = :uid");
$sth->execute(array(':uid' => $UID)); 
```

# actionscript-3 - 如何在 NetStream 中打开和关闭 H264？

> ID：13018950
> 
> 赞同：4
> 
> 时间：2012-10-22T20:04:30.960
> 
> 标签：actionscript-3, flash, apache-flex, h.264, netstream

采取以下代码：

```
m_h264Settings = new H264VideoStreamSettings();
<some configuration in between>
m_ns.videoStreamSettings = m_h264Settings; 
```

切换 m_ns 的 videoStreamSettings 是否仍在使用 H264 的好方法是什么？

[我尝试在 NetStreams ( http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html) )的主要文档中查找属性 videoStreamSettings ，而 Adob​​e显然跳过了那个小细节. 我知道如何在应用程序的整个执行过程中有效地控制 NetStream 是使用 H264 还是“默认”，但我希望能够继续单击一个按钮以使其来回切换，而无需更换 NetStream 或做任何事情否则像那样疯狂。

这是如何正确完成的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:08:03.727

阅读您的问题，您的问题似乎有几个问题加上更多的澄清会有所帮助，因此我将做出一些*假设*来尝试回答：

**问题一：**

> 切换 m_ns 的 videoStreamSettings 是否仍在使用 H264 的好方法是什么？

默认**情况下**，您的意思是使用 On2 VP6 视频编解码器并因此发布为 FLV 格式而不是 F4V？

我认为您的查询与正在播放已发布流的连接应用程序有关？您显然可以使用变量来跟踪您在录制应用程序本身中应用于流的设置。

我将假设您有一个单独的应用程序正在摄取已发布的流，并且您只是尝试确定该流是否使用 H264 而不是 On2 VP6 发布。首先文件类型会有所不同，一种是 FLV，一种是 F4V。其次，您可以在发布时利用将元数据分配给流：

```
protected function sendMetadata():void {
    var metaData:Object = new Object();
    metaData.codec = stream.videoStreamSettings.codec;
    metaData.profile = m_h264Settings.profile;
    metaData.level = m_h264Settings.level;
    metaData.hasMetadata = true;
    stream.send("@setDataFrame", "onMetaData", metaData);
} 
```

然后，在您的播放应用程序中，您可以使用 onMetaData() 回调来获取您需要的信息：

```
public function onMetaData(infoObject:Object):void {} 
```

**问题2：**

> 我希望能够继续单击一个按钮以使其来回切换，而无需更换 NetStream 或做任何其他疯狂的事情。

我建议使用重新连接例程来切换您的设置以取消发布现有流并重新连接相机并发布具有不同视频设置的新流。这将保持流的完整性，老实说，取消发布和重新发布流并不像你说的那么*疯狂。*

如果您必须遵循切换设置的路线，那么我上面关于您声明为**默认值**的假设将阻止更改已发布流上的文件格式。

我个人不会使用相同的编解码器并在流的中间发布中应用不同 的[H264VideoStreamSettings](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/H264VideoStreamSettings.html)。H264VideoStreamSettings 仅在将相机添加到流中时验证，并在压缩开始后应用。据我了解，压缩从流的发布开始，因此按照您的建议进行切换，您将在已经发布的流上进行压缩。在我看来，由此产生的流会导致太多的波动，我很难理解为什么这是必要的。但是，我可能会被纠正，或者可能是出于测试目的。

这是完全未经测试的，但您可以创建相机实例，应用您的 videoStreamSettings，将相机附加到您的流实例，然后发布。虽然它正在发布以切换设置，但您可以将相机实例从网络流中分离：

```
stream.attachCamera(null); 
```

然后简单地创建一个新的相机实例，应用新的 videoStreamSettings，最后将它附加到已经发布的流上。

我通常在收到状态事件**“NetStream.Publish.Start”时发送元数据。**每次将相机重新连接到流时，您都必须修改并重新发送，只要流正在发布。我不知道这会产生什么影响，但是您连接的播放器应该会收到有关元数据更改的回调。

# android - 我可以在 android 中使用 50% 而不是 50px 吗？

> ID：13018953
> 
> 赞同：0
> 
> 时间：2012-10-22T20:04:39.363
> 
> 标签：android, android-layout

我有这种情况：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
android:layout_width="fill_parent"  
android:layout_height="fill_parent"  
>  

<ImageButton android:id="@+id/btn1"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_marginLeft="50px"
    android:layout_marginTop="50px"
    android:clickable="true"  
    android:tag="1"  
    android:background="@drawable/xo" 
/>  

<ImageButton android:id="@+id/btn2"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_marginLeft="120px"
    android:layout_marginTop="50px" 
    android:clickable="true"  
    android:tag="2"  
    android:background="@drawable/xo" 
/>  

<ImageButton android:id="@+id/btn3"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_marginLeft="190px"
    android:layout_marginTop="50px"   
    android:clickable="true"  
    android:tag="3"  
    android:background="@drawable/xo" 
/>  
</RelativeLayout> 
```

我可以使用百分比而不是 50px 吗？如果是，语法如何？我有这 3 个按钮，并希望显示在页面中间。我想一个接一个，水平对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:16:03.507

不知道百分比我还没有遇到过百分比。android 中还使用了其他测量值。我希望您使用 dp 或 sp 并且在非常必要之前不要使用像素。这是不同尺度之间差异的链接。

[Android上的“px”、“dp”、“dip”和“sp”有什么区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:13:03.250

我不知道是否允许百分比，但我知道由于屏幕分辨率和密度不同，通常不赞成 px/pixels。

[http://developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)描述了可能对您有用的 dp（与密度无关的像素）。虽然不能帮助你百分比部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:33:40.857

您需要`android:layout_centerVertical="true"`layout_marginTop 的 ，而不是百分比。

我为此修改了您的xml。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent"  
>  
<ImageButton android:id="@+id/btn1"  
    android:layout_width="60dp"   
    android:layout_height="80dp"  
    android:layout_marginLeft="50dp"
    android:layout_centerVertical="true"
    android:clickable="true"  
    android:tag="1"  
    android:background="@android:color/darker_gray" 
/>  
<ImageButton android:id="@+id/btn2"  
    android:layout_width="60dp"   
    android:layout_height="80dp"
    android:layout_toRightOf="@+id/btn1"
    android:layout_alignTop="@+id/btn1"
    android:layout_marginLeft="10dp" 
    android:clickable="true"  
    android:tag="2"  
    android:background="@android:color/darker_gray" 
/>  
<ImageButton android:id="@+id/btn3"  
    android:layout_width="60dp"   
    android:layout_height="80dp"
    android:layout_toRightOf="@+id/btn2"
    android:layout_alignTop="@+id/btn2"
    android:layout_marginLeft="10dp"  
    android:clickable="true"  
    android:tag="3"  
    android:background="@android:color/darker_gray" 
/>  
</RelativeLayout> 
```

与您的左侧 btn1 对齐。

如果您希望您的 btn2 位于中心，请使用`android:layout_centerInParent="true"`.

并让 btn1 和 btn3 对齐它。

# javascript - 播放声音 onclick 后减少延迟？

> ID：13018960
> 
> 赞同：0
> 
> 时间：2012-10-22T20:05:10.040
> 
> 标签：javascript

我正在尝试制作一个有按钮的网站（使用 JavaScript），如果有人点击它，它会播放声音。

但问题是当我点击按钮时，它会等待（我猜是加载）几秒钟，然后播放声音。如果声音说“你好”并且有人不断点击它，我希望它播放“他-他-他-他-他-你好”。

按钮是.pngs，我也有一个按下按钮的动画。

每个代码调用四个函数。那么这是一个效率问题吗？有人可以建议我更好的方法吗？

```
<html>
    <body>
<title>Title</title>

 <head>
        <style type="text/css">
         body{
         background: url('noisy_grid.png');
         background-repeat: repeat;
         }
        </style>

    <script language="javascript" type="text/javascript">
 <!--
// PRELOADING IMAGES
if (document.images) {
 btn1_down=new Image(); btn1_down.src="img1_down.png"; 
 btn1_up  =new Image(); btn1_up.src  ="imag1_up.png"; 

 btn2_down=new Image(); btn2_down.src="img2_down.png"; 
 btn2_up  =new Image(); btn2_up.src  ="img2_up.png"; 

 btn3_down=new Image(); btn3_down.src="imag3_down.png"; 
 btn3_up  =new Image(); btn3_up.src  ="img3_up.png"; 

  btn4_down=new Image(); btn4_down.src="img4_down.png"; 
 btn4_up  =new Image(); btn4_up.src  ="img4_up.png"; 

  btn5_down=new Image(); btn5_down.src="img5_down.png"; 
 btn5_up  =new Image(); btn5_up.src  ="img5_up.png"; 

  btn6_down=new Image(); btn6_down.src="img6_down.png"; 
 btn6_up  =new Image(); btn6_up.src  ="img6_up.png"; 

}

// EVENT HANDLERS
function pressButton(btName) {
 if (document.images)
  eval('document.'+btName+'.src='+btName+'_down.src');
}
function releaseButton(btName) {
 if (document.images)
  eval('document.'+btName+'.src='+btName+'_up.src');
}

function playSound(soundfile) {
document.getElementById("dummy").innerHTML=
    "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
}

 -->
    </script>
 </head>

 <span id="dummy"></span>
<center>
<br>
 <a onMouseDown="pressButton('btn1');" 
      onMouseUp="releaseButton('btn1');" 
      onMouseOut="releaseButton('btn1');" 
      onclick="playSound('sound1.mp3');"><img name=btn1 src="img1_up.png" /></a>

<a onMouseDown="pressButton('btn2');" 
      onMouseUp="releaseButton('btn2');" 
      onMouseOut="releaseButton('btn2');" 
      onclick="playSound('sound2.mp3');"><img name=btn2 src="img2_up.png" /></a>

<a onMouseDown="pressButton('btn3');" 
      onMouseUp="releaseButton('btn3');" 
      onMouseOut="releaseButton('btn3');" 
      onclick="playSound('sound3.mp3');"><img name=btn3 src="img3_up.png" /></a>
</br>
 <br>
<a onMouseDown="pressButton('btn4');" 
      onMouseUp="releaseButton('btn4');" 
      onMouseOut="releaseButton('btn4');" 
      onclick="playSound('sound4.mp3');"><img name=btn4 src="img4_up.png" /></a>

<a onMouseDown="pressButton('btn5');" 
      onMouseUp="releaseButton('btn5');" 
      onMouseOut="releaseButton('btn5');" 
      onclick="playSound('sound5.mp3');"><img name=btn5 src="img5_up.png" /></a>

<a onMouseDown="pressButton('btn6');" 
      onMouseUp="releaseButton('btn6');" 
      onMouseOut="releaseButton('btn'6);" 
      onclick="playSound('sound6.mp3');"><img name=btn6 src="img6_up.png" /></a>
</br>

</center>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:42:39.257

哇，真的有必要吗？评估？嵌入？*真的吗？*

尝试这个：

```
<!DOCTYPE HTML>
<html> 
<head> 
    <title>Title</title> 
    <style type="text/css"> 
        body{ 
            background: url('noisy_grid.png'); 
            background-repeat: repeat; 
        } 
    </style> 
</head>
<body>
    <center id="container"></center> 
    <script type="text/javascript">
        (function() {
            var images = {}, pressButton, releaseButton, playSound, i, a, aud, img,
                container = document.getElementById('container');
            // preload images
            for( i=1; i<=6; i++) {
                (images[i+'d'] = new Image()).src = "img"+i+"_down.png";
                (images[i+'u'] = new Image()).src = "img"+i+"_up.png";
            }

            // event handlers
            pressButton = function(btn) {
                btn.firstChild.src = images[btn.btnid+'d'].src;
            }
            releaseButton = function(btn) {
                btn.firstChild.src = images[btn.btnid+'u'].src;
            }
            playSound = function(btn) {
                btn.nextSibling.play();
            }

            for( i=1; i<=6; i++) {
                a = document.createElement('a');
                img = document.createElement('img');
                aud = document.createElement('audio');

                if( !aud.canPlayType || aud.canPlayType("audio/mpeg") == ""
                          || aud.canPlayType("audio/mpeg") == "no") {
                    alert("Sorry, your browser does not support MP3.");
                    return;
                }

                a.onmousedown = function() {pressButton(this);};
                a.onmouseup = a.onmouseout = function() {releaseButton(this);};
                a.onclick = function() {playSound(this);};
                a.btnid = i;
                img.src = images[i+'u'].src;
                aud.src = "sound"+i+".mp3";

                container.appendChild(a);
                a.appendChild(img);
                container.appendChild(aud);
            }
        })();
    </script>
</body> 
</html> 
```

我已经完全重写了你的代码，让它从上个千年到现在。如果您需要帮助了解它的工作原理，请告诉我一个具体问题。

# php - php imagick：tif/tiff 总是 160x160 像素

> ID：13018961
> 
> 赞同：0
> 
> 时间：2012-10-22T20:05:10.227
> 
> 标签：php, image, imagick, image-size

我正在使用 imagick-extension for php 来转换图像。一切正常，除了 tif/tiff 图像的转换。当我使用下面的代码时（出于测试目的，我简化了代码）：

```
<?php
    $image = new imagick("myImage.tif");
    var_dump($image->getImageGeometry());
?> 
```

对于大于 160x160 像素的图像，我总是得到以下信息：

> 数组（2）{ [“宽度”] => int（160）[“高度”] => int（160）}

例如......图像最初是 1000x1000 像素......但 Imagick 意味着图像只有 160x160。我还尝试了 php 的 getimagesize() 函数，它也显示 1000x1000 像素（而不是 160x160）。但是当我使用小于 160x160 的图像时，我得到了正确的尺寸......

我已经花了几个小时在没有任何解决方案的情况下找出问题所在。Imagick 对 tif/tiff-images 是否有任何限制，或者有谁知道问题出在哪里以及如何解决？

# concurrency - 并发http请求没有响应

> ID：13018962
> 
> 赞同：8
> 
> 时间：2012-10-22T20:05:20.617
> 
> 标签：concurrency, go

我正在玩一些围棋，但我遇到了一个我无法解决的问题。

以下代码是重现我的问题的最不可能的代码。原始代码的目标是将 http 请求委托给 goroutines。每个 goroutine 都会进行一些繁重的图像计算，并且应该做出响应。

```
package main

import (
    "fmt"
    "runtime"
    "net/http"
)

func main() {
    http.HandleFunc("/", handle)
    http.ListenAndServe(":8080", nil)
}

func handle(w http.ResponseWriter, r *http.Request) {

    // the idea is to be able to handle several requests
    // in parallel

    // the "go" is problematic
    go delegate(w)
}

func delegate(w http.ResponseWriter) {

    // do some heavy calculations first

    // present the result (in the original code, the image)
    fmt.Fprint(w, "hello")
} 
```

在`go delegate(w)`我没有得到回应的情况下，没有`go`它的效果很好。

谁能解释发生了什么？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:10:28.050

`ListenAndServe`已经启动 goroutines 来调用你的处理函数，所以你不应该自己做。

以下是[包源中相关函数的代码](http://golang.org/src/pkg/net/http/server.go?s=30200:30241#L1000)：

```
1089    func ListenAndServe(addr string, handler Handler) error {
1090        server := &Server{Addr: addr, Handler: handler}
1091        return server.ListenAndServe()
1092    }

1010    func (srv *Server) ListenAndServe() error {
1011        addr := srv.Addr
1012        if addr == "" {
1013            addr = ":http"
1014        }
1015        l, e := net.Listen("tcp", addr)
1016        if e != nil {
1017            return e
1018        }
1019        return srv.Serve(l)
1020    }

1025    func (srv *Server) Serve(l net.Listener) error {
1026        defer l.Close()
1027        var tempDelay time.Duration // how long to sleep on accept failure
1028        for {

1057            go c.serve()
1058        }
1059        panic("not reached")
1060    }

579 // Serve a new connection.
580 func (c *conn) serve() {
581     defer func() {
582         err := recover()

669         handler.ServeHTTP(w, w.req) 
```

所以你的代码应该只是

```
func handle(w http.ResponseWriter, r *http.Request) {
    // the idea is to be able to handle several requests
    // in parallel
    // do some heavy calculations first

    // present the result (in the original code, the image)
    fmt.Fprint(w, "hello")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:11:06.457

处理程序已经从“外部”goroutine（每个请求一个）调用。处理程序必须在返回之前完成所有必须完成的事情，例如编写完整的响应。您正在“过早地”返回多余的 go 语句的 b/c。请尝试简单地将“代表”的主体放在“句柄”中，并检查这是否会有所改善；-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:28:52.927

有时 Go 调度器对 Goroutine 真的很无情。问题是这样的：你有一个应用程序并且你运行 goroutine，所以调度器认为：嘿，我实际上可能会做一些优化。为什么我不稍后运行这个特定的 Goroutine 来节省一些 CPU 时间并使应用程序响应更快？

这就是发生的事情：在您的代码中无法强制 Goroutine 在某个时候完成。事实上 Go 文档是这样说的：

> 例如，在这个程序中：
> 
> ```
>  var a string
> 
>  func hello() {
>    go func() { a = "hello" }()
>    print(a)
>  } 
> ```
> 
> 对 a 的赋值之后没有任何同步事件，因此不能保证被任何其他 goroutine 观察到。事实上，激进的编译器可能会删除整个 go 语句。
> 
> 如果一个 goroutine 的效果必须被另一个 goroutine 观察到，那么使用诸如锁或通道通信之类的同步机制来建立相对排序。

因此，您的问题的解决方案是添加一个同步事件，例如通过使用通道：

包主

```
import (
  "fmt"
  "net/http"
)

func main() {
    http.HandleFunc("/", handle)
    http.ListenAndServe(":8080", nil)
}

func handle(w http.ResponseWriter, r *http.Request) {
    // the idea is to be able to handle several requests
    // in parallel

    // the "go" is problematic...
    ch := make(chan int)
    go delegate(w, ch)
    // ...but not anymore:
    <-ch
}

func delegate(w http.ResponseWriter, ch chan<- int) {
    // do some heavy calculations first
    // present the result (in the original code, the image)
    fmt.Fprint(w, "hello")
    ch <- 1
} 
```

来自：[Go 内存模型](http://golang.org/ref/mem)

无论如何，正如其他人所指出的那样，您的示例目前有点人为。但是在某些情况下，从 http 处理程序内部调用其他 Goroutine 是有意义的。例如，如果您同时进行繁重的计算和 HTTP 流式传输，或者同时进行多个繁重的计算。尽管我认为在后一种情况下，您可能会自己添加一个频道以用于同步目的。

# sql - 在 Oracle SQL 中解析具有未知名称空间的 XML

> ID：13018966
> 
> 赞同：7
> 
> 时间：2012-10-22T20:05:35.513
> 
> 标签：sql, oracle, parsing, namespaces, xmltype

我在使用 Oracle SQL 和 XML 时遇到问题。

我将从外部系统获得大量格式良好的 XML 数据，用于解析、解释和填充一些表。我使用 XMLTable 编写了一个解决方案，该解决方案在表上的一个视图中进行了布局，其中包含有问题的 xml clob 列以及一些审计信息和内容（我想保持这种方式）。

命名空间让我做噩梦。显然我不能把它们放在 xmlnamespaces 子句中，因为我永远不知道**它们**会是什么。荒谬！相同类型的交付项目在不同时间点可能具有不同的命名空间。没有有限的清单。甚至默认的 xmlns 也不是恒定的。

到目前为止，我提出的最佳工作解决方案是一组 regexp_replace（准确地说是 3 个），在解析之前擦除所有命名空间。但性能是一个巨大的问题。

当然，我缺少一些聪明的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:14:06.643

我知道这已经很老了，但我今天发现了它，并记得我在尝试处理命名空间 XML 时所经历的痛苦。我的解决方案是使用 XSLT 转换去除名称空间，并将其作为普通的旧 XML 处理。我曾经这样做的功能是：

```
function remove_namespace( i_xml in xmltype )
  return xmltype
is
  v_xml xmltype default i_xml;
  v_xsl varchar2(32767);
begin
  v_xsl := '<?xml version="1.0" encoding="UTF-8"?>
        <xsl:stylesheet version="1.0"
         xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
        <xsl:template match="*">
          <!-- remove element prefix (if any) -->
          <xsl:element name="{local-name()}">
          <!-- process attributes -->
          <xsl:for-each select="@*">
            <!-- remove attribute prefix (if any) -->
            <!-- this if filters out any xmlns="" atts that have no
                 namespace prefix in the xml -->
            <xsl:if test="(local-name() != ''xmlns'')">
              <xsl:attribute name="{local-name()}">
                <xsl:value-of select="."/>
              </xsl:attribute>
            </xsl:if>
          </xsl:for-each>
         <xsl:apply-templates/>
         </xsl:element>
         </xsl:template>
         </xsl:stylesheet>';
  return v_xml.transform(xmltype(v_xsl));
end; 
```

# python - 如何自动检测图像是否高质量？

> ID：13018968
> 
> 赞同：0
> 
> 时间：2012-10-22T20:05:49.407
> 
> 标签：python, image-processing

我想要一种算法来检测图像是否具有高专业质量或对比度差、光线不足等情况。我该如何设计这样的算法。

我觉得这是可行的，因为如果我在 picassa 中按下一个按钮，它会尝试修复照明、对比度和颜色。现在我已经看到，如果我按下自动修复按钮，在好图片中的变化并不像在坏图片中那么高。这可以用作引导吗？

请向我提出任何想法。另外，如果以前已经这样做过，并且我正在做轮子发明的事情，请阻止我并指出我以前的工作。

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:50:03.130

你这样做太难了。我在生产代码中通过生成图像的直方图来处理这个问题，丢弃异常值（1 个黑色像素并不意味着整个图像有很多黑色；1 个白色像素并不意味着明亮的图像），然后查看是否由此产生的分布覆盖了足够的亮度范围。

在统计方面，您还可以查看直方图是否接近具有令人满意的大标准偏差的高斯分布。如果整个图像是中等灰色且 stddev 很小，那么根据定义，您的图像对比度较低。如果平均值大约是中灰色，但 stddev 涵盖了从 20% 到 80% 的亮度级别，那么您就有了不错的对比度。

但请注意，这些方法都不需要任何类似于机器学习的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:37:51.130

有几个开源程序可以进行您正在寻找的图像校正，作为低质量图像的指示。[Gimp](http://www.gimp.org/)（请参阅文档中的[增强照片](http://docs.gimp.org/en/gimp-imaging-photos.html)）和[ImageMagick （请参阅](http://www.imagemagick.org/)[示例](http://www.imagemagick.org/script/examples.php)中的对比度拉伸、标准化、自适应锐化、自动级别）。

研究他们的代码将是一个好的开始，因为检测低质量图像的一种明显方法是将图像通过上述增强算法之一，并寻找原始图像和处理后的图像之间的差异。

# c# - 如何在多边形中连接多个点

> ID：13018971
> 
> 赞同：0
> 
> 时间：2012-10-22T20:06:00.450
> 
> 标签：c#, .net, wpf, polygon

我在连接多边形中的许多点时遇到问题。我有一个点列表，我希望结果是这样的：http: [//imageshack.us/a/img818/6663/punktyx.jpg](http://imageshack.us/a/img818/6663/punktyx.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:43:11.773

对不起，如果我不会为此吐出代码......

基本上，您知道至少 4 个点将始终是该多边形的一部分：X 中的 Min 和 Max，Y 中的 Min 和 Max。如果两个或多个点具有相同的 Min 或 Max，它们将被连接。

对于以下计算，假设每个点都是 Vector3，其中 Z 为 0。

使用 MinX 和 MinY，您需要将它们与其他点连接起来。做 (MinX - Point), (Point - MinY) 的叉积，如果结果向量的 Z 为 +1，则当与 MinX 和 MinY 连接时，该点将创建一个船体形状。解析完所有点后，您会得到一组可能有效的点，每个点都会创建一个凸形。从他们那里，您再次重新获取 MinX/MinY 并重新解析剩余的点。如果 MinX 和 MinY 是同一个点，你就知道它直接链接到其他点。

基本上，您对 4 个象限执行此操作。(MinX/MinY, MinX/MaxY, MaxX/MinY, MaxX/MaxY)

您最终将得到一个定义外部形状或凸包的点列表。从那开始，应该足够简单来连接它们。

可能有一个更有效的算法，只是说我会怎么做。

# jquery - 如何在 JQuery 中等待 AJAX 请求完成？

> ID：13018972
> 
> 赞同：2
> 
> 时间：2012-10-22T20:06:01.643
> 
> 标签：jquery, ajax

我有 4 个不同的 JQuery AJAX 函数，每个函数都从 last.fm API 获取不同的信息。此信息必须在工具提示中连接在一起。

这些是我的 4 个功能：

1.  获取给定曲目和艺术家的专辑。返回曲目名称。
2.  获取艺术家图像。返回 1 个网址。
3.  获取艺术家的前 3 张专辑。返回 3 个字符串的数组。
4.  获取给定艺术家的 #1 热门曲目。返回曲目名称。

```
var getTrackAlbum = function(track, artist) {
    $.getJSON(
      settings.PHP_REQUEST_URL,
      {
        method: "track.getInfo",
        api_key : settings.LASTFM_APIKEY,
        track   : track,
        artist  : artist,
        format  : "json"
      },
      function(data) {
        return data.track.album.title;
      });
}

var getArtistImage = function(artist) {
    var options = {
      artSize: 'medium',
      noart: 'images/noartwork.gif',
    }

    if(options.artSize == 'small'){imgSize = 0}
    if(options.artSize == 'medium'){imgSize = 1}
    if(options.artSize == 'large'){imgSize = 2}

    $.getJSON(
      settings.PHP_REQUEST_URL,
      {
        method: "artist.getInfo",
        api_key : settings.LASTFM_APIKEY,
        artist  : artist,
        format  : "json"
      },
      function(data) {
        return stripslashes(data.artist.image[imgSize]['#text']);
      });
}

var getArtistTopAlbums = function(artist) {
    var albums = new Array();

    var onComplete = function() {
      return albums;
    }

    $.getJSON(
      settings.PHP_REQUEST_URL,
      {
        method: "artist.getTopAlbums",
        api_key : settings.LASTFM_APIKEY,
        artist  : artist,
        format  : "json"
      },
      function(data) {
        $.each(data.topalbums.album, function(i, item){
          albums[i] = item.name;

          if(i == 2) { 
            onComplete.call(this);
            return;
          }
        });
      });
}

var getArtistTopTrack = function(artist) {
    $.getJSON(
      settings.PHP_REQUEST_URL,
      {
        method: "artist.getTopTracks",
        api_key : settings.LASTFM_APIKEY,
        artist  : artist,
        format  : "json"
      },
      function(data) {
        return data.toptracks.track[0].name;
      });
} 
```

为了重用的目的，我决定不使用一个独特的方法来处理所有的请求。但是，现在我想在设置工具提示的 HTML 之前等待所有 AJAX 请求完成。

这是我的工具提示的代码：

```
$('.lfm_info').on('mouseover', function(){
          var toolTip = $(this).children('.tooltip');

          var trackhtml = $(this).parent().children('.lfm_song').html().split(".");
          var track = trackhtml[1].trim();
          var artist = $(this).parent().children('.lfm_artist').html();

        // needs to wait until the AJAX is done!    
        toolTip.html('html here');

        $('#tracks').mouseleave(function(){
         if(toolTip.is(':visible')){
           toolTip.fadeOut(500);  
         };    
       });

        toolTip.fadeIn(500);      
      });
} 
```

在调用之前我将如何等待所有请求完成`toolTip.html(...)`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T20:14:20.023

存储每个请求，然后使用`$.when`创建单个延迟对象来监听它们是否完成。

```
var req1 = $.ajax({...});
var req2 = $.ajax({...});
var req3 = $.ajax({...});

$.when( req1, req2, req3 ).done(function(){
    console.log("all done")
}); 
```

# javascript - 在 HTML链接中使用 Javascript 变量

> ID：13018973
> 
> 赞同：4
> 
> 时间：2012-10-22T20:06:06.263
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T20:26:28.150

或者，也许您可​​以将链接编写为内联 js。

```
​&lt;script>
document.write('<a href="http://www.xyz.com/Index1/Index2/' + random_generator + '/Index4">hello</a>');
</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:19:52.660

我不确定我是否理解你的问题。但是，如果您尝试将链接动态设置为 href（假设您没有使用 jquery），则以下内容应该有效。

```
<a href='http://www.xyz.com/Index1/Index2/Variable/Index4' id="index">Good Morning</a>
<script>
    var newUrl = document.getElementById('index').href;
    newUrl = newUrl.replace("Variable", random_generator);
    document.getElementById('index').href = newUrl;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:08:48.610

您可以在脚本执行时使用 jQuery 更新 dom 元素

首先你必须给你的href一个id

`<a href="#" id="myHref"`

进而

`$('#myHref').attr('href', variable)`

或者您可以更改链接文本 `var varText = "This is a link"; $('#myHref').text(varText);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:12:04.727

很确定这会起作用

```
 document.getElementById('myHref').href = variable; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T20:14:37.627

据我所知，这是不可能的。你可以做以下两件事之一：

1 加载文档时更改 HREF 属性。使用 JQuery，您可以执行类似的操作

```
$(function() {
 $('a').attr('href', 'www.xyz.com/Index1/Index2/' + random_generator + '/Index4');
}); 
```

2 捕捉点击事件并用javascript重定向它，这意味着即使用户多次点击链接而不刷新页面，它也是随机的。

```
$(function() {
 $('a').on('click', function(e) {
   e.preventDefault();
   window.location = 'www.xyz.com/Index1/Index2/' + random_generator + '/Index4';
 });
}); 
```

如果您不希望使用 jquery，我相信网上有很多示例可以使用纯 javascript 执行此操作。

# ruby - MiniTest ruby 类查询返回 nil

> ID：13018975
> 
> 赞同：1
> 
> 时间：2012-10-22T20:06:19.510
> 
> 标签：ruby, ruby-on-rails-3, autotest, minitest

我正在运行 Rails 3.2.8 并使用 MinitTest 规范进行测试。我有自动测试管理我的测试套件，除了一件事外，一切都很好。我有一个由 ActiveRecord 和 MySQL 管理的联系人表和一个没有数据库表的 CsvImport 自定义 ruby​​ 类。当我在 IRB 中运行应用程序时，一切都按预期工作，但是当测试通过测试套件运行时，Ruby 类中的所有 Contact.find / Contact.where / Contact.map 查询类型调用都返回 nil。

这是一个例子：

```
require 'test_helper'

class CsvRowManagerTest < MiniTest::Spec
  describe 'import tests' do
    let(:row) { Hash['name' => 'test'] }
    let(:rm) { CsvRowManager.new(row) }
    it "should return an array of stuff" do
      rm.contacts.wont_be_nil
    end
  end
end

class CsvRowManager
  attr_accessor :row, :contacts

  def initialize(row)
    @row = row
    @contacts = Contact.all.map(&:name) #<-- returns nil
  end

end 
```

更多的是演示。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:29:43.023

原来测试数据库没有从开发中克隆数据！多哈。感谢你们两个的帮助；你把我推向了正确的方向。@Blowmage 甚至提出远程调试我的问题。真是个踢屁股的家伙！

# javascript - 即使while为真，Javascript也会执行while循环

> ID：13018976
> 
> 赞同：1
> 
> 时间：2012-10-22T20:06:21.077
> 
> 标签：javascript, loops, do-while

好的，所以我有一个使用 jQuery 的 do-while 循环。基本上它的重点是检查目录中是否有照片并将其添加到数组中。该目录的照片都命名为“phone01.png”、“phone02.png”等，它们位于一个名为“slides”的目录中。

这是代码：

```
var images = [];
var i=0;

    do {
        ++i;
        $.get('./slides/phone0' + i + '.png',function(){
            images[(i-1)] = './slides/phone0' + i + '.png';
        });
    }
    while ( images[(i-1)] == './slides/phone0' + i + '.png' ); 
```

所以如果我最后使用控制台，images[] 只包含'./slides/phone01.png'，但是

我是 1

images[(i-1)] 因此是 './slides/phone0' + i + '.png'

输入`( images[(i-1)] == './slides/phone0' + i + '.png' )`退货`true`。所以 while 语句为真，但循环没有继续。

此外，如果我再次手动运行循环（迭代 i，运行 get），get 将成功并将新成员添加到数组中。所以，*do 函数永远不会运行第二次*。

是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:09:53.150

$.get 是一个异步请求。因此，您的循环将始终运行一次，因为图像数组永远不会按您的预期设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:18:30.623

这是一个经典的异步问题。

当你调用时`$.get()`，它不会立即进入你给它的函数。

发生的情况是它设置了一个 HTTP 请求，并将该函数附加到请求中，作为请求成功时调用的函数。

然后程序的原始部分继续自己的业务，忘记了 HTTP 请求和它传递给它的函数。

在这种情况下，程序的原始部分是`while`循环。一旦它放弃了它的功能，它就会继续并围绕while循环循环。

在循环的每次迭代中创建的函数不会被触发，直到 (a) HTTP 请求有一个成功的响应，并且 (b) 正在运行的其余 Javascript 代码停止阻塞线程并让它有机会运行.

这称为异步代码，并且是第一个“A”术语“AJAX”。这也是整个 Javascript 事件处理模型的工作原理，以及您在 jQuery 中看到的所有嵌套函数。（这也可以解释您可能已经看到代码似乎以错误顺序运行的其他情况）。

如果你想用异步代码做这样的循环，你需要用完全不同的方式编写它：`while`你编写的传统循环将无法工作。

有很多方法可以做到，但我建议不要只是给你一些代码，而是更多地挖掘整个事情是如何工作的，因为如果你要编写 Ajax 代码，你需要了解这些东西.

不过我会给你一个提示：全局变量在这类程序中通常不是那么有用。从您的代码示例中不清楚您的变量是否是全局变量，但如果是，您肯定要考虑将它们设为局部变量并在函数之间传递它们，而不是仅仅期望将它们设置在一个地方并为它们设置在另一个工作。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T06:35:19.267

首先，我对立即调用函数表达式的工作原理有一个非常薄弱的​​掌握，我尝试了这个：

```
var i=0;

do {
    ++i;
    (function(iteration){
        $.get('./slides/phone0' + i + '.png',function(){
            images[(i-1)] = './slides/phone0' + i + '.png';
        });
    })(i);
}
while ( images[(i-1)] == './slides/phone0' + i + '.png' ); 
```

尝试在 while 循环中强制评估 GET ......无济于事。我已经解决了以下问题。欢迎任何关于这是多么有效/干净的想法。我可能从 C 的角度思考太多（函数中的函数！-- 在此处插入 Xzibit meme）。但这确实完成了工作：

```
var i=0;

function createArray(){
    $.get('./slides/text0' + (i+1) + '.txt',function(data){
        texts.push(data);
    });
    $.get('./slides/phone0' + (i+1) + '.png',function(){
        images[i] = new Image();
        images[i].src = './slides/phone0' + (i+1) + '.png';
        i++;
        createArray();
    }).error(function(){
        slider();
    });
} 
```

# c# - 将 linq 查询结果绑定到 gridview

> ID：13018978
> 
> 赞同：1
> 
> 时间：2012-10-22T20:06:28.127
> 
> 标签：c#, asp.net, linq

我发现很难将 linq 查询结果绑定到我的 asp.net 页面上的 gridview 控件。在主 Linq 查询中，我从一个表中获取所有用户，该表符合检查“表单已完成”的列的标准 -

```
using (COLA_AccreditationEntities4 eFactory = new COLA_AccreditationEntities4())
{
    var evaluations = eFactory.Symposium_Evaluation.Where(a => 
            (!a.Completed.HasValue || 
              a.Completed.Value == 0) && a.Active && a.UserID >= 2063).ToList(); 
```

然后在代码中，我正在执行一个 foreach 循环，以从另一个表中获取与前一个表中的用户 ID 匹配的所有用户 ID -

```
foreach (var eval in evaluations)
{
    var user = eFactory.SYMPOSIUM_Users.Where(a => a.UserID == eval.UserID.Value 
                         && a.Active.Value && a.UserRole == 1).FirstOrDefault();

    if (user != null && !users.Contains(user.UserID))
    {
        string name = user.FirstName + " " + user.LastName;
        string email = user.Email;
    }
} 
```

我想做的就是在屏幕上显示 user.firstname + user.lastname + user.email。我使用 gridview 控件来绑定它，但没有得到想要的结果。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:11:30.920

您应该能够直接从您的查询绑定到您的网格：

`var users = eFactory.SYMPOSIUM_Users.Where(a => a.UserID == eval.UserID.Value && a.Active.Value && a.UserRole == 1); this.mygrid.DataSource = 用户；

我建议看一下[asp.net](http://www.asp.net/web-forms/tutorials/data-access)网站的教程。那里有很多好的内容。

**更新：**
也许您最好的解决方案是从两个表的连接中创建一个匿名类型，这样您就不会重复查询您的数据存储，并且您的数据绑定会更简单。

```
var result = (from i in eFactory.Symposium_Evaluation
              join user in eFactory.SYMPOSIUM_Users on i.UserID equals user.UserID
              where user.UserRole == 1 &&
                   ((!i.Completed.HasValue || 
                     i.Completed.Value == 0) && 
                    i.Active && a.UserID >= 2063)
              select new {
                  User = user,
                  Symposium = i
              }).ToList();

myDataGrid.DataSource = result;
myDataGrid.DataBind(); 
```

现在在您的网格行模板中，您可以：

```
<%#Eval("User.FirstName")%>
<%#Eval("User.LastName")%>
<%#Eval("User.Email")%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:27:32.617

定义用户类型列表

```
List<User> users= new List<User>(); 
```

修改您的第二个代码块，如下所示

```
foreach (var eval in evaluations)
{
    var user = eFactory.SYMPOSIUM_Users.Where(a => a.UserID == eval.UserID.Value 
                         && a.Active.Value && a.UserRole == 1).FirstOrDefault();

    if (user != null && !users.Contains(user.UserID))
    {
        users.Add(user);  
    }
} 
```

将gridview中的绑定代码修改为

```
<%#Eval("FirstName")%>
<%#Eval("LastName")%> 
```

最后将您的网格与用户列表绑定

```
this.mygrid.DataSource = users;
this.mygrid.DataBind(); 
```

# javascript - Google Maps API v3 - 最准确的“设置当前位置”方法

> ID：13018979
> 
> 赞同：2
> 
> 时间：2012-10-22T20:06:30.587
> 
> 标签：javascript, google-maps-api-3, geolocation, ip-geolocation

好的，所以我正在为我的网站使用 Google Maps API，并且正在使用“设置当前位置”功能。

它适用于某些用户，但对于其他用户，它默认为“错误”位置。

**示例 1** 我在利物浦的学生宿舍中请朋友测试该站点。当他允许当前位置时，它会将他的位置设置为他在斯塔福德的家，这是非常遥远的。

**示例 2** 在使用大学计算机时，我测试了网站并允许使用当前位置功能。这一次，它将位置设置为大学服务器所在的建筑物，而不是计算机的位置（在利物浦的另一边！）

我对IP地理定位知之甚少，所以想不出解决方案，也找不到任何类似的stackoverflow问题。有没有办法以更准确的方式设置位置？也许我可以使用邮政编码设置位置？

任何帮助，将不胜感激。

特里斯坦

编辑：这是我在初始化函数中设置位置的代码

```
if(navigator.geolocation) {

         navigator.geolocation.getCurrentPosition(currentPositionCallback);

        } else {

        alert('The browser does not support geolocation');

        }

    function currentPositionCallback(position) {

         // Create a new latlng based on the latitude and longitude from the users position
         var user_lat_long = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

         // Add a marker using the user_lat_long position
         var userpos = new google.maps.Marker({
         position: user_lat_long,
          icon: new google.maps.MarkerImage("img/icons/icon_home.png", new google.maps.Size(32, 34)),
         map: map
         });

         // Set the center of the map to the users position and zomm into a more detailed level
         map.setCenter(user_lat_long);
         map.setZoom(15);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:37:01.130

问题是地理定位有点像一门黑暗的艺术。API 使用多种技术来确定它的位置。

*   最可靠的是机器是否有 GPS。这可以将您缩小到最近的十米左右。
*   接下来，手机可以通过报告该地区的基站和信号强度来完成一些工作。这可以用来将您三角测量到一百米左右。
*   另一种方法是查看 IP 地址。这些可以映射到一个地理位置，但它往往非常非常不准确。仅当您的机器没有其他地理定位方法时才会使用此技术。这或许可以解释大学计算机的跨城镇效应。
*   最后一种方法（我认为这对你的朋友有用）是查看该地区的 WiFi 网络。你还记得几年前谷歌因为从人们的 WiFi 中窃取数据而陷入困境吗？好吧，他们首先查看 WiFi 的原因是为了获取 WiFi 路由器的地图。他们知道该国每个 WiFi 路由器的名称和位置（嗯，几乎所有路由器）。浏览器提供了它可以看到的信号列表，谷歌可以非常准确地计算出你的位置。

如果您使用的是标准笔记本电脑，那么唯一可以使用的方法就是最后一种。如果 Google 的数据库是最新的，这很好用。

不幸的是，它可能不准确。人们总是在设置新的路由器、升级、更改 WiFi 详细信息、搬家并随身携带路由器，甚至只是打开或关闭它们。

如果在您的 PC 周围检测到的信号与 Google 认为在您所在位置的信号不匹配，则可能会出现奇怪的结果。我的猜测是你的朋友从家里带了一个路由器到他的学生宿舍？谷歌可能认为该路由器来自斯塔福德，并且不识别该地区的任何其他路由器（因为自上次扫描以来所有学生都发生了变化），因此它猜测它一定在斯塔福德。

When it works, this technique is frighteningly accurate, but when it doesn't, the results can be comically inaccurate. Short of installing a GPS beacon in your laptop, or persuading everyone in your neighbourhood never to change their routers, there's not much you can do about it one way of the other.

# linux - 轮询系统调用超时

> ID：13018981
> 
> 赞同：13
> 
> 时间：2012-10-22T20:06:35.843
> 
> 标签：linux, system-calls, strace

附件`strace`显示了很多这样的消息：

```
poll([{fd=5, events=POLLIN}, {fd=6, events=POLLIN}, {fd=7, events=POLLIN}, {fd=8, events=POLLIN}, {fd=9, events=POLLIN}, {fd=10, events=POLLIN}], 6, 0) = 0 (Timeout)

poll([{fd=5, events=POLLIN}, {fd=6, events=POLLIN}, {fd=7, events=POLLIN}, {fd=8, events=POLLIN}, {fd=9, events=POLLIN}, {fd=10, events=POLLIN}], 6, 0) = 0 (Timeout)

poll([{fd=5, events=POLLIN}, {fd=6, events=POLLIN}, {fd=7, events=POLLIN}, {fd=8, events=POLLIN}, {fd=9, events=POLLIN}, {fd=10, events=POLLIN}], 6, 0) = 0 (Timeout)

poll([{fd=5, events=POLLIN}, {fd=6, events=POLLIN}, {fd=7, events=POLLIN}, {fd=8, events=POLLIN}, {fd=9, events=POLLIN}, {fd=10, events=POLLIN}], 6, 0) = 0 (Timeout) 
```

如何找到程序试图访问导致`poll`系统调用超时的文件？

`strace`生成大量消息，使其难以调试

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-22T20:59:56.577

> 如何找到程序试图访问导致轮询系统调用超时的文件？

调用：

```
lsof -p <pid> 
```

并查看有问题的文件描述符指的是什么。

您还可以查看`proc`Linux 上的文件系统：

```
ls -l /proc/<pid>/fd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-17T15:25:47.007

ls -l /proc//fd/ -> 你会得到对应的节点ID。ss -p | grep -> 您将获得 fd 所属的套接字文件路径。

# apache - 如何让 Mahout 推荐器工作得更快？

> ID：13018982
> 
> 赞同：2
> 
> 时间：2012-10-22T20:06:35.397
> 
> 标签：apache, hadoop, mahout

嗨，SO 的 Mahout 社区！

我有几个关于加快推荐计算的问题。在我的服务器上，我安装了没有 Hadoop 的 Mahout。jRuby 也用于推荐脚本。在数据库中，我有 3k 个用户和 100k 个项目（连接表中有 270k 个项目）。因此，当用户请求推荐时，简单的脚本开始工作：

首先，它使用`PGPoolingDataSource`如下方式建立数据库连接：

```
 connection = org.postgresql.ds.PGPoolingDataSource.new()
  connection.setDataSourceName("db_name");
  connection.setServerName("localhost")
  connection.setPortNumber(5432)
  connection.setDatabaseName("db_name")
  connection.setUser("mahout")
  connection.setPassword("password")
  connection.setMaxConnections(100)
  connection 
```

我收到这个警告：

```
WARNING: You are not using ConnectionPoolDataSource. Make sure your DataSource pools connections to the database itself, or database performance will be severely reduced. 
```

**任何想法如何解决这个问题？**

之后我创建建议：

```
model = PostgreSQLJDBCDataModel.new(
    connection,
    'stars',
    'user_id',
    'repo_id',
    'preference',
    'created_at'
  )

  similarity = TanimotoCoefficientSimilarity.new(model)
  neighborhood = NearestNUserNeighborhood.new(5, similarity, model)
  recommender = GenericBooleanPrefUserBasedRecommender.new(model, neighborhood, similarity)
  recommendations = recommender.recommend user_id, 30 
```

目前，为一位用户生成推荐大约需要 5-10 秒。问题是**如何更快地提出建议（200ms 会很好）？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T22:15:34.210

如果您知道您正在使用池数据源，则可以忽略该警告。这意味着该实现没有实现用于池实现的常用接口，`ConnectionPoolDataSource`.

如果尝试直接从数据库运行，您将永远无法快速运行。有太多的数据访问。将其包裹`JDBCDataModel`起来`ReloadFromJDBCDataModel`，它将被缓存在内存中，这应该可以快 100 倍。

# c# - SSIS 脚本：使用 CRM 4.0 (SDK) Web 参考关联 2 条记录（一对多关系）

> ID：13018986
> 
> 赞同：0
> 
> 时间：2012-10-22T20:06:54.830
> 
> 标签：c#, dynamics-crm, ssis

如何以一对多关系在 SSIS 中使用 C sharp 脚本链接 2 条记录？

有一些很好的信息可以使用 CRM 2011 和 EntityReference 或关系类来做到这一点。不幸的是，我不能使用这些类，因为我在 SSIS 2008 中这样做。

也许这可以通过 Lookup 或 Moniker 来完成，但需要注意细节。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:55:38.653

如果您能够使用 Crm 4 中的[Lookup](http://msdn.microsoft.com/en-us/library/bb957132.aspx)类，则很容易为 1 到 Many 建立关系，就像真正设置任何其他属性一样。

要从 Crm 获取另一条记录的 guid，您需要发出[带有 QueryExpression 的 RetrieveMultiple](http://msdn.microsoft.com/en-us/library/bb929002.aspx)。

例如：

```
//Build the QueryExpression, the condition should give us a single record
QueryExpression query = new QueryExpression("contact");
query.Criteria = new FilterExpression();
query.Criteria.AddCondition(new ConditionExpression("someidfield", ConditionOperator.Equal, "ABC123");

BusinessEntityCollection entities = service.RetrieveMultiple(query);

//In theory we could get multiple records here, but we will assume we only get the one
DynamicEntity contact = (DynamicEntity)entities.BusinessEntities.First();
Guid existingContactId = (Guid)contact["contactid"];

Lookup lookupToExisitingContact = new Lookup();
lookupToExisitingContact.Value = existingContactId;
lookupToExisitingContact.type = "contact";

DynamicEntity newContact = new DynamicEntity("contact");
newContact["firstname"] = "James";
newContact["parentcontactid"] = lookupToExisitingContact;

service.Create(newContact); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T16:29:13.917

我同时使用企业 ID 和 guid。见下文。它仍然需要一些工作，但我觉得我正朝着正确的方向前进。

首先合并加入和拆分检查订单是否已存在于 CRM 中。就我而言，如果确实如此，我不想采取任何行动。第二个 Merge Join 1 实际上什么都不做，只是使用业务密钥获取联系人的 GUID。

![在此处输入图像描述](../Images/06366f96bbdbc345f8786e03357f5595.png)

# eclipse - EGit 没有推送，说它已经是最新的了

> ID：13018992
> 
> 赞同：2
> 
> 时间：2012-10-22T20:07:23.947
> 
> 标签：eclipse, git, github, egit

我第一次尝试在 Eclipse 中使用 git，但我被卡住了。全新的项目，只有一个分支。我最初推送到 github，效果很好。比我更改了一些东西，在我的本地 git 中提交了更改（显示在历史记录中），但是在尝试推送时，它说一切都是最新的。

我不知道该怎么办...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:57:45.757

发现了什么问题。出于某种原因，EGit 弄乱了目录，并使数据不在正确的项目目录中

# css - CSS：使用浮动 div 垂直对齐图标旁边的文本

> ID：13018996
> 
> 赞同：2
> 
> 时间：2012-10-22T20:07:38.137
> 
> 标签：css, image, css-float, vertical-alignment

我正在尝试将文本与图标/图像对齐，我希望文本或图像垂直对齐，但未应用垂直对齐，它可能与浮动有关

这是一张解释我想要做什么的图片： ![在此处输入图像描述](../Images/d49ec9a0b8483988f1784a0c7fc42cba.png)

这是我到目前为止所拥有的：

---- HTML ---

```
<ul class="toolboxItems">
    <li>
        <div class="image">
             <img src="someImage.png">
        </div>

        <div class="label">
           <label>Lorem ipsum dolor sit amet....</label>
        </div>
    <li>

    <li>
        /* more of the same .... */
    </li>
<ul> 
```

---- CSS ----

```
ul.toolboxItems li {margin-bottom:10px;}
.image {float:left; width:30px;}
.label {float:left; width:150px; vertical-align:middle;} 
```

我尝试使用 display:table / table-cell 但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:25:03.080

[您可以使用所有东西都支持](http://caniuse.com/#feat=css-table)的 CSS 表格显示属性（除了 IE 7 或更低版本）。

在这里工作演示：http: [//jsfiddle.net/Hgssm/1/](http://jsfiddle.net/Hgssm/1/)

```
.toolboxItems {
  display: table;
}

.toolboxItems li {
  display: table-row;
}

.toolboxItems .image,
.toolboxItems .label {
  display: table-cell;
  width: 30px;
  vertical-align: middle;
}

.toolboxItems .label {
  width: 150px;
} 
```

# django - 如何将多个模型放在同一页面上？

> ID：13018999
> 
> 赞同：0
> 
> 时间：2012-10-22T20:07:53.410
> 
> 标签：django, django-models, django-templates

> 我正在做一个 html 和 base 的网站（所有页面都在其中扩展）我想放置一个社交网络图标会话。由于此会话基于 html，因此它应显示在网站的所有页面上。
> 
> 我不想把这个会话放在静态 html 中，我想在 django 中使用模型。这已经完成了。

**问题**：我是否必须将社交网络图标会话放在每个视图上，或者我可以制作一个单独的视图并让所有其他人扩展这个视图？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:42:08.140

尝试使用[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)。您可以创建一个函数来完成创建会话的所有工作，然后将其与特定的 HTML 块相关联。

**模板标签/session.py**

```
@register.inclusion_tag('includes/session_box.html')
def output_session_box(...):
    ...
    return { .. } 
```

关联的模板文件**includes/session_box.html**将像任何模板一样具有 HTML。

然后你的**base.html**会有：

```
{% load session %}
{%  output_session_box ... %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:41:53.277

使用`RequestContext`和 a`context_processor`将模板变量注入使用`RequestContext`.

它就像一个接受 arg 的 python 函数一样简单`request`，并返回一个字典以传递给你的模板。

[https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext)

```
def my_processor(request):
    return {'foo': 'bar'}

TEMPLATE_CONTEXT_PROCESSORS = (
     # add path to your context processor here.
) 
```

我通常有一个用于基础知识的每个项目处理器......这正是 django 添加`{{ user }}`或添加`{{ STATIC_URL }}`到每个模板的方式。