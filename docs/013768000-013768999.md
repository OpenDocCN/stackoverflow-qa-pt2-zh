# StackOverflow 问答 13768000-13768999

# webdriver - 使用 Web 驱动程序运行 IE 时 URl 未通过

> ID：13768002
> 
> 赞同：1
> 
> 时间：2012-12-07T17:24:47.223
> 
> 标签：webdriver

我正在尝试在 IE 中使用 Web 驱动程序运行我的脚本。它正在启动浏览器但不传递 URL。打开浏览器时，它会给出一条消息“这是 WebDriver 服务器的初始起始页”。我正在使用 IE 9。有人知道这里发生了什么吗？

```
driver = new driver InternetExplorerDriver();
driver.manage().window().implicitlyWait(30, TimeUnit, SECONDS);
driver.navigate().to("URL") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:20:22.090

[这是我的做法，](https://github.com/djangofan/WebDriverTestingTemplate)但我不使用 Selenium RC ......相反，我使用没有 Selenium 服务器的“纯”网络驱动程序：

```
public static void initializeBrowser( String type ) {
    if ( type.equalsIgnoreCase( "firefox" ) ) {
        driver = new FirefoxDriver();
    } else if ( type.equalsIgnoreCase( "ie" ) ) {
        driver = new InternetExplorerDriver();
    }
    driver.manage().timeouts().implicitlyWait( 10000, TimeUnit.MILLISECONDS );
    driver.manage().window().setPosition(new Point(200, 10));
    driver.manage().window().setSize(new Dimension(1200, 800));
} 
```

我这样称呼它：

```
@Test
public void testWithPageObject() {      
    driver.get("http://www.google.com");
    GoogleSearchPage gs = new GoogleSearchPage();
    gs.setSearchString( searchString );
    selectInGoogleDropdown( ddMatch );  
    gs.clickSearchButton();
    waitTimer(3, 1000);
    clickElementWithJSE( "gbqlt" ); //click Google logo
    System.out.println("Done with test.");
} 
```

关于此方法，您会注意到的一件事是，您调用转到 URL 的方法与使用 Selenium RC 服务器时不同。请参阅链接（上方）以查看我的整个源代码。

# java - 在 emacs 中正确处理 Java 的 @Override 缩进

> ID：13768003
> 
> 赞同：5
> 
> 时间：2012-12-07T17:24:49.930
> 
> 标签：java, indentation, emacs23

如果我的 .emacs 为空或仅包含行

```
(require 'cc-mode)
(add-to-list 'c-offsets-alist '(annotation-top-cont .0))

(add-hook 'java-mode-hook
          '(lambda () (c-set-offset 'annotation-top-cont 0))) 
```

然后而不是保护与@Override 对齐

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

protected 出来，而不是相对于 @Override 缩进

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

我应该对我的 .emacs 进行哪些更改，以便缩进成为上面的顶部示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:25:17.133

Look to `annotation-top-cont` style for `c-offsets-alist` definition. To make no identing you need to set it to 0\. More information in [CC-mode manual](https://www.gnu.org/software/emacs/manual/html_node/ccmode/Java-Symbols.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T06:21:31.053

我在 EMACS 邮件列表中找到了这个解决方案：

```
(add-hook 'java-mode-hook
      '(lambda ()
         "Treat Java 1.5 @-style annotations as comments."
         (setq c-comment-start-regexp 
           "\\(@\\|/\\(/\\|[*][*]?\\)\\)")
         (modify-syntax-entry ?@ "< b" 
                  java-mode-syntax-table))) 
```

它将@annotations 视为注释，这将导致它正确缩进。

来源： http: [//lists.gnu.org/archive/html/help-gnu-emacs/2011-04/msg00262.html](http://lists.gnu.org/archive/html/help-gnu-emacs/2011-04/msg00262.html)

# ruby-on-rails - 如何在不安装 gem 的情况下以漂亮的格式输出 Ruby on Rails 控制台数据库结果集？

> ID：13768004
> 
> 赞同：0
> 
> 时间：2012-12-07T17:24:53.820
> 
> 标签：ruby-on-rails

我正在从运行数据库查询中获取数据，`User.first`但由于字段太多，很难读取信息。我尝试使用`pp User.first`，但它并没有让任何东西更容易阅读。RoR 是否有内置的东西，我不必安装可以美化它的 gem？另外，如果可能的话，我不想每次都写一个 each 语句来分解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:28:17.937

如果您不喜欢 pp 的输出，我不确定您还有什么其他选择。如果您可以克服不想要宝石的情况，Hirb 可以很好地做到这一点……

[https://github.com/cldwalker/hirb](https://github.com/cldwalker/hirb)

# python - 烧瓶中的浏览器缓存问题

> ID：13768007
> 
> 赞同：22
> 
> 时间：2012-12-07T17:24:56.630
> 
> 标签：python, caching, flask, browser-cache

我已经使用烧瓶（[www.csppdb.com](http://www.csppdb.com)）建立了一个网站。有时，当我以一个用户身份登录，注销，然后以另一个用户身份登录时，我仍然会看到我登录的第一个用户的页面。此问题在页面刷新时立即修复。如果我没记错的话，我认为这被称为“缓存”。有什么办法可以在站点范围内禁用它，以便访问的每个页面都需要重新刷新？

这就像与朋友共享您的计算机。他登录 Facebook，然后退出。现在你登录他的电脑，你会看到他的个人资料……（尴尬）。刷新页面后问题就解决了。

这是我的一些代码。我正在使用烧瓶登录，但后来我尝试“自己动手”

```
from flask.ext.mysql import MySQL
import os
from flask import Flask, request, jsonify, session, url_for, redirect, \
     render_template, g, flash
from data import *
from werkzeug import check_password_hash, generate_password_hash
import config

app = Flask(__name__)
mysql = MySQL()

app.config['MYSQL_DATABASE_HOST'] = os.environ['MYSQL_DATABASE_HOST'] if 'MYSQL_DATABASE_HOST' in os.environ else config.MYSQL_DATABASE_HOST
app.config['MYSQL_DATABASE_PORT'] = os.environ['MYSQL_DATABASE_PORT'] if 'MYSQL_DATABASE_PORT' in os.environ else config.MYSQL_DATABASE_PORT
app.config['MYSQL_DATABASE_USER'] = os.environ['MYSQL_DATABASE_USER'] if 'MYSQL_DATABASE_USER' in os.environ else config.MYSQL_DATABASE_USER
app.config['MYSQL_DATABASE_PASSWORD'] = os.environ['MYSQL_DATABASE_PASSWORD'] if 'MYSQL_DATABASE_PASSWORD' in os.environ else config.MYSQL_DATABASE_PASSWORD
app.config['MYSQL_DATABASE_DB'] = os.environ['MYSQL_DATABASE_DB'] if 'MYSQL_DATABASE_DB' in os.environ else config.MYSQL_DATABASE_DB

mysql.init_app(app)

if 'SECRET_KEY' in os.environ: app.config['SECRET_KEY'] = os.environ['SECRET_KEY']
else: app.config['SECRET_KEY'] = os.urandom(24)

def connect_db(): return mysql.connect()

def check_auth():
    g.user = None
    if 'username' in session:
        g.user = get_user(session['username'])
        return
    return redirect(url_for('login'))

@app.route('/')
def home(): 
    if 'username' in session: return redirect(url_for('main'))
    return render_template('home.html')

def connect_db(): return mysql.connect()

@app.teardown_request
def teardown_request(exception):
    if exception: print exception
    g.db.close()

@app.before_request
def before_request():
    print session.keys(), session.values()
    print("before request")
    print ('username' in session, "in session?")
    g.db = connect_db()
    g.user = None
    if "username" in session:
        g.user = get_user(session['username'])

@app.route('/login/', methods=['GET', 'POST'])
def login():
    """Logs the user in."""
    if 'username' in session:
        return redirect(url_for('main'))

    error = None
    if request.method == 'POST':
        print("login hit")
        user = get_user(request.form['username'])
        if user is None:
            error = 'Invalid username'
            print error
        elif not check_password_hash(user.password, request.form['password']):
            error = 'Invalid password'
            print error
        else:
            flash('You were logged in')
            print "logged in"
            session['username'] = request.form['username']
            g.user = request.form['username']
            print error, "error"
            return redirect(url_for('main'))

    return render_template('login.html', error=error) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-10T09:28:43.697

将缓存设置为 max-age=0 修复了它。

```
@app.after_request
def add_header(response):
    """
    Add headers to both force latest IE rendering engine or Chrome Frame,
    and also to cache the rendered page for 10 minutes.
    """
    response.headers['X-UA-Compatible'] = 'IE=Edge,chrome=1'
    response.headers['Cache-Control'] = 'public, max-age=0'
    return response 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T17:27:54.503

要在此类页面上停止浏览器缓存，您需要设置一些 HTTP 响应标头。

```
Cache-Control: no-cache, no-store
Pragma: no-cache 
```

执行此操作后，浏览器将不会缓存这些页面。我不知道如何用“烧瓶”来做到这一点，所以我会把它留给你作为练习:)

这个问题展示了如何添加响应标头[Flask/Werkzeug 如何将 HTTP 内容长度标头附加到文件下载](https://stackoverflow.com/questions/3811595/flask-werkzeug-how-to-attach-http-content-length-header-to-file-download)

# ruby - 访问 Google API for Shopping 时凭据无效

> ID：13768010
> 
> 赞同：0
> 
> 时间：2012-12-07T17:25:03.213
> 
> 标签：ruby, google-api, google-api-client, google-shopping-api

我正在尝试使用[google-api-client](http://code.google.com/p/google-api-ruby-client/) gem 访问[Google Search API for Shopping](https://developers.google.com/shopping-search/)。[不幸的是，尽管通过Google APIs Console](https://code.google.com/apis/console/)创建了 access_token ，但我似乎无法进行身份验证。

这是我的代码：

```
client = Google::APIClient.new
client.authorization.access_token = "<MY_CONSOLE_ACCESS_TOKEN>"
client.authorization.scope = "https://www.googleapis.com/auth/shoppingapi"

shopping = client.discovered_api("shopping", "v1")
response = client.execute(api_method: shopping.products.list,
                          parameters: { source: "public" }) 
```

当我查看时`response.data`，我看到一条错误消息：

```
#<Google::APIClient::Schema::Shopping::V1::Products:0x809d6e14 DATA:{"error"=>{"errors"=>[{"domain"=>"global", "reason"=>"authError", "message"=>"Invalid Credentials", "locationType"=>"header", "location"=>"Authorization"}], "code"=>401, "message"=>"Invalid Credentials"}}> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:33:37.503

当然，我在发布后几分钟就知道了。我将分享对其他有相同问题的人有用的方法。

```
client = Google::APIClient.new(authorization: nil)
shopping = client.discovered_api("shopping", "v1")
response = client.execute(key: "<MY_ACCESS_TOKEN>",
                          api_method: shopping.products.list,
                          parameters: { source: "public", country: "US" }) 
```

# python - 在函数内显示 PyQt 主窗口

> ID：13768012
> 
> 赞同：1
> 
> 时间：2012-12-07T17:25:15.150
> 
> 标签：python, qt, pyqt, pyqt4

我正在尝试将 python 脚本编写到 matplotlib 之类的应用程序中。我需要一个函数调用来显示 Qt 主窗口。我该怎么做呢？

```
class MainWindow(QtGui.QMainWindow):
    def __init__(self,parent=None):
       super(MainWindow, self).__init__(parent)
       self.setupUi(self)
       self.numbers = 4
       ...

app = QtGui.QApplication(sys.argv)
dmw = DesignerMainWindow()
dmw.show()
sys.exit(app.exec_()) #this works, but pops the window right away 
```

我希望能够在我希望的时候调用窗口。（像这样的东西）

```
def newWin():
    app = QtGui.QApplication(sys.argv)
    dwm = MainWindow()
    sys.exit(app.exec_())
    return dwn

a = newWin()    # application is created now
a.numbers = 10  # do something
a.show()        # should pop me the window now 
```

**编辑：**感谢 jadkik94粘贴解决方案

```
class App(QtGui.QApplication):
    def __init__(self, args):
        QtGui.QApplication.__init__(self,args)
        self.window = MainWindow()

    def doSomething(self, ii):
        self.window.numbers = ii

    def show(self):
        self.window.show()
        sys.exit(self.exec_())
a = App(sys.argv)
a.doSomething(12) #updates numbers alternately a.window.numbers = 12
a.show()          #pops the window! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:04:34.017

在函数内部使用时，窗口不显示。问题很简单：窗口被垃圾回收，因为它是在函数范围内定义的，然后不再使用，因此 Python 将其视为“垃圾”并删除该对象。

我发现避免这种情况的最佳方法是拥有一个应用程序类，该类将包含对您要显示的所有窗口的引用。因此，您可以让常规课程为您执行此操作，或者`QtGui.QApplication`如果您也可以使用它，则将其子类化。我会选择第二种选择。

如果你真的不想使用一个类，另一种选择是将它设置为一个全局变量，这通常会阻止它被 Python 垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:50:45.067

这是你想要的吗：

```
import sys
from PyQt4 import QtGui

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):

        self.setGeometry(300, 300, 250, 150)
        self.setWindowTitle('Icon')        
        self.show()

def main():    
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

a = main()
a.show() 
```

# vba - 使用 ConversationID 在 Outlook 中显示电子邮件

> ID：13768016
> 
> 赞同：2
> 
> 时间：2012-12-07T17:25:44.530
> 
> 标签：vba, outlook

使用 Outlook VBA 脚本，是否可以根据从 Mailitem 类获取的唯一标识符显示电子邮件？

即，我遍历一个文件夹并使用 SenderName、Subject、SentOn 和 ConversationID 填充一个列表框。

```
For i = oFolder.Items.Count To 1 Step -1
    Me.ListBox1.AddItem oFolder.Items.Item(i).ConversationID
Next i 
```

列表框在用户表单中，我希望能够根据 ConversationID 显示电子邮件。我不确定如何实际执行此操作，但也许是这样的：

```
Dim Msg As Outlook.MailItem
Set Msg = oFolder.GetObjectFromConversationID(Me.ListBox1.Value).Display
Msg.Display 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T18:01:33.073

我基于此找到了答案：[https ://stackoverflow.com/a/7439554/757856](https://stackoverflow.com/a/7439554/757856)

基本上，你必须使用`MailItem.EntryID`，而不是`ConversationID`

我使用了与上面链接中相同的代码，但我使用了后期绑定而不是早期绑定。以下代码将打开一封 Outlook 电子邮件，给出`EntryID`：

```
Dim oNamespace As Object
Dim Msg As Object
Set oNamespace = oOlApp.GetNamespace("MAPI")
Set Msg = oNamespace.GetItemFromID(EntryID)
Msg.Display 
```

# soundcloud - SC.get 可以从两个特定用户那里获得返回曲目吗？

> ID：13768018
> 
> 赞同：0
> 
> 时间：2012-12-07T17:25:58.663
> 
> 标签：soundcloud

我想在 SoundCloud 的 SC.get('/tracks') 函数中指定两个用户 ID。这可能吗？

像这样的东西：

```
function getTracks() {
    SC.get('/tracks', {
        user_ids: {user_id: 00001, user_id: 000002}
    }, function(tracks) {
        // build a list of tracks from the two soundcloud users
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:48:25.120

无法过滤用户的 /tracks 端点。对不起！

您可以做的最接近的事情是分别为每个用户获取曲目：

```
SC.get('/users/<user_id>/tracks', function(tracks) {
   ...
}); 
```

因此，您可以对 SC.get() 进行两次调用并组合结果。

# java - 如何在 Maven 构建期间执行 JSFUnit 测试

> ID：13768021
> 
> 赞同：0
> 
> 时间：2012-12-07T17:26:10.763
> 
> 标签：java, jsf, maven, junit, jsfunit

我想在应用程序的 Maven 构建过程中执行 JSFUnit 测试。我如何配置 Maven 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:09:19.767

[http://maven.apache.org/surefire/maven-surefire-plugin/](http://maven.apache.org/surefire/maven-surefire-plugin/)

这个插件可以解决问题。

示例 pom：

[如何让我的 Maven 集成测试运行](https://stackoverflow.com/questions/1399240/how-do-i-get-my-maven-integration-tests-to-run)

# java - 尝试 Java 乒乓球

> ID：13768027
> 
> 赞同：0
> 
> 时间：2012-12-07T17:26:21.827
> 
> 标签：java, swing, awt, keypress, paintcomponent

我正在尝试做一个 Java Pong 游戏。我对 Java 的经验很少，需要一些帮助。我在网上阅读了很多东西，下面是我想出的代码。我创建了以下类，但我得到的只是一个灰屏。我只是想为此实施最简单的解决方案。谁能指出此代码存在的任何问题？谢谢你。

```
 package pong_test_1;

    import javax.swing.*;
    import java.awt.*;
    import java.awt.event.KeyEvent;
    import java.awt.event.KeyListener;

    /**
     *
     * @author jtrinidad
     */

    public class main_class extends JFrame implements KeyListener{
        static final int FRAME_WIDTH = 800;
        static final int FRAME_HEIGHT = 500;
        JFrame f;

        public main_class()
        {
            super();
            addKeyListener (this);
            setFocusable (true);

            f = new JFrame("Pong");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            f.setResizable(false);

            f.setSize(FRAME_WIDTH,FRAME_HEIGHT);
            f.setVisible(true);

        }

        @Override
         public void keyTyped(KeyEvent e) {
        }
        @Override
        public void keyPressed(KeyEvent e) {
            Pong_Test_1 p = new Pong_Test_1();
            int keyCode = e.getKeyCode();
            switch( keyCode ) { 
                case KeyEvent.VK_UP:
                    Pong_Test_1.p2_pos_y--; 
                    break;
                case KeyEvent.VK_DOWN:
                    Pong_Test_1.p2_pos_y++; 
                    break;
                case KeyEvent.VK_Q:
                    Pong_Test_1.p1_pos_y++; 
                    break;
                case KeyEvent.VK_A :
                    Pong_Test_1.p1_pos_y++; 
                    break;
            }
            add(p);
            repaint();
        }

        /** Handle the key released event from the text field. */
         @Override
        public void keyReleased(KeyEvent e) {

        }

         public static void main(String[] args) {
            // TODO code application logic here
             main_class c = new main_class();
        }

    } 
```

和

```
 /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package pong_test_1;

    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;

    /**
     *
     * @author jtrinidad
     */
    public class Pong_Test_1 extends JPanel implements ActionListener{

        /**
         * @param args the command line arguments
         */
        //Sizes of each object
        static final int WIDTH = 10;
        static final int HEIGHT = 120;
        static final int RADIUS = 10;
        //Position of Player 1's paddle
        static int p1_pos_x = 10;
        static int p1_pos_y = main_class.FRAME_HEIGHT/2;
        //Position of Player 2's paddle
        static int p2_pos_x = main_class.FRAME_WIDTH - 20;
        static int p2_pos_y = main_class.FRAME_HEIGHT/2;;
        //Position of the ball
        static int ball_pos_x;
        static int ball_pos_y;

        Timer animator;

        public Pong_Test_1()
        {
            animator = new Timer (10, this);
            animator.start();
        }

        public void paintComponent(Graphics g){
            super.paintComponent(g);
            this.setBackground(Color.BLACK); //Sets background color

            g.setColor(Color.WHITE);
            g.fillRect(p1_pos_x, p1_pos_y, WIDTH, HEIGHT);
            g.fillRect(p2_pos_x, p2_pos_y, WIDTH, HEIGHT);
            g.fillOval(100, 100, RADIUS, RADIUS);
        }

        public void actionPerformed( ActionEvent e ) {
            repaint();
            revalidate();  // new line
        }

        private void addKeyListener(Pong_Test_1 aThis) {
            throw new UnsupportedOperationException("Not yet implemented");
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:44:40.550

看看这个[SSCCE](http://sscce.org/)是否更符合您的期望，主要问题是扩展和拥有一个`JFrame`.

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class main_class implements KeyListener {

    static final int FRAME_WIDTH = 800;
    static final int FRAME_HEIGHT = 500;
    JFrame f;

    public main_class() {
        f = new JFrame("Pong");

        JPanel gui = new JPanel();
        gui.setFocusable(true);
        gui.addKeyListener(this);
        f.setContentPane(gui);

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        f.setResizable(false);

        f.setSize(FRAME_WIDTH, FRAME_HEIGHT);
        f.setVisible(true);
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
        // this will steal the focus for KeyEvents, or rather..
        // Pong_Test_1 p = new Pong_Test_1();
        int keyCode = e.getKeyCode();
        System.out.println(e);
        switch (keyCode) {
            case KeyEvent.VK_UP:
                Pong_Test_1.p2_pos_y--;
                break;
            case KeyEvent.VK_DOWN:
                Pong_Test_1.p2_pos_y++;
                break;
            case KeyEvent.VK_Q:
                Pong_Test_1.p1_pos_y++;
                break;
            case KeyEvent.VK_A:
                Pong_Test_1.p1_pos_y++;
                break;
        }
        // ..adding it will steal the content area & focus
        //add(p);
        f.repaint();
    }

    /**
     * Handle the key released event from the text field.
     */
    @Override
    public void keyReleased(KeyEvent e) {
    }

    public static void main(String[] args) {
        // TODO code application logic here
        main_class c = new main_class();
    }
} 
```

作为一般建议：

*   不要扩展框架，只需保留对一个的引用。
*   对于 Swing，使用键绑定而不是`KeyListener`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:43:35.877

1.  不要命名你的 Class `main_class`，使用`MainClass`or`PongWindow`代替 -> [Java JLS](http://docs.oracle.com/javase/specs/jls/se7/html/index.html "Java JLS")
2.  你的`main_class extends JFrame`，所以这应该是要实例化的 JFrame，不要在你的构造函数中创建一个新的。
3.  为您的字段创建 getter 和 setter `Pong_Test_1`。
4.  阅读更多关于 OOP 和 Java 的教程。

* * *

```
private final Pong_Test_1 myPong;    

public PongWindow() {
  super();
  this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  this.addKeyListener(this);
  this.setFocusable(true);
  this.setResizable(false);
  this.setSize(FRAME_WIDTH,FRAME_HEIGHT);

  myPong = new Pong_Test_1();
  this.getContentPane().add(myPong);

  this.setVisible(true);
} 
```

并在您的`keyPressed()`方法中使用您的实例进行操作。

```
myPong.p2_pos_y--; 
```

# vb.net - 在 SQL 备份期间保持 GUI 响应

> ID：13768032
> 
> 赞同：0
> 
> 时间：2012-12-07T17:26:31.827
> 
> 标签：vb.net, tsql, asynchronous, database-backups

VB.NET 2.0：

我正在从 VB.NET 应用程序向 SQL 服务器发出备份命令。我正在捕获它发出的消息并将它们附加到多行文本框中。

不过，我想做的是让应用程序继续响应 GUI 控制事件（主要是为了让用户可以调整输出窗口的大小或取消备份）。所以我`BeginExecuteReader`在一个循环中使用和旋转`Application.DoEvents()`. 但似乎一旦备份开始发出它的打印语句，我得到`IAsyncResult.IsCompleted = True`它并下降到`EndExecuteReader`，并且 GUI 现在再次被锁定。我怎样才能让它留在循环中，直到备份命令完成，但仍然得到那些输出语句并保持 GUI 响应？谢谢。

这是我的代码：

```
' Enable retrieve print statements from the server'
AddHandler oConn.InfoMessage, AddressOf LogToBufferHandler

strSQL &= vbNewLine & "begin try"
strSQL &= vbNewLine & " declare @BackupName as varchar(255)"
strSQL &= vbNewLine & " declare @BackupDesc as varchar(255)"
strSQL &= vbNewLine & " declare @backupTime as varchar(50)"
strSQL &= vbNewLine & " set @backupTime = (select convert(datetime, getdate(), 100))"
strSQL &= vbNewLine & " set @BackupName = (SELECT '[' + db_name() + '] Full Backup')"
strSQL &= vbNewLine & " set @BackupDesc = (SELECT 'Automated full backup of [' + db_name() + '] on ' + @backupTime + '.')"
strSQL &= vbNewLine & " "
strSQL &= vbNewLine & " BACKUP DATABASE [#Database#]"
strSQL &= vbNewLine & " TO DISK = @BackupFullPath"
strSQL &= vbNewLine & " WITH stats,"
strSQL &= vbNewLine & "      NAME = @BackupName,"
strSQL &= vbNewLine & "      DESCRIPTION = @BackupDesc;"
strSQL &= vbNewLine & " select [IsSuccessful] = 1"
strSQL &= vbNewLine & " end try"
strSQL &= vbNewLine & " begin catch"
strSQL &= vbNewLine & " SELECT [IsSuccessful] = 0"
strSQL &= vbNewLine & " end catch"

'Workaround: Backup Database requires the name of the object, not a string'
'            and I dont want to use dynamic SQL.'
strSQL = strSQL.Replace("#Database#", sb.InitialCatalog)

oConn.Open()
oCmd = New SqlCommand()
oCmd.Connection = oConn
oCmd.CommandText = strSQL
oCmd.CommandType = CommandType.Text
oCmd.Parameters.AddWithValue("@BackupFullPath", backupFullPath)
oCmd.CommandTimeout = 60 * 5

'Spin until complete, cancel, or timeout'
Dim result As IAsyncResult = oCmd.BeginExecuteReader(CommandBehavior.CloseConnection)
While Not result.IsCompleted
    Application.DoEvents()
    If blnCancel Then
        oCmd.Cancel()
    End If
    System.Threading.Thread.Sleep(50)
End While
Try
    oDataReader = oCmd.EndExecuteReader(result)
    oDataTable.Load(oDataReader)

    'Get results'
    ' (unfourtunately, you cannot do BeginExecuteScalar ASync in .Net 2.0,'
    ' so we are using a DataTable first column, row)'
    If oDataTable IsNot Nothing _
    AndAlso oDataTable.Rows.Count > 0 _
    AndAlso oDataTable.Columns.Contains("IsSuccessful") _
    AndAlso oDataTable.Rows(0).Item("IsSuccessful") = 1 Then
        eBackupResult = BackupStatus.Succeeded
        returnPath = backupFullPath 'Only set return path if the backup succeeded'
    Else
        eBackupResult = BackupStatus.Failed
    End If
Catch ex As Exception
    If Not ex.Message.Contains("cancelled by user") Then Throw ex
    eBackupResult = BackupStatus.Canceled
End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:08:07.800

`DoEvents`出于多种原因，轮询循环 ( ) 被认为是邪恶的。这可能是您切换到`BackgroundWorker`并放弃讨厌的 Begin-poll-End 方案的最简单方法。

如果你想保留它，这里有一个错误：接受阅读器可能很快，但这并不意味着所有结果都已经到达（让我说明一下：如果你查询了 1TB 的数据怎么办？ - 阅读是一个漫长的过程）。您也需要以`Read`异步（轮询）方式。现在事情已经失控了。就放弃吧。

换句话说，`oDataTable.Load`是难以修复的阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:54:49.027

BackGroundWorker 和 ReportProgress

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:31:44.367

您可以为此使用任务。任务在概念上类似于线程。通过将代码放入任务中，主线程可以继续运行（这是接受用户输入并响应调整大小命令的线程）。

这是一篇更多地讨论任务并有一个 VB.NET 示例的文章。

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=491](http://www.dotnetcurry.com/ShowArticle.aspx?ID=491)

玩得开心！

# php - PHP 降低所有图像类型的质量

> ID：13768034
> 
> 赞同：5
> 
> 时间：2012-12-07T17:26:38.237
> 
> 标签：php, image, compression, image-compression

我正在寻找一个可以降低所有图像类型质量（PNG、GIF 和 JPEG）的库。
我知道我可以使用 JPEG 来减少`imagejpeg()`
我也知道我可以使用 PNG 来减少，`imagepng()`尽管这还不够强大。

我需要一些可以在不删除 alpha 的情况下将 PNG 24 转换为 PNG8 的东西。

无法使用 ImageMagick，因为我无法在我的服务器上安装任何东西。

编辑：
我还需要可以从 32 位转换为 8 位的东西（我很确定与 32 位相同）

**[在这里](https://stackoverflow.com/questions/5752514/how-to-convert-png-to-8-bit-png-using-php-gd-library)找到灵魂**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:49:14.403

要将任何 PNG 图像转换为 8 位 PNG，请使用此函数，我刚刚创建

```
function convertPNGto8bitPNG()

  function convertPNGto8bitPNG($sourcePath, $destPath) {
    $srcimage = imagecreatefrompng($sourcePath);
    list($width, $height) = getimagesize($sourcePath);
    $img = imagecreatetruecolor($width, $height);
    $bga = imagecolorallocatealpha($img, 0, 0, 0, 127);
    imagecolortransparent($img, $bga);
    imagefill($img, 0, 0, $bga);
    imagecopy($img, $srcimage, 0, 0, 0, 0, $width, $height);
    imagetruecolortopalette($img, false, 255);
    imagesavealpha($img, true);
    imagepng($img, $destPath);
    imagedestroy($img);
    } 
```

参数

$sourcePath - 源 PNG 文件的路径 $destPath - 目标 PNG 文件的路径

```
convertPNGto8bitPNG('pfc.png', 'pfc8bit.png'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T22:16:47.790

我知道您不想要 GD 库，但使用以下代码：

```
$img = imagecreatefrompng($src);
imagesavealpha($img, true);
imagepng($img, $dst, 9, PNG_ALL_FILTERS);
imagedestroy($img); 
```

优化后的图片比原始尺寸小了约 40%，并且没有去除 alpha。

您正在寻找多少百分比的优化？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T21:25:37.263

请试试这个，这是你要找的结果吗？

```
<?php
$size = getimagesize("original.png");
$source = imagecreatefrompng("original.png");
$target = imagecreate($size[0], $size[1]);
imagecopy($target, $source, 0, 0, 0, 0, $size[0], $size[1]);
imagepng($target,"copy.png"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-15T21:45:00.433

根据我使用 PHP 的经验，我在图像处理（使用 GD，标准库）方面总是遇到一些困难。
我相信没有任何 PHP 扩展是没有说明的。我建议您使用一些有助于工作的扩展，例如：[ImageMagick](http://php.net/manual/en/book.imagick.php)

安装扩展后，尝试以下操作：

```
# Load your image
$im = new Imagick('your-png32-image.png'); 
# Set quality/colors
$im->setImageFormat('PNG8');
$colors = min(255, $im->getImageColors());
$im->quantizeImage($colors, Imagick::COLORSPACE_RGB, 0, false, false);
# 8bits
$im->setImageDepth(8);
# Save image
$im->writeImage('your-png8-image.png'); 
```

# linux - 移动 svn 存储库

> ID：13768037
> 
> 赞同：0
> 
> 时间：2012-12-07T17:26:46.783
> 
> 标签：linux, svn

我的 vServer 上有多个 svn 存储库：

```
/development
  |...../kooki
          |_...../svn
                   |_...../repo1
                   |_...../repo2
                   |_...../repo3 
```

现在我只想将位置更改为另一个文件夹，例如：

```
/development
  |...../a_new_folder
          |_...../svn
                   |_...../repo1
                   |_...../repo2
                   |_...../repo3 
```

你看，旧的结构是一样的。我可以简单地使用

```
cp -R /development/kooki /development/a_new_folder 
```

还是需要svndump？

谢谢古奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:21:21.143

是的你可以。但是在任何情况下，您都必须更改服务器的配置（如果使用 svn:// 的 http:// 访问）并在服务器的配置中反映移动的根（`-root`对于 svnserver，`SVNParentPath`对于 Apache）

# ios - UIEventSubtype 缺少元素

> ID：13768044
> 
> 赞同：1
> 
> 时间：2012-12-07T17:27:11.973
> 
> 标签：ios, jailbreak, iphone-privateapi, external-accessory, uievent

枚举 UIEventSubtype（iOS UIKit 框架）包含诸如播放、暂停、下一步、查找等事件。然而，iPod Access 协议包含许多其他事件，例如选择、向上、向下和返回（想想带有点击轮的 iPod）。iOS 上的 iPod 应用程序可以接收这些其他事件并做出相应的响应（在播放列表中向上/向下/向后移动选择），但开发人员应用程序似乎无法访问这些控件。

`/dev/tty.iap`除了自己打开端口（或向 Apple 提交错误报告并等待）之外，有谁知道在 iOS 应用程序（用于越狱）中接收这些额外事件的方法？也许有一个私有框架有我正在寻找的东西？我查看了 IAP 框架，但没有看到任何有趣的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-06T19:48:24.997

@Victor Ronin 有正确的想法，在私有框架中，`iPodUI`我找到了一个`IUAccessoryEventHandler`包含类似方法的类

```
- (void)handleDownArrowEvent; 
- (void)handleUpArrowEvent
- (void)handleSelectEvent 
```

当我通过 Theos 调整连接到它们并插入日志详细信息时，我能够看到这些方法是在外部设备发送命令时被调用的方法。

更新：不幸的是，根据[iPhone Wiki](https://www.theiphonewiki.com/wiki/System/Library/PrivateFrameworks)`iPodUI` ，该框架仅在 iOS 5 和 6 中可用。不确定这些方法是否或在哪里仍然可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:04:31.603

我没有现成的答案，但是由于您是在越狱设备上执行此操作，因此您可以使用移动基板将代码注入 iPod 应用程序，您可以覆盖 UIApplication sendEvent 以查看它接收到的所有事件（包括选择、向上、向下等）。

# sql - 如何找到数据库条目之间的循环？

> ID：13768046
> 
> 赞同：3
> 
> 时间：2012-12-07T17:27:28.670
> 
> 标签：sql, database, sqlite

我有一个如下的数据库表：

> 第 1 栏 | 第 2 栏
> 
> x | 是
> 
> 是 | z
> 
> z | X

所以基本上x->y->z->x。

现在我必须检测数据库中的此类条目。一种解决方案是获取这些条目并在内存中制作图表，然后使用循环查找算法检测循环。如果可能的话，我宁愿用 SQL 查询来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:56:00.807

SQLite 不支持递归查询，因此您能做的最好的事情就是使用自连接检测固定长度的循环。您无法检测任意长度的循环。

这是一个查找长度为 2 的循环的连接示例，就像您在问题中显示的示例一样。

```
SELECT ...
FROM t AS t0
JOIN t AS t1 ON t0.column2 = t1.column1
JOIN t AS t2 ON t1.column2 = t2.column1
WHERE t2.column2 = t0.column1 
```

* * *

回复您的评论：

如果您需要检测任意长度的循环，我只能建议您存储的不仅仅是直接链接。您还必须存储[传递闭包](http://en.wikipedia.org/wiki/Transitive_closure)，即通过图形的每条路径。这是提高搜索效率的最佳方式。当然，这样做需要更多的存储空间，但这是你的权衡。它占用的额外空间比您想象的要少。

我已经为树做了一个传递闭包设计，但不是非循环图。[请参阅我对将平面表解析为树的最有效/优雅的方法是什么的](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)回答？或我的演示文稿[Models for Hierarchical Data with SQL](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)。

# sql-server - 想要创建一个脚本来将数据和表和视图导出到 sql 脚本

> ID：13768048
> 
> 赞同：27
> 
> 时间：2012-12-07T17:27:31.467
> 
> 标签：sql-server, sql-server-2008-r2

想要创建一个脚本来将数据、表和视图导出到 sql 脚本。

我有 SQL Server 2008 r2。

到目前为止，我只能为所有表和视图自动生成一个 sqlscript。但数据不包括在内。

或者有没有更简单的方法可以将数据、表、视图从一台 SQL Server 导出到我的 ISP 的 SQL 服务器？

敬茶

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-14T02:03:13.617

如果由于某种原因备份/恢复对您不起作用，SSMS 的生成脚本工具包括一个高级脚本选项来包含数据：

![在此处输入图像描述](../Images/4a057a1d39500f8094bb7ec0816e2280.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T07:07:18.513

以下是一些可供考虑的选项（根据我的推荐优先级）：-

*   简单的备份和恢复将是最简单快捷的解决方案；
*   使用数据脚本工具（如 Red-Gate 的数据比较）可以解决您的需求；
    *   将数据库比较用作 Visual Studio 的一部分。
*   可以开发一个 SSIS 包来在两个实例之间来回抽取数据；或者
*   `SET IDENTITY INSERT ON / OFF`使用身份种子表的命令编写您自己的脚本

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T02:01:45.587

最简单的方法是创建备份，将 .bak 文件复制到另一台服务器，然后在那里恢复备份。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T10:03:49.633

我在 mysql 中使用**Navicat Premium**来处理这些事情。它从数据、表、视图和其他任何东西中生成 sql。它还提供了从不同服务器或平台上的一个数据库复制或同步表的工具。例如，我经常使用它来**将我的表从 MySQL 传输到 SQLite 数据库**，如此简单快捷。否则我不得不手动转移它，非常麻烦。

非常好的工具，任何数据库管理员或程序员都需要。它支持 MySQL、Oracle、MS SQL Server、PostgreSQL 和 SQLite。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T07:00:35.263

就像@jhewlett 说的那样，这将是最好的方法。在评论部分回答问题。不，这应该不是问题。只需确保 SQL Server 版本相同。不久前有一个问题，有两台电脑安装了不同版本的 R2，无法恢复备份。您还可以做的其他事情是使用数据编写整个数据库的脚本，但不建议这样做，因为生成脚本并在另一台计算机上完成运行可能需要很长时间。

或者您可以简单地停止 SQL 服务器实例并将数据库复制到外部硬盘驱动器上，然后将其重新连接到另一台服务器。只需记住在执行此步骤后启动实例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-14T03:34:28.333

要使用数据生成架构，请按照以下步骤操作。

*   选择数据库以生成模式'>'右键单击'>'任务'>'生成模式'>'在弹出窗口中单击NEXT'>'
*   选择 DB 对象以生成模式，然后单击 NEXT '>'
*   转到高级选项并向下滚动“>”
*   查找**要编写脚本的数据类型**并根据需要选择一个选项。'>' 然后 Next Next 并完成它。
*   好好享受。

![如图所示](../Images/6a798552adf0d0b872d2bf560a32846b.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-04T08:50:41.910

如果您不想移植所有表数据（例如，您只需要移植特殊表中的一些基本数据）脚本选项对您没有用处。在这种情况下，您将有两个选择。一是使用一些第三方工具，例如Red-Gate，二是自己编写脚本。我更喜欢第二种选择，因为除了它们中的大多数价格昂贵外，我只想运行小脚本来实现小删除、更新和插入目的。但重要的问题在这里：可能记录数太长，无法逐条编写脚本。我认为链接服务器是解决这个问题的好方法。正如您在图像中看到的那样描述 Just Declare Linked Server 并在源数据库中获取新脚本并编写可以访问源数据库和目标数据库的脚本就足够了。附图必须清晰。

```
Create New Linked Server: 
```

![在此处输入图像描述](../Images/35f72e03576359ae9f6fa9669bef87a7.png)

```
Write Destination SQL Server Address: 
```

![在此处输入图像描述](../Images/b6ec23db32ea1286a7f6bbc2b5a724dc.png)

```
Fill Login Info: 
```

![在此处输入图像描述](../Images/fe9f9d990abb95bfbc530f455ded895d.png)

```
Now you have Linked Server: 
```

![在此处输入图像描述](../Images/635307b40ede862c6ff67d98f9b6ba6f.png)

```
Write script and enjoy: 
```

![在此处输入图像描述](../Images/6c366a2ac1339f939d9238305cc9ad24.png)

希望这有帮助。

# java - 以通用方式使用 instanceof

> ID：13768049
> 
> 赞同：1
> 
> 时间：2012-12-07T17:27:40.247
> 
> 标签：java, instanceof

有没有办法根据方法的传递参数使用 instanceof？例子

```
doSomething(myClass.class); /* I would like to call this also with other classes */

public void doSomething(/*generic parameter that accepts all classes, not just myClass */) {
  if (myObject instanceOf /* the generic parameter */ == true) {...}
} 
```

有时我会使用 myClass.class 调用该方法，但有时我想使用 someOtherClass.class 调用它 - 不过我不想更改 if 条件。那可能吗？如果是这样，怎么做？:)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T17:30:10.817

您正在寻找[`Class.isInstance()`方法](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance(java.lang.Object))。

```
public void doSomething(Class<?> c, Object myObject) {
    if (c.isInstance(myObject)) {...}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T17:30:38.443

据我所知，这是这样做的方法：

```
public static <T> boolean doInstanceOf(Object object,Class<T> clz) {
        return clz.isInstance(object);
    } 
```

用法：

```
System.out.println(doInstanceOf(myObject,MyClass.class)); 
```

# android - 无法查看写入 sd 卡的文件

> ID：13768054
> 
> 赞同：0
> 
> 时间：2012-12-07T17:27:58.980
> 
> 标签：android, android-sdcard

我使用下面的代码将文件保存在我的 SD 卡中。该代码由stackoverflow中的另一篇文章获取。该文件已成功写入卡​​中，我可以在手机中查看它。但是我注意到当我将手机连接到计算机时，我无法查看该文件。我还注意到文件夹 ext_card 的内容显示在我的计算机中，而不是文件夹 sdcard 的内容。

这是代码

```
 File dir = new File ("/mnt/ext_card" + "/mine");
       dir.mkdirs();
        File file = new File(dir, "capture.csv");
        try {
        f = new FileOutputStream(file);
        captureFile = new PrintWriter(f);
    } catch (IOException ex) {
    } 
```

我把它写在 ext 文件夹中，我无法再次查看它。

# ios - 为什么静态库是 10Mb，而使用它的 .ipa 只有 4Mb？

> ID：13768059
> 
> 赞同：0
> 
> 时间：2012-12-07T17:28:38.300
> 
> 标签：ios, xcode

我有一个工作区，其中包含一个静态库和一个使用该库的项目，然后我正在构建项目（使用 Jenkins）以创建一个用于临时分发的存档。

生成的库文件大小报告为 10.4Mb，而 .ipa 报告为 4.2Mb。.ipa 怎么可能比库小得多，但应用程序在安装时运行，所以它必须包含库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:42:45.483

这有多种原因：

*   静态库包含链接所需的附加信息（如方法名称等）。

*   IPA 是压缩档案。与 ZIP 类似，只是以另一个文件结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:38:24.590

最可能的解释是该库包含链接所需的符号（可能还有调试符号），而 ipa 文件已被链接（因此它不包含链接器的信息）并去除了调试符号。

另一方面，ipa 文件只是一个 zip 文件，所以它的内容也被压缩了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:39:39.007

苹果用来压缩成.ipa的算法非常好。如果您的捆绑包不包含太多图像，则该百分比可以低至 15%（来自磁盘上的未压缩大小）。

# c# - Silverlight 表太大，无法一次“查看”网页。随着时间的推移，我怎样才能把桌子往下移？

> ID：13768065
> 
> 赞同：0
> 
> 时间：2012-12-07T17:28:57.333
> 
> 标签：c#, silverlight

我正在尝试创建一个以表格格式显示一些信息的程序。该表的行数可以改变，因此该表可能会或可能不会在一次查看网页时完全可见。

有没有办法让我可以随着时间的推移显示部分表格？例如：显示第 1-30 行 1 分钟，然后显示第 31-50 行 1 分钟，然后再显示第 1-30 行，以此类推。

我到目前为止的代码是：

XAML：

```
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.RowDefinitions>
        <RowDefinition  Height="50"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Grid x:Name="InnerGrid"  Grid.Row="1" Background="White"> 
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
     </Grid.ColumnDefinitions>

    </Grid>
</Grid> 
```

```
 using system; 
 using System.Collections.Generic;
 using System.Linq;
 using System.Net;
 using System.Windows;
 using System.Windows.Controls;
 using System.Windows.Documents;
 using System.Windows.Input;
 using System.Windows.Media;
 using System.Windows.Media.Animation;
 using System.Windows.Shapes;
 using System.Diagnostics;   

 namespace MyNameSpace
{
public partial class MainPage : UserControl
{
    //The value of numRows will depend on a value from a database, so it may change every once in a while. 
    int numRows = 45;
    Border border = new Border();
    Border border2 = new Border();

    public MainPage()
    {
        InitializeComponent();
        createRows();
    }

    public Border initializeBorder(Border b)
    {
        b.BorderBrush = new SolidColorBrush(Colors.Black);
        b.BorderThickness = new Thickness(1);
        return b;
    }

    public void createRows()
    {
        //This for loop creates the necessary amount of rows.
        for (int i = 0; i < numRows; i++)
        {
            RowDefinition rd = new RowDefinition();
            rd.Height = new GridLength(20);
            InnerGrid.RowDefinitions.Add(rd);
        }
        //This for loop creates and applies the borders that make the table "appear"
        for (int i = 0; i < numRows; i++)
        {
            Border b = new Border();
            Border b2 = new Border();

            Grid.SetColumn(initializeBorder(b), i);
            Grid.SetRow(initializeBorder(b2), i);

            Grid.SetColumnSpan(b, 11);
            Grid.SetColumnSpan(b2, 11); 
            Grid.SetRowSpan(b, numRows);
            Grid.SetRowSpan(b2, numRows);

            InnerGrid.Children.Add(b); 
            InnerGrid.Children.Add(b2);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:19:14.767

这是从服务创建数据网格的简单示例

[Silverlight 数据网格](http://www.switchonthecode.com/tutorials/silverlight-datagrid-tutorial-using-a-datagridtemplatecolumn)

重复这个过程：

从服务中获取数据 解析数据 将其作为项目源分配给数据网格

使用 Disptacher Timer 并在每分钟或任何时间间隔后从服务中获取 xml 数据，对其进行解析并将其分配给 Datagrid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:38:22.913

这里有一些关于如何经常显示不同“页面”数据的想法。此方法使用 DataGrid 而不是 ItemsControl，因为 DataGrid 不需要您指定 ItemTemplate。我还没有测试过这段代码，但希望它能让你走上正轨。

快速提问：有什么理由不能一次性将数据全部放入 UI 并让用户上下滚动？然后你可以完全取消 DispatcherTimer 和分页。

在 XAML 中，添加`xmlns:c="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"`InnerGrid 并将其替换为：

```
<c:DataGrid x:Name="MyDataGrid" Grid.Row="1" AutoGenerateColumns="True" /> 
```

在代码隐藏中：

```
private IEnumerable<MyDataObject>[] _pages;
private int _currentPageIndex = 0;
private ObservableCollection<MyDataObject> _visibleData;
private DispatcherTimer _timer;

public MainPage()
{
    InitializeComponent();

    this._visibleData = new ObservableCollection<MyDataObject>();
    this.MyDataGrid.ItemsSource = this._visibleData;

    this._timer = new DispatcherTimer();
    this._timer.Interval = TimeSpan.FromMinutes(1);
    this._timer.Tick += (sender, args) => this.OnTimerTick();
    this._timer.Start();
}

// I assume you have some code that gets data from the server. Pass that data to this method.
private void ProcessDataFromServer(IEnumerable<MyDataObject> data)
{
    this._pages = this.GroupDataIntoPages(data);
    this.ShowPage(0);
}

private IEnumerable<MyDataObject>[] GroupDataIntoPages(IEnumerable<MyDataObject> data)
{
    // I'll leave this to you.
    // This might help: http://stackoverflow.com/a/860399/674077
}

private void OnTimerTick()
{
    if(this._pages != null)
    {
        this._currentPageIndex++;
        if(this._currentPageIndex >= this._pages.Length)
        {
            this._currentPageIndex = 0;
        }
        this.ShowPage(this._currentPageIndex);
    }
}

private void ShowPage(int pageIndex)
{
    this._visibleData.Clear();
    if(this._pages != null && pageIndex >= 0 && pageIndex < this._pages.Length)
    {
        foreach(var item in this._pages[pageIndex])
        {
            this._visibleData.Add(item);
        }
    }
} 
```

# java - Android - 包括来自另一个库项目的库项目

> ID：13768067
> 
> 赞同：1
> 
> 时间：2012-12-07T17:29:02.937
> 
> 标签：java, android, eclipse

我有一个 android 应用程序和两个 Android 库项目。应用程序项目需要第一个库项目，并将其放在其 Android 依赖项上。第一个 Android 库项目需要第二个 Android 库项目，并拥有它自己的 Android 依赖项。问题是第一个 Android 库项目没有看到来自第二个 Android 库项目的资源，并且是编译错误。如何配置项目？

# css - 在 HTML 中将 DIV 中的内容居中

> ID：13768071
> 
> 赞同：0
> 
> 时间：2012-12-07T17:29:24.663
> 
> 标签：css, html

这是一个常见的要求。但是，我要疯了。

```
 <style type="text/css">
        html, body { height: 100%; margin:0px; padding:0px; }
        #content { margin-left: 50%; margin-right: 50%; width:900px; }
    </style> 
```

...

```
<body style="min-height:100%; height:100%; position:relative;">
  <header style="min-height:200px;">
      <div style="height:50px; background:url(http://www.mydomain.com/images/bg.gif) repeat-x;">&nbsp;</div>
      <div style="height:300px; background:url(http://www.mydomain.com/images/bg2.jpg) repeat;">
        <div class="content" style="height:300px; background:url(http://www.mydomain.com/images/masthead-back.jpg) no-repeat;">
          <img alt="Hello" src="http://www.mydomain.com/images/logo.png" />
          Welcome.
        </div>
      </div>

      <div id="nav">
        <ul class="navs">
          <li><a href="Main.aspx">Home</a></li>
      <li><a href="ContactUs.aspx">Contact</a></li>
      <li><a href="AboutUs.aspx">About Us</a></li>
        </ul>
      </div>
    </div>
  </header>

  <article class="content" style="padding-bottom:60px;">
    This is the main content
  </article>

  <footer style="position:absolute; bottom:0px; width:100%; height:60px; background-color:black;">
    <div class="content">
      <a href='#'>Privacy</a>&nbsp;|&nbsp;<a href='#'>Terms of use</a>
     </div>
  </footer>
</body> 
```

我希望我的页眉、文章和页脚项目在正文中居中。但是，我希望页眉、文章和页脚中的内容左对齐。我做错了什么，目前一切都只是左对齐。但是，它不在屏幕的中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:34:27.930

您需要设置文章、页眉和页脚显示样式以阻止您的 CSS 以适应旧浏览器

还有为什么不使用 <nav/> 而不是 <div id="nav">？

```
article,aside,details,figcaption,figure,
footer,header,hgroup,menu,nav,section {  display:block; }

 <nav>
        <ul class="navs">
          <li><a href="Main.aspx">Home</a></li>
      <li><a href="ContactUs.aspx">Contact</a></li>
      <li><a href="AboutUs.aspx">About Us</a></li>
        </ul>
      </nav> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:35:03.647

尝试：

```
div.content //or nav or just plain div
{
margin-left: auto; //centers the DIVs
margin-right:auto;
text-align: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:37:18.700

你需要一个带有这个 CSS 的包装器 DIV：

```
#wrapper { width:800px; margin: 0 auto; } 
```

[**工作演示**](http://jsfiddle.net/Qjvgs/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T17:39:44.800

您需要在正文中添加

```
width:960px; margin: 0 auto; 
```

# c# - 5 列布局与 2 个 gridsplitters - 意外行为

> ID：13768072
> 
> 赞同：0
> 
> 时间：2012-12-07T17:29:27.053
> 
> 标签：c#, wpf, wpf-controls

我有一个 5 列布局。目标是拥有 3 个主要列（左、中、右），然后我可以对其进行扩展和收缩。为了实现这一点，我添加了两个包含拆分器的额外列。一个在左列和中列之间，另一个在中列和右列之间。

在启动应用程序并将第一个拆分器向左移动后，最后一列（右）突然一直向左对齐，折叠所有三​​列。有什么建议么？谢谢

这是 XAML：

```
<Window x:Class="ThreeColumns.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="725">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="auto"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="auto"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>
        <Border BorderBrush="Red" BorderThickness="5" Grid.Column="0" Grid.Row="0" CornerRadius="10">
            <TextBlock Text="Left side" FontSize="24"></TextBlock>
        </Border>
        <GridSplitter Background="blue" Width="5" 
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch" Grid.Column="1"></GridSplitter>
        <Border BorderBrush="Red" BorderThickness="5" Grid.Column="2" Grid.Row="0" CornerRadius="10">
            <TextBlock Text="Middle" FontSize="24"></TextBlock>
        </Border>
        <GridSplitter Background="blue" Width="5" 
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch" Grid.Column="3"></GridSplitter>
        <Border BorderBrush="Red" BorderThickness="5" Grid.Column="4" Grid.Row="0" CornerRadius="10">
            <TextBlock Text="Right side" FontSize="24"></TextBlock>
        </Border>
    </Grid>
</Window> 
```

我设法通过将第一列和最后一列的宽度设置为“auto”并将中间内容列设置为“*”来解决它：

```
<Window x:Class="ThreeColumns.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="725">
    <DockPanel>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition MinWidth="50"  Width="auto" Name="Col1"></ColumnDefinition>
                <ColumnDefinition Width="7" Name="Col2"></ColumnDefinition>
                <ColumnDefinition Name="Col3" Width="*"></ColumnDefinition>
                <ColumnDefinition Width="7" Name="Col4"></ColumnDefinition>
                <ColumnDefinition MinWidth="50" Width="auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <Border BorderBrush="Red" BorderThickness="5" Grid.Column="0" Grid.Row="0" CornerRadius="10" Margin="2 2 2 2">
                <TextBlock Text="Left side" Width="250" FontSize="24"></TextBlock>
            </Border>

            <Border BorderBrush="Red" BorderThickness="5" Grid.Column="2" Grid.Row="0" CornerRadius="10" Margin="2 2 2 2">
                <TextBlock Text="Middle" FontSize="24"></TextBlock>
            </Border>
            <Border BorderBrush="Red" BorderThickness="5" Grid.Column="4" Grid.Row="0" CornerRadius="10" Margin="2 2 2 2">
                <TextBlock Text="Right side" Width="250" FontSize="24"></TextBlock>
            </Border>
            <GridSplitter Background="blue" Width="5" 
                      HorizontalAlignment="Center" ResizeDirection="Columns"
                      VerticalAlignment="Stretch" Grid.Column="1" Grid.ZIndex="1"/>
            <GridSplitter Background="blue" Width="5" 
                      HorizontalAlignment="Center" ResizeDirection="Columns"
                      VerticalAlignment="Stretch" Grid.Column="3" Grid.ZIndex="1"/>
        </Grid>
    </DockPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:09:30.397

你的代码对我有用。
但我发现使用固定宽度作为分离器并将其居中更清​​洁。
如果拆分器对着下一列，有时它似乎会出局。

通常需要对除一个以外的所有对象使用 Auto。
如果您尝试使用 2* 3* 之类的相对大小，事情通常会变糟。
如果您想开始调整大小，有时多个单个 * 会起作用。

```
 <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto></ColumnDefinition>
            <ColumnDefinition Width="7"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="7"></ColumnDefinition>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>
        <Border BorderBrush="Red" BorderThickness="5" Grid.Column="0" Grid.Row="0" CornerRadius="10">
            <TextBlock Text="Left side" FontSize="24"></TextBlock>
        </Border>
        <GridSplitter Background="blue" Width="3" 
                      HorizontalAlignment="Center"
                      VerticalAlignment="Stretch" Grid.Column="1"></GridSplitter>
        <Border BorderBrush="Red" BorderThickness="5" Grid.Column="2" Grid.Row="0" CornerRadius="10">
            <TextBlock Text="Middle" FontSize="24"></TextBlock>
        </Border>
        <GridSplitter Background="blue" Width="3" 
                      HorizontalAlignment="Center"
                      VerticalAlignment="Stretch" Grid.Column="3"></GridSplitter>
        <Border BorderBrush="Red" BorderThickness="5" Grid.Column="4" Grid.Row="0" CornerRadius="10">
            <TextBlock Text="Right side" FontSize="24"></TextBlock>
        </Border>
    </Grid> 
```

# java - 使用 OnCreate 的 SharedPreferences

> ID：13768073
> 
> 赞同：2
> 
> 时间：2012-12-07T17:29:28.843
> 
> 标签：java, android, eclipse

我正在努力实现一个目标，即添加这样的某种向导：

应用程序首次启动 > 用户遵循向导 > 最终向导步骤将一些数据保存到 SharedPreferences 并继续用户选择的活动 > 应用程序退出 > 应用程序重新启动 > 应用程序显示用户通过向导数据选择的活动`SharedPreferences`。

我知道我可以将数据保存到`SharedPreferences`空间中，但我应该如何实现这一点。

用户可以通过`Android:OnClick`操作查看视图。我的应用程序只有 1 个具有不同视图操作的主要 java 类，如下所示：

```
public void myapp_confirmsetup(View view) {
setContentView(R.layout.activity_my_app_confirmsetup);
PreferenceManager.getDefaultSharedPreferences(this).edit().putString("MyApp", "app_off").commit();    
} 
```

我认为从现在开始，我只需要使用该`OnCreate`方法加载字符串，但我不确定如何做到这一点。有人能把我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:31:28.987

用它来存储字符串...

```
 final SharedPreferences pref1 = getSharedPreferences("myapp", MODE_PRIVATE);
    SharedPreferences.Editor editor = pref1.edit();
    editor.putString("Stringval", "xxxxxxx");
    editor.commit(); 
```

要从 SharedPreference 中获取值，请使用以下代码：-

```
final SharedPreferences pref1 = getSharedPreferences("myapp", MODE_PRIVATE);
String str1= pref2.getString("Stringval", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:43:44.687

```
 final SharedPreferences pref1 = getSharedPreferences("myapp", MODE_PRIVATE);
  String str1= pref1.getString("Stringval", null);
if(str1.equals("app_off")){
   //do something
 }else(str1.equals("app_on")){
   //do something else
 } 
```

# mysql - Mysql - 距离参数搜索使用个人偏好查找中心位置距离内的所有目标

> ID：13768077
> 
> 赞同：0
> 
> 时间：2012-12-07T17:30:06.270
> 
> 标签：mysql, geospatial, spatial

这是一个很难解释的问题。我能够找到 x 英里半径内的所有邮政编码。但是我想做的是从 tblUsers 中找到 MaxDistance <= x 邮政编码的所有用户 ID。

所以用简单的英语我想知道所有在邮政编码范围内的人`MaxDistance`

例如我有一张桌子：

```
tblUsers(ID int, Maxdistance int,Zipcode varchar(5))
1|50|94129
2|25|94111
3|100|19019

```

在我的第二张桌子上：

```
tblTmpPlaces(ID int,Zipcode varchar(5))
1|94129

```

我想要做的是使用 tblTmpPlaces 邮政编码，我希望能够说嘿用户 1 和 2 在他们的最大距离内并选择这些。但是，用户 3 的最大距离为 100，并且与 tblTmpPlaces 邮政编码 94129 的距离不够近。94129 是旧金山，19019 是费城。用户距离 San Fran 超过 100 英里。

这是我一直用来获取距离的方法，但它使用中心位置来查找区域内的所有内容，但它没有考虑 MaxDistance。任何帮助表示赞赏。

所以基本上`select ID from tblUsers where`这是我绊倒的部分

```
SELECT Zipcode
             FROM tblZipcodes
            WHERE (  3959
                   * acos(
                            cos(
                               radians(
                                  @XLocationParam))
                          * cos(
                               radians(
                                  x(location)))
                          * cos(
                                 radians(
                                    y(location))
                               - radians(
                                    @YLocationParam))
                        +   sin(
                               radians(
                                  @XLocationParam))
                          * sin(
                               radians(
                                  x(location)))) <= 30)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:36:38.143

看起来您确实需要每个邮政编码的“中心”的纬度和经度。没有它，MySQL 无法计算邮政编码之间的距离。

```
tblZipcodeLatLong
( Zipcode   varchar(5)
, latitude  decimal(7,4)
, longitude decimal(7,4)
) 
```

然后，您可以使用大圆距离 (GCD) 公式计算所有邮政编码之间的距离。

但是，为了提高性能，您可能不想在每个单独的查询中都这样做，而是希望预先计算所有邮政编码之间的距离，并将这些计算出的距离存储在一个表中。

```
SELECT p1.Zipcode AS p1_Zipcode
     , p2.Zipcode AS p2_Zipcode
     , <gcd_formula> AS distance
  FROM tblZipcodeLatLong p1
 CROSS
  JOIN tblZipcodeLatLong p2 
```

Where`<gcd_distance>`代表您的大圆距离公式，用于计算所有邮政编码之间的距离。

这种形式的查询将返回您正在寻找的结果集：

```
SELECT u.*, p.*
  FROM tblTmpPlaces p
  JOIN (
         SELECT p1.Zipcode AS p_Zipcode
              , p2.Zipcode AS u_Zipcode
              , <gcd_formula> AS distance
           FROM tblZipcodeLatLong p1 
          CROSS
           JOIN tblZipcodeLatLong p2
       ) d
    ON d.p_Zipcode = p.Zipcode
  JOIN tblUsers u 
    ON u.Zipcode = d.u_Zipcode
   AND u.Maxdistance >= d.distance
 WHERE p.Zipcode = '94129' 
```

正如我之前提到的，在每个查询上执行交叉连接操作并计算该子查询（别名为 d）中的所有这些距离可能会产生相当多的开销。出于性能考虑，您可能希望预先计算这些结果，将其存储在适当索引的表中，然后将该子查询替换为对预填充表的引用。

* * *

笔记：

我在不久前在stackoverflow上发布的其他答案之一中有一个GCD公式。我看看能不能找到。

类似的问题在这里回答：

[MYSQL 按 HAVING 距离排序但无法分组？](https://stackoverflow.com/questions/11109127/mysql-sorting-by-having-distance-but-not-able-to-group)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T06:04:07.717

做了完全相同的事情，如果我能理解，你已经得到了邮政编码（可能在一个数组中）简单的事情就是使用 sql SELECT * FROM users 中的 IN 运算符找到这些邮政编码与相应用户的匹配WHERE zipcode IN zipcodes_array; zipcodes_array 是你已经拥有的数组

# javascript - 实施英雄轮播滑块的问题

> ID：13768082
> 
> 赞同：2
> 
> 时间：2012-12-07T17:30:20.390
> 
> 标签：javascript, html, css, slider

我试图实现的滑块/轮播是这样的：http: [//www.paulwelsh.info/jquery-plugins/hero-carousel/](http://www.paulwelsh.info/jquery-plugins/hero-carousel/)

我知道我必须为它添加 HTML 代码，由于缺乏设计网站的经验（大约一个月前开始我的课程），我无法做到这一点。你能帮我解决我应该添加的 HTML 代码吗？这是我的 HTML、CSS 和 Javascript。HTML 是我认为它应该看起来的样子，这显然是错误的。

**HTML**

```
<div class="what here?">         
<ul class="and what here?"> 
anything here?

<li><img src="images/deadmau5/slide1.jpg" ></li>

<li><img src="images/deadmau5/slide2.jpg" ></li>

<li><img src="images/deadmau5/slide3.jpg" ></li>

<li><img src="images/deadmau5/slide4.jpg" ></li>

</ul>

</div> 
```

**CSS**

```
.hero {
width: 100%;
position: relative;
overflow: hidden;
margin-bottom: 48px;
}

.hero-carousel article {
    width: 980px;
    margin: 0 auto;
    height: 480px;
    display: block;
    float: left;
    position: relative;
    }

.hero-carousel-container article {
    float: left;
    }

    .hero-carousel article img{
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
        }

    .hero-carousel article .contents {
        position: relative;
        z-index: 2;
        top: 72px;
        left: 48px;
        list-style: none;
        color: #000;
        width: 556px;
        padding: 20px;

        background: rgba(255,255,255,0.8);
        -pie-background: rgba(255,255,255,0.8);

        -moz-border-radius: 20px;
        -webkit-border-radius: 20px;
        border-radius: 20px;

        behavior: url(/assets/PIE.htc);
        }

    .hero-carousel-nav {
        width: 980px;
        position: absolute;
        bottom: 0;
        left: 50%;
        margin-left: -490px;
        z-index: 2;
        }

        .hero-carousel-nav li {
            position: absolute;
            bottom: 48px;
            right: 48px;
            list-style: none;
            }

        .hero-carousel-nav li.prev {
            left: 48px;
            right: auto;
            }

        .hero-carousel-nav li a {
            background: #D21034;
            color: #fff;
            border: none;
            outline: none;
            display: block;
            float: left;
            padding: 5px 20px;

            -moz-border-radius: 20px;
            -webkit-border-radius: 20px;
            border-radius: 20px;
            behavior: url(/assets/PIE.htc);
            }

        .hero-carousel-nav li a:hover { 
            background: #89051C;
            }

        .hero-carousel-nav li a:active,
        .hero-carousel-nav li a:focus { 
            border: none;
            outline: none;
            } 
```

**Javascript**

```
jQuery.fn.heroCarousel=function(a){a=jQuery.extend({animationSpeed:1000,navigation:true,easing:"",timeout:5000,pause:true,pauseOnNavHover:true,prevText:"Previous",nextText:"Next",css3pieFix:false,currentClass:"current",onLoad:function(){},onStart:function(){},onComplete:function(){}},a);if(jQuery.browser.msie&&parseFloat(jQuery.browser.version)<7){a.animationSpeed=0}return this.each(function(){var k=jQuery(this),b=k.children();currentItem=1;childWidth=b.width();childHeight=b.height();if(b.length>2){b.each(function(m){if(a.itemClass){jQuery(this).addClass(a.itemClass)}});b.filter(":first").addClass(a.currentClass).before(b.filter(":last"));var d=Math.round(childWidth*k.children().length),l="-"+Math.round(childWidth+Math.round(childWidth/2))+"px";k.addClass("hero-carousel-container").css({position:"relative",overflow:"hidden",left:"50%",top:0,"margin-left":l,height:childHeight,width:d});k.before('<ul class="hero-carousel-nav"><li class="prev"><a href="#">'+a.prevText+'</a></li><li class="next"><a href="#">'+a.nextText+"</a></li></ul>");var e=k.prev(".hero-carousel-nav"),h;if(a.timeout>0){var j=false;if(a.pause){k.hover(function(){j=true},function(){j=false})}if(a.pauseOnNavHover){e.hover(function(){j=true},function(){j=false})}function c(){if(!j){e.find(".next a").trigger("click")}}h=window.setInterval(c,a.timeout)}e.find("a").data("disabled",false).click(function(p){p.preventDefault();var m=jQuery(this),n=m.parent().hasClass("prev"),o=k.children();if(m.data("disabled")===false){a.onStart(k,e,o.eq(currentItem),a);if(n){f(o.filter(":last"),"previous")}else{f(o.filter(":first"),"next")}m.data("disabled",true);setTimeout(function(){m.data("disabled",false)},a.animationSpeed+200);if(a.timeout>0){window.clearInterval(h);h=window.setInterval(c,a.timeout)}}});function f(m,q){var o=parseFloat(k.position().left),n=parseFloat(k.css("margin-left"));if(q==="previous"){m.before(m.clone().addClass("carousel-clone"));k.prepend(m);var p=Math.round(n-childWidth);var r="+="}else{m.after(m.clone().addClass("carousel-clone"));k.append(m);var p=l;var r="-="}if(a.css3pieFix){g(jQuery(".carousel-clone"))}k.css({left:o,width:Math.round(d+childWidth),"margin-left":p}).animate({left:r+childWidth},a.animationSpeed,a.easing,function(){k.css({left:"50%",width:d,"margin-left":n});jQuery(".carousel-clone").remove();i()})}function g(n){var m=n.attr("_pieId");if(m){n.attr("_pieId",m+"_cloned")}n.find("*[_pieId]").each(function(o,p){var q=$(p).attr("_pieId");$(p).attr("_pieId",q+"_cloned")})}function i(){var m=k.children();m.removeClass(a.currentClass).eq(currentItem).addClass(a.currentClass);a.onComplete(k,k.prev(".hero-carousel-nav"),m.eq(currentItem),a)}if(jQuery.browser.msie){e.find("a").attr("hideFocus","true")}a.onLoad(k,e,k.children().eq(currentItem),a)}})}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:35:06.307

从您提供的示例页面嵌入这些资源：

```
<link rel="stylesheet" media="all" href="jquery.heroCarousel.css" type="text/css" />
<script type='text/javascript' src='jquery.heroCarousel-1.3.js'></script>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script> 
```

然后遵循这个 HTML 结构：

```
 <div class="hero">
            <div class="hero-carousel">
                    <article><img src="http://www.deadmau5.com/wp-content/uploads/2012/06/slide1.jpg" >
                </article>
                    <article>
<img src="http://www.deadmau5.com/wp-content/uploads/2012/06/telemiss_website_banner2.jpg" >
                </article>
                <article>
<img src="http://www.deadmau5.com/wp-content/uploads/2012/06/ATGH_deadmau5.com_1.jpg" >
                </article>
                <article>
                    <img src="http://www.deadmau5.com/wp-content/uploads/2012/05/deadmau5-web-banner-1.jpg" > 
                </article>
</div>​ 
```

然后将此 javascript 代码添加到您网站的末尾：

```
$(document).ready(function(){
                $('.hero-carousel').heroCarousel({
                    css3pieFix: true
                });}); 
```

演示： http: [//jsfiddle.net/dCYB7/1/，http](http://jsfiddle.net/dCYB7/1/) : [//fiddle.jshell.net/dCYB7/1/show/](http://fiddle.jshell.net/dCYB7/1/show/)

编辑：

一个 HTML+CSS+Javascript 集合中的整个滑块：

```
<style>

#slider { width:100%; overflow:hidden; height:372px; background-image:url(http://www.deadmau5.com/wp-content/themes/deadmau5/images/slider-bg.png); margin-bottom:25px; }
#slider-container { height:352px; width:950px; margin:auto; padding-top:10px; position:relative; }
#slider-inner { width:10000px; height:352px; position:absolute; top:10px; left:-970px; }
.slide { width:938px; height:340px; border:6px solid #000; float:left; margin-right:20px; position:relative; }

#slider-arrow-left { display:block; width:115px; height:124px; background-image:url(http://www.deadmau5.com/wp-content/themes/deadmau5/images/large-arrow-left.png); position:absolute; left:-53px; top:120px; z-index:999; } #slider-arrow-left:hover { background-position:0 -124px; }
#slider-arrow-right { display:block; width:115px; height:124px; background-image:url(http://www.deadmau5.com/wp-content/themes/deadmau5/images/large-arrow-right.png); position:absolute; right:-53px; top:120px; z-index:999; } #slider-arrow-right:hover { background-position:0 -124px; }
#slider-fade-left { display:block; height:372px; width:300px; background-image:url(http://www.deadmau5.com/wp-content/themes/deadmau5/images/slider-fade-left.png); position:absolute; left:-320px; top:0px; z-index:2; }
#slider-fade-left:hover { opacity:0.92; }
#slider-fade-right { display:block; height:372px; width:300px; background-image:url(http://www.deadmau5.com/wp-content/themes/deadmau5/images/slider-fade-right.png); position:absolute; right:-320px; top:0px; z-index:2; }
#slider-fade-right:hover { opacity:0.92; }
#slider-black-left { height:372px; width:1000px; position:absolute; top:0px; left:-1300px; background-color:#0c100f; }
#slider-black-right { height:372px; width:1000px; position:absolute; top:0px; right:-1300px; background-color:#0c100f; }

</style>                           

            <div id="slider">
                <div id="slider-container">
                    <div id="slider-inner">
                        <div class="slide">
                            <a target="_blank" href="http://www.youtube.com/watch?v=Mz8sQSEUGn4"><img alt="deadmau5 Banner" src="http://www.deadmau5.com/wp-content/uploads/2012/06/slide1.jpg" /></a>                        </div>
                        <div class="slide">
                            <a target="_blank" href="http://bzz.is/heapmau5"><img alt="deadmau5 Banner" src="http://www.deadmau5.com/wp-content/uploads/2012/06/telemiss_website_banner2.jpg" /></a>                        </div>
                        <div class="slide">
                            <a target="_blank" href="http://smarturl.it/albumtitlegoeshere"><img alt="deadmau5 Banner" src="http://www.deadmau5.com/wp-content/uploads/2012/06/ATGH_deadmau5.com_1.jpg" /></a>                        </div>
                        <div class="slide">
                            <a target="_blank" href="http://bzz.is/neffmau5"><img alt="deadmau5 Banner" src="http://www.deadmau5.com/wp-content/uploads/2012/05/deadmau5-web-banner-1.jpg" /></a>                        </div>
                        <div class="slide">
                            <a target="_blank" href="http://www.youtube.com/watch?v=Mz8sQSEUGn4"><img alt="deadmau5 Banner" src="http://www.deadmau5.com/wp-content/uploads/2012/06/slide1.jpg" /></a>                        </div>
                        <div class="slide">
                            <a target="_blank" href="http://bzz.is/heapmau5"><img alt="deadmau5 Banner" src="http://www.deadmau5.com/wp-content/uploads/2012/06/telemiss_website_banner2.jpg" /></a>                        </div>
                    </div>
                    <a href="#" id="slide-left"><span id="slider-arrow-left"></span></a>
                    <a href="#" id="slide-right"><span id="slider-arrow-right"></span></a>
                    <a href="#" id="slide-left-fade"><span id="slider-fade-left"></span></a>
                    <a href="#" id="slide-right-fade"><span id="slider-fade-right"></span></a>
                    <div id="slider-black-left"></div>
                    <div id="slider-black-right"></div>
                    <div id="hearts">
                        <a href="#" id="heart1"><span class="heart"></span></a>
                        <a href="#" id="heart2"><span class="heart"></span></a>
                        <a href="#" id="heart3"><span class="heart"></span></a>
                        <a href="#" id="heart4"><span class="heart"></span></a>
                    </div>
                </div>
            </div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://malsup.github.com/chili-1.7.pack.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.easing.1.3.js"></script>

<script type="text/javascript">

$(document).ready(function() {
    function slideLeft(evt) {
                    evt.preventDefault();
                    clearInterval(refreshId);

                    unbindAll();

                    var oldOrb = jQuery.data(document.body, 'activeOrb');

                    var newOrb = oldOrb - 1; if (newOrb < 1) { newOrb = 4; }
                    jQuery.data(document.body, 'activeOrb', newOrb);
                    orbChange(newOrb);

                    $('#slider-inner').animate({
                        left: '+=970'
                    }, 600, 'easeOutQuart', function() {
                        var me = $(this);
                        var p = me.position();
                        if (p.left > -10) { me.css('left', '-3880px'); } 
                        bindAll();
                    });
                }   

                function slideRight(evt) {
                    evt.preventDefault();
                    clearInterval(refreshId);

                    unbindAll();

                    var oldOrb = jQuery.data(document.body, 'activeOrb');
                    oldOrb = parseInt(oldOrb);

                    var newOrb = oldOrb + 1; if (newOrb > 4) { newOrb = 1; }
                    jQuery.data(document.body, 'activeOrb', newOrb);
                    orbChange(newOrb);

                    $('#slider-inner').animate({
                        left: '-=970'
                    }, 600, 'easeOutQuart', function() {
                        var me = $(this);
                        var p = me.position();
                        if (p.left < -4840) { me.css('left', '-970px'); } 
                        bindAll();
                    });
                }   

                function slideRight2() {

                    var oldOrb = jQuery.data(document.body, 'activeOrb');

                    var newOrb = oldOrb + 1; if (newOrb > 4) { newOrb = 1; }
                    jQuery.data(document.body, 'activeOrb', newOrb);
                    orbChange(newOrb);

                    $('#slider-inner').animate({
                        left: '-=970'
                    }, 600, 'easeOutQuart', function() {
                        var me = $(this);
                        var p = me.position();
                        if (p.left < -4840) { me.css('left', '-970px'); } 

                    });
                }   

                function slideTo(evt) {
                    evt.preventDefault();
                    clearInterval(refreshId);

                    unbindAll();

                    var oldOrb = jQuery.data(document.body, 'activeOrb');
                    var newOrb = $(this).attr('id'); newOrb = newOrb.substr(5,6);

                    jQuery.data(document.body, 'activeOrb', newOrb);
                    orbChange(newOrb);

                    var To;
                    if (newOrb == 1) { To = -970; } if (newOrb == 2) { To = -1940; } if (newOrb == 3) { To = -2910; } if (newOrb == 4) { To = -3880; }

                    $('#slider-inner').animate({
                        left: To
                    }, 600, 'easeOutQuart', function() {
                        bindAll();
                    });
                }   

                function orbChange(orb) {
                    $('.heart-active', '#hearts').removeClass('heart-active');
                    $('#heart' + orb + ' span').addClass('heart-active');
                }

                function bindAll() {
                    $('#slide-left').bind('click', slideLeft);  
                    $('#slide-right').bind('click', slideRight);
                    $('#slide-left-fade').bind('click', slideLeft); 
                    $('#slide-right-fade').bind('click', slideRight);
                    $('#hearts a').bind('click', slideTo);
                }

                function unbindAll() {
                    $('#slide-left').unbind('click', slideLeft);    
                    $('#slide-right').unbind('click', slideRight);
                    $('#slide-left-fade').unbind('click', slideLeft);   
                    $('#slide-right-fade').unbind('click', slideRight);
                    $('#hearts a').unbind('click', slideTo);
                }

                var refreshId = setInterval(function() {
                    slideRight2();
                }, 6000);
                bindAll();
        });

</script> 
```

[现场演示](http://fiddle.jshell.net/vr7KW/show/)| [代码](http://jsfiddle.net/vr7KW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:55:13.367

在 .hero 类中添加宽度和边距 0 auto

```
.hero {
position: relative;
overflow: hidden;
margin-bottom: 48px;
margin: 0 auto;
width: 960px;
} 
```

# php - 从显示已选择的数据库选项填充的选择列表

> ID：13768088
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:30:38.273
> 
> 标签：php, select, options

我正在为我的状态使用一个表，并且我有时间使返回值与数据库中已经记录的值匹配我正在使用以下内容来填充选项列表：

```
 <label class="label" for="state"><em>State</em></label>
          <select class="select" maxlength="30" id="" name="state" ><option>
              <?php 
              $options = "";
               while ($row = mysql_fetch_array($resultstate))
                        {
                        $name=$row["name"];
                        $abbrev=$row["abbrev"]; 
                        $options.="<OPTION VALUE=\"$abbrev\">".$name;
                        } 
              echo $options;

             </option></select></div> 
```

我如何循环遍历状态数组，或者仅将数据库中的状态标记为选中状态？两个都可以，但是不能一起...

任何帮助是极大的赞赏

通过一些调整：

```
 while ($row = mysql_fetch_array($resultstate))
                        {
                            $name = $row["name"];
                            $abbrev = $row["abbrev"]; 
                                if($state == $abbrev){
                                    echo '<OPTION VALUE="'.$abbrev.'" selected="selected">'. $name.' </OPTION>';
                                    } else {
                            echo ' <OPTION VALUE="'.$abbrev.'"> '.$name.' </OPTION>';
                                    }

                        } 
```

工作正常，谢谢你指出我正确的方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:33:13.420

如果输出是问题......我不太明白你有什么问题？

```
<label class="label" for="state"><em>State</em></label>
      <select class="select" maxlength="30" id="" name="state" ><option>
          <?php 
          $options = "";
           while ($row = mysql_fetch_array($resultstate))
                    {
                    $name=$row["name"];
                    $abbrev=$row["abbrev"]; 
                    $options.="<OPTION VALUE=\"$abbrev\";
                    if($somevaluefromDb==$name){echo 'selected="selected"';}
                     echo ">".$name."</OPTION>";
                    } 
          echo $options;

         </select></div> 
```

# c++ - 向量 不允许。为什么是对 允许吗？

> ID：13768089
> 
> 赞同：6
> 
> 时间：2012-12-07T17:30:41.107
> 
> 标签：c++

> **可能重复：**
> [为什么 stack<const string> 不能在 g++ 中编译？](https://stackoverflow.com/questions/13213978/why-does-stackconst-string-not-compile-in-g)

[另一个问题的答案](https://stackoverflow.com/a/922455/1859852) 解释了为什么我们（据说）不能拥有`const`对象容器。例如，这是不允许的：

```
vector<const int> v; //not allowed 
```

但是为什么 a`pair`允许第一个对象是`const`？这确实是对象`pair`内部的 s所发生的情况。`map`我错过了什么吗？

对此现象的详细和直观的解释将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T17:32:01.100

我认为主要原因是因为`std::pair`不会重新分配对象，所以它们不必是可分配的。

**更新：**

实际上 vector 是唯一需要可分配对象的容器。这是因为根据标准向量，它的元素必须有一个连续的存储位置。因此，如果没有空间添加更多对象，vector 将不得不将其数据重新分配到另一个地方（因此使用对象的可分配属性）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T17:34:09.873

`std::pair`如果您尝试分配它，只需要它的内容是可分配的。但是，`std::vector`始终需要分配以进行重新分配。

# android - Android SQLiteDatabase 被锁定

> ID：13768090
> 
> 赞同：1
> 
> 时间：2012-12-07T17:30:43.650
> 
> 标签：android, database, sqlite, android-asynctask

每当我使用数据库时，我都会创建一个新的 SQLOpenHelper 实例。

我有一个屏幕 A，它有一个在 onResume () 中使用 readableDatabase () 的方法。在屏幕 B 中，当它启动一个调用使用 writeableDatabase() 的方法的 AsyncTask 时。

如果线程在关闭显示屏 B 后结束，则 A 无法访问数据库。所以我得到 SQLitedatabase 被锁定。

那我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:35:22.637

在尝试建立另一个连接或共享连接之前，您需要释放数据库。

# javascript - Fancybox YOutube 视频继续播放

> ID：13768095
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:30:50.653
> 
> 标签：javascript, fancybox

不知道有什么问题，但在 FF 中，视频一直在播放。当您在fancybox 之外单击时，所有其他浏览器都会关闭……嵌入的Youtube 视频也将停止播放。Firefox 似乎忽略了这一点。我究竟做错了什么？

```
 $(document).ready(function() {
$(".fancybox").fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none',
     callbackOnClose: function() {
     $("#fancy_content").html(" ");
     } 
});

    });
    $("#fancy_content").empty();

    $(document).ready(function() {
        /*
         *  Simple image gallery. Uses default settings
         */

        $('.fancybox').fancybox();

        // Change title type, overlay closing speed
        $(".fancybox-effects-a").fancybox({
            helpers: {
                title : {
                    type : 'outside'
                },
                overlay : {
                    speedOut : 0,
                    opacity: 0.3,
                    css: {'background-color': '#cdc3b7'}
                }
               }
                 });
                 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:08:19.993

*   您不必`.fancybox`两次初始化同一个选择器。换句话说，您不必这样做：

    ```
    $(".fancybox").fancybox({
       // options
    }); 
    ```

    ... 然后 ：

    ```
    $(".fancybox").fancybox(); 
    ```

*   `#fancy_content`不是有效的花式框选择器（至少不适用于 v2.x）

*   `$("#fancy_content").empty();`在`.ready()`方法之外。无论如何都是无用的，如上所述。

*   `callbackOnClose`不是有效的 API 选项（`afterClose`如果需要，请改用）

*   该脚本在跨浏览器上运行良好：

```
 $(".fancybox").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
        /*
        // yo don't need this
        ,
        callbackOnClose: function() {
          $("#fancy_content").html(" ");
        }
        */
    }); 
```

...正如您在此**[JSFIDDLE](http://jsfiddle.net/Z5GBJ/)**中看到的那样。确保使用 FF 对其进行测试（适用于我的 FF v17.0.1）

# jquery - 在鼠标悬停时用淡入淡出交换图像/在鼠标移出时淡出

> ID：13768098
> 
> 赞同：0
> 
> 时间：2012-12-07T17:30:53.027
> 
> 标签：jquery, mouseover, fadein, fade, fadeout

标题说明了一切......我已经制作了这个教程[创建-a-jquery-mouseover-fade-effect](http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/)

但我想在同一个应用程序中应用 3 次......使用不同的图像，当我尝试这样做时，他变得不协调，第二个图像排在第一位......

```
 <div class="AccordionPanelTab"><img src="images/tab_19.jpg" width="960" height="144" alt="zipperLogo" class="a" /><img src="images/main_over_06.jpg" width="959" height="144" alt="zipperHover" /></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:16:06.733

**更新**

干得好

工作[**小提琴**](http://jsfiddle.net/videsignz/6y8cA/3/)

```
$(".fadehover").on({

    mouseenter: function() {

        $(this).find('img').eq(0).stop().animate({"opacity": "0"}, "slow");

    },

    mouseleave: function() {

        $(this).find('img').eq(1).stop().animate({"opacity": "0"}, "slow");

    }

}); 
```

# architecture - 如何在 UML 通信图上使用呼叫消息链接？

> ID：13768105
> 
> 赞同：1
> 
> 时间：2012-12-07T17:31:14.047
> 
> 标签：architecture, uml, diagram, visual-paradigm

我想这是`UML`个问题。我对它很陌生。我正在画`Visual Paradigm`。

我创建了通信图并绘制了两个`LifeLine`矩形。现在我想画一个矩形在另一个矩形内调用一个函数。但是当我选择`Call Message`工具并将鼠标悬停在其中一个矩形上时，会出现红色禁止标志。最后，我无法将矩形与所需的链接连接起来。

我的问题是如何`Call Message`正确使用 UML 中的链接？应该用它连接其他对象还是先以某种方式设置连接对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:09:06.933

您可以按如下方式设置工作流程： 1) 使用左侧的图表工具栏创建一个 Actor 2) 创建一个生命线矩形，通过将鼠标悬停在 Actor 顶部并按下并拖动生命线（message-生命线箭头，向右 45 度） 3) 释放鼠标，现在适当移动黑色箭头（用于消息关联） 4) 选择此矩形并执行与步骤 2 相同的操作

您可以在开发 uml 图时设置消息关联

# javascript - 如何阻止 require.js 一个文件优化从最小化一些路径？

> ID：13768108
> 
> 赞同：1
> 
> 时间：2012-12-07T17:31:19.750
> 
> 标签：javascript, requirejs

我正在使用`r.js`以下命令为我的应用程序创建一个文件脚本：

```
r.js -o ./scripts/require.build.json baseUrl=public/js/ name=main out=main.min.js 
```

是 require.build.json 有以下选项：

```
{
    "paths": {
        "jquery": "plugins/jquery.1.8.2.min",
        "underscore": "plugins/underscore.1.4.2.min",
        "backbone": "plugins/backbone.0.9.2.min"
    },
    "shim": {
        "backbone": {
            "deps": ["jquery", "underscore"],
            "exports": "Backbone"
        },
        "underscore": {
            "exports": "_"
        }
    }
} 
```

我的`main`文件只是一个简单的测试用例：

```
/*jslint browser: true */
/*global define: false*/
define(function (require) {
    "use strict";

    var $ = require("jquery"),
        Backbone = require("backbone");

    window.console.log($);
    window.console.log(Backbone);
}); 
```

我想知道，如何避免缩小我的依赖项（jQuery、 `r.js`Underscore和 Backbone）**已经缩小**的文件以节省时间？

# wpf - 是否可以创建 WPF CollectionViews 来汇集多列数据

> ID：13768109
> 
> 赞同：0
> 
> 时间：2012-12-07T17:31:21.997
> 
> 标签：wpf, data-binding

我有大约十几个 ObservableCollections 保存有日期、单曲和整数的对象。所有集合的长度相同，并且同时添加和删除数据。ObservableCollections 之一是主要的，在引用其他时需要。

有没有办法使用 CollectionViews 将这些 ObservableCollections 中的 2 个组合在一起，使它们看起来像一个 ObservableCollection，当数据绑定到数据网格和/或图表时，它们具有所有原始列的总数？如果是这样，有人有例子吗？

我发现的所有内容都显示了来自两个来源的数据通过在另一个之上添加一个我称之为堆栈数据的数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:33:24.937

不漂亮，但我有一个类似的应用程序。
有一个具有 5 个基本属性的类，然后是可变数量的字段。
我放在列表中的字段。

可以将行绑定到集合，但不能绑定到列。

因此，我使用 ListView Gridview 在后面的代码中构建列。
将列绑定到 Field[0]、Field[1]、...

在您的情况下，您可以拥有带有基本属性和属性列表的基类 Bclass

```
In your List<Fields> you just iterate the properties of the List<ExtensionClass>  

Clearly the List<Bclass> needs to all have List<Extension> class with the same length in every item of the binding breaks. 
```

# vba - 使用 vba 取消选择数据透视表中的所有项目

> ID：13768110
> 
> 赞同：7
> 
> 时间：2012-12-07T17:31:22.370
> 
> 标签：vba, excel

有人可以快速解释在新创建的数据透视表中取消选择所有项目的方法，以便我可以返回并只选择一两个项目吗？我尝试了以下方法：

```
.PivotItems("(Select All)").Visible = False 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T17:53:22.320

这可能是您可以获得的最接近您想要的东西：

```
Dim i As Long
.PivotItems(1).Visible = True
For i = 2 To .PivotItems.Count
    .PivotItems(i).Visible = False
Next 
```

这将使第一个选项成为唯一选择的选项（假设它在指向枢轴字段的 a 内）。如果您事先知道自己想要什么...进行相应的修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T14:27:17.110

我发现遍历每个数据项需要花费大量时间，如果您想过滤数据透视表中的单个项目而不遍历所有项目，您可以使用以下代码：

```
ActiveSheet.PivotTables("Your Pivot Name").PivotFields("Your Field Name").ClearAllFilters
ActiveSheet.PivotTables("Your Pivot Name").PivotFields("Your Field Name").PivotFilters.Add _
    Type:=xlCaptionEquals, Value1:="Your string here" 
```

这基本上是一个标签过滤器，但它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T17:55:56.487

检查以下内容。选择特定字段名称的数据。请注意，默认情况下您必须至少选择一项。并且不要忘记，如果要隐藏项目，*只能隐藏数据透视表字段中的连续项目。*也许在页面加载、工作表打开或任何其他子触发器时，您可以根据特定字段选择要选择的特定项目。然后让您的代码继续执行其他任何操作。

```
Sub specificItemsField()
Dim pf As PivotField
Dim pi As PivotItem
Dim strPVField As String

strPVField = "Field Name"
Set pt = ActiveSheet.PivotTables(1)
Set pf = pt.PivotFields(strPVField)
Application.ScreenUpdating = False
Application.DisplayAlerts = False

On Error Resume Next
    pf.AutoSort xlManual, pf.SourceName
     For Each pi In pf.PivotItems
         pi.Visible = True
     Next pi
    pf.AutoSort xlAscending, pf.SourceName

Application.DisplayAlerts = True
Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T09:42:49.930

这就是我为自定义过滤器选择所做的事情。由于双循环，可能会更慢。

```
Dim toSelect(1 To 3) As String

toSelect(1) = "item1"
toSelect(2) = "item2"
toSelect(3) = "item3"

For Each pvItem In objField.PivotItems
    For Each st In toSelect
        If pvItem.Value = st Then
            pvItem.Visible = True
            Exit For
        Else
            pvItem.Visible = False
        End If
    Next
Next 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-03T17:49:13.390

好。

因为你没有如何隐藏所有，因为，总是你需要有 1 个项目可见

我这样做：

我开始隐藏第一个字段，在转到下一个字段之前，我显示我需要可见的所有字段，然后，我转到第二个项目，隐藏，然后再次显示我想要的所有项目，依此类推。然后，任何字段都将始终可见，并且不会有错误。

循环之后，我再次尝试显示我想要的所有字段。

使用 ActiveSheet.PivotTables("TablaD2").PivotFields("Entity")

```
 Dim i As Long

    For i = 1 To .PivotItems.Count

    .PivotItems(i).Visible = False

    .PivotItems("ARG").Visible = True
    .PivotItems("BRL").Visible = True
    .PivotItems("GCB").Visible = True
    .PivotItems("MEX").Visible = True
    Next
    .PivotItems("ARG").Visible = True
    .PivotItems("BRL").Visible = True
    .PivotItems("GCB").Visible = True
    .PivotItems("MEX").Visible = True

End With 
```

# c# - 将项目添加到 radlistbox

> ID：13768114
> 
> 赞同：1
> 
> 时间：2012-12-07T17:31:50.397
> 
> 标签：c#, asp.net, telerik

我正在尝试将 FileInfo 中的项目添加到我的 RadListBox 中，虽然我无法做到，但我尝试将文件转换为 RadListBoxItem 对象，但我收到错误消息，它无法将字符串转换为 radlistboxitem。有人可以阐明一点吗？谢谢。

```
 DirectoryInfo dir = new DirectoryInfo(Path.GetFullPath(fp));
                lb_Files.Items.Clear();
                foreach (FileInfo file in dir.GetFiles())
                {
                    RadListBoxItem rlb = new RadListBoxItem();
                    rlb = (RadListBoxItem)file.ToString();
                    //radListBox
                    lb_Files.Items.Add(rlb.ToString());
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:42:11.120

试试这个

```
DirectoryInfo dir = new DirectoryInfo(Path.GetFullPath(fp));
lb_Files.Items.Clear();
foreach (FileInfo file in dir.GetFiles())
{
   lb_Files.Items.Add(new RadListBoxItem(file.ToString(), file.ToString()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:40:13.740

不，您不能将`String`对象转换为 a `RadListBoxItem`，您必须`RadListBoxItem`使用该字符串作为您的 Value 和 Text 属性来创建 a ：

所以替换这个：

```
 RadListBoxItem rlb = new RadListBoxItem();
 rlb = (RadListBoxItem)file.ToString();
 //radListBox
 lb_Files.Items.Add(rlb.ToString()); 
```

有了这个：

```
lb_Files.Items.Add(new RadListBoxItem
{
     Value = file.ToString(),
     Text = file.ToString()
}); 
```

# python - UPS API 错误代码 9370701

> ID：13768118
> 
> 赞同：0
> 
> 时间：2012-12-07T17:31:55.857
> 
> 标签：python, xml, api, soap, ups

我正在使用 UPS Shipping API 构建一个 python 应用程序。在发送请求（见下文）时，我不断收到以下错误：

```
UPS Error 9370701: Invalid processing option. 
```

我不确定这意味着什么，并且 API 文档中没有更多信息。有人可以帮我弄清楚这里出了什么问题，或者提供有关此错误原因的更多信息。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://www.ups.com/XMLSchema/XOLTWS/Common/v1.0" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:security="http://www.ups.com/XMLSchema/XOLTWS/UPSS/v1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns2="http://www.ups.com/XMLSchema/XOLTWS/FreightShip/v1.0" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header>
      <security:UPSSecurity>
         <security:UsernameToken>
            <security:Username>winkerVSbecks</security:Username>
            <security:Password>myPassword</security:Password>
         </security:UsernameToken>
         <security:ServiceAccessToken>
            <security:AccessLicenseNumber>myLicenseNumber</security:AccessLicenseNumber>
         </security:ServiceAccessToken>
      </security:UPSSecurity>
   </SOAP-ENV:Header>
   <ns1:Body>
      <ns2:FreightShipRequest>
         <ns2:Request>
            <ns0:RequestOption>1</ns0:RequestOption>
            <ns0:RequestOption>Shipping</ns0:RequestOption>
         </ns2:Request>
         <ns2:Shipment>
            <ns2:ShipFrom>
               <ns2:Name>Adobe</ns2:Name>
               <ns2:Address>
                  <ns2:AddressLine>560 Front St. W</ns2:AddressLine>
                  <ns2:AddressLine></ns2:AddressLine>
                  <ns2:City>Toronto</ns2:City>
                  <ns2:StateProvinceCode>ON</ns2:StateProvinceCode>
                  <ns2:PostalCode>M5V1C1</ns2:PostalCode>
                  <ns2:CountryCode>CA</ns2:CountryCode>
               </ns2:Address>
               <ns2:Phone>
                  <ns2:Number>6478340000</ns2:Number>
               </ns2:Phone>
            </ns2:ShipFrom>
            <ns2:ShipperNumber>535T8T</ns2:ShipperNumber>
            <ns2:ShipTo>
               <ns2:Name>Apple</ns2:Name>
               <ns2:Address>
                  <ns2:AddressLine>313 Richmond St. E</ns2:AddressLine>
                  <ns2:AddressLine></ns2:AddressLine>
                  <ns2:City>Toronto</ns2:City>
                  <ns2:StateProvinceCode>ON</ns2:StateProvinceCode>
                  <ns2:PostalCode>M5V4S7</ns2:PostalCode>
                  <ns2:CountryCode>CA</ns2:CountryCode>
               </ns2:Address>
               <ns2:Phone>
                  <ns2:Number>4164530000</ns2:Number>
               </ns2:Phone>
            </ns2:ShipTo>
            <ns2:PaymentInformation>
               <ns2:Payer>
                  <ns2:Name>Spiderman</ns2:Name>
                  <ns2:Address>
                     <ns2:AddressLine>560 Front St. W</ns2:AddressLine>
                     <ns2:City>Toronto</ns2:City>
                     <ns2:StateProvinceCode>ON</ns2:StateProvinceCode>
                     <ns2:PostalCode>M5V1C1</ns2:PostalCode>
                     <ns2:CountryCode>CA</ns2:CountryCode>
                  </ns2:Address>
                  <ns2:ShipperNumber>535T8T</ns2:ShipperNumber>
                  <ns2:AttentionName>He-Man</ns2:AttentionName>
                  <ns2:Phone>
                     <ns2:Number>6478343039</ns2:Number>
                  </ns2:Phone>
               </ns2:Payer>
               <ns2:ShipmentBillingOption>
                  <ns2:Code>10</ns2:Code>
               </ns2:ShipmentBillingOption>
            </ns2:PaymentInformation>
            <ns2:Service>
               <ns2:Code>308</ns2:Code>
            </ns2:Service>
            <ns2:HandlingUnitOne>
               <ns2:Quantity>16</ns2:Quantity>
               <ns2:Type>
                  <ns2:Code>PLT</ns2:Code>
               </ns2:Type>
            </ns2:HandlingUnitOne>
            <ns2:Commodity>
               <ns2:CommodityID>22</ns2:CommodityID>
               <ns2:Description>These are some fancy widgets!</ns2:Description>
               <ns2:Weight>
                  <ns2:UnitOfMeasurement>
                     <ns2:Code>LBS</ns2:Code>
                  </ns2:UnitOfMeasurement>
                  <ns2:Value>511.25</ns2:Value>
               </ns2:Weight>
               <ns2:Dimensions>
                  <ns2:UnitOfMeasurement>
                     <ns2:Code>IN</ns2:Code>
                  </ns2:UnitOfMeasurement>
                  <ns2:Length>1.25</ns2:Length>
                  <ns2:Width>1.2</ns2:Width>
                  <ns2:Height>5</ns2:Height>
               </ns2:Dimensions>
               <ns2:NumberOfPieces>1</ns2:NumberOfPieces>
               <ns2:PackagingType>
                  <ns2:Code>PLT</ns2:Code>
               </ns2:PackagingType>
               <ns2:CommodityValue>
                  <ns2:CurrencyCode>USD</ns2:CurrencyCode>
                  <ns2:MonetaryValue>265.2</ns2:MonetaryValue>
               </ns2:CommodityValue>
               <ns2:FreightClass>60</ns2:FreightClass>
               <ns2:NMFCCommodityCode>566</ns2:NMFCCommodityCode>
            </ns2:Commodity>
            <ns2:Reference>
               <ns2:Number>
                  <ns2:Code>PM</ns2:Code>
                  <ns2:Value>1651651616</ns2:Value>
               </ns2:Number>
               <ns2:NumberOfCartons>5</ns2:NumberOfCartons>
               <ns2:Weight>
                  <ns2:UnitOfMeasurement>
                     <ns2:Code>LBS</ns2:Code>
                  </ns2:UnitOfMeasurement>
                  <ns2:Value>2</ns2:Value>
               </ns2:Weight>
            </ns2:Reference>
         </ns2:Shipment>
      </ns2:FreightShipRequest>
   </ns1:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:37:21.687

去除

```
<ns0:RequestOption>Shipping</ns0:RequestOption> 
```

根据您的要求。货运 Web 服务仅允许数字请求选项。“1”代表地面，“2”代表空中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-30T20:24:31.723

如果您将 RequestOption 更新为“1”而不是 1，它应该可以工作。它对我有用。

注意：我在使用 rest/JSON 时遇到了这个错误。

# java - 保护 jvm 免受来自 java 插件的 OutOfMemoryException

> ID：13768121
> 
> 赞同：0
> 
> 时间：2012-12-07T17:32:16.537
> 
> 标签：java, out-of-memory, sandbox

有没有办法（除了从单独的 jvm 实例运行插件）来防止 java 插件通过有意/无意地占用堆并导致 OutOfMemoryException 而使 jvm 崩溃？

我有一个关键任务应用程序，并编写了一个新功能（插件）来排队用户请求。现在我已经限制了队列的大小，但是想要保护应用程序免受恶意/粗心的程序员的影响，他们可能会删除队列上的大小限制，或者只是注入创建大量对象的代码以导致 OutOfMemoryException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:20:58.117

保护自己免受表现不佳、错误或崩溃的应用程序的唯一方法是在单独的 JVM 中运行它并通过消息、rmi 或套接字与其通信。

# c++ - 使用 valgrind 的地图中的无效读取大小错误

> ID：13768123
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:32:25.620
> 
> 标签：c++, debugging, map, valgrind, segmentation-fault

我有这个用于填充表格的代码，但我不断收到分段错误。我无计可施，试图找出错误可能是什么。我的函数接受 2 个映射并遍历它们以查找公共字符串。它将这些公共字符串的 int 值放入一个表中，以计算出现公共字符串的次数。

```
myMap findTable(mapGraph * dbgraph1, mapGraph * dbgraph2)
{
typedef mapGraph::const_iterator iter;
typedef myMap::const_iterator mapiter;

iter it1 = dbgraph1->begin();
iter it2 = dbgraph2->begin();
int count =0;
myMap * newTable = NULL;

//iterating through the 2 samples of dbgraphs
while (it1 != dbgraph1->end() && it2 != dbgraph2->end())
{
    //a match is found for 2 strings
    if (it1->first == it2->first)
    {
        //the component ids of first sample
        int compdb1 = it1->second->comp;

        //the component ids of second sample
        int compdb2 = it2->second->comp;

        //inserting the component ids and counts in the map
        newTable->insert(make_pair(make_pair(compdb1, compdb2), count));
        count++;

        for (mapiter it = newTable->begin(); it != newTable->end(); it++)
        {
            printf("%i %i\t %i\n", it->first.first, it->first.second, it->second);
        }

        it1++;
        it2++;

    }

    //match not found
    else
        it1++;
        it2++;

}
printf("\nCLEAR\n");
return newTable;
} 
```

这是错误：

```
Address 0x10 is not stack'd, malloc'd or (recently) free'd
Invalid read of size 8
Process terminating with default action of signal 11 (SIGSEGV)
Access not within mapped region at address 0x10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:34:36.143

`newTable`是`NULL`：

```
myMap * newTable = NULL; 
```

并且之前从未分配给有效对象：

```
newTable->insert(make_pair(make_pair(compdb1, compdb2), count)); 
```

取消引用`NULL`指针是未定义的行为。要么`myMap`为 动态分配一个实例`newTable`：

```
myMap* newTable = new myMap(); // Remember to delete later. 
```

或使用堆栈分配的实例：

```
myMap newTable; 
```

这是一个错误：

```
//match not found
    else
        it1++;
        it2++; 
```

导致在`it2`循环的每次迭代中递增，并将导致在迭代器`++`上被调用。`end()`改成：

```
//match not found
    else
    {
        it1++;
        it2++;
    } 
```

或者为了简化代码，只需在循环中的一个位置递增迭代器，因为它们总是递增（在 的每个分支中`if\else`）。

# wcf - 在 hql 查询中选择多个 new() 对象

> ID：13768124
> 
> 赞同：0
> 
> 时间：2012-12-07T17:32:33.680
> 
> 标签：wcf, nhibernate, rest, hql, dto

我有一个关于 hql 语言的问题。我正在尝试在我的 WCF REST 应用程序上通过 hql 语法生成 DTO。我对第二个查询有疑问。它有什么问题？有没有其他方法可以达到相同的结果？

这很好用。

```
session.CreateQuery(@"select new EntityTypeDTO(t.ID, t.Title, assc.ID)
                            from crmEntityType t
                          left outer join t.Association as assc").List<EntityTypeDTO>(); 
```

这不起作用。

```
session.CreateQuery(@"select new EntityTypeDTO(t.ID, t.Title, assc.ID, new CustomFieldDTO(f.ID,f.EntityType,f.FieldType,f.Name,f.Value))
                            from crmEntityType t
                          join fetch t.Fields as f
                          left outer join t.Association as assc").List<EntityTypeDTO>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:17:37.850

好吧，`new Xxx(field1, field2, ...)`语法只是在查询中创建这些 DTO 的一种便捷方式。它不是一种完全成熟的编程语言，因此它很可能不支持`new`像你的`new EntityTypeDTO(..., new CustomFieldDTO(...))`.

您可以做的是将字段选择到 a 中`Object[]`并自己调用构造函数，例如：

```
List<Object[]> result = query.getResultList();

for( Object[] line : result ) {
  //this is just an example, the order depends on the field order in the select clause
  //and you'd need some casts/conversion
  new EntityTypeDTO(line[0], line[1], line[2], new CustomFieldDTO(line[3], ...));
} 
```

# c# - 从 C# 到 Vb.net 的正确 Linq 转换

> ID：13768127
> 
> 赞同：0
> 
> 时间：2012-12-07T17:32:52.547
> 
> 标签：c#, vb.net, linq

我正在寻找将此 C# Linq 代码准确转换为 VB.net。我尝试了许多工具将 C# 转换为 VB，但没有一个 VB 转换的语句返回正确的结果。

C＃

```
 var rows = GridView1.Rows.Cast<GridViewRow>().Where(a => a != row).ToList(); 
```

VB.net

```
 Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a IsNot row).ToList() 
```

该过程假设选择 Gridview 的行，不包括通过单击选择的行。所有行都返回，不排除任何行...

C＃

```
Button btnUp = (Button)sender;
GridViewRow row = (GridViewRow)btnUp.NamingContainer;
 // Get all items except the one selected
var rows = GridView1.Rows.Cast<GridViewRow>().Where(a => a != row).ToList(); 
```

VB.net

```
Dim btnUp As Button = DirectCast(sender, Button)
Dim row As GridViewRow = DirectCast(btnUp.NamingContainer, GridViewRow)
' Get all items except the one selected
Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a IsNot row).ToList() 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:44:15.797

试试这个：

```
Dim btnUp As Button = DirectCast(sender, Button)
Dim row As GridViewRow = DirectCast(btnUp.NamingContainer, GridViewRow)
Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a <> row).ToList() 
```

# javascript - 从字符串中提取嵌入的数字 - JavaScript Regex

> ID：13768129
> 
> 赞同：2
> 
> 时间：2012-12-07T17:32:54.713
> 
> 标签：javascript, regex

这涉及从还包含连字符的字符串中提取有符号数字的一般问题。

有人可以想出以下的正则表达式：

```
 "item205"             => 205  
 "item-25              => -25  
 "item-name-25"        => -25 
```

基本上，我们希望将数字提取到字符串的末尾，包括符号，同时忽略其他地方的连字符。

以下适用于前两个，但返回“-name-25”作为最后一个：

```
var sampleString = "item-name-25";
sampleString.replace(/^(\d*)[^\-^0-9]*/, "") 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T17:38:46.953

您可以`.match`改用：

```
"item-12-34".match(/-?\d+$/);  // ["-34"] 
```

正则表达式表示“可能的连字符，然后是一个或多个数字，然后是字符串的结尾”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T17:39:13.883

不要使用`replace`. 相反，使用`match`并编写您真正想要的正则表达式（因为这更容易）：

```
var regex = /-?\d+$/;
var match = "item-name-25".match(regex);
> ["-25"]
var number = match[0]; 
```

但是，关于您的正则表达式的一件事：在字符类中，您只能有意义地使用`^`一次（就在开头）将其标记为否定字符类。它不适用于每个单独的元素。这意味着您的字符类实际上对应于“任何不是`-`,`^`或数字的字符。

# c# - Button.OnCommand += new CommandEventHandler 导致保护级别错误

> ID：13768131
> 
> 赞同：4
> 
> 时间：2012-12-07T17:33:01.813
> 
> 标签：c#, asp.net

为什么下面的代码会导致以下错误：

System.Web.UI.WebControls.Button.OnCommand(System.Web.UI.WebControls.CommandEventArgs)' 由于其保护级别而无法访问

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    ...
    UpdatePanel updatePanel;
    ...
    Button moreButton = new Button();
    moreButton.ID = "moreButton";
    moreButton.Text = "More";
    updatePanel.ContentTemplateContainer.Controls.Add(moreButton);
    moreButton.CommandName = "More";
    moreButton.CommandArgument = department.ID + "|department";
    moreButton.OnCommand += new CommandEventHandler(getMoreInfoCommand_Click);
    ...
    updatePanelList.Add(updatePanel);
}

protected void getMoreInfoCommand_Click(Object sender, CommandEventArgs e) 
{

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T17:37:38.617

你应该使用

```
moreButton.Command += new CommandEventHandler(getMoreInfoCommand_Click); 
```

`OnCommand`是受保护的*方法*，`Command`而是公共*事件*。

# linux - 如何在基于 linux 的虚拟主机上安装 osqa

> ID：13768144
> 
> 赞同：0
> 
> 时间：2012-12-07T17:33:46.723
> 
> 标签：linux, osqa

如何在基于 linux 的虚拟主机上安装 osqa，有没有最简单的方法可以在基于 linux 的共享主机帐户上安装 osqa？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:19:57.033

[我发现最简单的方法是使用Turnkey Linux OSQA Virtual Appliance](http://www.turnkeylinux.org/osqa)部署到 EC2 云。或者您可以在内部网络中部署，使用 iso 来安装它。

# c - 将 EOF 作为 C 中的输入。

> ID：13768151
> 
> 赞同：1
> 
> 时间：2012-12-07T17:34:14.713
> 
> 标签：c

我想在 C 中打印 EOF 的值。

```
char ch =getchar() ; 
printf("%d",ch) ; 
```

当我输入 CTRL + Z （我在 Windows 中工作）时，这会正确打印值 -1。

尽管。

```
char ch ;
scanf("%c",&ch) ;
printf("%d",ch) ; 
```

错误地打印 126 。

这种异常行为的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:38:53.280

您还没有检查 scanf 的返回值。我敢打赌它是零：没有匹配的模式。

值“126”是 的未初始化值`ch`。

* * *

编辑：仔细检查[手册页](http://www.manpagez.com/man/3/scanf/)，返回值应该是`EOF`. 请注意，这是*返回*值，而不是写入`ch`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:38:00.940

是什么让你想到 scanf 会用 EOF 填充字符参数？

scanf 函数命中 EOF 并且它无法进行转换并返回。ch 的值是声明变量时堆栈上的随机值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T17:38:15.223

EOF 旨在与正在读取的文件中可能包含的任何值区分开来。

因此，当您从文件中读取并可能收到 EOF 时，您不应*使用*a`char`来保存该值。您应该使用`int`, 并且仅在您确认收到的*不是*EOF`char` *之后将结果转换为。*要获得正确的结果，请尝试以下操作：

 *```
int char;
ch = getchar();
printf("%d", ch); 
```

对于您的第二个示例，当您使用 读取数据时`scanf`，您可以通过检查其返回值来了解读取了多少（如果有）数据。如果遇到文件结尾，它将停止尝试转换输入，您将通过检查其返回值来了解有多少字段被成功转换。它不会尝试将 EOF 转换为变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T17:39:37.077

你应该检查scanf的返回码，它应该返回EOF。在这种情况下，您的 char 不受影响，因为未初始化可能是 126*

# c# - 在 Windows 应用商店应用程序中连接到 imap.gmail.com

> ID：13768157
> 
> 赞同：0
> 
> 时间：2012-12-07T17:34:34.243
> 
> 标签：c#, sockets, microsoft-metro, windows-runtime, imap

我正在为 Windows Store 应用程序编写课程，该应用程序可以连接到 imap.gmail.com、查找特定消息并从中下载电子邮件附件。我决定编写自己的课程，因为找不到任何适用于 Windows 应用商店的现成解决方案。

即使连接 imap 服务器也有问题，我使用 StreamSocket 并且无法理解，我做错了什么。这是我的代码：

```
public sealed class GmailAttachmentDownloader
{
    private HostName HostName;
    private StreamSocket Socket;
    private String AccessToken;
    private String LoginName;
    private DataWriter Writer;
    private DataReader Reader;

    public GmailAttachmentDownloader(String loginName, String accessToken)
    {
        HostName = new HostName("imap.gmail.com");

        LoginName = loginName;
        AccessToken = accessToken;
    }

    private async Task<bool> Connect()
    {
        Socket = new StreamSocket();
        try
        {
            await Socket.ConnectAsync(HostName, "993", SocketProtectionLevel.SslAllowNullEncryption);
        }
        catch
        {
            return false;
        }

        return true;
    }

    private async Task<bool> Write(String msg)
    {
        if (Socket == null)
            if (! await Connect())
                throw new Exception("Could not connect to imap.gmail.com");

        try {
            using (Writer = new DataWriter(Socket.OutputStream))
            {
                Writer.WriteString(msg);
                await Writer.StoreAsync();
            }
        }
        catch
        {
            return false;
        }
        return true;
    }

    private async Task<String> Read()
    {
        if (Socket == null)
            if (!await Connect())
                throw new Exception("Could not connect to imap.gmail.com");

        String data;
        using(Reader = new DataReader(Socket.InputStream))
        {
            Reader.InputStreamOptions = InputStreamOptions.Partial;
            await Reader.LoadAsync(1024);
            data = Reader.ReadString(Reader.UnconsumedBufferLength);
        }

        return data;
    }

    public async void Login()
    {
        String data;
        data = await Read();

        await Write("a1 AUTHENTCATE XOAUTH2 " + EncodeTo64("user=" + LoginName + "\x01auth=Bearer " + AccessToken + "\x01\x01\r\n"));
        data = await Read();
    }

    static public string EncodeTo64(string toEncode)
    {
        byte[] toEncodeAsBytes
            = System.Text.UTF8Encoding.UTF8.GetBytes(toEncode);
        string returnValue
            = System.Convert.ToBase64String(toEncodeAsBytes);
        return returnValue;
    }

    static public string DecodeFrom64(string encodedData)
    {
      byte[] encodedDataAsBytes
          = System.Convert.FromBase64String(encodedData);
      string returnValue =
         System.Text.UTF8Encoding.UTF8.GetString(encodedDataAsBytes, 0, encodedDataAsBytes.Count());
      return returnValue;
    }
} 
```

有人可以帮我吗？我尝试在网络和微软教程中搜索，我也发现[了这个](https://stackoverflow.com/questions/12783337/connecting-to-imap-via-streamsocket-in-winrt-c-sharp)问题，但它对我没有多大帮助。

**UPD：**对不起，我在谷歌搜索异常后，发现问题出在杀毒软件中，当我关闭杀毒软件后一切正常。如此不同的问题：如何处理它？我不想告诉我的朋友“关闭你的杀毒软件，这样我的程序才能运行”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:44:03.400

好吧，您的防病毒软件似乎在那里有防火墙。如果它阻止了您的应用程序并且您不希望它被阻止，则说明它配置错误。就那么简单。

此外，您应该知道，杀毒软件在很大程度上只是为了给您一种模糊的温暖感觉，并且 - 在公司环境中 - 避免在发生任何事情时被起诉。最后，它并不能真正保护你免受恶意攻击。只是在说... ;）

# c# - 将格式化的 XML 输出从存储过程写入文件

> ID：13768170
> 
> 赞同：0
> 
> 时间：2012-12-07T17:35:27.663
> 
> 标签：c#, sql-server, xml

在这里发布问题和（一个）答案，看看是否有人有更好的解决方案......

我正在尝试将格式化的 XML 输出从存储过程写入文件。我的第一次尝试是这样的：

```
// the actual command is a stored procedure that returns an XML document, but use this for demo purposes
var xmlCommand = new SqlCommand("SELECT 1 as ID, 'asdf' as Name FOR XML PATH, ROOT('MyData')", conn);
File.WriteAllText("file1.xml", (string)xmlCommand.ExecuteScalar()); 
```

这很好很短，但是生成的文件将所有内容都塞在一行中：

```
<MyData><row><ID>1</ID><Name>asdf</Name></row></MyData> 
```

我希望它的格式很好：

```
<MyData>
  <row>
    <ID>1</ID>
    <Name>asdf</Name>
  </row>
</MyData> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:35:27.663

一种方法是使用 XMLDocument 和 XMLTextWriter。

```
using (XmlReader reader = xmlCommand.ExecuteXmlReader())
{
    XmlDocument dom = new XmlDocument();
    dom.Load(reader);

    var settings = new XmlWriterSettings();
    settings.Indent = true;
    settings.OmitXmlDeclaration = true;

    using (var writer = XmlTextWriter.Create("file2.xml", settings))
    {
        dom.WriteContentTo(writer);
    }
} 
```

它完成了工作，但完成一项简单的任务似乎需要很多代码。

# php - 如何在 Zend 中显示图像数组？

> ID：13768176
> 
> 赞同：0
> 
> 时间：2012-12-07T17:35:44.767
> 
> 标签：php, ajax, image, zend-framework

我有一组图像作为从数据库中提取的字符串，我通过 ajax 调用将它们拉入浏览器。我已经设置了控制器操作，并且能够查看带有关联数据的图像数组，但是当我尝试通过迭代数组并在每个字符串之前使用标题来渲染图像时，只显示第一个图像。我假设这是因为浏览器无法确定每个图像字符串的长度，或者 Zend 先发送标头然后发送图像数据，我不确定。我尝试了多种封装、输出缓冲等方法，但均以 0 成功。

我们试图避免将这些图像保存在磁盘上，否则我只需存储路径和 id 并将其反映在视图助手中。这里有我想念的明显方法吗？或者可能是我不知道的 Zend 的一个功能来促进我正在尝试做的事情？

更新：我在下面添加了我最终得到的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:47:18.857

您不能通过一个`HTTP`请求返回更多图像。

在您的设置中，我可以想象以下解决方案：

*   返回更多图像的数据作为自定义结构 - 例如`json`对象，`XML`文档......并将它们放置在正确的`HTML`元素中，使用`JavaScript`，
*   将图像内联在页面`HTML`生成过程中`HTML`

可以有其他解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:30:50.923

您可以在 **.phtml 中使用它

```
<?php foreach($this->images as $image) :?>
  <img src="data:image/jpeg;base64,<?php echo base46_encode($image['code']) ;?>/>
<? endforeach; ?> 
```

或数据：图像/png 或数据：图像/gif

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:51:56.540

我最终选择了一个相当简单的解决方案；在同一个控制器中创建两个动作。第一个为图像构建标记，迭代从模型函数创建的数组，该函数为特定客户端/事件提取所有图像，这将产生：

```
<img src="/controller/action/imgKey/12345/" /> 
```

第二个动作是接受图片的资源请求，通过_request->getParam()获取imgKey；然后为每个图像提供标题和字符串。这使我能够利用已经在使用的用户身份验证和会话方案。也许这种方法对其他人有用。

# backbone.js - 在 Backbone Marionette 中加载数据的最佳实践是什么？

> ID：13768178
> 
> 赞同：3
> 
> 时间：2012-12-07T17:36:00.903
> 
> 标签：backbone.js, marionette

我看到的大多数示例在应用程序加载时都会加载整个数据集合。

我的第一个应用程序非常简单。I 菜单区域包含可点击文章列表，文章详细信息区域包含完整文章。如果我有一系列文章，我的数据最终可能会非常大。

如果在一个巨大的集合中加载所有东西不是要走的路，有没有更好的例子有人可以指出我如何延迟加载我的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:24:02.520

这与其说是一个木偶问题，不如说是一个关于应该引导哪些数据与不应该引导哪些数据的问题。

一般规则是：

如果您总是需要数据，无论屏幕上显示什么，引导它。如果您并不总是需要它，请不要引导它。

当然，您可以在其中争论一些细微差别，但通常效果很好。

至于使用 Marionette 引导数据，当它有意义时......该`Application.start`方法为此接受一个参数，并将其传递给所有初始化程序。

[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.md#starting-an-application](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.md#starting-an-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T07:38:31.713

个人经验中的一些注意事项：

*   加载所有数据通常是数据库的瓶颈，而不是客户端。如果您可以优化您的数据库，那么客户端可以轻松处理数百篇文章，甚至可能更多。

*   如果您希望您的应用程序最终也成为封装在 Cordova 或 WebWorks 中的 HTML5 移动应用程序，那么引导程序将不适用，您需要动态加载所有数据。

*   在移动设备上（浏览器或cordova 无关紧要），不渲染屏幕外元素比不加载它们更重要。当然，您仍然可以使用较少的内存，但是如果您渲染整个集合，那么渲染和滚动将是罪魁祸首，而不是内存。

*   在桌面浏览器上，预加载数据可提供更流畅的体验。即使您最初只加载前 10 篇文章，也要立即预取其余相关数据。

*   如果你的模型有很多“相关”的模型或数据，你可以使用[Backbone-Relation](https://github.com/PaulUithol/Backbone-relational) `fetchRelated`作为一个肮脏的黑客，但这种方法对于大多数用例来说效率太低了。

*   如果您计划在显示文章详细信息时动态加载/卸载与文章相关的数据，我建议您在应用程序对象或视图中明确管理它。如果您想缓存数据（并且应该），可以使用 Backbone 缓存应用程序。文章模型上的一个简单标志来指示数据是否已被获取，这足以管理获取/缓存。

*   如果您的数据是高度动态的，那么至少在最初为了保持简单，不要缓存而是每次都获取动态部分。

希望这可以帮助。如果您有更具体的问题，请更新您的问题或发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:51:43.913

我会[引导](http://ricostacruz.com/backbone-patterns/#bootstrapping_data)一个分页的文章集合（例如最近的 10 篇）。例如，当用户向下滚动时，我会加载接下来的 10 个或任何有意义的数字。网络上有这种技术的例子。

希望这可以帮助。

# c++ - 什么可能导致多线程环境中的“错误文件描述符”？

> ID：13768182
> 
> 赞同：3
> 
> 时间：2012-12-07T17:36:15.520
> 
> 标签：c++, c, linux, posix, file-descriptor

[这个问题在某种程度上类似于[坏文件描述符](https://stackoverflow.com/questions/6245477/bad-file-descriptor)，但它根本不一样。我知道这是“糟糕的问题”（也许是“过于本地化”），但我无法弄清楚，我现在没有任何想法。]

* * *

# 介绍

我有一个管理器线程，它启动了 75 个其他线程。这些线程中的每一个都做了很多事情，所以我将只描述相关的。

**请注意**：如果我只启动几个线程 - 例如 3 或 5 或 10，则不会出现此错误！这让我觉得，这是一些多线程问题，但似乎并非如此。您将在下一节中看到原因。

因此，在以下 2 种情况下，**有时**我会收到此错误`Bad file descriptor`：

* * *

# 情况1

错误出现在`TinyXML`

有一个 xml 文件，所有线程都需要它。所有这些线程都`TinyXML`用于解析文件。所有这些线程都以**只读方式使用此文件！**（我知道这可以优化，但无论如何）。

所以，导致`Bad file descriptor`错误的代码是这样的：

```
// ...
// NOTE: this is LOCAL, other threads do NOT have access to it
TiXmlDocument   doc;
doc.LoadFile( filename );

// and here's the LoadFile:
bool TiXmlDocument::LoadFile( const char* _filename, TiXmlEncoding encoding )
{
    //...
    FILE* file = fopen( value.c_str (), "rb" ); 
    if ( file )
    {
        // this IS executed, so file is NOT NULL for sure
        bool result = LoadFile( file, encoding );
        //...
    }
    //...
}

bool TiXmlDocument::LoadFile( FILE* file, TiXmlEncoding encoding )
{
    // ...
    long length = 0;
    fseek( file, 0, SEEK_END );
    // from the code above, we are SURE that file is NOT NULL, it's valid, but
    length = ftell( file ); // RETURNS -1 with errno: 9 (BAD FILE DESCRIPTOR)
    // how is this possible, as "file" is not NULL and it appears to be valid?
    // ...
} 
```

* * *

# 案例2

这有点复杂。我已经删除了对返回值的检查，但我在我的真实代码中有它们，所以这不是问题

```
int hFileR = open( sAlarmFileName.c_str(), O_CREAT | O_RDONLY, 
                   S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH );
// hFileR is > 0 for sure, so success 

flock( hFileR, LOCK_EX ) /* the result is > 0 for sure, so success*/ 

// read the file into a string
while( (nRes = read(hFileR, BUFF, MAX_RW_BUFF_SIZE)) > 0 ) // ...

//Write new data to file: reopen/create file - write and truncate mode
int hFileW = open( sAlarmFileName.c_str(), 
                   O_CREAT | O_WRONLY | O_TRUNC, S_IRUSR | 
                   S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH );
// hFileW is > 0 for sure, so success

do
{
    int nWrtRes = write( hFileW, 
                        szText + nBytesWritten, nSize - nBytesWritten ); 
    // nWrtRes is always >= 0, so success
    nBytesWritten +=  nWrtRes;
}
while( nSize > nBytesWritten );

close( hFileW );    // this one is successful too

if( flock(hFileR, LOCK_UN) == -1 )
{
    // THIS FAILS and executes _Exit( FAILURE );
}

if( close( hFileR ) < 0 )
{
    // if the previous one do not fail, this one is successful too
} 
```

* * *

对不起，很长的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T19:21:15.747

要寻找的一件事是关闭同一文件描述符两次的代码。

在单线程程序中，这是一个无害的编程错误，因为第二个程序`close()`除了 return 什么都不做`EBADF`，而且很多代码也懒得检查`close()`返回值。然而，在多线程程序中，已关闭描述符的描述符编号可以在两次调用之间分配到另一个线程中`close()`，因此第二个`close()`将关闭来自另一个线程的不相关套接字。进一步读取和写入其他线程的描述符将导致“坏文件描述符”错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T14:52:00.473

**关于文件描述符理解的一些话：**

文件是全局资源。为了处理这种情况，使用（进程）全局索引：整数值，称为文件描述符。如果一个线程打开一个文件，这个打开的文件由索引引用。**该索引对于进程（而不是**线程）是唯一的。如果文件被关闭，文件描述符（整数索引）将不再使用，并且可以被进程（及其任何线程）重用。

**例子：**

进程中的任何线程第一次调用`open()`可能返回 3，第二次调用可能返回 4。

如果然后 3 关闭，则第 3 次调用`open()`可能会再次返回 3。

如果第一次调用由线程 1 完成，第 2 次由线程 2 完成，第 3 次由线程 3 完成，则很容易理解线程 1 不应再次关闭其文件描述符，因为 3 的值可能已经被回收并在由线程 3 使用，它将尝试访问无效的文件描述符，因为它可能已被`close()`线程 1 的第二次（错误）调用关闭。好吗？;-)

尝试设置一些示例代码，并检查/记录调用返回`open()`并分配为文件描述符的整数值，以了解其工作原理。

**注意**：

This also might refer to `stdin`, `stdout` and `stderr`, the "predefined" file descriptors `0`, `1` and `2`. Under recent Linux closing `stdin` followed by a call to `int fd = open("myfoofile.bar", ...)` might very well return `0` as file descriptor `fd`. Anyhow, either the Kernel or the `glibc` is not able to handle such a `0` as expected. Obscure errors might occur using `lseek(fd, ...)` for example. Try it! ;->>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T18:26:12.503

如果应用程序是多线程的，如果某个线程关闭了文件，而另一个线程仍在尝试访问它，则可能会发生这种情况。

^(（因为文件描述符，如地址空间，对进程的所有线程是全局的和通用的）)

您可以`strace`用来了解系统调用的完成情况。

# r - 如何更改 ggplot2 中复杂填充的颜色？

> ID：13768184
> 
> 赞同：4
> 
> 时间：2012-12-07T17:36:19.307
> 
> 标签：r, ggplot2

我正在绘制一张地图，其中包含不同的疟疾寄生虫耐药性研究地点。研究地点的点的大小与采样的疟原虫数量相关，并且这些点的填充是从 0 到 1 的具有耐药性的疟原虫比例的梯度。以下代码显示了下面的地图：

```
###GENERATING AFRICA MAP###
africa = readOGR("/Users/transfer/Documents/Mapping Files/Africa Countries/Africa_SHP",    layer="dissolved")
#FIXING THE NON-NODED INTERSECTS#
africa = gBuffer(africa, width=0, byid=TRUE)
#CREATING DATA FRAME FOR GGPLOT#
africa.map = fortify(africa, region="ID")

###PLOTTING SPM.437###
#SCALING THE SAMPLE SIZE USING CUBE-ROOT#
size = d.spm.437$Tot437^(1/3)
#PLOTTING#
ggplot(africa.map, aes(x = long, y = lat, group = group)) + 
    geom_polygon(colour="black",   size=0.25, fill="white", aes(group=group)) +
    geom_point(data = d.spm.437, aes(x = long, y = lat, fill=Frc437, group=NULL, size=Tot437), 
        size=size, shape=21, colour="black", size=0.5) 
```

![在此处输入图像描述](../Images/077ef7cc78e30787349f618d590e2f1a.png)

我尝试使用颜色选项，但它不起作用：

```
ggplot(africa.map, aes(x = long, y = lat, group = group)) + 
    geom_polygon(colour="black",   size=0.25, fill="white", aes(group=group)) +
    geom_point(data = d.spm.437, aes(x = long, y = lat, colour="red", fill=Frc437, group=NULL, size=Tot437), 
        size=size, shape=21, colour="black", size=0.5) 
```

任何人都知道如何让填充的颜色显示红色的比例，较浅的为 0，较暗的为 1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:32:52.880

正如我在评论中提到的，我认为您对设置与映射美学有点困惑。

您将美学映射到`aes()`. 因此，`aes(color = var)`将颜色美学映射到变量 var，您会得到一个图例来显示颜色如何随 var 变化。如果您*将*之外的颜色设置`aes()`为单一值，那么您只是将所有点设置为单一颜色：`color = "red"`。

我怀疑你感到困惑的原因是你有`size=Tot437`inside of `aes()`，然后*既有* `size=size`又有`size=0.5`外部`aes()`。

最后，要更改调色板，您需要了解`scale_color_*`功能（以及`scale_fill_*, scale_size_*`等）。这是一个简单的示例，可以帮助您入门：

```
dat <- data.frame(x = rnorm(50),
                  y = rnorm(50),
                  f = runif(50))

library(ggplot2)
library(munsell)
cl <- mnsl(c("5R 2/4", "5R 7/10"))

ggplot(dat,aes(x,y,fill = f)) + 
    geom_point(size = 5,shape = 21) + 
    scale_fill_gradient(low = cl[1],high = cl[2]) 
```

我是怎么想出那种看起来很疯狂的颜色规格的？只是从前几行开始`scale_fill_continuous`，然后在 munsell 包中闲逛了一下。

*编辑*：我完全错过了你实际使用*的*`pch = 21`基本上是唯一的点形状，而`fill`美学是有意义的，所以我编辑删除了我对这个分数的评论。

# sql-server - 当在 SSMS 中运行相同的 SP 时，在 Visual Studio 中运行存储过程占用 3 倍空间时创建的事务日志

> ID：13768186
> 
> 赞同：1
> 
> 时间：2012-12-07T17:36:20.860
> 
> 标签：sql-server, visual-studio, logging, ssms

我们知道在 Sql Server 中创建了事务日志，我有一个存储过程，当它从 Visual Studio 运行时，创建的事务日志的大小是相同 SP 时的 3 倍（大约 150 GB）在 Sql Server Management Studio（大约 50 GB）中运行，我不需要这些事务日志。我的问题是：为什么大小有 3 倍的差异。？是否有可用的设置，以便不会创建这些日志.. 因为我不需要这些日志有没有技巧，这样我就可以做一些事情，使创建的日志超过特定大小，被下一个日志覆盖.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T15:34:14.463

您有查询的示例吗？甚至 50 GB 对于存储过程来说似乎也太大了。

顺便说一句 - 您需要日志，因为数据库是根据其中包含的信息更新的。

您应该能够更改存储过程，以便将更少的信息写入日志，或者让数据库使用 Checkpoint 命令定期将日志中的信息写入数据库。

我最近遇到了一个问题，即一系列格式不正确的语句填满了日志，重写查询帮助我减小了日志大小（并且 sp 运行得更快）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:39:22.340

假设这不是生产服务器，并且您永远不需要恢复到特定时间点......

[您可以将数据库的恢复模式设置为`simple`.](http://msdn.microsoft.com/en-us/library/ms189275.aspx)

```
ALTER DATABASE [YourDatabase] SET RECOVERY SIMPLE 
```

来自 MSDN：

> 自动回收日志空间以保持较小的空间需求，从根本上消除了管理事务日志空间的需要。

至于 Visual Studio 和 Management Studio 之间日志增长的差异......我的猜测是 Visual Studio 可能会多次运行存储过程，可能是为了收集元数据。我将分析有问题的数据库，并查看在每种情况下实际影响它的内容。

# iphone - 为 UItextview 键盘制作动画

> ID：13768188
> 
> 赞同：0
> 
> 时间：2012-12-07T17:36:42.557
> 
> 标签：iphone, ios, iphone-softkeyboard

ISSUE: UItextview 键盘开始动画化。

我正在做一个 iphone 应用程序。在这个应用程序中，我正在使用 UItextview。所以现在我将 [textview becomeFirstResponder] 用于激活 Uitextview 键盘。但是那个 uitextview 键盘变得动画了。现在我怎样才能避免动画。请一些人帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:51:21.783

如果键盘当前不在视图中，然后您调用`becomeFirstResponder`文本视图（或文本字段），则键盘将动画显示。没有任何动画是无法让键盘出现的。

# performance - 如何计算算法的成本有无限循环

> ID：13768192
> 
> 赞同：-7
> 
> 时间：2012-12-07T17:37:11.680
> 
> 标签：performance, algorithm, recursion, infinite-loop, analysis

我的算法有一个故意循环

程序通过递归调用每次重复自己

那么我该如何解释它的成本（成本分析）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:17:34.163

通常，循环并且不接受特定输入或产生特定输出的过程是根据它们完成迭代的速率来衡量的。在游戏和媒体应用程序中，通常会谈论每秒帧数 (FPS)。在其他嵌入式和实时应用程序中，周期时间可能是一个重要的性能指标。更高级别的指标，例如“每分钟的作业”或“最大队列延迟”也很重要。

# c# - 如何清理通过 DependencyInjection 创建的视图模型？

> ID：13768193
> 
> 赞同：2
> 
> 时间：2012-12-07T17:37:14.967
> 
> 标签：c#, ninject, mvvm-light

使用 Ninject 和 MVVMLight。使用 TransientScope 绑定到 viewmodel。

当视图消失时，视图模型会超出范围。

清理我的视图模型的触发器是什么...我有一些需要注销的已注册事件。

我可以在视图卸载事件上使用 EventToCommand，但我想学习如何使用 Ninject MVVMLight 方式进行操作 :) 我可以在任何地方找到零个示例，包括文档。

视图模型定位器

```
 public class ViewModelLocator
{

    //CONSTRUCTOR
    static ViewModelLocator()
    {
        Kernel = new StandardKernel(new DataViewsModule());
    }

    //PRIVATE FIELDS
    private static IKernel Kernel;

    //PUBLIC PROPERTIES
    public LiveDataViewModel LiveDataViewModel { get { return Kernel.Get<LiveDataViewModel>(); } }

    /// <summary>
    /// Cleans up all the resources.
    /// </summary>
    public static void Cleanup()
    {

    }
} 
```

忍者模块

```
 class DataViewsModule : NinjectModule
{
    public override void Load()
    {
        //View Models
        Bind<DataViewsViewModel>().ToSelf().InSingletonScope();
        Bind<LiveDataViewModel>().ToSelf().InTransientScope();
    }
} 
```

视图的构造函数：

```
 public LiveDataView()
    {
        InitializeComponent();
        Unloaded += (s, e) => ViewModelLocator.Cleanup();
    } 
```

所以这里是调用 ViewModelLocator Cleanup 方法的视图的卸载事件。我该如何清理这个瞬态视图模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:29:24.177

当一个对象绑定在 TransientScope 中时，这意味着它仅在需要时由 Ninject 激活，但 Ninject 不再跟踪该对象，因此它在您身边进行清理。

我建议创建一些自定义范围并制作您的*viewmodel* `IDisposable`。Ninject 将在范围内调用`Dispose()`该对象上的方法（不适用于瞬态范围，因为它实际上根本没有范围）。最好的做法是让持有一些资源的对象实现`IDisposable`，以便它们在工作完成后自行清理。

另请查看这个有趣的 Ninject 扩展：[https](https://github.com/ninject/ninject.extensions.namedscope/wiki) ://github.com/ninject/ninject.extensions.namedscope/wiki 。它提供了一些额外的范围实现。我建议你可以试试`InParentScope()`。

# java - 这些 ANTLR 警告是什么意思

> ID：13768201
> 
> 赞同：2
> 
> 时间：2012-12-07T17:37:41.760
> 
> 标签：java, parsing, antlr, antlr3

我有一个似乎有效但产生大量警告的语法。这些警告有多严重，有人可以就如何修复它们提供一些指导吗？

```
Warning 200
Decision can match input such as "LCURLY LPAREN" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input

Warning 200:
Decision can match input such as "LCURLY PLUS" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
Semantic predicates were present but were hidden by actions.

Warning 203
Input such as "Date" is insufficiently covered with predicates at locations: alt 1: line 346: at Date, al
t 2: line 346: at Date 
```

对于警告（200），禁用替代方案会产生什么影响？我认为主要的事情是潜在的 AST 可能具有不同的形状，具体取决于禁用哪个替代方案。

我不确定警告（203）的含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T12:19:22.330

您的语法可能不明确，因为不止替代路径可以解析相同的输入字符串。所以解析器将不知道哪个是“正确”的方式。您应该更正语法或语义谓词以防止歧义。

# build - TeamCity 两个构建使用相同的结帐目录

> ID：13768204
> 
> 赞同：10
> 
> 时间：2012-12-07T17:37:47.873
> 
> 标签：build, teamcity

是否可以在同一个目录上签出两个版本，请问如何做到这一点？

目前，两个不同的构建正在检出到两个不同的目录。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-09T19:16:51.140

您可以通过控制结帐目录位置来完成此操作。

首先，您需要将结帐目录定义为两个版本都可以知道的内容。在您的构建配置中，浏览到版本控制设置 -> 签出设置。将结帐目录设置更改为`Custom Path`。然后将提示您提供要签出源的目录。这可以是您想要的任何地方**，只要 TeamCity 在那里有写入权限。

接下来，您需要修改每个项目的签出规则（也在版本控制设置上），以便它们以相对于签出目录的根目录为目标的文件夹。您可以通过将规则设置为 来做到这一点`+:%some.repo.path%=>/%some.sub.folder%`。您可以在那里指定您想要的任何子文件夹。我们只需将所有内容签出到 Checkout Directory 根目录 ( `=>/`)。

如果两个项目都引用同一个 Checkout Directory，那么这种设置组合应该为您提供所需的控制和灵活性。

** 对于我们的结帐目录，我们使用参数化值`%teamcity.agent.work.dir%\%system.teamcity.projectName%\%branch%`。前两个参数是TeamCity系统参数，最后一个是我们自己定义的。在我们的系统上，这会解析为 G:\BuildAgent\work\$PROJECT\$BRANCH，这使得一切都保持整洁和可预测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-26T07:25:52.073

似乎 VCS 设置（一组 VCS 根和检出规则）对于这些构建配置是不同的，这就是 TeamCity 使用不同检出目录的原因。在这种情况下，我不建议强制服务器使用相同的目录。

假设您有两个配置 A 和 B，并且您将 TeamCity 配置为在同一目录中构建它们，但 A 和 B 具有不同的 VCS 设置。那么结账时应该怎么做呢？

例如，当构建 A 在代理上完成并且构建 B 在同一个代理上启动时，TeamCity 将不得不清理结帐目录下的所有源并再次获取它们。在构建 A 之后启动构建 B 时也会发生同样的情况。因此，这些干净的签出会导致速度变慢。

使用自动生成的结帐目录，服务器可以优化结帐性能和代理上的磁盘使用情况。使用自定义结帐目录的方法不是最佳的，并且不可扩展。尽可能避免它。

另见： http: [//confluence.jetbrains.com/display/TCD8/Build+Checkout+Directory](http://confluence.jetbrains.com/display/TCD8/Build+Checkout+Directory) [http://confluence.jetbrains.com/display/TCD8/Clean+Checkout](http://confluence.jetbrains.com/display/TCD8/Clean+Checkout)

# visual-studio-2010 - 调用 MiniDumpWriteDump() 时 Visual Studio 2010 使用哪些设置？

> ID：13768205
> 
> 赞同：0
> 
> 时间：2012-12-07T17:37:54.397
> 
> 标签：visual-studio-2010, winapi, visual-c++, visual-studio-debugging, crash-dumps

我一直在尝试优化我们的（C++）程序崩溃时生成的转储的大小。我想知道当您告诉 MiniDumpWriteDump() 从调试菜单进行转储时，是否有人知道它传递给了什么？

这将是减少转储大小的一个很好的起点。

谢谢。

# php - 数组中的两个 PHP 值

> ID：13768211
> 
> 赞同：2
> 
> 时间：2012-12-07T17:38:07.527
> 
> 标签：php, database, arrays, wordpress

我有一个选项字段的值：

从数据库中提取的值如下所示`$value = $this->value;`。

然后我可以像这样更新值：

```
<textarea id="'.$this->field['id'].'[]" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" class="'.$class.'" />'.esc_attr($value).'</textarea> 
```

我想要做的是在第一个下方添加另一个文本区域字段，并将这两个值保存在数据库中。我可以复制并粘贴上面的代码，它会更新我的数组。但是这些值不会显示在字段本身内部，该字段是空的。关于我应该做什么的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:33:48.207

感谢您的反馈，

我曾经`array_chunk`解决我的问题

```
if(isset($this->value) {
$chunk = array_chunk($value,2);

foreach($chunk as $k => $value){

<textarea id="'.$this->field['id'].'[]" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" class="'.$class.'" >'.esc_attr($value[0]).'</textarea>

<textarea id="'.$this->field['id'].'[]" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" class="'.$class.'" >'.esc_attr($value[1]).'</textarea>

}

} else {

<textarea id="'.$this->field['id'].'[]" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" class="'.$class.'" >'.esc_attr($value).'</textarea>

<textarea id="'.$this->field['id'].'[]" name="'.$this->args['opt_name'].'['.$this->field['id'].'][]" rows="6" class="'.$class.'" >'.esc_attr($value).'</textarea>

} 
```

# javascript - 拉斐尔，使对象不接收事件

> ID：13768213
> 
> 赞同：3
> 
> 时间：2012-12-07T17:38:13.303
> 
> 标签：javascript, raphael

我正在处理的对象后面有一个对象，我不想单击第一个元素，我想单击它下面的那个。

是否可以让 raphael 中的元素停止接收事件，但仍然可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:41:32.073

事件冒泡，所以它后面的对象仍然会收到点击事件。只需忽略前面对象上的事件。但是，如果“在前面”的对象不是“在后面”的对象的子对象，那将不起作用。当您像 Rapahel 那样拥有绝对定位的元素时，就是这种情况。您唯一的解决方案是使用 [http://robertnyman.com/css3/pointer-events/pointer-events.html](http://robertnyman.com/css3/pointer-events/pointer-events.html)

```
pointer-events: none; 
```

但这仅适用于最新的 FF 和 Chrome

或者使用像 Randy Hall 建议的黑客，通过隐藏被点击的元素并使用`elementFromPoint()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:49:08.307

我有一个解决方案，只是构建了类似的东西。您需要做的是在可见对象后面的对象上触发一个事件。本质上，您需要在画布后面的 dom 上触发事件吗？您需要制定跨浏览器的具体细节，但这应该可以帮助您入门

```
element.onclick = function (e){ //or however you're binding it
    // create some function so that canvas.style = display none, so that it's not in the way
    // then get the element at the click coordinates
    var ghost = document.elementFromPoint(e.pageX, e.pageY);
    //create an event
    var evt = document.createEvent('Event');
    evt.initEvent(e.type, true, true);
    //set x and y on evt to match the x and y that was used in the original click
    evt.pageX = e.pageX;
    evt.pageY = e.pageY;
    //do the event on the element
    ghost.dispatchEvent(evt);
    // create some function to reshow the canvas. 
} 
```

或者，如果您尝试在画布上单击特定元素后面的内容，则可以隐藏该元素。或者，如果您在事件发生后不需要它，您可以完全销毁画布而不是隐藏它。

# jquery - 在 Ajax 调用中加载一个 div

> ID：13768217
> 
> 赞同：1
> 
> 时间：2012-12-07T17:38:26.433
> 
> 标签：jquery, asp.net-mvc, telerik

我正在使用 ASP.NET MVC telerik 控件发布 AJAX 调用以重新加载页面。但我只想在页面中部分加载 div。我怎样才能做到这一点？

```
$('#AddInventory').ajaxForm({
beforeSubmit: function () {

    showWaitSlider("Please wait while uploading files. This may take a few moments.");
    return true;
},
success: function (data) {
    hideWaitSlider();
    location.reload();

},
error: function (xhr, status, err) {
    hideWaitSlider();
    alert(xhr.responseText);
},
dataType: 'json' 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:40:48.823

`data`在成功函数中应该返回响应 HTML，您可以对其进行解析以获取您的 div。

```
//location.reload();
$("#MyDiv").html($("#MyDiv", data).html); 
```

# git - 许多应用服务器之间的同步

> ID：13768218
> 
> 赞同：0
> 
> 时间：2012-12-07T17:38:32.177
> 
> 标签：git, sync

我们有一个应用程序，其主要功能位于文件中。我们也有带有主分支和生产分支的 GIT 仓库。

该应用程序位于 6 台生产服务器上，前面有负载平衡服务器。主要问题是同步文件。

此时我们与文件有网络共享，所有服务器都在查看它。该解决方案存在网络负载问题（有超过 1000 个连接从共享中读取文件），因此速度非常慢。

我有几个解决方案：

1.  使用一些同步软件
2.  使用 git hooks 从本地 repos 获取更新并将它们拉到服务器上
3.  找到一些网络负载的解决方案

什么是最佳的？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:36:06.153

使用某种[持续集成服务器](http://en.wikipedia.org/wiki/Continuous_integration)怎么样？我不知道您的应用程序的详细信息，但通常 CI 服务器可以自动化测试并部署在应用程序服务器上。

根据您使用的语言，有一些 CI 服务器。根据我的经验，对于 JAVA 项目，[jenkins](http://jenkins-ci.org)是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:44:07.083

[Capistrano](https://github.com/capistrano/capistrano/wiki)专为此类代码部署而设计。它将站点的本地副本从版本控制更新到新目录（使用 Git，首先更新本地 repo 副本，因此速度非常快），当所有服务器都准备好使用新代码库时，翻转符号链接并可选择重新启动网络服务，以便为新版本的网站提供服务。如果任何机器在该任务中失败，它将回滚所有机器。

虽然它最初是在 ruby​​ on rails 网站上使用的，但它也被用于其他语言。我经常使用它，并且非常成功地用于跨多个服务器的基于 PHP 的站点。

# python - 在 Python 中将 str 更改为 int

> ID：13768220
> 
> 赞同：1
> 
> 时间：2012-12-07T17:38:45.193
> 
> 标签：python

我是 python 新手。我正在尝试制作一个小型电梯程序。

编码：

```
import time
elavator = True
# 0 is B floor // basement
elavatorFloors = [0,1,2,3,4,5]

while elavator == True:
    getLevel = input ("Which floor would you like to visit? ( 1 - 5) ")
    time.sleep(2)
    print "you're now at floor, " +int.getLevel 
```

我收到此错误： AttributeError: type object 'int' has no attribute 'getLevel' 除了将 str 更改为 int，我是否使用了任何不好的技术？我真的很想提高我的编程思维和代码编写能力。谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T17:41:05.847

`int()`是一种类型，所以要实例化它，你需要做`int(getLevel)`，而不是`int.getLevel`.

检查[文档](http://docs.python.org/3/library/functions.html#int)以获取示例等。

另请注意，这`getLevel`是一个奇怪的变量名称，因为它暗示它是一个给出级别的函数。一个更好的名字将是 just `level`。

还值得注意的是，`input()`将输入评估为 Python 代码（在 Python 2.x 中，在 3.x 中它的作用与`raw_input()`旧版本中的一样），所以`getLevel`已经是一个数字，尽管我建议使用它`raw_input()`，并保持你的转换从一个字符串到一个整数，因为它不允许任意执行代码，这要好得多。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T19:12:32.387

以下是修改后的示例代码：

```
import time
elevator = "false"
# 0 is B floor // basement
elavatorFloors = [0,1,2,3,4,5]
getLevel = input("Which floor would you like to visit? ( 1 - 5) ")
for x in elavatorFloors:
    if x == getLevel:
        time.sleep(getLevel)
        print "you're now at floor, " + str(getLevel)
        elevator = "true"
        pass
    else:
        pass
if (elevator == "false"):
    print "There is no floor: " +  str(getLevel) 
```

# asp.net-mvc - 密码保护 MVC 4 应用程序 - 适用于 Betatesters

> ID：13768225
> 
> 赞同：3
> 
> 时间：2012-12-07T17:38:52.303
> 
> 标签：asp.net-mvc, iis-7, web-deployment

您有哪些方法可以让客户在上线之前测试 mvc 网站/应用程序？

我有一个 asp.net mvc 4 Web 应用程序。beta.mydomain.com 和 public.mydomain.com - 在测试版中，只有拥有用户/密码的人才能访问。但是表单身份验证应该仍然有效。

*   最好的解决方案是能够将相同的代码部署到 beta 和 public。意味着，例如，不添加仅允许“管理员”用户访问的授权属性。

我目前最好的解决方案是：

*   在网站/应用程序的 IIS (7) 中，我只激活了标准验证
*   将 web.config 更改为 Have authentication mode="windows"
*   创建一个 Windows 用户并授予他对应用程序（目录）的访问权限

->>**问题是用户实际上已登录（意味着 User.IsAuthenticated 返回 true）** - 但应用程序内部使用表单身份验证。两者可以结合吗？

我发现了一些类似的问题，但没有真正的解决方案：

[https://serverfault.com/questions/175643/how-do-i-secure-a-net-mvc-website-prior-to-launch](https://serverfault.com/questions/175643/how-do-i-secure-a-net-mvc-website-prior-to-launch)

[密码保护 IIS 7 (.Net MVC 2) 中的目录](https://stackoverflow.com/questions/6524422/password-protect-a-directory-in-iis-7-net-mvc-2)

[给定文件夹 ASP.NET MVC 的 IIS 密码提示](https://stackoverflow.com/questions/6983220/iis-password-prompt-for-given-folder-asp-net-mvc)

[密码保护 IIS 7.5 中的 ASP.NET Web 应用程序](https://stackoverflow.com/questions/8975119/password-protect-asp-net-web-application-in-iis-7-5)

我已经阅读了很多关于这个主题的内容，无法相信这是不可能的。在为客户部署 alpha/beta 以在它上线之前对其进行测试时，您的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:37:34.303

如果您只是想确保有限的受众（例如测试用户）可以访问您的网站，最简单的方法是在现有身份**验证**之上添加**[基本](http://en.wikipedia.org/wiki/Basic_access_authentication)或[摘要身份验证。](http://en.wikipedia.org/wiki/Digest_access_authentication)**

`ActionFilterAttribute`如果您的部署场景（生产与登台等）需要保护，请将其实现为一个并将其添加到您的全局过滤器集合中：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    bool basicAuthenticationEnabled = true; // AppSettings etc.

    if (basicAuthenticationEnabled)
        filters.Add(new BasicAuthenticationAttribute());

    filters.Add(new HandleErrorAttribute())
} 
```

相应`BasicAuthenticationAttribute`类的实现可能如下所示：

```
public class BasicAuthenticationAttribute : ActionFilterAttribute
{
    private const string Realm = "MyRealm";
    private const string UserName = "MyUserName";
    private const string Password = "MyPassword";

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var authorizationHeader = filterContext.RequestContext.HttpContext.Request.Headers["Authorization"];

        if (authorizationHeader != null && authorizationHeader.StartsWith("Basic"))
        {
            var credentials = Encoding.ASCII.GetString(
                Convert.FromBase64String(authorizationHeader.Substring(6))
                ).Split(':');

            if (credentials[0].Equals(UserName) && credentials[1].Equals(Password))
            {
                base.OnActionExecuting(filterContext);
                return;
            }
        }

        // send require authentication
        var response = filterContext.HttpContext.Response;
        response .StatusCode = 401;
        response .AddHeader("WWW-Authenticate", String.Format("Basic realm=\"{0}\"", Realm));
        response .End();
    }
} 
```

无论如何，**我强烈建议使用摘要式身份验证**，因为它在通过网络发送密码之前将哈希函数应用于密码，这比发送明文的基本访问身份验证更安全。

你可以在这里找到一个`DigestAuthorizationAttribute`类的实现和更多信息：

*   [摘要式身份验证——只要简单就足够了](http://datatoknowledge.com/2012/09/28/digest-authenticationwhen-simple-is-good-enough/)

# c# - 避免删除数据库文件

> ID：13768239
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:40:08.090
> 
> 标签：c#, winforms, security

我在 Windows 平台上用 C# 创建了一个软件。所以它使用一个访问数据库文件，它嵌入在应用程序的 bin 文件夹中。如何防止 windows 用户删除 windows exloprer 中的数据库文件？

他们可以导航到 bin 文件夹，然后选择数据库并按键盘上的删除...我该怎么办？我认为隐藏 bin 文件夹或包含数据库的文件夹是不安全的，因为他们可以取消隐藏...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:45:50.007

计算机属于用户。您不应该试图阻止用户对他们的计算机做他们想做的事情。

如果数据库是应用程序的关键部分，那么它与用户导航到程序文件夹并在主可执行文件上按删除没有任何不同 - 如果他们这样做，他们应该期望必须重新安装应用程序.

因此，如果您的程序发现数据库丢失，它可以显示一条很好的消息，例如“此应用程序不再处于可用状态。请重新安装该应用程序。”

# csv - 在 ActionScript 中验证 CSV 文件内容

> ID：13768248
> 
> 赞同：0
> 
> 时间：2012-12-07T17:40:48.617
> 
> 标签：csv, actionscript

在 actionscript 中验证包含电子邮件地址的 CSV 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:49:26.760

最好的方法是一次从一件事开始：

1.  [加载](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#includeExamplesSummary)并[解析](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#split%28%29)csv（或者您可以使用[库](http://code.google.com/p/csvlib/)）
2.  遍历数据并使用[正则表达式进行验证](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/RegExp.html#includeExamplesSummary)

您应该能够通过简单地使用链接的示例来组合一些代码。

# java - 将 Java 类逆向工程为 UML

> ID：13768250
> 
> 赞同：0
> 
> 时间：2012-12-07T17:41:00.307
> 
> 标签：java, netbeans, uml

> **可能的重复：**
> [netBeans 7.0 的 Java UML 自动生成](https://stackoverflow.com/questions/7038815/java-uml-automated-generation-for-netbeans-7-0)

我希望从我编写的 Java 代码中生成 UML 类。我已经查看了 ArgoUML，但它没有正确创建它。

我读过插件，但它们似乎都适用于 Eclipse。我正在使用 NetBeans v7.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:46:04.583

这可能是您正在寻找的插件？ [http://plugins.netbeans.org/plugin/1801/netbeans-uml](http://plugins.netbeans.org/plugin/1801/netbeans-uml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:49:51.910

我使用 [Visual范式](http://www.visual-paradigm.com/)的eclipse插件，但我相信还有一个netbeans版本。将整个代码写入 UML 只需单击一次，就可以非常可靠地完成。我认为它需要许可证，但也许有免费试用版。

# jquery - 带有显示的 div 中的 jQuery 轮播：无

> ID：13768254
> 
> 赞同：0
> 
> 时间：2012-12-07T17:41:22.030
> 
> 标签：jquery, css, carousel

我必须在我的网站上使用一个 jQuery 响应式轮播，其中包含 4 个显示的项目，一次滑动一个，等等。关键是：这个轮播被放置在一个 div 中`display:none`，它出现在单击带有 slideToggle 脚本的按钮（jQuery ）。好吧，当 div 出现时，轮播不会显示。没有什么！请注意，如果我删除`display:none`轮播显示完美。我尝试了一堆轮播插件（bxslider、caroufredsel、elastislide、flexslider），所有这些都发生了这个问题。然后……我要疯了！！

对不起对不起朋友，这里是代码：

**HTML**（这里是[FlexSlider](http://flexslider.woothemes.com)的例子，但其他插件的代码类似）

```
<div id="hiddenDiv">
  <div id="hiddenDivInner">
    <div class="flexslider">
      <ul class="slides">
        <li>...</li>
        <li>...</li>
        <li>...</li>
      </ul>
    </div>
  </div>
</div> 
```

**CSS**

```
#hiddenDiv{
    display:none;
    padding-bottom:10px;
    background: url("../img/xxx.gif") repeat left bottom #FFFFFF;
} 
```

**SCRIPT**（从站点复制粘贴。此脚本`$(document).ready`与其他脚本之间。已经尝试删除该`load`功能）

```
$(window).load(function() {
  $('.flexslider').flexslider({
    animation: "slide",
    animationLoop: false,
    itemWidth: 300,
    itemMargin: 5,
    minItems: 1,
    maxItems: 4
  });
});

$("#trigger").click(function () {
    $("#hiddenDiv").slideToggle(400, "easeInOutExpo");
}); 
```

我提醒您，使用此代码并**没有** `display:none`每个轮播都有效，如果我使用 slideToggle 按钮（#trigger）向上然后向下滑动 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:39:46.097

而不是`display: none;`用来隐藏你的轮播，使用`visibility: hidden;`

然后当你准备好展示它时，使用`visibility: visible;`

轮播在初始化时需要其容器具有尺寸。使用`display: none;`时，尺寸为零，并且轮播未正确初始化。

此外，`display: none;`将元素从流中取出，将元素`visibility: hidden;`保留在原位，但隐藏。这样做的好处是，当您使元素出现时，您周围的内容流不会被打断。

请参阅： [https ://developer.mozilla.org/en-US/docs/CSS/visibility](https://developer.mozilla.org/en-US/docs/CSS/visibility)

我看不到你所有的代码/布局，但也许可以试试这样的东西。修改以适应您的布局...

```
#hiddenDiv{
    visibility: hidden;
}

$("#trigger").click(function () {
    $("#hiddenDiv").css('visibility', 'visible');
}); 
```

* * *

**编辑：**

另一种可能性是仅在构建*后将*其隐藏，而不是在您的初始 CSS 中。

```
$(document).ready(function() {

    $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: false,
        itemWidth: 300,
        itemMargin: 5,
        minItems: 1,
        maxItems: 4
    });

    $("#trigger").click(function () {
        $("#hiddenDiv").slideToggle(400, "easeInOutExpo");
    });

    $("#hiddenDiv").css('display', 'none'); // the very last thing

}); 
```

CSS：

```
#hiddenDiv{
    padding-bottom:10px;
    background: url("../img/xxx.gif") repeat left bottom #FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:52:20.733

通过将 div 放在视口之外来“隐藏”它

```
#hiddenDiv {
    position:absolute;
    top: -3000px;
} 
```

该脚本将能够初始化，因为 div 没有隐藏，但它不会是可见的。

您可以在 onload 或触发器 onclick 中将 display 设置为 none 并将 position 设置为 relative

**编辑**绝对定位从文档流中删除元素，因此它的行为类似于 display:none。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T15:53:38.633

这是我的修复！我觉得是对的！

```
.hidden{
  visibility: hidden;
  position: absolute;
  width: 300px;
  overflow: hidden;
} 
```

# oracle - Toad 在 oracle 中运行创建函数

> ID：13768256
> 
> 赞同：1
> 
> 时间：2012-12-07T17:41:21.587
> 
> 标签：oracle, function, toad

我正在尝试使用 Toad 在 Oracle 中创建一个简单的函数，但是当您运行该脚本时，它会显示一条错误消息或成功。

我的功能：

```
CREATE OR REPLACE FUNCTION simple RETURN VARCHAR2 IS

BEGIN
  RETURN 'Simple Function';
END simple;
/ 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:44:08.637

你的功能是正确的，你可以用F5试试。

**v6 - v8.6**

*   执行语句（编辑器包含 1 条语句） -- F9 执行
*   光标处的语句 -- SHIFT F9 执行
*   多条语句——F5
*   在光标处编译 PL/SQL 对象 -- F9
*   在选项卡中编译所有 PL/SQL——不可能

**v9**

*   执行语句（编辑器包含 1 条语句）- F9
*   在光标处执行语句 - F9（带分隔符）或 SHIFT F9（不带分隔符）
*   执行多条语句——F5
*   在光标处编译 PL/SQL 对象 -- F9
*   在选项卡中编译所有 PL/SQL -- 在导航器“编译所有”中单击鼠标右键</li>

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:17:44.577

这也可能有帮助：

```
DECLARE
  v_retVal Varchar2(20);
--
  FUNCTION simple RETURN VARCHAR2 IS
  BEGIN
    RETURN 'Simple Function';
  END simple;
BEGIN
  v_retVal:= simple;
  dbms_output.put_line(v_retVal);
END;
/ 
```

# javascript - 给exports.new赋值好吗？

> ID：13768261
> 
> 赞同：0
> 
> 时间：2012-12-07T17:41:53.913
> 
> 标签：javascript, node.js, express

我正在尝试使用 Node.js 和 Express 做一些简单的事情。我有 Rails 背景，我正在模拟 Rails 应用程序使用的 RESTful 结构。对于我的控制器（或带 w/e 的路由），我想要这样的东西：

```
// routes/users.js
exports.new = function(req, res) {
  res.render('users/new', { title: 'New User' }
};

exports.show = function(req, res) {
  res.render('users/show', { title: 'View User' }
}; 
```

我想知道，这样做可以吗`exports.new = ...`。我知道这`new`是 Javascript 中的关键字，所以我不会确保不会有任何意想不到的后果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:52:55.077

使用`new`是好的。不应使用对象的默认扩展名（例如`__proto__`或）。`toString`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:56:07.143

您可能不会遇到任何问题。[这是旧浏览器](http://kangax.github.com/es5-compat-table/)上的一个问题（查看“作为属性名称的保留字”），但我怀疑 V8 会遇到这个问题，除非您计划为控制器提供服务。

如果你真的想安全地使用它，你总是可以将它们作为字符串传递给exports [“new”]之类的导出，或者使用coffeescript - 它会自动将[作为保留字的普通键转换为字符串](http://coffeescript.org/#objects_and_arrays)。

# c# - 文件读入二维数组

> ID：13768266
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:42:17.857
> 
> 标签：c#, arrays, visual-studio-2010

在类定义中

```
 public String[,] Sodoku_Gri = new String [9, 9];

    public void populate_grid_by_file()
    {
        TextReader tr = new StreamReader("data.txt");

        // read a line of text
        String store_data_from_file =  tr.ReadLine();
        for (int i = 0; i < Sodoku_Gri.GetLength(0); i++)
        {
            for (int j = 0; j < Sodoku_Gri.GetLength(1); j++)
            {

                Sodoku_Gri[i, j] = __________??
            }
        }
        tr.Close();
    } 
```

在data.txt里面写着“1--2--3--3-4-4-5---7-3-4---7--5--3-6--7-- -4--3-2--4-5-------3--2-6--7---4---4--3-" 我必须从文件中读取它并将它们放在 C# 中的二维数组中！在 C++ 中很容易。我是初学者！在 C++ 中，我们也应该在字符串中进行索引以访问字符串中的每个字符！我可以在我的二维数组中写入这些数据吗？这样 Sodoku_Grid[9,9] 中的 81 个空格都被文件中的数据填充了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:05:38.443

假设您的 Sodoku_Gri 是以这种方式声明的二维字符数组

```
char[,] Sodoku_Gri = new char[9,9]; 
```

并且该行包含数独游戏的已知数字的位置，则应以这种方式计算正确字符的索引

```
Sodoku_Gri[i, j] = store_data_from_file[i*9+j]; 
```

（顺便说一句，该行导致无效的数独模式）

**编辑：**然后在下面看到您的评论，如果 Sodoku_Gri 被声明为

```
string[,] Sodoku_Gri = new string[9,9]; 
```

那么您需要将字符串转换添加到索引字符

```
Sodoku_Gri[i, j] = store_data_from_file[i*9+j].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:55:40.060

1.  您可能想将您的移动`tr.ReadLine()`到最里面的循环中。
2.  您可以使用索引器访问字符串中的单个字符：

    `Sodoku_Gri[i,j] = store_data_from_file[j]`

所以在 C# 中也很容易。

# grid - 剑道 UI JSONP 网格不起作用

> ID：13768268
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:42:25.123
> 
> 标签：grid, jsonp, datasource, kendo-ui

我在下面有这个页面，其中 data:piece 看起来就像来自服务器的 JSONP，但它没有显示任何具有此概念证明的数据。

稍后我希望替换数据：部分

```
transport : {
read : "dwr/jsonp/DemoProxy/read/arg0",
dataType : "jsonp"
}, 
```

但让我们首先让下面的页面正常工作。

```
<html><body>
<script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
<script src="http://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js"></script>
<link href="styles/kendo.common.min.css" rel="stylesheet" />
<link href="styles/kendo.default.min.css" rel="stylesheet" />
    <div id="grid0"></div>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#grid0').kendoGrid({
                dataSource : {
                    data : [ {
                        "reply" : [ {
                            "location" : "dfg", "multi" : "dfg", "name" : "dfg"
                        }, {
                            "location" : "dfg", "multi" : "dfg", "name" : "dfg"
                        } ]
                    } ],
                    schema : {
                        data : "reply",
                        model : {
                            fields : {
                                location : {
                                    type : "string"
                                },
                                multi : {
                                    type : "string"
                                },
                                name : {
                                    type : "string"
                                }
                            }
                        }
                    },
                },
                columns : [ {
                    field : "location", title : "Location"
                }, {
                    field : "multi", title : "Multi"
                }, {
                    field : "name", title : "Name"
                } ]
            });
        })
    </script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:02:54.110

尝试`data`在`dataSource`as 中定义：

```
data  :{
    "reply":[
        { "location":"dfg", "multi":"dfg", "name":"dfg" },
        { "location":"dfg", "multi":"dfg", "name":"dfg" }
    ]
}, 
```

既然在`schema`你说数据在`reply`，`data`是一个`object`而不是一个`array`。实际上是`array`什么`reply`。

# jquery - 使用 Mansonry 路由 jquery 文件

> ID：13768271
> 
> 赞同：3
> 
> 时间：2012-12-07T17:42:31.023
> 
> 标签：jquery, ruby-on-rails

在我的小 Rails 应用程序上工作，利用 mansonry。它有效，但我在控制台中收到一堆 404 错误。我想我正确地路由了它们，但错误就在那里。

我可能正确和错误地路由它，但我找不到在哪里。我在 app > assets > javascripts 中有这些文件

这是我的索引页面中的代码：

```
<script src="js/jquery-1.7.1.min.js"></script>
<script src="jquery.masonry.min.js"></script>
<script src="javascripts/utils.js"></script> 
```

这是一条错误消息：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost:3000/path/to/jquery.masonry.min.js 
```

如果我错误地路由文件，我可以在哪里或如何找到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:46:06.367

/app/assets/javascripts 中的 js 文件可以通过 /assets/my.js 访问，但是您可以查看相关的视图辅助方法并阅读 rails 3 资产管道

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# postgresql - PostgreSQL 如何查找最后 n 分钟内的任何更改

> ID：13768274
> 
> 赞同：18
> 
> 时间：2012-12-07T17:42:54.860
> 
> 标签：postgresql, logging, changelog

我正在编写一个同步 PostgreSQL 和 MS SQL 服务器数据库的程序（并在此转换中添加一些更改）。拥有数百万条记录，需要很长时间，并且加载服务器非常糟糕`select *`；它还需要更多资源来解析未更改的记录并针对 MS SQL 服务器验证它们。

PostgreSQL 中是否有任何日志可以解析以找出在最后 n 分钟内发生的更改？这将允许我只选择那些我需要工作的记录；提高性能。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-07T17:50:43.147

**Postgresql，查找最近 n 分钟内的变化：**

Postgresql 不会自动存储添加/更新/删除行的日期或时间（如果您不希望这样处理时间戳，它真的会减慢速度）。

您必须自己做：向表中添加一个时间戳列。当您在表中插入一行时，让它将时间戳列更新为`current_timestamp`. 选择行时，使用 select 语句过滤时间戳大于 N 分钟前的位置，如下所示：

**获取时间戳大于日期的行：**

```
SELECT * from yourtable 
WHERE your_timestamp_field > to_date('05 Dec 2000', 'DD Mon YYYY'); 
```

**获取最近 n 分钟内更改的行：**

```
SELECT * from yourtable 
WHERE your_timestamp_field > current_timestamp - interval '5 minutes' 
```

## 演练示例

```
drop table foo; 
CREATE TABLE foo( 
    msg character varying(20), 
    created_date date, 
    edited_date timestamp 
); 
insert into foo values( 'splog adfarm coins', '2015-01-01', current_timestamp);
insert into foo values( 'execute order 2/3', '2020-03-15', current_timestamp);
insert into foo values( 'deploy wessels', '2038-03-15', current_timestamp);

select * from foo where created_date < to_date('2020-05-05', 'YYYY-mm-DD'); 
    ┌────────────────────┬──────────────┬────────────────────────────┐ 
    │        msg         │ created_date │        edited_date         │ 
    ├────────────────────┼──────────────┼────────────────────────────┤ 
    │ splog adfarm coins │ 2015-01-01   │ 2020-12-29 11:46:27.968162 │ 
    │ execute order 2/3  │ 2020-03-15   │ 2020-12-29 11:46:27.96918  │ 
    └────────────────────┴──────────────┴────────────────────────────┘ 

select * from foo where edited_date > to_timestamp(
    '2020-12-29 11:42:37.719412', 'YYYY-MM-DD HH24_MI_SS.US'); 
    ┌────────────────────┬──────────────┬────────────────────────────┐ 
    │        msg         │ created_date │        edited_date         │ 
    ├────────────────────┼──────────────┼────────────────────────────┤ 
    │ execute order 2/3  │ 2020-03-15   │ 2020-12-29 11:46:27.96918  │ 
    │ deploy wessels     │ 2038-03-15   │ 2020-12-29 11:46:27.969988 │ 
    └────────────────────┴──────────────┴────────────────────────────┘ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T18:27:06.713

您可以使用此处描述的基于触发器的方法：

[http://wiki.postgresql.org/wiki/Audit_trigger](http://wiki.postgresql.org/wiki/Audit_trigger)

基本上每个表更改都会触发一个触发器，该触发器可以在日志表中写入一些信息。

# eclipse - 修改后如何重新安装 Eclipse 插件？

> ID：13768278
> 
> 赞同：2
> 
> 时间：2012-12-07T17:43:16.090
> 
> 标签：eclipse, eclipse-plugin, eclipse-cdt

对不起这个问题，但我无能为力。总的来说，我离 Eclipse 插件开发和 Java 还很远。

Eclipse 版本 - 朱诺。

我需要自定义 Eclipse-CDT 的 DSF-GDB 插件。我下载了 CDT 源，创建了一个 PDE 项目，在那里导入了`org.eclipse.cdt.dsf.gdb`插件，修复了配置错误，以便可以构建项目。我进行了更改（删除了一条有害行）然后我通过导出插件`Export...->Deployable Plug-ins and Features`并获取了我的 JAR 文件。

我在 StackOverflow 上看到了一些关于安装此类插件的问题，所以我将我的 JAR 文件放在`dropins`文件夹下。但它似乎没有被包括在内，因为我既没有在首选发射器下`About Eclipse SDK->Installation Details->Plugins`也没有在首选发射器下观察到它（只有旧的发射器）。

我想可能是因为不能同时有两个插件实例。所以我试图从`plugins`目录下删除原始的。但这并没有帮助，DSF-GDB 集成完全消失了。

如何正确安装我的插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:29:45.073

Eclipse 知道每个已安装插件的当前版本，如果使用相同的插件版本重新安装插件，或者版本更改但只有次要元数据发生更改，Eclipse 有时不会进行更改。

所以试试：

*   增加插件的版本号
*   通过将其放入 dropins 重新安装
*   使用 -clean 选项重新启动 Eclipse

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:35:19.687

好吧，我已经做到了。感谢@Chris Gerken 提出调查方向的建议。

首先，我尝试听从 Chris 的建议，但没有帮助。然后我决定从另一边接近并使用*p2*平台重新安装插件。我使用了我的插件项目，创建了一个新功能项目和一个更新站点项目，以便我可以在*p2*对话框中选择它。我以这种方式安装插件失败，因为*p2*说不能同时存在同一个插件的两个版本。我想知道为什么它没有让我在我想要安装的一个和已经安装的另一个之间进行选择？

无论如何，我放弃了它并决定再次询问谷歌。我偶然发现了[这个 wiki 页面](http://wiki.eclipse.org/Equinox_p2_Getting_Started)，并了解到存在一个很棒的文件，名为`bundles.info`. `plugin/`它包含目录中应该选择的插件的完整列表。我在那里找到了我的插件，更改了它的版本，将 JAR 文件复制到`plugin/`目录中并运行`eclipse -clean`. 瞧！Eclipse 开始使用我的插件。

# c# - 如何在 WP Listbox 上保留视口（滚动位置）？

> ID：13768280
> 
> 赞同：2
> 
> 时间：2012-12-07T17:43:22.987
> 
> 标签：c#, windows-phone-7, xaml

我知道这个问题已经在这里问过了，但没有回答。所以我再次问，但提供我自己的调查，看看我们是否能解决这个问题。

**问题**

我们有一个数据绑定列表框。当我向数据源添加新元素时，我希望它保留视口（正在显示的元素）。这样，我可以在不改变视图的情况下添加新元素。

当前的 WP 行为是保留滚动位置（ScrollViewer.VerticalOffset 是常量）。这样，当您添加新元素时，它们都会下降。

**可能的解决方案**

我一直在挖掘这个，我有一些线索。

*   当列表不在顶部时禁用数据源刷新。这样，我们可以在不更改视口的情况下添加新项目。问题：当用户再次进入顶部时，所有新元素突然出现在列表顶部，从而失去连续性。

*   获取当前正在查看的项目，并`ScrollIntoView`在添加所有新元素后恢复它。起初这似乎是最好的选择，但相信我不是。首先，获取当前正在查看的项目并不容易：可以使用[LinqToVisualTree](http://www.scottlogic.co.uk/blog/colin/2010/03/linq-to-visual-tree/)完成，但并不准确（您只能猜测，视口缓冲区的大小不是恒定的）所以我们不会恢复用户之前的确切位置. 而且这个解决方案会“跳跃”：从用户的角度来看会有两个滚动事件，这并不好。

*   计算要添加的所有元素的垂直大小以补偿垂直偏移。这似乎是一个很好的解决方案（我目前正在调查它），但我担心它也会产生那种“跳跃”的效果。它将覆盖`PrepareContainerForItemOverride`Listbox 中的方法。当基本方法已经准备好容器时，获取它的高度并将其添加到计数器中。然后，加载完成后，滚动到获得的垂直偏移量。连续执行是不可能的（我们只能调用该`ScrollToVerticalOffset`方法，它不会立即滚动）所以我认为这最终不会成为最终的解决方案。

我的猜测是，为了实现这一点，我们应该深入了解 Listbox 定义。在某处，Listbox 管理 ItemsSource 属性的 CollectionChanged 事件。在那里，列表决定重新创建缓冲区（[更多关于 Listbox 缓冲区的信息](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/05/16/listbox-why-art-thou-blanking.aspx)）。由于这些取决于 ScrollViewer（常量）的 VerticalOffset 属性，因此视口会发生变化。我们应该修改 Listbox，使其不会重新创建缓冲区。问题是我不知道如何做到这一点。

对此有任何想法吗？

谢谢！

**编辑：**很明显，我正在使用 ObservableCollection 添加项目。我不会刷新 ItemsSource 属性本身。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-10T08:29:00.833

你应该使用`ObservableCollection`as `ItemsSource`for `ListBox`。因此，无论何时您将对象添加到您的`ObservableCollection`，`ListBox`都会保留其视图。神奇的是`ObservableCollection`实现`INotifyPropertyChanged`接口

请参阅[如何使用 ObservableCollection](http://www.jarredcapellman.com/2012/02/18/windows-phone-7-observablecollection-populating-a-listbox-asynchronously/)

请参阅[如何使用 INotifyPropertyChanged 接口](http://squarkz.com/2011/02/wp7-using-inotifypropertychanged-to-dynamically-bind-changes-to-gui-controls/)

# xml - 使用 XSLT 使用属性值更改现有元素名称

> ID：13768281
> 
> 赞同：1
> 
> 时间：2012-12-07T17:43:25.950
> 
> 标签：xml, xslt

我得到了一个 XML 文件，它使用非常通用的 XML 标记名称，但具有丰富的属性结构，例如： `<Field Name="CRSDESC1" FieldName="{@CRS_DESC}"><FormattedValue>Survey of Human Anatomy and Physiology</FormattedValue></Field>`

我想通过使用“名称”属性将现有元素名称更改为： `<CRSDESC1>Survey of Human Anatomy and Physiology</CRSDESC1>`

一旦我们创建了新元素，我们就不再需要元素`<FormattedValue>`和副本`<Value>`

这是 XML 的示例部分：

`<CrystalReport> <ReportHeader><Details Level="1"> <Section SectionNumber="0"> <Field Name="CRSDESC1" FieldName="{@CRS_DESC}"><FormattedValue>Heating and Air Contracting</FormattedValue><Value>Heating and Air Contracting</Value></Field> <Field Name="CRSTITLE1" FieldName="{@CRS_TITLE}"><FormattedValue>Heating and Air Conditioning Contracting</FormattedValue><Value>Heating and Air Conditioning Contracting</Value></Field> <Field Name="CRSDEPTS1" FieldName="{Command.CRS_DEPTS}"><FormattedValue>AIRC</FormattedValue><Value>AIRC</Value></Field> <Field Name="DEPTSDESC1" FieldName="{Command.DEPTS_DESC}"><FormattedValue>Heating, A/C &amp; Refrigeration</FormattedValue><Value>Heating, A/C &amp; Refrigeration</Value></Field> <Field Name="CRSNO1" FieldName="{Command.CRS_NO}"><FormattedValue>2260</FormattedValue><Value>2260</Value></Field> <Field Name="CRSSTANDARDARTICULATIONNO1" FieldName="{Command.CRS_STANDARD_ARTICULATION_NO}"><FormattedValue></FormattedValue><Value></Value></Field> <Field Name="CRSMINCRED1" FieldName="{Command.CRS_MIN_CRED}"><FormattedValue>3.00</FormattedValue><Value>3.00</Value></Field> </Section> </Details> <Details Level="1"> <Section SectionNumber="0"> <Field Name="CRSDESC1" FieldName="{@CRS_DESC}"><FormattedValue>Survey of Human Anatomy and Physiology</FormattedValue><Value>Survey of Human Anatomy and Physiology</Value></Field> <Field Name="CRSTITLE1" FieldName="{@CRS_TITLE}"><FormattedValue>Survey of Human Anatomy and Physiology</FormattedValue><Value>Survey of Human Anatomy and Physiology</Value></Field> <Field Name="CRSDEPTS1" FieldName="{Command.CRS_DEPTS}"><FormattedValue>ANAT</FormattedValue><Value>ANAT</Value></Field> <Field Name="DEPTSDESC1" FieldName="{Command.DEPTS_DESC}"><FormattedValue>Anatomy &amp; Physiology</FormattedValue><Value>Anatomy &amp; Physiology</Value></Field> <Field Name="CRSNO1" FieldName="{Command.CRS_NO}"><FormattedValue>1500</FormattedValue><Value>1500</Value></Field> <Field Name="CRSSTANDARDARTICULATIONNO1" FieldName="{Command.CRS_STANDARD_ARTICULATION_NO}"><FormattedValue>L1 904L</FormattedValue><Value>L1 904L</Value></Field> <Field Name="CRSMINCRED1" FieldName="{Command.CRS_MIN_CRED}"><FormattedValue>4.00</FormattedValue><Value>4.00</Value></Field> </Section> </Details> <ReportHeader><CrystalReport>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:17:15.927

这会工作...

**XML 输入**（更正为格式正确）

```
<CrystalReport>
    <ReportHeader>
        <Details Level="1">
            <Section SectionNumber="0">
                <Field Name="CRSDESC1" FieldName="{@CRS_DESC}">
                    <FormattedValue>Heating and Air Contracting</FormattedValue>
                    <Value>Heating and Air Contracting</Value>
                </Field>
                <Field Name="CRSTITLE1" FieldName="{@CRS_TITLE}">
                    <FormattedValue>Heating and Air Conditioning Contracting</FormattedValue>
                    <Value>Heating and Air Conditioning Contracting</Value>
                </Field>
                <Field Name="CRSDEPTS1" FieldName="{Command.CRS_DEPTS}">
                    <FormattedValue>AIRC</FormattedValue>
                    <Value>AIRC</Value>
                </Field>
                <Field Name="DEPTSDESC1" FieldName="{Command.DEPTS_DESC}">
                    <FormattedValue>Heating, A/C &amp; Refrigeration</FormattedValue>
                    <Value>Heating, A/C &amp; Refrigeration</Value>
                </Field>
                <Field Name="CRSNO1" FieldName="{Command.CRS_NO}">
                    <FormattedValue>2260</FormattedValue>
                    <Value>2260</Value>
                </Field>
                <Field Name="CRSSTANDARDARTICULATIONNO1" FieldName="{Command.CRS_STANDARD_ARTICULATION_NO}">
                    <FormattedValue/>
                    <Value/>
                </Field>
                <Field Name="CRSMINCRED1" FieldName="{Command.CRS_MIN_CRED}">
                    <FormattedValue>3.00</FormattedValue>
                    <Value>3.00</Value>
                </Field>
            </Section>
        </Details>
        <Details Level="1">
            <Section SectionNumber="0">
                <Field Name="CRSDESC1" FieldName="{@CRS_DESC}">
                    <FormattedValue>Survey of Human Anatomy and Physiology</FormattedValue>
                    <Value>Survey of Human Anatomy and Physiology</Value>
                </Field>
                <Field Name="CRSTITLE1" FieldName="{@CRS_TITLE}">
                    <FormattedValue>Survey of Human Anatomy and Physiology</FormattedValue>
                    <Value>Survey of Human Anatomy and Physiology</Value>
                </Field>
                <Field Name="CRSDEPTS1" FieldName="{Command.CRS_DEPTS}">
                    <FormattedValue>ANAT</FormattedValue>
                    <Value>ANAT</Value>
                </Field>
                <Field Name="DEPTSDESC1" FieldName="{Command.DEPTS_DESC}">
                    <FormattedValue>Anatomy &amp; Physiology</FormattedValue>
                    <Value>Anatomy &amp; Physiology</Value>
                </Field>
                <Field Name="CRSNO1" FieldName="{Command.CRS_NO}">
                    <FormattedValue>1500</FormattedValue>
                    <Value>1500</Value>
                </Field>
                <Field Name="CRSSTANDARDARTICULATIONNO1" FieldName="{Command.CRS_STANDARD_ARTICULATION_NO}">
                    <FormattedValue>L1 904L</FormattedValue>
                    <Value>L1 904L</Value>
                </Field>
                <Field Name="CRSMINCRED1" FieldName="{Command.CRS_MIN_CRED}">
                    <FormattedValue>4.00</FormattedValue>
                    <Value>4.00</Value>
                </Field>
            </Section>
        </Details>
    </ReportHeader>
</CrystalReport> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Field[@Name]">
        <xsl:element name="{@Name}">
            <xsl:value-of select="FormattedValue"/>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<CrystalReport>
   <ReportHeader>
      <Details Level="1">
         <Section SectionNumber="0">
            <CRSDESC1>Heating and Air Contracting</CRSDESC1>
            <CRSTITLE1>Heating and Air Conditioning Contracting</CRSTITLE1>
            <CRSDEPTS1>AIRC</CRSDEPTS1>
            <DEPTSDESC1>Heating, A/C &amp; Refrigeration</DEPTSDESC1>
            <CRSNO1>2260</CRSNO1>
            <CRSSTANDARDARTICULATIONNO1/>
            <CRSMINCRED1>3.00</CRSMINCRED1>
         </Section>
      </Details>
      <Details Level="1">
         <Section SectionNumber="0">
            <CRSDESC1>Survey of Human Anatomy and Physiology</CRSDESC1>
            <CRSTITLE1>Survey of Human Anatomy and Physiology</CRSTITLE1>
            <CRSDEPTS1>ANAT</CRSDEPTS1>
            <DEPTSDESC1>Anatomy &amp; Physiology</DEPTSDESC1>
            <CRSNO1>1500</CRSNO1>
            <CRSSTANDARDARTICULATIONNO1>L1 904L</CRSSTANDARDARTICULATIONNO1>
            <CRSMINCRED1>4.00</CRSMINCRED1>
         </Section>
      </Details>
   </ReportHeader>
</CrystalReport> 
```

# iphone - 具有右对齐子视图的分组 UITableView 单元格

> ID：13768288
> 
> 赞同：0
> 
> 时间：2012-12-07T17:43:48.837
> 
> 标签：iphone, ios, uitableview

考虑一个`UITableView`分组样式。如何将子视图添加到单元格并将其与表格视图组的右（或左）边框对齐，**而无需对边距进行硬编码**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:45:20.727

将子视图添加到单元格的`contentView`. 为添加到单元格的`contentView`边距和其他附件进行调整。

请注意，这仅在您没有任何`accessoryType`或`accessoryView`设置时才有效。

# php - 如何从登录查询字符串返回结果

> ID：13768289
> 
> 赞同：0
> 
> 时间：2012-12-07T17:43:54.003
> 
> 标签：php, mysqli

我对 mySQLi`bind_params`和其他相关方法有点迷失了。到目前为止，我已经使用类结构构建了一个登录脚本。

```
$qu = $this->DBH->prepare("SELECT * FROM CVUSERS WHERE username = ? AND password = ?");
$qu->bind_params('ss',$username,$password); 
```

现在这就是我迷路的地方。作为登录脚本，我想确保我的查询只有一个结果。如何从查询字符串中返回 int 或 boolean？

```
bind_result($result);
if($result === 1){
    //this identical statement doesn't work :S
    //using an equals statements works for every entry. Even invalid ones.
    //I've found $result will always equal 1, there is more than one row in my table
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:44:09.477

Mysqli 对预处理语句的支持非常难看。因此，您无法轻松获取信息。
由于某种原因，它**总是**需要一些奇怪的函数来调用。这就是你的怀疑的来源。
bind_result() 实际上什么也不做。只有在您调用 fetch() 后它才会开始工作。所以你在你的代码中看到了。

另一种方法是不选择 count() 而是选择数据本身，就像您最初所做的那样，并检查返回的行数。但它仍然需要另一个函数调用

```
$qu->execute();
$qu->store_result();
if($qu->num_rows){
    $this->_constructSessions($username);
} 
```

但是，如果我是你，我或多或少会这样

```
$qu = $this->DBH->prepare("SELECT COUNT(*) FROM CVUSERS WHERE username= ? AND password = ? ");
$qu->bind_param('ss',$username,$password);
$qu->execute();
$res = $stmt->get_result();
$row = $res->fetch_array();
if($row){
    $this->_constructSessions($row);
} 
```

但它仍然很辛苦和丑陋。
这就是为什么我从不使用原生准备好的语句。所以，我做到了

```
$sql = "SELECT * FROM CVUSERS WHERE username=?s AND password=?s";
if ($row = $db->getRow($sql,$username,$password)) {
    $this->_constructSessions($row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:45:57.497

从 PHP 页面`mysqli_stmt::bind_result`：

`Returns TRUE on success or FALSE on failure.`

所以我会假设使用：

```
if($result){
//no errors here! success! add additional code here
} 
```

会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:24:01.497

I found the solution to be a little different to what I expected and I don't believe it's the correct answer to my question still. Thank you for your answers I'm sure they are are both correct but they didn't work for one reason or another :S. I would have used those methods myself anyway. I used this source code in the end:

```
//I used $resulte in case of redeclaration.
if($qu->fetch() && $resulte === 1){
    $this->_constructSessions($username);
}
else {
    //no access
} 
```

I don't why but when using `if($result === 1)` the operation would always return false. So I presumed it was returning an string instead. But if you use `if($result == 1 && $qu->fetch())` the operation would return false again.

my whole code:

```
$qu = $this->DBH->prepare("SELECT COUNT(*) FROM CVUSERS WHERE username= ? AND password = ? ");
$qu->bind_param('ss',$username,$password);
$qu->execute();
$qu->bind_result($resulte);     
if($qu->fetch() && $resulte === 1){
    $this->_constructSessions($username);
}
else {
    return array('error'=>true , 'content'=>'<div id="overlay"></div><div id="fail"><h1>Failed login</h1><p><a href="" id="newLogin">Click Here.</a> To request a new login</p><p><a href="" id="try">Or try again?</a></p></div>');
    sleep(1);
} 
```

I'm still unsure why this operation works for this query and other don't. If any one can spot anything let me know.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T17:55:00.510

尝试如下

```
if (($res = $qu->get_result())) {
    //so your query is right
    //now check how many rows return from your query
    if($res->num_rows > 0){
       //username and password exist so logged in
    }
    else { 
       //something wrong
    }
} 
```

# javascript - 画布元素在第 3 次运行时出现奇怪反应

> ID：13768293
> 
> 赞同：0
> 
> 时间：2012-12-07T17:44:07.557
> 
> 标签：javascript, html5-canvas

我不明白为什么下面的代码有时会显示我选择的所有项目，大多数时候会显示一些，而且大部分是在第 3 次尝试中，根本没有显示任何内容。

因为它在多次尝试中做了不同的事情，所以我无法查明错误的原因。

例如，您加载 3 张图片，它不显示它们（从检查元素我可以看到它们），然后您加载 7 张图片，其中包含 3 张以前的图片，它只显示 3..

我用铬。看起来很简单的代码。这是完整的代码（您必须将图片放在同一文件夹中）：

```
<!DOCTYPE>
<html>
<head>
<style>
canvas{border: #090 1px solid;}

</style>
<script type="application/javascript" language='javascript'>
window.onload = draw;
window.onload = getFiles;
var namelist = [];
function draw(){
    // if it has canvas i remove and replace it, i just found 
    //.replaceChild so i'll be using it next time
    var dbody = document.getElementById('dbody');

    if (dbody.childNodes.length === 1){
        console.log(dbody.firstChild)
        can=document.getElementById('canvas')
        dbody.removeChild(can);
    }
    // Creating canvas
    var canvas = document.createElement("canvas");
    canvas.id='canvas'
    canvas.setAttribute('width',700)

    // create html5 context object to enable draw methods
    var ctx = canvas.getContext('2d');
    dbody.appendChild(canvas);
    var x = 10; // picture start cordinate
    var y = 10; // -------||---------
    var buffer = 10; // space between pictures
    // Insert images to canvas
    for (i=0; i<namelist.length; i++){
        var image = new Image();
        image.src = namelist[i];
        canvas.appendChild(image);
        ctx.drawImage(image,x,y,50,50)
        x+=50+buffer;
    }
}
function getFiles(){

    var picturesFiles = document.getElementById('pictures')
    picturesFiles.addEventListener('change', function(event){
        namelist.length = 0;// empty name list
        var files = picturesFiles.files;
        for (i=0; i< files.length; i++){
            namelist.push(files[i].name);
        }
        draw();
    }, true);

}

</script>
</head>
<body>
<div id='dbody'></div>
<div>
    <input type="file" id='pictures' multiple="">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:14:22.897

你需要做一些事情：http: [//jsfiddle.net/NMtfc/2/](http://jsfiddle.net/NMtfc/2/)

```
for (i = 0; i < namelist.length; i++) {
    var image = new Image();

    canvas.appendChild(image);
    (function(img) {                         // this closure will allow us to maintain our reference to the image object correctly
        img.onload = function() {            // wait til the image loads
            ctx.drawImage(img, x, y, 50, 50)
            x += 50 + buffer;                // increment x here so it isn't the same for each element. 
        }
    })(image);
    image.src = namelist[i];
} 
```

我刚刚意识到它也可以简单地写成：

```
for (i = 0; i < namelist.length; i++) {
    var image = new Image();
    image.onload = function() {
        ctx.drawImage(this, x, y, 50, 50)  // 'this' will refer to the image.
        x += 50 + buffer;
    };
    image.src = namelist[i];
} 
```

# wamp - 在 wamp 服务器上安装 Zend Framework 2

> ID：13768297
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:44:14.977
> 
> 标签：wamp, zend-framework2

谁能告诉我如何在 Wamp 服务器上安装 Zend 框架 2。

我在 Zend 1 上找到了很多答案，但在 Zend 2 上几乎找不到任何答案。

问候比巴斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:19:42.607

您无需安装任何东西即可使用 Zend Framework。ZF 是一个开源类库。

只需创建 zend 项目并在 WAMP 中运行它。这里有一些资源：

1.  [Zend 快速入门教程](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-project.html)
2.  [不错的zf工具教程](http://devzone.zend.com/1348/using-zend_tool-to-start-up-your-zf-project/)

或者，如果您有自定义设置：

1.  下载 Zend 框架
2.  在您的项目地图中包括 ZF 的路径
3.  请享用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:57:32.573

最好的起点是[ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication) Clone repo，调用

> php composer.phar 安装

或者只是遵循 SkeletonApp 的文档，这应该是如何拥有可以修改/学习的简单工作应用程序的最快方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T00:47:39.893

此外，您必须取消注释 wamp 服务器中 php.ini 中的以下行并重新启动，否则您将收到错误“无法找到套接字传输 ssl”

扩展=php_openssl.dll

# python - 任意嵌套列表中的 del 运算符

> ID：13768300
> 
> 赞同：0
> 
> 时间：2012-12-07T17:44:28.477
> 
> 标签：python

我正在使用 nltk.tree.ParentedTree 的一个实例，但我认为这个问题比这更笼统。

基本上，我有一个任意深度嵌套的列表，我想删除列表的一部分（尽管我不知道那部分嵌套的深度）。我有一个`search`函数可以找到列表中某个项目的出现，它返回一个`n`整数元组，其中`n`是找到的元素的深度。

例如，假设我有`l = [[['cat', 'dog']], ['fish']]`当我调用`search(l, 'dog')`它时返回`(0, 0, 1)`。这是在告诉我`l[0][0][1] == 'dog'`。如果我提前知道这`'dog'`发生了，我可以通过执行将其从列表中删除。但我不知道提前，所以我需要以编程方式做同样的事情。`(0, 0, 1)``del l[0][0][1]`

`'dog'`我可以通过执行访问列表中的元素

```
indices = search(l, 'dog')
for i in indices:
    l = l[i] 
```

所以现在`l`是`'dog'`。但是，我不确定如何从那里将其从列表中删除。我不只是想将其设置为`None`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:45:56.603

您可以遍历除最后一个引用之外的所有引用，然后使用最后一个删除该项目：

```
obj = l
for index in indices[:-1]:
    obj = obj[index]
del obj[indices[-1]] 
```

通过使用除最后一个索引之外的所有索引，您解决了对被引用项的*父*项的引用，因此现在您可以使用最后一个索引将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:47:03.493

尝试：

```
del reduce(lambda cur, ind: cur[ind], index_list[:-1], l)[index_list[-1]] 
```

这实际上只是一种更好的方式来完全按照@Martijn Pieters 在他的回答中提出的建议。

# ruby-on-rails - 无法从云服务器检索图像

> ID：13768307
> 
> 赞同：0
> 
> 时间：2012-12-07T17:45:28.567
> 
> 标签：ruby-on-rails, cloudinary

我正在使用`Cloudinary Gem`图像管理。我是 ruby​​ on rails 的新手，所以无法找到我错的地方。图像上传到云服务器已完成，但我无法从服务器检索图像。我把我的视图、控制器和上传器类放在这里。如前所述，我已经安装了载波并将其粘贴在 gem 文件中的 cloudinary gem 之前。

控制器`console.rb`

```
class ConsoleController < ApplicationController
layout 'console'
def c_view
 @img = Image.new
end
def create
@img = Image.new(params[:img])
  if @img.save
   redirect_to(:action => 'c_view')
  else
   render('c_view')
  end    
 end
end 
```

ImageUploader 类

```
class ImageUploader < CarrierWave::Uploader::Base
 include Cloudinary::CarrierWave
def store_dir
  "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
end
version :standard do
  process :eager => true
  process :resize_to_fill => [1200, 800, :north]          
  end

version :thumb do
 eager 
 resize_to_fit(200, 200)
end

def public_id
 return model.photo_file_name
end
end 
```

意见

用于上传

```
<%= form_for :img, :url => {:action => "create"} do |f| %>

<%= f.label :gallery, "Gallery"%>
    <%= f.select :gallery, ["Art", "Bike", "Landscape", "Other", "Portrait"] %> 

    <%= f.label :photo_file_name, "Title" %>
<%= f.text_field :photo_file_name %>

<%= f.label :camera_model, "Camera" %>
<%= f.text_field :camera_model %>

<%= f.label :lens_used, "Lens" %>
<%= f.text_field :lens_used %>

<%= f.label :shutter_speed, "Shutter Speed" %>
<%= f.text_field :shutter_speed %>

<%= f.label :aperture, "Aperture" %>
<%= f.text_field :aperture %>

<%= f.label :iso, "ISO" %>
<%= f.text_field :iso %>

<%= f.label :description, "Description" %>
<%= f.text_area :description, :rows => 2 %>

<%= f.file_field :image %>      

<%= f.submit "Submit", class: "btn btn-success"%>

<% end %> 
```

用于显示

```
<%= image_tag (@img.image_url :thumb, :width => 200, :height => 200) %> 
```

模型图像

```
class Image < ActiveRecord::Base
belongs_to :user
 attr_accessible :id, :user_id, :name, :camera_model, :lens_used, :shutter_speed,   :aperture, :iso, :gallery, :description, :photo_file_name, :photo_file_size, :photo_updated_at, :image, :image_url 
mount_uploader :image, ImageUploader
end 
```

它没有显示任何错误。上传部分正在工作，但图像检索不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:57:09.003

我的天啊...！！！！

我是最愚蠢的......对不起，伙计们......罗弗......！

我没有把节目放在控制器里。所以只需要在控制器中添加这些行，视图如下：

在控制器中

```
@images = Image.all 
```

在视图中

```
<% @images.each do |img| %>
  <%= image_tag(img.image.url (:thumb))
<% end %> 
```

谢谢

# ruby-on-rails - acts_as_follower 不适用于我的 Rails3.2 应用程序

> ID：13768309
> 
> 赞同：2
> 
> 时间：2012-12-07T17:45:46.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, ruby-on-rails-3.2

由于我启用了remote true，它应该立即将切换按钮“Follow”更改为“Un-Follow”。
但事实并非如此。如果我重新加载页面，切换按钮会显示更改的标签。
所以这意味着它实际上是在改变背景中跟随列的值。
我已经为此花了 3 天时间，但我仍然不知道:(
谁能帮我解决这个问题？代码有什么问题吗？还是我缺少一些 JQuery 文件？我是 Rails 的新手。 ..

宝石文件

```
...
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-ui-rails'

end

gem 'jquery-rails' 
```

...

资产/javascripts/application.js

```
...
//= require twitter/bootstrap
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require_tree 
... 
```

意见/共享/_follow_user.html.erb

```
<% unless user == current_user %>
  <% if current_user.following?(user) %>
    <%= link_to sanitize('<i class="icon-remove icon-white"></i> ') + 'Un-Follow', user_follow_path(user.to_param, current_user.get_follow(user).id), :method => :delete, :remote => true, :class => 'btn' %>             
  <% else %>
    <%= link_to sanitize('<i class="icon-ok icon-white"></i> ') + 'Follow', user_follows_path(user.to_param), :remote => true, :class => 'btn btn-primary' %>             
  <% end %>
<% end %> 
```

意见/用户/create.js.erb

```
$('#follow_user').html('<%= escape_javascript(render :partial => "shared/follow_user", :locals => {:user => @user}) %>'); 
```

意见/用户/destroy.js.erb

```
$('#follow_user').html('<%= escape_javascript(render :partial => "shared/follow_user", :locals => {:user => @user}) %>'); 
```

控制器/follows_controller.rb

```
class FollowsController < ApplicationController

  def create
    @user = User.find(params[:user_id])
    current_user.follow(@user)
  end

  def destroy
    @user = User.find(params[:user_id])
    current_user.stop_following(@user)
  end

end 
```

配置/路由.rb

```
...
resources :users, :only => [:index, :show] do
  resources :follows, :only => [:create, :destroy]
end
... 
```

模型/用户.rb

```
class User < ActiveRecord::Base

  ...

  acts_as_follower
  acts_as_followable

  ...  

end 
```

意见/用户/show.html.erb

```
<h1>Users#show</h1>

<p id="notice"><%= notice %></p>

<p>
  <b>User:</b>
  <%= @user.user_profile.user_id %>
</p>

<p>
  <b>Language:</b>
  <%= @user.user_profile.language_id %>
</p>

<p>
  <b>Country:</b>
  <%= @user.user_profile.country_id %>
</p>

<p>
  <b>Prefecture:</b>
  <%= @user.user_profile.prefecture_id %>
</p>

<p>
  <b>Gender:</b>
  <%= @user.user_profile.gender_id %>
</p>

<p>
  <b>Nickname:</b>
  <%= @user.user_profile.nickname %>
</p>

<p>
  <b>Introduction:</b>
  <%= @user.user_profile.introduction %>
</p>

<p>
  <b>Picture url:</b>
  <%= @user.user_profile.picture_url %>
</p>

<% if user_signed_in? %>
  <div id="follow_user">
    <%= render :partial => "shared/follow_user", :locals => {:user => @user} %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:50:56.237

您忘记了渲染到跟随控制器中。

这里是我的测试代码，我使用了一些你的代码，但我使用 RubyCas-Server 作为验证层。

所以只需检查控制器，视图:)

[https://github.com/senayar/follower](https://github.com/senayar/follower)

# html - 如何使用 webbrowser 控件编辑 html？（开启所见即所得功能）

> ID：13768310
> 
> 赞同：-4
> 
> 时间：2012-12-07T17:45:47.070
> 
> 标签：html, vb.net, webbrowser-control

类似于 WYSIWYG（所见即所得）编辑器，我希望用户能够直观地编辑 html 文档并移动对象。如何为 Web 浏览器控件打开这些 html 编辑功能？

我的环境是 Visual Studio 2010，Windows 7 64 位。

> 我想启用 Web 浏览器控件的 html 编辑功能（[http://msdn.microsoft.com/en-us/library/aa752040%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa752040%28v=VS.85%29.aspx)）。

注意：Web 浏览器控件的代码正在专用编辑器中使用，并且太大且太多，无法在此处发布，但如果有人想要完整源代码，我可以稍后发布指向它的链接。这是一个大型项目，请参考这里，因为我试图在发布他们的或在这里之前与谷歌交谈和搜索：http: [//social.msdn.microsoft.com/Forums/vstudio/en-US/1e5acdb2-9366-4258-890a -86eaaa1086ee/html-expert-needed](http://social.msdn.microsoft.com/Forums/vstudio/en-US/1e5acdb2-9366-4258-890a-86eaaa1086ee/html-expert-needed)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:31:14.667

WebBrowser 控件有一个内置的[WYSIWYG](http://en.wikipedia.org/wiki/WYSIWYG) mini - [HTML](http://en.wikipedia.org/wiki/HTML)编辑器。你可以使用它。以下是如何打开该编辑模式的示例：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    ' I do this for this example, so that we have some elements loaded. 
    ' For you, you will need to add the tags from your code for various HTML elements.
    WebBrowser1.Navigate("http://google.com")
End Sub

Private Sub WebBrowser1_DocumentCompleted(sender As System.Object, e As WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
    ' To turn On the edit mode.
    Dim axObj As New Object
    axObj = WebBrowser1.ActiveXInstance
    axObj.document.designmode = "On"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:36:44.607

对于阅读本文的新人，这里的相关代码部分最终解决了我从上面的 msdn 论坛帖子中引用的所有内容：

> Private Sub wb_DocumentCompleted(ByVal sender As Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) 处理 wb.DocumentCompleted ' Tabp.wb_DocumentCompleted - Internet 相关文档完成例程
> 
> ```
>  If doc IsNot Nothing Then
>         If m_EditMode = True Then
>             doc.designMode = "On"
>         Else
>             doc.designMode = "Off"
>         End If
>     End If
> 
>     If wb.Document IsNot Nothing Then HTMLDOC = wb.Document
> 
>     If wb.CanGoBack Then
>         mbBack.ImageIndex = ImglstImages.cVLeftArrowQuiescent
>         mbBack.Enabled = True
>     Else
>         mbBack.ImageIndex = ImglstImages.cVLeftArrowGreyed
>         mbBack.Enabled = False
>     End If
>     If wb.CanGoForward Then
>         mbforward.Enabled = True
>         mbforward.ImageIndex = ImglstImages.cVRightArrowQuiescent
>     Else
>         mbforward.Enabled = False
>         mbforward.ImageIndex = ImglstImages.cVRightArrowGreyed
>     End If
>     wb.AllowNavigation = False
>     cmbxAddressbar.Text = wb.Url.ToString
>     AddIfUnique(cmbxAddressbar.Text)
>     If Form1.GetClassIdentifier = m_ClassIdentifier Then Form1.ProgBar.Visible = False
>     wb.AllowNavigation = True
>     PU.Clear() '''''
>     wb.Focus()
> End Sub 
> ```

这就是我所拥有的地址的问题。总而言之，这是用于代码的两个主要问题：

1.  html 编辑功能在 windows 7 sp1 上被禁用，禁止使用（在下面的答案之前，我帮助的原作者未能正确编码他/她的 HTML 编辑器）。
2.  代码的原作者没有包含一个 document_completed 事件，使得之前的代码无法在新的 windows 7 sp1 环境中正常工作。注意：这是一个个人编码项目，是的，作者允许我根据需要使用代码和/或编辑它。注意：这是上面使用的原始答案。我想展示我的代码，所以每个人都不会认为我是凭空做的。

# android - CoreBluetooth 是否能够连接 Android BLE 设备？

> ID：13768313
> 
> 赞同：2
> 
> 时间：2012-12-07T17:45:56.303
> 
> 标签：android, objective-c, ios, core-bluetooth, bluetooth-lowenergy

我会知道是否可以将 CoreBluetooth 与 Android 连接起来。目前，我们还没有功能强大的设备，因此我们无法进行测试。

我无法找到这个问题的明确答案：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:59:32.590

不幸的是，目前安卓中没有内置蓝牙 4.0（蓝牙 LE 是其中的一部分）库。为了将 android 设备连接到蓝牙 4.0 连接，您必须为特定设备执行此操作，并且该设备的制造商必须已发布蓝牙 4.0 SDK。

有一个适用于 Android 的[开放式蓝牙低功耗 SDK](http://code.google.com/p/broadcom-ble/)，但无法提供支持的设备列表，并且论坛帖子表明它非常有问题。

# android - HttpTransportSE.call() 抛出 IllegalArgumentException

> ID：13768315
> 
> 赞同：2
> 
> 时间：2012-12-07T17:45:58.193
> 
> 标签：android, wcf

我是 android 开发的新手，正在努力创建一个可以使用我的 wcf 服务的 android 客户端。下面是我的 wcf 服务接口。我正在为这两个函数返回一个硬编码的值。WCF 服务正在使用 BasicHttpBinding。

```
[ServiceContract]
  public interface IAgent
    {

        [OperationContract]
        int TestMethod();

        [OperationContract]       
        string TestMethodParameter(int key);
    } 
```

下面是android客户端代码

```
package com.example.test;
import android.os.Bundle;
import android.os.StrictMode;
import android.app.Activity;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.view.Menu;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity
extends Activity 
implements OnClickListener
{
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
     private static final String TEST_METHOD = "IAgent/TestMethod";
     private static final String NAMESPACE = "http://tempuri.org/";
     private static final String URL = "http://odchistorian.cloudapp.net/HistorianAgent.svc";
     private static final String SOAP_ACTION1 = NAMESPACE + TEST_METHOD;
    Button connectButton = null;
    EditText editBox = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        connectButton = (Button) this.findViewById(R.id.button1);
        editBox = (EditText) this.findViewById(R.id.editText1);
        connectButton.setOnClickListener(this);
        StrictMode.setThreadPolicy(policy); 
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View arg0) {

        SoapObject request = new SoapObject(NAMESPACE,TEST_METHOD); 
        final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        final HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);              
                    try {

                        androidHttpTransport.call(SOAP_ACTION1, envelope);
                        SoapPrimitive response = null;
                            response = (SoapPrimitive) envelope.getResponse();
                            String resultData= response.toString();              
                            editBox.setText(resultData);

                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }                           
    }
} 
```

堆栈跟踪 (LogCat)

```
12-07 17:19:20.244: W/System.err(1180): java.lang.IllegalArgumentException: size <= 0
12-07 17:19:20.261: W/System.err(1180):     at java.io.BufferedInputStream.<init>(BufferedInputStream.java:94)
12-07 17:19:20.271: W/System.err(1180):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:226)
12-07 17:19:20.271: W/System.err(1180):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
12-07 17:19:20.281: W/System.err(1180):     at com.example.test.MainActivity.onClick(MainActivity.java:103)
12-07 17:19:20.281: W/System.err(1180):     at android.view.View.performClick(View.java:4202)
12-07 17:19:20.291: W/System.err(1180):     at android.view.View$PerformClick.run(View.java:17340)
12-07 17:19:20.291: W/System.err(1180):     at android.os.Handler.handleCallback(Handler.java:725)
12-07 17:19:20.291: W/System.err(1180):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-07 17:19:20.301: W/System.err(1180):     at android.os.Looper.loop(Looper.java:137)
12-07 17:19:20.301: W/System.err(1180):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-07 17:19:20.311: W/System.err(1180):     at java.lang.reflect.Method.invokeNative(Native Method)
12-07 17:19:20.311: W/System.err(1180):     at java.lang.reflect.Method.invoke(Method.java:511)
12-07 17:19:20.321: W/System.err(1180):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-07 17:19:20.321: W/System.err(1180):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-07 17:19:20.331: W/System.err(1180):     at dalvik.system.NativeStart.main(Native Method) 
```

每次运行此代码时，我总是在“androidHttpTransport.call(SOAP_ACTION1,envelope);”行得到 IllegalArgumentException。我浏览了几个博客，但没有运气。无法得到究竟缺少什么。请帮忙。

# c# - 如果不使用访问标识符，调用的方法是什么？

> ID：13768326
> 
> 赞同：4
> 
> 时间：2012-12-07T17:46:53.437
> 
> 标签：c#

我不知道调用没有访问标识符的方法。在这个代码块中，我指的是`void updateNumTo5`方法。

```
private int num = 0;

#region public methods
public int Get7()
{
    return 7;
}
#endregion

#region private methods
private int get6()
{
    return 6;
}
#endregion

#region Unknown name
void updateNumTo5()
{
   num = 5;
}
#endregion 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T17:47:57.970

默认访问修饰符（不是标识符）`private`用于方法。所以这：

```
private void Foo()
{
} 
```

相当于

```
void Foo()
{
} 
```

一般规则是默认访问修饰符始终是您可以指定的最受限制的。例如，默认情况下是非嵌套类型`internal`，而默认情况下是嵌套类型`private`。

# php - PHPMailer 无法识别地址

> ID：13768329
> 
> 赞同：1
> 
> 时间：2012-12-07T17:47:09.697
> 
> 标签：php, phpmailer

我正在使用 phpmailer 向存储在变量 $to 中的地址发送电子邮件，但这

```
$mail->AddAddress($to); 
```

导致此错误消息

```
You must provide at least one recipient email address. 
```

我尝试打印 $to 并打印出我希望发送消息的正确电子邮件地址。如果我输入电子邮件地址而不是 $to，邮件就会被发送。有人可以帮忙吗？谢谢！

这是有问题的代码：

```
// if the email seller form is submitted
if ($_SERVER["REQUEST_METHOD"] == "POST")
{

// retreive the seller's email using his id
$seller_id = $_GET["sellerid"];

// query for the seller's email
$user_query = query("SELECT username FROM users WHERE id = ?", $seller_id);
$to = $user_query[0]["username"];   

// send an email to the seller
require_once("PHPMailer/class.phpmailer.php");

// instantiate mailer
$mail = new PHPMailer();

// use your ISP's SMTP server
$mail->IsSMTP();
$mail->Host = "smtp.fas.harvard.edu";

// set From:
$mail->SetFrom($_POST['buyer_email']);

// set To:
$mail->AddAddress($to);

// set Subject:
$mail->Subject = $_POST['subject'];

// set body
$mail->Body = $_POST['message'];

// set alternative body, in case user's mail client doesn't support HTML
$mail->AltBody = "Please view this message in an HTML-enabled browser.";

// send mail
if ($mail->Send() === false)
    die($mail->ErrorInfo . "\n"); 
```

这是查询功能

```
 /**
* Executes SQL statement, possibly with parameters, returning
* an array of all rows in result set or false on (non-fatal) error.
*/
function query(/* $sql [, ... ] */)
{
// SQL statement
$sql = func_get_arg(0);

// parameters, if any
$parameters = array_slice(func_get_args(), 1);

// try to connect to database
static $handle;
if (!isset($handle))
{
    try
    {
        // connect to database
        $handle = new PDO("mysql:dbname=" . DATABASE . ";host=" . SERVER, USERNAME, PASSWORD);

        // ensure that PDO::prepare returns false when passed invalid SQL
        $handle->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
    }
    catch (Exception $e)
    {
        // trigger (big, orange) error
        trigger_error($e->getMessage(), E_USER_ERROR);
        exit;
    }
}

// prepare SQL statement
$statement = $handle->prepare($sql);
if ($statement === false)
{
    // trigger (big, orange) error
    trigger_error($handle->errorInfo()[2], E_USER_ERROR);
    exit;
}

// execute SQL statement
$results = $statement->execute($parameters);

// return result set's rows, if any
if ($results !== false)
{
    return $statement->fetchAll(PDO::FETCH_ASSOC);
}
else
{
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:51:25.717

确保`$to`附加了有效的电子邮件。从外观上看可能有用户名？`$to = $user_query[0]["username"];`

# controller - Ember.js ArrayController 连接到 CollectionView：如何更新“内容”数组中的对象属性？

> ID：13768331
> 
> 赞同：1
> 
> 时间：2012-12-07T17:47:17.140
> 
> 标签：controller, ember.js, collectionview

余烬 newjack 在这里。将 ArrayController 挂接到 CollectionView 中。

```
// the ArrayController
App.Entities = Ember.ArrayController.create({
    content: Ember.A([
            {id: 1, name: "item 1"},
            {id: 2, name: "item 2"},
            ...
            {id: n, name: "item n"}
        ])
});

// the CollectionView
myView = Ember.CollectionView.create(
    contentBinding: "App.Entities",
    tagName: 'ul',
    itemViewClass: Ember.View.extend({
        template: Ember.Handlebars.compile('{{view.content.name}}')
    })
).appendTo("mySelector"); 
```

`ul`正如预期的那样，这对我的属性产生了很好的影响。同样，所有数组级别的操作（例如弹出、推送和反转）都非常出色：

```
App.Entities.reverseObjects(); // Works!
App.Entities.popObject(); // Works! 
```

但是，我似乎无法更新数组*内的属性：*

```
App.Entities.objectAtContent(0).name = "new name" // I know this is wrong 
```

有趣的是，如果我之后执行数组操作，它会起作用：

```
App.Entities.reverseObjects(); // change is picked up! 
```

所以问题是：如何更新 ArrayController 内部的属性（并确保更新绑定？）

顺便说一句，我已经尝试了我能想到的一切......例如 myView.rerender() 等，但我知道我只是做错了，因为它违背了事情的*运作*方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:19:04.243

尝试`App.Entities.objectAt(0).set('name', "New name")`让我知道这是否有效...数组必须包含 Ember 对象才能使绑定适用于所做的更改

# java - 一次在一个屏幕上显示两个活动

> ID：13768334
> 
> 赞同：1
> 
> 时间：2012-12-07T17:47:20.073
> 
> 标签：java, android, android-fragments

我想一次在一个屏幕上显示两个活动，我认为最好的方法是使用片段。问题是我想做这样的事情：

![例子](../Images/857053959202049d83ea2cadb606f574.png)

最初，只会显示Activity 1，当一个事件成功时，会出现Activity 2（但只有header）。然后，当用户点击此标题时，Activity 2 会出现某种动画。最好的方法应该是将Activity 2拖到顶部的可能性，但最初，它足够轻敲并自动上升。

现在我分别实现了两个活动，我想在一个屏幕上合并。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:00:41.967

您为此使用片段而不是单独的活动的本能是一个很好的本能。将 Activity 视为这些交互的容器。

请记住，活动和片段都是生命周期管理结构。它们有一些*管理*UI 的便利和快捷方式，但它们本身不是视图。用户将看到并与之交互的内容归结为窗口层次结构中的视图。

看看[SlidingDrawer](http://developer.android.com/reference/android/widget/SlidingDrawer.html)作为一个组件，它可以充当您的详细片段内容的容器，您在上面将其称为“活动 2”。选择一个列表项可以使 SlidingDrawer 组件可见，并用适当的细节片段的内容填充抽屉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:01:58.363

我认为您可以在切换活动时使用从下到上的动画..只需创建动画..当用户单击标题覆盖活动的动画时..仅此而已

# algorithm - 在 HMM 中找到前 k 个维特比路径

> ID：13768335
> 
> 赞同：12
> 
> 时间：2012-12-07T17:47:22.750
> 
> 标签：algorithm, hidden-markov-models, viterbi

我需要编写一个算法来找到 HMM 中的前 k 个维特比路径（使用常规维特比算法来找到最佳路径）。

我想我可能需要为每个状态 N 保存一个大小为 k 的列表 V_t,N，其中包含以状态 N 结尾的前 K 个路径，但我不太确定如何跟踪该列表。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T20:26:24.110

我们可以小心地解决这个问题。通过查看 hmm 的格状结构最容易看出：

![简单的格子图像](../Images/cff5f7d14ad53422071b6e63ee48233b.png)

在此示例中，隐藏状态为 00、01、10、11，将这四个的集合表示为 S。未显示观察值，但假设它们为 0,1。

假设我们有正确的转移矩阵：

```
transition[4][4] 
```

排放概率：

```
emissions[4][2] 
```

和初始概率：

```
p[2] 
```

所以每一列都代表隐藏状态，维特比的目标是根据观察结果计算最可能的隐藏状态序列。现在让 alpha(i, t) = 隐藏状态序列处于状态 i 的最大概率（i 是 00、01、10、11 之一），在时间 t，其中时间 t 的观察结果是 o_t（o_t 是 1 0, 1)。让第一个观察值表示为 o_1。它可以有效地计算为：

```
alpha(i, 1) = p[i] * emissions[i][o_1]
alpha(i, t) = emissions[i][o_t] * max_{k in states} (alpha(k, t-1) * transition[k][i]) 
```

为了找到最佳路径，我们在 alpha(i, t) 步骤中保持指针向后，指向上面最大化 max 函数的状态。最后，我们只检查所有状态中的 alpha(i, T) 和 for i，找到最大的一个，然后再返回得到最可能的状态序列。

现在我们需要扩展它来存储 top k-paths。目前在每个 alpha(i,t) 我们只存储一个父级。然而，假设我们存储了前 k 个前辈。因此，每个 alpha(i, t) 不仅对应于最可能的值和它从其转换的节点，而且还对应于它可能从其转换的前 k 个节点的列表及其按排序顺序排列的值。

这很容易做到，因为我们不做 max，只取一个前面的节点，而是取前 k 个前面的节点并存储它们。现在对于基本情况，没有前面的节点，所以 alpha(i, 1)，仍然只是一个值。当我们到达任意列（例如 t）并想要找到在该列中以节点 (i) 结束的前 k 条路径时，我们必须找到前 k 个前辈来自的前k 条路径以及从它们中获取的前 k 条路径。

这就好像我们有以下问题，一个大小为 4 x k 的矩阵 m，其中一行代表前一个状态，m[state] 代表路径结束于那里的前 k 个概率。因此 m 的每一行都按从大到小排序，现在问题变成了 find：

```
Best_K_Values(t, i) = Top K over all i,preceding_state,k (emissions[i][o_t] * m[preceding_state][k] * transition[preceding_state][i]) 
```

现在这看起来令人生畏，但需要一些时间来理解它，我们通常可以使用 O(4 log k) 或 O(numStates log k) 中的堆来解决排序矩阵问题中的前 k 个问题。

[看到排序矩阵中第 Kth 个最小元素的](https://stackoverflow.com/questions/15179536/kth-smallest-element-in-sorted-matrix)细微变化，请注意，在我们的例子中，列没有排序，但那里的想法仍然适用。

如果您仍在阅读，请注意此方法的总体复杂度为 O((numStates log k) * numStates * t) = O(numStates^2 * t * log k) （我相信这是正确的复杂度）。

这可能很难理解，但如果您有任何问题，或者我做错了什么，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-22T04:08:03.457

这方面实际上有大量文献。它需要一些挖掘，但我发现了这个。

使用应用程序列出 Viterbi 解码算法

[http://www.ensc.sfu.ca/people/faculty/cavers/ENSC805/readings/42comm02-seshadri.pdf](http://www.ensc.sfu.ca/people/faculty/cavers/ENSC805/readings/42comm02-seshadri.pdf)

# javascript - javascript间隔阻止点击元素（有时）

> ID：13768336
> 
> 赞同：0
> 
> 时间：2012-12-07T17:47:23.383
> 
> 标签：javascript, ajax, intervals

我认为这不一定是间隔错误，但这就是正在发生的事情。

基本上，我为网站的这一部分构建了自己的“谷歌搜索”功能。它将列出一堆票类型项目，搜索功能允许他们像在 Google 中一样搜索票。当您键入时，它会填充您正在执行的搜索。

因此，interval 事件持续运行并调用 AJAX 函数（它显然调用了一个 .jsp 文件，该文件运行我编写的基于输入文本搜索数据库的方法），然后将返回的数据拆分并粘贴到网页上，你知道，标准的 AJAX 东西。

但是，当我尝试点击其中一个链接时，它似乎*忽略了*它就像我必须在某个时间点击它才能让页面注册点击一样。我可以减慢间隔，它可以缓解一些问题，但搜索似乎很*慢*。它仍然偶尔会忽略点击。链接是表格元素内的标准链接。

AJAX 函数 - 我在发回之前格式化了数据（我更喜欢 Java 编码而不是 JavaScript，所以我在那里做而不是 XD）

间隔设置为 500MS。所以它是一次全部替换文本，而不是逐行替换。所以我知道为什么要这样做：/我在使用连续间隔的其他页面上没有这个问题。但是，该页面没有 AJAX 调用。

```
function getResults(supplier, request, cat, type, displayFiles, input)
{

    var output;
    //Ajax variable
    var xmlhttp;
            //Makes the call to the ajax engine based on browser
            if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }  

            var url = "getResults.jsp?supplier=" + encodeURIComponent(supplier) + "&request= " + encodeURIComponent(request) + "&cat= " + encodeURIComponent(cat) + "&type= " + encodeURIComponent(type)
            + "&displayFiles= " + encodeURIComponent(displayFiles) + "&input= " + encodeURIComponent(input);                        

            xmlhttp.open("POST",url,true);

            //Handling of the ajax call
            xmlhttp.onreadystatechange = function(){
                    if(xmlhttp.readyState == 4){             
                        output = xmlhttp.responseText;
                        //alert(output); //Gives the success or failure of the ajax call            
                        document.getElementById("resultsBox").innerHTML = output;

                    }
                }       

          xmlhttp.send(null); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:02:14.570

所以你有一个由 setInterval 创建的计时器，它每（至少）500 毫秒触发一次搜索方法。

搜索方法是异步的，因此您甚至可以在旧的搜索请求完成之前触发新的搜索请求，这可能会创建对 innerHTML 属性的更新序列（取决于服务器的响应时间）使其溢出。因为即使每 500 毫秒触发一次请求，您也不知道响应何时到达。

作为建议，尝试重做逻辑，用 setTimeout（甚至 requestAnimationFrame）替换 setInterval 以避免“溢出”行为，而不是仅更新整个结果块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T12:41:24.013

你可以像我在游戏中那样做。

```
search() {
    do stuff
    setTimeout(search,500);
} 
```

这就是我在 javascript 中进行连续循环的方式。这样它只是一个循环。setTimeout 只运行一次它的功能。setInterval 每隔一段时间运行一次，很容易粗心。使用 setTimeout，您可以让 search() 函数在完成后再次调用它自己。

# ruby - 仅当用户输入了值时，如何应用验证？

> ID：13768338
> 
> 赞同：2
> 
> 时间：2012-12-07T17:47:32.410
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有一个注册表单，用户可以在其中输入他的主要电话和传真。传真号码是可选的，我在 User.rb 模型中使用以下代码：

```
validates :fax, format: {with: VALID_PHONE_REGEX }, if: :active_or_personal_step? 
```

问题是这种验证会影响用户是否在该字段中输入了任何内容。如何在此代码中包含“仅在存在时验证：true”规则？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T17:50:11.897

```
validates :fax, format: {with: VALID_PHONE_REGEX}, :unless => 'fax.blank?' 
```

# java - 如何在java中的特定位置写入文本文件？

> ID：13768341
> 
> 赞同：-3
> 
> 时间：2012-12-07T17:47:54.297
> 
> 标签：java, text, file-io

我正在尝试创建一个文本文件，在该文本文件中我有不同大小的不同列，我必须在该文件中相应地写入，我已经尝试过这样.....
但我不知道如何定义大小例如，每一列我都想要 30 号的位置，而不是更少，我该怎么做？

```
BufferedWriter bw = null;
    try {
        String none=" ";
        DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
         Date date = new Date();
         int no_of_files=01;

        String line1 = "H"+StringUtils.rightPad(none,9)+dateFormat.format(date)+StringUtils.rightPad(none,8)+" "+no_of_files+StringUtils.rightPad(none,10)+StringUtils.rightPad(none,290);
        String line2 =StringUtils.rightPad("CID",10)+StringUtils.rightPad("Location",30)+StringUtils.rightPad("DateSF",8)+StringUtils.rightPad("DateST",8)+StringUtils.rightPad("BillAmt",10)+StringUtils.rightPad("BR",2)+StringUtils.rightPad("PDF FileName",260);

        File file = new File("D:\\write.txt");

        bw = new BufferedWriter(new FileWriter(file));

        bw.write(line1);
        bw.newLine();
        bw.write(line2);
       // writer.write(line2);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (bw != null) {
                bw.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:26:14.653

I would look into using this function from Commons-IO to help keep the length of each column the same.

[StringUtils.rightPad()](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#rightPad%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:32:36.443

我做了一个小框架，让您可以在 spring 文件中定义布局：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC  "-//SPRING//DTD BEAN//EN"   "http://www.springframework.org/dtd/spring-beans.dtd">
<beans> 
<bean id="merchantNumber" class="com.xxx.io.Field">
    <property name="name"><value>merchantNumber</value></property>
    <property name="length"><value>8</value></property>
    <property name="scale"><value>0</value></property>
    <property name="type"><value>7</value></property>
    <property name="index"><value>1</value></property>
</bean>
<bean id="merchantName" class="com.xxx.io.Field">
    <property name="name"><value>merchantName</value></property>
    <property name="length"><value>40</value></property>
    <property name="scale"><value>0</value></property>
    <property name="type"><value>2</value></property>
    <property name="index"><value>2</value></property>
</bean> 
```

```
<bean id="marchandLayout" class="com.xxx.MarchandLayout" >
<property name="fields">
<bean class="java.util.HashMap">
    <constructor-arg>
        <map>
          <entry>
            <key><value>merchantNumber</value></key>
            <ref bean="merchantNumber"/>
          </entry>
          <entry>
            <key><value>merchantName</value></key>
            <ref bean="merchantName"/>
          </entry> 
```

从那时起，您将创建一个使用 Spring 中定义的 recordLayout 创建 FileExport（写入 fileOutputStream）的类。

我还添加了一个读取顺序文件并将值存储在布局属性中的功能。

如果你有兴趣，我会把源代码发给你。

希望能帮助到你。

RecordLayout 类：包 com.xxx.io；

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.HashMap;
import java.util.Iterator;
import java.util.TreeSet;

public class RecordLayout {

private HashMap          fields;

private static final int SEVENTY = 70;

/**
 * Constructeur
 */
public RecordLayout() {
    fields = new HashMap();
}

/**
 * @param aField
 *            le champ à ajouter dans le HashMap
 */
protected void addField(final Field aField) {
    fields.put(aField.getName(), aField);
}

/**
 * Methode qui retourne un objet de type Field en passant en parametre le
 * nom du champ.
 * 
 * @param aFieldName
 *            le nom de l'objet à récuperer
 * @return un objet de type Field
 * @throws FieldException
 *             si le Field n'est pas trouvable dans le HashMap, on retourne
 *             une exception
 */
public Field getField(final String aFieldName) throws FieldException {

    Field field = (Field) fields.get(aFieldName);
    if (field == null) {
        throw new FieldException("Field " + aFieldName + " n'existe pas dans le layout");
    }
    return field;
}

/**
 * méthode qui retourne un iterator contenant une collection d'objet de type
 * Field en fonction de l'ordre basé sur le champ de l'index de l'objet
 * 
 * @see Field.getIndex()
 * @see Field.compareTo()
 * @return un iterator
 */
protected Iterator getOrderedFieldIterator() {
    TreeSet structureTreeSet = new TreeSet(fields.values());
    return structureTreeSet.iterator();
}

/**
 * Retourne la valeur de l'objet Field
 * 
 * @param aFieldName
 *            le nom du champ à recherché.
 * @return retourne l'objet qui contient la valeur. String, BigDecimal
 * @throws FieldException
 *             si le champ n'existe pas, une exception est lancée.
 */
public Object getValue(final String aFieldName) throws FieldException {
    return getField(aFieldName).getValue();
}

/**
 * Cette méthode assigne une valeur à un objet.
 * 
 * @param aName
 *            le nom de l'objet, le Field
 * @param aValue
 *            la valeur à assigner au Field
 * @throws FieldException
 *             si le Field n'existe pas.
 */
public void setValue(final String aName, final Object aValue) throws FieldException {
    getField(aName).setValue(aValue);
}

/**
 * Cette méthode prend la valeur des champs, en fonction de l'ordre des
 * champs et parcours les valeurs et les mets dans un stream.
 * 
 * @return un stream contenant les données des objets comme dans un layout
 *         de fichier plat.
 * @throws Exception
 *             si une exception arrive lors de la transformation
 */
public ByteArrayOutputStream toByteArray() throws Exception {
    ByteArrayOutputStream anOutputStream;

    try {
        anOutputStream = new ByteArrayOutputStream(SEVENTY);
        toStream(anOutputStream);
    } catch (IOException e) {
        throw new Exception("Unexpected at the toByte Creation ");
    }
    return anOutputStream;
}

/**
 * Méthode qui itère sur la collection et qui appelle la transformation des
 * valeurs objets en objets String
 * 
 * @param anOutputStream
 *            le stream contenant les valeurs
 * @throws FieldException
 *             Si une erreur survient au niveau des champs
 * @throws IOException
 *             si une erreur survient au niveau du stream.
 */
public void toStream(final OutputStream anOutputStream) throws FieldException, IOException {
    Iterator iterator;
    iterator = getOrderedFieldIterator();

    while (iterator.hasNext()) {
        Field field = (Field) iterator.next();
        field.toStream(anOutputStream);
    }
}

/**
 * Méthode qui prend un inputStream et qui crée les objets
 * 
 * @param message
 *            le contenu du stream
 * @throws FieldException
 *             si une erreur de Field survient
 * @throws IOException
 *             si une erreur survient au niveau du stream.
 */
public void buildFromStream(final InputStream message) throws FieldException, IOException {
    Iterator iterator;
    iterator = getOrderedFieldIterator();

    while (iterator.hasNext()) {
        ((Field) iterator.next()).initializeFrom(message);
    }
}

/**
 * @see java.lang.Object#toString()
 * @return  String rprésentation
 */
public String toString() {
    StringBuffer sb = new StringBuffer();
    Iterator it = getOrderedFieldIterator();
    while (it.hasNext()) {
        Field f = (Field) it.next();
        sb.append(f.getName() + " = [" + f.getValue() + "]\n");
    }
    return sb.toString();
}

/**
 * @return le HashMap contenant les champs
 */
public HashMap getFields() {
    return fields;
}

/**
 * @param map
 *            à setter
 */
public void setFields(final HashMap map) {
    fields = map;
} 
```

}

# php - 通过 url 传递一个数组并通过 GET 方法获取它

> ID：13768343
> 
> 赞同：0
> 
> 时间：2012-12-07T17:48:04.470
> 
> 标签：php, arrays, get

我通过 url 传递了一个数组，但是当我想使用 $sim_p[1] 时，我遇到了“注意：未定义的偏移量：1”，但是对于偏移量 0，它工作正常！

```
$url = 'My Library.php?num='.$k.'&sim_p[]=' . implode('&amp;sim_p[]=', array_map('urlencode', $sim_p)); //sim_p[ 0 ] and sim_p[ 1 ] are full in this page
          header ("Location:".$url); 
```

在我的 Library.php 中：

```
 $num = $_GET[ 'num' ]; 
    $sim_p = array();
    if($num > 0){
    $sim_p = $_GET[ 'sim_p' ]; 
    } 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:46:46.080

如果你用过`var_dump($_GET)`，你可能会得到这样的东西：

```
"?num=2&sim_p[]=value1&amp;sim_p[]=value2"

array(3) {
  ["num"]=>
  string(1) "2"
  ["sim_p"]=>
  array(1) {
    [0]=>
    string(6) "value1"
  }
  ["amp;sim_p"]=>
  array(1) {
    [0]=>
    string(6) "value2"
  }
} 
```

请注意，您使用`&amp;`而不是 内爆`&`。这使得查询解析为带有 key 的 $_GET 中的另一个项目`"amp;sim_p"`。

这将起作用：

```
$url = 'My Library.php?num='.$k.'&sim_p[]=' . 
       implode('&sim_p[]=', array_map('urlencode', $sim_p)); 
```

# ruby-on-rails - 允许在带有轮胎的 ElasticSearch 中过滤的术语不存在

> ID：13768346
> 
> 赞同：3
> 
> 时间：2012-12-07T17:48:13.530
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我有一个要过滤的布尔字段，但我想获取该字段具有特定值或根本没有填充该字段的文档。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T23:15:55.603

有两种处理方法。首先，您可以在[映射](http://www.elasticsearch.org/guide/reference/mapping/core-types.html)`null_value`中使用属性来指定应如何索引空值。或者，您可以使用或过滤器以及或过滤器来扩充您的查询。[`exists`](http://www.elasticsearch.org/guide/reference/query-dsl/exists-filter.html)[`missing`](http://www.elasticsearch.org/guide/reference/query-dsl/missing-filter.html)[`bool`](http://www.elasticsearch.org/guide/reference/query-dsl/bool-filter.html)[`or`](http://www.elasticsearch.org/guide/reference/query-dsl/or-filter.html)

# combobox - 是否需要在填充时选择一个默认值，而不是稍后为组合框选择一个值？

> ID：13768347
> 
> 赞同：1
> 
> 时间：2012-12-07T17:48:26.427
> 
> 标签：combobox, default-value, html4

使用我在互联网上找到的示例：

```
<select name="Company">
 <option value="08">08</option>
 <option value="09" selected>09</option>
 <option value="33">33</option>
 <option value="18">18</option>
 <option value="17">17</option>
</select> 
```

如您所见，第二个元素在填充时默认。 **有没有办法在列出值后选择第二个元素作为默认值？**

```
<select name="Company">
 <option value="08">08</option>
 <option value="09">09</option>
 <option value="33">33</option>
 <option value="18">18</option>
 <option value="17">17</option>
</select>

<!-- HTML 4 code that selects the 2nd element goes here--> 
```

就我的环境而言，它确实需要与 HTML 4 兼容。我无法找到这是否可能或完成此操作的语法。有一个服务器端程序将生成稍后进行选择的 HTML。如果您有兴趣，服务器端语言是 PowerOn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:15:30.493

是的，您可以，但您不能为此使用 HTML。您必须编写一些客户端语言，例如 JavaScript。

```
<select name="Company" id="Company">
    <option value="08">08</option>
    <option value="09">09</option>
    <option value="33">33</option>
    <option value="18">18</option>
    <option value="17">17</option>
</select>

<script type="text/javascript">
    document.getElementById('Company').value = "09";
</script> 
```

我建议你也阅读一些[JavaScript 资源](http://www.w3schools.com/js/default.asp)和[jQuery](http://www.jQuery.org)。这将非常有用。

# ruby - Ruby 模块包含

> ID：13768349
> 
> 赞同：0
> 
> 时间：2012-12-07T17:48:44.213
> 
> 标签：ruby, module

如果我有一个类和一个模块：

```
class Foo
end

module WhackyFoo
  def whacky
    puts 'shits whacky!'
  end
end 
```

为什么我可以这样做：

```
include WhackyFoo
Foo.new.whacky
# => shits whacky! 
```

有人可以解释或指出我解释这种用法的 Ruby 文档吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:52:14.467

因为当您在顶层包含模块时，它会被包含在一个特殊的对象`main`中。上定义的任何方法`main`（包括那些包含在模块中的方法）都成为`Object`（因此，所有对象）的私有实例方法。这就是它起作用的原因。

如果您将模块包含到“普通”类（不是顶级`main`）中，它的行为与您预期的一样

```
module WhackyFoo
  def whacky
    puts 'shits whacky!'
  end
end

class Foo
end

class Bar
  include WhackyFoo
end

Bar.new.whacky # >> "shits whacky!"

Foo.new.whacky # ~> -:16:in `<main>': undefined method `whacky' for #<Foo:0x007fa92984d968> (NoMethodError) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:52:31.020

最终`include`在 Object 上调用，这就是 ruby​​ 中的一切归结为。由于每个类都继承自 Object，因此您在模块中定义的方法最终将包含在每个类中。

# php - 使用 `if(count($_POST) > 0)` 检查是否有任何数据已在 PHP 中发布是否有任何潜在问题？

> ID：13768351
> 
> 赞同：1
> 
> 时间：2012-12-07T17:49:11.057
> 
> 标签：php, forms, post

我一直在寻找一种万能的方法来轻松确定是否通过任何 HTML 表单发布了任何用户数据——而不必担心每个表单的复杂性——以便轻松禁止未注册用户在地点。

假设 Form 的`action`属性 always `POST`，使用时是否有任何潜在问题：

`if(count($_POST) > 0)`

检查是否发布了任何数据？

换句话说，是否存在即使用户没有通过 提交任何信息的情况`count($_POST)`，`> 0`或者**即使**用户确实`POST`通过提交了**任何**信息的情况？`count($_POST)``== 0`**`POST`**

 **（我第一次尝试，但即使用户没有提交数据`isset($_POST)`，它也会返回，但它不起作用。）`true``POST`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:52:26.480

您可以使用`empty($_POST)`, 检查 isset 和 null / 空白值。但是由于 $_POST 将始终设置，您将主要检查它是否为空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:11:59.790

这将是确定一个或多个值是否已通过 POST 发送的最简单方法。

```
if ($_POST) {
    // it is 100% reliably implied that count($_POST) > 0
} 
```

但是，有时您可能会收到不包含任何键/值的表单帖子。一个示例是“通过单击复选框接受我们的服务条款”类型的表单，其中唯一的表单字段是复选框或提交按钮。复选框名称/值对仅在复选框被选中时发送，并且提交按钮名称/值并不总是由浏览器发送。$_POST 可能没有条目的另一个示例可能是文件上传表单。一个好的表单处理程序将在这些场景中正常运行。您可以使用以下内容在所有情况下检测发布请求。

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // its a post request, although we may have 0 posted values
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T17:58:11.670

如果您只关心发布为`application/x-www-form-urlencoded`（即来自典型表格）的数据，那么`count`或`empty`应该足以检查。

如果您正在寻找任何类型的原始数据 POST 输入，您应该使用：

```
if(empty(file_get_contents("php://input"))) {
   // there is no POST data
} 
```

`application/json`我应该补充一点，除了处理原始 POST 数据（即或一些类似的非表单请求）的情况外，实际检查是否根本没有发布任何数据可能没有多大用处。通常，您只对处理脚本期望的特定数据感兴趣。所以这本质上是无用的代码，因为您仍然需要检查该特定数据（即`empty($_POST['some_field'])`）的存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T17:51:25.327

好吧，您不会期望自己制作的页面会出现什么，这有点奇怪，但是不，这没有任何问题。

原因`isset($_POST)`不起作用，因为它总是设置的（它是超全局的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T17:53:17.570

如果您的所有表单都是相同的，并且没有来自其他服务器的任何特殊或奇怪的请求，`count()`那么应该可以正常工作。**

# arrays - Coffeescript / Node.js：如何从对象数组中删除重复对象？

> ID：13768353
> 
> 赞同：1
> 
> 时间：2012-12-07T17:49:16.590
> 
> 标签：arrays, node.js, object, coffeescript

我怎样才能打开这个对象数组（其中有一些重复的对象）：

```
items =
  [
    { TYPEID: 150927,  NAME: 'Staples',    COLOR: 'Silver' },
    { TYPEID: 1246007, NAME: 'Pencils',    COLOR: 'Yellow' },
    { TYPEID: 1246007, NAME: 'Pencils',    COLOR: 'Blue'   },
    { TYPEID: 150927,  NAME: 'Staples',    COLOR: 'Black'  },
    { TYPEID: 1248350, NAME: 'Staples',    COLOR: 'Black'  },
    { TYPEID: 1246007, NAME: 'Pencils',    COLOR: 'Blue'   },
    { TYPEID: 150927,  NAME: 'Staples',    COLOR: 'Silver' },
    { TYPEID: 150927,  NAME: 'Fasteners',  COLOR: 'Silver' }
  ] 
```

进入这个：

```
items =
  [
    { TYPEID: 150927,  NAME: 'Staples',    COLOR: 'Silver' },
    { TYPEID: 1246007, NAME: 'Pencils',    COLOR: 'Yellow' },
    { TYPEID: 1246007, NAME: 'Pencils',    COLOR: 'Blue'   },
    { TYPEID: 150927,  NAME: 'Staples',    COLOR: 'Black'  },
    { TYPEID: 1248350, NAME: 'Staples',    COLOR: 'Black'  },
    { TYPEID: 150927,  NAME: 'Fasteners',  COLOR: 'Silver' }
  ] 
```

...通过过滤掉两个重复的对象（银色订书钉和蓝色铅笔）？

似乎应该有一个简单的方法来做到这一点，但我还没有找到一个简单的解决方案。

我见过一些 javascript / jquery 代码可以做到这一点，但我不是最擅长将它们转换成咖啡脚本。

更新：

通常会有不同的对象具有非常相似的属性。

在实际应用中，每个对象都有 25 个属性的潜力。

如果每个属性都相等，我只想删除对象。

**更新 2**

这是最终为我工作的代码 - （感谢**rjz**）

```
unique = (objAry, callback) ->
  results = []

  valMatch = (seen, obj) ->
    for other in seen
      match = true
      for key, val of obj
        match = false unless other[key] == val
      return true if match
    false

  objAry.forEach (item) ->
    unless valMatch(results, item)
      results.push(item)
  callback null, results 
```

这就是我所说的：

```
unique items, (err, items) ->
  console.log items 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:53:42.843

根据您想要检查相等性的深度，您可能只是假设该`USERID`字段的唯一性并执行以下操作：

```
ids = []    # Contains list of "seen" IDs
result = [] # Contains list of unique users

users.forEach (u) -> 
  if result.indexOf(u.USERID) == -1
    result.push(u)
    ids.push(u.USERID) 
```

如果您需要进行更深入的匹配并且没有可用的主键（可能是更大问题的标志），您可以创建一个更复杂的相等测试：

```
valMatch = (seen, obj) ->
  for other in seen
    match = true
    for key, val of obj
      match = false unless other[key] == val
    return true if match
  false

result = []
seen = []

data.forEach (datum) -> 
  unless valMatch(result, datum)
    result.push(datum)
    seen.push(datum) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:50:18.293

我会使用 underscore.js 并尝试这样的事情

```
result = item[0] for item in _.groupBy(users, (user) => user.USERID) 
```

它没有经过测试；-) 显然这假设我们只检查 USERID

如果您不能只检查 USERID，您当然可以将所有对象转换为 json 字符串，然后比较 json 字符串

```
result = item[0] for item in _.groupBy(users, (user) => user.toJSON()) 
```

显然，这是一个肮脏的 hack，它依赖于所有浏览器和引擎按创建/分配顺序序列化对象及其插槽的事实。

因此，无论如何，rjz 的解决方案肯定是更好的解决方案，但这很可能也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-27T03:31:25.103

这是一个老问题 - 但老歌是......

让我们加入数组中的对象：（将所有值放入一个数组并将其加入一个字符串）

```
join_object=(o)->
    ["#{attr}:#{value}" for attr, value of o].join() 
```

这会为每个 obj 生成类似的输出。

```
 TYPEID:150927,NAME:Staples,COLOR:Silver 
```

并让我们对“独特”数组的咖啡方式进行深度独特的修改：

```
Array::unique_deep = ->
    output = {}
    output[join_object(@[key])] = @[key] for key in [0...@length]
    value for key, value of output 
```

短而节省。

结果：

```
Array::unique_deep = ->
    join_object=(o)->
        ["#{attr}:#{value}" for attr, value of o].join()
    output = {}
    output[join_object @[key]] = @[key] for key in [0...@length]
    value for foo_key, value of output 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-02-11T06:59:36.097

```
Array::uniq = ->
    unique=(v, k, self) ->
        self.indexOf(v)==k
    @.filter(unique)

# console.log([1,2,3,3,4,4,5].uniq()) 
```

# java - 如何制作和连接具有上传、设置页眉和页脚报告的Java swing程序

> ID：13768360
> 
> 赞同：0
> 
> 时间：2012-12-07T17:49:39.730
> 
> 标签：java, swing, jasper-reports

我正在用*Java Swing*开发一个应用程序。我在我的应用程序中使用*JasperReports*和*iReport*。

我已经成功地在*JasperReports*和数据库之间建立了连接，并且还加载了*jrxml*文件。

我的问题是，在完成我的应用程序的开发后，我希望应用程序的用户能够设置他们的徽标，可以更改他们的页眉和页脚。我可以做到这一点的一种方法是创建一个用户界面，它是一个具有上传图像选项的*JFrame* + 更改报告的页眉和页脚。但是如何将我的*JFrame*组件与*JR*报告连接起来，以便在我的*JFrame*组件中所做的更改应该反映在报告中？

![这是我想要进行任何选择或更改的框架，应该反映在 Jasper 报告中](../Images/5f254823aea4049c923599f13c5383cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:45:27.920

我假设“上传”的含义是将图像保存在服务器计算机的硬盘中的特定路径中，然后将该路径保存在数据库中。

1.  将上传的图片转换为[InputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html)

    ```
    String imgPath = "[path_of_uploaded_image_here]";
    BufferedImage image = ImageIO.read(new File(imgPath));
    ByteArrayOutputStream os = new ByteArrayOutputStream();
    ImageIO.write(image, "gif", os);
    InputStream is = new ByteArrayInputStream(os.toByteArray()); 
    ```

2.  将转换后的图像作为参数传递给 jasperreport。（此处参数名称为 ENTITY_IMAGE）

3.  在 iReport 中，创建一个参数。此参数的数据类型应为`java.io.InputStream`

4.  拖动图像。转到图像属性。在图像属性下，将表达式类的值更改为，`java.io.InputStream`然后将图像表达式更改为 $P{ENTITY_IMAGE}。

# android - 位图 - 获得非常大的值

> ID：13768361
> 
> 赞同：0
> 
> 时间：2012-12-07T17:49:40.993
> 
> 标签：android, bitmap, grayscale

我在 Android 中使用位图。当我转换为灰度时，我应该期望每个像素的值在 0 到 255 之间。但是对于像素，我将其中一些设为 0，而将其他一些设为非常大的值。我不知道为什么。为什么我没有得到 [0,255] 范围内的值？我如何得到它？

我的代码是：

```
//Converting to grayscale
                        int width, height;
                        height = mybitmap.getHeight();
                        width = mybitmap.getWidth();    

                        Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
                        Canvas c = new Canvas(bmpGrayscale);
                        Paint paint = new Paint();
                        ColorMatrix cm = new ColorMatrix();
                        cm.setSaturation(0);
                        ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
                        paint.setColorFilter(f);
                        c.drawBitmap(mybitmap, 0, 0, paint);                
                        //Done bmpgrayscale is the grayscale image formed
                        Toast toast23=Toast.makeText(getApplicationContext(),"Grayscale made", Toast.LENGTH_LONG);  
                        toast23.show();
                        for (int i=0;i<210;i++){
                            for (int j=0;j<170;j++){

                                    Log.d("gray value is=", String.valueOf(bmpGrayscale.getPixel(i, j)));

                            }
                        } 
```

输出的一部分是：

```
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 0
12-07 23:14:28.022: D/gray value is=(958): 83886079
12-07 23:14:28.022: D/gray value is=(958): 317846001
12-07 23:14:28.022: D/gray value is=(958): 602992880
12-07 23:14:28.022: D/gray value is=(958): 669772779
12-07 23:14:28.022: D/gray value is=(958): 904719596
12-07 23:14:28.022: D/gray value is=(958): 971894253
12-07 23:14:28.022: D/gray value is=(958): 1223552493
12-07 23:14:28.022: D/gray value is=(958): 1223552493
12-07 23:14:28.022: D/gray value is=(958): 1223552493
12-07 23:14:28.022: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493
12-07 23:14:28.052: D/gray value is=(958): 1223552493 
```

请帮忙。我正在使用它将我的视图转换为位图，然后将位图转换为灰度。

编辑

```
//Converting to grayscale
                        int width, height;
                        height = mybitmap.getHeight();
                        width = mybitmap.getWidth();    

                        Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
                        Canvas c = new Canvas(bmpGrayscale);
                        Paint paint = new Paint();
                        ColorMatrix cm = new ColorMatrix();
                        cm.setSaturation(0);
                        ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
                        paint.setColorFilter(f);
                        c.drawBitmap(mybitmap, 0, 0, paint);                
                        //Done bmpgrayscale is the grayscale image formed
                        Toast toast23=Toast.makeText(getApplicationContext(),"Grayscale made", Toast.LENGTH_LONG);  
                        toast23.show();
                        for (int i=0;i<210;i++){
                            for (int j=0;j<170;j++){
                                    int a=bmpGrayscale.getPixel(i, j);
                                    ByteBuffer b = ByteBuffer.allocate(4);
                                  //b.order(ByteOrder.BIG_ENDIAN); // optional, the initial order of a byte buffer is always BIG_ENDIAN.
                                    b.putInt(a  );

                                    byte[] result = b.array();                                      
                                    Log.d("gray value is=", String.valueOf((int)result[0]));

                            }
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:07:07.810

不知道为什么你得到负值，可能是溢出的东西？这就是我所做的

```
int value = getLastBytes(1223552493); //Prints 237, the dec value of ED 

public int getLastBytes(long original) {
String hexBytes = Long.toHexString(original);
return Integer.parseInt(hexBytes.substring(hexBytes.length()-2),16);
} 
```

在您的情况下，您可能可以这样称呼它：

```
Log.d("gray value is=", getLastBytes(bmpGrayscale.getPixel(i, j))); 
```

# java - 将 PDF 与 iText 组合会导致“您要保存更改吗...？” 关闭对话框

> ID：13768362
> 
> 赞同：0
> 
> 时间：2012-12-07T17:49:42.737
> 
> 标签：java, stream, adobe, bytearray, itext

我在这里看到了关于这个问题的类似问题，尽管主要是在 C#/iTextSharp 的上下文中。

我有以下Java方法：

```
public byte[] prependCoversheet(byte[] pdfBytes)
{
    InputStream pdfTemplate = getClass().getResourceAsStream("coversheet.pdf");
    PdfReader reader = new PdfReader(pdfTemplate);
    ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
    ByteArrayOutputStream baos2 = new ByteArrayOutputStream();

    PdfCopyFields copy = new PdfCopyFields(baos1);
    PdfStamper stamper = new PdfStamper(reader, baos2);

    AcroFields coversheet = stamper.getAcroFields();

    /* Set all the field values here, etc. */
    coversheet.setField("fieldName", "Lorem ipsum dolor sit amet.");

    stamper.setFormFlattening(true);
    stamper.close();

    copy.addDocument(new PdfReader(baos2.toByteArray()));
    copy.addDocument(new PdfReader(pdfBytes));
    copy.close();
    baos.flush();

    return baos1.toByteArray();
} 
```

返回的`byte[]`内容非常好，并且可以在 Adob​​e Reader 中正确打开（与[我之前的类似但可能不相关的问题不同](https://stackoverflow.com/questions/12717756/strange-byte-behavior-reading-from-a-url)）。 **问题是当 PDF 关闭时，Reader 会抛出一个确认对话框：**

> **“您想在关闭之前保存对 'someFilename.pdf' 的更改吗？”**

显然，没有要保存的更改。SO 上的其他线程将初始缓冲区数量尾部的无关的、未使用的字节作为罪魁祸首。我不清楚该模式是否适用于这种情况，尽管如果我在调试模式下停止我的 IDE，并`byte[]`在返回之前检查，会有*大量*连续的字节为零 (0)。

但是，在这种情况下，我不知道如何确定字节数组的“正确”大小*应该*是多少。

**更新：**上面的代码示例现在反映了[hoaz](https://stackoverflow.com/users/1802512/hoaz)在评论中使用两个`ByteArrayOutputStream`s 的建议。这解决了问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:46:50.643

我会创建两个 BAOS 实例，一个用于压模，另一个用于拼接。

您的问题是您在冲压后将单个 BAOS 写入自身，这会混合内容。

# java - 如何引用范围/菜单之外的数组？

> ID：13768364
> 
> 赞同：2
> 
> 时间：2012-12-07T17:49:49.377
> 
> 标签：java, arrays, if-statement, scope

嗨，伙计们，一个快速的问题。我在下面创建一个 Java 菜单是一段代码示例。我想知道我是否在“if”语句中设置了 2 个数组，如何再次引用这些数组。我知道由于范围的原因，当移出 if 语句时，数组会被破坏。如果选择了选项 P，我想再次引用数组。

```
public static void determineOption (char option) {

        if (option == 'A') {

        int class_number = Console.getInt("Enter how many students between 1-10");

        while (class_number < 1 || class_number > 10)
        class_number = Console.getInt("Enter how many students between 1-10");

        System.out.println("");

        String[] name = new String[class_number];
        int[] score = new int[name.length];

        for (int i=0; i<class_number; i=i+1) 
        {
            name[i] = Console.getString("Enter Name");
            score[i] = Console.getInt("Enter score");
        }

        }
        else if (option == 'P') {

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:59:45.167

根据您的逻辑，似乎 HashMap 适合此。

```
HashMap<String,Integer> 
```

您的键是名称，值是分数。您可以将其定义为类变量并在 if else if 情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:54:25.283

这都是范围的问题。在语句之外声明数组`if`以将其置于方法本身的范围内，这样您就可以在整个方法中使用它（从其声明行到方法的末尾）。如果您需要在各种方法中使用该数组，您可能需要通过将其设为类字段来将该数组保留更长时间。

请注意，如果您的数组的初始化取决于不同的条件，您必须在使用它之前进行检查，因为在任何时候它可能还没有被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:51:34.263

将声明放在作用域的较高位置，如有必要，可能放在类上。换句话说，将数组从方法的本地变量更改为类上的变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T17:52:44.317

在块外部声明该数组`if`并在需要时对其进行初始化。

# c++ - C ++内存分配 - 将子类分配给类

> ID：13768369
> 
> 赞同：0
> 
> 时间：2012-12-07T17:50:10.813
> 
> 标签：c++, pointers, memory-management

编辑：代码都不是我的，都是给我的，我只是从对象分配方法的角度分析它。

我在内存分配方面遇到了很大的困难。我向你保证，在过去的 5 个小时里，我已经在这里查看了一百个示例。我知道这可能措辞不当，我提前道歉。

1.) 我不明白为什么第 2 版打印的是 A 类的 f() 而不是 B 类的。线

```
A* objA1 = objB; 
```

正在声明一个指针 objA1，它指向 A 类型的对象，并将其地址分配给 objB 指向的位置 B(2,3)。我读过这句话“如果它们是堆动态对象，那么你可以将 b1 分配给 a1”。当我调用 objA1->f() 时，我只是说去这个位置，哦，你找到了 B 吗？将其转换为 A 并调用 f()。

2.) 我会认为版本 1 切片 objB，因为它是说设置这个已经为 A 分配空间的对象，等于更大的 B。但是如果我把 cout << objB.bf; 在此分配之后，它仍然有效。是 A objA1 = objB; 不是静态声明 objA1？再一次，为什么不打印 B 的 f()？

3.) 两个 objA1 分配有什么区别？至于什么功能只能与两者之一一起使用。如果你想给它一个过时的分类，你能称之为“堆动态”吗？

```
class A {
  private:
    int a;
  public:
    A(int ia) {a = ia;}
    void f() { 
      cout << "Call to method f defined in class A" << endl;
    }
};
 class B : public A {
  private:
    int b;
  public:
    B(int ia, int ib) : A(ia) {b = ib;}
    void f() { 
      cout << "Call to method f specialized in class B" << endl; 
    }
    void bf() { 
      cout << "Call to class B own method bf" << endl; 
    }
}; 
// C++ driver - Version 1
void main() { 
  A objA = A(1);
  B objB = B(2,3);

  objA.f();
  objB.f();
  objB.bf(); 

  A objA1 = objB;
  objA1.f();
}

 // C++ driver - Version 2
void main() {
  A* objA = new A(1);
  B* objB = new B(2,3);

  objA->f();
  objB->f();
  objB->bf(); 
  A* objA1 = objB;
  objA1->f();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:54:32.623

`virtual`您需要像在基类中一样声明希望以多态方式（通过指向基的指针）调用的函数。当编译器`virtual`通过指向对象的指针（或引用）遇到对函数的调用时，它会在函数中查找对象的*动态类型*，而不是*静态类型*。因此，只需`virtual`将您的函数定义放在前面`A`：

```
virtual void f() { 
  cout << "Call to method f defined in class A" << endl;
} 
```

您的行`A objA1 = objB;`确实对您的对象进行了切片，只是将其中的一部分`B`复制到. 您将只能调用的成员函数。然而，它仍然是同一个对象——它仍然是 a并且具有所有可用的成员函数。你可以愉快地打电话，但不是nor 。`A``objA1``A``objA1``objB``B``B``objB->bf()``objA->bf()``objA1->bf()`

如果有疑问，只需查看您正在调用函数的对象的类型。如果是，`A`你只能调用`A`' 函数，同样使用`B`. 如果您通过指针访问并调用`virtual`函数，则调用属于`dynamic type`对象的函数（而不是指针所指的类型*）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:55:49.840

C++ 默认不使用动态调度。这意味着调用`p->f()`when`p`被声明为`X *p`将*始终*调用`X::f()`，而不管 指向的实例的动态类型如何`p`。要启用动态调度，必须声明该函数`virtual`。这与 Java/C# 形成对比，其中所有成员函数都是隐式的`virtual`。

“版本 1”中的切片确实发生了，但是，`objB`分配到某处绝不会影响。它`objA`是受切片影响的（即它忽略了`objB`不属于 的部分`A`）。

# jquery - jQuery mobile (Android) 的日期选择器

> ID：13768372
> 
> 赞同：1
> 
> 时间：2012-12-07T17:50:14.107
> 
> 标签：jquery, date, jquery-mobile

好的，我知道之前有人问过这个问题，但是哪个日期选择器最适合 jQuery 移动（对于 Android？）

日期框 [http://dev.jtsage.com/jQM-DateBox2/](http://dev.jtsage.com/jQM-DateBox2/)

Mobiscroll [http://mobiscroll.com/](http://mobiscroll.com/)

Mobi Pick [http://mobipick.sustainablepace.net/demo.html](http://mobipick.sustainablepace.net/demo.html)

Datebox 和 Mobiscroll 看起来更成熟，但 mobi pick 对我来说感觉更快。

我还听说某些手机 (Android) 无法使用 mobiscroll？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T17:33:28.723

根据我的经验，您应该在 Mobi Pick 和 Mobiscroll 之间进行选择。

## 日期框

我在我之前的安卓手机（galaxy S2）上发现了一些 Datebox 渲染问题，除此之外，Datebox 接近 Mobi Pick（性能虎钳 + 配置潜力）。Datebox 和 Mobi Pick 的主要区别在于最终设计。

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/ktbcP/](http://jsfiddle.net/Gajotres/ktbcP/)

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "datebox", "useNewStyle":true}'/> 
```

# 移动卷轴

Mobiscroll 有更多的选择和皮肤。它可以更好地集成到 jQM 中，并且具有更好的响应 UI，不幸的是它在 2.X android 手机上存在性能问题（iPhone 设备没有问题）。

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/WDjfR/](http://jsfiddle.net/Gajotres/WDjfR/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#demo').mobiscroll().date({
        invalid: { daysOfWeek: [0, 6], daysOfMonth: ['5/1', '12/24', '12/25'] },
        theme: 'android-ics',
        display: 'inline',
        mode: 'scroller',
        dateOrder: 'dd mm yy',
        dateFormat : "dd-mm-yy"
    });  
}); 
```

# 摩比皮克

如果您对它的 UI 外观感到满意，我会选择 Mobi Pick 而不是 Mobiscroll。如果您不使用 Mobiscroll 代替。

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/zyVjE/](http://jsfiddle.net/Gajotres/zyVjE/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#demo').mobipick({
        dateFormat: "MM-dd-yyyy"
    });
}); 
```

# 更多信息

可以在**[此处](http://www.gajotres.net/10-life-saving-jquery-mobile-plugins/)**找到详细的概述和示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:05:36.983

我致力于将 jquery ui datepicker 更新为 jquery 、 jqueryui 和 jquery mobile 的最新版本，因此适用于 jq1.9.1 jqui 1.10.2 和 jqm 1.3.0

这就是我如何更新用于移动设备的实验性 jqueryui datepicker：

[js bin 代码片段](http://jsbin.com/ukelis/1)

您可以链接到 datepicker 脚本而不是整个 jqueryui 包。

readonly 属性防止键盘出现在 ios

它只是 datepicker 的一个调整，使其在 jqm 上工作，目标是能够覆盖 datepicker 小部件的 _generatehtml 函数，并能够作为输入提供 te jquery mobile 主题以使用。所以你不需要那一大堆 addClass 并避免不必要的 DOM 操作

我只测试了 ios 6（iphone、ipad）和桌面（chrome、firefox、safari），请告诉我们其他测试。

希望它可以根据需要提供帮助:)

***更新 ：***

*   jQuery 移动 1.4.0 阿尔法 2
*   jQuery 2.0.3
*   jQueryui 1.10.3

[jsbin jqm 1.4.0](http://jsbin.com/inaJuME/1/)

它正在考虑 jquery mobile 1.4.0 的变化，并且需要少一点 dom 操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:46:47.953

为移动设备设计的[jQuery UI Datepicker](http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/)怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T19:56:36.093

我为我的项目选择了 Datebox - MobiPick 看起来不错，但没有日历。Datebox 也有一些非常好的国际化选项。就功能而言，Datebox 的操作模式比这里提出的其他东西（持续时间、日历、幻灯片、自定义模式）要多得多。

# jquery - 错误 505 部署 500.Blueimp 文件上传

> ID：13768376
> 
> 赞同：2
> 
> 时间：2012-12-07T17:50:21.663
> 
> 标签：jquery, asp.net-mvc, deployment, blueimp

当我发布我的应用程序时，我收到一个`HTTP 500`错误 - 但是当我在*localhost*上运行它时它可以正常工作。我正在尝试使用`text/plain`内容类型进行返回，但我也使用`content/json`.

我不确定我错过了什么 - 也许我在某个地方错了。这是我的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/upload/jquery.ui.widget.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/upload/jquery.iframe-transport.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/upload/jquery.fileupload.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {

        $('#fileupload').fileupload({

            dataType: 'json',
            url: '@Url.Action("cargarExcel", "Home")',
            formData: { example: '123456789876' },
            done: function (e, DataTotal) {

                $("#RespuestaCarga").append('<table id="tablaDatos"></table>')
                $("#tablaDatos").append('<th>Comentario</th><th>Cantidad</th>');

                for (var i = 0; i < DataTotal.result.olistaTabla.length; i++) {
                    comentario = DataTotal.result.olistaTabla[i].comentario;
                    cantidad = DataTotal.result.olistaTabla[i].cantidad;

                    $("#tablaDatos").append('<tr><td>' + comentario + '</td><td>' + cantidad + '</td>');
                }
            },
            add: function (e, data) {
                $("#btnsend").off('click').on('click', function (e) {
                    e.preventDefault();
                    data.submit();
                });
            }
        });

    });
</script>

<input id="fileupload" type="file" name="files" multiple="multiple"/>
<label id="namefile"></label>
<input id="btnsend" type="submit" value="Enviar" />
<div id="RespuestaCarga"></div> 
```

我的控制器

```
[HttpPost]
public ActionResult cargarExcel(HttpPostedFileBase files, string example)
{
    using (SqlBulkCopy bulkCopy = new SqlBulkCopy(oSqlConnIN))
    {
        bulkCopy.DestinationTableName = "tb_RutasMasivo_planning";
        bulkCopy.WriteToServer(data);
    }

    Conexion cn = new Conexion();

    DataSet dsRespuesta = new DataSet();
    dsRespuesta = cn.ejecutarDataSet("storedprocedure", example, Personid);

    dtresumen = dsRespuesta.Tables[0];
    dtDataRutas = dsRespuesta.Tables[1];

    mensaje = Util.GetJSONString(dtresumen);

    ds.Tables.Clear();

    Tabla_request tabla;
    tabla = HelperJson.Deserialize<Tabla_request>(mensaje);

    return Json(tabla,"text/plain");
} 
```

我的问题是，当我测试 localhost 工作正常，但是当我编译和发布项目时返回错误 500。似乎问题是由于返回类型。服务器发送的响应

![在此处输入图像描述](../Images/1bf009f3796769b32d5f3c25f5808e39.png) ![在此处输入图像描述](../Images/2096140ba31fcfb7168822e5d0013c18.png)

现在是已发布项目的图像![在此处输入图像描述](../Images/4b43925d7a58cf76d1ea16bf8ed9cc6b.png)

# javascript - Bootstrap 模态中选择的下拉菜单隐藏在模态页脚后面

> ID：13768382
> 
> 赞同：15
> 
> 时间：2012-12-07T17:50:57.040
> 
> 标签：javascript, css, twitter-bootstrap, jquery-chosen

我正在使用基于 twitter bootstrap 示例的模式。我有一个使用选择的选择元素。When the chosen select drops down, it is cut off by the modal footer. 我尝试在所选元素上添加 z-index 值，但没有任何效果。我正在倾斜地看着它，想知道是否只是因为选择元素与模态页脚 div 之前的 div 一起使用？我也为此使用了 selected 和 bootstrap 中的默认 CSS，所以我没有修改任何内容。

例子。 ![在此处输入图像描述](../Images/0686d5b03363d0ea74f058d78aa40ebe.png)

HTML：

```
 <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    ×</button>
                <h3>
                    Add Tag</h3>
            </div>
            <div class="modal-body">
                <div class="control-group">
                    <label for="addedTags">
                        Add tags (separated by commas)
                    </label>
                    <input id="addedTags" style="width: inherit" type="text">
                </div>
                <div class="control-group">
                    <label for="deleteTags">
                        Delete tags
                    </label>
                    <select style="display: none;" class="tags chzn-done" id="deleteTags" multiple="multiple" name="deleteTags"><option value="49">Accessories</option>
    <option value="69">AG_Adriano_Goldschmied</option>
    <option value="37">BCBG</option>
    <option value="38">Bebe</option>
    <option value="45">Bernie_Dexter</option>
    <option value="19">Black</option>
    <option value="6">Blue</option>
    <option value="66">Body-Con</option>
    <option value="71">Casual</option>
    <option value="39">Christian_Louboutin</option>
    <option value="64">Clear</option>
    <option value="50">Coach</option>
    </select><div style="width: [object Object]px;" class="chzn-container chzn-container-multi chzn-container-active" id="deleteTags_chzn">
<ul class="chzn-choices"><li class="search-field"><input value="Select Some Options" class="default" autocomplete="off" style="width: 149px;" type="text"></li></ul>
<div class="chzn-drop" style="left: 0px; top: 29px;"><ul class="chzn-results"><li id="deleteTags_chzn_o_0" class="active-result highlighted" style="">Accessories</li><li id="deleteTags_chzn_o_1" class="active-result" style="">AG_Adriano_Goldschmied</li><li id="deleteTags_chzn_o_2" class="active-result" style="">BCBG</li><li id="deleteTags_chzn_o_3" class="active-result" style="">Bebe</li><li id="deleteTags_chzn_o_4" class="active-result" style="">Bernie_Dexter</li><li id="deleteTags_chzn_o_5" class="active-result" style="">Black</li><li id="deleteTags_chzn_o_6" class="active-result" style="">Blue</li><li id="deleteTags_chzn_o_7" class="active-result" style="">Body-Con</li><li id="deleteTags_chzn_o_8" class="active-result" style="">Casual</li><li id="deleteTags_chzn_o_9" class="active-result" style="">Christian_Louboutin</li><li id="deleteTags_chzn_o_10" class="active-result" style="">Clear</li><li id="deleteTags_chzn_o_11" class="active-result" style="">Coach</li></ul></div></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">
                    Close</button>
                <input class="btn btn-primary" id="btnAddTags" value="Save" type="button">
                <span class="loader"></span>
            </div>
            <div class="alert alert-error hide">
                <button type="button" class="close" data-dismiss="alert">
                    ×</button>
                <strong>Error</strong> <span class="alert-msg"></span>
            </div>
            <div class="alert alert-success hide">
                <button type="button" class="close" data-dismiss="alert">
                    ×</button>
                <strong>Success</strong> <span class="alert-msg"></span>
            </div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-07T18:17:20.370

要使 z-index 起作用，您还必须设置 position = relative、absolute 或 fixed。也将 z-index 设置为 5000 可能会有所帮助。（模态在 2000 年代处于 az 索引处。

所以在你的CSS中我会添加这个：

```
.class-of-dropdown {
    position: relative;
    z-index: 5000;
} 
```

**编辑：** `.modal-body`类有一个 `overflow-y: auto`属性。您可能需要将其更改为：

```
.modal-body {
    overflow-y:visible;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T12:20:34.350

我也遇到了同样的问题，无法让@hajpoj 工作。我确实通过设置以下css让它工作：

```
.modal-body { 
    position: static; 
} 
```

# android - 无法将 Jackson 库添加到我的 android 项目

> ID：13768383
> 
> 赞同：1
> 
> 时间：2012-12-07T17:50:58.413
> 
> 标签：android, jar, jackson, eclipse-adt

我想在 Eclipse ADT 的 Android 项目中使用 Jackson JSON 2.1.1 解析器。我已经下载了 Jackson jar 文件（注释、数据绑定、核心）。并将它们作为外部 jar 添加到项目中，甚至按顺序包含它们并导出：

![在此处输入图像描述](../Images/518ad29212dfa8d8c1a49ddb49dd2f53.png)

![在此处输入图像描述](../Images/aaca91c4cf9d38d1a1c2c02fc8ddff82.png)

我在引用的库中看到了这些 jar，但我无法导入和使用它们： import org.codehaus.jackson 没有看到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T17:52:28.900

尝试在项目根目录中创建一个“libs”文件夹并将 jar 放入其中。Android 按照惯例处理这个问题。您无需将它们显式添加到您的构建路径中。

如果这不起作用，请确保您已下载正确的 jar。

当一切都失败时：刷新和/或项目->清理和/或退出并重新启动Eclipse

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T18:12:45.003

使用：
导入com.fasterxml.jackson.databind.ObjectMapper

# git - git pull 从 Github 到多个开发人员的实时服务器

> ID：13768384
> 
> 赞同：2
> 
> 时间：2012-12-07T17:51:01.440
> 
> 标签：git, web, github

我想要一个像下面这样的 Git 设置。

```
Developer 1 --push--> 
                     -->  Github  <--pull-- our server (public www folder)
Developer 2 --push--> 
```

主要目标是在 Github 存储库中保留我们网站的副本，并让开发人员在一切正常时拉到实时站点。

所以想法是开发人员 1 和 2 可以克隆 Github 存储库，在本地进行更改并将它们推回。当我们想要将这些更改反映到实时站点时，只需从服务器上的公共 www 文件夹运行 git pull 即可。

我已经有这样的设置供我自己使用，但服务器使用的是我自己的 Github 帐户/密钥。对于多个开发人员来说，这显然并不理想。所以我认为一个好方法可能是简单地设置一个通用的 Github 帐户，这样每个开发人员都可以简单地使用它来拉到实时站点。

但我不禁觉得有更好的解决方案。有没有更好的办法; 你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:48:07.713

这就是部署密钥的用途。查看[管理部署密钥](https://help.github.com/articles/managing-deploy-keys)

# smarty - prestashop 1.5 smarty 缺少后端的默认变量

> ID：13768385
> 
> 赞同：1
> 
> 时间：2012-12-07T17:51:08.133
> 
> 标签：smarty, prestashop

我正在为 PrestaShop 1.5开发一个模块**Abc这是我的目录**

```
23/10/2012  18:23             1.307 index.php
07/12/2012  18:27    <DIR>          tpl
               -> tpl dir:
               07/12/2012  18:27    <DIR>          .
               07/12/2012  18:27    <DIR>          ..
               07/12/2012  18:39               543 form.tpl
07/12/2012  18:36             4.507 abc.php 
```

这是我使用的代码：

```
class Abc extends Module
{
    public function getContent()
    {
             return $this->display(dirname(__FILE__), 'tpl/form.tpl');
        }
...
} 
```

但是，当我使用 smarty`{debug}`打印所有变量时

[根据官方文档](http://doc.prestashop.com/display/PS15/Creating+a+PrestaShop+module#CreatingaPrestaShopmodule-UsingSmarty)，我没有得到变量`{img_dir}`或`{shop_name}`我应该得到的变量。

我对放置模板的位置、主题的位置等感到困惑。我只需要后台（后端）页面。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:51:36.133

Smarty 变量具有全局范围。这意味着它们可以分配在一个文件中，您将能够在脚本的所有生命周期中的任何地方使用。这样，当您在前端触发 hook 或使用自己的 tpl 时，无论您使用哪个控制器，最有可能（尽管可能有覆盖控制器的例外）方法`FrontController::init()`都会被执行。在这种方法中，大多数这些全局 smarty 变量都被分配（[http://doc.prestashop.com/display/PS15/Creating+a+PrestaShop+module#CreatingaPrestaShopmodule-UsingSmarty](http://doc.prestashop.com/display/PS15/Creating+a+PrestaShop+module#CreatingaPrestaShopmodule-UsingSmarty)）：

```
$assign_array = array(
    'img_ps_dir' => _PS_IMG_,
    'img_cat_dir' => _THEME_CAT_DIR_,
    'img_lang_dir' => _THEME_LANG_DIR_,
    'img_prod_dir' => _THEME_PROD_DIR_,
    'img_manu_dir' => _THEME_MANU_DIR_,
    'img_sup_dir' => _THEME_SUP_DIR_,
    'img_ship_dir' => _THEME_SHIP_DIR_,
    'img_store_dir' => _THEME_STORE_DIR_,
    'img_col_dir' => _THEME_COL_DIR_,
    'img_dir' => _THEME_IMG_DIR_,
    'css_dir' => _THEME_CSS_DIR_,
    'js_dir' => _THEME_JS_DIR_,
    'pic_dir' => _THEME_PROD_PIC_DIR_
); 
```

在管理面板中使用钩子`FrontController::init()`不会被执行，这就是您需要分配所有这些变量以便在文件中使用它们的方式。

但是在管理面板的任何地方，您都可以使用在 method 中分配的 module_dir 和 module_template_dir `Module::display()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:40:55.650

如果您想将扩展配置表单/html 放在 Prestashop 的 Modules 选项卡中，最好/有必要不使用 smarty，它通常通过诸如带有 javascript、html 等的 displayForm 和公共方法 getContent() 来完成，您称之为函数并返回在此处显示所需的 html。[这是 1.4 的简单扩展的旧手册，](http://www.ecartservice.net/24072009/writing-your-own-prestashop-module-part-4/)但您可以从中得到一个想法。

从 1.5 开始，还可以使用默认字段设置表单，就像在[私有函数 initForm()的编辑模块中所做的那样](https://github.com/PrestaShop/PrestaShop/blob/master/modules/editorial/editorial.php)

为了能够在管理面板（使用模板）中使事情变得更加困难，我认为您需要在现有选项卡中[创建自己的选项卡或](http://doc.prestashop.com/display/PS15/Creating+a+PrestaShop+module#CreatingaPrestaShopmodule-Creatingthemodule%27sback-officetab,anditsclass)[创建自己的选项卡](http://www.prestashop.com/forums/topic/157626-how-does-admin-tabs-mvc-work/)

据我所知，在所有默认模块中，tpl css js 文件（mymodule.tpl）用于在前端显示内容并应放置在其中（对于 1.5 版本是这样，在 1.4 中，这些文件被放置在模块根文件夹中，它仍然是对于很多核心模块都是如此）

*   /modules/my_module/views/templates/{front||hook||admin}/my_module.tpl

*   /modules/my_module/views/templates/{front||hook||admin}/my_module.css

*   /modules/my_module/views/templates/{front||hook||admin}/my_module.js

    主题的前端功能（但假设它也适用于管理员）应该像[prestashop 指南中一样被覆盖覆盖模块的行为](http://doc.prestashop.com/display/PS15/Overriding+default+behaviors#Overridingdefaultbehaviors-Overridingamodule%27sbehavior)

# javascript - 如何使用 javascript 写入在后台打开的新选项卡

> ID：13768397
> 
> 赞同：1
> 
> 时间：2012-12-07T17:51:44.747
> 
> 标签：javascript, google-chrome, tabs, focus

我正在尝试做两件事，1\. 我需要在后台打开一个新选项卡而不给它焦点，2\. 我需要能够使用 javascript 写入该页面。（我只关心它在 Chrome 上的工作）

现在，如果我使用此代码....

```
var handle = window.open("text/html", '_blank');
handle.document.write(reportPath);
handle.document.title = "Export Report"; 
```

我可以打开一个新的并写信给它，但是，那个窗口被推到你的脸上，我不想发生这种情况，因为它严重地中断了我的用户的工作流程（我想把注意力集中在前一个窗口上）。

但是，我可以使用此代码....

```
var a = document.createElement("a");
a.href = "about:blank";
a.target='_blank'
var evt = document.createEvent("MouseEvents");
//the tenth parameter of initMouseEvent sets ctrl key
evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, true, false, false, false, 0, null);
a.dispatchEvent(evt); 
```

效果很好（它在后台打开新选项卡），但是，我无法写入打开的新窗口，因为我无法获得新窗口的句柄。

有人可以告诉我如何使用第一种方法打开该窗口而不给它焦点，或者告诉我如何使用第二个窗口，但以某种方式获取该窗口的句柄以便我可以写入它。

正如我之前所说，我只需要此代码即可为 Chrome 工作，它是我公司的网络应用程序，这里的每个人都使用 Chrome，所以我不在乎它是否适用于其他浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:05:46.387

除了上面的答案，您还可以为新窗口做一个 handle.blur() 失去焦点。

# c# - 动态构建的 LINQ 查询根据构建方式给出不一致的结果

> ID：13768400
> 
> 赞同：3
> 
> 时间：2012-12-07T17:51:58.290
> 
> 标签：c#, .net, linq

我正在尝试构建一个通用查询构建器来接受用户输入的搜索词。为了获得我需要的 where 子句，我必须解析术语并独立确定需要包含在子句中的字段。

请注意，此示例已*大大*简化以说明这一点。我知道在这种特殊情况下，整个结果可以表示为单个 Where() 语句。这段代码*将*在我的问题空间中工作（单个 Where() 语句不起作用），所以答案必须解决这里实际发生的事情，而不是如何使它更简单。

我从一个术语列表开始（这里表示为一个字符串 []，但最终将是一个更复杂类型的 IList，有助于指导查询构建器）：

```
 string[] terms = new string[] {
        "hope",
        "bob",
    }; 
```

第一个示例（如下）给出了正确的结果集（在三个搜索字段中的任何一个中具有“bob”的员工并且在三个匹配字段中的任何一个中都具有“hope”的任何记录）。这确实表明在链接 Where() 子句时从代码构建了正确的查询：

```
 var query0 = Sites.Where(s => s.SiteId < 200);
    query0 = query0.Where(s =>
        s.Employee.FirstName.Contains(terms[0]) ||
        s.Employee.LastName.Contains(terms[0]) ||
        s.Employee.Username.Contains(terms[0]));
    query0 = query0.Where(s =>
        s.Employee.FirstName.Contains(terms[1]) ||
        s.Employee.LastName.Contains(terms[1]) ||
        s.Employee.Username.Contains(terms[1]));
    query0.Dump(); 
```

（请注意，我不能使用这种直接方法，因为我不知道会有多少术语，其中一些将在 Employee 上，而另一些将在“站点”的其他字段上，所以在编译时我必须能够迭代并独特地对待每个术语。）

下一个示例（如下）是我*想要*做的，但它不尊重第一个术语，并且只匹配最后一个；无论“hope”是否出现在任何字段中，任何字段中包含“bob”的任何记录都包括在内：

```
 var query1 = Sites.Where(s => s.SiteId < 200);
    foreach (string term in terms)
    {
        query1 = query1.Where(s =>
            s.Employee.FirstName.Contains(term) ||
            s.Employee.LastName.Contains(term) ||
            s.Employee.Username.Contains(term));
    }
    query1.Dump(); 
```

最后一个示例（如下）在到达 Dump() 指令时给出了“索引越界”错误：

```
 var query2 = Sites.Where(s => s.SiteId < 200);
    for (int i = 0; i < terms.Length; ++i)
    {
        query2 = query2.Where(s =>
            s.Employee.FirstName.Contains(terms[i]) ||
            s.Employee.LastName.Contains(terms[i]) ||
            s.Employee.Username.Contains(terms[i]));
    }
    query2.Dump(); 
```

我认为 query2 是最有说服力的例子。就好像 LINQ 在构建整个查询之后尝试将变量绑定到 SQL 参数，并且它尝试对*所有*绑定使用 i==2 （这将是循环退出时 i 的值）。这也与我在 query1 中看到的结果一致。

有谁知道绑定是如何工作的以及我如何构建我的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:54:10.697

最后一个示例是您捕获*变量*而不是*值*的演示。到您执行查询时，`i`该值具有`terms.Length`，因此您遇到了问题。最小的变化是使用：

```
for (int i = 0; i < terms.Length; ++i)
{
    int copy = i;
    query2 = query2.Where(s =>
        s.Employee.FirstName.Contains(terms[copy]) ||
        s.Employee.LastName.Contains(terms[copy]) ||
        s.Employee.Username.Contains(terms[copy]));
} 
```

现在循环的每次迭代都有一个名为 的单独变量`copy`，它没有改变 - 所以你很好。

现在，使用`foreach`循环会更干净，但现在这取决于您是否使用 C# 5。在 C# 5 中，您可以使用：

```
// Only works in C# 5
foreach (string term in terms)
{
    query2 = query2.Where(s =>
        s.Employee.FirstName.Contains(term) ||
        s.Employee.LastName.Contains(term) ||
        s.Employee.Username.Contains(term));
} 
```

但在 C# 3 或 C# 4 中，这是行不通的，因为你`term`在整个循环中只有一个变量，你必须改用它：

```
// Works in C# 3+
foreach (string term in terms)
{
    string copy = term;
    query2 = query2.Where(s =>
        s.Employee.FirstName.Contains(copy) ||
        s.Employee.LastName.Contains(copy) ||
        s.Employee.Username.Contains(copy));
} 
```

# php - 将密钥存储在 php 文件中

> ID：13768407
> 
> 赞同：0
> 
> 时间：2012-12-07T17:52:48.793
> 
> 标签：php, security, passwords

> **可能重复：**
> [在哪里存储 PHP 应用程序的数据库登录凭据](https://stackoverflow.com/questions/5882882/where-to-store-database-login-credentials-for-a-php-application)

我想在一个 php 文件中存储一些密码（例如用于数据库连接）。但是出于安全原因，应该只有一个类能够访问这些数据。

所以我想，我把这些密码写在一个生成的php类的方法中。然后我将检查 debug_backtrace 以检查是否允许或拒绝访问。

现在我想将权限设置为仅执行，以便文件无法读取存储 php 类的文件的内容。唯一的问题是，包含不起作用，因为 php self 需要读取权限。

你有任何想法如何处理这个问题吗？

# python - 读取行并循环文件对象

> ID：13768413
> 
> 赞同：1
> 
> 时间：2012-12-07T17:52:58.730
> 
> 标签：python

我正在尝试从文件中读取行并在一个有效的循环中打印它们，但是在每个打印语句之后我都会得到换行符。

这是我的课

```
class FileReader:
    """Reads a file from args"""
    def __init__(self, args):
        input = ''
        with open(args, 'r') as rFile:
            for line in rFile:
                print(line) 
```

我的输入文件是这样的。（'$' 是新行）：

```
12 3$
2$
9$
5$
3 4$ 
```

我的输出变为：

```
12 3

2

9

5

3 4 
```

我得到这些空间的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:57:17.453

当您遍历文件时，产生的行包括行尾的换行符。使用`print()`带有*额外*换行符的输出这些行。

您可以使用`.strip()`从行的开头和结尾删除空格，包括换行符。

如果您*只想*删除末尾的换行符，请使用`line[:-1]`或`line.rstrip('\n')`删除它。

最后但同样重要的是，您还可以告诉`print()`不要添加换行符：

```
print(line, end='') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:53:51.913

每个`print`命令都会在末尾自动添加一个换行符。由于您的文件在每行末尾已经有一个换行符（根据定义），您的程序将连续输出两个换行符。

例如，试试这个：

```
for i in xrange(10):
    print(str(i) + '\n') 
```

您将获得与您的代码具有相同“问题”的东西。

如果要修复该行为，请替换`print(line)`为`print(line.rstrip())`，这将删除每行末尾的所有空白字符。如果您的行以制表符或空格结尾，这可能会有问题；在这种情况下，使用`print line.rstrip('\n')`，它只会删除换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:58:54.463

如果您不想要新行，请使用 rstrip。例如：

```
print(line.rstrip()) 
```

# database - 如何混淆或打乱 Wordpress 生产数据

> ID：13768415
> 
> 赞同：2
> 
> 时间：2012-12-07T17:53:08.880
> 
> 标签：database, wordpress, security, development-environment, privacy

我正在管理一个远程工作的开发人员团队。该网站由带有各种自定义插件的 Wordpress 提供支持。我为我们的网站分发源代码没有问题，但我很犹豫是否开始从数据库中传递生产数据，其中包括用户名和电子邮件等。

我知道这对于试图管理项目的生产和开发版本的开发人员来说是一个常见问题，所以我认为可能有一些常见的策略。我什至想到可能会有一些特定于 Wordpress 的解决方案，这会更好。任何有关如何处理此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:20:40.320

“混淆”或“加扰”或其他（在）[安全的方法，尽管模糊](http://en.wikipedia.org/wiki/Security_through_obscurity)绝不会形成或形成解决任何问题的安全方法，这将永远是正确的。

如果您担心将密码哈希泄露给开发人员，请不要使用密码哈希。使用[Wordpress+Oauth](http://wordpress.org/extend/plugins/tags/oauth)进行身份验证。

如果您担心开发人员获取其他信息，请给他们一个开发数据库快照。

# c++ - 在 eigen 中为顶点着色器设置投影、模型和视图转换

> ID：13768423
> 
> 赞同：10
> 
> 时间：2012-12-07T17:53:31.970
> 
> 标签：c++, opengl, game-engine, eigen

我环顾四周，从未见过，确定每个矩阵的确切作用以及它们形成的操作（因此实际的特征函数调用）。这就是我要找的。或者至少是对该过程的描述和几个带有特征函数的示例，以大致了解如何做到这一点！无论如何，如果它们有用，这里有一些细节：

我正在设置一个自上而下的透视游戏（因此相机向下固定但可以沿 XY 平面旋转和移动），但由于我将有一些 3D 元素（以及一些严格的 2D 元素）我认为透视投影效果很好。但我确实想知道形成正交投影需要哪些命令......

我有点理解视图，这将通过将相机坐标转换为原点，通过相机旋转旋转，将它们转换回它们所在的位置，然后缩放来完成？但究竟会涉及哪些功能和对象，我不确定。

对于存储任何给定对象的旋转，四元数似乎是最佳选择。那么这会决定模型投影吗？如果我设法将旋转简化为一个角度的 2D 情况，那么四元数会浪费吗？

并且这些矩阵是否都需要从每帧的身份重新生成？还是可以以某种方式对其进行更改以适应新数据？

我真的更喜欢为此使用 eigen 而不是手持库，但我需要一些东西来弄清楚到底发生了什么......我有所有的 GLSL 设置和统一矩阵被输入到渲染中对于我的 VAO，我只需要了解并制作它们。

编辑：
我的顶点着色器使用这个标准设置，将 3 个统一的 mat4 与位置 vec3 相乘：

```
gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(in_Position, 1.0); 
```

mat3s 和 vec2 是否可以用于定位以在纯 2D 情况下获得更好的性能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-09T09:26:49.260

下面是从简单输入创建视图和投影矩阵的 lookAt 和 setPerspective 函数的示例：

```
void Camera::lookAt(const Eigen::Vector3f& position, const Eigen::Vector3f& target, const Eigen::Vector3f& up)
{
  Matrix3f R;
  R.col(2) = (position-target).normalized();
  R.col(0) = up.cross(R.col(2)).normalized();
  R.col(1) = R.col(2).cross(R.col(0));
  mViewMatrix.topLeftCorner<3,3>() = R.transpose();
  mViewMatrix.topRightCorner<3,1>() = -R.transpose() * position;
  mViewMatrix(3,3) = 1.0f;
}

void Camera::setPerspective(float fovY, float aspect, float near, float far)
{
  float theta = fovY*0.5;
  float range = far - near;
  float invtan = 1./tan(theta);

  mProjectionMatrix(0,0) = invtan / aspect;
  mProjectionMatrix(1,1) = invtan;
  mProjectionMatrix(2,2) = -(near + far) / range;
  mProjectionMatrix(3,2) = -1;
  mProjectionMatrix(2,3) = -2 * near * far / range;
  mProjectionMatrix(3,3) = 0;
} 
```

然后，您可以将矩阵指定给 GL：

```
glUniformMatrix4fv(glGetUniformLocation(mProgram.id(),"mat_view"), 1, GL_FALSE, mCamera.viewMatrix().data());
glUniformMatrix4fv(glGetUniformLocation(mProgram.id(),"mat_proj"), 1, GL_FALSE, mCamera.projectionMatrix().data()); 
```

对于模型转换（最好将视图和模型分开），您可以使用带有 Scaling、Translation 和 Quaternion 类的 Geometry 模块来组装 Affine3f 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:51:55.050

着色器针对提供给渲染管道的每个顶点运行。为了获得最佳性能，通常您在 CPU 上执行“统一”操作，使用统一将详细信息传递给每个着色器实例，然后运行...

在您提供的示例中，最好只计算`mat4 * vec4`而不是`mat4 * mat4 * mat4 * vec4`，实际上：

> gl_Position = modelviewprojectionMatrix * vec4(in_Position, 1.0);

`modelviewprojectionMatrix`的结果在哪里`projectionMatrix * viewMatrix * modelMatrix`。对于您需要渲染的每组顶点，矩阵运算是在 CPU 端实现的。

您如何组织派生模型-视图-投影矩阵所需的数据，这取决于您的要求。实际性能取决于要渲染的场景图；例如，如果您只进行平移（可能只在 XY 平面上），则可以进行仅矢量平移，并在需要时生成矩阵。

矩阵乘以标准[代数运算](http://en.wikipedia.org/wiki/Matrix_multiplication#Matrix_product_.28two_matrices.29)。矩阵可以是[模型矩阵或投影矩阵](http://www.glprogramming.com/red/appendixf.html)。可以通过将两个变换矩阵相乘来连接变换。

# c# - 循环遍历自引用列表以添加到树视图中

> ID：13768426
> 
> 赞同：1
> 
> 时间：2012-12-07T17:53:56.077
> 
> 标签：c#, recursion, reference, treeview, self

我有一个这样的清单

*   身份证 | 姓名 | 标题 | 经理ID

*   1 | 彼得 | 首席执行官 | 空值

*   2 | 埃里克 | 经理 | 1
*   3 | 布拉德 | 经济 | 1
*   4 | 坑 | 销售 | 2
*   5 | 迈克 | 秘书| 4
*   6 | 麦克 | 复印机 | 5
*   7 | 本 | 董事会 | 空值

这个列表可以是无限的。这里的空值是因为它们没有管理器。如何将其添加到树视图并正确获取所有父节点和子节点？

需要在循环中完成此操作，并且无法更改它来自的数据库，我想做类似的事情吗？

```
private void treew(TreeNode treeNode, List<Employees> employ)
    {
        foreach (Employees option in employ)
        {
            TreeNode nodeOutput;
    //Add parent node
            foreach (Employees optionItems in employ)
            {
                if (option.ID == optionItems.ManagerID)
                {
        //Add childnode
                    TreeNode nodeOption;
                    nodeOutput.Nodes.Add(nodeOption);
                }
            }
            treeNode.Nodes.Add(nodeOutput);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:27:41.447

```
private List<Employees> employees;
private void treew(TreeNode root, int? managerID)
{
    foreach (Employees option in employ.Where(x => x.MangerID == managerID))
    {
        TreeNode nodeOutput;
        treew(nodeOutput, option.ID);
        root.Nodes.Add(nodeOutput);
    }
} 
```

要么将 TreeView 的根节点传递给第一次调用，要么创建另一个版本，将 TreeView 作为第一个参数并执行几乎相同的操作。

# java - 最佳解决方案是什么？

> ID：13768431
> 
> 赞同：-3
> 
> 时间：2012-12-07T17:54:27.810
> 
> 标签：java, arrays, algorithm

给定`n>=0`，创建一个具有模式的数组`{1,1, 2,1, 2, 3, ... 1, 2, 3 .. n}`。

作为一个例子，如果你给出`n=3`，你的方法应该返回数组为`{1,1,2,1,2,3}`.

我的解决方案在这里......

```
public int[] upSeries(int n) {

    int var1 = n + 1;        
    int var2 = n;
    int var3 = (var1*var2) / 2;
    int arr_length = var3;
    int value = 1;
    int index = 0;
    int[] arr = new int[arr_length];
    for (int j = 0; j < arr.length; j++) {
        for (int p = 0; p < j + 1; p++) {
            arr[index] = value;
            value++;

            if (index == arr.length - 1) {
                arr[index] = n;
                break;
            } else {
                index++;
            }
        }
        value = 1;
    }
    return arr;
} 
```

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:05:28.227

我清理了一下。但它的一般想法是一样的。您有一些可以删除的冗余。

```
public int[] upSeries(int i) {
    assert i >= 0;        

    int[] array = new int[(i * (i+1)) / 2)];  // Standard Sum
    int seriesnum = 1;
    int seriesmax= 1;
    for (int index=0; index < array.length; index++) {
        array[index] = seriesnum;            

        if (seriesnum++ == seriesmax) {
            seriesnum = 1;
            seriesmax++;
        }
    }

    return array;
} 
```

该解决方案通过恒定倍数更好。如果您正在寻找 Big-Oh，它们都是 O(i^2) 并且不可能做得更好。

如果您需要证明为什么不可能做得更好。首先证明返回数组的大小为((i) * (i+1)) /2)。然后提出你必须填充数组中的每个位置的论点。如果你做得比 O(i^2) 好，你还没有填满数组中的每个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:06:06.137

由于**整数算术**，您的代码对于偶数输入失败。

对于@RohitJain 显示的示例，您这样做了`(4+1)/2`，这错误地给了您 2。可能的解决方案是首先乘以`i*(i+1)`，然后再除以 2。

* * *

关于性能：
与输出相比，您在线性时间内运行 - 每个元素进行一次迭代，没有什么可以做的严重的事情，也许只有一些局部微优化。

* * *

**编辑：**

新代码还有一个问题——一个奇怪的边缘情况`n== 46341`，数组大小应该是 1073720970，这在理论上是可能的（AFAIK）。
但是，当乘以 46341*46342 时，您会超出范围，这会导致**整数溢出**- 以及一个负大小的数组。

这可以通过手动检查这种情况来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:03:31.700

Ruchi，你的循环需要`O(n^2)`时间——更准确地说，它需要`(n)(n+1)/2`时间。但是，由于这也是数组的大小，因此不可能做得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T18:05:57.697

你的 for 循环很好，这种类型的列表的效率是有限的，但你的代码可以清理一下。`var1`有点没用，只有在奇数`var2`时才有用`i`（否则它不准确），并且`var3`绝对没有任何作用。数组的长度将是 1 到`i`或 ∑<code>i 或的总和`int arr_length = i*(i+1)/2`。你甚至可以把这个总和放在你的数组声明中，这样更容易理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T18:25:58.097

这个怎么样。

```
public static void main(String args[]) {

    int n =3;
    StringBuilder sb = new StringBuilder();
    String prei = "";
    for(int i=1;i<n+1;i++){
        prei    =prei + sb.append(i).toString();
    }

     char [] myArr = prei.toCharArray();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T18:27:05.983

```
List<Integer> myarrayList=new ArrayList<Integer>();
public void show(int n){
for(int i=1;i<n+1;i++){
    if(n==1){
        myarrayList.add(n);
        break;
    }
    if(n>1){
        for(int j=1;j<i+1;j++){
            myarrayList.add(j);
        }
    }

}
}

public  int[] convertIntegers(List<Integer> integers)
{
int[] ret = new int[integers.size()];
Iterator<Integer> iterator = integers.iterator();
for (int i = 0; i < ret.length; i++)
{
    ret[i] = iterator.next().intValue();
}
return ret;
}
} 
```

首先**调用 show 函数，然后调用 convertIntegers**。

# c - 修复有符号和无符号警告之间比较的解决方案

> ID：13768433
> 
> 赞同：0
> 
> 时间：2012-12-07T17:54:33.613
> 
> 标签：c, gcc, casting, warnings, type-conversion

我正在寻找 C 编程语言中的解决方案来删除此警告：

> 有符号和无符号警告之间的比较

我不只是在类型的变量中做一个`cast`to ，而是认为如下：`unsigned``int`

```
#if MAX_NAME >= INT_MAX
  size_t name_size = 0;
#define INT_TYPE size_t
#else
  int name_size = 0;
  #define INT_TYPE int
#endif 
```

进而：

```
if(.. && name_size++ >= (INT_TYPE)sizeof(name)) {
//..
} 
```

你如何解决它？

此外，对宏名称的建议也`INT_TYPE`很受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:56:43.663

你的例子是有缺陷的：不管你怎么说，`size_t`在与`sizeof`. 即没有理由`name_size`成为`int`.

作为一般说明，只需对该变量使用“自然”符号。它归结为一个问题：`name_size`应该是消极的吗？

# logging - 更改 PHP 交互式 shell 历史的保存路径

> ID：13768437
> 
> 赞同：1
> 
> 时间：2012-12-07T17:54:53.110
> 
> 标签：logging, readline, php, interactive-shell

我曾经找到一种通过`php -a`php 的交互式 shell 禁用会话日志记录的方法。如何重新打开它？有没有办法将日志发送到另一个文件`~/.php_history`？我想我可能已将输出发送到`/dev/null`.

编辑：它显然仍然保存到`.php_history`文件中。在您完全退出 shell 之前，它不会保存。我仍然想知道如何将历史记录移动到另一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:50:35.183

不，目前（5.3.10 ubuntu）文件名`~/.php_history`是硬编码在 php 源代码中的。手表 ：

```
sapi/cli/php_cli.c (line 1127) 
```

如果您确实需要其他位置的历史文件，您可以使用符号链接。例如：

```
touch /tmp/.php_history
ln -s /tmp/.php_history /home/your_name/.php_history 
```

您也可以考虑向 php 开发人员发送功能请求。他们可能会为此引入一个 php.ini 指令。

# html - 如何使用 XPATH 提取粗体、罢工标签？

> ID：13768440
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:55:06.517
> 
> 标签：html, tags, html-agility-pack

我正在编写一个小型 vb 应用程序来使用 Html Agility Pack 提取一些文本。

我需要从 html 而不是文本节点中提取一些标签。

iParagraph 是包含标签的节点集合，例如：strike、u、strong、b 等。它还包含文本节点。我只需要跳过第一个文本节点，因为我总是知道它将是空的。这是因为我使用的是 CKEditor。

如果您需要进一步的解释，请询问。我会澄清的。

以下是我正在尝试的示例：

```
Dim paragraph = iParagraphNode.SelectNodes("//body/p and not([contains(text()]))") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:01:01.443

解决方案现在已经足够好了：

我只是决定执行以下操作以跳过下一个节点：

```
Dim test = iParagraphNode.SelectNodes.FirstChild.NextSibling.Name = "tag" 
```

# asp.net-mvc - ASP.NET MVC - 多态域类和视图模型

> ID：13768442
> 
> 赞同：2
> 
> 时间：2012-12-07T17:55:22.180
> 
> 标签：asp.net-mvc, oop, domain-driven-design, polymorphism

让我们考虑一个用于订单历史的域抽象类和考虑付款、取​​消、重新激活等事件的具体类（以下代码是一个非常简化的版本）

```
public abstract class OrderEvent
{
    protected OrderEvent(DateTime eventDate)
    {
        EventDate = eventDate;
    }

    public abstract string Description { get; }
    public DateTime EventDate { get; protected set; }
}

public class CancellationEvent : OrderEvent
{
    public CancellationEvent(DateTime cancelDate)
        : base(cancelDate)
    {

    }
    public override string Description { get { return "Cancellation"; } }
}

public class PaymentEvent : OrderEvent 
{
    public PaymentEvent(DateTime eventDate, decimal amount, PaymentOption paymentOption) : base(eventDate)
    {
        Description = description;
        Amount = amount;
        PaymentOption = paymentOption;
    }

    public override string Description { get{ return "Payment"; } }
    public decimal Amount { get; protected set; }
    public PaymentOption PaymentOption { get; protected set; }
} 
```

现在我必须在这个域模型上为我的 ASP.NET MVC 项目构建一个 ViewModel，它将所有事件封装到一个类中，以便在视图上进行网格展示。

```
public class OrderHistoryViewModel
{
    public OrderHistoryViewModel(OrderEvent orderEvent)
    {
        // Here's my doubt

    }

    public string Date { get; protected set; }
    public string Description { get; protected set; }
    public string Amount { get; protected set; }
} 
```

如何从具体类访问特定属性，例如 PaymentEvent 上的 Amount 属性，而不做一些像 switch 或 if 这样的臭事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:11:31.590

如果您使用 .NET 4 及更高版本，则正在进行[双重调度：](http://en.wikipedia.org/wiki/Double_dispatch)

```
public class OrderHistoryViewModel
{
    public OrderHistoryViewModel(OrderEvent orderEvent)
    {
       // this will resolve to appropriate method dynamically
       (this as dynamic).PopulateFrom((dynamic)orderEvent);
    }

    void PopulateFrom(CancellationEvent e)
    {
    }

    void PopulateFrom(PaymentEvent e)
    {
    }

    public string Date { get; protected set; }
    public string Description { get; protected set; }
    public string Amount { get; protected set; }
} 
```

Personally, I don't really mind doing if/switch statements in this type of code. This is application boundary code that doesn't need to be very pretty and having it be explicit can be helpful. What C# really needs are [algebraic type](http://en.wikipedia.org/wiki/Algebraic_data_type)s such as the [union type in F#](http://msdn.microsoft.com/en-us/library/dd233226.aspx). This way, the compiler will ensure that you handle all cases (sub-types) explicitly.

# jquery - 将 AngularJS / AngularUI 与 d3.js 和 DOM 效果一起使用

> ID：13768445
> 
> 赞同：8
> 
> 时间：2012-12-07T17:55:32.623
> 
> 标签：jquery, d3.js, angularjs, angular-ui

我有兴趣将 AngularJS 用于我正在从事的项目。我已经阅读了很多关于它的内容，观看了视频，完成了几个示例应用程序。这一切都是有道理的，我相信这些概念。

我正在做的项目需要做一些 DOM 特殊效果（动态移动页面周围的东西等）并结合一些 D3.js 图表。

我用过很多 jQuery；我明白并喜欢它。我已经使用了足够多的 AngularJS 来获得基础知识。我完全不明白如何`$("#my-element").slideUp()`从 Angular 中调用 jQuery 之类的东西。例如：

假设我在某处的页面中有以下 HTML：

```
<!-- somewhere in app.html -->
<div id="my-element">
  <p>Here's some data about your stuff...!</p>
  <button id="hider">Hide this (but with a cool transition)</button>
</div> 
```

在网站 JS 中：

```
// somewhere in app.js ... pretend it's all nice and DRY.
  function main () {
    $("#my-element button")
      .click(function () { $("#my-element").slideUp()});
  }    
  $(main); 
```

关于如何为 Angular 完成与此类似的事情，我能说的最好的方法是：

HTML

```
<!-- somewhere in app.html -->
<div ng-controller="Data">
  <p>Here's some data about your stuff...!</p>
  <button ng-click="slideUp()">Hide this (but with a cool transition)</button>
</div> 
```

CSS：

```
// somewhere in app.css
function Data ($scope) {
  $scope.slideUp = function () {
    $("#my-element").slideUp();
  }
} 
```

不知何故，感觉这不是正确的方法，但我不知道正确的方法是什么。

我看到有一个 AngularUI 项目看起来很整洁......但是“文档”假设读者非常熟悉 Angular，而不是新手。

我完全愿意接受 Angular 的想法，即声明性语法与 html 的数据绑定是可行的方法，我愿意全力以赴并采用样式、约定或其他任何东西。但我不知道如何开始使用不仅仅是简单的演示文稿。

有人可以指点我一个示例项目，它使用（并且最好演示使用）：

*   AngularJS
*   jQuery

如果提到 D3 =) 我并不特别关心 jQuery-UI，但它的存在并没有伤害到我。

# 笔记

我看到了[这个问题](https://stackoverflow.com/questions/12472244/how-to-integrate-angularui-to-angularjs)，但是对于 Angular 的新手来说，答案再一次没有太大帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T18:15:00.697

DOM 操作应该在指令中完成。我会看下面的教程。他们真的帮助我理解了这些概念：

AngularJS 指令教程第 1 部分 - [http://www.youtube.com/watch?v=Yg-R1gchccg](http://www.youtube.com/watch?v=Yg-R1gchccg) 第 2 部分 - [http://www.youtube.com/watch?v=nKJDHnXaKTY](http://www.youtube.com/watch?v=nKJDHnXaKTY)

最终你也会想知道你的控制器和指令是如何通信的，为此你想看看 $scope API：[http](http://docs.angularjs.org/api/ng) ://docs.angularjs.org/api/ng .$rootScope.Scope

您可以使用 $scope.$broadcast 发送事件，并使用 $scope.on 监听事件。

AngularJS 和 jQuery 可以很好地协同工作 - 只需在 Angular 之前包含 jQuery 脚本，你就可以开始使用了。

理解 AngularJS 中的概念需要时间，但它是一个非常全面且高效的框架。坚持下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:06:52.250

在 AngularJS 中，如果您需要与元素交互，则请求 $element。

```
function Data ($scope, $element) {
    $scope.slideUp = function () {
        $element.slideUp();
    }
} 
```

$element 应该具有所有 jQuery 功能，如果没有，您可能需要执行 $($element).slideUp() 之类的操作。虽然这看起来有点草率。

完全正确的方法是使用指令，但是自从我使用 AngularJS 以来已经有一段时间了，这种方法应该可以正常工作。

# android - 如何在android开发中将多个按钮的文本存储在一个变量中？

> ID：13768454
> 
> 赞同：0
> 
> 时间：2012-12-07T17:56:10.097
> 
> 标签：android, eclipse

我想将文本存储在变量中的按钮上。

我参考了[这篇](https://stackoverflow.com/questions/9383512/how-to-store-button-text-of-buttons-in-a-variable-android-calculator-project)文章，但它定义了“一个按钮一个变量”。我的应用程序将有大约 80-90 个按钮。如何将来自这些按钮中的任何一个的数据存储在单个变量中，并使用该公共变量进行进一步操作？

例子 -

我有按钮 - 1,2,3,4,5,6,7,8,9

我如何将它们初始化为`btn = (Button) findViewById`java中的单个按钮（...事物），从而将它们的文本放在一个变量中？因为我不能在 java 中分别定义 90 个按钮！

我怎样才能做到这一点？

这是我所做的代码..（一种完全愚蠢或低效的方式）-

它的基本作用是 - 在 12 个按钮中，无论哪个被按下，都将它与一个字符串连接起来。就像如果按下 1 字符串将是 01 之后如果按下 10 字符串将变为 0110 等等......

```
public class FEa extends Activity implements View.OnClickListener
{
    Button b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12;
    TextView tvDisp;
    String acc;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fea);
        initialise();
    }

    private void initialise()
    {
        b1 = (Button) findViewById (R.id.Btn1);
        b1.setOnClickListener(this);
        b2 = (Button) findViewById (R.id.Btn2);
        b2.setOnClickListener(this);
        b3 = (Button) findViewById (R.id.Btn3);
        b3.setOnClickListener(this);
        b4 = (Button) findViewById (R.id.Btn4);
        b4.setOnClickListener(this);
        b5 = (Button) findViewById (R.id.Btn5);
        b5.setOnClickListener(this);
        b6 = (Button) findViewById (R.id.Btn6);
        b6.setOnClickListener(this);
        b7 = (Button) findViewById (R.id.Btn7);
        b7.setOnClickListener(this);
        b8 = (Button) findViewById (R.id.Btn8);
        b8.setOnClickListener(this);
        b9 = (Button) findViewById (R.id.Btn9);
        b9.setOnClickListener(this);
        b10 = (Button) findViewById (R.id.Btn10);
        b10.setOnClickListener(this);
        b11 = (Button) findViewById (R.id.Btn11);
        b11.setOnClickListener(this);
        b12 = (Button) findViewById (R.id.Btn12);
        b12.setOnClickListener(this);
        tvDisp=(TextView) findViewById (R.id.TxtViewDisplay);

    }

    @Override
    public void onClick(View v)
    {
        // TODO Auto-generated method stub

        switch(v.getId())
        {
        case R.id.Btn1:

            if(acc == null)
            {
                acc = "01";
                tvDisp.setText("String Is:" + acc);
            }
            else
            {
                acc=acc + "0"+1;
                tvDisp.setText("String Is:" + acc);
            }

            break;
        case R.id.Btn2:

            if(acc == null)
            {
                acc = "02";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0"+2;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn3:

            if(acc == null)
            {
                acc = "03";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0"+3;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn4:

            if(acc == null)
            {
                acc = "04";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0"+4;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn5:

            if(acc == null)
            {
                acc = "05";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0"+5;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn6:

            if(acc == null)
            {
                acc = "06";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0"+6;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn7:

            if(acc == null)
            {
                acc = "07";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0"+7;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn8:

            if(acc == null)
            {
                acc = "08";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0"+8;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn9:

            if(acc == null)
            {
                acc = "09";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + "0" +9;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn10:

            if(acc == null)
            {
                acc = "10";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + 10;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn11:

            if(acc == null)
            {
                acc = "11";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + 11;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        case R.id.Btn12:

            if(acc == null)
            {
                acc = "12";
                tvDisp.setText("String Is:" + acc);     
            }
            else
            {
                acc = acc + 12;
                tvDisp.setText("String Is:" + acc);
            }
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:49:15.647

我认为您应该让每个按钮都调用相同的 onClick 方法，您可以在 xml 中为所有按钮设置该方法：

```
<Button android:layout_height="45dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="onButtonClick" /> 
```

然后在你的活动中，你可以很容易地积累你的字符串：

```
public class FEa extends Activity
{
   TextView tvDisp;
   String acc = "";

   @Override
   protected void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.fea);
       tvDisp = (TextView) findViewById (R.id.TxtViewDisplay);
   }

    public void onButtonClick(View v){
        Button theButton = (Button)v;
        acc = acc + theButton.getText().toString();
        tvDisp.setText("String Is: " + acc);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:32:26.030

我认为您可以使用某些视图（例如视图组）来包含您的按钮。然后你只需要在 for() 或 while() 中使用 getChildAt(int index) 来获取任何列表中的每个按钮并一个接一个地从中获取文本。

我从未尝试过，但我认为我可以工作。

希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:39:13.723

我尚未测试此代码，但您可以将所有按钮（在 xml 中）的标签设置为“按钮”，然后尝试将所有文​​本存储在 a 中`HashMap`：

```
HashMap<Integer, String> buttonTexts;
RelativeLayout mainLayout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.fea);
    buttonTexts = new HashMap<Integer, String>();
    mainLayout = (RelativeLayout)findViewById(R.id.myRelativeLayout);
    getTxtFromBtns();
    Log.i("HashMapValues", buttonTexts.toString());
}

public void getTxtFromBtns() {
    for (int i = 0; i <= mainLayout.getChildCount(); i++) {
        View view = mainLayout.getChildAt(i);
        String buttonChk = (String) view.getTag();
        if (buttonChk.equals("button")) {
            Button newBtn = (Button) view;
            String buttonText = (String) newBtn.getText();
            buttonTexts.put(view.getId(), buttonText);
        }
    }
} 
```

然后你可以简单地检索文本

```
String myButton = buttonTexts.get(R.id.Btn1); 
```

# ios - 何时调用 addChildViewController

> ID：13768458
> 
> 赞同：2
> 
> 时间：2012-12-07T17:56:28.420
> 
> 标签：ios

我正在尝试使用类似于 UINavigationController 的东西，以便可以自定义动画。首先，我只是使用 Apple 库存动画。这是我的容器视图控制器：

```
- (void)loadView {
    // Set up content view
    CGRect frame = [[UIScreen mainScreen] bounds];
    _containerView = [[UIView alloc] initWithFrame:frame];
    _containerView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    self.view = _containerView;

}

- (id)initWithInitialViewController:(UIViewController *)vc {
    self = [super init];
    if (self) {
        _currentViewController = vc;

        [self addChildViewController:_currentViewController];
        [self.view addSubview:_currentViewController.view];
        [self didMoveToParentViewController:self];

        _subViewControllers = [[NSMutableArray alloc] initWithObjects:_currentViewController, nil];
    }
    return self;
}

- (void)pushChildViewController:(UIViewController *)vc animation:(UIViewAnimationOptions)animation {
    vc.view.frame = _containerView.frame;
    [self addChildViewController:vc];

    [self transitionFromViewController:_currentViewController toViewController:vc duration:0.3 options:animation animations:^{

    }completion:^(BOOL finished) {
        [self.view addSubview:vc.view];
        [vc didMoveToParentViewController:self];
        [self.subViewControllers addObject:vc];
    }];
}

- (void)popChildViewController:(UIViewController *)vc WithAnimation:(UIViewAnimationOptions)animation {
    // Check that there is a view controller to pop to
    if ([self.subViewControllers count] <= 0) {
        return;
    }

    NSInteger idx = [self.subViewControllers count] - 1;
    UIViewController *toViewController = [_subViewControllers objectAtIndex:idx];
    [vc willMoveToParentViewController:nil];

    [self transitionFromViewController:vc toViewController:toViewController duration:0.3 options:animation animations:^{

    }completion:^(BOOL finished) {
        [vc.view removeFromSuperview];
        [vc removeFromParentViewController];
        [self didMoveToParentViewController:toViewController];
        [self.subViewControllers removeObjectAtIndex:idx];
    }];
} 
```

我有这个 ContainerViewcontroller 作为窗口的 rootViewController。我可以添加我的初始 viewController 并推送一个视图控制器。当我尝试弹出时，我得到

```
ContainerViewController[65240:c07] Unbalanced calls to begin/end appearance transitions for <SecondViewController: 0x8072130>. 
```

我想知道我做错了什么。我想我的 initialViewController 仍然在 secondViewController 下面。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:21:12.663

我不知道这是否是导致您的问题的原因，但不应该这样：

```
[self didMoveToParentViewController:toViewController]; 
```

是：

```
[toViewController didMoveToParentViewController:self]; 
```

另外，我不确定你在用 subViewControllers 数组做什么。它似乎是已经是 UIViewController 属性的 childViewControllers 数组的副本。

我不确定的另一件事是否正确。在您的 pop 方法中，您的 toViewController 是 _subViewControllers 数组中的最后一个控制器。你不希望它是倒数第二个吗？最后一个不应该是你要弹出的那个吗？您正在弹出 vc，这是您传递给方法的控制器，我不明白。

这就是我制作类似控制器的导航的方式。在其包含行为中，它就像一个导航控制器，但没有导航栏，并允许不同的过渡动画：

```
@implementation ViewController

-(id)initWithRootViewController:(UIViewController *) rootVC {
    if (self = [super init]) {
        [self addChildViewController:rootVC];
        rootVC.view.frame = self.view.bounds;
        [self.view addSubview:rootVC.view];
    }
    return self;
}

-(void)pushViewController:(UIViewController *) vc animation:(UIViewAnimationOptions)animation {
    vc.view.frame = self.view.bounds;
    [self addChildViewController:vc];
    [self transitionFromViewController:self.childViewControllers[self.childViewControllers.count -2] toViewController:vc duration:1 options:animation animations:nil
            completion:^(BOOL finished) {
            [vc didMoveToParentViewController:self];
            NSLog(@"%@",self.childViewControllers);
    }];
}

-(void)popViewControllerAnimation:(UIViewAnimationOptions)animation {
    [self transitionFromViewController:self.childViewControllers.lastObject toViewController:self.childViewControllers[self.childViewControllers.count -2] duration:1 options:animation animations:nil
                            completion:^(BOOL finished) {
                                [self.childViewControllers.lastObject removeFromParentViewController];
                                NSLog(@"%@",self.childViewControllers);
                            }];
}

-(void)popToRootControllerAnimation:(UIViewAnimationOptions)animation {
    [self transitionFromViewController:self.childViewControllers.lastObject toViewController:self.childViewControllers[0] duration:1 options:animation animations:nil
                            completion:^(BOOL finished) {
                                for (int i = self.childViewControllers.count -1; i>0; i--) {
                                    [self.childViewControllers[i] removeFromParentViewController];
                                }
                                NSLog(@"%@",self.childViewControllers);
                            }];
} 
```

编辑后：通过向 IB 中的所有控制器（包括自定义容器控制器）添加导航栏，我能够使用此控制器复制后退按钮功能。我为任何将被推送的控制器添加了一个条形按钮，并将它们的标题设置为 nil（如果我将标题保留为“项目”，我会遇到一些故障）。删除该标题会使按钮消失（在 IB 中），但您仍然可以在场景列表中与它建立连接。我向它添加了一个 IBOutlet，并添加了这段代码来获得我想要的功能：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    if (self.isMovingToParentViewController) {
        self.backButton.title = [self.parentViewController.childViewControllers[self.parentViewController.childViewControllers.count -2] navigationItem].title;
    }else{
        self.backButton.title = [self.parentViewController.childViewControllers[self.parentViewController.childViewControllers.count -3] title];
    }
} 
```

我已经展示了访问标题的两种不同方法——在 IB 中，您可以为我在 else 子句中使用的控制器设置标题，或者您可以像在子句的 if 部分中那样使用 navigationItem 标题. else 子句中的“-3”是必要的，因为在调用 viewWillAppear 时，正在弹出的控制器仍在 childViewControllers 数组中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T21:22:44.053

`addChildViewController`应该首先调用

对于添加/删除，您可以参考这个伟大的类别而无需担心何时调用它：

[UIViewController + 容器](https://github.com/xelvenone/UIViewController--Container-)

```
- (void)containerAddChildViewController:(UIViewController *)childViewController {

    [self addChildViewController:childViewController];
    [self.view addSubview:childViewController.view];
    [childViewController didMoveToParentViewController:self];

}

- (void)containerRemoveChildViewController:(UIViewController *)childViewController {

    [childViewController willMoveToParentViewController:nil];
    [childViewController.view removeFromSuperview];
    [childViewController removeFromParentViewController];

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T18:39:38.493

除了 rdelmar 的回答之外，您不应该调用 addView/removeFromSuperview`transitionFromViewController`为您执行此操作，来自文档：

> 此方法将第二个视图控制器的视图添加到视图层次结构中，然后执行动画块中定义的动画。动画完成后，它会从视图层次结构中移除第一个视图控制器的视图。

# c# - 由于数据库块导致的实体框架超时错误

> ID：13768462
> 
> 赞同：1
> 
> 时间：2012-12-07T17:56:32.183
> 
> 标签：c#, entity-framework, sql-server-2005

有一个使用实体框架的项目（v1 和 .NET 3.5）。它已经使用了几年，但现在被更多的人使用。开始出现超时错误，并已将其归结为几件事。为简单起见，假设我的数据库有三个表：product、part 和 product_part。大约有 1400 个零件和少量产品。

用户可以将任意数量的部件添加到产品中。我的问题是，当产品中添加了许多零件时，插入件需要很长时间。我认为这主要是由于网络流量/延迟，但插入所有 1400 需要大约一分钟。如果有人在插入这些记录时进入并尝试查看零件的详细信息，我会超时，并且可以在 SQL Server 的活动监视器中看到一个块。

我能做些什么来避免这种情况？如果以前有人问过这个问题，我很抱歉，我错过了。

谢谢，
尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:03:44.393

我认为根本问题是您的写入事务需要很长时间。EF 不擅长执行海量 DML。它在单独的网络往返和单独的语句中执行每个插入。

如果要插入 1400 行，并且性能很重要，请使用 TVP ( `INSERT ... SELECT * FROM @tvp`) 在单个语句中进行插入。或者切换到批量复制，但我认为只有 1400 行不会有优势。

如果您的读取事务被阻塞，这是一个问题，请打开快照隔离。这会 100% 照顾读者，因为他们从不会在快照隔离下阻塞。

# c++ - 向量 不允许。地图呢 ， ETC。？

> ID：13768463
> 
> 赞同：-1
> 
> 时间：2012-12-07T17:56:41.200
> 
> 标签：c++

> **可能重复：**
> [为什么 stack<const string> 不能在 g++ 中编译？](https://stackoverflow.com/questions/13213978/why-does-stackconst-string-not-compile-in-g)

我们知道这`vector<const int>`是不允许的。

但是`map<const int, int>`，`map<int, const int>`是否`map<const int, const int>`允许？

为什么不）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:11:36.367

向量中的项必须是可复制构造的或（从 C++11 开始）可移动构造的。

地图中的键只需要可破坏，而不是可复制/移动可构造，因此在这方面的要求要宽松得多。

至于为什么会这样，这很简单：当/如果调整向量的大小时，必须将现有缓冲区中的数据复制或移动到新缓冲区中。相比之下，地图通常将其内容存储为树中的节点。一旦创建了一个节点，它就会一直存在，直到它被销毁。虽然树有时确实需要平衡，但这只需要在节点之间操作指针——节点中的键在节点创建后永远不会被修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:04:41.513

您需要能够为存储在 STL 容器中的项目插入副本，这就是不允许这样做的原因。

`const_iterator`您仍然可以使用 const 引用来导出容器，以便通过类方法（getter）进行只读访问。

# sql - 如何将递增数字添加到数据库表中的多行

> ID：13768467
> 
> 赞同：0
> 
> 时间：2012-12-07T17:56:51.063
> 
> 标签：sql, database, sql-update, sybase

我需要将订单项添加到表格中。这是我所拥有的一个示例（规模要小得多）：

```
shiptoid,lineitem
642218,0
642218,0
642218,0
3041340,0
3041077,0
3041077,0 
```

这就是我需要的

```
shiptoid,lineitem
642218,1
642218,2
642218,3
3041340,1
3041077,1
3041077,2 
```

对于每个唯一的船体，我需要一个从 1 开始的递增行项目编号。我过去做过类似的事情，但我终其一生都无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:09:19.430

如果您使用的是 SQL Server，这将起作用：

```
declare @tbl table (shiptoid int)

insert into @tbl values (642218), (642218), (642218), (3041340), (3041077), (3041077)

select shiptoid, row_number() over (partition by shiptoid order by shiptoid) as lineitem    from @tbl 
```

这是它返回的内容：

```
shiptoid    lineitem
----------- --------------------
642218      1
642218      2
642218      3
3041077     1
3041077     2
3041340     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:18:25.570

**旧查询**

对于 SQL Server：

```
SELECT ROW_NUMBER() 
        OVER (ORDER BY ShiptoID) AS Row, 
    ShiptoID
FROM YourShip 
```

对于 MYSQL：

```
SELECT s.shiptoid, 
       @rownum := @rownum + 1 AS Row
  FROM yourship s, 
       (SELECT @rownum := 0) r 
```

对于甲骨文：

```
SELECT ShiptoID, ROWNUM AS Row, 
    ShiptoID
FROM YourShip 
```

* * *

## 更新的查询

对于 MySQL： * [SQLFIDDLE](http://sqlfiddle.com/#!2/5d6a9/2)：忽略同一页面中的其他表。

询问：

```
select y.shiptoID, y.row 
      from (select shiptoID,
      @row:=if(@x=shiptoID,@row,0) + 1 as row,
      @x:=shiptoID 
                from yourship
            order by shiptoID, row asc
    )as y 
```

结果：

```
SHIPTOID    ROW
642218      1
642218      2
642218      3
3041077     1
3041077     2
3041340     1 
```

对于 Oracle：Oracle 有`RANK()`，`DENSE_RANK()` `OVER PARTITION`类似于 MYSQL。

所以我们可以在 ORACLE 中使用类似于 MYSQL 的查询。但最好的部分是，我`ROWNUM`在`ORDER BY`子句中使用了；）**所以说最简单的逻辑/语法在所有 3**

参考：* [SQLFIDDLE](http://sqlfiddle.com/#!4/a5f9b/2)

询问：

```
SELECT shiptoID, 
DENSE_RANK() OVER 
(PARTITION BY shiptoID ORDER BY rownum) AS row
FROM yourShip
; 
```

结果：

```
SHIPTOID    ROW
642218      1
642218      2
642218      3
3041077     1
3041077     2
3041340     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:27:46.457

您没有提到您的 DBMS，所以这是 ANSI SQL（适用于大多数现代 DBMS）：

```
SELECT shiptoid,
       row_number() over (partition by shiptoid) as lineitem
FROM the_table; 
```

# powershell - 有没有更好的方法在 PowerShell 中的 foreach 之前检查集合是否为空？

> ID：13768468
> 
> 赞同：5
> 
> 时间：2012-12-07T17:56:56.493
> 
> 标签：powershell, foreach, powershell-2.0

我有一个部署**PowerShell 2.0**脚本的一部分，该脚本将潜在的 robots.dev.txt 复制到 robots.txt，如果它不存在，则不执行任何操作。

**我的原始代码是：**

```
$RobotFilesToOverWrite= Get-ChildItem -Path $tempExtractionDirectory -Recurse -Include "robots.$Environment.txt"
    foreach($file in $RobotFilesToOverWrite)
    {
        $origin=$file
        $destination=$file -replace ".$Environment.","."

        #Copy-Item $origin $destination
    } 
```

但是，与 C# 不同的是，即使 $RobotFilesToOverWrite 为 null，代码也会进入 foreach。

所以我不得不用：

```
if($RobotFilesToOverWrite)
{
    ...
} 
```

**这是最终代码：**

```
$RobotFilesToOverWrite= Get-ChildItem -Path $tempExtractionDirectory -Recurse -Include "robots.$Environment.txt"
if($RobotFilesToOverWrite)
{
    foreach($file in $RobotFilesToOverWrite)
    {
        $origin=$file
        $destination=$file -replace ".$Environment.","."

        #Copy-Item $origin $destination
    }
} 
```

**我想知道是否有更好的方法来实现这一目标？**

**编辑：这个问题似乎在 PowerShell 3.0 中得到修复**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T18:04:04.093

```
# one way is using @(), it ensures an array always, i.e. empty instead of null
$RobotFilesToOverWrite = @(Get-ChildItem -Path $tempExtractionDirectory -Recurse -Include "robots.$Environment.txt")
foreach($file in $RobotFilesToOverWrite)
{
    ...
}

# another way (if possible) is not to use an intermediate variable
foreach($file in Get-ChildItem -Path $tempExtractionDirectory -Recurse -Include "robots.$Environment.txt")
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T18:50:12.933

引自[http://blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx](http://blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx)

> ForEach 语句不会迭代 $null

在 PowerShell V2.0 中，人们经常会惊讶于：

PS> foreach ($i in $null) { '到这里' } 到这里

当 cmdlet 不返回任何对象时，通常会出现这种情况。在 PowerShell V3.0 中，您不需要添加 if 语句来避免迭代 $null。我们会为您解决这个问题。

# flash - Chrome Flash 播放器在 Flash 窗口中创建透明矩形

> ID：13768474
> 
> 赞同：8
> 
> 时间：2012-12-07T17:57:13.280
> 
> 标签：flash, google-chrome, visual-glitch

我在 Flash 视频播放器中遇到了一个奇怪的、非常难以重现的图形故障！到目前为止，仅在 Chrome 中。

![截屏](../Images/1fbe5e0185ccc3ff882e90ef2a4ca4bd.png)

“进入建筑物”下方的灰色矩形显示了 Flash 播放器所在的 html div 的背景颜色。“我们在哪里”链接下方有一个较小的矩形。这些是具有脚本悬停动画的精灵（包含其他几个精灵和显示对象）（它们缓慢地向位于其原点一定范围内的随机点移动）。故障与它们一起调整大小，有时会消失。

最奇怪的是它使整个 Flash 组件透明。创建视频播放器时，我运行此代码：

```
 graphics.clear();
        graphics.beginFill(0xff00ff, 1);
        graphics.drawRect(0, 0, _stage.stageWidth, _stage.stageHeight);
        graphics.endFill(); 
```

所以视频播放器的背面应该有一个明亮的颜色，如果我不加载视频播放器，我已经确认它在那里。然而，这种明亮的颜色并没有显示出来，而是包含播放器的背景 div 发光。

这对我来说绝对没有意义......而且我不知道如何调试它。我所知道的是，故障的出现取决于文本链接在屏幕上悬停的位置。

闪光灯以 WMODE 透明加载，这是我们需要的，因为它在半透明的一侧有一个可扩展的“翼”。

编辑：

它在 www.48hourgames.com 上直播。创建帐户后，您将看到以上面屏幕截图结尾的视频播放器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T16:11:50.957

这是 Pepper Flash 播放器的问题。Adobe 和 Google 已经为此努力了一段时间，这就是他们打算如何让 Flash 保持活力并在 Linux 平台上运行。

不幸的是，Pepper Flash 有很多缺陷。今年夏天的某个时候，Pepper Flash 成为 Chrome 中所有操作系统的默认 Flash 插件。它有很多问题没有真正的解决方案，除了禁用它（并希望 Adob​​e/Google 能解决这些问题）。

要禁用 Pepper Flash：

*   去：铬：//插件
*   单击右上角的详细信息图标
*   找到 Flash Player 插件部分，您可能会在此处安装多个版本的 Flash。我刚刚安装了 Chrome 来验证问题所在，并且安装了 Pepper Flash 以及 2 个“普通”版本的 Flash。
*   禁用路径中包含“PepperFlash”的 Flash 插件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T23:36:18.840

我能够非常可靠地重现该问题。几个想法：

*   听起来`wmode transparent`可能会经常出现问题。也许你可以让 Flash 元素的宽度为 100%，并在左/右边缘做一个无缝的背景。在 Flash 中，您可以防止它通过`stage.scaleMode = StageScaleMode.NO_SCALE;`. 如果 Flash 走完整个宽度，您可以摆脱`wmode transparent`并且可能会很好。
*   您是否尝试过设置`cacheAsBitmap`覆盖`true`电影的两个按钮？
*   因为伪影只出现在电影的结尾，所以当它是静止帧时，也许在电影达到这个最终状态时设置`cacheAsBitmap`到电影上会起作用吗？`true`
*   也许当它到达最终状态时用看起来相同的PNG图像换掉电影？
*   如果它们还不是PNG图像，也许用PNG图像交换两个按钮？

如果这些都不起作用...变得更加绝望。

*   也许将 SWF 中的侧边菜单（扩展 Flash 元素）剥离成它自己的 SWF 并放在电影 SWF 的顶部。这样，电影 SWF 可能会丢失`wmode transparent`，并且可能不会在侧面菜单上发生故障。
*   侧边菜单可以是 HTML。
    *   翻转状态可以是 HTML 元素。
    *   或者，侧边菜单可以调用 Flash 元素来切换翻转文本。对 Flash 的调用必须通过`ExternalInterface`类（[详细信息](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7ca7)）进行注册。

因为我没有代码来测试任何东西，所以这些都是*在黑暗中拍摄的*。

我将从`cacheAsBitmap`相关的想法开始。然后转到PNG创意（按钮，最后一帧）。从那里，尝试 Flash 元素的全角版本。如果这些都不起作用，您可能需要考虑新设计。如果这不是一个选项，我将继续拆分侧边菜单，并进行变体，如上所述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-04T04:01:57.673

我今天使用最新的 Flash Player 版本 11.6 + Chrome 27 遇到了这个问题。在某些计算机上它可以正常工作，而在其他几台计算机上却没有，这使得很难找到问题，因为它没有发生在我身边。

我相信这是 Flash 的错误，而不是 chrome，因为当我右键单击 -> 放大，右键单击 -> 缩小时，脏补丁消失了

所以我四处寻找一个肮脏的快速修复。

尝试过**cacheAsBitmap**方法：不起作用（此修复适用于“黑色透明”问题，但不适用于此问题）。

尝试了**两帧图像**方法：都不工作（不知道为什么）

我终于找到了一种修复方法（测试了几次）：

由于脏的白色补丁只在动画结束时出现，**我在舞台上放了一个透明的形状补间剪辑，让它永远运行**。它有效。

p/s：实际上我试图将其添加为评论而不是答案，但找不到方法，这很奇怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-30T14:00:35.523

今天在玩拼图游戏时，我在 Google Chrome 31.0.1650.63 上遇到了这个问题。我通常不使用这个浏览器，因此 flash 在每个浏览器中的工作方式都应该完全相同，所以当我听到白色矩形覆盖在我的游戏中时，我有点惊讶。将 wmode 设置为不透明而不是透明可以解决此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T22:33:17.633

同样在这里，在我的视频播放器中也是如此。

仅在 chrome pepper flash 中，并且仅当 swf 嵌入了透明 wmode 时。

今天我在网上找到了一个我可以忍受的修复/解决方法/黑客：

“如果你想用一个简单的技巧绕过这个问题，你可以绘制一个透明填充的电影剪辑。每一帧都会切换它的 'alpha' 属性。因为它的填充是透明的，所以它的 'alpha' 属性不会做任何事情，除了强制全屏重绘以更新 MovieClip 的 alpha 属性。这反过来又修复了由于 wmode 透明而导致的任何故障渲染。

通过添加 moueEnabled = false，您可以确保黑客不会干扰任何现有的鼠标事件”

```
import flash.display.MovieClip;
import flash.events.Event;

var redrawAll = new MovieClip();
redrawAll.mouseEnabled = false;
redrawAll.graphics.beginFill(0x000000, 0);
redrawAll.graphics.moveTo(0,0);
redrawAll.graphics.lineTo(stage.stageWidth, 0);
redrawAll.graphics.lineTo(stage.stageWidth, stage.stageHeight);
redrawAll.graphics.lineTo(0, stage.stageHeight);
redrawAll.graphics.endFill();
addChild(redrawAll);

addEventListener(Event.ENTER_FRAME, function(e:Event){
    redrawAll.alpha = (redrawAll.alpha == 0)? 1 : 0;                 
}); 
```

"

来源：[https ://code.google.com/p/chromium/issues/detail?id=173089#c12](https://code.google.com/p/chromium/issues/detail?id=173089#c12)

# r - R ggplot2 有交互选项吗？

> ID：13768475
> 
> 赞同：6
> 
> 时间：2012-12-07T17:57:14.247
> 
> 标签：r, ggplot2, interactive

我有一些数据想放在散点图中，当我翻转图表上的点时，我想弹出一个气泡并提供一些识别信息。

例如，如果我有一个包含学生姓名、身高和体重的数据框，我想分别在 x 和 y 轴上绘制身高和体重。然后，当我在绘图上滚动一个单独的点时，会弹出一个带有学生姓名的气泡。

`plot()`在基本调用中使用了一个有点类似的功能，`identify()`但它需要单击该点并且在我离开该点后不会消失。

这是一个示例 df 和绘图/识别代码：

```
> dput(df1)
structure(list(id = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10), var1 = c(0.469521932071075, 
0.077109789242968, 0.076340542640537, 0.461061101639643, 0.347079795086756, 
0.425340321380645, 0.738443679409102, 0.00931701785884798, 0.267918228404596, 
0.722170797875151), var2 = c(0.265150599181652, 0.557858553016558, 
0.715832461370155, 0.186717337928712, 0.626156869810075, 0.1359783844091, 
0.67408229294233, 0.528320853365585, 0.241800826275721, 0.80992470192723
), names = c("jim", "nancy", "suzy", "mark", "alex", "jen", "luz", 
"jeff", "paula", "amir")), .Names = c("id", "var1", "var2", "names"
), row.names = c(NA, -10L), class = "data.frame")

plot(df1$var1, df1$var2);grid()
identify(df1$var1, df1$var2, labels = df1$names) 
```

这是点击几个点后的示例：

![在此处输入图像描述](../Images/191123ea6b0439b314c98789c0d515af.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T20:06:41.370

TeachingDemos 包中的`HTKidentify`和`HWidentify`函数允许创建散点图并在您将鼠标悬停在数据点上时弹出信息，当您移动到新点时信息消失。第一个需要 Tk，第二个仅适用于 windows，并且都不使用 ggplot2（但两者都是纯 R 代码，因此您可以找到一种方法来修改它们以使用 ggplot2 或其他扩展）。

# android - 使用 getIdentifier 从可绘制的动态列表中填充数组失败

> ID：13768482
> 
> 赞同：2
> 
> 时间：2012-12-07T17:57:53.913
> 
> 标签：android, arrays, drawable

正如标题所说，当我尝试填充数组时，我的代码失败了，但它只适用于一项

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    int width=getWidth(this);
    int height=getHeight(this);
    String resolution= new String();
    tamanhos= new String[]{ "240x320","320x480","480x800","800x1280"};
    wallpapers= new String[]{ "fdonegrobrillo"};
    resolution=tamanhos[3]

    mImages=new int[wallpapers.length];
    Resources res= this.getResources();
    for(int i=0;i<wallpapers.length;i++){
    mImages[i]=res.getIdentifier(wallpapers[i]+resolution, "drawable",this.getPackageName());
} 
```

我有所有相应的可绘制对象。当我尝试只使用一个项目时，应用程序可以工作，但如果我将另一个项目添加到壁纸数组，它会引发错误（致命信号 11（SIGSEGV））

我尝试使用这样的硬编码数组

```
mImages=new int[]{
        this.getResources().getIdentifier("fdobyn800x1280",
                  "drawable", this.getPackageName())

}; 
```

我工作，但是当我添加另一个项目时它是一样的

```
mImages=new int[]{
        this.getResources().getIdentifier("fdobyn800x1280",
                  "drawable", this.getPackageName()),
        this.getResources().getIdentifier("fdonegrobrillo800x1280",
                          "drawable", this.getPackageName())

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:40:12.313

可能是不在壁纸阵列中的问题。它的代码工作正常，不会引发任何错误。

```
package com.example;
    import android.app.Activity;
    import android.content.res.Resources;
    import android.os.Bundle;

    public class MyActivity extends Activity {

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            //int width=getWidth(this);
            //int height=getHeight(this);
            String resolution= new String();
            String[] tamanhos= new String[]{"240x320","320x480","480x800","800x1280"};
            String[] wallpapers= new String[]{"fdonegrobrillo", "2", "3"};
            resolution=tamanhos[3];

            int[] mImages=new int[wallpapers.length];
            Resources res= this.getResources();
            for(int i=0;i<wallpapers.length;i++){
                mImages[i]=res.getIdentifier(wallpapers[i]+resolution, "drawable",this.getPackageName());
            }
        }
    } 
```

# javafx-2 - 设置 JavaFX TreeView 线型

> ID：13768483
> 
> 赞同：3
> 
> 时间：2012-12-07T17:57:57.757
> 
> 标签：javafx-2

在 Java Swing 中，有一个 JTree.linestyle 属性可以启用/禁用将树中的父节点连接到其子节点的线。JavaFX 2 中有类似的东西吗？在我为 JavaFX 看过的所有 TreeView 示例中，我都没有看到这个。我也没有看到要设置的 CSS 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:15:09.470

JavaFX 2.2 没有这种开箱即用的设置。[可以在JavaFX 问题跟踪器](http://javafx-jira.kenai.com)中提交功能请求。

您可以通过创建自定义节点`TreeCell`和`TreeItem`节点来实现线连接效果，并在这些节点上根据 TreeItem的各种可设置事件处理程序适当地设置[treeCell.disclosureNodeProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeCell.html#disclosureNodeProperty)和 TreeItem[图形属性。](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeItem.html#graphicProperty%28%29)

# mysql - 在 Ruby on Rails 2 中清理 MySQL 数据

> ID：13768493
> 
> 赞同：0
> 
> 时间：2012-12-07T17:58:45.350
> 
> 标签：mysql, ruby-on-rails, code-injection, sanitize

正在从用户提供的未知行数的 CSV 文件中读取数据。我遍历行，而不是单独将每一行单独插入数据库（可能会损害大量插入的性能），我将这些值连接成一个字符串：

```
insert_values += ", (#{params[:quantity]}, #{'#{params[:name]}', '#{Time.now.to_s(:db)}')" 
```

然后我构建完整的 sql 查询：

```
sql = "INSERT INTO `my_table` (`quantity`, `name`, `created_at`) VALUES"+insert_values 
```

最后，我执行它：

```
ActiveRecord::Base.connection.execute(sql) 
```

我想让数据免受恶意注入。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:09:07.940

如果您要这样做，那么您需要花时间使用 AR 的底层连接转义方法来转义进入数据库的每个字段。否则你只是自找麻烦。

或者...使用其他用于大量处理的东西，但仍为您处理转义... [https://github.com/zdennis/activerecord-import](https://github.com/zdennis/activerecord-import)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:12:24.217

您可以考虑使用 MySQL`LOAD DATA INFILE`语法来插入 CSV 数据。它针对上传进行了优化，不需要您手动构建易于注入的查询字符串。

这是 MySQL 文档的链接：

[http://dev.mysql.com/doc/refman/5.6/en/load-data.html](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)

```
LOAD DATA [LOCAL] INFILE '/path/to/data.csv'
INTO table
FIELDS TERMINATED BY ',' ENCLOSED BY '' ESCAPED BY '\'
LINES TERMINATED BY '\n' 
```

`LOCAL`如果应用服务器和数据库在不同的机器上，请注意使用。您可能需要根据 CSV 格式更改字段和行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T20:30:25.767

感谢所有有用的建议，这些建议使我走上了最后的道路。[在阅读了另一篇文章后](https://stackoverflow.com/questions/7145645/rails-how-to-sanitize-sql-in-find-by-sql?lq=1)，我最终将我的字符串更改为一个值数组，以利用 Rails 内置方法 sanitize_sql_array 。

```
placeholders = []
insert_values = []

csvrow.each do |row|
  placeholders << (?,?,?)
  insert_values << params[:quantity] << #{params[:name]} << {Time.now.to_s(:db)
end

query_string = "INSERT INTO `my_table` (`quantity`, `name`, `created_at`) VALUES #{placeholders.join(", ")}"] + insert_values
sql = ActiveRecord::Base.send(:sanitize_sql_array, query_string)
ActiveRecord::Base.connection.execute(sql) 
```

# java - 如何重构以避免将“特殊值”传递给 Java 方法？

> ID：13768494
> 
> 赞同：2
> 
> 时间：2012-12-07T17:58:52.977
> 
> 标签：java

我确信必须有一个标准的方法来做到这一点，但我搜索 Stackoverflow 的尝试失败了。

我有这样的方法：

```
public void processSomeWidgetsForUser(int userItemId) {
    Iterator<Widgets> iter = allWidgets.values().iterator();
    while(iter.hasNext()) {
        Widget thisWidget = iter.next();
        if (userItemId == -1 || thisWidget.getUsersItemId() == userItemId) {                 
             widget.process();
        }
    }
} 
```

如您所见，-1 是一个“特殊值”，表示所有进程。这样做可以避免在另一个名为 processSomeWidgetsForAllUsers 的方法中重复循环代码。

但我不喜欢这样的特殊值，因为它们很容易被误用或误解，这正是我现在必须解决的情况（有人认为 -1 意味着其他东西）。

我只能想到两种方法来改善这一点。

1.  有一个常量，包含 -1 称为 Widget.ALLWIDGETS 之类的东西，它至少是自记录的，但不会阻止代码使用 -1（例如，如果有人集成旧代码）
2.  更改方法以获取要处理的所有用户 ID 的列表，该列表可以为空，但这在性能方面似乎不是很好（需要先检索所有用户 ID，然后循环删除。如果数字列表中的小部件在检索 id 和删除之间发生变化

有没有更好的办法？我确定我遗漏了一些明显的东西。

上面的代码略有改动，所以可能无法编译，但你应该明白要点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:10:18.900

尽管有些多余，但一种相当简洁的自我记录方法可能是使用 3 种方法而不是 1 种方法；

制作您的原始方法`private`，并进行一个小的更改，即添加您的`static final int EXECUTE_ALL = -1`并在您的原始方法中使用它，然后添加两个新方法；

```
public void processWidget(int wID) throws IllegalArgumentException {
    if(wID == EXECUTE_ALL) throw new IllegalArgumentException();
    originalMethod(wID);
}

public void processAllWidgets() {
    originalMethod(EXECUTE_ALL);
} 
```

它使您的课程更加混乱，但就公开的方法而言，它更加清晰并且希望万无一失。您可以更改它以不引发异常并忽略任何无效的 id，这取决于您的情况。

这种方法当然有一个主要的缺点，它改变了类对其他类的显示方式，破坏了当前使用的所有东西，现在是私有的 originalMethod()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:01:38.393

1 号会很好地工作。请务必记录变量是什么，以便未来的编码人员（可能是您自己）知道它的含义。

```
/**This is the explanation for the below variable*/
public final static int ALL_WIDGETS = -1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:01:49.863

有一个像这样的外部方法：

```
static boolean idRepresentsAll(int id) {
    return id == -1;
} 
```

在这种情况下，如果您决定用不同的机制替换它，您只需将您的幻数替换为代码中的一个位置。

至少，你会想做这样的事情：

```
public static final int ID_REPRESENTING_ALL = -1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T18:14:46.267

您可以更改方法签名以在要处理所有这些时接受布尔值。

```
public void processSomeWidgets(boolean doAll, int userItemId) {
    Iterator<Widgets> iter = allWidgets.values().iterator();
    while(iter.hasNext()) {
        Widget thisWidget = iter.next();
        if (doAll || thisWidget.getUsersItemId() == userItemId) {                 
             widget.process();
        }
    }
} 
```

在我看来，这使它更明确，更容易阅读，因为没有特殊值。

# android - 将desk-clock android项目导入eclipse

> ID：13768497
> 
> 赞同：0
> 
> 时间：2012-12-07T17:58:56.380
> 
> 标签：android, eclipse

我通过以下方式将代码复制到我的计算机上

> svn checkout [http://desk-clock.googlecode.com/svn/trunk/desk-clock-read-only](http://desk-clock.googlecode.com/svn/trunk/)

进入文件夹`C:\Programming\desk-clock-read-only`

我尝试通过现有源中的 File/New/Other/Android/Android Project 创建项目。我选择`C:\Programming\desk-clock-read-only`路径。

出于某种原因，eclipse 只想导入`C:\Programming\desk-clock-read-only\res`. 源文件在其中，`C:\Programming\desk-clock-read-only`因此它们不会被导入。

只有一个空的 src 文件夹。

我该怎么做才能正确导入项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:26:48.210

I dont't know how the developer of this project managed it to run this but usually the java files belong inside the src folder and the manifest definitely not inside the res folder. If you change this Eclipse(or the IDE of your preference) might recognize it, but you'll maybe get some errors because just putting the java files inside the src folder shouldn't solve it. You actually need a package. Check your manifest for that.

# wordpress - Woocommerce/Wordpress 更新分层导航的瞬态值

> ID：13768500
> 
> 赞同：1
> 
> 时间：2012-12-07T17:59:14.897
> 
> 标签：wordpress, woocommerce, transient

我正在为 Wordpress 的 WooCommerce 插件编写一个插件，该插件允许从 excel 电子表格中导入产品。所有产品都可以正常导入，但我无法更新商店侧边栏中的分层导航。每个项目都有一个在导入时分配给它的制造商，并且制造商属性设置得很好。但是，分层导航没有更新 - 事实上，除非我手动更新项目，否则它甚至不会显示。

在进行了一些挖掘之后，看起来分层导航使用来自`wp_options`被调用的选项`_transient_wc_ln_count_(hash)`来存储具有该属性的项目的计数/ID。我认为这是我的脚本正常工作所需要的，但我找不到任何关于它的文档/示例。我希望只有一个函数可以调用来更新瞬态选项。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:49:53.923

所以我从来没有想出这个问题的确切答案，但我发现了一些有用的东西。在使用`wp_insert_post`最初添加帖子，然后使用生成的帖子 ID 插入帖子元（包括制造商元）后，我正在调用`wp_update_post`触发该项目的所有自动更新功能的函数，包括瞬态计数问题。现在我在边栏中的产品制造商计数是正确的。希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T13:35:42.283

上传后，您可以简单地调用`delete_transient( 'wc_attribute_taxonomies' );`

这就是创建瞬态的地方：http: [//oik-plugins.eu/woocommerce-a2z/oik_api/wc_get_attribute_taxonomies/](http://oik-plugins.eu/woocommerce-a2z/oik_api/wc_get_attribute_taxonomies/)

另请参阅：[https ://wordpress.stackexchange.com/questions/119729/create-attribute-for-woocommerce-on-plugin-activation](https://wordpress.stackexchange.com/questions/119729/create-attribute-for-woocommerce-on-plugin-activation)

# php - 对多维数组进行排序，在 PHP 中按键合并

> ID：13768501
> 
> 赞同：0
> 
> 时间：2012-12-07T17:59:23.367
> 
> 标签：php, multidimensional-array, merge, key

我有这个数组：

```
Array
(
    [0] => Array
        (
            [name] => Ben
            [matchedMovie] => Array
                (
                    [name] => Saw
                    [genre] => Horror
                    [patheMovie] => Texas Chainsaw 3D
                    [patheMovieGenre] => Horror
                    [score] => 100.00
                )

        )

    [1] => Array
        (
            [name] => Ben 
            [matchedMovie] => Array
                (
                    [name] => Shooter
                    [genre] => Action, Thriller
                    [patheMovie] => The Shining
                    [patheMovieGenre] => Horror, Suspense/Thriller 
                    [score] => 52.38
                )

        )

    [2] => Array
        (
            [name] => Dick
            [matchedMovie] => Array
                (
                    [name] => Resident Evil Movie
                    [genre] => Action/Horror
                    [patheMovie] => Texas Chainsaw 3D
                    [patheMovieGenre] => Horror
                    [score] => 63.16
                )

        )
) 
```

我想对它进行排序（不知道我是否完全正确）：

```
Array
    (
        [0] => Array
            (
                [name] => Ben
                [matchedMovie][0] => Array
                    (
                        [name] => Saw
                        [genre] => Horror
                        [patheMovie] => Texas Chainsaw 3D
                        [patheMovieGenre] => Horror
                        [score] => 100.00
                    )

                [matchedMovie][1] => Array
                    (
                        [name] => Shooter
                        [genre] => Action, Thriller
                        [patheMovie] => The Shining
                        [patheMovieGenre] => Horror, Suspense/Thriller 
                        [score] => 52.38
                    )

            )

        [1] => Array
            (
                [name] => Dick
                [matchedMovie][0] => Array
                    (
                        [name] => Resident Evil Movie
                        [genre] => Action/Horror
                        [patheMovie] => Texas Chainsaw 3D
                        [patheMovieGenre] => Horror
                        [score] => 63.16
                    ) 
            )
    ) 
```

这样matchedMovie 数组就在同一个名字下。我该怎么做？

我试过这个功能：

```
function group_by_key($array) {
        $result = array();
        foreach ($array as $sub) {
            foreach ($sub as $k => $v) {
                $result[$k][] = $v;
            }
        }
        return $result;
    } 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:09:17.847

只是快速刺一下。

```
function group_by_key($array){
    $result = array();
    foreach($array as $row){
        if(!isset($result[$row['name']]){
            $result[$row['name']] = array(
                'name'=>$row['name'],
                'matchedMovie'=>array($row['matchedMovie'])
            );
        } else {
            $result[$row['name']]['matchedMovie'][] = $row['matchedMovie'];
        }
    }
    return array_values($result);
} 
```

# javascript - 嵌入式 javascript 和 HTML 的安全性

> ID：13768502
> 
> 赞同：6
> 
> 时间：2012-12-07T17:59:26.597
> 
> 标签：javascript, ajax, security, embedding

我正在尝试为以下情况找到解决方案：

*   我有一个由 HTML、javascript、AJAX、广告等组成的**网络应用程序。**
*   我希望用户为我的应用程序/网站创建将**嵌入其中的****插件**做出贡献。
***   这个插件将使用类似的技术（ajax、HTML 等）创建，所以我需要允许插件运行自己的 javascript 代码。*   每个插件都将在一个页面中工作，该页面将包含一些用户信息和插件（如旧的 fbml facebook 应用程序）**

 **问题是插件也可以通过这种方式**调用来获取用户信息**。（因为插件的代码是嵌入的，它的域将与主网站相同，并且代码将完全在我的网站上）。

所以问题是：我怎样才能避免它并精确控制插件可以获得关于用户的哪些信息？

该插件不会被检查并且可以随时更改，因此阅读所有插件代码不是一个解决方案。

我对任何建议持开放态度，可能简单有效，并且可能不会将整个插件放在 iframe 中。

-- 编辑：当有创建应用程序的旧方法时，facebook 是如何做的？（现在只有 iframe，但是有 FBML 应用方式，他们是如何做到安全的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:08:14.260

您是否听说过允许任意代码执行的漏洞。哪个是最危险的攻击之一？

好吧，在这种情况下，您明确且自愿地允许任意代码执行，并且您几乎没有办法对其进行沙箱处理。

1）正如您所提到的，您可以在不同子域的 iframe 中运行“插件”以将其沙箱化。这样插件就无法访问您的 cookie 和脚本。

请注意，如果您希望插件与来自该域的服务进行通信，那么它将是跨域通信。因此，您要么需要求助于 JSONP，要么使用新的跨域访问控制规范。（即使用您的 Web 服务响应返回适当的标头 - Access-Control-Allow-Origin "plugins.domain.com"）

2) 创建自己的简单脚本语言并尽可能多地公开。这显然很乏味，即使您设法做到这一点，插件开发人员也会忍受学习曲线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:06:52.427

Facebook 有他们自己的“JavaScript”创造的[FBJS](http://developers.facebook.com/docs/fbjs/)，它通过控制可以运行的东西来进行沙盒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:53:20.080

如果没有多汁的后端，这确实会限制脚本的影响。

但是你仍然需要担心[基于 DOM 的 xss](https://www.owasp.org/index.php/DOM_Based_XSS)和[Clickjacking](http://en.wikipedia.org/wiki/Clickjacking)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-22T02:56:54.583

6 年后，但我觉得为此提供现代解决方案很重要。new(er)`sandbox`属性可用于限制 IFrame 的功能。

该系统的一个简单实现将只`allow-scripts`允许对 IFrame 的权限，可能使用一个简单的 JS 文件，该文件将与包含一些自定义库函数的每个插件一起包含在内。

为了与您的 HTML 页面进行通信，您将使用`postMessage`. 在插件端，可以使用我上面提到的库来传输命令。在用户方面，另一个系统必须验证和解码这些请求，然后执行它们。

由于沙盒 IFrame 没有跨源功能，因此它不能直接修改页面。但是，这也意味着`postMessage`无法验证的来源，因此出于安全原因必须创建某种代码。**

# java - 在饼图中显示百分比值

> ID：13768505
> 
> 赞同：2
> 
> 时间：2012-12-07T17:59:42.307
> 
> 标签：java, sql, jfreechart

`png`我进行了编码以在格式文件中创建饼图文件；饼图显示百分比，但它位于文件的底部。我希望百分比出现在图表本身中。这是我使用的代码：

```
String query = "SELECT name,flag from mawarid";

JDBCPieDataset dataset = new JDBCPieDataset(
    "jdbc:oracle:thin:@ 127.0.0.1:1521:XE", "oracle.jdbc.OracleDriver", "", "");

dataset.executeQuery(query);

JFreeChart chart = ChartFactory.createPieChart(
    "Test", dataset, true, true, false);
try {
    PiePlot plot = (PiePlot) chart.getPlot();
    plot.setLegendLabelGenerator(
        new StandardPieSectionLabelGenerator("{0} {2}"));

    final ChartRenderingInfo info = new ChartRenderingInfo(
        new StandardEntityCollection());
    final File file1 = new File("Chart5.png");
    ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);

} catch (Exception e) {
    // log exception
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:52:10.960

您可以在标签生成器中使用与在图例标签生成器中相同的消息格式：

```
plot.setLabelGenerator(new StandardPieSectionLabelGenerator("{0} {2}")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:35:36.197

尝试[`PieLabelDistributor`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PieLabelDistributor.html)在`PiePlot`.

```
plot.setLabelDistributor(PieLabelDistributor aDistributor) 
```

# java - 使用 Actionlistener 创建带有 JRadioButtons 的新框架

> ID：13768506
> 
> 赞同：0
> 
> 时间：2012-12-07T17:59:43.340
> 
> 标签：java, swing, jframe, frame, actionlistener

嗨，我在创建一个 actionlistener 时遇到了一些麻烦，该 actionlistener 创建了一个使用 JRadioButtons 作为选择的新框架。

最终，这将是一个我为好玩而创建的抽认卡测验程序。

这就是我卡住的地方：

```
 import javax.swing.*;

    import java.awt.*;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;

    public class FlashCard extends JFrame {
    private ImageIcon myIcon = new ImageIcon("src/Resources/DNA.png");

    public FlashCard(){
    //Consider using CardLayout format for flashcards.

    setLayout(new GridLayout(1, 4, 5, 5));

    JButton startButton = new JButton("Begin");

    add(startButton);

    startButton.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent arg0) {
            // TODO Auto-generated method stub

            //Execute when button is pressed THIS IS THE PART WHERE I AM STUCK
            JFrame frameAction = new JFrame();
            frameAction.setTitle("Questions");
            frameAction.setSize(350, 150);
            frameAction.setLocationRelativeTo(null);
            frameAction.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frameAction.setVisible(true);

            frameAction.

    //              JRadioButton jrb1 = new JRadioButton("Student", true);
    //              jrb1.setForeground(Color.RED);
    //              jrb1.setBackground(Color.WHITE);
    //              jrb1.setMnemonic('S');
    //          
    //              ButtonGroup group = new ButtonGroup();
    //              add(jrb1);
        }
    });

} 
```

这是我的主要方法：

```
 public static void main(String[] args){

    //Create a frame and set its properties.
    JFrame frame = new FlashCard();
        frame.setTitle("Genetics FlashCard Quiz");
        frame.setSize(350,150);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    //Create a second frame for when the user
    // clicks begin.

    JFrame question = new JFrame();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:42:28.787

鉴于您`JFrames`的尺寸和尺寸相同，您的另一个使用想法（在代码中）`CardLayout`是正确的。目前，您的第二帧出现在第一帧之上，因为它仍然可以访问，因此您需要管理后者。如果您使用`CardLayout`，您将能够轻松地在多个`flashcard`面板之间导航，同时为用户保持一个交互区域。

看：

*   [如何使用卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)
*   [卡片布局示例](http://www.macs.hw.ac.uk/guidebook/?name=Layouts&page=4)

# ios - monotouch - 可重用的 iOS 自定义视图

> ID：13768511
> 
> 赞同：2
> 
> 时间：2012-12-07T18:00:23.947
> 
> 标签：ios, cocoa-touch, xamarin.ios, subview

好的，所以这个可能有点挑战性，因为它是单点触控......

我有一个可重复使用的自定义工具栏，我计划在多个屏幕上重复使用它。

我想在 Interface Builder 中创建工具栏

我希望能够从任何视图控制器更新工具栏上的标签。所以我可能有五个不同的视图控制器，它们都有这个工具栏，并且可以更新它上面的标签。

所以我的问题是：

1.  我什至如何开始在 MonoTouch 中继承 UIView？如果我创建一个新的“iPhone View”，它给我的只是一个笔尖。我没有地方可以联系渠道或行动。

2.  鉴于您能够告诉我如何设置 MonoTouch 以拥有用于子类化 UIView 的 C# 代码文件，以便我可以处理事件和访问属性，我如何将它连接到 nib？我看到很多人说要在 Objective-C 中使用 initWithFrame 来调用 loadNibNamed，但这并不能正确地转换为 MonoTouch。我将如何在 MonoTouch 中做到这一点？

3.  鉴于 #1 和 #2 已实现，我如何将此自定义工具栏加载到任何视图控制器中，并将其添加到屏幕上的特定坐标处？在 MonoTouch 中做 initWithFrame CGRect 的东西似乎没有简单的路径

如果有人能解决这个问题，你太棒了！！！！

提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:13:44.047

所以经过大量的挖掘，我终于找到了答案。

信息最丰富的教程在这里：

[http://sgmunn.com/blog/2012/03/using-loadnib-to-load-a-view/](http://sgmunn.com/blog/2012/03/using-loadnib-to-load-a-view/)

本质上，您需要创建自定义子视图，在界面构建器中设置它们，然后在 MonoTouch 端进行一些简单的映射。但是让我脱离这个例子的关键点是：

**在子类化 UIView 时，您必须实现 IntPtr 的基本构造函数**

当你这样做时，一切都会到位。您已将 Outlets 和 Actions 连接起来，并且可以随意操作它们。

**编辑：比仅仅链接更具描述性......**

> 我什至如何开始在 MonoTouch 中继承 UIView？如果我创建一个新的“iPhone View”，它给我的只是一个笔尖。我没有地方可以联系渠道或行动。

创建一个新的 iPhone 视图，它将创建一个笔尖。打开笔尖，将“自定义类”设置为您的自定义类。MonoTouch 应该会自动生成它。如果没有，请创建一个新的 C# 类和子类 UIView，但请确保为 IntPtr 创建构造函数。如果您使用 Storyboard，当您调用 Storyboard.InstantiateViewController() 时，它会为您填写 IntPtr 值。请注意，如果您使用 Storyboard.InstantiateViewController，您还需要将标识符设置为自定义类的名称。

一旦你创建了那个 iPhone 视图，你应该能够在 IB 中打开“代码视图”并连接你的插座和操作。

> 鉴于您能够告诉我如何设置 MonoTouch 以拥有用于子类化 UIView 的 C# 代码文件，以便我可以处理事件和访问属性，我如何将它连接到 nib？我看到很多人说要在 Objective-C 中使用 initWithFrame 来调用 loadNibNamed，但这并不能正确地转换为 MonoTouch。我将如何在 MonoTouch 中做到这一点？

MonoTouch 中没有 initWithFrame: 或 CGRect，您使用的是 RectangleF。如果以编程方式加载 nib，则可以使用接受 RectangleF 的构造函数并使用它来设置 x、y、宽度、高度。

> 鉴于 #1 和 #2 已实现，我如何将此自定义工具栏加载到任何视图控制器中，并将其添加到屏幕上的特定坐标处？在 MonoTouch 中做 initWithFrame CGRect 的东西似乎没有简单的路径

对于 Storyboard，请使用 Storyboard.InstantiateViewController（确保在 IB 中设置标识符）。对于其他所有内容，请使用：

```
var nibObjects = NSBundle.MainBundle.LoadNib("YourViewName", theController, null);
var instantiatedView = (YourClassName)Runtime.GetNSObject(nibObjects.ValueAt(0)); 
```

如上面的链接所示。

享受！- 艾莉森。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T03:00:49.990

您可以使用容器视图和情节提要参考来实现相同的目的，而不是从 iOS 9 开始加载 Nib 文件。

[你可以在这里查看](https://xamarinexperience.blogspot.com/2019/03/how-to-re-use-views-in-xamarin.html#more)

# c# - DataGridView 上的 MouseHover 事件 - 索引超出范围

> ID：13768512
> 
> 赞同：1
> 
> 时间：2012-12-07T18:00:37.517
> 
> 标签：winforms, c#, winforms, datagridview

我有一个带有 , 的[winforms](/questions/tagged/winforms "显示标记为“winforms”的问题")应用程序`DataGridView`，并且一直在尝试设置一个`MouseHover`事件，该事件提供有关悬停的单元格的更多详细信息。

我的代码如下：

```
private void dataCaseHistory_MouseHover(object sender, EventArgs e)
{
    try
    {
        DataGridView grid = (DataGridView)sender;
        Point clientPos = grid.PointToClient(Control.MousePosition);
        DataGridViewCell cell = (DataGridViewCell)grid[clientPos.X, clientPos.Y];
        int cellRow = cell.RowIndex;
        int cellColumn = cell.ColumnIndex;

        DataTable table = (DataTable)dataCaseHistory.DataSource;
        int docColumn = table.Columns.IndexOf("Doc");
        if (cellColumn == docColumn)
        {
            var varBundleID = table.Rows[cellRow]["BundleID"];
            if (varBundleID != DBNull.Value && varBundleID != null)
            {
                int bundleID = (int)varBundleID;
                cBundle bundle = new cBundle(bundleID);
                string header = "Bundle: '" + bundle.Name + "'";
                string body = "";
                foreach (DataRow row in bundle.DocumentBundle.Rows)
                {
                    int docID = (int)row["DocumentID"];
                    cDocument doc = new cDocument(docID);
                    body += doc.DocumentName + Environment.NewLine;
                }
                MessageBox.Show(body, header);
            }
            else
            {
                var varDocID = table.Rows[cellRow]["DocID"];
                if (varDocID != DBNull.Value && varDocID != null)
                {
                    int docID = (int)varDocID;
                    cDocument doc = new cDocument(docID);
                    string header = "Document";
                    string body = doc.DocumentName;
                    MessageBox.Show(body, header);
                }
            }
        }                
    }
    catch (Exception eX)
    {
        string eM = "Error occurred when Single Clicking a Document link in the History tab";
        aError err = new aError(eX, eM);
        MessageBox.Show(eX.Message, eM);
    }
} 
```

但是，只要表单加载和移动鼠标，我就会收到索引超出范围错误。我以前从未使用过这个活动，所以如果有人能指出我哪里出错了，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:43:09.010

The Item[] property which you access in this line of code:

```
 DataGridViewCell cell = (DataGridViewCell)grid[clientPos.X, clientPos.Y]; 
```

is indexed by row and column not by screen coordinates, so your screen coordinates are probably much higher than the number of rows or columns in your grid, therefore causing IndexOutOfRange exception.

You should get the cell using the HitTestInfo class:

```
 MouseEventArgs args = (MouseEventaArgs) e;  
    DataGridView.HitTestInfo hitTest = this.grid.HitTest(args.X, args.Y);
    if (hitTest.Type == DataGridViewHitTestType.Cell)
    {
         DataGridViewCell cell = (DataGridViewCell)this.Grid[hitText.ColumnIndex, hitTest.RowIndex];
         // execute business logic here
    } 
```

# java - 子类化标记类

> ID：13768514
> 
> 赞同：2
> 
> 时间：2012-12-07T18:00:52.390
> 
> 标签：java, android, google-maps, google-maps-markers

有没有办法扩展 Marker 类？标记是 android 中谷歌地图上的图钉。我可以扩展的唯一类是 MarkerOptionsCreator 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:32:19.603

没有办法扩展`Marker`类。这是最终的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T10:04:05.067

将标记添加到地图时，您可以收集有关 HashMap 中标记的信息。例如：

```
mHashMap.put(mKey, mMap.addMarker(new MarkerOptions().title("mTitle"))) 
```

# c++ - 如何在mingw中进行libwinpthread-1.dll的静态链接？

> ID：13768515
> 
> 赞同：54
> 
> 时间：2012-12-07T18:00:52.360
> 
> 标签：c++, mingw, static-linking

我从这里使用 mingw：`http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev2.7z/download`

而且我已经成功地设法通过使用参数进行静态链接`libstdc++-6.dll`，但是我找不到对.`libgcc_s_sjlj-1.dll``-static-libgcc -static-libstdc++``libwinpthread-1.dll`

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-25T20:08:59.420

如果您的工具链包含静态 winpthreads，请添加选项

```
-static 
```

将拉入所有库的静态版本。

或者，您可以从工具链目录中删除 libwinpthread.dll.a 和 DLL 本身。不过，这可能会弄乱与 libstdc++ 和 libgcc DLL 链接的程序，所以要小心。

第三个选项是使用`-Wl,-Bdynamic`并`-Wl,-Bstatic`选择要链接的版本（这`-static`是调用 ld 时在内部执行的操作）。一个例子：

```
gcc -o someexec someobject.o -Wl,-Bdynamic -lsomelibIwantshared -Wl,-Bstatic -lsomelibIwantstatic 
```

如果您运行带有 added 的链接命令，当您使用and`-v`时，您应该会看到这些选项出现在 ld/collect2 调用中。`-static-libgcc``-static-libstdc++`

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-01-17T15:56:11.773

尝试这个：

```
-static-libgcc -static-libstdc++ -Wl,-Bstatic -lstdc++ -lpthread -Wl,-Bdynamic 
```

注意`-lstdc++`前面的`-lpthread`。它对我有用。

确保将其添加到`g++`命令行的最后。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-12-25T14:22:17.837

您可能应该检查 GCC 的命令行选项文档。

这些没有“-static-something”命令，只有标准库（libgcc 和 libstdc++）可以通过一个命令设置为静态链接。对于其他库，您首先使用“-static”切换到静态链接，然后使用单独的命令（即“-lpthread”）列出要包含的库。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-04-13T21:52:43.640

即使程序中没有使用线程，也要静态链接**winpthread**`-Bstatic` ，请将and`--whole-archive`参数传递给链接器：

```
g++ -o hello.exe hello.cpp -Wl,-Bstatic,--whole-archive -lwinpthread -Wl,--no-whole-archive 
```

请注意以下事项：

*   之后应立即禁用“整个存档”选项。
*   如果您的程序实际上使用库中的符号（即您使用 C++11 中的符号），则不需要执行此 hack `<thread>`，在这种情况下，当您静态链接库时，库不会被删除。
*   此 hack 适用于 MinGW-w64，用于修复*libwinpthread-1.dll*依赖项。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-03-23T14:58:44.410

对于从事 CMake 工作的任何人，此解决方案都可以在您的 CMakeLists.txt 文件中轻松实现，如下所示...

```
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -static") 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-30T21:09:50.203

显然，CMake 对`-Wl`编译器标志的处理方式做了一些奇怪的事情，使得`-Wl,-Bstatic -lstdc++ -lwinpthread -Wl,-Bdynamic`解决方案不起作用，似乎只剩下两个其他选项：坏编译器标志`-static`和丑陋的编译器标志`-Wl,--whole-archive`。

同时，在 CMake 中实际工作但似乎没有记录的好选择是直接使用链接器标志。因此，在 CMake 中，这似乎是静态链接到所有 mingw-w64 C++ 依赖项的最佳方式：

```
target_link_libraries (MyVeryAwesomeApp -static gcc stdc++ winpthread -dynamic) 
```

应该注意的是，即使没有明确遵循的库`-dynamic`，仍应应用它以确保标准的隐式链接库得到正确链接。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-16T18:14:34.343

我通过使用 mingw 工具链的 win32 变体而不是 posix 变体绕过了这个问题。使用 win32 变体，`-static-libgcc -static-libstdc++`对于独立构建来说已经足够了。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-02-23T18:54:03.653

只需链接`-l:libwinpthread.a`

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-10-22T23:57:46.917

只需添加`-static`到您的`CFLAGS`.

例如：`./configure CFLAGS="-static"`。

这会将所有静态库链接到您的可执行文件。

# java - Android AlertDialog如何阻止第二次点击确定按钮？

> ID：13768518
> 
> 赞同：1
> 
> 时间：2012-12-07T18:00:53.370
> 
> 标签：java, android, android-alertdialog

例子：

```
System.out.println("in!");
AlertDialog.Builder dialog = new AlertDialog.Builder(this);
    dialog.setMessage("test!!!");
    dialog.setPositiveButton(R.string.dialog_ok, 
        new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                System.out.println("Only one click!");
            }
    });
    dialog.show(); 
```

出：
进！
在！
只需一键！
只需一键！
只需一键！
只需一键！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:08:45.320

获取按钮（正）并将启用设置为假。

```
System.out.println("in!");
AlertDialog.Builder dialog = new AlertDialog.Builder(this);
dialog.setMessage("test!!!");
dialog.setPositiveButton(R.string.dialog_ok, 
    new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // disable on 1st click;
            final AlertDialog alertDialog = (AlertDialog)dialog;
            alertDialog.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(false);
            System.out.println("Only one click!");
        }
});
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:06:47.420

我不明白为什么有人可以在警报对话框上再次单击，因为按钮应该在执行某些操作后关闭对话框。为什么不使用 dialog.dismiss() 关闭对话框？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:06:22.643

您需要禁用它。我推荐一个标志，它必须存储在类级别。

```
Boolean hasBeenClicked=false;

System.out.println("in!");
AlertDialog.Builder dialog = new AlertDialog.Builder(this);
    dialog.setMessage("test!!!");
    dialog.setPositiveButton(R.string.dialog_ok, 
        new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                if (!hasBeenClicked)
                {
                  hasBeenClicked=true;
                  System.out.println("Only one click!");
                }
            }
    });
    dialog.show(); 
```

# html - Chrome和FF的像素差异

> ID：13768523
> 
> 赞同：4
> 
> 时间：2012-12-07T18:01:26.133
> 
> 标签：html, css

我正在尝试“**一步一步**”，但我遇到了一些与**chrome**和**FF之间的****像素**差异有关的问题。

 ****所以，所有步骤都是动态的，应该在中间，有时只能出现两个、三个我们的 5 个选项，这就是为什么我要为每一侧制作一个子行，以到达包装器的末尾。

这条线是问题所在，它们使 2 我们的 1 像素差异。

我遗漏了一些东西，或者在这种情况下，我们应该做一个“解决方法”？

如果您在这里看到实际操作会更简单：[**jsfiddle**](http://jsfiddle.net/gbBjT/1/)

对于那些想直接在这里查看代码的人：

html:

```
<article id="people-add">
<nav>
    <div class="step-wrapper">
        <div class="base-left-line"></div>

        <div class="step first-step">
            <div class="active-stepc step-circle"></div>
            <span class="step-label">
                Step 1
            </span>
        </div>
        <div class="step">
            <div class="step-line"></div>
            <div class="step-circle"></div>
            <span class="step-label">
                Step 2
            </span>
        </div>
        <div class="step">
            <div class="step-line"></div>
            <div class="step-circle"></div>
            <span class="step-label">
                Step 4
            </span>
        </div>
        <div class="step">
            <div class="step-line"></div>
            <div class="step-circle"></div>
            <span class="step-label">
                Step 5
            </span>
        </div>

        <div class="base-right-line"></div>
    </div>
</nav>
</article>​ 
```

和CSS：

```
#people-add {
    float: left;
    width: 100%;
}

#people-add nav {
    padding: 5px 0 60px 0;
}

.step-wrapper {
    float: left;
    width: 100%;
    text-align: center;
    position: relative;
}

.step {
    display: inline-block;
    position: relative;
    width: 120px;
}

.first-step {
    width: 0 !important;
}

.step .step-label {
    position: absolute;
    right: -35px;
    bottom: -30px;
    font-size: 12px;
    width: 96px;
    text-align: center;
    font-weight: bold;
    color: #818181;
}

.step .step-line {
    border-bottom: solid #E5E5E5 2px;
    position: absolute;
    right: 5px;
    top: -2px;
    z-index: 12;
    width: 120px;
}

.step .step-circle {
    background-color: #B3B3B3;
    border: solid 4px #E5E5E5;
    width: 20px;
    height: 20px;
    border-radius: 50px;
    position: absolute;
    right: -1px;
    top: -15px;
    z-index: 13;
}

.base-left-line, 
.base-right-line {
    position: absolute;
    width: 50%;
    top: 12px;
    z-index: 1;
}

.base-left-line {
    border-bottom: 2px solid #9BBD5E;
    left: 0;
}

.base-right-line {
    border-bottom: 2px solid #9BBD5E;
    right: 0;
}   ​ 
```

打印：

![铬合金](../Images/e558854b6d6c1773d4e8baf9655e78ac.png) ![法郎](../Images/467c427a43a351245de25a4fe965c212.png)

如您所见，FF 中的绿线与台阶中间的所有灰线交叉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:17:11.090

好的，我（就像许多评论的其他人一样）没有看到您在我的 Chrome 和 Firefox 之间显示的相同差异，并且这两种浏览器都没有像您在图片中显示的那样为我表现。

然而，当我在浏览器中放大和缩小时，我确实注意到了线条的一些奇怪行为。这使我更仔细地查看您的代码，我觉得您看到一些差异（以及我们所有人的不一致）的原因是因为您如何定位线条。我建议进行以下*更改*（我只记下这些，而不是您的所有代码），[如this fiddle 所示](http://jsfiddle.net/gbBjT/8/)，这可能会解决您的问题。

**解释**

`vertical-align`通常`bottom`默认情况下是 on ，`inline-block`并且由于您是`.base-[left/right]-line`按位置定位元素`top`，因此最好对`.step`要与它们重叠的元素执行此操作。所以...

**添加**

```
.step {
    vertical-align: top; /* ADDED THIS so that dimensions come from the top */
} 
```

**改变**

```
.step .step-label {
    bottom: -45px; /* CHANGED THIS for the vertical align top */
}

.step .step-line {
    top: 12px; /* CHANGED THIS, which now matches offset of the baselines */
}

.step .step-circle {
    top: 0; /* CHANGED THIS */
} 
```****

# report - 图表 X 轴和文本框编号

> ID：13768525
> 
> 赞同：0
> 
> 时间：2012-12-07T18:01:33.230
> 
> 标签：report, ssrs-2008, reporting, reporting-services

我一直在寻找，但没有找到任何关于它的东西。我有两个问题。

如何在图表的 x 轴上获得**编号标签？**

例子：

1,2,3,4....

以及如何使用多个文本框进行编号？

已编辑：我有一个包含多个文本框的报告。例子：

1.一般 1.1-Type1 1.2-Type2 1.3-Type3

所有标题都在不同的文本框中，因此编号总是回到第一个值。

对于图形，我想放一个数字或一系列字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:27:55.837

如何在图表的 x 轴上获得编号标签？

例子：

1,2,3,4....

答案：在查询中使用[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)来编号字段，然后使用该字段在图表中的 x 轴上进行标记。

# javascript - 背景图像和颜色在 IE 或 Firefox 中没有变化

> ID：13768526
> 
> 赞同：1
> 
> 时间：2012-12-07T18:01:36.193
> 
> 标签：javascript, html, internet-explorer, google-chrome, firefox

我有一些非常简单的 javascript 可以在 Chrome 中正常工作。但是，有一些东西在 IE 和 Firefox 中不起作用。这是代码：

```
function updateColors(){
    ChangeCSSRule('background-color',color,2);
    ChangeCSSRule('color',textcolor,0);
    ChangeCSSRule('color',textcolor,1);
    ChangeCSSRule('background-image','url(borders/r_edge_'+imgcolor+'.png)',3);
    ChangeCSSRule('background-image','url(borders/l_edge_'+imgcolor+'.png)',4);
    ChangeCSSRule('background-image','url(borders/t_edge_'+imgcolor+'.png)',5);
    ChangeCSSRule('background-image','url(borders/b_edge_'+imgcolor+'.png)',6); 
}   

function ChangeCSSRule(xElement, xValue, value){
    var strCSS = 'cssRules';
    if(document.all){
        strCSS = 'rules';
    }
    document.styleSheets[0][strCSS][value].style[xElement] = xValue;
} 
```

这是样式表：

```
.firstName {
   font-family: Verdana, Geneva, sans-serif;
   font-size: 20px;
   margin: 0px; 
}
.lastName {
   font-family: Verdana, Geneva, sans-serif;
   font-size: 25px;
   text-wrap: none;
   margin: 0px;
}
.bg {
   background-color: #ffffff;
}
.r_edge {
   background-image: url(borders/r_edge_white.png); 
   background-repeat: repeat-y;     
}
.l_edge {
   background-image: url(borders/l_edge_white.png); 
   background-repeat: repeat-y;
}
.t_edge {
   background-image: url(borders/t_edge_white.png); 
   background-repeat: repeat-x;
}
.b_edge {
   background-image: url(borders/b_edge_white.png); 
   background-repeat: repeat-x;
}
.right {
   text-align: right;
} 
```

我在几行不起作用的行旁边加上了星号。奇怪的是，ChangeCSSRule 函数作用于两条“颜色”线。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:15:26.310

在 javascript 中更改 CSS 属性时，您需要对它们进行驼峰式处理，例如：background-color 变为 backgroundColor，background-image 变为 backgroundImage。

# asp.net - Why use an Azure Cloud Service Project instead of an ASP.NET project with the Azure SDK?

> ID：13768529
> 
> 赞同：4
> 
> 时间：2012-12-07T18:01:52.347
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, azure, azure-sql-database

I'm playing with Azure asp.net development. I use Visual Studio 2010, with Azure SDK and I'm a newbie to Azure cloud.

I created several apps and deployed them to my testing Azure Web Site. Everything works fine - ASP.NET Web Page, ASP.NET MVC3, even simple GridView binding to an Azure SQL database, which I created earlier and that I manage with Microsoft SQL Management Studio, using ADO.NET. It's really simple.

Now, I learned from some tutorials, that I need to use a Windows Azure Cloud Service Project to make sure that my application will work. But it works without this project, too. So what exactly do I need such a project in my solution for?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T18:36:23.043

There are actually three different ways you could have gotten your ASP.NET app over to the cloud, and the confusion comes because you are seeing elements of two of those options.

A Windows Azure Web Site is just a single ASP.NET application running in Microsoft's data centers (versus on premises) so all of the configuration it needs is already part of the project itself (primarily the web.config), some being exposed via the Azure portal. In many ways, this is similar to web hosting providers.

A Windows Azure Cloud Service is a collection of multiple services, which could be web sites/services (Web Roles) or backend code (Worker Roles). The code for your Azure Web Site could also have been deployed exactly as is as a Web Role, but in that case it would be part of a larger application that potentially contains additional Web and Worker Roles. It's the Cloud Service project itself that provides the additional configuration of those web and worker roles (even if you have just a single role in the cloud service). The Cloud Service offering is considered Platform as a Service.

The other option, for completeness, is to create a Virtual Machine image yourself, install your ASP.NET site, and then have Windows Azure host the Virtual Machine. It's at the opposite end of the 'make it simple to deploy' spectrum, but you get a lot of control over what exactly is on the VM that you deploy. This is the Infrastructure as a Service offering from Azure.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:05:41.693

I'm going to assume you're developing for Windows Azure Cloud Services (the foundation PaaS solution of Windows Azure). The Cloud Service project defines your application to the Windows Azure Fabric. If you don't already have one, then odds are your are running your application outside of the local Development Emulator. If you are going to deploy your solution to Windows Azure Cloud Services, you will need to create this project for your application so Windows Azure's Fabric (the secret sauce that will manage your application) knows how to manage the application.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:09:39.187

And I'm going to assume the opposite to @BrentDaCodeMonkey - that you're developing for [Azure Web Sites](http://www.windowsazure.com/en-us/home/scenarios/web-sites/), and not [Cloud Services](http://www.windowsazure.com/en-us/home/scenarios/cloud-services/) - in which case you may have confused yourself with the tutorials, as I don't believe a Cloud Services Project is either necessary or advisable.

# json - json 反序列化——StackOverflowException

> ID：13768530
> 
> 赞同：-1
> 
> 时间：2012-12-07T18:01:56.897
> 
> 标签：json, jackson

我只是想解析一个 json 输入，它是 AbstractList 的一个实现，包含自定义对象。但是，由于某种原因，当它遇到 CustomerDealerRecord 的反序列化器时，它永远不会超过第一个节点，然后最终抛出 StackOverflowException。我已经为此苦苦挣扎了 4 个小时，并且我已经进行了许多不同的 Google 搜索，但均无济于事。所以，我最后的努力即将来到这里。你们所有人都可以对此有所了解，我们将不胜感激。谢谢你。代码如下。

```
public class PhoneDeserializer extends StdDeserializer<Phone>{

public PhoneDeserializer() {
    super(Phone.class);
}

@SuppressWarnings("unchecked")
@Override
public Phone deserialize(JsonParser jp,
        DeserializationContext ctx) throws IOException,
        JsonProcessingException {
    ObjectMapper mapper = (ObjectMapper) jp.getCodec();
    return  mapper.readValue(jp, Phone.class);
}

} 
```

--

```
public class CustomerDealerRecordDeserializer extends StdDeserializer<CustomerDealerRecord>{

public CustomerDealerRecordDeserializer() {
    super(CustomerDealerRecord.class);
}
@SuppressWarnings("unchecked")
@Override
public CustomerDealerRecord deserialize(JsonParser jp,
        DeserializationContext ctx) throws IOException,
        JsonProcessingException {
    ObjectMapper mapper = (ObjectMapper) jp.getCodec();
    return mapper.readValue(jp, CustomerDealerRecord.class);
}

} 
```

-- 这是自定义列表

```
public class CustomerDealerRecordList extends AbstractList<CustomerDealerRecord> {
private List<CustomerDealerRecord> records = new ArrayList<CustomerDealerRecord>();
@Override
public CustomerDealerRecord get(int index) {
    // TODO Auto-generated method stub
    return records.get(index);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return records.size();
}

public boolean add(CustomerDealerRecord cdr){
    return records.add(cdr);
}

} 
```

-- 这是控制器方法

```
@SuppressWarnings("unchecked")
public String getCustomerDealerReportAsExcel(HttpServletRequest req, HttpServletResponse resp){
    VelocityContext vc = new VelocityContext();
    vc.put("response", resp);

    // Jackson stuff
    CustomerDealerRecordDeserializer deser = new CustomerDealerRecordDeserializer();
    PhoneDeserializer phoneDeser = new PhoneDeserializer();

    // We have to create a module for the alias'ed class
    SimpleModule cdrModule = new SimpleModule("CustomerDealerRecord", new Version(1,0,0,null));
    SimpleModule phoneModule = new SimpleModule("Phone", new Version(1,0,0,null));

    // Add the deserializer to the module
    cdrModule.addDeserializer(CustomerDealerRecord.class, deser);
    phoneModule.addDeserializer(Phone.class, phoneDeser);

    // Now, create our mapper and then register the module to it.
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(cdrModule);
    mapper.registerModule(phoneModule);

    CustomerDealerRecordList list = null;

    try {
        JsonParser jp = mapper.getJsonFactory().createJsonParser(req.getParameter("json"));
        list = mapper.readValue(jp, CustomerDealerRecordList.class);
    } catch (JsonParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JsonMappingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return format(req, vc, "reports/customer_dealer_report_excel");
} 
```

-- 这是电话模型对象

```
public class Phone {

    public Phone(String areaCode, String phone){
        this.areaCode = areaCode;
        this.phoneNumber = phone;
    }
    private String areaCode;
    private String phoneNumber;
    public String getAreaCode() {
        return areaCode;
    }
    public void setAreaCode(String areaCode) {
        this.areaCode = areaCode;
    }
    public String getPhoneNumber() {
        return phoneNumber;
    }
    public void setPhoneNumber(String phoneNumber) {
        this.phoneNumber = phoneNumber;
    }
} 
```

-- 这是 CustomerDealerRecord 模型对象

```
public class CustomerDealerRecord {
    private String fleetName;
    private String fleetNumber;
    private String dealerName;
    private String dealerNumber;
    private String territoryName;
    private String territoryNumber;
    private String city;
    private String state;
    private Date downTime;
    private String failureDescription;
    private String tireManufacturer;
    private String tireSize;
    private String tireType;
    private String tirePosition;
    private String category;
    private String callerName;
    private Phone callerPhone;
    private String caseNumber;
    private Date caseCloseDate;
    private String poNumber;
    private String truckNumber;
    private String trailerNumber;
    private String tractorNumber;
    private String serviceDetailStatus;
    private String refusalReason;

    public String getFleetName() {
        return fleetName;
    }

    public void setFleetName(String fleetName) {
        this.fleetName = fleetName;
    }

    public String getFleetNumber() {
        return fleetNumber;
    }

    public void setFleetNumber(String fleetNumber) {
        this.fleetNumber = fleetNumber;
    }

    public String getDealerName() {
        return dealerName;
    }

    public void setDealerName(String dealerName) {
        this.dealerName = dealerName;
    }

    public String getDealerNumber() {
        return dealerNumber;
    }

    public void setDealerNumber(String dealerNumber) {
        this.dealerNumber = dealerNumber;
    }

    public String getTerritoryName() {
        return territoryName;
    }

    public void setTerritoryName(String territoryName) {
        this.territoryName = territoryName;
    }

    public String getTerritoryNumber() {
        return territoryNumber;
    }

    public void setTerritoryNumber(String territoryNumber) {
        this.territoryNumber = territoryNumber;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public Date getDownTime() {
        return downTime;
    }

    public void setDownTime(Date downTime) {
        this.downTime = downTime;
    }

    public String getFailureDescription() {
        return failureDescription;
    }

    public void setFailureDescription(String failureDescription) {
        this.failureDescription = failureDescription;
    }

    public String getTireManufacturer() {
        return tireManufacturer;
    }

    public void setTireManufacturer(String tireManufacturer) {
        this.tireManufacturer = tireManufacturer;
    }

    public String getTireSize() {
        return tireSize;
    }

    public void setTireSize(String tireSize) {
        this.tireSize = tireSize;
    }

    public String getTireType() {
        return tireType;
    }

    public void setTireType(String tireType) {
        this.tireType = tireType;
    }

    public String getTirePosition() {
        return tirePosition;
    }

    public void setTirePosition(String tirePosition) {
        this.tirePosition = tirePosition;
    }

    public String getCategory() {
        return category;
    }

    public void setCategory(String category) {
        this.category = category;
    }

    public String getCallerName() {
        return callerName;
    }

    public void setCallerName(String callerName) {
        this.callerName = callerName;
    }

    public Phone getCallerPhone() {
        return callerPhone;
    }

    public void setCallerPhone(Phone callerPhone) {
        this.callerPhone = callerPhone;
    }

    public String getCaseNumber() {
        return caseNumber;
    }

    public void setCaseNumber(String caseNumber) {
        this.caseNumber = caseNumber;
    }

    public Date getCaseCloseDate() {
        return caseCloseDate;
    }

    public void setCaseCloseDate(Date caseCloseDate) {
        this.caseCloseDate = caseCloseDate;
    }

    public String getPoNumber() {
        return poNumber;
    }

    public void setPoNumber(String poNumber) {
        this.poNumber = poNumber;
    }

    public String getTruckNumber() {
        return truckNumber;
    }

    public void setTruckNumber(String truckNumber) {
        this.truckNumber = truckNumber;
    }

    public String getTrailerNumber() {
        return trailerNumber;
    }

    public void setTrailerNumber(String trailerNumber) {
        this.trailerNumber = trailerNumber;
    }

    public String getTractorNumber() {
        return tractorNumber;
    }

    public void setTractorNumber(String tractorNumber) {
        this.tractorNumber = tractorNumber;
    }

    public String getServiceDetailStatus() {
        return serviceDetailStatus;
    }

    public void setServiceDetailStatus(String serviceDetailStatus) {
        this.serviceDetailStatus = serviceDetailStatus;
    }

    public String getRefusalReason() {
        return refusalReason;
    }

    public void setRefusalReason(String refusalReason) {
        this.refusalReason = refusalReason;
    }

} 
```

-- 示例 JSON

```
[
{
"fleetName":"sycamore specialzed carriers",
"fleetNumber":"CF00002760",
"dealerName":null,
"dealerNumber":null,
"territoryName":null,
"territoryNumber":null,
"city":null,
"state":null,
"downTime":"3000-01-01",
"failureDescription":null,
"tireManufacturer":"Continental Tire",
"tireSize":"10.00R15",
"tireType":"DRIVE",
"tirePosition":"LFO",
"category":"Dealer Location Information",
"callerName":"ANN RENNER",
"callerPhone":{
"areaCode":null,
"phoneNumber":null
},
"caseNumber":"189354",
"caseCloseDate":null,
"poNumber":null,
"truckNumber":null,
"trailerNumber":null,
"tractorNumber":null,
"serviceDetailStatus":"CAN",
"refusalReason":"Response time"
},
{
"fleetName":"sycamore specialzed carriers",
"fleetNumber":"CF00002760",
"dealerName":null,
"dealerNumber":null,
"territoryName":null,
"territoryNumber":null,
"city":null,
"state":null,
"downTime":"3000-01-01",
"failureDescription":null,
"tireManufacturer":null,
"tireSize":null,
"tireType":null,
"tirePosition":null,
"category":"Dealer Location Information",
"callerName":"ANN RENNER",
"callerPhone":{
"areaCode":null,
"phoneNumber":null
},
"caseNumber":"189354",
"caseCloseDate":null,
"poNumber":null,
"truckNumber":null,
"trailerNumber":null,
"tractorNumber":null,
"serviceDetailStatus":"ACT",
"refusalReason":null
},
{
"fleetName":"sycamore specialzed carriers",
"fleetNumber":"CF00002760",
"dealerName":null,
"dealerNumber":null,
"territoryName":null,
"territoryNumber":null,
"city":null,
"state":null,
"downTime":"3000-01-01",
"failureDescription":null,
"tireManufacturer":"Continental Tire",
"tireSize":"295/75R22.5",
"tireType":"BIAS",
"tirePosition":"LMI",
"category":"Service Call",
"callerName":" ",
"callerPhone":{
"areaCode":null,
"phoneNumber":null
},
"caseNumber":"189240",
"caseCloseDate":null,
"poNumber":null,
"truckNumber":null,
"trailerNumber":null,
"tractorNumber":null,
"serviceDetailStatus":"CAN",
"refusalReason":"Other"
},
{
"fleetName":"sycamore specialzed carriers",
"fleetNumber":"CF00002760",
"dealerName":null,
"dealerNumber":null,
"territoryName":null,
"territoryNumber":null,
"city":null,
"state":null,
"downTime":"3000-01-01",
"failureDescription":null,
"tireManufacturer":"Continental Tire",
"tireSize":"295/75R22.5",
"tireType":"DRIVE",
"tirePosition":"LMI",
"category":"Service Call",
"callerName":" ",
"callerPhone":{
"areaCode":null,
"phoneNumber":null
},
"caseNumber":"189240",
"caseCloseDate":null,
"poNumber":null,
"truckNumber":null,
"trailerNumber":null,
"tractorNumber":null,
"serviceDetailStatus":"ACT",
"refusalReason":null
},
{
"fleetName":"TEST CUSTOMER",
"fleetNumber":"123ee22a",
"dealerName":null,
"dealerNumber":null,
"territoryName":null,
"territoryNumber":null,
"city":null,
"state":null,
"downTime":"3000-01-01",
"failureDescription":null,
"tireManufacturer":null,
"tireSize":null,
"tireType":null,
"tirePosition":null,
"category":"Service Call",
"callerName":"JASON MA",
"callerPhone":{
"areaCode":"123",
"phoneNumber":"222"
},
"caseNumber":"189328",
"caseCloseDate":"2012-01-03",
"poNumber":null,
"truckNumber":null,
"trailerNumber":null,
"tractorNumber":null,
"serviceDetailStatus":"ACT",
"refusalReason":"Other"
},
{
"fleetName":"TEST CUSTOMER",
"fleetNumber":"123ee22a",
"dealerName":null,
"dealerNumber":null,
"territoryName":null,
"territoryNumber":null,
"city":"ST LOUIS",
"state":"MO",
"downTime":"3000-01-01",
"failureDescription":"REPAIR IF POSSIBLE",
"tireManufacturer":"Continental Tire",
"tireSize":"11R22.5",
"tireType":"RADIAL",
"tirePosition":"LRI",
"category":"Service Call",
"callerName":"BJ TEST",
"callerPhone":{
"areaCode":"314",
"phoneNumber":"592-3129"
},
"caseNumber":"189341",
"caseCloseDate":"2012-06-19",
"poNumber":null,
"truckNumber":null,
"trailerNumber":"34",
"tractorNumber":"12",
"serviceDetailStatus":"CAN",
"refusalReason":"Product not available"
},
{
"fleetName":"TEST CUSTOMER",
"fleetNumber":"123ee22a",
"dealerName":null,
"dealerNumber":null,
"territoryName":null,
"territoryNumber":null,
"city":"ST LOUIS",
"state":"MO",
"downTime":"3000-01-01",
"failureDescription":"REPAIR IF POSSIBLE",
"tireManufacturer":"Continental Tire",
"tireSize":"11R22.5",
"tireType":"RADIAL",
"tirePosition":"LRI",
"category":"Service Call",
"callerName":"BJ TEST",
"callerPhone":{
"areaCode":"314",
"phoneNumber":"592-3129"
},
"caseNumber":"189341",
"caseCloseDate":"2012-06-19",
"poNumber":null,
"truckNumber":null,
"trailerNumber":"34",
"tractorNumber":"12",
"serviceDetailStatus":"ACT",
"refusalReason":null
}
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:44:04.467

正如@bmargulies 评论的那样，PhoneDeserializer 调用（间接）PhoneDeserializer。该行将`mapper.readValue(jp, Phone.class);`让 Jackson 解析 Phone 类的反序列化器，它恰好是 PhoneDeserializer。您根本不需要 Phonedeserializer 类，Jackson 会正确处理您的电话类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:45:18.097

是的，最初我没有使用反序列化器，正如@pgelinas 所说，它不是必需的。那是我玩弄东西后得到的地方。它没有用。根本的问题是我不得不重新使用 mapper.convertValue 并给 Phone 类一个公共的无参数构造函数。基本上，我是个白痴，只是过度分析了简单的东西。

# google-apps-script - 如何将 onChange 单元格值事件/脚本附加到谷歌表

> ID：13768532
> 
> 赞同：0
> 
> 时间：2012-12-07T18:01:57.493
> 
> 标签：google-apps-script, google-sheets, triggers

如何将 onChange 方法附加到谷歌电子表格中的单元格。我想在单元格中的值大于 1000 时立即向某人发送电子邮件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T21:05:45.057

在此示例中，如果单元格 A1 的值 >1000 并且您自己没有更改其值，则会发送邮件。

您当然应该根据需要自定义电子邮件地址和单元格名称。

```
function sheetTracker(){
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var cell = ss.getActiveCell().getA1Notation();

    if(Session.getActiveUser()!='yourmail@gmail.com' &&
       Number(ss.getActiveCell().getValue())>1000 && cell=='A1'){
        MailApp.sendEmail('yourmail@gmail.com', 'Modification in the spreadsheet', 
       'Cell ' + cell + ' has been modified by '+ Session.getActiveUser() +
       ' - new value = ' + ss.getActiveCell().getValue().toString());
    } 
} 
```

您应该添加一个可安装的触发器`on edit` *（转到资源>当前工作表触发器>添加新触发器）*并授权脚本。

# c++ - 用于打印整数的素数分解元素的递归函数

> ID：13768533
> 
> 赞同：2
> 
> 时间：2012-12-07T18:02:03.800
> 
> 标签：c++, recursion

我需要编写一个递归函数来打印整数的素数分解元素，升序。

```
void printPrimeFactors(int num)
{
int div;

if (isPrime(num) == true)
    cout << num << " ";

else
{
    for (div = 2; div < num; div++)
    {
        if (isPrime(div) == true && num%div == 0)
            printPrimeFactors(num/div);
    }
} 
```

我究竟做错了什么？我的输出，20 是：

```
5 2 5 2 2 
```

我最小的输入是素数，递归函数的较小输入是`num div (smallest prime divider of num)`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:14:43.473

我相信以下方法会起作用：

```
void printPrimeFactors(int num, int div = 2)
{
        if (num % div == 0) {
                std::cout << div << " ";
                printPrimeFactors(num / div, div);
        } else if (div <= num) {
                printPrimeFactors(num, div + 1);
        }
} 
```

根据要求，它是递归的，即使递归不是必需的并且可以简单地转换为迭代。

您的原始版本无法正常工作的原因有两个：

1.  打印错位，导致因子按降序打印；
2.  在递归调用之后，您继续尝试进一步的除数，这会导致输出中出现重复的因子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:24:13.707

NPE 提供了一个（尾）递归版本，这里是迭代版本：

我们在这里做的是：

1.  我们的第一个可能的除数是 2。试试这个值。
2.  如果它将数字除以均匀，则打印除数，并将我们的目标数除以该除数。
3.  如果它不除，然后尝试下一个除数。`div += 1`.

`div`请注意，当它除法时我们不会增加。这是因为像`20`, where`2`多次划分它的情况。

```
void printPrimeFactors(int num) {
    int div = 2;

    while (num != 1) {
        if (num % div == 0) {
            cout << num << " ";
            num /= div;
        } else {
            div += 1;
        }
    }
} 
```

# grid - Kendo UI 网格过滤器是否存在错误？

> ID：13768538
> 
> 赞同：2
> 
> 时间：2012-12-07T18:02:37.853
> 
> 标签：grid, filtering, kendo-ui

我正在研究剑道 UI，我看到了一些非常奇怪的东西。我已经使用该`Starts with`函数过滤了一个列，并在文本框中输入了一个字符串。但是当我点击时`Filter`，请求甚至没有发送到服务器，并且永远显示一个微调器。我遇到的错误是：

```
Uncaught TypeError: Cannot call method 'toLowerCase' of null 
```

在给定的列中也有一些空值。我应该将它们的值设置为“”或其他临时值以防止发生此错误吗？这是解决此问题的最佳方法吗？

当我说这是剑道 UI 错误时，我说得对吗？如果是这样，这是一个已知问题吗？如果是这样，有人知道什么时候会解决这个问题吗？

编辑：显然，如果我的数据源在服务器端包含“”而不是空值，那么我不会遇到这个错误，但始终关注我的数据源以将所有空值更改为“”是不好的。我知道调用该函数是为了实现不区分大小写，但它有一个错误，使网格的使用有点不舒服。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:03:26.597

您的网格是否配置为使用客户端过滤？如果是，那么我建议您将数据数据字段从**null**更改为空字符串。

如果您使用服务器过滤，则不应在 imo 中抛出此类 JavaScript 错误。

# java - 使用下一代插件的java小程序

> ID：13768539
> 
> 赞同：8
> 
> 时间：2012-12-07T18:02:42.230
> 
> 标签：java, plugins, applet

我有一个 Web 应用程序（struts 1.3、Weblogic 10.3.0、Toplink、Oracle），当在 Java 中启用下一代插件设置时，它的 Java 小程序在浏览器 (IE7/8) 中不起作用控制面板，但在禁用时工作正常。问题是这个设置将在即将发布的 Java 版本中消失，这意味着我的用户必须像现在一样在他们的工作站上继续使用 Java 1.6_xx。我对他们使用哪个版本几乎没有影响，因为他们都由全国各地的当地 IT 部门管理。因此，要么我必须找到一个简单的修复程序以允许下一代设置工作，要么我们必须考虑用其他东西替换/重写小程序（但由于资金限制，这将是最后的手段），很可能是一些东西AJAX 友好以避免需要插件。

主窗口有一个左、右和顶部框架（JSP），以及一个中心框架，它是小程序所在的位置。小程序中间有一个主要内容区域，底部有一个下部面板，上面有一些按钮。这些按钮告诉内容区域（基本上是一个树形网格）要做什么（保存、复制、更改状态等）。当我按下其中一个按钮时，整个窗口（周围的框架加上小程序本身）在小程序所在的区域内重复。这就像一个万花筒，或者像一个重复的分形图案之类的东西，或者就像当你在镜子里给自己拍照时，你看到镜子里的房间一遍又一遍地重复。在这种情况下，每次按下按钮都会重复，并且每次重复设置都会变小。诡异的！！

因此，根据我的研究，Java Next-Generation 插件的工作方式不同，它允许多个进程或线程，而经典插件只使用一个线程。所以我怀疑每次按下按钮都会产生一个新进程。我尝试使用“separate_jvm”小程序参数，但设置为 true 或 false 没有区别。我没有看到任何其他似乎相关的小程序参数。

我的另一个想法是，它可能与 JSP 框架集有关，可能需要在某处添加诸如“target=_top”之类的东西……但我不确定这与 applet 线程有什么关系。

任何人有任何建议，想法或经验可能会有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T07:16:14.320

你可以使用速度来处理这些类型的问题，它也将帮助你未来的增强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-03T09:01:20.080

该问题与 IE 版本无关，而与 Java 版本有关。以下摘自证书提供者的信函（他们从某个论坛获取，因此无法提供直接指向源的链接）：

> 对于JDK 1.6.0 以上及1.6_15 以下的版本，只需清除浏览器、java 控制台和java 控制面板中的各种缓存即可。那么它应该可以正常工作！
> 
> 对于 1.6_15 和 1.6_30 之间的 JDK 版本，您应该禁用 Java 控制面板中的“下一代 Java”选项。
> 
> 对于高于 1.6_30 的 JDK 版本，您应该在 java 控制面板中打开“next-generation java”选项。

# session - PHP：在会话中断会话中存储闭包

> ID：13768543
> 
> 赞同：3
> 
> 时间：2012-12-07T18:03:01.077
> 
> 标签：session, mysqli, php

> **更新：已解决**
> 
> 我终于弄清楚了我的问题（我认为）。我很确定问题是闭包不能序列化，这意味着它们不能存储在会话中。下一个问题是 PHP 没有返回一个非常有用的错误，并且以一种意想不到的方式中断，而不是仅仅告诉我我无法序列化闭包。

* * *

我将会话数据存储在 mysql 数据库中。我已经准备好我的应用程序的这一部分，并且运行良好了很长一段时间。今天我试图在会话中存储一个闭包（即匿名函数），这破坏了我原本表现良好的会话。

我的会话管理由一个对象处理，当 PHP 尝试销毁该对象时，该对象会自动调用 session_write_close()。我这样做是因为否则，当 PHP 尝试关闭会话时，我的数据库连接（一个 mysqli 对象）已经被破坏了。

我像这样接管会话处理：

```
// set the session save handler
session_set_save_handler(
    array( $this, '_open' ),
    array( $this, '_close' ),
    array( $this, '_read' ),
    array( $this, '_write' ),
    array( $this, '_destroy' ),
    array( $this, '_clean' )
); 
```

这是相当标准的。处理会话关闭的部分是这样的：

```
public function __destruct()
{
    // this variable will only be destroyed when the script is closing
    // at this point it is safe to close the session
    // if we wait for php to close the session then we will
    // have lost the database connection, so we do it now

    session_write_close();
}

// write session data
public function _write( $sid, $data )
{
    // run query to write to database
    $now = NOW;
    $stmt = $this->mysqli->prepare( "REPLACE INTO $this->table (sid,time,data) VALUES (?,?,?)" );
    $stmt->bind_param( 'sis', $sid, $now, $data );

    // execute
    $success = $stmt->execute();

    // close
    $stmt->close();

    // and return
    return $success;
}

// close session store
public function _close()
{
    // close the database connection
    $this->mysqli->close();

    return true;
} 
```

几个打印函数表明，这通常像你想象的那样工作：调用 __destruct() 函数，该函数调用 session_write_close()，紧接着调用 _write() 和 _close()。但是，当我存储会话的关闭时：

```
$test = function($name)
{
    print "Hello $name";
};

$_SESSION['test'] = $test; 
```

一切都破裂了。__destruct() 像以前一样被调用，但执行永远不会到达 _write() 或 _close() 函数。相反，我收到这些消息：

> 警告：session_write_close() [function.session-write-close]：无法写入会话数据（用户）。请在第 48 行的 /var/www/vhosts/ambida.com/httpdocs/includes/core/session_handler.php 中验证 session.save_path 的当前设置是否正确（/var/lib/php/session）
> 
> 致命错误：在第 0 行的 Unknown 中抛出没有堆栈帧的异常

这真的没有任何意义。看起来它已恢复为默认会话处理程序，这当然会失败，因为 tmp 文件从未打开（因为我的函数接管了打开会话）。我不明白为什么在会话中存储一个闭包会导致这种恢复发生，或者为什么这通常会中断。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T14:17:59.043

这现在可以通过使用`SuperClosure`Jeremy Lindblom 的来实现。这个包可以在他的 github 上找到：[https ://github.com/jeremeamia/super_closure](https://github.com/jeremeamia/super_closure)

# iphone - UIPopoverController 如何修复 iPad？

> ID：13768547
> 
> 赞同：0
> 
> 时间：2012-12-07T18:03:12.373
> 
> 标签：iphone, objective-c, xcode, ipad

仅当使用以下代码时，我在 iPad 上遇到错误/崩溃，iPhone 工作正常。

基本上是在尝试加载图库以选择图像时。

调试错误是；“在 iPad 上，UIImagePickerController 必须通过 UIPopoverController 呈现”

```
-(void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
    if (buttonIndex == 0) {
        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
            UIImagePickerController *picker = [[UIImagePickerController alloc] init];
            picker.delegate = self;
            picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            [self presentModalViewController:picker animated:YES];
            [picker release];
        }
        else {
            UIAlertView *alert = [[UIAlertView alloc]
                                  initWithTitle:@"Error accessing photo library"
                                  message:@"Device does not support a photo library"
                                  delegate:nil
                                  cancelButtonTitle:@"Abort!"
                                  otherButtonTitles:nil];
            [alert show];
            [alert release];
         }

    }
        if (buttonIndex == 1) {

        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
            UIImagePickerController *picker = [[UIImagePickerController alloc] init];
            picker.delegate = self;
            picker.allowsEditing = YES;
            picker.sourceType =UIImagePickerControllerSourceTypeCamera; 
            [self presentModalViewController:picker animated:YES];
            [picker release];
        }
        else {
            UIAlertView *alert = [[UIAlertView alloc]
                                  initWithTitle:@"Error accessing Camera"
                                  message:@"Device does not support a Camera"
                                  delegate:nil
                                  cancelButtonTitle:@"Abort!"
                                  otherButtonTitles:nil];
            [alert show];
            [alert release];
        }

        }

    }

    -(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
        NSLog(@"the info opf picker is %@",info);
        NSAutoreleasePool *pool=[[NSAutoreleasePool alloc]init];
        NSData *imageData;

        if ([info objectForKey:UIImagePickerControllerEditedImage]) {
            UIImage *image2=[info objectForKey:UIImagePickerControllerEditedImage];
            //UIImage *myscaledImage=[self scaleImage:image2 toSize:CGSizeMake(18, 24)];
            //imageData = UIImagePNGRepresentation(myscaledImage);

            imageData=UIImageJPEGRepresentation(image2, .4);
            NSLog(@"the lenght of the edited image data is %d",[imageData length]);

        }
        else {
            UIImage *image=[info objectForKey:UIImagePickerControllerOriginalImage];

            //UIImage *myscaledImage=[self scaleImage:image toSize:CGSizeMake(18, 24)];
            //imageData = UIImagePNGRepresentation(myscaledImage);

            imageData=UIImageJPEGRepresentation(image, .6);
            NSLog(@"the lenght of the image dataa is %d",[imageData length]);

        }

        NSDictionary *tempDict=[NSDictionary dictionaryWithObjectsAndKeys:imageData,@"Image",@"Theme",@"Cell_Text",nil];
    //  NSLog(@"the custom array%@ and the row =%d", customArray,currentCameraRow);
        [customArray replaceObjectAtIndex:currentCameraRow withObject:tempDict];

        [pool drain];

        //NSLog(@"")
         [self startThread];        

        [picker dismissModalViewControllerAnimated:YES];
        [myCustomTableView reloadData];

        NSLog(@"size of myObject: %zd", malloc_size(myCustomTableView));

    } 
```

任何人都可以帮助上面的代码吗？我在猜测 if/else 语句，但不知道它会是什么以及放置它的位置。

提前致谢，

克里斯

编辑 - 好的，我现在可以从图库加载现在在一个小窗口中加载“照片”，我可以在其中选择，但是没有“选择”或“选择”按钮，如果我单击照片，则没有勾选，说它被选中，但是它确实选择了它，但是要关闭我在窗口外单击...所以它可以工作，但我猜我错过了一些东西，这是代码；

```
-(void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
if (buttonIndex == 0) {
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
        UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        picker.delegate = self;
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        {
            if(popoverController != nil)
            {
                [popoverController release];
                popoverController = nil;
            }
            UIPopoverController* popover = [[UIPopoverController alloc] initWithContentViewController:picker];
            popoverController = popover;
            popoverController.delegate = self;
            [popover presentPopoverFromRect:CGRectMake(0, 0, 200, 800)
                                     inView:self.view
                   permittedArrowDirections:UIPopoverArrowDirectionAny
                                   animated:YES];
        }
        else
        {
            [self presentModalViewController:picker animated:YES];
        }

//      [self presentModalViewController:picker animated:YES];
        [picker release];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle:@"Error accessing photo library"
                              message:@"Device does not support a photo library"
                              delegate:nil
                              cancelButtonTitle:@"Abort!"
                              otherButtonTitles:nil];
        [alert show];
        [alert release];
     }

}
    if (buttonIndex == 1) {

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        picker.delegate = self;
        picker.allowsEditing = YES;
        picker.sourceType =UIImagePickerControllerSourceTypeCamera; 
        [self presentModalViewController:picker animated:YES];
        [picker release];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle:@"Error accessing Camera"
                              message:@"Device does not support a Camera"
                              delegate:nil
                              cancelButtonTitle:@"Abort!"
                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

    }

}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    NSLog(@"the info opf picker is %@",info);
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc]init];
    NSData *imageData;

    if ([info objectForKey:UIImagePickerControllerEditedImage]) {
        UIImage *image2=[info objectForKey:UIImagePickerControllerEditedImage];
        //UIImage *myscaledImage=[self scaleImage:image2 toSize:CGSizeMake(18, 24)];
        //imageData = UIImagePNGRepresentation(myscaledImage);

        imageData=UIImageJPEGRepresentation(image2, .4);
        NSLog(@"the lenght of the edited image data is %d",[imageData length]);

    }
    else {
        UIImage *image=[info objectForKey:UIImagePickerControllerOriginalImage];

        //UIImage *myscaledImage=[self scaleImage:image toSize:CGSizeMake(18, 24)];
        //imageData = UIImagePNGRepresentation(myscaledImage);

        imageData=UIImageJPEGRepresentation(image, .6);
        NSLog(@"the lenght of the image dataa is %d",[imageData length]);

    }

    NSDictionary *tempDict=[NSDictionary dictionaryWithObjectsAndKeys:imageData,@"Image",@"Theme",@"Cell_Text",nil];
//  NSLog(@"the custom array%@ and the row =%d", customArray,currentCameraRow);
    [customArray replaceObjectAtIndex:currentCameraRow withObject:tempDict];

    [pool drain];

    //NSLog(@"")
     [self startThread];        

    [picker dismissModalViewControllerAnimated:YES];
    [myCustomTableView reloadData];

    NSLog(@"size of myObject: %zd", malloc_size(myCustomTableView));

}

-(UIImage *)scaleImage:(UIImage *)image toSize:(CGSize)newSize {  
    UIGraphicsBeginImageContext(newSize);  
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];  
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();  
    UIGraphicsEndImageContext();

    return newImage;  
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:08:45.217

错误很明显：

> 在 iPad 上，UIImagePickerController 必须通过 UIPopoverController 呈现

在 iPad 上运行时，您需要将图像选择器放在弹出框控制器中。`sourceType`当用于照片库时，这是正确的。基于相机的图像选择器可以显示为全屏模式视图控制器。

这在 iPhone 上不是问题，因为 iPhone 不支持`UIPopoverController`.

示例应用程序`PrintPhoto`演示了如何在弹出窗口中显示图像选择器。具体见`PrintPhotoViewController.m`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:19:07.177

做这样的事情：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    //present as a pop over vc
} else {
    //present as a modal vc
} 
```

要显示弹出框，您可以使用此方法

```
- (void)presentPopoverFromRect:(CGRect)rect inView:(UIView *)view permittedArrowDirections:(UIPopoverArrowDirection)arrowDirections animated:(BOOL)animated 
```

[您可以在此链接链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)中阅读文档

# charts - Dojox 图表中的 Lbal 和带有蜘蛛网的图例

> ID：13768553
> 
> 赞同：0
> 
> 时间：2012-12-07T18:03:55.620
> 
> 标签：charts, dojo

这是我的代码：

我需要在这里制作一个带有蓝色图例的蜘蛛网图。3 轴

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js"></script>
    <script>
    dojo.require("dojox.charting.Chart2D");
    dojo.require("dojox.charting.axis2d.Default");
    dojo.require("dojox.charting.plot2d.Default");
    dojo.require("dojox.charting.plot2d.Spider");
    dojo.require("dojox.charting.axis2d.Base");
    dojo.require("dojox.charting.widget.Legend");

         dojo.ready(

                 function(Chart, Default, Default, Spider, Base,Legend){
             var chart1 = new dojox.charting.Chart("chart1");
             chart1.addPlot("default", {
             type:         "Spider",
             labelOffset:      -10,
             seriesFillAlpha:     0.2,
             markerSize:       3,
             precision:         0,
             divisions:         11,
             spiderType:          "polygon"
         });

        var data= [ {"J":0,"S":0,"I":0},
        {"J":10,"S":10,"I":10},
        {"J":7,"S":4,"I":8} ];

        chart1.addSeries("min", {data: data[0] }, { fill: "blue" });
        chart1.addSeries("max", {data: data[1] }, { fill: "blue" });
        chart1.addSeries("Test", {data: data[2] }, { fill: "blue",text: "Test" });
        chart1.render();
        chart1.removeSeries("min");
        chart1.removeSeries("max");
        var legendTwo = new Legend({chart: chart1}, "legendTwo");

        });

    </script>
</head>
<body>
    <div id="chart1" style="width: 600px; height: 600px;"> </div>
    <div id="legendTwo"></div>

</body>
</html> 
```

而且我不明白为什么标签和图例不打印。

删除是由于 dojox 的一个错误。

问候

比西埃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:02:42.757

我可能误解了您的问题，但是由于您使用的是旧的模块加载样式（dojo.require），因此您需要 Legend 类的全名：

```
var legendTwo = new dojox.charting.widget.Legend({chart: chart1}, "legendTwo"); 
```

# algorithm - 字符串的成对独立哈希函数？

> ID：13768560
> 
> 赞同：1
> 
> 时间：2012-12-07T18:04:29.087
> 
> 标签：algorithm, math, data-structures, hash

许多随机算法和数据结构（例如[Count-Min Sketch](http://en.wikipedia.org/wiki/Count-Min_sketch)）需要具有成对独立属性的哈希函数。直观地说，这意味着与特定元素发生哈希冲突的概率很小，即使该元素的哈希函数的输出是已知的。

我发现了许多关于基于随机线性函数的固定长度位向量的成对独立哈希函数的描述。但是，我还没有看到任何成对独立的字符串散列函数示例。

是否有任何成对独立的字符串散列函数系列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:49:28.920

我很确定它们存在，但你的问题有一些测量理论的微妙之处。你最好问问 mathoverflow。我对这些东西很生疏，但我想我可以证明，即使它们确实存在，你实际上并不想要一个。

首先，您需要对字符串进行概率测量，并且任何此类测量都必然与任何“均匀”概念看起来*非常*不同。（这是一个可数集，所有可数集上的 sigma 代数只是将元素集聚集在一起，并为每个集合分配一个概率。你会希望所有的团块都是单例。）

现在，如果你只给出有限多个字符串的正概率，那么你又回到了有限的情况。所以让我们暂时忽略它并假设，对于任何 epsilon > 0，您可以找到一个概率严格在 0 和 epsilon 之间的字符串。

假设我们限制哈希函数将字符串映射到 {0,1} 的情况。

您的散列函数族也需要是无限的，并且您需要将其作为散列函数的概率空间来讨论。如果您有一组 H 具有正概率的哈希函数，则每个字符串都通过 H 的（不同）元素映射到 0 和 1。特别是，H 中没有单个元素具有正概率。所以 H 必须是不可数的，你突然遇到了困难的可表示性问题。

如果没有忘记测度论的人在这里插话，我会很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T20:35:42.040

不是有界长度的种子和非零有界长度的输出。

这种效果的一个相当粗略的论据是，对于一个有限的散列函数 H 族，考虑一个从元素 x 到一个元组的映射 f，它为 H 中的每个 h 给出 h(x)。由于每个 h 的共域，因此 f 是有限的，存在两个字符串被 H 中的所有 h 以相同的方式映射，假设至少有两个可能的哈希值，这与成对独立相矛盾。

# c# - 如何在后面的代码中使用 jquery 从动态创建的元素中获取值

> ID：13768563
> 
> 赞同：1
> 
> 时间：2012-12-07T18:04:53.323
> 
> 标签：c#, jquery, asp.net, dynamic, webforms

您好，感谢您花时间回答我的问题。

我有以下问题。我有一个表格和一个按钮，上面写着“添加新活动”。

每当单击按钮时，我都会添加一组新元素，即 2 个下拉菜单 + 文本区域。由于我无法预先知道它们的 id，如何在后面的代码中获取这些新创建元素的值？

如果我的问题有什么不清楚的地方，请告诉我。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:12:17.540

但是您必须使用特定模式设置新元素的 id（更重要的是 - 名称属性）。在服务器端代码的循环中使用相同的模式从`Request.Form`. 提供一个隐藏输入，您可以在其中放置为服务器端添加的项目总数，以了解循环计数器的上限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:19:06.927

如果您打算再次访问它们，则应在创建元素时设置 id 所以如果这是您的文本区域：

```
var textarea = document.createElement('textarea'); 
```

您可以将 id 设置为：

```
textarea.id = "taId"; 
```

# javascript - 如何在 javascript/jquery 中找到“最深”div 的类名？

> ID：13768564
> 
> 赞同：1
> 
> 时间：2012-12-07T18:04:59.507
> 
> 标签：javascript, jquery, html

我知道 e.target 包含光标下方元素的信息，但是如果我想知道其中有一个 table>tr>td> 按钮的 div 的类名并且我正在单击该按钮怎么办在那个td里面。我知道这个事件会冒泡，应该有办法找出 div 是否存在于那个冒泡的关卡中。任何帮助。

场景：按钮位于模态窗口内。如何在单击其中的按钮时找到模态窗口类名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:07:30.583

用于[`.closest()`](http://api.jquery.com/closest/)向上遍历 DOM 到最近的匹配：

```
var parentDiv = $(yourButton).closest('div'); 
```

或者在按钮的`click`：

```
$(yourButton).click(function() {
  var nearestParentDiv = $(this).closest('div');
  // And read its class
  console.log(nearestParentDiv.attr('class'));
}); 
```

选择器`.closest()`接受当然可以比这更具体，所以如果模态窗口`<div>`有一些*已知*的类但你需要检查它的其他类，你应该使用更具体的选择器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T18:10:18.697

是的，正如你所说，事件会冒泡到你的 div，所以只需让 div 用 处理事件`.on()`，如下所示：

```
$('#yourdiv').on('click',':button',function(e) {
   alert( $(e.delegateTarget).attr('class') );//alerts the classes of #yourdiv
   alert( $(this).attr('id'));//alerts the id of the clicked button (if have one)
}); 
```

**更新：**
修复了获取对附加事件的原始 div 的引用。使用来自[Event 对象的](http://api.jquery.com/category/event-object/)[event.delegateTarget](http://api.jquery.com/event.delegateTarget/)。感谢 Cristophe 和 Kevin B. 发现错误。

查看工作[**演示**](http://jsfiddle.net/gnel/chdh3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:10:38.743

您可以使用`.parent()`获取父 div 属性，如 id：http: [//jsbin.com/ololad/1/edit](http://jsbin.com/ololad/1/edit)

```
$('button').click(function(){
    console.log($(this).parent().attr('id'));
}); 
```

# jquery - 使用 Highcharts 调整高度

> ID：13768565
> 
> 赞同：21
> 
> 时间：2012-12-07T18:05:02.987
> 
> 标签：jquery, css, highcharts

我有一个 Highchart，当窗口改变大小时，它可以很好地调整宽度。但不是高度。我尝试了这个设置的图表大小，但它不能正常工作。当窗口改变大小时，有没有其他方法可以自动改变高度？

这是我的输出 css 代码。我有一个 Jquery UI 选项卡，另一个选项卡显示数据表

```
#output-container
{
    float: right;
    display: inline;
    position: absolute;
    right: 10px; 
    left: 400px;
    top:120px;
    overflow-y: auto;
} 
```

这是我的chartdiv css：

```
#chartContainer{
    margin: auto;
} 
```

这是 js Chart 函数：

```
function qchart(){
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'chartContainer',
            type: 'column',
            spacingBottom: 3,
            //height: (screen.availHeight)-500,
            marginRight: 30,
            marginBottom: 30,
            reflow: true
        },
        //etc..
    };
    //...
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-25T21:13:33.327

[然而， Ricardo 的回答](https://stackoverflow.com/a/13769118/7032856)是正确的：有时您可能会发现自己处于这样一种情况，即容器根本没有根据浏览器窗口的大小调整大小，因此不允许 highcharts 自行调整大小。

这总是有效的：

1.  设置定时和流水线调整大小事件侦听器。[jsFiddle 上 500 毫秒的示例](http://jsfiddle.net/Zevan/c9UE5/5/)
2.  在您的实际调整大小函数中使用[`chart.setSize(width, height, doAnimation = true);`](http://api.highcharts.com/highcharts#Chart.setSize%28%29) 动态设置高度和宽度
3.  `reflow: false`在 highcharts-options 中设置，当然也`height`可以`width`在创建时明确设置。由于我们将进行自己的调整大小事件处理，因此不需要在另一个事件中使用 Highcharts 挂钩。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-07T18:45:33.613

根据 API 参考：

`By default the height is calculated from the offset height of the containing element. Defaults to null.`

因此，您可以`height`根据父 div 使用`redraw`事件来控制它，当它改变它的大小时会调用它。

*参考*

*   [http://api.highcharts.com/highstock#chart.height](http://api.highcharts.com/highstock#chart.height)
*   [http://api.highcharts.com/highstock#chart.events.redraw](http://api.highcharts.com/highstock#chart.events.redraw)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-11-06T08:13:48.010

您必须明确设置容器的高度

```
#container {
    height:100%;
    width:100%;
    position:absolute; 
} 
```

[查看其他 Stackoverflow 答案](https://stackoverflow.com/questions/8809852/highcharts-how-to-have-a-chart-with-dynamic-height)

[Highcharts 文档](https://api.highcharts.com/highcharts/chart.height)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-11T03:45:17.150

我在高度方面遇到了类似的问题，除了我的图表在引导模式弹出窗口内，我已经用 css 控制了它的大小。但是，由于某种原因，当水平调整窗口大小时，图表容器的高度会无限扩大。如果您要来回拖动窗口，它将无限期地垂直扩展。我也不喜欢硬编码的高度/宽度解决方案。

因此，如果您在模式中执行此操作，请[将此解决方案](https://stackoverflow.com/a/25400458/350270)与窗口调整大小事件结合使用。

```
// from link
$('#ChartModal').on('show.bs.modal', function() {
    $('.chart-container').css('visibility', 'hidden');
});

$('#ChartModal').on('shown.bs.modal.', function() {
    $('.chart-container').css('visibility', 'initial');
    $('#chartbox').highcharts().reflow()
    //added
    ratio = $('.chart-container').width() / $('.chart-container').height();
}); 
```

其中“比率”变为高度/宽度纵横比，当引导模式调整大小时，您将调整大小。此测量仅在打开模态时进行。我将比率存储为全局，但这可能不是最佳实践。

```
$(window).on('resize', function() {
    //chart-container is only visible when the modal is visible.
    if ( $('.chart-container').is(':visible') ) {
        $('#chartbox').highcharts().setSize( 
            $('.chart-container').width(),
            ($('.chart-container').width() / ratio),
            doAnimation = true );
    }       
}); 
```

因此，您可以将屏幕拖到一边（调整其大小），您的图表将保持其纵横比。

宽屏

[![在此处输入图像描述](../Images/8338981f02b581dc571c71b3770443ae.png)](https://i.stack.imgur.com/4f4jT.png)

与更小

[![在此处输入图像描述](../Images/c7a90699c16ab57ea4aef13eb9e846e1.png)](https://i.stack.imgur.com/qBxTm.png)

（还在摆弄大众单位，所以后面的所有东西都太小了，看不懂哈哈！）

# php - 我的网站在侧边栏的位置有一条线，如何删除它？

> ID：13768582
> 
> 赞同：-2
> 
> 时间：2012-12-07T18:06:11.893
> 
> 标签：php, html, sidebar

如何删除右侧向下的线，它曾经是侧边栏。任何帮助表示赞赏，谢谢。

我的网站在这里： http: [//mcj.site40.net/](http://mcj.site40.net/)

精确定位问题的图像：http: [//i.stack.imgur.com/Eiiec.png](http://i.stack.imgur.com/Eiiec.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:10:08.103

该线是您的背景图像的一部分`#wrap`

您将需要更改图像。

这是图像： http: [//mcj.site40.net/style/images/wrap.gif](http://mcj.site40.net/style/images/wrap.gif)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:14:28.510

我看到你在这里有一个背景图片。删除它以摆脱线。

```
#wrap {
background: url("http://mcj.site40.net/style/images/wrap.gif") repeat-y scroll center top #FFFFFF;
margin: 40px auto 30px;
position: relative;
text-align: left;
width: 952px; 
```

}

# php - 我的 php/mysql 代码有什么问题？

> ID：13768585
> 
> 赞同：0
> 
> 时间：2012-12-07T18:06:35.230
> 
> 标签：php, mysql

我正在玩弄一种博客。我收到一个错误，当我说：

我的PHP如下：

```
 $query = "INSERT INTO articles (articleTitle, articleType, articleText, userID)
        VALUES('$articleTitle', '$articleType', '$articleText', '$userID')";

    $result = mysql_query($query);

    var_dump($articleTitle);
    var_dump($articleType);
    var_dump($articleText);
    var_dump($userID);

    var_dump($result);

    echo mysql_error(); 
```

我的结果是这样的：

```
 string 'New News! (Sounds like noo noo's)' (length=33)
    string 'News' (length=4)
    string 'NEWS is here! This is Michael Bender reporting on the new news that we now have news! Isn't that exciting news?' (length=111)
    string '1' (length=1)
    boolean false 
```

> 您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在 's)'、'News'、'NEWS is here 附近使用的正确语法！这是迈克尔·本德（Michael Bender）在第 2 行报道新新闻

那么为什么mysql不接受我的查询呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:08:19.797

您必须转义所有传递给 mysql_query 的变量`mysql_real_escape_string`。此外，您可能想要使用 PDO 或 mysqli。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:08:33.203

这会破坏您的查询：

> 字符串'新消息！（听起来像 noo noo's）'（长度 = 33）

单引号`'`

在查询中使用它们之前，您需要转义您的值。否则你将成为[Sql Injection的受害者](http://php.net/manual/en/security.database.sql-injection.php)

例子：

```
$query = "INSERT INTO articles (articleTitle, articleType, articleText, userID)
        VALUES('%s', '%s', '%s', %d)";

$query = sprintf($query,
   mysql_real_escape_string($articleTitle),
   mysql_real_escape_string($articleType), 
   mysql_real_escape_string($articleText), 
   (int) $userID); // assuming your userId is an integer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:11:51.500

在您的数据上使用 mysql_real_escape_string()，因为它会防止您的查询因为它们包含特殊字符而崩溃。

# java - XStream 类无法解析

> ID：13768586
> 
> 赞同：2
> 
> 时间：2012-12-07T18:06:36.727
> 
> 标签：java, xml, exception, xstream

我收到以下设置的 XStream 错误。我一定是疯了。怎么了？

请求类

```
@XStreamAlias("RequestTO")
public class RequestTO {

    @XStreamImplicit
    private List<SkuMerchTO> skuNumbers;
...
} 
```

嵌套对象类

```
@XStreamAlias("skuMerch")
public class SkuMerchTO {

    @XStreamAlias("skuNumber")
    @XStreamAsAttribute
    private Integer skuNumber;

    @XStreamAlias("dept")
    @XStreamAsAttribute
    private Short department;

    @XStreamAlias("class")
    @XStreamAsAttribute
    private Short cls;

    @XStreamAlias("subClass")
    @XStreamAsAttribute
    private Short subClass;
...
} 
```

将 XML 解码为对象的 XStream 代码：

```
XStream stream = new XStream();
stream.processAnnotations(SkuMerchTO.class);
stream.processAnnotations(RequestTO.class);
RequestTO request =  (RequestTO)stream.fromXML(requestXml); 
```

XML 输入字符串：

```
<RequestTO>
     <skuMerch skuNumber="123456" dept="1" class="2" subClass="3"/>
     <skuMerch skuNumber="234567" dept="4" class="5" subClass="6"/>  
</RequestTO> 
```

Stacktrace 中的错误：
----调试信息----
消息：2：2
原因异常：com.thoughtworks.xstream.mapper.CannotResolveClassException
原因消息：2：2
类：[...]RequestTO
required-type ：[...]SkuMerchTO
路径：/RequestTO/skuNumberList/skuMerch
行号：3
.-------------------------------------------- -
com.thoughtworks.xstream.converters.ConversionException：2：2：2：2
----调试信息----
消息：2：2
原因异常：com.thoughtworks.xstream.mapper.CannotResolveClassException
原因消息： 2：2
类：[...]RequestTO
所需类型：[..]SkuMerchTO
路径：/RequestTO/skuNumberList/skuMerch
行号：3
.-------------------- ------------

如果我创建对象并执行 toXML，我会得到：

```
<RequestTO>
  <skuMerch skuNumber="0" dept="1" class="2" subClass="2"/>
  <skuMerch skuNumber="1" dept="1" class="2" subClass="2"/>
  <skuMerch skuNumber="2" dept="1" class="2" subClass="2"/>
</RequestTO> 
```

编辑：有趣的是，如果这样做：

```
 stream.fromXML(stream.toXML(object)); 
```

它在 from XML 部分仍然失败！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:21:42.103

命名的属性`class`对 XStream 具有特殊含义，[这个问题](https://stackoverflow.com/q/4923742/592139)表明您可以通过类似的方式告诉 XStream 为此目的使用不同的属性

```
stream.aliasSystemAttribute("__class", "class"); 
```

这将导致 XStream`__class`用作“特殊”属性，并被`class`视为普通属性。或者，如果您知道您的任何对象都不需要 XStream 魔法处理，`class`您可以说

```
stream.aliasSystemAttribute(null, "class"); 
```

to tell it not to use this feature at all.

You may also need to use `itemFieldName="skuMerch"` on the `@XStreamImplicit` annotation, as per the [XStream annotation tutorial](http://x-stream.github.io/annotations-tutorial.html).

# matlab - Matlab GUI 回调警告

> ID：13768588
> 
> 赞同：3
> 
> 时间：2012-12-07T18:06:41.610
> 
> 标签：matlab, matlab, warnings, matlab-guide

所有 GUI 组件`Callback`功能都有功能`might not be used`警告。

我知道大多数程序员在代码运行正常时关心这种愚蠢的警告听起来很愚蠢，但我想知道为什么[matlab](/questions/tagged/matlab "显示标记为“matlab”的问题")会发出这样的警告，尽管在单击按钮时调用了函数，或者发生了任何组件回调事件。

有人可以在这里解释如何解决这个警告吗？或者为什么会发生这种情况？

**提示**：我正在使用`Matlab R2011a`，如果一个版本与另一个版本不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:21:51.087

解决方案是将此字符串添加到`%#ok<DEFNU>`函数定义行的末尾以禁用`might not be used`此行中的警告或`%#ok<*DEFNU>`禁用当前文件中的此警告类型。

并且它表明没有警告并且这个问题在运行时是可以的。

# facebook - 创建动态对象 Facebook 图表

> ID：13768594
> 
> 赞同：1
> 
> 时间：2012-12-07T18:06:58.350
> 
> 标签：facebook, object, facebook-opengraph

我确信这是一个简单的解决方案，但我是 Facebook 应用程序的新手。

我有一个名为 user 的自定义对象，它与推荐的自定义操作类型相关联。我试图让打开的图表帖子说出以下内容：

**NAME 网站上推荐的名称。**

我一切正常，除了我看不到如何动态传递第二个名称，因为它来自我的网站并发生了变化。

例如 Mike Johnson 在 Google.com 上推荐**Chris Marcus**如何让 Chris Marcus 动态插入到对象中？

谢谢

# c - 仅将字符数组的第一个元素传递给函数 c++

> ID：13768598
> 
> 赞同：0
> 
> 时间：2012-12-07T18:07:07.290
> 
> 标签：c, string, chars

基本上我有一系列单词

```
 void print(char *str) {
 cout << str <<endl;
 }

 int main() {
 int i =0;
 char* name[] = {"Fred", "John", "Jimmy"};
 print(*name[0]);
 } 
```

我只想将第一个单词传递给一个函数，但是当我以我现在正在做的方式做事时，它会传递所有的名字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:08:28.570

你有一个额外的取消引用，代码应该是这样的：

```
print(name[0]); 
```

理想情况下，您的`print`函数应该采用`const char*`，因为它不会修改传入的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:12:09.927

`char* name[]`是一个指向 char 的指针数组，通常是字符串。

`void print(char *str)`需要一个指向 char 的指针作为参数。

通过调用`print(*name[0])`，您实际上是从 name[] 数组中获取第一个指针，并将其取消引用以将其转换为单个字符。由于您的函数需要一个指向 char 的指针，因此您只需调用它`print(name[0])`即可获得数组中的第一项。

# iphone - CoreBluetooth 可以使用什么配置文件？

> ID：13768599
> 
> 赞同：3
> 
> 时间：2012-12-07T18:07:14.043
> 
> 标签：iphone, objective-c, ios, ipad, core-bluetooth

我在寻找有关的信息`CoreBluetooth`，我看到 iPhone4s/5 支持**蓝牙 4.0**和**蓝牙 LE**。
另外，根据this [note](http://support.apple.com/kb/HT3647)，我可以使用这些配置文件：

1.  **免提配置文件 (HFP 1.6)**
2.  **电话簿访问配置文件 (PBAP)**
3.  **高级音频分发配置文件 (A2DP)**
4.  **音频/视频远程控制配置文件 (AVRCP 1.4)**
5.  **个人区域网络配置文件 (PAN)**
6.  **人机接口设备配置文件 (HID)**
7.  **消息访问配置文件 (MAP)**

我可以使用它们`CoreBluetooth`访问它们吗？如果可以，我如何访问它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T09:02:45.947

如果您想从应用程序进行通信，则不能使用任何提到的配置文件。核心蓝牙用于低能耗，您只能使用 BLE 实现 GATT 配置文件（如心率、警报通知），而 BLE 用于小数据速率。您只能向设备写入或读取特性。为了实现上述任何配置文件，您需要串行端口配置文件，该配置文件仅通过使用外部附件框架的 MFi 支持。

关贸总协定简介

[http://developer.bluetooth.org/gatt/profiles/Pages/ProfilesHome.aspx](http://developer.bluetooth.org/gatt/profiles/Pages/ProfilesHome.aspx)

您可以在下面的链接中找到外部附件框架文档。

[http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/ExternalAccessoryFrameworkReference/_index.html](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/ExternalAccessoryFrameworkReference/_index.html)

小费

[https://developer.apple.com/programs/mfi/](https://developer.apple.com/programs/mfi/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:23:31.150

`CoreBluetooth framework`用于蓝牙低功耗。该注释似乎仅处理“经典”蓝牙（因为您看到“旧”设备）。在这种情况下，您必须使用`ExternalAccessory framework`. 它的两种技术完全不同，您可以通过在*Google*中搜索或在*StackOverflow*中的不同问题中看到。
有一个来自*Apple*的样本处理`ExternalAccessory framework`：*EADemo*。

# powershell - PowerShell：重命名 AD 对象后，Move-Mailbox 无法定位对象

> ID：13768600
> 
> 赞同：0
> 
> 时间：2012-12-07T18:07:21.483
> 
> 标签：powershell, exchange-server

所以在我的脚本中，当用户更改他们的名字时，我相应地重命名他们的 AD 对象，更改他们的 Exchange (2007) 属性，然后根据这些更改，我更改它所在的信息存储。

检索邮箱时，我将新的 DistinguishedName 存储在 $newDN 中，明确尝试使用 DC01.domain.local，然后当我尝试进行移动时，它尝试在 DC02.domain.local 上搜索，因此由于以下原因找不到对象复制滞后并在下面收到此错误。有人对此有任何想法吗？非常感谢！

StatusCode：-1056749240 StatusMessage：步骤中发生错误：批准对象。无法打开对象 'LDAP://DC02.domain.local/CN=di matteo\, robert,OU=Users,DC=domain,DC=local' 错误：服务器上没有这样的对象。

```
$mailbox = Get-Mailbox -ID $newDN `
    -DomainController DC01.domain.local

$mailbox | Move-Mailbox `
    -TargetDatabase $targetIS `
    -Confirm:$False `
    -DomainController DC01.domain.local `
    -GlobalCatalog DC01.domain.local 
```

有时移动有效，但当它无效时，它会将 SourceDomainController 属性留空（如下所示），就像它确实有效一样，它会使用 DC01.domain.local 正确填充它。

```
SourceServer                     : CCR.domain.local
SourceDatabase                   : CCR\IS1\IS1
SourceGlobalCatalog              : DC01.domain.local
SourceDomainController           : 
TargetGlobalCatalog              : DC01.domain.local
TargetDomainController           : DC01.domain.local
TargetMailbox                    : 
TargetServer                     : CCR.domain.local
TargetDatabase                   : CCR\IS2\IS2 
```

莫名其妙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:33:36.833

好吧，我不知道为什么我会得到我现在的结果，但我的解决方法就在这里......就像我之前说的，我查询/写入我所有的 AD 更改到 'DC01.domain.local' 但是现在，当我调用我的函数时，我会在“DC02.domain.local”上查找邮箱。如果查找失败，增加计数器，休眠大约 20 秒，然后重试。我最初的测试，它只需要循环一次。

```
$dc = "DC01.domain.local"

Function moveDB ($targetIS, $newDN, $counter) {

$dn = (Get-Mailbox -ID $newDN -DomainController $dc).DistinguishedName

If (!(Get-Mailbox $dn -DomainController "DC02.domain.local")) {
    $counter++
    If ($counter -le 4) {
        Write-Host "`nPlease wait while I search for the mailbox object...`n"  -ForegroundColor Yellow -BackgroundColor Red
        Start-Sleep -Seconds 20
        moveDB $targetIS $dn $dbCounter
    }
    Else {
        Write-Host "Mailbox was not moved!  Please move manually to $targetIS..."  -ForegroundColor Yellow -BackgroundColor Red
        return
    }
}
Else {
    $dn | Move-Mailbox `
        -DomainController $dc `
        -GlobalCatalog $dc `
        -TargetDatabase $targetIS `
        -Confirm:$False
    }
} 
```

# sql - 下表中的最近日期

> ID：13768602
> 
> 赞同：1
> 
> 时间：2012-12-07T18:07:30.097
> 
> 标签：sql, sql-server

```
ITEM        QBIN        ISSUED         ADDDATE            LCKDATE 
014342-XY   0022-F      2011-12-24     2007-08-09         2010-12-28 
014342-XY   0030+B      2009-12-26     2009-01-13         1900-01-01 
014342-XY   0030-B      2010-04-15     NULL               2010-12-28 
014342-XY   0030-D      2011-07-20     2010-12-28         2011-07-20 
```

从上表中，我想要最近的日期，结果将是这样的

```
ITEM         QBIN      recentdate 
014342XY     002-F     2011-12-24 
```

高度赞赏的回复

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:13:30.600

编辑#2：

```
select t1.item, 
  t1.qbin,
  src.maxdate as RecentDate
from yourtable t1
inner join
(
  select max(maxdate) MaxDate
  from 
  (
    select 
     case 
      when issued >= adddate and issued >= lckdate then issued
      when adddate >= issued and adddate >= lckdate then adddate
      when lckdate >= issued and lckdate >= adddate then lckdate end MaxDate
    from yourtable
  ) t2
) src
  on t1.issued = src.maxdate
  or t1.adddate = src.maxdate
  or t1.lckdate = src.maxdate 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d26c8/11)

~~在 SQL Server 中，您可以使用`row_number()`：~~

 ~~```
select item, qbin, issued as RecentDate
from
(
  select *,
    row_number() over(partition by item order by issued desc) rn
  from yourtable
) src
where rn = 1 
```~~ 

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d26c8/1)

或者您可以使用子查询：

```
select t1.item, 
  t1.qbin, 
  t1.issued as RecentDate
from yourtable t1
inner join
(
  select item, max(issued) issued
  from yourtable
  group by item
) t2
  on t1.item = t2.item
  and t1.issued = t2.issued 
```

~~请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d26c8/2)~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:39:42.610

# 这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!3/03dc8/5)

```
with t1 as
(

select ITEM,QBin,ISSUED as d from T
union all
select ITEM,QBin,ADDDATE as d from T
union all
select ITEM,QBin,LCKDATE as d from T
)
select * from
(
select t1.*,
 row_number() over(partition by item order by d desc) rn from T1
) t2
where rn=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:23:03.860

```
SELECT
    t.ITEM,  QBIN, ISSUED, adddate, lckdate
FROM TABLE t INNER JOIN
    (SELECT
        item,
        CASE 
            WHEN max_issued >= max_adddate AND max_issued >= max_lckDate THEN max_issued
            WHEN max_adddate >= max_issued AND max_adddate >= max_lckDate THEN max_adddate
            ELSE max_lckDate
        END AS max_date,
        CASE 
            WHEN max_issued >= max_adddate AND max_issued >= max_lckDate THEN 'i'
            WHEN max_adddate >= max_issued AND max_adddate >= max_lckDate THEN 'a'
            ELSE 'l'
        END AS src
    FROM
        (SELECT 
            item, 
            MAX(issued) AS max_issued, 
            MAX(ADDDATE) AS max_adddate, 
            MAX(LCKDATE) AS max_lckdate
        FROM 
            TABLE
        GROUP BY 
            item
        ) m ) c ON t.item = c.item 
where
    (src = 'i' AND t.issued = m.max_issued) OR
    (src = 'a' AND t.ADDDATE = m.max_adddate) OR
    (src = 'l' AND t.LCKDATE = m.max_lckDate) 
```

# jquery - 在Jquery中一键单击多次，选择器问题

> ID：13768603
> 
> 赞同：0
> 
> 时间：2012-12-07T18:07:33.803
> 
> 标签：jquery, onclick, click, selector

我有一个左侧带有“添加到购物车”按钮的元素列表（使用 Wordpress 插件安装的购物车）。当我单击该元素添加到购物车的按钮时（没有打开新页面，它只显示“已添加”消息）。我想要一个最终链接“将所有元素添加到购物车”，如果单击该链接，则会同时单击所有“添加到购物车”按钮。我的问题是：我不能使用与“添加到购物车”按钮相关的选择器，因为添加到购物车按钮没有唯一的 id，只是一个类，对于所有按钮总是相同的（我可以'不要改变它）。但我设法关闭了 div 内的按钮，该按钮具有与产品相关的唯一类属性。所以，这是按钮的代码情况：

```
// Product 1
<div class="cart1">
    <form action="http://url" method="post">
        <fieldset>
        <input class="button" value="Add to cart" title="Add product to cart" type="submit" />
        </fieldset>
</form>
</div>
// Product 2
<div class="cart2">
    <form action="http://url" method="post">
        <fieldset>
        <input class="button" value="Add to cart" title="Add product to cart" type="submit" />
        </fieldset>
</form>
</div> 
```

对于jquery代码，我认为一些点击功能就可以了，比如

```
<a onclick="functionClick1();functionClick2();">Add every product to cart</a> 
```

对于html，和

```
functionClick1() {
    $("").click();
    } 
```

对于 javascript。但是我可以在引号内放什么，因为添加到购物车按钮没有唯一的类或 ID？我如何告诉他：单击 div class="cart1" 元素中包含的按钮？感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:24:55.010

Try the below jquery code

```
$("div.cart1 > input,div.cart2 > input").click(function(){alert("input inside cart1/cart2"}); 
```

Thanks

# c# - 如何将 C# 表单嵌入 HTML？

> ID：13768604
> 
> 赞同：1
> 
> 时间：2012-12-07T18:07:37.757
> 
> 标签：c#, html, forms, embed

我使用 Visual Studio Express 创建了一个 C# 表单，但我想将它嵌入到我的网站中。我对 C# 和 Html 很陌生，我想知道如何在 Html 中嵌入 C# 表单。只是为了让您知道我正在使用 Weebly，并且我希望在其中放置一个 C# 表单的自定义 Html 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:27:17.683

Internet Explorer 可以[托管 .NET 控件](http://msdn.microsoft.com/en-us/magazine/cc301932.aspx)，但不再推荐使用 - 此功能已被 Microsoft 弃用，由 Silverlight 取代。我不确定 Silverlight 的未来前景如何。

# c++ - C++ 在 while 语句中评估底层 if 条件

> ID：13768606
> 
> 赞同：-1
> 
> 时间：2012-12-07T18:07:46.737
> 
> 标签：c++, if-statement, while-loop, operator-overloading, logic

我有一个问题，当 c++ 评估 while 语句时，即使不满足 while 语句条件，它也会评估基础 if 语句。

ite_candidats 是二叉映射树上的自定义迭代器。当没有更多节点可以访问时，ite_candidat 评估为 NULL。所以这段时间就结束了。但是，我从 ite_candidats.clecourante() 调用中得到一个断言失败，说我的底层节点是 NULL。它不应该评估 ite_candidats.clecourante() 因为它不是为了得到它。

我在调试模式下运行程序，当没有更多节点可以访问时， !!ite_candidats 真的评估为 false。如果我注释掉 if 块，程序就会退出 while 循环，一切正常......

ite_candidats 运算符 bool() 的运算符重载不会调用 clecourante()。

```
while(!!ite_candidats){
    if(ite_candidats.clecourante() != nompersonne){
        {...}
    }
    ite_candidats++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:09:32.993

是不可能的。如果它评估`if`然后它进入`while`。没有提前计算是`C++`。

PS为什么你有两个否定`while`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:24:15.483

粗略的猜测：ite_candidats 在代码中递增。可能结束迭代器没有评估为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T20:05:55.050

> ite_candidats 是二叉映射树上的自定义迭代器。当没有更多节点可以访问时，ite_candidat 评估为 NULL。

它真的评估为NULL吗？这有点可疑，因为您使用的是点运算符而不是`ite_candidats.clecourante()`. 从您发布的代码来看，它看起来像是`ite_candidats`某个对象的实例，而不是指向某个对象的指针。

> ite_candidats operator bool() 的运算符重载

我怀疑这就是问题所在。您`!!ite_candidats`将使用该转换运算符强制转换`ite_candidats`为 a `bool`，将该结果取反为 yield `!ite_candidats`，然后再次取反为 yield `!!ite_candidats`。

问题是您`operator bool()`正在检查与 . 的先决条件不同的条件`WhatEverYourCustomIteratorClassIsNamed::clecourante()`。

# sql - Oracle：无法创建两个复合键

> ID：13768614
> 
> 赞同：0
> 
> 时间：2012-12-07T18:08:15.740
> 
> 标签：sql, oracle, foreign-keys, composite-key

我的一张表有一个由三个外键（order_no、product_code 和 product_size）组成的复合键。

在 Product_size 是主键的表中，我希望有一个由 Product_size 和 product_code 组成的复合键。如果我确实将它们设为复合键，单独的 product_size 将不是 PK，因此我无法在创建由三个外键组成的复合键时引用它。

```
create table product_stock
(
Product_Code varchar2(6) constraint productcode_fk references product(Product_Code),
Product_Size char(1) constraint size_chk check (Product_Size in   
('L', 'l', 'M', 'm', 'S', 's' )),
Product_Unitprice number(7,2) not null,
Stock_Quantity number(4) not null,
constraint prodstock_comp primary key (product_code,product_size)
);

create table orderline
(
Order_No number(4) constraint orderno_fk references order_detail(Order_No),
Product_Code varchar2(6) constraint productcode2_fk references product(Product_Code),
Product_Size char(1) constraint productsize_fk references product_stock(product_size),
Product_Quantity number(4) not null,
constraint orderline_comp primary key (Order_No,Product_Code, Product_Size)
); 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:57:56.917

> 单独的 product_size 不会是 PK，所以我不能引用它

想象一下，表中有两行`product_stock`相同`product_size`（和不同`product_code`）。现在想象这些行之一（但不是另一行）被删除。

*   是否应该因为有`orderline`引用它的行而受到限制？
*   还是应该允许它，因为仍然存在另一`product_stock`行，该`orderline`行*也*引用？

*（在 ON DELETE CASCADE / SET NULL 以及更新 PK 时也存在类似问题。）*

为避免此类歧义，DBMS 不会让您创建外键，除非您可以唯一标识父行，这意味着您必须在 FK 的 REFERENCES 子句之后使用**整个键。**

* * *

话虽如此，您可以同时创建...

```
FOREIGN KEY (product_code)
REFERENCES product (product_code) 
```

...和...

```
FOREIGN KEY (product_code, product_size)
REFERENCES product_stock (product_code, product_size) 
```

虽然，如果你有后者，前者*可能是*多余的。

实际上，（因为您已经拥有 FK `product_stock -> product`），拥有两个 FK 会创建“菱形”依赖项。顺便说一句，一些 DMBS 对菱形 FK 有限制（MS SQL Server 不支持对其进行级联引用操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:19:54.540

取决于您的特定 DBMS，但您可以使用单独的约束子句在多个列上定义外键，如下所示：

```
create table orderline (
  Order_No number(4) constraint orderno_fk references order_detail(Order_No),
  Product_Code varchar2(6) constraint productcode2_fk references product(Product_Code),
  Product_Size char(1) constraint productsize_fk references product_stock(product_size),
  Product_Quantity number(4) not null,
  constraint orderline_comp primary key (Order_No,Product_Code, Product_Size),
  constraint fk_product_stock foreign key (product_code, product_size) references product_stock (product_code, product_size)
); 
```

# c# - MonoMac Sqlite 版本

> ID：13768623
> 
> 赞同：3
> 
> 时间：2012-12-07T18:08:41.620
> 
> 标签：c#, sqlite, mono, monomac

我正在使用 MonoMac 开发一个应用程序，它使用 Sqlite 数据库作为数据存储。我正在使用 Mono.Data.Sqlite 命名空间中的类来访问数据库。在 OS X 10.7.4 SqliteConnection.SqliteVersion 属性报告 3.6.23.1（2010 年 3 月 30 日发布）在 sqlite shell 中运行“select sqlite_version() AS sqlite_version”报告 3.7.4。理想情况下，我想使用当前可用的 Sqlite 最新版本 3.7.14.1。

我怎么做？我想我需要获取新 Sqlite 版本的 dylib 文件并将其放在与我的应用程序相同的文件夹中。那是对的吗？我在哪里可以获得最新版本的 dylib 文件？如何将它与我的应用程序一起分发？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:21:35.907

你可以很容易地使用 MonoMac 重新编译 System.Data.SQLite，它是一个开源项目。

您可以从这里下载源代码：

[http://system.data.sqlite.org/index.html/timeline?n=20&y=ci](http://system.data.sqlite.org/index.html/timeline?n=20&y=ci)

您可以重新编译托管在 Google 代码上的托管版本：

这是一篇关于它的文章：

[http://www.infoq.com/news/2009/08/SQLite-Has-Been-Ported-to-.NET](http://www.infoq.com/news/2009/08/SQLite-Has-Been-Ported-to-.NET)

这是谷歌代码链接：

[http://code.google.com/p/csharp-sqlite/](http://code.google.com/p/csharp-sqlite/)

# git - 如何将 Heroku 设置为 git 的来源？

> ID：13768628
> 
> 赞同：1
> 
> 时间：2012-12-07T18:08:59.070
> 
> 标签：git, heroku

目前我必须通过以下方式提交东西： git push heroku master

由于某种原因，Heroku 不是起源，github 是 - 我不希望它是 - 我认为这是因为我无论如何都下载了 GitHub 桌面客户端。

无论如何-我如何使heroku成为起源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:44:31.550

采用：

`git remote set-url origin git@heroku.com:<repo>.git`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:47:54.323

您可以使用以下命令重命名遥控器

```
git remote rename heroku origin 
```

# php - Paypal 自动想从我的客户 cc 中扣除金额

> ID：13768629
> 
> 赞同：1
> 
> 时间：2012-12-07T18:09:01.620
> 
> 标签：php, paypal, recurring-billing

我的网站获取每个访问客户的信用卡详细信息。每当他们访问我的网站时，我都会向他们收取一些费用。我想每月向他们收取使用费，并希望将费用从他们的信用卡转移到我的 Paypal 帐户。用paypal可以吗？如果是这样，如何使它与工作。谁能帮我做到这一点！

如果没有，是否有任何其他解决方案。（国家：澳大利亚 - 使用 PHP 的编程语言）

谢谢

# visual-studio-2012 - 如何将 Visual Studio 安装项目迁移到 InstallShield Limited Edition？

> ID：13768631
> 
> 赞同：37
> 
> 时间：2012-12-07T18:09:11.363
> 
> 标签：visual-studio-2012, migration, installshield-le

我在尝试迁移到 Visual Studio 2012 的解决方案中有 Visual Studio 设置项目 (MSI / vdproj)，其中对这些项目的支持已被[推迟](http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx)到[第三方](http://www.mail-archive.com/ozdotnet@ozdotnet.com/msg07507.html)，建议的替代品是 WiX 或应用内链接的 InstallShield Limited Edition （小岛）。

有些人参考[Visual Studio 2012 兼容性](http://msdn.microsoft.com/en-us/library/hh266747%28v=VS.110%29.aspx)文档或看似不太有用的[Windows Installer 部署](http://msdn.microsoft.com/en-us/library/2kt85ked%28VS.110%29.aspx)文档作为了解更多信息的地方。前者谈到“MSI setup (.vdproj)”项目：

> 您还可以使用 ISLE 从 Visual Studio 安装程序项目中导入数据和设置。

如何做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-07T23:03:51.470

它就在我面前的[Windows Installer 部署](http://msdn.microsoft.com/en-us/library/2kt85ked%28VS.110%29.aspx)页面上，所有内容都加粗。

> 在 Visual Studio 中，从“**新建项目”**对话框创建一个 InstallShield LE 项目。创建后，选择新项目，然后单击 Visual Studio 菜单栏上的 **InstallShield LE**选项并选择 **Visual Studio Deployment Project Import Wizard**。

我一直在寻找外部“导入工具”。

对于我的设置，我发现如果在创建新的 ISLE 设置和部署“其他”项目时选择“添加到解决方案”，则最好提取其他项目输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-09T11:05:21.470

经过心怀不满的 Visual Studio 用户的大量调查后，Microsoft 返回了 Visual Studio 2013 的 MSI 功能，请参阅：[Visual Studio Installer Projects Extension](https://blogs.msdn.microsoft.com/visualstudio/2014/04/17/visual-studio-installer-projects-extension/ "Visual Studio 安装程序项目扩展")

因此，如果您使用 Visual Studio 2013，则可以打开现有的 Visual Studio 安装程序项目或使用以下官方 Microsoft 扩展创建新项目：[Microsoft Visual Studio 2013 安装程序项目](https://marketplace.visualstudio.com/items?itemName=UnniRavindranathan-MSFT.MicrosoftVisualStudio2013InstallerProjects "Microsoft Visual Studio 2013 安装程序项目")

# java - 具有许多参数的 Java 方法 - 性能

> ID：13768637
> 
> 赞同：6
> 
> 时间：2012-12-07T18:09:30.390
> 
> 标签：java, performance, methods, parameters

当我使用具有很多（超过一百个）参数的拥有/使用方法时，它在计算性能方面是否效率低下？

我并不是说在可维护性方面高效，而只是在“原始”计算性能方面:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:21:10.320

从理论上讲，也许，由于 Java 是按值传递的，这意味着当调用函数时，JVM 会复制每个参数值并将副本提供给函数，因此可能存在某个点参数的数量对执行时间有不可忽视的影响。但在实践中，只要有可能，这些副本都是“浅”副本，这意味着它们更像是参考，因此实际制作副本的时间很少。因此，您可能需要超过 100 个参数才能对性能时间产生任何明显影响。

无论如何，即使考虑到这样的性能时间，听起来也很像过早的优化。它几乎肯定不是您的程序的瓶颈，因此在您确定它实际上导致减速之前不值得花时间。如果您的程序速度慢得令人无法接受，请调查其他可能的减速源。

当然，正如您提到的，还有“可维护性”问题。为什么单个函数需要数百个参数？它们是复杂的参数，例如自定义对象的 ArrayLists，还是简单的内置数据类型？如果是后者，为什么不考虑将它们打包成数组、ArrayList 等呢？或者，为什么不将功能分解为多个功能呢？现代计算机足够快，以至于对于许多（可以说是大多数）目的来说，程序员的时间比处理器的时间更有价值，所以在编码时，你首先关心的通常应该是你所写的内容是否易于理解和写得好，而不是它是否快速地。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T18:14:20.480

正如下面的文章所说，使用更少的参数它会表现得更好，但它对性能的影响并不大。但是你应该考虑传递一个对象。

[http://www.dailyfreecode.com/forum/parameter-performance-21574.aspx](http://www.dailyfreecode.com/forum/parameter-performance-21574.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:14:04.643

那么会有成本。所有这些参数都必须被压入堆栈。我不认为它会在计算能力方面造成麻烦，除非它处于一个沉重的循环中。

你对一个程序员同事生气吗？或者制作某种以编程方式创建的代码？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T18:17:17.403

回答您的问题：不，传递 100 个参数不会对性能造成重大影响。与另一个答案不同，我建议不要传递对象。如果你这样做，代码将变得不可维护。我见过充满了没人理解的参数的地图。相反，请使用 Joshua Block 在 Effective Java（第 7 章，方法签名）中推荐的最佳实践，以将参数数量保持在合理水平。

例如：将您的方法分解为多个方法。

请参阅类似问题的答案：

[将许多参数传递给方法的最佳实践？](https://stackoverflow.com/questions/2432443/best-practice-for-passing-many-arguments-to-method)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T18:18:04.673

我目前正在阅读题为“Java: The Good Parts”的书。它建议一般来说，传递接口是要走的路。我建议你用 100 个参数创建一个接口，然后传递它而不是传递 100 个参数。将来发生的事情会更加清楚。

就我而言，最大的成本将是维护它的麻烦。但是，如果这就是您计划做的所有事情，那么将这些参数传递一次并没有太大的区别。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T18:32:59.907

这很难回答，大多数人发现不止少数方法参数表明存在严重问题。

但是有一些方面，当您考虑它时，也表明许多方法参数会对性能产生影响。每个方法参数都占用堆栈上的一个槽（就像局部变量一样）。就其本身而言，一个插槽基本上几乎是免费的，但是当调用你的方法怪物时，每个参数插槽也必须被填充。这意味着调用者不可避免地会进行一些读取操作来获取插槽的值，并且还会将所述值推送到堆栈中。

所以是的，每个参数都有一个很小的成本，作为第一个近似值，成本与参数的数量成线性关系。

现在，当您从某个地方提取参数值时，您实际上做的工作不仅仅是传递对所述参数的引用 - 例如，假设您有一种方法来计算矩形的面积并用 4 个参数编写它：

```
public int area(int x1, int y1, int x2, int y2) {
     return ....;
} 
```

代替

```
public class Rectangle {
    int x1, y1, x2, y2;

    public int area() {
        return ....;
    }
} 
```

现在在第一种情况下，您需要拉出 4 个整数并将它们推回堆栈，而要调用第二种情况，您只需拉出对矩形的引用。当然，矩形的 area() 方法仍然需要拉取其成员，但您至少保存了 3 个堆栈推送（使用 100 个参数，您可能可以保存更多）。

另外，一个有 100 个参数的方法意味着它是一个相当大的方法，否则大多数参数无论如何都不会被使用，只会浪费。大型方法表明复杂性很高，这*可能会*干扰 JIT 生成良好代码的能力。很难演示，但一个简单的例子就是方法内联。JIT 对内联考虑的代码量有限制，大型方法不是候选方法。在某种程度上，您可以期望 JIT 能够最好地处理常用的习惯用法（优化最常见的情况显然会带来更多的努力），并且 100 个方法参数肯定超出了常用的范围。

# android - 绑定太多纹理（超过 100 个）会导致错误

> ID：13768643
> 
> 赞同：1
> 
> 时间：2012-12-07T18:10:03.070
> 
> 标签：android, opengl-es, textures, wavefront

我有一个代码以 obj 和 mtl 格式呈现对象（android - opengl es 1.1）对于小对象（很少纹理）我没有问题但是当纹理数量超过 30-40 时，我在我的 logcat 中收到这个：eglLockWindowSurface 失败将内存映射到...我在`onSurfaceCreated`使用`glBindTexture`和加载所有纹理`texImage2D`（全部到单个纹理单元）。并绑定它们以供绘制`onDrawFrame`

究竟是什么问题？我搜索了几个小时，但除了纹理图集之外找不到任何解决方案。由于我的公司给了我 blender/3dsmax 的导出文件，我不能使用这种方法。我怎样才能避免这个错误并使用太多的纹理？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:14:46.210

加载和绑定纹理的唯一限制是最大整数大小！限制是最大纹理大小（取决于设备） 如果最大纹理大小为 4096kB，则意味着您无法绑定宽度 * 高度 * 4 大于 4096,000 的图像。（4 是浮动大小）。所以你必须缩小你的形象。

# rally - SDK2：等待 Spinner 对象？

> ID：13768649
> 
> 赞同：2
> 
> 时间：2012-12-07T18:10:20.960
> 
> 标签：rally

SDK2 中是否有可用的繁忙微调器对象来指示用户应等待的时间？

在 SDK1 中，它是这样调用的：

```
var wait = new rally.sdk.ui.basic.Wait(config) 
```

我在新文档中看不到等效对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:31:23.537

我们没有在 SDK 2 中制作等效组件，因为此功能内置于 Ext. 您应该可以从任何元素调用[mask](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-mask) () 和[unmask](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-unmask) ()。

```
myComponent.getEl().mask('Loading...');

//do some things

myComponent.getEl().unmask(); 
```

# javascript - 服务器调用一些（但不是全部）客户端方法

> ID：13768650
> 
> 赞同：0
> 
> 时间：2012-12-07T18:10:30.583
> 
> 标签：javascript, asp.net, vb.net, signalr

我的 ASP.NET 网站有一个非常基本的 SignalR 配置设置。我可以调用服务器并在所有连接的客户端上调用*一些方法。*但其他方法似乎不起作用，我收到以下错误。

> 500: 'XXX' 方法无法解析。

我认为这可能是服务器和客户端之间的冲突方法名称，但我很难相信这一点。需要注意的一点是，调用带有参数的客户端方法的方法确实会失败。这是我的代码：

**服务器端**

```
<HubName("myHub")>
    Public Class myHub
    Inherits Hub

    Public Sub sendMsg(ByVal message As String, ByVal Optional target As String = "")
        Clients.All.invoke_message(Context.ConnectionId, message)
    End Sub

    Public Sub refresh()
        Clients.All.invoke_refresh()
    End Sub
End Class 
```

**客户端**

```
window.myHub = $.connection.myHub;

myHub.client.invoke_refresh = function () {
    // invoked to force the user's page to refresh
    document.location.reload(true);
}

myHub.client.invoke_message = function (clientID, message) {
    // invoked while broadcasting a message
    console.log(clientID + ': ' + message);
}; 
```

刷新方法工作正常。新消息返回上述错误。

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:18:23.937

这感觉有点傻。SignalR 在升级中破坏了处理服务器端方法的能力，这些方法采用可选参数并且在不传递这些可选参数的情况下被调用。 [请参阅此处的问题](https://github.com/SignalR/SignalR/issues/324)。

作为对从 ~v0.53 升级到 v1.0 的任何人的说明，这是需要注意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:16:29.337

在 SignalR 中，服务器不知道任何 JS 客户端功能。它只向客户端发送消息，并且客户端调用给定的函数（如果存在）。

因此，您看到 500 错误（内部服务器错误）的事实让我相信它与客户端无关。

话虽如此，我继续用 C# 测试了你的代码，它运行良好。还做了一个 VB.Net 项目，终于让它正常工作。

这是我的 VB.Net 项目的代码：

**服务器集线器 (MyHub.vb)**

```
Imports Microsoft.AspNet.SignalR.Hubs

<HubName("myHub")>
Public Class MyHub
    Inherits Hub

    Public Sub sendMsg(ByVal message As String)
        Clients.All.invoke_message(Context.ConnectionId, message)
    End Sub

    Public Sub refresh()
        Clients.All.invoke_refresh()
    End Sub
End Class 
```

**客户端代码（default.aspx）：**

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="default.aspx.vb" Inherits="VBTest._default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <div id="SendMessage">SendMsg</div>
        <div id="Refresh">Refresh</div>
    </div>
    </form>

    <script src="Scripts/jquery-1.6.4.js"></script>
    <script src="Scripts/jquery.signalR-1.0.0-rc1.js"></script>
    <script src="/signalr/hubs"></script>

    <script type="text/javascript">
        window.myHub = $.connection.myHub;

        myHub.client.invoke_refresh = function () {
            // invoked to force the user's page to refresh
            document.location.reload(true);
        }

        myHub.client.invoke_message = function (clientID, message) {
            // invoked while broadcasting a message
            console.log(clientID + ': ' + message);
        };

        $.connection.hub.start().done(function () {
            $("#SendMessage").click(function () {
                window.myHub.server.sendMsg("ELLO");
            });

            $("#Refresh").click(function () {
                window.myHub.server.refresh();
            });
        });
    </script>
</body>
</html> 
```

**全球.asax：**

```
Imports System.Web.SessionState
Imports System.Web.Routing
Imports Microsoft.AspNet.SignalR

Public Class Global_asax
    Inherits System.Web.HttpApplication

    Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
        RouteTable.Routes.MapHubs()
    End Sub
End Class 
```

还有我的文件夹结构的 SS：http: [//imgur.com/hpCQC](http://imgur.com/hpCQC)

确保删除 App_Start 代码并将其替换为 Global.asax 代码。

我做的不同的一件事是我从源代码 (https://github.com/SignalR/SignalR/tree/release) 中获取了所有 SignalR 代码。

希望这可以帮助！

# label - 如何实现条码等宽；与条形码数据无关

> ID：13768651
> 
> 赞同：4
> 
> 时间：2012-12-07T18:10:35.960
> 
> 标签：label, barcode, barcode-scanner, barcode-printing

目前我正在编写一个标签编写器（兄弟 QL-570，如果重要的话，在 Java 中）来打印具有不同 ID 的条形码。条形码数据的长度可以从 ~17 个字符到 ~3 个字符不等。

但是，鉴于我已经正确理解了条形码概念，数据越多 - 条形码就会变得越宽。

我希望所有条形码都具有相同的恒定大小：无论数据长度如何。（条形码不填满标签就不好看，如果太大也不会（工作））

**当标签为固定尺寸（即 29 毫米 x 90 毫米）时，如何处理？**您/您的公司是如何解决这个问题的？二维条码不是一种选择。可悲的是。

![在此处输入图像描述](../Images/980ec42525a68d78f9ee2ed322557133.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:21:00.630

我认为最好的办法是填充你的数据，即

```
123 
```

变成

```
00000000000000123 
```

只是想想其他地方是如何做到的，我以前在日常生活中肯定见过零填充条形码。我认为最好的办法就是选择一些您认为足够多年的数字并将您的应用程序编码为该数字。如果你最终不得不超越它，那么，这是一个很好的问题，不是吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T00:31:02.407

如果您必须并排比较不同宽度的条形码，这看起来会有点有趣，但我的公司通过用 1x 定义每个符号来解决它？位图并将其缩放到应用程序所需的大小。例如，每个代码 128 符号（Stop 除外）都是 11 个像素宽。我们的“字体”定义了 107 个字符，每个字符都是 1x11 的黑白位图 (PNG)。

如果您对垂直和水平尺寸有足够的控制权，它会使条码安装到提供的空间中变得更加简单。

这是一个类似于上图的快速示例：

```
 <img 
    alt="104,{Start B}" title="104,{Start B}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AC3gAT0BDuLeG4IAAAAASUVORK5CYII=" width="30" height="30"><img
    alt=" 17,A:{1},B:{1}" title=" 17,A:{1},B:{1}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGMgAOkAhBjTObMAAAAASUVORK5CYII=" width="30" height="30"><img
    alt=" 18,A:{2},B:{2}" title=" 18,A:{2},B:{2}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADGgAQUA0nI/mr0AAAAASUVORK5CYII=" width="30" height="30"><img
    alt=" 19,A:{3},B:{3}" title=" 19,A:{3},B:{3}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADRgAMsAlQDS68kAAAAASUVORK5CYII=" width="30" height="30"><img
    alt=" 08,A:{(},B:{(}" title=" 08,A:{(},B:{(}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHNgAUkA1ElZCJAAAAAASUVORK5CYII=" width="30" height="30"><img
    alt="106,{Stop}"title="106,{Stop}"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAABAQMAAAA/57ZEAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADigARMA2dpJzT8AAAAASUVORK5CYII=" width="30" height="30">
    <p/>
    123
    <br>
    <p>&nbsp;</p>
    <img 
    alt="104,{Start B}" title="104,{Start B}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AC3gAT0BDuLeG4IAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 17,A:{1},B:{1}" title=" 17,A:{1},B:{1}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGMgAOkAhBjTObMAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 18,A:{2},B:{2}" title=" 18,A:{2},B:{2}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADGgAQUA0nI/mr0AAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 19,A:{3},B:{3}" title=" 19,A:{3},B:{3}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADRgAMsAlQDS68kAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 20,A:{4},B:{4}" title=" 20,A:{4},B:{4}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADYgAI8AVxcQlAsAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 21,A:{5},B:{5}" title=" 21,A:{5},B:{5}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACNgAKkAhD/i5lYAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 22,A:{6},B:{6}" title=" 22,A:{6},B:{6}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADFgAMUAksTlwtMAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 23,A:{7},B:{7}" title=" 23,A:{7},B:{7}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABIgAEcAM15OsZIAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 24,A:{8},B:{8}" title=" 24,A:{8},B:{8}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABZgAI8Ad3Mh6bwAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 25,A:{9},B:{9}" title=" 25,A:{9},B:{9}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABpgAJcAex9glyQAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 16,A:{0},B:{0}" title=" 16,A:{0},B:{0}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGJgAScAw0BJukMAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 17,A:{1},B:{1}" title=" 17,A:{1},B:{1}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGMgAOkAhBjTObMAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 18,A:{2},B:{2}" title=" 18,A:{2},B:{2}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADGgAQUA0nI/mr0AAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 19,A:{3},B:{3}" title=" 19,A:{3},B:{3}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADRgAMsAlQDS68kAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 20,A:{4},B:{4}" title=" 20,A:{4},B:{4}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADYgAI8AVxcQlAsAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 21,A:{5},B:{5}" title=" 21,A:{5},B:{5}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACNgAKkAhD/i5lYAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 22,A:{6},B:{6}" title=" 22,A:{6},B:{6}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADFgAMUAksTlwtMAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 23,A:{7},B:{7}" title=" 23,A:{7},B:{7}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABIgAEcAM15OsZIAAAAASUVORK5CYII=" width="9" height="30"><img
    alt=" 64,A:{NUL},B:{`}" title=" 64,A:{NUL},B:{`}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AF5gAR8Av0A69KoAAAAASUVORK5CYII=" width="9" height="30"><img
    alt="106,{Stop}"title="106,{Stop}"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAABAQMAAAA/57ZEAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADigARMA2dpJzT8AAAAASUVORK5CYII=" width="9" height="30">
    <p/>
    12345678901234567
```

请注意，为每个字符指定了尺寸，并且条形码通常会以 8 或更高的宽度进行扫描（取决于打印质量）。条形码中的所有字符都需要相同的宽度。请记住，您的水平静区是条形宽度的函数，因此请尽量在标签的每一侧保持至少两个字符宽度。

# ios - AFNetworking 同步运行

> ID：13768656
> 
> 赞同：0
> 
> 时间：2012-12-07T18:10:54.313
> 
> 标签：ios, cocoa-touch, ios5, ios4, afnetworking

我正在异步运行 AFNetworking。请参阅下面的代码。

我想同步运行它来下载包（我需要获取人们可以选择的服务列表）。我怎样才能做到这一点？

谢谢。

```
 NSMutableURLRequest *apiRequest =
[self multipartFormRequestWithMethod:@"POST"
                                path: pathstr
                          parameters: params
           constructingBodyWithBlock: ^(id <AFMultipartFormData>formData)
           {
               //TODO: attach file if needed
           }];

AFJSONRequestOperation* operation = [[AFJSONRequestOperation alloc] initWithRequest: apiRequest];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    //success!
    completionBlock(responseObject);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //failure :(

    NSLog(@"%@", error);
    completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
}];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:00:35.673

> 我想同步运行它来下载包（我需要获取人们可以选择的服务列表）。我怎样才能做到这一点？

AFNetworking 不支持同步操作。

另一方面，您几乎不需要在 UI 线程上进行同步操作，因为 UI 会变得无响应。

> （我需要获取人们可以选择的服务列表）

您可以做的是在异步操作正在进行时显示一些 UI 提示，表明正在下载服务列表。

# android - 如何检测到 SIM 卡未插入 Android？

> ID：13768657
> 
> 赞同：3
> 
> 时间：2012-12-07T18:10:55.363
> 
> 标签：android, telephonymanager

我想在每次手机启动时检查手机中是否存在 SIM 卡。如果没有插入 SIM 卡，应用程序将删除所有短信、删除所有帐户凭据、删除所有手机联系人并自动擦除外部存储上的所有数据。但是当我启动手机时，应用程序会强制关闭......我配置的 Toast 也没有出现......我知道如何检查 SIM 卡的缺失吗？我已经尝试过 simSerial.equals("") 和 simSerial.equals(null)，但失败了......需要有人帮助......谢谢

```
if (simSerial.equals(null)){
            Toast.makeText(testContext.getApplicationContext(), "No SIM card detected!!!", Toast.LENGTH_LONG).show();
            Log.d("Message", "No SIM card");

            ContentResolver cr = context.getContentResolver();
            Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

            while(cursor.moveToNext()){
                String lookupKey = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));   
                Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey);
                cr.delete(uri, null, null);
            }

            accManager = AccountManager.get(context);
            Account [] acc = accManager.getAccounts();
            if (acc.length > 0){            
                for (int j=0; j<acc.length; j++){
                    Account accountToRemove = acc[j];
                    accManager.removeAccount(accountToRemove, null, null);
                }
            }

            ContentResolver cr1 = context.getContentResolver();
            Cursor cursor1 = cr1.query(Uri.parse("content://sms/"), null, null, null,null);
            try {
                  while (cursor1.moveToNext()) {
                     int id = cursor1.getInt(0);
                     cr1.delete(Uri.parse("content://sms/" + id), null, null);
                  }
                } finally {
                  cursor.close();
                }

            //Wipe data on SD card
            wipeSdCard();
        } 
```

# zend-framework2 - ZF2 验证 - 如果另一个元素不为空，则为必填字段

> ID：13768659
> 
> 赞同：6
> 
> 时间：2012-12-07T18:10:59.523
> 
> 标签：zend-framework2

我有在 Zend Framework 2 中进行自定义验证的经验（目前使用版本 2.0.5）。我有兴趣在“编辑个人资料”表单中创建更改密码部分。我想要做的是有3个领域：

*   当前密码，
*   新密码，
*   确认新密码。

然后我想验证如下：

*   如果设置了新密码，则还必须设置当前密码（并进行身份验证），并确认新密码应与新密码匹配。
*   如果设置了当前密码，还必须要求输入新密码和确认新密码。
*   如果未设置，则允许编辑配置文件的其余部分，因此继续验证。

我认为您可以了解我所追求的要点，我正在寻找一种使用 Zend Framework 2 的可重用方法。理想情况下，创建一个自定义验证器以便可以重用表单，我怀疑是工厂方法可能更好。任何这样我就不必在控制器/服务层中检查它并在我想使用它的任何地方重复自己。

亲切的问候，

伊势

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-25T10:22:18.950

您可以添加自定义过滤器，但我认为这也可以使用验证组来完成，并单独验证输入组。

您可以将密码字段添加到单独的组中，并且仅在主密码不为空时才验证该组。

[http://framework.zend.com/manual/2.0/en/modules/zend.input-filter.intro.html](http://framework.zend.com/manual/2.0/en/modules/zend.input-filter.intro.html)

[http://framework.zend.com/manual/2.0/en/modules/zend.form.collections.html#validation-groups-for-fieldsets-and-collection](http://framework.zend.com/manual/2.0/en/modules/zend.form.collections.html#validation-groups-for-fieldsets-and-collection)

# javascript - javascript执行然后撤消

> ID：13768660
> 
> 赞同：-2
> 
> 时间：2012-12-07T18:11:00.640
> 
> 标签：javascript

我有一个 aspx 页面，我试图隐藏一个基于按钮单击的 div。似乎 javascript 执行了，但 div 立即显示出来。看起来页面也很清爽。

```
function hideDiv2()
    {
        document.getElementById("div2").style.display = "none";

    } 
```

这是html

```
<body>
<form id="form1">
<div style="background-color:gray;">

    <div id="div1" style="width:300px; background-color:blue;">
        <button onclick="hideDiv2()"></button>
    </div>
    <div id="div2" runat="server" style="width:300px; background-color:black; display:none;">test</div>

</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:29:55.913

好的，问题是按钮位于每次重新提交页面的表单中。解决方案是更改 type="button"

# objective-c - Objective-C 中的抽象类

> ID：13768662
> 
> 赞同：3
> 
> 时间：2012-12-07T18:11:25.157
> 
> 标签：objective-c, protocols, abstract-class, cocoa-design-patterns

我需要你的帮助。Objective-C中的以下问题：

```
// Robot.h
@protocol RobotProtocol <NSObject>
    -(void)doWork;
@end

@interface Robot : NSObject 

// Rob1 sublass of class Robot
// rob1.h
@interface Rob1 : Robot <RobotProtocol>

// rob1.m
@implementation
-(void)doWork
{
    // print 'robot 1'
}

// Rob2 sublass of class Robot
// rob2.h
@interface Rob2 : Robot <RobotProtocol>

// rob2.m
@implementation
-(void)doWork
{
    // print 'robot 2'
}

// Task.h
@interface Task : NSObject
{
    Robot *rob;
}

// Task.m
@implementation
- (id)init
{
    if ([super init]) {
        rob = [[Rob1 alloc] init]; // or Rob2 !!
    }
    return self;
}

-(void)doSomething
{
    [rob doWork]; // how to make sure, that this is implemented, depending on Rob1 or Rob2
} 
```

应该如何`Robot`实现及其子类，可以`Robot *rob`是 Robot 的子类之一`rob1`，并且可以调用该方法？我的第一个想法是实现为抽象类，但不幸的是，Objective-C 中没有抽象类......`rob2``...``doWork:(BOOL)val;``Robot`

目前我正在使用协议，但我没有信心。因为不确定是否实现了 doWork，所以编译器会抱怨

> “机器人”可能不会响应“doWork”

谢谢你的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T18:58:49.363

协议应该有效。

```
@protocol RobotProtocol <NSObject>
@required
- (void)doWork:(BOOL)flag;
@end

@interface Robot1 : NSObject <RobotProtocol>
@end

@implementation Robot1
- (void)doWork:(BOOL)flag
{
}
@end 
```

`Robot1`被调用的单元测试`id<RobotProtocol>`

```
- (void)testRobot
{
    id<RobotProtocol> robot = [[Robot1 alloc] init];
    [robot doWork:YES];
} 
```

***更新***

查看您的代码后，`@interface Robot : NSObject`应该是`@interface Robot : NSObject <RobotProtocol>`. 问题是你根本不需要`@interface Robot : NSObject <RobotProtocol>`。你可以只使用`id<RobotProtocol>`. 这是您的抽象类的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:10:07.097

正如许多人所说，Objective-C 中没有抽象类。我个人去评论+运行时检查。像这样的代码：

```
@interface Abstract : NSObject {
}

// Abstract method
- (Foo*)doSomething;

@end

@implementation Abstract

// Abstract method
- (Foo*)doSomething {
  [_self doesntRecognizeSelector:_cmd];
  return nil;
}

@end 
```

如果您真的想使用“抽象”的东西并进行编译时检查，我认为您将不得不使用协议。为此，您需要稍微更改代码。特别是您应该将您的变量声明为符合协议，`id<RobotProtocol>`或者`Robot<RobotProtocol>*`取决于更适合您的需求：

```
// Task.h
@interface Task : Robot <RobotProtocol>
{
    id<RobotProtocol> rob;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:31:43.723

我猜你正在尝试做这样的事情但是没有代码很难说......

```
//Robot.h
{
    -(void)doWork:(BOOL)myBool
}

//Robot.m
{
    -(void)doWork:(BOOL)myBool
    {
        if (myBool)
        {
            //do something
        }
        else
        {
            //do something else
        }
    }
}

//Task.h
{
       #include"Robot.h"
}

//Task.m
{
            Robot *rob = [[Robot rob] alloc] init];
    [rob doWork:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T18:32:26.203

Objective-C 没有像 java 中那样的抽象类。只需创建一个名为 Robot 的超类并将其子类化..您甚至可以通过覆盖 init 并立即销毁自身来阻止实例化该类（尽管我不太确定这种方法的“正确性”..）

无论如何，这不应该是一个问题。

确定某个对象是否响应方法的一个方便技巧是使用

```
if( [rob respondsToSelector:@selector(doWork:)] ) { [rob doWork:value]; } 
```

这通常用于使**协议**中的方法成为可选方法，以便在调用给定对象不存在的方法时不会在运行时出错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T19:00:18.213

尝试调用 doWork 的任何方法都知道 RobotProtocol 协议吗？您可能需要导入包含它的任何头文件。

对于它的价值，做你想做的事情的公认方法是只声明超类是什么（机器人），声明和实现具有空主体的方法（如果它们没有被子类覆盖，可能会抛出 NSException）并创建你的子类（SubRobot，或者你有什么）。协议更多的是不同类型的类可以实现一些已知的方法，而不是用作事实上的抽象超类。

# php - mySQL 查询有问题

> ID：13768664
> 
> 赞同：0
> 
> 时间：2012-12-07T18:11:43.767
> 
> 标签：php, mysql

我正在做一个项目，需要使用下面的查询语句，不幸的是我的表名和列名有破折号。有谁知道如何让它工作？

```
SELECT * FROM 'default-table' WHERE 'ds-avail'='Yes'; 
```

这是我得到的错误。

```
Invalid query: You have an error in your SQL syntax; check the manual that corresponds to   your MySQL server version for the right syntax to use near '; SELECT * FROM [default-table] WHERE [ds-avail]='Yes'' at line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:13:50.693

尝试这个

```
SELECT * FROM `default-table` WHERE `ds-avail` = 'Yes'; 
```

您使用了“table”，而您应该像这样使用它`table`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:29:26.350

```
SELECT * FROM default-table WHERE ds-avail='Yes'; 
```

1.  确保您的表完全命名为“默认表”（不带引号）
2.  确保您要查找的字段名为“ds-avail”（不带引号）并且它存在于该表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:20:01.060

你应该把表格和列不带引号：

```
SELECT * FROM default-table WHERE ds-avail='Yes'; 
```

# random - 来自arraylist的android随机项目

> ID：13768665
> 
> 赞同：0
> 
> 时间：2012-12-07T18:11:44.690
> 
> 标签：random, arraylist

我想从 arraylist 中获取随机项。我的代码如何尝试不工作。

```
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
map.put(KEY_ADD, parser.getValue(e, KEY_ADD)); --edited code
menuItems.add(map);

int index = random.nextInt(menuItems.size());
HashMap<String, String> itm = menuItems.get(index);
System.out.println(itm); 
```

编辑：

```
 int index = random.nextInt(menuItems.size());   
    HashMap<String, String> itm = new HashMap<String, String>();
    itm = menuItems.get(index);
    String randomstring = itm.get(MyClass.KEY_NAME);

    System.out.println(randomstring); 
```

收到 NullPointerException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:13:26.357

利用

```
HashMap<String, String> itm =new HashMap<String, String>();
itm = menuItems.get(index);
System.out.println(itm); 
```

代替

```
HashMap<String, String> itm = menuItems.get(index);
System.out.println(itm); 
```

在当前代码中，您在使用它之前没有初始化 hashmap itm

# matlab - 使用 Matlab 的压缩比（图像）

> ID：13768673
> 
> 赞同：1
> 
> 时间：2012-12-07T18:12:19.383
> 
> 标签：matlab, compression

使用`blockproc`余弦离散变换 ( `DCT`) 和阈值，我只需在 Matlab 中压缩图像。

我需要找到压缩比，这可能不难找到。

它应该是压缩图像中的位数/原始图像中的位数..

使用`BitDepth`，我无法获得有效的压缩比..

```
f1 = @(block_struct) dct2(block_struct.data);
f2 = @(block_struct) idct2(block_struct.data);

I=imread('autumn.tif','tiff');
Im=rgb2gray(I);

J = blockproc(Im, [8 8], f1);
seuil = find(abs(J) < 15);
J(seuil) = zeros(size(seuil));
K = blockproc(J, [8 8], f2) / 255;
subplot(2,2,2)
imshow(K); 
```

如何使用 Matlab 找到压缩比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:39:12.110

首先，您需要定义*压缩比*。

让我们同意*压缩比*是原始图像中的位数除以压缩图像中的位数。由于所有值（DCT 系数）都由相同的固定位数表示，因此您可以通过计算系数而不是位数来推断压缩率。

在原始图像中，系数的数量为`numel(J)`，而`numel(seuil)`在压缩图像中。因此，该图像的压缩比为：

```
compression_ratio = numel(J) / numel(seuil) 
```

例如，假设您的图像尺寸为 640×480，并且`seuil`包含 100000 个低于阈值的值索引。因此，您的压缩比是`640*480 / 100000 = 3.072`

# typo3 - TYPO3 + RealURL = 多语言主页不起作用 (404)

> ID：13768676
> 
> 赞同：0
> 
> 时间：2012-12-07T18:12:28.717
> 
> 标签：typo3, realurl

我在使用 RealURL 和 TYPO3 时遇到了严重的问题。这是场景。

我正在开发一个默认使用德语并提供英语翻译的网站。到目前为止，效果很好。URL 看起来像这样：`http://mydomain.com/en/about-us`

这样的根页面仅适用于默认语言德语`http://mydomain.com/`

一旦我像这样使用它，`http://mydomain.com/en/`我最终会收到一条 404 消息。当我把一些像这样的 GET 变量交给它时，页面本身就可以工作`http://mydomain.com/?L=1`

到目前为止，我还无法解决此问题。

页面树看起来有点像这样

`* Common Root (Standard page)
|-> * Common Data (Folder)
|-> * mydomain.com (Standard Page / Rootpage enabled)
----|-> Homepage (Shortcut to "mycomain.com", used for navigation only)
----|-> About us (Standard page)
----|-> Contact (Standard page)`

我怀疑这个快捷方式页面会引起一些麻烦，但是对此无能为力。

RealURL 配置是自动生成的，所以没有花哨的地方。

我正在使用带有 RealURL 1.12.3 的 TYPO3 4.7.7。

有谁知道什么可能导致这个问题？

古罗马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:45:15.747

我在使用 TYPO3 6.0.0 和 RealURL 1.12.3 时遇到了完全相同的问题。虽然我无法找出原因，但我只是意识到以下解决方法对我有帮助：

尝试用自己的副本替换您当前的主页（不要忘记在您的 RealURL 配置中将其定义为 rootpage）。

# c# - SqlMembershipProvider 无法仅在 Internet Explorer 中使用框架或 iframe 登录

> ID：13768677
> 
> 赞同：2
> 
> 时间：2012-12-07T18:12:29.807
> 
> 标签：c#, asp.net-mvc-3, sqlmembershipprovider

我正在将 SqlMembershipProvider 与 asp.net 一起使用，它工作正常，直到我尝试使用 iframe 或框架。

当我在没有他们的情况下登录时，我没有任何问题，但是如果我将我们的网站从客户的站点打包并尝试登录，它只会闪烁并返回原始站点，所有字段都已清除。

我可以在 IE 8 和 9 上使用我们的网站轻松复制此内容，但我对 firefox 或 chrome 没有任何问题。

有没有另一种方法来完成这个或绕过它？

**====== 编辑 ======**

我们的客户从他们的网站调用我们的“门户”，并希望将我们的门户无缝集成到其中，就好像它是他们网站的一部分一样。

我们认为我们可以通过 iframe 从他们的站点包装我们的门户来完成此操作，但我在登录时没有任何运气，据我所知，这是一个跨域 cookie 问题（？）。

希望这有助于澄清一些事情......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T10:50:01.293

您可以使用 FormsAuthentication.SetAuthCookie，并以加密方式在 URL 中传递初始凭据，

这个问题将在 Internet Explorer 中对您有很大帮助，其他兄弟也可以，

[Cookie 被阻止/未保存在 Internet Explorer 的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)

我已经用 Chrome、Firefox、Opera 进行了测试（第一次会给出警告），它运行良好，没问题，但是使用 IE，你需要看到我提供的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T17:21:22.570

除非您指定[P3P 标头，否则](http://www.google.ie/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDkQFjAB&url=http://en.wikipedia.org/wiki/P3P&ei=FhrGUO2FD9O7hAfJkICoBg&usg=AFQjCNHUt_MmTBS_J12RZpZCziOu1DEXmw&sig2=J4sMqLdiN7ka94eXpSxBXw)[Internet Explorer 不会通过 IFRAMES 发送 cookie](http://adamyoung.net/IE-Blocking-iFrame-Cookies)。

最简单的方法是在您的 Web.config 中指定一个自定义 HTTP 标头：

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="P3P" value='CP="CAO PSA OUR"'/> 
```

这样你就不必用这些东西弄乱你的代码了。

这个 HTTP 标头称为[Compact P3P](http://blog.sweetxml.org/2007/10/minimal-p3p-compact-policy-suggestion.html)，它应该可以解决问题，因为我以前的情况与您相同。

恐怕 Safari 浏览器可能有点棘手，因为除非用户与 IFRAME 内容交互，否则 Safari 不会发送 cookie，如下所示：[Iframe、跨域 cookie、p3p 策略和 safari 错误：所需的防伪令牌未提供或无效](https://stackoverflow.com/questions/6125741/iframe-cross-domain-cookies-p3p-policy-and-safari-with-error-a-required-anti)。在您的情况下，这可能不是什么大问题。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:25:57.113

如果可以选择在 DNS 中安装子域并将主机标头添加到 IIS，您可以尝试通过将子域设置为指向您的站点来规避跨域安全性。

```
[top] example.com @ customerIP => [iframe] portal.example.com @ yourIP 
```

通过将此 JavaScript 放入您的代码中，确保域是共享的：

```
document.domain = "example.com" 
```

# c# - 使用内部构造函数实例化一个类（或派生类）

> ID：13768678
> 
> 赞同：0
> 
> 时间：2012-12-07T18:12:40.493
> 
> 标签：c#

假设我在程序集中定义了一个类：

```
public class BaseClass
{
    internal BaseClass()
    {
    }
} 
```

在另一个程序集中，我想用以下方式实例化这个类：

```
BaseClass c = new BaseClass(); 
```

我收到 CS0143 错误。

尝试另一种方式，我尝试创建第一个派生类：

```
public class DerivedClass : BaseClass
{
} 
```

但同样的错误。

BaseClass 未密封。如何实例化此类或派生类？当然，我不能修改BaseClass。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:19:44.697

您必须使用反射来获取内部构造函数并调用它：

```
var ci = typeof(BaseClass).GetConstructor(BindingFlags.Instance | BindingFlags.NonPublic, null, Type.EmptyTypes, null);
var instance = (BaseClass)ci.Invoke(new object[0]); 
```

由于仅在运行时才发现构造函数的存在，因此如果`BaseClass`更改或删除构造函数，则此方法将中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:26:23.067

It's hard to tell from your question if `DerivedClass` is in the same assembly as `BaseClass`. If it is, just instantiate the derived class:

```
BaseClass c = new DerivedClass(); 
```

And, like Branko stated, if you have control of the project in which BaseClass lives, you can use [InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:19:36.317

1）你想要一个基类的实际实例：

程序集中需要有一些方法可以为您构建它。这通常被称为“工厂”。它可能看起来像这样：

```
public class BaseFactory
{
    public static BaseClass Create() { return new BaseClass(); } //may also add other creation logic
} 
```

请注意，这样的创建方法甚至可能在`BaseClass`其自身中，也可能在另一个类中。（如果构造函数是私有的，它需要在类本身中。）

2）你想要一个派生类的实例。（也许你不*应该*能够构造基类。如果这是真的，它可能应该是`abstract`。）

```
public class Derived : BaseClass {   }

public class Foo
{
    public void Bar() { Derived d = new Derived();}
} 
```

# android - Google Maps V2 在 android 2.2 上显示空白屏幕

> ID：13768681
> 
> 赞同：11
> 
> 时间：2012-12-07T18:12:48.497
> 
> 标签：android, google-maps, android-maps, google-maps-api-2

我尝试按照有关[Android Maps V2 快速入门](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)的教程 但是当我运行该应用程序时，会显示一个空白的地图屏幕。我的手机使用安卓 2.2.1。

![在此处输入图像描述](../Images/5005a1f5fd6f99bc517b1b4f20140950.png)

这是在 logcat 中显示的内容：

```
12-07 18:07:52.479: W/dalvikvm(1654): VFY: unable to resolve instance field 24
12-07 18:07:53.129: W/dalvikvm(1654): Unable to resolve superclass of Lmaps/a/du; (411)
12-07 18:07:53.129: W/dalvikvm(1654): Link of class 'Lmaps/a/du;' failed
12-07 18:07:53.139: W/dalvikvm(1654): Unable to resolve superclass of Lmaps/a/ej; (2363)
12-07 18:07:53.139: W/dalvikvm(1654): Link of class 'Lmaps/a/ej;' failed
12-07 18:07:53.139: W/dalvikvm(1654): Unable to resolve superclass of Lmaps/j/k; (2379)
12-07 18:07:53.139: W/dalvikvm(1654): Link of class 'Lmaps/j/k;' failed
12-07 18:07:53.149: E/dalvikvm(1654): Could not find class 'maps.j.k', referenced from method maps.y.ae.a
12-07 18:07:53.149: W/dalvikvm(1654): VFY: unable to resolve new-instance 3571 (Lmaps/j/k;) in Lmaps/y/ae;
12-07 18:07:53.389: W/dalvikvm(1654): VFY: unable to resolve direct method 14965: Ljava/io/IOException;.<init> (Ljava/lang/String;Ljava/lang/Throwable;)V 
```

编辑：这是 manifest.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.eunice.mapstry"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-feature android:glEsVersion="0x00020000" android:required="true"/>
    <permission android:name="com.eunice.mapstry.permission.MAPS_RECEIVE"
                android:protectionLevel="signature"/>
    <uses-permission android:name="com.eunice.mapstry.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="com.eunice.mapstry.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyBt_JE6_XIVR8-t0HrbhskeLrAVxSJst6c"/>
    </application>

</manifest> 
```

编辑：我添加了我的 google api 控制台的图像：

![在此处输入图像描述](../Images/6d700813972a591d94be698cc41b5615.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T09:34:23.977

我终于发现了问题所在。我选择了错误的调试密钥库。我正在使用 ubuntu 机器。由于我以 root 身份打开 eclipse，因此 eclipse 中的默认密钥库位于我的根文件夹（/root/.android/.android/debug.keystore）中，而我正在使用我的用户文件夹中的调试密钥库创建 api 密钥。我在根文件夹中使用调试密钥库创建了一个新的 api 密钥，它现在可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:42:05.690

确保在[https://code.google.com/apis/console中启用 Google Maps Android API v2 服务](https://code.google.com/apis/console)

1.  转到您[https://code.google.com/apis/console-](https://code.google.com/apis/console-) > 服务选项卡
2.  确保 Google Maps Android API v2 已开启
3.  转到 API 访问选项卡
4.  再次创建一个新的 Android 密钥

那你就可以走了:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T09:05:29.077

我也一直在处理这些东西（证书、包名称、API 控制台等），直到我尝试从我的设备上卸载应用程序，然后重新安装它，突然就没事了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-25T13:55:33.677

我有同样的问题，但这样解决了。如果上述答案对您不起作用，可能会有所帮助。更改应用程序的包名称后，地图开始不显示。（*它发生在我更改了我的包名之后*）

1.  删除您用于先前软件包的密钥库文件
2.  创建一个新的密钥库文件
3.  获取 SHA1 指纹
4.  转到 API 控制台
5.  创建一个新的安卓应用。
6.  粘贴你的指纹
7.  在清单文件中使用给定的 API 密钥

这对我有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T08:03:42.050

我有同样的问题，解决方案是删除 debug.keystore。然后我做了 `adb uninstall com.example.myapp` 然后清理并再次运行应用程序。

我认为问题是由于我在清单中复制并粘贴了一个虚拟 API 密钥，并且我首先使用它部署了应用程序。

# database - 如果小部件中不存在图像，如何不显示图像

> ID：13768682
> 
> 赞同：0
> 
> 时间：2012-12-07T18:12:47.590
> 
> 标签：database, image, yii

我正在使用 yii cdetail 小部件进行查看，但是..我想知道如果图像不存在如何找到方法。

**我收到错误消息：尝试获取非对象的属性**

```
<?php $this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    'id',
            'name',
    'keywords',
   array(
    'label'=>'Image',
    'type'=>'raw',
    'value'=>$fileModel->name ? CHtml::image(Yii::app()->request->baseUrl.'/uploads/'.$model->logo_file_id.'/'.$fileModel->file_name.$fileModel->extension,"image_url") : null,
        ),

    'contact_name',
    'description',
    'status',
    'created',

),
)); ?> 
```

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:42:35.213

在模型中，您可以有一个 getter 方法返回图像，如果不存在则返回默认图像：

```
public function getImage() {
    $url = Yii::app()->request->baseUrl.'/uploads/'.$this->logo_file_id.'/'.$fileModel->file_name.$fileModel->extension;
    if(file_exists($url)){
        return $url
    }
    //return the default image for example
} 
```

然后在你看来你会做

```
'value'=> CHtml::image($model->Image,"image_url"),
//Note that i'm calling "Image" and not getImage() 
```

当然，这段代码必须改进，因为 $fileModel 不会在方法中定义，`getImage`但我不知道它的作用是什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T12:43:16.757

请试试这个..

```
"value"=>'($data->picture !=="") ? CHtml::image(Yii::app()->request->baseurl."/upload/technician/".$data->picture,"",array(\'width\'=>100, \'height\'=>50)) : ""', 
```

我希望它会帮助你...

# c# - C# 如何从 UTF-8 字符串中检索原始字符串？

> ID：13768683
> 
> 赞同：1
> 
> 时间：2012-12-07T18:12:51.883
> 
> 标签：c#, asp.net, encoding

在我的页面上，我设置了 UTF-8 编码。[然后，我将一个由encodeURIComponent()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)函数`ły`编码的字符串“ ”发送到服务器端，我得到. 现在我想找回原来的字符串。`%C5%82y``%25C5%2582y`

我试过了：

```
HttpUtility.HtmlDecode(): the result is %25C5%2582y
Uri.UnescapeDataString(): the result is %C5%82y 
```

我现在很困惑 - 如何取回原始字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:30:41.100

用于`HttpUtility.UrlEncode`编码和`HttpUtility.UrlDecode`解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:22:53.843

```
Uri.UnescapeDataString(HttpUtility.UrlDecode("ły")); 
```

成功了

# java - 在 jsf 页面中运行和操作一个 java 多线程类

> ID：13768687
> 
> 赞同：2
> 
> 时间：2012-12-07T18:13:17.073
> 
> 标签：java, multithreading, web

如何在我的 Web 应用程序中运行多线程类（具有多个线程且需要暂停和恢复的方法）？我想随时停止线程并从我的 Web 应用程序中停止它。那么我该如何解决这个问题呢？

使用应用程序 bean 或其他类型的 bean 好用吗？

# java - SQL 错误 参数太少

> ID：13768688
> 
> 赞同：2
> 
> 时间：2012-12-07T18:13:17.467
> 
> 标签：java, sql, ms-access

我遇到了一个 sql 问题。我在 Access 数据库之上编写了一个 java 应用程序。这是几个字段的搜索查询，我知道错误出现在我需要计算一个人失踪时的年龄的部分。我在我的方法中返回了一个表模型，所以我需要在我的查询中进行计算。我最近的尝试是这样的：

```
public TableModel UpdateTable(String dossiernr, String naam, String voornaam,
    String startleeftijd, String eindleeftijd, String dossierjaar, String geslacht)
{
    TableModel tb = null;
    String sql= "SELECT [Nr dossier],[Annee],[Nom],[Prenom],[Disparu le],[Ne le],[Sexe], DATEDIFF('yyyy',[Ne le],[Disparu le]) - iif(DATEADD('yyyy', DATEDIFF('yyyy',[Ne le],[Disparu le]),"
        + "[Ne le])>[Disparu le],1,0) AS Age FROM TotalTable "
        + "WHERE [Nr dossier] LIKE ? AND [Nom] LIKE ? AND [Prenom] LIKE ? AND [Annee] LIKE ? AND Age >= ? AND Age <= ? AND [Sexe] LIKE ?;";

    try
    {
        PreparedStatement pstatement;
        Connection connection = PersistentieController.getInstance().getConnection();

        pstatement = initStatement(connection,sql);
        pstatement.setString(1, "%" + dossiernr + "%");
        pstatement.setString(2, "%" + naam + "%");
        pstatement.setString(3, "%" + voornaam + "%");
        pstatement.setString(4, "%" + dossierjaar + "%");
        pstatement.setString(5, startleeftijd);
        pstatement.setString(6, eindleeftijd);
        pstatement.setString(7, "%" + geslacht + "%");
        rs=pstatement.executeQuery();
        tb = DbUtils.resultSetToTableModel(rs);
        pstatement.close(); 
    }//einde try
    catch (SQLException e)
    {
        e.printStackTrace();
    } //einde catch

    return tb;
} 
```

当我运行它时，我收到以下错误：

> java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] 参数太少。预计8。

我只使用 7 个参数，不明白他为什么要 8 个。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:21:14.690

您在`WHERE`子句中计算了 7 个参数。不幸的是，在这种情况下，Access db 引擎将`Age`其视为另一个参数，因此它认为您有 8 个参数，而不是只有 7 个。

要了解原因，请从这个查询开始，该查询在我的 Access 数据库中运行时不会出错：

```
SELECT some_text AS foo
FROM tblFoo
WHERE some_text Is Not Null; 
```

但是，当尝试在`WHERE`子句中使用别名而不是字段名称时，Access 会提示我提供一个值，`foo`因为它将其视为参数：

```
SELECT some_text AS foo
FROM tblFoo
WHERE foo Is Not Null; 
```

访问限制了您稍后在查询中重复使用别名的能力。在某些情况下，它会接受别名，但您的不是其中一种情况。

您可以在子查询中定义别名。然后，当您在父查询中引用子查询的别名时，数据库引擎将正确识别它。

如果可能，请直接在 Access 中测试您的 SQL 语句。如果他们失败了，这种努力会给你最好的机会来确定原因。

# c#-4.0 - 在同一个 EXCEL 中读取和写入数据 - 没有第三方

> ID：13768696
> 
> 赞同：0
> 
> 时间：2012-12-07T18:13:49.730
> 
> 标签：c#-4.0

我在 C#.Net 中工作。我将发送一个 EXCEL 文件作为我的输入，并从该文件中执行一个过程并得到结果。

我想在同一张 EXCEL 表中打印结果。下面的代码我用来阅读excel。

```
 public DataTable ReadDataExcel(string filepath)
    {
        FileStream stream = File.Open(filepath, FileMode.Open, FileAccess.ReadWrite);
        IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
        excelReader.IsFirstRowAsColumnNames = true;
        DataSet result = excelReader.AsDataSet();
        DataTable dt = new DataTable();
        dt = result.Tables[0];
        return dt;
    } 
```

我将使用此数据表进行处理。如何在同一张 EXCEL 表中打印输出值。没有任何第三方我需要这样做..

# vim - 无法在 DOSBox 中的 Vim for DOS 中保存

> ID：13768699
> 
> 赞同：3
> 
> 时间：2012-12-07T18:14:02.567
> 
> 标签：vim, dos, dosbox

我需要在 DOS 下工作，所以我使用 DosBox 在一个文件夹中安装了 16 位 Vim（[从 vim.org 下载](ftp://ftp.vim.org/pub/vim/pc/vim71d16.zip)）。当我第一次打开文件时，它可以让我使用 :w 保存文件。我继续编辑，想再次保存，却说无法写入文件！？我怎样才能解决这个问题？我正在运行 Ubuntu。该文件位于具有权限的文件夹中：

```
drwxrwxrwx 7 metroxylon metroxylon 4096 Dec  7 12:30 src 
```

以下是一些截图： ![在此处输入图像描述](../Images/e9e79f187f32436953eb3cbab85a0d8c.png)

![在此处输入图像描述](../Images/a35aa204f86844bb38b3e8a88c8b90a0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:58:20.347

我在 freenode 的 #dosbox 频道寻求帮助。用户 Qbix，告诉我这是一个 DOSBox 错误，将被添加到错误列表中。

# wordpress - 如何处理多个文本域？

> ID：13768703
> 
> 赞同：4
> 
> 时间：2012-12-07T18:14:10.197
> 
> 标签：wordpress, internationalization, wordpress-theming, po, mo

我说的是 Wordpress 本地化/国际化。

我有两个由第三方完成的模板。他们使它们成为二十个的子模板。似乎他们保留了带有国际化字符串的模板文件，其文本域为`'twentyten'`. 现在我已经准备好两个网站，准备好双语英语/阿拉伯语。我发现我需要使用一个唯一的文本域。我使用了网站特定的关键字。

在生成 .po 文件时，我发现所有`_e(), __(), _x(), _n()`函数内容都合并到了 .po 文件中，但由于我的 functions.php 包含一个带有 function 的文本域`load_theme_textdomain`。只有具有此文本域的那些字符串显示已翻译。其他出现在英语中。

我想听听经验丰富的开发人员的意见。他们如何共存这种情况。我现在将所有文本域转换为一个，以便我的网站看起来不错。但我只是额外工作还是有简单或模块化的方式来做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:50:28.410

您可以使用[`load_child_theme_text_domain()`](http://codex.wordpress.org/Function_Reference/load_child_theme_textdomain). 这是翻译亲子主题场景的正确方法。这样，您可以将父字符串用于某些用途，将子字符串用于其他用途。

# ios - CoreGraphics (drawRect) 用于在 UITableViewCell 中绘制标签和 UIImageView

> ID：13768705
> 
> 赞同：1
> 
> 时间：2012-12-07T18:14:19.743
> 
> 标签：ios, iphone, objective-c, uitableview, core-graphics

我有一个`UITableViewCell`其中里面有 5 个`UILabel`a`UIButton`和一个`UIImageView`填充单元格作为背景的 a。性能似乎有点慢，所以我正在考虑使用`CoreGraphics`它来改进它。`CoreGraphics`使用而不是`UILabel`as`subViews`会让事情变得更快，这是真的吗？如果是，为什么？

我有以下代码在单元格上绘制阴影：

```
[self.layer setBorderColor:[UIColor blackColor].CGColor];
[self.layer setShadowColor:[UIColor blackColor].CGColor];
[self.layer setShadowRadius:10.0];
[self.layer setCornerRadius:5.0];
[self.layer setShadowPath:[[UIBezierPath bezierPathWithRect:self.frame] CGPath]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:05:47.460

一般来说，（正如 Gavin 指出的那样）我会说你必须首先确认子视图确实导致滚动时出现抖动。

在测试 UITableViewCell 滚动性能时，我经常使用 Instruments 中的 Time Profiler。在左侧面板中切换到 Objective-C Only，查看主线程上花费最多的时间。如果您看到大量时间花在重新排列（布局）或绘制子视图上，您​​可能需要使用 CoreGraphics。如果时间花在分配/解除分配上，那么您可能需要检查您的子视图是如何被重用的。如果它们没有被重用，那么这当然会导致性能问题。

那么当然，你应该看看合成。如果您的子视图不是不透明的（通过 CoreAnimation 工具识别），那么性能可能会受到严重影响。

另外值得注意的是——要意识到绘制阴影的成本很高，并且根据您的实现，它们可能会在每一帧上重新绘制！您最好的选择是确保任何 CALayer 阴影都完全光栅化，并定义了路径，因此不必从像素蒙版进行实时计算。

如果最终，您确定每个子视图的布局和重绘单独导致速度变慢，那么我有几点/解释：

1.  您对表格视图单元格的绘图例程的实现可能会比 Apple 为其视图编写的高度优化的绘图要慢。所以你不会赢得任何重新实现 UIImageView 本身的绘图的战斗。使用 CoreGraphics 绘图时，性能提升来自两个方面：a.) 预渲染以前不透明的视图，并减少视图绘制周期的布局阶段所花费的时间 - 这减少了 GPU/CPU 上的工作量滚动。b.) 减少单个视图绘图的 CG 上下文切换时间。每个元素现在同时绘制到相同的图形上下文中，从而降低了切换成本。

2.  在主线程上使用 CoreGraphics 在 drawRect 中绘制使用 CPU 绘制，并且根据您的单元格的复杂程度，这可能会导致其自身的抖动。相反，考虑在后台线程中绘制到单独的 CGContext，然后调度工作人员将绘图的内容作为 CGImageRef 插入到 CALayer 中，或者作为 UIImage 插入到 UIImageView 中。GitHub上有一个简单的实现：[https ://github.com/mindsnacks/MSCachedAsyncViewDrawing](https://github.com/mindsnacks/MSCachedAsyncViewDrawing)

3.  如果您确实决定使用背景 CoreGraphics 绘图，请注意目前（2012 年 12 月），我相信在后台线程上绘图时 NSString 绘图类别中存在一个错误，导致回退到绝对不是线程安全的 webkit . 这将导致崩溃，因此目前，请确保异步绘图在串行 GCD/NSOperation 队列中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T20:14:21.433

在模拟器上，**Debug** → **Color Blended Layers**。红色是坏的，绿色是好的。

更准确地说，红色意味着 GPU 需要进行 alpha 混合。主要成本是两次绘制像素并可能重新获取额外纹理所需的内存带宽。完全透明的像素*真的很*糟糕。

在深入研究 Core Graphics 之前，您应该考虑三个修复（所有这些都减少了红色的数量）：

*   尽可能使视图不透明。背景设置为的标签`[UIColor clearColor]`通常可以设置为纯色。
*   使具有透明度的视图尽可能小。对于标签，这涉及`-sizeToFit/-sizeThatFits:`适当地使用和调整布局。
*   从不透明的图像中移除 alpha 通道（例如，如果您的单元格背景是图像）——一些图像编辑器不这样做，这意味着 GPU 需要执行 alpha 测试并且可能需要渲染图像后面的任何内容。

此外，打开**并在屏幕外渲染颜色**（可能在关闭颜色混合图层之后，以便更容易看到）。屏幕外渲染的东西显示为黄色，通常表示您已应用图层蒙版。这些可能对性能非常不利；我不知道 CoreAnimation 是否缓存了屏蔽结果。

最后，您可以通过设置使 CoreAnimation 栅格化单元格`cell.layer.shouldRasterize = YES`（您可能还需要`cell.layer.rasterizationScale = [[UIScreen mainScreen].scale`在视网膜设备上；我忘记了这是否是自动完成的）。主要的好处是它很简单，而且比自己在 Core Graphics 中渲染图像视图更高效。（标签的好处减少了，因为文本需要在 CPU 上呈现。）

另请注意，视图动画将受到影响。我忘记了 CALayer.shouldRasterize 做了什么设置（它可能会在动画的每一帧重新光栅化它，当它只被绘制到屏幕一次时有点浪费），但是使用 Core Graphics 将（默认情况下）拉伸渲染动画期间的内容。请参阅 CALayer.contentsGravity。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:17:51.700

您有什么证据表明您的观点导致了性能问题？这是一个可以把你吸进去的深黑洞，所以要确保你知道问题出在你认为的地方。

您是否正在预加载所有数据？你有没有预下载图片？你所描述的不应该导致 UITableViewCell 变慢。[Apple 开发人员比你聪明得多，](http://randomtype.ca/blog/premature-optimization-is-the-root-of-all-evil/)所以我要确保你有数据来支持你的决定！

我还在模拟器中看到了一个滞后的 UITableViewCell，在真实硬件上没有明显差异。

确实，使用 CoreGraphics 可以加快您的绘图性能，但如果您做错了，它也会减慢它的速度！查看[Apple 高级表格视图单元教程，](http://developer.apple.com/library/ios/#samplecode/AdvancedTableViewCells/Introduction/Intro.html)了解如何执行该技术。

# css - css3动画不断变化

> ID：13768706
> 
> 赞同：4
> 
> 时间：2012-12-07T18:14:18.807
> 
> 标签：css, css-animations

我正在尝试实现 css3 动画....我计划在循环中不断改变我的目标影响，但问题是在一个循环后它以红色停止它不会进一步改变它的颜色....如何继续循环...

[http://jsfiddle.net/9CZFS/](http://jsfiddle.net/9CZFS/)

在下面提供我的代码

```
div
{
width:100px;
height:100px;
background:red;
animation:myfirst 5s;
-moz-animation:myfirst 5s; /* Firefox */
-webkit-animation:myfirst 5s; /* Safari and Chrome */
-o-animation:myfirst 5s; /* Opera */
}

@keyframes myfirst
{
0%   {background:red;}
25%  {background:yellow;}
50%  {background:blue;}
100% {background:green;}
}

@-moz-keyframes myfirst /* Firefox */
{
0%   {background:red;}
25%  {background:yellow;}
50%  {background:blue;}
100% {background:green;}
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
0%   {background:red;}
25%  {background:yellow;}
50%  {background:blue;}
100% {background:green;}
}

@-o-keyframes myfirst /* Opera */
{
0%   {background:red;}
25%  {background:yellow;}
50%  {background:blue;}
100% {background:green;}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T18:19:10.820

见这里：http: [//jsfiddle.net/9CZFS/1/](http://jsfiddle.net/9CZFS/1/)

```
animation:myfirst 5s linear infinite;
                        ----^----- 
```

您需要指定动画将永远循环播放。

此外，如果您希望动画流畅，您需要让它以相同的值开始和结束：

```
0%,100%   {background:red;}
25%  {background:yellow;}
50%  {background:blue;}
75% {background:green;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:21:33.907

你只需要告诉 CSS 无限播放动画，它默认只播放一次。为此，您使用`animation-iteration-count`. 只需将以下代码添加到您的`div`样式声明中：

```
-moz-animation-iteration-count: infinite;
-webkit-animation-iteration-count: infinite;
-o-animation-iteration-count: infinite; 
```

这是一个演示：http: [//jsfiddle.net/9CZFS/3/](http://jsfiddle.net/9CZFS/3/)

文档`animation-iteration-count`：[https ://developer.mozilla.org/en-US/docs/CSS/animation-iteration-count](https://developer.mozilla.org/en-US/docs/CSS/animation-iteration-count)

注意：我的演示还更改了您的动画以在完成后平滑地返回红色：

```
@keyframes myfirst
{
0%   {background:red;}
25%  {background:yellow;}
50%  {background:blue;}
75% {background:green;}
100%   {background:red;}
} 
```

# delphi - 对 TListView 中的子项求和

> ID：13768713
> 
> 赞同：4
> 
> 时间：2012-12-07T18:14:37.467
> 
> 标签：delphi, delphi-xe3

我们如何在 TListView 中总结一些 SubItems？如果你看下面的图片，

![在此处输入图像描述](../Images/e84d720e3af35e2e7616838893eef4ee.png)

拳头，我们填充`Col 1`到`Col 4`for`Group1`和`Group2`。问题是，我们如何对 SubItems 求和`Col 2`并将结果放入`Col 3`. 我在上面发布的图片很清楚，但是如果我想解释如何求和，它有点像你将 ListView 的当前 SubItem 与上面的 SubItem 相加。而且，对于每个组中的第一个 SubItem，我们输入相同的数字，例如`Col 2`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T18:42:00.040

这样的事情可能会做你想做的事：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  Value: Integer;
  GroupID: Integer;
  GroupSum: Integer;
begin
  GroupID := 0;
  GroupSum := 0;
  for I := 0 to ListView1.Items.Count - 1 do
  begin
    if Assigned(ListView1.Items[I].SubItems) and
      (ListView1.Items[I].SubItems.Count > 0) and
      TryStrToInt(ListView1.Items[I].SubItems[0], Value) then
    begin
      if GroupID <> ListView1.Items[I].GroupID then
      begin
        GroupSum := 0;
        GroupID := ListView1.Items[I].GroupID;
      end;
      GroupSum := GroupSum + Value;
      if ListView1.Items[I].SubItems.Count < 2 then
        ListView1.Items[I].SubItems.Add(IntToStr(GroupSum))
      else
        ListView1.Items[I].SubItems[1] := IntToStr(GroupSum);
    end;
  end;
end; 
```

好吧，对于那些想模拟 OP 的情况的人，这里有一个代码（只需在表单上放置一个列表视图组件并编写事件处理程序）：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  ListItem: TListItem;
  ListGroup: TListGroup;
  ListColumn: TListColumn;
begin
  ListView1.Clear;
  ListView1.GroupView := True;
  ListView1.ViewStyle := vsReport;

  ListColumn := ListView1.Columns.Add;
  ListColumn.Caption := 'Column 1';
  ListColumn.Width := 90;
  ListColumn := ListView1.Columns.Add;
  ListColumn.Caption := 'Column 2';
  ListColumn.Width := 90;
  ListColumn := ListView1.Columns.Add;
  ListColumn.Caption := 'Column 3';
  ListColumn.Width := 90;

  ListGroup := ListView1.Groups.Add;
  ListGroup.GroupID := 0;
  ListGroup.Header := 'Group 1';
  ListGroup := ListView1.Groups.Add;
  ListGroup.GroupID := 1;
  ListGroup.Header := 'Group 2';

  ListItem := ListView1.Items.Add;
  ListItem.GroupID := 0;
  ListItem.Caption := 'Item 1';
  ListItem.SubItems.Add('22');
  ListItem := ListView1.Items.Add;
  ListItem.GroupID := 0;
  ListItem.Caption := 'Item 2';
  ListItem.SubItems.Add('11');
  ListItem := ListView1.Items.Add;
  ListItem.GroupID := 1;
  ListItem.Caption := 'Item 3';
  ListItem.SubItems.Add('94');
  ListItem := ListView1.Items.Add;
  ListItem.GroupID := 1;
  ListItem.Caption := 'Item 4';
  ListItem.SubItems.Add('42');
  ListItem := ListView1.Items.Add;
  ListItem.GroupID := 1;
  ListItem.Caption := 'Item 5';
  ListItem.SubItems.Add('21');
end; 
```

# actionscript-3 - 质量差的纹理stage3D

> ID：13768715
> 
> 赞同：1
> 
> 时间：2012-12-07T18:14:43.427
> 
> 标签：actionscript-3, flash, flash-builder, stage3d, molehill

我在 stage3D 中绘制了一个简单的正方形，但是图片中的数字和边缘的质量并没有达到应有的水平：

![正方形](../Images/e5655ab6809ebd51e157388735e4fab3.png)

这是带有（小）源代码的示例，我将最多的源代码放在一个文件中。 [http://users.telenet.be/fusion/SquareQuality/](http://users.telenet.be/fusion/SquareQuality/)
[http://users.telenet.be/fusion/SquareQuality/srcview/](http://users.telenet.be/fusion/SquareQuality/srcview/)

我正在使用 mipmapping，在我的着色器中我使用“<2d, miplinear, repeat>”，纹理为 256x256 jpg（比图像上的大），还尝试了 png，尝试了“mipnearest”并尝试不使用 mipmapping。抗锯齿 4，但 10 或更多根本没有帮助......

有任何想法吗？问候，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:35:09.447

您是否对 backBuffer 使用抗锯齿功能？

```
// Listen for when the Context3D is created for it
stage3D.addEventListener(Event.CONTEXT3D_CREATE, onContext3DCreated);

function onContext3DCreated(ev:Event): void
{
    var context3D:Context3D = stage3D.context3D;

    // Setup the back buffer for the context
    context3D.configureBackBuffer(stage.stageWidth, stage.stageHeight,
                                  0, // no antialiasing (values 2-16 for antialiasing)
                                  true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:23:52.647

我认为你的资源纹理的大小太高了。GPU 在片段着色器中逐个像素地渲染场景。当它渲染纹理的像素时，片段着色器会得到一个表示纹理 UV 的变量。GPU 只是在纹理的 UV 坐标上获取像素的颜色。

现在，当您的纹理尺寸太大时，您将丢失信息，因为屏幕上的两个相邻像素将对应于纹理资源上的非相邻像素。例如：如果你绘制一个比资源小 10 倍的纹理，你会得到这样的结果（如果每个字符对应一个像素，在一维中）：

```
Texture:  0123456789ABCDEFGHIJKLM
Screen:   0AK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T22:16:54.840

我找到了！！！

我去了 Starling 论坛，从 Starling 的 Daniel 那里找到了一个答案：

*“如果您使用的是 TRILINEAR，那么您已经在使用可用的最佳质量。您可以尝试的另一件事是将 Starling 的“抗锯齿”值设置为较高的值，例如 16，看看是否有帮助。*

所以我看到[这篇](http://www.adobe.com/devnet/flashplayer/articles/mipmapping.html)文章说三线性仅在您将参数“线性”放在片段着色器中时使用，在我的示例程序中：

“tex ft0，v0，fs0 <2d，**线性**，miplinear，重复>”。

问候，
托马斯

# pdf - 使用命令行代码将 .Indd 转换为 Pdf

> ID：13768721
> 
> 赞同：0
> 
> 时间：2012-12-07T18:14:56.050
> 
> 标签：pdf, adobe-indesign

标题说明了一切。我需要能够通过命令行将 .Indd 文件转换为 Pdf 文件。我找到了一种解决方案，建议我可以使用命令行简单地运行 Indesign 脚本，但它们必须是 .JSX 并且我发现的唯一 indd 到 pdf 脚本是 .jsxbin 并且不能被反编译。如果有人可以解释一个更好的方法来做到这一点，那就太好了。目的是在安装了 indesign 服务器的运行 windows server 2008 的服务器上将 Indd 批量转换为 Pdf。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:02:18.013

@JcFx 在他的评论中提到的链接确实应该是一个很好的起点，但可能需要谨慎。

最重要的警告可能是性能；如果您需要使用 InDesign Server 执行此操作，您可能想要转换的不仅仅是一个 PDF。请记住，InDesign Server 可能需要一段时间才能完全加载（委婉地说），并且为每个 PDF 启动它很可能无法达到您的性能预期。

这就是为什么您会发现大多数方法会启动 InDesign Server，让它继续运行，然后通过 SOAP 之类的东西或通过 InDesign Server 插件进行实际通信。

我知道有两种商业产品具有这样的实现：Enfocus Switch (www.enfocus.com) 和 axaio MadeToPrint (www.axaio.com -*我隶属于这家公司*)。在前一种情况下，我认为脚本被推送到 InDesign Server；在后一种情况下，MadeToPrint 使用 InDesign Server 插件。

除了如何启动和与 InDesign Server 通信之外，您可能已经了解了许多其他事项。例如，确保检查您正在打开的 InDesign 文件是否缺少链接和字体，并确保在输出到 PDF 之前更新 InDesign 文件中的图像。

我不知道您的项目的参数是什么，但我知道让这样一个流程稳定且高效地运行并非易事。如果您有可能使用已经实现这种自动化的工具，我个人会对此进行研究。

# android - android从主要活动重新启动应用程序

> ID：13768726
> 
> 赞同：1
> 
> 时间：2012-12-07T18:15:16.687
> 
> 标签：android, android-activity

我的 Android 应用程序包含几个活动：（`M`主或根）`A`、、、、`B`...`C`下面是一个可能的活动导航图：

![在此处输入图像描述](../Images/ed00730a9719a876a16bd94d22b976e1.png)

当我的根活动`M`被初始化时，我将一些参数（如屏幕尺寸）缓存为特殊类中的静态变量，`MyUtils`以便稍后在其他活动中使用它们。

当我在活动中按下主页按钮`C`然后启动十几个应用程序时，就会发生 Kaboom。当我返回我的应用程序时，似乎一切都已被破坏。`C.onCreate`方法被调用，但缓存的参数似乎被重置。

我想从 开始`M`，而不是从`C`Android 在长时间停顿后摧毁我的应用程序之后开始。我怎样才能做到这一点？

我想到了这样的事情：

```
// to be put into all my activities but M:
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (MyUtils.GetScreenWidth() == -1)
    {
        // seems like Android killed my app
        finish();
        return;
    }
    // Normal initialization.
    // Use MyUtils.GetScreenWidth() to align my ui elements.
} 
```

...但我不确定这是最好的方法。你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:32:06.583

老实说，我会做与您正在做的事情相同或类似的事情。一个可能更好的想法是有一个静态`MyUtils.initialize()`方法，可能会接受一个应用程序上下文参数，该方法在每个`onCreate()`使用 MyUtils 的 Activity 上调用。

要么，要么将每个值存储在`SharedPreference`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T19:10:02.240

除非您要求用户与前门活动进行交互（例如，再次对用户进行身份验证），否则您可能不希望以这种方式进行操作。

如果您确实想强制他们通过该前门活动返回，您可以在检测到您已通过其他活动之一启动新流程时使用 Intent 启动它。您可能需要花一些时间阅读 Intent 标志的文档，以选择适用于此用法的标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:44:06.477

这不是一个非常聪明的方法，但您可以将这些信息存储在其他地方，如数据库或只是一个文件，然后在需要时检索它。

# python - 如果 name = hash 则自动填充

> ID：13768732
> 
> 赞同：4
> 
> 时间：2012-12-07T18:15:43.350
> 
> 标签：python, hash, mechanize, autofill

我正在尝试在 python 中使用 mechanize 自动填充表单中的文本框（多个框），但是框的名称是哈希，所以我无法像 br.form['name'] 那样自动输入= 'blah' 因为名称是来自散列函数的未知散列。有没有办法做到这一点？我在网上查过，并没有找到任何东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:17:26.217

这应该适合你。显然，您将需要更新该`predicate`方法。另外，您是否有关于该字段的任何恒定信息？id，类，标签等？

```
import mechanize
import re

class MyBrowser:

    def __init__(self):
        self.user_agent = 'Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)'
        self.cj = mechanize.LWPCookieJar()
        self.setup_browser(enable_debug=False)

    def find_by_crazy_name(self, control):
        if re.match('^[\w]{32,}$', control.name):
            return True
        return False

    def runit(self):
        self.agent.open('http://localhost')
        self.agent.select_form(name="foo")
        field = self.agent.form.find_control(predicate=self.find_by_crazy_name)
        field._value = "POOP"
        response = self.agent.submit()

    def enable_debug(self):
        self.agent.set_debug_http(True)
        self.agent.set_debug_redirects(True)
        self.agent.set_debug_responses(True)

    def setup_browser(self, enable_debug=False):
        self.agent = mechanize.Browser()
        self.agent.set_handle_redirect(True)
        self.agent.set_cookiejar(self.cj)
        self.agent.set_handle_referer(True)
        self.agent.set_handle_refresh(True)
        self.agent.set_handle_equiv(True)
        self.agent.set_handle_robots(False)
        self.enable_debug()
        self.agent.addheaders = [('User-Agent', self.user_agent)]

if __name__ == "__main__":
    browser = MyBrowser()
    browser.runit() 
```

这只是用“POOP”填写所有潜在字段。如果是 32 个字母数字字符（如 md5），则该字段是匹配的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:19:54.523

假设`br.form`是一个字典，您可以遍历键为表单中的所有字段设置默认值：

```
for key in br.form:
    br.form[key] = 'blah' 
```

如果您只想填写未知字段的默认值，我假设您会知道所有其他字段名称，因此您可以执行以下操作：

```
known_fields = set(['foo', 'bar'])  # put your known keys in here
for key in br.form:
    if key not in known_fields:
        # this must be the hash
        br.form[key] = 'blah' 
```

请注意，这假定您的哈希字段已经存在于 中`br.form`，可能带有一个`None`或空的字符串值。我没有使用机械化，所以我不确定是否是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:47:13.153

如果请求的表格始终具有相同数量的表格，您可以通过表格编号找到它（第一个表格为 0，依此类推）

尝试`br.select_form(nr=number)`

# database - Google BigQuery - “未找到：项目 [project-id]

> ID：13768734
> 
> 赞同：2
> 
> 时间：2012-12-07T18:15:56.047
> 
> 标签：database, google-bigquery

我在开始使用 Google BigQuery 时遇到问题。我确定我已正确完成创建和配置帐户的所有操作。但是当我进入网络界面时，它似乎无法找到我的项目。我无法创建/上传任何新数据，甚至无法查询示例数据集。所有接口返回的是：

未找到：项目 [my-project-id]

但是，在同一个窗口中，项目名称和 ID 列在左侧面板中......所以看起来 BigQuery 在某种意义上知道我的项目。屏幕截图如下：

![未找到但已列出的项目](../Images/12bc2dd6f00aace7ccb93c82875916b2.png)

我不知道如何纠正这个问题。有人对我在配置和/或设置中可能缺少的东西有任何想法吗？

此致，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:51:15.880

您最近是否为您的项目设置了 ID（例如 xs-analytical-park-g）？如果是这样，可能有一个数据集使用旧名称（这是项目的数字 id），这会混淆 UI。我们会定期搜索更改的项目名称并应用更新，但有时这可能需要一段时间。

我刚刚检查过，看起来我们的数据在项目 ID 方面应该是最新的，所以如果这个问题仍然存在，请告诉我。

# css - 垂直菜单IE7上的空白

> ID：13768743
> 
> 赞同：1
> 
> 时间：2012-12-07T18:16:59.340
> 
> 标签：css, internet-explorer, html-lists

我有一个可扩展的菜单。

在 IE7 上，我在顶部和底部得到一个白色的间隙。在 IE8 上就在顶部。我尝试了不同的建议，但似乎没有任何帮助。

您可以在此处查看该站点：http: [//dffernandez.com/client_review_files/wap/](http://dffernandez.com/client_review_files/wap/)

问题出在“基础设施”按钮上（第二个）

先感谢您。

**HTML**

```
<!--Aside left nav-->
    <div id="secondary-nav">
      <ul>
        <li class="leaf-first"><a href="#"><img src="img/left-aside/sec-nav-arrow.png" width="21" height="21" class="sec-nav-arrow" alt="">airport &amp; location details</a></li>
        <li class="expand-top"></li> <!--Extra li so it can expand background-->
        <li class="leaf-expand"><a href="#">infraestructure</a>
          <!--Submenu-->
          <ul class="asidel-submenu">
            <li class="leaf-first"><a href="#">Current Tenants</a></li>
            <li class="leaf"><a href="#">Industry Especific Info</a></li>
            <li class="leaf"><a href="#">Aerospace</a></li>
            <li class="leaf"><a href="#">Unmanned Aerial Vehicles</a></li>
            <li class="leaf"><a href="#">Repair</a></li>
            <li class="leaf-las"><a href="#">Summary of Master Plan</a></li>
          </ul> <!--Submenu ends-->
        </li> <!--Expand-->
        <li class="expand-bottom"></li> <!--Extra li so it can expand background-->
        <li class="leaf"><a href="#"><img src="img/left-aside/sec-nav-arrow.png" width="21" height="21" class="sec-nav-arrow" alt="">communities</a></li>
        <li class="leaf"><a href="#"><img src="img/left-aside/sec-nav-arrow.png" width="21" height="21" class="sec-nav-arrow" alt="">newsroom</a></li>
        <li class="leaf-last"><a href="#"><img src="img/left-aside/sec-nav-arrow.png" width="21" height="21" class="sec-nav-arrow" alt="">location map</a></li>
      </ul>
    </div> <!--Aside left nav--> 
```

**CSS**

```
/*secondary nav*/
#aside-left #secondary-nav li{
list-style: url(none) none;
margin-bottom: 13px;
}

#aside-left #secondary-nav li a {
height: 31px;
display: block;
background: url(../img/left-aside/sec-nav-back.png);
text-transform: uppercase;
text-decoration: none;
padding-top: 12px;
padding-left: 12px;
}

#aside-left #secondary-nav ul .leaf-expand a {
background: url(../img/left-aside/sec-nav-expand-back.png) repeat-y;
height: auto;
padding-top: 6px;
padding-bottom: 6px;
}

#aside-left #secondary-nav ul .leaf-expand img { /*controls the arrow position next to the expand. For changing the image go to js/script.js*/
display: block;
float: left;
margin-right: 6px;
padding-left: 12px;
margin-top: 3px;

}
#aside-left #secondary-nav ul .expand-top {
background: url(../img/left-aside/sec-nav-expand-back-top.png) no-repeat;
height: 7px;
margin-bottom: 0px;

}
#aside-left #secondary-nav ul .expand-bottom {
background: url(../img/left-aside/sec-nav-expand-back-bottom.png) no-repeat;
height: 6px;
margin-top: -13px;

}
#aside-left #secondary-nav .asidel-submenu {
padding-left: 39px;
padding-right: 12px;
padding-bottom: 9px;
background: url(../img/left-aside/sec-nav-expand-back.png) repeat-y;

} 
#aside-left #secondary-nav .asidel-submenu li {
list-style: disc inside;
margin-bottom: 3px;
color: #0073BC;

}
#aside-left #secondary-nav .asidel-submenu li a {
text-transform: none;
display: inline;
padding-left: 0px;

}
#aside-left #secondary-nav .sec-nav-arrow {
margin-right: 6px;
display: block;
float: left;
margin-top: -3px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:45:08.750

我以前遇到过这个问题，修复很简单，但有点奇怪。所有的解释都在这里 - [http://www.456bereastreet.com/archive/200610/closing_the_gap_between_list_items_in_ie/](http://www.456bereastreet.com/archive/200610/closing_the_gap_between_list_items_in_ie/)

在 IE7 中，它的要点是：

```
li a {display:inline-block;}
li a {display:block;} 
```

没错，在你说 display: block 之前，你必须说 display: inline-block。很奇怪吧？但它有效！

您也可以在所有浏览器中执行此操作。

**编辑：** 我的错，我对你的帖子得出了一个结论——这里有一个更好的答案：

你这样做的方式是一种非常疯狂的尝试并完成它的方式。您尝试保留的“图形”可以通过简单的边框在 CSS 中复制。看看这个小提琴：

[http://jsfiddle.net/CC4gv/](http://jsfiddle.net/CC4gv/)

现在你可以完全摆脱多余的 li 了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:42:09.257

**`The important rules of styling list-based menus:`**

*   重置您的列表 ul, li`{padding:0;margin:0}`
*   不要为除`ul`,或`li``position``float``display`
*   使用`display:block`并将所有样式放在 A-tag 上

这可以解决 99% 的列表布局问题。

此外，UI 元素应该是 CSS 背景图像，而不是内联标签。这将帮助您更好地控制布局。

这一切都在我的教程中进行了解释：[我爱列表](http://preview.moveable.com/jm/ilovelists/)。

# c# - 使用 btouch 从多个原生库生成一个绑定程序集

> ID：13768751
> 
> 赞同：1
> 
> 时间：2012-12-07T18:17:24.757
> 
> 标签：c#, xamarin.ios

是否可以使用**[btouch](http://code.google.com/p/btouch-library/)**从多个本机库生成一个绑定程序集？目标是减少我的应用程序使用的程序集引用的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:16:44.880

是的，Xamarin 使用相同的`btouch`工具来创建包含多个 iOS 框架绑定的 monotouch.dll。

它也非常类似于`bmac`（与 共享源代码`btouch`），后者用于为 MonoMac 构建绑定 - 同样是多个框架绑定在单个 MonoMac.dll 中。

用于第二个的脚本（Makefile）在[github](https://github.com/mono/monomac)中公开可用。

# html - 如何使用 XSLT 将 HTML 百分比编码转换为 Unicode？

> ID：13768754
> 
> 赞同：5
> 
> 时间：2012-12-07T18:17:37.643
> 
> 标签：html, xml, xslt, unicode, percent-encoding

网上有大量关于此的条目和答案，但它们都与我需要的方向相反。从我的 iTunes XML 中，我尝试使用 XSLT 样式表将数千个百分比编码的条目以多种语言转换为 Unicode 文本。除了跟踪每个字符并进行替换之外，我还缺少任何功能或过程吗？这是我正在使用的各种示例的一个小示例，第一行是 XML 字符串值，下一行是我尝试生成并输出到文本文件的基本文本。

```
<string>/iTunes/iTunes%20Music/Droit%20devant/L'odysse%CC%81e.mp3</string> 
```

/iTunes/iTunes 音乐/Droit devant/L'odyssée.mp3

```
<string>A%CC%80%20la%20Pe%CC%82che</string> 
```

À la Pêche

```
<string>%D0%97%D0%B0%D0%BF%D0%BE%D0%BC%D0%B8%D0%BD%D0%B0%D0%B8%CC%86</string> 
```

Запоминай

```
<string>%CE%9A%CE%BF%CC%81%CF%84%CF%83%CC%8C%CE%B1%CF%81%CE%B9</string> 
```

Κότσ̌αρι

对于某些人来说，最后一个可能无法正确显示，因为 hacek/caron 过于引人注目。

提前感谢您的任何建议或线索

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T15:18:07.043

纯 XSLT 2.0 解决方案可以使用[string-to-codepoints()](http://www.w3.org/TR/xpath-functions/#func-string-to-codepoints)和[codepoints-to-string()](http://www.w3.org/TR/xpath-functions/#func-codepoints-to-string)函数。utf-8解码有点乱，可以搞定。

**这个 XSLT 2.0 样式表...**

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:so="http://stackoverflow.com/questions/13768754"
  exclude-result-prefixes="xsl xs so">
<xsl:output encoding="UTF-8" omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*"/>

<xsl:variable name="cp-base" select="string-to-codepoints('0A')" as="xs:integer+" />

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:function name="so:utf8decode" as="xs:integer*">
  <xsl:param name="bytes" as="xs:integer*" />
  <xsl:choose>
    <xsl:when test="empty($bytes)" />
    <xsl:when test="$bytes[1] eq 0"><!-- The null character is not valid for XML. -->
      <xsl:sequence select="so:utf8decode( remove( $bytes, 1))" />
    </xsl:when>
    <xsl:when test="$bytes[1] le 127">
      <xsl:sequence select="$bytes[1], so:utf8decode( remove( $bytes, 1))" />
    </xsl:when>
    <xsl:when test="$bytes[1] lt 224">
      <xsl:sequence select="
      ((($bytes[1] - 192) * 64) +
        ($bytes[2] - 128)        ),
        so:utf8decode( remove( remove( $bytes, 1), 1))" />
    </xsl:when>
    <xsl:when test="$bytes[1] lt 240">
      <xsl:sequence select="
      ((($bytes[1] - 224) * 4096) +
       (($bytes[2] - 128) *   64) +
        ($bytes[3] - 128)          ),
        so:utf8decode( remove( remove( remove( $bytes, 1), 1), 1))" />
    </xsl:when>
    <xsl:when test="$bytes[1] lt 248">
      <xsl:sequence select="
      ((($bytes[1] - 240) * 262144) +
       (($bytes[2] - 128) *   4096) +
       (($bytes[3] - 128) *     64) +
        ($bytes[4] - 128)            ),
        so:utf8decode( $bytes[position() gt 4])" />
    </xsl:when>
    <xsl:otherwise>
      <!-- Code-point valid for XML. -->
      <xsl:sequence select="so:utf8decode( remove( $bytes, 1))" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:function>

<xsl:template match="string/text()">
  <xsl:analyze-string select="." regex="(%[0-9A-F]{{2}})+" flags="i">
    <xsl:matching-substring>
      <xsl:variable name="utf8-bytes" as="xs:integer+">
        <xsl:analyze-string select="." regex="%([0-9A-F]{{2}})" flags="i">
          <xsl:matching-substring>
          <xsl:variable name="nibble-pair" select="
            for $nibble-char in string-to-codepoints( upper-case(regex-group(1))) return
              if ($nibble-char ge $cp-base[2]) then
                  $nibble-char - $cp-base[2] + 10
                else
                  $nibble-char - $cp-base[1]" as="xs:integer+" />
            <xsl:sequence select="$nibble-pair[1] * 16 + $nibble-pair[2]" />                
          </xsl:matching-substring>
        </xsl:analyze-string>
      </xsl:variable>
      <xsl:value-of select="codepoints-to-string( so:utf8decode( $utf8-bytes))" />
    </xsl:matching-substring>
    <xsl:non-matching-substring>
      <xsl:value-of select="." />
    </xsl:non-matching-substring>
    <xsl:fallback>
      <!-- For XSLT 1.0 operating in forward compatibility mode,
           just echo -->
      <xsl:value-of select="." />
    </xsl:fallback>
  </xsl:analyze-string>
</xsl:template>

</xsl:stylesheet> 
```

**...应用于此输入...**

```
<doc>
    <string>/iTunes/iTunes%20Music/Droit%20devant/L'odysse%CC%81e.mp3</string>
    <string>A%Cc%80%20la%20Pe%CC%82che</string>
    <string>%D0%97%D0%B0%D0%BF%D0%BE%D0%BC%D0%B8%D0%BD%D0%B0%D0%B8%CC%86</string>
    <string>%CE%9A%CE%BF%CC%81%CF%84%CF%83%CC%8C%CE%B1%CF%81%CE%B9</string>
</doc> 
```

**..产量..**

```
<doc>
   <string>/iTunes/iTunes Music/Droit devant/L'odyssée.mp3</string>
   <string>À la Pêche</string>
   <string>Запоминай</string>
   <string>Κότσ̌αρι</string>
</doc> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T08:03:12.693

这是使用`java.net.URLDecoder.decode`Java 方法的一种选择，但您必须升级到 Saxon-PE（或 EE）或降级到 Saxon-B。

Saxon-B 是免费的，并且仍然是 XSLT 2.0 处理器。两者都可以在这里找到：[http ://saxon.sourceforge.net/](http://saxon.sourceforge.net/)

例子...

**XML 输入**

```
<doc>
    <string>/iTunes/iTunes%20Music/Droit%20devant/L'odysse%CC%81e.mp3</string>
    <string>A%CC%80%20la%20Pe%CC%82che</string>
    <string>%D0%97%D0%B0%D0%BF%D0%BE%D0%BC%D0%B8%D0%BD%D0%B0%D0%B8%CC%86</string>
    <string>%CE%9A%CE%BF%CC%81%CF%84%CF%83%CC%8C%CE%B1%CF%81%CE%B9</string>
</doc> 
```

**XSLT 2.0**（使用 Saxon-PE 9.4 和 Saxon-B 9.1 测试）

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:java-urldecode="java.net.URLDecoder">
    <xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="string">
        <xsl:value-of select="java-urldecode:decode(.,'UTF-8')"/>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
/iTunes/iTunes Music/Droit devant/L'odyssée.mp3
À la Pêche
Запоминай
Κότσ̌αρι 
```

# vb.net - 如何在特殊目录中打开外部应用程序

> ID：13768756
> 
> 赞同：0
> 
> 时间：2012-12-07T18:17:39.523
> 
> 标签：vb.net

我目前正在寻找一种方法来打开位于 userprofile 文件夹中的外部应用程序。这是我目前的代码：

```
 Dim p As New ProcessStartInfo

    'program function'
    p.FileName = "%userprofile%/folder/app.exe"
    Process.Start(p) 
```

到目前为止我没有运气。如果有人知道如何做到这一点，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:58:27.220

尝试

```
p.FileName = Environment.ExpandEnvironmentVariables("%userprofile%/folder/app.exe") 
```

# f# - 应该如何将 F# SqlDataConnection TypeProvider 与 App.Config 文件一起使用？

> ID：13768757
> 
> 赞同：12
> 
> 时间：2012-12-07T18:17:42.333
> 
> 标签：f#, app-config

我正在使用类型表达式：

```
type dbSchema = SqlDataConnection<ConnectionStringName="X1", ConfigFile="App.config"> 
```

这在编译时效果很好（我可以完全访问所有数据库类型），但在运行时会失败。我认为这是因为在控制台应用程序`bin`目录中生成的配置文件被命名为其他名称，例如`MyAppName.exe.config`，因此`App.config`找不到该文件。

当然，对于使用*ASP.NET MVC*类型的应用程序，`web.config`没有问题，因为编译和运行时配置文件名相同。

`App.config`幸运的是，在目录中放置一个副本`bin`确实可以解决问题，但这是我们应该做的吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-25T13:27:25.230

类型提供程序定义如何工作的描述具有误导性 - typedef 中的值实际上只在代码/编译时重要，并且在运行时作为默认值。但是，正如您所指出的，在运行时找到正确的配置文件并不是很聪明。

您可以通过将连接字符串作为参数传递给 GetDataContext 来完成您想要的操作：

```
type dbSchema = SqlDataConnection<ConnectionStringName="X2">
let db = dbSchema.GetDataContext(ConfigurationManager.ConnectionStrings.["X2"].ConnectionString) 
```

...或者如果您还想让它在 F# 交互中工作，请像这样包装它：

```
type dbSchema = SqlDataConnection<ConnectionStringName="X2">
#if COMPILED
let db = dbSchema.GetDataContext(ConfigurationManager.ConnectionStrings.["X2"].ConnectionString)
#else
let db = dbSchema.GetDataContext()
#endif 
```

（请注意，您需要引用 System.Configuration。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:55:05.363

我在这台 PC 上没有 VS2012，但这应该是你要找的：

```
let exeConfigFile = Path.GetFileName(System.Reflection.Assembly.GetEntryAssembly().Location) + ".config"
let defaultConfigFile = "App.config"
let configFile = if File.Exists(exeConfigFile) then exeConfigFile else defaultConfigFile

type dbSchema = SqlDataConnection<ConnectionStringName="X1", ConfigFile=configFile> 
```

# javascript - 匹配除尖括号外的单词边界

> ID：13768758
> 
> 赞同：1
> 
> 时间：2012-12-07T18:17:46.347
> 
> 标签：javascript, html, xml, regex, frontend

我正在尝试在一大段文本中进行多次替换，并将单词转换为带有 HTML 标记的超链接。我发现使用表达式`(\b)(word)(\b)`大部分时间都可以找到我想要的单词，但一个问题是尖括号 (`<`和`>`) 显然算作边界，所以当我在同一个字符串上再次运行表达式时，我匹配我已经转换为链接的单词。我刚才在表达式中找到了一种解决方法`([\s-_()])(word)([\s-_()])`，但这需要我知道单词周围允许哪些字符而不是不允许字符。那么有没有一种方法可以让我表达“将这个词与除`<`and之外的边界匹配`>`？

注意 - 我不能使用全局标志。这意味着用于在文本块中进行“n”个替换，介于 1 和 all 之间。

前任

```
var str = "Plain planes are plain.  Plain pork is plain.  Plain pasta is plainly plain.";
str = str.replace(/(\b)(plain)(\b)/, "$1<a href='www.plain.com'>$2</a>$3");
// this will result in the first instance of 'plain' becoming 
// a link to www.plain.com

str = str.replace(/(\b)(plain)(\b)/, "$1<a href='www.plain.com'>$2</a>$3");
// this will NOT make the second instance of 'plain' into 
// a link to www.plain.com
// instead, the 'plain' in the middle of the anchor tag 
// is matched and replaced causing nested anchor tags 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:17:59.493

您可以尝试消极的回顾，例如：

`(?<!<a href='www\.)(\b)(plain)(\b)`

# javascript - 字符串中的 document.title 和空格

> ID：13768762
> 
> 赞同：0
> 
> 时间：2012-12-07T18:18:17.420
> 
> 标签：javascript, html, breadcrumbs

我正在使用一个面包屑.js 文件。

```
function breadcrumbs(){
sURL = new String;
bits = new Object;
var x = 0;
var stop = 0;
var output = "";
sURL = location.href;
sURL = sURL.slice(8,sURL.length);
chunkStart = sURL.indexOf("/");
sURL = sURL.slice(chunkStart+1,sURL.length)
while(!stop){
    chunkStart = sURL.indexOf("/");
    if (chunkStart != -1){
        bits[x] = sURL.slice(0,chunkStart)
        sURL = sURL.slice(chunkStart+1,sURL.length);
    }else{
        stop = 1;
    }
    x++;
}
for(var i in bits){
    output += "<a href=\"";
    for(y=1;y<x-i;y++){
        output += "../";
    }
    output += bits[i] + "/\">" + bits[i] + "<a/a> &nbsp;|&nbsp; ";
}
document.write(output + document.title);
} 
```

它所做的是遍历文件夹结构并将其构建为一组面包屑。例如：

```
/root
+ design-library
---+ foo
--------+ bar
------------+ baz name with space 
```

这将返回为：

```
design-library | foo | bar | baz%20name%20with%20space | filename 
```

如何维护文件夹名称中的空间，但返回为：

```
design-library | foo | bar | baz name with space | filename 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:26:42.227

使用`decodeURIComponent(str)`，它将`%xx`值转换回单个字符。

# android - android如何从名称中获取视图的ID

> ID：13768763
> 
> 赞同：0
> 
> 时间：2012-12-07T18:18:19.250
> 
> 标签：android

> **可能重复：**
> [如果我知道图像的名称，如何获取图像的资源 ID？](https://stackoverflow.com/questions/3042961/how-can-i-get-the-resource-id-of-an-image-if-i-know-its-name)

嗨，我想获取图像的 id，我可以这样做，

```
int id = R.layout.imagename 
```

那我可以这样做

```
imageView.setImageResource(id) 
```

但我的问题是如果我知道图像名称在运行时发生变化如何获取 id，那么在这种情况下我该怎么做`R.layout."imagename"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:42:58.243

我刚刚复制了[弗朗西斯科的答案](https://stackoverflow.com/a/3044081/1134705)，我希望你能投票给他的答案

```
String mDrawableName = "myappicon";
int resID = getResources().getIdentifier(mDrawableName , "drawable", getPackageName()); 
```

# javascript - Nodejs从函数内调用函数

> ID：13768764
> 
> 赞同：0
> 
> 时间：2012-12-07T18:18:19.493
> 
> 标签：javascript, node.js, function

我有 3 种方法

```
exports.getImageById = function (resultFn, id) {
 ...
}

exports.getCollectionById = function (resultFn, id) {
} 
```

在第三种方法中，我想同时调用这两种方法

```
exports.getCollectionImages = function (resultFn, collectionId) {

var arr = new Array();

this.getCollectionById(   // fine, 1st call
    function (result) {
        var images = result.image;
        for (i = 0; i < images.length; i++) {
            this.getImageById(function (result1) {   // error, 2nd call
                    arr[i] = result1;
                }, images[i]
            );

         }
    }
    , collectionId
);

resultFn(arr);
} 
```

我可以调用第一个函数`this.getCollectionById`，但调用失败`this.getImageById`，它说未定义函数，这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:21:08.163

当您调用`this.getCollectionById`将其传递给回调时，回调无法访问相同的`this`

最简单的解决方案是保存`this`为局部变量。

```
exports.getCollectionImages = function (resultFn, collectionId) {    
    var arr = new Array();        
    var me = this; // Save this
    this.getCollectionById(   // fine, 1st call
        function (result) {
            var images = result.image;
            for (var i = 0; i < images.length; i++) {
                // Use me instead of this
                me.getImageById(function (result1) {   // error, 2nd call
                    arr[i] = result1;
                }, images[i]);
            }
        }, collectionId);
    resultFn(arr);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:21:24.007

内部函数内部的值与`this`外部不同的对象，因为它取决于函数的调用方式。[您可以在MDN 上的文章`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)中找到详细说明。

解决它的一种方法是`this`在另一个变量中保留对外部的引用，例如`that`：

```
var that = this;
this.getCollectionById(   // fine, 1st call
    function (result) {
        var images = result.image;
        for (i = 0; i < images.length; i++) {
            that.getImageById(function (result1) {   // 2nd call
                    arr[i] = result1;
                }, images[i]
            );

        }
    }
    , collectionId
); 
```

# tinymce - Tinymce 选择文本

> ID：13768767
> 
> 赞同：3
> 
> 时间：2012-12-07T18:18:23.400
> 
> 标签：tinymce, watir-webdriver

我是 ruby​​ 和 watir-webdriver 的新手。我正在尝试从网站[http://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)学习如何测试 tinymce 。我可以单击“粗体”等按钮，但我不知道是否有办法在文本区域中选择/突出显示文本来测试“粗体”按钮。我可以在 textarea 中找到文本“Feel free”，但我不确定如何选择文本。我注意到其他帖子提到 Tinymce 在框架中，但它似乎没有在当前页面的框架中。

这是该部分的外观（编辑后的表格）

```
<textarea id="content" style="width: 100%; height: 550px; display: none;" name="content" cols="20" rows="20" aria-hidden="true">
 <p>Feel free to try out the different features ...</p>
</textarea>

require 'watir-webdriver'

b = Watir::Browser.new :firefox
b.goto "http://www.tinymce.com/tryit/full.php"

b.div(:id => 'main').wait_until_present
b.textarea(:value => /Feel free/).exists? #this evaluates to "true"

Where I need to select the text

b.a(:title => 'Bold (Ctrl+B)').hover
b.a(:title => 'Bold (Ctrl+B)').click 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:59:05.763

是的，编辑器在一个框架中。这`to`从 中选择`Welcome to the TinyMCE editor demo!`：

```
require "watir-webdriver"

browser = Watir::Browser.new :firefox
browser.goto "http://www.tinymce.com/tryit/full.php"

require "watir-webdriver/extensions/select_text"
browser.frame(id:"content_ifr").h1.select_text "to" 
```

# javascript - javascript中的正则表达式来验证数字

> ID：13768769
> 
> 赞同：-1
> 
> 时间：2012-12-07T18:18:34.557
> 
> 标签：javascript, regex, validation, numbers

> **可能重复：**
> [精度为 2 的小数的简单正则表达式](https://stackoverflow.com/questions/308122/simple-regular-expression-for-a-decimal-with-a-precision-of-2)

嗨，我需要使用正则表达式验证一个数字。主要思想是我有一个数字的整数部分、小数部分和小数分隔符。例如，如果我有这个：

```
var integer_part = 4;
var decimal_part = 2;
var decimal_separator = ".";

// will be valid numbers
// 2546.33 
// 12
// 1.33
// 263
// 0 
```

我可以用变量中的值创建一个正则表达式字符串来验证字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:22:51.490

您不需要正则表达式：

```
!isNaN(parseFloat(n)) && isFinite(n); 
```

检查数字是浮点数，不是 NaN 也不是无穷大。

这听起来像是一个 XY 问题。你应该问的是`How can I validate a number?`，把正则表达式部分排除在外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:24:37.977

尽管您的问题尚不清楚，但我假设您想使用变量来确定正则表达式中允许值的范围如果是这样，您可以使您的模式字符串如下所示：

```
pattern = '/[\d]{0,' + integer_part + '}(' + decimal_separator + '[\d]{1,' + decimal_part + '})?/'; 
```

这是一个基本的实现。在这种情况下，为了`.`用作分隔符，您实际上需要设置`decimal_separator = '\.';`这是为了转义正则表达式中的通配符匹配的小数。

如果您真的想寻找更多的边缘情况，您可能希望像这样有条件地构建您的模式：

```
pattern = '/[\d]{0,' + integer_part + '}';
if (decimal_part > 0) {
    if (decimal_separator == '.') {
        pattern += '(\.';
    } else {
        pattern +=  '(' + decimal_separator;
    }
    pattern += '[\d]';
    if (decimal_part == 1) {
         pattern += '{1}';
    } else {
         pattern += '{1,' + decimal_part + '}';
    }
    pattern += ')?';
}
pattern += '/'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:22:42.730

只需使用此正则表达式，它会查找任何内容

```
\d+(\.\d+) 
```

但是，可能有更好的方法来做到这一点。

```
Boolean isFloat=false;
try
{
   float num=parseFloat(n);
   isFloat=!isNaN(num) && isFinite(num);
}
catch (NumberFormatException ex)
{
   //Isn't a number
} 
```

# php - 用于浏览器游戏的 codeigniter / mvc 框架

> ID：13768772
> 
> 赞同：-1
> 
> 时间：2012-12-07T18:18:51.280
> 
> 标签：php, codeigniter, frameworks

我现在正在编写一个 bowsergame 并且想自己做这一切，主要是为了学习/训练我的 php/mysql 技能和娱乐。我对 mvc 框架和 codeigniter 都没有任何技能。我看过一些关于 codeigniter 的 vids 和教程，它似乎非常有效地创建代码更快、更节省。

问题是codeigniter（或所有基于MCV的框架）是否有助于编写浏览器游戏，因为我需要一些时间才能进入框架，而且实现自己的类等等似乎也有点棘手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:28:44.870

一个框架，特别是像 CI 这样有很多社区支持的框架，将是创建浏览器游戏的不错选择（显然取决于游戏类型）它确实取决于您想要创建的游戏类型，但它们都将使用数据库在某种程度上，大多数框架都具有良好的数据库支持，使事情变得更容易。

总体而言，框架背后的想法是为您提供一组工具来使用并减少开发时间。为什么要编写自己的表单验证，因为它已经完成了很多次。

MVC 本身实际上只是常识编程，无论是否游戏，在我看来，它都是您应该理解并在每个项目中做的事情。

话虽如此，即使我在 CI 工作，我也听到了一些关于它的缺点和抱怨。有许多 PHP 框架，包括但不限于 Zend、CakePHP、Laravel 和 Fuel。检查它们，确定您的项目需要从框架中获得什么，并根据哪个框架最适合您的要求做出决定。

# regex - 正则表达式消除模式

> ID：13768773
> 
> 赞同：-2
> 
> 时间：2012-12-07T18:19:04.487
> 
> 标签：regex

我有一种模式的字符串，例如

```
1\. ABC No 5
2\. PQR - XYZ
3\. ABC (PQR) 
```

有人可以指定一个正则表达式，它仅且仅删除屏幕开头的数字和句点并保持屏幕的其余部分不变吗？

*   从`1.`_`1\. ABC No 5`
*   从`2.`_`2\. PQR - XYZ`

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:21:58.557

这是一个应该起作用的替换表达式。

```
 s/^\d+\.// 
```

您没有提及您使用的是什么语言，因此实现将根据语言/API 公开正则表达式搜索和替换的方式而有所不同。例如，如果您一次处理一个输入行，在 PHP 中，您可以这样做：

```
$myVar = preg_replace('/^\d+\./', '', $myVar); 
```

在java中你可以这样做：

```
myVar = myVar.replaceFirst("^\\d+\\.", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:42:03.627

Perl:

```
while(<>) {
  print $_ unless /[^-0-9]/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:24:44.737

`Regex`: `^[0-9]+\.`

```
^ # Matches the start of the line

[0-9]* # Matches one or more digits

\. # Matches the period (escaped as . matches anything in regex) and the space 
```

Using `sed`:

```
$ cat file
1\. ABC No 5
2\. PQR - XYZ
3\. ABC (PQR)

$ sed -E 's/^[0-9]+\. //' file
ABC No 5
PQR - XYZ
ABC (PQR) 
```

Regex is not necessarily needed here however -

Using `cut`:

```
$ cut -d' ' -f2- file
ABC No 5
PQR - XYZ
ABC (PQR) 
```

Using `Awk`:

```
$ awk -F. '{print $2}' file
 ABC No 5
 PQR - XYZ
 ABC (PQR) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T18:27:19.680

in Perl

```
$cadena ="1111\. ABC No 5";
$cadena =~ s/^[\d\.]+//;
print $cadena; 
```

# c# - 使用 C# WebMethod 缓存 HTTP_POST jQuery Ajax 请求结果

> ID：13768787
> 
> 赞同：2
> 
> 时间：2012-12-07T18:19:51.057
> 
> 标签：c#, web-services, jquery, http-caching

这是我无法弄清楚的事情。

我有我希望客户端在浏览器中缓存的大型 JSON 数据集。我正在使用 jquery AJAX 调用 ac# web 方法。

```
[System.Web.Services.WebMethod] 
```

这是jQuery：

```
 $.ajax({
                url: "/Ajax/ItemAffinity.aspx/FetchAffinityItems?ItemID=" + escape($("#SearchSelectedPageID").val()),
                type: "POST",
                data: "{}",
                cache: true,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                //contentType: "application/json; charset=utf-8",
                success: function (data) {
                   //do cool stuff
                }
            }); 
```

无论我在 web 方法中在服务器上指定什么，HTTP HEADERS 总是看起来像这样：

```
Cache-Control   no-cache
Content-Length  919527
Content-Type    application/json; charset=utf-8
Expires -1 
```

我放入 web 服务的任何设置都会被立即忽略，如下所示：

```
 HttpContext.Current.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(1));
        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.ServerAndPrivate); 
```

Web 服务不适用于 HTTP GET，对吧？或者我应该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:54:16.110

为了最大程度地控制，您可以像这样设置缓存响应标头：

```
 <WebMethod()> _
    <ScriptMethod(UseHttpGet:=True)> _
    Public Function get_time() As String

        'Cache the reponse to the client for 60 seconds:
        Dim context As HttpContext = HttpContext.Current
        Dim cacheExpires As New TimeSpan(0, 0, 0, 60)
        SetResponseHeaders(context, HttpCacheability.Public, cacheExpires)

        Return Date.Now.ToString

    End Function

    ''' <summary>
    ''' Sets the headers of the current http context response.
    ''' </summary>
    ''' <param name="context">A reference to the current context.</param>
    ''' <param name="cacheability">The cachability setting for the output.</param>
    ''' <param name="delta">The amount of time to cache the output. Set to Nothing if NoCache.</param>
    ''' <remarks></remarks>
    Public Shared Sub SetResponseHeaders(ByRef context As HttpContext,
                                         cacheability As HttpCacheability,
                                         delta As TimeSpan)

        If Not IsNothing(context) Then
            Dim cache As HttpCachePolicy = context.ApplicationInstance.Response.Cache
            cache.SetCacheability(cacheability)

            Select Case cacheability
                Case HttpCacheability.NoCache
                    'prevent caching:
                    Exit Select
                Case Else
                    'set cache expiry:
                    Dim dateExpires As Date = Date.UtcNow
                    dateExpires = dateExpires.AddMinutes(delta.TotalMinutes)
                    'set expiry date:
                    cache.SetExpires(dateExpires)
                    Dim maxAgeField As Reflection.FieldInfo = cache.GetType.GetField("_maxAge", Reflection.BindingFlags.Instance Or Reflection.BindingFlags.NonPublic)
                    If Not IsNothing(maxAgeField) Then
                        maxAgeField.SetValue(cache, delta)
                    End If
            End Select
        End If

    End Sub 
```

然后使用 ajax GET 调用您的 web 服务，如下所示：

```
var postObj = {
    ItemID: 12
}

$.ajax({
    url: webserviceUrl,
    type: 'GET',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    data: postObj,
    success: function (reponse) {
        alert(response.d);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:35:06.640

WebMethod 属性上有一个属性，您可以设置缓存。我不确定这是否会在标头中设置缓存值。

[http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.71%29.aspx#vbtskusingwebmethodattributecacheduration](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.71%29.aspx#vbtskusingwebmethodattributecacheduration)

# ruby-on-rails - 如果用户已通过身份验证并授予 user_photos 权限，我如何将 Facebook 相册照片保存到我的服务器？

> ID：13768798
> 
> 赞同：0
> 
> 时间：2012-12-07T18:20:35.127
> 
> 标签：ruby-on-rails, facebook, upload, photo

我的 Facebook 应用程序向用户展示了他们 Facebook 相册中的一组照片。我正在尝试允许用户选择要上传到我的应用程序的照片，以存储在我的服务器上。我已经在 Ruby on Rails 中构建了该应用程序，并将其托管在 Heroku 上。计划使用 S3 存储桶来存储图像。Ruby 中是否有任何东西非常适合此任务，例如 CarrierWave Gem，或者可能在 JavaScript 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:36:33.287

如果使用carrierwave，您可以使用remote_location 选项，只需将Facebook 提供的URL 传递给图像。[https://github.com/jnicklas/carrierwave#uploading-files-from-a-remote-location](https://github.com/jnicklas/carrierwave#uploading-files-from-a-remote-location)

Carrier Wave 还支持雾，因此您与 amazon s3 的集成会更容易。

# php - 从服务器获取 JSON 时保留类型

> ID：13768799
> 
> 赞同：-3
> 
> 时间：2012-12-07T18:20:38.007
> 
> 标签：php, jquery, json

这是我的服务器端 PHP 脚本：

```
echo json_encode(
    array( 
        "1" => "foo",
        "2" => "bar"
    )
); 
```

索引是字符串。

我正在`$.ajax()`使用 jQuery 获取这个数组，并使用 Chrome 的开发人员工具，我可以看到它将索引解释为数值而不是字符串。

将 JSON 从服务器传递到客户端时，如何保留该字符串类型？还是在将 JSON 数据从服务器传输到客户端时，类型的概念完全丢失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:26:38.963

Strings can be numeric and strings, and even booleans, thanks to type coercion and duck typing (if it looks, walks, and quacks like a duck, it is a duck), since both are loosely typed languages. You should be just fine handling it like a string.

In the case of Chrome developer tools, you have a string that consists only of numeric characters. Therefore, it's also a numeric data type (it "looks like a duck").

Perhaps if you explain what, exactly, it is you're doing that isn't working, we could help you with a better way.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:23:40.250

~~这是因为在 PHP 中，javaScript 调用的对象是 php 中的数组。在 JavaScript 中，数组索引不能是字符串，它们必须是正整数。~~

~~如果您希望 JavaScript 将其解释为数组，请给它一个 0 索引并使索引为整数而不是字符串。~~

您的代码已经完成了您希望它执行的操作。键是字符串。

[http://jsfiddle.net/XC85h/](http://jsfiddle.net/XC85h/)

```
var jsonStr = '{"1":"foo","2":"bar"}';

var obj = JSON.parse(jsonStr);

for (key in obj) {
    console.log(typeof key, key); // string 1, string 2
}​ 
```

编辑（根据评论）
**永远不要依赖 JavaScript 对象的排序顺序，它可能因浏览器而异。**

# php - 向 2 个不同的收件人发送 2 个不同的电子邮件？

> ID：13768807
> 
> 赞同：0
> 
> 时间：2012-12-07T18:21:10.283
> 
> 标签：php, email

我有一个注册表单，允许用户在我的网站上注册并成为会员。到目前为止，一旦他们注册了他们的详细信息，这些信息就会进入数据库，并且他们会收到一封电子邮件以表示感谢。

我正在尝试复制脚本，以便我可以发送另一封电子邮件，让我知道用户何时注册并将其发送到我的电子邮件。

我正在尝试这样做，因为发送给用户的电子邮件包含一个随机生成的 md5 哈希码，我还需要在发送给我的电子邮件中发送给我，告诉我他们已经注册。

我已经设法将两封电子邮件发送到正确的电子邮件帐户。但是，发送给我的电子邮件让我知道用户已注册也被发送给用户并且我不希望它发送给他们？

谁能建议我哪里出错了？谢谢

向用户发送电子邮件的代码：

```
<?php

/**
 * ShuttleCMS - A basic CMS coded in PHP.
 * code generator - Used for allowing a user to generate a code
 * 
 * @author Dan <dan@danbriant.com>
 * @version 0.0.1
 * @package ShuttleCMS
 */
define('IN_SCRIPT', true);
// Start a session
session_start();

/*
 * Generates new code and puts it on database
 */

//Generate a RANDOM MD5 Hash for a code
$random_code=md5(uniqid(rand()));

//Take the first 8 digits and use them as the password we intend to email the user
$emailcode=substr($random_code, 0, 8);

//Encrypt $emailpassword in MD5 format for the database
$registrationcode=($emailcode);

// Make a safe query
$query = sprintf("UPDATE `ptb_registrations` SET `registration_code` = '%s' WHERE email = \"$email\"",
                    mysql_real_escape_string($registrationcode));

mysql_query($query)or die('Could not update members: ' . mysql_error());

?>

<?php

 $subjectconfirm = " Thanks for your Registration";
 $headersconfirm = "To: $email\r\n"; 
 $headersconfirm .= "From: siteindex.com <registrations@siteindex>\r\n";                                                                                                                                                                                                            
 $headersconfirm .= "Content-type: text/html\r\n"; 

  $sep = sha1(date('r', time()));
 $bodyconfirm = <<< EOF

(EMAIL BODY)

EOF;

 // Finally, send the email
 mail($email, $subjectconfirm, $bodyconfirm, $headersconfirm);

?> 
```

然后我复制这样的代码，但替换电子邮件地址。它可以很好地发送到我的电子邮件帐户，但是它将两封电子邮件都发送给用户，我不希望他们收到给我的电子邮件。

将电子邮件发送给我的代码：

```
<?php

    /**
     * ShuttleCMS - A basic CMS coded in PHP.
     * code generator - Used for allowing a user to generate a code
     * 
     * @author Dan <dan@danbriant.com>
     * @version 0.0.1
     * @package ShuttleCMS
     */
    define('IN_SCRIPT', true);
    // Start a session
    session_start();

    /*
     * Generates new code and puts it on database
     */

    //Generate a RANDOM MD5 Hash for a code
    $random_code=md5(uniqid(rand()));

    //Take the first 8 digits and use them as the password we intend to email the user
    $emailcode=substr($random_code, 0, 8);

    //Encrypt $emailpassword in MD5 format for the database
    $registrationcode=($emailcode);

    // Make a safe query
    $query = sprintf("UPDATE `ptb_registrations` SET `registration_code` = '%s' WHERE email = \"$email\"",
                        mysql_real_escape_string($registrationcode));

    mysql_query($query)or die('Could not update members: ' . mysql_error());

    ?>

    <?php

     $subjectconfirm = " Thanks for your Registration";
     $headersconfirm = "To: signups@siteindex.com\r\n"; 
     $headersconfirm .= "From: siteindex.com <signups@siteindex>\r\n";                                                                                                                                                                                                          
     $headersconfirm .= "Content-type: text/html\r\n"; 

      $sep = sha1(date('r', time()));
     $bodyconfirm = <<< EOF

    (DIFFERENT EMAIL BODY)

    EOF;

     // Finally, send the email
     mail($email, $subjectconfirm, $bodyconfirm, $headersconfirm);

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:25:41.553

You'll notice from the [mail manual page](http://php.net/manual/en/function.mail.php), the first parameter is where the email is sent to. You haven't changed it. You have only changed the header. In order to send an email to someone else, change:

```
mail($email, $subjectconfirm, $bodyconfirm, $headersconfirm); 
```

to:

```
mail('signups@siteindex.com', $subjectconfirm, $bodyconfirm, $headersconfirm); 
```

Of course, it is far more sensible to just BCC it to yourself instead of duplicating all this code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:27:22.063

I don't see the need to duplicate the code. Just send two emails:

```
$emails = 'youremail@email.com, theiremail@email.com';
mail($emails, $subjectconfirm, $bodyconfirm, $headersconfirm); 
```

Or BCC yourself:

```
$headersconfirm .= 'Bcc: youremail@email.com' . "\r\n"; 
```

Take a look [here](http://php.net/manual/en/function.mail.php).

# java - Android VMD MySQL 插入和显示对话框

> ID：13768810
> 
> 赞同：5
> 
> 时间：2012-12-07T18:21:21.277
> 
> 标签：java, php, android, android-asynctask, android-dialog

我正在尝试从 Android 应用程序进行简单插入。我可以`php`通过连接从浏览器运行我的脚本`?entry="Sample value from browser"`，但是当我从 Android 运行应用程序时，我没有插入。

这是我调用使用 JSON 并实现 AsyncTask 的插入类的地方：

```
package us.jtaylorok.android.sqlite.first;

import java.util.ArrayList;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.Toast;

public class RemoteInsert extends AsyncTask<Void, String,String >{

    protected String TAG;
    protected Context context;
    protected String input;
    protected ProgressDialog progressDialog;

    public RemoteInsert(String i,Context c){
        this.input = i;
        this.context = c;
    }

    protected void onPreExecute() {
        //ProgressDialog progressDialog; // = new ProgressDialog(context);

        //progressDialog=ProgressDialog.show(,"Please Wait..","Sending data to database", false);
        progressDialog=ProgressDialog.show(context,"Please Wait..","Sending data to database", false);
    }

    @Override
    protected String doInBackground(Void... params) {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            //HttpPost httppost = new HttpPost("http://localhost/index.php");
            //HttpPost httppost = new HttpPost("http://10.253.8.88/patient_data/patient_data.php");
            HttpPost httppost = new HttpPost("http://10.100.205.72/patient_data/patient_data.php");

            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("entry", "Input from Android"));

            httppost.setEntity(new UrlEncodedFormEntity(postParameters));                   
            HttpResponse response = httpclient.execute(httppost);
            Log.i("postData", response.getStatusLine().toString());
        } catch(Exception e) {
            Log.e(TAG, "Error:  "+e.toString());
        }  

        return "";
    }

    protected void onPostExecute(String result) {
        progressDialog.dismiss(); 
        Toast.makeText(context, "Finished", Toast.LENGTH_LONG).show(); 
    }
} 
```

这是我的 PHP 脚本：

```
<?php
    // mysql_connect("host","username","password");
    mysql_connect("localhost","user1","mypassword");
    mysql_select_db("test");

    $entry_value = $_REQUEST["entry"];
    $query = "INSERT INTO patientdata (entry) values (".$entry_value.");";
    if( !mysql_query($query) ) { 
        /*insert failed*/ 
    }

    mysql_close();
?> 
```

同样，如果我从浏览器中调用它，这将非常有效，但它会在实现之前引发异常`AsyncTask`。

我确实让 AVD 显示添加和删除，但是当我这样做时，我的*apache2* `access_log`或`error_log`. 有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:29:09.887

这不是这个特定问题的问题。问题是 php.ini 中的魔术引号设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:59:58.753

我认为您已将 php 脚本存储在本地服务器上。所以在初始化 HttpPost 时使用这个**10.0.2.2**而不是你机器的 ip 地址。它在 android 虚拟设备中的 localhost 等效项。

# java - 获取当前正在显示的 JEditorPane

> ID：13768818
> 
> 赞同：0
> 
> 时间：2012-12-07T18:21:39.933
> 
> 标签：java, swing, jtabbedpane, jeditorpane

我想知道是否有一种方法或方法可以让我显示当前的 JEditorPane。例如，我有一个 JFrame，可以在其中创建多个选项卡。每当创建选项卡时，都会创建一个新的 JEditorPane 对象，并且该窗格的内容会显示在选项卡中。我已经实现了一个 ChangeListener，当我打开一个新选项卡、关闭一个选项卡或在选项卡之间导航时，它目前只会获取当前选项卡的索引。我想做的是每当打开或导航到新选项卡时，我都想获取驻留在此选项卡上的当前 JEditorPane 对象。有什么方法可以实现吗？

对不起，如果问题有点模糊。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:50:00.927

做到这一点的最好方法是子类化`JPanel`并将您的自定义添加`JPanel`到选项卡式窗格中：

```
public class EditorPanel extends JPanel {

    private JEditorPane editorPane;

    // ...

    public EditorPanel() {
        // ...
        editorPane = new JEditorPane( ... );
        super.add(editorPane);
        // ...
    }

    // ...

    public JEditorPane getEditorPane() {
        return editorPane;
    }
} 
```

添加新选项卡：

```
JTabbedPane tabbedPane = ... ;
tabbedPane.addTab(name, icon, new EditorPanel()); 
```

然后当您需要使用选项卡式窗格访问它时：

```
Component comp = tabbedPane.getComponentAt(i);
if (comp instanceof EditorPanel) {
    JEditorPane editorPane = ((EditorPanel) comp).getEditorPane();
} 
```

这是维护单独列表并尝试将其与选项卡式窗格的索引一起维护的更好选择。

# java - Android：如何通过 android:onClick 在 custom_layout.xml 中为自定义对话框中的按钮添加事件处理程序？

> ID：13768819
> 
> 赞同：1
> 
> 时间：2012-12-07T18:21:40.370
> 
> 标签：java, android, eclipse, dialog

我是android开发的新手。我正在尝试通过在 layout.xml 中使用 android:onClick 为自定义对话框中的按钮设置事件处理程序。但是当我调试应用程序时，它说单击自定义对话框中的按钮时找不到源代码。但是当我在布局文件中使用事件侦听器而不是属性时它工作得很好。

这是一些代码

包含 button1 及以下的主要活动是该按钮的事件处理程序

```
public void onClickButton1(View v)
    {
        MyCustomDialog a = new MyCustomDialog(this);        
        a.show();       
    } 
```

这是 MyCustomDialog 类，另一个 java 文件

```
public class MyCustomDialog extends Dialog {

    Context m_context;
    public MyCustomDialog (Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        this.m_context = context;       
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
        this.setTitle("Custom Dialog");
        this.setContentView(R.layout.custom_dialog);
    }

    public void onClickButtonInDialog(View v)
    {
        AlertDialog a = new AlertDialog.Builder(this.m_context).create();
        a.setTitle("Ok");
        a.show();
    }
} 
```

最后一个是自定义对话框布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button_in_dialog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:onClick="onClickButtonInDialog"
        android:text="Add" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:29:17.200

这是不可能的。您必须像这样注册回调：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setTitle("Custom Dialog");
    View v = LayoutInflater.from(getContext()).inflate(R.layout.custom_dialog);
    this.setContentView(v);
    v.findViewById(R.id.button_in_dialog).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            onClickButtonInDialog(v);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:18:34.810

正如您[在此处看到的](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)，可以这样做。但是您必须将 onClick 处理程序放在您设置视图的同一活动的上下文中。他们没有真正详细（或根本没有）提到是否可以使用对话框上下文中的 onClick . 将侦听器放入您的活动中，然后像现在一样创建对话框。这样它就会注册监听器，你仍然会有你的自定义对话框。

# html - 如何使用 HTML-CSS 有条件地输出数据？

> ID：13768821
> 
> 赞同：2
> 
> 时间：2012-12-07T18:21:49.070
> 
> 标签：html, css, html-lists, conditional

我正在实现一个无序列表 ( `<ul><li>...</li></ul>`)，在其中显示一个链接 ( `<a>...</a>`)。在这个链接标签中，除了标题文本之外，我必须*有条件*地* 显示图像和短文本。

“完整”输出类似于以下内容：

```
<ul>
  <li>
    +------------------------+
    | +---+  Title           |
    | |   |                  |
    | +---+  Some short text |
    +------------------------+
  </li>
</ul> 
```

但是，由于上述输出是有条件构建的，因此可能没有显示图像或短文本。所以...

...如果图像不存在但短文本存在，那么输出应该类似于

```
 +------------------------+
 | Title                  |
 |                        |
 | Some short text        |
 +------------------------+ 
```

...如果短文本不存在但图像存在，那么输出应该类似于

```
 +------------------------+
 | +---+  Title           |
 | |   |                  |
 | +---+                  |
 +------------------------+ 
```

...如果图像和短文本都不存在，那么输出应该类似于

```
 +------------------------+
 | Title                  |
 +------------------------+ 
```

**我想在 HTML-CSS 标签属性上“播放”，而不是“直接”在“后面”/“生成”该输出的代码上“播放”。**我怎样才能做到这一点？

* * *

*注意 I ：* [jsfiddle.net/zF5Cw/2](http://jsfiddle.net/zF5Cw/2)中每个场景的“基本”结构。

*注二*：例如，我有问题：

*   在图像不存在时正确输出标签：在视觉上，每个`height`标签（和相关图像）几乎被前一个标签覆盖；`li``li`
*   `padding-left`在图像存在和不存在时正确输出“标题”和“一些短文本”；
*   ...

* * *

* 在幕后我有一个 JavaScript 代码，它有条件地将 HTML 添加到输出代码中：

```
var html;

html = "<a>";

if ( image ) { 
  html += "<img>...</img>"
}

if ( short_text ) { 
  html += "Some short text"
}

html += "</a>";

return html; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:24:25.747

此示例涵盖了您描述的所有四个场景。现场演示：http: [//jsfiddle.net/zF5Cw/3/](http://jsfiddle.net/zF5Cw/3/)

```
li {
    padding: 10px;
    border: 1px solid #000;
    margin: 10px;
    overflow: auto;
    width: 300px;
}
img,span{float: left;}
img{margin-right: 10px;}
span{width: 250px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:55:45.117

CSS 不包含可以更改标记的条件逻辑。您需要使用 JavaScript 来执行此操作。

# mysql - 轨道上的mysql2 Gem错误

> ID：13768824
> 
> 赞同：0
> 
> 时间：2012-12-07T18:22:19.910
> 
> 标签：mysql, ruby-on-rails, rubygems, gem

我想继续编写铁路应用程序，但是当我尝试启动服务器时出现以下错误`rails s`。

当我有一个全新的目录（它在那里使用 sqlite3）时，我的导轨安装似乎工作正常。我也可能安装了所有东西，xcode，自制软件，RVM ......

操作系统：OS X，1.8.2

有什么想法可以解决这个错误吗？

```
/Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error)
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
    from /Users/myself/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
    from /Users/myself/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/model_schema.rb:308:in `clear_cache!'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:418:in `_run__4072264347074867870__prepare__1617522906049658136__callbacks'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/myself/events/config/environment.rb:5:in `<top (required)>'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /Users/myself/events/config.ru:4:in `block in <main>'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/myself/events/config.ru:1:in `new'
    from /Users/myself/events/config.ru:1:in `<main>'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/server.rb:46:in `app'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/server.rb:70:in `start'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
    from /Users/myself/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:02:25.500

osx上的位置不同，查找/private/var/mysql/mysql.sock

您的选择是更改 database.yml 中的套接字值或在 /tmp/myslq.sock 创建符号链接

我更喜欢后者，因为这是一个常见问题。

# php - 用于重复大数据和数组处理的 PHP

> ID：13768825
> 
> 赞同：0
> 
> 时间：2012-12-07T18:22:20.460
> 
> 标签：php, sql, large-data

我的问题确实围绕着大量数据的重复使用。

我有大约 50mb 的数据需要在单个 php 页面执行期间重复交叉引用。使用带有表连接的 sql 查询最容易解决此任务。问题是我需要在很短的时间内处理大量数据以及执行此操作所需的查询数量。

我目前正在做的是将每个表的相关部分（通常超过 30% 或 10k 行）转储到一个数组中并循环。表连接总是在一个字段上，所以我建立了一个非常基本的“索引”来识别哪些行是相关的。

该系统工作。它已经在我的生产环境中使用了一年多，但现在我正试图从中挤出更多的性能。在我正在分析的一个特定页面上，第二高的总时间归因于循环通过这些数组的增量线。它的命中数为 130 万，总执行时间为 30 秒。这代表了大约 8200 个 sql 查询将执行的工作以实现相同的结果。

我正在寻找的是其他有过这种情况的人。我真的不敢相信我是第一个拥有大量需要用 PHP 处理的数据的人。

谢谢！

* * *

非常感谢在这里提供一些建议的每个人。看起来这里并没有像我希望的那样真正的银弹。我想我最终要做的是混合使用 mysql 内存表和某些版本的分页内存缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:29:15.590

好吧，我正在研究一种类似的情况，在这种情况下我有大量数据要处理，并且可以选择尝试通过 MySQL 查询来做同样多的事情，或者将其卸载到 PHP。

到目前为止，我的经验是这样的：

1.  PHP 比使用 MySQL 查询慢很多。

2.  MySQL 查询速度只有在我将逻辑塞进一个调用时才可以接受，因为调用之间的延迟很严重。

我对 PHP 循环处理少量数据的速度感到特别震惊。我一直在想/希望我做错了什么......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:46:42.233

这个解决方案很大程度上取决于你对数据做了什么，但我发现当你试图在列上查找给定值的行时，在数组键中工作的唯一值列会大大加快速度。这是因为 php 使用哈希表来存储快速查找的键。它比遍历数组或使用 array_search 快数百倍。但是没有看到代码示例很难说。

从评论中添加：

下一步是使用一些内存数据库。您可以在 mysql或[SQLite中使用](http://sqlite.org/inmemorydb.html)[内存表](http://dev.mysql.com/doc/refman/5.6/en/memory-storage-engine.html)。还取决于您控制多少运行环境，因为这些方法需要的内存比共享主机提供商通常允许的要多。由于分组、排序、聚合函数等，它可能还会简化您的代码。

# typescript - 导出的具有私有类型的函数参数

> ID：13768830
> 
> 赞同：4
> 
> 时间：2012-12-07T18:22:41.107
> 
> 标签：typescript

安装 Typescript 版本 0.8.1.1 后，我收到以下错误：“导出的函数参数具有或正在使用私有类型 'vs'”

在 0.8.1 版本中我没有问题。现在即使我卸载 0.8.1.1 并重新安装 0.8.1 问题仍然存在。代码是这样的：

```
import vs = module("app/framework/ViewStack");
export module Framework {
  export class ViewStacks {
        public static addViewStack( id: string, idContainer: string, 
                                    idParentContainer: string, idLoadingPanel: 
                                    string, loaded: bool ): vs.Framework.ViewStack {
        }
  }
}

In another file

export module Framework {
  export class ViewStack {
  }
} 
```

在 addViewStack 的 vs.Framework.ViewStack 返回类型中标记了错误。错误指出 vs.Framework.ViewStack 是私有的，但它是由 import 子句导入的。

顺便说一句，我使用的是 Visual Studio Web Express 2012，编译器命令是： tsc --sourcemap --module amd ...

如果我将返回类型更改为任何它，当然可以。什么都没有改变，它总是有效的。

每个定义导出变量的类或模块的类型为另一个模块导出的类的类型，都会发生错误。

你能帮助我吗 ？？？

提前比

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T01:20:10.407

这是解决方案[http://typescript.codeplex.com/discussions/405800](http://typescript.codeplex.com/discussions/405800)，您必须“导出导入”

# linq - 使用 EF 在 LINQ 中按日期差异过滤

> ID：13768832
> 
> 赞同：0
> 
> 时间：2012-12-07T18:22:42.800
> 
> 标签：linq, entity-framework, date

我需要过滤像这样的记录集

OrderShippedDate - 20 天 <-- 获取所有带有 ShippedDate 20 天前的订单

```
var orders = ctx.Orders.Where(p => p.OrderShippedDate == 20) <---??? not sure what I need here .ToList(); 
```

如何在 EF / LINQ 中进行日期差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:26:23.310

I would suggest you work out your parameters locally, and then pass those in. It's not clear from your description whether you mean *exactly* 20 days ago, *more* than 20 days ago, or *less* than 20 days ago, which makes it hard to give you concrete advice, but if it's "more than 20 days ago" you might use something like:

```
var upperBound = DateTime.Today.AddDays(-20);
var orders = ctx.Orders.Where(p => p.OrderShippedDate < upperBound); 
```

# oracle - oracle 中的 db2 SYSIBM 表

> ID：13768833
> 
> 赞同：1
> 
> 时间：2012-12-07T18:22:49.407
> 
> 标签：oracle, db2, migrating

请问，有谁知道，这个db2语句怎么可能重写到oracle数据库中？

```
SELECT * 
FROM SYSIBM.SYSPLANDEP 
WHERE BNAME = 'TABLE1' 
  AND DNAME = 'PLAN1' 
```

我认为 oracle 表可能是 ALL_DEPENDENCIES，但我不知道 BNAME 和 DNAME 对应的列

# php - 如何正确显示数组

> ID：13768840
> 
> 赞同：1
> 
> 时间：2012-12-07T18:23:15.703
> 
> 标签：php, arrays

我有以下数组：

```
array(6) {
  [0]=>
  string(4) "XXX1"
  [1]=>
  int(16)
  [2]=>
  string(4) "YYY1"
  [3]=>
  string(4) "XXX2"
  [4]=>
  int(632)
  [5]=>
  string(4) "YYY2"
} 
```

我想要这样的输出：

第一个 XXX - 第一个 int() - 第一个 YYY\n

第二个 XXX - 第二个 int() - 第二个 YYY\n

如何使用 while、for 或 foreach 来实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:20:34.377

像 Pe de Leao 一样，我不能 100% 确定我理解你想要的输出，但这里有两个候选人：

不检查 3 个完整的“集合”：

```
<?php
$flat = array(
    "XXX1",
    16,
    "YYY1",
    "XXX2",
    632,
    "YYY2"
);

for ($i = 0; $i < count($flat); $i += 3)
    echo "{$flat[$i]} - {$flat[$i + 1]} - {$flat[$i + 2]}\n";
?> 
```

是否检查 3 个完整的“集合”：

```
<?php
$flat = array(
    "XXX1",
    16,
    "YYY1",
    "XXX2",
    632,
    "YYY2",
    "XXX3",
    932
);

for ($i = 0; $i < count($flat) && ($i + 3) < count($flat); $i += 3)
    echo "{$flat[$i]} - {$flat[$i + 1]} - {$flat[$i + 2]}\n";
?> 
```

这些示例并非万无一失，例如它们做出假设，例如数组被数字索引而没有孔，但我希望这与您想要的足够接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:45:50.737

我不确切知道您正在寻找什么样的输出，但这会将它放在段落标签中：

```
$cnt = 0;
$out = '<p>';
foreach ($arr as $key => $value){
    $out .= $value.' - ';
    $cnt++;
    if ($cnt == 3){
        $cnt = 0;
        $out = substr($out, 0, -3).'</p><p>';
    }
}
$out = substr($out, 0, -3); 
```

# python - 马尔可夫决策过程说明

> ID：13768841
> 
> 赞同：1
> 
> 时间：2012-12-07T18:23:34.657
> 
> 标签：python, algorithm, markov

我正在为家庭作业实施价值迭代。它进展顺利，但我对某个部分感到困惑，特别是下面指示的行

```
//(taken from http://aima.cs.berkeley.edu/python/mdp.html)
def value_iteration(mdp, epsilon=0.001):
  "Solving an MDP by value iteration. [Fig. 17.4]"
  U1 = dict([(s, 0) for s in mdp.states])
  R, T, gamma = mdp.R, mdp.T, mdp.gamma
  while True:
      U = U1.copy()
      delta = 0
      for s in mdp.states:
          U1[s] = R(s) + gamma * max([sum([p * U[s1] for (p, s1) in T(s, a)])
                                    for a in mdp.actions(s)])
          delta = max(delta, abs(U1[s] - U[s])) //*****THIS LINE**************//
      if delta < epsilon * (1 - gamma) / gamma:
          return U 
```

我一般理解这条线的重点，但我是否需要将更新的实用程序与旧版本或最后更新的状态进行比较或什么？目前我所拥有的似乎正在工作（主要是：P），但我很困惑，因为其他版本的算法（例如[这个](http://artint.info/html/ArtInt_227.html)）具有 k <- k + 1 和 ∀s |Vk[s]-Vk-1[s] | < θ 这让我觉得我做错了。

这是我的代码：

```
grid = [[0,0,0],[0,None,0],[0,0,0],[0,-1,1]]

gamma = .9
epsilon = 0.001 #difference threshold
count = 0
while(True):
   delta = 0
   #walk through the set of states

   i = 0   
   while(i < 4):
       j= 0
       while(j < 3):
          if(grid[i][j] == None or grid[i][j] == 1 or grid[i][j] == -1):
              j = j +1
              continue
          temp =  grid[i][j] 
          grid[i][j] = -0.04 + (gamma * bellman(grid, i, j))
          delta = max(delta, abs(grid[i][j] - temp))

          j = j+1
      i = i+1

  if (delta < (epsilon * (1 - gamma) / gamma)): 
      break 
```

我得到以下输出：

```
0.5094143831769762  0.6495863449484525  0.795362242280654    1
0.39850269350488843 None                0.48644045209498593 -1
0.29643305379491625 0.25395638075084487 0.344787810489289    0.12994184490884678 
```

# php - 如何使您的自定义 php CMS 仅在某个域上工作一段时间？

> ID：13768844
> 
> 赞同：1
> 
> 时间：2012-12-07T18:23:39.023
> 
> 标签：php, content-management-system

我想防止将我的定制 CMS 从一个域转移到另一个域，并且我希望它只能在购买它的域上运行，并且只能在购买后的 1、2 年内使用。

代码生成部分不是问题，但如何防止它被黑客修改是最难的部分。

例如 vBulletin 保护之类的东西。（我知道它也可以无效）

如何在我用 php 编写的 CMS 中实现这样的东西？

我认为它需要在整个应用程序的各个地方传播变量检查并以某种方式屏蔽，因此依赖性不容易检测和删除。

我知道这是一个非常困难和困难的话题，所以我很欣赏一些方向，比如书籍、网络讨论或文章。

顺便提一句。连接到我的服务器并检查域是否正常不是一个选项，我的服务器可能已关闭，客户端也可能由于无法连接而关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:27:50.650

你可以做一些事情的组合..

1.  可以为新客户端域提供生成的许可证密钥，这些密钥对于您的软件运行所需的每个客户端安装都是唯一的。密钥应该为每个托管域绑定一个，并且应该远程存储在您的服务器上以及本地安装的客户端上。

2.  当您或其他人第一次安装 cms 时，需要输入许可证密钥并使用远程服务器进行验证。这应该足以满足初始设置时间。在远程数据库中存储有关服务器的一些信息。如果此远程过程失败，安装应该会失败。想出一些巧妙的方法来使其成为必要和必需的，例如获取要存储在数据库中的加密密钥。

3.  在安装期间或之后，您可以生成（或不生成）加密密钥，并在您的代码所需的应用服务器上的文件中存储唯一的内容。超级便宜的是创建文件 /MY-CUSTOM-CMS-LICENSE.txt ，其中包含纯文本密钥。这可以是稍后验证的另一个向量。如果您发现一个复制了您的 cms 的网站，您可以查看此 txt 文件。

4.  让您的软件时不时地呼叫您的服务器，然后发送密钥和一些服务器信息（IP、主机等）。它不必**依赖**于您的服务器即可运行。这意味着如果软件失败，您可以让软件运行。时不时打电话回家是非常有帮助的。例如，每 X 天在您的服务器上 ping 一个 url，如果您的服务器出现故障，只需让它在第二天进行回拨检查。这很方便的一个原因是，如果您的客户端将应用程序文件夹从一个域复制到另一个域以设置第二个非法站点，一旦他们运行 index.php 文件，它将调用 home。如果他们没有检查您的代码的每一行并且甚至不知道它是否这样做，他们将很容易被抓住。所有你需要做的就是检查一些可以说谁“打电话回家”的日志。

5.  为您的产品编写适当的[软件许可协议](http://www.vbulletin.com/license-agreement/)，并将其放在应用程序根目录中名为 LICENSE 的文件中。这将确保客户（及其开发人员）意识到复制和重用不是免费的。稍后如果有人复制它，你（或你的律师）可以指着文件说“你没读过这个生涩的男孩吗”

6.  使代码中的某些东西（或许多东西）对您的代码是唯一的。例如，默认情况下 wordpress 的管理员是 /wp-admin 并且[他们的应用程序中的几乎每个文件都以它开头，`wp-`](https://github.com/WordPress/WordPress)这使得它很容易被检测到。将整个应用程序添加到一个特殊文件夹中。将元标记添加到所有输出，例如`<meta name="generator" content="vBulletin 4.0.4" />`. 您可以将许多其他内容合并并写入您的应用程序中，这些内容可能会表明它是您的代码。关键是要拥有如此多的东西，使移除**所有东西**的工作成为一项艰巨的任务，或者只是让小偷感到厌烦。我认为没有人会疯狂到重构你所有的代码只是为了窃取它。如果他们确实删除了这些代码位并转售/重复使用它，那么您就有更强有力的诉讼理由。

7.  您可以编写一个脚本来抓取网络（呃），或者只是在谷歌上进行搜索，甚至设置[谷歌警报](http://www.google.com/alerts)以通知您是否找到了您在应用程序中放置的任何可检测方法（如 #3、#4、#5、 #6, #8)

8.  您可以购买像 www.maxcdn.com 这样的 CDN，并在其中托管一个 JavaScript 文件并将其放入您的代码中。`<script src="http://cms-headquarters.example.com/license.js">`因为它在 CDN 上，所以失败的可能性很小，如果它宕机一周也没关系，你需要做的就是检查谁没有访问你的服务器。

9.  混淆您的一些代码以增加烦人的威慑力。

**关于 vbulletin 是如何做到的：**

*   [http://www.sitepoint.com/forums/showthread.php?281666-How-does-the-vBulletin-License-work](http://www.sitepoint.com/forums/showthread.php?281666-How-does-the-vBulletin-License-work)
*   [https://www.vbulletin.com/forum/showthread.php/338346-Easy-Way-To-Find-Nulled-vBulletins](https://www.vbulletin.com/forum/showthread.php/338346-Easy-Way-To-Find-Nulled-vBulletins)

**最后**，这是一个试图提供部分解决方案的 PHP 类：[PADL (PHP Application Distribution License System)](http://www.phpclasses.org/package/2298-PHP-Generate-PHP-application-license-keys.html)

# sqlite - SQLite 多列插入/替换多连接

> ID：13768847
> 
> 赞同：0
> 
> 时间：2012-12-07T18:23:52.923
> 
> 标签：sqlite, select, join, insert, replace

抱歉标题不好。我有一个查询（如下）可以正确执行并按照我的意愿创建插入。但是，我想通过仅在三列的精确组合时插入来使其更智能。本质上，三列元组是一个主键，但我正在处理 sqlite 的单个主键的限制。

基本上下文 我有 4 个表：权限、角色、用户、操作权限将角色和用户连接到操作。Actions 表包含用户或具有角色的用户可以执行的可用任务列表。例如，如果 user_id = 1 可以执行 list_folder 操作 (action_id = 1)，那么权限表将有一个条目：(id=1, action_id=1, user_id=1, role_id=NULL)。同样，假设 owner_role (role_id=1) 可能具有执行 list_folder 操作 (action_id=1) 的权限，则权限条目可能是：(id=2, action_id=1, user_id=NULL, role_id=1)。

当我进行插入时，我想确保我还没有那个确切的组合（例如 action_id=1、user_id=NULL、role_id=1）。而且我不完全确定如何编写 sql 以便正确设置此设置。

这是我的基本插入语句。我需要提出一个插入和替换语句：

```
INSERT INTO permissions (
   action_id
   ,role_id
)
SELECT DISTINCT
   a.id as "action_id"
   ,r.id as "role_id"
   FROM tmp_permissions tmp
   LEFT OUTER JOIN actions a
       ON tmp.action_name = a.name
   LEFT OUTER JOIN roles r
       ON tmp.roles_name = r.name
   LEFT OUTER JOIN permissions p
       ON p.role_id 
```

以下是表的一些创建 sql 语句：

```
CREATE TABLE permissions (
id INTEGER NOT NULL, 
enabled INTEGER, 
action_id INTEGER, 
user_id INTEGER, 
role_id INTEGER, 
PRIMARY KEY (id), 
FOREIGN KEY(user_id) REFERENCES users (id), 
FOREIGN KEY(action_id) REFERENCES actions (id), 
FOREIGN KEY(role_id) REFERENCES roles (id)
);
CREATE TABLE actions (
id INTEGER NOT NULL, 
enabled INTEGER, 
name VARCHAR(50), 
permission_ids INTEGER, 
PRIMARY KEY (id), 
FOREIGN KEY(permission_ids) REFERENCES permissions (id)
);
CREATE TABLE roles (
id INTEGER NOT NULL, 
enabled INTEGER, 
name VARCHAR(50), 
permission_ids INTEGER, 
PRIMARY KEY (id), 
FOREIGN KEY(permission_ids) REFERENCES permissions (id)
);
CREATE TABLE users (
id INTEGER NOT NULL, 
enabled INTEGER, 
name VARCHAR(50), 
permission_ids INTEGER, 
PRIMARY KEY (id), 
FOREIGN KEY(permission_ids) REFERENCES permissions (id)
); 
```

这是我在使用它时用来将数据存储在表中的临时表：CREATE TABLE tmp_permissions(roles_name VARCHAR(50), action_name VARCHAR(50));

这里有一些数据：

```
#role|action
admin|setup
admin|debug
admin|login
admin|view_user
manager|view_employee
manager|enroll_employee
manager|login
employee|schedule
employee|login
customer|guest_login
customer|change_credentials
guest|guest_login 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:12:45.487

向表中添加`UNIQUE`约束：

```
CREATE TABLE permissions(
    ... ,
    UNIQUE (action_id, user_id, role_id)
) 
```

然后，您可以使用任何[冲突解决算法](http://www.sqlite.org/conflict.html)来处理重复项。

# ruby-on-rails - Rails：如何使用固定数据和动态数据对对象进行建模

> ID：13768848
> 
> 赞同：2
> 
> 时间：2012-12-07T18:23:51.960
> 
> 标签：ruby-on-rails, mongodb, database-design, mongoid, arbor.js

我正在建立一个带有用户数据库的站点。我正在使用[arbor.js](http://arborjs.org/)为每个用户构建一个图表。该图是一个带有边缘和节点的树状结构，看起来像这样（我准备好了一张图像，但显然还没有足够的声誉）：

```
 vehicle
             /     \
            /       \
          car      truck
          /
         /
       sedan 
```

并由以下 JSON 表示：

```
{
   "nodes":{
      "vehicle":{
         "color":"black",
         "label":"vehicle"
      },
      "car":{
         "color":"orange",
         "label":"car"
      },
      "truck":{
         "color":"red",
         "label":"truck"
      },
      "sedan":{
         "color":"red",
         "label":"sedan"
      }
   },
   "edges":{
      "vehicle":{
         "car":{
            "weight":5,
            "directed":true,
            "color":"orange"
         },
         "truck":{
            "weight":5,
            "directed":true,
            "color":"red"
         }
      },
      "car":{
         "sedan":{
            "weight":2,
            "directed":true,
            "color":"orange"
         }
      }
   }
} 
```

每个图都将始终具有一个带有动态节点和边的对象`nodes`。`edges`它们各自的属性（`color`、`label`等`weight`）将被修复。

我试图弄清楚如何最好地为每个用户建模这些数据。我将 Rails 与 MongoDB（Mongoid）一起使用，因为我知道 MongoDB 可以将对象作为文档保存在数据库中。我很确定每个用户都会有一个我可以定义的图形模型，但除此之外，我不确定如何处理节点和边。

我猜该解决方案将涉及`has_many`,`embeds_many`或可能`serialize`，但我不清楚如何将这些与固定数据和动态数据混合使用。

此外，最好按照上面的方式检索数据，这样我可以在从磁盘加载图表时轻松创建图表。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:22:14.877

如果您只需要为每个用户执行图形操作。你可以遵循这个模型。

```
{
"nodes": [{"type": "vehicle", "color":"black", "label": "vehicle"}, 
          {"type": "car", "color":"orange", "label": "car"},
          {"type":"truck", "color":"red", "label":"truck"},
          {"type": "sedan", "color":"red", "label":"sedan"}
         ],
"edges": {
    "vehicle": [
                  {"type": "car", "weight": 5, "color": "orange"}, 
                  {"type": "truck", "weight": 5, "color": "red"}
               ],
    "car": [
              {"type": "sedan", "weight": 2, "color": "orange"}
           ],
    "sedan": [],
    "truck":: []
} 
```

就像您正在为边缘存储多图一样。此外，它是否是双向的也是自我暗示的。对于要独立处理的单个用户的图形，这是一个非常自然的模型，您可以使用。

告诉我它是否符合您的要求。此外，除非您指定要对集合执行哪种查询，否则无法建议模型。

此外，如果您正在开始您的项目，您可以探索一些图形数据库以及[neo4j](http://www.neo4j.org)

# jquery - 如何通过 jQuery 检查图像何时重新加载并更改其 src 属性

> ID：13768849
> 
> 赞同：2
> 
> 时间：2012-12-07T18:23:55.983
> 
> 标签：jquery

我有以下函数检查图像标签上的 ID，检测图像本身是否加载到页面上。它在页面最初加载时第一次工作......

```
jQuery(function($) {    
    $('#imgLargeImageImage').bind('load', function() {
    console.log('new image loaded: ' + this.src);
    });
}); 
```

但是，每次图像 src 属性发生变化时，我如何继续编写 console.log 呢？

当另一个 java-script 事件被触发时，图像属性会动态变化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:27:26.380

即使不是每个浏览器都支持检查 DOMAttrModified。这是一篇解释事件的好帖子 - [http://darcyclarke.me/development/detect-attribute-changes-with-jquery/](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)在这篇文章中还有一些很好的信息 -[是否有可以在 webkit 中使用的 DOMAttrModified 的替代品](https://stackoverflow.com/questions/1882224/is-there-an-alternative-to-domattrmodified-that-will-work-in-webkit)

# c# - c#/asp.net - 如何捕捉“System.Web.HttpException：请求超时”？

> ID：13768850
> 
> 赞同：2
> 
> 时间：2012-12-07T18:24:01.333
> 
> 标签：c#, asp.net, itextsharp, httprequest

在我的 asp.net/c# 项目中，我使用 iTextsharp dll 从许多 pdf 文档中读取文本，但有时我会收到此错误

System.Web.HttpException：请求超时。

但这样做的代码是：

```
 public static bool does_pdf_have_keyword(string keyword, string pdf_src) 
    {
        try
        {
            PdfReader pdfReader = new PdfReader(pdf_src);
            string currentText;
            int count = pdfReader.NumberOfPages;
            for (int page = 1; page <= count; page++)
            {
                ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
                currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);
                if (currentText.IndexOf(keyword, StringComparison.OrdinalIgnoreCase) != -1) return true;
            }
            pdfReader.Close();
            return false;
        }
        catch
        {
            return false;
        }
    } 
```

那么为什么页面在 try catch 并且 catch 应该捕获所有内容时会进入未处理的异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:48:26.867

我认为你`try`没有捕捉到这个异常的原因是你得到的异常不是从你的代码本身抛出的，而是从服务器抛出的。

这样想：

*   您的代码运行良好，只是需要很长时间。
*   服务器监控请求花费了多长时间，终止请求并抛出异常。

所以你的代码实际上并没有抛出那个异常。

现在，如果您想了解它或记录它，您可以`Application_Error`在文件中使用该方法`Global.asax`（假设您可以访问它，我不确定它如何与 SharePoint 一起使用）。

例如，在我的一个 Web 项目中，我想记录所有错误，即使是没有被捕获的错误。所以我做的是这样的：

```
protected void Application_Error(object sender, EventArgs e) {
    //Log ALL uncaught exceptions
    Exception exc = Server.GetLastError();
    if (exc is HttpUnhandledException) {
        exc = Context.Error.InnerException;
    }
    //Log error here
} 
```

我不确定除了记录它之外你还能做什么。我不知道这发生在页面生命周期的哪个位置，所以我不确定你是否可以做一些事情，比如获取当前的 HTTP 请求对象并重定向用户。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:40:52.207

您正在捕获异常，但是，因为它是 ThreadAbortException，所以框架会自动重新抛出它。请参阅[此处](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)了解更多信息。

问题是您的 PDF 关键字搜索代码（有时）花费的时间超过了指定的 HTTP 执行超时时间。我不知道 Sharepoint 的默认超时时间是多少，但您应该可以增加它。

# php - 当您在 iframe 中时获取当前网址

> ID：13768851
> 
> 赞同：-1
> 
> 时间：2012-12-07T18:24:03.037
> 
> 标签：php

我制作了一个包含 iframe 的页面。

iframe 中的页面必须从包含 iframe 的页面获取当前 url。

有谁知道我必须做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:34:53.313

您可以采用两种方法：Javascript 方法和 PHP 方法。

## JAVASCRIPT

*仅当 iframe 与父页面位于同一域或您设置了允许子域访问父域的 XXS 规则时才有效*

假设您已经满足上述条件，您可以通过抓取`location.href`父窗口的属性，使用 Javascript 访问父页面 url：

```
alert('The parent window url is: '+window.top.location.href); 
```

您也可以使用`window.parent.location.href`.

如果 iframe 与父域是不同的域，那么由于跨域脚本规则，除非您覆盖它们，否则这将不起作用。如果您控制这两个域，则可以为父域创建跨域脚本规则，专门允许从 iframe 的域 ( [http://www.w3.org/TR/access-control/](http://www.w3.org/TR/access-control/) ) 进行访问。完成后，您可以使用上面的代码。

## PHP 方法

*有效，但依赖于您控制父页面*

或者，如果父页面具有静态 URL，您可以将其作为`_GET`变量传递给 iframe：

**家长**

```
<iframe src="/iframe/url.php?parent_src=<?php echo urlencode($_SERVER['REQUEST_URI']);?>"></iframe> 
```

**孩子**

```
<?php $parent_url = urldecode($_GET['parent_src']); ?> 
```

您现在可以使用`$parent_url`变量中的父 URL：

```
<? echo "The parent's URL is: http://thedomain.com".$parent_url;?> 
```

# php - PHP标头位置工作但不重定向

> ID：13768854
> 
> 赞同：-4
> 
> 时间：2012-12-07T18:24:13.893
> 
> 标签：php

嗨，我使用此代码使用 ajax 发送数据，当我使用此 php 音乐站点工作时，我使用音乐站点进行定位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:28:41.267

请记住，header() 必须在发送任何实际输出之前调用，无论是通过普通 HTML 标记、**文件**中的空白行还是从 PHP 发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:29:14.033

这可能是个问题。

```
header("Location: http://www.example.com");    
echo "Mesaj";    
exit; 
```

您决定重定向后立即发送内容。

这是你应该做的：

```
header("Location: http://www.example.com/?m=Mesaj"); 
exit; 
```

# c# - 目录根文件夹有空间时找不到相对 MEF 路径？

> ID：13768856
> 
> 赞同：0
> 
> 时间：2012-12-07T18:24:17.870
> 
> 标签：c#, .net-4.0

我正在获取我的 MEF 特定 dll，如下所示：

```
string exeFile = (new Uri(Assembly.GetEntryAssembly().CodeBase)).AbsolutePath;

string exeDir = Path.GetDirectoryName(exeFile);

using (DirectoryCatalog catalog = new DirectoryCatalog(Path.Combine(exeDir,"Custom")))
{
   using (CompositionContainer container = new CompositionContainer(catalog))
   {

       container.ComposeParts(this);

   }
} 
```

如果我在开发中，这可以工作，但是如果我构建并获取构建输出并将其放在一个名为 的文件夹中`c:\test 1`，当我从 运行应用程序时`c:\test`，它会说它找不到`c:\test 1\custom`目录。

与`Custom`文件夹相同路径的文件夹`EXE`

我注意到，只有当directoy中有一个空格时它才能找到它`test 1`，但如果它只是`test1`

如果我用空格运行它，我会收到错误：

`Could not find part of the path 'C:\TEST%202\CUSTOM\'.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:18:03.840

`Uri.UnescapeDataString`工作了吗？

我使用如下：

```
using (DirectoryCatalog catalog = new DirectoryCatalog(Uri.UnescapeDataString(path)))... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:44:58.727

尝试这个：

```
 string exeFile = Assembly.GetEntryAssembly().Location;
 string exeDir = Path.GetDirectoryName(exeFile); 
 string path = Path.Combine(exeDir, "Custom");

 using (DirectoryCatalog catalog = new DirectoryCatalog(path))
 {
       using (CompositionContainer container = new CompositionContainer(catalog))
       {
          container.ComposeParts(this);
       }
 } 
```

您应该使用 Location 而不是 CodeBase ( [msdn](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.codebase.aspx) )。

MSDN 备注：

> 要获取加载的包含清单的文件的绝对路径，请改用 Assembly.Location 属性。

# javascript - 如何使 HTML 正确呈现到 ExtJS 选项卡中？

> ID：13768859
> 
> 赞同：2
> 
> 时间：2012-12-07T18:24:24.203
> 
> 标签：javascript, plugins, extjs4

我正在开发一个简单的基于 JavaScript 的插件架构，它允许来自任何框架（jQueryUI、ExtJS 等）的任何 JavaScript 控件。插入并在任何网页上重复使用。我下面的插件恰好使用 ExtJS 4。

第一个插件在第一个选项卡中呈现良好。但是，由于页面加载时第二个选项卡尚未呈现，**因此第二个插件（也是一个网格）首先呈现到文档正文，然后在选项卡内正确呈现（HTMLElement/div 被移动）选项卡被选中**。我希望在选项卡内呈现之前隐藏插件内容。另外，当它确实渲染时（选择选项卡时），除非我调整列大小，否则水平滚动条不会显示。

任何想法如何解决这一问题？

**想法：**使用 contentEl 以外的东西；利用各种 ExtJS 配置选项；改变我的架构。

*这是插件代码：*

```
(function(MyNamespace) {
  var gridDataStore = ...

  MyNamespace.Plugin.Chart = MyNamespace.Plugin.extend({
    return {
      initialize: function() {
        // ...
      },

      render: function() {
        var stockGrid = Ext.create('Ext.grid.Panel', {
          autoRender: true,
          autoShow: true,
          store: gridDataStore,
          header: false,
          stateId: 'stateGrid',
          columns: [
            {text: 'Symbol',      width: 75,  sortable: true, dataIndex: 'symbol'},
            {text: 'Description', width: 200, sortable: true, dataIndex: 'description'},
            {text: 'Quantity',    width: 75,  sortable: true, dataIndex: 'quantity'},
            {text: 'Last Price',  width: 85,  sortable: true, dataIndex: 'last_price'}
          ],
          viewConfig: {
            stripeRows: true,
            enableTextSelection: true
          }
        });

        return stockGrid.getEl().dom;
      }
    };
  }
})(MyNamespace); 
```

*这是使用插件的代码：*

```
var chart = new MyNamespace.Plugin.Chart();
var anotherPlugin = new MyNamespace.Plugin.Another();

var stocksWindow = Ext.create('Ext.Window', {
  title: 'Stocks',
  width: 600,
  height: 450,
  layout: 'fit',
  items: [
    Ext.create('Ext.tab.Panel', {
      activeTab: 0,
      items: [{
        title: 'Chart',
        autoScroll: true,
        contentEl: chartPlugin.render()  // RENDER FIRST PLUGIN IN FIRST TAB
      },{
        title: 'Something Else',
        autoScroll: true,
        contentEl: anotherPlugin.render()  // RENDER SECOND PLUGIN IN SECOND TAB
      }]
    })
  ]
}); 
```

我可以将它添加到一个不可见的容器中，但这样做感觉很脏：

```
var container = document.createElement('div');
document.getElementsByTagName('body')[0].appendChild(container);
container.style.visibility = 'hidden';

var stockGrid = Ext.create('Ext.grid.Panel', {
  ...
  renderTo: container
  ...
}); 
```

[这是一个例子](http://jsfiddle.net/chaddjohnson/NVfRH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:44:41.147

这是您的代码的一些问题。

你所说的插件不是插件，它们只是`Ext.grid.Panel`. 插件是为 . 添加功能的东西`Ext.Component`，但这不是`Stocks`正在做的事情。这就是我们所说的预配置类。

这就是我要做的，只需将`MyNamespace.Plugin.Stocks`其设为 的子类`Ext.grid.Panel`，您现在可以轻松地将它们作为 a 的项目传递`Ext.tab.Panel`。确保重命名它，它不是插件。

通过为您的小部件子类提供`alias: 'widget.stock-grid'`，您可以只使用对象定义来创建它们，而不必实例化它们，框架将只在需要时才渲染它（选项卡被激活）

```
 Ext.create('Ext.tab.Panel', {
            activeTab: 0,
            items: [{
                title: 'Stocks',
                autoScroll: true,
                xtype: 'stock-grid'
            },{
                title: 'Orders',
                autoScroll: true,
                xtype: 'stock-grid'
            }]
        }) 
```

使用托管布局时，您不能简单地将节点复制到另一个容器中，因为您复制到其中的节点不会有托管布局。

这是您的代码的修改版本，其编写方式更像 Ext-JS 的预期。[http://jsfiddle.net/NVfRH/10/](http://jsfiddle.net/NVfRH/10/)

您可以查看生成的 HTML，您会注意到订单下的网格仅在您激活该选项卡时才会呈现。

您还应该注意到您的网格没有正确调整自己的大小以填充窗口，我的代码修复了这个问题，因为它们正确放置在布局管道中并服从`fit`布局。

**剩下的问题**

*   您的网格共享一个商店，请注意，当您对其中一个进行排序时，另一个也会进行排序，因此您不能将它们进行不同的排序。
*   您正在使用 a `stateId`，但随后您创建了两个具有相同的实例`stateId`，所有 stateId 必须是唯一的

最后，我必须问，当查德约翰逊将他的名字改名为查德奥乔辛科时，你真的松了一口气吗？:)

# html - Prevent deep-linking HLS stream in video element

> ID：13768862
> 
> 赞同：1
> 
> 时间：2012-12-07T18:24:53.923
> 
> 标签：html, html5-video, http-live-streaming, deep-linking

I've looking for practical ways to prevent deep-linking of an HLS stream in a HTML element. I can add a token authorization, where the token expires after a few minutes, but the issue with HLS is that there are sub-playlists that need to be protected to. Someone could easily get the sub-playlist URL and embed that on a different site.

To my knowledge I can't control how the player fetches the sub-playlists or the TS segment chunks.

So does anyone know if this is at all posible, maybe I'm missing something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:23:04.090

您可以对内容使用 AES 加密，然后对密钥文件使用令牌授权。

# objective-c - 从您的应用程序启动 Facetime？

> ID：13768869
> 
> 赞同：10
> 
> 时间：2012-12-07T18:25:47.177
> 
> 标签：objective-c, ios, facetime

我看到您可以通过以下方式从您的应用程序启动 FaceTime

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"facetime://tel-number"]]; 
```

我也在读到，因为没有正式公开的 FaceTime API，苹果会拒绝你。

有谁知道这个拒绝谈话是否属实？PAIR 有这个功能，他们从来没有被拒绝过。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-04T19:51:38.770

这现已记录在案且合法： [https ://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/FacetimeLinks/FacetimeLinks.html#//apple_ref/doc/uid/TP40007899-CH2-SW1](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/FacetimeLinks/FacetimeLinks.html#//apple_ref/doc/uid/TP40007899-CH2-SW1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T12:10:04.430

我的应用因使用 FaceTime 网址而被拒绝。这是我在解决中心从 Apple 收到的部分回复。

> 我们在您的应用中发现了以下非公共 API： 具体来说，您的应用使用了 FaceTime URL 方案，该方案未记录在案。
> 
> 如果您在源代码中定义了与上述 API 同名的方法，我们建议您更改方法名称，以便它们不再与 Apple 的私有 API 冲突，以避免您的应用程序在以后的提交中被标记。

这是对先前版本的更新。第一个版本没有任何问题被接受。由于上述原因，现在更新已被拒绝。看来我现在必须在没有 FaceTime 的情况下发布应用程序。

**编辑：**

现在在第三方应用程序中使用 FaceTime 网址是合法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:31:00.847

作为一般规则，如果您使用未记录的 API 调用并且苹果抓住了您，他们将拒绝您的应用程序。原因是它们可能会更改您在新的 IOS 更新中使用的 API 调用，从而导致您的应用程序崩溃或无法正常工作。您可以尝试使用未记录的 API 提交并希望 Apple 允许它通过，但正如我所说，您冒着 Apple 更改此 api 调用或将来将其完全从操作系统中删除的风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T18:39:49.287

我看不出有什么理由会被拒绝，特别是如果已经有一个应用程序使用了这个功能。[App Store Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)是确定您的应用程序是否会被拒绝的最佳方法，我没有看到任何适用于您的情况的内容。

当然，Apple 可以为所欲为，所以唯一确定它会被接受的方法就是提交它，但我非常怀疑你会遇到问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-22T17:27:39.640

官方可以使用原生应用 URL 字符串进行 FaceTime 视频通话：

```
facetime:// 14085551234
facetime://user@example.com 
```

请参考链接：[https ://developer.apple.com/library/archive/featuredarticles/iPhoneURLScheme_Reference/FacetimeLinks/FacetimeLinks.html](https://developer.apple.com/library/archive/featuredarticles/iPhoneURLScheme_Reference/FacetimeLinks/FacetimeLinks.html)

尽管所有设备都支持此功能，但您必须对 iOS 10.0 及更高版本的代码稍作更改，因为不推荐使用 openURL(_:)。

[https://developer.apple.com/documentation/uikit/uiapplication/1622961-openurl?language=objc](https://developer.apple.com/documentation/uikit/uiapplication/1622961-openurl?language=objc)

请参考下面的代码了解当前和回退机制，这样它就不会被 Appstore 拒绝。

```
 -(void) callFaceTime : (NSString *) contactNumber
      {
          NSURL *URL = [NSURL URLWithString:[NSString 
              stringWithFormat:@"facetime://%@",  contactNumber]];
        if (@available(iOS 10.0, *)) {
              [[UIApplication sharedApplication] openURL:URL options:@{} 
            completionHandler:^(BOOL success)
            {
              if (success)
            {
                NSLog(@"inside success");
            }
             else
            {
               NSLog(@"error");
             }
          }];
       } 
       else {
       // Fallback on earlier versions

             NSString *faceTimeUrlScheme = [@"facetime://" 
         stringByAppendingString:contactNumber];
        NSURL    *facetimeURL       = [NSURL URLWithString:faceTimeUrlScheme];

    // Facetime is available or not
        if ([[UIApplication sharedApplication] canOpenURL:facetimeURL])
        {
            [[UIApplication sharedApplication] openURL:facetimeURL];
        }
         else
        {
           // Facetime not available
           NSLog(@"Facetime not available");
        }   
    }
  } 
```

在contactNumber 中传递电话号码或appleid。

```
 NSString *phoneNumber = @"9999999999";
   NSString *appleId = @"abc@gmail.com";
   [self callFaceTime:appleId]; 
```

[客观-c](/questions/tagged/objective-c "显示标记为“objective-c”的问题") [ios](/questions/tagged/ios "显示标记为“ios”的问题")

# iis - 如何设置站点/应用程序以在 Windows Azure 上共享相同的应用程序池

> ID：13768877
> 
> 赞同：1
> 
> 时间：2012-12-07T18:26:19.570
> 
> 标签：iis, azure, application-pool, azure-web-roles

我正在使用 Windows Azure 在同一个 Web 角色中托管网站和 Web 服务。问题是对于每个站点/应用程序，在 IIS 上创建了一个单独的应用程序池。有没有办法让它们共享一个应用程序池？

这是我的实际 csdef，我在 IIS 中有三个不同的应用程序池（1x 用于`Virtual Application`，1x 用于站点`AppWS`，1x 用于站点`Web`）

```
<WebRole name="Orchard.Azure.Web" vmsize="ExtraSmall">
<Sites>
  <Site name="Web">
    <VirtualApplication name="VAppWS" physicalDirectory="..\..\..\AppWS" />
    <Bindings>
      <Binding name="Binding80" endpointName="Endpoint80" />
      <Binding name="Binding443" endpointName="Endpoint443" />
    </Bindings>
  </Site>
  <Site name="AppWS" physicalDirectory="..\..\..\AppWS">
    <Bindings>
      <Binding name="Binding444" endpointName="Endpoint444" />
    </Bindings>
  </Site>
</Sites>
<Endpoints>
  <InputEndpoint name="Endpoint80" protocol="http" port="80" />
  <InputEndpoint name="Endpoint443" protocol="https" port="443" certificate="ssl.root" />
  <InputEndpoint name="Endpoint444" protocol="https" port="444" certificate="ssl.ws" />
</Endpoints>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:33:22.210

我不知道指定应用程序池的任何方法，因此您必须在 IISConfigurator 完成其工作并重新分配应用程序池后运行一些代码。您可以使用 Azure 启动任务，但不幸的是它运行得太早 - 在 IISconfigurator 之前。

看看这个解决方法：http: [//mvolo.com/configure-iis-websites-windows-azure-startup-tasks-appcmd/](http://mvolo.com/configure-iis-websites-windows-azure-startup-tasks-appcmd/)

他创建了一个特殊的异步任务，在 IISConfigurator 之后运行初始化命令。init 命令可能是这样的——它将所有应用程序池分配给一个新创建的应用程序池：

```
%windir%\system32\inetsrv\appcmd add apppool /name:MyApplicationPool /managedRuntimeVersion:v4.0
%windir%\system32\inetsrv\appcmd list app /xml | %windir%\system32\inetsrv\appcmd set app /in /applicationPool:MyApplicationPool 
```

另一种方法可能是使用 Microsoft.Web.Administration 程序集在特殊的 webapp 中进行重新分配。

看一下这个例子：[http ://www.wadewegner.com/2011/01/programmatically-sharing-the-apppool-identity-in-a-windows-azure-web-role/](http://www.wadewegner.com/2011/01/programmatically-changing-the-apppool-identity-in-a-windows-azure-web-role/)

# c# - converting .net graphics to java

> ID：13768888
> 
> 赞同：1
> 
> 时间：2012-12-07T18:26:48.960
> 
> 标签：c#, java, graphics

I was trying to convert this code from .NET to Java, but I couldn't convert these 4 lines. Please someone give me a suggestion how to convert this code:

```
this.pbSubSequence = (Image) new Bitmap(this.pbSubSequence.getWidth(),
                this.pbSubSequence.getHeight());
Image image = this.pbSubSequence.Image;
Graphics graphics = Graphics.FromImage(this.pbSubSequence.Image); 
```

(`pbSubSequence` is a panel; I have four panels in this code and I have to draw sort of graph of ecg in all four of them which will be done by:

```
g.draw(new Line2D.Float(100f,100f,500f,500f) 
```

(this line would run in a `for` loop)

Can someone help me write these lines in Java?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:38:11.247

要在 Java 中创建位图，请使用：[BufferedImage()](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#BufferedImage%28int,%20int,%20int%29)

要从此图像创建图形，请使用[createGraphics()](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#createGraphics%28%29)

我无法弄清楚你的 C# 代码的意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:03:24.707

那天我尝试了这段代码，我几乎得到了我想要的

```
BufferedImage image=new BufferedImage(pbSubsequence.getWidth(), pbSubsequence.getHeight(), BufferedImage.TYPE_3BYTE_BGR);
            JLabel l=new JLabel(new ImageIcon(image));
            Graphics graphics = image.getGraphics();
            Graphics2D g = (Graphics2D) graphics;
            pbSubsequence.add(l); 
```

其中pbSubsequence是一个JPanel。所以我能够将代码从.net转换为java。仍然留下测试部分，所以不能确定答案是否正确。谢谢大家的帮助

# java - JodaTime 夏令时错误

> ID：13768891
> 
> 赞同：0
> 
> 时间：2012-12-07T18:26:58.713
> 
> 标签：java, jodatime, dst

我想从 ISO8601 字符串（例如，`2012-11-05T07:00:00+0000`）创建一个 DateTime 对象。这是代码：

```
...
DateTime day = new DateTime(dateStr);
System.out.println(dateStr + "=>" + day); 
```

我得到了这些结果：

```
...
2012-11-04T07:00:00+0000=>2012-11-04T00:00:00.000-07:00
2012-11-05T07:00:00+0000=>2012-11-04T23:00:00.000-08:00
2012-11-06T08:00:00+0000=>2012-11-06T00:00:00.000-08:00
... 
```

`11-04`并且`11-06`是正确的，但是`11-05`是错误的。如何解决？我在北美的西海岸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:30:51.533

11-05 哪里错了？11 月 4 日当地时间凌晨 2 点（即 UTC 上午 9 点），[西海岸时间](http://www.timeanddate.com/worldclock/timezone.html?n=137)从 UTC-7 变为 UTC-8。

现在 11 月 5 日上午 7 点 UTC，这是您的第二行，*在*那个时间点之后，因此它是 UTC-8 是正确的......因此当地时间是 11 月 4 日晚上 11 点，如图所示。

Joda Time 就在这里（不出所料）。

# python - 使用 Django 和 Gunicorn 在父级中运行启动代码

> ID：13768894
> 
> 赞同：4
> 
> 时间：2012-12-07T18:27:12.427
> 
> 标签：python, django, hook, startup, gunicorn

在 Django 开始侦听传入连接之前，我需要在 Django 应用程序启动时运行我的代码。在第一个 HTTP 请求上运行我的代码还不够好。当我使用 Gunicorn 时，我的代码必须在父进程中运行，然后再分叉。

[https://stackoverflow.com/a/2781488/97248](https://stackoverflow.com/a/2781488/97248)在 Django 1.4.2 中似乎不起作用：在`__init__`收到第一个请求之前，它不会运行中间件的方法。将代码添加到`urls.py`.

快速谷歌搜索没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-28T07:42:29.327

我自己也遇到过这个问题，解决方法是基本上将命令链接起来以保证执行和正确的顺序：

由 systemd、supervisord 或任何其他此类系统启动的脚本：

```
#!/bin/sh
python manage.py my_custom_command && gunicorn project.wsgi $@ 
```

创建您自己的自定义 django 命令，然后就可以开始使用了。[如果您在命令中禁用健全性检查（`requires_system_checks`并`requires_migrations_checks`设置为`False`）](https://docs.djangoproject.com/en/1.11/howto/custom-management-commands/#attributes)，您可以获得一些加速。

为了使事情更通用，您可以创建一个“启动”信号，您可以将任意函数连接到该信号，然后从这个自定义命令发出信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-14T22:11:38.927

这是旧的，但在 Gunicorn 19.0 及更高版本中，您可以创建[自定义脚本](https://docs.gunicorn.org/en/latest/custom.html)来运行您的应用程序并在其中包含您需要的启动代码。这是一个使用 django 应用程序的示例脚本：

```
#!/usr/bin/env python

"""
Script for running Gunicorn using our WSGI application
"""

import multiprocessing

from gunicorn.app.base import BaseApplication

from myapp.wsgi import application  # Must be imported first

class StandaloneApplication(BaseApplication):
    """Our Gunicorn application."""

    def __init__(self, app, options=None):
        self.options = options or {}
        self.application = app
        super().__init__()

    def load_config(self):
        config = {
            key: value for key, value in self.options.items()
            if key in self.cfg.settings and value is not None
        }
        for key, value in config.items():
            self.cfg.set(key.lower(), value)

    def load(self):
        return self.application

if __name__ == '__main__':
    gunicorn_options = {
        'bind': '0.0.0.0:8080',
        'workers': (multiprocessing.cpu_count() * 2) + 1,
    }

    # Your startup code here

    StandaloneApplication(application, gunicorn_options).run() 
```

# widget - Joomla 1.5 module displaying code instead of widget

> ID：13768895
> 
> 赞同：1
> 
> 时间：2012-12-07T18:27:15.407
> 
> 标签：widget, joomla1.5

I need to add a widget within my website, which is based in Joomla. I have gotten the widget code and pasted it into the module manager, but instead of showing the widget, it started showing the code itself.

You can see the example of what I'm talking about [here](http://sysmind.com/vms/services).

Can anyone point out what I'm doing wrong, please, and help me figure out how to remove the code from displaying? Thanks in advance!

# javascript - javascript: Select a class with the right content

> ID：13768899
> 
> 赞同：0
> 
> 时间：2012-12-07T18:27:25.000
> 
> 标签：javascript

i`m working on a Greasmonkey Script, no i want to know how i can test a class for its content. For example:

```
<div class="same">Some content</div>
<div class="same">Other content</div>
<div class="same">evenmorecontent</div>
<div class="same">yesthisisalsocontent</div>
<div class="same">youmaynotizedthat</div>
<div class="same">thecontentisdifferent</div>
<div class="same">the cake is yellow</div> 
```

Now i create a array with this classes

```
var arr = document.getElementsByClassName('same'); 
```

Now i want to get the position of "evenmorecontent" in the Array! How do i do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:31:04.347

[如果您想使用 jQuery，您可以使用contains](http://api.jquery.com/contains-selector/)选择器在一行中完成此操作。

在直接 JS 中，您需要遍历数组：

```
var pos = -1;
for(var x=0;x<arr.length;arr++) {
     if(arr[x].innerHTML.indexOf('evenmorecontent')>-1) {
         pos = x;
    }
} 
```

如果它出现不止一次，这将返回最后一个位置。如果未找到，它将返回 -1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:23:15.763

在执行此操作时尽量不要混合 vanilla JS 和 jQuery。以下函数返回文本第一次出现的位置：

```
var getTextPosition = function (selector, text) {
  var pos = -1;
  $(selector).each(function(index) { 
    if($(this).text() === text) {
      pos = index;
      return false;    
    }
  }); 
  return pos;
}; 
```

示例用法：

```
getTextPosition(".same", "evenmorecontent"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:31:50.453

仅使用一个选择器是不可能的。你必须循环：

```
var sameEl = (function() {
  var sameArr = document.getElementsByClassName('same');
  for (index in sameArr) {
    if (sameArr[index].innerHTML === 'evenmorecontent') {
      return sameArr[index];
    }
  }
})(); 
```

# wordpress - WordPress分页不起作用

> ID：13768900
> 
> 赞同：4
> 
> 时间：2012-12-07T18:27:37.327
> 
> 标签：wordpress, pagination

我尝试了多种解决方案，但它不起作用。

当我转到 /page/2 时，它不起作用。

我正在我的主题的 index.php 中执行自定义查询。

```
if ( get_query_var('paged') ) {
    $paged = get_query_var('paged');
} elseif ( get_query_var('page') ) {
    $paged = get_query_var('page');
} else {
    $paged = 1;
}

$args = array(
    'post_type' => array('post', 'music', 'videos'),
    'post_status' => 'publish',
    //'meta_key' => 'featured',
    //'meta_value' => '1',
    'posts_per_page' => 10,
    'orderby'=>'date',
    'order'=>'DESC',
    'paged' => $paged
);

query_posts($args); 
```

这是我网站的链接：我的网站[主页](http://bit.ly/VF4QmJ)

此页面不工作（抛出 404） -[页面不工作](http://bit.ly/YOCA2L)（格式 - mywebsite/page/2/）

刚刚意识到此页面 2 有效 -[正在工作](http://bit.ly/VvBj8Z)的页面（格式为 - mywebsite.com/?page=2）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T09:05:24.233

I was having the same problem and this fixed everything for me. This allows me to paginate on index.php as well as my page.php with pretty permalinks.

**HTML/PHP:**

```
<?php
    //Fix homepage pagination
    if ( get_query_var('paged') ) { $paged = get_query_var('paged'); } else if ( get_query_var('page') ) {$paged = get_query_var('page'); } else {$paged = 1; }

    $temp = $wp_query;  // re-sets query
    $wp_query = null;   // re-sets query
    $args = array( 'post_type' => array('post', 'music', 'videos'), 'orderby'=>'date', 'order'=>'DESC', 'posts_per_page' => 10, 'paged' => $paged);
    $wp_query = new WP_Query();
    $wp_query->query( $args );
    while ($wp_query->have_posts()) : $wp_query->the_post(); 
?>

<!--your loop stuff here -->

<?php endwhile; ?>
<nav>
   <?php paginate(); ?>
   $wp_query = null;
   $wp_query = $temp; // Reset
</nav> 
```

This allows several things. One it checks if your on home, page, or single and tells the $paged variable how to react in turn. It also allows you to query your pagination with custom post types. Also by not using query_post you get to avoid some really funky stuff that you sometimes get when using it. The paginate(); is a custom function which we bring in now:

**Inside your functions.php**

```
function paginate() {
global $wp_query, $wp_rewrite;
$wp_query->query_vars['paged'] > 1 ? $current = $wp_query->query_vars['paged'] : $current = 1;

$pagination = array(
    'base' => @add_query_arg('page','%#%'),
    'format' => '',
    'total' => $wp_query->max_num_pages,
    'current' => $current,
    'show_all' => true,
    'type' => 'list',
    'next_text' => '&raquo;',
    'prev_text' => '&laquo;'
    );

if( $wp_rewrite->using_permalinks() )
    $pagination['base'] = user_trailingslashit( trailingslashit( remove_query_arg( 'page', get_pagenum_link( 1 ) ) ) . '?page=%#%/', 'paged' );

if( !empty($wp_query->query_vars['s']) )
    $pagination['add_args'] = array( 's' => get_query_var( 's' ) );

echo paginate_links( $pagination );
} 
```

This originally came from [http://bavotasan.com/2011/simple-pagination-for-wordpress/](http://bavotasan.com/2011/simple-pagination-for-wordpress/) with me slightly modding it to get the pagination to work on the homepage.

This, again, does several things. It paginates your page with each page getting it's own link (which I find nice) and it also re-writes the URL to allow for pretty permalinks. If you check the link, the variable 's' was being used in place of 'paged' in part of this. I replaced the 's' with 'paged' and everything worked perfectly on my end.

**Optional Styling of Pagination**

```
ul.page-numbers {
    margin: 20px 0 10px;
    width: 100%;
    padding: 0;
    font-size: 12px;
    line-height: normal;
    clear: both;
    float: left;
}

ul.page-numbers li {
       float: left;
    }

ul.page-numbers a,
ul.page-numbers span {
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    background: -webkit-gradient(linear, left top, left bottom, from(#E4E3E3), to(#FFFFFF));
    background: -moz-linear-gradient(top,  #E4E3E3,  #FFFFFF);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#E4E3E3', endColorstr='#FFFFFF');
    padding: 3px 4px 2px 4px; 
    margin: 2px;
    text-decoration: none;
    border: 1px solid #ccc;
    color: #666;
}

ul.page-numbers a:hover,
ul.page-numbers span.current {  
    border: 1px solid #666;
    color: #444;
} 
```

**Edit** I realized afterwards that home page pagination would break after clicking one of the page tabs. I've fixed this by replacing the conditional statement and putting this in its place. I've updated my code above as well.

```
$pagination['base'] = user_trailingslashit( trailingslashit( remove_query_arg( 'page', get_pagenum_link( 1 ) ) ) . '?page=%#%/', 'paged' ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T19:17:15.250

我有时也无法让分页正常工作。尝试使用下面的查询，看看是否有帮助。我刚刚添加了基本上一行代码并将您的查询更改为不使用该`$args`变量。

```
<?php

$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

query_posts( array(
    'post_type' => array(
        'post',
        'music',
        'videos',
    ),
    'post_status' => 'publish',,
    'posts_per_page' => 10,
    'orderby'=>'date',
    'order'=>'DESC',
    'paged' => $paged )
);

if (have_posts()) : while (have_posts()) : the_post();

?> 

    // Display your content here    

    <?php the_title ?>

    <?php the_content(); ?>

<?php endwhile; endif; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T13:05:29.453

这里有几件事，永远不要在您的主页或任何存档页面上更改自定义查询的主查询。你总是会遇到分页问题。

此外，切勿用于[`query_posts`](http://codex.wordpress.org/Function_Reference/query_posts)创建自定义查询。我的重点，就像从不一样。

> **注意：**此功能不适用于插件或主题。正如稍后解释的，有更好、性能更高的选项来更改主查询。query_posts() 是通过用新的查询实例替换页面的主查询来修改页面的主查询的过于简单和有问题的方法。它效率低下（重新运行 SQL 查询）并且在某些情况下会彻底失败（尤其是在处理帖子分页时）。

如果您需要更改主页或任何存档页面的行为，请使用[pre_get_posts`](http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)在执行之前更改/修改主查询。这是更改主查询的正确方法。通过在执行之前更改主查询，您不会遇到分页问题。

`pre_get_posts`可以与条件标签结合使用以定位特定页面。查看为示例提供的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-15T11:32:41.687

我已经为这个问题苦苦挣扎了一段时间，结果我们的 WordPress 没有为我设置一个必填字段，`max_num_pages`.

所以我在循环中设置了这个变量。这是我的示例代码。

```
$paged = ( get_query_var( 'paged' ) ) ? get_query_var( 'paged' ) : 1;
$args = array('post_type' => 'cpt', 'paged'=>$paged, 'posts_per_page' => 3);
$loop = new WP_Query($args);
$GLOBALS['wp_query']->max_num_pages = $loop->max_num_pages; // This is the line that did the magic for me. 
```

经过进一步阅读，我发现了这一点；

1.  在 single.php、singular.php 和其他单视图模板上：`(int) $page`是帖子的页面，由查询 var page: 指定`get_query_var( 'page' )`；
2.  在各种 archive.php 和类似的存档/帖子类型列表视图模板`(int) $paged`上： 全局变量是否包含帖子列表的页码（如存档中）。

这意味着如果你在一个页面模板（这是一个单一的视图模板）上并且正在使用一个循环，你将需要设置这个变量。

# python - 设置和安装 django-bone

> ID：13768903
> 
> 赞同：0
> 
> 时间：2012-12-07T18:27:42.827
> 
> 标签：python, django

一般来说，我是 Django 和 Python 的新手。但是，当我遇到这个问题时，我一直在尝试设置 Django 项目：[https ://github.com/jart/django-bone](https://github.com/jart/django-bone)

它的设置说明让我感到困惑。问题：

如何在 Mac 上设置和安装 django-bone？

我已经安装并运行了 Python 和 Django。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:41:01.813

我建议首先尝试让所有 django-bone 的东西自己运行。

它似乎需要一些不是开箱即用的包，比如 NPM，它是 nodejs 的数据包处理程序。

**但如果你坚持。从 github 克隆 repo。将其放在合适的目录中并使用 ./django-bone yourproject 执行 bash-script**

这将创建很多文件（我想这是为了确保 depenacies）。

# jquery - JQuery - 删除中间元素后合并

> ID：13768905
> 
> 赞同：2
> 
> 时间：2012-12-07T18:28:09.433
> 
> 标签：jquery, html

假设我的 HTML 看起来像这样

```
<p>a<span>b</span>c</p> 
```

后

```
$("span").remove(); 
```

我的 HTML 看起来像这样

```
<p>
"a"
"c"
</p> 
```

如何将这两个部分合并在一起，使我的 HTML 看起来像`<p>ac</p>`？

[jsfiddle](http://jsfiddle.net/dgBwc/12/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:34:26.457

```
$("span").remove();
$("p").html($("p").html());
​ 
```

结果：

```
<p>ac</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T20:55:47.150

我知道这是旧的，但这[`Node.normalize`](https://developer.mozilla.org/en-US/docs/Web/API/Node/normalize)就是为了：

```
$('p').get(0).normalize() 
```

> Node.normalize() 方法将指定节点及其所有子树放入“规范化”形式。在规范化子树中，子树中没有文本节点是空的，也没有相邻的文本节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:45:22.927

这是一个，它只影响连接任意两个连续节点的文本节点。

```
$("span").click(function() {
    var parent = this.parentNode;
    $(this).remove();
    normalize(parent);
});
function normalize(element){
    var contents = $(element).contents();
    contents.each(function(i){console.log(this.nodeType);
        if (this.nodeType == 3 && i > 0){
            var prev = contents[i-1];
            if (prev.nodeType == 3){
                this.nodeValue += prev.nodeValue;
                prev.parentNode.removeChild(prev);
            }
        }
    });
} 
```

[http://jsfiddle.net/mowglisanu/dgBwc/13/](http://jsfiddle.net/mowglisanu/dgBwc/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T18:55:08.573

```
var p  = $('p'),
    p2 = p.clone(true);
    p2.find('span').remove();
    p2.text(p2.text());
    p.parent().empty().append(p2); 
```

[**小提琴**](http://jsfiddle.net/JpvyX/7/)

保持绑定！

# c++ - RapidJSON 库在没有名称字段的情况下获取值

> ID：13768907
> 
> 赞同：2
> 
> 时间：2012-12-07T18:28:21.937
> 
> 标签：c++, json

我们从某些合作伙伴的 api 中得到了类似于以下的 json 回复。

```
[
{ "firstName":"John" , "lastName":"Doe" },
{ "firstName":"Anna" , "lastName":"Smith" },
{ "firstName":"Peter" , "lastName": "Jones" }
] 
```

当我们尝试通过 rapidjson lib 解析时，parse 没有返回任何错误，但我们不确定如何从没有 name 数组的文档中获取值。任何人有任何想法来处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:55:10.547

```
std::string s("[ { \"firstName\":\"John\" , \"lastName\":\"Doe\" }, "
              "  { \"firstName\":\"Anna\" , \"lastName\":\"Smith\" }, "
              "  { \"firstName\":\"Peter\" , \"lastName\": \"Jones\" } ]");

rapidjson::Document doc;
doc.Parse<0>(s.c_str());

for (rapidjson::SizeType i = 0; i < doc.Size(); i++)
    printf("\n%u: %s %s", i + 1, doc[i]["firstName"].GetString(), doc[i]["lastName"].GetString()); 
```

# xcode - Git：重命名 Xcode 项目并拉取更改后无法打开 .pbxproj 文件错误

> ID：13768908
> 
> 赞同：1
> 
> 时间：2012-12-07T18:28:33.430
> 
> 标签：xcode, git, pbxproj

[我按照此处](https://stackoverflow.com/questions/7998344/xcode-how-to-change-application-project-name-what-do-i-need-to-to-update-and)最受好评的答案中的说明重命名了我们的 iOS 项目（客户端最终选择了一个名称）。我推动了我的改变。现在，当我的队友拉动时，他们无法打开项目，因为 Xcode 找不到 .pbxproj 文件。他们随后重置为良好的本地版本。

像往常一样，当我大发雷霆时，我尝试硬重置到最后一个好的提交，计划强制将好的提交推送到远程。虽然重置是“成功的”，但它并没有将 newName.pbxproj 改回 oldName.pbxproj。所以我无法打开该项目。检查我的错误提交也无济于事。我回到了第一广场。

.pbxproj 不在我们的 .gitignore 中：

```
 *.DS_Store
      *.xcodeproj/xcuserdata/*.xcuserdatad
      *.xcodeproj/project.xcworkspace/xcuserdata/*.xcuserdatad
      */*.xcodeproj/xcuserdata/*.xcuserdatad
      */*.xcodeproj/project.xcworkspace/xcuserdata/*.xcuserdatad 
```

我现在唯一能想到的就是从特定的远程提交中重新克隆项目。我怎样才能做到这一点？其他选择？为什么重命名的 .pbxproj 不会在拉取时转移？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:34:36.107

如果你这样做`git log -5`，它将显示你最近的 5 次提交。在命名文件之前确定版本，您可以在`git reset --hard HEAD~<number>` 哪里`<number>`执行您想要返回的提交数。

`git push origin :branchName`或者，使用重命名的 proj 文件，您可以尝试通过将本地更改的分支推送到远程来吹走您的远程`git push origin branchName`

然后，让您的其他团队成员从新推送的遥控器中拉动。

# sorting - java7 中的 Collections.sort() 问题

> ID：13768919
> 
> 赞同：5
> 
> 时间：2012-12-07T18:29:18.240
> 
> 标签：sorting, collections, java-7

java7有排序问题吗？我正在使用 Collections.sort(list, 比较器)

当我切换到 java7 时，我注意到排序结果与我使用 java6 时的结果不同。

示例：列表 = [d, e, b, a, c, f, g, h]

在 java6 Collections.sort(List,comparator) 导致 [a, b, c, d, e, f, g, h]

在 java7 Collections.sort(List,comparator) 导致 [b, a, c, d, e, f, g, h]

列表中的前两个值已交换。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T18:37:52.083

Java 7 从[Merge 排序](http://en.wikipedia.org/wiki/Merge_sort)切换到[Tim 排序](http://en.wikipedia.org/wiki/Timsort)。*它可能会导致“损坏的比较器*”的顺序发生轻微变化（引用[`Arrays`类](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)源代码中的注释）：

```
/**
 * Old merge sort implementation can be selected (for
 * compatibility with broken comparators) using a system property.
 * Cannot be a static boolean in the enclosing class due to
 * circular dependencies. To be removed in a future release.
 */ 
```

尝试使用以下命令运行 JVM：

```
java -Djava.util.Arrays.useLegacyMergeSort=true 
```

目前尚不清楚“*损坏的比较器*”是什么意思，但显然它会导致排序数组中元素的不同顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:48:17.333

需要注意的一件事是，这可能会引起混乱。Collections.sort 是一种稳定的排序。这意味着对于相等的元素，它会保持它们原来的顺序，所以：

如果 a == b，那么

```
Collections.sort([d, e, b, a, c, f, g, h]) = [b, a, c, d, e, f, g, h] 
```

和

```
Collections.sort([d, e, a, b, c, f, g, h]) = [a, b, c, d, e, f, g, h] 
```

在我看来，这可能是您所看到的，或者有问题的比较器（或被排序的对象的自然顺序）没有按照您期望的方式工作。

# php - PHP获取相对于站点根目录的文档路径

> ID：13768925
> 
> 赞同：12
> 
> 时间：2012-12-07T18:29:54.153
> 
> 标签：php, html, css

我正在尝试在包含所有 CSS 链接信息的头文件中链接一个单独的 php 文档，这样如果我想更改网站的设计，我只需在一个位置更改 css 路径（特别是对于各种配色方案. 当我添加更多方案时，我可以将它们放在这个文件中的 switch 语句中，而不是遍历每一页。

我正在尝试编写代码，以便无论它在哪个服务器上运行（我的本地测试服务器或远程站点服务器）它都可以工作，而无需更改任何路径信息。

从我正在阅读的内容来看，这似乎`$_SERVER['DOCUMENT_ROOT']`是找到站点基本文件夹路径的最佳方式，这样无论页面文件位于何处，我都可以找到服务器文件夹/css文件。

这是我如何设置的示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<!--Meta Information-->

<!--CSS Info-->
<?php 
    require_once("styles/cssstyle.php");
?>

<title></title>
</head>
<body>

<!--pushes site down from top of screen -->
<div id="topmargin"></div> 

<!-- sets div for site content (puts in middle) -->
<div id="_body">          

    <div id="banner">                        
        <div class="logo"></div>      
        <div class="text"></div>
        <div class="bannerstrip"></div>
    </div>

    <!--portion for site navigation-->
    <div id="navigation">                               
        <ul class="navlinks">                            
            <li><a href="index.php">home</a></li>
        </ul>
    </div>

    <!--Holds all site usable/readable content-->
    <div id="leftwindow">                              

    </div>

    <div id="rightwindow">

    </div>

    <div id="rightwindow">

    </div>
</div>

</body>
</html> 
```

CSS php文件是这样的：

```
 <?php
echo "<link rel='stylesheet' type='text/css' href='styles/default.css'/>";
echo "<link rel='stylesheet' type='text/css' href='" . $_SERVER['DOCUMENT_ROOT'] . "styles/basicblue.css'/>";  
echo "<link rel='stylesheet' type='text/css' href='" . $_SERVER['DOCUMENT_ROOT'] . "styles/forms.css'/>";
echo "<link rel='stylesheet' type='text/css' href='" . $_SERVER['DOCUMENT_ROOT'] . "styles/loginform.css'/>";
echo "<link rel='stylesheet' type='text/css' href='" . $_SERVER['DOCUMENT_ROOT'] . "styles/newscontent.css'/>";
?> 
```

我很肯定 DOCUMENT_ROOT 设置为正确的位置，但我的样式没有显示出来。我错过了什么吗？有没有更可靠的方法来设置它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T18:43:07.683

根据我的经验，回应 Mike 上面所说`$_SERVER['DOCUMENT_ROOT']`的只是在服务器上查找文件的最佳选择。如果您需要 php 包含或需要某些内容，请使用`DOCUMENT_ROOT`.

但是，css 文件是客户端。它们包含在相对网站路径中。如果你要这样做

```
<link rel='stylesheet' type='text/css' href='/styles/newscontent.css'/> 
```

href 中的开头`/`告诉浏览器始终从您的域的根目录中检索它：`http://yourdomain.com/styles/newscontent.css`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T18:44:43.970

您必须使用`$_SERVER["DOCUMENT_URI"]`而不是`$_SERVER["DOCUMENT_ROOT"]`，如下所示：

```
echo "<link rel='stylesheet' type='text/css' href='" . dirname($_SERVER['DOCUMENT_URI']) . "/styles/basicblue.css'/>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-16T12:31:57.240

我结束了减去网络根路径以获得相对路径

```
str_replace($_SERVER['DOCUMENT_ROOT'],'',$_SERVER["SCRIPT_FILENAME"]); 
```

所以`/home/u/username/example.com/public_html/webfolder/index.php` 你会得到`/webfolder/index.php`

编辑：在构造的情况下，您的文件名会以某种方式重复文档根目录，因此上面的代码将无法正常工作。这更防弹（计数符号并删除它们）

```
substr($_SERVER["SCRIPT_FILENAME"],strlen($_SERVER['DOCUMENT_ROOT'])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-18T11:43:57.187

我的案例包括一个 JS 脚本，它与 PHP 脚本位于同一文件夹中。

我使用以下内容获取从站点根目录到脚本文件夹的路径：

```
<script src="<?php echo str_replace($_SERVER['DOCUMENT_ROOT'], '', __DIR__); ?>/script.js"></script> 
```

这工作正常。

# php - If 构造多个表达式

> ID：13768926
> 
> 赞同：0
> 
> 时间：2012-12-07T18:29:54.423
> 
> 标签：php

我正在做这样的事情：

```
if ($varA != null & $varB = null){
     $newthing = "Something else";
} 
```

它似乎不想工作。我已经尝试过`&&`，`&`但我可以为这些以及它们的作用找到一个很好的参考。

**编辑：**要尝试弄清楚我的目标是什么。

无论某些变量在编码的 URL 中是否具有值，我都有三个`if`要执行的语句。这三个声明是：

```
 if ($lprice != null && $hprice == null){
        $clauses[] = "MSTLISTPRC  >= " . $lprice;
    }
    if ($hprice != null && $lprice == null)(
        $clauses[] = "MSTLISTPRC  <= " . $hprice;
    } 
    if ($lprice != null && $hprice != null){
        $clauses[] = "MSTLISTPRC BETWEEN " . $lprice . " AND " . $hprice;
    } 
```

最后一个`if`语句有效，前两个无效。这与 PHP 代码本身有关，因为我正在对其进行测试`echo`以仅输出查询字符串，而当我尝试执行此操作时，它失败了。我不知道如何应用错误处理，所以我没有使用过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:33:02.627

您需要使用 && 代替 & 和 == 代替 =。

所以：

```
if ($varA != null && $varB == null){
     $newthing = "Something else";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:33:31.753

```
if ($varA != null && $varB = null){
 $newthing = "Something else";
} 
```

这个应该没问题。。

# jquery - jquery在单击时检查并更改div宽度

> ID：13768929
> 
> 赞同：0
> 
> 时间：2012-12-07T18:29:58.277
> 
> 标签：jquery, jquery-ui, width, jscrollpane

我在 DIV 中有一些图像，带有水平滚动条（jscrollpane）。

我首先获取所有图像的宽度并将该宽度分配给容器，但我想制作一个按钮来更改照片的高度（400px/600px）。当我单击按钮更改高度时，我还需要重新计算所有图像的宽度——这就是我的问题。

我的代码中的哪些内容被破坏以计算图像的宽度并将其分配给 div？

我的代码：

```
$(window).load(function(){
  $('.minus-button').click(function() {
  //alert('clicked');
    $(".scroll-content-item img, .scroll-content-item, .jspContainer").css('height', 200);
    $('.scroll-content').each(function(){
      var wrapper = $(this);
      var wrapperWidth = 0;

      wrapper.find('.scroll-content-item img').each(function(){
         wrapperWidth += $(this).outerWidth(true);
      });

      wrapper.css('width', wrapperWidth);
    });
 });
 }); 
```

有任何想法吗？谢谢你！链接：[http ://bit.ly/TJaqC6](http://bit.ly/TJaqC6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:07:50.480

也许这样，img 没有滚动内容项目类，所以这将选择所有具有滚动内容项目类的父级的 img [http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

```
wrapper.find('.scroll-content-item > img').each(function(){
         wrapperWidth += $(this).outerWidth(true); 
```

# c# - 如何将自定义属性添加到 RadioButtonList 项？

> ID：13768930
> 
> 赞同：5
> 
> 时间：2012-12-07T18:30:00.197
> 
> 标签：c#, asp.net, html, radiobuttonlist

如何将绑定的[Html5 数据属性](http://ejohn.org/blog/html-5-data-attributes/)添加到使用绑定生成的项目中`RadioButtonList`？

我的代码如下所示：

```
<asp:Repeater Id="QuestionList" ...>
    <ItemTemplate>
        <asp:RadioButtonList DataSource='<%# Eval("Answers") %>'
                         SelectedValue='<%# Eval("SelectedAnswerId") %>'
                         DataTextField="Answer" 
                         DataValueField="AnswerId"
                         Tag='<%# Eval("QuestionId") %>' />
    </ItemTemplate>
</asp:Repeater> 
```

```
var List<Question> questions = GetQuestions();
QuestionList.DataSource = questions;
QuestionList.DataBind(); 
```

它绑定到如下所示的类结构：

```
public class Question
{
    int QuestionId;
    string Question;
    List<Answer> Answers;
}

public class Answers
{
    int AnswerId;
    string Answer;
    bool SomeFlag;
} 
```

我需要添加`SomeFlag`到 UI 以供 jQuery 使用，因此最终结果是生成的每个项目应如下所示：

```
<input type="radio" data-flag="true" ... /> 
```

有没有办法向绑定生成的输入对象添加 html 数据属性`RadioButtonList`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:42:19.337

You can use ListItem attributes to add custom attributes to the items in the radio button list. You can check how your html is generated for radio button list and make jquery to get the required data attribute for you.

*On server side*

```
ListItem li1 = new ListItem();
ListItem li2 = new ListItem();
li1.Attributes.Add("data-flag", "true");
li2.Attributes.Add("data-flag", "true");
RadioButtonList1.Items.Add(li1);
RadioButtonList1.Items.Add(li2); 
```

*Generated html for radio button list*

```
<table id="RadioButtonList1" border="0">
    <tr>
        <td><span data-flag="true"><input id="RadioButtonList1_0" type="radio" name="RadioButtonList1" value="" /></span></td>
    </tr><tr>
        <td><span data-flag="true"><input id="RadioButtonList1_1" type="radio" name="RadioButtonList1" value="" /></span></td>
    </tr>
</table> 
```

*Accessing in jquery*

```
$(':radio[id*=RadioButtonList1]').click(function(){
      alert($(this).closest('span').data('flag'));
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:43:13.267

You can set an Attribute in the ItemDataBound event of Repeater, try something like:

```
protected void repeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    // if it is an item (not header or footer)
    if (e.Item.ItemType == ListItemType.Item)
    {
        // get your radioButtonList
        RadioButtonList optionsList = (RadioButtonList)e.Item.FindControl("rblOptionsList");

        // loop in options of the RadioButtonList
        foreach (ListItem option in optionsList.Items)
        {
            // add a custom attribute
            option.Attributes["data-flag"] = "true";
        }
    }
} 
```

And remember to set the IDs and Events for your controls

```
<asp:Repeater Id="QuestionList" ItemDataBound="QuestionList_ItemDataBound" ...>
    <ItemTemplate>
        <asp:RadioButtonList ID="rblOptionsList" DataSource='<%# Eval("Answers") %>'
                         SelectedValue='<%# Eval("SelectedAnswerId") %>'
                         DataTextField="Answer" 
                         DataValueField="AnswerId"
                         Tag='<%# Eval("QuestionId") %>' />
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:40:04.070

如果您需要在服务器端生成属性，最好的选择是对`RadioButtonList`控件进行子类化并覆盖该`Render`方法。

如果您有一个可以显示反编译代码的 Reflector 或类似产品的副本，这将非常有助于确定`ListItem`元素在何处呈现为单选按钮。

# php - 图像字符编码错误的PHP输出文本

> ID：13768931
> 
> 赞同：2
> 
> 时间：2012-12-07T18:30:01.897
> 
> 标签：php, image-processing, utf-8, character-encoding, ascii

```
setlocale(LC_MONETARY, 'en_GB.UTF-8');
imagestring( $my_img, 4, $colC, $row1, money_format('%(#5n', $rates[0][0]), $text_colour );

...
...
...

header( "Content-type: image/png" );
imagepng( $my_img );
imagecolordeallocate( $line_colour );
imagecolordeallocate( $text_colour );
imagecolordeallocate( $background );
imagedestroy( $my_img ); 
```

一切正常，但是我有一个奇怪的错误......

货币符号看起来不对。**它没有显示£**符号，而是显示顶部带有插入符号的A **，**看起来像英镑符号的下半部分。

所以我尝试删除 .UTF-8 并且带有插入符号的**A**消失了，但它仍然只显示井号的下半部分。

我想要的只是一个**£**符号。有人可以帮忙吗？？？

![PHP 错误](../Images/2c542b060794e55654f01fb9dbf6566f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T19:05:24.597

根据[文档](http://php.net/manual/en/function.imagestring.php)，`imagestring`默认字体只支持Latin2，不能编码`£`。即使它可以编码`£`，您也应该在传递之前将 UTF-8 转换为 Latin2。

使用[`imageTtfText`](http://php.net/manual/en/function.imagettftext.php)支持 UTF-8 的。您需要将它指向第 7 个参数中的有效 TrueType 字体文件。

# javascript - 如何使 Cycle（JQuery 插件）滑块只有图像，而不是 Div 标签

> ID：13768941
> 
> 赞同：0
> 
> 时间：2012-12-07T18:30:54.367
> 
> 标签：javascript, jquery, html, jquery-cycle

如何使 Cycle（JQuery 插件）滑块只有图像，而不是 Div 标签

例如：

```
<div id="banner">
 <img />
 <img />
 <img />

<div class="description">

</div>

</div> 
```

我只想滑动 img 标签，而不是描述块的 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:52:13.633

不知道你是否还需要这个，但我建议升级到[Cycle2](http://jquery.malsup.com/cycle2/)。它在很大程度上应该是一个插入式替换，并且 Cycle2 具有“slides”属性，它允许您选择要制作成幻灯片的子元素（默认为您放置的容器的直接图像子元素`.cycle()`）。

# c# - Windows 窗体桌面应用程序栏没有响应

> ID：13768945
> 
> 赞同：0
> 
> 时间：2012-12-07T18:31:10.443
> 
> 标签：c#, winforms, desktop-application

我会在标题中给出一些关于实际问题的指示，但我无法弄清楚它是什么。我只能说，在实现 appbar 时，表单在我尝试为变量赋值后不再响应，从而导致我不得不停止调试并重新启动机器以重新获得桌面工作区。错误的位置在下面的代码中注明，我只列出了错误点的代码。这里有什么我看不到的明显的东西吗？

```
static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }
}

public partial class Form1 : AppBar
{
    public Form1() : base()
    {
        InitializeComponent();
    }

    //This is a button on the test form.
    //When clicked, the form should become a desktop application bar
    //docked to the top of the desktop.
    private void t_Click(object sender, EventArgs e)
    {
        base.SET_APPBAR();
    }
}

public class AppBar : Form
{
    protected internal Size appbarSize;
    protected internal Point appbarLocation;
    protected internal bool appbarMode;
    private EDGES appbarEdge;
    private RECT appbarRect;

    private uint ID { get; private set; }
    private IntPtr HANDLE { get; private set; }

    //constructor
    public AppBar() : base () //no issues here
    {
        appbarEdge = EDGES.ABE_TOP;
        appbarRect = new RECT();
        ID = 0;
        HANDLE = this.Handle;
        appbarMode = false;
    }

    protected internal void SET_APPBAR()
    {
        if (IS_NEW())
        {
            QUERY_AND_SET_POSITION(ref appbarRect); //Never get to here
        }
    }

    private bool IS_NEW()
    {
        if (appbarMode) //so far, so good
        {
            return false;
        }
        while (ID == 0) 
        {
            CREATE_ID(); //ID is created, I have verified this.
        }
        this.FormBorderStyle = FormBorderStyle.FixedToolWindow; //BorderStyle does change
        appbarSize = this.Size; //Size is correct
        appbarLocation = this.Location; //still no issues
        NEW(); //this is where the error begins (see code further down)
        return appbarMode; //Never get here
    }

    private void CREATE_ID()
    {
        ID = Hooks.RegisterWindowMessage(Guid.NewGuid().ToString());
    }

    private void QUERY_AND_SET_POSITION(ref RECT appbarRect)
    {
        SET_APPBAR_SIZE(ref appbarRect);
        QUERY_POS(ref appbarRect);
        APPBAR_RESIZE(ref appbarRect);
        SET_POS(ref appbarRect);
        this.Location = new Point(appbarRect.left, appbarRect.top);
        appbarSize = new Size(appbarRect.right - appbarRect.left, appbarRect.bottom - appbarRect.top);
        this.Size = appbarSize;
    }

    private void SET_APPBAR_SIZE(ref RECT appbarRect)
    {
        switch (appbarEdge)
        {
            case (EDGES.ABE_BOTTOM):
                appbarRect.left = 0;
                appbarRect.right = SystemInformation.PrimaryMonitorSize.Width;
                appbarRect.top = SystemInformation.PrimaryMonitorSize.Height - appbarSize.Height;
                appbarRect.bottom = SystemInformation.PrimaryMonitorSize.Height;
                break;
            case (EDGES.ABE_LEFT):
                appbarRect.left = 0;
                appbarRect.right = appbarSize.Width;
                appbarRect.top = 0;
                appbarRect.bottom = SystemInformation.PrimaryMonitorSize.Height;
                break;
            case (EDGES.ABE_RIGHT):
                appbarRect.left = SystemInformation.PrimaryMonitorSize.Width - appbarSize.Width;
                appbarRect.right = SystemInformation.PrimaryMonitorSize.Width;
                appbarRect.top = 0;
                appbarRect.bottom = SystemInformation.PrimaryMonitorSize.Height;
                break;
            default:
                appbarRect.left = 0;
                appbarRect.right = SystemInformation.PrimaryMonitorSize.Width;
                appbarRect.top = SystemInformation.WorkingArea.Top;
                appbarRect.bottom = appbarSize.Height;
                break;
        }
    }

    private void APPBAR_RESIZE(ref RECT appbarRect)
    {
        switch (appbarEdge)
        {
            case (EDGES.ABE_TOP):
                appbarRect.bottom = appbarRect.top + appbarSize.Height;
                break;
            case (EDGES.ABE_BOTTOM):
                appbarRect.top = appbarRect.bottom - appbarSize.Height;
                break;
            case (EDGES.ABE_LEFT):
                appbarRect.right = appbarRect.left + appbarSize.Width;
                break;
            case (EDGES.ABE_RIGHT):
                appbarRect.left = appbarRect.right - appbarSize.Width;
                break;
        }
    }

    private void APPBAR_CALLBACK(ref Message apiMessage)
    {
        switch ((NOTIFICATIONS)(uint)apiMessage.WParam)//? on int vs uint here
        {
            case (NOTIFICATIONS.ABN_STATECHANGE):
                STATE_CHANGE();
                break;
            case (NOTIFICATIONS.ABN_POSCHANGED):
                QUERY_AND_SET_POSITION(ref appbarRect);
                break;
            case (NOTIFICATIONS.ABN_FULLSCREENAPP):
                if ((int)apiMessage.LParam != 0)
                {
                    this.SendToBack();
                    this.TopMost = false;
                }
                else
                {
                    STATE_CHANGE();
                }
                break;
            case (NOTIFICATIONS.ABN_WINDOWARRANGE):
                //first call
                if ((int)apiMessage.LParam != 0)
                {
                    this.Visible = false;
                }
                //second call
                else
                {
                    this.Visible = true;
                }
                break;
        }
    }

    protected override void WndProc(ref Message apiMessage)
    {
        if (appbarMode)
        {
            if (HANDLE == apiMessage.HWnd)
            {
                APPBAR_CALLBACK(ref apiMessage);
            }
            else if (apiMessage.Msg == (int)API_MESSAGES.WM_ACTIVATE)
            {
                ACTIVATE();
            }
            else if (apiMessage.Msg == (int)API_MESSAGES.WM_WINDOWPOSCHANGED)
            {
                WINDOW_POS_CHANGED();
            }
        }
        base.WndProc(ref apiMessage);
    }

    private void NEW()
    {
        APPBARDATA data = new APPBARDATA(); //no apparent issue
        data.cbSize = (uint)Marshal.SizeOf(data); //no apparent issue
        data.hWnd = HANDLE; //no apparent issue
        data.uCallbackMessage = ID; //no apparent issue
        if (Hooks.SHAppBarMessage((uint)DWORD.ABM_NEW, ref data) != 0) //SHAppBar returns 1 (true)
        {
            //no issue if I were to place a MessageBox here
            appbarMode = true; // why in the world is this causing an issue?????
            //can't do anything from this point
        }
    }
}

public static class Hooks
{
    [DllImport("shell32.dll", EntryPoint = "SHAppBarMessage")]
    public static extern uint SHAppBarMessage(uint dwMessage, ref APPBARDATA pData);

    [DllImport("user32.dll", EntryPoint = "RegisterWindowMessage")]
    public static extern uint RegisterWindowMessage(
        [MarshalAs(UnmanagedType.LPTStr)]
        string lpString);
} 
```

无论发生什么问题，我都无法单击任何按钮或关闭表单。桌面工作区总是适当调整大小。希望所有这些对某人有意义。感谢您提前查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:35:29.037

问题是您正在 UI 线程中执行长时间运行的操作。这会阻塞 UI 线程并阻止它执行任何其他操作（从绘制更改、响应按钮单击或鼠标移动事件等）。

您需要在后台线程中执行长时间运行的操作。虽然您可以手动执行此操作，`BackgroundWorker`但最好使用 a，因为它正是为这个应用程序设计的。它不仅会为您创建/配置后台线程，而且还提供简单易用的机制，用于在后台任务完成时更新 UI，在任务运行时更新 UI 进度等。

请注意，在后台线程中，您无法访问 UI 元素；它们需要从 UI 线程访问。您应该将所有从 UI 获取信息的代码移动到开始后台任务之前（将其保存在本地变量或字段中以供以后使用），并且您应该将所有代码移动到最后，以根据结果更新 UI，（在`RunWorkerCompleted`事件，如果使用`BackgroundWorker`)。`DoWork`除了for之外的所有事件`BackgroundWorker`都在 UI 线程中执行，因此可以访问您的 UI 控件。

# validation - grails - 我需要在运行时定义我的验证

> ID：13768956
> 
> 赞同：1
> 
> 时间：2012-12-07T18:32:16.997
> 
> 标签：validation, grails, runtime

我有一个想法，即从数据库中读取 XML 文档并根据定义的数据生成简单的 CRUD 屏幕（通过 Grails）。我的应用程序将调用 RESTFul 服务来保存数据，因此我不需要在客户端使用 Hibernate。我有关于如何生成 UI 的想法，但我很难过的是如何执行验证。

我将有一个单一的、通用的域/命令对象，它只包含这种“运行时”数据类型的所有实例所共有的字段。所有其他字段都是通过在数据库中找到的 XML 定义的。我需要这样的东西：

```
String xml // defines the fields, constraints, UI information for this data type
def constraints = {
    callMyCustomValidator(obj)
} 
```

在我的`callMyCustomValidator`方法中，我将提取 xml`obj`并根据需要执行我的验证。

注意：我们在不同的应用程序（用 java/servlers/jsp 编写）中有一个工作示例，并且没有任何正式的“框架”，这并不难做到。为什么我需要这个？我们需要在没有发布的情况下即时（通过脚本）添加简单的数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:50:39.893

您可以使用[验证器](http://grails.org/doc/latest/ref/Constraints/validator.html)将自定义验证添加到您的域类。只需将其添加到您的一些常见字段中即可。

# visual-studio-2010 - 我可以在一个解决方案配置中构建项目的多个配置吗？

> ID：13768967
> 
> 赞同：12
> 
> 时间：2012-12-07T18:33:03.877
> 
> 标签：visual-studio-2010, msbuild, configuration-management

我想在相同的解决方案配置中构建相同的项目两次，改变一些#define 标志来切换功能。两个二进制文件将使用不同的名称进行部署。

我知道的解决方案可以工作：

1.  添加解决方案配置 - 但是我需要构建解决方案两次，我希望避免这种情况。将始终构建两个项目配置。

2.  复制项目 - 但是当我只想维护不同的配置时，我有维护新项目的开销。

3.  批量构建 - 我避免使用批量构建，因为我使用 devenv 进行本地开发和 msbuild 进行持续集成。

还有其他想法或建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:40:07.707

只是想出了一个方法来做你所要求的。创建一个 msbuild 文件（我命名为我的 multiple.proj）并在下面添加脚本。

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Choose>
    <When Condition="'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'">
      <ItemGroup>
        <ProjectToBuild Include="$(MSBuildProjectName).csproj">
          <Properties>Configuration=Release</Properties>
        </ProjectToBuild>
      </ItemGroup>
    </When>
  </Choose>
  <Target Name="BeforeBuild">
    <Message Text="Building configuration $(Configuration)..." />
  </Target>
  <Target Name="AfterBuild">
    <MSBuild Projects="@(ProjectToBuild)"/>
  </Target>
</Project>

</type>
</this> 
```

在您的项目（csproj 或 vbproj）上导入脚本：

```
<Import Project="..\multiple.proj" /> 
```

此脚本告诉 msbuild 使用另一个配置作为 AfterBuild 事件再次构建您的项目。我使用 Debug/Release 来制作示例，但您可以轻松更改脚本以支持其他配置，或者根据其他变量决定重新构建。

请小心，因为您同时运行两个构建，因此构建错误可能更难理解。

希望这可以帮助。

# ruby-on-rails - 如何在 Rails 中解密文件？

> ID：13768972
> 
> 赞同：0
> 
> 时间：2012-12-07T18:33:36.273
> 
> 标签：ruby-on-rails, aes, encryption

哇，多么模糊的问题，我知道。`enc_file`我的Rails 存储库中有一个文件。

在我的`environments/production.rb`，我有：

```
authentication_file = "#{Rails.root}/enc_file"
unless File.exist?(authentication_file)
    puts "ERROR: File not found! (#{authentication_file})"
    raise SystemExit, 1
end
my_config = YAML.load(PaymentGatewayCipher.decrypt(authentication_file)).symbolize_keys!
config.app_config.pay_pal.merge!(pay_pal_config.slice(:login, :password, :business, :business_id, :cert_id, :private_key, :signature).merge(
  :return_to_merchant => false,
  :server => 'whatever.paypal.com'
)) 
```

然后在我的`payment_gateway_cipher.rb`文件中，我有：

```
require 'openssl'

# Encapsulates payment gateway encryption / decryption utility functions
class PaymentGatewayCipher
  class << self
    def encrypt(file, options = {})
      cipher = create_cipher
      cipher.encrypt(cipher_key)
      data = cipher.update(File.read(file))
      data << cipher.final

      if to_file = options[:to]
        # Write it out to a different file
        File.open(to_file, 'wb') do |f|
          f << data
        end
      end

      data
    end

    # Decrypts the given file
    def decrypt(file)
      cipher = create_cipher
      cipher.decrypt(cipher_key)
      encrypted_data = File.open(file, 'rb') {|io| io.read}
      data = cipher.update(encrypted_data)
      data << cipher.final
    end

    # Generates the cipher to be used for encryption/decryption
    def create_cipher
      OpenSSL::Cipher::Cipher.new('aes-256-cbc')
    end

    # Loads the cipher key used for the symmetric algorithm
    def cipher_key
      File.open(File.join(Rails.root, 'config/mystuff/live/cipher.key'), 'rb') {|io| io.read}
    end
  end
end 
```

我将如何解密`enc_file`以查看它在 Rails 之外的内容？我想查看内容，修改它们，并尽可能重新保存文件。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:41:01.283

你有这个*功能*`decrypt`，所以大概是通过输出那个功能的结果？

 *```
puts decrypt("path/to/enc_file") 
```

或者将相同的内容写入一个文件，然后您可以在 Ruby 之外查看：

```
File.open("decrypted_file", "w") do |f|
  f.write decrypt("path/to/enc_file")
end 
```*

# c# - C# 为什么要创建对单个对象的多个引用？

> ID：13768973
> 
> 赞同：0
> 
> 时间：2012-12-07T18:33:39.477
> 
> 标签：c#, reference

**情况：**我最近看到一篇文章，其中一位雇主要求入门级候选人解决​​一个复杂的参考问题（未显示），以及与堆栈和托管堆有关的问题。我花了一些时间来学习这些概念以供个人理解，但不知道这些被认为是“入门级”知识。作为与 CS 并列的 CIS 专业（我知道巨大的差异），这些概念没有被教授。

**问题**为什么开发人员会将一个对象引用分配给另一个引用？更简洁地说，为什么开发人员会像面试场景中描述的那样翻转数十个参考资料？这仅仅是测试主题理解的问题，还是这种“参考翻转”是“日常”开发中使用的一种做法？

```
using System;

namespace QuickConsoleTesting
{
   class Program
   {
      static void Main()
     {
         //Instantiate two new Person objects on the heap
         Person person1 = new Person() { Name = "Jim" };
         Person person2 = new Person() { Name = "Todd" };
         Person person3 = person1;
         Person person4 = new Person() { Name = "Julie" };

         //Flip-flop reference variables
         person4 = person2;
         person1 = person3;

         //Display results
         Console.WriteLine(person1.Name);
         Console.WriteLine(person2.Name);
         Console.WriteLine(person3.Name);
         Console.WriteLine(person4.Name);

        /* ======================================
         * Results displayed: Jim, Todd, Jim, Todd
         * ===================================== */

        //Hold console window
        Console.Read();

      }//END OF MAIN
    }//END OF PROGRAM

    class Person
    {
       private string name = "";

       public string Name
       {
          get { return name; }
          set { name = value; }
       }
    }//END OF PERSON

 }//END OF NAMESPACE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:38:12.830

这类问题是为了测试候选人是否理解参考变量和值变量之间的区别。提供的场景（原样）几乎不会在真实世界（tm）代码中发生。但是，混淆导致*不*理解为什么这个代码片段能做它可以做的事情并且确实会导致很多错误，尤其是当有不同的函数处理相同的数据时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:58:36.770

想象一个班级

```
class Person
{
pubic string Name;
} 
```

* * *

使用默认值传递

```
Person p=new Person();
//p contains the address of the newly allocated person
change(p);
//p is passed by value so the address within p would get copied into p1 which is a method parameter of change method

public void change(Person p1)
//p1 and p are separate variables containing address of person object
{
    p1.Name="SO";
    //changes name of p1 and p
    p1=null;
    //this makes p1 null not p since p and p1 are separate copies pointing to person object
} 
```

* * *

供参考

```
change(ref p);
//p is now passed by reference so p1 is p
public void change(ref Person p1)//p1 and p are same
{
    p1.Name="SO";
    p1=null;//this makes p and p1 null
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:40:16.113

我不确定你到底在问什么，开发人员可能会在多个变量中存储相同的引用有很多原因，但这完全取决于代码。请记住，该对象仍然只有一个位置存在于堆中，但可能有许多对其的引用（这就是托管垃圾收集器用于清理不再引用的对象的地方）

显然，您的示例只是糟糕的代码。这些类型的问题类似于 C++ 指针问题。C# 作为一种受管理的语言，试图远离指针，但理解值类型和引用类型之间的区别仍然很重要。这主要是这些问题的设计目的。

# c++ - 当存在具有值的签名时，使用右值的签名如何模棱两可？

> ID：13768977
> 
> 赞同：0
> 
> 时间：2012-12-07T18:34:08.613
> 
> 标签：c++, visual-studio-2010, visual-c++

当我拥有这两个签名时，会出现编译错误：

```
String& operator+(String&& a, const TCHAR* b)
String operator+(String a, const TCHAR* b)

string.cpp(97): error C2593: 'operator +' is ambiguous
      string.cpp(34): could be 'String &operator +(String &&,const TCHAR *)'
      string.cpp(24): or       'String operator +(String,const TCHAR *)' 
```

他们不一样吗？？？？？？如果我可以同时使用两者，我觉得可以提高性能。另一方面，这是否含糊不清，因为 + 运算符总是处理右值？

vc++ 2010 编译器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:39:13.430

问题是这些是不同的签名，但是所有可以与一个一起使用的参数也可以与另一个一起使用，因此编译器不可能根据参数来消除需要调用的函数的歧义。

您可能打算提供两个分别采用*右值引用*和*左值*引用的重载。另请注意，从第一个重载返回引用可能没有意义。

请注意，仅当您确实需要区分两个用例时才需要使用*右值*和*左值*`operator+`引用重载，但一般定义不需要这种区分，因为它不会修改参数。常见的实现方式`operator+`是：

```
T operator+( T lhs, T const & rhs ) {
   return lhs+=rhs;
} 
```

性能可以稍微提高一点，以允许对的第一个或第二个参数进行*移动*`operator+`，但这需要两个位置的左值 /*rvalue* 的 4 种不同组合*（ lvalue* + *** lvalue; *lvalue* +*rvalue*; *rvalue* +*左值*；*右值*+*右值*)

# php - 欢迎登录用户的问题

> ID：13768978
> 
> 赞同：0
> 
> 时间：2012-12-07T18:34:24.027
> 
> 标签：php

我正在尝试使用 PHP 登录系统向受限区域中的用户添加欢迎。我使用此代码将用户名从第一个用户登录页面转移到受限页面，但它没有用

```
if ( (isset($_POST['username'])) || (isset($_POST['password'])) { 
                   $user = $_SESSION['username'];
      } 
```

这是我正在使用的文件，你能看看它们，让我知道我做错了什么吗？

```
<form id="login-form" method="post" action="includes/login.inc.php"> 
<fieldset> 
  <legend>Login to Web Site</legend> 
   <label for="username"> 
    <input type="text" name="username" id="username" />Username: 
  </label> 
  <label for="password"> 
    <input type="password" name="password" id="password" />Password: 
  </label> 
  <label for="submit"> 
    <input type="submit" name="submit" id="submit" value="Login" /> 
  </label> 
</fieldset> 
```

我有一个 php 登录文件，如下所示：

```
<?php 
 require_once('config.inc.php'); 
 require_once('functions.inc.php'); 

 // Start session 
 session_start(); 

 // Check if user is already logged in 
 if ($_SESSION['logged_in'] == true) { 
          // If user is already logged in, redirect to main page 
          redirect('../index.php'); 
  } else { 
          // Make sure that user submitted a username/password and username only consists of alphanumeric chars 
          if ( (!isset($_POST['username'])) || (!isset($_POST['password'])) OR 
               (!ctype_alnum($_POST['username'])) ) { 
                        redirect('../login.php'); 
          } 

          // Connect to database 
          $mysqli = @new mysqli(DB_HOSTNAME, DB_USERNAME, DB_PASSWORD, DB_DATABASE); 

          // Check connection 
          if (mysqli_connect_errno()) { 
                        printf("Unable to connect to database: %s", mysqli_connect_error()); 
                        exit(); 
          } 

          // Escape any unsafe characters before querying database 
          $username = $mysqli->real_escape_string($_POST['username']); 
          $password = $mysqli->real_escape_string($_POST['password']); 

          // Construct SQL statement for query & execute 
          $sql              = "SELECT * FROM users WHERE username = '" . $username . "' AND password = '" . md5($password) . "'"; 
          $result = $mysqli->query($sql); 

          // If one row is returned, username and password are valid 
          if (is_object($result) && $result->num_rows == 1) { 
                        // Set session variable for login status to true 
                        $_SESSION['logged_in'] = true; 
                        redirect('../index.php'); 
          } else { 
                        // If number of rows returned is not one, redirect back to login screen 
                        redirect('../login.php'); 
          } 
 } 
 ?> 
```

在我的受限页面上，我有：

```
<?php 
 // Start session 
 session_start(); 
 if ( (isset($_POST['username'])) || (isset($_POST['password'])) { 
                       $user = $_SESSION['username'];
          } 
  require_once('includes/functions.inc.php'); 
 if (check_login_status() == false) { 
          redirect('login.php'); 
  } 
 ?> 
 <!DOCTYPE html> 
<html> 
<body>
<div id="page">

  <a class="welcome">
    Welcome:  <?php echo $user; ?>
  </a>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:40:57.510

使用 $_SESSION['username'] = $_POST['username'];

然后回显 $_SESSION['username']

**编辑**

```
<?php 

// Start session 
session_start(); 

if (isset($_POST['username']) || isset($_POST['password'])) { 
    require_once('includes/functions.inc.php'); 
    if (check_login_status() == false) { 
        redirect('login.php');
    }
    $_SESSION['username'] = $_POST['username'];
} 

?> 

<!DOCTYPE html> 
<html> 
<body>
<div id="page">

  <a class="welcome">
    Welcome:  <?php echo $_SESSION['username']; ?>
  </a>
 </div> 
```

# apache-chainsaw - 是否可以在 Eclipse 中的 Java 项目中使用 Apache Chainsaw 查看器？

> ID：13768980
> 
> 赞同：0
> 
> 时间：2012-12-07T18:34:26.403
> 
> 标签：apache-chainsaw

我想知道[Chainsaw](http://logging.apache.org/chainsaw/)是否对 Eclipse 来说太旧了？我正在处理的 java 项目正在使用 JDK 1.5 。

它是否需要与 Eclipse 兼容？[因为我确实找到了另一个名为LogViewer](http://marketplace.eclipse.org/content/logviewer)的日志查看器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:12:36.267

Chainsaw V2 是一个独立的应用程序，可以很好地与 JDK 1.5 一起使用 - 如果您的意思是使用 socketappender，假设您发送的 log4j 版本与 Chainsaw 使用的版本匹配（log4j 1.2.x）。

如果您不想使用 socketappender，您可以使用 fileappender - 它更容易 - 在 Chainsaw 配置屏幕中，将其指向包含 fileappender 的 log4j.properties 或 log4j.xml，它将构建正确的配置以跟踪您的日志文件。

网站上提供的 Chainsaw V2 确实很旧 - 最新的 Chainsaw V2 开发人员快照可在此处获得：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# snmp - 我正在尝试通过 snmptrap 发送 snmp 消息

> ID：13768982
> 
> 赞同：2
> 
> 时间：2012-12-07T18:34:32.163
> 
> 标签：snmp

我正在尝试从命令行发送带有 snmptrap 的 snmp 消息，并且手册不是很清楚。

我已成功发送示例消息（10.0.0.1 == 我将消息发送到的位置）

```
snmptrap -v 1 -c private 10.0.0.1 NET-SNMP-EXAMPLES-MIB::netSnmpExampleHeartbeatNotification "" 6 17 "" netSnmpExampleHeartbeatRate i 13546 
```

但是当我想发送重新同步消息时，例如：

```
snmptrap -v 1 -c private 10.0.0.1 HW-IMAPV1NORTHBOUND-TRAP-MIB::hwNmNorthboundEventSynchronizationCommandStart 
```

我需要添加更多的论点。我尝试添加 myip:myport:date:date 或仅添加 myip:myport，但没有成功。我不太清楚以下论点应该是什么。手册页：

```
snmptrap -v 1 [COMMON OPTIONS] [-Ci] enterprise-oid agent generic-trap specific-trap uptime [OID TYPE VALUE] 
```

什么应该是通用陷阱，特定陷阱等？

从 MIB 文件：

: 1.3.6.1.4.1.2011.2.15.1.7.7.4

hwNmNorthboundEventSynchronizationCommandStart OBJECT-TYPE SYNTAX OCTET STRING ACCESS 读写 STATUS 强制 描述

省略 dst 标志的格式：- IP:port:start time:end time:timezone，将认为 dstflag 为 0

是否有人比我有更多的 SNMP 经验来理解我需要在命令行争论中添加什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:00:28.620

我不知道我是否应该删除这个问题，或者留下它，但我的问题部分是因为不知何故没有读取 mib 文件，我不得不直接使用 OID。否则“参数”取决于 mib 文件，6 总是 6，另一方面，17 应该对应于 mib 的 oid 中的最后一个数字。

# responsive-design - 响应式图像网格图像大小不一致

> ID：13768993
> 
> 赞同：2
> 
> 时间：2012-12-07T18:35:16.233
> 
> 标签：responsive-design, image-scaling, css

我正在创建一个全宽的图像网格，它使用媒体查询来更改有多少列图像。你可以在这里看到一个工作演示：http: [//vitaminjdesign.com/grid/](http://vitaminjdesign.com/grid/)

使用`img{max-width: 100%}`图像拉伸到其容器的宽度。这很好用，并且演示正在运行。如您所见，每个图像之间应该有 1px 的空间。我使用的是边界框模型，所以空间是通过使用 padding-right 创建的。

但是，如果您调整窗口大小，您会注意到图像之间的 1px 边距有时会发生变化，并且似乎在图像之间/下方具有这些不一致的空白量。

在检查每张图像后，浏览器会以略微不同的尺寸（1px 差异，但仅此而已）渲染图像。这会产生这些不均匀的线条。问题是，如果每个图像的尺寸完全相同，它们是如何以略微不同的尺寸呈现的（这又会导致这个布局问题）？如果您检查每张图像，您会注意到尺寸有时不同，有时相同（取决于屏幕宽度）。

下面的CSS：

```
 * { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}
    #work{width:100%; clear:left;}
    #work li{width:20%; height:auto; padding-right: 1px;  padding-bottom: 1px; float:left; position: relative;  transition: all 0.1s ease-in-out; -moz-transition: all 0.1s ease-in-out; -webkit-transition: all 0.1s ease-in-out;}
    #work li a{display: block; position: relative; width: 100%; height: auto;}
    #work li img{display: block; max-width: 100%; height: auto; } 
```

我不会在这里列出媒体查询，但它们所做的只是改变列表项的宽度。

关于为什么会发生这种情况以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:24:38.177

删除 * 选择器上的边距属性为我解决了这个问题。

```
* {
  -moz-box-sizing: border-box;
  font-weight: normal;
  padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:28:44.740

问题是因为每个列表项都有一个计算宽度。因为除了最后一列之外的所有列都有一个 padding-right / border-right，它们实际上具有不同的宽度，从而使图像具有不同的宽度/高度。通过删除列的最后一项上的零填充/边框规则，所有图像都具有完全相同的宽度和高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:40:37.893

问题出在您的媒体查询和第 n 个子选择器上。但我不太确定为什么设置`border-right: none;`会为网格添加 1px 的高度。要解决此问题，只需删除`border-right: none;`此选择器内部：

```
#work li:nth-child(3n+3) {
   border-right: none; //Delete this
}

#work li:nth-child(2n+2) {
   border-right: none; //Delete this
} 
```

# visual-studio - 实体框架资源文件不作为构建脚本的一部分构建

> ID：13768998
> 
> 赞同：2
> 
> 时间：2012-12-07T18:35:46.540
> 
> 标签：visual-studio, entity-framework, msbuild, visual-studio-2012

我有一个构建 ASP.NET Web 应用程序项目的批处理文件，但它没有在核心编译过程中接收实体框架资源文件。

构建脚本是：

```
set proj_name=MyProject
set proj_path=C:\...\path-to-project\
set pkg_name=MyProject.zip
set build_config=Release
set platform=AnyCPU
set msbuild=%windir%\Microsoft.NET\Framework\v4.0.30319\msbuild.exe

%msbuild% "%proj_path%%proj_name%.csproj"  /t:package /p:OutPath="%proj_path%obj" /p:OutputPath="%proj_path%bin" /p:Configuration=%build_config% /p:Platform=%platform% 
```

虽然脚本完成时没有错误，但 Web 应用程序因`Unable to load the specified metadata resource`错误而崩溃。

但如果我做 a `Visual Studio Publish`，一切正常。所以这让我去研究我的构建输出。

在仔细比较了`Visual Studio Publish`输出和我的构建脚本输出之后，我发现在我的构建脚本输出`CoreCompile`部分中`csdi`，`msl`和`ssdl`文件丢失了。但是这些文件存在于文件系统上，并且是 and 的`Solution`一部分`Project`。所以我不确定为什么在构建过程中不包含它们。下面是构建输出的一部分：

Visual Studio 发布输出：

```
/debug:pdbonly /optimize+ /out:obj\Release\Dnr.MotorPool.dll 
/resource:obj\Release\edmxResourcesToEmbed\DataAccess\MyDataModel.csdl,DataAccess.MyDataModel.csdl 
/resource:obj\Release\edmxResourcesToEmbed\DataAccess\MyDataModel.msl,DataAccess.MyDataModel.msl 
/resource:obj\Release\edmxResourcesToEmbed\DataAccess\MyDataModel.ssdl,DataAccess.MyDataModel.ssdl 
/target:library 
/utf8output all the cs files... 
```

我的构建脚本输出：

```
/debug:pdbonly /optimize+ /out:obj\Release\Dnr.MotorPool.dll 
/target:library 
/utf8output all the cs files... 
```

很明显，有 3 个丢失的文件。那我该如何修改我的构建脚本呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:43:01.817

```
%msbuild% "%proj_path%%proj_name%.csproj" /T:Rebuild;Package 
```