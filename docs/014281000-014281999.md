# StackOverflow 问答 14281000-14281999

# ruby - 如何将另一个模块的类方法导入到我的 ruby 类/模块中？

> ID：14281000
> 
> 赞同：1
> 
> 时间：2013-01-11T15:13:02.563
> 
> 标签：ruby

我知道我可以导入 instance_methods，但是可以导入类方法吗？如何导入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:16:40.187

一个常见的成语是这样的：

```
module Bar
  # object model hook. It's called when module is included. 
  # Use it to also bring class methods in by calling `extend`.
  def self.included base
    base.send :include, InstanceMethods
    base.extend ClassMethods
  end

  module InstanceMethods
    def hello
      "hello from instance method"
    end
  end

  module ClassMethods
    def hello
      "hello from class method"
    end
  end
end

class Foo
  include Bar
end

Foo.hello # => "hello from class method"
Foo.new.hello # => "hello from instance method" 
```

### InstanceMethods 模块有什么用？

当我需要模块在我的类中包含实例和类方法时，我使用两个子模块。通过这种方式，方法被整齐地分组，例如，可以在代码编辑器中轻松折叠。

感觉也比较“统一”：两种方法都是从`self.included`hook中注入的。

无论如何，这是个人喜好的问题。此代码的工作方式完全相同：

```
module Bar
  def self.included base
    base.extend ClassMethods
  end

  def hello
    "hello from instance method"
  end

  module ClassMethods
    def hello
      "hello from class method"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:48:05.750

简短的回答是：不，您不能使模块对象本身的方法（模块的“类”方法）位于另一个对象的继承链中。@Sergio 的答案是一种常见的解决方法（通过将“类”方法定义为另一个模块的一部分）。

您可能会发现以下图表具有指导意义（点击查看完整尺寸或[获取 PDF](http://phrogz.net/RubyLibs/RubyMethodLookupFlow.pdf)）：

[![Ruby 方法查找流程](../Images/215ae57adcb3ddff3e26fcac482cd008.png)](https://i.stack.imgur.com/iTy0F.png)
[（来源：[phrogz.net](http://phrogz.net/RubyLibs/RubyMethodLookupFlow.png)）]

[*注意：此图尚未针对 Ruby 1.9 进行更新，其中有额外的核心对象[`BasicObject`](https://ruby-doc.org/core-2.6.4/BasicObject.html)，例如稍微改变根流。*]

# ruby - 什么是受污染的对象，我们应该何时清除它们？

> ID：14281004
> 
> 赞同：18
> 
> 时间：2013-01-11T15:13:13.223
> 
> 标签：ruby, ruby-1.9, taint, taint-checking

什么时候需要对 Ruby 对象进行污染，什么时候应该对它们进行去污染？受污染对象的概念如何使 Ruby 脚本在安全模式下运行？任何人都可以详细说明这一点以通过一些代码片段来明确这个概念吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T15:33:46.963

### 什么是污点？

根据定义，用户输入受到污染。例如：

```
string = gets
string.tainted?
# => true 
```

您也可以手动污染对象。

```
string = 'Not yet tainted.'
string.tainted?
# => false

(string = 'Explicitly taint me!').taint
string.tainted?
# => true 
```

### 为什么不污染对象？

通常，只有在验证和/或清理对象之后，您才会对其进行净化。对于您不想在不受信任的字符串或其他对象上运行的某些操作，或者当您的安全级别需要未污染的对象执行所需的操作时，取消污染对象会将其标记为“安全”。

### 清除对象

清除对象的最简单方法是对其调用[Object#untaint](http://ruby-doc.org/core-1.9.3/Object.html#method-i-untaint)方法。例如，如果您的*字符串*变量包含一个被污染的对象，那么：

```
(string = "Let's taint this string!").taint
string.untaint.tainted?
# => false 
```

### 有关受污染对象的更多信息

*您可以在Programming Ruby*的 Safe章节中的[Locking Ruby 中](http://ruby-doc.com/docs/ProgrammingRuby/html/taint.html)找到有关受污染对象的更多信息。

# android - SQLite 为两个或多个字段插入具有 _id 值的记录

> ID：14281009
> 
> 赞同：0
> 
> 时间：2013-01-11T15:13:22.097
> 
> 标签：android, sqlite, insert

我有一个案例，我想用 database.insert(table, null, values) 在 SQLite 中插入记录。

```
TABLE t2 (_id, field1, field2)
..

val.setVal1(null);
val.setVal2(val2);
..

if(val.getVal1==null){
  values.put(field1, _id);
}else{
    values.put(field1, var.val1);
}
values.put(field2, var.val2);

database.insert("t2", null, values); 
```

有可能像这样“values.put(field1, _id);”做某事吗？_id 在 database.insert() 中生成。

**注意：**我正在寻找一个插入调用的解决方案。使用 (field1=_id) 插入和更新行很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:32:41.880

我想我现在明白了。您在询问是否可以在特定的 SQLite 行`_id`字段中输入值（**如果**它在您的`val`对象中可用）。否则，您希望数据库在插入时自动为该列创建唯一 ID，就像通常所做的那样。它是否正确？

为此，我会认真重新考虑这个目的。您永远不应该为该`_id`列指定值，因为它必须是唯一的，否则您将抛出异常。此外，它的唯一目的是成为系统的唯一标识符，因此您个人知道该值对您来说应该没有用。

如果您仍然需要此功能，我建议您在表中创建另一个字段（很像`_id`列但**不是**它），您可以用随机生成的数字或`val.getVal1`值填充该字段。

# java - 从数据库填充组合框

> ID：14281016
> 
> 赞同：0
> 
> 时间：2013-01-11T15:13:41.833
> 
> 标签：java, html, mysql, sql, jsp

```
<select name="supplier">
    <%
        try {
        Connection conn = JavaConnect.ConnectDb();
        Statement stmt = conn.createStatement();
        ResultSet rs; 
        rs = stmt.executeQuery("SELECT name FROM supplier "); 

        while(rs.next()) {
            out.write("<option value ="+rs.getString("name")+"</option>");

        }
        rs.close();
        stmt.close();

        } 

        catch(Exception e) {
            System.err.print("Sorry");
                           }
%>
</select> 
```

我正在尝试在 jsp 页面中填充组合框并尝试了上述方法，但我得到了一个空的组合框。我研究了其他答案，但其中大多数似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:21:04.510

首先，您不应该在 JSP 页面中使用 java 代码。[EL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)就是为了这个目的。所有这些代码都应该进入服务器端。检查[SO Servlets Wiki 页面](https://stackoverflow.com/tags/servlets/info)的正确使用。

但是可以说你的结果集正在返回一些东西。所以试试这个：

```
out.write("<option value=" + rs.getString("name") + ">" + rs.getString("name") + "</option>"); 
```

如果您再次看到空列表，那么您的结果集是空的。

# php - 3字段MySQL查询

> ID：14281019
> 
> 赞同：0
> 
> 时间：2013-01-11T15:13:45.397
> 
> 标签：php, mysql

我目前有一个包含 3 个字段的表

```
Device1, Device 2 and Device3 
```

如果其中有设备，我的最终目标是显示每个人的信息

喜欢什么id

> 如果设备 1 为空 > 显示“您当前没有设备。单击此处添加一个'如果设备 1 已满 > 检查设备 2
> 
> 如果设备 2 为空 > 输出设备 1
> 
> 如果设备 2 已满 > 检查设备 3
> 
> 如果设备 3 为空 > 输出设备 1 + 2
> 
> 如果设备 3 已满 > 输出设备 1 + 2 + 3

基本上，当我开始编写脚本以添加设备时，数据库最终的工作方式 - 前一个设备必须已满才能添加另一个设备，因此它们将始终按顺序运行。

我不太确定从哪里开始，我想不出另一种方式来描述检查的逻辑，如果令人困惑，请道歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:30:25.717

```
SELECT CASE WHEN Device1 = '' OR Device1 IS NULL
            THEN 'You currently have no devices. Click here to add one'
            WHEN Device2 = '' OR Device2 IS NULL
            THEN Device1
            WHEN Device3 = '' OR Device3 IS NULL
            THEN CONCAT(Device1,' + ',Device2)
            ELSE CONCAT(Device1,' + ',Device2,' + ',Device3)
       END AS output
     , Device1
     , Device2
     , Device3
  FROM mytable 
```

# android - Android Intents.SHOW_OR_CREATE_CONTACT 始终只显示 Uri 字符串

> ID：14281020
> 
> 赞同：0
> 
> 时间：2013-01-11T15:13:46.637
> 
> 标签：android

我需要在创建新联系人之前对其进行显示/交互，并且我需要一种简单的方法将其添加到电话联系人中。

这是我使用的代码：

```
String contactPhone = "33333333";   
Uri contactUri = Uri.parse(String.format("tel: %s", contactPhone));
Intent addContactIntent = new Intent(
                ContactsContract.Intents.SHOW_OR_CREATE_CONTACT, contactUri); 
addContactIntent.putExtra(ContactsContract.Intents.Insert.NAME, "FirstName" );
addContactIntent.putExtra(ContactsContract.Intents.Insert.COMPANY,"CompanyName");
addContactIntent.putExtra(ContactsContract.Intents.Insert.PHONE,contactPhone);
addContactIntent.putExtra(ContactsContract.Intents.Insert.EMAIL,"contact@email.com");
startActivity(addContactIntent); 
```

这就是结果。问题是 Intent 只显示电话而不是添加的所有信息。

![在此处输入图像描述](../Images/def2c633490cdb4ac9d2f1609bf2ee2b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:24:34.563

ContactsContract.Intents.Insert.ACTION 如果您想在创建之前进行交互：

```
Intent intent = new Intent(ContactsContract.Intents.Insert.ACTION,ContactsContract.Contacts.CONTENT_URI);
intent.putExtra(ContactsContract.Intents.Insert.NAME, getName());
intent.putExtra(ContactsContract.Intents.Insert.COMPANY, getCompany());
intent.putExtra(ContactsContract.Intents.Insert.EMAIL, getEmail());
intent.putExtra(ContactsContract.Intents.Insert.PHONE, getPhone());
intent.putExtra(ContactsContract.Intents.Insert.POSTAL, getAddress());
startActivity(intent); 
```

这工作得很好。我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-03T02:09:24.450

该站点（[http://wiresareobsolete.com/2011/10/simplifying-interaction-with-contacts/](http://wiresareobsolete.com/2011/10/simplifying-interaction-with-contacts/)）显示并给出示例）SHOW_OR_CREATE_CONTACT 只能触发“tel”或“mailto”/email 进行搜索。

# wcf - WCF 使用 2 种身份验证方法和 Windows Identity Foundation

> ID：14281025
> 
> 赞同：1
> 
> 时间：2013-01-11T15:14:04.970
> 
> 标签：wcf, authentication, wif

我正在开发一个 WCF 项目，该项目将成为我们的新服务层。

这些服务将由 2 个独立的客户端调用，第一个是 WPF 应用程序，另一个是 ASP.Net Web 应用程序。WPF 客户端将由内部用户运行，并将通过域身份验证对服务进行身份验证，并在该用户的上下文中运行。另一个将由外部用户使用，需要使用一些单独的机制进行身份验证，然后在我们的域上模拟“WebUser”帐户。

我正在阅读一些有关 Windows Identity Foundation 的信息，听起来这可能很合适。我是否认为我可以拥有 2 个令牌服务，一个用于域身份验证，一个用于 ASP.Net 成员身份验证（或类似的等价物），并让每个客户端从相关 STS 获取它的令牌并将其传递给 WCF服务？

我假设有一个可以开箱即用的 STS 用于域身份验证，但是我是否必须自己实现第二个来验证 Web 用户？我找不到很多这方面的信息。

我是在思考正确的路线，还是应该为每个服务创建决斗端点，每个服务都有不同的身份验证机制？还是我应该做一些完全不同的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:45:59.103

您应该看看[身份服务器](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/)，因为它确实可以处理这种情况。

领导上述项目的人有一个关于这个确切场景的[精彩视频！](http://pluralsight.com/training/courses/TableOfContents?courseName=iac-wcf&highlight=)您需要注册才能观看，但他们提供免费试用。

基本上，您从身份提供者那里获得一个令牌（内部客户端的 Windows ADFS，以及您为外部用户决定的任何内容）。您将将此令牌提供给联合网关（可能是身份服务器，但也可能是 Azure ACS）。这将返回一个身份验证令牌，然后您可以将其与您的服务一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T22:58:51.350

使用基于声明的身份验证/WIF 的最大优势在于，身份验证用户的任务和用户属性的管理都从应用程序转移到了 STS/身份提供者。

您正在开发一个服务层，但使用 WIF 的真正好处在于编写在您的层之上的应用程序。WPF 应用程序将不再需要连接到 AD 并获取用户的组来确定他们被允许做什么。这些组将作为用户/WIF 提供的令牌中的声明可见。

Web 应用程序（它只是一个 Web 应用程序还是更多？）将不再需要 ASP.Net Membership 数据库以及伴随的用户管理。此功能已移至 STS。

这是有代价的。（总有，不知何故......）基于声明的身份验证有一个相当陡峭的学习曲线。所有相关人员的季度都需要一段时间才能下降。

因此，您的问题的答案取决于基于您的服务层构建的 Web 应用程序拥有什么样的用户以及有多少用户。以及他们想知道多少。您能否信任 Google/Facebook/Windows Live 进行身份验证？用户是否已经在您域中的现有数据库中？维护用户目录需要做多少工作？您的营销人员是否希望定期向他们发送电子邮件？等等。

这可能不只是由服务层的开发人员来决定，而是要与组织中的其他人讨论。

如果好处不是特别大，另一种选择是简单地将这些职责保留在 Web 应用程序的服务器上。每个 Web 应用程序都有一个很好的旧 ASP.Net 成员数据库，它会自行对用户进行身份验证。当从服务层询问查询时，它将显示其 Web 服务器证书并指定用户的名称和类型。

如果好处足够大，原则上您可以将 ADFS 2.0 用于一切。它现在还可以存储外部用户，如果您已经拥有 Active Directory，它是免费的。或者罗斯推荐的 ThinkTecture 2.0 服务器。它更容易定制，而且您的系统管理员和安全人员可能不会太热衷于向 ADFS 服务器开放防火墙。

微软[对 WIF 有一些很好的阅读](http://msdn.microsoft.com/en-us/security/aa570351.aspx)，特别是[基于声明的体系结构概述](http://download.microsoft.com/download/7/D/0/7D0B5166-6A8A-418A-ADDD-95EE9B046994/Claims-Based%20Identity%20for%20Windows.pdf)。

# c# - 实现色偏去除的SVM图像标注

> ID：14281026
> 
> 赞同：1
> 
> 时间：2013-01-11T15:14:07.317
> 
> 标签：c#, image, algorithm, image-processing

我正在实现基于 [ [1 ] 的](http://www.ivl.disco.unimib.it/papers2003/Color%20BalancingPR.pdf)[自动色偏去除](https://stackoverflow.com/questions/14203945/automatic-enhancement-of-scanned-images)，这似乎是一种强大、简单且性能良好的方法。为了避免通过主要颜色（例如大面积的植被或水）去除固有色偏，他们使用 [ [2](http://www.ivl.disco.unimib.it/papers2003/IntImgV04%20-%20ImageAnnotationUsingSvm.pdf) ] 描述的图像注释方法。

偏色检测器使用多类支持向量机将图像区域分类为天空、皮肤、植被、水或其他。我的问题是 [ [2](http://www.ivl.disco.unimib.it/papers2003/IntImgV04%20-%20ImageAnnotationUsingSvm.pdf) ] 只描述了方法，它们不包括训练 SVM 产生的超平面的参数。训练一个新的 SVM 超出了我的范围，但我还没有找到任何类似的工作，包括现成的数据。我真的很感激以下之一：

A. 使用 [ [2](http://www.ivl.disco.unimib.it/papers2003/IntImgV04%20-%20ImageAnnotationUsingSvm.pdf) ] 中的方法训练产生的一组超平面参数。

B.天空/皮肤/植被/水的其他一些图像注释方法，包括训练参数或不需要训练。

C. 一些包含天空/皮肤/植被/水的注释区域的免费图像数据库，我可以使用[ [2](http://www.ivl.disco.unimib.it/papers2003/IntImgV04%20-%20ImageAnnotationUsingSvm.pdf) ]中的方法来训练一个新的SVM。

### 参考

1.  F. Gasparini 和 R. Schettini “[使用简单图像统计的数码照片色彩平衡](http://www.ivl.disco.unimib.it/papers2003/Color%20BalancingPR.pdf)”
2.  C. Cusano、G. Ciocca 和 R. Schettini “[使用 SVM 进行图像标注](http://www.ivl.disco.unimib.it/papers2003/IntImgV04%20-%20ImageAnnotationUsingSvm.pdf)”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:42:25.587

我从其中一位作者那里得到了答案，他们没有留下任何代码或数据。相反，他将我指向[colorconstancy.com](http://colorconstancy.com/)，其中包含指向源代码和不同图像数据库的链接。他还提到了[web.mit.edu/torralba/www/](http://web.mit.edu/torralba/www/)，其中包含一个带注释的图像数据库，我将使用它来训练算法。

# c - MPI：如何使其他处理器等待主处理器直到其工作完成

> ID：14281027
> 
> 赞同：1
> 
> 时间：2013-01-11T15:14:08.443
> 
> 标签：c, mpi

首先，我在互联网上搜索过，但找不到答案。也许原因是我是 MPI 的新手。这是问题：

首先，我希望主处理器读取一个 txt 文件。然后获取足够的信息。但在此期间，我希望其他人等待阅读过程。

这是我的代码：

```
int processorID;  
int numberOfProcessors;  

int main(int argc, char* argv[]){
MPI_Init(&argc, &argv);  
MPI_Comm_size(MPI_COMM_WORLD ,&numberOfProcessors);  
MPI_Comm_rank(MPI_COMM_WORLD ,&processorID);

int a, b, c;

if(MASTER){
    FILE *myFile;           
    myFile=fopen("input.txt", "r");

    fscanf(myFile, "%d", &a);
    fscanf(myFile, "%d", &b);
    fscanf(myFile, "%d", &c);

}
    MPI_Barrier(MPI_COMM_WORLD);

    if(SLAVE){
            printf("%d\n" ,a);
            printf("%d\n" ,processorID);
    }
MPI_Finalize();  
return 0; 
```

}

我不应该使用 MPI_Barrier 吗？例如我有5个处理器，0是master。感谢 MPI_Barrier，其他 1-2-3-4 不必等到 0 才读完？但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:23:32.770

其他进程看不到更新的值，`a`因为它是本地进程。使用 . 将其发送给其他人`MPI_Bcast`。这样所有进程都在等待`MPI_Bcast`。

我将您的代码修改如下；

```
int processorID;  
int numberOfProcessors;  

int main(int argc, char* argv[]){
MPI_Init(&argc, &argv);  
MPI_Comm_size(MPI_COMM_WORLD ,&numberOfProcessors);  
MPI_Comm_rank(MPI_COMM_WORLD ,&processorID);

int a, b, c;

if(!processorID){ // master
    FILE *myFile;           
    myFile=fopen("input.txt", "r");

    fscanf(myFile, "%d", &a);
    fscanf(myFile, "%d", &b);
    fscanf(myFile, "%d", &c);
    MPI_Bcast(&a, 1, MPI_INT, 0, MPI_COMM_WORLD);

}
    //MPI_Barrier(MPI_COMM_WORLD);
else {
    //if(SLAVE){
            // blocks at Bcast waiting for a. Prints value read by MASTER
            MPI_Bcast(&a, 1, MPI_INT, 0, MPI_COMM_WORLD); 
            printf("%d\n" ,a);
            printf("%d\n" ,processorID);
    }
MPI_Finalize();  
return 0;  

} 
```

# asp.net - 对 ASP.Net 应用程序的机器人请求

> ID：14281028
> 
> 赞同：0
> 
> 时间：2013-01-11T15:14:26.063
> 
> 标签：asp.net, web-crawler

有没有办法确定对 ASP.Net 应用程序的 http 请求是从浏览器还是从机器人/爬虫发出的？我需要区分这两种请求。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:20:37.873

不，没有。没有万无一失的证据可以确定请求的来源——所有 HTTP 标头都可以被欺骗。

一些爬虫（GoogleBot 等）会为自己做广告，但这并不意味着浏览者不能伪装成 GoogleBot。

最好的策略是寻找众所周知的机器人（通过`User-Agent`标头，可能通过已知的 IP 地址）并假设它们是爬虫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:45:25.140

看看[Request.Browser.Crawler](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.crawler.aspx)，但这仅适用于某些爬虫。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:21:15.260

嗯...如果机器人想被识别为机器人，是的。因为他可以很容易地模拟出他是一个网络浏览器。

Personnaly，我将使用此列表开始：[http ://www.robotstxt.org/db.html](http://www.robotstxt.org/db.html)

# javascript - 从 RadWindow OnClientBeforeClose JavaScript 事件中获取价值

> ID：14281032
> 
> 赞同：1
> 
> 时间：2013-01-11T15:14:37.473
> 
> 标签：javascript, asp.net, telerik, client-side, radwindow

我昨天发布了一个非常相似的问题，但到目前为止没有人回答。现在我改变了功能并遇到了以下问题。在这种情况下，我有一个 RadWindow，我通过单击按钮从文件后面的代码（.aspx 页面）打开它。在这个 rad 窗口上，我有一个隐藏字段，我在其中设置值，现在 OnClientBeforeClose 事件我想从隐藏字段中获取值并将其分配给我的 .ASPX 页面上的一个文本框，该页面是这个 Rad 窗口的父页面。可以请任何人给我任何想法如何做到这一点。我在 Telerik 和 StackOverflow 上看过很多例子，但没有什么对我有用。提前致谢。

我的 .Aspx.cs 页面中的 Rad 窗口声明

```
 RadWindow window = new RadWindow();
    window.Title = "Comments Pick List";
    window.ID = "CommentsListPopUpRadWindow";
    window.NavigateUrl = "CommentsList.aspx";
    window.OnClientBeforeClose = "CommentsListPopUpRadWindowBeforeClose";
    window.Skin = "Metro";
    window.Behaviors = WindowBehaviors.Close;
    window.KeepInScreenBounds = true;
    window.VisibleStatusbar = false;
    window.Modal = true;
    window.Width = 750;
    window.MinHeight = 510;
    window.VisibleOnPageLoad = true;
    window.EnableViewState = false;
    RadWindowManager1.Windows.Add(window); 
```

RadWindow .ASPX 页面上的 JavaScript 函数，我将值设置为隐藏字段

```
function displayItem(id) {
    var selectedText = document.getElementById(id);
    document.getElementById('hiddenSelectedTextField').value = selectedText.innerText;
} 
```

我的 .ASPX 父页面上的 JavaScript OnClientBeforeClose 函数（关闭 RadWindow），我试图从隐藏字段中获取值并在父页面的 TextBox 中设置

```
 function CommentsListPopUpRadWindowBeforeClose(oWnd, args) {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:12:57.867

您可以`RadWindow`从子页面轻松地将参数传递给 的 Close 函数：

```
function GetRadWindow() {
     if (window.radWindow) {
         return window.radWindow;
     }
     if (window.frameElement && window.frameElement.radWindow) {
         return window.frameElement.radWindow;
     }
     return null;
}
function ChildClose() {
     GetRadWindow().Close(document.getElementById('hiddenSelectedTextField').value);
} 
```

然后通过指定其`OnClose`功能检索父页面中的参数：

在 aspx.cs 文件中添加：

```
window.OnClientClose = "CommentsListPopUpRadWindow_OnClose"; 
```

并在 aspx 父页面中：

```
function CommentsListPopUpRadWindow_OnClose(radWindow, args) {
    var arg = args.get_argument();
} 
```

# php - XMPPHP 作为实时支持聊天

> ID：14281047
> 
> 赞同：0
> 
> 时间：2013-01-11T15:15:19.183
> 
> 标签：php, xmpp, pidgin, xmpphp

我的想法是在网站上集成实时支持聊天。用户文本通过 xmpphp 发送到我的 jabber 客户端，并带有 jabberbot 发件人 ID，如果我回答，jabber bot 会接受我的回答并将文本传输给用户。

只有一个问题。如何区分不同的用户或不同的聊天？我不希望所有用户都看到答案，而是希望提问的用户看到。是否有一种我可能错过的独特聊天 ID 或其他可能性？

用户 => 网站 => 聊天机器人 => 我

我想回答并发回给用户，但是如何从我的回答中找出正确的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:41:37.627

上次我必须解决这个问题时，我使用了这个架构：

![在此处输入图像描述](../Images/adad697b320ee82fcb2ed13dacb4a50e.png)

[放大图片](http://i48.tinypic.com/wgu81g.png)

网络服务器提供 JavaScript / jQuery 或 flash 聊天。

聊天开始后，客户端向服务器询问所有 1 秒的新消息。

## 1 秒轮询的替代方案

如果这对您来说太慢了，请查看[websockets](http://en.wikipedia.org/wiki/WebSocket)。

[http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial)

[http://demo.cheyenne-server.org:8080/chat.html](http://demo.cheyenne-server.org:8080/chat.html)

但是 php 无法提供 Websockets。在那里你需要改变 php + apchache agaist [node.js](http://nodejs.org/)或[java](https://github.com/TooTallNate/Java-WebSocket)。

## 纯 HTTP PHP 方法

在 PHP 中，您将连接到[PsyBnc](http://www.psybnc.at/)，并为您轮询来自支持者的消息。

PsyBnc[是](http://en.wikipedia.org/wiki/BNC_%28software%29)一个[IRC](http://www.cse.ohio-state.edu/cgi-bin/rfc/rfc1459.html)机器人。

不直接连接到 XMPP 或 BitlBee 的原因是那些协议不喜欢摆动的连接，与 PHP 断开连接。因为您无法使会话保持活动状态，所以您需要一些用于经常和短连接的东西。这是 PsyBnc。

我会使用这样的东西：

[http://pear.php.net/package/Net_SmartIRC/download](http://pear.php.net/package/Net_SmartIRC/download)

```
<?php
session_start();

$message = $_GET['message'];
$client_name = $_GET['client_name'];

if (empty($_SESSION['chat_id'])) {
    $_SESSION['chat_id'] = md5(time(). mt_rand(0, 999999));
}

if (empty($_SESSION['supporter'])) {
    // how do you select the supporter? 
    // only choose a free?
    // We send first message to all supporter and the first who grapped got the chat (where only 3 gues)
}

$irc_host = "127.0.0.1";
$irc_port = 6667; // Port of PsyBnc
$irc_password = "password_from_psy_bnc";
$irc_user = "username_from_psy_bnc";

include_once('Net/SmartIRC.php');

class message_reader
{
    private $messages = array();

    public function receive_messages(&$irc, &$data)
    {
        // result is send to #smartirc-test (we don't want to spam #test)
        $this->messages[] = array(
            'from' => $data->nick, 
            'message' => $data->message,
        );  
    }

    public function get_messages() {
        return $this->messages;
    }
}

$bot = &new message_reader();
$irc = &new Net_SmartIRC();
$irc->setDebug(SMARTIRC_DEBUG_ALL);
$irc->setUseSockets(TRUE);
$irc->registerActionhandler(SMARTIRC_TYPE_QUERY|SMARTIRC_TYPE_NOTICE, '^' . $_SESSION['chat_id'], $bot, 'receive_messages');
$irc->connect($irc_host, $irc_port);
$irc->login($_SESSION['chat_id'], $client_name, 0, $irc_user, $irc_password);
$irc->join(array('#bitlbee'));
$irc->listen();
$irc->disconnect();

// Send new Message to supporter
if (!empty($message)) {
    $irc->message(SMARTIRC_TYPE_QUERY, $_SESSION['supporter'], $message);
}

echo json_encode(array('messages' => $bot->get_messages())); 
```

## 将支持即时通讯工具连接到 PHP

我们已经与 PsyBnc 建立了 IRC 连接，现在我们需要从 IRC 向 ICQ、XMPP、GOOGLE TALK、MSN、YAHOO、AOI 发送消息……

这是一个名为[BitlBee](http://www.bitlbee.org/main.php/news.r.html)的不错的解决方案。BitlBee 提供了一个 IRC 服务器，可以在几乎所有即时消息协议之间传输消息。通过给这些帐户起别名。例如，您的系统只需要 1 个在 google talk、icq 的服务器帐户……以及您的支持者到这些帐户的好友列表。现在 BitleBee 将提供您的[boddylist](http://www.youtube.com/watch?v=0qqoM_kKFuk)作为 irc 聊天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:20:54.410

您的要求相当混乱。正如 Joshua 所说，您不需要 Jabber 机器人。您所需要的只是一个 Jabber 服务器——您应该已经拥有了。您所做的是，每当使用聊天功能时，您都会创建一个不稳定的用户帐户*sessionid @*yourdomain.com*，然后您可以像往常一样回复任何传入的消息，而您的网站客户端可以随时获取为其发送的消息。*

或者，您可以创建一个用户帐户 - *qa@yourdomain.com* - 并将 XMPP 资源标识符用于路由部分。XMPP 允许像 qa@ *yourdomain.com* /*sessionid* 这样的东西，你应该能够告诉你的 XMPP 库只查询一个特定的资源。大多数 XMPP 客户端软件也会默认回复特定资源并在适用时打开新对话。这种方法不如第一种“干净”，但如果您由于某种原因不能随意创建用户帐户，它会更好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T01:16:40.217

据我了解，您希望在您的网站上有一个实时聊天解决方案，允许您的访问者与您的特定代理进行一对一的聊天。

我建议在您的网站上应用某种 Javascript XMPP 库。当用户表示他们想与代理交谈时，建立与面向公众的 XMPP 服务器的连接。

从那里，您有两个选择：直接聊天或会议室。

通过直接聊天，您的用户将直接与已经登录系统的代理交谈。从那里，您的代理可以正常与访客交谈。这种方法简单明了，但它是一对一的。（对于大量流量，您可能必须在多个代理之间进行负载平衡。）

通过会议室，您的访客可以加入专门讨论该主题的特定房间，您的代理可以在房间中担任主持人。访客可以提出问题并与您的代理合作，或者他们可以与房间中的代理直接聊天。

XMPP 是一个非常灵活的协议；这实际上只是弄清楚您想要实现的目标的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:35:59.500

我不知道您使用的是什么 XMPP 服务器，但您也可以尝试使用[Fastpath 插件和用于 Openfire](http://www.igniterealtime.org/projects/openfire/plugins.jsp)的网络聊天。这旨在通过 XMPP 提供支持团队服务。

话虽如此，您的问题本身似乎仅暗示了 XMPP 的标准聊天功能，即两个用户之间的聊天功能。这只是意味着支持人员与每个提出问题的用户进行独特的聊天。没有其他用户会看到该对话。

# jsf - Init 方法在 @Viewscoped bean 中被调用两次

> ID：14281050
> 
> 赞同：4
> 
> 时间：2013-01-11T15:15:28.433
> 
> 标签：jsf, jsf-2, primefaces, annotations, postconstruct

我正在使用 Primefaces 的计划组件。我正在用数据库中的值填充它，当用户从 selectonemenu 中选择某个 ajax 事件时，将触发一个 ajax 事件（我试图只放置相关代码，如果缺少某个东西，请提醒我）：

**xhtml:**

```
 <h:outputText value="Scope :" />
 <h:selectOneMenu id="scope" value="#{scheduleView.scope}">                    
   <f:selectItems value="#{lookup.scopeCombo}"/>
   <p:ajax process="scope" update="schedule, scheduleForm, scheduleFormPG" listener="#{scheduleView.changeScopeType()}"/>
 </h:selectOneMenu> 

<p:schedule id="schedule" value="#{scheduleView.model}" editable="true"/> 
```

**支持豆：**

```
@ManagedBean
@ViewScoped
public class ScheduleView implements Serializable { 

@PostConstruct
    public void init() {
        System.out.println("Init ");
        scopeChange();                
    } 

    public void scopeChange(String scope){
        System.out.println("scopeChange ");
        model.clear();
        events = (List<Event>) commonServis.bringEverythingByCriteria(Event.class, "scope" , scope);   
        for(int i= 0; i<events.size();i++){
        model.addEvent(new DefaultScheduleEvent(events.get(i).getAd(), events.get(i).getStartDate(),events.get(i).getEndDate()));
    }

    public void changeScopeType() {
    System.out.println("changeScopeType ");
        scopeChange (scope);
} 
```

上述代码的输出是：

```
Init
scopeChange 
```

当用户更改 selectonemenu 中的值时：

```
changeScopeType
Init
scopeChange 
```

它应该只进入`init`一次方法。但是在`changeScopeType`触发该函数后，它会进入该`init`方法并用不相关的数据填充时间表。我认为这可能与`@Postconstruct`注释有关，但我找不到任何相关的解释。任何人都可以理解原因并提供解决方案吗？

这是完整的页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://prime.primefaces.org/ui"
                template="templates/layout.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="title">#{labels.schedule}</ui:define>
    <ui:define name="content">
        <h:form id="scheduleForm">
            <h:panelGrid id="scheduleFormPG">
                <p:growl id="msgs" />
                <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false">
                    <h:graphicImage value="resources/images/ajax-loader.gif" />
                </p:dialog>
                <p:dialog showEffect="explode" hideEffect="explode" resizable="false"
                      header="warning" widgetVar="confirmationErase" appendToBody="true" modal="true">
                    <h:outputText value="Are you sure?"/>
                    <br/>
                    <p:commandButton  value="Yes" actionListener="#{scheduleView.deleteEvent(AE)}"
                                     update="msgs, scheduleFormPG, schedule, wrapperPanel"
                                     onstart="statusDialog.show(),confirmationErase.hide()"
                                     oncomplete="statusDialog.hide(), eventDialog.hide()" process="@parent, scope" />
                    <p:commandButton value="No" onclick="confirmationErase.hide()" type="button" />
                </p:dialog>                
                <h:outputText value="scope :" />
                <h:selectOneMenu id="scope" value="#{scheduleView.scope}">                    
                    <f:selectItems value="#{lookup.scopeTypeCombo}"/>
                    <p:ajax process="scope" update="schedule, scheduleForm, scheduleFormPG" listener="#{scheduleView.changeScopeType()}"/>
                </h:selectOneMenu>                
             </h:panelGrid>            
            <p:schedule onDateSelectUpdate="wrapperPanel" 
                        onEventSelectUpdate="wrapperPanel" onEventSelectComplete="eventDialog.show()" eventSelectListener="#{scheduleView.onEventSelect}" 
                        onDateSelectComplete="eventDialog.show();"  dateSelectListener="#{scheduleView.onDateSelect}" id="schedule" value="#{scheduleView.model}" editable="true"/>
            <p:dialog id="dialog111" widgetVar="eventDialog" header="Event Information" showEffect="clip" hideEffect="clip">
                <p:panel id="wrapperPanel">                    
                    <h:panelGrid id="eventDetails" columns="2">   
                        <h:outputLabel for="eventName" value="Event Name *: " />
                        <p:inputText id="eventName" value="#{scheduleView.event.title}" required="true"/>
                        <h:outputLabel value="Start Date:" />
                        <p:calendar id="sKalender" value="#{scheduleView.event.startDate}">
                            <f:convertDateTime pattern="dd/MM/yyyy" />  
                        </p:calendar>
                        <h:outputLabel value="End Date:" />
                        <p:calendar id="eKalender" value="#{scheduleView.event.endDate}">
                            <f:convertDateTime pattern="dd/MM/yyyy" />  
                        </p:calendar>
                        <h:outputLabel value="All Day:" />
                        <h:selectBooleanCheckbox id="allDay" value="#{scheduleView.event.allDay}" />
                        <h:outputLabel value="scope: " />
                        <h:selectOneMenu id="scopeChoice" value="#{scheduleView.event.scope}">                    
                            <f:selectItems value="#{lookup.scopeTypeCombo}"/>
                         </h:selectOneMenu>                         
                          <p:commandButton onclick="confirmationErase.show()" oncomplete="eventDialog.hide()" update="wrapperPanel, msgs, schedule" type="reset" value="Delete" />
                        <p:commandButton value="Save" actionListener="#{scheduleView.addEvent(AE)}" process="@parent, scope" update="schedule wrapperPanel msgs scheduleForm" oncomplete="eventDialog.hide();"/>
                    </h:panelGrid>
                </p:panel>
            </p:dialog>
           </h:form>
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:06:50.383

问题是这行代码：

```
<p:ajax process="scope" update="schedule, scheduleForm, scheduleFormPG" listener="#{scheduleView.changeScopeType()}"/> 
```

更新正在刷新整个页面，而应该只更新时间表。当我将其更改为：

```
update="schedule" 
```

问题解决了。感谢大家的努力。

# user-interface - 移动 Vaadin 滑块

> ID：14281055
> 
> 赞同：1
> 
> 时间：2013-01-11T15:15:50.227
> 
> 标签：user-interface, vaadin

当我调用*slider.setValue()*时，它会更改内部字段*值*，但不会更改滑块的图形表示。
如何从服务器端将滑块移动到给定值？（例如单击按钮或类似的东西。从其他组件调用值更改。）

我已经设置*了 slider.setImmediate(true);* 并在更改名为*slider.requestRepaint() 的值之后；*但这并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:35:36.597

您可以检查其“父组件”，也可以检查在其“侦听器”中调用此方法的组件。

# java - 以时间间隔运行方法

> ID：14281058
> 
> 赞同：3
> 
> 时间：2013-01-11T15:15:56.017
> 
> 标签：java, android, timer

Java/Android 是否有任何构造可用于在某个时间间隔内运行类中的方法？

我知道`Scheduler`and`Timer`类，但我需要避免实例化另一个类。该方法不得在另一个单独的线程中运行。运行`AsyncTask`or`Handler`会产生一个单独的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:07:20.610

> 该方法不得在另一个单独的线程中运行

由于这个要求，你只有一个合理的解决方案，你必须**在自己的线程中等待**，如下所示：

```
for (int i = 0; i < 100; i++) {
    long intervalInMs = 1000; // run every second
    long nextRun = System.currentTimeMillis() + intervalInMs;
    callAMethod();
    if (nextRun > System.currentTimeMillis()) {
        Thread.sleep(nextRun - System.currentTimeMillis());
    }
} 
```

注意，如果方法调用的时间比你想等待的时间长，它不会调用两次（因为你只有一个`Thread`）你可以通过在 中写一个`else`子句来检测它`if`，并进行一些修改（例如增加`intervalInMs`）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:42:45.710

为此，您需要使用 AlarmManager。

检查此 SO 以获得良好的概述：[Android：如何使用 AlarmManager](https://stackoverflow.com/questions/1082437/android-alarmmanager)

我不会尝试在您自己的线程中进行管理，而是让 Android 框架为您处理。不知道为什么你需要它在同一个线程中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:48:26.037

如果您确实必须在同一个线程中执行此操作而不会阻塞，则一种可能的解决方案是进行某种轮询。我想象代码会定期计算自上次触发该方法以来已经过去了多少时间。如果配置的时间段已过，则再次触发该方法。

这种解决方案实施起来似乎很复杂。您多久执行一次轮询代码？您如何在可能同时继续执行的应用程序其余部分的逻辑中执行轮询代码？这些只是立即想到的技术挑战。我确定还有其他人。考虑到这一点，我认为更好的解决方案是重新考虑您的限制。为什么要在同一个线程中执行此操作？你应该好好想想你的理由，并考虑使用一个单独的线程（无论是你自己使用 Timer 滚动还是使用 Android 平台使用 AlarmManager 为你管理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:46:18.617

创建一个接收监听器的自定义定时器，然后当你的时间过去时，将回调发送到在他的线程中创建定时器的对象。

这会为Timer创建一个新的Thread，但是你要执行的方法，会在原来的对象线程上执行

# c# - 如何在 Windows 8 中创建自动完成搜索文本框

> ID：14281062
> 
> 赞同：0
> 
> 时间：2013-01-11T15:16:07.423
> 
> 标签：c#, search, windows-8, autocomplete, bing

我发现 Windows 8 文本框有一个属性“IsPredictionEnabled”。我知道它用于启用自动完成功能。但即使使用软键盘，设置此属性也无效。

如果我想让这个搜索文本框搜索 bing 并检索一些与搜索查询相对应的图像，该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:57:59.917

最好使用这样的 cutsom 控件：

[自动完成框WinRT](https://nuget.org/packages/AutoCompleteBoxWinRT)

要从 bing 中获取搜索结果，您需要使用 bind api：

[必应 API](http://www.bing.com/developers/)

要使用 AutCompleteBoxWinRT：

**导入命名空间：**

```
 xmlns:ab="using:AutoCompleteBox" 
```

**场地控制：**

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ab:AutoCompleteBox Name="ABBox" Text="{Binding Text, Mode=TwoWay}" WatermarkText="Type something" />

    <Button Content="Test" VerticalAlignment="Top" Margin="0,100,0,0" Command="{Binding TestCommand}" />
</Grid> 
```

您可以在此处下载示例应用程序：[LINK](http://code.kulman.sk/autocompletebox/src)

# c++ - 在具有虚拟析构函数的基类的子类中不指定析构函数是否安全？

> ID：14281078
> 
> 赞同：3
> 
> 时间：2013-01-11T15:17:07.763
> 
> 标签：c++, inheritance

考虑一个简单的界面/实现设计：

```
class Base
{
public:

    virtual ~Base()
    {
        // Virtual empty destructor
    }
};

class Derived : public Base
{
public:

    virtual ~Derived()
    {
        // Lots of clean up code here
        // ...
    }
}; 
```

通过这种设计，我了解到以下代码是安全有效的：

```
Base* base = new Derived();
delete base; // Both Base::~Base and Derived::~Derived get called 
```

但是，想象一下如果有一个新类：

```
class DerivedEx : public Derived
{
public:

    // No destructor here, relying on default destructor generated by compiler
}; 
```

DerivedEx “安全”吗**？**

为了安全起见，我一直认为我必须在**DerivedEx**中实现一个虚拟的空析构函数。但我想知道这是否是多余和不必要的，是否有任何我不知道的“陷阱”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:19:17.663

是的，它仍然是安全的。

如果任何基类析构函数是虚拟的，则析构函数自动是虚拟的。无论您键入`~Foo();`或`virtual ~Foo();`不键入并且只允许编译器生成隐式定义的析构函数，这都是正确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T15:18:46.210

这是安全的。您只需要确保基类中的析构函数是`virtual`.
只要您的基类析构函数是`virtual`编译器，编译器就会负责以正确的顺序调用所有析构函数。

在大多数派生类中是否需要析构函数取决于该类本身，并且该决定通常基于***[Rule of Three](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)***做出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T15:21:49.437

是的，它是安全的。

隐式生成的析构函数将是虚拟的，因为有一个带有虚拟析构函数的基类，并且会正确调用所有非平凡成员和基类的析构函数。

# javascript - 使“标题”脚本集中工作

> ID：14281081
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:17:23.663
> 
> 标签：javascript, jquery

该代码仅适用于悬停！但我希望它在焦点模式下工作！

```
 $(document).ready(function() {
    $('body').append('<div id="anchorTitle"></div>');
    $('input[title!=""]').each(function() {
        var a = $(this);
        if(typeof a.attr('title') == 'undefined')
        {
          return;
        }
        a.data('title', a.attr('title'))
        .removeAttr('title')
        .hover(
            function() { showAnchorTitle(a, a.data('title')); },
            function() { hideAnchorTitle(); }
        );
    });

    function showAnchorTitle(element, text) {
    var offset = element.offset();
    $('#anchorTitle')
    .css({
        'top'  : (offset.top + element.outerHeight() + 4) + 'px',
        'left' : offset.left + 'px'
    })
    .html(text)
    .show();
  }
    function hideAnchorTitle(){
    $('#anchorTitle').hide();
  }
}); 
```

当输入集中显示标题框！当焦点丢失时，隐藏标题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:22:20.380

改变：

```
.hover(
    function() { showAnchorTitle(a, a.data('title')); },
    function() { hideAnchorTitle(); }
); 
```

和：

```
.focusin(function() { showAnchorTitle(a, a.data('title')); })
.focusout(function() { hideAnchorTitle(); }); 
```

# php - 如何设置具有多个数据数组的复选框

> ID：14281083
> 
> 赞同：1
> 
> 时间：2013-01-11T15:17:24.617
> 
> 标签：php, javascript, jquery, html

我有以下问题。我有多个要填写的复选框。我从表单中得到了一个包含选择的数组，但我不知道如何检查哪个复选框是正确的。

对于我的输入，使用了类似的东西：

```
<input type="checkbox" id="zutaten" name="zutaten[]" value="a" >
<input type="checkbox" id="zutaten" name="zutaten[]" value="b" >
<input type="checkbox" id="zutaten" name="zutaten[]" value="c" >
<input type="checkbox" id="zutaten" name="zutaten[]" value="d" > 
```

所以我得到了一个数组'zutaten'，但是这个数组不是关联的，所以我不知道究竟是哪个复选框被选中。我应该如何解决这个问题？

我可以使用 PHP 或 Javascript/jQuery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:19:30.137

`$_POST`所以你有一个带有响应的数组，`$zutaten=$_POST['zutaten']`为了方便起见。

对所有 4 个条目执行以下操作。如果您在数组中有可能的值，您可以动态地执行此操作，如果您需要帮助，请告诉我。

```
<input type="checkbox" <?php if (in_array('b', $zutaten)) echo 'checked="checked"'; ?> id="zutaten" name="zutaten[]" value="b" > 
```

编辑：不要忘记`$zutaten`只保留已检查的值。如果你有一个数组。您可以执行以下操作：

```
$values = array('a', 'b', 'c', 'd');
foreach ($values as $val) {
    <input name="zutaten[]" value="<?php echo $val; ?>" type="checkbox" <?php if (in_array($val, $zutaten)) echo 'checked="checked"'; ?> 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:22:07.850

做这个：

```
<input type="checkbox" id="zutaten" name="zutaten[0]" value="a" >
<input type="checkbox" id="zutaten" name="zutaten[1]" value="b" >
<input type="checkbox" id="zutaten" name="zutaten[2]" value="c" >
<input type="checkbox" id="zutaten" name="zutaten[3]" value="d" > 
```

然后您将看到数组中的数字 0-3 来决定检查哪一个。

# html - 如何内联div

> ID：14281084
> 
> 赞同：0
> 
> 时间：2013-01-11T15:17:29.727
> 
> 标签：html, css

以下是我的 div，我试图在 div 中创建一个正方形，我面临的问题是，当我尝试创建一个正方形时，正方形会转到新行。

例子：

```
我的 [SQUARE] 应该是这样的 // 没有换行符

但是我的 // 行自动换行
[正方形]
/* 自动换行 */ 看起来像这样

```

注意：我不能左右使用浮动，我也试过 display:inline; 但它没有用。请让我知道如何为我的内容创建一个方形内联

```
<div style="width:10px; height:10px; border:1px solid #000; background:yellow;"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:20:54.317

据我了解，这是正在发生的事情：

```
Your content
[SQUARE]
More content 
```

**代替**

```
Your content [SQUARE] more content 
```

你有没有尝试过`display: inline-block;`

另外，检查包含的 div 是否能够将所有这些内容放在一行中。

**编辑：**请记住，这`display: block`是（大多数）元素的**DEFAULT**属性，这将强制它们在新行上。`display:`因此，要更改此设置，您可以通过设置自定义属性自己覆盖默认值。

有关它们的列表，请访问：[http ://www.w3.org/wiki/CSS/Properties/display](http://www.w3.org/wiki/CSS/Properties/display)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T15:20:33.047

通过添加`display:inline-block`到您的代码中来试试这个

`<div style="display: inline-block; width:10px; height:10px; border:1px solid #000; background:yellow;"></div>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T15:21:08.573

如果我的问题是正确的：

尝试`display:inline-block;`在 div 的 styletag 中设置。

希望这有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:35:56.313

您需要将 display: inline 属性应用于您想要在同一行上的所有元素，否则它将不起作用，如果您愿意，您可以应用 float 属性。

# c# - 在运行时移动重叠的图片框会导致重绘滞后

> ID：14281085
> 
> 赞同：2
> 
> 时间：2013-01-11T15:17:32.617
> 
> 标签：c#, .net, winforms, picturebox

我有 2 个可移动的图片框，允许用户四处移动图像并按照他的意愿对齐它们

当我将图片框 A 拖到图片框 B 上时，A 图像的尾随部分显示到 B 中。它很快就消失了。这与您在分辨率较差的非常旧的 Windows 上看到的情况相同。

它的特殊之处在于它只显示在静态图片框内，而不是下面的空白空间。我一直在摆弄暂停布局和恢复布局，但运气不佳。有什么建议么？如果有帮助，我也愿意将控件类型从 Picturebox 更改为其他内容。

```
public void OnMouseMove(object sender, MouseEventArgs mouseEventArgs)
    {
        var control = sender as Control;

        control.SuspendLayout();

        Point pt = new Point(mouseEventArgs.X, mouseEventArgs.Y);

        control.Left += pt.X - _startDraggingPoint.X;
        control.Top += pt.Y - _startDraggingPoint.Y;

        control.ResumeLayout();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:30:46.100

这在 Winforms 中是一个相当不可避免的问题，它是由您使用多个控件引起的，并且由于控件呈现到屏幕的方式而可见。逐个。双缓冲并不能解决问题，它只适用于每个单独控件的渲染，而 PictureBox 已经是双缓冲的。事实上，它使问题*变得更糟*，因为双缓冲不是免费的，并且会延迟绘制程序。

它可见的最大原因是您的 PictureBox 控件在绘制图像时速度很慢。当您要求它缩放图像并期望它从大图像中渲染出漂亮的小图像时，就会发生这种情况。这种重新缩放需要时间，特别是在图像很大的情况下，并且每次控件绘制自身时都会完成。您可以通过自己预先缩放图像来修复它，这样控件就不必这样做了。

一个真正的解决方法是根本不使用任何 PictureBox 控件，而只是让表单绘制图像。现在双缓冲解决了你的问题。您当然会失去很多便利，包括 PB 执行的内置缩放和免费获得的命中测试。实际上实施起来并不难。

Windows 中有一个魔法咒语，它可以*潜在地*解决问题，而您无需做任何工作来改进您的代码。您可以要求它对窗口及其所有子控件进行双重缓冲。一切都被渲染到屏幕外缓冲区，结果被传送到屏幕上。将此代码粘贴到您的表单中：

```
protected override CreateParams CreateParams {
    get {
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
        return cp;
    }
} 
```

这*可能*会导致绘制伪影，如果它们太有害，那么您将不得不改进您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:27:58.360

将控件上的属性“DoubleBuffered”设置为 true。这可能有助于减少闪烁。

请参阅：http: [//msdn.microsoft.com/de-de/library/system.windows.forms.control.doublebuffered (v=vs.80).aspx](http://msdn.microsoft.com/de-de/library/system.windows.forms.control.doublebuffered(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:54:42.073

最后，我采用了不同的解决方案。我们使用 DevExpress 的文档管理器来保存我们的图像控件。这需要一些工作，但效果更好，结果也很顺利。

# linux - 使用 awk/sed 在制表符分隔文件中间添加重复内容

> ID：14281086
> 
> 赞同：1
> 
> 时间：2013-01-11T15:17:32.753
> 
> 标签：linux, text, sed, awk

我有一个文本文件（制表符分隔），我需要在第 3 行添加一个新的标题行

```
[Tab] ABC123   ABC124
[Tab] High     High
ENSG  8.9      7.2 
```

我想成为的新行将是第 3 行，然后我要打印欧洲 5 次，每个之间的制表符，然后亚洲 6 次，每个之间的制表符...

```
[Tab] ABC123   ABC124
[Tab] High     High    
[Tab] European European [this will be the new line]
ENSG  8.9      7.2 
```

我想使用 sed 以便我可以使用

sed '4 我'

但我真的不知道如何将新内容实际打印/附加到该新行中，我猜我需要开始 /European/\t/a 或类似的。

基本上挣扎，可能是因为我没有聪明地使用谷歌搜索！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:07:16.540

使用`sed '3i\ \tEuropean\tEuropean' file`：

```
$ cat file
        ABC123          ABC124
        High            High
ENSG    8.9             7.2

$ sed '3i\ \tEuropean\tEuropean' file
        ABC123          ABC124
        High            High
        European        European
ENSG    8.9             7.2 
```

**编辑：**

我可能会做这样的事情 `awk 'NR==3{for(i=0;i<10;i++)s=s"\tEuropean";print s}1'`：

```
$ awk 'NR==3{for(i=0;i<10;i++)s=s"\tEuropean";print s}1' file
        ABC123          ABC124
        High            High
        European        European        European    European    European    European    European    European    European    European
ENSG    8.9             7.2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:07:31.657

有几种方法可以做到这一点。一种技术是：

```
t="$(printf \\t)"  # Assign t to be a string with one tab
sed -e '4i\
European${t}European...
' input-file > output-file 
```

对于某些 shell，您可以执行类似的操作`t=$"\t"`，而对于某些 shell，您`sed`不需要在 之后的文字换行符`i`，但上面的内容非常便携。您始终可以使用文字`tab`（您可能需要`ctrl-v tab`在交互式提示下键入）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:47:33.720

这可能对您有用（GNU）：

```
sed -r '2!b;G;:a;/(\tEuropean){10}/!s/$/\tEuropean/;ta' file 
```

哪里`10`可以是任意数量的重复字段`\tEuropean`

# c++ - 同名的非托管 C++ DLL 共存于同一进程中

> ID：14281089
> 
> 赞同：7
> 
> 时间：2013-01-11T15:17:36.313
> 
> 标签：c++, visual-studio, dll

使用 Visual Studio c++ V10，我试图弄清楚如何构建 DLL 并解决 DLL 命名冲突。这是详细信息。

S 公司运送了一种名为 的产品`M.EXE`。假设`M.EXE`安装在`\S\BIN\M.EXE`. 公司 S 静态链接到一个名为 的 DLL `U.DLL`，该 DLL 安装在 `\S\BIN\U.DLL`. `U.DLL`包含开源代码，并使用 Visual C++ 编译器选项构建`/Zc:wchar_t-`，它不将 wchar 识别为本机类型。

C 公司发布了一个名为 的 DLL `O.DLL`，并发布了该 DLL 的 API，并发布了一个用于`O.DLL`. 假设`O.DLL`安装在`\C\BIN\O.DLL`. `O.DLL`静态链接到名为 DLL 的 DLL `U.DLL`，该 DLL 安装在`\C\BIN\U.DLL`. `U.DLL`构建在相同的开源代码上，但使用 Visual C++ 编译器选项构建`/Zc:wchar_t`，它可以识别`wchar_t`为本机类型。

理想情况下，C 公司和 S 公司同意`U.DLL`使用相同的 Visual C++ 选项进行构建，但这是不可能的。

`M.EXE`来自 Company S 的产品是可扩展的，因为我可以在非托管 C++ 中构建自己的 DLL，如果我正确设置所有内容，`NODE.DLL`调用它将调用它。`M.EXE`我想构建它`NODE.DLL`，使其静态链接到`O.DLL`来自 Company C。但问题是，一旦运行，`M.EXE`它就`U.DLL`从公司。因此，当尝试加载时，它会失败，因为当加载时，需要的符号不存在，因为 Windows 认为已经加载。`\S\BIN``\S\BIN\U.DLL``\C\BIN\U.DLL``U.DLL``M.EXE``NODE.DLL``NODE.DLL``O.DLL``U.DLL``\C\BIN\U.DLL``U.DLL`

情况示意图如下：

```
M.EXE static link to -> \S\BIN\U.DLL
M.EXE dynamic link to -> NODE.DLL
NODE.DLL static link to  O.DLL
O.DLL static link to \C\BIN\U.DLL 
```

实际上，我需要`\S\BIN\U.DLL`和`\C\BIN\U.DLL`共存于同一进程空间中，并`M.EXE`使用其版本`U.DLL`和`O.DLL`使用其版本`U.DLL`.

请注意，我没有重建`M.EXE`或`O.DLL`更改它们各自加载方式的选项`U.DLL`。它们来自第三方，因此无法更改静态链接。我也没有使用`LoadLibrary`on的选项`O.DLL`，因为它是一个 C++ 库，提供了一个导入库。

我相信可以使用清单，这样当我构建`NODE.DLL`静态链接到 O.DLL 的内容时，我会在清单中进行设置，`NODE.DLL`以便`O.DLL`加载它自己的副本，`U.DLL`该副本安装在`\C\BIN\U.DLL`. 我只是无法弄清楚如何做到这一点。理想情况下，我不想修改 的清单`O.DLL`，但如果这是唯一的解决方案，我会接受的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:41:08.577

通过使用绝对路径加载其中一个或多个 DLL，您可以在同一进程中拥有多个具有相同**文件名的 DLL。**这确实需要动态加载 DLL，但行为是相同的。

而不是在构建过程中进行链接，您需要`std::string moduleName = appPath + "\s\bin\u.dll"; LoadModule(moduleName.c_str())`. 因为这对于需要加载哪个 DLL 是明确的，所以它允许您加载多个具有“相同”名称的 DLL。

加载模块后，您可以将每个必要的函数分配给函数指针，然后将它们包装起来，或者使用合法但很少使用的[语法将函数指针作为普通函数调用](http://www.newty.de/fpt/fpt.html#call)( `funcPtr(params)`)。

如果您使用的是较新版本的 Windows，则可以使用 DLL 清单来加强模块周围的版本控制/命名，并导致 EXE 加载与通常情况不同的 DLL。我不熟悉这将如何完成，尽管它记录在 MSDN 上（也可能在这里）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:23:13.360

您可以在运行时使用 /delayload 链接器选项（VS 项目属性中的链接器/输入/延迟加载的 DLL）和自定义挂钩以编程方式解析源 DLL。在您的一个源文件中，您需要定义和注册一个延迟加载挂钩函数。在钩子函数的 dliNotePreLoadLibrary 通知处理程序中，只需使用所需 DLL 的显式路径调用 LoadLibrary，然后将 DLL 的 HMODULE 传递回延迟加载代码。delayload 代码会将导入的函数解析为您提供给它的 DLL，无论是否已将另一个同名 DLL 加载到进程中。

在我的脑海中，你的钩子看起来像这样（其中 MyCustomLoadLibrary 需要替换为调用 LoadLibrary 的代码，在冲突的情况下使用所需 DLL 的完整路径，或者只是不合格的文件名）：

```
#include <delayimp.h>
FARPROC WINAPI MyDliNotifyHook( unsigned dliNotify, PDelayLoadInfo pdli )
{
  if( dliNotify == dliNotePreLoadLibrary )
    return (FARPROC)MyCustomLoadLibrary( pdli->szDll );
  return NULL;
}
extern "C" PfnDliHook __pfnDliNotifyHook2 = MyDliNotifyHook; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:56:23.943

你很幸运 U.DLL 是开源的。您将需要构建一个同时支持*和*`/Zc:wchar_t-`功能`/Zc:wchar_t`的版本。第一个选项仅定义`wchar_t-`为`unsigned short`。对于每个没有`wchar_t`参数的函数，您将收到大量重复符号的链接器警告，否则您最终会得到一个更胖的 DLL。

请注意，如果有任何全局或`static`变量 using `wchar_t`，那么您也将拥有这些的两个副本。但是，如果您`U.DLL`在一个过程中硬塞两个副本，您将获得相同的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:42:37.273

尝试使用 LoadLibrary 和 GetProcAddress。这将需要重组您的代码以在任何地方使用函数指针。看：

[LoadLibrary 的 MSDN 网页](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)

# java - 重用 HttpClient https 连接的异常

> ID：14281091
> 
> 赞同：2
> 
> 时间：2013-01-11T15:17:39.283
> 
> 标签：java, https, connection, httpclient

我正在使用 apache HttpClient。在调试某些东西时，我发现当我使用相同的连接（连接保持活动状态）第二次执行相同的 HTTPS HEAD 请求时出现错误。主机是[https://dongshengcn.iriscouch.com](https://dongshengcn.iriscouch.com)。不知道哪里错了，是服务器吗？它是一个 HttpClient 错误吗？我倾向于认为这是某个地方的 HttpClient 错误。无论如何，我想知道是否有人可以指出我正确的方向。这是代码和日志信息：

```
import org.apache.http.HttpHost;
import org.apache.http.client.methods.HttpHead;
import org.apache.http.client.params.ClientPNames;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.junit.Test;

import java.io.IOException;

/**
 * Created with IntelliJ IDEA.
 * User: dongsheng
 * Date: 1/10/13
 * Time: 4:10 PM
 * To change this template use File | Settings | File Templates.
 */
public class HttpClientTest {

    private int connectionTimeout = 1000;
    private int socketTimeout = 10000;
    private String host = "dongshengcn.iriscouch.com";
//    private String host = "dongshengcn.cloudant.com";
    private int port = 443;
    boolean useExpectContinue = true;

    public DefaultHttpClient configureClient() {
        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setUseExpectContinue(params, useExpectContinue);
        HttpConnectionParams
                .setConnectionTimeout(params, connectionTimeout);
        HttpConnectionParams.setSoTimeout(params, socketTimeout);
        HttpConnectionParams.setTcpNoDelay(params, Boolean.TRUE);

        String protocol = "https";
        params.setParameter(ClientPNames.DEFAULT_HOST, new HttpHost(host,
                port, protocol));
        DefaultHttpClient client = new DefaultHttpClient(params);

        return client;
    }

    @Test
    public void test_dafault_http_client() throws IOException {
        String uri = "/ektorp-test/";
        DefaultHttpClient client = configureClient();

        org.apache.http.HttpResponse rsp = client.execute(new HttpHead(uri));
        System.out.println(rsp.toString());

        try {
            org.apache.http.HttpResponse rsp2 = client.execute(new HttpHead(uri));
            System.out.println(rsp.toString());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

Running HttpClientTest
2013/01/11 10:12:05:288 EST [DEBUG] BasicClientConnectionManager - Get connection for route {s}->https://dongshengcn.iriscouch.com:443
2013/01/11 10:12:06:065 EST [DEBUG] DefaultClientConnectionOperator - Connecting to dongshengcn.iriscouch.com:443
2013/01/11 10:12:07:201 EST [DEBUG] RequestAddCookies - CookieSpec selected: best-match
2013/01/11 10:12:07:223 EST [DEBUG] RequestAuthCache - Auth cache not set in the context
2013/01/11 10:12:07:223 EST [DEBUG] RequestTargetAuthentication - Target auth state: UNCHALLENGED
2013/01/11 10:12:07:224 EST [DEBUG] RequestProxyAuthentication - Proxy auth state: UNCHALLENGED
2013/01/11 10:12:07:224 EST [DEBUG] DefaultHttpClient - Attempt 1 to execute request
2013/01/11 10:12:07:224 EST [DEBUG] DefaultClientConnection - Sending request: HEAD /ektorp-test/ HTTP/1.1
2013/01/11 10:12:07:226 EST [DEBUG] headers - >> HEAD /ektorp-test/ HTTP/1.1
2013/01/11 10:12:07:226 EST [DEBUG] headers - >> Host: dongshengcn.iriscouch.com:443
2013/01/11 10:12:07:226 EST [DEBUG] headers - >> Connection: Keep-Alive
2013/01/11 10:12:07:303 EST [DEBUG] DefaultClientConnection - Receiving response: HTTP/1.1 404 Host not found
2013/01/11 10:12:07:304 EST [DEBUG] headers - << HTTP/1.1 404 Host not found
2013/01/11 10:12:07:304 EST [DEBUG] headers - << Content-Length: 14
2013/01/11 10:12:07:307 EST [DEBUG] DefaultHttpClient - Connection can be kept alive indefinitely
2013/01/11 10:12:07:309 EST [DEBUG] BasicClientConnectionManager - Releasing connection org.apache.http.impl.conn.ManagedClientConnectionImpl@21cc5069
2013/01/11 10:12:07:309 EST [DEBUG] BasicClientConnectionManager - Connection can be kept alive indefinitely
HTTP/1.1 404 Host not found [Content-Length: 14]
2013/01/11 10:12:07:309 EST [DEBUG] BasicClientConnectionManager - Get connection for route {s}->https://dongshengcn.iriscouch.com:443
2013/01/11 10:12:07:310 EST [DEBUG] DefaultHttpClient - Stale connection check
2013/01/11 10:12:07:311 EST [DEBUG] RequestAddCookies - CookieSpec selected: best-match
2013/01/11 10:12:07:311 EST [DEBUG] RequestAuthCache - Auth cache not set in the context
2013/01/11 10:12:07:311 EST [DEBUG] RequestTargetAuthentication - Target auth state: UNCHALLENGED
2013/01/11 10:12:07:311 EST [DEBUG] RequestProxyAuthentication - Proxy auth state: UNCHALLENGED
2013/01/11 10:12:07:311 EST [DEBUG] DefaultHttpClient - Attempt 1 to execute request
2013/01/11 10:12:07:311 EST [DEBUG] DefaultClientConnection - Sending request: HEAD /ektorp-test/ HTTP/1.1
2013/01/11 10:12:07:311 EST [DEBUG] headers - >> HEAD /ektorp-test/ HTTP/1.1
2013/01/11 10:12:07:311 EST [DEBUG] headers - >> Host: dongshengcn.iriscouch.com:443
2013/01/11 10:12:07:311 EST [DEBUG] headers - >> Connection: Keep-Alive
2013/01/11 10:12:07:314 EST [DEBUG] DefaultHttpResponseParser - Garbage in response: Host not found
2013/01/11 10:12:07:314 EST [DEBUG] DefaultClientConnection - Connection 0.0.0.0:62168<->173.192.57.98:443 closed
2013/01/11 10:12:07:315 EST [DEBUG] DefaultClientConnection - Connection 0.0.0.0:62168<->173.192.57.98:443 shut down
2013/01/11 10:12:07:315 EST [DEBUG] BasicClientConnectionManager - Releasing connection org.apache.http.impl.conn.ManagedClientConnectionImpl@67c7980c
2013/01/11 10:12:07:315 EST [DEBUG] BasicClientConnectionManager - Connection can be kept alive for 9223372036854775807 MILLISECONDS
org.apache.http.client.ClientProtocolException
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:909)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
    at HttpClientTest.test_dafault_http_client(HttpClientTest.java:69)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.apache.http.ProtocolException: The server failed to respond with a valid HTTP response
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:103)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    ... 32 more
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.411 sec 
```

如果我将主机更改为 dongshengcn.cloudant.com:443 之类的不同主机，它会按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:59:01.023

服务器很可能没有正确处理 HEAD 请求并发送响应正文以响应违反 HTTP 规范的第一个请求，从而破坏连接状态并使其不可重用。

# ios - 如何在 iOs 或 Android air 项目 (AS3) 上将下载的资产保存到磁盘

> ID：14281092
> 
> 赞同：0
> 
> 时间：2013-01-11T15:17:40.327
> 
> 标签：ios, actionscript-3, file, download, save

我想出了如何保存 txt 等文件，但实际上我无法在我的 iPhone 硬盘上保存 mp3、jpg 或 zip 文件，我真的不明白为什么..

让我们假设我在做以下事情：

```
var btAr:ByteArray = new ByteArray(); //initializing byte array
var snd:Sound = new mp3sound(); //this is an embeeded mp3 file !

snd.extract(btAr,int(mp3sound.length * 44.1) )  //extract the mp3 into a byte array
btAr.position = 0; 
var str:String = File.applicationDirectory.nativePath;  
appTempData = new File(str +"/\.\./tmp");    //temp folder of an iOs app

fr = new FileStream();
try
{
    fr.open(
        appTempData     //  appTempData or appCache or appData or userDocs
        .resolvePath("myCache.mp3"),FileMode.WRITE); 
    fr.writeBytes(btAr)
    fr.close(); 
}
catch(er:Error)
{
    trace("ERROR: "+er);
} 
```

没有错误，什么都没有，我只是得到一个空白的 mp3 文件（0 kb）。

我的目的是从外部服务器下载各种文件，并将它们保存到我的 iPhone 的 tmp 目录中......我什至不在乎它们在那时被加载。我设法将文件下载到我的 iPhone 内存中，但我似乎无法将它们保存在我的 iPhone 磁盘上..！

灯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:12:56.817

试试看：

```
 var outFile:File = File.applicationStorageDirectory.resolvePath("myCache.mp3");
 var outStream:FileStream = new FileStream();
 outStream.open(outFile, FileMode.WRITE);
 outStream.writeBytes(btAr);
 outStream.close(); 
```

它需要保存在 applicationStorageDirectory 中！

# c# - 如何使用来自不同 xaml 文件的样式

> ID：14281093
> 
> 赞同：18
> 
> 时间：2013-01-11T15:17:51.167
> 
> 标签：c#, wpf, xaml, binding

我有一个列出一组颜色的 styles.xaml 文件。这些颜色定义了应用程序某个部分中的某些元素如何显示，因此可以通过转换器使用。

我想在应用程序的另一部分创建这些颜色的图例，并有一个切换按钮列表，我想将背景颜色设置为 styles.xaml 中定义的颜色。

我是否需要以某种方式将styles.xaml 文件包含到定义切换按钮的xaml 文件中？或者有什么方法可以直接绑定到这些颜色值？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-11T15:20:55.970

将 styles.xaml 添加到 App.xaml

```
 <Application.Resources>
    <ResourceDictionary >
        <ResourceDictionary.MergedDictionaries >       
            <ResourceDictionary Source="styles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-14T06:54:06.543

> **注意**以下内容/答案的归属应转到[@Chris Schaller](https://stackoverflow.com/users/1690217/chris-schaller)。此答案的内容最初是作为对@chameleon86[答案](https://stackoverflow.com/a/14281160/2279200)的编辑发布的，但被[拒绝](https://stackoverflow.com/review/suggested-edits/9491974)（另请参阅[此](https://meta.stackoverflow.com/questions/305966/edit-review-are-extensive-edits-of-accepted-answer-ok)元数据）。但是我认为，这是一些有价值的内容，所以我正在“转发”它。

要使 styles.xaml 中的定义可用于应用内的所有 XAML，请将 styles.xaml 添加到 App.xaml

```
<Application.Resources>
   <ResourceDictionary >
        <ResourceDictionary.MergedDictionaries >  
            <ResourceDictionary Source="styles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
        <!-- You can declare additional resources before or after Merged dictionaries, but not both -->
        <SolidColorBrush x:Key="DefaultBackgroundColorBrush" Color="Cornsilk" />
        <Style x:Key="DefaultBackgroundColor" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource DefaultBackgroundColorBrush}" />
        </Style>
    </ResourceDictionary>
</Application.Resources> 
```

要了解这是如何工作的，在运行时，您的窗口、页面或控件将作为正在运行的应用程序可视树的子元素存在。

您最初的问题指出：

> “这些颜色定义了应用程序*某一部分*中的某些元素如何......”

如果您只需要这些样式资源可用于*某些*xaml 页面或窗口，而不是全部，那么您仍然可以使用此模式来合并窗口的本地资源，或者直接用于网格或其他控件。

*   请注意，这样做会使这些样式仅可用于您声明资源字典的元素的子元素。

看看将样式引用限定为单个网格以供使用是多么简单：

```
<Grid>
    <Grid.Resources>
        <ResourceDictionary >
            <ResourceDictionary.MergedDictionaries >       
                <ResourceDictionary Source="styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <!-- You can declare additional resources before or after Merged dictionaries, but not both -->
        </ResourceDictionary>
    </Grid.Resources>
    <!--
        Grid Content :)
      -->
</Grid> 
```

# json - Scala 中的 JSON 条件写入

> ID：14281095
> 
> 赞同：1
> 
> 时间：2013-01-11T15:18:00.687
> 
> 标签：json, scala, playframework-2.0

使用播放！2.1 Json库，有没有办法只在满足一定条件的情况下才将字段写入json？例如：

```
case class Foo(id: Int, name: String) 
```

我想定义一个仅在名称不为空`Writes`时才生成字段的字段。`name`以便：

```
Json.toJson(Foo(1, "Chuck")) //yields {"id":1,"name":"Chuck"}    
Json.toJson(Foo(1, ""))      //yields {"id":1} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:58:35.500

您必须编写自己的`Writes[T]`类，在这种情况下，`Writes[Foo]`请参阅[Scaladoc](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.libs.json.Json%24)以供参考。或者，您可以将 String 更改为 an`Option[String]`并写入一个`Writes[Option[String]]`或`Writes[Option[_]]`。

我自己没有尝试过，但它与我过去使用的 Spray-json 非常相似。

# amazon-web-services - 无法连接到我的 ec2 实例

> ID：14281096
> 
> 赞同：3
> 
> 时间：2013-01-11T15:18:01.370
> 
> 标签：amazon-web-services, amazon-ec2

刚刚创建了一个 ec2 实例，可以通过 ssh 访问它以及所有内容，但是当我访问它的弹性 ip 或它的公共 DNS url 时，我无法返回一个页面，上面写着“糟糕！Google Chrome 无法连接到 23.23.205.241”我也可以 ping它的公共 DNS 但当我访问该网址时，我还会收到“糟糕！Google Chrome 无法连接到 ec2-23-23-205-241.compute-1.amazonaws.com”消息

我可以成功 ping ip 地址并获得响应，并且我设置了以下安全组：22 tcp 0.0.0.0/0
25 tcp 0.0.0.0/0
80 tcp 0.0.0.0/0
110 tcp 0.0.0.0/0
143 tcp 0.0.0.0/0
443 tcp 0.0.0.0/0
3306 tcp 0.0.0.0/0
8080 tcp 0.0.0.0/0
0-65535 udp 0.0.0.0/0
53 udp 0.0.0.0/0
-1 icmp 0.0.0.0/ 0

此实例的类型为：Amazon Linux AMI 2012.09 64 位。

我也刚刚安装了tomcat7，但在安装之前我无法看到我的网页。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:11:44.013

默认情况下，Linux AMI 不包含 Web 服务器，因此在您安装并启动 Web 服务器之前，您无法在其地址看到网页。您现在已经使用 Tomcat 完成了该操作，显然您现在可以看到 Tomcat 服务的网页。

# jquery - 防止点击研究链接让其他人工作

> ID：14281097
> 
> 赞同：0
> 
> 时间：2013-01-11T15:18:03.960
> 
> 标签：jquery

我有一个菜单，当您将鼠标悬停时，会出现子菜单。但我希望防止点击#research 链接，所以我使用了下面的jquery。但这也阻止了我的“我的应用程序”链接被点击。有人可以帮我吗？

**查询**

```
$('#research a').click(function(e){
e.preventDefault();
}); 
```

**HTML**

```
<li id="research"><a href="#">Research</a>
    <div class="submenu" style="display:none">
    <div class="submenuLeft">
        <ul>
            <li class="title">Application</li>
            <li><a href="/research/application">My Application</a></li>
        </ul>
    </div><!--submenuLeft-->
    </div><!--submenu-->
</li> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:19:38.820

给你的链接一个类属性，例如“隐藏”

```
$('#research a.hide').click(function(e){
    e.preventDefault();
}); 
```

或使用方法[.first()](http://api.jquery.com/first/)

```
$('#research a').first().click(function(e){
    e.preventDefault();
}); 
```

或者

```
$('#research a[href="#"]').click(function(e){
    e.preventDefault();
}); 
```

或者更好的是这样的

```
$('#research a').filter(function() {
    var $this = $(this);
    return $this.text().toLowerCase() == 'research';
}).click(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:26:19.733

```
<li id="research"><a href="javascript:void(0)">Research</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T15:20:03.417

尝试

```
$('#research > a').click(function(e){
  e.preventDefault();
}); 
```

`>`最好确保 a 是 的直接后代`li#research`。

@algorhythm`first()`已经提到过。

将其稍微更改为以下代码段将执行得更快。

```
$('#research a:first-child').click(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T15:24:42.960

试试这个，确保只应用带有 # 的那个，以防您有多个链接`href=#`

```
$('#research a:[href="#"]').click(function(e){
    e.preventDefault();
}); 
```

# php - 如何强制 PHP 设置正确的文件上传权限？

> ID：14281100
> 
> 赞同：0
> 
> 时间：2013-01-11T15:18:18.217
> 
> 标签：php, permissions, apache2, freebsd, patch

我有带有 FreeBSD 8.0、Apache 2.2.23 和 PHP 5.4.10 的服务器。那是我的 VirtualHost 配置：

```
<VirtualHost *>
    ServerName site.com
    ServerAlias www.site.com
    DocumentRoot /usr/home/site/pub/htdocs/
    php_admin_value open_basedir /usr/home/site/
    php_admin_value session.save_path 0;0660;/usr/home/site/pub/tmp/
    php_admin_value upload_tmp_dir /usr/home/site/pub/tmp/
</VirtualHost> 
```

/usr/home/site/pub/tmp/ 由 site:www 拥有，具有 4770 权限。正确创建会话文件（660 和站点：www）。但上传的临时文件创建的权限为 600。所以，因为这个临时文件由 site:www 和 Apache 从 www:www 运行，move_uploaded_file() 不能移动文件。

如何解决？

我认为我需要补丁 PHP 来强制设置此 tmp 文件的权限。但是哪里？PHP中的哪个内部函数可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:11:50.467

不要对告诉您使用的人投反对票，`chmod()`因为这是从 PHP 更改文件权限的*唯一解决方案。*但是，主要问题似乎是 Apache 正在使用与脚本运行时不同的 uid 创建文件，[不太可能是 AFAIK]，或者您正在尝试修改使用作为运行的不同进程创建的文件不同的用户。

只有文件的所有者才能更改文件的权限/所有权，除非专门运行单独的进程以将所有权转移到另一个 uid，否则文件的所有者就是创建它的 uid。

再一次，`chmod()`和`chown()`是*唯一*可以更改权限和所有权的两种方法，相当于通过`exec()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:05:25.963

我已经找到了修复它的方法。那是我的补丁代码：

```
*** main/php_open_temporary_file.c.orig 2013-01-11 20:33:42.000000000 +0400
--- main/php_open_temporary_file.c  2013-01-11 21:17:44.000000000 +0400
***************
*** 101,113 ****
    char cwd[MAXPATHLEN];
    cwd_state new_state;
    int fd = -1;
! #ifndef HAVE_MKSTEMP
!   int open_flags = O_CREAT | O_TRUNC | O_RDWR
! #ifdef PHP_WIN32
!       | _O_BINARY
! #endif
!       ;
! #endif

    if (!path || !path[0]) {
        return -1;
--- 101,107 ----
    char cwd[MAXPATHLEN];
    cwd_state new_state;
    int fd = -1;
!   int open_flags = O_CREAT | O_TRUNC | O_RDWR;

    if (!path || !path[0]) {
        return -1;
***************
*** 144,169 ****
        return -1;
    }

- #ifdef PHP_WIN32
- 
-   if (GetTempFileName(new_state.cwd, pfx, 0, opened_path)) {
-       /* Some versions of windows set the temp file to be read-only,
-        * which means that opening it will fail... */
-       if (VCWD_CHMOD(opened_path, 0600)) {
-           efree(opened_path);
-           free(new_state.cwd);
-           return -1;
-       }
-       fd = VCWD_OPEN_MODE(opened_path, open_flags, 0600);
-   }
- 
- #elif defined(HAVE_MKSTEMP)
-   fd = mkstemp(opened_path);
- #else
    if (mktemp(opened_path)) {
!       fd = VCWD_OPEN(opened_path, open_flags);
    }
- #endif

    if (fd == -1 || !opened_path_p) {
        efree(opened_path);
--- 138,146 ----
        return -1;
    }

    if (mktemp(opened_path)) {
!       fd = VCWD_OPEN_MODE(opened_path, open_flags, 0660);
    }

    if (fd == -1 || !opened_path_p) {
        efree(opened_path); 
```

现在它工作正常，但显示警告“警告：move_uploaded_file()：第 111 行的 /path/to/script.php 中不允许操作”。如何抑制这个警告 - 我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:16:46.523

尝试查看`chown`您可以临时更改文件的所有者，以便您可以进行适当的更改：

```
$File = '/path/to/file';
chown($File, USERNAMEPHPISRUNNIGNAT);
chmod($File, 0644);
// Makes Appropriate changes To Files 
chown($File, originalowner);
// Changes your file back to it's original owner 
```

想知道 php 运行的用户名是什么：

`echo exec('whoami');`

以上将返回运行 php 的用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:24:18.263

创建文件，然后设置权限将起作用。

```
chmod("/somedir/yourfile", 0644); 
```

# macos - 在 Cocoa 中以编程方式添加收藏夹的快捷方式

> ID：14281103
> 
> 赞同：2
> 
> 时间：2013-01-11T15:18:21.633
> 
> 标签：macos, cocoa, shortcut, finder

我已经构建了一个 Mac 应用程序，我想在安装时在 Finder 的收藏夹部分中添加一个快捷方式。我确实看到其他应用程序实现了同样的事情（例如 AirDrop）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:39:34.640

您可以通过 appleScript 来完成，但这不是最好的方法。（如果将 cmd+t 更改为其他函数，则会失败）

```
tell application "Finder"
    activate
    -- Select the path you want on the sidebar in the Finder
    select folder "Preferences" of folder "Library" of (path to home folder)
    tell application "System Events"
        -- Command-T adds the Documents Folder to the sidebar
        keystroke "t" using command down
    end tell
end tell 
```

此外，您可以使用[LSSharedFileList](http://www.opensource.apple.com/source/pyobjc/pyobjc-26/pyobjc/pyobjc-framework-LaunchServices/PyObjCTest/test_lssharedfilelist.py)添加项目。

# regex - “Awk”从一个标记打印到下一个标记或文件结尾

> ID：14281104
> 
> 赞同：0
> 
> 时间：2013-01-11T15:18:28.510
> 
> 标签：regex, awk, token

要从包含“hi”的行打印到包含“bye”的行，我这样做：

> awk '/嗨/./再见/'

要从包含“hi”的行打印到文件末尾，我会：

> awk '/hi/,0'

如何编写脚本以在任一结束条件下结束打印？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:23:43.857

在`awk`使用变量`p`作为标志时：

```
$ cat file
start
line 2
hi
line 4
bye
end

$ awk '/hi/{p=1}{if (p) print}' file
hi
line 4
bye
end

$ awk '/hi/{p=1}{if (p) print}/bye/{p=0}' file
hi
line 4
bye 
```

更简洁：

```
$ awk '/hi/{p=1}p' file
hi
line 4
bye
end

$ awk '/hi/{p=1}p;/bye/{p=0}' file
hi
line 4
bye 
```

不过我喜欢`sed`这个：

```
$ sed -n '/hi/,/bye/p' file
hi
line 4
bye

$ sed -n '/hi/,$p' file
hi
line 4
bye
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:48:17.143

我尝试重新解决您的问题：

> 我想从包含“hi”的行打印一个文件，直到包含“bye”的行，如果文件中没有“bye”，我从“hi”打印到 EOF。（带 awk）

如果我的理解是正确的，其实你已经给了自己答案：

```
awk '/hi/,/bye/' 
```

将完成这项工作。

让我们测试一下`awk '/5/,/0/'`

```
kent$  seq 12 |awk '/5/,/0/'
5
6
7
8
9
10

kent$  seq 9 |awk '/5/,/0/'                                                                                                                                                 
5
6
7
8
9 
```

在第二个命令中，“文件”中没有 0，所以它只会从 /5/ 打印到最后。

`Note`在“找到”的情况下，您必须处理“退出”，否则如果在“再见”之后有包含“嗨”的行，它们也会被打印出来。

我希望这是你问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:28:32.360

```
awk '/hi/{f=1} f; /bye/{f=0}' file 
```

如果您想打印任何一个或两个分隔线，只需重新排序这 3 个条件。

# xcode - 我在哪里可以在 xcode 4.5 中启用“get-task-allow”以进行 iCloud 调试（带有权利文件）？

> ID：14281106
> 
> 赞同：1
> 
> 时间：2013-01-11T15:18:34.020
> 
> 标签：xcode, debugging, icloud, provisioning

多年来，我一直是 iOS 开发方面的专家。很久以前，我在使用授权文件时遇到了调试问题。在授权文件中将“get-task-allow”设置为 YES 解决了该问题。

现在我升级到 Xcode 4.5 并且“get-task-allow”不再工作了！有谁知道苹果将此功能移至何处？我仍然可以使用临时配置文件或禁用和删除运行代码的权利。但我需要调试器。

令人惊讶的是，使用 Team-Provisioning-Profile 正在发挥作用。我需要使用另一个“团队标识符 id”访问 KV-Store-Values。实际上我完全无法调试 iCloud。

有人知道吗？我在这里迷路了。

提前致谢

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:15:07.583

我终于找到了问题所在。

'get-task-allow' 似乎不再需要了。我手动创建了新证书并从我的证书列表中删除了团队标识符 ID。然后它起作用了。

# c++ - 内联装配；浮点数按位运算；这里出了什么问题？

> ID：14281114
> 
> 赞同：2
> 
> 时间：2013-01-11T15:18:53.720
> 
> 标签：c++, gcc, assembly, inline-assembly

这段简单的代码是我的问题：

扩展汇编（gcc）；英特尔语法（-masm=intel）；平台 - x86

它应该做什么：返回一个长度为 1 且符号 (+-) 与 x 相同的浮点数。

```
 float signf(float x)
    {
      float r = 1;
      asm volatile (
            "and %1,0x80000000;"
            "or %0,%1;"
            :"=r"(r):"r"(x));
      return r;
    } 
```

用公平掷骰子选择的任意随机数调用它会给出：

```
 signf of -1352353.3253: -5.60519e-045 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:54:18.447

内联汇编的实际问题是您`r`仅声明为输出，因此编译器将优化初始化。您应该使用`"+r"`约束而不是`"=r"`它应该可以工作。

更好的优化版本可能如下所示：

```
float signf(float x)
{
    float r;
    __asm__  __volatile__ (
            "and %0, 0x80000000;"
            "or %0, 0x3f800000;"
            :"=r"(r):"0"(x));
    return r;
} 
```

请注意，此函数涉及浮点->int->float 转换（通过内存），这可能会影响性能。

上述代码的C版本为：

```
float signf(float x)
{
    union { float f; int i; } tmp, res;
    tmp.f = x;
    res.f = 1;
    res.i |= tmp.i & 0x80000000;
    return res.f;
} 
```

这会为我生成相同的代码（使用 gcc 4.4.5）。

简单的 C 方法`return x < 0 ? -1 : 1;`生成完整的 FPU 代码，无需转换或内存访问（加载操作数除外），因此性能可能更好。如果可用，它还使用`fcmov`以避免分支。需要一些基准测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T15:32:32.743

在 C++11 中有两个 C++ 函数：

```
bool std::signbit (x); 
```

[http://en.cppreference.com/w/cpp/numeric/math/signbit](http://en.cppreference.com/w/cpp/numeric/math/signbit)

或者，

```
float f = std::copysign (1.0f, x); 
```

[http://en.cppreference.com/w/cpp/numeric/math/copysign](http://en.cppreference.com/w/cpp/numeric/math/copysign)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T19:29:54.017

这似乎运作良好（AT&T 语法）：

```
float signf(float x)
{
  float r = 1;
  asm ("andl $0x80000000, %1\n"
       "\torl %1, %0\n"
       :"+r"(r):"r"(x));
  return r;
} 
```

TBH，我会`copysignf()`按照其他人的建议使用。您正在尝试做的事情是不可移植的，因为它仅与可以执行此`asm()`语句的 IA-32 平台和 C++ 编译器相关联。

*编辑 1*

顺便说一句，以下版本的工作方式相同（并生成与上述语句几乎相同的指令`asm()`）并且没有不可移植的东西和类型别名问题（与其他人建议的`union`基于或`reinterpret_cast<>`基于的版本不同）。

```
float signf3(float x)
{
  unsigned u;
  std::memcpy(&u, &x, sizeof (u)) ;

  float r = 1.f;
  unsigned uone;
  std::memcpy(&uone, &r, sizeof (uone));

  uone |= u & 0x80000000;

  std::memcpy(&r, &uone, sizeof (r));
  return r;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:27:08.713

这个问题被标记为 C++，所以我将提供两个 C++ 建议，您可以让您的编译器进行优化：

*   `return x < 0.0f ? -1.0f : 1.0f;`
*   `return x / std::abs(x); // I believe self-division shouldn't cause 'almost 1.0' numbers to be genereated`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T16:41:44.073

您不需要为此使用 asm。以下是您尝试做的事情（即使是 -0.0f 的正确结果）。

```
float signf(float x) {
    bool sign=(0!=(*(reinterpret_cast<uint32_t *>(&x)) & 0x80000000));
    return sign? -1.0f : 1.0f;
} 
```

# c# - 如何将 -= 应用于字符串？

> ID：14281117
> 
> 赞同：0
> 
> 时间：2013-01-11T15:19:06.813
> 
> 标签：c#, string

我想要一个将“”添加`Text`到显示“”的字符串的按钮`Test`。结果将是“ `TestText`”。现在我按下另一个添加“ `Code`”的按钮。所以现在字符串看起来像这样：“ `TestTextCode`”。现在我的问题是：我想要这样，如果我再次按下第一个按钮，“ `Text`”就会消失，所以只剩下“ `TestCode`”。我知道你可以`+=`添加文本，但有没有类似`-=`从字符串中删除特定文本的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T15:20:52.483

```
string test = "";
test = test.Replace("Text", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T15:25:39.590

[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)如果你想使用语法，你可以使用 a `-=`，fe

```
string textString = "Text";
string codeString = "Code";

var textBuilder = new StringBuilder("Test"); // "Test"
// simulate the text-button-click:
textBuilder.Append(textString); // "TestText"  
// simulate the code-button-click:
textBuilder.Append(codeString); // "TestTextCode"  
// simulate the remove-text-button-click:
textBuilder.Length -= textString.Length; // "TestText"  
// simulate the remove-code-button-click:
textBuilder.Length -= codeString.Length; // "Test" 
```

[**演示**](http://ideone.com/CTfm9t)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:20:53.017

不，没有。您需要使用`String.Substring`适当的参数，或者`String.Replace`将其删除。请注意，如果原始字符串已经包含，后者可能会变得复杂`Text`。

您最好的选择可能是将未修饰的字符串存储在字段/变量中，然后根据记录按钮状态的两个标志来处理带有或不带有`Text`and后缀的渲染它。`Code`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:21:41.883

如果要撤消，请保留以前的版本。字符串是不可变的，所以无论如何你都要创建一个新的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T15:21:52.543

不是直接的，但您可以检查 endsWith 是否在最后输入并创建一个带有子字符串的新字符串

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T15:22:35.067

字符串上没有您所描述的运算符。另一方面，您可以使用`Replace`函数。

```
string s = "TestTextCode";
s = s.Replace("Text", ""); 
```

# ruby-on-rails-3 - Rails 在列表末尾显示哈希

> ID：14281122
> 
> 赞同：0
> 
> 时间：2013-01-11T15:19:27.040
> 
> 标签：ruby-on-rails-3, list, alphabetical

我正在运行 Rails 3.2.11。我有一个文章模型：

```
class Article < ActiveRecord::Base
  attr_accessible :content, :name
end 
```

我的控制器（索引操作）是：

类 ArticlesController < ApplicationController

```
 def index
    @grouped = {}
    Article.all.each do |article|
      letter = article.name.slice(0,1)
      @grouped[letter] ||= []
      @grouped[letter] << article
    end
  end 
```

这将为概览页面创建一个按字母顺序排列的所有文章名称列表。index.html.haml 是：

```
%p
  %ul
    - @grouped.keys.sort.each do |letter|
      %h1
        = letter
      %ul
        = @grouped[letter].each do |article|
          %li
            = link_to article.name, article 
```

现在我得到了所有文章名称的列表，按字母排序，但在某个字母的所有文章的末尾是一个显示所有数据的哈希：

```
A

- Albert
- Altman
- Armstrong
[#<Article id: 3, name: "Albert", content: "dpio osahu psauhd asuhd psauh piuh asuhd uh isah iu...", created_at: "2013-01-11 11:51:30", updated_at: "2013-01-11 11:51:30">, #<Article id: 6, name: "Altman", content: "aosdi asoijd poisajpo isajdpoia sjdpoia jsapoij sap...", created_at: "2013-01-11 12:36:10", updated_at: "2013-01-11 12:36:10">, #<Article id: 7, name: "Armstrong", content: "osfduhsdo sdpiuh dspiufh sdpioufhsdioufh sdpiufh sd...", created_at: "2013-01-11 12:42:08", updated_at: "2013-01-11 12:42:08">] 
```

我怎样才能摆脱最终的哈希？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:21:50.813

```
= @grouped[letter].each do |article| 
```

用这个替换那行

```
- @grouped[letter].each do |article| 
```

`each`返回一个迭代的集合。您不需要打印它，您已经打印了所有单独的元素。

# php - PHP平台上的Javascript？

> ID：14281125
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:19:35.650
> 
> 标签：php, javascript

我曾经与一位平面设计师进行过对话，他断言 PHP 无疑是网络上最流行的脚本语言。我对这个说法提出了质疑，即 [在我有限的知识中] javascript 被用于更多地方。

我得到的回应是，“好的，当然，javascript，但在 PHP 平台上使用。”

我曾经，现在仍然对这种回应感到困惑，并且无法弄清楚这句话的任何可能含义，尽管我对主题的专业知识很少。上述陈述是否有任何意义，或者有任何道理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:22:55.780

好吧，你可以做不同的事情。Javascript 使您的前端动态化，而 PHP 使您的后端动态化。老实说，我的统计知识跟不上我的速度，但我会选择两者都分布得很远。Javascript 在前端绝对占主导地位，主要是因为没有真正的替代方案。JS 可以在每个浏览器上运行，而其他脚本解决方案则不能。

在后端，您更加灵活。PHP、Ruby（在 RAIL 上）、Python、Java，甚至 javascript (node.js) 都是立即浮现在脑海中的后端脚本示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:23:09.563

大概您的朋友的意思是 Javascript（一种不依赖于服务器环境的客户端脚本语言）被放置在也支持 PHP（一种服务器端语言）的服务器平台上的网页中。

这是一个有点荒谬的论点，将其比作手机是否像电视一样受欢迎。它们都做不同的事情并有不同的应用程序，尽管两者经常可以交互。

# c# - 带有下拉列表的 Rows.Count

> ID：14281130
> 
> 赞同：1
> 
> 时间：2013-01-11T15:19:58.893
> 
> 标签：c#, .net, drop-down-menu

使用 .net 4 和 c# 我试图从数据库中获取数据到 GridView 并显示返回的行数。我还有一个下拉列表，用作 SqlDataSource 中的 ControlParameters 来过滤结果。

这在初始页面加载时效果很好，但是当我从下拉列表中选择某些内容时，结果会被过滤，但行数不会改变。当我从下拉列表中选择另一个项目时，行数会更新，但数字与前一个值正确。

```
 <h5> Showing <asp:Label ID="WOs_count" runat="server" Text="Label"></asp:Label> Work Orders.</h5>  

        <asp:DropDownList 
            ID="DropDownList1" 
            runat="server" 
            AutoPostBack="True">
            <asp:ListItem Value="%">All requests</asp:ListItem>
            <asp:ListItem Value="BBTeam">BB Team</asp:ListItem>
        </asp:DropDownList> 
```

选择语句：

```
 <asp:SqlDataSource 
    ID="WorkList" 
    runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT TASKS.WOID AS wo_id, Tasks.Completed AS 'Completed Date', Tasks.Respons AS 'Technician', FROM Tasks WHERE (Tasks.Completed>=DATEADD(day,-60,GETDATE())OR Tasks.Completed IS NULL)  AND (Tasks.Respons LIKE @Respons)  ">
    <SelectParameters>
        <asp:ControlParameter name="Respons" ControlID="DropDownList1" PropertyName="SelectedValue"/>
    </SelectParameters>

</asp:SqlDataSource> 
```

然后在后面的代码中我有这个：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        WOs_count.Text = WO_list.Rows.Count.ToString();
    } 
```

我对.net 完全陌生，所以如果我错过了一些明显的东西，我不会感到惊讶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:46:36.933

我认为您的问题是 Page_Load 事件在网格重新绑定到数据之前触发，这就是为什么计数总是落后一个回发。

您可以尝试在以后的 Page 事件中更新计数，例如`OnPreRender(object sender, EventArgs e)`或更新网格视图上 DataBound 事件中的计数...

将此添加到您的 ASPX ：

```
 <asp:GridView ID="WO_list" runat="server" OnDataBound="WO_list_DataBound" ... /> 
```

然后将其添加到后面的代码（C#）中：

```
protected void WO_list_DataBound(EventArgs e){ WOs_count.Text = WO_list.Rows.Count.ToString(); } 
```

试一试，让我知道其中一个/两个是否有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T15:27:18.447

这应该会为您解决。

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {  
        WOs_count.Text = WO_list.Rows.Count.ToString();
    } 
```

# r - R小部件中的晶格图形

> ID：14281135
> 
> 赞同：1
> 
> 时间：2013-01-11T15:20:12.737
> 
> 标签：r, lattice, gwidgets

使用 gWidgets 包，我制作了一个 R 小部件，当用户单击按钮时，它会显示格子图形。生成图形（`fgraph()`下图）的函数在小部件之外运行良好。但是左上角的图形不会出现在小部件中。这是一个可重现的代码：

```
library(lattice)

sims <- data.frame(
    y=rnorm(8), 
    A=factor(c(1,1,1,1,2,2,2,2)), 
    B=factor(c(1,1,2,2,1,1,2,2)),
    C=factor(c(1,2,1,2,1,2,1,2))
)

fgraph <- function(sims){
    plot(
    dotplot(y ~ A | B+C , data = sims, 
             ylab="Zeta (mV)",  
            panel = function(...){
                panel.abline(v=c(1,2), col = "grey", lty = 2)
                panel.grid(col = "grey", lty = 2, v=0)
                panel.xyplot(..., pch = 16, col="black")
            }
        )
    )
}

library(gWidgetsRGtk2)
options(guiToolkit = "RGtk2")

win <- gwindow("Simulation")
GROUP <- ggroup(cont=win)

graphwindow <- ggraphics(container = GROUP,
    expand = TRUE, ps = 11)

GoGroup <- ggroup(horizontal=FALSE, container = GROUP)
addSpring(GoGroup)
Simulates <- gbutton(text="Simulates", container = GoGroup, 
    handler = function(h, ...) {
        fgraph(sims)
    }
) 
```

![在此处输入图像描述](../Images/bc12b0f66a47e45a7f59823cddffb76d.png)

# ajax - 从对话框更新到组件 primefaces

> ID：14281140
> 
> 赞同：0
> 
> 时间：2013-01-11T15:20:22.950
> 
> 标签：ajax, jsf-2, primefaces, updates

如何`<p:dataTable id="dtCarg">`从 中的命令按钮更新`<p:dialog>`？

我不断收到以下错误：

> 找不到从“table_servidoresxdependencia”引用的标识符“dtCarg”的组件

代码是：

```
<h:form id="formGestionServidores" prependId="false" style="font-size:10px;">
    <p:panel>
        <table id="tabla_objetivo_02">
            <tr>
                <td><p:fieldset id="tb_tabla_new" legend="Servidores" styleClass="ui-state-hover"
                        style="min-width:98%;height:100% ">

                        <p:dataTable id="dtCarg" var="cargo" value="#{mantePlazasController.listCargos}"
                            rowStyleClass="#{cargo.colorEstado}" emptyMessage="No existen plazas para la unidad seleccionada"
                            editable="true" style="font-weight: normal;overflow:auto;min-width:98%;">
                            <p:column headerText="Unidad">
                                <h:outputText value="#{cargo.serDescDep}"
                                    rendered="#{mantePlazasController.nivel!=2 and mantePlazasController.nivel!=3 and mantePlazasController.nivel!=4 and mantePlazasController.nivel!=5 and mantePlazasController.nivel!=6 and mantePlazasController.nivel!=7}" />
                                <h:outputText value="#{cargo.serDescDepNVL3}"
                                    rendered="#{mantePlazasController.nivel==2 or mantePlazasController.nivel==3 or mantePlazasController.nivel==4 or mantePlazasController.nivel==5 or mantePlazasController.nivel==6 or mantePlazasController.nivel==7}" />
                            </p:column>
                            <p:column headerText="Historial">
                                <center>
                                    <p:commandButton id="btnHistorial" icon="ui-icon-note" oncomplete="dlRegularizar.show()"
                                        title="Historial de Plaza" action="#{mantePlazasController.mostrarHistorial}">
                                        <f:setPropertyActionListener value="#{cargo}" target="#{mantePlazasController.cargoSelected}" />
                                    </p:commandButton>
                                    falta oncomplete falta actualizar
                                </center>
                            </p:column>
                        </p:dataTable>
                    </p:fieldset></td>
            </tr>
        </table>

        <p:dialog widgetVar="dlRegularizar" header="Regularizar Servidores" width="1210" modal="true">
            <p:dataTable id="table_servidoresxdependencia" var="servidorxdependencia"
                value="#{mantePlazasController.servidoresxdependencia}"
                emptyMessage="No existen trabajadores en el historial, para esa plaza"
                rowStyleClass="#{servidorxdependencia.color_his}">

                <p:ajax event="rowEdit" listener="#{mantePlazasController.onEditRowServidorxDependencia}"
                    update="tabla_objetivo_02:dtCarg,table_servidoresxdependencia,notificacionCalificacion,my_json_data" />

                <f:facet name="header">
                        Servidor-Dependencia HISTORIAL
                    </f:facet>
                <p:column headerText="Codigo">
                    <h:outputText value="#{servidorxdependencia.serCod}" />
                </p:column>
                <p:column headerText="Fecha de inicio">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{servidorxdependencia.serFech_in_unmsm_str}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:calendar value="#{servidorxdependencia.serFech_in_unmsm}" navigator="true" inputStyle="width:70px"
                                locale="es" pattern="dd/MM/yyyy" showButtonPanel="true" readOnlyInputText="true" showOn="button">
                            </p:calendar>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Edit" style="width:20px">
                    <p:rowEditor />
                </p:column>
                <p:column headerText="Elim">
                    <center>
                        <p:commandButton id="HisEliSer" icon="ui-icon-trash" oncomplete="puenteEliSerHis(),linea_ocultar()"
                            title="Eliminar">
                            <f:setPropertyActionListener value="#{servidorxdependencia}" target="#{mantePlazasController.servidorHisElim}" />
                        </p:commandButton>
                    </center>
                </p:column>
            </p:dataTable>
        </p:dialog>
    </p:panel>
</h:form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:51:40.017

所以，基本上，你有一个

```
<h:form id="formGestionServidores" prependId="false" ...>
    <p:panel>
        <table id="tabla_objetivo_02">
            <tr>
                <td>
                    <p:fieldset id="tb_tabla_new" ...>
                        <p:dataTable id="dtCarg" ...> 
```

并且您想在更新中引用它，如下所示

```
<p:ajax ... update="tabla_objetivo_02:dtCarg" /> 
```

这确实行不通。HTML`<table>`元素不代表 JSF 组件，因此它在 JSF 组件树中不可用。对于初学者来说，找出正确客户端 ID 的最简单方法是通过右键单击并在浏览器中*查看源代码来查看生成的 HTML 输出。*在更新中找到 HTML 表示`<p:dataTable id="dtCarg">`并准确使用其`id`属性，前缀为`:`.

根据到目前为止发布的视图标记`<h:form prependId="false">`，生成的 HTML 表示应该只有`id="dtCarg"`，因此您应该按如下方式引用它：

```
<p:ajax ... update=":dtCarg" /> 
```

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)

# jasper-reports - Jasperreports 如何限制输入控件多选框中的字符数

> ID：14281142
> 
> 赞同：0
> 
> 时间：2013-01-11T15:20:22.907
> 
> 标签：jasper-reports, ireport

有没有办法限制输入控件多选框中的字符数？我想允许一些溢出，但不要过多。我正在使用 Jasper 和 iReport 3.7.1 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:31:20.357

有2个选项：

*   修改输入控件的 CSS（有关选项，请参见[此处](https://stackoverflow.com/questions/3780843/limit-initial-width-of-select-list)）
*   修改您的查询，使其仅返回字符串的前 50 个字符

（请参阅此处[Jaspersoft 社区门户](http://community.jaspersoft.com//questions/802541/limiting-number-characters-input-control-multi-select-box)）

# ios - iOS UITextView 不会调整大小

> ID：14281144
> 
> 赞同：0
> 
> 时间：2013-01-11T15:20:31.767
> 
> 标签：ios, height, uitextview

这真的很奇怪。我有一个与 OBOutlet 正确连接的 UITextView。在我的 viewDidLoad 我正在更新它的文本，如下所示：

```
[tvDescription setText:@"This is some sample text "]; 
```

然后只是为了测试，我尝试调整它的大小：

```
[tvDescription setFrame:CGRectMake(20, 20, 20, 20)]; 
```

文本更新正常，但无论我为 setFrame 输入什么大小，都没有任何反应，它保持正常大小。它就像它被锁定。

tvDescription 是 UITextView，在笔尖中是 301 宽和 104 高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:27:43.963

我会尝试查看文本视图的自动调整大小掩码 - 确保它在显示时不会调整大小。如果您使用自动布局，请确保约束与您要执行的操作相匹配。

除此之外，只需确保您的网点已连接（似乎是因为文本更新）并且它应该可以工作。

# javascript - XMLHttpRequest：从 Web 服务检索输出

> ID：14281146
> 
> 赞同：0
> 
> 时间：2013-01-11T15:20:33.140
> 
> 标签：javascript, xml, web-services

我正在尝试编写我的第一个 javascript 调用名为“toto”的 Web 服务。

我在代码中提供了一个名为 data 的 xml，并希望从 Web 服务接收输出 xml（进行转换 centigrad-farenheit）。

我在 Firefox 中本地执行代码（我从 IE 或 Chrome 得到相同的结果）。Web 服务位于 vm 映像 webservicevmimage 上。

当我从 SOAP UI 调用 Web 服务时，它可以工作。

```
<script>

            function makeRequest() {
                var httpRequest = false;
                var strMethodName = 'toto/converting_temperature' ;
                var strSoapContent = "" ;   
                var Temp=document.getElementById('inputTemp').value;
                var Unit=document.getElementById('inputUnit').value;
                var soapAction = 'http://tempuri.org/toto/converting_temperature';
                var url = 'http://webservicevmimage:8080/toto&NoCache' ;
                var data = "<?xml version=\'1.0\' encoding=\'utf-8\'?>"
                + '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:toto="http://tempuri.org/toto"> '
                +   '<soapenv:Header/>'
                +   '<soapenv:Body>'
                +   '<toto:converting_temperature>'
                +   ' <toto:streams>'
                +   '   <toto:ws_in contentType="?">'
                +   '      <toto:Value>'
                + '<TABLE>'
                + '<INTABLE>'
                + '<temperature>' + Temp + '</temperature>'
                + '<Unit>' + Unit + '</Unit>'
                + '</INTABLE>'
                + '</TABLE>'
                + '</toto:Value>'
                + '   </toto:ws_in>'
                + '</toto:streams>'
                + '</toto:converting_temperature>'
                + '</soapenv:Body>'
                + '</soapenv:Envelope>';
                if (window.XMLHttpRequest) { // Mozilla, Safari,...
                    httpRequest = new XMLHttpRequest();
                    if (httpRequest.overrideMimeType) {
                        httpRequest.overrideMimeType('text/xml');
                    }
                }
                else if (window.ActiveXObject) { // IE
                    try {
                        httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
                    }
                    catch (e) {
                        try {
                            httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
                        }
                        catch (e) {}
                    }
                }
                if (!httpRequest) {
                    alert('Abandon :( Impossible de créer une instance XMLHTTP');
                    return false;
                }

                httpRequest.onreadystatechange = function() { alertContents(httpRequest); };

                httpRequest.open('POST', url, true);                

                httpRequest.setRequestHeader('Content-Type', 'application/soap+xml');   
                httpRequest.setRequestHeader('SOAPAction', soapAction);

                alert('XML File:\n' + data);

                httpRequest.send(data);     

                var parser = new DOMParser();
                var xmlDoc = parser.parseFromString(httpRequest.responseText(), "application/xml"); 

                alert(hxmlDoc);
                /*
                alert($(httpRequest.responseXML).find('CALCULATEDTEMPERATURE'));

                var answer = doc.getElementsByTagName("CALCULATEDTEMPERATURE").value;

                alert (answer);*/

            function alertContents(xmlhttp) {
                if (xmlhttp.readyState == 4 && ( xmlhttp.status == 200 || xmlhttp.status == 0))
                 {
                            alert(xmlhttp.responseXML.xml);
                 }
                else {
                            alert("Connection Error: Ready State=" + xmlhttp.readyState + " Status=" +  xmlhttp.status);
                    }
                }
                /*
                Different value for readystate
                    0--Uninitialized
                    1--Loading
                    2--loaded(but data not recieved                 
                    3--Interactive--Some part of the data is recieved                   
                    4--Completed(all data recieved)
                */
            }

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:38:40.277

在开发网络元素时，在本地运行代码（文件：\\\）是不好的做法。Windows（例如）引发安全错误。

尝试将您的代码放在远程服务器上，甚至放在本地服务器上（wamp/lamp/etc）

PS：为什么要重新发明轮子？有数千个可供网络调用的库。这是我最喜欢的两个：

*   [道场](http://dojotoolkit.org/documentation/tutorials/1.8/ajax/)
*   [jQuery](http://api.jquery.com/jQuery.ajax/)

# javascript - 垂直和水平居中大 div 中的小 div

> ID：14281151
> 
> 赞同：6
> 
> 时间：2013-01-11T15:20:42.203
> 
> 标签：javascript, html, css

我的代码如下：

```
<div id="bigDiv">
  <div id="smallDiv">DD</div>
</div> 
```

我的CSS如下：

```
#bigDiv {
  border: 1px solid red;
  height: 300px;
  width: 300px;
  vertical-align: middle;

}

#smallDiv {
  border: 1px solid black;
  height: 100px;
  width: 100px;
  margin: 0 auto;
} 
```

我想将小 div 在大 div 内垂直和水平居中。横向有效，纵向无效。

[http://jsfiddle.net/4Gjxk/](http://jsfiddle.net/4Gjxk/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:26:28.580

阅读：[http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

如果您不介意阅读，请执行以下操作：

```
 #bigDiv {

      position: relative; /* Needed for position: absolute to be related to this element and not body */

      border: 1px solid red;
      height: 300px;
      width: 300px;
      vertical-align: middle;
    } 
```

并将另一个更改为：

```
#smallDiv {
  position: absolute;
  margin: auto;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;

  border: 1px solid black;
  height: 100px;
  width: 100px;

} 
```

**这是更新的 jsfiddle：http:** [//jsfiddle.net/4Gjxk/1/](http://jsfiddle.net/4Gjxk/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T15:25:37.110

我相信这是使用最少 CSS 的最直接的解决方案。由于 100 / 300 = ~.33 您可以使用 33% 的保证金，如下所示：

```
#bigDiv {
  border: 1px solid red;
  height: 300px;
  width: 300px;
}

#smallDiv {
  border: 1px solid black;
  height: 100px;
  width: 100px;
  margin: 33%;
} 
```

这是[更新的 jsFiddle](http://jsfiddle.net/4Gjxk/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:26:15.187

应该：

```
#smallDiv{
    position:absolute;//? relative?
    top:45%;
    left:45%;
} 
```

这应该是正确的，但我相信有人会想出更好的方法。显然你也可以做像素，所以`top:100px;left:100px;`在你的情况下可能也会更好:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:28:28.367

尝试绝对定位。您只需要知道元素的宽度即可将其放置在中心。

```
 #bigDiv {
    border: 1px solid red;
    height: 300px;
    position: relative;
    vertical-align: middle;
    width: 300px;
}

  #smallDiv {
        border: 1px solid black;
        height: 100px;
        left: 50%;
        margin: -50px auto 0 -50px;
        position: absolute;
        top: 50%;
        width: 100px;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T15:30:11.377

将此添加到#smallDiv：

```
margin-top: 100px; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T15:30:41.777

如果您需要在不知道框的确切大小的情况下进行操作（如果它们可能会更改），这是一种有点笨拙的方法：http: [//jsfiddle.net/gXbqm/](http://jsfiddle.net/gXbqm/)

```
#bigDiv {
  border: 1px solid red;
  height: 300px;
  width: 300px;
  vertical-align: middle;
  display:table-cell

}

#smallDiv {
  border: 1px solid black;
  height: 100px;
  width: 100px;
  margin: 0 auto;
  vertical-align:center;
} 
```

如果您知道这些 div 将始终为 100x100 和 300x300，那么 Jonathan.cone 的解决方案会更干净

# php - 在 laravel 中处理数组

> ID：14281153
> 
> 赞同：0
> 
> 时间：2013-01-11T15:20:47.837
> 
> 标签：php, arrays, foreach, views, laravel

我正在学习 laravel 并尝试用 laravel 创建一个社区。我卡在某个部分，需要问你们。

现在我正在尝试向读者展示帖子。

这就是我到目前为止所完成的 ![http://i.imgur.com/lc5gX.jpg](../Images/fbd6302b22de6965c250e7906446a9bc.png)

使用此代码：

```
public $restful = true;
public function get_index($title = '')
{
    //Do we have an arguement?
        if(empty($title))
        {return Redirect::to('dashboard');}

    $view = View::make('entry');
    $query = DB::table('threads')->where('title', '=', $title)->first();

    //Do we have this thread?
        if(!$query)
        {return Redirect::to('entry/suggest');}
    //We have? so lets rock it!
    $view->title = $query->title; //we get the title.

    $thread_id = $query->id;

    //getting posts.

    $posts = DB::table('posts')->where('thread_id', '=', $thread_id)->get();

    $view->posts = $posts;

  return $view;
} 
```

观点是：

```
<div id="entrybox">
    <h2>{{$title}}</h2>
@foreach($posts as $post)
    <p class="entry"><span class="entrynumber">1</span><span class="entry_text">{{$post->post_entry}}</span></p>
    <p align="right" class="edate"><span class="entry_user">{post_row.POST_USERNAME}</span> <span class="entry_date">{post_row.DATE}</span></p>
@endforeach
</div> 
```

但困难的部分（对我来说）是将帖子与发布者的用户名或其他用户信息（如电子邮件）集成以获得中等权限。但是，嘿在“用户”表中。

假设 $posts 变量包含一个线程的 10 个帖子的数据 *一个帖子有 thread_id 、poster_userid、post、posted_date。

如何从“用户”表中获取用户名并将其发送到我的视图？我确定在从数据库中选择帖子后我需要使用 foreach 我只是不知道如何处理 foreach 中的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:42:57.617

查看如何使用 Eloquent ORM 设置模型及其关系：http: [//laravel.com/docs/database/eloquent](http://laravel.com/docs/database/eloquent)

具体[http://laravel.com/docs/database/eloquent#relationships](http://laravel.com/docs/database/eloquent#relationships)

你应该有三个模型，线程，帖子和用户（将poster_userid更改为user_id......或者你可以保留它，但我不建议这样做......只是保持简单。你也可以使用author_id甚至poster_id，如果那样的话漂浮你的船..只要确保用你选择的东西改变'user_id'）

```
//application/models/User.php

class User extends Eloquent {

 public function posts()
 {
      return $this->has_many('Post', 'user_id');
 }
} 
```

和

```
//application/models/Post.php
class Post extends Eloquent {

 public function author()
 {
    return $this->belongs_to('User', 'user_id');
 }

 public function thread()
 {
    return $this->belongs_to('Thread', 'thread_id');
 }
} 
```

和

```
 //application/models/Thread.php
    class Thread extends Eloquent {

     public function posts()
     {
          return $this->has_many('Post', 'thread_id');
     }

    } 
```

而不是

```
$query = DB::table('threads')->where('title', '=', $title)->first();

//Do we have this thread?
    if(!$query)
    {return Redirect::to('entry/suggest');}
//We have? so lets rock it!
$view->title = $query->title; //we get the title.

$thread_id = $query->id;

//getting posts.

$posts = DB::table('posts')->where('thread_id', '=', $thread_id)->get(); 
```

我只想把

```
$thread = Thread::where('title', '=', $title)->first();

if(!$query)
    {return Redirect::to('entry/suggest');}

$posts = $thread->posts()->get();
//or if you want to eager load the author of the posts:
//$posts = $thread->posts()->with('author')->get(); 
```

然后在您的视图中，您可以通过以下方式查找用户名：

```
$post->author->username; 
```

容易小便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:44:52.750

使用 Eloquent，您可以通过多种方式做到这一点。

首先，您可以向您的帖子模型添加一个检索相关数据的方法。这种方法将为每个帖子创建一个新查询，因此通常不是最佳选择。

```
class Post extends Eloquent
{
    public function user()
    {
        return $this->has_one('User');
    }
} 
```

其次，您可以修改初始查询以加入所需数据并避免创建撤消查询。称为“[急切加载](http://laravel.com/docs/database/eloquent#eager)”。

```
// Example from Laravel.com

foreach (Book::with('author')->get() as $book)
{
    echo $book->author->name;
} 
```

# java - 与java中的postgresql错误相似

> ID：14281155
> 
> 赞同：3
> 
> 时间：2013-01-11T15:20:52.313
> 
> 标签：java, sql, postgresql

我有一个为 GWT 项目运行的 PostgreSQL 9.2.2 服务器。

当我在 phpPgAdmin 的 sql 选项卡中尝试它时，一个查询会带来麻烦，因为它工作正常：

```
 (select distinct max(enddate) as max,meterid 
  from usermeasurements 
  where locationid=127025 
    AND usage>-1 
  GROUP BY meterid ) as t1 
  left outer join usermeasurements as t2 
            ON (t1.meterid=t2.meterid 
            AND t1.max=t2.enddate) 
```

但是当我尝试在我的 gwt 项目中使用该查询时，我收到以下错误：

```
 [btpool0-5] ERROR com.example.DataGetter  - unable to get usermeasurement: org.postgresql.util.PSQLException: ERROR: syntax error at or near "as" Position: 112 
```

这是我第一次体验到 phpPgAdmin 和应用程序的不同之处。

可以看出，我使用 BoneCP 来处理我的连接池，但据我所知，这不应该有任何影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:25:33.787

既然`max`是关键字，请在之后使用其他内容`as`

```
select distinct max(enddate) as mymax, ...... 
```

更新 ：

另一件事。在你的例外中它说

```
unable to get usermeasurement: 
```

但是在你的 sql 中你使用了 usermeasurements （你`s`最后有一个）。再次检查你的源代码有可能你漏掉了字母s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:41:23.660

也许查询应该如下所示：

```
SELECT * 
FROM
(SELECT DISTINCT max(enddate) as max, meterid 
 FROM usermeasurements 
 WHERE locationid = 127025 
   AND usage > -1 
 GROUP BY meterid ) as t1 
LEFT JOIN usermeasurements as t2 
     ON (t1.meterid=t2.meterid 
         AND t1.max=t2.enddate) 
```

问题中的查询不正确（它看起来像是`FROM`更大查询的一部分）。

# android - Android 4.2 / Phonegap 2.3 文件系统访问问题

> ID：14281159
> 
> 赞同：1
> 
> 时间：2013-01-11T15:20:54.113
> 
> 标签：android, cordova, phonegap-plugins, android-4.2-jelly-bean

我一直在运行文件系统完整示例，如此处所述：http: [//docs.phonegap.com/en/2.3.0/cor](http://docs.phonegap.com/en/2.3.0/cor) ...

我遇到了问题。我完全按照上面链接中的说明在我的测试应用程序中复制并粘贴了代码。

这是我的问题：当我通过 Android 模拟器运行应用程序时，它工作得很好，并给了我以下组合： fileSystem.name : PERSISTENT fileSystem.root.name : com.revdomain.appname

我相信这是正确的。

但是，当我在我的 Nexus10 平板电脑上安装和运行时，我得到 fileSystem.root.name 的“0”，这让我相信这不适用于此配置？我迫切需要一个解决方案，因为我有一个需要能够将文件写入和访问文件系统的应用程序。

我的配置如下：使用cordova 2.3 并尝试在使用Android 4.2 的Nexus10 平板电脑上进行测试。

提前致谢。

# asp.net - Internet Explorer 10 是否支持浏览器插件，例如 Silverlight？

> ID：14281162
> 
> 赞同：1
> 
> 时间：2013-01-11T15:20:56.953
> 
> 标签：asp.net, silverlight, internet-explorer

这是一个问题。MS 给出了以下答案：“Internet Explorer 提供了无附加组件的体验，因此不会加载浏览器插件，也不会显示任何相关内容。但是，桌面版 Internet Explorer 确实支持浏览器插件，包括 ActiveX 控件例如 Adob​​e Flash 和 Microsoft Silverlight。有关详细信息，请参阅 IEBlog 上的无插件浏览。" (http://technet.microsoft.com/en-us/library/hh846773.aspx)

那么我们应该把它当作NO吗？“桌面版 Internet Explorer”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:24:00.873

作为 Windows 应用商店应用程序，例如您在平板设备上的应用程序，它以无插件模式运行。但是在PC上，除非您将其设置为，否则它不会。因此，PC 的 IE10 仍然完全支持 Silverlight 和其他插件。

# mdx - MDX 将跨两个角色扮演维度的两个多维数据集度量相加

> ID：14281163
> 
> 赞同：0
> 
> 时间：2013-01-11T15:20:56.323
> 
> 标签：mdx, olap, aggregation, olap-cube, cross-join

我有两个要连接在一起的查询，这会给我计算出的行总数。我遇到的问题是，尽管这些措施来自 1 个事实表，但小队名称有两个角色扮演维度。我对 MDX 非常陌生。

结果会是这样的

```
 | Competition    | Squad   | Goals A | Goals B | Total (Goals A + Goals B)|
 |----------------|---------|---------|---------|--------------------------|
 | Premier League | Arsenal | 25      | 15      | 40                       | 
```

提前致谢。

查询1：

```
SELECT 
([Measures].[Goals A]) ON COLUMNS,
NON EMPTY ([Dim Competition].[Hierarchy].[Competition ID],[Squad A].[Squad Name].ALLMEMBERS) ON ROWS
FROM 
[FDC Star]
WHERE [Dim Competition].[Competition ID].&[1]; 
```

查询1结果：

```
Competition     Squad                 Goals A
Premier League  Arsenal                 25
Premier League  Aston Villa              8
Premier League  Chelsea                 22
Premier League  Everton                 17
Premier League  Fulham                  17
Premier League  Liverpool               17
Premier League  Manchester City         25
Premier League  Manchester United       28
Premier League  Newcastle United        13
Premier League  Norwich City            13
Premier League  Queens Park Rangers      8
Premier League  Reading                 15
Premier League  Southampton             15
Premier League  Stoke City              14
Premier League  Sunderland              11
Premier League  Swansea City            19
Premier League  Tottenham Hotspur       17
Premier League  West Bromwich Albion    17
Premier League  West Ham United         19 
```

查询2：

```
SELECT 
([Measures].[Goals B]) ON COLUMNS,
NON EMPTY ([Dim Competition].[Hierarchy].[Competition ID],[Squad B].[Squad Name].ALLMEMBERS) ON ROWS
FROM 
[FDC Star]
WHERE [Dim Competition].[Competition ID].&[1]; 
```

查询2结果：

```
Competition     Squad                 Goals B
Premier League  Arsenal                 15
Premier League  Aston Villa              9
Premier League  Chelsea                 17
Premier League  Everton                 18
Premier League  Fulham                  15
Premier League  Liverpool               17
Premier League  Manchester City         16
Premier League  Manchester United       26
Premier League  Newcastle United        14
Premier League  Norwich City            11
Premier League  Queens Park Rangers      9
Premier League  Reading                  8
Premier League  Southampton             12
Premier League  Stoke City               7
Premier League  Sunderland              10
Premier League  Swansea City            12
Premier League  Tottenham Hotspur       22
Premier League  West Bromwich Albion    12
Premier League  West Ham United         5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:38:25.877

在花了很多时间试图想出一个解决方案后，我终于解决了我的问题。

谢谢

```
 WITH  
    MEMBER [Measures].[GFA] AS 
    (
    ([Measures].[Goals A]),
    linkmember([Dim Squad].[Squad Name],[Squad A].[Squad Name]),
    root([Squad Name])
    )
    MEMBER [Measures].[GFB] AS 
    (
    ([Measures].[Goals B]),
    linkmember([Dim Squad].[Squad Name],[Squad B].[Squad Name]),
    root([Squad Name])
    )
    MEMBER [MEASURES].[GF] AS
    (
        [Measures].[GFA] + [Measures].[GFB]
    )
    select 
    {[Measures].[GFA],[Measures].[GFB],[MEASURES].[GF]} on 0,
    non empty [Dim Squad].[Squad Name].allmembers on 1
    from [FDC Star]
    where [Dim Competition].[Competition ID].&[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:56:22.567

你可以尝试这样的事情：

```
WITH MEMBER [Measures].[Goals B Linked]
AS (LinkMember([Squad A].[Squad Name].CurrentMember, [Squad B].[Squad Name]), [Measures].[Goals B]),
MEMBER [Measures].[Total]
AS [Measures].[Goals A] + [Measures].[Goals B Linked]

SELECT 
{[Measures].[Goals A], [Measures].[Goals B Linked], [Measures].[Total]}  ON COLUMNS,
NON EMPTY ([Dim Competition].[Hierarchy].[Competition ID],[Squad A].[Squad Name].ALLMEMBERS) ON ROWS
FROM 
[FDC Star]
WHERE [Dim Competition].[Competition ID].&[1]; 
```

# c++ - 使用一个嵌套循环在数组链接列表中从一个位置迭代到另一个位置

> ID：14281173
> 
> 赞同：1
> 
> 时间：2013-01-11T15:21:25.547
> 
> 标签：c++, algorithm

我有一组数组，每个数组 ( `data[]`) 都存储在一个双向链表节点`ArrayNode`中。我从数组中的某个给定索引开始，然后迭代到另一个数组中的另一个索引（它们可能是同一个数组）。我确定我的两个节点是链接的，并且第一个节点位于第二个节点的“左侧”。

```
struct ArrayNode
{
 ArrayNode* prev;
 ArrayNode* next;

 int data[16];
 unsigned int count;
};

void iterate(ArrayNode* startnode, unsigned int startposition, ArrayNode* endnode, unsigned int endposition)
{
 for (unsigned int index = startposition; index < startnode->count; ++index)
 {
  std::cout << startnode->data[index] << "\n"; //I'd do some processing here
 }

 for (ArrayNode* node = startnode->next; node != endnode; node = node->next)
 {
  for (unsigned int index = 0; index < node->count; ++index)
  {
   std::cout << node->data[index] << "\n"; //I'd do some processing here
  }
 }

 for (unsigned int index = 0; index < endposition; ++index)
 {
  std::cout << endnode->data[index] << "\n"; //I'd do some processing here
 }
} 
```

上面的代码在几个方面存在缺陷。首先，如果`startnode == endnode`，它会给出不正确的输出。其次，拥有 3 个循环对于维护和代码大小来说是低效的。似乎应该可以让中间嵌套循环优雅地处理所有情况，但我不知道如何。是吗？如果没有，应该怎么做？

如果可能的话，我想避免为此创建一个迭代器对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:30:04.600

这样的东西适合您的需要吗？

```
ArrayNode* curnode = startnode;
unsigned int curposition = startposition;
while ((curnode != endnode) || (curposition != endposition)) {
        std::cout << curnode->data[curposition] << std::endl;
        if (++curposition == curnode->count) {
                curnode = curnode->next;
                curposition = 0;
        }
} 
```

请注意没有错误检查，这留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:30:27.793

这应该有效：

```
void iterate(ArrayNode* startnode, unsigned int startposition, ArrayNode* endnode, unsigned int endposition)
{
  ArrayNode* node = startnode;
  unisgned int pos = startposition;
  while (!(node == endnode && pos == endposition)) {
    process(node->data[pos]);
    ++pos;
    if (pos == node->count) {
      pos = 0;
      node = node->next;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:29:38.050

我认为这会做你想做的，但我认为它并没有更清晰、更短、更快或更容易维护。如果是我，我会使用您在原始帖子中的代码并清楚地评论它。

```
void iterate(ArrayNode* startnode, unsigned int startposition, ArrayNode* endnode, unsigned int endposition)
{
    int startindex = startposition;
    for (ArrayNode* node = startnode; node != NULL; node = node->next)
    {
        int endindex = ( node == endnode ) ? endposition : node->count;
        for (unsigned int index = startindex; index < endindex; ++index)
        {
            std::cout << node->data[index] << "\n"; //I'd do some processing here
        }
        startindex = 0;
        if ( node == endnode ) 
            break;
    }
} 
```

# asp.net - ASP.NET Web 应用程序正在从文本框中删除不可打印的字符

> ID：14281174
> 
> 赞同：3
> 
> 时间：2013-01-11T15:21:27.103
> 
> 标签：asp.net, vb.net, web-applications, barcode-scanner

我正在用 ASP.NET 编写一个 Web 应用程序，它使用 4.0 .NET Framework 接受来自二维条码阅读器的字符串。我正在 Windows 7 64 位机器上开发。二维条码中有不可打印的字符，必须维护，特别是 ascii 代码 29（组分隔符）、30（记录分隔符）和 4（传输结束）。这些字符正在被剥离。

当我将条形码扫描到 .NET Windows 应用程序中时，无法打印的字符会按预期出现。

当我从 Windows 应用程序复制字符串并将其粘贴到 ASP.NET 网页文本框中时，无法打印的字符再次被删除。

如何让 Web 应用程序接受不可打印的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:42:58.447

如果您有特殊字符，例如“<”和“>”，您可能需要对字符串进行编码以显示这些字符。

所以你必须使用

```
HttpUtility.HtmlEncode(myString); 
```

MSDN - [http://msdn.microsoft.com/en-us/library/73z22y6h.aspx](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T17:25:22.293

我有一个类似的问题。我必须做的是在将字符串输入文本框时，使用“<=”而不是单字符版本。然后在后端，我用单字符符号的 Unicode 值替换了这些实例，并在将其存储在 sql 数据库中时（确保字段是 nvarchar，顺便说一句）使用 httputility.decode。这将值正确地放入表中，然后正确显示（作为一个字符。）

如果您的复制和粘贴是自动的，您可能必须包含一个编码，后跟一个 string.replace 以将 Unicode 值更改为两个字符表示。

# vb.net - 未声明的 VB.NET 会话变量类型

> ID：14281177
> 
> 赞同：0
> 
> 时间：2013-01-11T15:21:30.183
> 
> 标签：vb.net, types, session-variables

尚未声明的 VB.NET 会话变量的类型是什么？

例如，假设我有一个尚未声明的会话变量，例如 Session("foo")。

如果我要检查它的类型，它会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:26:38.870

会话变量的类型为`Object`。

未声明的 Session 变量不存在，因此您无法检查其类型。

在阅读它们时，您应该从 Object 类型转换为您想要的类型（确保您有 Option Strict On）：

```
Dim bar as string
bar = CType(Session("foo"), String) 
```

看看[这个页面](http://msdn.microsoft.com/en-us/library/03sekbw5%28v=vs.100%29.aspx)，其中还包括阅读时错误情况的指南

# c# - 如何在通用数据表上实现 odata wcf web api 端点？

> ID：14281178
> 
> 赞同：1
> 
> 时间：2013-01-11T15:21:30.403
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我有一个程序可以查询任意数量的基于 sql 的数据源并将数据作为数据表返回。查询的名称和传递的参数决定了返回数据的确切结构。

我现在已经通过 wcf web-api 端点公开了其中的一些功能。

我想知道，有没有一种方法可以作为 odata 端点，将数据表中的行作为 poco 动态返回？

就像是：

```
enter code here
[Queryable]
public IQuerable<dynamic> Get(string datasourceName, string view, string parametersAndValues)
        {

            var parameters =   ApiControllerHelpers.GetNameValueCollectionFromString(parametersAndValues);

            var ds = datasourceRepository.FindDatasourceByName(datasourceName);

            var dataManager = ds.GetDataManager();   

            DataTable dataTable = dataManager.DataTableDataRepository.GetDataTable(parameters, view);

            var dynamcicTable = dataTable.AsDynamicEnumerable();

            return dynamcicTable;
        } 
```

通过这个设置，我得到了一组抱怨序列化等的 WCF 数据错误。所以我想我的问题是，对于 odata 支持，我的类是否必须是静态类型的？

# php - preg_match 两个字母，五个数字，两个字母

> ID：14281180
> 
> 赞同：1
> 
> 时间：2013-01-11T15:21:36.633
> 
> 标签：php, regex, preg-match

我在正则表达式方面很糟糕，我只是不理解它们，我会感谢任何理解它们的人的帮助。

我需要能够匹配两个 AZ 字符，然后是五个 0-9 字符，然后是两个 AZ 字符。一个例子是`AB12345CD`。

我得到这个来匹配五个数字`(^[0-9]{5}$)`，但只是复制它是行不通的，而且我因为无法弄清楚它而感到非常愚蠢。

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:24:47.003

最简单的理解，最长的写

```
[A-Z][A-Z][0-9][0-9][0-9][0-9][0-9][A-Z][A-Z] 
```

更短：

```
[A-Z]{2}[0-9]{5}[A-Z]{2} 
```

仅完整的行：

```
^[A-Z]{2}[0-9]{5}[A-Z]{2}$    // ^ - start of line; $ - end of line 
```

在括号中捕获：

```
(^[A-Z]{2}[0-9]{5}[A-Z]{2}$)  // as per mpaepper, for reuse in matched expression 
```

更短：

```
(^[A-Z]{2}\d{5}[A-Z]{2}$)     //  \d represents 0-9 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T15:24:00.390

然后试试这个：

```
(^[A-Z]{2}[0-9]{5}[A-Z]{2}$) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:31:16.510

你可以尝试这样的事情：

```
[A-Z]{2}[0-9]{5}[A-Z]{2} 
```

下面是表达式的分解：

```
[A-Z]    # Match a single character present in the list below
               # A character in the range between “A” and “Z”
   {2}         # Exactly 2 times
[0-9]       # Match a single character in the range between “0” and “9”
   {5}         # Exactly 5 times 
```

或者你可以尝试如下

`[A-Z]{2}\d{5}[A-Z]{2}`

希望它会有所帮助。

# ajax - JSF：重用 f:ajax 渲染/执行选择器

> ID：14281183
> 
> 赞同：2
> 
> 时间：2013-01-11T15:21:42.103
> 
> 标签：ajax, jsf, jsf-2

在 JSF 2 中，内置的 ajax 标记允许预定义的关键字选择渲染或执行目标。例如：

```
<f:ajax execute="@form" render="@this" /> 
```

是否有任何简单的方法可以在自定义组件中重用选择器代码？例如：

```
<f:mycustomcomponent update="@form" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:43:00.813

没有标准的 JSF API，原因很简单，它们是由`jsf.js`脚本文件在客户端处理的。JSF ajax JavaScript 替换`@form`by`element.form.id`和`@this`by`element.id`等等。目前还不清楚你到底需要它做什么，但如果你基本上需要将它传递给`jsf.ajax.request()`，那么你实际上不需要自己操作它。

但是，如果您出于某种原因确实需要它来引用组件树中的某些 JSF 组件，那么您最好的选择是真正自制它。假设你在一个`UIComponent`中，这是一个启动示例（请记住，它可以包含多个值，以空格分隔）

```
if (update.charAt(0) != '@') {
    component = findComponent(update);
} else if (update.equals("@all")) {
    component = context.getViewRoot();
} else if (update.equals("@form")) {
    component = getClosestParent(this, UIForm.class);
} else if (update.equals("@none")) {
    component = null;
} else if (update.equals("@this")) {
    component = this;
} else {
    throw new IllegalArgumentException("Wrong update value " + update);
} 
```

使用这个小辅助方法（从[OmniFaces](http://omnifaces.org) [`Components`实用程序类](http://showcase.omnifaces.org/utils/Components)复制）

```
public static <T extends UIComponent> T getClosestParent(UIComponent component, Class<T> parentType) {
    UIComponent parent = component.getParent();

    while (parent != null && !parentType.isInstance(parent)) {
        parent = parent.getParent();
    }

    return parentType.cast(parent);
} 
```

# java - 如何在 Java 的构造函数中设置默认字符串格式？

> ID：14281194
> 
> 赞同：0
> 
> 时间：2013-01-11T15:22:06.637
> 
> 标签：java, string, constructor, format

我在 Java 中有一个使用字符串的构造函数。这个字符串总是一个数字。

```
private final String number;

public Number (String s) {
    this.number = s;
} 
```

由于在我的情况下这个字符串总是一个数字，我希望这个字符串总是使用某种格式。例如，在我的 main 方法中创建一些新数字时：

```
public static void main (String[] args) {

    Number one = new Number("1");
    Number ten = new Number("10");

    System.out.println("Number one is: " + one);
    System.out.println("Number ten is: " + ten);
} 
```

我希望它打印出这样的东西：

```
Number one is: 000001
Number ten is: 000010 
```

如何在我的构造函数中声明这种格式（在我的情况下它必须在构造函数中）？

编辑：同样，我知道有更好的实现，例如避免使用字符串，但我使用字符串是有原因的（不要问我为什么）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:26:44.893

我不会使用 String 也不会称它为`Number`常见的内置类型。你甚至可以用你的“数字”类来扩展 Number

```
class MyNumber extends Number {
     final long num;

     MyNumber(long num) { this.num = num; }

     public String toString() { return String.format("%06d", num); }

     // other number methods.
} 
```

您应该考虑使用 a`static factory`来创建您的数字，就像 Integer 和 BigDecimal 和其他人所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:28:08.473

" 这个字符串永远是一个数字。"

这句话在我看来有些不对劲。如果您在内部表示一个数字，则应使用数字类型。根据您的需要，它可以是`double`、 an`int`或小数类型，例如`BigDecimal`.

当您需要在某处（并且仅在那时）打印该数字时，您应该将其转换为`String`. Java 提供了一组丰富的方法来格式化`java.text.NumberFormat`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:26:52.517

你可以重写类中的 tostring 方法

```
 public String toString() { 
   } 
```

除非有其他原因来格式化数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:12:05.870

首先，在您的构造函数中，您可能会添加一个解析步骤来检查字符串的有效性（防御性编程，抛出 IllegalArgumentException 或临时 Exception 子类）。

然后，用 0 填充一个数字：[如何在左边用零填充一个整数？](https://stackoverflow.com/questions/473282/left-padding-integers-with-zeros-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T16:15:43.910

好的，我想我终于在这篇文章中找到了答案： [Left padding a String with Zeros](https://stackoverflow.com/questions/4469717/left-padding-a-string-with-zeros)

在我的情况下，这对构造函数意味着：

```
public Number(String s) {
    this.number = String.format("%06d", Integer.parseInt(s));
} 
```

也许这对将来的任何人都有帮助。

# c# - 在 C# 中编写自己的安装程序“创建者”

> ID：14281200
> 
> 赞同：0
> 
> 时间：2013-01-11T15:22:19.210
> 
> 标签：c#, installation, zip

我对编程并不感兴趣，所以如果这是一个愚蠢的问题，请原谅。

我知道那里有几个安装程序创建者，比如默认的 Visual Studio 安装程序项目、InstallShield、NSIS 等，但我认为如果我有自己的解决方案会很酷。

假设我想创建自己的安装程序创建者，这是一个我可以添加几个我想安装的文件并定义自己的脚本系统（可能基于 XML）的工具。创建一个工具来打包我添加到的所有文件。假设 zip 是一个简单的步骤。但是我如何开发能够构建可执行文件的东西呢？这是如何实现的？

感谢任何建议和有用的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:29:47.553

我建议你看看[Wix](http://wixtoolset.org/)。Wix 是开源的，所以如果你不想编写一些安装程序代码，你可以为 Wix 源代码做出贡献。Wix 还允许您使用 C# 编写自己的自定义操作（如果愿意）。另外它是基于 xml 的（通常你的安装程序是一堆 xml 文件），所以它似乎很好地满足了你的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:55:22.190

不确定是否满足您的需求。这就是我如何将一些数据附加到`filename`基于名为`BaseExecutable`. 数据可以是 .zip 或其他任何文件。这`BaseExecutable`是某种安装程序（在我的情况下是 Win32 可执行文件），它从**自身**读取附加数据。数据的起始位置可以在生成的可执行文件的位置 44、45、46、47 处找到。我没有尝试使用任何 .NET exe

```
public void Create(string Filename, string BaseExecutable)
{
    FileStream Source = new FileStream(BaseExecutable, FileMode.Open, FileAccess.Read, FileShare.Read);

    file = new FileStream(Filename, FileMode.Create, FileAccess.Write, FileShare.None);

    byte[] buffer = new byte[65536];
    Source.Read(buffer, 0, 48);
    file.Write(buffer, 0, 44);

    writer = new BinaryWriter(file, Encoding.ASCII);
    writer.Write((uint)Source.Length);

    int count;
    while ( (count=Source.Read(buffer, 0, buffer.Length))>0)
        file.Write(buffer, 0, count);

    // append custom data here ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:27:15.740

一种简单的方法是拥有一个程序，该程序采用标准可执行文件并将您的数据附加到文件的正常结尾（使用“魔术词”）之后。“标准可执行文件”所做的只是读取自身，找到标记数据开始的魔法词并提取该数据。肯定还有其他更优雅的方法，尤其是使用更新的语言和运行时，但我提到的一种是基本的，即使在纯 C 中也可以实现。

或者，使用 .NET，您可以利用运行时编译器从库存代码动态创建可执行文件，我认为您还可以嵌入资源，就像在 VS 项目中嵌入资源一样。不过，我对这一点并不是 100% 肯定的。

# printing - Twitter Bootstrap Accordion - 如何在所有扩展的情况下打印？

> ID：14281204
> 
> 赞同：6
> 
> 时间：2013-01-11T15:22:24.817
> 
> 标签：printing, twitter-bootstrap

我在整个网站上到处使用 Twitter Bootstrap 手风琴。它们工作得很好，我刚刚注意到的问题是我是否想打印一个页面。理想情况下，如果要为我的目的打印页面，它们都应该展开。

有谁知道解决这个问题的最佳方法？我知道我可以通过 javascript 将某些内容连接到页面上的“打印”按钮，但我们假设用户将使用浏览器的“打印”按钮 - 因此将 javascript 绑定到此可能不是一个选项。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-01T02:24:07.403

我使用的是 bootstrap 3.1.1 和默认情况下的 bootstrap.css。我也在使用此页面中的示例手风琴 html：http: [//getbootstrap.com/javascript/#collapse](http://getbootstrap.com/javascript/#collapse)

对我来说，将此规则添加到 .css 文件的 @media print {..} 部分就可以了：

```
.collapse {
    display: block !important;
    height: auto !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:09:23.827

如果媒体用于打印，请使用[CSS 媒体类型并将所有手风琴样式设置为展开。](http://www.w3.org/TR/CSS2/media.html)

这里的小例子，扩展所有手风琴仅用于打印：

```
@media print {
    /* your stylesheet for printing, eg.: */
    .accordion-group .accordion-body.collapse {
        height: auto;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-14T16:28:30.023

在 Bootstrap 4 中，您可以使用[显示实用程序类](https://getbootstrap.com/docs/4.0/utilities/display/#display-in-print)，例如：

`<div class="collapse d-print-block">...</div>`

# liquid - 液体标记：如果参数 a 和 b 和 c 未设置，则不显示

> ID：14281211
> 
> 赞同：0
> 
> 时间：2013-01-11T15:22:42.680
> 
> 标签：liquid

```
{% unless site.param1 or site.param2 or site.param3 %}
 <p>Hello!</p>
{% endunless %} 
```

在 Jekyll (Github Pages) 网站中，我正在尝试打“你好！” 只有设置了这些参数中的任何一个或多个时才会出现，如果没有设置则不会出现。

上面的代码似乎没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:27:17.837

```
{% if site.param1 or site.param2 or site.param3 %}
 <p>Hello!</p>
{% endif %} 
```

似乎这是一个简单的逻辑问题，而不是 Liquid 问题。我通过询问来[调试](http://en.wikipedia.org/wiki/Rubber_duck_debugging)我自己的问题。

# macos - Leiningen：在 OSX Mountain Lion 上安装问题

> ID：14281215
> 
> 赞同：1
> 
> 时间：2013-01-11T15:22:57.157
> 
> 标签：macos, clojure, installation, leiningen

更新：

我已经通过“自制”安装并更新了（请参阅对这个问题的评论），所以我的最终问题得到了解决，但我在这里发布的特定问题仍然是开放的，但我并不真正关心，因为“自制”解决方案绕过了它我。感谢 Diego Basch 的建议。

* * *

我正在尝试按照此处的 shell 脚本说明安装 leinigen：http: [//leiningen.org/](http://leiningen.org/)。我下载了“lein”脚本并执行了，但出现以下错误：

```
[/usr/local/bin (git:master) ] $ ./lein.sh 
Could not find artifact lein-newnew:lein-newnew:jar:0.3.7
This could be due to a typo in :dependencies or network issues.
Could not resolve dependencies 
```

我在 stackexchange 上找到的最接近的答案是：[在 Mac OS X 中安装 Leiningen 2.X](https://stackoverflow.com/questions/11553813/installation-of-leiningen-2-x-in-mac-os-x)

但这没有帮助。任何帮助都可以解决这个问题。

谢谢，

马特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T15:49:00.277

您可以通过 Homebrew 在 OSX 上安装 Leiningen 2（这就是您现在想要的）：

```
brew install leiningen --devel 
```

请注意`--devel`切换，否则您将获得最新的稳定版本 Leiningen 1.7。关于如何开始的更多有用信息可以在这个博客上找到：http: [//jrheard.tumblr.com/post/40024238467/getting-started-with-clojure](http://jrheard.tumblr.com/post/40024238467/getting-started-with-clojure)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:28:37.650

It's a known bug in leiningen-RC1 and already fixed for leiningen-RC2.

[https://github.com/technomancy/leiningen/issues/915](https://github.com/technomancy/leiningen/issues/915)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-24T17:54:58.150

对于 mac os 优胜美地仅适用于

```
brew install leiningen 
```

# php - 无法调用未定义的 handlebars.js 的方法“匹配”

> ID：14281217
> 
> 赞同：0
> 
> 时间：2013-01-11T15:23:06.153
> 
> 标签：php, javascript, json, handlebars.js

我正在尝试在 php中使用**handlebars.js 。**我正在抓取通过**$_GET**传递的变量，构建一个数组，然后将其附加到**http://my.service.url.comsearch.json?。http_build_query($myarray, '', "&");** 建立我的网址，然后使用**file_get_contents**来获取“json”。我正在尝试使用 handlebars.js 来显示结果。我在 google chrome 控制台中收到以下错误

> “未捕获的类型错误：无法调用未定义 cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js:431 的方法‘匹配’”

在控制台中查看错误的详细信息时，我看到了这个

> lexer.next cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js:431 lex cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1 .js:468 lex cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js:238 解析 cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc .1.js:251 Handlebars.parse cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js:595 编译 cloud.github.com/downloads/wycats/handlebars.js/handlebars -1.0.rc.1.js:1842（匿名函数）cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js:1851（匿名函数）profile.php:39

这是我正在使用的模板

```
 <script id="ul" type="text/x-handlebars-template">
  <ul>
    {{#jsonResult}}
      <li>{{name}}</li>
    {{/jsonResult}}
  </ul>
  </script> 
```

这是我在尝试使用模板时使用的脚本

```
</script>
  <script type="text/javascript">
  var source = $("ul").html();
  var template = Handlebars.compile(source);
  var json = $pJSON;
  var data1 = JSON.stringify(json);
  var data = JSON.parse(data1);
  $("body").html(template(data));
</script> 
```

***这是“$("body").html(template(data));" 上面的控制台错误中引用的第 39 行***

最后这是我得到的json（以及一个样本）

> {totalCount:2,jsonResult:[{listingId:460880,pageUrl:/page/LA/laplace/la-carreta-of-laplace/17-460880.html,name:La Carreta Of LaPlace,电话:(985) 651- 9991,address:107 Carrollwood Dr,city:Laplace,state:LA,url:http://www.carretarestaurant.com,latitude:30.44437,longitude:-91.14768,logoUrl:http://url.com/imp/17 /logo/LG460880.JPG,enticerLine:\传统风味墨西哥菜\,照片:[{photoUrl:http://url.com/imp/17/photo/PH460880_1_S.jpg,photoDesc:},{photoUrl:http:/ /url.com/imp/17/photo/PH460880_2_S.jpg,photoDesc:},{photoUrl:http://url.com/imp/17/photo/PH460880_3_S.jpg,photoDesc:},{photoUrl:http:// /url.com/imp/17/photo/PH460880_4_S.jpg,photoDesc:},{photoUrl:http://url.com/imp/17/photo/PH460880_5_S.jpg,photoDesc:},{photoUrl:http:// /url.com/imp/17/photo/PH460880_6_S.jpg,photoDesc:},{photoUrl:http://url.com/imp/17/photo/PH460880_7_S.jpg,photoDesc:},{photoUrl:http://url.com/imp/17/photo/PH460880_8_S.jpg,photoDesc:},{photoUrl:http://url.com/imp/17/photo/PH460880_9_S.jpg,photoDesc:}, {photoUrl:http://url.com/imp/17/photo/PH460880_11_S.jpg,photoDesc:},{photoUrl:http://url.com/imp/17/photo/PH460880_12_S.jpg,photoDesc:}] },{listingId:430765,pageUrl:/page/LA/new-orleans/casa-garcia-mexican-restaurant/17-430765.html,name:Casa Garcia Mexican Restaurant,电话:(504) 464-0354,地址: ,city:New Orleans,state:LA},{listingId:223993,pageUrl:/page/LA/metairie/casa-garcia-mexican-restaurant/17-223993.html,name:Casa Garcia Mexican Restaurant,电话:(504 ) 467-4071,address:8814 Veterans Memorial Bl,city:Metairie,state:LA,latitude:30.005453,longitude:-90.224346},{listingId:115036,pageUrl:/page/LA/kenner/casa-tequila/17- 115036.html，姓名：Casa Tequila，电话：(504) 443-5423，地址：3229 Williams Bl，城市：肯纳，州：LA，纬度：30.014789，经度：-90.239894，展示广告：http://url.com/imp/17/disp/DA115036_658760_1.JPG，展示广告：[{展示广告：http://url.com/imp /17/disp/DA115036_658760_1.JPG}]},{listingId:460184,pageUrl:/page/LA/kenner/garces-latin-american-restaurant/17-460184.html,name:Garces Latin American Restaurant,电话:( 504) 305-5035,address:4221 Williams Bl,city:Kenner,state:LA,url:http://www.garcescubanrestaurant.com,latitude:30.033075,longitude:-90.238324},{listingId:34172784,pageUrl:/ page/LA/new-orleans/taco-bell-new-orleans/cg-34172784.html，名称：Taco Bell，电话：(504) 286-7901，地址：6220 Elysian Fields Ave，城市：新奥尔良，州：洛杉矶，纬度：30.022314，经度：-90.061329，enticerLine：精打细算的家庭和旅行者为美国领先的炸玉米饼连锁店奔跑。}，{listingId：34184616，pageUrl：/page/LA/new-orleans/taco-bell-new-orleans-5/cg-34184616.html,name:Taco Bell,电话:(504) 391-6930,address:4300 General Degaulle Dr,city:New Orleans ,state:LA,latitude:29.919895,longitude:-90.011082},{listingId:672267490,pageUrl:/page/LA/new-orleans/taco-bell-new-orleans-4/cg-672267490.html,name:Taco贝尔，电话：(504) 283-9006，地址：4603 Chef Menteur Hwy，城市：新奥尔良，州：LA，纬度：30.006073，经度：-90.035487}，{listingId：733204300，pageUrl：/page/LA/new -orleans/taco-bell-orleans-4/cg-733204300.html，名称：Taco Bell，电话：(504) 246-6699，地址：6007 Bullard Ave，城市：新奥尔良，州：LA，纬度：30.043732，经度：-89.958962}，{listingId：733204270，pageUrl：/page/LA/new-orleans/taco-bell-orleans/cg-733204270.html，名称：塔可钟，电话：（504）244-8761，地址： 5611 Read Blvd，城市：新奥尔良，州：LA，纬度：30.030747，经度：-89。97091},{listingId:4431549,pageUrl:/page/LA/new-orleans/taco-bell-orleans-4/cg-4431549.html,name:Taco Bell,电话:(504) 821-4458,address:2639 Tulane Ave,city:New Orleans,state:LA,latitude:29.96146,longitude:-90.089724},{listingId:733204280,pageUrl:/page/LA/new-orleans/taco-bell-orleans-2/cg-733204280。 html,name:Taco Bell,电话:(504) 240-6374,address:6009 Bullard Ave,city:New Orleans,state:LA,latitude:30.044695,longitude:-89.959174},{listingId:4415463,pageUrl:/page /LA/harvey/taco-bell-harvey/cg-4415463.html，名称：Taco Bell，电话：(504) 362-0746，地址：929 Manhattan Blvd，城市：Harvey，州：LA，纬度：29.902112，经度:-90.064841,enticerLine:精打细算的家庭和旅行者为美国领先的炸玉米饼连锁店奔跑。},{listingId:34159784,pageUrl:/page/LA/marrero/taco-bell-marrero-2/cg-34159784.html ,姓名:塔可钟,电话:(504) 341-5367,address:5141 Lapalco Blvd,city:Marrero,state:LA,latitude:29.874902,longitude:-90.098789},{listingId:34141058,pageUrl:/page/LA/terrytown/taco-bell-terrytown /cg-34141058.html,name:Taco Bell,电话:(504) 394-7584,address:2640 Belle Chasse Hwy,city:Terrytown,state:LA,latitude:29.888259,longitude:-90.030674},{listingId:612584560 ,pageUrl:/page/LA/harvey/taco-bell-harvey-3/cg-612584560.html,name:Taco Bell,电话:(504) 374-0972,address:1740 Manhattan Blvd,city:Harvey,state: LA，纬度：29.88825，经度：-90.056795}，{listingId：708288570，pageUrl：/page/LA/gretna/taco-bell-gretna/cg-708288570.html，名称：TACO BELL，电话：（504）368- 3370,address:62 WESTBANK EXPY # B,city:GRETNA,state:LA,latitude:29.918798,longitude:-90.044141},{listingId:34183917,pageUrl:/page/LA/westwego/taco-bell-westwego/cg- 34183917.html，姓名：塔可钟，电话：(504) 341-6909,address:1001 Westbank Expy,city:Westwego,state:LA,latitude:29.898329,longitude:-90.142391},{listingId:672876420,pageUrl:/page/LA/gretna/taco-party-gretna /cg-672876420.html,name:Taco Party,电话:(504) 312-3912,address:1115 van Trump St,city:Gretna,state:LA,latitude:29.918975,longitude:-90.045341},{listingId:647483470 ,pageUrl:/page/LA/westwego/speedy-taco-westwego/cg-647483470.html,name:Speedy Taco,电话:(504) 301-1524,地址:1020 Bridge City Ave,城市:Westwego,州:LA ,纬度:29.930096,经度:-90.172423}]}{listingId:647483470,pageUrl:/page/LA/westwego/speedy-taco-westwego/cg-647483470.html,name:Speedy Taco,电话:(504) 301-1524,地址:1020 Bridge City Ave,城市:Westwego ,州:LA,纬度:29.930096,经度:-90.172423}]}{listingId:647483470,pageUrl:/page/LA/westwego/speedy-taco-westwego/cg-647483470.html,name:Speedy Taco,电话:(504) 301-1524,地址:1020 Bridge City Ave,城市:Westwego ,州:LA,纬度:29.930096,经度:-90.172423}]}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:27:54.440

```
{{#jsonResult}}
  <li>{{name}}</li>
{{/jsonResult}} 
```

`#jsonResult`不会像您想要的那样遍历列表。你需要使用：

```
{{#each jsonResult}}
  <li>{{name}}</li>
{{/each}} 
```

请参阅[http://handlebarsjs.com#iteration](http://handlebarsjs.com#iteration)。

编辑：

您需要更改`var source = $("ul").html();`为`var source = $("#ul").html();`

# sql - 将 Char 字段转换为 Date 字段并从字段名称中删除时间

> ID：14281221
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:23:23.800
> 
> 标签：sql, date, reporting-services

我正在使用以下命令从日期字段中删除时间：

```
SELECT CONVERT(VARCHAR(10), FieldValue,101) FROM table 
```

`FieldValue`是一个字符字段，但有一个日期，即`2012-09-30 00:00:00`

上面的命令返回`2012-09-30`，但我需要它`09/30/2012`

知道我需要在命令中添加什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:26:30.407

是的，你应该使用 format()

```
format(Fields!YourField.Value, "MM/dd/yyyy") 
```

# javascript - window.getselection 在android中不起作用

> ID：14281222
> 
> 赞同：2
> 
> 时间：2013-01-11T15:23:26.107
> 
> 标签：javascript, android, jquery, html

我是使用 html+javascript+jQuery 的新手。我正在尝试使用 window.getSelection 来获取选定的文本，但这不起作用。任何人都可以为此提出解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-24T12:38:52.587

**只需要在java脚本中完成你的工作的简单代码行**

```
 //I am using below line of code which works in both android and web browsers.

function getSelectedText() {
    var selection = null;

    if (window.getSelection) {
        selection = window.getSelection();
    } else if (typeof document.selection != "undefined") {
        selection = document.selection;
    }

    var selectedRange = selection.getRangeAt(0);

    console.log(selectedRange.toString());
} 
```

注意：不要在 post 或任何可运行接口中调用此方法，因为 post 或任何可运行接口会延迟调用此方法（方法调用发生在浏览器选择释放后）。只需像这样调用此方法

```
webView.loadUrl("javascript:getSelectedText()"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-22T13:11:13.463

我知道这是一个非常古老的问题，但是当我尝试解决相同或类似的问题时，我将其作为第一个搜索结果。我在这里没有找到解决方案，但一段时间后我意识到有时对于手机来说，单击和选择之间应该有一个短暂的超时，以使 getSelection() 正常工作。

因此，例如：

```
document.getElementById("element").addEventListener('click', function (event) {
    window.getSelection().selectAllChildren(this)
}); 
```

你应该使用这样的想法：

```
document.getElementById("element").addEventListener('click', function (event) {
  setTimeout(function(passedThis) {
    window.getSelection().selectAllChildren(passedThis)
  }, 10, this);
}); 
```

也许它可以为某人节省一些时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-20T21:39:20.020

如果要在文本选择后立即调用函数，可以使用“selectionchange”事件：

```
document.addEventListener("selectionchange", handleSelection); 
```

它适用于 android chrome 和 iOS safari。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-17T17:30:24.577

尝试

```
function getSelected() {
var text = "";
if (window.getSelection && window.getSelection().toString() && $(window.getSelection()).attr('type') != "Caret") {
    text = window.getSelection();
    return text;
} else if (document.getSelection && document.getSelection().toString() && $(document.getSelection()).attr('type') != "Caret") {
    text = document.getSelection();
    return text;
} else {
    var selection = document.selection && document.selection.createRange();
    if (!(typeof selection === "undefined") && selection.text && selection.text.toString()) {
        text = selection.text;
        return text;
    }
}
return false;
} 
```

# sql - 拥有按最大日期过滤的子句

> ID：14281224
> 
> 赞同：0
> 
> 时间：2013-01-11T15:23:33.113
> 
> 标签：sql, sql-server, sql-server-2008, select, sql-function

我试图从“审查”表中获取 area_id 的最大日期，并仅返回 max date_finished 大于一年（从今天开始）的那些 area_id。表结构是这样的

```
1) the 'review' table can have one or more reviews (multiple date_finished) for
each area_id
2) each region_id can have one or more area_ids 
```

目标：返回每个 region_id 且 date_finished 大于一年的评论数

样本数据：

```
region_id   area_id   date_finished
abc         area_3    '01-01-2010 12:00:00 AM'
abc         area_3    '06-01-2009 12:00:00 AM'
abc         area_3    '02-01-2008 12:00:00 AM' 
```

上面的预期结果应该是返回区域 abc 并且计数应该是 1（因为 max date_finished 是 2010 年 1 月 1 日，并且比今天的日期（2013 年）多一年

我的sql如下。出于某种原因，它会返回我上面描述的所有日期。它不返回最大日期，而是返回 3 个日期。我正在使用 SQL Server 2008。谢谢！

```
select count(*) 
from review group by area_id 
having datediff(day,max(date_finished), getdate()) > 365 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:42:05.340

您可以只使用 WHERE 子句而不是 HAVING

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:42:39.693

你的问题对我来说没有多大意义。您想要计算满足特定条件的最大日期。该逻辑解析为布尔值。因为符合您条件的日期要么存在，要么不存在。

```
;WITH CTE (region_id,   area_id,   date_finished) AS
( 
    SELECT 'abc',         'area_3',    CAST('2010-1-1' AS DATETIME) UNION ALL
    SELECT 'abc',         'area_3',    '2009-3-1'   UNION ALL
    SELECT 'abc',         'area_3',    '2008-6-1'
)
SELECT   region_id
        ,HasQualifyingVal   =  CASE  WHEN COUNT(*) > 0 THEN 1 ELSE 0 END
FROM CTE
WHERE date_finished < DATEADD(YEAR, 1, date_finished)
GROUP BY region_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:47:49.187

我认为你可以通过两个级别的聚合得到你想要的，第一个是按地区和区域，第二个是按地区：

```
select r.region_id, count(*) as NumAreas, SUM(cnt) as NumReviews
from (select r.region_id, r.area_id, count(*) as cnt,
             MAX(date_finished)as maxDF
      from review r
      group by r.region_id, r.area_id
     )  r
where DATEDIFF(day, maxDF, getdate()) > 365
group by r.region_id 
```

# google-chrome-extension - 将项目集中在元素面板中的 Chrome 扩展

> ID：14281234
> 
> 赞同：4
> 
> 时间：2013-01-11T15:23:59.840
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在尝试开发一个 chrome 扩展，除其他外，它将能够将元素集中在 chrome devtools 的元素面板中。

我一直在拔头发，试图让它今天起作用，但到目前为止还没有运气。

我认为破解我需要的部分关键在[这里](http://developer.chrome.com/extensions/devtools.inspectedWindow.html)

> 以下是 eval() 和 chrome.tabs.executeScript() 方法之间的主要区别：
> 
> *   eval() 方法不为正在评估的代码使用孤立的世界，因此代码可以访问被检查窗口的 JavaScript 状态。当需要访问被检查页面的 JavaScript 状态时使用此方法。
> *   正在评估的代码的执行上下文包括开发者工具控制台 API。例如，代码可以使用 inspect() 和 $0。
> *   评估的代码可能会返回一个传递给扩展回调的值。返回的值必须是有效的 JSON 对象（它可能只包含原始 JavaScript 类型和对其他 JSON 对象的非循环引用）。在处理从被检查页面接收到的数据时，请格外小心——执行上下文基本上由被检查页面控制；恶意页面可能会影响返回到扩展程序的数据。

但是我找不到正确的位置来发送消息或执行命令以使其正常工作，我只是被反复告知以下内容：

> “未定义”的事件处理程序中的错误：$ 未定义 ReferenceError：$ 未在 Object.ftDev.processMsg (chrome-extension://ffhninlgmdgkjlibihgejadgekgchcmd/ftDev.js:39:31) 在 chrome-extension://ffhninlgmdgkjlibihgejadgekgchcmd 中定义/ftDev.js:16:7 at chrome.Event.dispatchToListener (event_bindings:387:21) at chrome.Event.dispatch_ (event_bindings:373:27) at chrome.Event.dispatch (event_bindings:393:17) at miscellaneous_bindings： 166:35 在 chrome.Event.dispatchToListener (event_bindings:387:21) 在 chrome.Event.dispatch_ (event_bindings:373:27) 在 chrome.Event.dispatch (event_bindings:393:17) 在 Object.chromeHidden.Port.dispatchOnMessage (miscellaneous_bindings:254:22) event_bindings:377 chrome.Event.dispatch_

理想情况下，我想使用 chrome 控制台的 inspect() 方法而不是 $() 方法。

清单.json

```
{
    "name": "XXXXX Ad and Spotlight Debugger",
    "version": "0.1",
    "manifest_version": 2,
    "description": "A tool to help you identify and debug XXXXXX ads and spotlights in Chrome",
    "devtools_page": "ftDev.html",
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html",
        "default_title": "XXXXXX Debug Tool"
    },
    "background": {
        "persistent": false,
        "page": "background.html",
        "js": ["background.js"]
    },
    "content_scripts": [{
        "matches": ["<all_urls>"],
        "js": ["getFTContent.js"],
        "all_frames": true
        }],
    "permissions": ["tabs","cookies","<all_urls>","devtools"]
} 
```

然后在 popup.js、background.js 和 devtools.js 文件中有类似的代码，基本上可以归结为：

```
processMsg: function(request, sender, sendResponse) {
        switch(request.type) {
            case "inspect":
                $(request.msg);
                sendResponse(request.msg + "successfully inspected");
            break;
            default:
            break;
        }
    } /*other cases removed for sake of brevity*/ 
```

执行时会导致上述错误。我确定我正在尝试在错误的上下文中执行该命令，但我不知道如何应用它。在 popup.js 文件中，我还尝试执行 $ 方法，如下所示

```
chrome.tabs.executeScript(tabId, {code: 'function(){$("#htmlID");}'}, function(){}); 
```

如果您认为有必要，任何想法的帮助都会令人惊叹，我可以提供更多我的代码，但我认为这几乎可以总结问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T19:25:05.097

好的 - 所以我环顾了一下字体更换器，最终它仍然不是我想要的，但是当我第 15 次查看[此页面](https://developer.chrome.com/extensions/devtools.inspectedWindow.html#method-eval)并意识到时，我有一个尤里卡时刻我不知何故错过了页面上最重要的部分（至少为了做我想做的事），这就是这个方法

```
chrome.devtools.inspectedWindow.eval("string to evaluate", callBack) 
```

请注意，出于安全原因，这不一定是一个好主意，因为它不会在孤立的世界中运行代码。

无论如何 - 如果我从我的 devtools 页面 js-code 运行此代码，请执行以下操作

```
chrome.devtools.inspectedWindow.eval("inspect(*id_of_the_div_i_want_inspect*)") 
```

然后它会在devtools的elements页面中选择这个项目……这也让我非常高兴！

:D

我不知道其他人是否会需要/想要这个，但我花了很长时间来弄清楚它，所以我希望它在未来对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:39:35.900

您可以轻松地在注入内容脚本的任何选项卡中突出显示 DOM 元素。例如，查看[Font Selector extension](http://kurrik.github.com/hackathons/09-25-2010/font-selector-chrome-extension.html)。

由于源代码可用（并已详细解释），因此我不会在此处发布。您将看到的效果是，在单击浏览器操作按钮后，鼠标光标下的每个 DOM 元素都会以红色边框突出显示。

如果您想将有关从选项卡中选择/突出显示的元素的一些信息发送到您的背景页面，您可以通过[消息传递](http://developer.chrome.com/extensions/messaging.html)（您已经使用过它，如我所见）。

# iphone - 我想将声音文件的播放链接到动画执行

> ID：14281238
> 
> 赞同：1
> 
> 时间：2013-01-11T15:24:12.340
> 
> 标签：iphone, xcode, animation, audio

我在这里有一个滚动打开的小动画，然后我只是将其反转以再次关闭滚动。我有两个问题。

*   我只想在动画运行时播放声音文件。除了对动画的开始和停止时间进行计时，我该怎么做？有没有办法将它与动画执行联系起来？
*   有没有办法反向运行相同的数组，而不是在拥有两个单独的数组时浪费内存？

** 示例代码

```
- (void)loadAnimationArray;
{
    // scroll close frame order
    animationclose=[[NSArray alloc] initWithObjects:
                    [UIImage imageNamed:@"frame1.png"],
                    [UIImage imageNamed:@"frame2.png"],
                    [UIImage imageNamed:@"frame3.png"],

                    ...

                    [UIImage imageNamed:@"frame25.png"],
                    [UIImage imageNamed:@"frame26.png"],nil];

    // scroll open order
    animationopen=[[NSArray alloc] initWithObjects:
                   [UIImage imageNamed:@"frame26.png"],
                   [UIImage imageNamed:@"frame25.png"],
                   [UIImage imageNamed:@"frame24.png"],

                   ...

                   [UIImage imageNamed:@"frame3.png"],
                   [UIImage imageNamed:@"frame2.png"],
                   [UIImage imageNamed:@"frame1.png"],nil];
}

- (IBAction)buttonOpen:(id)sender
{
    // default image post animation
    _imageScrollAnimation.image = [UIImage imageNamed:@"frame1.png"];

    // setting animation parameters
    self.imageScrollAnimation.animationDuration=3;
    self.imageScrollAnimation.animationRepeatCount=1;
    self.imageScrollAnimation.animationImages=animationopen;
    [self.imageScrollAnimation startAnimating];
}

- (IBAction)buttonClose:(id)sender
{
    // default image post animation
    _imageScrollAnimation.image = [UIImage imageNamed:@"frame26.png"];

    // setting animation parameters
    self.imageScrollAnimation.animationDuration=3;
    self.imageScrollAnimation.animationRepeatCount=1;
    self.imageScrollAnimation.animationImages=animationclose;
    [self.imageScrollAnimation startAnimating];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:45:52.923

好吧，我最终不得不构建自己的原始动画播放器。这个想法是让一个动画卷轴根据需要打开和关闭，并在背景中播放纸张滚动的声音。本质上，我使用一个按钮来启动一个计时器，该计时器在动画帧中运行并开始播放声音文件。当帧数达到指定的水平时，我用它来停止计时器和播放声音。

** 视图控制器.h

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface ViewController : UIViewController <AVAudioPlayerDelegate>
{
@public

@private
    BOOL scroll_open;
    int animationCount;
    NSURL *url;
    NSTimer *imageTimer;
}

@property (strong, nonatomic) IBOutlet UIImageView *imageTextPortal;
@property (strong, nonatomic) AVAudioPlayer *audioPlayer;

-(IBAction)buttonCloseScroll:(id)sender;
-(IBAction)buttonOpenScroll:(id)sender;
-(void)startCloseScrollAnimation;
-(void)startOpenScrollAnimation;
-(void)changeOpenScrollImage;
-(void)changeCloseScrollImage;

@end 
```

** 视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize imageTextPortal;

-(IBAction)buttonOpenScroll:(id)sender
{
    // starting timed open scroll sequence
    [self startOpenScrollAnimation];
}

-(IBAction)buttonCloseScroll:(id)sender
{
    // starting timed close scroll sequence
    [self startCloseScrollAnimation];
}

-(void)startOpenScrollAnimation
{
    // playing the sound
    NSError *error;
    url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"rolling" ofType:@"mp3"]];
    _audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    _audioPlayer.delegate = self;
    _audioPlayer.volume = 1.0;
    [_audioPlayer play];

    // setting animation count for decrement
    animationCount = 26;

    // starting timer
    imageTimer = [NSTimer scheduledTimerWithTimeInterval:.035 target:self selector:@selector(changeOpenScrollImage) userInfo:nil repeats:YES];
}

-(void)changeOpenScrollImage
{
    // switching image
    self.imageTextPortal.image = [UIImage imageNamed:[NSString stringWithFormat:@"frame%i.png" , animationCount]];

    // decrementing image count
    --animationCount;

    // testing for end of animation
    if (animationCount < 1)
    {
        // turning off timer
        [imageTimer invalidate];
        imageTimer = nil;

        // stopping sound play
        [_audioPlayer stop];

        // setting default image after the animation
        imageTextPortal.image = [UIImage imageNamed:@"frame1.png"];
    }
}

-(void)startCloseScrollAnimation
{
    // playing the sound
    NSError *error;
    url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"rolling" ofType:@"mp3"]];
    _audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    _audioPlayer.delegate = self;
    _audioPlayer.volume = 1.0;
    [_audioPlayer play];

    // setting animation count for decrement
    animationCount = 1;

    // starting timer
    imageTimer = [NSTimer scheduledTimerWithTimeInterval:.035 target:self selector:@selector(changeCloseScrollImage) userInfo:nil repeats:YES];
}

-(void)changeCloseScrollImage
{
    // switching image
    self.imageTextPortal.image = [UIImage imageNamed:[NSString stringWithFormat:@"frame%i.png" , animationCount]];

    // incrementing image count
    ++animationCount;

    // testing for end of animation
    if (animationCount > 26)
    {
        // turning off timer
        [imageTimer invalidate];
        imageTimer = nil;

        // stopping sound
        [_audioPlayer stop];

        // setting default image after the animation
        imageTextPortal.image = [UIImage imageNamed:@"frame26.png"];
    }
}

@end 
```

# ios - ios 游戏在 Instruments 中分析过程时不同步 - 我该如何避免这种情况？

> ID：14281243
> 
> 赞同：1
> 
> 时间：2013-01-11T15:24:30.187
> 
> 标签：ios, cocos2d-iphone, instruments

我正在构建一个 iOS 游戏，我注意到该游戏在 XCode 调试器中正常运行时运行良好。但是，当我从 Instruments（产品-> Profile 以跟踪泄漏）中运行它时，当 Instruments 在左侧边栏中显示“分析过程”时，游戏会冻结。在那之后，游戏的所有状态都混乱了，因为正在分析的游戏的某些部分冻结了，而其他部分继续进行。

这是我可以/需要解决的问题，还是足以确保游戏在发行版中运行？

如果需要修复，我需要做什么才能使其正常工作？

**更新1：**

所以我们发现了问题 - 即使我们正在玩游戏，同样的问题也会重现，按下主页按钮并单击游戏图标并继续玩。

问题是我们的大部分工作都是在 update 方法中完成的，它依赖于 (ccTime)dt 参数的值。dt 的值通常小于 0.1 秒，偶尔会达到 0.5 秒。当我们暂停（通过单击主页按钮，或者当仪器暂停游戏以拍摄快照时）并继续播放时，dt 的值是几个秒！这会使我们所有的计算超出范围。

我们尝试了一个临时的（但丑陋的）解决方法来解决这个问题：在更新方法的开头，我们添加了这个：

```
if(dt > 1)
  return; 
```

它现在按预期工作 - 不会不同步。但是，这不是一个永久的解决方案，因为有时 dt 的值合理地接近 1 秒，并且在资源紧张的情况下，这可能会导致卡顿（或更糟）。

我们还考虑了另一种（同样丑陋的）存储先前 dt 值的解决方案，然后检查更新方法：

```
if(dt > 10 * prevDt)
{
  return;
} 
```

我们尝试调用's并调用方法`unscheduleUpdate`，但该方法不起作用。`AppDelegate.m``applicationDidEnterBackground``scheduleUpdate``applicationWillEnterForeground`

处理由于外部暂停而导致时间值不稳定的更新的最佳方法是什么？

谢谢阿南德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:34:48.070

不幸的是，这是一个没有确定答案的问题。至少不能在没有访问您的系统的情况下运行各种检查。

配置文件中的失败可能是因为您的游戏正在运行紧密的循环，其时间以不可预知的方式受到干扰，并且您的游戏由于时间或资源问题而崩溃（这些时间问题不会在同一个调试器中出现）方法）。如果是这种情况，您可能无能为力。也可能是因为你的代码有问题。问题是很难弄清楚其中哪一个是这种情况。最好假设问题出在您的代码中，然后做一些进一步的调查。

如果您还没有这样做，首先要做的是运行静态分析工具（从 Xcode 的产品菜单中分析）。仔细考虑每个提出的错误，并努力消除所有错误。有时它们可​​能看起来很明显，你认为你可以忽略它们，但一些刺激表明它们是更深层次问题的征兆。

如果您还没有尝试过，请尝试运行仪器来检查僵尸。如果分配工具失败，这也很有可能会失败，但是如果有一些对取消分配对象的过时引用挂在周围，它们可能会导致您遇到的问题。您可以尝试的另一种工具是性能分析器，用于检查您的应用程序在哪里花费了大部分时间。您不知道的资源过度分配可能存在一些非常严重的问题。如果您无法运行内存分析器，您将很难查看是否是这种情况，但使用性能分析器，可能会看到您的应用程序是否在不应该的地方挂起太久'不是。

最后——如果所有其他方法都失败了，这可能是一把敲碎坚果的大锤——而且在任何情况下也可能无法提供解决方案。如果您不使用 ARC，请考虑将您的应用程序转换为使用它需要多长时间（当然，在这样做之前先创建一个分支）。Apple 的对象分配/释放算法非常有效，如果您有细微的内存管理错误，很有可能会被自动引用计数消除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T04:23:15.343

我不太了解 cocos2D 的工作原理，但如果您没有选择余地，我会简单地将增量时间限制在一个上限范围内。在使用增量时间的任何更新方法中，我都会执行以下操作。

```
double delta = (dt > 0.5) : (0.5) ? (dt); 
```

从那时起使用`delta`而不是。`dt`结果是任何具有超过半秒的增量的帧都将被限制为半秒的增量。您不想跳过帧，因为那样您可能会连续跳过许多帧，这对用户不利；他们可能会认为应用程序崩溃了。但是，您不想运行具有大增量的框架，因为那样依赖于增量的对象和力将在该框架中成倍增加，从而阻止您捕获碰撞和其他东西。因此，我们通过简单地向下限制值来防止游戏在不跳帧的情况下完全搞砸。

不利的是，当您的帧速率降至每秒 2 帧时，该应用程序的移动速度会显得更慢。您失去了基于时间的更新方法的好处，即当引擎负担过重时，始终使游戏看起来以明确定义的速度运行的能力。

老实说，如果你长时间以每秒 2 帧的速度运行，你就会有更大的问题需要担心。如果游戏只渲染一次，我认为用户不会注意到对象每秒移动的速度是否稍微慢一些。

# javascript - 开发 Windows 7 小工具。需要从网站中提取文本

> ID：14281244
> 
> 赞同：0
> 
> 时间：2013-01-11T15:24:34.137
> 
> 标签：javascript, html, windows-desktop-gadgets

我想开发一个**Windows 7 小工具**，我需要从网站中提取一些文本（具体来说是一个列表）。有没有办法使用 JavaScript 完成这项工作？

我怎么可能做到？

是否有任何网站或书籍可以帮助我开发 Windows 7 小工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:29:42.390

需要有一个 API，否则你将不得不编写一个 html 解析器，这对于你需要的东西来说太过分了。你想得到什么信息？

# file-upload - 为什么有些文件在上传 [.log, .srt, etc] 时没有带有 content_type？

> ID：14281249
> 
> 赞同：1
> 
> 时间：2013-01-11T15:24:57.050
> 
> 标签：file-upload, mime-types

我的数据库表`Attachments`有一个 content_type 列（MIME 类型）来存储“image/jpg”、“application/pdf”。

但是一些杂项文件，例如“.srt, .log”，不附带 content_type。

为什么他们没有？

我应该存储扩展名而不是类型吗？

谢谢！

# python - Bulbflow：neo4jserver Graph 和 neo4jserver Neo4jclient 的区别

> ID：14281251
> 
> 赞同：6
> 
> 时间：2013-01-11T15:25:00.040
> 
> 标签：python, neo4j, cypher, bulbs, tinkerpop

我现在正在尝试学习如何连接到 Neo4j 服务器并使用 Python 中的 Bulbflow 在其上运行 Cypher 查询。我不明白的是连接到neo4j服务器的两种可能性之间的区别：

1)[图表](http://bulbflow.com/quickstart/#graph)

```
from bulbs.neo4jserver import Graph
g = Graph() 
```

2) [Neo4jClient](http://bulbflow.com/docs/api/bulbs/neo4jserver/client/)

```
from bulbs.neo4jserver import Neo4jClient
client = Neo4jClient() 
```

谁能在这里解释概念上的差异？如果我想对服务器执行（相当多）Cypher 查询并最终并行执行，那么选择哪种方式更好？

PS：我没有足够的声誉来为这个问题创建一个标签“bulbflow”:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T09:55:10.137

[Bulbs](http://bulbflow.com)支持三种不同的图形数据库服务器——Neo4j [Server](http://www.neo4j.org/)、[Rexster](http://www.tinkerpop.com/)和现在的[Titan](http://thinkaurelius.github.com/titan/)。

特定于每个后端服务器的代码包含在其自己的 Python 包（目录）中。您应该看到以下目录：neo4jserver、rexster、titan：

*   灯泡源代码：[https ://github.com/espeed/bulbs/tree/master/bulbs](https://github.com/espeed/bulbs/tree/master/bulbs)

`Neo4jClient`是 Neo4j Server 的低级适配器——通常不需要直接使用它，除非你在做自定义的东西——改用高级 Graph 类。

请参阅灯泡文档以了解...

*   Neo4j 服务器客户端： http: [//bulbflow.com/docs/api/bulbs/neo4jserver/client/](http://bulbflow.com/docs/api/bulbs/neo4jserver/client/)
*   Neo4j 服务器图： [http ://bulbflow.com/docs/api/bulbs/neo4jserver/graph/](http://bulbflow.com/docs/api/bulbs/neo4jserver/graph/)

Bulbs 快速入门指南提供了有关使用该`Graph`界面的示例：

*   灯泡快速入门：[http ://bulbflow.com/quickstart/](http://bulbflow.com/quickstart/)

`_client`但是，当您需要时，您的 Bulbs 对象始终可以通过var 访问低级客户端。

Lightbulb 是我创建的一个示例应用程序，用于展示如何使用和自定义 Bulbs 模型——它是一个 Python 博客引擎，使用 Git 进行源代码控制，使用图形数据库进行持久性。

*   灯泡：[https ://github.com/espeed/lightbulb](https://github.com/espeed/lightbulb)

Lightbulb 最初是为与免费的[Neo4j Heroku Add On](https://addons.heroku.com/neo4j)一起使用而设计的，但是 Bulbs 和 Lightbulb 都大量使用了[Gremlin](https://github.com/tinkerpop/gremlin/wiki)，并且 Neo4j Heroko Add On 在免费版中不再提供 Gremlin。

灯泡模型文件包含一个高度定制的`Entry`模型和一个定制`Graph`类——该`Entry`模型利用了低级客户端：

*   灯泡型号：[https ://github.com/espeed/lightbulb/blob/master/lightbulb/model.py](https://github.com/espeed/lightbulb/blob/master/lightbulb/model.py)

正如您在`Entry`模型中看到的，我可以通过 var 访问低级客户端`_client`，并使用它从`scripts`库中获取 Gremlin 脚本，然后再次执行 Gremlin 脚本。

下面是`save_blog_entry`Entry 模型使用的 Gremlin 脚本的代码：

*   灯泡 Gremlin 脚本：[https ://github.com/espeed/lightbulb/blob/master/lightbulb/gremlin.groovy](https://github.com/espeed/lightbulb/blob/master/lightbulb/gremlin.groovy)

> 注意：文件中只有一个 Gremlin 脚本，但它很大，包含多个操作，并且所有内容都包含在事务中。将所有操作放入单个 Gremlin 脚本中，您可以在一个事务请求中完成所有操作，而不是承担向服务器发送多个请求的开销。

除非您正在执行诸如自定义模型之类的操作，否则您通常会使用`scripts`对象和`gremlin`存储在对象上的`graph`对象：

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph() 
>>> script = g.scripts.get('some_script')
>>> params = dict(name="James", city="Dallas")
>>> g.gremlin.execute(script, params) 
```

请参阅灯泡 Neo4j Gremlin 文档...

*   Neo4j Gremlin：[http ://bulbflow.com/docs/api/bulbs/neo4jserver/gremlin/](http://bulbflow.com/docs/api/bulbs/neo4jserver/gremlin/)

同样，当您要执行 Neo4j Cypher 查询时，请使用`cypher`存储在对象上的`graph`对象。

共有三种 Cypher 方法（不幸的是，这些方法尚未在网站上记录）：

1.  `g.cypher.query()`：在返回节点/关系列表时使用——它会将它们初始化为对象。
2.  `g.cypher.table()`: 返回 Cypher 表数据时使用。
3.  `g.cypher.exectue()`：在返回任意数据时使用——它返回一个通用`Response`对象。

您可以查看源代码以了解它们是如何工作的...

*   密码来源：[https ://github.com/espeed/bulbs/blob/master/bulbs/neo4jserver/cypher.py](https://github.com/espeed/bulbs/blob/master/bulbs/neo4jserver/cypher.py)

以下是使用 Cypher query() 方法的一些示例（查询只是返回一个关系）：

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph() 
>>> query = "start a = relationship({eid}) return a"
>>> params = dict(eid=123) 
>>> edges = g.cypher.query(query, params) 
```

查询方法自动将元素初始化为其类型。如果您将元素创建为自定义模型，Bulbs 将尝试将其初始化为特定类型，否则它将默认为泛型`Vertex`或`Edge`.

请注意，Bulbs Cypher query() 方法返回一个迭代器。

您可以遍历迭代器...

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph() 
>>> query = "start a = relationship({eid}) return a"
>>> params = dict(eid=123) 
>>> edges = g.cypher.query(query, params)
>>> for edge in edges: print edge 
```

...或将其转换为列表...

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph() 
>>> query = "start a = relationship({eid}) return a"
>>> params = dict(eid=123) 
>>> edges = g.cypher.query(query, params)
>>> list(edges) 
```

...或获得下一个项目...

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph() 
>>> query = "start a = relationship({eid}) return a"
>>> params = dict(eid=123) 
>>> edges = g.cypher.query(query, params)
>>> edges.next() 
```

如果您还有其他问题，请告诉我。

# mysql - 我的 sql 子字符串反向放置值

> ID：14281253
> 
> 赞同：0
> 
> 时间：2013-01-11T15:25:01.467
> 
> 标签：mysql, substring

我需要一些有关 mysql 子串和修剪的帮助。我在一列中有一个数据，看起来像

```
uvw.xyz.com!johndoe@abc.efg.com
```

我正在尝试获取之前的所有内容`@`并触发用户名和第一个域和远程！和之前的域之后`@`，所以结果将是`johndoe@uvw.xyz.com`。

我有类似的东西..

```
select substr(m1.username, 10, 50) 
from (select username from my_table where username like '%!%')) as results; 
```

但这正在查看固定字段，我需要从`@`角色中删除！然后翻转触发器。任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:31:06.420

这应该有效：

```
SET @var = 'uvw.xyz.com!johndoe@abc.efg.com';
SELECT
    SUBSTRING_INDEX(SUBSTRING_INDEX(@var, '@', 1), '!', -1) AS local,
    SUBSTRING_INDEX(SUBSTRING_INDEX(@var, '@', 1), '!', 1) AS domain 
```

**结果**

```
| 本地 | 域名 |
-------------------------
| 约翰多 | uvw.xyz.com |
```

要获得连接值，您可以使用：

```
SELECT
    CONCAT(SUBSTRING_INDEX(SUBSTRING_INDEX(@var, '@', 1), '!', -1), '@',
    SUBSTRING_INDEX(SUBSTRING_INDEX(@var, '@', 1), '!', 1)) AS email 
```

**结果**

```
| 电子邮件 |
----------------------
| johndoe@uvw.xyz.com |
```

你会`@var`用`m1.username`

# c++ - UML 活动图作为 DSL；转换为 C++

> ID：14281254
> 
> 赞同：1
> 
> 时间：2013-01-11T15:25:05.127
> 
> 标签：c++, uml, code-generation, dsl

我要写一个[事件相关器](https://softwareengineering.stackexchange.com/questions/181483/root-cause-analysis-in-event-correlation)。系统的一个基本部分将是一个巨大的决策树，它根据记录的状态和日志文件识别故障的起源，其中一个主要问题是保持该树的可维护性 - 以程序员易于理解和可编辑的格式编写.

由于 7 层深嵌套的 if()s 不是我的“可维护和易于理解”的想法，我[询问](https://softwareengineering.stackexchange.com/questions/182025/creating-huge-decision-tree)了如何以一种介于机器友好、用户友好和成本效益。显而易见的答案是使用可编译为 C++ 的特定领域语言，其中将编写实际的事件相关器。显而易见的问题是 DSL 应该是什么样子。

我最喜欢的建议是使用 UML 活动图，并将其编译为 C++。该图可能几乎完全由决策组成，活动仅在树的叶子上，作为决策过程得出的结论。本质上，该图是我的图形 DSL，然后应该在 C++ 中编译成一大堆 if()。虽然我仍然需要手工制作所有条件函数，但至少条件之间的互连应该由系统处理。

现在，我应该使用什么工具来创建该图表？

由于“自己动手”不是我对成本效益的想法，考虑到它最终是为一台设备创建一个单一的图表（即使它可能会被永远编辑，因为发现了新的故障模式），我有查看[统一建模语言工具列表](http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools)。

其中相当多的，包括在“生成的语言”中列出了“C++”的那些，但我知道现实从来没有那么好——我对一堆根据类定义预先填充的头文件不感兴趣类图。我需要一个包含我的决策树的文件；一堆条件语句，其条件预先填充了决策函数调用，我将手动编写这些语句，并将结果作为特定的结论函数调用。

现在我的问题是，哪些工具可以做到这一点，使用起来不会太难，而且价格也不贵——首选免费工具，但价格合理的商业工具也可以。

或者，如果失败了 - 哪些可以将该图表保存为我可以用自制的“编译器”解析的形式，以及如何创建该编译器。

当然也欢迎其他建议 - 也许是可以生成此类代码的老式流程图的工具？也许已经存在专门的 DSL 来创建我需要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:31:20.513

[Enterprise Architect](http://www.sparxsystems.com)可以从行为图（包括活动图）生成 C++ 代码。它提供了几个版本；支持行为代码生成的最低版本售价 599 美元。这是用户指南的部分：[从行为模型生成](http://www.sparxsystems.com/enterprise_architect_user_guide/9.0/software_engineering/code_generation_from_behaviora.html)。除了代码生成之外，EA 还提供[模拟](http://www.youtube.com/watch?v=uxXjlPDRGfY&list=UU1IbtSvXDURkqZQf_EpyvgQ&index=5)、可追溯性和许多其他细节。

如果您可以在状态图中实现您的逻辑，则可以使用免费的[QM Modeler](http://www.state-machine.com/qm/index.php)。它生成 C++ 代码。它旨在与[QP 活动对象框架](http://www.state-machine.com/qp/)一起使用，但您可以在不依赖 QP 的情况下使用 QM。（您也可以使用 Enterprise Architect 从状态图中生成代码。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:19:48.623

这个 URL 指出 UML 被表示为“一种 XMI 格式”——一种基于 XML 的标准，用于表示 UML。

[http://documentation.softwareag.com/webmethods/tamino/ins441/advconc/FromUMLtoXML.htm](http://documentation.softwareag.com/webmethods/tamino/ins441/advconc/FromUMLtoXML.htm)

如果您使用此标准，您的数据可能与其他 CASE 工具更兼容：

大多数 UML 工具都提供了将模型序列化为 XMI 格式的功能。XMI 是基于 XML 的行业标准，用于在 CASE 工具之间交换元数据。因为它是基于 XML 的，所以 XMI 可以在 XSLT 样式表的帮助下转换为其他格式，例如 XML Schema。可以在[http://www.aomodeling.org/](http://www.aomodeling.org/)找到这种样式表的示例。

我猜这个 XML 可以用普通的 C++ XML 解析器来解析，例如 Xerces 或（对于 Windows）MSXML /XML DOM。

# openoffice-calc - 如何在 Open Office 宏的单元格中的列表框中显示当前值？

> ID：14281260
> 
> 赞同：0
> 
> 时间：2013-01-11T15:25:27.077
> 
> 标签：openoffice-calc, uno, openoffice-basic

我试图从单元格中的列表框中提取值。然而，每当我查询该值时，它都会返回列表框中的第一个条目，而不管单元格中显示的当前选择如何。

如何访问列表框中显示的当前值？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:21:27.840

如果一个单元格的这个下拉列表，您可以在一列中创建一个（隐藏）列表。在此列表的第一个单元格中，放置对列表框单元格的引用。

例如

D 列
=A1
第 2 个 FIXED 值
第 3 个 FIXED 值
第 4 个 FIXED 值

在 A1 中，您将下拉列表设为有效，单元格列表 D1...D4。

A1 中的任何内容都将在下拉列表中显示为可选选项。

# sql-server-2008 - SSIS 的 BufferSizeTuning 说“内存压力得到缓解，缓冲区管理器不再限制分配”

> ID：14281265
> 
> 赞同：1
> 
> 时间：2013-01-11T15:25:41.897
> 
> 标签：sql-server-2008, memory-management, ssis

我有 SSIS 包，可以在 2 个 SQL Server 之间进行简单的数据传输。有一个父包和 6 个子包以相同的方式构建。我已经设置子包作为单独的进程运行（ExecuteOutOfProcess=True 属性）。此外，我还在每个子包中启用了 User:BufferSizeTuning 属性的日志记录。

在 DEV 服务器中一切正常，这与 PROD 服务器非常相似。但在 PROD 服务器中，我从 User:BufferSizeTuning 属性（取自 sysssislog 表）收到以下两条消息：

> *   内存压力得到缓解，缓冲区管理器不再限制分配
> *   缓冲区管理器正在限制分配以将内存缓冲区保持在 199MB 左右

此外，PROD 服务器中的作业通常在 DEV 中运行约 2-3 小时（在某些情况下为 11 小时！！） - ~30 分钟。两台服务器都是 SSIS 2008 服务器。

# php - 使用正则表达式搜索 PHP 的递归目录

> ID：14281267
> 
> 赞同：1
> 
> 时间：2013-01-11T15:25:43.783
> 
> 标签：php, regex, search, recursion, directory

如果我需要递归搜索某些目录以找到 .something 文件怎么办？

到目前为止我有这个代码：

```
 $dir_iterator = new RecursiveDirectoryIterator('path/');
   $iterator = new RecursiveIteratorIterator($dir_iterator, RecursiveIteratorIterator::SELF_FIRST);

   foreach ($iterator as $filename) {
     if(strpos($filename, ".apk")){
         $page->addToBody(substr($filename, 2)."</br>");
         $filename = substr($filename, 2);  
     }
   } 
```

这适用于返回目录中唯一的 .apk 文件，但是如果找到多个文件，我希望能够找到一个特定文件。

例如，我想说找到所有包含“hello”并以.apk 结尾的文件名。

使用 Glob() 我做到了这一点，效果很好：

```
glob('./'path'/*{'Hello'}*.apk',GLOB_BRACE); 
```

但是它不是递归的。并取决于指定的正确目录。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:31:14.080

您可以使用正则表达式代替 strpos()，例如：

```
[...]
if(preg_match('/.*hello.*\.apk$/', $filename))
[...] 
```

此示例表示“*hello*.apk”。所以一个字符串在它的某个地方有“hello”并以“.apk”结尾。

有关详细信息，请参阅[PHP preg_match()](http://php.net/manual/en/function.preg-match.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:33:40.493

换行：

```
if(strpos($filename, ".apk")) 
```

到：

```
if (preg_match('@hello.*\.apk$@', $filename)) 
```

虽然正则表达式更灵活，但您仍然可以使用[`strpos`](http://php.net/manual/en/function.strpos.php)with [`substr`](http://php.net/manual/en/function.substr.php)：

```
if (strpos($filename, 'hello') !== false && substr($filename, -4) === '.apk') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:29:55.973

尝试同时搜索：

```
if(strpos($filename, ".apk") !== false && strpos($filename, "Hello") !== false){ 
```

!== false 是必须的，否则不会返回 Hello.apk

# vbscript - Autosys 作业返回和错误代码 122

> ID：14281271
> 
> 赞同：0
> 
> 时间：2013-01-11T15:26:08.530
> 
> 标签：vbscript, autosys

Autosys 返回错误代码 122，即使 Autosys 服务器上托管的作业已成功执行。请让我知道如何解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:24:09.943

对于每个错误代码，都有一个唯一的描述。

对于错误代码 122：描述为“无法打开 std_out_file（unix 错误）”。

# visual-studio-2012 - VS 2012 托管 C++ 崩溃

> ID：14281281
> 
> 赞同：0
> 
> 时间：2013-01-11T15:26:34.913
> 
> 标签：visual-studio-2012, managed-c++

将托管 c++ 程序集从 VS2010 升级到 VS2012 后，我遇到了一个非常奇怪的崩溃（调试），它只发生在 2012 代码分支（相同）中。我有一些从注册表读取并分配一个字节数组来存储结果的代码。注册表调用已被注释并且不是一个因素。

```
DWORD nDataSize=20;
BYTE* lpValueData=new BYTE[nDataSize];
delete [] lpValueData; 
```

我已将崩溃 (cx0000005) 与 delete [] 调用隔离开来。如果我评论该函数，代码将不再崩溃。

# r - 如何编写自定义 removePunctuation() 函数以更好地处理 Unicode 字符？

> ID：14281282
> 
> 赞同：8
> 
> 时间：2013-01-11T15:26:34.070
> 
> 标签：r, unicode, text-mining, tm

在 tm text-mining R-package 的源代码中，在文件[transform.R](https://r-forge.r-project.org/scm/viewvc.php/pkg/R/transform.R?view=markup&root=tm)中，有这个`removePunctuation()`函数，目前定义为：

```
function(x, preserve_intra_word_dashes = FALSE)
{
    if (!preserve_intra_word_dashes)
        gsub("[[:punct:]]+", "", x)
    else {
        # Assume there are no ASCII 1 characters.
        x <- gsub("(\\w)-(\\w)", "\\1\1\\2", x)
        x <- gsub("[[:punct:]]+", "", x)
        gsub("\1", "-", x, fixed = TRUE)
    }
} 
```

我需要解析和挖掘来自科学会议的一些摘要（从他们的网站以 UTF-8 格式获取）。摘要包含一些需要删除的 unicode 字符，尤其是在单词边界处。有通常的 ASCII 标点字符，还有一些 Unicode 破折号、Unicode 引号、数学符号……

文本中还有URL，其中的标点符号需要保留词内标点符号。tm的内置`removePunctuation()`功能太激进了。

所以我需要一个自定义`removePunctuation()`函数来根据我的要求进行删除。

我的自定义 Unicode 函数现在看起来像这样，但它没有按预期工作。我很少使用 R，所以在 R 中完成任务需要一些时间，即使是最简单的任务。

**我的功能：**

```
corpus <- tm_map(corpus, rmPunc =  function(x){ 
# lookbehinds 
# need to be careful to specify fixed-width conditions 
# so that it can be used in lookbehind

x <- gsub('(.*?)(?<=^[[:punct:]’“”:±</>]{5})([[:alnum:]])'," \\2", x, perl=TRUE) ;
x <- gsub('(.*?)(?<=^[[:punct:]’“”:±</>]{4})([[:alnum:]])'," \\2", x, perl=TRUE) ;
x <- gsub('(.*?)(?<=^[[:punct:]’“”:±</>]{3})([[:alnum:]])'," \\2", x, perl=TRUE) ;
x <- gsub('(.*?)(?<=^[[:punct:]’“”:±</>]{2})([[:alnum:]])'," \\2", x, perl=TRUE) ;
x <- gsub('(.*?)(?<=^[[:punct:]’“”:±</>])([[:alnum:]])'," \\2", x, perl=TRUE) ; 
# lookaheads (can use variable-width conditions) 
x <- gsub('(.*?)(?=[[:alnum:]])([[:punct:]’“”:±]+)$',"\1 ", x, perl=TRUE) ;

# remove all strings that consist *only* of punct chars 
gsub('^[[:punct:]’“”:±</>]+$',"", x, perl=TRUE) ;

} 
```

它没有按预期工作。我想，它根本没有做任何事情。标点符号仍在术语文档矩阵中，请参阅：

```
 head(Terms(tdm), n=30)

  [1] "<></>"                      "---"                       
  [3] "--,"                        ":</>"                      
  [5] ":()"                        "/)."                       
  [7] "/++"                        "/++,"                      
  [9] "..,"                        "..."                       
 [11] "...,"                       "..)"                       
 [13] "“”,"                        "(|)"                       
 [15] "(/)"                        "(.."                       
 [17] "(..,"                       "()=(|=)."                  
 [19] "(),"                        "()."                       
 [21] "(&)"                        "++,"                       
 [23] "(0°"                        "0.001),"                   
 [25] "0.003"                      "=0.005)"                   
 [27] "0.006"                      "=0.007)"                   
 [29] "000km"                      "0.01)" 
... 
```

**所以我的问题是：**

1.  为什么对我的 function(){} 的调用没有达到预期的效果？如何改进我的功能？
2.  R 的 perl 兼容正则表达式是否支持 Unicode 正则表达式模式类，例如 if `\P{ASCII}`或支持？`\P{PUNCT}`我认为它们不是（默认情况下）[PCRE:](http://www.regular-expressions.info/pcre.html) : "只有对各种 Unicode 属性的支持 \p 是不完整的，但最重要的是支持。"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-13T14:04:07.703

尽管我很喜欢 Susana 的回答，但它在*tm*的较新版本中破坏了语料库（不再是 PlainTextDocument 并破坏了元数据）

您将得到一个*列表*和以下错误：

```
Error in UseMethod("meta", x) : 
no applicable method for 'meta' applied to an object of class "character" 
```

使用

```
tm_map(your_corpus, PlainTextDocument) 
```

会给你你的语料库，但 $meta 坏了（特别是文档ID会丢失。

**解决方案**

使用*content_transformer*

```
toSpace <- content_transformer(function(x,pattern)
    gsub(pattern," ", x))
your_corpus <- tm_map(your_corpus,toSpace,"„") 
```

*资料来源：* 使用 R 进行数据科学实践，文本挖掘，Graham.Williams@togaware.com [http://onepager.togaware.com/](http://onepager.togaware.com/)

## 更新

此功能会删除所有非字母数字（即 UTF-8 表情符号等）

```
removeNonAlnum <- function(x){
  gsub("[^[:alnum:]^[:space:]]","",x)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:08:28.897

我有同样的问题，自定义功能不起作用，但实际上必须添加下面的第一行

问候

苏珊娜

```
replaceExpressions <- function(x) UseMethod("replaceExpressions", x)

replaceExpressions.PlainTextDocument <- replaceExpressions.character  <- function(x) {
    x <- gsub(".", " ", x, ignore.case =FALSE, fixed = TRUE)
    x <- gsub(",", " ", x, ignore.case =FALSE, fixed = TRUE)
    x <- gsub(":", " ", x, ignore.case =FALSE, fixed = TRUE)
    return(x)
}

notes_pre_clean <- tm_map(notes, replaceExpressions, useMeta = FALSE) 
```

# jquery - 如何同时使用 HTML5 History/State API 并保持带有主题标签的超链接（文档内的链接）完好无损

> ID：14281283
> 
> 赞同：3
> 
> 时间：2013-01-11T15:26:36.487
> 
> 标签：jquery, hash, identifier, pushstate, fragmentation

我在现有网页中实现[了 ajaxify-html5.js 。](https://gist.github.com/854622)它使用 jQuery、ScrollTo 和[History.js](https://github.com/balupton/History.js/)。很棒的东西，效果很好。每个链接都喜欢

```
<a href="category?id=5">Category 5</a> 
```

在内容窗口中打开，就像它应该的那样。整个事情离完美只有一个问题——当我点击一个使用这样的碎片标识符的链接时：

```
<a href="category?id=5#pictures">Category 5 - directly to pics</a> 
```

...地址栏中的 URL 发生了应有的变化，但内容没有任何变化。甚至没有 category?id=5 被加载。

据我所见，这被解雇了（来自 ajaxify-html5.js）：

```
History.pushState(null,title,url);     // url = "category?id=5#pictures" 
```

但是 statechange 没有（来自同一个文件）：

```
$window.bind('statechange',function(){ 
```

我想我可以清理每个网址（删除#hashtag），然后一切都会工作......当然除了让新加载的页面定位在哪里`<a name="hashtag"></a>`。不幸的是，网站严重依赖这些......

**我的问题是：甚至可以将 ajaxify 与碎片标识符一起使用，后者不受第一个影响吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:20:51.583

您可以像这样使用内部 href 存储所有 <a> 标签：
`var tags = jQuery("a[href*='#']");`

在 afaxify-html5.js 发挥作用后，您可以通过调用`tags.unbind()`.

# c# - 将类型“var”传递给 C# 中的方法

> ID：14281289
> 
> 赞同：12
> 
> 时间：2013-01-11T15:26:49.750
> 
> 标签：c#

我有一些数据类型为 var 的子查询。这些正在处理数据表。我想将这些传递给另一种方法，我该怎么做？前任：

```
 var subquery1= from results in table.AsEnumerable()
               where //some condition
               select new
               {
                  column1=results.field1,
                  column2 = results.field2
                  etc.,
               }
     var subquery2= from results in table.AsEnumerable()
               where //different condition
               select new
               {
                  column1=results.field1,
                  column2 = results.field2
                  etc.,
               } 
```

现在，我想定义一些方法来将这些 subquery1、subquery2 作为变量传递。前任：

```
void updategrid(var queries)
          {
          //some logic
           } 
```

并执行方法：

```
updategrid(subquery1);
updategrid(subquery2); 
```

当我在定义它时尝试在方法中使用 var 时不喜欢它。请帮助我如何做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-11T15:28:53.167

您的结果是一系列匿名对象。`var`关键字只是对编译器说“嘿，从使用中为我推断参数”。从使用中推断类型的过程称为[类型推断](http://en.wikipedia.org/wiki/Type_inference)。但是你不能让 C# 编译器在方法声明中推断方法参数的类型。此外，如果`anonymous objects`你不能指定他们的名字。所以你不应该在其他方法的外部和内部传递它们。您可以将它们转换为`dynamic`然后访问它们的成员`CallSite`（当您访问动态对象的成员时编译器会创建它们`myDynamic.Name`），或者您可以将匿名对象转换为`object`并通过反射访问其属性，但所有这些方法都是非 C# 惯用的，并且真的错过了匿名对象的要点。而不是在查询中创建匿名对象

```
select new
{
  //members selection
} 
```

创建自定义类型

```
public class Result
{
    //Members declaration
} 
```

并将其实例化为下一个示例中的查询结果：（您可以替换`var`关键字而不是`IEnumerable<Result>`- 编译的代码将是相同的）

```
IEnumerable<Result> subquery1 = from results in table.AsEnumerable()
                                where //some condition
                                select new Result
                                {
                                     //fill members here
                                } 
```

方法看起来像

```
void updategrid(IEnumerable<Result> queries)
{
    //some logic here with strongly typed sequence
} 
```

然后你会`updategrid`简单地调用`updategrid(subquery1)`，你将拥有静态类型的元素序列的所有美感。`updategrid`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T15:29:25.197

```
void updategrid(var queries) 
```

不是有效的 C#。

`var`是语法糖 - 变量具有类型，但如果编译器可以静态确定它应该是什么，则不需要声明它。

使用参数，编译器没有足够的信息来确定类型。

同样，您不能在`var`没有赋值的情况下声明变量：

```
var something; 
```

* * *

您需要确保 的类型`subquery1`和`subquery2`参数`updategrid`都相同。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-11T15:28:39.070

Var 不是数据类型。它是“在编译应用程序时弄清楚这实际上是什么数据类型”的简写。您可以弄清楚数据类型实际上是什么并将其用于您的参数，或者您可以创建一个适用于任何数据类型的通用函数。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-11T15:32:19.570

您可以声明具有`var`参数类型的方法。但是你可以这样写：

```
static void updategrid(dynamic queries)
{
} 
```

`var`意味着`take type from right-hand side and declare variable with this type from left-hand side`这是在编译时处理的。正如您所看到的，使用`var`as 方法参数类型没有任何意义。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-11T15:33:14.703

使用`Object`或`dynamic`

```
void updategrid(object queries)

void updategrid(dynamic queries) 
```

`var`-> 由表达式右侧确定的静态类型。不能用作参数/返回类型

`object`-> 所有 .NET 类型的基类。

`dynamic`-> 类型在运行时解析。因此不进行编译时检查，并且智能感知不可用。它也有性能成本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T15:30:41.557

在 C# 中，没有 'var' 类型。'var' 只是一个关键字，它告诉编译器“分析接下来的任何内容以找出类型”。这是在编译期间完成的，而不是运行时。

您所说的变量实际上是编译器在编译期间自动生成的匿名类型。此类类型由于没有名称，因此不能用于声明参数类型或返回值。

您应该为此数据创建显式类，或者在 .Net4 或更高版本中使用 Tuple<> 泛型类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T15:29:23.217

您可能可以使用[动态](http://msdn.microsoft.com/en-gb/library/dd264741.aspx)引用，但我不会这样做。

相反，更好的选择是为这些数据类型创建实际的类并将它们传递给方法。

例如：

```
public class MyColumns
{
   public string column1 {get;set;}
   public string column1 {get;set;}
   //etc.
} 
```

您可以像这样创建：

```
var subquery1= from results in table.AsEnumerable()
               where //some condition
               select new MyColumns
               {
                  column1=results.field1,
                  column2 = results.field2
                  //etc.
               }; 
```

并具有这样的功能：

```
public void updategrid(IEnumerable<MyColumns> queries)
{
} 
```

# c++ - webView QML 中的身份验证

> ID：14281293
> 
> 赞同：2
> 
> 时间：2013-01-11T15:27:03.313
> 
> 标签：c++, qt, webkit, qml, qtwebkit

我正在尝试使用 webkit 在 qml 中显示网页，但我找不到访问包含登录名和密码的页面的语法

这是一段代码：

```
 Rectangle {
   id: webBrowser
   property string urlString : "http://website.com/"
   //
 } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:12:53.100

要对 http 请求进行身份验证，请将`viewer.engine()->networkAccessManager()` [authenticationRequired](http://qt-project.org/doc/qnetworkaccessmanager.html#authenticationRequired)信号连接到您的插槽，您可以在其中设置`QAuthenticator`名称和密码字段。

# android - 如何访问 android.provider.Telephony 类？

> ID：14281295
> 
> 赞同：0
> 
> 时间：2013-01-11T15:27:06.877
> 
> 标签：android

似乎这个类不是公共的，我必须访问这个类中的 TELEPHONY_STATUS 变量，因为我在 android 源代码中看到，考虑到你使用的 api 版本，值可以改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:08:36.680

从 android-developer 邮件列表中 阅读[这篇文章。](http://www.mail-archive.com/android-developers@googlegroups.com/msg11410.html)`android.provider.Telephony`是开源版本的一部分，但从未包含在官方 SDK 中。

您可以查看它以了解系统的工作原理，但您实际上无法在应用程序中使用它。

正如帖子中所说，

> 不，它*不会*出现在 SDK 中，这意味着您不应该尝试在您的应用程序中使用它。

# php - 在 symfony2 控制器中使用带有关联数组的 usort

> ID：14281306
> 
> 赞同：3
> 
> 时间：2013-01-11T15:27:37.380
> 
> 标签：php, sorting, symfony, usort

如何使用`usort`对控制器内的关联数组进行排序`symfony2`？

```
//sort
function compare($a, $b)
{
    return strnatcmp($a['sort'], $b['sort']);
}

usort($content, 'compare'); 
```

这给了我以下错误：

> 警告：usort() 期望参数 2 是有效的回调，未找到函数“比较”或无效的函数名称

就像把它放在它自己的私有函数中一样

```
// sort
usort($content, '$this->compare');

return $content;

}

//sort
private function compare($a, $b)
{
    return strnatcmp($a['sort'], $b['sort']);
} 
```

这没有变化

```
// sort 
usort($content, 'compare');

return $content;

}

//sort
private function compare($a, $b)
{
    return strnatcmp($a['sort'], $b['sort']);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T15:37:50.047

```
usort($content, array($this, 'compare')); 
```

这就是您将对象方法作为回调传递的方式。有关示例，请参见[回调](http://php.net/manual/en/language.types.callable.php#example-96)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T15:36:43.707

尝试匿名实现该功能：

```
usort($content, function ($a, $b) {
    return strnatcmp($a['sort'], $b['sort']);
});

return $content; 
```

# python - 升级到更新的 Python 版本 - 性能改进？

> ID：14281308
> 
> 赞同：2
> 
> 时间：2013-01-11T15:27:55.343
> 
> 标签：python, performance

我正在开发一个开源项目（Master of Mana，文明 4 的一个模组），它使用 Python 2.4.1 来实现多种游戏机制。如果我尝试升级到 Python 2.7.3 甚至 3.3.0，是否有机会提高性能？

与此相关，有没有人对不同的 Python 版本做过性能分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:39:43.913

大多数较新的 Python 版本都带来了新功能。

现有的代码部分也可能为了性能或扩展功能而更新。

前一种更改带来性能优势，但扩展功能可能会导致性能下降。

我不知道这些变化之间有什么关系。可能您将不得不对自己进行一些分析。

# erlang - 如何确定安装的 Erlang 是 32 位还是 64 位版本？

> ID：14281310
> 
> 赞同：0
> 
> 时间：2013-01-11T15:27:58.373
> 
> 标签：erlang, 32bit-64bit

我已经从源代码安装了 Erlang`./configure --enable-m32-build --prefix=/usr/local/erlang`

运行时`erl`：

```
Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false] [dtrace]

Eshell V5.9.3.1  (abort with ^G) 
```

这是否意味着erlang版本是64位？为了运行 Ejabberd，我想在我的 Lion（64 位操作系统）上安装 32 位 erlang

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:27:17.443

它是 64 位版本。您可能想查看 --enable-halfword-emulator 标志，它在 64 位机器上具有大部分 32 位优势。

# php - 在 foreach 之前对数组值进行排序

> ID：14281312
> 
> 赞同：1
> 
> 时间：2013-01-11T15:28:10.610
> 
> 标签：php, arrays, sorting

我有一个需要按名称按字母顺序排序的下拉菜单。

这是代码

```
<?php foreach ($option['option_value'] as $option_value) { ?>
    <option value="<?php echo $option_value['product_option_value_id']; ?>"><?php
        echo $option_value['name'];
        if ($option_value['price']) {
            ?>(<?php echo $option_value['price_prefix']; ?><?php echo $option_value['price']; ?>)<?php
        }
        ?>
    </option>
    <?php
}
?> 
```

我希望 $option_value 按 $option_value['name'] 排序。我怎样才能做到这一点？

**更新**

在不解决问题之前使用 sort() 或 asort()，我得到的顺序是

```
<option value="14598">Medium - red (0588390) [0]    </option>
<option value="14599">large - WHITE (0592167) [1]  </option>
<option value="14600">Medium - WHITE (0592168) [3]  </option>
<option value="14601">large - THE ROYALS (0592169) [0]  </option>
<option value="14602">Medium - THE ROYALS (0592170) [2] </option> 
```

它按值 ID 排序，但我需要按它的名称排序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:31:18.147

在你的 foreach 之前试试这个：

```
function mysort($a, $b)
{
    return strcmp($a['option_value']['name'], $b['option_value']['name']);
}

usort($option, 'mysort'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:03:52.883

`$option['option_value']`是包含选项值的数组，它需要在`for...each`:

```
function mysort($a, $b) {
    return strcmp($a['name'], $b['name']);
}
usort($option['option_value'], 'mysort'); 
```

然后像以前一样迭代：

```
foreach ($option['option_value'] as $option_value) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:37:43.023

你可以参考[这里](http://php.net/manual/en/array.sorting.php)

也就是说，您可以直接使用 `asort` 功能 `asort($option['option_value'])` 或任何其他您认为可行的选项。asort 将根据第一列条目对数组进行排序，即如果您的内部数组的第一个键是`name`它会有所帮助

# wpf - 在 Model V/s ViewModel 中使用 IDataErrorInfo

> ID：14281313
> 
> 赞同：4
> 
> 时间：2013-01-11T15:28:14.337
> 
> 标签：wpf, idataerrorinfo

我在试图找出在我的 WPF 应用程序中实现 IDataErrorInfo 的最佳方法时遇到了麻烦。我有几个模型，每个模型都有很多属性，正在使用中。ViewModel 具有每个模型的属性，视图使用这些属性绑定到模型。这是我所拥有的结构的简化版本：

```
public class ModelA
{
    public string PropertyA1 {get; set;}
    public string PropertyA2 {get; set;}
}

public class ModelB
{
    public string Property B1 {get; set;}
    public string Property B2 {get; set;}
}

public class ViewModel
{
    public ModelA modelA {get; set;}
    public ModelB modelB {get; set;}
} 
```

我的问题是 - 我在哪里实现 IDataErrorInfo - 在 ViewModel 或模型中？View 以 modelA.PropertyA1 等方式绑定到这些属性，因此在模型中而不是在 ViewModel 中引发错误，这使得有必要在模型中实现 IDataErrorInfo。但是，我听说在 ViewModel 中实现验证逻辑是一种很好的做法。

我想知道是否有一种方法可以捕获 ViewModel 中的错误，而无需为每个会引发错误的属性编写包装器，因为有很多属性并且为每个属性编写包装器会很乏味。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:02:17.697

我认为你应该`IDataErrorInfo`在视图模型中实现。如果你的视图模型有一个基类，你可能应该，你可以在那里实现它。现在，您的所有实现/验证逻辑都在您的基类中，而不是分布在*n*个视图模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:07:54.153

您需要对模型的属性进行验证，这只能在您在基类中实现或为模型中的每个模型实现时才能完成。如果你想在 ViewModel 中验证 ModelA，你需要在 ViewModel 中实现它，但如果你想为 A1 实现验证，你需要在 ModelA 中实现它。

如果您更改模型A 的实例，IDataViewModel 将进入该类并尝试调用 (您的 ViewModel 的实例)["modelA"]。好的，但这不是您想要的，如果您更改 modelA 的属性，IDataViewModel 将进入 modelA 的实例并调用 modelA["B1"]，如果您现在在 ViewModel 中实现验证，modelA 将返回一个空字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:02:08.253

谢谢你们的帮助！以下是我决定解决问题的方法：

我创建了两个基类，一个用于普通模型（没有任何验证的模型。它只实现 INotifyPropertyChanged），另一个用于具有验证的模型，如下所示。

```
public abstract class ModelBase : INotifyPropertyChanged
{
    //Implement INotifyPropertyChanged here
}

public delegate string ValidateProperty(string propertyName);

public abstract class ValidationModelBase : ModelBase, IDataErrorInfo
{
    private bool _canValidate;
    public bool CanValidate
    {
        get { return _canValidate; }
        set { _canValidate = value; }
    }

    #region IDataErrorInfo Members

    public string Error
    {
        get { return string.Empty; }
    }

    public string this[string columnName]
    {
        get
        {
            if (this.CanValidate)
            {
                return this.Validate(columnName);
            }
            return string.Empty;
        }
    }

    #endregion

    #region Validation Section

    public event ValidateProperty OnValidateProperty;

    public string Validate(string propertyName)
    {
        if (this.OnValidateProperty != null)
        {
            return OnValidateProperty(propertyName);
        }
        return string.Empty;
    }

    #endregion
} 
```

现在我的模型看起来像这样：

```
public class ModelA : validationModelBase
{
    public string PropertyA1 {get; set;}
    public string PropertyA2 {get; set;}
}

public class ModelB : ValidationModelBase
{
    public string Property B1 {get; set;}
    public string Property B2 {get; set;}
} 
```

那里没有很大的变化。ViewModel 现在看起来像这样：

```
public class ViewModel
{
    public ModelA modelA {get; set;}
    public ModelB modelB {get; set;}

    public ViewModel()
    {
        this.modelA.OnValidateProperty += new ValidateProperty(ValidateModelA);
        this.modelB.OnValidateProperty += new ValidateProperty(ValidateModelB);
    }

    private string ValidateModelA(string propertyName)
    {
        //Implement validation logic for ModelA here
    }    

    private string ValidateModelB(string propertyName)
    {
        //Implement validation logic for ModelB here
    }
} 
```

到目前为止，这似乎对我有用。这样，任何具有验证的新模型只需要从 ValidationModelBase 派生并让 ViewModel 为验证事件添加事件处理程序。

如果有人有更好的方法来解决我的问题，请告诉我——我愿意接受建议和改进。

# c# - 拖放移动 PictureBox- 拖动时图像的大小

> ID：14281315
> 
> 赞同：1
> 
> 时间：2013-01-11T15:28:17.523
> 
> 标签：c#, visual-studio

我创建了一种在拖放时移动 PictureBox 的方法。但是当我拖动 PictureBox 时，图像具有图像的实际大小，我希望图像具有 PictureBox 的大小

```
 private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            picBox = (PictureBox)sender;
            var dragImage = (Bitmap)picBox.Image;
            IntPtr icon = dragImage.GetHicon();
            Cursor.Current = new Cursor(icon);
            DoDragDrop(pictureBox1.Image, DragDropEffects.Copy);
            DestroyIcon(icon);
        }
    }

protected override void OnGiveFeedback(GiveFeedbackEventArgs e)
    {
        e.UseDefaultCursors = false;
    }
    protected override void OnDragEnter(DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(Bitmap))) e.Effect = DragDropEffects.Copy;
    }
    protected override void OnDragDrop(DragEventArgs e)
    {

        picBox.Location = this.PointToClient(new Point(e.X - picBox.Width / 2, e.Y - picBox.Height / 2));
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    extern static bool DestroyIcon(IntPtr handle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:37:18.767

采用

```
var dragImage = new Bitmap((Bitmap)picBox.Image, picBox.Size); 
```

代替

```
var dragImage = (Bitmap)picBox.Image; 
```

（也许稍后在临时图像上调用 Dispose，但如果你不这样做，GC 会处理它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:40:35.083

这是因为图片框中的图像是全尺寸图像。图片框仅出于显示目的对其进行缩放，但该`Image`属性具有原始大小的图像。

因此，在您的`MouseDown`事件处理程序中，您希望在使用之前调整图像大小。

而不是：

```
var dragImage = (Bitmap)picBox.Image; 
```

尝试：

```
 var dragImage = ResizeImage(picBox.Image, new Size(picBox.Width, PicBox.Height)); 
```

使用类似此方法的方法为您调整图像大小：

```
public static Image ResizeImage(Image image, Size size, 
    bool preserveAspectRatio = true)
{
    int newWidth;
    int newHeight;
    if (preserveAspectRatio)
    {
        int originalWidth = image.Width;
        int originalHeight = image.Height;
        float percentWidth = (float)size.Width / (float)originalWidth;
        float percentHeight = (float)size.Height / (float)originalHeight;
        float percent = percentHeight < percentWidth ? percentHeight : percentWidth;
        newWidth = (int)(originalWidth * percent);
        newHeight = (int)(originalHeight * percent);
    }
    else
    {
        newWidth = size.Width;
        newHeight = size.Height;
    }
    Image newImage = new Bitmap(newWidth, newHeight);
    using (Graphics graphicsHandle = Graphics.FromImage(newImage))
    {
        graphicsHandle.InterpolationMode = InterpolationMode.HighQualityBicubic;
        graphicsHandle.DrawImage(image, 0, 0, newWidth, newHeight);
    }
    return newImage;
} 
```

**来自此处的图像大小调整代码：http: [//www.codeproject.com/Articles/191424/Resizing-an-Image-On-The-Fly-using-NET](http://www.codeproject.com/Articles/191424/Resizing-an-Image-On-The-Fly-using-NET)*

# javascript - YQL 破坏 JSON（不同于数组转换为对象的问题！）

> ID：14281320
> 
> 赞同：1
> 
> 时间：2013-01-11T15:28:42.050
> 
> 标签：javascript, ajax, cross-domain, yql

这是我尝试使用 Jquery AJAX 获取的跨域 JSON (GeoJSON)。

[http://openlayers.org/dev/examples/geojson-reprojected.json](http://openlayers.org/dev/examples/geojson-reprojected.json)

这是我的查询：

```
url: "http://query.yahooapis.com/v1/public/yql"
q: "select * from json where url='" + URL + "'",
format : 'json',
jsonCompat: 'new',
crossProduct:'optimized' 
```

之前的问题是 YQL 将长度为 1 的数组转换为对象。但是我添加了 jsonCompact: 'new'，并且修复了它。但是现在返回的 JSON 有一个新的问题。在 JSON 结构内部的某些地方，它将所有数组数组转换为包含数组的对象数组 :( 是的，这很令人困惑，所以我发布了一个快照，将 Orignal 与 YQL 进行比较。有人知道这个解决方案吗？我尝试添加'crossProduct':'optimized' 但没有变化。这是比较快照，左边是原始的，右边显示的是从 YQL 返回的：

![左：原始 JSON，右：从 YQL 返回的一个，不一样！！！](../Images/19f56272ddb2f3d41fe24e7817f630dc.png)

# postgresql - Glassfish 数据源实现不同于供应商（postgresql）

> ID：14281331
> 
> 赞同：0
> 
> 时间：2013-01-11T15:29:14.603
> 
> 标签：postgresql, jdbc, datasource, glassfish-3

我正在尝试创建与 postgresql 数据库的 jdbc 连接。我想使用数据源。在 postgresql 的文档中指出，不应使用他们自己的数据源实现，而应使用 org.apache.commons.dbcp 的实现。SharedPoolDatasource 对我来说看起来很完美。

jdbc 驱动程序必须是 postgresql。Glassfish v3.1 提供了创建 jdbc 连接池的机会。我想使用那个，但不知道如何在 commons 数据源实现和 jdbc 驱动程序之间建立连接。当我在 glassfish 服务器上填写文档时，该特定字段会出现空白，迫使我使用 postgresql 数据源实现。

这是不可能实现的还是我必须在配置文件中手动输入数据？到目前为止，我没有任何运气或反馈。异常应该出现在 server.log 中，但 server.log 目前没有显示任何内容（它确实显示了部署 jsf 和 ejb 应用程序的异常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:32:14.587

应该是可以的......

**1.新建一个JDBC连接池：**

![在此处输入图像描述](../Images/87dcc714051ca528305e8047a2370605.png)

**2\. 选择你想要的数据源实现类：**

![在此处输入图像描述](../Images/182b22367f9ba29aec3bd59868c83c70.png)

**您必须在附加属性选项卡中设置数据库名称、用户和密码的详细信息。**

**3\. 创建一个新的 JDBC 资源：**

![在此处输入图像描述](../Images/a38806a092d41de9ec9682a89023505a.png)

# android - 要捆绑的字节数组

> ID：14281339
> 
> 赞同：1
> 
> 时间：2013-01-11T15:29:35.330
> 
> 标签：android

我有一个`Bundle`并将它作为字节数组存储到磁盘中。现在，当我检索它时，我会使用字节数组。我怎样才能再次将其转换为`Bundle`？

```
byte fileContent[] =  new byte[(int)file.length()];
int numerOfReturnedbytes = 0;

try {
    //read the stream and set it into the byte array readFileByteArray
    //and returns the numerOfReturnedbytes. If returns -1 means that
    //that the end of the stream has been reached.
    numerOfReturnedbytes = fis.read(fileContent);
    fis.close();
} catch (IOException e) {
    e.printStackTrace();
}

if (numerOfReturnedbytes == -1) {
    return;
} else {
    //creating empty parcel object
    Parcel parcel = Parcel.obtain();
    //un-marshalling the data contained into the byte array  to the parcel
    parcel.unmarshall(fileContent, 0, numerOfReturnedbytes);
} 
```

是`fileContent`字节数组。关于如何解决我的问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:33:01.650

不要那样做。来自 Android 文档：

> Parcel 不是通用的序列化机制。此类（以及用于将任意对象放入 Parcel 的相应 Parcelable API）被设计为高性能 IPC 传输。因此，将任何 Parcel 数据放入持久存储是不合适的：Parcel 中任何数据的底层实现的更改都可能导致旧数据不可读。

这意味着，在操作系统升级后，您的应用程序写入的数据可能变得不可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-10T10:40:22.760

将 Bundle 转换为 ByteArray

```
 public byte[] bundleToBytes(@NonNull Bundle bundle) {
        Parcel parcel = Parcel.obtain();
        parcel.writeBundle(bundle);
        byte[] bytes = parcel.marshall();
        parcel.recycle();
        return bytes;
    } 
```

将 ByteArray 转换为 Bundle

```
 @NonNull
    public Bundle bytesToBundle(byte[] bytes) {
        Parcel parcel = Parcel.obtain();
        parcel.unmarshall(bytes, 0, bytes.length);
        parcel.setDataPosition(0);
        Bundle bundle = parcel.readBundle(ClassWithinProject.class.getClassLoader());
        parcel.recycle();
        return bundle;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T15:33:07.823

会不会是这样的：

```
Bundle bundle = Bundle.CREATOR.createFromParcel(parcel); 
```

一旦你有包裹？

# 编辑

或者是

```
Bundle bundle = parcel.readParcelable(null); 
```

? 我不记得了。我已经阅读了文档，但你知道...

（实际上，我真的不知道什么是最好的，它们似乎做的事情几乎相同）

# 编辑 2

还有

```
Bundle bundle = parcel.readBundle(); 
```

令人惊讶的是文档中的信息量。我应该经常去那里。

# mysql - MySQL - 触发器删除以前的记录

> ID：14281343
> 
> 赞同：0
> 
> 时间：2013-01-11T15:29:42.013
> 
> 标签：mysql, triggers

我正在尝试创建一个触发器，它只允许数据库中的一条记录，因此它将删除任何以前的记录。但目前，它不允许我插入任何内容，因为它会立即被删除。

```
DELIMITER $$
CREATE TRIGGER test_insert 
BEFORE INSERT ON test
FOR EACH ROW BEGIN
DELETE FROM test WHERE id = NEW.id - 1;
END$$ 
```

如何删除以前（或所有以前）插入的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:06:49.477

“但目前，它不允许我插入任何内容，因为它会立即被删除。”

实际上，当您执行 INSERT 时，触发器的执行应该抛出异常：

```
Error Code: 1442
Can't update table 'test' in stored function/trigger because it is
  already used by statement which invoked this stored function/trigger. 
```

（除非在新版本的 MySQL 中有根本不同的东西。）

* * *

您要执行的操作（即从您要插入的同一个表中删除行）不能在 MySQL 触发器中完成。

您可以使用 UNIQUE KEY 和 BEFORE INSERT 触发器的组合来防止插入多个行。BEFORE INSERT 触发器可以将具有唯一键的列的值设置为静态值，然后 INSERT 语句将引发重复键（“重复条目”）异常。

然后，您可以使用`INSERT ... ON DUPLICATE KEY UPDATE ...`语句来更新唯一 id 以外的列的值，例如

```
CREATE TRIGGER `test_insert` BEFORE INSERT ON test
FOR EACH ROW BEGIN
   SET NEW.id := 1;
END

ALTER TABLE test ADD UNIQUE KEY (id);

INSERT INTO test (somecol) VALUES ('someval')
ON DUPLICATE KEY UPDATE somecol = VALUES(somecol) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:41:06.287

为此，您首先需要找到一些要删除所有并插入的值。这样您就不需要触发器，您只需删除所有以前的案例，然后添加一个新行。除非由于某种原因无法从您的代码中解释，否则您需要一个触发器，循环中的一个简单解决方案可以工作，例如：

```
$query = mysql_query("DELETE FROM test WHERE id = NEW.id -1");
$new_id = $new.id -1;
$query2 = mysql_query("INSERT INTO test VALUES('$new_id','$var1','$var2')); 
```

# password-recovery - 好的密码恢复方法

> ID：14281349
> 
> 赞同：3
> 
> 时间：2013-01-11T15:29:56.503
> 
> 标签：password-recovery

我目前正在担心 Web 应用程序用户的密码恢复方法。

一个想法是使用带有恢复 url 的电子邮件，只询问用户他/她的用户名，但如果他/她也忘记了，请询问电子邮件地址。

另一个想法是使用“秘密问题”，然后将密码发送给用户。

您知道密码恢复的其他任何可能更好的选项吗？除了用户感到沮丧之外，还有什么缺点是“错误的密码限制”？

编辑：昨天我被告知，在一些旧版本中，一些客户仍在更新和使用，电子邮件地址和用户名都不必是唯一的。

所以我现在完全被困住了。我唯一想到的是使用一个秘密问题，用户可以在首次登录后选择该问题。但不是发送电子邮件，而是直接打开“新密码对话框”。

你还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:19:31.860

我的意见：假设您要求用户的电子邮件地址在所有注册用户中是唯一的，那么密码恢复页面会询问用户的电子邮件地址。您可以将其设为“用户名或电子邮件地址”，但我认为这个小小的调整不会帮助足够多的用户证明您的额外后端处理是合理的。

为了增加安全性，请勿确认或否认在您的数据库中找到了用户名或电子邮件地址。

带有重置密码链接的电子邮件应该可以正常工作。使用哈希（越长越好；绝对是 20 个字符或更多），这样黑客就无法轻易猜出重置链接。为了增加安全性，请指定一个时间限制，之后重置链接将不再起作用。

一旦用户点击链接并选择了新密码，不要自动将他们登录到他们的帐户；让他们从头开始登录。这将确保他们知道他们的新密码，并减少密码恢复代码中出现错误的机会，让黑客直接登录帐户。

提醒用户检查他们的垃圾邮件文件夹，并提供一个时间窗口，让他们可以合理地假设他们应该收到重置链接（这样他们就知道要等多长时间才能向您投诉）。

安全问题通常是个坏主意。首先，用户很难记住他们的答案是什么。这就像在用户的密码中添加一些内容，但向世界提示该额外部分可能是什么。并且答案往往不区分大小写，并且只有字母或字母数字。

如果密码恢复系统不适合他们，请确保您提供一种让用户与您联系的方式。不过要小心，因为这可能是[社会工程](http://en.wikipedia.org/wiki/Social_engineering_%28security%29)黑客的途径。

密码限制可能会让用户感到沮丧。仔细考虑实施这一点，允许多少次尝试，以及超出该限制的后果。大多数人都有一个密码的变体。现在，从安全的角度来看，这并不聪明，但它确实发生了。一个行为合理的用户很可能会在一分钟内尝试 hooper2012、Hooper2012、hooper20121、Hooper20121。

也许你可以，比如说，在五次尝试失败后让用户在以后的任何尝试之间等待 60 秒。在另外五次尝试失败后，将其加倍至 120 秒。每五次失败的尝试继续加倍等待时间。如果你让它一直持续到 50 次连续失败的尝试，那么用完这 50 次尝试所需的最短时间将是[1 天 18 小时 35 分钟](http://www.wolframalpha.com/input/?i=2%5E0%2a60%2a5%20%2b%202%5E1%2a60%2a5%20%2b%202%5E2%2a60%2a5%20%2b%202%5E3%2a60%2a5%20%2b%202%5E4%2a60%2a5%20%2b%202%5E5%2a60%2a5%20%2b%202%5E6%2a60%2a5%20%2b%202%5E7%2a60%2a5%20%2b%202%5E8%2a60%2a5%20seconds%20in%20minutes)。我绝对建议您在代码中添加一些内容，以通知您一天内连续尝试失败超过 12 次的任何帐户。

在连续 50 次尝试失败后暂时停用该帐户，并要求用户联系您的技术支持。再次，警惕社会工程学。

用户提供正确的登录凭据后，将等待期重置为 0。

# ajax - 为 REST API 启用 CORS 支持

> ID：14281355
> 
> 赞同：2
> 
> 时间：2013-01-11T15:30:16.380
> 
> 标签：ajax, web-services, rest, cors, azure-table-storage

我试图找出为什么许多开发人员在他们的 REST API 产品中默认禁用 CORS？安全是主要问题吗？从关于 CORS 支持的[W3C wiki 文章](http://www.w3.org/wiki/CORS_Enabled)看来，添加 CORS 支持相当简单（在服务器上添加一个带有值“*”的标头**Access-Control-Allow-Origin ）**

我最近在尝试编写一个简单的仅使用 JavaScript 的应用程序来访问 Azure 表和其他 Rest API（例如来自[Panoptix](https://developer.panoptix.com/)和 ProductWIKI 的 API）时遇到了问题。他们有一些很棒的 REST API，但不允许 CORS。Azure 表具有与其 REST API 调用相关联的严格身份验证过程，尽管如此，它不会允许 CORS（至少目前如此）。

我想听听 RESTFul API 的开发人员和管理员关于他们为您的 API 产品启用/禁用 CORS 的原因？安全/流量/兼容性是主要关注点还是还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:49:00.970

当我创建 Web 服务时，我不使用 CORS，因为它是默认设置，并且仅在项目需要公共浏览器访问我们的服务时才添加它。为什么默认同源策略是另一个问题。我从未见过禁止从其他域访问 Ajax 的优势。

# android - 在 android 应用中处理 textview 和 webview 链接

> ID：14281360
> 
> 赞同：1
> 
> 时间：2013-01-11T15:30:27.850
> 
> 标签：android, android-webview, textview

我正在开发一个 android 应用程序，它有很多带有链接的 textviews 和 webviews。我需要在 webview 中打开这些链接（而不是在外部 web 浏览器中）。我怎样才能做到这一点？

我发现了几个类似的线程：

1.  [WebView 链接点击打开默认浏览器](https://stackoverflow.com/questions/4229494/webview-link-click-open-default-browser)
2.  [在我的 android 应用程序中处理 textview 链接单击](https://stackoverflow.com/questions/1697084/handle-textview-link-click-in-my-android-app)

第一个说我可以将 WebViewClient 用于 WebViews。第二个是关于意图过滤器和自定义方案。但问题是我想找到适用于 webview 和 textviews 的通用解决方案（我也不能使用自定义方案而不是“http”）。

我尝试执行以下操作：

WebViewActivity 已创建，将用于代替 Web 浏览器。在我设置的 Android 清单文件中：

```
<activity android:name=".WebViewActivity">
<intent-filter>
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<data android:scheme="http" />
</intent-filter>
</activity> 
```

结果，当用户尝试打开链接时，应用程序会显示一个对话框，建议选择需要的应用程序来观看链接（它建议使用 Web 浏览器和我的 WebViewActivity）。如何在没有此对话框的情况下打开 WebViewActivity 中的链接？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:45:05.217

如果您单击 WebView 中的链接，则默认情况下新页面仍将位于当前 webview 中。

对于 TextView 中的处理链接点击，您已经[在我的 android 应用程序中找到了这篇文章处理 textview 链接点击](https://stackoverflow.com/questions/1697084/handle-textview-link-click-in-my-android-app)，我认为您可以通过使用可点击跨度来遵循 Jonathan S. 解决方案。

如果您为您的活动注册 http 架构，则总会有此对话框，除非没有其他应用程序注册它。

# c++ - 清除和删除多精度变量

> ID：14281364
> 
> 赞同：0
> 
> 时间：2013-01-11T15:30:41.503
> 
> 标签：c++, memory-management, memory-leaks, dynamic-memory-allocation, mpc

我正在使用一些动态分配的多精度变量数组（来自 mpc 库），想知道是否有必要清除变量和删除数组以避免内存泄漏等？换句话说，下面代码段中的所有内务管理都是必要的吗？

```
using namespace std;
#include <gmp.h>
#include <mpfr.h>
#include <mpc.h>

int main() {

    int i;
    mpc_t *mpcarray;
    mpcarray=new mpc_t[3];
    for(i=0;i<3;i++) mpc_init2(mpcarray[i], 64);

    // Manipulations

    for(i=0;i<3;i++) mpc_clear(mpcarray[i]);
    delete [] mpcarray;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:32:07.587

是的，这是必要的。

生活的一般规则在这里适用：

***“你应该丢弃你用的东西！”***

如果你不这样做，它会导致内存泄漏，或者如果析构函数`mpc_t`包含产生副作用的代码，则会导致更糟糕的未定义行为。

动态内存是一项为您的程序提供显式内存管理的功能，如果您使用它（*调用`new`或`new []`*），那么您有责任确保其正确使用（*通过调用`delete`或`delete []`分别*解除分配）。

请注意，您最好使用自动/局部变量而不是动态指针。
如果必须，您应该使用**[智能指针](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)**而不是原始指针。它们为您提供了动态内存减去显式内存管理开销的优势。

# vb6 - 从 vb6 加载 dll 时找不到文件

> ID：14281368
> 
> 赞同：6
> 
> 时间：2013-01-11T15:30:50.223
> 
> 标签：vb6, interop, dll

我在 VB6 中使用以下语法声明和调用 dll 函数：

```
'Declare the function
Private Declare Sub MYFUNC Lib "mylib.dll" ()

'Call the function
MYFUNC 
```

调用该函数会导致错误`File not found: mylib.dll`。当应用程序从 vb6 IDE 或已编译的可执行文件运行时，就会发生这种情况。

该 dll 位于工作目录中，我检查过它是使用 sysinternals 中的 ProcMon.exe 找到的。没有失败的加载，但未加载 Intel Fortran dll（ProcMon 跟踪似乎在那之前停止）。

我还尝试在 WinDbg.exe 中运行该应用程序，但奇怪的是，它可以工作！这条线上没有失败。ProcMon 跟踪显示以这种方式运行程序时加载了 Intel Fortran dll。

该 dll 使用 Fortran Composer XE 2011 编译。

任何人都可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T09:25:10.560

加载 DLL 时，“找不到文件”通常会产生误导。这可能意味着缺少 DLL 或它所依赖的文件 - 但如果是这种情况，您就会发现 Process Monitor 的问题。

通常，“找不到文件”消息实际上意味着找到了 DLL，但是在加载它或调用该方法时发生了错误。

在 DLL 中调用过程实际上需要三个步骤：

1.  找到并加载 DLL，运行 DllMain 方法（如果存在）。
2.  在 DLL 中找到该过程。
3.  调用程序。

在这些阶段的任何一个阶段都可能发生错误。VB6 在幕后完成所有这些工作，因此您无法判断错误发生在哪里。但是，您可以使用 Windows API 函数控制该过程。这应该告诉您错误发生在哪里。您还可以设置断点并使用 Process Monitor 检查程序在每个点的行为，这可能会给您带来更多见解。

下面的代码显示了如何使用 Windows API 调用 DLL 过程。要运行它，请将代码放入一个新模块中，并将项目的启动对象设置为“Sub Main”。

```
Option Explicit

' Windows API method declarations
Private Declare Function FreeLibrary Lib "kernel32" (ByVal hLibModule As Long) As Long
Private Declare Function LoadLibrary Lib "kernel32" Alias "LoadLibraryA" (ByVal lpLibFileName As String) As Long
Private Declare Function GetProcAddress Lib "kernel32" (ByVal hModule As Long, ByVal lpProcName As String) As Long
Private Declare Function CallWindowProc Lib "user32" Alias _
    "CallWindowProcA" (ByVal lpPrevWndFunc As Long, ByVal hWnd As Long, _
    ByVal Msg As Any, ByVal wParam As Any, ByVal lParam As Any) _
    As Long

Private Declare Function FormatMessage Lib "kernel32" Alias _
    "FormatMessageA" (ByVal dwFlags As Long, lpSource As Long, _
    ByVal dwMessageId As Long, ByVal dwLanguageId As Long, _
    ByVal lpBuffer As String, ByVal nSize As Long, Arguments As Any) _
    As Long

Const FORMAT_MESSAGE_FROM_SYSTEM = &H1000

Const MyFunc As String = "MYFUNC"
Const MyDll As String = "mylib.dll"

Sub Main()

    ' Locate and load the DLL. This will run the DllMain method, if present
    Dim dllHandle As Long
    dllHandle = LoadLibrary(MyDll)

    If dllHandle = 0 Then
        MsgBox "Error loading DLL" & vbCrLf & ErrorText(Err.LastDllError)
        Exit Sub
    End If

    ' Find the procedure you want to call
    Dim procAddress As Long
    procAddress = GetProcAddress(dllHandle, MyFunc)

    If procAddress = 0 Then
        MsgBox "Error getting procedure address" & vbCrLf & ErrorText(Err.LastDllError)
        Exit Sub
    End If

    ' Finally, call the procedure
    CallWindowProc procAddress, 0&, "Dummy message", ByVal 0&, ByVal 0&

End Sub

' Gets the error message for a Windows error code
Private Function ErrorText(errorCode As Long) As String

    Dim errorMessage As String
    Dim result As Long

    errorMessage = Space$(256)
    result = FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM, 0&, errorCode, 0&, errorMessage, Len(errorMessage), 0&)

    If result > 0 Then
        ErrorText = Left$(errorMessage, result)
    Else
        ErrorText = "Unknown error"
    End If

End Function 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T06:11:26.103

.dll 必须在当前的“工作”目录中（或已注册），否则在运行时应用程序找不到它。

做：

MsgBox "当前目录是" & CurDir

然后将其与您的预期进行比较。.dll 需要位于该目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T00:49:38.047

我对这个问题的标准首选方法是打破 ProcMon（或 XP 上的 FileMon）。设置过滤器，以便您可以看到它正在搜索文件的确切位置。它可能正在其他地方寻找文件或寻找不同的文件名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-28T15:16:31.503

> Private Declare Sub MYFUNC Lib "mylib.dll" ()

首先，您要声明一个 Sub，而不是一个函数。这些没有返回值：

```
(vb6) Sub() == (vc++) void Sub()
(vb6) Func() as string == (vc++) string Func() 
```

您声明的路径是运行环境的本地路径。因此，当使用 VB6.exe 以调试模式运行时，您需要将 mylib.dll 与 VB6.exe 放在同一目录中。

当您使用私有声明时，您可能需要为您的 dll 考虑一个包装类。这允许您将常见的 dll 访问分组在一起，但允许重用。然后使用类的方法来访问暴露的函数。

所以你可以使用上面提供的所有代码，将它复制到一个类中

我的类代码：

```
Option Explicit

'Private Declare Sub MYFUNC Lib "mylib.dll" ()
'<all code above Main()>

Private Sub Class_Initialize()
    'initialise objects
End Sub

Private Sub Class_Terminate()
    'Set anyObj = Nothing
End Sub

Public Sub ClassMethod()
    On Error Goto errClassMethod
    'Perhaps look at refactoring the use of msgbox

    '<code body from Main() given above>

    exit sub
errClassMethod:
    'handle any errors
End Sub

'<all code below main> 
```

单元线程模型在应用程序启动时加载所有模块。使用类只会在类被实例化时“加载”dll。还可以生成更整洁的调用代码，而不会对 Windows API 调用进行混淆：（即 modMain）：

```
Sub Main()
    Dim m_base As MyClass
    Set m_base = New MyClass
    MyClass.ClassMethod()
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T14:30:12.727

我尝试了@roomaroo 的回答，但没有给我足够具体的信息。使用[Dependency Walker](http://support.microsoft.com/kb/256872)帮助我解决了这个问题。根据@bnadolson，还必须 chdir

# web-services - Spring with Apache Camel 和 Web 服务入门

> ID：14281369
> 
> 赞同：2
> 
> 时间：2013-01-11T15:30:52.620
> 
> 标签：web-services, spring, apache-camel

我开始尝试弄清楚如何在 Spring 框架中使用 Apache Camel。我想尝试掌握的第一件事是在此之上运行简单的 Web 服务调用，但我不知道从哪里开始。

现在我所拥有的只是一个基本的 HelloWorld Spring 项目设置，并且正在尝试找出需要配置 Apache Camel 的内容以及从哪里开始创建一个简单的 Web 服务。

我已经查看了 Apache 站点上的示例，但我希望这里的某个人知道一个教程，它是我正在尝试做的事情的基本开始到完成。

感谢大家提供的任何提示或帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T22:49:08.297

我真的发现这个有用一次：[http](http://camel.apache.org/spring-ws-example.html) ://camel.apache.org/spring-ws-example.html （以及骆驼发行版中的完整源代码）。

您可以通过多种方式使用 Camel 处理 Web 服务。要么使用我提到的示例中的 Spring Web 服务，要么使用 Apache CXF。

与 CXF 相比，Spring Web 服务非常容易上手。虽然 CXF 是一个更完整的 Web 服务栈。

这里有多个 Camel 和 CXF 示例：http: [//camel.apache.org/examples.html](http://camel.apache.org/examples.html)

如果您使用 CXF，那么在与 Camel 混合之前，您可能会从实际学习一些“仅限 CXF”示例中受益。

基本上有两种方式来做 Web 服务，首先从 WSDL 开始契约，然后自动生成类/接口。另一种方法是代码优先 - 您从 java 类开始，然后获取自动生成的 WSDL。

这里有一些相当不错的文章：http: [//cxf.apache.org/resources-and-articles.html](http://cxf.apache.org/resources-and-articles.html)

但是要回答您的问题，我不知道有关此问题的任何好的分步教程。链接中的示例非常好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-17T07:17:47.197

我有同样的问题，我找到了这篇文章

逐步介绍使用 CXF 和 Spring 创建 Web 服务： [http ://www.ibm.com/developerworks/webservices/library/ws-pojo-springcxf/index.html?ca=drs-](http://www.ibm.com/developerworks/webservices/library/ws-pojo-springcxf/index.html?ca=drs-)

简而言之，创建一个 Web 服务有四个步骤

> 1 - 创建服务端点接口 (SEI) 并定义要公开为 Web 服务的方法。
> 
> ```
> package demo.order;
> 
> import javax.jws.WebService;
> 
> @WebService
> public interface OrderProcess {
>   String processOrder(Order order);
> } 
> ```
> 
> 2 - 创建实现类并将其注释为 Web 服务。
> 
> ```
> package demo.order;
> 
> import javax.jws.WebService;
> 
> @WebService(endpointInterface = "demo.order.OrderProcess")
> public class OrderProcessImpl implements OrderProcess {
> 
>  public String processOrder(Order order) {
>   return order.validate();
>  }
> } 
> ```
> 
> 3 - 创建 beans.xml 并使用 JAX-WS 前端将服务类定义为 Spring bean。
> 
> ```
> <beans xmlns="http://www.springframework.org/schema/beans"
>  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>  xmlns:jaxws="http://cxf.apache.org/jaxws"
>  xsi:schemaLocation="
> http://www.springframework.org/schema/beans 
> http://www.springframework.org/schema/beans/spring-beans.xsd
> http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
> 
>  <import resource="classpath:META-INF/cxf/cxf.xml" />
>  <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
>  <import resource="classpath:META-INF/cxf/cxf-servlet.xml" /> 
> 
>  <jaxws:endpoint 
>   id="orderProcess" 
>   implementor="demo.order.OrderProcessImpl" 
>   address="/OrderProcess" />
> 
> </beans> 
> ```
> 
> 4 - 创建 web.xml 以集成 Spring 和 CXF。
> 
> ```
> <web-app>
>  <context-param>
>   <param-name>contextConfigLocation</param-name>
>   <param-value>WEB-INF/beans.xml</param-value>
>  </context-param>
> 
>  <listener>
>   <listener-class>
>    org.springframework.web.context.ContextLoaderListener
>   </listener-class>
>  </listener>
> 
>  <servlet>
>   <servlet-name>CXFServlet</servlet-name>
>   <display-name>CXF Servlet</display-name>
>   <servlet-class>
>    org.apache.cxf.transport.servlet.CXFServlet
>   </servlet-class>
>   <load-on-startup>1</load-on-startup>
>  </servlet>
> 
>  <servlet-mapping>
>   <servlet-name>CXFServlet</servlet-name>
>   <url-pattern>/*</url-pattern>
>  </servlet-mapping>
> </web-app> 
> ```

# vb.net - vb.net 带有.png 的图片框，其中加载了透明背景？

> ID：14281370
> 
> 赞同：2
> 
> 时间：2013-01-11T15:30:53.587
> 
> 标签：vb.net, image, transparent

我有一个名为 donkey1.png 的 .png 文件-它具有透明背景，我已将其加载到名为 pcbDonkey1 的图片框中-我已更改图片框的属性以使背景色透明-这不起作用，因为它仍然交叉另一张图片，背景为白色。

我听说过使用 GDI 绘制此图像，因此它将具有透明图像，并且能够在没有白色背景的情况下穿过图像。

你会怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-18T21:00:57.110

只需将背景图片设置为前景图片框的父级，透明即可工作，无需任何额外编码

```
 With PictureBox1

        .Image = My.Resources._00_lichaam
        .SizeMode = PictureBoxSizeMode.Zoom
    End With
    With PictureBox2
        .Parent = PictureBox1
        .Image = My.Resources._01_Hoofd
        .SizeMode = PictureBoxSizeMode.Zoom
        .BackColor = Color.Transparent
    End With 
```

那应该工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T15:37:41.720

除非您需要 PixtureBox 控件来显示图像以外的其他用途，否则您可以在 Paint 事件中将图像直接绘制到窗体：

示例（您将需要计算纵横比等，但原则上）：

```
Sub Form_Paint(s as Object, e as PaintEventArgs) Handles Me.OnPaint

    Dim r As New Rectangle(myX, myY, myWidth, myHeight)
    e.graphics.DrawImage(myImage, r)

End Sub 
```

# javascript - zclip 在引导模式中不起作用

> ID：14281373
> 
> 赞同：3
> 
> 时间：2013-01-11T15:31:02.953
> 
> 标签：javascript, twitter-bootstrap, modal-dialog, zclip

我正在使用 zclip 页面提供的干净示例代码：

```
$('a#copy-dynamic').zclip({
    path:'js/ZeroClipboard.swf',
    copy:function(){return $('input#dynamic').val();}
}); 
```

这是HTML：

```
<a href="#" id="copy-dynamic" class="">Click here to copy the value of this input:</a>
<input type="text" id="dynamic" value="Insert any text here." onfocus="if(this.value=='Insert any text here.'){this.value=''}" onblur="if(this.value==''){this.value='Insert any text here.'}"> 
```

如果 HTML 在引导程序主页内，它可以正常工作，但如果我将 html 移动到引导程序模式窗口内（即，在模式的 div 元素内），它会停止工作。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:54:30.273

我对 zclip 和 bootstrap 模态有同样的问题。我应用的修复是双重的：

*   将 zclip 附加到模态的“显示”功能内的元素。
*   在将 zclip 附加到元素之前添加 250 毫秒的延迟

这会正确地将 zclip 放置在模态中。如果您在模式中有多个选项卡，它也可以工作。

**HTML**

```
<div id="myModal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <a class="btn" href="#" id="modal_body_button">Copy Undo Config To Clipboard</a>
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn">Close</a>
        <a href="#" class="btn btn-primary">Save changes</a>
    </div>
</div> 
```

**JavaScript**

```
$('#myModal').on('show', function () {
    $("#modal_body_button").delay(250).queue(function(next){
        $(this).zclip({
            path: "/static/javascript/ZeroClipboard.swf",
            copy: "copied text OK!"
        });
        next();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:07:17.217

In example above can also use on('shown') instead of on('show') event which calls when modal completely showed. This helps to prevent using dirty hacks like delay(250)

# javascript - JavaScript，使用函数更改 HTML 中显示的文本 标签

> ID：14281393
> 
> 赞同：6
> 
> 时间：2013-01-11T15:32:07.330
> 
> 标签：javascript, while-loop, html5-canvas, dom-events

我有一个 HTML5 画布，它在画布下方的页面上显示了许多图像和一段文本。我希望根据用户单击的图像来更新段落中的文本以显示来自 JS 数组的不同元素。

目前，我有一个看起来像这样的“mousedown”功能：

```
 _mousedown: function(evt) {
    this._setUserPosition(evt);
    var obj = this.getIntersection(this.getUserPosition());
    if(obj && obj.shape) {
        var shape = obj.shape;
        this.clickStart = true;
        shape._handleEvent('mousedown', evt);
        isClickOnImage(evt);
        var id = shape.id;
        selectTip(id);
    }

    //init stage drag and drop
    if(Kinetic.DD && this.attrs.draggable) {
        this._initDrag();
    }
} 
```

我尝试使用该行`var id = shape.id`更新传递给函数的 ID，以便它从我的“提示”数组中获取正确的元素，但由于某种原因，当我在浏览器中查看页面并单击图像时，画布下方的文本不会更新。似乎此函数没有将“id”变量更新为已单击的任何图像的 ID。

在研究了这个之后，在我看来，我想在“mousedown”函数中使用一个循环，它将获取检测到点击的图像的“id”，并循环遍历我的“sources”数组（这是所有图像都从 HTML 加载到 JS 的位置），在每个位置检查存储在该位置的图像是否具有与已单击图像的 ID 相同的 ID。如果是，则循环应将文本设置为存储在数组该位置的文本，如果不是，则应继续查看数组直到找到它。这有意义吗？我尝试将以下代码添加到“mousedown”函数中，但它并没有像我预期的那样改变文本：

```
var imageCheckArray = 0;
        while(imageCheckArray < sources.length){
            if(shape.id == sources[imageCheckArray]){
                selectTip(imageCheckArray);
            } else {
                imageCheckArray++;
            }
        } 
```

我在循环中缺少什么吗？

整个函数的代码目前如下所示：

```
_mousedown: function(evt) {
    this._setUserPosition(evt);
    var obj = this.getIntersection(this.getUserPosition());
    if(obj && obj.shape) {
        var shape = obj.shape;
        this.clickStart = true;
        shape._handleEvent('mousedown', evt);
        isClickOnImage(evt);
        /*This line needs to get the element of the sources array that has been selected, 
            and then select the element at the same position from the tips array.*/
        //var id = null;
        var imageCheckArray = 0;
        while(imageCheckArray < sources.length){
            if(shape.id == sources[imageCheckArray]){
                selectTip(imageCheckArray);
            } else {
                imageCheckArray++;
            }
        }

        //var id = 
        //selectTip(id);
    }

    //init stage drag and drop
    if(Kinetic.DD && this.attrs.draggable) {
        this._initDrag();
    }
} 
```

**编辑 11/01/2013 @ 16:10**

的代码`selectTip`是：

```
function selectTip(id){
    $("#tipsParagraph").text(tips[id]);
} 
```

我在这里放了一个 jsFiddle：http: [//jsfiddle.net/cd8G7/](http://jsfiddle.net/cd8G7/)虽然“结果”面板没有显示我在浏览器中查看页面时实际看到的内容 - 我得到了所有的画布显示图像，画布下方的段落显示我的“提示”数组的第一个元素中的文本。

**编辑 23/01/2013 @ 13:50**

这是我的`isClickOnImage`功能：

```
function isClickOnImage(event){
    var clickX = event.clientX;
    var clickY = event.clientY;

    //var imageCheckIteration = 0;
    while(imageCheckIteration < sources.length){
        if((clickX > sources[imageCheckIteration].x && clickX < sources[imageCheckIteration].x + imageWidth) &&
        (clickY > sources[imageCheckIteration].y && clickY < sources[imageCheckIteration].y + imageHeight)){
            /*This is where I need to print the variable that holds the text I want to display, but I need to display its contents
            outside the canvas, in the <p></p> tags below. */
            console.log("Click on image detected");
            document.getElementById("tipsParagraph").innerHTML = sources[imageCheckIteration].data-tip /*tips[imageCheckIteration]*/;
        } else {
            document.getElementById("tipsParagraph").innerHTML = "";
        }
    }
} 
```

我打算让这个函数做的是，捕获画布上任何点击的 X 和 Y 坐标，并将它们存储在变量“clickX”和“clickY”中。然后，我有一个名为“imageCheckIteration”的变量已初始化为 0，虽然这个变量小于我的“源”数组（这是存储所有图像的数组）的长度，但该函数应该检查单击是否在由数组中的一个图像覆盖的画布区域上。

如果是，则控制台日志应显示消息“单击检测到的图像”，并且该行

```
document.getElementById("tipsParagraph").innerHTML = sources[imageCheckIteration].data-tip; 
```

应将“tipsParagraph”的值设置为位于“sources”数组的“imageCheckIteration”位置的任何图像的“data-tip”属性的值。如果在未显示图像的画布区域上检测到单击，则应将“tipsParagraph”的值设置为不保留任何内容。

但是，由于某种原因，当我在浏览器中查看页面时，'tipsParagraph' 显示文本“这是显示文本的位置”，这是它的默认值，所以没关系。但是，当我单击图像或单击画布上的任何其他位置时，“tipsParagraph”中显示的文本不会更新。

我不知道为什么会这样-有人可以指出我正确的方向吗？这是否意味着我的`isClickOnImage(event)`函数永远不会被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:37:47.037

我简化了您通过画布获取图像引用的方式。这里的技巧是交换画布和图像容器的 z-index 并在鼠标向上事件中获取对图像的引用。我不知道在画布后面获取元素的干净方法，因此是解决方法。

```
$('canvas').bind('mousedown', function(e) {
  $('section').css('z-index', 4);
});

$('img').bind('mouseup', function(e) {
  $('#tipsParagraph').text($(this).attr('id') + ":" + $(this).attr('alt'));
  $('section').css('z-index', 2);
}); 
```

这里的第二部分是从图像本身中获取一些属性并更新 div 中的文本。

您可以在[此处](http://jsfiddle.net/cd8G7/8/)查看更多解决方案。

# asp.net - 调试 asp.net4 网站本地会话作为应用程序池标识

> ID：14281394
> 
> 赞同：1
> 
> 时间：2013-01-11T15:32:08.747
> 
> 标签：asp.net, visual-studio-2010, iis

我在使用可信连接访问数据库的网站中有一个错误。在本地调试时我没有收到错误消息。我相信这取决于分配给我的个人 Windows 帐户的特定权限。

是否有一种简单的方法可以将网站（visual studio 10 调试器/Casini）作为有问题的应用程序池身份运行并逐步执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:27:43.387

您实际上可以使用 Visual Studio 调试 IIS 进程。转到菜单“工具”并选择“附加到进程...”

![在此处输入图像描述](../Images/e574124957129087b0435d52e26e1b3a.png)

确保选中“显示所有用户的进程”。您应该寻找“w3wp.exe”。

通过这种方式，您可以附加和调试在 IIS（您的应用程序）上运行的进程。

# perl - 如何从 Nagios-Report Perl 模块打印出 Nagios 服务 UP 时间百分比

> ID：14281396
> 
> 赞同：6
> 
> 时间：2013-01-11T15:32:14.220
> 
> 标签：perl, monitoring, perl-module, nagios

我可以使用以下代码从[Nagios-Report Perl 模块](http://search.cpan.org/~hopcrofts/Nagios-Report-0.003/)打印出**主机**运行时间百分比：

```
#!/usr/bin/perl
use strict ;
use Nagios::Report ;
my $x = Nagios::Report->new(q<local_cgi localhost nagiosadmin>)
  or die "Can't construct Nagios::Report object." ;
$x->mkreport(
                [ qw(HOST_NAME PERCENT_TOTAL_TIME_UP) ],

                sub {
                        my %F = @_; my $u = $F{PERCENT_TOTAL_TIME_UP}; $u =~ s/%//;
                    },
                        0,

                sub {
                        my $F = shift @_ ;
                }
) ;
$x->debug_dump ; 
```

但是我怎样才能只打印出**Service** UP Time Percentage？我的意思是只输出百分比值。

我尝试了很多选择，但无法做到正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:16:57.303

这将生成服务正常运行时间报告，但我怎样才能只检索正常运行时间百分比值而不是完整报告？

```
#!/usr/bin/perl
use strict ;

use Nagios::Report ;

my $x = Nagios::Report->new(
                            # Data source
                q<local_cgi localhost nagiosadmin>,
                            # Report period
                [ qw(24x7) ],
                            # Time period
                'last7days',
                            # Service report
                1,
                            # Pre-filter 
                sub { my %F = @_; my $u = $F{PERCENT_TOTAL_TIME_OK}; $u =~ s/%//; $u < 100 }
               )
  or die "Can't construct Nagios::Report object." ;

$x->mkreport(
        [
        qw(
            HOST_NAME
            PERCENT_TOTAL_TIME_OK
            DOWN
            UP
            OUTAGE
          )
        ],

        sub { my %F = @_; my $u = $F{PERCENT_TOTAL_TIME_OK}; $u =~ s/%//; $u < 100 },

        undef,

        undef,

        1,

) ;

$x->debug_dump() ; 
```

# .net - .Net 平台的 Windows 7 中的 Robocode instadd 问题

> ID：14281397
> 
> 赞同：0
> 
> 时间：2013-01-11T15:32:15.277
> 
> 标签：.net, windows, robocode

我想在.Net平台上开发机器人代码，但我遇到了启动它的问题。

我已经在我的机器上安装了 Java 和 .Net 4.0。下载并安装 robocode-1.7.4.4-setup.jar 后，robocode 应用程序可以正常运行。

但是当我尝试按照这篇文章[http://robowiki.net/wiki/Robocode/.NET/Create_a_.NET_robot_with_Visual_Studio](http://robowiki.net/wiki/Robocode/.NET/Create_a_.NET_robot_with_Visual_Studio)开发机器人时，当我想添加对项目的引用时，它在 libs 文件夹中找不到任何 dll 文件. 似乎缺少 robocode.dotnet-xxxx-setup.jar 文件。

我不知道如何解决这个问题，有人帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:09:36.267

确保您已安装 robocode .NET 插件 (robocode.dotnet-1.8.0.0-setup.jar) 以及 robocde-1.8.0.0-setup.jar 文件。

# php - 使用 OCI_DEFAULT for PHP > 5.3.2 的 Oracle oci_execute() 的行为

> ID：14281400
> 
> 赞同：1
> 
> 时间：2013-01-11T15:32:26.137
> 
> 标签：php, oracle

我遇到了一些使用`oci_execute()`带有`OCI_DEFAULT`标志的 Oracle 遗留代码。

```
oci_execute($this->result, OCI_DEFAULT); 
```

但是，此服务器现在运行 PHP > 5.3.2。根据PHP[文档](http://php.net/manual/en/function.oci-execute.php)：`OCI_DEFAULT`

> 自 PHP 5.3.2 (PECL OCI8 1.4) 起已过时，但仍可用于向后兼容。在新代码中使用等效的 OCI_NO_AUTO_COMMIT。

所以我的问题是两部分：

*   `OCI_DEFAULT`PHP < 5.3.2 代表什么？
*   `OCI_DEFAULT`在 PHP >= 5.3.2 中使用时的有效模式是什么？（即上面的代码）

在尝试回答第 2 部分时，我希望找到`oci_execute_mode()`进行调试。但是，AFAIK 不存在此类功能。从运行脚本开始，它似乎在成功的 PHP 脚本结束时提交（即当连接关闭时）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:25:30.987

> 对于 PHP < 5.3.2，OCI_DEFAULT 代表什么？

文档回答了您的第一个问题。

> 自 PHP 5.3.2 (PECL OCI8 1.4) 起已过时，但仍可用于向后兼容。在新代码中使用等效的 OCI_NO_AUTO_COMMIT。

然后，如果您寻找**OCI_NO_AUTO_COMMIT** ...

> 不要自动提交更改。在 PHP 5.3.2 (PECL OCI8 1.4) 之前，使用 OCI_DEFAULT，它是 OCI_NO_AUTO_COMMIT 的别名。

简短回答：“OCI_DEFAULT < PHP 5.3.2” = “与 OCI_NO_AUTO_COMMIT >= PHP 5.3.2 相同” = “不要自动提交当前正在执行的语句。”

> 在 PHP >= 5.3.2 中使用 OCI_DEFAULT 时的有效模式是什么？（即上面的代码）

它与 < 5.3.2 中所做的相同以保持向后兼容性 - 它现在已过时/不推荐使用。您可以使用 OCI_DEFAULT 或 OCI_NO_AUTO_COMMIT，但您应该使用后者，因为它可能不会永远存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:48:12.363

Web 服务器应自动提交，无需手动或自动等待 COMMIT 命令。如果您想处理具有相互依赖的 SQL 查询组的任何事务，我认为最好在业务层或存储过程中处理这些 SQL 查询，如果需要，可以在其中应用 COMMIT 或 ROLLBACK。

**编辑：**

对于 PHP < 5.3.2，OCI_DEFAULT 代表什么？

当您关闭连接时，OCI_DEFAULT 会自动回滚。您需要显式调用 oci_commit() 来提交事务。

在 PHP >= 5.3.2 中使用 OCI_DEFAULT 时的有效模式是什么？

以前的版本只有 OCI_COMMIT_ON_SUCCESS 和 OCI_DEFAULT。在新版本中，OCI_DEFAULT 只是 OCI_NO_AUTO_COMMIT 的别名。以前，OCI_DEFAULT 会混淆其用途。OCI8 1.4 通过重命名 OCI_DEFAULT 添加了新模式 OCI_NO_AUTO_COMMIT。OCI_DEFAULT 和 OCI_NO_AUTO_COMMIT 之间没有内部性能差异。

# jquery - 试图将动画从 css3 转换为 jquery，到处都是墙壁

> ID：14281403
> 
> 赞同：0
> 
> 时间：2013-01-11T15:32:33.050
> 
> 标签：jquery, html, css, jquery-animate, css-transitions

您好，我正在尝试将以下 css3 动画转换为 jquery，但运气不佳：

```
 .portfoliobox .rollover
{
    height: 220px;
    width: 100%;
    background: url(../img/rolloverbg.png);
    margin-top: 220px;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    overflow: hidden;
}
.portfoliobox:hover .rollover
{
    float: left;
    margin-top: 100px;
    -webkit-transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    overflow: hidden;
} 
```

效果可以看这里：[http ://www.astwood.co.uk/testsite/wordpress/](http://www.astwood.co.uk/testsite/wordpress/)

有人可以帮帮我吗？

编辑：我已经尝试过的代码

```
$(document).ready(function(){   

    $('.portfoliobox').hover(function(){  
        $(".rollover", this).stop().animate({margin-top:'220px'},{queue:false,duration:160});  
    }, function() {  
        $(".rollover", this).stop().animate({margin-top:'100px'},{queue:false,duration:160});  
    });  

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:31:04.103

这是想要的效果：

[http://jsfiddle.net/tHDa4/](http://jsfiddle.net/tHDa4/)

```
$('.portfoliobox').hover(function () {
  $(".rollover").stop().animate({ marginTop: '80px' }, 160);
}, function () {
  $(".rollover").stop().animate({ marginTop: '300px' }, 160);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:02:35.817

margin-top 应该说 marginTop ......也就是说，我尝试了你在小提琴中所拥有的东西，它做了一些 FUNKY 的东西。

```
$(".rollover").stop().animate({marginTop:'220px'},{queue:false,duration:160}); 
```

另外，我取出了“this”，因为它使 jsfiddle 变得疯狂。

[http://jsfiddle.net/MatthewDavis/qDnC7/3/](http://jsfiddle.net/MatthewDavis/qDnC7/3/)

# php - 如何将一些静态数据与json编码mysql数组数据合并？

> ID：14281405
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:32:37.620
> 
> 标签：php, mysql, json

我正在尝试将静态数据与 json 编码数组数据合并以进行输出。这是我的php代码：

```
$arr = array();

$rs = mysql_query("SELECT id, name, picture, mail, gender, birthday FROM users WHERE id='$logged_id' ");

while($obj = mysql_fetch_object($rs)) {
   $arr[] = $obj;
}

echo '{"users":'.json_encode($arr).'}'; 
```

现在我想将其他数据与它合并：

```
$user_ip = array("user_ip" => $user_ip_address); 
```

我试过 array_merge($arr, $user_ip)。但它没有用。如果我与现有数据数组合并，我认为这不是正确的 json 数组格式。请让我知道如何使用 json 编码输出其他数据以及来自 mysql 的当前数据。

我用我现有的代码得到这样的输出，这是正确的：

**{"users":[{"id":"14","name":"Sonu Roy","picture":"image012.jpg","mail":"myemail@gmail.com","gender": "男","生日":"1983-01-11"}]}**

但现在我想添加其他变量，例如 $user_ip_address 作为用户数据加入当前输出数据，如下所示：

**{"users":[{"id":"14","name":"Sonu Roy","picture":"image012.jpg","mail":"myemail@gmail.com","gender": "男","生日":"1983-01-11",user_ip:"127.0.0.1"}]}。**

我想以这种方式得到它。怎么做？请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:50:02.007

`mysql_fetch_object`返回一个对象，而不是数组。所以，你在做什么`$arr[] = $obj;`只是将一个对象添加到一个数组中。所以，实际的结构`$arr`是这样的

```
$arr => [
    [0] => Object(....),
    [1] => Object(....),
    ....
] 
```

在您的特定情况下，我假设您通过主键获取单行，因此只有一个对象。

解决此问题的最简单方法是将字段添加到对象。我从 5.3 开始就没有使用过 PHP，所以不能确定，但​​它就像添加一样简单

```
$obj->user_ip = $user_ip_address; 
```

循环内。

顺便说一句，有几个问题要问你：

1.  如果它应该导致单行，为什么要使用循环？
2.  为什么要将变量直接嵌入到 SQL 查询中。它很容易受到攻击，请阅读有关 sql-injections 以及如何防止它的信息（有一天，我真的很厌倦在 SO 上告诉人们使用 PDO 和准备好的语句，所以请阅读它），
3.  您是否阅读过有关`mysql_fetch_object`and的文档`array_merge`？为什么不呢（因为如果你读过它，你就不会问这个问题）。
4.  试过调试？例如附加调试器并观察变量内容？插入日志记录或（上帝原谅我）调试打印`echo`？
5.  “没有工作”是一个非常糟糕的错误描述。这次你很幸运，因为错误很明显。下一次，请说得更具体一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:43:05.260

尝试这个：

```
echo json_encode(array('users' => $arr, 'user_ip' => $user_ip_address)); 
```

附带说明：您应该使用 PHP PDO 类来连接和查询数据库。

# c# - C# 读取带有不同编码字符的 XML 的问题

> ID：14281408
> 
> 赞同：0
> 
> 时间：2013-01-11T15:32:43.580
> 
> 标签：c#, xml, encoding

我在阅读 XML 时遇到了问题。找到了解决方案，但仍有一些问题。不正确的 XML 文件以 UTF-8 编码并在其标题中具有适当的标记。但它还包括一个以 UTF-16 编码的字符 - 'é'。此代码用于读取 XML 文件以验证其内容：

```
var xDoc = XDocument.Load(taxFile); 
```

它为指定的不正确的 XML 文件引发异常：“给定编码中的无效字符。第 59 行，位置 104。” 快速修复如下：

```
XDocument xDoc = null;
using (var oReader = new StreamReader(taxFile, Encoding.UTF8))
{
    xDoc = XDocument.Load(oReader);
} 
```

此代码不会为不正确的文件引发异常。但是“é”字符被加载为�。我的第一个问题是“为什么它有效？”。

另一点是在加载带有“é”的节点之前，使用 XmlReader 不会引发异常。

```
XmlReader xmlTax = XmlReader.Create(filePath); 
```

再次使用 StreamReader 进行锻炼会有所帮助。同样的问题。似乎修复解决方案不够好，因为有一天:) 可能会出现以另一种格式编码的 XML，并且可能会以错误的方式进行。但我尝试处理 UTF-16 格式的 XML 文件，它工作正常（配置为 UTF-8）。

最后一个问题是是否有任何选项可以为 XDocument/XmlReader 提供忽略字符编码或类似这样的 smth。

期待您的回复。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:45:08.830

首先要注意的是 XML 文件实际上是有缺陷的——不应该像这样在同一个文件中混合文本编码。当文件实际上嵌入了显式编码时，该错误更加明显。

至于为什么用 StreamReader 可以无异常读取，是因为 Encoding 包含了设置来控制遇到不兼容数据时会发生什么

Encoding.UTF8 被记录为使用后备字符。来自[http://msdn.microsoft.com/en-us/library/system.text.encoding.utf8.aspx](http://msdn.microsoft.com/en-us/library/system.text.encoding.utf8.aspx)：

> 此属性返回的 UTF8Encoding 对象可能没有适合您的应用程序的行为。它使用替换回退来用问号（“？”）字符替换无法编码的每个字符串和无法解码的每个字节。

您可以自己实例化编码以获得不同的设置。这很可能是 XDocument.Load() 所做的，因为默认情况下隐藏错误通常是不好的。 [http://msdn.microsoft.com/en-us/library/system.text.utf8encoding.aspx](http://msdn.microsoft.com/en-us/library/system.text.utf8encoding.aspx)

如果您收到此类损坏的 XML 文件，第 1 步是（大声地）抱怨它。这种行为没有正当理由。如果您无论如何都必须处理它们，我建议您查看 UTF8Encoding 类及其 DecoderFallbackProperty。看来您应该能够实现自定义 DecoderFallback 和 DecoderFallbackBuffer 来添加能够理解 UTF-16 字节序列的逻辑。

# python - 变色龙将线添加到填充槽

> ID：14281414
> 
> 赞同：1
> 
> 时间：2013-01-11T15:33:08.183
> 
> 标签：python, macros, pyramid, chameleon

我有一个带有动态数量的小部件的网站，金字塔视图（views.py）调用页面，并发送数据：

查看.py：

```
@view_config(route_name='home', renderer='templates/home.pt')
def home_view(request):
    widgets = #do sql stuff#
    return widgets 
```

布局.t：

```
<html>
 <head>
  <title>Title</title>
 </head>
 <body>
  <div  class="container">
    <div tal:omit-tag="" metal:define-slot="content"/>
  </div>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <more tal:omit-tag metal:define-slot="js-more"></more>
 </body>
</html> 
```

主页.pt：

```
<div metal:fill-slot="js-more">
 <script src="pagespecific.js"></script>
</div>
<div metal:use-macro="load: layout.pt">
  <div metal:fill-slot="content">
   Page Content!!!!
  </div>
  <div class="widgets-stuff">
    <div class="modulecontent" tal:repeat="_widgets widgets">
     <div tal:omit-tag="" metal:use-macro="load: widgets/${_widgets.template}.pt" />
    </div>
  </div>
</div> 
```

小部件示例.pt：

```
<div class="morewidgetstuff">
 A widget!
</div> 
```

我希望能够在小部件模板上添加一个新的 js，如下所示：

小部件示例.pt：

```
<div metal:add-to-slot="js-more">
 <script src="widgetspecific.js"></script>
</div>
<div class="morewidgetstuff">
 A widget!
</div> 
```

ps：我知道这没有多大意义，这只是一个例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:30:41.523

您需要在呈现所有小部件（在您的情况下）的模板中填充插槽（从而为您的小部件添加任何所需的 JavaScript `home.pt`）。

这是合理的，因为如果您有两个需要相同资源的小部件，您只需要包含一次。在您拥有所有小部件的集合的级别上确定唯一集合要容易得多。

# php - 在 PHP 中通过文件名长度限制文件列表

> ID：14281418
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:33:15.327
> 
> 标签：php, html

我目前正在使用此 PHP 脚本生成链接列表（指向单个目录中的文件）：

```
### BEGIN Directory Listing
PHP script to list files in a dir, currently lists dummy files as well, but it works.

<?php
$dir="./content"; // Directory where files are stored
if ($dir_list = opendir($dir)) {
    while(($filename = readdir($dir_list)) !== false) {
        //this kills the annoying .. and . directory listing
        if($filename == ".." || $filename == ".") continue; ?>
    <p><a href="<?php echo $filename; ?>"><?php echo $filename; ?></a></p> 
<?php
}
closedir($dir_list);
}
?>
### END Directory Listing 
```

我现在希望只列出文件名长度为 8 个字符的文件（./content 文件夹包含多个长度的文件名，但只有一种文件类型）。还应注意，这些文件不显示/不具有文件扩展名。

一如既往，非常感谢您的帮助和知识！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:34:13.520

检查长度`strlen()`

```
if (strlen($filename) !== 8) continue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:34:30.760

```
if ($dir_list = opendir($dir)) {
    while(($filename = readdir($dir_list)) !== false) {
        if(strlen($filename) !== 8) continue;
        //this kills the annoying .. and . directory listing
        if($filename == ".." || $filename == ".") continue; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:34:55.073

`strlen()`用函数 检查它

if(strlen($filename) ==8)){ //做点什么 }

# java - 在android中更改背景图像

> ID：14281419
> 
> 赞同：1
> 
> 时间：2013-01-11T15:33:19.307
> 
> 标签：java, android

每次单击按钮时，我都会尝试更改背景图像。问题是，我总是得到一个 javanullexception。

这是我的代码：

```
 public class Help extends Activity {

    int pageCtr = 0;
    RelativeLayout hLayout;
    ImageView nextbtn, prevtbtn;

     @Override
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            this.requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.activity_help);

            hLayout = (RelativeLayout)findViewById(R.id.helpLayout);
            hLayout.setBackgroundResource(R.drawable.helpbg1);

     }

     public void showNextPage(View v)
     {
         pageCtr++;
         switchPage(pageCtr);
     }

     public void showPrevPage(View v)
     {
         pageCtr--;
         switchPage(pageCtr);
     }

     public void switchPage(int ctr)
     {
         hLayout = (RelativeLayout)findViewById(R.id.helpLayout);
         nextbtn = (ImageView)findViewById(R.id.nextBtn);
         prevtbtn = (ImageView)findViewById(R.id.backbtn);

         switch (ctr)
         {
         case 0:
             prevtbtn.setVisibility(View.INVISIBLE);
             hLayout.setBackgroundResource(R.drawable.helpbg1);
             break;
         case 1:
             prevtbtn.setVisibility(View.VISIBLE);
             hLayout.setBackgroundResource(R.drawable.helpbg2);
             break;
         case 2:
             hLayout.setBackgroundResource(R.drawable.helpbg3);
             break;
         case 3:
             nextbtn.setVisibility(View.VISIBLE);
             hLayout.setBackgroundResource(R.drawable.helpbg4);
             break;
         case 4:
             nextbtn.setVisibility(View.INVISIBLE);
             hLayout.setBackgroundResource(R.drawable.helpbg5);
             break;
         }
     }

} 
```

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/helpLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android">

<ImageView
    android:id="@+id/backBtn"
    android:layout_width="36dp"
    android:layout_height="36dp"
    android:src="@drawable/backbtn" 
    android:gravity="left"
    android:layout_marginTop="150dp"
    android:onClick="showPrevPage"
    android:visibility="gone"/>

<ImageView
    android:id="@+id/nextBtn"
    android:layout_width="36dp"
    android:layout_height="36dp"
    android:src="@drawable/nextbtn" 
    android:layout_alignParentRight="true"
    android:layout_marginTop="150dp"
    android:onClick="showNextPage"/>

</RelativeLayout> 
```

堆栈跟踪/日志猫：

```
 01-11 23:36:28.476: E/AndroidRuntime(1351): FATAL EXCEPTION: main
    01-11 23:36:28.476: E/AndroidRuntime(1351): java.lang.IllegalStateException: Could not execute method of the activity
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at android.view.View$1.onClick(View.java:3591)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at android.view.View.performClick(View.java:4084)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at android.view.View$PerformClick.run(View.java:16966)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at android.os.Handler.handleCallback(Handler.java:615)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at  android.os.Handler.dispatchMessage(Handler.java:92)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at android.os.Looper.loop(Looper.java:137)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at android.app.ActivityThread.main(ActivityThread.java:4745)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at  java.lang.reflect.Method.invokeNative(Native Method)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at java.lang.reflect.Method.invoke(Method.java:511)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-11 23:36:28.476: E/AndroidRuntime(1351):     at dalvik.system.NativeStart.main(Native Method)

        01-11 23:36:28.476: E/AndroidRuntime(1351): Caused by: java.lang.reflect.InvocationTargetException
        01-11 23:36:28.476: E/AndroidRuntime(1351):     at java.lang.reflect.Method.invokeNative(Native Method)
       01-11 23:36:28.476: E/AndroidRuntime(1351):  at java.lang.reflect.Method.invoke(Method.java:511)
        01-11 23:36:28.476: E/AndroidRuntime(1351):     at  android.view.View$1.onClick(View.java:3586)
        01-11 23:36:28.476: E/AndroidRuntime(1351):     ... 11 more
        01-11 23:36:28.476: E/AndroidRuntime(1351): Caused by: java.lang.NullPointerException
        01-11 23:36:28.476: E/AndroidRuntime(1351):     at com.example.gems.Help.switchPage(Help.java:53)
        01-11 23:36:28.476: E/AndroidRuntime(1351):     at com.example.gems.Help.showNextPage(Help.java:31)
    01-11 23:36:28.476: E/AndroidRuntime(1351):     ... 14 more 
```

这是一个简单的代码，但错误指向我的 pageCtr。似乎它没有看到我的 pageCtr 的任何值。试图将全局变量传递给希望它能够工作的方法，但它没有。错误是当我尝试增加或减少 pageCtr 时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:50:42.853

您的 java 代码和 xml 声明中的名称**`backBtn`**不匹配。

在**XML**中，`android:id="@+id/backBtn"`

在**Java**中，`prevtbtn = (ImageView)findViewById(R.id.backbtn);`

你应该使用：

```
public void switchPage(int ctr)
     {
         hLayout = (RelativeLayout)findViewById(R.id.helpLayout);
         nextbtn = (ImageView)findViewById(R.id.nextBtn);
         prevtbtn = (ImageView)findViewById(R.id.backBtn);
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:38:50.153

您已经有了对**hLayout**的引用，无需在 switchPage 函数中重新分配它。请检查您是否在 activity_help.xml 中同时拥有 ImageView(nextbtn, prevtbtn)。另外，您如何调用 showNextPage 和 showPrevPage 以及您在那里传递什么视图？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:45:30.877

尝试以下步骤：

1.  将您的图像放入数组中。根据您的代码，您可以从 drawable 文件夹中获取所有图像。所以创建一个这样的数组，`int[] imageArr=[R.drawble.image1.....];`
2.  使用一个标志或计数器，每次单击按钮时都会增加该值，
3.  对于图像设置，基于计数器/标志值从基于该位置的图像数组中获取该图像。例如。`counter value=10`手段， get ，现在将此`imageArr[10]`值设置为背景。
4.  不要忘记检查数组大小和计数器值，一旦计数器值等于数组大小，将计数器值设置为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:59:42.057

检查您的代码和布局，名称之间存在差异：

```
android:id="@+id/backBtn"

prevtbtn = (ImageView)findViewById(R.id.backbtn); 
```

另外我建议实现您自己的 OnClickListener 并调试 onClick() 函数。

# xml - 为什么与架构中的默认值具有相同值的可选元素不会出现在事务中？

> ID：14281420
> 
> 赞同：0
> 
> 时间：2013-01-11T15:33:21.210
> 
> 标签：xml, xsd

我使用各种 xml 事务进行请求然后响应事务。响应事务响应请求事务，然后提供任何“命中”信息。我注意到，当我尝试显示回显时，如果一个元素是可选的并且具有与默认提供的相同的值，那么它将被省略。

```
<Request Name="Marty Jones" Education="0"/> 
```

根据请求，如果需要“姓名”且“教育”是可选的，则枚举为（0 - 无，1 - 高中，2 - 大学），默认值为“0”。上面的元素将显示为：

```
<Request Name="Marty Jones"/> 
```

如果我指定 Education="2"，那么它将显示为：

```
<Request Name="Marty Jones" Education="2"/> 
```

是否有理由省略可选的默认值？无论条件如何，我都想显示整个回声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:22:30.363

您还没有显示您的架构，也没有解释您正在做什么处理。

如果您通过为属性定义默认值的模式来验证给定的 XML，那么文档的“后模式验证信息集”将包含默认值。从提供的证据来看，要么您没有完成验证，要么您显示的不是 PSVI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:15:32.260

许多 XSD 感知工具在编写 XML 时都会这样做。这个想法是，如果省略等于默认值的值（假设它们是可选的），它会使 XML 更短且更具可读性。例如，对于 XSD 本身，`minOccurs="1"`或的任何值`maxOccurs="1"`在写出时都将被省略 - 想象一下，如果您的 XSD 将它们包含在每个`<element>`,`<sequence>`等`<choice>`中，它们可能会变得多么混乱。

请注意，当使用 XSD 进行解析时，不区分默认值和等于默认值的显式值 - 如果没有此信息，该工具将无法重建最初使用的值。

然而，并不是每个人都希望在每个应用程序中都有这种行为。所以一些工具有一个配置开关来关闭它。由于这整个问题不是 XSD 规范的一部分，因此任何此类配置开关都是依赖于工具的。因此，您必须告诉我们您使用的是哪种工具。

顺便说一句：这里有一个关于这个问题的问题，带有指向特定工具的其他问题的链接。（例如 MarkLogic 有一个开关）：

[Xml Schema 规范是否使用默认值定义了可选属性的序列化？](https://stackoverflow.com/questions/13246810/does-the-xml-schema-spec-define-the-serialization-of-optional-attributes-with-a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:36:02.100

属性声明具有“use”属性，它可以取“required”的值，但它不适用于“default”。简而言之，您想要以下内容但无效。

```
<attribute name="Education" default="0" use="required/> 
```

简而言之，您不能分配默认值并使该属性成为强制性的。

# .htaccess - 301重定向不起作用，我想要的可能吗？

> ID：14281421
> 
> 赞同：1
> 
> 时间：2013-01-11T15:33:34.223
> 
> 标签：.htaccess

这是我的 .htaccess 文件

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 

Redirect 301 http://whattodoindublin.com/ http://www.whattododirectory.com/category/dublin/ 
```

[http://whattodoindublin.com/](http://whattodoindublin.com/)指向与[http://www.whattododirectory.com/](http://www.whattododirectory.com/)相同的文件夹，因此它加载相同的内容，但我希望[http://whattodoindublin.com/](http://whattodoindublin.com/)加载上述子目录，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:57:45.267

从[重定向指令](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)

> 语法：Redirect [status] URL-path URL
> ...旧的 URL-path 是以**斜杠开头**
> 的区分大小写（%-decoded）的路径。不允许使用相对路径。

 **您只能将*路径*重定向到外部 URL。也许在您的虚拟主机部分或 whattodoindublin.com 的 .htaccess 中，您可以这样做

```
Redirect 301 / http://www.whattododirectory.com/category/dublin/ 
```**

# sql - 如何损坏您的数据库以检查您的 sql 完整性检查逻辑是否正常工作？

> ID：14281424
> 
> 赞同：1
> 
> 时间：2013-01-11T15:33:42.487
> 
> 标签：sql, sql-server, sql-scripts

我已经为数据库维护计划编写了脚本

现在我想测试我的脚本

我没有任何 currpted 数据库，那么如果我的数据库损坏，我怎么能相信我的完整性检查脚本会给出正确的错误消息

我想损坏我的数据库来测试如何损坏数据库:)

DBCC CHECKDB WITH NO_INFOMSGS; 去

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:51:44.753

Paul Randal 在 SQL Skills 站点上有一些损坏的数据库。

请参阅 www.sqlskills.com

[http://www.sqlskills.com/blogs/paul/corruption-demo-databases-and-scripts/](http://www.sqlskills.com/blogs/paul/corruption-demo-databases-and-scripts/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:37:13.100

对于可能的测试场景，删除约束和/或触发器，损坏您的数据（即将前外键引用设置为 NULL）然后查看您的脚本是否检测到损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T10:56:26.380

访问内部服务并删除看起来很重要的内容。如果这不是您想要的，则将所有文件复制到闪存驱动器上并反复错误地将其弹出 - 最终它将被损坏。然后将其上传回服务器机器并检查。但是很可能你的脚本会被破坏

# android - Android: Make Actionbar overlap Activity layout

> ID：14281427
> 
> 赞同：8
> 
> 时间：2013-01-11T15:33:49.400
> 
> 标签：android, android-activity, android-actionbar

I have an activity where the Actionbar is hidden and when I click a button I want it to be visible, but I don't want the layout activity to scroll down, the bar must overlap it. How can I do such a thing?

To hide the bar i use

```
actionbar.hide();
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

And to make it visible:

```
actionbar.show();
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE); 
```

My layout is just

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <MyPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    <MyPager>

</RelativeLayout> 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-11T21:15:47.380

You are probably looking for the `ActionBar` overlay mode. Enable it for a single `Activity` by calling `requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY);` before `setContentView()`. Or in a theme by setting `android:windowActionBarOverlay` to `true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:49:18.937

Create a RelativeLayout for the parent layout of the activity and put your action bar at the top of the layout which will overlay it on top of the main activity content as shown in the example below.

The RelativeLayout allows you to position elements but also allow you to determine the z-index order of view elements by there order from top to bottom i.e. which views are in front/behind of others.

```
<RelativeLayout
    android:id="@+id/parent_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout
        android:id="@+id/action_bar_layout"
        android:layout_width="match_parent"
        android:layout_height="100dp">

    </LinearLayout>
    <LinearLayout
        android:id="@+id/main_activity_content_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    </LinearLayout>
</RelativeLayout> 
```

Now you can hide/show the action_bar_layout and it won't effect the positon of the activity content in main_activity_content_layout (by using setVisibility() method of the layout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T18:31:26.313

For Google Play Store like effect, try...

*   Try [this](http://developer.android.com/reference/android/widget/Toolbar.html) new Toolbar widget introduced in Lollipop (API Level 21)
*   Which is also supported by [this](https://developer.android.com/reference/android/support/v7/widget/Toolbar.html) api in earlier versions of android.

# c++ - C++ 类纠缠

> ID：14281429
> 
> 赞同：1
> 
> 时间：2013-01-11T15:34:03.287
> 
> 标签：c++, linux, g++

我正在尝试使用两个类的变量来从 A 类的变量访问 B 类的变量，反之亦然。但是，我想不出一个可能的解决方案。它总是以循环或以下错误结束：

```
error: invalid use of non-static data member 
```

这是代码示例：

播放器.h：

```
 #ifndef _PLAYER_H_
  #define _PLAYER_H_

#include "Segment/Dynamic_Segment.h"

class Attributes_P;

class Attributes_P : public Attributes_DS{
  protected:
  int inv_mcols, inv_mrows;

  public:
  Attributes_P();
  void controls( int MKEY_UP, int MKEY_RIGHT, int MKEY_DOWN, int MKEY_LEFT );
  void inventory( int inv_mcols, int inv_mrows );
};

class Player : public Dynamic_Segment{
  protected:
  int   **inv;

  public:

  int   MKEY_UP, MKEY_RIGHT, MKEY_DOWN, MKEY_LEFT;

  public:

  Player();
  Attributes_P set;
  friend class Core;
  friend class Attributes_P;

};
#endif 
```

播放器.cpp：

```
#include "Segment/Player.h"

Attributes_P::Attributes_P(){};

Player::Player() : Dynamic_Segment(){
  set.inv_mcols = 0;
  set.inv_mrows = 0;
}

void Attributes_P::inventory( int inv_mcols, int inv_mrows ) {
  this->inv_mcols = inv_mcols;
  this->inv_mrows = inv_mrows;
  Player::inv = new int*[this->inv_mcols]; //<--- Error here
  for( int i = 0; i < this->inv_mrows; i++ ) {
    Player::inv[i] = new int[this->inv_mcols]; //<--- Error here
  }
}

void Attributes_P::controls( int MKEY_UP, int MKEY_RIGHT, int MKEY_DOWN, int MKEY_LEFT ) {
  Player::MKEY_UP = MKEY_UP; //<--- Error here
  Player::MKEY_RIGHT = MKEY_RIGHT; //<--- Error here
  Player::MKEY_DOWN = MKEY_DOWN; //<--- Error here
  Player::MKEY_LEFT = MKEY_LEFT; //<--- Error here
} 
```

一段时间以来，我一直在用头撞墙……任何想法都将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:35:49.863

成员

```
Player::MKEY_UP
Player::MKEY_RIGHT
Player::MKEY_DOWN
Player::MKEY_LEFT 
```

不是`static`，因此您只能通过 type 的对象访问它们`Player`，而不是通过类实例。

假设您创建了 2 个玩家对象，`p1`并且`p2`. 当您调用 时，您`Attributes_P::controls`应该更改两个对象的哪一个成员？`p1`还是`p2`？

您可以声明这些成员，就`static`好像您希望它们在`Player`对象之间共享，或者将特定`Player`对象作为参数传递并直接访问其成员。这是逻辑的一部分，选择取决于您希望程序如何工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:50:18.610

您不能访问属性 MKEY_UP、MKEY_RIGHT、MKEY_DOWN、MKEY_LEFT 和 inv，因为它们是私有的。

将它们设为私有并编写 getter/setter！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:23:40.393

我认为您的数据可能过于紧密地交织在一起，也许应该只是一类。类的一个目的是封装数据，这样你就不会去摆弄别人的隐私了。您正在使用的数组和数组等还有其他问题`new`。但是......

在`Attributes_P::inventory`您尝试修改`inv`，它被声明为 的成员`Player`。但`Attributes_P`不知道你指的是*哪个玩家。*你需要要么

1.  `Player`将实例传递给`inventory`函数，或
2.  使用`Attributes_P`对`player`.

选项1：

```
void Attributes_P::inventory(int inv_mcols, int inv_mrows, Player& player) {
    player.inv = ...
} 
```

选项 2：

```
class Player; // needed so compiler understands next few lines refering to Player

class Attributes_P {
    Player& m_player;
public:
    Attributes_P(Player& player) : m_player(player) {
    }
};

class Player {
    Attributes_P m_attributes;
public:
    Player() : m_attributes(*this) { // pass self to Attributes_P constructor
    }
}

void Attributes_P::inventory(int inv_mcols, int inv_mrows) {
    m_player.inv = ...
} 
```

# ios - 是否可以调整 NSAttributedString 中的基线？

> ID：14281430
> 
> 赞同：8
> 
> 时间：2013-01-11T15:34:05.113
> 
> 标签：ios, cocoa-touch, ios6, core-text, nsattributedstring

我想稍微修改一个字符的 y 位置`NSAttributedString`。我知道我可以使用属性字典[下标（或上标）：](https://stackoverflow.com/questions/8555735/how-to-make-subscripts-and-superscripts-using-nsattributedstring)

```
@{(id)kCTSuperscriptAttributeName: @(-1)} 
```

不幸的是，在我的情况下，由此引起的转变太大了。我正在寻找一个以 1 点为单位调整基线的选项。

属性字符串将显示在`UIButton`using 中`-setAttributedTitle:forState:`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-24T00:00:20.040

从 iOS 7 开始，该[`NSBaselineOffsetAttributeName`](https://developer.apple.com/reference/uikit/nsbaselineoffsetattributename)属性已被添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:41:30.077

是的，你可以......但前提是你自己绘制文本，就像我在我的 DTCoreText 开源项目中那样。

请参阅此处 DTCoreTextLayoutFrame.m 中的第 924ff 行：[https ://github.com/Cocoanetics/DTCoreText/blob/master/Core/Source/DTCoreTextLayoutFrame.m](https://github.com/Cocoanetics/DTCoreText/blob/master/Core/Source/DTCoreTextLayoutFrame.m)

不幸的是，这是我知道的唯一方法。UIKit 没有给你这个选项。

# sql - SQL查询按时间和日期对数据进行排序，然后只选择最新的记录

> ID：14281431
> 
> 赞同：2
> 
> 时间：2013-01-11T15:34:05.030
> 
> 标签：sql

我正在尝试更新创建一个查询，该查询将按日期和时间对数据进行排序，找到最新的记录，然后更新记录中的另一个字段，将其标记为如此。

让我的生活更加艰难，时间和数据是两个独立的字段，时间也是一个字符串。

所以这是我到目前为止所拥有的，

```
UPDATE server.ESCC_HWAY_ASSETS_GULLIES_N 
set CURRENT_REC = 'Y' 
From server.ESCC_HWAY_ASSETS_GULLIES_N A 
inner join ( 
SELECT GULLY_ID, Max([DATE]) AS MaxDate, MAX([TIME]) AS MaxTime 
FROM server.ESCC_HWAY_ASSETS_GULLIES_N B
GROUP BY GULLY_ID, [DATE] ) B 
on A.GULLY_ID = B.GULLY_ID and A.[DATE] = B.MaxDate and A.[TIME] = B.MaxTime 
```

这导致数据按时间和日期排序，但它会更新它找到的所有字段，除了有两个条目的日期。然后它只更新最新的记录。

我正在测试一条记录 - B47605，它在此排队器上给出以下结果

```
SELECT GULLY_ID, Max([DATE]) AS MaxDate, MAX([TIME]) AS MaxTime 
FROM ESMAPADMIN.ESCC_HWAY_ASSETS_GULLIES_N B
WHERE GULLY_ID = 'B47605'
GROUP BY GULLY_ID, [DATE]

Gully_ID     MaxDate                MaxTime
B47605  2008-03-12 00:00:00.000 09:02:29
B47605  2008-09-19 00:00:00.000 09:51:14
B47605  2009-02-16 00:00:00.000 11:18:28
B47605  2009-08-21 00:00:00.000 12:34:45
B47605  2010-03-16 00:00:00.000 09:22:26
B47605  2010-08-25 00:00:00.000 11:19:55
B47605  2011-03-07 00:00:00.000 12:19:56
B47605  2012-05-02 00:00:00.000 20:57:54 
```

我想要的结果是只返回最新的记录，所以 -

```
Gully_ID     MaxDate                MaxTime
B47605  2012-05-02 00:00:00.000 20:57:54 
```

我不知道如何从我所在的地方到我需要去的地方，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:35:35.760

假设您正在使用`SQL Server 2005+`（*因为`[]`我看到*了）

```
;WITH latestResult
AS
(
    SELECT Gully_ID, MaxDate, MaxTime,
            ROW_NUMBER() OVER (PARTITION BY Gully_ID
                                ORDER BY MaxDate DESC, MaxTime DESC) RN
    FROM tableName
)
SELECT Gully_ID, MaxDate, MaxTime
FROM latestResult
WHERE RN = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/653d1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:19:26.217

最终使用了以下内容，感谢所有帮助我的人。

```
UPDATE ....
set CURRENT_REC = 'Y' 
where [objectID] in
(
select [objectID] from
    (
    SELECT [objectID],[GULLY_ID], [date], [time],
    ROW_NUMBER() over (partition by gully_id order by date desc, time desc) rown
    FROM ....
    ) as t
where rown=1
) 
```

# android - 对齐适配器行元素

> ID：14281433
> 
> 赞同：1
> 
> 时间：2013-01-11T15:34:11.697
> 
> 标签：android, android-layout

我正在尝试对齐列表视图中的行元素。我有一个包含此代码的布局行 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/TV_list_from_db_p_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp" >

        <Button
            android:id="@+id/BTN_addOne_from_db"
            android:layout_width="33dp"
            android:layout_height="wrap_content"
            android:background="@drawable/button"
            android:onClick="addOneToQuantity"
            android:text="+" />

        <EditText
            android:id="@+id/TV_Quantity_from_db"
            android:layout_width="44dp"
            android:layout_height="32dp" >
        </EditText>

        <Button
            android:id="@+id/BTN_subOne_from_db"
            android:layout_width="33dp"
            android:layout_height="wrap_content"
            android:background="@drawable/button"
            android:onClick="subOneToQuantity"
            android:text="-" />
    </LinearLayout>

    <CheckBox
        android:id="@+id/CHK__list_from_db"
        android:layout_width="30dp"
        android:layout_height="30dp"
  />

</LinearLayout> 
```

![这段代码给了我这个：](../Images/ce817615569b1134496a8c478fb1e31d.png) 我希望元素对齐，现在它按文本视图的长度对齐

像这样：
|TextView|数字选择器| 复选框|
|TextView|数字选择器| 复选框|
|TextView|数字选择器| 复选框|

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:38:12.793

由于您使用的是 LinearLayout，因此您可以同时提供内部 LinearLayout 和 CheckBox`layout_width="wrap_content"`并提供 TextView`layout_width="0dp"`和`layout_weight="1"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:09:12.503

使用相对布局并按以下顺序排列：

```
Check box - align parent right - width="30dp"
Button1 - to left of check box - width="33dp"
Edit Text - to left of Button1 - width="44dp"
Button2 - to left of Edit Text - width="33dp"
TextView - align parent left and to left of Button2 - width wrap_content 
```

# bash - 测试是否支持命令选项

> ID：14281436
> 
> 赞同：5
> 
> 时间：2013-01-11T15:34:25.937
> 
> 标签：bash, shell

在我的 grep 中，*如果*支持该选项`.bashrc`，我想将其别名为。但在 msysgit 等旧系统上不受支持：`grep --color` *`--color``--color`*

 *```
$ grep --color
grep: unrecognized option '--color'
$ grep --version
grep (GNU grep) 2.4.2 
```

在 .bashrc 中，如何确定是否支持某个选项？我可以测试硬编码的版本号，但是对于 >2.5 的版本会中断：

```
if [[ `grep --version` == *2.5* ]] ; then
    alias grep='grep --color=auto'
fi 
```

是否有更可靠的方法来测试命令是否支持选项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T15:37:37.253

使用您知道会成功的 grep 命令并添加颜色选项，例如

```
grep --color "a" <<< "a" 
```

如果选项存在，则返回码将为 0，否则为正。

所以你的 bashrc 看起来像：

```
if grep --color "a" <<<"a" &>/dev/null; then
    alias grep='grep --color=auto'
fi 
```

`&>`将 stdout*和*stderr 发送到 /dev/null，因此如果命令失败，它将被静音。但它仍然返回一个错误代码，从而阻止设置别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:42:25.243

```
`
echo s > dummy ;
grep --color s dummy ;
if [[ $? == 2 ]]; then
    echo not supported
fi
` 
```*

# java - 如何在 JDBC 中执行非查询存储过程

> ID：14281444
> 
> 赞同：1
> 
> 时间：2013-01-11T15:35:24.613
> 
> 标签：java, postgresql, jdbc

我在 postgres 数据库中有一个存储过程。我正在使用postgres JDBC驱动程序执行存储过程，并且我不关心返回类型，并且无法执行查询。这表明函数名称附近有语法错误。

在返回行的过程中，我已经能够通过 PreparedStatement 并设置参数来做到这一点，例如：

```
PreparedStatement prepared = connection.prepareStatement("SELECT * FROM NonQueryProcedure(?)");
prepared.setInt(1, 999);
// ....
ResulSet resultSet = prepared.executeQuery(); 
```

但是，我似乎无法让它适用于我不关心返回类型的“更新”存储过程。我尝试使用 connection.prepareStatement() 和 prepareCall()，还尝试使用 statement.execute()、.executeUpdate() 和 .executeQuery() 执行它，但没有成功。

如何在不关心返回类型的情况下执行存储过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:21:28.797

由于 PostgreSQL 没有“真正的”过程，函数只需使用`SELECT`语句执行：

```
statement.execute("select NonQueryProcedure(?)"); 
```

请注意，在 PL/pgSQL 函数中，您可以使用[`perform`](http://www.postgresql.org/docs/9.2/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-NORESULT)语句来调用这样的函数。但这在 PL/pgSQL 块之外是不可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:50:52.507

如果没有实际的语法错误，我不能肯定地说，但试试这个：

```
"SELECT * FROM \"getData\"(?)" 
```

CamelCase/PascalCase 在任何 SQL 数据库中都是一个坏主意。要么将其折叠成一个案例，而您看到的只是 AMASSOFUNREADABLELETTERS，要么它需要引用，并且您必须在任何时候都输入“aMassofLettersAndQuotesAndShiftKeysAndMyFingersHurt”以避免语法错误。

# c# - 从 docset 访问文档

> ID：14281447
> 
> 赞同：1
> 
> 时间：2013-01-11T15:35:42.820
> 
> 标签：c#, sharepoint-2010

**这是背景：**

有一个包含文档的文档集。这些文件具有独特的证券。当我更改文档集的某个属性时，在事件处理程序中我希望文档相应地更新其安全性。（很可能通过启动另一个更改文档安全性的事件处理程序，或直接调用更新安全性的函数。）

**问题**：抛开安全性不谈，是否可以访问文档集中的文档，如果可以，如何访问？即从文档集中作为SPItemEventProperties。

**示例**：我希望它看起来像......

```
public override void ItemUpdated(SPItemEventProperties properties)
{
  //... other stuff
  string oldDiv = Convert.ToString(properties.BeforeProperties["Division"]);
  string newDiv = Convert.ToString(properties.AfterProperties["Division"]);
  if (oldDiv != newDiv)
  {
    try
      {
        // update each document (that has security "My Division Team")
        foreach (documentx in properties.listitem.????) {
          if (documentx.securitylevel == "my division team") {
            updatesecurity(documentx); // this is my own custom function
}}} 
```

如果问题没有意义，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:05:00.173

有可能的。正如史蒂夫 B 指出的那样，它需要将文档集视为一个文件夹。在这种情况下，神奇的代码行是：

```
SPFileCollection docsinproject = properties.ListItem.Folder.Files;
foreach (SPFile doc in docsinproj) { .... } 
```

# javascript - 是否可以将其他参数传递给 async.eachSeries

> ID：14281453
> 
> 赞同：3
> 
> 时间：2013-01-11T15:36:03.937
> 
> 标签：javascript, node.js, async.js

是否可以将其他参数或参数传递给`async.EachSeries`

方法签名是：`EachSeries(arr, iterator, callback)`

我有一种方法可以将电子邮件收件人与邮件模板异步合并

```
var mergeTemplate = function(template,recipients,callback){

  async.EachSeries(recipients,processMails,callback);

};

var processMails = function(template,singleRecipient,callback){
   //...this would contain an async.waterfall of tasks to process the mail
   async.waterfall(tasks,callback);
} 
```

我需要的是在不使用“脏”全局变量的情况下通过模板...这可能吗？如果可以，如何？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-29T21:18:01.750

您可以使用[`.bind`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)在不使用全局变量的情况下传入模板：

```
var mergeTemplate = function(template, recipients, callback){
    async.eachSeries(recipients, processMails.bind(processMails, template), callback);
}; 
```

> 该`bind()`方法创建一个新函数，在调用该函数时，将其`this`关键字设置为提供的值，并在调用新函数时提供的任何参数之前具有给定的参数序列。

所以`processMails.bind(processMails, template)`创建了一个新函数，`this`设置为`processMails`，这个新函数的第一个参数是`template`。

这相当于（但不那么冗长）`processMails`直接调用如下：

```
var mergeTemplate = function(template, recipients, callback){
    async.eachSeries(
      recipients, 
      function(){
         return processMails(template);
      }, 
      callback);
}; 
```

# entity-framework - 获取数据时的实体框架多对多问题

> ID：14281454
> 
> 赞同：0
> 
> 时间：2013-01-11T15:36:05.197
> 
> 标签：entity-framework, entity-framework-4, many-to-many

我有两个简单的课程

```
public class User
{
    public User()
    {
        Roles = new Collection<Role>();
    }
    public int UserId { get; set; }
    public string UserName { get; set; }
    public ICollection<Role> Roles { get; set; }
}

public class Role
{
    public Role()
    {
        Users = new Collection<User>();
    }

    public int RoleId { get; set; }
    public string RoleName { get; set; }
    public ICollection<User> Users { get; set; }
} 
```

我通过覆盖种子方法用以下数据播种了它

```
 var firstUser = new User {UserName = "vivekr"};
        var secondUser = new User {UserName = "vivekm"};

        var firstRole = new Role {RoleName = "admin"};
        var secondRole = new Role {RoleName = "user"};

        firstUser.Roles.Add(firstRole);
        firstUser.Roles.Add(secondRole);

        secondUser.Roles.Add(firstRole);

        context.Users.Add(firstUser);
        context.Users.Add(secondUser); 
```

映射是通过重写 OnModelCreating() 来完成的

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<User>()
                .HasMany<Role>(r=> r.Roles)
                .WithMany(u => u.Users)
                .Map(c=>
                         {
                             c.MapLeftKey("UserId");
                             c.MapRightKey("RoleId");
                             c.ToTable("UserRoles");
                         });
        } 
```

所有表都正确创建，我可以看到值是正确的（包括映射）

但是我在获取数据时有问题

如果我这样做（假设 db 是我的 Context 类的一个实例）

```
var selectedRoles = db.Users.Find(1).Roles; 
```

我得到 selectedRoles 的计数为 0。它应该是 2。我不知道为什么会这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:35:19.207

您需要使用 Include()。当您使用包含时，您不能再使用查找。尝试这样的事情：

db.Users.Include("角色").FirstOrDefault(x => x.UserId == 1).Roles;

实体框架不会自动为您加载相关对象。您必须通过像上面那样急切地获取或使用延迟加载来告诉它这样做。

[这是一篇很好的文章，解释了提取相关数据的不同技术。](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)

# php - 如何使用 MATCH() AGAINST() 搜索数字

> ID：14281455
> 
> 赞同：0
> 
> 时间：2013-01-11T15:36:05.563
> 
> 标签：php, mysql

我有一列名为：`name`，类型：`text`，`FULLTEXT`索引

我尝试`name`使用此查询在列中查找 IP 地址：

```
SELECT * FROM `data` WHERE  MATCH(ip) AGAINST ('127.0.0.1') 
```

但结果我得到了 0 ，它只适用于字母，而不适用于数字。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:40:50.030

尝试 `SELECT * FROM data WHERE ip LIKE '%127.0.0.1%'`

或者如果 IP 地址在名称列中，则 `SELECT * FROM data WHERE name LIKE '%127.0.0.1%'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:48:57.533

`ip`字段包含什么？它是单个 IP 地址还是它们的负载？

如果只是单个地址，则不需要使用`MATCH`or`LIKE`或任何其他专家查询；只需使用`=`. IE：

```
SELECT * FROM data WHERE ip = '127.0.0.1' 
```

如果每条记录中有多个 IP 地址，我建议您考虑将其拆分到单独的交叉引用表中，因为当您需要进行此类搜索查询时，它会使事情变得更容易管理。然后答案再次恢复为仅使用`=`，并在 IP 表上加入。

```
SELECT * FROM data d
INNER JOIN ipAddresses i on i.dataID=d.id
WHERE i.ip = '127.0.0.1' 
```

# mysql - 错误：违反完整性约束：1052 列

> ID：14281456
> 
> 赞同：5
> 
> 时间：2013-01-11T15:36:06.693
> 
> 标签：mysql, sql, cakephp-2.1

为什么我得到这个？

错误：SQLSTATE [23000]：违反完整性约束：1052 字段列表中的“收藏夹”列不明确

```
SQL Query: UPDATE `twitter`.`tractions` AS `Traction` LEFT JOIN `twitter`.`profiles` AS `Profile` ON (`Traction`.`profile_id` = `Profile`.`id`) SET `Traction`.`favorites` = `favorites` + 1, `Traction`.`errors` = `errors` + 0 WHERE `Traction`.`profile_id` = 4 AND `Traction`.`date` = '2013-01-11' 
```

CakePHP 代码：

```
$this->Traction->updateAll(array(
                "Traction.favorites"=>"`favorites` + $favorites",
                "Traction.errors"=>"`errors` + $errors"
                ), array(
                'Traction.profile_id'=>$profile['Profile']['id'],
                'Traction.date'=>date('Y-m-d')
            )); 
```

-- 表的表结构`tractions`

```
CREATE TABLE IF NOT EXISTS `tractions` (
  `id` int(10) NOT NULL auto_increment,
  `date` date default NULL,
  `profile_id` int(10) default NULL,
  `followings` int(10) default '0',
  `unfollowings` int(10) default '0',
  `favorites` int(10) default '0',
  `retweets` int(10) default '0',
  `thanks` int(10) default '0',
  `errors` int(10) default '0',
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-11T15:38:36.517

您需要指定 tableName，因为多个表包含相同的列名，

```
"Traction.favorites"=>"Traction.`favorites` + $favorites" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T15:47:36.093

显然这两个表都包含该列`favorites`，也可能包含该列`errors`

当您加入第二张桌子时，您可能想要设置`Traction.favorites = Profile.favorites + $favorites`和`Traction.errors = Profile.errors + $errors`

正如JW所说。您需要使用完整的标识符

# linq - 与 LINQ 不同

> ID：14281457
> 
> 赞同：0
> 
> 时间：2013-01-11T15:36:07.447
> 
> 标签：linq, distinct

```
 var sourceId =
            (from workstation in db.station
             join letter in db.letter on workstation.id equals letter.Site_Id
             where ThatDate < DateTime.Now.AddYears(-1)
             select workstatio).ToList(); 
```

这会产生一个列表，如果不止一个，它将打印出重复，我该如何使用.distinct？

请指教，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:37:43.727

```
 var sourceId =
            (from workstation in db.station
             join letter in db.letter on workstation.id equals letter.Site_Id
             where ThatDate < DateTime.Now.AddYears(-1)
             select workstation).Distinct().ToList(); 
```

看看这个

[http://msdn.microsoft.com/en-us/library/bb338049.aspx](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:24:54.133

您可能想看看[MoreLinq中的](http://code.google.com/p/morelinq/)[DistinctBy](http://code.google.com/p/morelinq/wiki/OperatorsOverview)方法。您可以在其中将 lambda 表达式作为参数传递。

在您的示例中，它看起来类似于：

```
var sourceId =
        (from workstation in db.station
         join letter in db.letter on workstation.id equals letter.Site_Id
         where ThatDate < DateTime.Now.AddYears(-1)
         select workstatio).DistinctBy(ws => ws.Id).ToList(); 
```

您还可以将 DistinctBy 与多个属性一起使用：

```
var sourceId =
        (from workstation in db.station
         join letter in db.letter on workstation.id equals letter.Site_Id
         where ThatDate < DateTime.Now.AddYears(-1)
         select workstatio).DistinctBy(ws => new {Id = ws.Id, OtherProperty = ws.OtherProperty}).ToList(); 
```

顺便说一句，匿名类型实例的相等性不是引用比较，而是通过比较它们的每个属性来确定的。

我最近发现了一个关于这个主题的有趣讨论，其中 Anders Hejlsberg 本人提出了这个问题的解决方案。你可以在[这里阅读。](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/6834054e-e1c1-49db-970c-370a9012c675)

# c# - VB.NET 和 C# 中的日期时间

> ID：14281461
> 
> 赞同：7
> 
> 时间：2013-01-11T15:36:25.087
> 
> 标签：c#, .net, vb.net, datetime, value-type

我有两个问题：

1.  `Date`和`DateTime`：它们在 VB 中是不同的还是相同的？

2.  `DateTime`在VB中可以赋值为Nothing，而在C#中不能赋值为null。作为一个结构，它不能为空。那么为什么它在 VB 中被允许呢？

---VB.NET-----

```
Module Module1

    Sub Main()
        Dim d As Date = Nothing
        Dim dt As DateTime = Nothing

        d = CType(MyDate, DateTime)

    End Sub

    Public ReadOnly Property MyDate As DateTime
        Get
            Return Nothing
        End Get
    End Property

End Module 
```

---C#.NET-----

```
class Program
    {
        static void Main(string[] args)
        {
            DateTime dt = null;//compile time error            
        }
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T15:38:29.160

`Nothing`在 VB.NET 中与`null`在 C# 中不同。它还具有`default`C# 中的功能，当您在`System.DateTime`.

所以两者，`Date`并`DateTime`引用相同的结构`System.DateTime`和

```
Dim dt As Date = Nothing 
```

实际上是一样的

```
Dim dt = Date.MinValue 
```

或（在 C# 中）

```
DateTime dt = default(DateTime); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T15:38:38.157

在c#中你可以使用`default`关键字

```
DateTime dt = default(DateTime); 
```

`Date`并且`DateTime`在 VB.NET 中是相同的。`Date`只是[别名](http://msdn.microsoft.com/en-us/library/47zceaw7.aspx)_`DateTime`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T15:40:01.090

在 vb.net中`Date`只是[.](http://msdn.microsoft.com/en-us/library/47zceaw7.aspx)`DateTime`

VB 中存在的一些别名用于遗留目的，以帮助从 vb6 应用程序进行转换。

# javascript - 尽管 e.preventDefault 在 mousedown 上取消选择操作

> ID：14281462
> 
> 赞同：1
> 
> 时间：2013-01-11T15:36:27.677
> 
> 标签：javascript, events, preventdefault, rte

我正在从头开始创建一个非常简单的 RTE，旨在仅与新浏览器一起使用。

一切正常，除了在 Opera 中我无法让它在按下工具栏时停止取消选择文本。我创建了一个简单的页面来测试这是否是我的小程序的一部分，或者它是否总是发生，并且确实如此。

例如，我用一些代码创建了一个页面，这在除 Opera 之外的所有大型浏览器中都可以正常工作：

```
<p id="tmp">This text cannot be selected</p>
<p id="lispsum">Lorem ips...im id est laborum.</p>
<script type="text/javascript">
var el = document.getElementById('tmp');
el.addEventListener('mousedown', function(evt) {
    evt.preventDefault();
}, false);
</script> 
```

在 Chrome 和 Firefox 等浏览器中，选择“lipsum”段落中的一些文本，然后单击“tmp”段落会保留所选内容。在 Opera（在版本 12 中测试）它取消选择它。如果按住鼠标，则只有在光标未移动时才会取消选择。因此，在 Opera 中，“非拖动”（即长按）和“单击并拖动”之间的行为有所不同。

我尝试过使用 evt.stopPropagation() 方法，evt.returnValue = false; 并返回假；像这样添加到处理程序中：

```
el.addEventListener('mousedown', function(evt) {
    if(evt.stopPropagation) evt.stopPropagation();
    if(evt.preventDefault) evt.preventDefault();
    if(evt.returnValue) evt.returnValue = false;
    return false;
}, false); 
```

然后，我为以下事件添加了相同的处理程序：mouseup、mousedown、mouseout、click、select、selectstart 和 selectchange。没有任何帮助。

我还尝试使用 jQuery 方法“disableSelection()”：

```
$("#tmp").disableSelection(); 
```

但行为是相同的，元素中的文本不可选择，但在其中单击仍会取消选择任何先前的选择。

还有其他人遇到这个问题吗？非常令人沮丧。

编辑：再次阅读我的评论并进行一些测试，我可以得出结论，由于长按和单击并拖动之间的区别，“单击”事件中一定存在错误。在这两种情况下都会触发 mouseup 事件，但只有在光标未移动时才会触发单击（即文本被取消选中时）。

# soa - Web 服务战争粒度最佳实践

> ID：14281466
> 
> 赞同：1
> 
> 时间：2013-01-11T15:36:45.183
> 
> 标签：soa

在每次战争中进行大量小型部署和少量 Web 服务，还是在每次战争中进行一次大型部署和大量 Web 服务更好？

在这种情况下，假设所有的 Web 服务共享一个共同的后端并且将从代码共享中受益。对于小型战争，必须将共享代码放入 jar 项目中，并包含在所有较小的部署中。现在每场战争都可以单独测试/部署，但如果后端发生变化，它们都需要更新，而不仅仅是一个。

在这种情况下，后端是供应商提供的另一个 Web 服务。它的更新通常是向后兼容的，但并非总是如此。

我知道没有明确的答案，但分享的任何经验都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:24:21.607

通常，您希望每个服务进行一场战争。关键是服务不必是单个 Web 服务（事实上，某些端点可以是其他技术，而不仅仅是 Web 服务）。一个服务可以公开多个端点和契约。您可以将相关合同组合在一起，例如处理用户管理的服务可以为用户和组提供 API。然而，与订单相关的 API 可能属于不同的服务（因此属于战争）。如果你对太小的服务片段进行切片，你会得到我所说的[纳米服务反模式](http://arnon.me/wp-content/uploads/2010/10/Nanoservices.pdf)，其中服务的开销大于你从中获得的实用程序

![在此处输入图像描述](../Images/ba11ebacaaba3e16f1e1b55455afbfb8.png)

# sql - 在共享的第三个表中按值过滤来自 2 个表的数据联合的最佳方法

> ID：14281467
> 
> 赞同：0
> 
> 时间：2013-01-11T15:36:47.660
> 
> 标签：sql, oracle

例如，假设有 3 个表：

物理项目

```
ID
SELLER_ID
NAME
COST
DIMENSIONS
WEIGHT 
```

数字项目

```
ID
SELLER_ID
NAME
COST
DOWNLOAD_PATH 
```

卖方

```
ID
NAME 
```

项目 ID 保证在两个项目表中都是唯一的。我想使用类型标签按顺序选择给定卖家的所有商品 ID。我想出了：

查询 A

```
SELECT PI.ID AS ID, 'PHYSICAL' AS TYPE
    FROM PHYSICAL_ITEM PI
        JOIN SELLER S ON PI.SELLER_ID = S.ID
    WHERE S.NAME = 'name'
UNION
SELECT DI.ID AS ID, 'DIGITAL' AS TYPE
    FROM DIGITAL_ITEM DI
        JOIN SELLER S ON DI.SELLER_ID = S.ID
    WHERE S.NAME = 'name'
    ORDER BY ID 
```

查询 B

```
SELECT ITEM.ID, ITEM.TYPE
    FROM (SELECT ID, SELLER_ID, 'PHYSICAL' AS TYPE
              FROM PHYSICAL_ITEM
          UNION
          SELECT ID, SELLER_ID, 'DIGITAL' AS TYPE
              FROM DIGITAL_ITEM) AS ITEM
        JOIN SELLER ON ITEM.SELLER_ID = SELLER.ID
    WHERE SELLER.NAME = 'name'
    ORDER BY ITEM.ID 
```

查询 A 似乎是最有效的，但它看起来也不必要地重复（2 个表连接到同一个表，2 个 where 子句在同一个表列上）。查询 B 在某种程度上对我来说看起来更干净（没有重复），但它看起来效率也低得多，因为它有一个子查询。可以这么说，有没有办法两全其美？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:41:41.070

在这两种情况下，将 替换`union`为`union all`。 `Union`不必要地删除重复项。

我希望查询 A 更有效，因为优化器在执行连接时有更多信息（尽管我认为 Oracle 即使在联合之后也能很好地使用索引）。此外，第一个查询减少了并集之前的数据量。

然而，这只是一种意见。真正的测试是对两个查询进行计时——多次以避免缓存填充延迟——看看哪个更好。

# python - 如何使用 Python 在 PDF 中插入“缺失”页面作为空白页面？

> ID：14281468
> 
> 赞同：1
> 
> 时间：2013-01-11T15:36:50.437
> 
> 标签：python, pdf, pypdf

假设您必须加入一些编号为 2、4 和 5 的页面……（文件名为 test_002.pdf、test_004.pdf 和 test_005.pdf），那么我们可以说缺少第 3 页。

我尝试做的是从这些命令中得到结果：

```
pdfjam --nup 2 --papersize '{47cm,30cm}' --scale 1.0 test_002.pdf test_003.pdf --outfile joined_002-003.pdf
pdfjam --nup 2 --papersize '{47cm,30cm}' --scale 1.0 test_004.pdf test_005.pdf --outfile joined_004-005.pdf 
```

这将把偶数页和奇数页连接到一个唯一的页面中，并用空白页 (3) 代替丢失的页面。

我想它应该：

1.  从头到尾检查传入的文件以查找缺少的页面（在这种情况下，从 2 到 5 缺少 #3）
2.  即时生成空白的 '23.5cm,30cm' pdf 页面（可能使用 pyPdf）
3.  将它们分类为“偶数”和“奇数”，以便能够加入每个偶数页面（使用 pdfjam）......

我对吗？

这可能与某些 Python 行有关吗？或者有没有更简单的方法？

因为这就是我开始做的事情，让它像一个热文件夹一样工作，但我真的完全迷失在偶数和奇数管理中，并且缺少“文件/页面”：

```
#!/usr/bin/python
# -*- coding: UTF8 -*-

import os
import os.path
import re
import time
import datetime

CODEFILE = re.compile("^(TES|EXA).*\.pdf$")
WHERE = "/tmp/TEST/"
STORAGE = "/tmp/WORK/"
DBLSIZE = "{47cm,30cm}"

def time_stamp():
    now = datetime.datetime.now()

    return now.strftime("%Y-%m-%d %H:%M:%S")

print(time_stamp()+" : Starting.")

def files_list(path):
    this_files = list()

    root, dires, files = os.walk(path).next()
    for f in files:
        if CODEFILE.match(f):
            this_files.append(os.path.join(root, f))

    return this_files

def file_sizes(filename):
    meta = os.lstat(filename)

    return meta.st_size

def files_to_handle(path):
    this_files = list()
    ft1 = dict()
    ft2 = dict()

    for f in files_list(WHERE):
        ft1[f] = file_sizes(f)

    time.sleep(10)

    for f in files_list(WHERE):
        ft2[f] = file_sizes(f)

    for f, t in ft2.items():
        try:
            if ft1[f] == t:
                this_files.append(f)
        except:
            pass

    return this_files

r = files_to_handle(WHERE)
print(time_stamp()+" : Files available :")
print(r)

for f in r:
    rc = os.system("pdfjam --batch --nup 2 --papersize {1} --scale 1.0 --outfile . {2}".format(
            DBLSIZE, f))
    if rc != 0:
        print(time_stamp()+" : an ERROR as occured with the file {0}.".format(f))
    else:
        print(time_stamp()+" : files {0} OK.".format(f))
        os.system("mv {0} {1}".format(f, STORAGE))

print(time_stamp()+" : Stopping.") 
```

提前致谢！

# java - 处理带有时间戳的百万行文件的最快方法

> ID：14281469
> 
> 赞同：0
> 
> 时间：2013-01-11T15:36:52.373
> 
> 标签：java, performance, perl

所以我有这些巨大的文本文件，每行都用一个逗号分隔的记录填充。我需要一种逐行处理文件的方法，删除符合特定条件的行。一些删除很容易，例如其中一个字段小于某个长度。最难的标准是这些行都有时间戳。许多记录是相同的，除了它们的时间戳，我必须删除所有记录，除了一个相同且在 15 秒内彼此相隔的记录。

所以我想知道其他人是否可以为此提出最佳方法。我确实想出了一个用 Java 编写的小程序来完成这项任务，使用 JodaTime 作为时间戳的东西，这使它变得非常容易。但是，我最初编写程序时遇到了 OutofMemory Heap Space 错误。我对代码进行了一些重构，大部分看起来都还可以，但我仍然相信它存在一些内存问题，因为有时程序似乎会挂断。这似乎需要的时间太长了。我不确定这是否是内存泄漏问题、糟糕的编码问题，或者完全是其他问题。是的，我尝试显着增加堆大小，但仍然遇到问题。

我会说该程序需要使用 Perl 或 Java。我也许也可以制作 python 脚本，但我对 python 并不太熟悉。正如我所说，由于 JodaTime 库，时间戳的东西在 Java 中是最简单的（对我来说）。我不确定如何在 Perl 中完成时间戳。但我愿意学习和使用最有效的方法。

我还将添加正在读取的文件，这些文件的大小差异很大，但一些大文件大约 100Mb，大约有 130 万条记录。

我的代码本质上是读入所有记录并将它们放入一个 Hashmap 中，其中键是类似记录将共享的记录中数据的特定子集。所以记录的一个子集不包括不同的时间戳。这样，您最终会得到一些具有相同数据但发生在不同时间的记录。（所以完全一样减去时间戳）。

然后，每个键的值是具有相同数据子集的所有记录的集合。然后我简单地遍历 Hashmap，获取每个集合并遍历它。我记录了第一条记录并将其时间与其他所有记录进行比较，看看它们是否在 15 秒内。如果是这样，则删除该记录。一旦该集合完成，它就会被写入一个文件，直到所有记录都完成。希望这是有道理的。

这行得通，但显然我这样做的方式太占用内存了。有人对更好的方法有任何想法吗？或者，我可以在 Perl 中执行此操作的方法实际上会很好，因为尝试将 Java 程序插入到当前实现中会导致许多其他问题。虽然也许这只是因为我的记忆问题和糟糕的编码。

最后，我不是要求别人为我编写程序。伪代码很好。虽然如果您对 Perl 有想法，我可以使用更多细节。我不确定如何在 Perl 中做的主要事情是时间比较的东西。我对 Perl 库进行了一些研究，但没有看到像 JodaTime 这样的东西（尽管我看的不多）。任何想法或建议表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:42:05.477

读取所有行并不理想，因为您需要将全部内容存储在内存中。

相反，您可以逐行阅读，写出您想要保留的记录。您可以保留之前命中的行的缓存，限制在当前程序的 15 秒内。在非常粗略的伪代码中，对于您阅读的每一行：

```
var line = ReadLine()
DiscardAnythingInCacheOlderThan(line.Date().Minus(15 seconds);
if (!cache.ContainsSomethingMatchingCriteria()) {
   // it's a line we want to keep
   WriteLine(line);
}

UpdateCache(line);  // make sure we store this line so we don't write it out again. 
```

正如所指出的，这假设这些行按时间戳顺序排列。如果它们不是，那么我会使用 UNIX`sort`来实现它们，因为这样可以非常愉快地处理非常大的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:56:21.727

您可能会读取文件并仅输出要删除的行号（在单独的通道中进行排序和使用）。然后您的哈希映射可能只包含所需的最少数据加上行号。如果所需的数据与行大小相比较小，这可以节省大量内存。

# c# - DataGridView：使用数组或列表添加新行

> ID：14281473
> 
> 赞同：4
> 
> 时间：2013-01-11T15:37:12.843
> 
> 标签：c#, list, datagridview

我的表单中有两个列表框元素。listbox1 中的项目代表我的 DataGridView 中的列，我的 listbox2 中的项目代表我的 DataGridView 中的行。

```
foreach (var el in listBox1Elements)
{
// code...
dataGridView1.Columns.Add(col);
} 
```

由于可以添加或删除 listbox1 中的项目，因此我当前的解决方案存在问题。

```
dataGridView1.Rows.Add("test","some","data","even","more","data"); 
```

我想知道是否有使用列表的解决方案。然后我的代码可能看起来像这样：

```
foreach (var el in listBox2Elements)
{
   myList.add("some text");
}
dataGridView1.Rows.Add(myList); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T16:06:37.537

就像是

```
 foreach (var el in listBox2Elements)
            myList.add("some text");

        foreach (var item in myList)
            dataGridView1.Rows.Add(item.., item.., item..); 
```

或者

```
dataGridView1.DataSource = myList.ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T19:58:50.430

怎么样：

```
foreach (var el in listBox2Elements)
{
   myList.add("some text");
}
dataGridView1.Rows.Add(myList.ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:42:05.403

好吧，如果没有 store 对象，那是一项艰巨的任务。你可以很容易地去那里：

```
//Not taking guarantee for this approach
Store.DataSource.add(new object[]{"some text"});
Store.DataBind(); 
```

或者您定义一个新的数据源对象并用列表项（通过循环）填充它，然后在执行以下操作后再次执行：

```
(list<string>) data_list.add("some text");
//repopulate data object and set a Store.DataSource;
Store.dataBind(); 
```

对于删除对象，您将从`list<string>`项目中删除它们并像上面一样更新商店

```
//population for the data object:
for(int x=0; x<= data_list.length(); x++)
{
 data.add(new object[]{data_list[x]});
} 
```

# php - Zend 表单和 URL 参数

> ID：14281478
> 
> 赞同：0
> 
> 时间：2013-01-11T15:37:34.603
> 
> 标签：php, forms, zend-framework, parameters

我有一个 Zend 表单和这个表单的 URL。

URL 有 3 个参数 firstname、lastname 和 email。在我的表单中，我有 3 个输入字段，其中还有名字、姓氏和电子邮件。

每当我提交表格时。它从 URL 参数而不是表单输入字段中获取值。

有没有办法在表单中获取值？

我知道来自 url 的参数与表单输入字段同名*

网址：[http ://mywebsite.com/thank-you?key=e72671a8640b45c2401afe887b9b530a&](http://mywebsite.com/thank-you?key=e72671a8640b45c2401afe887b9b530a&) **first_name** =First& **last_name** =User& **email** =user_3fdfsdfs@gmail.com

Zend 动作控制器的形式：

```
$signupForm = new Application_Form_UserSignUp();
if ($signupForm->isValid($this->getRequest()->getParams()))
        {

            $user = $this->_helper->model('Users')->createRow($signupForm->getValues());   
            if ($user->save())
            {
                Zend_Session::rememberMe(186400 * 14);
                Zend_Auth::getInstance()->getStorage()->write($user);
                $user->sendSignUpEmail();
                $this->getHelper('redirector')->gotoRoute(array(), 'invite');
                return;
            }
        }
$this->view->signupForm = $signupForm; 
```

Zend 形式：

```
class Application_Form_UserSignUp extends Zend_Form
{
public $first_name, $last_name, $email, $submitButton;

public function init()
{
    $this->setName('signupForm'); 

    $this->first_name = $this->createElement('text', 'first_name')->setRequired(true);
    $this->last_name = $this->createElement('text', 'last_name')->setRequired(true);

    // Check if email is duplicated in database
    $noEmailExists = new Zend_Validate_Db_NoRecordExists(
            array(
                'table' => 'users',
                'field' => 'email'
            )
        );
    $noEmailExists->setMessage('%value% is already used by another person, please try again with different email address', Zend_Validate_Db_Abstract::ERROR_RECORD_FOUND);

    $this->email = $this->createElement('text', 'email')
                     ->setLabel('Email')
                     ->addValidator($noEmailExists)
                     ->addValidator('EmailAddress')
                     ->setRequired(true);

    $this->submitButton = $this->createElement('button', 'save')
                            ->setLabel('Sign Up')
                            ->setAttrib('type', 'submit');

    $this->addElements(array($this->first_name, $this->last_name, $this->email, $this->submitButton));

    $elementDecorators = array(
        'ViewHelper'
    );
    $this->setElementDecorators($elementDecorators);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:55:44.010

在您的控制器 Action 中，您可以将值传递给 Zend_Form 对象：

```
$form->populate($data); 
```

或 $form->setDefaults($data);

populate() 接受一个数组，其中键是表单字段的名称，数组值是字段值。

[http://framework.zend.com/manual/1.12/en/zend.form.forms.html#zend.form.forms.elements.values](http://framework.zend.com/manual/1.12/en/zend.form.forms.html#zend.form.forms.elements.values)

# ruby - Chef 中的动态角色属性

> ID：14281483
> 
> 赞同：4
> 
> 时间：2013-01-11T15:37:48.503
> 
> 标签：ruby, chef-infra

我希望 Chef 食谱`network_interfaces`为我的每个节点提供 ip 地址、网络掩码等的动态值。对我有用的是以下内容：

db_role.rb (block1):

```
override_attributes(
  "network_interfaces" => {
      :device => 'eth0',
      :address => '123.123.123.123',
  }
) 
```

但这不是很动态。我的想法是将 ip 地址（、网络掩码等）提交给`knife bootstrap`.

然后节点看起来像这样（block2）：

```
{
    "normal": {
      "network_interfaces" => {
          "device" : "eth0",
          "address" : "123.123.123.123"
      }
    },
    "name": "foobar",
    "run_list": [
       "recipe[zsh]",
       "role[networking_interfaces]"
    ]
} 
```

不幸的是，`network_interfaces`食谱默认情况下不会选择这些值。我的想法是在角色定义中引用 block2 中显示的节点特定属性，如下所示：

```
override_attributes(
  "network_interfaces" => {
      :device => node['network_interfaces']['device'],
      :address => node['network_interfaces']['address'],
  }
) 
```

这不起作用，因为它显然不是 json 并且 Chef 无法处理角色文件中动态分配的值。

我怎样才能实现运行`network_interfaces`配方并将我的节点特定值传递给它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T16:04:54.403

Maciej，我听从了你的建议。我在引导时使用 -j 选项上传自定义参数，如 IP、广播等。

```
knife bootstrap IP_OF_THE_NODE -r 'role[main_application]' -j '{ "network_interfaces" : {"device" : "eth1.0000", "type" : "static", "address" : "192.168.1.1", "netmask" : "255.255.255.0", "broadcast" : "192.168.0.255","gateway": "192.168.0.1"}}' 
```

另外我写了一个自定义配方来实现动态匹配。这是代码：

```
#setup a custom network config per vm
network_interfaces node["network_interfaces"]["device"] do
  Chef::Log.info("Compiling network_interfaces")
  target node["network_interfaces"]["address"]
  mask node["network_interfaces"]["netmask"]
  broadcast node["network_interfaces"]["broadcast"]
  gateway node["network_interfaces"]["gateway"]
  custom node["network_interfaces"]["custom"]
  action :save
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:12:17.527

# c# - C# 使用两个不同的相等比较器

> ID：14281489
> 
> 赞同：3
> 
> 时间：2013-01-11T15:37:57.033
> 
> 标签：c#

我需要为业务对象编写第二个相等比较器。它是一个专门的相等比较器，仅适用于某些情况。我不想覆盖 Equal()，因为我们的持久层使用它在内部比较对象以供自己使用。让我给你一个类的例子：

```
public class Product : BusinessObjectBase
{
    string Name  {get;set;}
    string Desc  {get;set;}
    double Price {get;set;}
} 
```

由于我们在数据访问层中将这三个属性标记为持久数据属性，因此 BusinessObjectBase 中的 Equals() 会比较这些属性。现在，在特定情况下，我想检查产品 A 是否等于产品 B 只是名称。我不想硬编码支票上的实际属性，因为这个属性以后可能会改变。

虽然可以在这里使用 IComparer，但根据 MSDN 上的描述，IComparer 不应该用于等同项，而是用于对它们进行排序，因此这似乎不是 100% 正确的答案。我想使用 .NET 已有的东西，而不是创建另一个接口。做这个的最好方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T15:39:13.243

你正在寻找`IEqualityComparer<T>`.

# php - 从 index.html 随机重定向到另一个文件

> ID：14281499
> 
> 赞同：0
> 
> 时间：2013-01-11T15:38:26.930
> 
> 标签：php, javascript, web

**每次**用户访问我的主页时，即`index`我希望运行脚本的文件，因此每次都会查看我网站的不同且**随机的页面。**

我宁愿在 Javascript 或 PHP 中执行此操作。我想象的索引文件的伪代码看起来像这样：

```
var randomNumber = functionThatReturnsRandomNumber(10);
var urlRedirect; 

if (randomNumber == 0)
    urlRedirect = 'xxxx.com/folder0/index.html

if (randomNumber == 1)
    urlRedirect = 'xxxx.com/folder1/index.html

if (randomNumber == 2)
    urlRedirect = 'xxxx.com/folder2/index.html

...

if (randomNumber == 9)
    urlRedirect = 'xxxx.com/folder9/index.html 
```

然后是一些将浏览器重定向到的代码`urlRedirect.`

~~有什么想法吗？~~

编辑

我想我需要更明确一点。有人可以建议我如何完成上述工作吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:42:05.763

+1 以获得出色的用户体验。

作为用户，您最好在 PHP 级别上这样做，否则不可避免地会出现打嗝`loading->page glimpse->loading->new page`（作为访问者，如果发生这种情况，我会觉得很粗略）。

但是，只要您有一个“可能的目的地”列表，您就可以在您的顶部使用类似以下的内容`index.php`：

```
<?php
  $possibilities = array(/*...*/);
  header('Location: ' + $possibilities[rand(0, count($possibilities) - 1)]); 
```

尽管我可能会将其与会话或 cookie 结合起来，因此它仅在第一次访问时有效（除非您希望它每次都有效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:41:56.553

使用重定向标头。

```
 <?php
 $location = "http://google.com";
 header ('HTTP/1.1 301 Moved Permanently');
 header ('Location: '.$location);
 ?> 
```

对于随机重定向：

```
<?php
$urls = array('http://1.com',"http://2.com","http://3.com"); //specify array of possible URLs
$rand = rand(0,count($urls)-1); //get random number between 0 and array length
$location = $urls[$rand]; //get random item from array
header ('HTTP/1.1 301 Moved Permanently'); //send header
header ('Location: '.$location);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:43:50.890

如果您要使用 Javascript，请使用`var randomnumber=Math.floor(Math.random()*11);`生成 1 到 10 之间的随机数。然后使用`window.location.href=urlRedirect;`将用户重定向到您选择的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:43:53.233

使用 PHP：

```
<?php
$randomNumber = rand(10);
$urlRedirect = '';

if ($randomNumber == 0)
    $urlRedirect = 'xxxx.com/folder0/index.html';

if ($randomNumber == 1)
    $urlRedirect = 'xxxx.com/folder1/index.html';

if ($randomNumber == 2)
    $urlRedirect = 'xxxx.com/folder2/index.html';

...

if ($randomNumber == 9)
    $urlRedirect = 'xxxx.com/folder9/index.html';

header ('Location: '.$urlRedirect); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-16T09:05:14.487

**重定向到随机子目录：**

```
<?php 
$myLinks = array("dir-1/", 
    "dir-2/",
    "dir-3/",
    "dir-4/",
    "dir-5/");

$randomRedirection = $myLinks[array_rand($myLinks)]; 
header("Location: $randomRedirection"); 
?> 
```

**重定向到随机网站：**

```
<?php 
$myLinks = array("http://www.my-site.ie", 
    "http://www.my-site.eu",
    "http://www.my-site.de", 
    "http://www.my-site.it", 
    "http://www.my-site.uk");

$randomRedirection = $myLinks[array_rand($myLinks)]; 
header("Location: $randomRedirection"); 
?> 
```

# jquery - 如何选择具有焦点的元素？

> ID：14281500
> 
> 赞同：2
> 
> 时间：2013-01-11T15:38:26.710
> 
> 标签：jquery

> **可能重复：**
> [如何使用 jQuery 选择关注它的元素](https://stackoverflow.com/questions/516152/how-to-select-an-element-that-has-focus-on-it-with-jquery)

我在页面上有几个 HTML 元素。我想编写一个 JQuery 代码来告诉我哪个元素具有焦点。我不知道该元素是否因为我单击它或我使用了 Tab 键而获得焦点。最重要的想法是它告诉我哪个元素有焦点

```
$(document).ready(function () {

}); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:39:53.150

`document.activeElement`应该返回焦点所在的当前元素。

> 返回当前获得焦点的元素，即如果用户键入任何键，将获得击键事件的元素。该属性是只读的。

**参考：** [https ://developer.mozilla.org/en-US/docs/DOM/document.activeElement](https://developer.mozilla.org/en-US/docs/DOM/document.activeElement)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:40:23.697

```
var focusedElement = $(':focus'); 
```

# sql - 德尔福/访问选择 SQL 错误

> ID：14281502
> 
> 赞同：1
> 
> 时间：2013-01-11T15:38:33.480
> 
> 标签：sql, delphi, ms-access, ms-access-2010, unidac

我正在使用 UNIDAC TUniQuery 组件，这是我的 sql：

```
q_ContribSem2.Close;
q_ContribSem2.SQL.Clear;
q_ContribSem2.SQL.Add('SELECT SUMINISTRO.SUMTITIPOPERSONA, SUMINISTRO.SUMCHRAZONSOCIAL, SUMINISTRO.SUMCHAPELLIDOPATERNO,');
q_ContribSem2.SQL.Add('SUMINISTRO.SUMCHAPELLIDOMATERNO, SUMINISTRO.SUMCHNOMBRES, SUMINISTRO.SUMchCodigo, SUMINISTRO.SUMTITIPOCALLE, ');
q_ContribSem2.SQL.Add('SUMINISTRO.SUMCHNOMBRECALLE, SUMINISTRO.SUMCHNUMEROCALLE, SUMINISTRO.OBSERVACIONESMEDIDOR ');
q_ContribSem2.SQL.Add('FROM SUMINISTRO ');
q_ContribSem2.SQL.Add('WHERE ((((SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + 'NVO*' + chr(39) + ' Or ');
q_ContribSem2.SQL.Add('(SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + 'NUEVO*' + chr(39) + ') And');
q_ContribSem2.SQL.Add('((SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + '*JULIO*' + chr(39) + ' Or ');
q_ContribSem2.SQL.Add(' (SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + '*AGOSTO*' + chr(39) + ' Or ');
q_ContribSem2.SQL.Add(' (SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + '*SETIEMBRE*' + chr(39) + ' Or ');
q_ContribSem2.SQL.Add(' (SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + '*OCTUBRE*' + chr(39) + ' Or ');
q_ContribSem2.SQL.Add(' (SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + '*NOVIEMBRE*' + chr(39) + ' Or ');
q_ContribSem2.SQL.Add(' (SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + '*DICIEMBRE*' + chr(39) + ') And ');
q_ContribSem2.SQL.Add(' (SUMINISTRO.OBSERVACIONESMEDIDOR) Like ' + chr(39) + '*' + cboAnio.Text + '*' + chr(39) + '));');
q_ContribSem2.Open; 
```

* * *

该语句在 ACCESS 中返回行，但在 Delphi 中返回零行...

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:24:06.313

在常规 SQL 中，星号字符*不是*通配符。表示“匹配任何内容”的通配符是*百分号*, `%`。Unidac 提供“独立于服务器的 SQL”，这可能意味着它接受你给它的 SQL，它应该是 Unidac 可识别的方言，*并将*其转换为你所针对的数据库的方言，所以你编写的 SQL需要对 Unidac 有效，不一定对您的实际目标数据库有效。Unidac 将处理翻译。如果有的话，Unidac 可能会使用您的星号并将其*转义*，以便目标数据库最终收到对其中包含*实际*星号的字段的请求。

* * *

自己确定这一点的一种方法是首先削减你的 SQL，直到它*确实*返回一些东西。然后，您可以逐渐重新添加所需查询的片段，直到它再次开始失败，此时您已经确定您的程序遇到了哪些 SQL 问题。

您可能还希望考虑将日期存储为*日期*字段，而不是将它们存储为西班牙语*文本*。这将大大简化您的查询。

另外，请注意不要`cboAnio.Text`直接合并到您的查询中。它可能提供*SQL 注入*漏洞。为避免这种情况，请使用参数化查询。

# ruby-on-rails-3.2 - Rails 3.2 引擎 - 路由在测试用例中不起作用

> ID：14281505
> 
> 赞同：1
> 
> 时间：2013-01-11T15:38:37.990
> 
> 标签：ruby-on-rails-3.2, functional-testing, rails-engines, rails-admin

我在我的应用程序中安装了[RailsAdmin](https://github.com/sferik/rails_admin)引擎（根据 wiki 的说明），使用

> mount RailsAdmin::Engine => '/backend', :as => 'rails_admin'

我不得不从引擎中扩展一个控制器来添加一个 before_filter。在开发中运行我的应用程序时，我的扩展程序和其他引擎功能运行良好。

**但是，我在使用 Test::Unit**为我的 before_filter编写功能测试时遇到了问题。过滤器在正确的时刻启动并按预期工作，但是一旦前过滤器“调整”的操作重定向到索引（这是预期结果），我会收到以下路由错误：

> ActionController::RoutingError: 没有路由匹配 {:controller=>"rails_admin/main"}

导致异常的代码在于引擎重定向到索引或上一页的方法（引用类型）；这是该方法的代码

> def back_or_index
> 
> > if params[:return_to].presence
> > 
> > > 参数[:return_to]
> > 
> > 别的
> > 
> > > 索引路径
> 
> 结尾

我发现在开发中运行应用程序时，由 index_path 触发的 url_for 调用提供了正确的**path_segments （即： :model_name => 'user' ）**，以便匹配下面的路由

> ```
>  index GET|POST    /:model_name(.:format)                 rails_admin/main#index 
> ```

另一方面，在运行测试时，未提供 path_segments，因此在查找匹配路由时不满足**:model_name约束。**

由于我是引擎新手，有人可以告诉我我缺少什么吗？

在我看来，引擎似乎应该考虑到安装生成 index_path 的事实，但正如我所说，我不是这方面的专家......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:28:33.167

**use_route**还不够：对**index_path**的调用无论如何都失败了。

经过大量调试后，我还不能完全确定为什么相同的代码在*test*和*development*中都不起作用的根本原因。

我观察到的是，开发*中的***index_path**能够从请求的 url 中推断出 model_name，而在**测试***中*则不能。

 ****虽然丑陋，但我的解决方案是在 app/controllers/rails_admin/main_controller.rb 中重写方法如下

```
module RailsAdmin
 class MainController

        # Override to fix a routing error when running tests
    def back_or_index
      if params[:return_to].presence && params[:return_to].include?(request.host) && (params[:return_to] != request.fullpath)
        params[:return_to]
      else
        # forward :model_name as default_url_options is not aware of it in tests
        index_path( :model_name => params[:model_name] )
      end
    end

 end
end 
```

在我的 MainController 控制器规格中，我执行以下操作

```
put :edit, { :model_name => 'user', :id => root.id, :user => { :role => :root }, :use_route => :rails_admin } 
```

这就是我的路线

```
 devise_for :users
  mount RailsAdmin::Engine => '/backend', :as => 'rails_admin'
  mount Rich::Engine => '/rich', :as => 'rich' 
```

如果有人有更好的解决方案，将非常感谢分享！****

# tsql - 修改重复项

> ID：14281506
> 
> 赞同：0
> 
> 时间：2013-01-11T15:38:39.250
> 
> 标签：tsql, duplicates, sql-update, inner-join

我试图找出做两件事的方法：

1.  查找表中的重复记录。

这些通常是“名称”列中的重复名称，但特别是 ParentID 相同的名称。如果我有相同的名字，但 ParentID 不同，那很好，因为这些名字（或孩子）属于不同的父母。

1.  修改这些重复项。

最好，我会通过将“ID”附加到名称来修改这些重复项。

我想出了一个查询来定位重复项并将它们转储到临时表中：

```
CREATE TABLE #Dup(
Name varchar(50),
CustNo varchar(7))

insert into #Dup (Name, CustNo)
SELECT [Name],[CustNo]

FROM [02Kids]
GROUP BY [Name], [CustNo]
HAVING Count(*)>1 
```

这似乎有效。当我查看表中的数据时，我看到了名称，并且看到了 ParentID，这确实是一个为该父 ID 出现两次的名称。值得注意的是，该名称仅在表格中出现一次。它没有显示具有相同名称和 ID 的两行（也许这是我的问题的一部分）。

这是我尝试执行修改时提出的查询：

```
select[#Dup].[Name] + '  ' + [02Kids].[ID] as iName, [02Kids].ParentID 
from #Dup
inner join [02Kids]
on #Dup.CustNo = [02Kids].ParentID 
order by iName asc 
```

好吧，这种作品，除了我最终得到大量的重复。例如，我可以确认的一个“名称”只有两个重复项，但该选择查询的总数接近 13 个。

我可能对那个查询很不满意（这是我用来自学的练习内容），但我很难想出一个正确的方法来做到这一点。我还在学习语法、关键字、函数等，所以也许我应该使用一些我还不知道的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:48:32.493

好吧，要在“修改”查询中只获得您想要的匹配项，您需要在连接子句中添加名称匹配项。现在，您正在将重复记录与该父母的每个孩子进行匹配，而不仅仅是重复记录。因此，如果一位家长有 13 个孩子，其中只有一个是重复的，那么您将获得 13 条额外记录。

```
inner join [02Kids]
on #Dup.CustNo = [02Kids].ParentID AND
#Dup.Name = [02Kids].Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:51:43.027

这回答了你的问题了吗？

```
USE tempdb
GO

CREATE TABLE Person (PersonID INT, FName VARCHAR(25), LName VARCHAR(25))
INSERT INTO Person VALUES
(1, 'Jim', 'Jones'),
(2, 'Rob', 'Smith'),
(3, 'Matt', 'Bridges'),
(4, 'Jim', 'Jones'),
(5, 'Jim', 'Jones'),
(6, 'Alex', 'Door'),
(7, 'Wilhelm', 'Kay')
GO

;WITH DupDetect AS
(
    SELECT *
            ,Occ = ROW_NUMBER() OVER (PARTITION BY FName, LName ORDER BY PersonID)
    FROM Person
)
UPDATE DupDetect
SET FName = LTRIM(STR(PersonID)) + FName
WHERE Occ > 1

SELECT *
FROM Person 
```

导致;

```
PersonID |  FName   |   LName
---------------------------------
1        |  Jim     |   Jones
2        |  Rob     |   Smith
3        |  Matt    |   Bridges
4        |  4Jim    |   Jones
5        |  5Jim    |   Jones
6        |  Alex    |   Door
7        |  Wilhelm |   Kay 
```

我不知道用于修改或删除重复项的任何更清洁或更有效的模式。

# android - Android NDK 将数组传递给 c

> ID：14281508
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:38:43.693
> 
> 标签：android, android-ndk, java-native-interface

我只是跟着这篇[文章](https://stackoverflow.com/questions/8543221/android-a-simple-ndk-project-using-the-eigen-library-and-jni)。现在，我有了这个 JNI 代码：

```
extern "C"{
   JNIEXPORT jfloatArray JNICALL Java_com_jp_algi_Corelib_vector
       (JNIEnv *env, jobject clazz, jfloatArray input){
        jfloat* flt1;
        flt1  = (*env)->GetFloatArrayElements(env, input, NULL);
        if (flt1 == NULL){
            return NULL; /* exception occurred */
        }
        // do stuff to the array
        (*env)->ReleaseFloatArrayElements(env, input, flt1, 0);
        return flt1;
        //delete flt1, v;
        //env->SetFloatArrayRegion(result, 0, 1, v);
    }
} 
```

并检查它是否正常；我在 Java 代码数组中有长度检查以记录，它仍然发回 44 512 数组，并且不受输入数组长度的影响！它仍然一样，我认为我的 中有一些错误`Application.mk`，因为构建它的 OK

`App.mk`：

```
 APP_ABI := all
  APP_STL := stlport_static 
```

并且`andr.mk`可以肯定：

```
LOCAL_PATH := $(TOP_LOCAL_PATH)
include $(CLEAR_VARS)
LOCAL_MODULE    := com_jp_algi_Corelib
LOCAL_SRC_FILES := com_jp_algi_Corelib.cpp, kiss_fft.c, kiss_fftr.c
include $(BUILD_SHARED_LIBRARY) 
```

好的，我的问题是：

我的 JNI 代码不起作用，我不知道为什么，因为我不懂 JNI 和 C++！

请有人告诉我如何重写我的代码？

好的，我的任务是：

*   我想让 Java 数组到 C++ 只使用数组并返回到 Java 数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:54:20.480

起初，您不能将 jfloat* 返回给 Java。你很幸运，这段代码不会使 JVM 崩溃。其次，在调用 ReleaseFloatArrayElements 后，您不能使用指向数组的指针（我的意思是 jfloat*），因为您将此数组返回给 JVM，它可以移动它甚至删除

更新 ACORDING 任务

通常我是这样做的。

```
extern "C" {
JNIEXPORT jboolean JNICALL Java_com_jp_algi_Corelib_vector
   (JNIEnv *env, jobject clazz, jfloatArray input){
    jfloat* flt1 = NULL;
    jsize size = env->GetArrayLength(input);
    // check if array size >0 and wedont cause exception
    if(size<=0) return(JNI_FALSE);
    if(env->ExceptionCheck()) {
#ifndef NDEBUG
      env->ExceptionDescribe();
#endif
      env->ExceptionClear();
      return(JNI_FALSE);
    }
    // allocate buffer for array and get data from Java array
    flt1  = new jfloat[size];
    env->GetFloatArrayRegion(input,0,size,flt1);
    // exception check. Always use exception check
    if(env->ExceptionCheck()) {
#ifndef NDEBUG
      env->ExceptionDescribe();
#endif
      env->ExceptionClear();
      delete[] flt1;
      return(JNI_FALSE);
    }
    // do stuff to the array
    // set result to Java array and delete buffer. And exception check of course
    env->SetFloatArrayRegion(input,0,size,flt1);
    delete[] flt1;
    if(env->ExceptionCheck()) {
#ifndef NDEBUG
      env->ExceptionDescribe();
#endif
      env->ExceptionClear();
      return(JNI_FALSE);
    }
    // All is ok
    return(JNI_TRUE);
}
} 
```

最好使用 GetArrayRegions/SetArrayRegion，因为当您使用 GetFloatArrayElements 时，您会阻止原始 java 数组在内存中移动。在某些情况下，如果有一些，它可能会在其他线程中导致 OutOfMemoryException

PS：我不确定我没有错过一些括号，如果是这样，对不起

# wpf - 名称空间中不存在名称

> ID：14281509
> 
> 赞同：2
> 
> 时间：2013-01-11T15:38:44.727
> 
> 标签：wpf, silverlight, xaml, data-binding, visual-studio-2012

我正在尝试将 Observable Collection 绑定到 XAML 接口。虽然一切都按预期构建和运行，但以下代码破坏了设计器，并显示名称 ... 在命名空间中不存在 ... 的错误。

我在 Windows 7 机器上运行带有 Update 1 的 Visual Studio 2012 Premium。Silverlight 和 WPF 中也会出现同样的问题，我最终需要在 Silverlight 5 中实现解决方案。

```
<Window x:Class="BindingObservableCollection.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:BindingObservableCollection"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <c:NameList x:Key="NameListData"/>
    </Window.Resources> 
```

* * *

```
namespace BindingObservableCollection
{
    public class NameList : ObservableCollection<PersonName>
    {
        public NameList() : base()
        {
            Add(new PersonName("Willa", "Cather"));
            Add(new PersonName("Isak", "Dinesen"));
            Add(new PersonName("Victor", "Hugo"));
            Add(new PersonName("Jules", "Verne"));
        }
    } 
```

# mysql - 将mysql表限制为一定大小并自动删除最旧的条目

> ID：14281510
> 
> 赞同：3
> 
> 时间：2013-01-11T15:38:50.143
> 
> 标签：mysql

> **可能重复：**
> [如何设置 MySQL 表中的最大行数？](https://stackoverflow.com/questions/8048001/how-can-i-set-a-maximum-number-of-rows-in-mysql-table)

是否有可能（以及如何）对 MySQL 表设置限制（比如说 100'000 ）并在达到限制时删除旧条目？

意思是，当我有 100'000 个条目并且出现 100'001 时，将删除 ID 最小的条目并创建新条目（当然使用新 ID）。

我希望 MySQL 自己处理这个问题，所以不需要外部脚本干预。

我需要这个来记录日志，也就是说，我只想将日志保留一段时间，比如一周。也许 MySQL 有可能只删除超过 1 周的条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:06:24.310

我建议触发器。这是确保在每次插入时都考虑最大表大小的最佳方式。

**[如何在 MySQL 表中设置最大行](https://stackoverflow.com/questions/8048001/how-can-i-set-a-maximum-number-of-rows-in-mysql-table)**数**？**

 **从那个接受的答案：

* * *

尝试限制向表中添加新记录。当要添加新记录时引发错误。

```
DELIMITER $$

CREATE TRIGGER trigger1
BEFORE INSERT
ON table1
FOR EACH ROW
BEGIN
  SELECT COUNT(*) INTO @cnt FROM table1;
  IF @cnt >= 25 THEN
    CALL sth(); -- raise an error
  END IF;
END
$$

DELIMITER ; 
```

请注意，在大型 InnoDb 表上 COUNT 操作可能会很慢。

在 MySQL 5.5 上，您可以使用 SIGNAL 语句来引发错误。**

# linux - 在bash中的特定行中删除换行符（将两行合并为一行）

> ID：14281513
> 
> 赞同：1
> 
> 时间：2013-01-11T15:39:03.833
> 
> 标签：linux, bash, sed

我有一个来自 3rd 方系统的文件，我需要稍微更正一下。不时即将到来的文件在数据中间包含一个换行符。假设我能够找到这条损坏的线路。我需要做的只是删除换行符并将该行与上面的行连接（这将在我摆脱换行符时发生）。这是示例：

```
data_1 data_2 data_3 data_4 data_5
data_1 data_2 data_3 data_4 data_5
data_1 data_2 
 data_3 data_4 data_5
data_1 data_2 data_3 data_4 data_5
data_1 data_2 data_3 data_4 data_5
data_1 data_2 data_3 data_4 data_5 
```

如您所见，第 3 行是错误的，需要通过删除换行符来修复/加入第 4 行。我有一个简单的脚本，它能够找到“错误”（太短）的行。问题是：如何从特定行中删除换行符（我的行号错误）。

我尝试使用 sed ( `sed ':a;N;$!ba;3s/\n/ /' data.log`) ，其中 3 之前`s`是行号，但它不起作用。

...或者也许有更好的解决方案来解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:50:19.993

您可以使用 sed 来完成，利用新行开头的空间

```
sed -e '{
N
s/\n //
}' data.log 
```

这不需要您提前知道虚假换行符在哪里，但只会纠正一个中断（因为如果该行被分成 3 行，它就不起作用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:44:04.687

> 如何从特定行中删除换行符（我的行号错误）

如果您已经确定了目标行号，那么使用 awk 您可以执行以下操作：

```
awk -v N=3 '{if (NR==N) l=$0; else if (NR==N+1) print l $0; else print}' infile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T15:50:48.697

这不是您真正要求的，但它会自动找到损坏的行并修复它们。`col`只需通过设置参数设置您期望的列数

```
awk -v col=5 '
           { 
               if ((cur + NF) < col) 
               { 
                   printf($0); 
                   cur=cur+NF; 
               } 
               else 
               { 
                   print $0; 
                   cur=0; 
               } 
           }' your_file 
```

# c# - 是否可以使用 c# 获取关闭的浏览器选项卡的 URL？

> ID：14281516
> 
> 赞同：0
> 
> 时间：2013-01-11T15:39:05.863
> 
> 标签：c#

我尝试使用 Process.GetProcessesByName("firefox") 来操作它。但我只能检测到浏览器的打开和关闭。

- 有人可以帮我检测浏览器中的选项卡何时关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:44:28.833

不，不可能从单独的应用程序、C# 或其他任何东西中做到这一点。

您必须为每个浏览器添加和分离浏览器。即使对于 IE，也不建议在 .NET 中制作插件（请参阅[https://stackoverflow.com/a/1161529/351383](https://stackoverflow.com/a/1161529/351383)）。

对于 IE，这里有一篇关于制作插件的优秀文章：

[如何开始开发 Internet Explorer 扩展？](https://stackoverflow.com/questions/5643819/developing-internet-explorer-extensions/5740004#5740004)

对于 firefox，您必须制作 firefox 插件，请参阅此链接：

[https://addons.mozilla.org/en-us/developers/](https://addons.mozilla.org/en-us/developers/)

铬合金 ：

[http://developer.chrome.com/extensions/getstarted.html](http://developer.chrome.com/extensions/getstarted.html)

# c++ - 如何使用 C++ 将现有的电子邮件帐户添加到 Outlook

> ID：14281517
> 
> 赞同：0
> 
> 时间：2013-01-11T15:39:06.097
> 
> 标签：c++, outlook, mapi, outlook-2003

我需要编写一个能够将现有电子邮件帐户添加到 Outlook 的小程序，以便我们能够在虚拟机上接收电子邮件。我们正在使用 Outlook 2003 和 Outlook 2010（不过，2003 解决方案更重要）

手动操作是不可能的，因为它需要成为自动化测试的一部分，并且一直手动设置它们是不可行的。

我在谷歌上环顾四周，似乎在使用扩展 MAPI 方面找不到任何帮助，所以我想我会来这里。

如果到那时有人可以帮助我，那就太好了。

如果您有使用 vb 脚本或 c# 的选项，那也很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:30:50.687

什么样的账户？POP3/SMTP 帐户不是基于 MAPI 的，MS 没有记录负责创建新帐户的 IOlkAccountManager 接口部分。对于 Exchange 帐户，请使用 IMsgServiceAdmin::CreateMsgService("MSEMS", ...) - MSDN 提供了一些如何执行此操作的示例。对于 PST 帐户，服务名称将为“MSPST MS”或“MSUPST MS”。

# javascript - 当输入获得焦点时隐藏验证错误

> ID：14281518
> 
> 赞同：0
> 
> 时间：2013-01-11T15:39:07.350
> 
> 标签：javascript, jquery

这是代码：-在这里我声明了我的变量：

```
 var first = $('#first');
    var firstError = $('#firsterror'); // the errors are in span tags (if it matters)
    // and so on... 
    first.blur(validateFirst);
    last.blur(validateLast);
    username.blur(validateUsername);
    password.blur(validatePassword);
    confpassword.blur(validateConfpassword);
    month.blur(validateMonth);
    day.blur(validateDay);
    year.blur(validateYear);
    gender.blur(validateGender);

    $('#myForm').submit(function(){
   if( validateFirst() & validateLast() & validateUsername() & validatePassword() &     validateConfpassword() & validateMonth() & validateDay() & validateYear() &   validateGender() ){
        return true;
      }else{
        return false;
      }
    });

    function validateFirst(){
      if(first.val().length < 5){
        first.addClass('error_input');
        firstError.text('You left this empty!');
        firstError.addClass('error');
        return false;
      }else{
        first.removeClass('error_input');
        firstError.text('');
        return true;
      }
    };
      // and so on...  I would like the code to work as so: When an input recives focus the error should hide else the code should run exactly as it is. 
```

谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:05:08.010

我认为您应该使用 jQuery validate lib 来验证您的表单，这里是 jQuery validate 的 cdn 链接。

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script> 
```

请注意，您必须在该行之前包含 jQuery lib

您所要做的就是编写如下几行代码

```
$('#form_id').validate({
    rules : {
        'el_name' : 'validation_rule'  // like, required
    },
    messages : {
        'el_name' : 'Your error message'
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:42:09.427

你已经尝试过这样的事情了吗？

```
function removeError() {
     $(this).removeClass('error_input');
     $("#error"+$(this).attr("id")).text("").removeClass("error");
}

first.focus(removeError);
last.blur(removeError);
username.blur(removeError);
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:43:30.657

### 试试这个

```
$('.error_input').focus(function(){
    $(this).removeClass('.error_input');
}); 
```

# c# - 通过 System.Net.Mail 发送电子邮件时捕获 550 5.1.1 RESOLVER.ADR.RecipNotFound 错误

> ID：14281521
> 
> 赞同：1
> 
> 时间：2013-01-11T15:39:19.623
> 
> 标签：c#, system.net.mail

我正在使用 Sytem.Net.Mail 通过 C# 中的 Web 应用程序通过 Exchange 服务器（在另一台机器上）发送电子邮件。（请注意，*每个客户*都可以设置 smtp 配置，因此他们可能不会使用 Exchange。）

发送电子邮件时，如果将消息发送到无法投递的地址，则*不会*引发异常。Exchange*确实*向我发送了一封电子邮件，告诉它消息未发送。

这是消息：

```
Diagnostic information for administrators:

Generating server: (exchange server)

(wrong address)
#550 5.1.1 RESOLVER.ADR.RecipNotFound; not found ##

Original message headers:

Received: from (webserver) by (exchangeserver) with Microsoft SMTP Server id (blah); Fri, 11 Jan 2013 10:16:02 -0500
MIME-Version: 1.0
From: (me)
To: (wrong address)
Date: Fri, 11 Jan 2013 10:16:02 -0500
Subject: (blah)
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: base64
Message-ID: (blah)
Return-Path: (me) 
```

这是因为交换服务器上的配置设置吗？是否有另一种方法来捕捉这个（也许如果我异步发送邮件），或者我无法找出消息是否失败？

请注意，作为一项要求，我必须向每个收件人发送一封单独​​的电子邮件。所以有一个 for 循环向每个地址发送一封电子邮件。对于无效的地址，没有捕获到异常，所以系统认为邮件发送成功。

SendEmailError 是一个只保存错误信息的类。最终返回的是一个没有项目的列表。当向无效地址发送消息时，代码不会进入两个 catch 块中的任何一个。

代码：

```
public List<SendEmailError> SendEmail(MailAddress fromAddress, string subject, string body, bool isBodyHTML, MailPriority priority,
                            IEnumerable<MailAddress> toAddresses)
{
    List<SendEmailError> detectedErrors;

    // create the email message
    MailMessage message = new MailMessage()
    {
        Subject = subject,
        SubjectEncoding = Encoding.UTF8,
        Body = body,
        BodyEncoding = Encoding.UTF8,
        IsBodyHtml = isBodyHTML,
        Priority = priority,
        From = fromAddress
    };

    SmtpClient smtpClient = new SmtpClient("myexchangeserver", 25)
    {
        Credentials  = new NetworkCredential("myid", "mypword", "mydomain");
    };

    foreach (MailAddress toAddress in toAddresses)
    {
        message.To.Clear();
        message.To.Add(toAddress);
        try
        {
            smtpClient.Send(message);
        }
        catch (SmtpFailedRecipientsException ex)
        {
            // if the error was related to the send failing for a specific recipient, log
            // that error and continue.
            SendEmailError error = new SendEmailError();
            error.Type = SendEmailError.ErrorType.SendingError;
            error.Exception = ex;
            detectedErrors.Add(error);
        }
        catch (Exception ex)
        {
            // if the error wasn't related to a specific recipient. add
            // an error and stop processing.
            SendEmailError error = new SendEmailError();
            error.Type = SendEmailError.ErrorType.ConnectionError;
            error.Exception = ex;
            detectedErrors.Add(error);
            break;
        }
    }

    return detectedErrors;
} 
```

# php - 如何在 PHP/MySQL 中为 D3 插入未对齐的数据集

> ID：14281525
> 
> 赞同：0
> 
> 时间：2013-01-11T15:39:36.390
> 
> 标签：php, mysql, d3.js

我有一个 EAV 表，我的数据在其中

```
stageid, value,     row
1        rob        1
2        01/01/2012 1
3        2000       1
1        Ben        2
2 ......... and so on 
```

我必须将这些数据转置/转置为可用格式，例如三列表

可怕的查询是

```
SELECT pearson,
Date_format(a.salesdate, '%Y-%m-01') AS       monthYear,
Count(1)
FROM  (SELECT row,
                          Group_concat(IF(stageid = 74, value, NULL)) AS 'pearson',
                          Group_concat(IF(stageid = 59, Str_to_date(value, '%d/%m/%Y'), NULL)) AS 'salesdate',
                          Group_concat(IF(stageid= 67, value, NULL))  AS 'salescount'
                   FROM   stagingdata
                   GROUP  BY row) AS a
            WHERE  a.pearson IS NOT NULL
                   AND a.pearson != ''
                   AND Year(a.salesdate) IN ( '2012', '2011' )
            GROUP  BY Trim(Lower(a.pearson)),
                      Date_format(a.salesdate, '%Y-%m')
            HAVING Count(1) > 10
    ORDER  BY pearson, a.salesdate ASC 
```

我得到这个结果

```
Person, Date,  Sales
Rob     2012-01-01 2000
Ben     2012-01-01 500
Ben     2012-03-01 300
Rob     2012-05-01 2000 
```

我想使用 NVD3 创建一个堆积面积图，但是您可以看到日期列中的数据未对齐 - 我想我需要对数据进行插值 - 但我不知道怎么做！

所以我的数据应该看起来像

```
Person, Date,  Sales
Rob     2012-01-01 2000
Ben     2012-01-01 500
Ben     2012-03-01 300
Rob     2012-03-01 0
Rob     2012-05-01 2000
Rob     2012-05-01 0 
```

我在我的查询中这样做吗？在 PHP < 最好不要！因为我希望我的 3 柱形图 php 到 json 创建器尽可能通用 - 或者你可以在 NVD3 或 D3 中执行此操作

# javascript - 将自定义 Cordova 插件转换为 Windows 8/RT

> ID：14281527
> 
> 赞同：1
> 
> 时间：2013-01-11T15:39:43.047
> 
> 标签：javascript, cordova, plugins, windows-8

我正在将在 iOS/Android 上运行的 html/javascript 应用程序转换为在 Windows 8/RT 上运行。我有大部分 HTML/Javascript/jQuery 在 Windows 8/RT 上工作，但需要弄清楚如何让插件在 Windows 8 上工作。

那就是说我有几个问题。

1) Windows 8/RT 的母语是什么？

*   在 Android 中，我的 Javascript 插件与一个 JAVA 文件对话并返回一个插件结果。Windows 8 上的等价物是什么？

2) 是否有关于如何设置 Windows 8 插件的文档？

*   Phonegap 页面当前仅列出 Windows Phone 8/7 文档。

3) Cordova 插件支持 iOS 和 Android 的 window.openDatabase 功能，在 Windows 8 上是否有等效功能？

4) Windows 8 是否允许蓝牙通信？

*   此处的相关主题[Windows Store 蓝牙](https://stackoverflow.com/questions/14360787/windows-store-bluetooth)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:29:52.137

1.  核心 WinRT 组件是用 C++ 编写的。您可以使用 C++、C# 或 VB.NET 编写自己的组件。无论 WinRT 组件是用什么语言编写的，您都可以从 JavaScript、C#、VB.NET 或 C++ 访问它。Windows 应用商店应用程序可以使用任何这些语言编写。它们都得到 Microsoft 的全力支持。
2.  [在 C# 和 Visual Basic 中创建 Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx)。 [在 C++ 中创建 Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/hh441569%28v=VS.85%29.aspx)。
3.  window.openDatabase 创建一个 SQLite 数据库。 [您可以将自己的 SQLite 数据库用于 Windows 应用商店应用程序](http://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications/)。 [还有一种从 JavaScript 使用 SQLite 的方法](https://github.com/doo/SQLite3-WinRT)。或者，由于您使用的是 JavaScript，因此您可以使用[HTML5 中的 IndexedDB 功能](http://code.msdn.microsoft.com/windowsapps/IndexedDB-sample-eb1e95af/view/SourceCode)。
4.  是的，Windows 8 支持蓝牙。 [查看 Windows.Networking.Proximity](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.proximity.aspx)。

# c# - 是否可以使用 AwesomiumDotNet 将事件处理程序附加到页面中的控件？

> ID：14281529
> 
> 赞同：0
> 
> 时间：2013-01-11T15:39:50.010
> 
> 标签：c#, awesomium

我正在使用 Awesomium.NET，但我不明白为什么这段代码可以在 Chrome 上运行，而在使用 Awesomium.NET（WinForms 示例）时却不行。

这是我的页面。

![我的页面](../Images/bf9bc59b7c2adfba43c645d98fd55bbd.png)

当我使用 Chrome 单击按钮时，我看到了预期的警报，但如果我使用 Awesomium.NET，则什么也没有发生......任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:04:07.580

没关系，我想通了。如果您遇到类似的问题，只需升级到 awesomium 1.7 RC3，问题就会消失。至少它对我有用；）

# c# - 为什么要将序列化对象保存在数据库中？

> ID：14281531
> 
> 赞同：0
> 
> 时间：2013-01-11T15:39:55.207
> 
> 标签：c#, .net, clr

为什么要将数据库中的序列化对象保存为二进制而不是简单的数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:45:48.477

您可以将对象层次结构（例如父对象及其子对象）序列化并存储在单个列中，而传统上这种关系需要存储在多个表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:50:29.093

如果您不需要对 dbms 中的数据进行任何操作（即所有查询都将获取整个对象），那么将其存储为序列化对象会很有效。您始终可以标准化您的数据（即使它是分层数据或列表），但如果您始终获取整个数据，则可以通过存储（几乎）准备好使用的对象来跳过一些数据库操作（例如 JOIN）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:42:53.543

原因可能是他们在一个数据表中存储了多种类型，并且有一个确定类型的字段。另一个原因是您可能需要使用一个表来支持对象的多个版本。在某些情况下，这是一个完全可以接受的解决方案。

# c# - 如何防止用户与不可见的表单交互？

> ID：14281534
> 
> 赞同：0
> 
> 时间：2013-01-11T15:40:09.683
> 
> 标签：c#, windows-mobile

在我的应用程序中出现了以下问题：某些对话表单可以在绘制之前进行交互。

代码如下：

```
void FunctionCalledFromButtonPressHandler()
{
    var f = new MyDialog();
    if (f.ShowDialog() == DialogResult.OK)
    {
    //do things
    }
} 
```

开始表单和对话框表单（丢失它的）上的按钮在触摸屏上相互重叠。如果plac被点击两次，则对应于dialog窗体的加载有一个暂停，然后在没有显示的情况下继续启动窗体中的wotk/

我应该如何防止这种行为（也就是说，除了消除对话框加载的延迟）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:01:00.783

设置'Button.Enabled = false;' 在启动方法内的起始表单上。

```
void FunctionCalledFromButtonPressHandler()
{
    YOURBUTTON.Enabled = false;
    var f = new MyDialog();
    if (f.ShowDialog() == DialogResult.OK)
    {
    //do things
    }
    YOURBUTTON.Enabled = true;
} 
```

然后在您的对话框表单中设置`Button.Enabled = false;`表单构造函数中的另一个。`Shown`然后您可以在这样的事件中将按钮设置为启用：

```
void MyDialog_Shown(object sender, EventArgs e)
{
    OTHERBUTTON.Enabled = true;
} 
```

# jquery - 在 jquery ajax 上不断收到 400（错误请求）到 MVC 控制器

> ID：14281537
> 
> 赞同：7
> 
> 时间：2013-01-11T15:40:26.710
> 
> 标签：jquery, post, asp.net-mvc-4

我的 ajax 调用看起来像这样

```
$.ajax({ //actually approve or reject the promotion
                url: url,
                type: "POST",
                data: '{'+data.PromotionId+','+data.UserId+','+data.ReasonText+'}',
                dataType: "json",
                //contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (indicator == 'A') {
                        alert('Promotion approved successfully!');
                    }
                    else {
                        alert('Promotion rejected successfully.');
                    }

                    var homelink = '<%: Url.Action("Index","Home") %>';
                    window.location.href = (homelink);

                    returndata = data;
                },
                error: function (xhRequest, ErrorText, thrownError) {
                    alert("Failed to process promotion correctly, please try again");
                    console.log('xhRequest: ' + xhRequest + "\n");
                    console.log('ErrorText: ' + ErrorText + "\n");
                    console.log('thrownError: ' + thrownError + "\n");
                }
            }); 
```

我的 MVC 控制器如下所示：

```
 [HttpPost]
    public HttpResponseMessage ApprovePromotion(PromotionDecision decision)
    {
        if (ModelState.IsValid && decision != null)
        {
            bool status = PromotionBo.ApprovePromotion(decision);
            if (status == true)
                return new HttpResponseMessage(HttpStatusCode.OK);
        }
        return new HttpResponseMessage(HttpStatusCode.BadRequest);
    } 
```

我曾认为这两种语法都是正确的，但是每次我进行 ajax 调用时都会收到 400 响应。我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T15:50:47.813

您正在向服务器发送一个完全损坏且无效的 JSON 字符串。控制器操作拒绝它是正常的。除此之外，您还在注释中添加了`contentType`指定要发送 JSON 请求的参数。

所以这是执行请求的正确方法：

```
$.ajax({ //actually approve or reject the promotion
    url: url,
    type: "POST",
    data: JSON.stringify({ 
        // Those property names must match the property names of your PromotionDecision  view model
        promotionId: data.PromotionId, 
        userId: data.UserId, 
        reasonText: data.ReasonText
    }),
    contentType: "application/json; charset=utf-8",
    success: function (data) {
        if (indicator == 'A') {
            alert('Promotion approved successfully!');
        }
        else {
            alert('Promotion rejected successfully.');
        }

        var homelink = '<%: Url.Action("Index","Home") %>';
        window.location.href = (homelink);

        returndata = data;
    },
    error: function (xhRequest, ErrorText, thrownError) {
        alert("Failed to process promotion correctly, please try again");
        console.log('xhRequest: ' + xhRequest + "\n");
        console.log('ErrorText: ' + ErrorText + "\n");
        console.log('thrownError: ' + thrownError + "\n");
    }
}); 
```

请注意我是如何使用`JSON.stringify`现代浏览器原生内置的方法来确保发送到服务器的 JSON 正确且所有值都正确编码。如果您需要支持石器时代的浏览器，您可以将[`json2.js`](https://github.com/douglascrockford/JSON-js)脚本包含到您的页面中，该脚本将定义该`JSON.stringify`方法。

重要说明：**绝对不要**像在您的代码中那样使用字符串连接构建 JSON 字符串。

或者，如果您不想发送 JSON 请求，您可以发送标准`application/x-www-form-urlencoded`请求：

```
$.ajax({ //actually approve or reject the promotion
    url: url,
    type: "POST",
    data: { 
        promotionId: data.PromotionId, 
        userId: data.UserId, 
        reasonText: data.ReasonText
    },
    success: function (data) {
        if (indicator == 'A') {
            alert('Promotion approved successfully!');
        }
        else {
            alert('Promotion rejected successfully.');
        }

        var homelink = '<%: Url.Action("Index","Home") %>';
        window.location.href = (homelink);

        returndata = data;
    },
    error: function (xhRequest, ErrorText, thrownError) {
        alert("Failed to process promotion correctly, please try again");
        console.log('xhRequest: ' + xhRequest + "\n");
        console.log('ErrorText: ' + ErrorText + "\n");
        console.log('thrownError: ' + thrownError + "\n");
    }
}); 
```

这应该以相同的方式工作，并且控制器操作应该能够正确绑定模型。

备注：我注意到您在成功回调中使用了以下行：`returndata = data;`. 这使我相信您以某种方式尝试在成功回调之外使用异步 AJAX 请求的结果，这是不可能的。我不知道你在用这个`returndata`变量做什么，但我觉得这是错误的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-31T13:56:48.497

`[ValidateAntiForgeryToken]`将 MVC 操作方法的属性与 Ajax 调用结合使用时也会发生此错误。

看看这个，可能也有帮助： [https ://stackoverflow.com/a/60952294/315528](https://stackoverflow.com/a/60952294/315528)

# java - org.codehaus.jackson.map.JsonMappingException：无限递归（StackOverflowError）

> ID：14281541
> 
> 赞同：3
> 
> 时间：2013-01-11T15:40:41.680
> 
> 标签：java, web-services, hibernate

我正在尝试一些非常基本的网络服务。每次我尝试返回 Prtnr 对象时都会收到此异常。

```
Uncaught exception thrown in one of the service methods of the servlet: spitter. Exception thrown : 
org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError) 
(through reference chain: org.hibernate.collection.PersistentSet[0]->org.abc.dvo.PrtnrGeoInfo["id"]->org.abc.dvo.PrtnrGeoInfoId["partner"]->
org.abc.dvo.Prtnr["prtnrGeoInfos"]->org.hibernate.collection.PersistentSet[0]->org.abc.dvo.PrtnrGeoInfo["id"]->org.abc.dvo.PrtnrGeoInfoId["partner"]->
org.abc.dvo.Prtnr["prtnrGeoInfos"]->org.hibernate.collection.PersistentSet[0]->org.abc.dvo.PrtnrGeoInfo["id"]->org.abc.dvo.PrtnrGeoInfoId["partner"]->
org.abc.dvo.Prtnr["prtnrGeoInfos"]->org.hibernate.collection.PersistentSet[0]->org.abc.dvo.PrtnrGeoInfo["id"]->org.abc.dvo.PrtnrGeoInfoId["partner"]->
...
    at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:164)
    at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
    at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
    at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
    ... 
```

Prtnr 类是：

```
public class Prtnr implements Cloneable, java.io.Serializable {

    private static final long serialVersionUID = 201207021420600052L;
    private Integer prtnrId;
    private String creatUserId;
    private Date creatTs;
    private String updtUserId;
    private Date updtTs;
    private String prtnrNm;
    private Integer cncilNum;
    private Character prtnrTypCd;
    private Set<PrtnrGeoInfo> prtnrGeoInfos = new HashSet<PrtnrGeoInfo>(0);
    private Set<PrtnrDtl> prtnrDtls = new HashSet<PrtnrDtl>(0);
    private Set<SuplyDtl> suplyDtls = new HashSet<SuplyDtl>(0);
    private Set<TrnsprtDtl> trnsprtDtls = new HashSet<TrnsprtDtl>(0);
    private Set<PrtnrFacil> prtnrFacils = new HashSet<PrtnrFacil>(0);
    private Set<PrtnrHumanResrc> prtnrHumanResrcs = new HashSet<PrtnrHumanResrc>(0);
    .....
    .....
    Getters and setters for these properties
    ...
} 
```

PrtnrGeoInfo 类是：

```
public class PrtnrGeoInfo implements java.io.Serializable {
    private PrtnrGeoInfoId id = new PrtnrGeoInfoId();
    private String creatUserId;
    private Date creatTs;
    private String updtUserId;
    private Date updtTs;

    Getters and setters for these properties

} 
```

PrtnrGeoInfoId 类是：

```
public class PrtnrGeoInfoId implements java.io.Serializable {   
    private Prtnr partner;
    private GeoSegment geoSegment;
    private static final long serialVersionUID = 201207060857580050L;

    Getters and setters for these properties
} 
```

我相信这是因为这些类相互引用。但是这个问题怎么解决。在 Struts 2 和 Spring 的应用程序中，这个对象可以很好地通过。

控制器类如下：

```
@Controller
@RequestMapping("/partners")
public class PartnerController {
    @RequestMapping(value="/{id}", method=RequestMethod.GET, headers ={"Accept=text/xml,application/json"})
    @ResponseBody
    public Prtnr getPartner(@PathVariable("id") String id) throws Exception{
        Prtnr partner = null;
        try{
            partner = partnerService.getPartnerById(Integer.valueOf(id));
                System.out.println("******* Test message " );
        }catch(Exception ex){
            System.out.println("******* Exception thrown ... " + ex.getMessage());
        }

        return partner;
    }
} 
```

调用类是 public class TestTemplate {

```
 private static final long serialVersionUID = 1130201273334264152L;
    public static void main(String[] args){
        Prtnr partner = (Prtnr)new RestTemplate().getForObject("http://localhost:9080/respondersApp/testWs/partners/{id}", Prtnr.class, "1");
        System.out.println("partner name is : " + partner.getPrtnrNm());
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-29T17:21:01.073

在此[链接](http://keenformatics.blogspot.it/2013/08/how-to-solve-json-infinite-recursion.html)中，您可以找到解决此问题的方法。

但是下面我将在实践中粘贴解决方案。

这很简单。假设您的数据库查询已经在没有 JSON 的情况下工作，您所要做的就是：

`@JsonManagedReferenc`在关系的forward部分添加e（即User.java类）：

```
@Entity
public class User implements java.io.Serializable{

 @Id
 @GeneratedValue(strategy=GenerationType.IDENTITY)
 private long id;

 @Column(name="name")
 private String name;

 @ManyToMany
 @JoinTable(name="users_roles",joinColumns=@JoinColumn(name = "user_fk"),
 inverseJoinColumns=@JoinColumn(name = "role_fk"))
 @JsonManagedReference
 private Set<Role> roles = new HashSet<Role>();

... 
```

`@JsonBackReference`在关系的后面部分添加（即 Role.java 类）：

```
@Entity
public class Role implements java.io.Serializable {

 @Id 
 @GeneratedValue(strategy=GenerationType.IDENTITY)
 private int id;

 @ManyToMany(mappedBy="roles")
 @JsonBackReference
 private Set<User> users = new HashSet<User>();

... 
```

工作完成。如果您查看您的萤火虫日志，您会注意到无限递归循环已经消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T09:12:05.107

当您尝试将实体类转换为 JSON 格式时，这对我来说很常见。最简单的解决方案就是使用`@JsonIgnore`反向映射来打破循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-01T00:08:30.320

您可以在 PrtnrGeoInfoId 中注释 Prtnr 的第二个引用`@JsonBackReference`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T15:46:42.437

无限递归是由于以下原因：类`Prtnr`包含`Set<PrtnrGeoInfo> prtnrGeoInfos`，每个`PrtnrGeoInfo`包含，而每个包含`PrtnrGeoInfoId id`又包含`Prtnr partner`。

因此，`Prtnr`-> `PrtnrGeoInfo`-> `PrtnrGeoInfoId`->`Prtnr`会导致循环依赖，这对 Jackson 在尝试执行 POJO 映射时是一个问题。

您需要删除此循环依赖项才能修复此异常。

# asp.net-mvc - 如何在 MVC4 中设置我的默认视图以指向特定区域、控制器和操作？

> ID：14281545
> 
> 赞同：0
> 
> 时间：2013-01-11T15:40:52.693
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, routes

我有一个用户区域，在其中我注册了以下内容：

```
context.MapRoute("DefaultRedirect",
    "",
    new { controller = "Account", action = "Login" }
); 
```

当我使用 routeDebug 它告诉我，当我连接到我的网站 www.xxx.com 时，它会尝试调用

```
area = User, controller = Account, action = Login 
```

当我使用以下方式直接连接时：www.xxx.com/User/Account/Login 会出现我的登录页面。

当我不使用 routeDebug 并连接到我的网站 www.xxx.com 时，我会收到一条错误消息：

```
Server Error in '/' Application.

The resource cannot be found.

Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: / 
```

这是我的控制器操作方法：

```
 public class AccountController : Controller
    {
        //
        // GET: /Account/Login

        [AllowAnonymous]
        public ActionResult Login()
        {
            ViewBag.ReturnUrl = "xx";
            return View("~/Areas/User/Views/Account/Login.cshtml");
        } 
```

我很困惑，因为 routeDebug 似乎表明我要使用正确的控制器和操作，但是当我不使用它并放置断点时，它似乎并没有转到控制器操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:43:54.933

```
 return RedirectToAction("Login", "Account"); 
```

将重定向到特定控制器和特定操作。如果帐户在文件夹中更深，只需包含路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:25:55.733

如果这个控制器在同一个区域内，我认为你可以使用

```
[AllowAnonymous]
    public ActionResult Login()
    {
        ViewBag.ReturnUrl = "xx";
        return View();
    } 
```

无论哪种方式，如果您只有可以使用的不同区域的视图

```
return View("~/Views/YourArea/YourController/YourView.aspx"); 
```

# jquery - 在本地存储中存储和更新当前日期数据库记录

> ID：14281546
> 
> 赞同：0
> 
> 时间：2013-01-11T15:40:54.953
> 
> 标签：jquery, asp.net, html

我希望这是有道理的，但我有一个我想离线工作的 asp.net Web 表单应用程序。

我想创建一个存储过程，查询以减少当天使用的数据（如调度、作业等）并将其存储在移动设备的本地存储中。

然后我想我可以更新数据，然后在互联网可用或用户选择时进行同步。

我想我需要某种标记来让我知道不再需要数据。

这有意义吗？
如果它确实有意义，是否有人对从哪里开始有任何建议。如果这没有意义，有没有人对如何做有任何建议？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:03:30.983

如果我正确理解了这个问题，您有一个想要离线工作的*现有*asp.net Web 表单应用程序，并且看起来您希望它能够在移动设备上使用。我不知道您将如何*按原样*处理应用程序，因为根据定义，asp.net 是服务器端的。

如果我要做这样的事情，我想我会做的只是用 jQuery（或 javascript）中的离线功能制作一个 html 页面。然后我会创建一个带有我需要的在线功能的 asp.net 库和一个返回结果的页面。然后，我将使用 jQuery AJAX 调用与库进行交互，以便在联机时读取和写入信息。

可能有更好的方法来做到这一点——我不知道还有其他人这样做——但这是我之前成功使用的一种方法，它通过纯 html 页面与 .Net 代码进行交互。这样，如果您必须重新开始，您至少可以重用大量现有的 .net 代码。

根据应用程序，您也可以将它们分开。离线工作的带有 jQ​​uery 的 HTML 页面将是您的主要表单，然后只需使指向现有 Web 表单应用程序的链接仅在在线时可用。

希望这会有帮助。也许有人会想出更好的答案。

# workflow-foundation - 取消现有的 WF 实例

> ID：14281551
> 
> 赞同：1
> 
> 时间：2013-01-11T15:41:27.370
> 
> 标签：workflow-foundation

我有一个工作流服务，它接受一个产品对象，然后将其放入一个队列中，从那里它必须得到经理的批准。产品可能会重新提交到此流程中，如果是这种情况，我想取消现有的工作流程（正在等待批准）。产品 ID 用于关联。

在我的工作流程中，我有一个接收活动，它获取产品对象并将其分配给一个变量。然后我有一个单独的 InitializeCorrelation 活动，它使用变量中的产品 id 进行初始化。然后，工作流将产品返回给调用客户端。

如果我两次将相同的产品发送到服务，那么在第二次调用时，服务将返回类型的错误异常

```
System.Runtime.DurableInstancing.InstanceKeyCollisionException 
```

带有...的错误消息

```
"The execution of an InstancePersistenceCommand was interrupted by a key collision. The instance key with value 'fd923b75-003e-13d9-0c96-21ed171fdb43' could not be associated to the instance because it is already associated to a different instance." 
```

...这基本上是我所期望的。我的计划是用 try/catch 活动包装 InitializeCorrelation 活动，并在 catch 中取消现有的 WF 实例并继续运行实例。因此，catch 将有一个自定义活动来取消现有的 WF 实例和另一个 initializeCorrelation 活动，该活动不应引发错误，因为此时第一个实例已被取消。

然而，逐步完成工作流会发生什么是它到达 InitializeCorrelation 活动，但该活动似乎没有正确引发异常。InitializeCorrelation 活动中止正在运行的实例并且永远不会命中 catch 块。

因此，我的问题是我怎么能：

1.  从 InitializeCorrelation 活动中捕获异常？
2.  我可以将 InitializeCorrelation 包装在 CodeActivity 中吗（我遵循了一个这样做的示例，但是当我尝试使用它时，它似乎没有正确地注意到相关性并允许我将相同的产品传递给多个实例而没有问题） . 我正在正确设置相关句柄和数据，但我看不到如何调用活动执行方法。
3.  在我调用 InitializeCorrelation 之前，我可以查询所有现有实例以获取相关 ID 等于我的产品 ID 的实例吗？

或者也许有更好的方法来做到这一点？我不想做的一件事是在客户端捕获异常并从那里执行。我的客户不应该对 WF 有任何了解，我希望他们继续使用服务接口，而不必在客户端中放置任何重试/取消逻辑（实际上应该可以将所有这些都包含在工作流本身中） ）。

任何帮助表示赞赏！

# c# - XMLSerializer 不序列化类属性并且只返回 bool - *Specified 成员的“false”值

> ID：14281556
> 
> 赞同：2
> 
> 时间：2013-01-11T15:41:43.230
> 
> 标签：c#, xml-serialization

像这样由 WCF/svcutil.exe 自动生成类代码：

```
public class Foo
{

    private float barField;

    bool barFieldSpecified;

    public float bar
    {
        get
        {
            return this.barField;
        }
        set
        {
            this.barField = value;
        }
    }

    [System.Xml.Serialization.SoapIgnore]
    public bool barSpecified
    {
        get
        {
            return this.barFieldSpecified;
        }
        set
        {
            this.barFieldSpecified = value;
        }
    }        
} 
```

并像这样使用 XMLSerializer：

```
 Foo foo = new Foo();
        foo.bar = 100;
        var ser = new XmlSerializer(typeof(Foo));
        var ms = new MemoryStream();
        ser.Serialize(ms, foo);
        var str = Encoding.UTF8.GetString(ms.ToArray()); 
```

我得到所有节点中的值都设置为“false”的 XML，并且我没有设置任何类属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:41:51.917

这种行为的原因是 XMLSerializer 将这些以“指定”关键字结尾的附加属性用于上面代码中的值类型`bar`属性`barSpecified`。如果`barSpecified`未设置为“true”，`bar`则不会序列化属性。这是 XMLSerializer 的说法，它`bar`是一种 NULL，不应该被序列化。

解决这个问题至少有 3 种可能性：

-删除`barSpecified`属性和字段

-设置`barSpecified`为“真”

-如果类实现`INotifyPropertyChanged`了使用它（如果类是自动生成的，最好将其作为另一个文件中的部分类，如下所示）：

```
 public partial class Foo
   {
        public Foo()
        {
            this.PropertyChanged += (object sender, System.ComponentModel.PropertyChangedEventArgs e) =>
                {
                    if (!e.PropertyName.EndsWith("Specified"))
                    {
                        var prop = this.GetType().GetProperty(e.PropertyName + "Specified");
                        if (prop != null)
                            prop.SetValue(this, true, null);
                    }
                };
        }
    } 
```

# windows - .svn/lock 文件访问被拒绝

> ID：14281560
> 
> 赞同：0
> 
> 时间：2013-01-11T15:41:56.420
> 
> 标签：windows, svn

我有一个 SVN 服务器。哪个工人完美到今天早上（最后提交 10:35:39）。在该提交时，在隐藏的 .svn 文件夹中创建了一个名为“lock”的文件。

创建文件后，我无法提交、更新、清理并尝试以服务器管理员身份登录。当我右键单击文件并选择属性时，安全选项卡显示我无权查看信息。无法将自己设置为文件管理员。我无法删除该文件。

其他也使用相同 SVN 服务器的结帐目录仍然有效。

任何人都知道如何删除此文件或解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-13T14:00:10.953

尝试从另一台服务器移动存储库时，我遇到了类似的访问被拒绝问题。**通过确保我是目标文件的所有者，**我能够加载 repo

# jquery - 从跨度到标题的 jQuery 文本

> ID：14281570
> 
> 赞同：3
> 
> 时间：2013-01-11T15:42:20.000
> 
> 标签：jquery, attr

我是一个 jQuery 新手。我有类似以下 HTML 的内容：

```
<div class=dcsns-youtube>
    <span class="section-thumb">
        <a href="some-link"><img src="http://img.youtube.com/vi/m4-1FZeoBtQ/default.jpg" alt=""></a>
    </span>
    <span class="section-title">
        <a href="some-link">Text on the link</a>
    </span>
<div> 
```

我想使用类“section-title”获取跨度内的 a 元素内的文本，例如“链接上的文本”，并将其用作跨度内的 a 元素上的标题，类“部分拇指”。

以下 jQuery 代码仅适用于单个 div：

```
jQuery('.dcsns-youtube .section-thumb a').attr('title', $('.dcsns-youtube .section-title').text()); 
```

如果我有多个 div，如何在跨度内的每个元素中添加一个元素，并使用类“section-thumb”在跨度内的 a 元素的文本上分别添加类“section-title”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:44:20.563

你可以这样做：

```
$('.dcsns-youtube').each(function(){
  $('.section-thumb a', this).attr('title', $('.section-title', this).text());
}); 
```

`$(someselector, this)`搜索里面的元素`this`。

[示范](http://jsfiddle.net/umqKd/)

您还可以将回调传递给`attr`：

```
$('.dcsns-youtube .section-thumb a').attr('title', function(){
      return $(this).closest('.dcsns-youtube').find('.section-title a').text();
}); 
```

[示范](http://jsfiddle.net/NRvyR/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:44:35.353

您需要使用 jQuery [each()](http://api.jquery.com/jQuery.each/)来访问所有给定的选择器元素。each() 遍历选择器返回的集合，并`$(this)`在每个正文中给出`element`集合中 html 的 jQuery 对象。

```
jQuery('.dcsns-youtube .section-thumb a').each(function(){        
     $(this).attr('title', $(this).closest('.section-title').text());    
}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-11T15:43:50.237

> 我想使用类“section-title”获取跨度内的 a 元素内的文本，例如“链接上的文本”，并将其用作跨度内的 a 元素上的标题，类“部分拇指”。

这是用这个jQuery完成的：

```
var text = $('span.section-title a').text();

$('span.section-thumb').attr('title', text); 
```

# android - 找教程 - ProGuard for Android MAVEN 项目

> ID：14281575
> 
> 赞同：3
> 
> 时间：2013-01-11T15:42:36.790
> 
> 标签：android, maven, proguard

尝试将 ProGuard 集成到我的 android-maven 项目发布阶段。我似乎错过了一些东西，但我可以弄清楚是什么。

[我在官方网站](http://code.google.com/p/maven-android-plugin/wiki/ProGuard)上尝试了建议的示例，但是当我使用包含 proguard 阶段的配置文件运行 maven 时，没有效果......我什至看不到 proguard 输出（我也尝试使用 -X 参数运行 maven ）。

所以我的问题是是否有一个很好的完整教程，它将解释如何从头开始在项目 pom 中设置 proguard？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:47:40.420

请参阅教程[Proguard for Android with Maven，而不用自找麻烦](http://www.simpligility.com/2010/12/proguard-for-android-with-maven-without-shooting-yourself-in-the-foot/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:52:29.113

看这里 [https://github.com/mosabua/maven-android-plugin-samples/tree/master/morseflash/morseflash-app](https://github.com/mosabua/maven-android-plugin-samples/tree/master/morseflash/morseflash-app)

有一个带有 pom 文件的 Proguard 配置。

# uitextfield - 以编程方式更改 UITextField 大小

> ID：14281584
> 
> 赞同：0
> 
> 时间：2013-01-11T15:42:59.680
> 
> 标签：uitextfield, xcode4.5, cgrectmake

我的故事板中有一个 UITextField，我将其绑定到 ViewController.h

```
@property (weak, nonatomic) IBOutlet UITextField *username; 
```

在 ViewController.m 我想改变这个 UITextField 用户名的大小和位置

```
[_username setFrame:CGRectMake(10.0, 10.0, 300.0, 200.0)]; 
```

我没有收到任何错误，但 UITextField 用户名没有任何反应。它仍然像在IB中一样。

怎么了？

谢谢

# sharepoint - 分析图表/性能点中的格式数字

> ID：14281587
> 
> 赞同：0
> 
> 时间：2013-01-11T15:43:23.653
> 
> 标签：sharepoint, sharepoint-2010, performancepoint, dashboard-designer

是否可以在分析图中指定数字的格式？

到目前为止，我知道可以给出一个属于仪表板的数字。不是这样，分析图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:38:10.323

是的，这是可能的。您可以通过使用性能点设计器并转到功能区中的编辑 -> 格式数字来选择分析图表的数字格式。

如果您使用自己的 MDX，则可以使用 FORMAT_STRING。请参阅[http://msdn.microsoft.com/en-us/library/cc879322.aspx](http://msdn.microsoft.com/en-us/library/cc879322.aspx)，您可以在其中找到以下示例：

`with member measures.A as 5040, FORMAT_STRING="Currency"`

# python - Python Socket 绑定在 0.0.0.0，无法通过 127.0.0.1 连接

> ID：14281591
> 
> 赞同：2
> 
> 时间：2013-01-11T15:43:37.850
> 
> 标签：python, windows, sockets

我有一台运行绑定到 0.0.0.0:8000 的 Python XMLRPCServer 的 Windows XPSP3 机器，但是当我尝试通过地址 127.0.0.1:8000 上的 httplib HTTPConnection 进行连接时，我收到 socket.connection 错误，errno 10107（未知错误） .

```
C:\Documents and Settings\Matt>netstat -ano

Active Connections

  Proto  Local Address          Foreign Address        State           PID
  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING       940
  TCP    0.0.0.0:445            0.0.0.0:0              LISTENING       4
  TCP    0.0.0.0:3306           0.0.0.0:0              LISTENING       1244
  TCP    0.0.0.0:8000           0.0.0.0:0              LISTENING       3624
  TCP    0.0.0.0:10049          0.0.0.0:0              LISTENING       1184
  TCP    127.0.0.1:1028         0.0.0.0:0              LISTENING       2644
  TCP    192.168.80.132:139     0.0.0.0:0              LISTENING       4
  UDP    0.0.0.0:445            *:*                                    4
  UDP    0.0.0.0:500            *:*                                    696
  UDP    0.0.0.0:1025           *:*                                    1096
  UDP    0.0.0.0:4500           *:*                                    696
  UDP    127.0.0.1:123          *:*                                    1040
  UDP    127.0.0.1:1900         *:*                                    1252
  UDP    192.168.80.132:123     *:*                                    1040
  UDP    192.168.80.132:137     *:*                                    4
  UDP    192.168.80.132:138     *:*                                    4
  UDP    192.168.80.132:1900    *:*                                    1252

C:\Documents and Settings\Matt>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import httplib
>>> h1 = httplib.HTTPConnection('127.0.0.1:8000')
>>> h1.connect()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\httplib.py", line 757, in connect
    self.timeout, self.source_address)
  File "C:\Python27\lib\socket.py", line 571, in create_connection
    raise err
socket.error: [Errno 10107] A system call that should never fail has failed
>>> h1 = httplib.HTTPConnection('192.168.80.132:8000')
>>> h1.connect()
>>> 
```

**编辑：**它在代码块中，但我忘了实际提及它。如果我尝试通过机器的 IP 地址 (192.168.80.132) 连接，则连接成功。

有关更多上下文，这实际上发生在 Cuckoo Sandbox Analyzer.py 脚本的实例中，但我已经能够重新创建上述错误，所以我认为这不是 Cuckoo 的问题，而是 Windows 套接字. 感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T17:38:48.507

结果证明这是我进行的另一次系统修改的结果。这是在恶意软件分析沙箱上，我安装了一个用于监控低级网络流量的工具。即使我卸载了该工具，它也安装了一个持续存在的分层服务提供程序。我删除了那些 LSP，一切正常。

# css - ASP：Mozilla中的DropDownList垂直文本对齐

> ID：14281603
> 
> 赞同：0
> 
> 时间：2013-01-11T15:44:13.733
> 
> 标签：css, firefox, alignment

我使用 ASP:DropDownList 控件在 ASP.net 页面上选择了文本框和下拉列表。

它们在 chrome、IE、opera、safari 中都显示良好，但在 FF 中我得到：

![在此处输入图像描述](../Images/3b122f029deef46e7eb12cbebbfb110c.png)

注意“请选择”在下拉列表中对齐顶部。

代码：

```
<asp:DropDownList runat="server" onclick="changeBorderColor(this.id)" forecolor="White"  style="border:none; Width:352px; font-size:15px; font-family:Arial, helvetica, Verdana; height:35px; color: rgb(0, 0, 0); border: 1px solid rgb(124, 201, 25); border-radius:4px 4px 4px 4px; box-shadow:0px 0px 9px rgb(191, 191, 191) inset; padding-left:10px; " ID="Country" Width="282px" > 
```

我尝试过一些“填充顶部：”但它会导致其他问题。

如何让文本显示在控件的垂直中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:54:28.327

我曾经提出的最好的解决方案是给予`padding-top`和`padding-bottom`。假设现在你有`font-size: 15px;`and `height: 35px;`，所以这意味着`20px`备用，所以添加`padding-top: 10px`and`padding-bottom: 10px`和文本应该垂直居中在你的`input`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:49:22.693

而不是`vertical-align`使用`line-height`30 或其他东西。尝试20到30之间的东西

# jsf - ConfirmDialog 中的 PrimeFaces commandButton 不调用支持 bean

> ID：14281605
> 
> 赞同：10
> 
> 时间：2013-01-11T15:44:17.303
> 
> 标签：jsf, primefaces

我有一个 PrimeFaces 数据表，它显示一组用户，其中包含要在每一行上删除的 commandLink。单击链接时，会出现一个带有“Yes”按钮的confirmDialog，该按钮应调用支持bean 中的“delete”方法。不幸的是，这个方法没有被调用，对话框只是被隐藏了。链接中的参数已设置，因为我在调试器中看到了它。

这是我的页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">
<h:head><title>Manage users</title></h:head> 
<h:body>
<ui:composition template="../../template/commonLayout.xhtml">
    <ui:define name="content">
        <p:layoutUnit position="center">
            <h:form id="datatable">
                <p:tabView>
                    <p:tab title="Users">
                        <p:button value = "Add user" outcome="addUser.xhtml?faces-redirect=true"/>
                        <p:growl id="messages" showDetail="true"/>  
                        <p:dataTable id="usersTable" var="user" value="#{userMB.userList}" paginator="true" rows="25" 
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
                            <p:ajax event="rowEdit" listener="#{userMB.onEditUser}"  />
                            <p:column headerText="First name">
                                <h:outputText value="#{user.firstName}" />  
                            </p:column> 
                            <p:column headerText="Last name">
                                <h:outputText value="#{user.lastName}" />  
                            </p:column> 
                            <p:column headerText="E-mail">
                                <h:outputText value="#{user.email}" />  
                            </p:column>
                            <p:column headerText="Username">
                                <h:outputText value="#{user.username}"/>
                            </p:column> 
                            <p:column headerText="Hire date">
                                <h:outputText value="#{user.hireDate}">
                                    <f:convertDateTime type="date" pattern="dd.MM.yyyy"/>
                                </h:outputText>  
                            </p:column>  
                            <p:column headerText="Working hours">
                                <h:outputText value="#{user.workingHours}" />  
                            </p:column>
                            <p:column headerText="Vacation days">
                                <h:outputText value="#{user.vacationDays}"/>
                            </p:column>

                            <p:column>
                                <h:link outcome="addUser" value="Edit">
                                    <f:param name="userID" value="#{user.id}" />
                                </h:link>
                            </p:column>
                            <p:column>
                                <p:commandLink value="Delete" onclick="deleteConfirmDlg.show()">
                                    <f:setPropertyActionListener value="#{user}" target="#{userMB.currentUser}" />
                                </p:commandLink>
                            </p:column>                             
                        </p:dataTable>

                        <p:confirmDialog id="deleteConfirmDialog" message="Are you sure?" header="Delete user" severity="alert" widgetVar="deleteConfirmDlg" appendToBody="true">
                            <p:commandButton id="confirmDelete" value="Yes" oncomplete="deleteConfirmDlg.hide()" update="usersTable" actionListener="#{userMB.deleteUser}"/>
                            <p:commandButton id="declineDelete" value="No" onclick="deleteConfirmDlg.hide()" type="button"/>
                        </p:confirmDialog>
                    </p:tab>
                    <p:tab title="Teams">
                        <p:button value = "Add team" outcome="addTeam.xhtml?faces-redirect=true"/>
                        <p:dataTable var="team" value="#{userMB.teamList}" paginator="true" rows="25"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
                            <p:column headerText="Name">
                                <h:outputText value="#{team.name}" />  
                            </p:column>
                            <p:column headerText="Team leader">
                                <h:outputText value="#{team.teamLeader.displayName}" />  
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                </p:tabView>
            </h:form>
    </p:layoutUnit>
    </ui:define>
</ui:composition> 
```

支持bean方法：

```
public void deleteUser(ActionEvent event) {
    if (null != currentUser) {
        // check if userID is set and delete
        System.out.println("delete user with id " + currentUser.getId());
        userService.deleteUser(currentUser);
        currentUser = new User();
    }
} 
```

我检查了，我没有嵌套表单，因为这是不调用支持 bean 的最常见情况......

这是我的模板文件：

**CommonLayout.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">
 <h:head>
<h:outputStylesheet library="css" name="default.css"  />
</h:head>  
<h:body>
<p:layout fullPage="true">
<div id ="header">
<ui:insert name="header">
    <ui:include src="commonHeader.xhtml"></ui:include>
</ui:insert>
 </div>
 <div id="left-menu">
<ui:insert name="left-menu">
    <ui:include src="leftMenu.xhtml"></ui:include>
</ui:insert>
 </div>
 <div id ="content">
<ui:insert name="content">
    <ui:include src="commonContent.xhtml"></ui:include>
</ui:insert>
 </div>
</p:layout>
</h:body>
</html> 
```

**CommonHeader.xhtml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>  
<h:body>
    <ui:composition>
        <p:layoutUnit position="north" size="100">
            <h:outputText value="Welcome #{request.remoteUser}!"/> <br />
            <a href="#{request.contextPath}/j_spring_security_logout">Logout</a><br />
        </p:layoutUnit>
    </ui:composition>
</h:body>
</html> 
```

**CommonContent.xhtml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>  
<h:body>
    <ui:composition>
        <p:layoutUnit position="center">
                <ui:include src="../widgets/schedule.xhtml"/>
        </p:layoutUnit>
    </ui:composition>
</h:body>
</html> 
```

**左菜单.xhtml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>  
<h:body>
    <ui:composition>
        <p:layoutUnit position="west" size="200">
        <h:form>
            <p:menu width="100%" rendered="#{request.isUserInRole('ROLE_MANAGER')}">
                <p:submenu label="Management">
                    <p:menuitem value="Manage users" outcome="/pages/management/manageUsers.xhtml?faces-redirect=true"></p:menuitem>
                </p:submenu>
            </p:menu>
            </h:form>
    </p:layoutUnit>
    </ui:composition>
</h:body>
</html> 
```

我正在使用 PrimeFaces 3.4 和 JSF 2.0

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-11T16:08:38.727

这将导致确认对话框的 HTML 表示在 DOM 就绪期间由 JavaScript`<p:confirmDialog ... appendToBody="true">`重新定位到 HTML 元素的末尾。`<body>`

然而，这会导致确认对话框的 HTML 表示不再位于任何表单中。因此，实际上没有提交任何表单，也没有发送请求参数，因此 JSF 将无法识别该操作。

您需要为确认对话框提供自己的`<h:form>`.

```
<p:confirmDialog ...>
    <h:form>
        ...
    </h:form>
</p:confirmDialog> 
```

并且为了避免维护期间的混乱（嵌套表单是非法的），我还建议将该组件移动到模板的末尾，至少*在*"outer"之后`<h:form>`。

# xpages - 计算列表框的单击事件？

> ID：14281606
> 
> 赞同：0
> 
> 时间：2013-01-11T15:44:17.067
> 
> 标签：xpages

我正在使用一些计算字段和重复控件显示一个 HTML 列表框。它工作得很好，包括一个分页列表框选择的寻呼机。

现在我想要列表框的 onclick 事件。客户端点击事件需要填充一个字段。我的点击事件工作正常，但我不知道如何获得该字段的句柄。

在设计器中的客户端单击事件中，我可以简单地执行以下操作： document.getElementById("#{id:lastSelected}").value = namesSelected;

但这似乎对我不起作用，因为我并没有真正通过设计师，所以 #{id:lastSelected} 定义不正确？

无论如何我可以让我的选项行可点击，以便我可以通过设计器添加事件？

或者是否有某种方式可以在我的客户端javascript中以我的方式解决“#{id:lastSelected}”？也许调用 XSP 函数？

这是创建列表框第一部分的计算字段，请注意我是如何执行 onclick 事件的。

```
 var id = "id='" + getClientId("searched") +"ListBox'";     //Generate a unique id for the list box using the computed field name   
 var size= "size=" + compositeData.listBoxSize.toString();  
 var style = "style='width:275px;'";
 var multi = (compositeData.multipleSelect==true) ? "multiple" : ""     
 return "<select " +id + " " + size + " " + style + " " + multi + " onclick='searchedListBoxSingleLeftClick();'>"; 
```

这是我计算每个选项行的方法，这个计算字段在重复控件内

```
 var name = rowData.getColumnValues()[1]; 
 return "<option " + " id='" + rowData + "' value='" + rowData.getUniversalID() + "'>" + name + "</option>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:16:58.330

Bruce - 就像我发送给您的 Name Picker 自定义控件一样，您可以使用 scriptBlock 来显示您需要的组件的 id：

```
var lastSelected = "#{id:lastSelected}"; 
```

然后，在您的客户端 javascript 中，您可以引用该变量：

```
dojo.byId(lastSelected).value = namesSelected 
```

# reporting-services - SSRS（报告服务）部署

> ID：14281607
> 
> 赞同：0
> 
> 时间：2013-01-11T15:44:18.300
> 
> 标签：reporting-services, reporting

我将报告部署到本地服务器中，但是当我单击打开它时，会出现以下错误。你有什么想法来克服这个问题吗？

```
 •    An error occurred during client rendering. 
       o    An error has occurred during report processing. (rsProcessingAborted) 
           Cannot create a connection to data source 'DataSource1'.
                (rsErrorOpeningConnection) 
           The Microsoft Office Access database engine cannot open or write 
               to the file 'C:\Users\USER\Desktop\okul.accdb'. 
               It is already opened exclusively by another user, 
               or you need permission to view and write its data. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:27:41.997

您应该尝试检查 SSRS 使用的帐户是否对该文件夹具有修改权限。

您可以通过 RSCM（Reporting Services 配置管理器）执行此操作。如果那是开发机器，您甚至可以添加本地管理员帐户。单击`"Service Account"`并按照您的方式配置它。

如果您需要，以下是有关如何执行此操作的更详细信息：

[http://technet.microsoft.com/en-us/library/bb522727(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb522727(v=sql.105).aspx)

# android - Android：在 GoogleMap API v2 中绘制从 A 到 B 的路线

> ID：14281610
> 
> 赞同：2
> 
> 时间：2013-01-11T15:44:19.770
> 
> 标签：android, map, gps, routes

正如我们所知，很快 GoogleMap API v1 将被弃用，我们已经看到了一些关于如何在 MapView 中绘制从 A 到 B 的路线的教程（假设 A 是莫斯科的一些建筑物，B 是华沙的一些建筑物）

但是，浏览互联网时，我没有找到任何关于如何在 GoogleMap（不在 MapView 中）获取和绘制路线的体面教程。

在我看过和使用的教程中，使用了 KMLHandler，但解析失败。

那么有谁知道是否可以在 GoogleMap 上绘制从 A 到 B 的路线？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:01:16.810

对的，这是可能的。

Android 开发者网站对整个过程进行了很好的解释： [https ://developers.google.com/maps/documentation/android/lines](https://developers.google.com/maps/documentation/android/lines)

# string - 有没有办法从字符串中删除空字符（不是空格）？

> ID：14281611
> 
> 赞同：0
> 
> 时间：2013-01-11T15:44:19.440
> 
> 标签：string, null, character

我在 java 中创建了一个字符数组`char ab[50];`来一次使用 1 个字符存储名称。然后我使用构造函数将数组转换为字符串`String t=new String(ab);`

但是，如果名称是 40 个字符，那么最后 10 个字符就是`000`这样。任何想法如何只获得名称？

没问题伙计们我修好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:47:09.197

您可以通过用零填充数组来初始化数组。

# php - 用户提供的模板的模板引擎

> ID：14281612
> 
> 赞同：0
> 
> 时间：2013-01-11T15:44:20.640
> 
> 标签：php, twig, template-engine

我正在寻找一种高效、快速且最重要的是安全的模板引擎，我可以将它与我的 CMS 集成。

该引擎将处理用户提交的模板并生成输出（类似于 Shopify 用户提供的模板）。

在研究过程中，我发现了 Twig（带有沙盒选项），而且非常有趣的是 Shopify 上使用的实际引擎[http://code.google.com/p/php-liquid/](http://code.google.com/p/php-liquid/)

您对这种类型的系统有任何经验吗？我正在考虑从头开始构建一个，但我可以更好地花时间开发独特的功能。

PS：引擎应该是PHP。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:59:09.027

我经常使用 Twig 并喜欢它，但我没有按照您的用例中所述使用它，所以我不知道。过去，我还为熟人开发了一些 Shopify 布局。

我说如果您打算使用 Twig 来模板化应用程序的其余部分（即受信任的代码），那么只需使用 Twig - 除非它具有您需要该 Twig 的特定重要功能，否则在链中添加另一个工具是没有意义的没有。

如果您不打算将 Twig 用于其他任何事情，那么您可以选择任何一种方式。虽然，从你的谷歌代码链接来看，除非他们刚刚搬到 Github 或其他地方，否则该项目似乎已经死了。对主干的最后一次提交是在 2006 年 :-(

# ember.js - 如何使用 Router v2.1 在 Ember 中命名路由、模板和视图？

> ID：14281614
> 
> 赞同：1
> 
> 时间：2013-01-11T15:44:26.630
> 
> 标签：ember.js

路由 API 已再次更改（“v2.1”）。我在将代码调整为最新更改时遇到问题。这是我的路由：

```
App.Router.map(function(match) {
  (match("/")).to("index");
  (match("/project")).to("project", function(match) {
    (match("/settings")).to("setup", function(match) {
      (match("/basics")).to("basics");
    });
  });
  (match("/user")).to("user", function(match) {
    (match("/settings")).to("setup", function(match) {
      (match("/basics")).to("basics");
    });
  });
}); 
```

**这里应该如何调用模板、路由和视图？**

完整的可编辑代码可以在[http://jsfiddle.net/stephanos/mgp7F/20/](http://jsfiddle.net/stephanos/mgp7F/20/)下找到。

**编辑**

我还有旧版本的 EmberJS，更新：http: [//jsfiddle.net/stephanos/mgp7F/26/](http://jsfiddle.net/stephanos/mgp7F/26/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:15:03.720

您的 {{#linkTo}} 助手需要遵循 child.parent 命名约定。

因此，在示例中更改为：-

```
{{#linkTo projectSetup.basics}}User Settings{{/linkTo}}
{{#linkTo userSetup.basics}}Project Settings{{/linkTo}} 
```

# authentication - Artifactory 可以连接到安全的 Amazon S3 存储桶吗？

> ID：14281617
> 
> 赞同：1
> 
> 时间：2013-01-11T15:44:33.827
> 
> 标签：authentication, amazon-s3, artifactory

Artifactory 可以代理到安全的 Amazon S3 存储桶吗？我们在 S3 上托管了一些静态库，但我们希望确保它们的安全。Artifactory 是否有插件或内置方式使用访问密钥和秘密密钥向 Amazon S3 存储桶发出请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:08:54.570

Artifactory 目前使用 BASIC HTTP 对远程仓库进行身份验证。这不适用于 S3，因此您可以考虑使用网关服务（例如 www.s3auth.com）

您可能希望在[http://issues.jfrog.com](http://issues.jfrog.com)上打开一个请求，我们将考虑添加它，因为它似乎是一个非常明智的添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T20:15:41.470

Artifactory 从 3.6 开始原生支持 S3 存储。

*   [http://www.jfrog.com/confluence/display/RTF/S3+Object+Storage](http://www.jfrog.com/confluence/display/RTF/S3+Object+Storage)

> ### 支持任何 S3 兼容的分布式文件系统
> 
> Arifactory 的支持基于 S3 协议。Artifactory 也将支持任何使用 S3 的提供程序，例如 Ceph、Swift 等。借助对 AWS S3 版本 4 的支持，您可以使用签名版本 4 对 AWS 请求进行签名。

# javascript - 如何根据组合框的值更改 magento 自定义选项的输入类型？

> ID：14281623
> 
> 赞同：0
> 
> 时间：2013-01-11T15:44:58.850
> 
> 标签：javascript, dynamic, magento-1.7

我有两个 magento 产品自定义选项。第一个是可以为任何产品购买的许可证数量的组合框，第二个是许可证域（为哪个域购买）的文本框。

在组合框中，我有像单一许可证、2 到 5 许可证和 5+许可证这样的值。

因此，我的要求是，我要将文本区域设置为第二个自定义选项的输入类型，而不是在选择单个许可证以外的组合框值时，而不是文本框。

在文本框中有一个域验证。所以现在我想允许用户在选择组合框值而不是单个许可证时将多个域输入到该文本区域。

如果您有任何想法，请以任何方式绘制我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:02:44.333

自定义选项具有输入类型«文本 - 区域»

![在此处输入图像描述](../Images/5c06b7e396aa2b66f66828fa4951ecde.png)

那么，使用它有什么问题呢？

# java - 与客户端证书的 SSL 重新协商导致服务器缓冲区溢出

> ID：14281628
> 
> 赞同：6
> 
> 时间：2013-01-11T15:45:11.457
> 
> 标签：java, apache, ssl, jsse

我编写了一个 Java 客户端应用程序，该应用程序使用客户端证书通过 HTTPS 连接到 Apache Web 服务器，并执行文件的 HTTP PUT 到服务器。它适用于小文件，但适用于大文件。

Apache 服务器日志显示以下内容：

```
...
OpenSSL: Handshake: done
...
Changed client verification type will force renegotiation
...
filling buffer, max size 131072 bytes
...
request body exceeds maximum size (131072) for SSL buffer
could not buffer message body to allow SSL renegotiation to proceed
...    
OpenSSL: I/O error, 5 bytes expected to read on BIO
(104)Connection reset by peer: SSL input filter read failed.
(32)Broken pipe: core_output_filter: writing data to the network
Connection closed to child 20 with standard shutdown 
```

客户端的响应是：

```
java.io.IOException: Server returned HTTP response code: 401 for URL 
```

我不熟悉这个过程，所以我不确定这里是否需要重新谈判，或者我是否可以做些什么来阻止它。或者我可以让客户端等到重新协商完成后再发送应用程序数据？这是客户端代码的摘录（已删除错误处理）：

```
 URL url = new URL("my url goes here");
        con = (HttpsURLConnection) url.openConnection();
        con.setSSLSocketFactory(getMyCustomClientCertSocketFactory());
        con.setRequestMethod("PUT");
        con.setDoOutput(true);
        con.connect();
        writer = new OutputStreamWriter(con.getOutputStream());
        writer.write(xml);
        writer.close();

        parseServerResponse(con.getInputStream()); 
```

我在想也许我需要使用像 SSLSocket 这样的较低级别的 API 并利用 HandshakeCompletedListener？

我还想知道 Apache SSLVerifyDepth 指令是否与重新协商发生的原因有关。我在每个目录上下文（只有一个上传目录）中获得了值为 2 的指令，Apache 手册对此进行了说明：

> 在每个目录上下文中，它在读取 HTTP 请求之后但在发送 HTTP 响应之前强制使用重新配置的客户端验证深度进行 SSL 重新协商。

这里要求的是 Java 调试输出：

```
keyStore is : 
keyStore type is : jks
keyStore provider is : 
init keystore
init keymanager of type SunX509
trustStore is: C:\Program Files\Java\jdk1.6.0_35\jre\lib\security\cacerts
trustStore type is : jks
trustStore provider is : 
init truststore
adding as trusted cert:
 ...
trigger seeding of SecureRandom
done seeding SecureRandom
***
found key for : key-alias
chain [0] = [
[
...
]
***
trigger seeding of SecureRandom
done seeding SecureRandom
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  ...
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
***
main, WRITE: TLSv1 Handshake, length = 75
main, WRITE: SSLv2 client hello message, length = 101
main, READ: TLSv1 Handshake, length = 81
*** ServerHello, TLSv1
RandomCookie:  ...
Session ID:  ...
Cipher Suite: TLS_RSA_WITH_AES_128_CBC_SHA
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
%% Created:  [Session-1, TLS_RSA_WITH_AES_128_CBC_SHA]
** TLS_RSA_WITH_AES_128_CBC_SHA
main, READ: TLSv1 Handshake, length = 4392
*** Certificate chain
chain [0] = [
[
...
Certificate Extensions: 8
[1]: ObjectId: 1.3.6.1.5.5.7.1.1 Criticality=false
AuthorityInfoAccess [
  [
   accessMethod: ...
   accessLocation: URIName: ...
   accessMethod: ...
   accessLocation: URIName: ...
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
...
]
]
[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:false
  PathLen: undefined
]
[4]: ObjectId: 2.5.29.31 Criticality=false
CRLDistributionPoints [
  [DistributionPoint:
     [URIName: ...
]]
[5]: ObjectId: 2.5.29.32 Criticality=false
CertificatePolicies [
  [CertificatePolicyId: ...
[PolicyQualifierInfo: [
  qualifierID: ...
  qualifier: ...
]]  ]
]
[6]: ObjectId: 2.5.29.37 Criticality=false
ExtendedKeyUsages [
  serverAuth
  clientAuth
]
[7]: ObjectId: 2.5.29.15 Criticality=true
KeyUsage [
  DigitalSignature
  Key_Encipherment
]
[8]: ObjectId: 2.5.29.17 Criticality=false
SubjectAlternativeName [
  DNSName: ...
]
]
  Algorithm: [SHA1withRSA]
  Signature:
...
]
...
***
main, READ: TLSv1 Handshake, length = 4
*** ServerHelloDone
*** ClientKeyExchange, RSA PreMasterSecret, TLSv1
main, WRITE: TLSv1 Handshake, length = 518
SESSION KEYGEN:
PreMaster Secret:
...
CONNECTION KEYGEN:
Client Nonce:
...
Server Nonce:
...
Master Secret:
...
Client MAC write Secret:
...
Server MAC write Secret:
...
Client write key:
...
Server write key:
...
Client write IV:
...
Server write IV:
...
main, WRITE: TLSv1 Change Cipher Spec, length = 1
*** Finished
verify_data:  { 18, 162, 18, 251, 82, 111, 87, 133, 53, 240, 114, 155 }
***
main, WRITE: TLSv1 Handshake, length = 48
main, READ: TLSv1 Change Cipher Spec, length = 1
main, READ: TLSv1 Handshake, length = 48
*** Finished
verify_data:  { 46, 206, 8, 40, 63, 252, 99, 190, 251, 183, 110, 201 }
***
%% Cached client session: [Session-1, TLS_RSA_WITH_AES_128_CBC_SHA]
main, WRITE: TLSv1 Application Data, length = 256
main, WRITE: TLSv1 Application Data, length = 32
main, WRITE: TLSv1 Application Data, length = 16416
main, WRITE: TLSv1 Application Data, length = 16416
...
main, WRITE: TLSv1 Application Data, length = 16416
main, WRITE: TLSv1 Application Data, length = 16416
main, WRITE: TLSv1 Application Data, length = 512
main, READ: TLSv1 Application Data, length = 304 
```

这里要求的是 getMyCustomClientCertSocketFactory 源（从 PEM 文件中获取证书和密钥）：

```
public static SSLSocketFactory getMyCustomClientCertSocketFactory(String pemPath,
        boolean verifyPeer)
        throws NoSuchAlgorithmException, FileNotFoundException, IOException,
        KeyStoreException, CertificateException, UnrecoverableKeyException,
        KeyManagementException, InvalidKeySpecException {
    SSLContext context = SSLContext.getInstance("TLS");

    byte[] certAndKey = IOUtil.fileToBytes(new File(pemPath));
    byte[] certBytes = parseDERFromPEM(certAndKey,
            "-----BEGIN CERTIFICATE-----", "-----END CERTIFICATE-----");
    byte[] keyBytes = parseDERFromPEM(certAndKey,
            "-----BEGIN PRIVATE KEY-----", "-----END PRIVATE KEY-----");

    X509Certificate cert = generateX509CertificateFromDER(certBytes);
    RSAPrivateKey key = generateRSAPrivateKeyFromDER(keyBytes);

    KeyStore keystore = KeyStore.getInstance("JKS");
    keystore.load(null);
    keystore.setCertificateEntry("cert-alias", cert);
    keystore.setKeyEntry("key-alias", key, "changeit".toCharArray(),
            new Certificate[]{cert});

    KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
    kmf.init(keystore, "changeit".toCharArray());

    KeyManager[] km = kmf.getKeyManagers();

    TrustManager[] tm = null;

    if (!verifyPeer) {
        tm = new TrustManager[]{new TrustyTrustManager()};
    }

    context.init(km, tm, null);

    return context.getSocketFactory();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T18:56:39.450

Sun Java 中内置的 HttpsUrlConnection 工具似乎无法以服务器友好的方式处理带有客户端证书的大型 HTTP PUT（即不会溢出服务器 SSL 重新协商缓冲区）。

我检查了 curl 正在做什么以了解“服务器友好的含义”，结果发现有一个名为“Expect”的 HTTP 1.1 标头，curl 发送的值为“100-continue”（参见规范[http://www.w3 .org/Protocols/rfc2616/rfc2616-sec14.html#sec14.20](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.20)）。这个标头本质上是说“我有一个巨大的有效载荷，但在我发送它之前，请告诉我你是否可以处理它”。这使端点有时间在发送有效负载之前重新协商客户端证书。

在 Sun HttpUrlConnection 实现中，似乎不允许使用此标头，实际上它位于受限标头列表中；这意味着即使您使用 HttpUrlConnection.setRequestProperty 方法设置它，标头也不会实际发送到服务器。您可以使用系统属性 sun.net.http.allowRestrictedHeaders 覆盖受限制的标头，但是由于 Sun 实现不知道如何处理协议的这一部分，因此客户端只会因套接字异常而崩溃。

有趣的是，Java 的 OpenJDK 实现似乎确实支持此标头。此外，Apache HTTP 客户端库支持此标头 ( [http://hc.apache.org/](http://hc.apache.org/) )；我已经使用 Apache HTTP 客户端库实现了一个测试程序，它可以使用客户端证书和 Expect 标头成功执行大文件的 HTTP PUT 请求。

回顾一下，解决方案是：

1.  将 Apache SSLRenegBufferSize 指令设置为一个巨大的数字（如 64MB）。默认值为 128K。此解决方案可能会产生拒绝服务风险
2.  配置一个始终需要客户端证书的主机，而不是只有少数目录需要它的主机。这样可以避免重新谈判。在我的场景中，这不是一个好的选择，因为大多数用户都是匿名的或用户名/密码经过身份验证的。只有一个上传目录用于以编程方式上传文件。我们将不得不为这个目录创建一个具有自己的 SSL 证书的新虚拟主机。
3.  使用支持 HTTP 1.1 Expect 标头的客户端。不幸的是，Sun Java 不支持这个开箱即用。必须使用第三方，例如 Apache HTTP 组件客户端库或使用 Java 套接字 API 推出您自己的解决方案。
4.  利用 HTTP 1.1 持久连接（使用 keep-alive 进行流水线化），首先发出一个没有大负载但会导致重新协商的 HTTP 请求，然后将连接重用于 HTTP PUT。从理论上讲，客户端应该能够在上传目录上发出 HTTP HEAD 或 OPTIONS，然后重用相同的连接来执行 PUT。为了使其工作，持久连接池可能只需要包含一个连接，以避免“启动”一个连接，然后为 PUT 发出另一个连接。但是，HttpUrlConnection 类似乎不会保留/重用涉及客户端证书或 SSL 的持久连接，因为我无法让这个解决方案正常工作。请参阅（[HttpsUrlConnection 和 keep-alive](https://stackoverflow.com/questions/9943351/httpsurlconnection-and-keep-alive)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:26:15.617

> java.io.IOException：服务器返回 HTTP 响应代码：URL 为 401

这是一个应用程序错误。它不是由 SSL 层引起的。我不确定你为什么要获取`401 Unauthorized`更大的文件，但你也忽略了什么你也`getMyCustomClientCertSocketFactory()`
尝试过另一种方法，例如`POST`？你有同样的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T23:48:15.710

基于现在提供的所有额外信息，我认为您应该将 XML 编写成多个块而不是一个块。目前您正在编写一个块，它将被 SSL 分块成 16k 块，由于某种原因（它不应该）阻塞 Apache。我会尝试不大于 4k 的块大小。调整块大小直到它工作。

一旦通过了这个问题，您很可能会发现客户端证书问题。不要气馁，这证明你至少解决了这个问题。

# mongodb - 在没有互联网连接的情况下在 ubuntu 12.04 上安装 mongodb

> ID：14281629
> 
> 赞同：0
> 
> 时间：2013-01-11T15:45:12.750
> 
> 标签：mongodb, ubuntu

我正在尝试在没有互联网连接的计算机上安装 mongodb，但我找不到在没有连接到互联网的情况下如何安装它的方法。有人知道是否有可能这样做吗？

# python - urllib2.URL错误：

> ID：14281630
> 
> 赞同：2
> 
> 时间：2013-01-11T15:45:19.567
> 
> 标签：python, python-2.7, beautifulsoup, urllib2, microformats

我正在使用以下代码从网页[http://ajaxian.com](http://ajaxian.com)抓取 XFN 内容， 但我收到以下错误：

```
 Traceback (most recent call last):  File      "C:\Users\Somnath\workspace\us.chakra.social.web.microformat\src\microformats_xfn_scrape.py", line 40, in <module>
page = urllib2.urlopen(URL)
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 394, in open
response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 417, in _open
'unknown_open', req)
  File "C:\Python27\lib\urllib2.py", line 372, in _call_chain
result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1232, in unknown_open
raise URLError('unknown url type: %s' % type)
urllib2.URLError: <urlopen error unknown url type: c> 
```

我的代码如下：

```
'''
Created on Jan 11, 2013

@author: Somnath
'''
# Scraping XFN content from a web page
# -*-coding: utf-8 -*-

import sys
import urllib2
import HTMLParser
from BeautifulSoup import BeautifulSoup

# Try http://ajaxian.com
URL = sys.argv[0]

XFN_TAGS = set([
            'colleague',
            'sweetheart',
            'parent',
            'co-resident',
            'co-worker',
            'muse',
            'neighbor',
            'sibling',
            'kin',
            'child',
            'date',
            'spouse',
            'me',
            'acquaintance',
            'met',
            'crush',
            'contact',
            'friend',
            ])

#try:
page = urllib2.urlopen(URL)
#except urllib2.URLError:
#    print 'Failed to fetch ' + item

#try:
soup = BeautifulSoup(page)
#except HTMLParser.HTMLParseError:
#    print 'Failed to parse ' + item

anchorTags = soup.findAll('a')

for a in anchorTags:
    if a.has_key('rel'):
        if len(set(a['rel'].split()) & XFN_TAGS) > 0:
            tags = a['rel'].split()
            print a.contents[0], a['href'], tags 
```

我在 Eclipse 下运行 PyDev 并使用 Run As --> Python Run 并使用参数“http://ajaxian.com/”设置运行时配置。任何人都可以建议我哪里出错了吗？

还有一件事：我在代码中注释了两个 try 块，因为它给出了一个错误 undefined variable : item. 如果我想重新包含 try-except 块，我应该在 try 块之外给出变量、项目的空白定义吗？我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:54:58.067

正如您建议的那样`sys.argv[0]`打印脚本的路径，那是因为您将脚本称为

```
python microformats_xfn‌​_scrape.py <some_argument> 
```

这里 sys.argv 的 index 0 是脚本的名称，而不是参数。

您需要做的是使用`<url>`参数调用脚本，例如：

```
python microformats_xfn‌​_scrape.py http://www.ajaxian.com/ 
```

并在您的脚本中更改`sys.argv[0]`为`sys.argv[1]`url 参数索引为 1。

# javascript - 如何关闭带有类的 jquery 对话框？

> ID：14281631
> 
> 赞同：0
> 
> 时间：2013-01-11T15:45:19.520
> 
> 标签：javascript, jquery, class, modal-dialog

我有很多对话框，我需要一个简单的关闭按钮解决方案。我真的不想编写大量代码来关闭每个代码。

我想对要关闭对话框的所有按钮和链接使用 class="btnDone"。除了为每个对话框中每个按钮的每个实例编写单独的函数之外，还有更简单的方法吗？

以下是其中一个对话框代码的示例：

```
 <script>
    // increase the default animation speed to exaggerate the effect
    $.fx.speeds._default = 1000;
    $(function() {
        $( "#forgotPassword" ).dialog({position:['middle',60],
            open: function(event, ui) {  
            jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span style="float:right;"><img src="../images/x.png" /></span>');  
        },  
            dialogClass: 'ui-widget-shadow',
            modal: true,    
            autoOpen: false,
            width: '650px',
            close: function(ev, ui) {$(this).close();}
        });

        $( ".forgotPasswordOpen" ).click(function() {
            $( "#forgotPassword" ).dialog( "open" );
            return false;
        });
    });
    </script>
<div style="display:none">
    <div id="forgotPassword">
        <!--#include file="modal08.asp"-->
    </div>
</div> 
```

如何使用 class="btnDone" 编写关闭函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:50:51.993

你看过[API](http://api.jqueryui.com/dialog/#method-close)吗？就像打开一个

```
$( ".btnDone" ).click(function(){
  $('.ui-dialog-content').dialog( "close" );
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:50:30.337

我认为您正在尝试拥有一个关闭所有对话框的主按钮。如果每个对话框都包含一个样式为 的按钮`.btnDone`，例如：

```
<div>
My great dialog
<button class="btnDone">Get outta here</button>
</div>

<div>
Another thought
<button class="btnDone">Close</button>
</div>

<div>
Check this out
<button class="btnDone">Away!</button>
</div> 
```

您可以使用`$('.btnDone').parent('div').dialog('close');`关闭或`$('.btnDone').parent('div').hide();`隐藏所有对话框。

有关工作示例，请参见[http://jsfiddle.net/jhfrench/PHcL4/1/ 。](http://jsfiddle.net/jhfrench/PHcL4/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:51:32.350

```
<script>
   $( ".btnDone" ).click(function() {
       $(this).parent().dialog( "close" );
   });
</script>
<div id="forgotPassword">
   <input type="button" class="btnDone" value="Done" />
</div>
<div id="forgotUsername">
   <input type="button" class="btnDone" value="Done" />
</div> 
```

假设按钮在对话框中，您需要做的就是调用按钮的 .parent() 以引用该特定对话框。

不过，我之前没有使用过 jQuery UI，所以不知道“关闭”是否是您传递给对话框以关闭它的内容。

# matlab - 自适应对比度增强

> ID：14281634
> 
> 赞同：1
> 
> 时间：2013-01-11T15:45:29.703
> 
> 标签：matlab, histogram

我在这里需要一些帮助.. 如何使用 matlab 创建此应用程序.. 使用自适应对比度增强的图像增强.. 这是我将遵循的建议方法..

这里提出的方法以受控和局部的方式使用 HE 来拉伸暗图像中的细节，同时提高更亮图像的整体对比度。由于在每一帧中产生的局部自适应效果，它被称为自适应对比度增强 (ACE)。所提出的算法首先将亮度水平的直方图划分为三个区域——暗、中和亮。这些区域大小相同。然后使用 HE 独立处理这三个区域中的每一个。然后根据每个区域的直方图形状降低 HE 的效果。

# php - 使用 Facebook PHP SDK 登录在家可以工作，但不能在工作中使用（getUser() 返回 0）

> ID：14281636
> 
> 赞同：0
> 
> 时间：2013-01-11T15:45:31.643
> 
> 标签：php, facebook, sdk

这是我第一次尝试与 Facebook 合作。几天前，我花了很多时间在工作上，试图让一切正常工作。根据 Facebook 文档中的所有示例，看起来一切都井井有条，但它就是行不通。这些文件托管在一个站点上，所以我不想从 localhost 或类似的东西工作，我在 facebook 上有正确的应用程序站点设置。

那天晚上我回家后，我决定多做一些工作，当我启动网站时，它的工作方式完全符合预期。我想它一定需要一段时间才能让应用程序设置生效等等，然后整夜继续工作。取得了一大堆进展，并称之为一个晚上。

第二天上班。我打开我的网络浏览器，前往该网站再次查看我的出色进展，但不起作用。远程桌面到家用电脑，工作正常。在我妻子的 windows 计算机上的 IE、firefox 和 chrome 中运行良好，在我的 linux 桌面上的 firefox 和 chrome 中运行良好。在工作中，它不适用于 IE、firefox 或 chrome。这些*都不*重要，因为我没有在客户端做任何事情。

我尝试取消对应用程序的授权，它会将我发送到我接受的授权页面，但随后它仅以用户身份返回 0。我不明白为什么这不一样，它都是服务器端的，我只是想在这一点上回应用户。

编辑：此外，取消授权和重新授权在家里也可以正常工作。

EDIT2：这是简单的代码。

```
<?php
require 'facebook.php';  //sdk
$facebook = new Facebook(array(
  'appId' => 'yep',
  'secret' => 'yep'
));

try {
    $uid = $facebook->getUser();
    $fbme = $facebook->api('/me');
} catch (FacebookApiException $e) { 
    print_r($e);
}
?> 
```

即使在取消授权和重新授权应用程序和权限之后，它也会导致此错误消息。“必须使用活动访问令牌来查询有关当前用户的信息。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:54:19.373

我唯一能想象的是某种防火墙、访问门或浏览器安全设置，它们限制了在办公室通过网络发送的 cookie（会话 cookie）的使用。

Facebook SDK 使用会话，因此当您的浏览器在工作时不发送会话 cookie 或网络过滤它们时......这就是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:14:23.563

所以，它现在正在工作。但我不知道为什么没有。

这就是我所做的：

1.  取消授权的应用
2.  清除 cookie 和缓存
3.  重新启动计算机（我全力以赴）
4.  回到网站
5.  重新授权的应用

有用。

我以前没有尝试过的唯一事情是＃2。

**编辑：不再在工作或在家工作。我取消了应用程序的授权，在重新授权并重新接受权限后，我认为它会给我一个全新的、闪亮的、新的访问令牌，但我一直收到相同的错误消息。**

# javascript - 如何使用 Yeoman 缩小 Bower 组件？

> ID：14281637
> 
> 赞同：3
> 
> 时间：2013-01-11T15:45:37.100
> 
> 标签：javascript, angularjs, yeoman, bower

当我执行时：

```
yeoman init angular
yeoman install https://github.com/angular/bower-angular.git
yeoman build 
```

然后

```
ls dist/components/bower-angular/ 
```

返回

```
angular.js  component.json 
```

虽然我希望 angular.js 被缩小并重命名为 d10639ae.angular.js 或类似的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T21:35:15.010

Yeoman 中的缩小由以下人员负责`usemin-handler`：

**GruntFile.js**

```
 // usemin handler should point to the file containing
    // the usemin blocks to be parsed
    'usemin-handler': {
      html: 'index.html'
    }, 
```

所以打开你的`index.html`：

它应该包含如下代码：

```
 <script src="scripts/vendor/angular.js"></script>

    <!-- build:js scripts/scripts.js -->
    <script src="scripts/app.js"></script>
    <script src="scripts/controllers/main.js"></script>
    <!-- endbuild --> 
```

`build:js`和之间的一切都`endbuild`将被缩小。因此，如果您想缩小其他库，请将它们放在这两个注释行之间。

**注意：** Yeoman 有一个角种子：

```
yeoman init angular 
```

# c# - 为什么不使用本地化资源？

> ID：14281641
> 
> 赞同：1
> 
> 时间：2013-01-11T15:45:51.213
> 
> 标签：c#, asp.net, localization, cultureinfo

我正在做一个现有的项目，我目前面临一个奇怪的问题：

在主 Web 项目中，文件夹中存储了一些资源文件`App_GlobalResources`：

*   `Application.fr.resx`
*   `Application.resx`
*   `Application.designer.cs`

在代码中，以这种方式访问​​这些资源：

```
global::Resources.Application.Some_Resource 
```

这可行，并且在设置为 FR 文化时可以找到本地化的资源。

在另一个项目（由主 Web 项目引用）中，资源存储在一个`Resources`文件夹中：

*   `Messages.fr.resx`
*   `Messages.resx`
*   `Messages.designer.cs`

并通过调用访问它们：

```
My.Project.Namespace.Messages.Some_Other_Resource 
```

在这种情况下，找到并使用了资源，但不考虑文化，返回的值始终是默认值。

我四处搜索，但没有发现任何真正有用的东西。我不熟悉 ASP.NET 文化，所以也许我错过了一些明显的东西。

知道为什么会这样吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:04:45.007

我在一些项目中遇到了这个问题。我的猜测是，在你的一个项目中，你设置了 UICulture，但你没有在另一个项目中这样做。这可能在您的“基本”页面代码或全局应用程序代码中。

# ant - 如何让ant识别项目存储库中的junit.jar

> ID：14281643
> 
> 赞同：0
> 
> 时间：2013-01-11T15:46:00.753
> 
> 标签：ant, junit, compilation, classpath

我有一个使用 JUnit 进行单元测试的项目。问题是当我尝试从 Eclipse 编译和运行我的项目时，一切都运行良好，但是当我尝试使用 Ant 编译时，我收到大量错误，它无法识别来自 JUnit 的任何函数（如`test()`）。我`junit.jar`在项目文件夹中复制，我的类路径是“./”，但它仍然不起作用。有人知道我应该怎么做才能完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:24:03.690

编译测试代码时，您需要确保 JUnit jar 在您的类路径中。您还需要所有其他依赖项，以及您之前编译的类的类路径。

假设这是您编译常规代码的方式：

```
<property name="main.lib.dir"   value="???"/>
<property name="junit.jar"      value="???"/>

<target name="compile"
    description="Compile my regular code">
    <javac srcdir="${main.srcdir}"
        destdir="${main.destir}">
        <classpath path="${main.lib.dir}"/>
    </javac> 
```

请注意，我有一个目录，其中包含我的代码所依赖的所有 jar。这是`${main.lib.dir}`. 请注意，我的类被编译为`${main.destdir}`. 另请注意，我有一个属性指向`${junit.jar}`. 我还没用那个。

现在编译我的测试类：

```
<target name="test-compile"
    description="Compile my JUnit tests">
    <javac srcdir="${test.srcdir}"
        destdir="${test.destdir}">
        <classpath path="${main.lib.dir}"/>
        <classpath path="${main.destdir}"/>
        <classpath path="${junit.jar}"/>
    </javac> 
```

请注意，我的类路径中现在有三个项目：

1.  我编译的代码所依赖的罐子。
2.  我编译非测试 Java 代码的目录
3.  还有 JUnit jar 本身。

编译测试类后，您现在可以使用该`<junit>`任务来运行测试：

```
<junit fork="true"
    includeantruntime="true">
    <formatter .../>
    <batchtest todir="${test.output.dir}"/>
    <classpath="${test.destdir}"/>
</junit> 
```

# pandas - 如何将一行变成地图？

> ID：14281644
> 
> 赞同：0
> 
> 时间：2013-01-11T15:46:01.433
> 
> 标签：pandas

行过去可以用作字符串插值的映射，如下所示：

```
from pandas import *

speeds = read_csv('results.csv')
row = speeds.ix[3]
print("%(my_column_name)s" % row) 
```

几个月前有效，但似乎不适用于最新的 Pandas。如何将一行转换为地图，或者以其他方式对行进行简单简洁的自定义打印？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:24:18.997

这将转换为地图：`speeds.ix[3].to_dict()`

# cxf - 使用 CXF 对 JAX-RS 服务器实现的运行时访问？

> ID：14281645
> 
> 赞同：1
> 
> 时间：2013-01-11T15:46:15.280
> 
> 标签：cxf, jax-rs

我有一个这样的 JAX-RS 服务器声明：

```
<jaxrs:server id="restserver" address="/v1">
    <jaxrs:serviceBeans>
        <ref bean="resource1" />
        <ref bean="resource2" />
        <ref bean="resource3" />
    </jaxrs:serviceBeans>
</jaxrs:server> 
```

我想为我们支持的所有特定资源构建一个运行时列表，例如返回一个列出所有其他资源及其 URI 的顶级 HATEOAS 资源。CXF 有入口点吗？

# java - 如何在 DEBUG 视图中探索服务器的 Spring 上下文

> ID：14281646
> 
> 赞同：2
> 
> 时间：2013-01-11T15:46:16.410
> 
> 标签：java, eclipse, spring

**当我在Eclipse下使用应用程序服务器 (** **JBoss** )调试 Web 应用程序时，我想要一种探索**Spring 上下文 bean**的方法，“实时”，而无需“暂停”或其他任何东西。

 ****这将允许我获取服务并触发一些方法（缓存刷新等）。

这将非常方便。

你知道一个工具、插件还是只是一个技巧来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T14:46:57.727

您能否详细解释一下“我想要一种探索 Spring 上下文 bean 的方法，“实时”，而无需“暂停”或其他任何东西。我会更容易解释更多。如果你想监控，那么 JMX 可能是最好的。Jmx 基于管理 bean 概念。当你定义管理 bean 时，你可以查看它 VisualVm 或 jconsole 工具。jmx 最好的部分是在运行时，您可以更改管理 bean 的值而无需重新启动服务器。假设您定义了一个静态变量 a=10。如果在将其部署到服务器后您需要将其值更改为 20，那么您可以通过 visualVM 工具将其值更改为20.不需要重新编译部署。Spring提供了对JMX的支持。****

# php - jQuery 从 php json_encode 获取数组

> ID：14281647
> 
> 赞同：3
> 
> 时间：2013-01-11T15:46:18.880
> 
> 标签：php, javascript, jquery, json

我在 php.ini 中创建了一个数组。我只是想在 jquery 中获取数据

这是 support.php 中的数组：

```
$postData = array(
        "error" => $error,
        "successInfo" => $successInfo,
        "email" => $_POST["email"],
        "subject" => $_POST["subject"],
        "description" => $_POST["description"],
);

echo json_encode($postData); 
```

我应该在 JavaScript 端使用 jquery.getJSON 做什么？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T16:05:00.973

这在很大程度上取决于您想用它做什么，但这是访问元素键的基本方法。您可以简单地对每个元素键使用点运算符：“data.email”等。

```
$.ajax({
    type: 'POST',
    url: 'support.php',
    success: function(result) {
        var data = jQuery.parseJSON(result);
        alert(data.email);
    }
}); 
```

插入 HTML 元素：

我用 id="landingPad" 创建了一个 div，并用以下命令替换了警告行：

```
$('#landingPad').html(data.email); 
```

列出收到的数据：

然后我把我的 div 变成了一个无序列表：

```
<ul id="landingPad"></ul> 
```

更改成功函数后，它列出了从 support.php 接收到的所有数据：

```
$(document).ready(function(){
    $.ajax({
        type: 'POST',
        url: 'support.php',
        success: function(result) {
            var data = jQuery.parseJSON(result);
            $.each(data, function(index, value) {
                $("#landingPad").append("<li>" + value + "</li>");
            });
        }
    });
}); 
```

使用 AJAX 数据创建表单元素：

接下来，我创建了以下表单：

```
<form name="http://example.com/edit_my_values" action="post">
    <div  id="landingPad"></div>
    <input type="submit" name="go" value="Edit Values"/>
</form> 
```

然后通过编辑 AJAX，我使用收到的值动态创建了一个表单：

```
$(document).ready(function(){
    $.ajax({
        type: 'POST',
        url: 'support.php',
        success: function(result) {
            var data = jQuery.parseJSON(result);
            $.each(data, function(index, value) {
                $("#landingPad").append('<input type="input" name="'+index+'" value="'+value+'"/><br/>');
            });
        }
    });
}); 
```

将数据插入现有表格：

给定以下形式：

```
<form name="http://example.com/edit_my_values" action="post">
    <label for="error">Error </label><input type="text" name="error"/><br/>
    <label for="successInfo">Success </label><input type="text" name="successInfo"/><br/>
    <label for="email">Email </label><input type="text" name="email"/><br/>
    <label for="subject">Subject </label><input type="text" name="subject"/><br/>
    <label for="description">Description </label><input type="text" name="description"/><br/>
</form> 
```

您可以使用 AJAX 数据填充您的字段，如下所示：

```
$(document).ready(function(){
    $.ajax({
        type: 'POST',
        url: 'support.php',
        success: function(result) {
            var data = jQuery.parseJSON(result);
            $.each(data, function(index, value) {
                $('[name='+index+']').val(value);
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:49:12.883

您可以通过这种方式访问​​数组

```
$.ajax({
      type: 'POST',
      url: 'support.php',
      success: function(result) {
        $('#content1').html(result[0]);
      },
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T09:54:19.107

# jQuery

```
success: function(result) {
   var obj = jQuery.parseJSON(result);
   alert(obj.link);
} 
```

> 注意：使用**jQuery.parseJSON()**函数，获取所有数据而不会出错。

# php

> 提示：如果数组可能包含*html 标记*，则对数据进行如下编码：

```
$data['success']='1';
$data['link']="<a href='http://stackoverflow.com/' target='_blank' style='color:#68dff0'>Click Here</a>";
echo json_encode($data, JSON_HEX_QUOT | JSON_HEX_TAG); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T00:10:33.077

这是一个完整的工作版本：

```
<!DOCTYPE html>
<html lang="en">
    <head>

        <title>HTML</title>

        <script src="http://code.jquery.com/jquery-latest.min.js"></script>

        <script>
            $(document).ready(function(){
                $("#submit").click(function(){
                    fn_val=$('#fn').val(); 
                    ln_val=$('#ln').val(); 
                    $.ajax({
                        type: 'POST',
                        url: 'resp.php',
                        data : {fn: fn_val , ln: ln_val},
                        success: function(result) {
                            var data = $.parseJSON(result);
                            $("#the_results").append('Associative array returned' + '<BR>');
                            $.each(data, function(index, value) {
                                $("#the_results").append("index =  " + index + ', data = ' + value + '<BR>');
                            });
                        }
                    });
                });
            });
        </script>
    </head>

    <body>
        <div>
            First name: <input type="text" name="fn" id='fn'>
            Last Name: <input type="text" name="ln" id='ln'>
            <button id="submit">Pass Data to PHP</button>
        </div>
        <div id="the_results"></div>
    </body>
</html> 
```

那是html文件，下面是php文件resp.php

```
<?php
$resp_arr = array('First Name' => $_POST["fn"], 'Last Name' => $_POST["ln"]);
echo json_encode($resp_arr);
?> 
```

# javascript - Html/CSS 制作网站的实时图片

> ID：14281653
> 
> 赞同：9
> 
> 时间：2013-01-11T15:47:13.940
> 
> 标签：javascript, html, css

我希望在网站上制作一个链接，使其成为链接所在位置的实时变化图片。

例如：我有一个指向页面 A 的链接，所以图片将显示页面 A。如果我想更改页面 A 的颜色，我不必更改链接图片上的任何代码，而只需更改颜色的代码在页面和图片上，颜色会发生变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:58:40.650

您可以使用像[Shrink The Web](http://www.shrinktheweb.com/)这样的商业服务，它会为此功能提供 API。它比一些 CSS/HTML 更密集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:50:38.493

你可以只用一个小的`iframe`. 我会在其顶部放置一个链接，以防止与该页面本身进行任何交互。否则，抓取屏幕截图需要的不仅仅是 HTML 和 CSS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T15:54:38.733

如果我正确理解了您的问题，这些是您的问题的可能性。

1.  使用 iframe，这样您就可以通过更改来更改 iframe 的来源，并且它将反映在使用它的每个地方。
2.  如果您使用的是 Jquery、knockout 或任何模板引擎，那么您可以创建模板。以便您可以更改并重复使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T16:01:41.933

**有免费的工具可以做到这一点，**

您不需要更改图像，但它们使用缓存，您可能需要刷新请求以更新图像

1.  [http://mozshot.nemui.org/](http://mozshot.nemui.org/)
2.  [http://www.websnapr.com/](http://www.websnapr.com/)

它们使用起来非常简单，因为此链接显示了一个非常小的 google 截图，您可以在 html img 标签中使用 at： http: [//mozshot.nemui.org/shot/small?http://www.google。 com/](http://mozshot.nemui.org/shot/small?http://www.google.com/)

## **我的建议：**

第一个（mozshot）是开源的，所以你可以简单地下载和编辑它，把它放在你自己的网站上**以经常更新图像，甚至在每次刷新后更新（这将是实时的，但会占用大量资源）**

这是 mozshot 的源代码：http: [//github.com/sugi/mozshot](http://github.com/sugi/mozshot)

希望这可以帮助

# r - 非参数逆（累积）分布函数

> ID：14281656
> 
> 赞同：2
> 
> 时间：2013-01-11T15:47:25.860
> 
> 标签：r, statistics, kernel

我正在使用内核估计，我将`density`R 中的函数应用于我的数据文件（双变量），经过几次统计处理后，我需要转换这些数据，我的问题来了：

是否存在非参数方法的逆累积分布函数？

我试过谷歌、ethz 论坛、R 帮助，但似乎不见了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:54:02.037

听起来你想要[分位数](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/quantile.html)功能：

```
# simulate some data
mydata = rnorm(1000)

# print the quantiles at a few points
# (it's the inverse of the cumulative distribution function):
print(quantile(mydata, .5))
print(quantile(mydata, .75))

# show the curve from 0 to 1
curve(quantile(mydata, x)) 
```

# android - 清单文件丢失

> ID：14281657
> 
> 赞同：5
> 
> 时间：2013-01-11T15:47:33.800
> 
> 标签：android, xml, manifest

有没有办法重新生成 manifest.xml 文件？出于某种原因，当我在 Eclipse 中关闭我的项目并重新打开它时，它显示以下内容：

**资源 /HTTPTabDemo/AndroidManifest.xml 不存在**

我是否必须创建一个新项目并单独复制文件，或者有什么方法可以修复它？我认为这与我安装在设备上进行测试有关。然后在 IDE 中关闭项目，同时在选项卡栏中打开清单，然后关闭它。

非常烦人，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:48:59.097

这是一个错误。

我有同样的问题。我用谷歌搜索了它，在 Stack Overflow 上搜索了答案，但什么也没有。然后我尝试创建另一个项目，但我无法给它命名我的“错误项目”，因为它仍在工作区中。如此神秘地，我重命名了我的“错误项目”，错误消失了！

例如：

*   您的项目名称是 Proj1
*   将其重命名为 Proj2
*   然后，再次将其重命名为 Proj1

这对我有用。

希望这可以帮助

# android - 使用设备登录的 Google 帐户发送电子邮件

> ID：14281661
> 
> 赞同：5
> 
> 时间：2013-01-11T15:48:01.367
> 
> 标签：android, accountmanager

有没有办法使用设备的*登录 Google 帐户*发送电子邮件？

之前有人问[过](https://stackoverflow.com/questions/2398840/leverage-google-account-credentials-to-send-email-in-android)类似的问题，但没有得到足够的答案，或者可能是很久以前，现在有许多新的 API 可用。

以前，我一直使用[`Intent.createChooser`](https://stackoverflow.com/questions/2197741/how-to-send-email-from-my-android-application)提示用户选择邮件客户端并手动发送邮件。但是这一次，我希望整个过程在没有任何用户交互的情况下完成。我什至不想要求用户提供一次性**SMTP**帐户详细信息或在此过程中使用我自己的详细信息。

我知道，我可以访问[`AccountManager`](http://developer.android.com/reference/android/accounts/AccountManager.html)以获取有关已登录帐户的信息，但它可以帮助我在没有任何用户交互的情况下发送电子邮件（例如以编程方式发送电子邮件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:53:48.773

要以编程方式发送电子邮件（无需任何用户交互），您需要自己定义 smtp 服务器、帐户、密码、端口等 检查此链接：[在 Android 中以编程方式发送电子邮件](https://stackoverflow.com/questions/7274949/send-email-programmatically-in-android)

AccountManager 将帮助您仅获取用户的电子邮件，并且您需要自己查找其他必需参数。

# php - 将两个mysql查询合二为一

> ID：14281663
> 
> 赞同：6
> 
> 时间：2013-01-11T15:48:02.510
> 
> 标签：php, mysql, sql, database, union

组合这两个查询的正确语法是什么？

```
SELECT clicks FROM clicksTable WHERE clicks > 199 ORDER BY clicks ASC LIMIT 1 
```

和

```
SELECT clicks FROM clicksTable ORDER BY clicks DESC LIMIT 1 
```

我试过：

```
SELECT clicks FROM clicksTable WHERE clicks > 199 ORDER BY clicks ASC LIMIT 1
UNION
SELECT clicks FROM clicksTable ORDER BY clicks DESC LIMIT 1; 
```

但我得到“UNION 和 ORDER BY 的错误使用”。

**编辑** 此外，我希望结果在一行中返回。这样我就可以访问 php 中的值，例如

```
$row['nextclick'] and $row['topclick'] 
```

根据西蒙的建议，我不应该使用 UNION 因为我想返回单行数据

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T15:49:50.187

你不能`ORDER BY`在你的第一个`SELECT`然后`UNION`它。

**编辑**
但是你可以

> 将 ORDER BY 或 LIMIT 应用于单个 SELECT，将子句放在括住 SELECT 的括号内：

如在[MySQL UNION 文档中](http://dev.mysql.com/doc/refman/5.1/en/union.html)

```
(SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10); 
```

然后让你的 SQL

```
(SELECT clicks FROM clicksTable WHERE clicks > 199 ORDER BY clicks ASC LIMIT 1)
UNION
(SELECT clicks FROM clicksTable ORDER BY clicks DESC LIMIT 1); 
```

**编辑 2**
返回`array`

```
SELECT (SELECT clicks 
        FROM clicksTable 
        WHERE clicks > 199 
        ORDER BY clicks ASC 
        LIMIT 1) AS NextClick,
       (SELECT clicks 
        FROM clicksTable 
        ORDER BY clicks DESC 
        LIMIT 1) AS TopClick; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T15:49:54.620

```
SELECT clicks FROM
    (SELECT clicks FROM clicksTable WHERE clicks > 199 ORDER BY clicks ASC LIMIT 1) A
UNION
SELECT clicks FROM
    (SELECT clicks FROM clicksTable ORDER BY clicks DESC LIMIT 1) B; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:51:09.507

首先，你想要 a`union`还是 a `union all`？

The problem is the `order by` in the first part. You can fix this, using subqueries:

```
(select * from (SELECT clicks FROM clicksTable WHERE clicks > 199 ORDER BY clicks ASC LIMIT 1))
UNION ALL
(select * from (SELECT clicks FROM clicksTable ORDER BY clicks DESC LIMIT 1)) 
```

In a `union` expression, `order by` is only allowed at the end and it applies to the entire expression.

# android - gridview 异步下载

> ID：14281665
> 
> 赞同：0
> 
> 时间：2013-01-11T15:48:07.353
> 
> 标签：android, multithreading, gridview

我将[http://android-developers.blogspot.gr/2010/07/multithreading-for-performance.html的代码与](http://android-developers.blogspot.gr/2010/07/multithreading-for-performance.html)[http://developer.android.com/training/displaying-bitmaps/index](http://developer.android.com/training/displaying-bitmaps/index.html)结合使用。 [html](http://developer.android.com/training/displaying-bitmaps/index.html)代码。当我尝试从 url 异步下载图像而不更改样本大小时，一切正常。但是当我尝试计算样本大小时，屏幕上没有出现任何内容（gridview）。我阅读了 logcat，发现所有图像都已正确下载。我用于图像下载的代码是下一个：

```
Bitmap downloadBitmap(String url) {

    final HttpClient client = AndroidHttpClient.newInstance("Android");
    final HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) {
            Log.w("ImageDownloader", "Error " + statusCode
                    + " while retrieving bitmap from " + url);
            return null;
        }

        final HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = null;
            try {
                inputStream = entity.getContent();

                // get Device Screen Dimensions
                DeviceProperties dimensions = new DeviceProperties(activity);

                return 
                decodeBitmapFromResource(url, inputStream,
                        dimensions.getDeviceWidth(),
                        dimensions.getDeviceHeight());
            } finally {
                if (inputStream != null) {
                    inputStream.close();
                }
                entity.consumeContent();
            }
        }
    } catch (IOException e) {
        getRequest.abort();
        Log.w(TAG, "I/O error while retrieving bitmap from " + url, e);
    } catch (IllegalStateException e) {
        getRequest.abort();
        Log.w(TAG, "Incorrect URL: " + url);
    } catch (Exception e) {
        getRequest.abort();
        Log.w(TAG, "Error while retrieving bitmap from " + url, e);
    } finally {
        if ((client instanceof AndroidHttpClient)) {
            ((AndroidHttpClient) client).close();
        }
    }
    return null;
} 
```

我用于解码的代码是这样的：

```
public static Bitmap decodeBitmapFromResource(String url, InputStream is,
        int reqWidth, int reqHeight) {
    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();

    options.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(new FlushedInputStream(is), null,
            options);
    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options , reqWidth,
            reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeStream(new FlushedInputStream(is), null,
            options);
} 
```

当我同时使用第一个和第二个 BitmapFactory.decodeStream 时出现问题。如果我只使用第二个一切都可以，但实际上我没有制作任何样品。有什么建议吗？我已经浪费了很多时间来寻找它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:52:06.453

InputStream 只能读取一次，然后就消失了。

如果要进行双通道（一个仅用于边界，第二个用于选项，则必须首先将输入流复制到一个临时文件（使用 FileOutputStream），然后通过打开两个来对该文件进行双通道文件输入流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:49:01.080

或者，您可以在同一次尝试中执行两次 client.execute() 。第一个确定样本大小，第二个确定正确的位图。这样您就不必存储整个文件。立即关闭第一个 Inputstream。

# jquery - 锚链接错误计算扩展布局

> ID：14281666
> 
> 赞同：1
> 
> 时间：2013-01-11T15:48:09.977
> 
> 标签：jquery, html, anchor

我正在开发一个单页网站，其中各种内容位于不同的垂直扩展 div 中。展开 div 时，任何已经打开的 div 都会自动关闭，并且我还希望滚动页面，以便特定内容将自身定位在距浏览器顶部 90px 的位置。

通过为每个 div 使用简单的锚链接，这在大多数情况下都很完美。但是，随着扩展内容增加网站的高度，锚有时会错误地计算“停止点”，从而将用户滚动到错误的位置。尤其是在直接从已经打开的 div 扩展不同的 div 时。[我在另一个](https://stackoverflow.com/questions/416805/why-do-page-anchors-sometimes-miss)问题中读到，有时在使用带有不可预见的布局变化的锚链接时会出现这种情况。有谁知道如何解决这个问题？是否有一种方法可以“绝对”滚动新内容相对于视口顶部的位置？或者是否可以要求锚点耐心等待所有内容加载完毕后再起飞？

此外，为了防止移动设备和小屏幕上的访问者必须加载全尺寸图像，jquery 检查访问者的屏幕尺寸并将具有正确图像的相应 html 文件加载到`#picswitend`. 这可能是问题的一部分吗？

这是扩展 div 之一的代码。这是我第一次尝试 jQuery，所以我想它可能有点不完善，但它确实有效。

CSS：

```
 .anchorlink {
  position:absolute;
  margin-top: -90px;
  } 
```

中的代码`<head>`：

```
 <head>
     <script>
        open = '';
        active = '';
        $(document).ready(function () {
        $('#closeinfo').hide();
        $('#closethis').hide();
        $('#faq').hide();
        $('#infomore').hide();
        $('#witsend').hide();
        });
     </script>
  </head> 
```

扩展 div 之一的示例：

```
 <div class="text">
  <a name="witsendlink" class="anchorlink"></a>
  <a href="#witsendlink" id="witsend-show">
  <script>
     $("#witsend-show").click(function() {      
        $('#' + active).hide();
        $('#' + active + '-show').show();
        $('#infomore').slideUp(200);
        $('#witsend-show').hide();
        $('#witsend').show();
        active = "witsend";
    $('#closethis').show();
    $('#faq').hide();

    if($(this).width() <= 568){
       $("#picswitsend").load("witsendpicsm.html");
    } else {
       $("#picswitsend").load("witsendpics.html");
    }

    $('#witsendtitle').scrollToFixed({
       marginTop: $('#top').outerHeight() - 44,
       limit: function() {
          var limit = $('#lastwitsend').offset().top;
          return limit;
       },
          zIndex: 999,
       });      
        });
  </script>
  <div class="title">
     <p>Wits End Discography</p>
  </div>
  <div class="content">
     <p>Siste Sukk tapes & records is a small oslo-based independent label focusing on emo and hardcore, releasing most of their music on tape. When we made the cassette-cover for Wits End's latest release, we wanted to let an unconventional use of material play a major role in the design.
     </p>
  </div>
  </a>

  <div id="witsend">
  <div class="post">

     <div id="witsendtitle">
    <a href="#top" id="witsend-hide">
       <script>
          $('#witsend-hide').click(function () {
                 $('#witsend').hide();
         $('#witsend-show').show();
         $('#closethis').toggle();
         active = '';
      });
       </script>
       <p class="titletext">
          <p class="exit">&#10005;</p> Wits End Discography
       </p>
        </a>
     </div>

 <div class="content open">
    <p>
  <a href="http://www.sistesukk.com">Siste Sukk tapes & records</a> is a small oslo-based independent label focusing on emo and hardcore, releasing most of their music on tape. When we made the cassette-cover for Wits End's latest release, we wanted to let an unconventional use of material play a major role in the design. Basing the cover on a piece of folded newsprint and a and a small plastic bag, it pays respect to old school zine-culture while still keeping a sense of contemporariness and distinction in a scene heavily influenced by D.I.Y solutions.

  Memento mori!<br><br>In collaboration with <a href="http://www.martinmartin.no">Martin Asbj&oslash;rnsen</a>
        </p>
    <p class="small">2012 &middot; Commissioned &middot; <a id="perma" href="http://www.jonasersland.net/index.php?section=witsend#witsend">Permalink <span id="flag"> &#9873;</span></a>
        </p>
     </div>
  </div>        
  <div id="picswitsend">
  </div>                
  </div>
  </div> 
```

如果有人愿意就此提出一些想法，我真的很感激，如果我提供的信息太少或不相关，我很抱歉。请随时询问是否有任何问题，我会很高兴回答！

有一个绝对精彩的一天。

编辑：这是正在运行的网站：http: [//www.jonasersland.net](http://www.jonasersland.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:17:22.263

您可以使用 jQuery 方法 scrollTop 将“绝对”滚动到浏览器顶部下方 90 像素 - 您可以为其设置动画以使其轻松进入：[http](http://api.jquery.com/scrollTop/) ://api.jquery.com/scrollTop/ 。您尝试做的将如下所示：

```
$("#linkTopAnchor").click(function() {
    $(this).blur();
    $("html, body").animate({scrollTop: "90px"}, "fast");
    return false;
}); 
```

我正在使用`$(this).blur();`，因为某些移动设备会自动滚动到当前突出显示的任何内容 - 因此页面将滚动到您想要的位置，然后如果您不手动取消选择它，则跳回启动事件的按钮。我`return false;`在那里防止 URL 更改为井号标签。在您的情况下，您可能希望 URL 实际更改，因此您可以简单地删除它。

# wpf - 如何从 powershell 使用 IValueConverter？

> ID：14281671
> 
> 赞同：1
> 
> 时间：2013-01-11T15:48:17.383
> 
> 标签：wpf, powershell

我想使用 WPF DataTrigger 来检查大于 X 的值。我知道这只能通过 IValueConverter 实现。我为此找到了许多 C# 示例，但我在 powershell 中需要它。有人可以帮我把它翻译成powershell吗？

要翻译的 C# 代码：

```
public class CutoffConverter : IValueConverter {
    public object ConvertTo(object obj, Type type) {
        return ((int)obj) > Cutoff;
    }

    public object ConvertFrom(object obj, Type type) {
        throw new NotImplementedException();
    }

    public int Cutoff { get; set; }
} 
```

和 XAML

```
<Window.Resources>
    <myNamespace:CutoffConverter x:Key="AgeConverter"/>
</Window.Resources>

<DataTemplate.Triggers>
    <DataTrigger Binding="{Binding Path=Age,
                           Converter={StaticResource AgeConverter},
                           ConverterParameter=30}">
        <Setter TargetName="Age" Property="Foreground" Value="Red"/> 
    </DataTrigger>
</DataTemplate.Triggers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:45:12.610

当然：

```
$src = @'
using System;
using System.Globalization;
using System.Windows.Data;

namespace MyNamespace
{
    public class CutoffConverter : IValueConverter
    {
        public int Cutoff { get; set; }

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return ((int)value) > Cutoff;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
}
'@

Add-Type -AssemblyName PresentationFramework    
Add-Type -TypeDefinition $src -ReferencedAssemblies PresentationFramework 
```

您可以通过这种方式添加大多数 C# 代码。而且您几乎需要使用 C#，因为 AFAIK 您无法在 PowerShell 脚本中实现接口。它更像是一种 CLI 消费者语言，而不是生产者语言。

# javascript - 使用 JavaScript 跨域访问文件，无需服务器端实现

> ID：14281675
> 
> 赞同：0
> 
> 时间：2013-01-11T15:48:28.960
> 
> 标签：javascript, http, cross-domain

有没有任何方法可以通过 JavaScript 从另一个域访问文件而无需任何服务器端实现？

我正在尝试从网络服务器读取文本文件并将内容保存到变量中。我想稍后处理内容。

但是任何基于 XMLHttpRequest 的操作似乎都违反了[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。而且由于我无权访问服务器，因此我无法使用将内容返回到我的 JavaScript 的 Web 服务之类的任何东西。

# javascript - array.sort() 和 array.sort(function(a,b) { return a - b; }) 有什么区别？

> ID：14281677
> 
> 赞同：1
> 
> 时间：2013-01-11T15:48:34.677
> 
> 标签：javascript

我有一段代码会触发一些动作。在此之前，它只是对权重进行排序。当我使用时一切正常：`weight.sort()`where `weight`is an non-empty array eg `[10 20 30 40]`，但是当我将其更改为：

```
weight.sort(function(a,b) {
    return a - b;
}); 
```

其中一项操作无效（显示 div）。老实说，我不知道是什么导致了差异。这对我来说似乎很奇怪，因为`weight`在使用这两种方法进行排序并且清楚地更改那段代码后，我的脚本是否可以正常工作。FireBug 中没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:51:42.537

如果你这样做

```
weight = weight.sort 
```

这些项目通过使用词典比较进行排序。`=> 2 > 10`

但是当你这样做时

```
weight = weight.sort(function(a,b) { return a - b; }); 
```

这些项目作为数字而不是字符串进行比较，并且列表按升序排序。`=> 2 < 10`

还，

```
weight = weight.sort(function(a,b){return b-a}); 
```

将按降序排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:58:54.863

我们通常使用这种排序来实现某种自定义比较。在这种情况下，仅调用的唯一区别`sort`是元素的顺序 - 使用您显示的代码，数组将按降序（从大到小值）排序，而不是典型的升序。

请注意，无参数排序将返回`b-a`而不是符号不同的 ab，从而反转比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:05:08.907

`Array.prototype.sort`如果没有自定义排序功能，[则按字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)对项目进行排序。

您可以定义自定义函数来使用它们的任何属性对任何类型的项目进行排序。只需确保函数根据您的比较结果返回负数/正数或 0。例如，要`name`根据名称对具有属性的对象进行排序，您可以使用：

```
items.sort(function (a, b) {
    return a.name.localeCompare(b.name);
}); 
```

`priority`或按项目的属性（数字）对项目进行排序：

```
items.sort(function (a, b) {
    return a.priority - b.priority;
}); 
```

在您的自定义分类器中，您可以根据需要比较任意数量的属性。还要确保优雅地处理未定义的项目或项目属性。一个强化的按名称排序示例：

```
items.sort(function (a, b) {
    var aName = a && a.name || "",
        bName = b && b.name || "";
    return aName.localeCompare(bName);
}); 
```

# maven - 没有可用的配置文件

> ID：14281678
> 
> 赞同：0
> 
> 时间：2013-01-11T15:48:37.183
> 
> 标签：maven, maven-plugin, profile

我正在使用`maven-helper-plugin`来检查哪些配置文件可用。

`settings.xml`我自己的个人资料文件夹中的当前包含以下定义：

```
 <profile>
            <id>cqDevAuthorProfile</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                ...
            </properties>
            <repositories>
                <repository>
                    <id>localinstance</id>
                    ...
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>localinstance</id>
                    ...
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
        <profile>
            <id>cqDevPublishProfile</id>
            <properties>
                            ...
            </properties>
            <repositories>
                <repository>
                    <id>localinstance</id>
                                 ...
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>localinstance</id>
                                ...
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile> 
```

我使用的`pom.xml`看起来如下：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-help-plugin</artifactId>
            <version>2.1.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>all-profiles</goal>
                        <goal>active-profiles</goal>
                    </goals>
                    <configuration></configuration>
                </execution>
            </executions>           
        </plugin>
    </plugins>
</build> 
```

调用**所有配置文件**后，它产生以下输出：

```
[INFO] 
[INFO] --- maven-help-plugin:2.1.1:all-profiles (default) @ maven-multi-enviroment-deployment-plugin ---
[WARNING] No profiles detected! 
```

而目标**active-profiles**产生了输出：

```
[INFO] 
Active Profiles for Project '...:maven-multi-enviroment-deployment-plugin:pom:0.0.1-SNAPSHOT': 

The following profiles are active:

 - cqDevAuthorProfile (source: settings.xml) 
```

我的问题：此时出了什么问题或我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:29:02.573

今天回到这个问题，可以发现只有配置文件会被打印出来，如果他们在`pom.xml`插件调用所在的地方声明的话。[所有](http://maven.apache.org/plugins/maven-help-plugin/all-profiles-mojo.html)*配置文件*的文档说

> **显示当前项目**下的可用配置文件列表。

虽然命令*active-profiles的*[文档](http://maven.apache.org/plugins/maven-help-plugin/active-profiles-mojo.html)说：

 *> 显示当前**为此构建**活动的配置文件列表。

由此得出的结论是，结果是正确的，我确实误解了描述..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:52:41.937

简单的答案是，默认情况下会根据以下代码段激活配置文件：

```
<activation>
  <activeByDefault>true</activeByDefault>
</activation> 
```*

# php - 现在需要替代时间（）-Epoch

> ID：14281679
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:48:38.097
> 
> 标签：php, mysql

当我开始我的网站时，我以纪元格式存储了所有时间数据，现在这给我带来了一些问题，因此我遇到了麻烦，尤其是。随着2013年的到来。

我想知道的是，我是否将所有数据（纪元格式时间）转换为数据库中的人类可读时间？

我的数据库有大量数据，否则我会尝试循环并将每个纪元标记转换为人类可读的时间。在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:56:57.303

不要在没有先备份的情况下这样做！

```
UPDATE my_table SET my_column = DATE_FORMAT(FROM_UNIXTIME(my_column), '%Y-%m-%d %H:%i:s') WHERE 1; 
```

# java - 检查字符串是否包含 HTML？如果包含则将其视为普通文本

> ID：14281680
> 
> 赞同：2
> 
> 时间：2013-01-11T15:48:41.613
> 
> 标签：java, validation

我想检查字符串是否包含 HTML。我的表单中有“关于”字段，用户可能会输入 HTML。我将在他/她的个人资料中显示此信息。所以在这里我想在将它存储到数据库之前检查它是否包含 HTML。如果它包含 HTML，我想保持原样，并且那些 HTML 标签应该在他的个人资料上显示为普通文本......我该如何实现这一点？

并在获取用户信息时告诉我任何可能的威胁。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T15:51:44.743

这里怎么样： [http](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html) ://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html 虽然它是一个外部库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:56:21.640

您将不得不寻找 html 标签，例如使用正则表达式。然后，您必须检查 HTML 代码的正确性（标签关闭）并检查它们是否不是恶意代码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:00:22.527

如果它是一个带有 Stack ADT 和实现的页面，只需在开头捕获标签。如果它不是一整页，您可以用 <> 符号捕获它，如果它等于某些标准，则可以查看它。

# ios - 设置 iAd 网络以测试应用程序

> ID：14281683
> 
> 赞同：1
> 
> 时间：2013-01-11T15:48:51.417
> 
> 标签：ios, ios5, ios-simulator, admob, iad

我已经使用 Admob 中介服务设置了一个测试应用程序。应用程序运行正常，但我收到来自 iAd 配置错误的错误。我认为这是因为它没有在 iTunes connect 中正确/完全设置。

因为我是新手，所以我不确定，这个错误目前并不重要，但我想在这个测试应用程序中设置 iAd，看看我对 iAd 和这个平台提供的广告有什么控制权。

我已登录 iTunes Connect，并且我的 iAd 合同已完全设置。

但是，当我登录 iTunes 连接时，我看不到 iAd Network 选项，因为这在指南中有详细说明：http: [//developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/3_OverviewofiTunesConnect/OverviewofiTunesConnect。 html](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/3_OverviewofiTunesConnect/OverviewofiTunesConnect.html)

当我去管理新应用程序（在 Itunes 连接中）然后添加新应用程序 > 这建议将应用程序提交到应用程序商店。我现在只想访问为测试应用程序设置 iAd，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:53:58.650

将应用设置为提交到应用商店，只是不要提交...您可以同时使用虚拟屏幕截图和填充文本进行描述（稍后可以编辑）然后转到应用主信息页面然后点击蓝色按钮，上面写着“设置 iAd 网络”。此外，有时使用 iTunesConnect 合同，您必须等待一段时间才能开始工作......当我在 2008 年首次注册时，我相信我必须等待一个月才能上传我的第一个应用程序，因为银行合同（他们不再这样做了）

**同时确保您包含 iAd 框架并且您已将其导入到您的 .h 文件中

祝你好运！！！

# ruby - ruby 动态函数调用

> ID：14281684
> 
> 赞同：0
> 
> 时间：2013-01-11T15:48:51.590
> 
> 标签：ruby, dynamic

尝试做一个动态测试套件并重用函数定义。我有一个表格，您可以在其中选择某人可以联系您的不同类型的方式，并且页面将根据联系方式显示不同。我正在尝试做

```
When /^I click the (.*) return type$/ do |response|
  on_page(ContactUsPage).response unless @browser.url.include?("contactBy=#{response}") 
```

这将采用当前类型的响应并单击链接，除非 url 包含“contactBy=”和响应类型（意味着您已经在页面上并且没有可单击的链接）

我有一个页面对象类（ContactUsPage），其中包含不同方法（电子邮件、电话、传真、邮政）的链接

我遇到的问题是`ContactUsPage.response` 响应被注入到浏览器检查中，但它在 ContactUsPage 中寻找方法“响应”而不是注入该方法。

该方法应该调用`ContactUsPage.email`或`ContactUsPage.fax`或`ContactUsPage.phone`取决于传递给函数的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:01:27.517

您可以使用 Ruby 的[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)方法来动态调用方法：

```
on_page(ContactUsPage).send(response) 
```

`send`的第一个参数是带有要调用的方法名称的字符串或符号；任何进一步的参数都会传递给方法本身。例如，`foo.send(:bar, "baz")`相当于`foo.bar("baz")`

如果你想调用一个以变量名（或类似名称）*开头*`email_element`的方法，你只需要做一个快速的字符串插值：

```
on_page(ContactUsPage).send("#{response}_element")
# equivalent to `on_page(ContactUsPage).email_element` when response == "email" 
```

# javascript - 仅当我的网站未包含在 iFrame 中时如何显示 adsense？

> ID：14281685
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:48:51.417
> 
> 标签：javascript, jquery, facebook, adsense

我有一个网站，它也是 Facebook 上的画布应用程序。根据 FB 政策，我无法在画布页面上显示 Adsense 广告。此外，根据 Google Adsense 政策，我无法在 iFrames 中显示 Adsense，FB 使用它来将我的网站显示为画布应用程序。我的网站使用 Adsense 获利。

我需要一个简单的解决方案来呈现我的 Adsense 广告，仅当我的网站没有被 iframe 设置为画布应用程序或任何其他方式时。

我尝试使用 jquery 并做了以下

```
if (window==window.top) {
    $.getScript("show_ads.js");
} 
```

但这无论如何都不会呈现广告。show_ads.js 是 Google 提供的 Adsense 广告渲染脚本。

我正在寻找一种不同的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:02:42.117

```
Try

    var isInIframe = (window.parent !=null && window.location != window.parent.location) ? true : false;
        if (!isInIframe )
         loadScript("http://your.cdn.com/show_ads.js"); 
```

[参考](http://www.jquery4u.com/snippets/jquery-check-window-iframe/)

试试这个来加载一个 js 文件：

```
function loadScript(url, callback){

    var script = document.createElement("script")
    script.type = "text/javascript";

    if (script.readyState){  //IE
        script.onreadystatechange = function(){
            if (script.readyState == "loaded" ||
                    script.readyState == "complete"){
                script.onreadystatechange = null;
                callback();
            }
        };
    } else {  //Others
        script.onload = function(){
            callback();
        };
    }

    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
} 
```

# asp.net - 将文本框和 Concat 中的值提取到带分隔符的字符串中

> ID：14281690
> 
> 赞同：0
> 
> 时间：2013-01-11T15:48:59.823
> 
> 标签：asp.net, vb.net, string, concatenation

我正在尝试从 5 个文本框值中获取响应，然后将它们放入一个字符串中，最终将它们存储在数据库中，但我无法让程序构建字符串，这是我迄今为止构建字符串的代码.

VB.代码

```
 Dim QuestionANS As String
        ' Get values from the text boxes
        Dim PassA As TextBox = CType(form1.FindControl("A"), TextBox)
        Dim PassB As TextBox = CType(form1.FindControl("B"), TextBox)
        Dim PassC As TextBox = CType(form1.FindControl("C"), TextBox)
        Dim PassD As TextBox = CType(form1.FindControl("B"), TextBox)
        Dim PassE As TextBox = CType(form1.FindControl("E"), TextBox)
        Dim PassF As TextBox = CType(form1.FindControl("F"), TextBox)

    QuestionANS = PassA.Text + "|" + PassB.Text + "|" + PassC.Text + "|" + PassD.Text + "|" + PassE.Text + "|" + PassF.Text 
```

ASP 代码

```
 <asp:DataList runat="server" ID="Questions">   
            <ItemTemplate>
               <table cellpadding="2px" cellspacing="0" border="0" style="page-break- inside:avoid;">
                <tr>
                   <td valign="top" style="padding-right:18px;"><asp:Label               runat="server" ID="QuestionNumber" /></td>

                    <td><asp:Image runat="server" style = "padding: 15px 0px 25px 0px;"  ID="Image" /></td>

                </tr>

                <tr>
                    <td></td>
            <td style="padding-top:10px;padding-bottom:15px;"></td>

                    <td style="padding-top:10px;padding-bottom:15px;"></td>
                    <tr>

                        <td style="width:50px;"><a>A:</a></td><td><asp:TextBox id="A" columns="30" runat="server" /></td>
                    </tr>
                    <tr>
                        <td style="width:50px;"><a>B:</a></td> <td><asp:TextBox id="B"  columns="30" runat="server" /></td>
                    </tr>
                    <tr>
                        <td style="width:50px;"><a>C:</a></td><td><asp:TextBox id="C" columns="30" runat="server" /></td>
                    </tr>
                    <tr>
                        <td style="width:50px;"><a>D:</a></td><td><asp:TextBox id="D" columns="30" runat="server" /></td>
                    </tr>
                    <tr>
                        <td style="width:50px;"><a>E:</a></td><td><asp:TextBox id="E" columns="30" runat="server" /></td>
                    </tr>
                    <tr>
                        <td style="width:50px;"><a>F:</a></td><td><asp:TextBox id="F" columns="30" runat="server" /></td>
                    </tr>
                </tr>

                    </table>
            <asp:HiddenField runat="server" ID="QuestionID" />
        </ItemTemplate>
    </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:57:49.223

我假设在 a or`TexBoxes`中是不同的。那么这将解释为什么你得到一个on 。`NamingContainer``FormView``GridView``NullRefernceException``QuestionANS = PassA.Text`

**编辑**：因为您现在已经表明它在 a`ItemTemplate`中`DataList`：

```
For Each item As DataListItem In Questions.Items
    Dim PassA As TextBox = DirectCast(item.FindControl("A"), TextBox)
Next 
```

或在[`ItemDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3)事件中：

```
Protected Sub Item_Bound(sender As Object, e As DataListItemEventArgs) Handles Questions.ItemDataBound
    Select Case e.Item.ItemType
        Case ListItemType.Item, ListItemType.AlternatingItem
            Dim PassA As TextBox = DirectCast(e.Item.FindControl("A"), TextBox)
    End Select
End Sub 
```

# mysql - 解释 MySQL 解释执行计划数学，两个计划之间的区别

> ID：14281691
> 
> 赞同：10
> 
> 时间：2013-01-11T15:49:06.097
> 
> 标签：mysql, performance, explain, sql-execution-plan

我有一个与解释相关的基本 MySQL 性能问题。我有两个返回相同结果的查询，我试图了解如何理解`EXPLAIN`执行计划。

该表中有 50000 条记录，我正在执行记录比较。我的第一个查询需要 18.625 秒才能运行。解释计划如下。

```
id  select_type table   type    possible_keys                   key         key_len ref                                 rows    filtered    Extra
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
1   SIMPLE      a       ALL     NULL                            NULL        NULL    NULL                                49520   100.00  
1   SIMPLE      b       ref     scoreEvent,eventScore           eventScore  4       olympics.a.eventId                  413     100.00      Using where; Using index; Not exists
1   SIMPLE      c       ref     PRIMARY,scoreEvent,eventScore   scoreEvent  8       olympics.a.score,olympics.a.eventId 4       100.00      Using where; Using index; Not exists 
```

我的下一个查询需要 0.106 秒才能运行...

```
id  select_type table       type    possible_keys   key     key_len     ref     rows    filtered    Extra
-----------------------------------------------------------------------------------------------------------------------------------
1   PRIMARY     <derived2>  ALL     NULL            NULL    NULL        NULL    50000   100.00      Using temporary; Using filesort
2   DERIVED     results     ALL     NULL            NULL    NULL        NULL    49520   100.00      Using filesort 
```

在文档中它说`ALL`需要进行全表扫描，这非常糟糕。它还说`filesort`需要额外的传递来对记录进行排序，它还说这`Not exists`意味着 MySQL 能够进行`LEFT JOIN`优化。很明显，第一种方法使用索引，而第二种方法没有。

我试图弄清楚这里发生了什么以及涉及到什么数学。我`RESET QUERY CACHE`在测试之间跑来跑去，以确保不会获得任何不公平的优势。49520 x 413 x 4 比 50000 x 49520 小很多。

与`id`解释计划中的有关吗？

当我测试这些和其他查询时，我的观察似乎是查询复杂性可以通过将具有相同 id 的项目相乘并将每个 id 的结果加在一起来近似......这是一个有效的假设吗？

* * *

## 额外的

按照评论中的要求，架构和查询以防万一，但我不是在寻找更好的查询......只是对`EXPLAIN`. 有问题的表...

```
CREATE TABLE results (
  resultId INT NOT NULL auto_increment KEY, 
  athleteId INT NOT NULL,
  eventId INT NOT NULL,
  score INT NOT NULL,
  CONSTRAINT FOREIGN KEY (athleteId) REFERENCES athletes(athleteId),
  CONSTRAINT FOREIGN KEY (eventId) REFERENCES events(eventId),
  INDEX eventScore (eventId, score),
  INDEX scoreEvent (score, eventId)
) ENGINE=innodb; 
```

第一个查询...

```
SELECT a.resultId, a.eventId, a.athleteId, a.score
FROM results a 

-- Find records with matching eventIds and greater scores
LEFT JOIN results b 
ON b.eventId = a.eventId 
AND b.score > a.score

-- Find records with matching scores and lesser testIds
LEFT JOIN results c
ON c.eventId = a.eventId
AND c.score = a.score
AND c.resultId < a.resultId

-- Filter out all records where there were joins
WHERE c.resultId IS NULL 
AND b.resultId IS NULL; 
```

第二个查询...

```
SELECT resultId, athleteId, eventId, score
FROM (
  SELECT resultId, athleteId, eventId, score
  FROM results
  ORDER BY eventId, score DESC, resultId
) AS a
GROUP BY eventId; 
```

我还注意到，如果我删除索引`eventScore`，查询下降到 2.531 秒并且执行计划没有太大变化，但是 possible_keys 的顺序发生了变化并且它不适`Using index`用于表`b`（忽略我正在生成的行数的细微变化每次更改架构时的数据）...

```
id  select_type table   type    possible_keys               key         key_len ref                                 rows    filtered    Extra
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
1   SIMPLE      a       ALL     NULL                        NULL        NULL    NULL                                47457   100.00  
1   SIMPLE      b       ref     eventId,scoreEvent          eventId     4       olympics.a.eventId                  659     100.00      Using where; Not exists
1   SIMPLE      c       ref     PRIMARY,eventId,scoreEvent  scoreEvent  8       olympics.a.score,olympics.a.eventId 5       100.00      Using where; Using index; Not exists 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T19:07:10.300

实际上，当您看到时，您不应该乘以，而是将这些数字相加。在您的情况下，比较 (49520 x 413 x 4) 和 (50000 + 49520)。

一般规则很简单：汇总所有段（DERIVED、PRIMARY）并在每个段中乘以行。

```
id select_type  ... rows
1  PRIMARY           1
1  PRIMARY           2
2  DERIVED           3
2  DERIVED           4
3  DERIVED           5
3  DERIVED           6 
```

复杂度为：1*2 + 3*4 + 5*6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T10:09:10.940

不要太相信 EXPLAIN 的“rows”语句。如在 mysql 文档中：“*估计*要检查的行数”（[http://dev.mysql.com/doc/refman/5.1/en/explain-output.html](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html)）。

也许更新你的索引统计数据会给你一个更好的估计（优化表，[http](http://dev.mysql.com/doc/refman/5.0/en/optimize-table.html) ://dev.mysql.com/doc/refman/5.0/en/optimize-table.html ）

# php - PHP/MySQL 登录问题

> ID：14281696
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:49:21.310
> 
> 标签：php, login

我需要帮助来为我的网站创建登录并将其连接到数据库。

这是php代码

```
<?php
 session_start();
 include("dbconnect.php");
 $numrows=0;
 $member=$_GET['Membership_Number'];
 $password=$_GET['Password'];
 $query="select First_name, Last_name, Membership_Number from members where (Membership_Number='$member' && Password='$password')";
 $link = mysql_query($query);
 if (!$link) {
  die('login error');
 }
 $numrows=mysql_num_rows($link);
 if ($numrows>0){  // authentication is successfull
  $row = mysql_fetch_array($link, MYSQL_ASSOC);
  $_SESSION['user']['first_name']=$row['fname'];
  $_SESSION['user']['last_name']=$row['lname'];
  $_SESSION['user']['email']=$row['email'];
  header("location:index.php");
 } else {
  header("location:../invalid.php");  // authentication was unsuccessfull
 }
?> 
```

这是 HTML 代码

```
<form id="jjjj" method="post" action="Send_log_details.php" class="register">
        <ul>
            <li>
            Membership Number:<br>
            <input type="text" id="Membership_Number" name="Membership_Number">
            </li>
            <li>
            Password:<br>
            <input type="password"  id="Password" name="Password" value="Login">
            </li>
            <li>

            <input type="submit" name="register" value="Login" onclick="logMeIn()">             
            </li>
        </ul>
        </form> 
```

有人可以解释为什么这段代码不起作用

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:51:48.510

1.  你有表格`method=post`和你正在使用的 php `$_GET`。
2.  您的查询不正确。

正如@njk 也评论的那样，

> 请不要在新代码中使用 mysql_* 函数。它们不再被维护并被正式弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:20:03.760

首先，`$_GET`不包括 POSTed 表单参数的值。[`$_POST`](http://php.net/manual/en/reserved.variables.post.php)或[`$_REQUEST`](http://php.net/manual/en/reserved.variables.request.php)将起作用，尽管后者可能不明智使用，因为根据 PHP 配置，它可能包含 cookie 值。

第二，`$query`是无效的SQL。特别是，SQL 使用`AND`而不是`&&`. 此外，如果您使用 MYSQL_ASSOC 选项，列名必须与代码的其余部分匹配：

```
$sqlMember = mysql_real_escape_string($member);
$sqlPassword = mysql_real_escape_string($password);
$query="select First_name fname, Last_name lname, Email email, Membership_Number from members where (Membership_Number='$sqlMember' and Password='$sqlPassword')"; 
```

[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)用于防止[SQL 注入](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)。如果您使用的是 MySQLi 扩展或 PDO，您将准备好可用的语句功能，您应该使用它。

顺便说一句，对您的应用程序的其他攻击，例如登录 CSRF 和会话固定，可能是可能的。

# php - 如何在mysql中检索数据库列名

> ID：14281700
> 
> 赞同：3
> 
> 时间：2013-01-11T15:49:32.510
> 
> 标签：php, mysql

我有一个名为“作者”的数据库表，当有人注册然后访问他的个人资料时，我想显示类似的结果

```
Name : user name here
Email : email here
location : location here 
```

位置、电子邮件和名称是数据库列名称。我可以检索数据库值，但无法检索数据库列名。我怎样才能做到这一点？

更新：这是我的代码

```
$query = "SELECT * 
                      FROM author 
                      WHERE id = {$author_id};
 $author_info = mysql_query($query, $connection);
$author_details  =  mysql_fetch_assoc($author_info);
foreach ($author_details as $fieldname) {
echo $fieldname;
} 
```

从这段代码中，我只得到名称、位置、电子邮件的值，但我还需要打印名称、电子邮件、位置等列名及其列值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:51:13.157

试试这个查询，

```
SHOW columns FROM your-table-name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:05:00.197

`mysql_field_name($index)`

好的，假设您已经运行查询以获取数据。这就是您可以根据需要使用这些数据创建表的方法。或者只是`mysql_field_name($index)`随心所欲地使用。通过这个例子，你会明白的。

```
$numFields = mysql_num_fields($result); 

echo "<table id='whatever you want here'>";
        echo "<tr>";
            for($i = 0; $i < $numFields; $i++)
            {
                echo "<th>";
                    echo mysql_field_name($result,$i);
                echo "</th>";
            }
        echo "</tr>";

        while($row = mysql_fetch_row($result))
        {
            echo "<tr>";
                for($i = 0; $i < $numFields; $i++)
                {
                    echo "<td>$row[$i]</td>";
                }
            echo "</tr>";
        }
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:54:29.823

采取这样的网址：

```
www.site.com/profile.php?id=1 
```

您的 profile.php 看起来像这样：

```
$q = mysql_query("SELECT location, email, name FROM db WHERE id = " . $_GET['id']); 

while($r = mysql_fetch_array($q)){
    echo $r['location'] . $r['name'] . $r['email'];
} 
```

只是一个指导方针。您对 sql 注入持开放态度，您应该考虑使用 PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:03:10.740

听起来您已经知道您希望这些列名称是什么，并且您希望它们是样板文本，而不是从数据库的元数据中动态选择。在这种情况下，请尝试将样板文本连接到您的数据上，然后为结果列提供一个列别名（为了方便在例如 PHP 代码中检索它）。

例如：

```
SELECT CONCAT("Name: ",name) AS name, CONCAT("Location :",location) AS location,
CONCAT("Email: ",email) FROM author WHERE id = 1; 
```

然而，这似乎是一个不寻常的事情，希望数据库做 - 通常例如。如果编写基于 PHP 的应用程序，您会将样板文本作为 HTML 样板文本放在 PHP 页面中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T16:17:28.697

在您的 foreach 中，您需要使用此表单：

```
foreach ($author_details as $fieldname=>$fieldvalue) {...} 
```

没有`=>`in the foreach 你只能得到值，用它你会得到键和值。

请参阅 php [foreach 文档](http://us.php.net/manual/en/control-structures.foreach.php)

# javascript - 多个选项的正则表达式

> ID：14281701
> 
> 赞同：5
> 
> 时间：2013-01-11T15:49:36.830
> 
> 标签：javascript, regex

我需要编写一个正则表达式来与 JS .match() 函数一起使用。目标是检查具有多种选择的字符串。例如，如果 mystr 包含 word1 或 word2 或 word3，我想在下面的代码中返回 true

```
mystr1 = "this_is_my_test string_containing_word2_where_i_will_perform_search";
mystr2 = "this_is_my_test string_where_i_will_perform_search";
myregex = xxxxxx; // I want help regarding this line so that 
if(mystr1.match(myregex)) return true; //should return true
if(mystr2.match(myregex)) return true; //should NOT return true 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T15:52:47.740

`|`所以在你的 RegEx 中使用 OR ：

```
myregex = /word1|word2|word3/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:56:23.807

正则表达式是：`/word1|word2|word3/`

请注意，除了您的代码可以工作之外，您实际上并没有使用您需要的方法。

*   `string.match(regex)`-> 返回一个匹配数组。当评估为布尔值时，它会在为`false`空时返回（这就是它起作用的原因）。
*   `regex.test(string)`-> 是你应该使用的。它评估字符串是否与正则表达式匹配并返回 a `true`or `false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:56:55.173

如果您不使用匹配项，那么我可能会倾向于使用该`test()`方法并包括`i`标志。

```
if( /word1|word2|word3/i.test( mystr1 ) ) return true; //should return true
if( /word1|word2|word3/i.test( mystr2 ) ) return true; //should NOT return true 
```

# c - C : 对一小段代码感到困惑 - '&0x' 是什么？

> ID：14281702
> 
> 赞同：1
> 
> 时间：2013-01-11T15:49:38.790
> 
> 标签：c, variables, hex

我是 C 的新手，我正在尝试在这种平静的代码中锻炼两件事；

*   下面的 &0xfe 和 &0x01 的目的是什么？
*   __u16 显然这是一个变量，但它们的类型和名称是什么？

提前致谢！

```
static __u16 smile_bmp[] = {0x3C, 0x42, 0x95, 0xA1, 0xA1, 0x95, 0x42, 0x3C};

displayImage(smile_bmp,res, daddress, file);

int displayImage(__u16 bmp[], int res, int daddress, int file)
{
    int i;
    for(i=0; i<8; i++)
        {
         block[i] = (bmp[i]&0xfe) >>1 | (bmp[i]&0x01) << 7;
        }
    res = i2c_smbus_write_i2c_block_data(file, daddress, 16,
        (__u8 *)block);
    sleep(1);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:58:49.570

表达式：`(bmp[i]&0xfe) >>1 | (bmp[i]&0x01) << 7`作为一个整体，实际上是 8 个最低有效位的旋转（也称为循环移位）`bmp[i]`。

该`bmp[i] & 0xfe`部分正在输入数字`bmp[i]`并屏蔽低位（`0xfe`表示“十六进制的FE”，转换为`11111110`二进制），因此当您`and`将两者放在一起时，它将最低位设置为0而不更改任何其他位（嗯, 8 个最低有效位中的任何其他 - 给定`bmp[i]`is 类型`__u16`，它显然有 16 位，因此掩码中的高 8 位也是零，因此它们在结果中也设置为零）。

同样，该`bmp[i] & 0x01`部分屏蔽了除*最低*位之外的所有内容。0x01 是 00000001，所以当你`and`将此值与其他任何值一起使用时，保留最低有效位的原始值，并将所有其他位设置为 0。

然后它将第一个向右移动一位，第二个向左移动 7 位，然后使用按位`or`将两个部分重新组合在一起。最终结果是，一开始是位 0 现在是位 7，而所有其他位都向右移动了一个位置（前一个位 7 现在是位 6，前一个位 6 现在是位 5，等等）

顺便说一句，名称`__u8`和`__u16`是为实现保留的，因此除非这些名称实际上是由实现提供的，否则您将有未定义的行为（即，您不允许在代码中定义这些名称）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T15:50:40.653

它是左侧变量 ( ) 的[按位与和以](http://en.wikipedia.org/wiki/Bitwise_operations_in_C)[十六进制表示的常量](http://en.wikipedia.org/wiki/Hexadecimal)`bmp[i]`

# iis-7 - vista home basic上找不到iis管理工具

> ID：14281710
> 
> 赞同：0
> 
> 时间：2013-01-11T15:50:16.463
> 
> 标签：iis-7, windows-vista

我正在运行 windows vista home basic service pack 2。
我试图在我的笔记本电脑上安装 iis。
但我找不到要选择安装的 **IIS 管理控制台。**

一旦我尝试从浏览器访问**本地主机**，它就会出现 404 错误。

```
The resource you are looking for does not have a handler associated with it. 
```

请建议我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:06:37.153

当我不得不在 Windows XP 上安装它时，我遇到了同样的情况。与以前版本的 IIS 相比，它并不那么明显。试试[http://technet.microsoft.com/en-us/library/cc770472%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc770472%28v=ws.10%29.aspx)。

# c++ - 谷歌测试和 std::vector 范围异常

> ID：14281713
> 
> 赞同：7
> 
> 时间：2013-01-11T15:50:21.373
> 
> 标签：c++, exception, vector, googletest

我用 googletest 测试我的 C++ 代码。当由于使用错误索引访问 a`vector::_M_range_check`而引发异常时，googletest 报告：`std::vector`

```
C++ exception with description "vector::_M_range_check" thrown in the test body. 
```

太好了，现在我也想知道哪个向量、哪个索引和哪个范围。如何轻松获取此信息，将测试代码保留在 googletest 单元测试用例中？

[（我几乎从 Java 的旧IndexOutOfBoundsException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IndexOutOfBoundsException.html)开始很长时间......）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T16:14:57.227

如果您使用此命令行选项运行，那么您的异常将一直冒泡：

```
--gtest_catch_exceptions=0 
```

在调试器中执行此操作将为您提供异常的确切堆栈跟踪。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T16:08:07.367

此处不涉及 Google 测试。您的 C++ 标准库实现正在引发异常，由您的 C++ 标准库实现来决定使其异常的详细程度。

由于您遇到异常，我假设您使用`std::vector::at`的是`std::vector::operator[]`. 您可以采取几种可能的方法来获取更多信息。

首先，您可以将调用替换为`at`调用`operator[]`（我个人认为`at`' 的异常抛出范围检查不是很有用，并且它确实有性能开销）并使用您的 C++ 标准库实现的迭代器调试。例如，对于 g++，如果我使用`operator[]`并编译 with`-D_GLIBCXX_DEBUG`来打开 的范围检查`operator[]`，我会收到类似于以下内容的错误：

```
/usr/include/c++/4.3/debug/vector:237:error: attempt to subscript container
    with out-of-bounds index 0, but container only holds 0 elements. 
```

其次，您可以将调用替换为`at`调用`test_at`或类似调用：（未经测试）

```
template <typename T>
T& test_at(std::vector<T>& v, size_t n) {
    // Use Google Test to display details on out of bounds.
    // We can stream additional information here if we like.
    EXPECT_LT(n, v.size()) << "for vector at address " << &v;

    // Fall back to at, and let it throw its exception, so that our
    // test will terminate as expected.
    return v.at(n);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:29:16.333

`vector::at(size_type n)`被记录为抛出`out_of_range`无效`n`（23.2.3p17）。 `out_of_range`不携带有关容器或索引的信息，因此`at`如果需要该信息，则必须进行包装：

```
template<typename T> struct my_vector: public std::vector<T> {
  using std::vector<T>;
  struct at_out_of_range: public std::out_of_range {
    my_vector *vector;
    size_type size;
    size_type n;
    at_out_of_range(my_vector *vector, size_type size, size_type n):
      std::out_of_range("at_out_of_range"), vector(vector), size(size), n(n) {}
  };
  reference at(size_type n) {
    try {
      return std::vector<T>::at(n);
    } catch(std::out_of_range &ex) {
      std::throw_with_nested(at_out_of_range(this, size(), n));
    }
  }
}; 
```

注意`at`不是虚拟的，所以必须通过wrapped调用`at`才能得到嵌套异常。

# c++ - 如何在提升有限边缘时赋予无限边缘？

> ID：14281724
> 
> 赞同：7
> 
> 时间：2013-01-11T15:50:45.707
> 
> 标签：c++, boost, voronoi

我发现在 boost 库中，对于 voronoi 图，一些边缘数据是无限的。根据说明，它必须被剪裁。但我找不到怎么做。谁能给我一个示例代码，好吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:21:43.477

这是一个相当陈旧的问题，但我在尝试解决完全相同的问题时发现了它。分享我遇到的解决方案是公平的，这样下一个可怜的树液就不必自己弄清楚了。

我不知道这是否是一种特别好的做事方式，我怀疑如果你开始使用弯曲单元格会很困难，但它对我的目的来说效果很好。

基本问题是无限边只有一个顶点，所以必须自己计算方向向量。使用的方向垂直于由边缘分隔的两点之间的向量。

```
#include <vector>
#include <boost/polygon/voronoi.hpp>
using boost::polygon::voronoi_builder;
using boost::polygon::voronoi_diagram;

typedef boost::polygon::point_data<int> point;
typedef voronoi_diagram<double>::cell_type cell_type;
typedef voronoi_diagram<double>::edge_type edge_type;
typedef voronoi_diagram<double>::vertex_type vertex_type;

int main(int argc, char *argv[])
{
   std::vector<point> points;

   // Populate with random points
   for (int i = 0; i < 50; i++)
   {
      points.push_back(point(60 + rand() % 500, 60 + rand() % 500));
   }

   voronoi_diagram<double> vd;
   construct_voronoi(points.begin(), points.end(), &vd);

   // vd now contains the voronoi diagram. Let's visualise it
   // pseudocode 'draw_line(x1, y1, x2, y2)'

   for (voronoi_diagram<double>::const_cell_iterator it = vd.cells().begin();
        it != vd.cells().end(); ++it)
   {
      const cell_type& cell = *it;
      const edge_type* edge = cell.incident_edge();

      do
      {
         if (edge->is_primary())
         {
            // Easy finite edge case
            if (edge->is_finite())
            {
               // Without this check each edge would be drawn twice
               // as they are really half-edges
               if (edge->cell()->source_index() < 
                   edge->twin()->cell()->source_index())
               {
                  draw_line(edge->vertex0()->x(), edge->vertex0()->y(),
                            edge->vertex1()->x(), edge->vertex1()->y());
               }
            }
            else
            {
               // This covers the infinite edge case in question.
               const vertex_type* v0 = edge->vertex0();
               // Again, only consider half the half-edges, ignore edge->vertex1()
               // to avoid overdrawing the lines
               if (v0)
               {
                  // Direction of infinite edge if perpendicular to direction
                  // between the points owning the two half edges. 
                  // Take the rotated right vector and multiply by a large 
                  // enough number to reach your bounding box
                  point p1 = points[edge->cell()->source_index()];
                  point p2 = points[edge->twin()->cell()->source_index()];
                  int end_x = (p1.y() - p2.y()) * 640;
                  int end_y = (p1.x() - p2.x()) * -640;

                  draw_line(v0->x(), v0->y(),
                            end_x, end_y);
               }
            }
         }
         edge = edge->next();
      } while (edge != cell.incident_edge());
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T19:01:30.463

我在这里找到了这个代码段：http: [//www.boost.org/doc/libs/1_55_0/libs/polygon/example/voronoi_visualizer.cpp](http://www.boost.org/doc/libs/1_55_0/libs/polygon/example/voronoi_visualizer.cpp)

```
void clip_infinite_edge(
      const edge_type& edge, std::vector<point_type>* clipped_edge) {
    const cell_type& cell1 = *edge.cell();
    const cell_type& cell2 = *edge.twin()->cell();
    point_type origin, direction;
    // Infinite edges could not be created by two segment sites.
    if (cell1.contains_point() && cell2.contains_point()) {
      point_type p1 = retrieve_point(cell1);
      point_type p2 = retrieve_point(cell2);
      origin.x((p1.x() + p2.x()) * 0.5);
      origin.y((p1.y() + p2.y()) * 0.5);
      direction.x(p1.y() - p2.y());
      direction.y(p2.x() - p1.x());
    } else {
      origin = cell1.contains_segment() ?
          retrieve_point(cell2) :
          retrieve_point(cell1);
      segment_type segment = cell1.contains_segment() ?
          retrieve_segment(cell1) :
          retrieve_segment(cell2);
      coordinate_type dx = high(segment).x() - low(segment).x();
      coordinate_type dy = high(segment).y() - low(segment).y();
      if ((low(segment) == origin) ^ cell1.contains_point()) {
        direction.x(dy);
        direction.y(-dx);
      } else {
        direction.x(-dy);
        direction.y(dx);
      }
    }
    coordinate_type side = xh(brect_) - xl(brect_);
    coordinate_type koef =
        side / (std::max)(fabs(direction.x()), fabs(direction.y()));
    if (edge.vertex0() == NULL) {
      clipped_edge->push_back(point_type(
          origin.x() - direction.x() * koef,
          origin.y() - direction.y() * koef));
    } else {
      clipped_edge->push_back(
          point_type(edge.vertex0()->x(), edge.vertex0()->y()));
    }
    if (edge.vertex1() == NULL) {
      clipped_edge->push_back(point_type(
          origin.x() + direction.x() * koef,
          origin.y() + direction.y() * koef));
    } else {
      clipped_edge->push_back(
          point_type(edge.vertex1()->x(), edge.vertex1()->y()));
    }
  } 
```

它可能缺少一些类变量或方法，但逻辑在这里很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T01:04:43.070

我编写了一个程序来裁剪 Voronoi 单元格中的无限边缘，以便将边缘限制在矩形边界框内。代码在 [https://github.com/datajaguar/jaguardb/blob/master/src/JagCGAL.cc](https://github.com/datajaguar/jaguardb/blob/master/src/JagCGAL.cc)

getIntersectionPointWithBox() 方法基本上检查边界框的每一边（共 4 条边），如果有则获取交点。fillInCorners() 方法检查边界框周围的缺失点并将角坐标添加到边缘。要为每个单元格制作一个多边形，它会在末尾添加第一个点以使多边形闭合。

# c++ - 当 Python 嵌入 C++ 时，numpy 导入失败

> ID：14281727
> 
> 赞同：1
> 
> 时间：2013-01-11T15:50:49.077
> 
> 标签：c++, python, numpy

使用嵌入到我的 C++ 应用程序（32 位）并静态链接的 Python 2.7 访问 numpy 时，我遇到了问题。在我的应用程序可执行文件下，我将 python27.dll 与 Python27 目录以及所有需要的 DLL 一起放置。我还在单独的文件夹 (C:\Python27) 中安装了 Python 2.7 和 numpy（均为 32 位）。当我运行我的应用程序并尝试导入 numpy 时，我收到以下错误：

```
Traceback (most recent call last):
File "pytest", line 1, in <module>
    File "C:\Python27\lib\site-packages\numpy\__init__.py", line 137, in <module>
    import add_newdocs
    File "C:\Python27\lib\site-packages\numpy\add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
    File "C:\Python27\lib\site-packages\numpy\lib\__init__.py", line 4, in <module>
    from type_check import *
    File "C:\Python27\lib\site-packages\numpy\lib\type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
    File "C:\Python27\lib\site-packages\numpy\core\__init__.py", line 5, in <module>
    import multiarray
ImportError: DLL load failed: The specified module could not be found. 
```

当我从我的应用程序文件夹中删除 python27.dll 时，我可以导入 numpy。当客户想要导入任何 Python 第三方库时，我不能要求客户手动删除 python27.dll ......有人对我如何解决这个问题有想法吗？这个多阵列模块是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:44:50.497

好的，问题解决了。嵌入式应用程序文件夹下的 python27.dll 文件必须与 Python 2.7 版本相同。验证日期以确保它们相同。如果它们不相同，您可能会遇到各种问题。

```
My Application Folder
    myApp.exe
    python27.dll  <-- must be the same as Python installed on your machine
    Python27 Folder
        DLL
        Libs 
```

# c# - FileNotFoundException 抛出时间太长，有没有办法缩短超时时间？

> ID：14281729
> 
> 赞同：4
> 
> 时间：2013-01-11T15:50:55.440
> 
> 标签：c#, exception-handling

我有一些代码可以加载这样的图像：

```
 using (var sourceImage = Image.FromFile(fullImagePath))
 {
    return new Bitmap(sourceImage);
 } 
```

有时，图像会被错误命名或不在预期的位置，并且`System.IO.FileNotFoundException`会正确抛出 a。但是，抛出此异常通常需要大约 1 秒。当我的代码抓取几百张图像并且其中一些丢失时，这会为该过程增加大量时间。

**如果需要抛出异常，有没有办法加速异常？**

我能想到的唯一选择是首先检查图像是否存在，但这会为每个图像获取增加几十毫秒，这也不是一个好的解决方案。

**澄清**：包含的一个例子`fullImagePath`是：

```
\\ImageSrv\secure\sites\2756\27074\760789\bthumb\1287.jpg 
```

同一目录中可能有几百个其他图像。

**结论**：看起来检查文件是否存在是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:34:35.817

1.  自己防止异常。检查文件是否存在而不是让 Image.FromFile 失败并通过异常 shennigans
2.  将缓存保留在内存中，以消除对额外硬盘驱动器调用的必要性
3.  如果情况需要，使用 FileSystemWatcher 更新缓存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:55:33.457

您可以保留通过另一个线程定期更新的文件名缓存。然后您可以检查并立即知道文件是否存在（绕过 File.Exists 的开销）

当然，如果目录中的文件不断被添加/删除，这将不起作用。

# vba - VBA复制粘贴正在删除边框

> ID：14281733
> 
> 赞同：0
> 
> 时间：2013-01-11T15:51:02.493
> 
> 标签：vba, excel

我正在使用 VBA 代码将值从一个工作簿复制并粘贴到另一个工作簿。但是，当我粘贴时，目标工作表中的边框将被删除。粘贴时如何保持边框？

下面是我的代码：

```
With wsSource
    .Range(.Range("A2"), .Range("C2").End(xlDown)).Copy wsDestination.Range("A3")
End With 
```

我读过该`PasteSpecial`方法可能有用，但我不知道如何在上面的代码中实现它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:01:34.023

试试这个

```
With wsSource
    .Range(.Range("A2"), .Range("C2").End(xlDown)).Copy

    wsDestination.Range("A3").PasteSpecial Paste:=xlPasteValues, _
    Operation:=xlNone, SkipBlanks:=False, Transpose:=False
End With 
```

如有疑问，请录制宏；）

# regex - 使用 Regex .htaccess 从路径中删除目录

> ID：14281738
> 
> 赞同：0
> 
> 时间：2013-01-11T15:51:21.007
> 
> 标签：regex, .htaccess, mod-rewrite

我有一个网址：

`http://www. my site .com/cms/forum/users/username/`

我需要它重定向到：

`http://www. my site .com/forum/users/username/`

所以 url 的 cms 部分需要消失。我的正则表达式是什么，我把它放在文件夹结构的什么位置？换句话说，我是否将此正则表达式添加到`.htaccess`站点的根目录中或`.htaccess`文件`cms`夹中或其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:41:41.700

您可以将[RedirectMatch](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirectmatch)用于此任务

```
RedirectMatch /cms(/.*) $1 
```

你也可以给它一个状态，例如

```
RedirectMatch 301 /cms(/.*) $1 
```

从手册

> 上下文：服务器配置、虚拟主机、目录、.htaccess

这意味着，您可以在主服务器配置、站点的虚拟主机配置或 .htaccess 文件中使用它，只要它最适合。

# c# - Control.Focus() 错误

> ID：14281739
> 
> 赞同：2
> 
> 时间：2013-01-11T15:51:21.280
> 
> 标签：c#, .net, winforms, controls

我在表单控件聚焦方面遇到了一些问题。

在 form1 上，我单击一个按钮并运行以下代码：

```
private void btnTest_Click(object sender, System.EventArgs e)
{
    form2 = new Form2();

    Application.Idle += new EventHandler(Application_Idle);

    form2.Show();
    form2.Activate();
    form2.textBox1.Focus();

    Form3 form3 = new Form3();
    form3.ShowDialog();
} 
```

然后，在此 CLR 之后，我运行事件 Application_Idle，我在该事件上添加了一个必须关注 textBox2 控件的方法。

```
private void Application_Idle(object sender, EventArgs e)
{
    form2.textBox2.Focus();
    form2.textBox2.Select();
    form2.textBox2.Focus();

    Application.Idle -= new EventHandler(Application_Idle);
} 
```

但是当我单击 form1 上的按钮时，我看到 Form2 显示，Form3 显示然后`Application_Idle`方法引发，但`form2.textBox2`控制没有得到关注......

如果我注释掉该`form3.ShowDialog();`行，它可以正常工作，但是如何将一个表单元素与另一个表单激活集中在一起？（`form3.ShowDialog()`）？

备注补充：问题也是我有一个严格的架构，我只能改变 Application_Idle 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:55:59.137

您遇到的问题与[方式](http://msdn.microsoft.com/en-us/library/aa984358(v=vs.71).aspx)有关：

> 窗体和对话框要么是模式的，要么是无模式的。在继续使用应用程序的其余部分之前，必须关闭或隐藏模式窗体或对话框。
> 
> 显示重要消息的对话框应该始终是模态的。Visual Studio 中的“关于”对话框是模式对话框的一个示例。MessageBox 是您可以使用的模态表单。
> 
> 无模式表单允许您在表单和另一个表单之间转移焦点，而无需关闭初始表单。显示表单时，用户可以继续在任何应用程序的其他位置工作。

当您使用`ShowDialog`时，显示的表单会阻止调用方返回控制权，直到对话框关闭。如果这不是您想要的效果，您可以使用该`Show`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:09:20.787

当表单本身获得焦点时，您可以关注文本字段：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
        this.GotFocus += (s, e) =>
            {
                this.textBox2.Focus();
            };
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:40:24.040

正如 John Koerner 所说，由于模式的原因，您不能在 Form 3 打开时将焦点设置到 Form 2。

由于您声明必须在表格 3 中输入用户信息才能继续，您应该改变您的方法。您可以为 Form 3 的关闭放置一个监听器。只有这样你才能把焦点放在别的地方

```
form3.FormClosed += Application_Idle 
```

# python - 作为单元测试的一部分启动/停止守护进程的最佳实践（使用 pytest）

> ID：14281740
> 
> 赞同：2
> 
> 时间：2013-01-11T15:51:24.800
> 
> 标签：python, fixture, pytest

代码的功能测试通常需要外部资源，例如数据库。

基本上有两种方法：

*   假设资源（例如数据库）始终在运行并且始终可用
*   作为测试的一部分启动/停止相关资源

在 Python unittest(2) 的“旧”世界中，setUp() 和 tearDown() 方法可用于控制服务。

使用 py.test，世界变得更加复杂，setUp() 和 tearDown() 方法的概念已被用于实现夹具的 funcarg 魔法所取代。老实说，这种方法被打破了——至少作为 setUp/tearDown 方法的替代品。

在使用 py.test 的项目中控制服务和资源的推荐方法是什么？

我们应该继续使用 setUp/tearDown 方法编写测试（至少在需要的地方）还是有更好的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:51:42.677

pytest 支持 xUnit 风格的设置/拆卸方法，请参阅[http://pytest.org/latest/xunit_setup.html](http://pytest.org/latest/xunit_setup.html)所以如果你喜欢这种风格，你可以使用它。

使用[http://pytest.org/latest/fixture.html](http://pytest.org/latest/fixture.html)还可以实例化一个“会话”范围的夹具，它可以实例化整个测试运行的外部进程并返回一个连接对象。代码大致如下所示：

```
# content of conftest.py

import pytest

@pytest.fixture(scope="session")
def connection():
    ... instantiate process ...
    return connection_to_process_or_url 
```

并像这样使用它测试文件：

```
# content of test_conn.py
def test_conn_ok(connection):
    ... work with connection ... 
```

如果您想在测试运行之间保持服务，您将需要暂时自己编写一些逻辑（存储 PID，检查它是否存在，如果没有 PID 或不存在，则启动一个新进程）（未来的版本可能包括这样的支持代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-19T10:20:20.777

[正如hpk42 指出的那样](https://stackoverflow.com/a/14299202/3231557)，在 pytest 中执行此操作的正确方法似乎是使用会话范围的固定装置。[根据文档的 Fixture finalization / execution teardown code 部分，](http://docs.pytest.org/en/latest/fixture.html#fixture-finalization-executing-teardown-code)您可以使用`yield`语句简洁地将 setup/teardown 内联到单个调用中：

```
import smtplib
import pytest

@pytest.fixture(scope="module")
def smtp(request):
    smtp = smtplib.SMTP("smtp.gmail.com")
    yield smtp  # provide the fixture value
    print("teardown smtp")
    smtp.close() 
```

在这种情况下，如果您不希望它按模块运行，则可以使用会话范围。

# php - 如何为 MySQL 远程数据库连接设置 Windows Server 2008？

> ID：14281753
> 
> 赞同：0
> 
> 时间：2013-01-11T15:51:54.810
> 
> 标签：php, mysql, windows, mysqli, windows-server-2008

我对这个服务器设置和数据库连接非常陌生。我用谷歌搜索了很多，但找不到解决方案。我正在开发一个需要将数据发布到远程数据库的 android 应用程序。完成了。

现在我必须`MySQL Database`在新的`Windows Server 2008`. 我已经安装并设法访问`root`用户（这很好）。现在我想从我的本地计算机[这是**iMac** ] 访问这个数据库。[我已经按照这个链接](http://chamaras.blogspot.co.uk/2008/08/how-to-grant-permission-to-remote.html)设置了权限。当我尝试从我的 Web 应用程序运行时，它显示以下错误。

```
 Error: unable to connect to database. Host 'xx.xx.xxx.x' is not allowed to connect to this MySQL server 
```

**这是我的问题**

1.) 如何从任何计算机访问远程 MySQL 数据库？

2.) 如何在服务器中运行 Web 应用程序？比如虚拟主机，即我需要设置 ftp 帐户并将内容放在那里吗？（`For Eg: testhost.com/connecttodatabase.php`通过执行此操作，它将执行 testhost 服务器中的任何代码。但我不知道如何为我的服务器执行此操作）。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:06:09.223

或者，您也可以尝试...

```
use the_database_name;

GRANT ALL PRIVILEGES ON 
the_database_name.* 
TO 
'the_user_in_php_code'@'%' 
IDENTIFIED BY 
'password_of_the_user_in_php_code';

FLUSH PRIVILEGES; 
```

来源： [http ://forums.devshed.com/mysql-help-4/host-is-not-allowed-to-connect-to-this-mysql-server-366908.html](http://forums.devshed.com/mysql-help-4/host-is-not-allowed-to-connect-to-this-mysql-server-366908.html)

# json - JSON不适用于javascript变量

> ID：14281755
> 
> 赞同：0
> 
> 时间：2013-01-11T15:52:03.583
> 
> 标签：json

帮助，这让我发疯：

我有包含以下内容的 routeMapping 变量：

```
{"b":[{"Ya":53.388639,"Za":-1.4785248000000593},{"Ya":53.39310538272831,"Za":-1.464529037475586}],"gm_accessors_":{"length":null},"length":2,"gm_bindings_":{"length":{}}} 
```

这行得通

```
alert('length is ' + (routeMapping.length -1)) 
```

这样做：

```
alert(routeMapping); 
```

但不是这个！：

```
alert(routeMapping.b[1].Ya); 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:57:55.117

执行上下文是什么？

我刚刚在 chrome 上的控制台上尝试了这个，它工作得很好。

我做了

```
var x = eval("(" + '{"b":[{"Ya":53.388639,"Za":-1.4785248000000593},{"Ya":53.39310538272831,"Za":-1.464529037475586}],"gm_accessors_":{"length":null},"length":2,"gm_bindings_":{"length":{}}}' + ")") 
```

接着

```
 x.b[1].Ya 
```

它向我展示了 53.38 ......正如我所料

-高手

# sorting - 如何在 symfony2 中对实体的 arrayCollection 进行排序

> ID：14281758
> 
> 赞同：32
> 
> 时间：2013-01-11T15:52:06.513
> 
> 标签：sorting, symfony, doctrine, entities

我有一个带有此属性的实体“容器”

```
/**
 * @ORM\OneToMany(targetEntity="BizTV\ContentManagementBundle\Entity\Content", mappedBy="container")
 */
private $content; 
```

该属性是一个数组集合...

```
public function __construct() {
    $this->content = new \Doctrine\Common\Collections\ArrayCollection();
} 
```

...使用这两种标准方法

```
/**
 * Add content
 *
 * @param BizTV\ContentManagementBundle\Entity\Content $content
 */
public function addContent(\BizTV\ContentManagementBundle\Entity\Content $content)
{
    $this->content[] = $content;
}

/**
 * Get content
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getContent()
{
    return $this->content;
} 
```

现在我的问题是，是否有一种平滑的方法可以在其中构建排序功能，也许是在 getContent() 调用中？我不是 php wiz，当然也没有在 symfony2 方面经验丰富，但我边走边学。

内容实体本身有一个像这样的排序 INT，我想对其进行排序：

```
/**
 * @var integer $sortOrder
 *
 * @ORM\Column(name="sort_order", type="integer")
 */
private $sortOrder; 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-11T16:07:57.087

您应该能够使用[@ORM\OrderBy](http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#annref-orderby)语句，它允许您指定列以对集合进行排序：

```
/**
 * @ORM\OneToMany(targetEntity="BizTV\ContentManagementBundle\Entity\Content", mappedBy="container")
 * @ORM\OrderBy({"sort_order" = "ASC"})
 */
private $content; 
```

事实上，这可能是[OneToMany/ManyToOne 上的 How to OrderBy 的副本](https://stackoverflow.com/questions/12478583/how-to-orderby-on-onetomany-manytoone)

### 编辑

检查实施建议，您似乎必须使用集合查询获取表，以便 @ORM\OrderBy 注释工作：[http ://www.krueckeberg.org/notes/d2.html](http://www.krueckeberg.org/notes/d2.html)

这意味着您必须在存储库中编写一个方法来返回包含内容表的容器。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-05-05T13:25:53.863

如果您想确保始终根据当前属性值按顺序获取关系，您可以执行以下操作：

```
$sort = new Criteria(null, ['Order' => Criteria::ASC]);
return $this->yourCollectionProperty->matching($sort); 
```

例如，如果您更改了 Order 属性，请使用它。也适用于“最后修改日期”。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-01-12T21:22:27.310

你可以写

```
@ORM\OrderBy({"date" = "ASC", "time" = "ASC"}) 
```

用于多个标准排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-14T04:16:22.270

你也可以像这样`ArrayCollection`按`Criteria`属性排序`orderBy`：

```
<?php
    namespace App/Service;

    use Doctrine\Common\Collections\ArrayCollection;
    use Doctrine\Common\Collections\Criteria;

    /**
     * Class SortService
     *
     * @package App\Service
     */
    class SortService {
        /**
         * @param SomeAbstractObject $object
         * @return SomeCollectionItem[]
         */
        public function sorted(SomeAbstractObject $object): array {
            /** $var ArrayCollection|SomeCollectionItem[] */
            $collection = $object->getCollection();

            // convert normal array to array collection object
            if(\is_array(collection)) {
                $collection = new ArrayCollection(collection);
            }

            // order collection items by position property
            $orderBy = (Criteria::create())->orderBy([
                'position' => Criteria::ASC,
            ]);

            // return sorter SomeCollectionItem array
            return $collection->matching($orderBy)->toArray();
        }
    }
?> 
```

# extjs - 为什么extjs脚本崩溃IE9？

> ID：14281765
> 
> 赞同：1
> 
> 时间：2013-01-11T15:52:41.570
> 
> 标签：extjs, extjs4, extjs4.1

我有一个简单的脚本并使用 extjs 4.1.1：

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="ext-all.css">
        </style>
        <script type="text/javascript" src="js/ext-all.js"></script>
        <script>
            Ext.onReady(function() {
                Ext.create('Ext.Panel', {
                    width: 200,
                    height: 200,
                    renderTo: Ext.getBody(),
                    layout: {
                        type: 'table',
                        columns: 2
                    },
                    defaults: {
                        frame: true,
                        width: 200,
                        height: 200
                    },
                    items: [test()]
                })
            })

            function test() {
                return Ext.createWidget('tabpanel', {
                    title: null,
                    rowspan: 2,
                    width: 100,
                    height: 200,
                    activeTab: 0,
                    items: [{
                        name: 'test',
                        title: 'test'
                    }]
                })

            }
        </script>
    </head>

    <body></body>

</html> 
```

此脚本使 IE9 崩溃。为什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:13:54.250

[`createWidget`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-createWidget)在 Ext4 中已弃用。请改用 Ext.create 或 Ext.widget。

```
return Ext.widget('tabpanel', { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:17:58.577

这是它的小提琴：http: [//jsfiddle.net/webfriend13/n2qyL/](http://jsfiddle.net/webfriend13/n2qyL/)

```
 return Ext.widget('tabpanel', { 
```

正如 A1rPun 指出的，createWidget 在 Ext4 中已被弃用。请改用 Ext.create 或 Ext.widget。

# salesforce - 对什么是销售人员的核心理解

> ID：14281766
> 
> 赞同：0
> 
> 时间：2013-01-11T15:52:47.170
> 
> 标签：salesforce, salesforce-service-cloud

首先，如果这是一个非常简单的问题，我很抱歉，但它已经困扰了我一段时间。

我试图了解销售人员实际上是什么，我的意思是技术术语。我已经阅读了网站文档和维基百科页面，但我试图了解所有这些蓬松术语背后的含义。

我的理解是，salesforce 是一个基于云的数据库，它存储大量信息，所有 salesforce 应用程序都包含查询该数据库并根据预期应用程序以不同方式对其进行建模的脚本，这是正确的吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:02:07.373

[软件即服务 (SaaS)](http://en.wikipedia.org/wiki/Software_as_a_service)

要获得程序，您需要**下载**、**安装**、**配置**等。如果您的系统有很多用户，则很难配置并支持单用户安装。想象一下，您改进了应用程序，例如新版本。您需要更新每个实例。

使用*SaaS*模型，您拥有一个共享的 Web 应用程序，它与旧的可下载应用程序做同样的事情。但是支持它要容易得多，因为理想情况下只有一个实例。

*Salesforce*是一家通过 SaaS 模式提供自己系统的公司，但不仅如此。它也是开发新应用程序的平台。

# excel - 需要excel在带有页面参考的单元格上返回空白

> ID：14281768
> 
> 赞同：2
> 
> 时间：2013-01-11T15:52:47.583
> 
> 标签：excel, vlookup

我需要费用表方面的帮助。我没有太多Excel经验，但我会尽力描述。

A 列列出了我们所有 50 种产品的名称。

B 列列出了所有 50 种产品的数字产品代码。

C 列列出了我们 50 种产品中每种产品的项目时间。在填写产品的单个成本表之前，该字段必须为空白，然后将其总成本填充在下面的 D 列中，并且查找功能会使用项目时间（在查找表中列出）填充 c 列。

D 列列出了我们 50 种产品中每种产品的单独成本。此字段显示为空白，但页面参考单个成本表上的总成本。完成单个成本表并在 D 列中显示总成本后，查找功能会在 C 列中填充项目工时。

示例：A1 小部件（产品名称）

B1 800（数字产品代码）

C1 400（项目工时 - 直到成本出现在 D1 中然后查找才显示）

D1 1500 美元（在成本输入单个成本表之前显示为空白。但它并不是真正的空白 - 公式行显示了对 Widget 成本表的引用，Widget 总成本的单元格编号 (L51) 如下：

```
’Widgets’!L51 
```

== 我在成本表的单元格 B1 中尝试了以下公式，但它仅在我删除 D1 中的页面引用时才有效。

```
=IF(ISBLANK(D1),"",VLOOKUP(B1,'Project Hrs Lookup'!A4:C23,3,FALSE)) 
```

我应该在 ISBLANK 旁边使用一些东西，因为单元格 D1 有一个页面引用并且不是真正的空白吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:29:27.667

试试下面的公式：

*   对于`D1`单元格：`=IF(’Widgets’!L51="","",’Widgets’!L51)`- 仅在填写`’Widgets’!L51`单元格时才会显示成本。
*   对于`C1`单元格（我想您`B1`在请求中拼写错误）：而不是您的初始公式使用`=IF(D1="","",VLOOKUP(B1,'Project Hrs Lookup'!$A$4:$C$23,3,FALSE))`：
    *   我替换`ISBLANK(D1)`为`D1=""`- 不同之处在于只有在单元格**真正**`ISBLANK`为空白的情况下才会返回 TRUE ，即什么都没有。我的解决方案检查单元格中的**空字符串**- 这就是区别（请参阅上面的公式）。****`D1`****
    *****   我还将 VLOOKUP 表引用从您的 relative:`'Project Hrs Lookup'!A4:C23`更改为 absolute: `'Project Hrs Lookup'!$A$4:$C$23`- 如果您决定将您的 furmula 复制到其他地方（我几乎可以肯定您会这样做）- 引用将保持原样（我面临着非常很久以前我自己的同一个问题数百万次（：）。作为这里的另一个解决方案 - 为您的参考表定义命名范围并在您的公式中使用它：如果您需要更改它 - 您将在一个地方执行此操作，其余的都将按预期工作。****

 ****祝您的解决方案好运！****

# javascript - 过时的 javascript 对象文字日期

> ID：14281769
> 
> 赞同：1
> 
> 时间：2013-01-11T15:52:49.223
> 
> 标签：javascript, date, object-literal

我试图使用 javascript 对象文字来格式化时间，以便与 MySql 日期时间值进行比较。

继承人的对象。

```
var dateTime = {
    d: new Date(),
    pad: function(number) {
        return (number < 10 ? '0' : '') + number;
    },
    now: function() {
        return this.d.getFullYear()+'-'+this.pad(this.d.getMonth()+1)+'-'+this.pad(this.d.getDate())+' '+this.pad(this.d.getHours())+':'+this.pad(this.d.getMinutes())+':'+this.pad(this.d.getSeconds());
    }            
} 
```

让我们说我调用这个对象 onClick 来获取日期并将其显示在警报框中。我不断返回相同的字符串。

例子：

```
alert(dateTime.now()); 
```

回报：

```
Same date every time. 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:58:37.437

将您的代码更改为以下内容：

```
var dateTime = {
    pad: function(number) {
        return (number < 10 ? '0' : '') + number;
    },
    now: function() {
        var d = new Date();
        return d.getFullYear()+'-'+this.pad(d.getMonth()+1)+'-'+this.pad(d.getDate())+' '+this.pad(d.getHours())+':'+this.pad(d.getMinutes())+':'+this.pad(d.getSeconds());
    }            
} 
```

当您这样做时`d: new Date()`，您正在获取一个包含执行时的日期/时间的对象`new Date()`，例如快照。该对象不显示动态时间。正因为如此，您总是显示相同的时间。实际上，那是创建 dateTime 对象的时间。

# windows - 如何判断 Windows 内核事件对象是自动重置还是手动重置？

> ID：14281773
> 
> 赞同：5
> 
> 时间：2013-01-11T15:52:58.120
> 
> 标签：windows, winapi, autoresetevent, manualresetevent, windows-kernel

Windows 允许创建（命名的）[事件对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682655%28v=vs.85%29.aspx)。

Event（Windows 中的同步原语）可以是 auto-reset 类型（在这种情况下，您[可以说它是一种 semaphore](http://blogs.msdn.com/b/oldnewthing/archive/2006/06/22/642849.aspx)），也可以是 manual-reset 类型，在这种情况下，它会一直保持设置，直到有人重置它。

现在，从[CreateEvent](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)、[OpenEvent](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684305%28v=vs.100%29.aspx)、[SetEvent等的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686211%28v=vs.85%29.aspx)[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686915%28v=vs.110%29.aspx)看来，一旦创建了事件，似乎无法确定它是自动重置还是手动重置。

我的情况是，一个进程创建了一个命名事件，而第二个进程必须对该事件进行操作（它传递了名称，然后打开事件并最终发出信号）。由于该事件应该始终是一个手动重置事件以使整个事情变得有意义，我希望在第二个过程中添加一个检查以确保它*是*一个手动重置事件。有没有办法检查这个？

（是的，在我的情况下它更像是一个不错的选择，因为如果任何代码会创建一个自动重置事件然后将其传递给这个进程，这将是一个错误。但是错误发生了，如果我可以检测到它们。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:54:27.347

没有记录在案的方法可以做到这一点，但如果你冒险进入无证土地实际上并不难。（出于您的目的，这应该没问题，因为它不会真正影响您程序的功能。）

你需要做的第一件事是弄清楚给你的句柄是否是一个事件。为此，您使用 NtQueryObject。该函数记录在这里：http: [//msdn.microsoft.com/en-us/library/bb432383](http://msdn.microsoft.com/en-us/library/bb432383(v=vs.85).aspx) (v=vs.85).aspx 。它带有本机 API 的通常条款，它可能会消失或更改，恕不另行通知。部分示例：

```
#include <winternl.h>

typedef NTSTATUS (NTAPI * PFN_NtQueryObject)(
    HANDLE Handle,
    OBJECT_INFORMATION_CLASS ObjectInformationClass,
    PVOID ObjectInformation,
    ULONG ObjectInformationLength,
    PULONG ReturnLength );

HMODULE ntdll = GetModuleHandle( L"ntdll.dll" );

auto NtQueryObject = (PFN_NtQueryObject)GetProcAddress( ntdll, "NtQueryObject" );

NTSTATUS result = NtQueryObject(
    eventHandle,
    ObjectTypeInformation,
    buffer,
    length,
    &length ); 
```

这将为您提供一个 PUBLIC_OBJECT_TYPE_INFORMATION 结构。如果对象实际上是一个事件，则 TypeName 字段将为“Event”。

接下来，您调用 NtQueryEvent 来获取事件的类型。所有这些都是*完全*没有记录的。

```
typedef enum _EVENT_INFORMATION_CLASS {
    EventBasicInformation
} EVENT_INFORMATION_CLASS, *PEVENT_INFORMATION_CLASS;

typedef enum _EVENT_TYPE {
    NotificationEvent,
    SynchronizationEvent
} EVENT_TYPE, *PEVENT_TYPE;

typedef struct _EVENT_BASIC_INFORMATION {
  EVENT_TYPE              EventType;
  LONG                    EventState;
} EVENT_BASIC_INFORMATION, *PEVENT_BASIC_INFORMATION;

typedef NTSTATUS (NTAPI * PFN_NtQueryEvent)(
    HANDLE EventHandle,
    EVENT_INFORMATION_CLASS EventInformationClass,
    PVOID EventInformation,
    ULONG EventInformationLength,
    PULONG ReturnLength );

auto NtQueryEvent = (PFN_NtQueryEvent)GetProcAddress( ntdll, "NtQueryEvent" );

EVENT_BASIC_INFORMATION info;
ULONG length = sizeof( info );

NTSTATUS result = NtQueryEvent(
    eventHandle,
    EventBasicInformation,
    &info,
    length,
    &length ); 
```

现在，只需检查信息中的 EventType 字段即可。“NotificationEvent”表示手动重置，“SynchronizationEvent”表示自动重置。

如果你想知道我是如何计算出第二部分的，我没有。信息来自这里：[http](http://undocumented.ntinternals.net/) ://undocumented.ntinternals.net/ 。请负责任地使用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:11:15.803

在您的姓名返回`WaitForSingleObject( handle, 0 )`后立即致电。`WaitForSingleObject`如果返回值是`WAIT_TIMEOUT`那么你知道它是一个自动重置事件，如果它`WAIT_OBJECT_0`会被返回并且它是一个手动重置事件。

这确实依赖于在两个调用之间设置的句柄，因此存在潜在的竞争条件，它不会检测到自动重置事件，但它应该在大多数情况下工作。因为它是一个不错的选择，希望这就足够了？

# c++ - 如何每 X 分钟发送一个标志？

> ID：14281779
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:53:24.940
> 
> 标签：c++, measurement

我正在一种“控制块”中工作，它必须每 6 分钟发送一个标志。问题是我不知道是否有一种简单的方法可以做到这一点。我已经在循环中使用clock_t，直到它达到6分钟，然后调用一个发送标志并重新初始化clock_t变量的方法。

**我忘了解释什么，睡眠不是一个选项，因为这个块就像一个流一样工作，它必须一直发送一些东西。实际上，标志会改变发送的内容**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:55:51.243

您可以让线程休眠 6 分钟，然后发送标志：

```
for(;;)
{
    sendFlag();
    sleep(6*60);
} 
```

[以下是 sleep 方法的一些选项](https://stackoverflow.com/questions/4184468/sleep-for-milliseconds)，包括 C++11 的[`std::this_thread::sleep_for`](http://en.cppreference.com/w/cpp/thread/sleep_for).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:53:40.293

你不需要一个完整的线程只是为了这个。使用系统操作系统定期计时器回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:00:32.847

您可以简单地使用一个线程函数来打开或关闭标志，并一次使其休眠 6 分钟。例如：

```
bool flag = false;

int main() {
    while(true) {
        if (flag == true) {
            flag = false;
        }
    }

    return(0);
}

void threadFunc() {
    flag = true;
    sleep(360); //360 seconds is 6 minutes
} 
```

注意：您将需要使用互斥锁或信号量，因为现在编写的代码**不是线程安全**的。您如何使用线程也取决于操作系统。当然，除非你使用 C++11。

# r - 具有固定比例的ggplot多行

> ID：14281782
> 
> 赞同：-2
> 
> 时间：2013-01-11T15:53:32.350
> 
> 标签：r, plot, scale, ggplot2

我有两组时间序列数据。我想将它们绘制在一个图中。此外，绘图应该在 -3 到 15 的 y 轴的固定比例下显示 a 和 b，其中 x 轴是时间和日期，y 轴是 v1。

数据 a : TimeAndDate v1

```
1  2007-09-30 00:00:00 0.3460000
2  2007-09-30 01:00:00 0.1660000
3  2007-09-30 02:00:00 0.2066667
4  2007-09-30 03:00:00 0.2956667
5  2007-09-30 04:00:00 0.2220000
6  2007-09-30 05:00:00 0.6090000
7  2007-09-30 06:00:00 0.8480000
8  2007-09-30 07:00:00 1.1986667
9  2007-09-30 08:00:00 1.4696667
10 2007-09-30 09:00:00 1.6280000 
```

数据 b：TimeAndDate v1

```
1  2007-09-29 00:00:00 -1.3250000
2  2007-09-29 01:00:00 -0.4670000
3  2007-09-29 02:00:00 -0.4426667
4  2007-09-29 03:00:00 -0.6396667
5  2007-09-29 04:00:00 -0.7843333
6  2007-09-29 05:00:00 -0.5563333
7  2007-09-29 06:00:00 -0.7276667
8  2007-09-29 07:00:00 -0.6260000
9  2007-09-29 08:00:00 -0.7290000
10 2007-09-29 09:00:00  0.4976667 
```

预期成绩：

![阴谋](../Images/9551f62913b98cd1bc3592b3e885298b.png)

我已通过代码将数据合并为 temp：

```
 temp <- data.frame(HMn29_29$avg_val,HMn28_29$avg_val,HMn29_29$h)

   HMn29_29.avg_val HMn28_29.avg_val          HMn29_29.h
1        -1.3250000       -1.9225000 2007-09-29 00:00:00
2        -0.4670000       -1.6676667 2007-09-29 01:00:00
3        -0.4426667       -1.5820000 2007-09-29 02:00:00
4        -0.6396667       -1.5716667 2007-09-29 03:00:00
5        -0.7843333       -1.8290000 2007-09-29 04:00:00
6        -0.5563333       -1.6153333 2007-09-29 05:00:00
7        -0.7276667       -1.8093333 2007-09-29 06:00:00
8        -0.6260000       -1.9303333 2007-09-29 07:00:00
9        -0.7290000       -1.3980000 2007-09-29 08:00:00
10        0.4976667        1.2270000 2007-09-29 09:00:00 
```

情节代码：

```
ggplot(temp, aes( HMn29_29.h)) + 
+     geom_line(aes(y = HMn28_29.avg_val, colour = "var0")) + 
+     geom_line(aes(y = HMn29_29.avg_val, colour = "var1")) 
```

如何将 y 轴固定为 -3 到 15？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:32:59.477

我在这里为你想要的东西在黑暗中刺伤，所以你去：

我将您的数据集合并到一个数据框（df）中：

```
date time dose data
2007-09-30 00:00:00 0.3460000 A
2007-09-30 01:00:00 0.1660000 A
2007-09-30 02:00:00 0.2066667 A
2007-09-30 03:00:00 0.2956667 A
2007-09-30 04:00:00 0.2220000 A
2007-09-30 05:00:00 0.6090000 A
2007-09-30 06:00:00 0.8480000 A
2007-09-30 07:00:00 1.1986667 A
2007-09-30 08:00:00 1.4696667 A
2007-09-30 09:00:00 1.6280000 A
2007-09-29 00:00:00 -1.3250000 B
2007-09-29 01:00:00 -0.4670000 B
2007-09-29 02:00:00 -0.4426667 B
2007-09-29 03:00:00 -0.6396667 B
2007-09-29 04:00:00 -0.7843333 B
2007-09-29 05:00:00 -0.5563333 B
2007-09-29 06:00:00 -0.7276667 B
2007-09-29 07:00:00 -0.6260000 B
2007-09-29 08:00:00 -0.7290000 B
2007-09-29 09:00:00  0.4976667 B 
```

然后用以下代码绘制它：

```
ggplot(data=df, aes(x=time, y=dose, group=data, colour=data)) + geom_line() + geom_point() 
```

这产生： ![在此处输入图像描述](../Images/b4fe001061e2f399305a98eee53aceef.png)

如果要更改需要使用的轴的范围，`xlim()`并且`ylim()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:06:43.930

把桌子放在一张桌子上：

```
 temp <- data.frame(HMn29_29$avg_val,HMn28_29$avg_val,HMn29_29$h) 
```

绘图：

```
temp <- data.frame(HMn29_29$avg_val,HMn28_29$avg_val,HMn29_29$h)
ggplot(temp, aes( HMn29_29.h)) + ylim(-2,13)+
     geom_line(aes(y = HMn28_29.avg_val, colour = "Temprature")) + 
    geom_line(aes(y = HMn29_29.avg_val, colour = "TempratureA"))+ opts(title = 'chart_title') 
```

结果：

![在此处输入图像描述](../Images/80c09c9d7d39892933f18393d3f3b09f.png)

# objective-c - 连接到 sqlite

> ID：14281783
> 
> 赞同：0
> 
> 时间：2013-01-11T15:53:33.357
> 
> 标签：objective-c

我在连接到我的 sqlite 数据库时遇到了一些问题。我使用的是 xcode 版本 4.4.1

这是我的代码..

```
NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"signature.db"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: databasePath ] == NO)
{
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &database) == SQLITE_OK)
    {
        status.text = @"Connected..";

    } else {
        status.text = @"Failed to open/create database..";
    }
}

[filemgr release]; 
```

有什么建议..？

谢谢，

繁荣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T13:12:55.223

如果您的应用程序包中有一个预构建的数据库文件，您可能希望检查数据库文件是否到位，以便您可以将其放入您的文档文件夹中。当然，当您增强应用程序时，任何架构更改都需要在代码中完成。这是我使用的一些代码（有效，但需要稍微更新）

打开/创建数据库时，我使用它来指定数据库文件的位置。我没有将它与 init 放在一起，因为我的位置在 iOS 和 Mac OS X 之间是不同的，我希望 DB 代码同时与两者一起使用：

```
NSString *dbFilePath;
NSArray *searchPaths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentFolderPath = searchPaths[0];
dbFilePath = [documentFolderPath stringByAppendingPathComponent: @"MyDBFile.db"];
MyDB* appDB = [[EasySpendLogDB alloc] initWithFile:dbFilePath];
if(!appDB) {
    // show error
    return;
} 
```

这是在我的数据库访问类中。它使用了我写的一些包装类：

```
- (id) initWithFile: (NSString*) filePathName {
if(!(self = [super init])) return nil;

BOOL myPathIsDir;
BOOL fileExists = [[NSFileManager defaultManager]
                         fileExistsAtPath: filePathName
                         isDirectory: &myPathIsDir];
NSString *backupDbPath = [[NSBundle mainBundle]
                                  pathForResource:@"MyDBFile"
                                  ofType:@"db"];

if (backupDbPath != nil && !fileExists) {
    [[NSFileManager defaultManager]
                            copyItemAtPath:backupDbPath
                            toPath:filePathName
                            error:nil];
}

db = [[ABSQLiteDB alloc] init];
if(![db connect:filePathName]) {
    return nil;
}

[self checkSchema]; // this is where schema updates are done (see project sample)

return self;
} 
```

您可能还想查看我编写的这个包含示例项目的 Objective-c 包装器：[https ://github.com/AaronBratcher/ABSQLite](https://github.com/AaronBratcher/ABSQLite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:14:51.520

无需检查数据库是否存在；`sqlite3_open_v2()`（[参考](http://www.sqlite.org/c3ref/open.html)）将创建数据库，如果它不存在，如果你传递标志`SQLITE_OPEN_CREATE`：

```
NSString *dbPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPath:@"signature.db"];

if (sqlite3_open_v2([dbPath UTF8String], &database, SQLITE_OPEN_READWRITE|SQLITE_OPEN_CREATE) == SQLITE_OK)
{
    status.text = @"Connected..";
    // Check the schema and install if it doesn't exist
    sqlite3_close(database);
} else {
    status.text = @"Failed to open/create database..";
} 
```

# code-coverage - 了解代码覆盖率结果

> ID：14281784
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:53:38.790
> 
> 标签：code-coverage

我在 Visual Studio 中有一个奇怪的覆盖结果：它显示为 if 语句没有被覆盖，但因为我们确实进入了该块，所以它一定是。为什么这些结果是错误的？（这些结果涵盖了许多条件下的多次运行）

[截屏](http://i1197.photobucket.com/albums/aa425/fbReader/coverage_zpsb0f3f207.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:23:11.423

我怀疑您看到的是分支覆盖率，因为没有测试所有可能导致每条路径下降的组合。逻辑 AND ( [&&](http://msdn.microsoft.com/en-us/library/c6s3h5a7.aspx) ) 允许提前转义，即它仅在第一个为真时评估第二个运算符。

例如

```
if (bool.TryParse(savePrep, out save) && save) 
```

有3种可能

1.  savePrep = "真"
2.  savePrep = "假"
3.  savePrep = "既非真也非假"

你可能只锻炼了#1和#2

# java - 禁用按钮时是否需要删除 actionListener？

> ID：14281791
> 
> 赞同：1
> 
> 时间：2013-01-11T15:54:03.550
> 
> 标签：java, swing

我正在`minesweeper`使用`Java`Swing 进行研究，我认为这是一种快速“摆脱”通过使用单击的按钮的方法

`JButton.setEnabled(false);`（当然也有适当的图标）。

但是我是否必须稍后删除所有连接到此按钮的侦听器，还是足够了，然后我可以忘记所述按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:02:43.527

您有 2 个不同的问题，一个在您的标题中，一个在您的描述中。

> 禁用按钮时是否需要删除 actionListener？

如前面的评论所述，没有。

```
But do I have to remove all the listeners connected to this button later... 
```

是的，如果你有其他类型的听众。例如，如果按钮被禁用，MouseListener 仍然会触发。通常，在 JButton 上不需要 MouseListener，但在某些极端情况下可能存在。我不确定可以添加到 JButton 的其他类型的侦听器。

只是想澄清一下。

# image-processing - 我误解了直方图吗？

> ID：14281792
> 
> 赞同：0
> 
> 时间：2013-01-11T15:54:07.943
> 
> 标签：image-processing

如果我有灰度图像，则强度在 [0,255] 范围内。我是否应该理解任何强度值的直方图是具有强度值的像素数？
非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:05:47.677

强度直方图将给出具有强度值的像素数。因此，该图将由 256 个数字组成，并且所有像素的分布都将在图上描绘（基本上是计数）！

# ios - iOS Facebook 摆姿势照片、URL、消息和姓名

> ID：14281793
> 
> 赞同：0
> 
> 时间：2013-01-11T15:54:11.380
> 
> 标签：ios, facebook

我正在尝试将照片、URL、消息和名称从我的 iOS 应用程序发布到 Facebook 到用户的墙上。我正在使用最新的 Facebook 框架 3.1
我正在使用以下代码：

```
 NSDictionary* dict = @{
    @"link" : @"https://www.yahoo.com",
    @"picture" : UIImagePNGRepresentation([UIImage imageNamed:@"Default.png"]),
    @"message":@"Your message here",
    @"name" : prodName,
    @"caption" : [NSString stringWithFormat:@"Try the app: %@", prodName],
    @"description" : @"Integrating Facebook in ios"
};

[FBRequestConnection startWithGraphPath:@"me/photos" parameters:dict HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSString *alertText;
    if (error)
    {
        NSLog(@"%@",[NSString stringWithFormat: @"error: domain = %@, code = %d", error.domain, error.code]);
        alertText = @"Failed to post to Facebook, try again";
    } else
    {
        alertText = @"Posted successfully to Facebook";
    }

    [[[UIAlertView alloc] initWithTitle:@"Facebook Result" message:alertText delegate:nil cancelButtonTitle:@"OK!" otherButtonTitles:nil] show];
}]; 
```

我可以发帖成功。但我在 Facebook 上看到，它只发布照片和消息，而不是其他细节。如果我使用@“me/feed”，我什至无法成功发布。Facebook 给出错误代码=5。
如何发布所有详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:00:14.110

“me/feed”需要一个用于“picture”参数的 url。请查看此链接：[上一篇关于在用户墙上张贴照片的帖子](https://stackoverflow.com/questions/6702135/post-photo-on-users-wall-using-facebook-ios-sdk)

看起来你必须决定是使用“我/照片”还是“我/饲料”。此链接将为您提供更多信息，并且可能是一种解决方法。

# sql - 使用 SQL 将连接结果转换为两列

> ID：14281794
> 
> 赞同：3
> 
> 时间：2013-01-11T15:54:16.180
> 
> 标签：sql, unpivot

我有一个 JOIN 结果如下

```
Address1 Address2 Address3
ABC       XYZ      LMN 
```

我想将它们转换为以下格式

```
Address    Level

ABC         1
XYZ         2
LMN         3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:55:27.597

您将需要`UNPIVOT`或`UNION ALL`。这些获取您的列并将其转换为行。A`UNION ALL`可以在所有 RDBMS 上完成：

```
select address1 Address, 1 as level
from yourtable
union all
select address2 Address, 2 as level
from yourtable
union all
select address3 Address, 3 as level
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e6cb6/1)

如果您正在使用具有该`UNPIVOT`功能的 RDBMS (SQL Server 2005+/Oracle 11g+)，那么您的查询将类似于以下内容：

```
select Address, 
  right(Level, 1) Level
from yourtable
unpivot
(
  address
  for level in (Address1, Address2, Address3)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d933c/2)

两者的结果是：

```
| ADDRESS | LEVEL |
-------------------
|     ABC |     1 |
|     XYZ |     2 |
|     LMN |     3 | 
```

# javascript - ajax请求后Javascript未在元素上执行

> ID：14281797
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:54:23.367
> 
> 标签：javascript, ajax, jquery

我有一个带有一些图像的表格，当调用 Ajax 时，它会删除前一个表格并返回另一个带有新图像的表格。

```
$("img").click(function(){
    $.post("gallery.php", function(data){
        $("#left-gallery, #right-gallery").html("").append(data);
    });
}); 
```

这就是我从 php 文件中获取信息的方式。

问题是新元素不会触发以前的点击事件。

如果我单击表格中的图像，它应该替换表格外部页面上的另一个图像。

```
$("#left-gallery img").click(function(){
    $("#left-gallery td").removeClass("highlighted");

    var source = $(this).attr("src");
    $("#image1-image").attr("src", source); //replaces a big image outside the table
    $(this).parents("td").addClass("highlighted");
}); 
```

表格图像嵌套如下：

```
<tr>
    <td>
        <a  href = "image.jpg"> 
            <img src = "image.jpg">
            Image
        </a>
    </td>
</tr> 
```

即使阻止默认行为也不起作用。

```
$("td a").click(function(e){
    e.preventDefault();
}); 
```

javascript 在之后`<body>`并且是内部的。我不知道如何让点击事件或任何在返回的表上工作，任何帮助将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:57:35.117

使用委托，因为您正在动态修改 DOM

```
$('#left-gallery').on('click','img',function(){
        // your code here
}) 
```

通过这样做，您将事件处理程序附加到 #left-gallery 元素 = 是静态的。然后它将监听来自后代图像的点击事件并在它们冒泡时处理它们

取决于您使用的 jQuery 版本

> $('element').live('event',function({ code here..})); // jQuery 1.3+
> 
> $('staticparent').delegate('element', 'event', function(){ code here..}); // jQuery 1.4.3+
> 
> $('staticparent').on('event', 'element', function(){ code here.. }); // jQuery 1.7+

你在做

```
$("#left-gallery img").click(function(){ 
```

它将事件处理程序绑定到图像.. 修改 dom 后图像不再存在.. 并且您永远不会将事件处理程序绑定到新添加的图像，所以这就是点击没有做任何事情的原因

# java - 使用 ExecutorService 对管道模式中的一个阶段进行多线程处理

> ID：14281799
> 
> 赞同：1
> 
> 时间：2013-01-11T15:54:28.310
> 
> 标签：java, multithreading, design-patterns, pipeline, executorservice

我有一个多级管道。每个阶段都在一个单独的线程中运行，并使用有界 BlockingArrayQueues 进行通信。我正在尝试对最慢的阶段进行多线程处理以提高吞吐量。

问题：为此推荐的实现是什么？是否有一个库可以使这个实现更简单、更容易阅读？

输入队列 -> 阶段 1（4 个线程） -> 有界队列 -> 阶段 2

**要求**：

*   输入队列上的工作单元是独立的。

*   工作单元是严格排序的——输出应该与输入的顺序相同。

*   第 1 阶段必须受到限制——如果输出超过一定大小，它必须停止。

*   阶段 1 中的异常应导致输出队列上出现“毒丸”并终止 ExecutorService。应尽最大努力丢弃排队的任务。

** 我建议的实现：**

我正在考虑使用线程数有限的 ThreadPoolExecutor。

将通过每个工作单元上的 CountDown 闩锁强制执行严格排序。如果前一个工作单元的锁存器为 0 并且队列上有空间，则线程只能推送结果。这也负责限制，因为线程将阻塞，直到输出队列上有空间。

```
class WorkUnit {
   CountDownLatch previousLatch;
   CountDownLatch myLatch;
}

class MyRunnable extends Runnable {
   public void run() {
       //do work...
       previousLatch.await();
       ouputQueue.put( result );
       myLatch.countDown();
   }
} 
```

异常处理是我有点难过的地方。我正在考虑覆盖 ThreadPoolExecutor.afterExecute() 如果出现异常，它将调用 shutdownNow()。

```
class MyThreadPoolExecutor extends ThreadPoolExecutor {
      protected void afterExecute(Runnable r, Throwable t) {
           if(t != null) {
               //record exection, log, alert, etc
               ouput.put(POISON_PILL);
               shutdownNow();
           }
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:25:49.060

使用 ExecutorService 需要完全异步的设计，而不使用像`CountDownLatch.countDown()`or这样的阻塞操作`BlockingQueue.take()`。当动作 B 必须等待某些事件时，该事件应通过将 a`Runnable`提交给`ExecutorService`.

在您的情况下，您应该创建自定义类而不是队列。根据某些规则（例如，限制正在运行的 Stage1 任务的数量），这些类应该接受消息并将它们存储在内部，或者提交实现 Stage1 或 Stage2 的任务。

至于订购，请用序列号代替先前任务的参考。

# c# - 简单的 WCF 服务，并非从客户端到服务的所有参数

> ID：14281800
> 
> 赞同：5
> 
> 时间：2013-01-11T15:54:28.880
> 
> 标签：c#, wcf

我不完全确定如何问这个，所以我做了一个[SSCCE](http://sscce.org/)

我有这个简单的 WCF 服务

```
[ServiceContract]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class EmailService
{
    [WebInvoke(UriTemplate = "/SendEmail", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Xml)]
    public bool SendEmail(EmailData data)
    {
        try
        {
            byte[] fileBinaryContents = Convert.FromBase64String(data.Enc64FileContents);
            File.WriteAllBytes(data.FileName, fileBinaryContents);
            return true;
        }
        catch (Exception)
        {
            return false;
        }
    }
}

[DataContract(Namespace = "http://somenamespace/")]
public class EmailData
{
    [DataMember]
    public string FileName { get; set; }

    [DataMember]
    public string EmailAddress { get; set; }

    [DataMember]
    public string Enc64FileContents { get; set; }
} 
```

我正在尝试让 Winforms 客户端调用 webservice 方法；这就是我所拥有的

```
string URI = " http://localhost:59961/EmailService/SendEmail";
string fileContents = Convert.ToBase64String(File.ReadAllBytes("test.txt"));

EmailData emailData = new EmailData
                          {
                              EmailAddress = "foo@bar.com",
                              Enc64FileContents = fileContents,
                              FileName = "test.txt"
                          };

XNamespace ns = "http://somenamespace/";
XElement emailDataElement = new XElement(ns + "EmailData");
emailDataElement.Add(new XElement(ns + "FileName", emailData.FileName));

emailDataElement.Add(new XElement(ns + "Enc64FileContents", emailData.Enc64FileContents));
emailDataElement.Add(new XElement(ns + "EmailAddress", emailData.EmailAddress));

var xml = emailDataElement.ToString(SaveOptions.DisableFormatting);

using (WebClient wc = new WebClient())
{
    wc.Headers[HttpRequestHeader.ContentType] = "application/xml; charset=utf-8";
    string response = wc.UploadString(URI, "POST", xml);
} 
```

现在在服务端，一些属性为空，如下面的屏幕截图所示。 ![在此处输入图像描述](../Images/8a0fffb90d207a1c243fd770e4d0333d.png)

为什么它`FileName`具有正确的价值而其他人没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:24:25.513

反序列化时，XML 元素的顺序很重要。默认情况下，顺序是按字母顺序排列的，因此您应该先发送`EmailAddress`，然后`Enc64FileContents`，然后`FileName`。或者另一种方法是在`Order`属性中设置`[DataMember]`属性，如下面的这个***真正***的SSCCE 代码:)

```
public class StackOverflow_14281800
{
    [ServiceContract]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
    public class EmailService
    {
        [WebInvoke(UriTemplate = "/SendEmail", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Xml)]
        public bool SendEmail(EmailData data)
        {
            try
            {
                Console.WriteLine("data.FileName = " + data.FileName);
                Console.WriteLine("data.EmailAddress = " + data.EmailAddress);
                Console.WriteLine("data.FileContents = " + new string(Convert.FromBase64String(data.Enc64FileContents).Select(b => (char)b).ToArray()));
                //byte[] fileBinaryContents = Convert.FromBase64String(data.Enc64FileContents);
                //File.WriteAllBytes(data.FileName, fileBinaryContents);
                return true;
            }
            catch (Exception)
            {
                return false;
            }
        }
    }

    [DataContract(Name = "EmailData", Namespace = "http://somenamespace/")]
    public class EmailData
    {
        [DataMember(Order = 1)]
        public string FileName { get; set; }

        [DataMember(Order = 2)]
        public string EmailAddress { get; set; }

        [DataMember(Order = 3)]
        public string Enc64FileContents { get; set; }
    }

    public static void Test()
    {
        string baseURI = "http://localhost:59961/EmailService";

        var host = new WebServiceHost(typeof(EmailService), new Uri(baseURI));
        host.Open();
        Console.WriteLine("Host opened");

        string URI = baseURI + "/SendEmail";

        //string fileContents = Convert.ToBase64String(File.ReadAllBytes("test.txt"));
        string fileContents = Convert.ToBase64String("hello world".Select(c => (byte)c).ToArray());

        EmailData emailData = new EmailData
        {
            EmailAddress = "foo@bar.com",
            Enc64FileContents = fileContents,
            FileName = "test.txt"
        };

        XNamespace ns = "http://somenamespace/";
        XElement emailDataElement = new XElement(ns + "EmailData");

        emailDataElement.Add(new XElement(ns + "FileName", emailData.FileName));
        emailDataElement.Add(new XElement(ns + "EmailAddress", emailData.EmailAddress));
        emailDataElement.Add(new XElement(ns + "Enc64FileContents", emailData.Enc64FileContents));

        var xml = emailDataElement.ToString(SaveOptions.DisableFormatting);

        using (WebClient wc = new WebClient())
        {
            wc.Headers[HttpRequestHeader.ContentType] = "application/xml; charset=utf-8";
            string response = wc.UploadString(URI, "POST", xml);
            Console.WriteLine(response);
        }
    }
} 
```

# javascript - 使用 jQuery 将目录添加到图像源

> ID：14281804
> 
> 赞同：0
> 
> 时间：2013-01-11T15:54:36.890
> 
> 标签：javascript, jquery

我的网站上有 5 行，每行都有一张图片。

单击图像时，图像的大小会增加，但 id 然后喜欢在图像源之前添加一个目录，这样它就会变成不同的图像。

jQuery可以做到这一点吗？

**目前**

```
<img src="image.jpg" /> 
```

**我想要的是**

```
<img src="hires/image.jpg" /> 
```

我已经阅读了有关使用“数据源”标签的信息，但我似乎无法正常工作？

**试过了**

```
$('img').click(function(){
    $(this).attr({'src'}).prepend('hires');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T15:58:03.163

这是你想要的？

```
$('img').click(function(){
    $(this).attr('src', function(i, value) {
        return 'hires/' + value;
    });
}); 
```

它会`hires/`在每次点击之前添加。您可以使用以下方法测试它是否已经存在`.indexOf`：

```
$(this).attr('src', function(i, value) {
    return value.indexOf('hires/') === -1 ?  'hires/' + value : value;
}); 
```

如果要在`hires/`和 not之间切换`hires/`，请删除字符串（如果存在）：

```
$(this).attr('src', function(i, value) {
    return value.indexOf('hires/') === -1 ?  
        'hires/' + value : 
        value.replace('hires/', '');
}); 
```

* * *

`.prepend`是一种添加 DOM 元素的 jQuery 方法。它不是本机字符串方法。那里的大括号也是错误的（语法错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:55:31.540

你可以这样做，

**[现场演示](http://jsfiddle.net/KXgU4/)**

```
$('img').click(function(){
    $(this).attr('src', function(i, value) {
        return 'hires/' + value;
    });   
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:58:06.513

```
$(this).attr({'src'}).prepend('hires'); 
```

上面一行有几处错误。

`{'src'}`是一个`SyntaxtError`。在 JavaScript 中，花括号用于创建新对象（或新代码块）。对象由键值对组成，例如

```
var obj = { aKey: 42 };
obj.aKey // 42 
```

**更新。** 从 ES2015 开始，可以省略该值，以防存在与键名相同的变量，并且可以在创建对象的范围内访问。

```
var aKey = 42;
var obj = { aKey }; // Note, there're no quotes
obj.aKey // 42 
```

[$.fn.attr](http://api.jquery.com/attr/)既可以作为 getter，也可以根据它收到的参数作为 setter。您可能希望使用它`$(this).attr('src')`来获取当前`src`属性并`$(this).attr('src', 'something')`对其进行更新。

[$.fn.prepend](http://api.jquery.com/prepend/)不适用于字符串。它用于将内容插入到每个匹配元素的开头。

所以最后这是实现目标的正确方法：

```
$(this).attr('src', 'hires/' + $(this).attr('src')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T16:01:11.277

这应该这样做：

```
$('img').click(function(){
    var imgSRC = $(this).attr('src');
    $(this).attr('src', 'hires/' + imgSRC);
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T15:58:56.347

```
$(this).attr('src', "hires/" + $(this).attr('src')); 
```

# jboss7.x - 使用 'rhc tail' 和 'rhc-tail-files' 查看更多行

> ID：14281808
> 
> 赞同：1
> 
> 时间：2013-01-11T15:54:59.827
> 
> 标签：jboss7.x, openshift, openshift-client-tools

我在 OpenShift 上部署了一个 JBoss 7.1 应用程序。现在我必须检查日志文件，但使用`tail -f -n 100 jbossas-7/logs/server.log`命令我只能看到日志文件的最后 10 行。有没有办法查看整个文件？我可以下载吗？

谢谢！

**编辑**

对不起，我没有解释清楚。我的意思是我无法从该`rhc-tail-file`工具中查看更多行。对不起！`less`我已经使用 ssh 客户端 Putty 和命令解决了我的问题。谢谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T16:50:07.377

您可以使用`-o`选项 with`rhc tail`将`-n`选项传递给 tail：

```
rhc tail <app name> -f jbossas-7/logs/server.log -o '-n100' 
```

请注意，“-n100”中没有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:00:54.627

您可以使用 less 或 cat 命令：`less jbossas-7/logs/server.log`或`cat jbossas-7/logs/server.log`

# cocos2d-iphone - 在 CCSprite 范围内画线 cocos2d

> ID：14281812
> 
> 赞同：0
> 
> 时间：2013-01-11T15:55:19.593
> 
> 标签：cocos2d-iphone, line, draw, ccsprite

我正在 cocos2d 中开发游戏，其中包含苹果、芒果和香蕉形状的 CCSprite。现在我希望用户在选定的 CCSprite（苹果、芒果或香蕉）内画线（我猜是通过 CCMoionStreak）。

我有以下问题：

我怎样才能实现这个画线功能？由于用户只能绘制选定的形状。

请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:11:17.530

我不确定我是否正确理解了您，但我认为您可以使用以下内容：

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector]convertToGL:location];
    if (CGRectContainsPoint(sprite rect, location))
    {
     do your drawing
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:55:17.573

如果用户在 sprite 之外开始或在 sprite 之外结束，则不清楚您想要发生什么。如果这类似于忍者水果游戏，请检测滑动进入和退出精灵的位置（如果滑动太快，则为近似值）。否则，只需检查起点和终点是否在矩形中。

无论哪种情况，在这些点之间使用 ccDrawline。

# php - phpexel 和 codeigniter 出现错误

> ID：14281813
> 
> 赞同：0
> 
> 时间：2013-01-11T15:55:19.973
> 
> 标签：php, codeigniter, phpexcel

我得到了这个链接上描述的所有东西：[http](http://www.ahowto.net/php/easily-integrateload-phpexcel-into-codeigniter-framework) ://www.ahowto.net/php/easily-integrateload-phpexcel-into-codeigniter-framework ，但我在我的excel文件中得到了这个（我使用了来自网站的示例，其中是教程): [http://img11.imageshack.us/img11/7017/errorfzh.jpg](http://img11.imageshack.us/img11/7017/errorfzh.jpg)

我的控制器：

```
 class Mail extends CI_Controller {
    public function __construct(){
        parent::__construct();
        $this->load->library(array('form_validation', 'excel'));
        //activate worksheet number 1
        $this->excel->setActiveSheetIndex(0);
        //name the worksheet
        $this->excel->getActiveSheet()->setTitle('test worksheet');
        //set cell A1 content with some text
        $this->excel->getActiveSheet()->setCellValue('A1', 'This is just some text value');
        //change the font size
        $this->excel->getActiveSheet()->getStyle('A1')->getFont()->setSize(20);
        //make the font become bold
        $this->excel->getActiveSheet()->getStyle('A1')->getFont()->setBold(true);
        //merge cell A1 until D1
        $this->excel->getActiveSheet()->mergeCells('A1:D1');
        //set aligment to center for that merged cell (A1 to D1)
        $this->excel->getActiveSheet()->getStyle('A1')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);

        $filename='just_some_random_name.xls'; //save our workbook as this file name
        header('Content-Type: application/vnd.ms-excel'); //mime type
        header('Content-Disposition: attachment;filename="'.$filename.'"'); //tell browser what's the file name
        header('Cache-Control: max-age=0'); //no cache

        //save it to Excel5 format (excel 2003 .XLS file), change this to 'Excel2007' (and adjust the filename extension, also the header mime type)
        //if you want to save it as .XLSX Excel 2007 format
        $objWriter = PHPExcel_IOFactory::createWriter($this->excel, 'Excel5');  
        //force user to download the Excel file without writing it to server's HD
        $objWriter->save('php://output');
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:56:22.210

您应该停用服务器上的 php 安全模式。参考这个： http: [//php.net/manual/en/features.safe-mode.php](http://php.net/manual/en/features.safe-mode.php)

# graph - 剑道图表 - 数据丢失？

> ID：14281815
> 
> 赞同：1
> 
> 时间：2013-01-11T15:55:24.703
> 
> 标签：graph, charts, kendo-ui

我一直在查看 Kendo 网站上的股票历史演示，并从中进行了一些工作。我正在生成一些数据并将其添加到剑道图表中，但由于某种原因，图表中缺少八月至十二月的数据。

源代码包含在下面，因此您可以复制 - 如果有人能告诉我为什么没有显示完整的数据，那就太好了。

```
<div class="k-widget k-chart" id="yearly-entity-prices-me"></div>
<script>
jQuery(function () {
    jQuery("#yearly-entity-prices-me").kendoChart({
        "series": [{
            "name": "Close",
            "groupNameTemplate": "#= group.value # (#= series.name #)",
            "type": "area",
            "field": "Close"
        }],
        "seriesDefaults": {
            "area": {
                "opacity": 0.8,
                "markers": {
                    "visible": false
                }
            }
        },
        "categoryAxis": {
            "labels": {
                "color": "#727f8e",
                "format": "MMM"
            },
            "majorGridLines": {
                "visible": false
            },
            "line": {
                "visible": false
            },
            "majorTicks": {
                "visible": false
            },
            "type": "Date",
            "categories": ["2011/01/31 00:00:00", "2011/02/28 00:00:00", "2011/03/31 00:00:00", "2011/04/29 00:00:00", "2011/05/31 00:00:00", "2011/06/30 00:00:00", "2011/07/29 00:00:00", "2011/08/31 00:00:00", "2011/09/30 00:00:00", "2011/10/31 00:00:00", "2011/11/30 00:00:00", "2011/12/30 00:00:00", "2011/01/31 00:00:00", "2011/02/28 00:00:00", "2011/03/31 00:00:00", "2011/04/29 00:00:00", "2011/05/31 00:00:00", "2011/06/30 00:00:00", "2011/07/29 00:00:00", "2011/08/31 00:00:00", "2011/09/30 00:00:00", "2011/10/31 00:00:00", "2011/11/30 00:00:00", "2011/12/30 00:00:00", "2011/01/31 00:00:00", "2011/02/28 00:00:00", "2011/03/31 00:00:00", "2011/04/29 00:00:00", "2011/05/31 00:00:00", "2011/06/30 00:00:00", "2011/07/29 00:00:00", "2011/08/31 00:00:00", "2011/09/30 00:00:00", "2011/10/31 00:00:00", "2011/11/30 00:00:00", "2011/12/30 00:00:00"]
        },
        "valueAxis": [{
            "labels": {
                "color": "#727f8e",
                "format": "${0}",
                "step": 2,
                "skip": 2
            },
            "line": {
                "visible": false
            }
        }],
        "dataSource": {
            "sort": [{
                "field": "Date",
                "dir": "asc"
            }],
            "group": [{
                "field": "Symbol",
                "dir": "asc"
            }],
            "schema": {
                "model": {
                    "fields": {
                        "DisplayDate": {
                            "editable": false,
                            "type": "string"
                        },
                        "Date": {
                            "type": "date"
                        },
                        "Close": {
                            "type": "number"
                        },
                        "Volume": {
                            "type": "number"
                        },
                        "Open": {
                            "type": "number"
                        },
                        "High": {
                            "type": "number"
                        },
                        "Low": {
                            "type": "number"
                        },
                        "Symbol": {
                            "type": "string"
                        }
                    }
                }
            },
            "data": [{
                "DisplayDate": "31/01/2011",
                "Date": "\/Date(1296432000000)\/",
                "Close": 600.36,
                "Volume": 2804332,
                "Open": 603.6,
                "High": 604.47,
                "Low": 595.55,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "28/02/2011",
                "Date": "\/Date(1298851200000)\/",
                "Close": 613.4,
                "Volume": 2281411,
                "Open": 610,
                "High": 616.49,
                "Low": 608.01,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "31/03/2011",
                "Date": "\/Date(1301526000000)\/",
                "Close": 586.76,
                "Volume": 2028228,
                "Open": 583,
                "High": 588.1612,
                "Low": 581.74,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "29/04/2011",
                "Date": "\/Date(1304031600000)\/",
                "Close": 544.1,
                "Volume": 3522997,
                "Open": 540,
                "High": 544.1,
                "Low": 538.51,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "31/05/2011",
                "Date": "\/Date(1306796400000)\/",
                "Close": 529.02,
                "Volume": 2685830,
                "Open": 525,
                "High": 529.05,
                "Low": 523.5,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "30/06/2011",
                "Date": "\/Date(1309388400000)\/",
                "Close": 506.38,
                "Volume": 2427330,
                "Open": 501.99,
                "High": 506.67,
                "Low": 501.5,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "29/07/2011",
                "Date": "\/Date(1311894000000)\/",
                "Close": 603.69,
                "Volume": 4133695,
                "Open": 604.23,
                "High": 614.96,
                "Low": 603.69,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "31/08/2011",
                "Date": "\/Date(1314745200000)\/",
                "Close": 540.96,
                "Volume": 2689989,
                "Open": 544.74,
                "High": 546.3,
                "Low": 536,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "30/09/2011",
                "Date": "\/Date(1317337200000)\/",
                "Close": 515.04,
                "Volume": 2723353,
                "Open": 520.21,
                "High": 524,
                "Low": 514.38,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "31/10/2011",
                "Date": "\/Date(1320019200000)\/",
                "Close": 592.64,
                "Volume": 2557538,
                "Open": 595.09,
                "High": 599.69,
                "Low": 591.67,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "30/11/2011",
                "Date": "\/Date(1322611200000)\/",
                "Close": 599.39,
                "Volume": 3390173,
                "Open": 597.95,
                "High": 599.51,
                "Low": 592.09,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "30/12/2011",
                "Date": "\/Date(1325203200000)\/",
                "Close": 645.9,
                "Volume": 1780941,
                "Open": 642.02,
                "High": 646.76,
                "Low": 642.02,
                "Symbol": "1\. A001"
            }, {
                "DisplayDate": "31/01/2011",
                "Date": "\/Date(1296432000000)\/",
                "Close": 339.32,
                "Volume": 13457510,
                "Open": 335.8,
                "High": 340.04,
                "Low": 334.3,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "28/02/2011",
                "Date": "\/Date(1298851200000)\/",
                "Close": 353.21,
                "Volume": 14356740,
                "Open": 351.24,
                "High": 355.05,
                "Low": 351.12,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "31/03/2011",
                "Date": "\/Date(1301526000000)\/",
                "Close": 348.5075,
                "Volume": 9779020,
                "Open": 346.36,
                "High": 349.8,
                "Low": 346.06,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "29/04/2011",
                "Date": "\/Date(1304031600000)\/",
                "Close": 350.13,
                "Volume": 29776300,
                "Open": 346.78,
                "High": 353.95,
                "Low": 346.666,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "31/05/2011",
                "Date": "\/Date(1306796400000)\/",
                "Close": 347.83,
                "Volume": 14869200,
                "Open": 341.1,
                "High": 347.83,
                "Low": 341,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "30/06/2011",
                "Date": "\/Date(1309388400000)\/",
                "Close": 335.67,
                "Volume": 11526680,
                "Open": 334.7,
                "High": 336.13,
                "Low": 332.84,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "29/07/2011",
                "Date": "\/Date(1311894000000)\/",
                "Close": 390.48,
                "Volume": 22550900,
                "Open": 387.64,
                "High": 395.15,
                "Low": 384,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "31/08/2011",
                "Date": "\/Date(1314745200000)\/",
                "Close": 384.83,
                "Volume": 18643770,
                "Open": 390.57,
                "High": 392.08,
                "Low": 381.86,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "30/09/2011",
                "Date": "\/Date(1317337200000)\/",
                "Close": 381.32,
                "Volume": 19553550,
                "Open": 387.12,
                "High": 388.89,
                "Low": 381.18,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "31/10/2011",
                "Date": "\/Date(1320019200000)\/",
                "Close": 404.78,
                "Volume": 13762250,
                "Open": 402.42,
                "High": 409.33,
                "Low": 401.05,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "30/11/2011",
                "Date": "\/Date(1322611200000)\/",
                "Close": 382.2,
                "Volume": 14464710,
                "Open": 381.29,
                "High": 382.276,
                "Low": 378.3,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "30/12/2011",
                "Date": "\/Date(1325203200000)\/",
                "Close": 405,
                "Volume": 6414369,
                "Open": 403.51,
                "High": 406.28,
                "Low": 403.49,
                "Symbol": "2\. A002"
            }, {
                "DisplayDate": "31/01/2011",
                "Date": "\/Date(1296432000000)\/",
                "Close": 169.64,
                "Volume": 6716002,
                "Open": 170.16,
                "High": 171.44,
                "Low": 167.41,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "28/02/2011",
                "Date": "\/Date(1298851200000)\/",
                "Close": 173.29,
                "Volume": 6781774,
                "Open": 173.91,
                "High": 175.89,
                "Low": 172.15,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "31/03/2011",
                "Date": "\/Date(1301526000000)\/",
                "Close": 180.13,
                "Volume": 4824628,
                "Open": 179.31,
                "High": 181.57,
                "Low": 178.5,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "29/04/2011",
                "Date": "\/Date(1304031600000)\/",
                "Close": 195.81,
                "Volume": 5697726,
                "Open": 194.38,
                "High": 196.59,
                "Low": 193.78,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "31/05/2011",
                "Date": "\/Date(1306796400000)\/",
                "Close": 196.69,
                "Volume": 3405698,
                "Open": 195.94,
                "High": 198.44,
                "Low": 195.03,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "30/06/2011",
                "Date": "\/Date(1309388400000)\/",
                "Close": 204.49,
                "Volume": 4446007,
                "Open": 200.78,
                "High": 205.2,
                "Low": 200.5,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "29/07/2011",
                "Date": "\/Date(1311894000000)\/",
                "Close": 222.52,
                "Volume": 5166268,
                "Open": 221.29,
                "High": 225.75,
                "Low": 219.51,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "31/08/2011",
                "Date": "\/Date(1314745200000)\/",
                "Close": 215.23,
                "Volume": 7397287,
                "Open": 212.27,
                "High": 216.17,
                "Low": 211.35,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "30/09/2011",
                "Date": "\/Date(1317337200000)\/",
                "Close": 216.23,
                "Volume": 6549641,
                "Open": 218.19,
                "High": 223,
                "Low": 215.21,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "31/10/2011",
                "Date": "\/Date(1320019200000)\/",
                "Close": 213.51,
                "Volume": 7336799,
                "Open": 215.79,
                "High": 218.89,
                "Low": 213.04,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "30/11/2011",
                "Date": "\/Date(1322611200000)\/",
                "Close": 192.29,
                "Volume": 7700490,
                "Open": 194.76,
                "High": 195.3,
                "Low": 188.75,
                "Symbol": "3\. A003"
            }, {
                "DisplayDate": "30/12/2011",
                "Date": "\/Date(1325203200000)\/",
                "Close": 173.1,
                "Volume": 4279069,
                "Open": 173.36,
                "High": 175.17,
                "Low": 172.49,
                "Symbol": "3\. A003"
            }]
        },
        "seriesColors": ["#F59549", "#F36C00", "#733300"],
        "autoBind": true
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:51:05.743

这是因为`categories`您重复了一些日期。尝试`categories`如下：

```
"categories"    : [
    "2011/01/31 00:00:00",
    "2011/02/28 00:00:00",
    "2011/03/31 00:00:00",
    "2011/04/29 00:00:00",
    "2011/05/31 00:00:00",
    "2011/06/30 00:00:00",
    "2011/07/29 00:00:00",
    "2011/08/31 00:00:00",
    "2011/09/30 00:00:00",
    "2011/10/31 00:00:00",
    "2011/11/30 00:00:00",
    "2011/12/30 00:00:00",
] 
```

# ios - UINavigationBar 有形状的背景

> ID：14281822
> 
> 赞同：0
> 
> 时间：2013-01-11T15:55:54.823
> 
> 标签：ios, objective-c, cocoa-touch

我正在尝试制作一个自定义 UINavigationBar，但问题是我的背景图像中有一条曲线，并且它比默认导航栏大一点。当我尝试设置背景图像并更改导航栏大小时，它只是将图像缩放为矩形。有任何想法吗？

酒吧： ![导航栏背景](../Images/c26d7fda82e5150db0e7e79b5b1298c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:21:05.137

覆盖

```
- (CGSize) sizeThatFits:(CGSize)size  {
  return CGSizeMake(custom_width, custom_height);
} 
```

为了返回自定义导航栏的大小。

请注意，如果您使用的高度不是 4 的倍数，如果您隐藏然后在任何位置显示导航栏（它从顶部移动 1 个像素），将会导致问题

# python - Python：SQLAlchemy ImportError：没有名为 pysqlite2 的模块

> ID：14281825
> 
> 赞同：2
> 
> 时间：2013-01-11T15:56:07.123
> 
> 标签：python, sqlite, sqlalchemy, pysqlite

我正在运行我手动安装在我的主目录中的 python 2.7.3，因为我没有 root 访问权限。系统上安装了2.6.6，但我确实需要2.7。当我运行应用程序时，SQLAlchemy 会抛出此 ImportError。所以我知道 pysqlite2 现在是 2.7 中的 sqlite3，所以我猜它对安装了哪个版本的 python 感到困惑。

这是一个回溯：

```
[11/Jan/2013:16:04:57] ENGINE Listening for SIGHUP.
[11/Jan/2013:16:04:57] ENGINE Listening for SIGTERM.
[11/Jan/2013:16:04:57] ENGINE Listening for SIGUSR1.
[11/Jan/2013:16:04:57] ENGINE Bus STARTING
[11/Jan/2013:16:04:57] ENGINE Starting up DB access
[11/Jan/2013:16:04:57] ENGINE Error in 'start' listener <bound method SAEnginePlugin.start of <giraffe.sa.saplugin.SAEnginePlugin object at 0x239c6d0>>
Traceback (most recent call last):
  File "/assetuser/lib/python2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/process/wspbus.py", line 197, in publish
    output.append(listener(*args, **kwargs))
  File "/assetuser/giraffe_server/giraffe/sa/saplugin.py", line 35, in start
    self.sa_engine = create_engine('sqlite:///giraffe.db', echo=False)
  File "/assetuser/lib/python2.7/site-packages/sqlalchemy/engine/__init__.py", line 338, in create_engine
    return strategy.create(*args, **kwargs)
  File "/assetuser/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py", line 64, in create
    dbapi = dialect_cls.dbapi(**dbapi_args)
  File "/assetuser/lib/python2.7/site-packages/sqlalchemy/dialects/sqlite/pysqlite.py", line 286, in dbapi
    raise e
ImportError: No module named pysqlite2

CherryPy Checker:
dir is an absolute path, even though a root is provided.
section: [/Project]
root: '/assetuser/giraffe_server/static'
dir: '/assetuser/Project'

[11/Jan/2013:16:04:57] ENGINE Started monitor thread 'Autoreloader'.
[11/Jan/2013:16:04:57] ENGINE Started monitor thread '_TimeoutMonitor'.
[11/Jan/2013:16:04:57] ENGINE Serving on 0.0.0.0:8080
[11/Jan/2013:16:04:57] ENGINE Shutting down due to error in start listener:
Traceback (most recent call last):
  File "/assetuser/lib/python2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/process/wspbus.py", line 235, in start
    self.publish('start')
  File "/assetuser/lib/python2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/process/wspbus.py", line 215, in publish
    raise exc
ChannelFailures: ImportError('No module named pysqlite2',)

[11/Jan/2013:16:04:57] ENGINE Bus STOPPING
[11/Jan/2013:16:04:57] ENGINE HTTP Server cherrypy._cpwsgi_server.CPWSGIServer(('0.0.0.0', 8080)) shut down
[11/Jan/2013:16:04:57] ENGINE Stopped thread 'Autoreloader'.
[11/Jan/2013:16:04:57] ENGINE Stopped thread '_TimeoutMonitor'.
[11/Jan/2013:16:04:57] ENGINE Shutting down DB access
[11/Jan/2013:16:04:57] ENGINE Bus STOPPED
[11/Jan/2013:16:04:57] ENGINE Bus EXITING
[11/Jan/2013:16:04:57] ENGINE Bus EXITED 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T09:27:32.227

对于可能有类似问题的其他人：[什么是 sqlite 开发标头以及如何安装它们？](https://stackoverflow.com/questions/1462565/what-are-sqlite-development-headers)

# selenium - 将 selenium 与 phpUnit 一起使用时使用相同的浏览器会话

> ID：14281826
> 
> 赞同：2
> 
> 时间：2013-01-11T15:56:10.437
> 
> 标签：selenium, phpunit, selenium-rc

我有一个用 php 制作的应用程序，它使用 selenium 使用 phpUnit 进行单元测试。问题是我必须先设置环境才能进行测试。例如。我必须设置会话变量、登录并从远程服务器获取数据。所有这些都需要花费大量时间，并且在每个测试功能中都重新设置它是不可行的。

我正在寻找一种方法，以便我可以使用相同的浏览器会话来运行其中的所有测试。我尝试在网上寻找资源，但找不到任何好的资源。我写的代码是

```
protected function setUp()
{
  parent::setUp();
  $this->setBrowserUrl("http://localhost/devel/");
}

public function start()
{
  parent::start();
  $this->open("");
  //Setting up the environment here
}

public function testFunction()
{
   //A test function
}

public function testFunction2()
{
   //Another test function
} 
```

但这是为这两个功能打开浏览器实例。有什么解决方法吗？或者在为此启动 selenium 服务器时是否有任何命令行参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T10:28:53.393

问题已经回答了。不被接受的答案为我完成了工作。

@see[如何在不为每个函数运行新的浏览器窗口的情况下运行 PHPUnit Selenium 测试？](https://stackoverflow.com/questions/16734237/how-do-i-run-a-phpunit-selenium-test-without-having-a-new-browser-window-run-for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T02:20:58.080

“[我] 使用 selenium 使用 phpUnit 进行单元测试”

不你不是。您正在使用 PHPUnit 和 selenium 进行功能测试。:-)

但由于重新发明那个轮子可能不符合您的最佳利益，您需要 Mink： http: [//mink.behat.org/](http://mink.behat.org/)

它围绕着 Guzzle，让您可以使用一堆不同的驱动程序进行基于会话的验收测试。它具有用于无头浏览器的 Goutte，并且可以与 Selenium 和 Sahi 以及其他一些浏览器一起使用。

另外值得注意的是，根据您的需要，Behat：[http ://behat.org/](http://behat.org/)

它使您可以编写客户端可读的测试文档，这些文档可以转换为基于 Mink 的验收测试。

HTH。

# java - 正确使用位掩码？

> ID：14281827
> 
> 赞同：8
> 
> 时间：2013-01-11T15:56:11.697
> 
> 标签：java, bit-manipulation, bitwise-operators, bit, bitmask

嘿嘿，只是有一个关于位掩码的问题。我想我现在知道它们是什么以及它们可以在哪里使用。我想为特定组存储特定权限，例如 BUILD、BREAK 和 INTERACT，也许更多。下面的代码应该这样做，但我不太确定这是否是正确的“风格”。

想法是在这里使用前 3 位来存储第一组的权限，然后将接下来的 3 位用于第二组，依此类推。所以我现在的问题是这是否是一个好方法或者什么会更好？

```
public class Test {
    private int permissions = 0;

    /**
     * The amount of permissions, currently: {@link #BREAK}, {@link #BUILD}, {@link #INTERACT}
     */
    private static final int PERMISSIONS = 3;
    /**
     * The different permissions
     */
    public static final int BUILD = 1, BREAK = 2, INTERACT = 4;
    /**
     * The different groups
     */
    public static final int ALLIANCE = 0, OUTSIDERS = 1;

    public void setPermissions(int permissions, int group)
    {
        this.permissions = permissions << group * PERMISSIONS;
    }

    public void addPermissions(int permission, int group)
    {
        setPermissions(this.permissions | permission, group);
    }

    public boolean hasPermission(int permission, int group)
    {
        return (permissions & permission << group * PERMISSIONS) == permission;
    }
} 
```

编辑：我想使用尽可能少的内存，因为我需要存储大量数据。

编辑：我还需要将它存储在 sql 数据库中，但它不应该产生问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:42:42.140

你知道这种答案迟早会出现，所以它是这样的：

尽管位掩码的使用可以说是所有替代选项中最快的并且具有最低的内存消耗，但它也很容易出错，并且除了在一些非常极端的情况下不鼓励使用它。这是一个经典的低级工具。如果做得好，会创造奇迹，如果滥用，可能会造成严重破坏。

因此，*正确*的方法是为此使用更高级别的抽象，即`enums`和`EnumSets`。速度和内存消耗是可比的，当然稍微差一些。不过，在一般情况下，它们绝对足够了。根据您的确切上下文和需求，有很多方法可以做到这一点。一种可能性可能是：

```
public enum Permission {
    BUILD, BREAK, INTERACT;
}

public class Permissions {
    private final Set<Permission> alliance = EnumSet.noneOf(Permission.class);
    private final Set<Permission> outsiders = EnumSet.noneOf(Permission.class);

    public Set<Permission> alliance() {
        return alliance;
    }

    public Set<Permission> outsiders() {
        return outsiders;
    }
} 
```

仅此一项就可以使您完全按照自己的方式做事，但有两个不同之处：

1.  我认为现在它是类型安全的并且更加万无一失。无需重新发明轮子。
2.  它使用更多的内存。不是很多，因为`EnumSet`这个小通常只是一个`long`.

* * *

* * *

**编辑**以回答 OP 关于将 EnumSet 存储到数据库的评论：

是的，这可能是一个问题，因为存储一个`int`非常容易。如果您仍然考虑坚持使用`EnumSet`，那么我认为有几种可能性：

1.  [看看SO。](https://stackoverflow.com/questions/2199399/storing-enumset-in-a-database)人们以前曾试图解决这个问题。

2.  将值的名称保存在`EnumSet`：

    ```
    Permissions p = new Permissions();
    p.alliance().addAll(EnumSet.of(Permission.BREAK, Permission.BUILD));
    for (Permission permission : p.alliance()) {
        System.out.println(permission);
    } 
    ```

    然后，您可以轻松地重建这些值：

    ```
    for (String word : stringsFromDtb) {
        p.alliance.add(Permission.valueOf(word));
    } 
    ```

3.  保存序数。这是非常危险的，因为您可以通过更改`Permission`枚举轻松打破它。此外，可以输入任何随机数来打破这一点。

    ```
    Permissions p = new Permissions();
    p.alliance().addAll(EnumSet.of(Permission.BREAK, Permission.BUILD));
    for (Permission permission : p.alliance()) {
        System.out.println(permission.ordinal());
    } 
    ```

    然后，您可以轻松地重建这些值：

    ```
    for (int ordinal : ordinalsFromDtb) {
        p.alliance.add(Permission.values()[ordinal]);
    } 
    ```

4.  以通常的方式序列化`EnumSet`并直接存储二进制数据或BASE64ed。嗯。

## ---

**编辑**后**编辑**：

广告。您为您的`enum`值创建索引的评论，以便您将来更改或重新排序它们时，它仍然可以工作。有一个简单的方法可以做到这一点`enums`！它基本上是位域和 之间的中间方式`enums`，它保留了类型安全和所有`enum`特性，并且仍然具有位域的优点。

```
public enum Permission {
    /* I like to have binary literals in place of bit fields,
     * but any notation will work */
    BUILD   (0b0001),
    BREAK   (0b0010),
    INTERACT(0b0100);

    private final int index;

    private Permission(int index) {
        this.index = index;
    }

    public int index() {
        return index;
    }
} 
```

然后，您将索引保存到您的数据库中，并且只需要确保从中进行的解析是正确的。此外，在未来，它有助于仅注释掉（而不是删除）任何不需要的枚举值，这样它们仍然对您可见，并且您不会占用它的索引。或者只是将其标记为`@Deprecated`，您不必删除任何内容；）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T17:19:11.830

有几点我认为你犯了错误

```
public void setPermissions(int permissions, int group)
{
    this.permissions = permissions << group * PERMISSIONS;
} 
```

这会在为 设置权限时清除其他组的所有权限`group`。如果要保留其他组的权限，

```
// clear permissions for `group`
this.permissions &= ~(0x7 << group * PERMISSIONS);
// set permissions for `group`
this.permissions |= permissions << group * PERMISSIONS; 
```

这使其他组的权限保持不变。

```
public void addPermissions(int permission, int group)
{
    setPermissions(this.permissions | permission, group);
} 
```

这会将所有组的权限与您要为其添加的权限混合在一起`group`。我想你想要的是

```
this.permissions |= permission << group * PERMISSIONS; 
```

只需添加而不更改任何其他内容`permission`。`group`

```
public boolean hasPermission(int permission, int group)
{
    return (permissions & permission << group * PERMISSIONS) == permission;
} 
```

如果`group > 0`，按位 和 将在最低三位中没有位，则您在此处朝错误的方向移动，

```
return ((permissions >> group *PERMISSIONS) & permission) == permission; 
```

# function - 我如何在 Haskell 中声明 putStrLn 或打印

> ID：14281836
> 
> 赞同：-2
> 
> 时间：2013-01-11T15:56:29.720
> 
> 标签：function, haskell, printing, declare

我的回答是：

如何在函数中声明 print？

```
bisiesto :: Int -> **?**;
bisiesto x = if (x `mod` 4 == 0 && ((x `mod` 100 /= 0) || (x `mod` 400 == 0))) then  print("Es bisiesto") else print("No es bisiesto"); 
```

请问，谁能帮帮我？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:05:46.863

这是一个简化版本（我改变了逻辑）：

```
bisiesto :: Int -> IO ()
bisiesto  n | even n = n : print "Es bisiesto"
            | otherwise = print "No es bisiesto" 
```

像这样工作：

```
Prelude> bisiesto 2
"Es bisiesto" 
```

# c# - 备份数据库时出现操作系统错误 3

> ID：14281837
> 
> 赞同：1
> 
> 时间：2013-01-11T15:56:30.860
> 
> 标签：c#, sql-server

这是我在同一个论坛中的上一个问题的后续问题。

我想备份我的 SQL Server 数据库。这是代码，用于 C# 中的备份。

```
userConn = new SqlConnection(userdatabase);
userConn.Open();

string UserString;

UserString = "BACKUP DATABASE @DBName TO  DISK = @FilePath";

String destPath = DestDirectory + "\\UserDataTable.bak";
SqlCommand cmd = new SqlCommand(UserString, userConn);

cmd.Parameters.AddWithValue("@dbName", userConn.Database);
cmd.Parameters.AddWithValue("@FilePath", destPath);

cmd.ExecuteNonQuery();
cmd.Dispose(); 
```

但是，它会抛出一个 SQLException，

> “无法打开备份设备 'D:\BookKeeping\Database\11_01_2013_21_15\Database\UserDataTable.bak'。操作系统错误 3（无法检索此错误的文本。原因：15105）。备份数据库异常终止。”

任何想法，可能有什么问题？

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T17:58:28.930

“操作系统错误3”表示找不到目录。SQL 不会为您创建备份目录；您必须在运行备份命令之前手动创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-12T05:21:01.623

确保您的 SqlServer 和您要创建备份的位置是同一个系统。如果您正在远程使用 sqlServer（不在您的系统中），那么您无法在您的机器上创建备份，或者您也无法`.bak`从您的机器上恢复数据库。

# asynchronous - async / await 和 Task.Run -- 如何知道一切何时完成

> ID：14281839
> 
> 赞同：2
> 
> 时间：2013-01-11T15:56:37.890
> 
> 标签：asynchronous, task, async-await

我的实际程序比这更复杂，但我试图简化事情。

假设我正在读取一个包含 URL 列表的文件。我想从每个 URL 下载 HTML 并处理它。处理可能有点复杂，所以我希望它在一个单独的线程上完成。

基本问题是如何判断所有处理何时完成。例如，如果用户试图在处理所有 URL 之前关闭程序，我想给他一条消息而不退出程序。或者，我想在处理完所有 URL 后立即终止程序（可能使用 MsgBox("Done") 消息）。

我希望我的代码如下所示（假设我有一个外部循环读取 URL 并调用此例程）...

```
List<Task> TaskList = new List<Task>();

async void ProcessSingleUrl(string url) {  
var web = new HttpClient();  
    var WebPageContents = await web.GetStringAsync(url);  
    Task t = Task.Run(() => ProcessWebPage(WebPageContents);  
    TaskList.Add(t);
} 
```

上面的代码应该运行得非常快（异步方法立即运行得很好）并且几乎立即返回给调用者。

但是到那时，我很可能在 TaskList 中没有任何条目，因为在 GetStringAsync 完成之前没有定义任务，并且到那时可能没有（或者可能只有少数）完成。所以

```
Task.WaitAll(TaskList.ToArray()); 
```

不能按我需要的方式工作。

如果绝对有必要，我可以先阅读所有 URL 并知道预期有多少任务，但我希望有一个更优雅的解决方案。

我想我可以在等待之前增加一个计数器，但这感觉有点笨拙。

我认为我的结构不正确，但我不确定如何重组。

注意：我不喜欢 Task.Run。Good ol' QueueWorkItem 是一种可能性，但我认为它也有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:13:11.150

> 我认为我的结构不正确，但我不确定如何重组。

我认为这是真的。这是一个可能的解决方案：将整个计算存储为`Task`您的列表中，而不仅仅是第二部分：

```
async Task ProcessSingleUrlInner(string url) {  
    var web = new HttpClient();  
    var WebPageContents = await web.GetStringAsync(url);  
    Task t = Task.Run(() => ProcessWebPage(WebPageContents);  
    await t;
}

void ProcessSingleUrl(string url) {
var t = ProcessSingleUrlInner(url);
TaskList.Add(t);
} 
```

等待此列表中的所有任务将保证一切都已完成。可能，您需要使这个想法适应您的确切需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:21:16.270

我假设您正在获取`IEnumerable<string>`诸如此类的 url 列表。

您可以使用 LINQ 将每个 url 转换为`Task`，然后将`await`它们全部完成：

```
async Task ProcessUrls(IEnumerable<string> urls)
{
  var tasks = urls.Select(async url =>
  {
    var web = new HttpClient();  
    var WebPageContents = await web.GetStringAsync(url);  
    await Task.Run(() => ProcessWebPage(WebPageContents);
  });
  await Task.WhenAll(tasks);
} 
```

请注意，如果您使用此解决方案并且有多个不同的 url 有错误，则`Task.WhenAll`只会报告其中一个错误。

# java - OnListItemClick 问题

> ID：14281840
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:56:47.263
> 
> 标签：java, android

以下类是从数据库填充的列表视图的处理程序。它工作正常，但现在我不会在单击项目时开始新活动。我已经从“活动”扩展到“列表活动”，我相信我需要实现一个“OnListItemClick()”方法。我已经在我的课堂上输入了这个，但我得到一个错误并且没有导入选项。给出的错误是“void 是变量 onListItemClick 的无效类型”

谁能把我推向正确的方向。

代码：

```
package com.example.sqliteexample;

import android.app.Activity;
import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.widget.ListView;

public class SQLView extends ListActivity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    HotOrNot H = new HotOrNot(this, null, null);

    setContentView(R.layout.layout);
     ListView listContent = (ListView)findViewById(R.id.contentList);

     HotOrNot Content = new HotOrNot(this, null, null);
     Content.open();
    Cursor cursor = Content.getData();

    startManagingCursor(cursor);

    @SuppressWarnings("static-access")
    String [] from = new String [] {H.KEY_NAME, H.KEY_HOTNESS};
    int [] to = new int [] {R.id.txtName, R.id.txtAge};

    @SuppressWarnings("deprecation")
    SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this,   R.layout.entries, cursor, from, to);

    listContent.setAdapter(cursorAdapter);

     public void onListItemClick(ListView l, View v, int position, long id) {
            // Do something when a list item is clicked
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:58:30.973

看起来您的`onListItemClick()`声明在您的`onCreate()`方法中。把它移到外面`onCreate()`。

# python - 如何通过 API 密钥登录 Google Drive

> ID：14281842
> 
> 赞同：3
> 
> 时间：2013-01-11T15:56:53.740
> 
> 标签：python, google-drive-api

我按照[文档](https://developers.google.com/api-client-library/python/guide/aaa_apikeys)中的说明进行操作：

```
#google key
API_key = "xxxxx"
#creating an instance of the class
drive_service = build('drive', 'v2', developerKey = API_key)
#get a list of child folder in
children = drive_service.children().list(folderId='yyyyyyy', **param).execute() 
```

**一个错误：**

> 发生错误：https://www.googleapis.com/drive/v2/files/yyyyyyy/children?alt=json&key=xxxxx 返回“需要登录”>

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-11-28T19:04:30.330

这是一个极简版本，演示了使用 GDrive API V3 进行文件夹查询。

```
import httplib2
import pprint
import sys
from apiclient.discovery import build

def printChildren(parent):
  param = {"q": "'" + parent + "' in parents and mimeType != 'application/vnd.google-apps.folder'"}
  result = service.files().list(**param).execute()
  files = result.get('files')

  for afile in files:
    print('File {}'.format(afile.get('name')))

API_KEY = 'XXXXXXX' # get from API->Credentials page in console.cloud.googl.com
FOLDER_ID = '1bWJ18tyq1h-ABQT79SgTsJQFRCIIblHS' # NOTE: folder must be publicly visible when using an API key.
service = build('drive', 'v3', developerKey=API_KEY)
printChildren(FOLDER_ID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:16:22.687

由于`children`似乎仅限于*OAuth2.0*`API_KEY` ，因此这是一个我为自己编写的示例程序供使用。使用它，您可以通过文件夹进行递归并执行您将使用的大部分内容`children`。

```
import httplib2
import pprint
import sys
from apiclient.discovery import build

# The API key of the project.
API_KEY = '<yourapikey>'

def createDriveService():
    """Builds and returns a Drive service object authorized with the
    application's service account.

    Returns:
        Drive service object.
    """

return build('drive', 'v2', developerKey=API_KEY)

service = createDriveService()
def recurse(parent):
    def recurseFolders():
        result = []
        page_token = None
        while True:
            param = { "q": "'" + parent + "' in parents and mimeType =  'application/vnd.google-apps.folder'" }
            if page_token:
                param['pageToken'] = page_token
            files = service.files().list(**param).execute()
            result.extend(files['items'])
            page_token = files.get('nextPageToken')
            if not page_token:
                break

        for folder in result:
            recurse(folder.get("id"))

    def printChildren():
        result = []
        page_token = None
        while True:
            param = { "q": "'" + parent + "' in parents and mimeType != 'application/vnd.google-apps.folder'" }
            if page_token:
                param['pageToken'] = page_token
            files = service.files().list(**param).execute()
            result.extend(files['items'])
            page_token = files.get('nextPageToken')
            if not page_token:
                break

        for afile in result:
            # Cannot use webViewLink, because it's only valid for static html content
            print afile.get('title') + u':' + u'"' + afile.get("webContentLink") + u',"'

    recurseFolders();
    printChildren();
recurse('<folder_id>') 
```

# php - 使用 PHP 初始化数据表

> ID：14281843
> 
> 赞同：0
> 
> 时间：2013-01-11T15:56:55.830
> 
> 标签：php, javascript, datatable

我正在使用 PHP 为一组数据表生成 HTML 和 JS，每个数据表都需要单独初始化，以便我可以分别过滤不同的表。据我所知，我的代码生成正确，但似乎我的 Javascript 没有正常运行，因为我没有得到任何表初始化，并且我得到一个“TypeError：'undefined' is not a function (evalating '$ ('#datatable_0').datatable')" 日志中的错误。

这是我的 PHP 代码的缩短版本（$schedule_options 只是一个时间数组，例如上午 9:00 - 10:30）：

```
<script src="./js/jquery.dataTables.min.js"></script>
<script src="./js/TableTools.min.js"></script>
<script src="./js/ZeroClipboard.js"></script>
<script type="text/javascript" src="./js/check_in.js.php"></script>
<?php
    $counter = 0;
    foreach($schedule_options as $option)
    {
        echo '<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered datatable" id="datatable_' . $counter . '">
            <thead>
                <tr>
                  <th>ID</th>
                  <th>Student Name</th>
                  <th>Nickname</th>
                  <th>User Name</th>
                  <th>Season / Year</th>
                  <th>Age</th>
                  <th>Level</th>
                  <th>Class Time</th>
                  <th>Instructor</th>
                  <th>Size</th>
                  <th>Comments</th>
                </tr>
              </thead>
        </table>';
        $counter++; 
    } 
```

这是 JS 文件 check_in.js.php：

```
<?php
    Header("content-type: application/x-javascript");       

echo '$(document).ready(function() {';
$counter = 0;
foreach($schedule_options as $option)
{
    echo 'var datatable_' . $counter . ' = $(\'#datatable_' . $counter . '\').datatable({
        "sDom": "<\'row-fluid\'<\'span6\'T><\'span6\'f>r>t<\'row-fluid\'<\'span6\'i><\'span6\'p>>",
        "sPaginationType": "bootstrap",
        "oLanguage": {
            "sLengthMenu": "_MENU_ records per page"
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "./datatables/students_table.php",
        "fnDrawCallback" : function() {
             $("[rel=popover]").popover();
        },
        "oTableTools": 
        {
            "sRowSelect": "single",
            "sSwfPath": "./includes/copy_csv_xls_pdf.swf",
            "aButtons": [
                "copy",
                "csv",
                "xls",
                {
                    "sExtends": "pdf",
                    "sTitle": "HSS Students",
                    "sFileName": "HSS Students.pdf",
                    "sPdfMessage": "Season: ",
                    "sPdfOrientation": "landscape"
                },
                "print"]
        }
    });
    ';
    $counter++;
} 
```

谢谢你的帮助。我相信我遇到的主要问题是由于 Javascript 的初始化顺序或其他原因。如果有帮助，我可以发布完整的生成代码（HTML 和 JS）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:17:45.987

尝试更改`.datatable(...)`为`.dataTable(...)`.

JS 区分大小写 :)

# java - @ModelAttribute 已同步？

> ID：14281845
> 
> 赞同：2
> 
> 时间：2013-01-11T15:56:59.880
> 
> 标签：java, spring, spring-3

我对 Spring 3 有疑问。任何人都可以告诉我，控制器中的方法如下：

```
@ModelAttribute("nameAtributte")
public Customer getCustomerInfo(HttpServletRequest request) {
     return service.getCustomer(request);
} 
```

是同步的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:14:09.383

当然这个方法是不同步的。但我似乎理解你是如何得出这个结论的。我使用了以下代码：

```
@Controller
@RequestMapping("/url")
public class ModelAtrCotroller {

    @ModelAttribute
    public String modelAtr() {
        return "foo";
    }

    @ResponseBody
    @RequestMapping(method = RequestMethod.GET)
    public String index() {
        return "index";
    }
} 
```

我在方法中放置了一个断点，`modelAtr`并从同一浏览器的两个不同选项卡向 url 发送了两个请求。而且似乎该方法是同步的，因为直到我在第一次服务期间释放断点才开始服务第二个请求。我假设浏览器使用单个“保持活动”连接，并且第二个请求根本没有从浏览器开始，直到没有收到对第一个请求的响应。

我为两个并发请求使用了两个不同的浏览器，并且两个应用程序服务器线程都在方法中间的同一个断点处暂停`modelAtr`。

# extjs - 如何知道浏览器窗口的客户端大小？

> ID：14281851
> 
> 赞同：3
> 
> 时间：2013-01-11T15:57:10.390
> 
> 标签：extjs

我想知道浏览器窗口的客户端大小。我使用简单的脚本：

```
wwidth  = window.innerWidth
wheight = window.innerHeight 
```

但它不适用于 IE8、IE9。如何在所有形式的浏览器中使用 extjs 知道这个参数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T16:05:09.397

如果你使用 Ext JS，你可以使用：

```
Ext.getBody().getViewSize() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:44:30.470

这是纯 javascript 中的示例跨浏览器函数：

```
var getSize = function () {
    var winW = 0, winH = 0;
    if (document.body && document.body.offsetWidth) {
        winW = document.body.offsetWidth;
        winH = document.body.offsetHeight;
    }
    if (document.compatMode=='CSS1Compat' && document.documentElement && document.documentElement.offsetWidth ) {
        winW = document.documentElement.offsetWidth;
        winH = document.documentElement.offsetHeight;
    }
    if (window.innerWidth && window.innerHeight) {
        winW = window.innerWidth;
        winH = window.innerHeight;
    }   
    return { width: winW, height: winH };
};

window.onload = function(){
    alert(getSize().width);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T13:10:59.440

```
function viewport(){
   var e = window , a = 'inner';
   if ( !( 'innerWidth' in window ) ) {
     a = 'client';
     e = document.documentElement || document.body;
   }
   return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
} 
```

# xcode - 静音每个 SystemSound 的按钮

> ID：14281852
> 
> 赞同：1
> 
> 时间：2013-01-11T15:57:14.860
> 
> 标签：xcode, cocoa-touch, avaudioplayer, mute, system-sounds

我用过`AVAudioPlayer`，但如果我使用这段代码，它就太迟钝了：

```
 NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"MySound" ofType:@"caf"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFile];
AudioServicesCreateSystemSoundID((CFURLRef)soundFileURL, &_MySound);
AudioServicesPlaySystemSound(_MySound); 
```

没有任何滞后。

**但是我有一个按钮，可以在我的应用程序**中静音/取消静音。我怎样才能使这些声音`mysound.volume = 0`静音`AVAudioplayer`

# php - 使用 curl 登录

> ID：14281853
> 
> 赞同：1
> 
> 时间：2013-01-11T15:57:23.490
> 
> 标签：php, curl

我想从谷歌图书（我经常购买）下载一本书以离线阅读（不幸的是，这个选项不适用于我的书）。我想为我创建一个脚本，将页面拉出然后将它们保存为 pdf... 我不认为有任何违法行为，因为我付费了.. 我尝试使用 curl，但您看到的页面未经过身份验证。我当时写道：

```
function leggiUrl($url,$data){
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_POST,true);
    curl_setopt($ch, CURLOPT_POSTFIELDS,$data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
    $content = curl_exec($ch);
    curl_close($ch);
    return $content;
}
$page=leggiUrl("https://www.google.com/accounts/ServiceLoginAuth", array("Email" => "mia_mail@gmail.com", "Passwd" => "miapassword"));
echo $page; 
```

不幸的是向我显示了谷歌的登录页面......因为它没有登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:09:59.260

如果您查看源代码，`https://www.google.com/accounts/ServiceLoginAuth`您会看到一堆隐藏字段。Google 需要这些字段才能允许登录。您需要查看使用 Oauth 2 登录 Google 的方法，直接 POST 不会这样做： [https ://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

# breeze - entityAspect.setDeleted 不会触发订阅的 propertyChanged 事件

> ID：14281856
> 
> 赞同：1
> 
> 时间：2013-01-11T15:57:38.013
> 
> 标签：breeze

我在订阅 propertyChanged 事件时遇到问题，订阅的事件确实会为实体修改触发，但在将实体设置为已删除时从未触发。我可能做错了什么。

我所做的目标是，每当用户修改行时，我想在行级别提供按钮以取消更改。同样，当用户删除一行时，我想提供一个按钮来取消删除一行。修改部分按预期工作，但对于删除它不起作用。

我期待 item.entityAspect.setDeleted() 会触发 propertyChanged 事件，以便我可以更新 observable IsDeleted 的值，这反过来会更新按钮的可见性。

**视图模型**

```
 /// <reference path="jquery-1.8.3.js" />
/// <reference path="../linq-vsdoc.js" />
/// <reference path="../linq.min.js" />
/// <reference path="../breeze.intellisense.js" />
/// <reference path="../breeze.debug.js" />

$(document).ready(function () {

    //extend country type
    var Country = function () {
        console.log("Country initialized");
        var self = this;
        self.Country_ID = ko.observable(0); // default FirstName
        self.Country_Code = ko.observable("");  // default LastName
        self.Country_Name = ko.observable("");
        self.entityState = ko.observable("");
        self.hasValidationErrors = ko.observable(false);
        self.IsDeleted = ko.observable(false);
        self.IsModified = ko.observable(false);
        self.templateName = ko.observable("AlwayEditable");

        var onChange = function () {
            var hasError = self.entityAspect.getValidationErrors().length > 0;
            if (hasError)
                self.hasValidationErrors(true);
            else
                self.hasValidationErrors(false);

        };

        //dummy property to wireup event
        //should not be used for any other purpose
        self.hasError = ko.computed(
                             {
                                 read: function () {
                                     self.entityAspect // ... and when errors collection changes
                                             .validationErrorsChanged.subscribe(onChange);
                                 },

                                 // required because entityAspect property will not be available till Query
                                 // return some data
                                 deferEvaluation: true

                             });

        //dummy property to wireupEvent and updated self.entityStateChanged property
        self.entityStateChanged = ko.computed({
            read: function () {
                self.entityAspect.propertyChanged.subscribe(function (changeArgs) {

                    if (changeArgs.entity.entityAspect.entityState.name == "Deleted") {
                        self.IsDeleted(false);
                    }
                    else if (changeArgs.entity.entityAspect.entityState.name == "Modified")
                        self.IsModified(true);

                }); //subscribe

            },
            deferEvaluation: true,
            // self.entityStateChanged(false)

        });

        self.fullName = ko.computed(
                         function () {
                             return self.Country_Code() + " --- " + self.Country_Name();
                         });
    };

    manager.metadataStore.registerEntityTypeCtor("Country", Country);

    var countryViewModel = function (manager) {
        var self = this;
        window.viewModel = self;

        self.list = ko.observableArray([]);
        self.pageSize = ko.observable(2);
        self.pageIndex = ko.observable(0);
        self.selectedItem = ko.observable();
        self.hasChanges = ko.observable(false);
        self.totalRows = ko.observable(0);
        self.totalServerRows = ko.observable(0);
        self.RowsModified = ko.observable(false);
        self.RowsAdded = ko.observable(false);
        self.RowsDeleted = ko.observable(false);

        self.templateToUse = function (dataItem, context) {
            var item = dataItem;
            if (!_itemTemplate) {
                _itemTemplate = ko.computed(function (item) {
                    //var x = this;
                    if (this.entityAspect == "undefined")
                        return this.templateName("AlwayEditable");
                    if (this.entityAspect.entityState.name == "Deleted") {
                        this.templateName("readOnlyTmpl");
                        return this.templateName();
                    }
                    else {
                        this.templateName("AlwayEditable");
                        return this.templateName();
                    }
                }, item);

            }
            if (item.entityAspect.entityState.name == "Deleted") {
                item.templateName("readOnlyTmpl");
                return item.templateName();
            }
            else {
                item.templateName("AlwayEditable");
                return item.templateName();
            }
            // return _itemTemplate();
        }

        var _itemTemplate;

        self.hasError = ko.computed(
                           {
                               read: function () {
                                   self.entityAspect // ... and when errors collection changes
                                           .validationErrorsChanged.subscribe(onChange);
                               },

                               // required because entityAspect property will not be available till Query
                               // return some data
                               deferEvaluation: true

                           });

        self.acceptChanges = function (item) {
            // self.selectedItem().entityAspect.acceptChanges();
            self.selectedItem(null);
        }

        manager.hasChanges.subscribe(function (newvalue) {
            self.hasChanges(newvalue.hasChanges);

        });

        self.edit = function (item, element) {
            highlightRow(element.currentTarget, item);
            self.selectedItem(item);
        };

        self.discardChanges = function () {
            manager.rejectChanges();
            manager.clear();
            self.pageIndex(0);
            self.loadData();
        };

        self.cancel = function (item, element) {
            item.entityAspect.rejectChanges();
            self.selectedItem(null);

        };

        self.add = function () {
            var countryType = manager.metadataStore.getEntityType("Country"); // [1]
            var newCountry = countryType.createEntity(); // [2]

            //if not using this line, the table is not updated to show this newly added item
            self.list.push(newCountry);

            manager.addEntity(newCountry); // [3]

            self.selectedItem(newCountry);

        };

        self.remove = function (item) {
            item.entityAspect.rejectChanges();
            item.entityAspect.setDeleted(); //was expecting that propertychaged subscribe event will fire, but it does not
            item.templateName("readOnlyTmpl"); //if i don't do this the template is not changed/updated
            item.IsDeleted(true); //have to use this

        };

        self.UndoDelete = function (item) {
            item.entityAspect.rejectChanges();
            item.templateName("AlwayEditable");
            item.IsDeleted(false);

        };

        self.save = function () {

            if (manager.hasChanges()) {
                alertTimerId = setTimeout(function () {
                    //this works as well
                    $.blockUI({ message: '<img src="Images/360.gif" /> </p><h1>Please Saving Changes</h1>', css: { width: '275px' } });
                }, 700);

                manager.saveChanges()
                    .then(saveSucceeded(alertTimerId))
                    .fail(saveFailed);
            } else {
                $.pnotify({
                    title: 'Save Changes',
                    text: "Nothing to save"
                });
                // alert("Nothing to save");
            };

        };

        manager.hasChanges.subscribe(function (newvalue) {
            self.hasChanges(newvalue.hasChanges);
        });

        manager.entityChanged.subscribe(function (changeArg) {

            self.RowsDeleted(manager.getEntities(null, [breeze.EntityState.Deleted]).length);
            self.RowsModified(manager.getEntities(null, [breeze.EntityState.Modified]).length);
            self.RowsAdded(manager.getEntities(null, [breeze.EntityState.Added]).length);

        });

        //we want maxPageIndex to be recalculated as soon as totalRows or pageSize changes
        self.maxPageIndex = ko.dependentObservable(function () {
            return Math.ceil(self.totalRows() / self.pageSize()) - 1;
            //return Math.ceil(self.list().length / self.pageSize()) - 1;
        });
        self.previousPage = function () {
            if (self.pageIndex() > 1) {
                self.pageIndex(self.pageIndex() - 1);
                //self.loadData();
                getData();
            }
        };
        self.nextPage = function () {
            if (self.pageIndex() < self.maxPageIndex()) {
                self.pageIndex(self.pageIndex() + 1);
                // self.loadData();
                getData();
            }

        };
        self.allPages = ko.dependentObservable(function () {
            var pages = [];
            for (i = 0; i <= self.maxPageIndex() ; i++) {
                pages.push({ pageNumber: (i + 1) });
            }
            return pages;
        });
        self.moveToPage = function (index) {
            self.pageIndex(index);
            //self.loadData();
            getData();
        };
    };

    // self.loadData
    var vm = new countryViewModel(manager);

    //ko.validation.group(vm);
    ko.applyBindings(vm);
    // ko.applyBindingsWithValidation(vm);
    vm.loadData();
    try {

    } catch (e) {

        displayModalMessage("Page Error :- Reload the Page", e.message);

    }
}); //end document.ready 
```

**看法**

```
<p><a class="btn btn-primary" data-bind="click: $root.add" href="#" title="Add New Country"><i class="icon-plus"></i> Add Country</a></p>

    <span> Search Country Code :</span><input id="txtSearch" type="text" /><input id="BtnSearch" type="button" value="Search" data-bind="click: $root.loadData" />
<!--<table class="table table-striped table-bordered " style="width: 700px">-->

<!--<table id="myTable" class="ui-widget" style="width: 800px">-->
    <table id="myTable" class="table table-striped table-bordered " style="width: 1200px">
    <caption> <div>
        <span class="label label-info">Number of Rows Added </span>   <span class="badge badge-info" data-bind="text: RowsAdded"></span> ,  
        <span class="label label-success">Number of Rows Modified</span>  <span  class="badge badge-success" data-bind="text: RowsModified"></span>  ,  
        <span class="label label-important">Number of Rows Deleted</span> <span class="badge badge-important" data-bind="text: RowsDeleted"></span> 
        <p/>
    </div></caption>
    <thead class="ui-widget-header">
        <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Full Name</th>
            <th />
        </tr>
    </thead>
   <!--<tbody data-bind=" title:ko.computed(function() { debugger; }), template:{name:templateToUse, foreach: list, afterRender: HighlightRows }" class="ui-widget-content"></tbody>-->
       <tbody data-bind=" title:ko.computed(function() { debugger; }), template:{name:templateToUse, foreach: list}" ></tbody>
</table>

<div class="pagination">
    <ul><li data-bind="css: { disabled: pageIndex() === 0 }"><a href="#" data-bind="click: previousPage">Previous</a></li></ul>
    <ul data-bind="foreach: allPages">
        <li data-bind="css: { active: $data.pageNumber === ($root.pageIndex() + 1) }"><a href="#" data-bind="text: $data.pageNumber, click: function() { $root.moveToPage($data.pageNumber-1); }"></a></li>
    </ul>
    <ul><li data-bind="css: { disabled: pageIndex() === maxPageIndex() }"><a href="#" data-bind="click: nextPage">Next</a></li></ul>
</div>

    <!--<input id="Button1" type="button" value="Save"  data-bind="attr: { disabled: !hasChanges()}, click:saveChanges" />-->
    <a class="btn btn-success btn-primary" data-bind="click: $root.save, css: { disabled: !$root.hasChanges()}" href="#" title="Save Changes"> Save Changes</a>
   <!-- <input id="Button3" type="button" value="Create New"  data-bind="click:AddNewCountry" /> 
    <input id="Button4" type="button" value="Discard and reload data"  data-bind="click:discardreload, attr: { disabled: !hasChanges()}" /> -->
    <a class="btn btn-danger btn-primary" data-bind="click: $root.discardChanges, css: { disabled: !$root.hasChanges()}" href="#" title="Discard Changes"><i class="icon-refresh"></i> Discard & Reload</a>

    <script id="readOnlyTmpl" type="text/html">
   <tr >

       <td>
            <span class="label "  data-bind="text: Country_Code "></span>

                <div data-bind="if: hasValidationErrors">
                    <span class="label label-important" data-bind="text: $data.entityAspect.getValidationErrors('Country_Code')[0].errorMessage ">Important</span>
              </div>

       </td>
       <td>
            <span class="label "  data-bind="text: Country_Name "></span>

           <p data-bind="validationMessage: Country_Name"></p>
                <span data-bind='visible: ko.computed(function() { debugger; }), text: Country_Name.validationMessage'> </span>
       </td>
             <td> <span class="label "  data-bind="text: fullName "></span>

             </td>
        <td >

            <a class="btn btn-danger" data-bind="click: $root.cancel,  visible: $data.IsModified" href="#" title="cancel/undo changes">Undo Changes<i class="icon-trash"></i></a>

            <a class="btn btn-danger" data-bind="click: $root.remove, visible: !$data.IsDeleted() " href="#" title="Delete this Row">Delete<i class="icon-remove"></i></a>

             <a class="btn btn-danger" data-bind="click: $root.UndoDelete, visible: $data.IsDeleted() " href="#" title="Undo Delete">Un Delete<i class="icon-remove"></i></a>

     </td>
    </tr>
</script>

    <script id="AlwayEditable" type="text/html">
         <tr >
       <td><input type="text" placeholder="Country Code" data-bind="value: Country_Code , uniqueName: true, css: { error: hasValidationErrors }, valueUpdate: 'afterkeydown'"/>

          <!--  <div data-bind="if: $data.entityAspect.getValidationErrors().length>0">
             <pre data-bind="text:  $data.entityAspect.getValidationErrors('Country_Code')[0].errorMessage "></pre>

        </div>-->

                <div data-bind="if: hasValidationErrors">
                    <span class="label label-important" data-bind="text: $data.entityAspect.getValidationErrors('Country_Code')[0].errorMessage ">Important</span>

      </div>

       </td>
       <td><input type="text" placeholder="Country Name" data-bind="value: Country_Name, uniqueName: true, valueUpdate: 'afterkeydown'"/>
           <p data-bind="validationMessage: Country_Name"></p>
                <span data-bind='visible: ko.computed(function() { debugger; }), text: Country_Name.validationMessage'> </span>
       </td>
             <td>
                 <span data-bind=' text: fullName'> </span>
             </td>
        <td >

            <a class="btn btn-danger" data-bind="click: $root.cancel,  visible: $data.IsModified" href="#" title="cancel/undo changes">Undo Changes<i class="icon-trash"></i></a>

            <a class="btn btn-danger" data-bind="click: $root.remove, visible: !$data.IsDeleted() " href="#" title="Delete this Row">Delete<i class="icon-remove"></i></a>

             <a class="btn btn-danger" data-bind="click: $root.UndoDelete, visible: $data.IsDeleted() " href="#" title="Undo Delete">Un Delete<i class="icon-remove"></i></a>

        </td>
   </tr>
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:48:59.643

# 分析

`propertyChanged`当 ... 属性更改时引发该事件。但这不是你想看的。你想监控`entityAspect.entityState`

当您将属性设置为新值（例如`person.FirstName("Naunihal")`）时，您会**同时**获得 propertyChanged 事件和实体的`EntityState`.

当您删除实体时，实体的`EntityState`更改 ... 为“已删除”。但是删除不会改变实体的属性。Breeze 不认为`EntityState`自身是实体的属性。因此，没有`propertyChanged`通知。

# 解决方案

**2013 年 1 月 12 日更新** 我认为如果我重新表述您提出的问题以便人们了解您想听取`EntityState`.

So I moved my answer to a new SO question: ["*How can I detect a change to an entity's EntityState?*"](https://stackoverflow.com/questions/14297908/how-can-i-detect-a-change-to-an-entitys-entitystate). Hope you don't mind following that link.

# javascript - 如何在服务器上获取客户端系统的“区域和语言”设置？

> ID：14281860
> 
> 赞同：0
> 
> 时间：2013-01-11T15:57:49.213
> 
> 标签：javascript, http, date, format, globalization

有没有办法在 JavaScript 中获取格式设置（来自 Windows 中“区域和语言”弹出窗口的“格式”选项卡中的国家/地区），以便我可以将其传递给 cookie 中的服务器？（大目标 - 在 MVC 4 服务器端以正确格式显示日期）

在 IE9 中，我可以使用**navigator.UserLanguage （在****Accept-Language** http 标头中也传递了正确的语言）。

但是在 Chrome 和 FF 中**navigator.UserLanguage**是未定义的，**navigator.language**和**Accept-Language**返回浏览器的界面语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:22:48.663

JS 或其他任何东西都无法访问此设置，但是可以在服务器上访问 HTTP_ACCEPT_LANGUAGE 语言属性。例如，使用 PHP，您可以执行以下操作：

```
 echo $_SERVER['HTTP_ACCEPT_LANGUAGE']; 
```

这将回显类似`en-US`. 在大多数情况下，这可能是用户喜欢的语言，那么为什么不使用它呢？

# php - 使用自定义日历颜色嵌入 Google 日历

> ID：14281861
> 
> 赞同：6
> 
> 时间：2013-01-11T15:57:59.130
> 
> 标签：php, iframe, google-calendar-api

我在我的网站中嵌入了一个显示多个日历的谷歌日历，但我希望日历以默认选项以外的颜色显示。

请求 URL 包含每个日历的颜色参数，但似乎不接受非默认颜色。（渲染的颜色似乎也和这些不一样）

看源头；每个事件的颜色由内联 CSS 定义，并且似乎没有可用于通过 CSS 文件设置样式的类或 ID 属性。

我尝试使用 PHP 来获取日历的 html，然后使用字符串替换来更改颜色（基于[此答案](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe/12521755#12521755)），它可以工作，但它不会更改颜色我正在使用的 PHP 文件：

```
<?php

$content = file_get_contents('https://www.google.com/calendar/embed?showTitle=0&showPrint=0&showTabs=0&showTz=0&height=750&wkst=2&bgcolor=%23FFFFFF&src=1.keswickscouts.org_5d750s21fh55t45nsh4i49co5g%40group.calendar.google.com&color=%23691426&src=1.keswickscouts.org_k8ai784s6meu1eh71fk21etseg%40group.calendar.google.com&color=%23182C57&src=1.keswickscouts.org_4omjhqh48ud1lkigino18dmid0%40group.calendar.google.com&color=%232F6309&src=06illa48gj7en6896jv32cm93c%40group.calendar.google.com&color=%23125A12&src=1.keswickscouts.org_m6mb8idejtptmfkve9gm6latd8%40group.calendar.google.com&color=%236B3304&src=1.keswickscouts.org_5uaafulf65hrc4b64j3bfa6660%40group.calendar.google.com&color=%235229A3&src=1.keswickscouts.org_qudhcb0ii68u6b5mgs2ase200o%40group.calendar.google.com&color=%23B1365F&ctz=Europe%2FLondon');

$content = str_replace('</title>','</title><base href="https://www.google.com/calendar/" />',$content);

$content = str_replace('B5515D','CC9966', $content); //ASU
$content = str_replace('536CA6','099FF', $content); //Beavers
$content = str_replace('7EC225','33CC00', $content); //Cubs
$content = str_replace('125A12','006990', $content); //Eden
$content = str_replace('194D14','999966', $content); //Explorers
$content = str_replace('8C66D9','4D2177', $content); //Group
$content = str_replace('E67399','006666', $content); //Scouts

echo $content;

?> 
```

有什么建议吗？更简单会更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:22:35.393

这很棘手，因为您链接到的 Google 日历会使用 javascript 动态加载其元素，因此您发布的潜在解决方案不会改变任何内容。

仅 HTML 版本的日历没有您正在寻找的各种颜色，因此它也不起作用。

由于当用户调整大小或在几个月之间移动时，javascript 会重建日历的主体，因此会出现进一步的复杂情况。因此，即使您获得了适合页面加载的颜色，它也可能不会保持您想要的方式。

一种解决方案是继续将日历导入本地页面以避免跨站点限制，然后在页面加载时正确处理并通过不断检查更改来保持这种状态。我不确定是否有更有效的方法：

**本地日历页面：cal.php**

```
<?php
  $content=file_get_contents("https://www.google.com/calendar/embed?showTitle=0&showPrint=0&showTabs=0&showTz=0&height=750&wkst=2&bgcolor=%23FFFFFF&src=1.keswickscouts.org_5d750s21fh55t45nsh4i49co5g%40group.calendar.google.com&color=%23691426&src=1.keswickscouts.org_k8ai784s6meu1eh71fk21etseg%40group.calendar.google.com&color=%23182C57&src=1.keswickscouts.org_4omjhqh48ud1lkigino18dmid0%40group.calendar.google.com&color=%232F6309&src=06illa48gj7en6896jv32cm93c%40group.calendar.google.com&color=%23125A12&src=1.keswickscouts.org_m6mb8idejtptmfkve9gm6latd8%40group.calendar.google.com&color=%236B3304&src=1.keswickscouts.org_5uaafulf65hrc4b64j3bfa6660%40group.calendar.google.com&color=%235229A3&src=1.keswickscouts.org_qudhcb0ii68u6b5mgs2ase200o%40group.calendar.google.com&color=%23B1365F&ctz=Europe%2FLondon");
  $content = str_replace('</title>','</title><base href="https://www.google.com/calendar/" />',$content);
  print $content;
?> 
```

**日历显示页面**

```
<html>
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script language='javascript'>
    var oldhtml;

    function swapcolors(oldcolor, newcolor){
      console.log("Searching for " + oldcolor);
      $('iframe#gcal').contents().find('.rb-n').filter(
        function() {
          console.log(this);
          console.log($(this).css('background-color'));
          console.log($(this).css('background-color')==oldcolor);
          return $(this).css('background-color')==oldcolor;
        }
      ).css({'background-color': newcolor});
    }

    function recolor(){
      swapcolors('rgb(83, 108, 166)', '#099FF'); //Beavers
      swapcolors('rgb(126, 194, 37)', '#000000'); //Cubs 33CC00
      swapcolors('rgb(181, 81, 93)', '#CC9966'); //ASU
      swapcolors('rgb(18, 90, 18)', '#006990'); //Eden
      swapcolors('rgb(25, 77, 20)', '#999966'); //Explorers
      swapcolors('rgb(140, 102, 217)', '#4D2177'); //Group
      swapcolors('rgb(230, 115, 153)', '#006666'); //Scouts
    }

    function keepcolored(){
      if( $('iframe#gcal').contents()!=oldhtml){
        recolor();
        oldhtml=$('iframe#gcal').contents();
      }
    }

    $(document).ready(
      function() {
        $('iframe#gcal').load(recolor);
        oldhtml=$('iframe#gcal').contents();
        window.setInterval(keepcolored, 700);
      }
    );
  </script>
</head>
<body>

  <iframe id="gcal" style="width:100%;height:100%" src="cal.php">
  </iframe>
</body>
</html> 
```

请注意，`find('.rb-n')`可能需要调整，并且背景颜色`rgb(230, 115, 153)`在返回之前会转换为 RGB 值 (ala)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:00:48.243

我可以建议你使用两个数组，只有一个 str_replace ：

```
$search = array('B5515D', '536CA6', '7EC225');
$replace = array('CC9966', '099FF', '33CC00');

$content = str_replace($search, $replace, $content); 
```

一个更复杂的建议是使用[google calendar API](https://developers.google.com/google-apps/calendar/get_started?hl=fr)。

# ios - ios - 如何创建清单用户体验？

> ID：14281863
> 
> 赞同：0
> 
> 时间：2013-01-11T15:58:03.213
> 
> 标签：ios, xcode

我希望创建一个基本清单的用户体验。但我在 xCode 控件中并没有真正看到这一点。有人可以告诉我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:18:30.483

我建议您自定义 UITableView 并禁用选择 (table_view.allowsSelection = NO)

在您的自定义表格中，您将有自定义行，其中包含一个用作清单的按钮（自定义 UIButton）。您可以通过该 UIButton 的单击事件来实现选中复选框的 UI 反馈（单击时它会切换到选中/关闭状态），并且在您的代码中，您将跟踪哪些行被选中。

希望清楚，请随时询问

# php - PHP PDO 在 MySQL BETWEEN 和 INET_ATON() 中的使用

> ID：14281867
> 
> 赞同：0
> 
> 时间：2013-01-11T15:58:20.933
> 
> 标签：php, mysql, pdo

不久前我开始了一个 PHP 端项目，最近开始清理所有代码并更新它。部分原因是开始使用 PDO 进行 DB 查询。在一个特定的查询中，我有一个`WHERE`使用该`BETWEEN`子句和`INET_ATON()`函数的子句语句。到目前为止，我还不能让它正常工作，如果有人能指出它是否能正常工作，我将不胜感激。

我发现[这个](https://stackoverflow.com/questions/12514357/pdo-and-mysql-between)问题让我相信该`BETWEEN`语句没有任何问题，但我担心这可能是与导致问题的函数的组合。

这是我查询的那部分的样子：

```
SELECT foo, bar FROM table JOIN more_table 
WHERE item1 = :value AND ip_address BETWEEN INET_ATON(:ipstart) AND INET_ATON(:ipend) 
```

实际的查询比这要大得多，但对于基础来说，这是可行的。为了用实际值替换标记，我设置了以下 foreach 循环（`var_dump`就在那里，所以我可以验证正确的值正在传入，它们是）：

```
foreach($p as $k=>$v) {
    echo var_dump($k, $v);
    if(is_int($v)){
        $querySubmit->bindValue($k, $v, PDO::PARAM_INT);
    } else {
        $querySubmit->bindValue($k, $v, PDO::PARAM_STR);
    }
} 
```

如果有人知道设置为使用 and 的查询是否有任何限制`PDO::Prepare`，我将不胜感激！`PDO::bindValue``BETWEEN``INET_ATON()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:31:57.600

问题最终出现在一段单独的代码中。传递给 SQL 查询的值是正确的，并且`bindValue`操作成功。

对于将来审查此问题的任何人，如果他们认为自己遇到类似问题，如果设置正确，`INET_ATON/NTOA()`使用`BETWEEN`.

我相信@MarcB 留下的第一条评论实际上可能是对此的最佳答案，“PDO 对 MySQL 函数一无所知。只要 MySQL 解析器不拒绝查询字符串，PDO 就会很乐意加入任何内容你想要的，你想要的任何地方。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:14:02.870

你的参数 应该`bindValue()`是`$k``:value`

```
foreach($p as $k=>$v) {
    echo var_dump($k, $v);
    if(is_int($v)){
        $querySubmit->bindValue(:value, $v, PDO::PARAM_INT);
    } else {
        $querySubmit->bindValue(:value, $v, PDO::PARAM_STR);
    }
} 
```

`:ipstart`你也有约束力`:ipend`吗？

# opencv - opencv中的网络摄像头使用

> ID：14281870
> 
> 赞同：1
> 
> 时间：2013-01-11T15:58:32.063
> 
> 标签：opencv, webcam

我是opencv的新手。我想从网络摄像头（intex it-105wc）捕获图像。我在 Windows XP 上使用 Microsoft Visual C++ 2008 Express Edition。构建解决方案没有问题，但是当我尝试调试它给出的代码时（这发生在执行 cvCaptureFromCAM(CV_CAP_ANY);）

已加载`C:\Program Files\Common Files\Ahead\DSFilter\NeVideo.ax`，二进制文件未使用调试信息构建。

然后退出代码。

那么，我的代码有问题还是与网络摄像头的兼容性问题？

```
#include "stdafx.h"
#include<stdio.h>
#include <cv.h>
#include <highgui.h>

void main(int argc,char *argv[])
{
    int c;
    IplImage* color_img;
    CvCapture* cv_cap = cvCaptureFromCAM(CV_CAP_ANY);

    if(!cv_cap)
        {
            printf( "ERROR: Capture is null!\n");
        }

    cvNamedWindow("Video",0); // create window

    for(;;) 
            {
        color_img = cvQueryFrame(cv_cap); // get frame

        if(color_img != 0)
            cvShowImage("Video", color_img); // show frame

        c = cvWaitKey(10); // wait 10 ms or for key stroke

        if(c == 27)
            break; // if ESC, break and quit
    }

    /* clean up */
    cvReleaseCapture( &cv_cap );
    cvDestroyWindow("Video");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:08:15.557

此错误消息似乎与 nero 刻录工具中的视频编解码器有关。如果您不需要此编解码器，您可以取消注册并查看是否可以解决您的问题。

为此，请在命令行上执行以下命令：

```
regsvr32 /u "C:\Program Files\Common Files\Ahead\DSFilter\NeVideo.ax" 
```

您应该看到以下消息：

```
DllUnregisterServer in C:\Program Files\Common Files\Ahead\DSFilter\NeVideo.ax succeeded. 
```

要撤消此操作，请执行

```
regsvr32 "C:\Program Files\Common Files\Ahead\DSFilter\NeVideo.ax" 
```

# python - 给定一个代表值频率的熊猫系列，我如何将这些频率转换为百分比？

> ID：14281871
> 
> 赞同：90
> 
> 时间：2013-01-11T15:58:31.147
> 
> 标签：python, pandas

我正在尝试使用 kaggle.com 的泰坦尼克号数据集（泰坦尼克号上每个人的数据）并得出这样的性别细分：

```
df = pd.DataFrame({'sex': ['male'] * 577 + ['female'] * 314})
gender = df.sex.value_counts()
gender

male   577
female 314 
```

我想知道泰坦尼克号上每种性别的百分比。

我的方法不太理想：

```
from __future__ import division
pcts = gender / gender.sum()
pcts

male      0.647587
female    0.352413 
```

有没有更好（更惯用）的方式？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2014-06-11T16:20:07.420

这个函数是在 pandas 中实现的，实际上甚至是在 value_counts() 中。无需计算:)

只需输入：

```
df.sex.value_counts(normalize=True) 
```

这正好给出了所需的输出。

请注意 value_counts() 不包括 NA 值，因此数字加起来可能不等于 1。请参见此处： http: [//pandas-docs.github.io/pandas-docs-travis/generated/pandas.Series.value_counts.html](http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.Series.value_counts.html) ( DataFrame 的一列是一个系列）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-12-08T03:53:20.007

如果要将计数与百分比合并，可以使用：

```
c = df.sex.value_counts(dropna=False)
p = df.sex.value_counts(dropna=False, normalize=True)
pd.concat([c,p], axis=1, keys=['counts', '%']) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-10-17T14:28:25.753

如果您希望显示您可能做的事情之一的百分比，请`value_counts(normalize=True)`按照[@fanfabbb 的回答](https://stackoverflow.com/a/24167876/15497888)使用。

话虽如此，出于多种目的，您可能希望以百分之一的形式显示它。

可以这样实现：

```
gender = df.sex.value_counts(normalize=True).mul(100).round(1).astype(str) + '%' 
```

在这种情况下，我们将结果[乘以](https://pandas.pydata.org/docs/reference/api/pandas.Series.mul.html)百，[四舍五入](https://pandas.pydata.org/docs/reference/api/pandas.Series.round.html)到小数点后加上百分号。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-01-12T05:52:47.133

我想我可能会一口气做到这一点（不导入部门）：

```
1\. * df.sex.value_counts() / len(df.sex) 
```

或者，记住你想要一个百分比：

```
100\. * df.sex.value_counts() / len(df.sex) 
```

*真的很多，你的方式看起来也很好。*

# c++ - Qt 部署 - QGraphicsView 不显示在其他机器上

> ID：14281872
> 
> 赞同：1
> 
> 时间：2013-01-11T15:58:31.600
> 
> 标签：c++, qt, visual-studio-2008, dll, qgraphicsview

所以我一直在使用 Qt 4.8.4（必需）为我的公司制作一个程序。将项目部署到另一台机器时，程序运行良好（我包括 Qtgui4.dll 和 Qtcore4.dll）。但是，当尝试使用 QGraphicsView 查看打印预览图像时，没有其他机器会显示它。我什至尝试在另一台机器上安装 Qt 4.8.4 并在那里构建它无济于事。我使用 MSVC 编译并在新机器上安装了 Visual Studio。在将 .exe 部署到其他机器时，我还包括 imageformats 文件夹。

我在这里不知所措。我已经研究了几天。我不明白为什么它在我的机器上运行得很好，但即使我复制开发环境也不会在其他机器上运行。

我附上了一张它实际工作的图片![图片](../Images/8c6209d283057913cca042325f3930b2.png)。

在所有其他机器上，预览图像显示空白/白色。但是，我注意到图像已构建并且将打印。它只是不会预览。

我知道我没有包含任何代码，但我无法像我的公司那样包含太多代码。但我已经包含了与 QGraphicsView 相关的内容。

```
// Create a handle for the graphics view; fix bug where preview would disappear
// on first view; winId() creates the winId; Needed to initialize first
ui->graphicsView->winId();
/************************************/
if (preview)
    preview(ui->graphicsView->winId(), &err); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:36:51.287

我没有找到解决方案。我在规定操作系统不能是 XP 的情况下完成了应用程序。

# qt - Qt 在 X11 上错误地恢复几何

> ID：14281879
> 
> 赞同：2
> 
> 时间：2013-01-11T15:58:52.087
> 
> 标签：qt, x11, ubuntu-unity

我在 Xorg 1.13.1 上使用 Qt 4.8.4。我以文档中建议的相同方式保存窗口几何图形：

```
QSettings settings;
QByteArray geom = widget->saveGeometry();
settings.setValue("widget_geometry", geom); 
```

同样在启动时恢复：

```
QSettings settings;
QByteArray geom = settings.value(buf).toByteArray();
widget->restoreGeometry(geom); 
```

我面临的问题是窗口未放置在与保存相同的位置。尺寸很好。根据我使用的窗口管理器，结果会有所不同。

*   在 i3 中，窗口在两个轴上都相差一个像素，大概是为了弥补窗口边框。

*   在 Unity 中（mutter？），无论我将窗口放在哪里，每次恢复时它都会被轻推超过 10 个像素。它似乎也有一个 y 限制，但我可以忍受它，因为它是一致的。

*   在fluxbox中，窗口恢复到它保存的大小和位置。

我做了一些挖掘并解构了保存到设置文件中的字节数组。我尝试手动调整窗口的位置，而不是使用 restoreGeometry()，但应用程序确实无法知道它正在处理哪种 WM 不一致。在某些 WM 中，使用框架几何而不是普通几何来设置位置是可行的，但会搞砸其他的。我从 Qt 几何文档中读到，您不能真正指望 X11 窗口管理器的任何一致性，所以我没有想法。我只是希望那里的一些聪明人已经解决了这个问题！

# java - Java - Linux 中可视化程序的错误

> ID：14281881
> 
> 赞同：0
> 
> 时间：2013-01-11T15:58:54.453
> 
> 标签：java, linux, eclipse, ubuntu

> **可能重复：**
> [Java Stacktrace 错误 Unsupported major.minor 版本 51.0](https://stackoverflow.com/questions/11059167/java-stacktrace-error-unsupported-major-minor-version-51-0)

我正在使用 Eclipse，每次尝试在 Linux 中运行使用视觉效果的程序时，都会出现以下错误，并且在小程序中不显示任何内容。在 Windows 中，一切运行良好。我尝试重新安装 JDK 和 JRE，但无济于事。此外，我尝试了以下链接中的建议：

*   [http://ubuntuforums.org/showthread.php?t=83466](http://ubuntuforums.org/showthread.php?t=83466)
*   [无法使用 ubuntu 运行 java gui 程序](https://stackoverflow.com/questions/5362512/unable-to-run-java-gui-programs-with-ubuntu)

我正在运行基于 Ubuntu 的 Bodhi Linux。

我收到以下错误：

```
java.lang.UnsupportedClassVersionError: GraphicsSkeletton : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:314)
    at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:146)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:608)
    at sun.applet.AppletPanel.createApplet(AppletPanel.java:798)
    at sun.applet.AppletPanel.runLoader(AppletPanel.java:727)
    at sun.applet.AppletPanel.run(AppletPanel.java:380)
    at java.lang.Thread.run(Thread.java:679) 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:01:28.667

这意味着您已经在更高版本的 JDK 中编译并在不同（不兼容、更低）版本的 JRE 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:03:17.313

作为示例，您已经在 java 1.5 中编译了源代码，并且您正尝试在 java 1.6 中运行它们

检查你的java版本

```
java -version 
```

会给你你正在使用的java版本

# jsp - 如何在jsp中链接到动态生成的页面

> ID：14281883
> 
> 赞同：2
> 
> 时间：2013-01-11T15:59:05.363
> 
> 标签：jsp

我是服务器端编程的新手。我有一个关于在线图书销售管理系统的最后一年项目。我想知道如何为每个点击购买的图书图片生成一个动态页面。我的意思是说，如果用户请求任何书 X，如何生成一个显示其所有详细信息、图像等信息的页面。我应该使用什么样的网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:19:40.577

只需将书籍的唯一标识符作为请求参数或请求路径信息传递，并有一个[servlet](https://stackoverflow.com/tags/servlets/info)来根据标识符在方法中执行数据查找`doGet()`，将其存储在请求范围内并转发到生成所有必要 HTML 的 JSP 文件.

例如作为`/book?id=123`这个 servlet的请求参数

```
@WebServlet("/book")
public class BookServlet extends HttpServlet {

    @EJB
    private BookService service;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Book book = service.find(request.getParameter("id"));
        request.setAttribute("book", book);
        request.getRequestDispatcher("/WEB-INF/book.jsp").forward(request, response);
    }

} 
```

或者作为`/book/123`这个 servlet的请求路径信息

```
@WebServlet("/book/*")
public class BookServlet extends HttpServlet {

    @EJB
    private BookService service;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Book book = service.find(request.getPathInfo().substring(1));
        request.setAttribute("book", book);
        request.getRequestDispatcher("/WEB-INF/book.jsp").forward(request, response);
    }

} 
```

无论哪种方式，它`/WEB-INF/book.jsp`都可能看起来像通常的方式。

```
<p>Title: <c:out value="${book.title}" /></p>
<p>Author: <c:out value="${book.author}" /></p>
<p>Summary: <c:out value="${book.summary}" /></p> 
```

为了生成这些指向 servlet 的链接，只需按如下方式循环 a `List<Book>`in `/WEB-INF/books.jsp`，假设您想要以下 URL `/book/123`：

```
<ul>
    <c:forEach items="${books}" var="book">
        <li>
            <a href="${pageContext.request.contextPath}/book/${book.id}">
                View book with title: <c:out value="${book.title}" />
            </a>
        </li>
    </c:forEach>
</ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T16:47:17.900

我假设这是一个小规模的项目。
首先为您的书籍维护一个数据库......给每个人一个唯一的ID。如果您要显示所有常见的详细信息，例如...出版日期、价格、书名、作者、评论、评级...那么您不必担心...创建一个通用 JSP 页面来显示基于一个独特的ID...

**jsp 说：books.jsp**

```
<form name="books" action="getInfo.jsp">
    <a href="YourJSP/?bookid=pass_an_id_for_your_bookX">Book X(Image)</a> //Book X
    <a href="YourJSP/?bookid=pass_an_id_for_your_bookY">Book Y(Image)</a> //Book Y 
    <a href="YourJSP/?bookid=pass_an_id_for_your_bookZ">Book Z(Image)</a> //Book Z
....
.... an on..
</form> 
```

?bookid 将是你的 paramid。
pass_an_id_for_your_bookX 将是您存储在数据库中的 bookX 的唯一 ID。

**在你的第二个 JSP 里面说：getInfo.jsp**

设计您的 JSP 以进行演示，以将有关 BookX / BookY 的信息显示到 bookId 在您的 JSP 中获取 bookId 的值并查询数据库...

```
 String bookId = request.getParameter("bookid"):
        //This will get the value of your bookId for BookX

        //Connect to your DB
        //Use PreparedStatement or StoredProcedure to make a query pass your bookId in where condition. 
```

休息很简单，通过查询数据库，您将获得所有常用值，即。发表于、价格、书名、作者、评论、评级......并在您的 JSP 页面中相应地显示它们......

```
 <%
      Connection con = null;
      PreparedStatement pst = null;
      ResultSet rs = null;

      String BookName=null;
      String AuthorName=null;
      String Price=null;
      String Rating=null;
      try {

      Class.forName(driver);
      con = DriverManager.getConnection(connection);

      String sql =
      "select * from BOOKS_TABLE where bookId =?";
      pst = con.prepareStatement(sql);
      pst.setString(1, bookId);

      rs = pst.executeQuery();

      while (rs.next()) {
      BookName = rs.getString(1);
      AuthorName = rs.getString(2);
      Price = rs.getString(3);
      Rating = rs.getString(4);

      }
      // 1 , 2, 3... denotes column numbers
      } catch (SQLException e) {
      System.out.println(e.getMessage());
      }
      }
    } 
    %> 
```

现在你得到了所有的值..好吧，相应地显示它们..

```
 <%=BookName%>
       <%=AuthorName%>
       <%=Price%>
       <%=Rating%> 
```

**注意：**不鼓励在 JSP 页面中使用 Scriplets（Java 代码）。您可能需要检查 Beans 或 JSTL。我只是给你一个想法！

一切顺利

# android - 在 IPC 调用期间发生死锁的可能性

> ID：14281885
> 
> 赞同：1
> 
> 时间：2013-01-11T15:59:14.843
> 
> 标签：android

我有一个`MainActivity`它将向远程`AutoCompleteService`服务发出 IPC 调用。

在执行`AutoCompleteService`的 IPC 功能期间，服务将向 发出另一个 IPC 回调`MainActivity`。

## MainActivity.java

```
// Receive IPC call from AutoCompleteService.
private StockInfoObserver.Stub stockInfoObserver = new StockInfoObserver.Stub() {

    @Override
    public void update(StockInfo stockInfo) throws RemoteException {
        // TODO Auto-generated method stub
        Log.i(TAG, android.os.Process.myPid() + " : MainActivity receive ipc call : " + Thread.currentThread().getId());
    }

};

...
...
...

// Issue IPC call to AutoCompleteService.
button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // Test on API.
        try {
            Log.i(TAG, android.os.Process.myPid() + " : MainActivity start issue IPC call to remote service : " + Thread.currentThread().getId());
            // autoCompleteApi.handle will issue IPC call to remote service.
            autoCompleteApi.handle("abc");
            Log.i(TAG, android.os.Process.myPid() + " : MainActivity end issue IPC call to remote service : " + Thread.currentThread().getId());
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

}); 
```

## 自动完成服务.java

```
private AutoCompleteApi.Stub autoCompleteApi = new AutoCompleteApi.Stub() {    
    private List<StockInfoObserver> stockInfoObservers = new ArrayList<StockInfoObserver>();

    @Override
    public void handle(String string) {
        Log.i(TAG, android.os.Process.myPid() + " : AutoCompleteService start receive ipc call : " + Thread.currentThread().getId());
        try {
            for (StockInfoObserver stockInfoObserver : stockInfoObservers) {    
                Log.i(TAG, android.os.Process.myPid() + " : AutoCompleteService start IPC call to MainActivity : " + Thread.currentThread().getId());
                // stockInfoObserver.update will issue IPC call back to MainActivity
                stockInfoObserver.update(null);
                Log.i(TAG, android.os.Process.myPid() + " : AutoCompleteService end IPC call to MainActivity : " + Thread.currentThread().getId());
            }
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.i(TAG, android.os.Process.myPid() + " : AutoCompleteService end receive ipc call : " + Thread.currentThread().getId());
    }

    @Override
    public void attachStockInfoObserver(StockInfoObserver stockInfoObserver)
            throws RemoteException {
        if (stockInfoObservers.contains(stockInfoObserver) == false) {
            stockInfoObservers.add(stockInfoObserver);
        }
    }
}; 
```

我最初的预期是，**会发生死锁**。这是由于我的观察。发出 IPC 调用时，发出者只会在 IPC 接收者完成其 IPC 函数执行后从 IPC 调用返回。

1.  `MainActivity``AutoCompleteService`通过发出 IPC 调用`autoCompleteApi.handle`。
2.  `MainActivity`现在将等到`AutoCompleteService`完成执行。
3.  `AutoCompleteService``MainActivity`通过发出 IPC 调用`stockInfoObserver.update`。
4.  `AutoCompleteService`现在将等到`MainActivity`完成执行。
5.  但是，`MainActivity`的线程仍在等待，没有线程将执行`update`功能。
6.  两个进程一直在等待对方。

但是，上述情况不会发生。这是我得到的日志。一切都完美无瑕。

```
// Log in MainActivity TAG
3930 : MainActivity start issue IPC call to remote service : 1
3930 : MainActivity receive ipc call : 1
3930 : MainActivity end issue IPC call to remote service : 1 
```

* * *

```
// Log in AutoCompleteService TAG
3961 : AutoCompleteService start receive ipc call : 494
3961 : AutoCompleteService start IPC call to MainActivity : 494
3961 : AutoCompleteService end IPC call to MainActivity : 494
3961 : AutoCompleteService end receive ipc call : 494 
```

* * *

但我真的不明白。**如果 MainActivity 线程（Id 为 1）没有从函数调用（`autoCompleteApi.handle`）返回，它如何“跳转”到执行另一个函数（`update(StockInfo stockInfo)`）？**

我期待**MainActivity 接收**由不同线程打印的 ipc 调用。不是 ID 为 1 的线程。如果不是，应该会发生死锁。

如果您有兴趣尝试，请在此处下载完整的源代码：[https ://www.dropbox.com/s/8hd7v5acjd213l1/jstock-android2.zip](https://www.dropbox.com/s/8hd7v5acjd213l1/jstock-android2.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:06:00.273

一个有趣的问题。我的第一个想法是传入的 IPC 调用是在不同的线程上处理的（因为它通常会发生在传入的 IPC 调用中）在这种特定情况下结果是错误的。

查看传入调用到达时的执行堆栈（最近的堆栈帧在顶部）：

```
MainActivity$1.update
MainActivity$1.onTransact
MainActivity$1.execTransact         <- this gets called by the incoming IPC call
BinderProxy.transact                <- this is where the outgoing IPC call is made
AutoCompleteApi$Stub$Proxy.handle
MainActivity$3.onClick
... 
```

所以一切都发生在同一个线程中。呼入看起来像呼出的子程序调用。使这成为可能的魔法发生在本机代码中（或者可能在内核中）。[Thorsten Schreiber](https://www.nds.rub.de/media/attachments/files/2011/10/main.pdf)有一篇有趣的论文解释了 Binder 机制的一些内部结构。不幸的是，它没有讨论对与本示例中发生的相同进程的反向调用。

[在这篇博](http://lukejin.wordpress.com/2011/03/13/android%E4%B8%AD%E7%9A%84binder/)文中有一个关于这个特性的小评论：

> 请注意，原始线程在等待回复时也可能会收到 BR_TRANSACTION 命令。这表示跨进程的递归，接收线程调用原始进程中的对象。驱动程序负责跟踪所有活动事务，因此它可以在递归发生时将事务分派到正确的线程。

也许还有更多可以在[OpenBinder 网站](http://www.angryredplanet.com/~hackbod/openbinder/docs/html/)上找到，它是 Android Binder 实现的根目录。

# product - Atlassian Stash 是否提供类似 pastebin/GitHub gist 的功能？

> ID：14281888
> 
> 赞同：8
> 
> 时间：2013-01-11T15:59:45.020
> 
> 标签：product, gist, bitbucket-server

[从他们对 Stash](http://www.atlassian.com/software/stash/overview)的公开产品描述中，我无法判断他们是否提供了这样的功能。

谁能告诉我 Stash 是否具有类似[pastebin](http://en.wikipedia.org/wiki/Pastebin) / [gist 的](http://gist.github.com/)功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T03:57:04.543

不，Atlassian Stash 目前不提供类似 pastebin/gist 的功能。已打开一个新功能请求以添加它：[STASH-2628 代码片段共享](https://jira.atlassian.com/browse/STASH-2628)请求它。

正如下面有人提到的，[现在有一个付费插件](https://marketplace.atlassian.com/plugins/com.simplenia.stash.plugins.snippets)（不是来自 Atlassian），它为 Stash 提供了类似 pastebin/gist 的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T06:44:29.857

它不包含在 Stash 中。但是，有一个付费插件可以提供此功能。见[https://marketplace.atlassian.com/plugins/com.simplenia.stash.plugins.snippets](https://marketplace.atlassian.com/plugins/com.simplenia.stash.plugins.snippets)

# iphone - iOS 应用程序事件处理程序的正确位置（MVC 方式）是什么？

> ID：14281891
> 
> 赞同：0
> 
> 时间：2013-01-11T16:00:05.147
> 
> 标签：iphone, ios, objective-c, model-view-controller

我正在编写一个注册呼叫事件（未通话、拨号、断开等）的 iOS 应用程序。我有注册调用事件的代码，但我不确定放置它的正确位置在哪里（在模型中？在控制器中？）。

所有示例都将代码放在应用程序委托中，但这似乎很尴尬。毕竟，应用程序委托不是 MVC 的一部分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:04:55.717

> 毕竟，应用程序委托不是 MVC 的一部分。

我可以争辩，但我感觉你太担心“正确的设计”了。如果您想更改这些事件处理程序的位置，我会将它们放在控制器中的某个位置（当然不是模型，因为它们不是数据提供者......）

但毕竟，为什么他们在应用程序委托中“尴尬”？这**正是**单例应用程序对象具有委托的原因：系统范围的事件应分别通知应用程序（及其委托），而不是应用程序的某些内部部分。这是把事情搞混了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:04:07.060

由于这些事件控制您的应用程序的部分，最好的答案是：在控制器中。这种将很多东西放在委托中的 Apple 风格确实是不好的编码习惯。

# spring - spring：需要一个在web环境中使用prototype bean的例子

> ID：14281895
> 
> 赞同：1
> 
> 时间：2013-01-11T16:00:22.543
> 
> 标签：spring

我想知道如何正确地将原型 bean 注入 Web 应用程序中的单例 bean。考虑这个例子：

```
<bean id="order" class="com.foo.Order" scope="prototype"/>

<bean id="orderService" class="com.foo.OrderService">
    <property name="userPreferences" ref="userPreferences"/>
</bean> 
```

我想过使用 getBean() 但这不是让我的代码依赖于 spring 本身的方法吗？

我需要一个简短的 java 代码示例来演示如何在我的 OrderService 单例中注入一个订单 bean。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:10:55.033

您可以使用 jsr-330 [Providers](http://docs.oracle.com/javaee/6/api/javax/inject/Provider.html)，只需输入：

```
@Autowired
Provider<Order> orderProvider; 
```

在你的单例 bean 中，然后使用提供者：

```
public Whatever yourMethod() {
     Order order = orderProvider.get();
} 
```

# google-app-engine - 了解 AppEngine _ah/stats 结果

> ID：14281897
> 
> 赞同：0
> 
> 时间：2013-01-11T16:00:26.637
> 
> 标签：google-app-engine, app-engine-ndb

我在 AppEngine 的 App Stats 中有这个结果，但我无法解决，看起来每个部分都执行得很好，但是有很大的差距。有任何想法吗？

![应用统计结果](../Images/2d26213cedd044a72debfa7e88109f70.png)

上下文：这是一个注册系统，它检查用户名/电子邮件是否已经存在，向用户发送电子邮件，将数据放入数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:12:50.047

Appstats 仅显示 GAE API/RPC 调用的时间。很可能所有时间都花在了您的代码中，或者您使用的另一个库中没有等待 GAE RPC 调用。您必须自己分析该代码的性能。

# php - PHP选择2个数组

> ID：14281900
> 
> 赞同：0
> 
> 时间：2013-01-11T16:00:40.223
> 
> 标签：php, arrays

我填充这样的选择框

```
foreach ( $prov->getLicences() as $licence ) {
    echo '<option value="' . $licence['id'] . '">' . $licence['licence'] . '</option>';
} 
```

此选择框用于编辑现有的数据库条目，因此我可以使用它来获取已选择的许可证。

```
$prov->getSubscriberLicences($id) 
```

这将返回一个 id 数组，我如何根据上面选择框中的可用值检查这些 id。

如果它们匹配，我想将`selected`标签添加到选项值。

```
 echo '<option selected  value="' . $licence['id'] . '">' . $licence['licence'] . '</option>'; 
```

**编辑：**

请注意`$prov->getSubscriberLicences($id)`返回一个包含多个 id 的数组，这里是一个 var 转储

```
array(2) { [0]=> array(1) { ["id"]=> string(1) "1" } [1]=> array(1) { ["id"]=> string(1) "3" } } 
```

看起来像它的多维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:04:18.890

由于给出的信息非常少，我只能想到这个，试试这个-

```
$selected = (in_array($licence['id'],$prov->getSubscriberLicences($id)) ? "select" : "");

echo '<option '.$selected.'  value="' . $licence['id'] . '">' . $licence['licence'] . '</option>'; 
```

# iphone - 加载另一个 UIView 时出现问题

> ID：14281901
> 
> 赞同：0
> 
> 时间：2013-01-11T16:00:42.467
> 
> 标签：iphone, ios, cocoa-touch

在我的应用程序中，我实现了一个 QR 码阅读器，它在扫描任何 QR 码后将应用程序用户引导到应用程序中的另一个视图。

我有两个 Xib。一个是打开名为 demoViewController 的应用程序时加载的主屏幕。另一个是扫描二维码后应用程序带您进入的页面，称为 yViewController。

在 yViewController 上，我使用名为 sPage 的 UIView 屏蔽了整个页面。我之所以创建这个 UIView 是因为我需要实现这段代码：

```
[[NSBundle mainBundle] loadNibNamed:@"yViewController" owner:self options:nil];
        [self.view addSubview:sPage]; 
```

那是在扫描后将用户带到第二页的代码。我需要掩码 UIView sPage 以使此方法起作用。它确实有效。

但是，我认为这搞砸了我的界面。我在我的 sPage 视图中有一个 UIImageView，通过 demoViewConroller.m 使用 viewDidLoad 实现：

```
[topImage setImage: [UIImage imageNamed:@"ylogoREAL.png"]]; 
```

图像不显示。

此外，当键盘出现并隐藏文本字段时，我有一些代码可以为我的视图设置动画。这也行不通。

我知道层次结构是正确的，因为我使用了在 sPage 视图上工作的 buttonPressed 方法，以及在触摸视图时关闭键盘的方法。但没有其他工作。

谁能帮我弄清楚为什么？我很混乱 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:35:48.683

如果我正确理解您的错误，您正在调用一个函数，然后用分号结束该行（程序员的习惯），然后转到下一行（也许）用大括号打开该函数。

```
-(void) function();
{ 
```

它不需要有分号

```
-(void) function()
{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:16:10.183

我对你想要达到的目标有点困惑，但我会试一试

你如何初始化 yViewController？我相信你应该使用

```
yViewController = [[UIViewController alloc] initWithNibName:@"yViewController" bundle:[NSBundle mainBundle]]; 
```

而不是创建加载 yViewController 笔尖的掩码视图。

更新：

查看您的代码后，我相信您希望在扫描完成后显示一个调查页面。你可以做两件事

选项 1 - 更容易

使用现有的 UIViewController (yViewController) 向用户展示 UIView

```
NSArray *nibs = [[NSBundle mainBundle] loadNibNamed:@"Survey" owner:self options:nil];
UIView *view_to_show = [nibs objectAtIndex:0];
[self.view addSubview:view_to_show]; 
```

请记住，为了以后能够关闭此视图，您需要对其进行引用（将其声明为属性），然后您可以执行 [view_to_show setHidden:YES]; 或 removeFromSuperview

选项 2 - UIViewController 选项

使用您的调查视图创建一个新的 UIViewController 并显示

```
UIViewController *vc_new = [[UIViewController alloc] initWithNibName:@"Survey" bundle:[NSBundle mainBundle]];
[self presentViewController:vc_new animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:53:33.193

我需要做的就是在 [[NSBundle mainBundle] loadNibNamed:@"yViewController" owner:self options:nil]; 下声明 topImage。. 我猜 ViewDidLoad 在这种情况下放错了地方！

# c# - 为什么微软不想用 NaN 修复 Equals 和 GetHashCode 的错误实现？

> ID：14281911
> 
> 赞同：16
> 
> 时间：2013-01-11T16:01:08.987
> 
> 标签：c#, .net, hash, floating-point, nan

在 .NET Framework 中，浮点类型 (和) 的实现( `override`)是**错误**的。引用[MSDN](http://msdn.microsoft.com/en-us/library/system.object.gethashcode)[规范](http://msdn.microsoft.com/en-us/library/system.object.gethashcode)：`Equals(object)``GetHashCode()``System.Double``System.Single`**[`GetHashCode(object)`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode)**

 **> 哈希函数必须具有以下属性：
> 
> • 如果两个对象比较相等，则每个对象的GetHashCode 方法必须返回相同的值。但是，如果两个对象比较不相等，则两个对象的 GetHashCode 方法不必返回不同的值。

如果您采用`NaN`具有不同二进制表示的两个值，则两个对象在该`Equals`方法下确实比较相等，但哈希码（几乎总是）是不同的。

现在，此错误已在 Microsoft Connect 上[报告。](http://connect.microsoft.com/VisualStudio/feedback/details/648567/)**但他们为什么不解决这个问题呢？**

修复很简单：要么让不同的比较`NaN` *不*相等，要么选择一个固定的哈希码返回任何`NaN`.

修复不会破坏任何东西：现在的情况是，`NaN`使用不同的东西时没有任何效果。

你能想出*什么*理由不解决这个问题吗？

这是一个说明当前行为的简单示例：

```
using System;
using System.Collections.Generic;
using System.Linq;

static class Program
{
  const int setSize = 1000000; // change to higher value if you want to waste even more memory
  const double oneNaNToRuleThemAll = double.NaN;
  static readonly Random randomNumberGenerator = new Random();

  static void Main()
  {
    var set = new HashSet<double>();   // uses default EqualityComparer<double>

    while (set.Count < setSize)
      set.Add(GetSomeNaN());

    Console.WriteLine("We now have a set with {0:N0} members", set.Count);
    bool areAllEqualToTheSame = set.All(oneNaNToRuleThemAll.Equals);
    if (areAllEqualToTheSame)
      Console.WriteLine("By transitivity, all members of the set are (pairwise) equal.");
  }

  static double GetSomeNaN()  // can also give PositiveInfinity, NegativeInfinity (unlikely)
  {
    byte[] b = new byte[8];
    randomNumberGenerator.NextBytes(b);
    b[7] |= 0x7F;
    b[6] |= 0xF0;
    return BitConverter.ToDouble(b, 0);
  }
} 
```

运行代码的结果：一百万个重复的`HashSet<>`.

请注意：这与C#的and运算符**完全无关。**如果您想自己检查，请使用。`==``!=``Equals`**

# php - 有没有办法制作响应式的个人资料页面（适用于移动设备和桌面设备

> ID：14281920
> 
> 赞同：0
> 
> 时间：2013-01-11T16:01:36.300
> 
> 标签：php, html

所以我在我的服务器上安装了 wordpress，它看起来很棒。我希望我的网站有一个个人资料/首页，可以很好地显示在手机/平板电脑和台式机上。我一直在寻找这个很长一段时间，但我一直找不到任何东西。如果它看起来像：[http](http://about.me/hansstam) ://about.me/hansstam （我当前的个人资料页面，但不是自托管的），那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:04:34.823

是的。您需要阅读有关媒体查询的信息。它们允许您的页面适应屏幕大小，从而增强您的内容以进行移动和桌面浏览。看看这里：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:08:29.243

看看 WP-Touch： [http](http://wordpress.org/extend/plugins/wptouch/) ://wordpress.org/extend/plugins/wptouch/ 或者使用内置此功能的主题/框架，如 Roots 主题。使用您自己的主题时，请查看 CSS3 媒体查询[http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile -version-of-your-website/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)或 Javascript 库，如 adapt.js [http://adapt.960.gs/](http://adapt.960.gs/)

# java - 泽西岛：在资源过滤器中使用提供者

> ID：14281922
> 
> 赞同：0
> 
> 时间：2013-01-11T16:01:41.547
> 
> 标签：java, jersey, spring-3

使用 Jersey 1.14 和 Spring 3.1.2

我想创建一个这样的过滤器：[https ://gist.github.com/3031495](https://gist.github.com/3031495)

但在那个过滤器中，我想访问我创建的提供程序。

我得到一个`IllegalStateException`. 我怀疑我生命周期中的某些事情已经被淹没了。我可以从那里访问`@Context private HttpServletRequest`和提取我需要的会话信息，但是两个类必须知道在哪里/如何获取我的“AuthUser”对象。

任何帮助表示赞赏！

我的提供者：

```
@Component
@Provider
public class AuthUserProvider extends AbstractHttpContextInjectable<AuthUser> implements
        InjectableProvider<Context, Type> {

    private static final Logger LOG = LoggerFactory.getLogger(AuthUserProvider.class);

    @Context
    HttpServletRequest req;

    public void init() {
        LOG.debug("created");
    }

    @Override
    // this may return a null AuthUser, which is what we want....remember, a
    // null AuthUser means the user hasn't authenticated yet
    public AuthUser getValue(HttpContext ctx) {
        return (AuthUser) req.getSession().getAttribute(AuthUser.KEY);
    }

    // InjectableProvider implementation:

    public ComponentScope getScope() {
        return ComponentScope.Singleton;
    }

    public Injectable<AuthUser> getInjectable(ComponentContext ic, Context ctx, Type c) {
        if (AuthUser.class.equals(c)) {
            return this;
        }
        return null;
    }
} 
```

我的过滤器：

```
@Component
public class TodoFilter implements ResourceFilter {

    private static final Logger LOG = LoggerFactory.getLogger(TodoFilter.class);

    @Autowired
    private JdbcTemplate todoTemplate;

    // this works
    @Context
    private HttpServletRequest servletRequest;

    // this throws a java.lang.IllegalStateException
    // @Context
    // private AuthUser authUser;

    public void init() throws Exception {
        LOG.debug("created");
        LOG.debug(todoTemplate.getDataSource().getConnection().getMetaData()
                .getDatabaseProductName());
    }

    @Override
    public ContainerRequestFilter getRequestFilter() {
        return new ContainerRequestFilter() {
            @Override
            public ContainerRequest filter(ContainerRequest request) {
                LOG.debug("checking if {} is authorized to use {}", "my authenticated user",
                        request.getPath());
                // String name = request.getUserPrincipal().getName();
                // String[] admins = settings.getAdminUsers();
                // for (String adminName : admins) {
                // if (adminName.equals(name))
                // return request;
                // }
                // if (authUser.getUsername().equals("jberk")) {
                // return request;
                // }
                // return HTTP 403 if name is not found in admin users
                throw new WebApplicationException(Response.status(Response.Status.FORBIDDEN)
                        .entity("You are not authorized!").build());
            }
        };
    }

    @Override
    public ContainerResponseFilter getResponseFilter() {
        return new ContainerResponseFilter() {
            @Override
            public ContainerResponse filter(ContainerRequest request,
                    ContainerResponse response) {
                // do nothing
                return response;
            }
        };
    }

} 
```

我的服务（又名资源）：

```
@Component
@Path("/rs/todo")
@Produces(MediaType.APPLICATION_JSON)
@ResourceFilters(TodoFilter.class)
public class TodoService {
    @GET / @POST methods
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:31:52.793

所以我想我想通了......

我将此添加到我的 ResourceFilter：

```
@Context
private HttpContext ctx;
@Autowired
private AuthUserProvider provider; 
```

然后我可以在过滤器方法中做到这一点：

```
public ContainerRequest filter(ContainerRequest request) {
       AuthUser authUser = provider.getValue(ctx);
       // use authuser in some way
} 
```

这可能不是“正确的”......但它正在工作并且我没有代码重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T14:08:36.493

```
public ComponentScope getScope() {
    return ComponentScope.Singleton;
} 
```

它应该是

```
public ComponentScope getScope() {
    return ComponentScope.PerRequest;
} 
```

# sql - 加入（（=声明）或（（！=声明），其他规定））

> ID：14281924
> 
> 赞同：0
> 
> 时间：2013-01-11T16:01:47.173
> 
> 标签：sql, sql-server

我有一些信息，其中 IdNumbers（不是主键 Id，只是分配给个人的随机 Id）在我的第一个表中并不总是正确的。

因此，我将在 Id 和名称上加入我的第二个表，并尝试将其放到仅当 IdNumber 不匹配时才加入名称的位置。

我正在使用大致如下的连接语句进行查询（我省略了 SELECT、WHERE 和 ORDER BY 部分，因为我相信它们对这个问题没有影响，我不想令人困惑，因为它们非常复杂 - 如果下面的查询部分应该像我想要的那样工作并且问题显然在其他地方，那么告诉我这样就可以回答我的问题）：

```
FROM Table1
FULL OUTER JOIN Table2 ON ((Table1.IdNumber = Table2.IdNumber) 
OR (Table1.IdNumber != Table2.IdNumber 
    AND Table1.Lname = Table2.Lname 
    AND Table1.Fname = Table2.Fname)) 
```

但是，它会加入多次匹配 ID 和匹配名称的人，如下所示：

```
Fname   M   Lname   Table1.IdNumber  Table2.IdNumber2
Matthew -   Smith   1                2
Matthew H   Smith   2                1
Matthew -   Smith   1                1
Matthew H   Smith   2                2 
```

所以它是因为他们的 id 匹配而拉最后 2 个，但也因为他们的 id 不匹配并且他们的名字匹配而加入前 2 个，但是为什么它甚至要加入前 2 个呢？我怀疑它在决定加入哪里时会忽略 != 语句，因为其他条件都已满足，但我希望它以某种方式考虑这个 != 语句。

如果这应该起作用，就像我之前说的那样，请告诉我，它会回答我的问题。

（*编辑）对不起，我应该正确命名这些 - 我已经修改了名称。并且完整的外部连接是必要的，无论如何我都需要两个表中的所有内容并且它工作正常，但感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:07:01.203

我想你想要这样的东西：

```
select t1.*,t2.*  
from t1,t2  
where  t1.id = t2.id  
and  t1.name = t2.name
union  
select t1.*,t2.*  
from t1,t2  
where  t1.id ! t2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:11:24.427

如果列来自正确的表，您的查询应该可以工作。因为您没有使用表别名，所以我怀疑您有一个表达式，例如：

```
fname1 = fname2 
```

并且两列都在同一个表中。或者更糟：

```
fname1 = fname1 
```

这基本上总是 TRUE（除非 fname1 不为空）。

您的查询可能有效，但在大多数数据库中效率低下，因为它们将使用嵌套循环优化。考虑将查询重写为：

```
from table1 t1 full outer join
     table2 byID
     on t1.IdNumber = byID.IdNumber full outer join
     table2 byName
     on t1.fname = byName.fname and t1.lname = byName.lname and t1.idNumber <> byName.idNumber 
```

这将需要更改查询中的其他子句，通常为：

```
coalesce(byId.column, byName.column) as Column 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:16:35.167

考虑到在一个 JOIN 中这样做会有多混乱，我建议使用临时表来保存关系。

您可以将第一个表中的所有 ID 插入到临时表中，然后执行两次传递以更新包含第二个表 ID 的列 - 第一次使用 ID 匹配的位置，第二次使用 ID 不匹配但名称匹配的位置做。

然后，您可以使用此表连接这两个表，从表 2 中为表 1 中的每条记录检索最多一条记录。

# php - 试图获取用户名以在 joomla 2.5 中创建动态页面

> ID：14281927
> 
> 赞同：0
> 
> 时间：2013-01-11T16:02:09.297
> 
> 标签：php, joomla2.5

用户登录我的网站后，我想将用户名存储在会话变量中，以便我可以根据登录的用户在另一个动态页面中使用该信息，

我该如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:00:10.803

If your users are logging into Joomla and you need the username in a Joomla file such as a template file you can do the following:

```
$user = $JFactory::getUser();
if (!$user->guest) {
    $username = $user->username;
}

if (!empty($username)) {
    echo $username;
} 
```

# sql - Progress DB，需要合并两个查询

> ID：14281930
> 
> 赞同：0
> 
> 时间：2013-01-11T16:02:19.010
> 
> 标签：sql, join, group-by, aggregate-functions, progress-db

我有 2 个进度数据库查询，我正在尝试将它们合并到一个语句中，但我遇到了错误。这些查询中的每一个都只返回一个数字，我想将这两个数字相加。要么从头开始进行另一个查询。他们都接受一组“DM1”的价值代码，他们都接受1个“产品”。

**查询 1**

```
SELECT SUM(opn3.samt)
    FROM PUB.ord ord3, PUB.opn opn3
    WHERE
    ord3.subsnum = opn3.subsnum
    AND ord3.onum = opn3.onum
    AND ord3.DM1 != ''
    AND ord3.DM1 IN('XCWAJC25','WCWAMO73') 
    AND ord3.prdcde = 'CSC' 
    AND ord3.stat != 16
    AND opn3.samt >= 0
    GROUP BY ord3.DM1, ord3.prdcde 
```

**查询 2**

```
SELECT SUM((-1 * opn2.samt) + ord2.samt)
    FROM PUB.ord ord2, PUB.opn opn2
    WHERE
    ord2.subsnum = opn2.subsnum
    AND ord2.onum = opn2.onum
    AND ord2.DM1 != ''
    AND ord2.DM1 IN('XCWAJC25','WCWAMO73') 
    AND ord2.prdcde = 'CSC' 
    AND ord2.stat = 16
    AND opn2.samt < 0
    GROUP BY ord2.DM1, ord2.prdcde 
```

**合并尝试到目前为止...**

```
SELECT SUM(opn3.samt + (SELECT SUM((-1 * opn2.samt) + ord2.samt)
    FROM PUB.ord ord2, PUB.opn opn2
    WHERE
    ord2.subsnum = opn2.subsnum
    AND ord2.onum = opn2.onum
    AND ord2.DM1 != ''
    AND ord2.DM1 = ord3.DM1
    AND ord2.prdcde = ord3.prdcde 
    AND ord2.stat = 16
    AND opn2.samt < 0
    GROUP BY ord2.DM1, ord2.prdcde
)) as foo

    FROM PUB.ord ord3, PUB.opn opn3
    WHERE
    ord3.subsnum = opn3.subsnum
    AND ord3.onum = opn3.onum
    AND ord3.DM1 != ''
    AND ord3.DM1 IN('XCWAJC25','WCWAMO73') 
    AND ord3.prdcde = 'CSC' 
    AND ord3.stat != 16
    AND opn3.samt >= 0
    GROUP BY ord3.DM1, ord3.prdcde 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:24:20.120

我认为这会起作用，尽管有样本数据来验证会很好：

```
SELECT COALESCE(SUM(a.samt), 0) - COALESCE(SUM(b.samt), 0)
       + COALESCE(SUM(CASE WHEN ord.stat = 16
                                AND b.samt < 0
                           THEN ord.samt END), 0)
FROM PUB.ord ord
LEFT JOIN PUB.opn a
       ON a.subsnum = ord.subsnum
          AND a.onum = ord.onum
          AND a.samt >= 0
          AND ord.stat != 16
LEFT JOIN PUB.opn b
          ON b.subsnum = ord.subsnum
             AND b.onum = ord.onum
             AND b.samt < 0
             AND ord.stat = 16
WHERE ord.DM1 IN('XCWAJC25', 'WCWAMO73') 
      AND ord.prdcde = 'CSC'
GROUP BY ord.DM1 
```

关于查询/东西的注意事项：

*   始终明确限定连接，不要使用逗号分隔的`FROM`子句
*   我认为您不需要`ord.DM1 != ''`，因为值必须在特定的集合中
*   Putting a clause into a `LEFT JOIN` condition instead of the `WHERE` clause has a slightly different effect; it adds the condition to the join, instead of the filtering. This means that rows can be excluded based on something in the left table, regardless of whether you need the actual row (this is why `ord.stat` ended up in the `LEFT JOIN`s). `INNER JOIN`s would technically behave the same way, but it isn't usually noticeable because causing the right table to be excluded also excludes the left table.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:24:14.677

我认为这应该可以解决问题，因为各个查询按预期工作：

```
SELECT sum1.tot + sum2.tot 
FROM  
(SELECT SUM(opn3.samt) as tot
FROM PUB.ord ord3, PUB.opn opn3
WHERE
ord3.subsnum = opn3.subsnum
AND ord3.onum = opn3.onum
AND ord3.DM1 != ''
AND ord3.DM1 IN('XCWAJC25','WCWAMO73') 
AND ord3.prdcde = 'CSC' 
AND ord3.stat != 16
AND opn3.samt >= 0
GROUP BY ord3.DM1, ord3.prdcde) sum1,

(SELECT SUM((-1 * opn2.samt) + ord2.samt) as tot
FROM PUB.ord ord2, PUB.opn opn2
WHERE
ord2.subsnum = opn2.subsnum
AND ord2.onum = opn2.onum
AND ord2.DM1 != ''
AND ord2.DM1 IN('XCWAJC25','WCWAMO73') 
AND ord2.prdcde = 'CSC' 
AND ord2.stat = 16
AND opn2.samt < 0
GROUP BY ord2.DM1, ord2.prdcde) sum2 
```

# opengl - OpenGL中的视线向量

> ID：14281931
> 
> 赞同：1
> 
> 时间：2013-01-11T16:02:25.717
> 
> 标签：opengl, vector, 3d

我遇到的问题是我无法在 OpenGL 中获得“视线”矢量。我做了一些研究，发现它应该是转换后的 Z 向量，但它不想工作。我有这段代码来检索块的速度（我希望它从“相机”向前移动），但它一直与相机无关，但与渲染世界相比，它一直以相同的方式移动：

```
GLfloat matrix[16]; 
    glGetFloatv (GL_MODELVIEW_MATRIX, matrix);
    GLfloat d = sqrt( matrix[8]*matrix[8] + matrix[9]*matrix[9] + matrix[10]*matrix[10]);
    xmov = matrix[8]/d;
    ymov = matrix[9]/d;
    zmov = matrix[10]/d; 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:21:02.637

好的，现在在你澄清了你真正想做的事情之后，我很确定这是正确的答案：

你可能已经习惯了一种叫做`ModelView`矩阵的东西。它本质上是由两部分组合而成的，你不觉得奇怪吗？嗯，这是给我的，在我想了一会儿之后，它是有道理的。最终顶点位置计算如下：

```
gl_Position = ProjectionMat * ModelViewMat * VertexPos; 
```

`[x,y,z]`您会看到，无论您将“相机”从原点移动还是从原点移动对象，OpenGL 都没有区别`[-x,-y,-z]`- 您将获得相同的结果。然而，将“相机”位置区分为可能与原点不同的位置是有用的。

```
gl_Position = ProjectionMat * ViewMat * ModelMat * VertexPos; 
```

我认为最自然的方法是，正如我所说，将计算分成两个矩阵：`Model`和`View`。现在场景中的每个对象都必须更改`Model`矩阵，并且通过更改矩阵来设置相机位置`View`。说得通？

我给你举个例子。如果您的相机在`[5,0,0]`（对应于`Translate(-5,0,0)`），并且您的对象在`[-5,0,0]`，它将从相机降落 10 个单位。现在，当您将相机远离原点（增加第一个平移距离）时，“相机”和对象之间的距离会增加。

对象平移是*Model*，相机平移是*View*。

所以不难得出结论，如果你想*忽略*相机位置，只需`View`从方程中去掉部分；现在将在*不*考虑相机位置的情况下绘制每个对象，因此仅相对于您的视口。

```
gl_Position = ProjectionMat * ModelMat * VertexPos; 
```

我们假设的模型现在将从视口沿 X 轴降落 5 个单位，*无论*您当前“查看”什么，我认为这几乎是您想要实现的。

无论如何，您可能可以使用[一个不错的教程](http://www.arcsynthesis.org/gltut/Positioning/Tutorial%2007.html)

# ios - Gmail iOS 模态视图转换

> ID：14281932
> 
> 赞同：2
> 
> 时间：2013-01-11T16:02:27.627
> 
> 标签：ios, animation, gmail

只是想知道是否有人尝试复制用于在 Gmail iOS 中呈现模式视图的过渡？从底部动画弹出来，它看起来非常华丽和令人耳目一新。

![在此处输入图像描述](../Images/1c13e235a9a8a8a256fca4aeecce30b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:54:43.470

很确定您指的是显示模态视图控制器时的推回过渡？如果是这样，那么它就是国家地理公园指南应用程序首次推出的应用程序，并且有人[在 Github 上发布了他们的复制品](https://github.com/kentnguyen/KNSemiModalViewController)。这只是一个部分屏幕模式，但可以修改以模仿 Gmail 应用程序的完整视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:05:58.763

我创建了一个 UIViewController 类别来模仿这种类型的模态动画。它被称为[MFFadeBackModalAnimation](https://github.com/mikefrederick/MFFadeBackModalAnimation)。它封装了用于呈现和关闭视图控制器的原生 API，因此它应该与您现有的应用程序很好地集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T07:11:05.853

用这个怎么样？详细的动画，有必要再开发一点。 [https://github.com/ucu072/HCPushBackAnimation](https://github.com/ucu072/HCPushBackAnimation)

# ios - 用于开发丰富图形应用程序的 iOS 框架

> ID：14281933
> 
> 赞同：1
> 
> 时间：2013-01-11T16:02:30.173
> 
> 标签：ios, core-animation

假设我想在 Smule（iPhone 长笛应用程序）中开发界面。 [Youtube 链接到 Smule](http://www.youtube.com/watch?v=RhCJq7EAJJA)

我应该考虑使用什么样的框架。我应该坚持使用 iOS 中的原生框架，例如 CoreAnimation、OpenGL ES，还是有任何第三方框架可以让工作更轻松？

谢谢。瓦鲁纳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:18:00.233

这取决于很多参数...有很多选择...

只是一些让您入门的问题：

*   你有什么技能？（与 OpenGL 兼容？Objective-C 呢？）
*   你的预算是多少？（专有框架的钱？是时候做低级的事情了？）
*   性能有问题吗？（对于 smule 显然不是。）

使用像[Pythonista](http://omz-software.com/pythonista/)这样的脚本框架，这可能会在半天之内完成，不到一百行代码就可以实现良好的性能......如果它支持来自麦克风的输入......

# jquery - 在滚动之间闪烁

> ID：14281934
> 
> 赞同：1
> 
> 时间：2013-01-11T16:02:33.383
> 
> 标签：jquery

我一直在尝试建立一个单页网站，但目前 Jquery 并不是我的强项。

我发现这段代码会滚动到 div，我尝试了其他代码，但它们不会滚动。

我的问题是虽然大多数时候它滚动流畅，有时当我点击菜单时它会在滚动之前闪烁到白色，几乎就像快速页面重新加载一样？

知道出了什么问题吗？

```
$(document).ready(function(){
            $(".contactLink").click(function(){
                if ($("#contactForm").is(":hidden")){
                    $("#contactForm").slideDown("slow");
                }
                else{
                    $("#contactForm").slideUp("slow");
                }
            });
        });
        function closeForm(){
            $("#messageSent").show("slow");
            setTimeout('$("#messageSent").hide();$("#contactForm").slideUp("slow")', 2000);
       }

$(document).ready(function() {
  function filterPath(string) {
    return string
      .replace(/^\//,'')
      .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
      .replace(/\/$/,'');
  }
  $('a[href*=#]').each(function() {
    if ( filterPath(location.pathname) == filterPath(this.pathname)
    && location.hostname == this.hostname
    && this.hash.replace(/#/,'') ) {
      var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
      var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
       if ($target) {
         var targetOffset = $target.offset().top;
         $(this).click(function() {
           $('html, body').animate({scrollTop: targetOffset}, 1000);
           var d = document.createElement("div");
        d.style.height = "101%";
        d.style.overflow = "hidden";
        document.body.appendChild(d);
        window.scrollTo(0,scrollToM);
        setTimeout(function() {
        d.parentNode.removeChild(d);
            }, 10);
           return false;
         });
      }
    }
  });
}); 
```

# jasmine - 如何在不使用外部 html 文件的情况下在 jasmine 测试中添加 DOM 元素？

> ID：14281937
> 
> 赞同：19
> 
> 时间：2013-01-11T16:02:44.383
> 
> 标签：jasmine, jasmine-jquery

我正在编写一些简单的 jasmine 测试，但出现异常，因为我正在测试的代码正在寻找一个不存在的表单，因为仅在测试 js 文件时没有 DOM：`$("form")[0]`在测试的 js 文件中导致：

```
TypeError: $(...)[0] is undefined 
```

我阅读了一些关于 jasmine-jquery 的内容，并意识到我可以使用一些带有外部 html 文件的 html 固定装置。这个流程看起来很混乱，因为我需要做的只是添加一个空的有效表单，以便测试（专注于其他东西）运行，`<form></form>`我认为像附加这样的东西就足够了。

起初我认为 sandbox() 函数将是解决方案，但它似乎只创建 div，我需要一个表单。

通过仅使用 jasmine 规范文件中的代码来添加一些元素的任何简单方法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-12T10:35:39.320

最简单的解决方案是在 before 块中自己将表单添加到 DOM 中，然后在 after 块中将其删除：

```
describe(function(){
  var form;

  beforeEach(function(){
    form = $('<form>');
    $(document.body).append(form);
  });

  it('your test', function(){

  })

  afterEach(function(){
   form.remove();
   form = null;
  });
}); 
```

编写你的沙盒助手也不是那么难：

```
function sandbox(html){
  var el;

  beforeEach(function(){
    el = $(html);
    $(document.body).append(el);
  });

  afterEach(function(){
   el.remove();
   el = null;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-28T08:45:54.200

另一种方法是使用[jasmine 夹具](https://github.com/searls/jasmine-fixture "茉莉花夹具")

> 这个概念
> 
> 这是考虑它的一种方法：
> 
> 在 jQuery 中，你给 $() 一个 CSS 选择器，它会在 DOM 上查找元素。
> 
> 在 jasmine-fixture 中，你给 affix() 一个 CSS 选择器，它将这些元素添加到 DOM。
> 
> 这对测试非常有用，因为这意味着在使用 affix 设置 DOM 的状态后，您的主题代码将具有完成其工作所需的元素。
> 
> 最后，jasmine-fixture 将通过在每个规范运行后整理并删除附加到 DOM 的所有内容来帮助您避免测试污染。

另请参阅：[SO：茉莉花测试中的 dom 操作](https://stackoverflow.com/questions/7672389/testing-dom-manipulating-in-jasmine-test)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T16:45:34.523

您应该使用 sandbox() 创建一个 div 并创建一个表单元素并附加到沙箱，这是 jasmine 控制 DOM 中的这个装置的更安全的方法。

# php - symfony 中所需的树枝变量数组

> ID：14281941
> 
> 赞同：0
> 
> 时间：2013-01-11T16:03:00.560
> 
> 标签：php, twig, symfony-2.1

是否有任何方法可以从 Twig 模板中发现所需的变量？例如，如果我有：

```
Hello {{ user }}! You're {{ age }} years old, well done big man! 
```

我将能够加载这个模板，然后收集每个必需的变量，最终让我有类似的东西：

```
Array ( [0] => user [1] => age ) 
```

这样做的最终目标是能够定义一个视图，然后让系统根据模板文件中的所需变量创建一个表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:29:59.683

**工作解决方案**

感谢 morg 指出我`tokenize`能够使用以下内容获得我想要的东西（我将它放在我的控制器中进行测试）：

```
$lexer = new \Twig_Lexer(new \Twig_Environment());
$stream = $lexer->tokenize(new \Twig_Source('{{test|raw}}{{test2|raw|asd}}{{another}}{{help_me}}', null));
$variables = array();
while (!$stream->isEOF()) {
    $token = $stream->next();
    if($token->getType() === \Twig_Token::NAME_TYPE){
        $variables[] = $token->getValue();
        while (!$stream->isEOF() && $token->getType() !== \Twig_Token::VAR_END_TYPE) {
            $token = $stream->next();
        }
    }
}
$variables = array_unique($variables); 
```

这将返回：

```
Array
(
    [0] => test
    [1] => test2
    [2] => another
    [3] => help_me
) 
```

你会注意到我只得到变量而不是任何函数（这是通过设计），但如果你想同时得到变量和函数，你可以删除嵌套的 while 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:24:32.120

您可以为此使用 twig 标记器。

```
$stream = $twig->tokenize($source, $identifier); 
```

标记器有一个`toString()`方法，您可以解析其结果字符串

```
VAR_START_TYPE()
NAME_TYPE(varname)
VAR_END_TYPE() 
```

查看[此](http://twig.sensiolabs.org/doc/internals.html)内容以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:21:02.730

您可以尝试使用`preg_match_all('{{\s*(\w+)\s*}}', 'template {{string }} with {{ var}}', $matchesArray);`. 其`$matchArray`结构如下：

```
Array(
     0 => array(0 => '{{string }}', 1 => 'string'),
     1 => array(0 => '{{ var}}', 1 => 'var')
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-12T00:38:59.643

从 PHP 代码中执行此操作的另一种方法并不优雅，但仍然比任何正则表达式更可靠：

```
$source = "My template string with {{ some }} parameters.";

$stream = $twig->tokenize(new \Twig_Source($source, "source"));

$matches = [];
preg_match_all(
    "/NAME_TYPE\((.*)\)/", $stream->__toString(), $matches
);

if (count($matches) > 1) {
    $params = array_unique($matches[1]);
} else {
    $params = [];
} 
```

这通过使用 Twig 内部机制来标记模板字符串，然后使用正则表达式提取参数名称来工作。

编辑：我的答案的先前版本使用 parse 方法来创建节点树，但它似乎不再起作用，并且在上一步中匹配 NAME_TYPE 似乎更可靠，不确定我是否错过了那里的东西......< /p>

# html - 使用 HTML5 为移动设备捕获的图像

> ID：14281942
> 
> 赞同：1
> 
> 时间：2013-01-11T16:03:00.943
> 
> 标签：html, api, jquery-mobile, mobile

我正在 `<input type="file" accept="image/*;capture=camera"/>` 为网络移动使用 html 5 文件元素来拍照，它工作正常，但我如何处理 file.value 以将其发送到网络服务或数据库？这是移动设备的[演示演示链接](http://test.yazilim.ca)

这是我的代码，但不起作用我无法获取文件上传值

```
 <html>
<script>
function getPhoto()
{
alert('2');
var fu1 = document.getElementById("myfile").value;
alert("You selected " + fu1);
}
</script>
<body>
<form>
<input type="file" name="myfile" accept="image/*;capture=camera"/>
<input type="submit"/>
<input type="button" value="get Photo path" onclick="getPhoto()">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:30:44.917

您需要使用文件 API：[http ://www.w3.org/TR/FileAPI/](http://www.w3.org/TR/FileAPI/)

这是来自 html5rocks.com 的一个不错的教程：http: [//www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

尝试做这样的事情

**HTML**

```
<input type="file" id="myfile" name="myfile" accept="image/*;capture=camera"/> 
```

**JS**

```
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object, files[0] is your file
}

document.getElementById('file').addEventListener('change', handleFileSelect, false); 
```

如果需要在 JS 中读取文件，则需要使用 FileReader API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T05:09:59.573

您错过了为您的输入标签提供 ID。您的输入标签将是这样的

```
<input type="file" name="myfile" id="myfile" accept="image/*;capture=camera"/> 
```

# magento-1.4 - 在 Magento Admin 中禁用自动发货更新

> ID：14281944
> 
> 赞同：3
> 
> 时间：2013-01-11T16:03:11.197
> 
> 标签：magento-1.4, magento

如果您使用过 Magento 管理员，那么您就会知道，当您在“送货地址”订单屏幕之间进行选项卡时，它有点麻烦。每当更新任何字段时，它都会在后台执行 AJAX 调用。这样可以使运输保持最新状态，但是在尝试输入订单时非常烦人。有谁知道禁用此自动功能的好方法，以便可以通过按钮完成，而不是“自动”发生？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T00:03:13.957

我无法指出代码级别的任何具体内容，因为我现在没有方便查看的代码，但我知道这本身并不容易。

您将需要找到并重写（除非它全部在模板中，那么您将需要一个自定义管理主题）生成该表单的块，去掉将处理程序添加到`onblur`事件的调用。从理论上讲，您的按钮应该能够调用通过`onblur`表单元素调用的相同 JavaScript 方法。

# sql - 字符串 sql 中的变量

> ID：14281954
> 
> 赞同：0
> 
> 时间：2013-01-11T16:03:57.833
> 
> 标签：sql, tsql

我正在使用 T-SQL 节点函数解析 XML 数据。这是我正在处理的代码示例。

```
SELECT
a.b.value('Table1[1]/CURRENCY_FLAG[1]','varchar(10)') AS Currency
FROM @XMLdata.nodes('DataSet/diffgr_diffgram/EA_RESULTS') a(b)

UNION ALL 

SELECT
a.b.value('Table1[2]/CURRENCY_FLAG[1]','varchar(10)') AS Currency
FROM @XMLdata.nodes('DataSet/diffgr_diffgram/EA_RESULTS') a(b) 
```

如您所见，这两个部分之间的唯一区别是 Table1[x]。有没有办法增加这个数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:12:12.663

如果您包含`Table1`在 nodes 子句中，则无需增加它，也无需使用`union all`.

试试这个。

```
SELECT a.b.value('CURRENCY_FLAG[1]','varchar(10)') AS Currency
FROM @XMLdata.nodes('DataSet/diffgr_diffgram/EA_RESULTS/Table1') a(b) 
```

# c - 二分搜索练习

> ID：14281960
> 
> 赞同：0
> 
> 时间：2013-01-11T16:04:20.593
> 
> 标签：c, openvms

我正在用 C 做一个练习，但我不知道为什么作为第一个结果我总是 -1（这是不可能的）。我只有在交换后才有 -1 来调整数组。

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

main(){
        int vet[100], cont[100];
        int i, c, f=100;
        int swap;
        int r=0;
        int search;

        srand(time(NULL));

        for(i=0;i<100;i++){
                vet[i]=rand()%100+1;
        }

        while(r==0){
                r=1;
                for(i=0;i<100;i++){
                        if(vet[i]>vet[i+1]){
                                swap=vet[i+1];
                                vet[i+1]=vet[i];
                                vet[i]=swap;
                                r=0;
                        }
                }
        }

        for(i=0;i<100;i++){
                printf("%d) %d\n", i+1, vet[i]);
        }

        i=0;
        r=0;
        printf("Inserisci numero da ricercare (1-10000) -> ");
        scanf("%d", &search);
        if(search>10000 || search<0){
                printf("Hai inserito un valore non valido\n");
        }
        else{
                c=(i+f)/2;
                while(vet[c]!=search && i<f){
                        if(vet[c]<search){
                                i=c+1;
                                c=(i+f)/2;
                        }
                        else if(vet[c]>search){
                                f=c-1;
                                c=(i+f)/2;
                        }

                        if(vet[c]==search){
                                cont[r]=c+1;
                                r++;
                        }
                }
                if(vet[c]!=search){
                        printf("Non e\' stato trovato nessun valore %d", search◆
                }
                else{
                        for(i=0;i<r;i++){
                                printf("%d\n", cont[i]);
                        }
                }
        }
} 
```

现在我必须使用`srand(time(NULL))`我知道有更好的解决方案。练习未完成，现在我正在尝试解决此错误，有人可以帮助我吗？

编辑：我正在使用 OPENVMS 编译、链接和运行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:20:31.883

你的问题可能在这里：

```
for(i=0;i<100;i++){
    if(vet[i]>vet[i+1]){ 
```

当`i=99`, 并且您访问`vet[i+1]`时，您就离开了数组的末尾。这个元素没有定义，你没有得到任何更糟糕的行为可能只是侥幸。

编辑：所以解决方案是改变

```
for(i=0;i<99;i++){
        if(vet[i]>vet[i+1]){ 
```

# javascript - 历史对象的原型链？

> ID：14281961
> 
> 赞同：1
> 
> 时间：2013-01-11T16:04:21.357
> 
> 标签：javascript

哪一个是正确的？

Chrome 返回错误

```
Object.getPrototypeOf(Object.getPrototypeOf(history)) === Object.prototype
false 
```

火狐返回真

```
Object.getPrototypeOf(Object.getPrototypeOf(history)) === Object.prototype
true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:06:38.117

两个都。

[该规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#the-history-interface)并没有精确说明对象的类型或浏览器如何创建它，而只是一个接口。

# excel - 打印单元格颜色（ColorIndex 或 RGB）的 Excel 公式

> ID：14281966
> 
> 赞同：3
> 
> 时间：2013-01-11T16:04:37.597
> 
> 标签：excel, excel-formula

在 Excel 中是否有检索单元格的 ColorIndex（或 RGB）的公式？

我找到了以下功能：

```
CELL(info_type, the_cell) 
```

记录[在这里](http://office.microsoft.com/en-gb/excel-help/cell-function-HP010062392.aspx)，但它没有任何单元格颜色的参考信息。

这是一个`color`信息，但对我来说没用。其实是这样描述的：

> `"color"`如果单元格的颜色格式为负值，则值为 1；否则返回 0（零）。

任何的想法？

此外，我发现执行此操作的 VBA 属性是`Cell.Interior.Color`但实际上我没有使用宏，而是使用简单的 Excel 公式。有没有办法用公式模拟 VBA 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:09:01.887

这里有一些小功能供您使用。从您的工作表中，按**`Alt`-`F11`**进入 VBA 编辑器，插入一个新模块，粘贴以下代码，返回您的工作表并按名称使用它们，例如`=FillColor(A1)`

前两个是承诺的“3-liners”，为字体和背景颜色提供十进制值 - 虽然不是很有用

第二对将十进制数转换为RGB，返回格式为N,N,N的字符串

第三对是**数组公式**- 连续选择 3 个单元格，输入公式并按**`Ctrl`+ `Shift`+`Enter`**以获得 3 个相邻单元格中的数字 RGB 值

```
Function FillColor(Target As Range) As Variant
    FillColor = Target.Interior.Color
End Function

Function FontColor(Target As Range) As Variant
    FontColor = Target.Font.Color
End Function

Function FillColorRGB(Target As Range) As Variant
Dim N As Double

    N = Target.Interior.Color
    FillColorRGB = Str(N Mod 256) & ", " & Str(Int(N / 256) Mod 256) & ", " & Str(Int(N / 256 / 256) Mod 256)
End Function

Function FontColorRGB(Target As Range) As Variant
Dim N As Double

    N = Target.Font.Color
    FontColorRGB = Str(N Mod 256) & ", " & Str(Int(N / 256) Mod 256) & ", " & Str(Int(N / 256 / 256) Mod 256)
End Function

Function FillColorRGBArray(Target As Range) As Variant
Dim N As Double, A(3) As Integer

    N = Target.Interior.Color
    A(0) = N Mod 256
    A(1) = Int(N / 256) Mod 256
    A(2) = Int(N / 256 / 256) Mod 256
    FillColorRGBArray = A
End Function

Function FontColorRGBArray(Target As Range) As Variant
Dim N As Double, A(3) As Integer

    N = Target.Font.Color
    A(0) = N Mod 256
    A(1) = Int(N / 256) Mod 256
    A(2) = Int(N / 256 / 256) Mod 256
    FontColorRGBArray = A
End Function 
```

**请注意**：更改单元格的颜色不会通过上述函数/公式开始重新计算，因为通常不应该重新着色单元格来驱动重新计算。您必须使用**`Ctrl`+ `Alt`+ `Shift`+手动启动完全重新计算`F9`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T02:13:21.317

以下函数将显示选定单元格的 RGB 值。

```
Function CellColorValue(CellLocation As Range)
    Dim sColor As String

    Application.Volatile
    'Retrieve hex value into string sColor    
    sColor = Right("000000" & Hex(CellLocation.Interior.Color), 6)
    'Return the string Version e.g. 255,255,255 RGB color value found in 
    'Excel cell. Use in built worksheet function to convert Hex to Decimal
    'Use string function to separate Hex string into three parts
    CellColorValue = Application.WorksheetFunction.Hex2Dec(Right(sColor, 2)) & "," & application.WorksheetFunction.Hex2Dec(Mid(sColor, 3, 2)) & "," & Application.WorksheetFunction.Hex2Dec(Left(sColor, 2))
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T04:22:33.013

请尝试以下

**所做的更改：查看代码中的注释**

**模块**

```
Public Function Performance_Message(NonPreferredAvg As Single _
                                  , NonPreferredAvgname As String _
                                  , PreferredAvg As Single _
                                  , PreferredAvgname As String _
                                  , Optional Outputtype As String _
                                   ) As Variant

    Dim performancemessage As String
    Dim averagedifference As Single
    Dim stravgdif As String
    Dim cellcolor As String

    averagedifference = Abs(NonPreferredAvg - PreferredAvg)
    stravgdif = FormatPercent(averagedifference, 2)

    Select Case PreferredAvg
        Case Is < NonPreferredAvg
            performancemessage = PreferredAvgname & " Is " & stravgdif & " Less Than " & NonPreferredAvgname
            cellcolor = 4 '"green" 'Changes made

        Case Is = NonPreferredAvg
            performancemessage = PreferredAvgname & " Equals " & NonPreferredAvgname
            cellcolor = 6 '"yellow" ''Changes made

        Case Is > NonPreferredAvg
            performancemessage = PreferredAvgname & " Is " & stravgdif & " Greater Than " & NonPreferredAvgname
            cellcolor = 5 '"blue" 'Changes made
        Case Else
            performancemessage = "Something Bad Happened"
    End Select
    If Outputtype = "color" Then
        Performance_Message = cellcolor
    Else
        Performance_Message = performancemessage
    End If
End Function 
```

**工作表**

```
Private Sub Worksheet_Change(ByVal Target As Range)
  Dim myColor As Double
  myColor = Target.Value ''Changes made
  Call SetPerformancecolor(Target, myColor)
End Sub

Private Sub SetPerformancecolor(Target As Range, myColor As Double)
  Target.Interior.ColorIndex = myColor ''Changes made
End Sub 
```

# c# - 单个 ASPX 页面 - 没有代码背后 - 页面指令

> ID：14281968
> 
> 赞同：2
> 
> 时间：2013-01-11T16:04:43.817
> 
> 标签：c#, asp.net

我有一个 aspx 页面，后面没有代码，指令如下所示。

```
<%@ page title="Test" language="C#" masterpagefile="Test.master" 
autoeventwireup="true" inherits="TestScenario, TestScenario2" %> 
```

我需要在哪里查找 Inherits 属性指向的信息的代码（在 VS 中）。

继承是指哪个页面，以便我可以实际查看该页面的功能。

[这是我之前的问题https://stackoverflow.com/questions/14278082/no-code-behind-aspx-page-page-directive](https://stackoverflow.com/questions/14278082/no-code-behind-aspx-page-page-directive)的后续。

非常感谢有关单个页面（没有代码后面）如何与 Page 指令中的继承属性相关联的任何信息或几句话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:11:45.877

`TestScenario, TestScenario2`是[程序集限定类型名称](http://msdn.microsoft.com/en-us/library/vstudio/system.type.assemblyqualifiedname%28v=vs.100%29.aspx)。

查找`TestScenario`项目中调用的类，该类创建名为`TestScenario2`. 如果幸运的话，该文件将位于`TestScenario2\TestScenario.cs`，相对于您的解决方案文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:16:24.917

在 Visual Studio 中，转到 .cs 文件并键入 TestScenario 或 TestScenario2。右键单击您键入的 TestScenario 或 TestScenario2，然后单击“转到定义”。您可以查看这些类的定义位置。

但在正常情况下，当添加没有 .cs 文件的 ASP 页面时，您可以通过在 Page 指令中放置 CodeFile="~/Path" 来添加 .cs 文件。

希望能帮助到你。

# javascript - 使用 JavaScript 在 Android WebView 中选择选项

> ID：14281971
> 
> 赞同：0
> 
> 时间：2013-01-11T16:04:54.003
> 
> 标签：javascript, android, select, webview, android-webview

我正在尝试在 Android 上加载和显示的 WebView 中填充表单。填充`<input >`字段工作正常...我在 WebViewClient 的 onPageFinished 方法中执行此操作：

```
public void onPageFinished(WebView view, String url) {
    view.loadUrl("javascript:document.getElementById('input1').value='"+desired_value+"';"        );
} 
```

但是，尝试为`<select id="select1" ... >`标签选择一个选项似乎并没有像我预期的那样工作：

```
view.loadUrl("javascript:document.getElementById('select1').selected='1';"); 
```

我也试过：

```
view.loadUrl("javascript:document.getElementById('select1').value='1';"); 
```

有谁知道如何实现这一目标？如果我按下 WebView 表面上的选择，Android 会弹出一个选项的选择菜单，并且在选择后，WebView 会使用所选值更新，所以我希望可以做到这一点。此外，附加的 onChange JavaScript 函数也会执行，这也是我想要实现的。任何帮助将不胜感激。（我必须提到我没有广泛的 JavaScript 知识，所以如果有一些明显的简单答案，我深表歉意）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:17:01.740

这似乎确实有效：

```
view.loadUrl("javascript:document.getElementById('select1').value='1';"); 
```

然后手动调用 onChange 函数，该函数不会被赋值触发：

```
view.loadUrl("javascript:(function() {select1_changed(1);})()"); 
```

可能有更好的方法，但这对我现在有用。锡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-30T11:21:51.323

尝试这个 -

```
wbv.loadUrl("javascript:(function() 
{document.getElementById('select1').value='1'})()"); 
```

# random - 如何在 Scheme 中正确播种随机函数？

> ID：14281975
> 
> 赞同：1
> 
> 时间：2013-01-11T16:05:00.097
> 
> 标签：random, scheme, chicken-scheme

我的印象是，在启动 Scheme 时，`randomize`以当前时间为种子调用该过程。但是，如果我有一个仅由 组成的 Scheme 脚本`(print (random 10))`，我收到的唯一输出是`7`; 没有其他号码。那么，我做错了什么？作为记录，我正在使用鸡计划。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:19:21.527

您到底在使用什么随机库？根据[文档](http://wiki.call-cc.org/man/4/Unit%20extras)`random`，您对' 播种的假设是正确的：

> `(randomize [SEED])`：设置随机数种子。如果未提供 SEED（精确整数），则使用当前时间。在启动时（初始化 Unit extras 时），随机数生成器使用当前时间初始化。
> 
> `(random N)`：返回 [0, N-1] 中的伪随机整数。N 是一个整数。

还要注意警告，尤其是第二个似乎可以解释您所看到的行为的警告：

> **警告**：此过程在内部使用 rand(3) 并表现出其缺陷，包括低质量的伪随机性：
> 
> *   在 Windows 和 Solaris 上，只能在 [0, N-1] 范围内生成 32768 个唯一随机值。如果 N >= 32768，则结果集中会有间隙。
> *   在 Mac OS X、Windows 和其他一些平台上，附近种子的输出几乎没有变化。由于随机生成器在启动时以当前秒为种子，因此新进程可能会在长达一分钟的时间内看到相似或相同的随机序列。
> *   在 Linux 上，rand(3) 是 random(3) 的别名，它提供合理质量的输出。

# python - 无法在 Python 中添加或应用 TCL 的用户定义包

> ID：14281980
> 
> 赞同：1
> 
> 时间：2013-01-11T16:05:17.910
> 
> 标签：python, tcl

当我通过以下脚本通过 python 运行 TCL 时，我有一个需要用户定义包的 TCL 脚本：

```
import subprocess
p = subprocess.Popen(
    "tclsh tcltest.tcl",
    shell=True,
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE)
stdout, stderr = p.communicate()
print stdout
print stderr 
```

返回以下错误：

```
can't find package __teapot__

    while executing

"package require __teapot__" 
```

TCL 在 tclsh 环境下工作！我相信我的设置中有问题，python 无法识别包！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:56:28.370

我想知道环境变量是否没有明确传入。怎么样：

```
import subprocess
import os
p = subprocess.Popen(
    "tclsh tcltest.tcl",
    env=os.environ,
    shell=True,
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE)
stdout, stderr = p.communicate()
print stdout
print stderr 
```

### 更新

由于这没有任何不同，因此将以下行粘贴到 *tcltest.tcl*文件的第一行并比较输出：

```
puts ">>$auto_path<<" 
```

我怀疑这`auto_path`两种情况下的变量是不同的。这个变量是 Tcl 用来定位包的一种方式。

# c# - 沙盒化 .NET 程序集 - 上传 DLL 然后反射

> ID：14281981
> 
> 赞同：3
> 
> 时间：2013-01-11T16:05:18.283
> 
> 标签：c#, .net, assemblies, system.reflection

我想编写一个 MVC 应用程序，允许我们开发组中的某个人上传 .NET 程序集，然后我想反映 .dll 以从中收集信息。我想安全地做到这一点。从来没有在“沙箱”中加载过这样的程序集。正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:09:26.070

如果您只想检查元数据，那么您可以使用[`Assembly.ReflectionOnlyLoadFrom`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.reflectiononlyloadfrom.aspx). 使用此 API 加载程序集会加载程序集，但其中的代码均不可执行：

> 您不能从已加载到仅反射上下文的程序集中执行代码。要执行代码，请使用 LoadFile 方法加载程序集。

如果您需要能够卸载程序集，您可能希望在新的 AppDomain 中执行此操作。程序集无法卸载，但包含它们的 AppDomains 可以。

如果你需要执行一些代码，但又想确保库不会做坏事，你可以加载一个新的 AppDomain 并使用代码权限来限制 AppDomain。[这篇 CodeProject 文章](http://www.codeproject.com/Articles/120911/CAS-Code-access-security-NET-4-0-Security-model-FA)很好地介绍了如何做到这一点。

# c# - c# - 无参数构造函数中的 xml 序列化错误

> ID：14281982
> 
> 赞同：0
> 
> 时间：2013-01-11T16:05:20.430
> 
> 标签：c#, xml-serialization, biometrics

我正在尝试使用以下代码将指纹 FMD 序列化为 XML，但出现错误：

> 错误：DPUruNet.DataResult`1[DPUruNet.Fmd] 无法序列化，因为它没有无参数构造函数。

```
 public void storePrint(DataResult<Fmd> resultConversion)
        {
                //store fingerprint as byte and insert to server------------
                 using (StreamWriter myWriter = new StreamWriter("test.txt", false))
                {

                    System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(resultConversion.GetType());
                    x.Serialize(myWriter, resultConversion);
                }
                MessageBox.Show("Fingerprint Stored!");

                //------------------------------------------------------------
        }
        private void OnCaptured(CaptureResult captureResult)
        {
            try
            {
                // Check capture quality and throw an error if bad.
                if (!_sender.CheckCaptureResult(captureResult)) return;

                count++;

                DataResult<Fmd> resultConversion = FeatureExtraction.CreateFmdFromFid(captureResult.Data, Constants.Formats.Fmd.ANSI);

                SendMessage(Action.SendMessage, "A finger was captured.  \r\nCount:  " + (count));

                if (resultConversion.ResultCode != Constants.ResultCode.DP_SUCCESS)
                {
                    _sender.Reset = true;
                    throw new Exception(resultConversion.ResultCode.ToString());
                }

                preenrollmentFmds.Add(resultConversion.Data);
                //--------------------CALL METHOD
                storePrint(resultConversion);
                // 
```

类 DataResult 被引用，所以我不能改变它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:09:13.237

**更新**

如果您无权访问`DataResult<T>`该类，那么您可能必须采取一种稍微不同的方法，并用一个不同的、可序列化的类来包装这个类。你可以在这里找到一个完整的例子：

*   [如何在没有无参数构造函数的情况下对密封类进行 XML 序列化？](https://stackoverflow.com/questions/3559744/how-can-i-xml-serialize-a-sealed-class-with-no-parameterless-constructor)

* * *

**上一个答案**

错误很明显；你只需要在类中添加一个无参数的构造函数`DataResult<T>`：

```
public class DataResult<T>
{
    // Add a default constructor (public visibility, no parameters)
    public DataResult() 
    {
        // You can still define a method body if you wish,
        // no restrictions there. Just don't do anything that
        // could jeopardize the (de)serialization.
    }
} 
```

至于添加默认构造函数的含义，不知道是什么

```
FeatureExtraction.CreateFmdFromFid(...) 
```

正在创建`DataResult<Fmd>`，无法知道它是否会导致任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:03:40.727

感谢 Cory，这是一个有用的答案，但是在此示例中，还有另一种使用序列化的方法

```
tempFingerPrint = Fmd.SerializeXml(resultConversion.Data); 
```

这是特定于 Digital Persona SDK

# mysql - 存储函数 - 错误 #1064 - 反引号/刻度？

> ID：14281995
> 
> 赞同：1
> 
> 时间：2013-01-11T16:05:54.453
> 
> 标签：mysql, sql, function

我生成了以下 SQL 代码：

```
DELIMITER $$

CREATE FUNCTION flighttime (p_arrival(DATE), p_departure(DATE))
RETURNS CHAR(50)
BEGIN
    DECLARE v_hour INT;
    DECLARE v_minute INT;
    DECLARE v_htext CHAR(10);
    DECLARE v_mtext CHAR(10);
    DECLARE v_flighttime CHAR(50);
    DATEDIFF(minute, p_departure, p_arrival) AS v_minute;
    v_hour = v_minute/60;
    v_minute = v_minute-(v_hour*60);

    IF v_hour<2 AND v_minute<2 THEN SET v_htext=' hour and ' AND v_mtext=' minute';
    ELSEIF v_hour<2 AND v_minute>1 THEN SET v_htext=' hour and ' AND v_mtext=' minutes';
    ELSEIF v_hour>1 AND v_minute<2 THEN SET v_htext=' hours and ' AND v_mtext=' minute';
    ELSE SET v_htext=' hours and ' AND v_mtext=' minutes';

    SET v_flighttime = CONCAT(v_hour, v_mtext, v_minute, v_mtext);
    RETURN v_flighttime;
END

$$
DELIMITER; 
```

**更正：**

```
DELIMITER $$
CREATE FUNCTION flighttime (p_arrival DATETIME, p_departure DATETIME)
    RETURNS CHAR(70)
BEGIN
    DECLARE v_hour INT;
    DECLARE v_minute INT;
    DECLARE v_htext CHAR(15);
    DECLARE v_mtext CHAR(15);
    DECLARE v_flighttime CHAR(70);
    SET v_hour = HOUR(TIMEDIFF(p_departure, p_arrival));
    SET v_minute = MINUTE(TIMEDIFF(p_departure, p_arrival));
    IF v_hour<2 AND v_minute<2 THEN 
        SET v_htext = ' hour and ';
        SET v_mtext=' minute';
    ELSEIF v_hour<2 AND v_minute>1 THEN 
        SET v_htext=' hour and '; 
        SET v_mtext=' minutes';
    ELSEIF v_hour>1 AND v_minute<2 THEN 
        SET v_htext=' hours and ';
        SET v_mtext=' minute';
    ELSE 
        SET v_htext=' hours and ';
        SET v_mtext=' minutes';
    END IF;

    SET v_flighttime = CONCAT(v_hour, v_htext, v_minute, v_mtext);

    RETURN v_flighttime;
END $$
DELIMITER ; 
```

但我在 phpMyAdmin 3.5.2.2 中收到以下错误消息：

> `1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(DATE), p_departure(DATE)) RETURNS CHAR(50) BEGIN DECLARE v_hour INT; DECLAR' at line 1`

我之前遇到过 1064 个错误，并且大部分都能够通过使用反引号 ` 或正常 tic ' 来解决它们。不幸的是，这一次没有帮助。

此函数的目标是计算两个日期之间的差异，并以小时和分钟的形式返回该差异。还要区分单数和复数。

如果有人有解决方案或线索告诉我如何解决这个问题，我将不胜感激。

谢谢您的帮助。现在解决了（我还必须将 DATE 更改为 DATETIME :)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:07:34.330

你有无效的声明。它应该是

```
CREATE FUNCTION flighttime (p_arrival DATE, p_departure DATE)
.... 
```

那么由于值的设置无效，另一个错误很快就会出现，你应该使用`SET`

```
SET v_minute = DATEDIFF(minute, p_departure, p_arrival);
SET v_hour = v_minute/60;
SET v_minute = v_minute-(v_hour*60); 
```

完整的代码，

```
DELIMITER $$
CREATE FUNCTION flighttime (p_arrival DATE, p_departure DATE)
RETURNS CHAR(50)
BEGIN
    DECLARE v_hour INT;
    DECLARE v_minute INT;
    DECLARE v_htext CHAR(10);
    DECLARE v_mtext CHAR(10);
    DECLARE v_flighttime CHAR(50);
    SET v_minute = DATEDIFF(minute, p_departure, p_arrival);
    SET v_hour = v_minute/60;
    SET v_minute = v_minute-(v_hour*60);

    IF v_hour<2 AND v_minute<2 THEN 
        SET v_htext = ' hour and ';
        SET v_mtext=' minute';
    ELSEIF v_hour<2 AND v_minute>1 THEN 
        SET v_htext=' hour and '; 
        SET v_mtext=' minutes';
    ELSEIF v_hour>1 AND v_minute<2 THEN 
        SET v_htext=' hours and ';
        SET v_mtext=' minute';
    ELSE 
        SET v_htext=' hours and ';
        SET v_mtext=' minutes';
    END IF;

    SET v_flighttime = CONCAT(v_hour, v_mtext, v_minute, v_mtext);

    RETURN v_flighttime;
END $$
DELIMITER ; 
```

# bash - grep 使用另一个 csv 或 txt 文件作为输入的 csv 文件

> ID：14281999
> 
> 赞同：2
> 
> 时间：2013-01-11T16:06:17.590
> 
> 标签：bash, shell, csv, awk, grep

我有两个 csv 文件：

第一个，我们称之为 file1.csv，有我需要的信息，它类似于：

```
Cell,Bitrate,Loss Ratio,Retransmitted Ratio
MI456,400,0.6,2.3,....
MI457,400,0.6,2.3,...
MI458,400,0.6,2.3,...   
.
.
. 
```

第二个，file2.csv，有我需要从 file1 中提取的单元格子集，它是这样的：

```
Cell
MI400
CA500
VE600 
```

我希望我的输出是：

```
Cell,Bitrate,Loss Ratio,Retransmitted Ratio
MI400,400,0.6,2.3,....
CA500,400,0.6,2.3,...
VE600,400,0.6,2.3,... 
```

我试图使用：

```
cat file1.csv | grep -f file2.csv 
```

或 grep -f

但没有成功，你能帮帮我吗？

我正在使用 Linux 2.6.31.2 x86_64 GNU/Linux

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:11:59.563

```
awk -F, 'NR==FNR{a[$0];next} $1 in a' file2.csv file1.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:15:18.137

这会将 file1.csv 中的第一列替换为 file2.csv 的内容：

```
cut -d',' -f2- file1.csv | paste -d',' file2.csv - 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:27:37.543

也许您`-f`以错误的方式使用该选项

这是一个例子：

文件1：

```
Cell,Bitrate,Loss Ratio,Retransmitted Ratio
MI456,400,0.6,2.3,....
MI457,400,0.6,2.3,...
MI458,400,0.6,2.3,...
MI465,400,0.6,2.3,...
MI477,400,0.6,2.3,... 
```

文件2：

```
MI456
MI457
MI465 
```

grep：

```
grep -f file2 file1
MI456,400,0.6,2.3,....
MI457,400,0.6,2.3,...
MI465,400,0.6,2.3,... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:46:03.503

```
{
  sed 1q file1.csv
  join -t, <(sed 1d file1.csv | sort) <(sed 1d file2.csv | sort)
} > newfile.csv 
```

`join`需要对输入文件进行排序。我`sed`用来删除进程替换中的标题行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T16:17:57.330

```
for FOO in `cat file2.csv`; do
    grep "^$FOO" file1.csv
done 
```

如果 file2.csv 有很多行，这将非常慢。