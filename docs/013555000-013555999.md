# StackOverflow 问答 13555000-13555999

# c++ - 将 QLabel 作为参数传递 Qt C++

> ID：13555004
> 
> 赞同：0
> 
> 时间：2012-11-25T20:10:10.947
> 
> 标签：c++, qt, parameters, qlabel, qtimer

我有一个小 GIF，它在 a上`QLabel`带有. 我试过这个，但它不起作用：`QMovie``Qlabel`

```
QMovie *movie = new QMovie("countdown.gif");
QLabel *processLabel = new QLabel(this);
processLabel->setMovie(movie);
movie->start();

QTimer::singleShot(1000, this, SLOT(movie_finished(backgroundLabel))); 
```

这是我的功能：

```
void movie_finished(QLabel *processLabel){
    processLabel->deleteLater();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:05:48.620

基本的误解，这是非法的：

```
QTimer::singleShot(1000, this, SLOT(movie_finished(backgroundLabel))); 
```

您不能将这样的参数提供给连接。只需输入`SLOT`，如下所示：

```
QTimer::singleShot(1000, this, SLOT(movie_finished(QLabel*))); 
```

有（至少）三种方法可以解决这个问题。首先`QLabel*`从插槽中删除参数。然后：

*   使用[QSignalMapper](http://qt-project.org/doc/qt-4.8/qsignalmapper.html)，它基本上封装了以下两种选择。
*   在某个类中创建一个中间槽，该槽具有 QLabel* 成员变量，然后在槽中使用它而不带参数，并将计时器信号连接到该槽。
*   在您的插槽中使用[`sender()`](http://qt-project.org/doc/qt-4.8/qobject.html#sender)方法（但这通常被认为是丑陋的，破坏封装，并且首选 QSignalMapper）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:15:20.497

这里不需要使用 QTimer 来同步电影的结尾。

实现这一点的真正简单方法是让电影在完成后删除标签：

```
connect(movie, SIGNAL(finished()), processLabel, SLOT(deleteLater())); 
```

QMovie 将`finished()`在完成后发出。因此，只需将其连接到`deleteLater()`QLabel 的插槽即可。

因为这可能会使您在删除 QLabel 时泄漏 QMovie，所以您可能希望将其作为 QLabel 的父级，因为将其设置为电影并不意味着 QLabel 实际上会清理它。

```
QLabel *processLabel = new QLabel(this);
QMovie *movie = new QMovie("countdown.gif");
movie->setParent(processLabel); 
```

# css - 我的 CSS 嵌套有什么问题

> ID：13555006
> 
> 赞同：0
> 
> 时间：2012-11-25T20:10:37.713
> 
> 标签：css, html, nested

基本上我正在做一些事情，直到今天一切都很好，但我和其他人一起工作，昨晚文件被编辑了，所以当我更新我的颠覆时，事情变得有点梨形了！基本上我需要弄清楚我的嵌套 div 发生了什么，它们不再嵌套，我花了一整天的时间试图修复它，所以希望有人能告诉我发生了什么！

```
<div id="navbar">

    <!--<div id="notification-icon">

    </div><!--End of notification icon-->

    <!--<ul id="nav-icons">

            <li><a href="#" class="notifyMe"></a></li>

            <li><a href="ProfileFeed.php"><img src="images/home-icon.png" alt="Home" /></a></li>

            </ul><!--End of navigation icons-->

            <div id=searchBar><!--start of search bar div-->
                    <input type="text" name="inputString" id="inputString" onkeyup="lookup(this.value);" onblur="fill();" placeholder="Search People"/>
                    <div class="suggestionBox" id="suggestionBox" >
                        <!-- <img src="images/upArrow.png" style="position:relative; top:-12px; left:30px;" align="left"/> -->
                        <div align="left" class="suggestionList" id="autoSuggestionsList"></div>
                    </div> <!--end of suggestionBox-->

            </div><!--end of search bar-->

            </div><!--End of navbar-->

        </div><!--end of topbar--> 
```

```
 <div id="prof-wrapper">

    <div class="prof-content-main">

 <div id="left_col">

 </div><!--end of left-col-->

 <div id="right_col">

 </div><!--end of right-col-->

 </div><!--End of content-main-->

</div><!--End of Wrapper-->

<script type="text/javascript" src="js/jquery.transit.min.js"></script>
    <script type="text/javascript" src="js/jquery.gridrotator.js"></script>
    <script type="text/javascript"> 
        $(function() {

            $( '#ri-grid' ).gridrotator( {
                rows    : 2,
                columns : 3,
                w1024           : {
                    rows    : 3,
                    columns : 3
                },
                w320    : {
                    rows    : 2,
                    columns : 3
                },
                w240    : {
                    rows    : 2,
                    columns : 3
                }
            } );

        });
    </script> 
```

我不太确定如何格式化我的 css 来发布它，但我附上了这个小提琴中发生的事情的一个非常精简的版本：http: [//jsfiddle.net/DannyW86/ZMScG/](http://jsfiddle.net/DannyW86/ZMScG/)

您可以看到，由于某种原因，我的包装器没有包裹住我让它只是位于顶部并重叠一点的两列！在这一点上真的让我很生气！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:14:40.687

这只是浮动的问题，你可以有两种方法，或者在你的 HTML 中添加这个来清除浮动

[**演示**](http://jsfiddle.net/ZMScG/1/)

```
<div style="clear: both;"></div> 
```

或者`overflow: hidden;`添加`#prof-wrapper`

[**溢出演示**](http://jsfiddle.net/ZMScG/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:21:47.470

问题是 left_col 和 right_col div 是浮动的，这会阻止包含的 div 扩展到它们的高度。

在带有 clear:both 的浮动元素之后使用空 div

```
<div style="clear: both;"></div> 
```

或者不需要任何空 div的 CSS [clearfix解决方案，因此形成了更好的标记。](http://www.webtoolkit.info/css-clearfix.html)

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

使用此解决方案，您可以将 clearfix 类添加到包含/包装 div。

# assembly - 数据中来自 .asciiz 的 MIPS lw

> ID：13555007
> 
> 赞同：3
> 
> 时间：2012-11-25T20:10:41.073
> 
> 标签：assembly, mips

我正在尝试将 .asciiz 参数加载到寄存器中，但出现错误，
代码：

```
.data

    stp:
    .asciiz "stop"

.text

.globl main

main:

la $t1, stp
lw $t1, 0($t1) 
```

我得到一个例外： inst/data fetch 中未对齐的地址，

有没有办法将 .ascii 作为单词加载到寄存器中？

我想将输入变量与保存在 stp 中的文本进行比较，
我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:19:55.667

您可能分别需要符号或零扩展字节大小的负载`lb`或指令。`lbu`

如果要将所有 4 个字符作为一个单词加载，则通过添加适当的汇编程序指令（例如`.align 2`）确保字符串对齐。或者，使用`ulw`汇编程序将转换为正确序列的伪指令。

# virtual-machine - VirtualBox 从来宾内部恢复为快照

> ID：13555009
> 
> 赞同：1
> 
> 时间：2012-11-25T20:10:49.290
> 
> 标签：virtual-machine, virtualbox, snapshot

有没有办法从 VBox 来宾机器中恢复快照？

我有一台托管许多机器的 Windows 机器。目前我们正在使用 Ubuntu 来宾处理某些东西，为了恢复快照而不得不不断切换机器真的很痛苦。

我的想法是将机器设置为“基本”状态，每次我想进入该状态时，我只需输入一些命令，例如：

```
revertbase 
```

机器将在上一个快照中重新启动，我只需要重新启动 ssh 即可继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:16:42.750

您不能对正在运行的机器进行快照，您必须先将其冻结，所以我的猜测是主机本身无法做到这一点。

在主机中，您可以从命令行使用 VBoxManage 执行此操作。

该文件位于

> 程序文件/Oracle/VirtualBox/VBoxManage.exe

并用作 VirtualBox 的命令行界面。

使用命令：

```
VBoxManage snapshot "MachineName" take SnapShotName 
```

之后他们：

```
VBoxManage snapshot "MachineName" discardcurrent -state 
```

要返回上一个状态，请阅读下面的文本以获取更多信息，以便轻松访问 VBoxManage 将其添加到您的路径中：

```
PATH=%PATH%;c:\Program Files\Oracle\VirtualBox 
```

取自：[http ://www.linux.com/news/enterprise/systems-management/8224-secrets-for-controlling-virtualbox-from-the-command-line](http://www.linux.com/news/enterprise/systems-management/8224-secrets-for-controlling-virtualbox-from-the-command-line)

管理快照

虚拟化软件最有用的功能之一是它能够拍摄虚拟机的快照。在对其进行更改之前拍摄 VM 的快照始终是一个好主意。快照有助于在硬件层面恢复因硬件配置更改而无法使用的系统，在软件层面，它们可防止因意外删除或病毒导致的数据丢失。

从 VirtualBox CLI 拍摄快照是小菜一碟。VBoxManage 快照“Fedora”拍摄 snap1-stable-system 在一切正常时拍摄稳定的 Fedora VM 的快照。保存快照可能需要一些时间，具体取决于 VM 和主机上的资源。为确保您在拍摄快照时不会对系统进行更改，VirtualBox 将整个 VM 界面显示为灰色，并且在保存快照之前您无法使用它。

有了稳定的快照，继续玩系统吧。如果您遇到问题并且您的机器无法启动或开始出现异常行为，您可以恢复到稳定机器的快照。为此，首先使用 VBoxManage controlvm "Fedora" poweroff 关闭 VM，然后使用 VBoxManage snapshot "Fedora" discardcurrent -state 恢复到上一个​​快照。如果您有多个快照，您可以使用 -all 开关而不是 -state 恢复到最后一个快照。

当然，当您恢复到旧状态时，自拍摄快照以来所做的所有更改都会丢失，包括所有配置更改以及对旧文件和新文件的更改。您可以通过指定数据应存储在“直写”磁盘上来解决此问题，该磁盘的行为类似于普通磁盘，但不受快照的影响。换句话说，当您拍摄快照时，VirtualBox 会忽略直写磁盘。您可以在该磁盘上存储所有重要数据和文件或完整的 /home 目录。

¬†</p>

要添加直写磁盘，请在使用 createvdi 创建新磁盘时使用 -type writethrough 选项。您还可以更改之前创建的磁盘并使其写入。为此，首先使用 VBoxManage modifyvm "Fedora" -hdb none 将其从 VM 中取消附加，然后使用 VBoxManage unregisterimage diskfourgig 取消注册（使用系统上的磁盘名称代替fourgig）。现在再次注册它，但使用 VBoxManage registerimage disk "fourgig" 类型的直写作为直写磁盘。最后，使用 VBoxManage modifyvm "Fedora" -hdbfourgig 将其附加回 VM。

现在您可以安全地将数据保存在此磁盘上，无论虚拟机处于何种状态，数据都将始终是安全的。但请记住不要恢复到创建此磁盘之前保存的状态；如果这样做，VirtualBox 将简单地删除磁盘，因为它在该状态下不存在。此外，VirtualBox 目前不允许您为连接了 writethrough 磁盘的 VM 拍摄快照，因此您必须在保存 VM 的状态然后重新连接之前取消连接 writethrough 磁盘。我希望在即将推出的 VirtualBox 版本中，直写磁盘的存在不会对快照过程产生影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T17:20:26.160

更新的答案。你仍然不能直接从客人那里做。

您可以通过共享驱动器/文件夹和在主机上运行的脚本触发主机重新启动来宾，该脚本将在更新共享文件时重新加载来宾。

包括我的 Windows 脚本来重新启动来宾。Canesin 给出的命令对我不起作用。我在 CMD 文件中有以下内容。

```
PATH=%PATH%;c:\Program Files\Oracle\VirtualBox
vboxmanage controlvm "DEMO" poweroff
timeout /t 10
vboxmanage snapshot "DEMO" restorecurrent
timeout /t 10
vboxmanage startvm "DEMO" 
```

# sql - SQL如何查询它们之间没有关系的2个表

> ID：13555010
> 
> 赞同：0
> 
> 时间：2012-11-25T20:10:56.487
> 
> 标签：sql, sql-server, join, multi-table

我有 2 张桌子。

我需要的输出是：

1.  供应商_id
2.  供应商名称
3.  Grade_id
4.  年级名
5.  顾客姓名
6.  客户ID

我正在使用的查询是：

```
select distinct gs.Supplier_id,s.supplier_name,gs.Grade_id,g.grade_name,
c.customer_name,c.customer_id
 from tbl_Customer c, tbl_GradeSupplier gs
left join tbl_Suppliers s on s.supplier_ID = gs.Supplier_id
left join tbl_Grades g on g.grade_id = gs.Grade_id 
```

但是现在我需要在此查询的返回中添加有效的最高日期，其中每个日期在当前日期之前以及该日期的旧价格此信息可以在包含的价格表中找到

```
price_id    grade_id    supplier_id price_purchase_value    price_validfromdate customer_id price_sell_value    price_deleted
41  8   24  2190.00 2012-09-09 00:00:00.000 4   2280.00 NULL 
```

我试图这样做：

```
select distinct gs.Supplier_id,s.supplier_name,gs.Grade_id,g.grade_name,
c.customer_name,c.customer_id
 from tbl_Customer c, tbl_GradeSupplier gs
left join tbl_Suppliers s on s.supplier_ID = gs.Supplier_id
left join tbl_Grades g on g.grade_id = gs.Grade_id
inner join
(select  grade_id,customer_id,max(price_validfromdate) as validfrom
 from  tbl_Prices a
where price_validfromdate <= GETDATE()
group by supplier_id,grade_id,customer_id) prices
on prices.customer_id = c.customer_id and prices.grade_id = gs.Grade_id 
```

这给了我这个错误：无法绑定多部分标识符“c.customer_id”。

有任何想法吗？

# php - 从 wikisource.org 站点获取数据

> ID：13555013
> 
> 赞同：0
> 
> 时间：2012-11-25T20:11:23.990
> 
> 标签：php, wikimedia

我正在尝试从该站点获取邮政编码：

[http://pl.wikisource.org/wiki/Lista_kod%C3%B3w_pocztowych_w_Polsce](http://pl.wikisource.org/wiki/Lista_kod%C3%B3w_pocztowych_w_Polsce)

我的代码很简单：

```
 <?php
    $postalCode = $_GET['code'];

    $httpAddr = 'http://pl.wikisource.org/wiki/Lista_kod%C3%B3w_pocztowych_w_Polsce/Okr%C4%99g_'.$postalCode[0].'_'.$postalCode[0].$postalCode[1].'-xxx';

    file_get_contents($httpAddr);
    ?> 
```

但是，当我将 $postalCode 设置为 03-000（也是 01-000、05-000，但对于 07-000、61-000、62-000 有效）时，我收到错误消息：

```
Warning: file_get_contents(http://pl.wikisource.org/wiki/Lista_kod%C3%B3w_pocztowych_w_Polsce/Okr%C4%99g_0_03-xxx): failed to open stream: HTTP request failed! HTTP/1.0 403 Forbidden in /var/www/clients/client1/web4/web/ofix/test.php on line 5 
```

页面地址正确，您可以在网络浏览器中复制并粘贴它，它可以工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:05:36.400

正如 Orbit 中的 Lightness Races 所怀疑的那样，网络服务器似乎确实阻止了 PHP 的请求。

使用[cURL](http://www.php.net/manual/en/book.curl.php)而不是`file_get_contents()`揭示细节：

> `HTTP/1.0 403 Forbidden`
> 脚本应使用包含联系信息的用户代理字符串，否则它们可能会被 IP 阻止，恕不另行通知。

Web 浏览器在其请求中发送一个有效的 User-Agent 标头，这就是页面在您的浏览器中加载正常但在 PHP 中加载不正常的原因。

在我在 PHP 中加载此 URL 的测试中，有时它会以 200 的 HTTP 状态代码成功，有时它会以 403 失败。请注意，错误消息说脚本**可能**被阻止（即，有时它们可​​能不会被阻止）。

**编辑**

有关更多信息，请参阅此问题：[如何使用 PHP 从 Wikipedia API 获取结果？](https://stackoverflow.com/questions/8956331/how-to-get-results-from-the-wikipedia-api-with-php)

# c++ - 由两点组成的排序线段

> ID：13555017
> 
> 赞同：0
> 
> 时间：2012-11-25T20:11:52.820
> 
> 标签：c++, graphics, operators, line

我将如何为包含起点和终点的线段实现 ​​operator<。我想将线段插入到地图中，因此顺序不需要是语义的，但它应该适用于所有情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:18:03.157

按字典顺序对所有内容进行排序：

```
struct Point { int x; int y; };

bool operator<(Point const & a, Point const & b)
{
    return (a.x < b.x) || (!(b.x < a.x) && (a.y < b.y));
} 
```

或者使用现成的比较器`tuple`：

```
#include <tuple>

// ...

return std::tie(a.x, a.y) < std::tie(b.x, b.y); 
```

或者实际上将 a`std::tuple<int, int>`用于您的积分并且什么都不做！

然后，对这些行执行相同的操作：

```
struct LineSegment { Point x; Point y; };

// repeat same code as above, e.g.

bool operator<(LineSegment const & a, LineSegment const & b)
{
    return std::tie(a.x, a.y) < std::tie(b.x, b.y);
} 
```

重复一遍，no-work-at-all 解决方案一直使用元组：

```
typedef std::tuple<int, int> Point;
typedef std::tuple<Point, Point> LineSegment;
// everything "just works" 
```

# c# - 特定显示器上位置的窗口句柄列表

> ID：13555020
> 
> 赞同：0
> 
> 时间：2012-11-25T20:12:05.327
> 
> 标签：c#, winapi, multiple-monitors

目前，我在处理双屏配置的 ac# 项目中使用 WinAPI。我的问题很简单：如何在特定监视器上获取大约 75% 大小的所有窗口句柄的列表？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:25:31.477

要获得具有最大窗口部分的屏幕，您可以使用以下命令：

```
System.Windows.Forms.Screen screen = System.Windows.Forms.Screen.FromHandle(form.Handle); 
```

然后你只需要计算这个屏幕上有多少%。

```
Rectangle screenBounds = screen.Bounds;
Rectangle formBounds = form.Bounds;

Rectangle intersection = formBounds.Intersect(screenBounds);
int formArea = formBounds.Width * formBounds.Height;
int intersectArea = intersection.Width * intersection.Height;

int percent = intersectArea * 100 / formArea; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:51:41.993

好的，我创建了一个更通用的版本，可以使用任何窗口句柄。谢谢大家的答案！

```
//Get the Screen object where the Hwnd handle is
System.Windows.Forms.Screen screen = System.Windows.Forms.Screen.FromHandle(Hwnd);

//Create rectangles object
Rectangle screenBound = screen.Bounds;
RECT handleRect = new RECT();

//Get dimensions of the Hwnd handle /!\ don't pass a Rectangle object
if (!GetWindowRect(Hwnd, ref handleRect))
{
    //ERROR
}

//Getting the intersection between the two rectangles
Rectangle handleBound = new Rectangle(handleRect.Left, handleRect.Top,                 handleRect.Right-handleRect.Left, handleRect.Bottom-handleRect.Top);

Rectangle intersection = Rectangle.Intersect(screenBound, handleBound);

//Get the area of the handle
int formArea = handleBound.Width * handleBound.Height;

//Get the area of the intersection
int intersectArea = intersection.Width * intersection.Height;

//Calculate percentage
int percentage = intersectArea * 100 / formArea; 
```

这是 RECT 结构：

```
 [StructLayout(LayoutKind.Sequential)]
    private struct RECT
    {
        public int Left;        // x position of upper-left corner
        public int Top;         // y position of upper-left corner
        public int Right;       // x position of lower-right corner
        public int Bottom;      // y position of lower-right corner
    } 
```

# machine-learning - 文档分类的监督潜在狄利克雷分配？

> ID：13555021
> 
> 赞同：13
> 
> 时间：2012-11-25T20:12:20.140
> 
> 标签：machine-learning, nlp, classification, document-classification, lda

我在某些组中有一堆已经被人类分类的文件。

是否有修改版本的 lda 可以用来训练模型，然后用它对未知文档进行分类？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T10:26:48.767

就其价值而言，LDA 作为分类器将相当薄弱，因为它是一个生成模型，而分类是一个判别问题。有一个 LDA 的变体称为[监督 LDA](http://www.cs.columbia.edu/%7Eblei/papers/BleiMcAuliffe2007.pdf)，它使用更具区分性的标准来形成主题（您可以在各个地方获得此来源），还有一篇论文具有[最大边距](http://people.ee.duke.edu/%7Elcarin/MedLDA.pdf)公式，我不知道它的状态源代码方面。除非您确定这是您想要的，否则我会避免使用 Labeled LDA 公式，因为它对分类问题中主题和类别之间的对应关系做出了强有力的假设。

然而，值得指出的是，这些方法都没有直接使用主题模型来进行分类。相反，他们使用文档，而不是使用基于单词的特征，而是使用主题的后验（文档推理产生的向量）作为其特征表示，然后将其馈送到分类器，通常是线性 SVM。这将为您提供基于主题模型的降维，然后是强大的判别分类器，这可能是您所追求的。此管道可使用流行的工具包以大多数语言提供。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-25T19:28:14.947

您可以使用 PyMC 实现**监督 LDA**，它使用 Metropolis 采样器来学习以下图形模型中的潜在变量： [![sLDA图形模型](../Images/1a569f7cc098376e35f36c72507dd064.png)](https://i.stack.imgur.com/G4zo1.png)

训练语料库包含 10 条电影评论（5 条正面和 5 条负面）以及每个文档的相关星级。星级评级被称为响应变量，它是与每个文档相关的感兴趣的数量。文档和响应变量被联合建模，以便找到最能预测未来未标记文档的响应变量的潜在主题。有关更多信息，请查看[原始论文](https://arxiv.org/pdf/1003.0783.pdf)。考虑以下代码：

```
import pymc as pm
import numpy as np
from sklearn.feature_extraction.text import TfidfVectorizer

train_corpus = ["exploitative and largely devoid of the depth or sophistication ",
                "simplistic silly and tedious",
                "it's so laddish and juvenile only teenage boys could possibly find it funny",
                "it shows that some studios firmly believe that people have lost the ability to think",
                "our culture is headed down the toilet with the ferocity of a frozen burrito",
                "offers that rare combination of entertainment and education",
                "the film provides some great insight",
                "this is a film well worth seeing",
                "a masterpiece four years in the making",
                "offers a breath of the fresh air of true sophistication"]
test_corpus =  ["this is a really positive review, great film"]
train_response = np.array([3, 1, 3, 2, 1, 5, 4, 4, 5, 5]) - 3

#LDA parameters
num_features = 1000  #vocabulary size
num_topics = 4       #fixed for LDA

tfidf = TfidfVectorizer(max_features = num_features, max_df=0.95, min_df=0, stop_words = 'english')

#generate tf-idf term-document matrix
A_tfidf_sp = tfidf.fit_transform(train_corpus)  #size D x V

print "number of docs: %d" %A_tfidf_sp.shape[0]
print "dictionary size: %d" %A_tfidf_sp.shape[1]

#tf-idf dictionary    
tfidf_dict = tfidf.get_feature_names()

K = num_topics # number of topics
V = A_tfidf_sp.shape[1] # number of words
D = A_tfidf_sp.shape[0] # number of documents

data = A_tfidf_sp.toarray()

#Supervised LDA Graphical Model
Wd = [len(doc) for doc in data]        
alpha = np.ones(K)
beta = np.ones(V)

theta = pm.Container([pm.CompletedDirichlet("theta_%s" % i, pm.Dirichlet("ptheta_%s" % i, theta=alpha)) for i in range(D)])
phi = pm.Container([pm.CompletedDirichlet("phi_%s" % k, pm.Dirichlet("pphi_%s" % k, theta=beta)) for k in range(K)])    

z = pm.Container([pm.Categorical('z_%s' % d, p = theta[d], size=Wd[d], value=np.random.randint(K, size=Wd[d])) for d in range(D)])

@pm.deterministic
def zbar(z=z):    
    zbar_list = []
    for i in range(len(z)):
        hist, bin_edges = np.histogram(z[i], bins=K)
        zbar_list.append(hist / float(np.sum(hist)))                
    return pm.Container(zbar_list)

eta = pm.Container([pm.Normal("eta_%s" % k, mu=0, tau=1.0/10**2) for k in range(K)])
y_tau = pm.Gamma("tau", alpha=0.1, beta=0.1)

@pm.deterministic
def y_mu(eta=eta, zbar=zbar):
    y_mu_list = []
    for i in range(len(zbar)):
        y_mu_list.append(np.dot(eta, zbar[i]))
    return pm.Container(y_mu_list)

#response likelihood
y = pm.Container([pm.Normal("y_%s" % d, mu=y_mu[d], tau=y_tau, value=train_response[d], observed=True) for d in range(D)])

# cannot use p=phi[z[d][i]] here since phi is an ordinary list while z[d][i] is stochastic
w = pm.Container([pm.Categorical("w_%i_%i" % (d,i), p = pm.Lambda('phi_z_%i_%i' % (d,i), lambda z=z[d][i], phi=phi: phi[z]),
                  value=data[d][i], observed=True) for d in range(D) for i in range(Wd[d])])

model = pm.Model([theta, phi, z, eta, y, w])
mcmc = pm.MCMC(model)
mcmc.sample(iter=1000, burn=100, thin=2)

#visualize topics    
phi0_samples = np.squeeze(mcmc.trace('phi_0')[:])
phi1_samples = np.squeeze(mcmc.trace('phi_1')[:])
phi2_samples = np.squeeze(mcmc.trace('phi_2')[:])
phi3_samples = np.squeeze(mcmc.trace('phi_3')[:])
ax = plt.subplot(221)
plt.bar(np.arange(V), phi0_samples[-1,:])
ax = plt.subplot(222)
plt.bar(np.arange(V), phi1_samples[-1,:])
ax = plt.subplot(223)
plt.bar(np.arange(V), phi2_samples[-1,:])
ax = plt.subplot(224)
plt.bar(np.arange(V), phi3_samples[-1,:])
plt.show() 
```

给定训练数据（观察到的词和响应变量），我们可以学习全局主题（beta）和回归系数（eta），以预测响应变量（Y）以及每个文档的主题比例（theta）。为了在给定学习的 beta 和 eta 的情况下对 Y 进行预测，我们可以定义一个不观察 Y 的新模型，并使用先前学习的 beta 和 eta 来获得以下结果：

[![sLDA 预测](../Images/515c95274ac183032132095cd77ebdb6.png)](https://i.stack.imgur.com/IGeSL.png)

在这里，我们预测了测试语料库的正面评论（大约 2 条评论评分范围为 -2 到 2），其中包含一句话：“这是一篇非常正面的评论，很棒的电影”，如后验直方图的模式所示正确的。有关完整的实现，请参阅[ipython 笔记本。](https://github.com/vsmolyakov/experiments_with_python/blob/master/chp01/supervised_lda.ipynb)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T21:59:44.313

是的，您可以在 [http://nlp.stanford.edu/software/tmt/tmt-0.4/的 stanford 解析器中尝试 Labeled LDA](http://nlp.stanford.edu/software/tmt/tmt-0.4/)

# python - Python中的线程，参数发送到线程

> ID：13555025
> 
> 赞同：2
> 
> 时间：2012-11-25T20:12:38.800
> 
> 标签：python, multithreading

我正在尝试运行两个线程，每个线程都有一个传递给它的参数来处理。但是，似乎线程是按顺序运行的，而不是并行运行的。见证：

```
$ cat threading-stackoverflow.py 
import threading

class CallSomebody (threading.Thread):
        def __init__(self, target, *args):
                self._target = target
                self._args = args
                threading.Thread.__init__(self)

        def run (self):
                self._target(*self._args)

def call (who):
        while True:
                print "Who you gonna call? %s" % (str(who))

a=CallSomebody(call, 'Ghostbusters!')
a.daemon=True
a.start()
a.join()

b=CallSomebody(call, 'The Exorcist!')
b.daemon=True
b.start()
b.join()

$ python threading-stackoverflow.py 
Who you gonna call? Ghostbusters!
Who you gonna call? Ghostbusters!
Who you gonna call? Ghostbusters!
Who you gonna call? Ghostbusters!
Who you gonna call? Ghostbusters!
Who you gonna call? Ghostbusters!
Who you gonna call? Ghostbusters! 
```

我希望有一些线路返回`Ghostbusters!`，而另一些线​​路返回`The Exorcist!`，但是`Ghostbusters!`线路永远持续下去。为了让每个线程获得一些处理器时间，必须重构什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:14:53.007

`a.join()`这是你的问题：之前打电话`b.start()`

你想要更多类似的东西：

```
a=CallSomebody(call, 'Ghostbusters!')
a.daemon=True
b=CallSomebody(call, 'The Exorcist!')
b.daemon=True
a.start()
b.start()
a.join()
b.join() 
```

# java - 安全管理器与访问控制器

> ID：13555026
> 
> 赞同：3
> 
> 时间：2012-11-25T20:12:43.167
> 
> 标签：java, security

我试图阻止玩家的某些操作，但不是我的游戏基础设施，为此我正在使用安全管理器。看起来像这样

```
public class GameSecurityManager extends SecurityManager {
@Override
public void checkPackageAccess(String pkg) {
 super.checkPackageAccess(pkg);
 if (isPlayer()) {
  if (pkg.startsWith("ca.hilikus.jrobocom")) {
   if (!"ca.hilikus.jrobocom.player".equals(pkg) && !"ca.hilikus.jrobocom.robot.api".equals(pkg)) {
        throw new SecurityException("No access to game packages");
   }}}
}
} 
```

关于安全管理器的文档非常稀少，大部分来自 90 年代。AccessController 的情况更糟。但是，我确实找到[了这一点，第 6.2 节](http://docs.oracle.com/javase/1.4.2/docs/guide/security/spec/security-spec.doc6.html)指出

> 我们鼓励在应用程序代码中使用 AccessController，而自定义安全管理器（通过子类化）应该是最后的手段，并且应该非常小心。

你同意这个说法吗？有人可以解释为什么会这样吗？如果是这种情况，*我将如何完成与我粘贴的示例代码类似的事情*？我试图阻止诸如反射、线程化和基于上下文实例化一些对象之类的事情（`isPlayer()`如上所示）。访问控制 javadoc 讨论的唯一内容是特殊代码块中的特权操作，但*它没有显示如何使用控制器来实际阻止操作*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-10T10:13:58.917

引用[Inside Java 2 Platform Security](https://rads.stackoverflow.com/amzn/click/com/0201787911)一书的“6.4.9 `SecurityManager`vs ”部分：`AccessController`

> 回想本章前面的区别，当调用安全检查时，调用`checkPermission`和调用类中定义的其他`check`方法之间的区别`SecurityManager`。那时的选择取决于您是否依赖于任何 Java 2 之前的安全管理器类。现在您有另一种选择：调用中`checkPermission`定义的方法`SecurityManager`或中定义的方法`AccessController`。这些方法在**两个主要方面**有所不同。
> 
> 首先，有时没有安装`SecurityManager`存在，所以你不能在它上面调用`check`或`checkPermission`方法。相比之下，中的静态方法`AccessController`总是可以调用的。回想一下调用的以下成语`SecurityManager`：
> 
> ```
> SecurityManager sm = System.getSecurityManager();
> if (sm != null)
>     sm.checkPermission(permission); 
> ```
> 
> 但你总是可以打电话
> 
> ```
> AccessController.checkPermission(permission); 
> ```
> 
> 因此，无论是否`SecurityManager`安装了系统范围，如果您想确保始终调用安全检查，您应该调用`AccessController`. 但是请注意，一些现有应用程序会测试是否安装了`SecurityManager`. 然后，根据表示一种或其他安全状态的测试结果，这些应用程序采取不同的操作。对于这些应用程序的向后兼容性，调用`SecurityManager`更为合适。
> 
> 第二个区别是调用`SecurityManager`不保证特定的访问控制算法；有人可能已经扩展它并安装了自定义安全管理器。相比之下，调用`AccessController`保证使用前面指定的完全访问控制算法。因此，如果您不想将安全检查委托给自定义安全管理器，则应`AccessController`直接调用。否则，调用`SecurityManager`.
> 
> 另外，请注意，由于`SecurityManager`该类定义了用于安全检查的通用接口，它不提供`AccessController`已定义的特权机制。事实上，如果您在代码中使用特权机制，但后来调用`SecurityManager`执行安全检查，如果您安装的安全管理器不是 Java 2 提供的并且不咨询`AccessController`或其相等的。
> 
> 您可能想知道为什么我们提供这些选择。一种做事方式还不够好吗？这些选择基于经验。需要在通用性和一致性之间进行平衡权衡。从长远来看，我们预计不会经常需要自定义安全管理器，并且即使定义了它们，它们也将建立在`AccessController`. 特别是，它们将提供额外的功能，而不是促进不兼容的行为。然而，在一个必须强制执行完全不同类型的安全策略的特殊环境中，可以想象，定制的安全管理器可能无法使用由`AccessController`.

您还可以查看Oracle 的 Java 平台标准版**安全开发人员指南中的**[SecurityManager 与 AccessController](https://docs.oracle.com/en/java/javase/11/security/java-se-platform-security-architecture.html#GUID-B83ECC0C-02AB-497A-B07D-D74AB9572DC7)部分。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:25:32.133

您不需要编写自己的 SecurityManager 或自己的 AccessController，您需要的是自定义[Permission](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/Permission.html)。在你写完一个之后，你只需要启动一个 SecurityManager 并在你想要保护的每个方法中进行安全检查！您可能需要执行特权操作以避免过多的检查传播。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T05:33:46.807

（为了未来用户的利益）

答案是您应该为应用程序提供安全策略。如果这是无法控制的，那么你就是不走运。

在策略中，您将授予对“托管扩展”的某些合适子集的访问权限，而您的“游戏包”将被授予 AllPermissions。然后，您为您的库创建权限并授予对“托管扩展”的适当访问权限。

然后在您的 API 中，您会执行以下操作；

```
`public String someMethod( String someArg )
{
    if( System.getSecurityManager() == null )
        return internalSomeMethod( someArg );
    MyPermission required = new MyPermission( "whatever" );
    AccessController.checkPermission( required );
    return AccessController.doPrivileged(new PrivilegedAction<String>()
    {
        public String run()
        {
            return internalSomeMethod( somArg );
        }
    } );
}

private String someInternalMethod( String someArg ){...}` 
```

`因此，即使“托管扩展”只有“MyPermission”，游戏引擎也可以拥有 AllPermissions 并允许做它想做的任何事情，而“扩展”甚至无法读取系统属性。`**

# android - 如何使用自定义视图显示单选 AlertDialog？

> ID：13555027
> 
> 赞同：2
> 
> 时间：2012-11-25T20:12:50.030
> 
> 标签：android, listview, android-alertdialog

我需要使用单选制作自定义 AlertDialog，但没有单选按钮，并且每个项目中有两个自定义 TextView。我尝试使用 AlertDialog：

```
ArrayList<HashMap<String,String>> items=new ArrayList<HashMap<String,String>>();
//..here I fill my ArrayList
SimpleAdapter simpleAdapter=new SimpleAdapter(this, items, R.layout.list_item, new String[] {"name","count"}, new int[] {R.id.name,R.id.count});

AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);
alert.setSingleChoiceItems(simpleAdapter, -1, new OnClickListener() {
    @Override
    public void onClick(DialogInterface arg0, int arg1) {
        //Here I handle click
    }});
alert.show(); 
```

但是点击项目后它不会关闭。为什么？可能我可以修复它吗？

或者，我尝试使用 Dialog ：

```
ArrayList<HashMap<String,String>> items=new ArrayList<HashMap<String,String>>();
//..here I fill my ArrayList
SimpleAdapter simpleAdapter=new SimpleAdapter(this, items, R.layout.list_item, new String[] {"name","count"}, new int[] {R.id.name,R.id.count});

Dialog dialog = new Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.getWindow().setLayout(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

View view=LayoutInflater.from(this).inflate(R.layout.items_list, null);
ListView listView=(ListView) view.findViewById(R.id.list_view);
listView.setAdapter(simpleAdapter);
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        //Here I handle click
        dialog.dismiss();
    }});

dialog.setContentView(view);
dialog.show(); 
```

但它有样式问题，文本不显示（文本颜色与背景颜色一致）。

我认为 AlertDialog 更适合我。但是如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:46:58.447

> 但是点击项目后它不会关闭。为什么？可能我可以修复它吗？

默认情况下，该[`AlertDialog.Builder.setSingleChoiceItems`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setSingleChoiceItems%28java.lang.CharSequence%5B%5D,%20int,%20android.content.DialogInterface.OnClickListener%29)方法不会关闭对话框，因此您必须手动执行。为此，您只需要将回调的`DialogInterface`参数`onClick`（代表对话框本身）转换为 a`Dialog`并使用以下`dismiss()`方法：

```
((Dialog) arg0).dismiss(); 
```

# c# - Microsoft Kinect SDK 1.6 缺少 KinectSensorChooser 组件？

> ID：13555032
> 
> 赞同：6
> 
> 时间：2012-11-25T20:13:28.747
> 
> 标签：c#, visual-studio-2012, sdk, kinect

我目前正在关注本教程

[http://channel9.msdn.com/Series/KinectQuickstart/Setting-up-your-Development-Environment](http://channel9.msdn.com/Series/KinectQuickstart/Setting-up-your-Development-Environment)

但在 9:50 左右，他使用了一个名为 KinectSensorChooser 的组件，该组件在最新的 SDK 1.6 版本中不再可用，因为我阅读了 Microsoft 的 SDK 历史日志，其中指出

“我们采用 KinectSensorChooser，以前是 WpfViewers 的一部分，并将逻辑和 UI 拆分为两个不同的类：Microsoft.Kinect.Toolkit.dll 中的 KinectSensorChooser 和 KinectSensorChooserUI。KinectSensorChooser 可用于非 WPF 场景，因为它只是逻辑，没有用户界面。”

来源： http: [//www.windows7download.com/win7-kinect-sdk/history-lxqvgakz.html](http://www.windows7download.com/win7-kinect-sdk/history-lxqvgakz.html)

由于 Microsoft.Kinect 不包含 KinectSensorChooser 组件，因此我添加了 Microsoft.Kinect.Toolkit 可重用组件，该组件确实包含 KinectSensorChooser 但该组件未显示在工具箱中，我尝试通过右键单击工具箱并选择手动添加它选择项目然后 WPF 组件然后定位它，但它作为 UI (KinectSensorChooserUI) 导入，如果我将它拖到组件从工具箱中消失的窗体上，我在 Windows 8 上使用 Visual Studio 2012 Ultimate

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T22:42:03.707

我从未将`KinectSensorChooserUI`控件添加到 Visual Studio 的工具箱中。确实没有这样做的必要。

如果您觉得有义务这样做，我发现了一篇[将您的 WPF 控件添加到工具箱的](http://geekswithblogs.net/RockStarCoder/archive/2009/07/15/adding-your-wpf-control-to-the-toolbox.aspx)博客文章，该文章可能有用。我自己没有尝试过，所以我不能保证它会起作用。

我个人不使用`KinectSensorChooser`. 除非您真的打算手动打开/关闭 Kinect 或在多个 Kinect 之间切换，否则它并没有真正起到太大的作用。它确实提供了一些反馈，但可以通过其他更美观的方式来完成。

要使用`KinectSensorChooser`您的主要课程，您需要以下内容：

```
private readonly KinectSensorChooser _sensorChooser = new KinectSensorChooser();

public MainViewModel()
{
    // other initialization here

    _sensorChooser.Start();

    // more initialization here
} 
```

你现在有了一个 active `KinectSensorChooser`，只是减去了 UI。

如果您致力于使用 UI 组件，请放弃尝试将其添加到工具箱中，只需执行以下操作：

1.  添加 Toolkit 项目或对 .dll 的引用。
2.  将命名空间添加到 Xaml，以便可以引用标记中的控件。`xmlns:kt="clr-namespace:Microsoft.Kinect.Toolkit;assembly=Microsoft.Kinect.Toolkit"`
3.  将控件添加到您的可视化树中 `<kt:KinectSensorChooserUI x:Name="SensorChooserUI" />`

您后面的代码将声明命名空间，初始化`KinectSensorChooser`并设置您想要的任何事件。

```
using Microsoft.Kinect;
using Microsoft.Kinect.Toolkit;

private readonly KinectSensorChooser _sensorChooser = new KinectSensorChooser();

// somewhere in your constructor, or other init function
this.SensorChooserUI.KinectSensorChooser = _sensorChooser;
_sensorChooser.Start(); 
```

# android - 我想创建一个应用程序，如果我想从安卓手机卸载我的应用程序，它应该问我密码？

> ID：13555033
> 
> 赞同：-1
> 
> 时间：2012-11-25T20:13:46.297
> 
> 标签：android, android-emulator

我对android有疑问。我想创建一个安全的应用程序，这样如果有人想从我的手机上卸载我的应用程序，它应该问他们密码......请提前帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:18:02.467

对不起……

卸载是一种`platform feature`，没有办法阻止甚至从应用程序中检测到它。

问题是当用户卸载时您的应用程序甚至可能没有运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:52:56.320

如果它作为系统应用程序安装怎么办？那么它至少不能轻易卸载......

# javascript - 无需打开开发人员工具视图即可在 Internet Explorer 8 和 9 中获取日志

> ID：13555034
> 
> 赞同：0
> 
> 时间：2012-11-25T20:13:49.403
> 
> 标签：javascript, internet-explorer, logging, internet-explorer-8, internet-explorer-9

Chrome、FireFox 和 Safari 都可以登录到控制台，而无需打开开发人员工具视图。但是，IE 8 和 9（不确定是 10）不能，因为`console`如果不先打开开发人员工具将无法定义。

有什么解决方法吗？外部 JavaScript 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:24:12.630

```
window.console = window.console || {log: function(){}}; 
```

这不会让您访问日志，但会避免空指针错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:16:22.317

我不确定是否有任何库可以在 IE 中帮助您解决此问题，但您可以将日志封装在一个方法中，以便它在不处于开发人员模式时在 IE 中正常运行。

```
function log(val){
  if(console.log){
    console.log(val);
  }
} 
```

# php - 将php数据发送到html页面

> ID：13555038
> 
> 赞同：0
> 
> 时间：2012-11-25T20:14:13.480
> 
> 标签：php, html

我有两个`html`包含`php`部分的页面，我想将 php 值从第一个 html 页面发送到第二个 html 页面。通常它就像......`/page2.php?uid=$uid`但我的页面扩展名不是`.php`，它是`.html`但它包含 php 部分。那么我该怎么做呢？

谢谢大家，我只是将所有 html 页面更改为 php 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:55:27.947

最好的方法是在你的 .htaccess 文件中使用重写：

```
rewrite /(.*)-([0-9]+).html$ $1.php?uid=$2 [nc,L] 
```

如果您输入 url ：

```
/page-58.html 
```

那么你的 php 文件必须是

```
page.php 
```

在这种情况下，您可以获得输入值，因为`$_GET['uid']`它是 58。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:35:56.793

像这样发送您的价值：

文件_1.php

```
<a href="file_2.php?var=variable">send</a> 
```

文件_2.php

```
<?php
    $variable = $_GET['var'];
?> 
```

# .net - F# 和泛型类型

> ID：13555039
> 
> 赞同：2
> 
> 时间：2012-11-25T20:14:14.697
> 
> 标签：.net, f#

可以在 f# 中创建它吗？

```
public TTarget Map<TTarget>(string SQL) where TTarget : new()
{
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:28:21.637

```
let map<'T when 'T: (new: unit -> 'T)> (sql: string) =
    new 'T() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T03:29:21.787

实际上，约束是不必要的。这同样有效。

```
let map (sql: string) = new 'T() 
```

# r - 在 R 语言中删除 csv 格式的列

> ID：13555040
> 
> 赞同：1
> 
> 时间：2012-11-25T20:14:27.590
> 
> 标签：r, csv

我有以下 csv 格式的表格：

我在 csv 格式表中有以下基因信息：

```
 1       3       1       2     2         3
1415670_at  1   365.1   293.4   288.9   394.5   312     381.6
1415671_at  2   556.1   584.2   567.8   592.8   471.6   513.1
1415672_at  3   1048.3  763.1   1074.9  852.3   826.1   898.3
1415673_at  4   60.8    51.7    51.6    224     248.4   150.7
1415674_at  5   129.1   107.2   230.4   175.5   250.5   172.4 
```

如您所见，我得到了一些标有 1,2 和 3 的列。我制作了一个 VB 脚本，用于删除 Excel 中不同于 1 和 2 的列。我的问题是如何仅使用 R 来做到这一点？这样我的结果表将是：

```
 1   1       2          2        
1415670_at  1   365.1   293.4   394.5     312       
1415671_at  2   556.1   584.2   592.8   471.6   
1415672_at  3   1048.3  763.1   852.3   826.1   
1415673_at  4   60.8    51.7    224     248.4   
1415674_at  5   129.1   107.2   175.5   250.5 
```

顺便说一句，这只是一个示例，我可以将其他列标记为 4、5 和 6，但我只想保留标记为 1 和 2 的列

我已经尝试过发布的解决方案，即使用：

```
m<-read.csv("test1.csv")
smallerdat <- m[ grep("^X1$|^X2$|X1\\.|X2\\." , names(m) ) ] 
```

其中 m 是 csv 格式的表格，但我得到的结果是：

```
 X1  X1.1        X2      X2.2        
365.1   293.4   394.5     312       
556.1   584.2   592.8   471.6   
1048.3  763.1   852.3   826.1   
60.8    51.7    224     248.4   
129.1   107.2   175.5   250.5 
```

所以它正在删除我需要的前两列。如何不删除这些列？以及如何保持原始格式，我的意思是标题中只有 1 和 2 而不是那些 X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:49:16.973

将数据读入名为“indat”的数据帧后

```
 smallerdat <- indat[ grep("^X1|^X2", names(indat) )] 
```

如果列不大于 0-9 将起作用。如果它们的字符值更大，你会在那个网络中得到“11”或“21”，所以可能需要更复杂的东西：

```
 smallerdat <- indat[ grep("^X1$|^X2$|X1\\.|X2\\." , names(indat) ) ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-01T23:09:33.463

只需使用 cbind() 合并尽可能多的表格列即可；

```
newtable <- cbind( table[1], table[2], table[3], ..) 
```

其中表 [1] 是表的第一列，表 [2] 是第二列，依此类推。

因为 cbind() 需要尽可能多的参数。

如果你喜欢的话，然后命名列；

```
colnames(newtable) <- list("First", "Second", "Third") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:56:15.937

马诺洛，

您必须将数据读入数据框中并删除列。您唯一需要考虑的是列名不能相同。

```
# Your data
data <- read.table(text = "1       3       1       2       2       3
                           365.1   293.4   288.9   394.5   312     381.6
                           556.1   584.2   567.8   592.8   471.6   513.1
                           1048.3  763.1   1074.9  852.3   826.1   898.3
                           60.8    51.7    51.6    224     248.4   150.7
                           129.1   107.2   230.4   175.5   250.5   172.4",
        header=TRUE, sep="", nrows=5) 
```

之后如果你跑

```
print(data) 
```

您将获得

```
 X1    X3   X1.1    X2  X2.1  X3.1
1  365.1 293.4  288.9 394.5 312.0 381.6
2  556.1 584.2  567.8 592.8 471.6 513.1
3 1048.3 763.1 1074.9 852.3 826.1 898.3
4   60.8  51.7   51.6 224.0 248.4 150.7
5  129.1 107.2  230.4 175.5 250.5 172.4 
```

如果您删除名为 X3 和 X3.1 的列

```
data <- data[, !(colnames(data) %in% c("X3","X3.1"))] 
```

并执行

```
print(data) 
```

你现在会得到

```
 X1   X1.1    X2  X2.1
1  365.1  288.9 394.5 312.0
2  556.1  567.8 592.8 471.6
3 1048.3 1074.9 852.3 826.1
4   60.8   51.6 224.0 248.4
5  129.1  230.4 175.5 250.5 
```

希望能帮助到你！:)

# android - 如何使固定布局控制区域与 FrameLayout 和 ImageView 一起使用？

> ID：13555041
> 
> 赞同：0
> 
> 时间：2012-11-25T20:14:27.893
> 
> 标签：android, android-layout

我对 ADT 和 Eclipse 中的布局支持感到有些沮丧。又是 Swing 了。基本上我正在尝试实现一个简单的布局，如下所示：RelativeLayout

```
+----------------+
|                |
| FrameLayout    |
|    ImageView   |
|                |
|                |
|                |
+----------------+
| LinearLayout   |
|    TextView    |
|    Buttons     |
+----------------+ 
```

RelativeLayout 和 FrameLayout 与 ImageView 一起用于我编写的一些平移/缩放侦听器支持。

我遇到的问题是无论我尝试什么，LinearLayout（底部控件）都不会在窗口底部显示。我将简单地粘贴下面的内容。请注意，FieldView 是 ImageView 的扩展。图像显示良好，它的 LinearLayout 想要显示在挡路的 FrameLayout 之上。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fieldcontainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <com.test.FieldView
            android:id="@+id/field"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

    </FrameLayout>

    <LinearLayout
        android:id="@+id/controls"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/buttonAddNode"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add node" />

        <TextView
            android:id="@+id/textViewNodeInfo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </LinearLayout>

</RelativeLayout> 
```

提前感谢您的任何建议。也许我在之前的尝试中误用了 RelativeLayout 参数。

**更新** 感谢您的快速响应！我无法对下面的代码发表评论，所以这是我尝试过的更新：

```
<FrameLayout
    ...
    android:layout_above="@+id/controls"> 
```

;以前，我在运行时收到以下异常：

```
Unable to start activity ComponentInfo{com.test.MainActivity}:
    java.lang.ClassCastException: android.widget.LinearLayout 
```

抛出异常的行在我的 MainActivity.OnCreate() 中：

```
view = (FieldView) findViewById(R.id.field); 
```

看起来添加 layout_below 会导致 ID 不匹配？查找 R.id.field 正在返回错误的 LinearLayout 的 ID，我自然无法转换。

请注意，如果没有 layout_above，这没有任何问题，只是布局损坏。同样，FieldView 只是 ImageView 的扩展。我将我的触摸监听器和其他一些东西存储在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:31:24.033

您正在使用 RelativeLayout 但没有使用它的任何属性来控制定位。

正如您所拥有的那样，您还不如使用垂直线性布局。您还将 FrameLayout 和 LinearLayout 的高度设置为 match_parent，这意味着您已将布置这些视图组的所有责任移交给父视图 RelativeLayout。

当 Android 布局布局时，它会执行两次自上而下的传递。首先，父母会问孩子们想要多大。它将自己的大小传递给孩子们来执行此操作。因此，您的每个 FrameLayout 和 LinearLayout 都会说它们希望与父级的大小相同。RelativeLayout 没有规则来确定这些控件应该如何相互关联，因此会尽量使每个控件尽可能大，因为它的内容。第二遍是自上而下，当父母告诉每个孩子自己做多大并渲染布局时。

所以，为了解决你的问题，我会使用两种方法之一（还有更多，但对于像这样的简单布局，你不应该需要它们）。

*   使用 RelativeLayout`layout_below`来强制 LinearLayout 始终位于 FrameLayout 下方，而不管大小或使用任何各种父对齐属性。

*   要进行更精确的控制，请使用具有布局权重的 LinearLayout 来定位和精确调整每个子项的大小。如果您采用这种方法，请记住将高度设置为 0dip 并使用视图“支柱”进行定位。

我个人的偏好是使用 LL，因为我发现它们坚如磐石并且易于获得精确的布局大小和定位（尽管我有时不得不扩展它们并弄乱它们的 onMeasure() 方法，但这是一个 Android 碎片问题，而不是直接相关）。

[android:layout_weight 是什么意思？](https://stackoverflow.com/questions/3995825/what-does-androidlayout-weight-mean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:25:05.360

将`android:layout_alignParentBottom="true"`属性添加到`LinearLayout`布局中。如果你不想在`FrameLayout`下`LinearLayout`，那么你的布局应该是这样的：

```
<RelativeLayout>

    <LinearLayout  android:id="@+id/ll" android:layout_alignParentBottom="true" />
    <FrameLayout android:layout_above="@id/ll" android:layout_alignParentTop="true"/>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:27:56.830

您只需将其全部包装在相对布局中，然后使用将线性布局锚定到底部。`android:layout_alignParentBottom="true"`

为了防止控件被上面的东西过度运行，请使用`android:layout_above="@id/controls"`.

像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fieldcontainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false" >
    <!-- Your other stuff -->

    <LinearLayout
        android:id="@+id/controls"
        android:layout_width="match_parent"
        android:layout_height="wrap_contgnt"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true">
    <!-- Your control stuff -->
    </linearlayout>
</relativelayout> 
```

请注意，您必须先定义一个 id ( `@+`)，然后才能简单地引用 ( `@`)。因此，您可以将控件视图移动到 XML 文件中的任何其他内容之前，或者在首先出现的位置引用中使用“@+”，然后在视图定义中使用 @。

所以你会有`android:layout_above="@+id/controls"`，然后另一行是`android:id="@id/controls"`.

除非您更改它们，否则更改布局不会影响其中的 id。

# php - Apache 友好的网址。如何？

> ID：13555048
> 
> 赞同：-5
> 
> 时间：2012-11-25T20:15:11.940
> 
> 标签：php, apache

> **可能重复：**
> [如何：用 PHP 重写 URL？](https://stackoverflow.com/questions/1039725/how-to-url-re-writing-in-php)

网上有很多关于我的问题的例子，但由于它涉及一些 RegEx，我可以从你那里得到一点帮助。

我怎样才能转换这个网址....

```
www.example.com/profile.php?user=username123 
```

...进入这个网址？

```
www.example.com/username123 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:26:47.857

在根文件夹中创建一个名为 .htaccess 的文件，并在其中写入以下内容。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ profile.php?user=$1 [QSA,L] 
```

# asp.net - Facebook 应用程序停止发布到页面墙（用户没有足够的管理权限）

> ID：13555050
> 
> 赞同：1
> 
> 时间：2012-11-25T20:15:26.373
> 
> 标签：asp.net, facebook-c#-sdk, facebook-page, facebook-authentication, facebook-authorization

自 11 月 6 日以来，我的应用程序再次停止发布到墙上并引发授权错误。我使用带有以下代码的 C# SDK：

```
public static void postItemToWall(Item MyItem)
{

            String URL = "http://myurl";
            dynamic parameters = new ExpandoObject();

            parameters.message = "My Message"

            Facebook.FacebookClient app = new Facebook.FacebookClient(app_token);

            var result = app.Post("/pageid/feed", parameters);

 } 
```

应用程序现在抛出以下异常：

(OAuthException - #200) (#200) 用户没有足够的管理权限来执行此页面上的此操作。作为参考，我是页面管理员。该应用程序具有发布到墙的权限，我可以使用相同的脚本检索提要帖子。

这一直有效到 2012 年 11 月 6 日，并且是今年第三个实例导致我的应用程序从 FB 方面摔倒。权限都已检查，我有权访问所述页面。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:03:31.180

经过多次尝试和 Anveshs 指向图形浏览器的指针后，我做了一些基于场景的测试，我发现无论出于何种原因，APP_TOKEN 在 11 月 6 日停止工作，但是使用我的 USER_TOKEN，它又可以工作了。作为一个离线令牌，我对令牌到期没有任何问题。

# listview - 动态改变listview的itemsource不会更新显示

> ID：13555054
> 
> 赞同：0
> 
> 时间：2012-11-25T20:15:51.813
> 
> 标签：listview, binding

我有一个列表视图，其中 itemsource 设置为 observablecollection'x'，转换器将其更改为 observablecollection'ucx'（使用 foreach 过程），其中“ucx”是一个用户控件，描述“x”，我想在列表视图中显示。

我做了一个测试，在其中我设置了 observablecollection'x' 并且显示工作（所以转换器和绑定没问题），但是当我动态更改 observablecollection'x' 时，显示没有改变。

`OnPropertyChanged("x")`已设置！

我不喜欢在没有转换器的情况下直接绑定到 observablecollection'ucx'，因为它不存在，我不想在类中添加另一个集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:34:48.460

我认为你应该看的一件事：

在 ListView 中，您可以选择设置“ItemTemplate”，这是一个可以保存 ucx 用户控件的 DataTemplate。就像是：

```
 <ListView ItemSource={Binding items}>
        <ListView.ItemTemplate>
            <DataTemplate>
                <ucx/>
            </DataTemplate>
        </ListView.ItemTemplate>
  </ListView> 
```

（应该查看更多具体示例的帮助）

你是什​​么意思改变了observablecollection'x'？添加/删除项目？也许上传您绑定的代码示例，可能会有所帮助。

# javascript - 在 JavaScript 中转义单引号

> ID：13555056
> 
> 赞同：5
> 
> 时间：2012-11-25T20:16:09.653
> 
> 标签：javascript, jquery, html

我写了一个函数：

```
function makeTitleEditable($titleContainer){
        var defaultValue = $titleContainer.text().replace("'","\\'");
        $titleContainer.replaceWith("<input id='poll_title' name='poll[title]' value='" + defaultValue +"' type='text'>");
      } 
```

现在的问题是我仍然无法逃脱单引号。例如，如果

```
$titleContainer.text() => I'm lucky

console.log("<input id='poll_title' name='poll[title]' value='" + defaultValue +"' type='text'>") => <input id='poll_title' name='poll[title]' value='I\'m lucky!' type='text'> 
```

这将生成具有值“I”而不是“我很幸运”的 DOM。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-05T19:58:05.093

当然，快速修复只是简单地替换`"'"`为，`"\'"`尽管这在复制和粘贴类型的基础上确实不可扩展。
更好的是通过正则表达式，例如：

```
var badString = "Visit John's Site!!!";
var goodString = badString.replace(/'/g, "\'"); 
```

请记住，尽管它们随后会在服务器端甚至在后续函数调用中再次显示为简单的撇号，所以如果您打算在不同的函数之间传递它们，另一种解决方案可能更可取：

```
var badString = "Visit John's Site!!!";
var goodString = badString.replace(/'/g, "\x27"); 
```

这是撇号的标准 Unicode 字符。这不一定会避免任何后续函数调用出现问题，但这意味着不必对字符串进行解码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:19:58.170

使用jQuery设置值；

```
function makeTitleEditable($titleContainer){
    $titleContainer.replaceWith(
       $("<input id='poll_title' name='poll[title]' type='text'>").val($titleContainer.text())
    );
} 
```

# c++ - xCode抛出随机链接错误？

> ID：13555057
> 
> 赞同：0
> 
> 时间：2012-11-25T20:16:16.150
> 
> 标签：c++, xcode, linker-errors

我在大学的 CS 课程中使用 xCode 用 C++ 进行开发。到目前为止，我没有任何问题。但是，我遇到了一个在 xCode 中无法解决的错误。

这是错误：

```
Undefined symbols for architecture x86_64:
  "shortestpath(double const* const*, int, int, double*, int*, std::__1::vector<std::__1::pair<int, int>, std::__1::allocator<std::__1::pair<int, int> > >)",     referenced from:
  _main in main.o

ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在做一些贝尔曼福特算法的简单实现。我的程序设置如下：

main.cc - 获取一个图形的 .txt 文件并将其发送到我的 readGraph 函数。readGraph.cc/.h - 获取图形文件并将其读入邻接矩阵并提取其他必要信息 bellmanFord.cc/.h - 在图形上执行 bellman ford 算法。

我的主文件如下所示：

```
#include <fstream>
#include <iostream>
#include <cstdlib>
#include <utility>
#include <vector>
#include "bellmanford.h"
#include "readfile.h"

using namespace std;

int main(int argc, const char * argv[])
{

    //check the command line length
    if(argc < 2)
    {
        //print the error
        cout << "Not enough command line arguments!" << endl;
        //return to exit with error
        return 1;
    }

    //open the graph file
    ifstream fin;
    fin.open(argv[1]);

    //get the length
    int length;
    fin >> length;

    //make the references to send
    double** matrix;
    vector<pair<int, int>> pairVector;
    double* dist;
    int* prev;

    //make the matrix, and lists for bellmanford
    readfileTOMatrix(fin, matrix, length);
    readfileTOpairs(pairVector, matrix, length);
    make_Prev_and_Dist(prev, dist, length);

    shortestpath(matrix, length, 0, dist, prev, pairVector);

} 
```

该错误发生在对 shortestpath 的调用的底部（这是 bellmanFord.cc/.h 中的唯一函数）。如果我将此注释掉，它运行良好。我已经检查并仔细检查了，但我很确定一切设置正确。

我知道我可以用我认为的 make 文件来解决这个问题....但是有没有人在 xCode 中纠正这个问题？

以下是错误详情： ![错误详情](../Images/de310087c60b0945b7a87dcc861ddcef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:59:26.980

我的 .h 和 .cc 之间的差异很小。只是忘记了原型中实际声明中缺少的一个“&”。现在都在工作！

# javascript - 基于 HTML5 视频分辨率的动态父 div 宽度和高度

> ID：13555061
> 
> 赞同：3
> 
> 时间：2012-11-25T20:16:29.253
> 
> 标签：javascript, jquery, html, dom, html5-video

我有一个响应式设计网站，其中包含一个占据整个浏览器宽度的 HTML5 视频。`width:100%;height:auto;`无论浏览器窗口大小如何，视频的 CSS 都可以保持视频分辨率。

我想解决的问题是`<video>`在保持父 div 的同时调整父 div 的高度，`width:100%`这样父级始终与初始加载和调整大小时的比例相同`<video>`。

视频为 640x360。假设浏览器窗口为 1280x800。视频分辨率将翻倍至 1280x720 以适应其 100% 的宽度，但由于窗口的高度为 800，父 div 的高度将增加 80 像素。我想将该 div 的高度调整为 720 以匹配`<video>`.

我还在学习 JS，没有足够的智慧来解决这个问题。提前致谢。

这是一个可能有助于我解释的小提琴（调整窗口大小以复制问题。目标是在调整窗口大小时不显示任何红色背景）：http: [//jsfiddle.net/alanweibel/UMstP/2/](http://jsfiddle.net/alanweibel/UMstP/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:56:52.777

假设我对你的理解正确，这篇文章描述了一个小技巧，你可以在没有 Javascript 的情况下实现这一点：[http ://webdesignerwall.com/tutorials/css-elastic-videos](http://webdesignerwall.com/tutorials/css-elastic-videos)

**如果**您知道视频的比例，则可以计算容器的填充，然后将视频绝对定位在其中。我已经调整了你的小提琴以使用这种技术：http: [//jsfiddle.net/SeykC/](http://jsfiddle.net/SeykC/)

```
<div class="wrap">
    <div class="container">
        <video id="video" controls="controls">
            <source type="video/mp4"
                    src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" />
        </video>
    </div>           
</div>
​

video {
    max-width: 100%;
    height: auto;
}

.container {
    background: red;
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
}

.container iframe,  
.container object,  
.container embed,
.container video{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}​ 
```

# php - PHP：预匹配；无法匹配 £ 符号

> ID：13555062
> 
> 赞同：5
> 
> 时间：2012-11-25T20:16:39.693
> 
> 标签：php, regex

我真的一直在为这个问题绞尽脑汁，至于我的生活，我无法弄清楚问题出在哪里。

我有一些数据要运行正则表达式。作为参考，原始文档以 iso-8859-15 编码，如果这有什么不同的话。

这是一个使用正则表达式的函数；

```
if(preg_match("{£\d+\.\d+}", $handle)) // 
{
    echo 'Found a match';

}
else
{
    echo 'No match found';
} 
```

无论我尝试什么，我似乎都无法匹配。我试过只搜索 £ 符号。我已经检查了我的正则表达式，那里没有任何问题。我什至将源数据直接粘贴到正则表达式测试器中，它找到了我正在寻找的完全匹配。我只是不明白为什么我的正则表达式不起作用。我查看了我正在搜索的字符串中的原始数据，并且£ 符号清晰可见。

我觉得那里有一些我看不到的编码字符，但无论我如何输出数据，我只能看到 £ 符号，但无论出于何种原因，它都没有被识别。

有任何想法吗？是否有绝对的方法来查看字符串中的原始数据？我尝试过 var_dump 和 var_export，但我确实感觉有些地方不太对劲，因为 var_export 确实以不同的语言显示数据。我怎样才能看到我的变量中“真正”的内容是什么？

我什至将内容保存到 txt 文件中。英镑在那里。我应该没有理由不能用我的正则表达式找到它。我只是不明白。如果我创建一个字符串并粘贴到我的正则表达式应该选择的确切测试位中，它会毫无问题地找到匹配项。

真是莫名其妙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:25:45.440

你总是可以改变这封信：

```
$string = '£100.00';
if(preg_match("/\xa3/",$string)){
    echo 'match found';
}else{
    echo 'no matches';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:26:38.887

如果您知道十六进制值，则可以在正则表达式中包含任何字符。我认为值是 0A3H，所以试试这个：

```
 \xa3  // Updated with the correct hex value 
```

# javascript - JavaScript 的 setInterval 和函数何时完成

> ID：13555063
> 
> 赞同：0
> 
> 时间：2012-11-25T20:17:17.920
> 
> 标签：javascript, node.js, callback, setinterval

我需要在我的 node.js 服务器上运行一个函数，它每 15 分钟完成一次相同的任务。我用于该 setInterval ，如此处的示例 3 - [http://tinyurl.com/c2jj7dl](http://tinyurl.com/c2jj7dl)。所以，我遇到了这样的事情：

```
exports.start = function (list, callback){
    setInterval(stuffTop.loadstuff, 900000, list, function (parsedList) {

                // CODE STUFF HERE

                // THEN THE CALLBACK.
        callback(parsedDynamicList);

    });

} 
```

**实际上这些东西有效，但该功能第一次完成 - 仅在 900000MS 之后。是否有一个选项可以使功能完整（在第一轮中） - 调用时直接？谢谢。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:28:02.837

使用递归调用自身的函数：

```
foo = function(){
  doStuff()
  setTimeout(foo,900000)
} 
```

在您的情况下，它看起来像这样：

```
exports.start = function (list, callback){
  var foo = function () {
    stuffTop.loadstuff(list, function(parsedList) {
      //CODE STUFF HERE
      //THEN THE CALLBACK
      callback(parsedDynamicList);
      setTimeout(foo,900000);
    });
  }
  foo();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T21:58:14.197

您的问题的解决方案很简单。在进入 setInterval 之前调用该函数。像这样：

```
 var callback=function(){}
    var list=['some','list'];
    var repeaterFunction = function(){console.log("do now!")}

    var start = function (list, callback){
        repeaterFunction();
    var repeater = setInterval(repeaterFunction, 5000, list, function(parsedList){
                    // CODE STUFF HERE
                    // THEN THE CALLBACK.
            callback(parsedDynamicList);

        });

    }   
    start()​ 
```

我使用的事实`var repeater = setInterval(...`允许`clearInterval(repeater)`您随时使用。

这是[小提琴](http://jsfiddle.net/wRuB3/)

# node.js - 在 Node.js 中使用 MongooseJS 进行更新时，$pull 将不起作用

> ID：13555064
> 
> 赞同：0
> 
> 时间：2012-11-25T20:17:19.997
> 
> 标签：node.js, mongodb, mongoose

```
query =
  _id: mongoose.Types.ObjectId fan_id
  'fanclubs.fanclub_id': fanclub_id

removeSubDoc =
  '$pull':
    fanclubs:
      fanclub_id: fanclub_id

updOptions =
  multi: true

Fan.update query, removeSubDoc, updOptions, (err, cnt) -> 
```

那是我的代码。我已经硬编码了一些东西，以确保有问题的文件在那里。但这似乎并没有拉出子对象：

```
{
  "_id" : ObjectId( "5075dc3323863bca2e00000a" ),
  "added_on" : Date( 1349901363053 ),
  "address" : { "country" : "0",
    "zip" : "07006",
    "state" : "0",
    "city" : "Caldwell",
    "address" : null },
  "birth_date" : Date( 646632000000 ),
  "city" : "Caldwell",
  "country" : "0",
  "email" : "admin@gmail.com",
  "events" : [],
  "fanclubs" : [ 
    { "fanclub_id" : "50b26eb5b62ac1cc0a000006",
      "fanclub_name" : "Vitamin Water",
      "fanclub_image" : "https://s3.amazonaws.com/fanclubs/5f129d8d6af3a8ae0b17cc8d2f7e5a30.png",
      "access" : "client",
      "_id" : ObjectId( "50b26eb5b62ac1cc0a000008" ),
      "joinedOn" : Date( 1353871029377 ) } ],
  "first_name" : "Admin",
  "fullname" : "Admin Istrator",
  "gender" : "male",
  "last_name" : "Istrator",
  "password" : "5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8",
  "phone" : "(862) 298-1898",
  "state" : "0",
  "status" : "active",
  "user_type" : "admin",
  "zip" : "07067" } 
```

我的`Fan`架构：

```
FanSchema = new mongoose.Schema(
  first_name:
    type: String
    trim: true
    required: true
  fanclubs:
    type: [FanClubMemberSchema]
    required: false 
```

和.. `FanClubMemberSchema`：

```
mongoose = require "mongoose"

FanClubMemberSchema = new mongoose.Schema
  fanclub_id:
    type:  String
    trim:  true
    required: true

  fanclub_name:
    type: String
    trim: true
    required: true

  fanclub_image:
    type: String
    trim:true
    required:true

  access:
    type:  String
    trim:  true
    required: true

  joinedOn:
    type:  Date
    default: Date.now
    required: true    

exports.FanClubMemberSchema = FanClubMemberSchema 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:26:35.290

使用 Mongoose 查询时，请始终使用`ObjectId.toString()`. 即使与字符串一起使用 toString 也是安全的。

尝试：

```
query =
    _id: fan_id.toString()
        'fanclubs.fanclub_id': fanclub_id.toString()

removeSubDoc =
    '$pull':
        fanclubs:
            fanclub_id: fanclub_id.toString() 
```

# ruby-on-rails - Rails - 能够直接链接到通过 ajax 呈现的视图

> ID：13555065
> 
> 赞同：0
> 
> 时间：2012-11-25T20:17:21.183
> 
> 标签：ruby-on-rails, ruby, ajax

寻找实现这一点的最佳方法。目前我有一个用户的“显示”页面 - 显示所有用户的图片。

```
def show
  @user = User.find(params[:id])
  @pictrues = @user.pictures
end 
```

在那个页面上，我有各种标签。当用户单击其中一个选项卡时，ajax 调用会呈现一个视图......特别是，它会更新以前显示所有用户图片的部分（以及用于统计的附加部分）。对于“显示评论”示例，它使用用户评论过的所有图片更新部分：

```
def show_comments
  @user = User.find(params[:id])
  @pictures = @user.picture_comments.map{ |p| p.picture }.uniq
  respond_to do |format|
    format.html
    format.js
  end
end 
```

show_comments.js.erb 文件如下所示：

```
$("#user_content_container").html("<%= escape_javascript render(partial: 'shared/pictures', pictures: @pictures) %>");
$("div.user_header").html("<h4>Comments</h4><br/>");
$("#stat_container").html("<%= escape_javascript render(partial: 'shared/comment_stats', pictures: @pictures) %>"); 
```

我想要做的是保持页面的当前功能。但也能够直接链接到通过 ajax 呈现的视图。例如，在另一个页面上有一个直接指向用户“显示”页面的链接，就像单击“评论”选项卡时一样。

我有一些想法，但不确定这样做的“最干净”的方式是什么。如果您需要任何额外的说明，请告诉我，b/c 老实说，我很难说出这个问题，因为我正在寻找实现这个问题的最佳方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:02:33.113

这听起来像是您可以使用[turbolinks](https://github.com/rails/turbolinks)解决的问题。如果您可以更新您的应用程序以使用 Rails 4，您可以将其捆绑在其中。否则，您可以使用 gem。有关如何执行此操作的更多信息，请观看[turbolinks 上的 railscast](http://railscasts.com/episodes/390-turbolinks)。

如果您不想或不能使用它们，您也可以尝试在 url 中传递参数，并在页面加载时检查它们。您可以使用参数来修改页面，就像在 AJAX 调用之后修改页面一样。

# java - 我在哪里可以找到 jdk 7 中的 jnlp api jar？

> ID：13555066
> 
> 赞同：9
> 
> 时间：2012-11-25T20:17:32.280
> 
> 标签：java, jnlp, java-web-start

> **可能重复：**
> [在 JDK 1.7 中找不到 jnlp.jar](https://stackoverflow.com/questions/10830317/cant-find-jnlp-jar-in-jdk-1-7)

对于 jdk 1.6，可以在这里找到（根据[Where can i download JNLP.jar](https://stackoverflow.com/questions/7593029/where-can-i-download-jnlp-jar)）：

```
${java.home}/sample/jnlp/servlet/jnlp.jar 
```

但是，我在我的 jdk 7 主页中看不到这个目录。

它去哪儿了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T20:55:32.323

在 java 7**中，javax.jnlp.***包是 jre 的一部分，可以在`javaws.jar`以下路径中找到

```
C:\Program Files\Java\jre7\lib\javaws.jar 
```

如果使用 Maven：

```
<dependency>
    <groupId>javax.jnlp</groupId>
    <artifactId>jnlp-api</artifactId>
    <version>7.0</version>
    <scope>system</scope>
    <systemPath>${java.home}/lib/javaws.jar</systemPath>
</dependency> 
```

如果您在使用**jnlp-download-servlet 和 jnlp-servlet.jar**

之前作为 jdk 的一部分提供的示例现在必须从 oracle 单独下载： [向下滚动到“演示和示例”](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

有人很好，并在 maven repos 中放了一份副本（我猜如果 oracle 更新他们的，我们不能确定它不会落后..）：

```
<dependency>
    <groupId>org.codehaus.mojo.webstart</groupId>
    <artifactId>webstart-jnlp-servlet</artifactId>
    <version>1.0-6.0.02_ea_b02.2</version>
</dependency> 
```

编辑：正如 Zalumon 在他的回答中所说，javax.jnlp.* api 也可以在示例包中找到。应该建议下载此文件并将 jnlp.jar 从那里添加到类路径中，而不是像我上面建议的那样添加 javaws.jar。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T10:26:30.093

感谢您提供的所有提示 - 我不知道有单独的示例下载。

所以这就是我最终做的事情（请注意，我有自己的远程存储库，所以这可能不适用于你）：

我从 Oracle 的网站下载了 jdk7 示例。在里面我找到了一个 jnlp.jar，它只包含 jnlp API：

```
sample\jnlp\servlet\jnlp.jar 
```

我将其作为 jnlp-api-1.7.jar 部署到我的私有远程存储库（人工制品），然后像这样配置 pom.xml（'provided' 范围，因为在运行时这些类由 javaws.jar 提供，正如 Aksel 指出的那样威尔格特）：

```
<dependency>
  <groupId>javax.jnlp</groupId>
  <artifactId>jnlp-api</artifactId>
  <version>1.7</version>
  <scope>provided</scope>
</dependency> 
```

为了完整起见，部署到工件的屏幕截图：

![](../Images/37df188dad7b3065e25a023985c6db3f.png)

# postgresql - Grails 保存不尊重刷新选项

> ID：13555067
> 
> 赞同：1
> 
> 时间：2012-11-25T20:17:33.297
> 
> 标签：postgresql, grails, grails-orm

我使用 grails 作为穷人的 etl 工具，用于将一些相对较小的 db 对象从 1 db 迁移到下一个 db。我有一个控制器，它从一个数据库（mysql）读取数据并将其写入另一个数据库（pgsql）。它们使用相似的域对象，但由于 grails 2.1.X 中对多数据源支持的限制，它们并不完全相同。

下面你会看到我的控制器和服务代码：

```
class GeoETLController {

    def zipcodeService

      def migrateZipCode() {
        def zc = zipcodeService.readMysql();
        zipcodeService.writePgSql(zc);

        render{["success":true] as JSON}
    }
} 
```

和服务：

```
class ZipcodeService {

    def sessionFactory
    def propertyInstanceMap = org.codehaus.groovy.grails.plugins.DomainClassGrailsPlugin.PROPERTY_INSTANCE_MAP

    def readMysql() {
        def zipcode_mysql = Zipcode.list();
        println("read, " + zipcode_mysql.size());
        return zipcode_mysql;
    }

    def writePgSql(zipcodes) {

        List<PGZipcode> zips = new ArrayList<PGZipcode>();
        println("attempting to save, " + zipcodes.size());
        def cntr = 0;
        zipcodes.each({ Zipcode zipcode ->
            cntr++;

            def props = zipcode.properties;
            PGZipcode zipcode_pg = new PGZipcode(zipcode.properties);

            if (!zipcode_pg.save(flush:false)) {
                zipcode_pg.errors.each {
                    println it
                }
            }
            zips.add(zipcode_pg)
            if (zips.size() % 100 == 0) {
                println("gorm begin" + new Date());
                // clear session here.
                this.cleanUpGorm();
                println("gorm complete" + new Date());

            }

        });
        //Save remaining
        this.cleanUpGorm();
        println("Final ." + new Date());
    }

    def cleanUpGorm() {
        def session = sessionFactory.currentSession
        session.flush()
        session.clear()
        propertyInstanceMap.get().clear()
    }
} 
```

其中大部分取自我自己的代码，然后进行调整以尝试获得与[http://naleid.com/blog/2009/10/01/batch-import-performance-with-grails-and-mysql中所见类似的性能/](http://naleid.com/blog/2009/10/01/batch-import-performance-with-grails-and-mysql/)

因此，在查看我的代码时，每当调用 zipcode_pg.save() 时，都会创建一个插入语句并将其发送到数据库。有利于数据库一致性，不利于批量操作。

我的即时刷新的原因是什么（注意：我的数据源和 congig groovy 文件没有相关更改）？以这种速度，处理每批 100 个（每秒 14 次插入）大约需要 7 秒，当您处理 10,000 行时，这只是很长的时间......

欣赏建议。

**注意：我考虑使用纯 ETL 工具，但是已经构建了如此多的域和服务逻辑，认为使用 grails 将是资源的良好重用。然而，没想到批量操作的这种质量**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:25:32.590

在没有看到您的域对象的情况下，这只是一种预感，但我可能会尝试在您的 save() 调用中指定 validate:false 。Validate() 由 save() 调用，除非您告诉 Grails 不要这样做。例如，如果您对 PGZipcode 域对象中的任何字段都有唯一约束，那么 Hibernate 必须对每条新记录进行插入以利用 DBMS 的唯一功能并执行适当的验证。其他约束可能也需要 DBMS 查询，但现在只想到独特的跳转。

来自[Grails 持久性：事务后写](http://grails.org/doc/latest/guide/GORM.html#persistenceBasics)

> Hibernate 尽可能缓存数据库更新，仅在知道需要刷新或以编程方式触发刷新时才实际推送更改。**Hibernate 刷新缓存更新的一种常见情况是在执行查询时，因为缓存信息可能包含在查询结果中。**但只要您进行非冲突的保存、更新和删除，它们就会被批处理，直到会话被刷新。

* * *

或者，您可以尝试显式设置 Hibernate 会话的[刷新模式](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html)：

```
sessionFactory.currentSession.setFlushMode(FlushMode.MANUAL); 
```

我的印象是默认的冲洗模式可能是自动的。

# python - 保存多个图

> ID：13555069
> 
> 赞同：9
> 
> 时间：2012-11-25T20:18:00.983
> 
> 标签：python, matplotlib

我有这段代码可以从文件夹中的所有文本文件中生成多个图。它运行得很好并显示了情节，但我不知道如何保存它们。

```
import re
import numpy as np
import matplotlib.pyplot as plt
import pylab as pl
import os

rootdir='C:\documents\Neighbors for each search id'

for subdir,dirs,files in os.walk(rootdir):
 for file in files:
  f=open(os.path.join(subdir,file),'r')
  print file
  data=np.loadtxt(f)

  #plot data
  pl.plot(data[:,1], data[:,2], 'gs')

  #Put in the errors
  pl.errorbar(data[:,1], data[:,2], data[:,3], data[:,4], fmt='ro')

  #Dashed lines showing pmRa=0 and pmDec=0
  pl.axvline(0,linestyle='--', color='k')
  pl.axhline(0,linestyle='--', color='k')
  pl.show()

  f.close() 
```

我以前用过

```
fileName="C:\documents\FirstPlot.png"
plt.savefig(fileName, format="png") 
```

但我认为这只是将每个图形保存到一个文件中并覆盖最后一个文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T20:28:19.730

您所要做的就是提供唯一的文件名。您可以使用计数器：

```
fileNameTemplate = r'C:\documents\Plot{0:02d}.png'

for subdir,dirs,files in os.walk(rootdir):
    for count, file in enumerate(files):
        # Generate a plot in `pl`
        pl.savefig(fileNameTemplate.format(count), format='png')
        pl.clf()  # Clear the figure for the next loop 
```

我做了什么：

*   [使用 python 的字符串格式化语法](http://docs.python.org/2/library/string.html#format-string-syntax)创建模板

*   [`enumerate()`使用函数](http://docs.python.org/2/library/functions.html#enumerate)在循环中添加了一个计数器。

*   使用计数器和模板为每个绘图生成一个新文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:27:55.260

您正在做正确的事情来保存绘图（只需将该代码放在 之前`f.close()`，并确保使用`pl.savefig`而不是`plt.savefig`，因为您导入`pyplot`为`pl`）。你只需要给每个输出图一个不同的文件名。

一种方法是添加一个计数器变量，该变量会随着您通过的每个文件而递增，并将其添加到文件名中，例如，执行以下操作：

```
fileName = "C:\documents\Plot-%04d.png" % ifile 
```

另一种选择是根据输入的文件名创建一个唯一的输出文件名。您可以尝试以下方法：

```
fileName = "C:\documents\Plot-" + "_".join(os.path.split(os.path.join(subdir,file))) + ".png" 
```

这将采用输入路径，并将任何路径分隔符替换为`_`. 您可以将其用作输出文件名的一部分。

# node.js - 如何确保使用 puppetlabs-nodejs 安装最新的 npm 版本？

> ID：13555074
> 
> 赞同：0
> 
> 时间：2012-11-25T20:18:40.667
> 
> 标签：node.js, npm, puppet

我正在使用 puppetlabs-nodejs 模块来安装 nodejs 和 npm。但是如何确保 npm 和 nodejs 的版本都是最新版本或者是特定版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:50:21.740

目前你不能很遗憾。这是可能的，但需要对模块进行更改（我相信作者会接受拉取请求）

具体来说，该模块当前确保 node 和 npm 都存在，而不是最新的或设置为特定版本。如果需要，您可以公开一个接口来更改它。

[https://github.com/puppetlabs/puppetlabs-nodejs/blob/master/manifests/init.pp#L61](https://github.com/puppetlabs/puppetlabs-nodejs/blob/master/manifests/init.pp#L61)

[https://github.com/puppetlabs/puppetlabs-nodejs/blob/master/manifests/init.pp#L67](https://github.com/puppetlabs/puppetlabs-nodejs/blob/master/manifests/init.pp#L67)

# sql - 我对 SQL 语句有疑问

> ID：13555076
> 
> 赞同：1
> 
> 时间：2012-11-25T20:18:46.250
> 
> 标签：sql

```
Create Table Person (
ID integer primary key
, [name] character(15) not null 
, address character(15)
, phone integer
);

Create Table Surveyor (
 surveyID integer 
 , certificationDate Datetime 
 , ID integer 
 , primary KEY (surveyID,ID)
 , FOREIGN KEY (ID) REFERENCES Person
 );

 Create Table Points (
 PntID integer primary key
 , N float not null
 , E float not null
 , Height float not null
 );

 Create Table Polygon (
polyID integer primary key 
, area float not null 
 , atleastonepoint integer not null
, foreign key (atleastonepoint) references Points(PntID)
 , check (area > 0)
);

Create Table Block (
blockID integer 
, blockName  character (15) not null
, polyID integer 
, polyLength float not null
  , primary KEY (blockID,polyID)
, onemunicipalAuthority character (15) not null
, foreign key (polyID) references polygon
  , check (polyLength > 0)
);

Create Table Parcel (
  parcelname character (15) 
  , blockID integer 
, polyID integer 
  , primary KEY (parcelname,blockID,polyID)
, foreign key (polyID) references polygon
, foreign key (blockID) REFERENCES block 
); 
```

错误：关系必须在具有相同数据类型的相同数量的字段上，当我尝试实现最后一个时，CREATE => Parcel

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:20:38.730

试试这个命令：

```
Create Table Parcel (
  parcelname character (15) 
  , blockID integer 
, polyID integer 
  , primary KEY (parcelname,blockID,polyID)
, foreign key (polyID) references polygon
, foreign key (blockID,polyID) REFERENCES block 
); 
```

# windows - 忽略 Null 或批量输入

> ID：13555081
> 
> 赞同：1
> 
> 时间：2012-11-25T20:19:39.803
> 
> 标签：windows, batch-file

我正在运行一个批处理文件，提示用户“输入名称”。如果用户没有输入任何内容并按下回车键，那么我想一遍又一遍地显示同一个窗口，上面写着：

```
Enter Name: 
```

以下代码不起作用：

```
@echo off
:myDosFunc
set /p name=Enter Name:
IF "%name%"=="" (
call:myDosFunc
) ELSE (
echo %path%
)
pause
GOTO:EOF

call:myDosFunc 
```

我是批处理新手，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:01:33.350

这类似于 w0051977 答案，但我相信它更符合您的初衷。

```
@echo off
set "name="
:myDosFunc
set /p "name=Enter Name: "
if not defined name goto :myDosFunc
echo %path%
pause
exit /b 
```

如果您只希望提示出现一次，无论用户按 Enter 多少次而不输入任何内容，那么您可以使用：

```
@echo off
set "name="
<nul set /p "=Enter Name: "
:myDosFunc
set /p "name="
if not defined name goto :myDosFunc
echo %path%
pause
exit /b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:39:00.233

我认为这就是你所追求的：

```
@ECHO OFF
:start
SET /P uname=Please enter your name: 
IF "%uname%"=="" GOTO Error
ECHO Hello %uname%, Welcome to DOS inputs!
GOTO End
:Error
goto start
:End 
```

使用 GOTO 关键字。去这里了解更多信息： http: [//www.codeproject.com/Tips/123810/Get-user-input-from-DOS-prompt](http://www.codeproject.com/Tips/123810/Get-user-input-from-DOS-prompt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:40:38.363

问题是您试图显示 PATH 而不用双引号括起来，并且 PATH 可能包含冲突的运算符，例如**`)`**batfile 因错误而关闭。

PS：我在代码中做了其他小的更正。

```
@echo off

:myDosFunc
Set "NAME="
set /p "name=Enter Name:"

IF NOT DEFINED NAME (
    call :myDosFunc
) ELSE (
    echo "%path%"
)
pause
GOTO:EOF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:04:09.483

一个简单的解决方案是`cls`在提示输入之前添加

```
:myDosFunc
cls
set /p name=Enter Name: 
```

# go - 在磁盘上保存和加载 crypto/rsa PrivateKey

> ID：13555085
> 
> 赞同：65
> 
> 时间：2012-11-25T20:20:03.803
> 
> 标签：go, cryptography, rsa

我正在使用`crypto/rsa`，并试图找到一种*正确*保存和加载密钥的方法。有没有正确的方法`[]byte`从`rsa.PrivateKey`. 如果是这样，有没有办法正确地做到这一点`rsa.PublicKey`？

非常感谢大家。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-25T20:25:25.143

您需要某种格式来编组密钥。Go 标准库支持的一种格式可以在这里找到：http: [//golang.org/pkg/crypto/x509/#MarshalPKCS1PrivateKey](http://golang.org/pkg/crypto/x509/#MarshalPKCS1PrivateKey)

```
func MarshalPKCS1PrivateKey(key *rsa.PrivateKey) []byte 
```

反函数是[http://golang.org/pkg/crypto/x509/#ParsePKCS1PrivateKey](http://golang.org/pkg/crypto/x509/#ParsePKCS1PrivateKey)。

```
func ParsePKCS1PrivateKey(der []byte) (key *rsa.PrivateKey, err error) 
```

* * *

但是，将封送密钥编码到 PEM 文件中是相对标准的。

```
pemdata := pem.EncodeToMemory(
    &pem.Block{
        Type: "RSA PRIVATE KEY",
        Bytes: x509.MarshalPKCS1PrivateKey(key),
    },
) 
```

[您可以在此处](https://golang.org/src/crypto/tls/generate_cert.go)找到完整示例。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2017-06-22T01:07:15.367

这是显示公钥和私钥的导入和导出的代码片段。它基于其他非常有用的答案，以及来自官方文档的复制意大利面。

```
package main

import (
    "crypto/rand"
    "crypto/rsa"
    "crypto/x509"
    "encoding/pem"
    "errors"
    "fmt"
)

func GenerateRsaKeyPair() (*rsa.PrivateKey, *rsa.PublicKey) {
    privkey, _ := rsa.GenerateKey(rand.Reader, 4096)
    return privkey, &privkey.PublicKey
}

func ExportRsaPrivateKeyAsPemStr(privkey *rsa.PrivateKey) string {
    privkey_bytes := x509.MarshalPKCS1PrivateKey(privkey)
    privkey_pem := pem.EncodeToMemory(
            &pem.Block{
                    Type:  "RSA PRIVATE KEY",
                    Bytes: privkey_bytes,
            },
    )
    return string(privkey_pem)
}

func ParseRsaPrivateKeyFromPemStr(privPEM string) (*rsa.PrivateKey, error) {
    block, _ := pem.Decode([]byte(privPEM))
    if block == nil {
            return nil, errors.New("failed to parse PEM block containing the key")
    }

    priv, err := x509.ParsePKCS1PrivateKey(block.Bytes)
    if err != nil {
            return nil, err
    }

    return priv, nil
}

func ExportRsaPublicKeyAsPemStr(pubkey *rsa.PublicKey) (string, error) {
    pubkey_bytes, err := x509.MarshalPKIXPublicKey(pubkey)
    if err != nil {
            return "", err
    }
    pubkey_pem := pem.EncodeToMemory(
            &pem.Block{
                    Type:  "RSA PUBLIC KEY",
                    Bytes: pubkey_bytes,
            },
    )

    return string(pubkey_pem), nil
}

func ParseRsaPublicKeyFromPemStr(pubPEM string) (*rsa.PublicKey, error) {
    block, _ := pem.Decode([]byte(pubPEM))
    if block == nil {
            return nil, errors.New("failed to parse PEM block containing the key")
    }

    pub, err := x509.ParsePKIXPublicKey(block.Bytes)
    if err != nil {
            return nil, err
    }

    switch pub := pub.(type) {
    case *rsa.PublicKey:
            return pub, nil
    default:
            break // fall through
    }
    return nil, errors.New("Key type is not RSA")
}

func main() {

    // Create the keys
    priv, pub := GenerateRsaKeyPair()

    // Export the keys to pem string
    priv_pem := ExportRsaPrivateKeyAsPemStr(priv)
    pub_pem, _ := ExportRsaPublicKeyAsPemStr(pub)

    // Import the keys from pem string
    priv_parsed, _ := ParseRsaPrivateKeyFromPemStr(priv_pem)
    pub_parsed, _ := ParseRsaPublicKeyFromPemStr(pub_pem)

    // Export the newly imported keys
    priv_parsed_pem := ExportRsaPrivateKeyAsPemStr(priv_parsed)
    pub_parsed_pem, _ := ExportRsaPublicKeyAsPemStr(pub_parsed)

    fmt.Println(priv_parsed_pem)
    fmt.Println(pub_parsed_pem)

    // Check that the exported/imported keys match the original keys
    if priv_pem != priv_parsed_pem || pub_pem != pub_parsed_pem {
            fmt.Println("Failure: Export and Import did not result in same Keys")
    } else {
            fmt.Println("Success")
    }
} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-08-15T10:22:59.277

由于**您的问题的公钥部分**没有得到回答，我只是遇到了同样的问题并解决了它，这里是：

注意`&`Argument 前面的`MarshalPKIXPublicKey`

```
Priv := rsa.GenerateKey(rand.Reader, 4096)

pubASN1, err := x509.MarshalPKIXPublicKey(&Priv.PublicKey)
if err != nil {
    // do something about it
}

pubBytes := pem.EncodeToMemory(&pem.Block{
    Type:  "RSA PUBLIC KEY",
    Bytes: pubASN1,
})

ioutil.WriteFile("key.pub", pubBytes, 0644) 
```

* * *

相关阅读：

*   MarshalPKIXPublicKey(pub interface{}) ([]byte, error) [**godoc**](http://golang.org/pkg/crypto/x509/#MarshalPKIXPublicKey)
*   EncodeToMemory(b *Block) []byte [**godoc**](http://golang.org/pkg/encoding/pem/#EncodeToMemory)
*   阻止[**godoc**](http://golang.org/pkg/encoding/pem/#Block)

PS：MarshalPKIXPublicKey 也接受 ECDSA 密钥，适当调整 pem 标头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-18T19:10:35.257

仅供参考：我完善了@David W 的答案并将其放入一个小型 Go 模块中。 [https://github.com/rokk4/gorsapemhelpers](https://github.com/rokk4/gorsapemhelpers)

# python - 在 Nginx 上使用 uWSGI 部署 Pyramid 的问题

> ID：13555091
> 
> 赞同：2
> 
> 时间：2012-11-25T20:20:36.283
> 
> 标签：python, nginx, pyramid, web-deployment, init

我似乎在部署 Pyramid Web 应用程序时遇到了一些小问题。问题似乎出在我用来在启动时启动 Web 应用程序的初始化脚本中。出于某种原因，除非我的套接字设置为具有“nobody.nobody”的权限或在我的 uwsgi 初始化脚本之后启动 Nginx，否则 uWSGI 将无法工作。我更改了我的初始化脚本以反映这些更改，但它似乎没有工作。初始化脚本（或启动 uwsgi 的部分）如下所示：

```
#!/sbin/runscript
args="--ini-paste /var/www/pyramid/app1/development.ini"
command="/var/www/pyramid/bin/uwsgi"
pidfile="/var/run/uwsgi.pid"
sock="/var/tmp/proxy/uwsgi.sock"
nobody="nobody.nobody"

start() {
  ebegin "Starting app1"
  chown $nobody $sock
  start-stop-daemon --start --exec $command -- $args \
      --pidfile $pidfile 
  chown $nobody $sock
  einfo "app1 started"
  eend $?
} 
```

我的 Nginx 配置如下所示：

```
location / { 
    include uwsgi_params;
    uwsgi_pass unix:///var/tmp/proxy/uwsgi.sock;
    uwsgi_param SCRIPT_NAME "" ;
} 
```

我的ini文件包括以下内容：

```
[uwsgi]
socket = /var/tmp/proxy/uwsgi.sock
pidfile = /var/run/uwsgi.pid
master = true
processes = 1
home = /var/www/pyramid
daemonize = /var/log/uwsgi.log
virtualenv = /var/www/pyramid/
pythonpath = /var/www/pyramid/bin 
```

发生的情况是 Nginx 将启动，然后 uwsgi 将启动。在 /var/tmp/proxy 中执行“ls -la”显示 uwsgi.sock 的权限设置为“root root”而不是“nobody nobody”。但是，无论套接字的权限是什么，重启 Nginx 都会解决问题（但必须先启动 Nginx）。

因此，我可以让它工作的方法是：

*   启动uwsgi
*   启动 nginx
*   重启 nginx

或者

*   启动 nginx
*   启动uwsgi
*   重启 nginx

我完全不知道为什么这不起作用。如果有人有任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T16:43:35.347

您可以使用以下设置在您的 ini 文件中更改其套接字的权限：

```
chmod-socket = 777 # socket permission
gid = www-data # socket group 
uid = www-data # socket user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T14:19:20.340

要考虑的另一件事是您是否真的希望 uWSGI 以 root 身份运行。如果您将 --uid 和 --gid 参数传递给 uwsgi，uwsgi 将伪装成不同的（最好是非 root）用户。

例如，nginx 通常作为 www-data 用户和 www-data 组运行。因此，如果您将 wsgi 应用程序设置为使用“--gid www-data”运行，然后使用“--chmod-socket 020”向您的套接字文件添加至少组写入权限，那么 nginx 将能够写入插座，你就可以做生意了。

请参阅我关于该主题的博客文章：http: [//blog.jackdesert.com/common-hurdles-to-deploying-uwsgi-apps-part-1](http://blog.jackdesert.com/common-hurdles-to-deploying-uwsgi-apps-part-1)

# titanium - 错误构建项目：钛移动

> ID：13555095
> 
> 赞同：0
> 
> 时间：2012-11-25T20:20:58.267
> 
> 标签：titanium, titanium-mobile

我有一个使用 Titanium Mobile 平台编写的应用程序，它在模拟器上运行良好，但是当我尝试为我的设备构建时，它给出了这个错误。

```
[INFO] Performing clean build
[ERROR] 
[ERROR] Error: Traceback (most recent call last):
  File "/Library/Application Support/Titanium/mobilesdk/osx/1.7.1/iphone/builder.py", line 1296, in main
    execute_xcode("iphoneos%s" % iphone_version,args,False)
  File "/Library/Application Support/Titanium/mobilesdk/osx/1.7.1/iphone/builder.py", line 1057, in execute_xcode
    output = run.run(args,False,False,o)
  File "/Library/Application Support/Titanium/mobilesdk/osx/1.7.1/iphone/run.py", line 39, in run
    sys.exit(rc)
SystemExit: 1 
```

有人知道这个错误是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:27:13.640

当我尝试将我的项目安装到我的设备时，我遇到了同样的错误。我使用了以下步骤

*   清理你的项目（项目->清理）
*   关闭你的模拟器
*   重新启动您的 Titanium 工作室
*   然后将项目安装到您的设备

希望这对你有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:00:32.697

根据评论...

> 不幸的是，这不是一个描述性很强的错误。要获取有关问题的更多信息，您可以在 build/iphone 中打开 Xcode 项目，然后尝试从那里部署到设备吗？– Dawson Toth 23 小时前
> 
> 我这样做了 - 并以这种方式发现了问题。我还找到了一个日志文件：build/iphone/build/build.log，它可能会更能说明问题。钛的错误报告非常糟糕，有时感觉就像是用百日签和图钉拼凑在一起的。原来我的错误是在代码设计过程中使用过期的密钥 - 解决方案是寻找有意义的错误消息 - 无论它可能是什么。感谢您的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:23:32.200

尝试以下操作：

确保如果您使用的是本地化文件，这些文件中没有错误。如果您使用任何类型的模块，请确保该模块与您的 SDK 兼容。清理您的解决方案，然后再次运行该项目。让你的模拟器休息

在这里问同样的问题

[没有这样的文件或目录：app.ap_](https://stackoverflow.com/questions/13482380/no-such-file-or-directory-app-ap)

# c - Linux C逐行读取文件

> ID：13555097
> 
> 赞同：-4
> 
> 时间：2012-11-25T20:21:06.330
> 
> 标签：c, linux

如何在linux C中逐行编码读取文件？

在 Windows C++ 中，我使用 ifstream。

不懂linux，求指教？

好吧，伙计们放松一下，不要这么沮丧。

这是代码：

```
char fpath = "file.txt";
char names;
FILE *fp;

ifstream fs(fpath);

while (fs >> names)
{
  // here is some buffer to send to a server.
} 
```

所以在这里我需要从 file.txt 中读取每一行并将每一行发送到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:23:41.370

标准 C 库中的`fgets`函数在 Windows 和 Linux 上读取一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:32:00.280

在 linux 上，您可以使用 POSIX 库，因此您想使用[`getline`](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T20:30:56.443

> 在 Windows C++ 中，我使用 ifstream。

*ifstream*是 C++ 标准库的一部分，不绑定到任何操作系统。ifstream 在 Linux 中的工作方式与在 Windows 中一样。

# javascript - JQuery 的 .on() 无法正常工作

> ID：13555098
> 
> 赞同：0
> 
> 时间：2012-11-25T20:21:08.667
> 
> 标签：javascript, jquery

我的设置非常简单，我无法理解为什么这不起作用。我知道这是正确的，但它不起作用。

`.navigate-button`正在被 ajax 处理，`.overlay-content`因此`.overlay-content`不在页面加载时的 dom 中，因此使用`.on`

当我单击链接时，它只会像往常一样将我带到该页面。我知道即使不被束缚`.navigate-button`

标记：

```
<div class="overlay" id="overlay">
    <div class="overlay-content--bg">
        <div class="overlay-content">

    <a class="navigate-button left" href="/question.php?id=<?php echo $json->id-1;$json->id+1; ?>">
        <
    </a>
    <a class="navigate-button right" href="/question.php?id=<?php echo $json->id+1; ?>">
        >
    </a>
        </div>
    </div>
</div> 
```

JS：如果我在控制台中运行此代码，它会按预期工作

```
$('#overlay').on('click','.navigate-button', function(){
    var id = $(this).attr('href');
    id = id.split('=');
    console.info(id[1]);
    callPage(id[1]);
    return false;
});

function callPage (id) {
    $.ajax({
        url:'/question.php?id='+id,
        success: function(data){
            $('.overlay-content').html(data);
            FB.XFBML.parse(document.getElementById('overlay'));
            $('.overlay').fadeIn();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:11:00.303

我们在聊天中解决了这个问题。Jamie 的问题是`.navigate-button`div 上的 click 事件没有冒泡到`#overlay`div，因为它被调用`.stopPropagation`它的处理程序捕获和处理。解决方案是删除该中间处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:41:30.443

你试过这个吗？

```
$(document).on('click', '.navigate-button', function() {
    YOUR FUNCTION
}); 
```

# php - 正则表达式去除特定 HTML 标记内的字符串

> ID：13555099
> 
> 赞同：0
> 
> 时间：2012-11-25T20:21:39.480
> 
> 标签：php, regex, preg-replace

我正在尝试删除一个字符串，该字符串仅在使用 cURL 获得的页面上出现一次。例子：

```
<h3 class=" ">STRING IN QUESTION</h3> 
```

或者

```
<h3 class="active">STRING IN QUESTION</h3> 
```

或者

```
<h3 class=" active">STRING IN QUESTION</h3> 
```

我想使用 preg_match 来做到这一点，除非它可以用资源较少的方法来完成。

这是我正在使用的正则表达式，它产生零结果：

```
<h3\sclass="\s">(.*?)</h3> 
```

编辑：

这是实际代码（此处使用的实际 URL 代替动态 URL）- 发现当通过 cURL 拉取时，类属性不存在，但仍无法正常工作，如下所示：

```
$ch = curl_init ("URL IN QUESTION"); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$page = curl_exec($ch);

preg_match('<h3>(.*?)</h3>', $page, $match);

print_r($match); 
```

什么都不打印

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:39:34.010

这可以解决问题：

```
$str='<h3 class=" ">STRING IN QUESTION</h3>';
preg_match('/<h3.*?>(.*?)<\/h3>/',$str,$match);
print_r($match); 
```

输出：

```
Array
(
    [0] => <h3 class=" ">STRING IN QUESTION</h3>
    [1] => STRING IN QUESTION
) 
```

解释：

```
<h3.*?> # Match h3 tags (non-greedy)
(.*?)   # Match everything after tag (non-greedy, captured)     
<\/h3>  # Match closing tag - Note the escaped forward slash! 
```

但是，该 URL`<h3>`不包含标签，但它确实包含`<h1>`标签，并且要匹配它，您需要使正则表达式匹配带有尾随的换行符`s`

`preg_match('/<h1.*?>(.*?)<\/h1>/s',$page,$match);`

输出：

```
Array
(
    [0] => <h1 class="">
<span class="pageTitle ">Braman Motorcars</span>
</h1>
    [1] => 
<span class="pageTitle ">Braman Motorcars</span>

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:25:51.367

也许：

```
<h3\s+class="\s*(active)?">(.*?)</h3> 
```

然后使用`\1`检索“活动”或“”以及`\2`“有问题的字符串”

我从来没有做过任何 php，但也许这会起作用？：

```
$result = "not found"
if (preg_match('#<h3\s+class="\s*(active)?">(.*?)</h3>#', $page, $match))
{
    $result = $match;
}
print_r($result) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:37:14.747

尝试：

```
preg_match('#<h3\s?class="\s?(active)?">(.+)</h3>#', $yourString, $match); 
```

请记住，在您的正则表达式中，您必须始终提供[delimiter](http://php.net/manual/en/regexp.reference.delimiters.php)。

# javascript - 无限滚动和 will_paginate 多次附加项目的“下一页”

> ID：13555101
> 
> 赞同：5
> 
> 时间：2012-11-25T20:21:56.230
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript, will-paginate

我正在关注[这个 railscast](http://railscasts.com/episodes/114-endless-page-revised)，试图在我的 rails 应用程序上实现无限滚动页面。当用户向下滚动到页面底部时，会附加一组新的项目并且页面会扩展，但是它会多次附加到页面，并且即使数组中的所有项目都已加载，事件也会在向下滚动时再次触发, 多次附加同一组项目。

我想要的是每次用户滚动到底部时附加项目的“下一页”，并在用户再次滚动到底部时附加后续页面。

这是这个函数的 jQuery：

```
jQuery ->
  if $('.pagination').length
          $(window).scroll ->
                  url = $('.pagination .next_page').attr('href')
                  if url &&  $(window).scrollTop() > $(document).height() - $(window).height() - 50
                      $('.pagination').text('Fetching more products...')
                      $.getScript(url)
$(window).scroll() 
```

这是相应的javascript

```
$('#products').append('<%= j render(@products) %>');
<% if @products.next_page %>
    $('.pagination').replaceWith('<%= j will_paginate(@products) %>');
<% else %>
    $('.pagination').remove();
<% end %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T21:26:16.733

`$.getScript(url)`当用户从底部滚动到 50px 时，您的代码将触发调用。如果他们从底部滚动到 49px，则再次调用。然后另一个如果他们从底部滚动到 48px，这将一直持续到一个 AJAX 调用返回并使页面变高；一旦页面变高，您将超出 50px 区域，*获取更多产品...*将停止。

你一次只想要一个`getScript`。一旦他们滚动到 50px 区域，您想从服务器获取更多内容（仅一次）然后忽略后续滚动，直到服务器响应。

你应该做更多这样的事情：

```
$(window).scroll ->
    # Bail out right away if we're busy loading the next chunk.
    return if(window.pagination_loading)

    url = $('.pagination .next_page').attr('href')
    if url &&  $(window).scrollTop() > $(document).height() - $(window).height() - 50
        # Make a note that we're busy loading the next chunk.
        window.pagination_loading = true

        # Load as before but attach a callback to clear the flag when we're done.
        $('.pagination').text('Fetching more products...')
        $.getScript(url).always -> window.pagination_loading = false 
```

[`$.getScript`](http://api.jquery.com/jQuery.getScript/)返回 a[`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR)并在底层调用完成时调用`jqXHR`的回调。[`always`](http://api.jquery.com/deferred.always/)`$.ajax`

# java - 如何从 Java 浏览器小程序流式传输到小程序

> ID：13555106
> 
> 赞同：0
> 
> 时间：2012-11-25T20:22:21.977
> 
> 标签：java, applet, jmf

我要两个小程序。。

1.  传输器小程序，将用户的屏幕+音频从麦克风传输到 getParameter("IP") 和 getParameter("PORT")。用户点击“传输”按钮并批准后，传输完成。

2.  接收器小程序，它接收来自 getParameter("IP") 和 getParameter("PORT") 的传输，并通过音量、播放/暂停、全屏控制进行播放。并且可以将流保存到 mpeg 文件中。

任何人都可以建议如何在 java 中从 applet 流式传输到 applet？

谢谢你，罗纳克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:22:54.030

我使用了 ROBOT 类和 JMF .. [http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html) http://grack.com/downloads/school/enel619.10 /report/java_media_framework.html

# java - 如何告诉/欺骗每个站点，我是从 PC 输入的（更改 X-WAP-Profile？）？

> ID：13555108
> 
> 赞同：1
> 
> 时间：2012-11-25T20:22:24.090
> 
> 标签：java, android, android-webview

我有一个 webview，它显示网站的移动版本。我做了“切换”，如果他愿意，它允许用户切换到完整版的网站。因此，首先用户转到网站的移动版本，然后他可以切换“切换”并加载网站的完整版本。

现在发生了什么：对于某些站点，只需更改用户代理就足够了，并且当切换“切换”时，它们会从 PC 加载。但是有些网站仍然能够检测到，我从移动设备进入并且仍然向我显示移动版本。

***我如何告诉所有网站，“我”不是移动设备，而是 PC？*** 就像是：

```
webView.getSettings().iAmPC(true); 
```

PS：例如：适用于 Android（和 Firefox）的 Opera mobile 具有此功能（如果我在首选项中选择“桌面”，每个站点都会给我它的完整版本）。Android 默认浏览器 2.3.6 - 不是。

PPS：如果你知道如何在 webview 中实现它，它也会很有用。

**更新：**似乎应该更改*X-WAP-Profile 标头*，但仍未找到解决方案。[这里提到](http://forum.xda-developers.com/showthread.php?t=1284963)了一种解决方案，但它似乎在应用程序内无法使用。

PPPS：我的应用程序具有 root 访问权限，因此也接受需要 root 访问权限的解决方案

尝试使用随机或空标题的[shouldOverrideUrlLoading](https://stackoverflow.com/a/8209272/1548085)`Accept` - 无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:28:37.920

一些网站`navigator`使用脚本查询对象以检查浏览器品牌/版本。Opera 会覆盖它，您可能也想要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:02:02.273

[在 Webkit 的FrameLoader](http://androidxref.com/4.0.4/xref/frameworks/base/core/java/android/webkit/FrameLoader.java#381)中添加了 x-wap-profile 标头。因此，需要更改固件才能删除此标头。

您可以做的是尝试拥有自己的 httpclient 并自己获取内容。已在此[帖子上尝试过](https://stackoverflow.com/q/6993672/1109425)

编辑：更新。

```
DefaultHttpClient client = new DefaultHttpClient();
comments.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url){

                String content = "";
                try {
                   content = getUrlContent(url)
                } catch (Exception e) {
                   e.printStackTrace();
                }
                view.loadDataWithBaseURL("BaseWebUrl", content, "text/html", "utf-8", "");
                return true;
            }
        });

    synchronized String getUrlContent(String url) {

        // Create client and set specific user-agent string
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet(url);
        //request.setHeader("User-Agent", sUserAgent);

        try {
            HttpResponse response = client.execute(request);

            // Check if server response is valid
            StatusLine status = response.getStatusLine();
            if (status.getStatusCode() != HTTP_STATUS_OK) {
               return "Error";
            }

            // Pull content stream from response
            HttpEntity entity = response.getEntity();
            return EntityUtils.toString(entity)
    }
} 
```

# ruby-on-rails - has_one 和 has_many

> ID：13555111
> 
> 赞同：1
> 
> 时间：2012-11-25T20:22:32.147
> 
> 标签：ruby-on-rails, ruby, activerecord, associations, mongoid

我有一个`Team`对象和一个`Game`对象。

A`Game`应该有一个赢家 这是一个`Team` A`Team`可以是多个赢家`Games`

我怎样才能正确地构造它？我正在使用 Mongoid

这是我到目前为止想出的...

```
class Game
  include Mongoid::Document
  include Mongoid::Timestamps
  has_one :winner, :class_name=>Team
end

class Team
  include Mongoid::Document
  include Mongoid::Timestamps
  has_and_belongs_to_many :games_won, :class_name=>"Game", :inverse_of => :Game 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:45:42.483

考虑将胜利抽象到它自己的类中，这样：

```
class Game
  has_one :win
end

class Team
  has_many :wins
end

class Win
  belongs_to :game
  belongs_to :team
end 
```

这使结构更合乎逻辑，使代码更简单，并且在您可能出于其他原因希望将 win 作为单独资源开始使用的情况下具有其他优势。

# r - 在 x 轴上重新排序月份结果 (ggplot)

> ID：13555115
> 
> 赞同：5
> 
> 时间：2012-11-25T20:23:04.393
> 
> 标签：r

我想**在 x 轴上生成一个重新排序月份的图**（而不是从一月开始到十二月结束，我想从四月开始到三月结束）。

我的**数据**是这样的：

```
 Month         An              Fiscal.Year Month.Number Month.Name
    1     2009-04-01    40488474        2009        4            Apr
    2     2009-05-01    53071971        2009        5            May
    3     2009-06-01    24063572        2009        6            Jun
    ...
    44    2012-11-01    39457771        2012        11           Nov
    45    2012-12-01    44045572        2012        12           Dec
    46    2013-01-01    90734077        2012        1            Jan 
```

我制作情节的**代码**是：

```
g <- ggplot(data = data, aes(x = Month.Number, y = An)) +
     geom_line(aes(group = Fiscal.Year, colour = factor(Fiscal.Year))) +    
     scale_x_discrete(
       name = "Month", 
       breaks = data$Month.Number,
       labels = data$Month.Name
     ) +
     scale_y_continuous(); 
```

但结果是从一月到十二月按月排序的图，而不是我想要的从四月到三月的图。我已经尝试了 scale_x_discrete 中的 limits 选项，但我认为这只是重新排序 x 轴标签，而不是真实数据。

请你帮助我好吗？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T21:11:42.690

您必须重新排序 的因子水平`Month.Name`。假设`df`是你的data.frame：

```
df$Month.Name <- factor( df$Month.Name, levels = c( "Apr", "May", ..., "Feb", "Mar" ) )
g <- ggplot(data = df, aes(x = Month.Name, y = An) ) +
     geom_line(aes(group = Fiscal.Year, colour = factor(Fiscal.Year))) +    
     scale_x_discrete( name = "Month" ) +
     scale_y_continuous(); 
```

或者你可以改变`Month.Number`这样，Apr 是 1，May 是 2 等等......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T21:26:17.280

在绘图之前运行：

```
data$Month.Number <- ((data$Month.Number+8) %% 12) + 1 
```

# ruby-on-rails - Ruby on Rails 教程清单 6.23 中的变量调用

> ID：13555123
> 
> 赞同：1
> 
> 时间：2012-11-25T20:23:54.520
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

问题与[Rails 教程](http://ruby.railstutorial.org)有关。特别是我对[清单 6.23](http://ruby.railstutorial.org/chapters/modeling-users#code-email_downcase)有疑问，这一行：

```
before_save { |user| user.email = email.downcase } 
```

我对变量“email”很好奇——它从何而来？调用左侧变量是某种简短的 Ruby 语法吗？还是它调用模型的属性（虽然它会使传递块变量变得多余）？

我会很感激任何能让我摆脱困惑的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:35:40.257

是的，您可以省略将用户传递给块

```
before_save { self.email = email.downcase } 
```

我个人不喜欢使用块并为此编写命名方法

```
before_save :reformat_email

private
def reformat_email
  self.email = email.downcase
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:34:52.623

**这仅在示例中与在 ActiveRecord::Base 类中使用 before_save 的示例`user`相同时才有效`self`**

`email`是 的缩写`user.email`，但是当分配一个你不能使用的值时`email =`，你必须这样做，`user.email =`否则你只会分配给一个局部变量。

`user.email`这个例子正在改变什么`user.email.downcase`

而且我认为，当您将 a`before_save`与论点一起使用时，它将`self`在该论点中

# virus - 从何处获取特定病毒以进行调试？

> ID：13555125
> 
> 赞同：0
> 
> 时间：2012-11-25T20:24:08.060
> 
> 标签：virus

这是一个有点尴尬的问题，并且可能偏离主题，但归根结底是为了帮助调试软件问题：如何获取特定病毒用于测试目的？

我们收到了关于我们的软件在某些机器上出现故障的报告，我们认为我们已经（通过研究和推断）确定原因是 TDSS/TLD3 rootkit 系列的变种。

我们需要确定这是否真的如此，如果是这样，我们希望在执行我们的代码之前修补我们的代码以消除 TDSS 感染。但是，我找不到任何方法来实际获得 TDSS 样本来测试这个理论。没有在文件共享网站上搜索评论中有人说“当心，这个文件感染了 TDSS”，我想不出任何其他采样病毒的方法？是否没有用于此类目的的旧病毒数据库（类似于 CDC 用于医学研究目的的旧病毒库！）？

再一次，我确实意识到这不是一个“标准”的 StackOverflow 问题，但我想我会在这里发帖，希望有人能在这个问题上分享一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:35:05.407

这是安全分析师关于 TDSS 的深入文章：http: [//nobunkum.ru/analytics/en-tdss-analysis](http://nobunkum.ru/analytics/en-tdss-analysis)。您可能想联系作者。

# javascript - Javascript编译器行为-空数组和零数组的双加是..一

> ID：13555133
> 
> 赞同：3
> 
> 时间：2012-11-25T20:24:54.077
> 
> 标签：javascript

我的问题可能已经得到解答，但我在搜索引擎 google 或 bing 不喜欢“+”（加号）登录搜索请求中找不到它。

**无论如何，为什么这是零**

```
+[[]][0] // = 0 
```

**这是一个**

```
++[[]][0] // = 1 
```

**UPD：** 迈克尔·伯科夫斯基有一个很好的答案，但我偷不明白一件事

如果`[[]][0]`评估为一个空数组，那么为什么`++[]`是`ReferenceError: Invalid left-hand side expression in prefix operation`

**UPD2：** 现在我明白了..似乎我试图在控制台中输入 ++0 并得到一个错误，但我应该使用 var a = 0; ++一个

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T20:27:19.333

最好通过分解其组件的评估方式来探索这一点。

`[[]][0]`单独计算为空数组`[]`。通过`+`在前面添加，您可以通过一元正运算符 将其字符串表示形式转换为整数 0（例如说`+4`or ）。只是。`-3``+0``0`

`++`作为数字运算符，也将空字符串转换为整数`0`，但应用其操作（前缀增量）结果 `1`。

```
[[]][0]
// [] empty array
[[]][0].toString()
// ""

// Unary + casts the empty string to an integer
+("")
// 0

// Prefix increment on an empty string results in 1 (increments the 0)
var emptyString = "";
++emptyString;
// 1 
```

# c# - 如何在 ADO.NET 中捕获空参数并允许使用 DBNull 进行解析

> ID：13555134
> 
> 赞同：0
> 
> 时间：2012-11-25T20:24:56.823
> 
> 标签：c#, database, parsing, parameters, ado.net

所以我将这 18 个参数传递给我的 DAL，然后插入或更新我的 Access 数据库。

我有 2 个字段，`DateTime`一个是 and `int`。DateTime 和 int 参数都不是必需的，这意味着可以是空字符串。

当我通过我的时候遇到了一个问题`txtBirthDate.Text, txtHireDate.Text, and txtReportsTo.Text`，如果它们被保留为空，我的 DAL 会用`FormatException`无法通过解析空元素的方式向我尖叫。

所以我现在的问题是，我不确定在哪里解析`DateTime`and`int`变量以允许我的参数接受它们。我也不确定如何将这些变量设置`DBNull.Value`为已通过我的 DAL 作为空字符串传递的变量。

这是我的 DAL 方法调用的示例：

```
rowsAdded = ((DataAccessLayer)Application["dbAccess"]).insertEmployees(txtLname.Text, txtFname.Text, txtTitle.Text, 
         txtCourt.Text,txtBday.Text,txtHireDate.Text, txtAddress.Text, txtCity.Text,txtRegion.Text,txtPostalCode.Text,
         txtCountry.Text, txtHomePhone.Text, txtExtension.Text, upPhoto.FileName.ToString(),txtNotes.Text,txtReports.Text,txtPassword.Text); 
```

这是我的 DAL 方法：

```
 public int insertEmployees(string lname, string fname, string title, string toc, string birth, string hire, string address, string city,
    string region,string postal,string country, string phone, string ext,string photo, string notes, string report, string pass)
{
    string last = lname;
    string first = fname;
    string tlt = title;
    string tOfc = toc;
    string addy = address;
    string town = city;
    string reg = country;
    string phum = phone;
    string exten = ext;
    string rep = report;// THIS IS Int
    string pas = pass;
    string pc = postal;
    string note = notes;
    string regions = region;
    string hD = hire;// THIS IS DATETIME
    string bD = birth;// THIS IS DATETIME
    string pho = photo;
    int rows = 0;
        dbString = "INSERT INTO [Employees] ([LastName],[FirstName],[Title],[TitleOfCourtesy],[BirthDate],[HireDate],[Address],[City],[Region],[PostalCode]," +
        "[Country],[HomePhone],[Extension],[Photo],[Notes],[ReportsTo],[Password]) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
        string queryLast = "Select @@Identity";

        conn.Open();
        oleCommand = new OleDbCommand(dbString, conn);

        oleCommand.Parameters.Add(new OleDbParameter("@LastName", OleDbType.VarChar, 20, ParameterDirection.Input, false, 10, 0, "LastName", DataRowVersion.Original, null)).Value = last;
        oleCommand.Parameters.Add(new OleDbParameter("@FirstName", OleDbType.VarChar, 10, ParameterDirection.Input, false, 10, 0, "FirstName", DataRowVersion.Original, null)).Value = first;
        oleCommand.Parameters.Add(new OleDbParameter("@Title", OleDbType.VarChar, 30, ParameterDirection.Input, true, 10, 0, "Title", DataRowVersion.Original, null)).Value = tlt ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@TitleOfCourtesy", OleDbType.VarChar, 25, ParameterDirection.Input, true, 10, 0, "TitleOfCourtesy", DataRowVersion.Original, null)).Value = tOfc ?? (object)DBNull.Value;
//DATE  oleCommand.Parameters.Add(new OleDbParameter("@BirthDate", OleDbType.DBDate, 20, ParameterDirection.Input, true, 10, 0, "BirthDate", DataRowVersion.Original, null)).Value = (object)bD ?? DBNull.Value;
//DATE  oleCommand.Parameters.Add(new OleDbParameter("@HireDate", OleDbType.DBDate, 20, ParameterDirection.Input, true, 10, 0, "HireDate", DataRowVersion.Original, null)).Value = (object)hD ?? DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@Address", OleDbType.VarChar, 60, ParameterDirection.Input, true, 10, 0, "Address", DataRowVersion.Original, null)).Value = addy ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@City", OleDbType.VarChar, 15, ParameterDirection.Input, true, 10, 10, "City", DataRowVersion.Original, null)).Value = phum ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@Region", OleDbType.VarChar, 15, ParameterDirection.Input, true, 10, 0, "Region", DataRowVersion.Original, null)).Value = regions ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@PostalCode", OleDbType.VarChar, 10, ParameterDirection.Input, true, 10, 0, "PostalCode", DataRowVersion.Original, null)).Value = pc ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@Country", OleDbType.VarChar, 15, ParameterDirection.Input, true, 10, 0, "Country", DataRowVersion.Original, null)).Value = reg ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@HomePhone", OleDbType.VarChar, 24, ParameterDirection.Input, true, 10, 0, "HomePhone", DataRowVersion.Original, null)).Value = phum ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@Extension", OleDbType.VarChar, 4, ParameterDirection.Input, true, 10, 0, "Extension", DataRowVersion.Original, null)).Value = exten ?? (object)DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@Photo", OleDbType.VarChar, 255, ParameterDirection.Input, true, 10, 0, "Photo", DataRowVersion.Original, null)).Value = pho ?? (object)DBNull.Value; ;
        oleCommand.Parameters.Add(new OleDbParameter("@Notes", OleDbType.VarWChar, 255, ParameterDirection.Input, true, 10, 0, "Notes", DataRowVersion.Original, null)).Value = note ?? (object)DBNull.Value;
  //INT oleCommand.Parameters.Add(new OleDbParameter("@ReportsTo", OleDbType.Integer, 2, ParameterDirection.Input, true, 10, 0, "ReportsTo", DataRowVersion.Original, null)).Value = (object)rep ?? DBNull.Value;
        oleCommand.Parameters.Add(new OleDbParameter("@Password", OleDbType.VarChar, 255, ParameterDirection.Input, false, 10, 0, "Password", DataRowVersion.Original, null)).Value = pas ?? (object)DBNull.Value;
        rows = (int)oleCommand.ExecuteNonQuery();
        oleCommand.CommandText = queryLast; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:26:34.480

对于字符串值，您可以使用此表达式：

```
oleCommand.Parameters.Add(new OleDbParameter("@LastName", OleDbType.VarChar, 20, 
                                             ParameterDirection.Input, false, 10, 
                                             0, "LastName", 
                                             DataRowVersion.Original, null)
                         ).Value = String.IsNullOrEmpty(last) ? DBNull.Value : last; 
```

对其余的字符串值重复此操作

# javascript - 使用变量选择时JQuery非法调用

> ID：13555135
> 
> 赞同：0
> 
> 时间：2012-11-25T20:25:01.753
> 
> 标签：javascript, jquery

我的 javascript 似乎不喜欢`var divTag = '#' + ratinglistid + " > select[name=SelectedValue] > option:selected";`

我找不到答案搜索.. 很抱歉格式混乱，无法让它消失。

```
 Script:

<script>
    function doSubmit(form, myRating, ratinglistid){
        var divTag = '#' + ratinglistid + " > select[name=SelectedValue] > option:selected";
        var ratingValue = $(divTag);
        $.ajax({
            type: "GET",
            url: "/RatingLists/Done",
            data: ({
                myrating: ratingValue,
                myRatingListId: ratinglistid
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        });
    }
</script> 
```

Html 我想从中获得价值：

```
 <div id='2'>
    <input type="hidden" name="RatingListId" value="2"/>
    <select id="SelectedValue" name="SelectedValue" onchange="doSubmit($(this).parents(&#39;form&#39;),2);"><option value="1">Inget intresse, tas bort</option>
    <option value="2">Svagt intresse, sparas</option>
    <option selected="selected" value="3">Intresserad-ingen kontakt &#228;n</option>
    <option value="4">4-Intreserad-vill ha kontakt</option>
    <option value="5">5-Vill byta!</option>
    <option value="100">6-Avvaktar v&#228;rdar</option>
    </select>
    </div 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:29:08.623

`Illegal invocation`您正在尝试在导致错误的 ajax 函数中传递要序列化的 jQuery 对象，使用`.val()`来获取表单元素的值。

```
data: ({
    myrating: ratingValue.val(),
    myRatingListId: ratinglistid
}), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:58:58.570

它无法在 get 调用内部进行评估，所以我不得不这样做：

```
var divTag = '#' + ratinglistid + " > select[name=SelectedValue] > option:selected";
var ratingValue = $(divTag).val();
    $.ajax({
                type: "GET",
                url: "/RatingLists/Done",
                data: ({
                    myrating: ratingValue,
                    RatingListId: ratinglistid
                }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: OnSuccess(ratinglistid),
                error: function () {
                    var id = ratinglistid;
                    $('#' + id + "tbody td").hover(function () {
                        $(this).parents('tr').addClass('highlight');
                    }, function () {
                        $(this).parents('tr').removeClass('highlight');
                    });
                }
            }); 
```

# objective-c - GUI 元素对属性的变化没有反应

> ID：13555137
> 
> 赞同：0
> 
> 时间：2012-11-25T20:25:09.527
> 
> 标签：objective-c, xcode, cocoa, binding, properties

我在我的应用程序委托中创建了一个 bool 类型的属性：

在 AppDelegate.h 中：

```
@property(assign) BOOL myProp; 
```

在 AppDelegate.m 中：

```
@synthesize myProp; 
```

然后在 XIB 文件中，我为按钮的 Enabled 属性打开了绑定编辑器。我已启用绑定并将其设置为“App Delegate”。对于我选择的模型密钥路径：

> self.myProp

当我运行应用程序并切换我的属性值时，什么也没有发生。该按钮不会更改其启用状态。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:26:46.563

当您分配给该属性时，您是通过`self.myProp = foo`还是`myProp = foo`？后者使用直接 ivar 访问，它绕过了[KVO](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-BAJEAIEE)（Key-Value Observing，Bindings 的基础组件）。您可以[手动触发 KVO 通知](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW3)，但更好的选择几乎总是通过 setter 方法（如 self. 所做的那样）分配并隐式获取[自动更改通知。](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW1)

请注意，为了让它生成一个 setter，您需要私下将您的属性重新声明为 readwrite，您可以使用[类扩展](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW19)来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:30:28.280

首先它应该被声明为 BOOL，其次你已经将它声明为只读（如果你想改变你必须删除只读的值）

设置您使用的 BOOL`self.myProp = YES/NO;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:16:59.513

![在此处输入图像描述](../Images/cc5c907178fcbc8d78025533992f866c.png)我试图以这种方式解决这个问题

在 AppDelegate.h

```
@property (assign)BOOL myProp;
- (IBAction)onOff:(id)sender; //to switch the value of myProp 
```

在 AppDelegate.m

```
@synthesize myProp;

- (id)init{
    self = [super init];
    if (self) {
        myProp=NO;
    }
    return self;
}

- (IBAction)onOff:(id)sender {
    NSLog(@"before myProp=%d",myProp);
    self.myProp=!myProp;
    NSLog(@"after myProp=%d",myProp);

} 
```

目标按钮的 Enabled 设置为 App Delegate。

模型键路径设置为 self.myProp

它完成了！

# c++ - setsockopt 错误 WSAEADDRNOTAVAIL

> ID：13555147
> 
> 赞同：0
> 
> 时间：2012-11-25T20:26:02.583
> 
> 标签：c++, c, winapi, sockets, setsockopt

资源：

```
WSADATA WSAData; 
SOCKET sock;
if (WSAStartup(MAKEWORD(2,2), &WSAData)!=0) {
    printf("\nProblem with WSAStartup\n\n");
    return FALSE; 
}
if ((sock = WSASocket(AF_INET,SOCK_RAW,IPPROTO_TCP, 0, 0, WSA_FLAG_OVERLAPPED)) == INVALID_SOCKET) {
    WSACleanup();
    printf("\nProblem with WSASocket\n\n");
    return FALSE;
}
int flag = 1;
if (setsockopt(sock,IPPROTO_IP, IP_HDRINCL,(char *)&flag,sizeof(flag)) == SOCKET_ERROR) {
    printf("getsockopt failed with error: %u\n\n", WSAGetLastError());
    closesocket(sock);
    WSACleanup();
    return FALSE; 
} 
```

每次我在我的程序中运行它时，我都会得到：

```
getsockopt failed with error: 10049 
```

10049 是 WSAEADDRNOTAVAIL 的错误代码，意思是“请求的地址在其上下文中无效”。

请帮忙，我不知道为什么我不断收到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:16:40.897

您在调用中指定了无效协议以`WSASocket()`尝试指定`IPPROTO_TCP`为：

```
WSASocket(AF_INET,SOCK_RAW,IPPROTO_TCP, 0, 0, WSA_FLAG_OVERLAPPED) 
```

# grails - 如何在春季安全访问被拒绝时重定向到上一页？

> ID：13555150
> 
> 赞同：1
> 
> 时间：2012-11-25T20:26:21.913
> 
> 标签：grails, spring-security

我正在使用 Grails 和 Spring Security。控制器的某些方法带有注释，`@Secured`当登录的用户没有必要的角色时，我希望他被重定向到最后访问的页面而不是`/login/denied`.

我想真正的问题是如何获取访问的最后一页，以便我可以从拒绝的方法中相应地重定向他？

在 JavaScript 中有一种方法可以使用[后退按钮](http://www.crowderassoc.com/javascript/backbutton.html)来执行此操作，但我正在寻找一种在服务器端实现此目的的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:55:58.463

也许您可以使用 an`interceptor`来存储您查看的历史记录，然后`accessDeniedHandler`重定向到上一个

# c++ - “错误：'float'之前的预期不合格ID”用于运算符[]重载

> ID：13555151
> 
> 赞同：0
> 
> 时间：2012-11-25T20:26:25.050
> 
> 标签：c++, overloading, operator-keyword

我试图为我的一个容器实现 operator[] 。但我对 c++ 真的很陌生，而且我的实现似乎有一个错误。

我这样声明它们：

```
float& operator[](const int &idx);
const float& operator[](const int &idx) const; 
```

这应该没问题，它几乎是从教程中复制/粘贴的。现在，Quaternion.cpp 看起来像这样：

```
float& Quaternion::operator[](const int &idx)
{
    if(idx == 0)
    {
        return x;
    }
    if(idx == 1)
    {
        return y;
    }
    if(idx == 2)
    {
        return z;
    }
    if(idx == 3)
    {
        return w;
    }
    std::cerr << "Your Quaternion is only accessible at positions {0, 1, 2, 3}!" 
              << std::endl;
    return x;
}

const float& Quaternion::operator[](const int &idx)
{
    if(idx == 0)
    {
        return const x;
    }
    if(idx == 1)
    {
        return const y;
    }
    if(idx == 2)
    {
        return const z;
    }
    if(idx == 3)
    {
        return const w;
    }
    std::cerr << "Your Quaternion is only accessible at positions {0, 1, 2, 3}!" 
         << std::endl;
    return x;
} 
```

我收到签名“const float& Quaternion::operator[](const int &idx)”的错误。

之前发生的另一件事是，如果超出边界，我无法返回 0。也许我会，一旦这个问题得到解决，但它之前给了我一条错误消息。那时我刚刚退回了 x，这让我很不高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:29:22.820

`const`您从第二个 (const) 运算符实现中省略了尾随修饰符：

```
const float& Quaternion::operator[](const int &idx) const
{
    // ...
} 
```

# android - requestLocationUpdates minTime 参数用途

> ID：13555153
> 
> 赞同：4
> 
> 时间：2012-11-25T20:26:44.100
> 
> 标签：android, gps, locationmanager

我正在创建一个应用程序（用于教育目的），它每 30 分钟记录一次用户的位置，并使用户能够查看地图上的所有位置。我不希望更新频率超过 30 分钟，但确实如此。

这就是我所说的`requestLocationUpdates`：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,  30 * 60 * 1000,  0, pe); 
```

现在，文档清楚地说：

> 位置更新之间经过的时间永远不会小于 minTime

但我确实在 SO 上看到了一些不同的答案（例如，[这个答案）。](https://stackoverflow.com/a/4536911/797390)

似乎只要可以从 GPS 获得更新，我就会得到更新。GPS 图标永远不会关闭，并且更新速率变得大于 1 更新/秒。所以我在这里有两个问题：

1.  该`minTime`参数没有达到它的目的，甚至没有作为一个提示（是的，30 分钟更新率的提示导致超过一秒更新......）。那它有什么作用呢？
2.  还有其他方法吗？我不希望一直启用 GPS，因为它会太快地消耗我的电池。也许我可以安排闹钟每 30 分钟重复一次，然后打电话`requestSingleUpdate`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:33:18.597

> minTime 参数没有达到它的目的，甚至没有作为一个提示（是的，30 分钟更新率的提示导致超过一秒更新......）。那它有什么作用呢？

从 Jellybean 开始，设备必须观察`minTime`参数，所以它确实有目的（现在）。

> 还有其他方法吗？我不希望一直启用 GPS，因为它会太快地消耗我的电池。也许我可以安排每 30 分钟重复一次警报，然后调用 requestSingleUpdate？

是的，使用 Handler`requestSingleUpdate()`每 30 分钟请求一次更新。

我之前在[上一个问题](https://stackoverflow.com/q/13093613/1267661)中已经解决了这个问题，如果该答案中的代码有帮助，如果您有任何问题没有解决，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-05T13:26:09.007

第二个参数，以米为单位的最小距离差设置为零，它会导致不断更新。更喜欢在所需的时间（以分钟为单位）内的计时器+处理程序中使用 requestSingleUpdate。

# java - Android getContentResolver() 未定义用于获取 AndroidID

> ID：13555157
> 
> 赞同：2
> 
> 时间：2012-11-25T20:27:08.857
> 
> 标签：java, android

我正在尝试在我的班级中获取 Android 的设备 ID，并且一个函数将使用它。当我尝试像下面这样使用时，它显示“getContentResolver() 方法未定义”如何解决它你知道吗？

**更新：**

```
public class DatabaseHandler extends SQLiteOpenHelper {
    // db version
    private static final int DATABASE_VERSION = 1;
    // db name
    private static final String DATABASE_NAME = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

    // constructor
    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:32:25.820

您需要使用正确的上下文，如下所示：

```
Secure.getString(getApplicationContext().getContentResolver(), Secure.ANDROID_ID); 
```

但是，在使用 ANDROID_ID 之前，您可能需要对其进行一些搜索，因为它存在问题，而且并不总是唯一的、一致的甚至是定义的。

为了访问`getApplicationContext()`，您需要一个`Context`. 修复你的类声明：

```
public class MyClass {
    private Context ctx;

    public MyClass( Context ctx ) {
        super();
        this.ctx = ctx;
    }

    public String getID() {
        return Secure.getString( this.ctx.getContentResolver(), Secure.ANDROID_ID);
    }

    ....
} 
```

然后，当您在活动中实例化您的类时，请执行以下操作：

```
MyClass idClass = new MyClass( this ); 
```

另一个注意事项——类名应该以大写字符开头。

# java - 如何在 Jar 和项目之间创建依赖关系？

> ID：13555160
> 
> 赞同：0
> 
> 时间：2012-11-25T20:27:22.477
> 
> 标签：java, eclipse

我在 Eclipse IDE 中创建了两个项目 P1 和 P2。P2 取决于 P1。我没有在 P1 和 P2 之间创建任何依赖关系。我想将 P1 转换为 Jar，然后让 P2 使用该 Jar。

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:29:25.037

将您的项目导出`P1`为`Jar`. 右键单击项目，转到*Export*，转到`Java`，选择`Jar File`。

然后将其添加`Jar`到`Build Path`项目`P2`中。右键单击项目，转到*Build Path*，转到*Configure Build Path* -> *Libraries*选项卡。单击*Add External JARs*按钮，然后添加 Jar。

请参阅此博客：- [http://www.vogella.com/articles/Eclipse/article.html](http://www.vogella.com/articles/Eclipse/article.html)以了解 Eclipse 的各种功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:31:29.940

项目依赖（但没有 jar 依赖）：单击您的 P2 项目以获取属性。转到 Java Build Path，然后选择 Project，在此处添加您的 P1 项目。它将被添加到您的 P2 项目的类路径中。

# android - 如何在谷歌地图中的气球中广告图片

> ID：13555165
> 
> 赞同：-1
> 
> 时间：2012-11-25T20:28:02.680
> 
> 标签：android

我从谷歌地图找到了这个链接[http://crazyandroidian.blogspot.com/2011/10/custom-mapview-popup-in-android.html](http://crazyandroidian.blogspot.com/2011/10/custom-mapview-popup-in-android.html) 但是我如何在 baloom 弹出窗口中插入图像？请帮助我如何在气泡中显示图像？此示例仅显示所选点文本我如何修改此代码并添加图像？

```
 package mapviewballoons.example;

   import java.util.List;

  import android.graphics.drawable.Drawable;
  import android.os.Bundle;

   import com.google.android.maps.GeoPoint;
  import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class MyMap extends MapActivity {

MapView mapView;
List<Overlay> mapOverlays;
Drawable drawable;
Drawable drawable2;
MyItemizedOverlay itemizedOverlay;
MyItemizedOverlay itemizedOverlay2;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
 mapView.setBuiltInZoomControls(true);
 mapOverlays = mapView.getOverlays();
 // first overlay
 drawable = getResources().getDrawable(R.drawable.marker);
 itemizedOverlay = new MyItemizedOverlay(drawable, mapView);
 GeoPoint point = new GeoPoint((int)(51.5174723*1E6),(int)(-0.0899537*1E6));
 OverlayItem overlayItem = new OverlayItem(point, "Umar Shafique", 
 "(here goes 1)");
 itemizedOverlay.addOverlay(overlayItem);
 GeoPoint point2 = new GeoPoint((int)(51.515259*1E6),(int)(-0.086623*1E6)); 

 OverlayItem overlayItem2 = new OverlayItem(point2, "Abdul Karim", 
 "here goes 2");
 itemizedOverlay.addOverlay(overlayItem2);
 mapOverlays.add(itemizedOverlay);
 // second overlay
 drawable2 = getResources().getDrawable(R.drawable.marker2);
 itemizedOverlay2 = new MyItemizedOverlay(drawable2, mapView);
 GeoPoint point3 = new GeoPoint((int)(51.513329*1E6),(int)(-0.08896*1E6));
 OverlayItem overlayItem3 = new OverlayItem(point3, "Arslan Ilyas", 
 "here goes 3");
 itemizedOverlay2.addOverlay(overlayItem3);
  GeoPoint point4 = new GeoPoint((int)(51.51738*1E6),(int)(-0.08186*1E6));
 OverlayItem overlayItem4 = new OverlayItem(point4, "Ahsan", 
 "here goes 4");
 itemizedOverlay2.addOverlay(overlayItem4);
 mapOverlays.add(itemizedOverlay2);
 final MapController mc = mapView.getController();
 mc.animateTo(point2);
 mc.setZoom(16);
 }
 @Override
 protected boolean isRouteDisplayed() {
 return false;
  }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:38:29.787

You should try Polaris:

[http://android.cyrilmottier.com/?p=824](http://android.cyrilmottier.com/?p=824)

Using maps and setting pictures in the baloon has never been so easy!

# c# - 在至少显示表单的框架之前，如何使表单的控件不加载？

> ID：13555170
> 
> 赞同：0
> 
> 时间：2012-11-25T20:28:26.363
> 
> 标签：c#, winforms, controls

我有一个 C# Winforms 表单，其中包含大量自定义控件，加载大约需要 10 秒。现在，当我单击菜单项打开表单时，菜单会冻结 10 秒钟，然后表单就会弹出准备就绪。我想做的是：一旦您单击适当的菜单项打开我的表单，我想立即显示该表单，但可能只有红色背景且没有控件。然后表单可以开始尝试加载我的所有控件。这样用户就会看到他们的鼠标点击打开了新表单，并且看起来整个应用程序都没有冻结。将其移至新线程不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:41:50.983

您是否尝试过将用户控件放在单独的用户控件中，然后在 Shown 事件中实例化它，然后将其添加到表单中。

即这样的东西

**表格1**

```
public partial class Form1 : Form
{
    UserControl1 usr;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Shown(object sender, EventArgs e)
    {
        usr = new UserControl1();
        usr.Dock = DockStyle.Fill;
        panel1.Controls.Add(usr);
    }
} 
```

**用户控件1**

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        System.Threading.Thread.Sleep(10000);
        InitializeComponent();

    }
} 
```

# c++ - C++ 使用模板类指针作为模板参数而不给它一个参数

> ID：13555173
> 
> 赞同：1
> 
> 时间：2012-11-25T20:28:58.203
> 
> 标签：c++, templates

标题有点混乱，所以希望我能澄清一下。

我有一个使用模板的简单类：

```
template <class T>
class Value
{
}; 
```

另一个扩展 unordered_set 的类：

```
template<class T>
class Collection : public std::unordered_set<T>
{
}; 
```

这些类都有一些其他代码，但我认为它与我的问题无关。

在 Collection 类的特定实现中，我希望它能够获取指向任何值的指针，而不管创建它时使用的模板参数如何。换句话说，我希望能够拥有类似这样的语义：

```
class ValueCollection : public Collection<Value*>
{
};

ValueCollection *vc = new ValueCollection();
vc.insert(new Value<std::string>("hello"));
vc.insert(new Value<int>(5)); 
```

当然，这是行不通的。我将如何获得类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:35:30.397

只需给你`Value`类模板一个通用的基类，确保它有一个`virtual`析构函数并使用它来添加你的实例化值：

```
struct ValueBase {
    virtual ~ValueBase() {}
};
template <typename T>
struct Value
    : ValueBase {
}; 
```

顺便说一句，你通常最好*不要*继承 STL 容器：它们不是为继承而设计的，你最有可能导致微妙的问题，而不是从少量节省的工作中受益。

# python - 检查范围是否交叉路径

> ID：13555174
> 
> 赞同：0
> 
> 时间：2012-11-25T20:28:59.703
> 
> 标签：python, algorithm

我编写了以下方法来检查范围列表是否交叉路径。另一种说法是范围不是嵌套的。

```
def check_ranges(lst):
    for i in range(len(lst)):
        for j in range(i+1,len(lst)):
            # (a,b) and (x,y) are being compared
            a = lst[i][0]
            b = lst[i][1]
            x = lst[j][0]
            y = lst[j][1]

            #both of these conditions mean that they cross
            if x < a and b > y:
                return True
            if x > a and b < y:
                return True
    return False 
```

第一个应该返回 false，第二个应该返回 true。

```
check_ranges([(7,16),(6,17),(5,18),(4,19)])
check_ranges([(5,16),(6,17),(5,18),(4,19)]) 
```

它像现在一样工作，但它似乎真的效率低下。如果这是一个常见问题或者是否有更有效的解决方案，现在有人吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:45:22.563

您可以排序，这将至少按排序顺序放置起点。然后，您只需要根据上一个条目检查端点；它应该更小：

```
from itertools import islice

def window(seq, n=2):
    "Returns a sliding window (of width n) over data from the iterable"
    "   s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   "
    it = iter(seq)
    result = tuple(islice(it, n))
    if len(result) == n:
        yield result    
    for elem in it:
        result = result[1:] + (elem,)
        yield result

def check_ranges(lst):
    return any(a[1] < b[1] for a, b in window(sorted(lst))) 
```

我正在使用此处较旧的 itertools 文档页面中的[`window`示例工具](http://docs.python.org/release/2.3.5/lib/itertools-example.html)来创建滑动窗口。

此实现返回：

```
>>> def check_ranges(lst):
...     return any(a[1] < b[1] for a, b in window(sorted(lst)))
... 
>>> check_ranges([(7,16),(6,17),(5,18),(4,19)])
False
>>> check_ranges([(5,16),(6,17),(5,18),(4,19)])
True 
```

*匹配*端点是否会成为问题尚不完全清楚；如果不是，那么您可以改为将其更改`<`为`<=`测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:45:29.870

我不确定您用于检测“交叉”的算法，但您可以使用理解和简化代码[`any`](http://docs.python.org/2/library/functions.html#any)：

```
return any((x<a and b<y or x>a and b<y) 
            for i,(a,b) in enumerate(lst) 
            for (x,y) in lst[i:]) 
```

# mongoose - Mongoose Schema 安全字段

> ID：13555180
> 
> 赞同：10
> 
> 时间：2012-11-25T20:29:30.293
> 
> 标签：mongoose

简洁明了：有什么方法可以防止设置模式字段但允许获取值？

我一直在[Mongoose 文档](http://mongoosejs.com/docs)中，但找不到我要找的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-04-02T20:38:32.627

如果您想设置一个永远不能更改的默认值，则另一种选择：

```
var schema = new Schema({
  securedField: {
    type: String,
    default: 'Forever',
    set: function (val) { return this.securedField; }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T14:33:12.830

将字段定义为[虚拟](http://mongoosejs.com/docs/guide.html#virtuals)getter，而不是传统字段。

例如，假设您想`pop`在通过 Mongoose 访问时将集合字段设为只读：

```
var schema = new Schema({
    city: String,
    state: String
});

schema.virtual('pop').get(function() {
    return this._doc.pop;
}); 
```

通过访问模型实例的私有`_doc`成员，这可能会在将来中断，但是当我刚刚测试它时它工作得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-10T04:34:24.983

从 mongoose 5.6 开始，您可以执行以下操作：`immutable: true`

```
var schema = new Schema({
  securedField: {
    type: String,
    default: 'Forever',
    immutable: true
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-28T09:28:43.927

您可以从设置中返回与默认值相同的值，无需参考 _this 文档：

```
var schema = new Schema({
  securedField: {
    type: String,
    default: 'Forever',
    set: () => 'Forever'
}); 
```

# asp.net-mvc - 自动运行

> ID：13555181
> 
> 赞同：0
> 
> 时间：2012-11-25T20:29:41.390
> 
> 标签：asp.net-mvc, webforms

是否可以在特殊时间在asp.net或mvc中自动运行一部分代码。例如，恰好在早上 8 点将邮件发送给一组 pf 用户（仅由服务器而不是由用户）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:00:54.683

不，但有几种方法可以做到：

*   [石英网](http://quartznet.sourceforge.net/features.html)
*   一个 powershell 脚本（调用您要运行的代码）和作业调度程序
*   一个控制台应用程序（它公开并调用您要运行的代码）和作业调度程序

# delphi - 如何在 FireMonkey FM2 中使用多个窗口

> ID：13555182
> 
> 赞同：5
> 
> 时间：2012-11-25T20:29:52.497
> 
> 标签：delphi, delphi-xe3, firemonkey-fm2

我知道我可能遗漏了一些东西，但我不明白是什么。我刚刚创建了一个包含 2 个表单（Form1、Form2）的测试应用程序。我在 OnClick 事件处理程序中使用以下代码向 Form1 添加了一个按钮：

```
 Application.CreateForm(TForm2,Form2);
 Form2.Show; 
```

当我单击该按钮时，会按原样显示第二个表单，但是如果单击 Form1，即使它的属性`TopMost`设置为 true，我也无法将其置于最前面。

我错过了什么？我该如何解决？我需要展示一些必须始终位于顶部的子表单和主表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T23:27:34.920

我想我可以帮你！

首先，您必须通过选择 File > New > FireMonkey Form | 创建新表单。Delphi 会将此表单另存为 unit2.pas 在与 form1 相同的项目中

在 unit1.pas 中，您编写以下代码：

```
uses Unit2; 
```

在 unit2.pas 之后，您编写“使用 Unit1”的代码

现在，你有多个 Windows 并且可以做任何事情

您可以通过以下方式显示 Form2：'Form2.Show'

再见！祝你好运...

# .htaccess - 访问。从不友好的 URL 重定向

> ID：13555186
> 
> 赞同：0
> 
> 时间：2012-11-25T20:30:28.970
> 
> 标签：.htaccess, friendly-url

我只需要我网站上某些页面的友好 URL，我将此代码添加到 htaccess

```
RewriteEngine On
RewriteRule languages/english-online.html languages/english.php 
```

现在，当我在浏览器中打开[http://mydomain.com/languages/english-online.html](http://mydomain.com/languages/english-online.html)时，我看到了页面“languages/english.php”的内容。没关系

但我也想做：如果有人试图进入[http://mydomain.com/languages/english.php](http://mydomain.com/languages/english.php)，他将被重定向到[http://mydomain.com/languages/english-online.html](http://mydomain.com/languages/english-online.html)

我已经尝试了一切，我得到或 500 错误或没有发生任何事情。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:36:06.370

你试过了吗：

```
Redirect /languages/english.php http://mydomain.com/languages/english-online.html 
```

类似的代码适用于我自己网站上的文件。

# java - 没有 JVM 的 Java

> ID：13555187
> 
> 赞同：5
> 
> 时间：2012-11-25T20:30:34.603
> 
> 标签：java, jvm, embed

只是想知道是否有任何 Java 实现可以在没有 JVM 的情况下工作。我感兴趣的原因仅仅是因为我很好奇，我想知道是否有任何“轻量级”Java 实现（没有附加所有 Sun 库）。

我也对在 C++ 中嵌入 Java 感兴趣，但在 C++ 中嵌入 JVM 对我来说似乎相当荒谬。我只想利用我的 C++ 应用程序中的一些 Java 语言特性，而不是利用所有琐碎的 Java API。

编辑：

我从我得到的很多答案中看到我需要澄清......

我最近开始开发使用 JavaScript 的 node.js 应用程序。istelf 中的 JavaScript 是一种语言规范，它不会自动附带 DOM、window.open 等，尽管它有一段时间。我想知道是否有类似于 Google 的 v8 的东西，除了不是 JavaScript，而是 Java。最后，我不在乎是否不能用它编写 Hello World 应用程序，我只想能够将 Java 嵌入到 C++ 应用程序中，就像我可以使用 v8 或 SpiderMonkey 将 JavaScript 嵌入到 C++ 应用程序中一样。如果我能做到这一点，那么我可以在 C/C++ 中实现控制台输出，然后使该实现可以从 Java 中调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T20:34:53.957

你想要没有 API（标准库）的 Java VM 吗？

JRE 由 JVM（Virtual MAchine）和标准库组成，我怀疑您是否可以在没有 JVM 的情况下找到 java 实现......您可以找到将 java 源代码编译为本机代码的编译器（看看[GCJ](http://gcc.gnu.org/java/) )，但不是没有 VM 的 Java 实现。

查看[这个 wikipedia 页面](http://en.wikipedia.org/wiki/Free_Java_implementations)，了解一些替代 Java 实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:46:48.927

有[GCJ](http://gcc.gnu.org/java/)（Java 的 GNU 编译器），但自从 OpenJDK 开源以来，该项目已被弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:46:59.330

正如其他人所暗示的那样，“JVM”是一种知道如何加载类、解释“字节码”和管理存储的机制。它本身不包含任何 java.lang... 的东西，除了需要一些类（String、Class 等）来表示 JVM 中的类和其他基本数据结构。

因此，没有 JVM 的 Java 只是一堆毫无意义的比特。

有（或曾经）编译过的 Java 版本需要/不需要解释器（尽管相当紧凑的解释器很容易构建）。原始类加载器和某种存储管理仍然是必要的，但类加载可以保持简单，并且对于短期应用程序（或具有特殊限制的应用程序），存储管理器不需要进行垃圾收集。

正如 pstanton 所建议的，有一些适合小型设备的“轻量级”Java（或“类 Java”）实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T20:33:47.530

有设计用于小型设备的轻量级 Java 处理器，例如[JOP](http://www.jopdesign.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T20:53:40.200

恕我直言，您需要重新检查您真正想要的是什么。

Java 运行时由两个主要组件组成

*   运行代码的JVM
*   它附带的标准库。

您建议您要使用 Java，但如果没有这些，您将一无所有。

例如，你甚至不能在没有库的情况下编写“hello world”程序，因为 String 是 JDK 中的一个类。

# haskell - Haskell 打印带有某些格式的列表

> ID：13555193
> 
> 赞同：0
> 
> 时间：2012-11-25T20:31:07.080
> 
> 标签：haskell

几天前刚开始学习 Haskell，我遇到了一些问题。第一个问题涉及打印数字列表。所需的行为如下：

输入：[1,2,3,4,5,6]

输出：1 2 3 | 4 5 6

所以这是一个简单的概念，我只需要用“|”输出列表的元素 每三个数字之间插入一个符号，但我一生都无法弄清楚。似乎我尝试过的大多数东西都涉及字符串，即使我能够将列表变为字符串，例如 ["1", "2", "3", ...] 我所有的方法尝试在自己的行上打印每个数字，这不是我需要的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:41:39.537

使用[split](http://hackage.haskell.org/package/split)包（最近添加到 Haskell 平台）：

```
> import Data.List         -- for intercalate
> import Data.List.Split   -- for chunksOf
> intercalate " | " . map unwords . chunksOf 3 $ map show [1..7]
"1 2 3 | 4 5 6 | 7" 
```

相关文件：[`chunksOf`](http://hackage.haskell.org/packages/archive/split/latest/doc/html/Data-List-Split.html#v%3achunksOf), [`unwords`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aunwords), [`intercalate`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3aintercalate).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T20:40:11.633

这是一种方法。

```
import Data.List (cycle)

format :: Show a => [a] -> String
format = concat . zipWith (++) ("" : cycle [" ", " ", " | "]) . map show 
```

这确实有一个缺点，即三人一组的分组是硬编码的，但概括起来并不难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T20:38:02.293

你可以做

```
threes [] = ""
threes xs = let (front,rest) = splitAt 3 xs in
   unwords (map show front) ++ 
      if null rest then "" else " | " ++ threes rest 
```

给予

```
*Main> threes [1..10]
"1 2 3 | 4 5 6 | 7 8 9 | 10" 
```

我使用的功能：

```
splitAt :: Int -> [a] -> ([a], [a])
  -- splitAt 2 "Hello Mum" = ("He","llo Mum")

unwords :: [String] -> String
  -- unwords ["Hello","there","everyone"]
  --        = "Hello there everyone"

null :: [a] -> Bool
null [] = True
null _ = False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T20:47:24.100

第一部分是最简单的，你需要将数字转换为`String`s，

```
format :: (Num a, Show a) => [a] -> String
format xs = result
  where
    strings = map show xs 
```

这样做。然后我们需要将任何列表分成三个（更一般的`n`）元素的块。`splitAt`将列表拆分为所需元素数量的前面部分（如果列表足够长）和剩余部分。在剩余部分上迭代过程，虽然那不是空的，但会导致所需的结果。

```
chunk :: Int -> [a] -> [[a]]
chunk _ [] = []
chunk n xs = ys : chunk n zs
  where
    (ys, zs) = splitAt n xs 
```

这是一个循环模式，所以有一个组合器，我们也可以写

```
import Data.List (unfoldr)

chunk :: Int -> [a] -> [[a]]
chunk n = unfoldr split
  where
    split [] = Nothing
    split xs = Just $ splitAt n xs 
```

所以我们可以继续我们的`format`，

```
format :: (Num a, Show a) => [a] -> String
format xs = result
  where
    strings = map show xs
    chunks = chunk 3 strings 
```

然后我们需要`"|"`在所有块之间插入 a ，这是由`intercalate`from完成的`Data.List`，最后，将所有字符串与它们之间的空格连接起来，就是`unwords`这样，所以

```
format :: (Num a, Show a) => [a] -> String
format xs = result
  where
    strings = map show xs
    chunks = chunk 3 strings
    result = unwords $ intercalate "|" chunks 
```

或者

```
format = unwords . intercalate "|" . chunk 3 . map show 
```

# c# - ListView 项目不适合绑定 WinRT 的宽度

> ID：13555195
> 
> 赞同：1
> 
> 时间：2012-11-25T20:31:16.047
> 
> 标签：c#, listview, data-binding, winrt-xaml, listviewitem

我正在设计一个混合列表视图，我希望该项目完全填满列表的宽度。如果我使用 ListViewItem 控件，则会发生这种情况，但如果我使用数据绑定，则该项目是紧密的。我怎样才能解决这个问题？感谢您的帮助，对不起我的英语不好

使用 ListViewItem： [![使用带有自定义样式的 ListViewItem](../Images/c1aa16c350d17b666e9183e57fe0c924.png)](https://i.stack.imgur.com/vgW0v.png)

使用数据绑定 [![使用数据绑定](../Images/49a928183ff01a6f8aac5d963ad0aa5e.png)](https://i.stack.imgur.com/wCJh8.png)

# jquery - Chrome 在溢出时显示滚动：可见；

> ID：13555199
> 
> 赞同：0
> 
> 时间：2012-11-25T20:31:32.303
> 
> 标签：jquery, css

点击元素获取类后

```
wrapperInner.addClass('wrapper_inner_extended'); 
```

所以它有`class='wrapper_inner wrapper_inner_extended'`

这是这两个类的定义

```
div.wrapper_inner {
    position:relative;
    overflow:hidden;
}
.wrapper_inner_extended {
    background:#000000;
    color:#ffffff!important;
    z-index:9000!important;
    height:auto!important;
    overflow:visible!important  ;
} 
```

在 FF 中它工作得很好，但在 Chrome 中我看到的是滚动。检查此网址[http://copy.barchick.com/calendar/](http://copy.barchick.com/calendar/)，在 11 月 1 日单击红色“...”以复制此问题。请帮我修复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:59:40.037

在我看来，包装`<td>`就是有滚动条的东西。当我穿上它时，它们就消失`overflow:visible`了`<td>`。

浏览器之间的表格处理方式仍然非常不同。

# iphone - 带有 HTML5 和谷歌地图的 iPhone 应用程序

> ID：13555207
> 
> 赞同：1
> 
> 时间：2012-11-25T20:32:35.417
> 
> 标签：iphone, google-maps-api-3

我正在使用谷歌地图开发一个网络应用程序，我现在正在寻找将其传输到 iPhone 应用程序，可能使用 phonegap，因为它允许对手机应用程序进行 html5 编码。

我的问题是——谷歌地图可以在 iPhone 应用上显示吗？

问候，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:34:50.317

是的，如果你要使用 HTML，谷歌地图应该可以在 iPhone 上正常运行。但是如果要提交到 App Store，它可能会被拒绝或速度很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:36:15.543

我刚刚使用 HTML5 (PhoneGap) 制作了一个出租车订购应用程序。Google Map api 的问题是它非常慢。我们决定改用 MapKit。不过谷歌地图看起来不错。

# vbscript - .xls 位置查找的 vb 脚本错误

> ID：13555209
> 
> 赞同：0
> 
> 时间：2012-11-25T20:32:49.353
> 
> 标签：vbscript, excel.application

我在编写用于打开下面给出的 .xls 文件的 vb 脚本时遇到问题。

```
Dim XLAPP

Set XLAPP = createobject("excel.application")

XLAPP.Visible =true

XLAPP.Workbook.open"d:\book1.xls" 
```

当我运行此脚本时，弹出窗口显示如下错误：

**由于不可恢复的错误，测试运行无法继续。'd:\book1.xls' 找不到。检查文件名的拼写，并验证文件位置是否正确。如果您尝试从最近使用的文件列表中打开该文件，请确保该文件未被重命名、移动或删除。第 (1) 行：“Dim XLAPP”。**

当我编写脚本`XLAPP.Workbook.Add` 时，它会添加一个 excel 文件，但上面给出的脚本没有打开 excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-24T22:51:03.237

[.Open 方法](https://msdn.microsoft.com/en-us/library/office/ff194819.aspx)位于Workbooks[对象集合](https://msdn.microsoft.com/en-us/library/office/ff841074.aspx)（*复数*）中，而不是[Workbook 对象](https://msdn.microsoft.com/en-us/library/office/aa224504(v=office.11).aspx)（单数）¹。

```
XLAPP.Workbooks.open "d:\book1.xls" 
```

fwiw，您可能已经使用了 Workbooks 集合而没有考虑`XLAPP.Workbooks.Add`. [.Add 方法](https://msdn.microsoft.com/en-us/library/office/ff840478.aspx)不是单个 Workbook 对象的成员，我无法让它运行；`Run-time error 424: Object required`.

¹[感谢[Matt Donnan](https://stackoverflow.com/users/1066861/matt-donnan)和他在上面的评论中提供了正确的回复。]

# javascript - jquery quote rotator quovolver - 有没有办法让引号随机？

> ID：13555210
> 
> 赞同：3
> 
> 时间：2012-11-25T20:32:58.290
> 
> 标签：javascript, random

我终于让美妙的“quovolver”在我的网站上工作，我的推荐信都在我的侧边栏中以一种可爱的方式旋转......

但是，我希望它们不是一直以相同的顺序运行（quovolver 的脚本按照它们在 html 中的顺序循环它们...），而是由脚本随机调用它们...

这可能吗？？

这是脚本：

```
/**
 * jQuery Quovolver 2.0.2
 * https://github.com/sebnitu/Quovolver
 *
 * By Sebastian Nitu - Copyright 2012 - All rights reserved
 * Author URL: http://sebnitu.com
 */
(function($) {
    $.fn.quovolver = function(options) {

        // Extend our default options with those provided.
        var opts = $.extend({}, $.fn.quovolver.defaults, options);

        // This allows for multiple instances of this plugin in the same document
        return this.each(function () {

            // Save our object
            var $this = $(this);

            // Build element specific options
            // This lets me access options with this syntax: o.optionName
            var o = $.meta ? $.extend({}, opts, $this.data()) : opts;

            // Initial styles and markup
            $this.addClass('quovolve')
                 .css({ 'position' : 'relative' })
                 .wrap('<div class="quovolve-box"></div>');

            if( o.children ) {
                var groupMethod = 'find';
            } else {
                var groupMethod = 'children';
            }

            // Initialize element specific variables
            var $box = $this.parent('.quovolve-box'),
                $items = $this[groupMethod](o.children),
                $active = 1,
                $total = $items.length;

            // Hide all except the first
            $items.hide().filter(':first').show();

            // Call build navigation function
            if ( o.navPrev || o.navNext || o.navNum || o.navText ) {
                o.navEnabled = true;
                var $nav = buildNav();
            } else {
                o.navEnabled = false;
            }

            // Call equal heights function
            if (o.equalHeight) {
                equalHeight( $items );
                // Recalculate equal heights on window resize
                $(window).resize(function() {
                    equalHeight( $items );
                    $this.css('height', $($items[$active -1]).outerHeight() );
                });
            }

            // Auto play interface
            if (o.autoPlay) {
                var $playID = autoPlay();
                if (o.stopOnHover) {
                    var $playID = stopAutoPlay($playID);
                } else if (o.pauseOnHover) {
                    var $playID = pauseAutoPlay($playID);
                }
            }

            // Go To function
            function gotoItem(itemNumber) {

                // Check if stuff is already being animated and kill the script if it is
                if( $items.is(':animated') || $this.is(':animated') ) return false;
                // If the container has been hidden, kill the script
                // This prevents the script from bugging out if something hides the revolving
                // object from another script (tabs for example)
                if( $box.is(':hidden') ) return false;

                // Don't let itemNumber go above or below possible options
                if ( itemNumber < 1 ) {
                    itemNumber = $total;
                } else if ( itemNumber > $total ) {
                    itemNumber = 1;
                }

                // Create the data object to pass to our transition method
                var gotoData = {
                        current : $( $items[$active -1] ), // Save currently active item
                        upcoming : $( $items[itemNumber - 1] ) // Save upcoming item
                }

                // Save current and upcoming hights and outer heights
                gotoData.currentHeight = getHiddenProperty(gotoData.current);
                gotoData.upcomingHeight = getHiddenProperty(gotoData.upcoming);
                gotoData.currentOuterHeight = getHiddenProperty(gotoData.current, 'outerHeight');
                gotoData.upcomingOuterHeight = getHiddenProperty(gotoData.upcoming, 'outerHeight');

                // Save current and upcoming widths and outer widths
                gotoData.currentWidth = getHiddenProperty(gotoData.current, 'width');
                gotoData.upcomingWidth = getHiddenProperty(gotoData.upcoming, 'width');
                gotoData.currentOuterWidth = getHiddenProperty(gotoData.current, 'outerWidth');
                gotoData.upcomingOuterWidth = getHiddenProperty(gotoData.upcoming, 'outerWidth');

                // Transition method
                if (o.transition != 'basic' &&
                    typeof o.transition == 'string' &&
                    eval('typeof ' + o.transition) == 'function' ) {
                    // Run the passed method
                    eval( o.transition + '(gotoData)' );
                } else {
                    // Default transition method
                    basic(gotoData);
                }

                // Update active item
                $active = itemNumber;

                // Update navigation
                updateNavNum($nav);
                updateNavText($nav);

                // Disable default behavior
                return false;
            }

            // Build navigation
            function buildNav() {
                // Check the position of the nav and insert container
                if ( o.navPosition === 'above' || o.navPosition === 'both' ) {
                    $box.prepend('<div class="quovolve-nav quovolve-nav-above"></div>');
                    var nav = $box.find('.quovolve-nav');
                } 
                if ( o.navPosition === 'below' || o.navPosition === 'both' ) {
                    $box.append('<div class="quovolve-nav quovolve-nav-below"></div>');
                    var nav = $box.find('.quovolve-nav');
                } 
                if ( o.navPosition === 'custom' ) {
                    if ( o.navPositionCustom !== '' && $( o.navPositionCustom ).length !== 0 ) {
                        $( o.navPositionCustom ).append('<div class="quovolve-nav quovolve-nav-custom"></div>');
                        var nav = $( o.navPositionCustom ).find('.quovolve-nav');
                    } else {
                        console.log('Error', 'That custom selector did not return an element.');
                    }
                }

                // Previous and next navigation
                if ( o.navPrev ) {
                    nav.append('<span class="nav-prev"><a href="#">' + o.navPrevText + '</a></span>');
                }
                if ( o.navNext ) {
                    nav.append('<span class="nav-next"><a href="#">' + o.navNextText + '</a></span>');
                }
                // Numbered navigation
                if ( o.navNum ) {
                    nav.append('<ol class="nav-numbers"></ol>');
                    for (var i = 1; i < ($total + 1); i++ ) {
                        nav
                            .find('.nav-numbers')
                            .append('<li><a href="#item-' + i + '">' + i + '</a></li>');
                    }
                    updateNavNum(nav);
                }
                // Navigation description
                if ( o.navText ) {
                    nav.append('<span class="nav-text"></span>');
                    updateNavText(nav);
                }

                return nav;
            }

            // Get height of a hidden element
            function getHiddenProperty(item, property) {
                // Default method
                if (!property) property = 'height';

                // Check if item was hidden
                if ( $(this).is(':hidden') ) {
                    // Reveal the hidden item but not to the user
                    item.show().css({'position':'absolute', 'visibility':'hidden', 'display':'block'});
                }

                // Get the requested property
                var value = item[property]();

                // Check if item was hidden
                if ( $(this).is(':hidden') ) {
                    // Return the originally hidden item to it's original state
                    item.hide().css({'position':'static', 'visibility':'visible', 'display':'none'});
                }
                // Return the height
                return value;
            }

            // Equal Column Heights
            function equalHeight(group) {
                var tallest = 0;
                group.height('auto');
                group.each(function() {
                    if ( $(this).is(':visible') ) {
                        var thisHeight = $(this).height();
                    } else {
                        var thisHeight = getHiddenProperty( $(this) );
                    }
                    if(thisHeight > tallest) {
                        tallest = thisHeight;
                    }
                });
                group.height(tallest);
            }

            // Update numbered navigation
            function updateNavNum(nav) {
                if (o.navEnabled) {
                    nav.find('.nav-numbers li').removeClass('active');
                    nav
                        .find('.nav-numbers a[href="#item-' + $active + '"]')
                        .parent()
                        .addClass('active');
                }
            }

            // Update navigation description
            function updateNavText(nav) {
                if (o.navEnabled) {
                    var content = o.navTextContent.replace('@a', $active).replace('@b', $total);
                    nav.find('.nav-text').text(content);
                }
            }

            // Start auto play
            function autoPlay() {
                $box.addClass('play');
                intervalID = setInterval(function() {
                    gotoItem( $active + 1 );
                }, o.autoPlaySpeed);
                return intervalID;
            }

            // Pause auto play
            function pauseAutoPlay(intervalID) {
                if ( o.stopAutoPlay !== true ) {
                    $box.hover(function() {
                        $box.addClass('pause').removeClass('play');
                        clearInterval(intervalID);
                    }, function() {
                        $box.removeClass('pause').addClass('play');
                        clearInterval(intervalID);
                        intervalID = autoPlay();
                    });
                    return intervalID;
                }
            }

            // Stop auto play
            function stopAutoPlay(intervalID) {
                $box.hover(function() {
                    $box.addClass('stop').removeClass('play');
                    clearInterval(intervalID);
                }, function() {});
                return intervalID;
            }

            // Transition Effects
            // Basic (default) Just swaps out items with no animation
            function basic(data) {
                $this.css('height', data.upcomingOuterHeight);
                data.current.hide();
                data.upcoming.show();
                if (o.equalHeight === false) {
                    $this.css('height', 'auto');
                }
            }

            // Fade animation
            function fade(data) {

                // Set container to current item's height
                $this.height(data.currentOuterHeight);

                // Fade out the current container
                data.current.fadeOut(o.transitionSpeed, function() {
                    // Resize container to upcming item's height
                    $this.animate({
                        height : data.upcomingOuterHeight
                    }, o.transitionSpeed, function() {
                        // Fade in the upcoming item
                        data.upcoming.fadeIn(o.transitionSpeed, function() {
                            // Set height of container to auto
                            $this.height('auto');
                        });
                    });
                });

            }

            // Bind to the forward and back buttons
            $('.nav-prev a').click(function () {
                return gotoItem( $active - 1 );
            });
            $('.nav-next a').click(function () {
                return gotoItem( $active + 1 );
            });

            // Bind the numbered navigation buttons
            $('.nav-numbers a').click(function() {
                return gotoItem( $(this).text() );
            });

            // Create a public interface to move to a specific item
            $(this).bind('goto', function (event, item) {
                gotoItem( item );
            });

        }); // @end of return this.each()

    };

    $.fn.quovolver.defaults = {

        children : '', // If selector is provided, we will use the find method to get the group of items

        transition : 'fade', // The style of the transition
        transitionSpeed : 300, // This is the speed that each animation will take, not the entire transition

        autoPlay : true, // Toggle auto rotate
        autoPlaySpeed : 6000, // Duration before each transition
        pauseOnHover : true, // Should the auto rotate pause on hover
        stopOnHover : false, // Should the auto rotate stop on hover (and not continue after hover)
        equalHeight : true, // Should every item have equal heights

        navPosition : 'above', // above, below, both, custom (must provide custom selector for placement)
        navPositionCustom : '', // selector of custom element

        navPrev : false, // Toggle "previous" button
        navNext : false, // Toggle "next" button
        navNum : false, // Toggle numbered navigation
        navText : false, // Toggle navigation description (e.g. display current item # and total item #)

        navPrevText : 'Prev', // Text for the "previous" button
        navNextText : 'Next', // Text for the "next" button
        navTextContent : '@a / @b' // @a will be replaced with current and @b with total

    };
})(jQuery); 
```

这是一个非常简单的html示例...

```
<div class="quovolver">

<div>1</div>

<div>2</div>

<div>3</div>

<div>4</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:05:06.450

抱歉，花了比预期更长的时间；）

让我知道这是否适合您。

您可以使用以下代码替换您当前的 Quovolver 代码：

```
$(document).ready(function() {
    var $items = $('.quovolver .quote');
    var quovolver = $('.quovolver');
    var newItems = [];

    $.each($items, function(i, quote) {
        var $copy = $(quote);
        newItems.push($copy);
        $copy.remove();
    });

    var random;
    var chosenRandom = [];
    for (var i = 0; i < newItems.length - 1; i++) {
        random = Math.floor(Math.random() * newItems.length);
        while ($.inArray(random, chosenRandom) != -1) {
            random = Math.floor(Math.random() * newItems.length);
        }
        chosenRandom.push(random);
        quovolver.append(newItems[random]);
    }
    $('div.quovolver').quovolver({autoPlaySpeed : 6000});
});​ 
```

***编辑***

为了修复重叠的 div，我在上面的代码中做了一个小的调整，除此之外，你能改变 CSS 类`testimonial_widget`来包含：`overflow:hidden` ？这也将有助于隐藏爬过它的 div。

其次可以在上面的脚本中更改每个div的长度，当将对象传递给quovolver时，修改如下：

`autoPlaySpeed : 6000`无论您希望它等待多少（秒 * 1000）。

希望这可以帮助 ;）

# iphone - 让用户更改电话号码 xcode

> ID：13555213
> 
> 赞同：0
> 
> 时间：2012-11-25T20:33:11.443
> 
> 标签：iphone, xcode

我有4个`UIButton`使用以下方法：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:0739421700"]]; 
```

如何让用户通过另一个更改电话号码`UIButton`？因此，当应用程序被终止时，按钮仍然包含该数字。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:30:37.080

[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)是拥有简单持久数据的好方法。您可以像现在一样获取字符串，然后使用它`setObject:forKey:`来存储它们。

# regex - 正则表达式空格和退格

> ID：13555214
> 
> 赞同：0
> 
> 时间：2012-11-25T20:33:16.960
> 
> 标签：regex

我有一个使用这个正则表达式的描述字段

```
/^(?![\s\S]*www)(?![\s\S]*http)(?![\s\S]*@)(?![\s\S]*\.com)(?![\s\S]*\.pt)(?![\s\S]*co\.uk)[\s\S]+$/i 
```

当我尝试写“www.1234.com”时，该字段给我一个错误“不包括电子邮件或网址”到目前为止一切都很好

问题是当我`www.1234.com`在“.com”和退格之后写并给出一个空格时，该字段不再有错误，让我提交`www.1234.com`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:17:15.323

如果您只是尝试使用正则表达式检测字符串中是否存在一组关键字，则可以使用：

```
/www|http|@|\.com|\.pt|co\.uk/i 
```

如果找到任何匹配项，您就知道已找到一个或多个关键字。我不确定这是我会使用的方法，但这始终取决于要求以及您需要的严格程度。

# wpf - ListBox 到 ViewModel 属性的 DataTemplate 绑定

> ID：13555217
> 
> 赞同：0
> 
> 时间：2012-11-25T20:34:16.977
> 
> 标签：wpf, binding, listbox, styles, datatemplate

我正在使用带有 DataTemplate 的 ListBox。

```
 <ListBox Grid.Row="1" Grid.ColumnSpan="3" Grid.RowSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                                ItemsSource="{Binding Order.OrderLines}" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0">Qty</TextBlock>
                            <TextBox Text="{Binding LineQty, Mode=TwoWay}" Grid.Column="1" />

                            <TextBlock Grid.Row="1" Grid.Column="0">Weight</TextBlock>
                            <TextBox Text="{Binding Path=LineWeight}" Grid.Row="1" Grid.Column="1" />

                            <TextBlock Grid.Column="0" Grid.Row="2">Pallet Weights</TextBlock>
                            <TextBox Text="{Binding PalletWeights}" Grid.Row="2" Grid.Column="1" />
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>

            </ListBox> 
```

TextBox 值绑定正确。问题是我的 ViewModel 上有一个名为“ViewMode”的属性，我将 TextBox 的 IsEnabled 属性绑定到 App.xaml 样式 DataTrigger：

```
 <Style TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ViewMode}" Value="Add">
                    <Setter Property="BorderBrush" Value="White"></Setter>
                    <Setter Property="BorderThickness" Value="2,2,0,0"></Setter>
                    <Setter Property="BorderBrush" Value="Black"></Setter>
                    <Setter Property="BorderThickness" Value="0,0,2,2"></Setter>
                    <Setter Property="Background" Value="LightBlue"></Setter>
                    <Setter Property="Foreground" Value="Black"></Setter>
                    <Setter Property="FontWeight" Value="Bold"></Setter>
                    <Setter Property="IsEnabled" Value="true"></Setter>
                </DataTrigger>
                <DataTrigger Binding="{Binding ViewMode}" Value="Edit">
                    <Setter Property="BorderBrush" Value="White"></Setter>
                    <Setter Property="BorderThickness" Value="2,2,0,0"></Setter>
                    <Setter Property="BorderBrush" Value="Black"></Setter>
                    <Setter Property="BorderThickness" Value="0,0,2,2"></Setter>
                    <Setter Property="Background" Value="LightBlue"></Setter>
                    <Setter Property="Foreground" Value="Black"></Setter>
                    <Setter Property="FontWeight" Value="Bold"></Setter>
                    <Setter Property="IsEnabled" Value="true"></Setter>
                </DataTrigger>
                <DataTrigger Binding="{Binding ViewMode}" Value="View">
                    <Setter Property="IsEnabled" Value="false"></Setter>
                    <Setter Property="Foreground" Value="Gray"></Setter>
                </DataTrigger>
            </Style.Triggers>
            <Setter Property="Margin" Value="2" />
        </Style> 
```

这适用于我所有的其他文本框。如何让 IsEnabled 属性在 DataTemplate 中工作？ListBox 的 DataContext 引用了 ViewModel 属性“Order”，所以我认为它应该能够看到 ViewModel 属性“ViewMode”。

谢谢，-希德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:14:55.977

Inside a DataTemplate, you don't get access to the properties from the ViewModel directly (you don't 'inherit' the DataContext). Assuming your ViewModel is the DataContext of the whole view, you can create a proxy:

```
class BindingProxy : Freezable
{

    #region Freezable Members

    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }

    #endregion

    /// <summary>
    /// Saves the DataContext from the whole view
    /// </summary>
    public object DataContext
    {
        get { return (object)GetValue(DataContextProperty); }
        set { SetValue(DataContextProperty, value); }
    }

    public static readonly DependencyProperty DataContextProperty =
        DependencyProperty.Register("DataContext", typeof(object), typeof(BindingProxy), new UIPropertyMetadata(null));
} 
```

Then, in your XAML file, you need to reference the namespace where BindingProxy is located:

```
<UserControl xmlns:utilities="clr-namespace:MyApp.NamespaceWhereBindingProxyIsLocated"
... 
```

Later, you create aan instance of BindingProxy for your view and link it with the view's DataContext (notice the DataContext={Binding} part):

```
<UserControl.Resources>
   <utilities:BindingProxy x:Key="proxy" DataContext="{Binding}"/>
</UserControl.Resources> 
```

Finally, you can use it as the DataContext for each TextBox:

```
<ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        ..
                        <TextBox Text="{Binding Path={TemplateBinding DataContext.LineQty}, Mode=TwoWay}" DataContext="{Binding Source={StaticResource proxy}, Path=DataContext}"/>
                        ..
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate> 
```

Hope it helps

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:09:03.123

You need to use `RelativeSource` markup extension in your Binding in case you want to travel up to the Visual Tree like this -

```
<DataTrigger Binding="{Binding DataContext.ViewMode,
             RelativeSource={RelativeSource FindAncestor,
                               AncestorType = UserControl}}" 
             Value="Add">
</DataTrigger> 
```

By default `DataContext` for your `TextBox` will be an `object of OrderLine` where is your property `LineQty` resides. So, style is searching for `ViewMode` property in an object of `OrderLine` instead of your ViewModel so you need to use the RelativeSource to explicitly ask it to search it in `DataContext` of your UserControl which is your `ViewModel`.

# windows - Delphi中的GDI行距？

> ID：13555228
> 
> 赞同：5
> 
> 时间：2012-11-25T20:34:54.357
> 
> 标签：windows, delphi, text, gdi, spacing

我试图在 Delphi 的画布上绘图时为字母添加字符间距。水平间距可以通过使用`SetTextCharacterExtra`API 正常工作，但是如果我在画布上绘制文本`DrawText`并且其中有换行符，我将如何调整垂直间距？我试过`SetTextJustification`了，但我认为它只适用于空格字符。

无论如何我可以调整字符的垂直间距吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:55:01.980

[阅读此评论]（[https://stackoverflow.com/a/1759124/2205207](https://stackoverflow.com/a/1759124/2205207)）

GDI 使用字体高度，没有办法改变它。只需将字符串分成几行并分别绘制。

# c# - C# 中 Java 子字符串的等价物是什么？

> ID：13555230
> 
> 赞同：4
> 
> 时间：2012-11-25T20:35:01.970
> 
> 标签：c#, substring

当我想`substring`在 Java 中查找字符串中的文本区域时，我提供了两个索引，一个用于`start`，一个用于`end`，但是在 C# 中，我不得不提供 的长度`substring`作为参数，但是如果我不知道应该在哪里停下来，就会成为一个问题，导致我遇到这样的事情：

```
verse[i].Substring(verse[i].IndexOf("start"), (verse[i].IndexOf("end") - verse[i].IndexOf("start")); 
```

*而不仅仅是*

```
verse[i].Substring(verse[i].IndexOf("start"), (verse[i].IndexOf("end")); 
```

令人讨厌的是，我一遍又一遍地遇到这个问题，我想知道我是唯一一个还是有一个我不知道的技巧。你会如何最好地解决这个问题？（考虑清洁度和速度）

ps：我不喜欢为几乎所有东西创建变量。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T20:39:07.010

您可以像这样编写自己的扩展方法

```
var newstr = str.MySubString(start,end); 
```

..

```
public static partial class MyExtensions
{
    public static string MySubString(this string s,int start,int end)
    {
        return s.Substring(start, end - start + 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-26T03:04:54.350

你接受的答案是错误的，因为你问错了。

在 java 中，当您调用 substring(START, END) 时，您会得到一个从 START 开始并以 END - 1 结束的子字符串。

在 c# 中，你只需要这样调用：

```
Substring(START, END - START); 
```

如果您按照建议添加 1，您将获得不同的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-24T22:30:46.950

OP问“C#中Java子字符串的等价物是什么”？我很高兴看到响应，因为我正在将使用 String.substring 的 Java 方法转换为 C#。但是，根据官方 Java 文档，[子字符串从指定的 beginIndex 开始并延伸到索引 endIndex -1 处的字符](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29) 这对我来说不仅仅是一个微小的差异，因为我想以最少的努力将 Java 转换为 C#。上面提到的扩展是一个很好的答案，我当然可以接受。但对于我的需要，更精确的类似 Java 的版本应该是 return s.Substring(start, end - start); 不开始+1

使用 Java 文档示例，测试表明这是正确的：

```
[TestMethod]
    public void TestSubString()
    {
         Assert.AreEqual("urge", "hamburger".MySubstring( 4, 8));
        Assert.AreEqual("mile", "smiles".MySubstring(1, 5));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T21:04:26.897

试试这个扩展方法：

```
public static class StringExtensions
{
    public static string MySubstring(this string s, string start, string end)
    {
        int startI = s.IndexOf(start);
        int endI = s.IndexOf(end, startI);
        return s.Substring(startI, endI - startI + 1);
    }
} 
```

像这样使用它：

```
string helloWorld = "startHello Worldend".MySubstring("start", "end");
string vers = verse[i].MySubstring("start", "end"); 
```

有时扩展方法可以挽救您的生命。您应该只知道，如果静态类是公共的并且在您的命名空间中，那么使用您的命名空间的每个人也会获得您的扩展。

# eclipse - EGit 安装问题 - 在 Preferences -> Team 下没有 Git Repository Exploring 透视图和没有 git 配置菜单

> ID：13555236
> 
> 赞同：0
> 
> 时间：2012-11-25T20:35:29.213
> 
> 标签：eclipse, eclipse-plugin, ubuntu-12.04, egit

我在我的 Eclipse INDIGO 3.7.2 上安装了 EGit（和 JGit），但我看不到手册中提到的新菜单。

我在 下看不到 Git 菜单`Windows -> Preferences -> Team`，我应该可以在其中配置我的 GIT 用户。我也看不到 GIT Repository 透视图。

我使用 安装了所有“EGit P2 Repository - [http://download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates) ” `Help -> Install New Software`，但“EGit Plug-in Import Support”功能除外，该功能在安装时存在[已知错误](https://stackoverflow.com/questions/11087606/egit-requires-org-eclipse-team-core)。

我使用的是 Ubuntu 12.04，而且我不是经验丰富的 Eclipse 用户，所以我可能遗漏了一些基本问题。

我实际上需要它来安装[WALA](http://wala.sourceforge.net/wiki/index.php/Main_Page)，他们建议使用 EGit 来安装。

有人在类似的环境中安装过 EGit 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:55:09.343

经过多次重新启动和重新安装后，我发现它与 EGit 没有任何关系。问题`Help -> Check for updates`在于我之前所做的 - 其中一个更新搞砸了 eclipse（我什至无法创建一个简单的 Java 项目）。

我太累了，不能在官方论坛上报告这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:24:43.430

我在使用 Ubuntu 12.04 Indigo 包时也有同样的经历。我安装了一组插件，但在重新启动后发现没有任何应用 - 尽管 eclipse 似乎认为插件已安装。

我恢复到原来的状态并开始一次添加一些。. . 似乎正在工作。. . 至今。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T11:25:38.760

在 Eclipse Kepler SR2 - Windows 7 64 位上安装 EGit 4.1.0 后，我遇到了类似的问题。

Kepler SR2 预装了 EGit 3.2.0，但我想要最新版本。

添加软件站点后：http: [//download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)我安装了**Eclipse Git Team Provider**。在安装过程中，它提到我已经安装了一些组件，它会升级这些组件——听起来不错。

安装完成后，我重新启动 Eclipse，GIT 没有任何可见，Team 下的首选项中没有任何内容，并且 Team 上下文菜单也缺少大多数功能，所有 Git 功能都消失了。

在错误日志中，我看到每个项目的以下堆栈跟踪：

```
org.eclipse.team.core.TeamException: Could not instantiate provider org.eclipse.egit.core.GitProvider for project TestProject.
at org.eclipse.team.core.RepositoryProvider.mapNewProvider(RepositoryProvider.java:165)
at org.eclipse.team.core.RepositoryProvider.mapExistingProvider(RepositoryProvider.java:235)
at org.eclipse.team.core.RepositoryProvider.getProvider(RepositoryProvider.java:507)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.isMappedToCVS(CVSLightweightDecorator.java:192)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.decorate(CVSLightweightDecorator.java:147)
at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:263)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:81)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:365)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:347)
at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:371)
at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:331)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

查看[EGit 常见问题解答](https://wiki.eclipse.org/EGit/FAQ)我注意到以下内容：

> *所需的 Java 版本 (BREE)：在 EGit 3.7 之前，最低支持的 BREE 是 Java 5，但由于旧 Java 版本的限制，建议使用 Java 6 或更高版本。从 EGit 4.0 开始，最低支持的 BREE 是 Java 7*

我下载了 Java 8 64 位并安装了它，然后更新了我的**eclipse.ini**文件以包括：

```
-vm
C:/Java/jdk1.8.0_60_x64/bin/javaw.exe 
```

上面的路径会有所不同，具体取决于您安装 Java 的位置，但它需要指向 javaw.exe 文件。有关详细信息，请参阅[https://wiki.eclipse.org/Eclipse.ini#Specifying_the_JVM](https://wiki.eclipse.org/Eclipse.ini#Specifying_the_JVM)。

*在 Eclipse 中，我通过Preferences -> Java - Installed JREs*添加了 Java 8 作为已安装的 JRE，并将其指向我的**C:/Java/jdk1.8.0_60_x64**目录，但此步骤可能不是必需的。

完成所有这些后，在启动 Eclipse 后，所有 Git 功能都恢复了。

我使用 Java 8，但可以使用 Java 7，这是从 EGit 4 开始的最低要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-13T00:06:34.320

这个项目是否与 CVS 团队提供者共享？CVSLightWeightDecorator 不是 EGit 类，但看起来它来自 CVS 团队提供者。

如果是这种情况，则应该是该项目上的菜单条目“Team > Disconnect”，如果是这种情况，请运行此命令，然后运行“Team > Share with Git”以附加由 EGit 实现的 git 团队提供程序。

# java - 所以我有点厌倦了从魔法帽中拉出兔子？（初学者）

> ID：13555241
> 
> 赞同：-2
> 
> 时间：2012-11-25T20:35:51.160
> 
> 标签：java

我是一个想要学习编程的成年人——我最初的愿望是学习制作 Android 应用程序，我首先购买了 Ivor Horton 的《Java 入门》——一个多月前关于这个主题的 1100 多页的巨著。从那以后，我已经浏览了 240 页，花了很多时间重读部分内容，输入所有示例并完成所有练习，以及完成 CodingBat.com 上的练习。我发现这本书是学习该语言所有细节的好方法，并打算最终完成这本书。

在那段时间里，我还开始为我作为 CAD 绘图员/设计师的日常工作编写 AutoLISP 例程（用于 AutoCAD），以使我和我的同事的生活更轻松。有一个真正做有用的东西的目标真的点燃了我疯狂的狂躁能量，我会从我的日常工作回到家直到我上床睡觉，然后我会在早上醒来并为它们工作还有一些，并在工作中考虑它们并在休息时查找功能等。

我意识到 AutoLISP 和 Java 在学习曲线方面是两种不同的动物，但我真的很想开始用 Java 制作有用的东西，并且我对一些简单的 GUI 程序有一些想法，我想再次制作以帮助我在上班。

具有类、继承、流控制和原语的基本知识后，建议直接跳到本书的 Swing 部分（目的是最终完成所有内容）或阅读 Oracle 教程（或获得更快的节奏）书？）试图真正使一些有用的东西，即使它非常简单。还是我应该把它磨出来，然后通过本书以线性方式进步？你们是怎么学的？就像标题所说的那样，做一些愚蠢的事情，比如将兔子物体放在魔法帽物体中，而 dog.bark() 会有点无聊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:41:36.537

Java 是一种庞大的编程语言，你不会用它掌握一切。听起来你已经有了很好的基础，所以在这一点上，我建议创建一些有用的应用程序，并根据需要查找实现它所需的信息。

# java - 安全的多态性实践？

> ID：13555242
> 
> 赞同：1
> 
> 时间：2012-11-25T20:35:55.197
> 
> 标签：java, model-view-controller, polymorphism

我有点不确定这个问题的标题是什么，所以其他人可能会使用它，但是我从我的老师那里得到了这个简单的多态性示例，我试图对其进行修改。

但我不确定我的修改是否“安全”。

```
public class AppSystem {
   ...
   private DataPersistenceInterface DataDAO;
   private DataController DataController;
   ...

   public void createConnection(String username, String password) 
                                throws ClassNotFoundException, SQLException {

      if(username.isEmpty() || password.isEmpty()) {
           DataDAO = new DataDAO();
           DataController = new DataController(DataDAO);
         } else {
           DataDAO = new DataDAO(url, username, password, driver);
           DataController = new DataController(DataDAO);
         }
      }

   public void closeConnection() {
        DataDAO.closeConnection();
   } 
```

我们有一个控制器和一个 DAO。DAO 实现了一个名为 DataPersistenceInterface 的接口，该接口承载了与数据库进行某些通信所需的一些方法。由于数据控制器处理所有逻辑，并且我们不希望它知道其他任何事情，因此我们以接口类型向它传递 DAO 的引用。

这就是我的老师所做的。但是，下面的方法“closeConnection”因此不起作用，因为对 DataDAO 的引用不指向 DAO 类中的任何“closeConnection”方法......

*[closeConnection方法在上面的代码中显然不起作用]*

现在，我的想法是改变...

```
 private DataPersistenceInterface DataDAO; 
```

到

```
 private DataDAO DataDAO; 
```

由于数据控制器在其构造函数中采用 DataPersistenceInterface 的参数，因此它不会从 DAO 对象中了解任何其他内容。现在我可以在 DAO 上调用 closeConnection 了。

但我不确定这是否“安全”？有些东西只是告诉我不是。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:05:26.413

首先，为了代码清晰，而不是写

```
 private DataPersistenceInterface DataDAO; 
```

写 ：

```
 private DataPersistenceInterface dataPersistenceInterface; 
```

始终对 java 属性使用驼峰式大小写，并使用与您正在使用的类相同的名称。最好的做法是将实现命名为与接口相同的名称加上一个 Impl：

```
DataPersistenceInterfaceImpl 
```

这是一个模式问题，如果你想使用 Dao 的构造函数来创建连接，你有三个选择：

1）您可以通过将closeConnection方法添加到接口签名中来将其添加到DataPersistenceInterface接口：

```
public void closeConnection(); 
```

2) 但是因为 AppSystem 类确实知道它使用哪个实现来创建 DataPersistenceInterface (DataDao)，所以您可以将接口转换回实现。你会得到你的 closeConnection() 回来。这将是我最好的客人。

```
 public void closeConnection() {
        ((DataDAO)dataPersistenceInterface).closeConnection();
   } 
```

3）根据您的 AppSys 的使用情况，不要关心关闭连接。将关闭连接方法放在 DataDAO 实现的 finalize() 方法中。当 AppSys 应用程序结束时，连接将关闭。

```
protected void finalize() throws Throwable {
try{
connection.close;
}catch(Exception e){
...
}
} 
```

最好的做法是使用像 c3po 或 Apache ConnectionPool 这样的 ConnectionPool。

# java - 插入数据库的最佳方法？

> ID：13555248
> 
> 赞同：1
> 
> 时间：2012-11-25T20:36:37.430
> 
> 标签：java, database, hibernate, design-patterns

我有一个要求，我需要从对象中插入数据库，该对象包含有关每列的表名和值的信息。您能否就使用 Hibernate 实现此功能的最佳方式提出建议。

Java 类

```
public class InsertDataDetails {
  public String tableName;
  public List ColumnDetails> columnDetails;
}

public class ColumnDetails {
  public String columnName;
  public String columnValue;
} 
```

目前我正在考虑创建一个本机查询并使用 Session.execute 查询执行它。但是我正在寻找更好的设计，我们可以在其中使用 DTO 类和休眠功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:32:54.600

尽管您的问题没有提到 Spring，但我认为值得一提的是[Spring Data](http://www.springsource.org/spring-data/jpa)项目。

这为您提供了非常强大的持久性存储库，除了声明接口之外不需要任何实现。

例如：

```
 public interface UserRepository extends JpaRepository<User,Long> {} 
```

为您提供一个完全工作的类似 DAO 的对象，for `User`s，其方法如下：

```
List<User> findAll();
User findOne(Long id);
User save(User entity); 
```

但是，为了使用它，您需要遵循@Duffymo 的建议，并围绕它们所代表的对象而不是它们的持久性来建模您的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:40:54.103

所有这些建议都过于以关系为中心和过于简单化。我建议您放弃这种方法。

您应该根据您要解决的问题而不是持久性来考虑对象。如果您想使用 Hibernate，它可以将问题的 OO 表示映射到关系模式。

我还建议您阅读 Martin Fowler 的[企业应用程序架构模式，](https://rads.stackoverflow.com/amzn/click/com/0321127420)以了解持久性问题通常如何根据对象来解决。

谷歌数据访问对象。这是一个简单的通用的，很容易用 Hibernate 实现和扩展：

```
package persistence;

public interface GenericDao<K, V> {
    V find(K id);
    List<V> find();
    K insert(V value);
    void update(V value);
    void delete(V value);
} 
```

对象的持久性已经解决了很多次，尽其所能。您提出的建议并不代表对现有技术的有意义的改进。

# c++ - 从 SDL 隐藏控制台窗口

> ID：13555249
> 
> 赞同：0
> 
> 时间：2012-11-25T20:37:02.577
> 
> 标签：c++, macos, sdl

我正在使用 SDL 尝试制作各种迷你游戏，但控制台窗口始终出现在后台。我知道在 Windows 中您可以使用“-mwindows”，但我正在使用 OS X。我也没有使用 Xcode 或其他 IDE。我正在从 TextWrangler 编程并通过我的终端进行编译。是否有任何额外的链接器选项来隐藏控制台窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:20:06.977

首先，验证您`main`是否具有正确的签名： ，然后`int main(int argc, char*argv[])`，确保您从该文件中链接，然后与.`#include "SDL_Main.h"``#include "SDL.h"``libSDLmain`

# php - 无法访问heredoc中的数组

> ID：13555254
> 
> 赞同：2
> 
> 时间：2012-11-25T20:37:31.770
> 
> 标签：php, heredoc

为什么此代码在我尝试访问的行上出现错误`$sector_value['sector_info']['purchase_order'];`？但不是在我打印出变量的第五行`$sector_counter`？

```
//SECTOR
$email_body .=  <<<SECTOR_DETAILS
    <tr>
        <td colspan="2">
            Sector $sector_counter;
        </td>
    </tr>

    <tr>
        <td colspan="2">
            Purchase order
        </td>
    </tr>
    <tr>
        <td colspan="2">
        $sector_value['sector_info']['purchase_order'];
        </td>
    </tr>

    <tr>
        <td>
            Proof
        </td>
    </tr>

SECTOR_DETAILS; 
```

这是错误：

> 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 44 行的 /home/www2isco/public_html/test/bch/queries/submit_order.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T20:40:36.533

将变量括在 中`{ .. }`，它在[docs](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)中。

```
//SECTOR
$email_body .=  <<<SECTOR_DETAILS
    <tr>
        <td colspan="2">
            Sector $sector_counter;
        </td>
    </tr>

    <tr>
        <td colspan="2">
            Purchase order
        </td>
    </tr>
    <tr>
        <td colspan="2">
        {$sector_value['sector_info']['purchase_order']}
        </td>
    </tr>

    <tr>
        <td>
            Proof
        </td>
    </tr>

SECTOR_DETAILS; 
```

# html - 将鼠标悬停在单个子 div 上时，将父 div 更改为不同的背景

> ID：13555255
> 
> 赞同：10
> 
> 时间：2012-11-25T20:37:35.223
> 
> 标签：html, css, hover

当只处理一个所需的悬停效果时，我看到了实现此目的的解决方案，但我希望有四个子 div，每个子 div 将主父 div 的背景更改为单独的图像。

我假设这对于 CSS 是不可能的。

```
<div id="buttonBox">
   <div id="schedBox">
     <a href="#">Schedule</a>
   </div>
   <div id="transBox">
     <a href="#">Transformation</a>
   </div>
   <div id="destBox">
     <a href="#">Destination</a>
   </div>
   <div id="inspirBox">
     <a href="#">Inspiration</a>
   </div>
</div> 
```

或者，我可以让每个子 div 有不同的背景。悬停一个子 div 会将所有子 div 背景更改为单独的颜色，但我无法弄清楚如何将鼠标悬停在第二个 div 上会影响前一个 div .. 只有后续兄弟姐妹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:56:16.533

虽然实际的父选择器无法通过 CSS 实现，但您可以使用额外的元素和定位来“破解”它。

您需要的是根据悬停的元素更改背景 - 好的！让我们添加伪元素（如果您需要 IE 支持，则添加普通元素）并使用绝对定位和 positive 将它们定位在父元素上`z-index`：

```
#buttonBox {
    position: relative;
    z-index: 1;
}

#buttonBox > div:before {
    content: "";

    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -1;
} 
```

那些定位的元素应该有负数`z-index`，所以它们将被放置在所有其他内容之下，但在父元素的背景之上。

这样您就可以添加规则，例如

```
#schedBox:hover:before  { background: lime;   }
#transBox:hover:before  { background: red;    }
#destBox:hover:before   { background: orange; }
#inspirBox:hover:before { background: yellow; } 
```

并且父母的伪背景会在悬停时改变！

唯一要知道的是，在父元素和具有背景角色的元素之间不应该有任何具有非静态位置的元素。

[这是 dabblet 的实时示例](http://dabblet.com/gist/4161029)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T23:53:05.057

对的，这是可能的。尝试这个：

```
#schedBox:hover, #buttonBox{
   background: red;
}

#schedBox:hover{
   background: green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:25:32.120

遗憾的是，CSS 中没有父选择器。

您将不得不使用 javascript 来实现您想要做的事情。

# ruby-on-rails - 如何在客户端组织验证表单？

> ID：13555256
> 
> 赞同：0
> 
> 时间：2012-11-25T20:37:48.090
> 
> 标签：ruby-on-rails, ajax, validation, client, client-side

我有模态窗口，它通过 ajax 弹出（我的数据和表单正在这个模态窗口中加载）。

我的模态和形式

```
<div id="name_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div> 
```

带模态体的部分

```
<div class="modal-body">
<%= form_for(@user, :url => update_name_user_registration_path,
  :html => { :id => "form_name_phone", :method => :put }, :remote => true) do |f| %>

       <div><%= f.label :name, t('form.name') %><br />
        <%= f.text_field :name %></div>
        <div><%= f.label :phone_number %><br />
        <%= t('form.phone_notice' )%><br />
        <%= f.text_field :phone_number, :maxlength => 10 %></div> 

  <div><%= f.submit t('users.update') %></div>
<% end %>
</div> 
```

然后我也通过 AJAX 发送数据。

如何在客户端组织验证此表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:43:44.947

检查此 rails cast[客户端验证](http://railscasts.com/episodes/263-client-side-validations)。此 gem 将帮助您验证表单上的所有元素或每个元素。它使用您在模型中定义的验证。

例如，如果您的用户模型具有此验证：

```
validates :name, presence: true 
```

然后在您的表单中，添加`validate: true`：

```
<%= form_for(@user, validate: true, :url => update_name_user_registration_path,
  :html => { :id => "form_name_phone", :method => :put }, :remote => true) do |f| %> 
```

这将检查`name`表单必须存在。如果您对模型中的其他属性进行了验证，它们也将被验证。

# java - 将 JScrollPane 与 JGraphX 一起使用

> ID：13555257
> 
> 赞同：2
> 
> 时间：2012-11-25T20:37:54.063
> 
> 标签：java, jscrollpane, jgrapht

我想在我的 GUI 中的 JScrollPane 中创建简单的图形。我试图通过使用随 JGraphX 分发的“Hello world”示例来做到这一点，结果如下所示：

```
public class GraphTest{
public GraphTest(FrameWithScrollPane frame)
{

    mxGraph graph = new mxGraph();
    Object parent = graph.getDefaultParent();

    graph.getModel().beginUpdate();
    try
    {
        Object v1 = graph.insertVertex(parent, null, "Hello", 20, 20, 80,
                30);
        Object v2 = graph.insertVertex(parent, null, "World!", 240, 150,
                80, 30);
        graph.insertEdge(parent, null, "Edge", v1, v2);
    }
    finally
    {
        graph.getModel().endUpdate();
    }

    mxGraphComponent graphComponent = new mxGraphComponent(graph);
            frame.setNewPane(new JScrollPane(graphComponent));
}

public static void main(String[] args)
    {
        FrameWithScrollPane frame = new FrameWithScrollPane();
        frame.setVisible(true);
        GraphTest test = new GraphTest(frame);
    }
} 
```

在这里，我试图用新的 JScrollPane 替换现有的 JScrollPane，但我无法让它工作。在 JScrollPane 中插入图形的唯一方法似乎是拥有一个干净的 JFrame，然后创建一个全新的 JScrollPane，并将 graphComponent 作为构造函数的参数......这不是我需要的，已经使用了一个复杂的 GUI 建模Netbeans GUI 生成器。将 graphComponent 添加到现有的 JScrollPane 也不起作用。有没有人有任何想法？

# android - 如何在 ImageView 上使用 EditText

> ID：13555258
> 
> 赞同：-4
> 
> 时间：2012-11-25T20:38:00.523
> 
> 标签：android, xml, android-layout

我正在制作一个应用程序，其中我必须在一个 XML 文件中使用两个图像。（一个是徽标，另一个是一些登录模式）。在图案图像上，我必须设置两个 EditText。我怎样才能做到这一点？？？

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >
<ImageView
.
.
.
.
./>

          <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:background="@drawable/some image" 
            android:layout_marginLeft="200dp"
            android:layout_marginBottom="300dp"
            android:layout_marginTop="80dp">  

           <LinearLayout 
            android:layout_height="fill_parent"
            android:layout_width="fill_parent" 
            android:layout_weight="1"
            android:gravity="center" 
            android:orientation="vertical">
            <EditText 
             android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
                           />
        </LinearLayout>
    </RelativeLayout>
    </relativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:44:49.887

如果我正确理解这一点，您基本上希望在前景中有两个 EditText 的背景。

最好的方法是通过相对布局。像这样的东西会起作用（注意，这是伪代码，所以它不会直接起作用）

```
<RelativeLayout>

    <ImageView
        android:height="fill_parent"
        android:src="@drawable/some_image"
        android:width="fill_parent" />

    <EditText
        android:id="@+id/edit_text1"
        android:layout_alignParentBottom="true" />

    <EditText
        android:id="@+id/edit_text2 "
        android:layout_above="@id/edit_text1" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:40:52.383

您的问题有点含糊，但您可以轻松使用[Relativelayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)将 EditTexts 放置在 ImageView 上方。

一个基本的例子是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/image" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:43:52.110

要将 edittext 放在 imageview 上方：

```
EditText edit = (EditText)findViewById(R.id.YOUR_EDITTEXT_ID);
ImageView image = (ImageView)findViewById(R.id.YOUR_IMAGEVIEW_ID);
image.setImageBitmap(YOUR_BITMAP);
edit.bringToFront(); 
```

上面的代码将沿 z 轴将 edittext 带到 imageview 上方。当然，您必须以 XML 或编程方式定位它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:55:26.237

感谢大家的帮助。我已经完成了我的任务..这个应用程序适用于平板电脑，所以请据此检查利润。这是代码..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#fff"

<ImageView
    android:id="@+id/login"
    android:layout_width="648dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="640dp"
    android:layout_marginTop="40dp"
    android:src="@drawable/ic_login" />

<EditText 
    android:id="@+id/et1"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:cursorVisible="true"
    android:background="#000"
    android:singleLine="true"
    android:layout_marginTop="100dp"
    android:layout_marginLeft="710dp"
    android:layout_marginRight="193dp"
    android:textColor="#fff"/>

<EditText 
    android:id="@+id/et1"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:cursorVisible="true"
    android:background="#000000"
    android:singleLine="true"
    android:layout_marginTop="127dp"
    android:layout_marginLeft="710dp"
    android:layout_marginRight="193dp"
    android:textColor="#fff"/>

<ImageView 
     android:id="@+id/logo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="420dp"
    android:layout_marginLeft="2dp"
    android:src="@drawable/ic_glogo" />

 </RelativeLayout> 
```

# javascript - 获取要匹配的 http/https 协议 for maps.google.com

> ID：13555261
> 
> 赞同：23
> 
> 时间：2012-11-25T20:38:26.243
> 
> 标签：javascript, http, google-maps, https, protocols

I am trying to use an `<iframe>` include of a google map, however the console is throwing several errors due to a mismatch, but there is no apparent mismatch, so I'm assuming it must be a function/process on the side of google maps.

Specifically with maps.google.com, there appears to be a change to the script for the iframe, according to [this](https://productforums.google.com/forum/?fromgroups=#!topic/chrome/xX9syA1k-oE).

The errors in the console is this: ( I am getting at least 30 errors on page load )

```
Unsafe JavaScript attempt to access frame with URL http://www.developer.host.com/ from
frame with URL https://maps.google.com/maps/msmsa=0&msid=
212043342089249462794.00048cfeb10fb9d85b995&ie=UTF8&t=
m&ll=35.234403,-80.822296&spn=0.392595,0.137329&z=10&output=embed. 

The frame requesting access has a protocol of 'https', the frame being
accessed has a protocol of 'http'. Protocols must match. 
```

Since my site is http and NOT https, and the map url is http, why is the mismatch occuring, and how do I fix this to make them match?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T13:15:32.140

这确实是由独立的 Google 地图页面（[maps.google.com](http://maps.google.com) -> 单击链接链按钮以获取基于 iframe 的 HTML 代码）创建的可嵌入 HTML 代码的错误。
正如 aSeptik 在对您问题的评论中所说，[可以在此处找到](http://code.google.com/p/chromium/issues/detail?id=43173)相应的错误报告。

如果您使用 Maps API 嵌入 Google Map，则可以避免该错误。如果您直接在您的页面中或在嵌入式 iframe 中使用 Maps API，这并没有什么区别——这两种方式都可以正常工作。

这是我在 iframe 中使用 Maps API 的其他地图[示例。](http://www.renect.de/kontakt.php)

这是您**自己使用 Maps API 的地图**[示例](http://jsfiddle.net/fBdvG/)- 嵌入在页面中。

 **Maps API 所需的额外代码实际上非常少：

```
<html>
<head>
    <script type='text/javascript' src='//code.jquery.com/jquery-1.9.1.js'></script>
    <script type='text/javascript' src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type='text/javascript'>
        $(function(){
            var myOptions = {
                center: new google.maps.LatLng(35.201867,-80.836029),
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            gMap = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

            var kmlLayer = new google.maps.KmlLayer('https://maps.google.com/maps/ms?ie=UTF8&t=m&authuser=0&msa=0&output=kml&msid=212043342089249462794.00048cfeb10fb9d85b995');
            kmlLayer.setMap(gMap);
        });
    </script>
</head>
<body>
    <div id="map_canvas" style="width: 400px; height: 400px;"></div>
</body> 
```

为了方便起见，我在这里使用了 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T15:45:16.913

将属性添加`crossorigin="anonymous"`到`</iframe>`解决问题：

例子：

```
<iframe
        crossorigin="anonymous"
        src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d10005.660822865373!2d6.3855055!3d51.1745698!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0xbc2d05dc3af26862!2sBORUSSIA-PARK!5e0!3m2!1sen!2suk!4v1448289882279"
        width="400"
        height="300"
        frameborder="0"
        allowfullscreen>
</iframe>
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-09T12:27:56.440

不能说 aSeptik 提到的错误，但是如果您想避免 http/https 问题，只需不要将其写在 URL 中。

例如：不要写“ [http://maps.google.com](http://maps.google.com) ”会导致您收到警告，而是写“//maps.google.com”，这将自动采用当前会话方案（http/https）和进行 API 调用。

希望这可以帮助。**

# ember.js - 找出一个元素是否被重新渲染

> ID：13555264
> 
> 赞同：2
> 
> 时间：2012-11-25T20:38:51.800
> 
> 标签：ember.js

我动态添加`content`，我想在我的视图中了解 DOM 更改，例如在添加新内容后测量尺寸。

我已经尝试过观察`controller.isLoaded`，但这发生得太早了。现在，我正在为 jQuery 使用 DOM 观察者插件。

有没有类似的东西`didRerenderElement`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:29:12.080

实施`afterRender`我的观点就可以了。谢谢你，@未指定！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:19:23.217

`didInsertElement`当视图插入 DOM 时，会执行这个方法，

用法：

```
App.myView = Ember.View.extend({
  didInsertElement: function(){
    alert("View is inserted into the DOM");
  }
}) 
```

检查这是否有帮助...

# c++ - 生产者 - 使用 Boost 库的 C++ 消费者

> ID：13555271
> 
> 赞同：0
> 
> 时间：2012-11-25T20:39:32.297
> 
> 标签：c++, multithreading, boost, boost-asio

我正在尝试设计和实现一个程序来“解决”经典的生产者-消费者问题。我还将使用发布/订阅模式，并且只有一个生产者。

我想到的第一件事是将每件事都作为一个单独的线程来实现，但后来我意识到这是低效的，可能有更聪明的方法可以做到这一点。

我需要：

*   接受来自客户端的 tcp/ip 连接
*   使用来自另一个进程的命名管道获取数据（命名管道可以在此处更改为其他任何内容）
*   一旦我得到数据就决定哪些客户应该得到它并将它发送到那里
*   能够随时解析客户端命令（例如，客户端想要更改订阅详细信息）
*   还取决于实现细节，我可能想清除包含传入数据的集合（如果我只需要一个）并踢非活动客户端

我现在的想法是：

*   创建一个将接受来自客户端的连接并将每个客户端添加到列表中的线程
*   创建一个线程/线程池，这些线程将执行 strand( `boost::strand`)，其中包括从源读取数据、决定哪个客户端应该获取数据以及将数据异步写入客户端。

我不知道如果

*   这是有效的方法
*   这是有效的方法
*   如何添加来自客户端的读取命令？
*   如何检查客户端不活动

对于如何正确实施此类事情的任何意见和建议，我将不胜感激。

# vb.net - 使用从列表框中选择的文本文件中的数据填充第二个表单

> ID：13555273
> 
> 赞同：0
> 
> 时间：2012-11-25T20:39:39.177
> 
> 标签：vb.net, vb.net-2010

VB.Net：我使用两种形式——frmDetails、frmInventory frmInventory 包含一个列表框，它读取一个文本文件，其中包含书名、作者、类别、库存编号和每件商品价格（五个元素）的列表。列表框仅显示书名。

frmDetails 包含与文本文件中的元素匹配的单个文本框。

如果用户在 frmInventory 列表框中选择其中一项（标题）并从下拉菜单中选择更新，则 frmDetails 中的文本框需要填充与其标签匹配的元素（标题与标题，作者与作者， ETC。）。换句话说，选择后，需要读取文本文件，解析数据，并填充到每个文本框中。

我尝试了几种不同形式的代码：

```
Dim selectedUpdate As String = lstBookList.SelectedItem.ToString
If selectedUpdate = lstBookList.SelectedItem.ToString Then
  Dim queryUpdate = From item In File.ReadAllLines("Books.txt")
                    Let ti = item.Split(","c)(0)
                    Let au = item.Split(","c)(1)
                    Let ca = item.Split(","c)(2)
                    Let qt = item.Split(","c)(3)
                    Let co = item.Split(","c)(4)
                    Where ti = selectedUpdate
                    Select ti & "," & au & "," & ca & "," & qt & "," & co
  For Each ti In queryUpdate
    frmDetails.txtTitle.Text = ti
    For Each au In queryUpdate
      frmDetails.txtAuthor.Text = au
      For Each qt In queryUpdate
        frmDetails.txtStock.Text = qt
        For Each co In queryUpdate
          frmDetails.txtPrice.Text = co
        Next
      Next
    Next
  Next
End If
frmDetails.ShowDialog()
End Sub 
```

或者：

```
Dim selectedUpdate As String = lstBookList.SelectedItem.ToString
Dim itemToUpdate() As String = File.ReadAllLines("Books.txt")
If selectedUpdate = lstBookList.SelectedItem.ToString Then
Dim queryTitle = From bookTitle In itemToUpdate
                   Let ti = bookTitle.Split(","c)(0)
                   Where ti = selectedUpdate
                   Select ti
  For Each ti In queryTitle
    frmDetails.txtTitle.Text = ti
  Next
  Dim queryAuthor = From bookAuthor In itemToUpdate
                   Let au = bookAuthor.Split(","c)(1)
                   Where au = selectedUpdate
                   Select au
  For Each au In queryAuthor
    frmDetails.txtAuthor.Text = au
  Next 
```

或者：

```
Dim selectedUpdate As String = lstBookList.SelectedItem.ToString
Dim itemToUpdate() As String = File.ReadAllLines("Books.txt")
If selectedUpdate = lstBookList.SelectedItem.ToString Then
  Dim queryUpdate = From item In File.ReadAllLines("Books.txt")
                   Let ti = item.Split(","c)(0)
                   Let au = item.Split(","c)(1)
                   Let ca = item.Split(","c)(2)
                   Let qt = item.Split(","c)(3)
                   Let co = item.Split(","c)(4)
                   Where ti = selectedUpdate
                   Select ti, au, ca, qt, co
  frmDetails.txtTitle.Text = (queryUpdate.ToString) ti
  frmDetails.txtAuthor.Text = au
  frmDetails.txtStock.Text = qt 
```

问题在于解析记录中的数据，以便将其分散到不同的文本字段中。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:54:15.037

好的，我坚持我最初的评论，即您应该创建一类书籍并将文本文件读入某种（书籍）集合中。

具体到您的要求，绑定列表将是合适的。

一个例子：

```
Public Class frmInventory
Public bookList As New BindingList(Of Book)
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'Presumes each book is stored on one line, with data seperated with a ";"
    'eg: Wrox Beginning Visual Basic 2010;Thearon Willis;non-fiction;100;17.5
    Dim books As String() = IO.File.ReadAllLines("C:\Users\Admin\Documents\allBooks.txt")

    For i = 0 To books.Count - 1
        Dim bookdata As String() = books(i).Split(";")
        bookList.Add(New Book(bookdata(0), bookdata(1), bookdata(2), CInt(bookdata(3)), CDbl(bookdata(4))))
    Next

    'set listbox1 datasource to our newly populated bindinglist(of book)
    ListBox1.DataSource = bookList
    'set displaymember to title. Could be any one of the other attributes of book.
    ListBox1.DisplayMember = "title"
End Sub

'When edit button is clicked: if you want the following to fire when an option is selected from a dropdown, handle accordingly
Private Sub btnEditSelected_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnEditSelected.Click

    'the listbox contains book objects, not a string! This can catch people out
    Dim selectedBook As Book = ListBox1.SelectedItem
    'create an instance of frmDetails, and pass it the selected book object
    Dim editform As New frmDetails(selectedBook)
    'Show editform as model and if the user clicks the OK button on the model form:
    If editform.ShowDialog() = DialogResult.OK Then
        'replace the existing book object in booklist with the modified one.
        bookList(bookList.IndexOf(selectedBook)) = selectedBook
    End If

End Sub

End Class 
```

您的 frmDetails 看起来像这样：

```
Public Class frmDetails
'auto property: creates a private book object called _book (note the underscore), see
'http://msdn.microsoft.com/en-us/library/dd293589.aspx for more details on autoproperties
Property book As Book

'require a book object to be sent when a new instance is created, by reference so we can edit the actual book object, not a copy
Public Sub New(ByRef book As Book)

    _book = book

    InitializeComponent()

End Sub

Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    TextBox1.Text = _book.title
    TextBox2.Text = _book.author
    TextBox3.Text = _book.category
    TextBox4.Text = _book.stock
    TextBox5.Text = _book.wholesaleprice
End Sub

Private Sub btnOK_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnOK.Click
    _book.title = TextBox1.Text
    _book.author = TextBox2.Text
    _book.category = TextBox3.Text
    _book.stock = TextBox4.Text
    _book.wholesaleprice = TextBox5.Text
    DialogResult = DialogResult.OK
End Sub
End Class 
```

在设计器中，将表单的“AcceptButton”属性设置为 btnOK。您还应该将其取消按钮属性设置为适当的按钮

最后是书类本身：

```
Public Class Book
Property title As String
Property author As String
Property category As String
Property stock As Integer
Property wholesaleprice As Double

Public Sub New(ByVal title As String, ByVal author As String, ByVal category As String, ByVal stock As Integer, ByVal wholesaleprice As Double)

    _title = title
    _author = author
    _category = category
    _stock = stock
    _wholesaleprice = wholesaleprice
End Sub
End Class 
```

# c# - FTP 上传时动态创建文件夹

> ID：13555274
> 
> 赞同：0
> 
> 时间：2012-11-25T20:39:43.950
> 
> 标签：c#, dynamic, ftp

好吧，我设法将文件上传到我的 FTP，但现在它正在为某些不存在的文件夹而哭泣，这是有道理的。但我想知道是否有办法在上传过程中动态创建这些文件夹？有任何想法吗？

这是我有 ATM 的代码：

```
public static void UploadToFtp(String ftpServerAndPath, String fullPathToLocalFile, String username, String password)
    {
        // to the full URI.
        String filename = Path.GetFileName(fullPathToLocalFile);

        // Open a request using the full URI, c/file.ext
        FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(ftpServerAndPath + "/" + filename);

        // Configure the connection request
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.Credentials = new NetworkCredential(username, password);
        request.UsePassive = true;
        request.UseBinary = true;
        request.KeepAlive = false;

        // Create a stream from the file
        FileStream stream = File.OpenRead(fullPathToLocalFile);
        byte[] buffer = new byte[stream.Length];

        // Read the file into the a local stream
        stream.Read(buffer, 0, buffer.Length);

        // Close the local stream
        stream.Close();

        // Create a stream to the FTP server
        Stream reqStream = request.GetRequestStream();

        // Write the local stream to the FTP stream
        // 2 bytes at a time
        int offset = 0;
        int chunk = (buffer.Length > 2048) ? 2048 : buffer.Length;
        while (offset < buffer.Length)
        {
            reqStream.Write(buffer, offset, chunk);
            offset += chunk;
            chunk = (buffer.Length - offset < chunk) ? (buffer.Length - offset) : chunk;
        }
        // Close the stream to the FTP server
        reqStream.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:58:42.587

[MSDN上的这篇文章](http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/17a3abbc-6144-433b-aadd-1f776c042bd5)

描述如何使用`myFtpWebRequest.Method = WebRequestMethods.Ftp.MakeDirectory`.

# c++ - 扩展初始化列表和数组

> ID：13555275
> 
> 赞同：5
> 
> 时间：2012-11-25T20:39:52.923
> 
> 标签：c++, arrays, c++11, initializer-list

我有简单的功能，例如：

```
void fun(vector<int> vec)
{
//...
}

void fun(int* smth)
{
//...
} 
```

不，当我在我的程序中编写时。

```
fun({2,3}); 
```

它让我觉得向量参数很有趣，我知道它在新的 C++ 扩展初始化列表中，但我想使用新的 C++ 并告诉编译器这只是一个 int 数组，我该怎么做？

编辑：

最好在 1 行中完成 :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T20:44:54.170

您不能用数组初始化指针，因为指针不是数组（尽管在*某些*情况下会出现这种情况，但事实并非如此）。

您必须将指针传递给预先存在的数组。或者，使用`vector`重载——当然，你还是更喜欢这个？！如果这两个函数做不同的事情，那么为什么它们会互相重载（即*为什么重要*）？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-25T20:47:06.570

制作别名模板

```
template<typename T>
using identity = T; 
```

所以你可以写

```
fun(identity<int[]>{1,2}); 
```

* * *

虽然这不是好的编程，因为在您的函数中您无法知道指向的数组的大小。如果该函数应该与元素列表一起使用，则应将其显式传递给该函数。如果要处理数组，请考虑使用类似的东西`llvm::ArrayRef<T>`或创建自己的

```
struct array_ref {
public:
  template<int N>
  array_ref(const identity<int[N]> &n)
    :begin_(n), end_(n + N)
  { }

  array_ref(const std::vector<int>& n)
    :begin_(n.data()), end_(n.data() + n.size())
  { }

public:
  int const *begin() const { return begin_; }
  int const *end() const { return end_; }
  int size() const { return end_ - begin_; }

private:
  int const *begin_;
  int const *end_;
};

void fun(array_ref array) {
  ...
}

int main() {
  fun(array_ref(identity<int[]>{1,2}));
} 
```

# c++ - 可以加载 C/C++ 和 Python 插件的应用程序

> ID：13555278
> 
> 赞同：0
> 
> 时间：2012-11-25T20:40:09.153
> 
> 标签：c++, python, c, plugins, shared-libraries

我想创建一个能够加载插件的应用程序。转折是我希望能够在 C/C++ 和 Python 中创建插件。

所以我开始思考这个问题，并有几个问题希望人们能帮助我。

我的第一个问题是我是否需要将 C/C++ 用于应用程序的“核心”（实际加载插件的部分）？至少这是我的感觉，我认为在 Python 中实现核心会导致性能下降，但它可能会简化动态加载插件。

第二个问题是我将如何一方面为 C/C++ 定义插件接口，另一方面为 Python 定义插件接口？插件接口相当简单，只是一个接受图像列表作为参数并返回图像列表作为返回值的方法。我可能会在 C/C++ 和 Python 都存在的插件中使用 OpenCV 图像类型。

最后，我希望应用程序能够动态发现插件。因此，如果您将 .py 文件或共享库文件 (.so/.dll) 放在此目录中，应用程序将能够在运行时生成可用插件的列表。

我在名为 Boost.Extension (http://boost-extension.redshoelace.com/docs/boost/extension/index.html) 的 Boost 库中找到了一些东西，但不幸的是，它似乎不是官方 Boost 库的一部分而且它现在似乎也有点陈旧了。最重要的是，我不知道它与 Python 的工作情况如何，也就是说，创建适合这种机制的 Python 插件是多么容易。

作为旁注，我想象应用程序分为两个“部分”。一部分是精简的核心（从“配方”加载和调用插件实例）。另一部分是我计划用 Python（使用 PySide）编写的核心和 GUI。该 GUI 将使用户能够定义上述“食谱”。这个 GUI 部分需要核心能够提供可用插件的列表。

对不起，冗长的“问题”。我想我希望进行更多的讨论，当然，如果有人知道类似的东西可以帮助我，我将非常感谢您的指点。我也将不胜感激任何关于类似内容的简明扼要的阅读材料（例如集成 C/C++ 和 Python 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:47:20.153

用 Python 编写您的应用程序，然后您就可以为您的插件创建一个文件夹。

您的应用程序通过检查目录/遍历插件树来搜索它们。

然后通过“import”导入它们或将 ctypes 用于 .so/.dll，甚至更简单：您可以使用 boost::python 创建一个可以像普通 python 模块一样“导入”的 .so/.dll。

不要使用 C++ 并尝试在 Python 中编写脚本——这真的很糟糕，你会后悔的。;)

# java - java从数组创建树

> ID：13555281
> 
> 赞同：0
> 
> 时间：2012-11-25T20:40:18.520
> 
> 标签：java, arrays, nullpointerexception

我需要创建一个树数组并获取用户输入的字母并将其放入节点中。我收到与 forest[i].root 相关的 NullPointerException 错误。我怎样才能解决这个问题？

```
class TreeApp  
{  
 public static void main(String[] args) throws IOException  
 {  
    Tree forest[] = new Tree[10];  

    Scanner kb = new Scanner(System.in);  

    for(int i = 0; i < 10; i++)  
    {  
        System.out.println("Insert a letter: "); 

        Node newNode = new Node();  
        newNode.iData = kb.next().charAt(0);  

        System.out.println("node: " + newNode.iData );  

        forest[i].root = newNode;
        }  
     }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:41:29.123

```
Tree forest[] = new Tree[10]; 
```

上面的语句创建了一个 type 的数组`Tree`，但它没有将任何`Tree`实例存储到数组中。因此，您的数组元素将使用默认`null`值进行初始化。

您需要先初始化数组元素，然后再访问它们。

在你的 for 循环中添加这一行： -

```
forest[i] = new Tree(); 
```

在访问`forest[i].root`.

# batch-file - 批处理脚本中带有特殊字符的密码

> ID：13555283
> 
> 赞同：2
> 
> 时间：2012-11-25T20:40:28.660
> 
> 标签：batch-file, special-characters

我觉得我的特殊字符有问题`%`。

如何让我的程序使用如下字符串：`toto%titi`？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:40:28.660

这个问题的解决方法是把字符串中的特殊字符加倍

`toto%titi`变成`toto%%titi`

问候。

# c# - asp.net c#中的编辑/删除按钮

> ID：13555288
> 
> 赞同：1
> 
> 时间：2012-11-25T20:40:48.850
> 
> 标签：c#, asp.net

我有一个表格，列出了从数据库中提取的客户。该表单还包含编辑和删除按钮，以更新现有客户的记录。我能够在第一页上为客户拉回所有表格数据。但是，当我单击客户旁边的“编辑”按钮时，它不会带回任何数据，而只会带回一个空白表格。我使用 NavigateURL 链接在“编辑”超链接中引用 CustomerID。我已经阅读和阅读并且对如何做到这一点感到困惑。谁能看到我可能做错了什么？变得非常沮丧。请帮忙。

```
<div>
    <h2>Customer Listing</h2>
    <br />
</div>

<p style="text-align:center">
    <asp:Button ID="btnCustomer" class="button" runat="server" Text="Add New Customer" onclick="btnCustomer_Click" />
</p>

<asp:ListView ID="lv" runat="server" 
    onselectedindexchanged="lv_SelectedIndexChanged">
<LayoutTemplate>
  <table width="110%" class="TableListing">
  <tbody>
    <thead>
    <th width="150">Customer Name</th>
      <th width="150">Email</th>
      <th width="150">City</th>
      <th width="40">State</th>
      <th width="110">Phone</th>
      <th width="80">Modify</th>
    </thead>
    <tr id="itemPlaceholder" runat="server"></tr>
     </tbody>
    </table>  

    <asp:DataPager ID="ItemDataPager" runat="server" PageSize="20">
        <Fields>
            <asp:NumericPagerField ButtonCount="5" />
        </Fields>
    </asp:DataPager>

</LayoutTemplate>

<ItemTemplate>
    <tr>
     <td><%# Eval ("LastName") %>, <%# Eval ("FirstName") %></td>
     <td><%# Eval ("Email") %></td>
     <td><%# Eval ("City") %></td>
     <td><%# Eval ("State") %></td>
     <td><%# Eval ("Phone") %></td>
     <td>
        <asp:HyperLink ID="lnkEdit" runat="server" NavigateUrl='<%# "CustomerEdit.aspx?ID=" + Eval("CustomerID") + Request.QueryString["LastName"] + Eval("LastName") %>' Text="Edit" />
    </td>
    </tr>
</ItemTemplate> 
```

然后我重定向到 CustomerEdit 页面：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.Master.HighlightNavItem("Customers");

        int CustomerID = 0;

        //Declare the connection object
        SqlConnection Conn = new SqlConnection();
        Conn.ConnectionString = ConfigurationManager.ConnectionStrings["MyDatabase"].ConnectionString;

        //Connect to the db
        Conn.Open();

    //Define query
        string sql = "SELECT * FROM Customer where CustomerID=@CustomerID";

    //Declare the Command
    SqlCommand cmd = new SqlCommand(sql, Conn);

    //Add the parameters needed for the SQL query
    //cmd.Parameters.AddWithValue("@LastName", LastName);

    //Declare the DataReader
    SqlDataReader dr = null;

    //Fill the DataReader
    dr = cmd.ExecuteReader();

    //Get the data
    if (dr.Read() == false)
    {
        //No Records
        dr.Close();
        Conn.Close();
        return;
    }

    txtFirstName.Text = dr["FirstName"].ToString();
    txtLastName.Text = dr["LastName"].ToString();

    dr.Close();
    Conn.Close();

    }

    protected void btnCancel_Click1(object sender, EventArgs e)
    {
        Response.Redirect("Customers.aspx");
    }

    protected void btnUpdate_Click(object sender, EventArgs e)
    {

        //Declare the connection object
        SqlConnection Conn = new SqlConnection();
        Conn.ConnectionString = ConfigurationManager.ConnectionStrings["MyDatabase"].ConnectionString;

        //Connect to the db
        Conn.Open();

        //Define query
        string sql = "INSERT INTO Customer (FirstName, LastName, Email, Password, Address1, Address2, City, State, Zip, Phone, Fax) VALUES (@FirstName, @LastName, @Email, @Password, @Address1, @Address2, @City, @State, @Zip, @Phone, @Fax)";
        //sql = "INSERT INTO xSample(Region,RepName,...) VALUES(@Region,@RepName,...)

        //Declare the Command
        SqlCommand cmd = new SqlCommand(sql, Conn);

        //Add the parameters needed for the SQL query
        cmd.Parameters.AddWithValue("@FirstName", txtFirstName.Text);
        cmd.Parameters.AddWithValue("@LastName", txtLastName.Text);
        cmd.Parameters.AddWithValue("@Email", txtEmail1.Text);
        cmd.Parameters.AddWithValue("@Password", txtPassword1.Text);
        cmd.Parameters.AddWithValue("@Address1", txtAddress1.Text);
        cmd.Parameters.AddWithValue("@Address2", txtAddress2.Text);
        cmd.Parameters.AddWithValue("@City", txtCity.Text);
        cmd.Parameters.AddWithValue("@State", txtState.Text);
        cmd.Parameters.AddWithValue("@Zip", txtZip.Text);
        cmd.Parameters.AddWithValue("@Phone", txtPhone.Text);
        cmd.Parameters.AddWithValue("@Fax", txtFax.Text);

        //Execute the query
        int NumRows = 0;
        NumRows = cmd.ExecuteNonQuery();

        Conn.Close();

        lblUpdate.Text = "Updated " + NumRows.ToString() + " record";

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:01:35.317

在你的 custmeredit.aspx 的 page_load

替换这个：

```
int CustomerID = 0; 
```

和：

```
int CustomerID = Int32.Parse(Request.QueryString["ID"]); 
```

# api - google.maps.marker 图标锚点

> ID：13555291
> 
> 赞同：1
> 
> 时间：2012-11-25T20:40:57.957
> 
> 标签：api, maps

我一直在 API V3 上使用 google.maps.markerIcon。这是到目前为止使用的代码：

`var addImage = new google.maps.MarkerImage('/images/address.png', new google.maps.Size(293, 198), new google.maps.Point(0,0), //img origin new google.maps.Point(320, 110)); //img anchor`

现在我看到在 V3.1 中不推荐使用 markerIcon（不推荐使用此类以支持 Icon。）所以现在我尝试了这个：

```
var AddressMarker = new google.maps.Marker({
position: coords,
map: map,
icon: (new google.maps.Point(320, 110), new google.maps.Point(50, 50),new google.maps.Size(293, 198),'/images/address.png'),
}); 
```

它再次显示address.png，但似乎没有注意锚点（第一个值）。此标记是地址图像，应显示在坐标位置的左侧。不采用图标原点值，它显示以该位置为中心的图像。

我怎么能在坐标的左中间位置呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:04:14.643

~~您可以使用[google.maps.MarkerImage](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)作为图标。查看[复杂图标](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)~~

编辑：对不起，完全忽略了 3.1 部分。但似乎 Icon 没有构造函数，您是否尝试过明确设置 Icon 属性？

# javascript - 淘汰赛：单击并检查一个元素中的绑定

> ID：13555293
> 
> 赞同：15
> 
> 时间：2012-11-25T20:41:10.787
> 
> 标签：javascript, knockout.js, knockout-2.0

我有一系列限制，以及启用/禁用限制的复选框。但是复选框不起作用

[jsFiddle](http://jsfiddle.net/WtPM9/1/)

```
function Limit(start, end)
{
    var that = this;

    this.start = start;
    this.end = end;

    this.label = ko.computed(function(){
        return that.start + ' - ' + that.end;            
    });
}

function ViewModel()
{
    var that = this;

    this.limits = [new Limit(1,2), new Limit(3,4), new Limit(4,5)];

    this.activeLimit = ko.observable(that.limits[0]);

    this.changeActiveLimit = function(limit)
    {
            that.activeLimit(limit);
    }
}

ko.applyBindings(new ViewModel());​ 
```

**我的 HTML**

```
<div data-bind="foreach: {data: limits, as: 'limit'}">
 <input type="checkbox" data-bind="click: $root.changeActiveLimit, checked: limit.label == $root.activeLimit().label"/>
    <span data-bind="text: limit.label"/> 

</div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T21:00:06.043

如果您像下面这样修改您的视图模型，它将起作用

```
function ViewModel()
{
    var that = this;

    this.limits = [new Limit(1,2), new Limit(3,4), new Limit(4,5)];

    this.activeLimit = ko.observable(that.limits[0]);

    this.changeActiveLimit = function(limit)
    {
            that.activeLimit(limit);
            return true;
    }
} 
```

**return true**是这里的关键部分。

这是一个工作小提琴 [http://jsfiddle.net/tariqulazam/WtPM9/10/](http://jsfiddle.net/tariqulazam/WtPM9/10/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-13T10:13:49.893

关键是**返回true；**在点击处理函数的末尾！这会正确更新 UI。

# parsing - 构建解析器的选项

> ID：13555304
> 
> 赞同：0
> 
> 时间：2012-11-25T20:42:20.583
> 
> 标签：parsing, dynamic, programming-languages

我有一个应用程序，用户可以在其中创建存储在数据库中的实体。每个实体都有一个字符串名称属性和一个布尔值属性。用户还可以指定一个字符串，其中包含要针对实体执行的逻辑。例如，逻辑可能类似于：

（Q1 或 Q2）和（Q3 或 Q4）

因此，要评估此逻辑，我的应用程序需要查找 Name 属性为 Q1、Q2、Q3 和 Q4 的实体，将 Value 属性替换为上述表达式中的名称，并评估该表达式。

该应用程序是用 C# 编写的。我是 C# 和 VB 方面的专家，但我没有使用动态语言的经验。我可以编写一个使用 Regex 来标记逻辑字符串的解析器，但我想知道是否有更简单的方法可以做到这一点，也许可以使用相对较新的 .Net 动态语言功能。

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:07:23.993

Flee (http://flee.codeplex.com/) 看起来像个赢家。特别是，它似乎提供了一种简单的事件机制，允许我的应用程序为 Flee 从表达式中解析出来的变量提供值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:48:56.883

ANTLR 是一个很棒的 Java 解析器生成器。我建议看看：

[http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target](http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target)

# java - Java EJB org.apache.jasper.JasperException：java.lang.NullPointerException

> ID：13555306
> 
> 赞同：1
> 
> 时间：2012-11-25T20:42:24.983
> 
> 标签：java, jsp, ejb, javabeans, netbeans-7

我为在线 DVD 商店创建了一个 EJB 应用程序。我使用 Netbeans 7.2.1 和 Glassfish 3.1.2 当我运行 index.jsp 时，它启动成功的界面，如果我单击表单提交按钮，我收到此错误：

```
HTTP Status 500 -

type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.NullPointerException
root cause

java.lang.NullPointerException
note The full stack traces of the exception and its root causes are available in the  GlassFish Server Open Source Edition 3.1.2.2 logs. 
```

在 Netbeans 中，我收到此错误：

```
INFO: Couldn't create the bean Lookup failed for 'businessSessionBeans.UserSessionBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.apache.jsp.index_jsp._jspService(index_jsp.java:76)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

我创建了一个 Java EE 企业应用程序。我有 project-ejb 和 project-war。因为我无法直接从 ejb 创建 SessionBean，所以我创建了一个新项目/Java 库类，并在那里创建了实体。我向 ejb 和 war 介绍了该库，他们识别了实体，因此我能够创建会话 bean。但是我收到了这个错误，我不知道问题所在，请参阅一些来源：

索引.jsp

```
 <%@page import="businessSessionBeans.* , java.math.*, javax.naming.*" %>

<%!
    private UserSessionBeanRemote userB=null;
    public void jspInit()
    {
        try{
            InitialContext ic=new InitialContext();
            userB=(UserSessionBeanRemote)ic.lookup(UserSessionBeanRemote.class.getName());
        }catch(Exception e)
                {System.out.println("Couldn't create the bean "+e.getMessage());}

     }
   public void jspDestroy()
   {
       userB=null;
   }
%>

        <%  String username=(String)request.getParameter("username");
            String password=(String)request.getParameter("password");
            if((username!=null)&(password!=null)){
                String userType=userB.userLogin(username,password);
                if (userType!=null){
                    session.setAttribute("username",username);
                    session.setAttribute("password",password);
                    session.setAttribute("userId", userB.getUserId(username, password));
                    if (userType.equals("Admin"))
                       response.sendRedirect("admin.jsp");
                    else if (userType.equals("User"))
                         response.sendRedirect("user.jsp");
                }
                else{
        %> <script type="text/javascript">
                window.alert("User not registered");
        </script>
            <%}}%>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>Login</title>
        </head>
        <body>
            <h1>Welcome to our DVD Store!</h1>
        <form method="post" action="index.jsp">
            <pre>
            Username: <input type="text" name="username"/><br/>
            Password: <input type="password" name="password"/><br/>
            <input type="submit" value="Submit"/>  <input type="reset" value="Reset"/><br/>
        <h3>Don't have an account? <a href="register.jsp">Sign up</a></h3>
            </pre>
        </form>
    </body>
</html> 
```

UserSessionBeanRemote.java

```
public interface UserSessionBeanRemote {

public void create(java.lang.String username, java.lang.String password, java.lang.String name, java.lang.String type);

public void edit(Entities.UserEntityBean userBean);

public void destroy(java.lang.Integer id);

public Entities.UserEntityBean find(java.lang.Object pk);

public java.util.List findAll();

public java.lang.String userLogin(java.lang.String username, java.lang.String password);

public java.lang.Integer getUserId(java.lang.String username, java.lang.String password); 
```

}

用户会话Bean.java

```
public class UserSessionBean implements UserSessionBeanRemote {

// Add business logic below. (Right-click in editor and choose
// "Insert Code > Add Business Method")
@PersistenceContext
EntityManager em;

@Override
public void create(String username,String password,String name, String type)
{
    UserEntityBean userBean=new UserEntityBean();
    userBean.setName(username);
    userBean.setPassword(password);
    userBean.setName(name);
    userBean.setUserType(type);
    em.persist(userBean);
}

@Override
public void edit(UserEntityBean userBean)
{
    em.merge(userBean);
}

@Override
public void destroy(Integer id)
{
    UserEntityBean userBean=(UserEntityBean)em.find(UserEntityBean.class, id);
    em.remove(userBean);
}

@Override
public UserEntityBean find(Object pk)
{
    return (UserEntityBean)em.find(UserEntityBean.class, pk);
}

@Override
public List findAll()
{
    return em.createQuery("select OBJECT(o) from UserEntityBean o").getResultList();
}

@Override
public String userLogin(String username,String password)
{

    String fusername,fpassword;
    UserEntityBean userBean;
    List userList=findAll();
    Iterator it=userList.iterator();
    while(it.hasNext())
    {
        userBean=(UserEntityBean)it.next();
        fusername=userBean.getName();
        fpassword=userBean.getPassword();
        if(fusername.equals(username)&fpassword.equals(password))
        {
            return userBean.getUserType();
        }   
    }
    return null;
}

@Override
public Integer getUserId(String username,String password)
{

    String fusername,fpassword;
    UserEntityBean userBean;
    List userList=findAll();
    Iterator it=userList.iterator();
    while(it.hasNext())
    {
        userBean=(UserEntityBean)it.next();
        fusername=userBean.getName();
        fpassword=userBean.getPassword();
        if(fusername.equals(username)&fpassword.equals(password))
        {
            return userBean.getId();
        }
    }
    return null;
} 
```

}

最后，UserEntityBean.java

```
public class UserEntityBean implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Integer id;
private String name;
private String password;
private String userType;

public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

/**
 * @return the name
 */
public String getName() {
    return name;
}

/**
 * @param name the name to set
 */
public void setName(String name) {
    this.name = name;
}

/**
 * @return the password
 */
public String getPassword() {
    return password;
}

/**
 * @param password the password to set
 */
public void setPassword(String password) {
    this.password = password;
}

/**
 * @return the userType
 */
public String getUserType() {
    return userType;
}

/**
 * @param userType the userType to set
 */
public void setUserType(String userType) {
    this.userType = userType;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof UserEntityBean)) {
        return false;
    }
    UserEntityBean other = (UserEntityBean) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "Entities.UserEntityBean[ id=" + id + " ]";
} 
```

}

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:51:35.990

你应该像这样查找你的 EJB：

```
userB=(UserSessionBeanRemote)ic.lookup("UserSessionBean"); 
```

而且您的代码缺少@Stateless：

```
@Stateless(name="UserSessionBean") 
public class UserSessionBean implements UserSessionBeanRemote { 
```

# python - 如何使用 BeautifulSoup 获取选项文本

> ID：13555307
> 
> 赞同：7
> 
> 时间：2012-11-25T20:42:27.527
> 
> 标签：python, html-parsing, beautifulsoup

我想使用 BeautifulSoup 来获取以下 html 中的选项文本。例如：我想获得 2002/12 、 2003/12 等。

```
<select id="start_dateid">
<option value="0">2002/12</option>
<option value="1">2003/12</option>
<option value="2">2004/12</option>
<option value="3">2005/12</option>
<option value="4">2006/12</option>
<option value="5" selected="">2007/12</option>
<option value="6">2008/12</option>
<option value="7">2009/12</option>
<option value="8">2010/12</option>
<option value="9">2011/12</option>
</select> 
```

获取内容的最佳方式是什么？现在我正在使用以下代码，但我不知道如何使用漂亮的汤。如果 html 文件中有多个选定区域，则结果将不正确。这是我到目前为止所拥有的：

```
 import urllib2
    from bs4 import BeautifulSoup
    import lxml

    soup = BeautifulSoup(urllib2.urlopen("./test.html").read(),"lxml");
    for item in soup.find_all('option'):
            print(''.join(str(item.find(text=True)))); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-25T20:48:20.363

你不必`lxml`在这里使用。我无法在我的机器上安装它，所以我的答案没有使用它。

```
from bs4 import BeautifulSoup as BS
import urllib2

soup = BS(urllib2.urlopen("./test.html").read())
contents = [str(x.text) for x in soup.find(id="start_dateid").find_all('option')] 
```

有了这个，您可以避免 html 文件中的多个选择区域的问题，因为我们首先限制 by `id='start_dateid'`，这保证您拥有正确的`<select>`，因为在每个 html 文档中，每个 html 元素必须具有唯一的`id`属性，如果它有一个`id`属性。然后，我们`<option>`只在*该* `<select>`标签内搜索所有标签，然后我们从每个标签中获取所有值`<option>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T20:50:02.170

只需选择`select`标签，然后遍历包含的字符串元素：

```
import urllib2
from bs4 import BeautifulSoup
import lxml

soup = BeautifulSoup(urllib2.urlopen("./test.html").read(),"lxml");
select = soup.find('select', id="start_dateid")
for value in select.stripped_strings:
    print value 
```

这*是*一条捷径；您可以改为循环`select.find_all('option')`并从每个元素中获取`.text`属性，但是由于无论如何都不存在其他元素，为什么不直接使用字符串 iterable 并完成它。毕竟，标签中只允许使用`<option>`and标签，并且只有标签包含文本。`<optgroup>``<select>``<option>`

交互式解释器的输出：

```
>>> select = soup.find('select', id="start_dateid")
>>> for value in select.stripped_strings:
...     print value
... 
2002/12
2003/12
2004/12
2005/12
2006/12
2007/12
2008/12
2009/12
2010/12
2011/12 
```

如果您需要将其转换为列表，只需使用：

```
values = list(select.stripped_strings) 
```

# ios - 如何将iOS应用程序置于后台几秒钟以解决相机快门关闭问题？

> ID：13555310
> 
> 赞同：-1
> 
> 时间：2012-11-25T20:42:56.303
> 
> 标签：ios, camera

我正在开发一个使用自定义叠加相机拍照的 iPad 应用程序。百叶窗第一次打开，然后关闭。当它关闭时，我尝试按下睡眠 iPad 按钮几秒钟，然后快门再次打开。我还尝试按下隐藏应用程序的主页按钮，当我再次打开应用程序时，快门打开。这两个动作等同于将应用程序置于后台，应用程序将退出和调用应用程序 didenterbackground 方法这两个方法。我想知道是否可以在不违反应用商店规则的情况下以编程方式将应用程序置于后台几秒钟。我可以以编程方式按下睡眠 iPad 按钮几秒钟吗？我试过 [UIApplication sharedApplication].idleTimerDisabled=yes; 然后直接 [UIApplication sharedApplication].idleTimerDisabled=no; 在overlayviewcontroller 的viewdidload 方法中，但它不起作用。这种方法是否应该将应用程序置于后台？它是否被苹果商店规则接受。我想知道你是否可以在这个问题上给我一些帮助？

提前谢谢你，最好的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:50:38.197

> 这种方法是否应该将应用程序置于后台？

不，它是为了别的，但你为什么不阅读它的文档呢？

> 它是否被苹果商店规则接受？

（你的意思是 AppStore 对吧？在 Apple Store，我们可以购买硬件……）

不，您所描述的完全违反了 AppStore 的用户界面指南。如果您以某种方式设法实现此行为，您的应用程序可能会被拒绝。

> 我想知道是否可以在不违反应用商店规则的情况下以编程方式将应用程序置于后台几秒钟。

抱歉不行。

顺便说一句，至少这样做的最佳机会是调用`- [SBUIController animateApplicationSuspend:]`，但它再次直接连接到 SpringBoard，因此它被明确禁止。

如果您真的认为这是 iOS 中的错误，您可以做的是提交错误报告。

# c# - 将一个类类型的项目标签与另一个相同类类型的变量进行比较是什么意思？

> ID：13555318
> 
> 赞同：1
> 
> 时间：2012-11-25T20:43:56.953
> 
> 标签：c#

所以，我无法理解：

*   假设我有一个名为 : Bob 的类和一个名为 name 的变量，其类型为 Bob。

我做这样的事情：

```
foreach(ListViewItem item in listView1.Items)
{
    if((Bob)item.Tag == name)
       { //code }

} 
```

这实际上是做什么的？如果构造函数中的所有对象都与该类的变量相同，它将该项与类的类型进行比较？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:49:54.417

根据 Microsoft 关于操作员偏好的摘要[http://msdn.microsoft.com/en-us/library/aa691323(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691323(v=vs.71).aspx)

( `.`member selection) 运算符比 cast 运算符具有更高的优先级`(type)`。

因此，它需要`item.Tag`并尝试将其强制转换为 type `Bob`，然后将其与 比较是否相等`name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:21:20.080

当您创建 ListViewItems 以添加到 ListView 时，您可以选择设置其“Tag”属性。它是 Object 类型，可以处理任何对象。如果您让 listViewItem 在屏幕上显示一些客户详细信息，您可能会将 listViewItem 的 Tag 属性设置为业务模型中的实际客户对象。

因此，您可以从 listView 中获取“SelectedItem”，将其转换为“customer”类并对其进行操作。这意味着您不必解析文本或任何内容即可从选定的 listViewItem 中找到选定的客户。

您的代码在“名称”变量中考虑了 ListView 和 Bob。代码为“Tag”属性与“name”变量中的 Bob 实例相同（通过引用）的所有 listViewItems 输入 if 语句的主体。

# emacs - 搜索或转换八进制序列

> ID：13555321
> 
> 赞同：1
> 
> 时间：2012-11-25T20:44:04.003
> 
> 标签：emacs, elisp

我已经用 pdftk 解压缩了一个 PDF 文件，我正在尝试用 regexp 在 Emacs 中编辑它。

问题是这个文件有重音字符并且 Emacs 将它们显示为八进制序列：例如`\340`对于 à。要编辑这个文件，我有两种可能性（至少我是这么认为的）。

a) 应用一种编码，这样 Emacs 将显示实际的重音字符，而不是它们的等效八进制字符。Vim 已经正确显示重音字符；

b) 使用正则表达式搜索八进制序列。

至于a)，我试过(set-buffer-file-coding-system 'utf-8-dos)、(set-buffer-file-coding-system 'utf-8-unix)、(set-buffer-file -coding-system 'raw-text) 没有成功。

至于 b)，在应用 set-buffer-file-coding-system 之后，我可以使用 增量搜索八进制序列`C-q ... RET`，但我无法做我真正需要的事情：替换字符串。事实上 ，使用or`C-q ... RET`时不匹配八进制序列。 也不行。`M-%``C-M-%``C-x 8 ``...``

提前致谢。安东尼奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:34:47.757

在访问 PDF 文件的缓冲区中尝试以下键序列：

> `C-x RET r` *字符编码* `RET`

这将使用您指定的字符编码重新访问文件。

或者，如果您想在访问文件*之前指定要使用的字符编码，您可以这样做*

> `C-x RET c` *字符编码* `RET`

就在打字之前`C-x C-f`。

有关更多详细信息，请参阅[文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Text-Coding.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:12:22.477

@斯特凡

其实我说的不是保存的区别，而是显示的区别。

在这两种情况下，关闭和重新打开文件都会使文件保持原样，没有明显的变化。至于显示，`(set-buffer-file-coding-system 'windows-1252-unix)`模式行从`(Unix) ---`变为`(Unix) **-`，表示代码系统没有发生变化，实际上缓冲区中的字符是相同的（八进制序列仍然存在）。

使用 (revert-buffer-with-coding-system 'windows-1252-unix) 时，模式行从`(Unix) ---`变为`* (Unix) ---`表示代码系统已更改为`windows-12**`，根据`M-x list-coding-systems`助记符，实际上八进制序列以其等效的重音字符显示.

如果我应用`(set-buffer-file-coding-system 'windows-1252-unix)`到其他缓冲区，例如从头开始，后者会从`1\--`变为`* (Unix) **`。因此，对于这个缓冲区，从到*有*一个实际的和广告上的变化。`latin-1-dos``windows-1252-unix`

这可能有一个连贯的设计，我不知道。

安东尼奥

# c# - WCF 会话和与数据库的连接

> ID：13555327
> 
> 赞同：2
> 
> 时间：2012-11-25T20:45:12.413
> 
> 标签：c#, wcf

我创建了与 SQL Server 建立连接并返回查询结果的 WCF 服务。

我的问题是：如何保存来自客户端的请求，**而不是为来自客户端的每个请求建立连接？**

我想要的场景是：

1.  在客户端输入SQL Server的用户名和密码，在服务器上建立连接（我需要加密数据吗？？）
2.  保持会话 30 秒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:16:38.200

从[http://msdn.microsoft.com/en-us/magazine/cc163590.aspx](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)，您可以使用**Per-Session Services**：

```
[AttributeUsage(AttributeTargets.Interface|AttributeTargets.Class, Inherited=false)]
public sealed class ServiceContractAttribute : Attribute
{
    public bool Session {get;set;}
    ... // More members
} 
```

会话默认为假。要支持会话，您需要在合同级别将 Session 设置为 true： [ServiceContract(Session = true)] interface IMyContract {...}

要完成配置，您需要指示 Windows Communication Foundation 在整个会话期间保持服务实例处于活动状态，并将客户端消息定向到它。此本地行为方面是通过将 ServiceBehavior 特性的 InstanceContextMode 属性设置为 InstanceContextMode.PerSession 来实现的，如下所示：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
class MyService : IMyContract {...} 
```

**每会话服务和客户端服务代码**

```
[ServiceContract(Session = true)]
interface IMyContract
{
    [OperationContract]
    void MyMethod();
}
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
class MyService : IMyContract,IDisposable
{
    int m_Counter = 0;
    MyService()
   {
       Trace.WriteLine("MyService.MyService()");
   }
   public void MyMethod()
   {
       m_Counter++;
       Trace.WriteLine("Counter = " + m_Counter);
    }
    public void Dispose()
    {
        Trace.WriteLine("MyService.Dispose()");
    }
} 
```

**客户代码**

```
MyContractProxy proxy = new MyContractProxy();
proxy.MyMethod(); proxy.MyMethod();
proxy.Close(); 
```

客户端和服务都可以通过在绑定中设置不同的值来配置不同的超时。支持可靠传输级会话的绑定为 ReliableSession 属性提供了用于配置空闲超时的 InactivityTimeout 属性。例如，以下显示了以编程方式为 TCP 绑定配置 30 秒的空闲超时所需的代码：

```
NetTcpBinding tcpSessionBinding = new NetTcpBinding();
tcpSessionBinding.ReliableSession.Enabled = true;
tcpSessionBinding.ReliableSession.InactivityTimeout = TimeSpan.FromSeconds(30); 
```

这是使用配置文件的等效配置设置：

```
<netTcpBinding>
    <binding name="TCPSession">
        <reliableSession enabled="true" inactivityTimeout="00:00:30"/>
    </binding>
</netTcpBinding> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:30:57.350

与 SQL Server 的连接由客户端缓存。假设您使用 HTTPS 来保护传输，那么您应该让客户端在每个请求中发送凭据。如果您编写相同的连接字符串，您可能会使用缓存连接。

老实说，我会避免尝试在会话中捕获它；但是，这也是可能的。客户端-服务器协议应尽可能保持无状态。

如果您不使用 HTTPS，那么您是完全不安全的，您不妨一起删除密码要求，只允许任何人查询他们想要的任何数据。

# sitecore - Sitecore ECM - 不要发送到重复的电子邮件地址

> ID：13555331
> 
> 赞同：2
> 
> 时间：2012-11-25T20:45:52.000
> 
> 标签：sitecore, sitecore6, sitecore-ecm

有谁知道 Sitecore ECM 中是否有一个设置会禁用发送到重复的电子邮件地址（Sitecore 6.5 rev 706 ECM 1.3.2 rev 120424）。我没有在开发文档中找到任何提及 - 但它似乎是一个常见的要求。还是我需要覆盖发送管道并将其实现为自定义功能？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:05:57.530

您可以将自己的步骤添加到 DispatchNewsletter 管道，而不是覆盖发送管道。

在该管道中，您可以访问所有收件人，并且可以过滤它们。

这是一些应该可以工作的代码，但我还没有测试过

```
public void Process(DispatchNewsletterArgs args)
{
    // Lets not filter emails from engagement automation
    TargetAudienceBase targetAudience = args.Message.TargetAudience;

    if (targetAudience.Name != "Engagement Automation")
    {
        // Cleas who gets the email
        args.Message.SubscribersNames.Clear();

        // holds list of email address, and contancts.
        var emailSendingTo = new Dictionary<string, Contact>();

        // Filter all recipients from the targetAudience
        foreach (Contact contact in targetAudience.OptInList.Contacts.Except(targetAudience.OptOutList.Contacts))
        {
            if (!emailSendingTo.ContainsKey(contact.InnerUser.Profile.Email))
            {
                emailSendingTo.Add(contact.InnerUser.Profile.Email, contact);
            }
        }

        // Add all the names to the subscriber list (domain/username)
        foreach (KeyValuePair<string, Contact> keyValuePair in emailSendingTo)
        {
            args.Message.SubscribersNames.Add(keyValuePair.Value.Name);
        }

    }
} 
```

在 DeployAnalytics 之前插入该步骤，使分析按应有的方式工作

# python - python memcache中没有设置值

> ID：13555342
> 
> 赞同：1
> 
> 时间：2012-11-25T20:46:55.167
> 
> 标签：python

我正在尝试打印我在 memcache 中设置的值，但我得到 None，我做错了什么？

```
import memcache
mc = memcache.Client(["127.0.0.1:11211"])
mc.set("foo","bar")
foo = mc.get("foo")

print foo
>>None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:48:19.200

我没有安装 memcached 二进制应用程序。对于 linux，您可以从源代码安装和编译[http://memcached.org/](http://memcached.org/)中的最新版本 对于 Windows 用户，您可以按照下一个教程进行操作：http: [//www.codeforest.net/how-to-install-memcached-在 Windows 机器上](http://www.codeforest.net/how-to-install-memcached-on-windows-machine)

# ruby-on-rails - Rails 服务器路由错误

> ID：13555354
> 
> 赞同：0
> 
> 时间：2012-11-25T20:48:37.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

尝试使用localhost 的 URL访问*Web 应用程序时出现路由错误。*

*使用Ruby on Rails 3.2*和*Windows 7*。

# 问题：

为什么会发生此路由错误？有没有人建议如何解决这个问题？

# 网址：

```
http://localhost:3000/web_app_name 
```

# 错误信息：

## 在网络浏览器中：

```
Routing Error

No route matches [GET] "/web_app_name" 
```

## 在命令提示符中：

```
Started GET "/web_app_name" for 127.0.0.1
    ActionController::RoutingError (No route matches [GET] "/web_app_name"):
      actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
      actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `ca ll'
      railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
      railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
      activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
      railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
      actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
      rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
      rack (1.4.1) lib/rack/runtime.rb:17:in `call'
      activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
      rack (1.4.1) lib/rack/lock.rb:15:in `call'
      actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
      railties (3.2.9) lib/rails/engine.rb:479:in `call'
      railties (3.2.9) lib/rails/application.rb:223:in `call'
      rack (1.4.1) lib/rack/content_length.rb:14:in `call'
      railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
      rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
      C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `servi        ce'
      C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
      C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in         start_thread'
      Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (78.0ms) 
```

# 附录：

## “routes.rb”文件：

web_app_name/config/routes.rb

```
WebAppName::Application.routes.draw do

end 
```

## rake routes 命令：

该`rake routes`命令不会在*命令提示符*中产生输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:53:44.030

您是否在文件中添加了路线`routes.rb`？！请出示一下！

它应该是这样的：

```
root :to => "controller_name#action_name" 
```

# c++ - 从 QVariantList 获取字符串

> ID：13555358
> 
> 赞同：3
> 
> 时间：2012-11-25T20:49:06.410
> 
> 标签：c++, qt

我的数据库中的数据位于 QVariantList 中，我想遍历它并获取名字。

```
QVariantList sqlData = database->loadDatabase("quotes.db", "quotes");
for (int i = 1; i <= sqlData.size(); i++)
    {
        qDebug() << sqlData.value(i);
    } 
```

这会产生：

```
Debug: QVariant(QVariantMap, QMap(("firstname", QVariant(QString, "Glenford") ) ( "id" ,  QVariant(qlonglong, 2) ) ( "lastname" ,  QVariant(QString, "Myers") ) ( "quote" ,  QVariant(QString, "We try to solve the problem by rushing through the design process so that enough time will be left at the end of the project to uncover errors that were made because we rushed through the design process.") ) )  ) 
```

我怎样才能调试“名字”的值？例如调试 = Glenford。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-13T14:51:58.143

QVariant 列表是 QVariants 的列表，对象有一个特定的迭代器。

```
QVariantList sqlData = database->loadDatabase("quotes.db", "quotes");
for (QVariantList::iterator j = sqlData.begin(); j != sqlData.end(); j++)
{
    qDebug() << "iterating through QVariantList ";
    qDebug() << (*j).toString(); // Print QVariant
} 
```

# android - 我的 android 应用程序无法通过市场获得

> ID：13555361
> 
> 赞同：0
> 
> 时间：2012-11-25T20:49:37.057
> 
> 标签：android, android-manifest, google-play

> **可能重复：**
> [与三星 Galaxy Mini 的设备兼容性问题](https://stackoverflow.com/questions/8776643/device-compatibility-issue-with-samsung-galaxy-mini)

我创建了一个安卓应用并在安卓市场上发布了它。但是，当我尝试在市场上寻找它时，它并没有出现在三星 Galaxy Mini (GT-S5770) 上，但它确实出现在 HTC 渴望 S 上。但是，当我尝试从 eclipse 运行它到三星手机时，它作品。

我查看了开发者控制台，它说该应用程序受限于三星 Galaxy mini，因为它的清单文件的权限。谁能帮我告诉三星银河手机的哪个特定功能有问题。

我的清单具有以下权限-

```
Screen layouts: SMALL NORMAL LARGE XLARGE
Required device features
android.hardware.camera
android.hardware.camera.autofocus
android.hardware.location
android.hardware.location.gps
android.hardware.location.network
android.hardware.screen.landscape
android.hardware.telephony
android.hardware.touchscreen 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:00:47.907

```
<use-feature android:name="android.hardware.camera.autofocus" /> 
```

这是使您的应用程序与 Galaxy Mini 不兼容的罪魁祸首

将其删除并将更新放入 Google Play。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:49:27.743

如果你把会发生什么

```
android:required="false" 
```

那行得通吗？[来源](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

# php - 问题 - mysql_fetch_assoc()

> ID：13555365
> 
> 赞同：-5
> 
> 时间：2012-11-25T20:50:12.597
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

我有一个 PHP 脚本，用户可以在其中更改他的帐户设置。但是有一个问题，因为我有一个我找不到的错误。你能帮我吗。

警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 69 行的 /Applications/XAMPP/xamppfiles/htdocs/tutorials/findFriends/account_settings.php 中给出

```
<?
include ("inc/incfiles/header.inc.php");
if ($user) {

}
else
{
 die ("You must be logged in to view this page!");
}
?>
<?
$senddata = $_POST['senddata'];

//Password variables
$old_password = strip_tags($_POST['oldpassword']);
$new_password = strip_tags($_POST['newpassword']);
$repeat_password = strip_tags($_POST['newpassword2']);

if ($senddata) {
//If the form has been submitted ...

$password_query = mysql_query("SELECT * FROM users WHERE username='$user'");
while ($row = mysql_fetch_assoc($password_query)) {
    $db_password = $row['password'];

    //md5 the old password before we check if it matches
    $old_password_md5 = md5($old_password);

    //Check whether old password equals $db_password
    if ($old_password_md5 == $db_password) {
     //Continue Changing the users password ...
     //Check whether the 2 new passwords match
     if ($new_password == $repeat_password) {
        if (strlen($new_password) <= 4) {
         echo "Sorry! But your password must be more than 4 character long!";
        }
        else
        {

        //md5 the new password before we add it to the database
        $new_password_md5 = md5($new_password);
       //Great! Update the users passwords!
       $password_update_query = mysql_query("UPDATE users SET password='$new_password_md5' WHERE username='$user'");
       echo "Success! Your password has been updated!";

        }
     }
     else
     {
      echo "Your two new passwords don't match!";
     }
    }
    else
    {
     echo "The old password is incorrect!";
    }
}
 }
else
{
 echo "";
}

$updateinfo = $_POST['updateinfo'];

//First Name, Last Name and About the user query
$get_info = mysql_query("SELECT first_name, last_name, bio FROM users WHERE username='$user'");
$get_row = mysql_fetch_assoc($get_info);
$db_firstname = $get_row['first_name'];
$db_last_name = $get_row['last_name'];
$db_bio = $get_row['bio'];

//Submit what the user types into the database
if ($updateinfo) {
 $firstname = strip_tags($_POST['fname']);
 $lastname = strip_tags($_POST['lname']);
 $bio = $_POST['bio'];

 if (strlen($firstname) < 3) {
echo "Your first name must be 3 more more characters long.";
 }
 else
 if (strlen($lastname) < 5) {
echo "Your last name must be 5 more more characters long.";
}
else
{
//Submit the form to the database
$info_submit_query = mysql_query("UPDATE users SET first_name='$firstname', last_name='$lastname', bio='$bio' WHERE username='$user'");
echo "Your profile info has been updated!";
header("Location: $user");
}
}
else
{
 //Do nothing
}
?>
<h2>Edit your Account Settings below</h2>
<hr />
<form action="account_settings.php" method="post">
<p>CHANGE YOUR PASSWORD:</p> <br />
Your Old Password: <input type="text" name="oldpassword" id="oldpassword" size="40"><br />
Your New Password: <input type="text" name="newpassword" id="newpassword" size="40"><br />
Repeat Password  : <input type="text" name="newpassword2" id="newpassword2" size="40"><br />
<input type="submit" name="senddata" id="senddata" value="Update Information">
</form>
<hr />
<form action="account_settings.php" method="post">
<p>UPDATE YOUR PROFILE INFO:</p> <br />
First Name: <input type="text" name="fname" id="fname" size="40" value="<? echo $db_firstname; ?>"><br />
Last Name: <input type="text" name="lname" id="lname" size="40" value="<? echo $db_last_name; ?>"><br />
About You: <textarea name="bio" id="bio" rows="7" cols="40"><? echo $db_bio; ?></textarea>

<hr />
<input type="submit" name="updateinfo" id="updateinfo" value="Update Information">
</form>
<br />
<br /> 
```

如果我想更改名字或姓氏，则会出现以下错误：

警告：无法修改标头信息 - 标头已由 /Applications/XAMPP/xamppfiles/htdocs/ 中的（输出开始于 /Applications/XAMPP/xamppfiles/htdocs/tutorials/findFriends/inc/incfiles/header.inc.php:72）发送第 93 行的教程/findFriends/account_settings.php

这是 header.inc.php：

```
<?
include ("inc/scripts/mysql_connect.inc.php");
session_start();
if (isset($_SESSION['user_login'])) {
$user = $_SESSION["user_login"];
}
else {
$user = "";
}
?>
<!DOCTYPE html>

<html lang="en">
<head>
        <meta charset="utf-8">

        <link rel="stylesheet" href="css/reset.css" media="screen">
        <link rel="stylesheet" href="css/master.css" media="screen">
        <link rel="stylesheet" href="css/blue.css" media="screen">
    <link rel="stylesheet" href="css/main.css" media="screen">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
        <script src="js/jquery.color.js"></script>
        <script src="js/script.js"></script>
    <script src="js/placeholder-js.js" type="text/javascript"></script>
    <script src="js/main.js" type="text/javascript"></script>

        <title>findFriends</title>
</head>
<body>
                <div class="mashmenu">
                        <div id="menuWrapper">
                        <div class="fnav">

                                <a href="#" class="flink" >findFriends+ </a>

                                <div class="allContent">

                                        <div class="snav" >
                                                <a href="#" class="slink" >About findFriends</a>

                                                <div class="insideContent">

                                                        <span class="featured" >What is it?<br />
                            findFriends is an open source social network, created for the sinimma YouTube tutorial
                            series. All code is explained and completely free to download and use.<a href="http://www.youtube.com/sinimma">Visit our YouTube
                            channel ...</a>
                            </span>
                                                </div><!-- end insideContent -->
                                        </div><!-- end snav -->

                                        <div class="snav" >
                                                <a href="#" class="slink" >Open Source?</a>
                                                <div class="insideContent">
                                                        <span class="featured" >All code is open source and freely availible,</span>
                                                        because this means that anyone can download and improve the source code whatever
                            way they want without permission. <br />You may use this source code in any way to do anything.
                            All we <br />ask is that you keep the link at the bottom of the page, as a way of saying thanks for
                            all of the work we have done. :)
                                                </div><!-- end insideContent -->
                                        </div><!-- end snav -->

                                        <div class="snav" >
                                                <a href="http://www.youtube.com/sinimma" class="slink" >Youtube Channel</a>
                                                <div class="insideContent">
                                                        <span class="featured" ></span>
                                        </div><!-- end snav -->
                    </div>
                                </div><!-- end allContent -->

                        </div><!-- end fnav -->

                        <?
                        if (isset($_SESSION["user_login"])) {
                        echo '

                        <div class="fnav">

                                <a href="' . $user . '" class="flink" >' . $user . '\'s Profile</a>

                        </div><!-- end fnav -->
                        <div class="fnav">

                                <a href="account_settings.php" class="flink" >Account Settings</a>

                        </div><!-- end fnav -->
                        <div class="fnav">

                                <a href="logout.php" class="flink" >Logout</a>

                        </div><!-- end fnav -->

                        ';
                        }
                        else
                        {
                                echo '

                                <div class="fnav">

                                <a href="index.php" class="flink" >Sign Up+ </a>

                        </div><!-- end fnav -->
            <div class="fnav">

                                <a href="index.php" class="flink" >Login+ </a>

                        </div><!-- end fnav -->

                                ';
                        }
                        ?>

                        <div class="feat">
                                <form id="searchForm">
                <fieldset>
                    <div class="input">
                        <input type="text" class="Search" id="s" value="Search findFriends ..." />
                    </div>
                    <input type="submit" id="searchSubmit" value="" />
                </fieldset>
            </form>
                        </div><!-- end fnav feat -->
          </div>
                </div><!--end mashmenu -->
        <div id="wrapper">
<br />
<br />
<br />
<br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:52:27.710

您查询失败。这是**99.99%**的情况，只要您看到*“期望参数 1 是资源，给定布尔值”*错误消息。它弹出是因为您尝试在进一步的调用中使用查询结果，但如果失败，您获得的不是您期望的资源，而是布尔值 ( `false`)。

经验法则是：**始终**检查查询是否成功，使用类似的代码

```
$result = mysql_query()
if( $result !== false ) {
   // ok, let's proceed
} 
```

此外，您的代码很容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。始终通过诸如`mysql_real_escape_string()`.

**编辑**

由于您的代码中只有一个查询，请替换：

```
$password_query = mysql_query("SELECT * FROM users WHERE username='$user'"); 
```

和

```
$password_query = mysql_query( sprintf("SELECT * FROM users WHERE username='%s'",
                       mysql_real_escape_string($user)) ); 
```

这将解决您的问题。你应该放弃`strip_tags()`。在这里使用它不是正确的地方，因为您正在破坏用户输入。最后不是`$password_query`，而是`$password_query_result`。

PS：考虑放弃`mysql_`扩展并使用`mysqli_`or `PDO`。`mysql_`扩展名已**弃用**。它不应该是任何痛苦的过渡，因为`mysqli_`主要是直接替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:55:17.847

问题在于这个查询（第 68 行）：

```
$get_info = mysql_query("SELECT first_name, last_name, bio FROM users WHERE username='$user'"); 
```

此查询失败因此`$get_info`包含布尔值`FALSE`而不是需要的 MySQL 资源`mysql_fetch_assoc`。

并检查您的脚本是否存在 SQL 注入漏洞 - 您的脚本非常容易受到攻击！

# uiwebview - UIWebView 的行为与 Amazon.com 上的 Safari 不同

> ID：13555366
> 
> 赞同：0
> 
> 时间：2012-11-25T20:50:28.927
> 
> 标签：uiwebview, hover, amazon

我正在为 iOS 开发一个网络浏览器，我注意到 UIWebView 在某些情况下的行为与 safari 不同。我想不通的是亚马逊的网站。

当我点击 iPad safari 右上角菜单栏上的“登录”时，它会打开一个弹出窗口，我可以在其中选择“您的帐户”来加载登录页面。

但是当我在普通的 UIWebView 上尝试它时，它不会显示弹出窗口。我怀疑它与悬停效果有关，但无法解决。

有任何想法吗？

吉尔

![在此处输入图像描述](../Images/0e82acc76ff60b2c42f0d3d65b150caa.png)

预期结果：

![在此处输入图像描述](../Images/f5fd4a62f6315227438a61fa408518f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:11:15.153

UIWebView 在亚马逊网站上执行某些 JavaScript 时可能存在问题。[1](http://undefinedvalue.com/2011/07/25/beware-lure-ios-uiwebview)

也许使用诸如 Three20 的 TTWebController 或 CIALBrowser 之类的替代品会有所帮助？

# java - 在 Java 中定义嵌套类/对象/枚举结构的最佳方法是什么？

> ID：13555367
> 
> 赞同：6
> 
> 时间：2012-11-25T20:50:31.593
> 
> 标签：java, class, enums, nested

我正在开发一个 Android 应用程序 (Java)，它通过 HTTP POST 使用 Yamaha 蓝光播放器的 API。播放器具有 XML 格式的严格命令集。命令遵循层次结构：虽然大部分外部 XML 元素始终相同，但内部结构属于播放器函数的类型。例如，播放/暂停/停止函数在 XML 中具有相同的路径，而跳过函数具有其他父元素。您可以在以下代码示例中看到我的意思。

```
public enum BD_A1010 implements YamahaCommand
{
    POWER_ON ("<Main_Zone><Power_Control><Power>On</Power></Power_Control></Main_Zone>"),
    POWER_OFF ("<Main_Zone><Power_Control><Power>Network Standby</Power></Power_Control></Main_Zone>"),
    TRAY_OPEN ("<Main_Zone><Tray_Control><Tray>Open</Tray></Tray_Control></Main_Zone>"),
    TRAY_CLOSE ("<Main_Zone><Tray_Control><Tray>Close</Tray></Tray_Control></Main_Zone>"),
    PLAY ("<Main_Zone><Play_Control><Play>Play</Play></Play_Control></Main_Zone>"),
    PAUSE ("<Main_Zone><Play_Control><Play>Pause</Play></Play_Control></Main_Zone>"),
    STOP ("<Main_Zone><Play_Control><Play>Stop</Play></Play_Control></Main_Zone>"),
    SKIP_REVERSE ("<Main_Zone><Play_Control><Skip>Rev</Skip></Play_Control></Main_Zone>"),
    SKIP_FORWARD ("<Main_Zone><Play_Control><Skip>Fwd</Skip></Play_Control></Main_Zone>");

    private String command;

    private BD_A1010 (String command)
    {
        this.command = command;
    }

    public String toXml ()
    {
        return "<?xml version=\"1.0\" encoding=\"utf-8\"?><YAMAHA_AV cmd=\"PUT\">" + this.command + "</YAMAHA_AV>";
    }
} 
```

如您所见，我尝试了平面枚举方式，效果很好。我可以像这样将枚举与我的 RemoteControl 类一起使用：

```
remoteControl.execute(BD_A1010.PLAY); 
```

枚举的 .toXml() 方法返回发送给播放器所需的完整 XML 代码。现在这是我的问题：我需要一种更好的方法来构建 Java 类中的函数层次结构。我想这样使用它：

```
remoteControl.execute(BD_A1010.Main_Zone.Power_Control.Power.On); 
```

就像嵌套的枚举或类。命令的每一级都应在其自身内部定义其 XML 元素。此外，路径上的每个命令只能定义可能的子命令：例如，在 Main_Zone.Play_Control 之后，我可能只使用 .Play 或 .Skip，而不是 .Tray 或其他任何东西。在链的最后，我喜欢调用 .toXml() 来获取完整的 XML 命令。

**Java中将这种层次结构定义为（嵌套）类的最佳方法是什么？**应该很容易定义 - 尽可能少的代码。

稍后，应该可以合并两个或多个命令以获得组合的 XML，如下所示 - 但这对于第一次尝试并不那么重要。

```
remoteControl.execute(
    BD_A1010.Main_Zone.Power_Control.Power.On,
    BD_A1010.Main_Zone.Play_Control.Skip.Rev,
    BD_A1010.Main_Zone.Play_Control.Play.Pause
);

<Main_Zone>
    <Power_Control>
        <Power>On</Power>
    </Power_Control>
    <Play_Control>
        <Skip>Rev</Skip>
        <Play>Pause</Play>
    </Play_Control>
</Main_Zone> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T20:56:42.473

为什么它必须是枚举？[建造者模式](http://en.wikipedia.org/wiki/Builder_pattern)来拯救。考虑一下这种味道：[http](http://www.drdobbs.com/jvm/creating-and-destroying-java-objects-par/208403883?pgno=2) ://www.drdobbs.com/jvm/creating-and-destroying-java-objects-par/208403883?pgno= 2 而不是香草味。核心改进是非常易读的语法：

```
builder.withProperty(...).withFeature(...).finallyWith(...) 
```

# asp.net-mvc - 从 AsyncController 中的 MSMQ 返回空值的方法

> ID：13555370
> 
> 赞同：1
> 
> 时间：2012-11-25T20:50:42.690
> 
> 标签：asp.net-mvc, delegates, msmq, asynccontroller

我正在尝试构建一个用于实时传递消息的框架（目前使用 MSMQ），以显示在将用作信息显示的网页上。一旦消息进入队列，我希望消息显示在页面上。

控制器：

```
public class MessageController : AsyncController
{
    public void IndexAsync()
    {
        AsyncManager.OutstandingOperations.Increment(1);
        Task<string>.Factory.StartNew(() =>
            {
                var queue = new MessageQueue(@".\private$\path-to-queue");
                while (true)
                {
                    var message = string.Empty;
                    var result = queue.BeginReceive();
                    queue.Formatter = new XmlMessageFormatter(new[] {typeof (string)});
                    queue.ReceiveCompleted += delegate(object sender, ReceiveCompletedEventArgs args) { message = args.Message.Body.ToString(); };
                    queue.EndReceive(result);
                    return message;
                }
            }).ContinueWith(t =>
                {
                    AsyncManager.Parameters["message"] = t.Result;
                    AsyncManager.OutstandingOperations.Decrement();
                }
            );
    }

    public JsonResult IndexCompleted(string message)
    {
        return Json(message, JsonRequestBehavior.AllowGet);
    }
} 
```

当我从浏览器调用操作时，浏览器会等待消息出现在队列中。当我将消息添加到队列中时，浏览器会继续请求，但最终会得到一个空白字符串，而不是消息的内容。

或者，我尝试替换

```
message = args.Message.Body.ToString(); 
```

在代表内

```
return args.Message.Body.ToString(); 
```

但我最终得到一个编译器错误，告诉我返回类型是无效的。

诚然，我对代表们还是很陌生，但我非常感谢朝着正确的方向前进。

谢谢 -

* * *

## 编辑 2012 年 11 月 25 日 @ 22:29

我找到了一个可行的解决方案......不确定它是否是最好的方法，这就是为什么我将这个开放给一些同行评审。

```
public class MessageController : AsyncController
{
    public void IndexAsync()
    {
        AsyncManager.OutstandingOperations.Increment(1);
        Task<Message>.Factory.StartNew(() =>
            {
                var queue = new MessageQueue(@".\private$\path-to-queue");
                while (true)
                {
                    var result = queue.BeginReceive();
                    queue.Formatter = new XmlMessageFormatter(new[] {typeof (string)});
                    var message = queue.EndReceive(result);
                    return message;
                }
            }).ContinueWith(t =>
                {
                    AsyncManager.Parameters["message"] = t.Result.Body.ToString();
                    AsyncManager.OutstandingOperations.Decrement();
                }
            );
    }

    public JsonResult IndexCompleted(string message)
    {
        return Json(message, JsonRequestBehavior.AllowGet);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:14:01.993

正如对原始问题的编辑中所述，我发现我根本不需要委托：

```
public class MessageController : AsyncController
{
    public void IndexAsync()
    {
        AsyncManager.OutstandingOperations.Increment(1);
        Task<Message>.Factory.StartNew(() =>
            {
                var queue = new MessageQueue(@".\private$\path-to-queue");
                while (true)
                {
                    var result = queue.BeginReceive();
                    queue.Formatter = new XmlMessageFormatter(new[] {typeof (string)});
                    var message = queue.EndReceive(result);
                    return message;
                }
            }).ContinueWith(t =>
                {
                    AsyncManager.Parameters["message"] = t.Result.Body.ToString();
                    AsyncManager.OutstandingOperations.Decrement();
                }
            );
    }

    public JsonResult IndexCompleted(string message)
    {
        return Json(message, JsonRequestBehavior.AllowGet);
    }
} 
```

不过，我要注意一件事……我不认为会有多个控制器实例轮询消息队列，因此最终会出现浏览器会话竞争消息的情况。一个浏览器将收到第一条消息，另一个浏览器将收到第二条消息，依此类推。我最终将此实现切换到 SignalR——只是等待 .NET 客户端进入发布阶段。

# c# - 在 .NET 中处理对象？

> ID：13555373
> 
> 赞同：2
> 
> 时间：2012-11-25T20:50:56.133
> 
> 标签：c#, .net, garbage-collection, dispose

查看来自 GAC 的“System.IO.File.AppendAllText”代码，它调用另一个名为“InternalAppendAllText”的方法，该方法创建一个新的 StreamWriter 并将内容写入文件。

```
//mscorlib, System.IO
private static void InternalAppendAllText(string path, string contents, Encoding encoding)
{
    using (StreamWriter writer = new StreamWriter(path, true, encoding))
    {
      writer.Write(contents);
    }
} 
```

我的问题是，如果我做了一个 for 循环调用 System.IO.AppentAllText 5 次，例如 StreamWriter 会被创建 5 次，每次迭代都会被初始化和处理，还是只初始化一次？

例子：

```
for(int i = 1; i < 4; ++i)
{
    System.IO.File.AppendAllText("a", "a");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T21:00:33.990

该`using`块扩展为等效于以下代码：

```
StreamWriter writer;
try
{
    writer = new StreamWriter(path, true, encoding))
    writer.Write(contents);
}
finally
{
    if (writer != null)
         writer.Dispose();
} 
```

所以是的，每当一个`using`块退出时，对象就会被释放。每当您重新输入该函数时，`StreamWriter`都会初始化一个新函数。

但是请注意，这与垃圾收集器没有任何关系。GC 将在需要时运行，扫描分配的对象，注意到有五个`StreamWriter`对象没有附加到任何 GC Root，然后丢弃它们。无论您是否调用`Dispose`或使用都是如此`using`，这就是 GC 的工作方式。

这里`using`的作用是释放对象持有的*非托管资源——在本例中为文件句柄。*如果`StreamWriter`未销毁或以其他方式明确关闭，则文件将一直锁定以进行编辑，直到您的进程完成或 GC 决定激活。这就是`using`块和`IDisposable`交互的用途——确保您明确释放 GC 不知道的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T20:56:11.587

如果您查看反编译的代码，则 Stream 位于 using 语句中，因此将被清理。它将被初始化所有 5 次，但一旦代码离开 using 语句，它将被清除。

# subtitle - 从电影文件中提取隐藏式字幕的最佳方法是什么？

> ID：13555374
> 
> 赞同：8
> 
> 时间：2012-11-25T20:50:58.147
> 
> 标签：subtitle, closed-captions

我需要从电影文件中提取隐藏式字幕信息，我已经尝试过`ccextractor`，但它似乎不起作用。

我已经捕获了一个视频流（其中带有隐藏式字幕）并保存到一个文件中，然后我运行`ccextractor`......但它找不到任何东西！

我的视频样本如下：

[http://dl.dropbox.com/u/10244901/gsd.mpg](http://dl.dropbox.com/u/10244901/gsd.mpg)

[http://dl.dropbox.com/u/10244901/gsd_b.mpg](http://dl.dropbox.com/u/10244901/gsd_b.mpg)

第一次尝试：

```
cvlc -I dummy v4l2:///dev/video1:width=720:height=480:norm=ntsc:standard=ntsc:pixelformat=2:aspect-ratio=4\:3:channel=0 --sout "#transcode{vcodec=mp2v}:standard{access=file,mux=dummy,dst=gsd.mpg}"

lzzz@ideiatu:~/Downloads/ccextractor.0.64/linux$ ./ccextractor gsd.mpg 
CCExtractor 0.64, Carlos Fernandez Sanz, Volker Quetschke.
Teletext portions taken from Petr Kutalek's telxcc
--------------------------------------------------------------------------
Input: gsd.mpg
[Raw Mode: Broadcast] [Extract: 1] [Stream mode: Autodetect]
[Program : Auto ] [Hauppage mode: No] [Use MythTV code: Auto]
[Timing mode: Auto] [Debug: No] [Buffer input: No]
[Use pic_order_cnt_lsb for H.264: No] [Print CC decoder traces: No]
[Target format: .srt] [Encoding: Latin-1] [Delay: 0] [Trim lines: No]
[Add font color data: Yes] [Add font typesetting: Yes]
[Convert case: No] [Video-edit join: No]
[Extraction start time: not set (from start)]
[Extraction end time: not set (to end)]
[Live stream: No] [Clock frequency: 90000]
Teletext page: Autodetect]
Start credits text: [None]
Creating gsd.srt

-----------------------------------------------------------------
Opening file: gsd.mpg
File seems to be an elementary stream, enabling ES mode
Analyzing data in general mode

New video information found
[720 * 480] [AR: 02 - 4:3] [FR: 03 - 25] [progressive: yes]

133%  |  01:40
Number of NAL_type_7: 0
Number of VCL_HRD: 0
Number of NAL HRD: 0
Number of jump-in-frames: 0
Number of num_unexpected_sei_length: 0

Total frames time:      00:01:41:200  (2530 frames at 25.00fps)

Min PTS:                00:00:00:000
Max PTS:                00:01:41:200
Length:                 00:01:41:200

Initial GOP time:       00:00:00:000
Final GOP time:         00:01:40:800+10F
Diff. GOP length:       00:01:40:800+10F    (00:01:41:133)
Done, processing time = 0 seconds
This is beta software. Report issues to cfsmp3 at gmail... 
```

第二次尝试：

```
cvlc -I dummy gsd.mpg --sout "#standard{access=file,mux=ts,dst=gsd_b.mpg}"

lzzz@ideiatu:~/Downloads/ccextractor.0.64/linux$ ./ccextractor gsd_b.mpg
CCExtractor 0.64, Carlos Fernandez Sanz, Volker Quetschke.
--------------------------------------------------------------------------
Input: gsd_b.mpg
[Raw Mode: Broadcast] [Extract: 1] [Stream mode: Autodetect]
[Program : Auto ] [Hauppage mode: No] [Use MythTV code: Auto]
[Timing mode: Auto] [Debug: No] [Buffer input: No]
[Use pic_order_cnt_lsb for H.264: No] [Print CC decoder traces: No]
[Target format: .srt] [Encoding: Latin-1] [Delay: 0] [Trim lines: No]
[Add font color data: Yes] [Add font typesetting: Yes]
[Convert case: No] [Video-edit join: No]
[Extraction start time: not set (from start)]
[Extraction end time: not set (to end)]
[Live stream: No] [Clock frequency: 90000]
Teletext page: Autodetect]
Start credits text: [None]
Creating gsd_b.srt

-----------------------------------------------------------------
Opening file: gsd_b.mpg
File seems to be a transport stream, enabling TS mode
Analyzing data in general mode
Decode captions from MPEG-2 video stream [0x02]  -  PID: 68

New PID found: 68

New video information found
[720 * 480] [AR: 02 - 4:3] [FR: 03 - 25] [progressive: yes]

100%  |  00:00
Number of NAL_type_7: 0
Number of VCL_HRD: 0
Number of NAL HRD: 0
Number of jump-in-frames: 0
Number of num_unexpected_sei_length: 0

Total frames time:      00:01:41:040  (2526 frames at 25.00fps)

Min PTS:                02:59:52:437
Max PTS:                02:59:52:677
Length:                 00:00:00:240

Initial GOP time:       00:00:00:000
Final GOP time:         00:01:40:800 +6F
Diff. GOP length:       00:01:40:800 +6F    (00:01:41:000)
Done, processing time = 0 seconds
This is beta software. Report issues to cfsmp3 at gmail... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-26T12:54:50.523

有些电影没有包含字幕的隐藏文件，但字幕是硬编码到视频中的，这意味着它们实际上是视频的一部分，无法区分。

您可以尝试谷歌搜索电影的独立版本字幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-21T00:14:33.220

视频采集卡可能只保留视频数据。

# java - 刚从 Play 商店下架的 Cocos2D-x 游戏甚至无法打开

> ID：13555376
> 
> 赞同：2
> 
> 时间：2012-11-25T20:51:12.520
> 
> 标签：java, android, cocos2d-x, forceclose, nexus-7

我刚刚完成了我的第一个 cocos2d-x 游戏。我已经在我的 GNexus 4.1 和其他低端设备（包括平板电脑）上对其进行了测试。但是，当购买并下载到 Nexus 7 时，它甚至无法打开。它正在运行4.2，这可能是问题吗？任何帮助，将不胜感激。崩溃报告：

```
java.lang.ExceptionInInitializerError
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1319)
at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
at android.app.ActivityThread.access$600(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.UnsatisfiedLinkError: Cannot load library:     soinfo_relocate(linker.cpp:975): cannot locate symbol "__exidx_end" referenced by               "libgame.so"...
at java.lang.Runtime.loadLibrary(Runtime.java:371)
at java.lang.System.loadLibrary(System.java:535)
at com.penguinproductions.classiclightcycles.<clinit>(classiclightcycles.java:107)
... 15 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:02:41.773

有许多应用程序遭受此错误。它发生在 Android 4.2 上，项目使用特定的 Android NDK 编译 - 对我来说，它是 r8d，但您也可以找到其他版本存在该错误的人。[这里](http://www.crystax.net/trac/ndk/ticket/112)提到了我发现的解决方法。解决方案是在您的任何文件中添加以下代码行`.cpp`：

```
#ifdef __cplusplus
    extern "C" {
#endif

void __exidx_start() {}
void __exidx_end()   {}

#ifdef __cplusplus
    }
#endif 
```

对我来说，它奏效了。

但是我认为你必须注意，因为在未来的 NDK 版本中，当他们最终修复这个问题时，这些符号可能会被定义两次，所以这个解决方法实际上会变成一个错误。

# sublimetext2 - 更改 SublimeText2 配置路径

> ID：13555377
> 
> 赞同：1
> 
> 时间：2012-11-25T20:51:20.383
> 
> 标签：sublimetext2

是否可以更改 SublimeText 2 加载用户片段的路径？

我想使用 Dropbox 在多个系统之间同步它们，并且不想在每台机器上配置额外的“同步”工具。

用户配置或文档中似乎没有任何更改路径的内容，所以我没有屏住呼吸。

# org-mode - 组织模式：如何安排每个月的第一个星期六重复的任务？

> ID：13555385
> 
> 赞同：17
> 
> 时间：2012-11-25T20:52:16.570
> 
> 标签：org-mode

我正在使用 org-mode 来安排任务。

有没有一种简单的方法来安排在每个月的第一个星期六发生的任务？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T18:15:15.010

`org-float`现在已过时（请参阅[此提交](http://orgmode.org/w/?p=org-mode.git;a=commitdiff;h=b27a020a835f67c1c61bd2bb1a03accc4ad4b453)）。从现在开始，您将不得不使用`diary-float`.`org-float`

（对不起，噪音：这不值得一个完整的答案，但现在我没有足够的“声誉”来评论。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-25T22:39:28.590

组织模式有一个很好的文档，使用它。 `(info "(org) Deadlines and scheduling")`

> 您可以在调度和截止日期条目中使用带有中继器的时间戳。Org 模式将基于时间戳表示最近的中继器实例的假设发出早期和晚期警告。但是，在调度和截止时间时间戳中使用像 `<%%(diary-float t 42)>' 这样的日记 sexp 条目是有限的。Org 模式对每个 sexp 函数的内部了解不足，无法发出早期和晚期警告。但是，它将在每天匹配 sexp 条目的地方显示该项目。

```
* My Task
  <%%(diary-float t 6 1)> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-07T01:36:19.153

在调度和截止日期时间戳中使用 sexp 是有限的，就像信息说的那样

> Org 模式对每个 sexp 函数的内部了解不足，无法发出早期和晚期警告。

我编写了一个 elisp 代码来自动更改时间戳，有了它，您需要做的就是设置一个属性。

elisp 代码在[这里](https://github.com/chenfengyuan/elisp/blob/master/next-spec-day.el)

1.  添加`(load "/path/to/next-spec-day")`到您的点 emacs 文件。

2.  TODO 任务的集合`NEXT-SPEC-DEADLINE`和/或`NEXT-SPEC-SCHEDULED`属性，如下所示：

    ```
    * test
      :PROPERTIES:
      :NEXT-SPEC-SCHEDULED: (org-float t 6 1)
      :END: 
    ```

    NEXT-SPEC-SCHEDULED 的值是一个 sexp，`non-nil`如果`date`是该月的第一个星期六，将返回

3.  然后，当您更改该任务的 TODO 状态时，时间戳将自动更改（包括警告设置的提前时间）。它变为：

    ```
    * TODO test
      SCHEDULED: <2013-01-05 Sat>
      :PROPERTIES:
      :NEXT-SPEC-SCHEDULED: (org-float t 6 1)
      :END: 
    ```

# python - 开始芹菜：AttributeError：“模块”对象没有属性“芹菜”

> ID：13555386
> 
> 赞同：25
> 
> 时间：2012-11-25T20:52:25.063
> 
> 标签：python, django, celery, django-celery

我尝试从命令行启动 Celery 工作服务器：

```
celery -A tasks worker --loglevel=info 
```

tasks.py 中的代码：

```
import os
os.environ[ 'DJANGO_SETTINGS_MODULE' ] = "proj.settings"

from celery import task

@task()
def add_photos_task( lad_id ):
... 
```

我得到下一个错误：

```
Traceback (most recent call last):
  File "/usr/local/bin/celery", line 8, in <module>
    load_entry_point('celery==3.0.12', 'console_scripts', 'celery')()
  File "/usr/local/lib/python2.7/site-packages/celery-3.0.12-py2.7.egg/celery/__main__.py", line 14, in main
    main()
  File "/usr/local/lib/python2.7/site-packages/celery-3.0.12-py2.7.egg/celery/bin/celery.py", line 946, in main
    cmd.execute_from_commandline(argv)
  File "/usr/local/lib/python2.7/site-packages/celery-3.0.12-py2.7.egg/celery/bin/celery.py", line 890, in execute_from_commandline
    super(CeleryCommand, self).execute_from_commandline(argv)))
  File "/usr/local/lib/python2.7/site-packages/celery-3.0.12-py2.7.egg/celery/bin/base.py", line 177, in execute_from_commandline
    argv = self.setup_app_from_commandline(argv)
  File "/usr/local/lib/python2.7/site-packages/celery-3.0.12-py2.7.egg/celery/bin/base.py", line 295, in setup_app_from_commandline
    self.app = self.find_app(app)
  File "/usr/local/lib/python2.7/site-packages/celery-3.0.12-py2.7.egg/celery/bin/base.py", line 313, in find_app
    return sym.celery
AttributeError: 'module' object has no attribute 'celery' 
```

有人知道为什么找不到“芹菜”属性吗？谢谢你的帮助。

操作系统是 Linux Debian 5。

**编辑**. 可能是线索。谁能解释我对函数的下一条评论（为什么我们必须确保它在当前目录中找到模块）？

```
# from celery/utils/imports.py
def import_from_cwd(module, imp=None, package=None):
    """Import module, but make sure it finds modules
    located in the current directory.

    Modules located in the current directory has
    precedence over modules located in `sys.path`.
    """
    if imp is None:
        imp = importlib.import_module
    with cwd_in_path():
        return imp(module, package=package) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-26T16:36:41.233

我忘了在 tasks.py 中创建一个 celery 对象：

```
from celery import Celery
from celery import task  

celery = Celery('tasks', broker='amqp://guest@localhost//') #!

import os

os.environ[ 'DJANGO_SETTINGS_MODULE' ] = "proj.settings"

@task()
def add_photos_task( lad_id ):
... 
```

之后我们就可以正常启动任务了：

```
celery -A tasks worker --loglevel=info 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-07-07T19:02:06.953

对于由于明显不同的原因而收到相同错误消息的任何人，请注意，如果您的初始化文件中的任何导入失败，您的应用程序将引发这个完全模棱两可`AttributeError`的问题，而不是最初导致它的异常。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-26T16:01:56.457

Celery 使用`celery`文件来存储你的应用程序的配置，你不能只给一个带有任务的 python 文件并启动 celery。您应该定义`celery`文件（对于 Celery>3.0；以前是`celeryconfig.py`）..

> celeryd --app app.celery -l 信息

这个例子如何使用配置文件启动 celery`app/celery.py`

这是芹菜文件的示例：[https ://github.com/Kami/libcloud-sandbox/blob/master/celeryconfig.py](https://github.com/Kami/libcloud-sandbox/blob/master/celeryconfig.py)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-21T13:45:09.233

我的问题是我将`celery`变量放在主函数中：

```
if __name__ == '__main__':  # Remove this row
    app = Flask(__name__)
    celery = make_celery(app) 
```

什么时候应该放在外面。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-26T10:23:44.703

当您运行时`celery -A tasks worker --loglevel=info`，您的 celery 应用程序应该在模块中公开`tasks`。它不应该包含在函数或`if`语句中。

如果您`make_celery`在另一个文件中，您应该将 celery 应用程序导入到您传递给 celery 的文件中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-24T07:47:01.927

尝试启动芹菜：

`celeryd --config=my_app.my_config --loglevel=INFO --purge -Q my_queue`

我的中有下一个脚本`tasks.py`：

```
@task(name="my_queue", routing_key="my_queue")
def add_photos_task( lad_id ): 
```

有下一个脚本`my_config.py`：

```
CELERY_IMPORTS = \
(
    "my_app.tasks",
)
CELERY_ROUTES = \
{
    "my_queue":
    {
        "queue": "my_queue"
    },
}
CELERY_QUEUES = \
{
    "my_queue":
    {
        "exchange": "my_app",
        "exchange_type": "direct",
        "binding_key": "my_queue"
    },
}
celery = Celery(broker='amqp://guest@localhost//') 
```

# eclipse - 为什么maven会导致依赖错误？

> ID：13555389
> 
> 赞同：0
> 
> 时间：2012-11-25T20:52:32.147
> 
> 标签：eclipse, maven, dependencies, m2eclipse, pom.xml

为什么文件中的某些 maven 依赖项`.pom`会导致以下错误：`Missing artifact nonfree-lingpipe:lingpipe:jar:2.3.1`？所有依赖项都列在 .pom 文件中。在 .m2 文件夹中，我有所有依赖文件夹，但不是所有 jar：所以对于`nonfree-lingpipe:lingpipe:jar:2.3.1`- 没有 jar，但我有一个`4.1.0`. 为什么maven没有那个，而是搜索的`2.3.1`？我没有在文件中看到任何版本`.pom`，只有名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:25:42.013

[dependencyManagement](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)中的定义仅定义了应该在哪个版本中使用它的工件，但并没有真正使用这个工件。此外，给定的示例：

```
<dependencies>
  <dependency>
    <groupId>nonfree-lingpipe</groupId>
    <artifactId>lingpipe:jar</artifactId>
    <version>2.3.1</version>
  </dependency>
</dependencies> 
```

是错误的，因为 artifactId 不应该包含冒号。正确的方法是：

```
<dependencies>
  <dependency>
    <groupId>nonfree-lingpipe</groupId>
    <artifactId>lingpipe</artifactId>
    <version>2.3.1</version>
  </dependency>
</dependencies> 
```

此外，您需要在 dependencyManagement 块之外定义此依赖项才能真正使用此依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:08:02.040

Maven 依赖项必须指定版本号。如果您看不到列出的一个，那么您的 POM 或其父项之一中必须有一个[依赖管理元素：](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)

```
<project>  
  ...
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>nonfree-lingpipe</groupId>
        <artifactId>lingpipe:jar</artifactId>
        <version>2.3.1</version>
      </dependency>
    </dependencies>
  </dependencyManagement>
  ...
</project> 
```

要对 4.1.0 进行更改，您必须在依赖项声明中明确指定版本，或者查找依赖项管理部分并在那里进行更改。

# android - BroadcastReceiver 从未调用过

> ID：13555390
> 
> 赞同：4
> 
> 时间：2012-11-25T20:52:34.693
> 
> 标签：android, bluetooth, broadcastreceiver

我正在尝试扫描蓝牙设备，但从未调用过寄存器：

```
 public class MainActivity extends Activity {

          ArrayList<String> arr_devices = new ArrayList<String>();
          ArrayList<String> arr_in_range = new ArrayList<String>();
          Button btn_devices;
          BluetoothAdapter bluetoothAdapter;
          IntentFilter filter;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

            btn_devices = (Button)findViewById(R.id.search);
            btn_devices.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {

                    BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter();
                    if (bluetooth != null)
                    {
                        if (bluetooth.isEnabled())
                        {
                            //this is called
                            bluetoothAdapter.startDiscovery();
                            Log.i("State", bluetoothAdapter.getState() + ""); //12 (STATE_ON)
                            Log.i("Discovery", bluetoothAdapter.isDiscovering() + "");  //FALSE

                            filter = new IntentFilter();
                            filter.addAction(BluetoothDevice.ACTION_FOUND);
                            filter.addAction(BluetoothAdapter.ACTION_DISCOVERY_STARTED);
                            filter.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);

                           registerReceiver(myreceiver, filter);
                           //this is where the program stops. No more actions are performed
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Bluetooth is not enabled!", Toast.LENGTH_SHORT).show();
                        }
                    }
                }
            });

        }

        @Override
        protected void onDestroy() {

            super.onDestroy();
            unregisterReceiver(myreceiver);
        }

        final BroadcastReceiver myreceiver = new BroadcastReceiver(){

        @Override
        public void onReceive(Context context, Intent intent) {
        //I placed a Log statement here but it doesn't appear in the logcat
           String action = intent.getAction();

           if (BluetoothAdapter.ACTION_DISCOVERY_STARTED.equals(action)) {
           }
           else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
           }

           if(BluetoothDevice.ACTION_FOUND.equals(action)) 
           {
               BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
               Log.i("device", device.getName() + "\n" + device.getAddress());
           }

         }};

    } 
```

蓝牙已启用。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:55:52.327

尝试将您的广播接收器放在之前

```
 bluetoothAdapter.startDiscovery(); 
```

因为你开始发现并在你收听广播监听器之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:03:32.523

为什么要设置两个蓝牙适配器？系统可能会混淆它们，你应该只需要一个。我建议您删除下面列出的行，并将所有引用从蓝牙更改为蓝牙适配器。

```
BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter(); 
```

我怀疑正在发生的事情是返回 null，因为您已经有了接收器的副本，或者类似的东西。

此外，请确保您已将权限添加到清单：

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

所有这些都失败了，您可以尝试重新启动手机。至少在我的手机上，蓝牙有时会坏掉。

# c++ - 自动初始化？

> ID：13555392
> 
> 赞同：4
> 
> 时间：2012-11-25T20:53:09.187
> 
> 标签：c++

我的课开始是：

```
class Player{
private:
    Cardpile hand;
    ...
} 
```

Cardpile 是另一个类。如果我这样做`Player *p=new Player();`手会自动初始化吗？我问这个是因为我一直在试图找出分段错误。我在我的代码中到处查看。我能想到的最后一件事`hand`是没有初始化。

编辑：这是我得到的分段错误。Card 是 Cardpile 内部的一个类。我知道 Card 和 Cardpile 都有效。

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000402ac0 in __gnu_cxx::new_allocator<Card*>::construct (this=0x6070a8, __p=0x4015c6, __val=@0x7fffffffe6d8) at /usr/include/c++/4.4/ext/new_allocator.h:105
105           { ::new((void *)__p) _Tp(__val); } 
```

编辑： Cardpile 类：

```
class Cardpile : private vector<Card*> {
    public:
    using vector<Card*>::size;
    using vector<Card*>::at;
    Cardpile ();
...
}
Cardpile::Cardpile(){} 
```

编辑：这是一个很酷的事实： p==NULL 不检查 p 是否已启动。我想这就是我不断收到分段错误的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:55:13.630

如果您没有`hand`在`Player`构造函数中显式地进行成员初始化，则将使用默认构造函数`Cardpile`。

如果您没有定义默认构造函数，编译器将创建一个。

当你编译和链接你的程序时`-g`，gdb 可以显示你的程序崩溃的堆栈跟踪：

```
gdb program core 
```

然后在 gdb 中输入`bt`. 这将显示分段错误时的完整调用堆栈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T20:55:36.063

这取决于是什么`Cardpile`。如果是 POD，则否：

```
class Cardpile1{
   int x;
}; 
```

如果不是，那么是的：

```
class Cardpile2{
   Cardpile2() : x(0) {}
   int x;
}; 
```

`hand`这两种情况都将存在，**但**`Cardpile`如果定义为 POD ，则从中读取是非法的。

```
class Player{
  public:
    Cardpile1 hand1;
    Cardpile2 hand2;
};

Player p;
p.hand1.x;   //illegal
p.hand2.x;   //legal 
```

# php - 用文本填充空间

> ID：13555393
> 
> 赞同：1
> 
> 时间：2012-11-25T20:53:11.853
> 
> 标签：php, javascript, jquery, html, css

我正在尝试调整文本大小，以便它可以填充一定的空间

例如：所以，假设我的 HTML 是这样的：

```
<h1 style="width:120px;">some text</h1> 
```

我想让“一些文本”这个词自动填充 120 像素，因为我知道“一些文本”可以是任何东西！我不在乎字体宽度是否被拉伸或是否在单词中添加了一些空格以使其适合 120px 宽度。

我知道在 CSS 中我们有`overflow:hidden;`，`overflow:scroll;`但是这两个对我没有任何帮助

`overflow:hidden;`将隐藏 120px 之外的任何额外字符 `overflow:scroll;`会产生我不想要的滚动！

任何解决方案？也许是一个 Jquery 插件或什么？我到处找，但我什么也找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:56:01.930

您可以使用这样的脚本使字体适应可用空间：

```
var fontSize = 100;
var reduce = function() {
    $('#txt').css('font-size', fontSize);
    $('#mes').html(fontSize);
    if ($('#txt').width()>MAX_MIDTH) {
       fontSize -= 1;
        reduce();
    }
};
reduce();
$('#width, #height').change(function(){fontSize = 100;reduce()}); 
```

[示范](http://jsfiddle.net/kPZ3E/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:54:46.700

使用对齐文本`text-align: justify`

# asp.net-mvc - WebSecurity.SignOut 之后 SimpleMembershipProvider 不会破坏会话

> ID：13555394
> 
> 赞同：5
> 
> 时间：2012-11-25T20:53:16.143
> 
> 标签：asp.net-mvc

我正在使用所有默认成员代码运行 ASP.NET MVC 4。AccountController 的 LogOff 代码是：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult LogOff()
    {
        WebSecurity.Logout();

        return RedirectToAction("Index", "Home");
    } 
```

我注意到这段代码不会破坏会话，这意味着如果我使用一个帐户登录，将某些内容保存到会话中，然后注销并在同一个 Web 浏览器实例中使用不同的帐户登录，我仍然可以看到前一个用户的会话。

不知道为什么会这样。任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T02:10:38.820

会话和身份验证会话不是一回事。

在这里，您破坏了用户的身份验证，但确实重新启动了 ASP.NET 会话。

更多解释：[https ://stackoverflow.com/a/1306932/971693](https://stackoverflow.com/a/1306932/971693)

尝试这样做：

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult LogOff()
{
    WebSecurity.Logout();

    Session.Abandon();

    // clear authentication cookie
    HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
    cookie1.Expires = DateTime.Now.AddYears(-1);
    Response.Cookies.Add(cookie1);

    // clear session cookie (not necessary for your current problem but i would recommend you do it anyway)
    HttpCookie cookie2 = new HttpCookie("ASP.NET_SessionId", "");
    cookie2.Expires = DateTime.Now.AddYears(-1);
    Response.Cookies.Add(cookie2);

    return RedirectToAction("Index", "Home");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T12:34:10.143

*这更像是答案的“为什么”部分。*

考虑一个购物车，例如亚马逊，它`'This is not me'`在屏幕顶部的用户名旁边有一个链接。

如果您在购物车中添加了一些东西，但`WebSecurity.Logout`要清除您的会话，那么您将丢失此会话数据。

# nltk - NLTK wordnet 相似度为形容词返回“无”

> ID：13555399
> 
> 赞同：6
> 
> 时间：2012-11-25T20:53:54.047
> 
> 标签：nltk, similarity, wordnet

我已经看到，对于动词，NLTK 中的 WordNet 相似性度量有时会返回“无”，但我知道这不应该发生在其他词性上。查看代码似乎很清楚，在任何其他词性中的两个单词对之间没有关系的地方应该产生-1，而不是“无”。然而我得到了这个结果：

```
>>> from nltk.corpus import wordnet as wn
>>> plodding1 = wn.synset('plodding.a.01')
>>> for sense in wn.synsets('unsteady','a'):
        print sense.name, sense.path_similarity(plodding1)

unsteady.a.01 None
unfirm.s.01 None 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T13:55:28.893

WordNet 中的形容词不是按层次排列的，因此最短路径不适用于形容词。副词也是如此。唯一适用于形容词和副词的度量是相关性度量，例如 lesk 度量。WordNet 中的动词被组织成层次结构，但其中有很多而且它们相当“短”，因此有时您无法找到动词之间的路径（因为它们可能属于不同的动词层次结构）。一般来说，您可以找到名词之间的最短路径，因为它们属于一个大的名词层次结构（至少从 WordNet 3.0 开始）。

我希望这有帮助。更多关于这些问题的讨论也可以在 WordNet::Similarity 列表中找到（它不是 NLTK 的一部分，而是进行此类测量的独立 Perl 包）。[http://wn-similarity.sourceforge.net](http://wn-similarity.sourceforge.net)

祝你好运，特德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:33:50.790

您正在比较的特定同义词似乎在其分类中没有“最短路径”。如果您将*“不稳定”的***所有**同义词集与*“plodding”*的所有同义词集进行比较，您确实会发现一些路径相似之处。

 **我尝试了更通用的：

```
from nltk.corpus import wordnet as wn
sy1 = wn.synsets('plodding')
sy2 = wn.synsets('unsteady')

for s in sy1:
    for t in sy2:
        print "%s\t %s\t :%s" % (s.name,t.name,wn.path_similarity(s,t)) 
```

我得到：

```
drudgery.n.01    unsteady.a.01   :None
drudgery.n.01    unfirm.s.01     :None
plodding.n.02    unsteady.a.01   :None
plodding.n.02    unfirm.s.01     :None
slog.v.02    unsteady.a.01   :0.2
slog.v.02    unfirm.s.01     :0.2
leaden.s.04  unsteady.a.01   :None
leaden.s.04  unfirm.s.01     :None 
```

希望有帮助。**

# visual-studio-2010 - 从我的 C# 应用程序中减少 SQL Server 事务日志文件的大小

> ID：13555400
> 
> 赞同：1
> 
> 时间：2012-11-25T20:54:09.373
> 
> 标签：visual-studio-2010, sql-server-2008-r2

我想减少我的 SQL Server 数据库事务日志文件的大小，但我想定期从我的 C# 应用程序中执行此操作。发布我的应用程序后不久，事务日志文件大小增加得太快。

为了解决这个问题，我想在我的应用程序中创建一个计划任务来减小 Visual Studio 2010 和 SQL Server 2008 R2 中日志文件的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:36:30.170

与其截断事务日志文件，不如将数据库设置为`SIMPLE`恢复。这将阻止日志文件增长：

```
ALTER DATABASE db SET RECOVERY SIMPLE 
```

# api - 此在云API

> ID：13555404
> 
> 赞同：0
> 
> 时间：2012-11-25T20:54:23.400
> 
> 标签：api, amazon-s3, amazon-ec2, amazon-web-services, cloud

有人在使用这个 API 吗？我正在尝试连接到 Amazon S3 和 EC2，按照[这里的这篇论文](http://ignum.dl.sourceforge.net/project/dasein-cloud/Dasein%20Cloud%20Overview.pdf)，但我被困在那条线上：

```
 CloudProvider provider = Class.forName(args[0]).newInstance(); 
```

不知道在 forName 函数中放置什么或如何实现或获取 CloudProvider 实例。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:37:59.403

它应该是这样的：

```
(CloudProvider) Class.forName("org.dasein.cloud.aws.AWSCloud").newInstance(); 
```

# xml - 从 XML 响应中获取所有页面信息

> ID：13555406
> 
> 赞同：0
> 
> 时间：2012-11-25T20:54:43.053
> 
> 标签：xml, api

当我向 API 发送带有分页信息所需参数的 XML 请求时，我发送的页码为 1（默认值为 1），页面大小为 10。如何请求所有页面信息并获得所有页面的响应，但不是第 1 页？

这是我发送的请求

```
 <?xml version='1.0' encoding='UTF-8'?><PrivateOptionsAPIRequest> 
     Other part of my XML Request
  <PaginationInformation><PageNumber>1</PageNumber><PageSize>10</PageSize></PaginationInformation></PrivateOptionsAPIRequest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:21:05.530

你可能做不到。

分页的重点是您不需要请求所有数据，因为它可能太多了。您准备好接收和处理 5GB 文件了吗？

如果某个 API 不允许您请求所有数据，您需要发送多个请求，每个页面一个。

确保您参考文档和/或联系您要连接的系统的所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:33:28.037

我会尝试将一些大数字放入 PageSize 元素中。类似的东西： `<PageNumber>1</PageNumber><PageSize>1000000</PageSize>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:25:50.583

0) 没有统一的答案。

1）一些API返回一个NEXT项或类似的，可以用来获取下一页结果，通常是可以GET的URL或可以POST的参数的形式。

2) 获取分页 API 的正确方法是使用以下命令发出请求：

`<PageNumber>1</PageNumber>`

`<PageNumber>2</PageNumber>`

等等，迭代页面的数量，这可能在 API 的某个地方。如果不是，请在它不再返回您的`PageSize`元素或元素的容器消失时停止。（如果项目的数量可以被整除`PageSize`并且请求结束后的页面返回第一个（有些这样做），则元素的数量可能会在某些 API 上失败。）

3) 增加页面大小不太可能起作用：大多数 API 将其设置为允许的最大值；如果你给它们提供太大的数字，一些写得不好的 API 就会崩溃。

# javascript - Ajax.Begin 表单和重新加载 PartialView

> ID：13555411
> 
> 赞同：0
> 
> 时间：2012-11-25T20:55:22.730
> 
> 标签：javascript, jquery, asp.net-mvc-3, ajax.beginform

我有一种情况，我使用 Ajax.BeginForm() 将一些数据（评论表单）发布到控制器方法。然后，此控制器方法使用实体框架将一些信息写入数据库（只要 ModelState 有效）。

作为表单的一部分，我使用 OnSucess 重载，在表单发布后执行 javascript 函数。这个函数，基本上调用了另一个控制器方法（它返回一个局部视图——在这种情况下是注释列表）。

我的问题是，新添加的注释不包含在控制器操作返回的视图中，尽管我知道它存在于数据库中。

这使我有两个可能的选择：

1.  htmlhelper 表单的 OnSucess() 函数在控制器方法实际返回之前执行。
2.  实体框架正在处理数据。

在 2 的情况下，我不知道实体框架曾经缓存数据，除非被明确告知这样做。所以我假设它是1。

因此，为了进一步调查，我修改了 OnSucess 方法和控制器操作。

我的表单定义如下：

```
@using (Ajax.BeginForm("CreateComment", "Home", new AjaxOptions { HttpMethod = "POST", OnSuccess = "something" })){

...

} 
```

我的控制器动作被定义为（为清楚起见省略了细节）：

```
public ActionResult CreateComment(CreateCommentViewModel comment)
        {
            if (ModelState.IsValid)
            {
                var context = new myDataContext();
                var newComment = new BlogComment
                                     {
                                         BlogID = comment.BlogID,
                                         CommentContent = comment.CommentContent,
                                         CommentDateCreated = DateTime.Now,
                                         CommentDeleted = false,
                                         CommentLive = true,
                                         CommenterEmail = comment.CommenterEmail,
                                         CommenterName = comment.CommenterName
                                     };
                var errorList = new List<string>();
                context.BlogComments.Add(newComment);
                try
                {
                    context.SaveChanges();
                }
                catch (DbEntityValidationException dbEx)
                {
                    errorList.AddRange(from validationErrors in dbEx.EntityValidationErrors from validationError in validationErrors.ValidationErrors select string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage));
                }
finally {
return Json(new { result = -2, message = "Error saving to database" }); // Not currently handled client side
}
                return Json(new { result = 0, message = "Sucess" });

            }else
            {
                var errorList = (from modelState in ViewData.ModelState.Values from error in modelState.Errors select error.ErrorMessage).ToList();
                string message = errorList.Aggregate(string.Empty, (current, errorMessage) => current + (errorMessage + ","));
                return Json(new { result = -1, message = message });
            }
        } 
```

最后，客户端方法定义为：

```
function something(data) {
        switch (data.result) {
            case 0:
                // Sucess
                // Get the Alert 

                var message = "<strong>Thank You</strong> Your comment has been posted.";
                var myAlert = jQuery("#donemessage");
                myAlert.html(message);
                reloadBlogComments();
                break;
            case -1:
                var errorMessages = data.message.split(',');
                var html = "<strong>The following errors were detected:</strong><br/>";
                var length = errorMessages.length, element = null;
                for (var i = 0; i < length; i++) {
                    element = errorMessages[i];
                    // Do something with element i.
                    html += element + "<br/>";
                }
                var myErrorAlert = jQuery("#failmessage");
                myErrorAlert.html(html);
                myErrorAlert.show(500).css("visibility", "visible");
                break;
            default:
                alert(data.message);
                break;
        }
} 
```

返回值为 0 时，调用函数 reloadBlogComments()。

但是以上的修改，证明了我上面提到的第一个假设（1）实际上是错误的。在控制器返回值之前无法执行成功函数。所以我完全不知道为什么新添加的评论没有与其他评论一起返回。

我的 reloadBlogComments() 函数定义如下：

```
function reloadBlogComments() {
            jQuery.ajax({
                // edit to add steve's suggestion.
                //url: "/ControllerName/ActionName",
                url: '@Url.Action("RenderBlogComments", "Home")',
                data: { 'BlogID': '@Model.BlogID' },
                success: function (newdata) {
                    jQuery("#upComments").empty().html(newdata);
                },
                statusCode: {
                    404: function (content) { alert('cannot find resource'); },
                    505: function (content) { alert('internal server error'); }
                },
                error: function (req, status, errorObj) {
                    // handle status === "timeout"
                    // handle other errors
                }
            });
            var myAlert = jQuery("#donemessage");
            var myErrorAlert = jQuery("#failmessage");
            myErrorAlert.hide(500).css("visibility", "hidden");
            myAlert.show(500).css("visibility", "visible");

            // Clear the form
            jQuery('#CommenterName').val('');
            jQuery('#CommenterEmail').val('');
            jQuery('#CommentContent').val('');
            window.location.hash = '#comments';
        } 
```

即使使用延迟调用 reloadBlogComments() `setTimeout(function () { reloadBlogComments(); }, 3000);`也无法获得一致的值。

我在哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:30:06.370

好的，问题很简单：

```
$.ajax({
 cache:false,
 ...
}); 
```

# windows - 桌面上的 Adob e AIR 应用程序安装

> ID：13555416
> 
> 赞同：0
> 
> 时间：2012-11-25T20:55:57.287
> 
> 标签：windows, macos, air

由于我经常在 Web 开发中使用 Adob​​e 产品，因此我对 Adob​​e AIR 功能非常感兴趣。我可以使用我目前的 html/CSS/JS 技能来构建本地桌面应用程序，这绝对是相当吸引人的。很多简单的事情我可以从中获得乐趣。

作为该领域的新手，我对安装程序如何与桌面环境一起工作知之甚少。我从来没有真正考虑过，因为我为浏览器编写代码。

据我了解，我需要在我的桌面上创建一个 AIR 文件（使用我在 Dreamweaver 中找到的 AIR 应用程序和安装程序设置。创建 AIR 文件后，我将其命名为**myFirstProgram.air**，我所要做的就是双重点击它，出现一个漂亮的安装程序，让我完成安装。有趣！

所以这是我的问题。我猜我的桌面上有一些东西可以让我安装**myFirstProgram.air** **，**而其他桌面（我的父母、朋友、客户）可能没有。

在更加关注我如何创建 AIR 文件之后，我从 Dreamweaver 中看到了以下信息（在创建 AIR 文件之后）：

> 手术成功。AIR 文件已放置在：“Z:\Adobe\myFirstProgram.air”中。
> 
> 为了在您的机器上安装此应用程序，您需要 Adob​​e AIR 运行时，可从以下网址下载：http: [//www.adobe.com/go/air](http://www.adobe.com/go/air)

好的，我知道这一切都有一些严肃的常识，但我要问新手关于这个的问题。

如果我想在另一个 Windows 或 Mac 桌面上安装我有趣的小程序，我是否需要先确保它已经安装了 Adob​​e AIR 运行时（在他们的机器上）？（有点像程序需要先安装Java，然后才能完成安装？）

此外，我对文件扩展名的有限知识在这里发挥了作用。myFirstProgram.air 似乎应该是一个**.exe**，而对于 OSX 来说，一个**.dmg** 再次，我对此很陌生，所以在问一些看似常识的问题之前，我会尽可能多地阅读。

我唯一的推论是扩展并不重要，只要有另一个程序理解它，以及如何使用它的胆量 - 与操作系统相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:58:59.100

安装 Air 应用程序需要 Adob​​e Air 运行时。它们不使用 .exe 或 .dmg 扩展名，因为它们不是本机安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:35:30.693

现在可以捆绑 Air 运行时，因此用户不必安装它。这在使用 Flash Builder 时非常容易。您可以在此处找到更多信息：http: [//help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html)

# vb.net - 失去焦点后NotifyIcon不会消失

> ID：13555417
> 
> 赞同：1
> 
> 时间：2012-11-25T20:55:58.310
> 
> 标签：vb.net, vb.net-2010

我有一个带有 NotifyIcon 的表单。该表单默认隐藏，但 NotifyIcon 在系统托盘中可见。我的问题/问题是，当我单击图标然后单击 NotifyIcon 的 ContextMenuStrip 元素时不会消失。我尝试了 LostFocus 事件，但如果我在应用程序外部单击它不会触发。

这个问题有什么解决办法吗？感谢您提前回答！

我使用的代码：

```
Private Sub NotifyIcon1_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles NotifyIcon1.MouseClick
    If e.Button = MouseButtons.Right Then
        ContextMenuStrip1.Show(Cursor.Position)
    End If
End Sub

Private Sub History_LostFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.LostFocus, ContextMenuStrip1.LostFocus
    ContextMenuStrip1.Hide()
End Sub 
```

# php - 将 php 数组呈现为 javascript 数组或对象以允许循环

> ID：13555419
> 
> 赞同：-1
> 
> 时间：2012-11-25T20:56:05.877
> 
> 标签：php, javascript, arrays

我在 php 中有一个二维数组，我需要将其表示为 javascript 变量或对象。我已经研究过 json 对其进行编码和解码以用作 javascript 对象，这没有意义，因为我想循环通过我的 javascript 转换。将 php 数组表示为 javascript 二维数组也没有任何意义，因为 javascript 中的多维数组非常复杂。做这样的事情的标准方法是什么？正如我所说，我需要能够遍历结果。PHP 数组在第一个维度中包含一个数字，在第二个维度中包含一个页面名称。我正在尝试找到一种有效的方法来将 ID 分配给与每个页面名称关联的复选框。如果复选框已被选中，我希望能够遍历一个 javascript 变量并检查每个 id。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:01:13.833

JSON 是执行此操作的完美方式。*Javascript Object Notation*是简单的 Javascript 语法，用于表达任意值、对象或其他。它们非常适合将 PHP 值传输到 Javascript：

```
<?php $arr = array('foo', 'bar', 'baz', 42); ?>
<script type="text/javascript">
    var arr = <?php echo json_encode($arr); ?>;
</script> 
```

这相当于您输入：

```
<script type="text/javascript">
    var arr = ["foo", "bar", "baz", 42];
</script> 
```

`json_encode`为您提供了一个完美的 Javascript 数组，您可以通过它循环或执行您通常使用 Javascript 数组执行的任何操作。您只需要构建所需的数组/对象/值。

您可能需要注意的是，连续数字索引的数组会生成 JSON 数组，但其他任何内容都会生成 JSON 对象。例如：

```
array('foo', 'bar')              -> ["foo", "bar"]
array(0 => 'foo', 1 => 'bar')    -> ["foo", "bar"]
array(1 => 'foo', 0 => 'bar')    -> { "1" : "foo", "0" : "bar" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:12:30.500

您必须使用[`for..in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环来遍历对象属性。例如：

```
var obj = {
    "foo" : "bar",
    "baz" : [10, 20, 30]
};

for(var key in obj) {
    console.log(key); // current key
    console.log(obj[key]); // current value
} 
```

# macos - NSTableView 无法更新可视化数据

> ID：13555423
> 
> 赞同：0
> 
> 时间：2012-11-25T20:56:20.323
> 
> 标签：macos, cocoa, nstableview, updating

我知道这是一个典型的问题，我发现很多线程都在谈论这个，但我无法真正理解我的实现问题出在哪里。我设置了所有内容，并且能够看到加载到我的 NSTableView 内的 NSMutableArray 中的数据。问题是改变这些数据。我要做的是：

```
-(void) setData:(NSMutableArray*)data{
  for (int i=0; i<[data count]; i++){
      [list addObject:[data objectAtIndex:i]];
  }
  [self reloadData];
} 
```

我设置了一些调试日志以查看该方法是否

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
```

在 [self reloadData] 之后被调用（如我所料），但事实并非如此。

需要明确的是，“setData”被放置在 TableViewController 中，它扩展了 NSTableView 并实现了 NSTableViewDataSource。所以“self”应该是正确的，因为指的是界面上显示的实际 NSTableView。

**编辑**

这是 TableViewController.m 的代码：

```
#import "TableViewController.h"
#import "Transaction.h"

@implementation TableViewController

- (id) init
{
    self = [super init];
    if (self){
        list = [self loadData];
        //list = [[NSMutableArray alloc]init];
    }
    NSLog(@"init");

    return self;
}

-(void) setData:(NSMutableArray*)data{
    NSLog(@"setData");
    [list removeAllObjects];
    for (int i=0; i<[data count]; i++){
        [list addObject:[data objectAtIndex:i]];
    }
    [self reloadData];
}

-(void)reloadData{
    NSLog(@"reloadData. List: %ld",[list count]);
    [super reloadData];
}

- (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView{
    return [list count];
}

- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
    NSLog(@"tableView");
    Transaction *t = [list objectAtIndex:row];

    if ([[tableColumn identifier] isEqualToString:@"date"]){
        [[tableColumn headerCell] setTitle:@"Date"];
        return [t date];
    }
    if ([[tableColumn identifier] isEqualToString:@"type"]){
        [[tableColumn headerCell] setTitle:@"Type"];
        return [t type];
    }
    if ([[tableColumn identifier] isEqualToString:@"category"]){
        [[tableColumn headerCell] setTitle:@"Category"];
        return [t category];
    }
    if ([[tableColumn identifier] isEqualToString:@"amount"]){
        [[tableColumn headerCell] setTitle:@"Amount"];
        return [NSString stringWithFormat:@"%f",[t amount]];
    }

    return @"//";
}

-(NSMutableArray *)loadData{
    LoadSave* ls = [LoadSave alloc];
    NSMutableArray* array = [[ls loadDataFromDisk] wallet];
    for (Transaction* t in array){
        //NSLog([t toString]);
    }
    // Load 1 row just to see if I can update the table later with more data
    Transaction *t = [array objectAtIndex:1];
    NSMutableArray * test = [NSMutableArray arrayWithObject:t];
    return test;
} 
```

@结尾

标题：

```
#import <Foundation/Foundation.h>
#import "Wallet.h"
#import "LoadSave.h"

@interface TableViewController : NSTableView <NSTableViewDataSource,NSTableViewDelegate> {
    NSMutableArray *list;
}

-(void) setData:(NSMutableArray*)data;
-(IBAction)test:(id)sender;
- (id) initWithData:(NSMutableArray*)data;
@end 
```

这是目前我的 AppDelegate：

```
#import "AppDelegate.h"
#import "Transaction.h"
#import "TableViewController.h"

@implementation AppDelegate

@synthesize tableView;
@synthesize window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    LoadSave* ls = [LoadSave alloc];
    Wallet *wallet = [ls loadDataFromDisk];
    tableView = [[TableViewController alloc]init];
    [tableView setData: wallet.wallet ];    
}

-(IBAction)test:(id)sender{
    LoadSave* ls = [LoadSave alloc];
    Wallet *wallet = [ls loadDataFromDisk];
    [tableView setData: wallet.wallet ];
}

@end 
```

如您所见，我尝试在应用程序完成启动时和界面上的按钮加载新数据。但什么也没有发生。

**编辑2：**

这是 AppDelegate 的标题，您可以看到 tableView 是我的控制器类的一个实例：

```
#import <Cocoa/Cocoa.h>
#import "TableViewController.h"
#import "LoadSave.h"

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property IBOutlet TableViewController *tableView;

-(IBAction)test:(id)sender;

@end 
```

这是 SaveLoad.m 这正是我将用来从任何文件保存、加载和导入数据的内容：

```
#import "LoadSave.h"

@implementation LoadSave

NSString *const PATH = @"file.csv";

- (NSString *) pathForDataFile
{
    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSString *folder = @".";
    folder = [folder stringByExpandingTildeInPath];

    if ([fileManager fileExistsAtPath:folder] == NO)
    {
        [fileManager createDirectoryAtPath:folder withIntermediateDirectories:NO attributes:nil error:nil];
    }

    NSString *fileName = @"wallet.data";
    return [folder stringByAppendingPathComponent: fileName];
}

- (void)saveDataToDisk:(id)wallet
{
    NSString * path = [self pathForDataFile];

    NSMutableDictionary *rootObject;
    rootObject = [NSMutableDictionary dictionary];

    [rootObject setValue:wallet forKey:@"wallet"];
    [NSKeyedArchiver archiveRootObject:rootObject toFile: path];
}

-(Wallet*)loadDataFromDisk
{
    NSDictionary* root = [NSKeyedUnarchiver unarchiveObjectWithFile:[self pathForDataFile]];
    return [root valueForKey:@"wallet"];
}

-(NSMutableArray*) importDataFromCSV
{
    NSString* contents = [NSString stringWithContentsOfFile:PATH
                                                   encoding:NSUTF8StringEncoding
                                                      error:nil];
    NSArray* lines = [contents componentsSeparatedByString:@"\n"];
    NSRange range;
    range.location = 1;
    range.length = [lines count]-1;
    lines = [lines subarrayWithRange:range];

    NSMutableArray *data = [[NSMutableArray alloc] init];
    for (NSString* line in lines)
    {
        NSArray* fields = [line componentsSeparatedByString:@","];
        Transaction *t = [[Transaction alloc] init:fields[0] transactionType:fields[1] transactionCategory:fields[3] transactionAmount:fields[6]];
        [data addObject:t];
    }
    //    wallet* wallet = [Wallet alloc];
    //    wallet.wallet = data;
    //    LoadSave *ls = [LoadSave alloc];
    //    [ls saveDataToDisk:wallet];
    return data;
}

@end 
```

我猜想没有 init 的 alloc 仍然可以工作，因为我使用的方法就像它们是静态的一样，但是到目前为止我还没有搜索如何使它们成为静态的，所以我现在就这样离开了它们。

与其描述界面，我认为发布它的图片会更容易..

![屏幕](../Images/e92b2c8ef8462973fde40b947f592889.png)

不过在这一点上..我可以在这里发布整个项目xD

# java - 具有相同名称的线程

> ID：13555424
> 
> 赞同：5
> 
> 时间：2012-11-25T20:56:22.013
> 
> 标签：java, multithreading

`threads`我在 Java 线程模型 API 中读过一件事。它表示多个线程可以具有相同的名称。但是每个线程的PID都是唯一的，对吧？那叫什么名字呢？是不是线程类名？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T20:57:37.633

> 那叫什么名字呢？不是线程类名吗？

名称是您设置它使用的任何名称[`Thread.setName`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setName%28java.lang.String%29)。这只是为了诊断的目的。如果您不调用`Thread.setName`或向构造函数提供名称，则将根据文档确定该值：

> 分配一个新的 Thread 对象。此构造函数与 具有相同的效果`Thread (null, null, gname)`，其中 gname 是新生成的名称。自动生成的名称格式为`"Thread-"+n`，其中 n 是整数。

（显然，给出一个指示其用途的特定线程名称在诊断上更有用。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-25T20:58:58.093

创建新线程时，会为其分配一个自动生成的名称，其格式为 - `"Thread-0"`, `"Thread-1"`。

但是，您可以随时使用以下[`Thread#setName()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setName%28java.lang.String%29)方法更改线程的名称：-

```
Thread.currentThread().setName("ABC"); 
```

`Thread.currentThread()`返回对当前执行线程的引用，然后将该线程的名称设置为`"ABC"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:57:45.313

不，这是一个线程名称，如果你看到一个线程转储，你就会知道哪个线程在做什么。:)

# windows-8 - Windows 8 Metro 按钮颜色在翻转时更改

> ID：13555426
> 
> 赞同：1
> 
> 时间：2012-11-25T20:56:24.233
> 
> 标签：windows-8, microsoft-metro

我正在构建一个 Metro 应用程序。我已将背景颜色设置为黑色，将前景设置为白色。当我构建、测试和翻转按钮时，它的颜色变为白色。这不适用于我的配色方案。

如何防止按钮在翻转时改变颜色？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:28:00.127

你知道你需要为单个按钮（或应用程序中的按钮子集）做什么。但是，如果您想对应用程序中的所有按钮执行此操作，则可以在 app.xaml 中覆盖：

```
 <ResourceDictionary.ThemeDictionaries>
        <!-- When not in high contrast mode, use a colorful look. 
                                Note that this is defining an implicit style that is scoped to this StackPanel. -->

        <ResourceDictionary x:Key="Default">
            <Thickness x:Key="ButtonBorderThemeThickness">2</Thickness>
            <SolidColorBrush x:Key="ButtonForegroundThemeBrush" Color="#FFFFFFFF" />
            <SolidColorBrush x:Key="ButtonBackgroundThemeBrush" Color="#FF0088B4" />
            <SolidColorBrush x:Key="ButtonPointerOverForegroundThemeBrush" Color="#FF0088B4" />
            <SolidColorBrush x:Key="ButtonPointerOverBackgroundThemeBrush" Color="#FF7ED1EC" />
            <SolidColorBrush x:Key="ButtonPressedForegroundThemeBrush" Color="#FF0088B4" />
            <SolidColorBrush x:Key="ButtonPressedBackgroundThemeBrush" Color="#FFFFFFFF" />
            <SolidColorBrush x:Key="ButtonBorderThemeBrush" Color="#FF0088B4" />
            </ResourceDictionary>
        </ResourceDictionary.ThemeDictionaries> 
```

# android - 有没有办法让 HTML 页面显示在支持 Android 上多种语言的 WebView 上？

> ID：13555429
> 
> 赞同：1
> 
> 时间：2012-11-25T20:57:12.930
> 
> 标签：android, html, webview, internationalization

我想创建一个显示页面 HTML 的应用程序（内容由我创建或从 Internet 研究），是否可以将我的页面内容国际化？我需要在 /res/assets 上为每种语言创建一个页面 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:28:20.243

您的问题不清楚...您想要一个可翻译的应用程序？

您可以使用：

```
 String locale = context.getResources().getConfiguration().locale.getCountry(); 
```

获取国家代码，然后直接访问主要语言的相应网页。

# php - php - 使用 git 命令不起作用？

> ID：13555435
> 
> 赞同：-8
> 
> 时间：2012-11-25T20:57:47.780
> 
> 标签：php, git, api, soundcloud

我正在尝试使用 soundcloud api 并验证我的帐户，该站点[https://github.com/mptre/php-soundcloud/wiki/Oauth-2](https://github.com/mptre/php-soundcloud/wiki/Oauth-2)解释了使用来自 github 的 git 命令下载存储库。我曾尝试手动下载文件，但其中有错误。这个命令似乎什么也没做 : `$ git clone git://github.com/mptre/php-soundcloud.git`，实际上它给了我一个错误。

完整代码：

```
 <?
$ git clone git://github.com/mptre/php-soundcloud.git

$soundcloud = new Services_Soundcloud('somekey', 'someotherkey', 'wonderfulworldofchris.com/soundcloud');

$authorizeUrl = $soundcloud->getAuthorizeUrl();

?>

<a href="<?php echo $authorizeUrl; ?>">Connect with SoundCloud</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:00:50.323

要下载存储库，您需要安装 git - [http://git-scm.com/](http://git-scm.com/)

之后，从命令行获取代码就像`git clone git://github.com/mptre/php-soundcloud.git`. 但是，这应该在命令行中完成，而不是在 php 代码中。

也可以将 repo 下载为 zip 文件：[https ://github.com/mptre/php-soundcloud/archive/master.zip](https://github.com/mptre/php-soundcloud/archive/master.zip)

下载此项目后，您需要在应用程序中包含“Services_Soundcloud”。那么你应该能够做到

```
<?
$soundcloud = new Services_Soundcloud('somekey', 'someotherkey', 'wonderfulworldofchris.com/soundcloud');
$authorizeUrl = $soundcloud->getAuthorizeUrl();
?> 
```

# javascript - 向 div 元素添加随机排版

> ID：13555437
> 
> 赞同：0
> 
> 时间：2012-11-25T20:57:49.950
> 
> 标签：javascript, arrays, random

我有以下代码，它随机化数组中的文本。

但是我不确定如何执行以下操作。

1.  在浏览器加载而不是 onclick 时显示结果。
2.  在加载时将输出显示到 div 类（因此，如果我有多个称为“输出”的 div，则每个 div 中将显示随机字体/大小/粗细）
3.  它应该从每个 div 元素中获取字体并更改类等，而不是使用字体名称等。
4.  我如何将每个变量指向一个类，而不是使用数组中的字体名称？.font1 {font-family:Verdana, Geneva, sans-serif;} .font2 {font-family:Georgia, "Times New Roman", Times, serif;} .font3 {font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;} .font4 {font-family:"Times New Roman", Times, serif;} .font5 {font-family:"Comic Sans MS", cursive;} var fonts = ['.font1', '.font2', '.font3', '.font4', '.font5'];

真的希望有人可以提供帮助。

代码如下；

```
<button onclick="run()">Test</button>
<div id="output"/>

var fonts = ['Arial', 'Helvetica', 'Georgia', 'Tahoma', 'Verdana'];
var weights = ['normal', 'bold', 'lighter'];
var sizes = ['16px', '20px', '24px', '36px', '40px'];

var choose = function(arr) {
return arr[Math.floor(Math.random() * arr.length)];
};
var output = document.getElementById("output");

window.run = function() {
var text = choose(sizes) + ' ' + choose(weights) + ' '  +  choose(fonts);
output.innerHTML = '<div class="randomFont" style="font: ' + text + '">' + text +      '</div>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:07:22.333

1.  您可以将事件侦听器附加到窗口`load`事件：

    ```
    window.addEventListener('load', run, false); 
    ```

    更好的是，如果您的目标浏览器支持它，您可以使用`DOMContentLoaded`，它不会等待图像、样式表和其他不太重要的资源加载：

    ```
    document.addEventListener('DOMContentLoaded', run, false); 
    ```

    您甚至可以使用两者的组合：附加到两者，并且`run`仅在尚未完成时才执行。

2.  `class`您可以使用给定的using找到所有元素[`document.getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)。然后，您可以遍历返回的集合并为每个集合指定一个随机字体。

3.  （和 4。）而不是构造一些 HTML 和 CSS 字符串，您可以使用`style`属性来代替权重和大小。例如：

    ```
    element.style.fontWeight = 'bold'; 
    ```

    对于字体系列，选择一个类并附加一个空格，然后将其添加到元素的`className`属性中：

    ```
    element.className += ' ' + fontFamilyClass; 
    ```

# [试试看。](http://jsfiddle.net/xG3VY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:08:21.770

您正在将样式构建为速记，但是您指定它们的顺序是错误的，大小应该在家庭之前。正确的方法是`<div style=bold 16px Verdana></div>`

这是一个工作示例：

[http://jsfiddle.net/7egCK/2/](http://jsfiddle.net/7egCK/2/)

如果您希望在加载时发生这种情况，只需在 Body 的 onLoad 事件中执行您的 html 渲染函数

```
<body onLoad="run()"> 
```

# java - 蚂蚁大战僵尸游戏

> ID：13555438
> 
> 赞同：2
> 
> 时间：2012-11-25T20:58:05.690
> 
> 标签：java, variables, methods, project

我正在开发一款带有僵尸和蚂蚁的无 GUI 塔防游戏。我的问题是其中一只蚂蚁。它应该将对其造成的伤害的一半（向下取整）反射回僵尸。这是我的蚂蚁代码和僵尸样本。

```
package proj4;

public class ThiefAnt extends Ant {

    private int taken;

    public ThiefAnt(){
        super(15, 25, "Thief Ant");
    }

    public void takeDamage(int amount, Zombie z){
        setLife(amount, z);
        taken = amount / 2;
    }

    public void attack(Game g){
        Zombie z = g.getHorde().elementAt(0);
        z.takeDamage(taken);
    }
}

package proj4;

public class GiantZombie extends Zombie implements Gigantic {

    public GiantZombie() {
        super(40, 20, "Giant Zombie");
    }

    public void attack(Game g) {
        Ant a = g.getColony().elementAt(0);
        a.takeDamage(35, this);
    }
} 
```

我的问题是所采用的变量。因为它`setLife`的参数数量工作正常，蚂蚁根据数量受到伤害。但是对于采取的变量，将其设置`amount`为什么都不做，它只包含 0。谁能告诉我我的代码有什么问题？谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:04:11.743

这样的实现不会更好地反映损害：

```
public void takeDamage(int amount, Zombie z){
    setLife(amount, z);
    z.takeDamage(amount / 2);
} 
```

# java - Java中的PriorityQueue构造函数

> ID：13555439
> 
> 赞同：3
> 
> 时间：2012-11-25T20:58:16.073
> 
> 标签：java, queue, priority-queue

给定示例代码：

```
Comparator<Node> comparator = this.createCompartor(algorithmChoice , matrix);

this.m_openList1 = new PriorityQueue<Node>(100, comparator); 
```

`100`构造函数中的代表什么`PriorityQueue`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:59:25.847

是初始容量`PriorityQueue`。如果您事先知道要添加多少项目（或有一个近似值），您通常会明确指定初始容量。

这也可以在[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/PriorityQueue.html#PriorityQueue%28int,%20java.util.Comparator%29)中看到：

> `public PriorityQueue(int initialCapacity, Comparator<? super E> comparator)`
> 
> 创建一个具有指定初始容量的 PriorityQueue，它根据指定的比较器对其元素进行排序。
> 
> **参数：**
> - `initialCapacity`- 此优先级队列的初始容量。
> - `comparator`- 用于排序此优先级队列的比较器。如果为 null，则顺序取决于元素的自然顺序。
> 
> **抛出：**
> - `IllegalArgumentException`- 如果`initialCapacity`小于 1

事实上，Java 中的大多数集合都有构造函数，它们接受一个 int 参数来指定初始容量。

# c - 编写一个 C 函数 sprod (n,x,y)，它返回 2 个浮点类型的一维数组的标量积

> ID：13555442
> 
> 赞同：1
> 
> 时间：2012-11-25T20:58:47.697
> 
> 标签：c, math

编写一个 C 函数，sprod (n,x,y)，它返回 2 个浮点类型的一维数组的标量积。该函数将数组的大小 n（类型 int 变量）和指向每个数组第一个成员的指针 x 和 y 作为输入变量，并返回一个浮点结果。main() 代码块需要调用 sprod 来计算矩阵乘积 a*b，其中浮点型矩阵 a 和浮点型向量 b 由 b=[1 1 1] 和 a=[1 2 3 4 5 6 7 8 给出9]（其中 a 是一个 3x3 矩阵）。

我们可以在 af(;;) 循环中初始化 b，在双 for(;;) 循环中初始化 a（或使用大量赋值语句）。矩阵积应该通过调用函数 sprod 来计算，以形成 a 的每一行与向量 b 的标量积；指向这些行的指针由 a[1]、a[2] 和 a[3] 给出。最后，还应该使用一个 for(;;) 循环来对结果标量产品求和，并使用 printf() 函数将结果打印到屏幕上。

结果应该是矩阵 a 的所有元素的总和。还应打印矩阵 a 和向量 b 的副本。我们将使用数字食谱 C 函数 matrix() 和 vector() 以及 free_matrix() 和 free_vector() 来创建 a 和 b 作为动态定义的数组。

在编程方面，我是一个初学者，我发现我真的很烂。这是我到目前为止所拥有的，当它被编译时它像疯了一样炸毁（我知道有些东西被遗漏了）。我尝试使用 gdb 来调试它，但我也无法让它工作。任何帮助，将不胜感激。

```
# include <stdio.h>
# include "nrutil.h"
# include "nrutil.c"

void transp(float **a,int n);
float sprod(int n, float *x, float *y);
int main()
{
  int i,j;
  float var=0.0, sum=0.0, pro=0.0;
  float*b, **a;
  int n=3;
  float index;
  b=vector(0,n-1);
  a=matrix(0,n-1,0,n-1);

  printf("\nVector b\n");
  for(j=0;j<n;j++)
  {
    b[j]=1;
    printf("%.2f\n",b[j]);
  }
  for(i=0;i<n;i++)
  {
    for(j=0;j<n;j++);
    {
      var=var+1;
      a[i][j]=var;
    }
  }
  printf("\n Matrix a\n");
  for(i=0;i<n;i++);
  {
    for(j=0;j<n;j++);
    {
      printf("%.2lf",a[i][j]);
    }
    printf("\n");
  }
  printf("\nProduct of Matrix a and Vector b\n");

  for(i=0;i<n;i++);
  {
    pro=sprod(n,a[i],b);
    printf("%.2f\n",pro);
    sum+=pro;
  }
  printf("\n Sum of Product array\n");
  printf("%.2f\n\n", sum);
  free_ivector(index,0,n-1);
  free_matrix(a,0,n-1,0,n-1);

  return 0;
}

float sprod(int n, float *x, float *y)
{
  float scalar=0.0;
  int j=0;
  int sum=0;

  for(j=0;j<n;j++);
  {
    scalar+=x[j]*y[j];
  }
  return scalar;
 } 
```

自从最初发布此代码以来，我已经改进了我的代码。现在它几乎可以工作了，我只是遇到了第 50 行 free_ivector 代码的问题。终端告诉我：“free_ivector”的参数 1 的类型不兼容。我不太确定那是什么意思。该代码采用大卫邓肯在下面第一个答案中建议的整体格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:18:50.680

对于那些对编程甚至只是 C 感到不舒服的人来说，这是一个有点困难的问题，因为它涉及指针和传递数组引用。不过，我认为您知道的足够多，可以查找所需的每个特定项目的示例，因此您的第一个目标（您可能知道）是将事情分解为子问题并单独解决它们（如果需要，还可以迭代） . 由于您当前的代码可以在布局方面使用一些帮助，因此我已将问题陈述改编为您可以逐个处理的内容。用执行此操作的代码替换每个“TODO”注释，我相信你会完成的。

```
#include <stdio.h>
#include "nrutil.h"

float sprod(int n, float *x, float *y)
{
    float result = 0.0;
    // TODO: Calculate result (hint: for loop repeating n times,
    // and each iteration you'll update result)

    return result;
}

int main()
{
    // TODO: Create and initialize matrix A
    // TODO: Create and initialize matrix B
    // TODO: Print A and B
    // TODO: For each row of A, call sprod() with that row of A
    // and B as inputs, and save each sprod() result
    // TODO: Sum the results
    // TODO: Print the sum

    return 0; // (0 indicates success; if you were to have
              //  failure cases, you could return other values)
} 
```

使用上述方法也将有助于在进行时进行编译（因此，能够使用调试器）。使用 GDB 的绝对最低要求如下：

*   使用 GCC -g 开关编译——即，`gcc -g myprog.c`
*   `gdb <program name>`（默认情况下，程序名称通常为 a.exe 或 a.out）
*   `break <line number>`设置断点
*   `run`启动程序
*   `n`对于下一个语句
*   `quit`退出

此外，如果它是由老师提供的，我认为原始问题陈述中还有几件事有点令人困惑（如果这只是你的释义，我在吹毛求疵）：

*   for(;;) 会导致无限循环，除非在其中使用 goto 语句（非常不典型）或 break 语句（有些不典型），这两种语句都不适合。所以说“for循环”会更有意义。
*   为了清楚起见，C 具有从零开始的索引，这意味着除非 matrix() 明确定义它，否则您的行将是 a[0]、a[1] 和 a[2]（不是 a[1]、a [2] 和 [3])。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:05:45.387

给出一个想法：

```
#include <stdio.h>
#include <math.h>
#define ROW 3
#define MAT 9

float printinv( int n, float * a, float * b );

int main ( void ){
    int i, k;
    float a[ ROW ] = { 1, 2, 3 };
    float b[ MAT ] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
    float *c;
    c = &b[0];

    printf( "A = " );
    for( i = 0; i < ROW; i++ ){
        if( i == 0 )
            printf( "[" );
        if ( i != ROW - 1 )
            printf( "  %5.2f", a[ i ] );
        else {
            printf( "  %5.2f", a[ i ] );
            printf( "  ]" );
        }
    }

    printf( "    B = " );
    for( i = k = 0; k < MAT; k++ ){
        if( i == 0 && k == 0) 
            printf("[");
        else if( i == 0 && k > 0 )
            printf( "                                     [");
        if( i != ROW - 1 ){
            printf( "  %5.2f", b[ k ] );
            i++;
        }
        else{
            printf( "  %5.2f", b[ k ] );
            printf( "  ]\n" );
            i = 0;
        }
    }

    printf( "C = " );
    for( i = 0; i < ROW; i++ ){
        if( i == 0 ) 
            printf("[");
        if( i != ROW - 1 )
            printf( "  %5.2f", printinv( MAT, ( c + i ), a ) );
        else{
            printf( "  %5.2f", printinv( MAT, ( c + i ), a ) );
            printf( "  ]\n" );
        }
    }
    getchar();

}

float printinv( int n, float * b, float * a )
{
    int i, k;
    float result;
    float x, y;

    for( result = i = 0; i < ROW; i++ ){
        k = i * ROW;
        result += b[ k ] * a[ i ];
        x = b[ k ]; 
        y = a[ i ];
    }
    return result;
} 
```

输出：

![输出](../Images/c7012d4ba00a3f59888fd5682169ce11.png)

# javascript - 为单页应用程序 (SPA) 编译 HTML 片段？

> ID：13555444
> 
> 赞同：2
> 
> 时间：2012-11-25T20:58:57.517
> 
> 标签：javascript, html, asp.net-mvc, asp.net-web-api, single-page-application

Javascript 单页应用程序 (SPA) 使使用简单技术创建强大的 Web 应用程序成为可能。随着 SPA 变得越来越大，您似乎需要一种方法来分离多个 html（和 javascript 和 css）文件中的内容，以保持事情的可管理性和可维护性。

所有关于如何制作这样一个更大的应用程序的示例似乎都使用了单独的模板机制，例如 JSP 或 Asp.net MVC，将 html 片段组合成一个提供给客户端的 html 页面。对我来说，这对于 SPA 来说似乎有点矫枉过正，所以这让我想到了一个问题：

*是否有允许我将 html 片段编译成 html 文件的框架或工具（集），我可以将其部署到静态 Web 服务器，而无需像 IIS 或 Tomcat 这样的动态服务器？*

这里的假设是有一个可供 SPA 对话的 Web (REST) API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:07:38.977

你看过这些类型的框架/库吗？

*   [骨干](http://backbonejs.org/)
*   [渲染](https://github.com/BorisMoore/jsrender)
*   [淘汰赛](http://knockoutjs.com/)

仅列举我知道的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:43:07.903

您应该查看[http://boilerplatejs.org/](http://boilerplatejs.org/) - 它实现了 MVVM 模式并利用 RequireJS 及其文本插件来巧妙地分解您的视图、样式和视图模型。

我在 Asp.Net MVC 4 解决方案中使用它。[Durandal](http://durandaljs.com/)是另一种选择，事实上 John Papa 最近推出了一个名为[Hot Towel](https://github.com/johnpapa/HotTowel)的 Visual Studio 模板。这也是另一种选择。

# cuda - 使用 CUDA 的矩阵乘法（线程如何编号）

> ID：13555446
> 
> 赞同：0
> 
> 时间：2012-11-25T20:59:11.837
> 
> 标签：cuda, matrix-multiplication

我试图在我的程序中发现一个错误，它使用 CUDA 将方阵相乘。只要无法从内核 printf() （请告诉您是否知道如何操作），我会向内核发送一个额外的结构来获取线程、块、行和列的数量。该结构的所有元素都是-1（以识别它们）。因此，矩阵乘积部分不正确，但来自内核的数据完全让我感到困惑。这是代码：

```
typedef struct {
int tx;
int ty;
int bx;
int by;
int rw;
int cl;
} THREADS; 

__global__ void mult1_kernel (float *a, float *b, float *c, THREADS *d, int n) {
    int k;
    float sum = 0.0f;
    int rw = blockIdx.y * blockDim.y + threadIdx.y;
    int cl = blockIdx.x * blockDim.x + threadIdx.x;

for (k = 0; k < n; k++)
    sum += a[rw*n + k] * b[k*n + cl];

c[rw*n + cl] = sum;
d[rw*n + cl].tx = threadIdx.y;
d[rw*n + cl].ty = threadIdx.x;  
d[rw*n + cl].bx = blockIdx.y;
d[rw*n + cl].by = blockIdx.x;
d[rw*n + cl].rw = rw;
d[rw*n + cl].cl = cl;

} 
```

...

```
dim3 blockSize = dim3 (16, 16);
dim3 gridSize = dim3 ((n+15)/16, (n+15)/16); 
```

现在给出的是：

```
Input matrix A:
       1        2        3        4 
       2        3        4        5 
       3        4        5        6 
       4        5        6        7 

Input matrix B:
       1      0.5    0.333     0.25 
     0.5    0.333     0.25      0.2 
   0.333     0.25      0.2    0.167 
    0.25      0.2    0.167    0.143 
Time spent executing on the GPU: 0.05 millseconds

Matrix product of A and B (CUDA):
       4     2.72      2.1     1.72 
    6.08        4     3.05     2.48 
       4     3.05     2.48      2.1 
    3.22      2.6     2.19     1.89 

[ThreadIdx.x][ThreadIdx.y]:
[0][0] [0][1] [0][2] [0][3] 
[1][0] [1][1] [-1][-1] [-1][-1] 
[-1][-1] [-1][-1] [-1][-1] [-1][-1] 
[-1][-1] [-1][-1] [-1][-1] [-1][-1] 

[BlockIdx.x][BlockIdx.y]:
[0][0] [0][0] [0][0] [0][0] 
[0][0] [-1][-1] [-1][-1] [-1][-1] 
[-1][-1] [-1][-1] [-1][-1] [-1][-1] 
[-1][-1] [-1][-1] [-1][-1] [-1][-1] 

    [rw][cl]:
    [0][0] [0][1] [0][2] [0][3] 
    [1][0] [-1][-1] [-1][-1] [-1][-1] 
    [-1][-1] [-1][-1] [-1][-1] [-1][-1] 
    [-1][-1] [-1][-1] [-1][-1] [-1][-1] 

    Matrix product of A and B (Correct result):
       4     2.72      2.1     1.72 
    6.08        4     3.05     2.48 
    8.17     5.28        4     3.24 
    10.2     6.57     4.95        4 
```

因此，每个线程都会写入其 threadIdx、blockIdx、行数和列数，但大多数值自初始化以来并未更改。请帮助我了解它是如何工作的。

第 2 部分。每个线程输出正确的总和，但在将数据从设备内存复制到主机后，一些元素变为零。这是代码：

```
 #include <stdio.h>
#include <stdlib.h>
#include "cuPrintf.cuh"
#include "cuPrintf.cu"

__global__ void mult1_kernel (float *a, float *b, float *c, int n) {
    int k;
    float sum = 0.0f;
    int rw = blockIdx.y * blockDim.y + threadIdx.y;
    int cl = blockIdx.x * blockDim.x + threadIdx.x;

    if ((rw < n) && (cl < n)) {
        rw *= n;     
        for (k = 0; k < n; k++)
            sum += a[rw + k] * b[k*n + cl];

        cuPrintf ("Thread[%d][%d] from block[%d][%d]:\n rw = %d, cl = %d, sum = %f\n\n",

                                    threadIdx.x, threadIdx.y, blockIdx.x, blockIdx.y, rw/n, cl, sum);
    }

    c[rw + cl] = sum;
}

__host__ int mult1_host (float *a, float *b, float *c, int n) {
    cudaEvent_t start, stop;
    cudaError_t cuerr;
    int i, j;
    int size = n * n * sizeof (float);
    float gpuTime = 0.0f;
    float *aDev = NULL, *bDev = NULL, *cDev = NULL;

    cuerr = cudaMalloc ((void**)&aDev, size);
    if (cuerr != cudaSuccess) {
        fprintf (stderr, "Cannot allocate GPU memory for aDev: %s\n", cudaGetErrorString (cuerr));
        return (-1);
    }
    cuerr = cudaMalloc ((void**)&bDev, size);
    if (cuerr != cudaSuccess) {
        fprintf (stderr, "Cannot allocate GPU memory for bDev: %s\n", cudaGetErrorString (cuerr));
        return (-1);
    }
    cuerr = cudaMalloc ((void**)&cDev, size);
    if (cuerr != cudaSuccess) {
        fprintf (stderr, "Cannot allocate GPU memory for cDev: %s\n", cudaGetErrorString (cuerr));
        return (-1);
    }   

    dim3 blockSize = dim3 (16, 16);
    dim3 gridSize = dim3 ((n+15)/16, (n+15)/16);

    cuerr = cudaMemcpy (aDev, a, size, cudaMemcpyHostToDevice);
    if (cuerr != cudaSuccess) {
        fprintf (stderr, "Cannot copy data from a to aDev: %s\n", cudaGetErrorString (cuerr));
        return (-1);
    }
    cuerr = cudaMemcpy (bDev, b, size, cudaMemcpyHostToDevice);
    if (cuerr != cudaSuccess) {
        fprintf (stderr, "Cannot copy data from a to bDev: %s\n", cudaGetErrorString (cuerr));
        return (-1);
    }

    cudaPrintfInit ();

    cudaEventCreate (&start);
    cudaEventCreate (&stop);

    cudaEventRecord (start, 0);
mult1_kernel <<< gridSize, blockSize >>> (aDev, bDev, cDev, n);

cudaEventRecord (stop, 0);

cudaEventSynchronize (stop);

cudaEventElapsedTime (&gpuTime, start, stop);

cuerr = cudaGetLastError ();
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot launch CUDA kernel: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

cuerr = cudaDeviceSynchronize ();
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot synchronize CUDA kernel: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

cudaPrintfDisplay (stdout, true);
cudaPrintfEnd ();

cuerr = cudaMemcpy (c, cDev, size, cudaMemcpyDeviceToHost);
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot copy data from c to cDev: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

printf ("Time spent executing on the GPU: %.2f millseconds\n", gpuTime);
printf ("\n");

cudaEventDestroy (start);
cudaEventDestroy (stop);

cudaFree (aDev);
cudaFree (bDev);
cudaFree (cDev);

    return (0);
}
int main () {
    int i, j, k;
    int n;
    float *a, *b, *c;

printf ("Enter the matrix size: ");
scanf ("%d", &n);
printf ("Blocks = %d\n", n*n/512 + 1);

if (n < 1) {
    printf ("Invalid matrix size\n");
    return (-1);
}

if (!(a = (float*) malloc (n * n * sizeof (float)))) {
    fprintf (stderr, "Cannot allocate CPU memory for a\n"); 
    return (-1);
    }
if (!(b = (float*) malloc (n * n * sizeof (float)))) {
    fprintf (stderr, "Cannot allocate CPU memory for b\n"); 
    return (-1);
    }
if (!(c = (float*) malloc (n * n * sizeof (float)))) {
    fprintf (stderr, "Cannot allocate CPU memory for c\n"); 
    return (-1);
    }

for (i = 0; i < n; i++)
    for (j = 0; j < n; j++)
        a[i*n + j] = (float)(i + j + 1);

for (i = 0; i < n; i++)
    for (j = 0; j < n; j++)
        b[i*n + j] = 1 / (float)(i + j + 1);

printf ("Input matrix A:\n");
for (i = 0; i < n; i++) { 
    for (j = 0; j < n; j++)
        printf ("%8.3g ", a[i*n + j]);
    printf ("\n");
}
printf ("\n");

printf ("Input matrix B:\n");
for (i = 0; i < n; i++) { 
    for (j = 0; j < n; j++)
        printf ("%8.3g ", b[i*n + j]);
    printf ("\n");
}   
printf ("\n");

if (mult1_host (a, b, c, n) < 0) {
    return (-1);
}

printf ("Matrix product of A and B (CUDA):\n");
for (i = 0; i < n; i++) { 
    for (j = 0; j < n; j++)
        printf ("%8.3g ", c[i*n + j]);
    printf ("\n");
}
printf ("\n");

for (i = 0; i < n; i++)
    for (j = 0; j < n; j++) {
        c[i*n +j] = 0;
        for (k = 0; k < n; k++)
            c[i*n + j] += a[i*n + k] * b[k*n + j];
    }

printf ("Matrix product of A and B (Check):\n");
for (i = 0; i < n; i++) { 
    for (j = 0; j < n; j++)
        printf ("%8.3g ", c[i*n + j]);
    printf ("\n");
}

free (a);
free (b);
free (c);

    return (0);
} 
```

它给出了：

```
[0, 0]: Thread[0][0] from block[0][0]:
 rw = 0, cl = 0, sum = 4.000000

[0, 1]: Thread[1][0] from block[0][0]:
 rw = 0, cl = 1, sum = 2.716667

[0, 2]: Thread[2][0] from block[0][0]:
 rw = 0, cl = 2, sum = 2.100000

[0, 3]: Thread[3][0] from block[0][0]:
 rw = 0, cl = 3, sum = 1.721429

[0, 16]: Thread[0][1] from block[0][0]:
 rw = 1, cl = 0, sum = 6.083333

[0, 17]: Thread[1][1] from block[0][0]:
 rw = 1, cl = 1, sum = 4.000000
[0, 18]: Thread[2][1] from block[0][0]:
 rw = 1, cl = 2, sum = 3.050000

[0, 19]: Thread[3][1] from block[0][0]:
 rw = 1, cl = 3, sum = 2.480952

[0, 32]: Thread[0][2] from block[0][0]:
 rw = 2, cl = 0, sum = 8.166666
[0, 33]: Thread[1][2] from block[0][0]:
 rw = 2, cl = 1, sum = 5.283333

[0, 34]: Thread[2][2] from block[0][0]:
 rw = 2, cl = 2, sum = 4.000000

[0, 35]: Thread[3][2] from block[0][0]:
 rw = 2, cl = 3, sum = 3.240476
[0, 48]: Thread[0][3] from block[0][0]:
 rw = 3, cl = 0, sum = 10.250000

[0, 49]: Thread[1][3] from block[0][0]:
 rw = 3, cl = 1, sum = 6.566667

[0, 50]: Thread[2][3] from block[0][0]:
 rw = 3, cl = 2, sum = 4.950000

[0, 51]: Thread[3][3] from block[0][0]:
 rw = 3, cl = 3, sum = 4.000000

Matrix product of A and B (CUDA):
       4     2.72      2.1     1.72 
    6.08        0        0        0 
       0        0        0        0 
       0        0        0        0 

Time spent executing on the GPU: 0.06 millseconds

Matrix product of A and B (Check):
       4     2.72      2.1     1.72 
    6.08        4     3.05     2.48 
    8.17     5.28        4     3.24 
    10.2     6.57     4.95        4 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:58:10.293

而不是在内核末尾：

```
 }

    c[rw + cl] = sum;
} 
```

做这个：

```
 c[(rw*n) + cl] = sum;
    }
} 
```

注意区别：

1.  （我告诉过你将 exra 右大括号放在*内核的末尾*）。通过将该语句保留在线程限制之外，您可以让垃圾线程写入数组中的位置。
2.  您没有正确索引到您的一维数组。按照您编写的方式，对矩阵位置 (0, 2) 和 (2, 0) 的最终写入 c 将转到*相同的位置*(rw + cl)。

# ruby-on-rails - Rails 使用关联查询 - has_many

> ID：13555447
> 
> 赞同：0
> 
> 时间：2012-11-25T20:59:12.553
> 
> 标签：ruby-on-rails, activerecord

如果我有一个名为 User 的模型，它具有：

```
 has_many     :parent_relationships,
               :class_name            => "Relationship",
               :foreign_key           => :child_id,
               :dependent             => :destroy,
               :uniq => true
  has_many     :parents,
               :through               => :parent_relationships,
               :source                => :parent 
```

所以，我希望能够找到至少有一个父母的用户。现在，如果我获取一个特定的用户并且我这样做`user.parents`了，我会得到父母的列表，但是我将如何在 where 子句中做到这一点？

我担心的是，现在我正在获取这样的信息：

```
User.where({:role => 'Teen'}) 
```

所以，我想找到所有角色是青少年并且至少有父母的用户。此外，为了使它更复杂，我还有另一个我想考虑的关联：

```
 has_and_belongs_to_many :notifications 
```

而且我想找到那些通知名称属性为“电子邮件”的用户。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:08:54.150

加入应该这样做：

```
User.joins(:parents).uniq 
```

由于这会创建一个`INNER JOIN`，它只会返回父母的记录。`uniq`删除可能由连接返回的重复记录。

**编辑**：

您的方法链接可以像这样工作：

```
User.includes(:notifications).joins(:parents).where(:role => "Teen").where("notifications.name = 'email'") 
```

# comments - 为什么我的页面上的评论出现乱序并且有时不显示？

> ID：13555450
> 
> 赞同：-6
> 
> 时间：2012-11-25T20:59:57.810
> 
> 标签：comments, facebook-page

我运行一个页面，当我发布一些内容时，一旦我收到这么多评论，评论就会开始乱序，当我去查看它们时也不会出现。这个问题已经持续了将近两个月。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:40:04.373

Facebook 告诉 Mashable，这是一个实验。他们正在随机化页面线程中评论的顺序，看看它是否会增加参与度。由于动物救援工作的方式我不会在这里讨论，数百只动物已经死亡，并且每天都在死亡，这是该实验的直接结果。

Facebook 不提供客户或技术支持。他们仅在某些页面上进行此实验。如果发生在你身上，那就太糟糕了。Facebook 既不会解决该问题，也不会允许您选择退出实验。

Facebook对其用户完全不屑一顾。唯一的解决方案是将您的粉丝群迁移到另一个平台。我已经发布并开始让我的粉丝知道这正在进行中。

如果你觉得尽管有这种待遇，在 Facebook 上生存更重要，那么，你已经被警告过了。他们认为你是肮脏的，这就是为什么他们这样对待你。

# javascript - jQuery：切换元素，切换后更改类

> ID：13555451
> 
> 赞同：0
> 
> 时间：2012-11-25T20:59:58.527
> 
> 标签：javascript, jquery, jquery-selectors

我想归档以下内容： Onclick 我在树中的下一个 ul 应该切换（工作）此后（！）该类应该从 treeExpanded 更改为 treeCollapsed，但我不明白......

```
 ...
    <li>
        <a class="treeExpanded">Toggle</a>
        <span>xyz</span>
        <ul class="steps">
        ...
        </ul>
    </li>
    ... 
```

有效，但类立即更改：

```
 $j('.treeExpanded').click (function () {
        $j(this).toggleClass('treeCollapsed','treeExpanded').nextAll('ul').slideToggle("slow");
    }); 
```

也可以，但类会立即更改：

```
 $j('.treeExpanded').click (function () {
        $j(this).nextAll('ul').slideToggle("slow");
        $j(this).toggleClass('treeCollapsed','treeExpanded');
    }); 
```

不会工作：

```
 $j('.treeExpanded').click (function () {
        $j(this).nextAll('ul').slideToggle("slow", function () {
            $j(this).parents('a:first').toggleClass('treeCollapsed','treeExpanded');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:04:23.667

您可以将元素保存在变量中，然后在回调中使用它

```
$j('.treeExpanded').click (function () {
    $this = $j(this);
    $this.nextAll('ul').slideToggle("slow", function () {
        $this.toggleClass('treeCollapsed','treeExpanded');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:09:05.917

你可以这样尝试：

```
 $('.treeExpanded').toggle(function(){ 
     $(this).nextAll('ul').removeClass("treeCollapsed");
     $(this).addClass("treeExpanded");
  }, function(){ 
     $(this).nextAll('ul').removeClass("treeExpanded");
     $(this).addClass("treeCollapsed");
  }); 
```

类似的东西。我发现这比弄乱点击本身更好。

# objective-c - CoreAnimation：警告，删除了未提交 CATransaction 的线程；

> ID：13555452
> 
> 赞同：0
> 
> 时间：2012-11-25T21:00:04.443
> 
> 标签：objective-c, macos, cocoa, quartz-graphics

我不知道我在看什么。我试图将问题追溯到某种动画，但我不知道那可能在哪里。我怎样才能找到这是从哪里来的？

```
CoreAnimation: warning, deleted thread with uncommitted CATransaction; created by:
0   QuartzCore                          0x00007fff923ecb95 _ZN2CA11Transaction4pushEv + 219
1   QuartzCore                          0x00007fff923ec76d _ZN2CA11Transaction15ensure_implicitEv + 273
2   QuartzCore                          0x00007fff923ec60a _ZN2CA11Transaction9set_valueEj12_CAValueTypePKv + 40
3   QuartzCore                          0x00007fff923ec59e +[CATransaction setDisableActions:] + 38
4   AppKit                              0x00007fff8a7fff6e -[NSScrollerImp _updateLayerGeometry] + 67
5   AppKit                              0x00007fff8a7ff54d -[NSScroller(NSInternal2) _replaceScrollerImp] + 368
6   AppKit                              0x00007fff8a897828 -[NSScroller initWithCoder:] + 305
7   Foundation                          0x00007fff89e92a09 _decodeObjectBinary + 2741
8   Foundation                          0x00007fff89e91db4 _decodeObject + 226
9   AppKit                              0x00007fff8a719760 -[NSView initWithCoder:] + 1103
10  AppKit                              0x00007fff8a71afad -[NSControl initWithCoder:] + 50
11  AppKit                              0x00007fff8a89772d -[NSScroller initWithCoder:] + 54
12  Foundation                          0x00007fff89e92a09 _decodeObjectBinary + 2741
13  Foundation                          0x00007fff89e91db4 _decodeObject + 226
14  AppKit                              0x00007fff8a719760 -[NSView initWithCoder:] + 1103
15  AppKit                              0x00007fff8ae115ee -[NSCollectionView initWithCoder:] + 114
CoreAnimation: warning, deleted thread with uncommitted CATransaction; created by:
0   QuartzCore                          0x00007fff923ecb95 _ZN2CA11Transaction4pushEv + 219
1   QuartzCore                          0x00007fff923ec76d _ZN2CA11Transaction15ensure_implicitEv + 273
2   QuartzCore                          0x00007fff923f38ab _ZN2CA5Layer13thread_flags_EPNS_11TransactionE + 37
3   QuartzCore                          0x00007fff923f37e3 _ZN2CA5Layer4markEPNS_11TransactionEjj + 79
4   QuartzCore                          0x00007fff923f374a _ZN2CA5Layer25set_needs_display_in_rectERK6CGRect + 392
5   AppKit                              0x00007fff8a8ff47d -[_NSViewBackingLayer setNeedsDisplayInRect:] + 206
6   QuartzCore                          0x00007fff923f359f -[CALayer setNeedsDisplay] + 62
7   AppKit                              0x00007fff8a8ff3a9 -[_NSViewBackingLayer setNeedsDisplay] + 73
8   AppKit                              0x00007fff8a900bc8 -[NSView(NSInternal) _setLayerNeedsDisplayInViewRect:] + 566
9   AppKit                              0x00007fff8a73caad -[NSView setNeedsDisplayInRect:] + 809
10  AppKit                              0x00007fff8a73c672 -[NSView setNeedsDisplay:] + 79
11  AppKit                              0x00007fff8a755648 -[NSButtonCell setTitle:] + 131
12  myOSXApp                          0x00000001000087cb -[MyWindowController updateOutlineNodeCount:] + 187
13  CoreFoundation                      0x00007fff8d5be47a _CFXNotificationPost + 2554
14  Foundation                          0x00007fff89e8c846 -[NSNotificationCenter postNotificationName:object:userInfo:] + 64
15  myOSXApp                          0x00000001000104f9 -[IconViewModel setChecked:] + 153 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:24:42.727

回溯显示您的应用程序的哪些代码导致了问题。

```
myOSXApp                          0x00000001000087cb -[MyWindowController updateOutlineNodeCount:] + 187 
myOSXApp                          0x00000001000104f9 -[IconViewModel setChecked:] + 153 
```

我假设您从不是主线程的不同线程发布通知。没有更多的上下文，这很难说......

请注意，线程和通知不能很好地混合。

您似乎在 setChecked: 中发布了通知，并且此代码未在主线程上运行。

# c# - DateTime.TryParseExact 返回 false

> ID：13555462
> 
> 赞同：4
> 
> 时间：2012-11-25T21:01:10.073
> 
> 标签：c#, .net

我正在尝试`4/27/2011 12:00:00 AM`使用`M/d/yyyy H:m:s a`模式、不变的文化和默认选项进行解析，但它不解析。

如果有人能帮助我意识到问题所在，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T21:04:33.107

您的模式不包括`tt`，这是 AM/PM 指示符，并且*在*您的输入文本中。此外，您想要`h`12 小时制而不是 24 小时制 24 小时制，而且看起来您总是有两位数的分钟和秒，所以您可能只需要`M/d/yyyy h:mm:ss tt`.

有效的示例代码：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        DateTime value;
        if (DateTime.TryParseExact("4/27/2011 12:00:00 AM",
                                   "M/d/yyyy h:mm:ss tt",
                                   CultureInfo.InvariantCulture,
                                   DateTimeStyles.None,
                                   out value))
        {
            Console.WriteLine(value);
        }
    }
} 
```

[有关自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)的详细信息，请参阅 MSDN 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T21:04:26.163

模式不正确 - 没有`a`格式说明符 - 应该是`tt`

# asp.net-mvc-3 - 带有 autofac 的自定义 ControllerFactory

> ID：13555465
> 
> 赞同：1
> 
> 时间：2012-11-25T21:01:26.080
> 
> 标签：asp.net-mvc-3, dependency-injection, autofac, controller-factory

首先，我是asp mvc的新手，所以请耐心等待。

目前我想创建项目，其中 autofac 将是 IoC 容器，我将要求自定义控制器工厂。在自定义控制器工厂中，我想通过控制器的构造函数设置实现数据存储库。

我认为应该以这种方式完成：

```
ContainerBuilder builder = new ContainerBuilder();
        builder.RegisterControllers(asm).InstancePerHttpRequest();
        builder.Register(s => new ControllerFactory()).As<IControllerFactory>();
        IContainer container = builder.Build();

        DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

我的控制器工厂代码：

```
internal class ControllerFactory : DefaultControllerFactory
{
    private readonly Dictionary<string, Func<RequestContext, IController>> _controllerMap;

    public ControllerFactory()
    {
        List<IController> lstControllers = DependencyResolver.Current.GetServices<IController>().ToList();
        _controllerMap = new Dictionary<string, Func<RequestContext, IController>>();

        foreach (Controller contr in lstControllers)
        {
            string ctrName = contr.ControllerContext.RouteData.Values["Controller"].ToString();
            _controllerMap.Add(ctrName, c => contr);
        }
    }

    public override IController CreateController(RequestContext requestContext, string controllerName)
    {

        if (_controllerMap.ContainsKey(controllerName))
        {
            return _controllerMap[controllerName](requestContext);
        }
        else
            throw new KeyNotFoundException(controllerName);
    }
} 
```

控制器映射为空。当我想解决 IController 时收到错误，因为 IController 不是 reqseter，但我在 autofac builder 中使用了 RegisterControllers。

你能解释一下如何以正确的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:42:16.650

由于您是通过接口解析控制器，因此请使用该`AsImplementedInterfaces`方法注册控制器。

```
builder.RegisterControllers(asm).AsImplementedInterfaces()
    .InstancePerHttpRequest(); 
```

# r - 在 R 中查找循环的 x 截距和 y 截距

> ID：13555468
> 
> 赞同：2
> 
> 时间：2012-11-25T21:01:29.707
> 
> 标签：r

如何找到循环的 x 截距和 y 截距（全部四个）`R`？

```
# this will generate an example dataframe mydf
x <- sin(seq(0,2*pi,0.2) + rnorm(1))
y <- cos(seq(0,2*pi,0.2) + rnorm(1))

mydf <- data.frame(x,y)
plot(mydf)
abline(h=0)
abline(v=0) 
```

![循环印象](../Images/8cf34e34cd8415ca980eea6ccfb41fe6.png)

目前，我尝试使用两个类似的功能，它们分为北/南/东/西，并寻找离轴最近的点。这是低效且不精确的，因为该点可能很远。

```
getYintercept <- function(mdf){
  R1 <- mdf$y[which.min(subset(mdf, y>0)$y)] # north
  R2 <- mdf$y[which.min(subset(mdf, y<0)$y)] # south
  return(rbind(R1,R2))
} 
```

因此，我想在这一点上插入 ( `predict`, )。`approx`如何最优雅地解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:38:22.877

这是一个`approxfun`解决方案：

```
intercepts <- function(x,y) {
  x.s <- approxfun(x[y<=0], y[y<=0])(0)
  x.n <- approxfun(x[y>=0], y[y>=0])(0)
  y.w <- approxfun(y[x<=0], x[x<=0])(0)
  y.e <- approxfun(y[x>=0], x[x>=0])(0)

  list(x.s, x.n, y.w, y.e)
} 
```

这里，`x.s`是`x`南 y 轴截距的值，依此类推。

# javascript - fancybox-rails 视频不播放

> ID：13555469
> 
> 赞同：0
> 
> 时间：2012-11-25T21:01:32.437
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, fancybox

我正在尝试使用fancybox-rails 在带有rails 的fancybox 中播放视频。我按照[网站上](https://github.com/hecticjeff/fancybox-rails)的说明进行操作，可以很好地弹出一张图片。

这是我的图片代码（有效）：

```
= link_to image_tag('/assets/newlook/video_placehldr.jpg'), '/assets/newlook/nicepicture.jpg', :class => 'fancybox' 
```

如果我切换`nicepicture.jpg`到`nicevideo.mp4`（或`nicevideo.webm`或`nicevideo.ogv`），然后会弹出一个带有旋转轮指示器的小花式框，但随后它就会冻结在那里。

我可能会遗漏一些简单的东西，因为我要回到 Rails 的摇摆和所有花哨的 javascript 选项中。因此，我认为这是我的 application.js 的相关部分：

```
$(document).ready(function() {
  $("a.fancybox").fancybox();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:51:01.447

首先，您还需要更改

```
link_to image_tag() 
```

...到正确的标签，而不仅仅是视频的名称

其次，fancybox 不是媒体播放器……您仍然需要一个播放器（例如 jwplayer）来在 fancybox 中打开这些视频，因此您的（渲染的）视频链接应该看起来像

```
<a href="path/to/payer/jwplayer.swf?file='path/to/video.mp4'">open video in fancybox</a> 
```

此外，由于fancybox（您使用的版本v1.3.4）无法获取`type`内容或视频的大小，因此最好在您的自定义脚本中设置一些，例如

```
$("a.fancybox").fancybox({
 "width": 480, // or whatever
 "height": 320,
 "type": "swf"
}); 
```

# python - Python 构建系统根本不工作。问题是什么？

> ID：13555472
> 
> 赞同：4
> 
> 时间：2012-11-25T21:01:37.643
> 
> 标签：python, sublimetext2

在编辑默认构建系统本身并制作新系统后，我不断收到此错误。

```
[Error 2] The system cannot find the file specified
[cmd:  [u'C:\\python32\\python', u'-u', u'C:\\Users\\Ishmael\\Desktop\\projectone.py']]
[dir:  C:\Users\Ishmael\Desktop]
[path: C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files\Sony\VAIO Improvement\;C:\Program Files (x86)\Sony\VAIO Startup Setting Tool]
[Finished] 
```

在'cmd：“我完成了重做构建，但它一直将过去的构建保存到自身中。（在我显然覆盖它​​之后）请帮助，因为我只想在 Sublime Text 2 中构建。运行 Windows 8。

更新：忘记了主要部分，代码。这就是我的 python.sublime-build 目前的样子。

```
{
   "cmd": ["C:\\python32\\python", "-u", "$file"],
   "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
   "selector": "source.python"
} 
```

你明白我所说的不断添加旧的“c/users/ishmael/etc”是什么意思吗？wtf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:14:10.943

Per[如何从 Sublime Text 2 运行 Python 代码？](https://stackoverflow.com/questions/8551735/how-do-i-run-python-code-from-sublime-text-2)，请尝试确保使用解释器的完整路径名指定 cmd，*包括`.exe`扩展名*：

```
c:\\python32\\python.exe 
```

（假设您的 Python 解释器确实位于`c:\python32`.

# javascript - Leaflet.js geoJson 没有出现在地图上 - 我试图显示方向

> ID：13555476
> 
> 赞同：1
> 
> 时间：2012-11-25T21:02:42.247
> 
> 标签：javascript, leaflet, geojson, cloudmade

我可以使用 cloudmade api 很好地检索方向，但我似乎无法将这些坐标添加到我的地图中。

我尝试了两种不同的方法

```
 var myStyle = {
        "color": "#ff7800",
        "weight": 5,
        "opacity": 0.65
      };
      var myLines = [{
        "type": "LineString",
        "coordinates": []
      }];

      myLines.coordinates = [[]];
      for (var i =  result.data.route_geometry.length - 1; i >= 0; i--) {
        if(!isNaN(result.data.route_geometry[i][0]) && !isNaN(result.data.route_geometry[i][1])){
          myLines.coordinates[i] = [result.data.route_geometry[i][0], result.data.route_geometry[i][1]];
        }
      };
      L.geoJson(myLines, {style: myStyle}).addTo(window.map); 
```

和

```
 var geojsonFeature = {
          "type": "Feature",
          "properties": {
              "name": "Coors Field",
              "amenity": "Baseball Stadium",
              "popupContent": "This is where the Rockies play!"
          },
          "geometry": {
              "type": "Point",
              "coordinates": []
          }
      };

      for (var i =  result.data.route_geometry.length - 1; i >= 0; i--) {
        if(!isNaN(result.data.route_geometry[i][0]) && !isNaN(result.data.route_geometry[i][1])){
          geojsonFeature.geometry.coordinates[i] = [result.data.route_geometry[i][0], result.data.route_geometry[i][1]];
        }
      };
      L.geoJson(geojsonFeature).addTo(window.map); 
```

我可以很好地添加标记。我的问题类似于这个[Leaflet GeoJSON display](https://stackoverflow.com/questions/11570669/leaflet-geojson-display)，所以我尝试像这样反转坐标

```
myLines.coordinates[i] = [result.data.route_geometry[i][0], result.data.route_geometry[i][1]]; 
```

但我仍然没有在地图上添加任何内容。

控制台中没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T04:58:05.137

这是执行此操作的正确方法：http: [//jsfiddle.net/8QHFe/153/](http://jsfiddle.net/8QHFe/153/)

```
var linePts = [
    [ 31.811628, 24.904771 ],
    [ 31.810856, 24.91096 ],
    [ 31.817636, 24.911855 ],
    [ 31.831133, 24.907477 ],
    [ 31.841497, 24.898679 ],
    [ 31.841025, 24.895312 ],
    [ 31.837935, 24.891225 ],
    [ 31.842356, 24.889006 ],
    [ 31.853814, 24.888626 ]
];

// a FOR loop operates on each item in a list
for( i=0; i < linePts.length; i=i+1 ) {
    // turn this coordinate into a LatLng
  linePts[ i ] = new L.LatLng( linePts[ i ][ 0 ], linePts[ i ][ 1 ] );
}

// add the line
line = new L.Polyline( linePts, { color: "purple" } );
map.addLayer(line);​ 
```

# javascript - 在 javascript OR 语句中，如果定义了两个值，则使用哪个值？

> ID：13555481
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:03:33.200
> 
> 标签：javascript, jquery, jquery-selectors, options

我有以下片段：

```
var prevPageWrap = data.prevPage.jqmData("wrapper"),
    pageBackBtn = page.closest('div:jqmData(wrapper="true")').jqmData("usebackbtn"),
    useBackBtn =  pageBackBtn || o.useBackBtn;

if ( useBackBtn && !prevPageWrap ){
    self.crumble(event, data, page );
    } 
```

我的问题是`useBackBtn`。我在我的 HTML 元素中设置`usebackbtn`为 false，如下所示：

```
<div data-role="page" id="landing" data-wrapper="true" data-scrollmode="overthrow" data-usebackbtn="false">

</div> 
```

我也可以检索。

仍然

```
useBackBtn =  pageBackBtn || o.useBackBtn; 
```

设置为真，虽然`pageBackBtn`是假的。

**问题**：
如果第一个“选项”为假而第二个选项为真，那么`useBackBtn`= What 取代什么的值是多少？是否有一种简写的语法方式来表示“如果定义了第一个选项，则接受它，否则尝试第二个选项？”

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:04:36.600

> `useBackBtn =`如果第一个“选项”为假，而第二个选项为真，那么What supercedes what的值是多少？

第二个选项。

`a || b`评估为`a`好像`a`是一个真值，否则评估为`b`.

> 是否有一种简写的语法方式来表示“如果定义了第一个选项，则接受它，否则尝试第二个选项？”

使用三元运算符。

```
var a, b, result;
a = 0;
b = 1;
result = typeof a !== "undefined" ? a : b
alert(result) 
```

# ruby-on-rails - Rails 生态系统中的 TypeConverter 等效项，用于在后期转换/修改数据并获取操作

> ID：13555482
> 
> 赞同：0
> 
> 时间：2012-11-25T21:03:34.710
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在寻找一个干净的解决方案来将日期和日期时间值转换为获取操作中的本地波斯日期表示，并且每当发布的包含波斯日期值的表单将其转换回日期和日期时间时。

ASP.NET MVC 中的解决方案很简单，我过去已经实现[过](https://github.com/jzinedine/Cedar/blob/master/Cedar.WebPortal.WebMVC4/Converters/DateTimeTypeConverter.cs)。

现在我正在寻找 Rails 等效机制。

您可以看到到目前为止我在这里尝试过的（[1](https://github.com/jzinedine/leasing/blob/master/app/helpers/application_helper.rb) , [2](https://github.com/jzinedine/leasing/blob/master/app/controllers/customers_controller.rb#L24) , [3](https://github.com/jzinedine/leasing/blob/master/app/views/customers/_person_fields.html.erb#L7)），但它并不干净，而且我在 activerecord 中遇到了遍历关联的问题，因为属性只返回简单的成员而不是关联。

环境：

```
Ruby version              1.9.3-p327 (x86_64-darwin12.2.0)
RubyGems version          1.8.24
Rails version             3.2.9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:42:18.533

我发现了一个名为 attribute_normalizer 的 gem，尽管我在 ApplicationHelper 中编写了我的小代码块并将其设置为控制器中的 before_filter，但它会非常有用。

这是一种将日期转换为不同格式的方法： [https ://github.com/jzinedine/leasing/blob/e495d652f025c344c49dc079f6826e045f6c986b/app/helpers/application_helper.rb](https://github.com/jzinedine/leasing/blob/e495d652f025c344c49dc079f6826e045f6c986b/app/helpers/application_helper.rb)

# maven - 重命名所有项目依赖项而不重命名主要工件

> ID：13555492
> 
> 赞同：2
> 
> 时间：2012-11-25T21:04:50.013
> 
> 标签：maven, maven-assembly-plugin

我正在使用描述符在 Maven 中构建程序集，并且尝试简单地执行以下操作：

1.  包含主项目工件 (JAR) 而不进行*任何*重命名。
2.  包括所有项目依赖项，重命名它们。

重命名格式：

```
${project.artifactId}-${project.version}.lib.${artifact.artifactId}.${artifact.extension}` 
```

目前，我的程序集描述符如下所示：

```
<?xml version="1.0"?>
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">

    <id>default</id>

    <formats>
        <format>tar.gz</format>
        <format>zip</format>
    </formats>

    <dependencySets>
        <dependencySet>
            <useProjectArtifact>true</useProjectArtifact>
            <outputDirectory>/</outputDirectory>
            <excludes>
                <exclude>*:*</exclude>
            </excludes>
        </dependencySet>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>/</outputDirectory>
            <outputFileNameMapping>
                ${project.artifactId}-${project.version}.lib.${artifact.artifactId}.${artifact.extension}
            </outputFileNameMapping>
            <unpack>false</unpack>
        </dependencySet>
    </dependencySets>
</assembly> 
```

不幸的是，我似乎无法让主要项目工件登陆发行版。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:22:58.113

您可以使用`<files>`块来单独包含项目工件本身：

```
<!-- Include the project artifact itself. -->
<files>
    <file>
        <source>${project.build.directory}/${project.build.finalName}.${project.packaging}</source>
        <outputDirectory>/</outputDirectory>
    </file>
</files>

<!-- Include all dependent libraries. -->
<dependencySets>
    <dependencySet>
        <useProjectArtifact>false</useProjectArtifact>
        <outputDirectory>/</outputDirectory>
        <outputFileNameMapping>${project.artifactId}-${project.version}.lib.${artifact.artifactId}.${artifact.extension}</outputFileNameMapping>
        <unpack>false</unpack>
    </dependencySet>
</dependencySets> 
```

（因为`<source>`可能有一个比上面更正确的表达式，但是很难找到可用的 Maven 属性的完整列表。如果有人知道，请随时编辑！）

Lastly, as an aside, if any of your dependencies have classifiers you may want to consider adding `${dashClassifier?}` to your `<outputFileNameMapping>` somewhere, or else the classifier will be missing from the filename.

# android - 创建表时出现 Android SQLite 错误

> ID：13555494
> 
> 赞同：2
> 
> 时间：2012-11-25T21:05:01.277
> 
> 标签：android, sqlite

我正在尝试使用 SQLiteOpenHelper 创建新数据库。

```
@Override
    public void onCreate(SQLiteDatabase sqLiteDatabase) {
        sqLiteDatabase.execSQL("CREATE TABLE SecretNumbers ("
                + "id integer primary key autoincrement, "
                + "PhoneNumber text);");

        sqLiteDatabase.execSQL("CREATE TABLE SecretWords ("
                + "id integer primary key autoincrement, "
                + "SecretWord text);");

        sqLiteDatabase.execSQL("CREATE TABLE SecretSMS ("
                + "id integer primary key autoincrement, "
                + "from text, "
                + "body text, "
                + "receivedatetime text, "
                + "isunread integer );" );

    } 
```

在运行时我面临以下错误。有人可以帮我吗？

```
11-25 22:57:23.329: INFO/Database(1231): sqlite returned: error code = 1, msg = near "from": syntax error
11-25 22:57:23.329: ERROR/Database(1231): Failure 1 (near "from": syntax error) on 0x2aaaf0 when preparing 'CREATE TABLE SecretSMS (id integer primary key autoincrement, from text, body text, receivedatetime text, isunread integer );'.
11-25 22:57:23.349: ERROR/SQLiteOpenHelper(1231): Couldn't open SecretPhoneDatabase for writing (will try read-only):
        android.database.sqlite.SQLiteException: near "from": syntax error: CREATE TABLE SecretSMS (id integer primary key autoincrement, from text, body text, receivedatetime text, isunread integer );
        at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
        at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
        at net.cgrup.SecretPhone.DataBase.DbHelper.onCreate(DbHelper.java:29)
        at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
        at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:187)
        at net.cgrup.SecretPhone.Broadcast.SmsReceiver.onReceive(SmsReceiver.java:31)
        at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:3683)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method)
11-25 22:57:23.369: WARN/dalvikvm(1231): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-25 22:57:23.399: ERROR/AndroidRuntime(1231): FATAL EXCEPTION: main
        java.lang.RuntimeException: Error receiving broadcast Intent { act=android.provider.Telephony.SMS_RECEIVED (has extras) } in net.cgrup.SecretPhone.Broadcast.SmsReceiver@4051d190
        at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:3683)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: android.database.sqlite.SQLiteException: Can't upgrade read-only database from version 0 to 1: /data/data/net.cgrup.SecretPhone/databases/SecretPhoneDatabase
        at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:199)
        at net.cgrup.SecretPhone.Broadcast.SmsReceiver.onReceive(SmsReceiver.java:31)
        at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
        ... 9 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T21:09:50.537

`from`是一个 SQL 关键字。您可能希望避免将其用作列名。如果您必须使用该名称，请按照此处的说明对其进行转义：[http ://www.sqlite.org/lang_keywords.html](http://www.sqlite.org/lang_keywords.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:12:23.947

“from”是保留的 SQL 关键字，不能用作列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:54:23.907

与您的问题无关，但我建议您将“id”更改为“_id”

# jquery - 动态 HTML 元素创建后 JQuery 无法绑定功能

> ID：13555501
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:06:01.790
> 
> 标签：jquery, syntax-error

我有这样的简单 html 创建：

```
$('#date_'+user_id).append('<input  type="text" size="20" id="date_new_'+user_id+'" value="'+dateStr+'"/>'); 
```

如您所见，id 是动态的，然后我尝试将函数绑定到其中，如下所示：

```
$('#date_new_'+user_id+"'").bind({
    click: function() {
    alert("do something on click");
     },
    mouseenter: function() {
    alert("do something on mouseenter"); 
} 
```

});

再次如您所见，我正在使用动态 id（我创建的那个），但它给了我这样的错误：

```
Uncaught Error: Syntax error, unrecognized expression: #date_new_97' jquery-1.8.2.min.js:2
bc.error jquery-1.8.2.min.js:2
bh jquery-1.8.2.min.js:2
bp jquery-1.8.2.min.js:2
r.querySelectorAll.bp jquery-1.8.2.min.js:2
bc jquery-1.8.2.min.js:2
p.fn.extend.find jquery-1.8.2.min.js:2
p.fn.p.init jquery-1.8.2.min.js:2
p jquery-1.8.2.min.js:2
(anonymous function)
p.event.dispatch jquery-1.8.2.min.js:2
g.handle.h 
```

我确实看到了通过 chrome 开发人员工具和 firebug 创建的文本元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:11:59.090

`$('#date_new_'+user_id+"'")`是你的问题。

鉴于这种情况：

```
var user_id = 15;
var jquery_selector = '#date_new_'+user_id+"'"; 
```

`jquery_selector`现在`#date_new_15'`是`#date_new_15`. 注意尾随的单引号。

将其更改为`$('#date_new_'+user_id)`，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:12:52.110

试试这个代码：

```
$('#date_new_'+user_id).bind({
    click: function() {
    alert("do something on click");
     },
    mouseenter: function() {
    alert("do something on mouseenter"); 
}); 
```

但是如果您动态添加输入，我建议您使用以下代码：

```
$(document).on('click','#date_new_'+user_id, function() {
    alert("do something on click");
     } 
});
$(document).on('mouseenter','#date_new_'+user_id, function() {
    alert("do something on mouseenter");
     } 
}); 
```

# ms-access - 使用组合框填充文本框

> ID：13555504
> 
> 赞同：0
> 
> 时间：2012-11-25T21:06:41.110
> 
> 标签：ms-access, ms-access-2007

我无法从组合框中获取数据来更新表单上的文本框，希望您能提供帮助！

组合框代码：

```
SELECT Employees.ID, Employees.LastName, Employees.FirstName, Employees.Title
FROM Employees; 
```

更新事件代码后：

```
Private Sub cboNames_AfterUpdate()
  Me.txtLastName = Me![cboNames].Column(1)
  Me.txtFirstName = Me![cboNames].Column(2)
  Me.txtTitle = Me![cboNames].Column(3)
End Sub 
```

所有控制源似乎都匹配。我做错了什么或应该寻找一些小事吗？

这是我获取信息的地方：http: [//support.microsoft.com/kb/319482](http://support.microsoft.com/kb/319482)

我已经尝试了好几个小时......让它工作了一次，没有保存那个文件，从那以后就无法让它工作，讨厌我的生活；）

如果您需要任何其他信息，请告诉我！

* * *

编辑：它仅在从头开始创建时才有效......如果我关闭数据库并重新打开它，它就不再填充字段。以前有人见过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:42:05.713

我认为您需要指定行以及该行中的位置。您没有具体说明您遇到的问题。试试这个，看看它是否有帮助：

```
Private Sub cboNames_AfterUpdate()
Me.txtLastName = Me![cboNames].Column(1,0)
Me.txtFirstName = Me![cboNames].Column(2,0)
Me.txtTitle = Me![cboNames].Column(3,0)
End Sub 
```

如果没有，那么请更具体地说明您遇到的问题:-) 希望我能提供帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:56:48.017

问题是安全设置。“通过通知禁用所有宏”实际上并没有通知我任何事情......我将其更改为“启用所有宏”并且它运行完美！

感谢您的帮助，@TheRedOne！...现在，如果我只能恢复我的六个多小时。

# c# - 如何管理将用于 ADO.NET 的 DateTime 的空对象解析为 DBNULL

> ID：13555505
> 
> 赞同：13
> 
> 时间：2012-11-25T21:06:40.457
> 
> 标签：c#, parsing, datetime, ado.net, dbnull

我有两个 DateTime 对象，BirthDate 和 HireDate。它们被正确格式化为字符串，当我将它们传递到我的数据访问层时，它们需要被解析为 DateTime 对象。

```
DateTime hD = DateTime.Parse(hire);            
DateTime bD = DateTime.Parse(birth);

//incase of a datestring being passed through
dateStringPassed = "7/2/1969"; 
```

但有时，字符串`hire`和`birth`为 null 或 empty `""`，如果代码像这样运行，我会从 Parsing a empty string 得到 FormatException 错误。如何管理空解析并允许 DateTime（如果为空或 null）被接受为`DBNull.Value`？

如果用户没有通过 DateTime 字符串，我仍然无法管理，然后解析使我的代码崩溃。

我的出生日期参数如下，如果为 null，则检查变量，然后使用 DBNull.Value。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-25T21:13:11.047

该`Parse`方法无法处理空字符串，但您可以使用可为空的 DateTime 并执行以下操作：

```
DateTime? hD = String.IsNullOrEmpty(hire) ? (DateTime?)null : DateTime.Parse(hire) 
```

但更安全的是使用`TryParse`：

```
DateTime? hD = null;
DateTime.TryParse(hire, out hD); 
```

然后为了存储这个值，你可以测试`hD.HasValue`：

```
if(hD.HasValue) { /* use hD */ }
else { /* else use DBNull.Value */ } 
```

* * *

从 C# 7 开始，您可以对内联输出参数使用更短的语法，并且可以完全避免可为空的类型：

```
if (DateTime.TryParse(hire, out var hD)) { /* use hD */ }
else { /* use DBNull.Value */ } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T21:09:49.260

您需要使用可为[空](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)的日期时间 - 快捷语法是`DateTime?`（注意`?`末尾的）。

```
DateTime? hD = null;
if(!string.IsNullOrWhitespace(hire )) // string.IsNullOrEmpty if on .NET pre 4.0
{
   hD = DateTime.Parse(hire);            
} 
```

您可以测试`hD.HasValue`它是否不使用`DbNull.Value`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:38:42.497

如果您使用此方法，任何不正确的日期都将返回`DBNull.Value`：

```
/// <summary>
/// Parses a date string and returns
/// a DateTime if it is a valid date,
/// if not returns DBNull.Value
/// </summary>
/// <param name="date">Date string</param>
/// <returns>DateTime or DBNull.Value</returns>
public static object CreateDBDateTime(string date)
{
    DateTime result;
    if (DateTime.TryParse(date, out result))
    {
        return result;
    }
    return DBNull.Value;
} 
```

# django - 在Django中将对象添加到数据库后添加多对多值

> ID：13555506
> 
> 赞同：0
> 
> 时间：2012-11-25T21:06:57.670
> 
> 标签：django

我有一个表单，要求用户为他们正在上传的文件添加一个类别，这是一个`ManytoManyField`. 但是，这个字段的值没有被添加到数据库中，我不知道为什么。下面代码中的变量是`descategories`

```
<form enctype="multipart/form-data" method="POST" action="" class="uniForm">
        <fieldset class="inlineLabels">
            {% csrf_token %}
            <table>
            <tr>
            <td>Design Title:</td><td>{{ formtoadddesign.modelname}}</td></td></tr>
            <tr><td>Author:</td> <td>{{ formtoadddesign.author }}</td></tr>
            <tr><td>Description:</td> <td>{{ formtoadddesign.description }}</td></tr>
            {% comment %}<tr><td>Design Image:&nbsp&nbsp&nbsp</td><td>{{ formtoadddesign.partimage }}</td></tr>{% endcomment %}
            <tr><td>Tags:</td><td>{{formtoadddesign.tags}}</td></tr>
            <tr><td>Format:</td><td>{{formtoadddesign.format}}</td></tr>
            <tr><td>Category:</td><td>{{formtoadddesign.descategories}}</td></tr>
            <tr><td>Attach File</td><td>{{formtoadddesign.content}}</td></tr>
                    </div>
            </table>
            <br>
            <div class="form_block">
                <input type="submit" class="btn btn-success" value="{% trans 'Add Design' %}">
            </div>
            <br>
        </fieldset>
    </form> 
```

我的代码中有以下代码`views.py`：

```
def add_design (request):
    # POST request  
    if request.method == "POST":
        formtoadddesign = designform(request.POST, request.FILES)
        if formtoadddesign.is_valid():
            new_design = formtoadddesign.save(commit=False)
            new_design.adder = request.user
            designname = new_design.modelname
            format = new_design.format
            adder_id = new_design.adder.id
            file = request.FILES['content']
            filename = file.name
            filecontent = file.read()
            file.seek(0)
            new_design.content=store_in_s3_design(filename, filecontent, designname, format, adder_id)
            new_design.save()
            cats = new_design.descategories
            print "new_design id:", repr(new_design.id)
            print cats
            for cat in cats.all():
                new_design.designcategory_id.add(cat)
                print "added %s" % cat 
```

基本上我似乎无法从中选择值，`ManytoManyField`这基本上是人们可以选择的形式的列表。我如何访问这些值 -`cats.all()`什么都不返回，所以我一定做错了什么......

这是我的表格：

```
class designform(ModelForm):
    def __init__(self, *args, **kwargs):
        super(designform, self).__init__(*args,**kwargs)
        self.is_update=False

    def clean(self):
        """
        Do Validation stuff
        """
        if 'modelname' not in self.cleaned_data:
                return
        if not self.is_update:
            return self.cleaned_data

    class Meta:
        model = Design 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:29:21.907

因为你正在使用`save(commit=False)`你需要`save_m2m`

见[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)

# video - 如何让ExpressionEngine中的多个频道过滤到一个页面，同时保持自己的页面

> ID：13555515
> 
> 赞同：1
> 
> 时间：2012-11-25T21:07:55.950
> 
> 标签：video, expression, expressionengine, channel

我是 Web 开发的初学者，我在 ExpressionEngine 网站上工作。该站点将包含我上传到 vimeo 的视频内容。我想要几个频道/页面。用户将能够访问这些页面并仅查看与该主题相关的内容。例如，如果我有关于 4D 影院的视频，用户只会看到 4D 影院视频。我为以下内容创建了频道；后期效果、4D 影院、创意套件和评论。我在我的网站上也为每个页面设置了单独的页面。

但是，我的问题在于主页。我希望每个频道的所有内容都过滤到主页中。因此，来自 Cinema 4D 的视频、后期效果、创意套件和评论都显示在主页上。我还希望将最近的视频显示得更大，而其他视频会更小（不同的样式）。这是我当前的代码的样子......

```
{exp:channel:entries limit="10"}
<div class="main_feature">

{if count ==1}
<div class="video_large">
<iframe src="width="500" height="200" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
{/if}

{if count !=1}
<div class="video_small">
<iframe src="width="20" height="15" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
{/if}

<h2>{after_effects_tutorial_title}</h2>
{after_effects_tutorial_link}
{after_effects_tutorial_summary}

<h2>{c4d_tutorial_title}</h2>
{c4d_tutorial_link}
{c4d_tutorial_summary}

<h2>{apple_tutorial_title}</h2>
{apple_tutorial_link}
{apple_tutorial_summary}

<h2>{creative_suite_tutorial_title}</h2>
{creative_suite_tutorial_link}
{creative_suite_tutorial_summary}

<h2>{inspiration_title}</h2>
{inspiration_link}
{inspiration_summary}

<h2>{review_title}</h2>
{review_link}
{review_summary}

</div>
{/exp:channel:entries} 
```

我试图设置它，如果帖子的数量不等于 1，它将加载小样式表，如果它等于 1，那么大样式将生效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:19:39.657

您只能将一个频道用于视频，并将频道分配给不同的类别，如后效、4D 影院、创意套件、评论等。

您可以创建类别@Admin-> Channel Administration-> Categories。您需要先创建一个类别组，然后将类别添加到其中。如果您对类别有任何疑问，请查看[此页面。](http://ellislab.com/expressionengine/user-guide/cp/admin/channels/category_management.html)

创建类别后，您可以创建视频频道，将类别组分配给您的频道。您也可以在类别之前创建通道，稍后修改类别分配。[（参考）](http://ellislab.com/expressionengine/user-guide/cp/admin/channels/channel_groups.html)

[发布您的频道条目时，请在“类别”选项卡](http://ellislab.com/expressionengine/user-guide/cp/content/publish.html)下选择它所属的类别。

通过在模板中指定 ' [category_group](http://ellislab.com/expressionengine/user-guide/modules/channel/channel_entries.html#category-group) ' 参数，您可以选择要显示的特定条目类别。要使最新条目的样式不同，您可以根据您使用的逻辑使用带有“{entry_date}”或“{entry_id}”变量的条件。

希望这可以帮到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:28:13.013

欢迎来到表达式引擎！看起来您有一个非常好的开始，但您似乎缺少了一点 ExpressionEngine 的美感。

在您的情况下，我建议您查看 EE 的类别功能。您应该能够将所有视频数据保存在一个频道中，然后根据它是 Creative Suite、Inspiration、c4d 等对其进行分类。

假设您在 EE 2.x 中，如果您转到管理选项卡，然后转到频道管理，然后转到“全局首选项”，您将看到有一个类别 URL 指示器。您可以在此处阅读文档：http: [//userguides.ellislab.com/expressionengine/cp/admin/channels/global_channel_preferences.html#category-url-indicator](http://userguides.ellislab.com/expressionengine/cp/admin/channels/global_channel_preferences.html#category-url-indicator)

基本上，您将按以下方式设置主模板：

```
{exp:channel:entries
    channel="video"
    disable="categories|category_fields|member_data|pagination|trackbacks"
    dynamic="no"
    require_entry="yes"
}
  {title}
  {video_link}
  {!-- 
  to access the category-specific page, you can use 
  something similar to the following:
  --}
  <a href="/video/CATEGORY_URL_INDICATOR/{category_url_title}">{category_name}</a>

{/exp:channel:entries} 
```

类别的简单性和灵活性是使 ExpressionEngine 如此强大的原因之一，希望对您有所帮助！

# php - 对使用 DOMXPath 选择的 XML 文档的一部分执行 XSLT 转换

> ID：13555517
> 
> 赞同：2
> 
> 时间：2012-11-25T21:08:33.057
> 
> 标签：php, xml, xslt, content-management-system

好吧，这让我发疯了。我正在尝试使用 XML 文件和一些 PHP 制作一个简单的 CMS。我有一个这样的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<sections>
<section name="about">
    <maintext>
        <p>Here is some maintext. </p>
    </maintext>
</section>
<section name="james">
    <maintext>
        <p>Zippidy do.</p>
    </maintext>
</section>
</sections> 
```

然后是 XSL 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html" />
<xsl:template match="/">
<xsl:apply-templates />
</xsl:template>
<xsl:template match="section">
<div class="section">
    <xsl:apply-templates />
</div>  
</xsl:template>
<xsl:template match="maintext">
<xsl:copy-of select="child::node()" />
</xsl:template>
</xsl:stylesheet> 
```

这种转换效果很好 - 我得到了几个简单的段落：

```
<p>Here is some maintext. </p>      
<p>Zippidy do.</p> 
```

但是，我现在有一个 PHP 文件，它应该查询 XML，根据它的 GET 参数获取一个特定的“部分”。然后只对 XML 的那一部分运行转换，并回显结果。

```
<?php

$sectionName = $_GET["section"];
$content = new DOMDocument();
$content->load("content.xml");
$transformation = new DOMDocument();
$transformation->load("transform-content.xsl");
$processor = new XSLTProcessor();
$processor->importStyleSheet($transformation);
$xpath = new DOMXPath($content);
$sectionXML = $xpath->query("section[@name='".$sectionName."']")->item(0);

echo $processor->transformToXML($sectionXML);
?> 
```

麻烦的是，无论我做什么，整个 XML 文件都会被转换，而不仅仅是我用查询选择的部分。我在这里做错了什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:02:09.790

`transformToXML`需要一个`DOMDocument`，而不仅仅是任何节点。我猜它在您当前的代码中所做的是转换您传递它的节点的“所有者文档”。

尝试创建一个新文档，然后使用`$newDoc->appendChild($newDoc->importNode($sectionXML, true))`将现有元素附加到新文档，然后转换此文档而不是原始文档。

# magento - Magento (v 1.7.0.2) - 在销售订单网格中添加“运输方式”列

> ID：13555521
> 
> 赞同：2
> 
> 时间：2012-11-25T21:09:05.763
> 
> 标签：magento

我正在尝试在位于此处的销售订单网格中为运输方式（标准、优先级、快递）添加一个新列：

/home/html/app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php

我研究了很多方法，但要么是针对旧版本的 magento，要么根本不起作用。据我了解，我需要执行以下操作：

1.  编辑 _prepareCollection()
2.  在 _prepareColumns() 中添加一个案例，如下所示：

`$this->addColumn('shipping_description', array( 'header' => Mage::helper('sales')->__('Shipping Method'), 'index' => 'shipping_description', ));`

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:58:00.447

要将运输信息添加到销售订单网格中，您必须覆盖 Mage_Adminhtml_Block_Sales_Order_Grid 类。为此创建您自己的模块。=> 在块部分的 config.xml 中
粘贴下面的 xml 代码

```
<globals>
    <block>
        <adminhtml>
            <rewrite>
                <sales_order_grid>Yourpackage_Yourmodule_Block_Sales_Order_Grid</sales_order_grid>
            </rewrite>
        </adminhtml>
    </block>
<globals> 
```

现在定义一个类 Yourpackage_Yourmodule_Block_Sales_Order_Grid 并将其放入 package_name/module_name/Block/Sales/Order/Grid.php

```
class Yourpackage_Yourmodule_Block_Sales_Order_Grid extends Mage_Adminhtml_Block_Sales_Order_Grid
{
protected function _prepareCollection()
{

    $collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()->
    joinLeft('sales_flat_order', 'main_table.entity_id=sales_flat_order.entity_id', array("shipping_desc"=>"shipping_description"));

    $this->setCollection($collection);
    return $this;
}

protected function _prepareColumns()
{
    $this->addColumnAfter('shipping_desc', array(
        'header'=> Mage::helper('sales')->__('Shipping Descr #'),
        'width' => '80px',
        'type'  => 'text',
        'index' => 'shipping_desc',
    ),"real_order_id");
    return parent::_prepareColumns();

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:40:09.817

我自己仍在寻找一个好的解决方案。但作为一种方法，我想贡献我迄今为止基于 Magento 1.7 的知识

*   我更喜欢使用 of`setCollection`而不是`_prepareCollection()`. 使用时似乎过滤等问题较少`setCollection`
*   完美的属性如此接近，却又如此遥远。shipping_description 可以在`sales_order_flat`. 不幸的是，默认集合基于`sales_flat_order_grid`. 一种可能的解决方案是通过覆盖来切换它`_getCollectionClass`

    ```
    protected function _getCollectionClass()
    {
        //return 'sales/order_grid_collection';
        return 'sales/order_collection';
    } 
    ```

    重要的是要说这会导致其他问题。例如，运输名称和帐单名称为空，因为它们的信息来自`sales_flat_order_grid`。我们可以从中得到它们，`sales_flat_order_address`但我不确定这是否会导致远离一个好的解决方案......

*   另一种方法是加入`sales_order_flat`. 这样我们就可以保留所有信息`sales_flat_order_grid`，也可以获取`shipping_method`. 这里的问题是过滤时出现的 count(*) 语句。该错误是关于一个模棱两可的`increment_id`. 目前我认为这是一个 Magento 错误，因为`increment_id`不应该与它的表结合使用。

*   不要忘记第三种方式：我们可以扩展`saled_flat_order_grid`和添加`shipping_method`，但我认为这会很苛刻。`app/code/core`只要没有人拿着枪站在你身后，就不要碰桌子；-)

到目前为止，我还没有决定走哪条路。也许我没有在这里列出另一种（更好的）方式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T15:33:25.827

此扩展程序应该为您的问题提供一个非常快速、简单的解决方案 [http://www.magentocommerce.com/magento-connect/OSdave/extension/5814/orders_grid_payment_shipping_filters](http://www.magentocommerce.com/magento-connect/OSdave/extension/5814/orders_grid_payment_shipping_filters)

# c++ - priority_queue 常量表达式

> ID：13555522
> 
> 赞同：0
> 
> 时间：2012-11-25T21:09:16.590
> 
> 标签：c++, priority-queue

在代码中看起来像这样：

比较算法

```
class PathComp{
public:
virtual bool betterThan(const PathInfo& path1, const PathInfo& path2) const{
//returns true if path1 is shorther than path2
{
}; 
```

具有重新定义运算符 () 的类

```
class QueueComp{
private:
PathComp* comp;
public:
QueueComp(PathComp* pc);
bool operator () (const pair<PathInfo, string>& item1, const pair<PathInfo, string> item2);
};

QueueComp::QueueComp(PathComp* pc):comp(pc){}
bool QueueComp::operator () (const pair<PathInfo, string>& item1, const pair<PathInfo, string>& item2){
    return comp->betterThan(item1.first, item2.first);
} 
```

使用优先队列的函数

```
list<string> Graph::shortestPath(const string& from, const string& to, PathComp* pc) const{
    const QueueComp comp(pc);
    std::priority_queue<pair<PathInfo, string>, set<pair<PathInfo, string> >, comp> q;
} 
```

编译器显示错误消息：“comp”不能出现在常量表达式中，模板参数 3 无效，之前声明中的类型无效；令牌

有谁知道问题出在哪里？感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:16:59.743

编译器已经说明了问题所在：非`constexpr`不能是模板参数。你可能打算写

```
std::priority_queue<std::pair<PathInfo, std::string>,
                    std::vector<std::pair<PathInfo, std::string> >,
                    QueueComp>
    q(comp); 
```

直接的问题是这`comp`是一个对象，但模板需要比较函数的类型。一旦解决了这个问题，下一个问题将是它`std::set<...>`不是一个可行的容器，`std::priorit_queue<...>`但`std::vector<...>`它是。

# sql - PL/SQL 游标如果没有数据 & 输出

> ID：13555523
> 
> 赞同：2
> 
> 时间：2012-11-25T21:09:25.063
> 
> 标签：sql, oracle

```
CREATE OR REPLACE procedure verify_data
IS
cursor c1 is 
select 
  e.id
from 
  table1 e 
where 
  id IN (select id from table1)
  and id in (select id from table2);
BEGIN
FOR ed in c1
   LOOP
      DBMS_OUTPUT.PUT_LINE(ed.id||ed.name);
   END LOOP;
END;
/ 
```

当我执行这个 PL/SQL 时，它输出为

14安德鲁·R·史密斯

我想问的是如何通过格式化等使其输出为正常结果。

下面是如果我在终端直接运行 select 语句会发生什么

```
 ID NAME
---------- --------------------------------------------------
        14 Andrew R. Smith 
```

**第一个问题：** 如何使我的 DBMS_OUTPUT.PUT_LINE 与终端上显示的相同。像 ID 然后下面是 ID 数据和 NAME 等。

**下一个问题：**

我想问的是

如果光标为空或没有结果，我该如何输出，我 DBMS_OUTPUT.PUT_LINE("NO RECORDS");

**感谢大家的帮助！！**

**更新：**

我做了这个

```
CREATE OR REPLACE procedure verify_data
IS
cursor c1 is 
select 
  e.id
from 
  table1 e 
where 
  id IN (select id from table1)
  and id in (select id from table2);
BEGIN
FOR ed in c1
   LOOP
      DBMS_OUTPUT.PUT_LINE(ed.id||ed.name);

 if c1%notfound then
 DBMS_OUTPUT.PUT_LINE('Okay');
  end if;

END LOOP;

END; 
```

但是当没有从 PL/SQL 获取记录时，它不会**打印 Okay 。**我在 END LOOP 之后添加了 c1%notfound

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:22:49.973

由于您使用的是 dbms_output，因此您不会像普通的 sql select 语句那样获得任何标题。

所以我知道的唯一方法是打印你自己的标题。如果你在循环之前初始化一个计数器并在循环内增加它，你可以在循环之后检查是否有结果。然后，您可以根据需要打印一条消息，如“NO RECORDS”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:25:37.770

如果要查看列名称，则必须在循环之前再添加一行：

```
DBMS_OUTPUT.PUT_LINE('col1 col2 ...'); 
```

我认为这只是一种方法。

下面的代码显示了如何检查光标：

```
if c1%notfound then
  DBMS_OUTPUT.PUT_LINE('NO RECORDS');
end if; 
```

[在这里](http://www.techonthenet.com/oracle/cursors/attributes.php)您可以找到有关游标属性的更多信息。

```
CREATE OR REPLACE procedure verify_data
IS
id number;
name varchar;
cursor c1 is 
select 
  e.id,e.name
from 
  table1 e 
where 
  id IN (select id from table1)
  and id in (select id from table2);
BEGIN

   open c1;
   fetch c1 into id,name;

   if c1%notfound then
      DBMS_OUTPUT.PUT_LINE('OK')
      EXIT; 
   else   
      DBMS_OUTPUT.PUT_LINE(id||name)
   end if;

   close c1;

END; 
```

# java - 为什么会发生“AWT-EventQueue-0”java.lang.IllegalArgumentException？

> ID：13555525
> 
> 赞同：0
> 
> 时间：2012-11-25T21:09:39.507
> 
> 标签：java, audio

我正在尝试制作一个使用 Java Sound API 的 Java 应用程序。我找到了一个源代码，当我尝试运行它时，我得到了这个异常。在 stackoverflow 中还有一个类似我的问题，但答案对我没有帮助。

该异常的 StackTrace 如下：

> 线程“AWT-EventQueue-0”java.lang.IllegalArgumentException 中的异常：没有行匹配接口 TargetDataLine 支持格式 PCM_SIGNED 44100.0 Hz，16 位，立体声，4 字节/帧，支持大端。

```
at javax.sound.sampled.AudioSystem.getLine(AudioSystem.java:476)
at prj.Recorder.<init>(Recorder.java:54)
at prj.CForm.startRecording(ChatForm.java:202)
at prj.CForm.TalkjbtnActionPerformed(ChatForm.java:482)
at prj.CForm.access$600(ChatForm.java:28)
at prj.CForm$4.actionPerformed(ChatForm.java:315)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6463)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6228)
at java.awt.Container.processEvent(Container.java:2213)
at java.awt.Component.dispatchEventImpl(Component.java:4819)
at java.awt.Container.dispatchEventImpl(Container.java:2271)
at java.awt.Component.dispatchEvent(Component.java:4645)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4816)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4476)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4406)
at java.awt.Container.dispatchEventImpl(Container.java:2257)
at java.awt.Window.dispatchEventImpl(Window.java:2677)
at java.awt.Component.dispatchEvent(Component.java:4645)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

产生此错误的源代码部分是：

```
audioFormat = new AudioFormat(44100f, 16, 2, true, true);
    DataLine.Info info = new DataLine.Info(TargetDataLine.class, audioFormat);
    TargetDataLine targetDataLine = null;

    try {
        // This Line Makes this exception
        targetDataLine = (TargetDataLine) AudioSystem.getLine(info);
        targetDataLine.open(audioFormat);
    }
    catch (LineUnavailableException e) {
        System.err.println("Error: Unable to get a recording line");
        gotrecordingline = false;
    } 
```

它在 Recorder 类中。

一些可能有帮助的更多信息：我使用的是win7-64bit，并且我的声卡在板上。

# javascript - 将数据转换成字符串js

> ID：13555528
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:10:12.327
> 
> 标签：javascript, iframe

我有一个网页，我下载并放入 iframe，以从页面中获取 div 的内容。当我从 div 获取文本并将其与字符串进行比较时，它不会将变量（现在是 iframe 中的 div 的文本）显示为字符串。我不知道网页使用什么来填充 div 的文本。如何将变量 a 转换为字符串以在 if 语句中进行比较？

```
<html>
<head>
<script type="text/javascript">
function init(){
     var frame = document.getElementById("frame");
     frame.src = "saved.html";
     var innerDoc = frame.contentDocument || frame.contentWindow.document;
     var divs = innerDoc.getElementsByTagName("div");
     if (divs.length == 83) {
          a = divs[34].innerHTML;
     }
     else {
          a = divs[33].innerHTML;
     }
     a = a.split(' ').join('');
     a = a.replace("<b>", "");
     a = a.replace("</b>", "");
     alert(a);
     if (a == "Text") {
          alert("same");
     }
}
</script>
</head>
<body onload="init();">
     <iframe id="frame"></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:19:49.283

您可以使用 textContent 代替 innerHtml [https://developer.mozilla.org/en-US/docs/DOM/Node.textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:08:00.697

我已经想出了办法做到这一点。创建一个文本输入并将变量作为值并检索文本输入对象的值。

# python - 试图了解类和对象如何相互交互 - python

> ID：13555531
> 
> 赞同：2
> 
> 时间：2012-11-25T21:10:44.707
> 
> 标签：python, class

我正在研究我的 Miller & Ranum 中的“Python Programming in Context”中的示例。

我正在完成关于类的部分，我们正在构建一个太阳系，我不清楚代码的某个部分。

```
class SolarSystem:

    def __init__(self, asun):
        self.thesun = asun
        self.planets = []

    def add_planet(self, aplanet):
        self.planets.append(aplanet)

    def show_planets(self):
        for aplanet in self.planets:
            print(aplanet)

    def num_planets(self):
        return len(self.planets) 
```

我不太确定`add_planet`and`show_planets`方法是如何工作的。在 shell 中，我使用“Planet”类创建了一些行星。行星类有更多的参数，而不仅仅是名称。它还包括名称、半径、质量、与太阳的距离和卫星数量。当我将行星对象传递给 SolarSystem 类时，self.planets 列表是否包含传递给行星对象的所有参数？如果是这样，该方法如何`show_planet`知道打印出行星的正确名称？我想我可能在这里错过了一些关键的东西，其中一个问题是添加一种方法来总结太阳系的总质量。但我不确定如何从 Planets 类访问质量的实例变量，以便我可以在 SolarSystem 类中对它们求和。

我在 github 上托管了一个存储库，因为有多个文件，我不想把它全部粘贴到这里。 [solarsystem](https://github.com/spitfiredd/solarsystem) 这样你就可以看到我在说什么。

我希望这是有道理的，请问您是否有任何不清楚的地方。谢谢

我添加了一个 total_mass 方法

```
def total_mass(self):
    total_mass = 0
    for aplanet in self.planets:
        total_mass = total_mass + get_mass(aplanet)
    return total_mass 
```

它没有用，我不知道为什么。

我得到了它！最后一行应该是：

```
total_mass = total_mass + aplanet.get_mass() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:14:16.097

`self.planets`包含所有`Planet`对象，`mass`除了`name`. 当您尝试打印行星时，它会打印行星名称的原因是`print`，为了打印某些内容，首先需要将对象转换为字符串。它可以通过将对象传递给`str`函数来做到这一点。该`str`函数通过调用`__str__`对象来转换它。如果查看 的定义`Planet`，`__str__`则返回行星的名称，因此在打印行星时，会打印其名称。

# haskell - 如何使用 Haskell 的 BSON 模块捕获简单的错误？

> ID：13555533
> 
> 赞同：0
> 
> 时间：2012-11-25T21:11:05.937
> 
> 标签：haskell, bson

我正在研究一组 Data.BSON.Document 结构，将每个结构转换为用户数据结构（我定义了用户）。拆包的功能非常简单：

```
docToUser :: Document -> Either String User
docToUser u = do
    name <- look "name" u >>= \(String t) -> return $ unpack t
    email <- look "email" u >>= \(String t) -> return $ unpack t
    token <- look "auth" u >>= \(String t) -> return $ unpack t
    Right $ User name email token 
```

但是，问题在于它实际上似乎并没有在 Either 上下文中出错。以下是一些示例运行：

```
*DB> docToUser ["name" =: "Savanni", "email" =: "savanni@nowhere.com", "auth" =: "random_token"]
Right (User {name = "Savanni", email = "savanni@nowhere.com", token = "random_token"})
*DB> docToUser ["name" =: "Savanni", "email" =: "savanni@nowhere.com", "a" =: "random_token"]
*** Exception: expected "auth" in [ name: "Savanni", email: "savanni@nowhere.com", a: "random_token"] 
```

因此，第一次运行返回一个包裹在`Right`构造函数中的用户。第二个我期待的东西，例如`Left "field not found"`，而是得到一个完整的例外。为什么会发生这种情况，而不是存储在 Either 数据结构中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:23:06.490

`look`通过一元原语表示“未找到” `fail`。您的返回类型`Either`无关紧要。您无法在`do`表达式中处理此失败；你必须写这样的东西：

```
unpackUser u = case (look "name" u, look "email" u, look "auth") of
    (Just (String name), Just (String email), Just (String token)) -> Right $ User (unpack name) (unpack email) (unpack token)
    _ -> Left $ "Missing required fields" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:43:31.087

根据我可以从[这里](http://hackage.haskell.org/packages/archive/base/4.3.0.0/doc/html/src/Control-Monad-Instances.html)找到的信息，[这里](https://stackoverflow.com/questions/5112212/is-there-no-standard-either-a-monad-instance)，以及其他一般的谷歌搜索...... Either monad 的实例*没有*实现`fail`。猜测一下，这就是为什么我得到一个例外而不是Left。我写了这个小测试来演示：

```
eitherMonad :: String -> Either String String
eitherMonad val = do
    if val == "abcd"
        then fail "val is abcd"
        else return "val is something else"

*DB> eitherMonad "abcd"
*** Exception: val is abcd
*DB> eitherMonad "efgh"
Right "val is something else" 
```

另一方面，`fail :: String -> Maybe String`真的没有返回Nothing。看起来，进行 docToUser 转换的正确方法更类似于以下内容：

```
docToUser :: Document -> Either String User
docToUser u = do
    let name  = look "name" u :: Maybe Value
    let email = look "email" u :: Maybe Value
    let token = look "auth" u :: Maybe Value
    case (name, email, token) of
        (Just (String n), Just (String e), Just (String t)) -> Right $ User (unpack n) (unpack e) (unpack t)
        (Nothing, _, _) -> Left "username not found"
        (Just (String n), Nothing, _) -> Left "email not found"
        (Just (String n), Just (String e), Nothing) -> Left "auth token not found"
        otherwise -> Left "Something else broke" 
```

我想这可能需要相当多的改进，特别是在检测和报告哪些字段失败时。但是，这似乎非常接近答案。

我认为，鉴于此，这个问题是[Is there no standard (Either a) monad instance?](https://stackoverflow.com/questions/5112212/is-there-no-standard-either-a-monad-instance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T03:02:43.710

如果你想要你`look`的`Either`上下文：

```
docToUser = do
    String name <- look "name" u
    String email <- look "email" u
    String token <- look "token" u
    return $ User (unpack name) (unpack email) (unpack token) 
```

# python - Python 2.7 GAE app.yaml 出现 404 错误

> ID：13555534
> 
> 赞同：1
> 
> 时间：2012-11-25T21:11:34.293
> 
> 标签：python, google-app-engine, python-2.7, yaml

下面是我的`app.yaml`文件的代码。如果我去`localhost:8080/`我的`index.app`负载正确。如果我去`localhost:8080/index.html`我得到一个 404 错误。如果我转到任何其他页面，例如`localhost:8080/xxxx`正确`not_found.app`加载。为什么我收到此`/index\.html`案例的 404 错误？

谢谢！

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /index\.html
  script: index.app

- url: /
  script: index.app

- url: /assets
  static_dir: assets

- url: /*
  script: not_found.app

libraries:
- name: jinja2
  version: latest 
```

来自 index.py 的代码

类 MainPage(webapp2.RequestHandler):

定义获取（自我）：

模板 = jinja_environment.get_template('index.html')

self.response.out.write(template.render(template_values))

****app = webapp2.WSGIApplication([('/', MainPage)], debug=True)****

 **修复位于粗体文本中！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T21:25:38.730

看起来您的`app`变量 in`index`没有`index.html`. 例如：

```
app = webapp2.WSGIApplication([('/', MainPage)]) 
```

如果您的应用程序被路由到`index`，它将查看定义的处理程序并尝试找到与`/index.html`. 在这个例子中，如果你去`/`，它会正常工作，因为该处理程序已定义；但是如果你去`index.html`，GAE 不知道调用哪个类，因此它返回一个 404。作为一个简单的测试，试试

```
app = webapp2.WSGIApplication([
    ('/', MainPage),
    ('/index\.html', MainPage)
]) 
```

由于这表面上是任何输入`index.html`或任何其他排列的处理程序`index.`，因此您可以使用类似的东西来捕获更广泛的案例（因为在内部，您可以在`/`需要时使用路由）：

```
app = webapp2.WSGIApplication([
    ('/', MainPage),
    ('/index\..*', MainPage)
]) 
```**

# azure - Azure 和缓存 XML

> ID：13555536
> 
> 赞同：0
> 
> 时间：2012-11-25T21:11:48.510
> 
> 标签：azure

我有一个不断更新的 XML 文件，但是无论我做什么，我都无法获得更新的副本。我总是在几个小时内看到它的缓存版本。有什么办法可以关闭 xml 的缓存？我正在使用天蓝色网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:19:40.040

在这个答案中，我假设您正在谈论输出缓存。为了禁用 *.xml 的输出缓存，只需在 web.config 中添加一个[缓存配置文件：](http://www.iis.net/configreference/system.webserver/caching/profiles/add)

```
<configuration>
   <system.webServer>
      <caching>
         <profiles>
            <add extension=".xml" policy="DontCache" kernelCachePolicy="DontCache" />
         </profiles>
      </caching>
   </system.webServer>
</configuration> 
```

# c# - 哪种方法对性能的影响最小？从文本文件中读取还是从应用程序变量中读取？

> ID：13555543
> 
> 赞同：1
> 
> 时间：2012-11-25T21:12:36.880
> 
> 标签：c#, asp.net, performance, iis

我正在尝试每天为 10.000 个用户设计一个 Web 应用程序。一些基本部分，例如今天的问题/民意调查等，每天会自动更改一次（只是给你一个“问题”的例子）。

为了使代码尽可能保持静态，我想将投票/问题保留在 HTML 文件之外。

我在想，因为它只有一个或两个问题，我可以轻松地将表单数据存储在某个地方的单个字符串中。

我的选择是：

1.  Application 变量，让每个用户“会话”从 Application["todays_question"] 中读取
2.  从文本文件中读取，再次让每个用户“会话”使用这行文本中的数据进行初始化。
3.  也可以使用 SQL，但我认为这纯粹是矫枉过正，为单个表中的 1 条记录连接和初始化整个数据库。

所以我的问题是，哪个对网络服务器的影响最小？

1.  应用程序变量，它们是慢还是快？
2.  从文件系统读取文件听起来很慢，但是是这样吗？
3.  对静态站点使用 SQL（这意味着在本地使用 SQL 实例来保持速度）对我来说听起来也很慢。

我是否监督过“真正的快速版本”？

我曾想过将实际表单放入某种静态 javascript 插件中，但我仍然需要服务器验证，这就是我想到性能问题的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:09:04.910

您还可以使用静态全局变量进行非常快速的检索。因此，从文件、dbase 或任何应用程序启动级别（global.asax）加载您的数据，并将其存储在静态全局变量中，以便从应用程序的“任何地方”快速检索。这被描述为“最佳实践”。欲了解更多信息： http: [//www.dotnetperls.com/global-variables-aspnet](http://www.dotnetperls.com/global-variables-aspnet)

# javascript - 如何在保持纵横比的同时调整图像客户端的大小和裁剪

> ID：13555545
> 
> 赞同：0
> 
> 时间：2012-11-25T21:12:59.603
> 
> 标签：javascript, jquery, css

我想将图像缩放和裁剪到设定的宽度*和*高度*，同时*保持浏览器中的纵横比，因为图像是从其他地方（具有固定大小的 facebook 图像对象）拉出来的。

在使用 CSS 和 Javascript 的浏览器中是否有“标准”方法来执行此操作？我可以更改图像的高度/宽度并使用顶部/左侧来使某些东西正常工作。

调整图像对象的大小是否是进行更改的方式，是否有裁剪和调整图像大小的标准方法（如何计算裁剪）？

我希望 jQuery 会有一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:20:18.613

看看这篇文章： [jQuery resize to aspect ratio](https://stackoverflow.com/questions/1682495/jquery-resize-to-aspect-ratio)

据我所知，您必须手动完成。通过获取当前大小获取纵横比并设置新高度并根据纵横比计算新宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:20:45.947

您可以按照您所说的调整宽度/高度的图像大小，并且可以使用`clip` [http://www.w3.org/TR/CSS21/visufx.html#clipping在 CSS 中裁剪图像](http://www.w3.org/TR/CSS21/visufx.html#clipping)

如果这不能满足您的要求，当然可以使用 JavaScript 对图像执行高级处理`canvas`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:35:40.537

我在 Google Code 上找到了以下 jQuery 插件。它似乎工作得很好，但我担心它的支持/使用。只需[两次修订](http://code.google.com/p/resize-crop/source/list)和[30 次左右的下载](http://code.google.com/p/resize-crop/downloads/list)。

为了不支持任何脚本，我在 img 标签上设置了高度和宽度属性。然后准备好我从标签中删除两个属性并使用插件调整大小。效果是图像在加载时大小正确，但可能需要一些时间来校正纵横比 - 而不是图像溢出设计。

[方便的 jQuery 插件，用于统一调整大小和裁剪。](http://code.google.com/p/resize-crop/)

**他们的自我介绍**

> 调整大小和裁剪
> 
> 方便的 jQuery 插件，用于客户端统一调整大小和裁剪。非常适合具有相似大小的头像和图像（更多不同的大小 - 更大的带宽开销）。
> 
> 理想用途 例如，您可以使用插件来转换 Facebook 用户的个人资料图片（个人资料头像）。它们的大小相似但不相同，但如果您想在网格中显示它们，您可能希望它们具有相同的高度（或/和宽度）。
> 
> 请参阅猫的示例，以更好地了解 Resize & Crop 可以为您做什么。

# haskell - 如何获得依赖类型间隔的长度？

> ID：13555547
> 
> 赞同：5
> 
> 时间：2012-11-25T21:13:12.710
> 
> 标签：haskell, dependent-type

假设我有一个数据类型

```
data Interval :: Nat -> Nat -> * where
  Go :: Interval m n -> Interval m (S n)
  Empty :: SNat n -> Interval n n 
```

这些是半（右）开区间。`Nat`是标准的归纳自然数，`SNat`是相应的单例。

现在我想得到一个`Nat`给定间隔长度的单例：

```
intervalLength :: Interval n (Plus len n) -> SNat len
intervalLength Empty = Z
intervalLength (Go i) = S (intervalLength i) 
```

这不起作用，因为该`Plus`函数不是单射的。我可能可以像这样定义它

```
intervalLength :: Interval m n -> SNat (Minus n m) 
```

但我猜这需要一些引理（和额外的约束）。此外，我的间隔以前一种形式出现。

背景：我尝试在 Omega 中执行此操作，但没有成功（[我提交了 omega 错误](https://code.google.com/p/omega/issues/detail?id=109)）

此外，如何使用修改后的类型检查器来破解这些问题？供应的 RHS 能否对 LHS 模式的类型方程提供关键提示，从而消除非内射性？

Agda 程序员如何解决这些问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T22:30:09.733

这是我的程序版本。我在用着

```
{-# LANGUAGE GADTs, DataKinds, KindSignatures, TypeFamilies #-} 
```

我有`Nat`它的单身人士

```
data Nat = Z | S Nat

data SNat :: Nat -> * where
  ZZ :: SNat Z
  SS :: SNat n -> SNat (S n) 
```

你的`Interval`类型对我来说更熟悉“小于或等于”的“后缀”定义：“后缀”，因为如果你从数字升级到列表并`S`用一个元素标记每个列表，你就会有一个定义列表后缀。

```
data Le :: Nat -> Nat -> * where
  Len :: SNat n -> Le n n
  Les :: Le m n -> Le m (S n) 
```

这是补充。

```
type family Plus (x :: Nat) (y :: Nat) :: Nat
type instance Plus Z     y  = y
type instance Plus (S x) y  = S (Plus x y) 
```

现在，您的难题是计算`Les`某个`Le`值中的构造函数，提取单例以获取其索引之间的差异。与其*假设*我们正在使用一些`Le n (Plus m n)`并尝试计算 a `SNat m`，我将编写一个函数来计算*任意* `Le m o`-indices 之间的差异并*建立*与 的连接`Plus`。

这是 的加法定义`Le`，提供了单例。

```
data AddOn :: Nat -> Nat -> * where
  AddOn :: SNat n -> SNat m -> AddOn n (Plus m n) 
```

我们可以很容易地确定这`Le`意味着`AddOn`。一些模式匹配`AddOn n o`显示`o`为`Plus m n`一些`m`，并为我们提供我们想要的单例。

```
leAddOn :: Le m o -> AddOn m o
leAddOn (Len n) = AddOn n ZZ
leAddOn (Les p) = case leAddOn p of AddOn n m -> AddOn n (SS m) 
```

更一般地说，我建议制定依赖类型的编程问题，以尽量减少您计划匹配的类型索引中已定义函数的存在。这避免了复杂的统一。（警句用于将此类函数着色为绿色，因此建议**“不要触摸绿色粘液！”**。）`Le n o`事实证明（因为这是 的重点`leAddOn`），信息量不亚于 类型`Le n (Plus m n)`，但它更容易匹配。

更一般地说，设置一个从属数据类型来捕获您的问题的逻辑，但使用起来绝对是可怕的，这是一种非常正常的体验。这并不意味着捕获正确逻辑的所有数据类型都将绝对难以使用，只是您需要更加仔细地考虑定义的人机工程学。让这些定义变得整洁并不是很多人在普通函数式编程学习经验中学到的技能，所以期待攀登一个新的学习曲线。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T23:26:18.117

我在伊德里斯尝试过这个。虽然我同意 pigworker 重新制定问题的建议，但您必须这样做才能使您的定义通过 Idris 类型检查器。首先，单例 Nats：

```
data SNat : Nat -> Set where
   ZZ : SNat O
   SS : SNat k -> SNat (S k) 
```

然后，区间的定义：

```
data Interval : Nat -> Nat -> Set where
  Go : Interval m n -> Interval m (S n)
  Empty : SNat n -> Interval n n 
```

您想要的 intervalLength 定义看起来有点像这样：

```
intervalLength : Interval n (plus len n) -> SNat len
intervalLength (Empty sn) = ZZ
intervalLength (Go i)     = SS (intervalLength i) 
```

但是你会遇到麻烦，因为正如你所说`plus`的不是单射的。我们可以通过`len`显式地进行额外的模式匹配来到达某个地方——然后统一可以取得一些进展：

```
intervalLength : Interval n (plus len n) -> SNat len
intervalLength {len = O}   (Empty sn) = ZZ
intervalLength {len = S k} (Go i)     = SS (intervalLength i) 
```

这很好，并且通过了类型检查器，但不幸的是它不相信该功能是完整的：

```
*interval> :total intervalLength
not total as there are missing cases 
```

缺少的案例是这个：

```
intervalLength {len = O}   (Go i)     = ?missing 
```

如果你尝试这个，并询问 REPL 的类型`missing`，你会看到：

```
missing : (n : Nat) -> (i : Interval (S n) n) -> SNat O 
```

现在，我们知道类型`Interval (S n) n`是空的，但是类型检查器却没有。不知何故我们需要写`badInterval : Interval (S n) n -> _|_`，然后我们可以说：

```
intervalLength {len = O}   (Go i)     = FalseElim (badInterval i) 
```

我将把定义`badInterval`作为练习:-)。这不是特别棘手，但不得不这样做有点无聊 - 有时很难避免不得不使用这种类型的类型，但实施`badInterval`支持 pigworker 不这样做的建议！

# python - AttributeError：“NoneType”对象没有“附加”属性

> ID：13555551
> 
> 赞同：2
> 
> 时间：2012-11-25T21:13:28.743
> 
> 标签：python

python 将列表作为参数传递给函数时，我遇到了一个奇怪的问题。这是代码：

```
def foobar(depth, top, bottom, n=len(listTop)):
    print dir(top)
    print top.append("hi")
    if depth > 0:
        exit()
    foobar(depth+1, top.append(listTop[i]), bottom.append(listBottom[i]))

top = bottom = []
foobar(0, top, bottom) 
```

它说“AttributeError: 'NoneType' 对象没有属性 'append'”，因为 foobar 中的 top 是 None 尽管 dir(top) 打印了类型列表的完整属性和方法列表。那么怎么了？我只是想将两个列表作为参数传递给这个递归函数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T21:15:48.973

您将*结果*传递`top.append()`给您的函数。`top.append()`返回无：

```
>>> [].append(0) is None
True 
```

您需要`.append()`单独调用，然后传入`top`：

```
top.append(listTop[i])
bottom.append(listBottom[i])
foobar(depth+1, top, bottom) 
```

请注意，`n=len(listTop)`函数中的参数是多余的，并且只执行一次，即在您*创建*函数时。每次调用该函数时都不会对其进行评估。无论如何，您都可以从您在此处发布的版本中安全地省略它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T21:15:07.367

`top.append(listTop[i])`在原地工作并返回`None`

# redis - 我怎样才能得到最后一个redis错误

> ID：13555552
> 
> 赞同：1
> 
> 时间：2012-11-25T21:13:34.577
> 
> 标签：redis, servicestack

我尝试为 ServiceStack Redis 客户端实现 Truncate 扩展。

```
 public void Truncate<T>()
    {
        using (var r = RedisManager.GetClient().As<T>())
        {
            r.DeleteAll();
        }
    } 
```

但是在 truncate 之前必须删除它，它不起作用。我可以一个一个地插入记录（所以服务器没有问题）所以我想调试..我想知道为什么我不能删除记录？如何通过 ServiceStack RedisClient 或其他方式在服务器上获取最后一个错误？

Ps：我使用的是 64 位版本：[https ://github.com/dmajkic/redis/downloads](https://github.com/dmajkic/redis/downloads)

编辑： DeleteAll 只删除 idx (autoincrementid) 记录:) 棘手。但问题仍然存在。如何从 redis 服务器获取最后一个错误？

# c++ - 无法将参数从“int”转换为“int&”

> ID：13555556
> 
> 赞同：17
> 
> 时间：2012-11-25T21:14:10.557
> 
> 标签：c++, visual-studio-2010

我正在学习复数 C++ 课程，其中包含以下代码：

```
#include <iostream>

template <class T>
T max(T& t1, T& t2)
{
    return t1 < t2 ? t2 : t1;
}

int main()
{
    std::cout << "Max of 33 and 44 is " << max(33, 44) << std::endl;

    return 0;
} 
```

我输入了这段代码，但与课程代码不同，我收到一条错误消息：

```
C2664: 'max' : cannot convert parameter 1 from 'int' to 'int &' 
```

课程中的代码是用 Visual Studio Express 2010 编写的，而我的代码是用 Visual Studio Ultimate 2010 编写的。

* * *

编辑

感谢大家（甚至是 Kate Gregory 本人）提供答案并澄清一切。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-25T21:16:49.727

因为文字（和一般的右值）不能通过非常量引用传递（因为如果被调用者可以更改它们就没有意义了）。通过值或 const 引用传递：

```
template <class T>
T max(const T& t1, const T& t2)
{
    return t1 < t2 ? t2 : t1;
} 
```

或者

```
template <class T>
T max(T t1, T t2)
{
    return t1 < t2 ? t2 : t1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T21:16:38.417

33 和 44 都是右值；它们通过值而不是通过引用传递给函数。编译器无法将这两个转换为预期的类型`int &`。使用变量（左值），因为它们可以通过引用传递：

```
int a = 33, b = 44;

max(a, b); // 44 
```

由于您在这里 ( `int`) 仅处理基本类型，因此通过引用传递是多余的。按值传递会导致副本，但差异可以忽略不计：

```
template <class T>
T max(T t1, T t2); 
```

在这里，我们可以同时传递右值和左值。但是你*有*可能传入一个类类型的对象。在这种情况下，建议通过引用传递。

但是对于我们不想要副本并且想要左值和右值的情况，我们可以通过`const`引用传递：

```
template <class T>
T max(T const &t1, T const &t2); 
```

在 C++11 中，您可以通过*通用引用*传递参数，以便我们可以绑定 glvalues：

```
template <class T>
T max(T&& t1, T&& t2);

int main()
{
    int a{0}, b{0};

    max(a, b);
    max(1, 2);
} 
```

如果您想在原始代码中保留左值引用语法，可以使用这个左值 shim：

```
template<typename T>
T& lvalue(T&& t)
{
    return t;
}

int main()
{
    max(lvalue(1), lvalue(2));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T21:54:04.870

这里的答案原来在于您在测试中没有使用的不相关代码。绝对我的小 max() 应该按值或 const-ref 取值，这只是我会尽快修复的脑误。

但完整的演示代码运行良好。那是因为它包含更多标头，其中之一带来了 xutility，因此`std::max`. 这导致我没有注意到我`max`没有被使用。我会用一个名字重做演示，`biggest`以消除这种情况再次发生。同时，是的，如果你想通过引用将文字传递给函数，它们需要是 const ref。我知道这一点，但是在编写测​​试工具时没有想到，然后当糟糕的代码似乎可以工作时就被愚弄了。我应该更仔细地重新阅读代码：感谢您提醒我注意。（感谢您参加这门课程，希望对您有所帮助。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-25T21:16:25.187

您不能将临时值作为`T&`. 由于您不更改参数，请`const T&`改用

顺便说一句，有内置`max`功能

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-25T21:17:39.220

整数文字不能作为非常量引用传递。此外，您的`max`函数可以使用`const`引用，因此请适当地标记它们：

```
T max(const T& t1, const T& t2) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-25T21:16:25.127

如果您通过引用使用参数定义函数，则只能对所述参数使用变量名 - 并且您尝试使用数字。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-28T05:15:07.037

小注。您可以使用函数“ **max** ”的初始代码。尝试将呼叫从 更改`max(34, 44)`为`max<const int>(34,44)`。有时它可能很有用。

```
#include <iostream>

template <class T>
T max(T& t1, T& t2)
{
   return t1 < t2 ? t2 : t1;
}
int main()
{
   std::cout << "Max of 33 and 44 is " << max<const int>(33, 44) << std::endl;
   return 0;
} 
```

# c - 从链表中添加和删除节点

> ID：13555558
> 
> 赞同：0
> 
> 时间：2012-11-25T21:14:25.443
> 
> 标签：c

2个问题：

1.  我正在编写一个函数来将节点添加到列表中。目前我有这样的：

    ```
    void addList( NODE_TYPE** head, NODE_TYPE** d_name )
    {
        (*d_name)->next = *head;
        *head = *d_name;
    } 
    ```

    在里面`main()`，我这样称呼它：

    ```
    addList( &head, &node_3); 
    ```

    我的问题是，是否有另一种方法可以使用函数原型来做到这一点，例如：

    ```
    void addList( NODE *head, NODE *node); 
    ```

    ?

    这是一个类问题，我不明白如何使用上述函数原型进行前置，因为调用函数只会传入地址的值，调用者将无法看到对头部所做的任何更改，也节点。

2.  我不确定我的 deleteList 函数是否正确。我想要它，以便温度指向头部（锚点）指向的位置。然后 next_free 指向与头部链接的第二个节点。然后我释放第一个节点。然后重复第二，第三等等，直到所有这些都被释放。

    ```
    void deleteList( NODE_TYPE** head )
    {
        NODE_TYPE* temp = *head;
        NODE_TYPE* next_free = NULL;

        while ( temp->next != NULL )
        {
            next_free = temp->next;
            free( temp );
            temp = next_free;
        }

        *head = NULL;
    } 
    ```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:17:50.940

要回答第 1 个问题，您可以使用所谓的*dummy head*。那是一个空节点，其`next`指针指向列表中的第一个元素。因此，您将空列表创建为单个节点，然后传递该节点，知道它的指针不会改变。如果您打算将指向列表头部的指针存储在多个位置但允许列表更改，这很有用。

对于数字 2，它几乎是正确的，但您要确保它`*head`最初不是 NULL。此外，它不会删除仅包含一个元素的列表。改为这样做：

```
while ( temp != NULL ) 
```

并让其他一切保持不变。

哦，关于你的第一个问题的另一个说明。当你这样说时你错了：

> 调用函数只会传入地址的值，调用者将无法看到对 head**和 node**所做的任何更改。

节点的内容可以改变。您不需要指向它的双指针。双指针意味着*指针*可以改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:42:33.360

您可以通过直接分配给 *head 来避免额外的“next_free”变量：

```
void deleteList( NODE_TYPE **head )
{
    NODE_TYPE *temp;

    while ( (temp = *head) )
    {
        *head = temp->next;
        free( temp );
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:02:50.947

**“我的问题是，是否有另一种方法可以使用函数原型来做到这一点，例如：void addList(NODE *head, NODE *node)”**

好吧，你是对的。如果您只是“**按值传递**”，您反映的更改将不适用于原始子例程。你可以做的是：

```
Node_type * addList(Node_type *head, Node_type *d_name)
{
d_name->next=head;
return d_name;
} 
```

在调用者函数中以这种格式调用

```
 head = addList( head, node_3); 
```

这将反映您希望看到的变化

**第二季度**

只要把条件

**而（临时！= NULL）**

这将处理存在**空列表**或**具有单个节点的列表的情况**

# build - 我应该只在 Windows 下开发、测试和调试 Mono 应用程序时使用 MSBuild/.NET

> ID：13555559
> 
> 赞同：0
> 
> 时间：2012-11-25T21:14:39.093
> 
> 标签：build, msbuild, mono, development-environment, xbuild

在 Windows 下开发、测试和调试 Mono 应用程序时，我应该只使用 MSBuild/.NET（以及[此处](http://jpobst.blogspot.co.at/2009/06/mono-in-visual-studio-2010.html)解释的单声道配置文件）还是应该（也）使用 XBuild/Mono？

我问的原因是因为我在 Windows 环境中挖掘了很多关于 Mono 的开发设置，并且使用 MSBuild / .Net 进行开发和调试似乎受到青睐（例如，请参见[此处）。](https://stackoverflow.com/a/802613/1249506)

> 您只需在 Visual Studio 中构建应用程序，然后在 Mono 下而不是在 .NET 下运行它们。二进制文件应该是兼容的......但您需要确保不使用 Mono 中不可用的任何库 - 请参阅 Mono 应用程序兼容性指南。

我想知道这是否真的是要走的路？由于 XBuild 和 Mono 也在 Windows 下运行，因此使用 Mono 设置来构建和调试它不是更好吗？也可以[使用 Visual Studio 调试 XBuild 编译的程序集，所以这不是不这样做的理由。](https://stackoverflow.com/a/13518475/1249506)我猜在仅使用 MSBuild/.NET 的开发阶段可能不会出现错误。当这些错误稍后在其他操作系统（如 Linux）上的部署和测试阶段出现时，这不是很糟糕吗？还是 MSBuild / XBuild 之间的差异并不显着，我不应该为此烦恼？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:34:22.540

我会推荐两者。过去，我配置 Team City 以使用 Windows 代理上的 msbuild 和 Linux/OSX 代理上的 xbuild 来构建我的解决方案。这样我可以确定它总是对两者都有效。我相信您可以找到某种方法导致 xbuild 失败而 msbuild 不会失败，但您可能在导致它们之前不会知道这些东西是什么。分布式 CI 对于跨平台工作非常方便。

# php - 在 CakePHP 应用程序中使用 CakeResponse

> ID：13555561
> 
> 赞同：1
> 
> 时间：2012-11-25T21:15:19.967
> 
> 标签：php, cakephp, http-headers, cakephp-2.0, httpresponse

我正在尝试在我的 CakePHP 2.2 应用程序中使用[CakeResponse 。](http://book.cakephp.org/2.0/en/controllers/request-response.html#cakeresponse)当我使用它时，我可以在页面标题中看到我的响应。还行吧：

```
header('Last-Modified: '.gmdate('D, d M Y H:i:s') . ' GMT'); 
```

但是当我这样做时，我在标题中看不到它。

```
$this->response->header('Last-Modified:', gmdate('D, d M Y H:i:s') . ' GMT');
$this->response->header('Last-Modified', gmdate('D, d M Y H:i:s') . ' GMT'); 
```

这也无济于事：

```
$this->response->modified(gmdate('D, d M Y H:i:s') . ' GMT'); 
```

我应该做更多的事情来使用响应对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:00:56.127

尝试不使用`:`，如下所示：

```
$this->response->header('Last-Modified', gmdate('D, d M Y H:i:s') . ' GMT'); 
```

# objective-c - 验证包含括号的字符串

> ID：13555565
> 
> 赞同：0
> 
> 时间：2012-11-25T21:15:50.083
> 
> 标签：objective-c, ios, xcode

我对包含括号的字符串有疑问。让我假设一个字符串变量 cityname 是@"Boston (Massachusetts)。我想知道为什么 Xcode 不能识别括号内的字符串？在下面的代码中，只有第一种情况为真。

```
// cityname = @"Boston (Massachusetts)"
if ([cityname rangeOfString:@"Boston"].location==!NSNotFound){
// true
}

if ([cityname rangeOfString:@"Massachusetts"].location==!NSNotFound){
// false
}

if (cityname isEqualToString:@"Boston (Massachusetts)"){

} 
```

我怎样才能做到这一点，以便即使使用括号（以及撇号也可以？）也可以验证整个字符串？

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:19:30.007

这与括号无关。你想要`[cityname rangeOfString:@"Massachusetts"].location != NSNotFound`，没有`[cityname rangeOfString:@"Massachusetts"].location == !NSNotFound`。他们做完全不同的事情。

# ios - 应用程序的版本号，应用程序名称何时更改？

> ID：13555568
> 
> 赞同：-3
> 
> 时间：2012-11-25T21:16:12.563
> 
> 标签：ios

我想通过更新更改我的应用名称，版本号是 1.0 还是下一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:28:40.720

假设您正在谈论应用商店中已经存在的应用，并且您即将在 iTunes Connect 中使用新的二进制文件和新名称进行更新，则版本号由您决定。但该应用程序`Info.plist`必须有*下一个*，否则将被拒绝。因此，请保持简单并在两者中使用相同的编号方案，例如使用`1.1.0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:26:38.683

您要做的是遵循版本编号的约定。一般是major.minor.revision。更改名称时没有真正的标准，因此完全取决于您。你可以说它是某种修订，或者你可以说它是一个新的应用程序并从 1.0 开始。以下是版本编号的链接，您可以查看。

[版本编号](http://en.wikipedia.org/wiki/Software_versioning)

# ruby-on-rails-3 - 通过Rails 3中的多态关系获取偏执删除对象

> ID：13555574
> 
> 赞同：6
> 
> 时间：2012-11-25T21:16:43.860
> 
> 标签：ruby-on-rails-3, polymorphic-associations, soft-delete

我有一个 Audit 类，用于通过属性存储操作。

```
class Audit < ActiveRecord::Base
  attr_accessible :activity
  belongs_to :by, :polymorphic => true
  belongs_to :on, :polymorphic => true
  attr_accessible :by, :on
end 
```

:by 和 :on 的多态关联用于存储应审计的任何类型的对象。主要是因为多态在模式中被分解为类型和 id，因此应该能够存储我所有的模型对象。

```
 create_table "audits", :force => true do |t|
    t.string   "activity"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "on_id"
    t.string   "on_type"
    t.integer  "by_id"
    t.string   "by_type"
  end 
```

我遇到的问题来自所有被审计的对象也都在使用 paranoia gem。paranoia gem 在每个模型表中引入了一个 deleted_at 列，该列通过其 default_scope 来检查该模型上的每个查询，default_scope 设置为“where（deleted_at is null）”。paranoia gem 还提供了一个 .with_deleted 方法，它允许通过打开 default_scope 进行直接查询，结果还返回已被偏执/软删除的对象。

但是，如果我有任何已删除的项目，我会尝试使用列出的所有已审核项目。

```
Audit.all 
```

我不知道如何告诉 Rails 为每个添加 .with_deleted 调用的多态 :by 和 :on 对象运行查找查询。我的猜测是，rails 通过以下方式查找多态关系的对象

```
eval(type).find(id) 
```

在我的情况下，这会给我应用了偏执狂宝石的 default_scope 的对象。

我试图在 Audit 中覆盖 self.find_by_sql 但没有运气。我陷入了一些 Arel 方法中，我需要进一步阅读这些方法才能继续前进。

我看到了以下解决方案，但我不知道该怎么做。

1.  覆盖多态查找。如何？
2.  在评估之前将原始 SQL 作为字符串获取，并 sub/gsub Where deleted_at is null 部分。

任何和所有关于如何解决这个问题的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-20T23:05:16.747

试试这个：

```
def on!
  if on_type && on_id
    on_type.constantize.with_deleted.find(on_id)
  end
end 
```

如果记录已被真正删除，这将引发 ActiveRecord::RecordNotFound 错误，否则将返回“on”对象，即使它被标记为已删除。

# c# - Entity Framework 5 代码优先配置封装

> ID：13555578
> 
> 赞同：1
> 
> 时间：2012-11-25T21:17:30.160
> 
> 标签：c#, ef-code-first, entity-framework-5

我想知道（我讨厌使用“最佳实践”这个词）——但这是一种处理配置的好方法，因为它封装了 AAA 的配置？

我看到很多示例，其中`OnModelCreating`包含大量用于创建数据库的指令列表，而长方法告诉我某些事情并不安静。

```
public class MyContext : DbContext
{
    public MyContext() : base("name=MyDb") { }

    public DbSet<AAA> AAAs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Configurations.Add(new AAA.Configuration());
    }
} 
```

并且有一个位置的类它的配置

```
public class AAA
{
    [Key] 
    public int Id { get; set; }

    [Required] 
    public string Details { get; set; }

    internal class Configuration : EntityTypeConfiguration<AAA>
    {
        public Configuration()
        {
            // Set all the funky stuff here
        }
    }
} 
```

我知道可能没有***一种正确的方法***。在我投入大量时间和眼泪之前，我正在寻找一个原因，为什么这绝对是世界上最糟糕的想法，或者是否有办法做类似的事情？

***编辑***

一位同事建议将此作为使用静态属性的替代方法

```
public class AAA
{
    [Key] 
    public int Id { get; set; }

    [Required] 
    public string Details { get; set; }

    public static EntityTypeConfiguration<AAA> Configuration
    {
        get { return new AAAConfiguration(); }
    }

}

internal class AAAConfiguration : EntityTypeConfiguration<AAA>
{
   public AAAConfiguration()
   {
            // Set all the funky stuff here
   }
} 
```

我喜欢这个，因为它在配置实例化方面给了我更多的灵活性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:38:19.000

这取决于。到目前为止，我可以说我不关心数据库的生成。它很好并且具有我不关心的优点（独立于平台）。它限制了完全使用 SQL Server - 所以它回到了数据库项目。

这是一个妥协的世界，而且 - 抱歉 - 最佳实践伴随着大量的限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T21:43:00.703

我个人认为您采取的方法没有问题。我最近刚刚解决了一个类似的难题，唯一的区别是我的`EntityTypeConfiguration<T>`数据层中有类，而不是我的模型中。我也在做这些映射类中的所有映射逻辑；这意味着我不必使用 EF 特定属性来装饰我的模型，使它们完全不知道持久性。

使用您的方法，在该`OnModelCreating`方法中，您只需要为每个要保留的类设置一行，此外，如果您不清除 EF 创建的缓存，则此代码仅被命中一次，因此它只是一种一次性的引导程序，因此长方法不是问题吗？

我认为您的方法很好，但我相信对此主题会有一些不同的看法。

# javascript - 触发了哪个 jQuery 回调？

> ID：13555582
> 
> 赞同：2
> 
> 时间：2012-11-25T21:18:01.783
> 
> 标签：javascript, jquery, ajax, jquery-callback

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

假设您在这样的 for 循环中创建了一些 ajax 请求：

```
$(function(){
    for(var i=0;i<10;i++){
      $.ajax({
        url : '/',
        success : function(){
          console.log('callback '+i+' fired!');
        }
      });
    }
}); 
```

当然，因为回调是异步执行的，所以每次回调都会记录“回调 10 触发”。问题是：你怎么知道触发了哪个回调？

[jsfiddle](http://jsfiddle.net/rRwgW/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T21:20:09.580

匿名自调用函数将解决这个闭包问题：

```
$(function(){
    for(var i=0;i<10;i++){
      (function(i) {
          $.ajax({
            url : '/',
            success : function(){
              console.log('callback '+i+' fired!');
            }
          });
      })(i);
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T21:21:29.153

使用立即调用的函数表达式创建范围：

```
$(function(){
    for(var i=0;i<10;i++){
      (function(i){
        $.ajax({
          url : '/',
          success : function(){
            console.log('callback '+i+' fired!');
          }
        });
      })(i);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T21:21:02.287

通过将当前值`i`作为闭包的一部分传递：

```
$(function(){
    for(var i=0;i<10;i++){
      $.ajax({
        url : '/',
        success : (function(i){
          return function(){console.log('callback '+i+' fired!');}
        })(i)
      });
    }
}); 
```

这是一个演示：http: [//jsfiddle.net/rRwgW/4/](http://jsfiddle.net/rRwgW/4/)

注意：您实际上不需要将整个 ajax 调用包装在 IIFE 中，只需将需要引用`i`.

# devexpress - Devexpress 网格的问题

> ID：13555584
> 
> 赞同：0
> 
> 时间：2012-11-25T21:18:07.030
> 
> 标签：devexpress

我正在使用带有 editform 模板的 devexpress 网格。当我单击编辑按钮时，将显示此编辑表单。编辑表单在表单底部有一个更新和取消按钮。打开此编辑表单时，我想将焦点设置在取消按钮上。打开此编辑表单时，是否可以将焦点设置在更新/取消按钮上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T19:19:47.113

请使用 ASPxGridView 内联编辑“标签顺序”报告中描述的方法。

> [http://www.devexpress.com/Support/Center/Question/Details/Q218510](http://www.devexpress.com/Support/Center/Question/Details/Q218510)

如果您将自己的编辑器放置在 EditForm 模板中，请根据您的要求设置每个编辑器的 TabIndex 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:19:27.980

您可以使用模板编辑表单并为按钮指定 TabIndex 属性：

我附上了示例供您参考。

如果有任何问题，请随时提问。

```
 <Templates>
                                        <EditForm>
                                            <table style="width: 100%">
                                                <tr>
                                                    <td align="right">
                                                        <dx:ContentControl ID="ContentControl" runat="server" SupportsDisabledAttribute="True">
                                                            <dx:ASPxGridViewTemplateReplacement runat="server" ID="Editors" ReplacementType="EditFormEditors" />
                                                        </dx:ContentControl>
                                                        <table style="width: 100%;">
                                                            <tr>
                                                                <td align="right" style="padding-right: 20px">
                                                                    <table>
                                                                        <tr>                                                                    
                                                                            <td>
                                                                                <dx:ASPxButton ID="btnUpdate" runat="server" CssFilePath="~/App_Themes/Office2010Blue/{0}/styles.css" TabIndex="0"
                                                                                    AccessKey="S" AutoPostBack="False" Text="Update" Width="60px" ClientSideEvents-Click='<%# "function(s, e) { " + Container.UpdateAction + " }" %>'
                                                                                    CssPostfix="Office2010Blue" SpriteCssFilePath="~/App_Themes/Office2010Blue/{0}/sprite.css" >                                                                                
                                                                                </dx:ASPxButton>
                                                                            </td>
                                                                            <td>
                                                                                <dx:ASPxButton ID="btnCancel" runat="server" CssFilePath="~/App_Themes/Office2010Blue/{0}/styles.css" TabIndex="1"
                                                                                    AutoPostBack="False" Text="Cancel" Width="60px" ClientSideEvents-Click='<%# "function(s, e) { " + Container.CancelAction + " }" %>'
                                                                                    CssPostfix="Office2010Blue" SpriteCssFilePath="~/App_Themes/Office2010Blue/{0}/sprite.css">
                                                                                </dx:ASPxButton>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </EditForm>
                                    </Templates> 
```

# wpf - 在 DockPanel 上淡出动画

> ID：13555587
> 
> 赞同：2
> 
> 时间：2012-11-25T21:18:36.433
> 
> 标签：wpf, fadeout

```
<DockPanel Name="MyPanel" IsVisibleChanged="MyPanel_IsVisibleChanged">
            <DockPanel.Triggers>
                <EventTrigger RoutedEvent="IsVisibleChanged"> // error here

                </EventTrigger>
            </DockPanel.Triggers>
 </DockPanel> 
```

以上是我的停靠面板 xmal 代码。因为 IsVisibleChanged 不是 RoutedEvent 我无法在 EventTrigger 中添加此代码：

```
<Storyboard x:Key="hideMe">
        <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="0:0:2" To="0.0"/>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility">
            <DiscreteObjectKeyFrame KeyTime="0:0:2" Value="{x:Static Visibility.Hidden}"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="showMe">
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility">
            <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
        <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="0:0:5" To="0.75"/>
    </Storyboard> 
```

我尝试为我的停靠面板提供淡出动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:50:10.070

我不会使用事件触发器，而是使用普通触发器来检查`Visibility`.`DockPanel`

您可以在 DockPanel 上创建一个样式来执行此操作，如下所示：

```
<DockPanel Name="MyPanel">
    <DockPanel.Style>
        <Style TargetType="DockPanel">
            <Style.Triggers>
                <Trigger Property="Visibility" Value="Visible">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <!-- Set storyboard to run when DockPanel is set visible here: -->

                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <!-- Set storyboard to run when DockPanel is no longer set visible here: -->

                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </DockPanel.Style>
</DockPanel> 
```

# php - 此查询重复获取记录。请告诉我根据ON查询哪些只获取记录

> ID：13555590
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:18:46.497
> 
> 标签：php, mysql, sql

此查询重复获取相同的记录。请告诉我查询哪个仅根据`ON`或获取记录`WHERE`

```
SELECT reward_sender.reward_no,reward_sender.reward_id,reward_sender.sender_id 
FROM reward_sender 
INNER JOIN rewards1 
   ON reward_sender.reward_no=1 
  AND reward_sender.sender_id=1 
  AND reward_sender.reward_id=1 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:27:27.283

您根本不需要 JOIN。第二个表无处可使用，无论是在 SELECT 内部还是用于任何比较。放下它，你会没事的。

# html - 空白不会消失

> ID：13555597
> 
> 赞同：0
> 
> 时间：2012-11-25T21:19:57.630
> 
> 标签：html, css, image

我不知道如何摆脱照片后面的随机线条。我的网站是[http://spencedesign.netau.net/singapore-gallery.html](http://spencedesign.netau.net/singapore-gallery.html)，你可以看到图片后面有小线条，我看不出是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:25:21.663

你的问题来自这里：

```
a:-webkit-any-link {
  color: -webkit-link;
  text-decoration: underline; // this line is the problem
  cursor: auto;
} 
```

尝试执行以下操作：

```
.gallerycontainer a {
 text-decoration: none;
  } 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:25:37.530

您的链接，因为它们有不止一个`<img>`标签，被加下划线。只需添加

```
a.thumbnail {
    text-decoration:none;
} 
```

到你的 CSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T21:25:43.910

这些是空格，它们带有下划线，因为它们在`<a>`标签中，您可以从您的标签中删除空格或删除文本装饰`<a>`

# javascript - 在 python 中将数据发送到 Web 浏览器时出错

> ID：13555602
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:20:29.643
> 
> 标签：javascript, python, python-2.7, websocket, tornado

当我在控制台中测试我的模块时，没有给出错误，但是当我尝试从浏览器接收数据时，我收到一条错误消息：

```
UnboundLocalError: local variable 'mile' referenced before assignment 
```

这是我的代码的相关部分：

```
while cursor.alive:                
    try:
        doc = yield motor.Op(cursor.next_object)
        if doc:
            mileInfo={'time': doc['time_normal']}
            print doc['term']

            if doc['term'] == 'abc':
                event = 'abc'
            elif doc['term'] == 'def':
                event = 'def'
            elif doc['term'] == 'xyz':
                 event = 'xyz'    
            else:
                 event = 'rst'

             if not doc['coordinates']:
                 placeName = doc['place']['full_name']                          
                 mile = from_name(placeName, event)
                 print 'from Name: ' ,mile, 'term: ', event, doc['place']['full_name'] 
             else: 
                 mile = get_coords(doc['coordinates']['coordinates'], event)
                print 'from coordinates: ',mile, 'term: ', event, 'location:', doc['coordinates']['coordinates']                                                                  

               mileInfo['miles'] = mile
               self.write_message(json.dumps(mileInfo, default = json_util.default))

        except StopIteration:
            pass

    except:
            traceback.print_exc() 
```

我很困惑为什么我只从网络浏览器得到这个错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:39:46.563

我能够通过声明一个全局变量'mile'以及清理缩进来对错误进行排序（感谢@MartijnPieters的建议）。所以我在这里插入了一个全局变量：

```
while cursor.alive:
    try:
        doc = yield motor.Op(cursor.next_object)
        global mile

        if doc: ............... 
```

# python - 向 Matplotlib 生成的 Pandas 数据框图形添加误差线会创建无效的图例

> ID：13555607
> 
> 赞同：3
> 
> 时间：2012-11-25T21:20:56.063
> 
> 标签：python, matplotlib, pandas

我正在尝试使用 Matplotlib 绘制 Pandas 数据框。数据框包含四个由自然数组成的数据列和一个整数索引。我想为四列中的每一列生成一个带有折线图的图，以及每个点的误差线。此外，我想制作一个图例，为四个图形线中的每一个提供标签。

绘制没有误差线的线条和图例效果很好。然而，当我引入误差线时，图例变得无效——它使用的颜色不再对应于适当的线条。如果您比较带有误差线的图表和不带误差线的图表，则图例和曲线的形状/位置保持完全相同。然而，曲线的*颜色*会切换，因此尽管使用了相同的四种颜色，但它们现在对应于不同的曲线，这意味着图例现在为每条曲线分配了错误的标签。

因此，我的图形代码是：

```
def plot_normalized(agged, show_errorbars, filename):
  combined = {}
  # "agged" is a dictionary containing Pandas dataframes. Each dataframe
  # contains both a CPS_norm_mean and CPS_norm_std column. By running the code
  # below, the single dataframe "combined" is created, which has integer
  # indices and a column for each of the four CPS_norm_mean columns contained
  # in agged's four dataframes.
  for k in agged:
    combined[k] = agged[k]['CPS_norm_mean']
  combined = pandas.DataFrame(combined)

  plt.figure()
  combined.plot()

  if show_errorbars:
    for k in agged:
      plt.errorbar(
        x=agged[k].index,
        y=agged[k]['CPS_norm_mean'],
        yerr=agged[k]['CPS_norm_std']
      )

  plt.xlabel('Time')
  plt.ylabel('CPS/Absorbency')
  plt.title('CPS/Absorbency vs. Time')
  plt.savefig(filename) 
```

完整的[100 行脚本](https://gist.github.com/4145371/f6b4f3868b00d07e4a33aa8665de3c3338fbfd4c)可在 GitHub 上找到。要运行，请下载 graph.py 和 lux.csv，然后运行“python2 graph.py”。它将在您的工作目录中生成两个 PNG 文件——一个带有错误栏的图形，一个没有。

因此，这些图表是：

*   正确的图表（没有误差线）：
    ![](../Images/085d4d0f9f1ec60b3d5a02e1f0af528b.png)
*   不正确的图表（带有误差线）：
    ![](../Images/963cc04603b21aaf4cd92a0e4e0bd937.png)

观察没有误差线的图形是否被正确标记；请注意，*带有*错误条的图形标记不正确，就好像图例相同，折线图的颜色变化意味着每个图例条目现在指的是不同的（错误的）曲线。

感谢您的任何帮助，您可以提供。我花了好几个小时把我的头撞在墙上，我怀疑我犯了一个愚蠢的初学者的错误。对于它的价值，我已经尝试使用 Matplotlib 开发树，版本 1.2.0 和 1.1.0，并且所有三个都表现出相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:14:59.930

一般来说，我是编程和 python 的新手，但我设法拼凑了一个肮脏的修复，传说现在是正确的，颜色不是。

```
def plot_normalized(agged, show_errorbars, filename):
  combined = {}
  for k in agged:
    combined[k] = agged[k]['CPS_norm_mean']
  combined = pandas.DataFrame(combined)

  ax=combined.plot()

  if show_errorbars:
    for k in agged:
      plt.errorbar(
        x=agged[k].index,
        y=agged[k]['CPS_norm_mean'],
        yerr=agged[k]['CPS_norm_std'],
        label = k #added
      )

  if show_errorbars: #try this, dirty fix
   labels, handles = ax.get_legend_handles_labels()
   N = len(handles)/2
   plt.legend(labels[:N], handles[N:])

  #Why does the fix work?:
  #labels, handles = ax.get_legend_handles_labels()
  #print handles
  #out:
  #[u'Blank', u'H9A', u'Q180K', u'Wildtype', 'Q180K', 'H9A', 'Wildtype', 'Blank']
  #Right half has correct order, these are the labels from label=k above in errorplot

  plt.xlabel('Time')
  plt.ylabel('CPS/Absorbency')
  plt.title('CPS/Absorbency vs. Time')
  plt.savefig(filename) 
```

产生： ![无误差图](../Images/1fc05ca771add7870a59f4544b644684.png) ![误差图](../Images/d46fa184b3844516f89c01d86c35f275.png)

# javascript - 按键事件中未定义的变量

> ID：13555608
> 
> 赞同：3
> 
> 时间：2012-11-25T21:20:59.160
> 
> 标签：javascript, prototypejs

我的项目中有这段代码，它使用 Prototype 1.7.1

```
var Worker = Class.create({
    initialize: function() {
        this.ap = $('ap');

        alert( this.ap.value );

        $( 'main-form' ).on( 'change', '.inputs', this.recount );
        this.ap.observe( 'keypress', this.recount );
    },
    recount: function() {
        alert( this.ap.value );
    }
});
document.observe('dom:loaded', function(){
    var w = new Worker();
}); 
```

项`id="ap"`是表单内的文本输入字段。在上面的类初始化程序中，`#ap`找到了元素，`this.ap`分配了成员（警报显示正确的值）。

现在，当我更改`#ap`输入值时，事件`recount`调用的方法`keypress`给我一个错误 -`this.ap`未定义。在我单击此输入外部后，要松开焦点，事件`recount`调用的方法`change`可以正常工作（`this.ap`已分配）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:27:38.153

当然，处理程序将在 DOM 元素的上下文中执行 -`this`不指向您的`Worker`实例。利用

```
$( 'main-form' ).on( 'change', '.inputs', this.recount.bind(this) ); 
```

顺便说一句，将你的类命名为“Worker”不是一个好主意——这会覆盖全局 WebWorker 构造函数。

# java - swing - 如何使用按钮切换 JPanel

> ID：13555613
> 
> 赞同：0
> 
> 时间：2012-11-25T21:21:06.733
> 
> 标签：java, swing, button, jpanel, switch-statement

大家好，我打算创建登录面板。在该面板中应该是用户 JLabel、密码 JLabel、用户 JTextField、密码 JTextField 和 JButon。我想使用该按钮切换到新的 JPanel。我读过最好的方法是 CardLayout ，我正在尝试修改该代码：

```
//Where the GUI is assembled:
//Put the JComboBox in a JPanel to get a nicer look.
JPanel comboBoxPane = new JPanel(); //use FlowLayout
String comboBoxItems[] = { BUTTONPANEL, TEXTPANEL };
JComboBox cb = new JComboBox(comboBoxItems);
cb.setEditable(false);
cb.addItemListener(this);
comboBoxPane.add(cb);
...
pane.add(comboBoxPane, BorderLayout.PAGE_START);
pane.add(cards, BorderLayout.CENTER);
...

//Method came from the ItemListener class implementation,
//contains functionality to process the combo box item selecting
public void itemStateChanged(ItemEvent evt) {
    CardLayout cl = (CardLayout)(cards.getLayout());
    cl.show(cards, (String)evt.getItem());
} 
```

我正在尝试修改那部分代码

```
JComboBox cb = new JComboBox(comboBoxItems);
cb.setEditable(false);
cb.addItemListener(this);
comboBoxPane.add(cb);
pane.add(comboBoxPane, BorderLayout.PAGE_START);
pane.add(cards, BorderLayout.CENTER); 
```

并将其更改为：

```
JButton loginButton = new JButton();
loginButton.addItemListener(this);
comboBoxPane.add(loginButton);
pane.add(loginButton, BorderLayout.PAGE_START);
pane.add(cards, BorderLayout.CENTER); 
```

我不能使用：

```
JButton loginButton = new JButton(comboBoxItems); 
```

因为编译器返回错误：构造函数 JButton(String[]) 未定义

有谁能帮我解决我的问题。我是Java编程的新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:24:38.440

`JButton`没有采用`String`数组的构造函数。调用就足够了：

```
JButton loginButton = new JButton("Login"); 
```

请参阅：[使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)

# android - 当我进入特定活动时，我的应用程序停止工作

> ID：13555617
> 
> 赞同：1
> 
> 时间：2012-11-25T21:21:33.717
> 
> 标签：android, android-layout, android-emulator

我正在尝试制作一个android应用程序。当我从列表中选择一个项目时，您会转到另一个活动，但是当我按下该项目时，我收到此错误（如下）并且应用程序死亡。我想不通，它在几个小时前工作，我只是更改了 .xml 中文本框上的一些边距，用于单击列表项时开始的活动。

```
11-25 21:06:21.427: D/dalvikvm(725): GC_FOR_ALLOC freed 33K, 3% free 6779K/6919K, paused 45ms, total 65ms
11-25 21:06:21.427: I/dalvikvm-heap(725): Forcing collection of SoftReferences for 11715856-byte allocation
11-25 21:06:21.547: D/dalvikvm(725): GC_BEFORE_OOM freed 603K, 11% free 6175K/6919K, paused 114ms, total 119ms
11-25 21:06:21.547: E/dalvikvm-heap(725): Out of memory on a 11715856-byte allocation.
11-25 21:06:21.547: I/dalvikvm(725): "main" prio=5 tid=1 RUNNABLE
11-25 21:06:21.547: I/dalvikvm(725):   | group="main" sCount=0 dsCount=0 obj=0x40a14568 self=0x2a00b9e0
11-25 21:06:21.547: I/dalvikvm(725):   | sysTid=725 nice=0 sched=0/0 cgrp=apps handle=1073870640
11-25 21:06:21.557: I/dalvikvm(725):   | schedstat=( 1339266348 1125088991 664 ) utm=96 stm=37 core=0
11-25 21:06:21.557: I/dalvikvm(725):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
11-25 21:06:21.566: I/dalvikvm(725):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
11-25 21:06:21.566: I/dalvikvm(725):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
11-25 21:06:21.566: I/dalvikvm(725):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
11-25 21:06:21.566: I/dalvikvm(725):   at android.content.res.Resources.loadDrawable(Resources.java:1930)
11-25 21:06:21.566: I/dalvikvm(725):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
11-25 21:06:21.566: I/dalvikvm(725):   at android.view.View.<init>(View.java:3336)
11-25 21:06:21.566: I/dalvikvm(725):   at android.view.ViewGroup.<init>(ViewGroup.java:427)
11-25 21:06:21.566: I/dalvikvm(725):   at android.widget.LinearLayout.<init>(LinearLayout.java:176)
11-25 21:06:21.566: I/dalvikvm(725):   at android.widget.LinearLayout.<init>(LinearLayout.java:172)
11-25 21:06:21.576: I/dalvikvm(725):   at java.lang.reflect.Constructor.constructNative(Native Method)
11-25 21:06:21.576: I/dalvikvm(725):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
11-25 21:06:21.587: I/dalvikvm(725):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
11-25 21:06:21.587: I/dalvikvm(725):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-25 21:06:21.587: I/dalvikvm(725):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
11-25 21:06:21.587: I/dalvikvm(725):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
11-25 21:06:21.587: I/dalvikvm(725):   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
11-25 21:06:21.587: I/dalvikvm(725):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
11-25 21:06:21.587: I/dalvikvm(725):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
11-25 21:06:21.587: I/dalvikvm(725):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
11-25 21:06:21.587: I/dalvikvm(725):   at android.app.Activity.setContentView(Activity.java:1867)
11-25 21:06:21.587: I/dalvikvm(725):   at com.example.lapp.legi.onCreate(legi.java:19)
11-25 21:06:21.587: I/dalvikvm(725):   at android.app.Activity.performCreate(Activity.java:5008)
11-25 21:06:21.587: I/dalvikvm(725):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-25 21:06:21.596: I/dalvikvm(725):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-25 21:06:21.596: I/dalvikvm(725):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-25 21:06:21.596: I/dalvikvm(725):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-25 21:06:21.596: I/dalvikvm(725):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-25 21:06:21.596: I/dalvikvm(725):   at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 21:06:21.596: I/dalvikvm(725):   at android.os.Looper.loop(Looper.java:137)
11-25 21:06:21.596: I/dalvikvm(725):   at android.app.ActivityThread.main(ActivityThread.java:4745)
11-25 21:06:21.596: I/dalvikvm(725):   at java.lang.reflect.Method.invokeNative(Native Method)
11-25 21:06:21.596: I/dalvikvm(725):   at java.lang.reflect.Method.invoke(Method.java:511)
11-25 21:06:21.616: I/dalvikvm(725):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-25 21:06:21.616: I/dalvikvm(725):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-25 21:06:21.616: I/dalvikvm(725):   at dalvik.system.NativeStart.main(Native Method)
11-25 21:06:21.626: D/skia(725): --- decoder->decode returned false
11-25 21:06:21.626: D/AndroidRuntime(725): Shutting down VM
11-25 21:06:21.626: W/dalvikvm(725): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-25 21:06:21.686: E/AndroidRuntime(725): FATAL EXCEPTION: main
11-25 21:06:21.686: E/AndroidRuntime(725): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.lapp/com.example.lapp.legi}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.os.Looper.loop(Looper.java:137)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-25 21:06:21.686: E/AndroidRuntime(725):  at java.lang.reflect.Method.invokeNative(Native Method)
11-25 21:06:21.686: E/AndroidRuntime(725):  at java.lang.reflect.Method.invoke(Method.java:511)
11-25 21:06:21.686: E/AndroidRuntime(725):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-25 21:06:21.686: E/AndroidRuntime(725):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-25 21:06:21.686: E/AndroidRuntime(725):  at dalvik.system.NativeStart.main(Native Method)
11-25 21:06:21.686: E/AndroidRuntime(725): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
11-25 21:06:21.686: E/AndroidRuntime(725):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
11-25 21:06:21.686: E/AndroidRuntime(725):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.Activity.setContentView(Activity.java:1867)
11-25 21:06:21.686: E/AndroidRuntime(725):  at com.example.lapp.legi.onCreate(legi.java:19)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.Activity.performCreate(Activity.java:5008)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-25 21:06:21.686: E/AndroidRuntime(725):  ... 11 more
11-25 21:06:21.686: E/AndroidRuntime(725): Caused by: java.lang.reflect.InvocationTargetException
11-25 21:06:21.686: E/AndroidRuntime(725):  at java.lang.reflect.Constructor.constructNative(Native Method)
11-25 21:06:21.686: E/AndroidRuntime(725):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
11-25 21:06:21.686: E/AndroidRuntime(725):  ... 23 more
11-25 21:06:21.686: E/AndroidRuntime(725): Caused by: java.lang.OutOfMemoryError
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.content.res.Resources.loadDrawable(Resources.java:1930)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.View.<init>(View.java:3336)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.view.ViewGroup.<init>(ViewGroup.java:427)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.widget.LinearLayout.<init>(LinearLayout.java:176)
11-25 21:06:21.686: E/AndroidRuntime(725):  at android.widget.LinearLayout.<init>(LinearLayout.java:172)
11-25 21:06:21.686: E/AndroidRuntime(725):  ... 26 more
11-25 21:06:24.386: E/Trace(742): error opening trace file: No such file or directory (2)
11-25 21:06:24.746: D/libEGL(742): loaded /system/lib/egl/libEGL_emulation.so
11-25 21:06:24.826: D/(742): HostConnection::get() New Host Connection established 0x2a0db078, tid 742
11-25 21:06:25.101: D/libEGL(742): loaded /system/lib/egl/libGLESv1_CM_emulation.so
11-25 21:06:25.116: D/libEGL(742): loaded /system/lib/egl/libGLESv2_emulation.so
11-25 21:06:25.895: W/EGL_emulation(742): eglSurfaceAttrib not implemented
11-25 21:06:26.436: D/OpenGLRenderer(742): Enabling debug mode 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:33:17.480

就像它在堆栈跟踪中所说的那样，这是一个内存不足错误。由于您在从第 2 行开始的 XML 元素中声明的位图。

# python - 如何在 openerp 7 中调试断言错误

> ID：13555618
> 
> 赞同：-2
> 
> 时间：2012-11-25T21:21:39.610
> 
> 标签：python, openerp

在谷歌搜索了很多之后，我来到stackoverflow 如何调试这个错误

当我尝试从 Web 客户端创建新字段时出现此错误

AttributeError：“NoneType”对象没有属性“_columns”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:55:27.750

当您没有为模块提供正确的依赖项时，通常会出现此错误。请检查您是否在`__openerp__.py`文件中提供了正确的依赖项

# objective-c - 重新定义属性的设置器时的无限循环

> ID：13555619
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:21:40.087
> 
> 标签：objective-c, properties

在 Cocoa Programming for Mac OS X (Hillegass) 中，第 19 章中有一个类：

```
@interface BigLetterView : NSView {
NSColor *bgColor;
}
@property (strong) NSColor *bgColor;
@end 
```

访问器定义如下：

```
- (void)setBgColor:(NSColor *)c {
bgColor = c;
[self setNeedsDisplay:YES]; } 
```

这对我来说看起来是正确的，但它会创建一个无限循环：`bgColor = c`调用`setBgColor:c`

这段代码正确吗？

如何重新定义二传手？我需要什么来编译这段代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:51:08.427

在现代 Xcode/llvm 中，您可以稍微清理一下您的代码。

也就是说，您不需要将成员变量声明为支持变量，也不需要声明合成语句。

如果你不 declase 合成你自己，一个属性`foo`将有支持变量`_foo`

所以这段代码应该可以工作

```
@interface BigLetterView : NSView 
@property (nonatomic, strong) NSColor *bgColor;
@end

@implementation BigLetterView
@synthesize bgColor = _bgColor;

- (void)setBgColor:(NSColor *)c 
{
    _bgColor = c;
    [self setNeedsDisplay:YES]; 
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:37:31.620

这样做看起来更干净，更容易理解。

```
@interface BigLetterView : NSView
@property (strong) NSColor *bgColor;
@end
@implementation BigLetterView

- (void)setBgColor:(NSColor *)c {
_bgColor = c;
[self setNeedsDisplay:YES]; 
} 
```

此外，制定一个简单的规则，在您使用它的任何其他地方始终使用带有 self 的属性。这只是一个更好的规则，可以让你清楚地理解事物。

# opencv - 可以从 C++/CX 应用程序调用 OpenCV 库吗？

> ID：13555621
> 
> 赞同：0
> 
> 时间：2012-11-25T21:22:07.710
> 
> 标签：opencv, c++-cx

这在技术上是否可行（我*认为*这不会受到限制），你是怎么做的？

我的小测试应用程序构建良好，但是当我运行它时，我得到一个失败对话框。

![WinRT 应用程序失败](../Images/bef7bf880ad6b3298a4253421d526be9.png)

调试输出的信息略多：

```
The thread 0xe4c has exited with code -1073741515 (0xc0000135).
The program '[3400] OpenCVTest2.exe' has exited with code -1073741515 (0xc0000135) 'A dependent dll was not found'. 
```

然后我创建了一个 Win8 桌面应用程序，它也构建得很好，但无法运行。

![Win8 桌面应用程序失败](../Images/30b6f98261fc119b0e5aecd927fc2a15.png)

MSVP100D.dll 是与 Win8 不兼容的[VC++ 2010 Redistributable的一部分。](http://www.microsoft.com/en-us/download/details.aspx?id=14632)（作为一名黑客，我无论如何都尝试过，安装程序运行完成 - 但未安装这些位。）

有我可以尝试的编译器标志吗？可能 OpenCV 的自定义构建会修复它，但那将是最后的手段，它可能只修复桌面应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:20:27.590

这个人展示了一个使用 OpenCV 库在使用 C++/CX 编写的 Windows 8 应用商店应用程序中执行人脸检测的示例：http: [//channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV322](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV322)

此外，在下面的帖子中，他还描述了 C++ 运行时如何为 Windows 8Store 应用程序工作：http: [//blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:53:30.770

MSVP100D 不是 VC10 redist 的一部分。请注意其名称末尾的“D”。该软件包仅包括发布版本。您的发布版本应该可以正常工作。但是混合来自不同 VC 版本的库可能会给你带来麻烦。看到[这个](https://stackoverflow.com/a/11028595/400303)。最好的机会是使用 VC11 从源代码构建。

# javascript - 通过 jQuery cookie 脚本删除 cookie

> ID：13555624
> 
> 赞同：0
> 
> 时间：2012-11-25T21:22:31.797
> 
> 标签：javascript, jquery, select, cookies

我有一个包含 3 个 html 文件的网站：

语言选择：`media/index.html`

中文页面：`media/en/index.html`

中国网页：`media/cn/index.html`

网站文件：`media/site/`

当访问者在我的网站上选择一种语言时，我通过此脚本创建一个 cookie：

```
<script type="text/javascript">

    $(function () {

        var url = '';
        var en_page = 'en';
        var cn_page = 'cn';

        if ($.cookie('default_page') != null) {
            if (window.location.href != url + '/' + $.cookie('default_page')) {
                window.location.href = url + '/' + $.cookie('default_page');
            }
        }

        $('#enlink').click(function () {
            $.cookie('default_page', en_page, {expires: 999, path: '/', domain: 'mywebsite.com'});
        });

        $('#cnlink').click(function () {
            $.cookie('default_page', cn_page, {expires: 999, path: '/', domain: 'mywebsite.com'});
        });

    });

</script>

    ....
    ....

    <a href="cn/index.html" id="cnlink">CN</a>
    <br>
<a href="en/index.html" id="enlink">EN</a> 
```

这成功地创建了一个名为“default_page”的cookie，其值为“cn”或“en”，然后将用户重定向到`mywebsite.com/cn`或`mywebsite.com/en`在后续访问中。这一切都很好。

但是，我无法**删除**此 cookie。每当用户单击链接以更改语言时，我都需要删除此 cookie`media/en/index.html`或`media/cn/index.html`（即我的实际网站，而不是语言选择页面）：

```
<script type="text/javascript">

    function deletecookie(){
        alert('delete');
        $.cookie('default_page', null, {path: '/', domain: 'mywebsite.com'});
    }

</script>

....
....

<a href="../index.html" onclick="deletecookie()">
    Change language
</a> 
```

但这不起作用，当我点击“更改语言”时，它仍然会将我重定向回同一页面（因为 cookie 仍然存在），所以我无法访问语言页面（`media/index.html`）。当我收到警报框时，正在调用该函数，但我检查了我的浏览器，即 Firefox，并且 cookie`mywebsite/default_page`仍然存在。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:28:16.077

尝试改变这个

```
$.cookie('default_page', null, {path: '/', domain: 'mywebsite.com'}); 
```

对此

```
$.cookie('default_page', null); 
```

# bash - awk 将字段字符串分配给变量不起作用

> ID：13555625
> 
> 赞同：1
> 
> 时间：2012-11-25T21:22:36.443
> 
> 标签：bash, awk, sh

只是想知道为什么这不起作用？

这是我的 awk 代码，将“hh:mm:ss”格式转换为秒

```
 a.awk 
  3 BEGIN {                                                                         
  4     FS=":";                                                                     
  5 }                                                                               
  6                                                                                 
  7 {                                                                               
  8     retval = 0;                                                                 
  9     for (i = 1; i <= NF; i++) {                                                 
 10         retval += $i * 60 ** (NF-i);                                            
 11     }                                                                           
 12     print $retval;                                                                
 13 }                                                                               
 14                                                              

 input.txt
 59:22:40

 $ cat input.txt  | awk -f a.awk 
    //<empty>
 $ 
```

但是，我在命令行上尝试：

```
 $ echo "00:59:30" | awk 'BEGIN { FS=":" } { retval = 0; for (i = 1; i <= NF; i++) {  retval += $i * 60 ** (NF-i); } print retval;}'                 
 3570 
```

a.awk 有什么问题？

* * *

更新只是为了澄清

```
$ awk --version
GNU Awk 4.0.1
Copyright (C) 1989, 1991-2012 Free Software Foundation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:29:58.693

由于其他 2 个帖子已经回答了您的问题，因此您可以使用以下可爱的方法在几秒钟内`date`完成相同的转换：`hh:mm:ss`

```
# GNU date

string_time="01:01:01"
string_time_in_seconds=$(date -u -d "1970-01-01 ${string_time}" +"%s")
echo ${string_time_in_seconds}

3661 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:35:50.433

这个`for`循环很可爱，但这似乎更直接，更容易理解。

```
BEGIN {
    FS=":";
}

{
    retval = 0;
    in_hours = $1
    in_minutes = $2;
    in_seconds = $3;
    retval = (in_hours * 3600) + (in_minutes * 60) + in_seconds
    print retval;
} 
```

我认为你的循环的问题在于求幂。至少我的版本不支持任何`**`运算符。这可能对您更有效。另外，要小心你的美元符号。您需要它们用于字段；你不需要它们作为变量。

```
for (i = 1; i <= NF; i++) {
    retval += i * (60^(NF-i));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:05:24.837

这是一个错字

```
 a.awk 
    3 BEGIN {                                                                         
    4     FS=":";                                                                     
    5 }                                                                               
    6                                                                                 
    7 {                                                                               
    8     retval = 0;                                                                 
    9     for (i = 1; i <= NF; i++) {                                                 
   10         retval += $i * 60 ** (NF-i);                                            
   11     }                                                                           
   12     print retval;          ///<<<< notice here.                                                         
   13 }                                                                               
   14 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T23:06:20.137

或者，仅使用 bash：

```
IFS=: read -a a < input.txt
((retval=${a[0]}*3600+${a[1]}*60+${a[2]}))
echo "$retval" 
```

# combobox - javafx-2 ComboBox，未记录的功能：ComboBox 维护通过 setValue(T object) 设置的值，即使它不在项目集合中

> ID：13555628
> 
> 赞同：0
> 
> 时间：2012-11-25T21:22:41.370
> 
> 标签：combobox, javafx-2

javafx-2 ComboBox 似乎有一个（尚未记录的）功能，它在幕后暗示了一个全新的组合框概念。

**简单地说， value 属性不被限制为 items 集合的元素之一**。

虽然用户只能选择其中一项，但 setValue 方法允许您设置一个值，即使它不属于集合（当然，前提是它的类型正确，但这是由泛型强制执行的）。

同样，如果 valueProperty 绑定到其他属性，则 valueProperty 将跟随其他属性的值，无论它是否在 items 属性中。

这在多种情况下可能很有用，例如当用户选择随后从项目集合中删除的项目时。

**由于此功能没有记录（或者我无法找到文档），我想知道我是否可以依赖它，或者它必须考虑某种“副作用”，因此它可能会被删除框架的未来版本。** 

SSCE（只修复进口）：

```
public class T08 extends Application {
@Override public void start(Stage primaryStage) throws Exception {
    ComboBox<String> c = new ComboBox(FXCollections.observableArrayList("item-a", "item-b"));
    primaryStage.setScene(new Scene(c));
    c.setValue("outsider-item");
    primaryStage.show();
} 
} 
```

输出如下。如您所见，该组合显示“outside-item”值，但列表中未提出该值。
getValue() 方法与组件显示的值一致。 ![在此处输入图像描述](../Images/fce213a52d38da43a755f8f3dc2b490e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:16:50.447

这种行为是已知的，

我已经提交了一个问题[http://javafx-jira.kenai.com/browse/RT-27543](http://javafx-jira.kenai.com/browse/RT-27543) 来描述 javadoc 中的这种行为。

这是一个固定且经过测试的行为，预计不会改变。

# c# - 使用区域管理器导航到在区域中声明的选项卡控件的选项卡

> ID：13555629
> 
> 赞同：0
> 
> 时间：2012-11-25T21:22:42.217
> 
> 标签：c#, wpf, mvvm, prism

我有一个带有选项卡控件的用户控件。在每个选项卡中，我声明了一些区域。

```
<TabControl Style="{DynamicResource HomeScreenTabControlStyle}">
            <TabItem Header="home"
                     Style="{DynamicResource HomeScreenTabItemStyle}">
                <StackPanel Orientation="Horizontal">
                    <StackPanel Name="BacklogPanel" Style="{DynamicResource FullLengthPanelStyle}"
                                prism:RegionManager.RegionName="{x:Static inf:RegionNames.FullLeftBoxRegion}">

                    </StackPanel>
                    <StackPanel Orientation="Vertical">
                        <StackPanel Name="ToDoPanel" Style="{DynamicResource HalfLengthPanelStyle}"
                                    prism:RegionManager.RegionName="{x:Static inf:RegionNames.HalfTopBoxRegion}">

                        </StackPanel>
                        <StackPanel Name="MeetingPanel" Style="{DynamicResource HalfLengthPanelStyle}"
                                    prism:RegionManager.RegionName="{x:Static inf:RegionNames.HalfBottomBoxRegion}">

                        </StackPanel>
                    </StackPanel> 
                    <StackPanel Name="SprintPanel" Style="{DynamicResource FullLengthPanelStyle}"
                                prism:RegionManager.RegionName="{x:Static inf:RegionNames.FullSecondLeftBoxRegion}">

                    </StackPanel>

                    <StackPanel Name="StoriesPanel" Style="{DynamicResource FullLengthPanelStyle}"
                                prism:RegionManager.RegionName="{x:Static inf:RegionNames.FullRightBoxRegion}">
                    </StackPanel>
                </StackPanel>
            </TabItem>
            <TabItem Header="sprints"
                     Style="{DynamicResource HomeScreenTabItemStyle}">
                <StackPanel Orientation="Horizontal">

                    <StackPanel Orientation="Horizontal">
                        <StackPanel Style="{DynamicResource FullLengthPanelStyle}"
                                prism:RegionManager.RegionName="{x:Static inf:RegionNames.SprintBacklog}">

                        </StackPanel>
                        <StackPanel Orientation="Vertical">
                            <StackPanel Style="{DynamicResource HalfLengthPanelStyle}"
                                    prism:RegionManager.RegionName="{x:Static inf:RegionNames.PeopleOnSprint}">

                            </StackPanel>
                            <StackPanel  Style="{DynamicResource HalfLengthPanelStyle}"
                                    prism:RegionManager.RegionName="{x:Static inf:RegionNames.SprintDetails}">

                            </StackPanel>
                        </StackPanel>
                        <StackPanel Style="{DynamicResource FullLengthPanelStyle}"
                                prism:RegionManager.RegionName="{x:Static inf:RegionNames.SprintTaskBacklog}">

                        </StackPanel>

                        <StackPanel  Style="{DynamicResource FullLengthPanelStyle}"
                                prism:RegionManager.RegionName="{x:Static inf:RegionNames.SprintMyTasks}">
                        </StackPanel>
                    </StackPanel>

                </StackPanel>
            </TabItem> 
```

目前要导航到这个 HomeScreenView 我正在做这样的事情......

```
_regionManager.RequestNavigate(RegionNames.ContentRegion, new Uri("/HomeScreenView", UriKind.Relative)); 
```

有什么我可以传递给区域经理的，以便它将 Sprints 选项卡设置为导航到的选项卡，而不是主页选项卡？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:17:58.897

可能最简单的方法也是从这些 TabItem 中创建视图。以及来自 TabControl 的区域。因此，您使用 TabControlRegion 导航到您的视图，并且可能在 INavigationAware 界面的 OnNavigateTo 方法中，您将导航到 HomeTabItemView 和 SpritsTabItemView

```
 public void OnNavigatedTo(NavigationContext navigationContext)
    {
        this.regionManager.RequestNavigate(RegionNames.TabControlRegion, new Uri(ViewNames.HomeTabItemView, UriKind.Relative));
        this.regionManager.RequestNavigate(RegionNames.TabControlRegion, new Uri(ViewNames.SpritsTabItemView, UriKind.Relative));
    } 
```

选项卡控制区域

```
<Window x:Class="Onii.Vespa.UI.Shell.Desktop.Shell"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Regions="clr-namespace:Microsoft.Practices.Prism.Regions;assembly=Microsoft.Practices.Prism" MinHeight="640" MinWidth="820" WindowState="Maximized">
<Grid Height="Auto">   
    <TabControl TabStripPlacement="Top" Regions:RegionManager.RegionName="TabControlRegion" HorizontalContentAlignment="Left" Margin="0,3,0,20" />
</Grid> 
```

视图将是这样的：

```
<UserControl x:Class="MyNamespace.HomeTabItemView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:prism="clr-namespace:Microsoft.Practices.Prism.Regions;assembly=Microsoft.Practices.Prism"
mc:Ignorable="d" 
d:DesignHeight="300" d:DesignWidth="300">
<Grid>
   <StackPanel Orientation="Horizontal">
       <StackPanel Name="BacklogPanel" Style="{DynamicResource FullLengthPanelStyle}"
      prism:RegionManager.RegionName="{x:Static inf:RegionNames.FullLeftBoxRegion}">

       </StackPanel>
       <StackPanel Orientation="Vertical">
           <StackPanel Name="ToDoPanel" Style="{DynamicResource HalfLengthPanelStyle}"
          prism:RegionManager.RegionName="{x:Static inf:RegionNames.HalfTopBoxRegion}">

           </StackPanel>
           <StackPanel Name="MeetingPanel" Style="{DynamicResource HalfLengthPanelStyle}"
          prism:RegionManager.RegionName="{x:Static inf:RegionNames.HalfBottomBoxRegion}">

           </StackPanel>
       </StackPanel> 
       <StackPanel Name="SprintPanel" Style="{DynamicResource FullLengthPanelStyle}"
      prism:RegionManager.RegionName="{x:Static inf:RegionNames.FullSecondLeftBoxRegion}">

       </StackPanel>

       <StackPanel Name="StoriesPanel" Style="{DynamicResource FullLengthPanelStyle}"
      prism:RegionManager.RegionName="{x:Static inf:RegionNames.FullRightBoxRegion}">
       </StackPanel>
   </StackPanel>
</Grid> 
```

不要忘记设置 TabItems 标题文本。你可以在 Shered TabItemStyle 中做到这一点

```
<Style TargetType="{x:Type TabItem}">
    <Setter Property="Header" Value="{Binding Content.DataContext.TabHeaderText, RelativeSource={RelativeSource Self}}"/>
    ... 
```

之后，轻松地将 TabHeaderText 属性添加到您的 ViewModel 中，以便在 TabControlRegion 中显示视图。

# ruby - 怎么做 .any_instance 主题

> ID：13555631
> 
> 赞同：2
> 
> 时间：2012-11-25T21:22:59.740
> 
> 标签：ruby, rspec2

现在我有很多以下内容：

```
it{ ::Api.any_instance.should_receive(...).once; start } 
```

如果我尝试制作`::Api.any_instance`主题，Rspec会窒息，即

```
subject{ ::Api.any_instance }
it{ should_receive(...).once; start } 
```

有没有办法干燥这些规格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:36:24.800

我认为问题在于规格的设计。

我建议做的是：

```
describe SomeClass do
  let(:object_instance) { described_class.new } 

  before do
    # Put expectations in before block, they shouldn't be a part of text example!
    object_instance.should_receive(:something)
  end

  specify { subject.do_something_else }
end 
```

如果您有更多的期望要满足，您可以将它们全部放入`before`块中或仅使用不同`context`的 s。

如果很多规格看起来相似，我会选择将其提取到共享示例中。

# magento - 根据产品 ID 显示单个图像

> ID：13555640
> 
> 赞同：0
> 
> 时间：2012-11-25T21:24:42.120
> 
> 标签：magento, module

我创建了一个模块，通过将 videoId 粘贴到每个产品的文本字段中，在 Magento 的 CMS 页面上显示 YouTube 视频，然后视频显示在每个自定义 CMS 产品页面上。我现在遇到的问题是我需要为“播放”按钮提取一个图像，这是每个产品的徽标，但我不知道该怎么做。

我尝试创建另一个名为 videothumbnail 的属性并选择媒体图像机器人我在管理产品部分看不到该字段，所以我有点卡住了。

这是显示每个页面的 YouTube 视频的代码。您将看到我当前拥有的图像将显示在所有 CMS 页面上，即使它们是不同的产品，如果可能的话，我需要为每个页面分配一个图像。

```
 <?php $_product = Mage::getModel('catalog/product')->load($this->getProductId()); ?>
<?php if ($_product->getId() && $_product->getVideoid()): ?>
<ul class="list">
    <h3 class="product-name">Video</h3>
   <li> <a class="fancybox-video" href="http://www.youtube.com/embed/<?php echo $_product->getVideoid(); ?>">
    <img src="<?php echo $this->getSkinUrl('images/x5-play.png');?>" /></a> </li>
</ul>
<?php endif;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:11:26.723

假设您创建了一个名为 videothumbnail 的新媒体图像

通过转到管理 -> 目录 -> 属性 -> 管理属性

然后为“商店所有者的目录输入类型”创建一个新的“媒体图像”属性

然后将其添加到管理 -> 目录 -> 属性中的“管理属性集”

（您可能需要对平面表进行重新索引）

```
<?php $_product = Mage::getModel('catalog/product')->load($this->getProductId()); ?>
<?php if ($_product->getId() && $_product->getVideoid()): ?>
<ul class="list">
    <h3 class="product-name">X5 Mop Video</h3>
   <li> 
       <a class="fancybox-video" href="http://www.youtube.com/embed/<?php echo $_product->getVideoid(); ?>">
       $_helper = Mage::helper('catalog/output');
       $_img = '<img id="image" src="' . Mage::helper('catalog/image')->init($_product, 'videothumbnail')->resize(410,420) . '" width="410" height="420" />';
       echo $_helper->productAttribute($_product, $_img, 'image');
   </li>
</ul>
<?php endif;?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:18:44.037

如果您有视频 ID，则可以非常轻松地从 YouTube 中提取实时缩略图，以减少麻烦，但控制较少：

[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

如果产品没有指定 Magento 视频缩略图，您应该考虑将其用作后备。

# python - 机械化（下载到自定义目录）

> ID：13555642
> 
> 赞同：1
> 
> 时间：2012-11-25T21:24:50.403
> 
> 标签：python, python-2.7

我很想知道如何使用 Python 中的 Mechanize 模块将文件从网络下载到我机器上的特定目录。感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:25:36.263

使用 mechanize 将文件下载到自定义目录非常简单：

```
import mechanize

FILE_URL = 'http://mit.edu/img/MIT_logo.gif'
DESTINATION = '/tmp/lol.gif'

br = mechanize.Browser()
br.retrieve(FILE_URL, DESTINATION) 
```

运行此程序后，您会在 /tmp/ 目录中找到保存为 lol.gif 的 MIT 徽标。

# javascript - jQuery | 未捕获的类型错误：未定义不是函数

> ID：13555644
> 
> 赞同：0
> 
> 时间：2012-11-25T21:25:11.963
> 
> 标签：javascript, jquery, raphael

我正在完成关于 raphaelJS 的 peepcode 教程，但遇到了以下错误：Uncaught TypeError: undefined is not a function when using the following callback function in JQuery.

```
self.plotArray = function (theArray, drawingCallback) {
    $(theArray).each(function (i, release) {
        var xOffset = 0
            , timeOffset = release.date.getTime() - self.startTime
            , timeRatio = timeOffset / self.timeSpan
            , graphWidth = self.paper.width - self.dotRadius * 2;
        xOffset = graphWidth * timeRatio + self.dotRadius;
        drawingCallback(release, xOffset);
    });
}; 
```

调用 drawingCallback 函数时出现此错误。我从 peepcode 查看了完整的解决方案，但它似乎与这段代码所做的非常相似。我是 Javascript 的新手对我没有帮助吗？任何解决此问题的想法将不胜感激。

下面给出的是调用 app.js 的 index.html：

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/raphael.js"></script>
<script type="text/javascript" src="js/app.js"></script> 
```

我现在附上 app.js 的完整代码：

```
 function Timeline(domID, width, height, releases) {
        if (!(this instanceof arguments.callee)) {
            return new arguments.callee(arguments);
        }

        var self = this;
        self.init = function () {
            self.paper = Raphael(domID, width, height);
            self.dotRadius = 26;

            self.parseDates();
            self.draw();
        };

        self.parseDates = function () {
            self.parsedReleases = [];

            $(releases).each(function (i, release) {
                var epochSeconds = Date.parse(release.date),
                    parsedDate = new Date(epochSeconds);

                self.parsedReleases.push({date:parsedDate,
                    version:release.version});
            });

            self.startTime = self.parsedReleases[0].date.getTime();
            var endTime = $(self.parsedReleases).last()[0].date.getTime();
            self.timeSpan = endTime - self.startTime;

        };

        self.draw = function () {
            self.plotArray(self.parsedReleases);
        };

        self.plotArray = function (theArray, drawingCallback) {
            $(theArray).each(function (i, release) {
                var xOffset = 0
                    , timeOffset = release.date.getTime() - self.startTime
                    , timeRatio = timeOffset / self.timeSpan
                    , graphWidth = self.paper.width - self.dotRadius * 2;
                xOffset = graphWidth * timeRatio + self.dotRadius;
                drawingCallback(release, xOffset);
            });
        };

        self.drawDotAndLabel = function (release, xOffset) {
            var dot, label;
            dot = self.paper.circle(xOffset, self.dotRadius, self.dotRadius);
            dot.attr({
                'stroke-width':0,
                'fill':'#7E2217',
                'fill-opacity':1.0
            });

            label = self.paper.text(xOffset, self.dotRadius, release.version);
            label.attr({
                'fill':'#ffffff',
                'fontSize':20,
                'fontFamily':"'Garamond', 'Franklin Gothic Medium', 'Gill Sans MT Condensed', 'Arial Narrow',  'sans-serif'"
            });
        };

        self.init();
    }

    var timeline;

    jQuery(function () {
        timeline = new Timeline('timeline', 940, 81, [
            {date:"June 25, 2004", version:"0.5"},
            {date:"December 13, 2005", version:"1.0"},
            {date:"March 18, 2006", version:"1.1.0"},
            {date:"January 28, 2007", version:"1.2.0"},
            {date:"December 7, 2007", version:"2.0.0"},
            {date:"May 31, 2008", version:"2.1.0"},
            {date:"November 21, 2008", version:"2.2.2"},
            {date:"March 15, 2009", version:"2.3.2"},
            {date:"November 26, 2009", version:"2.3.5"},
            {date:"July 26, 2010", version:"3 RC1"},
            {date:"August 30, 2010", version:"3.0"}
        ]);
    }); 
```

# haskell - 使用 Read 进行 Haskell 类型推断

> ID：13555646
> 
> 赞同：1
> 
> 时间：2012-11-25T21:25:25.960
> 
> 标签：haskell, type-inference

我认为我对 Haskell 类型推断有疑问。

我创建了自己的数据类型并将其作为类的实例`Read`。我的数据类型实际上是取另一个类型作为参数，它是一个类型参数。

我`readPresc`以解析字符串并返回我的新数据的方式重新定义。当我写：

```
read "string that represent MyType a" :: MyType a 
```

它工作得很好（至少它符合我的预期）

现在我有一个函数，我们称之为`insert`，它接受一个 , 类型的元素`a`，`MyType a`并返回一个 new `MyTape a`。

```
insert :: a -> MyType a -> a 
```

但是当我写：

```
insert 3 "string that rapresent MyType Int" 
```

我得到了`Ambigous type`。

如何告诉 haskell 推断与`read`插入参数相同的类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T21:34:43.580

> 如何告诉 haskell 推断与`read`插入参数相同的类型？

您不需要，这是从`insert`.

问题是在

```
insert 3 (read "string that rapresent MyType Int" ) 
```

（我插入了`read`它可能是正确的类型），文字`3`是多态的。它的类型是

```
3 :: Num a => a 
```

所以这仍然没有足够的信息来确定`read`应该产生什么类型，因此错误。

您需要提供必要的信息，例如

```
insert (3 :: Int) (read "string that rapresent MyType Int" ) 
```

或者通过在确定类型变量的上下文中使用结果`a`。

# node.js - 动态方法参数

> ID：13555652
> 
> 赞同：2
> 
> 时间：2012-11-25T21:26:04.213
> 
> 标签：node.js, rethinkdb

我使用 rethinkdb 作为后端编写了一个 node.js 应用程序。

要检索 json 值，您可以使用：

```
r.table('users').get(1).run() 
```

该方法调用将返回完整的 json 文档，但是有一种方法允许您指定要检索的属性，例如：

```
r.table('users').get(1).pick('firstName', 'lastName').run() 
```

我想利用此功能，并且我将要“选择”的属性存储在数组中。我似乎无法找到将这个数组转换为 .pick 方法的参数列表的方法。

请指教。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T21:31:07.743

只需使用原生的 apply 方法直接传递参数数组：

```
r.table('users').get(1).pick.apply(this,yourArray).run() 
```

[进一步阅读](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

# linux - Cygwin bash：逐字读取文件

> ID：13555661
> 
> 赞同：1
> 
> 时间：2012-11-25T21:27:07.707
> 
> 标签：linux, bash, shell, unix, cygwin

我想逐字阅读文本文件。问题：有些词包含“/*”。这样的词导致脚本返回根目录中的文件。我试过：

```
for word in $(< file)
do
    printf "[%s]\n" "$word"
done 
```

以及与 echo/cat/etc 的其他几种组合......对于这个文件：

```
/* example file 
```

我得到以下输出：

```
[/bin]
[/cygdrive]
[/Cygwin.bat]
...
[example]
[file] 
```

应该很容易，但它让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:44:38.420

您需要关闭路径名扩展通配符。运行一个新的shell，`bash -f`然后重试。请参阅[http://wiki.bash-hackers.org/syntax/expansion/globs](http://wiki.bash-hackers.org/syntax/expansion/globs)`man bash`或使用，也许可以进入手册页`man bash | col -b >bash.txt`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:51:09.930

这个解决方案怎么样，周围的双引号`$(< file)`停止`*`被扩展并`sed`用于根据需要格式化输出：

```
for word in "$(< file)" 
do
    echo "$word" | sed -E 's/(\S*)(\s)/[\1]\2\n/g'
done 
```

输出：

```
[/*] 
[example] 
[file] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:40:25.390

这可能会有所帮助；

```
# skip blank lines and comment lines begining with hash (#)

cat $CONFIG_FILE | while read LINE
  do
  first_char=`echo $LINE | cut -c1-1`
  if [ "${first_char}" = "#" ] 
   then
      echo "Skip line with first_char=  >>${first_char}<<"
   else
     :
     echo "process line:  $LINE"  ;
   fi

done 
```

另一种方法是使用 case 语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T22:42:07.200

这个怎么样？

```
while read -a a; do printf '[%s]\n' "${a[@]}"; done < file 
```

输出：

```
[/*]
[example]
[file] 
```

# redis - 在 Redis 活动提要中处理已读/未读消息的最佳方式？

> ID：13555662
> 
> 赞同：4
> 
> 时间：2012-11-25T21:27:18.207
> 
> 标签：redis

我有一个使用 Redis 排序集的活动提要系统。

事件发生，消息被放置到每个相关用户的排序集中，并带有分数的时间戳。

然后在用户登录时或通过推送（如果用户当前已登录）将消息分发给用户。

我想区分用户已“阅读”的消息和仍未阅读的消息。

据我了解，我不能只将“已读/未读”属性作为成员的一部分，因为更改它会导致成员不同，因此会再次添加，而不是替换当前成员。

所以，我在想的是，对于每个用户，我必须对集合进行排序——一个“未读”集合和一个“已读”集合。

*   当新事件出现时，它们被添加到“未读”集中
*   当用户阅读消息时，我将消息添加到已读集中，并将其从未读集中删除。

不太确定如何交付它们。例如，我不能将它们合并，因为我失去了已读/未读之间的区别，除非我反转未读分数的分数。

单独返回这两个集合（并将它们合并到代码中）会使分页变得困难。无论已读/未读状态如何，我都希望能够收到 20 条最新消息。

所以，问题：

1.  读集/未读集是最好的方法吗？有没有更好的办法？
2.  返回合并/联合数据子集的最佳方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:00:18.060

您可以直接弹出并插入新版本，而不是尝试更新成员。应该没问题，因为您知道成员及其时间戳。

# coding-style - 尽早返回或使用 big if in 方法？

> ID：13555663
> 
> 赞同：1
> 
> 时间：2012-11-25T21:27:26.890
> 
> 标签：coding-style

> **可能重复：**
> [在函数开头使用 return 以避免做不必要的工作是不好的风格吗？](https://stackoverflow.com/questions/4548027/is-it-bad-style-to-use-return-at-the-beginning-of-a-function-to-avoid-doing-unne)

除了个人喜好之外，是否还有其他考虑是否要提前返回或使用 if 包含一个长方法，例如：

```
foo(bool bar)
{
    if(!bar)
    {
       return; 
    }

    ...
} 
```

## 对比

```
foo(bool bar)
{ 
    if (bar)
    {
       ...

       return;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:36:50.073

使用

```
foo(bool bar)
{ 
    if (bar)
    {
       ...

       return;
    }
} 
```

如果您在 if 块中有多个条件要测试，可能会有点麻烦。如：

```
foo(bool bar)
{ 
    if (bar)
    {
       ...
        if (baz)
        {
            ...
            if (barbaz)
            {
                ...
            }
        }
        return;
    }
} 
```

在这种情况下，如果你提前返回，你会减少很多嵌套。

```
foo (bool bar)
{
    if (!bar) return;
    ...
    if (!baz) return;
    ...
    if (!barBaz) return;
    ...
    return;
} 
```

事实上，作为 ReSharper 用户，我经常使用代码重新格式化建议“反转 if 以减少嵌套”。最后，我认为这是一个偏好，但对我来说，当没有太多嵌套的 if 来匹配大括号时，它似乎更具可读性。

# liferay - 在 Liferay 模板中访问裸页面名称

> ID：13555667
> 
> 赞同：3
> 
> 时间：2012-11-25T21:27:50.913
> 
> 标签：liferay, velocity

我正在尝试在 portal_normal.vm 中发出当前页面的名称。我所知道的所有选项都包括一堆必须清除的 XML 垃圾。

现在，我正在使用 $layout.getName()，它会产生以下结果：

```
<root default-locale="en_US" available-locales="en_US">
    <name language-id="en_US">
        Home
    </name>
</root> 
```

该页面的名称确实是“主页”，但其余的垃圾毁了它。

我也尝试过 $layout.name ，但它产生了相同的结果。

如何访问裸值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T21:30:02.317

根据我在[这篇文章](https://stackoverflow.com/questions/1923459/liferay-request-current-page-name)中看到的内容（似乎是关于编写控制器或 servlet 代码），我能够生成这段代码来获得裸名：

```
$layout.getName($themeDisplay.getLocale()) 
```

# java - java使用套接字发送文件

> ID：13555668
> 
> 赞同：5
> 
> 时间：2012-11-25T21:27:54.433
> 
> 标签：java, sockets, network-programming

我正在尝试使用 Java 将文件从一台计算机发送到另一台计算机。我已经编写了下面的代码，如果发送者和接收者都在同一台计算机上启动，但如果它们在不同的机器上工作，则接收文件大小大于原始文件并且已损坏。

注意：我正在尝试传输最大 10 MB 的文件。

我怎样才能解决这个问题？

发件人：

```
ServerSocket server_socket = new ServerSocket(8989);
File myFile = new File(myPath);

Socket socket = server_socket.accept();
int count;
byte[] buffer = new byte[1024];

OutputStream out = socket.getOutputStream();
BufferedInputStream in = new BufferedInputStream(new FileInputStream(myFile));
while ((count = in.read(buffer)) > 0) {
     out.write(buffer, 0, count);
     out.flush();
}
socket.close(); 
```

接收者：

```
Socket socket = new Socket(address, 8989);
FileOutputStream fos = new FileOutputStream(anotherPath);
BufferedOutputStream out = new BufferedOutputStream(fos);
byte[] buffer = new byte[1024];
int count;
InputStream in = socket.getInputStream();
while((count=in.read(buffer)) >0){
    fos.write(buffer);
}
fos.close();
socket.close(); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-25T21:31:22.203

在客户端，您**最多** `count`写入字节并发送它们：

```
while ((count = in.read(buffer)) > 0) {
  out.write(buffer, 0, count); 
```

在服务器端，您**最多** `count`读取字节 - 但随后您将整个缓冲区写入文件！

```
while((count=in.read(buffer)) > 0){
  fos.write(buffer); 
```

只需将其更改为：

```
fos.write(buffer, 0, count); 
```

你会安全的。顺便说一句，您的程序还有另一个小错误：`read()`可以返回`0`并不意味着`InputStream`结束。改用`>=`：

```
count = in.read(buffer)) >= 0 
```

* * *

您是否[`IOUtils.copy(InputStream, OutputStream)`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#copy(java.io.InputStream,%20java.io.OutputStream))从 Apache Commons 考虑过？它会将您的整个`while`循环减少到：

```
OutputStream out = socket.getOutputStream();
InputStream in = new FileInputStream(myFile);
IOUtils.copy(in, out);
socket.close(); 
```

更少的代码编写，更少的代码测试。缓冲是在内部完成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T21:31:20.487

请记住，`in.read(buffer)`不一定要用新数据填满整个缓冲区。因此，您应该确保不要写入整个缓冲区。改变

```
while((count=in.read(buffer)) >0){
    fos.write(buffer);
} 
```

至

```
while((count=in.read(buffer)) >0){
    fos.write(buffer, 0, count);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-01T12:16:58.007

发件人

```
Socket sock = new Socket("127.0.0.1", 5991);
        System.out.println("Connecting.........");
        File myFile = new File("/root/qrcode/");
        File[] files = myFile.listFiles();
       OutputStream os = sock.getOutputStream();
        BufferedOutputStream bos = new BufferedOutputStream(os);
                            DataOutputStream dos = new DataOutputStream(bos);

                            dos.writeInt(files.length);
                            long totalBytesRead = 0;
                            int percentCompleted = 0;
                            for(File file : files)
                            {
                                     long length = file.length();
                                     dos.writeLong(length);

                                     String name = file.getName();
                                     dos.writeUTF(name);

                                     FileInputStream fis = new FileInputStream(file);
                                     BufferedInputStream bis = new BufferedInputStream(fis);

                                     int theByte = 0;
                                     while((theByte = bis.read()) != -1)
                                     {
                                        totalBytesRead += theByte;

                                        bos.write(theByte);
                                     }
                                    //  System.out.println("file read");
                                     bis.close();
                                 }

                                dos.close();

        //Closing socket  
        sock.close(); 
```

接收者

```
ServerSocket serverSocket = new ServerSocket(5991);  

    while(true) {  
        Socket clientSocket = null; 
        System.out.println("Starting...");
        clientSocket = serverSocket.accept();  

        InputStream in = clientSocket.getInputStream(); //used

        BufferedInputStream bis = new BufferedInputStream(in);

        String dirPath  ;
        dirPath = "/root/NewFolder";

        try{
            DataInputStream dis = new DataInputStream(bis);

            int filesCount = dis.readInt();
            File[] files = new File[filesCount];
            long f_l = 0;
            int count =0 ;
            long totalBytesRead = 0;
            int percentCompleted = 0;

            for(int i = 0; i < filesCount; i++)
            {
                long fileLength = dis.readLong();
                String fileName = dis.readUTF();

                f_l = f_l +fileLength;
                files[i] = new File(dirPath + "/" + fileName);

                FileOutputStream fos = new FileOutputStream(files[i]);
                BufferedOutputStream bos = new BufferedOutputStream(fos);

                int tot = 0;
                for(int j = 0; j < fileLength; j++) {

                    bos.write(bis.read());
                }

                bos.close();

            }

        }catch(Exception ex)
        {
            System.out.println("error in socket programming ");
        }
    } 
```

# ruby-on-rails - 使用 Omniauth-Facebook gem 存储 user_likes

> ID：13555669
> 
> 赞同：0
> 
> 时间：2012-11-25T21:27:54.960
> 
> 标签：ruby-on-rails, facebook, omniauth

有谁知道user_likes 存储在**Auth Hash中的什么位置？**

我尝试了不同的组合：

```
auth.extra.raw_info.user_likes
auth.extra.raw_info.likes 
```

我得到了许可，我只是不知道如何访问 user_likes 数组。

[Omniauth-Facebook 宝石](https://github.com/mkdynamic/omniauth-facebook)

**一段时间后（编辑）**

或者，我可以使用 HTTParty gem 做这样的事情：

```
 url = "https://graph.facebook.com/#{auth.uid}/likes&access_token=#{auth.credentials.token}"
  @likes = HTTParty.get(url) 
```

但我真的很想知道它是否可以通过omniauth身份验证过程......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:17:41.490

omn​​iauth-facebook gem 使用 /me 调用来填充 raw_info 哈希。根据 facebook 文档[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)，喜欢不包含在用户对象中，而是可以通过调用[https://graph.facebook.com访问的连接/我/喜欢](https://graph.facebook.com/me/likes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:39:45.040

希望这个回复虽然迟了，但可以帮助那些试图弄清楚身份验证哈希对象的不同哈希部分内部的人（架构参考：[https](https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema) ://github.com/intridea/omniauth/wiki/Auth-Hash-Schema ）

与其尝试不同的组合（如问题中所述），不如简单地将对象作为 yaml 呈现给浏览器。现在，浏览器输出的页面源将清楚地显示身份验证对象返回的部分内容。其他选项是在回调控制器中放置调试中断并检查 auth 对象（在这种情况下，ide 将非常有用）。

路线.rb

```
 ...
 match '/auth/facebook/callback' => 'authentications#create'
 ... 
```

authentications_controller.rb （或您接收回调的控制器）

```
class AuthenticationsController < ApplicationController
    ...

    def create
        # a simple code to understand the content of the auth object
        render :text => request.env["omniauth.auth"].to_yaml
    end
 end 
```

# php - 为什么 PDO 需要 1 秒才能连接？

> ID：13555674
> 
> 赞同：3
> 
> 时间：2012-11-25T21:28:28.260
> 
> 标签：php, pdo

我使用 MySQL Workbench 来运行查询。运行它们几乎不需要任何时间。但是，当我通过 PDO 连接到数据库时，连接需要超过一秒钟！为什么？

```
<?php

$host = "localhost";
$db = "localhost";
$user = "root";
$pass = "";

$mtime = explode(" ",microtime());
$starttime = $mtime[1] + $mtime[0];

$conn = new PDO("mysql:host=$host;dbname=$db",$user,$pass);

$mtime = explode(" ",microtime());
$totaltime = (($mtime[1] + $mtime[0]) - $starttime);
echo $totaltime * 1000; 
```

这输出：

```
1008.975982666 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T21:31:08.250

在 windows vista 和更新版本上使用`127.0.0.1`而不是本地主机。

# javascript - 显示更多/更少的效果

> ID：13555676
> 
> 赞同：4
> 
> 时间：2012-11-25T21:28:42.547
> 
> 标签：javascript, jquery, html, css

我找到了这段代码：[链接](https://stackoverflow.com/questions/12307666/how-to-create-a-show-more-button-and-specify-how-many-lines-of-text-can-be-ini)

```
$(".show-more a").on("click", function() {
var $this = $(this); 
var $content = $this.parent().prev("div.content");
var linkText = $this.text().toUpperCase();    

if(linkText === "SHOW MORE"){
    linkText = "Show less";
    $content.switchClass("hideContent", "showContent", 400);
} else {
    linkText = "Show more";
    $content.switchClass("showContent", "hideContent", 400);
};

$this.text(linkText);
});​ 
```

CSS：

```
 div.text-container {
    margin: 0 auto;
    width: 75%;    
}

.hideContent {
    overflow: hidden;
    line-height: 1em;
    height: 2em;
}

.showContent {
    line-height: 1em;
    height: auto;
}
.showContent{
    height: auto;
}

h1 {
    font-size: 24px;        
}
p {
    padding: 10px 0;
}
.show-more {
    padding: 10px 0;
    text-align: center;
} 
```

​</p>

这正是我想要的，但正如您在此处看到的，如果您修改它（[链接](http://jsfiddle.net/Wpn94/2/)），如果您只有一两行，“显示更多”链接就在那里，在这种情况下不需要它。谢谢您的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T22:04:05.133

由于您的示例代码没有完全工作，我决定增强我在前一段时间在一篇文章中创建的我[自己的一个示例。](http://midnight-coding.blogspot.ie/2012/09/jquery-implementing-show-more-show-less.html)

### [演示](http://jsfiddle.net/FranWahl/Ywq6n/)- 显示更多/更少并在不需要时隐藏链接

该演示显示第一个文本没有链接，第二个文本有链接。如果您在第一个文本中添加更多字符，您会在再次运行小提琴时看到链接出现。

这个想法是仔细检查客户端与实际高度，然后确定是否要显示链接。类似于下面的。

```
$(".show-more a").each(function() {
    var $link = $(this);
    var $content = $link.parent().prev("div.text-content");

    console.log($link);

    var visibleHeight = $content[0].clientHeight;
    var actualHide = $content[0].scrollHeight - 1; // -1 is needed in this example or you get a 1-line offset.

    console.log(actualHide);
    console.log(visibleHeight);

    if (actualHide > visibleHeight) {
        $link.show();
    } else {
        $link.hide();
    }
}); 
```

该演示使用以下 HTML：

```
<div class="text-container">
    <h1>Lorem ipsum dolor</h1>
    <div class="text-content short-text">
        Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
        labore Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt
    </div>
    <div class="show-more">
        <a href="#">Show more</a>
    </div>
    </div>
<div class="text-container">
    <h1>Lorem ipsum dolor</h1>
    <div class="text-content short-text">
        Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. 
        At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. 
        Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
    </div>
    <div class="show-more">
        <a href="#">Show more</a>
    </div>
</div>​ 
```

以及以下基本 CSS：

```
div.text-container {
    margin: 0 auto;
    width: 75%;    
}

.text-content{
    line-height: 1em;
}

.short-text {
    overflow: hidden;
    height: 2em;
}

.full-text{
    height: auto;
}

h1 {
    font-size: 24px;        
}

.show-more {
    padding: 10px 0;
    text-align: center;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:55:37.863

在这里查看工作小提琴 - [http://jsfiddle.net/tariqulazam/hpeyH/](http://jsfiddle.net/tariqulazam/hpeyH/)

首先，您必须衡量内容是否溢出。我已经使用了[使用 jquery 检测元素溢出](https://stackoverflow.com/questions/2059743/detect-elements-overflow-using-jquery)的解决方案。

最后使用这个插件来决定是否显示或隐藏“显示更多”链接。

```
$("div.content").HasScrollBar() ==true ? $(".show-more").show():$(".show-more").hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T21:56:51.973

我不知道你真正的问题是什么，但我想你想停用显示更多链接，如果文本只有 1 或 2 行，如果文本超过 2 行，则激活它。

为此，您必须检查带有文本的 div 是否大于您的阈值（2 行）。在我的解决方案中，我使用**height()**函数，它为您提供**像素**高度。在原始示例中，如果高度超过**2em** ，则链接文本不可见。你最好也使用像素或使用工具来转换单位。

**这是我为阈值为 1 行**的解决方案添加的行：

```
var text = $('.text-container');
if (text.height() <= 20) {
    $('.show-more').hide();
} 
```

[http://jsfiddle.net/JRDzf/](http://jsfiddle.net/JRDzf/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T22:21:33.317

```
 if( $('.text-container').html().indexOf("<br") >= 0 ) {
        $(".show-more").hide()
    } 
```

# javascript - 允许在 phonegap 中发送和接收 json 数据的 Javascript 文件

> ID：13555679
> 
> 赞同：0
> 
> 时间：2012-11-25T21:29:07.993
> 
> 标签：javascript, json, cordova, blackberry-webworks

哪些 javascript 文件必须在客户端或服务器端可用，您才能在 BlackBerry phonegap 应用程序中发送和接收 json 数据。

我看到在所有已发布的 json 相关问题的解决方案中经常忽略这一点。

我对 phonegap 和 jQuery 完全陌生，所以我需要帮助，我也在尝试将表单详细信息（如名字和姓氏）发送到服务器端的 php 文件。

这样数据将由php处理，记录将存储在我的数据库中。

有人可以教我如何使用 json 发送数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:11:48.143

您可以从此[博客](http://catchmayuri.blogspot.in/2012/01/working-with-json-phonegap-application.html)获取有关 phonegap 中 Json 集成的详细信息。

这篇博客将通过一个简单的例子来解释如何使用 JSON 来简化客户端-服务器数据传输。

不要为服务器站点而烦恼，服务器团队（PHP / Java）会处理它。
在 phonegap 应用程序中，每个逻辑都是在 javascript 中构建的，因此在您的情况下，如果您想向服务器发送一些信息，您需要创建 json 对象并将其附加到`$.ajax`函数和相同的函数以接收来自服务器的响应：

```
$.ajax({  
   url:'stringURL',  
   beforeSend: function(x) {      
     x.setRequestHeader('Authorization','username/pwd');  
   },  
   dataType:"json",  
   contentType:'application/json',  
   timeout:10000,  
   type:'POST', 
   data : {
     //append json data here if you want to send some data to server
   }, 
   success:function(data) {  
     alert(data); // here you will get json data on success, parse it like key-value mechanism in js 
   },  
   error:function(XMLHttpRequest,textStatus, errorThrown) {     
     alert("Error status :"+textStatus);  
     alert("Error type :"+errorThrown);  
     alert("Error message :"+XMLHttpRequest.responseXML);  
   }
});
```

请查看此[博客](http://phpmaster.com/writing-a-restful-web-service-with-slim/)以编写 php-web 服务或与您的服务器团队分享。

# windows-8 - 创建您自己的库以在 Visual Studio 中的窗口存储开发 (js) 中使用

> ID：13555680
> 
> 赞同：0
> 
> 时间：2012-11-25T21:29:13.713
> 
> 标签：windows-8, visual-studio-2012, static-libraries, winjs

我是一个 javascript/html 开发人员，还没有过多地涉足 Visual Studio，所以这可能是一个微不足道的问题。

我目前正在开发一个 Windows 应用商店应用程序 (winJS)，它可能会变成几个应用程序。而且我很有可能会重用代码，所以我用通用代码制作了一个 js 库。

问题是，我如何在 Visual Studio 中开发此库，以便我正在开发的应用程序将使用它的最新版本（即无需我再次手动复制文件）。

我能想到的最好的事情是，为 lib 创建一个新项目，并将其包含在应用程序解决方案中，但它必须是什么类型的项目，以及如何公开文件？

希望这是有道理的！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:07:39.090

我通常通过让项目将我想要的 JS 文件复制到一个公共位置来解决这个问题，然后使用我想要包含的文件的*链接*将该文件添加到目标项目中，而不是仅仅添加它——这是在“添加现有文件”对话框，位于“添加”按钮上的小箭头下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T00:36:02.683

VS 2012 没有 JavaScript 库项目类型。您必须将库作为松散文件进行管理。

最简单的事情可能是创建一个 nuget 包。这样一来，就可以轻松地参与其他项目并让该工具帮助您保持最新状态。它确实有需要将你的东西放入 nuget 提要的缺点，这不是你想要的私人东西。

# javascript - 在内容可编辑的 div 中将光标包裹在 html 中

> ID：13555681
> 
> 赞同：2
> 
> 时间：2012-11-25T21:29:16.480
> 
> 标签：javascript, html, range

我正在寻找将光标包装`span`在 contenteditable 中的标签中`div`。

示例（由 表示的光标`|`）：

*   前：

`The fox jumps |`

*   后：

`The fox jumps <span>|</span>`

任何修改 innerHTML 的尝试都会导致光标移动到行尾。我希望将它插入新的 HTML*之间*`span`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-27T08:53:20.693

实际上，您可以做一个技巧：

```
var range = sel.getRangeAt(0);
var span = document.createElement("span");
span.innerHTML = "&#8203;";
range.insertNode(span);
range.setStart(span, 0);
range.setEnd(span, 1);
sel.removeAllRanges();
sel.addRange(range); 
```

在 chrome 中工作：http: [//jsfiddle.net/8TTb3/8/](http://jsfiddle.net/8TTb3/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:01:15.360

由于实现问题，这不可能跨浏览器。尝试将插入符号放在空的内联元素中，例如`<span>`在 WebKit 和 IE 中的 a 中，实际上会将插入符号放在元素之前。以下演示了这一点：它将满足您在 Firefox 中的期望，而不是 WebKit 或 IE。

[http://jsfiddle.net/8TTb3/1/](http://jsfiddle.net/8TTb3/1/)

您可以使用[DOM Range](https://developer.mozilla.org/en-US/docs/DOM/range)和[Selection](https://developer.mozilla.org/en-US/docs/DOM/Selection) API 在插入符号位置插入元素，但 IE < 9 除外，它不支持这些，而是​​有自己的 API。

代码：

```
var range = sel.getRangeAt(0);
var span = document.createElement("span");
range.insertNode(span);
range.setStart(span, 0);
range.setEnd(span, 0);
sel.removeAllRanges();
sel.addRange(range); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:19:04.640

您唯一可以控制的是光标在 div 的（已解析的）内容中的位置。如果您在其中放置一个跨度，它将在浏览器插入光标之前被解析，此时光标将在它之前或之后。

所以不，我认为这是不可能的。

# python - ImportError：无法导入名称 WebAPI

> ID：13555685
> 
> 赞同：2
> 
> 时间：2012-11-25T21:29:45.087
> 
> 标签：python, importerror, python-import

我想使用“shodan”API，但对我来说效果不佳。

首先，我在终端中执行了此命令，`easy_install shodan` 这是输出：

```
$easy_install shodan
Searching for shodan
Best match: shodan 0.8.1
Processing shodan-0.8.1-py2.7.egg
shodan 0.8.1 is already the active version in easy-install.pth

Using /usr/local/lib/python2.7/dist-packages/shodan-0.8.1-py2.7.egg
Processing dependencies for shodan
Finished processing dependencies for shodan 
```

然后我写了我的代码：

```
#! /usr/bin/python en

    from shodan import WebAPI

    SHODAN_API_KEY = "Key"

    api = WebAPI(SHODAN_API_KEY)

    # Wrap the request in a try/ except block to catch errors 
```

它给了我一个错误：

```
ImportError: cannot import name WebAPI 
```

我搜索了类似的问题，一些答案是更改文件名，一些是删除 pyc 文件。我尝试了两个答案，但它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:04:38.583

你的剧本叫什么名字？如果您的脚本名称是“shodan”，即与 Shodan 库同名，则可能会发生名称冲突。Python 3 还有一个问题导致一些导入问题，但如果您使用的是最新版本的 Shodan API 库，则应该解决。而且我回应了 luc 的评论，即缩进看起来错误，因此您还需要修复它才能执行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T14:38:12.587

我找到了我应该安装 py crypto 的答案

sudo apt-get install python-crypto

# php - PHP - htmlspecialchars

> ID：13555687
> 
> 赞同：-2
> 
> 时间：2012-11-25T21:29:59.990
> 
> 标签：php, html-entities, htmlspecialchars

我正在尝试使用“htmlspecialchars”功能来清理 URL。下面是代码：

```
$new = htmlspecialchars("<a href='test'>Test</a>", ENT_QUOTES);
echo $new; 
```

预期的输出应该是：

```
&lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt; 
```

但是我得到的是：

```
<a href='test'>Test</a> 
```

它实际上根本没有剥离特殊字符。我做错了什么吗？上面的示例是直接从 php.net 复制和粘贴的。

我正在使用 PHP 版本 5.4.8。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:32:11.970

当我运行它时，我得到的输出是：

```
&lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt; 
```

任何一个：

*   你的 PHP 解释器坏了
*   您正在查看*呈现的*HTML 而不是 HTML 源

# javascript - 用于动态输入名称的 jQuery 选择器

> ID：13555690
> 
> 赞同：1
> 
> 时间：2012-11-25T21:30:15.253
> 
> 标签：javascript, jquery, jquery-selectors

我有一组复选框，其名称如下

```
form[check][..] 
```

其中 .. 是一个数字 (id)。我会有另一个选中的复选框将选中所有以前的复选框，一种选中/取消选中所有复选框。问题是，jQuery 怎么能得到所有的复选框？

**编辑 1**

这是我当前的 html 标记：

```
<input type="checkbox" value="1" name="form[check][1]" />
<input type="checkbox" value="1" name="form[check][2]" />
<input type="checkbox" value="1" name="form[check][3]" />
<input type="checkbox" value="1" name="form[check][..]" />

<input type="checkbox" name="checkAll" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:33:47.750

将类添加到要检查的复选框，并使用该类选择它们

```
$('.myCheckbox').prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:36:30.070

```
$('[name="checkAll"]').on('change', function(){
    $('input[name^="form[check]"]:checkbox').prop('checked', $(this).prop('checked'));
});​ 
```

# matlab - Github 将 Matlab .m 文件错误分类为 Objective-C 文件

> ID：13555691
> 
> 赞同：6
> 
> 时间：2012-11-25T21:30:22.680
> 
> 标签：matlab, github, file-extension, github-linguist

我是 Git 新手，我正在尝试将本地分支推送到 Github 上的远程目录。我的项目在 Matlab 上，所以文件有 .m 扩展名。它们自然不会显示任何objective-c 语言模式。我什至签入了一些 .mat 文件。但是它们被错误地归类为 Objective-C 文件。

我想知道：

*   推送后，我们可以直接在 Github 中修改语言吗？很抱歉，如果它很容易找到，但我真的找不到。

*   我发现其他人的 Matlab 项目可以正确分类，只需 .m 扩展名。有些人还提到，如果你用 .matlab 扩展名命名你的文件，它可以很容易地被识别为 Matlab 语言，但这不是一个干净的解决方案。我想知道，文件可以被识别为带有 .m 扩展名的 matlab 的标准是什么，或者只是为了增加被识别为 matlab 语言的机会。我注意到有些人只是在他们的文件名中添加了 matlab，但不这样做的人也成功了。

我已经向 Github 发送了一封电子邮件寻求帮助。他们回答了第一个问题：答案是否定的。

> GitHub 根据属于每种语言的文件的总大小来确定语言。我们使用 Linguist 库来分析源代码文件：[https ://github.com/github/linguist](https://github.com/github/linguist)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-12T20:33:50.783

现在可以使用[语言学家覆盖](https://github.com/github/linguist#overrides)来覆盖语言学家的检测结果。特别是，您可以使用`.gitattributes`存储库中的文件：

```
*.m linguist-language=Objective-C 
```

注意：如果您在本地检查，则需要先提交`.gitattributes`文件才能看到效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:38:35.593

我想这与 webapps 堆栈交换中的问题相同：[https ://webapps.stackexchange.com/questions/31654/force-github-syntax-highlighting-language-on-source-files](https://webapps.stackexchange.com/questions/31654/force-github-syntax-highlighting-language-on-source-files)

似乎这样做的方法是将模棱两可的.m扩展名更改为.matlab，即使作者不喜欢它......

# sql - 边界框 - 点

> ID：13555694
> 
> 赞同：1
> 
> 时间：2012-11-25T21:30:41.660
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2, geometry, geospatial

我有两列 Northing 和 Easting，采用 NZTM 2000 格式。从这两列中，我使用geometry:: Point(Easting,Northing,0) 计算我的几何列。下一步创建一个边界框以在我的几何列上创建空间索引。创建空间索引时，SQL Server 2008 R2 要求我提供 Bound Box，即 X Min、Y Min、X Max、Y Max。

那么我需要如何计算我的边界框以在我的几何列上创建空间索引。我能找到 min(Northing) = X Min, min(Easting), max(Northing), Max(Easting)。如果我正在做正确的计算来为我的空间索引创建边界框，有人可以帮助我吗？

我想创建索引的原因是因为我想使用 STContains() 来检查我的点在该区域中是否存在。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:00:25.333

这取决于您是否希望索引覆盖所有数据或仅覆盖部分数据。对于全面覆盖，您将使用：
XMIN：-180
YMIN：-90
XMAX：180
YMAX：90

参考：[Alastair Aitchison 用 SQL server 开始 Spatial](http://books.google.no/books?id=bceM3BTzbzAC&lpg=PA305&ots=8cZa69YzA6&dq=sql%20server%20geometry%20bounding%20box&pg=PA394#v=onepage&q&f=false)
（我强烈推荐这本书）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T04:02:57.283

我没有使用 Eastings 和 Northings，但我相信同样的逻辑应该适用。

我使用以下代码从几何创建邮政编码边界框：

更新 BBox.dbo.ZIPs
SET bbox = geom.STEnvelope()

我也强烈推荐买托马斯提到的那本书。

# java - 正则表达式带空格连字符

> ID：13555700
> 
> 赞同：0
> 
> 时间：2012-11-25T21:31:18.903
> 
> 标签：java, regex

我无法在连字符前后删除一个空格。我试过了： -

```
sample.replaceAll("[\\s\\-\\s]","") 
```

和排列无济于事。我不想剥离所有空间，也不想剥离所有中间空间。我试图解析一个基于`" "`但想要消除的字符串`"-"`。任何见解表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:32:11.430

`[\s\-\s]`是一个字符类，不匹配`space followed by - followed by space`. 它匹配任何字符 - `space`、 和`-`，并将它们替换为`empty string`。

你可以使用这个： -

```
sample = sample.replaceAll("[ ]-[ ]","-"); 
```

或者，甚至`String.replace`可以在这里工作。你真的不需要`replaceAll`： -

```
sample = sample.replace(" - ", "-"); 
```

# html - 如何抵消固定导航栏将我带到的位置？

> ID：13555709
> 
> 赞同：15
> 
> 时间：2012-11-25T21:32:18.943
> 
> 标签：html, css, navigation

我的网站上有一个固定的导航栏，它位于顶部，带有链接，可以将我带到页面下方的不同部分。但是，因为我的固定导航栏的高度为 40px，所以每个部分的开头 40px 都被覆盖了。我将如何使用 HTML 或 CSS 将我的链接带我的位置偏移 40 像素？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T21:55:47.237

您可以尝试将“虚拟”锚点绝对定位在每个部分顶部上方 40 像素处。您可以给它们零宽度/高度和隐藏可见性，以确保这些锚点不会影响页面的显示方式。当用户单击固定导航栏中的链接之一时，窗口将滚动到虚拟锚点的顶部，在其实际部分的开头上方 40 像素处。

示例 HTML：

```
<div class="navbar">
  <a href="#anchor1">Anchor 1</a>
  <a href="#anchor2">Anchor 2</a>
  <a href="#anchor3">Anchor 3</a>
</div>
<div class="section">
  <span id="anchor1" class="anchor"></span>
  Section Content
</div>
<div class="section">
  <span id="anchor2" class="anchor"></span>
  Section Content
</div>
<div class="section">
  <span id="anchor3" class="anchor"></span>
  Section Content
</div>​ 
```

示例 CSS：

```
body {
    padding-top: 40px;
}
.navbar {
    position: fixed;
    width: 100%;
    height: 40px;
    top: 0;
    left: 0;
    z-index: 10;
    border-bottom: 1px solid #ccc;
    background: #eee;
}
.section {
    position: relative;
}
.anchor {
    display: block;
    position: absolute;
    width: 0;
    height: 0;
    z-index: -1;
    top: -40px;
    left: 0;
    visibility: hidden;
} 
```

有关工作示例，请参阅[http://jsfiddle.net/HV7QL/](http://jsfiddle.net/HV7QL/)

**编辑：** CSS3 还包括`:target`伪类，它适用于`id`已被`href`文档中的链接或 URL 的哈希值引用的元素。您可以在顶部应用 40 像素填充，该填充`:target`将仅应用于用户从固定导航栏中选择的部分。

示例 CSS：

```
.section:target {
    padding-top: 40px;
} 
```

这在语义上比上述方法更干净，但不适用于旧浏览器。

工作示例：http: [//jsfiddle.net/5Ngft/](http://jsfiddle.net/5Ngft/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-25T21:42:14.483

我自己今天碰巧偶然发现了这个问题，所以我已经考虑了一段时间，但我想我刚刚找到了解决方案：

将 a 添加`padding-top: 40px; margin-top: -40px`到要跳转到的元素。负边距取消了内边距，但浏览器仍然认为元素的顶部比实际高 40px（因为实际上是这样，只是它的内容开始较低）。

不幸的是，这可能会与已经设置的边距和填充发生冲突，如果您在目标元素上使用背景，它会搞砸一切。

我会看看我是否可以解决这个问题并发布一个 jsfiddle，但同时这里至少有一个基本答案:)

*编辑*：我以为我有背景的解决方案，但没有奏效。又删了。

*最终编辑*：如果您知道包装元素的背景颜色，它会起作用。在我的示例中，我知道文本位于白色背景上，但标题具有银色背景。为了防止标题在我们设置的额外填充上具有背景，而是将它放在它之前的伪元素上：

```
#three:before { 
    content: " ";
    background: white;
    display: block;
    margin-top: -40px;
    padding-top: 40px;
} 
```

这样，额外的填充再次具有白色背景，但这仅在您已经知道它需要什么背景时才有效。例如，将其设置为透明将显示标题本身的底层背景，而不是文章的背景。

jsFiddle： http: [//jsfiddle.net/Lzve6/](http://jsfiddle.net/Lzve6/) 标题一是您遇到问题的默认标题。标题二是我的第一个解决方案，保证几乎可以在所有浏览器上使用标题三使用`:before`伪元素，可能不适用于[旧浏览器](http://css-tricks.com/browser-support-pseudo-elements/)。

# php - 为什么此正则表达式与此 Google 结果页面中的 URL 不匹配？

> ID：13555711
> 
> 赞同：0
> 
> 时间：2012-11-25T21:32:25.730
> 
> 标签：php, regex, html-parsing

我无法从 Google 结果中抓取网址。这段代码为我工作了很长时间，但似乎谷歌本周改变了一些东西，现在我得到了大量的额外字符，被我想要的实际 URL 包围。

```
preg_match_all('@<h3\s*class="r">\s*<a[^<>]*href="([^<>]*)"[^<>]*>(.*)</a>\s*</h3>@siU',     $results, $matches[$key]); 
```

**编辑**

用上面的代码刮掉所有的链接都是这样的

```
/url?url=http://cooksandtravelbooks.com/write-for-us/&rct=j&sa=U&ei=XdayUNnHBIqDiwKZuYEY&ved=0CBQQFjAA&q=cooking+%5C%22Write+for+Us%5C%22&usg=AFQjCNGMiCiWYY_8JDAhqJggVDW2qHRMfw 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:39:26.747

```
<?php
$url = "http://www.google.com";
$ch = curl_init();
$timeout = 5;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$data = curl_exec($ch);
curl_close($ch);

$dom = new DOMDocument();
@$dom->loadHTML($data);

foreach($dom->getElementsByTagName('a') as $link) {
    echo $link->getAttribute('href');
    echo "<br />";
}
?> 
```

# numpy - 3d 数组平面上的 Numpy 总和，返回一个标量

> ID：13555712
> 
> 赞同：3
> 
> 时间：2012-11-25T21:32:47.387
> 
> 标签：numpy

我正在从 MATLAB 过渡到 Numpy，并感到一些成长的痛苦。

我有一个 3D 数组，可以说它是 3x3x3，我想要每个平面的标量和。在matlab中，我会使用：

```
sum_vec = sum(3dArray,3); 
```

TIA wbg

编辑：我的 matlab 代码错了。Matlab 仅在一个暗淡中矢量化，因此需要一个循环。所以 numpy 变得更加优雅......酷。

```
MATLAB
for i = 1:3
    sum_vec(i) = sum(sum(3dArray(:,:,i));
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T21:39:21.173

你可以做

```
sum_vec = np.array([plane.sum() for plane in cube]) 
```

或者干脆

```
sum_vec = cube.sum(-1).sum(-1) 
```

`cube`你的 3d 数组在哪里。您可以根据平面的方向指定`0`或`1`代替`-1`（或）。`2`后一个版本也更好，因为它不使用 Python 循环，这通常有助于提高使用`numpy`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T21:37:32.833

您应该使用`axis`关键字 in [`np.sum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html)。与许多其他 numpy 函数一样，`axis`允许您沿特定轴执行操作。例如，如果您想沿数组的最后一个维度求和，您可以：

```
import numpy as np
sum_vec = np.sum(3dArray, axis=-1) 
```

您将得到一个生成的二维数组，它对应于所有数组 slice 的最后一个维度的总和`3dArray[i, k, :]`。

**更新**

我不明白你到底想要什么。您想对两个维度（平面）求和。在这种情况下，您可以进行两次求和。例如，对前两个维度求和：

```
sum_vec = np.sum(np.sum(3dArray, axis=0), axis=0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T05:58:53.707

您可以对重构后的数组执行求和，而不是两次应用相同的 sum 函数：

```
a = np.random.rand(10, 10, 10) # 3D array
b = a.view()
b.shape = (a.shape[0], -1)
c = np.sum(b, axis=1) 
```

以上应该更快，因为您只求和一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-16T19:01:15.300

如果您试图在平面上求和（并避免循环，这始终是一个好主意），您可以使用 np.sum 并将两个轴作为元组传递给您的论点。例如，如果您有一个 (nx3x3) 数组，则使用

```
np.sum(a, (1,2)) 
```

将给出一个 (nx1x1)，在一个平面上求和，而不是单个轴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-26T01:39:19.503

```
sumvec= np.sum(3DArray, axis=2) 
```

或者这也有效

```
sumvec=3DArray.sum(2) 
```

请记住 Python 以 0 开头，因此 axis=2 代表第三维。

[https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.sum.html](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.sum.html)

# drools - 将 Drools 评估为我项目的规则引擎

> ID：13555718
> 
> 赞同：2
> 
> 时间：2012-11-25T21:33:18.193
> 
> 标签：drools, rule-engine

在我的项目中，我有一些要求，我想使用 Drools 来适应。有一些规则不会经常更改并作为基础。然后应该有第二个 DSLR，它会更频繁地更改，并且应该扩展、覆盖和/或聚合已经定义的规则。

是否可以针对此类要求使用流口水。我红色了 Drools 文档，但我不确定这是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:01:58.147

我怀疑您现在已经制定了计划，但作为参考，这里有一个答案。

您所描述的是一个典型的 Drools 应用程序，因此在高层次上，“是的”Drools 可以这样使用。

您可以设置一些初始的 DRL 技术规则，这些规则非常适合开发人员维护。下一步是如何支持业务用户。Drools 提供：

DSL/DSRL - 开发人员编写 DSL 模板，将自然语言风格的短语映射到 DRL。业务用户使用该自然语言语法编写 DSRL。实际上，我倾向于发现这很容易阅读，但正确编写却不是那么容易。但是，如果您有 Guvnor，则引导式规则利用 DSL 使业务用户能够轻松地构建规则。他们可以从下拉列表中挑选并使用 DSL 构建规则。

电子表格 - 开发人员在这里创建一个电子表格，其中包含许多将单元格映射到规则的隐藏字段。表中的每一行都成为一条规则。业务用户只需要填写字段。

Web 决策表——在 Guvnor 中，这些在外观上类似于电子表格，开发人员可以轻松地创建一个表，将 LHS 约束映射到操作，这可能是修改现有事实或创建新事实。同样，业务用户可以通过向表中添加行并更改单元格中的值来维护这些。从业务用户的角度来看，这些可能是最不“技术性”的，所以我尽可能喜欢它们。

如果您使用 Guvnor，那么业务用户有一个网站，他们可以访问他们可以更新规则并保存规则的地方。根据您的工作方式，运行时规则引擎可以自动获取这些更改，或者您可以为规则更改实施更严格的发布过程。

# c# - 调用 SuspensionManager.SaveAsync() 时出现异常

> ID：13555722
> 
> 赞同：5
> 
> 时间：2012-11-25T21:33:31.330
> 
> 标签：c#, exception, windows-8, facebook-c#-sdk

我正在构建一个 Windows 8 应用程序并提出了以下异常：

> 暂停管理器失败

运行以下代码时：

```
private async void OnSuspending(object sender, SuspendingEventArgs e)
{
    var deferral = e.SuspendingOperation.GetDeferral();
    await SuspensionManager.SaveAsync();
    deferral.Complete();
} 
```

异常发生在方法的第三行，它并没有真正提供任何细节。

我没有在网上找到任何有用的信息。有没有人见过这个？

//编辑

这可能与我使用`dynamic`Windows 8 Facebook SDK 的类型变量有关。

`dynamic`不允许使用变量吗？

//编辑2

下面是`dynamic`变量的用法：

```
dynamic result = await FB.GetTaskAsync("fql", parameters);
if (result.data.Count > 0)
{
    return result.data[0].src_big as string;
} 
```

以及异常的调用堆栈：

```
mscorlib.dll!System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(System.Threading.Tasks.Task task) + 0x5e bytes  
mscorlib.dll!System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(System.Threading.Tasks.Task task) + 0x35 bytes 
mscorlib.dll!System.Runtime.CompilerServices.TaskAwaiter.GetResult() + 0x16 bytes   
FacebookRandomizer.exe!FacebookRandomizer.App.OnSuspending(object sender, Windows.ApplicationModel.SuspendingEventArgs e) Line 86 + 0xa5 bytes  C#
[Native to Managed Transition] 
```

前三个是外部代码，第四个是我在App.xaml.cs中的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:25:30.070

找到了答案，这完全与 Facebook-sdk 无关。

我在暂停时将位图图像保存在 pageState 中，显然这不起作用。

这是旧代码：

```
BitmapImage img = RandomImage.ImageSource as BitmapImage;
pageState["currentImage"] = img; 
```

和新的：

```
BitmapImage img = RandomImage.ImageSource as BitmapImage;
Uri uriSource = img.UriSource;
pageState["currentImage"] = uriSource; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T05:07:14.327

我能够通过确保我有可序列化的类型（在我的例子中是简单的视图模型类）来解决这个问题。然后在项目的`App`构造函数中`Shared`，确保`SuspensionManager`知道我的类型。标准的内置序列化程序完成了他们的工作，我完成了。

```
 public App() {
        // ... existing code ...
        SuspensionManager.KnownTypes.Add(typeof(TypeOne));
        SuspensionManager.KnownTypes.Add(typeof(TypeTwo));
    } 
```

# java - Java中如何优化并发操作？

> ID：13555723
> 
> 赞同：0
> 
> 时间：2012-11-25T21:33:34.400
> 
> 标签：java, multithreading

我对 Java 中的多线程仍然很不满意。我在这里描述的是我的应用程序的核心，我需要把它做好。该解决方案需要快速运行，并且需要**实际**安全。这行得通吗？欢迎任何建议/批评/替代解决方案。

* * *

我的应用程序中使用的对象生成起来有些昂贵，但很少更改，因此我将它们缓存在 *.temp 文件中。一个线程可能会尝试从缓存中检索给定对象，而另一个线程则尝试在那里对其进行更新。检索和存储的缓存操作被封装在一个 CacheService 实现中。

考虑这种情况：

```
Thread 1: retrieve cache for objectId "page_1".
Thread 2: update cache for objectId "page_1".
Thread 3: retrieve cache for objectId "page_2".
Thread 4: retrieve cache for objectId "page_3".
Thread 5: retrieve cache for objectId "page_4". 
```

注意：线程 1 似乎检索了一个过时的对象，因为线程 2 有它的更新副本。这完全没问题，所以我不需要任何可以赋予线程 2 优先级的逻辑。

如果我在我的服务上同步检索/存储方法，那么我不必要地减慢线程 3、4 和 5 的速度。多个检索操作在任何给定时间都会有效，但很少会调用更新操作。这就是我想避免方法同步的原因。

我收集我需要在线程 1 和 2 专用的对象上进行同步，这意味着锁定对象注册表。在这里，一个明显的选择是 Hashtable，但同样，Hashtable 上的操作是同步的，所以我正在尝试 HashMap。该映射存储了一个字符串对象，用作同步的锁对象，键/值将是被缓存对象的 id。所以对于对象“page_1”，键是“page_1”，锁定对象是一个值为“page_1”的字符串。

如果我的注册表正确，那么我还想保护它不被太多条目淹没。让我们不要详细说明原因。让我们假设，如果注册表已经超过了定义的限制，它需要用 0 个元素重新初始化。这对于不同步的 HashMap 有点风险，但这种泛滥将是正常应用程序操作之外的事情。这应该是非常罕见的情况，希望永远不会发生。但既然有可能，我想保护自己免受它的伤害。

```
@Service
public class CacheServiceImpl implements CacheService {
    private static ConcurrentHashMap<String, String> objectLockRegistry=new ConcurrentHashMap<>();

public Object getObject(String objectId) {
    String objectLock=getObjectLock(objectId);
    if(objectLock!=null) {
        synchronized(objectLock) {
            // read object from objectInputStream
    }
}

public boolean storeObject(String objectId, Object object) {
    String objectLock=getObjectLock(objectId);

    synchronized(objectLock) {
        // write object to objectOutputStream
    }
}

private String getObjectLock(String objectId) {
    int objectLockRegistryMaxSize=100_000;

    // reinitialize registry if necessary
    if(objectLockRegistry.size()>objectLockRegistryMaxSize) {
        // hoping to never reach this point but it is not impossible to get here
        synchronized(objectLockRegistry) {
            if(objectLockRegistry.size()>objectLockRegistryMaxSize) {
                objectLockRegistry.clear();
            }
        }
    }

    // add lock to registry if necessary
    objectLockRegistry.putIfAbsent(objectId, new String(objectId));

    String objectLock=objectLockRegistry.get(objectId);
    return objectLock;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:18:23.520

您的方案的复杂性已经讨论过了。这导致很难找到错误。例如，您不仅锁定非最终变量，甚至在将它们用作锁定的同步块的中间更改它们。多线程很难推理，这种代码几乎不可能：

```
 synchronized(objectLockRegistry) {
        if(objectLockRegistry.size() > objectLockRegistryMaxSize) {
            objectLockRegistry = new HashMap<>(); //brrrrrr...
        }
    } 
```

特别是，2 次同时调用以获取特定字符串的锁定实际上可能会返回同一字符串的 2 个不同实例，每个实例都存储在您的 hashmap 的不同实例中（除非它们被实习），并且您不会锁定同一个显示器。

您应该使用现有的库或使其更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T22:03:44.353

如果您从磁盘读取，锁争用不会成为您的性能问题。

您可以让两个线程获取整个缓存的锁，进行读取，如果值丢失，释放锁，从磁盘读取，获取锁，然后如果值仍然丢失，则写入它，否则返回值现在就在那里。

您将遇到的唯一问题是并发读取会破坏磁盘...但是操作系统缓存会很热，因此不应过度破坏磁盘。

如果这是一个问题，那么将您的缓存切换为保存 a`Future<V>`代替`<V>`.

get 方法会变成这样：

```
public V get(K key) {
    Future<V> future;
    synchronized(this) {
        future = backingCache.get(key);
        if (future == null) {
            future = executorService.submit(new LoadFromDisk(key));
            backingCache.put(key, future);
        }
    }
    return future.get();
} 
```

是的，这是一个全局锁...但是您正在从磁盘读取数据，并且在证明性能瓶颈之前不要进行优化...

哦。第一次优化，把地图换成a`ConcurrentHashMap`然后使用`putIfAbsent`，你就没有锁了！（但只有在您知道这是一个问题时才这样做）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T21:44:38.877

如果您的问题包含关键字“优化”、“并发”，并且您的解决方案包含复杂的锁定方案……那么您做错了。在这种冒险中取得成功是有可能的，但几率对你不利。准备诊断奇怪的并发错误，包括但不限于死锁、活锁、缓存不一致……我可以在您的示例代码中发现多种不安全的做法。

在不成为并发之神的情况下创建安全有效的并发算法的唯一方法是采用其中一个预烘焙并发类并根据您的需要调整它们。除非您有非常令人信服的理由，否则这太难了。

你可以看看[`ConcurrentMap`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentMap.html)。您可能还喜欢[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T21:47:14.187

大多数关于多线程和并发的教程的开头都介绍了直接使用线程和同步。但是，许多实际示例需要更复杂的锁定和并发方案，如果您自己实现它们，它们会很麻烦且容易出错。为了防止重新发明轮子，创建了 Java 并发库。在那里，您可以找到许多对您有很大帮助的课程。尝试在谷歌上搜索有关 Java 并发和锁的教程。

作为可能对您有所帮助的锁的示例，请参阅[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T22:14:19.577

而不是滚动你自己的缓存，我会看看谷歌的[MapMaker](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/MapMaker.html)。像这样的东西会给你一个锁缓存，当它们被垃圾收集时，它会自动使未使用的条目过期：

```
ConcurrentMap<String,String> objectLockRegistry = new MapMaker()
    .softValues()
    .makeComputingMap(new Function<String,String> {
      public String apply(String s) {
        return new String(s);
      }); 
```

有了这个，整个`getObjectLock`实现很简单`return objectLockRegistry.get(objectId)`- 地图以安全的方式为您处理所有“如果不存在则创建”的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T21:43:39.627

我会对你做类似的事情：只需创建一个对象映射（新对象（））。
但与你不同的是，我会使用`TreeMap<String, Object>` 或 HashMap 你称之为 lockMap。每个文件锁定一个条目。lockMap 对所有参与的线程都是公开的。
每次对特定文件的读取和写入，都会从映射中获取锁。并在该锁定对象上使用 syncrobize(lock) 。
如果 lockMap 不固定，并且它的内容 chan 发生变化，那么对 map 的读写也必须同步。（`syncronized (this.lockMap) {....})`
但是您的 getObjectLock() 不安全，请将所有内容与您的锁同步。（双重检查锁定在 Java 中不是线程安全的！）推荐的书：Doug Lea，Java 中的并发编程

# android - Android WebView 在横向模式下不显示键盘

> ID：13555726
> 
> 赞同：1
> 
> 时间：2012-11-25T21:34:19.353
> 
> 标签：android, webview, landscape, android-softkeyboard

我正在使用 WebView，但单击文本字段时它不显示键盘。我尝试了[这个问题](https://stackoverflow.com/questions/3460915/webview-textarea-doesnt-pop-up-the-keyboard)的解决方案。现在它在纵向模式下工作正常，但在横向模式下仍然没有键盘。

我的代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        setContentView(R.layout.reservation);
        String url = "https://www.somewebsite.com";

        reservationView = (WebView) findViewById(R.id.reservationView);
        reservationView.loadUrl(url);
        reservationView.getSettings().setJavaScriptEnabled(true);
        //prevents opening the browser
        reservationView.setWebViewClient(new InsideWebViewClient());

        reservationView.setOnTouchListener(new View.OnTouchListener()
        {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction())
                {
                    case MotionEvent.ACTION_DOWN:
                    case MotionEvent.ACTION_UP:
                        if (!v.hasFocus())
                        {
                            v.requestFocus();
                        }
                        break;
                }
                return false;
            }
        });} 
```

有人知道解决方案吗？

编辑：刚刚发现它在 Android 4.1 的模拟器中运行良好，但在 2.3 中却不行。也许模拟器中的错误？

# ruby-on-rails - Rails - 用户和管理员的 CRUD，有多少控制器？

> ID：13555727
> 
> 赞同：2
> 
> 时间：2012-11-25T21:34:21.273
> 
> 标签：ruby-on-rails

我的模型包含费用，包括用户和项目参考。

```
class Expense < ActiveRecord::Base
     attr_accessible :amount, :expense_date, :description, :project_id, :user_id

      belongs_to :project
      belongs_to :user
end 
```

费用控制器处理费用的基本 CRUD 操作。

我现在需要构建同一页面的管理员版本，最好是一个新视图，它可以包括数据的不同视图，按用户，按项目等，还可以编辑用户无法编辑的数据。

我的问题是：构建第二个控制器来处理数据的管理视角，或者我是否在每个方法内部设置条件，以检测原始视图和表单，然后条件将它们重定向回它们所属的位置?

如果我确实构建了第二个控制器，我如何正确设置 form_for 以便它知道要转到哪个控制器？

谢谢！

PS - 如果有人有任何关于如何正确组合 Rails 应用程序的书籍，我觉得我知道这些部分，但我被困在大图实施上。我在 Michael Hartl 的指南中学习了 Rails，在此之前我是一名 PHP 开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T23:07:06.193

恕我直言，如果安全性是您的应用程序的一个大问题，那么使用管理命名空间和单独的控制器是确保您不会留下任何空白的最佳方法。它也更简单，压力更低。

我会有一个像这样的目录结构：

```
/app/controllers/application_controller.rb
/app/controllers/admin_controller.rb - inherits from application_controller
/app/controllers/expenses_controller.rb - non-admin, inherits from application_controller
/app/controllers/admin/expenses_controller.rb - inherits from admin_controller 
```

您的视图将被类似地分开/重复：

```
/app/views/expenses/* - non-admin expenses views
/app/views/admin/expenses/* - admin expenses views 
```

在 application_controller 中，您将 Devise 方法放入 authenticate_user 并将 CanCan 方法放入 check_authorization（如果在控制器操作中的某个时间点未检查授权，则会引发异常）。在 admin_controller 中，您有更严格的过滤器来确保用户是管理员。然后，您可以在特定控制器及其操作中获得更细粒度的信息。

当然，每个控制器只需要定义它真正需要的操作，您不必复制视图。也许非管理员的费用控制器有索引、显示、新建、创建，而管理员只有编辑、更新和销毁。然后在“显示”视图中，如果用户是管理员，您仍然会有添加指向“编辑”操作的链接的代码。

**编辑 - 路线**

在上面的例子中，你的 routes.rb 看起来像：

```
resources :expenses, :only => [:index, :show, :new, :create]

namespace :admin do
  resources :expenses, :only => [:edit, :update, :destroy]
end 
```

所以你仍然使用`expenses_path()`索引和`expense_path(foo)`显示。但是，管理页面上的表单将发布到`admin_expense_path(@expense)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T22:20:59.070

如果您想添加另一个控制器，我建议在模块中使用通用代码并将它们导入每个控制器中。每个控制器也将有一个足够的前置过滤器来检查是否有足够的权限。

但我更喜欢拥有一个控制器和一组视图，因为我认为它可以避免代码重复和/或混淆。当您需要决定 form_for 的 URL 或是否隐藏或显示某些部分时，将用户作为局部变量传递给视图并检查管理员权限。

如果视图差异很大，请检查控制器中的管理员权限并呈现用户视图或管理员视图。

您甚至可以为视图的管理部分创建一个特殊的部分，并决定是否在视图中呈现它，是否在参数中发送适当的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T22:31:38.673

您可以使用 Devise gem 进行身份验证。您可以为应用程序的管理部分创建某种“命名空间”。

我认为，创建另一个控制器取决于您的管理员将访问多少视图和操作。

关于 form_for 操作的疑问，它将由您在 form_for 参数中配置的路由和路径管理。

# ios - 播放广播流时如何设置 AVPLayer 的音量

> ID：13555731
> 
> 赞同：0
> 
> 时间：2012-11-25T21:35:11.247
> 
> 标签：ios, streaming, avfoundation, volume, avplayer

我正在使用 AVPlayer 播放广播流。为了初始化播放器，我正在使用下一个代码：

```
self.asset = [AVAsset assetWithURL:self.url];
self.item = [AVPlayerItem playerItemWithAsset:self.asset];
self.player = [AVPlayer playerWithPlayerItem:self.item]; 
```

我读过这个问题[Adjusting the volume of a playing AVPlayer](https://stackoverflow.com/questions/3268949/adjusting-the-volume-of-a-playing-avplayer)

我正在尝试使用滑块值设置音量

```
- (void)setVolume:(float )volume
{
    _volume = volume;
    NSArray *audioTracks = self.asset.tracks;
    NSMutableArray *allAudioParams = [NSMutableArray array];

    for (AVAssetTrack *track in audioTracks) {
        AVMutableAudioMixInputParameters *audioInputParams =
        [AVMutableAudioMixInputParameters audioMixInputParameters];
        [audioInputParams setVolume:volume atTime:kCMTimeZero];
        [allAudioParams addObject:audioInputParams];
        [audioInputParams setTrackID:[track trackID]];
    }

    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    [audioMix setInputParameters:allAudioParams];
    NSLog(@"%@", self.player.currentItem);
    NSLog(@"%f", volume);
    [self.player.currentItem setAudioMix:audioMix];
} 
```

我也在尝试设置

```
[audioInputParams setVolume:volume atTime:self.player.currentTime]; 
```

但是该数组（self.asset.tracks）中没有任何轨道，并且它对音量没有任何影响。（我也无法获取任何元数据），我无法使用 AVAudioPlayer 通过 url 播放音频流

> AVAudioPlayer 类的一个实例，称为音频播放器，提供文件或内存中音频数据的播放。
> 
> Apple 建议您将此类用于音频播放，除非您正在播放从网络流中捕获的音频或需要非常低的 I/O 延迟。

我正在考虑使用该代码[https://github.com/DigitalDJ/AudioStreamer/downloads](https://github.com/DigitalDJ/AudioStreamer/downloads) 播放广播流，但我不知道如何使用 Audiotoolbox 设置音量。

请帮我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:29:03.837

我尝试了很多解决方案，但最好的方法是实现一个实例 ov MPVolumeVIew：

```
 self.myViewVolume = [[MPVolumeView alloc] initWithFrame:CGRectMake(20, 330, 280, 50)];
[self.myViewVolume sizeToFit];
[self.view addSubview:self.myViewVolume]; 
```

您可以将此添加到您想要的任何 UIView，只需将类更改为 MPVolumeView 不要忘记添加 MediaPlayer 框架。

如果您想从流中获取元数据，您必须执行以下操作：

```
 [playerItem addObserver:self forKeyPath:@"timedMetadata" options:NSKeyValueObservingOptionNew context:NULL]; 
```

有了这个，您可以简单地将信息添加到任何 UILabel

# sql - 在预订表中只允许工作时间

> ID：13555736
> 
> 赞同：2
> 
> 时间：2012-11-25T21:35:41.257
> 
> 标签：sql, postgresql, database-design, schedule, postgresql-9.2

PostgreSql 9.2 保留表定义为

```
CREATE EXTENSION btree_gist;
CREATE TABLE schedule (
  id serial primary key,
  during tsrange not null,
  EXCLUDE USING gist (during WITH &&)
); 
```

节假日列于表中

```
CREATE TABLE holiday ( day primary key ); 
```

工作日的工作时间为 8 点至 18:00，并且只能以 30 分钟的间隔进行预订。如何在值中添加约束，以便它只允许在工作时间进行预订：

1.  tsrange 中的开始日期和结束日期始终相同。
2.  开始和结束日期不能是星期六和星期日
3.  开始和结束日期不能出现在公共假期表中
4.  开始时间只能是 8:00 , 8:30, 9:00, 9:30, ... 16:00, 16:30, 17:00 或 17:30（含）
5.  结束时间只能是 8:30, 9:00, 9:30, ... 16:00, 16:30, 17:00, 17:30 或 18:00

将这些或其中一些约束添加到此表是否合理？如果是，如何添加？如果这有帮助，可以更改计划表结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T22:24:46.573

您可以解决除第 3 项之外的所有问题。使用简单的[**`CHECK`**约束](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#AEN2410)：

使用专用[**范围功能** `lower(anysrange)`并`upper(anyrange)`](http://www.postgresql.org/docs/current/interactive/functions-range.html#RANGE-FUNCTIONS-TABLE)访问范围的下/上边界。

1.) tsrange 中的开始日期和结束日期始终相同。

```
CONSTRAINT schedule_same_day
CHECK (lower(during)::date = upper(during)::date) 
```

2.) 开始和结束日期不能是周六和周日

使用[`isodow`, 而不是`dow`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)更简单的表达式。

```
CONSTRAINT schedule_no weekend
CHECK (EXTRACT(ISODOW FROM lower(during)) < 6)  -- upper on same day 
```

### 3.) 开始和结束日期不能出现在公共假期表中

唯一的例外：为此，您需要一个**触发器**，例如：

```
CREATE OR REPLACE FUNCTION trg_during_no_holy()
  RETURNS trigger AS
$func$
BEGIN

IF EXISTS (SELECT 1 FROM holiday WHERE day = lower(NEW.during)) THEN
    RAISE EXCEPTION 'Day too holy: %', lower(NEW.during);
END IF;

RETURN NEW;

END
$func$ LANGUAGE plpgsql VOLATILE;

CREATE TRIGGER insupbef_holycheck
  BEFORE INSERT OR UPDATE
  ON schedule
  FOR EACH ROW
  EXECUTE PROCEDURE trg_during_no_holy(); 
```

4.) 开始时间只能是 8:00 , 8:30, 9:00, 9:30, ... 16:00, 16:30, 17:00 或 17:30
5.) 结束时间可以是仅 8:30, 9:00, 9:30, ... 16:00, 16:30, 17:00, 17:30 或 18:00 专属

```
CONSTRAINT schedule_8_inc_to_18_exc_half_hours
 CHECK (lower(during)::time BETWEEN time '8:00'AND time '17:30' -- time range
    AND upper(during)::time BETWEEN time '8:30'AND time '18:00'
    AND EXTRACT(MINUTE FROM lower(during)) IN (0, 30) -- only :00 or :30
    AND EXTRACT(MINUTE FROM upper(during)) IN (0, 30)
    AND lower_inc(during)          -- lower bound always incl.
    AND upper_inc(during) = FALSE  -- upper bound always excl.
) 
```

## 评论中的附加问题

> 如何仅将秒和小数秒限制为 0？

最简单的方法：转换为`timestamp(0)`或`timestamptz(0)`使用此数据类型作为列的开头。我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)：

> `time`, `timestamp`, 并`interval`接受一个可选的精度值`p` ，它指定秒字段中保留的小数位数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T23:03:54.550

您需要更改表定义并添加一些`check`约束：

```
CREATE TABLE schedule (
  id serial primary key,
  during tsrange not null check(
    (lower(during)::date = upper(during)::date) and 
    (date_trunc('hour', upper(during)) + INTERVAL '30 min' * ROUND(date_part('minute', upper(during)) / 30.0) = upper(during)) and
    (date_trunc('hour', lower(during)) + INTERVAL '30 min' * ROUND(date_part('minute', lower(during)) / 30.0) = lower(during)) and
    (lower(during)::time >= '8:00'::time and upper(during)::time <= '18:00'::time) and
    (date_part('dow', lower(during)) in (1,2,3,4,5) and date_part('dow', upper(during)) in (1,2,3,4,5))
  ),
  EXCLUDE USING gist (during WITH &&)
); 
```

检查按此顺序

*   开始日和结束日相同
*   开始/结束必须在 30 分钟的边界上
*   和 8:00 .. 18:00 之间
*   只有工作日

我们需要`holiday`表格中的一些内容：插入假期值（'2012-11-28'）；

`check`不能引用其他表，因此我们需要触发函数（最好将所有检查放入此函数，即将它们放在一个地方）：

```
create function holiday_check() returns trigger language plpgsql stable as $$
begin
    if exists (select * from holiday where day in (lower(NEW.during)::date, upper(NEW.during)::date)) then
        raise exception 'public holiday';
    else
        return NEW;
    end if;
end;
$$; 
```

然后我们需要在`insert`/之前创建触发器`update`：

```
create trigger holiday_check_i before insert on schedule for each row execute procedure holiday_check();
create trigger holiday_check_u before update on schedule for each row execute procedure holiday_check(); 
```

最后，一些测试：

```
-- OK
insert into schedule(during) values (tsrange('2012-11-26 08:00', '2012-11-26 09:00'));
INSERT 0 1

-- out of business hours
insert into schedule(during) values (tsrange('2012-11-26 04:00', '2012-11-26 05:00'));
ERROR:  new row for relation "schedule" violates check constraint "schedule_during_check"
DETAIL:  Failing row contains (12, ["2012-11-26 04:00:00","2012-11-26 05:00:00")).

-- End time can be only 8:30, 9:00, 9:30, ... 16:00, 16:30, 17:00, 17:30 or 18:00 exclusive
insert into schedule(during) values (tsrange('2012-11-26 08:00', '2012-11-26 09:10'));
ERROR:  new row for relation "schedule" violates check constraint "schedule_during_check"
DETAIL:  Failing row contains (13, ["2012-11-26 08:00:00","2012-11-26 09:10:00")).

-- Start time can be only 8:00 , 8:30, 9:00, 9:30, ... 16:00, 16:30, 17:00 or 17:30 inclusive
insert into schedule(during) values (tsrange('2012-11-26 11:24', '2012-11-26 13:00'));
ERROR:  new row for relation "schedule" violates check constraint "schedule_during_check"
DETAIL:  Failing row contains (14, ["2012-11-26 11:24:00","2012-11-26 13:00:00")).

-- holiday
insert into schedule(during) values (tsrange('2012-11-28 10:00', '2012-11-28 13:00'));
ERROR:  public holiday 
```

# javascript - javascript替换网址

> ID：13555737
> 
> 赞同：0
> 
> 时间：2012-11-25T21:35:46.453
> 
> 标签：javascript, regex

有人可以编写一个替换的javascript代码吗

```
"www.mydomain.com/happy_new_year/yeah-00-14-jj-78-aaa1.html" 
```

到

```
"www.mydomain.com/happy_new_year/ohoh-11-22-33-44-aaa1.html" 
```

请注意，在这种情况下，文件夹`/happy_new_year/`将保持不变。

但是我们不知道确切的文件夹名称，可能是其他名称，有时没有文件夹，也不需要更改。

替换之后的每个字符，除了 .html 之前的最后 4 个字符

有多少斜线“-”可能有用的模式。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:41:09.553

使用正则表达式

```
url.replace(/[^\/]*(....\.html)$/,new_name + "$1"); 
```

该`$`符号告诉匹配从字符串的末尾开始，然后捕获`.html`一组中接下来的四个字符，并最终匹配尽可能多的非 a 字符`/`。替换中的`$1`扩展到捕获的组。

# php - Codeigniter 2.1 - 数组插入

> ID：13555739
> 
> 赞同：0
> 
> 时间：2012-11-25T21:36:10.807
> 
> 标签：php, codeigniter, codeigniter-2

我有一个数组，需要插入数据库（每个值都是新行）。我必须像这样编码，还是有其他方法可以做到这一点？

```
function galerija_insert($name){
foreach($name as $nm) :
$data['name'] = $nm;
$this->db->insert('galerija', $data);
endforeach;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:43:37.603

如果要最小化插入查询的数量，可以[`insert_batch`](http://userguides.ellislab.com/codeigniter/database/active_record.html#insert)这样使用：

```
$rows = array();
foreach($name as $nm) {
    $rows[] = array('name' => $nm);
}
$this->db->insert_batch('galerija', $rows); 
```

# c++ - 覆盖旧指针的指针

> ID：13555743
> 
> 赞同：0
> 
> 时间：2012-11-25T21:36:45.100
> 
> 标签：c++, pointers

我被赋予了这项任务，并且在将信息替换为新数据时遇到了很多麻烦。创建新客户时，他们必须创建一个新的基本帐户。这很好用，但是因为我试图让客户拥有多种类型的账户，每个账户都有自己的规则，例如学生/当前，每个账户都包含自己的值。

出于某种原因，我的账户的货币价值变成了当前设置的任何价值，并且出于某种原因，每个账户甚至对于不同的客户都共享里面的价值。因此，如果 account1 有 200 英镑，那么 account2 就会用 300 英镑创建。然后将 account1 设置为 300 英镑。

客户.h

```
Customer(std::string sFirstName, std::string sLastName, 
    std::string sAddressLnA,
    std::string sAddressLnB,
    std::string sCity,
    std::string sCounty,
    std::string sPostcode,
    AccountManager* bankAccount);

    AccountManager* getAccount(void);

    //outside class
    std::ostream& operator << (std::ostream& output, Customer& customer); 
```

客户.cpp

```
//Part of a method but i've shrunk it down
AccountManager account(H);
AccountManager accRef = account; //This the issue?
Customer c(A, B, C, D, E, F, G, &accRef);
customerList.insert(c);
showPersonDetails();

//Output
ostream& operator << (ostream& output, Customer& customer)
{
    output << customer.getFirstName() << " " << customer.getLastName() << endl
        << customer.getaddressLnA() << endl
        << customer.getaddressLnB() << endl
        << customer.getcity() << endl
        << customer.getcounty() << endl
        << customer.getpostcode() << endl
        << (*customer.getAccount()) << endl;
    return output; 
```

AccountManager.h

```
class AccountManager
{
private:
    double money;
public:
    AccountManager(double amount);
    ~AccountManager(void);
    double getMoney();

};

//Print
std::ostream& operator << (std::ostream& output, AccountManager& accountManager); 
```

AccountManager.cpp

```
using namespace std;

AccountManager::AccountManager(double amount)
{
    money = amount;
}

AccountManager::~AccountManager()
{
}

double AccountManager::getMoney()
{
    return money;
}

ostream& operator << (ostream& output, AccountManager& accountManager)
{
    //Type of account
    output << "Account Money: " << accountManager.getMoney() << endl;
    return output;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:34:45.890

```
AccountManager accRef = account; //This the issue?
Customer c(A, B, C, D, E, F, G, &accRef); 
```

您创建一个帐户作为局部变量，将*指向它的指针*传递给`Customer`构造函数，`Customer`存储该指针，然后“方法”终止，局部变量超出范围，`Customer`留下一个悬空指针。然后你取消引用指针并得到奇怪的结果。

（为什么`Customer`仍然通过引用存储帐户？）

# azure - Windows Azure 网站性能上的 DotNetNuke

> ID：13555745
> 
> 赞同：3
> 
> 时间：2012-11-25T21:36:59.997
> 
> 标签：azure, dotnetnuke

我正在使用 DotNetNuke (DNN) 评估 Windows Azure WebSites Preview（我认为是 WAWS，不确定微软喜欢改变的所有这些变化的名称和首字母缩略词），我也在“非云”V-Server 上使用了多年. 安装轻而易举。我只尝试了免费的共享实例，并且测试了 1 个和 3 个活动实例，结果相似。

第一次命中性能一直是我以前安装的 DNN 的问题，当网站空闲一段时间（15 分钟左右）时，该过程将停止，然后下一个不幸的访问者将等待至少 20 秒左右。通过对 IIS 进行一些调整，可以最大限度地减少这个问题，但我使用监控服务获得了最好的结果，该监控服务将每五分钟从 DNN 请求一个页面并保持进程正常运行。

虽然浏览 DNN 页面通常在 WAWS 上表现良好，但我立即注意到“第一次命中”问题是 WAWS 上 DNN 的问题，因此我为页面配置了监控服务。这没有帮助，监控服务将始终报告该站点已关闭。几乎就像 WAWS 试图避免保持网站正常运行一样，因为它检测到只有监控服务在请求该页面。

此外，当在 DNN 页面上导航然后暂停一两分钟时，我经常会收到“Internet Explorer 无法加载此页面”错误，但没有具体的错误代码。

其他人是否对 WAWS 上的 DNN 性能有经验，或者可能知道为什么“第一次命中”会出现这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T23:18:24.227

我认为你想要研究的是“保持活力”。

您遇到的是由于不活动而导致您的应用程序终止的 ASP .NET 进程。当进程不在内存中并且站点被访问时，IIS 必须重新启动它，这是您在访问站点时获得的 10 - 20 秒延迟，因为进程再次启动和/或及时编译。

您可以安排一些第 3 方监控服务通过 HTTP 请求每 10 分钟检查一次您的站点，这将使您的站点保持正常运行。只是 ping 它不会保持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T23:19:06.853

我怀疑微软正在积极尝试避免许多 ASP.Net 开发人员使用的保持活动的技巧。与许多共享托管平台一样，WAWS 在任何时候都依赖于服务器上只有一定数量的活动网站，以实现更高的服务器密度并控制托管成本。这是他们可以免费提供此服务的原因之一。

# ios - Reactive Cocoa 中的可取消超时

> ID：13555750
> 
> 赞同：4
> 
> 时间：2012-11-25T21:37:35.970
> 
> 标签：ios, objective-c, cocoa-touch, reactive-programming, reactive-cocoa

我想在 iOS 中使用[Reactive Cocoa实现倒数计时器。](https://github.com/github/ReactiveCocoa)计时器应该运行 X 秒并每秒执行一些操作。我无法弄清楚的部分是我可以**取消 timeout**的方式。

```
RACSubscribable *oneSecGenerator = [RACSubscribable interval:1.0];
RACDisposable *timer = [[oneSecGenerator take:5] subscribeNext:^(id x) {
    NSLog(@"Tick");
}]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T22:59:02.827

我想，我找到了解决方案。诀窍是将取消信号合并到滴答信号中，然后取 X 个样本。最终订阅者将在每次滴答信号滴答声时收到*下一个事件，并在“获取”**完成*时完成。取消可以通过在取消定时器上发送错误来实现。

```
__block RACSubject *cancelTimer = [RACSubject subject];
RACSubscribable *tickWithCancel = [[RACSubscribable interval:1.0] merge:cancelTimer];
RACSubscribable *timeoutFiveSec = [tickWithCancel take:5];

[timeoutFiveSec subscribeNext:^(id x) {
    NSLog(@"Tick");
} error:^(NSError *error) {
    NSLog(@"Cancelled");
} completed:^{
    NSLog(@"Completed");
    [alert dismissWithClickedButtonIndex:-1 animated:YES];
}]; 
```

要激活取消，必须执行以下操作。

```
[cancelTimer sendError:nil]; // nil or NSError 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T09:56:44.843

还有一个[TakeUntil 操作符](http://msdn.microsoft.com/en-us/library/hh229530%28v=vs.103%29.aspx)，它[完全符合您的要求：](https://github.com/blog/1107-reactivecocoa-for-a-better-world)中继来自流的事件，直到另一个产生值。

# java - 触发事件时的 Java 同步

> ID：13555760
> 
> 赞同：0
> 
> 时间：2012-11-25T21:38:58.777
> 
> 标签：java, multithreading, synchronization

我有这样的课程（删除了不相关的代码）：

```
public final class Card {

    private boolean important;

    public boolean isImportant() {
        return important;
    }

    public void setImportant(boolean isImportant) {
        this.important = isImportant;
        fireIsImportantChangedEvent(isImportant);
    }

    private EventListenerList listenerList = new EventListenerList();

    private void fireIsImportantChangedEvent(boolean newValue) {
        for (CardListener listener : listenerList.getListeners(CardListener.class)) {
            listener.isImportantChanged(new CardEvent<Boolean>(this, newValue));
        }
    }
} 
```

我正在尝试使此类线程安全，但不确定是否需要同步访问重要（`public synchronized boolean isImportant() { ... }`和`public synchronized void setImportant(boolean isImportant) { ... }`）的任何方法，或者只是声明重要的易失性（`private volatile boolean important;`）。我的理解是，如果`setImportant()`不触发事件（如果它刚刚触发`this.important = isImportant`）， volatile 会起作用，但如果我触发此事件， volatile 仍然会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:52:45.660

到目前为止，您不需要进行任何同步。事件处理似乎发生在同一个线程中，除非监听器启动新线程。如果是这种情况，您确实需要考虑可见性和同步性。

如果您希望其他线程读取重要值，则需要将其设为 volatile，否则它可能会被缓存以使其他线程看不到它。关于同步，如果侦听器调用的顺序无关紧要，我认为没有任何必要。如果您想保证从 false 到 true 再回到 false 的多线程更改首先触发所有 true，然后您需要同步所有 false 事件。到目前为止，同步 fire 方法就足够了，因为您正在传递 newValue，而不是从实例变量中重新读取它。

# asp.net - 另一个 ashx http 处理程序之前的 Asp.net 自定义 http 处理程序

> ID：13555766
> 
> 赞同：4
> 
> 时间：2012-11-25T21:40:01.543
> 
> 标签：asp.net, web, web-config, httphandler

我写了一个 .ashx http 处理程序。我还有一个自定义的 http 处理程序，我将它添加到 web.config 文件中：

```
<httpHandlers>
    <add verb="*" path="*.aspx" type="AspxHandler"/>
</httpHandlers> 
```

我希望在调用 ashx http 处理程序之前调用我的自定义 http 处理程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:58:35.923

ASP.NET 中的处理程序是端点，因此每个请求只能有一个。你不能真的做某事然后把它传递下去。如果您希望您的处理程序运行而不是常规页面处理程序，则首先删除默认的 ASPX 处理程序，然后添加您的处理程序。有关配置文件架构，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa903367%28v=VS.71%29.aspx)。

如果您只想在处理程序之前运行某些内容并可能影响哪个处理程序运行，则需要实现 IHttpModule

# c++ - C++ Linux Sockets 在 char *msg 中添加变量

> ID：13555767
> 
> 赞同：2
> 
> 时间：2012-11-25T21:40:10.117
> 
> 标签：c++, linux, string, sockets, char

我正在尝试向 send() 添加一个插入变量。

这是代码：

```
string num;

// + num + is the reason for the error. Any work around or suggestions?
char *msg = "GET /index.php?num=" + num + " HTTP/1.1\nhost: domain.com\n\n";

int len;
ssize_t bytes_sent;
len = strlen(msg);
bytes_sent = send(socketfd, msg, len, 0); 
```

我收到错误：

```
test.cpp: In function âint main()â:
test.cpp:64: error: cannot convert âstd::basic_string<char, std::char_traits<char>, 
std::allocator<char> >â to âchar*â in initialization 
```

- 编辑 -

我试图用 msg.c_str 修复它

```
cout << "send()ing message..."  << endl;
string msg = "GET /index.php?num=" + num + " HTTP/1.1\nhost: domain.com\n\n";   
int len;
ssize_t bytes_sent;
len = msg.lenght(); //updated to this and still gives me an error.
bytes_sent = send(socketfd, msg.c_str, len, 0); 
```

现在它给了我错误：

```
error: argument of type âconst char* (std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >::)()constâ does not match âconst char*â 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:50:44.673

`"stuff" + num + "more stuff"`不符合您的预期。即使您要转换`str`为 char 指针，即使 C++ 允许您将 char 指针添加在一起，它最终也会做完全错误的事情。

（作为参考，C++*不允许*您将指针相加，因为结果没有任何意义。指针仍然只是数字，添加两个 char 指针基本上等于`0x59452448 + 0x10222250`或类似的东西，这将返回一个指针到某个可能还不存在的位置...）

试试这个：

```
string msg = string("GET /index.php?num=") + num + " HTTP/1.1\nhost: domain.com\n\n";
ssize_t bytes_sent = send(socketfd, msg.c_str(), msg.size(), 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:43:53.147

您正在使用`num`第三行未初始化的位置。也许你想要：

```
std::string num;
std::string msg = "GET /index.php?num=" + num + " HTTP/1.1\nhost: domain.com\n\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T21:45:37.227

`std::string`不会隐式转换为`char*`. 你需要使用`c_str`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T21:48:38.187

理想情况下，您应该在应用程序中完全使用字符串（而不是 char*），直到 API 函数需要 char*，然后调用`c_str`字符串为您的函数获取 const char*正在打电话。

# haskell - Parsec 和 commaSep 输入的序列

> ID：13555769
> 
> 赞同：2
> 
> 时间：2012-11-25T21:40:25.820
> 
> 标签：haskell

我部分地从[SO](https://stackoverflow.com/questions/8218529/full-parser-examples-with-parsec)中获取了下面的示例并将其更改为我的需要。它几乎适合，但我想做的是始终将 commaSep expr 中的第一个字符串解析为标识符，而所有后续字符串应该只是字符串。

目前它们都被解析为标识符。

```
*Parser> parse expr "" "rd (isFib, test2, 100.1, ?BOOL)"
Right (FuncCall "rd" [Identifier "isFib",Identifier "test2",Number 100.1,Query "?BOOL"]) 
```

我尝试了许多解决方案，最终所有解决方案都会分解为在不使用 commaSep 的情况下解析整个输入。意味着我将不得不忽略结构并做类似的事情

```
expr_parse = do
    name <- resvd_cmd
    char '('
    skipMany space
    worker <- ident
    char ','
    skipMany1 space
    args <- commaSep expr --not fully worked this out yet
    query <- theQuery
    skipMany space
    char ')'
    return (name, worker, args, query) 
```

这对我来说看起来不太理想而且非常笨重。有没有办法重构`expr`下面的代码，实现我需要的并保持简单？

```
module Parser where

import Control.Monad (liftM)
import Text.Parsec
import Text.Parsec.String (Parser)
import Lexer
import AST

expr = ident <|>  astring <|> number <|> theQuery <|> callOrIdent

astring = liftM String stringLiteral <?> "String"

number = liftM Number float <?> "Number"

ident = liftM Identifier identifier <?> "WorkerName"

questionm :: Parser Char
questionm = oneOf "?"

theQuery :: Parser AST
theQuery = do first <- questionm
              rest <- many1 letter
              let query = first:rest
              return ( Query query )

resvd_cmd = do { reserved "rd"; return ("rd") }
            <|> do { reserved "eval"; return ("eval") }
            <|> do { reserved "read"; return ("read") }
            <|> do { reserved "in"; return ("in") }
            <|> do { reserved "out"; return ("out") }
            <?> "LINDA-like Tuple"

callOrIdent = do
    name <- resvd_cmd
    liftM (FuncCall name)(parens $ commaSep expr) <|> return (Identifier name) 
```

AST.hs

```
{-# LANGUAGE DeriveDataTypeable #-}

module AST where

import Data.Typeable

data AST
    = Number Double
    | Identifier String
    | String String
    | FuncCall String [AST]
    | Query String
    deriving (Show, Eq, Typeable) 
```

词法分析器

```
module Lexer (
            identifier, reserved, operator, reservedOp, charLiteral, stringLiteral,
            natural, integer, float, naturalOrFloat, decimal, hexadecimal, octal,
            symbol, lexeme, whiteSpace, parens, braces, angles, brackets, semi,
            comma, colon, dot, semiSep, semiSep1, commaSep, commaSep1
    )where

import Text.Parsec
import qualified Text.Parsec.Token as P
import Text.Parsec.Language (haskellStyle)

lexer = P.makeTokenParser ( haskellStyle
                            {P.reservedNames = ["rd", "in", "out", "eval", "take"]}
                         )

identifier = P.identifier lexer
reserved = P.reserved lexer
operator = P.operator lexer
reservedOp = P.reservedOp lexer
charLiteral = P.charLiteral lexer
stringLiteral = P.stringLiteral lexer
natural = P.natural lexer
integer = P.integer lexer
float = P.float lexer
naturalOrFloat = P.naturalOrFloat lexer
decimal = P.decimal lexer
hexadecimal = P.hexadecimal lexer
octal = P.octal lexer
symbol = P.symbol lexer
lexeme = P.lexeme lexer
whiteSpace = P.whiteSpace lexer
parens = P.parens lexer
braces = P.braces lexer
angles = P.angles lexer
brackets = P.brackets lexer
semi = P.semi lexer
comma = P.comma lexer
colon = P.colon lexer
dot = P.dot lexer
semiSep = P.semiSep lexer
semiSep1 = P.semiSep1 lexer
commaSep = P.commaSep lexer
commaSep1 = P.commaSep1 lexer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T23:50:41.820

首先，我想向您介绍`lexeme`改变解析器以吃尾随空格的函数。鼓励您使用它而不是明确地吃空白。困难在于，`commaSep`因为它吃了`,`然后失败了。写一个不太乐观的东西会很好`commaSep`，但让我们直接解决你的问题。

`lexeme`让我们申请`comma`

```
acomma = lexeme comma 
```

您的代码的问题之一是您希望它看到`test2`as`String "test2"`但`astring`解析器希望它的字符串以 . 开头和结尾`"`。让我们为秃头字符串做一个解析器，但要确保它们不以空格或逗号开头`?`并且不包含空格或逗号：

```
baldString = lexeme $ do
   x <- noneOf "? ,)"
   xs <- many (noneOf " ,)")   -- problematic - see comment below
   return . String $ x:xs 
```

当我意识到因为最后必须有一个查询时，突破就来了，所以在一个 baldString 之后总是有一个逗号：

```
baldStringComma = do 
        s <- baldString
        acomma
        return s 
```

现在让我们为元组末尾的一个或多个查询创建一个解析器：

```
queries = commaSep1 (lexeme theQuery) 
```

现在我们可以获取标识符、baldStrings 和查询

```
therest = do
   name <- lexeme ident 
   acomma
   args <- many baldStringComma
   qs <- queries
   return (name,args,qs) 
```

终于给

```
tuple = do
    name <- lexeme resvd_cmd
    stuff <- parens therest
    return (name,stuff) 
```

所以你得到

```
*Parser> parseTest tuple "rd (isFib, test2, 100.1, ?BOOL)"
("rd",(Identifier "isFib",[String "test2",String "100.1"],[Query "?BOOL"])) 
```

但是，如果您想将字符串与查询混为一谈，您可以`return (name,args++qs)`在`therest`.

## Applicative 不那么难看

我发现绑定到 Monad 界面很令人沮丧，当有可爱的东西时`<$>`，`<*>`等等，所以首先

```
import Control.Applicative hiding (many, (<|>)) 
```

然后

```
baldString = lexeme . fmap String $
   (:) <$> noneOf "? ,)"   
       <*> many (noneOf " ,)")   -- problematic - see comment below 
```

这`<$>`是 的中缀版本`fmap`，因此`(:)`将应用于 的输出`noneOf "? ,"`，给出返回类似 的解析器`('c':)`。然后可以将其应用于`many (noneOf " ,")`using的输出`<*>`以提供我们想要的字符串。

```
baldStringComma = baldString <* acomma 
```

这很好，因为我们让`<*>`操作员忽略 的输出，`acomma`只返回 的输出`baldString`，使用`<*`. 如果我们想要它反过来，我们可以这样做`*>`，但你也可以使用`>>`它，它已经忽略了第一个解析器的输出。

```
therest = (,,) <$> 
   lexeme ident <* acomma
   <*> many baldStringComma
   <*> queries 
```

和

```
tuple = (,) <$> lexeme resvd_cmd 
            <*> parens therest 
```

但是如果我们这样做会不会更好

```
data Tuple = Tuple {cmd :: String, 
                    id :: AST,
                    argumentList :: [AST],
                    queryList :: [AST]} deriving Show 
```

所以我们可以做

```
niceTuple = Tuple <$> lexeme resvd_cmd <* lexeme (char '(')
                  <*> lexeme ident <* acomma
                  <*> many baldStringComma
                  <*> queries <* lexeme (char ')') 
```

这给出了（用一点手动漂亮的打印来让它进入宽度）

```
*Parser> parseTest niceTuple "rd (isFib, test2, 100.1, ?BOOL)"
Tuple {cmd = "rd", 
       id = Identifier "isFib", 
       argumentList = [String "test2",String "100.1"], 
       queryList = [Query "?BOOL"]} 
```

我还认为您的 current`AST`更像是一个抽象语法存储而不是抽象语法树，并且您可能会从设计自己的 Tuple 类型并使用它中获得更多的好处。采用

```
newtype Command = Cmd String  deriving Show 
```

诸如此类以确保类型安全，然后使用解析器将它们一起滚动到您的 Tuple 类型中以生成它们。

# c# - 自定义控件（显示另一个对象的属性）

> ID：13555770
> 
> 赞同：2
> 
> 时间：2012-11-25T21:40:28.477
> 
> 标签：c#, visual-studio-2010, visual-c#-express-2010

如何让另一个控件的属性显示在属性窗口中。例如，如果我有

```
public class MyClass : UserControl
{
    public MyClass(){}
    public bool Visible{get;set}// Property of MyClass

    public MyProperties GridProp {get;set;}// Tried this but does not show the properties 
                                 //of MyProperties class

}

public class MyProperties
{
    public MyProperties() { }
    public bool Visible { get; set; }
    public Color Color { get; set; }
} 
```

如何让`MyProperties`属性与 的属性一起显示`MyClass`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:42:01.307

如果您希望您的属性显示在 VS 属性窗口中，您必须在 qestion 中为属性添加一些属性。

```
public class MyControl : Control
{
    public MyControl()
    {
        MyObject = new MyObject();
    }

    [Category("MyControl")]
    [Description("My Property Description")]
    [TypeConverterAttribute(typeof(ExpandableObjectConverter))]
    public MyObject MyObject { get; set; }
}

public class MyObject
{
    public string MyProperty { get; set; }
} 
```

您必须使用 ExpandableObjectConverter Typeconverter 装饰您的自定义对象，这将显示类中的属性。

![在此处输入图像描述](../Images/87f52a6abc88f5b5583919ede3d6d683.png)

有一些属性可以设置显示名称、类别和默认值等内容。更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/aa302326.aspx](http://msdn.microsoft.com/en-us/library/aa302326.aspx)

# javascript - ember-data：如何获取嵌入的 json

> ID：13555772
> 
> 赞同：2
> 
> 时间：2012-11-25T21:40:57.647
> 
> 标签：javascript, json, ember.js, ember-data

我的 Json 数据如下所示：

```
 {"user":{"id":1,
        "name":"bob",
        "profile":{"id":1,
                "forename":"Foo",
                "surname":"Bar",
                "user_id":1}} 
```

我的模型看起来像：

```
 App.User = DS.Model.extend({
     name: DS.attr('string'),
     profile: DS.belongsTo('App.Profile')
 }); 
```

和

```
 App.Profile = DS.Model.extend({
     forename: DS.attr('string'),
     surname: DS.attr('string'),,
     user: DS.belongsTo('App.User')
 }); 
```

当我尝试获取`{{user.name}}`时，它工作正常。`user.profile.forename`不工作。我尝试了我的用户模型

```
 DS.AuthenticatedRESTAdapter.map('App.User', {
     profile: {embedded: true}
 }); 
```

以及，但仍然没有工作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:07:02.343

缺少的是通过调用其“映射”函数来配置序列化程序（由适配器使用）：

```
App.MySerializer = DS.Serializer.extend({
    init: function(){
      this._super();
      this.map(App.User, {
        profile: {
          embedded: 'load'
        }
      });
    }
}); 
```

[您可以在这里](http://jsfiddle.net/olmeca/7qTty/1/)找到 JFiddle 的工作示例。

# php - MySQL在表中存储有限时间的值

> ID：13555774
> 
> 赞同：0
> 
> 时间：2012-11-25T21:41:14.930
> 
> 标签：php, mysql

我已经制作了一个剧院门票预订网站（用户-> 预订和支付/管理员-> 从网络界面管理销售）。我使用 mysql 数据库中的一个表来处理票：每一列是特定的一天，这一天的每一行都是一个布尔值，用于知道哪个座位被预订（1 表示已预订，0 表示免费）。但是我想改进这个系统，并在用户当前在线预订并且尚未付款（最终确定订单）时设置第三种状态，以防止其他用户预订他的座位。那么，有没有办法在门票表中仅在有限的时间内（大约 15 分钟）保存第三个状态（例如 -1）？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:43:20.693

将`onInsert/onUpdate`触发器与`SLEEP(<seconds>)`.

更新：

```
mysql> delimiter //
mysql> CREATE TRIGGER ins_trig BEFORE INSERT ON tickets
    -> FOR EACH ROW
    -> BEGIN
    -> DO SLEEP(60000);
    -> UPDATE tickets SET status=1 WHERE id = NEW.id;
    -> END;
    -> // 
```

请注意，触发器只能从根设置。

# c# - 在 datagridviewtextboxcolumn 和 datagridviewcomboboxcoumn 上实现自动完成

> ID：13555775
> 
> 赞同：2
> 
> 时间：2012-11-25T21:41:20.827
> 
> 标签：c#, winforms, datagridview

我有一个具有多列的datagridview，在两列上我想实现自动完成。这些列是 datagridviewtextboxcolumn 和 datagridviewcomboboxcolumns。我在想自动完成可以在 datagridview 的 editcontrolshowing 事件中完成（我的代码中有），但我似乎无法弄清楚它是如何工作的。

```
 private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        if (dataGridView1.CurrentCell.ColumnIndex == 0 && e.Control is ComboBox)
        {
            ComboBox comboBox = e.Control as ComboBox;
            comboBox.AutoCompleteMode = AutoCompleteMode.Suggest;
            comboBox.AutoCompleteSource = AutoCompleteSource.ListItems;
            comboBox.TextChanged += LastColumnComboSelectionChanged;
        }
        if (dataGridView1.CurrentCell.ColumnIndex == 2 && e.Control is TextBox)
        {
            if (e.Control.Enabled)
            {
                TextBox POCText = e.Control as TextBox;

                POCText.MouseDoubleClick += new MouseEventHandler(POCText_MouseDoubleClick);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:30:26.113

您走在正确的道路上，如果您正在开发 win-form 应用程序，则必须根据您的数据源选择 AutoCompleteSource，主要是我们有表、数组或其他东西，在这种情况下，我们应该使用 AutoCompleteSource = AutoCompleteSource。自定义来源。

分配 AutoCompleteCustomeSource 后，您不需要实现任何其他事件来显示自动完成列表，.Net 自行管理，这是一个链接，与此处提出的问题相同，解决方案很好，我已经尝试过了，它正在工作。

[http://social.msdn.microsoft.com/Forums/en-US/winformsapplications/thread/30b5e4dc-5ecd-488e-9381-a7085e99b3a7/](http://social.msdn.microsoft.com/Forums/en-US/winformsapplications/thread/30b5e4dc-5ecd-488e-9381-a7085e99b3a7/)

# python - 读取 .csv 文件。

> ID：13555776
> 
> 赞同：0
> 
> 时间：2012-11-25T21:41:22.440
> 
> 标签：python

我有一个需要循环的 .csv 文件，然后在循环内，我想在每次迭代时检查下一行的值。我似乎无法让它正常工作，因为它跳过了我在下一次迭代中展望的那一行。

```
import csv
file_object = open('file.csv', 'r')
reader = csv.reader(file_object, delimiter = ';')

for line in reader:
    next_line = reader.next()
    # It now reads the next line and doesn't iterate over it again in the next
    # iteration. However, i want it to still iterate over it in the next iteration. 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:48:10.760

您可以“手动”跟踪当前行和下一行：

```
line = reader.next()
for next_line in reader:
    # Do your processing
    line = next_line
# Now do whatever needs to be done with the very last line 
```

# android - 在 Asynctask 中处理 URL 重定向

> ID：13555777
> 
> 赞同：0
> 
> 时间：2012-11-25T21:41:27.193
> 
> 标签：android, android-asynctask, android-webview

在我的应用程序中，我加载了一个 webview（登录表单），它会将我重定向到实际的登录表单，然后我会在同一个 webview 中显示该表单。这个 webview 是从我的 onCreateView 调用的，

```
new FetchLoginFormTask().execute(); 
```

但是，我间歇性地注意到 android.os.NetworkOnMainThreadException，这让我认为 webView.loadUrl() 方法导致了这种情况。我一直无法重现这一点，所以我在 onPostExecute() 中创建了一个 Asynctask，但我在 logcat 中注意到我无法从另一个 asynctask 中调用 webview。我有哪些选择可以确保在没有任何 ANR 的情况下加载登录表单，或者我缺少哪些最佳实践？

```
private class FetchLoginFormTask extends AsyncTask<String, Integer, Response> {

    @Override
    protected void onPreExecute() {
    }

    @Override
    protected Response doInBackground(String... params) {

        int paramLen = params.length;
        Response result = MyOAuth.fetchLoginForm();
        return result;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
    }

    @Override
    protected void onPostExecute(Response result) {

        if (result != null) {
            //in case of redirect
            if (result.getCode() == 302) {
                Log.i(TAG, "Response was redirect: " + result.getCode());
                //TODO: isn't this a network operation on main UI thread?
                webView.loadUrl(result.getHeader("Location"));
            } else {
                String html = result.getBody();
                webView.loadData(html, "text/html", "UTF-8");
            }
       }

    }
} 
```

# html - 图像未渲染

> ID：13555780
> 
> 赞同：-3
> 
> 时间：2012-11-25T21:41:36.007
> 
> 标签：html, css, image

为什么我的两张图片没有渲染？当我使用notepad ++时它可以工作，但当我将它上传到我的FTP时却不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:48:22.797

403，此错误有禁止消息

```
http://example.com/em_w/02/37/98/837-02379877w.jpg
```

这是浏览器无法打开的照片。提供的链接无法通过服务器访问。如果你去这个链接，你会看到照片。

提示： hit `F12`，这将打开 Firebug。切换到控制台视图，然后重新加载页面。从那里，您可以查看是否有问题。y

# javascript - 从具有相同类的节点中删除所有子节点，纯 js

> ID：13555785
> 
> 赞同：7
> 
> 时间：2012-11-25T21:41:57.683
> 
> 标签：javascript

> **可能重复：**
> [使用 JavaScript 删除具有特定类的所有元素](https://stackoverflow.com/questions/10842471/remove-all-elements-with-a-certain-class-with-javascript)

作为标题，谷歌搜索给了我所有的 jquery 结果。有没有一种方法可以做到这一点？前任。

```
<div id="container">
   <div class="dontdelete">...</div>
   <div class="deleteme>...</div>
   <div class="dontdelete">...</div>
   <div class="deleteme>...</div>
   <div class="dontdelete">...</div>
   <div class="deleteme>...</div>
</div> 
```

纯javascript中是否有一种方法可以删除所有具有“deleteme”类的孩子？提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T21:58:23.693

由于`element.getElementsByClassName`返回一个**活动**节点列表，您需要以某种方式遍历列表（因为从 DOM 中删除它们也会将它们从列表中删除）。尝试这样的事情：

```
var container = document.getElementById("container");
var elements = container.getElementsByClassName("deleteme");

while (elements[0]) {
    elements[0].parentNode.removeChild(elements[0]);
} 
```

**演示：http:** [//jsfiddle.net/sR2zT/1/](http://jsfiddle.net/sR2zT/1/)

或者您可以使用诸如`element.querySelectorAll`选择元素之类的方法，您可以在其中执行以下操作：

```
document.querySelectorAll("#container .deleteme")
// or
document.getElementById("container").querySelectorAll(".deleteme") 
```

在这种情况下，您**不需要**进行*特殊*的循环，因为`querySelectorAll`不包含**活动**节点列表。

**参考：**

*   `getElementsByClassName()`- [https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName](https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName)
*   `querySelectorAll()`- [https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll](https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll)
*   `removeChild()`- [https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild](https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T21:46:09.257

您可能正在寻找[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)获得所有元素。然后你可以使用类似[`removeChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)删除节点的东西。

```
​var elements = document.getElementById("container")
                   .getElementsByClassName("deleteme");    ​​​

while (elements.length > 0) {
    elements[0].parentNode.removeChild(elements[0]);
} 
```

工作示例：http: [//jsfiddle.net/ja4Zt/1/](http://jsfiddle.net/ja4Zt/1/)

**浏览器支持：**

此解决方案的唯一警告是它在 IE 中的支持有限。根据[这个表](http://caniuse.com/getelementsbyclassname)，`getElementsByClassName`从版本 9 开始在 IE 中实现。

为了弥补这一点，您可以选择所有具有 ID 容器的元素的子节点，遍历它们并检查它们是否具有“deleteme”类，然后才删除它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T21:53:28.690

此版本避免了使用`.getElementsByClassName()`某些 IE 版本不支持的其他版本。

```
var divs = document.getElementById("container").childNodes;
var i = divs.length;
while( i-- ) {
    if( divs[i].className && divs[i].className.indexOf("deleteme") > -1 ) {
      divs[i].parentNode.removeChild( divs[i] );
    }
}​ 
```

这也会向后遍历结果数组，因此删除节点不会影响下一次迭代。

[**在这里**](http://jsfiddle.net/BShu4/1/)提琴[](http://jsfiddle.net/BShu4/1/)

 *** * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-25T21:48:43.647

```
var divs = document.getElementsByClassName("deleteme");
for (var idx = 0; idx != divs.length; idx++) {
  var div = divs[idx];
  while (div.firstChild)
    div.removeChild(div.firstChild);
} 
```

​</p>**

# java - 尝试在 java 中读取文件...有问题

> ID：13555790
> 
> 赞同：0
> 
> 时间：2012-11-25T21:42:20.987
> 
> 标签：java, file-io

> **可能重复：**
> [在 nextInt 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

我对编程很陌生，我遇到了一个对我没有意义的错误（我会在这里搜索答案，但我几乎无法确定问题所在）。我正在尝试读取包含飓风数据的文件。文件的前几行如下：

```
1980 Aug    945 100 Allen
1983 Aug    962 100 Alicia
1984 Sep    949 100 Diana
1985 Jul    1002    65  Bob
1985 Aug    987 80  Danny
1985 Sep    959 100 Elena
1985 Sep    942 90  Gloria
1985 Oct    971 75  Juan 
```

这是我尝试读取文件的代码：

```
import java.util.Scanner;
import java.io.File;
import java.io.IOException;
public class Hurricanes2

{
    public static void main(String[] args)
    {  

    double categoryAverage = 0.0;
    int categorySum = 0;
    int counter = 0;

    File fileName = new File("hurcdata2.txt");
    Scanner inFile = new Scanner("hurcdata2.txt");
    int[] year = new int[59];
    String[] month = new String[59];
    int[] pressure = new int[59];
    int[] windSpeed = new int[59];
    String[] hurcName = new String[59];

    while(inFile.hasNext())
    {
    year[counter] = inFile.nextInt();
    month[counter] = inFile.next();
    pressure[counter] = inFile.nextInt();
    windSpeed[counter] = inFile.nextInt();  
    hurcName[counter] = inFile.next();
    counter++;    

    } 
```

我不断收到错误。Java.util.InputMismatchException，它突出显示了这一行：

```
year[counter] = inFile.nextInt(); 
```

我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:45:43.510

**问题在于文件中每一行末尾的换行符。**阅读第一行条目后，它卡在换行符处并给您不匹配异常，因为它不是`int`（year [counter] = inFile.nextInt（））。

要解决此问题，请在下面添加语句以读取新行字符并在此语句之后忽略它`hurcName[counter] = inFile.next();`

```
 inFile.nextLine(); 
```

完整更新`while`的循环如下：

```
while(inFile.hasNext())
{
   year[counter] = inFile.nextInt();
   month[counter] = inFile.next();
   pressure[counter] = inFile.nextInt();
   windSpeed[counter] = inFile.nextInt();  
   hurcName[counter] = inFile.next();

   //read the new line character at the end and ignore it
   inFile.nextLine();
   counter++;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:46:41.580

将您的while循环替换为：

```
while(inFile.hasNextLine())
{
    year[counter] = inFile.nextInt();
    month[counter] = inFile.next();
    pressure[counter] = inFile.nextInt();
    windSpeed[counter] = inFile.nextInt();  
    hurcName[counter] = inFile.next();
    inFile().nextLine(); // to consume the new line character '\n'
    counter++;    
} 
```

`Java.util.InputMismatchException`被抛出是因为你没有`\n`在 while 循环的末尾读取，而是第一个`inFile.nextInt()`读取它。

*   请参阅：[在 nextInt 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

# c++ - STL set::find 重新定义的搜索

> ID：13555791
> 
> 赞同：2
> 
> 时间：2012-11-25T21:42:27.773
> 
> 标签：c++, iterator, find, set, std-pair

我的程序基于一组对，即

```
typedef std::pair<int,int> innerPair;
typedef std::pair<innerPair,int> setElement;
std::set<setElement> Foo; 
```

`innerPair`元素是真正定义 setElement的元素，但我需要为每个元素附加一个组 ID，因此是后者的`setElement`定义。

在程序的其余部分，我需要找到`innerPair`他们的组 ID，所以我基本上需要一个函数

```
std::set<setElement>::iterator find(innePair); 
```

无论其组ID如何，都会找到innerPair。就目前而言，我可以简单地循环遍历所有可用的组 ID 并进行多次 find() 调用，但这远非高效。

是否有一种简洁的方法来定义`find( ... )`执行某种*通配符*搜索的成员函数，还是我需要用自己的定义重载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:05:57.807

如果您有多个元素具有相同的内部对和不同的组 id，则可以使用[`std::multimap<innerPair, int>`](http://en.cppreference.com/w/cpp/container/multimap).

这允许您使用相同的`innerPair`.

它还简化了使用`lower_bound/upper_bound`or的搜索[`equal_range`](http://en.cppreference.com/w/cpp/container/multimap/equal_range)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T21:58:45.767

我看到了两种可能的设计。一个可能比另一个更适用。

可能更适合`innerPair`成为具有 3 个成员（第一个、第二个和组 ID）的结构或一个`std::tuple<int, int, int>`. 组 ID 是`innerPair`对象的一部分吗？如果是这样，那么我建议这是更好的设计。

如果不是（老实说，我认为在您的情况下不是），您应该使用 an`std::map<innerPair,int>`创建从`innerPair`对象到组 ID 的映射。然后，您可以通过以下方式轻松找到一个元素：

```
std::map<innerPair,int> mapping;
// Fill your map
innerPair key = {1, 2};
auto found_iter = mapping.find(key); 
```

您还可以通过以下方式获取特定的组 ID `innerPair`：

```
int group_id = mapping[key]; 
```

您不需要提供自定义比较器，因为`operator<`已经为`std::pair`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T21:59:15.780

如果要按部分对象搜索，最好*不要*使用 a`std::set<...>`而是使用 a `std::map<...>`：

```
std::map<std::pair<int, int>, int> 
```

无论如何，这几乎具有您针对您的目标的值类型`std::set<...>`（不同之处在于该`first`成员被声明为`const`）。

如果您真的坚持使用 a`std::set<...>`您需要创建一个忽略最后一个`second`成员的比较器类型。我不确定是否`std::set<...>`支持混合类型比较（我*认为*不支持）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T22:16:02.050

您可以使用`multiset`带有自定义比较函数或仿函数的 , 例如：

```
struct innerPairCompare
{
    bool operator () (const setElement &a, const setElement &b)
    {
        const innerPair &a_ = a.first;
        const innerPair &b_ = b.first;
        return (a_.first > b_.first || a_.first = b_.first && a_.second > b_.second);
    }

}; 
```

然后将其用于您的`multiset`：

```
std::multiset<setElement,innerPairCompare> Foo; 
```

它将所有相同的`setElement`s存储`innerPair`在同一个列表中。

或者，如果您需要所有`innerPair`给定的`GroupID`，请使用比较 groupID 的函数。

最后，如果您真的不需要将`GroupID`and the`innerPair`放在一起，您可以使用 a `map`(or `multimap`)，将 the `GroupID`or the`innerPair`用作`Key`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T21:57:50.130

如果您想继续使用`std::set`then 您可以使用[`std::find_if`](http://www.cplusplus.com/reference/algorithm/find_if/)自定义谓词，请查看此[答案](https://stackoverflow.com/questions/589985/vectors-structs-and-stdfind)。

基本上你会定义一个函数

```
bool pairCorresponds(std::pair<int,int> element) 
```

这将为您完成工作。

# java - 组件仅在悬停时绘制

> ID：13555793
> 
> 赞同：1
> 
> 时间：2012-11-25T21:42:37.753
> 
> 标签：java, swing

有人可以解释为什么我的组件只有在我将鼠标悬停在它们应该在的位置时才会被绘制？

我设置了一个可以拖动到任何地方的无边框框架，并且我试图在右上角创建一个退出按钮，但直到我将鼠标悬停在它上面才会被绘制。我在 JFrame 上绘制背景图像，然后绘制我的按钮并将整个内容设置为可见。

```
import java.awt.*;
import java.awt.event.*;
import javax.imageio.ImageIO;
import javax.swing.*;

public class GUI extends JFrame
{
    private Image Background = null;
    private static Point Offset = new Point();

    public GUI() {
        this.setUndecorated(true);
        this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        AddListeners();
        SetCustomTheme();
        LoadBackground();
        Layout();
        pack();
        this.setSize(300, 300);
        this.setVisible(true);
    }

    private void Layout() {
        GroupLayout Info = new GroupLayout(this.getContentPane());
        this.getContentPane().setLayout(Info);
        JButton Button = new JButton();

        Info.setHorizontalGroup(
            Info.createSequentialGroup()
               .addComponent(Button)
         );

        Info.setVerticalGroup(
            Info.createParallelGroup()
                .addComponent(Button)
        );
    }

    private void SetCustomTheme() {
        try {
            UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
        }
    }

    private void LoadBackground() {
        try {
            Background = ImageIO.read(getClass().getResource("Images/meh.png"));
        } catch (Exception Ex) {

        }
    }

    private void SetCustomIcon() {
        Image Icon = Toolkit.getDefaultToolkit().getImage("Images/lol.jpg");
        setIconImage(Icon);
    }

    private void AddListeners() {
        this.addMouseListener(new MouseAdapter() {
            @Override public void mousePressed(MouseEvent e) {
              Offset.x = e.getX();
              Offset.y = e.getY();
            }
          });

        this.addMouseMotionListener(new MouseMotionAdapter() {
            @Override public void mouseDragged(MouseEvent e) {
              Point p = getLocation();
              setLocation(p.x + e.getX() - Offset.x, p.y + e.getY() - Offset.y);
            }
          });
    }

    @Override public void paint(Graphics g) {
        g.drawImage(Background, 0,0,this.getWidth(),this.getHeight(), null);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:56:33.893

1.  与 UI 的所有交互都必须在事件调度线程内执行
2.  您应该避免从顶级容器扩展，例如`JFrame`，改为使用`JPanel`。
3.  未能遵守`paint`链合约会阻止任何子组件开始绘制
4.  重写以执行自定义绘画的首选方法是`paintComponent`

您可能想通读

*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

试试这样的东西；

```
public class BadPaint01 {

    public static void main(String[] args) {
        new BadPaint01();
    }

    public BadPaint01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                Image Icon = Toolkit.getDefaultToolkit().getImage("Images/lol.jpg");
                frame.setIconImage(Icon);
                frame.setUndecorated(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new GUI());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class GUI extends JPanel {

        private Image Background = null;
        private static Point Offset = new Point();

        public GUI() {
            AddListeners();
            SetCustomTheme();
            LoadBackground();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 300);
        }

        private void Layout() {
            GroupLayout Info = new GroupLayout(this);
            setLayout(Info);
            JButton Button = new JButton();

            Info.setHorizontalGroup(
                    Info.createSequentialGroup()
                    .addComponent(Button));

            Info.setVerticalGroup(
                    Info.createParallelGroup()
                    .addComponent(Button));
        }

        private void SetCustomTheme() {
            try {
                UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
            } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
            }
        }

        private void LoadBackground() {
            try {
                Background = ImageIO.read(getClass().getResource("Images/meh.png"));
            } catch (Exception Ex) {
            }
        }

        private void AddListeners() {
            this.addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    Offset.x = e.getX();
                    Offset.y = e.getY();
                }
            });

            this.addMouseMotionListener(new MouseMotionAdapter() {
                @Override
                public void mouseDragged(MouseEvent e) {
                    Point p = getLocation();
                    setLocation(p.x + e.getX() - Offset.x, p.y + e.getY() - Offset.y);
                }
            });
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); //To change body of generated methods, choose Tools | Templates.
            g.drawImage(Background, 0, 0, this.getWidth(), this.getHeight(), null);
        }
    }
} 
```

您可能还想通读[Java 编程语言的代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)，您不会因为忽略它们而结交任何朋友；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:09:30.073

如果我没记错的话，`ToolKit.getImage`返回一个`Image`可能没有完全加载的。当您将鼠标悬停在它上面时，它可能同时已在后台加载。而是这样做（类似于您的背景行）：

```
ImageIcon Icon = new ImageIcon(ImageIO.read(getClass().getResource("Images/lol.png")));
setIconImage(Icon); 
```

（为了更好地理解，您可能需要搜索`MediaTracker`，我相信它用于确保图像已完全加载。）

# oracle - 我怎样才能让它变得更好？

> ID：13555794
> 
> 赞同：0
> 
> 时间：2012-11-25T21:42:43.487
> 
> 标签：oracle, function, plsql, triggers, procedure

下面我创建了 2 个应用折扣的触发器，一个使用功能而另一个不使用。有没有其他方法可以提高效率/更好？

```
 CREATE OR REPLACE TRIGGER APPLY_DISCOUNT
 BEFORE INSERT OR UPDATE OF INV_NO,C_NO ON INVOICE
 FOR EACH ROW

 DECLARE

 CURSOR C_APPTMNT
 IS
 SELECT C_NO,COUNT(C_NO) 
 FROM APPOINTMENT GROUP BY C_NO;

 V_C_NO APPOINTMENT.C_NO%TYPE;
 VISIT NUMBER(2);

 BEGIN

 VISIT:=CNT_VISIT(:NEW.C_NO);

 IF VISIT BETWEEN 2 AND 4 
 AND :NEW.C_NO = V_C_NO THEN
 :NEW.BILL := :NEW.BILL * 0.9;

 ELSIF VISIT BETWEEN 5 AND 8 
 AND :NEW.C_NO = V_C_NO THEN
 :NEW.BILL := :NEW.BILL * 0.8;

 ELSIF VISIT >=9 AND :NEW.C_NO = V_C_NO THEN:NEW.BILL := :NEW.BILL * 0.7;

 ELSE DBMS_OUTPUT.PUT_LINE('no discount added');

 END IF;

 CLOSE C_APPTMNT;
 END;
 / 
```

///////////////////////////////////////// //////////////

```
 CREATE OR REPLACE FUNCTION ADD_DISCOUNT(
 I_C_NO INVOICE.C_NO%TYPE, I_BILL INVOICE.BILL%TYPE)
 RETURN NUMBER
 IS
 V_BILL invoice.bill%type;

 CURSOR C_APPTMNT
 IS
SELECT C_NO,COUNT(C_NO)
 FROM APPOINTMENT GROUP BY C_NO;

V_C_NO INVOICE.C_NO%TYPE;
VISIT NUMBER;

BEGIN

OPEN C_APPTMNT;
FETCH C_APPTMNT INTO V_C_NO,VISIT;

 IF VISIT >=3
AND I_C_NO = V_C_NO THEN
V_BILL := I_BILL * 0.9;

ELSIF VISIT >=6
AND I_C_NO = V_C_NO THEN
V_BILL := I_BILL * 0.8;

 ELSIF VISIT >=9 AND I_C_NO = V_C_NO THEN V_BILL := I_BILL * 0.7;
 ELSE V_BILL:= I_BILL;
END IF;

CLOSE C_APPTMNT;

RETURN V_BILL;

END;
/

CREATE OR REPLACE TRIGGER DIS_BILL
BEFORE INSERT OR UPDATE OF INV_NO,C_NO ON INVOICE
FOR EACH ROW
DECLARE
BEGIN
:NEW.BILL:=ADD_DISCOUNT(:NEW.C_NO,:NEW.BILL);
END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:55:32.170

第二个是错误的。如果一个值是`>= 9`它也是`>=6`和`>=3`。因此，永远不会达到其他那些。

在第一个中，您编写输出，但前提是没有添加折扣。感觉就像你只是把那行放在那里，因为没有它就无法编译，但你也可以添加一行 contains`null;`来制作一个空语句块编译。

还有更多技巧可以使此触发器更快。一方面，您不必查询所有记录，因为您知道该组。您可以在查询中进行计算，尽管这不会使其更快。

您的触发器可能如下所示：

```
CREATE OR REPLACE TRIGGER APPLY_DISCOUNT
  BEFORE INSERT OR UPDATE OF INV_NO, C_NO ON INVOICE
  FOR EACH ROW

BEGIN

  SELECT 
    CASE 
      WHEN COUNT(C_NO) >= 9 THEN 0.7
      WHEN COUNT(C_NO) >= 6 THEN 0.8
      WHEN COUNT(C_NO) >= 3 THEN 0.9
    ELSE 1
    END * :NEW.BILL
  INTO
    :NEW.BILL
  FROM 
   APPOINTMENT 
  WHERE
    C_NO = :NEW.C_NO;

END;
/ 
```

我认为`SELECT INTO :NEW.BILL`应该可以，但如果没有，您可以将其选择为变量，然后将其分配给`:NEW.BILL`.

# android - 由 java.lang.NullPointerException 引起

> ID：13555796
> 
> 赞同：1
> 
> 时间：2012-11-25T21:42:46.803
> 
> 标签：android, eclipse

我是 android 编程新手，当我在调试时遇到错误时，我正在从教程中创建一个简单的应用程序。在本教程中，该应用程序包含一个按钮，用于计算它被按下的次数，并且该项目有效，但我编辑了该项目以创建一个具有两个按钮的应用程序，一个按钮计算它被按下的次数（使用简单的 if-else）和其他重置计数。这个修改后的应用程序不起作用。

这些是代码错误和代码文件：

错误：

```
11-25 21:47:32.888: E/AndroidRuntime(6865): FATAL EXCEPTION: main
11-25 21:47:32.888: E/AndroidRuntime(6865): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.flavio.tictactoe/com.flavio.tictactoe.TicTacToe}: java.lang.NullPointerException
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.os.Looper.loop(Looper.java:137)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.ActivityThread.main(ActivityThread.java:4514)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at java.lang.reflect.Method.invokeNative(Native Method)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at java.lang.reflect.Method.invoke(Method.java:511)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at dalvik.system.NativeStart.main(Native Method)
11-25 21:47:32.888: E/AndroidRuntime(6865): Caused by: java.lang.NullPointerException
11-25 21:47:32.888: E/AndroidRuntime(6865):     at com.flavio.tictactoe.TicTacToe.onCreate(TicTacToe.java:24)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.Activity.performCreate(Activity.java:4465)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
11-25 21:47:32.888: E/AndroidRuntime(6865):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
11-25 21:47:32.888: E/AndroidRuntime(6865):     ... 11 more 
```

TicTacToe.java（是的，我知道它不是井字游戏应用程序 :)）：

```
package com.flavio.tictactoe;

import android.os.Bundle;
import android.widget.Button;
import android.app.Activity;
import android.view.View;

public class TicTacToe extends Activity 
implements View.OnClickListener{

Button button;
int touchCount;
String number;
Button ResetButton;

@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
button = new Button(this);
button=((Button)this.findViewById(R.id.button_count));
button.setText( "Touch me!" );
button.setOnClickListener(this);
ResetButton=new Button(this);
ResetButton=((Button)this.findViewById(R.id.button_reset));
ResetButton.setText("Reset");
ResetButton.setOnClickListener(this);
setContentView(R.id.button_count);
setContentView(R.id.button_reset);

}

public void onClick(View v) {
    switch(v.getId()){

    case R.id.button_count:
        touchCount++;
        if(touchCount>1){
            number=" times";
            }else{
                number=" time";
                }

        button.setText("Touched me " + touchCount + number);
    case R.id.button_reset:
        touchCount=0;
        if(touchCount>1){
            number=" times";
            }else{
                number=" time";
                }

    }
    }
} 
```

activity_tic_tac_toe.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".TicTacToe" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/button_count"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>

    <Button
        android:id="@+id/button_reset"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"/>
</RelativeLayout> 
```

PS 我的 android.jar 文件有问题：每次我想查看 .class 文件时，eclipse 都会告诉我“找不到源”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:47:06.373

您需要先使用`setContentView()`来显示您的`activity_tic_tac_toe`布局。然后您可以使用`findViewById()`在此布局中获取按钮或任何其他视图：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_tic_tac_toe); // The layout that holds your Buttons

button=((Button)this.findViewById(R.id.button_count));
button.setText( "Touch me!" );
button.setOnClickListener(this);

ResetButton=((Button)this.findViewById(R.id.button_reset));
ResetButton.setText("Reset");
ResetButton.setOnClickListener(this); 
```

（请注意，我删除了一些不必要的行。）

* * *

> PS 我的 android.jar 文件有问题：每次我想查看 .class 文件时，eclipse 都会告诉我“找不到源”

您是否正在尝试查看源代码？单击`Attach Source Code`并将其指向您的 Android SDK 副本。

如果您没有该选项，请阅读此问题：[如何将 javadoc 或源附加到 libs 文件夹中的 jars？](https://stackoverflow.com/q/9873152/1267661)

# c# - 带有自定义验证器的文件上传

> ID：13555800
> 
> 赞同：1
> 
> 时间：2012-11-25T21:43:29.710
> 
> 标签：c#, asp.net

由自定义验证器验证的文件上传存在问题。文本框值始终为空或 null onververvalidate。

ASPX

```
<asp:CustomValidator ID="cvFileUpload" runat="server" 
                ErrorMessage="Please select file!" ControlToValidate="fuCheatingEvidence" 
                onservervalidate="cvFileUpload_ServerValidate" 
                ValidationGroup="vgSubmitForm" ValidateEmptyText="True"></asp:CustomValidator>
            <asp:FileUpload ID="fuCheatingEvidence" runat="server" 
                 Width="890px" Size="50" /> 
```

代码背后

```
protected void cvFileUpload_ServerValidate(object source, ServerValidateEventArgs args)
{
    String fileName = fuCheatingEvidence.PostedFile.FileName;

    if (fileName != "")
    {
        args.IsValid = true;

    }
    else
    {
        args.IsValid = false;
    }

} 
```

这只是检查 FileUpload 控件是否为空的简单检查，稍后我将添加更多自定义验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:41:31.430

我检查了你的代码，它工作得很好。
添加文件时，我得到了`hasFile`和`fileName`

```
protected void cvFileUpload_ServerValidate(object source, ServerValidateEventArgs args)
{
    bool hasFile = fuCheatingEvidence.HasFile; // Returns true
    String fileName = fuCheatingEvidence.PostedFile.FileName; // Returns the filename
     .....
} 
```

这让我相信你的代码中有其他部分导致了问题。我建议创建一个只有 the`FileUpload`和 the的副项目，`CustomValidator`并亲自看看它是否有效。然后，尝试找出导致主项目出现问题的原因。如果您仍然有问题，请提出另一个特定于您遇到的实际问题的问题。

# linux - linux上的权限有限

> ID：13555808
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:43:57.263
> 
> 标签：linux, security, permissions

我想给 Linux 上的特定用户一些权限，使他能够运行类似`shutdown`or的命令`apt-get`。我不想使用 SUID 位，因为我不想让其他用户使用这些命令。

我该怎么做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:31:52.987

`sudo`可能是最简单的方法。您需要在 sudoers 文件中添加如下内容

```
username   ALL=(ALL) /sbin/shutdown, /usr/bin/apt-get 
```

其中用户名替换为用户的实际用户名。您应该可以通过谷歌搜索一些示例 - 这是[一个这样的页面](http://aplawrence.com/Basics/sudo.html)。

使用该程序可以安全地编辑 sudoers 文件`visudo`。

# android - Jquery 移动对话框不随动态内容滚动

> ID：13555809
> 
> 赞同：3
> 
> 时间：2012-11-25T21:44:02.043
> 
> 标签：android, cordova, jquery-mobile

当我将内容动态添加到 jQuery 移动对话框，并且新内容超出手机屏幕的底部边缘时，我无法向下滚动对话框以查看新内容。但是，当我旋转我的设备以强制重绘屏幕上的任何内容时，向下滚动可以正常工作。

我在对话框元素和对话框内附加新内容的元素上尝试了 .page() 和 .trigger('create') - 不能解决问题。

如何更新我的对话框，以便在添加到其中的所有内容中滚动？

我正在使用 Jquery mobile 1.2.0、Phonegap 2.2.0、Android 4.0。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:05:23.787

当您旋转屏幕时，不是重绘使滚动开始工作。jQuery mobile 有一个窗口调整大小事件，它以像素为单位设置页面大小，这有时会导致大小在错误的时间发生变化。在大多数情况下，您可以在 css 中使用 !important 规则覆盖它。

如果您不想深入研究 jQuery 移动内部，一个更简单的选择可能是在对话框中放置一个固定大小的容器并在其上设置溢出：自动，这样对话框本身就不需要滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T03:50:16.377

[.trigger('updatelayout')](https://api.jquerymobile.com/updatelayout/)在 Chrome/webkit 和 iOS 上为我解决了这个问题。

每次添加新内容时我都会调用它，例如：

```
jQuery("#" + id).append(paragraph).trigger('updatelayout'); 
```

# javascript - 访问 Json 对象

> ID：13555810
> 
> 赞同：1
> 
> 时间：2012-11-25T21:44:08.967
> 
> 标签：javascript, json

我有一个用 Javascript 打印的 json 对象（jsencodedata），如下所示：

```
document.write(jsencodedata); 
```

它打印：

```
[{"user":"John","Pass":"abc123"},{"user":"John2","Pass":"abcdef"}] 
```

我的问题是如何仅获取第一个用户或密码或仅获取第二个用户或密码？我是新手，所以请原谅我这个愚蠢的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:50:03.753

试试这个（假设 jsencodeddata 是一个 JSON 字符串）：

```
var users = JSON.parse(jsencodeddata);
console.log(users[0]); // the first user object
console.log(users[1]['Pass']); // second user's password 
```

这会将 JSON 字符串转换为实际的对象数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:50:27.350

尝试

```
jsencodedata[0].user;  //returns "John"
jsencodedata[0].Pass;  //returns "abc123" 
```

数组索引告诉您要访问的对象 [0] 表示您正在访问第一个对象，而 [1] 表示您正在访问第二个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:55:52.233

假设您使用[的是支持原生 JSON 的浏览器](http://caniuse.com/json)，那么：

```
var arrData = JSON.parse(jsencodedata); 
```

将 JSON 字符串解析为一个数组，然后：

`arrData[0]`是第一个用户。
`arrData[0].user`是第一个用户的名字。
`arrData[0].Pass`是第一个用户的密码。

`arrData[1]`是第二个用户。
`arrData[1].user`是第二个用户的名字。
`arrData[1].Pass`是第二个用户的密码。

# jquery - 保存 jquery 可放置位置

> ID：13555818
> 
> 赞同：2
> 
> 时间：2012-11-25T21:45:03.120
> 
> 标签：jquery, database, droppable

我想将可放置位置保存到数据库中。在每个可放置的 div 中添加了一个文本输入字段，其中 div 名称带有“i_”前缀。

如果我在代码中放置一个警报以显示放置的对象，则 id 在警报框中是正确的，并出现在文本输入字段中。但是当我点击 OK 时，它就消失了。

```
<div style="float:left; border-style:solid;">
<div class="draggable" class="ui-widget-content" id="1059" style="left:0px; top:0px;"    >john doe</div>
<div class="draggable" class="ui-widget-content" id="1113" style="left:0px; top:0px;"    >jane doe</div>

<div   style="float:left;  vertical-align:top"  class="droppable ui-widget-header" id="1-2">
<input type='text' id='i_1-2'  name='i_1-2' value=''><p>1-2</p></div>

<div style="clear:both";></div> <div style="float:left; vertical-align:top" class="droppable ui-widget-header" id="2-1">
<input type='text' id='i_2-1'  name='i_2-1' value=''>
<p>2-1</p></div> 
```

如果调用的函数是 this，则文本框变为黄色，但未设置值

```
drop: function(event, ui )
                 {
            var f=ui.draggable.attr("id");alert(f);
            var s = 'i_'+$(this).attr("id");//alert(s);

              $('#'+s).css({'background-color' : 'yellow'});
              $('#'+s).val(f);

                } 
```

我究竟做错了什么 ？

```
 $( ".droppable" ).droppable
        ({
        activeClass: "ui-state-hover",hoverClass: "ui-state-active",
        drop: function( event, ui )
             {
        var f=ui.draggable.attr("id");//alert(f);
        var s = 'i_'+$(this).attr("id");
document.getElementById(s).value=f;//alert(document.getElementById(s).value);

            }

} ); 
```

# clojure - rand-nth 在编译后总是产生相同的结果

> ID：13555819
> 
> 赞同：0
> 
> 时间：2012-11-25T21:45:20.003
> 
> 标签：clojure

我已经通过 Leiningen 使用 core.clj 创建了项目：

```
(ns cotd.core
  (:gen-class)
  (:use [clojure.repl :only (doc)]))

(defmacro eval-doc
  [form]
  (let [resulting-symbol (eval form)]
    `(doc ~resulting-symbol)))

(defn- random-function-name []
  (rand-nth (keys (ns-publics 'clojure.core))))

(defn -main
  "Display random doc page"
  [& args]
  (eval-doc (random-function-name))) 
```

在编译和运行之后，它总是产生相同的结果：

```
$ java -jar cotd.jar
-------------------------
clojure.core/unchecked-negate
([x])
  Returns the negation of x, a long.
  Note - uses a primitive operator subject to overflow.
$ java -jar cotd.jar
-------------------------
clojure.core/unchecked-negate
([x])
  Returns the negation of x, a long.
  Note - uses a primitive operator subject to overflow. 
```

但是连续两次调用：

```
(do
  (eval-doc (random-function-name))
  (eval-doc (random-function-name)))) 
```

它在单个“调用”中产生两个不同的结果。

我尝试过的是谷歌搜索、阅读等，但我不知道发生了什么……

如何动态调用这个 rand-nth？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:35:27.413

问题不在于 rand-nth，而是因为 let 语句中的结果符号是在编译阶段产生的。@beyamor 在这里提供了答案：[Unable to get random (doc) from a namespace](https://stackoverflow.com/questions/13554110/unable-to-get-random-doc-from-a-namespace/)

# php - CodeIgniter 控制器构造函数

> ID：13555822
> 
> 赞同：16
> 
> 时间：2012-11-25T21:45:41.653
> 
> 标签：php, codeigniter

我对 codeigniter 很陌生，我想知道控制器中构造函数的含义是什么。我在 codeigniter 教程中看到了以下代码 -

```
class upload extends CI_Controller {

    function __construct() {
        parent::__construct();
        $this->load->helper(form);
    }

    // rest of the class... 
```

我的问题是何时调用构造函数 - 每次控制器服务请求时都会调用它（例如，控制器类为它收到的每个请求实例化？）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T22:59:06.680

好吧，这是一个更一般的 PHP 问题。无论如何，是的，魔术方法 __construct() 在类的每个实例化时（自动）被调用，正如您在手册中看到的那样：[http://www.php.net/manual/en/language.oop5.decon。 php](http://www.php.net/manual/en/language.oop5.decon.php)

通常，在 CI 中没有必要调用构造函数，除非你真的想要一个。在您发布的示例中，代码在类的每个实例化时加载帮助器 - 这与在每个方法中加载帮助器相同，只是节省了大量输入并确保不会忘记它。您也可以将要加载的库/帮助程序/模型放在 config/autoload.php 中的相应自动加载数组中（检查 CI 手册中的“自动加载”）

一旦你在你的子控制器中定义了一个构造函数，你就不得不调用父构造函数（邮件 CI_Controller 类的），因为在那里创建了主要的 CI 对象并加载了所有类，你需要那些在你的孩子控制器也是；如果不这样做，您的子类将单独构建并且不会继承。

我希望我说清楚了，英语不是我的母语 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:17:36.460

构造函数是***魔术***从字面上看它被称为魔术方法。使构造函数很酷的是它会在任何方法之前为您做事。因此，如果您有一个管理类，并且有人应该登录才能访问它 - 您可以在构造函数中检查登录，如果他们没有被授权，则将其退回。

在构造函数中，您可以加载您的类需要的模型、库、帮助器等，它们可用于类中的任何方法。

您可以加载方法使用的变量。这对模型非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T04:22:02.710

不要在**最新的 apache 和 codeigniter**`_construct()`中使用函数

 **使用`helperlin in index()`功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T05:49:45.933

这是一个普遍的问题。构造函数是实例化时自动调用的函数。这个函数帮助我们初始化我们在代码中经常需要的东西，比如当我们必须加载表单等助手模型时

```
$this->load->model('Model_name'); 
```

现在，当您在构造函数中编写此行时，您无需在该类的方法中一次又一次地加载此模型。**

# sql - 如何避免使用多个 SQL 调用来获取数据？

> ID：13555825
> 
> 赞同：1
> 
> 时间：2012-11-25T21:46:07.830
> 
> 标签：sql, join, left-join

我有一个 MySQL 数据库，其中有一个表`monkeys`：

```
id     name
1      Alice
2      Bill
3      Donkey Kong
4      Edna
5      Feefee 
```

我还有一张桌子`bananas`，它们是从哪里挑选出来的。

```
id     where_from
1      USA
2      Botswana
3      Banana-land
4      USA 
```

最后，我有一张表格`matches`，描述了哪些香蕉属于哪些猴子。每只猴子只能吃一根香蕉，没有一只猴子可以共用一根香蕉。有些猴子可能缺少一根香蕉。

```
id     monkey_id     banana_id
1      3             4 
2      4             1
3      5             2 
```

如何使用单个 SQL 语句检索所有匹配项？对于每场比赛，我想要猴子的名字以及香蕉的来源。

我尝试了以下 3 个 SQL 语句，它们都有效：

1.  `SELECT * FROM matches`
2.  `SELECT * FROM monkeys WHERE id=[monkey_id from 1st SQL query]`
3.  `SELECT * FROM bananas WHERE id=[banana_id from 1st SQL query]`

我觉得 3 SQL 语句虽然很麻烦。关于如何只使用单个 SQL 语句的任何想法？我只是在学习 SQL，并且正在学习基础知识。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:52:03.297

由于*有些猴子可能缺少香蕉*，这意味着介于[和`LEFT JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)`matches`之间`monkeys`。这将确保列出所有猴子，即使它们没有香蕉`matches`。

```
SELECT
  monkeys.name,
  bananas.where_from
FROM
  monkeys
  /* List all monkeys, even if they have no match */
  LEFT JOIN matches ON monkeys.id = matches.monkey_id
  /* And another LEFT JOIN to link matches to bananas */
  LEFT JOIN bananas ON bananas.id = matches.banana_id 
```

[这是 SQLfiddle.com 上的一个示例](http://sqlfiddle.com/#!2/78812/2)

我强烈推荐阅读 Jeff Atwood（Stack Overflow 的联合创始人）[解释 SQL 连接的优秀文章](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# php - 在视频ffmpeg的特定时间加入音频文件

> ID：13555827
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:46:26.223
> 
> 标签：php, ffmpeg

我正在尝试使用下面的代码在特定时间（我的输入视频的第 6 秒）合并音频文件并创建一个新的视频 autput 文件，但我无法使其工作。

```
<?php

exec("/usr/local/bin/ffmpeg -sameq -i /home/xxx/public_html/xxx/video/full.mp4 -itsoffet 6 -i /home/xxx/public_html/xxx/sounds/names/george.mp3 /home/xxx/public_html/xxx/upload/sample.mpg");

?> 
```

十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:20:15.900

首先，您的命令中有一个错字：`-itsoffet`应该是`-itsoffset`.

其次，似乎有[一个错误](http://roundup.libav.org/issue359)影响`-itsoffset`.

看看这些相同/相似的问题：

*   [使用 FFMPEG 将音频（带偏移）添加到视频中](https://stackoverflow.com/questions/7426179/add-audio-with-an-offset-to-video-with-ffmpeg)
*   [使用 ffmpeg 延迟音频](https://stackoverflow.com/questions/9643348/delay-audio-with-ffmpeg)
*   [使用 FFMPEG 在特定点向视频添加多个音频文件](https://stackoverflow.com/questions/11579952/add-multiple-audio-files-to-video-at-specific-points-using-ffmpeg)

# c# - IIS 不会启动？

> ID：13555829
> 
> 赞同：2
> 
> 时间：2012-11-25T21:46:33.633
> 
> 标签：c#, .net, vb.net, visual-studio, iis

我已经在 localhost:94 上设置了一个 IIS 站点，它运行正常，我使用的是 Visual Studio 2012，当我去启动它时，它会出现......

![在此处输入图像描述](../Images/c471b5591480503530bc3f5b6eaac593.png)

有人知道如何解决吗？

它在其他开发人员的计算机上运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:48:03.100

尝试以管理员身份运行 Visual Studio。

# android - 如何在android中集成facebook并登录并获取用户详细信息和注销

> ID：13555832
> 
> 赞同：0
> 
> 时间：2012-11-25T21:46:52.433
> 
> 标签：android, facebook-login, facebook-android-sdk

如何在 android 中集成 facebook 并登录并获取用户详细信息和注销。

代码 `JSONObject json = Util.parseJson(mFacebook.request("me"));` 给我null。
之后我从捆绑包中获得访问令牌`OnComplete()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:54:45.690

您应该发布更多关于您所做工作的代码，这样更容易理解您的问题。此外，如果您收到错误，请发布 logcat 输出。检查[此链接。](https://developers.facebook.com/docs/mobile/android/build/) 这是适用于 Android 的 Facebook 开发人员教程，它会逐步将 Facebook 整合到您的应用程序中。现在，该教程有时可能含糊不清且难以理解，因此请查看[此链接。](http://www.youtube.com/watch?v=w-vNi1W4fco)这是一个视频教程，可引导您完成这些步骤，并且非常容易遵循。好吧，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-06T18:01:49.390

这对我有用，试试这个：

```
 public class FacebookIntegrationActivity extends AppCompatActivity {

    ActivityFacebookIntegrationBinding binding;
    CallbackManager callbackManager;
    private static final String EMAIL = "email";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    binding = DataBindingUtil.setContentView(FacebookIntegrationActivity.this, 
    R.layout.activity_facebook_integration);

    //[apply click on view]
    applyClickOnView();
    //method to integrate facebook
    facebookIntegration();

  }

  private void applyClickOnView() {
       binding.btnCustom.setOnClickListener(new View.OnClickListener() {
       @Override
       public void onClick(View v) {
            LoginManager.getInstance().logOut();

LoginManager.getInstance().logInWithReadPermissions(FacebookIntegrationActivity.this, 
 Arrays.asList("public_profile", "email"));
        }
    });
 }

  //[for facebook integration]
    private void facebookIntegration() {
    callbackManager = CallbackManager.Factory.create();
    LoginManager.getInstance().registerCallback(callbackManager,
            new FacebookCallback<LoginResult>() {
                @Override
                public void onSuccess(LoginResult loginResult) {
                    // App code to get user profile
                    requestUserProfile(loginResult);
                }

                @Override
                public void onCancel() {
                    String s = "";
                    //code on cancling of request
                }

                @Override
                public void onError(FacebookException exception) {
                    String s = "";
                    //code on error occurence
                }
            });
     }

   private void requestUserProfile(LoginResult loginResult) {
       final GraphRequest request = 
       GraphRequest.newMeRequest(loginResult.getAccessToken(), new 
       GraphRequest.GraphJSONObjectCallback() {
        @Override
        public void onCompleted(JSONObject me, GraphResponse response) {
            if (response.getError() != null) {
            } else {
                try {
                    String id = "";
                    String firstName = "";
                    String lastName = "";
                    String email = "";
                    String userPicUrl = "";
                    String userName = "";
                    if (response.getJSONObject().has("id")) {
                        id = response.getJSONObject().get("id").toString();
                    }
                    if (response.getJSONObject().has("first_name")) {
                        firstName = 
                    response.getJSONObject().get("first_name").toString();
                        userName = firstName;
                    }
                    if (response.getJSONObject().has("last_name")) {
                        lastName = 
                    response.getJSONObject().get("last_name").toString();
                        if (!firstName.equals("")) {
                            userName = firstName + " " + lastName;
                        } else {
                            userName = lastName;
                        }
                    }

                    if (response.getJSONObject().has("email")) {
                        email = response.getJSONObject().get("email").toString();
                    }
                    if (response.getJSONObject().has("id")) {
                        userPicUrl = "https://graph.facebook.com/" + id + "/picture? 
                       type=normal";
                    }
                    //send data to api......in live projects 
              //else display on the view........

                    binding.txtName.setText(userName);
                    binding.txtEmail.setText(email);
            //use picasso or glide to display user profile picture in any 
             ImageView                

                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }
    });
    Bundle parameters = new Bundle();
    parameters.putString("fields", "id, first_name, last_name, email");
    request.setParameters(parameters);
    request.executeAsync();

   }

   @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    callbackManager.onActivityResult(requestCode, resultCode, data);
    super.onActivityResult(requestCode, resultCode, data);
   }

  } 
```

# javascript - 没有为具有主题标签（并且没有 www）的 URL 执行内容脚本？

> ID：13555833
> 
> 赞同：2
> 
> 时间：2012-11-25T21:46:55.217
> 
> 标签：javascript, google-chrome-extension, hashtag, content-script

只要您将 javascript 注入的页面的 URL 以`www`. 如果没有，你会怎么做？这是我的清单的相关部分：

```
"content_scripts": [
  {
  "run_at": "document_start",
  "matches": ["https://groups.google.com/forum/?fromgroups=#!newtopic/opencomments-site-discussions"],
  "js": ["postMsg.js"]
  }
], 
```

根据另一个stackoverflow帖子，问题是因为页面的URL不是以“www”开头。这是否意味着您不能将 javascript 注入其 URL 不以“www”开头的安全页面，还是有其他方法？这在过去从来都不是问题，因为我的扩展使用版本 1 清单运行。

忘记添加内容脚本：

```
var subject = document.getElementById("p-s-0");

subject.setAttribute("value", "foo"); 
```

ID 为“ps-0”的元素是 Google 网上论坛帖子页面中的主题字段，因此该字段应显示为“foo”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:21:41.750

几个问题：

1.  这是一个无效的[匹配模式](http://developer.chrome.com/extensions/match_patterns.html)，因为它们只指定了 URL*路径*（之前的部分`?`）。

    更改`matches`为：

    ```
    "matches": ["https://groups.google.com/forum/*"], 
    ```

2.  整体 URL ( `https://groups.google.com/forum/?fromgroups=#!newtopic/opencomments-site-discussions`) 不实用，因为 Google 会随意更改 URL 参数。例如，`fromgroups`不经常出现，并且可能没有`=`如果它存在。附加参数，例如`hl=en`来来去去。（这就是为什么我之前的回答对我有用，但对你无效。）

    因此，`include_globs`在清单中使用将是一个混乱且容易出错的练习。
    解决方案是检查`location.hash`内容脚本。

3.  该脚本设置为`"run_at": "document_start"`，因此内容脚本在任何具有 id 的节点之前运行`p-s-0`。

    将清单更改为`"run_at": "document_end"`.

4.  新的 Google 组在很大程度上是由 AJAX 驱动的。因此，“新主题”页面通常是“加载”的，而实际上并未加载一个全新的页面。这意味着内容脚本不会重新运行。它需要监视“新”的 AJAX 加载页面。

    [通过监视事件](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#event-hashchange)[检查`hashchange`](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#event-hashchange)“新”页面。

5.  此外，该`p-s-0`元素是由 AJAX 添加的，并且不会立即在“新”页面上可用。在 a 中检查此元素`setInterval`。

* * *

综上所述，
manifest.json**变为**：

```
{
    "manifest_version": 2,
    "content_scripts": [ {
        "run_at":           "document_end",
        "js":               [ "postMsg.js" ],
        "matches":          [ "https://groups.google.com/forum/*" ]
    } ],
    "description":  "Fills in subject when posting a new topic in select google groups",
    "name":         "Google groups, Topic-subject filler",
    "version":      "1"
} 
```

内容**脚本**(postMsg.js) 变为：

```
fireOnNewTopic ();  // Initial run on cold start or full reload.

window.addEventListener ("hashchange", fireOnNewTopic,  false);

function fireOnNewTopic () {
    /*-- For the pages we want, location.hash will contain values
        like: "#!newtopic/{group title}"
    */
    if (location.hash) {
        var locHashParts    = location.hash.split ('/');
        if (locHashParts.length > 1  &&  locHashParts[0] == '#!newtopic') {
            var subjectStr  = '';
            switch (locHashParts[1]) {
                case 'opencomments-site-discussions':
                    subjectStr  = 'Site discussion truth';
                    break;
                case 'greasemonkey-users':
                    subjectStr  = 'GM wisdom';
                    break;
                default:
                    break;
            }

            if (subjectStr) {
                runPayloadCode (subjectStr);
            }
        }
    }
}

function runPayloadCode (subjectStr) {
    var targetID        = 'p-s-0'
    var failsafeCount   = 0;
    var subjectInpTimer = setInterval ( function() {
            var subject = document.getElementById (targetID);
            if (subject) {
                clearInterval (subjectInpTimer);
                subject.setAttribute ("value", subjectStr);
            }
            else {
                failsafeCount++;
                //console.log ("failsafeCount: ", failsafeCount);
                if (failsafeCount > 300) {
                    clearInterval (subjectInpTimer);
                    alert ('Node id ' + targetID + ' not found!');
                }
            }
        },
        200
    );
} 
```

# bash - 如何使用 vim 打开目录下的每个 .txt 文件（使用 Bash）

> ID：13555834
> 
> 赞同：6
> 
> 时间：2012-11-25T21:46:57.540
> 
> 标签：bash, vim, while-loop

我正在尝试以下使用 a`vim`打开`txt`当前目录下的每个文件。

```
find . -name "*.txt" -print | while read aline; do
  read -p "start spellchecking fine: $aline" sth
  vim $aline
done 
```

运行它`bash`抱怨

```
Vim: Warning: Input is not from a terminal
Vim: Error reading input, exiting...
Vim: Finished. 
```

谁能解释什么可能出错？另外，我打算`read -p`在使用vim之前使用for prompt，但没有成功。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T21:55:05.523

尝试：

```
vim $( find . -name "*.txt" ) 
```

要修复您的解决方案，您可以（可能）执行以下操作：

```
find . -name "*.txt" -print | while read aline; do
      read -p "start spellchecking fine: $aline" sth < /dev/tty
      vim $aline < /dev/tty
done 
```

问题是整个 while 循环都从 find 中获取输入，而 vim 继承了该管道作为它的标准输入。这是从终端获取 vim 输入的一种技术。（但并非所有系统都支持`/dev/tty`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:08:08.230

`shopt -s globstar`你可以清除 find ，从而使 bash 不在接收 find 输出的子 shell 中执行 vim ：

```
shopt -s globstar
shopt -s failglob
for file in **/*.txt ; do
    read -p "Start spellchecking fine: $file" sth
    vim "$file"
done 
```

. 另一个想法是使用

```
for file in $(find . -name "*.txt") ; do 
```

（如果没有带有空格或换行符的文件名。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:28:19.713

通常最简单的解决方案是最好的，我相信就是这样：

```
vim -o `find . -name \*.txt -type f` 
```

-type f 是为了确保只打开以 .txt 结尾的文件，因为您不排除可能存在名称以“.txt”结尾的子目录的可能性。

这将在 vim 中的单独窗口/缓冲区中打开每个文件，如果您不需要这样做并且对使用 :next 和 :prefix 浏览文件感到满意，请从上面建议的命令行中删除“-o”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T22:28:32.790

在一个`vim`实例中打开所有文件的正确方法是（假设文件数不超过最大参数数）：

```
find . -name '*.txt' -type f -exec vim {} + 
```

另一种完全回答 OP 的可能性，但好处是对于包含空格或有趣符号的文件名是安全的。

```
find . -name '*.txt' -type f -exec bash -c 'read -p "start spellchecking $0"; vim "$0"' {} \; 
```

# mysql - 如何在 MySQL 中找到计数结果的平均值？

> ID：13555843
> 
> 赞同：2
> 
> 时间：2012-11-25T21:47:30.613
> 
> 标签：mysql, sql, count, average

我想从计数结果中得到 AVG。

```
SELECT labelname AS Record_Labels, COUNT(title) AS Number_of_CDs_Released FROM CD
JOIN RecordLabel ON labelname = released_by
GROUP BY labelname; 
```

我试过这样做：AVG(COUNT(title))，但它没有用。有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:50:46.833

您可以使用嵌套查询来执行此操作：

```
select avg(Number_of_CDs_Released) from
(SELECT labelname AS Record_Labels, COUNT(title) AS Number_of_CDs_Released FROM CD
JOIN RecordLabel ON labelname = released_by
GROUP BY labelname) nested; 
```

# c# - 如何根据用户输入的值创建多个 div

> ID：13555845
> 
> 赞同：0
> 
> 时间：2012-11-25T21:47:42.267
> 
> 标签：c#, javascript, asp.net, html

我正在做一个 asp.net 项目，所涉及的主要任务是在单击按钮时生成一个图像 div。就像从数据库中检索图像并将其显示在屏幕上（另一个 div 或表）一样。如何完成这项任务？我很高兴知道如何在按钮单击上放置图像，然后在下一个按钮上单击下一个图像应该出现在它旁边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:10:45.077

通过使用以下代码，您可以生成动态 div：

```
HtmlGenericControl div1 = new HtmlGenericControl("div"); 
```

现在您要显示来自数据库的图像，请使用如下处理程序。创建一个 ashx 文件，添加代码，然后动态获取图像控件并将图像处理程序的输出绑定到图像的 imageURl 属性。代码是：

```
<%@ WebHandler Language="C#" Class="DisplayImg" %>

using System;
using System.Web;
using System.Configuration;
using System.IO;
using System.Data;
using System.Data.SqlClient;

public class DisplayImg : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        string theID;
        if (context.Request.QueryString["id"] != null)
            theID = context.Request.QueryString["id"].ToString();
        else
            throw new ArgumentException("No parameter specified");

        context.Response.ContentType = "image/jpeg";
        Stream strm = DisplayImage(theID);
        byte[] buffer = new byte[2048];
        int byteSeq = strm.Read(buffer, 0, 2048);

        while (byteSeq > 0)
        {
            context.Response.OutputStream.Write(buffer, 0, byteSeq);
            byteSeq = strm.Read(buffer, 0, 2048);
        }
    }

    public Stream DisplayImage(string theID)
    {
        SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["SERVER"].ConnectionString.ToString());
        string sql = "SELECT Server_image_icon FROM tbl_ServerMaster WHERE server_Code = @ID";
        SqlCommand cmd = new SqlCommand(sql, connection);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@ID", theID);
        connection.Open();
        object theImg = cmd.ExecuteScalar();
        try
        {
            return new MemoryStream((byte[])theImg);
        }
        catch
        {
            return null;
        }
        finally
        {
            connection.Close();
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

只需在 CS 代码中添加一行

```
UploadImg.ImageUrl = "~/DisplayImg.ashx?id=" + code; 
```

最后在 div 中添加图片

```
div1.Controls.Add(YOUR IMAGE's ID); 
```

# api - 新的 YouTube 播放列表 ID 无法使用 Google API 播放

> ID：13555849
> 
> 赞同：2
> 
> 时间：2012-11-25T21:48:15.527
> 
> 标签：api, youtube, playlist

我正在使用旧的 Google Youtube player API version 1 来显示视频的播放列表。这适用于最近创建的播放列表。但是新的播放列表有 32 个字符并且不显示。

有一个带有演示页面的新 API。填写新的播放列表 ID 也不适用于演示。任何 ID 作为如何让新的播放列表工作？

对于演示：[https](https://developers.google.com/youtube/youtube_player_demo) ://developers.google.com/youtube/youtube_player_demo 在加载播放列表上设置内容并尝试这个：PLEQVEDqp75YwI2YH4ckRjyhC-bxjkCaoY

请参阅工作播放列表：[http ://www.youtube.com/playlist?list=PLEQVEDqp75YwI2YH4ckRjyhC-bxjkCaoY&feature=g-list](http://www.youtube.com/playlist?list=PLEQVEDqp75YwI2YH4ckRjyhC-bxjkCaoY&feature=g-list)

更新

好像是人品问题。此示例有效：PLEQVEDqp75YzkYdEN8KUaN1AECJb5LQwJ

与'-'字符有关吗？我尝试使用 Urlencode() 没有运气。

# php - php行数据到另一个没有表单的php页面

> ID：13555850
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:48:15.900
> 
> 标签：php

我想将来自 sql 的 row['id'] 发送到我的其他 php 页面。如果不使用表单，我怎么能做到这一点？我试过 ：

```
<a href="page2.php?($row['id'])=$id" class="style1">Hello</a> 
```

在 page2 我有；

```
$id = $_GET['id']; 
```

但是，它给出了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:49:58.503

应该是这样的，假设你有嵌入 PHP 的 HTML：

```
<a href="page2.php?id=<?php echo urlencode($row['id']) ?>" class="style1">Hello</a> 
```

或者，假设您使用 PHP 创建 HTML 标记：

```
printf('<a href="page2.php?id=%s" class="style1">Hello</a>',
                   urlencode($row['id'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:58:45.760

```
<a href="page2.php?id=<?=$row['id']?>" class="style1">Hello</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T22:05:34.323

谢谢大家我就这样解决了

```
<a href="page2.php?id='. urlencode($row['id']) .'" class="style1">Hello</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T21:49:27.540

`<a href="page2.php?id=<?php echo $row['id']; ?>" class="style1">Hello</a>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T21:59:49.280

```
<a href="page2.php?id=<?php echo urlencode($row['id']) ?>" class="style1">Hello</a> 
```

稍后在页面中你想获取 id，你只需使用 $id = $_GET['id'];，或者你可以把它放在 session 中，这样你就不需要把它放在 url 中。

# c - C代码优化

> ID：13555856
> 
> 赞同：21
> 
> 时间：2012-11-25T21:48:44.767
> 
> 标签：c, performance, optimization, compiler-optimization, bit-shift

对于名为“高性能计算”的课程的作业，我需要优化以下代码片段：

```
int foobar(int a, int b, int N)
{
    int i, j, k, x, y;
    x = 0;
    y = 0;
    k = 256;
    for (i = 0; i <= N; i++) {
        for (j = i + 1; j <= N; j++) {
            x = x + 4*(2*i+j)*(i+2*k);
            if (i > j){
               y = y + 8*(i-j);
            }else{
               y = y + 8*(j-i);
            }
        }
    }
    return x;
} 
```

使用一些建议，我设法优化了代码（或者至少我是这么认为的），例如：

1.  不断传播
2.  代数简化
3.  复制传播
4.  公共子表达式消除
5.  死代码消除
6.  循环不变量去除
7.  按位移位而不是乘法，因为它们更便宜。

这是我的代码：

```
int foobar(int a, int b, int N) {

    int i, j, x, y, t;
    x = 0;
    y = 0;
    for (i = 0; i <= N; i++) {
        t = i + 512;
        for (j = i + 1; j <= N; j++) {
            x = x + ((i<<3) + (j<<2))*t;
        }
    }
    return x;
} 
```

根据我的导师的说法，一个经过良好优化的代码指令在汇编语言级别应该有更少或更少成本的指令。因此必须运行，指令比原始代码更短的时间，即计算是用：

> 执行时间 = 指令数 * 每条指令的周期数

当我使用命令生成汇编代码时：`gcc -o code_opt.s -S foobar.c`，

尽管进行了一些优化，但生成的代码比原始代码行数多，运行时间更低，但没有原始代码那么多。我究竟做错了什么？

不要粘贴汇编代码，因为两者都非常广泛。所以我在 main 中调用函数“foobar”，我正在使用 linux 中的 time 命令测量执行时间

```
int main () {
    int a,b,N;

    scanf ("%d %d %d",&a,&b,&N);
    printf ("%d\n",foobar (a,b,N));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-25T22:46:37.757

最初：

```
for (i = 0; i <= N; i++) {
    for (j = i + 1; j <= N; j++) {
        x = x + 4*(2*i+j)*(i+2*k);
        if (i > j){
           y = y + 8*(i-j);
        }else{
           y = y + 8*(j-i);
        }
    }
} 
```

删除`y`计算：

```
for (i = 0; i <= N; i++) {
    for (j = i + 1; j <= N; j++) {
        x = x + 4*(2*i+j)*(i+2*k);
    }
} 
```

拆分`i`, `j`, `k`:

```
for (i = 0; i <= N; i++) {
    for (j = i + 1; j <= N; j++) {
        x = x + 8*i*i + 16*i*k ;                // multiple of  1  (no j)
        x = x + (4*i + 8*k)*j ;                 // multiple of  j
    }
} 
```

将它们移到外部（并删除运行`N-i`时间的循环）：

```
for (i = 0; i <= N; i++) {
    x = x + (8*i*i + 16*i*k) * (N-i) ;
    x = x + (4*i + 8*k) * ((N*N+N)/2 - (i*i+i)/2) ;
} 
```

重写：

```
for (i = 0; i <= N; i++) {
    x = x +         ( 8*k*(N*N+N)/2 ) ;
    x = x +   i   * ( 16*k*N + 4*(N*N+N)/2 + 8*k*(-1/2) ) ;
    x = x +  i*i  * ( 8*N + 16*k*(-1) + 4*(-1/2) + 8*k*(-1/2) );
    x = x + i*i*i * ( 8*(-1) + 4*(-1/2) ) ;
} 
```

重写 - 重新计算：

```
for (i = 0; i <= N; i++) {
    x = x + 4*k*(N*N+N) ;                            // multiple of 1
    x = x +   i   * ( 16*k*N + 2*(N*N+N) - 4*k ) ;   // multiple of i
    x = x +  i*i  * ( 8*N - 20*k - 2 ) ;             // multiple of i^2
    x = x + i*i*i * ( -10 ) ;                        // multiple of i^3
} 
```

另一个转移到外部（并删除 i 循环）：

```
x = x + ( 4*k*(N*N+N) )              * (N+1) ;
x = x + ( 16*k*N + 2*(N*N+N) - 4*k ) * ((N*(N+1))/2) ;
x = x + ( 8*N - 20*k - 2 )           * ((N*(N+1)*(2*N+1))/6);
x = x + (-10)                        * ((N*N*(N+1)*(N+1))/4) ; 
```

上述两个循环删除都使用**[求和](http://en.wikipedia.org/wiki/Summation)**公式：

> Sum(1, i = 0..n) = n+1
> Sum(i ¹ , i = 0..n) = n(n + 1)/2
> Sum(i ² , i = 0..n) = n (n + 1)(2n + 1)/6
> Sum(i ³ , i = 0..n) = n ² (n + 1) ² /4

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-25T22:15:53.953

`y`不影响代码的最终结果 - 删除：

```
int foobar(int a, int b, int N)
{
    int i, j, k, x, y;
    x = 0;
    //y = 0;
    k = 256;
    for (i = 0; i <= N; i++) {
        for (j = i + 1; j <= N; j++) {
            x = x + 4*(2*i+j)*(i+2*k);
            //if (i > j){
            //   y = y + 8*(i-j);
            //}else{
            //   y = y + 8*(j-i);
            //}
        }
    }
    return x;
} 
```

`k`只是一个常数：

```
int foobar(int a, int b, int N)
{
    int i, j, x;
    x = 0;
    for (i = 0; i <= N; i++) {
        for (j = i + 1; j <= N; j++) {
            x = x + 4*(2*i+j)*(i+2*256);
        }
    }
    return x;
} 
```

内部表达式可以转换为：`x += 8*i*i + 4096*i + 4*i*j + 2048*j`. 使用数学将它们全部推到外循环：`x += 8*i*i*(N-i) + 4096*i*(N-i) + 2*i*(N-i)*(N+i+1) + 1024*(N-i)*(N+i+1)`.

您可以扩展上面的表达式，并应用[平方和和立方和公式](http://library.thinkquest.org/20991/gather/formula/data/209.html)来获得一个封闭形式的表达式，它应该比双重嵌套循环运行得更快。我把它作为练习留给你。这样一来，`i`也`j`将被删除。

`a`如果可能，也`b`应该将其删除 - 因为`a`和`b`作为参数提供，但从未在您的代码中使用。

平方和和立方和公式：

*   Sum(x ² , x = 1..n) = n(n + 1)(2n + 1)/6
*   总和(x ³ , x = 1..n) = n ² (n + 1) ² /4

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-25T22:50:16.357

此函数等价于以下公式，其中仅包含**4 次整数乘法**和**1 次整数除法**：

```
x = N * (N + 1) * (N * (7 * N + 8187) - 2050) / 6; 
```

为此，我只需将嵌套循环计算的总和输入[Wolfram Alpha](http://www.wolframalpha.com)：

```
sum (sum (8*i*i+4096*i+4*i*j+2048*j), j=i+1..N), i=0..N 
```

[这](http://www.wolframalpha.com/input/?i=sum%20%28sum%20%288%2ai%2ai%2b4096%2ai%2b4%2ai%2aj%2b2048%2aj%29,%20j=i%2b1..N%29,%20i=0..N)是解决方案的直接链接。编码前三思。有时你的大脑可以比任何编译器更好地优化代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-25T22:05:14.417

简要浏览第一个例程，您注意到的第一件事是涉及“y”的表达式完全未使用并且可以删除（就像您所做的那样）。这进一步允许消除 if/else（就像您所做的那样）。

剩下的是两个`for`循环和凌乱的表达。`j`下一步是分解出该表达式中不依赖的部分。您删除了一个这样的表达式，但`(i<<3)`(ie, i * 8) 仍保留在内循环中，并且可以删除。

Pascal 的回答提醒我，您可以使用循环步幅优化。首先移出`(i<<3) * t`内部循环（调用它`i1`），然后在初始化循环时计算一个`j1`等于的值`(i<<2) * t`。在每次迭代中递增`j1`（`4 * t`这是一个预先计算的常数）。用 替换你的内心表达`x = x + i1 + j1;`。

有人怀疑可能有某种方法可以将两个循环组合成一个循环，但我并没有立即看到它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-25T22:03:57.520

其他一些我可以看到的东西。你不需要`y`，所以你可以删除它的声明和初始化。

此外，传入的值`a`和`b`并没有实际使用，因此您可以将它们用作局部变量而不是`x`and `t`。

此外，`i`您可以注意不是每次都添加到 512 ，而是`t`从 512 开始，每次迭代递增 1。

```
int foobar(int a, int b, int N) {
    int i, j;
    a = 0;
    b = 512;
    for (i = 0; i <= N; i++, b++) {
        for (j = i + 1; j <= N; j++) {
            a = a + ((i<<3) + (j<<2))*b;
        }
    }
    return a;
} 
```

一旦达到这一点，您还可以观察到，除了初始化`j`,`i`并且`j`仅在单个多个中使用 each - `i<<3`and `j<<2`。我们可以直接在循环逻辑中对此进行编码，因此：

```
int foobar(int a, int b, int N) {
    int i, j, iLimit, jLimit;
    a = 0;
    b = 512;
    iLimit = N << 3;
    jLimit = N << 2;
    for (i = 0; i <= iLimit; i+=8) {
        for (j = i >> 1 + 4; j <= jLimit; j+=4) {
            a = a + (i + j)*b;
        }
        b++;
    }
    return a;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-26T00:43:01.843

好的......所以这是我的解决方案，以及解释我做了什么以及如何做的内联评论。

```
int foobar(int N)
{ // We eliminate unused arguments 
    int x = 0, i = 0, i2 = 0, j, k, z;

    // We only iterate up to N on the outer loop, since the
    // last iteration doesn't do anything useful. Also we keep
    // track of '2*i' (which is used throughout the code) by a 
    // second variable 'i2' which we increment by two in every
    // iteration, essentially converting multiplication into addition.
    while(i < N) 
    {           
        // We hoist the calculation '4 * (i+2*k)' out of the loop
        // since k is a literal constant and 'i' is a constant during
        // the inner loop. We could convert the multiplication by 2
        // into a left shift, but hey, let's not go *crazy*! 
        //
        //  (4 * (i+2*k))         <=>
        //  (4 * i) + (4 * 2 * k) <=>
        //  (2 * i2) + (8 * k)    <=>
        //  (2 * i2) + (8 * 512)  <=>
        //  (2 * i2) + 2048

        k = (2 * i2) + 2048;

        // We have now converted the expression:
        //      x = x + 4*(2*i+j)*(i+2*k);
        //
        // into the expression:
        //      x = x + (i2 + j) * k;
        //
        // Counterintuively we now *expand* the formula into:
        //      x = x + (i2 * k) + (j * k);
        //
        // Now observe that (i2 * k) is a constant inside the inner
        // loop which we can calculate only once here. Also observe
        // that is simply added into x a total (N - i) times, so 
        // we take advantange of the abelian nature of addition
        // to hoist it completely out of the loop

        x = x + (i2 * k) * (N - i);

        // Observe that inside this loop we calculate (j * k) repeatedly, 
        // and that j is just an increasing counter. So now instead of
        // doing numerous multiplications, let's break the operation into
        // two parts: a multiplication, which we hoist out of the inner 
        // loop and additions which we continue performing in the inner 
        // loop.

        z = i * k;

        for (j = i + 1; j <= N; j++) 
        {
            z = z + k;          
            x = x + z;      
        }

        i++;
        i2 += 2;
    }   

    return x;
} 
```

没有任何解释的代码归结为：

```
int foobar(int N)
{
    int x = 0, i = 0, i2 = 0, j, k, z;

    while(i < N) 
    {                   
        k = (2 * i2) + 2048;

        x = x + (i2 * k) * (N - i);

        z = i * k;

        for (j = i + 1; j <= N; j++) 
        {
            z = z + k;          
            x = x + z;      
        }

        i++;
        i2 += 2;
    }   

    return x;
} 
```

我希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T07:06:54.957

int foobar(int N) //避免未使用的传递参数

{

```
int i, j, x=0;   //Remove unuseful variable, operation so save stack and Machine cycle

for (i = N; i--; )               //Don't check unnecessary comparison condition 

   for (j = N+1; --j>i; )

     x += (((i<<1)+j)*(i+512)<<2);  //Save Machine cycle ,Use shift instead of Multiply

return x; 
```

}

# java - 如何在 Rhino 中动态使用 CVS 文件中的数据结构 – 类

> ID：13555857
> 
> 赞同：0
> 
> 时间：2012-11-25T21:48:46.473
> 
> 标签：java, javascript, rhino, beanshell

我想完成以下任务。我不确定是否可以按照我计划的方式这样做，但因此我的问题是：

我想编写一个 Java 程序来允许用户加载 XML 或 CSV 文件，并在某种脚本环境（如 Rhino 或 Beanshell）中操作和使用它们的内容。脚本应如下所示：

```
var myData = new dataLoader(“some_file.csv”);
myData.load(); // should load the content
(while myData.next()) {
  If( myData.status == “pending”) {
    myData.value = myData.value + 1;
    myData.status = “updated”; //set new status
    myData.update(); //update dataset
  }
} 
```

Some_file.csv：

“价值”; “地位”;

“1”；“待办的”;

“21”；“待办的”;

“341”；“待办的”;

这可能吗（根据文件的内容动态提供方法/函数/变量）？如果是这样，知道我的类“dataLoader”应该是什么样子吗？我也很感激从哪里开始寻找一条建议。谢谢你的帮助，斯蒂芬妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:44:29.193

您可能想要创建一个类，该类将读取文件的所有行，使用`BufferedReader`方法`readLine`或通过 Guava使用一段时间，该类[具有执行](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html)此操作的功能。对于 XML，您需要一个 DOM 解析器，它将加载树中的所有文件。

然后，将数据存储在 a`LinkedList`或数组中，并使用整数变量作为索引。调用该方法时`next()`，它将增加索引，如果它等于数组的大小，则返回 false，否则返回 true。它还将值和状态设置为新值。

`Update()`当然会用字段值更新索引位置的值。

问题是何时将结构写入磁盘。您可以在最后一次调用 next() 时执行此操作，如果您确定它将被迭代调用直到结束，或者创建一个类似的方法`flush()`，它将数组写入文件。另一种方法是编写`update()`方法，这似乎最适合您的情况。

只是为了好奇，你在做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:48:18.913

这将是一个非常有趣的项目，我很确定它可以完成。

我在 BeanShell 中使用轻量级脚本对象来保存数据，如下所示：

```
 myData(value, status) {
     return this;
    };

   listofitems = new java.util.List();
   for(entry : data) {
     listofitems.add(myData(entry.value, entry.status);
   } 
```

考虑到这一点并假设您解析了 csv 文件的行并获得了标题，您可以动态构建脚本化对象：

```
hdr1 = "value";
hdr2 = "status";
scriptedObjectStr = "myData(" + hdr1 + "," + hdr2 + ") { return this; }";

eval(scriptedObjectStr);

y = myData("Test", "Pending");
print(y.value); // Test
print(y.status); // Pending 
```

希望你能做一些事情来完成你想做的事情。

# javascript - WebGL 场景的三角形/顶点的安全数量是多少？

> ID：13555858
> 
> 赞同：0
> 
> 时间：2012-11-25T21:48:53.093
> 
> 标签：javascript, html, memory-management, webgl

对于 WebGL 应用程序在最近的台式机/笔记本电脑（例如，2009 年或之后购买）上工作的安全三角形/顶点数，可以认为是多少？我担心的是内存，而不是性能。我可以发送到 WebGL 的顶点越多，场景就会越好看。对于某些场景，如果我可以发送 30k 个三角形（大约 60k 个顶点，适当使用三角形条带），那就太好了。

快速计算一下，60k 顶点意味着 60k x vec4，其中每个 vec4 为 4 x 8 字节（8 因为我正在考虑为每个组件加倍）。这样就提供了大约 1.9mb 的顶点内存。这对于最新的 WebGL 环境是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:48:59.507

你应该是安全的，没问题。我从 2009 年开始使用 MacBook，根本没有遇到任何内存问题（但有很多性能问题）。而且我的场景使用的内存要多得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:39:09.880

应该没问题，但我更关心 webgl 沙盒限制。例如，Flash 具有有限数量的缓冲区及其大小、着色器指令数量、只有 4（或 5）个渲染上下文等，并且很可能是内存。WebGL 的限制要小得多，但实现是 1\. 依赖于浏览器 2\. 依赖于机器（Google Chrome 可以在 DirectX“[角度项目](http://code.google.com/p/angleproject/)”上运行 WebGL）如果浏览器没有 DirectX 后备并且机器没有正确的 OpenGL 驱动程序，WebGL 将无法工作。纹理的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的不同实现也存在问题。所以你不能只希望你的应用可以在任何机器上运行。你无法避免基准测试。

# php - Qcodo元素的开关位置

> ID：13555860
> 
> 赞同：1
> 
> 时间：2012-11-25T21:49:10.493
> 
> 标签：php, javascript, css, qcodo

我有一个复选框，单击时会显示一个下拉列表。我只是希望他们改变立场。

问题是当我使用 php 更改位置时，它会引发 ajax 错误。由于每个都在动态 div id 中调用，因此我不能真正使用 CSS 来更改它。

我已经研究过在 css 中使用 nth-child 创建一个上边距，但也没有运气。

现在，复选框切换下拉列表的可见性，但复选框位于下拉列表显示的下方。我想另一种方法是以某种方式使用 javascript ......我错过了什么吗？为什么不能换单

```
 $ret['reclength'] = new QListBox($objParent);
    $ret['length']->Name = _sp('Item Name');

    $ret['length']->AddItem("weekly", "7");
    $ret['length']->AddItem("bi-weekly","14" );
    $ret['length']->AddItem("Monthly","30" );
    $ret['length']->Display=false;      

    $ret['checkbox'] = new QCheckbox($objParent);
    $ret['checkbox']->Name = _sp('checkbox name');
    $ret['checkbox']->AddAction(new QClickEvent(), new QToggleDisplayAction($ret['length']));

    return $ret; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:08:04.127

我不确定您的模板文件是什么样子，可能存在乱序问题，因为在那里正确排序它们会改变它的显示顺序。但即使没有这些，您也可以对它们进行订购。只需使用[z-index](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)并向 QListbox 添加一个 Css 类：

```
$ret['length']->CssClass = "mydropdown"; 
```

这对CSS：

```
.mydropdown {
    z-index: 9999;
} 
```

但也有一个带有[z-index的 IE6/7 错误](https://stackoverflow.com/questions/2451349/ie-dropdown-z-index-bug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:47:05.167

The rendering order will depend on your controls parent, in your case $objParent. If $objParent is a QForm then you will just need to switch their order in the QForms template. However with the behavior you are witnessing I am assuming that $objParent is a QPanel. If that is the case you will need to add a template to the QPanel and render your controls in that template in the order you desire. You could try AutoRenderChildren = true, but that will render the controls in the order in which they are delegated as children of the QPanel.

To use CSS to position you may want to add an id to the control. That way you can reference it in your CSS and avoid any ambiguity in your selector. You just need to add a second parameter to the constructor like

```
$ret['reclength'] = new QListBox($objParent, "myControlId"); 
```

Just make sure that the myControlId is unique for the page. then you can access in css using #myControlId.

Another option which may work is to set the parent to $this when you instantiate the QListBox control and then after instantiating the QCheckbox set the parent of the QListBox to $objParent. Haven't tested this but it should work. You cann see an example of QForms in action on the [QCubed Examples site](http://examples.qcu.be/assets/_core/php/examples/multiple_qform/intro.php). The code would look something like this. Note this is untested but should work.

```
$ret['reclength'] = new QListBox($this);
$ret['length']->Name = _sp('Item Name');

$ret['length']->AddItem("weekly", "7");
$ret['length']->AddItem("bi-weekly","14" );
$ret['length']->AddItem("Monthly","30" );
$ret['length']->Display=false;      

$ret['checkbox'] = new QCheckbox($objParent);
$ret['checkbox']->Name = _sp('checkbox name');
$ret['checkbox']->AddAction(new QClickEvent(), new QToggleDisplayAction($ret['length']));

$ret['reclength']->SetParentControl($objParent);

return $ret; 
```

# delphi - 带有 HEX 的字符串到 int8 的数组 []？

> ID：13555864
> 
> 赞同：2
> 
> 时间：2012-11-25T21:49:31.857
> 
> 标签：delphi, delphi-xe3

如何将字符串十六进制转换为 int 8 数组？

```
var hash : string;
    x: array[0..19] of int8;

begin
   hash := '713BD6D36D4964F4E4F843CB03D118EA5C372FF6';
   put_hash_into_x(hash);
end; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T22:03:58.920

使用[HexToBin](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.HexToBin)：

```
HexToBin(PChar(hash), x, SizeOf(x)); 
```

现在，文档说：

> 十六进制数必须使用小写字符；**HexToBin**不识别大写字符。

但事实证明，这个陈述是不正确的，`HexToBin`无论你给出什么大小写文本都有效。

# android - Android操作栏项自定义背景

> ID：13555870
> 
> 赞同：0
> 
> 时间：2012-11-25T21:50:15.590
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock 并尝试在操作栏项目上设置自定义背景。

我试过了：

```
 <item name="actionButtonStyle">@style/customActionButtonStyle</item>
    <item name="android:actionButtonStyle">@style/customActionButtonStyle</item>
</style>

<style name="customActionButtonStyle" parent="Widget.Sherlock.Light.ActionButton">
    <item name="android:background">@drawable/background_black_translucent</item>
</style> 
```

和

```
<item name="android:selectableItemBackground">@drawable/background_black_translucent</item>
<item name="selectableItemBackground">@drawable/background_black_translucent</item>

<item name="android:actionBarItemBackground">@drawable/background_black_translucent</item>
<item name="actionBarItemBackground">@drawable/background_black_translucent</item> 
```

但我无法让它工作。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:52:49.670

我实际上是通过设置可选项目背景属性让它工作的：

```
<style name="MyTheme" parent="@android:style/Theme.Sherlock.Light">
    <item name="android:selectableItemBackground">@drawable/background_action_item</item>
    <item name="selectableItemBackground">@drawable/background_action_item</item>
</style> 
```

谢谢

# mysql - MySQL中的“无法获取您地址的主机名”

> ID：13555871
> 
> 赞同：0
> 
> 时间：2012-11-25T21:50:19.103
> 
> 标签：mysql

我已经使用 MySQL 几个月了，是什么突然改变并导致了这个错误？我找到[了这个链接](https://stackoverflow.com/questions/5118151/mysql-error-cant-get-hostname-from-your-ip-address-whats-the-problem)

既然是同一个问题，我在哪里可以找到 my.ini / my.cnf？
我只需要`[mysqld]`在 my.ini /my.cnf 中我的属性附近添加 skip-name-resolve？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:55:35.390

[http://dev.mysql.com/doc/refman/4.1/en/mysql-config-wizard-file-location.html](http://dev.mysql.com/doc/refman/4.1/en/mysql-config-wizard-file-location.html)

my.ini 文件的位置 在 MySQL 4.1.5 之前的安装中，习惯上将服务器配置文件命名为 my.cnf 或 my.ini，并将文件定位在 c:\my.cnf 或 c:\Windows \我的.ini。

新的 MySQL 配置向导将 my.ini 文件放置在 MySQL 服务器的安装目录中。这有助于将配置文件与特定的服务器实例相关联。

为确保 MySQL 服务器知道在哪里查找 my.ini 文件，将与此类似的参数作为服务安装的一部分传递给 MySQL 服务器：

--defaults-file="C:\Program Files\MySQL\MySQL Server 4.1\my.ini" 这里的 C:\Program Files\MySQL\MySQL Server 4.1 替换为 MySQL Server 的安装路径。--defaults-file 选项指示 MySQL 服务器在启动时读取指定文件以获取配置选项。

其他：

[http://www.electrictoolbox.com/mysql-my-cnf/](http://www.electrictoolbox.com/mysql-my-cnf/)

CentOS 5 / RHEL 5 对于 Red Hat Enterprise Linux 5、CentOS 5 和其他衍生的 Linux 发行版：

```
/etc/my.cnf 
```

Debian 5 Lenny 对于 Debian 5 Lenny 和其他衍生的 Linux 发行版，包括 Ubuntu：

```
/etc/mysql/my.cnf 
```

OSX 10.6 常规 MAMP 上的 MAMP 1.9 默认情况下没有一个（尽管 MAMP Pro 显然有），但您可以自己创建一个，或从 /Applications/MAMP/Library/share 复制 my-*.cnf 文件之一/mysql 为：

```
/Applications/MAMP/Library/my.cnf 
```

OSX 10.7 上的 MAMP 2.0 同上，位置为：

```
/Applications/MAMP/conf/my.cnf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T09:19:55.757

我遇到了同样的问题，我试图使用我的 windows 7 操作系统机器连接到 remnote mysql 服务器，但在我的情况下，禁用防火墙解决了我的问题，所以你可以尝试它并且不需要更改 my.cnf 或 my.ini

# php - 替换文本块中的特定值，留下我正在搜索的文本之间的文本

> ID：13555872
> 
> 赞同：5
> 
> 时间：2012-11-25T21:50:24.593
> 
> 标签：php

我想将此文本转换`{unsubscribe|here.}`为`<a href="">here.</a>`.

我已经编写了获取不同匹配组的正则表达式。

在这种情况下，我知道我可以 preg/str_replace`}`文本的前面和结尾（）但是这将是无效的，因为我还想删除另一个像这样的值`{name}`，例如。

这是我写的正则表达式。`/(\{unsubscribe\|)([a-z]*[^\}])(\})/`

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:01:23.963

```
$str = '{unsubscribe|{name} here.}';

function fix($m){
    return "<a href=''>".str_replace("{name}", "MY NAME", $m[1])."</a>";
}
print preg_replace_callback("/\{unsubscribe\|(.*)\}/", "fix", $str); 
```

输出：

```
<a href=''>MY NAME here.</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T23:50:53.613

这将去掉字符串的不同部分并在必要时进行替换。

我已经根据@waza123 的回答制定了这个解决方案。

```
$str = "Hi {name}, Some text {unsubscribe|here.} some more text.";

function fix($m){
    return $m[1] . str_replace($m[2], '<a href="">', $m[2]) . $m[3] . str_replace($m[4], '</a>', $m[4]) . $m[5];
}

$result = preg_replace_callback('/(.*)(\{unsubscribe\|)(.*[^\}])(\})(.*)/', 'fix', $str);

echo str_replace('{name}', 'Firstname Lastname', $result); 
```

输出：

```
Hi Firstname Lastname, Some text <a href="">here.</a> some more text. 
```

# maple - 我正在寻求有关 Maple 程序的帮助

> ID：13555873
> 
> 赞同：0
> 
> 时间：2012-11-25T21:50:26.750
> 
> 标签：maple

我正在尝试在 maple 中编写一个程序，将函数 f 近似为区间 [-1..1] 上的 n 次 Chebyshev 多项式，而不使用任何与 Chebyshev 多项式相关的内置 Maple 函数。 [http://en.wikipedia.org/wiki/Chebyshev_polynomials](http://en.wikipedia.org/wiki/Chebyshev_polynomials)

例如，一个过程 CPlot 以便 CPlot(f,[2,3,4]) 在 [-1, 1] 上生成函数 f 的图，并以不同的颜色显示其第 2、3 和第四切比雪夫近似。它应该适用于任意长度的任意列表作为第二个参数。这是我当前的代码：

```
ChebT := proc(n,x)
   local i,firstT,secondT,generalT;
   firstT := 1;
   if n=0 then return firstT end if;
   secondT := x;
   if n=1 then return secondT end if;
   for i from 1 to n-1 do
      generalT := 2*x*secondT - firstT;
      firstT := secondT;
      secondT := generalT;
   end do;
  return expand(secondT)
end proc:

CPlot:=proc(f,L::list)
local j, K,num_ip,num_prj,c,chb;
K:=f(x);
for j from 1 to nops( L)  while j<(nops(L)+1) do
         num_ip := (f,g) -> evalf(Int(f*g/sqrt(1-x^2),x=-1..1)*2/Pi);
         num_prj := (f,n) -> seq(num_ip(f,ChebT(i,x)),i=0..n);
         c := num_prj(f(x),L[j]);
         chb := c -> c[1]/2 + sum(c[i]*ChebT(i-1,x),i=2..nopc(c)); *
         K:=K, chb([c]);
end do;
  plot([K], x=-1..1, colour=[green, red, blue, yellow],linestyle=[1,2,3,4], thickness=[5,2,3,4]);
end proc: 
```

尝试时：

f:=x->x^2:

切比图（f，[2,5,10]）；

我得到“错误，（在 ChebT 中）for 循环中的最终值必须是数字或字符”*

如果我为切比雪夫多项式使用内置函数 T，通过调用 with(orthopoly,T) 而不是 ChebT，我之前测试过它并且它有效，图表上的所有图看起来都一样。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:23:15.250

你有一个错字，`nopc(c)`而不是`nops(c)`. 我冒昧地更改`sum`为`add`（因为第一个参数的值为unassigned`ChebT`被错误地调用）。为了提高效率，我将 proc defns 拉出循环，然后用更有效的方法替换迭代连接`i-1``i``K``seq`调用替换了迭代的串联。

```
restart:

ChebT := proc(n::nonnegint,x)
   local i,firstT,secondT,generalT;
   firstT := 1;
   if n=0 then return firstT end if;
   secondT := x;
   if n=1 then return secondT end if;
   for i from 1 to n-1 do
      generalT := 2*x*secondT - firstT;
      firstT := secondT;
      secondT := generalT;
   end do;
  return expand(secondT)
end proc:

CPlot:=proc(f,L::list)
local j,K,num_ip,num_prj,c,chb;
  num_ip:=(f,g)-> evalf(Int(f*g/sqrt(1-x^2),x=-1..1)*2/Pi);
  num_prj:=(f,n)-> seq(num_ip(f,ChebT(i,x)),i=0..n);
  chb:=c->c[1]/2 + add(c[i]*ChebT(i-1,x),i=2..nops(c));
  ### Even if you insist of forming K in a do-loop you should
  ### still pull the assignments to num_ip, num_prj, and chb
  ### outside the loop. There's no need to reassign those each
  ### time through the loop.
  #K:=f(x);
  #for j from 1 to nops(L)  do
  #  c:= num_prj(f(x),L[j]);
  #  K:=K, chb([c]);
  #end do;
  K:=f(x), seq(chb([num_prj(f(x),L[j])]), j=1..nops(L));
  plot([K], x=-1..1, colour=[green, red, blue, yellow],
       linestyle=[1,2,3,4], thickness=[5,2,3,4]);
end proc:

f:=x->x^2:
CPlot(f,[2,5,10]); 
```

# download - 从 Web 服务器下载

> ID：13555875
> 
> 赞同：-2
> 
> 时间：2012-11-25T21:50:36.233
> 
> 标签：download, webserver

我希望人们能够从我的网络服务器下载 .png 图像，但收效甚微。每当我尝试时，它只会在我的浏览器中显示图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:54:23.793

好吧，您需要将该 PNG 存储在您的网络服务器上。通过 ftp、ssh 或您的托管公司拥有的一些 Web 界面上传它。然后，在您的网站中放置一个指向此 PNG 的链接。

```
<a href="path/to/picture.png">Link Text</a> 
```

请注意，href 路径应该是图片的相对路径。这意味着如果网页与图片存储在同一文件夹中，您可以简单地将图片文件名放在href字符串中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:00:58.467

首先，这取决于您的页面运行在哪种服务器上，以及您如何提供静态文件。

这应该给你一般的线索：

```
<a href="folder/of/pics/picture.png">download here</a> 
```

赋予文件夹层次结构的正确性决定了您的照片是否可下载..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:55:33.673

您还需要将该图像存储在可公开访问的文件夹中。

因此，如果您的网站位于 /var/www/html/mysite/ 下，您需要将该 png 保存到 /var/www/html/mysite/（或您想要存储它的任何目录）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T22:07:52.830

我是个白痴！我做得对，只是 chrome 只是显示 png 文件。当我下载链接文本时。太好了！

# php - 如何处理提交给 PHP 脚本的多个选定的整体

> ID：13555879
> 
> 赞同：0
> 
> 时间：2012-11-25T21:50:55.623
> 
> 标签：php, html, multidimensional-array

假设表单的 html 代码片段很简单

```
<form action='test.php' method="post">
<select multiple="multiple" name="fruit">
<option value="apple">Apple</option>
<option value="orange">Orange</option>
<button type="submit"> Enter </button>
</select>
</form> 
```

我的问题是`$_POST['fruit']`执行 PHP 脚本时的格式是什么？它看起来不像一个数组。由于`$_POST['fruit'][0]`并且`$_POST['fruit'][1]`不适用于访问。我想知道如何访问提交的数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:57:44.150

`$_POST['fruit']`不是数组。它将包含`value`所选项目的，在`<option value="apple">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:52:45.743

用于`var_dump($_POST['fruit']);`查看您的数组结构以及如何访问它。

```
<form action='test.php' method="post">
<select name="fruit[]" multiple="multiple">
<option value="apple">Apple</option>
<option value="orange">Orange</option>
</select>
</form> 
```

有了这样的标记，你的水果应该`$_POST['fruit']`按预期在里面。

# java - Java：构造函数...指的是缺少的类型 SQLException

> ID：13555880
> 
> 赞同：1
> 
> 时间：2012-11-25T21:50:58.083
> 
> 标签：java, maven

我在运行我正在编写的 Jira 插件时遇到了一个奇怪的错误。

该插件编译并运行，我认为无法找到`SQLException`类型是没有意义的，这在插件中明确重要：

```
 import java.sql.SQLException; 
```

而且，据我所知，它是 Java 运行时的一部分，所以我不需要包含任何其他 jar。

```
[INFO] [talledLocalContainer] 2012-11-25 16:00:36,739 http-2990-1 ERROR      [atlassian.plugin.servlet.DefaultServletModuleManager] Unable to create servlet
[INFO] [talledLocalContainer] com.atlassian.util.concurrent.LazyReference$InitializationException: java.lang.Error: Unresolved compilation problem: 
[INFO] [talledLocalContainer]   The constructor TestRun(String) refers to the missing type SQLException
[INFO] [talledLocalContainer] 
[INFO] [talledLocalContainer]   at com.atlassian.util.concurrent.LazyReference.getInterruptibly(LazyReference.java:152)
[INFO] [talledLocalContainer]   at com.atlassian.util.concurrent.LazyReference.get(LazyReference.java:115)
[INFO] [talledLocalContainer]   at com.atlassian.plugin.servlet.DefaultServletModuleManager.getServlet(DefaultServletModuleManager.java:344) 
```

以下是关于 Jira 如何开始的信息，这对我来说似乎很好：

```
[INFO] [talledLocalContainer] ___ Java 类路径 _______________________
[信息] [talledLocalContainer]
[信息] [talledLocalContainer] sun.boot.class.path：/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/resources.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/rt.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/sunrsasign.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/jsse.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/jce.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/charsets.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/jfr.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/JObjC.jar：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/classes
[信息] [talledLocalContainer]
[信息] [talledLocalContainer] java.library.path：/Users/sorins/Library/Java/Extensions：
[信息] [talledLocalContainer] /库/Java/扩展：
[信息] [talledLocalContainer] /网络/库/Java/扩展：
[信息] [talledLocalContainer] /系统/库/Java/扩展：
[信息] [talledLocalContainer] /usr/lib/java:
[信息] [talledLocalContainer] 。
[信息] [talledLocalContainer]
[信息] [talledLocalContainer] java.endorsed.dirs：/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/endorsed
[信息] [talledLocalContainer]
[信息] [talledLocalContainer] java.ext.dirs：/Users/sorins/Library/Java/Extensions：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/ext：
[信息] [talledLocalContainer] /库/Java/扩展：
[信息] [talledLocalContainer] /网络/库/Java/扩展：
[信息] [talledLocalContainer] /系统/库/Java/扩展：
[信息] [talledLocalContainer] /usr/lib/java
[信息] [talledLocalContainer]
[信息] [talledLocalContainer] java.class.path：/Users/sorins/dev/jira/jira-libs.hg/plugins/testrun/target/container/tomcat6x/apache-tomcat-6.0.20/bin/bootstrap.jar ：
[信息] [talledLocalContainer] /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/lib/tools.jar
[信息] [talledLocalContainer]
```

# php - RecursiveIteratorIterator 返回额外的元素

> ID：13555884
> 
> 赞同：8
> 
> 时间：2012-11-25T21:51:26.757
> 
> 标签：php, iterator

`RecursiveIteratorIterator`如果在循环`rewind()`之前没有调用，则返回额外的结果`while`

例子

```
$array = array("A","B","C");
$iterator = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));
//$iterator->rewind() ; this would fix it 
while ( $iterator->valid() ) {
    print($iterator->current()) ;
    $iterator->next();
} 
```

输出

```
AABC  <--- Instead of ABC 
```

*   `A`为什么没有 额外的`C`？
*   数组从未启动或调用过为什么`$iterator->rewind()`需要 while 循环
*   `foreach`完美地工作，而不必调用迭代器`rewind`之间`foreach`和`while`使用迭代器时的区别

[代码在行动](http://3v4l.org/O6Z6u)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T22:00:46.147

我将按相反的顺序回答问题：

> `foreach`完美地工作，而不必调用`rewind`它们之间的区别`foreach`以及`while`使用迭代器时

`foreach`在内部调用`rewind()`，这就是为什么你不必自己做。这总是会完成的，因此即使您已经使用了迭代器，`foreach`循环也会从头开始。（您可以通过将其包装在 a 中来避免这种情况`NoRewindIterator`）。

> 数组从未启动或调用过为什么 while 循环需要 $iterator->rewind()

在这种情况下，SPL 迭代器被设计用于`foreach`和避免重复的方法调用。如果`RecursiveIteratorIterator`将在构造时调用该`RecursiveArrayIterator::rewind()`方法，那么它将在`foreach`循环开始时再次调用。这就是为什么通话没有结束的原因。

> 为什么额外的 A 而不是 C ？

要弄清楚这一点，很高兴看到`RecursiveArrayIterator`实际调用了哪些方法：

```
<?php

class DebugRAI extends RecursiveArrayIterator {
    public function rewind() { echo __METHOD__, "\n"; return parent::rewind(); }
    public function current() { echo __METHOD__, "\n"; return parent::current(); }
    public function key() { echo __METHOD__, "\n"; return parent::key(); }
    public function valid() { echo __METHOD__, "\n"; return parent::valid(); }
    public function next() { echo __METHOD__, "\n"; return parent::next(); }
}

$array = array("A", "B", "C");
$iterator = new RecursiveIteratorIterator(new DebugRAI($array));
while ($iterator->valid()) {
    echo $iterator->current(), "\n";
    $iterator->next();
} 
```

这会产生以下输出：

```
DebugRAI::valid
DebugRAI::current
A
DebugRAI::valid
DebugRAI::valid
A
DebugRAI::next
DebugRAI::valid
DebugRAI::valid
DebugRAI::current
B
DebugRAI::next
DebugRAI::valid
DebugRAI::valid
DebugRAI::current
C
DebugRAI::next
DebugRAI::valid
DebugRAI::valid 
```

输出看起来有点奇怪，特别是第二次迭代错过了`next()`调用，所以它只是停留在同一个元素上。

这样做的原因是`RecursiveIteratorIterator`实现中的一个特殊性：迭代器从状态开始，并且在该`RS_START`状态下的第一次`next`调用只检查`hasChildren()`，但实际上并不调用底层迭代器的`next()`方法。完成此操作后，它会切换到调用正确发生的`RS_NEXT`模式。`next()`这就是为什么前进的步伐被推迟了一步。

在我看来，这是一个错误，但[https://bugs.php.net/bug.php?id=44063](https://bugs.php.net/bug.php?id=44063)声称并非如此。

# python - Python 3.0：“超出范围”的循环列表索引

> ID：13555887
> 
> 赞同：2
> 
> 时间：2012-11-25T21:52:08.397
> 
> 标签：python, string, loops, indexing, range

好的，基本上，我需要一些帮助来完成这个非常简单的程序：

```
from graphics import *

def main():
win = GraphWin("Text Window", 400, 600)
options = ["Hello", "How", "Are", "You"]
x = 200
y = 20
for i in range(4):
    message = Text(Point(x,y), options[i])
    message.draw(win)
    y = y + 30

main() 
```

不要担心“图形”模块。它是 John Zelle 的 Python 书籍的一部分。重点是我需要将我的范围循环为 5 而不是 4，但是，因为“选项”在 [i] 中，所以上面的这个特定程序将拉动：

```
 0: Hello
    1: How
    2: Are
    3: You
    4: ??? 
```

但是，如果我将 4 更改为 5，它会在列表中查找第 4 项但它不存在，因此它会吐出“IndexError：列表索引超出范围”

我想要实现的是，当程序到达列表末尾时，循环回到列表中的第一个 (0) 项。

例如，

```
 for i in range(8): 
```

会拔出：

```
 0: Hello
    1: How
    2: Are
    3: You
    4: Hello
    5: How
    6: Are
    7: You 
```

我浏览了这个网站，发现了一些没有成功的工具，这包括我认为没有帮助的“枚举”功能。

如果有人可以阐明如何做到这一点，那将是非常受欢迎的！如果可能的话，希望我也可以在没有嵌套循环的情况下做到这一点。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:59:41.480

您可以通过以下两种方式之一实现此目的：

# 1.[`itertools.cycle`](http://docs.python.org/3/library/itertools.html#itertools.cycle)

```
c = itertools.cycle(options)
for i in range(anyNumber):
    message = Text(Point(x,y), next(c))
    message.draw(win)
    y = y + 30 
```

# 2\. 模数

```
for i in range(anyNumber):
    message = Text(Point(x,y), options[i%len(options)])
    message.draw(win)
    y = y + 30 
```

**编辑**：

从评论中的对话：

如果您想将列表的内容打印 4 次，这里有几种方法可以完成此操作：

```
options = ["Hello", "How", "Are", "You"]
for i in range(4):
    for e,elem in enumerate(options):
        print("%d: %s" %(4*i+e, elem)) 
```

或者

```
options = ["Hello", "How", "Are", "You"]
for e,elem in enumerate(itertools.chain.from_iterable(itertools.repeat(options,4))):
    print("%d: %s" %(e, elem)) 
```

或者

```
options = ["Hello", "How", "Are", "You"]
for i in range(4):
    for j in range(len(options)):
        print("%d: %s" %(4*i+j, options[j])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:59:29.993

像这样的东西？

```
from itertools import cycle, islice

options = ["Hello", "How", "Are", "You"]

for idx, option in enumerate(islice(cycle(options), 8)):
    print idx, option 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:00:04.253

您可以使用模 (%) 运算符：

```
options = ["Hello", "How", "Are", "You"]
for i in range(8):
    print(options[i % len(options)]) 
```

产量

```
Hello
How
Are
You
Hello
How
Are
You 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T21:53:27.910

首先循环值，而不是索引。Python 旨在避免使用索引进行循环，这样做很尴尬、低效且丑陋：

```
for option in options:
    do_something(option) 
```

远远好于：

```
for option_index in range(len(options)):
    do_something(options[option_index]) 
```

要获得循环行为，请查看[itertools.cycle()](http://docs.python.org/3/library/itertools.html#itertools.repeat)：

```
for option, _ in zip(itertools.cycle(options), range(x)):
    ... 
```

`x`您想要的项目数量在哪里。在这里，我们使用`range()`and`zip()`在达到项目数后停止重复（将值从范围外扔掉）。

# mercurial - Mercurial 分支混乱

> ID：13555888
> 
> 赞同：2
> 
> 时间：2012-11-25T21:52:20.510
> 
> 标签：mercurial, bitbucket

这是我的存储库的状态。工作分支是稳定的。

![在此处输入图像描述](../Images/2cc904e7301d94c67cbe5de1b40e304e.png)

我已将此存储库推送到 bitbucket。但是当我从那个 bitbucket 存储库克隆时，稳定的分支没有被选为工作分支。我必须将其更新为稳定。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:24:04.033

`default`当您克隆没有参数的存储库时，Mercurial 将始终更新到分支中的最新更改。如果您没有`default`分支，那么克隆时基本上会得到一个随机分支。这[在此处](http://mercurial.selenic.com/wiki/StandardBranching#What_not_to_do)记录。

您可以通过将`-u branchname`命令选项添加到克隆命令来更改此行为。

当您说“工作分支”时，您是什么意思？你的意思是主要的开发工作都在这里完成了吗？ `stable`通常不用作主要开发分支，因为该名称表明该分支中的代码是稳定的，而在开发过程中通常不是这种情况。通常，您只会在`stable`分支上进行错误修复。

在我看来，您的问题有三种解决方案：

1.  创建新克隆时继续更新到正确的分支
2.  使用在克隆`-u stable`时更新到正确分支的选项进行克隆
3.  更改存储库的布局，以便`default`分支包含您希望人们在克隆后最常使用的代码

我在上面链接到的 Mercurial wiki 上的建议建议您使用选项 3，但这显然是更多的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T22:02:58.580

确保在“存储库详细信息”设置页面中将“稳定”分支设置为主分支。此处设置的任何内容都是您在克隆存储库的新副本时默认使用的分支。

**编辑：**正如史蒂夫在下面指出的那样，这只设置了 Bitbucket UI 的默认分支，而不是 HG 客户端本身。

![存储库详细信息](../Images/476068c03d5ece940674d771e2993654.png)

# php - 在 php 中显示 group_concat 结果

> ID：13555889
> 
> 赞同：0
> 
> 时间：2012-11-25T21:52:23.727
> 
> 标签：php, mysql

我在我的查询中使用了一个组 concat，它返回一个结果行（这就是我使用组 concat）。但是如何显示组 concat 的结果，有没有办法使用数组指针？组 concat 值中总是有 9 个结果....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:58:26.237

您可以使用 php [explode 函数](http://php.net/manual/en/function.explode.php)将连接的值放入数组

```
$value = $row['concat_col'];
$values = explode(",", $value); //assuming you group_concat used commas e.g. John,James,Jim

//$values is an array of strings concatenated by group_concat
echo $values[0]; //John
echo $values[1]; //Jim 
```

# sql - SQL Server 2008 根据邮政编码显示城市名称

> ID：13555890
> 
> 赞同：2
> 
> 时间：2012-11-25T21:52:35.357
> 
> 标签：sql, sql-server-2008

我正在尝试显示与`William`. 此查询获取他的邮政编码并使用他的邮政编码查找任何客户。我需要根据邮政编码找到城市 NAME 中的客户。每个城市名称有几个邮政编码。

**表城市**：

```
zipCode (PK) cityName, stateCode 
```

**表客户**：

```
customerId (PK) customerName, customerAddress, zipCode (FK) 
```

到目前为止我的查询...

```
SELECT 
    cu2.customerName AS 'Customer Name', 
    ci2.cityName AS 'City Name'
FROM 
    customer as cu
INNER JOIN 
    city as ci ON cu.zipCode = ci.zipCode
INNER JOIN 
    city as ci2 ON ci.cityName = ci2.cityName
INNER JOIN 
    customer as cu2 ON ci2.zipCode = cu2.zipCode
                    AND cu2.customerName <> cu.customerName
WHERE 
    cu2.customerName = 'William' 
```

它没有显示任何结果，因为我认为当他所在的城市有另外两个邮政编码时，它只会检查威廉的邮政编码。他的号码是 91709，cityNAME 还有 91708 和 91710。我需要找到该 cityNAME 内的其他客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:06:09.670

我认为这可以做到。

```
SELECT
  allCustomer.customerName,
  allCity.cityName
FROM Customer finder
  JOIN City finderCity
   ON finder.zipCode = finderCity.ZipCode
  JOIN City allCity
    ON finderCity.CityName = allCity.CityName
    AND finderCity.StateCode = allCity.StateCode
  JOIN Customer allCustomer
    ON allCity.ZipCode = allCustomer.ZipCode
WHERE finder.customerName = 'William'
  and allCustomer.customerName != 'William' 
```

一些注意事项：

*   如果customerName 不是唯一的，那么我们需要更好地识别William。
*   仅在 ON 子句中指定连接条件...不要将过滤条件放在那里。
*   一个城市（作为一个概念）在 City 表中由多行表示，这会导致混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:13:51.287

此 SQL 将在模拟表上执行此操作（我自己尝试过）：

```
SELECT customer.customerName, city.cityName FROM customer INNER JOIN city on city.zipCode = customer.zipCode WHERE city.cityName = (

SELECT city.cityName FROM city WHERE zipCode = (
SELECT city.zipCode FROM customer
INNER JOIN city ON customer.zipCode = city.zipCode
WHERE customer.customerName = 'William'
)

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:01:32.520

```
Select cityName,customerName from customer
Join City on Customer.zipCode = City.ZipCode
Where 
And customer.customerName = 'William'
Group by cityName, customerName 
```

# scala - 使用泛型函数的映射对 Seq 进行排序的 Scala 函数

> ID：13555891
> 
> 赞同：5
> 
> 时间：2012-11-25T21:52:41.807
> 
> 标签：scala, sorting, mapping

我正在尝试编写一个函数，通过函数 F（我将其称为 F（S））映射序列 S，用 S 压缩结果值（F（S）），并按 F（S )，返回排序后的压缩值（我希望代码能清除这个，很难放入文本）

这是我当前的代码：

```
def sortByAndReturnZippedMetric[S,M<:Ordering[AnyVal]]( s:Seq[S], mapper:S=>M):Seq[(M,S)] =
s.map(mapper).zip(s).sortBy(_._1) 
```

不过，Scalac 抱怨道：

```
error: diverging implicit expansion for type scala.math.Ordering[M]
starting with method comparatorToOrdering in trait LowPriorityOrderingImplicits
s.map(mapper).zip(s).sortBy(_._1)

                               ^ 
```

我会很感激一些关于可能出错的指示......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T23:07:44.203

`Ordering`是一个[类型 class](http://en.wikipedia.org/wiki/Type_class)，这意味着如果您想捕获`A`以特定方式排序的事实，您只需将隐式实例`Ordering[A]`放入范围 - 您没有`A`extend `Ordering[A]`（或`Ordering[AnyVal]`，等等）。

这种方法的优点是您可以使用特定类型的多个排序（尽管一次只能在一个类型的范围内使用一个隐式排序）。因此，例如，我可以编写以下内容：

```
scala> List(5, 2, 3, 1, 4).sorted
res0: List[Int] = List(1, 2, 3, 4, 5) 
```

这里整数 () 的隐式排序`Ordering.Int`用作 的隐式参数`sorted`，但我们也可以显式传递不同的`Ordering`. 例如，我们可以通过反转隐含的顺序来创建新的顺序：

```
scala> List(5, 2, 3, 1, 4).sorted(Ordering.Int.reverse)
res1: List[Int] = List(5, 4, 3, 2, 1) 
```

在您的情况下`sortBy`，正在寻找一个`Ordering[Ordering[AnyVal]]`不存在的 。[您可以通过使用绑定](https://stackoverflow.com/q/2982276/334519)来指示您需要订购的上下文来轻松解决此问题`M`，而不是`M`扩展`Ordering[AnyVal]`：

```
def sortByZipped[S, M: Ordering](s: Seq[S], mapper: S => M): Seq[(M, S)] =
  s.map(mapper).zip(s).sortBy(_._1) 
```

或者您可以跳过语法糖并使用隐式参数：

```
def sortByZipped[S, M](s: Seq[S], mapper: S => M)(implicit o: Ordering[M]) =
  s.map(mapper).zip(s).sortBy(_._1)(o) 
```

这完全等同于上下文绑定的版本。

# ssh - 从 SSH 运行 X 程序但使用服务器自己的 X 显示器

> ID：13555895
> 
> 赞同：0
> 
> 时间：2012-11-25T21:52:55.443
> 
> 标签：ssh, amazon-ec2, x11, remote-access, remote-server

我想从 SSH 运行一个 window/X 程序，但使用服务器自己的 X Display 作为窗口而不是客户端的 X Display。怎么做？请注意，我不是在这里要求 X 转发。

连接到服务器后，我在 SSh 中尝试了这个，

显示=：0.0

DISPLAY=:IP_I_dont_want_to_do_this 因为它可能在后台使用公共 ip

做这个的最好方式是什么？

有关更多信息，我正在使用 Amazon EC2 Ubuntu 实例。

Google 建议我使用“xpra”，它看起来是 X 窗口的“屏幕”，但我打算在服务器的 X 显示器上完全运行应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:22:57.867

您应该能够像这样在默认 Xserver 下运行 X 客户端（例如 xterm）

`DISPLAY=:0 xterm`

如果上述方法不起作用，请尝试`ps aux|grep /usr/bin/X`查找您的 Xserver 使用的 DISPLAY 端口

# git - TortoiseGit 中的日志图未显示分支/合并？

> ID：13555899
> 
> 赞同：7
> 
> 时间：2012-11-25T21:53:17.707
> 
> 标签：git, version-control, tortoisegit

我刚刚开始在 Windows 上使用 Git。我在 BitBucket 上托管并使用 TortoiseGit 作为 Windows 客户端。

事情正朝着正确的方向发展，但我在某一点上毫无头绪。我在 master 分支上工作，并且有一次创建了一个新分支。然后我继续在新的分支上工作，不断地提交、推动。最后当我完成时，我将这个新分支（codetidy）合并回master。

现在，当我执行“显示日志”并选择“所有分支”时，我只会在图中得到一条直线。没有关于何时取出分支以及何时合并回来的信息。请帮我找到这些信息。

![版本图](../Images/54e33e96f88cfbb9a9ed22aaec4bfb6e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T22:01:17.183

这可能是因为您的合并是一个*快进*合并，这意味着`master`在创建和重新合并之间没有任何提交`codetidy`- 所以 Git 只是移动`master`到指向同一个提交（因为它已经具有与合并看起来完全相同的文件内容），而不是创建不必要的合并提交。

如果你不想要这种行为，你需要强制 Git 创建一个单独的合并提交——在命令行上，这是用`git merge --no-ff`. 在 TortoiseGit 中，它是通过选中合并窗口中的“No Fast Forward”复选框来完成的（有关屏幕截图，请参见[之前](https://stackoverflow.com/a/6893363/148870)的 StackOverflow 答案）。

# php - 如何在 PHP 的 preg_match 中精确匹配 3 位数字？

> ID：13555905
> 
> 赞同：12
> 
> 时间：2012-11-25T21:53:30.433
> 
> 标签：php, regex, string, preg-match

假设您具有以下值：

```
123
1234
4567
12
1 
```

我正在尝试纠正一个 preg_match，它只会为 '123' 返回 true，因此仅匹配 3 位数字。这就是我所拥有的，但它也匹配 1234 和 4567。我可能也有一些东西。

```
preg_match('/[0-9]{3}/',$number); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-25T21:54:19.467

你需要的是[锚点](http://www.regular-expressions.info/anchors.html)：

```
preg_match('/^[0-9]{3}$/',$number); 
```

它们表示字符串的开始和结束。您需要它们的原因是，通常正则表达式匹配会尝试在主题中找到任何匹配的子字符串。

正如 rambo coder 指出的那样`$`，如果最后一个字符是新行，则也可以在字符串中的最后一个字符之前匹配。要更改此行为（这样`456\n`不会导致匹配），请使用`D`修饰符：

```
preg_match('/^[0-9]{3}$/D',$number); 
```

或者，使用`\z`which 始终匹配字符串的最后，无论修饰符如何（感谢 Ωmega）：

```
preg_match('/^[0-9]{3}\z/',$number); 
```

你说“我也可能有一些事情”。如果这意味着您的字符串应该以三个数字开头，但之后可以有任何内容（只要它不是另一个数字），您应该使用负前瞻：

```
preg_match('/^[0-9]{3}(?![0-9])/',$number); 
```

现在它也会匹配`123abc`。使用否定的lookbehind ，同样可以应用于正则表达式的开头（如果`abc123def`应该给出匹配）：

```
preg_match('/(?<![0-9])[0-9]{3}(?![0-9])/',$number); 
```

[关于环视断言的进一步阅读。](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T21:54:28.663

您需要锚定正则表达式

```
/^\d{3}$/ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T23:42:05.737

如果您在文本中的任何位置搜索 3 位数字，请使用正则表达式模式

```
/(?<!\d)\d{3}(?!\d)/ 
```

但是，如果您检查输入只是 3 位数字而不是其他数字，那么请使用

```
/\A\d{3}\z/ 
```

# jasper-reports - 寻找例如 Jasper Reports GenericElementPdfHandler 实现

> ID：13555907
> 
> 赞同：1
> 
> 时间：2012-11-25T21:53:53.353
> 
> 标签：jasper-reports, customization, ireport

我正在寻找任何人可能拥有的 Jasper Reports 实现的 GenericElementPdfHandler 的任何示例。代码中的映射只生成一个图像并委托回 JRPdfExporter 类。我正在寻找更多基于文本的东西，因为我需要执行类似于 JRPdfExporter.setHyperlinkInfo() 中的逻辑。演示目录中的代码与 HTML 相关，似乎不适用于我的用例。

具体来说，我希望实现一个通用处理程序，允许我在我的 PDF 中放置可点击的元素，当点击时调用 Adob​​e JavaScript 函数。Jasper Reports 提供了一种在文档打开时触发 PDF 逻辑的方法，但不响应元素点击事件。

我将不胜感激任何人都可以分享的任何示例，或任何有用的资源。我所有的网络搜索都没有发现任何有用的东西。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:06:34.037

我能够从 Jassser 社区网站上的一位开发人员那里获得一些帮助。一些额外的信息可以在这里找到：

[http://community.jaspersoft.com/questions/801396/embedding-print-page-control-pdf](http://community.jaspersoft.com/questions/801396/embedding-print-page-control-pdf)

# jquery - jQuery将文本区域中的硬返回替换为

> ID：13555910
> 
> 赞同：1
> 
> 时间：2012-11-25T21:54:17.040
> 
> 标签：jquery, html

我已经阅读了几篇关于这个主题的帖子，但没有一个能正常工作我试图用`<br/>`点击按钮替换文本区域中的硬返回。

这可能吗？这是我目前拥有的：

```
<script>
$('document').ready(function () {
$('#button').click(function(){  
$('#y').val().replace(/\r\n/g, "</p><br/><p>&nbsp; ");
var y = '<p>&nbsp; '+$('#y').val()+'</p>';
console.log(y)
});
});
</script>

<TEXTAREA id="y" ROWS="3" COLS="25">
</TEXTAREA>
<br><br>
<INPUT TYPE="submit" id="button"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:57:24.863

```
var x = $('#y').val().replace(/\n/g, "</p><br/><p>&nbsp; ");
var y = '<p>&nbsp; '+ x +'</p>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:57:37.263

使用`/\n/g`而不是`/\r\n/g`. 你只需要匹配`\n`not`\n`之前有 a `\r`。您还需要存储结果，因为`.replace()` *返回*结果（它不会将其应用于当前值）。所以：

```
var textWithBreaks = $('#y').val().replace(/\n/g, '<br />');
var y = '<p>&nbsp; '+textWithbreaks+'</p>'; 
```

后续示例：http: [//jsfiddle.net/qTpm6/](http://jsfiddle.net/qTpm6/)

# byte - 如何组合两个 rtp 流

> ID：13555912
> 
> 赞同：0
> 
> 时间：2012-11-25T21:54:19.003
> 
> 标签：byte, rtp, voice

我有两个字节数组，其中包含来自 RTP 数据包的原始数据。每个数组代表转换中的一个声音和一个人，我想把它们放在一起，这样我就可以听到整个转换。这两个数组的大小几乎相同。

我读到也许我需要创建第三个数组，每个字节应该是两个数组中相同位置的字节总和 - C[i]=A[i]+B[i]。

我认为这需要在两个数组之间进行一些操作。

有任何想法吗？领先一步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:30:33.140

您不能将两个**RTP**流混合在一起。您已将其分开，并将每个转换为 .wav 或 mp3 格式，然后将其混合。您可以将每个数组写入单独的文件。

# android - 下载文件错误[com.google.api.client.http.HttpResponseException: 401 Unauthorized]

> ID：13555916
> 
> 赞同：1
> 
> 时间：2012-11-25T21:54:48.313
> 
> 标签：android, google-drive-api

我在我的 Android 代码中使用以下代码，来自这里[https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)

一切正常，file.getDownloadUrl() 不为空，并且是一个非常长的 URL。

但是在获取 HttpResponse 时出现错误 401。

问题是什么？

我假设我已经获得授权，因为我可以在我的 GoogleDrive 中列出我的所有文件，获取 fileId 甚至是 file.getDownloadUrl()。我的 OAuth2.0 范围是 DRIVE。

```
11-26 06:40:37.614: W/System.err(15750): com.google.api.client.http.HttpResponseException: 401 Unauthorized
11-26 06:40:37.614: W/System.err(15750):    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1062) 
```

代码：

```
 /**
       * Download a file's content.
       *
       * @param service Drive API service instance.
       * @param file Drive File instance.
       * @return InputStream containing the file's content if successful,
       *         {@code null} otherwise.
       */
      private static InputStream downloadFile(Drive service, File file) {
        if (file.getDownloadUrl() != null && file.getDownloadUrl().length() > 0) {
          try {
            HttpResponse resp =
                service.getRequestFactory().buildGetRequest(new GenericUrl(file.getDownloadUrl()))
                    .execute();  //--ERROR HERE--
            return resp.getContent();
          } catch (IOException e) {
            // An error occurred.
            e.printStackTrace();
            return null;
          }
        } else {
          // The file doesn't have any content stored on Drive.
          return null;
        }
      } 
```

日志猫：

```
11-26 06:50:04.638: I/fileId(16350): 0B2PmmdZsG0kJUTFNcWNaam9KLVE

11-26 06:50:07.896: I/file.getDownloadUrl()(16350): https://doc-0s-8g-docs.googleusercontent.com/docs/securesc/3l0k423jsgncap9ihfdfv9kb388vqac9/glhd2gbkatjpv4cb60383pc8b127o0l2/1353873600000/11834093636053924840/11834093636053924840/0B2PmmdZsG0kJUTFNcWNaam9KLVE?h=16653014193614665626&e=download&gd=true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:10:46.493

您需要将 OAuth 2.0 令牌添加到授权标头中才能正常工作。应该看起来像这样：`Authorization: Bearer ya29.AHES6...`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:56:29.943

确保参数`service`是`Drive`您已授权的实例。如果不是这样，`buildGetRequest`不能添加授权头，因为它不知道

# java - 新手路过副本混淆

> ID：13555917
> 
> 赞同：0
> 
> 时间：2012-11-25T21:54:56.713
> 
> 标签：java

所以我知道 Java 是一种通过复制的语言（至少与迄今为止我从书中学到的一样多）。但是，为什么这样的代码：

```
public static void main(String[] args) {
    (...)
System.out.println("Array before sorting: "+Arrays.toString(ourArray));
System.out.println("Array after sorting: "+Arrays.toString(sortTheArray(ourArray)));
System.out.println("Bah-dum-tss: "+Arrays.toString(ourArray));

}

public static int[] sortTheArray(int[] someArray)
{
    Arrays.sort(someArray);
    return someArray;
} 
```

为第二行和第三行生成相同的输出？我的意思是 - 如果我们只通过副本传递它，为什么它不只是在第二个 println 上打印排序后的数组，然后在第三个上打印相同的、未排序的数组呢？我没有在任何地方做任何 ourArray = sortTheArray(ourArray) 那么为什么它的值会改变？提前谢谢你，很抱歉提出一个新问题:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T22:00:16.050

Java 不传递整个数组的副本，它传递数组引用的值。因此，您的应用程序中只有一个数组实例，并且该实例已排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T22:01:42.707

简短的回答是：因为你的书是错的。Java 是按值传递的。在这种情况下，“值”是对 int 数组的引用。这个引用被传递到 Arrays.sort() 中，它将在那个引用处对数组进行排序（在你的情况下总是相同的。所以你有你的数组所在的位置，并且你的所有代码都使用同一个。

如果你想要一个真正的副本，你需要使用 System.arraycopy() 来生成一个新的数组，然后你可以修改它而不改变你的原始数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T22:01:27.893

参数`ourArray`被复制，因此对同一个数组有多个引用。使用引用的一个副本修改数组，并且通过另一个引用可以看到更改。`ourArray`不会改变并继续指向与以前相同的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T22:01:37.690

您传递了*reference*的副本，它指向该对象。

这意味着

```
 public void myMethod(Set<String> a) 
```

然后

```
 myClass.myMethod(b); 
```

两者`b`和`myMethod's a`都将具有相同的值，即对同一对象的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T22:01:07.767

这很可能发生，因为方法 sortTheArray 正在修改它所操作的对象。如果您熟悉 ruby​​，您可能已经注意到某些方法的结尾带有感叹号。这意味着该方法将修改它所调用的对象。

# objective-c - 日期格式建议

> ID：13555921
> 
> 赞同：0
> 
> 时间：2012-11-25T21:55:32.527
> 
> 标签：objective-c, xcode, nsdate

从我的应用程序通过电子邮件发送 PDF 时，我使用以下内容获取文件标题

`NSString *date = [[NSDate date] description]; NSString *fileName = [NSString stringWithFormat:@"%@ %@.pdf", self.certificate.certificateType.title, date];`

它给了我一个文件名：

`myfilename.pdf 2012-11-25 21:35:45 + 0000`

有什么办法可以摆脱`+0000`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:03:56.913

您通常希望避免在文件名中使用空格。

```
NSDate *date = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyyy-MM-dd_HH-mm-ss";
NSString *dateString = [formatter stringFromDate:date];
NSString *fileName = [NSString stringWithFormat:@"%@_%@.pdf", self.certificate.certificateType.title, dateString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:05:48.070

该`description`方法不应该用于除调试之外的任何事情。它的实现可以随时改变（而且`NSDate`，它在过去已经改变）。

更好的解决方案是使用`NSDateFormatter`具有特定日期格式的 ，以确保结果一致。

@Eugene 的回答举了一个很好的例子。

# macos - 按字母顺序对 NSPopUpMenu 项目进行排序

> ID：13555933
> 
> 赞同：0
> 
> 时间：2012-11-25T21:56:14.057
> 
> 标签：macos, cocoa, sorting, nsmenuitem, nspopupbutton

我想按字母顺序对 a 的`NSMenuItem`s 进行`NSPopUButton`排序。
我检查了可可参考，但找不到执行此操作的函数。我错过了什么还是我必须编写自己的排序函数？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T23:32:12.887

没有方法可以对项目进行适当的排序，但是您可以：

1.  使用`itemArray`它获取所有项目的数组
2.  `NSArray`使用其中一种排序方法对该数组进行排序
3.  从菜单中删除现有项目`removeAllItems`
4.  不幸的是，没有多重添加方法，因此对您的排序数组和`addItem:`每个数组使用快速枚举。

# objective-c - 如何在半外的 NSWindow 标题栏上显示图像

> ID：13555934
> 
> 赞同：3
> 
> 时间：2012-11-25T21:56:21.013
> 
> 标签：objective-c, macos, nsview, nswindow, titlebar

我有一个自定义`NSWindow`子类 - `INAppStoreWindow`( [github](https://github.com/indragiek/INAppStoreWindow) ) 带有自定义标题栏视图 - 我想做这样的事情：
![在此处输入图像描述](../Images/d4e04073fcb210174725897eda727016.png)
如您所见，功能区并不完全在标题栏之外。这就像在中间。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T16:43:22.973

最简单的方法可能是为徽章使用单独的窗口。使其成为主窗口的子窗口，它将保持在顶部并随其移动。它将是无边界的并且基本上是透明的，等等。

但是，如果主窗口水平调整大小，可能很难保持标记子窗口正确定位。或者，您可以轻松地移动徽章子窗口，但它可能会滞后于调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T13:30:10.783

您的图像必须绘制在窗口区域内。即使这意味着您的窗口的某些部分是透明的。

你可以用所有常见的无边框窗口的东西来做到这一点。只需将两个视图用于标题栏区域。一种用于标题栏本身，其中视图内容清晰，或者您可以说不透明的内容没有到达视图的顶部。在您的徽章的子视图中，绘制您喜欢的任何徽章。让您的徽章视图延伸到标题栏视图的顶部并重叠其透明区域。

您可能会在窗口与菜单栏的交互方式和外观方面遇到不好的权衡。由于这是高度非标准的，并且存在应该由 Cocoa 提供和解决的 UI 问题（如果有），我建议寻找不同的设计。这将需要大量的工作来维护和完成。定制的无边框窗口并不难做，但要做好却很难。在 OS X 上 NSWindow 的子视图中有许多视觉状态变化的细微之处。颜色会根据窗口的键和主要状态而变化。它是免费的标准窗口和视图。使用定制的东西，你必须做更多的事情。

# javascript - 刷新/更改页面后保持项目关闭

> ID：13555937
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:56:36.380
> 
> 标签：javascript, jquery

用户转到另一个页面或刷新页面后，如何隐藏 div？我在页脚中有以下代码，因此它会加载到每个页面上：

```
$(document).ready(function() {
 $('#clickmebottom').click(function() {
      $('#bottomfixtab').animate({
           height: 'toggle'
           }, 350
      );
 });
}); 
```

#clickmebottom 是一个 X 按钮，单击时隐藏 #bottomfixtab div（屏幕底部的小固定横幅）

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:06:06.943

您可以使用 jQuery 插件（例如[jquery-cookie](https://github.com/carhartl/jquery-cookie)）来简化 cookie 访问。所以你的代码会变成这样来保存 div 的切换设置：

```
// pseudo-code, you'll want to check the actual syntax
$(document).ready(function() {

  // see if the cookie is set, if it is, hide the div
  if ( $.cookie('toggledDiv' ) {
    $('#bottomfixtab').hide();
  }
  $('#clickmebottom').click(function() {
    $.cookie('toggledDiv');
    $('#bottomfixtab').animate({
      height: 'toggle'
    }, 350 );
  });
}); 
```

这可能会使 div 闪烁然后隐藏，因此如果您想避免该闪烁，请将默认设置为 display: none，然后如果*未*设置 cookie，则显示 div：

```
// again, pseduo-code
if ( !$.cookie('toggledDiv') ) {
  $('#bottomfixtab').show()
} 
```

# javascript - Javascript + Canvas = 移动应用程序，是否有用于此的 UI 框架

> ID：13555941
> 
> 赞同：0
> 
> 时间：2012-11-25T21:57:11.813
> 
> 标签：javascript, canvas

> **可能重复：**
> [是否有任何构建在 HTML Canvas 之上的 GUI 工具包，如 swing、swt、gtk 或 qt？](https://stackoverflow.com/questions/1572740/are-there-any-gui-toolkits-built-on-top-of-html-canvas-like-swing-swt-gtk-or-qt)

我想知道的是.. 是否有允许在 Canvas 之上构建 UI 的 JS 框架？我想建立一个网站，所有控制在画布中呈现的文本、图像和动画。

我不是在谈论游戏开发，我在谈论 UI \ Mobile Web \ Mobile Apps

PS：我知道这很奇怪，但我真的想试一试..

# html - 右对齐 div 表单元素

> ID：13555942
> 
> 赞同：0
> 
> 时间：2012-11-25T21:57:13.390
> 
> 标签：html, css

假设我有一个 div，其中有一个文本输入和一个文本区域，如下所示：

```
<div>
    <input type="test" name="username" /><br />
    <textarea rows="5" cols="70">Enter text here...</textarea>
</div> 
```

如何将输入字段和我的文本区域对齐到我的 div 的右侧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T21:59:16.937

**HTML**

```
<div class="right-align">
    <input type="test" name="username" /><br />
    <textarea rows="5" cols="70">Enter text here...</textarea>
</div> 
```

**CSS**

```
.right-align {
    text-align: right;
} 
```

[活生生的例子](http://jsfiddle.net/G5rFQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T22:05:11.553

用于`float: right;`所有要浮动的元素。确保添加明确的修复。这样，您可以将所有内容浮动到右侧，包括图像、div 和其他任何内容。

[http://jsfiddle.net/dgvBe/](http://jsfiddle.net/dgvBe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T22:02:09.360

html：

```
<div>
    <input type="test" name="username" /><br />
    <textarea rows="5" cols="70">Enter text here...</textarea>
</div> 
```

CSS：

```
input , textarea{
   float:right;
   direction:rtl; #for right to left languages
} 
```

# list - 在 Scheme 中制作随机列表

> ID：13555956
> 
> 赞同：1
> 
> 时间：2012-11-25T21:58:30.593
> 
> 标签：list, random, scheme

我只是想随机制作一个列表并在更大的函数中使用它。

```
 (define make-random-list
        (if
          (= (random 2) 0) (list 2 3)
                           (list 3 2))) 
```

这只会产生列表 (2 3)，我不知道为什么。发生了什么导致这种情况？

如果我这样写，我可以使函数工作

```
 (define make-random-list
   (lambda (x)
   (if
    (= (random x) 0) (list 2 3)
                     (list 3 2)))) 
```

并调用 (make-random-list 2)

但我不明白为什么这会起作用而另一个不会。不允许第一个函数产生随机结果的方案是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:50:16.527

在 Scheme 中，函数是通过显式使用`lambda`如下定义的：

```
(define square
  (lambda (x)
    (* x x))) 
```

或者像这样，它是前面语法的简写，并且隐含地使用 a `lambda`——这两种过程定义的风格是完全等价的：

```
(define (square x)
  (* x x)) 
```

您的代码的第一个版本不起作用，因为这只是将评估结果分配`if`给一个名为的变量`make-random-list`：

```
(define make-random-list
  (if (= (random 2) 0)
      (list 2 3)
      (list 3 2))) 
```

要在 Scheme 中定义过程，您必须`lambda`显式或隐式使用 a 。因此，您的过程应该使用以下任何一种等效形式来定义：

```
(define make-random-list
  (lambda ()
    (if (= (random 2) 0)
        (list 2 3)
        (list 3 2)))

(define (make-random-list)
  (if (= (random 2) 0)
      (list 2 3)
      (list 3 2))) 
```

`x`请注意，如果唯一可能的值是，则不必传递参数`2`，只需声明一个不带参数的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:03:28.233

在您的第一个片段中，您将一次性计算的结果分配给一个变量。您需要在这里定义一个函数，该函数将在每次调用时进行评估。您的第二个片段正是这样做的，但有一种更短的表达方式：

```
(define (make-random-list x)
(if
  (= (random x) 0) (list 2 3)
                   (list 3 2))) 
```

请注意语法上的差异：函数定义将函数定义与括号中的形式参数名称一起括起来，而变量名称周围没有括号。

# debugging - Lua I/O 在调试时工作，但在程序中不正确

> ID：13555960
> 
> 赞同：-1
> 
> 时间：2012-11-25T21:58:49.197
> 
> 标签：debugging, file-io, io, lua, lua-5.2

我正在测试第一次在 Lua (5.2.1) 脚本中写入文件，在两个版本之间交替：

版本 1

```
local ofile = io.open("save.txt", "w")
  ofile:write("Writing to file...")
  ofile:close() 
```

版本 2

```
io.output("save.txt")
io.write("Writing to file...")
io.close() 
```

在 ZeroBrane Studio 中进行调试时，这两种方法都可以正常工作，但是当将其插入我的程序的脚本中时，不会写入该文件，并且在该点之后出现的任何代码显然都不会执行。

顺便说一句，我在我的程序中包含了 I/O 库。

```
lua_State *lua = luaL_newstate();

static const luaL_Reg lualibs[] = {
    { "base", luaopen_base }, 
    { "io", luaopen_io },
    { "string", luaopen_string },
    { "table",  luaopen_table },
    { NULL, NULL}
};

const luaL_Reg *lib = lualibs;
for(; lib->func != NULL; lib++) {
  lib->func(lua);
  lua_settop(lua, 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:31:30.553

我确定问题与如何加载 Lua 库有关。只需将单个加载更改为：

```
luaL_openlibs(lua); 
```

修复了整个问题。但是我仍然不明白为什么单独调用 I/O 库不起作用。

# c - 带有 OpenSSL 的 MD5 HMAC

> ID：13555962
> 
> 赞同：6
> 
> 时间：2012-11-25T21:59:09.817
> 
> 标签：c, openssl, md5, hmac

我试图用 OpenSSL 生成 MD5 HMAC，并且大部分代码都是借来的。生成的 hmac 不正确：

```
#include <openssl/hmac.h>
#include <openssl/evp.h>
#include <syslog.h>
#include <string.h>

#include <openssl/engine.h>
#include <openssl/hmac.h>
#include <openssl/evp.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main() 
{
  unsigned char* key = (unsigned char*) "2012121220121212201212122012121220121212201212122012121220121212";
  unsigned char* data = (unsigned char*) "johndoejohndoejohndoejohndoejohndoejohndoejohndoejohndoejohndoejohndoejohndoejohndoe";
  unsigned char* expected = (unsigned char*) "abcd1d87dca34f334786307d0da4fcbd";
  unsigned char* result;
  // unsigned int result_len = 16;
  unsigned int result_len = 16;
  int i;
  static char res_hexstring[32];

  // result = HMAC(EVP_sha256(), key, 4, data, 28, NULL, NULL);
  result = HMAC(EVP_md5(), key, 32, data, 28, NULL, NULL);
  for (i = 0; i < result_len; i++) {
    sprintf(&(res_hexstring[i * 2]), "%02x", result[i]);
  }

  if (strcmp((char*) res_hexstring, (char*) expected) == 0) {
    printf("Test ok, result length %d\n", result_len);
  } else {
    printf("Got %s instead of %s\n", res_hexstring, expected);
  }
} 
```

生成的哈希不正确。我会很感激一些反馈或有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T14:29:31.917

HMAC 的第三个和第五个参数是错误的。您必须传递密钥的长度和数据的长度。在您的示例中，这分别是 64 和 84，而不是 32 和 28。

所以 ：

```
-    result = HMAC(EVP_md5(), key, 32, data, 28, NULL, NULL);                                                                                                                                                                         
+    result = HMAC(EVP_md5(), key, 64, data, 84, NULL, NULL); 
```

通过此修改，它似乎工作正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-01T20:50:53.333

如果您编写以下代码，则可以使一体化 OpenSSL HMAC 命令更整洁：

`result = HMAC(EVP_md5(), key, sizeof(key)-1, data, sizeof(data)-1, NULL, NULL);`

因为`key`and`data`是用字符串字面量初始化的，所以两者的最后一个字符都是`\0`. 不应散列此终止字符。我们通过指定数组的大小减去最后一个字符来跳过这个字符。

[您可以从https://www.rfc-editor.org/rfc/rfc2202](https://www.rfc-editor.org/rfc/rfc2202)获取 HMAC-MD5 的其他测试向量。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-12-27T06:18:19.663

利用

```
result = HMAC(EVP_md5(), key, strlen(key), data, strlen(data), NULL, NULL); 
```

代替

```
result = HMAC(EVP_md5(), key, 32, data, 28, NULL, NULL); 
```

它通常适用于任何**数据**和**密钥**

# objective-c - 在Objective C中实例化之前先将变量设置为nil有什么意义

> ID：13555963
> 
> 赞同：2
> 
> 时间：2012-11-25T21:59:09.583
> 
> 标签：objective-c, c, static

我刚刚开始学习用于 iOS 开发的 Objective C。我试图理解以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"BirdSightingCell";

    static NSDateFormatter *formatter = nil;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc] init];
        [formatter setDateStyle:NSDateFormatterMediumStyle];
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    BirdSighting *sightingAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:sightingAtIndex.name];
    [[cell detailTextLabel] setText:[formatter stringFromDate:(NSDate *)sightingAtIndex.date]];
    return cell;
} 
```

问题一：

声明变量 CellIdentifier 和格式化程序时，“静态”做了什么？如果我不将它们声明为静态，它仍然有效，那么使用静态有什么好处？

Q2：

```
static NSDateFormatter *formatter = nil;
if (formatter == nil) { 
```

这个表达式不总是正确的吗？为什么我们在那里使用那个 if 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:03:01.070

这`static`意味着该变量`nil`在程序启动时设置为一次，而不是每次“运行”该语句时，并且它在多个函数调用中保持其值。

因此，当您第一次调用该函数时，它将触发`nil`该语句。`if`对该函数的后续调用会将其设置为非`nil`值，以便`if`语句中的代码不会再次运行。

这称为延迟初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T22:03:49.160

`static`在这种情况下，这意味着它是多次调用此方法的“共享”变量。第一次调用时，静态变量将是`nil`. 下一次它将是上次通话期间设置的内容。

# java - 将两个二维数组复制到另一个二维数组Java

> ID：13555964
> 
> 赞同：7
> 
> 时间：2012-11-25T21:59:12.257
> 
> 标签：java, arrays

我还有另一个 Java 问题 :)

我已经阅读[了这个](https://stackoverflow.com/questions/4697255/combine-two-integer-arrays)线程，它清楚地解释了它，但是我有两个想要复制的二维数组。

我明白这段代码

```
int[] array1and2 = new int[array1.length + array2.length];
System.arraycopy(array1, 0, array1and2, 0, array1.length);
System.arraycopy(array2, 0, array1and2, array1.length, array2.length); 
```

但我的问题是，如何将它与两个数组合并

```
int a1[][] = new int [3][3];
int b1[][] = new int [3][3];
int c1[][] = new int [3][6]; 
```

c1 是上述数组的合并在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:11:04.143

使用您在问题中提到的[任务中的解决方案。](https://stackoverflow.com/questions/4697255/combine-two-integer-arrays)例子：

```
import java.util.Arrays;

public class ArrayProgram {

    public static void main(String[] args) {
        int[][] array1 = { { 1, 2, 3 }, { 1, 2, 3 }, { 1, 2, 3 } };
        int[][] array2 = { { 4, 5, 6 }, { 7, 8, 9 }, { 0, 1, 2 } };
        int[][] result = ArrayCopier.joinSecondDimension(array1, array2);
        for (int[] array : result) {
            System.out.println(Arrays.toString(array));
        }
    }
}

class ArrayCopier {

    public static int[][] joinSecondDimension(int[][] array1, int[][] array2) {
        int[][] array1and2 = new int[array1.length][];
        for (int index = 0; index < array1.length; index++) {
            array1and2[index] = join(array1[index], array2[index]);
        }
        return array1and2;
    }

    public static int[] join(int[] array1, int[] array2) {
        int[] array1and2 = new int[array1.length + array2.length];
        System.arraycopy(array1, 0, array1and2, 0, array1.length);
        System.arraycopy(array2, 0, array1and2, array1.length, array2.length);
        return array1and2;
    }
} 
```

印刷：

```
[1, 2, 3, 4, 5, 6]
[1, 2, 3, 7, 8, 9]
[1, 2, 3, 0, 1, 2] 
```

**编辑**
任何参数编号的实现（[可变长度参数列表](http://www.deitel.com/articles/java_tutorials/20060106/VariableLengthArgumentLists.html)）：

```
import java.util.Arrays;

public class ArrayProgram {

    public static void main(String[] args) {
        int[][] array1 = { { 1, 2, 3 }, { 4, 5, 6 }, { 7, 8, 9 } };
        int[][] array2 = { { 1, 2, 3 }, { 4, 5, 6 }, { 7, 8, 9 } };
        int[][] array3 = { { 1, 2, 3 }, { 4, 5, 6 }, { 7, 8, 9 } };
        test(array1);
        test(array1, array2);
        test(array1, array2, array3);
    }

    private static void test(int[][]... arrays) {
        int[][] result = ArrayCopier.joinSecondDimension(arrays);
        for (int[] array : result) {
            System.out.println(Arrays.toString(array));
        }
        System.out.println();
    }
}

class ArrayCopier {

    public static int[][] joinSecondDimension(int[][]... arrays) {
        int firstArrayLength = arrays[0].length;
        int[][] result = new int[firstArrayLength][];
        for (int index = 0; index < firstArrayLength; index++) {
            result[index] = join(getSecondDimArrays(index, arrays));
        }
        return result;
    }

    public static int[] join(int[]... arrays) {
        int[] result = new int[getTotalLength(arrays)];
        int destPos = 0;
        for (int[] array : arrays) {
            System.arraycopy(array, 0, result, destPos, array.length);
            destPos += array.length;
        }
        return result;
    }

    private static int getTotalLength(int[]... arrays) {
        int length = 0;
        for (int[] array : arrays) {
            length += array.length;
        }
        return length;
    }

    private static int[][] getSecondDimArrays(int index, int[][]... arrays) {
        int[][] result = new int[arrays.length][];
        int resultIndex = 0;
        for (int[][] array : arrays) {
            result[resultIndex++] = array[index];
        }
        return result;
    }
} 
```

印刷：

```
[1, 2, 3]
[4, 5, 6]
[7, 8, 9]

[1, 2, 3, 1, 2, 3]
[4, 5, 6, 4, 5, 6]
[7, 8, 9, 7, 8, 9]

[1, 2, 3, 1, 2, 3, 1, 2, 3]
[4, 5, 6, 4, 5, 6, 4, 5, 6]
[7, 8, 9, 7, 8, 9, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:10:24.767

像这样的东西应该工作得很好？

```
int a1[][] = new int [3][3];
int b1[][] = new int [3][3];
int c1[][] = new int [3][6];

for (int i = 0; i < a1.length; i++) {
    System.arraycopy(a1[i], 0, c1[i], 0, a1[i].length);
    System.arraycopy(a2[i], 0, c1[i], a1[i].length, a2[i].length);
} 
```

顺便说一句，我从你的尺寸假设 c 看起来像：

```
[  a, a, a,  ,  ,  ]
[  a, a, a,  , b,  ]
[  a, a, a,  ,  ,  ] 
```

# php - 当从sql返回的行数在php中改变时，如何进行分页？

> ID：13555965
> 
> 赞同：0
> 
> 时间：2012-11-25T21:59:11.440
> 
> 标签：php, sql, pagination

我有一个数据库，其中有一个 books 表和一个 people 表，每个表大约有 100k 个条目。第三个表将两者连接起来，因此它们具有多对多关系。除了 book 和 person id 的列之外，连接表还有一个列，指示 book 与 person、fx writer、co-writer 或 publisher 或其他东西之间的关系类型。

我需要进行查询，以返回所有书籍条目的列表以及与之相关的人员和特定的关系类型。当连接这两个表时，SQL 会返回多行记录与它相关的多个人的书籍，所以我之后在 php 中对此进行了排序。与书籍相关的人数因书籍而异，没有可预测的模式。

我需要制作一个分页系统。

在这种情况下进行分页的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:14:50.330

你有几种选择，我想说它们可以分为两组

1.  您发送了所有行并在纯 javascript 中进行分页（在客户端）
2.  除了您在 sql 查询中指定的限制之外，您还指定了一个偏移量。该偏移量存储在您的 php 会话中，并且每次用户在您的分页中选择下一个/上一个时递增/递减。

优点缺点：

1.  每个会话一个单一的 sql 查询，没有额外的 http 请求，因为所有都在客户端内部处理。当查看结果时服务器端发生变化时，可视化的结果可能会过时。传输的行数更大，因此第一个可视化的加载时间更长。

2.  仅查询和处理单个视图实际需要的那些行。更多行仅应请求检索。行总是最新的，但是如果您使用偏移值而同时行数发生变化（极少数情况），事情可能会变得很糟糕。每个下一个/上一个操作一个 http 请求，但单个视图的加载时间更快。

* * *

对于由于join导致单书多次点击的问题：

我认为您应该在这里遵循不同的策略：

1.  或者您使用子查询（查询中的查询），这样您就可以为内部查询指定偏移量和限制，仅在不考虑人员的情况下检索书籍。然后外部查询将人员连接到内部查询的结果。

2.  不要为与书关联的多个人检索单独的行，而是将这些命中分组并可能通过连接他们的名字或其他东西来加入这些人。就像您检索的每本书中的一组人一样。这样你就可以毫无问题地指定偏移量和限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:39:13.680

你需要选择你的书**而不**离开人们，这样你就可以使用 LIMIT 0,20 用于第 1 页，LIMIT 20,20 用于第 2 页等进行分页

然后分别获取每本书的人员列表。您可以对每本书使用一个 SQL 调用，或者将它们全部用于所选书籍并摆弄该列表，以更快者为准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T22:41:40.567

您可以在一行中选择每本书的所有相关人员`group_concat`，然后使用`limit offset, num_rows`

```
select b.book_id, b.title, ..., group_concat(c.type), group_concat(p.name)
from books b
join connections c on c.book_id = b.book_id
join persons p on p.person_id = c.person_id
group by book_id
limit 100, 50 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T23:12:23.257

这是一种糟糕的形式，因为您很可能应该按照前面的答案所建议的那样做——在 SQL 中工作。但是，您发表评论说您在 PHP 中全力以赴。也就是说，如果您在脚本中有所有结果（即不是一个巨大的数据库结果），那么可以很容易地在 PHP 中处理它。

1.  将结果存储在 $_SESSION 变量中。
2.  计算结果的长度。
3.  将结果除以每页的项目数。
4.  for 循环显示第一页项目的结果。
5.  建立一个链接，将页码与查询字符串或其他方式一起传递..
6.  for 循环从下一页的下一项开始的结果等。

您可能对[PHP.net 手册页上提供的 count() 的一些自定义函数感兴趣。](http://php.net/manual/en/function.count.php)

# zend-framework2 - 使用 Zend Framework 2 工具/ZF2 工具

> ID：13555966
> 
> 赞同：0
> 
> 时间：2012-11-25T21:59:13.833
> 
> 标签：zend-framework2

显然有一个[ZF Tool for ZF2](https://github.com/zendframework/ZFTool)版本。该工具应处理以下内容：

*   模块维护（安装、配置、拆卸等）
*   检查应用程序配置。
*   部署 zf2 框架应用程序。

问题是这些工具本身是作为一个模块安装的，而[自述文件](https://github.com/zendframework/ZFTool/blob/master/README.md)中描述的用法没有提供“正确”的详细信息。

它提到了以下命令：

```
zf.php config [list] 
```

但是 zf.php 命令不是该工具的一部分，并且文档不提供信息。有谁知道是否有一些依赖或其他配置会使这个工具有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:37:00.937

我不知道。我能做的是提供一个替代工具：

[https://github.com/ebanolopes/zf2-module-generator](https://github.com/ebanolopes/zf2-module-generator)

目前（v0.0.1），它只支持向您的项目添加新模块。

# c# - ComponentModelCreated 管理温莎生活方式的正确用法是什么？

> ID：13555969
> 
> 赞同：0
> 
> 时间：2012-11-25T21:59:15.870
> 
> 标签：c#, asp.net-mvc, castle-windsor

我正在尝试使用 Castle Windsor Kernal 的 tje ComponentModelCreated 事件来管理我的组件的生活方式。

问题是事件似乎根本没有触发？我一定是在错误地使用它吗？请在下面查看我的代码，我很想知道我哪里出错了。

谢谢。

在我的 Application_Start 中：

```
Container = new WindsorContainer().Install(FromAssembly.This());
Container.Kernel.ComponentModelCreated += WindsorExtension.Kernel_ComponentModelCreated; 
```

方法：

```
public static void Kernel_ComponentModelCreated(ComponentModel model)
        {
            if (model.LifestyleType == LifestyleType.Undefined && model.Name.EndsWith("Controller"))
            {
                model.LifestyleType = LifestyleType.Transient;
            }
            else if (model.LifestyleType == LifestyleType.Undefined)
            {
                model.LifestyleType = LifestyleType.PerWebRequest;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:17:27.020

我不确定你说的那部分

> 该事件似乎根本没有触发

它可以在我的机器上运行...

至于根本问题，像这样的事件处理程序**不是**修改`ComponentModel`自身的正确位置。

为此使用[ComponentModel 构造贡献者](http://docs.castleproject.org/Windsor.ComponentModel-construction-contributors.ashx)。

# php - 如何在客户端（html）的php中显示脚本的结果

> ID：13555975
> 
> 赞同：-2
> 
> 时间：2012-11-25T21:59:42.037
> 
> 标签：php, json, get

我有一个 HTML 格式的快速表单，用户应该在其中写一个数字。我应该使用 GET 方法将这个数字提供给 PHP 中的脚本。这个脚本的结果应该以 JSON 格式显示在客户端（带有表单的 html 页面）。我不知道该怎么做。

我的代码：

```
<?php

    $data=
    array(
    '12345678912'=>array('name'=>'Insurance Company A' , 'number' => '123'),
    '98765432109'=>array('name'=>'Insurance Company B' , 'number' => '312'),
    '80101066666'=>array('name'=>'Insurance Company B' , 'number' => '980'),
    );

    if ($data[$_GET['pesel']]) {
      echo json_encode($data[$_GET['pesel']]);
    }
    else {
      echo 'wrong number';

    }?>

    <html>

    <head> 
     <meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
    </head>
    <body>
        <form action="server.php" method="get">
            <div style="border:solid; width:500 px; height:300 px;">
            <h1>  Write number </h1>

            <input type="text" name="pesel" />
            <input type="submit" value="ok" />
            <div>

<div id="results">

//place to show result in JSON

</div>

        </form> 
    </body>
    </html> 
```

* * *

编号为 12345678912 的服务器页面上的结果

{"name":"保险公司 A","number":"123"}

如何在页面上的 div id=results 中显示它？

对不起我的英语不好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:24:28.510

它只是一个再次调用自身的 php 文件。

输入.php：

```
<form action="input.php" method="get">
<input type="number" name="number" />
<input type="submit" value="submit"/>
</form>
<?php 
$num = $_GET['number'];
echo $num
?> 
```

我不知道你为什么要在浏览器中以 json 格式显示它，json 格式用于传输目的而不是用于显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T23:25:15.603

所以你想显示`json_encode($data[$_GET['pesel']]);`在`#results`? 只需将代码与这些内容相呼应即可：

```
<div id="results">
<?php
if ($data[$_GET['pesel']]) {
  echo json_encode($data[$_GET['pesel']]);
}
else {
  echo 'wrong number';
?>
</div> 
```

并更改表单，使其提交到您显示它的同一个 URL，

```
<form action="" method="get">
    ...
</form> 
```

提交时，浏览器将调用与`GET`表单中的参数相同的 URL。这将执行您的 PHP 代码，并输出结果。

^(但是你在做的事情很奇怪......)

# objective-c - RestKit 有时给我“操作无法完成”

> ID：13555979
> 
> 赞同：1
> 
> 时间：2012-11-25T21:59:56.893
> 
> 标签：objective-c, ios, web-services, restkit

我正在使用 RestKit 从 PHP 网络服务中获取对象，我的代码是

```
 NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys: @"1", @"user_id",nil];
    [[RKObjectManager sharedManager]loadObjectsAtResourcePath:[@"/myURL" stringByAppendingQueryParameters:params]delegate:self]; 
```

但是当我第一次使用它时，它只给我“操作无法完成。（org.restkit.RestKit.ErrorDomain 错误4。）”没有任何其他错误，刷新页面时它正确加载对象我搜了好久没找到这样的问题

任何人都可以帮忙吗？

# clojure - 如何从 Clojure 中编译 Clojurescript 表单？

> ID：13555980
> 
> 赞同：10
> 
> 时间：2012-11-25T21:59:58.433
> 
> 标签：clojure, clojurescript

我正在使用 clj-webdriver 在 Clojurescript Web 应用程序上进行一些基于 Selenium 的测试。有时，应用程序本身有一些东西我希望能够在测试运行时摆弄。我看到 clj-webdriver 有一个叫做的东西`(execute-script js args)`，它接受一串 Javascript 代码并在当前的测试浏览器上运行它。我已经对此进行了测试，它似乎有效。我想将 clojurescript 代码传递给`execute-script`。我需要将我的 Clojure 表单编译成 Clojurescript 代码的东西。

我看到以下与此相关的[问题](https://stackoverflow.com/questions/11401233/how-to-compile-clojurescript-inside-clojure)。它说要使用离合器中的 js/emit 功能。我搜索了离合器，发现它只在[cljs-views.clj](https://github.com/clojure-clutch/clutch/blob/master/src/com/ashafa/clutch/cljs_views.clj)的（视图）中提到我在 repl 中尝试了以下操作：

```
user> (use 'com.ashafa.clutch.cljs-views)  
  nil  
user> view 
  <core$comp$fn__4034 clojure.core$comp$fn__4034@ebd3f80> 
user> js/emit 
  CompilerException java.lang.RuntimeException: No such namespace: js, #compiling (NO_SOURCE_PATH:1)   
user> 
```

这并不令人惊讶，js 怎么会出现在常规的 clojure 命名空间中？但是我如何使用这个（或任何其他）系统来生成我可以传递给的 Clojurescript（javascript）代码`execute-script`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T00:04:33.047

使用`cljs.closure/build`功能：

```
(use '[cljs.closure :only [build]])
(build '(print "hello") {:optimizations :simple :pretty-print true}) 
```

[在closure.clj](https://github.com/clojure/clojurescript/blob/master/src/clj/cljs/closure.clj)底部的评论中有更多示例。也有输出到文件的选项。

# haskell - 为具有静态类型长度的列表编写长度函数

> ID：13555982
> 
> 赞同：5
> 
> 时间：2012-11-25T22:00:07.917
> 
> 标签：haskell, types

给定一个具有静态类型长度的列表（[以此](http://jeltsch.wordpress.com/2012/04/30/dependently-typed-programming-and-theorem-proving-in-haskell/)为例）：

```
data Zero

data Succ nat

data List el len where
    Nil  ::                      List el Zero
    Cons :: el -> List el len -> List el (Succ len) 
```

是否可以编写一个长度函数来使用静态类型而不是通常的递归来计算长度？

到目前为止，我的努力使我得出的结论是，这是不可能的，因为它需要“取消”类型信息才能再次出现：

```
class HasLength a where
    length :: a -> Natural

instance HasLength (List el Zero) where
    length _ = 0

instance HasLength (List el (Succ len)) where
    length _ = 1 + *how to recur on type of len* 
```

但是，我才刚刚开始了解类型可能具有的所有魔力，所以我知道我无法构想解决方案并不意味着没有解决方案。

**更新**

由于长度返回自然，我错误地写了`length _ = 1 + ...`. 正确的实例（使用下面给出的答案）是

```
instance HasLength (List el len) => HasLength (List el (Succ len)) where
    length _ = succ $ length (undefined :: List el len) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T00:05:07.973

例如像这样：

```
instance HasLength (List el len) => HasLength (List el (Succ len)) where
    length _ = 1 + length (undefined :: List el len) 
```

注意：这需要`ScopedTypeVariables`扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:30:01.247

如果您使用扩展名，这将容易得多`DataKinds`，这将允许您“提升”`Natural`为一种类型，这使得（提升的）类型`Zero`更`Succ n`易于处理，并消除了诸如`Succ Char`. 有几种方法可以解决它，但要紧贴您的文字：

```
{-#LANGUAGE GADTs, DataKinds, StandaloneDeriving  #-}
data Natural = Zero | Succ Natural deriving (Show,Eq,Ord)

data List el len  where
    Nil  ::                      List el Zero 
    Cons :: el -> List el len -> List el (Succ len) 

deriving instance Show el => Show (List el len)

class HasLength f where len ::  f n -> Natural

instance HasLength (List el) where
    len Nil = Zero
    len (Cons _ xs) = Succ (len xs) 
```

（我也使用`StandaloneDeriving`了 ，在这种情况下需要自动派生`Show`。）

# java - 开源或免费指纹读取器 SDK

> ID：13555985
> 
> 赞同：2
> 
> 时间：2012-11-25T22:00:23.273
> 
> 标签：java, sdk, open-source, fingerprint

我正在开始我的最后一年项目，需要一个用于指纹读取器的 SDK。我有一个[微软](http://www.microsoft.com/hardware/en-us/d/fingerprint-reader)指纹扫描仪。我打算在 Windows 8 下使用 Java & Eclipse 来开发这个项目。

如果有人听说过/使用过免费的 SDK，我希望收到您的来信！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T22:12:09.697

我只知道[VeriFinger Embedded SDK](http://www.neurotechnology.com/verifinger-embedded.html)它是免费的 30 天试用版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:28:54.403

最后我决定使用[libfprint](http://www.freedesktop.org/wiki/Software/fprint/libfprint)。我让它在 Ubuntu 11.10 下运行（12.04 还不能与 vmplayer 一起工作）。很有魅力！

# google-maps-api-3 - 未捕获的类型错误：无法调用未定义的方法“substr”...在 IE 中可以正常工作，但不能在 chrome 或 FF 中使用

> ID：13555994
> 
> 赞同：0
> 
> 时间：2012-11-25T22:01:17.173
> 
> 标签：google-maps-api-3

这是页面： [http ://www.wrh.noaa.gov/mfr/rec/](http://www.wrh.noaa.gov/mfr/rec/)

几个月来，它在 IE、Chrome 和 FF 中运行良好，但现在在 xml 文件能够加载之前出现错误……仅在 Chrome 和 FF 中……IE8 可以正常工作。

这是 FF: [13:51:18.454] TypeError: a is undefined @ [http://maps.gstatic.com/intl/en_us/mapfiles/api-3/10/15a/main.js:25的错误](http://maps.gstatic.com/intl/en_us/mapfiles/api-3/10/15a/main.js:25)

这是 Chrome 的错误：Uncaught TypeError: Cannot call method 'substr' of undefined

我不确定如何隔离错误 b/c，它看起来像是 google api 代码的一部分。

您对如何解决此问题有任何想法吗？谢谢你的时间，

鲥鱼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T23:57:01.540

API v3.10 与markermanager v1.0 不兼容；他们发布了[兼容的新版本 v1.1](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.1/)。

在问题跟踪器中查看[此问题。](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4585)

# github - jenkins 没有响应 github webhook`

> ID：13555998
> 
> 赞同：3
> 
> 时间：2012-11-25T22:01:30.897
> 
> 标签：github, jenkins, githooks

我让 Jenkins 与 Github 交谈，我可以手动启动构建并成功！这是一个私人 Github 仓库。

我无法让 webhook 工作，所以当我签​​入我的仓库时，Jenkins 会拉取并自动构建？

我在 Jenkins（GitHub 插件）下放置了一个服务挂钩。测试钩子显示“有效负载已部署”

这就是我的钩子的样子 [http://myjenkinsurl.com:8080/github-webhook/](http://myjenkinsurl.com:8080/github-webhook/)

在 Jenkins 配置中，我选择了“手动管理挂钩 URL”